# StackOverflow 问答 10426000-10426999

# installation - 从标签内跳转到另一个标签

> ID：10426008
> 
> 赞同：0
> 
> 时间：2012-05-03T06:09:00.333
> 
> 标签：installation, nsis

**在 NSIS 中，如何从另一个标签内跳转到一个标签？**

注意：我不确定我所说的是否真的被称为标签，如果我错了，请纠正我。

在以下代码中，我想跳转到标签“InstallFiles”，请参见“# SEE HERE”行：

```
# the following code is from within a macro
# Check the directory exists
IfFileExists $installDirectory InstallFiles CreateDirThenInstall

CreateDirThenInstall:   # this is a label...I think? :P
  file $installDirectory
  # SEE HERE: HOW DO I call the label 'InstallFiles'?

InstallFiles:
  DetailPrint "SetOverwrite on."
  SetOverwrite try
  SetOutPath "${dir}"
  file "Attributes_to_trees_panel.4do"
  file "ATTRIBUTES_TO_TREES_PANEL.hlp" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T07:51:34.987

**从下面的行转到`InstallFiles`标签**您无需做任何事情**`CreateDirThenInstall`：只需让执行到达下一行。**

 **您可能误解了标签实际上并不声明子程序，它们仅放置可以从任何流控制指令（在*当前*函数或节中）到达的“符号”，例如`StrCmp`,`IntCmp`和`Goto`s。如果标签上方有语句并且没有跳转或`Return`就在它之前，则执行继续到标签之后的下一条语句。**

# c# - WCF - 错误处理取决于使用的绑定？

> ID：10426014
> 
> 赞同：1
> 
> 时间：2012-05-03T06:09:20.667
> 
> 标签：c#, .net, wcf, wcf-binding, wcf-client

就所使用的绑定而言，处理异常的方式有什么不同吗？

如果我使用 WSHttpBinding 或 BasicHttpBanding，我会得到不同的结果。

例如，这是我在客户端的错误处理例程：

```
//MyClient client = new MyClient("WSBinding");
MyClient client = new MyClient("BasicBinding");
try
{

    Result = client.DoTheWork("test");
    Console.WriteLine(Result);
}
catch (FaultException e)
{
    if (e.Code.SubCode.Name.Equals("BadParameters"))
        Console.WriteLine("Bad parameter entered");

    Console.WriteLine(e);
} 
```

当我使用 WSHttpBinding 时，我可以在客户端捕获异常，但是如果我使用 basicHttpHandling 我不能，我得到：

```
Unhandled Exception: System.NullReferenceException: Object reference not set to
an instance of an object. 
```

这是我的 web.config，

```
<system.serviceModel>
<bindings>
  <basicHttpBinding>
    <binding name="basicBinding">
      <security mode="TransportCredentialOnly">
        <transport clientCredentialType="Windows" />
      </security>
    </binding>
  </basicHttpBinding>   
  <wsHttpBinding>
    <binding name="wsBinding">
      <security mode="None">
        <transport clientCredentialType="None" />
        <message establishSecurityContext="false" />
      </security>
    </binding>
  </wsHttpBinding>
</bindings>
<services>
  <service name="MailboxServiceLibrary.MailboxService" behaviorConfiguration="ServiceBehavior" >
    <!--endpoint address="" binding="wsHttpBinding" bindingConfiguration="wsBinding" contract="ParServiceLibrary.IParService">
      <identity>
        <dns value="MyServer.com" />
      </identity>
    </endpoint-->     
    <endpoint address="" binding="basicHttpBinding" bindingConfiguration="basicBinding" contract="ParServiceLibrary.IParService"/>
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="ServiceBehavior">
      <serviceMetadata httpGetEnabled="True"/>
      <serviceDebug includeExceptionDetailInFaults="True"/>
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

似乎 BasicHttpBinding 使用 Soap 1.1 格式，而对于 WSHttpBinding，它使用 Soap 1.2 格式，但不确定这是否是原因。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T14:31:09.260

我刚刚意识到我使用了错误的方法来捕获客户端站点中的异常，

我正在使用，

```
if (e.Code.SubCode.Name.Equals("MyFaultID")) 
```

而且一定是，

```
if (e.Code.Name.Equals("MyFaultID")) 
```

这样，在两种绑定中都可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T12:21:58.417

这对我来说看起来不对：

```
<security mode="TransportCredentialOnly"> 
```

它应该是 "Transport" 、 "Message" 或 "TransportWithMessageCredential" - 不确定这是否导致了您的问题，但您已经为 basicHttpBinding 添加了安全性并为 wsHttpBinding 删除了它，所以不确定这最终是否是一个公平的测试？

# javascript - 使用 Google Translate API 将 JavaScript 中的内容翻译成 HTML

> ID：10426017
> 
> 赞同：4
> 
> 时间：2012-05-03T06:09:30.893
> 
> 标签：javascript, google-translate

我需要创建一个按钮，该按钮能够在法语和英语之间切换页面内容的语言。

我怎样才能使用谷歌翻译 API 呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T12:12:53.317

这有帮助吗：

```
<div id="google_translate_element"></div>

<script>
function googleTranslateElementInit() {
  new google.translate.TranslateElement({
    // here is where you change the language
    pageLanguage: 'en'
  }, 'google_translate_element');
}
</script>

<script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script> 
```

[来源](http://translate.google.com/translate_tools)

# javascript - 选中的单选按钮未在 UI 中更新

> ID：10426019
> 
> 赞同：0
> 
> 时间：2012-05-03T06:09:39.443
> 
> 标签：javascript, jquery, html, jquery-mobile, radio-button

我已经使用 Jquery 检查了单选按钮，但它没有在 UI 中更新。任何人都有任何想法。以下是我的片段......

```
<!DOCTYPE html> 
<html> 
    <head> 
    <title>Radio Button</title> 
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
    <script>
    function getValue() {  
    alert("Value is :"+$('input[name=animal]:checked').val());
    }

    function setValue(toBeSetID) {  
    $("input[name=animal][id=radio-choice-2]").prop("checked", true);
    $("label[for='rock']").addClass("ui-radio-on");
    alert("Value is :"+$('input[name=animal]:checked').val());
    }
    </script>
    </head> 
<body> 
<div data-role="page">
<div data-role="header">
    <h1>Radio Button</h1>
</div><!-- /header -->
<div data-role="content">   
    <input type="radio" name="animal" id="cat" value="Cat" />
    <label for="cat">Cat</label>
    <input type="radio" name="animal" id="radio-choice-2" value="choice-2"/>
    <label for="radio-choice-2">Dog</label>
    <input type="radio" name="animal" id="radio-choice-3" value="choice-3"  />
    <label for="radio-choice-3">Hamster</label>
    <input type="radio" name="animal" id="radio-choice-4" value="choice-4"  />
    <label for="radio-choice-4">Lizard</label>
    <input type="button" value="Get Radio Button Value" onclick="getValue();">
    <input type="button" value="Set Radio Button Value" onclick="setValue();">
</div><!-- /content -->
</div><!-- /page -->
</body>
</html> 
```

它由程序检查为警报框，但未在 UI 中更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T07:05:11.017

`checked`正如 Chase 在他对您的其他问题的回答中所说，当您更改底层表单元素的属性时，您必须刷新 jQuery Mobile 小部件。这可以通过编写：

```
$("input[name=animal][id=radio-choice-2]")
    .prop("checked", true).checkboxradio("refresh"); 
```

这样，您不必自己操作类，移动小部件可以完成所有工作。

请注意，您的选择器以具有`id`属性的元素为目标，因此可以简化：

```
$("#radio-choice-2").prop("checked", true).checkboxradio("refresh"); 
```

# java - Java拆分整数链表

> ID：10426021
> 
> 赞同：2
> 
> 时间：2012-05-03T06:09:43.253
> 
> 标签：java, linked-list

我需要编写一个以单个整数链表和一个称为拆分值的特殊值开头的方法。列表的元素没有特定的顺序。该方法将节点划分为两个链表：一个包含包含小于拆分值的元素的所有节点，另一个包含所有其他节点。如果原始链表有任何重复的整数（即任何两个或多个具有相同元素的节点），则具有该元素的新链表应该具有相同数量的重复该元素的节点。该方法返回两个头引用——一个用于创建的每个链接列表。

我已经花费了无数个小时试图做到这一点，并认为这是最接近的，但在编译时出现错误，我的 copyTail* IntNodes 可能未初始化。我的代码也可能完全错误....有任何帮助指向我正确的方向吗？

```
public static IntNode[ ] listSplitLessGreater(IntNode source, int splitter)
{
  IntNode copyHeadLess;
  IntNode copyTailLess;
  IntNode copyHeadGreater;
  IntNode copyTailGreater;
  IntNode[ ] answer = new IntNode[2];
    boolean less = true;
    boolean greater = true;

  // Handle the special case of the empty list.   
  if (source == null)
     return answer; // The answer has two null references .

  //Split list into two lists less and greater/equal than splitter.     
  while (source.link != null)
  {
    if (splitter < source.data)
        {
            if (less)
            {
            copyHeadLess = new IntNode(source.data, null);
            copyTailLess = copyHeadLess;
            less=false;
            }
            else
            {
            source = source.link;
            copyTailLess.addNodeAfter(source.data);
            copyTailLess = copyTailLess.link;

            }
        }
        else
        {
            if (greater)
            {
            copyHeadGreater = new IntNode(source.data, null);
            copyTailGreater = copyHeadGreater;
            greater=false;
            }
            else
            {
            source = source.link;
            copyTailGreater.addNodeAfter(source.data);
            copyTailGreater = copyTailGreater.link;

            }
        }

    }      

  //Return Head References
  answer[0] = copyHeadLess;
  answer[1] = copyHeadGreater;

  return answer; 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T06:14:58.030

我认为您通过仅使用单个类 ( `IntNode`) 对列表进行建模，使其变得比需要的更复杂。如果将其建模为“列表”和“列表中的节点”，那么很容易得到一个*空*列表。您也不需要同时跟踪头部和尾部 - 列表可以做到这一点。在这一点上，它非常简单：

*   创建两个空列表，一个用于“较低”，一个用于“不较低”
*   遍历原始列表：
    *   确定要将元素添加到哪个列表
    *   添加元素
*   返回两个列表（例如，使用您所做的数组）

请注意，即使没有它，您也可以通过仅使用`null`表示“我还没有这个列表”来简化您的代码。目前，您的代码无法编译，因为`copyHeadLess`etc 在使用时并未*明确分配*。**您**知道在分配它们之前不会尝试使用它们，但编译器不会。不过，我仍然推荐改造方法:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T06:16:05.327

如果 source 不为空，但 source.link 为空（列表仅由一个元素组成），那么您永远不会分配给您的 copyHeadLess 等变量。尝试将它们初始化为 null 或任何默认值：

```
 IntNode copyHeadLess = null;
  IntNode copyTailLess = null; 
  IntNode copyHeadGreater = null; 
  IntNode copyTailGreater = null; 
  IntNode[ ] answer = new IntNode[2]; 
    boolean less = true; 
    boolean greater = true; 

  // Handle the special case of the empty list.    
  if (source == null) 
     return answer; // The answer has two null references . 

  //Split list into two lists less and greater/equal than splitter.      
  while (source.link != null) 
  { 
    // what about case where source isn't null but source.link is null?
  }       

  //Return Head References 
  answer[0] = copyHeadLess; // this may have never been assigned in your original code
  answer[1] = copyHeadGreater; // this may have never been assigned in your original code

  return answer; 

 } 
```

# java - 没有关注 swt 中的关键事件

> ID：10426022
> 
> 赞同：2
> 
> 时间：2012-05-03T06:09:46.547
> 
> 标签：java, swt, rcp, keyevent

我目前在使用 SWT 时遇到问题`KeyEvent`。在 RCP 应用程序中，我有几个控件，如果您正在切换，它们将被聚焦，例如，第一个工具栏图标，另一个，最后是编辑器和编辑器中的一个类（复合，它也会被聚焦）。

这个特定的类接收关键事件；只有 - 当然 - 如果它被聚焦并且我需要处理这些事件（记住这个类在编辑器聚焦*后*获得焦点，因为编辑器拥有一个实例）

例如，如果鼠标在该区域上，是否有任何方法可以保证该合成物具有焦点？

已经尝试用`MouseEvent`s 解决这个问题，但即便`setFocus()`如此也不总是提供焦点（同样适用于 s `forceFocus()`）。

# msbuild - csproj 中 PreBuild 事件命令的 PreBuild

> ID：10426029
> 
> 赞同：0
> 
> 时间：2012-05-03T06:10:31.723
> 
> 标签：msbuild, csproj

我可以在 csproj 文件中指定在预构建事件中执行的 exe 应该在执行之前构建吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T13:52:26.487

您可以通过 Visual Studio 来完成，它实际上会编辑您的 .csproj 文件。

右键单击项目并选择项目依赖项并选择您需要在此项目之前构建的项目。通过选择 Build order 选项卡对其进行验证。

# sql - 更改表添加具有默认值和 FK 的列，该值在 FK 参考数据中不存在

> ID：10426035
> 
> 赞同：7
> 
> 时间：2012-05-03T06:11:05.250
> 
> 标签：sql, sql-server, sql-server-2008, tsql, alter-table

这是我的桌子：

**会员**：身份证，...

**产品**：ID，....

`Member`如果 Id = 0 并且我不想添加 Id = 0 的任何成员，我的表没有一些值，所以我尝试运行此脚本：

```
ALTER TABLE [Product]
ADD [Member_Id] BIGINT  NOT NULL  DEFAULT(0),
CONSTRAINT [FK_Product_Member] FOREIGN KEY ([Member_Id]) REFERENCES [Member]; 
```

所以有一个错误：

```
The ALTER TABLE statement conflicted with the FOREIGN KEY constraint "FK_Product_Member". 
```

所以我试试这个：

```
SET IDENTITY_INSERT [Member] ON
INSERT INTO [Member] ([Id]) VALUES  (0);
SET IDENTITY_INSERT [Member] OFF

ALTER TABLE [Product]
ADD [Member_Id] BIGINT  NOT NULL  DEFAULT(0),
CONSTRAINT [FK_Product_Member] FOREIGN KEY ([Member_Id]) REFERENCES [Member];

DELETE FROM [Member] WHERE [Member].[Id] = 0; 
```

然后新的错误是：

```
The DELETE statement conflicted with the REFERENCE constraint "FK_Product_Member". 
```

如果我尝试再次创建所有表，当然一切都会好起来的，因为我的数据丢失了，所以需要备份、创建表和恢复数据。那么有什么办法可以在这种情况下改变 Table 吗？你的建议是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-03T06:32:15.517

您可以在引用表中拥有的唯一“值”，例如不强制执行外键约束，是`NULL`. 不是`0`，或任何其他神奇的价值。

所以显而易见的解决方案是允许`NULL`s：

```
ALTER TABLE [Product]
ADD [Member_Id] BIGINT  NULL,
CONSTRAINT [FK_Product_Member] FOREIGN KEY ([Member_Id]) REFERENCES [Member]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T06:31:55.470

您的“更改表”是执行此操作的更好方法。但首先您要添加值为“0”的表，这是“FOREIGN KEY”，但您没有值为“0”的成员，因此您会收到错误。

已知的最好方法是 .alter 表，然后为新列设置真实值，然后更改列并将其设置为“FOREIGN KEY”

# java - eclipse中maven快照的超时时间是多少？

> ID：10426041
> 
> 赞同：1
> 
> 时间：2012-05-03T06:11:43.130
> 
> 标签：java, maven, jar, web, dependencies

我有在 Eclipse 中嵌入的 tomcat 上运行的 Web 应用程序。它工作正常，但是当我第二天尝试时 - 它需要全新安装/构建/刷新所有依赖项。如果我不这样做 - eclipse 不会复制一些依赖项。我每天为此浪费很多时间。是否存在可以在 Eclipse 中工作的方式，而无需每天进行多次重建/刷新、更新依赖项/项目配置等？或者至少 - 什么快照超时？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T06:54:05.647

I am not sure I understand your question, but if you do not want your SNAPSHOT dependencies to be updated too frequently, you can configure this using `updatePolicy` parameter in `settings.xml` suitably. For instance `never` will never update the snapshots.

From the [settings reference](http://maven.apache.org/settings.html),

> updatePolicy: This element specifies how often updates should attempt to occur. Maven will compare the local POM's timestamp (stored in a repository's maven-metadata file) to the remote. The choices are: always, daily (default), interval:X (where X is an integer in minutes) or never.

```
<repositories>
    <repository>
      <id>my-snapshots</id>
      <name>Snapshot Repository</name>
      <releases>
        <enabled>false</enabled>
        <updatePolicy>always</updatePolicy>
        <checksumPolicy>warn</checksumPolicy>
      </releases>
      <snapshots>
        <enabled>true</enabled>
        <updatePolicy>never</updatePolicy>
        <checksumPolicy>fail</checksumPolicy>
      </snapshots>
      <url>http://url/to/my/snapshot/repository</url>
    </repository>
  </repositories> 
```

# c# - 如何在 Metro Style Apps 中的框架导航上传递多个参数？

> ID：10426042
> 
> 赞同：7
> 
> 时间：2012-05-03T06:11:50.917
> 
> 标签：c#, windows-8

我正在为 Win8 构建一个 Metro Style 应用程序，它需要在框架导航上传递两个文本块值。对于一个参数，它可以工作，但对于两个参数，它不起作用。请帮忙！我试过如下： this.Frame.Navigate(typeof(SecondPage),textblock1.Text + textblock2.Text);

我没有显示任何错误，但它不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T13:17:45.880

创建一个具有 2 个属性的新类并将属性设置为文本块值。然后在导航时传递此对象。

创建有效负载类：

```
public class Payload
{
 public string text1 { get;set;}
 public string text2 { get;set;}
} 
```

然后填充有效负载类：

```
Payload payload = new Payload();
payload.text1 = textblock1.Text;
payload.text2 = textblock2.Text; 
```

然后，当您调用 Navigate 时，像这样传递您的有效负载实例：

```
this.Frame.Navigate(typeof(SecondPage),payload); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-15T14:59:04.857

我已经采取了这样的字典对象。

```
Dictionary<string, string> newDictionary = new Dictionary<string, string>();
newDictionary.Add("time", itemObj.repTime);
newDictionary.Add("message", itemObj.repMessage);
Frame.Navigate(typeof(ViewDetails),newDictionary); 
```

在 ViewDetails.xaml.cs 页面上，我检索到了这样的数据，

```
protected override void OnNavigatedTo(NavigationEventArgs e)
    {
         Dictionary<string, string> myDictionary = new Dictionary<string, string>();
         myDictionary = e.Parameter as Dictionary<string, string>;
         timeTB.Text = myDictionary["time"].ToString();
         messageTB.Text = myDictionary["message"].ToString();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-03T13:54:44.553

[http://social.msdn.microsoft.com/Forums/windowsapps/en-US/8cb42356-82bc-4d77-9bbc-ae186990cfd5/passing-parameters-during-navigation-in-windows-8?forum=winappswithcsharp](http://social.msdn.microsoft.com/Forums/windowsapps/en-US/8cb42356-82bc-4d77-9bbc-ae186990cfd5/passing-parameters-during-navigation-in-windows-8?forum=winappswithcsharp) 在这里相同； ）我认为这就是你想要的

# iphone - 如果没有互联网连接 iPhone，以编程方式暂停应用程序？

> ID：10426045
> 
> 赞同：1
> 
> 时间：2012-05-03T06:11:57.670
> 
> 标签：iphone, exit, uiactionsheet

我有一个问题，在 iphone 中检查网络可达性后描述了 [应用程序崩溃？](https://stackoverflow.com/questions/10413433/app-crashes-after-checking-network-reachability-in-iphone) 应用程序首次启动时会出现此问题，但尚未解决！我找到的下一个解决方案是如果在第一次启动时没有找到互联网连接，则关闭应用程序并告诉用户重新打开。

如果按下操作表确定按钮，我可以使用 exit(0)，有人说我们可以使用 exit(0)；如果我们有理由使用它..还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T06:15:55.243

检查您的代码并尝试解决崩溃问题，因为以编程方式退出您的应用程序违反了[iOS Human Interface Guidelines](http://developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/MobileHIG/UEBestPractices/UEBestPractices.html#//apple_ref/doc/uid/TP40006556-CH20-SW27)，这通常不利于通过审查过程：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T06:28:35.307

您可以使用[此示例](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007324-Intro-DontLinkElementID_2)应用程序来满足您的要求。由苹果提供。

在这一点上，他们将它保存在 Application Delegate 下，以便所有类都可以使用。

想法是，您将必须检查 Internet 连接的状态，如果它不可用，则可以添加一个空白视图，其中包含您未连接到 Internet 等信息，并且还可以使用户与您的应用程序 rootviewcontroller 的交互为 false。这样，您将通知用户，他/她将无法采取进一步行动。

再次与此相反，当您连接到互联网时，您需要从 rootviewcontroller 中删除该视图并使用户交互为真。

随附的示例图像。

希望能帮助到你。

![在此处输入图像描述](../Images/3e7a397076f869bcd143c2f26445b055.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T06:27:45.813

[http://developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/MobileHIG/UEBestPractices/UEBestPractices.html#//apple_ref/doc/uid/TP40006556-CH20-SW27](http://developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/MobileHIG/UEBestPractices/UEBestPractices.html#//apple_ref/doc/uid/TP40006556-CH20-SW27)

# java - 如何获得 windows7 的 HINDI ISO 字体？

> ID：10426049
> 
> 赞同：0
> 
> 时间：2012-05-03T06:12:44.123
> 
> 标签：java, fonts, web

我需要开发一个印地语新闻相关的应用程序。所以我需要印地语 ISO 字体，任何人都可以有任何印地语 ISO 字体，请帮我找到这样的印地语字体

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-03T06:24:05.007

印地语字体已随 Windows 7 捆绑包一起提供。但是您可以为此目的使用 Google IME

# php - 更新mysql表

> ID：10426051
> 
> 赞同：0
> 
> 时间：2012-05-03T06:12:49.477
> 
> 标签：php, mysql

你好需要帮助....

我正在使用下面的代码，但我的表格没有更新。

```
$date = array("1001", "1002", "1003");
$sql="select ID from fid;";
$result = mysql_query($sql) or die("Query failed : " . mysql_error());
while($row = mysql_fetch_array($result, MYSQL_NUM)) {
  $test_id = $row[0];           
  foreach ($date as $datex){
    $sql2="UPDATE tbl1 SET date1=(SELECT date1n FROM dat".$datex." WHERE ID=".$test_id.")";                     
    mysql_query($sql2); 
```

但是当我更改`dat".$datex."`to `dat1001`（这是一个真实的表名）和`".$test_id."`to `989`（这是一个真实的 ID 编号）时，它正在更新。我不确定为什么当我使用声明的变量时它没有更新。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T06:19:16.537

我猜你正在使用php。看看这个：

```
mysql_query("UPDATE layout SET `set` = '$set' ... 
```

看看 " 在 ' 之前是怎样的。你只需要用右引号将变量括起来。

看看这个页面：[链接](http://tycoontalk.freelancer.com/the-database-forum/61653-php-variable-in-sql-update-table.html)

# zend-framework - Is it necessary to have a view file with every controller action

> ID：10426055
> 
> 赞同：1
> 
> 时间：2012-05-03T06:13:06.137
> 
> 标签：zend-framework, controller, action

Whenever I create a new action in the zend framework controller using the zf CLI tool it creates the corresponding view file. However, I don't need the view file for every action in the controller.

If I delete that view file manually will it affect my project.xml file or have any other effect on my project ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T06:22:51.277

If your action does not require a view then you can disable it:-

```
public function myactionAction()
{
    $this->_helper->layout()->disableLayout();//to disable layout
    $this->_helper->viewRenderer->setNoRender(true);//to disable view
} 
```

If you want to disable the view/layout for the whole controller then you can put the lines above in the `init()` method of your controller like this:-

```
public function init()
{
    $this->_helper->layout()->disableLayout();//to disable layout
    $this->_helper->viewRenderer->setNoRender(true);//to disable view
} 
```

Once you have done that you can safely delete the view files without affecting anything else.

More details are available in the [Action Controller manual](http://framework.zend.com/manual/en/zend.controller.action.html).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T06:18:51.817

No you don't need to.

Been a while since i worked with Zend Framework. But if memory serves me well, you have two options here.

1 - `$this->_helper->viewRenderer->setNoRender(true);` Which will stop the view being rendered

2- You can simply do what you need to do and call `exit()` in the end of the of your action.

Hope it helps.

Cheers

# c# - 有人在 C# 中比较两个 csv 文件吗？

> ID：10426061
> 
> 赞同：-2
> 
> 时间：2012-05-03T06:13:34.953
> 
> 标签：c#, c#-3.0

有人在使用 c# 应用程序之前做过这件事吗？我有两个 csv 文件，我需要比较这两个 csv 文件并将这些丢失的数据从 CSV1 记录到 CSV2。

设想 ：

1.  比较两个 CSV 文件
2.  如果某些数据在 CSV2 中的 CSV1 中不存在，则创建一个报告并列出从 CSV1 到 CSV2 中不存在的那些数据。

我需要你的帮助来解决这个问题。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T06:24:39.793

您可以将数据导入数据表。[这](http://www.codeproject.com/Articles/11698/A-Portable-and-Efficient-Generic-Parser-for-Flat-F)是导入数据的 CsvReader 的一个很好的示例。

这是一个[MSDN 示例](http://msdn.microsoft.com/en-us/library/bb386998.aspx)，显示了两个数据表的交集。如果您将其更改为使用 except 而不是 Intersect 您将获得差异。

# c - 去除NL的最佳方法

> ID：10426064
> 
> 赞同：-1
> 
> 时间：2012-05-03T06:14:00.597
> 
> 标签：c

我试过这个，但它不适合我：

```
char * remove_nl(char * newstr)
{
    newstr = strdup(newstr);
    newstr[strlen(newstr)-1] = '\0';
    return newstr;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T06:18:25.227

您现在拥有的一切都很好，除了：

1.  你必须确保它`newstr`指向一个有效的字符串；
2.  检查`strlen(newstr) > 0`;
3.  在擦除之前检查它`newstr[strlen(newstr)-1]`确实是一个换行符；
4.  确保调用者`free()`是返回的字符串。

# python - 使 Python 编码语言环境特定

> ID：10426066
> 
> 赞同：0
> 
> 时间：2012-05-03T06:14:25.557
> 
> 标签：python, syntax

我想通了：

*   Python 是一门很棒的编程语言。
*   许多聪明的孩子不懂英语，但仍然想编写代码。

Python 是否支持其英语语法的语言环境包装器？这样所有的关键字，如`import`，`print`等都被翻译成另一种人类语言。连续地将 Python 代码从一种*人类*语言转换为另一种人类语言。将英语简化为几种特定于语言环境的人类语言之一。然后孩子们可以用*他们的*语言编写代码（假设他们的 IDE 支持[Unicode](http://en.wikipedia.org/wiki/Unicode)），这将归结为相同的编译代码。

如果没有，我从哪里开始通过开源项目在 Python 中包含此功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T06:45:27.343

[中文 Python](http://reganmian.net/blog/2008/11/21/chinese-python-translating-a-programming-language/)已经存在。

你的想法的问题在于库——Python 的很多吸引力在于它有很多库。几乎所有人都使用英语。翻译所有这些几乎是不可能的。

另外，Python 不需要太多的英语——它只是单个单词，例如`import`, 和`print`. 它们并不难学。毕竟，孩子们可以很容易地记住 和 之类的单词`lumos`，`wingardium leviosa`这些单词也不是他们的母语。

翻译手册和文档更为重要。

你的想法的另一个坏问题是，如果你教程序员用他们的母语写作，世界其他地方就不会理解他们。至于你的问题，我认为[中文 Python](http://www.chinesepython.org/)应该有一些关于如何翻译 Python 的信息。查看他们的存储库以查看更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T07:05:34.470

如果你真的想让它用你的母语说话，考虑使用像[GvR（Guido van Robot Programming Language）这样的](http://gvr.sourceforge.net/screen_shots/)东西。您可以使用您的母语定义操作。也有一些国际化的努力。例如，它被完全翻译成我的母语（包括控制命令）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T06:17:38.417

您可以使用[Python 语言服务](http://docs.python.org/library/language.html)中的各种模块来解析和编译您的 DSL。

# javascript - 删除文本框

> ID：10426071
> 
> 赞同：-1
> 
> 时间：2012-05-03T06:14:51.123
> 
> 标签：javascript

我是 js 新手，请帮助我！我正在使用动态添加文本框的功能我已经完成了该部分现在我想制作一个 js 函数，该函数在单击删除按钮时删除文本框。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T06:19:28.790

您可以使用下面的 JavaScript 函数来删除元素。

```
function removeElement(divNum) {

  var d = document.getElementById('myDiv');

  var olddiv = document.getElementById(divNum);

  d.removeChild(olddiv);

} 
```

如果您有更多信息，可以访问[这里](http://www.dustindiaz.com/add-and-remove-html-elements-dynamically-with-javascript/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T06:22:00.150

您可以使用
document.getElementById(n).removeChild(thebox);删除一个孩子。

或者你可以像在这个线程上那样[在Javascript中删除 <p class="classname"> ？](https://stackoverflow.com/questions/2720207/remove-p-class-classname-in-javascript)
（不推荐用于您的情况）

最后，您可以将 jquery（著名库）与函数 $("#id_of_element").remove(); （最好和最简单的解决方案）

# sql - SQL 优化查询

> ID：10426075
> 
> 赞同：1
> 
> 时间：2012-05-03T06:14:59.367
> 
> 标签：sql, sql-server

我正在使用以下查询，

```
SELECT qTermine.REISENR, 
       qTermine.REISEVON, 
       qTermine.REISEBIS, 
       MIN(qPreise.PREIS) AS PREIS 
FROM   qTermine, 
       qPreise 
WHERE  qPreise.REISENR = qTermine.REISENR 
       AND qPreise.PROVKLASSE = 1 
       AND qPreise.VERFUEGBAR <> 0 
GROUP  BY qTermine.REISENR, 
          qTermine.REISEVON, 
          qTermine.REISEBIS 
```

我只想选择价格最低的那些行。

可以吗，或者我们可以优化它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T06:21:57.333

查询本身很好。很难回答这个问题，因为对于大多数用途，你写的都很好。您当前是否遇到性能问题，或者此查询执行的时间是否过长？还是您只是谨慎并希望避免引入大瓶颈？如果是后者，我认为您不必担心；同样，在大多数用途中，这很好。

确保`REISENR`在两个表和`qPreise.PREIS`. 至于我有一种感觉`PROVKLASSE`，`VERFUEGBAR`如果你要添加它们，它们的唯一性不足以让索引真正被使用（你可以在你的执行计划中检查），但如果不深入了解你的数据就很难说清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T06:23:19.673

您的查询很好，如果您在“qPreise.PREIS”上有索引，您可以获得更好的性能

# php - 动态增加 Javascript 函数的参数名称的索引

> ID：10426091
> 
> 赞同：0
> 
> 时间：2012-05-03T06:16:11.903
> 
> 标签：php, javascript, jquery

在此代码中，javascript 函数将 from[1] 作为 displayDatePicker('from[1]', false, 'dmy', '-') 中的参数。当我使用 jquery 克隆此（第二）行时，我的所有输入和选择名称都会递增，但 javascript 函数仍将 from[1] 作为参数。我想问如何将它从[1] 更改为 from[2] 等等

```
<tr>
         <td width="19%" align="right" ><input type="text" id="roomcat" name="roomcat[1]" value="Deluxe" /></td>
         <td width="1%" align="center" >&nbsp;</td>
         <td width="15%" align="left" ><select class="f" name="roomtype[1]" id="roomtype">
            <option value="">Please Select</option>
            <option value="Single">Single</option>
            <option value="Double">Double</option>
            <option value="Triple">Triple</option>
            <option value="Extra">Extra</option>
         </select></td>
         <td width="7%" align="left" ><input type="text" id="cfit" name="cfit[1]" /></td>
         <td width="8%" align="left" ><input type="text" id="cgit" name="cgit[1]" /></td>
         <td width="7%" align="center" ><input type="text" id="rfit" name="rfit[1]" /></td>
         <td width="8%" align="center" ><input type="text" id="rgit" name="rgit[1]" /></td>
         <td width="10%" align="center" >
            <input class="f" style="width:70px" type="text" size="12" name="from[1]" id="from" value="<?php if($mode==1)
            {
            echo $from;
            }
            else
            {
            echo "From";
            }?>" readonly="readonly"  />
            <a href="javascript:displayDatePicker('from[1]', false, 'dmy', '-')"><i.m.g alt="Pick a date" src="js/date.g.i.f" border="0" width="17" height="16" /></a>
         </td>
         <td width="10%" align="center" >
            <input style="width:70px" class="f" type="text" size="12" name="to[1]" id="to" value="<?php if($mode==1)
              {
              echo $to;
              }
              else
              {
              echo "To";
              }?>" readonly="readonly" />
              <a href="javascript:displayDatePicker('to[1]', false, 'dmy', '-')"><i.m.g alt="Pick a date" src="js/date.g.i.f" border="0" width="17" height="16"  /></a>
         </td>
         <td width="15%" align="left" >&nbsp;</td>
       </tr> 
```

jQuery代码是

```
 $(document).ready(function() {
    $("#addrow").click(function() {
      var row = $('#table2 tbody>tr:last').clone(true);
        row.find("input:text").each(function(){
    this.name = this.name.replace(/\[(\d+)\]$/, function(str,p1){
            return '[' + (parseInt(p1,10)+1) + ']';
        });
        })
    row.find("select").each(function(){
    this.name = this.name.replace(/\[(\d+)\]$/, function(str,p1){
            return '[' + (parseInt(p1,10)+1) + ']';
        });
        })
      row.insertAfter('#table2 tbody>tr:last');
      return false;
    });
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T17:25:54.693

删除 s 中的`id`属性，您`<input>`不需要它们，并且重复`id`s 只会给您带来无效的 HTML 和奇怪的问题。如果您将它们用于样式，请改用类。如果您需要它们来做其他事情，那么您必须在复制时修复它们，以免最终出现重复`id`的 s。

现在我们可以稍微清理一下您的克隆。当你克隆你的行时，你不需要解析括号中的数字，你可以问表格它有多少行，然后加一来得到新的数字：

```
var n = $('#table2 tbody>tr').length + 1; 
```

然后您的[`replace`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace)电话简化为：

```
this.name.replace(/\[(\d+)\]$/, '[' + n + ']'); 
```

此外，您可以使用[多重选择器](http://api.jquery.com/multiple-selector/)同时遍历`<input>`s 和`<select>`s：

```
row.find('input:text, select').each(...) 
```

您在两种情况下都更改了相同的属性，因此不需要两个相同的循环。

`javascript:displayDatePicker(...)`在你的使用`<a>`是没有必要的。您可以使用 jQuery 通过向它们添加一个类来绑定到这些`<a>`s 上的点击：

```
<a class="datepicker">...</a> 
```

然后使用回调将回调绑定到它们，回调中[`click`](http://api.jquery.com/click/)的[`closest`](http://api.jquery.com/closest/)/[`find`](http://api.jquery.com/find/)组合将让您找到相应的`<input>`：

```
$('a.datepicker').click(function() {
    var $input = $(this).closest('td').find('input[type=text]');
    displayDatePicker($input.attr('name'), false, 'dmy', '-'));
}); 
```

您正在使用[`clone`](http://api.jquery.com/clone/)，因此克隆元素上的事件处理程序将被复制，因此您不必[`delegate`](http://api.jquery.com/delegate/)弄乱[`on`](http://api.jquery.com/on/).

这是一个带有简化 HTML 的演示：http: [//jsfiddle.net/ambiguous/yEaw6/](http://jsfiddle.net/ambiguous/yEaw6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T05:50:53.347

根据我从您问题的第一段中了解到的内容..

这会有帮助吗？

```
var cells = $('td');  //Select row/cells here

$.each(cells, function(index, cell){
  //index corresponds to index of current cell in set of matched cells  
}); 
```

# android - 显示基于地图位置的警报对话框单击？

> ID：10426097
> 
> 赞同：0
> 
> 时间：2012-05-03T06:16:49.117
> 
> 标签：android, listview, maps, android-alertdialog

我正在练习 Android 地图现在我在我的模拟器中成功获取地图当我在 Google 市场中搜索时我发现了一个我尝试开发示例应用程序的有趣应用程序是

[https://play.google.com/store/apps/details?id=streetdirectory.mobile&feature=search_result#?t=W251bGwsMSwxLDEsInN0cmVldGRpcmVjdG9yeS5tb2JpbGUIiXQ](https://play.google.com/store/apps/details?id=streetdirectory.mobile&feature=search_result#?t=W251bGwsMSwxLDEsInN0cmVldGRpcmVjdG9yeS5tb2JpbGUiXQ) ..

```
package com.example.tutorials;

import java.io.IOException;
import java.util.Locale;

import android.app.Activity;
import android.content.Context;
import android.graphics.drawable.Drawable;
import android.location.Geocoder;
import android.location.LocationManager;
import android.os.Bundle;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapController;
import com.google.android.maps.MapView;

import com.google.android.maps.MapView.LayoutParams;  
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.LinearLayout;
import android.widget.Toast;

public class GoogleMap extends MapActivity  
{

     MapView mapView; 

    /** Called when the activity is first created. */
    @Override
    protected boolean isRouteDisplayed() 
    {
    return false;
    }

    public void changeMap(String area)
    {

    mapView = (MapView) findViewById(R.id.mapview);
    MapController mc=mapView.getController();

    GeoPoint myLocation=null;

    double lat = 0;
    double lng = 0;
    try
    {

    Geocoder g = new Geocoder(this, Locale.getDefault());

    java.util.List<android.location.Address> result=g.getFromLocationName(area, 1);
    if(result.size()>0){

    Toast.makeText(GoogleMap.this, "country: " + String.valueOf(result.get(0).getCountryName()), Toast.LENGTH_SHORT).show();
    lat = result.get(0).getLatitude();
    lng = result.get(0).getLongitude();

    }            
    else{
    Toast.makeText(GoogleMap.this, "record not found", Toast.LENGTH_SHORT).show();
    return;
    }
    }
    catch(IOException io)
    {
    Toast.makeText(GoogleMap.this, "Connection Error", Toast.LENGTH_SHORT).show();
    }
    myLocation = new GeoPoint(
    (int) (lat * 1E6),
    (int) (lng * 1E6));
    Drawable drawable = this.getResources().getDrawable(R.drawable.icon);
    mc.animateTo(myLocation);
    mc.setZoom(10);
    mapView.invalidate();
    }
        @Override
        public void onCreate(Bundle savedInstanceState)
        {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        Button btnSearch=(Button) findViewById(R.id.btnSearch);
        btnSearch.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

        EditText txtSearch=(EditText)findViewById(R.id.txtMapSearch);
        String area=txtSearch.getText().toString();
        Toast.makeText(GoogleMap.this, "Click-" + String.valueOf(area), Toast.LENGTH_SHORT).show();
        GoogleMap.this.changeMap(area);

                    }
        });

        mapView = (MapView) findViewById(R.id.mapview);
        MapController mapController = mapView.getController();
        mapController.setZoom(14);

        LinearLayout zoomLayout = (LinearLayout)findViewById(R.id.zoom); 

        }

    } 
```

通过此代码，我在 Android 地图中获得了搜索位置。我如何提供对话框。当我们单击地图位置时？

提前致谢......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T06:35:44.767

您可以为此使用[弹出窗口。弹出窗口可以显示在屏幕上的任何位置。只需注意单击的坐标并在该位置显示弹出窗口。](http://developer.android.com/reference/android/widget/PopupWindow.html)

以下是相同的一般示例。

为您的弹出窗口创建*布局*

```
private PopupWindow mPopup;
//Some code here
LayoutInflater inflater = (LayoutInflater) 
            getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    //Inflate the view from a predefined XML layout
    //This is how your popup will look like
    View layout = inflater.inflate(R.layout.popup_layout,
            (ViewGroup) findViewById(R.id.popup_element));

    mPopup = new PopupWindow(layout, "width", "height", true);
    //Use below when you want to display at specific x-y coord on screen
    mPopup .showAtLocation(layout, Gravity.CENTER, "x-coord", "y-coord");

    //You can use some thing like below to get views from your layout
    TextView mText = (TextView) layout.findViewById(R.id."id for textview");
    mText.setText("Just an example you can set buttons and listviews in similar fashion");

    mPopup.dismiss();//When you want to dismiss Popup 
```

你想有 listView 所以你的布局 xml 会有一个 listview。使用适配器以与通常相同的方式填充列表视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T06:46:27.320

```
public class MapViewer extends MapActivity {

MapView mapView;

MapController mapController;

GeoPoint mgeoPoint;

Drawable marker;

MyLocationOverlay mLocationOverlay;

MotionEvent e;

@Override
protected void onCreate(Bundle icicle) {

    // TODO Auto-generated method stub
    super.onCreate(icicle);
    setContentView(R.layout.main);

    mapView = (MapView) findViewById(R.id.mapView);

    mapController = mapView.getController();

    mapView.setBuiltInZoomControls(true);

    mapView.setStreetView(true);

    marker = getResources().getDrawable(R.drawable.pushpin);

    marker.setBounds(0, 0, marker.getIntrinsicWidth(), marker
            .getIntrinsicHeight());

    mapView.getOverlays().add(new MapOverlay(marker));

    mLocationOverlay = new MyLocationOverlay(this, mapView);
    mapView.getOverlays().add(mLocationOverlay);

    setViewLocation();
}

@Override
protected Dialog onCreateDialog(int id) {

    // TODO Auto-generated method stub

    switch (id) {
        case 0:
            return new AlertDialog.Builder(this).setTitle("Hello").setIcon(
                    R.drawable.ic_launcher).setPositiveButton("Yes",
                    new OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog , int which) {

                            // TODO Auto-generated method stub

                        }
                    }).setCancelable(true).setNegativeButton("Cancel",
                    new OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dialog , int which) {

                            // TODO Auto-generated method stub

                        }
                    })

            .setOnCancelListener(new OnCancelListener() {

                @Override
                public void onCancel(DialogInterface dialog) {

                    // TODO Auto-generated method stub
                    Toast.makeText(getApplicationContext(), "Dismiss",
                            Toast.LENGTH_SHORT).show();
                }

            }).create();

        default:
            break;
    }
    return null;
        }

private void setViewLocation() {

    String[] coordinates = { "22.716221", "75.896816" };

    double lat = Double.parseDouble(coordinates[0]);
    double lng = Double.parseDouble(coordinates[1]);
    mgeoPoint = new GeoPoint((int) (lat * 1E6), (int) (lng * 1E6));

    mapController.animateTo(mgeoPoint);
    mapController.setZoom(15);

    mapView.invalidate();

}

@Override
protected boolean isRouteDisplayed() {

    // TODO Auto-generated method stub
    return false;
}

Point scrPoint;

private GeoPoint getPoint(double lat , double lon) {

    return (new GeoPoint((int) (lat * 1E6), (int) (lon * 1E6)));
}

class MapOverlay extends
        com.google.android.maps.ItemizedOverlay<OverlayItem> {

    List<OverlayItem> ListofGeopoints = new ArrayList<OverlayItem>();

    public MapOverlay(Drawable defaultMarker ) {

        super(defaultMarker);

        ListofGeopoints.add(new OverlayItem(getPoint(22.716221, 75.896816),
                "IN", "India"));

        populate();

    }

    @Override
    protected boolean onTap(int index) {

    switch (index) {
            case 0:
                Toast.makeText(getApplicationContext(), "GeoLocation : 0",
                        Toast.LENGTH_LONG).show();
                showDialog(0);
            break;
        }

        return true;
    }

    String add = "";

    List<Address> add_List = new ArrayList<Address>();

    private void getAddress() {

        add_List = ReverseGeocode
                .getFromLocation(35.594227, -105.223618, 2);

    }

    @Override
    protected OverlayItem createItem(int i) {
        return (ListofGeopoints.get(i));
    }

    @Override
    public int size() {
        return ListofGeopoints.size();
    }
}
} 
```

# opengl - openGL FBO 复制到纹理导致黑色/深色图像

> ID：10426098
> 
> 赞同：0
> 
> 时间：2012-05-03T06:16:54.343
> 
> 标签：opengl, rendering, framebuffer, fbo

在我的程序中，我有必要进行离屏渲染。为此，我使用 FBO。为了查看我绘制的图像是否适合测试目的，我将其从 FBO 复制到纹理，然后将纹理渲染到四边形。问题是当我从 FBO 复制到纹理并渲染它时，图像看起来很暗/变成黑色，但形状是正确的。我尝试在 FBO 中使用纹理作为附件并直接渲染它（而不将其复制到另一个纹理中）并且颜色是正确的。下面是纹理创建的代码

```
//initial texture which works when rendered to a quad  
glGenTexturesEXT(3, &textureID[0]);
glBindTextureEXT(GL_TEXTURE_2D, textureID[0]);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_2D, GL_GENERATE_MIPMAP, GL_TRUE); 
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA8, 600, 512, 0, GL_RGBA, GL_UNSIGNED_BYTE, 0);
//second one which should be a copy of the above but has tha dark color mentioned
glBindTextureEXT(GL_TEXTURE_2D, textureID[1]);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_2D, GL_GENERATE_MIPMAP, GL_TRUE); // automatic mipmap 
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA8, 600, 512, 0, GL_RGBA, GL_UNSIGNED_BYTE, 0);
glBindTextureEXT(GL_TEXTURE_2D, 0);
glFramebufferTexture2DEXT(GL_FRAMEBUFFER_EXT,GL_COLOR_ATTACHMENT0_EXT,GL_TEXTURE_2D,textureID[0],0);
  //Attach depth buffer to FBO
glFramebufferRenderbufferEXT(GL_FRAMEBUFFER_EXT, GL_DEPTH_ATTACHMENT_EXT, GL_RENDERBUFFER_EXT, depth_rb);
st1=glCheckFramebufferStatusEXT(GL_FRAMEBUFFER_EXT); 
```

现在在渲染功能中

```
glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, fb); //biding FBO
glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);
 //render code
unsigned char *pixels= new unsigned char [600*512*4];
glBindFramebufferEXT(GL_FRAMEBUFFER_EXT,0);  //unbiding
glBindTextureEXT(GL_TEXTURE_2D,textureID[1]); //if I change to textureID[0] result is fine
glTexImage2D(GL_TEXTURE_2D,0,GL_RGBA8,600,512,0,GL_RGBA,GL_UNSIGNED_BYTE,pixels);
glBindTextureEXT(GL_TEXTURE_2D,0);
glViewport(0, 0, 600, 512);
glClearColor(1.0,1.0,1.0,1.0);
glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);
glBindTextureEXT(GL_TEXTURE_2D, textureID[1]);
  //setting the correct matrixes + render a quad
 //before rendering a quad I set the color with
glColor3f(1.0, 1.0, 1.0);
delete[] pixels;
glutSwapBuffers(); 
```

我正在使用 glut 进行设置。在取消 FBO 并将纹理作为 glReadPixels(...) 的替代方案后，我尝试了其他功能，例如 glGetTexImage2D，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T08:57:14.283

我不明白您的第二个代码片段中对 glTexImage2D 的调用。`pixels`将只包含垃圾。你期望它做什么？

* * *

纹理一直是 OpenGL 的核心，已经有很长一段时间了。它只是`glGenTextures`而`glBindTexture`不是`...EXT`。此外，我建议使用`...ARB`FBO 功能的版本，或者只使用 OpenGL 核心帧缓冲区支持（更高的 OpenGL 版本）。

# android - SVG - 像图一样的心电图

> ID：10426099
> 
> 赞同：0
> 
> 时间：2012-05-03T06:17:03.597
> 
> 标签：android

有一个要求是在医疗设备连接到安卓设备时呈现心电图。现在有很多关于这个的信息，这让我很困惑.. :-|....我想知道的是在运行 2.2 版的 Android 设备中是否有可能？我该怎么做。有什么帮助或想法可以为我指明正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T06:47:27.157

快速的回答是肯定的，这在 Android 2.2+ 上是完全可能的（例如参见[Frequensee](https://play.google.com/store/apps/details?id=com.DanielBach.FrequenSee "频频")）。

有几种方法可以绘制实时图形，但您很可能最终不得不使用 OpenGLES 来获得最佳性能/质量。如果您不想涉足 OpenGLES 2.0 着色语言和/或还想支持不支持 OpenGLES 2.0 的设备，OpenGLES 1.0 足以用于 ECG 类型图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T06:18:52.260

您可以使用 FreeChart 库绘制图表以获取更多详细信息/代码/Jar 文件/Apk chk 此站点

[http://code.google.com/p/afreechart/](http://code.google.com/p/afreechart/)

# objective-c - 以下 NSString 分配调用之间的基本区别

> ID：10426105
> 
> 赞同：-3
> 
> 时间：2012-05-03T06:17:38.707
> 
> 标签：objective-c, nsstring, nsobject

```
// Directly assigning the value.
NSString *str = [objDictionary objectForKey:@"attributeName"];

// Assigning with convenience method
NSString *str = [NSString stringWithFormat:@"%@", [objDictionary objectForKey:@"attributeName"]];

// Assigning after being owner to that object.
NSString *str = [[NSString alloc] initWithString:@"%@", [objDictionary objectForKey:@"attributeName"]]; 
```

在什么情况下，我们需要确定在代码中需要使用哪一个。？？？任何参考链接相同之间的区别？？？

或者有人可以深入回答这个问题吗？？？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T06:40:27.983

```
NSString *str = [objDictionary objectForKey:@"attributeName"]; 
```

这是您希望使用分配了自动释放内存的局部变量的声明，即您无需担心内存分配/释放。

```
NSString *str = [NSString stringWithFormat:@"%@", [objDictionary objectForKey:@"attributeName"]]; 
```

当您需要在单个字符串中组合不同类型（即整数/浮点数）时，此方法很有用，例如

```
NSString *str = [NSString stringWithFormat:@"%@ and %d", [objDictionary objectForKey:@"attributeName"], 5]; 
```

这将导致“你的价值和 5”

```
NSString *str = [[NSString alloc] initWithString:@"%@", [objDictionary objectForKey:@"attributeName"]]; 
```

这是您分配内存的分配，您需要让该变量使用其他地方，因此它将一直存在，直到并且除非您释放该变量的内存。确保在分配内存时您自己释放内存，因为您是负责人。

对于进一步的详细研究，我建议您访问NSString 的[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)，它可以让您了解可用的类/实例方法以及如何使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T06:23:43.230

假设您的字典包含一个字符串，在 ARC 下，这些都是相同的。使用手动引用计数，前两个是自动释放的，最后一个是保留的。

对于参考指南，您不能比[NSString 类参考](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)做得更好。

# php - 如何使用 mysql 表中的数据进行下拉列表？

> ID：10426107
> 
> 赞同：0
> 
> 时间：2012-05-03T06:17:56.713
> 
> 标签：php, html, drop-down-menu

我想通过从 mysql 表中获取值来创建一个下拉区域。此代码似乎不起作用；它打印出来的只是没有内容的下拉框，我怎样才能让它工作？或者有没有其他程序可以做到这一点？

```
<?
$connection = mysql_connect("localhost", "root", "");
mysql_select_db("test", $connection);
$query = "SELECT full_name FROM test";
$names = mysql_query($query);
function dropDown($content, $result)
 {
while($row = mysql_fetch_row($result))
    {
        $name = $row[0];
        $content .= "<option value='$name'>$name</option>";
    }
 }
$content=<<<EOT
           <html>
              <body>
                 <select name="name">
EOT;

dropDown($content, $names)

$content.=<<<EOT
                 </select>
              </body>   
            </html>          

EOT;

echo $content;
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T06:19:16.073

`return`字符串。PHP 不是 C 语言，您使用*out*参数只是因为它们有时很方便。

```
function dropDown($result, $fieldName)
{
    $content = '';
    while($row = mysql_fetch_row($result)) {
        $name = $row[0];
        $content .= "<option value='$name'>$name</option>";
    }
    return '<select name="'.$fieldName.'">'.$content.'</select>';
}

$content = '<html><body>';
$content .= dropDown($names, 'name'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T07:46:22.587

```
<?php echo $form->dropDownList($model,'courseprefer', array(

'(*value in database table*'=>'displaying value',
 )); ?> 
```

您可以手动添加它们，只需确保数组中的第一个值在数据库表中.. :)

以免出错！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T10:20:16.300

```
 here database details      
  mysql_connect('hostname', 'username', 'password');
mysql_select_db('database-name');

     $sql = "SELECT username FROM userregistraton";
        $result = mysql_query($sql);

         echo "<select name='username'>";
  while ($row = mysql_fetch_array($result)) {
   echo "<option value='" . $row['username'] ."'>" . $row['username'] ."</option>";}
   echo "</select>";

      here username is the column of my table(userregistration)
     it works perfectly

or simply the code is 
        <?
         $sql = "SELECT * FROM userregistraton ";
             $result = mysql_query($sql); ?>

 <select name="username" id="username">
<option value="">Select user</option>
    <?php
        while ($row = mysql_fetch_array($result))
        { ?>
          <option value="<?php echo $row['uid']?>"         <?php    if($row['uid']==$_POST["username"]) echo "selected"; ?> >
   <?php echo $row['username'];?></option>
   <?php
         } ?> 
```

# c# - 安装窗口服务 System.Security.SecurityException 时出错

> ID：10426117
> 
> 赞同：24
> 
> 时间：2012-05-03T06:19:06.027
> 
> 标签：c#, windows-services, installation

我创建了一个窗口服务并安装它，我创建了它的部署项目并安装了它。安装后我盯着它。它成功启动。

第二天我做了一些修改，重建并重新安装，但现在它没有安装。

然后我认为它与安装程序有关，让我们为服务创建一个自定义安装程序，以便我可以随时更新我的​​代码。

如果有人将来需要它，我会像这样创建它。

```
public class MyInstaller : Installer
    {
        ServiceProcessInstaller spi;
        ServiceInstaller si;
        public MyInstaller()
        {            
            spi = new ServiceProcessInstaller();
            spi.Account = ServiceAccount.LocalSystem;

            si = new ServiceInstaller();
            si.StartType = ServiceStartMode.Manual;
            si.ServiceName = "MyService";
            si.DisplayName = "My Service";
            si.Description = "service installed from command line";

            this.Installers.Add(spi);
            this.Installers.Add(si);

        }
} 
```

我通过检查参数 args 从 main 方法调用它。

```
 case "-i":
                            case "-install":
                                ti = new TransactedInstaller();
                                mi = new MyInstaller();
                                ti.Installers.Add(mi);
                                string logPath = Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().Location) + "\\install.log";
                                ctx = new InstallContext(logPath, cmdline);
                                ti.Context = ctx; //.Context ( ctx );
                                ti.Install(new Hashtable());
                                break; 
```

现在当我尝试安装时。**我收到错误 System.Security.SecurityException：找不到源，但无法搜索部分或全部事件日志。无法访问的日志：安全性。**

我用谷歌搜索，发现服务将在安装时尝试访问应用程序日志并在那里写入日志。

我没有写任何事件日志。我有我的 log4net 用于记录。但仍然是它的默认行为。

现在如何克服这个问题？即使我拥有所有权限，它也没有安装。

谢谢

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-05-03T06:27:48.483

我发现有时您可能需要“以管理员身份运行”。如果您从命令提示符安装，您可能需要使用“以管理员身份运行”来启动*它。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-15T21:35:14.097

我可能对消息有单独的根本原因，但我通过将我的服务更改为作为 LocalSystem 运行（这就是我想要的）而不是 LocalService 来修复它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-05T12:51:13.897

我可以确认在“windows 7 64 bit”和“Windows 10”下，您必须：

1）以管理员身份运行Visual Studio命令提示符（右键单击..其他..以管理员身份运行）

[![在此处输入图像描述](../Images/91a80523a9aa41f4f79f3cfe76d0b452.png)](https://i.stack.imgur.com/6i8Ag.png)

2）转到您拥有exe的“obj”文件夹。(cd [所有路径到 \obj]) 3) 启动 installutil [myservice.exe]

如果不以“管理员”身份运行，即使在旧的 win7 上也会失败。:(

注意：MSDN 确实解释了它：

（在：[https](https://docs.microsoft.com/en-us/dotnet/framework/windows-services/walkthrough-creating-a-windows-service-application-in-the-component-designer) ://docs.microsoft.com/en-us/dotnet/framework/windows-services/walkthrough-creating-a-windows-service-application-in-the-component-designer ）

“要安装 Windows 服务，您必须在安装它的计算机上拥有管理凭据。”

:)

# javascript - 替换嵌套数组中索引 x 处的所有字符串

> ID：10426119
> 
> 赞同：0
> 
> 时间：2012-05-03T06:19:10.320
> 
> 标签：javascript, arrays

我有这样嵌套的数组：

```
[["1", "apple 1"], ["1", "pear 2"], ["2", "lemon 1"], ["12", "lemon 12"]] 
```

我想将嵌套数组索引 0 处所有出现的 1、2 和 12 分别替换为`"one"`、`"two"`和`"twelve"`，所以结果是这样的：

```
[["one", "apple 1"], ["one", "pear 2"], ["two", "lemon 1"], ["twelve", "lemon 12"]] 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T06:32:53.067

```
var arr = [
    [ '1', 'apple 1' ], [ '2', 'pear 2' ], [ '3', 'lemon 3' ]
]

var numbers = [ 'one', 'two', 'three' ]

arr.forEach(function (el) {
    el[0] = numbers[el[0]]
})

arr // [ [ 'one', 'apple 1' ], [ 'two', 'pear 2' ], [ 'three', 'lemon 3' ] ] 
```

数组索引实际上是字符串，这就是为什么`numbers['2']`(`'2'`作为字符串) 会检索第三个成员。

要遍历数组，您可以使用[`for`-loop](https://developer.mozilla.org/en/JavaScript/Reference/Statements/for)，但[`forEach`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/forEach)看起来更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T06:32:12.880

就像是 ：

```
var obj = [["1", "apple 1"], ["1", "pear 2"], ["2", "lemon 1"], ["12", "lemon 12"]];

for ( i = 0; i < obj.length ; i++ ) {
    switch(obj[i][0]) {
        case "1" : obj[i][0] = "one"; break;
        case "2" : obj[i][0] = "two"; break;
        case "12" : obj[i][0] = "twelve"; break;
    }
} 
```

这是一个 jsFiddle：http: [//jsfiddle.net/dKZW5/1/](http://jsfiddle.net/dKZW5/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T06:34:56.610

**编辑**

好像我忘了提：这个解决方案需要你对数组进行 JSON 编码：`var workArr = JSON.stringify(theArr).replace(..)`. 一旦你完成：`theArr = JSON.parse(workArr);`

我能想到的最快的事情就是这样做：

```
var str = '[["1", "apple 1"], ["1", "pear 2"], ["2", "lemon 1"], ["12", "lemon 12"]]'.replace(/(\[")12/g,'$1twelve').replace(/(\[")2/g,'$1two').replace(/(\[")1/g,'$one'); 
```

`replace(/(\[")12/g,'$1twelve')`但是这里有几个问题：如果在替换之后再写，它就行不通了。所以要解决这个问题，你可以这样做：

```
str = '[["1", "apple 1"], ["1", "pear 2"], ["2", "lemon 1"], ["12", "lemon 12"]]'.replace(/(\[")12"/g,'$1twelve"').replace(/(\[")2"/g,'$1two"').replace(/(\[")1"/g,'$one"'); 
```

添加结束引号。然而，更优雅的解决方案是创建一个对象：

```
var replace = {'1':'one','2':'two','12':'twelve'}; 
```

并使用匹配的数字作为属性名称。

# android - Android：在 onPostExecute() 中得到 CalledFromWrongThreadException - 怎么可能？

> ID：10426120
> 
> 赞同：24
> 
> 时间：2012-05-03T06:19:11.517
> 
> 标签：android

我有一个应用程序在生产中使用了几个星期，使用 ACRA，在今天报告了一个奇怪的错误之前，我的错误为零。

我有：

```
 android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views. 
```

来自堆栈跟踪中的此方法（已追溯）：

```
at my.app.CountdownFragment$1.void onPostExecute(java.lang.Object)(SourceFile:1) 
```

这是相关的源代码片段：

```
 private void addInstructionsIfNeeded() {
    if (S.sDisplayAssist) {
        new AsyncTask<String, Void, String>() {

            @Override
            protected String doInBackground(String... params) {
                return null;
            }

            /*
             * runs on the ui thread
             */
            protected void onPostExecute(String result) {

                Activity a = getActivity();

                if (S.sHelpEnabled && a != null) {

                    in = new InstructionsView(a.getApplicationContext());

                    RelativeLayout mv = (RelativeLayout) a
                            .findViewById(R.id.main_place);

                    mv.addView(in.prepareView());
                }

            };

        }.execute("");
    }
} 
```

从处理程序调度的消息（ UI`addInstructionsIfNeeded()`主题）调用的位置。

*   `onPostExecute()`在 UI 线程上运行，为什么我有“错误的线程”？
*   这段代码已经在 150 多台设备上运行了超过 100000 次（根据 Flurry），从未出现过这个错误。
*   原始设备是运行 SDK 4.0.4 的三星 SGH-I997

我的问题是：怎么可能？

**编辑**：这一切都发生在一个片段中

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-05-21T14:55:46.660

我遇到了同样的问题，这是另一个android框架错误......

**怎么了：**

在某些情况下，应用程序可以有多个“looper”，因此可以有多个“UI 线程”

**--旁注--**我在这个答案中使用了“UI线程”一词，因为当人们说“UI线程”时，他们通常指的是主线程或入口线程，Android就像之前的许多其他操作系统一样，允许用于多个消息泵（`Looper`在 Android 中称为 a，请参阅：[http](http://en.wikipedia.org/wiki/Event_loop) ://en.wikipedia.org/wiki/Event_loop ）用于不同的 UI 树，因为所有意图和目的的 android 都能够运行多个“UI 线程” “在某些情况下，使用该术语会导致严重的歧义……-- **结束旁注--**

**这表示：**

由于一个应用程序可以有多个“UI 线程”并且`AsyncTask`总是“在 UI 线程上运行” [[ref]](http://developer.android.com/reference/android/os/AsyncTask.html#onPostExecute%28Result%29)，因此有人决定 [糟糕] 而不是 AsyncTask 总是在其创建线程上运行（在 99.999999% 的情况下会成为正确的“UI 线程”）他们决定使用 hocus pocus（或制作不佳的快捷方式，您决定）在“主循环器”上执行..

**例子：**

```
 Log.i("AsyncTask / Handler created ON: " + Thread.currentThread().getId());
    Log.i("Main Looper: " + Looper.getMainLooper().getThread().getId() + "      myLooper: "+ Looper.myLooper().getThread().getId());

    new AsyncTask<Void, Void, Void>() {

        @Override
        protected Void doInBackground(Void... params) {
            Log.i("doInBackground ran ON: " + Thread.currentThread().getId());
            // I'm in the background, all is normal

            handler.post(new Runnable() {

                @Override
                public void run() {
                    Log.i("Handler posted runnable ON: " + Thread.currentThread().getId());
                    // this is the correct thread, that onPostExecute should be on
                }
            });

            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            Log.i("onPostExecute ran ON: " + Thread.currentThread().getId());
            // this CAN be the wrong thread in certain situations
        }

    }.execute(); 
```

**如果从上述不良情况调用，输出将如下所示：**

```
 AsyncTask / Handler created ON: 16
    Main Looper: 1      myLooper: 16
    doInBackground ran ON: 12
    onPostExecute ran ON: 1
    Handler posted runnable ON: 16 
```

***这是一个巨大的失败`AsyncTask`***

如图所示，`Handler.post(Runnable)`在我的特定情况下，可以使用 a 来缓解这种情况，我的“UI 线程”情况的双重性是由于我正在创建一个对话框以响应从 a 调用的 JavaScript 接口方法`WebView`，基本上：`WebView`有它自己的“ UI 线程”，这就是我目前正在运行的线程。

据我所知（没有真正关心或阅读太多）似乎`AsyncTask`该类的回调方法通常运行一个静态实例化的处理程序（参见： http: [//grepcode.com/file/repository.grepcode .com/java/ext/com.google.android/android/4.0.3_r1/android/os/AsyncTask.java#AsyncTask.0sHandler](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/android/os/AsyncTask.java#AsyncTask.0sHandler)），这意味着它总是会在“主线程”或“入口”上执行线程”，他们错误地将其称为“UI 线程”（假定为发生 UI 交互的任何线程，例如在这种情况下为多个线程），这既是 android 团队的劣质工艺和劣质文档......弱酱，酱弱

希望这对你有帮助-ck

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-26T14:39:32.230

有同样的问题。在我的情况下解决了

**简要说明：**

1.  **第一次**在带有 looper 的**非 UI**线程上运行 AsynckTask会导致将 AsyncTask.class 和初始化**sHandler**加载到在该**非 UI** looper 上构造的处理程序。
2.  现在**sHandler**连接到AsyncTask 子类的**任何**实例的**非 UI**线程，并且将在该**非 UI线程上调用****onPreExecute**、**onProgressUpdate**和**onPostExecute**方法（除非 AsyncTask.class 将被卸载）
*******   在上述任何方法中处理 UI 的任何尝试都将导致**android.view.ViewRootImpl$CalledFromWrongThreadException崩溃***   为了避免这种情况，应该**始终在****UI 线程**上运行（至少是**第一次**）AsyncTask ，以便让 AsyncTask 的**sHandler** -field 使用**UI 的 looper进行初始化********

 ********故事：**

有两个生产应用程序：**A** - 主要的 android 应用程序和**B** - 一些实用应用程序。

在集成应用**B** ito 应用**A**后，我们收到了很多崩溃：

```
android.view.ViewRootImpl$CalledFromWrongThreadException: Only the original thread that created a view hierarchy can touch its views. 
```

对于从**AsynckTask.onPostExecute()运行的方法**

经过一番调查，似乎实用程序**B**在其**HandlerThread**中使用了**AsyncTask**

 **在 AsyncTask 的源代码中找到了这些痕迹：

```
private static final InternalHandler sHandler = new InternalHandler(); 
```

这是用于将**onPostExecute()**发送到 UI 线程的处理程序。

这个处理程序是**静态**的，它将在类加载期间被初始化，即第一个**新的 AsyncTask()**出现

这意味着**onPostExecute**将始终发布到第一次调用**new AsyncTask()的线程（除非 AsyncTask.class 将被卸载并再次加载）**

在我的情况下，流程是这样的：

```
1 - starting app A
2 - initializing B form A
3 - B creates its own HandlerThread and launches AsyncTask <- now onPostExecute wil be posted to this HandlerThread no matter where from an instance of AsyncTask will be launched in future
4 - create AsyncTask in the app A for a long operation and update UI in its onPostExecute
5 - when executing onPostExecute() the CalledFromWrongThreadException is thrown 
```

然后我的一个朋友向我展示了来自 [android.developers](http://developer.android.com/reference/android/os/AsyncTask.html)的相关文档（**线程规则**部分）：

> AsyncTask 类必须在 UI 线程上加载。这是从 JELLY_BEAN 自动完成的。任务实例必须在 UI 线程上创建。必须在 UI 线程上调用 execute(Params...)。

希望它可以帮助弄清楚情况）

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-07-17T10:09:41.240

也许原因是**Flurry**？我在使用 Flurry **3.2.1**时遇到了这个异常。但是当我回到 Flurry **3.2.0**时，我没有这个异常

使用 Flurry **3.2.2**及更高版本。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-05-18T12:42:35.210

将以下代码行放在 Application onCreate 中应该可以解决问题：

```
 /**
     * Fixing AsyncTask Issue not called on main thread
     */
    try {
        Class.forName("android.os.AsyncTask");
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    } 
```

似乎问题是在 AsyncTask 类首次在不是我们的主线程的不同主线程上启动时创建的，我通过将底部的代码添加到我的 Application onCreate 来检查它

```
 new Thread(new Runnable() {

        @Override
        public void run() {

            Log.i("tag","1.3onPostExecute ran ON: " + Thread.currentThread().getId());
            Looper.prepare();
            new AsyncTask<Void,Void,Void>(){
                @Override
                protected Void doInBackground(Void... params) {
                    Log.i("tag","2onPostExecute ran ON: " + Thread.currentThread().getId());
                    return null;
                }

                @Override
                protected void onPostExecute(Void aVoid) {
                    Log.i("tag","1.2onPostExecute ran ON: " + Thread.currentThread().getId());
                    super.onPostExecute(aVoid);
                }
            }.execute();
            Looper.loop();
            Looper.myLooper().quit();
        }
    }).start(); 
```

此代码将在不是应用程序主线程的主线程中初始化 AsynTask，并将导致应用程序在任何其他 AsyncTask 中崩溃，该 AsyncTask 将在执行后执行任何 UI。因 CalledFromWrongThreadException 而崩溃

希望它能清除更多的东西。

感谢大家对此的大力帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-03T06:27:13.197

哪里

```
runOnUiThread(new Runnable() {
    public void run() { /*code*/ } ); 
```

在你的代码中

```
/*
             * runs on the ui thread
             */
            protected void onPostExecute(String result) {

                Activity a = getActivity();

                if (S.sHelpEnabled && a != null) {

                    in = new InstructionsView(a.getApplicationContext());

                    runOnUiThread(new Runnable() {
                       public void run() {

                    RelativeLayout mv = (RelativeLayout) a
                            .findViewById(R.id.main_place);

                    mv.addView(in.prepareView());
                   }
                }

            }; 
```

试试这个代码。我认为这可以解决问题

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-03T06:22:18.850

我认为问题在于`Activity a = getActivity();`我认为你应该在进入 AsyncTask 之前这样做********

# javascript - Javascript拒绝工作？

> ID：10426123
> 
> 赞同：0
> 
> 时间：2012-05-03T06:19:19.847
> 
> 标签：javascript, html, firebug

好吧，我正在使用 HTML5 画布用 js 编写一个小游戏。我在一个 html 文件中获得了画布和标签，在一个名为 java.js 的单独文件中获得了 javascript。

我在脚本中的某个时刻收到了一些警报，以了解当我将 html 加载到浏览器中时它是否运行。问题是它没有显示任何这些并且 javascript 没有加载。

最奇怪的是萤火虫所做的：在“HTML”下，当我单击标签时，它会显示完整的脚本，但在“脚本”下，它会告诉我页面上没有 javascript。

帮助？

我的html：

```
 <body><canvas id="canvas" width="1000px" height="500px" style="border:1px solid #c3c3c3;">text</canvas>
<script type="text/javascript" src="java.js">
</script></body> 
```

当我将脚本标签放在头部时：

```
<head><script type="text/javascript" src="java.js">
    </script></head> 
<body><canvas id="canvas" width="1000px" height="500px" style="border:1px solid #c3c3c3;">text</canvas>
    </body> 
```

我的js：

```
alert('define');
var scrollx=0,
scrolly=0,
keyID=0,
global = {};
global.players=[];
global.playermap=[];
var c=document.getElementById("canvas"),
ctx=c.getContext('2d');
alert('init');

function pony (x,y, hspd, vspd) {
alert("pony created!");
this.x = x;
this.y = y;
this.vsp = vspd;
this.hspd = hspd;
this.image = new Image();
this.image.src = "alien.png";
this.framenumber = 11;
this.frameactual = 1;
this.framespeed=0.8;
this.frametime =50;
this.framewidth = this.image.width / this.framenumber;
this.frameheight = this.image.height;
this.colorbody="#000000";
//
this.nextframe = function() {
this.frameactual=this.frameactual+this.framespeed;
if (Math.round(this.frameactual)>this.framenumber){this.frameactual=1;}
this.draw();
};
//
this.draw = function() {
this.frame=Math.round(this.frameactual);
ctx.drawImage(this.image,(this.frame-1)*this.framewidth,0,this.framewidth,this.image.height,this.x-scrollx-(this.framewidth/2),this.y-scrolly-(this.image.height/2),this.framewidth,this.image.height);
};
//
//var _this=this;
//this.frametimer=setInterval(function(){_this.nextframe();},this.frametime);
alert("time set");
}
//
function setpos_player(id,x,y,hspd,vspd){
alert("this");
if (typeof(global.playermap[id])=="undefined"){
global.players.push(new pony (x,y, hspd, vspd));
global.playermap[id]=global.players.length;}
else{
global.players[global.playermap[id]].x=x;
global.players[global.playermap[id]].y=y;
global.players[global.playermap[id]].hspd=hspd;
global.players[global.playermap[id]].vspd=vspd;}
}
//
function clear(){
    ctx.fillStyle = "#FFFFFF";
    ctx.beginPath();
    ctx.rect(0,0,1000,1000);
    ctx.closePath();
    ctx.fill();}

document.onkeypress = KeyCheck; 
document.onkeydown = KeyCheck;     
document.onkeyup = KeyRelease;   

function KeyCheck(e)

{
   keyID = (window.event) ? event.keyCode : e.keyCode;
   }
function KeyRelease(e)
{keyID=0;}

//
function step(){
clear();
for (var i = 0; i < global.players.length; i++) {
    _this=global.players[i];
    _this.y+=_this.vspd;
    _this.nextframe();
    //Do something
}
//global.players[1].nextframe();
timer=setTimeout(function(){step();},80);
}
setpos_player(1,200,200,0,1);
var timer=setTimeout(function(){step();},80); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T06:35:46.533

似乎你在这里有一个错误：

```
if (typeof(global.playermap[id])="undefined"){ 
```

应该

```
if (typeof(global.playermap[id])=="undefined"){ 
```

另外，尝试替换所有`alert`调用`console.log`，然后检查控制台是否有错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T06:30:41.147

在 html 中使用之前声明脚本，您可以像这样将该脚本放在页面的头部

```
<head>
<script type='text/javascript' src='java.js'></script>
</head> 
```

尝试一次并在此处重播

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T06:37:25.310

```
if (typeof(global.playermap[id])="undefined"){ 
```

到

```
if (typeof global.playermap[id] == "undefined"){ 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-03T06:26:18.373

尝试为 .js 文件放置正确的目录路径。例如，它可能是 /java.js 或“/scripts/java.js”。

是否已加载 javascript 的指示将是您的警报是否弹出。

此外，您应该知道应该在 HEAD 部分添加带有外部 .js 的脚本标签。

# ruby-on-rails - 如何在 RoR 中上传文本文件并将内容解析到数据库中

> ID：10426135
> 
> 赞同：6
> 
> 时间：2012-05-03T06:19:58.097
> 
> 标签：ruby-on-rails, ruby

到目前为止，我已经成功上传了一个文件：

```
# In new.html.erb
<%= file_field_tag 'upload[file]' %> 
```

并访问控制器中的文件

```
# In controller#create
@text = params[:upload][:file] 
```

但是，这给了我文件名，而不是文件的内容。如何访问其内容？

我知道这是一个跳跃，但是一旦我可以访问文件的内容，就可以上传文件夹并遍历文件吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-07-03T15:39:02.843

## 完整示例

例如，上传包含联系人的导入文件。您无需存储此导入文件，只需对其进行处理并丢弃即可。

### 路线

**路线.rb**

```
resources :contacts do 
  collection do
    get 'import/new', to: :new_import  # import_new_contacts_path

    post :import                       # import_contacts_path
  end
end 
```

### 形式

**意见/联系人/new_import.html.erb**

```
<%= form_for @contacts, url: import_contacts_path, html: { multipart: true } do |f| %>

  <%= f.file_field :import_file %>

<% end %> 
```

### 控制器

**控制器/contacts_controller.rb**

```
def new_import
end

def import
  begin
    Contact.import( params[:contacts][:import_file] ) 

    flash[:success] = "<strong>Contacts Imported!</strong>"

    redirect_to contacts_path

  rescue => exception 
    flash[:error] = "There was a problem importing that contacts file.<br>
      <strong>#{exception.message}</strong><br>"

    redirect_to import_new_contacts_path
  end
end 
```

### 联系方式

**模型/contact.rb**

```
def import import_file 
  File.foreach( import_file.path ).with_index do |line, index| 

    # Process each line.

    # For any errors just raise an error with a message like this: 
    #   raise "There is a duplicate in row #{index + 1}."
    # And your controller will redirect the user and show a flash message.

  end
end 
```

希望有帮助！

约书亚

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-03T07:33:35.187

在 new.html.erb

```
<%= form_tag '/controller/method_name', :multipart => true do %>
   <label for="file">Upload text File</label> <%= file_field_tag "file" %>
   <%= submit_tag %>
<% end %> 
```

在控制器#method_name 中

```
uploaded_file = params[:file]
file_content = uploaded_file.read
puts file_content 
```

在 Rails 中查看更多文件上传[http://www.tutorialspoint.com/ruby-on-rails/rails-file-uploading.htm](http://www.tutorialspoint.com/ruby-on-rails/rails-file-uploading.htm) [如何在 Ruby 中读取整个文件？](https://stackoverflow.com/questions/3328495/how-to-read-whole-file-in-ruby)

希望这会帮助你。

# objective-c - 在objective-c中扩展类

> ID：10426136
> 
> 赞同：0
> 
> 时间：2012-05-03T06:19:59.343
> 
> 标签：objective-c

我正在尝试学习objective-c并遇到一些问题。我创建了类 Creature 并使用 Dog 类对其进行了扩展。

但是当我调用方法状态时，返回结果看起来像是从生物类调用的，而不是狗。

github[源码链接](https://github.com/Kein1945/objective-c-first-step)

ps 如果你发现其他的错误和内存泄漏点，请报告我）

代码：

```
@interface Creature: NSObject
    - (NSString *)state;
..

@implementation Creature
- (NSString *)state
{
    return [_name stringByAppendingString: ([self isHungry] ? @" is hungry" : @" not hungry")];
}

// Dog 

@interface Dog: Creature
..

@implementation Dog
- (NSString *)state
{
    return [[super state] stringByAppendingString: ([self isFriendly] ? @" and friendly" : @" and unfriendly")];
} 
```

和调用方法

```
Dog *creature = [Dog CreatureBorn];
NSLog([creature state]); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T06:42:03.463

看起来您只有一个 Dog.h 并且没有实现文件 (Dog.m)。因为 Objective-C 是一种动态语言，所以所有类都是在运行时创建的（使用 objc_allocateClassPair() 函数，IIRC）。通过仅拥有一个头文件，您只是向前声明了该类，而实际上并没有创建它。

此外，您的 Dog 类不是从 Creature 继承的，它只是通过 PetProtocol 协议进行确认。Objective-C 中的协议更像 Java 或 C# 中的接口，它们不是类。

在内部，Objective-C 运行时非常简单。它只是归结为一堆 C 函数和结构。如果您有兴趣了解 Objective-C 中的工作原理并且不介意阅读 C 代码，我强烈建议您阅读 Apple 的[Objective-C 运行时参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html)。

# installation - 从宏中设置全局变量

> ID：10426143
> 
> 赞同：1
> 
> 时间：2012-05-03T06:20:38.610
> 
> 标签：installation, nsis

在 NSIS 脚本语言中，当我从宏中访问全局变量时出现错误。

我的变量 installDirectory 真的是全球性的吗？如何从宏或函数中设置变量 installDirectory（如果它可能在函数中）？

```
var installDirectory

!macro IdentifyDir
   IfFileExists C:\test\9.00\ Version9 AbortInstall

   Version9:
      $installDirectory "C:\test\9.00\"
   AbortInstall:
      Abort
!macroend 
```

宏和/或函数也可以在 NSIS 中返回一个值（或者我只使用 push/pop 的 shd）吗？

```
!macro IdentifyDir
   IfFileExists C:\test\9.00\ Version9 AbortInstall

   Version9:
      return "C:\test\9.00\"
   AbortInstall:
      Abort
!macroend

var installDir !insertmacro IdentifyDir # is that valid? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T08:44:19.750

有两个问题：

*   分配一个变量，你错过了一个分配指令；对于字符串变量，您可以使用`StrCpy`：`StrCpy $installDirectory "C:\test\9.00\"`

*   正如[您关于标签的另一个问题](https://stackoverflow.com/q/10426008/317266)所述，标签不是子标签，而只是流控制可以到达的一些定义点，因此当跳转到`Version9`标签时，如果没有另一个跳转，执行将运行到标签后面的`Abort`语句`AbortInstall`。您应该在语句之前放置另一个标签并在标签之前添加一个*（*请注意，宏*在*您放置的位置展开，因此您必须选择一个唯一的标签名称，这与部分或函数不同）*或*`end_of_macro:``!macroEnd``goto``AbortInstall`*`!insertMacro`*（更优雅）反转两个标签：在中止的情况下，执行将在那里停止，在第二种情况下，它将在宏之外继续**

 **```
!macro IdentifyDir 
    IfFileExists C:\temp\9.00 Version9 AbortInstall
AbortInstall:
    Abort
Version9:
    StrCpy $installDirectory "C:\test\9.00\"
!macroend 
```

对于有关返回值的问题，您可以使用默认寄存器`$0`to`$9`和`$R0`to`$R9`**

# ruby-on-rails - 如何构建一个复合 Rack 应用程序？

> ID：10426145
> 
> 赞同：1
> 
> 时间：2012-05-03T06:20:43.140
> 
> 标签：ruby-on-rails, ruby, sinatra, rack

我正在尝试构建一个使用 Sinatra 呈现视图并处理文件上传的应用程序，同时使用另一个库来处理 Web 套接字通信（em-websocket）。通常，em-websocket 是一个在不同端口上运行的 EvenMachine 库，但是有一个“机架兼容”版本以某种方式包装了这个库。我想将这些结合起来，以创建一个新的应用程序，该应用程序可以轻松添加/集成/安装到现有的 Rails 应用程序或用作独立应用程序。我以前没有做过这种事情，所以我不知道从哪里开始以及如何做到这一点。如何创建这种不需要任何额外端口且易于安装的复合机架应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T03:35:18.020

您可能希望在[此处查看](http://codex.heroku.com/past/2011/2/15/sinatrabase_in_the_modulnd/)有关创建模块化 Sinatra 应用程序并将它们组合到更大的 Sinatra 应用程序中的信息。您可以查看在主 Sinatra 应用程序中安装[Cramp 。](http://cramp.in/)

# scala - scala中的构造函数（主要/辅助/默认主要）

> ID：10426146
> 
> 赞同：11
> 
> 时间：2012-05-03T06:20:49.890
> 
> 标签：scala, constructor

*Cay Horstmann 的*书*《不耐烦的 Scala》中的*一个非常简单的练习一直困扰着我。它是关于`primary`,`auxiliary`和`default primary`构造函数的：

> **ex 5.10：** 考虑类

```
class Employee(val name: String, var salary: Double) {
  def this() { this("John Q. Public", 0.0) }
} 
```

> 重写它以使用显式字段和默认的主构造函数。

我不确定我应该做什么。你们中的一些人可以提出一个解决方案吗？

然而，尝试解决这个练习可能让我意识到一些我以前没有注意到的关于主构造函数和`val`字段的事情（如你所见，我不太确定）：

如果我说一个`val`字段（如上面`name`的`Employee`类）只能通过`primary`构造函数而不是一个来初始化，我是对的`auxiliary`吗？在后一种情况下，编译器会将其视为对`val`导致错误的字段的重新分配。

起初我认为`val`字段大致相当于java中的最终字段，期望在任何构造函数中首次分配它们是合法的，但似乎我错了。

我对可能只是一个疯狂的猜测不太满意，所以如果有人能给我关于这一点的更准确的信息，我将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-03T07:27:22.080

来自“Scala 编程，第 2 版”第 6.7 段：

> 在 Scala 中，每个辅助构造函数都必须调用与其第一个操作相同的类的另一个构造函数。这条规则的最终结果是 Scala 中的每个构造函数调用最终都会调用该类的主构造函数。因此，主构造函数是类的单一入口点。

所以初始化的所有数据都`val`必须在主构造函数中。

您的具有显式字段的类可能类似于：

```
class Employee(n: String = "John Q. Public", s: Double = 0.0) {
  val name = n
  var salary = s
} 
```

或没有默认参数值：

```
class Employee(n: String, s: Double) {
  def this() = this("John Q. Public", 0.0)
  val name = n
  var salary = s
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-12T15:27:53.920

实际上，我想到的是一个没有参数的主构造函数的版本，如下所示：

```
class Employee {
  private var _name = "John Q. Public"
  var salary = 0.0
  def this(n: String, s: Double) { this(); _name = n; salary = s; }
  def name = _name      
} 
```

显然，这不如在主构造函数中定义字段，这是我想要说明的一点。

# ios - 为什么我的 sqlite3 数据库中有重复记录？

> ID：10426148
> 
> 赞同：1
> 
> 时间：2012-05-03T06:21:10.703
> 
> 标签：ios, database

我在我的 ios 项目中创建了一个数据库并创建了一些表。

```
sqlite3 *dataBase;

NSArray *documentsPaths=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory
                                                            , NSUserDomainMask 
                                                            , YES); 
NSString *databaseFilePath=[[documentsPaths objectAtIndex:0]   stringByAppendingPathComponent:@"mydb"];

if (sqlite3_open([databaseFilePath UTF8String], &dataBase)==SQLITE_OK) { 
    NSLog(@"open sqlite db ok."); 
}

//create tables
const char *createPublicSql="create table if not exists Public (id integer primary key    autoincrement,name text,money_per_month integer,local_respond text,city_call   integer,local_long_call integer,rating integer)";
if (sqlite3_exec(dataBase, createPublicSql, NULL, NULL, &errorMsg)==SQLITE_OK) { 
    NSLog(@"create Public ok."); 
}
else { 
    NSLog(@"error: %s",errorMsg); 
    sqlite3_free(errorMsg); 
} 
```

我在每个表中插入几条记录，例如：

```
const char *insertPublicOneSql="insert into Public  (name,money_per_month,local_respond,city_call,local_long_call,rating)values('p001',50,'全 免',2,3,8)"; 
if (sqlite3_exec(dataBase, insertPublicOneSql, NULL, NULL, &errorMsg)==SQLITE_OK) { 
    NSLog(@"insert 0401 ok."); 
}
else { 
    NSLog(@"error: %s",errorMsg); 
    sqlite3_free(errorMsg); 
} 
```

但是，当我在 Public 中选择 id,name 时：

```
const char *selectPublicSql="select id,name from Public"; 
sqlite3_stmt *statement; 
if (sqlite3_prepare_v2(dataBase, selectPublicSql, -1, &statement, nil)==SQLITE_OK) { 
    NSLog(@"select ok."); 
}
while (sqlite3_step(statement)==SQLITE_ROW) { 
    int _id=sqlite3_column_int(statement, 0); 
    NSString *name=[[NSString alloc] initWithCString:(char *)sqlite3_column_text(statement, 1) encoding:NSUTF8StringEncoding]; 
    NSLog(@"row>>id %i, name %@",_id,name); 
} 
```

结果：

```
2012-05-03 11:04:47.259 China_telecom[2342:f803] row>>id 1, name p001
2012-05-03 11:04:47.260 China_telecom[2342:f803] row>>id 2, name p001
2012-05-03 11:04:47.261 China_telecom[2342:f803] row>>id 3, name p001
2012-05-03 11:04:47.262 China_telecom[2342:f803] row>>id 4, name p001
2012-05-03 11:04:47.263 China_telecom[2342:f803] row>>id 5, name p001
2012-05-03 11:04:47.263 China_telecom[2342:f803] row>>id 6, name p001 
```

有什么问题？

# azure - Windows Azure 表存储 Webrole.cs 与 global.asax.cs

> ID：10426150
> 
> 赞同：0
> 
> 时间：2012-05-03T06:21:20.970
> 
> 标签：azure, azure-table-storage

我已经读过，建立连接和创建表的最简单方法是将以下代码行放在 webrole.cs onStart() 方法中。但由于某种原因，当我将相同的代码放入 global.asax.cs Application_start() 方法时，我遇到了错误。它工作正常吗？这里的区别是我正在谈论的代码：我正在使用表存储...

```
CloudStorageAccount.SetConfigurationSettingPublisher((configName, configSettingPublisher) =>
           {
               var connectionString = RoleEnvironment.GetConfigurationSettingValue(configName);
               configSettingPublisher(connectionString);
           }
          );
 var account =
                  CloudStorageAccount.FromConfigurationSetting(
                  Constants.KEY_STORAGE);

             //create table
             var client = account.CreateCloudTableClient();
             client.CreateTableIfNotExist(Constants.EMAILMERGE_TABLE); 
```

//////////////////////////////////////////我得到的错误是--------- ------------------

## 在使用 FromConfigurationSetting 之前需要调用 SetConfigurationSettingPublisher

Tnx的提示！欢呼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:52:47.427

对于 worker 角色，我们只需要将代码放在 OnStart 中。但是对于网络角色，我们需要将代码放在两个地方。如果要在 OnStart 中访问存储，请将代码放在 OnStart 中。如果你想在你的 web 应用程序中访问存储，请将代码放在 Global.asax 的 Application_Start 中。如果两者都需要，请将代码放在这两个地方。

此致，

明旭。

# ios5 - iOS - 在点击 UIView 时禁用可见的向下状态

> ID：10426152
> 
> 赞同：1
> 
> 时间：2012-05-03T06:21:36.573
> 
> 标签：ios5

我有一个 UIView，它包含一个包含 HTML/Javascript 的底层 UIWebView。在点击 UIView 时，它会将用户带到另一个视图。当我点击 UIView 时，我注意到它选择了整个可视区域（<1 秒），然后将用户带到下一个屏幕。我想让“选择可见区域”不可见。听起来我需要将“showsTouchWhenHighlighted”设置为 NO，但 UIView 中没有这样的访问器。

我在这里有什么选择？

# .net - 如果我们在框架 2.0 上编译我们的 .NET 项目并在框架 4.0 上部署，会有什么风险

> ID：10426153
> 
> 赞同：1
> 
> 时间：2012-05-03T06:21:42.037
> 
> 标签：.net, .net-framework-version

我已经在我的项目所在的本地计算机上安装了 .NET 2.0 框架，并且我的网络服务器已经安装了 .NET 框架 4.0。

请提出如果我们这样做会带来哪些风险或收益，例如在 2.0 上构建项目，然后在 4.0 上部署它。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T06:26:57.443

一般来说，.NET 4 可以很好地运行 .NET 2 应用程序。但是，它是不同的框架和不同的 CLR，因此结果可能会有所不同。

如果您知道您的部署环境将使用 .NET 4，我建议您使用 .NET 4 进行开发。这为您提供了改进的功能（.NET 4 中的许多新内容），并保证了与部署相同的开发环境。

请注意，您可以免费使用[Visual Web Developer Express](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/visual-web-developer-express) (2010) 开发 .NET 4 应用程序以匹配您的网络服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T06:26:38.707

你应该只*把*它作为一个过渡来做；一般来说，您应该在开发和测试期间尽可能地模拟您的部署环境，以避免浪费您自己的时间（并惹恼您的客户）。

在大多数情况下，它会起作用。但是，随着时间的推移，BCL 的大部分内容已经过调整，以支持新功能或（更常见的是）修复错误。如果您的代码无意中依赖于某个错误的某些副作用，或者如果意外引入了一个新错误，那么它的行为可能会有所不同。如果您在 BCL 类型的内部进行反思，则尤其如此。

不过，很可能会没事的。你将不得不测试有信心。

# android - 英语到丹麦语区域设置问题

> ID：10426154
> 
> 赞同：0
> 
> 时间：2012-05-03T06:21:42.870
> 
> 标签：android, locale

我有一个由文本视图组成的活动。我已使该活动与英语和丹麦语语言环境兼容。

当我将语言环境从英语更改为丹麦语并从应用程序抽屉中选择应用程序时，只有一些文本视图被转换为丹麦语语言环境。但是当我从 Eclipse 重新运行应用程序时，所有的文本视图都被转换为丹麦语。

这是一个错误，从活动的 onPause 状态来看，strings.xml 没有被正确引用，或者我的问题还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T07:02:53.217

可能是因为活动尚未重新启动。尝试终止该进程并从抽屉中再次运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T07:53:22.447

我发现当我们更改区域设置时，我的复选框的文本不会立即更改。

因此，在活动的 onPause 方法上，我再次分配了解决问题的字符串的值。

# javascript - 在不使用 ActiveX 的情况下使用 javascript 创建/编写文本/xml 文件

> ID：10426155
> 
> 赞同：0
> 
> 时间：2012-05-03T06:21:43.700
> 
> 标签：javascript

谁能指导我使用 javascript 编码但不使用 ActicveX 控件来创建/编写文本/xml 文件。

覆盖 ActiveX 的目的是，我只想在 Chrome 上运行 html 页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T06:34:48.423

你不能那样做。不允许 JavaScript 访问客户端的文件系统（显然 ActiveX 是例外）

除此之外，fopen()、fread() 和 fclose() 是典型的 PHP 函数（不确定 ActiveX，但它们似乎也不属于那里）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T06:25:08.553

您不能使用客户端 JavaScript 编写本地文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T06:27:07.443

HTML5 文件 API：[http ://www.html5rocks.com/en/tutorials/file/filesystem/](http://www.html5rocks.com/en/tutorials/file/filesystem/)

BlobBuilder API：[http ://updates.html5rocks.com/2011/08/Saving-generated-files-on-the-client-side](http://updates.html5rocks.com/2011/08/Saving-generated-files-on-the-client-side)

# php - 使用php将文件从亚马逊s3帐户下载到另一个s3帐户

> ID：10426156
> 
> 赞同：0
> 
> 时间：2012-05-03T06:21:43.920
> 
> 标签：php, amazon-s3, cakephp-1.2

嗨，我真的是亚马逊 s3 的新手。我想从给定的另一个 s3 位置（将提供凭据）将文件下载到我的服务器（在 s3 中）。这必须使用 php (cakephp 1.2) 方法完成，并且没有用户界面。（这可能是一项 cron 工作）。通过谷歌搜索，我找不到任何关于此的好文章。我可以完成这项工作的任何示例代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T06:23:30.517

查看[适用于 PHP 的 AWS 开发工具包](http://aws.amazon.com/sdkforphp/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T18:52:44.783

如果我理解正确，您想将[Amazon S3](http://aws.amazon.com/s3/)对象（文件）从一个 AWS 账户复制到另一个 AWS 账户，而不将其下载并上传到单独的系统（显然是[Amazon EC2](http://aws.amazon.com/ec2/)实例）？！

可以通过[copyObject()](http://undesigned.org.za/2007/10/22/amazon-s3-php-class/documentation#copyObject)在单个账户中复制对象，但此 API 不支持跨账户操作（据我所知，也不支持任何其他 AWS 资源，这可能是一个深思熟虑的决定以简化和简化安全架构和流程）。

因此，虽然您的用例是合理的，但没有其他解决方案只能通过您的服务器引导此过程，即从源帐户下载并上传到目标帐户。

不过，这在成本或性能方面应该不是什么大问题，因为*Amazon EC2 和同一区域内的其他 Amazon Web Services 之间（即美国西部的 Amazon EC2 和美国西部的 Amazon S3 之间）不收取数据传输费用*（请参阅[Amazon EC2 定价](http://aws.amazon.com/ec2/#pricing)中的*数据传输*部分），这些操作将促进亚马逊体面的内部网络基础设施（而不是跨越公共互联网）。

# c# - 当 SignalR 一次建立 8-10 个连接时，实时聊天不起作用

> ID：10426163
> 
> 赞同：3
> 
> 时间：2012-05-03T06:22:30.573
> 
> 标签：c#, .net, asp.net-mvc-3, signalr

我正在使用 SignalR 开发实时聊天。这是一个很棒的图书馆。但是我解决了一个我有一段时间无法解决的问题。因此，当 signalR 一次建立 8-10 个连接时，实时聊天不再起作用。也许是 b/ci 在本地机器上运行一切？

我想也许我在某个地方犯了错误。所以我找到了最简单的聊天。你可以[在这里](http://geekswithblogs.net/jeroenb/archive/2011/12/14/signalr-starter-application.aspx)下载。我在10个窗口中打开它，它不再工作了。是 signalR 的性能问题还是程序员的错误？我怎样才能让它更快地工作？

我还找到[了 JabbR chat](https://github.com/davidfowl/JabbR)。它有[现场演示](http://jabbr.net/) ，适用于很多人。他们没有做任何特别的事情，而且效果很好。

有人可以帮助解决这个问题吗？

非常感谢您的帮助，迪玛。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T19:30:05.877

您可能遇到了两个问题：

1.  Windows 7 上的 IIS/Cassini**默认限制为 10 个并发连接**。尝试在 Windows Server 上运行测试，看看它的行为是否相同。
2.  尝试在单独的浏览器窗口和/或单独的浏览器和/或机器中打开连接，**而不是 tabs**。我注意到在 0.4 中使用选项卡时可能会出现问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T12:08:20.030

找到了解决方法：

重写connectionId，所以在每个选项卡中你都会有相同的连接ID：

```
 public class MyConnectionFactory : IConnectionIdGenerator
    {
        public string GenerateConnectionId(IRequest request)
        {
            return MyUserManager.Instance.CurrentUserID.ToString();
        }
    } 
```

添加到 global.asax：

```
GlobalHost.DependencyResolver.Register(typeof(IConnectionIdGenerator), () => new MyConnectionFactory()); 
```

我设法打开了马赫标签，尽我所能。所有标签都会收到通知。

希望，这有帮助。

# opengl-es - 线程 1：程序收到信号 exc_bad_access？

> ID：10426165
> 
> 赞同：2
> 
> 时间：2012-05-03T06:22:51.857
> 
> 标签：opengl-es

目前我正在使用简单的游戏应用程序，使用 GL_TRIANGLE_STRIP 绘制一个球图像（从左到右移动）并使用 GL_LINES 在 Touch 开始代理中画一条线，当我触摸屏幕应用程序将退出，就像程序收到信号 exc_bad_access 一样，我花了14 小时，但我无法解决此问题，请帮助我。

提前致谢

我试过源代码：

```
-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    Test =YES;
    [self.effect prepareToDraw];
     const GLfloat line[] =
     {
         0, 2,
         0,-3,
     };

     GLuint bufferObjectNameArray;
     glGenBuffers(1, &bufferObjectNameArray);
     glBindBuffer(GL_ARRAY_BUFFER, bufferObjectNameArray);
     glBufferData(
     GL_ARRAY_BUFFER,   // the target buffer 
     sizeof(line),      // the number of bytes to put into the buffer
     line,              // a pointer to the data being copied 
     GL_STATIC_DRAW);   // the usage pattern of the data 
     glEnableVertexAttribArray(GLKVertexAttribPosition); 
     glVertexAttribPointer(
     GLKVertexAttribPosition, // the currently bound buffer holds the data 
     2,                       // number of coordinates per vertex 
     GL_FLOAT,                // the data type of each component 
     GL_FALSE,                // can the data be scaled 
     2*4,                     // how many bytes per vertex (2 floats per vertex)
     NULL);                   // offset to the first coordinate, in this case 0 
     glDrawArrays(GL_Lines,0,3);
}

- (void)glkView:(GLKView *)view drawInRect:(CGRect)rect 
{
    glClearColor(1, 1, 1, 1);
    glClear(GL_COLOR_BUFFER_BIT); 
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
    glEnable(GL_BLEND);

    NSLog(@"Children count:%d",[self.children count]); // Store ball image in NSMutable array
    for (SGGSprite * sprite in self.children)
    {
    self.effect.texture2d0.name = self.textureInfo.name;
    self.effect.texture2d0.enabled = YES;
GLKMatrix4 modelMatrix = GLKMatrix4Identity;    
    modelMatrix = GLKMatrix4Translate(modelMatrix, -self.position.x, -self.position.y, 0);
    modelMatrix = GLKMatrix4Translate(modelMatrix, self.contentSize.width, self.contentSize.height+140, 0);
    return modelMatrix;
    [self.effect prepareToDraw];
    long offset = (long)&_quad;

    glEnableVertexAttribArray(GLKVertexAttribPosition);
    glEnableVertexAttribArray(GLKVertexAttribTexCoord0);
    NSLog(@"TexturedVertex:%ld",offset);

    glVertexAttribPointer(GLKVertexAttribPosition, 2, GL_FLOAT, GL_FALSE, sizeof(TexturedVertex), (void *) (offset + offsetof(TexturedVertex, geometryVertex)));
    glVertexAttribPointer(GLKVertexAttribTexCoord0, 2, GL_FLOAT, GL_FALSE, sizeof(TexturedVertex), (void *) (offset + offsetof(TexturedVertex, textureVertex)));
    glDrawArrays(GL_TRIANGLE_STRIP, 0, 4); // When i tab the screen, the app will quit in this line like thread 1 :program received signal exc_bad_access.

    }
} 
```

# iphone - 使用 HSImageSidebarView 将白色背景添加到 .png UIImage 文件

> ID：10426167
> 
> 赞同：-1
> 
> 时间：2012-05-03T06:23:06.710
> 
> 标签：iphone, objective-c, ios, xcode, uiimage

如何使用[HSImageSidebarView](https://github.com/bjhomer/HSImageSidebarView)`UIImage`向 .png文件添加白色背景？

我曾尝试`UIImageView`在侧边栏上创建一个然后显示它，但不幸的是，该应用程序因 NSException 而崩溃。如果它们是 a`UIImage`而不是`UIImageView`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T06:36:37.720

您将尝试此代码在 nib 上添加一个滚动视图并在 viewdidload 上设置其内容大小

```
CGFloat x = 20;
for (int i = 0;i<[playerScores count];i++) {
    UIView *view = [[UIView alloc] initWithFrame:CGRectMake(x, 10, 60, 60)];
    view.backgroundColor=[UIColor blueColor];
    NSString *text = [NSString stringWithFormat:[playerScores objectAtIndex:i]];
    [view setText:text];

    [yardsScrollView addSubview:view];
    [myLabel release];
    x = x+125;
} 
```

PlayersScore 是一个 NSMutable 数组，其中包含许多文本，例如您想要多少视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T07:12:30.670

@objc-痴迷

```
You will need to loop through the subviews to find whether it is of kind UIImage or UIImageView by this:
id object; 
if([object isKindOfClass:[UIImage Class]]) {
     //Do whatever u want to here by creating a new imageView on the top of this image
     //Something like this:
UIImage *image =(UIImage*)object;
UIImageView *imgView=[[uiimageview alloc]initwithimage:image];

//Now perform the background view operations on imgView i.e. instance of UIImageView.
}

//Hope it works. 
```

# facebook - 当有人在照片 FQL 中标记用户时获取提要

> ID：10426170
> 
> 赞同：0
> 
> 时间：2012-05-03T06:23:14.403
> 
> 标签：facebook, facebook-graph-api, facebook-fql, fql.multiquery

当照片中的某个标记用户当前我只能获取该照片但不能提供评论和喜欢时，我想要提要，如下所示

```
select object_id,src from photo where pid in (SELECT pid FROM photo_tag WHERE  subject=me()) 
```

仅供参考，目前我需要先获取所有照片，然后必须检查它是用户本人的照片还是被某人标记的照片。所以看起来有点复杂..

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T07:17:57.903

我终于整理出来了……通过下面的 FQL 你可以得到 type=65

```
 SELECT type,post_id, actor_id, message,comments,attachment,description,created_time,updated_time FROM stream WHERE source_id =me() 
```

# ruby-on-rails - 用于 nil:NilClass (NoMethodError) 的 Rails 黄瓜未定义方法“config”

> ID：10426175
> 
> 赞同：5
> 
> 时间：2012-05-03T06:23:38.597
> 
> 标签：ruby-on-rails, ruby, cucumber

我刚刚升级到 ruby​​ 1.9.3-p125（从 1.9.3-p0）。升级前所有测试都正常。现在运行 rake 功能时出现以下错误

```
Using the default profile...
undefined method `config' for nil:NilClass (NoMethodError)
/home/map7/.rvm/gems/ruby-1.9.3-p194@rails3.2/gems/cucumber-rails-1.3.0/lib/cucumber/rails.rb:17:in `<top (required)>'
/home/map7/.rvm/gems/ruby-1.9.3-p194@rails3.2/gems/bundler-1.1.3/lib/bundler/runtime.rb:74:in `require'
/home/map7/.rvm/gems/ruby-1.9.3-p194@rails3.2/gems/bundler-1.1.3/lib/bundler/runtime.rb:74:in `rescue in block in require'
/home/map7/.rvm/gems/ruby-1.9.3-p194@rails3.2/gems/bundler-1.1.3/lib/bundler/runtime.rb:62:in `block in require'
/home/map7/.rvm/gems/ruby-1.9.3-p194@rails3.2/gems/bundler-1.1.3/lib/bundler/runtime.rb:55:in `each'
/home/map7/.rvm/gems/ruby-1.9.3-p194@rails3.2/gems/bundler-1.1.3/lib/bundler/runtime.rb:55:in `require'
/home/map7/.rvm/gems/ruby-1.9.3-p194@rails3.2/gems/bundler-1.1.3/lib/bundler.rb:119:in `require'
/home/map7/pais/config/application.rb:7:in `<top (required)>'
/home/map7/pais/config/environment.rb:2:in `require'
/home/map7/pais/config/environment.rb:2:in `<top (required)>'
/home/map7/pais/features/support/env.rb:8:in `require'
/home/map7/pais/features/support/env.rb:8:in `<top (required)>'
/home/map7/.rvm/gems/ruby-1.9.3-p194@rails3.2/gems/cucumber-1.1.9/lib/cucumber/rb_support/rb_language.rb:129:in `load'
/home/map7/.rvm/gems/ruby-1.9.3-p194@rails3.2/gems/cucumber-1.1.9/lib/cucumber/rb_support/rb_language.rb:129:in `load_code_file'
/home/map7/.rvm/gems/ruby-1.9.3-p194@rails3.2/gems/cucumber-1.1.9/lib/cucumber/runtime/support_code.rb:171:in `load_file'
/home/map7/.rvm/gems/ruby-1.9.3-p194@rails3.2/gems/cucumber-1.1.9/lib/cucumber/runtime/support_code.rb:83:in `block in load_files!'
/home/map7/.rvm/gems/ruby-1.9.3-p194@rails3.2/gems/cucumber-1.1.9/lib/cucumber/runtime/support_code.rb:82:in `each'
/home/map7/.rvm/gems/ruby-1.9.3-p194@rails3.2/gems/cucumber-1.1.9/lib/cucumber/runtime/support_code.rb:82:in `load_files!'
/home/map7/.rvm/gems/ruby-1.9.3-p194@rails3.2/gems/cucumber-1.1.9/lib/cucumber/runtime.rb:175:in `load_step_definitions'
/home/map7/.rvm/gems/ruby-1.9.3-p194@rails3.2/gems/cucumber-1.1.9/lib/cucumber/runtime.rb:40:in `run!'
/home/map7/.rvm/gems/ruby-1.9.3-p194@rails3.2/gems/cucumber-1.1.9/lib/cucumber/cli/main.rb:43:in `execute!'
/home/map7/.rvm/gems/ruby-1.9.3-p194@rails3.2/gems/cucumber-1.1.9/lib/cucumber/cli/main.rb:20:in `execute'
/home/map7/.rvm/gems/ruby-1.9.3-p194@rails3.2/gems/cucumber-1.1.9/bin/cucumber:14:in `<top (required)>'
/home/map7/.rvm/gems/ruby-1.9.3-p194@rails3.2/bin/cucumber:19:in `load'
/home/map7/.rvm/gems/ruby-1.9.3-p194@rails3.2/bin/cucumber:19:in `<main>'
rake aborted!
Command failed with status (1): [/home/map7/.rvm/rubies/ruby-1.9.3-p194/bin...]

Tasks: TOP => features => cucumber => cucumber:ok
(See full trace by running task with --trace) 
```

我将其追溯到错误中提到的 rails.rb 文件第 17 行：

```
 if !Rails.application.config.cache_classes
    warn "WARNING: You have set Rails' config.cache_classes to false (most likely in config/environments/cucumber.rb).  This setting is known to cause problems with database transactions. Set config.cache_classes to true if you want to use transactions.  For more information see https://rspec.lighthouseapp.com/projects/16211/tickets/165."
  end 
```

所以看起来在黄瓜中找不到 Rails.application 。

如果我进入控制台“rails c”并输入 Rails.application.config 它确实会返回配置对象。

我已经尝试将我的 cucumber-rails gem 升级到 1.3.0 和 cucumber 1.1.9。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T16:36:59.927

这可能是 cucumber-rails gem 的加载顺序问题。如果您更新您的 Gemfile 以不立即加载它，则稍后在此过程中将需要它：

```
gem "cucumber-rails", "1.3.0", :require => false 
```

# xslt - xslt 在同一元素上应用 2 个具有不同模式的模板，同时保留 xml 中定义的顺序

> ID：10426177
> 
> 赞同：0
> 
> 时间：2012-05-03T06:23:54.337
> 
> 标签：xslt, xpath

我有一个包含项目的 xml 文件。我想根据视图属性输出项目列表并保留元素的顺序。为此，我必须使用不同模式的 xsl:templates。问题是我不能保留与 xml 相同的顺序。xml如下：

```
 <item />
   <item view="new" />
   <item />
   <item view="new" /> 
```

模板是：

```
<xsl:template match="item" mode="standart">
    <div class="standart_item"></div>
</xsl:template>

<xsl:template match ="item" mode="new">
    <div class="new_item"></div>
</xsl:template> 
```

如何应用不同的模板来保留订单，就像在 xml 中一样？

```
<div class="standart_item"></div>
<div class="new_item"></div>
<div class="standart_item"></div>
<div class="new_item"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T06:53:33.017

Using different modes doesn't seem to be the right tool for the result you're trying to achieve. I suggest to distinguish the templates by predicates:

```
<xsl:template match="item">
  <div class="standard_item"></div>
</xsl:template>

<xsl:template match="item[@view='new']">
  <div class="new_item"></div>
</xsl:template> 
```

# mysql - MYSQL 查询，加入 2 个表的问题

> ID：10426178
> 
> 赞同：6
> 
> 时间：2012-05-03T06:23:55.917
> 
> 标签：mysql, join, group-by

我有这个查询 -

```
SELECT interest_desc, categoryID, MAX(num_in_cat) AS num_in_cat 
FROM
(
   SELECT interest_desc, categoryID, COUNT(categoryID) AS num_in_cat
   FROM interests
   GROUP BY interest_desc, categoryID
 ) subsel 
 GROUP BY interest_desc, categoryID 
```

我想更改它，以便最终可以从名为`categories`. 我只能显示`categoryID`来自`interests`这个 sql

两个表结构都是

```
#interests

CREATE TABLE `interests` (
 `interestID` int(11) NOT NULL AUTO_INCREMENT,
 `name` varchar(100) NOT NULL,
 `categoryID` int(11) NOT NULL,
 `sessionID` int(11) NOT NULL,
 `interest_desc` varchar(30) NOT NULL,
 `timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
 PRIMARY KEY (`interestID`)
) ENGINE=MyISAM AUTO_INCREMENT=9 DEFAULT CHARSET=utf8 
```

类别表结构

```
# categories
CREATE TABLE `categories` (
 `categoryID` int(11) NOT NULL AUTO_INCREMENT,
 `category_desc` varchar(100) NOT NULL,
 PRIMARY KEY (`categoryID`)
) ENGINE=MyISAM AUTO_INCREMENT=2 DEFAULT CHARSET=utf8 
```

我知道需要某种形式的连接，但我查看了示例并且正在努力获得确切的语法。

我在 php 脚本中有这个 - echo 语句是这个

```
"{$result['interest_desc']} was the most popular in category   {$result['categoryID']}    with {$result['num_in_cat']} occurrences\n"; 
```

它的输出是这样的 -

```
"Adidas was the most popular in category 5 with 1 occurrences" 
```

我希望输出是“阿迪达斯是运动中最受欢迎的，出现了 1 次”

但是我的 sql 查询没有功能`category_desc`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T07:26:34.147

这是更快速的性能明智

```
SELECT subsel.interest_desc, subsel.categoryID, cat.category_desc, MAX(num_in_cat) AS num_in_cat 
    FROM
    (
       SELECT interest_desc, categoryID, COUNT(categoryID) AS num_in_cat
       FROM interests
       GROUP BY interest_desc, categoryID
     ) subsel 
     inner join categories as cat on subsel.categoryID = cat.categoryID
     GROUP BY interest_desc, subsel.categoryID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T06:30:38.310

请检查此，它将为您提供所需的结果。

```
SELECT subsel.interest_desc, cat.category_desc, MAX(num_in_cat) AS num_in_cat 
FROM
(
   SELECT interest_desc, categoryID, COUNT(categoryID) AS num_in_cat
   FROM interests
   GROUP BY interest_desc, categoryID
 ) subsel 
 inner join categories as cat on subsel.categoryID = cat.categoryID
 GROUP BY interest_desc, subsel.categoryID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T16:12:58.813

我不知道您发布的两个类似查询在哪些实际情况下有意义。我会说你可以直接使用这个：

```
SELECT     i.interest_desc, c.category_desc, COUNT(i.categoryID) AS num_in_cat
FROM       interests AS i
INNER JOIN categories AS c USING (categoryID)
GROUP BY   i.interest_desc, i.categoryID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T06:28:14.347

`SELECT * FROM interests i LEFT JOIN categories c ON i.categoryID = c.categoryID`

我没有测试过。可能存在语法错误。

# sql - 限制用户在 SQL 查询中可以看到的内容

> ID：10426182
> 
> 赞同：0
> 
> 时间：2012-05-03T06:24:11.827
> 
> 标签：sql

这有点过时了，但我想知道是否可以将 SQL 中的用户组限制为只能查看某些数据子集。

比如说一个产品表，ProductName 和 State 是两列。我只希望用户组在执行类似查询时查看其状态的产品`SELECT * FROM Products`

那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T06:38:53.547

限制对基础表的访问。

并让您的用户组访问这些基础表的视图。

所以：

给定表：

```
CREATE TABLE EVERYTHING ID INTEGER, TYPE CHAR(1), SEMISECRET CHAR(20), REALLYSECRECT CHAR(20)); 
```

您可以创建仅允许访问某些列的视图：-

```
CREATE VIEW SOMESTUFF AS SELECT ID, TYPE, SEMISECRET FROM EVERTHINK; 
```

您可以创建可以访问某些行的视图：-

```
CREATE VIEW TYPESLICE AS SELECT ID, TYPE, REALLYSECRECT WHERE TYPE ='X'; 
```

更多是可能的，但这是基础。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T06:36:36.343

创建一个或多个与您的子集相对应的视图，并为其设置适当的权限。

# android - 外部apk可以访问apk中的html文件吗

> ID：10426185
> 
> 赞同：0
> 
> 时间：2012-05-03T06:24:30.207
> 
> 标签：android

是否可以调用或访问另一个 apk 中存在的 HTML 文件？

例子：

```
lets assume one.apk has index.html in its assest folder

is it possible to access the index.html in another web view ? 
```

或者这个问题有什么解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T06:42:09.557

在当前的 android 设备上，.apk 文件（至少 /data 和 /system 下的文件）是世界可读的。/data 目录不可列出，因此您需要 apk 的完整和特定路径才能访问它。目前这可以在 /data/system/packages.xml 中找到

如果您想使用 web 视图访问它，您可能首先必须跟踪它并从 apk 中提取您自己的副本，将其视为 zip 文件，然后将您的 webview 指向它。

当然，这不是官方功能——它可能会消失，所以最好不要依赖它。更重要的一点是，您不能依赖没有对您的 apk 执行此操作的人，因为他们实际上可以。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T06:26:41.570

不，这不可能。它只对那个 .apk 私有。所以在其他 .apk 文件中你不能。这一切都与 Android 应用程序安全问题有关。

或者尝试一些东西，（我不确定这个对你有没有帮助）该[`Resources`](http://developer.android.com/reference/android/content/res/Resources.html)对象使您可以访问资产。[`PackageManager`](http://developer.android.com/reference/android/content/pm/PackageManager.html)可以让您访问`Resources`应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T06:27:04.770

答案是不，从不。。

Android 的安全架构不允许一个应用程序访问另一个应用程序的资源。

每个应用程序都被视为不同的用户。受保护的用户能否访问您台式机中其他用户的个人文件？这里也一样。

# android - 什么时候在android中使用HTML5？什么时候不用？

> ID：10426189
> 
> 赞同：7
> 
> 时间：2012-05-03T06:24:45.317
> 
> 标签：android, html

什么情况下开发者需要在android中使用HTML5。

我对何时在 android 中使用 HTML5 感到有点困惑。我需要从 Web 服务器开发一个应用程序，例如报表查看器。在这种情况下，我还需要使用一些 Android 特定功能，如服务、首选项、接收器、图表（在第三方库的帮助下）。

所以我对android应用程序中HTML的好情况有点困惑......

请通过您的建议帮助我或指导我写一篇关于此的更好的文章...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T06:36:09.060

请阅读[此 pdf 文件](http://www.slideshare.net/retomeier/html5-or-android-for-mobile-development)。您可以更好地了解在哪里使用 html 或在哪里使用原生 android 应用程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T06:55:30.817

Android 是迄今为止使用不同浏览器的许多变体平台：基于 WebKit 的 Android 浏览器、Opera Mini、Opera Mobile、Firefox、UCWeb、Google Chrome Android 浏览器。

**默认的 Android 浏览器对HTML5**有一些问题。[Android 版 Chrome](http://googleblog.blogspot.com/2012/02/introducing-chrome-for-android.html)就是为了解决这个问题而设计的。它具有几乎完美的最新 HTML5 支持：例如新元素、视频 – H.264 和 WebM 支持 – 和音频标签、地理定位、硬件加速*画布*（2D 绘图）以及所有 CSS3 内容，例如选择器、效果、媒体查询，变换，过渡和动画等。

但是虽然它仍然不是很受欢迎，因为这个新的浏览器还没有适用于 Android 2.x 和 3.x 版本，仅适用于 4.x。

# jquery - 如何克隆一个元素并一次插入多次？

> ID：10426190
> 
> 赞同：11
> 
> 时间：2012-05-03T06:24:54.833
> 
> 标签：jquery, insert, clone

如何克隆一个元素并将其插入 5 次？这当然是基本陈述：

```
$('.col').clone().insertAfter('.col'); 
```

这是我需要得到的：

```
<div class="col" id="original"> </div>
<div class="col"> </div>
<div class="col"> </div>
<div class="col"> </div>
<div class="col"> </div>
<div class="col"> </div> 
```

选择器不需要使用唯一的 id，它也可以是类选择器。

我可以重复基本语句四次，但必须有更优雅的方式吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-03T06:38:33.313

使用循环，如下所示：

```
$(document).ready(function() {
    var e = $('.col');
    for (var i = 0; i < 5; i++) {
      e.clone().insertAfter(e);
    }
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<div class="col">clone me...</div>
```

* * *

将元素放在循环之前的变量中，否则当您获得多个具有相同 id 的元素时，您将遇到问题，因为您的选择器基于一个 id（例如`$("#col1")`）。

如果您的选择器正在使用一个类，它不会导致与重复 id 相同的冲突，但您仍然应该在循环之前将元素放在变量中，否则您最终会得到比您想要的更多的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T07:02:01.077

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.js"></script>
<script type="text/javascript">
 $(document).ready(function() {
    $('.col').each(function(){
        $(this).clone().insertAfter(this);
    }); 
  });  
</script>
 <div class="col">First div </div>
 <div class="col">2nd </div>
 <div class="col">3rd </div>
 <div class="col">4th </div>
 <div class="col">5th </div> 
```

这是你要找的吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-17T16:19:10.283

我写了一个jQuery插件：

```
$.fn.multiply = function(numCopies) {
    var newElements = this.clone();
    for(var i = 1; i < numCopies; i++)
    {
        newElements = newElements.add(this.clone());
    }
    return newElements;
}; 
```

此代码片段将元素构建为 jQuery 集，而不是多次添加到 DOM 中，这可能很慢。

**用法：**

```
var li = $('<li>Test</li>');
$('ul').append(li.multiply(4)); 
```

因此，对于您的示例：

```
$('.col').multiply(5).insertAfter('.col'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-27T08:35:29.277

当文档准备好克隆客户端所做的任何更改时，您可能希望克隆字段。这主要是输入的活跃问题。那么你应该：

1.  克隆文档准备好的元素：`var elementClone = $('#element').clone()`

2.  单击再次克隆克隆的元素并添加`elementClone.clone().insertAfter(element)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-08T19:45:49.603

```
$(document).ready(function() {
    var e = $('.col');
    for (var i = 0; i < 5; i++) {
      e.clone().insertAfter(e);
    }
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<div class="col">clone me...</div>
```

`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-24T21:08:43.300

Javascript Array 有一个填充函数：

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/fill](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/fill)

所以你可以写这样的东西

```
 $(
   new Array(copies).fill(function () { 
     return $(this).clone(); 
   }.bind(el))
   .map(function (el) {
     return el();
   })
 ).map(function() { return this.toArray(); }); //Turn into jQuery 
```

如果你想把它作为一个可以重用的 jQuery 函数，你可以写这样的东西

```
$.fn.multiply = function(amount) {
   var cloneFunction = (function() {
     return $(this).clone();
   }).bind(this);

   return $(
      new Array(amount).fill(cloneFunction).map(function(el) {
         return el();
      });
   ).map(function() { return this.toArray(); }); //Turn into jQuery
} 
```

这使您可以灵活地将克隆的函数调用与仅在需要时进行评估分开。因此，如果您愿意，可以拆分通话并稍后进行评估。

意味着这是承诺（它返回具有绑定上下文的函数 this 调用时将克隆）

```
new Array(amount).fill(cloneFunction); 
```

这就是决议

```
.map(function(el) { return el(); }) 
```

最后一点处理了我创建了一个 jQuery 对象数组但我真的想要一个 jQuery 集合的事实

```
.map(function() { return this.toArray(); }); //Turn into jQuery 
```

但无论如何，如果你走这条路，你的最终解决方案看起来像这样。

```
$(el).multiply(amount).insertAfter(anotherEl); 
```

干杯

# jqplot - jqPlot - 如何更改 canvasOverlay 的不透明度或 z-index？

> ID：10426192
> 
> 赞同：5
> 
> 时间：2012-05-03T06:24:56.727
> 
> 标签：jqplot

我想根据 y 轴值在背景图上显示 3 个颜色区域，据我了解，我无法通过不同颜色控制背景颜色。

我的想法是用 canvasOverlay 绘制 3 条水平线 - 这是有效的。问题是我想把这条线放在我的图形曲线后面，现在它在前面看到，它覆盖了我的点线。

我可以更改 z-index 或不透明度的属性吗？

也许还有其他想法？

```
 $.jqplot( 'ChartDIV', [data],
        {
            series: [{ showMarker: true}],
            highlighter: {
                sizeAdjust: 10,
                show: true,
                tooltipLocation: 'n',
                useAxesFormatters: true
            },

            tickOptions: {
                formatString: '%d'
            },
            canvasOverlay: {
                show: true,
                objects: [ 
                            {
                                horizontalLine: 
                                {      
                                    name: 'low', 
                                    y: 1.0,
                                    lineWidth: 100,
                                    color: 'rgb(255, 0, 0)',
                                    shadow: false 
                                }
                            },      
                            {
                                horizontalLine:
                                { 
                                    name: 'medium',
                                    y: 2.0,
                                    lineWidth: 100, 
                                    color: 'rgb(250, 250, 0)', 
                                    shadow: true 
                                }
                            },
                            {
                                 horizontalLine:
                                {
                                    name: 'high',
                                    y: 3.0,
                                    lineWidth: 100,
                                    color: 'rgb(145, 213, 67)',
                                    shadow: false
                                }
                             },  
                        ]       
                    },
            axes: {
                xaxis:
                {
                    label: 'Dates',
                    renderer: $.jqplot.DateAxisRenderer,
                    rendererOptions: { tickRenderer: $.jqplot.CanvasAxisTickRenderer },
                    tickOptions: {
                        formatString: '%d/%m/%Y',
                        angle: -30,
                        fontFamily: 'Arial',
                        fontSize: '13px',
                        fontWeight: 'bold'
                    },
                    min: d[0] + "/" + d[1] + "/01", 
                    tickInterval: '2 month',
                    labelOptions: {
                        fontFamily: 'Arial',
                        fontSize: '14pt',
                        fontWeight: 'bold',
                        textColor: '#0070A3'
                    }
                },
                yaxis:
                {
                    label: 'Level',
                    labelRenderer: $.jqplot.CanvasAxisLabelRenderer,
                    tickOptions: {
                        formatter: $.jqplot.tickNumberFormatter
                    },
                    rendererOptions: { tickRenderer: $.jqplot.CanvasAxisTickRenderer },
                    labelOptions: {
                        fontFamily: 'Arial',
                        fontSize: '14pt',
                        fontWeight: 'bold',
                        textColor: '#0070A3',
                        angle: -90
                    }

                }
            }
        } ); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T08:51:02.263

我认为您的问题可能是您绘画的顺序。我认为您首先创建图表，然后在其中绘制这条线，对吗？

因此，为了解决这个问题，您可以尝试`jqPlot`图表提供的一种挂钩。

要了解如何使用钩子，[请查看我的另一个答案](https://stackoverflow.com/a/10329792/613495)`postDrawHooks`（顺便说一句，我自己的问题：），在绘制图表后，我使用钩子来更改标签的格式。在您的情况下，您可以使用`preDrawHooks`或者更合适的是使用`preDrawSeriesHooks`，因为我不确定在调用传入的函数时画布是否可以使用`preDrawHooks`。

请记住，[根据文档](http://www.jqplot.com/docs/files/jqplot-core-js.html#$.jqplot.jqPlot_Pugin_Hooks)，`preDrawSeriesHooks`每次绘制系列之前都会调用 ，因此在您的情况下，您只需要它工作一次。

**编辑**

在这种情况下，答案很简单，你可以两者都做，这在我的 jsfiddle 中显示，[可在此处获得](http://jsfiddle.net/Boro/XzdHt/)。

您需要这段代码将覆盖画布发送到后面，您应该在绘制图形的代码之前放置它：

```
$.jqplot.postDrawHooks.push(function(){
    $(".jqplot-overlayCanvas-canvas").css('z-index', '0');//send overlay canvas to back
    $(".jqplot-series-canvas").css('z-index', '1');//send series canvas to front
}); 
```

但是当涉及到不透明度时，您可以将其应用于您喜欢的任何一行（也显示在我的代码中），使用该`rgba()`方法，对于系列，它是通过这种方式完成的：

```
seriesColors:['rgba(100, 150, 100, 0.75)'] 
```

对于画布上的线条，您可以这样做：

```
color: 'rgba(145, 213, 67, 0.25)' 
```

* * *

**编辑2**

最重要的想法被遗忘了，因此在之前的代码中，荧光笔不起作用。只是负责事件捕获和传播的事件画布隐藏在我们的画布下面。在当前版本的代码中，它已通过设置一个适合`z-index`它的方式进行了更正。完整的方法如下所示：

```
$.jqplot.postDrawHooks.push(function() {
    $(".jqplot-overlayCanvas-canvas").css('z-index', '0'); //send overlay canvas to back  
    $(".jqplot-series-canvas").css('z-index', '1'); //send series canvas to front         
    $(".jqplot-highlighter-tooltip").css('z-index', '2'); //make sure the tooltip is over the series
    $(".jqplot-event-canvas").css('z-index', '5'); //must be on the very top since it is responsible for event catching and propagation
}); 
```

* * *

**EDIT3：** 一个更好的解决方案，我们不需要担心设置`z-index`.

```
$.jqplot.postDrawHooks.push(function() {
    var overlayCanvas = $($('.jqplot-overlayCanvas-canvas')[0])
    var seriesCanvas = $($('.jqplot-series-canvas')[0])
    seriesCanvas.detach();
    overlayCanvas.after(seriesCanvas);
}); 
```

[这里介绍。](http://jsfiddle.net/Boro/WdLnm/151/)该解决方案的[灵感来自@Mark](https://stackoverflow.com/a/11228723/613495)为类似问题提供的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-18T15:33:27.823

一个更好的解决方案是使用 Canvas 矩形对象而无需任何黑客攻击 [http://services.mbi.ucla.edu/jqplot/examples/draw-rectangles.html](http://services.mbi.ucla.edu/jqplot/examples/draw-rectangles.html)

```
$(document).ready(function(){
  var plot1 = $.jqplot ('chart1', [[30,-10,90,20,50,130,80,120,50]], {
      canvasOverlay: {
        show: true,
        objects: [
          { rectangle: { ymax: 0, xminOffset: "0px", xmaxOffset: "0px", yminOffset: "0px", ymaxOffset: "0px",
                    color: "rgba(0, 0, 200, 0.3)", showTooltip: true, tooltipFormatString: "Too Cold" } },
          { rectangle: { ymin: 100, xminOffset: "0px", xmaxOffset: "0px", yminOffset: "0px", ymaxOffset: "0px",
                    color: "rgba(200, 0, 0, 0.3)", showTooltip: true, tooltipFormatString: "Too Warm" } }
        ]
      } 
  });
}); 
```

# android - 应用程序的 Android 多语言键盘支持

> ID：10426193
> 
> 赞同：0
> 
> 时间：2012-05-03T06:25:02.653
> 
> 标签：android, keyboard, multilingual

有什么方法可以为应用程序提供多语言键盘支持。我需要在应用程序中提供对 8 种国际语言的支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T18:20:00.483

您可以为不同的语言构建自己的键盘，没有为此提供内置键盘。您只需添加带有相应字符的按钮，就可以轻松制作自己的键盘。

# ios - 如何识别和删除换行符和空格？

> ID：10426194
> 
> 赞同：7
> 
> 时间：2012-05-03T06:25:04.383
> 
> 标签：ios, xcode

我正在通过按组件分隔字符串来制作一个 nsmutable 数组，它导致在数组中插入大量新行和空格如何识别和删除它们？

```
for (int i=0;i<contentsOfFile.count; i++) 
 {
        if(!([[contentsOfFile objectAtIndex:i]isEqual:@"\n"]||[[contentsOfFile     objectAtIndex:i]isEqual:@""]))
       [arrayToBereturned addObject:[contentsOfFile objectAtIndex:i]];
 } 
```

我正在使用的这段代码无法识别所有换行符谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-03T06:35:59.093

要从您的字符串中删除所有额外的空间和 \n-

```
NSString* result = [yourString stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]]; 
```

而不是准备你的 contentsOfFile 数组。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-03T06:34:44.220

如果你想要一个没有空格的数组：

```
NSString *string = @"Hello, World!";
NSCharacterSet *separator = [NSCharacterSet whitespaceAndNewlineCharacterSet];
NSArray *stringComponents = [string componentsSeparatedByCharactersInSet:separator]; 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-09-17T12:19:49.570

`stringByTrimmingCharachersInSet:`仅从字符串的末尾和开头删除所需的字符。要删除所有出现的情况，您应该使用`stringByReplacingOccurrencesOfString:`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-16T12:23:22.250

**斯威夫特 5 版本**

```
 let string = "Hello, stack overflow!"
    let components = string.components(separatedBy: .whitespacesAndNewlines)
    print(components) // prints ["Hello,", "stack", "overflow!"] 
```

还有关于`string.replacingOccurrences`

```
 let string = " Hello, stack overflow     ! "
    let noSpacingsString = string.replacingOccurrences(of: " ", with: "")
    print(components) // prints "Hello,stackoverflow!" 
```

# javascript - 设置 HTML5 媒体元素播放器

> ID：10426198
> 
> 赞同：1
> 
> 时间：2012-05-03T06:25:16.770
> 
> 标签：javascript, jquery, html, mediaelement.js

我是 HTML5 播放器的新手，需要帮助。我正在为播放器使用最新的 mediaelement.js 文件。在某些情况下我会遇到问题。我已经初始化了播放器，现在想做一些工作：

*   初始初始化 HTML5 mediaelement 播放器并加载所有控件但不传递视频 src
*   一旦来自 wowza 服务器的实时 URL 可用，就传递视频 src`player.setSrc('url')`
*   更改视频 url onclick 和播放器以重新开始播放新 src 的视频
*   我们可以在 flowplayer 中定义如何在播放器中定义`provider`and`netconnectionurl`
*   android平板电脑加载播放器不流畅，有时浏览器在全屏时崩溃

我最初尝试在不传递视频 src 的情况下加载播放器，但它不加载控件仅显示**Download File**。这对我来说很重要，因为实时网址是在服务器延迟之后出现的，我需要先初始化播放器。更改视频 url onclick 似乎适用于支持 HTML5 的浏览器，但在使用 flash 后备的浏览器中，视频 src 不会更改 onclick。我有不同的频道，我想加载频道网址并播放视频 onclick。我不想通过`rtmp`流 url 传递 url。我想从之前的播放器中定义它，如果可能的话动态地改变它。在 android 中不知道为什么有时播放器无法正确加载并且浏览器崩溃。任何帮助都会很棒。

# php - 验证 youtube URL，它应该存在

> ID：10426204
> 
> 赞同：0
> 
> 时间：2012-05-03T06:25:53.993
> 
> 标签：php

我是 php 新手。

我想检查有效的 youtube URL 以及视频是否存在。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-04T07:46:54.397

这是我使用 Youtube 的[oembed](http://apiblog.youtube.com/2009/10/oembed-support.html)编写的解决方案。

第一个函数只是检查视频是否存在于 Youtube 的服务器上。它假定仅当返回 404 错误时视频不存在。401（未授权）表示视频存在，但有一些访问限制（例如，嵌入可能被禁用）。

如果要检查视频是否存在并且是否可嵌入，请使用第二个功能。

```
<?php

function isValidYoutubeURL($url) {

    // Let's check the host first
    $parse = parse_url($url);
    $host = $parse['host'];
    if (!in_array($host, array('youtube.com', 'www.youtube.com'))) {
        return false;
    }

    $ch = curl_init();
    $oembedURL = 'www.youtube.com/oembed?url=' . urlencode($url).'&format=json';
    curl_setopt($ch, CURLOPT_URL, $oembedURL);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

    // Silent CURL execution
    $output = curl_exec($ch);
    unset($output);

    $info = curl_getinfo($ch);
    curl_close($ch);

    if ($info['http_code'] !== 404)
        return true;
    else 
        return false;
}

function isEmbeddableYoutubeURL($url) {

    // Let's check the host first
    $parse = parse_url($url);
    $host = $parse['host'];
    if (!in_array($host, array('youtube.com', 'www.youtube.com'))) {
        return false;
    }

    $ch = curl_init();
    $oembedURL = 'www.youtube.com/oembed?url=' . urlencode($url).'&format=json';
    curl_setopt($ch, CURLOPT_URL, $oembedURL);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    $output = curl_exec($ch);
    curl_close($ch);

    $data = json_decode($output);

    if (!$data) return false; // Either 404 or 401 (Unauthorized)
    if (!$data->{'html'}) return false; // Embeddable video MUST have 'html' provided 

    return true;
}

$url = 'http://www.youtube.com/watch?v=QH2-TGUlwu4';
echo isValidYoutubeURL($url) ? 'Valid, ': 'Not Valid, ';
echo isEmbeddableYoutubeURL($url) ? 'Embeddable ': 'Not Embeddable ';

?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T06:27:20.703

你从来没有读过[`preg_match`](http://php.net/preg_match)文档，是吗？

*   你需要一个分隔符。`/`是最常见的，但由于您处理的是 URL，`#`因此更容易，因为它避免了一些转义。
*   您需要在正则表达式中转义具有特殊含义的字符，例如`?`或`.`
*   不返回匹配项（它返回匹配项的数量，如果失败则返回 false），因此要获取匹配的字符串，您需要第三个参数`preg_match`

```
preg_match('#https?://(?:www\.)?youtube\.com/watch\?v=([^&]+?)#', $videoUrl, $matches); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T06:44:58.910

正如@ThiefMaster 所说，

但我想补充一点。

他询问如何确定视频是否存在。

执行 curl 请求，然后执行`curl_getinfo(...)`以检查 http 状态代码。

为 200 时，视频存在，否则不存在。

这是如何工作的，请在此处阅读：[curl_getinfo](http://de.php.net/manual/de/function.curl-getinfo.php)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-03T06:46:15.857

你需要稍微改变一下上面的答案，否则你只会得到第一个字符，

试试这个

```
<?php
$videoUrl = 'http://www.youtube.com/watch?v=cKO6GrbdXfU&feature=g-logo';
preg_match('%https?://(?:www\.)?youtube\.com/watch\?v=([^&]+)%', $videoUrl, $matches);
var_dump($matches);
//array(2) {
//  [0]=>
//  string(42) "http://www.youtube.com/watch?v=cKO6GrbdXfU"
//  [1]=>
//  string(11) "cKO6GrbdXfU"
//} 
```

# javascript - 选择框上的选择值显示在文本字段中

> ID：10426205
> 
> 赞同：1
> 
> 时间：2012-05-03T06:25:54.290
> 
> 标签：javascript, html, forms

我一直在尝试在 php 中创建一个脚本，当我在选择框中选择任何选项然后选择它时，它的值会显示在文本字段中。请让我知道我该怎么做。我是一个菜鸟，所以如果我的问题很愚蠢，请耐心解答。

请点击以下链接以获取我的问题的图像帮助。

[http://s18.postimage.org/d85l2m2nt/select_Box2.gif](http://s18.postimage.org/d85l2m2nt/select_Box2.gif)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T06:54:55.990

如果您的元素在表单中，则将以下侦听器放在 select 元素上：

```
onchange="this.form.textareaName.value = this.value" 
```

其中*textareaName*是您要为其设置值的文本区域的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T06:30:01.367

```
<html>
<head>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.js"></script>
<script type="text/javascript">
  $(document).ready(function() {
  $('#slectboxid option').click(function(){
      $('#textboxid').val($(this).val());
            });
});
</script>

</head>
<body>
<form action="#" method="post">
<select name="select" id="slectboxid">
  <option value="test">test</option>
  <option value="test2">test2</option>
</select>
<input type="text" name="text" id="textboxid" />
</form>
</body>
</html> 
```

使用jquery，上面的代码片段。它会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T06:47:45.837

请试试这个

```
<html> 
<head>
<script type="text/javascript">
   function assignText(obj) {
    document.getElementById("textboxid").value = obj.options[obj.selectedIndex].value;
   }
</script>  
</head> 
<body> 
    <form action="#" method="post"> 
        <select name="select" id="slectboxid" onchange = 'assignText(this)'> 
            <option value="test">test</option>  
            <option value="test2">test2</option> 
        </select>
        <input type="text" name="text" id="textboxid" />
    </form> 
</body> 
</html> 
```

# image - 如何在magento中获取产品图片

> ID：10426210
> 
> 赞同：1
> 
> 时间：2012-05-03T06:26:32.070
> 
> 标签：image, magento

我正在使用 Magento 社区版本 1.5.1.0。

我需要让产品有图像或没有图像。如果产品没有图像，我们希望分配其类别图像而不是 magento 默认图像。

我怎样才能找到该产品是否有图像？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-03T11:21:37.153

使用以下代码

```
<?php
        ini_set('display_errors','on');
        require_once 'app/Mage.php';
        Mage::app('default');
        $products = Mage::getModel('catalog/product')->load(1); //Product ID
        echo "<pre>";
        //print_r($products);
        echo $products->getImage();
        echo "<br>";
        echo $products->getSmallImage();
        echo "<br>";
        echo $products->getThumbnail();
        echo "<br>";
        echo Mage::helper('catalog/image')->init($products, 'small_image')->resize(163,100); // resize function is used to resize image
        echo "<br>";
        echo Mage::helper('catalog/image')->init($products, 'image')->resize(400,400);
    ?> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-03T09:08:50.293

```
$product->getImage(); 
```

使用上面的代码，如果产品有，它会给出图像，或者它返回键“ **no_selection** ”

```
if($product->getImage() == 'no_selection')
{
     // PRODUCT HAVE NO IMAGE
}
else
{
     // PRODUCT HAVE IMAGE
} 
```

有了这个，我们可以发现图像是否已上传到产品。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T06:58:19.997

try this

```
if ($_product->getImage() != 'no_selection' && $_product->getImage()){put your category image retrive code } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-10T09:52:43.840

当您调用`$your_product = Mage::getModel('catalog/product')`结果时，您可以找到媒体数组的详细信息。因此，如果您检查该数组的计数，您就会知道与产品关联的图像数量；如果计数为零，则不关联任何图像。

所以：

```
if(count($your_product['media_gallery']['images']) > 0)
// PRODUCT HAVE IMAGE
else
// PRODUCT HAVE NO IMAGE 
```

# azure - 如何清理 Azure 存储 Blob 容器？

> ID：10426213
> 
> 赞同：40
> 
> 时间：2012-05-03T06:26:41.983
> 
> 标签：azure, blobstore, azure-blob-storage

我只想清理（转储、删除、删除*。*）一个 Azure Blob 容器。我怎样才能做到这一点？

注意：该容器由 IIS（运行 Webrole）日志 (wad-iis-logfiles) 使用。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2018-02-08T16:22:53.423

使用 Azure CLI 2.0 的单线：

```
az storage blob delete-batch --account-name <storage_account_name> --source <container_name> 
```

在您的情况下用适当的值替换`<storage_account_name>`和。`<container_name>`

您可以通过运行以下命令查看该命令的帮助：

```
az storage blob delete-batch -h 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-05-04T05:36:25.487

只有一种方法可以批量删除 Blob，即删除整个容器。正如您所说，在删除容器和您可以再次使用该容器名称之间存在延迟。

您唯一的其他选择是一次删除一个。如果您可以从存储 Blob 的同一个数据中心执行删除操作，则它会比在本地运行删除操作更快。这可能意味着编写代码（或者您可以将 RDP 放入您的实例之一并安装云资源管理器）。如果您正在编写代码，则可以通过并行删除项目来加快整个过程。与此类似的东西会起作用：

```
Parallel.ForEach(myCloudBlobClient.GetContainerReference(myContainerName).ListBlobs(), x => ((CloudBlob) x).Delete()); 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2016-05-04T21:08:54.167

**更新：**现在（2018 年）更简单的方法是使用 Azure CLI。检查[joanlofe 的答案](https://stackoverflow.com/a/48690154/1678053):)

* * *

2016 年最简单的方法是使用 Microsoft [Azure Storage Explorer](http://storageexplorer.com/) IMO。

1.  下载 Azure 存储资源管理器并安装它
2.  使用适当的 Microsoft 帐户登录
3.  浏览到要清空的容器
4.  单击全选按钮
5.  点击删除按钮

[![截屏](../Images/12c8f90c1e8991bbe3c2ab0a40722b14.png)](https://i.stack.imgur.com/mYvLT.png)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-05-14T13:43:14.040

尝试使用适用于 windows azure 的 cloudberry 产品

这是链接：[http ://www.cloudberrylab.com/free-microsoft-azure-explorer.aspx](http://www.cloudberrylab.com/free-microsoft-azure-explorer.aspx)

您可以在 blob 中搜索特定扩展名。选择多个 blob 并删除它们

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-05-03T07:54:26.877

如果您的意思是要删除一个容器。我建议您检查[http://msdn.microsoft.com/en-us/library/windowsazure/dd179408.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/dd179408.aspx)以查看是否删除容器操作（容器和其中包含的任何 blob 稍后在垃圾收集期间被删除) 可以满足要求。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-07-04T13:50:45.720

如果您对 CLI 方式感兴趣，那么以下代码将帮助您：

```
for i in `az storage blob list -c "Container-name" --account-name "Storage-account-name" --account-key "Storage-account-access-key" --output table | awk {'print $1'} | sed '1,2d' | sed '/^$/d'`; do az storage blob delete --name $i -c "Container-name" --account-name "Storage-account-name" --account-key "Storage-account-access-key" --output table; done 
```

它首先获取容器中的 blob 列表并一个一个地删除它们。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-08-21T17:51:16.063

如果您使用的是可以访问该存储帐户的 spark (HDInsight) 集群，那么您可以在命令行上使用 HDFS 命令；

`hdfs dfs -rm -r wasbs://container_name@account_name.blob.core.windows.net/path_goes_here`

真正的好处是集群不太可能出现故障，并且如果您在其上运行屏幕，那么您在删除时不会丢失会话。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-04-22T23:10:56.567

您可以使用[Cloud Combine](http://www.gapotchenko.com/cloudcombine)删除 Azure 容器中的所有 Blob。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-05-08T12:40:14.150

对于这种情况，更好的选择是识别在容器中找到的项目列表。然后从容器中删除每个项目。那是最好的选择。如果您删除容器，您下次应该会出现运行时错误...

# cordova - Sencha-touch-2.0.0 水平图像列表在 PhoneGap 中不起作用

> ID：10426218
> 
> 赞同：0
> 
> 时间：2012-05-03T06:27:12.577
> 
> 标签：cordova, android-emulator, sencha-touch

之前有没有人在 PhoneGap 中为 android OS 实现过“sencha-touch-2.0.0-commercial\examples\list-horizo​​ntal”示例。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:49:21.520

它在 Android 手机和标签上对我来说工作正常。我正在使用 sencha-touch-2.1.0

# sql-server-2008 - 年度财务日的 SQL 函数

> ID：10426222
> 
> 赞同：0
> 
> 时间：2012-05-03T06:27:21.747
> 
> 标签：sql-server-2008

如何获得一年中的财政日，即，如果我将 4 月 2 日传递给函数，它应该返回 2。财政年度从每年的 4 月 1 日开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T06:43:26.593

会计日历是特定于组织的，虽然很少见，但可以更改。最简单的解决方案是创建一个列出会计日历的表格。因此，您可以使用 CTE 进行模拟，但最好将其存储为表格。

```
With FiscalCalendarStarts As
    (
    Select 1 As FiscalPeriod
        , Cast('20120401' As DateTime) As StartDate
    Union All
    Select FiscalPeriod + 1
        , Case 
            When Month(StartDate) = 12 Then DateAdd(m, Month(StartDate) - 12 + 1, StartDate)
            Else DateAdd(m, 1, StartDate)
            End
    From FiscalCalendarStarts 
    Where FiscalPeriod < 12
    )
    , FiscalCalendar As
    (
    Select FiscalPeriod
        , StartDate
        , DateAdd(d, -1, DateAdd(m, 1, StartDate)) As EndDate
    From FiscalCalendarStarts
    )
Select *
From FiscalCalendar
Where @SomeDate Between StartDate And EndDate 
```

**编辑**

要获得天数（我承认我没有在上述解决方案中提供），诀窍是根据输入日期确定实际的会计年度开始日期。为此，您可以执行以下操作，根据您的要求，我已将其放入一个函数中

```
Create Function dbo.FiscalDay ( @Input datetime )
Returns int
As

Begin 

Declare @StartDayMonth char(4);
Set @StartDayMonth = '0401';

Return  (
        Select DateDiff(d, FYStartDate, @Input) + 1
        From    (
                Select DateAdd(yyyy
                        , Case
                            When DatePart(dy, @Input) >= DatePart(dy, StartDate) Then 0
                            Else -1
                            End
                        , StartDate) As FYStartDate
                From    (
                        Select Cast( Cast(Year(@Input) As char(4)) 
                            + @StartDayMonth As datetime ) As StartDate
                        ) As S1
                ) As S
        )

End 
```

`0401`我从代表财政年度开始的月份和日期的存根开始。为此，我将过去日期的年份放在前面，这样我就会得到类似`20120401`2012 年的日期已经过去的信息。如果`@Input`晚于 4 月 1 日，那么我们处于`@Input`. 如果`@Input`早于 4 月 1 日，那么我们处于上一年 4 月 1 日开始的财政年度。现在我们有了财政开始日期，我们可以简单地找到它们之间的天数并加 1（否则 1-Apr 将被视为第 0 天而不是第 1 天）。请注意，通过 2012 年 3 月 31 日返回 366 而不是 365，因为 2012 年是闰年。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T06:44:44.550

@Olivarsham，每个国家的财政年度并不常见。有些地方是 4 月至 3 月，有些地方是 1 月至 12 月。所以这是您的特殊应用要求，然后您需要为自己编写。我认为没有标准的查询。

请尝试此功能。这将返回您的会计年度的天数。

```
CREATE FUNCTION [dbo].[FiscalDay] (@CurrentDATE datetime)
RETURNS int

AS
BEGIN
     DECLARE @FiscalDay int;
     DECLARE @YearStartDate DateTime;
     Set @YearStartDate=Cast('20120401' As DateTime) 
     set @FiscalDay =  DATEDIFF(DAY,@YearStartDate , @CurrentDATE) 
     RETURN(@FiscalDay);
END;

GO 
```

# c# - 如何手动覆盖 WCF 客户端发送的 WSA To 标头

> ID：10426224
> 
> 赞同：1
> 
> 时间：2012-05-03T06:27:25.100
> 
> 标签：c#, wcf, ws-addressing

我目前正在为我无法控制的 Java Web 服务编写 WCF 客户端。WCF 似乎使用端点地址填充 WSA To 标头，但此 Web 服务需要不同的值。

我目前正在尝试手动设置值，如下所示：

```
var binding = new CustomBinding();
binding.Elements.Add(GetSecurityElement());
binding.Elements.Add
(
    new TextMessageEncodingBindingElement
    (
        MessageVersion.Soap11WSAddressing10,
        Encoding.UTF8
    )
);
binding.Elements.Add(new HttpsTransportBindingElement());

var endpoint = new EndpointAddress
(
    new Uri("endpoint address"),
    new DnsEndpointIdentity("endpoint identity"),
    new AddressHeaderCollection()
);

var client = new Client(binding, endpoint);
client.Open();

using (new OperationContextScope(client.InnerChannel))
{
    OperationContext.Current.OutgoingMessageHeaders.To = new Uri("some other address");
    OperationContext.Current.OutgoingMessageHeaders.MessageId = new UniqueId("message id");
    var response = client.doSomething();
} 
```

检查使用 Fiddler 生成和发送的请求，我可以看到 MessageID 标头已成功设置为“消息 ID”，而不是默认的 urn:uuid:[some uuid]，但 To 标头仍设置为“端点地址”而不是“其他地址”。

还有其他方法可以覆盖标头值吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T07:56:11.070

我已经使用 oulined [here](http://social.msdn.microsoft.com/Forums/en/wcf/thread/1a5f41a8-9c3d-4b4f-9c24-3d659fdb045d)的方法解决了这个问题。在代码中，解决方案是使用：

```
 var endpoint = new EndpointAddress
        (
            new Uri("wsa to address"),
            new DnsEndpointIdentity("endpoint identity"),
            new AddressHeaderCollection()
        ); 
```

设置 WSA To 标头的值。然后使用：

```
 client.Endpoint.Behaviors.Add(new ClientViaBehavior(new Uri("address"))); 
```

控制请求实际发送到的地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-28T11:19:47.397

ClientVia 也可以添加到 .config 文件的 endpointBehavior 元素中：

```
<behaviors>
      <endpointBehaviors>
            <behavior name="someBehavior">
                  <clientVia viaUri="[URL of the actual host]" />
            </behavior>
      </endpointBehaviors>
</behaviors>
<client>
      <endpoint address="[Value of the wsa:To header]" ..... other settings ... />
</client> 
```

请注意，您还需要使用正确的绑定设置 - 在 textMessageEncoding 或 wsHttpBinding 中具有正确 messageVersion 的 customBinding - 才能使用 WS-Addressing。

# c++ - 如何限制 MFC 应用程序仅从已知的 USB 闪存驱动器运行

> ID：10426229
> 
> 赞同：1
> 
> 时间：2012-05-03T06:27:52.853
> 
> 标签：c++, mfc

我想制作一个只能从已知 USB 闪存驱动器运行的 MFC 应用程序。如果我们复制到其他地方，它不应该运行。我在[这里](https://stackoverflow.com/questions/1303026/how-restrict-an-application-to-run-only-from-a-known-usb-flash-drive)发现了类似的问题， 但我不太明白。请给我一个提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T13:48:37.953

在 MFC 中： `GetFileInformationByHandle`

```
 BY_HANDLE_FILE_INFORMATION info;
DWORD dwSerialNumber = 0;

if(GetFileInformationByHandle(FileHandle, &info) != 0)
{
    dwSerialNumber = info.dwVolumeSerialNumber;
    swprintf(szTemp, L"The Volume Serial Number = %d", info.dwVolumeSerialNumber);
    MessageBox(NULL, szTemp, L"Success", MB_OK);
}
else
{
    swprintf(szTemp, L"GetFileInformationByHandle Error = %d", GetLastError());
    MessageBox(NULL, szTemp, L"Success", MB_OK);
} 
```

在 C#/C++.NET 中：使用 WMI 的 USB 驱动器的内部序列号。

试试这个代码，如果没有序列号，那是因为有些U盘有，有些没有。

```
//import the System.Management namespace at the top in your "using" statement. Then in a method, or on a button click:

ManagementObjectSearch theSearcher = new ManagementObjectSearcher("SELECT * FROM Win32_DiskDrive WHERE InterfaceType='USB'");
foreach (ManagementObject currentObject in theSearcher.Get())
{
   ManagementObject theSerialNumberObjectQuery = new ManagementObject("Win32_PhysicalMedia.Tag='" + currentObject["DeviceID"] + "'");
   MessageBox.Show(theSerialNumberObjectQuery["SerialNumber"].ToString());
} 
```

# android - 来自相机意图的图像在索尼设备中旋转

> ID：10426237
> 
> 赞同：2
> 
> 时间：2012-05-03T06:29:07.330
> 
> 标签：android, image-rotation, android-camera-intent, sony

我正在开发一个通过调用相机意图来拍照的应用程序。在下一个活动中，我使用我获得的图像的 URI 并显示图像。它工作正常。

问题是当我在 Sony Neo V 设备 (ICS) 中进行测试时，图像旋转了 90 度（[这是屏幕截图](http://www.msani.net/FileUploadSendiri/pendataan/sony.png)）。当我在 HTC Desire 设备（姜饼）中进行测试时，它不会发生（[这是截图](http://www.msani.net/FileUploadSendiri/pendataan/htc.png)）。

这是我的代码：

活动一：

```
private final int CAMERA_REQUESTCODE = 1;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.memberform);

    Button photo = (Button) findViewById(R.id.btn_photo);
    photo.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            Intent cameraIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
            startActivityForResult(cameraIntent, CAMERA_REQUESTCODE);
        }
    });

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    if ( requestCode==CAMERA_REQUESTCODE ) {
        if ( resultCode==RESULT_OK  ) {
            GlobalVar.member.setPhotoUri(data.getData());
        } else if ( resultCode==RESULT_CANCELED ) {             
        } else {
            Toast.makeText(this, "Unknown onActivityResult resultCode = " + resultCode, Toast.LENGTH_SHORT).show();
        }           
    } else {
        Toast.makeText(this, "Unknown onActivityResult requestCode = " + requestCode, Toast.LENGTH_SHORT).show();
    }
} 
```

活动二：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.memberdetail);
    ImageView photo = (ImageView) findViewById(R.id.photo);
    photo.setImageURI( GlobalVar.member.getPhotoUri() );
} 
```

我试图检测`if ( ImageView.getWidth()>ImageView.getHeight() ) then rotate90degrees();`但它不起作用。而且我希望有一个通用的工作代码（适用于任何设备）来解决这个问题，因为它比制作条件 if 更好。

任何帮助和解释将不胜感激。一般工作代码将不胜感激。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T20:26:35.377

其他设备似乎也存在错误，不确定是否所有三星设备都这样做，但有不少设备正在这样做。我可以在我的设备上确认 Samsung infuse。

您可能需要查询 ContentResolver 以获取每个图像的方向并查看它是否需要旋转。

# oracle - 格式化 oracle plsql 查询的输出

> ID：10426242
> 
> 赞同：0
> 
> 时间：2012-05-03T06:29:36.710
> 
> 标签：oracle, plsql, oracle10g

我有一个这样的数据集

```
id        subid        date(in yyyymmdd)  time(in hh24miss)  count1  count2
80013727  20000000431  20120429           001500             0       0
80013727  20000000431  20120429           003000             0       0
80013729  20000000432  20120429           001500             0       0
80013729  20000000432  20120429           003000             0       0
80013728  20000000435  20120429           001500             0       0
80013728  20000000435  20120429           003000             0       0 
```

如您所见，时间以 15 分钟为增量。我想显示输出结果集，如下所示。

```
id        Date      subid        00:00:00-00:14:59  00:15:00-00:29:59    
80013727  20120429  20000000431  0                  0
80013729  20120429  20000000432  0                  0 
```

如您所见，与 id 80013727 相关的所有数据都显示在一行中，而不是日期为 20120429 的 2 行。

请告诉我如何实现它。

标题行可以使用 dbms_output.put_line 打印一次。

你好，这是你的答案-

# 甲骨文 10.2 克

对于唯一的 id、subid、日期组合 count1 和 count2 需要显示在一行中。而不是从最顶部的结果集中可以看到的 4 行。

80013727 20000000431 20120429 有2行不同时间（即015000,030000）

我需要展示

80013727 20000000431 20120429 count1（从第一行开始），count1（从第二行开始）

80013727 20000000431 20120429 count2（从第一行开始），count2（从第二行开始）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T13:07:41.767

显然，您已经简化了数据和输出结构。我猜你最终会得到 96 个计数列（尽管我也不会走那么远）。

```
with cte as
     ( select * from your_table ) 
select id
       ,  subid
       ,  date
           ,  type
           ,  sum(c01) as "00:00:00-00:14:59" 
           ,  sum(c02) as "00:15:00-00:29:59" 
           ,  sum(c96) as "23:45:00-23:59:59" 
from (
    select id
           ,  subid
           ,  date
           ,  'C1' type
           ,  case when time between 0 and 899 then count1 else 0 end as c01 
           ,  case when time between 900 and 1799 then count1 else 0 end as c02
           ,  case when time between 85500 and 86399 then count1 else 0 end as c96
from cte
    union all
    select id
           ,  subid
           ,  date
           ,  'C2' type
           ,  case when time between 0 and 899 then count2 else 0 end as c01 
           ,  case when time between 900 and 1799 then count2 else 0 end as c02
           ,  case when time between 85500 and 86399 then count2 else 0 end as c96
    ) 
group by id, subid, date, type
order by id, subid, date, type 
```

因此，这使用子查询分解表达式从表中仅选择一次。它用于`case()`根据秒的范围将计数分配给特定的时间列。有两个查询可以聚合第 1 行和第 2 行的计数。

这些`sum()`电话可能是不必要的；从您的数据中不清楚您在每个时间段是否有多个记录。

# php - PHP 的 include_once 只是该文件的静态“实例”？

> ID：10426245
> 
> 赞同：-4
> 
> 时间：2012-05-03T06:29:48.933
> 
> 标签：php, static, include, grok

阅读有关`include_once`它的文档基本上说如果有问题的文件已经包含，则不会重新包含它。

我可以在脑海中将其等同于脚本的静态实例，还是会导致我在路上遇到麻烦？

**编辑**

不是在找教程`include_once`，我很好理解。想知道我是否可以在概念上将静态成员的属性和特征附加到这个想法。

**编辑 2**

反对者愿意解释吗？这是一个概念性的问题，有一个明确的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T06:35:29.227

我不确定实际功能是如何工作的，但考虑它的最佳方法是：

“如果此文件之前已包含/需要此文件，则无需再次包含/需要它。”

关键是要避免包含“重新定义”类或函数的文件，因为它已经在之前包含的同一个文件中定义。

要记住的重要一点是脚本（以及沿途包含的任何脚本）具有开始和结束的想法。自整个脚本开始以来，任何调用都会`include_once`检查该文件是否已包含在内。如果有，它不会费心再次包含它，它只是脱离最初包含的文件。

一旦脚本完成（没有工作要做，流已关闭、中断、中止等），然后重新启动该过程会将文件的第一个包含/include_once 视为第一个包含，因为它是第一次*自新*运行脚本以来已包含在内。在这种情况下，您回到第一方，所有值都设置回默认值或未设置。

# javascript - 如何运行新的 window.open 并自动添加 Ctrl 键？

> ID：10426250
> 
> 赞同：3
> 
> 时间：2012-05-03T06:30:11.403
> 
> 标签：javascript, jquery

在 ff & chrome Ctrl + 单击 url，它将打开一个新选项卡，并且屏幕保留在旧 url 上。当我尝试使用 javascript window.open 时，它也会打开一个新选项卡，但屏幕将更改为新选项卡。如何使用 window.open 打开新标签并将屏幕保留在旧网址中？

或者，..我可以在单击 url 时使用 jquery 自动添加 ctrl 吗？

**jQuery**

```
$(".link").mousedown(function(e) {
   if (e.which === 1) {
      window.open($(this).attr('href'));
   }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T06:35:46.920

这最终归结为浏览器如何选择处理您的指令。例如，JavaScript 不知道它是打开的选项卡还是新的浏览器窗口。

但是可能会起作用的东西，虽然在不同的浏览器中可能不同，但会模糊产生的窗口引用`window.open`：

```
var newWin = window.open($(this).attr('href'));
newWin.blur();
window.focus(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T15:47:41.010

我刚刚添加`return false;`到 David Hedlund 的答案中，让它在 chrome 和 safari 下工作。我发现`return false;`我的 chrome 打开了两个标签。

完整的 jQuery

`$(document).ready(function(){ $("a").click(function() { var newWin = window.open($(this).attr('href')); newWin.blur(); window.focus(); return false; }); });`

不幸的是，当浏览器快速切换到新标签并返回时，chrome 中有一个“flash”。

# sql - 订购返回多行的连接

> ID：10426251
> 
> 赞同：-2
> 
> 时间：2012-05-03T06:30:24.463
> 
> 标签：sql, postgresql, sql-order-by, join, postgresql-8.4

在 PostgreSQL 8.4 中，我有一个连接总是返回 3 行（它们代表 3 名玩家在玩游戏回合**）** -

```
# SELECT r.rid, c2.pos, c2.money, c2.last_ip, c2.quit,
u.id, u.first_name
FROM pref_rounds r
JOIN pref_cards c1 USING (rid)
JOIN pref_cards c2 USING (rid)
JOIN pref_users u ON u.id = c2.id
WHERE c1.id = 'OK336197153288';
  rid   | pos | money |     last_ip     | quit |          id           | first_name
--------+-----+-------+-----------------+------+-----------------------+------------
 165684 |   0 |    14 | 77.91.175.242   | f    | OK336197153288        | Елена
 165684 |   1 |    -2 | 195.177.124.218 | f    | OK3982469933          | Константин
 165684 |   2 |   -14 | 92.243.183.44   | f    | MR438331292705069453  | Дмитрий

 165711 |   2 |    10 | 77.91.175.242   | f    | OK336197153288        | Елена
 165711 |   0 |    -2 | 195.177.124.218 | f    | OK3982469933          | Константин
 165711 |   1 |    -6 | 92.243.183.44   | f    | MR438331292705069453  | Дмитрий

 165764 |   1 |    13 | 77.91.175.242   | f    | OK336197153288        | Елена
 165764 |   2 |   -17 | 195.177.124.218 | f    | OK3982469933          | Константин
 165764 |   0 |     3 | 92.243.183.44   | f    | MR438331292705069453  | Дмитрий 
```

不幸的是，它们没有按**pos**排序（第二列是游戏桌上的位置）。

请在 SQL 中使用一种方法对上述 3 行集进行排序，以便它们始终具有**pos**：0 1 2 然后又是 0 1 2？

还是我必须在我的 PHP 脚本中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T06:34:03.223

使用以下 sql 查询。它将为您提供所需的结果。

```
# SELECT r.rid, c2.pos, c2.money, c2.last_ip, c2.quit,
u.id, u.first_name
FROM pref_rounds r
JOIN pref_cards c1 USING (rid)
JOIN pref_cards c2 USING (rid)
JOIN pref_users u ON u.id = c2.id
WHERE c1.id = 'OK336197153288'
Order by r.rid asc, c2.pos asc
; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T06:34:50.977

也许是这样的：

```
SELECT r.rid, c2.pos, c2.money, c2.last_ip, c2.quit,
u.id, u.first_name
FROM pref_rounds r
JOIN pref_cards c1 USING (rid)
JOIN pref_cards c2 USING (rid)
JOIN pref_users u ON u.id = c2.id
WHERE c1.id = 'OK336197153288'
ORDER BY r.rid,c2.pos; 
```

您首先需要按时订购才能让他们`r.rid`按`c2.pos`您的意愿订购

# android - Android 4.0 --- Android 程序中没有来自 Log.i 函数的 logcat 消息

> ID：10426256
> 
> 赞同：3
> 
> 时间：2012-05-03T06:30:57.377
> 
> 标签：android, logcat

我的新 Android 4.0 设备似乎无法输出 Logcat 消息。

我有一个 Android 程序可以在 Android 2.2 设备上正常运行，并且可以`Log.i`在 Eclipse ADT Logcat 窗口中输出消息。但是，当我在我的新 Android 4.0 设备上运行相同的程序时，我只能在 Eclipse ADT Logcat 窗口中看到带有`dalvikvm`和标记的消息，来自该程序的消息丢失了。`OSFileSystem``Log.i`

我已关注此线程[为什么 logcat 在我的 Android 中不显示任何内容？](https://stackoverflow.com/questions/2250112/why-doesnt-logcat-show-anything-in-my-android)并尝试更改`/sys/kernel/logger/log_main/enable`我的 Android 4.0 设备中的文件。但我发现我的 Android 4.0 设备的目录只有`/sys/kernel`. 下的文件`/sys/kernel`是：

```
-r--r--r-- root     root         4096 2012-05-03 13:17 uevent_seqnum
-rw-r--r-- root     root         4096 2012-05-03 13:17 uevent_helper
-rw-r--r-- root     root         4096 2012-05-03 13:17 profiling
drwxr-xr-x root     root              2012-05-03 13:17 ipv4
drwxr-xr-x root     root              2012-05-03 13:17 mm 
```

我认为我的新 Android 4.0 设备中的 rom 设置可能阻止了`Log.i`来自我的程序的消息。有谁知道如何`Log.i`为我的设备打开消息。

我的 Android 4.0 设备没有植根。

感谢您的任何建议。

# ruby-on-rails - Twitter bootstrap custom.css.scss 不工作

> ID：10426275
> 
> 赞同：2
> 
> 时间：2012-05-03T06:33:34.547
> 
> 标签：ruby-on-rails, twitter-bootstrap

我正在尝试遵循这个 twitter bootstrap 教程并遇到了一个小问题

[http://ruby.railstutorial.org/chapters/filling-in-the-layout#sec:custom_css](http://ruby.railstutorial.org/chapters/filling-in-the-layout#sec:custom_css)

很明显，正在导入引导程序（按钮已设置样式，出现导航栏。但是，我在 custom.css.scss 中所做的更改并未反映在我的布局中。具体来说，我添加了

```
body {
  padding-top: 60px;
} 
```

尝试做到这一点，这样我的导航栏就不会遮挡我页面内容的顶部。不过这并没有做任何事情。真的不知道最好在此处发布用于调试目的的代码，但这里是 application.css

```
*= require_self
*= require_tree . 
```

我已经包括

```
@import "bootstrap"; 
```

在 custom.css.scss 的开头。

我在这里有什么明显的遗漏吗？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T15:06:15.293

谢谢你，米哈伊尔 D！

```
rake assets:clean 
```

成功了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T00:52:36.793

这听起来很奇怪，但我做了 rake assets:clean 然后我只是将文件命名为 test.css.scss 并且它起作用了！当我尝试重命名为 custom.css.scss 时，它失败了。我不是 Ruby 专家，但这解决了我的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-13T12:58:46.010

这也取决于红宝石版本。如果您使用的是 v.2，请尝试降级到 v.1.9。如果您使用的是 rvm，这非常容易：

要安装 v.1.9.3，请使用：

```
$ rvm install 1.9.3 
```

要使用 v.1.9.3 作为默认值：

```
$ rvm --default use 1.9.3 
```

然后

*   重启你的终端
*   安装`bundler`宝石
*   跑`bundle install`
*   跑`rake assets:clean RAILS_ENV=development`
*   启动你的服务器`rails s`

就这样。

# ios - 如何以最佳方式下载文件

> ID：10426276
> 
> 赞同：-2
> 
> 时间：2012-05-03T06:33:38.750
> 
> 标签：ios

我有大约 10MB 的文件。我需要以优化的方式下载。那么，有没有办法以优化的方式以编程方式下载它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T06:39:44.863

这个问题留下了很大的解释空间。这是一个简单的答案。

使用 gzip。

在您的 Web 服务器上启用 gzip。他们中的大多数人都能做到。在您的 http 请求中发送 accept-encoding: gzip 标头。

通常，这将比未压缩更快地完成它。

# windows-phone-7 - 文字转语音 API

> ID：10426277
> 
> 赞同：0
> 
> 时间：2012-05-03T06:33:39.923
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone, windows-phone-7.1.1

我正在从 Android/iOS 移植一个应用程序，它使用文本转语音。

windows phone 有类似的东西吗？

我尝试了 Bing/Microsoft Translator API，但它们不起作用，并且谣言说它们已被弃用： http: [//www.codeproject.com/Articles/259727/Text-to-speech-in-windows-phone7](http://www.codeproject.com/Articles/259727/Text-to-speech-in-windows-phone7)

Nuance 是不可能的，因为他们的费用是荒谬的。

提前致谢！猪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T04:14:36.530

从 Windows Phone 8 开始，现在有一个内置的 TTS 引擎。更多细节可以在[官方 MSDN 文档](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207057%28v=vs.105%29.aspx)中找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T03:34:51.857

他们确实工作。Bing API 已弃用在 Microsoft 翻译服务上，新格式是获取令牌。我能够为此实现一个库，在这里：

[http://msttokenforwp7.codeplex.com/](http://msttokenforwp7.codeplex.com/) 获取令牌。

[http://ttsforwindowsphone7.codeplex.com/](http://ttsforwindowsphone7.codeplex.com/) text-to-speech 库

# django - ORM更新不支持文件上传

> ID：10426283
> 
> 赞同：0
> 
> 时间：2012-05-03T06:34:08.573
> 
> 标签：django, image, orm, save

我有以下型号

```
class Category(models.Model):
    name = models.CharField(max_length=30)
    is_active=models.BooleanField()
    photo=models.ImageField(upload_to='category')
    def __unicode__(self):
       name = str(self.name)
       return name
    class Meta:
        permissions = (
            ('category','Category'),
            ('view_category', 'View category'),
        ) 
```

我的表单类如下

```
class categoryForm(forms.Form):
    name = forms.CharField(widget=forms.TextInput(attrs={'class':'box'}),max_length=32,label='Category',required=True)
    is_active = forms.BooleanField(required=False)
    id = forms.CharField(widget=forms.HiddenInput,required=False)
    photo = forms.FileField(
            required=False,
            label='Select an Image',
            help_text='max. 4 megabytes'
            ) 
```

在 view.py 我有以下

```
formdata = categoryForm(request.POST,request.FILES)
    if formdata.is_valid():
            cd = formdata.cleaned_data
            p1=Category()
            p1.id=cd['id']
            p1.name=cd['name']
            p1.is_active=cd['is_active']
            p1.photo=cd['photo']
            p1.save() 
```

它工作正常，但是当我将其更改为以下时，图像未上传

```
Category.objects.filter(id='%s'%(cd['id'])).update(name='%s'%(cd['name']),
                                    is_active='%s'%(cd['is_active']),
                                   photo=cd['photo']
                                   ) 
```

我认为第二种方法更快，但为什么它不适用于 ImageField

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T06:41:18.303

上面粘贴的代码中的 id 是一个字符串，尝试将其转换为 int。我猜这将使过滤器查询工作，从而使其更新也工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T06:50:41.030

您不应该将字符串传递给`is_active`. 只需传递布尔值，它应该可以工作。此外，您不应该编写类似的代码`'%s' % string`；你可以使用`string`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T11:46:23.113

你需要使用[`get_or_create`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#get-or-create)

# java - 如何编写与语言引擎集成的 Dreamweaver 风格的 IDE？

> ID：10426284
> 
> 赞同：0
> 
> 时间：2012-05-03T06:34:26.733
> 
> 标签：java, c++, ide

**前提：大约** 一年前，我开始编写一个 IDE Web 应用程序。它类似于 Adob​​e 的 Dreamweaver。它将具有所见即所得、文本编辑器和调试工具。当然，我还想编写其他新功能——否则，我不会编写自己的 IDE。我用 JavaScript 编写了一个语法高亮器和解析器，并开始使用 HTML DOM 编写所见即所得。然而，就渲染和 JavaScript 引擎的速度而言，它们并不是编写 IDE 的最佳选择。所以，是的，我意识到 IDE 编程有多么困难。

**问：**目前，我打算用 Java 或 C++（最好是 Java）编写 IDE。我不想为 PHP/HTML/CSS/JavaScript/等编写自己的解释器，而是想将我的应用程序与尽可能多的现有工具集成。我知道 Java 有 Rhino 和 Quercus。Gecko 和几乎任何 JavaScript 引擎都可以与 C++ 集成。我的问题是：

1.  可用于 C++ 和 Java 的最佳引擎是什么？专门针对 PHP、HTML、CSS 和 JavaScript。
2.  是否有可能利用这些引擎来编写调试器和其他工具？最好尽可能不引人注意，这样我就可以毫不费力地更新引擎版本。

我不确定解决这个问题的最佳方法是什么。我宁愿不必回去重写整个事情，因为我的设计有缺陷。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T07:25:48.150

我将从一个开源 IDE 开始并对其进行扩展。Netbeans 和 Eclipse 已经支持多种语言并具有调试器。

IntelliJ CE 支持所有提到的语言，所以也许你只需要扩展它来做你想做的事。您可能根本不需要编写任何代码。;)

# configuration - Windows Azure：如何将配置设置公开为环境变量？

> ID：10426296
> 
> 赞同：10
> 
> 时间：2012-05-03T06:35:17.003
> 
> 标签：configuration, azure, environment-variables

我尝试将此添加到我的 ServiceDefinition.csdef 文件中：

```
<WorkerRole ...><Runtime><Environment>
    <Variable name="AZURE_STORAGE_ACCOUNT">
      <RoleInstanceValue xpath="/RoleEnvironment/CurrentInstance/ConfigurationSettings/ConfigurationSetting[@name='AZURE_STORAGE_ACCOUNT']/@value" />
    </Variable>
</Environment></Runtime></WorkerRole> 
```

我在我的 ServiceConfiguration.Cloud.cscfg 文件中设置了配置设置：

```
<Role name="WorkerRole">
  <ConfigurationSettings>
    <Setting name="AZURE_STORAGE_ACCOUNT" value="<secret stuff>" />
  </ConfigurationSettings>
</Role> 
```

但是当我运行时出现以下错误`cspack`：

```
CloudServices091 : The '/RoleEnvironment/CurrentInstance/Configur
ationSettings/ConfigurationSetting[@name='AZURE_STORAGE_ACCOUNT']/@value' is an
invalid xpath expression. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T16:32:48.370

您是否缺少该设置的声明？我在您的 中没有看到适当的元素`.csdef`，例如`<ConfigurationSettings><Setting name="AZURE_STORAGE_ACCOUNT"/></ConfigurationSettings>`. 您需要其中的一个`.csdef`，然后您仍然需要`.cscfg`包含该值的那个。

如果您使用的是 Visual Studio，那么如果您使用它的属性视图，它应该会为您编辑这两个文件。（只需双击角色，然后单击周围即可进入配置设置并添加新角色。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T07:55:36.207

配置似乎是正确的。如果您能确保您使用的是最新的 SDK，那就更好了。xPath 功能在 Windows Azure SDK 1.5 及更高版本中可用。

此致，

明旭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-12T10:53:02.363

我尝试了博客中提到的不同选项，例如在 .cscfg 和 .csdef 中都包含设置。但是，它似乎不起作用。此外，其他 Xpath 查询如

```
 <RoleInstanceValue xpath="/RoleEnvironment/CurrentInstance/@id"/> 
```

正常工作。

最后，我发现使用的变量名不同：

在 cscfg 我有：

```
<Setting name="WFFEPeriodicRestartTime" value="168:00:00" /> 
```

在csdef中我有：

```
 <ConfigurationSettings>
      <Setting name="PeriodicRestartTime" />
   </ConfigurationSettings> 
```

…………

```
 <Variable name="PeriodicRestartTime">
            <RoleInstanceValue xpath="/RoleEnvironment/CurrentInstance/ConfigurationSettings/ConfigurationSetting[@name='WFFEPeriodicRestartTime']/@value" />
  </Variable> 
```

* * *

将 csdef 更改为：

```
<ConfigurationSettings>
      <Setting name="WFFEPeriodicRestartTime" />
   </ConfigurationSettings> 
```

…………

```
 <Variable name="WFFEPeriodicRestartTime">
            <RoleInstanceValue xpath="/RoleEnvironment/CurrentInstance/ConfigurationSettings/ConfigurationSetting[@name='WFFEPeriodicRestartTime']/@value" />
          </Variable> 
```

* * *

它现在似乎可以正常工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-03T20:33:38.897

在这里遇到了同样的问题，因为我试图通过此处提供的示例读取配置值：[https ://docs.microsoft.com/en-us/azure/cloud-services/cloud-services-role-config-xpath#配置设置](https://docs.microsoft.com/en-us/azure/cloud-services/cloud-services-role-config-xpath#config-setting)- 在这个过程中失去了很多脑细胞！

诀窍是，这并不意味着您从 web.config 中读取配置值（这是我误读的方式），而是从 cscfg 文件中的设置中读取。

对于云服务，您有 1 个适用于所有云服务配置的 csdef 文件，然后是每个环境的 cscfg。在我的场景中，我有用于 DEV、QA、Prod 的 cscfg，我需要根据环境设置不同的变量。

因此，对于 OP 的问题，当您尝试执行“RoleEnvironment/CurrentInstance/ConfigurationSettings..”语句并获取无效的 xpath 值时，它本质上是在说“嘿，我找不到这个值”

如何让魔法发生：

您的 csdef 文件需要以下内容：

```
<ConfigurationSettings>
    <Setting name="AZURE_STORAGE_ACCOUNT" />
</ConfigurationSettings> 
```

您的 cscfg 然后需要：

```
<ConfigurationSettings>
      <Setting name="AZURE_STORAGE_ACCOUNT" value="Some Secret Value" />
</ConfigurationSettings> 
```

出于我的目的，我试图在 startup.cmd 文件中使用此值，因此我能够将以下内容添加到我的 csdef 启动任务中

```
<Startup>
  <Task commandLine="Startup.cmd" executionContext="elevated" taskType="simple">
    <Environment>
      <Variable name="AZURE_STORAGE_ACCOUNT">
        <RoleInstanceValue xpath="/RoleEnvironment/CurrentInstance/ConfigurationSettings/ConfigurationSetting[@name='AZURE_STORAGE_ACCOUNT']/@value" />
      </Variable>
    </Environment>
  </Task>
</Startup> 
```

然后在我的 startup.cmd 中，您可以将值引用为 %%AZURE_STORAGE_ACCOUNT%%

# c - 奇怪的指针初始化

> ID：10426298
> 
> 赞同：1
> 
> 时间：2012-05-03T06:35:25.707
> 
> 标签：c, pointers

今天考了C语言的ponters，有一些关于双指针的问题，使用了下面的语法

```
*pointer = &variable; 
```

我不知道我是否做得正确，但有人可以解释指针指向哪里以及变量中的值将如何变化？一开始我以为会导致sntax错误，但在测试中没有这样的答案。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T06:45:19.027

```
// two int variables.
int var1;
int var2;

// int pointer pointing to var1
int *ptr = &var1;

// pointer to int pointer..pointing to ptr
int **ptr_to_ptr = &ptr;

// now lets make the pointer pointed to by ptr_to_ptr 
// point to var2
*ptr_to_ptr = &var2;

// or alternatively you can do:
// ptr = &var2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T06:43:45.943

`pointer`是指向指针的指针。例如，

```
 int var1=42;
    int* intptr;
    int** ptr2intPtr;
    ptr2intptr = &intptr;
//Syntax in question.
    *ptr2intptr = &var1; 
//Just like *intptr is same as var1, *ptr2intptr is same as intptr
//so the above line will be equivalent to intptr = &var1
    //All the three are the same
    printf("%d",**ptr2intptr);
    printf("%d",*intptr);
    printf("%d",var1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T06:41:44.253

这是一个关于如何使用它的示例：

```
int foo = 123;
int **bar = malloc(sizeof(int *));
*bar = &foo; 
```

Now`bar`是一个指向 foo 的指针。不过也没多大意义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T06:38:56.557

如果指针以这种方式初始化：

```
int *pointer;
int variable = 10;

pointer = malloc(sizeof(int));
*pointer = &variable; 
```

`*pointer = &variable`表示变量的地址被设置为指针的值。由于`*pointer`是取消引用，因此您基本上是在存储一个值而不是设置引用。

# linux - 厨师服务器安装问题

> ID：10426299
> 
> 赞同：1
> 
> 时间：2012-05-03T06:35:27.890
> 
> 标签：linux, ubuntu, chef-infra

我正在尝试按照 opscode 网站上的指南在 linux Ubuntu 上安装 Chef 服务器。

现在我在安装时在控制台上看到的第一个错误是：

```
Setting permissions for user "chef" in vhost "/chef" ...
...done.

Creating config file /etc/chef/solr.rb with new version
 * Starting chef-solr  chef-solr                                         [fail] 
```

我在 var/log/chef/solr.log 中查看了 solr.log

```
[Wed, 02 May 2012 20:32:02 -0700] FATAL: Chef Solr is not installed or solr_home_path, solr_data_path, and solr_jetty_path are misconfigured.
[Wed, 02 May 2012 20:32:02 -0700] FATAL: Your current configuration is:
[Wed, 02 May 2012 20:32:02 -0700] FATAL: solr_home_path:  /var/chef/solr
[Wed, 02 May 2012 20:32:02 -0700] FATAL: solr_data_path:  /var/chef/solr/data
[Wed, 02 May 2012 20:32:02 -0700] FATAL: solr_jetty_path: /var/chef/solr-jetty
[Wed, 02 May 2012 20:32:02 -0700] FATAL: You can install Chef Solr using the chef-solr-installer script. 
```

我已按照[http://wiki.opscode.com/display/chef/Installing+Chef+Server+on+Debian+or+Ubuntu+using+Packages上给出的教程进行操作](http://wiki.opscode.com/display/chef/Installing+Chef+Server+on+Debian+or+Ubuntu+using+Packages)

可能是什么问题？查看 solr.log 显示“未安装 Chef Solr 或 solr_home_path、solr_data_path 和 solr_jetty_path 配置错误。” 我是一个窗户人。如何检查是否安装了 chef solr 或 linux 中的路径有问题？

还能有其他问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T10:00:13.790

Most likely you added the wrong apt repository for your distribution.

```
deb http://apt.opscode.com/ <codename> main 
```

Check this please.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T20:02:06.053

我通过执行以下操作解决了这个问题

1.  创建 /etc/chef/solr.rb

包含以下内容：

*   安装 solr 的基本目录

`supportdir = "/srv/chef/support"`

*   Solr 配置信息

`solr_jetty_path File.join(supportdir, "solr", "jetty")`

`solr_data_path File.join(supportdir, "solr", "data")`

`solr_home_path File.join(supportdir, "solr", "home" )`

1.  然后执行 chef-solr-installer

如果您在独立码头运行 solr，我认为您需要更改 solr_jetty_path 以指向您的码头安装位置，例如 /usr/local/jetty。我只能在进一步实验后确认

希望对你有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T07:27:16.423

对于 Ruby 1.8，缺少 /usr/lib64/ruby/gems/1.8/gems/chef-solr-10.16.2/lib/chef/solr/solr_installer.rb

`require "fileutils"`

# regex - VB6中的正则表达式模式

> ID：10426309
> 
> 赞同：1
> 
> 时间：2012-05-03T06:36:04.897
> 
> 标签：regex, vb6

我需要从这些字符串TCK中提取 RXXX、LXXX 和 CXXX ；PCIEX16.A5 **R2.1** |TCK
TCK; **R2.1** |TCK

这是我在 VB6 中的正则表达式模式代码

```
myRegExp.Pattern = "\s[RLC][0-9]{1,5}.\.1" 
```

但是当我

```
Set myMatches = myRegExp.Execute(" TCK; R2.1 |TCK") 
```

myMatches.count 为 0

当字符串为 TCK 时； **R20.1** |TCK

```
 myRegExp.Pattern = "\s[RLC][0-9]{1,5}.\.1" 
```

正确匹配 R20.1，我应该如何使用正则表达式正确实现这个

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T06:39:14.920

您的 RegEx 模式很好，除了一个额外的点。将正则表达式模式更改为

```
myRegExp.Pattern = "\s[RLC][0-9]{1,5}\.1" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T06:40:19.423

单个点匹配任何字符。所以你的正则表达式失败了，`R2.1`因为

*   `[RLC][0-9]{1,5}`火柴`R2`
*   点匹配`.`
*   文字点`\.`无法匹配`1`.

不过，这对 没有问题`R20.1`：

*   `[RLC][0-9]{1,5}`火柴`R2`
*   点匹配`0`
*   文字点`\.`匹配`.`
*   文字`1`匹配`1`。

只需删除未转义的点：

```
myRegExp.Pattern = "\s[RLC][0-9]{1,5}\.1" 
```

# eclipse - Eclipse、Git 和 Assembla

> ID：10426318
> 
> 赞同：1
> 
> 时间：2012-05-03T06:36:40.380
> 
> 标签：eclipse, git

有人会说我如何使用 Eclipse 和 Git 来处理 Assembla 的存储库？Assembla 有一个团队，每个人都有自己的用户名和密码。如何使用这些信息访问我的 Assembla 存储库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T07:17:29.183

我认为你不需要你的 Assembla 登录名/密码来在你的 Eclipse 中声明一个 Assembla Git repo。

每个 Assembla 项目都需要自己的私有/公共 SSH 密钥（请参阅“[不同项目的不同 SSH 密钥](http://www.assembla.com/spaces/breakoutdocs/wiki/Different_SSH_keys_for_different_projects)”），这意味着您将像使用 GitHub 项目一样使用这些项目（如“ [Egit 教程](http://www.vogella.com/articles/EGit/article.html#github)”和“ [Eclipse SSH 配置](http://wiki.eclipse.org/EGit/User_Guide#Eclipse_SSH_Configuration)”中所示）。

除非您将使用诸如`git@git.assembla.com:yourspace.git`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T16:33:17.183

Assembla 停止支持 Eclipse。在 2013 年 6 月开始进行了修改，以排除与 mylyn 一起使用的汇编。这是他们正式对我说的。

# c# - 等待 Selenium Webdriver 更改的最佳实践？

> ID：10426321
> 
> 赞同：16
> 
> 时间：2012-05-03T06:37:08.657
> 
> 标签：c#, selenium, webdriver

在单击事件之后，我需要等待元素属性发生更改，然后再继续（单击事件导致某些元素移出焦点，而某些其他元素通过 JS 获得焦点）

在花时间在 Web 驱动程序中寻找“waitForAttribute”（selenium 1 命令）的可靠替代方案之后......我可以让下面的代码工作。但我不确定这是否是最好的实现......

还有其他更好的解决方案吗？？

```
wait = new WebDriverWait(wedriver1, TimeSpan.FromSeconds(5));
.....
button.Click();
wait.Until(webdriver1 => webdriver2.webelement.GetAttribute("style").Contains("display: block")); 
```

另外，任何人都可以分享我如何使用 webdriver 处理 AJAX 事件更改的链接。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-09-15T20:44:37.937

我建议使用`org.openqa.selenium.support.ui.ExpectedConditions.attributeToBe(WebElement element, String attribute, String value)`.

例如

```
WebDriverWait wait = new WebDriverWait(driver, 5); // time out after 5 seconds
someElement.click();
wait.until(ExpectedConditions.attributeToBe(someElement, "sort-attribute", "ascending")); 
```

（[文档](https://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/support/ui/ExpectedConditions.html)）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-03T06:48:41.343

这是 Selenium 反复出现的问题。我不确定是否存在“最佳”实现。我相信这在很大程度上取决于情况。

关于 AJAX 驱动的更改，我通常会使用 waitForElementPresent 或 waitForElementNotPresent，具体取决于 AJAX 调用将在页面上进行的更改。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-04T17:37:52.700

您可以使用隐式 WebDriver 等待：

> driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);

隐式等待是告诉 WebDriver 在尝试查找一个或多个元素（如果它们不是立即可用）时轮询 DOM 一段时间。

更多信息：http: [//seleniumhq.org/docs/04_webdriver_advanced.html#implicit-waits](http://seleniumhq.org/docs/04_webdriver_advanced.html#implicit-waits)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-07T04:20:28.550

我觉得使用 WebDriverWait 非常有用。您可以在代码中进行的一项更改是使用 -

```
webelement.isDisplayed(); 
```

而不是获取样式属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T11:17:49.590

你可以像人们在[这里实现的那样使用 Thread.sleep 。](https://stackoverflow.com/questions/6201425/wait-for-an-ajax-call-to-complete-with-selenium-2-web-driver).您可以使用他们的实现来解决您的问题。

```
 public void waitFor(Webdriver driver,,WebElement welElem, String attributeValue){
    int timeout=0;
    while(true){
        if(driver.webElem.getAttribute(attribute)!=null){
        break;
        }
        if(timeout>=10){
        break;
        }
        Thread.sleep(100);
        timeout++;
    }

} 
```

我认为你可以实现这样的东西。我没有检查它，但你明白了。

# php - 在 php 中使用 jquery/ajax 创建两个相互依赖的下拉列表

> ID：10426327
> 
> 赞同：0
> 
> 时间：2012-05-03T06:37:42.470
> 
> 标签：php, jquery, ajax

我有两个下拉列表框。一个用于选择国家，另一个用于选择州。要求是，如果我选择国家下拉列表框并从中选择一个国家，那么该国家的相应州必须自动出现在状态下拉列表框中在php中使用jquery或ajax。（对于某些国家，状态字段将为空，当时状态选择框应显示空文本框）任何人都可以提出解决方案提前谢谢.....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T07:25:53.970

在 HTML 中

```
<select id="Country"></select>
<select id="State"></select> 
```

在脚本中

```
var Country = ['NEPAL', 'USA', 'CHINA'];
var NepalState = ['Gandaki', 'Bagmati'];
var USAState = ['Texas', 'California'];
var ChinaState = ['Phing', 'xing'];
$('#Country').change(function() {
    var stateOption=''; 
var countryvar = $('#Country option:selected').val();
switch (countryvar) {
case 'NEPAL':
    $.each(NepalState, function(index, value) {
        stateOption += '<option>' + value + '</option>';
    });
    break;
case 'USA':
    $.each(USAState, function(index, value) {
        stateOption += '<option>' + value + '</option>';
    });
    break;
case 'CHINA':
    $.each(ChinaState, function(index, value) {
        stateOption += '<option>' + value + '</option>';
    });
    break;
}
$('#State').html('');
$('#State').append(stateOption);
});
var CountryOption='';
$.each(Country, function(index, value) {
CountryOption += '<option>' + value + '</option>';

});
$('#Country').append(CountryOption); 
$('#Country').trigger('change'); 
```

您所要做的就是在第二个选择中加载选项，当第一个选项相对于选择更改的值发生更改时。
演示位于[http://jsfiddle.net/Simplybj/YSMN3/4/](http://jsfiddle.net/Simplybj/YSMN3/4/)

# objective-c - 将 CLI/GUI Windows 程序移植到 OS X

> ID：10426332
> 
> 赞同：0
> 
> 时间：2012-05-03T06:38:09.437
> 
> 标签：objective-c, macos, cocoa, command-line-interface, porting

我有一个带有 GUI 的 Windows 程序，它还使用命令行界面（cmd 窗口）作为调试控制台。基本上，当它被双击时，它会启动一个命令行窗口，然后程序会创建所有的 GUI 窗口。然后您将拥有两个 Windows：主 GUI 和调试控制台。

我正在尝试将此程序移植到 OS X。因为当您运行命令行应用程序时，OS X（以及所有 Unix 操作系统）不会自动启动命令行窗口。所以，我显然需要另一种方式来移植这个应用程序。

我最初的想法只是将源代码导入 XCode 项目，重定向标准输入和输出，然后移植 GUI。GUI 和控制台将像在 Windows 中一样并行运行。我认为这不是最佳解决方案，因为这意味着我基本上必须编写一个终端仿真器。

我的另一个想法是将应用程序移植为命令行应用程序，就像在 Windows 中一样创建它的 GUI。然后必须从可以处理所有 I/O 的 Terminal.app 运行应用程序。不幸的是，我认为不使用 NSApplication 循环就无法使用 Cocoa 框架。

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T21:06:55.603

您当然可以从终端启动的应用程序创建运行循环。但这通常不是您想要做的。

听起来在 Windows 上，CLI 只是用作创建真正调试控制台窗口的快捷方式。所以最简单的答案是创建一个调试控制台窗口。创建一个只包含多行文本或列表视图的窗口非常容易。（如果您想要更高级的东西，请考虑从 iTerm2 或其他开源项目中借用代码，而不是尝试构建一个完整的终端。）如果您的调试信息正在使用一些花哨的宏打印，只需更改宏以登录到您的列表视图。

如果您直接执行 fprintf 或 syslog 之类的操作来进行日志记录，则创建启动主应用程序的包装器应用程序可能会更简单，并且包装器会创建调试控制台窗口并显示主应用程序的标准输出和/或标准错误。（这可能就像使用 popen 一样简单。）

# java - 使用spring集成确保jms消费者关闭的正确方法是什么？

> ID：10426333
> 
> 赞同：4
> 
> 时间：2012-05-03T06:38:10.680
> 
> 标签：java, jms, spring-integration

我正在使用 spring 集成来调用活动 mq 另一端的服务。我的配置看起来像：

```
<bean id="jmsConnectionFactory" class="org.springframework.jms.connection.CachingConnectionFactory">
        <constructor-arg>
            <bean class="org.apache.activemq.ActiveMQConnectionFactory"
                  p:brokerURL="${risk.approval.queue.broker}"
                  p:userName="${risk.approval.queue.username}"
                  p:password="${risk.approval.queue.password}"
                    />
        </constructor-arg>
        <property name="reconnectOnException" value="true"/>
        <property name="sessionCacheSize" value="100"/>
    </bean>

    <!-- create and close a connection to prepopulate the pool -->
    <bean factory-bean="jmsConnectionFactory" factory-method="createConnection" class="javax.jms.Connection"
          init-method="close" />

    <integration:channel id="riskApprovalRequestChannel"/>
    <integration:channel id="riskApprovalResponseChannel"/>

    <jms:outbound-gateway id="riskApprovalServiceGateway"
                          request-destination-name="${risk.approval.queue.request}"
                          reply-destination-name="${risk.approval.queue.response}"
                          request-channel="riskApprovalRequestChannel"
                          reply-channel="riskApprovalResponseChannel"
                          connection-factory="jmsConnectionFactory"
                          receive-timeout="5000"/>

    <integration:gateway id="riskApprovalService" service-interface="com.my.super.ServiceInterface"
                         default-request-channel="riskApprovalRequestChannel"
                         default-reply-channel="riskApprovalResponseChannel"/> 
```

我注意到的是，使用此配置，消费者创建来从活动 mq 获取匹配请求永远不会关闭。每个请求都会增加消费者计数。

我可以通过添加来阻止这种情况发生

```
<property name="cacheConsumers" value="false" /> 
```

到 CachingConnectionFactory。

但是根据 CachingConnectionFactory 的java文档：

> 请注意，持久订阅者只会被缓存，直到会话句柄的逻辑关闭。

这表明会话永远不会关闭。

这是坏事吗？有没有更好的方法来阻止消费者堆积？

干杯，彼得

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T12:27:21.340

首先，您不需要工厂 bean 上的 init 方法 - 它什么都不做 - 会话工厂只有一个连接，并且在其上调用 close() 是无操作的。（CCF 是 SingleConnectionFactory 的子类）。

第二; 缓存消费者是默认设置；会话永远不会关闭，除非会话数超过 sessionCacheSize（您已设置为 100）。

当在缓存会话上调用 close() 时，它会被缓存以供重用；这就是缓存连接工厂的**用途**——避免为每个请求创建会话的开销。

如果您不希望缓存会话、生产者和消费者的性能优势，请改用 SingleConnectionFactory。请参阅 CachingConnectionFactory 的 JavaDoc。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T13:29:25.447

使用时以下是否有效`cachingConnectionFactory`？

在您的 spring 配置文件中添加连接工厂配置详细信息，如下所示：`cacheConsumers="false"`

默认行为为*真*，这导致队列中的连接泄漏。

# .net - 在 Windows 7 上的 contextMenu 中集成应用程序

> ID：10426335
> 
> 赞同：1
> 
> 时间：2012-05-03T06:38:38.733
> 
> 标签：.net, vb.net, windows-7, vb.net-2010

我想将我的应用程序添加到 Windows 7 的上下文菜单中，仅适用于所有类型的文件，而不是文件夹。怎么做？
我只需要文件路径。我已经开始使用一个模块来获取参数

```
Module modMain

 Public Sub Main()
    If My.Application.CommandLineArgs.Count = 0 Then Exit Sub
    frmMain.display(My.Application.CommandLineArgs)
    frmMain.ShowDialog()
 End Sub

End Module 
```

# python - python mechanize FormNotFoundError

> ID：10426340
> 
> 赞同：2
> 
> 时间：2012-05-03T06:38:53.193
> 
> 标签：python, forms, mechanize

我正在研究机械化以获取表单元素

```
import mechanize
br = mechanize.Browser()
br.set_handle_robots(False)
br.open("http://www.bnm.gov.my/index.php?ch=12&pg=622")
br.select_form(name="Rates") 
```

但这是抛出错误：

```
FormNotFoundError: no form matching name 'Rates' 
```

即使有

```
<form onsubmit="return validate();" method="get" action="index.php" name="Rates"> 
```

有人可以帮忙吗

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:17:35.273

尝试使用 nr 参数选择表单：

```
select_form(self, name=None, predicate=None, nr=None) 
```

我猜那个页面只有 1 个表单，所以试试 nr=0。

如果页面中没有表单，则可能意味着它是使用 Javascript 添加的。而且，在这种情况下，机械化是不够的。您将不得不使用 Selenium 或 Spynner。

# phantomjs - 加快 phantomjs 屏幕捕获时间？

> ID：10426344
> 
> 赞同：3
> 
> 时间：2012-05-03T06:39:15.683
> 
> 标签：phantomjs

在运行 PhantomJS 提供的 rasterize.js 示例时，我发现我必须等待 20 秒或更长时间才能生成网页图像。

有没有可能在不消耗大量资源的情况下加快速度的方法？我基本上希望快速生成从加载了 PhantomJS 的网页中捕获的一系列连续图像。如果我能以某种方式将 Phantomjs 输出到视频流中，那就太好了。

现在我会寻找一些只用 PhantomJS 在 1~2 秒范围内截取网页截图的东西。如果已经有一个项目或库可以做到这一点，那也很棒。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-17T21:22:38.357

如果您的图像 URL 被硬编码到 html 响应中，那么您可以执行以下操作：

1.  获取html正文
2.  解析它并获取您的图像
3.  然后将它们渲染成 PhantomJS 或其他任何基于 WebKit 的东西。

您可以查看此示例，[https://github.com/eugenehp/node-crawler/blob/master/test/simple.js](https://github.com/eugenehp/node-crawler/blob/master/test/simple.js)

喜欢：

```
var Crawler = require("../lib/crawler").Crawler;

var c = new Crawler({
    "maxConnections":10,
    // "timeout":60,
    "debug":true,
    callback:function(error,result,$) {
        console.log("Got page");
        $("img").each(function(i,img) {
             console.log(img.src);
        })
    }
});

c.queue(["http://jamendo.com/","http://tedxparis.com"]); 
```

# c# - 如何从 SQL Server 生成文档（docx 或 pdf）？

> ID：10426346
> 
> 赞同：13
> 
> 时间：2012-05-03T06:39:36.213
> 
> 标签：c#, sql-server-2008, ssis, pdf-generation, ms-office

我知道这有点主观，但我正在调查以下情况：

我需要从 SQL Server 数据库中的数据自动生成一些文档。数据库上将有一个 MVC3 应用程序以允许数据输入等，并且（可能）有一个“开始”按钮来生成文档。

需要有一些关于如何创建、命名和存储这些文档的业务逻辑（例如，“父”文档获取一个名称并进入一个文件夹，“子”文档获取一个计算名称并进入子文件夹。

文档可以是 PDF 或 Doc(x)（甚至两者兼有），只要输出可以是 EN-US 和 AR-QA（RTL 文本）

我知道 SSRS、Crystal Reports、VSTO、代码中的“手动”PDF、文字邮件合并等有很多选项……如果那有什么用，我们已经有了 HTML 到 PDF 工具？

有没有人对如何解决这个问题以及“最好的”（最务实的）方法有什么真实的建议？我需要在服务器上安装和配置的“额外”越少越好 - 开发越快越好（一如既往！！）

* * *

迄今为止的发现：

**Word Mail Merge（或 VSTO）** 根本没有提供我需要的简单性、控制性和灵活性——真是太可惜了。最好定义一个 dotx 并能够单独将数据传递给它以生成 docx。我可以实现这一点的唯一方法（我可能在这里错了）是按名称循环通过控件/书签并替换值......混乱。

**OpenXML** 基于 dotx 模板创建文档，即使使用 OpenXML 也不像（恕我直言）应该的那么简单。您必须按名称替换每个内容控件，因此维护不是最简单的任务。

**SSRS** 从表面上看，这是一个很好的解决方案（尽管它需要 SQL Enterprise），但是如果您想动态生成文件夹和文档，它会变得更加复杂。数据驱动的订阅非常接近我想要的。

**Winnovative HTML to PDF Converter*** 这是我们已经拥有的工具（尽管是 .Net 2.0 版本）。这使我可以生成 HTML 页面并将其转换为 PDF。对我来说是一个不错的选择，因为我可以在 MVC3 网站上运行它并将参数传递给控制器​​以生成 PDF。这让我可以更精细地控制文件夹和命名结构——这种方法的问题只是以正确的方式生成页面。一个好处是它会自动给我一个“预览”......基本上只是 HTML 页面！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T08:07:12.357

Office OpenXML 是一种生成办公文件的好方法和简单的方法。XSLT 可以成为格式化内容的强大工具。这项技术不会让您创建 pdf。

不使用任何第三方组件的快速开发将很困难。但如果您确实考虑使用报表服务器，请务必查看 BIRT 或 Jasper。

要生成 pdf，我一直在使用已弃用的 Report.net。它有许多不同语言的端口，仍然足以制作简单的 pdf。[sourceforge 上的 Report.net](http://sourceforge.net/projects/report/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T08:30:04.237

我不认为 SQL Server 本身可以生成 pdf 文件。正如您所提到的，您可以做的是安装一个 SSRS 实例并创建一个生成您需要的信息的报告。然后，您可以创建订阅，以便在您想要的时间将您的报告发送到您想要的位置。

这是一个简单订阅的示例： ![在此处输入图像描述](../Images/4ae55fff776ddc0b09b456715f0968fb.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T10:20:51.287

仅当您可以在服务器上设置它并且确实需要计划报告和复杂报告时才选择 SSRS。

如果您有手动生成 PDF/docx 的代码，我建议您继续使用它。希望其代码的复杂性与您无关。

我在不同的场景中都使用过。我们使用 .NET 中的 excel 类和对象从 Web 应用程序中生成最小报告。

但是为一个需要以预定方式生成 1000 份报告并交付给选定的一组人的系统制定了一个精心设计的报告方案。

# ruby-on-rails-3 - 为什么 Rails ActiveRecord last 方法按 id 排序，而 first 没有？

> ID：10426352
> 
> 赞同：4
> 
> 时间：2012-05-03T06:40:08.937
> 
> 标签：ruby-on-rails-3, sorting, activerecord

据此[，](http://guides.rubyonrails.org/active_record_querying.html) ActiveRecord`first`生成 SQL：

```
SELECT * FROM clients LIMIT 1 
```

而 ActiveRecord`last`生成 SQL：

```
SELECT * FROM clients ORDER BY clients.id DESC LIMIT 1 
```

根据我的观点，on的行为`first`是不正确的，而 on`last`它是。如果不指定顺序，简单的 SELECT 会以任意或不可预测的顺序返回。因此，`first`不保证总是返回相同的记录（如果不是具有最小 id 的记录）。

有谁知道，为什么 Rails ActiveRecord 会这样工作？

在此先感谢帕纳约蒂斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T07:11:21.773

由于我在这篇文章上没有得到任何答案，我试图从其他论坛上的其他人那里找到答案。我相信 ActiveRecord（或 mysql gem）都有一个错误。Rick James 说如果我们想得到最小的 id，我们应该使用 order by 和 limit。[这是他的回答](http://forums.mysql.com/read.php?22,530328,530514#msg-530514)：

[http://forums.mysql.com/read.php?22,530328,530514#msg-530514](http://forums.mysql.com/read.php?22,530328,530514#msg-530514)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T08:49:44.523

我认为这不是法律上的，而是事实上的规则。如果未指定排序，大多数 DB 按创建顺序（因此按其 id 的顺序）返回表的内容。它只是工作。

# map - 无法在 cics 中的字段上创建框

> ID：10426359
> 
> 赞同：2
> 
> 时间：2012-05-03T06:40:37.080
> 
> 标签：map, cics

这是我创建的带有一个字段的地图的代码。我正在尝试在该字段周围添加一个框或一条线，但它没有显示任何线。它只是显示我在初始输入的文本：

```
WC00092 DFHMSD TYPE=&SYSPARM,MODE=INOUT,TERM=ALL,LANG=COBOL,   X
           TIOAPFX=YES,STORAGE=AUTO,CTRL=FREEKB,                          X
           DSATTS=(COLOR,HILIGHT,OUTLINE),                                X 
           MAPATTS=(COLOR,HILIGHT,OUTLINE)                          
WC00092 DFHMDI SIZE=(24,80),LINE=1,COLUMN=1                             
    DFHMDF POS=(5,13),LENGTH=28,                                   X
           INITIAL='PRAMOD''S EXAMINATION SYSTEM',                        X
           ATTRB=PROT,OUTLINE=BOX                                   
    DFHMSD TYPE=FINAL                                               
    END 
```

谁能告诉如何在这些字段周围添加一条线或在它周围添加一个框。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:37:01.763

`OUTLINE=BOX`可能不支持。来自[DFHMSD](http://publib.boulder.ibm.com/infocenter/txformp/v6r0m0/index.jsp?topic=%2Fcom.ibm.cics.te.doc%2Ferziai00162.htm)文档：

> 一些 BMS 属性（例如 COLOR 或 OUTLINE）使用由运行 IBM CICS Client 的底层操作系统提供的屏幕操作工具（扩展诅咒）。如果扩展的 curses 工具包不支持特定属性，它将被忽略。如果某个特定的 BMS 属性似乎不起作用，请首先确保它受到运行客户端的操作系统上的扩展 curses 工具的支持。

我的猜测是您的环境不支持 OUTLINE 属性。

# php - 为什么我在没有斜杠的页面上得到 404，但它与斜杠一起使用？

> ID：10426361
> 
> 赞同：0
> 
> 时间：2012-05-03T06:40:46.240
> 
> 标签：php, apache, .htaccess, http-status-code-404

我有一个允许用户创建和构建网站的应用程序。我们称之为*system.com*。当用户创建一个具有他们已转发到我们的名称服务器的域（例如*domain.com*）的站点时，它会创建文件夹并通过 cPanel API 将他们的域添加到我们的服务器到一个文件夹，如*system.com/[user id]/[站点 ID]/*。在该文件夹中有一个 index.php 文件和一个 .htaccess 文件，内容如下：

```
Options +FollowSymLinks
RewriteEngine on
RewriteRule ^(.*)/$ index.php?page=$1 [L] 
```

我不会从那里详细介绍它的工作原理，但基本上用户可以创建类似*domain.com/something/something-else/*的页面。“某物”文件夹显然并不真正存在，我们的系统只是从 htaccess 中获取它们并从那里开始。

我的问题是*domain.com/something/something-else/*有效，但*domain.com/something/something-else*返回 404。我一直在做研究并尝试了很多事情，但似乎无法使其正常工作。有任何想法吗？提前致谢。

**编辑**：

我应该提到到目前为止我所尝试的。我尝试将重写规则更改为无论斜杠如何工作，如下所示：

```
RewriteRule ^(.*)(?/$) index.php?page=$1 [L] 
```

以及其他变化。

我也尝试了不同的方法来强制使用斜杠，但这些方法都没有奏效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T21:56:00.853

我认为您希望您的规则如下所示：

```
RewriteRule ^(.*)/?$ index.php?page=$1 [L] 
```

其中说：“任何数量的任意字符（可选地后跟斜杠）都应更改为 index.php?page=$1 其中 $1 是您在斜杠之前找到的字符。如果这个匹配，也请忽略您找到的任何其他规则。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T06:45:46.147

它基于您的 url 重写访问规则..

```
RewriteRule ^(.*)/$ index.php?page=$1 [L] 
```

如您所见，**index.php?page=$1**别名为**/**，所有请求都发送到 index.php

# android - Android：如何使用不同的 xml 文件支持多个屏幕

> ID：10426366
> 
> 赞同：2
> 
> 时间：2012-05-03T06:41:10.447
> 
> 标签：android

我正在构建一个应用程序，想在多个屏幕上运行它，外观完全相同。所以我尝试了最差（根据我）和最好的方法（根据开发人员）创建三个单独的 xml 文件文件夹以支持大、中、小屏幕。我的文件夹名称是布局（根据开发人员的说法，它是默认设置，适用于中型屏幕 WQVGA 400）、大布局（WVGA800）和小布局（QVGA）。但是，如果我更改布局文件夹（默认一个）中的文件（在所有三个同名文件夹中）中的某些内容，则该更改适用于大型和中型，但不适用于小型。无论我在布局大文件夹的 xml 文件中进行什么更改，都不适用于大屏幕显示，但布局-small 的更改适用于小屏幕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T08:22:13.560

根据项目，最简单的方法是在 values 文件夹中为每个屏幕尺寸创建一个“styles.xml”文件：

```
values  //default
values-small
values-large
varlues-xlarge 
```

然后，您只需要管理 4 个不同样式的文件（更改长度、边距、字母大小等）。如果需要，您还可以添加@Herry 所说的其他配置（大，土地，..）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T06:50:53.777

您可以在您的 android 项目中使用以下文件夹结构。

```
 1.layout This Use For Default Layout Files  // layout for normal screen size ("default")
   2.layout-land For Use in Landscape Mode
   3 layout-large     // layout for large screen size
   4.layout-large-long
   5.layout-large-long-land
   6.layout-large-notlong
   7.layout-large-notlong-land
   8.layout-ldpi
   9.layout-normal-long
   10.layout-normal-long-land
   11.layout-normal-notlong
   12.layout-normal-notlong-land
   13.layout-small   // layout for small screen size
   14.layout-small-land
   15.layout-xlarge      // layout for extra large screen size
   16.layout-xlarge-land   // layout for extra large in landscape orientation 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T06:54:41.253

"But however if i change something in a file(which is in all three folders by same name) in layout folder(default one) that change is applying to both large and medium but no applying to small."

Answer to this is, "Since you have different layout folder for small, medium and large screen then change made to large screen won't reflect for small screen. You will have to make the change in small-screen layout file as well.

But, as you said, your UI for all different sizes of devices is same then you should never create different layout folders. Only one layout folder is enough, Android will take care of rendering on different screen sizes during run time. Also go through this link [http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html). After reading this you will be able to make your own decision on the type UI design you want for your application.

# vb.net - 如何在 vb.net 和 WCF 中通过 Socket 传输文件

> ID：10426368
> 
> 赞同：0
> 
> 时间：2012-05-03T06:41:11.437
> 
> 标签：vb.net, wcf, sockets

我想使用 Socket 通过 vb.net 中的套接字传输文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T08:48:39.577

服务器端：

```
Do
    Try
        message = reader.ReadString()

        If message = "ATTACHMENT" Then
            writer.Write("")
            Dim num = reader.ReadInt64
            Dim BR As BinaryReader
            Dim FS As NetworkStream
            FS = output
            Dim fulname As String = reader.ReadString
            BR = New BinaryReader(FS)
            Dim buffer(num) As Byte
            buffer = BR.ReadBytes(num)

            Dim BW As BinaryWriter
            Dim FSOut As FileStream
            FSOut = New FileStream(fulname, FileMode.Create, FileAccess.Write)
            BW = New BinaryWriter(FSOut)
            BW.Write(buffer)
            message = ""
            BW.Close()
            writer.Write("CLIENT >> ATTACHMENT RECIEVED")
        End If

    Catch ex As Exception
        System.Environment.Exit(System.Environment.ExitCode)
    End Try
Loop While message <> "SERVER >> EXIT" 
```

客户端：

```
Do
    Try
        messageRecieved = reader.ReadString()

        If messageRecieved = "ATTACHMENT" Then
            writer.Write("")
            Dim num = reader.ReadInt64
            Dim BR As BinaryReader
            Dim FS As NetworkStream
            FS = socketStream
            Dim fulname As String = reader.ReadString
            BR = New BinaryReader(FS)
            Dim buffer(num) As Byte
            buffer = BR.ReadBytes(num)

            Dim BW As BinaryWriter
            Dim FSOut As FileStream
            FSOut = New FileStream(fulname, FileMode.Create, FileAccess.Write)
            BW = New BinaryWriter(FSOut)
            BW.Write(buffer)
            messageRecieved = ""
            BW.Close()
            writer.Write("SERVER >> ATTACHMENT RECIEVED")
        End If
    Catch ex As Exception
        Exit Do
    End Try
Loop While messageRecieved <> "CLIENT >> EXIT" And connection.Connected 
```

# python - 如何在 django 的父模型的 list_display 中显示孩子的多对多属性

> ID：10426378
> 
> 赞同：0
> 
> 时间：2012-05-03T06:42:22.090
> 
> 标签：python, django

我有一个父模型定义为：

```
class PurchaseOrder(models.Model):
    number =  models.CharField(max_length=30, unique=True)
    def services(self):
       return  self.service_set.filter(purchaseorder=self.pk) 
```

子模型服务定义为：

```
class Service(models.Model):
    purchaseorder = models.ForeignKey(PurchaseOrder)
    modules = models.ManyToManyField(Module)

    def get_modules(self):
        return self.modules.all() 
```

还有另一个模型 Module 与 Service 模型具有 M2M 关系。我希望将模块显示为父模型 change_list 视图中的列表，即在 list_display 列表中。我怎么做？对数据库命中数有什么影响？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T16:13:14.847

使用你的例子，我做这样的事情

```
class PurchaseOrder(models.Model):
    number = models.CharField(max_length=30, unique=True)

    def get_modules(self):
        return ', '.join([module.FIELD for service.modules.all() in self.service_set.filter(purchaseorder=self.pk) for module in service.modules.all()]) 
```

然后在 admin.py

```
class PurchaseAdmin(admin.ModelAdmin):
    list_display = ('number', 'get_modules')

admin.site.register(Service, ServiceAdmin) 
```

我不确定 db hits 但您可以使用[django-debug-toolbar](http://pypi.python.org/pypi/django-debug-toolbar)之类的工具来查看在实现它之前和之后生成的 SQL 查询。

**根据评论更新**

试试上面的列表理解，看看它是否有效？您可能需要稍微调整一下输出才能在 shell 中正确使用它。

# c++ - 如何在 C++ 的嵌套循环中正确更新进度条？

> ID：10426379
> 
> 赞同：-1
> 
> 时间：2012-05-03T06:42:26.007
> 
> 标签：c++, progress-bar, parallel-processing, nested-loops, ppl

我使用 MS Visual Studio 2010、C++、PPL 库进行并行计算和 Qt 库。

```
Concurrency::parallel_for (size_t(0), m_Engines.size(), [&](size_t i)
{
    for (size_t j = 1;j <= m_Iterations;j++)
    {
        Compute(i);//some time-cosuming thing           
    }
}); 
```

假设我们有 3 个独立的引擎，`m_Iterations`每个引擎都有。每个引擎的进度条如下所示：

进展一：||||||||

进度2：|||||

进度3：|||||||||||

我想要单个进度条（而不是上面显示的），它显示向后的进度条（其中显示最小值）：

总进度：|||||

让我们假设我们有`QProgressBar * pProgressbar`“`CoreApplication::processEvents()`代码片段”。我应该如何修改代码以使用并发运行时技术实现内部循环的单个进度条的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T07:03:33.130

为了显示最短时间，您可以在函数旁边使用 QWaitCondition 或者您可以编写单独的函数来通知一个 m_Iterations 完成。让我们假设，当前您正在执行 3 个并行计算引擎，编写 QWaitCondition 以指示其他迭代完成它们的工作。

# wordpress - htaccess 重定向，以防分页结果出现 404 错误

> ID：10426380
> 
> 赞同：0
> 
> 时间：2012-05-03T06:42:41.710
> 
> 标签：wordpress, .htaccess, redirect, http-status-code-404

我从 Joomla 迁移到我的网站的 WordPress，现在由于标签分页结果，我在 Google WebMaster 工具中有许多 404 错误。

在我的 Joomla 中，我有 URL

[http://www.mysite.com/tag/rain/page/4/](http://www.mysite.com/tag/rain/page/4/)

[http://www.mysite.com/tag/rain/page/5/](http://www.mysite.com/tag/rain/page/5/)

...

[http://www.mysite.com/tag/rain/page/x/](http://www.mysite.com/tag/rain/page/x/)

现在在 WordPress 中，我没有从第 5 页到 x 的 URL 以及创建 404 错误的示例。

此外，我无法将它们永久重定向到其他内容，因为在该功能中，我将使用该标签创建新帖子，并且丢失的页面将再次可用。

那么，如果页面产生 404 错误，有没有办法将它们重定向到另一个目的地，但仅适用于页面返回 404 错误的情况？

亲切的问候

梅里亚诺斯·尼科斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T08:31:38.650

也许这可以帮助你：[http ://codex.wordpress.org/Creating_an_Error_404_Page](http://codex.wordpress.org/Creating_an_Error_404_Page)

尤其是部分：

*   创建错误 404 页面
*   帮助您的服务器找到 404 页面

作为这些方法，您可以根据需要进行重定向。

# html - 如何将 STAR 符号放入 html 页面的标题中？

> ID：10426381
> 
> 赞同：0
> 
> 时间：2012-05-03T06:42:44.713
> 
> 标签：html, special-characters, title

我看到几个网站的标题标签中有星号（一些纯黑色，一些白色星号）。有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T07:37:05.400

您可以使用各种星号（其中有很多是 Unicode），或者作为`title`元素内的实体引用，例如

```
<title>☆ Hello world</title> 
```

（如果文档的字符编码是 UTF-8 并且已正确声明），或者等效地，

```
<title>&#x2606; Hello world</title> 
```

但是，`title`元素由浏览器以特殊方式呈现，通常使用取决于操作系统或浏览器的字体，超出了作者的控制。这意味着角色曲目在实践中可能相当有限。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T06:49:16.137

你是说这个元素？★

在您的 html: `&#9733;`或 js 中：`\u2605`

更多信息在这里：[http ://www.fileformat.info/info/unicode/char/2605/index.htm](http://www.fileformat.info/info/unicode/char/2605/index.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T06:48:13.303

你知道你可以看看网页的来源，看看其他人是怎么做的吗？

但基本上你想在你的标题标签中插入正确的[html 实体，例如](http://www.w3schools.com/tags/ref_symbols.asp)

```
<title>&#10021; test symbol</title> 
```

# sql - 返回所有列的记录，但其中一个是唯一的（不同的）

> ID：10426383
> 
> 赞同：1
> 
> 时间：2012-05-03T06:42:54.247
> 
> 标签：sql, oracle

我的数据库中有 20 列。我只需要选择具有不同 Ref_ID 的那些，但如果我使用 distinct(ref_ID)，我只会得到这些值的列表。我需要检索所有列，例如所有记录但具有不同的 ref_id。
我正在使用 Oracle 9g。
例如，有 10 条记录，其中 5 条具有相同的 ref_id。所以选择应该只返回所有列的这 5 条记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T07:16:25.267

试试这个：[http ://www.sqlfiddle.com/#!4/9f1ae/10](http://www.sqlfiddle.com/#!4/9f1ae/10)

```
select *
from
(
  select rank() over(partition by d_let order by d_num) rank, tbl.*
  from tbl
  order by d_let
) x
where x.rank = 1 -- only the first row among duplicates 
```

数据：

```
CREATE TABLE tbl
    (d_let varchar2(1), d_num int)
/
INSERT ALL
    INTO tbl (d_let, d_num)
         VALUES ('a', 1)
    INTO tbl (d_let, d_num)
         VALUES ('a', 2)
    INTO tbl (d_let, d_num)
         VALUES ('a', 3)
    INTO tbl (d_let, d_num)
         VALUES ('b', 6)
    INTO tbl (d_let, d_num)
         VALUES ('b', 3)
    INTO tbl (d_let, d_num)
         VALUES ('c', 2)
    INTO tbl (d_let, d_num)
         VALUES ('c', 3)
    INTO tbl (d_let, d_num)
         VALUES ('c', 5)
    INTO tbl (d_let, d_num)
         VALUES ('c', 6)
    INTO tbl (d_let, d_num)
         VALUES ('c', 4)
SELECT * FROM dual 
```

输出：

```
RANK        D_LET   D_NUM
1           a       1
1           b       3
1           c       2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T07:03:39.263

很难说出您的意思，但这是一个想法，这将返回您的表多次包含的 REF_ID 值：

```
select * from YOUR_TABLE
where REF_ID in(
    select REF_ID from YOUR_TABLE
    group by 
      REF_ID
    having
      count(REF_ID) > 1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T07:38:11.443

另一种解决方案：

```
SELECT * 
FROM TableX t
WHERE EXISTS
      ( SELECT *
        FROM TableX tt
        WHERE tt.REF_ID = t.REF_ID
          AND tt.PK <> t.PK           --- the Primary Key of the table
      ) 
```

# git - 是否需要特定命令才能让 git 识别文件的移动？

> ID：10426386
> 
> 赞同：0
> 
> 时间：2012-05-03T06:43:11.290
> 
> 标签：git, github, commit

我对我的项目进行了一些更改，其中一项是将文件移动到另一个文件夹中。我照常做：

```
git add .
git commit -m "commit something"
git push origin 
```

但是在我的github账号上，看项目的时候，我移动的文件还在移动之前的位置。该文件也在我移动到的文件夹中。当查看它被移动的位置时，没有我认为应该发生的提交信息，但是旧的有。这是有原因的吗？如果不是很清楚，我很抱歉，如果需要更清楚，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T06:46:07.043

当您移动或重命名文件时，旧的文件引用仍然存在。您需要通过...从 git 中删除文件

```
git rm 文件名

```

然后提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T06:45:57.747

有`git mv old new`; 你像普通`mv`命令一样使用它。如果您已经添加了新文件，请从 git 中删除旧文件：`git rm old`

它基本上只是以下命令的糖：

```
mv old new
git add new
git rm old 
```

也看看[git-mv 的目的是什么？](https://stackoverflow.com/questions/1094269/whats-the-purpose-of-git-mv)了解更多信息。

# javascript - onclick 函数 Ajax 在 div 上加载页面，并在浏览器中返回和下一个历史记录

> ID：10426390
> 
> 赞同：1
> 
> 时间：2012-05-03T06:43:36.670
> 
> 标签：javascript, ajax

onclick 函数在 div 中加载外部页面，使用 ajax 函数在浏览器中返回历史记录

```
<script type="text/javascript">   
    jQuery(document).ready(function () {
        jQuery.history.init(pageload);  
        jQuery('a[rel=ajax]').click(function () {
            var hash = this.href;
            hash = hash.replace(/^.*#/, '');
            jQuery.history.load(hash);  
            getPage();
            return false;
        }); 
    });

    function pageload(hash) {
        //if(!hash){
        //  document.location.hash='test4.html';
        //}
        if (hash) getPage();     
    }

    function getPage() {
        var data = 'page=' + encodeURIComponent(document.location.hash);
        jQuery.ajax({
            url: document.location.hash.replace(/^.*#/, ''),    
            type: "GET",        
            data: data,     
            cache: false,
            success: function (html) {  
                jQuery('#content').html(html);              
                jQuery('a[rel=ajax]').removeClass('selected');
                jQuery('a[href=' + window.location.hash + ']').addClass('selected');
            }       
        });
    }    
    </script> 
```

如何更改 onClick 功能

```
<a href="#test1.html" rel="ajax">1</a> 
```

# ruby-on-rails - 如何在数组中获得公共输出？

> ID：10426393
> 
> 赞同：0
> 
> 时间：2012-05-03T06:43:43.590
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我有哈希数组，我想检查所有哈希中都存在的公共字段

```
@a = current_user.ser.collect{|x| x.team == "sect"}

[true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true, true] 
```

我使用了收集方法和布尔运算符，所以现在在输出它的给定数组时我想要一个输出，比如整个数组中有 1 个假值，所以它应该只返回假

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T06:51:19.127

尝试：

```
current_user.ser.all?{|x| x.team == "sect"} 
```

而且`x.team`看起来不像哈希表示法。你确定你提供了正确的代码/描述吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T07:01:01.857

您可以执行以下操作：

```
res = true
current_user.ser.each{|x| res = res & (x.team == "sect")} 
```

# php - 如何让脚本自动重启

> ID：10426394
> 
> 赞同：1
> 
> 时间：2012-05-03T06:43:44.847
> 
> 标签：php, linux, shell

我如何使脚本自动重启我认为最后一行有一些问题。

```
#!/bin/bash

# a shell script that keeps looping until an exit code is given

php_command="php -q -f $1.php "
shift
nice $php_command $@
ERR=$?
..............
..............
exec $0 $@ 
```

我收到以下错误`exec: 36: ss.sh: not found`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T06:54:41.380

您可以在 bash 中使用`set -e`一个简单的`while`循环：

```
#!/bin/sh

set -e

php_script=$1.php
shift

while true; do
    php $php_script $@
done 
```

一旦 PHP 脚本返回非零的退出代码，bash 脚本将停止。如果您需要在循环完成后运行任何代码，您可以这样做：

```
while php $php_script $@; do
    continue
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T06:48:51.007

与其重复执行 PHP 脚本，不如将其更改为 PHP 脚本本身的循环？

# .net - Windows 应用程序(C#.net) 安装 IE9 时的 APPCRASH

> ID：10426396
> 
> 赞同：1
> 
> 时间：2012-05-03T06:43:56.203
> 
> 标签：.net, webbrowser-control

我开发了一个基于谷歌分析的 Windows 应用程序...我的编程语言是 C#(c-sharp)...

我的表单中有 2 个 Webbrowser 控件，它们使用 PC 中安装的 IE 版本……我的应用程序。正在使用其他版本，而不是 IE9...它在两者之间崩溃，有时在开始时也...它是一个 .net 框架 4 应用程序...它还使用 ABCPDF.NET 7.042（专业）.. .

请帮忙...

谢谢...:)

错误 ：

> 问题签名：问题事件名称：APPCRASH 应用程序名称：Google Ananlytics Application.exe 应用程序版本：1.0.0.0 应用程序时间戳：4f9e8e3c **故障模块名称：ieframe.dll 故障模块版本：9.0.8112.16443** 故障模块时间戳：4f4c2cfa 异常代码：c0000005 异常Offset：0009FFFF OS版本：6.1.7601.2.1.0.256.48语言环境ID：1033附加信息1： [0A9E](http://go.microsoft.com/fwlink/?linkid=104288&clcid=0x0409)附加信息2：0A9E372D3B4AD19135B95B953A788888882 [.com/fwlink/?linkid=104288&clcid=0x0409](http://go.microsoft.com/fwlink/?linkid=104288&clcid=0x0409) 如果在线隐私声明不可用，请离线阅读我们的隐私声明：C:\Windows\system32\en-US\erofflps.txt

# r - 从名称列表中获取行数据

> ID：10426398
> 
> 赞同：1
> 
> 时间：2012-05-03T06:44:08.900
> 
> 标签：r, dataframe, rows

我有这个数据集

```
 names age height weight
1   joe  23    170     65
2  jack  25    173     73
3   jim  27    168     71
4 james  23    172     70 
```

我想获取身高低于 173 的人的所有信息，所以我这样做了

```
short <- c(t(subset(dfD, height < 173, select = names))) 
```

`short`返回这个

```
[1] "joe" "jim" "jack" 
```

但是当我尝试从该列表中获取所有数据时......

```
dfD[(dfD[1] == short),] 
```

它只返回这个

```
 names age height weight
1   joe  23    170     65 
```

我怎样才能让它工作？

我希望能够创建名单并以这种方式获取他们的所有数据......这怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T07:07:53.230

`subset()`并将`dlply()`选择数据框的子集，并将数据框更改为列表。这是你想要的吗？

```
## Your data
df = read.table(text = "  names age height weight
  joe  23    170     65
  jack  25    173     73
  jim  27    168     71
  james  23    172     70", header = TRUE, sep = "")

  library(plyr) 
   short = subset(df, height < 173)
  data.list = dlply(short, "names") 
```

或者

```
 short = subset(df, height < 173, "names")
  subset(df, names %in% short[[1]]) 
```

# sql-server - 布局sql server

> ID：10426400
> 
> 赞同：0
> 
> 时间：2012-05-03T06:44:32.200
> 
> 标签：sql-server, layout, transform

我有一张像

```
att1 att2 att3 att4
-------------------
1    6    11    16
2    7    12    17 
3    8    13    18
4    9    14    19 
```

将表格作为坐标系的查询是什么：

```
a b val
-------
1 1  1
1 2  6 
1 3  11
1 4  16
2 1  2
2 2  7 
2 3  12
2 4  17
3 1  3
3 2  8
3 3  13
3 4  18
4 1  4
4 2  9
4 3  14
4 4  19 
```

目前我有：

```
select 1,att1 from data_journal_insurance_raw union all
select 2,att2 from data_journal_insurance_raw union all
select 3,att3 from data_journal_insurance_raw union all
select 4,att4 from data_journal_insurance_raw 
```

我错过了'b'部分怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:13:56.047

如果我理解正确，您希望将表格转换为包含行、列和值的表格。

实际上，你错过了这个`a`部分。`a`代表行和`b`列。以下查询应该对您有所帮助。

```
WITH cte AS (SELECT ROW_NUMBER() OVER (ORDER BY att1) AS a, * FROM data_journal_insurance_raw)
SELECT a, 1 as b, CAST(att1 AS VARCHAR(MAX)) FROM cte UNION ALL
SELECT a, 2 as b, CAST(att2 AS VARCHAR(MAX)) FROM cte UNION ALL
SELECT a, 3 as b, CAST(att3 AS VARCHAR(MAX)) FROM cte UNION ALL
SELECT a, 4 as b, CAST(att4 AS VARCHAR(MAX)) FROM cte
ORDER BY a, b 
```

请注意，我将 value 列转换为`VARCHAR(MAX)`，因为我不知道您的表中有哪些数据类型。如果它们都是数字，那么您可以删除这些`CAST`函数。

如果你只在一张桌子上这样做一次，那么这对你来说很好。但是，如果您希望能够在各种表上执行此操作，您可以让 SQL Server 为您编写代码。这是一个可以做到这一点的程序：

```
CREATE PROCEDURE usp_Coordinate_table(@TableName NVARCHAR(200)) AS
BEGIN
    DECLARE @sql NVARCHAR(MAX);
    WITH cte AS (SELECT TOP 1 c.name FROM sys.columns c, sys.objects o WHERE c.object_id = o.object_id AND o.name = @TableName)
    SELECT @sql = 'WITH RowData AS (SELECT ROW_NUMBER() OVER (ORDER BY '+name+') AS RowNum, * FROM '+@TableName+') ' FROM cte;

    WITH ColData AS (SELECT ROW_NUMBER() OVER (ORDER BY c.column_id) AS ColNum, c.name 
        FROM sys.columns c, sys.objects o WHERE c.object_id = o.object_id AND o.name = @TableName)
    SELECT @sql = @sql + 'SELECT RowNum, '+CAST(c.ColNum AS VARCHAR)+' AS ColNum, CAST('+c.name+' AS VARCHAR(MAX)) AS Value FROM RowData UNION ALL '
    FROM ColData c

    SET @sql = SUBSTRING(@sql, 1, LEN(@sql) - 10) + ' ORDER BY RowNum, ColNum'
    EXEC sp_executesql @sql
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T06:52:03.160

您应该在 Union 中有 3 列

```
select att1 ,1,att1 from data_journal_insurance_raw union
select att1 ,2,att2 from data_journal_insurance_raw union
select att1 ,3,att3 from data_journal_insurance_raw union
select att1 ,4,att4 from data_journal_insurance_raw 
```

# eclipse - Eclipse Git 关键字扩展

> ID：10426402
> 
> 赞同：4
> 
> 时间：2012-05-03T06:44:38.897
> 
> 标签：eclipse, git, revision, egit, keyword-expansion

每次我将源代码检出到 git-hub 服务器时，我都需要更新我的源代码修订关键字（@version、@date 等）。

你可能知道：

> 在 Git 中这样做的主要问题是，您无法在提交后修改包含有关提交信息的文件，因为 Git 首先校验文件。

基本上我想要实现的是我的源代码应该如下所示：

```
 * Git revision information:
 * 
 * @version $Revision: 1e7f611039399b32e9000ec454609a0641dde368 $
 * @author  $Author: Eugen Mihailescu <eugenmihailescux@gmail.com> $
 * @date    $Date:   Thu May 3 01:17:45 2012 +0200 $
 * 
 * $Id:  | Thu May 3 01:17:45 2012 +0200 | Eugen Mihailescu  $ 
```

[在这里](http://progit.org/book/ch7-2.html)和[这里](https://github.com/turon/git-rcs-keywords)你可以找到关于如何在 Git 中实现这一点的完整描述。

> 事实证明，您可以编写自己的过滤器，以便在提交/签出时在文件中进行替换。这些是“清洁”和“涂抹”过滤器。在 .gitattributes 文件中，您可以为特定路径设置一个过滤器，然后设置在文件被签出之前（“涂抹”，参见图 7-2）和提交之前处理文件的脚本。

所以我知道如何用 git 命令来做。我已经测试过，它可以正常工作！我真正的问题是我想通过使用 Eclipse IDE 来实现同样的目标。在 Eclipse 中，我有 Eclipse Git，它是基于 JGit 的 Eclipse Team 提供程序，JGit 是 Git 版本控制系统的纯 Java 实现。

在 Eclipse EGit 中没有这样的命令“git checkout”，但可以通过硬重置来完成（右键单击您的项目，然后选择团队 -> 重置 -> 硬）。不幸的是，这不会运行您的清洁/涂抹过滤器，实际上您将从 git hub 获得源代码的纯副本，而无需关键字扩展。

我希望我已经详细描述了整个故事，因为现在我要问：

*   这在 Eclipse 中使用 EGit 可行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T07:01:27.660

此[提交（2010 年 8 月）](http://git.eclipse.org/c/jgit/jgit.git/commit?id=e2e38792b5403da38d5e3ab0e15b626e051107f2)评论

### 在 WorkingTreeIterator 期间执行自动 CRLF 到 LF 的转换

> **`WorkingTreeIterator`**现在可以选择对文本文件执行 CRLF 到 LF 转换。
> 保留了一个基本框架来支持基于 启用（或禁用）此功能`gitattributes`，并支持更通用的涂抹/清洁过滤器系统。
> 由于`gitattribute`在 JGit 中尚不支持，因此未实现，但`mightNeedCleaning()`,`isBinary()`和`filterClean()`方法将在未来提供合理的插入位置。

我不认为在[最新的 JGit 版本](http://wiki.eclipse.org/JGit/New_and_Noteworthy)`gitattribute`中完全支持，并且[最新版本](http://git.eclipse.org/c/jgit/jgit.git/tree/org.eclipse.jgit/src/org/eclipse/jgit/treewalk/WorkingTreeIterator.java#n404)仍然有一个空函数。[`WorkingTreeIterator`](http://git.eclipse.org/c/jgit/jgit.git/tree/org.eclipse.jgit/src/org/eclipse/jgit/treewalk/WorkingTreeIterator.java#n404)`filterClean()`

因此，单独使用 JGit 可能不足以触发您的“过滤内容”驱动程序。

# php - 通过 smtp 使用 cakephp 发送电子邮件

> ID：10426405
> 
> 赞同：0
> 
> 时间：2012-05-03T06:44:48.583
> 
> 标签：php, email, cakephp, sendmail

我有一个用于发送基本电子邮件的代码。但对于 smtp，我无法完善这一点：

```
 function send(){

            $this->Email->smtpOptions = array(
                'port'=>'465', 
                'timeout'=>'30',
                'host' => 'ssl://smtp.gmail.com',
                'username'=>'csorila@gmail.com',
                'password'=>'mypassword',
           );

        $this->Email->delivery='smtp';

            $this->Email->send = 'debug';

            $this->Email->to = 'csorila17@gmail.com'; 
        $this->Email->subject = 'hurrah'; 
//        $this->Email->replyTo = 'noreply@example.com'; 
        $this->Email->from = 'Charmaine Khay Sorila<noreply@example.com>'; 
        //$this->Email->send('Here is the body of the email Chams Email Test');
        //Set the body of the mail as we send it. 
        //Note: the text can be an array, each element will appear as a 
        //seperate line in the message body. 

        if ( $this->Email->send() ) { 
            $this->Session->setFlash('Simple email sent'); 
        } else { 
            $this->Session->setFlash('Simple email not sent'); 
            $this->set('smtp_errors', $this->Email->smtpError);
        } 
        }

    } 
```

我在没有 $this->Email->delivery='smtp'; 的情况下完成了这项工作，但是当我添加该行时，根本无法发送电子邮件:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T06:53:17.867

If you do not want to actually send an email and instead want to test out the functionality, you can use the following delivery option:

```
Copy to Clipboard
$this->Email->delivery = 'debug'; 
```

# c# - 在 C# 中创建新的消息队列 (MSMQ) 时设置默认权限

> ID：10426407
> 
> 赞同：6
> 
> 时间：2012-05-03T06:45:05.773
> 
> 标签：c#, permissions, msmq

我正在尝试以编程`Message Queues`方式在 Windows 2003x64/2008R2 服务器上创建几个。创建队列时，Windows 会自动将默认权限应用于队列。

对于 MSMQ 4，默认添加以下用户

*   每个人
*   队列的创建者
*   匿名登录

当我使用 为队列设置权限时`MessageQueue.SetPermissions()`，指定`AccessControlList`的仅附加到默认安全权限。

有什么方法可以删除或覆盖默认权限？在 底部的[这篇 MSDN 文章](http://blogs.msdn.com/b/johnbreakwell/archive/2009/08/03/default-msmq-queue-permissions-have-changed-in-msmq-4-0.aspx "MSMQ 4.0 中的默认 MSMQ 队列权限已更改")中，它指出

> 但是，您不能自定义默认值，因为它们是硬编码的。

我知道队列的设置保存在一个文件中，位于`C:\Windows\System32\msmq\storage\lqs`. 在这个文件中有一个表示队列权限的安全属性。可以选择编辑此密钥吗？然而，这样做对我来说似乎有点奇怪。

我正在寻找一种正确的方法来指定我自己`AccessControlList`的覆盖队列的默认安全权限。无论是在创建时，还是之后。

任何帮助表示赞赏，

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-03T07:12:29.270

如果您无法删除或撤销对这些默认组的权限，您可以随时尝试拒绝他们的权限。拒绝优先于允许。此代码有效：

```
MessageQueue queue = new MessageQueue(".\\Private$\\QueueName");
queue.SetPermissions("Everyone", MessageQueueAccessRights.ReceiveMessage,
        AccessControlEntryType.Deny); 
```

不过，撤销权限 ( `AccessControlEntryType.Revoke`) 也应该有效。也许您的代码中有错误。在我的机器上工作。

文章说：

> 但是，您不能自定义默认值，因为它们是硬编码的。

这意味着您无法更改在队列创建期间授予的权限，但您可以在之后更改它们。

编辑：让“每个人”独立于操作系统语言：[如何获得“每个人”的 IdentityReference 以在本地化系统上创建 MutexAccessRule？](https://stackoverflow.com/questions/4614697/how-to-get-the-identityreference-for-everyone-to-create-mutexaccessrule-on-loc)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-28T21:11:32.953

我对 ACL 有同样的问题。当我切换到 SetPermissions() 方法时，情况会好很多。

下面的代码对我有用：

```
 queue.SetPermissions(
                    "Everyone",
                    MessageQueueAccessRights.FullControl,
                    AccessControlEntryType.Allow);
                queue.SetPermissions(
                    "ANONYMOUS LOGON",
                    MessageQueueAccessRights.FullControl,
                    AccessControlEntryType.Allow); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-02T16:35:00.007

尽管 Mike 的回答是正确的，但它假定服务器使用英语作为语言。如果您在使用不同语言（在本例中为荷兰语）的服务器上使用此代码...

```
 queue.SetPermissions( 
                     "Everyone",
                     MessageQueueAccessRights.FullControl,
                      AccessControlEntryType.Allow); 
```

...你得到以下异常：

> Kan de naam 每个人都 niet omzetten (fout = 1332)。System.Messaging.AccessControlList.MakeAcl(IntPtr oldAcl) bij System.Messaging.MessageQueue.SetPermissions(AccessControlList dacl) bij System.Messaging.MessageQueue.SetPermissions(String user, MessageQueueAccessRights rights, AccessControlEntryType entryType)

大致翻译为“无法转换名称“每个人”。相反，如果您使用此代码，您将获得“Everyone”的本地化版本：

```
using System.Security.Principal;

** code ommitted**

string everyone = new SecurityIdentifier(WellKnownSidType.WorldSid, null).Translate(typeof(NTAccount)).Value;
queue.SetPermissions( 
                   everyone,
                   MessageQueueAccessRights.FullControl,
                    AccessControlEntryType.Allow); 
```

# android - 在 android 中使用 HTML5 有哪些限制和不便？在android中使用HTML5有什么好处？

> ID：10426414
> 
> 赞同：0
> 
> 时间：2012-05-03T06:45:43.247
> 
> 标签：android, html

在 android 中使用 HTML5 有哪些限制和不便？在android中使用HTML5有什么好处？

我已经研究了一段时间的网络，但在 android 开发中我无法得到任何关于 HTML5 的答案。是不是每个人都喜欢在 Android 中开发 HTML5 网络应用程序。如果是，请给出组合的一些优势、限制和能力。

如果我从 Android 中的 HTML5 Web 应用程序开始，我无法从原生 android 中使用哪些功能。

请帮助我提供一些建议或将我引导至有用的链接...

提前致谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T09:10:54.217

在我看来，HTML 5 的最大优势在于平台的独立性以及在渲染 SVG 等基于 xml 的格式时的巨大兼容性。但是，HTML5 应用程序永远不会拥有原生应用程序的强大实力。我发现将 HTML（在 webview 中）与标准的 Android Java 环境结合起来效果很好。通过实现一个非常容易实现的 javascript 接口，您可以在 HTML 内容和您的原生 android 应用程序之间进行通信。通过这种方式，您可以使用 HTML 的兼容性优势以及原生 android 应用程序的强大功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T06:58:44.233

google io 上有一个 prrsentation：[http](http://www.youtube.com/watch?v=4f2Zky_YyyQ&noredirect=1) ://www.youtube.com/watch?v=4f2Zky_YyyQ&noredirect=1 。

# html - CSS + 通过'：'对齐文本

> ID：10426416
> 
> 赞同：0
> 
> 时间：2012-05-03T06:45:46.357
> 
> 标签：html, css

我有以下文字：

![在此处输入图像描述](../Images/42de39d766f44436bbbce6dd763bd57c.png)

我想对齐“：”，这样它们就在一条直线上——只是更容易阅读。

例如：

主题：域：来源：日期：

![在此处输入图像描述](../Images/8bca75d847edd14201bc815a6371b2e2.png)

有没有一种简单的方法可以让 ':' 加入阵容？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T06:49:43.983

如果使用表格，最好将标题移动到自己的列中：

```
<table>
  <tr>
    <th style="text-align: right">Topic:</th>
    <td>Creating an account (joining)</td>
  </tr>
  …
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T06:48:30.203

将标签和值放在不同的元素中，然后将标签右对齐，值左对齐。

对于表格单元格：

```
<td style="text-align:right;font-weight:bold;">Topic:</td>
<td>Creating an account (Joining)</td> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T06:48:38.560

您可以使用定义列表：[**DEMO**](http://dabblet.com/gist/2216403)

CSS：

```
dt { display:block; float:left; width:100px; text-align: right;}
dt:after{content:':';}
dd { display:block;} 
```

HTML：

```
<dl>
   <dt>aaa</dt><dd>111</dd>
   <dt>bbbbbbb</dt><dd>22222</dd>
<dt>cccccccccc</dt><dd>33333333</dd>
<dt>dd</dt><dd>44</dd>
<dt>eeee</dt><dd>5555555</dd>
</dl> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T06:48:52.457

使用表格

```
<table>
<tr>
<td>name </td><td>: Bob</td>
</tr>
<tr>
<td>age </td><td>: 20</td>
</tr>
</table> 
```

# c++ - 无锁编程的一些疑惑

> ID：10426420
> 
> 赞同：0
> 
> 时间：2012-05-03T06:46:01.627
> 
> 标签：c++, c, assembly, lock-free

大家好，
首先很抱歉，这将是一个中等长度的帖子。所以，请耐心阅读。

在这里，我将记录一些我在浏览一些关于无锁编程的文章时学到的概念，并提出我对这种学习的疑问。
此外，讨论是在 *NIX 多处理器平台上进行的。

首先说“LOCKLESS = BLOCKLESS”，因为据说线程系统作为一个整体取得了进展，因为 CAS/DCAS 只有在某个线程取得进展时才会失败。
因此，我们可以说，在这里，如果在互斥锁上阻塞，我们正在旋转/等待一个条件（例如，CAS while 循环）。

```
Quest1 > 如何在 while 循环上旋转比在
互斥锁上阻塞更有效？

Quest2 > 使用互斥锁的良好设计还可以确保系统继续运行，那么
根据定义，BLOCKLESS 不也是吗？
```

作为对问题 1 的回答，有人会争辩说阻塞可能会进入内核等待状态，并且可能存在代价高昂的上下文切换。任何进一步的澄清将不胜感激。

好的，假设在得到前 2 个问题的答案后，我会确信当要完成的原子操作**不是很大/耗时**时，无锁是非常快速和实时的。

```
Quest3 > 那么，无锁是不是类似于 spinlock ？如果是，为什么我们不能使用
pthread 自旋锁？

```

展望未来，在网上的大多数文献中，人们会看到这样的原子操作实现：

```
__asm__ __volatile__("lock\nxadd" X " %0,%1"                                               
                          : "=r"(结果),"=m"(*(T *)i_pAddress)                                            
                          ：“0”（i_addValue）                                                              
                          ： “记忆”）; // 这是什么意思 ？记忆栅栏？

```

```
Quest4 > 上述汇编中的 ":memory" 是否意味着内存围栏？如果是，
那不需要大约 100 个周期来实施吗？

Quest5 > 这里的lock指令是不是断言操作是
在共享资源上进行的，所以其他线程在这里阻塞了？
据我所知，
这个问题对于或多或少最近的英特尔多进程架构无效，
因为锁定是在缓存行上完成的。

```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T06:59:16.477

1.  无锁确实以某种方式使用了一些类似自旋锁的东西。但是当我们将自旋称为锁时，我们通常希望同步大块代码。当我们谈论无锁时，它针对一项任务，通常只有一条指令。第一个在做长的事情时旋转，第二个在做短的事情时旋转。第一个继续旋转，第二个“旋转”只是“重试”。

2.  如果我没记错的话，“内存”的意思是不要将内存变量优化为寄存器变量。（不太正确。准确地说，它告诉编译器内存的使用必须是强排序的。但它与硬件内存无关击剑。）

3.  锁定指令不如非锁定指令快，但仍比上下文切换快。但它比较慢，所以通常在写一个旋转的东西时，我们会先做一个非锁测试。如果它通过了，我们将进行锁定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T06:59:56.920

这是很多问题！

> 在 while 循环上旋转如何比在互斥锁上阻塞更有效？

如果资源基本上没有争用，平均而言，您不必长时间旋转。这可能比使用互斥锁更便宜。

> 使用互斥锁的良好设计还可以确保系统的进展，那么根据定义，这不是 BLOCKLESS 吗？

这对等待的线程可能更公平。如果在等待资源时旋转，“不幸”的线程可能需要等待很长时间。

> 那么，无锁不是像 spinlock 这样的东西吗？如果是，为什么我们不能使用 pthread 自旋锁？

如果您对如何使算法无锁有一个好主意，那么您可能根本不需要旋转。

> 上述汇编中的 ":memory" 是否意味着内存围栏？如果是，那不是需要大约 100 个周期来实现吗？

是的，这是需要它的系统上的内存防护。同步大量 CPU 缓存需要很长时间（可能超过 100 个时钟）。另一方面，自旋锁或互斥锁也需要内存栅栏才能正常工作。

> 这里的lock指令不是断言操作是在共享资源上完成的，因此其他线程在这里阻塞了吗？

这是一种不同类型的阻塞，可能在硬件级别。如果其他线程需要您刚刚更新的数据，他们将需要等待它在*他们的*CPU 上可用。

# iphone - 如何使用 ASIHTTPRequest 保存和检索下载的文件

> ID：10426425
> 
> 赞同：1
> 
> 时间：2012-05-03T06:46:24.433
> 
> 标签：iphone, multithreading, download, asihttprequest

我正在使用 ASIHTTPRequest 进行多次下载。这里采用异步下载方式，可以进行多次下载。它工作正常。现在我想将这些下载文件保存到应用程序的本地文件夹（在设备中），并且还想检索它（想要获取每个文件的路径）。我怎样才能做到这一点？并且在这里执行多个下载，我如何区分下载中的每个文件？这是我使用的代码。

```
- (void)download{
    UIImageView *image = (UIImageView *)[mainView viewWithTag:selectedTag];

    for (UIProgressView *currentProgress in [image subviews]) {
        if ([currentProgress isKindOfClass:[UIProgressView class]]) {
            NSLog(@"Prog tag: %d",currentProgress.tag);
            if(currentProgress)
            {
                currentProgress.progress = 0.0;
                ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:[NSURL URLWithString:[urlArray objectAtIndex:selectedTag]]];
                [request setDownloadProgressDelegate:currentProgress];
                [request setShowAccurateProgress:YES];                
                [request setDownloadDestinationPath:[[NSHomeDirectory() stringByAppendingPathComponent:@"Documents"] stringByAppendingPathComponent:@"mansory_porsche_carrera_3-1920x1200.jpg"]];
                [request shouldContinueWhenAppEntersBackground];
                [request allowResumeForFileDownloads];
                [request startAsynchronous];

            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T06:51:45.663

您可以相应地修改这些功能，并可以保存您想要的任何文件。

```
- (NSString *)applicationDocumentsDirectory 
{
  return [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];
}

- (void)saveImage:(UIImage*)image:(NSString*)imageName 
{
 NSData *imageData = UIImagePNGRepresentation(image); //convert image into .png format.

 NSFileManager *fileManager = [NSFileManager defaultManager];//create instance of NSFileManager

 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); //create an array and store result of our search for the documents directory in it

 NSString *documentsDirectory = [paths objectAtIndex:0]; //create NSString object, that holds our exact path to the documents directory

 NSString *fullPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.png", imageName]]; //add our image to the path 

 [fileManager createFileAtPath:fullPath contents:imageData attributes:nil]; //finally save the path (image)

 NSLog(@"image saved");
} 
```

对于检索，您可以使用这些行来检查文件是否存在：

```
NSString *cachedImageFileUrl = [documentsDirectory stringByAppendingPathComponent:yourFileName];

NSFileManager *fileManager = [NSFileManager defaultManager];
if([fileManager fileExistsAtPath])
{
  //File exists...
}
else
{
} 
```

有帮助就告诉我！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T07:04:34.330

首先，决定您要使用块还是使用委托函数。

如果你想使用块，那么由于 ASIHTTPRequest 是 NSOperation 的子类，你可以使用 -setComplectionBlock 来创建一个回调，当这个特定请求完成下载时将调用它

如果您想使用委托函数，则将每个请求的委托设置为您想要的对象（可能是您的控制器），然后在同一个对象中实现 -requestFinished 和 -requestFailed 以便您可以处理响应。

每次 url 完成下载时，将使用下载文件的请求作为参数调用回调。此请求具有 -responseData 对象，当请求完成时，它将填充下载的数据。这将是您的图像数据。

这是正常和最知名的方式。现在，您似乎是直接执行此操作，但您已将每个请求设置为写入磁盘上的同一个文件！你确定你会通过这种方式从多张图片中得到你想要的数据吗？在我看来，下载时图像数据会重叠！

这是我要做的：我会下载每张图片，并且在下载完每张图片后，我会使用回调函数来重命名结果文件。之后，在同一个回调中，我会将实际文件名存储在控制器中的 NSMutableDictionary 中。像 [myDict setValue:"path/to/image.png" forKey:"myImage1"] 这样我以后可以访问它们。

<< 附带说明，我认为您应该放弃 AIHTTPRequest，因为它已被开发人员放弃。您可以使用 AFNetworking 作为一个很好的选择。它还提供进度回调，并且是基于块的。如果您希望兼容 iOS 4.0 之前的版本，请忽略最后一段。>>

# c++ - 无效的模板相关成员函数模板推导 - 认为我正在尝试使用 std::set

> ID：10426428
> 
> 赞同：6
> 
> 时间：2012-05-03T06:46:33.570
> 
> 标签：c++, templates, stl

我有一个继承自基类模板的类模板。

基类模板有一个带有成员函数模板的数据成员，我想从我的超类中调用它。

我知道，为了消除对成员函数模板的调用歧义，我必须使用关键字，并且必须在超类中`template`显式引用。`this`

`this->base_member_obj.template member_function<int>();`

所有这一切都很好，除了我正在使用的代码库犯了一个相当不幸的错误，即导入了整个`namespace std`，并且我试图调用的模板成员函数被调用`set`。包含在框架中的某处`std::set`，这导致 GCC 认为我正在尝试声明 a`std::set`而不是调用成员函数`set`。

GCC 4.7 抛出错误**invalid use of 'class std::set'**

**有关显示错误的示例，请参见下文**。如果你注释掉`using namespace std`代码编译得很好。

可悲的是，我无法遍历整个代码库，删除每个`using namespace std`调用，并将每个调用前缀为 std 命名空间内的任何内容`std::`

有没有其他方法可以解决这个问题？

```
#include <set>
using namespace std; // comment this out to compile fine

struct blah
{
    template<typename T>
    void set()
    { }
};

template<typename T>
struct base
{
    blah b;
};

template<typename T>
struct super : base<super<T>>
{
    void fun()
    {
        this->b.template set<int>(); // this line breaks
    }
};

int main()
{
    super<int> s;
    s.fun();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T07:13:26.923

试试这个：

```
this->b.blah::template set<int>(); // this line breaks 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T07:09:06.393

~~好吧，这对我们 C++ 推动者来说是相当尴尬的。~~

这是 G++ 中的一个错误，它也出现在 Comeau Test Drive 中。这不是语言本身的缺陷。问题源于解析的从左到右的性质以及 C++ 语法避开歧义的方式。

在嵌套名称说明符中使用非成员、非基类模板到 typedef 到基类模板是合法的。在这种情况下，与被访问类没有特殊关系的类模板可以出现在`->`：

```
#include <tuple>

template< typename t >
struct get_holder
    { typedef std::tuple< t > type; };

template< typename ... ts >
struct inherits
    : get_holder< ts >::type ... {

    inherits( ts ... v )
        : get_holder< ts >::type( v ) ...
        {}

    template< typename tn >
    void assign_one( inherits &o )
        { this->get_holder< tn >::type::operator= ( o ); } // <- here!
};

int main() {
    inherits< int, char, long > icl( 3, 'q', 2e8 );
    icl.assign_one< char >( icl );
} 
```

由于 C++ 是从左到右解析的，因此当解析器命中 时`->`，它必须`get_holder`在继续之前解析。该标准为此有一个特殊条款 §3.4.5/1 [basic.lookup.classref]：

> 在类成员访问表达式 (5.2.5) 中，**如果 . 或 -> 标记后紧跟一个标识符，后跟一个 <，**必须查找标识符以确定 < 是模板参数列表 (14.2) 的开头还是小于运算符。标识符首先在对象表达式的类中查找。如果未找到标识符，则在整个后缀表达式的上下文中查找它并命名一个类模板。如果在对象表达式的类中查找找到了一个模板，该名称也会在整个后缀表达式的上下文中查找，并且
> 
> — 如果没有找到名称，则使用在对象表达式的类中找到的名称，否则
> 
> — 如果在整个后缀表达式的上下文中找到名称并且没有命名类模板，则使用在对象表达式的类中找到的名称，否则
> 
> —**如果找到的名称是类模板，则它应引用与在对象表达式的类中找到的实体相同的实体，否则程序是非良构的。**

强调我的——尽管`template`关键字出现在`.`和标识符之间，但 G++ 似乎正在遵循这个逻辑`set`。此外，假设它沿着这条路线前进，它应该将歧义标记为错误，而不是尝试选择非成员。

`template`当关键字*确实*出现时，标准的措辞似乎确实存在缺陷，但它不应该引起您看到的混乱。§14.2 [临时名称]：

> 当成员模板专业化的名称出现在 . 或 -> 在后缀表达式中，或在限定 ID 中的嵌套名称说明符之后，并且后缀表达式或限定 ID 显式依赖于模板参数 (14.6.2) 但不引用当前实例化（14.6.2.1）的成员，成员模板名称必须以关键字模板为前缀。**否则，该名称被假定为命名非模板。**

强调我的，该文本是错误的，应该是“假定名称不命名成员模板”，因为在我上面的插图中，它可能是嵌套名称说明符的一部分。如果文本按原样进行，则可以将其解释为在我的插图*中*`template`需要关键字，因此可以指示以下非成员模板（假设语言完全支持这种结构），然后是您的程序可能会被 G++ 误解。

 *但是设计意图很明确，您不需要添加人为的嵌套名称说明符`blah::`，尽管这是一种合法的解决方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-03T07:09:36.443

你有两个选择：

```
 this->b.blah::template set<int>(); 
     //     ^^^^^^ Be very explicit what set you want 
```

或者不要使用`using namespace`（最好的选择）。*

# php - 会话未转移到 https 服务器 php 中的另一个页面

> ID：10426432
> 
> 赞同：0
> 
> 时间：2012-05-03T06:46:49.270
> 
> 标签：php, session, https, sessionid

我开发了一个带有会话的站点。它适用于本地服务器和生产机器。现在他们将站点移动到具有 SSL HTTPs 的新服务器。在这里我面临一个问题。

会话在一个页面中设置，但不会延续到另一个页面。相同的代码适用于基于 http 的服务器。

我尝试了以下方法来解决这个问题，但还没有解决

1）我通过 url 传递会话 ID 并在另一个页面中设置。这里也没有设置SESSION。

2）我在我的php文件中使用这两行作为一些论坛中的建议

ini_set("display_errors",1); 错误报告（E_ALL）；

3）我也使用这些行来解决某些论坛中建议的问题 ini_set('session.cookie_domain', 'https://xxx.com');

session_set_cookie_params(ini_get('session.cookie_lifetime'), ini_get('session.cookie_path'), 'https://xxx.com');

4）在PHP.ini中，显示以下会话下的东西

session.auto_start 关 关

session.bug_compat_42 关 关

session.bug_compat_warn 关 关

session.cache_expire 180 180

session.cache_limiter nocache nocache

session.cookie_domain 无值 无值

session.cookie_httponly 关 关

session.cookie_lifetime 0 0

session.cookie_path //

session.cookie_secure 关 关

session.entropy_file 无值 无值

session.entropy_length 0 0

session.gc_divisor 1000 1000

session.gc_maxlifetime 1440 1440

session.gc_probability 1 1

session.hash_bits_per_character 5 5

session.hash_function 0 0

session.name PHPSESSID PHPSESSID

session.referer_check 无值 无值

session.save_handler 文件 文件

session.save_path /var/lib/php/session /var/lib/php/session

session.serialize_handler php php

session.use_cookies On On

session.use_only_cookies 关 关

session.use_trans_sid 0 0

服务器未定义索引中显示以下错误消息：第 9 行 /var/www/vhosts/xxx.com/httpdocs/HomePage.php 中的用户 ID

我仍然有同样的问题。请建议我解决这个问题

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T09:09:34.673

您已经提供了一些有关您为影响结果所做的更改的信息，但您没有提供您为识别问题所做的诊断的任何详细信息。

您是否发现浏览器正在返回会话 cookie？您是否检查过会话文件是否存在？会话是否跨越 http 和 https？如果是这样，虚拟主机是否在不同的 uid 下运行？

```
<?php

print_r($_COOKIE);

if ($_COOKIE[sesion_name()]) {
    $path=ini_get('session.save_path') . '/' . $_COOKIE[sesion_name()];
    if (!is_readable(dirname($path)) || !is_dir(dirname($path))) {
      print "bad session dir\n";
    }
    if (!is_readable($path) || !is_file($path)) {
      print "bad session file\n";
    } else if (!is_writeable($path)) {
      print "permissions issue with session file\n";
    }
    print_r(stat($path));
    print "\n\n";
    print @file_get_contents($path);
} else {
    print "no session cookie";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T12:26:20.997

在这里，他们提供 Vhost 服务器。Vhost 服务器不存储会话。所以只有我面临这个问题..我使用单向解决这个问题。将会话作为 POST 变量传递并在每个页面中分配会话 ID。现在它起作用了..

# c# - 枚举设置为字符串并在需要时获取字符串值

> ID：10426444
> 
> 赞同：8
> 
> 时间：2012-05-03T06:47:44.727
> 
> 标签：c#, string, enums

我不知道该怎么做
我想要如下代码

```
enum myenum
{
    name1 = "abc",
    name2 = "xyz"
} 
```

并检查它

```
if (myenum.name1 == variable) 
```

我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-03T07:01:26.257

不幸的是，这是不可能的。枚举只能有一个基本的底层类型（`int`、`uint`、`short`等）。如果要将枚举值与其他数据相关联，请将属性应用于值（例如[`DescriptionAttribute`](http://msdn.microsoft.com/en-us/library/system.componentmodel.descriptionattribute.aspx)）。

```
public static class EnumExtensions
{
    public static TAttribute GetAttribute<TAttribute>(this Enum value)
        where TAttribute : Attribute
    {
        var type = value.GetType();
        var name = Enum.GetName(type, value);
        return type.GetField(name)
            .GetCustomAttributes(false)
            .OfType<TAttribute>()
            .SingleOrDefault();
    }

    public static String GetDescription(this Enum value)
    {
        var description = GetAttribute<DescriptionAttribute>(value);
        return description != null ? description.Description : null;
    }
}

enum MyEnum
{
    [Description("abc")] Name1,
    [Description("xyz")] Name2,
}

var value = MyEnum.Name1;
if (value.GetDescription() == "abc")
{
    // do stuff...
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T06:52:06.497

根据[这里](https://stackoverflow.com/questions/1851567/chow-to-use-enum-for-storing-string-constants)你正在做的事情是不可能的。你可以做的也许是拥有一个充满常量的静态类，可能是这样的：

```
class Constants
{
    public static string name1 = "abc";
    public static string name2 = "xyz";
}

...

if (Constants.name1 == "abc")... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T06:51:19.327

以前在这里讨论过，但找不到。短版：你不能给枚举成员字符串值。您可以使用成员名称作为值，但这通常不是您想要的。请[按照此链接](http://weblogs.asp.net/stefansedich/archive/2008/03/12/enum-with-string-values-in-c.aspx)获取有关如何使用属性为枚举成员注释字符串值的指南。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T06:57:06.003

根据您想要做什么，也许您可​​以通过使用[Dictionary](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx "字典")而不是`enum`s 来实现相同的效果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-03T08:31:39.423

很好的答案在这里。详细说明建议的答案是，如果您想***在给定 enum description 的情况下获得 enum 值***。我没有对此进行测试，但这可能有效：

**枚举：**

```
public enum e_BootloadSource : byte
{
    [EnumMember]
    [Display(Name = "UART")]
    [Description("UART_BL_RDY4RESET")]
    UART = 1,
    [EnumMember]
    [Display(Name = "SD")]
    [Description("SD_BL_RDY4RESET")]
    SD = 2,
    [EnumMember]
    [Display(Name = "USB")]
    [Description("USB_BL_RDY4RESET")]
    USB = 3,
    [EnumMember]
    [Display(Name = "Fall Through Mode")]
    [Description("FALL_THRGH_BL_RDY4RESET")]
    FALL_THROUGH_MODE = 4,
    [EnumMember]
    [Display(Name = "Cancel Bootload")]
    [Description("BL_CANCELED")]
    CANCEL_BOOTLOAD = 5,
} 
```

使用如下：

```
foreach(e_BootloadSource BLSource in Enum.GetValues(typeof(e_BootloadSource)))
                    {
                        if (BLSource.GetDescription() == inputPieces[(int)SetBLFlagIndex.BLSource])
                        {
                            newMetadata.BootloadSource = BLSource;
                        }
                    } 
```

注意 inputpieces 纯粹是一个字符串数组，newMetadata.BootloadSource 是 e_BootloadSource。

# php - 下拉菜单的动态变量onchange

> ID：10426448
> 
> 赞同：0
> 
> 时间：2012-05-03T06:48:07.970
> 
> 标签：php, mysql, html

[http://img62.imageshack.us/img62/5582/20704606.jpg](http://img62.imageshack.us/img62/5582/20704606.jpg)

上面的下拉菜单有 3 个值；

```
i)   Staf DC   
ii)  Admin
iii) Staf DT 
```

“所有者”列值 (hafiz) 来自数据库。downdown 中的每个值都有不同的“所有者”值。我希望它像这样完成；

如果选择了 Staf DC，它将运行以下查询：

```
$query = "SELECT * FROM owner where type='Staf DC'"; 
```

如果选择了 Admin，它将运行此查询：

```
 $query = "SELECT * FROM owner where type='Admin'"; 
```

此外，表中“所有者”列的值应自动更改，无需刷新页面。有人可以告诉我一个如何做到这一点的例子吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T07:40:43.730

下面的代码在下拉列表的 onchange 中调用 jquery 函数。Jquery 函数将选定的下拉值传递给 getdata.php，对其进行处理并回显所有者名称。然后所有者名称显示在标签框中。

下拉代码

```
echo '<table><tr><td>ModelNo.</td><td>';
echo "<select id='typeval' onchange='changeOwner();'>";
echo "<option value='Staf DC'>Staf DC</option>";
echo '</select></td>';
echo "<td><label id='own'>hafiz</label></td></tr></table>"; 
```

jQuery代码

```
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
function changeOwner()
{
    var selname = $("#typeval option:selected").val();  
    $.ajax({ url: "getdata.php",

        data: {"selname":selname},

        type: 'post',

        success: function(output) {
            $("#own").html(output);
        }

    });
}
</script> 
```

php代码（getdata.php）；

```
$selname = $_POST['selname'];
$query = "SELECT * FROM owner where type='$selname'";
$res = mysql_query($query);
$rows = mysql_fetch_array($res);
echo $rows['owner']; //assumed that the column name in db is owner 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T07:05:40.480

如果您不想刷新整个页面，则需要使用一些 Javascript/Ajax。[JQuery 允许使用.post()](http://api.jquery.com/jQuery.post/)方法轻松执行您需要的操作。

首先将 JQuery 文件添加到您的 HTML 标头中

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"> 
```

然后根据您的请求创建一个 .php 文件（例如：update_owner.php）：

```
<?php
    // 1\. Connect to your SQL database
    // ...

    // 2\. Get the type
    $type = $_POST['type'];

    // 3\. Perform your query
    $results = mysql_query("SELECT * FROM owner where type=".$type);

    // 4\. Get the only result you want (the first row)
    $row = mysql_fetch_array( $results );

    // 5\. Return the result in json format (assuming that the name
    echo json_encode(array("responseCode" => 200, "row" => $row)); 
```

然后添加一些javascript（使用JQuery）：

```
$("select#type").change(function() {
    // Get the value of your input field
    var type = $(this).val();

    // Set the URL
    var url = 'update_owner.php';

    // Start send the post request
    $.post(url,
        function(data){

            // The response is in the data variable
            if (data.responseCode == 200) {
                // Write the name in the right cell (with #owner id)
                $("#owner").html( data.row.name );
            }
            else {
                // Bad request
            }
        },"json"
    ); // Make sure the the response is in json format
    return false;
}); 
```

应该这样做

PS：我为我糟糕的英语道歉......我是法国人

# android - android listactivity背景颜色

> ID：10426451
> 
> 赞同：3
> 
> 时间：2012-05-03T06:48:20.283
> 
> 标签：android, background-color, listactivity

如何设置列表活动的背景颜色？我可以设置列表视图项目的背景颜色，但不能设置孔 Activity-View（参见图像底部的黑色部分）。我怎样才能做到这一点？

ListActivity XML 如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:padding="5dp"
    android:background="@color/darkbluelogo" >

    <ImageView android:id="@+id/list_image"
        android:layout_width="48dip"
        android:layout_height="48dip"
        android:contentDescription="@id/list_image"
         />
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:padding="5dp" 
        android:background="@color/darkbluelogo"
        android:scrollingCache="false" 
        android:cacheColorHint="#00000000" >

        <TextView
            android:id="@+id/title"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@+id/title" >
        </TextView>

        <TextView
            android:id="@+id/datetime"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@+id/datetime" >
        </TextView>

    </LinearLayout>
</LinearLayout> 
```

这就是它在设备上的显示方式： ![在此处输入图像描述](../Images/a33df4315484527989344630b9885d00.png)

**解决方案：**

我必须添加样式 XML 并将其添加到 AndroidManifest.xml 中的活动中

这是正确的答案： [https ://stackoverflow.com/a/10426474/1306012](https://stackoverflow.com/a/10426474/1306012)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T06:49:51.380

在包含您的列表视图的 xml 文件中设置`layout_height`为。`fill_parent`并设置你想要的那个 xml 文件的背景。

**编辑**：在这种情况下，您可以使用主题设置背景

像这样

```
<style name="MyTheme">

    <item name="android:background">@color/darkbluelogo</item>

</style> 
```

并将此主题应用于清单文件中的列表活动。

```
 <activity
        android:theme="MyTheme" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T06:51:33.610

以下代码显示了如何设置 ListActivity 的背景颜色。

```
getListView().setCacheColorHint(Color.rgb(36, 33, 32));
getListView().setBackgroundColor(Color.rgb(36, 33, 32)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T06:51:18.187

您已经给出了主要线性布局的高度

```
 android:layout_height="wrap_content" 
```

做了

```
android:layout_height="fill_parent" 
```

它会改变整个背景的颜色。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T07:05:24.190

嗨，如果您使用了默认的 android 列表视图，请添加以下内容：

```
 setListAdapter(new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, CONTENT));

    final ListView listView = getListView();
    listView.setBackgroundColor(Color.parseColor("#4597CD")); 
```

或者，如果您在 xml 布局中设置了 listview，则：

```
<ListView
    android:id="@+id/listviewID"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#4597CD"
    android:cacheColorHint="@color/darkbluelogo"
  /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T07:50:50.493

检查 ListView 属性的宽度和高度都应该是“fill_parent”..

```
 <ListView
    android:id="@+id/listCategory"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/darkbluelogo"
    android:cacheColorHint="@color/darkbluelogo"
  /> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-12T15:38:51.197

```
super.getListView().setBackgroundColor(getResources().getColor(R.color.red)); 
```

# php - 使 PDF 更易于复制

> ID：10426454
> 
> 赞同：0
> 
> 时间：2012-05-03T06:48:30.967
> 
> 标签：php, pdf, codeigniter-2

我知道不可能完全保护浏览器中显示的任何内容。但作为一项要求，我必须让他们更难这样做。

1）我想在浏览器中显示PDF文件，但是阅读器不能下载文件，只能查看。

2) 隐藏指向实际 PDF 的链接。可以在 php 中使用 readfile() 从私人位置传递 pdf 文件。

到目前为止，我只找到了 pdf.js，但它仍然是一个早期的代码，并且没有太多的教程可以完全掌握它。另外，我不知道它是否可以让您像我在 2 中所说的那样流式传输 pdf。

所以我的问题是，还有其他解决方案吗？或者如果有人使用过 pdf.js，您如何将数据流式传输到它而不是直接链接它？另外，我不能使用第三方 API，假设这将通过 Intranet 访问。

我知道这是徒劳无功的，但我需要确保一切都得到了审视。

# c# - 串口波特率变化延时

> ID：10426456
> 
> 赞同：3
> 
> 时间：2012-05-03T06:48:34.910
> 
> 标签：c#, properties, serial-port, delay, baud-rate

设置开放串口的波特率时，我们要等多久才能真正改变波特率？我想这取决于端口的驱动程序，对吧？（特别是如果它不是真正的串行端口）。

在这种情况下，有没有办法获取事件或查询串口以查看它的实际波特率？

我见过这么多脏代码，它们**设置波特率并在继续工作之前休眠几秒钟**，这种延迟实际上是随机的，有时在某些系统上不起作用（因为驱动程序可能需要更多时间在该系统上？！）。

在某些情况下，情况更糟，连接到串口的设备会超时，如果延迟太长，会话就会完全失败！

**是否有任何“标准”方式来更改端口属性（如“波特率”）？**

# ajax - jsf - 从 ajax 请求中检索参数

> ID：10426463
> 
> 赞同：0
> 
> 时间：2012-05-03T06:49:00.697
> 
> 标签：ajax, jsf, parameters

如何将参数添加到`a4j:commandLink`? 当我在调试模式下检查时，该参数始终为空。

网页代码：

```
<a4j:form>
    <a4j:commandLink reRender="content" action="#{surveyEvaluationBean.doDetailEvaluation}">
        <f:param name="question" value="#{result.question.pK.longValueAsString}" />
        <h:graphicImage url="/survey/img/cloverleaf.jpg" styleClass="srv-analysis-cloverleaf" />
    </a4j:commandLink>
</a4j:form> 
```

豆：

```
HttpServletRequest request = (HttpServletRequest)FacesContext.getCurrentInstance().getExternalContext().getRequest();
    String param = request.getParameter("question"); 
```

* * *

我刚刚发现了错误。没有任何问题`a4j-components`，错误如下：我无法正确创建问题对象。所以PK真的是空的。我很抱歉浪费你们的时间伙计们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T06:59:51.690

1）这应该工作

```
Map<String,String> params = 
    FacesContext.getExternalContext().getRequestParameterMap();
String question = params.get("question"); 
```

[JSF 2 参数示例](http://www.mkyong.com/jsf2/jsf-2-param-example/)

2）这里有另一种实现方式

```
<a4j:commandLink reRender="content" action="#{surveyEvaluationBean.doDetailEvaluation}">
   <a4j:actionparam name="question" value="#{result.question.pK.longValueAsString}"/>
</a4j:commandLink> 
```

> 在 bean 中你只需要一个 getter/setter，你不需要自己检索参数。a4j:actionparam 自动执行分配。（马克斯·卡茨）

看这里[将参数发送到控制器](https://stackoverflow.com/q/5109980/617373)

最后一个

3) 如果您使用 EL 2 及以上，您可以将其作为参数发送到`doDetailEvaluation`

像这样

```
<a4j:commandLink reRender="content" action="#{surveyEvaluationBean.doDetailEvaluation(result.question.pK.longValueAsString)}"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T05:09:22.500

我刚刚发现了错误。没有任何问题`a4j-components`，错误如下：我无法正确创建问题对象。所以PK真的是空的。我很抱歉浪费你们的时间伙计们。

# coronasdk - Corona SDK 显示组问题 - 此代码中的错误在哪里？

> ID：10426470
> 
> 赞同：0
> 
> 时间：2012-05-03T06:49:34.727
> 
> 标签：coronasdk

有没有人能看到这个用于 Corona 的 lua 代码中的逻辑缺陷？

这个概念是您创建一个新的“扩展”显示对象（例如 MyGroup:new(...)），然后您可以使用百分比将对象插入到它在父对象中的位置（因此无需使用像素计数） .

问题 - 问题是绘制的对象大致在正确的位置，但只是有点偏离？我有一种感觉，这可能是由于“self:insert(displayO)”行中父级中的坐标发生了变化？

主程序.lua

```
------------------------------------------------------------------------------
-- HELPERS 
------------------------------------------------------------------------------
function rpadString (str, len, char)
    if char == nil then char = ' ' end
    return  (str .. string.rep(char, len - #str))
end

function drawBorder(obj)
    local b = obj.contentBounds 

    local myRectangle = display.newRect(b.xMin, b.yMin, obj.contentWidth, obj.contentHeight)
    -- print ("Rect X,Y,Width,Height: ", b.xMin, b.yMin, obj.contentWidth, obj.contentHeight)
    myRectangle.strokeWidth = 1
    myRectangle:setFillColor(140, 140, 140, 1)
    if obj.gcGroupName then
        -- Group
        myRectangle:setStrokeColor(100, 250, 180)
        myRectangle.strokeWidth = 1
    else
        -- Image/Rect
        myRectangle:setStrokeColor(250, 180, 180)
        myRectangle.strokeWidth = 2
    end

end

function dumpDisplayObjects(doParent, level)
    drawBorder(doParent)
    if doParent.numChildren then
        for i=doParent.numChildren,1,-1 do
            local doChild = doParent[i]
            dumpDisplayObjects(doChild, level + 1)
        end
    end
end

------------------------------------------------------------------------------
-- MAIN 
------------------------------------------------------------------------------
require "MyGroup"

print "RUNNING ........................................."
display.setStatusBar( display.HiddenStatusBar )

-- Create Toolbar Area at Bottom
local mainGroup = MyGroup:new("Main Group", 0, 0, display.contentWidth, display.contentHeight)
local toolbarArea = MyGroup:new("Inventory", 0,0,0,0)
mainGroup:GcInsertLRTB(toolbarArea, 0, 100, 80, 100, "Inventory")    -- Percentages Used

-- Draw Rectangle 1
local toolbarAreaImage = display.newImage( "toolbarArea_button.png", 0, 0)
toolbarArea:GcInsertLRTB(toolbarAreaImage, 0, 20, 0, 100, "Inventory Button")

-- -- Setup Toolbar Group
-- local toolbarAreaToolbar = MyGroup:new("InventoryToolbar", 0, 0, 1, 1)
-- toolbarArea:GcInsertLRTB(toolbarAreaToolbar, 20, 100, 0, 100, "Toolbar")
--  -- 
-- -- Draw Rectangle 2
-- local rect2 = display.newRoundedRect(0, 0, 1000, 1000, 5)
-- rect2.strokeWidth = 1
-- rect2:setStrokeColor(140, 140, 140)
-- rect2:setFillColor(140, 140, 140, 100)
-- toolbarAreaToolbar:GcInsertLRTB(rect2, 0, 100, 0, 100, "Rect2")

-- Debug Display
dumpDisplayObjects(toolbarArea, 1) 
```

MyGroup.lua

```
MyGroup = {}

function MyGroup:new(name, left, top, targetWidth, targetHeight)
    -- Inherit from Group
    myGroup = display.newGroup()

    -- Work Around (Dummy Display Object Insertion) (See Note 1)
    myGroup.dummyDO = display.newCircle( myGroup, 10, 10, 1 )
    myGroup.dummyDO:setFillColor(1,1,1,1)
    myGroup.dummyDO.debugComment = "Dummy Display Object"
    myGroup:insert(myGroup.dummyDO)

    myGroup.myGroupName = name      
    myGroup.debugComment = name
    myGroup.targetWidth = targetWidth
    myGroup.targetHeight = targetHeight
    myGroup.x = left
    myGroup.y = top

    function myGroup:GcInsertLRTB(displayO, leftP, rightP, topP, bottomP, debugComment)
        self:insert(displayO)   -- <=== DOES THIS UPSET THINGS FOR THE PARENT???

        -- Remove Work Around Dummy Display Object (See Note 1)
        if self.dummyDO then 
            self.dummyDO:removeSelf() 
            self.dummyDO = nil
        end

        displayO:setReferencePoint(display.TopLeftReferencePoint)
        displayO.x = leftP * 0.01 * self.targetWidth
        displayO.y =  (topP * 0.01) * self.targetHeight

        -- Scale Display Object (or set target's if adding another MyGroup)
        if not displayO.myGroupName then
            -- Not a MyGroup
            local xScale = (self.targetWidth * (rightP - leftP)/100) / displayO.width  
            local yScale = (self.targetHeight * (bottomP - topP)/100) / displayO.height
            displayO:scale(xScale, yScale)
        else
            -- Inserted object is a MyGroup
            displayO.targetWidth = self.targetWidth * (rightP - leftP)/100
            displayO.targetHeight = self.targetHeight * (bottomP - topP)/100 
            displayO:scale(1,1)  -- TODO: Probably don't need this
        end

    end

    return myGroup
end

-- Class Variables

-- Class Methods

return MyGroup 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T00:05:18.530

我认为这个问题可能是一个错误：“myGroup:setReferencePoint(display.TopLeftReferencePoint) 导致项目移动”

那是：

*   AnscaMobile 博客指出：“主要区别在于组的默认参考点是 display.TopLeftReferencePoint，...</li>
*   将已经存在的默认值应用于组会更改组中不应出现的项目的位置：例如代码：“myGroup:setReferencePoint(display.TopLeftReferencePoint)

因此，解决方法可能必须在类中进行 if/then 检查以确保 setReferencePoint 仅应用于非组。

以 anscamobile 为案例 #14049

# mysql - MySQL 的光标类型

> ID：10426471
> 
> 赞同：0
> 
> 时间：2012-05-03T06:49:40.587
> 
> 标签：mysql, stored-procedures, cursor

我有一个 MySQL 游标，但我需要将其设置为只读且不可滚动，但如何在存储过程中设置它？

我的存储过程看起来像

```
DROP PROCEDURE IF EXISTS `GetAllNonprocessedSMSes` €€
CREATE PROCEDURE `GetAllNonprocessedSMSes`()
   BEGIN
      ...
      DECLARE id_cur CURSOR FOR
         SELECT `id` FROM (
            SELECT
               MIN(`id`) AS `id`
            FROM
               `inbox`
            WHERE
               `Processed`='false'
               AND `udh`=''
         ) AS `baseview`
      ORDER BY `id`;

      DECLARE CONTINUE HANDLER FOR NOT FOUND SET finish = TRUE;

      OPEN id_cur;
      the_loop : LOOP
         FETCH id_cur INTO smsid;
         ...
      END LOOP the_loop;

      ...
   END €€ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T12:35:01.997

您没有提及您使用的是哪个版本的 MySql，但根据[MySQL 5.0 参考手册](http://dev.mysql.com/doc/refman/5.0/en/cursors.html)：

“MySQL 支持存储程序中的游标。语法与嵌入式 SQL 中的一样。游标具有以下属性：
- 不敏感：服务器可能会或可能不会复制其结果表
- 只读：不可更新
- 不可滚动：只能遍历在一个方向，不能跳过行”

因此，我会说 MySql 游标根据定义是只读且不可滚动的！

# dynamics-crm-2011 - CRM 2011 横幅/品牌

> ID：10426484
> 
> 赞同：3
> 
> 时间：2012-05-03T06:50:59.193
> 
> 标签：dynamics-crm-2011, branding

我想知道如何将品牌应用到 CRM 2011 网站？

我正在考虑添加一个客户横幅来代替放置在每个页面顶部的当前 Microsoft Dynamics CRM 徽标（在顶部功能区上方的 div 中）

或者有没有办法替换包含 CRM 视频和以下消息的部分：

*“欢迎使用 Microsoft Dynamics CRM 欢迎使用 Microsoft Dynamics CRM
仪表板通过提供信息的高级视图帮助您入门。”*

使用自定义横幅？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T08:04:28.147

您对呈现的 html 所做的任何直接更改都将被视为不受支持。这不是世界末日，而是您在应用下一次汇总时需要考虑的事情。

支持使用您自己的内容更新“入门”部分。[这是MSDN 文章](http://msdn.microsoft.com/en-us/library/gg309355.aspx)的链接，该文章对此进行了解释。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T14:16:48.953

该 CRM 徽标位于 CRM 服务器 @ 上`..\Program Files\Microsoft Dynamics CRM\CRMWeb\_imgs\CRMMastheadLogo.png`。它的尺寸是 140 x 17。更改该文件会更改徽标，并且正如 Daz 所提到的，非常不受支持。

# c# - WCF 服务发现问题，需要很长时间才能返回结果？

> ID：10426485
> 
> 赞同：3
> 
> 时间：2012-05-03T06:51:07.863
> 
> 标签：c#, wcf, service-discovery

我有一个 WCF 服务器库和客户端 [Winform]，我使用自托管 winform 启动服务器。

我想让客户端发现 LAN 上的活动服务器，以另一种方式获取列表中的在线服务器 IPAddresses。我试过了`DiscoveryClient`，`UdpDiscoveryEndpoint`它起作用了，这是代码：

**客户端[Winform]：**

```
 private void button1_Click(object sender, EventArgs e)
    {
        DiscoveryClient discoveryClient = new DiscoveryClient(new UdpDiscoveryEndpoint());
        FindResponse findResponse = discoveryClient.Find(new FindCriteria(typeof(IFileManager)));
        foreach (EndpointDiscoveryMetadata ep in findResponse.Endpoints)
        {
            listView1.Items.Add(ep.Address.ToString());
        }
    } 
```

**服务器[Winform]：**

```
ServiceHost host = new ServiceHost(typeof(MainService));
private void button1_Click(object sender, EventArgs e)
    {
        if (button1.Text == "Start")
        {
            host.Description.Behaviors.Add(new ServiceDiscoveryBehavior());
            host.AddServiceEndpoint(new UdpDiscoveryEndpoint());
            host.Open();
            button1.Text = "Stop";
        }
        else
        {
            host.Close();
            button1.Text = "Start";
        }
    } 
```

但它没有像我预期的那样工作！

*   为什么我必须给 ClientDiscovery 一个特定的标准？我有很多接口，我只需要主机地址，而不是接口的地址！*   获取列表需要花费太多时间 [大约 15-20 秒]，不是应该很快吗？

    **更新：**
    在我使用 WCF 之前，我已经在 TCP 套接字上开发了一个服务器发现，我使用了 try/catch 的并行线程来连接和循环 255 个 IP 地址，例如：(192.168.1.X)，我在 LAN 5 服务器上尝试过[ PC]，结果是如此完美和快速，我坐了一个超时（3 秒）
    ，但在 WCF 上我不知道我将如何完成这个！

    ![在此处输入图像描述](../Images/0a52700c8126dd52bdf3363acf1e41ee.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-02-09T06:14:45.007

如果您将`DiscoveryClient`'`FindAsync()`方法与`FindProgressChanged`and`FindCompleted`事件一起使用而不是同步`Find()`方法，您会发现`FindProgressChanged`一旦端点结果进来，事件就会被触发，这意味着您可以立即访问它们，而不必等待搜索的结束。`FindCompleted`当火灾发生时，您会知道搜索结束。

`FindProgressChanged`对我来说，我的网络的所有客户端都使用此方法通过事件进行报告，只需要几秒钟的时间。

哦，如果您出于任何原因需要取消搜索（例如，有人在搜索过程中关闭了您的对话框），请调用`DiscoveryClient`'s`CancelAsync()`方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T07:55:04.163

> 为什么我必须给 ClientDiscovery 一个特定的标准？我有很多接口，我只需要主机地址，而不是接口的地址！

这就是解耦的重点，您需要的所有服务都在单个服务器上这一事实是一个实现细节。也就是说，您*可以*将您的客户端耦合到您的特定架构，使用从发现过程的第一个结果收到的 MEX 地址中的信息手动创建客户端。

> 获取列表需要花费太多时间 [大约 15-20 秒]，不是应该很快吗？

不，如果您正在寻找服务的多个实例，则发现不应该很快：默认超时为 20 秒。现在，如果您只需要该服务的一个实例（大多数情况下），那么您可以通过将 FindCriteria 的 MaxResults 属性设置为 1 来明确告诉客户端在找到第一个服务后停止。这比等待超时。

有关更多信息，您可以查看这篇[出色的文章](http://msdn.microsoft.com/en-us/magazine/ee335779.aspx)。

**更新**

您可以通过[FindCriteria.Duration](http://msdn.microsoft.com/en-us/library/system.servicemodel.discovery.findcriteria.duration.aspx)属性设置超时。

**更新 2**

您可以通过 MEX 端点获得有关该服务的所有信息。您可以将 MetadataExchangeClient 与您从发现中获得的 MEX 地址一起使用，并使用您返回的 MetadataSet 中的信息（请参阅[http://msdn.microsoft.com/en-us/library/ms730243.aspx](http://msdn.microsoft.com/en-us/library/ms730243.aspx)，检索服务元数据），但我不确定你会得到什么样的信息，因为我从来没有这样使用过。

这取决于您所说的状态是什么意思：WS-discovery 没有我所知道的状态概念，无论服务是否存在。对此概念的任何其他解释，您必须将自己实现为服务中的操作。

# windows - 何时在 Azure 诊断中使用 EndOnDemandTransfer()？

> ID：10426490
> 
> 赞同：3
> 
> 时间：2012-05-03T06:51:29.343
> 
> 标签：windows, azure, azure-diagnostics

Azure 诊断提供了[`RoleInstanceDiagnosticManager.EndOnDemandTransfer()`](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.diagnostics.management.roleinstancediagnosticmanager.endondemandtransfer.aspx)我不太了解的方法。如果我只是调用`BeginOnDemandTransfer()`then 则`GetActiveTransfers()`始终返回一个非空集合，并且我的代码不知道何时停止等待传输完成。

看起来我必须打电话`EndOnDemandTransfer()`，但MSDN对此不是很清楚。

何时`EndOnDemandTranfer()`在 Azure 诊断中使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T07:16:19.933

您应该在按需传输完成后调用**EndOnDemandTransfer方法。**启动按需传输时，您将**OnDemandTransferOptions**传递给该方法：

```
var options = new OnDemandTransferOptions();
options.NotificationQueueName = "on-demand-notifications";
...

manager.BeginOnDemandTransfer(DataBufferName.Logs, options); 
```

从代码示例中可以看出，您可以在**OnDemandTransferOptions**类上设置**NotificationQueueName 。**这是在按需传输完成后将接收消息的队列。您需要监控队列，阅读消息，最后使用您在消息中找到的**RequestId调用****EndOnDemandTranfer**方法。

 ******这是这样一条消息的样子：

```
<OnDemandTransfers>
  <Logs>
    <NotificationQueueName>wad-transfer</NotificationQueueName>
    <LevelFilter>Undefined</LevelFilter>
    <From>2009-12-10T11:27:15.1376953Z</From>
    <To>2009-12-10T11:32:15.1376953Z</To>
    <RequestId>7352b663-ba11-413a-8db0-bca889ea84df</RequestId>
  </Logs>
</OnDemandTransfers> 
```

在 Neil 的博客上阅读更多相关信息：http: [//convective.wordpress.com/2009/12/10/diagnostics-management-in-windows-azure/](http://convective.wordpress.com/2009/12/10/diagnostics-management-in-windows-azure/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T16:46:28.087

Sandrino 是正确的，但我会补充另一个观点。理论上，您应该在启动 OnDemand 传输时收到队列通知（如果指定）。但是，我发现设置预定传输更容易。轮询队列并正确调用 EndOnDemandTransfer 有点麻烦。

设置 1 分钟的传输间隔意味着它将每 1 分钟开始并继续。获得所需数据后，只需将其设置回 0 即可将其关闭。恕我直言，比处理 OnDemand 更容易。

更多信息： [http ://dunnry.com/blog/2012/04/16/GettingDiagnosticsDataFromWindowsAzure.aspx](http://dunnry.com/blog/2012/04/16/GettingDiagnosticsDataFromWindowsAzure.aspx)******

# android - 在android中更改日期字符串格式

> ID：10426492
> 
> 赞同：39
> 
> 时间：2012-05-03T06:51:41.050
> 
> 标签：android

我从 SAX 解析中获取日期字符串，如下所示：**Wed, 18 Apr 2012 07:55:29 +0000**

现在，我希望这个字符串为：**2012 年 4 月 18 日 01:25 PM**

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2012-05-03T06:53:26.027

```
SimpleDateFormat format = new SimpleDateFormat("MMM dd,yyyy  hh:mm a");
String date = format.format(Date.parse("Your date string")); 
```

**更新 ：-**

如上，`Date.parse("Your date string");`已弃用。

```
String strCurrentDate = "Wed, 18 Apr 2012 07:55:29 +0000";
SimpleDateFormat format = new SimpleDateFormat("EEE, dd MMM yyyy hh:mm:ss Z");
Date newDate = format.parse(strCurrentDate);

format = new SimpleDateFormat("MMM dd,yyyy hh:mm a");
String date = format.format(newDate); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-10-17T20:34:19.217

这将做到：

```
public static String formateDateFromstring(String inputFormat, String outputFormat, String inputDate){

    Date parsed = null;
    String outputDate = "";

    SimpleDateFormat df_input = new SimpleDateFormat(inputFormat, java.util.Locale.getDefault());
    SimpleDateFormat df_output = new SimpleDateFormat(outputFormat, java.util.Locale.getDefault());

    try {
        parsed = df_input.parse(inputDate);
        outputDate = df_output.format(parsed);

    } catch (ParseException e) { 
        LOGE(TAG, "ParseException - dateFormat");
    }

    return outputDate;

} 
```

例子：

```
String date_before = "1970-01-01";
String date_after = formateDateFromstring("yyyy-MM-dd", "dd, MMM yyyy", date_before); 
```

输出：

```
date_after = "01, Jan 1970"; 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-05-14T04:57:42.707

从官方文档中，在新的 API (18+) 中你应该实现这个：

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.SSS", Locale.US);
String time=sdf.format(new Date()); 
```

文档：http: [//developer.android.com/reference/java/text/SimpleDateFormat.html](http://developer.android.com/reference/java/text/SimpleDateFormat.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-07-16T21:03:13.727

最简单的解决方案是使用[DateFormat](http://developer.android.com/reference/java/text/DateFormat.html)的 getter 方法： getDateTimeInstance DateFormat 对象格式日期如下：1969 年 12 月 31 日下午 4:00:00，但是在 4:00 之后还有那些额外的零

```
Date date = new Date();
String fDate = DateFormat.getDateTimeInstance().format(date);
System.out.println(fDate); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-04-06T15:34:41.073

这对我有用，使用**SimpleDateFormat**和**Calendar**

```
String originDate = "Wed, 18 Apr 2012 07:55:29 +0000";
SimpleDateFormat formatIn = new SimpleDateFormat("EEE, dd MMM yyyy hh:mm:ss Z");
SimpleDateFormat formatOut = new SimpleDateFormat("MMM dd,yyyy hh:mm a");
Calendar calendar = Calendar.getInstance();
calendar.setTime(formatIn.parse(originDate));

String newDate = formatOut.format(calendar.getTime()); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-01-14T03:02:39.263

## java.time 和 ThreeTenABP

这个问题的现代答案已经过期了。当这个问题在 2012 年被问到时，使用`SimpleDateFormat`和/或`DateFormat`其他答案是正确的，即使这些课程一直很麻烦。几年后，它们被现代 Java 日期和时间 API 的 java.time 所取代，坦率地说，我发现使用它要好得多。所以我正在这样做。

我建议您将转换分为两个操作。在您的程序中，不要将日期和时间保留为字符串。将它们保留为适当的日期时间对象。因此，当从 SAX 解析时，还将日期时间字符串解析为`OffsetDateTime`立即。稍后当您需要向用户显示日期和时间（或将其传输到另一个系统）时，将其转换为用户的时区并将其格式化为用于该目的的适当字符串。

**解析成 OffsetDateTime**

您得到的字符串符合 RFC 1123 格式。java.time 有一个内置的格式化程序，这很好，因为它使我们免于构建自己的格式化程序。

```
 String stringFromSaxParsing = "Wed, 18 Apr 2012 07:55:29 +0000";

    OffsetDateTime dateTime = OffsetDateTime.parse(
            stringFromSaxParsing, DateTimeFormatter.RFC_1123_DATE_TIME);

    System.out.println(dateTime); 
```

此片段的输出是：

> 2012-04-18T07:55:29Z

**转换为用户的时区和格式**

```
 DateTimeFormatter wantedFormatter = DateTimeFormatter.ofPattern("MMM dd, uuuu hh:mm a", Locale.ENGLISH);

    String formatted = dateTime.atZoneSameInstant(ZoneId.systemDefault())
            .format(wantedFormatter);

    System.out.println(formatted); 
```

我在亚洲/科伦坡时区运行它并得到了想要的：

> 2012 年 4 月 18 日 01:25 PM

## 问题：java.time 不需要 Android API 级别 26 吗？

java.time 在较旧和较新的 Android 设备上都能很好地工作。它只需要至少**Java 6**。

*   在 Java 8 及更高版本以及更新的 Android 设备（从 API 级别 26 开始）中，现代 API 是内置的。
*   在非 Android Java 6 和 7 中获得 ThreeTen Backport，现代类的后向端口（ThreeTen 用于 JSR 310；请参阅底部的链接）。
*   在（较旧的）Android 上使用 ThreeTen Backport 的 Android 版本。它被称为 ThreeTenABP。并确保从`org.threeten.bp`子包中导入日期和时间类。

## 链接

*   [Oracle 教程：日期时间](https://docs.oracle.com/javase/tutorial/datetime/)解释如何使用 java.time。
*   [Java 规范请求 (JSR) 310](https://jcp.org/en/jsr/detail?id=310)，`java.time`第一次描述的地方。
*   [ThreeTen Backport 项目](http://www.threeten.org/threetenbp/)，`java.time`Java 6 和 7 的反向移植（ThreeTen for JSR-310）。
*   [ThreeTenABP](https://github.com/JakeWharton/ThreeTenABP) , ThreeTen Backport 的 Android 版
*   [问题：如何在Android项目中使用ThreeTenABP](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project)，有非常详尽的解释。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-05T20:15:58.430

这是我的解决方案，可能对您有所帮助

```
 public static void setFormattedEventDate(TextView textView,String start_date , String end_date){
        SimpleDateFormat formatIn = new SimpleDateFormat("yyyy-MM-dd");
        SimpleDateFormat formatOut = new SimpleDateFormat("dd MMM");
        try {
            Date startDate = formatIn.parse(start_date);
            Date endDate = formatIn.parse(end_date);
            String outputStartDate = formatOut.format(startDate);
            String outputEndDate = formatOut.format(endDate);
            textView.setText(outputStartDate+" - "+outputEndDate);
        } catch (ParseException e) {
            e.printStackTrace();
        }

    } 
```

然后像这样调用这个方法

```
setFormattedEventDate(contentViewHolder.rowItemEventBinding.txtCompetitionDate, event.datestart, event.dateend); 
```

# javascript - 如何从中获取选定/突出显示的文本 using Javascript?

I have a `<textarea></code> which I want to use as a editing panel similar to the ones found in most bulletin boards and forums (even like the one</h1> <p>ID：10426495</p> <p>赞同：2</p> <p>时间：2012-05-03T06:52:00.670</p> <p>标签：javascript, html, textarea, selection, highlight</p> </body> </html></textarea>`

# css - 位置相对与绝对？

> ID：10426497
> 
> 赞同：163
> 
> 时间：2012-05-03T06:52:04.477
> 
> 标签：css

`position: relative`CSS和CSS有什么区别`position: absolute`？什么时候应该使用它们？

* * *

## 回答 #1

> 赞同：169
> 
> 时间：2012-05-03T06:57:02.673

**绝对 CSS 定位**

`position: absolute;`

绝对定位是最容易理解的。你从 CSS`position`属性开始：

```
position: absolute; 
```

这告诉浏览器将要定位的任何内容都应从文档的正常流程中删除，并将放置在页面上的确切位置。它不会影响 HTML 中它之前或之后的元素在网页上的定位方式，但是除非您覆盖它，否则*它将*受其父级定位的影响。

如果您想将一个元素放置在距离文档窗口顶部 10 像素的位置，您可以使用该元素的`top`偏移量进行`position`定位`absolute`：

```
position: absolute;
top: 10px; 
```

然后，该元素将始终`10px`从页面顶部显示，无论什么内容通过该元素、在该元素下方或上方（视觉上）。

四个定位属性是：

1.  `top`
2.  `right`
3.  `bottom`
4.  `left`

要使用它们，您需要将它们视为偏移属性。换句话说，定位的元素`right: 2px`不会向右移动`2px`。它的右侧从窗口的右侧（或其覆盖父级的位置）偏移`2px`. 其他三个也是如此。

**相对定位**

`position: relative;`

相对定位使用与定位相同的四个定位属性`absolute`。但不是根据浏览器视口确定元素的位置，而是从元素在正常*流*中的位置开始。

例如，如果您的网页上有三个段落，并且第三个段落上`position: relative`放置了一个样式，则其位置将根据其当前位置偏移——而不是从视口的原始侧面偏移。

第 1 款。

第 2 段。

第 3 段。

在上面的示例中，第三段将从`3em`容器元素的左侧开始定位，但仍位于前两段的下方。它将保留在文档的正常流程中，只是略微偏移。如果您将其更改为 ，则它`position: absolute;`后面的任何内容都会显示在它的顶部，因为它将不再处于文档的正常流程中。

**笔记：**

*   `width`绝对定位的元素的默认值是其中内容的宽度，与相对定位的元素不同，它的默认值是`width`它`100%`可以填充的空间。

*   您可以拥有与绝对定位元素重叠的元素，而您不能对相对定位的元素执行此操作（本机即不使用负边距/定位）

* * *

**大量来自： [此资源](http://webdesign.about.com/od/advancedcss/a/aa061307.htm)**

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2012-05-03T07:09:41.980

“相对”和“绝对”定位都是相对的，只是框架不同而已。“绝对”定位是相对于另一个封闭元素的位置。“相对”定位是相对于元素本身没有定位的位置。

这取决于您使用哪一个的需求和目标。“相对”位置适用于您希望将元素从其在元素流中原本应该具有的位置移出，例如使某些字符出现在上标位置。“绝对”定位适用于将一个元素放置在某个由另一个元素设置的坐标系统中，例如，用一些文本“叠印”图像。

作为一个特殊的，使用没有位移的“相对”定位（只是设置`position: relative`）使一个元素成为一个参考框架，这样你就可以对它内部的元素使用“绝对”定位（在标记中）。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-02-12T18:27:01.933

要注意的另一件事是，如果您希望将绝对元素限制在父元素中，则需要将父元素的位置设置为相对。这将使子元素包含在父元素中，并且它不会与整个窗口“相对”。

我写了[一篇博](http://blog.troygrosfield.com/2013/02/11/working-with-css-positions-creating-a-simple-progress-bar/)文，给出了一个简单的例子，它产生了以下影响：

![在此处输入图像描述](../Images/7432b8ca26fd0b4316d92c20cee9fb00.png)

它有一个绝对位于父黄色 div 底部的绿色 div。

[1](http://blog.troygrosfield.com/2013/02/11/working-with-css-positions-creating-a-simple-progress-bar/) [http://blog.troygrosfield.com/2013/02/11/working-with-css-positions-creating-a-simple-progress-bar/](http://blog.troygrosfield.com/2013/02/11/working-with-css-positions-creating-a-simple-progress-bar/)

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2012-05-03T06:54:48.953

**相对位置：**

*如果您指定 position:relative，那么您可以使用 top 或 bottom 以及 left 或 right 来相对于它通常在文档中出现的位置移动元素。*

**绝对位置：**

*当您指定 position:absolute 时，该元素将从文档中删除并准确放置在您告诉它的位置。*

这是一个很好的教程[http://www.barelyfitz.com/screencast/html-training/css/positioning/](http://www.barelyfitz.com/screencast/html-training/css/positioning/)与绝对和相对定位的两个位置的示例用法。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2016-05-25T17:12:03.980

**相对：** 相对于它的当前位置，但可以移动。或者一个 RELATIVE 定位元素是相对于 ITSELF 定位的。

**Absolute ：**绝对定位元素相对于它的最近定位的父元素定位。如果存在，那么它的工作方式就像固定......相对于窗口。

```
<div style="position:relative"> <!--2nd parent div-->
    <div>   <!--1st parent div-->
        <div style="position:absolute;left:10px;....."> <!--Middle div-->
          Md. Arif
       </div>
    </div>
</div> 
```

在这里， 2nd parent`div`位置是相对的，所以中间`div`会改变它相对于 2nd parent 的位置`div`。如果第一个父`div`位置是相对的，那么 Middle`div`将改变它相对于 1st parent 的位置`div`。[细节](http://arifur-rahman-sazal.blogspot.com/2013/04/css-static-absolute-relative-fixed.html)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-01-29T07:03:03.803

给出答案，因为我的声誉不足以评论。但是不要将此视为答案，只是一个附加信息，就像我自己一样，在页脚和定位方面都有一些问题。

设置页面时，使我的页脚始终保持在底部，具有绝对位置，而主容器/包装器具有相对位置。

然后我发现我的文本内容和同一内容内的菜单（页眉和页脚之间的页面的白色部分）存在一些问题，当将这些设置为绝对时，页脚不再停留。

正如您所说，定位是一个复杂的主题。

我的解决方案，对于我想要在网页中“绝对”位置的内容，而不是被推到一边，例如打开下拉菜单时，实际上是给它相对位置，并将它放在我的下拉菜单下方 35em菜单。（35em 是我的下拉菜单的高度，完全展开时）

然后，Top:-35em，表示之前被推到一边的内容。然后添加 margin-bottom:-35em。这样，内容在我的下拉菜单“下方”，但在视觉上它与我的下拉菜单并排！下面到页脚的空白区域只有 10em 的边距，就像在开始玩这个之前一样。所以我对此的解决方案是这样的：

```
 html, body {
    margin:0;
    padding:0;
    height:100%;

}
h1 {
    margin:0;
}
    #webpage {
    position:relative;
    min-height:100%;
    margin:0;
    overflow:auto;
}
     #header {
    height:5em;
    width:100%;
    padding:0;
    margin:0;
}
     #text {
    position:relative;
   margin-bottom:-32em;
    padding-top:2em;
    padding-right:2em;
    padding-bottom:10em;
    background-repeat:no-repeat;
    width:70%;
    padding-left:auto;
    margin-left:auto;
    margin-right:auto;
    right:10em;
    float:right;
    top:-32em;
      }
#dropdown {

position:absolute;
    left:0;
    width:20%;
    clear:both;
    display:block;
    position:relative;
    top:1em;
    height:35em;

}
    #footer {
    position:absolute;
    width:100%;
    right:0;
    bottom:0;
    height:5em;
    margin:0;
     margin-top:5em;
} 
```

我看到您的问题得到了很好的回答，但是经过很多麻烦后，我发现这是一个非常好的解决方案，并且是一种更好地理解定位工作原理的方法。当我将文本内容放在下拉菜单下方时，它不会t 将我的文本推到一边。如果我将文本更改为绝对位置，则页脚不会留在原位。因为我相信这对比我更多的人来说是一个问题，所以我在这里添加了这个。实际上发生的事情是，我将文本 35ems 放在下拉列表下方。

然后，我在视觉上把它放在彼此旁边，相对位置，top:-35em;，然后平衡下面的巨大空间，margin:-35em;

有时会低估负值，非常好的功能，当人们更好地理解这些位置时！

自然，固定位置对于我的页脚来说似乎也是逻辑的，但我确实希望页脚低于视口，如果文本或内容比视口长。并留在底部，如果页面上的内容很少。

这个 setupp 很好地解决了这个问题，记住使用 'em' 而不是 'px' 以获得更流畅/动态的页面布局！:)

（可能有更好的解决方案，但这适用于我跨平台以及设备）。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-03-23T17:53:53.153

**相对与绝对：**

*   **区别：**相对于自身，相对于最近的定位祖先。
*   **区别：**它周围的其他元素尊重它的旧存在，它周围的其他元素不尊重它的旧存在。
*   **相似性：**它周围的其他元素不尊重它的新存在，它周围的其他元素不尊重它的新存在。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-06-22T07:03:36.273

让我们讨论一个场景来解释绝对与相对之间的区别。

在 body 元素内部，假设您有一个 header 元素，其高度是 viewheight 的 95%，即 95vh。在这个容器中，您放置了一个图像并将其不透明度降低到 0.5。现在您想在左上角附近放置一个徽标图像。我希望你理解这个场景。因此，您将在标题部分有一个较轻的图像，并在其顶部的指定位置有一个徽标。

但是在开始之前，我已经像这样将边距和填充设置为 0

```
*{
   margin:0px;
   padding:0px;
   box-sizing: border-box; 
} 
```

这确保没有默认边距和填充应用于元素。

因此，您可以通过两种方式实现您的要求。

**第一种方式**

*   你给图像一个类说标志。
*   在你写的CSS中

    `.logo{ float:left; margin-top:40px; margin-left:40px; }`

*   这将徽标放置在距作为标题的封闭父级的顶部和左侧 40 像素处。图像将显示为根据需要放置。

但是我的朋友，这是一个糟糕的设计，因为在不需要时给它一些边距来放置一个你不必要地消耗大量空间的图像。您所需要的只是将图像放置到该位置。你通过用边距来缓冲它来管理它。边距占据了空间并将其内容推得更深，给人的印象是它恰好位于您想要的位置。希望您通过像这样解决问题来理解这个问题。您占用的空间比仅在所需位置放置图像所需的空间多。

现在让我们尝试不同的方法。

**第二种方式**

*   带有徽标类的图像位于带有标题类的标题元素内。所以父类是header，子类是logo。
*   您将标头类的位置属性设置为相对像这样

    `.header{ position: relative; }`

*   然后您将以下属性添加到徽标类

    `.logo{ position:absolute; top:40px; left:40px }`

你去吧。您将图像放置在完全相同的位置。第一种方法和第二种方法之间的肉眼定位不会有任何明显差异。但是如果你检查 image element ，你会发现它并没有占用任何额外的空间。它占据的面积与它自己的宽度和高度完全相同。

那么这怎么可能呢？我对图像徽标类说，您将*相*对于标题类放置，因为您是该类的子类，并且我特别提到它的位置为*relative*。这样它的任何孩子都将相对于它的左上角放置。并且您的位置需要固定在此父元素内。所以给你*绝对的*. 而且你需要从顶部和左侧移动一点到我希望你成为的位置。因此，您将获得以 40px 作为值的 top 和 left 属性。这样，您将仅相对于您的父母被放置。因此，如果明天我将您的父级向上或向下移动或只是在任何地方，您将始终位于父标题左上角的顶部和左侧 40 像素。因此，无论您父母的职位将来是否固定（因为它不像您那样绝对），您的职位在您的父母内部都是固定的。

因此，分别对父级和子级使用相对和绝对。其次，当您只想将子元素放置在其父元素内的某个位置时，请使用它。不要使用边缘等填充物强行推动它。给父相对值和要移动的子绝对值。为子类指定 top、left bottom 或 right 属性，以将其放置在父类中您想要的任何位置。

谢谢。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-08-07T00:52:36.153

Absolute 将使您的元素脱离流布局，并将定位到最近的相对父级（默认情况下，所有父级都是静态的）。这就是您在大多数情况下同时使用绝对和相对的方式。

您也可以单独使用 relative，但这种情况非常罕见。

我制作了一个视频来解释这一点。

[https://www.youtube.com/watch?v=nGN5CohGVTI](https://www.youtube.com/watch?v=nGN5CohGVTI)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-01-22T19:12:01.683

*   静态：默认/无效果
*   相对：从位于 html 布局中的正常位置开始生效。
*   Absolute：对父 Div/Box 有效。

**下面的图片会给你一个清晰的想法**

[![在此处输入图像描述](../Images/12108be1dc302971ae22c6585b4ba79d.png)](https://i.stack.imgur.com/eeSxo.png)

# python - 在 Python 中弹出列表的前面是否需要移位？

> ID：10426500
> 
> 赞同：4
> 
> 时间：2012-05-03T06:52:14.173
> 
> 标签：python, list

python数据结构页面[http://docs.python.org/tutorial/datastructures.html](http://docs.python.org/tutorial/datastructures.html)说

*也可以将列表用作队列，其中添加的第一个元素是检索到的第一个元素（“先进先出”）；但是，列表对此目的无效。虽然从列表末尾追加和弹出很快，但从列表**开头插入****或弹出**很慢（因为所有其他元素都必须移动一个）。*

 **我可以理解为什么在列表前面进行插入会效率低下。但是为什么它说弹出列表的开头/开头很慢？在 list -head 上执行 pop 操作时不需要移位，对吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-03T06:55:33.493

> 在 list -head 上执行 pop 操作时不需要移位，对吗？

将列表视为引用数组，其中列表的第一个元素*始终*位于数组位置为零。当您弹出列表的第一个元素时，您必须将所有引用向左移动一个位置。

可以想象另一种实现，其中弹出列表的前面会很便宜（例如[deque](http://en.wikipedia.org/wiki/Double-ended_queue)样式）。我认为我们可以相信这个 Python 文档，并假设这*不是*内置`list`类的实现方式。

如果您需要从容器前部有效移除，请使用[`collections.deque`](http://docs.python.org/library/collections.html#collections.deque)：

> 双端队列支持从双端队列的任一侧进行线程安全、内存高效的追加和弹出操作，在任一方向上的 O(1) 性能大致相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T06:54:51.923

删除第一个元素通常涉及移动所有其他元素，以便前`[1]`一个元素在`[0]`删除之后。当然，基于 C 的实现可能只是更改了一个指针，因此数组从第二个元素而不是第一个元素开始，但是它必须跟踪列表开头仍有多少元素可用。**

# mysql - 如何在 Ubuntu 中解决 XAMPP 1.7.7 - PHPMyAdmin - MySQL 错误 #2002

> ID：10426501
> 
> 赞同：22
> 
> 时间：2012-05-03T06:52:20.053
> 
> 标签：mysql, ubuntu, phpmyadmin, xampp, mysql-error-2002

我已经浏览了很多论坛并查看了有关类似主题的各种帖子，但似乎对我来说没有效果。

我在我的 Ubuntu 11.10 操作系统上新安装了 XAMPP 1.7.7。一切都在运行，除了 phpMyAdmin。

点击：[http://localhost/phpmyadmin](http://localhost/phpmyadmin)，我收到以下错误：

> MySQL 说：
> 
> ```
> #2002 - The server is not responding 
> (or the local MySQL server's socket is not correctly configured) 
> 
> Connection for controluser as defined in your configuration failed. 
> ```

当我使用以下命令启动服务时： **sudo /opt/lampp/lampp start**
我得到以下信息：

> XAMPP：另一个 Web 服务器守护程序已经在运行。
> XAMPP：另一个 MySQL 守护进程已经在运行。
> XAMPP：另一个 FTP 守护程序已经在运行。
> XAMPP for Linux 已启动。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-05-04T06:38:36.563

事实证明，解决方案是停止所有相关服务并解决“Another daemon is already running”的问题。

我用来解决这个问题的命令如下：

```
sudo /opt/lampp/lampp stop              
sudo /etc/init.d/apache2 stop    
sudo /etc/init.d/mysql stop 
```

或者，您也可以键入：

```
sudo service apache2 stop
sudo service mysql stop 
```

之后，我们再次启动lampp服务：

```
sudo /opt/lampp/lampp start 
```

现在，打开时一定没有问题：

```
http://localhost                  
http://localhost/phpmyadmin 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-17T01:57:47.110

1.  打开phpmyadmin/libraries/ 下的**config.default.php文件**
2.  查找 $cfg['Servers'][$i]['host'] = ' **localhost** '; 更改为 $cfg['Servers'][$i]['host'] = ' **127.0.0.1** ';
3.  刷新你的 phpmyadmin 页面，登录

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-17T14:32:04.203

在这些说明中的每一点，检查问题是否已解决。如果是这样，太好了！否则，继续。

1.  获取服务。（我能够右键单击 Apache 启动图标到达那里。）
2.  向下滚动到 MySQL。点击开始。这将消除#2002 错误。现在你会有一个新的错误：

> #1045 - 用户 'root'@'localhost' 的访问被拒绝（使用密码：否）

1.  编辑`C:\wamp\apps\phpmyadmin3.5.1\config.inc.php`文件，`$cfg['Servers'][$i]['extension'] = 'mysqli';`改为改为`= 'mysql'`
2.  再次打开服务并停止 MySQL
3.  在服务中，启动 wampmysqld

我知道这很复杂，但这对我有用。有些帖子可能会说您需要在配置文件中输入密码，但您不需要。我的还是“”

希望这可以帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-05T11:09:18.907

问题可能出在系统启动时运行的服务 mysql-server 和 apache2 上。您可以执行以下操作。

```
sudo /opt/lampp/lampp stop 
```

停止已经运行的默认服务

```
sudo service apache2 stop
sudo service mysql  stop 
```

完全删除服务，以便它们不会在下次系统重启时产生问题，如果您在 ubuntu(debian)

```
sudo apt-get remove apache2
sudo apt-get remove mysql-server 
```

如果您在 redhat 或其他，您可以使用`yum`或类似的命令来卸载服务

然后再次启动lampp

```
sudo /opt/lampp/lampp start 
```

另外，不要在系统中安装mysql-server，因为它可能会在系统启动时启动，占用端口，给lampp的mysql造成问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-11-17T17:59:07.557

我停止了 MySQL `sudo service mysql stop` ，然后启动了 xammp `sudo /opt/lampp/lampp start` ，它成功了！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-17T07:49:37.763

去`phpMyAdmin/config.inc.php`编辑行

```
$cfg['Servers'][$i]['password'] = ''; 
```

到

```
$cfg['Servers'][$i]['password'] = 'yourpassword'; 
```

这个问题可能是由于设置了 root 密码，因此 phpmyadmin 无法连接到 mysql 数据库。

最后一件事改变了

```
$cfg['Servers'][$i]['extension'] = 'mysql'; 
```

到

```
$cfg['Servers'][$i]['extension'] = 'mysqli'; 
```

现在重新启动您的服务器。看看。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-05-12T12:49:40.447

通过键入以下内容使用终端转到 config.inc.php 文件：

```
sudo gedit /opt/lampp/phpmyadmin/config.inc.php 
```

该文件将在 gedit 中打开。

现在打开文件并编辑

```
$cfg['Servers'][$i]['auth_type'] = 'localhost'; 
```

到

```
$cfg['Servers'][$i]['auth_type'] = 'cookie'; 
```

并将用户名保留为：`root`密码：

 `还要确保没有注释带有用户名和密码的行：

```
//$cfg['Servers'][$i]['user'] = 'root'; //$cfg['Servers'][$i]['password'] = ''; 
```

确保`//`已从上述行中删除。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-03T07:00:57.813

请检查您的 xampp mysql 安装中的 mysql.ini 文件...它在 xampp/mysql/bin 目录中找到

检查第 43 行

```
> log_error="mysql_error.log"
> #bind-address="127.0.0.1" 
```

如果第 43 行仍有评论，请取消评论

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-03-23T17:40:15.927

虽然我使用的是 Mac OS 10.9，但这个解决方案可能也适用于其他人，也许在 Ubuntu 上。

在 XAMPP 控制台中，我只发现 phpMyAdmin 在重新启动包括 Apache Web 服务器在内的所有内容后又开始工作了。

没问题，现在。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-09-05T07:01:54.663

您可以通过命令提示符连接 MySQL 来检查它。

我认为您的 MySQL 数据库被防火墙阻止了。一旦停止您计算机上的所有防病毒软件服务，然后尝试连接。

我也遇到了这个问题，并通过阻止所有防火墙来纠正..

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2013-05-17T16:48:45.090

转到本地驱动器c中的xampp文件夹，单击mysql文件夹，然后单击bin，最后单击“mysqladmin”应用程序。然后返回并刷新浏览器，问题就解决了。`

# javascript - how to call c# code from javascript in phonegap windows phone

> ID：10426503
> 
> 赞同：3
> 
> 时间：2012-05-03T06:52:21.893
> 
> 标签：javascript, windows-phone-7, cordova

Hi Iam windows phone fresher.Can anyone tell me how to call C# methods in javascript in Phonegap(windows mobile).Thank you.

Iam getting the following error.

error: "Unable to locate command :: MyCommand".

This is my code Behind file

```
using System;
using System.Collections.Generic;
using System.Linq; using System.Net;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using Microsoft.Phone.Controls;
using System.IO;
using System.Windows.Media.Imaging;
using System.Windows.Resources;
using WP7CordovaClassLib.Cordova.Commands;
namespace CSharpToJS
{
public partial class MainPage : PhoneApplicationPage
{
    // Constructor
    public MainPage()
    {
        InitializeComponent();
    }

    private void GapBrowser_Loaded(object sender, RoutedEventArgs e)
    {

    }

}
namespace WP7GapClassLib.PhoneGap.Commands
{
    public class MyCommand : BaseCommand
    {
        public void DoThis(string args)
        {
            // TODO: 
        }
    }
}
} 
```

Here is my Index.html file:

```
<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, height=device-height, initial-    scale=1.0, maximum-scale=1.0, user-scalable=no;" />
<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<title>Cordova WP7</title>
<link rel="stylesheet" href="master.css" type="text/css" media="screen" title="no title" charset="utf-8" />
<script type="text/javascript" charset="utf-8" src="cordova-1.5.0.js"></script>
<script type="text/javascript">
    document.addEventListener("deviceready", onDeviceReady, false);
    // once the device ready event fires, you can safely do your thing! -jm
    function onDeviceReady() {
        document.getElementById("welcomeMsg").innerHTML += "Cordova is ready! version=" + window.device.cordova;
        console.log("onDeviceReady. You should see this message in Visual Studio's output window.");
        var args = { "message": "whatever" };
        Cordova.exec(null, null, "MyCommand", "DoThis", args);
    }
  </script>
 </head>
  <body>
 <h1>
    Hello Cordova</h1>
<div id="welcomeMsg">
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T07:09:55.727

您应该能够使用[插件架构](http://www.risingj.com/archives/tag/plugins)和`PhoneGap.exec()`方法来完成此操作。

在 C# 中创建一个继承自 BaseCommand 的类（您还必须使用这个特定的命名空间）：

```
namespace WP7GapClassLib.PhoneGap.Commands
{
    public class MyCommand : BaseCommand
    {
      public void DoThis(string args)
      {
        // TODO: 
      }
    }
} 
```

从 Javascript 调用此方法：

```
var args = {"message":"whatever"};    
PhoneGap.exec(null, null, "MyCommand", "DoThis", args); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T07:13:22.767

您可以将 Notify 方法与 ScriptNotify 事件处理程序结合使用，如以下博客文章中所述：-

[http://blogs.msdn.com/b/glengordon/archive/2011/11/21/phonegap-on-wp7-tip-2-script-interaction.aspx](http://blogs.msdn.com/b/glengordon/archive/2011/11/21/phonegap-on-wp7-tip-2-script-interaction.aspx)

# python - Apply regex on Solr query?

> ID：10426506
> 
> 赞同：0
> 
> 时间：2012-05-03T06:52:29.270
> 
> 标签：python, regex, solr

I have got indexes created on tables having data of the form: indexname='text'---->Today is a great day for running in the park. Now i want to perform a search on the indexes where only 'day' or 'run' is appearing in the text.

I have implemented query like : q = 'text:(day or run*)' But this query is not returning me any results from indexes.Is this correct way?or how can i improve my query by applying regex ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T07:15:11.317

您的用例非常基本，并且根本不需要 Solr 的正则表达式。看起来您可能只是有语法问题。q=text:day OR text:run 应该完全符合您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T15:35:08.230

正则表达式和通配符在搜索引擎中速度很慢。通过以语言敏感的方式预处理术语，您将获得更好的性能。

您可以使用词干分析器将“run”与“running”匹配，这是一个分析步骤，可将单词的不同形式简化为共同词干。当查询和索引词都被提取时，它们将匹配。

您还应该查看扩展 Dismax (edismax) 搜索处理程序。这将完成一些将“day run”转变为搜索单个单词和短语的工作，例如“day OR run OR “day run””。然后，它可以进一步针对具有不同权重的多个字段进行扩展，所有这些都是自动的。

# windows-phone-7 - WP7 Search on text box textchanged event

> ID：10426513
> 
> 赞同：1
> 
> 时间：2012-05-03T06:53:32.200
> 
> 标签：windows-phone-7

I have a requirement in my wp7 application that I have to do partial match searching (multiple fields say firstname and lastname) on a list collection (say contact list) on every keypress on search text box and bind to listbox. I have written linq query to get the result on texchanged event. I am getting the result as expected, however it is not quick in response if I have more than 500 items in the collection.

I have posted the code below, I really appreciate if someone can help me out in tunning the performance issue.

```
private void TechChanged(object sender, TextChangedEventArgs e)
{
    IList<Contacts> results = searchcontList
            .Where(tb => tb.SearchText.Contains(textsearch.Text))
            .ToList();

    //"SearchText" is an attribute in contacts class which is concatination values of all the fields in contacts class
    listcontact.ItemsSource = results;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T07:46:40.260

您很可能无法提高搜索性能（即查找匹配项并将其呈现到 UI 所花费的时间） - 因此您将需要考虑更改应用程序的工作方式以使其实现感觉反应更灵敏。

您真的需要对输入的*每个*`TextBox`字符执行搜索吗？

您的问题的一个常见解决方案是一个称为“节流”的概念，您仅在用户在其文本输入中暂停一段时间时才执行搜索。您可以使用 Reactive Extensions 轻松完成此操作，如下所示：

```
Observable.FromEvent<TextChangedEventArgs>(searchTextBox, "TextChanged")
          .Select(e => ((TextBox)e.Sender).Text)            
          .Where(text => text.Length > 2)
          .Throttle(TimeSpan.FromMilliseconds(400))         
          .Subscribe(txt => // do your search here!); 
```

上面的代码确保在您开始搜索之前有两个以上的字符，并限制以确保每 400 毫秒只执行一次搜索。有关详细信息，请参阅我写的 codeproject 文章：

[通过 Twitter 和 Bing 地图混搭探索反应式扩展 (Rx)](http://www.codeproject.com/Articles/132966/Exploring-Reactive-Extensions-Rx-through-Twitter-a#handling)

# mysql - MySQL, GROUP_CONCAT & GROUP BY

> ID：10426516
> 
> 赞同：0
> 
> 时间：2012-05-03T06:53:46.000
> 
> 标签：mysql, group-by, group-concat

Here's my working query:

```
SELECT 
d.*, g.name game, 
 (SELECT GROUP_CONCAT(p.name) FROM shows_players p 
  LEFT JOIN (SELECT * FROM shows_map) sm ON sm.player_id = p.id 
  WHERE sm.show_id = d.id AND sm.game_id = g.id) players 
FROM shows_dates d 
LEFT JOIN (SELECT * FROM shows_map 
           WHERE player_id = 5 GROUP BY show_id, game_id) m ON d.id = m.show_id 
LEFT JOIN shows_games g ON g.id = m.game_id 
```

It's a fine query until adding the "WHERE player_id =" line. Then it returns some rows with no data. How do I clean this up and get rid of these?

Thank you

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T07:03:35.620

一个简单的解决方案可能是更改`LEFT JOIN (SELECT * FROM shows_map`为`INNER JOIN (SELECT * FROM shows_map`.

我想你会得到一些空的 NULL 数据，因为你使用的是 LEFT JOIN。

而且您的查询非常混乱。

# ios5 - 故事板执行Segue

> ID：10426519
> 
> 赞同：0
> 
> 时间：2012-05-03T06:53:54.570
> 
> 标签：ios5, storyboard, uistoryboardsegue

必须有一个非常简单的解决方案，但它一直在绞尽脑汁！

如果 Facebook 会话无效，我有一个应用程序会在应用程序启动时显示“登录”屏幕，如果 Facebook 会话有效，它会继续显示主屏幕。所有这些都在我的 AppDelegate.m 中定义

当应用程序启动时，它工作得很好。如果 Facebook 登录或未登录，它会选择正确的 viewController。

我的问题是在 Facebook 未登录时显示的登录屏幕。它是一个 UIViewController 并有一个 UIButton 登录用户，当用户登录时，它应该对主视图执行 segue，这是一个 UITableViewController带有嵌入式 NavigationController。

我试过使用：

```
[self performSegueWithIdentifier:@"fbLoginYes" sender:self]; 
```

但它从不继续，即使直接从按钮触发。

触发这样的segue有什么问题吗？即 ViewController 到 TableViewController？

任何帮助，将不胜感激！

这是我的故事板的图像： ![在此处输入图像描述](../Images/624a638e6d1433b38dec3dfd0adddad7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T14:28:08.013

它是什么类型的segue？是推吗？你真的在 UITableViewController 中嵌入了 UINavigationController 吗？或者是周围的其他方式？

我要检查的第一件事是故事板中 Segue 的名称。此外，在启动 segue 的视图控制器中，您可以捕获名为`-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender`. 尝试在其中放置一个断点，看看它是否被调用。如果是，则问题可能出在实际的 segue 中，如果不是，则仅表示您没有正确调用 segue。

# actionscript-3 - AS3 video event: How to trigger something when the video first plays

> ID：10426524
> 
> 赞同：0
> 
> 时间：2012-05-03T06:54:14.173
> 
> 标签：actionscript-3, flash

I'm using the flash's video player to play a clip, autoplay is set to false. I need to trigger mc1 playing when the play button is first clicked, and trigger mc2 when the video completes.

Now I know how to do the complete trigger with:

```
videoPlayer.addEventListener(VideoEvent.COMPLETE, vidCompleteHandler); 
```

But I have no idea what video event I need for when the video first plays, because I don't want mc1 to be triggered everytime the play button is clicked (i.e. if people click pause then play again, i don't want mc1 to be triggered again).

Can someone help me with this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T15:39:20.803

您首先需要将 NetStream 对象附加到您的视频对象，然后监听特定的开始事件。它是这样的：

```
// create a new net connection, add event listener and connect
// to null because we don't have a media server
ncConnection = new NetConnection();
ncConnection.addEventListener(NetStatusEvent.NET_STATUS, netStatusHandler);
ncConnection.connect(null);

// create a new netstream with the net connection, add event
// listener, set client to this for handling meta data and
// set the buffer time to the value from the constant
nsStream = new NetStream(ncConnection);
nsStream.addEventListener(NetStatusEvent.NET_STATUS, netStatusHandler);
nsStream.client = this;
nsStream.bufferTime = BUFFER_TIME;

// attach net stream to video object on the stage
vidDisplay.attachNetStream(nsStream);

function netStatusHandler(event:NetStatusEvent):void {
switch (event.info.code) {
    case "NetStream.Play.Start":
        yourStartFunction();
    break;
} 
```

}

# windows - 重命名 DOS 命令

> ID：10426527
> 
> 赞同：0
> 
> 时间：2012-05-03T06:54:29.037
> 
> 标签：windows, command-line

我想将文件重命名`1_2_result.bak`为`1.txt`. 我尝试使用 command `rename *_result.bak *.txt`，但只有 .bat 到 .txt 才能完成。谁能建议如何更改文件名？甚至 ren ?_result.txt ?.c 也不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T07:13:56.550

试试这个

```
ren ?_result.bak ?.txt 
```

`?`匹配单个字符。用于`??`两位数文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T10:50:23.980

我不知道它是否适合您，但是不同的 shell（cmd.exe 的替代品），**4NT**现在可以免费使用，iirc 它还支持在重命名时使用 * 通配符进行重命名。

好像4NT已经改名为[TCLE了](http://jpsoft.com/tccle-cmd-replacement.html "TCLE")

# xml - how can YQL output a XML in my python script?

> ID：10426528
> 
> 赞同：1
> 
> 时间：2012-05-03T06:54:37.963
> 
> 标签：xml, yql

I know the console can output a XML or a JSON format output by using YQL.

But When I want to save the output file, I do it in my python script by using follow codes:

```
import yql
query = 'blablabla'
y = yql.Public()
result = y.execute(query) 
```

and the result is a dict but I want to save it in a file with the XML format. How can I make it?

thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-09T19:00:35.270

它在[TODO 列表中](https://github.com/project-fondue/python-yql/blob/master/TODO)。

你可以分叉代码。结果格式在以下类中定义：

*   [YQL 对象](https://github.com/project-fondue/python-yql/blob/master/yql/__init__.py#L276)

并作为返回值引用：

*   [执行方法](https://github.com/project-fondue/python-yql/blob/master/yql/__init__.py#L297)

# c++ - Visual C++ Express Edition

> ID：10426530
> 
> 赞同：1
> 
> 时间：2012-05-03T06:54:40.557
> 
> 标签：c++, c, windows, visual-c++

I am using Visual C++ Express Edition. And I have the following queries in it..

1) Can I distribute the executable that I got from VC++ express edition for commercial purpose? 2) How to get a common executable for 32 bit and 64 bit architecture using Visual C++ express edition?

And my another doubt is.. Using "Mingw" how to generate a common executable for 32 bit and 64 bit architecture.

thanks.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T07:05:24.650

1.  是的，使用 Visual Studio Express Edition 构建的应用程序没有许可限制。

2.  只需构建一个 32 位可执行文件。它将在 64 位 Windows 上正常工作，因为它将在 WOW64 子系统下运行。这同样适用于其他 Windows C++ 编译器，例如 MinGW。

    如果您真的想编译一个单独的 64 位应用程序，您将需要下载并安装[最新版本的 Windows SDK](http://www.microsoft.com/en-us/download/details.aspx?id=8279)。它包括 64 位工具，包括 64 位编译器。这些工具不包含在 Visual C++ Express 中。

# drupal-7 - 在 Drupal 中清除缓存时出现白屏死机

> ID：10426533
> 
> 赞同：0
> 
> 时间：2012-05-03T06:54:43.757
> 
> 标签：drupal-7, wsod, drupal-cache

我在尝试清除 Drupal 7 安装中的缓存时出现白屏死机。在我的本地机器上，它没有给我带来任何问题。当我将它部署到服务器时，问题就开始了。我尝试使用
`error_reporting(E_ALL); ini_set('display_errors', TRUE); ini_set('display_startup_errors', TRUE);`
index.php 中的代码显示错误。它显示内存不足错误。我试图增加 php.ini 文件中的内存限制，但它没有用..

任何人都知道为什么在清除缓存时这会死？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-15T09:26:59.480

在您的应用程序主题中添加以下行

```
 <item name="android:windowDisablePreview">true</item> 
```

如果它不适合你，那么你可以使用

```
 <item name="android:windowIsTranslucent">true</item> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T15:12:30.643

你用什么方法清除缓存？

当`drush cache-clear`和 devel/cache/clear 都为我炸毁时，性能页面上的“清除所有缓存”方法 - admin/config/development/performance - 工作得很好。你的旅费可能会改变！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T05:47:44.700

最后，通过 settings.php 中的一行代码解决了问题。我`ini_set('memory_limit', '32M');`在 settings.php 文件中添加了，现在正在清除缓存。:)

作为参考，你可以看看[Drupal WSOD](http://www.ubercart.org/faq/2246.)

# java - java - 如何在java fx 2.0中通过缩小窗口来阻止gridpane项目缩小

> ID：10426534
> 
> 赞同：0
> 
> 时间：2012-05-03T06:54:43.923
> 
> 标签：java, javafx-2, gridpanel

您好，我有那个网格窗格，并且有标签和文本框，它们随着窗口的缩小而缩小，但表格视图没有缩小。就像他们像平常一样隐藏而不是缩小。有什么方法可以阻止它吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T09:11:36.520

设置 minWidth 属性有效:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T07:31:18.490

在不了解您的 UI 的情况下，我只能给出一个笼统的答案：

要影响 JavaFX 中组件的收缩/增长行为，您必须将JavaFX 附带[的各种简单窗格相互堆叠，或者使用更强大的窗格，例如](http://docs.oracle.com/javafx/2/layout/builtin_layouts.htm#CHDGHCDG)[MiG Layout for FX 2](http://www.miglayout.com/)。

# objective-c - 优化性能 核心图形iOS？

> ID：10426542
> 
> 赞同：1
> 
> 时间：2012-05-03T06:55:13.487
> 
> 标签：objective-c, ios5

我意识到使用cornerRadius 或阴影或其他Core Graphics 属性的性能会降低应用程序的性能（就像向下滚动UITableView 时，它很慢）。有没有办法在使用它时提高速度和性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T23:24:03.340

我使用仪器进行了一些分析，在我看来，CALayer 的cornerRadius 属性显然存在性能问题。

我有一个包含多个标签、图像和按钮的复杂 TableViewCell 子类的 tableView。

当没有设置cornerRadius时，滚动时我得到大约56fps，但如果我设置图像的角半径，每秒帧数会下降到大约33。

我发现[这篇文章](https://stackoverflow.com/questions/2171506/add-rounded-corners-to-uiimageview)非常有用：有一个答案建议为图层创建蒙版而不是设置cornerRadius。根据我的测试，性能要好得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T07:05:59.493

Tipsy，通过使用cornerRadius或maskToBound属性或quartzCore框架的任何其他实例/类方法没有这样的性能问题。尝试运行仪器以找到它的确切原因。我确信这不是因为任何其他 Core Graphics 属性。

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T07:09:11.950

这是一个相当模糊的问题。在图层上设置阴影有一个众所周知的性能问题，这主要可以通过设置阴影路径来解决。我不知道拐角半径会导致任何问题。

# javascript - when active menu is highlighted, links are not working

> ID：10426544
> 
> 赞同：0
> 
> 时间：2012-05-03T06:55:24.623
> 
> 标签：javascript, ruby-on-rails-3

I searched through many links but could not find a suitable solution, i want to highlight the selected list in my web page. my code for list is:

```
%div#navg
  %ul.clearfix
    %li
      %a#c-realtime.overview-16{:href => "#", :title => "Summary"} Summary
    %li.menu-trigger
      %a#c-comment.events-24{:href => events_url, :title => "Events"} Events
    %li.menu-trigger
      %a#c-realtime.create-24{:href => new_event_path, :title => "Create new event"} Create new event 
    %li.menu-trigger
      %a#c-realtime.realtime-16{:href => "#", :title => "Analytics"} Analytics
    %li.menu-trigger
      %a#c-realtime.recommend-24{:href => recomendations_url, :title => "Recommendations"} Recommendations 
```

and code for java script is:

```
:javascript
$( document ).ready( function() {
    $( "#navg ul li a" ).click( function() {
        $( this ).parent( "li" )
            .addClass( "selected" )
            .siblings( ".selected" )
                .removeClass( "selected" );
        return false;
    });
}); 
```

and in css i am using this:

```
li.selected { background-color: #404649; 
```

my problem is i am able to highlight the selected menu in my page but the respective links are not working, when i remove the line

> **return false;**

from my JS code my links are working but now it is not highlighting the link, I am not able to figure out the problem please suggest me how to solve my problem. Thank u

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:03:34.963

那这个呢？

```
$( document ).ready( function() {
    $( "#navg ul li a" ).click( function(e) {
        e.preventDefault();  //  prevent following the link on the first click
        $( this ).parent( "li" )
            .addClass( "selected" )
            .siblings( ".selected" )
                .removeClass( "selected" );
        window.location.href = $( this ).attr('href');  // manually follow the link
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T07:10:01.387

using`return false;`取消事件生成的默认行为。此外，javascript 会更新加载页面上的内容。它不会影响新页面上的行为。

这就是为什么当你使用`return false;`你的链接不起作用的原因。当你删除`return false;`你的链接时不要装饰

相反，请尝试在链接页面的 javascript 中应用这些类。

# android - Android 在电话簿更新时通知（内容观察者）

> ID：10426555
> 
> 赞同：13
> 
> 时间：2012-05-03T06:56:08.117
> 
> 标签：android, contacts, contentobserver

如果联系人数据库中有任何更改（添加，删除），我想在手机上收到通知。现在我正在使用 ContentObserver 来获取通知。以下是我的代码。问题是我无法知道哪个联系人改变了。有人可以帮忙吗？？？

```
public class ContentObserverActivity extends Activity {
    Button registerbutton;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        registerbutton=(Button)findViewById(R.id.button1);
        registerbutton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
            getContentResolver()
                .registerContentObserver(
                        ContactsContract.Contacts.CONTENT_URI, true,
                        new MyCOntentObserver());   
            }
        });
    }

    public class MyCOntentObserver extends ContentObserver{
        public MyCOntentObserver() {
            super(null);
        }
        @Override
        public void onChange(boolean selfChange) {
        super.onChange(selfChange);
            Log.e("","~~~~~~"+selfChange);
        }  

        @Override
        public boolean deliverSelfNotifications() {
            return true;
        }
    }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T08:56:48.153

观察者不提供添加/更新/删除哪个联系人的信息。要了解这一点，请将联系人保存在您自己的数据库表中，并在观察者发送更改通知时使用系统的联系人检查它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-08-11T04:58:34.477

我已将 onChange 代码更改为此。

```
@Override
public void onChange (boolean selfChange)
{
    this.onChange(selfChange, null);
}

@Override
public void onChange (boolean selfChange,Uri uri)
{
  Cursor cursor = mCntxt.getContentResolver().query(
            ContactsContract.Contacts.CONTENT_URI, null, null, null,ContactsContract.Contacts.CONTACT_LAST_UPDATED_TIMESTAMP + " Desc");
    if (cursor.moveToNext()) {
        String id = cursor.getString(
                cursor.getColumnIndex(ContactsContract.Contacts._ID));
        String name = cursor.getString(
                cursor.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
        Log.w("Contact ID", id);
        Log.w("Person Name",name);
       }
} 
```

希望这可以帮助..

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-02-26T23:13:37.557

我认为可以使用广播管理器/接收器 [http://www.intertech.com/Blog/using-localbroadcastmanager-in-service-to-activity-communications/](http://www.intertech.com/Blog/using-localbroadcastmanager-in-service-to-activity-communications/)

# firefox-addon - 如何使用 contentscript in 访问附加到网页的变量 - contentscript using Add-on builder

> ID：10426556
> 
> 赞同：1
> 
> 时间：2012-05-03T06:56:14.730
> 
> 标签：firefox-addon, firefox-addon-sdk, content-script

我使用附加组件构建器创建了一个附加组件。`pageMod`我在in 中附加了一个内容脚本`main.js`

我的内容脚本计算使用创建的动态标签的数量`document.createElement()`。这是通过创建一个到 document.createElement() 的钩子并通过创建脚本标签将此函数添加到网页来完成的。我的代码如下。

**内容脚本文件：**

```
addJS_Node ("var count=0;");
function LogDocCreateElement ()
{
    var oldDocumentCreateElement = document.createElement;   
    document.createElement = function(tagName)
    {
       var elem = oldDocumentCreateElement.apply (document, arguments);     
       console.log("Dynamically created a(n)", tagName);
       count++;     
       return elem;
    } 
}
addJS_Node (null, null, LogDocCreateElement);
function addJS_Node (text, s_URL, funcToRun) {
     var D                                   = document;
     var scriptNode                          = D.createElement ('script');
     scriptNode.type                         = "text/javascript";
     if (text)       scriptNode.textContent  = text;
     if (s_URL)      scriptNode.src          = s_URL;
     if (funcToRun)  scriptNode.textContent  = '(' + funcToRun.toString() + ')()';
     var targ = D.getElementsByTagName ('head')[0] || D.body || D.documentElement;
     targ.appendChild (scriptNode);    
}
window.addEventListener("load", function() {alert(count) }, false); 
```

现在我得到了未捕获的异常：`ReferenceError: count is not defined`.

我怎样才能访问这个`count`变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T07:14:38.173

请参阅有关内容脚本如何访问网页[的文档](https://addons.mozilla.org/en-US/developers/docs/sdk/1.6/dev-guide/guides/content-scripts/access.html)- 他们看不到网页添加到 DOM 的任何自定义属性和方法。在您的情况下，您需要通过对象访问`count`变量：`unsafeWindow`

```
unsafeWindow.count++; 
```

但是，正如文档所述，`unsafeWindow`如果可能，您应该避免使用。这里明显的做法是完全避免`count`在页面中创建变量。所以代替这个：

```
addJS_Node ("var count=0;"); 
```

您只需声明变量：

```
var count = 0; 
```

但是您需要替换`unsafeWindow.document.createElement`而不是`document.createElement`为了使此更改对网页可见。在这里避免`unsafeWindow`会更复杂，也许你可以使用[突变事件](https://developer.mozilla.org/en/DOM/Mutation_events)来代替？

# maven-plugin - 缺少 Maven 插件码头

> ID：10426557
> 
> 赞同：15
> 
> 时间：2012-05-03T06:56:18.177
> 
> 标签：maven-plugin, maven-3

我无法遵循这个[http://hrycan.com/2012/03/28/primefaces-lazy-loading-datatable-for-jsf2/](http://hrycan.com/2012/03/28/primefaces-lazy-loading-datatable-for-jsf2/)

它说我应该跑

```
mvn jetty:run 
```

但我一直遇到这个错误。

```
org.apache.maven.plugin.prefix.NoPluginFoundForPrefixException: No plugin found
for prefix 'jetty' in the current project and in the plugin groups [org.apache.m
aven.plugins, org.codehaus.mojo] available from the repositories [local (C:\MyRepo), central (http://repo1.maven.org/maven2)]
        at org.apache.maven.plugin.prefix.internal.DefaultPluginPrefixResolver.r 
```

我在这里使用了 Maven 3。

有什么想法吗？

添加：

从链接中，它已经在 pom.xml

```
<plugin>
    <groupId>org.mortbay.jetty</groupId>
    <artifactId>jetty-maven-plugin</artifactId>
    <version>7.5.1.v20110908</version>
    <dependencies>
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>${mysql.version}</version>
        </dependency>
    </dependencies>
</plugin> 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-10-15T13:30:52.797

（[http://www.eclipse.org/jetty/documentation/current/jetty-maven-plugin.html](http://www.eclipse.org/jetty/documentation/current/jetty-maven-plugin.html)）上的说明说将版本设置为 ${project.version} 这是错误的！此外，旧文档的 groupId 设置为 org.codehaus.mojo，它应该设置为 org.eclipse.jetty。

我从码头回购（[http://repo.maven.apache.org/maven2/org/eclipse/jetty/jetty-maven-plugin/](http://repo.maven.apache.org/maven2/org/eclipse/jetty/jetty-maven-plugin/)）添加了一个真实版本并更改了groupId。

```
<plugin>
  <groupId>org.eclipse.jetty</groupId>
  <artifactId>jetty-maven-plugin</artifactId>
  <version>9.0.5.v20130815</version>
</plugin> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-03T07:01:04.577

您是否将插件添加到 pom.xml 中？一个快速的谷歌搜索发现这个：

```
<project>
  ...
  <build>
    ...
    <plugins>
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>jetty-maven-plugin</artifactId>
      </plugin>
    </plugins>
  </build>
</project> 
```

在这里找到：http: [//mojo.codehaus.org/jetty-maven-plugin/usage.html](http://mojo.codehaus.org/jetty-maven-plugin/usage.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-08-19T09:34:44.997

按照记录在 settings.xml 中添加以下内容后检查它是否有效。

```
<pluginGroups>
    <pluginGroup>org.mortbay.jetty</pluginGroup>
</pluginGroups> 
```

另请注意，该插件有两个不同版本 - 较旧的 maven-jetty-plugin 和较新的 jetty-maven-plugin。
[[来源](https://stackoverflow.com/a/7416789/1429387)]

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-04-10T13:56:26.937

确保从项目目录中执行命令“mvn jetty:run”。如果您将列出当前目录，您应该会看到 pom.xml。

如果你不在你的项目中并且运行'mvn jetty:run'，将会得到错误“Missing Maven Plugin Jetty”

```
 <plugin>
            <groupId>org.mortbay.jetty</groupId>
            <artifactId>jetty-maven-plugin</artifactId>
            <version>8.1.12.v20130726</version>
            <configuration>
                <stopKey>todostop</stopKey>
                <stopPort>9999</stopPort>
            </configuration>
        </plugin> 
```

希望它会有所帮助

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-11T15:10:50.790

我也有这个问题。我`jetty:run`从 Eclipse 中开始使用“Maven Build”运行配置。

问题是，在我的 Maven Build 运行配置中，“基本目录”（即 mvn 可执行文件使用的工作目录）设置不正确。将基本目录设置为包含已`pom.xml`修复问题的目录。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-24T15:30:12.963

很可能你的版本是错误的。尝试

```
 <plugins>
        <plugin>
          <groupId>org.eclipse.jetty</groupId>
          <artifactId>jetty-maven-plugin</artifactId>
          <version>9.2.6.v20141205</version>
        </plugin>
    </plugins> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-04T13:47:12.280

除了插件部分，您应该在 pom.xml 目录中以启动 jetty 命令。

# enterprise-architect - Enterprise Architect 中的序列图缺少消息

> ID：10426558
> 
> 赞同：0
> 
> 时间：2012-05-03T06:56:19.143
> 
> 标签：enterprise-architect

我们在 Enterprise Architect (EA) 中创建了许多序列图，并且之前在 EA 上正确显示。最近，不知道为什么，但是所有的序列图都损坏了，并且似乎缺少消息连接器。

我还向企业架构师支持团队发送了有关此问题的邮件，他们说-

> 请参阅 EA 帮助中的“序列图和版本控制”主题。请确认您的序列图已按照描述进行建模。

观察-

1.  我已经检查了支持团队建议的主题，并且序列图按照用户指南中的方式正确建模，所有元素实例都在与图表相同的包中。
2.  我还检查了最近是否在 SVN 中进行了任何更改，但没有。
3.  可能有一些更改是由我的一些同事在数据库中直接签入的，但由于数据库没有历史表，因此跟踪它似乎是不可能的。

问题是现在没有序列图显示消息连接器。我将回信给支持团队，但如果有任何帮助/指针来解决它，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T05:25:00.763

恐怕我对此问题没有任何具体的解决方法或出路，只有一些一般性的指示。

我建议我的客户不要将数据库存储库与外部版本控制相结合。

原因是这些问题往往会突然出现，为了解决这些问题，每个团队成员都需要对工具的内部工作有相当高的洞察力。我不会详细介绍所有细节，但根本问题是跨越包控制边界的连接器存储在两个不同的版本控制文件中，存在明显的同步问题。

使用 EA 的内部基线而不是外部版本控制并不能完全解决同步问题，但它确实允许您直观地将当前模型与存储的基线进行比较，并且在某种程度上，在不恢复整个包的情况下撤消更改。您可以将基线与版本控制结合起来，但我没有现场尝试过，我不推荐它。

如果您决定开始使用基线，我强烈建议您在“需要用户锁定才能编辑”模式下打开用户安全。

与基线和版本控制分开的是审计，它允许您跟踪模型中的更改。我没有在现场环境中使用过它，它不会阻止人们破坏模型，但它确实可以帮助你确定谁在什么时候做了什么。

项目和团队 -- 变更管理 -- 跟踪变更下的帮助文件中描述了审计和基线；用户安全位于项目和团队——团队开发——配置用户安全下。

# sql - 优化 SQL 查询：调用函数还是进行联接？

> ID：10426563
> 
> 赞同：4
> 
> 时间：2012-05-03T06:56:46.587
> 
> 标签：sql, oracle, query-optimization

ORACLE 数据库中最快的是什么？

在 select 语句中调用函数以检索每一行的单个值

```
SELECT field1, field2, F_GET_LIBELLE_STATUT( field2 ) FROM table1 WHERE ... 
```

使用简单的功能：

```
create or replace
FUNCTION "F_GET_LIBELLE_STATUT" (v_statut NUMBER) RETURN VARCHAR2 IS
tmpVar VARCHAR2(40);
BEGIN
   select libelle into tmpVar from t_statut_ope where id_statut = v_statut;
   RETURN tmpVar;
   EXCEPTION
     WHEN NO_DATA_FOUND THEN
       RETURN '';
     WHEN OTHERS THEN
       -- Consider logging the error and then re-raise
       RAISE;
END f_get_libelle_statut; 
```

还是在选择语句中加入？

```
Select a.field1, a.field2, b.libelle
FROM table1 a LEFT JOIN t_statut_ope b ON b.id_statut = a.field2
WHERE ... 
```

如果我在选择和子句条件中调用很多函数（十个或更多），答案是否相同？

感谢您的回答。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-03T09:32:28.013

任何可以在 SQL 中完成的事情都应该在 SQL **(*)**中完成。

连接总是比调用该函数快，因为基于集合的操作总是比通过痛苦的行快。然后你有在 SQL 和 PL/SQL 之间移动的开销。加上处理那些 NO_DATA_FOUND 异常的开销，这些异常并不是真正的异常，因为间隙是预期和容忍的。最后，优化器将为纯 SQL 选项选择一个更好的计划，因为您已经为它提供了它需要的所有信息。

* * *

**（*）**我早在很久以前就回答了这个问题，我回答的重点是给出的例子，我支持这个答案。如果我们可以使用 SQL 对表（通过连接、视图、内联视图、子查询）获取我们需要的数据，那么我们应该这样做。但我想深入探讨一个根本问题：为什么 Oracle 支持在查询中使用函数？因为有时我们需要做一些我们在 SQL 中做不到的事情。

以下是调用执行 SQL 的函数（我主要考虑通过`table()`调用调用的函数）而不是使用连接（或其他 SQL 构造，如内联视图、WITH 子句）的用例：

1.  查询是动态的。动态 SQL 需要 PL/SQL，所以函数是你这里唯一的人。
2.  行生成。使用 PL/SQL 将输入拆分为多个字符串（例如 CSV 标记），或者生成数据，而不是从表中生成数据。偶尔仍然有效，但正则表达式支持和漂亮的 CONNECT BY LEVEL <= N 技巧已经将更常见的用法分箱了。
3.  数据被封装在一个 PL/SQL API 后面，所以我们只能调用一个函数。
4.  出于某种奇怪的原因，我们只能通过使用 PL/SQL 实现过滤器或查找来获得所需的性能。显然。老实说，我不记得我必须这样做并且它起作用的案例（尽管我有一些案例将流水线函数转换为子查询或内联视图提高了性能）。也许我过着隐蔽的生活。当然，我欢迎对反例进行基准引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T09:42:08.890

在极少数情况下，函数方法是最佳的，默认情况下我不会使用它。联接是数据库的设计目的，因此它们应该是您的首选。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T06:59:40.910

您使用这两个不同的查询发现了什么？

根据我的经验，连接比函数快 10 倍中的 9 倍。至少当您在函数中访问另一个查询/表/视图时。该函数需要在每次运行时进行评估，连接可能会生成更大的数据集，但可以执行得更好，因为它只需要连接表（在键上），这非常快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T14:48:14.883

或者忘记外连接并将执行翻译的选择语句放在选择列表中[这有时比外连接更快]：

```
SELECT field1, field2
, (select libelle from t_statut_ope b where b.id_statut = a.field2) libelle
FROM table1 a
WHERE 1=1
; 
```

# java - How to make JavaFX 2 wrapper discover an existing installation on Linux systems?

> ID：10426564
> 
> 赞同：3
> 
> 时间：2012-05-03T06:56:48.157
> 
> 标签：java, linux, cross-platform, javafx-2

Dealing with [JavaFX 2-generated JNLPs](https://stackoverflow.com/questions/10413136/how-to-make-jnlp-download-the-correct-version-of-javafx-2), I discovered that JavaFX comes with an Ant task that creates a JAR with an integrated launcher.

On Windows systems, the launcher automatically discovers an existing JavaFX installation on the `PATH` and uses it to satisfy the application's dependencies.

I couldn't get the same wrapped JAR to run on a linux systems. JavaFX's most current linux build is installed, and I have placed its `lib` directory on my `PATH`, yet all I see is an (AWT-based) message window telling me to install JavaFX.

Since I learned about the (as-yet-)lack of JNLP support for linux yesterday, my question is twofold: Can the wrapper pick up installations on linux, or is this feature not implemented yet? What preconditions do I have to meet so it discovers my installation?

There is a [similar question](https://stackoverflow.com/questions/9801463/building-javafx-2-0-app-on-mac-deploying-on-windows) dealing with a related issue on Mac OS.

# android - 测试运行失败，Robotium

> ID：10426573
> 
> 赞同：0
> 
> 时间：2012-05-03T06:58:17.633
> 
> 标签：android, out-of-memory, robotium, ui-testing

我对我的 Android 应用程序进行了测试，它运行没有问题。但是当我添加`clickOnView`一个按钮时，点击后它失败了，比如：

```
Test run failed: Instrumentation run failed due to 'java.lang.OutOfMemoryError' bitmap size exceeds VM budget 
```

你有什么想法为什么会发生这种情况？我应该创建另一个具有更大 SD 卡大小的 AVD 吗？在我使用的那个中，我有 128MB。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:30:57.447

这`OutOfMemoryError`与您创建的 AVM 或您设置的 SD 卡无关。

用于处理位图的内存量太大了。您可能使用尺寸太大和/或太多的位图。

您应该检查您如何在应用程序中处理位图和/或测试，看看您是否可以改进它们。

有用的阅读：[有效地显示位图](http://developer.android.com/training/displaying-bitmaps/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T19:37:06.543

请转到您的项目属性-> java build path hit on order 和 Export tab mark 1.yourProject/src 2.yourProject/gen hit on libraries 确保列表中的 acra 文件点击确定然后清理您的项目..并运行它。 .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T07:56:18.037

好吧，这就是解决方案，也许它会对某人有用。在我的 AVD 属性中，我将 Max VM 应用程序堆大小更改为 64（以前是 24），问题就消失了。

# r - 连续日期的计数频率

> ID：10426575
> 
> 赞同：3
> 
> 时间：2012-05-03T06:58:21.633
> 
> 标签：r

我有一个 data.frame 的形式：

```
Date
2011-08-16
2011-08-17
2011-08-28
2011-09-01
2011-09-05
2011-09-06
2011-10-01
2011-10-02
2011-10-03
2011-10-04 
```

我想做的是在日期按顺序出现时进行计数，即它们并排。

在上面的例子中，我们将有 2,1,1,2,4

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T07:38:16.523

这个怎么样：

制作可重现的示例数据：

```
dat <- read.table(text = "2011-08-16
2011-08-17
2011-08-28
2011-09-01
2011-09-05
2011-09-06
2011-10-01
2011-10-02
2011-10-03
2011-10-04") 
```

使用 获取连续日期的运行计数`rle`，遵循[此答案](https://stackoverflow.com/a/8401783/1036500)和[此答案](https://stackoverflow.com/a/1503155/1036500)：

```
(rle (cumsum( c(0, diff(as.Date(dat$V1)) > 1) ) ) )$lengths
[1] 2 1 1 2 4 
```

# android - 如何让我的应用程序在 android 市场上付费？

> ID：10426577
> 
> 赞同：1
> 
> 时间：2012-05-03T06:58:26.603
> 
> 标签：android, google-play

我的应用程序中有 10 个视频。我想让 3 个视频免费，其余 7 个视频付费。我如何以编程方式处理它。如果有人有想法可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T08:24:26.480

您需要使用 Google Play 上的托管购买。七个付费视频中的每一个都可以有一个单独的 SKU（或您想要的任何组合），您可以使用应用内购买向用户收费以解锁视频。

请参阅[http://developer.android.com/guide/market/billing/index.html](http://developer.android.com/guide/market/billing/index.html)

# c# - 创建一个类，设置属性后，如何测试属性并启用它？

> ID：10426580
> 
> 赞同：0
> 
> 时间：2012-05-03T06:58:40.103
> 
> 标签：c#, class, properties

我知道这很简单，但我就是想不通。我正在创建一个类，我的功能是给我带来问题的原因。我使用 O'Reilly 的 C# 3.0 作为参考。

我创建了一个类：

```
class Runner
{
    public double miles = 0;

    public double RunMiles
    {
        get { return miles; }
        set
        {
            if ((value > 2)&&(value <7))
            {
                this.miles = value;
            } 
        }
    }

    public void StartRun ()
    {      
        // here, I want to enable the runner to start running, Make him start running//if that makes any sense.
    }

    public void VerifyMiles ()
    {
        // enter code here//I want to verify the miles are set.
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T23:55:23.870

对于OP的评论，一些基本的东西。

```
Runner r = new Runner(); //you created an instance of type Runner in memory now
int i = r.RunMile; //i is now 0 since variable miles is 0 initially, so RunMiles is also 0

r.RunMiles = 34;
i = r.RunMile; //i is still 0 since variable miles is not affected 'cos of your "if ((value > 2)&&(value <7))" in setter logic

r.RunMiles = 3;
i = r.RunMile; //i is 3 now 
```

要开始运行，您应该执行以下操作：

```
r.StartRun(); 
```

并验证里程，

```
r.VerifyMiles();

public void StartRun ()
{     
    miles++; //your logic here
}

public void VerifyMiles ()
{
    if (miles > 26.22)
       //print successfully completed one round of marathon
    else
       //he died in the meanwhile :(..
} 
```

这就是你在 OOP 中基本做事的方式

# c# - 在水平菜单中显示当前用户的名字

> ID：10426584
> 
> 赞同：0
> 
> 时间：2012-05-03T06:59:15.620
> 
> 标签：c#, asp.net, asp.net-membership

我正在使用`Asp.Net/C#`。我正在使用`Asp.Net's`内置的。`Membership Framework`我有一个要求，其中当前（登录）用户的名称应显示在右侧的水平菜单中。`aspnet_Users`该表以某些代码的形式存储 UserName，例如`ppp001`where因为用户的实际名称存储`For Example: John Smith`在`aspnet_Users`使用. 欢迎任何建议。`Foreign Key constraint``repeater`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T12:08:43.153

最简单的方法是将名字和姓氏存储在配置文件提供程序中，然后使用具有 runat="sever" 的标签或 div

在 web.config 中

```
<profile enabled="true">
    <properties>
        <add name="FirstName" type="string"/>
        <add name="LastName" type="string"/>
    </properties>
</profile> 
```

然后设置你的 div 或标签

```
 FirstName.Text = Profile.FirstName;
   LastName.Text = Profile.LastName; 
```

使用配置文件提供程序的缺点是所有配置文件属性都连接成一个大字符串，因此很难对其进行查询。更好的方法是创建您自己的 BasePage 类，该类调用数据库以使用您提到的外键从特定表中检索名字和姓氏。我通常将其设置为页面的 MyLoggedInUser 属性。这样，您的所有页面都可以通过 this.Page.MyLoggedInUser.FirstName 等访问它。

# php - 使用 LinkedIn 登录 API 的间歇性 404

> ID：10426587
> 
> 赞同：1
> 
> 时间：2012-05-03T06:59:22.407
> 
> 标签：php, api, linkedin

我在我的网站上使用 PHP 和 LinkedIn 登录 API。登录后，我得到了一个数组：

```
TDjhOAiGm3
Sushil
Kandola
Software Engineer at Cyberlinks
http://media.linkedin.com/mpr/mprx/0_T_Ic9xfOWkQcs7E1_G4k9jjOdb-ZsoI1ik0e9pDY9C6e5mpPD5RRZyMKFdtbJDo088ddJUxfFs4y 
```

但有时我会得到：

```
404
1336026813751
ZJQ0Y92V0S
0
Could not find person based on: ~ 
```

尽管收到**Auth Id**，但我得到了**404**。有人可以帮我获取正确的信息吗？

# linux - 在别名中设置 printf

> ID：10426590
> 
> 赞同：2
> 
> 时间：2012-05-03T06:59:40.420
> 
> 标签：linux, unix

> **可能重复：**
> [bash 别名中的变量插值](https://stackoverflow.com/questions/10421436/variable-interpolation-in-bash-alias)

此命令用于在 bash shell 中设置我的控制台的标题

```
 printf "\033]0;  my_console_title \007"; 
```

但我想将此命令与别名一起使用，并且应该接受用户的控制台标题（将 printf 设置为别名变量时遇到问题）。

类似于：

```
alias fx="find . -type f | xargs grep -il $1" 
```

用法：`fx "search_text"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T07:07:33.180

你有没有尝试过这样的事情：

```
alias title='printf "\033];0%s\007"' 
```

顺便说一句，在 URXVT 上，您的线路不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T07:08:18.640

试试这个：

```
$ alias ttt='printf "\033]0; %s \007" "$1"' 
```

无法测试它，因为它在我的机器上不起作用，但至少它没有给出错误。

编辑：上升。修复了一个错误。

# ruby-on-rails - 如何在 Rails 中创建单页应用程序？

> ID：10426595
> 
> 赞同：2
> 
> 时间：2012-05-03T07:00:06.287
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, single-page-application

[在完成出色的Rails 教程](http://ruby.railstutorial.org/)之后，我正在创建我的第一个 Rails 3.2 应用程序。

我希望我的应用程序这样做：

从数据库中提取一个随机配方（我已经使用“索引”操作和这段代码完成了这一点：`@recipe = Recipe.find(:first, :order => 'Random()'))`

如果用户单击“类似的东西”按钮，应用程序会从数据库中获取相关配方

如果用户点击“不同的东西”，应用程序会获取一个不相关的食谱

据我了解，应该对“类似的东西”和“不同的东西”都采取行动。这个对吗？

我应该使用带有“不同”和“相似”的提交按钮的 POST 表单来确定要采取的行动吗？

另外，我怎样才能让用户始终保持在一个页面上（所以他们总是将 URL 视为[http://www.whatshouldicookfordinner.co.uk](http://www.whatshouldicookfordinner.co.uk)而不是 /recipes#somethingdifferent）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:38:39.227

为了使用户始终保持在同一页面上，您将需要使用 AJAX。看看这个[railscasts](http://railscasts.com/episodes/174-pagination-with-ajax)，你可以把这个概念应用到你想做的事情上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T03:16:05.647

使用 javascript 框架/库（Ember、Backbone、Angular、Knockout、Meteor、Batman 等。）

看看这个 railscast：[http: //railscasts.com/episodes/323-backbone-on-rails-part-1](http://railscasts.com/episodes/323-backbone-on-rails-part-1)

# java - jni调用崩溃的情况下如何在linux上查找失败的原因？

> ID：10426597
> 
> 赞同：2
> 
> 时间：2012-05-03T07:00:28.073
> 
> 标签：java, linux, debugging, crash, java-native-interface

在 linux 上运行涉及 JNI 调用的 Java 应用程序时，我注意到很少有类似下面的痕迹，看起来像崩溃。

但应用程序继续并成功。

“Java 运行时环境检测到一个致命错误：调用了纯虚拟方法”

上面的痕迹是什么意思？是什么导致了这次失败？我没有得到任何核心转储。即使有时我得到 coredump，每次的故障堆栈都是不同的。在这些电话中看起来没有任何问题。

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T15:33:40.033

根据我的经验：在启动新的 Java 之前，请确保您已经杀死了以前的 Java。并确保该过程已终止（在我的情况下，这需要一点时间）。只有这样，启动一个新的。

您可能还想为此添加 C/C++ 标记，因为这更多来自 C 端而不是 Java 端。您可能会得到更多/更好的答案。就我而言，这带有 GC 警告，但我尚未对此进行调查。

好读：

1.  [http://c2.com/cgi/wiki?PureVirtualFunctionCalled](http://c2.com/cgi/wiki?PureVirtualFunctionCalled)
2.  [http://tombarta.wordpress.com/2008/07/10/gcc-pure-virtual-method-call/](http://tombarta.wordpress.com/2008/07/10/gcc-pure-virtual-method-called/)

来自这些地方的两句话，据我所知，有些人希望他们的答案都集中在一个地方。

C2 维基：

> 顺便说一下，原因是子虚拟可能访问可能尚未构建或已被销毁的实例成员。因此，您不能将孩子称为虚拟。

汤巴塔的博客：

> 为什么会这样？因为我正在**删除仍在使用的对象**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T07:05:42.383

如果您没有任何纯虚函数，或者您确定确实是纯抽象的类，则该错误通常表示堆问题，例如尝试在已删除对象上调用方法。现在使用 JNI，我会怀疑 GC 问题。尝试使用内存调试器运行代码以追踪潜在问题。

# c# - Spring.NET、C#、依赖注入和事务

> ID：10426604
> 
> 赞同：1
> 
> 时间：2012-05-03T07:01:10.980
> 
> 标签：c#, dependency-injection, transactions, spring.net

我目前正在使用 MVC3、Spring.NET 和 FluentNHibernate 开始开发 ASP.NET 项目。

我的背景主要是java，但是有一些Spring框架的接触，所以Spring.NET应该很容易，peasy，对吧？

应用程序架构相当普通，控制器使用服务，服务使用 DAO，DAO 使用 NHibernate 实体和映射。

目前，我对当前的情况感到头疼：

我的一种服务方法使用了一个 Dao，它是使用 spring.net 注入的。当我使用 [Transaction] 属性注释服务方法时，DAO 依赖项将停止注入我的服务，从而导致 NullReferenceExceptions。

任何关于为什么会发生这种情况的想法将不胜感激。

一些代码来说明问题。这不是实际的代码，但非常接近。首先是抽象测试类，它扩展了 spring 类 AbstractTransactionalSpringContextTests ：

```
using System;
using System.Text;
using System.Collections.Generic;
using System.Linq;
using Namespace.Dao;
using Namespace.Entities;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using Spring.Testing.Microsoft;

namespace Namespace.Tests.Services
{

  [TestClass]
  public class AbstractServiceTest : AbstractTransactionalSpringContextTests
  {
    public AbstractServiceTest()
    {
    }

    protected override string[] ConfigLocations
    {
      get { return new string[]
          {
             "assembly://Assembly/Namespace.Config/dao.xml",
             "assembly://Assembly/Namespace.Config/Services.xml",
             "assembly://Assembly/Namespace.Config/web.xml"
          }; 
      }
    }
  }
} 
```

扩展此类以创建实际的测试类：

```
using System.Collections.Generic;
using Namespace.Entities;
using Namespace.Services.Assets;
using Microsoft.VisualStudio.TestTools.UnitTesting;

namespace Namespace.Tests.Services
{
  [TestClass]
  public class AssetsServiceTest : AbstractServiceTest
  {

    public AssetsServiceTest()
    {
    }

    private AssetsService assetsService;

    public AssetsService AssetsService
    {
      get { return assetsService; }
      set { assetsService = value; }
    }

   [TestMethod]
   public void TestGetFacilities()
   {
     Assert.IsNotNull(assetsService);

     /* THIS ASSERTION FAILS when assetsService.GetFacilities has the [Transaction] attribute */ 
     Assert.IsNotNull(assetsService.FacilityDao);  

     IList<Facility> facilities = assetsService.GetFacilities();
     Assert.IsNotNull(facilities);
   }
  }
} 
```

这是服务类：

```
using System.Collections.Generic;
using Namespace.Dao;
using Namespace.Entities;
using Namespace.Models;
using Spring.Transaction;
using Spring.Transaction.Interceptor;
using Facility = Namespace.Entities.Facility;

namespace Namespace.Services.Assets
{
  public class AssetsService
  {
    public AssetsService()
    {
     System.Console.Out.WriteLine("AssetsService created");
    }

    private FacilityDao _facilityDao;

    public FacilityDao FacilityDao
    {
      get
      {
        return _facilityDao;
      }
      set
      {
        _facilityDao = value;
      }
    }

    [Transaction(TransactionPropagation.Required, ReadOnly = true)]
    public IList<Facility> GetFacilities()
    {
      return _facilityDao.FetchAll();
     }
  }
} 
```

最后是浓缩和合并的 web.xml/applicationContext ：

```
<?xml version="1.0" encoding="utf-8"?>
<objects xmlns="http://www.springframework.net">

 <db:provider id="DbProvider"
     provider="System.Data.SqlClient"
     connectionString="Data Source=localhost;...;"/>

  <object id="transactionManager"
        type="Spring.Data.NHibernate.HibernateTransactionManager, Spring.Data.NHibernate32">

    <property name="DbProvider" ref="DbProvider"/>
    <property name="SessionFactory" ref="SessionFactory"/>

</object>

 <tx:attribute-driven transaction-manager="transactionManager"/>

 <object type="Namespace.Dao.FacilityDao, Namespace" id="FacilityDao">
    <property name="SessionFactory" ref="SessionFactory"/>
 </object>

 <object type="Namespace.Services.Assets.AssetsService, Namespace" id="AssetsService">
   <property name="FacilityDao" ref="FacilityDao" />
 </object>

</objects> 
```

编辑：

感谢 Max 和 Marijn 的提示，我现在已将 AssetsService 更改为使用接口而不是实际实现。但是，问题仍然存在。以下是修改后的细节。

```
namespace Namespace.Services.Assets
{
  public class AssetsService
  {
    public AssetsService()
    {
      System.Console.Out.WriteLine("AssetsService created");
    }

    public IFacilityDao FacilityDao { get; set; }

    [Transaction(TransactionPropagation.Required, ReadOnly = true)]
    public IList<Facility> GetFacilities()
     {
      return FacilityDao.FetchAll();
    }

  }
} 
```

IFacilityDao：

```
namespace Namespace.Dao
{
    public interface IFacilityDao : IDao<Facility>
    {}

    public class FacilityDao : DaoBase<Facility>, IFacilityDao
    {

    }
} 
```

伊道：

```
namespace Namespace.Dao
{
  public interface IDao<T>
  {
    T Fetch(int id);
    T FindByName(string name);
    IList<T> FetchAll();
    void SaveOrUpdate(T entity);
    void Delete(T entity);
  }
} 
```

道基地：

```
namespace Namespace.Dao
{
    public abstract class DaoBase<T> : IDao<T>
    {
        public ISessionFactory SessionFactory { get; set; }

        public T Fetch(int id)
        {
            var result = SessionFactory
                      .GetCurrentSession()
                      .CreateCriteria(typeof(T))
                      .Add(Restrictions.Eq("ID", id))
                      .UniqueResult<T>();

            return result;
        }

     //.... 
} 
```

} ![FacilityDao 没有被代理](../Images/4249f7878e3c3da4de6bf01abd7e79f6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T07:24:55.243

*注：见下方更新*

您的`AssetService.FacilityDao`成员应该是接口类型而不是具体`FacilityDao`类型；否则 spring.net 将无法创建用于拦截的事务代理。尝试抽象一个`IFacilityDao`接口并将你的更改`AssetService`为：

```
public class AssetsService
{
  public IFacilityDao FacilityDao { get; set; }
  // snip...
} 
```

*更新*

问题是您的`AssetService.GetFacilities`方法不能被代理；尝试使其成为虚拟（如果没有代理接口， spring 创建一个基于装饰器的代理，代理所有*公共**虚拟方法）；***如果失败，请尝试以`IAssetService`我之前为 dao 建议的类似方式引入接口。并将其注入`IAssetService`测试的属性。

对不起，我之前错过了。

*一些额外的解释*

失败`Assert.IsNotNull(assetsService.FacilityDao);`来自于`AssetService`实例被注入测试夹具（[通过弹簧测试基础设施按类型自动装配](http://www.springframework.net/doc-latest/reference/html/testing.html#testing-fixture-di)）的事实。由于 transaction 属性，注入了*aop 代理。*这个代理的*目标*是`FacilityDao`注入了一个“真实”对象。

但是`assetsService`你的断言是*aop proxy*。最初，您没有在您的`AssetService`类上指定任何接口，并且 spring[创建了一个装饰器代理](http://www.springframework.net/doc-latest/reference/html/aop.html#aop-proxy-mechanism)- 一个继承自 的代理，`AssetService`所有虚拟方法都被覆盖并委托给目标对象。

断言返回 null，因为在这个代理上，设施 dao 永远不会被注入。

如果未应用事务属性，则断言不会返回 null，因为注入了“未代理”对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T07:54:21.933

Marijin 是对的：如果您想使用 Spring.NET 的 AOP 功能（并且使用事务属性基本上是 AOP），您的 bean（在 Java 术语中）需要实现一个接口。原因是 Spring.NET 创建了一个代理对象，从技术上讲，它是在运行时创建的某个类的实例。抛出 NullReferenceException 是因为 .NET 无法将此代理类转换为您的具体类型。这只能通过使用接口来完成。

# rfid - RFID标签和扫描到接收器的范围

> ID：10426608
> 
> 赞同：-1
> 
> 时间：2012-05-03T07:01:42.220
> 
> 标签：rfid

目前有源 RFID 标签和接收器的最大范围是多少，单位时间内可以通过**RFID 阅读器扫描多少个****RFID 标签？**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T12:13:00.970

这取决于。有源标签在 2.4GHz 上工作。Awarage 读取距离约为 50-100 米。一些强大的读者阅读约200米。但这取决于读者的力量。对于欧盟；阅读器天线仅允许 2W 功率。如果你增加功率，阅读距离就会增加。**

# java - jTDS + 存储过程 + prepareSQL = 嵌套级别错误？

> ID：10426610
> 
> 赞同：7
> 
> 时间：2012-05-03T07:01:46.493
> 
> 标签：java, sql-server, sql-server-2008, stored-procedures, jtds

**情况**
我有一个 (Tomcat) Java Web 应用程序，它使用 jTDS 连接到 MSSQL 2008 数据库。此 Java 应用程序使用用户输入执行其 99% 的 MSSQL 存储过程。

**问题**
jTDS 驱动程序有时（在应用程序的不同位置）回复错误：

> 超出最大存储过程、函数、触发器或视图嵌套级别（限制 32）。

我们可以通过添加`prepareSQL=0`到 jTDS 连接字符串来避免这种情况。然后错误到处消失，但对于所有其他值`prepareSQL`，错误仍然存​​在。我不知道 jTDS 添加了多少存储过程嵌套级别，但显然对于我们的应用程序来说太多了。

**问题**

1.  `prepareSQL=3`只需要执行存储过程，当然在 Java 代码中使用 Prepared Statements， （或`prepareSQL=0`）对我们有多大影响？换句话说：在每个网站上，我发现有人说“从不`prepareSQL=0`在生产环境中使用”，这也适用于这种情况吗？

2.  如果`prepareSQL=0`不是推荐的解决方案、安全问题等，我们也许应该寻找另一个驱动程序。jTDS 在过去 2 年没有更新，Microsoft 有 JDBC 4.0 的驱动程序。我找不到 jTDS 和 Microsoft 的 JDBC 4.0 驱动程序之间的任何基准或比较。对于 Microsoft 的 2.0 和 3.0 驱动程序，普遍的看法似乎是 jTDS 更快、更好、更高效。JDBC 4.0 仍然是这种情况，还是微软在这方面超过了它的竞争对手？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T06:37:39.617

when prepareSQL is not equal to 0 jTDS add exactly *one* level on nesting. Consider follow procedure:

```
CREATE PROCEDURE F @v int
AS
BEGIN
    select @v = @v - 1
    IF @v = 0 SELECT @v
    ELSE EXEC F @v
END 
```

And java code that use it:

```
 Connection connection = DriverManager.getConnection("jdbc:jtds:sqlserver://xxx.xxx.xxx.xxx:1433/xxx;prepareSQL=0");
 PreparedStatement statement = connection.prepareStatement("EXEC F ?");
 statement.setInt(1, 32);
 statement.execute(); 
```

If you set prepareSQL to value other than 0 it will fail with "Maximum stored procedure, function, trigger, or view nesting level exceeded (limit 32)". You need to find why your code use so much nesting? By prepareSQL=0 you are preventing mssql to use stamements and those forcing to parse SQL on each executing. It is not a big problem if statement execution time is much more that statement complation time (E.G. if stored procedyre executes 10 secondse it is not a problem if compilation took 10ms more). Changing driver won't help because you will have same issues.

# jquery - 如何将点击的html标签的值（id）发送到asp.net？

> ID：10426614
> 
> 赞同：0
> 
> 时间：2012-05-03T07:02:13.373
> 
> 标签：jquery, asp.net, ajax, jquery-post

我在表单上有 Img 标签，我想将它的 id 发送到`aspx.cs` . 我使用了 post 方法并使用`Request.Form["id"]` 但我没有得到`aspx.cs`文件上的 id 来检索这个 id。

**代码：**

```
$("img").click(function () {
 var id = $(this).attr("id");// Here I am getting id How can i send this id to aspx.cs
 jq.post("WebForm1.aspx",
             id: $(this).attr("id"));
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:04:19.787

```
$("img").click(function () {
        var id = $(this).attr("id");// Here I am getting id How can i send this id to aspx.cs
        //alert(id); 
        jq.post("WebForm1.aspx", id: id);//this is enough
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T07:05:28.177

`this`打开`post`方法时可能会出现覆盖问题。尝试：

```
$("img").click(function () {
      var my_id = $(this).attr("id");
      $.post("WebForm1.aspx", { id: my_id });
}); 
```

或者，如果您有几个参数要传递给表单，您可以提前构建您的对象，如下所示：

```
$("img").click(function () {
      var params = {id: $(this).attr("id"), href: $(this).attr("href")};
      $.post("WebForm1.aspx", params);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T07:23:46.430

```
$("img").click(function () {
        var id = this.id; // No jquery needed!
        jq.post("WebForm1.aspx", {id: id});
    }); 
```

不要过度使用 jQuery。`this.id`会给你`id` 带来**比**`$(this).attr('id')`

# android - 有什么方法可以检测视频是否可以在设备上播放？

> ID：10426615
> 
> 赞同：5
> 
> 时间：2012-05-03T07:02:19.960
> 
> 标签：android

我对播放视频 Android 设备进行了深入研究，得出的结论是，有些 Android 设备无法播放在其他 Android 设备上录制的视频。

现在我正在触发播放视频的意图，但播放器说“抱歉，无法播放视频”。

我一直想知道是否有办法在我触发意图之前检测到视频无法播放？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:15:10.930

播放取决于播放器支持的文件格式。因此，如果您使用 Android 平台内置的解码器（android 默认解码器），那么它更具体的是 android OS 的版本。因此，您可以根据设备操作系统版本检查支持的媒体格式，如果支持则允许启动。

作为应用程序开发人员，您可以自由使用任何支持 Android 的设备上可用的任何媒体编解码器，包括 Android 平台提供的那些和特定于设备的那些。但是，最佳实践是使用与设备无关的媒体编码配置文件。

# vtk - XTK 不会将转换后的 VTK STRUCTURED POINTS 加载到 NRRD 文件中

> ID：10426616
> 
> 赞同：0
> 
> 时间：2012-05-03T07:02:31.720
> 
> 标签：vtk, xtk

我正在使用 teem 库将带有浮点结构点的 ASCII .vtk 文件转换为 nrrd。输出的文件似乎是一个原始的 NRRD0001，我已经能够在 paraview 中正确加载它，所以它似乎没问题。**当我在 XTK 中加载该文件时，我没有错误消息，但没有显示任何内容。**

我还尝试通过 unu 将其转换为 gzipped 编码，但没有成功：

```
teem-unu save -f "nrrd" -e "gzip" -i "./inputfile.vtk" -o "./outputfile.nrrd" 
```

我注意到 XTK 工作 nrrd 文件的类型为 NRRD0004。

我可以用这种格式保存它吗？如何将其保存为 0004？

提前致谢，

安德烈亚

* * *

**这是我的转换简单程序：**

```
#include <teem/nrrd.h>

Nrrd *nrrd = nrrdNew();
if (nrrdLoad(nrrd, argv[1], NULL)==0 && nrrdSave(argv[2], nrrd, NULL)==0)
       printf("success\n"); 
```

* * *

**VTK 文件标题：**

```
# vtk DataFile Version 2.0
Image Builder vtk output
ASCII
DATASET STRUCTURED_POINTS
DIMENSIONS 30 20 20
SPACING 10.266666 8.000000 11.900000
ORIGIN -154.000000 -176.470001 -119.000000
POINT_DATA 12000
SCALARS volume_scalars float 1
LOOKUP_TABLE default 
```

* * *

**转换后的 NRRD 文件输出：**

```
NRRD0001
# Complete NRRD file format specification at:
# http://teem.sourceforge.net/nrrd/format.html
content: Image Builder vtk output
type: float
dimension: 3
sizes: 30 20 20
spacings: 10.266666 8 11.9
axis mins: -154 -176.470001 -119
endian: little
encoding: raw 
```

* * *

**可视化脚本与[http://lessons.goxtk.com/11/相同](http://lessons.goxtk.com/11/)**

```
var r = new X.renderer('r');
    r.init();

    volume = new X.volume();
    volume.load('pocas.nrrd');             
    r.add(volume);        
    r.camera().setPosition(120,80,160);
    r.render(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T14:59:52.507

这可能还不受支持（.vtk 文件）。

您能否提供您想要完成的屏幕截图，以便我们了解您想要做什么..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T04:55:35.220

刚刚通过谷歌找到了这个。我写了 unu 和 nrrd。如果 XTK 无法有效地加载文件，则它是 XTK 如何处理 nrrd 格式的属性，而不是您的文件。

只是想我会指出，对于 unu，您不必引用每个字符串 - 只需引用那些包含空格的字符串。

```
 unu save -f nrrd -e gzip -i ./inputfile.vtk -o ./outputfile.nrrd 
```

也可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T17:57:28.370

当我尝试将 dicom 文件转换为 nrrd 文件时，我遇到了同样的问题。我注意到 unu make 命令中的帮助比 unu make 网页帮助更详细。就我而言，我使用了以下 unu 命令：

```
./unu make -i CT/patient_%03d.dcm 1 369 1 -e raw -bs -1 -en little -t short 
-s 369 369 369 -dirs "(0.4,0,0) (0,0.4,0) (0,0,0.4)" -spc LPS -o CT.nrrd 
```

在这种情况下，将 nrrd 文件生成为 0004 的关键是使用 -dirs 和 -spc 选项。我希望这对你有帮助！

来自联合国大学的帮助：

```
-dirs <v0 v1 ...> , --directions <v0 v1 ...> = (NOTE: must quote whole
                 vector list) The "space directions": the vectors in space
                 spanned by incrementing (by one) each axis index (the
                 column vectors of the index-to-world matrix transform),
                 OR, "none" for non-spatial axes. Give one vector per
                 axis. (Quoting around whole vector list, not
                 individually, is needed because of limitations in the
                 parser) (string)

  -spc <space> , --space <space> = identify the space (e.g. "RAS", "LPS")
                 in which the array conceptually lives, from the nrrdSpace
                 airEnum, which in turn determines the dimension of the
                 space. Or, use an integer to give the dimension of a
                 space that nrrdSpace doesn't know about By default (not
                 using this option), the enclosing space is set as
                 unknown. (string) 
```

问候，

磷

# c# - c# 应用程序中的 npgsql 问题 - 现有连接被远程主机强行关闭

> ID：10426617
> 
> 赞同：10
> 
> 时间：2012-05-03T07:02:34.993
> 
> 标签：c#, postgresql, npgsql

尝试从 C# 实用程序打开我的 Postgresql 数据库时出现以下错误：

> System.IO.IOException：无法从传输连接读取数据：现有连接被远程主机强行关闭。---> System.Net.Sockets.SocketException: 现有连接被远程主机强行关闭

我尝试从远程计算机和运行 Postgresql 服务器的计算机上运行该程序。

目前两台计算机上都没有防火墙，我可以使用相同的密码通过 postgres 管理实用程序很好地连接到数据库和服务器。我已检查用户名是否具有对数据库的权限。

这是我的连接代码：

```
public bool updateFromServer()
{
    try
    {
        NpgsqlConnection conn = new NpgsqlConnection(connString);
        conn.Open();
        conn.Close();
        return true;
    }
    catch (Exception e)
    {
        conn.close()
        return false;
    }
} 
```

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-25T16:52:44.117

我花了 1 个小时搜索相同的内容，但没有发现任何问题。但后来意识到 PG 将其日志放在 pg_log 文件夹中。我查看了它以查看可能的问题。

结果你只需要在“pg_hba.conf”文件中有正确的“host”条目。对我来说，这个文件位于 C:\Program Files\PostgreSQL\9.1\data 目录中。例如

> 托管所有 192.168.1.2/32 md5

其中 192.168.1.2 - 是您客户的 IP 地址。

顺便说一句，您仍然需要将 5432 端口作为入站规则打开（Win​​dows Vista、Windows 7、Windows 2008+）。

# php - PHP preg_replace 错误？

> ID：10426618
> 
> 赞同：1
> 
> 时间：2012-05-03T07:02:35.323
> 
> 标签：php, regex, preg-replace

我正在使用以下正则表达式：

```
$sEmailHTML = preg_replace ("/<\!-- +(\\[[\"a-zA-Z_]+\\]) +-->/U", "\\1", $sEmailHTML);
$sEmailHTML = preg_replace ("/\\[\"(.+)\"\\]/U", "\\1", $sEmailHTML); 
```

在这篇文章中：

```
["Text:"]
<!-- ["Click this to authenticate"] --> <!-- [authlink] -->
<!-- ["Dear"] --> <!-- [firstname] --><!-- [":"] --> 
```

它给了我这个结果：（也替换了 [authlink] 和 [firstname]）

```
Text:
<!-- Click this to authenticate --> <a href="http://www.mydomain.tld/auth.php?jj=100&aa=SOMEVALUE&end">http://www.mydomain.tld/auth.php?jj=100&aa=SOMEVALUE&end</a>
Dear John<!-- : --> 
```

什么时候应该给出这个：

```
Text:
Click this to authenticate <a href="http://www.mydomain.tld/auth.php?jj=100&aa=SOMEVALUE&end">http://www.mydomain.tld/auth.php?jj=100&aa=SOMEVALUE&end</a>
Dear John: 
```

我不明白为什么它没有删除所有的 HTML 注释标签。如果我执行两次评论删除器正则表达式，它也不起作用。所以它要么是一个错误，要么是我遗漏了一些东西。(PHP 5.2.17)

**谢谢。我没有想。更改为并工作：**

```
$sEmailHTML = preg_replace ("/<!-- +(\\[[a-zA-Z_]+\\]) +-->/U", "\\1", $sEmailHTML);
$sEmailHTML = preg_replace ("/<!-- +(\\[\".+\"\\]) +-->/U", "\\1", $sEmailHTML);
$sEmailHTML = preg_replace ("/\\[\"(.+)\"\\]/U", "\\1", $sEmailHTML); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T07:07:58.267

发生这种情况是因为文本

```
"Click this to authenticate" 
```

在它们和你的正则表达式中有空格：

```
"/<\!-- +(\\[[\"a-zA-Z_]+\\]) +-->/U" 
```

不匹配空格。此外，要匹配文字`[`，请使用`\[`，而不是`\\[`。

将其更改为：

```
"/<!-- +(\[[\"a-zA-Z_ ]+\]) +-->/U"
                     ^ 
```

[**看见**](http://ideone.com/MLj8J)

# cakephp - CakePHP 烘焙自定义控制器.ctp

> ID：10426619
> 
> 赞同：1
> 
> 时间：2012-05-03T07:02:36.413
> 
> 标签：cakephp, cakephp-2.1, cakedc

大家早上好，

我正在尝试为 cakephp 创建一个自定义烘焙脚本。

我想要的是能够在我未来的所有页面上使用 cakedc 搜索功能。到目前为止，我已经设法通过更改 Views 食谱在页面一侧制作了一个有效的搜索表单。

我现在想做的是让烘焙过程识别表中的所有字段并输出如下所示的内容：

```
public $presetVars = array(
    array(
         'field' => 'name',
         'type' => 'value'),
    array(
         'field' => 'status',
         'type' => 'checkbox'),
    array(
         'field' => 'series_id',
         'type' => 'value',
         'formField' => 'series_id',
         'modelField' => 'lookup',
         'model' => 'Series'
    )); 
```

在控制器中。

如果不清楚，此示例表具有以下字段：

*   id（整数）
*   名称（小文本）
*   状态（布尔值）
*   series_id（整数，fk）

请问有什么建议可以给我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T10:41:23.697

我的建议是编辑烘焙控制器：

/cake/console/libs/tasks/controller.php

# ipad - UISplitViewController：如何强制在应用启动时显示主弹出框？（肖像）

> ID：10426622
> 
> 赞同：27
> 
> 时间：2012-05-03T07:02:51.747
> 
> 标签：ipad, ios5, uisplitviewcontroller, portrait, ios5.1

在 iPad 应用程序中，我正在使用 UISplitViewController。当应用程序以纵向模式启动时，我需要强制显示主弹出窗口。

现在我正在使用这段代码，它在 iOS 5.0 上运行良好。

```
if (UIInterfaceOrientationIsPortrait(self.interfaceOrientation)) {
   if ([[[AppDelegate sharedAppDelegate] splitViewController] respondsToSelector:[[[AppDelegate sharedAppDelegate] btnMenu] action]]) {
      [[[AppDelegate sharedAppDelegate] splitViewController] performSelector:[[[AppDelegate sharedAppDelegate] btnMenu] action]];
   }            
} 
```

但在 iOS 5.1（使用新型主弹出框）中，行为似乎是随机的。有时弹出窗口会全屏显示，有时效果很好。

5.1的一些建议？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2014-10-09T09:26:14.973

这里没有 5.1 的建议，但 8.0 的建议：

现在有了iOS8，有很多新的`UISplitViewController`配置方法。

在您的情况下，只需在 中设置正确的值`preferredDisplayMode`，例如在 masterViewController 中`viewDidLoad`。

**目标-C：**

```
- (void)viewDidLoad {
    // configuring splitviewcontroller
    self.splitViewController.preferredDisplayMode = UISplitViewControllerDisplayModeAllVisible;

    //....
} 
```

**迅速：**

```
 override func viewDidLoad() {
        self.splitViewController?.preferredDisplayMode = UISplitViewControllerDisplayMode.AllVisible
    } 
```

但这当然只是iOS8。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-03T17:26:16.390

我为此苦苦挣扎了一段时间，即使现在我对解决方案也不是 100% 满意，但鉴于当前的限制，这是我唯一能想到的。

首先，重写以下委托方法：

```
- (void)splitViewController:(UISplitViewController *)splitController willHideViewController:(UIViewController *)viewController withBarButtonItem:(UIBarButtonItem *)barButtonItem forPopoverController:(UIPopoverController *)popoverController 
```

并使用它来获取对条形按钮项的引用，并将其存储在 iVar 中：

```
barButtonForMaster = barButtonItem; 
```

然后，当您想显示主视图控制器时，请进行如下调用：

```
[barButtonForMaster.target performSelector: barButtonForMaster.action withObject: barButtonForMaster]; 
```

如果您想在一开始就执行此操作，请使用一些延迟以防止应用程序崩溃（感谢有用的评论）：

```
[barButtonForMaster.target performSelector: barButtonForMaster.action withObject: barButtonForMaster afterDelay:1]; 
```

在这种情况下，您可以在拆分视图委托方法中执行选择器。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-11-06T19:01:24.700

扩展 Rob 的答案，这对我很有效（在详细屏幕的 viewDidLoad 中）：

```
//If in portrait mode, display the master view
if (UIInterfaceOrientationIsPortrait(self.interfaceOrientation)) {
    [self.navigationItem.leftBarButtonItem.target performSelector:self.navigationItem.leftBarButtonItem.action withObject:self.navigationItem];
} 
```

无需获取单独的引用，而是使用 self.navigationItem.leftBarButtonItem

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-05-29T09:35:08.927

对于 iOS8，最简单的方法是使用以下方法：

```
 self.splitViewController.preferredDisplayMode = UISplitViewControllerDisplayModePrimaryOverlay; 
```

我在第一次启动应用程序时使用它来显示 masterViewController 中的登录。在所有其他情况下，我使用

```
self.splitViewController.preferredDisplayMode = UISplitViewControllerDisplayModeAutomatic 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-07-14T05:51:36.210

如果您在应用程序启动时需要它，请在您的详细视图控制器中覆盖此方法：

```
-(BOOL)splitViewController:(UISplitViewController *)svc shouldHideViewController:(UIViewController *)vc inOrientation:(UIInterfaceOrientation)orientation
{
    return NO;
} 
```

但是，如果您随后需要它来隐藏它，它看起来好像没有调用该方法，因此您必须手动隐藏它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-02-27T17:37:18.870

一个稍微不那么骇人听闻的变体（swift）：

```
let btn = self.splitViewController!.displayModeButtonItem()
btn.target?.performSelector(btn.action, withObject: btn) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-07-15T22:30:20.597

我使用这个解决方案：
在 viewDidLoad 中的 splitViewController 中将 displayMode 设置为 .primaryOverlay

```
override func viewDidLoad() {
    if self.isCollapsed == false, self.displayMode == .primaryHidden {
        self.preferredDisplayMode = .primaryOverlay
    }
} 
```

并在 viewWillAppear 中将其设置回 .automatic

```
override func viewWillAppear(_ animated: Bool) {
    self.preferredDisplayMode = .automatic
} 
```

这样主视图将在 UISplitViewController 启动时显示，并且在方向改变后具有默认行为。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-09-06T01:23:15.933

无需保留对 barButtonItem 的愚蠢引用。只需调用相同的目标/动作。查看我的答案[https://stackoverflow.com/a/25695923/1021430](https://stackoverflow.com/a/25695923/1021430)

目标是拆分视图控制器，动作是toggleMasterVisible：

# php - 结合 symfony1 和 Symfony2 项目

> ID：10426627
> 
> 赞同：4
> 
> 时间：2012-05-03T07:03:28.367
> 
> 标签：php, mysql, symfony1, symfony

symfony1.0（propel as ORM）开发了一个现有的网站。我在 Symfony2 中为网站开发了一个模块（Doctrine2 作为 ORM）。两者都有身份验证。新模块应使用现有数据库中的成员。他们之间的会话不应中断。我应该遵循哪些步骤？如何处理？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T08:27:34.783

我认为您应该在 Symfony2 项目中创建[一个自定义用户提供程序](http://symfony.com/doc/current/cookbook/security/custom_provider.html)，以便能够在两个项目之间共享用户（但首先检查您是否可以使用[原则用户提供程序](http://symfony.com/doc/current/cookbook/security/entity_provider.html)）。

如果用户登录 symfony1，您还应该实现[自定义身份验证提供程序](http://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html)以自动在 Symfony2 应用程序中登录用户。您可能需要检查 symfony1 会话并基于该登录用户（或不）。

可能值得看一下[IngewikkeldWrapperBundle](https://github.com/Ingewikkeld/IngewikkeldWrapperBundle)，它在 Symfony2 中包装了 symfony1 项目。

Symfony Live 2011 的演讲也值得一看：使用 Sf2 缓存包装 Sf1 应用程序的出色性能：

*   [视频](http://symfony.com/video/Paris2011/572)
*   [幻灯片](http://www.slideshare.net/futurecat/nice-performance-using-sf2-cache-wrapping-sf1-application-paris)

最后但并非最不重要的一点是通过文档：

*   [安全](http://symfony.com/doc/current/book/security.html)
*   [安全手册条目](http://symfony.com/doc/current/cookbook/security/index.html)

# php - Google Drive SDK 服务帐户错误“经过身份验证的用户尚未安装具有客户端 ID 的应用程序...”

> ID：10426632
> 
> 赞同：3
> 
> 时间：2012-05-03T07:03:36.600
> 
> 标签：php, google-drive-api

我正在尝试使用 Google Drive SDK 服务帐户创建一个可以在后台运行的 Google Drive 应用程序（例如 cronjob），无需任何用户交互，但它给了我这个错误，我不明白为什么：

> 调用 POST [https://www.googleapis.com/upload/drive/v1/files?uploadType=multipart](https://www.googleapis.com/upload/drive/v1/files?uploadType=multipart)时出错：（403）经过身份验证的用户尚未安装客户端 ID 为 {my_client_id} 的应用程序

在 Google API 控制台上，我已经激活了 Drive API 和 Drive SDK。在 Drive SDK 选项卡上，我已经设置了所有必需的信息。我还向 Chrome 网上应用店发布了仅供测试人员使用的应用程序，并将其安装到我的 Google Chrome 中，应用程序名称出现在我的 Google Drive“创建”菜单上。

这是我的代码片段：

```
<?php

require_once dirname(__FILE__).'/google-api-php-client/src/apiClient.php';
require_once dirname(__FILE__).'/google-api-php-client/src/contrib/apiDriveService.php';

$apiClient = new apiClient();
$apiClient->setClientId(DRIVE_CLIENT_ID);
$apiClient->setClientSecret(DRIVE_CLIENT_SECRET);
$apiClient->setAssertionCredentials(new apiAssertionCredentials(
    OAUTH2_EMAIL, 
    array('https://www.googleapis.com/auth/drive.file'), 
    file_get_contents(SERVICE_ACCOUNT_PRIVATEKEY_FILE))
);

$apiDriveService = new apiDriveService($apiClient);

$file = new DriveFile();
$file->setTitle('filename.txt');
$file->setMimeType('text/plain');
$createdFile = $apiDriveService->files->insert($file, array(
    'data' => 'file content goes here....',
    'mimeType' => 'text/plain'
));

?> 
```

据我了解，应用程序可以代表用户使用 Google Drive SDK 的服务帐户。这是否意味着用户没有身份验证问题（请求权限）？那么应用程序如何验证自己呢？或者我的理解可能是错误的？请在这里帮助启发我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T17:31:19.140

由于其安全模型，Drive SDK 不支持服务帐户。

我的建议是使用您的应用程序从 Drive Web UI 打开（或创建）一个文件，并存储您在 OAuth 2.0 授权流程完成后获得的检索到的访问和刷新令牌。

从您的 cron 作业中，只需检索这些凭据即可代表您的用户向 Drive API 发送授权请求。

# c - 为什么 C 中的很多二叉树数据结构都没有父节点指针？

> ID：10426636
> 
> 赞同：6
> 
> 时间：2012-05-03T07:03:44.287
> 
> 标签：c, algorithm, binary-tree

我是 C 编程的新手，我正在用 C 学习 C 算法。

这是我关于如何定义二叉树`node`数据结构的问题。

## 使用或不使用父节点指针

以下是定义`Node`数据结构的 2 个典型示例代码。

### 没有父节点指针

```
typedef struct binaryTreeNode_{
  int key;
  void *data;
  binaryTreeNode_ *leftNode;
  binaryTreeNode_ *rightNode;
} binaryTreeNode; 
```

### 带父节点指针

```
typedef struct binaryTreeNode_{
  int key;
  void *data;
  binaryTreeNode_ *leftNode;
  binaryTreeNode_ *rightNode;
  binaryTreeNode_ *parentNode;
} binaryTreeNode; 
```

## 我的问题

显然，使用带有父节点指针的节点结构将使很多工作变得更加容易。就像遍历一个节点/一棵树，DFS/BFS 与二叉树。所以我的问题是**为什么有一些基于没有父节点的结构的解决方案？**.

有什么历史原因吗？如果仅仅因为 RAM/DISK 容量的限制，我认为我们可以放弃没有父节点的解决方案，不是吗？

## 也许不相关

就像*链表*和*双链表*一样，我们应该使用*双链表*来实现`Stack`和`Queue`吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-03T07:15:57.813

使用没有父指针的树有很好的理由，内存使用不是问题。

在函数式编程世界中（想想 Lisp、Scheme、Standard ML、OCaml、Haskell、F# 等），树和链表是非常常见的数据结构，所以即使在 C 中，很多关于树和列表的思考也会受到影响FP。树和列表是递归定义的（树要么是叶子节点，要么是其子节点是树的内部节点，而列表要么`nil`是节点，要么是带有数据元素和附加列表的节点），并且它们几乎总是作为不可变数据结构实现的。 [不变性](http://en.wikipedia.org/wiki/Immutable_object)很有帮助，因为它使并行性更清晰（没有程序员可见的锁），更好地在函数之间共享数据（不必复制数据），并且更容易证明。

父指针或双向链表的问题在于，不变性突然消失了。对于不可变对象，您必须在创建时指定有关该对象的所有内容。因此，如果要保持不变性，则在创建其子节点之前不能创建节点（因为必须在创建时指定这些子节点），但也不能在子节点上设置父指针父级已创建（因为父级不存在）。换句话说，不变性不能很好地处理循环依赖。同样，你不能创建一个没有一些突变的双向链表，因为没有突变你不能创建第一个节点，直到第二个节点被创建，你可以'

FP 人员设法编写了大量具有严格不可变数据结构的代码，并证明了许多有用的启动属性。当然，维护父指针会使程序员的生活更加困难，因为一旦更改树中的一个节点，就必须更改其所有子节点的父指针，这很痛苦。

因为对列表和树的很多思考都受到了 FP 的影响，它不包括父指针或双向链表，并且因为维护父指针是一项可能引入错误的棘手业务，所以许多 C 树实现不使用父指针.

* * *

另外，另一个注意事项：您询问使用链表与堆栈和队列的双向链表。不需要使用双向链表来实现堆栈，因为除了第一个元素（如果堆栈是可变的，第二个元素）之外，您不需要遍历任何元素的效率。有一个可爱的技巧来实现一个带有两个堆栈的队列，它提供了摊销的恒定时间队列操作。但是，如果您不使用它，那么队列对于双向链表或数组也是一个不错的用例。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-03T07:13:06.837

树很少需要用于常规/简单操作的父指针。只有当你在做一些奇特的事情（比如从叶子到节点回溯路径）时，才可能需要父指针。

> 有什么历史原因吗？如果仅仅因为 RAM/DISK 容量的限制，我认为我们可以放弃没有父节点的解决方案，不是吗？

还有一些历史原因。此外，内存限制要求您*使用*最小、最紧凑的结构。即使到今天，也有一些嵌入式系统对内存有严格的要求。此外，您不会真的想弄乱现有的有效代码，所以这些东西会坚持下去。

> 所以我的问题是为什么有一些基于没有父节点的结构的解决方案？

可能是因为他们的应用程序不需要经常访问父级。请注意，这是典型的时空权衡。

> 就像链表和双链表一样，我们应该使用双链表来实现堆栈和队列吗？

这取决于您的应用程序以及您的数据结构需要为每个操作提供的保证。此外，您可能有兴趣查找[XOR 链表](http://en.wikipedia.org/wiki/XOR_linked_list)！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-03T07:10:46.197

对于许多算法，父指针是多余的。然而，它们确实会产生内存开销和额外的算法复杂性。

> 就像链表和双向链表一样......

不同之处在于后者可以执行更多具有`O(1)`时间复杂度的操作。成本是额外的内存开销。换句话说，存在[时间-记忆权衡](http://en.wikipedia.org/wiki/Space%E2%80%93time_tradeoff)。

> 我们应该使用双向链表来实现堆栈和队列吗？

两者都可以使用双向链表来实现。然而，对于这两种结构中的一种（我留给你来确定是堆栈还是队列！），*双向链表*的额外开销绝对不会买任何东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T07:08:53.603

仅当您有直接“跳入树”的代码时，您才需要父节点。例如，在 Web 浏览器中，您总是在事件处理程序中获取 DOM 元素，并且必须从那里向上遍历 DOM 树，以找到一些父 HTML 元素。

但是，在许多数据结构中，您通常从根开始向下走，深度优先或广度优先 - 没关系，您知道从哪里开始，因此不需要父引用。

[http://en.wikipedia.org/wiki/Depth-first_search](http://en.wikipedia.org/wiki/Depth-first_search)

[http://en.wikipedia.org/wiki/Breadth-first_search](http://en.wikipedia.org/wiki/Breadth-first_search)

基本上，您的算法决定了您的数据结构。两者结合在一起，考虑一个没有另一个是没有用的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-03T07:08:56.817

二叉树没有定义需要引用父节点的操作。你总是从上到下遍历。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-11-01T12:47:47.087

大多数平衡树，如红黑树和 AVL 树，确实在其节点结构中嵌入了父指针。它们是具有一些额外属性的二叉搜索树。原因是它使执行必要的重新平衡操作变得更加简单。

还有一些没有父指针的场景非常麻烦。

考虑一棵二叉搜索树，然后从中随机选择一个受害者节点。你怎么把它从树上移走？如果没有父指针，您将不知道它在树中的哪个位置，因此您必须执行搜索以找到其父指针，以便知道要更新的边缘。使用父指针，您可以大致如下进行：

```
parent = victim->parent;
if (parent) {
    if (parent->left == victim) {
        parent->left = NULL;
    } else {
        parent->right = NULL;
    }
}
... free(victim); 
```

另一个没有父指针的棘手操作是查找节点后继。特别是如果树允许存储具有相同键值的多个对象，如果您正在实现多重集，则需要这样做。但是有了它们，这很容易：

```
bstree *successor(bstree *node) {
    // If node has a right child, the successor is the minimum 
    // node of that subtree.
    if (node->right) {
        return minimum(node->right);
    }
    // If node hasn't, we look upwards.
    bstree *x = node->parent;
    while (x && node == x->right) {
        node = x;
        x = node->parent;
    }
    return x;
} 
```

父指针带走了数据结构的美感。他们这样做是为了让您不能再将一棵树视为树木的组合，这是一种耻辱。但是在大多数树结构的实际实现中，我已经看到它们存在，因为它们非常有用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-03T07:10:35.740

一些平衡树的实现确实维护了一个指向父级的指针。显然[Glib 平衡树](http://developer.gnome.org/glib/unstable/glib-Balanced-Binary-Trees.html)的[节点](http://git.gnome.org/browse/glib/tree/glib/gnode.h)包含这样的指针。

但是，当您有一个遍历树的内部递归函数时，您可以对其进行编码，以便它在递归调用期间同时传递树及其直接父级。

# mysql - 内部连接上的 MYSQL 语法错误

> ID：10426638
> 
> 赞同：-1
> 
> 时间：2012-05-03T07:03:48.733
> 
> 标签：mysql, syntax

我收到此错误 - 在第 5 行的“int inner join categories as cat on int.categoryID = cat.categoryID GRO”附近使用正确的语法

我的 sql -

```
SELECT interest_desc, categoryID, category_desc, MAX(num_in_cat) AS num_in_cat 
    FROM
    (
       SELECT int.interest_desc, int.category_ID, cat.category_desc, 
              COUNT(categoryID) AS num_in_cat
       FROM 
          interests as int 
          inner join categories as cat 
             on int.categoryID = cat.categoryID

       GROUP BY int.interest_desc, int.categoryID
     ) subsel 
     GROUP BY interest_desc, categoryID" 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T07:09:07.783

您需要反引号您`int`的 s 因为它们是保留关键字。

或者，使用不同的别名。

```
SELECT interest_desc, categoryID, category_desc, MAX(num_in_cat) AS num_in_cat  
FROM 
( 
   SELECT `int`.interest_desc, `int`.category_ID, cat.category_desc,  
          COUNT(categoryID) AS num_in_cat 
   FROM  
      interests as `int`  
      inner join categories as cat  
         on `int`.categoryID = cat.categoryID 

   GROUP BY `int`.interest_desc, `int`.categoryID 
 ) subsel  
 GROUP BY interest_desc, categoryID" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T07:14:17.760

`interests`为您的表使用不同的别名。

另外 - 您需要整理以下内容：

*   `categoryID`vs `category_ID`- 哪一个是正确的？
*   `count(categoryID)`是模棱两可的，因为它`categoryID`同时存在于`categories`和`interests`表中

假设该列`categoryID`在两个表上，以下应该有效：

```
SELECT interest_desc, categoryID, category_desc, MAX(num_in_cat) AS num_in_cat 
    FROM
    (
       SELECT intr.interest_desc, intr.categoryID, cat.category_desc, COUNT(cat.categoryID) AS num_in_cat
       FROM interests as intr inner join categories as cat on 
intr.categoryID = cat.categoryID
       GROUP BY intr.interest_desc, intr.categoryID
     ) subsel 
     GROUP BY interest_desc, categoryID; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T07:06:37.663

命名表`int`是一个问题。它可以通过引用表名来解决，但你真的应该重命名它。为了你的理智，以及那些将在你之后努力的人。

# java - 您如何在 Nexus 存储库管理器中挂钩 Maven 工件的版本？

> ID：10426640
> 
> 赞同：6
> 
> 时间：2012-05-03T07:04:20.233
> 
> 标签：java, maven, nexus

我正在针对 Nexus 存储库管理器中托管的 Apache Maven 存储库中的各种 Lucene 和 Solr Maven 工件进行构建。工件是版本`4.0-SNAPSHOT`，每天都会更新，旧的工件会定期删除。

我想知道如何将工件与特定日期挂钩，因此每当 Maven 客户端请求时`solr-core 4.0-SNAPSHOT`，即使上游有更新的版本，它也会获得相同的版本。

我还想知道如何明确更新到最新`4.0-SNAPSHOT`版本，但仍保留所有以前下载的版本。

具体来说，“Apache Snapshots”存储库是安装 Nexus 时设置的默认存储库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T07:17:35.003

您可以使用[版本 maven 插件](http://mojo.codehaus.org/versions-maven-plugin/)固定到特定版本的 SNAPSHOT，只要 SNAPSHOT 在相应的存储库中可用，该版本才有效。但我建议使用存储库管理器并将 SNAPSHOT 放入本地存储库并与它们一起使用。还有可能的是获得一个特定的 SNAPSHOT 并从中发布一个内部版本，例如 4.0.1-INTERNAL 之类的，并在此基础上提供更长的可用时间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T20:53:06.540

将快照部署到存储库服务器时，每个新部署实际上都部署为带有时间戳的版本，并附加了迭代器编号。如果您想使用特定版本，您只需使用快照的时间戳版本而不是 -SNAPSHOT。

例如查看[https://repository.apache.org/content/groups/snapshots/org/apache/maven/artifact/maven-artifact/3.0-alpha-2-SNAPSHOT/](https://repository.apache.org/content/groups/snapshots/org/apache/maven/artifact/maven-artifact/3.0-alpha-2-SNAPSHOT/)

您可以将此工件用作

```
<groupId>org.apache.maven.artifact</groupId>
<artifactId>maven-artifact</artifactId>
<version>3.0-alpha-2-SNAPSHOT</version> 
```

每次部署新快照时都会更改它，或者您可以使用

```
<groupId>org.apache.maven.artifact</groupId>
<artifactId>maven-artifact</artifactId>
<version>3.0-alpha-2-20090214.020928-1</version> 
```

这将保持不变。但是请记住，快照存储库本质上不是静态的，这些工件可能会完全消失。仅当您使用可以控制的内部存储库服务器时才这样做，从而确保这些快照不会在您身上消失。

另一种方法是实际删除一个版本并使用它..

# ruby-on-rails - 无法使用 devise_cas_authenticable 进行身份验证

> ID：10426641
> 
> 赞同：1
> 
> 时间：2012-05-03T07:04:24.023
> 
> 标签：ruby-on-rails, ruby, devise

我正在遵循[https://github.com/nbudin/devise_cas_authenticable](https://github.com/nbudin/devise_cas_authenticatable)上的说明。但是，使用它`before_filter :authenticate_user!`仍然会使应用程序尝试使用设计的数据库身份验证策略进行身份验证。下面是设计配置文件：

```
Devise.setup do |config|
  require 'devise/orm/active_record'

  config.cas_base_url = 'https://cas.uwaterloo.ca/cas'

  # If true, uses the password salt as remember token. This should be turned
  # to false if you are not using database authenticatable.
  config.use_salt_as_remember_token = true

  # ==> Configuration for :token_authenticatable
  # Defines name of the authentication token params key
  config.token_authentication_key = :auth_token

  # The default HTTP method used to sign out a resource. Default is :delete.
  config.sign_out_via = :delete
end 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:47:49.373

你`:database_authenticatable`在你的用户模型中替换了吗？

```
devise :cas_authenticatable, ... 
```

请参阅[`devise_cas_authenticatable`](https://github.com/nbudin/devise_cas_authenticatable)github 上的自述文件。

# php - 我想在带有受保护静态的 oop 中使用

> ID：10426647
> 
> 赞同：-1
> 
> 时间：2012-05-03T07:05:02.323
> 
> 标签：php, oop, static, protected

我正在学习oop。我试图涵盖 oop 并理解 oop 背后的想法。我有代码，我想使用保护静态来理解。我声明属性：`protected static $formula`. 我打电话给 `protected static $formula`by `self :: $formula = $this->width * $this->height;`。当我在调试器中运行代码时，我得到了`$formula = null`. `$formula' 应该是 = 10000。我不知道为什么？谢谢你的帮助。这是我的代码：

```
<?php
Class Rectangle {

//Declare the attributes:
public $width = 0;
public $height = 0;
protected static $formula = 0;

//Method to set the dimensions.
Function set_size($w = 0, $h = 0) {
        $this->width = $w;
        $this->height = $h;
        self :: $formula = $this->width * $this->height;
}

//Method to calculate and return the area.
function get_area() {
            $this->set_size(100,100);
    return ($formula);
    }

}

$rect = new Rectangle ();
echo $rect->get_area(); 
```

?>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T07:07:29.770

您的代码有一个小错误`get_area`：

```
return ($formula); 
```

应该：

```
return self::$formula; 
```

# security - 强化验证码安全性

> ID：10426648
> 
> 赞同：0
> 
> 时间：2012-05-03T07:05:05.280
> 
> 标签：security, session-variables, captcha

几乎所有网站都使用验证码图像来保护其表单免受垃圾邮件的侵害。但这是最安全的方式吗？据我了解，CAPTCHA 的想法是用包含一些“难以识别”文本的图像来挑战用户，这样如果访问者是人类（而不是机器人），他/她将能够发布数据而不是机器。该网站发送验证码（图像）和一个会话变量，其中可能包含验证码图像的散列版本（正确答案但散列）。用户提交表单，服务器必须确保他/她输入的字母的散列 = 会话变量中包含的散列。好吧，如果我（垃圾邮件发送者）编写了一个模拟相同请求并将其发送到服务器的软件怎么办？换句话说，如果验证码是 abc123 并且哈希（在会话变量中，可以使用任何 HTTP 嗅探器读取）是 xyz345（考虑这是一个 32 个字符的字符串）并且我在发布请求中将此数据发送到服务器？然后我开始更有创意，我把这段代码放在一个 10,000 循环中，这将用垃圾邮件数据淹没服务器！现在验证码是否安全？他们有什么选择可以让我面对这样的威胁吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:44:57.547

您的假设是错误的：客户端既不能读取会话数据，也不能使用验证码来减轻 DOS 攻击。

Captcha 是一种挑战/响应技术，其中服务器向客户端发出一个只能由人类解决的挑战。大多数验证码存在的光学字符识别 (OCR) 挑战只是一种变体，但肯定是一个很好的变体，因为 OCR 对于大多数有文化的人来说更容易，但对计算机来说却是个问题。

但是，如果对挑战的响应很容易猜测、推导或以其他方式获得，那么任何验证码都是毫无价值的。在隐藏的表单字段中以普通形式或派生形式发送预期的响应就是这样一个例子。将响应作为参数传递给 Captcha 图像是另一个示例。

这就是为什么预期的响应应该保留在服务器端，作为会话数据，客户端不可读，因为只有会话的标识符被传输。

您的第二个担忧是验证码无法阻止 DOS 攻击，这是正确的。同样，这不是验证码应该解决的原因。验证码的发明是为了“区分计算机和人类”，仅此而已。它们只能帮助防止自动垃圾邮件成功。但坦率地说，强烈的挑战/响应生成很可能导致 DOS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T07:27:44.640

验证码不是防止窃取会话 cookie 的方法。如果您想要安全会话，请使用例如 HTTPS。

Captcha 不能防止 (D)DOS 攻击，如果您希望您的服务器能够抵御每秒 10.000 个垃圾邮件请求，请采取相应的对策。

验证码的唯一目的是确定请求是来自人还是机器。这将阻止创建帐户等的自动脚本，但您仍然必须通过其他方式保护您的网站，包括验证码的安全性。公开验证码答案或让用户决定要解决哪个验证码的服务器做错了。

理想的验证码对于每个人来说都是微不足道的，但对于每台机器来说都是不可能的。所以这对用户来说应该不是一个挑战。不幸的是，机器非常好，所以你必须提出挑战，这对我们来说也很困难。

# php - PHP - SQL 脚本创建者

> ID：10426657
> 
> 赞同：0
> 
> 时间：2012-05-03T07:05:34.760
> 
> 标签：php, mysql, sql, performance, function

**我需要的：**

*一个高效的 SQL 脚本生成器来替换下面的。*

**的背景。**

一个非常简单的程序，但我需要一种更有效的方法来生成它，我拥有此代码的原因是我需要其他开发人员能够在我的平台和数据库表上创建“模块”，但我阻止他们拥有完全访问权限对于核心数据库，他们必须使用我的 $api->database-> 访问层来访问他们的表/数据。它阻止对我程序核心部分的任何请求。

下面是我希望如何使用这些函数来构建 SQL 创建表脚本。SqlField 类/函数只返回传递的值的平面数组，没什么特别的。

```
//The structure of the params are..

//$fields[] = SqlField::create($f_name, $f_type, $null, $auto_inc, $is_pk, $is_unique);
$fields[] = SqlField::create('id', 'int(7)', 0, 1, 1, 1);

$sql = $sqlTable->createTable('MyTableName', $fields ); 
```

下面是我快速编写的当前函数，但它很快变得混乱并且不完整。

```
public function createTable($tableName, $fields = array()) {

    $sql="CREATE TABLE xmod_".$tableName." ( \r\n";
        $isinit = true;

        foreach($fields as $field) {

            $sql .= ($isinit)? "" : ", \r\n" ;

            $isinit = false;

            $sql .= "".$field[0]." ".$field[1]." ";

            if($field[2] == true) {
                $sql .= "NOT NULL ";
            }

            if($field[3] == true) {
                $sql .= "auto_increment ";
            }   

        }

        $isinit = true;

        //Work on the primary keys
        foreach($fields as $field) {

            if($field[4] == 1) {

                $sql .= ($isinit)? "" : ", \r\n" ;
                $isinit = false;

                $sql .= "PRIMARY KEY (".$field[0].")";
            }

        }

        $isinit = true;

        //Work on the unique fields
        foreach($fields as $field) {

            if($field[5] == 1) {

                $sql .= ($isinit)? "" : ", \r\n" ;
                $isinit = false;

                $sql .= "UNIQUE id (".$field[0].")";
            }

        }           

        $sql .= "\r\n )";

        return $sql;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T08:42:58.967

虽然我自己没有尝试过，但 CodeIgniter 提供了类似的东西。[http://codeigniter.com/user_guide/database/forge.html](http://codeigniter.com/user_guide/database/forge.html)

（从评论复制）

# asp.net - 如何使单击 div 触发 onitemcommand 事件

> ID：10426658
> 
> 赞同：1
> 
> 时间：2012-05-03T07:05:39.613
> 
> 标签：asp.net, repeater, itemcommand

我的中继器代码如下所示，

```
<asp:Repeater ID="rep_test" runat="server" onitemcommand="rep_test_ItemCommand">
<ItemTemplate>
<div runat="server" CommandName="abc" CommandArgument='123'>
</div> 
```

我想要的是，当我点击 div 它应该触发 onitemcommand 事件，

是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T08:14:10.097

添加 javascript 和链接按钮的唯一方法。单击 div 单击该链接按钮。

您可以按照以下链接中的示例进行操作

[http://forums.asp.net/t/1379603.aspx](http://forums.asp.net/t/1379603.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-25T01:11:20.040

我知道这有点旧，但我只是自己搜索了一下。我使用的答案是 Ashwini Verma 的，但我不知道答案是否足够清楚，或者我可能超出了预期，所以......

我需要几个提供 CommandName 的图像按钮。但是，我还需要在按钮上添加文字，我并不想用当前图像和文字制作新图像。这就是我使用 LinkBut​​ton 作为“刷新”解决问题的方法：

```
<asp:Linkbutton ID="Something" runat="server" CommandName="Refresh" Text="<div class='topbutton'><div align='center'><img height='21px' width='21px' src='imagepath/toggle.png' alt='Refresh'/></div>Refresh</div>"></asp:LinkButton> 
```

我是该网站的新成员，还不能发布按钮的图片，但我希望你能明白。

# .net - 发送不带接受/拒绝选项的 Outlook 会议请求

> ID：10426661
> 
> 赞同：3
> 
> 时间：2012-05-03T07:05:43.020
> 
> 标签：.net, outlook

我正在使用我的 .NET 程序发送 Outlook 会议请求，使用以下内容作为源： [发送 Outlook 会议请求而不使用 Outlook？](https://stackoverflow.com/questions/461889/sending-outlook-meeting-requests-without-outlook) 这对我来说效果很好，但我仍然有一个问题/疑问。

如果我直接使用 Outlook 发送邀请，我可以定义我不希望受邀人员的回答（接受、拒绝……）。因此，如果受邀者打开我的邮件，他们看不到接受、拒绝...按钮。

如果我使用 .NET 程序发送自动生成的邮件，我也想要这种行为。是否可以选择以编程方式停用答案功能？如果接收者打开我的自动生成的邮件，他们不会看到接受、拒绝...按钮？

我已经尝试设置 RSVP = False，DISALLOW-COUNTER = True：

```
BEGIN:VEVENT
ATTENDEE;CN=receiver@mail.de;RSVP=FALSE:receiver@mail.de
SET X-MICROSOFT-DISALLOW-COUNTER:TRUE
.
.
.
END:VEVENT 
```

我用 Outlook 保存了两个 ICS 文件——一个启用了答案，一个禁用了答案。以上两行是唯一不同的行，但它在我生成的消息中不起作用。如果我打开邮件，它仍然会显示接受、拒绝、... 按钮。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-21T22:27:14.653

我相信您在谈论 Outlook 的“请求响应”选项。如果未选中，Outlook 会为所有与会者生成 RSVP=FALSE 的 .ics 文件。当与会者收到此消息时，他们仍会看到 Accept、Tentative、Decline 按钮，但这些按钮不会发送响应，他们只会确定如何或是否将此邀请添加到他们自己的日历中。

如果选中“请求响应”，则所有与会者都使用 RSVP=TRUE，这将导致他们的接受/暂定/拒绝按钮也显示“立即发送响应”选项，不要发送响应（这相当于请求时发生的情况）未检查响应），并在发送前编辑响应。

# c# - System.Transactions.TransactionException：事务已被隐式或显式提交或中止

> ID：10426663
> 
> 赞同：1
> 
> 时间：2012-05-03T07:05:50.197
> 
> 标签：c#, asp.net, enterprise-library, transactionscope

我有以下代码：

```
private void MigrateInTrackingChannelsDbTable(Guid toSsoId, string ctid)
{
    Database database = DatabaseFactory.CreateDatabase("TrackingChannels");
    try
    {
        using (DbCommand command = database.GetStoredProcCommand("usp_TrackingChannels_MigrateToolbar"))
        {
            database.AddInParameter(command, "@ToSSOId", DbType.Guid, toSsoId);
            database.AddInParameter(command, "@CTID", DbType.String, ctid);

            database.ExecuteNonQuery(command);
        }
    }
    catch (Exception ex)
    {
        Log.Application.Error(
            string.Format("CPUserService: MigrateInTrackingChannelsDbTable failed with toSsoId:{0}, ctid:{1}", toSsoId, ctid), ex);
        throw;
    }
} 
```

但得到以下错误：

> System.Transactions.TransactionException：事务已被隐式或显式提交或中止。System.Runtime.InteropServices.COMException：事务已被隐式或显式提交或中止（来自 HRESULT 的异常：0x8004D00E）错误代码 = -2147168242 应用程序域：/LM/W3SVC/819313558/Root/ToolbarBackOffice-2-129804733861185000 级别：错误记录器：应用程序线程 ID：1 错误消息：从 efrat96811@edokleinman.com 迁移到 efrat98545@edokleinman.com 失败，会话来自：efrat96811@edokleinman.com 来源：
> 
> TransactionException：事务已被隐式或显式提交或中止。AT：在 System.Transactions.Oletx.OletxTransactionManager.ProxyException(COMException comException) 在 System.Transactions.TransactionInterop.GetExportCookie(Transaction transaction, Byte[] 下落) 在 System.Data.SqlClient.SqlInternalConnection.GetTransactionCookie(Transaction transaction, Byte[] whereAbouts) 在 System.Data.ProviderBase.DbConnectionInternal.ActivateConnection(Transaction transaction) 在 System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject) 在 System.Data.ProviderBase 的 System.Data.SqlClient.SqlInternalConnection.EnlistNonNull(Transaction tx) System.Data.ProviderBase.DbConnectionClosed 处的 .DbConnectionFactory.GetConnection(DbConnection owningConnection)。*显示类8.b*D:\Conduit\RnD\Server\Services\CPInfrastructure\CPUserInfrastructure\CPUserInfrastructure\Services\CPUserService.cs 中的 _7()：D:\Conduit\RnD\Server 中 CPInfrastructure.Helpers.TransactionHelpers.RunInTransaction（动作逻辑）的第 386 行\Services\CPInfrastructure\CPInfrastructure-Dev\Helpers\TransactionHelpers.cs：D:\Conduit\RnD\Server\Services\CPInfrastructure\CPUserInfrastructure\CPUserInfrastructure\ 中 CPUserInfrastructure.Services.CPUserService.MigrateCPuserToolbar（Guid toSsoId，String ctid）的第 17 行Services\CPUserService.cs：D:\Conduit\RnD\Server\WebSites\Writers\Dev-Accounts-4.0\AdminServices\Admin 中 BrandToolbar.Admin.ToolbarBackOffice.Toolbar.AccountsManagement.btnMTMigrate_Click(Object sender, EventArgs e) 的第 390 行.Toolbar\Integration\BrandToolbar.Admin.ToolbarBackOffice\Toolbar\AccountsManagement.aspx.cs：第 142 行
> 
> COMException：事务已被隐式或显式提交或中止（来自 HRESULT 的异常：0x8004D00E）AT：在 System.Transactions.Oletx.ITransactionShim.Export（UInt32 whereaboutsSize，Byte[] whereabouts，Int32& cookieIndex，UInt32& cookieSize，CoTaskMemHandle& cookieBuffer）在 System.Transactions.TransactionInterop.GetExportCookie(Transaction transaction, Byte[] 行踪)

# unit-testing - 使用 PHPUnit 测试模块化 Zend Framework 应用程序

> ID：10426664
> 
> 赞同：2
> 
> 时间：2012-05-03T07:05:50.763
> 
> 标签：unit-testing, zend-framework, phpunit

我有一个带有模块的 Zend Framework 应用程序，我想设置 PHPUnit 测试。

这是项目文件夹

```
- project/
   -application/
      - controllers/
          - indexController.php
      - modules/
         - mycore/
            - controllers/
                -  ActionsController.php
            - views/
                - ...
   - ...
   - tests/
      - application/
         - controllers/
            -IndexControllerTest.php
         - modules/
            - mycore/
                - controllers/
                   - ActionsControllerTest.php
      ControllerTestCase.php
      Bootstrap.php
      phpunit.xml 
```

这是测试文件夹中每个设置文件的内容

ControllerTestCase.php

```
require_once 'Zend/Application.php';
require_once 'Zend/Auth.php';
require_once 'Zend/Test/PHPUnit/ControllerTestCase.php';

class ControllerTestCase extends Zend_Test_PHPUnit_ControllerTestCase {
    protected $application

    public function setUp() {
        $this->bootstrap = array($this, 'appBootstrap');
        parent::setUp();
    }

    public function appBootstrap() {
        $this->application = new Zend_Application(
            APPLICATION_ENV,
            APPLICATION_PATH . '/configs/application.ini');
        $bootstrap = $this->application->getBootstrap()->bootstrap();

        $front = Zend_Controller_Front::getInstance();
        $front->setControllerDirectory(APPLICATION_PATH . '/controllers','default');
        $front->addModuleDirectory(APPLICATION_PATH . '/modules');

        return $bootstrap;
    }

    public function tearDown() {
        Zend_Auth::getInstance()->clearIdentity();
        $this->resetRequest();
        $this->resetResponse();
        parent::tearDown();
    }

    protected  function _doLogin($identity = null) {
        if ( $identity === null ) {
            $identity = $this->_generateFakeIdentity();
        }
        Zend_Auth::getInstance()->getStorage()->write( $identity );
    }

    protected function _generateFakeIdentity() {
        $identity = new stdClass();
        $identity->RecID                     = 3;
        $identity->user_firstname            = '****';
        $identity->user_lastname             = '********';
        $identity->confirmed                 = true;
        $identity->enabled                   = true;

        return $identity;
    }

    protected  function _doLogout() {
        Zend_Auth::getInstance()->clearIdentity();
    }
} 
```

引导程序.php

```
error_reporting(E_ALL);
// Define path to application directory
defined('APPLICATION_PATH')
    || define('APPLICATION_PATH', realpath(dirname(__FILE__) . '/../application'));

// Define application environment
defined('APPLICATION_ENV')
    || define('APPLICATION_ENV', (getenv('APPLICATION_ENV') ? getenv('APPLICATION_ENV') : 'development'));

// Ensure library/ is on include_path
set_include_path(implode(PATH_SEPARATOR, array(
    realpath(APPLICATION_PATH . '/../library'),
    get_include_path(),
)));

require_once 'Zend/Loader/Autoloader.php'; 
```

phpunit.xml

```
<phpunit bootstrap="./bootstrap.php" colors="true"
convertErrorsToExceptions="true"
convertNoticesToExceptions="true"
convertWarningsToExceptions="true" >
    <testsuite name="Application Test Suite">
        <directory>./</directory>
    </testsuite>
    <testsuite name="Library Test Suite">
        <directory>./library</directory>
    </testsuite>

    <filter>
        <!-- If Zend Framework is inside your project's library, uncomment this filter -->
        <!-- 
        <whitelist>
            <directory suffix=".php">../../library/Zend</directory>
        </whitelist>
        -->
    </filter>
</phpunit> 
```

这是模块测试的内容

ActionsControllerTest.php

```
class Mycore_ActionsControllerTest extends Zend_Test_PHPUnit_ControllerTestCase
{

    public $module;

    public function setUp()
    {
        $this->module = 'mycore';
        $this->bootstrap = new Zend_Application(APPLICATION_ENV, APPLICATION_PATH . '/configs/application.ini');
        $_SERVER['HTTP_HOST'] = 'unittest_host';
        $_SERVER['REQUEST_URI'] = '/';
        parent::setUp();
    }

    public function testIndexAction()
    {
        $this->dispatch("/");
        // assertions
        $this->assertModule('mycore');
        $this->assertController('actions');
        $this->assertAction('index');        
    }

} 
```

这是结果：

```
Starting test 'IndexControllerTest::testIndexAction'.
.
Starting test 'Mycore_ActionsControllerTest::testIndexAction'.
F

Time: 1 second, Memory: 14.00Mb

There was 1 failure:

1) Mycore_ActionsControllerTest::testIndexAction
Failed asserting last module used <"default"> was "mycore"

/project/library/Zend/Test/PHPUnit/ControllerTestCase.php:929
/project/tests/application/modules/mycore/controllers/ActionsControllerTest.php:21 
```

一个模块中的所有测试都工作正常，但是当我开始测试模块控制器时，我得到了这个错误。我在整个互联网上搜索但找不到解决此错误的方法，所以我希望有人能帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T08:50:04.913

您得到的不是错误，而是失败的测试。

这可能是因为您正在调度到“/”，它在默认模块的默认控制器中查找默认操作。如果您发送到“/mycore”或“/mycore/actions/index”，您可能会发现测试通过了。

为了让您的测试在不更改的情况下通过，您需要将[默认路由更改](http://framework.zend.com/manual/en/zend.controller.router.html#zend.controller.router.default-routes)为指向“/mycore/actions/index”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T10:34:28.057

我遇到过同样的问题。对我来说，这是因为请求被重定向到“ErrorController”。您可以通过评论您的 assertModule 行来检查这一点。如果您遇到类似这样的错误“断言使用的最后一个控制器失败 <"error"> 是 "actions"'，我们处于相同的情况。这种错误可能有多种原因。你必须抓住错误。调度后，您可以像这样检索异常：

```
$response = $this->getResponse();
$exceptions = $response->getException();
// do whatever you want, mail, log, print 
```

# asp.net - 转义表单值

> ID：10426665
> 
> 赞同：0
> 
> 时间：2012-05-03T07:05:51.133
> 
> 标签：asp.net

我有一个 ASP.NET 登录表单，其中的值被传递给第三方工具以登录到他们的门户。有一个问题会导致登录失败，如果该值，例如用户名是这样的 Kukkamäki，其中有一个非英语字符。第三方门户网站说，表单值在发送给他们之前应该被转义。我试过用这个 \" 但这不起作用。

关于如何转义表单值的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:08:53.943

在将其发送到服务器之前，您应该使用：

`encodeURIComponent`将字符编码为 a 的函数`utf8`。

那么你应该使用这个值作为发布......

此外，请确保您的列 DB 类型为：（`nvarchar`如果您使用 mssql）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T18:31:06.583

两种选择，具体取决于您的需要：

*   如果您从客户端javascript调用他们的网络服务，请使用`escape()`函数（[链接）](http://www.w3schools.com/jsref/jsref_escape.asp)
*   如果您从服务器端代码调用他们的网络服务，请使用`HttpUtility.UrlEncode()`方法（[链接）](http://msdn.microsoft.com/en-us/library/vstudio/4fkewx0t%28v=vs.100%29.aspx)

# java - Hibernate sessionfactory 每次启动时都会删除我的数据库内容？

> ID：10426667
> 
> 赞同：1
> 
> 时间：2012-05-03T07:06:01.997
> 
> 标签：java, hibernate, servlets, derby

我使用 Hibernate 将 Java 类保存到 derby 数据库。当我运行我的代码时，我第一次运行我的类时一切都很好，我可以从我的数据库中创建并回调一个实例，即使我关闭了我的服务器 Tomcat，它仍然存在。

当我加载备份我的服务器时，我发现一旦我返回以下类，我的数据库表就会被擦除，该函数用于创建我用来创建会话的 sessionfactory，所以我没有多个工厂，它由 ServletContextListener 调用，以便在调用我的任何 servvlet 之前调用它，因此每次运行维护一个工厂。

有谁知道为什么它一直在擦除我的数据库，它不只是一个句柄吗？

公共类 CreateMysessionfactory { 私有 SessionFactory 工厂；

```
public CreateMysessionfactory() {

    AnnotationConfiguration config = new AnnotationConfiguration();

    config.addAnnotatedClass(UPS.class);

    config.configure();

    factory = config.buildSessionFactory();

}

public SessionFactory getFactory() {
    return factory;
} 
```

下面是调用上述方法的 ServletContextListener，它可能会有所帮助。

```
 public void contextInitialized(ServletContextEvent event) {
    // Create the database connection.
    ServletContext ctx = event.getServletContext();

    // Create the database:grab my hibernate object here
    CreateMysessionfactory db = new CreateMysessionfactory();
    ctx.setAttribute("db", db);

    ctx.setAttribute("DbSessionFactory", db.getFactory());

    ItemDataAccessObject dao = new ItemDataAccessObject(db.getFactory());
    Item u = new Item();
    //Item u =dao.getItem(0);
    dao.updateItem(u); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T07:09:57.130

所有实体在启动时都会被删除，因为您已经以相同的方式设置了休眠配置，

实际上属性 HBM2DDl 有这些值 validate | 更新 | 创建 | 创建删除

您可能已将其设置为 create-drop，这意味着在启动时删除并创建新模式，从而产生效果。

您可能希望更改要验证的值，这仅符合架构完好无损

如果您需要更多详细信息，请参阅链接[http://docs.jboss.org/hibernate/core/3.3/reference/en/html/session-configuration.html](http://docs.jboss.org/hibernate/core/3.3/reference/en/html/session-configuration.html)

# php - php + javascript 字符串检查

> ID：10426668
> 
> 赞同：1
> 
> 时间：2012-05-03T07:06:34.410
> 
> 标签：php, regex

我有一个字符串未能通过以下要求：-

```
$uid = ca11a15e (the value called from database)

function _checkSn($uid)    
{
   $match1 = preg_match('/^p[a-z\d][a-z\d][1-6][a-z]\d{2}e$/',$uid);
   $match2 = preg_match('/^p[a-z\d][a-z\d]school$/',$uid);
   $match3 = preg_match('/^p[a-z\d][a-z\d]master$/',$uid);
   $match4 = preg_match('/^p[a-z\d][a-z\d]ee01$/',$uid);
   $doesMatch = ($match1 || $match2 || $match3 || $match4);
   return $doesMatch; 
} 
```

实际上，相位在说什么？我该如何修改它以便 $uid 可以通过检查？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T07:14:18.027

**简短的回答**

您的 uid 不以“p”开头。所有规则都在检查它是否以“p”开头。

**长答案**

```
$match1 = preg_match('/^p[a-z\d][a-z\d][1-6][a-z]\d{2}e$/',$uid); 
```

这是检查以下格式的内容：字母 p、小写字母、1 位数字、小写字母、1 位数字、从 1 到 6 的数字、小写字母、数字（1 或 2 位数字）、字母 e

```
$match2 = preg_match('/^p[a-z\d][a-z\d]school$/',$uid); 
```

这是检查格式的东西：字母 p、小写字母、1 位数字、小写字母、1 位数字、单词“学校”

```
$match3 = preg_match('/^p[a-z\d][a-z\d]master$/',$uid); 
```

这是检查以下格式的内容：字母 p、小写字母、1 位数字、小写字母、1 位数字、单词“master”

```
$match4 = preg_match('/^p[a-z\d][a-z\d]ee01$/',$uid); 
```

这是检查格式：字母 p、小写字母、1 位数字、小写字母、1 位数字、字符串 'ee01'

**编辑**

如果您希望在匹配开始时将“c”添加到允许的字符，您可以，例如：

```
$match1 = preg_match('/^[cp][a-z\d][a-z\d][1-6][a-z]\d{2}e$/',$uid); 
```

`[cp]`而不是`p`检查 c 或 p 作为第一个字母。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T07:20:20.040

```
return (preg_match('/^p[a-z\d][a-z\d][1-6][a-z]\d{2}e$/',$uid) 
|| preg_match('/^p[a-z\d][a-z\d]school$/',$uid) 
|| preg_match('/^p[a-z\d][a-z\d]master$/',$uid) 
|| preg_match('/^p[a-z\d][a-z\d]ee01$/',$uid)); 
```

uid 匹配模式，如果它是......

*   “p”，小写字母或数字的两倍，后跟
*   一个数字 1-6，另一个字母，两个数字，“e”或“school”或“master”或“ee01”

例如，这将匹配：“p6t3h56e”（第一个模式）或“p9hschool”（第二个）。

“ca11a15e”将不匹配其中任何一个，因为它们都需要在开头使用“p”。

顺便说一句，这可以缩短为：

```
return (preg_match('/^p[a-z\d]{2}([1-6][a-z]\d{2}e|school|master|ee01)$/',$uid); 
```

所有的uid都会以ac开头吗？也许你的意思是这个，它会匹配“ca11a15e”（注意 c 而不是 p）：

```
return (preg_match('/^c[a-z\d]{2}([1-6][a-z]\d{2}e|school|master|ee01)$/',$uid); 
```

# c++ - 如何检查路径在 boost::filesystem 中是否有效？

> ID：10426671
> 
> 赞同：7
> 
> 时间：2012-05-03T07:06:40.847
> 
> 标签：c++, boost

我正在`boost::filesystem::path`从编辑字段中设置一个。我注意到构造函数很乐意接受文件名的无效字符。

如何`boost::filesystem`检查`boost::filesystem::path`对象是否代表有效的文件名？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T07:09:56.380

看看这里：

[http://www.boost.org/doc/libs/release/libs/filesystem/doc/portability_guide.htm](http://www.boost.org/doc/libs/release/libs/filesystem/doc/portability_guide.htm)

这描述了用于检查文件名是否有效的各种功能。

# c# - cSharp中的组合框值

> ID：10426680
> 
> 赞同：0
> 
> 时间：2012-05-03T07:07:10.233
> 
> 标签：c#, sql, sql-server

如何拥有一个包含数据库中特定列的所有值的组合框。我有一个名为的列`StudentName`，我想要一个包含所有值的组合框`StudentName`。

```
sql = new SqlConnection(@"Data Source=PC-PC\PC;Initial Catalog=Anbar;Integrated Security=True");
adapter = new SqlDataAdapter("select * from School", sql); 
```

我应该如何继续？请提供一些代码以继续这些代码，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T07:11:35.430

```
sqlCon = new SqlConnection(@"Data Source=PC-PC\PC;Initial Catalog=Anbar;Integrated Security=True");
  SqlDataAdapter da = new SqlDataAdapter("Select StudentName from School", sqlCon);
        DataTable dt = new DataTable();
        da.Fill(dt);
        yourComboBox.DataSource = dt;
        yourComboBox.DisplayMember = "StudentName";
        yourComboBox.ValueMember = "StudentName"; 
```

还要在 ComboBox 中从数据库中读取此[填充日期](http://www.codeproject.com/Articles/8009/Populate-data-from-database-in-a-ComboBox)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T07:21:41.803

使用以下代码

```
SqlDataAdapter da = new SqlDataAdapter("Select StudentName from School", sqlCon);
DataTable dat = new DataTable();
da.Fill(dat);
cmb.DataSource = dat;
cmb.DisplayMember = "StudentName";
cmb.ValueMember = "StudentName"; 
```

# android - Android Tesseract 进度回调

> ID：10426683
> 
> 赞同：4
> 
> 时间：2012-05-03T07:07:23.897
> 
> 标签：android, tesseract

所以我终于设法让[Android Tesseract Tools](http://code.google.com/p/tesseract-android-tools/)进行编译。一切都按预期工作，除了我不介意某种进度回调。我查看了包装类和本机包装 cpp 代码，但没有任何处理进度的内容。

有没有一种简单的方法来轮询 Tesseract 以获得某种进展？我在 Tesseract 源代码上达到了顶峰，但作为一个会说 Java 的人，这让我感到害怕。

考虑到 Tesseract 在进度时间方面的可变性，给用户一个[微调器](http://i.imgur.com/hINFO.gif)并收工似乎很糟糕。如果是我，超过 30 秒没有反馈，我会重试或放弃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T13:18:05.183

首先，由于 OCR 过程可以被视为大场景中的“长时间运行的任务”，因此将其放入异步任务中。诸如 I/O、网络或图像处理之类的东西应该放在异步任务中，因为您不希望它在主 UI 线程上运行。如果用户的手机规格非常低，如果您将其留在主 UI 线程上，这将需要一些时间并最终导致应用程序无响应错误。

关于进度条，您有几个选择。如果您有一个有限的时间限制，例如 30 秒，则将进度设置为达到该时间，如果 OCR 过程快于 30 秒，则提前完成。您还可以利用底层的本机代码，但它可能不值得付出努力......

或者，在我看来，最佳方法是在 OCR 过程中设置一个圆形微调器，因为图像可能会有所不同，而且您真的不知道需要多长时间。

# java - 在单表上映射两个类

> ID：10426690
> 
> 赞同：5
> 
> 时间：2012-05-03T07:08:01.817
> 
> 标签：java, hibernate, jpa

让我有桌子

**USER**
*-id : long
-login : varchar
-weapon: varchar
-magic: varchar*

我想将此表映射到两个类（使用 Hibernate/JPA）

```
class Mag  
{   
   long id;  
   String login;  
   String weapon;  
} 
```

和

```
class Warrior  
{  
   long id;  
   String login;  
   String magic;  
} 
```

如果我发送 HQL 查询：`SELECT m FROM Mag m WHERE m.login = ?`然后我得到 Mag 实例
，如果我发送 HQL 查询：`SELECT w FROM Warrior w WHERE w.login = ?`然后我得到 Warrior 实例
我尝试做这样的事情

```
@Entity  
@Table(name = "User")  
class User   
{  
   long id;  
   String login;  
}  

@Entity  
class Mag extends User  
{  
   String magic;  
}  

@Entity  
class Warrior extends User   
{  
   String weapon;  
} 
```

但是@Inheritance 需要鉴别器列，但我没有鉴别器。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T07:12:03.873

您正在寻找[MappedSuperClass](http://docs.oracle.com/javaee/6/api/javax/persistence/MappedSuperclass.html)，它允许子类从超类继承注释而不需要鉴别器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-04T08:21:13.663

如果您有分隔符列，则可以为此使用鉴别器。假设您的分隔符列是

> utype 字符（1）

而如果

> utype = m，这是一个 Mag 实体，并且
> 
> utype=w，即Warrior实体

请在下面找到代码。

```
@Entity
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
@DiscriminatorColumn(name = "utype", discriminatorType =  DiscriminatorType.CHAR)
@Table(name = "User")  
class User   
{  
   long id;  
   String login;  
}  

@Entity
@DiscriminatorValue("m")  
class Mag extends User  
{  
   String magic;  
}  

@Entity  
@DiscriminatorValue("w")  
class Warrior extends User   
{  
   String weapon;  
} 
```

# ios - 自定义 UIButton 阴影

> ID：10426692
> 
> 赞同：0
> 
> 时间：2012-05-03T07:08:09.340
> 
> 标签：ios, cocoa-touch, uibutton, calayer

我有圆角矩形 UIButton 并想为其添加阴影，但是当我设置背景图像阴影不可见时，我认为背景会覆盖阴影。没有背景图像阴影可见

```
customBtn=[UIButton buttonWithType:UIButtonTypeRoundedRect];
    customBtn.frame=CGRectMake(customBtn.frame.origin.x, customBtn.frame.origin.y, 30, 30);
     [customBtn setImage:[UIImage imageNamed:@"icon.png"] forState:UIControlStateNormal];
     [customBtn setBackgroundImage:[[UIImage imageNamed:@"bg.png"] stretchableImageWithLeftCapWidth:0 topCapHeight:0] forState:UIControlStateNormal];
    customBtn.layer.cornerRadius=9;

 customBtn.layer.shadowColor = [UIColor redColor].CGColor;
    customBtn.layer.shadowOpacity = 1.0;
    customBtn.layer.shadowRadius = 1;
    customBtn.layer.shadowOffset = CGSizeMake(2.0f, 2.0f);
customBtn.clipsToBounds=YES; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T05:01:22.727

由于 的内部结构`UIButton`，最好的办法是创建一个包含阴影的可拉伸背景图像。

```
UIImage *bgWithShadow = [[UIImage imageNamed: @"bg.png"] 
                            stretchableImageWithLeftCapWidth: 10 
                                                topCapHeight: 0];
[customBtn setBackgroundImage: bgWithShadow 
                     forState: UIControlStateNormal]; 
```

此示例假定这`bg.png`是一个包含阴影的 21 像素宽的图像。基本上，您不必做任何其他事情，例如访问按钮的图层或更改其`clipsToBounds`属性。请参阅[此问题](https://stackoverflow.com/questions/8671315/using-resizableimagewithcapinsets-image-for-button-only-works-for-the-state-set)以了解什么是可拉伸图像（带有图片！）。

请注意，`stretchableImageWithLeftCapWidth:topCapHeight:`不赞成使用`resizableImageWithCapInsets:`.

# php - 从 SQL 数据库中单独选择最后 X 行

> ID：10426693
> 
> 赞同：-1
> 
> 时间：2012-05-03T07:08:16.503
> 
> 标签：php, mysql, date, twitter

我有一个使用 Twitter API 存储 Twitter 帖子的数据库 - 在标题 id 下（存储为标签：search.twitter.com,2005:195795633834176512），作者，时间，文本 - 我有一个页面打印出最后 7来自该数据库的帖子数天。有时，最后 7 个帖子可能是 10-20 个帖子，有时可能是 100-200 个。我一直在尝试将新闻自动收报机集成到页面中，因此每个帖子都出现在一个框中，然后淡出以被另一个帖子替换，这意味着您有一个迭代而不是 200 行：

```
 <div id="news1">
            <h3>Stackoverflow</h3>
            <!-- Displaying News Module --> 

            <div class="news-container" style="overflow-x: hidden; overflow-y: hidden; position: relative; height: 1207px; ">
<!-- ul id="news-scroller" -->
<ul style="left: 207px; position: absolute; margin-top: 0px; margin-right: 0px; margin-       bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; top: 0px; ">

<li style="display: list-item; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; height: 69px; ">
<div style="padding-bottom: 5px;">

<!-- Displaying News Module -->

<?php
require_once 'db-functions.inc.php' ; //custom database functions

echo "<ul class=\"twitter_feed\">\n" ;
$result = dbQuery("SELECT * FROM `HASH` WHERE text LIKE '%stackoverflow%' AND `hidden` != 'y' AND from_unixtime(time) > date_sub(curdate(), interval 7 day) ORDER BY `time` DESC LIMIT 10");
while ($row = dbGetRow($result)) {
$text = stripslashes($row['text']);
$time = $row['time'];
$author = stripslashes($row['author']); 
echo "  <li><span class=\"twitter_time\">".date('M j, Y, g:i a',$time)."</span> &middot; $author: $text</li>\n" ;
}
echo "</ul>\n" ;

?> 
```

但是，这只是将过去 7 天作为一个块输出，而不是一次输出一个： [http ://sanctuary-westminster.org/server/scroll.php](http://sanctuary-westminster.org/server/scroll.php)

问题是如何将最后一个条目（时间戳最大的条目）单独输出为“新闻项目”，所以最后一个帖子，倒数第二个帖子等。它不会是固定数量的条目，一个 7 天可能是10，另外 200，所以我发现编写 echo 和迭代很棘手。

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T08:05:57.663

我觉得最好的方法是使用评论中所述的 AJAX，但最简单的方法是使用您已经编写的代码，将数据库中的帖子数组转储到 javascript 数组中，然后循环遍历带有您的新闻代码的 javascript 数组。你可以这样做：

```
echo '<script type="text/javascript"> var tweets = [""]; 
                                      var author = [""]; 
                                      var times = [""]; ';

while ($row = dbGetRow($result))
{
    echo "tweets.push('$row[text]'); 
          author.push('$row[author]'); 
          times.push('$row[times];"; 
}

echo '</script>'; 
```

然后您可以使用 javascript 循环遍历数组，以一次在新闻行情中显示它们的信息。

编辑：我修复了初始 var 分配，如下面的评论中所建议的那样。

# session - 我如何检查用户是否登录或未登录 Symfony？

> ID：10426695
> 
> 赞同：0
> 
> 时间：2012-05-03T07:08:20.043
> 
> 标签：session, symfony1, symfony-1.4

我正在为我最后一年的项目创建一个工作门户。当求职者点击“申请”按钮时，我需要在求职者申请特定空缺时设置会话，检查用户是否使用系统登录。如果他已登录，用户可以继续申请并上传简历。否则他应该必须在系统上注册，当点击应用页面时应该重定向到注册页面。那么我怎样才能用 symfony 做到这一点呢？是否可以在“应用”按钮中执行此会话部分.. 我对 symfony 不是很熟悉.. 请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:41:42.980

您在 sfBasicSecurityUser 中有一个函数可以告诉您[用户是否已连接](http://trac.symfony-project.org/browser/branches/1.4/lib/user/sfBasicSecurityUser.class.php#L172)：

```
// in template
$sf_user->isAuthenticated();

// in action
$this->getUser()->isAuthenticated(); 
```

在将用户重定向到登录系统之前，您可以[使用 ->getReferer()](http://trac.symfony-project.org/browser/branches/1.4/lib/request/sfWebRequest.class.php#L337)存储引荐来源网址：

```
$request->getReferer(); 
```

如果可以，请使用[sfGuardDoctrinePlugin](http://www.symfony-project.org/plugins/sfDoctrineGuardPlugin)来处理您的用户管理（用户、组、权限、登录、注册等）

**编辑：**

因此，在您的登录操作中，您添加了类似的内容：

```
// store the referer url in the session for a future use, if it's doesn't already exists
if($this->getUser()->getAttribute('referer_url', null, 'login'))
{
  $this->getUser()->setAttribute('referer_url', $request->getReferer(), 'login');
} 
```

在您的登录操作中：

```
// retrieve the referer in session, otherwise the one in request, otherwise redirect to homepage
$signinUrl = $this->getUser()->getAttribute('referer_url', $request->getReferer(), 'login');
$this->getUser()->getAttributeHolder()->remove('referer_url');

return $this->redirect('' != $signinUrl ? $signinUrl : '@homepage'); 
```

**编辑2：**

如果您想要自定义重定向，请在重定向到登录页面之前设置它：

```
$this->getUser()->setAttribute('referer_url', 'my/custom/url', 'login'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T08:16:56.100

如果您像这样手动存储用户会话：

```
// in action<br>
$this->getUser()->setAttribute('user', $user); 
```

你可以像这样检查这个用户：

```
// in action
$this->getUser()->getAttribute('user'); 
```

然后您可以检查是否存在用户对象...

# visual-studio-2010 - 调试资源字符串不可用。通常，关键和论点提供了足够的信息来诊断

> ID：10426697
> 
> 赞同：2
> 
> 时间：2012-05-03T07:08:23.117
> 
> 标签：visual-studio-2010, silverlight, web-services

我正在使用 Silverlight 制作应用程序。在按钮单击的那个应用程序中，我正在调用一个 Web 服务方法（Web 服务部署在 IIS 上）。我收到错误

```
Message:AuthenticateUser_CheckUserAuthorizationCompleted : [Async_ExceptionOccurred]
Arguments: 
Debugging resource strings are unavailable. Often the key and arguments provide sufficient information to diagnose the problem. See http://go.microsoft.com/fwlink/?linkid=106663&Version=5.0.61118.00&File=System.dll&Key=Async_ExceptionOccurred
   at System.ComponentModel.AsyncCompletedEventArgs.RaiseExceptionIfNecessary()
   at Console1.AuthenticateUser.CheckUserAuthorizationCompletedEventArgs.get_Result()
   at Console1.LogIn.AuthenticateUser_CheckUserAuthorizationCompleted(Object sender, CheckUserAuthorizationCompletedEventArgs e) 
```

`AuthenticateUser_CheckUserAuthorizationCompleted`我从中调用 Web 方法的事件在哪里。我还检查了 Fiddler 工具中的错误，它显示 `ErrorCode: 10060.A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond 192.168.1.130:80`. 我不明白是什么问题。请帮助我。在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:35:50.020

Note, the following portion of the error:

> Debugging resource strings are unavailable. Often the key and arguments provide sufficient information to diagnose the problem. See [http://go.microsoft.com/fwlink/?linkid=106663&Version=5.0.61118.00&File=System.dll&Key=Async_ExceptionOccurred](http://go.microsoft.com/fwlink/?linkid=106663&Version=5.0.61118.00&File=System.dll&Key=Async_ExceptionOccurred)

In order to keep the Silverlight runtime slim, a lot of strings were omitted in favour of links to them online. If you follow the link, it will tell you more about the error that you encountered.

> An exception occurred during the operation, making the result invalid. Check InnerException for exception details.

In order to resolve this issue, we need to see what the `InnerException` looks like.

# macos - 如何防止applescript中的自动对话框？

> ID：10426698
> 
> 赞同：0
> 
> 时间：2012-05-03T07:08:29.140
> 
> 标签：macos, shell, applescript

我有以下代码

```
on open the_Droppings

    -- set something to {item 1 of the_Droppings, item 2 of the_Droppings}
    set file1 to POSIX path of item 1 of the_Droppings
    set file2 to POSIX path of item 2 of the_Droppings
    set diff to (do shell script "diff " & file1 & " " & file2)
    if (diff is equal to "") then
        display dialog "files are the same"
    else
        set diff to ""
        tell application "TextEdit"
            activate
            set NewDoc to make new document
            set diff to text of NewDoc
        end tell

    end if
end open
end 
```

有两个问题！一：它打开一个很长的对话框。这么久，我什至不能点击确定退出它。（我知道我可以按回车键） 问题，如何停止对话框？二：它永远不会将文本放入它打开的新文本编辑器中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T10:50:19.707

您的对话框不是**输出**对话框，而是**错误**对话框。问题是，`diff`如果发现差异（0 是没有差异，1 是差异，2 是根据[这个问题](https://stackoverflow.com/questions/6971284/what-are-the-error-exit-values-for-diff)的程序错误），则以错误代码退出，Applescript 认为这是`do shell script`命令失败并有助于显示输出以进行调试，其中当然包含完整的差异。但是，它永远不会分配给您的`diff`变量，因为它触发了错误。

假设您的 shell 是`bash`，请执行以下操作

```
set diff to (do shell script "diff '" & file1 & "' '" & file2 & "'; [[ $? = 1 ]] && exit 0") 
```

将解决这个问题——你取消退出代码 1 并且 AppleScript 愉快地拾取输出`stdout`并将其分配给你的变量（注意我在你的文件路径中添加了引号——你也可以使用`quoted form of POSIX path`）。要通过 AppleScript 将其插入到新的 TextEdit 文档中，您还必须[根据我的评论](https://stackoverflow.com/questions/10426698/how-to-prevent-the-automatic-dialog-box-in-applescript#comment13459050_10426698)反转您的分配，即

```
set text of NewDoc to diff -- not "set diff to text of NewDoc" 
```

那应该可以解决所有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T10:37:49.047

当 do shell 脚本显示一个对话框时，问题是 shell 命令没有返回 0。错误的原因可能是您没有*使用*. 您还可以将文本通过管道传输到文本编辑器。

```
on open these_Items
    set file1 to quoted form of POSIX path of item 1 of these_Items
    set file2 to quoted form of POSIX path of item 2 of these_Items
    do shell script "diff " & file1 & " " & file2 & " | open -f -e"
end open 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-03T12:47:19.200

这是另一种方法：

```
set resultsPath to "~/Desktop/results.txt"

try
    do shell script "diff " & file1 & space & file2 & " >" & resultsPath
end try

set yyy to do shell script "cat " & resultsPath

if yyy is "" then
    display dialog "files are the same"
else
    do shell script "open " & resultsPath
end if 
```

# python - 将多行输入存储到字符串中（Python）

> ID：10426699
> 
> 赞同：6
> 
> 时间：2012-05-03T07:08:32.930
> 
> 标签：python

输入：

```
359716482
867345912
413928675
398574126
546281739
172639548
984163257
621857394
735492861 
```

我的代码：

```
print("Enter the array:\n")   
userInput = input().splitlines()
print(userInput) 
```

我的问题是，`userInput`只接受第一行的值，但它似乎没有接受第一行之后的值？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-03T07:13:09.327

您可以使用`readlines()`文件对象的方法：

```
import sys
userInput = sys.stdin.readlines() 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-03T07:19:36.003

您可以使用生成器轻松创建一个。这是一种这样的实现。请注意，您可以按空白返回或任何键盘中断来跳出输入循环

```
>>> def multi_input():
    try:
        while True:
            data=raw_input()
            if not data: break
            yield data
    except KeyboardInterrupt:
        return

>>> userInput = list(multi_input())
359716482
867345912
413928675
398574126

>>> userInput
['359716482', '867345912', '413928675', '398574126']
>>> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T07:10:55.540

每个`input()`只接受一行。围绕这一点的策略：

*   您可以在循环中重复调用`input()`，直到它收到一个空行
*   您可以在循环中重复调用`input()`，直到用户在类似 UNIX 的操作系统上执行 ctrl-D，此时将引发 EOFError，您可以捕获它
*   从文本文件或其他比标准输入更合适的来源读取数据

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-28T08:47:52.067

您也可以尝试使用 python 文件处理：

```
userInput = []
with open("example.txt", "r") as f :
    for x in f :
        userInput.append(x) 
```

但是，在这种情况下，您需要将输入作为文本文件 (example.txt) 提供。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-17T19:15:51.673

**你好呀，**

你可以试试我根据你的要求做的这个方法。我在代码上添加了一些注释来解释我想要实现的目标。很高兴有机会学习一些 python 代码，我是这种语言的新手，但我非常喜欢它！

```
def multi_input():
    try:
        #This list will hold all inputs made during the loop
        lst_words = []
        # We will store the final string results on this variable
        final_str ='' 
        #Let's ask first the user to enter the amount of fruits
        print("Please Type in your List of Fruits. \n Press << Enter >> to finish the list:")

        #Loop to get as many words as needed in that list
        while True:
            #Capture each word o'er here, pals!
            wrd = input()
            # If word is empty, meaning user hit ENTER, let's break this routine
            if not wrd: break
            # if not, we keep adding this input to the current list of fruits
            else:
                lst_words.append(wrd)

#What if ther user press the interruption shortcut? ctrl+D or Linus or MacOS equivalent?
    except KeyboardInterrupt:
        print("program was manually terminated by the user.")
        return
#the time has come for us to display the results on the screen
    finally:
        #If the list has at least one element, let us print it on the screen
        if(len(lst_words)>0):
            #Before printing this list, let's create the final string based on the elements of the list
            final_str = '\n'.join(lst_words)
            print('You entered the below fruits:')
            print(final_str)
        else:
            quit
#let us test this function now! Happy python coding, folks!
multi_input() 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2017-07-14T10:28:30.700

```
lines = []
while True:
s =input("Enter the string or press ENTER for Output: ")
if s:
    lines.append(s)
else:
    break;

print("OUTPUT: ")
for i in lines:
print (i)

Input:
359716482
867345912
413928675
398574126
546281739
172639548
984163257
621857394
735492861

Output:
359716482
867345912
413928675
398574126
546281739
172639548
984163257
621857394
735492861 
```

# batch-file - 使用 BATCH 从 IP 或主机名获取国家和 ISP 名称？

> ID：10426700
> 
> 赞同：1
> 
> 时间：2012-05-03T07:08:43.390
> 
> 标签：batch-file, ip, ip-address, nslookup

我需要批量完成这项工作。

我使用**NSLOOKUP**命令查找 IP 的主机名，但是我如何找到该 IP 的国家和 ISP 名称？

有可能吗？

谢谢你的阅读。

**编辑**：例如，我想在 bat 代码中执行此操作：

```
IP address  **.***.30.113
Hostname    **-***-30-113.rdns.blackberry.net
ISP Research In Motion UK Limited
Country United Kingdom United Kingdom 
```

**编辑 2**：我接受外部 APP 来做这件事，请

我尝试过来自**sysinternals的“** **whois** ” ，但它给了我不好的信息，因为如果我将我的本地 IP 放入程序中，它会给我组织所在的城市（**西班牙马德里**），而不是最近的 mi isp 提供商位置（**西班牙瓦伦西亚**），如果我在互联网上对我的 ip 进行地理定位，它会给我很好的信息（**西班牙瓦伦西亚**）

 ******有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T07:13:04.840

如果没有 IP-to-Country 表，您将无法获得该信息。

试试[http://www.maxmind.com/app/geolitecountry](http://www.maxmind.com/app/geolitecountry)，它是免费的，而且效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-25T15:00:14.687

这是我编写的一个批处理文件，它使用 ipinfo.io 的 API 进行 IP 查找。[https://pastebin.com/Ucs2Kuqn](https://pastebin.com/Ucs2Kuqn)

```
echo sUrl = "http://ipinfo.io/%ip%/json" > %temp%\%webclient%.vbs 
```******

# ruby-on-rails - 在 ruby on rails 中存储来自 ping 命令的平均时间

> ID：10426707
> 
> 赞同：0
> 
> 时间：2012-05-03T07:09:05.030
> 
> 标签：ruby-on-rails, shell, networking, ping

我编写了以下系统命令来 ping 一个网站，它给了我想要的 ICMP 响应。

```
response = system("ping -c1 www.stackoverflow.com") 
```

回应是——

```
PING stackoverflow.com (64.34.119.12) 56(84) bytes of data.
64 bytes from stackoverflow.com (64.34.119.12): icmp_req=1 ttl=52 time=336 ms

--- stackoverflow.com ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 336.699/336.699/336.699/0.000 ms
 => true 
```

现在我想存储上述统计数据的平均时间。所以我点击了下一个系统命令，即 as。

```
response_time = system("ping -c 1 www.pintile.com | tail -1| awk '{print $4}' | cut -d '/' -f 2") 
```

这给了我平均时间，但没有将其存储在 response_time 变量中。存储在 response_time 中的值是**true**。

```
335.898
 => true 
```

现在我的问题是**如何将平均时间存储在 response_time 变量中？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T07:39:13.423

使用卷曲：

```
curl -w '\nLookup time:\t%{time_namelookup}\nConnect time:\t%{time_connect}\nPreXfer time:\t%{time_pretransfer}\nStartXfer time:\t%{time_starttransfer}\n\nTotal time:\t%{time_total}\n' -o /dev/null -s http://www.pintile.com 
```

你会得到如下输出：

```
Lookup time:    0.589
Connect time:   0.603
PreXfer time:   0.603
StartXfer time: 1.425

Total time: 2.073 
```

希望有所帮助。

**编辑：**

检查这个[答案](https://stackoverflow.com/a/1563625/84631)。

如果你用反引号包围你的命令，那么你根本不需要（明确地）调用 system() 。

像这样使用它：

```
response_time = `ping -c 1 www.pintile.com | tail -1| awk '{print $4}' | cut -d '/' -f 2` 
```

现在您将获得 response_time 。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T07:40:22.713

尝试：

```
`ping -c1 www.stackoverflow.com` =~ %r[= \d+\.\d+/(\d+\.\d+)]
response_time = $1 and $1.to_f 
```

# jquery - 如果单击链接，则显示表单输入框

> ID：10426713
> 
> 赞同：1
> 
> 时间：2012-05-03T07:09:29.030
> 
> 标签：jquery, this

我对每个帖子都有评论表。我只想在单击评论链接时显示输入框。

```
$("*#comment_form").hide();
$(".comment_link").click (function(){
  $("#comment_form").show(); // problem here...
}); 
```

我已经使用上面的这个脚本来隐藏页面加载时的所有评论框（评论 div）。当点击评论链接时，我想为该特定帖子显示一个评论框。

```
<a class="comment_link href="#">Comment</a>
<div id="comment_form">
<form id="form_comment" action="docomment.php" method="post">
 <input type="text" name="comment">
 </form>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T07:15:00.210

如果你只是修复你的 HTML 标记，那就完美了：http: [//jsfiddle.net/voigtan/QAvKT/](http://jsfiddle.net/voigtan/QAvKT/)

如果您一次在文档中使用更多表单元素，则添加一个 css 类：http: [//jsfiddle.net/voigtan/QAvKT/3/](http://jsfiddle.net/voigtan/QAvKT/3/)（在您的 a 元素上添加了 preventDefault）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T07:12:50.203

你在`"`这里少了一个`<div id="comment_form>`

# web-services - 通过 web 服务检索 Bugzilla 实例中存在的所有关键字

> ID：10426716
> 
> 赞同：0
> 
> 时间：2012-05-03T07:09:41.153
> 
> 标签：web-services, xml-rpc, bugzilla

我必须通过 web 服务获取 bugzilla 安装中存在的所有关键字。我有安装 3.6 我能知道获取相同的方法和检索相同的示例 xml 的方法是什么吗？我正在使用 XMLRPC 并且有 bugzilla 3.6 版。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T21:17:47.610

Bugzilla::Webservice::Bug 是开始的地方。使用 get 方法检索错误，然后检查汇总字段。

[http://www.bugzilla.org/docs/3.6/en/html/api/Bugzilla/WebService/Bug.html#Bug_Information](http://www.bugzilla.org/docs/3.6/en/html/api/Bugzilla/WebService/Bug.html#Bug_Information)

# python - 无法理解 matplotlib 的示例，其中省略号和冒号可能与索引相关联

> ID：10426718
> 
> 赞同：3
> 
> 时间：2012-05-03T07:09:43.603
> 
> 标签：python, indexing, slice, ellipsis, colon

**我对这个matplotlib**的[示例](http://matplotlib.sourceforge.net/examples/animation/basic_example.html)有疑问。

这是我不明白的部分

```
def update_line(num, data, line):
    line.set_data(data[...,:num])
    return line, 
```

做什么`line.set_data(data[...,:num])`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T07:38:43.777

这是 numpy 提供的一种特殊语法，用于在多维数组中进行切片。一般语法是`a[s1,s2, ... , sn]`，其中`si`是用于通常切片或索引序列的表达式，并在第 i 个维度定义所需的切片。例如，`a[5,2:3,1::2]`。

这`...`是在所有维度上获得完整切片的缩短。例如`a[...,3]`，`a[:,:,3]`if`a`是 3D 的缩写。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T07:39:45.213

它实际上是一个`numpy`符号。在`numpy`中，`...`（省略号）用作可变数量`:`切片的占位符。

来自[文档](http://docs.scipy.org/doc/numpy/reference/arrays.indexing.html)：

> 省略号扩展为创建与 x.ndim 长度相同的选择元组所需的对象的数量。只有第一个省略号被扩展，任何其他省略号被解释为:。

用法：

```
In : x = numpy.array(range(8)).reshape(2,2,2)

In : x
Out:
array([[[0, 1],
        [2, 3]],

       [[4, 5],
        [6, 7]]])

In : x[...,0]
Out:
array([[0, 2],
       [4, 6]])

In : x[:,:,0]
Out:
array([[0, 2],
       [4, 6]]) 
```

# jquery-mobile - Backbone.js 和 jquery mobile：单击片段链接 (#something) 会导致滚动到页面顶部

> ID：10426730
> 
> 赞同：0
> 
> 时间：2012-05-03T07:10:19.690
> 
> 标签：jquery-mobile, backbone.js

我正在使用jquery mobile 和backbone.js 创建一个单页移动应用程序。这个想法是所有数据都是客户端本地的，而外部数据是通过 ajax 捕获的。此应用程序旨在使用 Phonegap 进行部署。

我将 jqm 用于一般的外观和感觉、样式、动画、页面更改等。Backbone.js 用于处理应用程序模型、服务器同步、模板渲染和路由。为了防止两个库之间发生冲突，jqm 中所有与 ajax 相关的功能都已禁用：

```
$.mobile.pushStateEnabled = false;
$.mobile.changePage.defaults.changeHash = false;
$.mobile.ajaxEnabled = false;
$.mobile.linkBindingEnabled = false;
$.mobile.hashListeningEnabled = false; 
```

主页加载一个菜单，其中每个元素将您带到不同的应用程序视图。当您单击一个元素时，使用 AJAX 检索数据，动态生成 HTML 并附加到 DOM，然后应用程序更改为该页面。路由是使用 url 片段完成的，以获得更广泛的浏览器支持：

```
<a href="#news">News</a> 
```

上面的代码使主干路由执行所需的操作以从服务器检索最新消息并呈现页面。所有这些都完美无缺。

我的问题：当我单击菜单的一个元素时，它所做的第一件事（甚至在执行我的任何代码之前）就是滚动到屏幕顶部。这似乎不是一个可怕的问题，但是无意的滚动会弄乱 jqm 在进行 ajax 调用时显示的加载指示器。如果运行此应用程序的设备不支持`fixed`css 属性，则加载指示器位于单击的元素附近。因此，如果视口滚动到顶部，加载指示器将保持在原始位置。结果，加载指示部分或全部隐藏。

知道为什么会发生这种情况吗？我尝试使用 Visual Event 搜索 jquery / jquery mobile 附加的奇怪点击事件，但没有成功，所以我一定遗漏了一些东西。

提前致谢！

编辑以添加有关我正在使用的库的更多信息

jQuery：v1.6.2

jqm：v1.1.0（对于黑莓设备也是 v1.0，但 jqm 版本之间的行为不会改变）

骨干.js：0.9.2（截至撰写本文时最新）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T07:39:14.910

尝试使用以下内容删除任何链接的默认行为：

```
<a href="#news" onclick="return false;">News</a> 
```

您可以使用[更复杂的技术](http://api.jquery.com/event.preventDefault)。

# mysql - MySql 中的 Levenshtein 算法和重音字符

> ID：10426732
> 
> 赞同：1
> 
> 时间：2012-05-03T07:10:27.613
> 
> 标签：mysql, utf-8, ascii, levenshtein-distance

我使用 MySQL 的 Levenshtein 插件来自：[http ://samjlevy.com/2011/03/MySQL-levenshtein-and-damerau-levenshtein-udfs/](http://samjlevy.com/2011/03/MySQL-levenshtein-and-damerau-levenshtein-udfs/)

我正在尝试这样的查询：

```
SELECT name FROM database WHERE levenshtein(name, 'testć') 
```

问题是 levenshtein 函数不处理重音字符。我需要 levenshtein 来识别像“C”和“Ć”（以及其他重音）这样的字符。所以我决定在 MySQL 中替换所有这些，但找不到任何功能。喜欢：

```
SELECT name FROM database WHERE levenshtein(toAscii(name), toAscii('testć')) 
```

我不想使用类似的东西`REPLACE( REPLACE(name, "ś", "s"), "ć", "c" )`；它可能很慢，而且看起来很可怕。

# android - Google Maps 使用按钮/Onclicklistener 打开 Google Maps 应用程序

> ID：10426735
> 
> 赞同：0
> 
> 时间：2012-05-03T07:10:32.480
> 
> 标签：android, google-maps

我已经做了一个多星期了。我试过在我的应用程序中设置谷歌地图活动，但没有成功。我还看到您可以从您的应用程序中调用 Google 地图应用程序。通过使用 Onclicklistener。如何使用按钮从我的应用程序中打开 Google 地图应用程序？这是我正在使用的代码...

```
import com.google.android.maps.GeoPoint;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class Store10 extends Activity {

    Context context;
    GeoPoint geo;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.store10);

        Button num10 = (Button) findViewById(R.id.pNumber10);
        Button nav10 = (Button) findViewById(R.id.Map10);

        num10.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
                // TODO Auto-generated method stub
                Intent myIntent = new Intent(view.getContext() ,Num10.class);
                startActivityForResult(myIntent, 0);
            }
        });
        nav10.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
                // TODO Auto-generated method stub
                String uri = String.format("geo:%f,%f",40,325874,76,002211);
                Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(uri));
                context.startActivity(intent);
            }
        });
    }

} 
```

这是我正在尝试设置的 Onclicklistener

```
nav10.setOnClickListener(new View.OnClickListener() {

            public void onClick(View view) {
                // TODO Auto-generated method stub
                String uri = String.format("geo:%f,%f",40,325874,76,002211);
                Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(uri));
                context.startActivity(intent);
            }
        }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T09:50:55.747

你可以试试这行代码...

```
String uri = "http://maps.google.com/maps?saddr=" + "9982878"+","+"76285774"+"&daddr="+"9992084"+","+"76286455";
            Intent intent = new Intent(android.content.Intent.ACTION_VIEW, Uri.parse(uri));
            intent.setClassName("com.google.android.apps.maps", "com.google.android.maps.MapsActivity");
            startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T07:37:56.553

更改 Uri 以设置缩放级别

```
uri = Uri.parse("geo:37.827500,-122.481670"?z=10"); 
```

试试这个来添加标记：

```
Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("geo:<lat>,<long>?q=<lat>,<long>(Label+Name)"));
startActivity(intent); 
```

如果您不想要标签，您可以省略 (Label+Name)，它会根据最近的街道或它认为相关的其他事物随机选择一个。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-24T15:15:18.040

我就是这样做的...

```
Intent intent = new Intent(android.content.Intent.ACTION_VIEW, Uri.parse(
"geo:"    + marker.getPosition().latitude +
","       + marker.getPosition().longitude +
"?q="     + marker.getPosition().latitude +
","       + marker.getPosition().longitude +                                   
"("       + marker.getTitle() + ")"));

intent.setClassName("com.google.android.apps.maps", "com.google.android.maps.MapsActivity");
startActivity(intent); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-03T07:14:10.693

//---显示地图按钮---

```
 b3 = (Button) findViewById(R.id.btn_showMap);
 b3.setOnClickListener(new OnClickListener()
 {
 public void onClick(View arg0){
 Intent i = new
 Intent(android.content.Intent.ACTION_VIEW,
 Uri.parse("geo:37.827500,-122.481670"));
 startActivity(i);
 }
 }); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-03T07:21:39.400

请[在此处查看](https://stackoverflow.com/questions/5522349/invoking-google-map-applications-from-an-android-application-to-get-dirving-dire)此 URL 可能对您有帮助..

```
Uri uri = Uri.parse("geo:13.070984,80.253639");
Intent in = new Intent(Intent.ACTION_VIEW, uri);
startActivity(in); 
```

# c# - 限制 WebBrowser 消耗过多内存

> ID：10426738
> 
> 赞同：2
> 
> 时间：2012-05-03T07:10:49.810
> 
> 标签：c#, .net, windows-phone-7, webbrowser-control

我正在做一个涉及 WebBrowser 控件的项目，并且有以下问题。

1.  是否可以限制每个 WebBrowser 实例可以消耗多少内存？

2.  启用 javascript 会增加 WebBrowser 的内存消耗吗

通常的想法是项目必须使用 WebBrowser 以便我使用更少的内存？目前，当使用 WebBrowser 控件时，我的应用程序的 RAM 使用量确实超过了 145 mB。如果不使用 WebBrowser 控件，它最大只有 50 mB。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T07:39:57.703

1）据我所知，没有 API 可用于限制应用程序/任务的 RAM 使用 - 这取决于操作系统的判断和/或应用程序使用的功能。

2) JavaScript 在客户端执行，因此可以安全地假设内存消耗会增加。

我建议您尝试通过最新 SDK (7.1) 附带的性能分析器运行您的应用程序。

[诺基亚](http://www.developer.nokia.com/Community/Wiki/Best_practices_for_delivering_apps_to_256_MB#Introduction)有很多关于内存使用的文章，尤其是在遇到 256MB 设备时。

# iphone - iPhone 应用 SQLite 准备语句崩溃

> ID：10426739
> 
> 赞同：3
> 
> 时间：2012-05-03T07:10:50.420
> 
> 标签：iphone, ios

我正在构建的一个应用程序使用 SQLite 来存储从服务器下载的数据。

应用程序本身使用多线程，因此应用程序启动时，应用程序在后台下载数据，同时还将 UI 呈现给用户。

此时用户可以开始导航应用程序，点击表格行以深入了解详细信息页面。

有时，当我点击表格行时，应用程序会在许多 sqlite3_prepare_v2() 函数调用之一中崩溃。当我为我的 NSOperationQueue 允许超过 1 个最大并发操作时，这种情况发生得更加频繁。但是，由于我已将最大并发操作数限制为 1，因此发生的情况要少得多。

当我的应用程序启动时，我正在打开一个数据库连接并保持它打开，直到应用程序需要终止，然后我关闭连接。

这是它崩溃的示例行：

```
if(sqlite3_prepare_v2(objDatabase, [strGet cStringUsingEncoding:NSUTF8StringEncoding], -1, &stmtGet, NULL) == SQLITE_OK)
{
    ...
} 
```

错误说 EXEC_BAD_ACCESS

就像 20 次中的 1 次或 30 次中的 1 次应用程序运行一样，它会崩溃。这意味着我的 SQL 语句在 99% 的时间里都有效。

以前有人遇到过这种情况吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T19:32:42.790

我有同样的问题。仔细检查对 sqlite3_prepare_v2 指令的所有调用，并确保为每个指令调用匹配的 sqlite3_finalize。在我的情况下，我有一个没有调用 sqlite3_finalize 的位置，导致下次调用 sqlite3_prepare_v2 时崩溃。它并不总是崩溃，而且很难像疯了一样调试。我希望这个评论可以帮助你。

您可能真的会发现为 sqlite3_prepare_v2 和 sqlite3_finalize 编写存根函数很有帮助，这些函数将这些操作记录到 NSLog。这将有助于验证匹配的调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:02:36.830

启用僵尸对象并检查是否存在由于释放对象而导致的任何问题，因为大多数时间 exec 错误访问是由于释放对象引起的。通过启用僵尸，您将被告知应用程序崩溃的原因。这可能是您的内存管理不正确，在不同的线程中，有时您的管理方法正确调用有时没有。

启用 ns 僵尸对象

产品>编辑方案>启用僵尸并尝试立即使应用程序崩溃

# asp.net - 如何在不使用表单的情况下将控件放在不同的内容占位符中

> ID：10426743
> 
> 赞同：2
> 
> 时间：2012-05-03T07:11:00.020
> 
> 标签：asp.net

情况：我有一个母版页，它有 3 个内容占位符，但没有表单 runat 服务器。在我的 Login.aspx 中，我尝试填充这些占位符，但它不允许我没有表单 runat 服务器标签，一旦我再次添加多个表单，它会显示：“一个页面只能有一个服务器端表单标签。 "

这是我的代码：

```
 <%@ Page Title="" Language="C#" MasterPageFile="~/Site1.Master" AutoEventWireup="true" CodeBehind="Login.aspx.cs" Inherits="DWDS_Lotus_Care_Final.Page" %>

<asp:Content ID="Content1" ContentPlaceHolderID="ContentPlaceHolder2" runat="server">
    <form id="formUser" runat="server">
            <p>
                <asp:Label ID="lblUsername" runat="server" Text="Username"></asp:Label>
                <asp:Button ID="btnLogout" runat="server" Text="Logout" />
            </p>
    </form>
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
    <form id="form1" runat="server">
    <table style="width: 100%">
        <tr>
            <td style="width: 93px">
                UserName :
            </td>
            <td style="width: 139px">
        <asp:TextBox ID="txtUserName" runat="server"></asp:TextBox>
            </td>
            <td style="width: 307px">
        <asp:RequiredFieldValidator ID="RequiredFieldValidator2" ControlToValidate="txtUserName" runat="server" ErrorMessage="*"></asp:RequiredFieldValidator>
            </td>
        </tr>
        <tr>
            <td style="width: 93px">
                Password :</td>
            <td style="width: 139px">
        <asp:TextBox ID="txtPassword" runat="server"></asp:TextBox>
            </td>
            <td style="width: 307px">
        <asp:RequiredFieldValidator ID="RequiredFieldValidator1" ControlToValidate="txtPassword" runat="server" ErrorMessage="*"></asp:RequiredFieldValidator>
            </td>
        </tr>
        <tr>
            <td style="width: 93px">
                &nbsp;</td>
            <td style="width: 139px">
        <asp:Button ID="btnSubmit" Text="Submit" runat="server" 
            onclick="btnSubmit_Click" />
        &nbsp;&nbsp;
        <asp:Button ID="btnClear" Text="Clear" runat="server" 
            onclick="btnClear_Click" />
            </td>
            <td style="width: 307px">
        <asp:LinkButton ID="linkRegister" Text="Register" runat="server"></asp:LinkButton>
            </td>
        </tr>
    </table>
        </p>
    </form>
</asp:Content>
<asp:Content ID="Content3" ContentPlaceHolderID="ContentPlaceHolder3" runat="server">

</asp:Content> 
```

**这是主要来源**

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="Site1.master.cs"     Inherits="DWDS_Lotus_Care_Final.Site1" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <title>Consistent</title>
    <link href="http://fonts.googleapis.com/css?family=Bitter" rel="stylesheet" type="text/css" />
        <link rel="stylesheet" type="text/css" href="style.css" />
</head>
<body>
        <div id="wrapper">
        <div id="header">
            <div id="logo">

            </div>
        </div>
            <div id="menu">
                <ul>
                    <li><a href="#">Login</a></li>
                    <li><a href="#">About</a></li>
                    <li><a href="#">Portfolio</a></li>
                    <li class="last"><a href="#">Contact</a></li>
                </ul>
            </div>
            <div id="page">

        <%--Here is the sidebar--%>
            <div id="sidebar" style="background-color:#CCCCCC">
                <asp:ContentPlaceHolder ID="ContentPlaceHolder2" runat="server">
                </asp:ContentPlaceHolder>
                    <h3>Links to Other Hospitals</h3>
                    <div class="date-list">
                        <ul class="list date-list">
                            <li class="first"><span class="date">Sunway</span> <a href="#">Sunway Piramid</a></li>
                            <li><span class="date">KPJ</span> <a href="#">Kajang Care Centre</a></li>
                            <li><span class="date">HCC</span> <a href="#">Health Care Center</a></li>
                            <li><span class="date">AlphaH</span> <a href="#">Alpha Health Center</a></li>
                            <li><span class="date">UPC</span> <a href="#">Bangsar Hospital</a></li>
                            <li class="last"><span class="date">TPM</span> <a href="#">Technology Park Hospital</a></li>
                        </ul>
                    </div>
                <br class="clearfix" />
            </div>

            <%--Here is the Content--%>
            <div id="content">
                <h2>Welcome to Lotus Care</h2>

                <div class="box">
                     <asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">

                     </asp:ContentPlaceHolder>
                </div>
                <div class="box">
                    <asp:ContentPlaceHolder ID="ContentPlaceHolder3" runat="server">

                     </asp:ContentPlaceHolder>
                </div>
                <br class="clearfix" />
            </div>

            <br class="clearfix" />
        </div>
    </div>
    <div id="footer">
        </div>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T07:40:46.333

母版页：

```
<form runat="server">
   <%-- use form tag only in Master page.--%>
 <div id="content">
 <h2>Welcome to Lotus Care</h2>
 <div class="box">
  <asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">

  </asp:ContentPlaceHolder>
  </div>
  <div class="box">
  <asp:ContentPlaceHolder ID="ContentPlaceHolder3" runat="server">

  </asp:ContentPlaceHolder>
  </div>
  <br class="clearfix" />
 </div>
</form> 
```

内容页：

```
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
  <%-- don't use Form tag here..--%>
  <table style="width: 100%">
  </table>
</asp:Content> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T07:27:06.290

这就是我所做的：

对于这种情况，我将使用 div 或面板

```
<asp:Content ID="Content1" ContentPlaceHolderID="ContentPlaceHolder2" runat="server">
<div>
//Place some controls here    
</div>
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
<div>
//Put some controls here 
</div>
</asp:Content>
<asp:Content ID="Content3" ContentPlaceHolderID="ContentPlaceHolder3" runat="server">
<div>
//Put some more controls here
</div>
</asp:Content> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-12T07:17:58.787

在 VS2017 中，你可以使用没有表单标签的 contentplaceholder。使用 asp.net 4.6.2

# java - 如何在junit 4.8.x中执行特定的测试方法

> ID：10426747
> 
> 赞同：1
> 
> 时间：2012-05-03T07:11:43.963
> 
> 标签：java

我想编写执行 junit 4.8.x 测试类的特定测试方法的 java 代码。例如，在 junit 3.8.x 中，要执行特定的测试方法，我们编写以下代码块：

```
TestResult res = junit.textui.TestRunner.run(junit.framework.TestSuite.createTest((Class< ? extends TestCase>)className, methodName)); 
```

这里，className 是 TestCase 的子类，MethodName 是定义在 className 中的测试方法。它执行“methodName”测试方法并将结果保存在“res”中。同样，我也想为 junit 4.8.x 类执行特定的测试方法。谁能告诉我答案...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:55:53.957

如果您不使用 TestCase，则可以将转换删除到 TestCase。

在 JUnit 4.10 TestSuite.createTest(Class theClass, String name) 将采用任何类。

如果我在 4.10 中查看 TestSuite 的源代码

[https://github.com/KentBeck/junit/blob/master/src/main/java/junit/framework/TestSuite.java](https://github.com/KentBeck/junit/blob/master/src/main/java/junit/framework/TestSuite.java)

```
public class TestSuite implements Test {

/**
 * ...as the moon sets over the early morning Merlin, Oregon
 * mountains, our intrepid adventurers type...
 */
static public Test createTest(Class<?> theClass, String name) {
    Constructor<?> constructor;
    try {
        constructor= getTestConstructor(theClass);
    } catch (NoSuchMethodException e) {
        return warning("Class "+theClass.getName()+" has no public constructor TestCase(String name) or TestCase()");
    }
    Object test;
    try {
        if (constructor.getParameterTypes().length == 0) {
            test= constructor.newInstance(new Object[0]);
            if (test instanceof TestCase)
                ((TestCase) test).setName(name);
        } else {
            test= constructor.newInstance(new Object[]{name});
        } 
```

在这个版本中，它将采用任何类型。

# android - Adb 设备在 Ubuntu Natty 上脱机

> ID：10426753
> 
> 赞同：1
> 
> 时间：2012-05-03T07:12:04.057
> 
> 标签：android, ubuntu, adb, natty

我正在 Android 上开发，我正在运行 Ubuntu。我很难让设备“在线”。我已经尝试过：

*   可以在 Internet 上找到的所有 udev 规则。
*   在 .android 文件夹中添加 .ini 文件。
*   通常重启计算机，设备，拔下设备，取消选中开发人员并重新检查它......

目前我只花了大约 30 分钟到 1 小时的时间来更换 USB 端口，重新启动计算机、设备。一段时间后它总是有效。但这真的很令人沮丧，花这么多时间只是为了让设备得到认可。

我注意到了什么。当我在启动平板电脑时向 adb devices 发送垃圾邮件时：

```
student@terminal32:~$ ./adb devices
List of devices attached 
46411960A012FCCE    device

student@terminal32:~$ ./adb devices
List of devices attached 
46411960A012FCCE    device

student@terminal32:~$ ./adb devices
List of devices attached 

student@terminal32:~$ ./adb devices
List of devices attached 

student@terminal32:~$ ./adb devices
List of devices attached 
????????????    offline

student@terminal32:~$ ./adb devices
List of devices attached 
????????????    offline 
```

起初它识别出我的设备，但是当它完全启动时，它似乎仍然处于离线状态。

任何人都可以给我一些关于我可以做些什么来解决这个令人沮丧的问题的提示。也许有人可以告诉我问题到底是什么，为什么它在 30 分钟到 1 小时后仍然有效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T11:25:27.343

我刚刚经历了同样的地狱，重启设备，电脑......实际上有很多次。

并不是说这总是有效，但我最后一次成功的尝试至少不涉及拔下或重新启动电脑： - adb 客户端正在运行 - 设备已识别但脱机 - 通过 USB 连接的设备

然后我只是重新启动了设备（即没有拔下或重新启动 dab 或任何东西）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T14:39:04.947

最近发生在我身上，将您的手机 USB 连接更改为 PTP 摄像头。

# c# - 我正在寻找一种将数字转换为前导零并返回的两个字符串的方法

> ID：10426754
> 
> 赞同：1
> 
> 时间：2012-05-03T07:12:04.110
> 
> 标签：c#

我需要将一个字符串转换为另一个字符串（始终为 4 个字符），如下所示：

```
1.2 > 0102
99.1 > 9901
1 > 0100
1.44 > 0144 
```

然后其他一些函数将一个字符串（始终为 4 个字符）转换回另一个字符串，例如：

```
0102 > 1.2
9901 > 99.1
0100 > 1
0144 > 1.44 
```

有人可以通过提供一些关于我如何在 C# 中执行此操作的建议来提供帮助吗？

**更新：**

只是为了让它更清楚一点。实际上有两个零填充的两位数。小数点前一个和小数点后一个。所以 90.09 需要转换为“90”​​+“09”=“9009”。我希望这是有道理的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:21:36.527

你可以从这里开始：

```
 public void separate(string yourString){
//s= yourString;
string s = "10.2";
string part1;
string part2;
    //
    // Split string on dot.
    // ... This will separate into 2 parts if exist .
    //
    string[] words = s.Split('.');

if(words[0].Length == 2){
    part1 = words[0];
        }else{
            if (words[0].Length == 1){
                part1 = "0" + words[0];
            }else{ part1 = "00";}
        }

if(words[1].Length == 2){
    part2 = words[1];
        }else{
            if (words[1].Length == 1){
            part1 = "0" + words[0];
            }else{ part1 = "00";}
       }
}

public string rebuild(string part1 , string part2)
 {
     string final = part1.Replace("0", "") +"."+ part2.Replace("0", "");

     return final;
 } 
```

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T07:39:46.367

我会使用 LINQ 在一行中解决它：

```
string oldString = "3.5";    
string newString = string.Join("", from s in oldString.Split('.') select s.PadLeft(2, '0')).PadRight(4, '0'); 
```

还原更容易：

```
string oldString = "0305";
string newString = oldString.Substring(0,2).TrimStart('0') + "." + oldString.Substring(2,2).TrimStart('0'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T08:03:54.430

```
 string x = "99.1";
        int real, deci,indpoint;
        indpoint=x.IndexOf('.');
        real = Convert.ToInt32(x.Substring(0, indpoint));
        deci = Convert.ToInt32(x.Substring(indpoint+1));
        string result="";
        if (real < 10)
        {
            result += "0"; 
        }
        result += real;
        if (deci % 10 == 0)
        {
            deci = (int)(deci * 0.1);
        }
        if(deci < 10)
        {

            result += "0"; 
        }
        result += deci;

        float another = Convert.ToInt32(result.Substring(0, 2));
        if (result[2] == '0')
        {
            another += (float)(Convert.ToInt32(result.Substring(2, 2)) * 0.1);
        }
        else
        {
            another += (float)(Convert.ToInt32(result.Substring(2, 2)) * 0.01);
        }
        string result2 = Convert.ToString(another); 
```

# objective-c - NSMutableArray 到 NSNumber

> ID：10426756
> 
> 赞同：1
> 
> 时间：2012-05-03T07:12:24.000
> 
> 标签：objective-c, nsmutablearray, nsarray, nsnumber

我有一个数组：

`12, "+", 56, "+", "", "(", 56, "+", 65, ")"`

现在让我们说我想添加

```
[NSMutableArray objectAtIndex: 1] + [NSMutableArray objectAtIndex: 3] 
```

我知道我需要将数组部分转换为 NSNumber，但如果可能的话，我找不到任何说明如何做到这一点的东西。另外我应该补充一点，这些数字是作为 NSString 输入的，要改变这将是非常痛苦的，并且可以作为最后的手段来完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T07:16:31.010

您可以像这样从字符串中获取 nsnumber：

```
NSString *str = @"222";
NSNumber *num = [NSNumber numberWithInt:[str intValue]]; 
```

因此，要将数组转换为 nsnumber：

```
[NSNumber numberWithInt:[[NSMutableArray objectAtIndex: 1] intValue]]; 
```

但请记住，您不能直接将两个 nsnumber 对象添加在一起，它必须是这样的：

```
NSNumber *sum = [NSNumber numberWithInt:([one intValue] + [two intValue])]; 
```

如果你最终使用浮点值，你可以替换`intValue`为`floatValue`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T07:24:16.343

你可以这样做

```
NSNumber *number = (NSNumber*)[NSMutableArray objectAtIndex:1]; 
```

# caching - 没有 max-age 或 expiry 设置的缓存如何工作

> ID：10426757
> 
> 赞同：1
> 
> 时间：2012-05-03T07:12:24.123
> 
> 标签：caching, web, http-headers

我注意到一些网站（例如 Yahoo 和 Stackoverflow）的响应标头既不包含设置中的**max-age**也不包含设置中`Cache-Control`的有效日期`Expires`。

来自 Stackoverflow 的示例

```
Cache-Control: private
Content-Encoding: gzip
Content-Length: 15328
Content-Type: text/html; charset=utf-8
Date: Thu, 03 May 2012 07:06:26 GMT
Vary: Accept-Encoding 
```

在这种情况下，浏览器如何跟踪缓存表示的新鲜度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T07:08:09.567

浏览器根本不缓存页面。每次访问该页面时，浏览器都会向服务器请求该页面。如果它不缓存页面，浏览器就不需要跟踪缓存表示的新鲜度。

# php - 在 phpbb3 web board 上使用 Google adsense

> ID：10426770
> 
> 赞同：0
> 
> 时间：2012-05-03T07:13:31.147
> 
> 标签：php, html, ads, adsense, phpbb3

我正在尝试在我的网络板底部添加一个广告栏。我目前正在使用开源 phpbb3 网络论坛。我想在overall_footer.html 文件中显示广告，以便它出现在每个页面上，但出现错误。

链接到我的论坛，页面底部有错误。 [https://50.97.99.170:8443/sitepreview/http/uta-ianmiller.edu/phpbb3/index.php?sid=7d1a7a17add3e8c9d2895eba4c632bb3](https://50.97.99.170:8443/sitepreview/http/uta-ianmiller.edu/phpbb3/index.php?sid=7d1a7a17add3e8c9d2895eba4c632bb3)

我只是将 Google 提供的 adsense 代码剪切并粘贴到网站 html 中，我收到了这个错误。有人对此有经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T17:35:28.727

无法访问您的网站，但如果您需要查看其他代码，这里是我的包含 adsense 的 phpbb3 论坛。只需在其上运行开发人员工具。

[http://forum.localdives.info](http://forum.localdives.info)

# javascript - 获取 li 标签内的锚值

> ID：10426773
> 
> 赞同：2
> 
> 时间：2012-05-03T07:13:49.640
> 
> 标签：javascript

我有这个代码：

```
<li class="email">
    <a href="mailto:abc@gmail.com">abc@gmail.com</a>
</li> 
```

我想`abc@gmail.com`使用**普通的 JavaScript**

我虽然这样做`document.getElementsByTagName("email")`了，但我不知道如何继续。

在用户的以下答案的帮助下，我设法找到了解决方案

```
var elem = document.querySelectorAll('.email');
var email = elem[0].children[0].innerHTML; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T07:16:37.030

```
var elems = document.querySelectorAll('.email');
for(var i = 0; i < elems.length; i++) {
    var elem = elems[i];
    console.log(elem.firstElementChild.getAttribute('href').substr(7));
} 
```

演示：http: [//jsfiddle.net/ThiefMaster/Cx2VY/](http://jsfiddle.net/ThiefMaster/Cx2VY/)

但是，`document.querySelectorAll`并非在所有浏览器中都可用。有些`document.getElementsByClassName)`也对你有用。但其他浏览器都没有。如果您不想要 jQuery 等，请考虑添加[**Sizzle 。它是 jQuery 和其他库使用的选择器引擎，可以减轻您处理跨浏览器内容的负担。**](http://sizzlejs.com/)

使用`querySelectorAll`or Sizzle 时，您可以通过删除`.firstChild`和使用选择器`.email > a`来简化代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T07:28:37.930

我的代码有错误，应该是这样才能获取“a”元素

```
var email=document.getElementsByClassName('email')[0].getElementsByTagName('a')[0]; 
```

现在您有了电子邮件对象，然后您可以像这样使用电子邮件对象处理其余部分

```
 alert(email.innerHTML); // will print abc@gmail.com 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T07:30:41.143

您需要跨浏览器解决方案吗？跨浏览器多少钱？

现代浏览器唯一的解决方案是：

```
[].forEach.call( document.getElementsByClassName( 'email' ), function( el ) {
    console.log( el.firstElementChild.textContent );
} ); 
```

Using`children[0]`使您可以抓取元素的子元素，而`firstElementChild`仅获取第一个元素子元素（而不是节点子元素，因为空格是节点子元素，而您不希望这样做）。

`forEach`, `getElementsByClassName`, `textContent`,`firstElementChild`甚至`querySelectorAll`不是跨浏览器（不适用于旧版浏览器）。

但是既然你想使用`querySelectorAll`，这意味着你至少支持 IE9（因为它在 IE8 中是错误的，并且在 IE7 中没有实现）。IE9 支持上面引用的所有方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T07:25:12.930

我认为这更像是跨浏览器：

```
function getElsByClassName(classname){
    var rv = []; 
    var elems  = document.getElementsByTagName('*')
    if (elems.length){
        for (var x in elems ){
            if (elems[x] && elems[x].className && elems[x].className == classname){
                rv.push(elems[x]);
            }
        }
    }
    return rv; 
}

//Get the li
var li = getElsByClassName("email"); //Alass, it returns an array
var a = li[0].firstChild; 
var email = a.getAttribute('href').substr(7); 
```

# java - 如何将Java ArrayList的元素移动到java中的文件

> ID：10426781
> 
> 赞同：-6
> 
> 时间：2012-05-03T07:14:23.820
> 
> 标签：java, file, arraylist, file-io

我有一个包含一些命令和平的 ArrayList 并且我想将列表中的所有元素移动到一个文件中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T07:19:04.890

让你的类实现可序列化。

打开包装 FileOutputStream 的 ObjectOutputStream

用 writeObject() 写整个 List

关闭 ObjectOutputStream。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T07:23:30.697

确保您的列表元素实现了[Serializable](http://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html)接口，然后您可以使用[ObjectOutputStream](http://docs.oracle.com/javase/7/docs/api/java/io/ObjectOutputStream.html)将对象写入文件并使用[ObjectInputStream](http://docs.oracle.com/javase/7/docs/api/java/io/ObjectInputStream.html)将它们读回。

您可以查看的另一个选项是使用[XStream](http://xstream.codehaus.org/)。您可以[在此处](http://xstream.codehaus.org/tutorial.html)查看如何使用它。

使用 XStream 而不是对象流的优点是，使用 XML 将为您提供人类可读的东西，它可以被其他平台处理，也不需要您实现 Serializable 接口，该接口使用`serialVersionUID`来将项目存储到一份文件。这可能会导致未加载在对您的类进行某些更改之前写入的项目。在这里查看[更多](http://c2.com/ppr/wiki/JavaIdioms/AlwaysDeclareSerialVersionUid.html)信息。

# c# - 使用委托

> ID：10426784
> 
> 赞同：1
> 
> 时间：2012-05-03T07:14:35.497
> 
> 标签：c#, delegates

[我在这里](http://msdn.microsoft.com/en-us/library/ms173172%28v=vs.80%29.aspx)阅读了一些关于使用委托的基础知识

我在 SO 上发布了一个问题，以下代码是答案的一部分。

可以将此语法转换为更像 MSDN 文章的语法，其中明确声明了委托等，或者在某些情况下这是编码它的唯一方法吗？

我正在寻找另一种编码方式的原因是，作为 c# 的新手，我发现这条线很难理解`this.BeginInvoke(new MethodInvoker(delegate`

```
private void myTimer_Elapsed(Object myObject,EventArgs myEventArgs){

        elapsedCounter++;
        elapsedTime = DateTime.Now.Subtract(startTime);

        if (elapsedTime.TotalMilliseconds < MaxTime)
        {
            this.BeginInvoke(new MethodInvoker(delegate
            {
                this.lblElapsedTime.Text = elapsedTime.ToString();

                if (elapsedCounter % 2 == 0)
                    this.lblValue.Text = EvenText;
                else
                    this.lblValue.Text = OddText;
            }));
        }
        else 
        {
            myTimer.Stop();
            myTimer.Dispose();
            //myProcess.Close();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:24:41.007

[`MethodInvoker`](http://msdn.microsoft.com/en-us/library/system.windows.forms.methodinvoker.aspx)只是一个预定义的委托，它不带参数并返回`void`：

```
public delegate void MethodInvoker() 
```

您可以完全自由地创建自己的委托，就像您链接到的示例一样：

```
private delegate void MyDelegate(); 
```

并替换`MethodInvoker`为`MyDelegate`.

在您的代码中，创建了一个[匿名方法](http://msdn.microsoft.com/en-US/library/0yw3tz5k.aspx)。匿名方法的优点是它可以访问在`myTimer_Elapsed`. 由于`elapsedTime`并且`elapsedCounter`似乎是在外部声明的，因此您可以将其替换为显式定义的方法，如下所示：

```
private void MyMethod() {
    this.lblElapsedTime.Text = elapsedTime.ToString();       

    if (elapsedCounter % 2 == 0)       
        this.lblValue.Text = EvenText;       
    else       
        this.lblValue.Text = OddText;       
}

private void myTimer_Elapsed(Object myObject,EventArgs myEventArgs){       
    ...

    if (elapsedTime.TotalMilliseconds < MaxTime)       
    {
        MyDelegate delegateToMyMethod = MyMethod;
        this.BeginInvoke(delegateToMyMethod);       
    }       
    else        
    {       
        ...
    }       
} 
```

# html - Div 无缘无故地获得额外的高度

> ID：10426786
> 
> 赞同：19
> 
> 时间：2012-05-03T07:14:43.803
> 
> 标签：html, css, cross-browser, height

我有一些这样的标记：

```
<div class="account-picture">
    <img src="http://i.imgur.com/Mcr3l.png">
</div> 
```

`div`需要向左浮动。图像为 128 像素 x 128 像素。

还有一些CSS：

```
.account-picture{
   float: left;
   background: #FFFFFF;
   padding: 10px;
   border: 1px solid red;
   font-size: 1px;
   overflow: hidden;
}

img{
   border: 1px solid #F8F8F8;
   overflow: hidden;
} 
```

但问题是似乎为 div 分配了一些额外的高度。firebug的布局图如下： ![在此处输入图像描述](../Images/c48367ec61162b7c47d14ac107cdd64f.png)

为什么 div 的高度会多出 2 个像素？为什么它在不同浏览器中有所不同？

*   Firefox 12：额外 2 像素
*   IE9：0.26px 额外
*   铬：0px 额外。

这是一个小提琴：http: [//jsfiddle.net/mWe5Y/](http://jsfiddle.net/mWe5Y/)

为什么会发生这种情况，我该如何摆脱那个额外的“高度”？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-03T07:20:22.867

因为 img 是一个内联元素。

为了摆脱额外的高度：

```
.account-picture img {
    display: block;
} 
```

# xcode - 从不同的 Mac 应用程序编辑 Xcode 项目的文件

> ID：10426787
> 
> 赞同：1
> 
> 时间：2012-05-03T07:14:45.723
> 
> 标签：xcode, applescript

我是脚本语言的新手。我有一个 mac 应用程序，它采用特定文件的路径说它是一个 .h 或 .m 文件。我可以使用一些脚本（如 applescript/shell 脚本等）编辑 .h 或 .m 文件吗？

# extjs4 - 如何更新表单 ExtJs Grid

> ID：10426795
> 
> 赞同：-1
> 
> 时间：2012-05-03T07:15:16.413
> 
> 标签：extjs4

我有以下情况，

1.  **用于输入用户的用户输入表单**。
2.  ****用于更新用户值的带有网格**和**编辑选项的****SearchUser**表单。当我单击网格中的编辑图标时，页面应重定向到**用户输入**表单，并在表单中填充值以进行更新。**

 ****搜索用户**

```
var searchUsers = new Ext.FormPanel({
                renderTo: "searchUsers",
                frame: true,            
                title: 'Search Users',
                bodyStyle: 'padding:5px',           
                width: 900,
                items:[{
                    xtype:'textfield',
                    fieldLabel: 'Username',
                    name: 'userName'            
                },{
                    xtype:'textfield',
                    fieldLabel: 'First Name',
                    name: 'firstName'
                },{
                    xtype:'textfield',
                    fieldLabel: 'Last Name',
                    name: 'lastName'
                },
                {
                    xtype: 'button',
                    text: 'Search',
                    listeners: {
                        click: function(){
                            Ext.Ajax.request({
                                method:'GET',
                                url : url+'/lochweb/loch/users/getUser',
                                params : searchUsers.getForm().getValues(),
                                success : function(response){
                                    //console.log(response);
                                    //swapStrore();
                                }
                            });
                        }                       
                    }
                },{
                    xtype: 'button',
                    text: 'Cancel',
                    listeners: {
                        click: function(){
                             window.location = url+'/lochportal/viewSuccessForm.do';
                        }                       
                    }
                },              
                grid = Ext.create('Ext.grid.Panel', {                   
                        //plugins: [rowEditing],
                        width: 900,
                        height: 300,
                        frame: true,                        
                        store: store,
                        iconCls: 'icon-user',
                        columns: [{
                            text: 'ID',
                            width: 40,
                            sortable: true,
                            dataIndex: 'id'
                        }, 
                        {
                            text: 'Name',
                            flex: 1,
                            sortable: true,
                            dataIndex: 'name',
                            field: {
                                xtype: 'textfield'
                            }
                        },
                        {
                            text: 'FirstName',
                            flex: 1,
                            sortable: true,
                            dataIndex: 'firstName',
                            field: {
                                xtype: 'textfield'
                            }
                        },
                        {
                            text: 'LastName',
                            flex: 1,
                            sortable: true,
                            dataIndex: 'lastName',
                            field: {
                                xtype: 'textfield'
                            }
                        },
                        {
                            text: 'Gender',
                            flex: 1,
                            sortable: true,
                            dataIndex: 'gender',
                            field: {
                                xtype: 'textfield'
                            }
                        },
                        {
                            text: 'Email',
                            flex: 1,
                            sortable: true,
                            dataIndex: 'email',
                            field: {
                                xtype: 'textfield'
                            }
                        },
                        {
                             xtype: 'actioncolumn',
                             width: 100,
                             items:[{
                                    icon   : '/lochportal/extJS/resources/themes/images/access/window/edit.gif',  // Use a URL in the icon config
                                    tooltip: 'Sell stock',
                                    handler: function(grid, rowIndex, colIndex) {
                                        var rec = store.getAt(rowIndex);
                                        //alert("Sell " + rec.get('id'));
                                        updateUsers(rec.get('id'));
                                    }
                                }]

                        }]
                    })]     
            }); 
```

**创建用户**

```
var userForm = new Ext.FormPanel({      
        renderTo: "userCreation",
        frame: true,
        title: 'Create New User',
        bodyStyle: 'padding:5px',           
            width: 500,
        items: [{
                xtype: 'textfield',
                fieldLabel: 'UserName',
                name: 'userName',
                allowBlank:false
                }{
                xtype:'combo',
                fieldLabel: 'Role',
                name: "role",
                id: "role",
                    queryMode:'local',
                store:role,
                displayField: 'rolename',
                valueField: 'id',            
                emptyText: "Select",
                editable: false,
                allowBlank:false
                    },{
                xtype: 'textfield',
                fieldLabel: 'FirstName',
                name: 'firstName',
                vtype : 'alpha',
                allowBlank:false
                },{
                xtype: 'textfield',
                fieldLabel: 'MiddleName',
                name: 'middleName',
                vtype : 'alpha'             
                },{
                xtype: 'textfield',
                fieldLabel: 'LastName',
                name: 'lastName',
                vtype : 'alpha'
                },{
                xtype: 'textfield',
                fieldLabel: 'Email',
                name: 'email',
                vtype: 'email',
                allowBlank:false
                }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T12:15:22.427

您应该首先阅读 Sencha 的 MVC 架构指南：[http ://docs.sencha.com/ext-js/4-0/#!/guide/getting_started](http://docs.sencha.com/ext-js/4-0/#!/guide/getting_started)

ExtJs 应用程序通常只有一页，所有导航都在内部完成，无需更改位置地址。**

# php - 如何在 Kohana 中使用 MongoDB？

> ID：10426796
> 
> 赞同：2
> 
> 时间：2012-05-03T07:15:49.340
> 
> 标签：php, mongodb, kohana, mongodb-php

请给我一些关于如何在 Kohana [v3.2] 中使用 MongoDB 的启动指南。

[我从Mongo Module for kohana](https://github.com/Wouterrr/MangoDB)下载了 Kohana 模块， 并为 PHP 设置了 MongoDB 驱动程序。现在我正在尝试创建一个新数据库并将记录保存到其中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T04:38:16.237

您实际上并不需要链接到的 Kohana 的 MangoDB 模块。您可以只使用 PHP 的 MongoDB Native Driver。mongo 查询语言非常简单，如果您了解一些 MySQL，那么此页面会有所帮助...

[http://www.php.net/manual/en/mongo.sqltomongo.php](http://www.php.net/manual/en/mongo.sqltomongo.php)

这是一个使用驱动程序的示例，它连接、启动并插入新集合，然后选择集合中的所有数据...

```
$m = new Mongo();

$db = $m->my_database;

$db->my_new_collection->insert(array("a" => 1, "b" => 1));

$found_data = $db->my_new_collection->find(); 
```

[在http://www.php.net/manual/en/mongo.manual.php](http://www.php.net/manual/en/mongo.manual.php)查看更多信息

如果您想使用 MangoDB，那么我建议您阅读代码并查看 kohana 论坛以获取相关信息。

[http://forum.kohanaframework.org/search?Search=mangodb](http://forum.kohanaframework.org/search?Search=mangodb)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T07:22:21.053

你试过什么了？StackOverflow 适用于当您遇到问题并尝试了所有可能的情况时。这不是一个仅仅因为你正在学习新技术并且懒得自己学习的地方

买一本书；搜索 MongoDB 文档；使用谷歌并尝试一些事情。你可能会让自己大吃一惊，并在没有任何帮助的情况下让事情顺利进行，如果你这样做了，你会比让别人为你做艰苦的工作学到更多。

# go - C++ 中缺少什么？

> ID：10426797
> 
> 赞同：0
> 
> 时间：2012-05-03T07:15:52.760
> 
> 标签：go

Go 是一门简单的语言，大约有 25 个关键字。因为它很简单，所以我想知道与 C++ 或 C# 等其他语言相比它没有什么（IMO 比 C++ 更复杂）

我理解它的简单 bc 它有更少的关键字和其他东西，但我不知道语言所以它必须权衡或因为这个决定而遗漏了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T08:19:00.823

# php - 如何获取我的 Facebook 应用程序的所有帖子？

> ID：10426798
> 
> 赞同：0
> 
> 时间：2012-05-03T07:15:54.790
> 
> 标签：php, facebook-graph-api

我想从我的应用程序中发布所有帖子。

```
$fql = "SELECT post_id, app_id,attribution,message WHERE source_id = 188600424497292";
    $param = array (
    'method' => 'fql.query',
    'query' => $fql,
    'callback' => ""
    );
    $fqlResult = $facebook->api($param);

    echo "<pre>";print_r($fqlResult); echo "</pre>"; 
```

任何身体都可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:56:00.870

我不确定这是您真正需要的，但是您可以在将来的参考中使用它。

这是我们通常如何获取应用程序完成的帖子或共享的计数，我们有自己的本地数据库，只要有帖子，计数就会增加。

这是一个示例函数，它将发布到用户墙，成功后我们通过 ajax 调用调用函数并插入计数。

```
function shareToOwnWall()
{
    FB.ui(
            {
                method: 'feed',
                name: 'name of the app',
                picture: 'picture',
                caption: ' ',
                description: 'description',
                link : 'appurl'
            },
            function(response) {
                    if(response != false) {
                        jQuery.ajax({
                           url: 'module/action',
                           type: "POST",
                           data: {app_id: <?php echo $appId ?> ,shareCount: 1, signed_request: '<?php echo $_REQUEST['signed_request']?>'},
                           success: function (resp){
                           }
                       });
                    }
            }
        );
} 
```

# gwt - 托管动态演示者小部件的选项卡容器

> ID：10426810
> 
> 赞同：1
> 
> 时间：2012-05-03T07:17:01.133
> 
> 标签：gwt, tabs, gwt-platform

我想显示一个选项卡容器，其中每个选项卡都托管一个 PresenterWidget。

选项卡是动态的 - 它们可以打开和关闭。此外，当前选定的选项卡应该以某种方式永久保存在 URL 中，以便可以共享或添加书签。

我看到 GWTP 有 TabContainerPresenter，但它是用于在每个选项卡上托管 Presenter 而不是 PresenterWidget。您也不能动态添加选项卡，并且与位置的关系（当然）是静态的。

我还看到一些关于这个问题的讨论，说如果选项卡托管 PresenterWidget，则不需要特殊实现，因此我们可以使用任何选项卡容器。例如 GWT TabLayoutPanel。

但我不明白如何在选项卡选择时调用我的 PresenterWidget（托管在选项卡中）生命周期，或者我应该怎么做才能使生命周期正常工作（onReveal、onReset ...）？

我想我必须构建自己的标签容器，通过插槽管理可见内容？

还有其他想法吗？

本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T01:30:27.463

Ben，TabContainerPresenter 仅适用于每个选项卡是一个地方的情况。至于您的问题，您只需要在每个选项卡中设置相同的演示者小部件。如果您将演示者小部件注入多个选项卡中，您可能希望演示者小部件不是单例。这是在主演示者的插槽中设置演示者小部件的示例：

```
@Override
protected void onBind() {
    super.onBind();
    setInSlot(TYPE_PermitContent, permitPresenter);
    setInSlot(TYPE_ErpMessageContent, orgErpMessagePresenter); 
    setInSlot(TYPE_ContractDetailContent, contractDetailPresenter);
} 
```

然后在视图上，在我的示例许可证和 erp 上是 TabLayoutPanel 中的选项卡：

```
@Override
    public void setInSlot(Object slot, Widget content) {
        if (content == null) return;

        if (slot == ContractPopupWithTabPresenter.TYPE_PermitContent) {
            permit.clear();
            permit.add(content);
        } else if (slot == ContractPopupWithTabPresenter.TYPE_ErpMessageContent) {
            erp.clear();
            erp.add(content);
        } else if (slot == ContractPopupWithTabPresenter.TYPE_ContractDetailContent) {
            contractDetail.clear();
            contractDetail.add(content);
        } else {
            super.setInSlot(slot, content);
        }
    } 
```

然后在您的 TabLayoutPanel 上添加一个 beforeSelection 处理程序，它可能看起来像这样：

```
tabPanel.addBeforeSelectionHandler(new BeforeSelectionHandler<Integer>() {
        @Override
        public void onBeforeSelection(BeforeSelectionEvent<Integer> event) {
            //TODO: Set your presenter widget here with whatever argument it needs to populate itself
        }
    }); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:24:13.807

如果任何选定的选项卡应该在 URL 中保持不变，那么它就是一个 Place，因此应该由 Presenter 表示，而不是由 PresenterWidget 表示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T15:24:27.070

这是 UiBinder 实现的示例，这当然是静态实现，如果在运行时确定选项卡的数量，您需要自己制作动态实现。

```
<g:PopupPanel styleName="{style.popupPanel}" modal="true">
        <g:HTMLPanel>
            <g:HTMLPanel styleName="titleHeader" height="20px">
                <g:Label styleName="titleHeaderCaption" ui:field="titleLabel" />
                <g:Image styleName="titleImage" ui:field="titleCloseImage" url="{images.actionCancel.getURL}"/>
            </g:HTMLPanel>
            <g:CaptionPanel captionText="{lbl.contractDetails}" styleName="captionPanel_popup">
                <g:HTMLPanel ui:field="contractDetail"/>
            </g:CaptionPanel>
            <g:TabLayoutPanel ui:field="tabPanel" barUnit="PX" barHeight="30">
                <g:tab>
                    <g:header size="7"><b>Permit</b></g:header>
                    <g:HTMLPanel ui:field="permit"/>
                </g:tab>
                <g:tab>
                    <g:header size="7"><b>ERP</b></g:header>
                    <g:HTMLPanel ui:field="erp"/>
                </g:tab>
            </g:TabLayoutPanel>
            <g:HTMLPanel styleName="{style.separator}">
                <hr/>
            </g:HTMLPanel>
            <g:HTMLPanel styleName="buttons">
                <g:Button text="{lbl.cancel}" styleName="button" ui:field="btnCancel"/>
                <g:Button text="{lbl.submit}" styleName="button" ui:field="btnSubmit"/>
            </g:HTMLPanel>
        </g:HTMLPanel>
    </g:PopupPanel> 
```

# iphone - 如何比较自定义 UITableViewCel 中的标签是否为空？

> ID：10426811
> 
> 赞同：0
> 
> 时间：2012-05-03T07:17:05.113
> 
> 标签：iphone, ios, xcode, uitableview

我有一个带有 2 个 dateLabels 的自定义 TableViewCell，当 coreData 没有保存任何内容时，我的 dateLabel 应该选择一个示例日期。但是当一个日期被设置时，我想在我的标签中显示它。我用下面的代码试过了，但我不能正常工作。

你能帮我吗？

这是我的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"produktCell";

    ProduktTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[ProduktTableViewCell alloc] initWithFrame:CGRectZero];
    }
    NSManagedObject *managedObject = [self.fetchedResultsController objectAtIndexPath:indexPath];

    cell.produktnameLabel.text = [managedObject valueForKey:@"produktname"]; 
    NSLog(@"%@",cell.vonDatumLabel.text);

    if ([cell.vonDatumLabel.text length] > 1){
        cell.vonDatumLabel.text = [managedObject valueForKey:@"vondatum"];
        cell.bisDatumLabel.text = [managedObject valueForKey:@"bisdatum"]; 

    }else {
        cell.vonDatumLabel.text = dateString;
        cell.bisDatumLabel.text = dateString1;
    }

        cell.datumButton.tag = indexPath.row;
    cell.warenkorbButton.tag = indexPath.row;
    cell.menge.tag = indexPath.row + 437812;
    cell.mengeLabel.text = [managedObject valueForKey:@"mengelabel"];

    NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
    NSLocale *german = [[NSLocale alloc] initWithLocaleIdentifier:@"de_DE"];
    [formatter setLocale:german];
    [formatter setNumberStyle:NSNumberFormatterCurrencyStyle];
    [formatter setMinimumFractionDigits:2];
    [formatter setMaximumFractionDigits:2];

    NSNumber *firstNumber = [managedObject valueForKey:@"preis"];

    cell.preisLabel.text = [formatter stringFromNumber:firstNumber];

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T07:23:01.537

```
Make if condition like this 

if ([[managedObject valueForKey:@"produktname"] length] > 1){
        cell.vonDatumLabel.text = [managedObject valueForKey:@"vondatum"];
        cell.bisDatumLabel.text = [managedObject valueForKey:@"bisdatum"]; 

    }else {
        cell.vonDatumLabel.text = dateString;
        cell.bisDatumLabel.text = dateString1;
    }

Surely this will help ful 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T07:25:37.117

使用这个我认为这对你有用。

```
 [cell.vonDatumLabel.text isEqualToString: dateString];
   [cell.bisDatumLabel.text isEqualToString: dateString1]; 
```

# windows - 在 Windows 7 上的 MSFlexGrid 中使用科学计数法格式化的数字

> ID：10426812
> 
> 赞同：1
> 
> 时间：2012-05-03T07:17:12.787
> 
> 标签：windows, vb6, number-formatting, msflexgrid

我在 Windows 7 和 Office 2010 上安装了一个 vb6 应用程序。

此应用程序在 xp/vista 和 Ms access 2007 上运行良好。

MsflexGrid 在赢七时显示错误的数字，带有符号“E”，如 4526E ...

可能是什么问题呢。是访问2010吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:25:31.790

`1.2E+34`当数字包含大量有效零时，这是一种完全有效的格式：

```
?cdbl(12000000000000000000000000000000000)
 1.2E+34 
```

当显示相同的数据时，相同的网格会有所不同吗？

数字从何而来？如果它们是由代码（与数据绑定）添加的，那么您可以使用`Format()`显式格式字符串，而不是让 Windows 做它认为最好的事情。

# java - 我正在使用小数格式并将舍入模式设置为向下

> ID：10426816
> 
> 赞同：0
> 
> 时间：2012-05-03T07:17:32.933
> 
> 标签：java, jakarta-ee, decimalformat

我正在使用十进制格式并将舍入模式设置为向下 部署时出现错误：

```
 cannot find symbol
    [javac] symbol  : method setRoundingMode(java.math.RoundingMode)
    [javac] location: class java.text.DecimalFormat
    [javac]         df.setRoundingMode(RoundingMode.DOWN); 
```

有人可以帮我吗？？？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T07:28:37.667

您可能正在使用包含`setRoundingMode()`Java 1.6 中引入的方法的 Java 版本编译您的代码，同时将您的应用程序部署到引入该方法之前的 Java 版本（可能是 Java 1.5）的 JVM。

# javascript - 如何在 HTML5 的“视频”标签中使用 youtube 视频作为来源

> ID：10426821
> 
> 赞同：6
> 
> 时间：2012-05-03T07:17:52.633
> 
> 标签：javascript, html, youtube-api, html5-video, dom-events

我需要将 YouTube 视频作为 HTML5 中视频标签的来源，一旦视频播放完毕，“onended”事件就会触发，因为我编写了某种可以运行的脚本。

```
<video id="videoSource" style="visibility:visible" width="1000" height="500" controls="controls"  onended="hideVideo()">
<source src="**Youtube Video Link Goes here**" type="video/mp4" />
</video>

<script type="text/javascript">
function hideVideo() {
document.getElementById("videoSource").style.visibility="hidden";
}
</script> 
```

这里所有的本地视频文件都可以正常工作，唯一的事情是我需要提供一个 YouTube 视频作为它不起作用的来源，所以请任何知道这帮助我的人..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T07:37:11.157

Html5 不支持 youtube url，如果您需要网站的视频 src，您可以执行以下操作：

第 1 步：添加`&html5=True`到您喜欢的 youtube 网址

第 2 步：在源代码中查找`<video/>`标签

第 3 步：添加`controls="controls"`到视频标签：`<video controls="controls"..../>`

例子：

```
<video controls="controls" 
       class="video-stream" 
       x-webkit-airplay="allow" 
       data-youtube-id="N9oxmRT2YWw" 
       src="http://v20.lscache8.c.youtube.com/videoplayback?sparams=id%2Cexpire%2Cip%2Cipbits%2Citag%2Cratebypass%2Coc%3AU0hPRVRMVV9FSkNOOV9MRllD&amp;itag=43&amp;ipbits=0&amp;signature=D2BCBE2F115E68C5FF97673F1D797F3C3E3BFB99.59252109C7D2B995A8D51A461FF9A6264879948E&amp;sver=3&amp;ratebypass=yes&amp;expire=1300417200&amp;key=yt1&amp;ip=0.0.0.0&amp;id=37da319914f6616c"></video> 
```

注意似乎有些`expire`东西。`src`我不知道字符串会工作多久。

还在测试自己。

*请注意，此视频 src 特定于您用于检索页面源的浏览器。我认为 Youtube 会动态地生成这个 HTML（至少目前是这样），所以在测试我是否在 Firefox 中复制时，这适用于 Firefox，但不适用于 Chrome。*

# ios - iOS 在 iPhone 上启动 Maps-App in-App。

> ID：10426822
> 
> 赞同：1
> 
> 时间：2012-05-03T07:17:59.480
> 
> 标签：ios, iphone, objective-c, google-maps, uiapplication

我使用以下代码在我的 iPhone 应用程序中使用 google-URL 启动地图应用程序：

```
NSString *urlString = 
[NSString stringWithFormat:@"http://maps.google.com/maps?q=%@ %@&layer=t",   latitute.text,longitute.text];

NSString* encodedString =
[urlString stringByAddingPercentEscapesUsingEncoding:
 NSUTF8StringEncoding];

NSURL *aURL = [NSURL URLWithString:encodedString];

[[UIApplication sharedApplication] openURL:aURL]; 
```

使用“layer=t”，我将自动打开流量层。使用浏览器，地图显示图层，而不是在地图应用程序中。

有没有人有这个问题的解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-12T11:52:30.803

浏览器和iOS url方案不一定相同，你需要的是：

```
NSString *urlString = 
[NSString stringWithFormat:@"http://maps.google.com/maps?q=%@ %@&views=traffic", latitute.text, longitute.text]; 
```

有关更多信息和参数，您可以在此处查看 Google 文档：[https ://developers.google.com/maps/documentation/ios/urlscheme](https://developers.google.com/maps/documentation/ios/urlscheme)

# coldfusion - 为分组项目定义一个 id 列表

> ID：10426824
> 
> 赞同：1
> 
> 时间：2012-05-03T07:18:18.873
> 
> 标签：coldfusion, cfquery, cfoutput

我有一个小问题，我就是不明白，问题是什么，我该如何解决，我有一个coldfusion变量，例如`#account_code#`，首先，这段代码看起来像这样：（`100.001.001`有一堆cource) 并且我有这个变量的一些值，比如`sum(nettotal)`我按 this 分组的 cfquery `#account_code#`，我想要的只是设置这些代码的列表，因此我定义了列表，例如`<cfset code_list='100.001.001,100.001.002'>`在查询中：`account_code in (#code_list#)`我也尝试了这个，`account_code in ('#code_list#')`但是它给出了错误，它说'.001'附近的语法不正确。据我了解，我需要以某种方式替换这些点，并在没有它们的情况下定义代码 id。谢谢大家的帮助！我真的很感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T08:00:37.233

如果我理解您的问题实际上是您如何正确使用 SQL IN 子句。

SQL IN 子句采用值列表，如果这些值是数字，则不需要引用它们，但是您的代码是字符串，因此需要引用每个值

```
select * from tbl
where id in ('100.001.001','100.001.002') 
```

在 ColdFusion 中，正确的方法是使用 <cfqueryparam> 和 list=true

```
<cfset code_list='100.001.001,100.001.002'>
<cfquery name="qSomething" ...>
select * from tbl
where id in (
  <cfqueryparam list="true" 
    value="#code_list#"
    cfsqltype="cf_sql_varchar" />
)
</cfquery> 
```

这会将您的列表转换为查询中的多个参数，如果您的 code_list 实际上是由表单或 url 变量传递的，则有助于保护您免受 SQL 注入攻击。

# django - Heroku/Django/Zennia 安装。怎么办？

> ID：10426826
> 
> 赞同：1
> 
> 时间：2012-05-03T07:18:47.943
> 
> 标签：django, heroku, blogs

我最近在 Heroku 上通过 django 实现了 django-blog zinnia 的副本。这是正在运行的网站的链接。[http://warm-snow-8555.herokuapp.com](http://warm-snow-8555.herokuapp.com)

我通过遵循三个不同的教程（[Django's](https://docs.djangoproject.com/en/1.3/intro/tutorial01/)、[Zennia's](http://django-blog-zinnia.com/documentation/getting-started/install/#urls)和[Heroku's ）](https://devcenter.heroku.com/articles/django)创建了这个。我想将博客从默认外观更改为我自己的，但我不确定我应该如何完成。

1.  是否有实现自己版本的其他人的 django 应用程序的一般最佳实践？

目前，我的 urls.py 这样做：

```
urlpatterns = patterns('',
url(r'^$', include('zinnia.urls')),
url(r'^weblog/', include('zinnia.urls')),
url(r'^comments/', include('django.contrib.comments.urls')),
url(r'^admin/', include(admin.site.urls)),
) 
```

...它有效，但百日草在 venv 文件夹中（由 virtualenv 创建），我对这些文件所做的任何更改都不会持续到在线的 heroku 版本。

1.  我应该只复制`\venv\Lib\site-packages\zinnia`目录中的所有内容并完全摆脱对 zinni 目录的 url 引用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:17:23.960

不幸的是，这个问题背后确实有很多东西。这不仅涉及数据库持久性，还涉及各种其他因素。

我不想回答这个问题，只想将您链接到官方 Django 文档。我要做的是自己阅读[官方教程](https://docs.djangoproject.com/en/1.4/intro/tutorial01/)，并确保您了解它的工作原理。

您的问题可能是您尚未设置和/或配置数据库。

# android - 当我放大/缩小时，地图上的弹出式叠加层远离大头针

> ID：10426830
> 
> 赞同：1
> 
> 时间：2012-05-03T07:19:21.303
> 
> 标签：android

我正在创建一个应用程序，我需要在地图上显示一些带有大头针的位置。当用户点击大头针时，它应该在地图上显示一个弹出对话框以显示有关该位置的一些信息。一切正常，但是当我放大/缩小地图弹出对话框移动很远/从/靠近销。

```
 package com.wheelz.util;

import java.util.ArrayList;

import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.Point;
import android.graphics.drawable.Drawable;
import android.view.LayoutInflater;
import android.widget.LinearLayout;
import android.widget.TextView;

import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapView;
import com.google.android.maps.OverlayItem;
import com.google.android.maps.Projection;
import com.wheelz.R;
import com.wheelz.fragment.CarHomeZoneFragment;
import com.wheelz.fragmentactivity.SearchFragmentActivity;

public class HoemZoneOverlay extends com.google.android.maps.ItemizedOverlay {
    private static final String TAG ="MyOVerlayItem";
    GeoPoint p;
    MapView map;
    private LinearLayout popUpLayout;
    private ArrayList<OverlayItem> aList = null;
//  CarHomeZoneFragment homeZoneFrag;
     Paint circlePaint;
     Paint circleBorder;
     String CarName;
     String OwnerName;
    public HoemZoneOverlay(Drawable defaultMarker,MapView mView, GeoPoint point, String carname, String ownername) {
        super(boundCenterBottom(defaultMarker));
        // TODO Auto-generated constructor stub
        //homeZoneFrag = carHomeZoneFragment;
        this.map = mView;
        this.p = point;
        this.CarName    =   carname;
        this.OwnerName  =   ownername;
         aList          =   new ArrayList<OverlayItem>(); 
        circlePaint = new Paint( Paint.ANTI_ALIAS_FLAG );
              circlePaint.setARGB(51,62, 167, 171);

            //  circlePaint.setColor(new Color);                      
              circlePaint.setStrokeCap(Paint.Cap.ROUND);
              circlePaint.setAntiAlias(true);
              circlePaint.setStyle(Paint.Style.FILL_AND_STROKE);
              circlePaint.setDither(false);

        circleBorder = new Paint();
        circleBorder.setARGB(255, 62, 167, 171);
        circleBorder.setStrokeWidth(2);
        circleBorder.setStrokeCap(Paint.Cap.ROUND);
        circleBorder.setAntiAlias(true);
        circleBorder.setDither(false);
        circleBorder.setStyle(Paint.Style.STROKE);

            /*  circleBorder = new Paint();
              circleBorder.setARGB(0, 62, 167, 171);
              circleBorder.setStrokeWidth(2);
              circleBorder.setStyle(Paint.Style.STROKE);*/

    }

    @Override
    protected OverlayItem createItem(int i) {
        // TODO Auto-generated method stub
        return  aList.get(i);
    }

    @Override
    public int size() {
        // TODO Auto-generated method stub
        return aList.size();
    }
    public void addOverlay(OverlayItem overlay){
        aList.add(overlay);
        populate();
    }

    public boolean onTap (final GeoPoint point, final MapView map){
        boolean tapped = super.onTap(point, map);
        if (tapped){
            if(  map.getChildCount() <= 0 )
           showPopUp(p,map);        
        }           
        else{
            hidePopUp();
            }                   
        return true;
    }

    //You must have this method, even if it doesn't visibly do anything

    @Override
    protected boolean onTap(int index) {

        return true;
    }

     @Override
      public boolean draw(Canvas canvas, MapView mapView, 
      boolean shadow, long when) 
      {
          super.draw(canvas, mapView, shadow);                   

          //---translate the GeoPoint to screen pixels---

          /*Point screenPts = new Point();
          p = aList.get(0).getPoint();
          mapView.getProjection().toPixels(p, screenPts);*/

          //--------------draw circle----------------------            

          Point pt = mapView.getProjection().toPixels(p,null);
          float radius =   mapView.getProjection().metersToEquatorPixels(200);
        //  float radius = (float) Math.pow(2, mapView.getZoomLevel() - 9);

         /* if(radius < canvas.getHeight()/25){
              radius = canvas.getHeight()/25;
          }*/
        //  canvas.drawCircle(screenPts.x, screenPts.y, radius, circlePaint);           
         canvas.drawCircle(pt.x, pt.y, radius, circlePaint);
         canvas.drawCircle(pt.x, pt.y, radius, circleBorder);
          //---add the marker---
        /*  Bitmap bmp = BitmapFactory.decodeResource(
              WheelzApplication.getInstance().getResources(), R.drawable.marker);            
          canvas.drawBitmap(bmp, screenPts.x, screenPts.y-bmp.getHeight(), null);    */        
          super.draw(canvas,mapView,shadow);

          return true;

      }
    /*public boolean onTouchEvent(MotionEvent event,MapView map){
        //---when user lifts his finger---
        if(event.getAction()==1){

                if( homeZoneFrag.popUpLayout != null ){
                    homeZoneFrag.hidePopUp();
                }
            return true;
        }
        else
            return false;

    }*/

     public void showPopUp( GeoPoint gp,MapView map ){
            System.out.println("coming in showpopup####################################  :"+gp);
            //GeoPoint gp= item.getPoint();
            Point p= new Point();
            Projection projection= map.getProjection();
            p = projection.toPixels(gp, p);
            p.y-=50;
            GeoPoint g= projection.fromPixels(p.x, p.y);

            popUpLayout = (LinearLayout) LayoutInflater.from(SearchFragmentActivity.mContext).inflate(R.layout.popup, null);
            final MapView.LayoutParams lp2 = new MapView.LayoutParams(
            MapView.LayoutParams.WRAP_CONTENT,
            MapView.LayoutParams.WRAP_CONTENT,
            g,
            MapView.LayoutParams.BOTTOM_CENTER);
            String Car_Owner_Name = (OwnerName+"'s "+CarName).toString();
            TextView name = ( TextView )popUpLayout.findViewById(R.id.car_owner_name_homezone);
                     name.setText( Car_Owner_Name );

            map.addView(popUpLayout,lp2);
            map.postInvalidate();
            map.getController().animateTo(gp);
            }

     public void hidePopUp() {
            System.out.println("onclick listener hide popup");
            if( map != null ){
            map.removeView( popUpLayout );

            map.invalidate();
            }

        }

     public void cleanUp(){
         if( map != null ){
             popUpLayout = null;
             map.removeAllViews();
         }
          //homeZoneFrag    = null  ;
          circlePaint   = null  ;
          circleBorder  = null  ;
          CarName       = null  ;
          OwnerName     = null  ;
     }
} 
```

任何人都可以告诉我，即使在放大/缩小地图后，我如何才能始终在图钉上方弹出对话框。

谢谢

# android - 在编译时省略类

> ID：10426832
> 
> 赞同：3
> 
> 时间：2012-05-03T07:19:38.047
> 
> 标签：android

我正在 Android 本机应用程序层中开发一个应用程序。

我最初是为 ICS 开发它，但现在我也必须将相同的代码库移植到 GingerBread。

在 ICS 的实现过程中，我使用了 ICS 的隐藏类，但这些类在 GingerBread 中不存在。

我想为两个版本（ICS 和 GingerBread）保留相同的代码库。

有没有一种方法可以让我在编译 GingerBread 的源代码时省略几个类，并在我需要 ICS 时包含它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T07:26:38.777

当支持多个 API 级别时，您通常希望将目标 API 级别设置为尽可能新，并将最小值设置为您想要支持的最低级别。然后，您可以动态加载代码，因此您无需编译不同版本的应用程序。

官方开发者资源有一篇关于这个主题的优秀文章：http: [//developer.android.com/training/basics/supporting-devices/platforms.html](http://developer.android.com/training/basics/supporting-devices/platforms.html)

# .net - 检测 RichTextBox 中的图像

> ID：10426834
> 
> 赞同：4
> 
> 时间：2012-05-03T07:19:41.290
> 
> 标签：.net, vb.net, winforms, richtextbox

我`RichTextBox`在我的表单上使用了一个控件。我想要一个小代码，它可以检测是否在 rtb 中插入了任何图像。（IDE VS 2008）

例如，用户可以只键入一些文本或插入图像（Ctrl + V）。现在，如果我们选择一个图像，那么我们可以获得类型，但我想要一个扫描 rtb 内容的代码，如果插入图像，则返回 true，如果没有，则返回 false。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T11:27:40.907

```
Private Sub Button1_Click(ByVal sender As System.Object, _
    ByVal e As System.EventArgs) Handles Button1.Click

    OpenFileDialog1.ShowDialog()
    Dim img As Image = Image.FromFile(OpenFileDialog1.FileName)
    Clipboard.SetImage(img)
    RichTextBox1.Paste()
End Sub

Private Sub Button2_Click(ByVal sender As System.Object, _  
    ByVal e As System.EventArgs) Handles Button2.Click
    MsgBox("contains image: " & RichTextBox1.Rtf.Contains("\pict\wmetafile8\"))
End Sub 
```

它搜索richtextbox 内部代码，“\pict\wmetafile8\”是图片标签。

# forms - 视图辅助元素的表单验证 zend fram

> ID：10426836
> 
> 赞同：1
> 
> 时间：2012-05-03T07:19:50.867
> 
> 标签：forms, validation, zend-framework, filter

[我想为使用view-helper](http://framework.zend.com/manual/en/zend.view.helpers.html)生成的表单元素添加过滤器，我在 index.phtml 页面中这样做

```
 <label>Email</label>
 <?php echo $this->formText('email', 'you@example.com', array('size' => 32)) ?> 
```

我想使用这种创建表单元素的方式，因为我进行选项卡式浏览，并使用 jquery 在选项卡之间切换。

如何针对 XSS 向此元素添加过滤器并为电子邮件格式制作正则表达式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:35:01.330

```
<label>Email</label>
 <?php echo $this->formText('email', $this->escape('you@example.com'), array('size' => 32)) ?> 
```

阅读此[http://framework.zend.com/manual/en/zend.filter.input.html](http://framework.zend.com/manual/en/zend.filter.input.html)以将验证器和过滤器链接在一起以创建一个笼子。

# c# - 检测季度最后一个月的第三个星期五

> ID：10426840
> 
> 赞同：5
> 
> 时间：2012-05-03T07:19:59.413
> 
> 标签：c#, datetime, date

我需要检测**当前日期是否是本季度最后一个月的第三个星期五**。

对于 2012 年，这将是这四个日期：

*   2012-03-16
*   2012-06-15
*   2012-09-21
*   2012-12-21

在 C# 中执行此操作的好方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T07:37:25.353

或者，您可以不使用任何循环并简单地*假设*今天是第 3 个星期五，然后找到 2 周前的哪一天（应该是同一个月的星期五以进行正匹配）：

```
var now = DateTime.UtcNow;
var firstFriday = now.AddDays(-14);
return now.Month % 3 == 0
    && firstFriday.DayOfWeek == DaysOfWeek.Friday
    && now.Month == firstFriday.Month; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T07:27:56.247

那么你可以从那个月的第一天开始，直到你找到第一个星期五，发布你可以增加 14 天到达第三个星期五

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T11:50:27.453

您可以使用[.NET 的时间段库](http://www.codeproject.com/Articles/168662/Time-Period-Library-for-NET)：

```
// ----------------------------------------------------------------------
public DateTime? GetDayOfLastQuarterMonth( DayOfWeek dayOfWeek, int count )
{
  Quarter quarter = new Quarter();
  Month lastMonthOfQuarter = new Month( quarter.End.Date );

  DateTime? searchDay = null;
  foreach ( Day day in lastMonthOfQuarter.GetDays() )
  {
    if ( day.DayOfWeek == dayOfWeek )
    {
      count--;
      if ( count == 0 )
      {
        searchDay = day.Start.Date;
        break;
      }
    }
  }
  return searchDay;
} // GetDayOfLastQuarterMonth 
```

现在您进行检查：

```
// ----------------------------------------------------------------------
public void CheckDayOfLastQuarterMonth()
{
  DateTime? day = GetDayOfLastQuarterMonth( DayOfWeek.Friday, 3 );
  if ( day.HasValue && day.Equals( DateTime.Now.Date ) )
  {
    // do ...
  }
} // CheckDayOfLastQuarterMonth 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T00:38:00.000

```
// Do a few cheap checks and ensure that current month is the last month of 
// quarter before computing the third friday of month
if (Cur.DayOfWeek == DayOfWeek.Friday && Cur.Day > 14 && Cur.Month % 3 == 0) {
    var Friday = new DateTime(Cur.Year, Cur.Month, 15);
        Friday = Friday.AddDays((5 - (int)Friday.DayOfWeek + 7) % 7);
    if (Cur.Day == Friday.Day)
        return true;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T09:05:56.470

使用 Bert Smith 在[This Answer](https://stackoverflow.com/questions/6140018/how-to-calculate-2nd-friday-of-month-in-c-sharp)中编写的扩展方法这是`IsThirdFridayInLastMonthOfQuarter`完全符合您要求的方法：

```
public static class DateHelper
{
    public static DateTime NthOf(this DateTime CurDate, int Occurrence, DayOfWeek Day)
    {
        var fday = new DateTime(CurDate.Year, CurDate.Month, 1);

        var fOc = fday.DayOfWeek == Day ? fday : fday.AddDays(Day - fday.DayOfWeek);
        // CurDate = 2011.10.1 Occurance = 1, Day = Friday >> 2011.09.30 FIX. 
        if (fOc.Month < CurDate.Month) Occurrence = Occurrence + 1;
        return fOc.AddDays(7 * (Occurrence - 1));
    }

    public static bool IsThirdFridayInLastMonthOfQuarter(DateTime date)
    {
        // quarter ends
        int[] months = new int[] { 3, 6, 9, 12 };

        // if the date is not in the targeted months, return false.
        if (!months.Contains(date.Month))
            return false;

        // get the date of third friday in month
        DateTime thirdFriday = date.NthOf(3, DayOfWeek.Friday);

        // check if the date matches and return boolean
        return date.Date == thirdFriday.Date;
    }
} 
```

要使用它：

```
bool isThirdFriday = DateHelper.IsThirdFridayInLastMonthOfQuarter(date); 
```

# objective-c - 立即在 IOS 中加载新视图

> ID：10426841
> 
> 赞同：2
> 
> 时间：2012-05-03T07:19:59.887
> 
> 标签：objective-c, ios, viewcontroller

目前有一个小问题。

基本上我的 appdelegate 正在加载我的 mainViewController：

```
self.viewController = [[MainViewController alloc] initWithNibName:@"mainViewController" bundle:nil];
self.window.rootViewController = self.viewController;
[self.window makeKeyAndVisible];
return YES; 
```

现在当 mainViewController 加载时，我想检查用户是否已经登录：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
    NSInteger myInt = [prefs integerForKey:@"user"];
    if(!myInt)
    {
        self.loginViewController = [[LoginViewController alloc] initWithNibName:@"LoginViewController" bundle:nil];
        self.loginViewController.delegate = self;
        self.loginViewController.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
        [self presentModalViewController:self.loginViewController animated:YES];
    }
} 
```

它成功地检查了用户是否登录，如果用户没有登录则进入 if 语句。但是，在运行它之后，最终加载的视图是 mainViewController，而不是 loginViewController。

如果我有一个单独的按钮可以使用此代码将我发送到登录页面，它可以正常工作。当然，这不是我需要的，我需要用户必须登录 =p

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T07:25:11.803

放入`-viewDidAppear:`.

# android - 在 Android 中使用 jCIFS 时的验证错误

> ID：10426842
> 
> 赞同：1
> 
> 时间：2012-05-03T07:20:02.383
> 
> 标签：android, classpath, smb, jcifs

我正在尝试在我的 Android 应用程序中使用 jCIFS 1.3.17 版 JAR 文件。该应用程序正确编译并部署到我的手机。当我的应用程序尝试使用 jCIFS 库时，我收到以下错误消息：

```
E/dalvikvm( 3176): Could not find class 'jcifs.smb.SmbFile', referenced from method com.test.androidapp.service.BackgroundService.copyFiles
W/dalvikvm( 3176): VFY: unable to resolve new-instance 94 (Ljcifs/smb/SmbFile;) in Lcom/test/androidapp/service/BackgroundService;
D/dalvikvm( 3176): VFY: replacing opcode 0x22 at 0x0001
W/dalvikvm( 3176): VFY: unable to resolve exception class 93 (Ljcifs/smb/SmbException;)
W/dalvikvm( 3176): VFY: unable to find exception handler at addr 0x6c
W/dalvikvm( 3176): VFY:  rejected Lcom/test/androidapp/service/BackgroundService;.copyFiles ()Z
W/dalvikvm( 3176): VFY:  rejecting opcode 0x0d at 0x006c
W/dalvikvm( 3176): VFY:  rejected Lcom/test/androidapp/service/BackgroundService;.copyFiles ()Z
W/dalvikvm( 3176): Verifier rejected class Lcom/test/androidapp/service/BackgroundService;
W/dalvikvm( 3176): Class init failed in newInstance call (Lcom/test/androidapp/service/BackgroundService;)
D/AndroidRuntime( 3176): Shutting down VM
W/dalvikvm( 3176): threadid=1: thread exiting with uncaught exception (group=0x4001d5a0)
E/AndroidRuntime( 3176): FATAL EXCEPTION: main
E/AndroidRuntime( 3176): java.lang.VerifyError: com.test.androidapp.service.BackgroundService
E/AndroidRuntime( 3176):    at java.lang.Class.newInstanceImpl(Native Method)
E/AndroidRuntime( 3176):    at java.lang.Class.newInstance(Class.java:1409)
E/AndroidRuntime( 3176):    at android.app.ActivityThread.handleCreateService(ActivityThread.java:2174)
E/AndroidRuntime( 3176):    at android.app.ActivityThread.access$2500(ActivityThread.java:132)
E/AndroidRuntime( 3176):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1102)
E/AndroidRuntime( 3176):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime( 3176):    at android.os.Looper.loop(Looper.java:150)
E/AndroidRuntime( 3176):    at android.app.ActivityThread.main(ActivityThread.java:4263)
E/AndroidRuntime( 3176):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime( 3176):    at java.lang.reflect.Method.invoke(Method.java:507)
E/AndroidRuntime( 3176):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
E/AndroidRuntime( 3176):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
E/AndroidRuntime( 3176):    at dalvik.system.NativeStart.main(Native Method)
W/ActivityManager(  129):   Force finishing activity com.test.androidapp/.activity.MainActivity 
```

有人可以解释为什么 Android 没有找到 jCIFS 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T11:17:47.263

假设您使用的是最新版本的 Android SDK 工具（以及适用于 Eclipse 的 ADT 插件），添加第三方 JAR 的正确过程是：

步骤#1：在您的项目中创建一个`libs/`目录

第 2 步：将 JAR 放入`libs/`目录中

请注意，您不需要弄乱构建路径或任何东西——这现在在 Eclipse 中自动处理，就像从一开始就用于命令行构建一样。

这个错误感觉就像您的 JAR 在编译时可用但没有打包在您的 APK 中，例如 Eclipse 知道 JAR（例如，通过手动构建路径调整）但 Android 工具不知道 JAR。

# asp.net-mvc-3 - 如何在输出缓存中使用动态持续时间值？

> ID：10426843
> 
> 赞同：6
> 
> 时间：2012-05-03T07:20:05.997
> 
> 标签：asp.net-mvc-3, output-caching

我正在使用 ASP.NET MVC3。
我在控制器方法上使用了输出缓存。

```
 [OutputCache(Duration = 3660, VaryByParam = "none")]
   public ActionResult Index()
   {
       some code;
       return View();
   } 
```

我想在输出缓存中使用一些静态变量或其他东西来放置动态持续时间。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-03T07:28:48.583

我会从`OutputCache`属性继承并在那里设置`Duration`：

```
public static class CacheConfig
{
    public static int Duration = 36600;
}

public class MyOutputCacheAttribute : OutputCacheAttribute
{
    public MyOutputCacheAttribute()
    {
        this.Duration = CacheConfig.Duration;
    }
}

[MyOutputCache(VaryByParam = "none")]
public ActionResult Index()
{
    return View();
} 
```

然后您可以`Duration`通过`CacheConfig.Duration`

如果需要，您仍然可以覆盖每个操作的全局设置：

```
[MyOutputCache(Duration = 100, VaryByParam = "none")]
public ActionResult OtherAction()
{
    return View();
} 
```

# java - 删除某些列后，extendedDataTable 中的表状态未保存

> ID：10426848
> 
> 赞同：1
> 
> 时间：2012-05-03T07:20:24.090
> 
> 标签：java, jsf-2

我正在开发一个基于 Web 的应用程序。
我面临一个表状态保存技术的问题。
我在extendedDataTable 中给出了这些参数。

```
<rich:extendedDataTable id="tblUsrSearchResults" var="rr"
       height="200px" enableContextMenu="true"
       tableState="#{userSearchController.edtUsrSrchRsltsTblState}"
       selection="#{userSearchController.edtUsrSrchRsltsSelection}"
       value="#{userSearchController.usrSearchResults}" rowKeyVar="idx"> 
```

我试图通过取消选中它来暂时隐藏所有列出的列之一 -![在此处输入图像描述](../Images/581b18655f54c6ae86664c007ed5feb3.png)

如果我取消选中它，那么它会隐藏该列，但同时也不会显示数据（所有行都被隐藏）。
我希望数据（所有行）保持显示，以便我可以按如下方式保存表格状态 -![在此处输入图像描述](../Images/d4b4429e7af895c8a07b249ad1a9408a.png)

或简而言之，我想在隐藏上述列之一后保存表状态，并且应该能够在其他时间点显示它。
（目前我可以保存表格状态，但前提是列宽发生变化）
请帮我解决这个问题。

# javascript - 在 JS 中检查互联网连接的最快方法

> ID：10426851
> 
> 赞同：4
> 
> 时间：2012-05-03T07:20:45.227
> 
> 标签：javascript

我在一个检查连接性的 html 文件中有这段代码，但这里的问题是大约需要 10 秒才能抛出警告消息框以指示连接丢失。我想知道是否有更快的方法来通知用户连接丢失而无需等待。严格的JS谢谢...

JS代码：

```
<script language="JavaScript">
function SubmitButton()
{
    if(navigator.onLine)
    {
            document.getElementById('SubmitBtn').style.visibility='visible';
    }
    else
    {
        document.getElementById('SubmitBtn').style.visibility='hidden';
    }
}
function Online() 
{ 
    var status=false;
    status= navigator.onLine;
    if(status!= true)
    {
        alert('Network connectivity is lost, please try again later');
    }
}
</script> 
```

在此处的 html 文件中调用它：

```
<INPUT name="ccMCA1input" type="checkbox" onclick="ccMCA1.ccEvaluate(),Online()" value=False> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T07:34:34.640

您可以定期从（纽约）服务器请求 1x1 gif 图像，确保使用[缓存破坏器方法](http://www.adopsinsider.com/ad-ops-basics/what-is-a-cache-buster-and-how-does-it-work/)来避免缓存。您可以使用[onload](http://www.quirksmode.org/dom/events/load.html)和[onerror](http://www.quirksmode.org/dom/events/error.html)事件。

```
var isOnline = (function isOnline(){
  // Create a closure to enclose some repeating data
  var state = false;
  var src = 'gif_url?t=' + Date.now();
  var function onLoad = function(){state = true;}
  var function onError = function(){state = false;}

  // Inside the closure, we create our monitor
  var timer = setInterval(function(){
    var img = new Image();
    img.onload = onLoad;
    img.onerror = onError;
    img.src = src;
  }, 10000);

  // Return a function that when called, returns the state in the closure
  return function(){return state;};
}());

//Use as
var amIOnline = isOnline(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T07:22:50.813

[`navigator.onLine`](https://developer.mozilla.org/en/DOM/window.navigator.onLine)是唯一可以检查的内置属性（顺便说一句，不可靠）。
您可以向可靠服务器创建 XHR 请求，并检查是否收到任何响应。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T07:38:25.353

考虑查看以下 URL：

1.  [在线连接监控](http://html5demos.com/offline)
2.  [navigator.onLine 测试](http://html5demos.com/nav-online)
3.  [在线/离线事件捕获](http://html5demos.com/offline-events)

# php - 在 FPDF 中设置纸张尺寸

> ID：10426853
> 
> 赞同：24
> 
> 时间：2012-05-03T07:21:05.030
> 
> 标签：php, fpdf

我想将 fpdf 中的纸张大小设置为字母大小的一半，大约为 8.5x5.5 inc。我怎样才能做到这一点？
我在 php 语言中的 fpdf 函数是

```
$pdf = new FPDF('P','mm','?????'); 
```

有什么解决办法吗？之前谢谢你的帮助..

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-05-03T07:33:52.037

他们[在 FPDF 构造函数的文档中](http://www.fpdf.org/en/doc/__construct.htm)说：

> **FPDF([字符串方向[，字符串单位[，混合大小]]])**
> 
> 这是类构造函数。它允许设置所有方法中使用的页面大小、方向和度量单位（字体大小除外）。参数 ...
> 
> **尺寸**
> 
> 用于页面的大小。它可以是以下值之一（不区分大小写）：
> 
> A3 A4 A5 信函法律
> 
> **或包含宽度和高度的数组（以 unit 给出的单位表示）。**

他们甚至举了一个自定义尺寸的例子：

> 自定义 100x150 毫米页面大小的示例：

```
$pdf = new FPDF('P','mm',array(100,150)); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-27T11:45:10.087

```
/*$mpdf = new mPDF('',    // mode - default ''
 '',    // format - A4, for example, default ''
 0,     // font size - default 0
 '',    // default font family
 15,    // margin_left
 15,    // margin right
 16,     // margin top
 16,    // margin bottom
 9,     // margin header
 9,     // margin footer
 'L');  // L - landscape, P - portrait*/ 
```

# file-upload - 使用服务读取上传的文件

> ID：10426854
> 
> 赞同：1
> 
> 时间：2012-05-03T07:21:07.733
> 
> 标签：file-upload

我有网页，用户可以从网页上传多个文件并将其保存到服务器上的上传目录中。所有上传的文件都太大了，我必须从所有文件中读取 contnet，所以需要很长时间。现在我想做的是，我计划创建一个 wcf 服务/win 服务，该服务将经常检查服务器目录上是否有任何新上传的文件，如果有，则获取所有文件并使用线程读取所有文件。但我很困惑如果并发用户经常从网页上传文件，我可以管理服务器上的文件和 win 服务，我如何管理应该阅读的 win 服务的目录优先级。请向我提供您的建议/任何新概念来管理上传文件。

# php - PHP-JSON：检查损坏的链接

> ID：10426857
> 
> 赞同：1
> 
> 时间：2012-05-03T07:21:35.680
> 
> 标签：php, javascript, jquery, json, curl

第一次尝试使用 JSON。这是我的 checklink.php ：

```
function url_exists($url) {
    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_NOBODY, true);
    curl_exec($ch);
    $retcode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
    // $retcode > 400 -> not found, $retcode = 200, found.
    if ($retcode == 400){
    return "false";
    }else{
    return "true";
    }
    curl_close($ch);
}
$response = array( 
  'location' => $location, 
  'status' => $status 
);
$rr = url_exists($response['location']);
echo json_encode( $rr ); 
```

JS部分：

```
function UrlExistsNew(url, callback) {
  $.getJSON('checklink.php', { location: url }, function ( data ) {
  callback.apply( null, data.status );
});
}
...
UrlExistsNew($(this).val(), function(status){
        if(status === "false") $(element).css('background-color','#FC0');
      }); 
... 
```

似乎 php 页面没有将结果返回给 json 查询。

**编辑：请注意，我忘记安装 curl 并在我的服务器中启用它。我希望没有人错过这个。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T07:26:01.487

你应该`$rr = url_exists($response['location']);`改为

`$rr = array("status"=>url_exists($response['location']));`

得到你期望的json响应

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T15:25:35.993

好的，经过 8 小时的测试和试验。我终于得到了这个工作。非常感谢[**维陶塔斯**](https://stackoverflow.com/users/486349/vytautas)。他教会了我很多。主要是如何调试。

对于想要使用 JSON + PHP + CURL 检查损坏链接的任何人：

1.  首先，检查您是否在服务器中安装并启用了**curl 。**
2.  不懂 curl 的人：如果你的 url 有响应，就会有一个状态码（比如 200 或 404）。如果输入的 url 为空、无效或类似的，它将返回状态码 0
3.  如果您无法从 php 页面获得正确的响应，请使用 FireBug（控制台选项卡）检查标题和响应。还使用断点来查看变量是否正确传递。

这是php代码：

```
function url_exists($url) {
    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_NOBODY, true);

    if(curl_exec($ch) === false) // These 2 line here are for debugging.
        die('Curl error: ' . curl_error($ch));

    $retcode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
    curl_close($ch);
    return $retcode;
}
$response = array(
  'status' => url_exists($_GET['location'])
);
echo json_encode($response) 
```

我在 php 中做错了两件事。我应该使用`$_GET['location']`而不是`$location`另一个是`$response`而不是使用第二个变量。

和 js 功能：

```
function UrlExistsNew(url, callback) {
  $.getJSON('checklink.php', { location: url }, function ( data ) {
  callback.call( null, data.status );
});
} 
```

我在 js 中做错的另一件事是将回调传递给函数。我应该使用`callback.call`而不是`callback.apply`

简单用法：

```
UrlExistsNew($(this).val(), function(status){
        if(status === 404) $(element).css('background-color','#FC0');
      }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T07:27:35.450

```
$rr = url_exists($response['location']);
echo json_encode( array('status' => $rr) ); 
```

试试这个：

```
UrlExistsNew($(this).val(), function(status){
   if(!status) $(element).css('background-color','#FC0');
}); 
```

# java - 如何向使用 Selenium Webdriver 处理的 HTTP 请求添加标头或参数？

> ID：10426860
> 
> 赞同：8
> 
> 时间：2012-05-03T07:21:40.973
> 
> 标签：java, post, selenium, junit, webdriver

我正在使用 Selenium Webdriver 对 Web 应用程序进行单元测试。它在 JUnit 测试中使用尽管广泛阅读了可用的文档并四处搜索，但我找不到以下方法：

*   向驱动程序传递的 HTTP 请求添加标头。
*   为这样的请求添加参数，就好像驱动程序在提交表单后得到了他的目标 URL。

可以使用适当的表单创建一个测试网页，并让 Webdriver 反弹它以自动获取这些参数，但这是一个非常丑陋的 hack。我想避免它，特别是为了测试原子性。（这是单元测试。）

在使用 Wendriver 之前，我使用 Spring 的 MockHttpServletRequest 和 MockHttpServletResponse 来执行此操作，这很有效，但我想使用 Webdriver 的强大功能来断言目标页面的内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T11:49:18.007

您可以尝试评估 browsermob-proxy。它有助于操作标题。 [https://github.com/webmetrics/browsermob-proxy](https://github.com/webmetrics/browsermob-proxy)。与 webdriver 集成很简单。您只需要使用设置的代理值启动驱动程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-08-11T10:38:30.227

可能对正在寻找解决方案的其他人有用

这就是我解决问题的方法。希望对具有类似设置的任何人都有帮助。

1.  将 ModHeader 扩展添加到 chrome 浏览器

如何下载 Modheader？关联

```
ChromeOptions options = new ChromeOptions();
options.addExtensions(new File(C://Downloads//modheader//modheader.crx));

// Set the Desired capabilities 
DesiredCapabilities capabilities = new DesiredCapabilities();
capabilities.setCapability(ChromeOptions.CAPABILITY, options);

// Instantiate the chrome driver with capabilities
WebDriver driver = new RemoteWebDriver(new URL(YOUR_HUB_URL), options); 
```

2.  转到浏览器扩展并捕获 ModHeader 的本地存储上下文 ID

[![从 ModHeader 捕获 ID](../Images/ee8659b4c1a3df7f51eebfe3b8c99978.png)](https://i.stack.imgur.com/WV5yi.png)

3.  导航到 ModHeader 的 URL 以设置本地存储上下文

.

```
// set the context on the extension so the localStorage can be accessed
driver.get("chrome-extension://idgpnmonknjnojddfkpgkljpfnnfcklj/_generated_background_page.html");

Where `idgpnmonknjnojddfkpgkljpfnnfcklj` is the value captured from the Step# 2 
```

4.  现在使用将标头添加到请求中`Javascript`

.

```
 ((Javascript)driver).executeScript(
         "localStorage.setItem('profiles', JSON.stringify([{  title: 'Selenium', hideComment: true, appendMode: '', 
             headers: [                        
               {enabled: true, name: 'token-1', value: 'value-1', comment: ''},
               {enabled: true, name: 'token-2', value: 'value-2', comment: ''}
             ],                          
             respHeaders: [],
             filters: []
          }]));"); 
```

其中`token-1`, `value-1`, `token-2`,`value-2`是要添加的请求标头和值。

5.  现在导航到所需的 Web 应用程序。

    `driver.get("your-desired-website");`

# asp.net-mvc - 在我的模型中提交 3 个远程验证的问题

> ID：10426862
> 
> 赞同：2
> 
> 时间：2012-05-03T07:21:47.360
> 
> 标签：asp.net-mvc

我有一个基于 viewModel 数据的视图，并带有一些远程验证（3 个带有远程验证的字段）。

**问题**是，当我提交表单时，所有 3 个远程验证都会在提交的同时触发（见下文）。

![在此处输入图像描述](../Images/536f8c3e3bcd290905a8439a30704ec3.png)

所以你在上图中看到，所有 3 个远程验证都是同时触发的，并且处于待处理状态。1分钟后我有一个超时。

这是我的代码：

```
var $dialog = $('#modal-dialog');
$dialog.modal('show');
// Enable client side validation
$.validator.unobtrusive.parse(this);
// Setup the ajax submit logic
submitLogic(params);

function submitLogic(params) {
    var $form = $('#modal-dialog form');
    $form.submit(function () {

        // Do not submit if the form does
        // not pass client side validation
        if (!$(this).valid()) {
            writeError('msgError', pDialogForm.validationFailed);
            return false;
        }

        clearErrors();

        $.post($(this).attr('action'), $(this).serialize(), function (data, status) {
            // Post success
            $('#modal-dialog').modal('hide');
        }).error(function (error, status, a, b) {
            // Post failed
            writeError('msgError', pDialogForm.validationFailed);
            // Need to reactivate client side validation
            $.validator.unobtrusive.parse($form);
            // Need to rebind submit event
            submitLogic();
        });
        // Unbind form submitting
        $form.unbind();
        return false;
    });
} 
```

我的远程验证代码：

```
 public ActionResult EmailAlreadyExists(string email, int? contactID, ContactTypeEnumViewModel type )
    {
        var contact = _requestServiceClient.GetContactFromEmailAndType(email, (ContactTypeEnumDTO) type);
        return Json((contact == null) || (contact.ContactID == contactID), JsonRequestBehavior.AllowGet);
    }

    public ActionResult NameAlreadyExists(int? contactID, ContactTypeEnumViewModel type, string FirstName, string LastName)
    {
        var contact = _requestServiceClient.GetContactFromFirstNameLastNameAndType(FirstName, LastName, (ContactTypeEnumDTO)type);
        return Json((contact == null) || (contact.ContactID == contactID), JsonRequestBehavior.AllowGet);
    } 
```

我的视图模型：

```
public class ContactEditViewModel
{
    public int ContactID { get; set; }

    [Required, Remote("NameAlreadyExists", "Contact", AdditionalFields = "ContactID, Type, FirstName, LastName", ErrorMessageResourceName = "NameAlreadyExists", ErrorMessageResourceType = typeof(UserResource))]
    public string FirstName { get; set; }

    [Required, Remote("NameAlreadyExists", "Contact", AdditionalFields = "ContactID, Type, FirstName, LastName", ErrorMessageResourceName = "NameAlreadyExists", ErrorMessageResourceType = typeof(UserResource))]
    public string LastName { get; set; }

    [Required, EmailRegex, Remote("EmailAlreadyExists", "Contact", AdditionalFields = "ContactID, Type", ErrorMessageResourceName = "EmailAlreadyExists", ErrorMessageResourceType = typeof(UserResource))]
    public string Email { get; set; }
    ... 
```

我很迷茫:(我试图找到一个解决方案，因为几天没有成功。非常感谢任何帮助。

祝你今天过得愉快。

# c++ - 处理linux上的库依赖

> ID：10426868
> 
> 赞同：5
> 
> 时间：2012-05-03T07:22:19.947
> 
> 标签：c++, linux, dependencies, openssl, libcurl

我在我的项目中使用 libcurl，它在运行时依赖于 openssl 和一堆其他 .so。
这种依赖有点让人头疼，因为不同的发行版/版本可能包含不同的 openssl 版本。

例如，如果我在 Ubuntu 9.10 上编译我的应用程序，我会在 Ubuntu 11.10 上运行时遇到问题。

我看到了两个如何解决这个问题的选项，但对于我的情况，它们都不够好：

1.  打包我的应用程序并让包管理器解决这类问题

2.  静态链接所有部门

我的应用程序真的很小，打包/维护它会有点矫枉过正。另外，要求之一是它应该可以下载和运行。所以，（1）对我来说不是一个选择。

静态链接 (2) 将是不错的解决方案，但似乎没有 libopenssl、libcrypto 和 libcurl 附带的其他传递依赖项的静态二进制分发。

从理论上讲，我可以尝试手动在 libcurl 后面构建所有库库，但这似乎会使维护变得更加复杂。

所以，这是一个问题——我错过了什么吗？在 linux 世界（具体来说是 Ubuntu）中，有没有一种不那么痛苦的方式来做我想做的事，而且痛苦更少？欢迎任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T15:52:34.837

> 我在我的项目中使用 libcurl，它在运行时依赖于 openssl 和一堆其他 .so。这种依赖有点让人头疼，因为不同的发行版/版本可能包含不同的 openssl 版本。
> 
> 例如，如果我在 Ubuntu 9.10 上编译我的应用程序，我会在 Ubuntu 11.10 上运行时遇到问题。

首先，这有什么问题？如果您从旧版本的 Ubuntu 升级到新版本，您应该不会遇到问题。如果我没记错的话，您只需要指定您需要的库的最低版本，并且包管理器应该能够安装合适的版本。除非您使用已弃用的功能，否则较新版本的库不应*破坏现有应用程序。*

> 我的应用程序真的很小，打包/维护它会有点矫枉过正。另外，要求之一是它应该可以下载和运行。所以，（1）对我来说不是一个选择。

对于 Linux（尤其是 Ubuntu、Fedora 和其他顶级发行版），打包确实是分发应用程序*的方式。*下载-安装-运行是 Windows 的事情，它不是 Linux 上的人安装软件的方式（好吧，Linux 新手可能......）

您还应该尝试接受发行版，这将随着时间的推移减轻您的负担。至少在 Ubuntu 上，实现这一目标的第一步是创建自己的 PPA（[https://help.launchpad.net/Packaging/PPA](https://help.launchpad.net/Packaging/PPA)）。

> 静态链接 (2) 将是不错的解决方案，但似乎没有 libopenssl、libcrypto 和 libcurl 附带的其他传递依赖项的静态二进制分发。

这通常是一件*非常非常*糟糕的事情。静态链接或只是将库与您的应用程序捆绑在一起会给您带来更新的负担，如果您不更新这些内容，则会产生影响。所以，我不推荐这种方法。有关更多详细信息，请参见此处：[http ://www.dwheeler.com/blog/2012/04/03/#insecure-libraries](http://www.dwheeler.com/blog/2012/04/03/#insecure-libraries)

这是 Fedora 的政策： http://fedoraproject.org/wiki/Packaging: [No_Bundled_Libraries](http://fedoraproject.org/wiki/Packaging:No_Bundled_Libraries)

> 所以，这是一个问题——我错过了什么吗？在 linux 世界（具体来说是 Ubuntu）中，有没有一种不那么痛苦的方式来做我想做的事，而且痛苦更少？欢迎任何建议。

这里真的有两件事要做：

1.  打包：理想情况下，这将是 Ubuntu/Debian 的 deb 和 Fedora/Suse 的 rpm。另一种流行的替代方法是使用自动工具（autoconf/automake），以便用户可以使用所需的先决条件构建您的应用程序。最后一个选项是只提供一个 Makefile 和一个 README 并期望您的用户做正确的事情。
2.  分发：理想情况下，这是与发行版存储库一起使用的。Ubuntu PPA 是一个很好的起点。另一种方法是在您自己的站点上托管二进制文件/包。

大多数流行的应用程序都为流行的 Linux 发行版提供 .deb/.rpm 以及带有自动工具的 .tar.gz，用于在具有不同打包系统的发行版上构建。

最后，让我问你：你的重点是让你提供你的应用程序变得不那么痛苦，还是让你的用户获得你的应用程序变得不那么痛苦？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T10:06:56.807

还有第三种选择：

根据平台创建适合您需要的某种存档并包含您需要的 .so/.dll 文件。ZIP 存档应该适用于 Linux 和 Windows。

然后在 Linux 安装的包装脚本中使用 LD_LIBRARY_PATH（它允许您将 .so 文件放在某个特殊的位置，通常是在一个`libs`目录中）。据我所知，Windows 使用 CWD 作为查找二进制文件所需的 .dll 文件的第一个位置，因此您只需将它们放在与二进制文件相同的目录中即可。

使用这种方法，你可以保持你的“分布”很小，并且不需要静态链接或任何其他特殊处理。

只需确保分析 .so/.dll 文件的实际依赖链，以免在目标环境中加载一些意外库时感到惊讶。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T07:43:15.880

你考虑过使用qt吗？你根本就不会有这些问题，而且它们对 ssl 和 http 有强大的 rmeasy 支持

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-26T13:33:49.090

所以你问“有没有更痛苦的方法”。我喜欢其他答案，尤其是 Naveen 的答案。所以你有两个解决方案

1.  使用操作系统中的 .so 文件（共享库）并向您的用户推荐他们使用“至少版本 x”。这几乎可以解决所有问题。

2.  将非共享（静态）库（.a 文件）与您的应用程序捆绑在一起，或者将共享库（.so 文件）与您的应用程序捆绑在一起。

使用 ./configure 脚本从源代码构建静态 .a 文件非常简单。您可以轻松获得 .so 文件，但您需要相当技巧才能将它们与您的应用程序捆绑在一起。.so 文件可以打补丁；他们里面有路径，说明应该从哪里加载依赖项。因此，捆绑 .so 文件并非不可能，甚至可能是避免为一系列依赖项构建 .a 文件的手动步骤的简便方法——如果您找到并使用脚本来重新定位 .so 文件。

你写：

> 从理论上讲，我可以尝试手动在 libcurl 后面构建所有库库，但这似乎会使维护变得更加复杂。

是的，它会的，因为你会想要安全补丁，对吧？所以最好的方法是#1——让用户安装他可以得到的最新版本，并负责确保他的系统安全。

当您遇到为无法使用解决方案 1 的客户进行定制工作的情况时，解决方案 2 很方便。在这里，您按计划提供软件的定期版本，包括最新的依赖项及其所有修复。小型软件通常会达到不再需要更改的程度。对于一小部分软件来说，这个解决方案不是一个好的解决方案，因为你的软件没有改变，但你仍然在定期发布，只是因为依赖项有更新。因此，除非您的客户确实需要，否则不要使用此解决方案。从长远来看，它更昂贵。

希望这可以帮助！

# java - List 时会发生什么 A = 列表 乙？

> ID：10426873
> 
> 赞同：0
> 
> 时间：2012-05-03T07:22:37.263
> 
> 标签：java, arraylist

当我这样做时会发生什么：

```
List<Integer> listA = new ArrayList<Integer>();
List<Integer> ListB = new ArrayList<Integer>();

listA = ...filled with some data...
listB = ...filled with some other data...

listA.clear();
listA = listB; 
```

值是复制还是只是重新引用？如果我现在（在这段代码之后）`listA.clear()` **再次**调用，也会`listB`清除吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T07:24:15.150

好吧，在`listA = listB`变量`listA`引用与`listB`. Java 中没有像 C++ 等中那样的复制构造函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T07:24:39.040

只是引用的值将被复制，因此它们都将引用同一个对象

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T07:28:54.080

只有原始类型按值复制，如果您执行上述操作，您将让 listA 和 listB 引用同一个列表，因此无论您对 listA 做什么，都会对 listB 产生相同的效果，反之亦然。如果您想丢失引用，只需将其中一个变量设置为 null。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T07:27:49.133

不，`listA`并且`listB`是两个不同的整数列表，它们彼此不相关。如果你在`clear()`上做一个`ListA`，`ListB`根本不会受到影响。在您的情况下，最后`ListA`引用已更改，变量现在指向`ListB`. 因此，这两个变量都指向一个 List，即`ListB`. 因此，对这些引用中的任何一个的任何操作都将产生相同的效果。`ListA`对象已经是空的，它什么都不包含。并且没有任何方法可以引用该对象。

# android - 如何解决位图大小超出 VM 预算的解决方案？

> ID：10426874
> 
> 赞同：0
> 
> 时间：2012-05-03T07:22:39.433
> 
> 标签：android, memory-leaks

> **可能重复：**
> [Android：将图像加载到位图对象时出现奇怪的内存不足问题](https://stackoverflow.com/questions/477572/android-strange-out-of-memory-issue-while-loading-an-image-to-a-bitmap-object)
> [java.lang.OutOfMemoryError：位图大小超出 VM 预算 - Android](https://stackoverflow.com/questions/1949066/java-lang-outofmemoryerror-bitmap-size-exceeds-vm-budget-android)

第一个活动

```
public class Main_AllLatestNews extends ListActivity 
```

第二个活动（加载 10 个或更多图像）

```
@Override
protected void onDestroy() {
super.onDestroy();

unbindDrawables(findViewById(R.id.RootView));
System.gc();
}

private void unbindDrawables(View view) {
    if (view.getBackground() != null) {
    view.getBackground().setCallback(null);
    }
    if (view instanceof ViewGroup) {
        for (int i = 0; i < ((ViewGroup) view).getChildCount(); i++) {
        unbindDrawables(((ViewGroup) view).getChildAt(i));
        }
    ((ViewGroup) view).removeAllViews();
    }
} 
```

我正在使用它来调用图像

```
if (!imagepath[i].toString().equals("no picture")) {
            try {
                aURL = new URL("http://www.orientaldaily.com.my/" + imagepath[i]);
                URLConnection conn = aURL.openConnection();
                conn.connect();
                InputStream is = conn.getInputStream();
                BufferedInputStream bis = new BufferedInputStream(is);
                Bitmap bm = BitmapFactory.decodeStream(bis);
                bis.close();
                is.close();
                imageview = (ImageView) findViewById(R.id.image_categoryallnewstitle);
                imageview.setScaleType(ScaleType.CENTER_CROP);
                imageview.setImageBitmap(bm);

            } catch (IOException e) {
                Log.e("DEBUGTAG", "Remote Image Exception", e);
            }
        } 
```

我在调用这些图像之前实现了这个方法，但仍然有内存泄漏和

```
bitmap size exceeds VM budget 
```

我的代码中有任何问题或有其他解决方案来解决这个问题吗？

# prolog - Prolog陷入无限循环

> ID：10426875
> 
> 赞同：4
> 
> 时间：2012-05-03T07:22:49.027
> 
> 标签：prolog

我有两个问题困扰了我好几个小时。`connected/2`应该判断两个人是否有联系；`distance/3`应该衡量亲属关系。但：

1.  对于查询，我不断得到`true`s `connected(x,y)`；
2.  `N`而且我的`distance(x,y,N)`查询越来越多。有什么建议么？

以下是我的事实：

```
male(ted).
male(barney).
male(ranjit).
male(marshall).
male(tony).
male(swarley).
male(steve).
male(chuck).
male(john).
male(devon).
male(morgan).

female(robin).
female(lily).
female(wendy).
female(stellar).
female(abby).
female(victoria).
female(carina).
female(sarah).
female(ellie).

married(ted,      robin).
married(marshall, lily).
married(ranjit,   wendy).
married(stellar,  tony).
married(steve,    carina).
married(sarah,    chuck).
married(ellie,    devon).

father(ted,      barney).
father(ted,      ranjit).
father(marshall, wendy).
father(ranjit,   stellar).
father(tony,     abby).
father(tony,     swarley).
father(tony,     victoria).
father(steve,    chuck).
father(steve,    ellie).
father(chuck,    john).
father(devon,    morgan).

mother(robin,    barney).
mother(robin,    ranjit).
mother(lily,     wendy).
mother(wendy,    stellar).
mother(stellar,  abby).
mother(stellar,  swarley).
mother(stellar,  victoria).
mother(carina,   chuck).
mother(carina,   ellie).
mother(sarah,    john).
mother(ellie,    morgan). 
```

现在，我的谓词：

```
parent(X,Y) :- father(X,Y).
parent(X,Y) :- mother(X,Y).

son(X,Y) :-
    male(X),
    parent(Y,X).

daughter(X,Y) :-
    female(X),
    parent(Y,X).

sibling(X,Y) :-
    parent(Z,X),
    parent(Z,Y).

cousin(X,Y) :-
    parent(Z,X),
    parent(W,Y),
    parent(G,Z),
    parent(G,W).

ancestor(X,Y) :-
    parent(X,Z),
    ancestor(Z,Y).
ancestor(X,Y) :- parent(X,Y).

notmember(X,[]).
notmember(X,[H|T]) :- 
    X \= H,
    notmember(X,T).

connected(X,Y,_) :- X == Y.
connected(X,Y,Visited) :- 
    ancestor(X,Z),
    notmember(Z,Visited),
    connected(Z,Y,[Z|Visited]).
connected(X,Y,Visited) :- 
    ancestor(Z,X),
    notmember(Z,Visited),
    connected(Z,Y,[Z|Visited]).
connected(X,Y,Visited) :- 
    sibling(X,Z),
    notmember(Z,Visited),
    connected(Z,Y,[Z|Visited]).
connected(X,Y,Visited) :- 
    married(X,Z),
    notmember(Z,Visited),
    connected(Z,Y,[Z|Visited]).
connected(X,Y) :- connected(X,Y,[X]).

minimum(X,[X]).
minimum(X,[M,H|T]) :- 
    M =< H,
    minimum(X,[M|T]).
minimum(X,[M,H|T]) :-
    M > H,
    minimum(X,[H|T]).

distance(X,X,_,0).
distance(X,Y,Visited,N) :- 
    parent(X,Z),
    notmember(Z,Visited),
    distance(Z,Y,[Z|Visited],N1),
    N is N1+1.
distance(X,Y,Visited,N) :- 
    parent(Z,X),
    notmember(Z,Visited),
    distance(Z,Y,[Z|Visited],N1),
    N is N1+1.
distance(X,Y,N) :- distance(X,Y,[],N). 
```

编辑：谢谢，我想我现在已经设法解决了一半的问题。接受@twinterer 的建议，我已经修复了这样的谓词

```
connected(X,Y,_) :- X == Y.
connected(X,Y,V) :-
    married(X,Z),
    notmember(Z,V),
    connected(Z,Y,[Z|V]),!.
connected(X,Y,V) :-
    sibling(X,Z),
    notmember(Z,V),
    connected(Z,Y,[Z|V]),!.
connected(X,Y,V) :-
    parent(X,Z),
    notmember(Z,V),
    connected(Z,Y,[Z|V]),!.
connected(X,Y,V) :-
    parent(Z,X),
    notmember(Z,V),
    connected(Z,Y,[Z|V]),!.
connected(X,Y) :- connected(X,Y,[X]).

minimum(X,[X]).
minimum(X,[M,H|T]) :- 
    M =< H,
    minimum(X,[M|T]).
minimum(X,[M,H|T]) :-
    M > H,
    minimum(X,[H|T]).

count(X,[],0).
count(X,[X|T],N) :-
    count(X,T,N1),
    N is N1+1.
count(X,[H|T],N) :-
    X \== H,
    count(X,T,N1),
    N is N1.

distance(X,X,Visited,0) :-
    count(X,Visited,N),
    N =< 1, !.
distance(X,Y,Visited,N) :- 
    parent(X,Z),
    (notmember(Z,Visited)->
        distance(Z,Y,[Z|Visited],N1),
        N is N1+1
    ;
        fail
    ),!.
distance(X,Y,Visited,N) :- 
    parent(Z,X),
    (notmember(Z,Visited)->
        distance(Z,Y,[Z|Visited],N1),
        N is N1+1
    ;
        fail
    ),!.
distance(X,Y,N) :- 
    findall(N1,distance(X,Y,[X],N1),L),!,
    minimum(N,L),!. 
```

但是现在出现了一系列新问题

1.  它不能接受任意查询，例如`distance(X,y,n)`
2.  类似`connected(X,y)`返回重复结果的查询

我认为可以通过使用该`findall/3`谓词来删除重复的结果，但我对如何实际实现它一无所知。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T08:42:29.067

1）我不认为你以无限循环结束，但是你让你的程序探索两个人联系的所有方式，这将是一个非常大的数字。由于您可能只对他们是否完全连接感兴趣，因此您应该在子句末尾添加剪切，以`connected/3`防止在您成功确定两个人连接后回溯，例如：

```
connected(X,Y,_) :- X == Y,!.
connected(X,Y,Visited) :- 
    ancestor(X,Z),
    notmember(Z,Visited),
    connected(Z,Y,[Z|Visited]),!.
... 
```

2）当我测试你的代码时，我没有得到 N 的无限增加值，但`distance/3`谓词仍然会确定两个人如何连接的不同路径。根据人的不同，最小距离不会是第一个被计算的。我会将 的定义更改为`distance/3`如下所示：

```
distance(X,Y,N) :- 
    findall(N0, distance(X,Y,[],N0), Ns), !,
    minimum(N, Ns). 
```

这是重用您的`minimum/2`谓词。请注意，您应该在此谓词的前两个子句中添加削减，以避免虚假的选择点。

关于您的其他问题：

3）你要区分寻找最小的N和寻找匹配度N的人：

```
distance(X,Y,N) :-
  nonground(N),!,
  findall(N0, distance(X,Y,[],N0), Ns), !,
  minimum(N, Ns).
distance(X,Y,N) :-
  distance(X,Y,[X],N). 
```

此外，您需要删除添加到`distance/4`. 这与添加到的削减不同`connected/3`！

可能有更好的方法可以避免区分这两种模式，但目前我能想到的只是使用某种广度优先搜索（以保证最小程度）......

4）我没有得到重复的答案，比如`?- connected(X,victoria).`你有例子吗？

# android - TabActivity 的带有图像视图的自定义标题栏

> ID：10426877
> 
> 赞同：2
> 
> 时间：2012-05-03T07:22:50.527
> 
> 标签：android

亲爱的，我正在使用以下代码创建带有图像视图的自定义标题。但它显示了图像视图的空指针异常。如何解决这个问题？

```
 public class MyCustomTab2Activity extends TabActivity {

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_CUSTOM_TITLE); 
                    //Tab Content
        setContentView(R.layout.my_tab_home);       
        ImageView imag = (ImageView) findViewById(R.id.iv_logout);         
        imag.setOnClickListener( new OnClickListener() {

        @Override
        public void onClick(View v) {

        }
        });
                    //custom title bar content
        getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.logintitle); 

        ......

        ...........

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:52:32.773

只需将以下代码放在您的`TabHost`主要活动中 -

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);

    setContentView(R.layout.main);

    getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.window_title);

    ImageView image = (ImageView)findViewById(R.id.header);

    image.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub

            Toast.makeText(CustomWindowTitle.this, "This is sample", Toast.LENGTH_SHORT).show();

            return false;
        }
    });
} 
```

**窗口标题.xml**

```
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="horizontal"
android:layout_width="fill_parent"
android:layout_height="35dip"
android:gravity="center_vertical"
android:paddingLeft="5dip"
android:background="#323331">

<ImageView 
    android:id="@+id/header" 
    android:src="@drawable/header"
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content"/>

</LinearLayout> 
```

希望这对您有所帮助。请参阅下面的输出 -

![自定义窗口标题](../Images/7b19471216d31908953246f2b51f6b27.png)

**更新**

我知道了。`OnclickListener`在图像对代码进行如下更改后，您已声明您的自定义标题-

```
public class MyCustomTab2Activity extends TabActivity {

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_CUSTOM_TITLE); 
                //Tab Content
    setContentView(R.layout.my_tab_home);       

    //custom title bar content
    getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.logintitle); 

    ImageView imag = (ImageView) findViewById(R.id.iv_logout);         
    imag.setOnClickListener( new OnClickListener() {

    @Override
    public void onClick(View v) {

    }
    });

    ......

    ...........

}

} 
```

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:06:28.353

`ImageView`并不是真正设计用于以这种方式使用的，您可以尝试两件事。在 you 上设置以下标志`ImageView`，`imag.setFocusable=(true)`看看它是否有效，或者尝试使用 a `ImageButton`，或者只使用 a`Button`并将`background`属性设置为您的图像，因为它旨在以这种方式使用。

# drupal - Drupal 7 - 以编程方式向节点添加自由标记

> ID：10426879
> 
> 赞同：3
> 
> 时间：2012-05-03T07:22:54.963
> 
> 标签：drupal, drupal-7, drupal-taxonomy

我正在尝试以编程方式将一些标签添加到节点的免费标记分类字段中。假设我有以下节点结构，

```
<?php

$my_tag = 'test';

$node = (object) array(
  'type' => $node_type,
  'nid' => $row->nid,
  'vid' => $row->vid,
  'uid' => 1,
  'status' => $row->status,
  'language' => $row->language,
  'created' => $row->created,
  'changed' => $row->changed,
  'comment' => $row->comment,
  'promote' => $row->promote,
  'title' => $row->title,
  'teaser' => $row->teaser,
  'field_custom_tags' => //TODO add $my_tag to this free tagging taxonomy field
);

$node = node_submit($node);
node_save($node);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T17:17:52.030

在 Drupal 7 中，您不需要以编程方式执行此操作。只需使用小部件类型“自动完成”将分类术语字段添加到您的内容类型 - 然后单击“编辑”并选择默认标签。

你已经完成了，除非你想从内容输入表单中隐藏该字段（这是一个单独的问题，在这里回答： [How to hide a field on node data entry form in drupal？](https://stackoverflow.com/questions/6831024/how-to-hide-a-field-on-node-data-entry-form-in-drupal)）

![默认标签的屏幕截图](../Images/11a74afb338425f0cffd303adb392b3d.png)

# iphone - 当我将它们翻译成另一种语言时，正则表达式是否有效？

> ID：10426880
> 
> 赞同：3
> 
> 时间：2012-05-03T07:23:00.150
> 
> 标签：iphone, ios, regex, ios4

例如：`@"^\s*([a-zA-Z]*)\s*$"`，这是一个正则表达式，

现在我把这个表达翻译成中文：`@"^\小號*([一-ž一-ž]*)\小號*$"`

它会（总是）工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T07:28:28.757

我对此表示高度怀疑。现在我不懂普通话、粤语或任何其他“中国”语言，所以我不知道这些“翻译”究竟是什么意思。但我很确定你不能只是将 ASCII 转义序列音译成中文字符。

`\s`是空格的简写。我打赌`\小號`不是。

`[A-Z]``A`意思是“和之间的任何字符`Z`。所以`[一-ž]`如果 Unicode 代码点值`一`确实低于 的值`ž`，并且这些值实际上包含中文字母的范围，则可能会起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T08:01:49.697

也许不是，因为每种语言都有自己的语法和关键字，RegEx 也同样适用。

可能某些 RegEx 风格与另一种风格相比具有一些额外或更少的功能（例如，`PCRE flavor`and`.NET flavor`和模式`(?<=\w+),`.`PCRE engine`将无法匹配模式，但`.NET engine`会匹配。）。但是，核心关键字和语法会如何变化？

此外，`[a-z]`将仅匹配从代码点 97(dec) 到 122(dec) 范围内的类似英语的字母，并且如果匹配，它将包括代码点 65(dec) 到 90(dec) `case-insensitive`。如果您使用`\p{L}`（LETTER 类），它将匹配来自任何语言的任何字母。

# c# - 处理数据网格中的空值

> ID：10426882
> 
> 赞同：2
> 
> 时间：2012-05-03T07:23:05.737
> 
> 标签：c#, asp.net, datagrid

net (c#)，当我尝试将数据绑定到数据网格时，它在列中显示一些空值（因为某些列中没有数据）。但我想在同一列中显示 0 而不是 null 。

怎么可能？有没有什么表情？

像 NullDisplayText="0" 之类的东西？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T07:29:21.753

DataGrid 中没有这样的表达式，您可以在 ItemDataBound 事件中编写代码并在将数据绑定到单元格之前将 null 替换为自定义文本。

如果您使用 TemplateColumn 并将数据绑定到 aspx Web 控件，则可以编写服务器端绑定以将空值或 null 值替换为默认值

模板字段

```
<asp:TextBox runat="server" Text='<%#DefaultVal(Eval("FieldName").ToString())% >' ID="txtBox1" ></asp:TextBox> 
```

服务器端属性

```
protected string DefaultVal(string val)
{
    return (val == null)?"0":val;
} 
```

对于 GridView，有一个名为 NullDisplayText 的属性，有关详细信息，请参阅以下链接[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.boundfield.nulldisplaytext.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.boundfield.nulldisplaytext.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T07:34:03.923

最好在 Sql 查询中处理空值，以便结果返回不包含任何空值。您可以以这种方式编写用于处理 Null 的 Sql 查询

从 abc 中选择 isnull(Price,0)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T07:33:29.973

您可以使用 COALESCE 编辑 sql 以将 NULL 值转换为零

例如：

```
SELECT COALESCE(potentialNullColumn, 0) FROM table 
```

希望这可以帮助！

# java - AffineTransform 截断图像

> ID：10426883
> 
> 赞同：1
> 
> 时间：2012-05-03T07:23:09.510
> 
> 标签：java, image-processing, rotation, image-rotation, affinetransform

我有一张图像，我必须将它旋转 45、90、135、180 度。我在做什么：

```
try {
    BufferedImage src = ImageIO.read(new File("src.png"));
    double ang = Math.toRadians(90);

    AffineTransform t = new AffineTransform();
    t.setToRotation(ang, src.getWidth() / 2, src.getHeight() / 2);

    AffineTransformOp op = new AffineTransformOp(t, null);
    BufferedImage dst = new BufferedImage(src.getWidth(), src.getHeight(), src.getType());
    op.filter(src, dst);

    ImageIO.write(dst, "png", new File("output.png"));
} catch(Exception ex) { ex.printStackTrace();
} 
```

问题是图像改变了它的位置并超出了目标图像的范围：

[![问题](../Images/3c74dd020c8c28c4666ceec595bdcc4d.png)](https://i.stack.imgur.com/gmKJ0.png)

我用谷歌搜索了这个并在这个问题中找到了解决方案：[AffineTransform truncates image, 我错了什么？](https://stackoverflow.com/questions/8719473/affinetransform-truncates-image-what-do-i-wrong)但我完全不明白，它只适用于象限。我试图将目的地的宽度和高度乘以两倍，但它失败了：

[![又一次失败](../Images/a5dfeb1f719e80c8c8aa0ec062df4cdf.png)](https://i.stack.imgur.com/JIwPt.png)

如何解决这个问题？目标图像不应有任何额外的（对角旋转所需的除外）空白或截断区域。角度问题（0 == 180 或顺时针）并不重要。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T23:22:27.823

**编辑：现在它适用于一般情况。**

围绕中心执行旋转，并且中心放置在目标图像中与源图像中相同的位置（正确的行为）。

我已经修改了您的代码以转换源图像矩形，以便我们可以轻松获得新的尺寸/图像偏移量。这用于构建`BufferedImage`正确尺寸的目标，并将翻译附加到您`AffineTransform`的图像中心，以便将图像中心放置在目标图像的中心。

```
 BufferedImage src = ImageIO.read(new File(INPUT));
        int w = src.getWidth();
        int h = src.getHeight();

        AffineTransform t = new AffineTransform();
        double ang = Math.toRadians(35);
        t.setToRotation(ang, w / 2d, h / 2d);

        // source image rectangle
        Point[] points = {
            new Point(0, 0),
            new Point(w, 0),
            new Point(w, h),
            new Point(0, h)
        };

        // transform to destination rectangle
        t.transform(points, 0, points, 0, 4);

        // get destination rectangle bounding box
        Point min = new Point(points[0]);
        Point max = new Point(points[0]);
        for (int i = 1, n = points.length; i < n; i ++) {
            Point p = points[i];
            double pX = p.getX(), pY = p.getY();

            // update min/max x
            if (pX < min.getX()) min.setLocation(pX, min.getY());
            if (pX > max.getX()) max.setLocation(pX, max.getY());

            // update min/max y
            if (pY < min.getY()) min.setLocation(min.getX(), pY);
            if (pY > max.getY()) max.setLocation(max.getX(), pY);
        }

        // determine new width, height
        w = (int) (max.getX() - min.getX());
        h = (int) (max.getY() - min.getY());

        // determine required translation
        double tx = min.getX();
        double ty = min.getY();

        // append required translation
        AffineTransform translation = new AffineTransform();
        translation.translate(-tx, -ty);
        t.preConcatenate(translation);

        AffineTransformOp op = new AffineTransformOp(t, null);
        BufferedImage dst = new BufferedImage(w, h, src.getType());
        op.filter(src, dst);

        ImageIO.write(dst, "png", new File(OUTPUT)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-15T13:51:58.767

我建议更换

```
AffineTransformOp op = new AffineTransformOp(t, null); 
```

和

```
AffineTransformOp op = new AffineTransformOp(t,  AffineTransformOp.TYPE_BILINEAR); 
```

它将大大提高输出质量。

# php - PDO不能连接，但是mysql_connect可以（没有PW）

> ID：10426885
> 
> 赞同：4
> 
> 时间：2012-05-03T07:23:14.410
> 
> 标签：php, mysql, pdo, mysql-connect

我真的在这里遇到了一个奇怪的问题，它真的开始让我烦恼。这是关于连接的不同行为。我只是想设置 CakePHP，但 PDO 无法连接到 mysql 服务器。

好的，一步一步：这是一台新电脑，我刚刚安装了 XAMPP（在 Win7 上）并下载了 CakePHP。没有做其他任何事情。在 phpMyAdmin 上，我使用 PW 'test' 创建了一个用户 'test'，他拥有数据库 'test'。很简单，对吧？

这里，phpMysqlAdmin 中的 User/Rights 表的行：

```
User Host Password Global Rights GRANT
test %    Yes      USAGE         No 
```

现在，到真正的问题：

这有效：

```
$link = mysql_connect('localhost', 'test'); //<- not using the 3\. parameter, 'password' 
```

但是，什么应该起作用，不：

```
$link = mysql_connect('localhost', 'test', 'test'); //<- using the 3\. parameter, 'password' 
```

而且由于我似乎无法“删除” PDO 的“使用密码：YES”，因此我也无法与 PDO 连接（并且蛋糕使用 PDO）：

```
$dbh = new PDO('mysql:host=localhost;dbname=test', 'test', 'test'); 
```

错误信息：

> 错误！：SQLSTATE [28000] [1045] 用户'test'@'localhost'的访问被拒绝（使用密码：YES）

不可能这么复杂，我只想使用正确的凭据连接到新安装的数据库。我究竟做错了什么？我阅读了许多类似的问题，但没有找到解决我自己问题的方法。

是的，密码确实是“测试”-我不知道为什么 mysql_connect() whitout PW 可以连接-它是否默认使用用户名作为 PW？

这真的不能那么难

感谢您的帮助，祝您有美好的一天。

编辑（回答问题）

这里是数据库权限的条目（在用户：测试中）： - 用户似乎确实拥有数据库“测试”的所有权限

```
Database Rights         GRANT 
test     ALL PRIVILEGES Nein 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T07:41:17.160

`GRANT ALL ON test.* TO test@localhost IDENTIFIED BY "test";`

在 mysql shell 上运行上述查询，一切正常。

# javascript - 如何像这样倾斜图像

> ID：10426887
> 
> 赞同：17
> 
> 时间：2012-05-03T07:23:26.433
> 
> 标签：javascript, canvas

我想像这样倾斜图像我需要为 context.setTransform 设置什么参数？ ![在此处输入图像描述](../Images/9fe982af174b7c5f630ea7ab18dcf813.png)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-03T08:38:32.377

您无法通过单个 2D 变换来实现这一点。

2D 变换允许您通过将第二个参数中的倾斜角的切线传递给 来“向上”或“向下”倾斜图像`setTransform()`，但您希望以对称的方式执行这两种方式（导致“接近”和/或“远”变形）。你需要一个 3D 变换来做到这一点。

但是，您可以通过将图像切成几个水平“带”并在渲染每个带时应用不同的变换来模拟相同的结果。距离图像的一半更远的波段将应用更强的倾斜角。就像是：

```
var width = image.width,
    height = image.height,
    context = $("canvas")[0].getContext("2d");
for (var i = 0; i <= height / 2; ++i) {
    context.setTransform(1, -0.4 * i / height, 0, 1, 0, 60);
    context.drawImage(image,
        0, height / 2 - i, width, 2,
        0, height / 2 - i, width, 2);
    context.setTransform(1, 0.4 * i / height, 0, 1, 0, 60);
    context.drawImage(image,
        0, height / 2 + i, width, 2,
        0, height / 2 + i, width, 2);
} 
```

请注意，条带是两个像素高而不是一个像素，以避免莫尔效应。

[你可以在这个 fiddle](http://jsfiddle.net/dTyRG/)中看到结果。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-05-15T09:35:35.760

这是我在玩 JS 渲染伪 3d 透视图时编写的一个函数。

与基于条纹的转换函数不同（诚然，对于大多数标准用例来说，这已经足够好了），这个函数使用一个 4 个角的矩阵来定义一个自定义的四边形，原始矩形应该被转换成。这增加了一些灵活性，可用于渲染自定义梯形，用于“墙上绘画”水平透视和“地板地毯”垂直透视（以及不对称四边形以获得更多 3d 感觉）。

```
function drawImageInPerspective(
        srcImg,
        targetCanvas,
        //Define where on the canvas the image should be drawn:  
        //coordinates of the 4 corners of the quadrilateral that the original rectangular image will be transformed onto:
        topLeftX, topLeftY,
        bottomLeftX, bottomLeftY,
        topRightX, topRightY,
        bottomRightX, bottomRightY,
        //optionally flip the original image horizontally or vertically *before* transforming the original rectangular image to the custom quadrilateral:
        flipHorizontally,
        flipVertically
    ) {

    var srcWidth=srcImg.naturalWidth;
    var srcHeight=srcImg.naturalHeight;

    var targetMarginX=Math.min(topLeftX, bottomLeftX, topRightX, bottomRightX);
    var targetMarginY=Math.min(topLeftY, bottomLeftY, topRightY, bottomRightY);

    var targetTopWidth=(topRightX-topLeftX);
    var targetTopOffset=topLeftX-targetMarginX;
    var targetBottomWidth=(bottomRightX-bottomLeftX);
    var targetBottomOffset=bottomLeftX-targetMarginX;

    var targetLeftHeight=(bottomLeftY-topLeftY);
    var targetLeftOffset=topLeftY-targetMarginY;
    var targetRightHeight=(bottomRightY-topRightY);
    var targetRightOffset=topRightY-targetMarginY;

    var tmpWidth=Math.max(targetTopWidth+targetTopOffset, targetBottomWidth+targetBottomOffset);
    var tmpHeight=Math.max(targetLeftHeight+targetLeftOffset, targetRightHeight+targetRightOffset);

    var tmpCanvas=document.createElement('canvas');
    tmpCanvas.width=tmpWidth;
    tmpCanvas.height=tmpHeight;
    var tmpContext = tmpCanvas.getContext('2d');

    tmpContext.translate(
        flipHorizontally ? tmpWidth : 0,
        flipVertically ? tmpHeight : 0
    );
     tmpContext.scale(
        (flipHorizontally ? -1 : 1)*(tmpWidth/srcWidth),
        (flipVertically? -1 : 1)*(tmpHeight/srcHeight)
    );

    tmpContext.drawImage(srcImg, 0, 0);  

    var tmpMap=tmpContext.getImageData(0,0,tmpWidth,tmpHeight);
    var tmpImgData=tmpMap.data;

    var targetContext=targetCanvas.getContext('2d');
    var targetMap = targetContext.getImageData(targetMarginX,targetMarginY,tmpWidth,tmpHeight);
    var targetImgData = targetMap.data;

    var tmpX,tmpY,
        targetX,targetY,
        tmpPoint, targetPoint;

    for(var tmpY = 0; tmpY < tmpHeight; tmpY++) {
        for(var tmpX = 0;  tmpX < tmpWidth; tmpX++) {

            //Index in the context.getImageData(...).data array.
            //This array is a one-dimensional array which reserves 4 values for each pixel [red,green,blue,alpha) stores all points in a single dimension, pixel after pixel, row after row:
            tmpPoint=(tmpY*tmpWidth+tmpX)*4;

            //calculate the coordinates of the point on the skewed image.
            //
            //Take the X coordinate of the original point and translate it onto target (skewed) coordinate:
            //Calculate how big a % of srcWidth (unskewed x) tmpX is, then get the average this % of (skewed) targetTopWidth and targetBottomWidth, weighting the two using the point's Y coordinate, and taking the skewed offset into consideration (how far topLeft and bottomLeft of the transformation trapezium are from 0).   
            targetX=(
                       targetTopOffset
                       +targetTopWidth * tmpX/tmpWidth
                   )
                   * (1- tmpY/tmpHeight)
                   + (
                       targetBottomOffset
                       +targetBottomWidth * tmpX/tmpWidth
                   )
                   * (tmpY/tmpHeight)
            ;
            targetX=Math.round(targetX);

            //Take the Y coordinate of the original point and translate it onto target (skewed) coordinate:
            targetY=(
                       targetLeftOffset
                       +targetLeftHeight * tmpY/tmpHeight
                   )
                   * (1-tmpX/tmpWidth)
                   + (
                       targetRightOffset
                       +targetRightHeight * tmpY/tmpHeight
                   )
                   * (tmpX/tmpWidth)
            ;
            targetY=Math.round(targetY);

            targetPoint=(targetY*tmpWidth+targetX)*4;

            targetImgData[targetPoint]=tmpImgData[tmpPoint];  //red
            targetImgData[targetPoint+1]=tmpImgData[tmpPoint+1]; //green
            targetImgData[targetPoint+2]=tmpImgData[tmpPoint+2]; //blue
            targetImgData[targetPoint+3]=tmpImgData[tmpPoint+3]; //alpha
        }
    }

    targetContext.putImageData(targetMap,targetMarginX,targetMarginY);
} 
```

以下是如何调用它：

```
function onLoad() {
    var canvas = document.createElement("canvas");
    canvas.id = 'canvas';
    canvas.width=800;
    canvas.height=800;
    document.body.appendChild(canvas);

    var img = new Image();
    img.onload = function(){ 
        //draw the original rectangular image as a 300x300 quadrilateral with its bottom-left and top-right corners skewed a bit:
        drawImageInPerspective(
         img, canvas,
         //coordinates of the 4 corners of the quadrilateral that the original rectangular image will be transformed onto:
         0, 0, //top left corner: x, y
         50, 300, //bottom left corner: x, y - position it 50px more to the right than the top right corner
         300, 50, //top right corner: x, y - position it 50px below the top left corner 
         300, 300, //bottom right corner: x,y
         false, //don't flip the original image horizontally
         false //don't flip the original image vertically
        );
    }
    img.src="img/rectangle.png";
} 
```

尽管进行了所有逐像素计算，但它实际上非常有效，并且可以完成工作：

[变换图像](http://i.stack.imgur.com/jgoyd.png)

...但可能有更优雅的方式来做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T08:27:48.893

有一种将矩形转换为梯形的方法，请参阅[此堆栈溢出答案](https://stackoverflow.com/questions/2484071/how-do-i-compete-the-transformation-matrix-needed-to-transform-a-rectangle-into)。但是，您需要在每个像素上使用它。

您还可以将图像切成 1 个像素宽的垂直条带，然后从其中心拉伸每个条带。

假设这会导致 w 个条带，并且您希望梯形的左手边是右手边的 80%，那么

对于条带 n，拉伸应为 1+n/(4w)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-31T10:55:49.370

这仍然只是为了未来，但它太酷了，我已经忍不住要添加它了。

Chrome 团队正在努力[向 2D API 添加非仿射变换](https://github.com/fserb/canvas2D/blob/master/spec/perspective-transforms.md)。
这将向 2D API 添加一些方法，例如`perspective()`、`rotate3d()`、`rotateAxis()`，并扩展其他方法以添加 z 轴，以及改进`setTransform()`并`transform()`最终接受 3D DOMMatrix。

这仍然是非常实验性的，可能还会改变，但你已经可以在 Chrome Canary 中尝试这个了`chrome://flags/#enable-experimental-web-platform-features`。

```
if( CanvasRenderingContext2D.prototype.rotate3d ) {
  onload = (evt) => {
    const img = document.getElementById("img");
    const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");
    ctx.translate(0, canvas.height/2);
    ctx.perspective(705); // yeah, magic numbers...
    ctx.rotate3d(0, (Math.PI/180) * 321, 0); // and more
    ctx.translate(0, -canvas.height/2);
    const ratio = img.naturalHeight / canvas.height;
    ctx.drawImage(img, 0, canvas.height/2 - img.naturalHeight/2);
  };
}else {
  console.error( "Your browser doesn't support affine transforms yet" );
}
```

```
body { margin: 0 }
canvas, img {
  max-height: 100vh; 
}
```

```
<canvas id="canvas" width="330" height="426"></canvas>
<img id="img" src="https://upload.wikimedia.org/wikipedia/en/f/f8/Only_By_the_Night_%28Kings_of_Leon_album_-_cover_art%29.jpg">
```

在当前的 Chrome Canary 中呈现为

[![在此处输入图像描述](../Images/d944629208ae322a029db34a19a4d832.png)](https://i.stack.imgur.com/i9tSz.png)

# jquery - 使覆盖层后面的 div 不可选择

> ID：10426888
> 
> 赞同：3
> 
> 时间：2012-05-03T07:23:28.020
> 
> 标签：jquery, css, overlay

我想在 div 上显示叠加层。显示覆盖后，我不想允许选择该背景 div。但是，当我双击背景 div 处于可选择状态的覆盖层时。你能请任何人调查一下吗？ [http://jsfiddle.net/fkWn5/2/](http://jsfiddle.net/fkWn5/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T07:30:30.880

**解决方案**

您可以通过使用 css 中的用户选择规则并在打开叠加层后将此类添加到背景元素来执行此操作：

CSS：

```
.unselectable { 
-moz-user-select: -moz-none;
   -khtml-user-select: none;
   -webkit-user-select: none;
   -ms-user-select: none;
   user-select: none;
} 
```

用 jquery 添加类：

```
$('#backgrounddiv').addClass('unselectable'); 
```

**jsfiddle 示例：**

*   [http://jsfiddle.net/ghm2N/](http://jsfiddle.net/ghm2N/)

**参考：**

*   [.addClass](http://api.jquery.com/addClass/)
*   [带有不可选择的 CSS 的问题](https://stackoverflow.com/questions/826782/css-rule-to-disable-text-selection-highlighting)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T07:33:16.447

```
$(document).ready(function() {
    $('#search_name').on('keyup',
    function() {
        search_name = $(this).val();
        $("#names li:contains('" + search_name + "')").addClass('highlight').siblings().removeClass('highlight');
    });
}); 
```

# ios - PSPDFKit - 添加书签支持

> ID：10426893
> 
> 赞同：2
> 
> 时间：2012-05-03T07:23:46.117
> 
> 标签：ios, pspdfkit

我正在使用 PSPDFKit。我想知道是否可以添加书签支持，例如 iBooks 中的书签功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T08:19:04.527

PSPDFKit [PDF SDK](http://pspdfkit.com/)确实支持它自己的书签版本。它们没有在 PDF 标准中定义，因此它们被写入外部文件（与墨水或高亮注释不同，它们在保存时被写回 PDF）

还有一个书签控制器，您可以通过自定义 UI 显示，只需打开[PSPDFBookmarkViewController 即可](http://pspdfkit.com/documentation/Classes/PSPDFBookmarkViewController.html)。

# git - git remove --cached by TortoiseGit

> ID：10426895
> 
> 赞同：2
> 
> 时间：2012-05-03T07:23:59.910
> 
> 标签：git, tortoisegit

我已经更新了我的`.gitignore`文件，现在我想更新索引。我想执行`git rm --cached`命令。但是我怎么能通过 TortoiseGit 做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T02:06:23.503

右键单击该文件，选择 TortoiseGit -> 删除（保持本地）。这确实`git rm --cached`。

# java - JasperReports：在时间序列图中动态设置时间段

> ID：10426898
> 
> 赞同：1
> 
> 时间：2012-05-03T07:24:06.513
> 
> 标签：java, jasper-reports, time-series, jasperserver

我目前在时间序列图表中面临一些时间段问题。

我想要实现的目标： - 用户可以选择两个日期；这些日期之间的数据将被报告 - 用户还可以在创建报告之前选择时间段 [Year, Month, Day]

我试图设置时间段的方式是通过参数设置属性 timePeriod，如下所示：

```
<timeSeriesDataset timePeriod="$P{TimePeriod}"> 
```

但是在尝试编译时，我收到以下错误：

```
org.xml.sax.SAXParseException: cvc-enumeration-valid: 
Value '$P{TimePeriod}' is not facet-valid with respect to enumeration 
'[Year, Quarter, Month, Week, Day, Hour, Minute, Second, Milisecond]'. 
It must be a value from the enumeration. 
```

我已经尝试了一切（例如更改参数数据类型，...），但我总是最终得到这个错误。甚至可以动态设置***timePeriod***吗？以及如何实现？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T00:22:59.707

不幸的是，简短的回答是否定的。请参阅此功能请求[http://jasperforge.org/projects/ireport/tracker/view.php?id=4629](http://jasperforge.org/projects/ireport/tracker/view.php?id=4629)

但是，你可以做一个 hack。三份图表副本

```
<band height="240">
    <printWhenExpression><![CDATA["Year".equals($P{TimePeriod})]]></printWhenExpression>
    <timeSeriesChart>
        ...
        <timeSeriesDataset timePeriod="Year">
        ...
</band>
<band height="240">
    <printWhenExpression><![CDATA["Month".equals($P{TimePeriod})]]></printWhenExpression>
    <timeSeriesChart>
        ...
        <timeSeriesDataset timePeriod="Month">
        ...
</band>
<band height="240">
    <printWhenExpression><![CDATA["Day".equals($P{TimePeriod})]]></printWhenExpression>
    <timeSeriesChart>
        ...
        <timeSeriesDataset timePeriod="Day">
        ...
</band> 
```

抱歉，没有更干净的东西。

# symfony - Symfony2 生产时出现错误 500 而不是 404

> ID：10426899
> 
> 赞同：27
> 
> 时间：2012-05-03T07:24:14.157
> 
> 标签：symfony

在我的 Symfony2 项目中，我进入了开发模式正确的 404 异常屏幕。但是在生产模式下，我得到了带有 HTTP 状态代码 500 而不是 404 的空白屏幕。我正在使用位于`app/Resources/TwigBundle/views/Exception`. 在 apache 错误日志中，它会创建以下消息：

```
PHP Fatal error:  Uncaught exception 'Symfony\\Component\\Routing\\Exception\\ResourceNotFoundException' in /home/test/app/cache/prod/appprodUrlMatcher.php:518\nStack trace:
#0 /home/test/app/cache/prod/classes.php(1025): appprodUrlMatcher->match('/404')
#1 /home/test/app/cache/prod/classes.php(4550): Symfony\\Component\\Routing\\Router->match('/404')
#2 [internal function]: Symfony\\Bundle\\FrameworkBundle\\EventListener\\RouterListener->onKernelRequest(Object(Symfony\\Component\\HttpKernel\\Event\\GetResponseEvent))
#3 /home/test/app/cache/prod/classes.php(3777): call_user_func(Array, Object(Symfony\\Component\\HttpKernel\\Event\\GetResponseEvent))
#4 /home/test/app/cache/prod/classes.php(3703): Symfony\\Component\\EventDispatcher\\EventDispatcher->doDispatch(Array, 'kernel.request', Object(Symfony\\Component\\HttpKernel\\Event\\GetResponseEvent))
#5 /home/test/app/cache/prod/classes.php(4787): Symfony\\Component\\EventDispatcher\\EventDispatcher->dispatch('kernel.request', Object(Symfony\\Component\\HttpKernel\\Event\\Get in /home/test/app/cache/prod/classes.php on line 4560 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-03T07:39:57.343

`Symfony\Component\Routing\Exception\ResourceNotFoundException`表示未定义的路由名称。看起来你的错误模板中有某个地方`{{ path('wrong_route') }}`。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-03-18T18:38:29.077

即使您定义了自定义错误页面（例如 app/Resources/TwigBundle/views/Exception/error404.html.twig ），您在生产 (app.php) 中收到 500 错误/空白页面的最可能原因也是如此是您的错误模板正在调用 is_granted twig 函数，而不检查用户是否已登录。

调试步骤：

1）检查app/logs/prod.log。你看到这样的错误吗？

```
request.ERROR: Exception thrown when handling an exception (Twig_Error_Runtime: An exception has been thrown during the rendering of a template ("The security context contains no authentication token. One possible reason may be that there is no firewall configured for this URL.") 
```

2）如果您看到上面提到的错误，请查看是否可以在您的错误模板中找到对 is_granted 的引用。在调用 is_granted 之前检查用户是否已登录。例如：

```
{% if app.user is not null and is_granted('ROLE_ADMIN') %}
<p>Text goes here</p>
{% else %} 
```

3) 如果您在模板中找不到对 is_granted 的引用，请查看是否调用了 KNP 菜单包使用的 knp_menu_render()。同时签入任何扩展模板。将对 knp_menu_render 的调用包装在检查中以验证用户是否已登录：

```
{% if app.user %}
    {{ knp_menu_render() }}
{% endif %} 
```

有关更多信息，请查看本页末尾 stof 的评论： [https ://github.com/symfony/symfony/issues/5320](https://github.com/symfony/symfony/issues/5320)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-09-19T03:15:17.937

在我的例子中，它是在 404 模板中使用 {% stylesheets %} 标记，而 TwigBundle 未包含在 Assetic 配置中。

检查你的`app/logs/prod.log`，它应该有答案。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-06T10:25:52.990

`ResourceNotFoundException`是当没有路由匹配当前请求时路由器抛出的内容。

这可能是缓存问题（80% 的时间是缓存问题。`rm -rf app/cache/*`在您的预生产服务器上尝试）。由于问题没有出现在本地......（**您在本地尝试了“prod”环境对吗？**）。

您还应该尝试从您的`app/Resources/TwigBundle/views/Exception/error404.html.twig`（*是您使用的文件名吗？*）中删除除简单 HTML 之外的所有内容，以检查它是否不是树枝问题。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-03-17T12:50:34.543

我遇到过同样的问题，

但我`isGranted`在 php 方面。所以我添加了一个令牌检查：

前 ：

```
if ($this->get('security.authorization_checker')->isGranted('IS_AUTHENTICATED_FULLY') 
```

后 ：

```
if ($this->get('security.token_storage')->getToken() && $this->get('security.authorization_checker')->isGranted('IS_AUTHENTICATED_FULLY') 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-06-11T01:27:07.250

这是我将所有不存在的路由重定向到根路径的方法。将此路由条目放在路由配置的最底部。所有现有的路线**必须**在它之上！

```
anything:
    path:     /{path}
    defaults:
        _controller: FrameworkBundle:Redirect:urlRedirect
        path: /
        permanent: true
    requirements:
        path: ".+" 
```

参考： http:
[//symfony.com/doc/current/cookbook/routing/slash_in_parameter.html](http://symfony.com/doc/current/cookbook/routing/slash_in_parameter.html)
[http://symfony.com/doc/current/cookbook/routing/redirect_in_config.html](http://symfony.com/doc/current/cookbook/routing/redirect_in_config.html)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-05T18:03:25.630

另一种选择是，当没有可用的令牌时，您尝试访问安全上下文中的安全令牌。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-23T13:29:37.213

也许 app/Resources/TwigBundle/views/Exception/error.html.twig 引用了另一个不存在的基本布局模板 - 这是我的问题

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-11-12T21:54:53.197

在我的情况下（symfony 2.3）我得到一个 200 状态码，所以错误页面没有加载。我就是这样解决的：

[https://groups.google.com/d/msg/Symfony2/zNWNmQIq3nk/lVs4uC7QMIcJ](https://groups.google.com/d/msg/Symfony2/zNWNmQIq3nk/lVs4uC7QMIcJ)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-01-20T10:31:39.977

只是对给定答案的补充说明： `ResourceNotFoundException`如果您尝试包含不存在的模板，也可以抛出。一个典型的情况是，您重构了应用程序代码，但忘记更新错误页面，因为它们位于文件夹中`app/Resources`而不是`src/`文件夹中，或者包含使用未在“错误”上下文中定义的变量或服务的给定模板.

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-11-10T16:21:20.457

我遇到 Symofny 3 在您不使用时在生产中抛出 500 错误

```
$this->createNotFoundException() 
```

在您的控制器中。

```
throw Exception('message', 404) 
```

适用于开发环境，但不适用于生产。

# javascript - 如何在 jquery 中突出显示文本输入中的段落

> ID：10426903
> 
> 赞同：0
> 
> 时间：2012-05-03T07:24:31.287
> 
> 标签：javascript, jquery

我`jQuery`今天开始学习。我目前在第 24 期教程[PHPachademy](http://www.youtube.com/watch?v=jIZFHjkUCrs&feature=BFa&list=PL6B08BAA57B5C7810)。我在让这个特定的教程正常工作时遇到了很多问题。我很确定这是一个语义错误 >_<;;

这是一个[尝试 JSfiddles](http://jsfiddle.net/Hg72b/6/)

最后有人可以向我解释为什么有这条线吗？

```
('" + search_name + "') 
```

为什么有这么多`+`的和`'"`在行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T07:28:07.290

```
$('#names li').removeClass('highlight'); 
```

代替

```
$(#names li).removeClass('highlight'); 
```

您引用 #names 变量而不是使用`'#names li'`字符串

[**固定小提琴**](http://jsfiddle.net/Hg72b/9/)

> 最后有人可以向我解释为什么有这条线吗？('" + search_name + "')

`:contains`选择器[**文档**](http://api.jquery.com/contains-selector/)：

> 描述：选择所有包含指定文本的元素。匹配的文本可以直接出现在所选元素中、该元素的任何后代中，或者它们的组合中。与属性值选择器一样， **:contains() 括号内的文本可以写成裸词或用引号括起来。**文本必须具有匹配的大小写才能被选中。

[**不带引号的小提琴**](http://jsfiddle.net/Hg72b/15/)

**顺便说一句，既然你正在尝试学习 jQuery**

关于 jQuery 的一个重要规则是，jQuery 不应该不能替代 javascript！它是 javascript 之上的一个抽象库。不要过度使用它，它`this.value`可以为您带来更轻松，更快速的输入价值`$(this).val()`。

[你可以在这里阅读更多](https://stackoverflow.com/tags/jquery/info)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T07:29:26.587

只需添加“

```
$("#names li") 
```

[http://jsfiddle.net/Hg72b/7/](http://jsfiddle.net/Hg72b/7/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T07:30:48.913

![在此处输入图像描述](../Images/db8ed96c4add6c1ea2485036b6d6e521.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T07:33:17.177

在 dom jquery 中引用某些内容时，始终以以下形式解析字符串

```
$('somethingtosearchfor').doSomethingOnIt() 
```

在您的情况下，您正在从 search_name 变量构建一个 jquery 行，因此您必须在由“分隔的字符串之间进行连接（+）。通过这种连接，您正在构建 jquery 语法以在 dom 和此语法中搜索必须是一个字符串，因此您可以将 ' 字符与您的搜索名称连接起来，结果与 gdoron 提及的语法相同

# python - Python：如何从多块 csv 表中加载列？

> ID：10426908
> 
> 赞同：2
> 
> 时间：2012-05-03T07:24:54.063
> 
> 标签：python, csv, numpy, block

我现在正在开发适合 SIP 数据的程序。不幸的是，数据位于具有以下结构的 csv 表中：

```
 f;      Abs(Zm);     Std(Abs);      Phi(Zm);     Std(Phi);       Re(Zm);       Im(Zm);     Time [s]
1.0000000e-001;    7712.6262;       0.0247;    -0.003774;     0.000001;    7712.5713;     -29.1074;   3418623040
2.0000000e-001;    7712.4351;       0.0030;    -0.007543;     0.000001;    7712.2157;     -58.1732;   3418623056
5.0000000e-001;    7710.8455;       0.0094;    -0.018837;     0.000002;    7709.4775;    -145.2434;   3418623063
1.0000000e+000;    7705.3763;       0.0098;    -0.037637;     0.000000;    7699.9195;    -289.9395;   3418623067
2.0000000e+000;    7683.8120;       0.0241;    -0.075058;     0.000001;    7662.1778;    -576.1935;   3418623069
5.0000000e+000;    7539.7945;       0.0080;    -0.184724;     0.000002;    7411.5201;   -1384.8720;   3418623071
1.0000000e+001;    7088.6894;       0.0060;    -0.351521;     0.000001;    6655.2169;   -2440.8206;   3418623072

         f;     Abs(Z12);     Phi(Z12);     Abs(Z34);     Phi(Z34);     Abs(Z14);     Phi(Z14);     Time [s]
1.0000000e-001;       1.7821;     3.139014;       0.2545;    -3.141592;    7710.5896;    -0.003774;   3418623040
2.0000000e-001;       1.7850;     3.133381;       0.2572;    -3.126220;    7710.3930;    -0.007543;   3418623056
5.0000000e-001;       1.7755;     3.121223;       0.2514;    -3.133763;    7708.8186;    -0.018838;   3418623063
1.0000000e+000;       1.7683;     3.100815;       0.2503;     3.139466;    7703.3580;    -0.037638;   3418623067
2.0000000e+000;       1.8091;     3.058834;       0.2538;    -3.123705;    7681.7502;    -0.075060;   3418623069
5.0000000e+000;       1.5547;     2.943611;       0.2398;    -3.136317;    7538.0045;    -0.184727;   3418623071 
```

我正在使用 numpy.loadtxt() 例程从表中收集数据，如下所示：

```
def load_datafile(filename):
try:
     x_data, y_data = numpy.loadtxt(filename , unpack=True, usecols=(0,1),) 
except IOError:
    print('There was an error opening the file: {0}'.format(filename))
    x_data=[]
    y_data=[]
return x_data, y_data 
```

我知道在 loadtxt() 命令中使用表中的特定块没有进一步的标识符。但是有没有方便的解决方法？

否则是否有一个简单的脚本可以将 csv 输入文件重新排列为单个块列？

提前致谢！问候，贡纳尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T07:56:49.540

假设像输入一样总是有一对空的换行符，这个小脚本应该返回一堆文件对象：

```
def parseMultiblockCSV(filename):
    original = open(filename, "r")
    newlines = 0
    block = 0
    current = open(filename + "." + str(block), "w")
    for line in original:
        if line == "":
            newlines += 1
        if newlines >= 2:
            current.close()
            block += 1
            current = open(filename + "." + str(block), "w")
        current.write(line)
    current.close()
    files = []
    for n in range(block + 1):
        files.append(open(filename + "." + str(n)))
    return files 
```

如果您随后需要将它们都放在同一个表中，我假设它具有将多个文件加载到单个表中的功能。除此以外：

```
def combineCSVFiles(files, output):
    if len(files) == 1:
        return files[0]
    start = file[0]
    files = file[1:]
    out = open(output, "w")
    for line in start:
        out.write(line)
    for input in files:
        first = false
        for line in input:
        if not first:
            first = true
            continue
        out.write(line)
    out.close()
    return open(output, "r") 
```

这应该返回一个包含给定文件对象的连接内容的文件对象，忽略除第一个文件之外的任何内容的第一个标题行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T12:21:07.027

您可以先将输入数据拆分为块，然后使用 loadtxt 或 genfromtxt（我更喜欢这个，因为它有读取标题的选项）。

```
from numpy import genfromtxt
from StringIO import StringIO

def read_by_block(filename):
    blocks = []
    data = open(filename).read()
    for blk in data.split('\n\n'): # we assume that blocks are separated by two newlines
        blocks.append(genfromtxt(StringIO(blk), delimiter=';', names=True))
    return blocks

data = read_by_block('data.txt')

print data[0].dtype.names # print fields for first block
print data[0]['StdPhi'] # print column 'Std(Phi)' in 1st block 
```

# actionscript-3 - 火花组合框数据提供者验证器

> ID：10426911
> 
> 赞同：0
> 
> 时间：2012-05-03T07:24:58.197
> 
> 标签：actionscript-3, apache-flex, actionscript, flex4

当用户输入的值不是该组合框的数据提供者中的值时，我想对火花组合框进行验证。如果用户输入的值不是数据提供者中的值，任何人都可以给我代码如何进行验证应进行焦点更改验证。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:36:58.110

您可以将属性设置`textInput`为组合框，并管理对来自关联函数的输入的检查...

```
<fx:Script>
    <![CDATA[
        protected function change(event:TextEvent):void
        {

        }
    ]]>
</fx:Script>

<s:ComboBox  textInput="change(event)"/> 
```

> flash.display.InteractiveObject.textInput
> 
> 当用户输入一个或多个文本字符时调度。各种文本输入法都可以生成此事件，包括标准键盘、输入法编辑器 (IME)、语音或语音识别系统，甚至是粘贴没有格式或样式信息的纯文本的行为。
> 
> **事件类型：**
> flash.events.TextEvent.TEXT_INPUT

**编辑**

```
<fx:Script>
    <![CDATA[
        import mx.collections.ArrayCollection;
        import mx.controls.Alert;
        import mx.events.FlexEvent;
        //dataprovider initialization
        [Bindable]private var d:ArrayCollection = new ArrayCollection([
            {name: "Values 1"}, {name: "Values 2"}, {name: "Values 3"}
            ]);

        protected function change(event:TextEvent):void
        {      // if enter key is pressed
            if (event.text.charAt(event.text.length-1) == "\r")
            {       
                // if the text inserted in the combobox is one of the 
                // item in the dataprovider 
                if (comboBox.selectedIndex >= 0)
                    Alert.show("something selected");
                else   // if the text is not an item in the dataprovider
                    Alert.show("nothing selected");

            }
        }
    ]]>
</fx:Script>

<s:ComboBox id="comboBox" textInput="change(event)"
       dataProvider="{d}" labelField="name"/> 
```

**编辑 2**

要从动作脚本设置边框颜色，您可以执行以下操作：

```
comboBox.setStyle("borderColor","#ff0000"); // set the bordercolor to red 
```

如果您不需要对插入的文本进行特别检查，您可以简单地在 ComboBox 上设置属性更改

```
 protected function index_change(event:IndexChangeEvent):void
        {
            if (comboBox.selectedIndex >= 0 )
                Alert.show("something selected")
            else
                Alert.show("nothing selected");

        }
        <s:ComboBox id="comboBox" dataProvider="{d}" labelField="name"
            change="index_change(event)"
             /> 
```

# html - 在 IE8 中选择填充

> ID：10426912
> 
> 赞同：2
> 
> 时间：2012-05-03T07:25:07.920
> 
> 标签：html, css

我正在使用以下 css 进行选择：

```
select{
    border: 1px solid #707A68;
    border-radius: 4px 4px 4px 4px;
    margin: 0px 0 5px;
    padding: 8px 10px;
} 
```

边框半径在 IE 中不起作用，我对此表示满意，但填充也没有渲染。有什么解决方法还是我做错了什么？在 Chrome 和 FF 中运行良好

这是页面上的完整代码：

```
<input type="text" placeholder="Hello World" />
<select>
<option> Option one</option>
    <option> Option two</option>
</select>

<style>
select{
margin-top:20px;
margin-left:20px;
display:block;
padding:20px;

}
</style> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T18:35:46.897

我终于找到了答案！我只需要添加

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

到我的代码！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-07T23:30:28.880

将此CSS用于所有浏览器+

```
<select>
<option> Option one</option>
    <option> Option two</option
</select>

select{
margin-top:10px;
    margin-left:10px;
        display:block;
    padding:5px;
    border:1px 5px #000;
-moz-border-radius-topleft: 5px;
-moz-border-radius-topright:5px;
-moz-border-radius-bottomleft:5px;
-moz-border-radius-bottomright:5px;
-webkit-border-top-left-radius:5px;
-webkit-border-top-right-radius:5px;
-webkit-border-bottom-left-radius:5px;
-webkit-border-bottom-right-radius:5px;
border-top-left-radius:5px;
border-top-right-radius:5px;
border-bottom-left-radius:5px;
border-bottom-right-radius:5px;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T08:11:33.463

`<select>`'s are inline elements and if you want padding to be applied to inline elements you need to add display:block; which will make it a block element. Tested on IE8.

fiddle: [http://jsfiddle.net/Qs3E8/4/](http://jsfiddle.net/Qs3E8/4/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T07:45:08.580

您使用的是哪个版本的 IE？，因为我在 IE8 中对其进行了测试，并且得到了填充。

![在此处输入图像描述](../Images/a9e1c52da8b6031ed375b1920258d3ef.png)

您可以尝试`-ms-border-radius: 4px;`获取边框半径，至少在 IE 9 和 IE10 中它应该可以工作。

# xml - 如何将 uml2 文件 (*.uml) 转换为 xmi 文件？

> ID：10426915
> 
> 赞同：1
> 
> 时间：2012-05-03T07:25:30.397
> 
> 标签：xml, uml, xmi

我通过 Eclipse uml2 工具创建了一个 .uml 文件，但是如何将 .uml 文件转换为 .xmi 文件，以便将 .xmi 文件导入其他 uml 案例工具。

我应该将 .uml 转换为 .ecore（EMF 模型），然后使用 org.eclipse.emf.ecore.xmi.util.XMLProcessor.save() 保存为 xmi 文件吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T07:43:32.647

文件的扩展名并不重要。里面已经是xmi了。即Enterprise Architect、Rational Software Architect 或UML Lab 可以直接导入或打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:13:41.490

.uml 文件是模型并且已经是一个 xmi 文件。问题是您为每个图表创建一个模型，因此如何整合所有这些模型。如果您不首先使用一种模型映射器来查找在所有这些模型中调度的逻辑，那么将 EclipseUML2 工具导入另一个工具是不可能的。

由于 EclipseUML 工具项目自 Eclipse 3.5 以来已停止，因此只有一个工具为 EclipseUML2 工具开发了模型合并。Omondo 允许您将许多模型合并到一个模型中，然后将该单个模型重用到任何其他 UML 2.x 兼容工具中。

# data-warehouse - 提取维度/事实数据的建议顺序是什么？

> ID：10426923
> 
> 赞同：1
> 
> 时间：2012-05-03T07:25:59.570
> 
> 标签：data-warehouse, etl

我的理解是先提取维度，再提取事实。这样，外键仍将在暂存区得到尊重。

加载时，出于同样明显的原因，应该使用相同的顺序。所以。最终的订单应该是这样的 -

提取维度 -> 提取事实 -> 加载维度 -> 加载事实

当我浏览 DAC 文档时，我遇到了一篇文章，上面说顺序应该是这样的 =

提取事实 -> 提取维度 -> 加载维度 -> 加载事实

想法/建议/意见..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T10:02:44.177

我怀疑作者的想法可能是：当你加载新数据时，首先确定你感兴趣的事实，以确保你处理和加载的数据量最少。然后从这些事实中导出您的维度，因此您只填充您实际需要的维度值。

我不知道这种解释是否正确，但我可以想象有人提出这个论点。另一方面，知道哪些维度值没有对应的事实通常非常有趣，例如哪些客户还没有购买新产品。

因此，您在环境中处理数据的方式在很大程度上取决于您自己的要求，我不会太担心单个文档的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-04T17:20:32.993

可能为时已晚，但以防万一有人遇到这个问题，这里有一些澄清。

数据仓库通常建立在不强制引用完整性的存储系统上，或者因为它是它的固有特征（Redshift、Hive 等），或者因为如果系统允许它（如经典 RDBMS），它们会导致额外的开销/性能影响。

因此，建议的顺序

`extract fact -> extract dimension -> load dimension -> load fact`

旨在保证参照完整性。

如果我们首先提取事实，我们将确保一旦我们提取维度，所有事实将指向仓库中的有效维度/现有维度。

通过首先加载维度（假设采用 Kimball 建模方法），加载事实后，您将能够将它们与一致的维度连接起来并成功检索维度代理键。

# xml - JSON 根元素

> ID：10426924
> 
> 赞同：26
> 
> 时间：2012-05-03T07:26:00.803
> 
> 标签：xml, json

JSON 是否像 XML 一样需要根元素。据我所知，这是一个有效的 JSON 字符串。

```
{
    "email":[
        {
            "type":"home",
            "name":"john.doe@gmail.com"
        },
        {
            "type":"work",
            "name":"jdoe@gmail.com"
        }
    ]
} 
```

我需要将 JSON 转换为 XML，反之亦然。但是，尽管当我将其转换为 XML 时，上面的 JSON 是有效的，但它是无效的吗？我错过了什么还是这是正常的？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-03T09:23:20.157

JSON 文档的最外层是“对象”（大括号）或“数组”（方括号）。

任何将 JSON 转换为 XML 的软件都必须调和这样一个事实，即它们是具有不同规则的不同数据模型。不同的转换工具以不同的方式处理这些差异。

**更新 (2021-09-03)：**如评论中所述，JSON 规范的后续迭代允许最外层是字符串、数字、布尔值或 null。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2018-12-07T16:51:30.360

[根据http://json.org/](http://json.org/)右侧窗格中修改后的 Backus-Naur-Form，JSON 数据结构的根元素可以是以下七种类型/值中的**任何一种：**

```
Object
Array
String
Number
true
false
null 
```

### 例子

因此，以下所有示例都是有效的 JSON 根元素：

```
{
  "name": "Jpsy",
  "age": 99
} 
```

```
[ 1, 2, "three", 4, 5 ] 
```

```
"abcdefg" 
```

```
123.45 
```

```
true 
```

```
false 
```

```
null 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T07:27:58.650

这是正常的，json和xml没有相同的规则。您可以将根括号“{”和“}”转换为根元素，以确保没有转换问题

# python - Python 正则表达式将 'a_1_1' 替换为 'p.get("a_1_1", 0)'

> ID：10426927
> 
> 赞同：0
> 
> 时间：2012-05-03T07:26:14.250
> 
> 标签：python, regex

我在**python**中有一些字符串，例如：

```
1) 'a_1_2+c_2_4 + 5'
2) 'ctl_1_3/80'
3) 'd_10_55'
... 
```

我想用**re**替换它们。它们应该看起来像：

```
1) 'p.get("a_1_2", 0)+p.get("c_2_4", 0) + 5'
2) 'p.get("ctl_1_3", 0)/80'
3) 'p.get("d_10_55", 0)' 
```

你能帮我用正则表达式吗？

PS **p**是python中的简单字典

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T07:31:01.707

```
In [7]: s = 'a_1_2+c_2_4 + 5'

In [8]: re.sub(r'(\w+_\d+_\d+)', r'p.get("\1", 0)', s)
Out[8]: 'p.get("a_1_2", 0)+p.get("c_2_4", 0) + 5' 
```

目前尚不清楚什么规则支配第二个参数`p.get()`。它出现在第一个示例中，但没有出现在其他两个示例中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T07:32:04.373

您是否正在尝试使用 Python 构建 JavaScript 代码？如果您的字符串包含双引号或任何其他 JavaScript 特殊字符会怎样？

虽然可以进行正则表达式替换，但我建议将数据作为 JSON 对象（使用 Python 的 json 库）传递给客户端并在客户端处理该数据。这将导致更清晰和更可支持的代码。

# ruby-on-rails - Rails 3.2 Comment 模型和 REXML 的 Comment 之间的冲突

> ID：10426937
> 
> 赞同：0
> 
> 时间：2012-05-03T07:27:10.383
> 
> 标签：ruby-on-rails, ruby-on-rails-3, comments, conflict, rexml

我的 Rails 3.2 应用程序中有一个名为“Comment”的模型，它适用于我的应用程序。但是，我制作了一个脚本，由 运行`rails runner`，它在我的数据库中插入诸如评论之类的数据，我收到以下错误：

```
/home/revan/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/rexml/comment.rb:23:in `initialize': wrong number of arguments (0 for 1) (ArgumentError) 
```

我发现问题来自 REXML 中定义的 Comment，这使我自己的 Comment 模型黯然失色。

我在互联网上进行了大量研究，但没有找到方便的解决方案。所以我的问题是：如何在不更改模型名称的情况下避免让我的评论蒙上阴影？

谢谢，

瑞文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T17:57:20.393

我遇到过同样的问题。在我的例子中，它是一个包含 REXML 的 gem（gem 是 provisioning-api）。我的解决方案是`:require => false`在 Gemfile 中指定该 gem，并在需要 Provisioning-api gem 之前需要我的评论模型。

# objective-c - 从 iOS 应用程序上传文件到 ftp

> ID：10426939
> 
> 赞同：6
> 
> 时间：2012-05-03T07:27:21.180
> 
> 标签：objective-c, ios, ftp

我阅读了[SimpleFTPSample](http://developer.apple.com/library/ios/#samplecode/SimpleFTPSample/Introduction/Intro.html)，但我需要一个比本文档更好的示例。我在谷歌上搜索了一些其他示例，但我发现的所有网站最终都引用了 Apple 文档，而且我还没有找到其他任何不相关的内容。

有人能帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T14:29:12.037

Wrote an easy to use ftp uploader for iOS and it runs on a background thread courtesy of ASIHTTPReq.

[https://github.com/soulslicer/QueueFTP](https://github.com/soulslicer/QueueFTP)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T07:42:10.903

我相信您可以使用非常强大的[ASIHttpRequest来做到这一点。](http://allseeing-i.com/ASIHTTPRequest/)

从他们的[文档](http://allseeing-i.com/ASIHTTPRequest/How-to-use)：

```
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];

// Upload a file on disk
[request setFile:@"/Users/ben/Desktop/ben.jpg" withFileName:@"myphoto.jpg" andContentType:@"image/jpeg"
forKey:@"photo"];

// Upload an NSData instance
[request setData:imageData withFileName:@"myphoto.jpg" andContentType:@"image/jpeg" forKey:@"photo"]; 
```

和

```
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
[request addPostValue:@"Ben" forKey:@"names"];
[request addPostValue:@"George" forKey:@"names"];
[request addFile:@"/Users/ben/Desktop/ben.jpg" forKey:@"photos"];
[request addData:imageData withFileName:@"george.jpg" andContentType:@"image/jpeg" forKey:@"photos"]; 
```

在您的情况下`url`，将是一个 FTP 网址，例如：`ftp://user:password@my.host.com`

但这对您不起作用，或者您的要求是制作一个 ftp 客户端，看看这些：

*   [https://github.com/valentinradu/WhiteRaccoon](https://github.com/valentinradu/WhiteRaccoon)
*   [https://github.com/jkichline/ACFTP](https://github.com/jkichline/ACFTP)
*   [https://github.com/jkichline/ACConnect](https://github.com/jkichline/ACConnect)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-22T14:26:11.297

您可能还想查看[Black Raccoon](https://github.com/lloydsargent/BlackRaccoon)，它是一个轻量级的 FTP 文件系统，并且得到积极维护。

# .net - 如何在 Google Translate API .NET 中指定源语言？

> ID：10426942
> 
> 赞同：2
> 
> 时间：2012-05-03T07:27:28.977
> 
> 标签：.net, google-api

当我尝试翻译简单的“19 - 15”时，源语言的自动检测失败，并且出现“错误的语言对”异常。

.NET 示例包含某种围绕 Google Translate API 的包装器。它位于 Google.Apis.Translate.v2.cs 文件中。但是这个包装器不允许指定源语言。那么，最简​​单的方法是什么？

我认为最正确的方法是重新生成 Google.Apis.Translate.v2.cs。但我不知道该怎么做。

虽然我可以处理粗略的 REST 请求，但看起来很尴尬。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T17:32:37.177

您可以在翻译 ListRequest 中指定 Source 参数，如以下代码段所示：

```
var request = service.Translations.List(srcText, input.TargetLanguage);
request.Source = "fr";
TranslationsListResponse response = request.Fetch(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T10:04:31.377

或者，您可以在 Google.Apis.Translate.v2.cs 中为 List 方法创建和重载。只需在原始 List() 方法下面键入：

```
public virtual ListRequest List(Google.Apis.Util.Repeatable<string> q, 
                                  string source, string target)
{
    var _request = new ListRequest(service, q, target);
    _request.Source = source;
    return _request;
} 
```

之后你可以打电话

```
var response = service.Translations.List(srcText, "en","ru").Fetch(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-11-09T14:45:53.223

对我有用的是以下内容：

```
var request = service.Translations.List(text, targetLanguage);
if (!string.IsNullOrEmpty(sourceLanguage))
{
        request.Source = sourceLanguage;
        request.Format = TranslationsResource.ListRequest.FormatEnum.Text;
}

var response = await request.ExecuteAsync(); 
```

# mysql - 如何在网站中存储评论？

> ID：10426943
> 
> 赞同：3
> 
> 时间：2012-05-03T07:27:31.927
> 
> 标签：mysql, database

我有一个带有登录系统的网站。任何登录的用户都可以发表评论。我应该如何存储评论？将它们存储在 mysql 数据库或 txt 文件或其他文件中的最佳方法是什么？你推荐什么样的设计？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T07:31:04.747

怎么样

```
CREATE  TABLE login_comment (
  `id` INT NOT NULL AUTO_INCREMENT ,
  `user_id` INT NOT NULL ,
  `timestamp` DATETIME NOT NULL DEFAULT current_timestamp ,
 `comment` TEXT NOT NULL ,
PRIMARY KEY (`id`) ); 
```

`user_id`你还应该为你的`users`表添加一个外键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T07:39:14.883

我会结合 HTML、PHP 和 MySQL。用户以 HTML 形式写评论，POST 到一个 php 文件，该文件又在 MySQL 数据库中插入评论，如上文所述的@juergen d。

# dom - 在 chrome 开发工具/firebug 中保留 DOM 元素突出显示

> ID：10426946
> 
> 赞同：18
> 
> 时间：2012-05-03T07:27:47.557
> 
> 标签：dom, firebug, selection, google-chrome-devtools

有没有办法保留高亮显示 DOM 元素的 boxmodel 属性（宽度、边距、填充、边框）？我正在尝试在调整窗口大小时检查元素的行为，以便永久查看测量结果。

Chrome 开发人员工具和 Firebug (Firefox) 的解决方案表示赞赏！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-05T20:25:27.107

这对于 Chrome DevTools 是不可能的，但是您可以在调整窗口大小时打开`Metrics`面板右侧的窗格`Elements`来监控内容区域/填充/边框/边距。

# jquery - jQuery / AJAX 自动完成，每个会话只查询一次 MySQL 表

> ID：10426950
> 
> 赞同：1
> 
> 时间：2012-05-03T07:28:01.720
> 
> 标签：jquery, mysql, ajax

我正在使用 jQuery / AJAX 开发自动建议（自动完成）功能。问题是我将使用的 MySQL 表有 30,000 条记录，并且服务器负载很高。所以我不想在每次访问者按下按钮时查询 MySQL 表，我宁愿在每个用户会话中查询一次。有没有办法实现这一目标？也许一次缓存或检索 30,000 条记录并将其存储在某个地方？

谢谢，

佐尔卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:31:32.267

使用缓存选项。但它可以让用户输入以前的值。否则，它会击中服务器。

```
$(function() {
    $("#empname").autocomplete(
    'getNames.action',
        {
            scroll:false,
            minChars:1,
            delay:0,
            width:200,
            autoFocus:true,
            cache:true,
            formatResult: function(data, value) {

              return value.split(".")[0];
            }
        });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T07:36:21.347

30,000 条记录，用一个好的密钥，你可以很快得到结果。

通常你不想在每次按键时都执行 AJAX，但是你需要给用户输入一个延迟（例如 500 毫秒）。

```
var t;
$('#textbox').keyup(function() {
    if (t) clearTimeout(t);
    t = setTimeout(function() {
        // AJAX call here
    }, 500);
}); 
```

# git - 同一配置文件在不同分支的不同版本

> ID：10426954
> 
> 赞同：3
> 
> 时间：2012-05-03T07:28:22.907
> 
> 标签：git, dotcloud

我们正在使用虚拟主机 dotCloud 来运行我们的一些应用程序。dotCloud 直接从 git 存储库部署应用程序，并从该存储库读取名为 dotcloud.yml 的配置文件以配置和运行堆栈。

我们有两个分支（一个生产，一个暂存），它们是同一个仓库的一部分，它们推送到单独的 dotCloud 实例。运行每个实例的 dotcloud.yml 文件存在细微差别。

管理此 dotcloud.yml 文件的最佳方法是什么？目前我们只是确保我们确保每个分支上的 dotcloud.yml 都是正确的，但是当我们合并从 staging 到 master 的更改时，它会不断被覆盖。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T07:38:20.000

你可以：

*   版本一`dotcloud.yml.template`
*   版本 a`dotcloud.yml.value.prod`和 a`dotcloud.yml.value.staging`以及每个环境的相关值。
*   根据 dotCloud 实例，负责构建正确的`dotcloud.ym`l 文件（不再版本化）的涂抹脚本。

您可以将该涂抹脚本声明为（也是版本化的）[文件中的](http://schacon.github.com/git/gitattributes.html)[过滤器内容驱动程序](https://stackoverflow.com/questions/6031800/how-to-keep-different-content-of-one-file-in-my-local-and-github-repository/6031981#6031981)：[`.gitattribute`](http://schacon.github.com/git/gitattributes.html)

![过滤器驱动程序](../Images/5967e9f34d4a01faa8f32f37ca89335a.png)

在任何 git checkout 上，都会调用 smudge 脚本，如果它识别出`dotcloud.yml.template`内容，则会构建正确的`dotcloud.yml`文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T07:51:15.143

你可以：

*   添加`dotcloud.yml`到`.gitignore`，有两个单独的文件用于登台和生产（例如`dotcloud.yml.staging`和`dotcloud.yml.production`），两者都存在于您的 git 存储库中，设置一个符号链接`dotcloud.yml → dotcloud.yml.production`，并推送`dotcloud push --rsync`（该`--rsync`标志将覆盖推送机制检测，并且 rsync 机制将启动，而不是git机制）；
*   使用相同的`dotcloud.yml`文件，但依靠不同的机制（例如`dotcloud var`或`postinstall`脚本）在生产和暂存行为之间切换。

# iphone - 当我们在 iphone 应用程序中使用本地化时如何转换正则表达式？

> ID：10426958
> 
> 赞同：0
> 
> 时间：2012-05-03T07:28:40.337
> 
> 标签：iphone, ios, regex, ipad

当我们在 iphone 应用程序中使用本地化和正则表达式时。当我们不使用英语时。

然后如何将该正则表达式转换为相关语言。

如果我使用下面的正则表达式：

```
+ (BOOL) isAlphabetsOnly:(NSString *) candidate {
    if (![self isEmpty:candidate]) {
        NSString *alphaRegex = @"^\\s*([A-Za-z ]*)\\s*$"; 
        NSPredicate *alphaTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", alphaRegex]; 

        return [alphaTest evaluateWithObject:candidate];
    }
    return NO;
} 
```

这对英语来说很好用。但不适用于其他语言。那么我们如何将其转换为其他语言。所以它将以不同的语言工作。

请帮我。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:29:57.790

您可以将正则表达式作为字符串放在 Localizable.strings 文件中。

然后，您可以通过执行以下操作来获取它：

> NSString *myRegularExpression=NSLocalizedString(@"my_regular_expression",nil);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T07:39:37.773

我从来没有在 iOS 上工作过，但如果你使用类似的东西，根据[这里](https://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)`^\\s*([\\s]*)\\s*$`：应该可以跨不同的语言环境工作。

> \w 匹配一个单词字符。单词字符为 [\p{Ll}\p{Lu}\p{Lt}\p{Lo}\p{Nd}]。

编辑：是的，你是对的，我的错。如[here](http://www.regular-expressions.info/unicode.html)`\p{L}`所述，您应该能够使用您应该能够匹配任何字母 来做您需要的事情：`^\\s*([\\p{L}\\s]*)\\s*$`

# xml - 配置名称-值对的最佳实践

> ID：10426959
> 
> 赞同：0
> 
> 时间：2012-05-03T07:28:41.707
> 
> 标签：xml, configuration, client-server

我们有一个 UI 可以从用户那里获取名称-值对并将列表发送到指定的处理器。处理器将检索这些值并处理它们。天堂是命名价值的极限。寻找一些规则/最佳实践来建立名称。我有一种方法，列表看起来像这样

```
param.no=5
param.1=abcd
param.2=efgh
param.3=ijkl
param.4=mnop
param.5=qrst 
```

根据“param.no”中提到的值，处理器可以轻松找到参数的名称-值对并进行处理。

XML 如下所示：

```
<arguments>
    <parameter name="param.no" value="5">
    <parameter name="param.1" value="value1">
    <parameter name="param.2" value="value2">
    <parameter name="param.3" value="value3">
    <parameter name="param.4" value="value4">
    <parameter name="param.5" value="value5">
    <parameter name="other" value="other">
    <parameter name="abcd" value="xwerwe">
<arguments> 
```

如果有更好的方法，任何大师都可以验证并回帖？

# php - 如何在 zend 框架 2 中呈现页面？

> ID：10426967
> 
> 赞同：4
> 
> 时间：2012-05-03T07:29:12.160
> 
> 标签：php, zend-framework, zend-framework2, zend-framework-mvc

我使用下面的代码在控制器操作中呈现页面。

```
public function userinforeceiveAction()
{   
    $renderer = new PhpRenderer();

    $map = new Resolver\TemplateMapResolver(array(
    'userinfo' => __DIR__ . '/userinfo.phtml',
        ));

        $resolver = new Resolver\TemplateMapResolver($map);
        $renderer->setResolver($resolver);
        $model = new ViewModel();
        $model->setTemplate('userinfo');

        return new ViewModel();    
} 
```

我在视图中回显渲染内容。

```
echo $renderer->render($model); 
```

但它什么也不渲染。请帮我。谢谢。以及这两行与 zf1 的良好合作。

```
$this->userinfoAction();
$this->$render('userinfo'); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T12:41:55.743

如果您使用的是 ZF2 MVC 层，您不需要实例化您自己的视图渲染，只需返回一个 ViewModel 实例，它会处理其余的事情：

```
public function userinforeceiveAction()
{
    $vm = new ViewModel();
    $vm->setTemplate('userinfo');
    return $vm;
} 
```

有关如何使用视图模型的示例，请参见 Akrabat 的 ZF2TestApp：http: [//zf2test.akrabat.com/](http://zf2test.akrabat.com/)

相关的 ZF2 代码链接在该页面的底部，并且在[模块配置文件中配置了模板图](https://github.com/akrabat/ZF2TestApp/blob/master/module/Application/config/module.config.php#L78)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T17:29:26.523

实际上，您所做的应该适用于以下矿工更改

```
public function userinforeceiveAction()
{   
    $renderer = new PhpRenderer();

    $map = new Resolver\TemplateMapResolver(array(
    // first mistake
    // __DIR__ is the directory of application controller, not the path of views 
    // second mistake
    // 'userinfo' should be '(controller)/(action)'
    'userinfo' => __DIR__ . '/userinfo.phtml',
        ));

        // third mistake
        // since $map is a resolver instance, this is wrong
        $resolver = new Resolver\TemplateMapResolver($map); // no need
        $renderer->setResolver($resolver);
        // should be $renderer->setResolver($map);
        $model = new ViewModel();
        // 'userinfo' should be changed
        $model->setTemplate('userinfo');

        // big mistake
        // what you are returning here is new instance of view model
        return new ViewModel();
        // instead you should return $model 
} 
```

视图中不需要这条线

```
echo $renderer->render($model); 
```

但是最好和推荐的方法是通过模块配置文件注入，正如[亚当](https://stackoverflow.com/users/1025589/adam-lundrigan)所说

该[文档](http://packages.zendframework.com/docs/latest/manual/en/zend.view.renderer.php-renderer.html)将提供更好的解释

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T08:30:26.277

您可能想看看[骨架应用程序](https://github.com/zendframework/ZendSkeletonApplication)如何在 MVC 环境中呈现内容。

主要是你做对了。但是为什么要创建渲染器和解析器而不使用它呢？我想设置渲染策略和模板？这不是在控制器中做的，而是在你的应用程序/模块的配置中做的。

另一方面，您不会在视图中回显渲染器的结果 - 渲染器返回您的视图的结果，然后由您的应用程序回显（您不会自己执行此操作）。

# delphi - Delphi 上的 EIntOverflow

> ID：10426971
> 
> 赞同：1
> 
> 时间：2012-05-03T07:29:42.080
> 
> 标签：delphi

以下代码触发`EIntOverflow`异常。我无法调试它，因为这发生在用户 PC 上，而不是我的。

```
var

  dwread, iBytesPerMFTRecord : cardinal;

  pc : PChar;

begin

////
// some code here
////

Readfile(hDevice, PChar(pc)^, 100, dwread, nil);

for n:=0 to dwread div iBytesPerMFTRecord -1 do   // `EIntOverflow` exception 
```

似乎 Readfile 正在返回一些奇怪的东西，这会在下一行`dwread`触发 异常。`EIntOverflow`

1°）可以返回什么`dwread`来触发此异常？

2°）如何控制？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T08:00:28.733

零我猜：

```
{$Q+}
procedure TForm1.Button2Click(Sender: TObject);
var
  dw: Cardinal;
  I: Integer;

begin
  dw:= 0;
  I:= dw - 1;   // raised exception class EIntOverflow with message 'Integer overflow'.
  ShowMessage(IntToStr(I));
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T07:55:55.203

从德尔福帮助 - [http://docwiki.embarcadero.com/Libraries/en/System.SysUtils.EIntOverflow](http://docwiki.embarcadero.com/Libraries/en/System.SysUtils.EIntOverflow)

```
EIntOverflow is the exception class for integer calculations whose 
results are too large to fit in the allocated register.

EIntOverflow occurs when data is lost because an integer result 
is too large to retain. 
```

因此您需要更改循环中使用的变量的数据类型以接受更大的值。

# snmp - 开发一个类似于 MRTG 的 poller

> ID：10426978
> 
> 赞同：-1
> 
> 时间：2012-05-03T07:30:14.000
> 
> 标签：snmp, cisco-ios

我在 java 中开发了一个类似于 MRTG/cacti 的轮询器，并且有一些查询。

我如何知道设备是使用 64 位计数器还是 32 位计数器。我是否也可以从这些计数器中获取值，或者是否有其他方法可以获取带宽和数据包传输。这些计数器在达到极限后会换行，所以我也需要检查一下吗？还有一个 OID 来检查使用的计数器....或者我可以假设大于 10Mbs 的速度使用 64 位计数器？

5 分钟对设备来说是一个合适的轮询间隔吗？

相同的 OID 是否适用于所有 CISCO 设备？还是我需要检查 IOS 并相应地更改 OID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T14:18:26.917

这是很多问题。

> 我如何知道设备是使用 64 位计数器还是 32 位计数器。

如果设备能够使用 64 位设备，您可以轮询它们。您可以使用简单的 snmpwalk 进行检查。

> 我是否也可以从这些计数器中获取值，或者是否有其他方法可以获取带宽和数据包传输。

您应该能够从计数器计算 Mbps。

> 这些计数器在达到极限后会换行，所以我也需要检查一下吗？

是的，计数器在达到 32 位/64 位最大值后重新开始。

> 还有一个 OID 来检查使用的计数器....或者我可以假设大于 10Mbs 的速度使用 64 位计数器？

不，没听说过。您可以假设速度大于 300Mbps，您应该使用 64 位计数器。

> 5 分钟对设备来说是一个合适的轮询间隔吗？

30 秒更有可能。

> 相同的 OID 是否适用于所有 CISCO 设备？还是我需要检查 IOS 并相应地更改 OID？

您应该检查设备的型号，而不是 IOS。

# java - 从@OneToMany-association 中删除子级：CascadeType.ALL + orphanRemoval = true 不起作用

> ID：10426979
> 
> 赞同：9
> 
> 时间：2012-05-03T07:30:18.210
> 
> 标签：java, hibernate, jpa-2.0

我很难从 OneToMany 关联中删除孩子。我的实体：

```
@Entity
@Table(name = "PERSON")
public class PersonEntity extends BaseVersionEntity<Long> implements Comparable<PersonEntity>
{
  ...
  // bi-directional many-to-one association to Project
  @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = "person", orphanRemoval = true)
  private final Set<ProjectEntity> projects = new HashSet<ProjectEntity>();
  ...

@Entity
@Table(name = "PROJECT")
public class ProjectEntity extends BaseVersionEntity<ProjectPK>
{
  @EmbeddedId
  private ProjectPK id;
  ...
  // bi-directional many-to-one association to UdbPerson
  @ManyToOne(fetch = FetchType.LAZY)
  @JoinColumn(name = "PERSON_ID", nullable = false, insertable = false, updatable = false)
  private PersonEntity person;
  ...

@Embeddable
public class ProjectPK implements Serializable
{
  // default serial version id, required for serializable classes.
  private static final long serialVersionUID = 1L;

  @NotNull
  @Column(name = "PERSON_ID")
  private Long personId;
  ... 
```

我删除孩子的失败尝试：

```
personEntity.getProjects().clear(); 
```

这行得通，但我认为这不是正确的方法：

```
for (Iterator<ProjectEntity> iterator = personEntity.getProjects().iterator(); iterator.hasNext();)
{
  ProjectEntity projectEntity = iterator.next();
  projectDao.deleteEntity(projectEntity);
  iterator.remove();
} 
```

我在这里做错了什么？

谢谢
强尼

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-03T08:14:15.663

关联是双向的，双向关联的拥有方是没有 mappedBy 属性的一方。这意味着在这种情况下，拥有方是项目方。

Hibernate 只考虑拥有方知道关联是否存在。这意味着要打破人员和项目之间的关联，您必须`null`在项目中设置人员。

# c# - 通过意图 URI 启动我的桌面应用程序

> ID：10426982
> 
> 赞同：1
> 
> 时间：2012-05-03T07:30:32.827
> 
> 标签：c#, uri

如何在我的应用程序中创建 URI（如 spotify）并使用意图 URI 启动我的应用程序。

我需要一个解决方案来发送一封电子邮件，其中包含一个链接，单击该链接应该启动我的 c# 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T07:38:54.657

由于安全原因，我认为这是不可能的。在 Windows 中，当用户单击链接时，操作系统会查找与 uris 关联的进程（通常是浏览器）。

如果用户使用 Internet Explorer，您可以考虑使用 ActiveX。

编辑：

发现了一些可能有帮助的东西：

[http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh779672.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh779672.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T07:47:12.087

在 Windows 平台上，您可以使用“可插入协议”。有关更多详细信息，请参阅[将应用程序注册到 URL 协议](http://msdn.microsoft.com/en-us/library/aa767914%28v=vs.85%29.aspx)。

# iis - IIS 7 URL 重写查询字符串

> ID：10426994
> 
> 赞同：0
> 
> 时间：2012-05-03T07:31:22.003
> 
> 标签：iis, url-rewrite-module

我有这样的旧链接

```
/folder/page/(dynamic q) 
```

我想重定向到新链接

```
/newfolder/newpage?q=(dynamic q) 
```

我怎样才能做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:35:10.610

我曾尝试使用 IIS 重写模块来执行此操作，但当我发现[HelliconAPE](http://www.helicontech.com/ape/)时遇到了一些问题。该程序使您能够像在 apache 服务器上一样使用普通的 .htaccess 文件。

# c++ - 向 QGridLayout 添加太多小部件

> ID：10426998
> 
> 赞同：1
> 
> 时间：2012-05-03T07:31:39.460
> 
> 标签：c++, qt, qwidget, qscrollarea, qgridlayout

我有一个从设计器创建的 UI，带有一个***QGridLayout***，我在其中从代码中添加了我的***自定义小部件***。添加1~4个自定义小部件时没有问题，但是当我尝试放置更多时，它们会重叠。

这是完成解释的图像：

不重叠：http: [//i45.tinypic.com/wve8o6.png](http://i45.tinypic.com/wve8o6.png)

重叠：http: [//i47.tinypic.com/565py.png](http://i47.tinypic.com/565py.png)

我正在尝试找到一种向 QGridLayout 添加某种滚动的方法，因此我的自定义小部件不会在它们之间重叠，并且我可以与它们进行交互。

我尝试使用 QScrollArea 但是当我添加超过 4 个小部件时，它们继续重叠并且滚动无法正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:35:41.687

在设计代码而不是设计器时，您是否有同样的问题？我遇到了几个问题，发现编写 gui 是一种更干净、更优雅的方式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T09:14:42.483

您的自定义小部件做什么`minimumSize()`和`sizeHint()`返回什么？我认为您没有正确实施这些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T14:42:48.507

我遇到了这个问题，并通过设置 this->setMinimumHeight(267); 解决了它 其中 267 是我的小部件的 int 高度。