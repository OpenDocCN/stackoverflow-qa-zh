# StackOverflow 问答 12074000-12074999

# java - 播放 2：如何将 dist 应用程序部署到 Windows Azure 云服务（不是 VM）

> ID：12074000
> 
> 赞同：4
> 
> 时间：2012-08-22T13:14:00.410
> 
> 标签：mac-os, java, deployment, azure, playframework-2.0

问题：将 Play 应用程序部署到`Windows Azure Cloud Services`（不是虚拟机）的方式是什么？

背景：我需要将小型应用程序部署到 Azure，我想使用常用的`dist`打包方法来做到这一点（它创建包含所有必需`*.jar`文件的文件夹 + 可以在安装了 JDK 的任何系统上运行的启动脚本）。需要补充一点，我不想使用`Starter Kit for Java`+ WAR 包装，因为...我正在使用[mac-os](/questions/tagged/mac-os "显示标记为“mac-os”的问题")，所以我需要购买/使用 Windows 的下一台机器来完成这项任务（该套件仅适用于 Win ）。

不幸的是，我没有使用 Azure 服务的经验。如果我混合的东西太多，或者如果没有 WAR + Kit 是不可能的，请告诉我；）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T14:37:20.733

对于在比利时举行的 Devoxx 会议，Steve Marx 创建了一个带有 Play 框架的 Scala 应用程序，该应用程序在 Windows Azure 上运行。这不是使用适用于 Java 的 Starter Kit，而是使用[packageanddeploy](https://github.com/smarx/packanddeploy)（打包 Azure 应用程序的简单脚手架）。

阅读他的博文“[在 Windows Azure 中使用 Scala 和 Play Framework](http://blog.smarx.com/posts/using-scala-and-the-play-framework-in-windows-azure) ”或查看[github](https://github.com/smarx/devoxxschedule)上的项目。

但是有一个小问题，这也使用了我认为在 Mac 上没有其他选择的**cspack.exe 。**cspack 用于创建您将部署到 Windows Azure 的包。现在我不认为这是一个表演终结者。

在他的博文中，Steve 谈到了下载 Java 和 Play 框架的**WorkerRole\downloadstuff.ps1**文件。您可以扩展它来下载您的应用程序（打包在一个 zip 文件中）。这样，您的包将是非常静态的（只需几个脚本，将下载实际应用程序），并且您无需在每次部署时都运行 cspack。

现在，如果您不想购买 Windows 机器，您可以执行以下操作：

1.  根据 Steve 的博客文章，修改 downloadstuff.ps1 以同时从 blob 存储下载您的应用程序。
2.  将应用上传到 Blob 存储
3.  创建虚拟机
4.  使用 RDP 连接到该 VM 并安装 Azure SDK、工具、...
5.  使用 cspack 创建一个包（查看 packageanddeploy 项目）以创建一个包含所有脚本的静态包。
6.  删除虚拟机，现在你有了不再需要的包
7.  将包部署到云服务，这将运行您的脚本，触发您的应用程序的下载，您将拥有一个正在运行的应用程序。
8.  每次要部署时，只需将应用的新版本上传到存储帐户，然后重新部署静态包，无需使用 Windows

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T19:54:35.437

据我所知，云服务（PaaS）包只能由 Windows 制作，所以目前 Windows 机器是必需的。

Visual Studio 可能是创建自己的云服务最简单的工具，但您需要学习 VS 和非标准方法来制作 Azure 应用程序。这可能是一项相当大的投资。

您可以从 Eclipse 中的 Azure 插件执行 cmd 安装和启动应用程序（不仅是基于 WAR 的 Java EE 应用程序）。如果您已经了解 Eclipse，这可能是构建云服务包的快速方法。

如果您选择了 Eclipse 方式，您可以这样构建自己的应用程序镜像：

1.  创建一个新的 Azure 项目，不要指定应用服务器和 JVM。
2.  查看示例启动脚本（基本上它解压缩 jvm、应用程序服务器，将战争移动到部署文件夹并启动应用程序服务器）。应用服务器和其他应用程序的步骤类似：安装并启动它，startup.cmd 文件可以为您的应用程序执行此操作。
3.  制作类似的脚本来安装您的应用程序：解压缩 jvm、应用程序或包管理器。将每个元素放在正确的位置，然后启动您的应用程序（不要忘记通过 start 命令调用它以确保启动脚本完成）

当您了解它的工作原理后，您应该尝试通过将存档放在 Blob 支持中并在启动期间下载它们来使您的 Azure 包更加灵活。相信我，这将提高开发效率。在第二步中，您可以通过下载可以在 ServiceConfiguration.csfg 文件中指定的其他脚本或配置文件来配置启动脚本，从而限制 Windows 机器的启动...

# android - 如何在没有绝对布局的情况下在 Android 中将图像放在一起？

> ID：12074001
> 
> 赞同：2
> 
> 时间：2012-08-22T13:14:02.047
> 
> 标签：android, android-layout

基本上，标题不言自明。我想把元素放在不同的元素之上。我可以使用绝对布局，但据说它已被弃用。

还有其他方法吗？如果不是，他们为什么要弃用 AbsoluteLayout？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T13:19:48.693

RelativeLayout 的默认行为会将所有元素堆叠在左上角，因此此布局：

```
<RelativeLayout
android:width="fill_parent"
android:height="fillparent">

<ImageView
android:width="wrap_content"
android:height="wrap_content"
android:src="@drawable/img1" />

<ImageView
android:width="wrap_content"
android:height="wrap_content"
android:src="@drawable/img2" />

</RelativeLayout> 
```

将在屏幕左上角将两个图像堆叠在一起。相对布局提供了许多其他属性，允许您将视图移动到屏幕上的不同位置。但是这个想法是它可以更好地缩放到不同的大小，因为您不会硬编码 x,y 值来确定您想要元素去哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:15:05.260

我很确定您可以使用RelativeLayout 进行这种操作。

这是文档：http: [//developer.android.com/reference/android/widget/RelativeLayout.html](http://developer.android.com/reference/android/widget/RelativeLayout.html)

# android - listfragment 简单示例

> ID：12074002
> 
> 赞同：7
> 
> 时间：2012-08-22T13:14:12.497
> 
> 标签：android, android-fragments, fragment

您好，我想获得我已经搜索但无法获得的简单列表片段示例，所以请任何人帮助我

```
import android.support.v4.app.Fragment; 
```

我已经搜索过了，但主要是在 import android.app.* 中；

所以任何机构都可以帮助我找出示例，因此它不适用于我的 android 2.2

```
if (savedInstanceState == null) {
        FragmentTransaction ft = getFragmentManager().beginTransaction();
        ListFragment listFragment = new ListFragment();
        ft.add(R.id.displayList, listFragment, "List_Fragment");
        ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE); 
```

我在 getFragmentmanger 上遇到错误

此示例必须在 android 3.0 以下

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-28T08:21:39.907

另一个非常简单的列表片段示例：

[http://wptrafficanalyzer.in/blog/a-listfragment-application-in-android/](http://wptrafficanalyzer.in/blog/a-listfragment-application-in-android/)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-22T13:22:40.593

使用支持库时，需要使用`getSupportFragmentManager`（支持库中的方法名）而不是`getFragmentManager`（3.0后的方法名）。

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2012-08-22T13:26:04.907

这里有一个简单的片段示例，很容易适应 Listfragment

[http://androidcookbook.com/Recipe.seam?recipeId=1160](http://androidcookbook.com/Recipe.seam?recipeId=1160)

# php - CakePHP if else 显示 ARRAY 或 FIRST（一行）或 NULL php echo

> ID：12074005
> 
> 赞同：1
> 
> 时间：2012-08-22T13:14:34.977
> 
> 标签：php, arrays, cakephp, if-statement, echo

我有一张桌子，在任何时候都可能没有任何东西可以显示，一行或多行。

在我的第一次尝试中，我将变量设置为查找 ALL 的数组，但显然如果有 1 行或 0 行，CakePHP 会抛出为 FOREACH 提供的无效参数。我可以设置 ARRAY 查找 FIRST，但如果有超过 1 行，它只会显示第一行。

有没有人有什么建议？

现场控制器中的功能：

```
public function add($id){

    //Set Title, Stylesheet, homelogo & layout  
    $this->set('title_for_layout', 'View Invoices');
    $this->set('stylesheet_used', 'homestyle');
    $this->set('image_used', 'eBOXLogoHome.png');   
    $this->layout='home_layout';

    //Find all fields where template_id = template_id passed in
    //ARRAY: to print foreach loop ONLY WORK >2 Row returned
    $templatefields=$this->Field->find('all', array(
    'conditions' => array(
    'Field.template_id' => $id)));

    //Find all fields where template_id = template_id passed in
    //FIRST: to print echo variable ONLY WORK =1 Row returned
    //$templatefields=$this->Field->find('first', array(
    //'conditions' => array(
    //'Field.template_id' => $id)));

    //Set variables
    $this->set('templatefields', $templatefields); 
} 
```

传入的 $id 是字段所属的 Template id。

Fields/add.ctp 中的显示功能。

```
<?php
if (is_array($templatefields))
{
    foreach ($templatefields as $templatefield)
    {
        <tr>
            <td align='center'><?php echo $templatefields['Field']['name']; ?></td>
            <td align='center'><?php echo $templatefields['Field']['description']; ?></td>
            <td align='center'><?php echo $templatefields['Field']['default_value']; ?></td>
            <td align='center'><?php echo $templatefields['Field']['template_id']; ?></td>
        </tr>
    }
}
else if (count($templatefields)==1)
{
    ....print? --> WOULD HAVE TO USE $templatefields where find('first') 
    ....otherwise error=invalid argument supplied for foreach
}
else if (empty($templatefields))
{
    ....NULL
    ....OR "There are no fields to display"
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T16:58:30.647

`find('all')`返回一个`false`或一个数组。

因此，`$templatefields`将要么是`false`，要么是一个数组——总是。即使只是一个结果，它仍然是相同的格式，仍然是一个数组。

您的代码（已修改）：

```
<?php
if(empty($templatefields)) {

    //display "none found" message

} else {

    foreach ($templatefields as $templatefield) { ?>
        <tr>
            <td align='center'><?php echo $templatefields['Field']['name']; ?></td>
            <td align='center'><?php echo $templatefields['Field']['description']; ?></td>
            <td align='center'><?php echo $templatefields['Field']['default_value']; ?></td>
            <td align='center'><?php echo $templatefields['Field']['template_id']; ?></td>
        </tr>
    <?php }
} 
```

# android - 1844640字节的外部分配对于android中的这个进程来说太大了

> ID：12074016
> 
> 赞同：0
> 
> 时间：2012-08-22T13:15:01.453
> 
> 标签：android

```
 private void disChargeAnimation() {

        MyImageView = (ImageView) findViewById(R.id.myImageView);
        MyImageView.clearAnimation();
        MyImageView.setBackgroundResource(R.drawable.arrow_animation);
        dischargeAnim = (AnimationDrawable) MyImageView.getBackground();
        dischargeAnim.start();
    }

    private void chargeAnimation() {

        MyImageView = (ImageView) findViewById(R.id.myImageView);
        MyImageView.clearAnimation();
        MyImageView.setBackgroundResource(R.drawable.arrow_back_animation);
        chargeAnim = (AnimationDrawable) MyImageView.getBackground();
        chargeAnim.start();

    } 
```

Logcat 跟踪

```
08-22 18:01:04.840: I/Process(434): Sending signal. PID: 434 SIG: 9
08-22 18:16:20.500: W/ResourceType(471): No package identifier when getting value for resource number 0x00000000
08-22 18:16:21.460: D/dalvikvm(471): GC_EXTERNAL_ALLOC freed 253K, 51% free 2780K/5639K, external 1764K/2137K, paused 43ms
08-22 18:16:21.619: D/dalvikvm(471): GC_EXTERNAL_ALLOC freed 28K, 52% free 2752K/5639K, external 3366K/4203K, paused 44ms
08-22 18:16:21.869: D/dalvikvm(471): GC_EXTERNAL_ALLOC freed 1K, 52% free 2753K/5639K, external 5167K/5167K, paused 42ms
08-22 18:16:22.159: D/dalvikvm(471): GC_EXTERNAL_ALLOC freed 16K, 52% free 2757K/5639K, external 6968K/6968K, paused 48ms
08-22 18:16:22.410: D/dalvikvm(471): GC_EXTERNAL_ALLOC freed 6K, 52% free 2761K/5639K, external 8770K/8952K, paused 38ms
08-22 18:16:22.759: D/dalvikvm(471): GC_EXTERNAL_ALLOC freed 9K, 51% free 2766K/5639K, external 10571K/11018K, paused 43ms
08-22 18:16:23.109: D/dalvikvm(471): GC_EXTERNAL_ALLOC freed 15K, 51% free 2769K/5639K, external 12373K/12819K, paused 50ms
08-22 18:16:23.549: D/dalvikvm(471): GC_EXTERNAL_ALLOC freed 1K, 51% free 2769K/5639K, external 14174K/14621K, paused 44ms
08-22 18:16:23.839: D/dalvikvm(471): GC_EXTERNAL_ALLOC freed 1K, 51% free 2771K/5639K, external 15976K/16422K, paused 39ms
08-22 18:16:24.139: D/dalvikvm(471): GC_EXTERNAL_ALLOC freed 1K, 51% free 2771K/5639K, external 17777K/18224K, paused 47ms
08-22 18:16:24.169: E/dalvikvm-heap(471): 1844640-byte external allocation too large for this process.
08-22 18:16:24.209: I/dalvikvm-heap(471): Clamp target GC heap from 24.610MB to 24.000MB
08-22 18:16:24.209: E/GraphicsJNI(471): VM won't let us allocate 1844640 bytes
08-22 18:16:24.209: D/dalvikvm(471): GC_FOR_MALLOC freed <1K, 51% free 2771K/5639K, external 17777K/18224K, paused 29ms
08-22 18:16:24.223: D/AndroidRuntime(471): Shutting down VM
08-22 18:16:24.223: W/dalvikvm(471): threadid=1: thread exiting with uncaught exception (group=0x40015560)
08-22 18:16:24.239: E/AndroidRuntime(471): FATAL EXCEPTION: main
08-22 18:16:24.239: E/AndroidRuntime(471): java.lang.OutOfMemoryError: bitmap size exceeds VM budget
08-22 18:16:24.239: E/AndroidRuntime(471):  at android.graphics.Bitmap.nativeCreate(Native Method)
08-22 18:16:24.239: E/AndroidRuntime(471):  at android.graphics.Bitmap.createBitmap(Bitmap.java:477)
08-22 18:16:24.239: E/AndroidRuntime(471):  at android.graphics.Bitmap.createBitmap(Bitmap.java:444)
08-22 18:16:24.239: E/AndroidRuntime(471):  at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:349)
08-22 18:16:24.239: E/AndroidRuntime(471):  at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:498)
08-22 18:16:24.239: E/AndroidRuntime(471):  at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:473)
08-22 18:16:24.239: E/AndroidRuntime(471):  at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:336)
08-22 18:16:24.239: E/AndroidRuntime(471):  at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697)
08-22 18:16:24.239: E/AndroidRuntime(471):  at android.content.res.Resources.loadDrawable(Resources.java:1709)
08-22 18:16:24.239: E/AndroidRuntime(471):  at android.content.res.Resources.getDrawable(Resources.java:581)
08-22 18:16:24.239: E/AndroidRuntime(471):  at android.graphics.drawable.AnimationDrawable.inflate(AnimationDrawable.java:267)
08-22 18:16:24.239: E/AndroidRuntime(471):  at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:787)
08-22 18:16:24.239: E/AndroidRuntime(471):  at android.graphics.drawable.Drawable.createFromXml(Drawable.java:728)
08-22 18:16:24.239: E/AndroidRuntime(471):  at android.content.res.Resources.loadDrawable(Resources.java:1694)
08-22 18:16:24.239: E/AndroidRuntime(471):  at android.content.res.Resources.getDrawable(Resources.java:581)
08-22 18:16:24.239: E/AndroidRuntime(471):  at android.view.View.setBackgroundResource(View.java:7533)
08-22 18:16:24.239: E/AndroidRuntime(471):  at com.water.charger.MainView.chargeAnimation(MainView.java:186)
08-22 18:16:24.239: E/AndroidRuntime(471):  at com.water.charger.MainView.onCreate(MainView.java:88)
08-22 18:16:24.239: E/AndroidRuntime(471):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-22 18:16:24.239: E/AndroidRuntime(471):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
08-22 18:16:24.239: E/AndroidRuntime(471):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
08-22 18:16:24.239: E/AndroidRuntime(471):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
08-22 18:16:24.239: E/AndroidRuntime(471):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
08-22 18:16:24.239: E/AndroidRuntime(471):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-22 18:16:24.239: E/AndroidRuntime(471):  at android.os.Looper.loop(Looper.java:123)
08-22 18:16:24.239: E/AndroidRuntime(471):  at android.app.ActivityThread.main(ActivityThread.java:3683)
08-22 18:16:24.239: E/AndroidRuntime(471):  at java.lang.reflect.Method.invokeNative(Native Method)
08-22 18:16:24.239: E/AndroidRuntime(471):  at java.lang.reflect.Method.invoke(Method.java:507)
08-22 18:16:24.239: E/AndroidRuntime(471):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-22 18:16:24.239: E/AndroidRuntime(471):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-22 18:16:24.239: E/AndroidRuntime(471):  at dalvik.system.NativeStart.main(Native Method)
08-22 18:18:27.889: I/Process(471): Sending signal. PID: 471 SIG: 9
08-22 18:25:12.329: D/dalvikvm(488): GC_EXTERNAL_ALLOC freed 253K, 51% free 2779K/5639K, external 1764K/2137K, paused 44ms
08-22 18:25:12.519: D/dalvikvm(488): GC_EXTERNAL_ALLOC freed 39K, 52% free 2753K/5639K, external 3366K/4203K, paused 51ms
08-22 18:25:12.779: D/dalvikvm(488): GC_EXTERNAL_ALLOC freed 2K, 52% free 2755K/5639K, external 5167K/5167K, paused 37ms
08-22 18:25:13.049: D/dalvikvm(488): GC_EXTERNAL_ALLOC freed 11K, 52% free 2759K/5639K, external 6968K/6968K, paused 45ms
08-22 18:25:13.299: D/dalvikvm(488): GC_EXTERNAL_ALLOC freed 11K, 51% free 2765K/5639K, external 8770K/8952K, paused 38ms
08-22 18:25:13.609: D/dalvikvm(488): GC_EXTERNAL_ALLOC freed <1K, 51% free 2766K/5639K, external 10571K/11018K, paused 66ms
08-22 18:25:13.849: D/dalvikvm(488): GC_EXTERNAL_ALLOC freed <1K, 51% free 2767K/5639K, external 12373K/12819K, paused 38ms
08-22 18:25:14.110: D/dalvikvm(488): GC_EXTERNAL_ALLOC freed 13K, 51% free 2771K/5639K, external 14174K/14621K, paused 46ms
08-22 18:25:14.359: D/dalvikvm(488): GC_EXTERNAL_ALLOC freed <1K, 51% free 2771K/5639K, external 15976K/16422K, paused 37ms
08-22 18:25:14.609: D/dalvikvm(488): GC_EXTERNAL_ALLOC freed 1K, 51% free 2771K/5639K, external 17777K/18224K, paused 46ms
08-22 18:25:14.640: E/dalvikvm-heap(488): 1844640-byte external allocation too large for this process.
08-22 18:25:14.709: I/dalvikvm-heap(488): Clamp target GC heap from 24.611MB to 24.000MB
08-22 18:25:14.709: E/GraphicsJNI(488): VM won't let us allocate 1844640 bytes
08-22 18:25:14.709: D/dalvikvm(488): GC_FOR_MALLOC freed <1K, 51% free 2771K/5639K, external 17777K/18224K, paused 34ms
08-22 18:25:14.719: D/AndroidRuntime(488): Shutting down VM
08-22 18:25:14.719: W/dalvikvm(488): threadid=1: thread exiting with uncaught exception (group=0x40015560)
08-22 18:25:14.729: E/AndroidRuntime(488): FATAL EXCEPTION: main
08-22 18:25:14.729: E/AndroidRuntime(488): java.lang.OutOfMemoryError: bitmap size exceeds VM budget
08-22 18:25:14.729: E/AndroidRuntime(488):  at android.graphics.Bitmap.nativeCreate(Native Method)
08-22 18:25:14.729: E/AndroidRuntime(488):  at android.graphics.Bitmap.createBitmap(Bitmap.java:477)
08-22 18:25:14.729: E/AndroidRuntime(488):  at android.graphics.Bitmap.createBitmap(Bitmap.java:444)
08-22 18:25:14.729: E/AndroidRuntime(488):  at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:349)
08-22 18:25:14.729: E/AndroidRuntime(488):  at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:498)
08-22 18:25:14.729: E/AndroidRuntime(488):  at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:473)
08-22 18:25:14.729: E/AndroidRuntime(488):  at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:336)
08-22 18:25:14.729: E/AndroidRuntime(488):  at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:697)
08-22 18:25:14.729: E/AndroidRuntime(488):  at android.content.res.Resources.loadDrawable(Resources.java:1709)
08-22 18:25:14.729: E/AndroidRuntime(488):  at android.content.res.Resources.getDrawable(Resources.java:581)
08-22 18:25:14.729: E/AndroidRuntime(488):  at android.graphics.drawable.AnimationDrawable.inflate(AnimationDrawable.java:267)
08-22 18:25:14.729: E/AndroidRuntime(488):  at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:787)
08-22 18:25:14.729: E/AndroidRuntime(488):  at android.graphics.drawable.Drawable.createFromXml(Drawable.java:728)
08-22 18:25:14.729: E/AndroidRuntime(488):  at android.content.res.Resources.loadDrawable(Resources.java:1694)
08-22 18:25:14.729: E/AndroidRuntime(488):  at android.content.res.Resources.getDrawable(Resources.java:581)
08-22 18:25:14.729: E/AndroidRuntime(488):  at android.view.View.setBackgroundResource(View.java:7533)
08-22 18:25:14.729: E/AndroidRuntime(488):  at com.water.charger.MainView.chargeAnimation(MainView.java:186)
08-22 18:25:14.729: E/AndroidRuntime(488):  at com.water.charger.MainView.onCreate(MainView.java:88)
08-22 18:25:14.729: E/AndroidRuntime(488):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-22 18:25:14.729: E/AndroidRuntime(488):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
08-22 18:25:14.729: E/AndroidRuntime(488):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
08-22 18:25:14.729: E/AndroidRuntime(488):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
08-22 18:25:14.729: E/AndroidRuntime(488):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
08-22 18:25:14.729: E/AndroidRuntime(488):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-22 18:25:14.729: E/AndroidRuntime(488):  at android.os.Looper.loop(Looper.java:123)
08-22 18:25:14.729: E/AndroidRuntime(488):  at android.app.ActivityThread.main(ActivityThread.java:3683)
08-22 18:25:14.729: E/AndroidRuntime(488):  at java.lang.reflect.Method.invokeNative(Native Method)
08-22 18:25:14.729: E/AndroidRuntime(488):  at java.lang.reflect.Method.invoke(Method.java:507)
08-22 18:25:14.729: E/AndroidRuntime(488):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
08-22 18:25:14.729: E/AndroidRuntime(488):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
08-22 18:25:14.729: E/AndroidRuntime(488):  at dalvik.system.NativeStart.main(Native Method)
08-22 18:25:18.049: I/Process(488): Sending signal. PID: 488 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:51:27.627

看来您有内存泄漏问题。`setCallBack(null)`完成对象后，尝试通过调用来释放资源`AnimationDrawable`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:35:01.050

看起来您的资源`R.drawable.arrow_back_animation`对于 Android 来说太大而无法加载并且`java.lang.OutOfMemoryError: bitmap size exceeds VM budget`正在被抛出。我猜这是一个很长的动画/一个非常大的图像。

检查图像的大小/尝试压缩并避免使用大图像。根据经验，Android 上的最大堆大小通常为 20-30mb。您不应该在接近此限制的任何地方加载图像。

# objective-c - 如何捕捉 MPMoviePlayerController 旋转事件？

> ID：12074022
> 
> 赞同：3
> 
> 时间：2012-08-22T13:15:14.170
> 
> 标签：objective-c, ios, xcode, mpmovieplayercontroller

我已经在我的 ViewController 中添加了这段代码。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation{
if (interfaceOrientation != UIInterfaceOrientationPortrait) {
    [self.moviePlayerController setFullscreen:YES animated:YES]; 
} 
return YES;
} 
```

因此，旋转后，我的播放器以全屏模式播放视频。我需要在 playerController (OrientationPortrait) 中捕获旋转事件以设置全屏：否。我怎样才能做到这一点？感谢您的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T14:02:14.590

moviePlayerController 的方向设置不应在此函数中处理。

在 viewWillAppear 函数中添加通知器

```
-(void)viewWillAppear:(BOOL)animated{
[[NSNotificationCenter defaultCenter] addObserver:self  selector:@selector(orientationChanged:)  name:UIDeviceOrientationDidChangeNotification  object:nil];} 
```

* * *

方向变化通知此功能

```
- (void)orientationChanged:(NSNotification *)notification{
[self adjustViewsForOrientation:[[UIApplication sharedApplication] statusBarOrientation]];} 
```

* * *

依次调用此函数，其中处理moviePlayerController框架的方向

```
- (void) adjustViewsForOrientation:(UIInterfaceOrientation) orientation {

if (orientation == UIInterfaceOrientationPortrait || orientation == UIInterfaceOrientationPortraitUpsideDown) 
{ 
    [self.moviePlayerController setFullscreen:NO animated:YES];    
}
else if (orientation == UIInterfaceOrientationLandscapeLeft || orientation == UIInterfaceOrientationLandscapeRight) 
{
    [self.moviePlayerController setFullscreen:YES animated:YES]; 
}} 
```

* * *

在 viewDidDisappear 中删除通知

```
-(void)viewDidDisappear:(BOOL)animated{
[[NSNotificationCenter defaultCenter]removeObserver:self name:UIDeviceOrientationDidChangeNotification object:nil];} 
```

# java - 服务器如何自动向用户发送数据

> ID：12074026
> 
> 赞同：-3
> 
> 时间：2012-08-22T13:15:18.270
> 
> 标签：java, php, webserver

我决定做一个聊天室。（服务器端是 PHP 或 Java）。首先，我基于这个想法使用 AJAX：

> 1）两个用户都会经常向服务器发送请求以获取最新消息。
> 
> 2）当一个用户输入消息并输入时，文本将被发送到服务器，服务器将其保存到数据库中等待其他用户接受。

这种方式的缺点是效率不高。在聊天程序中这不是很大的问题，但我决定做一些其他的功能，比如在屏幕上绘图和人与人之间的分享。

所以，我决定使用其他方式。这是新方法：

> 1）当用户连接到聊天室时，有“一些方法”可以保留他们。
> 
> 2）当有人向服务器发送文本时，服务器将“自动”将此文本发送给其余用户。

我基于`Observer Pattern`Gof。而且这种方式比其他方式效果更好。但是我以这种新方式遇到的问题是：

> 1）将保存有关用户的哪些“信息”。（IP地址， ... ？）
> 
> 2）如何发送给用户？（当用户没有对服务器的请求时）。

请告诉我解决方案，拜托。更好的是，如果它在 Java 或 PHP 中更详细。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:28:00.160

您可以使用**Session**来识别和存储有关已连接用户的信息。主要工作由服务器完成，许多 Web 框架（PHP、Java 或其他）可以为您处理。

# asp.net - vb.net中的表格绘制

> ID：12074032
> 
> 赞同：0
> 
> 时间：2012-08-22T13:15:27.607
> 
> 标签：asp.net, vb.net

我想画一个有 2 列的表格。第一列将有 2 行，每行分别包含 a 和 b 字母，第二列不包含任何行。这是我的代码。

```
Public Class trialtable
    Inherits System.Web.UI.Page

    Protected Sub trialtable(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        Dim trial As DataTable
        trial = New DataTable
        Dim tbl As New Table()

        Dim szName As String = ""
        Dim szNumber As String = ""
        Dim szsadasd As String = ""
        tbl.BorderColor = Drawing.Color.Black
        tbl.BorderWidth = 1
        tbl.CellPadding = 0
        tbl.CellSpacing = 0

        For i As Integer = 0 To 1
            Dim tr As New TableRow()
            Dim tc1 As New TableCell()
            Dim tc2 As New TableCell()
            Dim tc3 As New TableCell()
            tc1.Controls.Add(New LiteralControl(szName))
            tc2.Controls.Add(New LiteralControl(szNumber))
            tc3.Controls.Add(New LiteralControl(szsadasd))
            tc1.BorderColor = Drawing.Color.Black
            tc1.BorderWidth = 1
            tc2.BorderColor = Drawing.Color.Black
            tc2.BorderWidth = 1
            tc3.BorderColor = Drawing.Color.Black
            tc3.BorderWidth = 1
            tr.Cells.Add(tc1)
            tr.Cells.Add(tc2)
            tr.Cells.Add(tc3)
            tbl.Controls.Add(tr)
        Next
        Me.Controls.Add(tbl)
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:08:15.693

为了将值`a`放在第一行`b`的第一个单元格和第二行的第一个单元格中，并且在两行的第二个单元格中都没有任何内容，请替换以下代码行...

```
tc1.Controls.Add(New LiteralControl(szName))
tc2.Controls.Add(New LiteralControl(szNumber)) 
```

使用以下代码...

```
If i = 0 Then
    tc1.Controls.Add(New LiteralControl("a"))
Else
    tc1.Controls.Add(New LiteralControl("b"))
End If
tc2.Controls.Add(New LiteralControl("&nbsp;")) 
```

# php - PDO 没有写入 MySQL，我哪里出错了？

> ID：12074036
> 
> 赞同：0
> 
> 时间：2012-08-22T13:15:47.113
> 
> 标签：php, mysql, pdo, var

我刚刚将我的 mysql 代码重写为 PDO，但我只是没有让它工作。我一直在调试，但似乎并不正确。这对我来说是全新的，但它连接到数据库，它从我的 vardump 中的数据库中读取，但它不会在 textarea 中发布，甚至不会回显。更不用说写入数据库了……我有一种直觉，就是 $result var 在做一些奇怪的事情，但据我所知，我仔细检查了所有内容。

```
<html>
    <head>
    <title>Milan CMS</title>
    </head>

<body>

    <?php
        $host= "";
        $dbname= "";
        $username= "";
        $password= "";
        $dbh = new PDO("mysql:host=$host;dbname=$dbname", $username, $password);
        $sth = $dbh->prepare("SELECT * FROM milan WHERE tag='trainingen'");
        $sth->execute();
        $result = $sth->fetchAll();
        var_dump($result);
        echo $result['value'];
        echo $result;   
    ?>
    <form action="<?php echo $_SERVER['PHP_SELF'];?>" method="post" name="trainingen">
    Trainingen:<textarea name="nametrainingen" rows="10" cols="60"><?php echo $result['value']; ?></textarea></p>
    <input name="submit" type="submit" value="Verzenden"><input type="reset" value="Veld leeg maken">
    </form>

    <?php
        $invoer = $_POST['nametrainingen'];

        if (isset($_POST['submit'])) { //test if submit button is clicked
        $sql = "DELETE FROM milan WHERE tag = 'trainingen'";
        $sql = "INSERT INTO milan (tag, value) VALUES ('trainingen', '$result')";   
        $sth->execute();
        $result = $sth->fetchAll();
        $myFile = "trainingen.json"; 
        $fh = fopen($myFile, 'w') or die("can't open file");
        fwrite($fh, json_encode($result));
        fclose($fh);}
    ?>
<p>
</body>
</html> 
```

var_dump 的输出：

```
array(1) { 
    [0]=> array(6) { 
        ["id"]=> string(1) "0" 
        [0]=> string(1) "0" 
        ["tag"]=> string(10) "trainingen" 
        [1]=> string(10) "trainingen" 
        ["value"]=> string(17) "Hgioejigojerigjer" 
        [2]=> string(17) "Hgioejigojerigjer" 
    } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:18:38.283

```
if (isset($_POST['submit'])) { //test if submit button is clicked
    $sql = "DELETE FROM milan WHERE tag = 'trainingen'";
    $sql = "INSERT INTO milan (tag, value) VALUES ('trainingen', '$result')";   
    $sth->execute(); 
```

那只是要重新运行以前的内容`$sth`-您需要准备这两个语句然后运行它们。你需要像这样运行它们：

```
if (isset($_POST['submit'])) { //test if submit button is clicked
    $sql = "DELETE FROM milan WHERE tag = 'trainingen'";
    $sth = $dbh->prepare($sql);
    $sth->execute();
    $sql = "INSERT INTO milan (tag, value) VALUES ('trainingen', '$result')";   
    $sth = $dbh->prepare($sql);
    $sth->execute(); 
```

编辑添加：

```
$result = $sth->fetchAll();
var_dump($result);
echo $result['value'];
echo $result; 
```

`$result`最终得到一个值数组 - 您必须逐步遍历数组中的每个项目。

# c# - 在两个数组中查找唯一字符串 C#

> ID：12074040
> 
> 赞同：3
> 
> 时间：2012-08-22T13:16:05.087
> 
> 标签：c#, arrays, string, datagridview, unique

您好，我正在尝试在从 XML 文件填充的两个 dataGridView 表中查找唯一字符串。我制作的代码运行没有问题，但是当我在其中一个表中更改字符串（使其唯一）时，它无法检测到。我的逻辑有什么问题吗？

```
 private void button5_Click(object sender, EventArgs e)
    {
        string[] column1 = new string[dataGridView1.Rows.Count];
        string[] column2 = new string[dataGridView2.Rows.Count];
        int unique = 0;
        bool found = false;
        for (int i = 0; i < dataGridView1.Rows.Count; i++)
        {
            column1[i] = Convert.ToString(dataGridView1.Rows[i].Cells[2].Value);
        }
        for (int i = 0; i < dataGridView2.Rows.Count; i++)
        {
            column2[i] = Convert.ToString(dataGridView2.Rows[i].Cells[2].Value);
        }
        for (int i = 0; i < column1.Length; i++)
        {
            for (int j = 0; j < column2.Length; j++)
            {
                if (column1[i] == column2[j])
                {
                    found = true;
                }
            }
            if (found == false)
            {
                unique++;
                found = false;
            }
        }
        MessageBox.Show(unique + " unique strings found!"); 
    } 
```

最终解决方案需要能够返回包含唯一字符串的单元格，以便我可以向用户突出显示它们。非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T13:18:33.423

使用 linq 很容易：

```
array1.Except(array2).Concat(array2.Except(array1)) 
```

作为对您的评论的回应，您可以模拟具有两个左连接的完整外连接，并在输出中查找空值。连接的另一侧不匹配的任何一侧都可以被认为是唯一的。使用以下扩展进行连接：

```
public static class LinqEx
{
    public static IEnumerable<TResult> 
        LeftOuterJoin<TOuter, TInner, TKey, TResult>(
            this IEnumerable<TOuter> outer, 
            IEnumerable<TInner> inner, 
            Func<TOuter, TKey> outerKeySelector, 
            Func<TInner, TKey> innerKeySelector, 
            Func<TOuter, TInner, TResult> resultSelector)
    {
        return outer
            .GroupJoin(
                inner, 
                outerKeySelector, 
                innerKeySelector, 
                (a, b) => new
                {
                    a,
                    b
                })
            .SelectMany(
                x => x.b.DefaultIfEmpty(), 
                (x, b) => resultSelector(x.a, b));
    }

    public static IEnumerable<TResult> 
        FullOuterJoin<TSet1, TSet2, TKey, TResult>(
            this IEnumerable<TSet1> set1, 
            IEnumerable<TSet2> set2, 
            Func<TSet1, TKey> set1Selector, 
            Func<TSet2, TKey> set2Selector, 
            Func<TSet1, TSet2, TResult> resultSelector)
    {
        var leftJoin = set1.
            LeftOuterJoin(
                set2, 
                set1Selector, 
                set2Selector, 
                (s1, s2) => new {s1, s2});
        var rightJoin = set2
            .LeftOuterJoin(
                set1, 
                set2Selector, 
                set1Selector, 
                (s2, s1) => new {s1, s2});
        return leftJoin.Union(rightJoin)
            .Select(x => resultSelector(x.s1, x.s2));

    }
} 
```

然后，您可以创建匿名对象来捕获附加数据，例如项目的索引和它的来源，并外连接它们。连接两边都有项目的结果将被过滤掉（因为它们同时存在于两个集合中），因此结果集现在只包含其中一个集合唯一的项目。

```
void Main()
{
    var set1 = new[] {"a", "b", "c"};
    var set2 = new[] {"b", "c", "d", "d"};
    var annotatedSet1 = set1
        .Select((item,index) => new {src = "set1", index, item});
    var annotatedSet2 = set2
        .Select((item,index) => new {src = "set2", index, item});

    var uniques = annotatedSet1
        .FullOuterJoin(
            annotatedSet2, 
            x => x.item, 
            x => x.item,
            (s1, s2) => new {s1, s2})
        .Where(x => x.s1 == null || x.s2 == null)
        .Select(x => x.s1 ?? x.s2);
} 
```

这将产生结果：

```
{src="set1", index=0, item="a"}
{src="set2", index=2, item="d"}
{src="set2", index=3, item="d"} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:18:15.433

您可以使用链接运算符、联合运算符和不同运算符

```
var temp =  column1.Union(column2);
var result   = temp.Distinct(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T13:20:08.850

这是 Linq 的方式[`Enumerable.Except`](http://msdn.microsoft.com/en-us/library/bb300779.aspx)：

```
var dg1Cell2 = dataGridView1
    .Rows.Cast<DataGridViewRow>()
    .Select(r => r.Cells[2].Value.ToString());
var dg2Cell2 = dataGridView1
    .Rows.Cast<DataGridViewRow>()
    .Select(r => r.Cells[2].Value.ToString());
var uniqueInDG1 = dg1Cell2.Except(dg2Cell2);
var result = from r in dataGridView1.Rows.Cast<DataGridViewRow>()
             join u in uniqueInDG1 on r.Cells[2].Value.ToString() equals u
             select r; 
```

`Except`产生一组差异，因此只保留第一个序列中的唯一字符串。然后我将结果加入到`DataGridViewRows`.

它比看起来更有效，因为它都是惰性执行的，除了在`set`内部使用 a 并且`join`在 linq-to-objects 中也[非常有效](https://stackoverflow.com/questions/5551264/why-is-linq-join-so-much-faster-than-linking-with-where)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T13:54:37.097

感谢您的所有回复，但简单的答案是我没有在正确的点将 found 的值重置为 false。我很欣赏您的解决方案所付出的努力，但对于我的知识水平来说，它们都太复杂了。

这是调整后的代码：

```
 private void button5_Click(object sender, EventArgs e)
    {
        string[] column1 = new string[dataGridView1.Rows.Count];
        string[] column2 = new string[dataGridView2.Rows.Count];
        int unique = 0;
        bool found = false;
        for (int i = 0; i < dataGridView1.Rows.Count; i++)
        {
            column1[i] = Convert.ToString(dataGridView1.Rows[i].Cells[2].Value);
        }
        for (int i = 0; i < dataGridView2.Rows.Count; i++)
        {
            column2[i] = Convert.ToString(dataGridView2.Rows[i].Cells[2].Value);
        }
        for (int i = 0; i < column1.Length; i++)
        {
            for (int j = 0; j < column2.Length; j++)
            {
                if (column1[i] == column2[j])
                {
                    found = true;
                }
            }
            if (found == false)
            {
                unique++;
            }
            found = false;
        }
        MessageBox.Show(unique + " unique strings found!");         
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-19T13:04:51.517

以下代码将从 2 个字符串数组中返回不同的字符串数组

```
public string[] UniqueNames(string[] names1, string[] names2) {
    newName = names1.ToList();
    foreach (var dr in names2) {
        if (!newName.Contains(dr)) {
            newName.Add(dr);
        }
    }
    string[] newNameArray = newName.ToArray();
    return newNameArray;
} 
```

或者你也可以试试

```
public string[] UniqueNames(string[] names1, string[] names2) {            
    return names1.Union(names2).ToArray(); ;            
} 
```

# xslt - XPath：获取某些节点和祖先

> ID：12074048
> 
> 赞同：2
> 
> 时间：2012-08-22T13:16:39.723
> 
> 标签：xslt, xpath

从以下 xml 文件：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<bookstore>
<book>
  <title lang="eng">Harry Potter</title>
  <price>29.99</price>
</book>
<book>
  <title lang="de">Vom Winde verweht</title>
  <price>39.95</price>
</book>
</bookstore> 
```

我想要所有具有 lang="eng" 及其祖先节点的书籍*，*即以下输出：

```
<bookstore>
  <book>
    <title lang="eng">Harry Potter</title>
    <price>29.99</price>
  </book>
</bookstore> 
```

如何使用 XPath 获得它？

**编辑：**如果我的描述和示例输出由于术语不佳而不匹配，则示例描述了我想要的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:25:39.077

这应该返回所有包含英语的书籍：

```
/bookstore/book[.//@lang="eng"] 
```

这本书的始祖是`bookstore`包含一切的。你确定你也想要它？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T13:26:11.783

**XPath 是一种基于 XML 文档的查询语言**。

因此，不可能通过评估 XPath 表达式来更改现有文档或创建新文档/节点。

您要求的是从当前文档创建一个新的 XML 文档——这是一种*转换*，不能单独在 XPath 中完成。XSLT 是一种最适合执行 XML 文档转换的语言。使用 XSLT 生成所需的文档很​​简单。

**您对 XSLT 解决方案感兴趣吗？这是一个**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>
 <xsl:template match="book[not(title/@lang = 'eng')]"/>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<bookstore>
<book>
  <title lang="eng">Harry Potter</title>
  <price>29.99</price>
</book>
<book>
  <title lang="de">Vom Winde verweht</title>
  <price>39.95</price>
</book>
</bookstore> 
```

**产生了想要的正确结果：**

```
<bookstore>
   <book>
      <title lang="eng">Harry Potter</title>
      <price>29.99</price>
   </book>
</bookstore> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T13:26:22.033

您的描述与您的示例输出不完全匹配。我已经使用了您的示例：

```
/bookstore/book[./title/@lang='eng']/ancestor-or-self::*
|/bookstore/book[./title/@lang='eng']/descendant::* 
```

书籍+祖先和书籍后代的结合。

# c++ - 我可以以 1 Gbps 的速度写入硬盘吗？

> ID：12074051
> 
> 赞同：3
> 
> 时间：2012-08-22T13:16:42.047
> 
> 标签：c++

我对我得到的磁盘速度有点惊讶..我似乎能够在 1 秒内写入一个 1GB 的文件..

```
size_t s = 1*1024*1024;
char* c = new char[s];
FILE* fx = fopen("D:\\test.mine", "wb");
//ensure(fx);
for(int i = 0; i < 1024; ++i)
{
    fwrite(c,1,s,fx);
}
fclose(fx);
delete[] c; 
```

我有点难以理解是什么原因造成的？我以为 fclose 确保数据实际上是写在硬盘上的......？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-22T13:20:32.393

用于写入文件的标准库函数只是管理它们自己的内部缓冲区。在现代操作系统中写入文件时，即使`fclose`数据实际上只是进入操作系统的缓冲区，这也会延迟写入，直到它认为这是一个好时机。

确保数据写入磁盘的常用方法是发出特定于操作系统的调用以强制写入磁盘；在 POSIX 上是`fsync`/ `sync`，在 Windows 上是你想要的`FlushFileBuffers`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-22T13:20:38.397

fclose 仅​​刷新 C 库缓冲区，不刷新系统缓冲区。因此，您需要一个系统调用，例如 (f)sync。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T13:23:07.930

fclose() 还会清除流的缓冲区缓存，因此在您调用 fclose() 的那一刻，未读缓冲区的内容将被擦除。

# css - 当 FF 和 Safari 包含在 span 和 div 中时，为什么会定位与其他浏览器不同的对象元素？

> ID：12074052
> 
> 赞同：1
> 
> 时间：2012-08-22T13:16:42.293
> 
> 标签：css, css-position, html

我有以下测试页面：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>Test</title>
    <style type="text/css">
        .test {
            width: 200px;
            height: 200px;
            position: absolute;
            left: 0;
            top: 0;
        }
    </style>
</head>
<body>
    <span style="position:relative; left: 100px">
        <div>
            <object class="test" data="flash.swf">
                <param name="wmode" value="transparent"/>
            </object>
            <div class="test" style="background-color: red; opacity: 0.5"></div>
        </div>
    </span>
</body>
</html> 
```

我希望对象和类为“test”的 div 元素的位置相同。但这在 FF 和 Safari 中都不会发生。这是为什么？div 和 span 的排列是它发生的必要条件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T13:38:36.170

您的 HTML 无效。跨度不能包含 div。

浏览器在执行错误恢复的方式上并不总是一致的。

编写有效的 HTML 并使用[验证器](http://validator.w3.org/)对其进行测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T13:40:07.733

`span`是一个内联元素，它不能包含其他块元素。添加`display:block`到您的`span`以使其阻塞，然后它将起作用。

**[工作示例](http://jsfiddle.net/VegqQ/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T13:35:21.013

起初你需要为对象设置`display: block`也许这就是问题......

# objective-c - Objective-C 正确使用 If / Else

> ID：12074055
> 
> 赞同：2
> 
> 时间：2012-08-22T13:16:50.533
> 
> 标签：objective-c, if-statement, performance

亲爱的互联网前辈们，

我正在尝试处理一系列字典，不同的数据集需要不同的处理，每个数据集都需要处理Create、Update和Delete操作。很简单，我正在寻找一种更有效/更聪明的方法......

```
- (NSDictionary*)processUpdatesForDataSet:(NSString*)dataSet ofType:(NSString*)type {

if ([dataSet isEqualToString:@"countries"]) {

    if ([type isEqualToString:@"CREATE"]) {

    } else if ([type isEqualToString:@"UPDATE"]) {

    } else if ([type isEqualToString:@"DELETE"]) {

    }

} else if ([dataSet isEqualToString:@"connections"]) {

    if ([type isEqualToString:@"CREATE"]) {

    } else if ([type isEqualToString:@"UPDATE"]) {

    } else if ([type isEqualToString:@"DELETE"]) {

    }

} else if ([dataSet isEqualToString:@"sites"]) {

    if ([type isEqualToString:@"CREATE"]) {

    } else if ([type isEqualToString:@"UPDATE"]) {

    } else if ([type isEqualToString:@"DELETE"]) {

    }

}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T13:51:12.450

这是一个相当特殊的情况，我相信有些人会认为这种方法有点疯狂，但是你有它。

两种选择。一种是设置块来处理数据集。缺点是你必须将这些块保存在一些字典或类似的字典中。我不打算使用那种方法。另一种方法是根据数据集生成选择器，然后检查并调用该方法。

在 processUpdates 方法中，您将拥有

```
NSString *dataSelString = [NSString stringWithFormat:@"dataSet_%@:", dataSet];
SEL dataSel = NSStringFromSelector(dataSelString);
if ([self respondsToSelector:dataSel)] {
    [self performSelector:dataSel withObject:type];
} else {
    NSLog(@"warning: unknown dataSet: %@", dataSet);
    // deal with unknown data set, e.g. alerting user or such
} 
```

对于每种数据集类型，您将拥有一个方法`self`，例如

```
- (void)dataSet_countries:(NSString *)type
{
    // handle each type accordingly
} 
```

如果需要，您也可以通过在选择器调用方法 (processUpdates) 中检查类型一次，将 if else 简化为 switch case。例子：

在顶部的 .m 文件中

```
typedef enum {
    DataTypeInsert  = 0,
    DataTypeUpdate  = 1,
    DataTypeDelete  = 2,
    DataTypeUnknown = NSNotFound
} DataType;
static NSArray *typeValues = nil;

// in processUpdates method
if (typeValues == nil) {
    // we set up typeValues once
    typeValues = [[NSArray alloc] initWithObjects:@"INSERT", @"UPDATE", @"DELETE", nil];
}
// since 'unknown' is NSNotFound, this will work out fine always
NSNumber *typeVal = [NSNumber numberWithInt:[typeValues indexOfObject:type]]; 
```

然后，您将为选择的方法提供 typeVal 而不是 type ，并且该方法本身将执行例如

```
- (void)dataSet_countries:(NSNumber *)type
{
    DataType dataType = [type intValue];
    switch (dataType) {
    case DataTypeInsert:
        break;
    // ...
    case DataTypeUnknown:
        // alert user or such that the type was invalid
    }
} 
```

希望能给你一些想法。

# animation - Photoshop 中的 GIF 动画

> ID：12074056
> 
> 赞同：0
> 
> 时间：2012-08-22T13:16:53.963
> 
> 标签：animation, photoshop, animated-gif

我有一个网页，里面有很多东西。在页面上，我想要一个动画。具体来说，我正在考虑一个动画 gif。在 Photoshop 中，我已经尝试创建一些动画 gif，但它们的动画效果并不像本文中的那样流畅。

我的动画应该和这个完全一样，我只想用自定义图像替换黑色圆圈：![球线](../Images/dc67590b0919a8aca59c3af6132112b8.png)

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:25:16.573

这应该在[http://graphicdesign.stackexchange.com](http://graphicdesign.stackexchange.com)

但是转到“文件>导入>视频帧到图层”

文件浏览器弹出窗口将显示，但只允许视频文件，将弹出窗口底部的文件类型更改为“所有文件”，或者只是在文件所在的目录中手动键入您的 gif 文件名（带扩展名）。

在“导入范围”中，选择第一个“从开始到结束”选项，并确保勾选选项底部的“制作帧动画”复选框。然后按确定。

到这里，它就会有这个 gif 文件的所有图层，所以你必须手动编辑动画的每一帧以获得你想要的效果。

完成后，另存为 gif 或原始文件。那么你应该被设置！

编辑：哦，因为它用于网络，请转到“文件>保存为网络”并确保选择“GIF”。

# mysql - 当值可以是多种不同类型时，如何管理键值对存储？

> ID：12074057
> 
> 赞同：4
> 
> 时间：2012-08-22T13:16:53.153
> 
> 标签：mysql, database, database-design, data-modeling

假设我有 n 个属性（键值对），它们可以是日期、数字或字符串。哪种数据模型存储它们最有效？

这是我想到的一个解决方案：

![数据模型](../Images/d80f661d2be7803ca1d5b8965aeccca4.png)

表格的每一行`data`必须能够链接到多种类型的*n 个属性。*

这种解决方案的优点是，如果我想添加一个新类型，我只需要添加两个新表（`label_xy`和`value_xy`），而不是修改现有表的结构。但这种解决方案真的是最方便的吗？

你会怎么做呢？

谢谢`:)`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T13:33:50.447

我已经使用了所有场景：

1.  您描述的那个（自己表中的每种数据类型）
2.  来自 Anthony 的答案 - 仅值字符串按需转换为其他数据类型
3.  一张表，多列具有不同的数据类型，其中每条记录仅使用一个（其余为稀疏列）

从这些解决方案中：1.加入地狱，2.如果您的数据主要是字符串，那就很好了，3.虽然有点过度消耗空间是迄今为止最好和最有效的。

至于3。我必须解释一下，表格是这样的：

```
EntityID int,
TypeID int,
LabelID int,
ValueInt int,
ValueDecimal decimal(12,4),
ValueString nvarchar(max),
ValueDate datetime 
```

（虽然`LabelID`定义`TypeID`了我将两者都用于无连接使用目的。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T13:28:54.407

这实际上取决于数据的性质。如果您有数百万个值并且需要强类型，那么这可能是一种方法。但是，正如您所提到的，每种新数据类型都需要新表。

如果实际上你只有几千个名称值对，并且数据的范围是相当规则的，即数字是整数，日期是 10 个字符，字符串少于 200 个字符，你可以在一个表中定义所有这些，即：

id int,
name varchar(50),
type int,
value varchar(200)
index(name)

id 不是必需的，但设计得很好。
命名约定由您决定，如有必要，可以应用唯一约束。
类型可以是 1=int, 2=date, 3=string（其他可以很容易地在以后添加）
该值可以根据您的最大字符串定义。

该解决方案有利于简单而不是性能，但这将由要求决定，字符串数据类型将是您的通配符，将其定义为“文本”可能更有意义。

# c++ - 为什么使用声明不暴露指向成员的指针

> ID：12074058
> 
> 赞同：3
> 
> 时间：2012-08-22T13:16:54.703
> 
> 标签：c++, visual-studio-2008

考虑：

```
struct foo
{
    void foobar(){}
};

struct bar : protected foo
{
    using foo::foobar;
};

int main()
{
    bar b;
    b.foobar(); // Fine
    &bar::foobar; // Not fine
} 
```

我想知道让 using 声明公开成员而不是指向它的指针的理由是什么。实际上，除了获取公开函数的地址之外，似乎所有使用更改访问级别的声明都适用于所有内容。

**更新**：一个更类似于我的真实用例的示例：

```
#include "boost/bind.hpp"

struct foo
{
    void foobar() {}
};

struct bar : protected foo
{
    using foo::foobar;
    bar() { boost::bind( &bar::foobar, this )(); } // Crashes VS2008, GCC 4.1.1 fails to compile as it tries to go through foo*
};

int main()
{
    bar b;
} 
```

然而，Mike Seymours 的解释是正确的，并解释了 GCC 失败的原因。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T13:44:31.423

*[我假设您的程序中的代码是：`void (bar::*p)() = &bar::foobar;`]*

问题不在于*using 声明*没有将标识符带入空间，而是`&bar::foobar`. 我正在考虑（如果我有时间我会这样做）用这个重新填写缺陷报告。已经有一份这样的报告。

基本上问题是 using 声明将基函数带入派生类型中查找的范围，并且`&bar::foobar`将检查表达式的访问说明符`bar`。**但是**，表达式的结果`&bar::foobar`是类型`void (foo::*)()`，而不是`void (bar::*)()`。现在，在评估`&bar::foobar`您是否尝试将其用作`void (bar::*)()`编译器后，编译器将尝试执行指向成员的指针的转换，但将失败，因为`foo`它是 的`protected`基础`bar`，并且在`main`您无权访问该关系的上下文中。

请注意，我认为这是该语言的缺陷，原因有两个：首先它破坏了您的代码：`void (bar::*p)() = &bar::foobar;`令人惊讶的是无法编译。其次，它在其他情况下破坏了访问保护：

```
class base {
protected: void f() {}
};
struct derived : base {
   void foo( base& b ) {
       b.f();                // Error
       b.*(&derived::f)();   // OK
   }
}; 
```

这个问题实际上与您的问题是对称的，而在您的问题中，令人惊讶的成员地址操作类型会在不应该的情况下抑制您的用例，在这种情况下，它允许使用违背`protected`.

相关链接：

*   [DR 203 - 成员地址表达式的类型](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#203)
*   [DR 1007 - 受保护的访问和指向成员的指针](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_closed.html#1007)

* * *

在评论 using 之后`bind`，您可能不会尝试将指向成员的指针`bar`直接转换为指向成员的指针，但会生成内部`bind`代码以将指向成员的指针应用于 的实例`bar`，并且需要转换。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T13:31:02.813

注意：这回答了原始问题；大卫罗德里格斯已经回答了更新。

你的代码很好。根据语言标准：

> 7.3.3/2 每个*using 声明*都是一个*声明*和一个*成员声明*

这意味着您宣布成为as`foobar`的成员，因此将其称为as 与 .一样合法。`bar``foo``bar::foobar``foo::foobar`

我的编译器（GCC）同意这一点；如果你的没有，那么它似乎有一个错误。

# zend-framework - Zend Login 使用多个表

> ID：12074061
> 
> 赞同：0
> 
> 时间：2012-08-22T13:17:05.930
> 
> 标签：zend-framework

如何验证用户名在一个表中而密码在另一个表中的用户`Zend_Auth`？

我`user_id`在两张桌子上都有共同点。我正在使用 2 个表开发一个简单的登录模块。

# c# - C# 列出什么 > 什么意思？

> ID：12074066
> 
> 赞同：1
> 
> 时间：2012-08-22T13:17:18.147
> 
> 标签：c#

什么是`List<List<string>>`数据以及如何获取数据（作为字符串）？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-22T13:19:17.523

它是字符串列表的列表。“外部”列表的每个元素都是一个字符串列表。“展平”列表的最简单方法是使用 LINQ：

```
var flattened = listOfLists.SelectMany(list => list);

foreach (var value in flattened)
{
    Console.WriteLine(value);
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-22T13:21:03.703

```
List<List<string>> lists;
...
foreach (List<string> list in lists)
{
    foreach (string s in list)
    {
        Console.WriteLine(s);
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-22T13:18:32.450

它是字符串列表的列表。

要获得实际的字符串，您需要遍历列表列表，然后对于每个字符串列表，遍历它以获取字符串。

```
foreach(var stringList in myList)
{
   foreach(var aString in stringList)
   {
      // do someting with aString
   }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-22T13:20:30.520

这正是它所读到的（字符串列表）列表，您可以使用`SelectMany`将对象展平为 `List<string>`

```
List<List<String>> objListOfListString = new List<List<string>>();
//Some code here that fills the above object
List<string> justAListOfString = objListOfListString.SelectMany(s => s).ToList(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-22T17:24:02.493

它意味着**字符串列表列表。**

例如

```
//Add data in inner list
var lstString = new List<string>();
Enumerable.Range(1, 10)
  .ToList()
  .ForEach(i => lstString.Add(string.Concat("string", i)));

//Add data in outer list
List<List<string>> lstStrings = new List<List<string>>();
Enumerable.Range(1, 5)
  .ToList()
  .ForEach(j => lstStrings.Add(lstString));

//To fetch data (using lambda)
lstStrings.ForEach(i => i.ForEach(j => Console.WriteLine(j))); 
```

//使用Linq获取数据

```
(from x in lstStrings
    from y in x
    select y).ToList().ForEach(j => Console.WriteLine(j)); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-22T13:19:46.227

**如何获取值**：

```
foreach(List<string> CurrentList in DoubleList)
{
  foreach(string TheString in CurrentList)
  {
    //...
  }
} 
```

**这是什么意思**：嗯，有点尴尬。正如其他人所说，它是一个字符串列表的列表。它的行为很像双索引数组（*矩阵*），例如`string[i][j]`. 但是，虽然数组是预先固定的，但列表不是。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-22T13:20:03.673

对于 a `List<List<string>>`，您可以这样做：

```
// let's assume listOfListOfString = List<List<string>>
foreach(var list in listOfListOfString)
{
    foreach(var string in list)
    {
        // ....
    }
} 
```

# c# - Visual Studio：防止在构建时复制文件忽略层次结构

> ID：12074067
> 
> 赞同：0
> 
> 时间：2012-08-22T13:17:23.217
> 
> 标签：c#, visual-studio, projects-and-solutions

我的项目具有以下结构：

```
My project
+-bin
+-lib
| +-dependency.dll
+-src
| +-Program.cs
+-My Project.csproj 
```

编译输出放在`bin`文件夹中。我已将 action 属性设置为`dependency.dll`None */Copy if newer*。问题是当我希望所有文件都位于（没有子文件夹）时，会`lib`在目录中创建一个子文件夹。`bin``bin`

一个解决方案是放入`dependency.dll`项目根文件夹，但我发现那种混乱，我宁愿保持我的项目文件夹干净。

如何强制 Visual 将我的 DLL 复制到我想要的文件夹中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:03:42.800

将 AfterBuild 目标添加到 .csproj 以复制文件。

```
<Target Name="AfterBuild">
   <Copy SourceFiles="lib/dependency.dll"  DestinationFolder="$(OutputPath)" SkipUnchangedFiles="true"/>
</Target> 
```

# firefox-addon - Firefox 扩展的 Beta 通道

> ID：12074069
> 
> 赞同：0
> 
> 时间：2012-08-22T13:17:24.400
> 
> 标签：firefox-addon

有没有办法为 Firefox 扩展创建两个独立的更新通道，作为稳定版和测试版？[本文](https://addons.mozilla.org/en-US/developers/docs/policies/maintenance#beta-addons)为那些使用 AMO 发布他们的扩展的人展示了一种方式。我使用自己的主机，我想使用更新清单来完成。如果我在那里描述几个版本，即使有 a 或 b 后缀，也会下载最新的版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:28:13.927

Firefox 将始终安装它在更新清单中找到的最高兼容版本，没有内置的扩展通道机制。因此，要实现不同的通道，您必须确保不同通道上的扩展将获得不同的更新清单。AMO 通过查看请求更新清单的扩展版本（它可以看到，因为默认`updateURL`值包含`version=%ITEM_VERSION%`参数）、以`aNN`或`bNN`获得与常规版本不同的更新建议的版本来做到这一点。您可以在您的服务器上实现类似的机制。就个人而言，我选择了一条更简单的路线，可以`update.rdf`在服务器上使用静态 - 我的构建脚本只会将不同的`updateURL`值放入`install.rdf`取决于我是在构建发布版本还是测试版本。

# iphone - applicationDidEnterBackground 在 applicationWillTermimate 之后用于具有后台定位模式的应用程序

> ID：12074072
> 
> 赞同：0
> 
> 时间：2012-08-22T13:17:31.253
> 
> 标签：iphone, ios5, core-location, cllocationmanager, uiapplicationdelegate

我正在编写一个在后台模式下运行的应用程序，它可以跟踪用户（因此有时会在后台模式下更新位置），并通过使用区域监控通知他附近的点。我不使用从区域监控重新启动应用程序的功能。

目前，在收到`applicationWillTerminate:`消息后，我停止位置更新并从区域监控中删除所有点。我注意到应用程序的奇怪行为。尝试在多任务菜单中将其杀死后，以下消息（按如下顺序）被传递到应用程序：

*   `applicationWillTerminate:`
*   `applicationDidEnterBackground:`
*   （有时）再来一个`locationManager:didUpdateToLocation:fromLocation:`

如果我没有为此应用程序注册后台定位模式，它就会被杀死。

我希望应用程序在用户在多任务菜单中杀死它并且不从区域监控中获取消息后像其他应用程序一样终止（无论如何，此时没有跟踪任何点）。不过，我需要能够使用后台定位模式。目的是尽量减少电池的使用。我应该怎么做才能做到这一点？

另外，为什么应用程序会`applicationDidEnterBackground:`在之后收到`applicationWillTerminate:`？从多任务菜单关闭后它是否仍在运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T10:42:23.487

最后，我通过实验对其进行了测试，并检查了文档中涵盖的所有内容是否属实。似乎是。这些是结果，文档中没有完全指定：

如果应用程序不支持`UIBackgroundModes`like `location`，则在多任务菜单中终止它后（接收信号 9）将被杀死（接收信号 9 `applicationWillTerminate:`）。

如果应用程序支持`location`后台模式，它会收到`applicationWillTerminate:`，`applicationDidEnterBackground:`并被挂起。在下次启动应用程序之前，它会静默终止。

如果您正在监视应用程序中的区域并且它在多任务菜单中被终止，它将在带有`UIApplicationLaunchOptionsLocationKey`选项的区域事件上重新启动。如果用户在那之后启动应用程序，它不会被终止，而只是开始获取`applicationDidBecomeActive:`和其他消息。

正如预期的那样，如果您停止监视方法中的所有区域，应用程序在终止后不会耗尽电池`applicationWillTerminate:`。但是，如果您不停止监视区域并设置了较高的区域监视精度，那么即使终止，它也会消耗大量电池（因为当时 iOS 正在积极监视这些点）。

设置后台位置模式的应用程序在终止后的行为实际上是相同的，无论您是否监控区域。只有在第一种情况下，它永远不会收到有关进入区域的消息，也不会耗尽电池。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:17:17.553

它将始终接收这些通知（并因此输入这些方法），因为这些通知将始终作为应用程序终止过程的一部分发送。`applicationWillTerminate`是的，当这些方法运行时，应用程序仍在运行，但在方法结束后它将不再运行。

如果我了解您要完成的工作，那么您应该根据`applicationDidEnterBackground`: 方法中的要求简单地停止监视。

希望有帮助。

# php - 同一表上的两个 SUM() 查询但使用不同的 Where 子句

> ID：12074074
> 
> 赞同：2
> 
> 时间：2012-08-22T13:17:35.200
> 
> 标签：php, mysql

我猜在某个地方有一个简单的解决方案，但它让我疯狂地试图让它工作。我想`SUM()`在同一张表上执行两个查询，但它们都有不同的`WHERE`子句。

该表用于用户投票系统，因此用户对其他用户的内容进行投票。我希望能够列出当前用户的活动（他们添加的内容/类别），并将其与有多少其他用户为当前用户内容投票的详细信息相结合。

本质上，我想从同一个表中组合下面的两个查询。

```
SELECT category_id,
SUM(content_add) AS content_add_count,
SUM(category_add) AS category_add_count
FROM table1 WHERE user_id = '" . $user_id . "' GROUP BY category_id

SELECT SUM(normal_vote) AS agree_votes
FROM table1
WHERE issued_by_user != '" . $user_id . "'
AND user_id = '" . $user_id . "'
AND plus = '1'
GROUP BY category_id 
```

我已经尝试在上面的第一个查询中将第二个查询放在另一个`SUM()`查询中，但这显然不能在 MySQL 中完成，但如果可能的话，这就是我想要实现的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T13:25:12.430

```
SELECT 
  category_id
  ,SUM(content_add) AS content_add_count
  ,SUM(category_add) AS category_add_count
  ,SUM(if(issued_by_user != '" . $user_id . "' AND plus = '1',normal_vote,0)) AS agree_votes
FROM table1 
WHERE user_id = '" . $user_id . "' 
GROUP BY category_id 
```

# csla - 根据父项的值验证子集合的总和

> ID：12074076
> 
> 赞同：1
> 
> 时间：2012-08-22T13:17:40.423
> 
> 标签：csla

使用 CSLA，我有一个将预算属性设置为 x 的父级。这个父对象可以有任意数量的子细节对象。我需要在父节点上实施一个验证规则，该规则仅在所有子节点的预算属性的总和加上父节点上定义的预算属性的值时才有效。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-20T18:29:16.867

如果您仍然没有它，请将其添加`using`到父类：

```
using Csla.Rules; 
```

`AddBusinessRules()`然后在父级中添加以下规则：

```
BusinessRules.AddRule<MyParent>(MyDetailsProperty,
    o =>
    {
        return o.Budget == o.MyDetails.Sum(d => d.Budget);
    }, "The value of the budget for parent and details do not match."); 
```

`true`如果父项中的预算值等于子项中预算的总和，则规则返回。

为了完成这项工作，您需要在子项更改时触发规则检查，在父类中添加以下内容：

```
protected override void OnChildChanged(Csla.Core.ChildChangedEventArgs e)
{
    base.OnChildChanged(e);
    BusinessRules.CheckRules(MyDetailsProperty);
} 
```

我使用的是 CSLA 4.5 版，但这也适用于一些以前的版本。不幸的是，我没有确切的版本号，您可以从中使用它。

# c# - 如何在 Metro App (C#) 中获取 ACS 令牌

> ID：12074081
> 
> 赞同：7
> 
> 时间：2012-08-22T13:17:55.493
> 
> 标签：c#, microsoft-metro, token, acs

我正在编写一个 Metro 应用程序，其中用户应该使用 acs 进行身份验证。

`Windows8.Identity.AccessControl`现在我已经包含了一个 nuget 包`identitprovider`（

在 azure 工具包中有一个示例，但用 JavaScript 编写，我无法弄清楚如何做到这一点:(。

我已经将 acs 与 WP7 应用程序结合使用，在那里我没有遇到任何问题。

谢谢你的帮助。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:37:53.393

看看我的解决方案： [WebAuthenticationBroker 是否适用于 Windows 8 Metro App post Release Candidate](https://stackoverflow.com/questions/12485665/does-the-webauthenticationbroker-work-in-windows-8-metro-app-post-release-candid)

还有几点要注意。

# iphone - Objective- C 从 Inputstream 中读取

> ID：12074084
> 
> 赞同：1
> 
> 时间：2012-08-22T13:18:17.603
> 
> 标签：iphone, objective-c, sockets, client

在 iPhone 应用程序中，我通过套接字将一些数据发送到服务器。该应用程序应该从服务器接收到答案（问题不在服务器端）。那是我的代码：

```
-(void)sendLocation {

NSLog(@"sendLocation %@, %@", lat, lon);

NSString *imei = @"12345484654";

NSDictionary *sendData = [NSDictionary dictionaryWithObjectsAndKeys:
                          @"0", @"type", 
                          imei, @"imei",
                          lat, @"lat",
                          lon, @"lon", 
                          nil];

NSLog (@"JSON: %@", (NSString*)sendData);
NSString *outJSON = [sendData JSONRepresentation];  

CFReadStreamRef readStream;
CFWriteStreamRef writeStream;
        // CFStreamCreatePairWithSocketToHost(NULL, (CFStringRef)@"192.168.0.36", 12390, NULL, &writeStream);
CFStreamCreatePairWithSocketToHost(NULL, (CFStringRef)@"192.168.0.36", 12390, &readStream, &writeStream);
inputStream = (NSInputStream *)readStream;
outputStream = (NSOutputStream *)writeStream;
[inputStream setDelegate:self];
[outputStream setDelegate:self];
[inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
[outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
[inputStream open];
[outputStream open];

NSData *data = [[NSData alloc] initWithData:[outJSON dataUsingEncoding:NSASCIIStringEncoding]];
NSString *end = @"\n###";
NSData *endData = [[NSData alloc] initWithData:[end dataUsingEncoding:NSASCIIStringEncoding]];
[outputStream write:[data bytes] maxLength:[data length]];
[outputStream write:[endData bytes] maxLength:[endData length]];
[outputStream close];

[outputStream removeFromRunLoop:[NSRunLoop currentRunLoop]

                        forMode:NSDefaultRunLoopMode];
[outputStream release]; 

}

- (void)stream:(NSStream *)aStream handleEvent:(NSStreamEvent)eventCode {
NSLog(@"got an event");
switch (eventCode) {
    case NSStreamEventHasSpaceAvailable:
        NSLog(@"None!");
        break;
    case NSStreamEventOpenCompleted:
        NSLog(@"Stream opened");
        break;
    case NSStreamEventHasBytesAvailable:
        if (aStream == inputStream) {
           uint8_t buffer[1024];
           int len;
           while ([inputStream hasBytesAvailable]) {
              len = [inputStream read:buffer maxLength:sizeof(buffer)];
              if (len > 0) {
                 NSString *output = [[NSString alloc] initWithBytes:buffer length:len encoding:NSASCIIStringEncoding];
                     if (nil != output) {
                          NSLog(@"%@",output);
                     }
              }
         }
     }

    [inputStream close];
    [inputStream removeFromRunLoop:[NSRunLoop currentRunLoop]forMode:NSDefaultRunLoopMode];
    [inputStream release];
        break;  
    case NSStreamEventErrorOccurred:
          NSLog(@"CONNECTION ERROR: Connection to the host  failed!");
          break;
    case NSStreamEventEndEncountered:
          NSLog(@"Stream Closed");
          break;    
    default:
          break;
      } 
} 
```

日志给了我：

```
2012-08-22 14:58:52.117 Second[1272:11603] got an event
2012-08-22 14:58:52.117 Second[1272:11603] Stream opened
2012-08-22 14:58:52.117 Second[1272:11603] got an event
2012-08-22 14:58:52.117 Second[1272:11603] None! 
```

所以 Inputstream 发生了什么事，对吗？但是从来没有收到任何东西。我也不确定在哪里关闭和释放 Inputstream。对此有什么问题的提示将不胜感激:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:12:42.787

我猜你的代码没有正确地将数据发送到服务器。它首先尝试将数据发送到服务器，因为您释放了它停止工作的输出流。这是我之前为此事件编写的代码。

```
 case NSStreamEventHasSpaceAvailable: {
                if(stream == outputStream) {

    // str is your string to send the server
        NSData* data = [str dataUsingEncoding:NSASCIIStringEncoding];
        int byteIndex = 0;
        uint8_t *readBytes = (uint8_t *)[data bytes];
        readBytes += byteIndex; // instance variable to move pointer
        int data_len = [data length];
        unsigned int len = ((data_len - byteIndex >= 1024) ?
                            1024 : (data_len-byteIndex));
        uint8_t buf[len];
        (void)memcpy(buf, readBytes, len);
        len = [outputStream write:(const uint8_t *)buf maxLength:len];
        byteIndex += len;
    }
  // release your outputstream
break;
} 
```

我可以为此建议你在同一个地方；

[这个地方是用来与 tcp 服务器通信的。](https://gist.github.com/446256)

[这个地方用于发送和获取 nsstream](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Streams/Articles/ReadingInputStreams.html#//apple_ref/doc/uid/20002273-BCIJHAGD)

最后，我建议您使用 NSJSONSerialization 来处理 json 对象。

# android - 调用日历并获取用户选择的日期 Android

> ID：12074087
> 
> 赞同：0
> 
> 时间：2012-08-22T13:18:26.507
> 
> 标签：android, date, calendar

我想创建一个带有“截止日期”标题的 EditText，当用户点击它时，应该显示日历。用户选择日期，我想把它放在这个 EditText 中。如何在 Android 上实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:23:40.240

看看这个[页面](http://www.mkyong.com/android/android-date-picker-example/)。我想这就是你想要的。

# jquery - jQuery获取href值并插入下拉菜单

> ID：12074094
> 
> 赞同：0
> 
> 时间：2012-08-22T13:18:47.650
> 
> 标签：jquery

我有以下自动生成的代码，我希望 jQuery 代码帮助我取出每个的值`href`（部分：“/listing-agent-staff/barack-obama”），并将这个值插入下拉菜单.

**自动生成的代码：**

```
<div class="StaffBlock StaffName">
<a href="/listing-agent-staff/barack-obama">Barack Obama</a>
</div>
<div class="StaffBlock StaffName">
<a href="/listing-agent-staff/bill-clinton">Bill Clinton</a>
</div>
<div class="StaffBlock StaffName">
<a href="/listing-agent-staff/will-smith">Will Smith</a>
</div> 
```

**我希望将值插入到的下拉菜单：**

```
<label for="CAT_Custom_231994">Listing Contact</label>
<select name="CAT_Custom_231994" id="CAT_Custom_231994" class="cat_dropdown">
<option value="">-- Please select --</option>
<option value="/listing-agent-staff/barack-obama">Barack Obama</option>
<option value="/listing-agent-staff/bill-clinton">Bill Clinton</option>
<option value="/listing-agent-staff/will-smith">Will Smith</option>
</select> 
```

**请注意，第一部分是自动生成的，因此记录的数量会有所不同，第二部分中的选项数量应该可以应对。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T13:24:34.507

这应该这样做：

```
$(".StaffBlock.StaffName a").each(function() {
    $(".cat_dropdown").append($("<option/>", {
        value: $(this).attr("href"),
        text: $(this).text()
    }));
});​ 
```

见[演示](http://jsfiddle.net/nn6rp/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:25:04.030

...-Containers 周围是否有 -Container？如果是，您可以像 var 一样轻松地遍历它们

`$('#id_of_main_container").children().each(function (e) { $(this).find('a').attr('href'); }`

使用 html()，您可以轻松构建带有 href-Values 的 -Tag 数组并构建自定义 -tree。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T13:29:01.707

类似的东西应该可以工作：

```
$(document).ready(function() {
    var select = $('<select name="CAT_Custom_231994" id="CAT_Custom_231994" class="cat_dropdown"><option value="">-- Please select --</option></select>');
    $('div.StaffBlock.StaffName a').each(function() {
        select.append('<option value="'+ $(this).attr('href') +'">'+ $(this).text() +'</option>');
    });
    $('div.StaffBlock.StaffName').last().after(select).after('<label for="CAT_Custom_231994">Listing Contact :</label>');
});​ 
```

这是一个[JSFiddle](http://jsfiddle.net/tAxTH/2/)

# magento - magento 后端 ACL 用户角色

> ID：12074098
> 
> 赞同：0
> 
> 时间：2012-08-22T13:18:56.493
> 
> 标签：magento, acl

我有一个用户角色，只能看到 magento 后端的几页。当我以该用户身份登录时，我想将其重定向到另一个后端模块控制器而不是仪表板。

这仅适用于他的用户角色。

有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:27:28.693

您可以使用模块中的 config.xml 中的此代码控制您的访问权限。

```
<acl>
        <resources>
            <admin>
                <children>
                    <catalog>
                        <children>
                            <yourmodule translate="title" module="yourmodule">
                                <title>any</title>
                                <sort_order>700</sort_order>
                            </yourmodule>
                        </children>
                    </catalog>
                </children>
            </admin>
        </resources>
    </acl> 
```

有了这个，您可以使用系统菜单用户控件上的管理员角色用户，您可以启用或禁用选择用户组的访问权限。如果您需要控制为每个用户显示的页面，请在您的控制器上的同一模块上进行。如果您需要更多信息，请询问，我在这里完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:34:49.730

现在有内置方法可用于您要完成的工作，但这里有一些见解供您将它们转化为解决方案：

1.  有一个`System -> Configuration -> ADVANCED -> Admin` 名为“启动页面”的设置可让您全局更改此设置（但不能由管理员或角色单独更改）。
2.  在`Mage_Admin_Model_User::getStartupPageUrl()`您将看到，如果资源不允许在先前设置中设置的任何内容，它将按顺序浏览菜单并找到第一个允许的页面

因此，我认为您可以修改菜单配置来更改项目的顺序，以便您的自定义角色允许的第一个资源与默认设置的资源不同。

另一个简单的解决方案是观察一些事件（如`admin_user_authenticate_after`）并将用户重定向到所需的页面，如果它来自给定的角色

# activex - 在 Vsual WebGui 应用程序的客户端单击按钮时无法调用 ActiveX 方法

> ID：12074104
> 
> 赞同：0
> 
> 时间：2012-08-22T13:19:17.287
> 
> 标签：activex, visual-web-gui

我在可视化 WebGui 中创建一个项目，在加载第一页时，我使用了一个 ActiveXBox 并将其安装到系统中。

现在我想访问已安装在客户端计算机中的客户端 ActiveX 控件中可用的方法。问题是代码在服务器端执行并且代码适用于服务器。

我应该怎么做才能为客户端机器执行代码。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T11:48:14.843

我们可以通过这种方式实现这一点。由于activex控件是在安装后在com中注册的。我们可以调用里面的方法。

```
Type ComType;
object ComObject;
Guid myGuid1 = new Guid("2ABF5C37-ABC3-4600-8115-4F7E6F64C765");
ComType = Type.GetTypeFromCLSID(myGuid1);
ComObject = Activator.CreateInstance(ComType);

object[] args = new object[1];
args[0] = arg1;

ComType.InvokeMember("Your Method Name", BindingFlags.InvokeMethod, null, ComObject, args); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T10:37:00.913

@阿米什库马尔，

您发布的代码是服务器端代码，对于 Visual WebGui Web 应用程序来说，如果 ActiveX 控件已安装在服务器上，则该代码将仅在 Web 服务器上运行。如果您使用本地主机作为 IIS Web 服务器运行 Web 应用程序，这可能对您有用（尽管不推荐），但是当 Web 服务器是远程计算机时，此代码不会影响客户端。

对于 Visual WebGui Web 应用程序，您选择了正确的宿主控件 ActiveXBox，它将 ActiveX 控件添加到客户端的浏览器中。为了控制它，您通常在 ActiveXBox 控件上设置“参数”，然后它会更新/联系它所托管的 ActiveX 控件。

[可以在此处](http://www.visualwebgui.com/Developers/Forums/tabid/364/forumid/29/threadid/42926/scope/posts/Default.aspx)的 Visual WebGui 的论坛主题之一（控制媒体播放器 ActiveX 控件）中找到有关其工作原理的相当好的示例，并且可以在[此处](http://wiki.visualwebgui.com/pages/index.php/ActiveXBox)找到更多信息和示例。

帕利

# variables - ASP Classic - 将值移动到变量

> ID：12074105
> 
> 赞同：-1
> 
> 时间：2012-08-22T13:19:27.697
> 
> 标签：variables, asp-classic

在以下情况下，我试图将“E”值移动到 BillMeType 变量，但它不起作用。

```
<% if TransactionGateway = "" then %>
<% BillMeType = "E" %>
<% end if %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:05:18.223

唯一`BillMeType`不能设置为“E”的方法（使用您的代码示例）是如果`TransactionGateway`不等于空字符串。`TransactionGateway`可能*看起来*是一个空字符串 - 即**NULL**吗？

此外，如果您仍在代码块中，则无需进行所有上下文切换。您的代码可以重写为：

```
<% 
If TransactionGateway = "" Then
  BillMeType = "E"
End If 
%> 
```

恕我直言，这更具可读性。

另外，我编辑了你的标题。ASP.NET 和 ASP Classic 是两个完全不同的东西。“经典”一词源于此版本的 ASP 是 .NET 之前的版本。ASP Classic（通常）是用 VBScript 编写的，而 .NET 是用 CLR 语言（C#、VB.NET 等）编写的。一世

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T11:05:04.693

您可以使用

`<% If TransactionGateway = "" Then BillMeType = "E" End If cstr(BillMeType) response.Write(BillMeType)%>`

# objective-c - 变量是静态的，没有被声明，OSX iOS Apple 风格的 C 或 Obj-C？

> ID：12074113
> 
> 赞同：2
> 
> 时间：2012-08-22T13:19:50.583
> 
> 标签：objective-c, ios, c, macos

我遇到了一些，至少对我来说，Apple 在鼠标处理事件中使用的例程的奇怪行为，在文档中他们以静态方式使用变量而不是这样声明，这是前一段时间，但是如果你使用 GLKit -lib，它们表现出相同的行为，例如类似于以下内容：

```
GLKVector3 GLKVector3Set(float x, float y, float z)
{
    GLKVector3 v = { x, y, z };
    return v;
} 
```

在正常情况下，函数内声明的所有变量都放在堆栈上，并在函数返回调用时消失...

鼠标输入的情况与此类似：

```
(void) mouseInput:(mouseEvent *)event
{
   BOOL hasClicked = NO;
   //
    if(hasClicked)
    {
        //
    } else {
      hasClicked = YES;
    }
} 
```

这只有在 BOOL 被声明为静态时才有意义......

如果有人知道我在说什么并且可以解释这种行为或参考 Apple 在其网站上的解释，我会很高兴。

尼尔斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T13:31:35.823

第一个代码示例没问题。`GLKVector3`是一个结构（实际上是一个联合），它不是静态的，它是按值返回的。它的工作原理就好像它是一个`int`.

第二个代码示例在编写时没有意义（`if`优化器已将其删除，并且可能会给您一个警告）。但是你说*的是类似的东西*，所以我认为你弄错了。它与您发布的内容不同，只是您错过了某些东西并理解为那样。如果您想对其进行解释，请发布实际代码。

附录

正如您在评论中写的如何找到原始代码，我去检查了。原始代码与您的第二个示例完全不同。是这样的：

```
BOOL keepOn = YES;
...
while (keepOn) {
  ....
  switch (...) {
    case ...
      ...
    case ...
      ...
      keepOn = NO;
      break;
    default:
      ...
  }
}
... 
```

这确实有意义，优化器不会删除任何内容。变量不是静态的。

# javascript - 如何访问这个数组？

> ID：12074116
> 
> 赞同：1
> 
> 时间：2012-08-22T13:19:54.443
> 
> 标签：javascript

这很简单，但我不知道我哪里出错了。您能否让我知道我如何使用返回的数据。我一直在打电话 `favorites[0].name`，但我没有得到任何回应。

```
 person.favourites=function(){
       return [
           {
             'name'= 'Gmail',
             'link'= 'www.gmail.com'
           },
           {
              'name': 'Facebook',
              'link': 'www.facebook.com'
           }
       ];
    }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T13:21:34.650

`favorites`不是数组，而是返回数组的函数。您需要调用它：

```
var x = person.favourites();
alert(x[0].name) // gmail
alert(x[1].link) // www.facebook.com 
```

你也可以改变你的定义：

```
person.favourites = [
    {
        'name'= 'Gmail',
        'link'= 'www.gmail.com'
    },
    {
        'name': 'Facebook',
        'link': 'www.facebook.com'
    }
]; 
```

例如，通过这种方式，您将能够访问`person.favourites[0].name`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:22:52.080

你需要*调用*你的函数，使用`person.favourites()`，而不是引用它`person.favourites`：

```
console.log(person.favourites()[0].name); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T13:38:02.817

如果您真的想`person.favourites`使用匿名函数创建您的函数，可以在分配期间调用它：

```
person.favourites=(function(){
       return [
           {
             'name': 'Gmail',
             'link': 'www.gmail.com'
           },
           {
              'name': 'Facebook',
              'link': 'www.facebook.com'
           }
       ];
    })(); 
```

# perl - Perl 脚本读取最新的日志文件

> ID：12074124
> 
> 赞同：0
> 
> 时间：2012-08-22T13:20:21.127
> 
> 标签：perl

我正在尝试组装一个脚本，该脚本将首先识别在文件夹下创建的最新日志文件，然后打开它并查找特定数据。基本上，我将在此日志文件中查找特定错误并将错误打印到新日志文件中。

我了解如何执行排序以获得最新文件，但在读取最新文件并将其复制到新日志文件时遇到问题

```
use File::stat;

$dirname  = 'C:/Luntbuild_Logs';
$timediff = 0;

opendir DIR, "$dirname";

while ( defined( $file = readdir(DIR) ) ) {
    if ( $file ne "." && $file ne ".." ) {
        $diff = time() - stat("$dirname/$file")->mtime;
        if ( $timediff == 0 ) {
            $timediff = $diff;
            $newest   = $file;
        }
        if ( $diff < $timediff ) {
            $timediff = $diff;
            $newest   = $file;
        }
    }
}

print $newest;

$file1 = "$dirname/$file";

open( FILE1, "<$newest" );
my (@fprint) = <FILE1>;
close FILE1;

open( FOUT, ">list1.txt" ) || die("Cannot Open File");

foreach $line (@fprint) {
    print "$line" if $line =~ /> @/;
    print "$line" if $line =~ /ORA-/;
    print FOUT $line;
}

close FOUT; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T13:32:26.733

看起来你的错误可能在这里：

```
open(FILE1,"<$newest"); 
```

您尝试打开不包含路径的文件（`readdir`仅返回文件名），这可能有效也可能无效，具体取决于您当前的工作目录。

由于您不检查`open`语句的返回值，因此您不知道它是否失败。最有可能的是，您需要执行以下操作：

```
open FILE1, "<", "$dirname/$newest" or die $!; 
```

`open`始终检查 all和调用的返回值`opendir`，因为它们可能会默默地失败。并确保包括：

```
use strict;
use warnings; 
```

在您的脚本中，并更正错误和警告。这是针对难以检测的错误的最安全的预防措施。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T14:07:09.963

主要问题是您在其中构建了完整的文件路径，`$file1`但随后打开`$newest`了仅包含文件名的路径。

你真的应该改进你的代码

*   *始终*在程序的开头使用`use strict`and ，并在定义时声明所有变量`use warnings``my`

*   使用词法文件和目录句柄以及 open 的三参数形式。始终测试打开的状态并放入`$!`字符串`die`，以便您知道失败的*原因*

*   除非您知道它的作用并且这就是您想要的，否则永远不要在变量周围加上双引号

`-M`这是您的代码的重构，它遵循这些准则，并且还使用了以天为单位返回文件年龄的内置运算符

```
use strict;
use warnings;

my $dirname = 'C:/Luntbuild_Logs';
my ($newest_age, $newest_file);

opendir my $dh, $dirname or die $!;

while ( readdir($dh) ) {
  my $file = "$dirname/$_";
  next unless -f $file;
  my $age = -M $file;
  unless (defined $newest_age and $newest_age <= $age) {
    $newest_age = $age;
    $newest_file = $file;
  }
}

print $newest_file, "\n";

open my $out,'>', 'list1.txt' or die "Cannot open file: $!";

open my $in, '<', $newest_file or die $!;
while (<$in>) {
  print if /> \@/ or /ORA-/;
  print { $out } $_;
}

close $out or die $!;
close $in or die $!; 
```

# python - mysql-python 的问题

> ID：12074125
> 
> 赞同：0
> 
> 时间：2012-08-22T13:20:22.513
> 
> 标签：python, mysql, django

我使用以下命令安装了 django

```
cd Django-1.4.1
sudo python setup.py install
cd
mkdir testing
cd testing
django-admin.py
django-admin.py startproject demo
cd demo
python manage.py runserver 
```

和 Msql-python 使用

```
pip install MySQL-python
sudo apt-get install python-pip
pip install MySQL-python 
```

仍然收到错误

```
raise ImproperlyConfigured("Error loading MySQLdb module: %s" % e)
django.core.exceptions.ImproperlyConfigured: Error loading MySQLdb module: No module named MySQLdb 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:23:10.523

我试图在我的 Debian 机器上重现该问题，并且：

1.  导航到 /usr/lib/pymodules/python2.6
2.  运行命令：chmod go-rx MySQLdb
3.  在另一个控制台上，做了：

    > > > 导入 MySQLdb
    > > > Traceback（最近一次调用）：
    > > > 文件“”，第 1 行，在
    > > > ImportError：没有名为 MySQLdb 的模块

我想这可能与您系统上的权限管理有关（一周前我在某个 RHEL 服务器上遇到了这个问题）。

您可能想做的事情（如果不是 Debian）：
1\. 以 root 身份登录。2\. 类型：

```
# find / -name "MySQLdb" 
```

1.  导航到找到的目录（在我的例子中是 /usr/lib/pymodules/python2.6）。
2.  类型：

    chmod -R go+rx MySQLdb

3.  如果从 Python 和常规用户上下文导入 MySQLdb 有效，请在未提升的控制台上进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:55:30.287

见 Mike johnson 所说，首先检查 MySQLdb 是否真的安装在您的系统中

如果没有，那么使用

```
sudo apt-get install python-mysqldb 
```

确保它应该正确安装

或者您可以使用另一种选择，例如`easy_install`

# validation - Struts2 重复帖子值验证

> ID：12074126
> 
> 赞同：0
> 
> 时间：2012-08-22T13:20:25.930
> 
> 标签：validation, post, struts2

这个问题可能看起来有点奇怪，但这就是我在解决我的问题几个小时后得出的结论：似乎当我的表单提交 2 次相同的 POST 参数时（我看到在 Firefox 上使用篡改数据，我有 2 倍的参数id = xxx) struts 自动重定向到结果“输入”，甚至不调用我的操作方法（我没有任何准备方法）。

您是否知道防止重复发布值的这种东西（例如拦截器）？

谢谢，我希望我足够清楚:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:23:19.227

如果您使用 Spring 并将您的操作明确定义为 bean，则它需要是“原型”范围。

除此之外，不，如果它只在表单中一次，S2 中没有任何东西会提交相同的表单值两次。此问题几乎总是由 GET 表单和单例操作引起。

如果这*不是*答案，那么您需要提供更多详细信息。

# vb.net - 循环通过 Linq 查询

> ID：12074141
> 
> 赞同：0
> 
> 时间：2012-08-22T13:21:07.923
> 
> 标签：vb.net, asp.net-mvc-3

我有一个 LINQ 查询，如下所示：

```
Dim CustQuery = From a In db.Customers
                Where a.GroupId = sendmessage.GroupId
                Select a.CustCellphone 
```

并且想通过每个结果并获取手机号码来做一段代码。我尝试了以下方法，但似乎无法正确：

```
For Each CustQuery.ToString()
   ...
Next 
```

所以我的问题是我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T13:26:15.877

您必须在 For Each 循环中设置一个变量，该变量将存储集合中每个项目的值，以供您在循环中使用。VB For Each 循环的正确语法是：

```
For Each phoneNumber In CustQuery
    //each pass through the loop, phoneNumber will contain the next item in the CustQuery 
    Response.Write(phoneNumber)     
Next 
```

现在，如果您的 LINQ 查询是一个复杂对象，您可以按以下方式使用循环：

```
Dim CustQuery = From a In db.Customers
                Where a.GroupId = sendmessage.GroupId
                Select a

For Each customer In CustQuery
    //each pass through the loop, customer will contain the next item in the CustQuery 
    Response.Write(customer.phoneNumber)     
Next 
```

# javascript - Backbone.js 无法将模型项从集合视图传递到项目视图

> ID：12074143
> 
> 赞同：0
> 
> 时间：2012-08-22T13:21:20.263
> 
> 标签：javascript, backbone.js, requirejs

我想将模型的待办事项从 TodoListView 传递给 TodoView。但它不能。我的代码是这样的。

```
 define(["jquery","underscore","backbone","todo_view","todo"],
function($,_,Backbone,TodoView,Todo){
    var TodoListview =  Backbone.View.extend({
    tagName: "ul",
    initialize:function(){
    _.templateSettings.interpolate = /\{\{(.+?)\}\}/g;
    _.bindAll(this,"addTodo","render");
    this.collection.bind("add",this.addTodo,this);
                       this.collection.bind("reset",this.render,this);

                    },
    render:function(){
      this.$el.empty();
      this.collection.each(this.addTodo);
      return this;
      },
    addTodo:function(item){
      console.log(item.get("title"));
      // it's works correctly -> Backbone.model
      var todoView = new TodoView({model:item});
      var str = todoView.render().$el;
      this.$el.append(str);
      }
    });
    return TodoListview;
    });

// todo_view.js
define(["backbone","underscore"],function(Backbone,_){
    var TodoView = Backbone.View.extend({
            tagName: "li",
            template: "#todo-view-template",
            events: {
                "click .done": "toggleDone"
            },
            initialize:function(){
                _.templateSettings.interpolate = /\{\{(.+?)\}\}/g;
                this.render();
            },
            render:function(){
                var str = $(this.template).html();
                var template = _.template(str,{name: "hello"});
                            console.log(this.model) //#-> Backbone.Model.
                            console.log(this.model.get("title")
                             //#-> undefined get method. why??
                return this;
            },
            toggleDone:function(){
            }
    });

    return TodoView;
}); 
```

我不明白为什么 TodoView 中的 this.model.get("title") 方法输出未定义。你有什么主意吗？提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:35:39.727

如果您检查模型的属性，您会得到什么？

```
console.log(this.model.attributes) 
```

它有“title”属性吗？

此外，您可能希望为 render() 绑定上下文。在初始化：

```
initialize:function(){
   _.templateSettings.interpolate = /\{\{(.+?)\}\}/g;
     _.bindAll(this, 'render');
            this.render();
   }, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:54:32.667

我的收藏已将项目设置为未定义的 0 idx。所以，它会导致错误。

我通过这段代码解决了......

```
if (typeof this.model !== undefined){
 this.model.get("title");
 } 
```

谢谢大家。

# android - 如何从字符串中选择语言环境

> ID：12074145
> 
> 赞同：0
> 
> 时间：2012-08-22T13:21:23.123
> 
> 标签：android

我正在使用 PreferenceActivity 来存储语言。这是我的 XML。

```
<item>US</item>
        <item>UK</item>
        <item>CANADA</item>
        <item>CANADA_FRENCH</item>
        <item>CHINESE</item>
        <item>FRENCH</item>
        <item>GERMAN</item>
        <item>ITALIAN</item>
        <item>JAPANESE</item>

<string-array name="listOfLanguagesValues">
        <item>US</item>
        <item>UK</item>
        <item>CANADA</item>
        <item>CANADA_FRENCH</item>
        <item>CHINESE</item>
        <item>FRENCH</item>
        <item>GERMAN</item>
        <item>ITALIAN</item>
        <item>JAPANESE</item> 
```

然后我读了save dlanguage

```
String selectedLanguage = sharedPreferences.getString("listOfLanguages", "NULL"); 
```

但我现在不知道怎么用`LOCAL.SELECTED LANGUAGE`。这些语言都来自`LOCAL.`选项

我可以以某种方式将其投射到本地吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:39:23.320

我知道这个问题了！！

你需要第二个数组。例如：

```
 <string-array name="languageSettings">
        <item name="0">UK</item>
        <item name="1">German</item>
        <item name="2">Italy</item>
    </string-array>
    <string-array name="languageSettingsValues">
        <item name="0">UK</item>
        <item name="1">DE</item>
        <item name="2">IT</item>
    </string-array> 
```

您可以像这样将它连接到您的 ListPreference：

```
 <ListPreference
    android:defaultValue="0"
    android:entries="@array/languageSettings"
    android:entryValues="@array/languageSettingsValues"
    android:key="languageSetting"
    android:summary="@string/preferences_alternativesettings_text"
    android:title="@string/preferences_alternativesettings_titel" /> 
```

这条线应该工作

```
String selectedLanguage = sharedPreferences.getString("listOfLanguages", "NULL"); 
```

# php - 如何在没有 smtp / 邮件服务器的 VPS 上通过 PHP 发送电子邮件？

> ID：12074146
> 
> 赞同：0
> 
> 时间：2012-08-22T13:21:24.310
> 
> 标签：php, email, vps

我正在将一些站点从完全托管的 cPanel VPS 转移到一个基本上什么都没有的更便宜的 VPS（运行 ubuntu 12.04）。

我通过该`mail()`函数发送电子邮件的 PHP 脚本。

我宁愿避免在 VPS 上安装任何邮件服务器的东西。我愿意接受付费邮件服务或其他方法。我什至不确定这会被称为什么，所以很难找到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:25:01.610

您可以使用 PHPMailer 或 SwiftMailer 使用经过身份验证的 SMTP 服务器（如 Gmail）发送电子邮件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T13:27:33.820

您可以使用免费的 smtp 电子邮件发送类（例如[phpmailer](http://code.google.com/a/apache-extras.org/p/phpmailer/source/browse/trunk/class.smtp.php?r=7)）使用其他一些 smtp 提供商从您的服务器发送电子邮件。

[Mandril](http://mandrill.com/)是网络上最便宜的 SMTP 提供商之一。他们允许每月免费发送 12000 封电子邮件。

# c++ - math.h 中的 sin(x) 或 cos(x) 是如何实现的？

> ID：12074147
> 
> 赞同：4
> 
> 时间：2012-08-22T13:21:32.313
> 
> 标签：c++, c, algorithm, math.h

> **可能重复：**
> [C 如何计算 sin() 和其他数学函数？](https://stackoverflow.com/questions/2284860/how-does-c-compute-sin-and-other-math-functions)

我很好奇如何`sin`以及`cos`在低级别实施。

我只是看了一下 math.h 并找不到`sin`and的声明`cos`。但既然这对我来说是一个死胡同，我转向你，所以。

我想知道计算正弦需要多少次运算以及使用哪些技巧来加速。它们在不同硬件上的实现方式是否不同，是否有处理器支持将其作为本机指令？例如，它们与添加相比有多快？

谢谢！

# java - Java 持久性和休眠

> ID：12074152
> 
> 赞同：0
> 
> 时间：2012-08-22T13:21:57.737
> 
> 标签：java, hibernate

有人可以解释一下为什么使用注释`@Fetch(FetchMode.SELECT)`可以让我使用`Lists`而不是`Sets`吗？使用其他 fetchmode 类型有什么区别`SUBSELECT`？

下面是一段示例代码：

```
class One{
   ..
   @Fetch(FetchMode.SELECT)
   @OneToMany(mappedBy="one", fetch = FetchType.EAGER, ... )
   private List<Something> listOne = new ArrayList<Something>();

   @Fetch(FetchMode.SELECT)
   @OneToMany(mappedBy="one", fetch = FetchType.EAGER, ... )
   private List<SomethingElse> listTwo = new ArrayList<SomethingElse>();
   ...
} 
```

以这种方式它可以工作，但我想知道为什么....我发现了其他与替代解决方案的讨论，但这个不是首选的...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T13:27:24.300

我想官方文档是找到问题答案的最佳场所。看看这个[链接](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/annotations/FetchMode.html)。

> `SELECT`: 对每个单独的实体、集合或连接使用 select 加载 JOIN
> 
> `JOIN`: 使用外连接加载相关实体、集合或连接 SUBSELECT
> 
> `SUBSELECT`：使用子选择查询来加载额外的集合

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:49:02.513

您应该能够使用`List`或`Set`作为您的收藏的接口，它与获取无关。

`@Fetch(FetchMode.SELECT)`一起`fetch = FetchType.EAGER`意味着在加载`One`实体后休眠将立即发出第二个选择加载列表。

`@Fetch(FetchMode.SUBSELECT)`without意味着当`fetch = FetchType.EAGER`访问第一个列表元素（）时，hibernate 将为所有一个实体（它们也可能是集合的一部分）加载带有子选择的列表`List<SomethingElse>`。

# android - 文本视图中每个字母的边框

> ID：12074153
> 
> 赞同：0
> 
> 时间：2012-08-22T13:21:58.187
> 
> 标签：android, android-layout

如何在 textview 中的每个字母周围制作黑色边框？我试过了：

```
tvText.setText(android.text.Html.fromHtml("<span style=\"border:1px solid #000000\">bla</span>")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:33:04.720

How about using a custom typeface? Check here if there is one with a border: [http://www.fontsquirrel.com/fonts/list/50/50](http://www.fontsquirrel.com/fonts/list/50/50) You can then do like this:

```
Typeface font = Typeface.createFromAsset(getAssets(),"BLOODY.ttf");
textView.setTypeface(font); 
```

# android - Android - 使用共享首选项存储/检索字符串

> ID：12074156
> 
> 赞同：42
> 
> 时间：2012-08-22T13:22:01.250
> 
> 标签：android, sharedpreferences

正如标题所说，我想保存和检索某些字符串。但是我的代码在检索或存储中都不会通过第一行。我试图按照这个链接：http: [//developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

```
private void savepath(String pathtilsave, int i) {
    String tal = null;
    // doesn't go past the line below
    SharedPreferences.Editor editor = getPreferences(MODE_PRIVATE).edit();
    tal = String.valueOf(i);
    editor.putString(tal, pathtilsave);
    editor.commit();
} 
```

和我的检索方法：

```
public void getpaths() {
    String tal = null;
    // doesn't go past the line below
    SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
    for (int i = 1; i <= lydliste.length - 1; i++) {
        tal = String.valueOf(i);
        String restoredText = settings.getString(tal, null);
        if (restoredText != null) {
            lydliste[i] = restoredText;
        }
    }
} 
```

lydliste 是一个静态字符串数组。`PREFS_NAME`是

```
public static final String PREFS_NAME = "MyPrefsFile"; 
```

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-08-22T13:25:51.277

要保存到首选项：

```
PreferenceManager.getDefaultSharedPreferences(context).edit().putString("MYLABEL", "myStringToSave").apply(); 
```

要获取存储的首选项：

```
PreferenceManager.getDefaultSharedPreferences(context).getString("MYLABEL", "defaultStringIfNothingFound"); 
```

`context`你的上下文在哪里。

* * *

如果您获得多个值，重用同一个实例可能更有效。

```
 SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(context);
 String myStrValue = prefs.getString("MYSTRLABEL", "defaultStringIfNothingFound");
 Boolean myBoolValue = prefs.getBoolean("MYBOOLLABEL", false);
 int myIntValue = prefs.getInt("MYINTLABEL", 1); 
```

如果您要保存多个值：

```
Editor prefEditor = PreferenceManager.getDefaultSharedPreferences(context).edit();
prefEditor.putString("MYSTRLABEL", "myStringToSave");
prefEditor.putBoolean("MYBOOLLABEL", true);
prefEditor.putInt("MYINTLABEL", 99);
prefEditor.apply(); 
```

* * *

**注意：**保存`apply()`优于使用`commit()`. 您唯一需要的时候`commit()`是如果您需要返回值，这是非常罕见的。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-22T13:27:33.217

```
private static final String PREFS_NAME = "preferenceName";

public static boolean setPreference(Context context, String key, String value) {
    SharedPreferences settings = context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE);
    SharedPreferences.Editor editor = settings.edit();
    editor.putString(key, value);
    return editor.commit();
}

public static String getPreference(Context context, String key) {
    SharedPreferences settings = context.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE);
    return settings.getString(key, "defaultValue");
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-22T23:01:41.493

我解决了！当我从类中调用方法时它不起作用！由于某种原因，我不得不从另一个类中调用它，并将**“classname.this”**写为 Context 参数。这是最后的工作：

```
SharedPreferences settings = ctx.getSharedPreferences(PREFS_NAME, 0);
    settings = ctx.getSharedPreferences(PREFS_NAME, 0);
    SharedPreferences.Editor editor = settings.edit();
    editor.putString(tal, pathtilsave);
     editor.commit(); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-05-29T18:07:19.090

使用 SharedPreferences 保存字符串的简单步骤：

```
public class MainActivity extends AppCompatActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    SharedPreferences prefs = this.getSharedPreferences("com.example.nec.myapplication", Context.MODE_PRIVATE);

    prefs.edit().putString("userName", "NEC").apply();

    String name = prefs.getString("userName", "");

    Log.i("saved string", name);
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-22T13:25:50.457

在上下文中尝试：

```
final SharedPreferences settings = context.getSharedPreferences(
            PREFS_NAME, 0);

return settings.getString(key, null); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-10-28T18:41:46.993

如果您不关心 commit() 的返回值，**最好使用 apply()，因为它是异步的，比 commit() 更快**。

```
final SharedPreferences prefs =  context.getSharedPreferences("PREFERENCE_NAME",
                Context.MODE_PRIVATE);
SharedPreferences.Editor editor = prefs.edit();
editor.putString("key", "value");
editor.apply(); 
```

根据[文档](http://developer.android.com/reference/android/content/SharedPreferences.Editor.html#apply%28%29)

> 与将其首选项同步写入持久存储的 commit() 不同，apply() 会立即将其更改提交到内存中的 SharedPreferences，但会开始异步提交到磁盘，并且不会通知您任何失败。如果此 SharedPreferences 上的另一个编辑器在 apply() 仍未完成时执行常规 commit()，则 commit() 将阻塞，直到所有异步提交以及提交本身完成。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-05-09T09:08:17.207

SharedPreferences 类允许您保存特定于 android 应用程序的首选项。

API 版本 11 引入了 putStringSet 和 getStringSet 方法，它们允许开发人员分别存储字符串值列表和检索字符串值列表。

使用 SharedPreferences 存储字符串数组的示例可以这样完成：

```
// Get the current list.

SharedPreferences settings = this.getSharedPreferences("YourActivityPreferences", Context.MODE_PRIVATE);
SharedPreferences.Editor editor = settings.edit();
Set<String> myStrings = settings.getStringSet("myStrings", new HashSet<String>());

// Add the new value.

myStrings.add("Another string");

// Save the list.
 editor.putStringSet("myStrings", myStrings); editor.commit(); 
```

# php - 使用日期选择器进行 Cakephp 表单输入

> ID：12074160
> 
> 赞同：2
> 
> 时间：2012-08-22T13:22:09.423
> 
> 标签：php, jquery, cakephp

我已经使用 cakephp 表单输入控件来生成日期/日期时间的输入字段，它会生成几个下拉列表来选择月份、年份等，并且工作正常。

但我的要求是，我需要将 jquery datepicker 添加到表单元素中。我已经通过在头部编写 jQuery 函数来做到这一点，它工作正常。但是每次我想这样做时，我都需要添加 javascript 的东西，并且需要手动指定表单控制参数。

我不想这样做，我想知道，是否可以在元素中使用 datepicker 覆盖日期字段的默认表单输入控件？我不想在 cakephp 核心中做任何修改，我想将它创建为一个单独的元素，以便我可以覆盖和使用。

有可能吗？如果是这样，有人可以让我知道该怎么做吗？

提前致谢。

**附加信息：** 我仍然想使用以下代码自动生成日期选择器字段。

```
echo $this->Form->input('date_of_birth'); 
```

当我键入此代码时，它应该使用 datepicker 自动创建文本框。这就是我想要实现的目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T06:52:25.787

使用 jQuery-UI 数据选择器查看通用解决方案（任何 CakePHP 版本），

[https://groups.google.com/forum/?fromgroups=#!topic/cake-php/HTF5ExtFIes](https://groups.google.com/forum/?fromgroups=#!topic/cake-php/HTF5ExtFIes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:39:53.477

你想要的是一个[Helper](http://book.cakephp.org/1.3/en/view/1097/Creating-Helpers)。

助手的目标是在模板中添加更多行为。

1.  你定义一个
2.  你在你的模板中调用它

例如，我做了一个在 cakephp 1.2 中有多重复选框

```
class PcformHelper extends FormHelper {
    public function multiCheckboxes($modelName, $colName, $value, $values=array(),$title)   {
    }
} 
```

然后在模板中我可以做

```
echo $pcform->multiCheckboxes("Tips","groups",$group['Group']['g_id'], $p_groups,h($group['Group']['g_title']); 
```

希望这会有所帮助

# css - Firefox 中滚动条拇指的 Z-index

> ID：12074162
> 
> 赞同：1
> 
> 时间：2012-08-22T13:22:16.427
> 
> 标签：css, firefox

我正在尝试在 Firefox 中设置滚动条的样式，以实现 OS X Lion 中滚动条的外观。这是我的时尚代码：

```
scrollbarbutton {-moz-appearance: none !important}

scrollbar, scrollcorner { -moz-appearance: none !important;
background-color: transparent !important;
}

scrollbar[orient='vertical'] { border-left: 0; -moz-transform:translateX(10px)}
scrollbar[orient='horizontal'] { border-top: 0; }

thumb { -moz-appearance: none !important;
border-color: red !important;
background: transparent;
opacity: .5;
border-style: solid;
}

thumb:hover, thumb:active {opacity: 1}

thumb[orient='vertical'] {
-moz-border-image: url(http://i.imgur.com/mxzFF.png) 15 0 15 0 fill;
border-width: 8px 0 8px 0;
-moz-transform:translateX(-10px);
z-index: 10000
} 
```

但是，z-index 设置什么也不做，页面内容覆盖滚动条缩略图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:26:08.507

将您的最后一个 css 块更改为：

```
thumb[orient='vertical'] { 
-moz-border-image: url(http://i.imgur.com/mxzFF.png) 15 0 15 0 fill; 
border-width: 8px 0 8px 0; 
-moz-transform:translateX(-10px); 
position: relative;
z-index: 10000;
} 
```

# ios - 如何在 iOS 中实现“拆分”功能

> ID：12074166
> 
> 赞同：1
> 
> 时间：2012-08-22T13:22:29.803
> 
> 标签：ios, sdk

如何实现这样的功能？![在此处输入图像描述](../Images/3adf8dd0d1e3787850055fc563d22a02.png)

步骤如下，（1）按下按钮或其他东西（2）屏幕将两个部分分开并显示其内容。

## 我是iOS编程新手，不知道函数叫什么，求一些资源学习。谢谢。

PS：如果我想自己写代码，我应该学什么，比如核心动画什么的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T15:03:51.377

你也应该看看这个： [http ://www.merowing.info/2012/07/pinch-to-reveal-animation-like-in-boeing-milestones/](http://www.merowing.info/2012/07/pinch-to-reveal-animation-like-in-boeing-milestones/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T14:31:58.210

[JWFolders](http://www.cocoacontrols.com/platforms/ios/controls/jwfolders)可能有助于获得您需要的东西。就像 Tigeuro 所说的[Cocoa Controls](http://www.cocoacontrols.com/platforms/ios/controls)是一个非常好的资源。

玩得开心，Objective-C 是一种有趣的语言。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T14:59:03.890

它不是 iOS API 的一部分，而是[Cocoa Controls](http://www.cocoacontrols.com/platforms/ios/controls)：在这种情况下通常是你的朋友。您会发现第三方实现，例如[RECurtainViewController](http://www.cocoacontrols.com/platforms/ios/controls/recurtainviewcontroller)和[JWFolders](http://www.cocoacontrols.com/platforms/ios/controls/jwfolders)，它们对您愿意实现的目标是封闭的。我不认为这太难：您需要对视图的运作方式有基本的了解，并且需要一些基本的核心数据知识。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T13:23:48.640

官方 API 中没有任何内容可以执行此操作。您可能会在网络上找到第 3 方的实现。

如果找不到，则必须自己编写代码。

# c# - 无法提取 JSONResult

> ID：12074167
> 
> 赞同：0
> 
> 时间：2012-08-22T13:22:34.640
> 
> 标签：c#, javascript, json, asp.net-mvc-2

我似乎无法从 JSONResult 中解压缩字符串列表。

这是控制器：

```
 [HttpPost]
    public JsonResult GetDescriptions(string incomingProjectName)
    {
        List<string> result = new List<string>();
        using (SFEntities ctx = new SFEntities())
        {
            result = (from ct in ctx.SF_CLIENT_TASK
                      join cp in ctx.SF_CLIENT_PROJECT on ct.PROJECT equals cp.ID
                      where cp.NAMEX == incomingProjectName
                      select ct.DESCRIPTION).ToList();
        }

        return Json( result );
    } 
```

这是我的ajax方法：

```
 $.ajax({
        type: "POST",
        url: "Home/GetDescriptions",
        contentType: "application/json; charset=utf-8",
        data: '{incomingProjectName : "projName"}',
        dataType: "json",
        success: function (msg) {
            alert("msg: " + msg);  // [Object object]
            alert("msg: 2 string: " + msg.toString);    // function toString() { [native code] }
            var list = eval(msg);
            alert("list: " + list); // blank
            alert("list to string: " + list.toString);  // function toString() { [native code] }
            alert("list data: " + list.valueOf);    // valueOf() { [native code] }
            alert("msg[0]: " + msg[0]);     // undefined
            alert("list[0]: " + list[0]);   // undefined
        },
    }); 
```

在调试器中，我可以看到结果的内容有一长串项目，但我似乎没有，但我尝试在 JavaScript 中访问它。

是否有某种我无法调用的反序列化或提取方法？

编辑：这似乎应该是一个样板的东西，但由于某种原因我无法谷歌很多这样做的例子......

编辑：这是我的最终（工作）代码：

```
 $.ajax({
        type: "POST",
        url: "Home/GetDescriptions",
        data: { incomingProjectName: projName },
        success: function (msg) {
            alert( "msg: " + msg );
        },
        error: function (msg) {
            alert("Failed: " + msg.status + ": " + msg.statusText);
        } 
```

这是控制器代码：

```
 public JsonResult GetDescriptions(string incomingProjectName)
    {
        List<string> result = new List<string>();
        using (SFEntities ctx = new SFEntities())
        {
            result = (from ct in ctx.SF_CLIENT_TASK
                      join cp in ctx.SF_CLIENT_PROJECT on ct.PROJECT equals cp.ID
                      where cp.NAMEX == incomingProjectName
                      select ct.DESCRIPTION).ToList();
        }

        return Json( result );
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:31:05.720

我已经使用以下控制器方法测试了您的代码，并且没有任何问题。

```
public JsonResult Test()
{
    return Json(new List<string> {"a", "b"},JsonRequestBehavior.AllowGet);
} 
```

和JS代码：

```
$.ajax({
    type: "POST",
    url: "Home/Test",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (msg) {
        console.log("msg: " + msg);  // [Object object]
        console.log("msg: 2 string: " + msg.toString);    // function toString() { [native code] }
        var list = eval(msg);
        console.log("list: " + list); // blank on your code
        console.log("list to string: " + list.toString);  // function toString() { [native code] }
        console.log("list data: " + list.valueOf);    // valueOf() { [native code] }
        console.log("msg[0]: " + msg[0]);     // undefined on your code
        console.log("list[0]: " + list[0]);   // undefined on your code
    }
}); 
```

以及成功方法的结果：

```
msg: a,b
msg: 2 string: function toString() { [native code] }
list: a,b
list to string: function toString() { [native code] }
list data: function valueOf() { [native code] }
msg[0]: a
list[0]: a 
```

我认为问题在于您的列表为空或序列化程序有问题。尝试在调试模式下查看 Json 结果内容。

更新：

要查看从您的控制器操作返回的数据，请删除该`[HttpPost]`属性并将您的 return 语句更改为`return Json( result ,JsonRequestBehavior.AllowGet);`您的代码然后转到`http://yoursite/controllername/GetDescriptions?incomingProjectName=projName`查看返回的 json。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-22T14:02:43.660

我会删除[eval 函数](http://www.w3schools.com/jsref/jsref_eval.asp)，为什么会在那里？如果你有数组，你应该能够像这样迭代它：

```
for(var m in msg)
{
    alert(m[i]);
} 
```

# many-to-many - 在 Microsoft Dynamics CRM 2011 中具有链接 2 个不同实体类型的 N:N 关系

> ID：12074169
> 
> 赞同：1
> 
> 时间：2012-08-22T13:22:44.997
> 
> 标签：many-to-many, dynamics-crm-2011, entity-relationship

例如，我需要能够将客户链接到多个用户或多个团队。现在我设法使用 JavaScript 为查找字段执行此操作，但我不知道如何为多对多关系执行此操作。

基本上，在搜索多个用户时，我需要找到一种方法来重新启用“查找”字段，并且还允许选择搜索多个团队。

甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:00:57.233

您将不得不使用两个单独的多对多关系来执行此操作。

1.  联系人和系统用户
2.  联系方式和团队

这是最好的方法，即使它没有提供最精简的 UI。但这就是 Mscrm 设计的工作方式。

# html - display:inline 没有让元素出现在一行上

> ID：12074175
> 
> 赞同：0
> 
> 时间：2012-08-22T13:23:21.153
> 
> 标签：html, css, forms, inline

我有一张带有“标准表”类的表。当我将输入框、选择或文本区域与另一个元素组合到一个单元格中时，即使不存在任何
s，它们也会出现在两个单独的行上。

这是该类的CSS：

```
/* Table
====================================*/
table.standard-table {
    width:100%;
    border-collapse: separate;
    border-spacing: 0;
    border:none;
    margin-bottom: 15px;
    -webkit-box-shadow:  0px 1px 1px 0px rgba(180, 180, 180, 0.1);
    box-shadow:  0px 1px 1px 0px rgba(180, 180, 180, 0.1);
    border:1px solid #cccccc;
}

table.standard-table th {
    border: 1px solid #dddddd;
    border-right: none;
    background-color: #fafafa;
    text-align: left;
    padding: 10px 15px;
    color: #404040;
    vertical-align: top;
    font-size: 14px;
    font-weight: bold;
}

table.standard-table td:last-child {
    border-right: 1px solid #ddd;
}

table.standard-table th:last-child {
    border-right: 1px solid #ddd;
}

table.standard-table td {
    padding: 10px 15px;
    border: #e0e0e0 1px solid;
    border-top: none;
    border-right: none;
}

table.standard-table tr:hover td {background-color: #fafafa;}

table tr.altrow { background-color: #cccccc; }

table th {text-align: left; font-weight:bold; vertical-align:top; } 
```

这是有问题的行的示例：

```
<tr>
    <th valign='top'>Items in Package</th>
    <td>
    <input type='checkbox' name='categories[]' value='test' /> Test 
        <input type='text' name='budget_1' placeholder='Budget' style='width:200px;' onkeyup=\"if (/[a-z\s,$]/ig.test(this.value)) this.value = this.value.replace(/[a-z\s,$]/ig,'')\" />
    </td>
</tr> 
```

我尝试添加“display:inline”、“display:inline-cell”、“display:inline-table”等所有其他内容，但没有将复选框、文本和输入框放在同一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:46:06.780

您可以使用`vertical-align`

[http://jsfiddle.net/2RL8t/3/](http://jsfiddle.net/2RL8t/3/)

从技术上讲，它已经在中间垂直对齐，但我不认为视觉上看起来不像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:26:50.940

尝试;

```
float: left; 
```

这将强制元素内联。除此之外，使用；

```
table-layout: fixed; 
```

# ios - 试图等待一组 NSURLConnections 完成

> ID：12074178
> 
> 赞同：3
> 
> 时间：2012-08-22T13:23:26.293
> 
> 标签：ios, nsurlconnection, grand-central-dispatch

我有一堆可以异步运行的服务器请求，但我需要等待它们全部完成才能继续。

dispatch_group_async 看起来很合理，但我无法让它工作。它要么永远阻塞，要么根本不阻塞。我最近的尝试看起来像......

```
dispatch_group_t group;

- (void)cleanRoom {
    NSAssert(![NSThread isMainThread], @"not on main thread.");
    group = dispatch_group_create();

    for (Junk *thing in myRoom) {
    // take it off the current thread
        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
            // register code against group
            dispatch_group_enter(attachmentGroup);
            NSURLConnectionWrapper *wrapper = [[NSURLConnectionWrapper alloc] init];
            wrapper.delegate = self;
            [wrapper sendRequestFor:thing];
        }];
    }

    // wait till the stuff is the group is done
    dispatch_group_wait(attachmentGroup, DISPATCH_TIME_FOREVER);
    NSLog(@"waiting complete!!!!");

    // process the results now that I have them all
}

- (void)wrapperConnectionDone {
    // do a bit more junk
    dispatch_group_leave(group);
} 
```

这会导致它永远阻塞，因为`NSURLConnectionDelegate`方法`NSURLConnectionDataDelegate`永远不会被调用。我假设我已经以某种方式阻止了他们的线程，但是使用`NSLog`我可以确认它`NSURLConnection`与我的方法在不同的线程上`cleanRoom`。

我读了一些关于其他没有运行循环来进行回调的线程，所以我尝试了类似的东西`connection setDelegateQueue:[NSOperationQueue mainQueue]]`，`[[NSRunLoop currentRunLoop] runUntilDate:[NSDate distantFuture]]`但没有明显的效果。

`+ sendAsynchronousRequest:queue:completionHandler:`对我不起作用，我有一些丑陋的身份验证。我已经看到了一些很好的例子，但我未能适应。

我显然缺少一些基本的东西，但我找不到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T13:52:04.243

`NSURLConnection`需要在具有已处理运行循环的线程上运行。最简单的此类线程是主线程。所以只有`dispatch_async`这些连接创建`dispatch_get_main_queue()`和你的逻辑的其余部分`dispatch_group`应该没问题。请记住，委托方法将在主线程上调用（来自`NSURLConnection`概述）：

> 在为关联的 NSURLConnection 对象启动异步加载操作的线程上调用这些委托方法。

# c# - 带有 C# 代码的 Windows 应用程序，带有 .ini 字典以查找所有关键字

> ID：12074179
> 
> 赞同：-1
> 
> 时间：2012-08-22T13:23:30.000
> 
> 标签：c#, dictionary, keyword, alias, windows-applications

我有一个 Windows 应用程序，它需要一个单词并在 pdf 文件中搜索该单词。我被要求将这些词扩展为一个别名，该别名也为该别名查找其他关键字。因此，如果用户正在搜索“Toyota”，则程序知道还要搜索“Camry”、“Corolla”和“Prius”。

我需要为我的 C# 程序创建一个作为别名和关键字列表的外部文件。外部文件必须是 .ini 文件。在 .ini 文件中我无能为力；这就是客户想要的。

所以，我需要一个像这样工作的 .ini 文件：

```
Toyota = Camry
Toyota = Corolla
Toyota = Prius 
```

然后，当丰田在文本框中键入时，程序使用 .ini 文件知道它还需要使用凯美瑞、卡罗拉和普锐斯。

有人可以给我能够做到这一点的代码吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:29:54.753

您可以在程序启动时读取整个 ini 文件（您可以[在此处](http://jachman.wordpress.com/2006/09/11/how-to-access-ini-files-in-c-net/)查看方法）。然后将键值存储在类似于以下内容的容器中：

```
Dictionary<string, List<string>> 
```

其中键例如是“Toyota”，值列表是“Camry”、“Corrola”、“Prius”...

# php - 用户阅读时将论坛标记为已读，然后在发布新回复时将其标记为新

> ID：12074187
> 
> 赞同：3
> 
> 时间：2012-08-22T13:24:22.260
> 
> 标签：php, mysql, forums

我有两张表，一张用于主题，一张用于回复。

```
+------------------+     +------------------+
| forum_topics     |     | forum_posts      |
+------------------+     +------------------+
| topic_id         |     | post_id          |
| topic_title      |     | post_content     |
| topic_contents   |     | post_date        |
| topic_date       |     | topic_id         |
| topic_keywords   |     |                  |
+------------------+     +------------------+ 
```

我想要它，所以当用户查看带有主题的页面并阅读该主题时，它会被标记为该特定用户的已读。但是，如果另一个用户来回复该线程，我希望它被标记为自上次访问以来的新帖子或类似的东西。

有任何想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T13:28:16.717

您可以使用连接到用户和论坛帖子的查找表来执行此操作，如下所示：

当用户查看论坛时，在查找表中输入一行，例如

```
userID, topic_id, post_id, currentTime 
```

然后要确定用户是否已经阅读过这个论坛，您可以查询该表以查看他们的 userID 是否出现在其中 - 这意味着他们已经阅读过。

然后，您可以将该`currentTime`列与论坛/线程中的最后一个条目进行比较，看看哪个更大，这将告诉您用户是否看过最后一个帖子。

编辑：是的，您需要在主题和帖子中添加一个日期时间列（无论如何，知道何时发布帖子通常是一种好习惯）以及一些 PHP/SQL：

```
<?php
$userUpdateTime = gmdate(); // assumed to be either dateTime or unixTimestamp of when user last red the topic/forum
$qry = '
SELECT
    IF(`forum_topics`.`updateDateTime` > "'.$userUpdateTime.'", "unRead", "Read")
FROM
    `forum_topics` '; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:37:23.410

我在论坛上的每个成员表中使用以下每个线程：

```
CREATE TABLE `forum_thread_member` (
  `thread_id` mediumint(8) unsigned NOT NULL DEFAULT '0',
  `member_id` smallint(5) unsigned NOT NULL DEFAULT '0',
  `last_post_id` mediumint(8) unsigned NOT NULL DEFAULT '0',
  `read_flag` bit(1) NOT NULL,
  `posted_flag` bit(1) NOT NULL,
  `new_flag` bit(1) NOT NULL,
  `mark_flag` bit(1) NOT NULL,
  `bookmark_flag` bit(1) NOT NULL,
  `hidden_flag` bit(1) NOT NULL,
  PRIMARY KEY (`thread_id`,`member_id`),
  KEY `bookmark_flag` (`bookmark_flag`)
) 
```

在查询线程列表时，我在上面留下了 join。如果值为`NULL`，则该线程尚未被读取。这可以让您准确地知道一个人已经阅读和参与了哪些线程。

这`last_post_id`很有用，因为您可以直观地跳转到并显示该人阅读的最后一篇文章。`new_flag`设置为`1`每次有人发帖时，因此很容易用于直观地确定线程列表是否有新的（未读）内容。其他标志用于管理书签、隐藏线程等。

当然，这个表可能会变得很大，但只要没有设置任何重要标志（例如，`bookmark_flag`），您就可以安全地删除旧记录。如果一个人搜索或浏览旧线程，您可以假设它们已被阅读（而不是假设它们未读，就像您对新线程所做的那样）。

# git - 获取/拉取错误 - 致命：读取错误：无效参数

> ID：12074196
> 
> 赞同：1
> 
> 时间：2012-08-22T13:24:37.073
> 
> 标签：git

根据这篇文章[http://www.geekaholic.org/2012/05/peer-to-peer-collaborative-development.html](http://www.geekaholic.org/2012/05/peer-to-peer-collaborative-development.html)我尝试了以下对等共享。

在客户端 1

> 1.  从中央仓库克隆
>     
> 2.  进行一些更改并提交
>     
> 3.  从这个克隆的父目录 - git daemon --export-all --base-path=。

在客户端 2

> 1.  从同一个中央仓库克隆
>     
> 2.  git remote add new git://machine-name/repo-name
>     
> 3.  git fetch new
>     fetch/pull 错误 - 致命：读取错误：无效参数

当我在同一个 Client1 中创建另一个克隆并执行相同的步骤时 - 获取或拉取工作。
从客户端 2，使用 IP 地址而不是系统名称 - 结果相同
从客户端 2，当我从客户端 1 (git clone git://machine-name/repo-name) 克隆时，克隆成功。

什么可能导致提取错误？

# c# - 如何在桌面上始终保持窗体的四个角可见？

> ID：12074199
> 
> 赞同：2
> 
> 时间：2012-08-22T13:24:41.113
> 
> 标签：c#, winforms

我有一个用作桌面应用程序的 Windows 窗体。现在我希望表单在拖动时不要超出桌面边界。我知道整个窗口不会消失，但我想显示所有四个角。我设置了“边框样式=固定工具窗口”，并编码以编程方式移动表单。

所以代替这个：

```
----------------------
！！
！---------------
！！！
！！！
！---------------
！！
----------------------

```

我要这个：

```
----------------------
！！
！-------------！
！！！！
！！！！
！-------------！
！！
----------------------

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T13:59:03.150

您可以使用该[`LocationChanged`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.locationchanged.aspx)事件并将其与`Screen.AllScreens[0].Bounds`这是主监视器进行比较，如果您有多个监视器，您可以更改然后索引以选择您将表单限制到的屏幕。

```
private void Form1_LocationChanged(object sender, EventArgs e)
{
    if ((this.Left + this.Width) > Screen.AllScreens[0].Bounds.Width)
        this.Left = Screen.AllScreens[0].Bounds.Width - this.Width;

    if (this.Left  < Screen.AllScreens[0].Bounds.Left)
        this.Left = Screen.AllScreens[0].Bounds.Left;

    if ((this.Top + this.Height) > Screen.AllScreens[0].Bounds.Height)
        this.Top = Screen.AllScreens[0].Bounds.Height - this.Height;

    if (this.Top < Screen.AllScreens[0].Bounds.Top)
        this.Top = Screen.AllScreens[0].Bounds.Top;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T13:55:15.950

将表单边界与[SytemInformation.VirtualScreen进行比较](http://msdn.microsoft.com/en-us/library/system.windows.forms.systeminformation.virtualscreen.aspx)

例子：

```
 private void Form1_Move(object sender, EventArgs e)
    {
        KeepBounds();
    }

    private void KeepBounds()
    {
        if (this.Left < SystemInformation.VirtualScreen.Left)
            this.Left = SystemInformation.VirtualScreen.Left;

        if (this.Right > SystemInformation.VirtualScreen.Right)
            this.Left = SystemInformation.VirtualScreen.Right - this.Width;

        if (this.Top < SystemInformation.VirtualScreen.Top)
            this.Top = SystemInformation.VirtualScreen.Top;

        if (this.Bottom > SystemInformation.VirtualScreen.Bottom)
            this.Top = SystemInformation.VirtualScreen.Bottom - this.Height;
    } 
```

这将在屏幕中保留表单的“四个”角

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T13:39:24.877

如果我理解这个问题很好。

您想避免您的窗口（winforms MainForm）不离开屏幕吗？如果是这种情况，您不能在窗体的移动事件中处理此问题，并且在移动时检查 Top en Left 属性，如果它们变为负数，则返回该方法。如果你知道你的表格有多大和你的分辨率，你就可以计算出右边和底部。

```
private void Move(object sender, EventArgs e)
    {
        var f = sender as Form;

        var l = f.Left;
        var t = f.Top;

        var h = f.Height;
        var w = f.Width;
        var sh = Screen.GetWorkingArea(this).Height;
        var sw = Screen.GetWorkingArea(this).Width;
        if(t<0 || t+h > sh) return;
        if (l < 0 || l+w > sw) return;
    } 
```

像这样的东西。**未测试。**

# ruby-on-rails-3 - 无法验证 jQuery 文件上传、仅 IE 9、Rails 3 应用程序的 CSRF 令牌

> ID：12074200
> 
> 赞同：7
> 
> 时间：2012-08-22T13:24:44.160
> 
> 标签：ruby-on-rails-3, jquery-plugins, file-upload, csrf

因此，我在 rails 3 应用程序中使用 jquery 文件上传，并且一切正常，除了在 IE 9 中。仅在 IE9 中，当我尝试上传文件时，我的控制台中不断出现“无法验证 csrf 令牌”错误。我安装了 Firebug lite 来检查它，正确的 csrf 令牌是正确的，并且在文档中的正确位置（是的，我的 <%= csrf_meta_tags %> 标记在布局文件的标题中）。不知道为什么它只在 IE 9 中这样做，有没有人见过这个？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-25T04:40:07.440

我遇到了同样的问题，上面来自 OP 的评论帮助我找到了答案。这对我有用：

```
$('#fileupload').fileupload({
  ... other options
  formData: [
    { name: 'authenticity_token', value: $('meta[name="csrf-token"]').attr('content') }
  ]
}); 
```

请注意，布局文件（Rails 3.2 中的 application.html.erb）应具有以下内容：

```
 <%= csrf_meta_tags %> 
```

# jquery - ajax请求成功重绘数据表

> ID：12074202
> 
> 赞同：2
> 
> 时间：2012-08-22T13:24:48.063
> 
> 标签：jquery, datatables

我试图在单击批准按钮后重绘数据表并且一旦 ajax 请求成功。

一切都在点击功能中工作（它保存到数据库，它动画，它向上滑动）但表格不会重绘。

有没有人对它为什么不起作用有任何想法？

```
 $('a.approve').click(function(e) {
    e.preventDefault();
    var parent = $(this).closest("tr");
    $.ajax({
      type: 'get',
      url: 'index.php',
      data: 'ajax=1&approve='+ parent.attr('id').replace('record-','')+'&employee='+ parent.attr('title')+'&acyear=' + parent.attr('lang'),
      beforeSend: function() {
        parent.animate({'backgroundColor':'#fb6c6c'},300);
      },
      success: function() {
        parent.slideUp(300,function() {
          parent.remove();
        var $aTable= $("#table_a").dataTable( { bRetrieve : true } );
        var $bTable= $("#table_b").dataTable( { bRetrieve : true } );
        $aTable.fnDraw();
        $bTable.fnDraw();
        });

      }
    });
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-05T23:07:56.530

聚会有点晚了，但我刚刚经历了这个，所以我想我会把答案留在这里。

默认情况下，JQuery 不会阻止缓存 ajax 响应。Chrome 和 Firefox 似乎无论如何都不会缓存这些调用，所以它们更新得很好。另一方面，IE 总是缓存 ajax 响应，即使是硬页面刷新也不会刷新它们。解决方案是始终在您的 ajax 调用中包含一个 cache: "false" 设置，如下所示：

```
$.ajax({
    type: 'get',
    cache: false,
    url: 'index.php',
    data: 'ajax=1',
    success: function() {
      ...
    }
); 
```

数据表对此产生了额外的影响：默认情况下，它们会为您关闭缓存（从 v. 1.7 开始）。所以如果你只是设置了一个 ajax url，一个数据表应该可以更新：

```
$("#myTable").dataTable({
    "bProcessing": true,
    "sAjaxSource": "getAssayBatches.json",  // URL that retrieves the data
    // datatable leaves caching off by default. Table refreshes ok!
}); 
```

但是，如果您需要进行一些额外的处理并覆盖“fnServerData”函数，则会丢失默认缓存设置，这意味着缓存会重新打开：

```
$("#myTable").dataTable({
    "bProcessing": true,
    "sAjaxSource": "getAssayBatches.json",  // URL that retrieves the data

    // the following parameter turns caching back on, meaning stale data in IE!
    "fnServerData": function (sSource, aoData, fnCallback) {
        $.getJSON(sSource, aoData, function (json) {
            var data = {"aaData": json};
            fnCallback(data);
        });
    }
}); 
```

所以你需要把 cache: false 也放在这里以确保表得到更新：

```
$("#myTable").dataTable({
    "bProcessing": true,
    "sAjaxSource": "getAssayBatches.json",  // URL that retrieves the data

    // same ajax call as above, but this time with cache: false 
    // to ensure the table gets updated
    "fnServerData": function (sSource, aoData, fnCallback) {
        $.ajax({
            type: "GET",
            cache: false,
            url: sSource,
            data: aoData,
            success: function (json) {
                var data = {"aaData": json};
                fnCallback(data);
            }
        });
    }
}); 
```

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T02:12:02.287

为了从数据库中获取新的表数据，您`index.php`需要将表值作为 JSON 返回：

```
{
  "sEcho": 1,
  "iTotalRecords": "2",
  "iTotalDisplayRecords": "2",
  "aaData": [
    [
      "Gecko",
      "Firefox 1.0",
      "Win 98+ / OSX.2+",
      "1.7",
      "A"
    ],
    [
      "Gecko",
      "Netscape Navigator 9",
      "Win 98+ / OSX.2+",
      "1.8",
      "A"
    ]       ]
} 
```

和成功的部分：

```
success: function(json) {
        parent.slideUp(300, function() {
            parent.remove();

            var obj = JSON.parse(json);//get new data
            oTable.fnClearTable();//clear table
            for (x in obj.aaData)
                oTable.fnAddData(obj[x]); //populate table

            //redo another ajax if you have several table.
        }); 
```

如果仅更改了 1 行，则删除该行，以 JSON 格式从服务器返回该行并在表中重新插入该行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T16:44:09.223

我看不到足够的代码来了解您的确切需求。

我猜你的`parent`var 代表你的一个数据表中的一行，并且你想从数据表中删除它。

dataTable 保留其数据的内部缓存，调用`parent.remove()`不会更新此缓存。

如果你想从数据表中删除一行，你应该使用 API 函数[fnDeleteRow](http://datatables.net/api#fnDeleteRow)：

```
// remove your "parent.remove()" line
$aTable.fnDeleteRow(parent[0]) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-22T13:42:28.900

**`oTable.fnReloadAjax();`**成功后结果重新绑定表

```
$(document).ready(function () {

$.fn.dataTableExt.oApi.fnReloadAjax = function (oSettings, sNewSource, fnCallback, bStandingRedraw) {
    if (typeof sNewSource != 'undefined' && sNewSource != null) {
        oSettings.sAjaxSource = sNewSource;
    }
    this.oApi._fnProcessingDisplay(oSettings, true);
    var that = this;
    var iStart = oSettings._iDisplayStart;
    var aData = [];

    this.oApi._fnServerParams(oSettings, aData);

    oSettings.fnServerData(oSettings.sAjaxSource, aData, function (json) {
        /* Clear the old information from the table */
        that.oApi._fnClearTable(oSettings);

        /* Got the data - add it to the table */
        var aData = (oSettings.sAjaxDataProp !== "") ?
            that.oApi._fnGetObjectDataFn(oSettings.sAjaxDataProp)(json) : json;

        for (var i = 0; i < aData.length; i++) {
            that.oApi._fnAddData(oSettings, aData[i]);
        }

        oSettings.aiDisplay = oSettings.aiDisplayMaster.slice();
        that.fnDraw();

        if (typeof bStandingRedraw != 'undefined' && bStandingRedraw === true) {
            oSettings._iDisplayStart = iStart;
            that.fnDraw(false);
        }

        that.oApi._fnProcessingDisplay(oSettings, false);

        /* Callback user function - for event handlers etc */
        if (typeof fnCallback == 'function' && fnCallback != null) {
            fnCallback(oSettings);
        }
    }, oSettings);
}
}); 
```

# boost - 使用 Boost 分发和编译 C++ 程序

> ID：12074203
> 
> 赞同：0
> 
> 时间：2012-08-22T13:24:51.200
> 
> 标签：boost, build, cmake, autotools

我正在编写一个 C++ 程序，我想为它使用 Boost 的一些功能（不仅仅是标头模块），并且我正在以源代码形式分发它。我希望它可以在尽可能多的操作系统上运行，但为了具体起见，请使用 Linux。（我更习惯于 Windows，但只要 Boost 适合静态链接，我就可以依赖于发送二进制文件。）

现在，我正在发布一个简单的手写 makefile，所以编译程序的过程只是`make`. 但是，当您将 Boost 带入方程式时，我知道这不再有效，因为您无法知道用户机器上可用的版本（如果有），或者头文件和库文件的位置，而应该使用诸如 autotools 或 CMake 之类的构建系统。

它是否正确？如果是这样，如果最高优先级是可靠性（即当用户尝试编译和安装程序时，最大限度地提高其工作的可能性），应该使用哪个构建系统？

（我也计划使用 GMP，如果这有影响的话。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T07:59:23.517

在 CMake 中编译静态使用 Boost 的程序非常简单。使用[*FindBoost*](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#module%3aFindBoost)模块为您处理它。

静态使用*program_options*的程序的示例*CMakeLists.txt文件：*

 *```
cmake_minimum_required(VERSION 2.8)
project(myproj)

set(Boost_USE_STATIC_LIBS ON)
find_package(Boost 1.40 REQUIRED COMPONENTS program_options)
include_directories(${Boost_INCLUDE_DIRS})

add_executable(myexe source_file.cpp)
target_link_libraries(myexe ${Boost_LIBRARIES}) 
```*

# windows-phone-7 - 关于重用 wp7 示例中的代码

> ID：12074204
> 
> 赞同：0
> 
> 时间：2012-08-22T13:24:57.540
> 
> 标签：windows-phone-7

嗨，我正在开发一个 wp7 应用程序，该应用程序需要代码来裁剪图像，我在[http://code.msdn.microsoft.com/wpapps/Photos-Sample-a38a2c8e](http://code.msdn.microsoft.com/wpapps/Photos-Sample-a38a2c8e)找到了执行此操作的代码示例。我可以在我的应用程序中使用部分代码吗？

问候，

桑托姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:30:15.237

答案在该页面上的许可证中：

> (A) 版权授予 - 根据本许可的条款，包括第 3 节中的许可条件和限制，每个贡献者授予您非独家、全球、免版税的版权许可，以复制其贡献、准备其衍生作品贡献，并分发其贡献或您创建的任何衍生作品。
> 
> (B) 专利授予 - 根据本许可的条款，包括第 3 节中的许可条件和限制，每个贡献者根据其许可专利授予您非排他性、全球性、免版税许可，以制造、已经制造、使用、出售、要约出售、进口和/或以其他方式处置其在软件中的贡献或在软件中的贡献的衍生作品。

由于您的使用听起来像是对衍生作品的描述，因此您可以使用代码而无需支付版税。您还应该尊重条件和限制：

> (A) 无商标许可 - 本许可不授予您使用任何贡献者的名称、徽标或商标的权利。
> 
> (B) 如果您就您声称被软件侵犯的专利向任何贡献者提出专利索赔，则该贡献者对该软件的专利许可将自动终止。
> 
> (C) 如果您分发软件的任何部分，您必须保留软件中存在的所有版权、专利、商标和归属声明。
> 
> (D) 如果您以源代码形式分发软件的任何部分，您只能在本许可下这样做，并在您的分发中包含本许可的完整副本。如果您以编译或目标代码的形式分发软件的任何部分，您只能在符合本许可的许可下这样做。
> 
> (E) 软件按“原样”获得许可。您自行承担使用的风险。贡献者不提供任何明示的保证、保证或条件。根据当地法律，您可能拥有本许可无法更改的其他消费者权利。在您当地法律允许的范围内，贡献者排除了对适销性、特定用途适用性和不侵权的默示保证。
> 
> (F) 平台限制 - 第 2(A) 和 2(B) 节中授予的许可仅适用于您创建的直接在 Microsoft Windows 操作系统产品、Microsoft 运行时技术（例如.NET Framework 或 Silverlight）或 Microsoft 应用程序平台（例如 Microsoft Office 或 Microsoft Dynamics）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:32:23.143

如果你问的是微软给出的代码的许可，接下来是应用的 MS-LPL 的完整描述。

看看这篇文章以获得更简单的解释：[http ://news.cnet.com/8301-13505_3-10058421-16.html](http://news.cnet.com/8301-13505_3-10058421-16.html)

MS-LPL 许可证完整说明：

MICROSOFT LIMITED PUBLIC LICENSE 1.1 版 本许可适用于在没有许可协议的情况下在本网站上标记为“示例”或“示例”的代码的使用，如上文标题为“本网站上可用软件的特定通知”部分所述。如果您使用此类代码（“软件”），则表示您接受此许可。如果您不接受许可，请勿使用该软件。

1.  定义 术语“复制”、“复制”、“衍生作品”和“分发”在此处具有与美国版权法相同的含义。“贡献”是原始软件，或对软件的任何添加或更改。“贡献者”是指根据本许可分发其贡献的任何人。“许可专利”是贡献者的专利声明，直接读取其贡献。

2.  权利授予 (A) 版权授予 - 根据本许可的条款，包括第 3 节中的许可条件和限制，每个贡献者授予您非独家、全球、免版税的版权许可，以复制其贡献、准备衍生产品其贡献的作品，并分发其贡献或您创建的任何衍生作品。(B) 专利授予 - 根据本许可的条款，包括第 3 节中的许可条件和限制，每个贡献者根据其许可专利授予您非排他性、全球性、免版税许可，以制造、已经制造、使用、出售、要约出售、进口和/或以其他方式处置其在软件中的贡献或在软件中的贡献的衍生作品。

3.  条件和限制 (A) 无商标许可 - 本许可不授予您使用任何贡献者的名称、徽标或商标的权利。(B) 如果您就您声称被软件侵犯的专利向任何贡献者提出专利索赔，则该贡献者对该软件的专利许可将自动终止。(C) 如果您分发软件的任何部分，您必须保留软件中存在的所有版权、专利、商标和归属声明。(D) 如果您以源代码形式分发软件的任何部分，您只能在本许可下这样做，并在您的分发中包含本许可的完整副本。如果您以编译或目标代码的形式分发软件的任何部分，您只能在符合本许可的许可下这样做。(E) 软件按“原样”获得许可。“ 你承担使用它的风险。贡献者不提供任何明示的保证、保证或条件。根据当地法律，您可能拥有本许可无法更改的其他消费者权利。在您当地法律允许的范围内，贡献者排除了对适销性、特定用途适用性和不侵权的默示保证。(F) 平台限制 - 第 2(A) 和 2(B) 节中授予的许可仅适用于您创建的直接在 Microsoft Windows 操作系统产品、Microsoft 运行时技术（例如.NET Framework 或 Silverlight）或 Microsoft 应用程序平台（例如 Microsoft Office 或 Microsoft Dynamics）。根据当地法律，您可能拥有本许可无法更改的其他消费者权利。在您当地法律允许的范围内，贡献者排除了对适销性、特定用途适用性和不侵权的默示保证。(F) 平台限制 - 第 2(A) 和 2(B) 节中授予的许可仅适用于您创建的直接在 Microsoft Windows 操作系统产品、Microsoft 运行时技术（例如.NET Framework 或 Silverlight）或 Microsoft 应用程序平台（例如 Microsoft Office 或 Microsoft Dynamics）。根据当地法律，您可能拥有本许可无法更改的其他消费者权利。在您当地法律允许的范围内，贡献者排除了对适销性、特定用途适用性和不侵权的默示保证。(F) 平台限制 - 第 2(A) 和 2(B) 节中授予的许可仅适用于您创建的直接在 Microsoft Windows 操作系统产品、Microsoft 运行时技术（例如.NET Framework 或 Silverlight）或 Microsoft 应用程序平台（例如 Microsoft Office 或 Microsoft Dynamics）。适用于特定目的和不侵权。(F) 平台限制 - 第 2(A) 和 2(B) 节中授予的许可仅适用于您创建的直接在 Microsoft Windows 操作系统产品、Microsoft 运行时技术（例如.NET Framework 或 Silverlight）或 Microsoft 应用程序平台（例如 Microsoft Office 或 Microsoft Dynamics）。适用于特定目的和不侵权。(F) 平台限制 - 第 2(A) 和 2(B) 节中授予的许可仅适用于您创建的直接在 Microsoft Windows 操作系统产品、Microsoft 运行时技术（例如.NET Framework 或 Silverlight）或 Microsoft 应用程序平台（例如 Microsoft Office 或 Microsoft Dynamics）。

# c# - 如何中断事件方法的执行

> ID：12074212
> 
> 赞同：0
> 
> 时间：2012-08-22T13:25:16.547
> 
> 标签：c#, event-handling

我有一个这样的事件处理方法：

```
private void btnConfirm_Click(object sender, EventArgs e)
{
//Some code
if (int.TryParse(tboxPhone.Text, out n))
    {
     korisnik.Phone = n;
     command.Parameters.AddWithValue("@phone", korisnik.Phone);
    }
    else
    {
     MessageBox.Show("Error. Numerals only!");
     return;
    }
//Some other code if condition is fulfilled
} 
```

问题是 return 不仅打破了方法，而且还打破了整个形式。我可以忍受这个，但这不是最好的解决方案。有没有其他方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:30:53.423

完全摆脱`return`例如

```
private void btnConfirm_Click(object sender, EventArgs e) 
{ 
    //Some code 
    if (int.TryParse(tboxPhone.Text, out n)) 
    { 
        korisnik.Telefon = n; 
        command.Parameters.AddWithValue("@phone", korisnik.Telefon); 
        //Some other code if condition is fulfilled 
    } 
    else 
    { 
        MessageBox.Show("Error. Numerals only!");  
    } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:31:13.753

您应该改为在按键上进行数字验证。这样您的代码将永远不会进入“其他”，这是同时处理您的验证的更好方法。

```
private void tboxPhone_KeyPress(object sender, KeyPressEventArgs e)
{
    if (!char.IsControl(e.KeyChar) 
        && !char.IsDigit(e.KeyChar) 
        && e.KeyChar != '.')
    {
        e.Handled = true;
    }
} 
```

正则表达式也是一种方式：

```
private void tboxPhone_KeyPress(object sender, KeyPressEventArgs e)
{
     if (!System.Text.RegularExpressions.Regex.IsMatch(e.KeyChar.ToString(), "\\d+"))
          e.Handled = true;
} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T13:36:43.190

我刚看到有什么问题。`if`语句在`try-catch`块内，当它返回时，它直接进入`finally`块。

我刚刚`Close();`从`finally`块转移，现在它工作得很好。

# java - JAX-RS：服务资源顺序

> ID：12074213
> 
> 赞同：0
> 
> 时间：2012-08-22T13:25:19.210
> 
> 标签：java, rest, jax-rs

当前状态： 1\. 在我的 web.xml 中：

```
 <servlet-mapping>
   <servlet-name>javax.ws.rs.core.Application</servlet-name>
   <url-pattern>/rest/*</url-pattern>
  </servlet-mapping> 
```

2.我有两个服务资源，@Path 一样

```
@Path("path")
public class Resource1 {
  //methods annotated with @Path
}

@Path("path")
public class SubResource extends Resource1 {
  //same methods annotated with @Path (are inherited, and not overridden)
} 
```

问题。有没有办法将所有请求重定向到 SubResource 和 Resource1 的“路径”？在目前的情况下，似乎应用服务器（在我的例子中是 JBoss）自己决定取哪个资源，而且并不总是一样的。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:47:21.773

我选择的解决方案是使用不同的@Path。SubResource 现在有了更强大的路径，因为它有更多的文字字符：

```
@Path("path")
public class Resource1 {
  //methods annotated with @Path
}

@Path("/path")//NOTE that the leading slash makes the difference
public class SubResource extends Resource1 {
  //same methods annotated with @Path (are inherited, not overridden)
} 
```

有关 JAX-RS 中的“选择算法”的更多信息，请[点击此处](http://cxf.apache.org/docs/jax-rs-basics.html#JAX-RSBasics-Overviewoftheselectionalgorithm)。

# php - 根据客户地理位置、邮政编码、位置切换图像？

> ID：12074225
> 
> 赞同：0
> 
> 时间：2012-08-22T13:26:06.763
> 
> 标签：php, javascript, jquery, geocode

我的问题很简单，但解决方案可能不是。我公司在全国有多家加盟店。我们一直在为每个地点建立单独的“迷你站点”；但是，我们希望简单地对我们的主站点进行地理编码，以便能够根据用户的位置提供与地理相关的内容。例如，我们的主要电话号码位于标题中 - 如果有人从全国各地访问该网站，则电话号码会切换到他们的本地号码。图像也是如此——我们如何根据用户的邮政编码或位置切换图像？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:53:53.937

1）确定用户位置。

这可以通过多种方式完成，您可能需要查看： http: [//php.net/manual/en/book.geoip.php](http://php.net/manual/en/book.geoip.php)

2）创建一个简单的图像名称与邮政编码数据库

3) 一旦您在步骤 1 中确定了邮政编码，查询数据库以获取图像文件名，然后使用 php 将正确的图像放置在屏幕上。

（当然比这更复杂，但这些是基本步骤）

# ruby-on-rails-3 - 在 jQuery Mobile 中删除确认警报

> ID：12074227
> 
> 赞同：0
> 
> 时间：2012-08-22T13:26:13.140
> 
> 标签：ruby-on-rails-3, jquery-mobile

我正在 Rails 中开发 jQuery mobile。我有一个链接

```
<a class="btn btn-info message-delete-action" data-link-url="/messages/{{id}}/delete" href="#">Delete</a> 
```

我正在尝试在单击删除时添加警报确认

请提出一些解决方案。我已经尝试过，`data-rel="popup"`但我没有收到任何弹出窗口

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:08:15.447

根据您的标记，我认为您可能误解了[JQM 弹出窗口小部件](http://jquerymobile.com/demos/1.2.0-alpha.1/docs/pages/popup/index.html)的工作原理。它的工作方式首先需要为弹出窗口提供标记

像这样的弹出标记（取自文档）

```
<div data-role="popup" id="deleteConfirm" data-overlay-theme="a" data-theme="c" style="max-width:400px;" class="ui-corner-all">
            <div data-role="header" data-theme="a" class="ui-corner-top">
                <h1>Delete Page?</h1>
            </div>
            <div data-role="content" data-theme="d" class="ui-corner-bottom ui-content">
                <h3 class="ui-title">Are you sure you want to delete this page?</h3>
                <p>This action cannot be undone.</p>
                <a href="#" data-role="button" data-inline="true" data-rel="back" data-theme="c">Cancel</a>    
                <a href="#" data-role="button" data-inline="true" data-rel="back" data-transition="flow" data-theme="b">Delete</a>  
            </div>
        </div> 
```

然后在您的链接上，您需要参考`id`弹出窗口的

```
<a href="#deleteConfirm" data-rel="popup" data-position-to="window" data-role="button" data-inline="true" data-transition="pop">Delete</a> 
```

或者您也可以像这样以编程方式调用弹出窗口`$('#deleteConfirm').popup("open")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-15T08:06:06.230

[http://dev.jtsage.com/cdn/simpledialog/latest/jquery.mobile.simpledialog2.js](http://dev.jtsage.com/cdn/simpledialog/latest/jquery.mobile.simpledialog2.js)

将提供一个有助于确认弹出窗口的插件

# jquery - Android上的颜色框问题

> ID：12074236
> 
> 赞同：3
> 
> 时间：2012-08-22T13:26:53.117
> 
> 标签：jquery, jquery-plugins, colorbox

我注意到 Android 上的 Colorbox 存在问题，其中颜色框弹出窗口只是与加载图形一起挂起，然后如果您单击关闭它，您会暂时在下面的颜色框弹出窗口中看到内容（应该已经显示），然后两者弹出窗口关闭。

我检查了[网站上的官方演示](http://www.jacklmoore.com/colorbox/example2/)，发现我在自己的网站上遇到了同样的问题。我遇到问题的手机是运行 Android Ice Cream Sandwich 的 HTC Desire。这个问题在 iOS 或黑莓上不会发生，似乎只是一个奇怪的 Android 故障。

感谢您找到解决方法的任何帮助。主要在此处将其标记为 Colorbox Google Group 已关闭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T15:26:57.957

似乎加载覆盖在完成后没有正确隐藏。幸运的是，使用`onComplete`回调很容易解决这个问题：

```
$(document).ready(function()
{
    $('a.colorbox').colorbox({
        onComplete: function()
        {
            $('#cboxLoadingOverlay, #cboxLoadingGraphic').hide();
        }
    });
}); 
```

这可以确保 loadingOverlay 在使用后被正确隐藏。Colorbox 本身将负责重新显示它。这解决了我的设备的问题。

让我们知道这是否也适合你。

# python - 捕获shell执行输出的简单python命令？

> ID：12074239
> 
> 赞同：3
> 
> 时间：2012-08-22T13:27:02.910
> 
> 标签：python, shell, capture

> **可能重复：**
> [从 python 运行 shell 命令并捕获输出](https://stackoverflow.com/questions/4760215/running-shell-command-from-python-and-capturing-the-output)

当我想捕获 shell 执行输出时，我会这样做。

```
declare TAGNAME=`git describe --tags` 
```

简单的。我在 Python 中寻找过这个，但它们中的大多数看起来都非常复杂。最简单的方法是什么？是的，我知道我可以创建一个函数，但我想知道预定义函数是否存在。

```
tagname = theFunc('git describe --tags') 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T13:29:59.720

尝试：

```
>>> import subprocess
>>> tagname = subprocess.check_output('git describe --tags'.split()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T13:31:09.477

你应该看看[subprocess](http://docs.python.org/library/subprocess.html#module-subprocess)模块。您也可以使用它捕获命令的输出。手册页中有许多如何使用该模块的示例。

例子：

```
output=subprocess.Popen(["ps", "aux"], stdout=subprocess.PIPE,
    stderr=subprocess.PIPE).communicate() 
```

结果是从命令中捕获的带有 stdout 和 stderr 的元组。

# regex - 如何将正则表达式应用于 Matlab 中的单元格数组？

> ID：12074243
> 
> 赞同：5
> 
> 时间：2012-08-22T13:27:17.180
> 
> 标签：regex, matlab, cell-array

我有单元格数组*res*单元格为 3x2，每个单元格都包含一个字符串。我想将正则**表达式**应用于每个单元格，它应该如下所示：

```
fin = cellfun(@regexp(res, '\.', 'split'),res,'UniformOutput',false) 
```

但是它不能完成这项工作。任何人都知道如何正确组合它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T13:46:29.293

你在正确的轨道上，但你的匿名函数的语法是错误的。试试这个：

```
fin = cellfun(@(x)regexp(x, '\.', 'split'), res, 'UniformOutput', false) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T13:05:26.150

如果你有一个单元格“res”，它由数字和字符串组成，并且想在“res”的每个字符中用“b”替换“a”，那么你应该使用以下内容：

```
idx_isNumeric = @(x) any(isnumeric(x));                     
idx_isNumeric2 = cellfun(idx_isNumeric, res);  
res( ~idx_isNumeric2 ) = regexprep( res( ~idx_isNumeric2 ), 'a', 'b'); 
```

希望能帮助到你;）

# java - 如何使用 javadoc.exe 生成翻译后的 javadoc？（不是内容，而是结构）

> ID：12074244
> 
> 赞同：6
> 
> 时间：2012-08-22T13:27:20.900
> 
> 标签：java, translation, javadoc

我正在开发一个 pt_BR 项目，该项目提供最终用户 API 来扩展功能。

我需要生成这些类的 javadoc（在 Java 中），但是，当使用 javadoc.exe 时，输出文档的静态文本而不是内容是英文的。

所以，我想在`pt_BR`.

我试着这样使用：

```
javadoc -locale pt_BR -sourcepath scr -d c:\TEMP 
```

但它没有用。

注意：为了清楚起见，我不打算翻译内容（已经在 中`pt_BR`），而是翻译静态文本（导航栏、标题等）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T16:46:23.277

我们必须在我们的一个项目上这样做。这就是我们所做的：

`tools.jar`首先，我们从 Java文件中反编译了以下类：

*   com\sun\tools\doclets\formats\html\resources\standard.class
*   com\sun\tools\doclets\internal\toolkit\resources\doclets.class

这两个类的行为类似于`.properties`文件：它们唯一的方法返回一个键值对字符串数组。

这些字符串中的大多数是出现在由 Javadoc 创建的 HTML 文件中的字符串，例如导航栏、节标题和帮助页面。

翻译文件后，我们将它们重命名，在它们的名称中添加 _pt_BR。

我们还更改了他们的类的名称，还添加了_pt_BR。

最后，我们编译文件并将它们放入`tools.jar`正确的包中。

之后，Javadoc 的 HTML 输出以葡萄牙语呈现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T16:04:42.393

您必须在 jdk 中找到属性文件并翻译它们。我认为它们位于 tools.jar。我只在网上找到了[JDK 1.3 Doclet 源代码。](http://docs.oracle.com/javase/1.3/docs/tooldocs/javadoc/source/)他们可能会提示您所需的属性文件。

# zend-framework - 如何在 zf2 中安装 ZendRest 模块？

> ID：12074247
> 
> 赞同：1
> 
> 时间：2012-08-22T13:27:28.640
> 
> 标签：zend-framework, zend-framework2, composer-php

我想安装[ZF2 ZendRest 模块](https://github.com/zendframework/ZendRest)。

如何安装它？

当我在做

```
php .\composer.phar install 
```

在\供应商\zendrest。我得到：

```
Loading composer repositories with package information 
Installing dependencies 
Your requirements could not be resolved to an installable set of packages.

  Problem 1
- The requested package zendframework/zend-http 1.0.0 could not be found.
  Problem 2
- The requested package zendframework/zend-uri 1.0.0 could not be found.

Potential causes:
 - A typo in the package name
 - The package is not available in a stable-enough version according to your minimum-    stability setting
   see https://groups.google.com/d/topic/composer-dev/_g3ASeIFlrc/discussion for more details. 
```

我应该把 ZendRest 文件夹放在哪里？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T07:11:35.263

ZendRest 依赖项没有稳定版本：zend-http 和 zend-uri（`show`有关现有版本，请参见下面的输出）。**Composer***默认*依赖于稳定的包。这就是您无法安装此软件包的原因。

```
$ composer show zendframework/zend-http
name     : zendframework/zend-http
descrip. : provides an easy interface for preforming Hyper-Text Transfer Protocol (HTTP) requests
keywords : zf2, http
versions : 2.0.0rc4, 2.0.0rc3, 2.0.0rc2, 2.0.0-rc1, 2.0.0-beta5, 2.0.0-beta4
type     : library
... 
```

您应该在项目中更改`minimum-stability`为`dev`：

```
{
    "require": {
        // ...
    },
    "minimum-stability": "dev"
} 
```

**编辑：**例如以下`composer.json`作品。这是您在自己的项目中应该拥有的（可能有更多的依赖项）：

```
{
    "require": {
        "zendframework/zend-rest": "*" 
    },  
    "repositories": [
        {   
            "type": "composer",
            "url": "http://packages.zendframework.com/"
        }   
    ],  
    "minimum-stability": "dev"
} 
```

# java - “打开方式”对话框

> ID：12074251
> 
> 赞同：2
> 
> 时间：2012-08-22T13:27:35.930
> 
> 标签：java, swing, jfilechooser, open-with

我用Java制作了一个应用程序。我希望在单击 a 时出现一个打开方式对话框`JButton`。

我知道在 Windows 中，推荐程序列表的内容是由注册表项确定的

```
HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\filetype\OpenWithList 
```

..其中“*文件类型*”是必需的文件类型。

有什么方法可以完全独立于运行此应用程序的操作系统来完成此操作？还是我必须相应地获取操作系统名称和程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T13:36:43.837

不完全确定这个答案是否相关，因为我正在做一些假设。如果它是您要打开的文件，您可以使用[`Desktop#open`](http://docs.oracle.com/javase/7/docs/api/java/awt/Desktop.html#open%28java.io.File%29)将`File`使用默认应用程序打开的文件。

我假设（但没有测试）当没有设置默认应用程序时，将显示一个对话框，询问您要使用哪个应用程序打开该文件（类似于在文件浏览器中双击此类文件时）。

这不完全是您所要求的，但可能就足够了。

否则，恐怕我同意安德鲁的回答，即没有一般的方法可以做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:33:44.023

> Is there any way that this can be done with complete independence of the OS in which this app runs?

No.

> Or do I have to get the OS name and program accordingly?

Yes.

# actionscript-3 - as3中的组旋转

> ID：12074254
> 
> 赞同：0
> 
> 时间：2012-08-22T13:27:52.850
> 
> 标签：actionscript-3, blackberry-playbook

请帮我解决一个大问题。

我需要从中心旋转布局（火花组件组），我可以从中心旋转它。但是一旦我旋转它，它就会给我带来锯齿状的边缘。就像我旋转图像时，我可以将其位图平滑设置为 true ，这样锯齿状的边缘就不会出现。但是在组中没有平滑变量请告诉我如何实现这一点。

```
var rotateMatrix:Matrix = group_icons.transform.matrix;
            var rotatePoint:Point =
                rotateMatrix.transformPoint(
                    new Point((515/2), (515/2)));
            rotateMatrix.translate(-rotatePoint.x, -rotatePoint.y);
            var num : Number = getAngleFromMouseCoord(mouseX , mouseY , new Point(0,600) ) ;
            /* if(currentAngle != 0 && currentAngle > num)
            {
                currentAngle = num ; 
                num = -num ; 
            }
            else
                currentAngle = num ; */
            if(direction == true  )
                rotateMatrix.rotate(num/30);
            else
                rotateMatrix.rotate(-num/30);
            rotateMatrix.translate(rotatePoint.x, rotatePoint.y);
            group_icons.transform.matrix = rotateMatrix ; 
```

我在 ENTER_FRAME 事件上调用此函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:10:46.220

查看将 cacheAsBitmap 设置为 true 是否有帮助：

```
 group_icons.cacheAsBitmap = true; 
```

如果不是，您始终可以将组绘制成位图并显示它，但它的孩子不会是交互式的。

```
 var bmdData:BitmapData = new BitmapData(group_icons.width,group_icons.height,true,0x0000000);
 bmdData.draw(group_icons);
 var bmp:Bitmap = new Bitmap(bmdData,"auto",true); 

 // apply transformations to the bmp here

 var uicomponent:UIComponent = new UIComponent();
 uiComponent.addChild(bmp);

 someUIElement.addElement(uicomponent); 
```

您需要使用 UIComponent 包装位图以将其添加到 flex 组件。

# jquery - Jquery将事件绑定到循环中的元素

> ID：12074255
> 
> 赞同：0
> 
> 时间：2012-08-22T13:27:55.453
> 
> 标签：jquery

我有以下代码在 Ajax 调用的回调中执行：

```
jQuery.each(res, function () 
{
 var element = $("<p id=\"" + this.UrlTitle +"\">" + this.Name + "</p>").live('click',function () { alert('hello from binded function call') });
  dataList.append(element);
}); 
```

“res”只是一个格式良好的 JSON 对象，我可以看到我的 html 中的 p 元素也创建得很好。

我的问题是，当我在一个段落中单击时，我会执行 3 个警报（“res”元素的长度为 3），就像绑定针对每个 p 元素完成了 3 次。

是什么导致了这种行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T13:32:35.080

You cannot use `.live` on a DOM element (which is created from the HTML string in this case). `.live` only works with **selectors**. See the list of drawbacks in its [documentation](http://api.jquery.com/live/).

I don't see a reason to use event delegation at all here, just bind the event handler directly to the element using `.on` or the shorthand `.click` (did some extra refactoring ;)):

```
jQuery.each(res, function () {
    $("<p/>", {
         id: this.UrlTitle,
         text: this.Name
     }).on('click', function () { 
         alert('hello from binded function call') 
    }).appendTo(dataList);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:32:21.640

你正在`.live()`以一种相当奇怪的方式使用。`.live()`不能（正确地）在任何旧的 jQuery 对象上使用。使用`.click()`或`.on()`：

```
$.each(res, function () 
{
 var element = $("<p id=\"" + this.UrlTitle +"\">" + this.Name + "</p>").on('click', function () { alert('hello from binded function call') });
  dataList.append(element);
}); 
```

* * *

### 然而...

[有一个**更好**的语法](http://api.jquery.com/jQuery/#jQuery2)来创建具有各种属性和事件监听器的 jQuery 对象：

```
$.each(res, function () 
{
    $("<p/>", {
        id: this.UrlTitle,
        text: this.Name,
        click: function () {
            alert('hello from binded function call')
        }
    ).appendTo(dataList);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T13:32:23.933

使用`on()`方法而不是`live()`方法。我认为正在发生的事情是事件被附加到父级 3 次（`live()`使用事件委托），因此每次单击 a 时`p`它都会触发三个附加的处理程序。

`on()`可以使用事件委托，但内部工作方式不同`live()`

```
jQuery.each(res, function () 
{
 var element = $("<p id=\"" + this.UrlTitle +"\">" + this.Name + "</p>").on('click',function () { alert('hello from binded function call') });
  dataList.append(element);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T13:36:13.337

如果您使用 .live() 并且没有添加 onclick 属性，或者它不应该在该循环中。

Live 的行为类似于 CSS，即使元素是在页面上动态创建的，也会被绑定。如果您使用 bind('click', ....) 或 on('click', ....) 它不会那样工作。它需要像您在此处所做的那样在该元素上显式设置。

您正在做的实际上是将一个新的 onclick 事件绑定到每个带有 #this.UrlTitle 的元素，用于该循环的每次迭代。

这就是您收到三个警报的原因。使用 jQuery on() 或 bind() 或像使用 id 一样设置 onclick ... onclick="alert('....');"。

# dll - 如何从另一台机器调用 VB6 DLL（DLL 即服务）

> ID：12074260
> 
> 赞同：0
> 
> 时间：2012-08-22T13:28:05.513
> 
> 标签：dll, vb6, windows-services, client-server, desktop-application

我有一个作为安装文件分发的 vb6-mysql 客户端-服务器桌面应用程序。

它使用 DLL 的所有逻辑操作以及数据库操作。EXE 和 DLL 安装在服务器和客户端机器中。当我说服务器仅意味着数据库驻留在该机器中时，EXE 或 DLL 没有其他区别。

当从客户端机器连接时，所有数据库操作都在 DLL 中完成，因此性能会降低。现在不可能将所有逻辑都更改为数据库。

*   是否可以仅将 DLL 存储在服务器计算机中并由客户端计算机使用相同的 DLL，以便数据库连接始终来自服务器本身？

*   将 DLL 转换为 Windows 服务是可能的解决方案吗？

*   如何将其转换为服务？
*   最后，如果可以使 DLL 充当服务，那么连接问题会是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:02:26.003

您似乎正在尝试重新发现 n 层应用程序开发。

*在 LAN*中使用 VB6 完成此操作的常用方法是创建 ActiveX EXE 而不是 DLL，以便您可以使用 DCOM。但是 DCOM 不是您想通过 Internet 公开的东西。

对于这种情况，更典型的做法是使用 HTTP 或 HTTPS 等通用开放端口协议。几乎每个人都有防火墙设置，允许出站 HTTP 和 HTTPS 连接，并且大多数主要 Web 服务器都经过定期加固，以使它们更安全地暴露在 Internet 上。

使用 VB6 执行此操作的经典方法是使用 IIS 来托管远程数据服务，该服务使用一种“幕后”的 Web 服务形式，您的程序不会处理血淋淋的细节。然而，这是一种已弃用的方法，如今配置 IIS 和 RDS 组件可能是一件苦差事，因为它们在默认情况下被硬锁定。

这给您留下了诸如已弃用的 SOAP 工具包或诸如 PocketSOAP 套件中的第 3 方工具之类的东西……或者您可以自己动手。

从头开始这样做可能需要一些工作，但更灵活，允许使用 REST 代替本身具有优势的 SOAP。您可以使用您选择的任何可以与 VB6 一起工作的 Web 服务器（通过 CGI 等）。

从表面上看，最难证明的方法似乎是最简单的：通过 TCP 创建您自己的协议并编写一个 Windows 服务。这可能是所有选项中最灵活的，但它可能比其他选项需要更多的工作，并且您可以自行完成并确保其安全。您可能还会遇到防火墙问题，具体取决于您的客户端所在的位置以及那里的本地防火墙策略。

当我们可以依赖 DCOM 时，除了安全配置问题之外，问题相对较小。有了互联网，情况就完全不同了。

这真的不是你随便做的事情。即使假设您的数据库安全地暴露在 Internet 上也是幼稚的，应该重新考虑。

# php - ffmpeg：在php中使用返回的数据

> ID：12074267
> 
> 赞同：0
> 
> 时间：2012-08-22T13:28:22.523
> 
> 标签：php, ssh, ffmpeg, backticks

我已经开始使用`ffmpeg`了，我对它很陌生，所以请多多包涵。

我已经安装`ffmpeg`在我的服务器上，效果很好；通过 ssh 登录时，我可以运行某些命令并获取输出数据

例如我可以运行

```
ffmpeg -i Sleep\ Away.mp3 
```

它返回以下内容：

```
ffmpeg version 0.8.5, Copyright (c) 2000-2011 the FFmpeg developers
  built on Aug 20 2012 09:28:43 with clang 3.1 (tags/Apple/clang-318.0.61)
  configuration: --enable-nonfree --enable-gpl --enable-version3 --enable-postproc --enable-swscale --enable-avfilter --enable-libmp3lame --enable-libvorbis --enable-libtheora --enable-libfaac --enable-libxvid --enable-libx264 --enable-libvpx --enable-hardcoded-tables --enable-shared --enable-pthreads --disable-indevs --cc=clang
  libavutil    51\.  9\. 1 / 51\.  9\. 1
  libavcodec   53\.  7\. 0 / 53\.  7\. 0
  libavformat  53\.  4\. 0 / 53\.  4\. 0
  libavdevice  53\.  1\. 1 / 53\.  1\. 1
  libavfilter   2\. 23\. 0 /  2\. 23\. 0
  libswscale    2\.  0\. 0 /  2\.  0\. 0
  libpostproc  51\.  2\. 0 / 51\.  2\. 0
[mp3 @ 0x7f9694011a00] Header missing
    Last message repeated 13 times
[mp3 @ 0x7f9694007c00] max_analyze_duration 5000000 reached at 5007020
[mp3 @ 0x7f9694007c00] Estimating duration from bitrate, this may be inaccurate
Input #0, mp3, from 'Sleep Away.mp3':
  Metadata:
    track           : 3
    album           : Bob Acri
    artist          : Bob Acri
    title           : Sleep Away
    genre           : Jazz
    album_artist    : Bob Acri
    composer        : Robert R. Acri
    date            : 2004
  Duration: 00:03:21.77, start: 0.000000, bitrate: 192 kb/s
    Stream #0.0: Audio: mp3, 44100 Hz, stereo, s16, 192 kb/s
At least one output file must be specified 
```

我要问的问题是，如何使用上面的输出数据？我正在开发一个音乐网站；假设我想遍历所有 MP3 文件并将有关它们的信息保存到数据库中，以便上述结果：

```
Sleep Away.mp3    mp3    3:21    Jazz    2004     Bob Acri ... 
```

显然在一张桌子上

到目前为止，我尝试使用 php*反引号*运算符但没有成功。我只是想我会在这里提出一个问题，以从做过类似事情的人那里获得一些建议。

谢谢

**更新**：我尝试了以下

```
<?php $output = `ffmpeg -i Sleep\ Away.mp3`; echo "<pre>$output</pre>"; ?>
<?php $output = shell_exec('ffmpeg -i Sleep\ Away.mp3'); echo "<pre>$output</pre>"; ?> 
```

两者似乎都没有返回任何东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T13:51:02.383

`ffmpeg`发送有关标准**错误**的信息，而不是捕获的标准*输出。*`shell_exec()`

您需要`2>&1`在命令末尾添加：

```
$out = shell_exec('/path/to/ffmpeg -i Sleep\ Away.mp3 2>&1'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T13:32:50.307

So you want to execute a shell command (ffmpeg in your case) from php, and capture its output, right?

Backtick Operator or the [shell_exec](http://php.net/manual/de/function.shell-exec.php) function are a good start for that.

Note that these only work when safe mode is disabled and when shell_exec function is not disabled (via disable_functions setting). If your scripts are running on a shared hoster, you might not have access to these configurations, but you should at least be able to check them via phpinfo().

How you specify the path to any file you are referencing in the command is also crucial - your php script might not run with the working folder you expect it to run; so it might be best to reference to all files via absolute path.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T22:18:35.860

**改用[FFprobe](http://ffmpeg.org/ffprobe.html)：**

```
ffprobe -loglevel error -show_format -show_streams input.mp3 
```

FFmpeg 用于处理视频，FFprobe 是获取视频信息的配套工具。它以各种易于解析的格式输出数据，而不需要解析 FFmpeg 在导入视频时偶然吐出的诊断消息。

# ruby - Ruby 1.9.3-p140 - Ruby 程序中的最大线程数？

> ID：12074271
> 
> 赞同：1
> 
> 时间：2012-08-22T13:28:54.780
> 
> 标签：ruby, multithreading, thread-safety, mutex, fibers

我正在玩 Thread，我发现我无法运行 10000 个线程。

它给了我以下错误：

```
 threading.rb:23:in `initialize': can't create Thread (35) (ThreadError)
        from threading.rb:23:in `new'
        from threading.rb:23:in `block in <main>'
        from threading.rb:22:in `times'
        from threading.rb:22:in `<main>' 
```

然后我尝试查看最大数量是多少，当我组成 2046 个线程时，Ruby 将运行代码。

为什么是 2046？它似乎遵循一种记忆模式，如 512、1024、2046...

threading.rb 代码：

```
 threads = []
    counter = 1000

    ARGV.each do |a|
      counter = a.to_i
    end

    lines = 0

    counter.times do |i|
      puts "This is index number #{i}."
    end

    puts "You've just seen the normal printing and serial programming.\n\n"

    counter.times do |i|
      Thread.new do
        some_number = Random.rand(counter)
        sleep 1
        puts "I'm thread number #{i}. My random number is #{some_number}.\n"
        lines += 1
      end
    end

    messaged = false
    while lines < counter
      puts "\nWaiting to finish.\n" unless messaged
      print '.'
      puts "\n" if lines == counter
      messaged = true
    end

    puts "\nI've printed #{lines} lines.\n"
    puts "This is end of the program." 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-15T05:32:10.207

OS X 将一个进程可以产生的线程数限制为 2046。这也适用于 Ruby。

来源&完整解释：[“多少线程太多了？”](http://www.jstorimer.com/blogs/workingwithcode/7970125-how-many-threads-is-too-many)

> 在 OSX 上，一个进程可以产生的线程数有一个硬性限制。在最近的版本中，**这个限制大约是 2000 个线程。**
> 
> ...
> 
> 如果我在 Linux 机器上运行同样的代码**，我可以**不眨眼地产生 10,000 个线程。因此，可以生成很多线程，但您可能不想这样做。

这是一个您可以运行以查看限制的测试程序。

```
1.upto(10_000) do |i|
  Thread.new { sleep }
  puts i
end 
```

# bash - 在文件夹 SVN 中查找最旧的项目

> ID：12074272
> 
> 赞同：1
> 
> 时间：2012-08-22T13:28:56.970
> 
> 标签：bash, svn

我想编写一个 bash 脚本，它将在 SVN 中存储网站的 10 个备份，每晚备份一次，然后删除最旧的备份。

是否有一个 SVN 命令我可以在 svn 中获取这些文件的年龄，然后我可以在该文件上以语法方式调用“svn delete”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T02:52:47.950

听起来您并不了解 Subversion 的工作原理。

Subversion 是一个版本控制系统。您实际上是反过来使用它，您在 Subversion 中编写您的网页和 JavaScript，然后将您的网页从 Subversion 部署到您的网站。您拥有 Subversion 中所有文件的完整历史记录，并使用其功能（例如创建标签来标记网站的特定修订）。通过这种方式，您可以找出谁进行了更改以及进行更改的原因。

听起来您只是想备份您的网站，然后删除最旧的备份以节省空间。

您应该研究一下[rsync](http://linux.die.net/man/1/rsync)，它非常适合备份。Rsync 速度很快，而且使用起来非常简单。

您可以查看[Subversion 在线手册](http://svnbook.com)并阅读前两章或三章。它将解释如何使用 Subversion，它是目前开源软件的最佳手册之一。读完之后，你可能最终决定使用 Subversion，但不是用于备份，而是用于开发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T21:29:03.760

Subversion 绝对不是这项工作的工具。一旦你将某些东西提交给颠覆，就没有实际的方法可以删除它。

使用 bash 中的标准命令有很多方法可以实现您的目标。您可以使用 ftp、wget、curl、scp、ssh 或其他工具下载您的站点文件，然后根据日期使用不同的文件名 tar 和压缩它们。

```
#!/bin/bash

DELETEME='htdocs_'`date '+%Y%m%d' -d '-10 days'`'.tar.gz'
NEW='htdocs_'`date '+%Y%m%d'`'.tar.gz'
SOURCE='/path/on/server/to/backup'
HOST='IP_or_hostname'
USER='user_on_HOST'

ssh $USER@$HOST tar czvf - $SOURCE > $NEW
rm -v $DELETEME 
```

然后将其安排为每日 cron 作业。

# objective-c - 将所选颜色变量从 UIButton 传递到另一个视图

> ID：12074275
> 
> 赞同：0
> 
> 时间：2012-08-22T13:29:02.013
> 
> 标签：objective-c, xcode

我正在使用 Objective-C 中的最新 xcode 进行编码，过去两天我几乎陷入了困境。我正在制作一个应用程序，允许用户选择他们穿什么颜色的衣服。例如，如果我穿着黑白衬衫，我可以选择服装 = 衬衫，颜色 = 黑白。

这是我的应用程序外观的屏幕截图：（您在此处看到的所有内容都是 UIButtons，因此您可以单击它们，对于颜色，我已对其进行了设置，因此您选择的颜色将突出显示）

![我的应用程序]：http: [//imgur.com/w7kvX,o6YbK#0](http://imgur.com/w7kvX,o6YbK#0) "myApp"

所以在第一张图片中，你会选择你的衣服，一旦你点击按钮，第二个视图就会出现在这里，你可以选择颜色。到目前为止，一切都很好。但是当我想使用选择的颜色返回第一个视图时遇到了一些问题。如果我选择黑白作为衬衫颜色，我希望我的应用程序带回该数据并将“衬衫”按钮的背景颜色更改为黑白，以向用户指示您选择的颜色。'

到目前为止，这是我的代码。

changeClothes.h（第一个视图）：[http ://pastebin.com/xPMNAnCY](http://pastebin.com/xPMNAnCY)

changeClothes.m：[http ://pastebin.com/MdjMPK6r](http://pastebin.com/MdjMPK6r)

chooseColors.h（第二个视图）： http: [//pastebin.com/Zb4aXvzV](http://pastebin.com/Zb4aXvzV)

选择Colors.m：[http://pastebin.com/RHTxfwW5](http://pastebin.com/RHTxfwW5)

任何帮助，将不胜感激。

很多，很多，非常感谢提前。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T13:48:35.380

您可以使用委托模式！为您的 chooseColors 类定义一个协议，并使 changeClothes 类实现此协议。然后 changeClothes 类作为 chooseColors 类的代表。在 chooseColors 类中，当通过按钮选择颜色时，使用此事件调用委托！回到 changeClothes 类，您可以关闭模​​态 chooseColors 控制器并根据所选颜色在 changeClothes 控制器中执行一些操作。

更多关于委托模式：[Cocoa Core Competencies](https://developer.apple.com/library/ios/#documentation/General/Conceptual/DevPedia-CocoaCore/Delegation.html) （在底部你有一个来自苹果的示例项目的参考）

另请查看可可的编码指南！您错误地命名了您的类，请参阅：[Coding Guidelines for Cocoa](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CodingGuidelines/CodingGuidelines.html#//apple_ref/doc/uid/10000146i)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:44:02.337

（我没有足够的代表发表评论，所以求助于回答。如果有帮助，你真的应该给 Nenad 打绿色复选标记）

基于@Nenad 的回答：查看 Apple 文档的“[与对象通信](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CocoaFundamentals/CommunicatingWithObjects/CommunicateWithObjects.html#//apple_ref/doc/uid/TP40002974-CH7-SW18)”部分。它更详细地解释了委托。

# asp.net - 实体框架嵌套 lambda 查询

> ID：12074276
> 
> 赞同：0
> 
> 时间：2012-08-22T13:29:07.323
> 
> 标签：asp.net, entity-framework

在 Linq2Sql 中，可以进行如下查询：

```
using (var db = GetDataContent())
            {
                var query = from p in db.Brands
                            where p.Deleted == false
                            select new BrandImageSummary
                            {
                                BrandID = p.BrandID,
                                BrandUrl = p.BrandUrl,
                                Description = p.Description,
                                MetaDescription = p.MetaDescription,
                                MetaKeywords = p.MetaKeywords,
                                MetaTitle = p.MetaTitle,
                                BrandImageUrl = (from p2 in db.SiteImages where p2.FileTypeID == 5 && p2.ForeignID == p.BrandID && p2.Deleted == false orderby p2.Rank select p2.Filename).FirstOrDefault(),
                                Deleted = p.Deleted,
                                SupplierCode = p.SupplierCode,
                                Title = p.Title,
                                Website = p.Website
                            };

                return query.ToList();
            } 
```

BrandImageUrl 是一个嵌套选择。但是在实体框架中，我似乎得到了错误：

> 无法创建“SiteImage”类型的常量值。此上下文仅支持原始类型或枚举类型。

有没有办法在实体框架中做到这一点？

查询的想法是获得一个品牌形象，如果我要加入，并且有多个图像，我会得到多行，我不想要这个。

我正在使用实体框架 5。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:32:36.037

You should create a one-to-many relation in your model classes.

You can then write

```
BrandImageUrl = p.BrandImages
                 .Where(i => i.FileTypeID == 5 && !i.Deleted)
                 .OrderBy(i => i.Rank)
                 .Select(i => i.FileName)
                 .FirstOrDefault() 
```

# c - 非守护进程中的 rsync

> ID：12074279
> 
> 赞同：1
> 
> 时间：2012-08-22T13:29:21.223
> 
> 标签：c, linux, rsync

我想知道 rsync 在非守护程序模式下是如何工作的，它到底是什么？

从 rsync 手册页中，我了解了守护程序模式的工作原理。我对守护程序模式有所了解。守护进程是一个在后台持续监听连接的进程。

现在，场景是，我不想使用守护程序模式，因为它需要一些专用端口始终处于监听状态。

我想知道，非守护模式下的客户端（比如本地机器）如何在技术上调用服务器（比如远程机器）上的 rsync 监听器，反之亦然？这种方法的原因是，**我不希望客户端事先知道服务器的端口号**。任何详细的解释将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:11:15.727

从 rsync 手册页：

> rsync 有两种不同的方式联系远程系统：使用 remote-shell 程序作为传输（例如 ssh 或 rsh）或直接通过 TCP 联系 rsync 守护进程。

因此，在非守护程序模式下，您可以使用 ssh 连接和更新您的客户端。在这种情况下，通过 ssh 的初始连接将设置客户端，以便 rsync 可以在不知道端口号的情况下进行连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T19:29:15.230

这回答了我的问题：

我发现它如何在非守护程序模式下调用远程 rsync。在**本地**：如果命令是：- rsync -avz -e ssh remoteuser@remotehost:/remote/dir /this/dir/ 此命令将在本地**启动另一个进程**：- **ssh -l remoteuser 192.168.xx.xxx -vlogDtprze.iLsf 。/远程/目录**

这个 ssh 命令**在远程机器上调用 rsync**为：rsync --server -vlogDtprze.iLsf。/远程/目录/

并以任意端口号开头。但是数据通信是通过 ssh 进行的（端口 22 需要打开）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T16:35:32.373

它通过 ssh 调用 rsync 在这种情况下您不需要运行守护进程

# c++ - 为什么 Opencv GPU 代码比 CPU 慢？

> ID：12074281
> 
> 赞同：14
> 
> 时间：2012-08-22T13:29:33.157
> 
> 标签：c++, opencv, gpu

我在笔记本上使用opencv242 + VS2010。
我试图在 OpenCV 中对 GPU 块进行一些简单的测试，但它显示 GPU 比 CPU 代码慢 100 倍。在这段代码中，我只是将彩色图像转为灰度图像，使用**cvtColor的功能**

这是我的代码，PART1 是 CPU 代码（测试 cpu RGB2GRAY），PART2 是上传图像到 GPU，PART3 是 GPU RGB2GRAY，PART4 是 CPU RGB2GRAY。有3件事让我很想知道：

1 在我的代码中，part1 为 0.3ms，而 part4（与 part1 完全相同）为 40ms！！！
2 上传图片到GPU的part2是6000ms！！！
3 Part3（GPU代码）是11ms，对于这个简单的图像来说太慢了！

```
 #include "StdAfx.h"
    #include <iostream>
    #include "opencv2/opencv.hpp"
    #include "opencv2/gpu/gpu.hpp"
    #include "opencv2/gpu/gpumat.hpp"
    #include "opencv2/core/core.hpp"
    #include "opencv2/highgui/highgui.hpp"
    #include <cuda.h>
    #include <cuda_runtime_api.h>
    #include <ctime>
    #include <windows.h>

    using namespace std;
    using namespace cv;
    using namespace cv::gpu;

    int main()
    {
        LARGE_INTEGER freq;
        LONGLONG QPart1,QPart6;
        double dfMinus, dfFreq, dfTim;
        QueryPerformanceFrequency(&freq);
        dfFreq = (double)freq.QuadPart;

        cout<<getCudaEnabledDeviceCount()<<endl;
        Mat img_src = imread("d:\\CUDA\\train.png", 1);

        // PART1 CPU code~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        // From color image to grayscale image.
        QueryPerformanceCounter(&freq);
        QPart1 = freq.QuadPart;
        Mat img_gray;
        cvtColor(img_src,img_gray,CV_BGR2GRAY);
        QueryPerformanceCounter(&freq);
        QPart6 = freq.QuadPart;
        dfMinus = (double)(QPart6 - QPart1);
        dfTim = 1000 * dfMinus / dfFreq;
        printf("CPU RGB2GRAY running time is %.2f ms\n\n",dfTim);

        // PART2 GPU upload image~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        GpuMat gimg_src;
        QueryPerformanceCounter(&freq);
        QPart1 = freq.QuadPart;
        gimg_src.upload(img_src);
        QueryPerformanceCounter(&freq);
        QPart6 = freq.QuadPart;
        dfMinus = (double)(QPart6 - QPart1);
        dfTim = 1000 * dfMinus / dfFreq;
        printf("Read image running time is %.2f ms\n\n",dfTim);

        GpuMat dst1;
        QueryPerformanceCounter(&freq);
        QPart1 = freq.QuadPart;

        /*dst.upload(src_host);*/
        dst1.upload(imread("d:\\CUDA\\train.png", 1));

        QueryPerformanceCounter(&freq);
        QPart6 = freq.QuadPart;
        dfMinus = (double)(QPart6 - QPart1);
        dfTim = 1000 * dfMinus / dfFreq;
        printf("Read image running time 2 is %.2f ms\n\n",dfTim);

        // PART3~ GPU code~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
        // gpuimage From color image to grayscale image.
        QueryPerformanceCounter(&freq);
        QPart1 = freq.QuadPart;

        GpuMat gimg_gray;
        gpu::cvtColor(gimg_src,gimg_gray,CV_BGR2GRAY);

        QueryPerformanceCounter(&freq);
        QPart6 = freq.QuadPart;
        dfMinus = (double)(QPart6 - QPart1);
        dfTim = 1000 * dfMinus / dfFreq;
        printf("GPU RGB2GRAY running time is %.2f ms\n\n",dfTim);

        // PART4~CPU code(again)~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

        // gpuimage From color image to grayscale image.
        QueryPerformanceCounter(&freq);
        QPart1 = freq.QuadPart;
        Mat img_gray2;
        cvtColor(img_src,img_gray2,CV_BGR2GRAY);
        BOOL i_test=QueryPerformanceCounter(&freq);
        printf("%d \n",i_test);
        QPart6 = freq.QuadPart;
        dfMinus = (double)(QPart6 - QPart1);
        dfTim = 1000 * dfMinus / dfFreq;
        printf("CPU RGB2GRAY running time is %.2f ms\n\n",dfTim);

        cvWaitKey();
        getchar();
        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2015-06-07T12:40:16.843

上面的大多数答案实际上都是错误的。它之所以慢 20.000 倍的原因当然不是因为“CPU 时钟速度更快”和“它必须将其复制到 GPU”（已接受的答案）。这些都是因素，但是说你忽略了一个事实，即你有更多的计算能力来解决一个令人作呕的并行问题。说 20.000 倍的性能差异是因为后者实在是太荒谬了。这里的作者知道出了点问题，这不是直截了当的。解决方案：

**您的问题是 CUDA 需要初始化！**它总是会初始化第一张图像，通常需要 1-10 秒，具体取决于木星和火星的对齐方式。现在试试这个。计算**两次**，然后对它们都计时。在这种情况下，您可能会看到速度在同一数量级内，而不是 20.000 倍，这太荒谬了。你能对这个初始化做点什么吗？不，不是我所知道的。这是一个障碍。

编辑：我刚刚重新阅读了这篇文章。你说你在笔记本上运行。那些通常有破旧的 GPU 和 CPU 的涡轮增压。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-08-22T13:55:37.103

cvtColor 并没有做太多的工作，要制作灰色，你所要做的就是平均三个数字。

CPU 上的 cvColor 代码使用 SSE2 指令一次处理多达 8 个像素，如果你有 TBB，它使用所有内核/超线程，CPU 以 GPU 时钟速度的 10 倍运行，最后你不必将数据复制到 GPU 上并返回。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-24T05:36:31.897

尝试多次运行....

------------摘自[http://opencv.willowgarage.com/wiki/OpenCV%20GPU%20FAQ](http://opencv.willowgarage.com/wiki/OpenCV%20GPU%20FAQ) 性能

为什么第一个函数调用很慢？

这是因为初始化开销。在第一个 GPU 函数调用中，Cuda Runtime API 被隐式初始化。在第一次使用时，还会为您的视频卡编译一些 GPU 代码（即时编译）。因此，对于性能测量，有必要进行虚拟函数调用，然后才执行时间测试。

如果应用程序只运行一次 GPU 代码很重要，则可以使用在多次运行中保持不变的编译缓存。请阅读 nvcc 文档了解详细信息（CUDA_DEVCODE_CACHE 环境变量）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-12T03:17:59.400

cvtColour 是一个小操作，在 GPU 上执行此操作所获得的任何性能提升都远远超过主机 (CPU) 和设备 (GPU) 之间的内存传输时间。最小化这种内存传输的延迟是任何 GPU 计算的主要挑战。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-16T13:22:52.677

你有什么GPU？

检查计算兼容性，也许是这个原因。

[https://developer.nvidia.com/cuda-gpus](https://developer.nvidia.com/cuda-gpus)

> 这意味着对于具有 CC 1.3 和 2.0 二进制映像的设备，已准备好运行。对于所有较新的平台，1.3 的 PTX 代码是 JIT 到二进制图像。对于具有 CC 1.1 和 1.2 的设备，1.1 的 PTX 是 JIT 的。对于具有 CC 1.0 的设备，没有可用的代码并且函数会抛出异常。对于首先执行 JIT 编译的平台，运行速度很慢。

[http://docs.opencv.org/modules/gpu/doc/introduction.html](http://docs.opencv.org/modules/gpu/doc/introduction.html)

# python - Python：需要提示从文本文件中读取数据块

> ID：12074284
> 
> 赞同：0
> 
> 时间：2012-08-22T13:29:45.697
> 
> 标签：python, parsing, loops

我有一个包含如下数据的文件：

```
# 0 867.691994 855.172889 279.230411 -78.951239 55.994189 -164.824148
# 0 872.477810 854.828159 279.690170 -78.950558 55.994391 -164.823700
...
893.270609 1092.179289 184.692319
907.682255 1048.809187 112.538457
...
# 0 877.347791 854.481104 280.214892 -78.949869 55.994596 -164.823240
...
893.243290 1091.395104 184.726720
907.682255 1048.809187 112.538457
...
# 0 882.216053 854.135168 280.745489 -78.948443 55.996206 -164.821887 
```

我想通过以下方式仅读取注释行之间的行：我将两个相邻注释之间的所有行读入某个数组（不保存到文件中），然后使用它，然后将下一个块读入数组，等等。

我设法使它读取一个块：

```
def main():
    sourceFile = 'test.asc'
    print 'Extracting points ...'
    extF = open(sourceFile, 'r')
    block, cursPos = readBlock(extF)
    extF.close()
    print 'Finished extraction'

def readBlock(extF):
    countPnts = 0
    extBlock = []
    line = extF.readline()
    while not line.startswith('#'):
        extPnt = Point(*[float(j) for j in line.split()])
        countPnts += 1
        extBlock.append(extPnt)
        line = extF.readline()

    cursPos = extF.tell()
    print 'Points:', countPnts
    print 'Cursor position:', cursPos
    return extBlock, cursPos 
```

它完美地工作，但仅适用于一个数据块。我不能让它在从一个块到另一个块的注释行之间迭代。我正在考虑光标位置，但无法意识到这一点。请给我一些提示。谢谢你。

**更新** 我实现了 MattH 的想法如下：

```
def blocks(seq):
    buff = []
    for line in seq:
        if line.startswith('#'):
            if buff:
                #yield "".join(buff)
                buff = []
        else:
            # I need to make those numbers float
            line_spl = line.split()
            pnt = [float(line_spl[k]) for k in range(len(line_spl))]
            #print pnt
            buff.append(Point(*pnt))
    if buff:
        yield "".join(buff) 
```

然后，如果我运行它：

```
for block in blocks(extF.readlines()):
    print 'p' 
```

我只有空窗口，虽然`print 'p'`在`for`-loop 里面。所以，有几个问题：

什么是

```
if buff:
    yield "".join(buff) 
```

做？当我发表评论时，它没有任何改变......

为什么`for`-loop 内的命令不起作用？

这个函数是生成器，所以我无法访问之前处理过的行，是吗？

**解决方案**

我设法自己使用了 MattH 和 Ashwini Chaudhari 的想法。最后，我得到了这个：

```
def readBlock(extF):
    countPnts = 0
    extBlock = []
    line = extF.readline()
    if line.startswith('#'):
        line = extF.readline()
    else:
        while not line.startswith('#'):
            extPnt = Point(*[float(j) for j in line.split()])
            countPnts += 1
            extBlock.append(extPnt)
            line = extF.readline()

    return extBlock, countPnts 
```

并运行它：

```
while extF.readline():
    block, pntNum = readBlock(extF) 
```

它完全按照我的需要工作。

谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T13:39:42.913

这里有两个简单的生成器，一个生成所有非注释块，另一个只生成注释之间的非注释块。针对两种不同的可能性进行了更新，并更新了线分割和加入相同的功能以保持一致性。

```
sample = """Don't yield this
# 0 867.691994 855.172889 279.230411 -78.951239 55.994189 -164.824148
# 0 872.477810 854.828159 279.690170 -78.950558 55.994391 -164.823700
...
893.270609 1092.179289 184.692319
907.682255 1048.809187 112.538457
...
# 0 877.347791 854.481104 280.214892 -78.949869 55.994596 -164.823240
...
893.243290 1091.395104 184.726720
907.682255 1048.809187 112.538457
...
# 0 882.216053 854.135168 280.745489 -78.948443 55.996206 -164.821887
Don't yield this either"""

def blocks1(text):
  """All non-comment blocks"""
  buff = []
  for line in text.split('\n'):
    if line.startswith('#'):
      if buff:
        yield "\n".join(buff)
        buff = []
    else:
      buff.append(line)
  if buff:
    yield "\n".join(buff)

def blocks2(text):
  """Only non-comment blocks *between* comments"""
  buff = None
  for line in text.split('\n'):
    if line.startswith('#'):
      if buff is None:
        buff = []
      if buff:
        yield "\n".join(buff)
        buff = []
    else:
      if buff is not None:
        buff.append(line)

for block in blocks2(sample):
  print "Block:\n%s" % (block,) 
```

产生：

```
Block:
...
893.270609 1092.179289 184.692319
907.682255 1048.809187 112.538457
...
Block:
...
893.243290 1091.395104 184.726720
907.682255 1048.809187 112.538457
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:43:47.547

数据.txt：

```
123456
1234
# 0 867.691994 855.172889 279.230411 -78.951239 55.994189 -164.824148
# 0 872.477810 854.828159 279.690170 -78.950558 55.994391 -164.823700
...
893.270609 1092.179289 184.692319
907.682255 1048.809187 112.538457
...
# 0 877.347791 854.481104 280.214892 -78.949869 55.994596 -164.823240
...
893.243290 1091.395104 184.726720
907.682255 1048.809187 112.538457
...
# 0 882.216053 854.135168 280.745489 -78.948443 55.996206 -164.821887
1234
12345 
```

程序：

```
with open('data.txt') as f:
    lines=[x.strip() for x in f if x.strip()]
    for i,x in enumerate(lines):  #loop to find the first comment line
        if x.startswith('#'):
            ind=i
            break
    for i,x in enumerate(lines[::-1]): #loop to find the first comment line from the end
        if x.startswith('#'):
            ind1=i
            break
    for x in lines[ind+1:-ind1-1]:
        if not x.startswith('#'):
            print x 
```

**输出：**

```
...
893.270609 1092.179289 184.692319
907.682255 1048.809187 112.538457
...
...
893.243290 1091.395104 184.726720
907.682255 1048.809187 112.538457
... 
```

# php - html2pdf 嵌入 SVG 文件

> ID：12074285
> 
> 赞同：4
> 
> 时间：2012-08-22T13:29:48.200
> 
> 标签：php, svg, draw, html2pdf

我正在尝试使用 html2pdf 自动创建可能需要打印的小册子，因此需要某些元素基于矢量。该课程已无可救药地记录在案，并且我在尝试嵌入 SVG 时遇到了困难。

如果我只是尝试将 SVG 嵌入 HTML 中以输出，`<embed src="img/test.svg" type="image/svg+xml" />`那么我会收到一条错误消息，指出尚不存在使用此标签的必要方法，标签也是如此`<object>`。

进一步挖掘，这些示例似乎显示了某种专有`<draw>`标签，其中包含绘制 SVG 所需的所有坐标。但是我在任何地方都找不到任何文档来解释如何生成这些？

有没有人使用 html2pdf 成功地将 SVG 嵌入到 PDF 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:26:49.860

好吧，我已经部分弄清楚了，标签似乎`<draw>`只包含 SVG 文件的内容（从 Illustrator 保存为 SVG 时“显示 SVG 代码”），但事实证明 html2pdf 不支持贝塞尔曲线，这使它很漂亮对大多数事情都没用。

# python - 在 python 2.7 中导入 urllib2 失败

> ID：12074289
> 
> 赞同：1
> 
> 时间：2012-08-22T13:29:59.213
> 
> 标签：python, urllib2

当我尝试导入 urllib2 时，出现以下错误

> ```
> import urllib2
> File "/usr/lib/python2.7/urllib2.py", line 94, in <module>
> import httplib
> File "/usr/lib/python2.7/httplib.py", line 79, in <module>
> import mimetools
> File "/usr/lib/python2.7/mimetools.py", line 6, in <module>
> import tempfile
> File "/usr/lib/python2.7/tempfile.py", line 34, in <module>
> from random import Random as _Random
> ImportError: cannot import name Random 
> ```

我知道没有名为 Random 的模块，但我确实检查了 urllib2.py 并且有导入 Random 的代码。

我正在使用 Python 2.7

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T13:34:18.307

Maybe you have a `random.py` file or module on your pythonpath so python search in it to find `random.Random` (that exists on python2.7).

# asp.net - asp:ImageButton 的图像使用相对路径显示，但不使用绝对路径

> ID：12074297
> 
> 赞同：2
> 
> 时间：2012-08-22T13:30:29.277
> 
> 标签：asp.net, imagebutton

```
<asp:ImageButton runat="server" ID="cal_btn1"
        AlternateText="image" ImageUrl="~/Images/calendar_icon1.png"/> 
```

图像使用上面的代码显示，但我不知道当我使用绝对路径时会发生什么 -

```
<asp:ImageButton runat="server" ID="cal_btn1"
        AlternateText="image" ImageUrl="C:\Users\adwivedi\Documents\Visual Studio 2010\WebSites\WebSite1\Images\calendar_icon1.png"/> 
```

我用'\\'替换了'\'，但仍然没有变化。知道有什么问题吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T13:32:29.773

它不起作用，因为您必须使用 url，而不是物理路径。

> 使用 ImageUrl 属性指定要在 Image 控件中显示的图像的 URL。您可以使用相对或绝对 URL。相对 URL 将图像的位置与网页的位置相关联，而无需指定服务器上的完整路径。路径是相对于网页位置的。这样可以更轻松地将整个站点移动到服务器上的另一个目录，而无需更新代码。绝对 URL 提供完整路径，因此将站点移动到另一个目录需要您更新代码。

绝对网址

```
<asp:ImageButton runat="server" ID="cal_btn1"
    AlternateText="image" ImageUrl="http://mydomain/Images/calendar_icon1.png"/> 
```

相对网址

```
<asp:ImageButton runat="server" ID="cal_btn1"
    AlternateText="image" ImageUrl="Images/calendar_icon1.png"/> 
```

应用程序根相对 URL

```
<asp:ImageButton runat="server" ID="cal_btn1"
    AlternateText="image" ImageUrl="~/Images/calendar_icon1.png"/> 
```

我建议您看一下有关 asp.net 路径的[这篇](http://msdn.microsoft.com/en-us/library/ms178116.aspx)MSDN 文章。

# grails - 从控制器传递到 grails 中的视图

> ID：12074301
> 
> 赞同：0
> 
> 时间：2012-08-22T13:30:34.327
> 
> 标签：grails

我试图从我的控制器传递到我在 grails 中的视图在我的控制器中我有这个：

```
 def index() {
    def user = User.get(springSecurityService.principal.id)
    def children = user.children
    } 
```

在我的 gsp 中（查看我有这个）

```
 <g:each var="child" in="${children}">
    <p>Name: ${child.firstname}</p>
    <p>Author: ${child.lastname}</p>
 </g:each> 
```

它不会从我的控制器中获取子对象我也尝试过

```
<% def children = children %> 
```

没有运气

有人能指点我正确的方向吗

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T13:39:21.363

按照惯例，Grails 将呈现与执行的控制器操作相匹配的视图。按照惯例，它还将作为视图模型的操作的返回值传递。在您的情况下，要使其正常工作，您可以像 @Mr. 中那样显式渲染视图。猫的答案，或者您可以像返回模型一样

```
def index() {
    def user = User.get(springSecurityservice.principal.id)
    [children: user.children]
} 
```

Groovy 隐式返回最后评估的表达式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T13:32:25.057

尝试这个：

```
def index() {
   def user = User.get(springSecurityService.principal.id)
   render(view:'index',model:[children:user.children]) 
} 
```

# delphi - 如何阻止调试器进入 Delphi 提供的单元？

> ID：12074306
> 
> 赞同：5
> 
> 时间：2012-08-22T13:30:58.087
> 
> 标签：delphi, debugging, dcu

调试器在出现错误时会进入源代码（例如 with `F7`），但我想恢复正常工作模式，其中 Delphi 基本 DCU（库）仅编译到我的代码中，源代码不用于调试。

例如，在我的程序中出现错误时，调试器将进入 Controls.pas，进入`TControl.Click`. 正常情况（安装后）是 Delphi 跳过这些方法。

我应该在没有调试信息的情况下重新编译 Controls.pas 吗？如果是这样，怎么做？

* * *

我用附加信息扩展了这个主题，以便更好地理解：

我们使用 Delphi6 Prof. 鼠标有什么问题（系统错误代码 5）。所以我们要重新编译到 Controls.pas 来替换 Mouse Position getter 代码。然后：

1.  我为它创建了一个文件夹：“c:\D\Common\Delphi_Patches\Delphi_6\”
2.  我把原来的 Controls.pas 放进去。
3.  我修改了 Controls.pas，替换了位置获取器代码。
4.  我设置了Delphi的库路径，将第一个文件夹设置为“c:\D\Common\Delphi_Patches\Delphi_6\”

通过这些步骤，我可以使用鼠标安全代码编译源代码。

好的，但是Delphi每次都会在F7上进入Controls.pas，并且在任何例外情况下 - 这是非常“愤怒”的事情。

不管我从库路径中删除了“Controls.pas” - 然后调试器正在为它找到原始的“Controls.pas”，然后打开它...... :-(

我们不在任何代码中使用“使用调试 DCU-s”。

我试图从编译器选项中删除“调试信息”，但没关系，Delphi 会打开原始的 Controls.pas ...

所以我搜索Delphi的方式不要进入“Controls.pas”，而是使用我的dcu ...

我希望这为理解问题提供了更好的背景。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T14:47:37.023

我认为您需要`Shift`++ （工具/选项）然后在`Ctrl`Compiler**中**，取消选中“使用调试 DCU”...然后如果发生异常，它不会闯入 RTL 或 VCL 源。`F11`

 *** * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-10T17:53:22.873

由于您正在编译自己的 Delphi 单元版本，因此您可以禁用该单元中的调试信息。添加`{$D-}`到相关单元的源代码中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T08:25:34.337

正如我所见，解决方案是：

1.  创建一个仅使用新 Controls.pas 的项目。

2.  取消设置编译器选项中的“调试信息”选项。

3.  构建 dcu

4.  将 dcu 放入库文件夹

5.  从此库文件夹中隐藏新的 Controls.pas。

记住这个技巧，我不能“进入”controls.pas。

问候：dd

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-28T06:57:57.833

我对 Delphi XE8 也有同样的问题。

您可以取消勾选“项目>>选项>>编译>>使用调试.dcus”，它将继续跟踪到系统单元等等。

我发现阻止这种情况的最佳方法是打开您的 Application.dproj 文件——它是 XML 格式的。在其中，您可以按如下方式更改设置：

```
<PropertyGroup Condition="'$(Cfg_1_Win32)'!=''">
    <DCC_AssertionsAtRuntime>false</DCC_AssertionsAtRuntime>  <--- note false
    <DCC_DebugDCUs>false</DCC_DebugDCUs>
    <VerInfo_Locale>1033</VerInfo_Locale>
    <VerInfo_IncludeVerInfo>true</VerInfo_IncludeVerInfo>
    <DCC_RemoteDebug>false</DCC_RemoteDebug>
</PropertyGroup> 
```**

# android - 将图像字节 [] 从 CMYK 转换为 RGB？

> ID：12074315
> 
> 赞同：2
> 
> 时间：2012-08-22T13:31:13.713
> 
> 标签：android, image, colors, cmyk

我需要将 CYMK 图像的字节转换为 RGB 图像的字节。
我认为可以跳过标头的字节并将其他字节转换为 RGB，然后更改标头字节的`RGB`格式。
哪些是要更改的标头字节`RGB`？
没有ICC配置文件的位颜色转换公式是什么？

有人可以帮我完成这段代码吗？

```
//Decode with inSampleSize
Bitmap Resultbitmap;
string path = "imageFileCmyk.jpg";
int scale=4;
BitmapFactory.Options o2 = new BitmapFactory.Options();
o2.inPurgeable = true;
o2.inSampleSize=scale;
o2.inDither = false;                                                        
Resultbitmap = BitmapFactory.decodeStream(new FileInputStream(path), null, o2);
if (Resultbitmap==null) // Warning!! unsupported color conversion request
{
    File tmpfile = new File(path);
    FileInputStream is = new FileInputStream(tmpfile.getPath());
    byte[] cmykBytes= new byte[(int)tmpfile.length()];
    byte[] rgbBytes= new byte[(int)tmpfile.length()];
    is.read(cmykBytes);
    for (int i = 0; cmykBytes.length>i; ++i)
    {
       if (i>11)  // skip header's bytes, is it correct ??
       {
          rgbBytes[i] = cmykBytes[i]?? // How ??
       }
    }
    // new header bytes for RGB format
    rgbBytes[??]= ?? // How ??
    Resultbitmap = BitmapFactory.decodeByteArray(rgbBytes, 0, rgbBytes.length, o2);
}
return Resultbitmap; 
```

谢谢，
阿尔贝托

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:39:26.440

我做到了！我找到了一个很好的工具，可以在 Android 平台上使用 CMYK、YCCK 等不常见的色彩空间正确处理 *.jpg 文件。使用[https://github.com/puelocesar/android-lib-magick](https://github.com/puelocesar/android-lib-magick)，它是免费且易于配置的 android 库。这是将 CMYK 图像转换为 RGB 颜色空间的片段：

```
ImageInfo info = new ImageInfo(Environment.getExternalStorageDirectory().getAbsolutePath() + "/cmyk.jpg");
MagickImage imageCMYK = new MagickImage(info);

Log.d(TAG, "ColorSpace BEFORE => " + imageCMYK.getColorspace());
boolean status = imageCMYK.transformRgbImage(ColorspaceType.CMYKColorspace);
Log.d(TAG, "ColorSpace AFTER => " + imageCMYK.getColorspace() + ", success = " + status);

imageCMYK.setFileName(Environment.getExternalStorageDirectory().getAbsolutePath() + "/cmyk_new.jpg");
imageCMYK.writeImage(info);
Bitmap bitmap = BitmapFactory.decodeFile(Environment.getExternalStorageDirectory().getAbsolutePath()
            + "/Docs/cmyk_new.jpg");
if (bitmap == null) {
    //if decoding fails, create empty image 
    bitmap = Bitmap.createBitmap(imageCMYK.getWidth(), imageCMYK.getHeight(), Config.ARGB_8888);
}    
ImageView imageView1 = (ImageView) findViewById(R.id.imageView1);
imageView1.setImageBitmap(bitmap); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-11T11:35:59.577

只需导入[android-lib-magick](https://github.com/puelocesar/android-lib-magick)代码来转换其色彩空间就非常简单：

```
ImageInfo info = new ImageInfo(path); // path where the CMYK image is your device
MagickImage imageCMYK = new MagickImage(info);
imageCMYK.transformRgbImage(ColorspaceType.CMYKColorspace);
Bitmap bitmap = MagickBitmap.ToBitmap(imageCMYK); 
```

Kord，即使不需要再次保存转换后的图像，您也可以使用它创建一个位图。如果图像不在您的设备或 SD 卡中，您需要先下载它。

我已经使用[android-lib-magick](https://github.com/puelocesar/android-lib-magick)实现了两个简单的方法，称为“getCMYKImageFromPath”和“getCMYKImageFromURL”。[你可以在这里](https://github.com/Mariovc/GetCMYKImage)看到代码：

[https://github.com/Mariovc/GetCMYKImage](https://github.com/Mariovc/GetCMYKImage)

# android - 如何使用 zXing 在 Android 中为 IntentIntegrator 创建

> ID：12074316
> 
> 赞同：2
> 
> 时间：2012-08-22T13:31:13.797
> 
> 标签：android, zxing

我想`IntentIntegrator`在 Android 中创建一个对象。

```
IntentIntegrator integrator = new IntentIntegrator(ZBarReaderActivity.this); 
```

这`ZBarReaderActivity`是我的`Activity`课。

提前致谢，

请帮我。

IntentIntegrator 是 com.google.zxing.integration.android.IntentIntegrator 包中的类。

用于识别二维码内容是电话号码、网站、WebUrl。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T13:55:25.350

```
IntentIntegrator integrator = new IntentIntegrator(this);  /* "this" is enough */ 
```

欲了解更多信息，请观看：[http](http://www.youtube.com/watch?v=mVkaua4Lcvo) ://www.youtube.com/watch? v=mVkaua4Lcvo 它是用德语解释的，但您可以查看代码以及它们如何为 IntentIntegrator 创建对象。

ps：你必须更详细地解释它，否则你无法得到你的问题的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T14:04:17.740

这是我用过的intentintegrator

**IntentIntegrator.java**

```
/*
 * Copyright 2009 ZXing authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package com.your.package.name;

import com.your.package.name.IntentIntegrator;
import com.your.package.name.IntentResult;

import android.app.AlertDialog;
import android.app.Activity;
import android.content.ActivityNotFoundException;
import android.content.DialogInterface;
import android.content.Intent;
import android.net.Uri;

/**
 * <p>A utility class which helps ease integration with Barcode Scanner via {@link Intent}s. This is a simple
 * way to invoke barcode scanning and receive the result, without any need to integrate, modify, or learn the
 * project's source code.</p>
 *
 * <h2>Initiating a barcode scan</h2>
 *
 * <p>Integration is essentially as easy as calling {@link #initiateScan(Activity)} and waiting
 * for the result in your app.</p>
 *
 * <p>It does require that the Barcode Scanner application is installed. The
 * {@link #initiateScan(Activity)} method will prompt the user to download the application, if needed.</p>
 *
 * <p>There are a few steps to using this integration. First, your {@link Activity} must implement
 * the method {@link Activity#onActivityResult(int, int, Intent)} and include a line of code like this:</p>
 *
 * <p>{@code
 * public void onActivityResult(int requestCode, int resultCode, Intent intent) {
 *   IntentResult scanResult = IntentIntegrator.parseActivityResult(requestCode, resultCode, intent);
 *   if (scanResult != null) {
 *     // handle scan result
 *   }
 *   // else continue with any other code you need in the method
 *   ...
 * }
 * }</p>
 *
 * <p>This is where you will handle a scan result.
 * Second, just call this in response to a user action somewhere to begin the scan process:</p>
 *
 * <p>{@code IntentIntegrator.initiateScan(yourActivity);}</p>
 *
 * <p>You can use {@link #initiateScan(Activity, CharSequence, CharSequence, CharSequence, CharSequence)} or
 * {@link #initiateScan(Activity, int, int, int, int)} to customize the download prompt with
 * different text labels.</p>
 *
 * <p>Note that {@link #initiateScan(Activity)} returns an {@link AlertDialog} which is non-null if the
 * user was prompted to download the application. This lets the calling app potentially manage the dialog.
 * In particular, ideally, the app dismisses the dialog if it's still active in its {@link Activity#onPause()}
 * method.</p>
 *
 * <h2>Sharing text via barcode</h2>
 *
 * <p>To share text, encoded as a QR Code on-screen, similarly, see {@link #shareText(Activity, CharSequence)}.</p>
 *
 * <p>Some code, particularly download integration, was contributed from the Anobiit application.</p>
 *
 * @author Sean Owen
 * @author Fred Lin
 * @author Isaac Potoczny-Jones
 * @author Brad Drehmer
 */
public final class IntentIntegrator {

  public static final int REQUEST_CODE = 0x0ba7c0de; // get it?

  public static final String DEFAULT_TITLE = "Install Barcode Scanner?";
  public static final String DEFAULT_MESSAGE =
      "This application requires Barcode Scanner. Would you like to install it?";
  public static final String DEFAULT_YES = "Yes";
  public static final String DEFAULT_NO = "No";

  // supported barcode formats
  public static final String PRODUCT_CODE_TYPES = "UPC_A,UPC_E,EAN_8,EAN_13";
  public static final String ONE_D_CODE_TYPES = PRODUCT_CODE_TYPES + ",CODE_39,CODE_93,CODE_128";
  public static final String QR_CODE_TYPES = "QR_CODE";
  public static final String ALL_CODE_TYPES = null;

  private IntentIntegrator() {
  }

  /**
   * See {@link #initiateScan(Activity, CharSequence, CharSequence, CharSequence, CharSequence)} --
   * same, but uses default English labels.
   */
  public static AlertDialog initiateScan(Activity activity) {
    return initiateScan(activity, DEFAULT_TITLE, DEFAULT_MESSAGE, DEFAULT_YES, DEFAULT_NO);
  }

  /**
   * See {@link #initiateScan(Activity, CharSequence, CharSequence, CharSequence, CharSequence)} --
   * same, but takes string IDs which refer
   * to the {@link Activity}'s resource bundle entries.
   */
  public static AlertDialog initiateScan(Activity activity,
                                         int stringTitle,
                                         int stringMessage,
                                         int stringButtonYes,
                                         int stringButtonNo) {
    return initiateScan(activity,
                        activity.getString(stringTitle),
                        activity.getString(stringMessage),
                        activity.getString(stringButtonYes),
                        activity.getString(stringButtonNo));
  }

  /**
   * See {@link #initiateScan(Activity, CharSequence, CharSequence, CharSequence, CharSequence, CharSequence)} --
   * same, but scans for all supported barcode types.
   * @param stringTitle title of dialog prompting user to download Barcode Scanner
   * @param stringMessage text of dialog prompting user to download Barcode Scanner
   * @param stringButtonYes text of button user clicks when agreeing to download
   *  Barcode Scanner (e.g. "Yes")
   * @param stringButtonNo text of button user clicks when declining to download
   *  Barcode Scanner (e.g. "No")
   * @return an {@link AlertDialog} if the user was prompted to download the app,
   *  null otherwise
   */
  public static AlertDialog initiateScan(Activity activity,
                                         CharSequence stringTitle,
                                         CharSequence stringMessage,
                                         CharSequence stringButtonYes,
                                         CharSequence stringButtonNo) {

    return initiateScan(activity,
                        stringTitle,
                        stringMessage,
                        stringButtonYes,
                        stringButtonNo,
                        ALL_CODE_TYPES);
  }

  /**
   * Invokes scanning.
   *
   * @param stringTitle title of dialog prompting user to download Barcode Scanner
   * @param stringMessage text of dialog prompting user to download Barcode Scanner
   * @param stringButtonYes text of button user clicks when agreeing to download
   *  Barcode Scanner (e.g. "Yes")
   * @param stringButtonNo text of button user clicks when declining to download
   *  Barcode Scanner (e.g. "No")
   * @param stringDesiredBarcodeFormats a comma separated list of codes you would
   *  like to scan for.
   * @return an {@link AlertDialog} if the user was prompted to download the app,
   *  null otherwise
   * @throws InterruptedException if timeout expires before a scan completes
   */
  public static AlertDialog initiateScan(Activity activity,
                                         CharSequence stringTitle,
                                         CharSequence stringMessage,
                                         CharSequence stringButtonYes,
                                         CharSequence stringButtonNo,
                                         CharSequence stringDesiredBarcodeFormats) {
    Intent intentScan = new Intent("com.google.zxing.client.android.SCAN");
    intentScan.addCategory(Intent.CATEGORY_DEFAULT);

    // check which types of codes to scan for
    if (stringDesiredBarcodeFormats != null) {
      // set the desired barcode types
      intentScan.putExtra("SCAN_FORMATS", stringDesiredBarcodeFormats);
    }

    try {
      activity.startActivityForResult(intentScan, REQUEST_CODE);
      return null;
    } catch (ActivityNotFoundException e) {
      return showDownloadDialog(activity, stringTitle, stringMessage, stringButtonYes, stringButtonNo);
    }
  }

  private static AlertDialog showDownloadDialog(final Activity activity,
                                                CharSequence stringTitle,
                                                CharSequence stringMessage,
                                                CharSequence stringButtonYes,
                                                CharSequence stringButtonNo) {
    AlertDialog.Builder downloadDialog = new AlertDialog.Builder(activity);
    downloadDialog.setTitle(stringTitle);
    downloadDialog.setMessage(stringMessage);
    downloadDialog.setPositiveButton(stringButtonYes, new DialogInterface.OnClickListener() {
      public void onClick(DialogInterface dialogInterface, int i) {
        Uri uri = Uri.parse("market://search?q=pname:com.google.zxing.client.android");
        Intent intent = new Intent(Intent.ACTION_VIEW, uri);
        activity.startActivity(intent);
      }
    });
    downloadDialog.setNegativeButton(stringButtonNo, new DialogInterface.OnClickListener() {
      public void onClick(DialogInterface dialogInterface, int i) {}
    });
    return downloadDialog.show();
  }

  /**
   * <p>Call this from your {@link Activity}'s
   * {@link Activity#onActivityResult(int, int, Intent)} method.</p>
   *
   * @return null if the event handled here was not related to {@link IntentIntegrator}, or
   *  else an {@link IntentResult} containing the result of the scan. If the user cancelled scanning,
   *  the fields will be null.
   */
  public static IntentResult parseActivityResult(int requestCode, int resultCode, Intent intent) {
    if (requestCode == REQUEST_CODE) {
      if (resultCode == Activity.RESULT_OK) {
        String contents = intent.getStringExtra("SCAN_RESULT");
        String formatName = intent.getStringExtra("SCAN_RESULT_FORMAT");
        return new IntentResult(contents, formatName);
      } else {
        return new IntentResult(null, null);
      }
    }
    return null;
  }

  /**
   * See {@link #shareText(Activity, CharSequence, CharSequence, CharSequence, CharSequence, CharSequence)} --
   * same, but uses default English labels.
   */
  public static void shareText(Activity activity, CharSequence text) {
    shareText(activity, text, DEFAULT_TITLE, DEFAULT_MESSAGE, DEFAULT_YES, DEFAULT_NO);
  }

  /**
   * See {@link #shareText(Activity, CharSequence, CharSequence, CharSequence, CharSequence, CharSequence)} --
   * same, but takes string IDs which refer to the {@link Activity}'s resource bundle entries.
   */
  public static void shareText(Activity activity,
                               CharSequence text,
                               int stringTitle,
                               int stringMessage,
                               int stringButtonYes,
                               int stringButtonNo) {
    shareText(activity,
              text,
              activity.getString(stringTitle),
              activity.getString(stringMessage),
              activity.getString(stringButtonYes),
              activity.getString(stringButtonNo));
  }

  /**
   * Shares the given text by encoding it as a barcode, such that another user can
   * scan the text off the screen of the device.
   *
   * @param text the text string to encode as a barcode
   * @param stringTitle title of dialog prompting user to download Barcode Scanner
   * @param stringMessage text of dialog prompting user to download Barcode Scanner
   * @param stringButtonYes text of button user clicks when agreeing to download
   *  Barcode Scanner (e.g. "Yes")
   * @param stringButtonNo text of button user clicks when declining to download
   *  Barcode Scanner (e.g. "No")
   */
  public static void shareText(Activity activity,
                               CharSequence text,
                               CharSequence stringTitle,
                               CharSequence stringMessage,
                               CharSequence stringButtonYes,
                               CharSequence stringButtonNo) {

    Intent intent = new Intent();
    intent.setAction("com.google.zxing.client.android.ENCODE");
    intent.putExtra("ENCODE_TYPE", "TEXT_TYPE");
    intent.putExtra("ENCODE_DATA", text);
    try {
      activity.startActivity(intent);
    } catch (ActivityNotFoundException e) {
      showDownloadDialog(activity, stringTitle, stringMessage, stringButtonYes, stringButtonNo);
    }
  }

} 
```

**IntentResult.java**

```
/*
 * Copyright 2009 ZXing authors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package com.your.package.name;

import com.your.package.name.IntentIntegrator;

/**
 * <p>Encapsulates the result of a barcode scan invoked through {@link IntentIntegrator}.</p>
 *
 * @author Sean Owen
 */
public final class IntentResult {

  private final String contents;
  private final String formatName;

  IntentResult(String contents, String formatName) {
    this.contents = contents;
    this.formatName = formatName;
  }

  /**
   * @return raw content of barcode
   */
  public String getContents() {
    return contents;
  }

  /**
   * @return name of format, like "QR_CODE", "UPC_A". See <code>BarcodeFormat</code> for more format names.
   */
  public String getFormatName() {
    return formatName;
  }    
} 
```

然后使用它

```
private void someFunction()
    {
        IntentIntegrator.initiateScan(this);
    }
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        switch(requestCode) {
            case IntentIntegrator.REQUEST_CODE: 
            {
                if (resultCode == RESULT_CANCELED){
                }
                else 
                    {                   
                        IntentResult scanResult = IntentIntegrator.parseActivityResult(requestCode, resultCode, data);

                        String UPCScanned = scanResult.getContents();
                    }
            break;
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-27T17:41:39.373

将此添加到您的依赖项中

```
 implementation 'com.journeyapps:zxing-android-embedded:4.1.0' 
```

# java - 没有带有 @XmlElementDecl 的 ObjectFactory

> ID：12074317
> 
> 赞同：0
> 
> 时间：2012-08-22T13:31:19.450
> 
> 标签：java, jaxb, glassfish, jax-ws

要在 GlassFish Server Open Source Edition 3.1.1（内部版本 12）中部署：

> 引起：java.security.PrivilegedActionException: com.sun.xml.bind.v2.runtime.IllegalAnnotationsException: 1 个 IllegalAnnotationExceptions 元素 {http://www.w3.org/2004/ 没有带有 @XmlElementDecl 的 ObjectFactory 08/xop/include}包括。此问题与以下位置有关：在受保护的 java.util.List ru.gosuslugi.smev.rev120315.ReferenceType.content 在 ru.gosuslugi.smev.rev120315.ReferenceType 在公共 javax.xml.bind.JAXBElement ru.gosuslugi。 smev.rev120315.ObjectFactory.createReference(ru.gosuslugi.smev.rev120315.ReferenceType) at ru.gosuslugi.smev.rev120315.ObjectFactory at protected java.util.List ru.gosuslugi.smev.rev120315.AppDataType.any at ru.gosuslugi .smev.rev120315。

资料来源：

src/org/w3/_2004/_08/xop/include/Include.java

```
//
// This file was generated by the JavaTM Architecture for XML Binding(JAXB) Reference Implementation, v2.2.4-2 
// See <a href="http://java.sun.com/xml/jaxb">http://java.sun.com/xml/jaxb</a> 
// Any modifications to this file will be lost upon recompilation of the source schema. 
// Generated on: 2012.08.22 at 04:13:30 PM MSK 
//

package org.w3._2004._08.xop.include;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlAnyAttribute;
import javax.xml.bind.annotation.XmlAnyElement;
import javax.xml.bind.annotation.XmlAttribute;
import javax.xml.bind.annotation.XmlSchemaType;
import javax.xml.bind.annotation.XmlType;
import javax.xml.namespace.QName;

/**
 * <p>Java class for Include complex type.
 * 
 * <p>The following schema fragment specifies the expected content contained within this class.
 * 
 * <pre>
 * &lt;complexType name="Include">
 *   &lt;complexContent>
 *     &lt;restriction base="{http://www.w3.org/2001/XMLSchema}anyType">
 *       &lt;sequence>
 *         &lt;any namespace='##other' maxOccurs="unbounded" minOccurs="0"/>
 *       &lt;/sequence>
 *       &lt;attribute name="href" use="required" type="{http://www.w3.org/2001/XMLSchema}anyURI" />
 *       &lt;anyAttribute namespace='##other'/>
 *     &lt;/restriction>
 *   &lt;/complexContent>
 * &lt;/complexType>
 * </pre>
 * 
 * 
 */
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "Include", propOrder = {
    "any"
})
public class Include {

    @XmlAnyElement(lax = true)
    protected List<Object> any;
    @XmlAttribute(name = "href", required = true)
    @XmlSchemaType(name = "anyURI")
    protected String href;
    @XmlAnyAttribute
    private Map<QName, String> otherAttributes = new HashMap<QName, String>();

    /**
     * Gets the value of the any property.
     * 
     * <p>
     * This accessor method returns a reference to the live list,
     * not a snapshot. Therefore any modification you make to the
     * returned list will be present inside the JAXB object.
     * This is why there is not a <CODE>set</CODE> method for the any property.
     * 
     * <p>
     * For example, to add a new item, do as follows:
     * <pre>
     *    getAny().add(newItem);
     * </pre>
     * 
     * 
     * <p>
     * Objects of the following type(s) are allowed in the list
     * {@link Object }
     * 
     * 
     */
    public List<Object> getAny() {
        if (any == null) {
            any = new ArrayList<Object>();
        }
        return this.any;
    }

    /**
     * Gets the value of the href property.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getHref() {
        return href;
    }

    /**
     * Sets the value of the href property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setHref(String value) {
        this.href = value;
    }

    /**
     * Gets a map that contains attributes that aren't bound to any typed property on this class.
     * 
     * <p>
     * the map is keyed by the name of the attribute and 
     * the value is the string value of the attribute.
     * 
     * the map returned by this method is live, and you can add new attribute
     * by updating the map directly. Because of this design, there's no setter.
     * 
     * 
     * @return
     *     always non-null
     */
    public Map<QName, String> getOtherAttributes() {
        return otherAttributes;
    }

} 
```

org/w3/_2004/_08/xop/include/ObjectFactory.java

```
//
// This file was generated by the JavaTM Architecture for XML Binding(JAXB) Reference Implementation, v2.2.4-2 
// See <a href="http://java.sun.com/xml/jaxb">http://java.sun.com/xml/jaxb</a> 
// Any modifications to this file will be lost upon recompilation of the source schema. 
// Generated on: 2012.08.22 at 04:13:30 PM MSK 
//

package org.w3._2004._08.xop.include;

import javax.xml.bind.JAXBElement;
import javax.xml.bind.annotation.XmlElementDecl;
import javax.xml.bind.annotation.XmlRegistry;
import javax.xml.namespace.QName;

/**
 * This object contains factory methods for each 
 * Java content interface and Java element interface 
 * generated in the org.w3._2004._08.xop.include package. 
 * <p>An ObjectFactory allows you to programatically 
 * construct new instances of the Java representation 
 * for XML content. The Java representation of XML 
 * content can consist of schema derived interfaces 
 * and classes representing the binding of schema 
 * type definitions, element declarations and model 
 * groups.  Factory methods for each of these are 
 * provided in this class.
 * 
 */
@XmlRegistry
public class ObjectFactory {

    private final static QName _Include_QNAME = new QName("http://www.w3.org/2004/08/xop/include", "Include");

    /**
     * Create a new ObjectFactory that can be used to create new instances of schema derived classes for package: org.w3._2004._08.xop.include
     * 
     */
    public ObjectFactory() {
    }

    /**
     * Create an instance of {@link Include }
     * 
     */
    public Include createInclude() {
        return new Include();
    }

    /**
     * Create an instance of {@link JAXBElement }{@code <}{@link Include }{@code >}}
     * 
     */
    @XmlElementDecl(namespace = "http://www.w3.org/2004/08/xop/include", name = "Include")
    public JAXBElement<Include> createInclude(Include value) {
        return new JAXBElement<Include>(_Include_QNAME, Include.class, null, value);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:09:36.963

当从 XML 模式生成 JAXB 模型时，我始终建议`JAXBContext`使用生成的模型的包名称来创建。

```
JAXBContext jc = JAXBContext.newInstance("org.w3._2004._08.xop.include"); 
```

您没有指定要部署到 GlassFish 的应用程序类型，但如果它是 JAX-RS/Jersey 应用程序，我建议使用`ContextResolver`. 这是一种标准机制，可让您更好地控制您`JAXBContext`的创建方式。下面是一个例子。

```
import java.util.*;
import javax.ws.rs.Produces;
import javax.ws.rs.ext.*;
import javax.xml.bind.*;
import org.eclipse.persistence.jaxb.JAXBContextFactory;

@Provider
@Produces({"application/xml", "application/json"})
public class SampleContextResolver implements ContextResolver<JAXBContext> {

    private JAXBContext jc;

    public SampleContextResolver() {
        try {
            jc = JAXBContext.newInstance("org.w3._2004._08.xop.include");
        } catch(JAXBException e) {
            throw new RuntimeException(e);
        }
    }

    public JAXBContext getContext(Class<?> clazz) {
        if(clazz.getPackage().getName().equals("org.w3._2004._08.xop.include")) {
            return jc;
        }
        return null;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-29T17:08:15.450

6 个月前我遇到了完全相同的问题，老实说，我不记得它是如何解决的（可能我们不需要某些功能，所以我们把它放在一边）。但是今天我们可爱的堆栈跟踪又一次被这条消息诅咒了（就像你的一样）

但这一次我能够处理它。

Include 类没有任何问题。但不知何故，这是我的猜测，它没有为 jaxb 正确加载，或者在我们需要它的时候没有，或者......无论如何。

我试图在我的代码中做的是验证肥皂消息的有效负载。

```
 JAXBContext jaxbContext = JAXBContext.newInstance(UnifoTransferMsg.class) ;
    SchemaFactory schemaFactory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
    Schema schema = schemaFactory.newSchema(new File("UnifoTransferMsg.xsd"));

    Marshaller marshaller = jaxbContext.createMarshaller();
    marshaller.setSchema(schema);
    marshaller.marshal(inputmsg, System.out); 
```

把硬编码的值留给我吧，它只是为了调试。尽管如此，第一行是引发异常的地方，因为 Jaxb 不知何故对 Include 一无所知或使用了错误的类。要修复它，需要在同一个调用中加载多个类。

所以对我来说最终的解决办法是

```
JAXBContext.newInstance(Include.class, UnifoTransferMsg.class); 
```

希望这会有所帮助，也许有一天我会更多地了解问题的真正原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T14:01:49.033

您可以尝试将 @XmlRoolElement 注释放在生成包含类上。

# testing - Leiningen 的单元测试没有找到测试文件

> ID：12074320
> 
> 赞同：4
> 
> 时间：2012-08-22T13:31:27.077
> 
> 标签：testing, clojure, leiningen

对于名为 myproject 的 Lein 项目，我在 myproject/test/ 目录中创建了一个文件 core.clj。

```
(ns myproject.test.core
  (:use clojure.test))
  ;;tests follow 
```

当我尝试使用“lein test”运行测试时，它失败并出现错误：

```
Exception in thread "main" java.io.FileNotFoundException: Could not locate myproject/test/core__init.class or myproject/test/core.clj on classpath: 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T14:00:27.617

从您的错误来看，您的目录结构似乎与我使用的不同。lein 想要 core.clj（用于测试）在我在下面发布的目录中。这是我设置的测试目录路径`lein new util`

```
~/projects/clojure/util/test/util/test$ 
```

这是 project.clj 文件，以防万一您需要它以获得进一步的清晰度。

```
(defproject util "1.0.4-SNAPSHOT"
  :description "A general purposes Clojure library"
  :dependencies [[org.clojure/clojure "1.4.0"]
                 [clojure-csv/clojure-csv "1.3.2"]
                 [org.clojure/tools.cli "0.1.0"]]
  :aot [util.core]
  :omit-source true) 
```

# regex - BASH - 使用查找查找特定文件夹并使用正则表达式过滤

> ID：12074326
> 
> 赞同：8
> 
> 时间：2012-08-22T13:31:41.623
> 
> 标签：regex, bash

我有一个文件夹，其中包含许多带有子文件夹（/...）的文件夹，其结构如下：

```
_30_photos/combined
_30_photos/singles
_47_foo.bar
_47_foo.bar/combined
_47_foo.bar/singles
_50_foobar 
```

使用该命令将显示`find . -type d -print | grep '_[0-9]*_'`具有结构***的所有文件夹。*但是我已经生成了一个只捕获 */combined 文件夹的正则表达式： `_[0-9]*_[a-z.]+/combined`但是当我将它插入到 find 命令中时，不会打印任何内容。

下一步是为每个组合文件夹（在我的硬盘上的某处）创建一个文件夹，并将组合文件夹的内容复制到新文件夹。新文件夹名称应与子文件夹的父名称相同，例如 _47_foo.bar。搜索后可以通过 xargs 命令实现吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-22T13:38:42.290

您不需要 grep：

```
find . -type d -regex ".*_[0-9]*_.*/combined" 
```

对于其余的：

```
find . -type d -regex "^\./.*_[0-9]*_.*/combined" | \
   sed 's!\./\(.*\)/combined$!& /somewhere/\1!'   | \
   xargs -n2 cp -r 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T13:36:24.710

使用 basic`grep`您将需要转义`+`：

```
... | grep '_[0-9]*_[a-z.]\+/combined' 
```

或者您可以使用不需要转义的“扩展正则表达式”版本（`egrep`或`grep -E`[thanks chepner]） 。`+`

`xargs`可能不是进行上述复制的最灵活方式，因为与[多个命令](https://stackoverflow.com/a/6958957/341459)一起使用很棘手。您可能会发现使用 while 循环更灵活：

```
... | grep '_[0-9]*_[a-z.]\+/combined' | while read combined_dir; do 
    mkdir some_new_dir
    cp -r ${combined_dir} some_new_dir/
done 
```

如果您想要一种方法来[自动化](http://tldp.org/LDP/abs/html/string-manipulation.html)`some_new_dir`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T14:29:17.357

```
target_dir="your target dir"

find . -type d -regex ".*_[0-9]+_.*/combined" | \
  (while read s; do
     n=$(dirname "$s")
     cp -pr "$s" "$target_dir/${n#./}"
   done
  ) 
```

笔记：

*   如果目录名称中有换行符“\n”，则会失败
*   这使用了一个子shell来不弄乱你的环境——在你不需要的脚本中
*   稍微改变了正则表达式：`[0-9]*`到`[0-9]+`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-12T10:06:37.393

你可以使用这个命令：

```
find . -type d | grep -P "_[0-9]*_[a-z.]+/combined" 
```

# html - 在 dompdf 中创建复选框

> ID：12074327
> 
> 赞同：0
> 
> 时间：2012-08-22T13:31:46.853
> 
> 标签：html, input, checkbox, dompdf

使用 dompdf 将 HTML 转换为 PDF 时是否可以使用复选框元素（以及选中的属性）？

我使用的是 0.6.3 beta，一些初始测试没有成功：

```
<p>Checkboxes:
<p><input type=checkbox name=on checked> ON
<p><input type=checkbox name=off> OFF 
```

结果是：

```
Checkboxes:
ON
OFF 
```

在 dompdf 0.5.1 和 0.5.2 中确认了相同的行为。

我仅将复选框用于显示目的。在将数据传递回 dompdf 之前，会处理任何客户端输入的数据。利益相关者对他们要求 PDF 包含复选框（有些已选中，有些不取决于预处理的用户输入）的要求很坚定。

dompdf 是否能够处理复选框（和其他输入元素），如果可以，它们应该如何在源 HTML 中编码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T23:39:47.857

我今天提交[了 r500](http://code.google.com/p/dompdf/source/detail?r=500)，它允许显示表单元素。

您可以通过查看 SVN 主干来获取它。

# c# - 如何使用配置文件调用powershell脚本，c#中的参数

> ID：12074329
> 
> 赞同：0
> 
> 时间：2012-08-22T13:31:52.880
> 
> 标签：c#, powershell

我是 c# 中的新 powershell 脚本。我有一个 powershell 脚本文件 ps.ps1 和 powershell 设置文件 ConsoleSettings.psc1

```
C:\Windows\system32\WindowsPowerShell\v1.0\powershell.exe -psconsolefile "D:\e\ConsoleSettings.psc1" -noexit -command ". 'D:\e\ps.ps1'" 
```

运行它并获得“

> Get-RST -SearchRoot 'erd/user' -PasswordNeverExpires:$false -PasswordNotChangedFor 60 -enabled

我的函数结果正确。

现在，我想在 c# 中得到这个结果。我的代码是；

```
 private void button1_Click(object sender, EventArgs e)
        {
            RunScript(LoadScript(@"d:\e\ps.ps1"));
        }

        private string RunScript(string scriptText)
        {
            PSConsoleLoadException x = null; ;
            RunspaceConfiguration rsconfig = RunspaceConfiguration.Create(@"d:\e\ConsoleSettings.psc1", out x);
            Runspace runspace = RunspaceFactory.CreateRunspace(rsconfig);
            runspace.Open();
            RunspaceInvoke runSpaceInvoker = new RunspaceInvoke(runspace);
            runSpaceInvoker.Invoke("Set-ExecutionPolicy Unrestricted");
            Pipeline pipeline = runspace.CreatePipeline();
            pipeline.Commands.AddScript(scriptText);

            pipeline.Commands.Add("Get-RST -SearchRoot 'erd/user' -PasswordNeverExpires:$false -PasswordNotChangedFor 60   -enabled");            
Collection<PSObject> results = pipeline.Invoke();

            runspace.Close();
            StringBuilder stringBuilder = new StringBuilder();
            foreach (PSObject obj in results)
            {
                stringBuilder.AppendLine(obj.ToString());
            }
            return stringBuilder.ToString();
        }

        private string LoadScript(string filename)
        {
            try
            {
                using (StreamReader sr = new StreamReader(filename))
                {
                    StringBuilder fileContents = new StringBuilder();
                    string curLine;
                    while ((curLine = sr.ReadLine()) != null)
                    {
                        fileContents.Append(curLine + "\n");
                    }
                    return fileContents.ToString();
                }
            }
            catch (Exception e)
            {
                string errorText = "The file could not be read:";
                errorText += e.Message + "\n";
                return errorText;
            }

        } 
```

然后我有一个错误：**术语“Get-RST -SearchRoot 'erd/user' -PasswordNeverExpires:$false -PasswordNotChangedFor 60 -enabled”未被识别为 cmdlet、函数、脚本文件或可运行程序的名称。检查名称的拼写，或者如果包含路径，请验证路径是否正确并重试。**

如何解决此问题，或如何使用配置文件调用 powershell 脚本，参数如 (Get-RST -SearchRoot 'erd/user' -PasswordNeverExpires:$false -PasswordNotChangedFor 60 -enabled) 在 c#

请帮我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T19:19:32.020

您正在将命令行添加为命令而不是脚本。命令用于诸如 cmdlet 或不带参数的函数之类的东西。您将使用其他方法来添加参数。一个简单的解决方案是`AddScript`再次使用。

```
pipeline.AddScript("Get-RST -SearchRoot 'erd/user' -PasswordNeverExpires:$false -PasswordNotChangedFor 60   -enabled"); 
```

# c# - 嵌套列表和 foreach 循环

> ID：12074331
> 
> 赞同：4
> 
> 时间：2012-08-22T13:32:02.467
> 
> 标签：c#, list

我想从两个列表中向表中添加一行。我在第二个 foreach 循环中遇到错误。**无法将 Liability.LiabilityCheckpointInstance 转换为 Liability.LiabilityAssignment。**

```
foreach (LiabilityCheckpointInstance ci in value)
{
    //foreach (LiabilityAssignment la in value)
    //{
    var tr = new TableRow();
    var tc = new TableCell { Text = ci.CheckGroup };
    tr.Cells.Add(tc);
    tc = new TableCell { Text  = ci.IxCheck.ToString() };
    tr.Cells.Add(tc);
    tc = new TableCell { Text = ci.CheckPointInfo.ToString() };
    tr.Cells.Add(tc);
    tc = new TableCell { Text = ci.RejectedBy };
    tr.Cells.Add(tc);
    tc = new TableCell { Text = ci.Role };
    tr.Cells.Add(tc);
    tc = new TableCell { Text = ci.Mistakes.ToString() };
    tr.Cells.Add(tc);
    //ChkpLiabilityDataTable.Rows.Add(tr);
    foreach (LiabilityAssignment la in value )
    {
        //var tr = new TableRow();
         tc = new TableCell { Text = la.LiabileOrganizationName };
        tc = new TableCell { Text = la.LiabileOrganizationName };
        tr.Cells.Add(tc);
        tc = new TableCell { Text = la.LiablePersonName };
        tr.Cells.Add(tc);
        tc = new TableCell { Text = la.Comment };
        tr.Cells.Add(tc);
        ChkpLiabilityDataTable.Rows.Add(tr);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T13:34:54.813

您的 foreach 循环是：

```
foreach (LiabilityCheckpointInstance ci in value)
foreach (LiabilityAssignment la in value ) 
```

它循环相同的东西（`value`），但说其中的项目是不同的。[1]

我会从上下文中假设第二个应该循环`ci.something`而不是仅仅循环。

所以你会有：

```
foreach (LiabilityAssignment la in ci.Something ) 
```

当然，您需要将其更改`Something`为您的列表。

[1] 我应该注意到语法本身并没有错。如果 value 中的项目同时属于这两种类型（例如，一种是另一种的子类型），它会正常工作。但这看起来不像这里的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T13:35:53.033

第二个循环应该是

```
foreach (LiabilityAssignment la in ci) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T13:36:37.160

您正在使用“值”作为两个 foreach 语句的源列表。value 显然包含 LiabilityCheckpointInstance 对象，因此当您尝试使用它时它会失败，就好像它包含 LiabilityAssignment 对象一样。

你的意思是 sa: foreach (LiabilityAssignment la in ci.)？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T14:04:15.003

这应该为您解决问题。

```
foreach (LiabilityCheckpointInstance ci in value)
{
    var tr = new TableRow();
    var tc = new TableCell { Text = ci.CheckGroup };
    tr.Cells.Add(tc);
    tc = new TableCell { Text  = ci.IxCheck.ToString() };
    tr.Cells.Add(tc);
    tc = new TableCell { Text = ci.CheckPointInfo.ToString() };
    tr.Cells.Add(tc);
    tc = new TableCell { Text = ci.RejectedBy };
    tr.Cells.Add(tc);
    tc = new TableCell { Text = ci.Role };
    tr.Cells.Add(tc);
    tc = new TableCell { Text = ci.Mistakes.ToString() };
    tr.Cells.Add(tc);

    // YOU NEED TO BUILD THESE UP FRONT SO YOU CAN LOOP THROUGH THE
    // CHILDREN SAFELY BELOW
    tr.Cells.Add(new TableCell());
    tr.Cells.Add(new TableCell());
    tr.Cells.Add(new TableCell());

    // I DON'T KNOW IF YOUR PROPERTY IS NAMED LiabilityAssignments OR NOT
    // SO REPLACE THAT WITH WHAT EVER IS NECESSARY - BUT IT SHOULD BE THE
    // LIST OF LiabilityAssignment ON THE LiabilityCheckpointInstance OBJECT
    foreach (LiabilityAssignment la in ci.LiabilityAssignments)
    {
        tr.Cells[6].Text = la.LiabileOrganizationName;
        tr.Cells[7].Text = la.LiablePersonName;
        tr.Cells[8].Text = la.Comment;

        ChkpLiabilityDataTable.Rows.Add(tr);
    }
} 
```

# objective-c - @property 指令中保留和复制属性之间的比较

> ID：12074332
> 
> 赞同：-3
> 
> 时间：2012-08-22T13:32:05.737
> 
> 标签：objective-c

> **可能的重复：**
> [目标 c - 分配、复制、保留](https://stackoverflow.com/questions/4510913/objective-c-assign-copy-retain)

我想知道Objective c中@property指令中使用的“ **retain ”和copy属性之间的区别。**

首先十分感谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:36:15.187

copy 复制变量的内容（并将保留计数设置为 1）。保留只是将保留计数添加 +1。所以......如果你有一个可变对象并且你保留它，如果你修改它，对象在每个带有“retain”的属性中都会“更新”，但不会在带有“copy”的属性中“更新”。如果对象是不可变的，则没有区别。

# asp.net - ASP.NET MVC 中的会话 cookie 持久性

> ID：12074333
> 
> 赞同：2
> 
> 时间：2012-08-22T13:32:06.983
> 
> 标签：asp.net, session, iis, session-cookies

这可能是一个重复的问题，但由于我无法在过去的问题中找到答案，我将再次询问。

在我的 ASP.NET 应用程序中，当我授权用户时，我设置了自定义 FormsAuthenticationTicket。持久性变量为 false，因此身份验证 cookie 应该只对当前会话有效。

我的问题是这个会议什么时候结束？我重新启动了我的 IIS Express 开发服务器，关闭了开发机器等，会话似乎仍然处于活动状态，并且用户使用该 cookie 进行了身份验证。

为什么我的 VS 2012 + IIS Express 环境会话是不朽的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T13:42:17.803

那不是问题。您可以重新启动服务器，只要身份验证 cookie 仍然有效，就认为用户已登录。请记住，HTTP 是一个断开连接的协议。

当用户注销并且您以编程方式删除 cookie 或用户关闭浏览器时，cookie 将被删除。

# php - How to take an open source PHP CMS offline?

> ID：12074353
> 
> 赞同：-4
> 
> 时间：2012-08-22T13:32:51.907
> 
> 标签：php, html, drupal, web-applications

I would like to utilize the Offline web application feature of HTML5 and take a PHP CMS such as Drupal offline. But, I am not sure where to start.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T13:35:49.797

第一次谷歌点击“drupal html5 离线”：[http ://drupal.org/project/appcache](http://drupal.org/project/appcache)

# c# - 替换绘制事件 C#

> ID：12074354
> 
> 赞同：0
> 
> 时间：2012-08-22T13:32:52.917
> 
> 标签：c#, gdi+, nullreferenceexception

我正在使用分层表单，我在 Visual Basic .NET 中找到了一个很好的示例，但在将源代码转换为 C# 时遇到了问题。Visual Basic.NET 实现使用 shadows 修饰符来有效地替换 Form Class 的*Invalidate()*方法，然后对 Paint 事件执行相同的操作。

> 公共阴影事件绘制（ByVal G As Drawing.Graphics）

```
Public Shadows Sub Invalidate()
    Dim B As New Drawing.Bitmap(ClientSize.Width, ClientSize.Height)
    Dim G As Drawing.Graphics = Drawing.Graphics.FromImage(B) : G.SmoothingMode = Drawing.Drawing2D.SmoothingMode.AntiAlias

    RaiseEvent Paint(G)

    G.Dispose()
    SetBits(B)
    B.Dispose()
End Sub 
```

我将代码转换为 C#，如下所示：

```
public new event PaintEventHandler Paint;

public new void Invalidate()
    {
        Bitmap b = new Bitmap(ClientSize.Width, ClientSize.Height);
        Graphics g = Graphics.FromImage(b);
        g.SmoothingMode = SmoothingMode.AntiAlias;

        Paint(this, new PaintEventArgs(g, Rectangle.Empty));

        g.Dispose();
        SetBits(b);
        b.Dispose();
    } 
```

但是当调用该方法时，我收到*NullReferenceException - 对象引用未设置为对象的实例。*

我也尝试了不同的实现，但收到了相同的异常。

```
 public delegate void PaintEventHandler(Graphics g);
    public event PaintEventHandler Paint; 
```

有人可以告诉我我做错了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:37:15.827

您需要在调用事件之前检查 null：

```
if (Paint != null)   
    Paint(this, new PaintEventArgs(g, Rectangle.Empty)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:48:27.187

默认情况下，您的`Paint`事件不包含任何功能。您需要添加一些才能运行它。

```
Paint += new PaintEventHandler(Form1_Paint); 
```

我在哪里声明：

```
void Form1_Paint(object sender, PaintEventArgs e) 
```

* * *

您在程序中应该做的是调用该函数`onPaint()`，或者更好的是，将您的函数添加到`Paint`事件中，而不是覆盖它。

# php - 使用 DateTime::CreateFromFormat 创建日期对象

> ID：12074359
> 
> 赞同：4
> 
> 时间：2012-08-22T13:33:32.433
> 
> 标签：php, datetime

我有一串日期：

```
25/08/2012 
```

在这里，我试图将其转换为 DateTime 对象，以便将其保存到 MySQL 数据库中。我的后端架构有一个`DateOfPrint date`准备好接收此数据的列。

这是我尝试过的：

```
$eventDate = DateTime::createFromFormat('d/m/y', $fecha->innertext);
echo $eventDate; 
```

该`echo`语句在屏幕上没有显示任何内容，当尝试将其保存到数据库时，该列中没有保存任何内容。

有什么建议么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-22T13:38:59.320

您`$eventDate`包含一个 boolean(false)，它被打印为空字符串。

您需要使用大写的 Y。

> Y 年份的完整数字表示，4 位数字示例：1999 或 2003
> y 年份的两位数字表示示例：99 或 03

你必须调用[DateTime::format()](http://docs.php.net/manual/en/datetime.format.php)；
例如

```
<?php
$fecha = new StdClass;
$fecha->innertext = '25/08/2012';

$eventDate = DateTime::createFromFormat('d/m/Y', $fecha->innertext);
if ( false===$eventDate ) {
  die('invalid date format');
}
echo $eventDate->format('Y-m-d'); 
```

印刷

```
2012-08-25 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T13:35:43.463

您需要先将其格式化为 MySQL 列，然后才能插入：

```
// Need upper case Y here, thanks to VolkerK for pointing that out
$eventDate = DateTime::createFromFormat('d/m/Y', $fecha->innertext);
$eventDate = $eventDate->format( 'Y-m-d'); // I think this is the correct format 
```

然后您可以使用`$eventDate`将日期保存到数据库中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T13:35:46.327

`$eventDate`是一个对象，而不是一个字符串。您将需要访问代码中元素的属性，以便能够正确地将其值插入表中或将其回显。在那张纸条上，您*可以*使用`var_dump($eventDate);`应该向您展示有关该对象的所有信息。

您可以参考[DateTime 类上的 PHP 文档](http://php.net/manual/en/class.datetime.php)以获取可用属性并查看哪一个最适合您的需求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T13:38:49.900

```
$eventDate = DateTime::createFromFormat('d/m/Y', $fecha->innertext);
echo $eventDate->format('Y-m-d'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T13:39:40.433

简短的回答

```
$st_time =  date('Y-m-d H:i',$yourdate); 
```

如果你只想要日月和年使用这个

```
$st_time =  date('Y-m-d',$yourdate); 
```

# javascript - Javascript 仅适用于 jQuery mobile 中的页面刷新

> ID：12074364
> 
> 赞同：0
> 
> 时间：2012-08-22T13:33:51.653
> 
> 标签：javascript, jsp, jquery-mobile

我目前正在使用带有 JSP 和 Struts 的 jquery mobile。问题是只有在页面刷新一次后才会调用 javascript 函数。该脚本放置在数据角色“页面”中。但问题仍然存在。目前正在使用 jQuery 1.0 稳定版。这是我的代码..

```
<body>
    <div data-role="page" id="webtosms">

        <script language="javascript">

        function phonenumlen(){         //Mobile no validation
            var numlen = mobileno.value.length;
            //alert(numlen);
            if(numlen==0){
                alert('Mobile Number cannot be left blank');
                return false;
            }

            else if(numlen<10)
            {
                alert('Mobile number cannot be less than 10 digits');
                return false;
            }
            else
            {
                //alert('true');
                return true;
            }

        }

        function goodchars(e,goods){    // restrict users from entering letters in the mobile number textbox
            var key, keychar;
            key = getkey(e);
            if (key == null) return true;
            // get character
            keychar = String.fromCharCode(key);
            keychar = keychar.toLowerCase();
            goods = goods.toLowerCase();
            // check goodkeys
            if (goods.indexOf(keychar) != -1)
                return true;
            // control keys
            if ( key==null || key==0 || key==8 || key==9 || key==13 || key==27 )
                return true;
            return false;
        }

        function getkey(e)
        {
            if (window.event)
                return window.event.keyCode;
            else if (e)
                return e.which;
            else
                return null;
        }

        langId = 'EN';
        messageLen = 299;
        message = "";

        function checkCount() {
            //alert('function called');

            if(document.webtosms.message.value.length <= messageLen) {
                message = document.webtosms.message.value;
                document.webtosms.charcount.value = (messageLen - document.webtosms.message.value.length);
            }else {
                document.webtosms.message.value = message;
            }
        }

        function getTemplate(){ // code to populate the drop down and display in the textarea

            var where_is_mytool=document.forms[0].cboTemplate.value;
            var mytool_array=where_is_mytool.split("~");

            //alert(where_is_mytool);
              alert(mytool_array);
            window.document.forms[0].smsa.value=mytool_array[0];
            window.document.forms[0].tmplid1.value=mytool_array[1];
            window.document.forms[0].title2.value=mytool_array[1];
            window.document.forms[0].hidlang.value=mytool_array[2];

            window.document.forms[0].hidcreatedbyval.value=mytool_array[5];

        }
  </script>
  </div> 
```

刷新页面后，上面的代码绝对可以正常工作。一旦页面已经加载，我不想重新加载它。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T19:40:56.653

在包含 jQuery 之后，但在调用 jQuery mobile 之前，您需要将所有 javascript 放在 head 部分。

您的头文件应类似于此（第二个文件中的自定义 JS）：

```
<script src="http://code.jquery.com/jquery-1.7.1.min.js" type="text/javascript"></script>
<script type="text/javascript" src="http://www.example.com/path-to-file/custom-javascript.js"></script>
<script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script> 
```

**更新**

在页面的链接上，添加属性`data-ajax="false"`。如果您想在站点范围内禁用 Ajax 导航，请将以下代码放入您的自定义 JS 文件中：

```
$(document).bind("mobileinit", function(){
  $.extend(  $.mobile , {
    ajaxEnabled: false
  });
}); 
```

这是文档的链接：http: [//jquerymobile.com/demos/1.1.1/docs/api/globalconfig.html](http://jquerymobile.com/demos/1.1.1/docs/api/globalconfig.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-16T08:10:52.120

对我来说，将 data-ajax="false" 放在指向包含脚本的页面的所有链接上。

# android - How to retreive items from websites into android app

> ID：12074368
> 
> 赞同：-3
> 
> 时间：2012-08-22T13:34:17.230
> 
> 标签：android

> **Possible Duplicate:**
> [Android app to retreive images and text from a website](https://stackoverflow.com/questions/12073291/android-app-to-retreive-images-and-text-from-a-website)

How do I retreive images and text and display it in my android application,Like getting picture of cars and the car details from a car website if I am to write an app for car dealer

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:46:34.767

通常，您可能

1.  使用网站的 web 服务获取通量（格式为 json、xml...）
2.  在您的应用程序中创建解析器以将通量解释为 Java 对象
3.  使用 android 的视图 (ImageView TextView...) 在屏幕上显示。

我希望你能得到它，这是一个应用程序非常常见的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:47:20.970

您应该在这些网站中寻找数据馈送。如果您发现任何以 JSON、XML 等格式返回数据的链接，您可以在您的应用程序中对其进行解析并使用它。例如，您可以查看[twitter status api](https://dev.twitter.com/docs/api/1/get/statuses/user_timeline)。

# clearcase - “将文件添加到源代码管理”时出现 Clearcase 问题

> ID：12074369
> 
> 赞同：5
> 
> 时间：2012-08-22T13:34:19.323
> 
> 标签：clearcase, clearcase-ucm

我在将文件添加到 clearcase (UCM) 时遇到以下问题

```
---------------------------
Rational ClearCase Explorer
---------------------------
Error adding 'M:\Myviename\Myvob\Myproj\Implementation\DataSource\Deployment\BOM\SupportFiles\Service.config' to source control.

Created branch "Tm6-Proj-Dev2" from M:\Myviename\Myvob\Myproj\Implementation\DataSource\Deployment\BOM\SupportFiles\Service.config' version "\main\0".
Type manager "text_file_delta" failed create_version operation. 
```

我尝试了变基并删除并再次添加了文件。但面对同样。为什么会发生这种情况以及如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T14:11:27.260

[您将在此技术说明“知识集合：类型管理器](http://www-01.ibm.com/support/docview.wss?uid=swg21259086)[创建版本操作失败](http://www-01.ibm.com/support/docview.wss?uid=swg21259086)”中找到此错误消息的所有已知案例[`<text_file_delta>`](http://www-01.ibm.com/support/docview.wss?uid=swg21259086)

*   类型管理器大小限制 - 文件太大
*   包含二进制数据的文本文件 - 包含“\000”
*   超过 8000 字节的行
*   损坏的源容器 - 不是其分支上最高的

主要原因是内容与文本文件不兼容（行太长，或二进制内容）。

* * *

[OP Samselvaprabu](https://stackoverflow.com/users/399145/samselvaprabu)补充道：

> 我们的 IT 人员使用了以下命令“ `chtype Compressed_file`”。
> 之后，它允许办理登机手续。
> 
> 正如他们在我的同事系统中所做的那样，我无法问这是什么意思以及它是如何解决问题的？

它确实解决了问题（与 UCM 无关）：由于 text_manager 无法将文件的内容识别为文本（例如，[在本技术](http://www-01.ibm.com/support/docview.wss?&rs=984&uid=swg21146932)说明中所示），因此您需要指示 ClearCase 对其进行处理作为二进制内容。

```
cleartool chtype compressed_file <filename> 
```

*   **Pro**：它允许签入/签出
*   **缺点**：您将无法再“与以前的版本比较”。
    您可能需要指示始终复制压缩文件而不是合并（请参阅“ [Clearcase UCM 正在尝试合并 pdf 文件](https://stackoverflow.com/questions/8789258/clearcase-ucm-is-trying-to-merge-pdf-files)”）

对于某些文件集，您还可以修改魔术文件以自动执行该过程：请参阅“[签入 ClearCase 失败](https://stackoverflow.com/questions/11438975/check-in-to-clearcase-fails)”。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-22T13:50:02.987

您使用的是哪种类型的视图？静态（快照）还是动态？检查文件是否已经存在于主目录中。如果文件已经在 main 上（这意味着文件是版本化文件），那么在编辑之前您应该签出文件，然后在进行更改后您需要签入。如果您正在使用版本化文件并且您对此版本化文件进行了更改文件然后它将是一个被劫持的文件，（您将在清晰的案例资源管理器中看到文件上的红色+绿色标记）。试一次。

# jqgrid - jqGrid custom pager search button

> ID：12074371
> 
> 赞同：0
> 
> 时间：2012-08-22T13:34:27.450
> 
> 标签：jqgrid

We have our custom button that is ASP.NET custom server control. We use it on all our pages for action buttons (< NS:OurButton ID='btn' runat="server" Text="Search"/ >).

Now we want to use that button to open our custom search form to filter the records in jqGrid. Our business requirement that the search button must be a part of jqGrid pager.

How I can do it? I tried to search google and wiki help for jqGrid, but didn't found any way how to add that custom search button to the jqGrid pager.

If it's matters, the button rendered to the client in that markup:

```
<div id="btn" class="OurCustomButton">
    <div class="LeftSide"></div>
    <div class="ButtonContent">Search</div>
    <div class="RightSide"></div>
</div> 
```

Or maybe it's possible to create totally my own custom pager, with my own design and buttons and then to tell the jqGrid to use it's controls as triggers or to trigger events on my own with correct parameters?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:31:05.503

我能想到的一种解决方案是使用 jQuery 的[insertBefore()](http://api.jquery.com/insertAfter/)（或[insertAfter](http://api.jquery.com/insertAfter/)）并将您的按钮的 html 插入到 document.ready() 事件中。

代码可以是：

```
jQuery(document).ready(function(){ 
$('<div class="ButtonContent">Search</div>').insertBefore('.RightSide');
}); 
```

# matlab - Matlab向量化：如何避免这个“for”循环？

> ID：12074373
> 
> 赞同：1
> 
> 时间：2012-08-22T13:34:45.360
> 
> 标签：matlab, vectorization

我有以下矩阵：

```
X=1 2 3  
Y=4 5 6  

A=1 2 3  
  4 5 6  
  7 8 9 
```

我想要做

```
for each (i,j) in A  
  v = A(i,j)*X - Y
  B(i,j) = v * v' 
```

即 A 的每个元素乘以向量 X，然后结果向量从自身中减去 Y，最后我们取该向量的内积，得到一个数字。
可以在没有 for 循环的情况下完成吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T13:38:17.997

在 Matlab 中经常忘记的一件事：运算符`'`取**共轭转置**（`.'`是普通的转置）。换句话说，`A' == conj(trans(A))`，而`A.' == trans(A)`，如果`A`是复数矩阵，则不同。

好的，让我们将一些数学应用到您的方程式中。我们有

```
v = A(i,j)*X - Y
B(i,j) = v * v'
       = (A(i,j)*X - Y) * (A(i,j)*X - Y)'
       = A(i,j)*X * conj(A(i,j))*X' - Y * conj(A(i,j))*X' 
         - A(i,j)*X * Y' + Y * Y'
       = A(i,j)*conj(A(i,j)) * X*X' - conj(A(i,j)) * Y*X' - A(i,j) * X*Y' + Y*Y' 
```

所以第一个结果是

```
B = A.*conj(A) * (X*X') - conj(A) * (Y*X') - A * (X*Y') + Y*Y' 
```

在**实矩阵/向量**的情况下，一个具有身份

```
X*Y' == Y*X'
A == conj(A) 
```

这意味着，您可以将表达式简化为

```
B = A.*A * (X*X') - 2*A * (X*Y') + Y*Y'
  = A.^2 * (X*X') - 2*A * (X*Y') + Y*Y' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T13:53:50.297

另一种方法：

```
X = [1 2 3]
Y = [4 5 6]
A = [1 2 3; 4 5 6; 7 8 9]

V = bsxfun(@minus, A(:)*X, [4 5 6])
b = sum((V.^2)')
B = reshape(b , 3, 3) 
```

我得到结果：

```
B = 27     5    11
    45   107   197
   315   461   635 
```

# ruby-on-rails-3 - No inline blocks in ERB helpers?

> ID：12074374
> 
> 赞同：1
> 
> 时间：2012-08-22T13:34:50.133
> 
> 标签：ruby-on-rails-3, syntax, erb, view-helpers

I was curious: in an ERB file, when passing a block to a view helper, why does **this** work:

```
<%= div_for @thing do |x| %>
  <%= x %>
<% end %> 
```

while **this doesn't**?

```
<%= div_for @thing {|x| x.to_s} %> 
```

In Ruby, `do...end` is exactly the same as `{...}`, so why not in ERB? Note aside: I can use `x` on its own on the second line above because its `.to_s` method returns the field I want to render. Sorry if this has been asked before, I wasn't able to find a similar question (found a [similar answer](https://stackoverflow.com/a/5454651/1030985) though).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:41:53.097

我怀疑第二个代码块与以下代码完全相同：

```
<%= div_for @thing do |x| %>
  <% x %>
<% end %> 
```

因为 x 上没有“=”，所以它不会在您的视图中输出。尝试 ：

```
<%= div_for @thing {|x| concat x.to_s} %> 
```

# vb.net - 如何使用 VB.net 合并 .reg 文件

> ID：12074377
> 
> 赞同：0
> 
> 时间：2012-08-22T13:34:59.500
> 
> 标签：vb.net, registry, process.start

我正在尝试添加注册表项：

```
My.Computer.Registry.LocalMachine.CreateSubKey("SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\TESTKEY") 
```

但密钥是在以下创建的：

> HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\TESTKEY

当我尝试`.reg`使用`process.start()`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T13:54:38.250

这意味着您有一台 64 位计算机，但您的应用程序以 32 位运行。

64 位计算机会将 32 位应用程序中的任何密钥保存到该子密钥。

以 64 位运行您的应用程序，并生成一个 correcy 子项。

# objective-c - glCreateProgram causes segfault?

> ID：12074379
> 
> 赞同：0
> 
> 时间：2012-08-22T13:35:09.713
> 
> 标签：objective-c, macos, opengl, automatic-ref-counting

I'm trying to write a Wavefront OBJ file viewer in Objective-C, that is capable of loading meshes/materials/shaders from files. I've created classes for shaders and shader programs, and I'm trying to create an OpenGL shader program object as part of my shader program class's init method:

```
- (id)initWithVertexShader:(NSString *)vshader FragmentShader:(NSString *)fshader {
self = [super init];
if (self) {
    SRShader* shaders[2] = {
        [[SRShader alloc] initWithFilename:vshader Type:GL_VERTEX_SHADER Source:nil],
        [[SRShader alloc] initWithFilename:fshader Type:GL_FRAGMENT_SHADER Source:nil]
    };

    program = glCreateProgram();

    for (int i = 0; i < 2; i++) {
        SRShader* s = shaders[i];
        NSError* e = nil;
        s.source = [NSString stringWithContentsOfFile:s.filename encoding:NSUTF8StringEncoding error:&e];
        if (!e) {
            NSLog(@"Failed to read shader file: %@\n", s.filename);
            exit(-1);
        }

        GLuint shader = [s compile];
... and so on. 
```

However, calling glCreateProgram results in EXC_BAD_ACCESS, as does the call to [SRShader compile], which in turn calls glCreateShader. Does anyone know of any issues with these function calls in Objective-C? Maybe something to do with ARC or calling them in an initialization function?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T00:04:15.410

如果您使用的是 NSOpenGLView，则需要在调用之前添加以下代码行，因此如果您从 Interface Builder 加载视图，则`glCreateProgram()`可能是这样：`-(id)initWithCoder`

```
NSOpenGLContext* context = [self openGLContext];

[context makeCurrentContext]; 
```

非常基本，我知道这个帖子已经过时了，但是当他们谷歌并找到这个帖子（就像我刚才所做的那样）时，也许它会节省一两分钟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-31T17:19:44.273

正如 Trevor 在另一篇文章中回答的那样，您应该初始化 glew。

```
glewInit(); 
```

答案来源： [https ://gamedev.stackexchange.com/a/22788](https://gamedev.stackexchange.com/a/22788)

# drupal - sencha touch complex models

> ID：12074380
> 
> 赞同：0
> 
> 时间：2012-08-22T13:35:11.787
> 
> 标签：drupal, sencha-touch-2

I'm trying to read entities from a Drupal Services endpoint into my Sencha Touch 2 application. The JSON output looks like this (simplified):

```
{
  nid: 1
  title: 'Test'
  body: {
    'en': [
      'This is a test.'
    ]
  }
} 
```

Thats the model's coffeescript code:

```
Ext.define 'Node',
  extend: 'Ext.data.Model'

  config:
    idProperty: 'nid'

    fields: [
      { name: 'nid', type: 'integer' }
      { name: 'title', type: 'string' }
      { name: 'language', type: 'string' }
      { name: 'body', type: 'auto', convert: convertField }
    ]

    proxy:
      type: 'jsonp'
      url: 'http://www.mydomain.com/rest/node'

convertField = (value, record) ->
  console.log value # always "undefined"
  return 'test' 
```

Loading the model with a jsonp proxy works, but only the atomic fields (like "nid" and "title") are populated. I tried to add a ["convert" function](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.Field-cfg-convert) to the models `body` field, but the `value` parameter is always undefined.

Is there a way to load complex json data into a models field? Or do I have to use the Model-relations system (which would be a lot of mess ...). I also thought about overriding a Ext.data.Reader, but i don't really know where to start.

# java - UnMarshalling with Unique value using JaxB

> ID：12074383
> 
> 赞同：1
> 
> 时间：2012-08-22T13:35:21.880
> 
> 标签：java, jaxb, unmarshalling

I have xml returned like,

```
<UniequeTestList>
 <UniequeTest>
  <FirstName>a</FirstName>
  <LastName>b</LastName>
 </UniequeTest>
 <UniequeTest>
  <FirstName>a</FirstName>
  <LastName>b</LastName>
 </UniequeTest>
</UniequeTestList> 
```

I unmarshal it using JaxB in `List<UniequeTest>`. And obviously that list must have mulitple object which are same. Can I make it unieque at the same time I unmarshall it?

I can't use HashSet or LinkedHashSet to make it unieque at same time. I mean what I want in Unmarshall list is unieque object if value under that object is same.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T13:48:56.487

您最终可以使用 JAXB Unmarshaller 的侦听器：

```
 class JAXBUnmarshallingListener extends Unmarshaller.Listener {

   @Override
   public void beforeUnmarshal(Object target, Object parent) {
   }

   @Override
   public void afterUnmarshal(Object target, Object parent) {
   }
 } 
```

在回调方法中，您可以实现一个简单的缓存并将 JAXB 新创建的对象替换为您自己的唯一实例（新的 JAXB 实例将在之后被垃圾收集，因为没有人继续引用它。注意此方法不会为您保存这些对象的实例化和 gc 的成本。）。

# templates - after Cocos2d 2.0 migration, sprite placement is all wrong

> ID：12074385
> 
> 赞同：0
> 
> 时间：2012-08-22T13:35:34.103
> 
> 标签：templates, cocos2d-iphone, opengl-es-2.0

I've just updated my project to Cocos2d v2.0 and after getting rid of all build errors, i can get it to run but the game seems to draw things in the wrong place. Buttons/menus are clickable where they're supposed to be, but the sprites show up in the wrong place, or not at all. (This project was my copying old files into a new v2.0 project from a template.)

I'm also getting openGL errors like this

```
OpenGL error 0x0502 in -[CCGLView swapBuffers] 280
OpenGL error 0x0502 in -[CCSprite draw] 532
OpenGL error 0x0502 in -[CCSprite draw] 532
OpenGL error 0x0502 in -[CCSprite draw] 532
OpenGL error 0x0502 in -[CCTextureAtlas drawNumberOfQuads:fromIndex:] 556 
```

So, I reread the migration post... removed the RootViewController stuff, etc, then created a new project from the v2.0 template and made my appDelegate look just like it. I double checked my CCSprite -draw method, looks just like it's supposed to in v2.0

No change. Still OpenGL errors and most of my sprites are out of place. (background seem fine, oddly enough.)

This is happening when using the 5.1 or 6.0b4 IOS Simulator

I'm at a loss.. :(

Anyone have any ideas? I've exhausted my search options and am just frustrated .. thanks ahead of time!

(FYI, this was a fully working v1.0.1 game)

**UPDATE:** SUCCESS!!! So, I had a third part class (SWScrollView .h and CCNode+Autolayout.h) that was using glPushMatrix() and glPopMatrix()

updating those to kmGLPushMatrix() and kmGLPopMatrix() fixed all of the errors and sprite placement!!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:58:36.023

Cocos2D 2.0 使用 OpenGLES2.0 而 cocos2D 1.0 使用 OpenGLES1.0。

这是[一个类似的线程](https://stackoverflow.com/questions/11662770/cocos2d-2-0-zillions-of-opengl-errors/11663486#11663486)，请按照我的回答。替换你的绘图功能。

# java - Java枚举常量值不会改变

> ID：12074391
> 
> 赞同：2
> 
> 时间：2012-08-22T13:35:45.953
> 
> 标签：java, eclipse, enums, constants

所以这不是“我想在运行时更改一个常量值，为什么它不起作用？”之一。问题，就像提醒一样。我无法在代码中更改 Java Enum 的值。我已经进行了更改、保存并重新运行了我的程序，但代码中的值仍然是旧值。我正在使用 Enum.values() 方法循环遍历我的枚举常量，并且该值显示为旧值，而不是我直接输入枚举的新值。我开始怀疑我是不是疯了，或者我的程序决定不重新编译我的枚举或什么。欢迎进行健全性检查。有关我的枚举代码的全部内容以及我在何处访问这些值，请参见下文。

```
public enum MSSQLType implements DBType {
//String Types
CHAR(8000, -1, null, "CHAR","TEXT"),
VARCHAR(8000, -1, null, "VARCHAR", "TEXT"),
TEXT(-1, -1, null, "TEXT", "TEXT"),
NCHAR(4000, -1, null, "CHAR", "TEXT"),
NVARCHAR(4000, -1, null, "VARCHAR", "TEXT"),
NTEXT(-1, -1, null, "TEXT", "TEXT"),
//Numeric Types
BIGINT(19, -1, null, "BIGINT", "BIGINT"),
BIGINT_IDENTITY (19, -1, null, null, null),
INT(10, -1, null, "INT", "BIGINT"),
SMALLINT(5, -1, null, "SMALLINT", "BIGINT"),
TINYINT(3, -1, null, "TINYINT", "BIGINT"),
BIT(1, -1, null, "TINYINT", "BIGINT"),
DECIMAL(14, 38, null, "DECIMAL", "DECIMAL"),
NUMERIC(14, 38, null, "DECIMAL", "DECIMAL"),
MONEY(15, 4, null, "DECIMAL", "DECIMAL"),
SMALLMONEY(6,4, null, "DECIMAL", "DECIMAL"),
FLOAT(-1, 53, null, "FLOAT", "FLOAT"),
REAL(-1, 106, null, "FLOAT", "FLOAT"),
//Date/time types
DATETIME(-1, -1, "YYYY-mm-DD HH:MM:SS", "DATETIME", "DATETIME"),
SMALLDATETIME(-1, -1, "YYYY-mm-DD HH:MM:SS", "DATETIME", "DATETIME"),
//Other types
BINARY(-1,-1, null, null, null),
VARBINARY(-1,-1, null, null, null),
IMAGE(-1,-1, null, null, null),
CURSOR(-1,-1, null, null, null),
SQL_VARIANT(-1,-1, null, null, null),
TABLE(-1,-1, null, null, null),
TIMESTAMP(-1, -1, "YYYY-mm-DD HH:MM:SS", "DATETIME", "DATETIME"),
UNIQUEIDENTIFIER(-1, -1, null, null, null);

private int size;
private int precision;
private String format;
private String convertTo;
private String fallback;

MSSQLType(int size, int precision, String format, String convertTo, String fallback) {
    this.size = size;
    this.precision = precision;
    this.format = format;
    this.convertTo = convertTo;
    this.fallback = fallback;
}
public int getSize() {
    return size;
}

public int getPrecision() {
    return precision;
}

public String getFormat() {
    return format;
}

public String getConvertTo() {
    return convertTo;
}

public String getFallback() {
    return fallback;
}

@Override
public String getDisplay() {
    return toString();
}

@Override
public String toString() {
    return super.toString().replaceAll("_", " ");
}
} 
```

因此 REAL 的 convertTo 和 fallback 值从“DOUBLE”、“DOUBLE”更改为“FLOAT”、“FLOAT”，但代码仍然将常量字符串“DOUBLE”分配给这两个值！这些值是这样读出的：

```
for (MSSQLType msSqlType : MSSQLType.values()) {
            if (typeName.equalsIgnoreCase(msSqlType.toString())) {
                this.type = msSqlType;
                return;
            }
        } 
```

我也尝试过使用 MSSQLType.class.getEnumConstants() 得到相同的结果。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:16:21.977

您正在使用`msSqlType.toString()`方法，您应该使用`msSqlType.name()`方法。返回时的默认`toString()`方法，但如果您在课堂上重写了它，则不会。`enum``name``DBType`

```
 if (typeName.equalsIgnoreCase(msSqlType.name())) {
            this.type = msSqlType;
            return;
        } 
```

# php - PHP Content-Disposition：附件在本地工作，但不在服务器上

> ID：12074393
> 
> 赞同：0
> 
> 时间：2012-08-22T13:35:52.100
> 
> 标签：php, csv, http-headers

我正在做的是查询数据库以构建 CSV 文件。我正在使用这些标题来保存文件：

```
header('Content-Type: text/csv; charset=utf-8');
header('Content-Disposition: attachment; filename="export.csv"'); 
```

它在我的 WAMP 设置上本地工作，但不在服务器上。我需要更改 PHP 或 Apache 中的设置或其他内容以允许这样做吗？

当我在本地单击链接时，它会下载一个 CSV 文件。当我在实时服务器上做同样的事情时，它只会把我带到生成 CSV 内容的 php 页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:46:48.653

尝试使用`application/octet-stream`not `text/csv`。我不知道为什么您的浏览器在不同的域中表现不同，但更常见的是使用`application/octet-stream`. [这在RFC2616](http://www.w3.org/Protocols/rfc2616/rfc2616-sec19.html)中有所提及。由于您没有在浏览器中显示它，因此内容类型不必与内容匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-01T09:25:24.547

我遇到了和你一样的问题。就我而言，解决方案是我们只需要使用 `include 'connection_file.php';` after

```
header('Content-Type: text/csv; charset=utf-8');
header('Content-Disposition: attachment; filename=data.csv'); 
```

意味着你的头文件必须是文件的第一条语句。

导出 csv 的完整 PHP 代码是：

```
<?php

if(isset($_POST['Export'])){

      header('Content-Type: text/csv; charset=utf-8');
      header('Content-Disposition: attachment; filename=data.csv');

      include '../dbcon.php';

      $output = fopen("php://output", "w");
      fputcsv($output, array('id', 'name', 'phone', 'Employee Name', 'district', 'taluka', 'address'));
      $query = "SELECT * from export_buffer ORDER BY id DESC";
      $result = mysqli_query($con, $query);
      while($row = mysqli_fetch_assoc($result))
      {
           fputcsv($output, $row);
      }
      fclose($output);
 }
?> 
```

# c# - 用户配置文件属性值设置为选定的 DDL 值

> ID：12074397
> 
> 赞同：0
> 
> 时间：2012-08-22T13:35:59.397
> 
> 标签：c#, asp.net-mvc-3, razor

我已经制作了一个`Profile Model`存储某些属性值的。比如firstName、lastName……等等……其中`state`就是其中之一。

现在，当我`TextBox`用`DropDownList`for `State`property 替换时出现了问题。这就是我`Edit`在`ProfileController`.

如果有任何现有值，则打开应用程序时将填充。第一个问题，如何从下拉列表中获取选定的值，所以我可以`Profile`像在这个方法中那样将它传递给属性。

```
public ActionResult Edit(string username)
{
    ViewBag.StateID = new SelectList(db.States, "StateID", "StateName");
    ProfileBase _userProfile = ProfileBase.Create(username);
    ProfileModel _profile = new ProfileModel();
    System.Web.HttpContext.Current.Session["_userName"] = username;

    if (_userProfile.LastUpdatedDate > DateTime.MinValue)
    {
        _profile.FirstName = Convert.ToString(_userProfile.GetPropertyValue("FirstName"));
        _profile.LastName = Convert.ToString(_userProfile.GetPropertyValue("LastName"));
        _profile.Address = Convert.ToString(_userProfile.GetPropertyValue("Address"));
        _profile.City = Convert.ToString(_userProfile.GetPropertyValue("City"));
        _profile.State = Convert.ToString(_userProfile.GetPropertyValue("State"));
        _profile.Zip = Convert.ToString(_userProfile.GetPropertyValue("Zip"));
    }
    return View(_profile);
} 
```

`State`当传入一个字符串`TextBox`，然后使用`Edit`post 方法保存时，这工作正常。

```
 [HttpPost]
    public ActionResult Edit(ProfileModel model)
    {
        if (ModelState.IsValid)
        {
        ProfileBase profile = ProfileBase.Create(System.Web.HttpContext.Current.Session["_userName"].ToString(), true);

        if (profile != null)
        {
            profile.SetPropertyValue("FirstName", model.FirstName);
            profile.SetPropertyValue("LastName", model.LastName);
            profile.SetPropertyValue("Address", model.Address);
            profile.SetPropertyValue("City", model.City);
            profile.SetPropertyValue("State", model.State);
            profile.SetPropertyValue("Zip", model.Zip);

            profile.Save();
        }
        else
        {
            ModelState.AddModelError("", "Error writing to Profile");
        }
    }
    return RedirectToAction("Index");
} 
```

这就是我为`State`.

模型：

```
public class State
{
    public int StateID { get; set; }
    public string StateName { get; set; }

    public IEnumerable<RegisterModel> RegModel { get; set; }
    public IEnumerable<ProfileModel> Profiles { get; set; }
} 
```

控制器：

```
ViewBag.StateID = new SelectList(db.States, "StateID", "StateName"); 
```

看法：

```
@Html.DropDownList("StateID", (SelectList)ViewBag.StateID, new { @class = "dropdown" }) 
```

我已经尝试了几件事。到目前为止没有运气。我错过了什么？！

# jquery - 超级菜单下拉悬停问题

> ID：12074398
> 
> 赞同：0
> 
> 时间：2012-08-22T13:36:01.943
> 
> 标签：jquery, css, hover, megamenu

[超级菜单](http://www.danhumphrey.co.uk/nav/index2.html)

悬停时看起来不错，但是如果您将光标向下移动一点点或移动到实际的下拉黑框上，悬停就会消失。我遇到了一些障碍，需要一些帮助。

**索引.html**

```
<!doctype html>
<head>

<link rel="stylesheet" type="text/css" href="style2.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript" src="main.js"></script>
</head>
<nav>
<ul id="headNav">

    <li id="item1" class="mega">
       <h2> <a href="" class="hover">Item 1</a></h2>
        <div id="item1" class="dropdown gradbackground">Sub-Item 1</div>
    </li>

    <li id="item2" class="mega">
       <h2> <a href="" class="hover">Item 2</a></h2>
        <div id="item2" class="dropdown gradbackground">Sub-Item 2</div> 
    </li>

 </ul>

 <div class="clear"></div>

 </nav>

 </body>

</html> 
```

**CSS**

```
a {color:#fff;}
/* Mega Menu*/

ul#headNav 
{
    width: 100%;
    height: 40px;
    margin: 16px 0 10px 0;
    padding: 0;
    list-style: none;
    background: #484848; /* Old browsers */
    /* IE9 SVG, needs conditional override of 'filter' to 'none' */
    background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzQ4NDg0OCIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMzMTMwMzAiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
    background: -moz-linear-gradient(top,  #484848 0%, #313030 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#484848), color-stop(100%,#313030)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  #484848 0%,#313030 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  #484848 0%,#313030 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #484848 0%,#313030 100%); /* IE10+ */
    background: linear-gradient(to bottom,  #484848 0%,#313030 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#484848', endColorstr='#313030',GradientType=0 ); /* IE6-8 */
    border-radius: 4px;
    border: 1px solid #3B3B3B;
}

ul#headNav li {
height: 39px;
position: relative;
float: left;
padding: 0px 8px;
border-right: 1px solid #565656;

}

ul#headNav li a {
width: 126px;
height: 40px;
position: relative;
top: -10px;
display: block;
line-height: 60px;
text-align: center;
background: url(../img/nav/home.png) no-repeat 0 0;
z-index: 10;
}

ul#headNav li .hover:hover, ul#headNav li a:hover {
height: 60px;
background: #474747;
border-radius: 5px 5px 0px 0px;

}

ul#headNav li:nth-of-type(8n) {border-right:none;}

li#recording a.hover
{
    line-height: 18px;
    top: 2px;
}

ul#headNav li a {
width: 101px;
background: url(../img/nav/home.png) no-repeat 0 0;
}

a#BuyNow { line-height: 38px;}
a#BuyNow:hover { text-decoration:underline; color:#fff!important;}

#quicksearch 
{
 position: relative;
 float: left;
 margin-right: 44px;
}

nav h2 
{
    text-transform:capitalize;
    font-size:13px !important; 
    color:#000000; 
    font-weight:bold; 
    margin:0; 
    padding:0 0px; 
    line-height:28px !important; 
    height:0px;
    }

a.liLink {background:none !important; border:none ;}

    /* End Mega Menu  */ 

.dropdown
{
    display: none;
    width:570px;
    position: absolute;
    top:23px;
    padding:10px;
    height:auto;
    min-height:400px;
    color: #ffffff;
    -webkit-box-shadow: 0px 4px 4px rgba(0,0,0,0.3);
    -moz-box-shadow: 0px 4px 4px rgba(0,0,0,0.3);
    box-shadow:0px 4px 4px rgba(0,0,0,0.3);
    z-index:99;
    font-weight:bold;
    z-index:999999;
    border-top:16px solid #474747;
    background:#000;
}

.regtable 
{
    margin:20px 0px 0px 30px;

}

#item1.dropdown {top: 50px; left: 8px; }
#item2.dropdown {left: 8px; top: 50px; }

 ul.megacatlist li ul li,  ul.megabrandlist li ul li
{
    display:block !important;
    position: relative !important;
    float:none !important;
    line-height:16px !important;
    border:none !important;
    padding:0 !important;
    margin:0px 0 1px 0 !important;
    text-transform:none !important;
    height:20px;

}

 ul.megacatlist li ul li a,  ul.megabrandlist li ul li a
{
    color: #666666 !important;
    text-decoration:none;
    font-size:12px;
    line-height:16px !important;
    padding:1px 5px 0px 5px !important;
    border:none;
    width:auto;
    display:block;
    height:100%;
    text-transform:none !important;

}

 ul.megacatlist li ul li a:hover, ul.megabrandlist li ul li a:hover
{
    text-decoration:underline !important;
    border:none !important;
    }

.topNavSection a{color:#ffffff;}
.topNavSection h3{padding:5px;border:none; text-decoration:underline;}

.dropdown a, .dropdown ul li ul li  {
    color: #4D4D4D;
    font-size: 14px !important;
    padding: 0px 0px 0px 5px;
    position: relative;
    text-decoration: none;
    text-transform: none !important;
    display:block;
    width: 100%;
    height: 100%;
    line-height: 30px;
}

.dropdown a:hover, .dropdown ul li ul li:hover
{
    margin:0px;
    padding-left:5px;
    text-decoration:underline;
    display:block;
    }

#topnav ul {
    display: block;
    list-style: none outside none;
    margin: 0;
    padding: 0;
    position: relative;
    width: 100%;
}

.dropdown ul li ul {
    margin-right: 0 !important;
}
#topnav ul li {
    font-size: 16px;
    margin-right: 51px;
}

#topnav ul li {
    display: block;
    float: left;
    font-size: 14px;
    margin: 0 35px 0 0;
    padding: 2px 5px;
    text-transform: uppercase;
    width: auto;
}

.dropdown ul li ul li {
    display: block !important;
    float: none !important;
    margin-right: 0 !important;
}

.dropdown ul li {
    display: block;
    float: left !important;
    margin-left: 0 !important;
    margin-right: 15px !important;
    max-width: 226px !important;
    padding-left: 0 !important;
    position: relative;
    text-align: left;
    width: auto !important;
    border: medium none !important;
}

.dropdown ul li:nth-of-type(2n) 
{
    margin:0px;
}

/*end mega menu*/ 
```

**JS**

```
/* start megamenu script */

function slideSubDown() {
    $(".mega").children('.dropdown').slideUp("fast");
    $(this).children('.dropdown').slideDown({
        speed: 1600,
        easing: "swing"
    })
    //$(this).children('a').addClass("pointer");
}
function slideSubUp() {
    $(".mega").children('.dropdown').slideUp("250");
    //$(this).children('a').removeClass("pointer");
}
$(".mega").hoverIntent(slideSubDown, slideSubUp);

/*end megamenu script */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:03:52.150

仅从 [http://jsfiddle.net/rUZVT/](http://jsfiddle.net/rUZVT/)获取 html（仅 div）css 和 JS ，并根据需要/喜欢更改类或更改样式等重新设置它的样式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:38:32.947

在整个列表项上使用悬停（而不是仅 h2 标签），这样它就包括下拉菜单，您应该得到预期的行为

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T13:39:56.500

`li`为元素设置悬停，它可能会有所帮助

# android - Android 菜单库：NewQuickAction3D 不起作用

> ID：12074404
> 
> 赞同：1
> 
> 时间：2012-08-22T13:36:18.777
> 
> 标签：android, quickaction

我正在尝试这两个库在我的 android 应用程序[NewQuickAction](https://github.com/lorensiuswlt/NewQuickAction)和[NewQuickAction3D](https://github.com/lorensiuswlt/NewQuickAction3D)中创建一个按钮菜单。

使用它们的代码是一样的！但是，如果我使用 NewQuickAction，它可以正常工作，相反，如果我更改项目中的外部库并使用 NewQuickAction3D，它就不起作用并返回此错误：

> 致命异常：net.londatiga.android.QuickAction.addActionItem(QuickAction.java:213) 的主要 java.lang.NullPointerException

代码是：

```
 ActionItem myLocationItem   = new ActionItem(ID_MY_LOCATION, "Mia posizione", getResources().getDrawable(R.drawable.location));
    ActionItem nearestItem      = new ActionItem(ID_NEAREST_STATION, "Stazione piu vicina", getResources().getDrawable(R.drawable.location));
    ActionItem activeGpsItem    = new ActionItem(ID_ACTIVE_GPS, "Attiva GPS", getResources().getDrawable(R.drawable.gps));

    // constructor for NewQuickAction       
    final QuickAction mQuickAction  = new QuickAction(this );

    // constructor for NewQuickAction3D
    //final QuickAction mQuickAction    = new QuickAction(this, QuickAction.VERTICAL);

    mQuickAction.addActionItem(myLocationItem);
    mQuickAction.addActionItem(nearestItem);
    mQuickAction.addActionItem(activeGpsItem);

    //setup the action item click listener
    mQuickAction.setOnActionItemClickListener(new QuickAction.OnActionItemClickListener() {
        @Override
        public void onItemClick(QuickAction quickAction, int pos, int actionId) {

            if (actionId == ID_MY_LOCATION) {
                Toast.makeText(getApplicationContext(), "I have no info this time", Toast.LENGTH_SHORT).show();
            } else if (actionId == ID_NEAREST_STATION ) {
                Toast.makeText(getApplicationContext(), "I have no info this time", Toast.LENGTH_SHORT).show();
            } else {
                Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
                startActivity(intent);
            }
        }
    });

    ImageButton buttonMenu = (ImageButton) findViewById(R.id.button_menu);
    buttonMenu.setOnClickListener(new View.OnClickListener() {
           @Override
           public void onClick(View v) {
                mQuickAction.show(v);
           }
        }); 
```

似乎用于创建新 ActionItem 的图标和文本在 NewQuickAction3D 中不可见

如果我将库作为普通项目运行（这些库也是演示项目），它们可以正常工作。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-24T17:41:11.110

清理项目，这对我有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T15:36:20.420

您必须添加其他资源文件

布局文件：来自垂直弹出的布局文件夹（action_item_vertical.xml，horiz_separator.xml）和popup_vertical.xml

图片文件：来自 Drawable 文件夹

来自 Values 文件夹的 styles.xml。

在此处检查[QuickAction.java](https://github.com/lorensiuswlt/NewQuickAction3D/blob/master/src/net/londatiga/android/QuickAction.java)并检查第 213 行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-26T09:46:19.710

最后在尝试了很多解决方案之后，解决我的问题的唯一（而不是优雅！）方法是将执行我的弹出菜单所需的类、Xml 文件和库的可绘制对象直接导入我的项目通缉。

这不是一个好方法，但任何东西都对我有用！

# mysql - SQL 选择 2 个 LIKE

> ID：12074408
> 
> 赞同：2
> 
> 时间：2012-08-22T13:36:30.507
> 
> 标签：mysql, sql-like

我需要这个查询来选择 category = logotypes 和 full_text 就像搜索词一样的所有帖子。

```
SELECT      *
FROM        posts
WHERE       category = :logotypes
AND         full_text LIKE CONCAT('%', :term, '%')
ORDER BY    post_date DESC 
```

但我希望搜索词也检查是否在标题中完成了任何匹配，例如：

```
 SELECT      *
    FROM        posts
    WHERE       category = :logotypes
    AND         full_text LIKE CONCAT('%', :term, '%')
--> ALSO CHECK  heading LIKE CONCAT('%', :term, '%')
    ORDER BY    post_date DESC 
```

我该怎么办？

PS该类别应始终保留。它仍然必须是`category = :logotypes`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T13:38:01.163

只需替换`ALSO CHECK`为`OR`：

```
SELECT      *
FROM        posts
WHERE       category = :logotypes
AND        (full_text LIKE CONCAT('%', :term, '%')
OR          heading LIKE CONCAT('%', :term, '%'))
ORDER BY    post_date DESC 
```

`OR`观察-connected 谓词周围的括号

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T13:38:10.960

```
SELECT      * 
FROM        posts 
WHERE       category = :logotypes 
AND        
(
    full_text LIKE CONCAT('%', :term, '%') 
    OR 
    heading LIKE CONCAT('%', :term, '%')  
)
ORDER BY    post_date DESC 
```

或者，如果你觉得晦涩难懂

```
AND CONCAT(full_text,'/', heading) LIKE CONCAT('%', :term, '%') 
```

# android - 在android中将日期时间从一个时区转换为另一个时区

> ID：12074409
> 
> 赞同：0
> 
> 时间：2012-08-22T13:36:33.883
> 
> 标签：android, timezone

我正在使用 smack api 例如消息。我想用消息发送当前时间。所以我将当前时间设置为消息主题。然后在接收方获取那个时间。但问题是消息主题应该是字符串所以我在发送方将日期时间转换为字符串，然后在接收方再次从字符串转换为日期时间。我希望发送方的日期时间应该根据接收方的时区进行转换。我已经编写了如下代码，但我可以' t 将日期时间转换为接收方时区的日期时间。

```
//sender side
Calendar c = Calendar.getInstance(); 
SimpleDateFormat formatter = new SimpleDateFormat("EEE MMM dd HH:mm:ss zzzz yyyy");
String strdt= formatter.format(c.getTime());
message.setSubject(strdt); 
```

接收端

```
TimeZone tz = TimeZone.getDefault();
String strzone=tz.getDisplayName(false, TimeZone.SHORT);
String str=message.getSubject();
Date expiry = null;
SimpleDateFormat formatter = new SimpleDateFormat("EEE MMM dd HH:mm:ss zzzz yyyy");
                 formatter.setTimeZone(TimeZone.getTimeZone(strzone));
        try { 
                expiry = formatter.parse(str);
                  }
          catch (Exception e) 
                {e.printStackTrace();}

SimpleDateFormat df = new SimpleDateFormat("EEE MMM dd HH:mm:ss zzzz yyyy");
            df.setTimeZone(TimeZone.getTimeZone(strzone));  
String formattedDate1= df.format(expiry);  
Log.i("receiving time",formattedDate1); 
```

我得到了一个输出

消息主题=> 2012 年 8 月 22 日星期三 13:35:13 GMT+00:00

从字符串转换为日期后 => Wed Aug 22 07:35:13 MDT 2012

设置接收方的时区后 => Wed Aug 22 06:35:13 GMT-07:00 2012

实际接收方时间 => 2012 年 8 月 22 日星期三 06:39:56 MDT

**编辑**

实际上，我想将发送者的时间发送给接收者，并且在接收者端，应该根据接收者的时区进行转换。如上所述，接收者的实际时间与转换时间不同。所以，如果您有不同的代码，请在此处发布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:52:11.187

使用普通的 long 来表示时间。(Long.toString(new Date().getTime())。它不包含（也不需要）任何 TZ 信息，因此更灵活。

# python - 未定义全局名称

> ID：12074414
> 
> 赞同：1
> 
> 时间：2012-08-22T13:36:43.000
> 
> 标签：python

我正在尝试检查是否定义了全局文件。

```
import os, sys, logging...

global my_logger

def init():
  if my_logger is None:
     print 'Logger needs to be initialized' 
```

但是，当我运行它时，我得到了错误：

```
NameError: global name 'my_logger' is not defined 
```

有没有办法检查变量是否已声明？在运行检查之前是否必须初始化全局变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T13:44:40.363

正如其他答案所述，访问全局变量时需要全局关键字，而不是声明时。应该注意的是，您只需要声明一个变量，就`global`好像您打算为其分配任何东西一样 - 您可以从更高的范围读取变量，而无需使用 global 关键字：

```
my_logger = None

def init_logger():
    #needs to use global because we assign to the variable
    global my_logger
    my_logger = MyLogger()

def someOtherFunction():
    #no need to use global as we only access the logger
    if my_logger:
        my_logger.info("i can has logger")
    else:
        print 'logger not initialized' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T13:40:36.953

`global`当您需要引用全局变量时使用关键字，而不是在定义它时：

```
import os, sys, logging...

my_logger = None

def init():
  global my_logger
  if my_logger is None:
     print 'Logger needs to be initialized' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-22T13:45:20.230

您没有`global`正确使用关键字，请查找一些相关文档。

但是，作为一般规则，您可以测试全局变量是否定义如下：

```
defined = 'my_logger' in globals()
if defined:
    print('my_logger has not been defined') 
```

# three.js - Three.js requestAnimationFrame 或 TweenMax 刻度处理程序

> ID：12074416
> 
> 赞同：4
> 
> 时间：2012-08-22T13:36:46.690
> 
> 标签：three.js, gsap

我一直在试验[Greensock 的 TweenMax JS](http://www.greensock.com/get-started-js/)和[Three.js](https://github.com/mrdoob/three.js/)。由于两个库都使用 requestAnimationFrame (rAF)，我需要决定哪个库应该处理这个问题。

如果我使用内置的 rAF `Three.js`，它的运行速度约为 30fps，并且非常流畅。

如果我使用`TweenMax`例如：`TweenMax.ticker.addEventListener('tick', animate);`它运行大约 55-60fps 但有点波涛汹涌。

我可以更改与 Three.js rAF 版本类似的预期运行的`TweenMax`fps `TweenMax.ticker.fps(30);`。

我的问题是哪种方法更受青睐，并且哪种方法被认为是最佳实践？另外，如果我选择 Three.js，我是否能够在其 rAF 实现中更改 fps？

最后，您将如何决定 fps 以适应更广泛的受众？限制为 30fps 似乎没问题，但有点武断，一些用户的速率可能比我允许的高得多。

**更新 ：**

根据 mrdoob 和 jack 的反馈，我已经尝试过在 three.js 中的 rAF 和使用 TweenMax 的 rAF，并打开和关闭了抗锯齿。

抗锯齿：

```
Three.js rAF (default) - 30fps smooth. 
```

[http://jsfiddle.net/cR7Lx/21/](http://jsfiddle.net/cR7Lx/21/)

```
TweenMax rAF (default) - 55-60fps slightly choppy. 
```

[http://jsfiddle.net/cR7Lx/23/](http://jsfiddle.net/cR7Lx/23/)

```
TweenMax rAF (fps(30)) - 30fps smooth. 
```

[http://jsfiddle.net/cR7Lx/24/](http://jsfiddle.net/cR7Lx/24/)

抗锯齿关闭：

```
Three.js rAF (default) - 30 - 60fps slightly choppy.
TweenMax rAF (default) - 92-120fps slightly choppy.
TweenMax rAF (fps(30)) - 30fps smooth. 
```

可以与知道 requestAnimationFrame 如何在后台工作的人一起帮助解释差异，现在我将使用 TweenMax 30fps 或 Three.js 两者都启用抗锯齿。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T00:00:48.750

澄清一下，默认的 TweenMax RAF 行为不会限制 fps，因为......嗯......这就是 requestAnimationFrame 的重点——它旨在成为**浏览器**所要求的东西（通常是大约 60 帧/秒）。*使用TweenMax.ticker.fps()*设置特定的 fps只是对其设置一个上限（除非您设置*TweenMax.ticker.useRAF(false)*在这种情况下，它将使用*setTimout()*来尽可能接近您的 fps放）。

我注意到有人说你必须在 TweenMax 中设置一个 fps 以使其平滑，我只是想澄清这不是真的 - 如果/当它们发生得太快时，这样做只会跳过 RAF 更新 - 我无法想象那怎么会让事情变得更顺利。它可能会适得其反。

如果您想将帧速率降低到**低于正常**浏览器刷新率（通常为 60fps 左右），请仅使用*TweenMax.ticker.fps() 。*如果您正在寻找最平滑的结果，我可能会坚持使用 TweenMax 的默认配置。您可以尝试关闭 requestAnimationFrame 并使用非常高的 fps ( *TweenMax.ticker.useRAF(false); TweenMax.ticker.fps(100)* )，但不利的一面是您会失去 RAF 的所有好处，例如改进电池移动设备上的生命在选项卡处于非活动状态时，使用本机浏览器的同步更新刷新等。

 ***抖动行为的最大原因是与 JavaScript 动画引擎无关的浏览器中的图形渲染。

我不熟悉 Three.js，所以我无法谈论它的功能或哪个选项会更好地用于驱动您的其他东西（抱歉）。我只能说我是 GreenSock 的忠实粉丝（哈哈）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:26:53.720

当我检查这两个实施时，实际上它们实际上非常相似。他们都使用[这种](http://paulirish.com/2011/requestanimationframe-for-smart-animating/)实现，但差别很小。

Three.js 实现计算您的最后一次通话并将下一次通话延迟（16 ms - lastCall）以修复您的 fps 60。如果它不能在 16 ms 内完成，它自然会等待，只要它需要。

TweenMax 的实施最初并没有修复您的 fps。相反，您必须手动调用 fps。这造成了这种波涛汹涌的局面。因为您必须始终提供正确的 fps 值（不多 - 不少）来调整延迟时间。

编辑 ：

我必须编辑 TweenMax 行为，因为我错过了在 fps 未定义时将默认 fps 设置为 60 的代码类末尾的构造函数调用 this.fps(fps)。***

# android - 在 android 中为 xlarge 屏幕提供更大的图像

> ID：12074421
> 
> 赞同：2
> 
> 时间：2012-08-22T13:37:10.633
> 
> 标签：android

我正在构建 2.2 版的 android 应用程序，我需要支持超大屏幕。布局渲染是没有问题的，但是有些设备特别大但是是mdpi。它从 drawable-mdpi 中获取所有可绘制对象，我希望我的布局为 xlarge 屏幕获取更大的图像，我什至定义了 drawable-xlarge 来加载更大的图像，但仍然从 drawable-mdpi 文件夹中加载图像。

我的其他可绘制文件夹是

drawable-ldpi 具有 32 x 32 尺寸的图像。 drawable-mdpi 具有 48 x 48 尺寸的图像。 drawable-hdpi 具有 72 x 72 尺寸的图像。 drawable-xhdpi 具有 96 x 尺寸的图像96.

然后对于超大屏幕，我有 drawable-xlarge，它有 108 x 108 的图像。

如何让 android 为 xlarge 屏幕加载更大的图像。应用程序没有从 drawable-xlarge 加载图像，我应该进行任何更改以将更大的图像加载到 xlarge 屏幕而不是从 drawable-mdpi 文件夹中。

任何帮助或指示都会有所帮助。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:01:59.907

您可能必须提供其他几个更具体的合格资源文件夹，例如`drawable-xlarge-mdpi`. [根据提供资源](http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources)中的信息，它*应该*按照您的方式工作（即屏幕尺寸限定符应该优先于密度限定符），但对您来说，它似乎没有按预期工作。你确定是`xlarge`显示器？如果是这样，我会尝试将您的图像放入`res/drawable-xlarge-mdpi`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:40:05.177

如果您为 x-large 屏幕制作单独的布局会更好，请参阅支持来自 android 开发者网站的多个屏幕，因为 android 系统将根据屏幕密度而不是尺寸从 mdpi、hdpi、ldpi 或 xhdpi 获取图像

# django - Syntastic + Django

> ID：12074423
> 
> 赞同：11
> 
> 时间：2012-08-22T13:37:19.100
> 
> 标签：django, syntax-checking, syntastic

我刚开始在 Django 上进行开发，然后我认为在它上面使用[Syntastic 语法检查器](https://github.com/scrooloose/syntastic)会是一个好主意。

问题是它抱怨某些事情是错误的，而事实上，它们并非如此。

例子：

1.  为了

    ```
    from django.core.urlresolvers import reverse 
    ```

    我得到：

    ```
    error| [F0401] Unable to import 'django.core.urlresolvers' 
    ```

2.  为了

    ```
    amount = self.sale_set.filter(date__year=year).aggregate(sum=Sum('amount'))["sum"] 
    ```

    我得到（在`self`哪里`Album`）

    ```
    error| [E1101, Album.get_sales_total] Instance of 'Album' has no 'sale_set' member 
    ```

即使有这些“错误”，这段代码也能完美运行，但我怎样才能让 Syntastic 表现正确呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-10-22T19:44:33.113

捎带@supervacuo的回答：

有一种方法可以使它适用于合成，并且对于不熟悉合成选项的人（例如，我）来说，这很简单，即使不容易弄清楚：

在你的 .vimrc 中，添加这一行：

`let g:syntastic_python_pylint_args = "--load-plugins pylint_django"`

当然，这确实需要`pylint-django`安装在您的环境中

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-20T20:54:25.497

这两条消息都来自——您可以使用或在[http://pylint-messages.wikidot.com/](http://pylint-messages.wikidot.com/)`pylint`上查看更完整的解释。`pylint --help-msg=$ID`

*您可以使用eg* 禁用检查`from django.core.urlresolvers import reverse # pylint: disable=F0401`，但这很快就会令人厌​​烦。

有一个[用于 Django 的 pylint 插件，](https://github.com/landscapeio/pylint-django)它肯定会修复你的 E1101（我希望 F0401 也是如此）。也许尝试安装插件并配置 Syntastic 以使用它？

# c++ - 距离路由矢量实现

> ID：12074433
> 
> 赞同：0
> 
> 时间：2012-08-22T13:38:06.797
> 
> 标签：c++

我正在尝试使用[http://www.cs.bu.edu/fac/byers/courses/791/F99/scribe_notes/cs791-notes-990923.html](http://www.cs.bu.edu/fac/byers/courses/791/F99/scribe_notes/cs791-notes-990923.html)
（在 C++ 中）实现距离矢量路由算法。

这是我所做的

远的：

```
i) Read no. of nodes.

ii) Implement the points 1 to 4 in the article as:

     for(i = 0; i < nodes; i++) //nodes is the no. of nodes
     {
         for(j = 0; j < nodes; j++)
         {
             if(distanceVector[i][j] != 0) //distanceVector holds the cost value between every pair of links, 0 if no link exists
             {
                  for(k = 0; k < nodes; k++)
                  {
                       if((distanceVector[i][j] + distanceVector[j][k]) < distanceVector[i][k])
                       {
                             distanceVector[i][k] = distanceVector[i][j] + distanceVector[j][k];
                             via[i][j] = i; // intermediate node, in case no link exists
                             via[j][i] = j;
                       }
                  }
              }
         }
     } 
```

我得到与它相同的数组/矩阵。我也尝试过处理**i、j 和 k**，但没有用。

我在我的实施中是对的......？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:46:31.017

关于您的代码，有两件事困扰着我。首先，您使用“0”表示“无链接”。这会给你带来麻烦。代码基本上如下所示：“如果有一个中间点 j，这使得从 i 到 k 的路径更短，则将路径从 i 到 k 更改为通过 k”。因此，使用“0”表示“无链接”可能会使您的代码选择错误的“via”。尝试使用无穷大（如果您使用浮点数）或一个非常大的值（例如，MAX_INT）。

其次，这些行看起来不对：

```
via[i][j] = i; // intermediate node, in case no link exists
via[j][i] = j; 
```

由于您找到了从 i 到 k via j 的路径较短，它应该是：

```
via[i][k] = j; // intermediate node, in case no link exists
via[k][i] = j; 
```

# c++ - 从 VS2012 项目链接使用 VS2008 构建的静态库？它们兼容吗？

> ID：12074439
> 
> 赞同：3
> 
> 时间：2012-08-22T13:38:22.307
> 
> 标签：c++, visual-studio, linker, visual-studio-2012

我有一堆静态 .lib 文件，包括链接到我的项目的 mysqlclient.lib、v8_base.lib 和 mysqlpp.lib，这些都是使用 Visual Studio 2008 构建的，它们是使用 /MT 运行时库选项构建的。

我刚刚尝试升级到 VS2012 并且代码编译得很好但是当项目被链接时我得到以下错误（总共超过 500 个错误）：

```
Error   47  error LNK2019: unresolved external symbol "public: __thiscall std::_Mutex::~_Mutex(void)" (??1_Mutex@std@@QAE@XZ) referenced in function "public: void __thiscall std::ios_base::clear(int,bool)" (?clear@ios_base@std@@QAEXH_N@Z)  D:\server\mysqlpp.lib(dbdriver.obj) server
Error   48  error LNK2001: unresolved external symbol "public: __thiscall std::_Mutex::~_Mutex(void)" (??1_Mutex@std@@QAE@XZ)   D:\server\mysqlpp.lib(datetime.obj) server
Error   49  error LNK2001: unresolved external symbol "public: __thiscall std::_Mutex::~_Mutex(void)" (??1_Mutex@std@@QAE@XZ)   D:\server\mysqlpp.lib(stadapter.obj)    server
Error   50  error LNK2001: unresolved external symbol "public: __thiscall std::_Mutex::~_Mutex(void)" (??1_Mutex@std@@QAE@XZ)   D:\server\mysqlpp.lib(sqlstream.obj)    server
Error   51  error LNK2001: unresolved external symbol "public: __thiscall std::_Mutex::~_Mutex(void)" (??1_Mutex@std@@QAE@XZ)   D:\server\mysqlpp.lib(connection.obj)   server
Error   52  error LNK2001: unresolved external symbol "public: __thiscall std::_Mutex::~_Mutex(void)" (??1_Mutex@std@@QAE@XZ)   D:\server\mysqlpp.lib(mystring.obj) server
Error   53  error LNK2001: unresolved external symbol "public: __thiscall std::_Mutex::~_Mutex(void)" (??1_Mutex@std@@QAE@XZ)   D:\server\mysqlpp.lib(row.obj)  server
Error   54  error LNK2001: unresolved external symbol "public: __thiscall std::_Mutex::~_Mutex(void)" (??1_Mutex@std@@QAE@XZ)   D:\server\mysqlpp.lib(query.obj)    server
Error   55  error LNK2001: unresolved external symbol "long const std::_BADOFF" (?_BADOFF@std@@3JB) D:\server\mysqlpp.lib(dbdriver.obj) server
Error   56  error LNK2001: unresolved external symbol "long const std::_BADOFF" (?_BADOFF@std@@3JB) D:\server\mysqlpp.lib(datetime.obj) server
Error   57  error LNK2001: unresolved external symbol "long const std::_BADOFF" (?_BADOFF@std@@3JB) D:\server\mysqlpp.lib(stadapter.obj)    server
Error   58  error LNK2001: unresolved external symbol "long const std::_BADOFF" (?_BADOFF@std@@3JB) D:\server\mysqlpp.lib(sqlstream.obj)    server
Error   59  error LNK2001: unresolved external symbol "long const std::_BADOFF" (?_BADOFF@std@@3JB) D:\server\mysqlpp.lib(connection.obj)   server
Error   60  error LNK2001: unresolved external symbol "long const std::_BADOFF" (?_BADOFF@std@@3JB) D:\server\mysqlpp.lib(mystring.obj) server
Error   61  error LNK2001: unresolved external symbol "long const std::_BADOFF" (?_BADOFF@std@@3JB) D:\server\mysqlpp.lib(row.obj)  server
Error   62  error LNK2001: unresolved external symbol "long const std::_BADOFF" (?_BADOFF@std@@3JB) D:\server\mysqlpp.lib(query.obj)    server
Error   63  error LNK2001: unresolved external symbol "public: static void __cdecl std::_String_base::_Xran(void)" (?_Xran@_String_base@std@@SAXXZ) D:\server\mysqlpp.lib(qparms.obj)   server
Error   64  error LNK2001: unresolved external symbol "public: static void __cdecl std::_String_base::_Xran(void)" (?_Xran@_String_base@std@@SAXXZ) D:\server\mysqlpp.lib(sqlstream.obj)    server
Error   65  error LNK2001: unresolved external symbol "public: static void __cdecl std::_String_base::_Xran(void)" (?_Xran@_String_base@std@@SAXXZ) D:\server\mysqlpp.lib(options.obj)  server
Error   66  error LNK2001: unresolved external symbol "public: static void __cdecl std::_String_base::_Xran(void)" (?_Xran@_String_base@std@@SAXXZ) D:\server\mysqlpp.lib(field_types.obj)  server
Error   67  error LNK2019: unresolved external symbol "public: static void __cdecl std::_String_base::_Xran(void)" (?_Xran@_String_base@std@@SAXXZ) referenced in function "public: char __thiscall mysqlpp::SQLTypeAdapter::at(unsigned int)const " (?at@SQLTypeAdapter@mysqlpp@@QBEDI@Z)  D:\server\mysqlpp.lib(stadapter.obj)    server
Error   68  error LNK2001: unresolved external symbol "public: static void __cdecl std::_String_base::_Xran(void)" (?_Xran@_String_base@std@@SAXXZ) D:\server\mysqlpp.lib(manip.obj)    server
Error   69  error LNK2001: unresolved external symbol "public: static void __cdecl std::_String_base::_Xran(void)" (?_Xran@_String_base@std@@SAXXZ) D:\server\mysqlpp.lib(null.obj) server
Error   70  error LNK2001: unresolved external symbol "public: static void __cdecl std::_String_base::_Xran(void)" (?_Xran@_String_base@std@@SAXXZ) D:\server\mysqlpp.lib(datetime.obj) server
Error   71  error LNK2001: unresolved external symbol "public: static void __cdecl std::_String_base::_Xran(void)" (?_Xran@_String_base@std@@SAXXZ) D:\server\mysqlpp.lib(type_info.obj)    server
Error   72  error LNK2001: unresolved external symbol "public: static void __cdecl std::_String_base::_Xran(void)" (?_Xran@_String_base@std@@SAXXZ) D:\server\mysqlpp.lib(vallist.obj)  server
Error   73  error LNK2001: unresolved external symbol "public: static void __cdecl std::_String_base::_Xran(void)" (?_Xran@_String_base@std@@SAXXZ) D:\server\mysqlpp.lib(field_names.obj)  server
Error   74  error LNK2001: unresolved external symbol "public: static void __cdecl std::_String_base::_Xran(void)" (?_Xran@_String_base@std@@SAXXZ) D:\server\mysqlpp.lib(query.obj)    server
Error   75  error LNK2001: unresolved external symbol "public: static void __cdecl std::_String_base::_Xran(void)" (?_Xran@_String_base@std@@SAXXZ) D:\server\mysqlpp.lib(dbdriver.obj) server
Error   76  error LNK2001: unresolved external symbol "public: static void __cdecl std::_String_base::_Xran(void)" (?_Xran@_String_base@std@@SAXXZ) D:\server\mysqlpp.lib(tcp_connection.obj)   server
Error   77  error LNK2001: unresolved external symbol "public: static void __cdecl std::_String_base::_Xran(void)" (?_Xran@_String_base@std@@SAXXZ) D:\server\mysqlpp.lib(uds_connection.obj)   server
Error   78  error LNK2001: unresolved external symbol "public: static void __cdecl std::_String_base::_Xran(void)" (?_Xran@_String_base@std@@SAXXZ) D:\server\mysqlpp.lib(connection.obj)   server
Error   79  error LNK2001: unresolved external symbol "public: static void __cdecl std::_String_base::_Xran(void)" (?_Xran@_String_base@std@@SAXXZ) D:\server\mysqlpp.lib(mystring.obj) server
Error   80  error LNK2001: unresolved external symbol "public: static void __cdecl std::_String_base::_Xran(void)" (?_Xran@_String_base@std@@SAXXZ) D:\server\mysqlpp.lib(row.obj)  server
Error   81  error LNK2001: unresolved external symbol "public: static void __cdecl std::_String_base::_Xran(void)" (?_Xran@_String_base@std@@SAXXZ) D:\server\mysqlpp.lib(result.obj)   server
Error   82  error LNK2001: unresolved external symbol "public: static void __cdecl std::_String_base::_Xlen(void)" (?_Xlen@_String_base@std@@SAXXZ) D:\server\mysqlpp.lib(null.obj) server
Error   83  error LNK2001: unresolved external symbol "public: static void __cdecl std::_String_base::_Xlen(void)" (?_Xlen@_String_base@std@@SAXXZ) D:\server\mysqlpp.lib(qparms.obj)   server
Error   84  error LNK2001: unresolved external symbol "public: static void __cdecl std::_String_base::_Xlen(void)" (?_Xlen@_String_base@std@@SAXXZ) D:\server\mysqlpp.lib(sqlstream.obj)    server
Error   85  error LNK2001: unresolved external symbol "public: static void __cdecl std::_String_base::_Xlen(void)" (?_Xlen@_String_base@std@@SAXXZ) D:\server\mysqlpp.lib(field_types.obj)  server
Error   86  error LNK2001: unresolved external symbol "public: static void __cdecl std::_String_base::_Xlen(void)" (?_Xlen@_String_base@std@@SAXXZ) D:\server\mysqlpp.lib(stadapter.obj)    server
Error   87  error LNK2001: unresolved external symbol "public: static void __cdecl std::_String_base::_Xlen(void)" (?_Xlen@_String_base@std@@SAXXZ) D:\server\mysqlpp.lib(manip.obj)    server
Error   88  error LNK2001: unresolved external symbol "public: static void __cdecl std::_String_base::_Xlen(void)" (?_Xlen@_String_base@std@@SAXXZ) D:\server\mysqlpp.lib(utility.obj)  server
Error   89  error LNK2001: unresolved external symbol "public: static void __cdecl std::_String_base::_Xlen(void)" (?_Xlen@_String_base@std@@SAXXZ) D:\server\mysqlpp.lib(datetime.obj) server
Error   90  error LNK2001: unresolved external symbol "public: static void __cdecl std::_String_base::_Xlen(void)" (?_Xlen@_String_base@std@@SAXXZ) D:\server\mysqlpp.lib(type_info.obj)    server
Error   91  error LNK2001: unresolved external symbol "public: static void __cdecl std::_String_base::_Xlen(void)" (?_Xlen@_String_base@std@@SAXXZ) D:\server\mysqlpp.lib(vallist.obj)  server
Error   92  error LNK2001: unresolved external symbol "public: static void __cdecl std::_String_base::_Xlen(void)" (?_Xlen@_String_base@std@@SAXXZ) D:\server\mysqlpp.lib(field_names.obj)  server
Error   93  error LNK2001: unresolved external symbol "public: static void __cdecl std::_String_base::_Xlen(void)" (?_Xlen@_String_base@std@@SAXXZ) D:\server\mysqlpp.lib(query.obj)    server
Error   94  error LNK2001: unresolved external symbol "public: static void __cdecl std::_String_base::_Xlen(void)" (?_Xlen@_String_base@std@@SAXXZ) D:\server\mysqlpp.lib(dbdriver.obj) server
Error   95  error LNK2001: unresolved external symbol "public: static void __cdecl std::_String_base::_Xlen(void)" (?_Xlen@_String_base@std@@SAXXZ) D:\server\mysqlpp.lib(tcp_connection.obj)   server 
```

VS2012 的标准库定义的运行时符号是否与 VS2008 提供的不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T13:43:35.417

您看到的问题是由于 STL 和作为 C++ 的一部分提供的其他库的差异。您可以尝试以下链接器开关：

```
/NODEFAULTLIB[:library] 
```

在 VS2008 端构建它时，如果你不能这样做，那么你就不走运了。基本上，您必须做的是摆脱标准库，从而将解析它们的任务委托给稍后使用生成的 static 的链接器`.lib`。

我应该补充一点，您还需要确保只使用收件人库知道的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-10T13:14:22.243

MS 有时会更改标准库函数的实现。我只需要解决一个类似的问题，其中 std::_String_base::_Xran () 和 Xlen 的调用约定已从 thiscall 切换到 cdecl。您必须找出不同版本之间发生了什么。然后可以通过包装器来解决这个问题，这些包装器使用所需的调用约定和名称装饰导出函数并重定向到新的实现。

```
#include <string>

namespace std2008
{
class _String_base_2008
{ 
    public:
        __declspec(dllexport) void _Xlen2008(void) const; 
        __declspec(dllexport) void _Xran2008(void) const; 
};
};

void std2008::_String_base_2008::_Xran2008 () const
{
    std::_String_base::_Xran ();
}

void std2008::_String_base_2008::_Xlen2008 () const
{
    std::_String_base::_Xlen ();
} 
```

将此代码保存为“compat.cpp”并编译

```
cl /D_DLL_EXPORT /EHsc /LD compat.cpp /link 
```

现在让我们检查已创建的 lib 文件：

```
dumpbin /exports compat.lib 
```

就我而言，它看起来像这样：

```
Dump of file compat.lib

File Type: LIBRARY

     Exports

       ordinal    name

                  ?_Xlen2008@_String_base_2008@std2008@@QBEXXZ (public: void __thiscall std2008::_String_base_2008::_Xlen2008(void)const )
                  ?_Xran2008@_String_base_2008@std2008@@QBEXXZ (public: void __thiscall std2008::_String_base_2008::_Xran2008(void)const ) 
```

查看有关缺少符号的链接器错误时，您会看到所需的修饰。在您的情况下，它的 "?_Xran@_String_base@std@@SAXXZ" 和 "?_Xlen@_String_base@std@@SAXXZ"

最后一步是告诉链接器创建一个库，该库使用链接器错误中的符号和从 dumpbin 中获取的名称将标准修饰名称映射到另一个名称。

```
cl /EHsc /LD compat.cpp /link /export:_Xran@_String_base@std@@SAXXZ=?_Xran2008@_String_base_2008@std2008@@QBEXXZ /export:?_Xlen@_String_base@std@@SAXXZ=?_Xlen2008@_String_base_2008@std2008@@QBEXXZ 
```

必须为链接器抱怨的所有功能执行类似的重定向器。

现在将“compat.lib”库作为附加库添加到您的项目中，现在它应该可以成功链接。

# java - ArrayList vs LinkedList - 插入时间

> ID：12074441
> 
> 赞同：0
> 
> 时间：2012-08-22T13:38:29.897
> 
> 标签：java, collections

当我（分别）运行时：

```
package containers;

import java.util.*;

    public static void main(String[] args) {

    List<Integer> arLst = new ArrayList<Integer>();
    List<Integer> lnLst = new LinkedList<Integer>();

    long start = System.currentTimeMillis();

    for (int i = 0; i < 10000000; i++) {
        arLst.add(i);
    }

    System.out.println("Array list: "+Long.toString(System.currentTimeMillis()-start));

    start = System.currentTimeMillis();

    for (int i = 0; i < 10000000; i++) {
        lnLst.add(i);
    }

    System.out.println("Linked list: "+Long.toString(System.currentTimeMillis()-start));
} 
```

我得到大致相同的执行时间。我知道 LinkedList 的添加时间应该更快。我想知道为什么..（对于中间插入和最后一个元素来说是有道理的 - 因为数组知道在 O(1) 中插入的位置，不像 LinkedList 必须遍历整个列表，我记得）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T13:41:11.493

两个列表都知道列表末尾的位置，因此插入时间几乎相同。我本来希望 LinkedList 会稍微慢一些，因为它为每个元素创建一个节点并使用更多内存。

我明白了

```
TIntArrayList - 141 ms
ArrayList<Integer> - 810 ms
LinkedList<Integer> - 5190 ms. 
```

TIntArrayList 不会更有效地使用缓存为每个元素创建对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T13:41:19.020

你的两个列表都是`ArrayList`...如果你改变它们，`LinkedList`你也不会注意到有很大的不同。`ArrayList`以您的方式构建每次插入的复杂度为 O(1)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-22T13:43:14.787

您的代码与您的解释不同。但是，这是您问题的答案：

[ArrayList 与 LinkedList](https://stackoverflow.com/questions/5846183/arraylist-vs-linkedlist)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-22T13:40:19.070

嗯……也许是这样的：

```
List<Integer> lnLst = new ArrayList<>(); 
```

应该是这样的：

```
List<Integer> lnLst = new LinkedList<>(); 
```

而且我无法理解您要测量什么。我认为您想衡量`add`性能，然后您的代码应如下所示：

```
 public static void main(String[] args) {

        List<Integer> arLst = new ArrayList<Integer>();
        List<Integer> lnLst = new LinkedList<Integer>();

        long start = System.currentTimeMillis();

        for (int i = 0; i < 10000000; i++) {
            arLst.add(i);
        }

        System.out.println("Array list: "+Long.toString(System.currentTimeMillis()-start));

        start = System.currentTimeMillis();

        for (int i = 0; i < 10000000; i++) {
            lnLst.add(i);
        }

        System.out.println("Linked list: "+Long.toString(System.currentTimeMillis()-start));
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T13:52:16.080

> ...因为数组知道在 O(1) 中插入的位置，不像 LinkedList 必须遍历整个列表，我记得）。

这是不正确的。数组（不是 ArrayLists）没有固定的插入时间，Java 的 ArrayList在*技术上*也没有（添加操作在 ArrayList 的*摊销固定时间内*运行）。

此外，将元素插入链表是`O(1)`：

> 除了实现 List 接口外，LinkedList 类还提供了统一命名的方法来获取、删除和插入列表开头和结尾的元素。

如果要插入排序列表，复杂度将变为`O(N)`.

# - TweenLite

> ID：12074450
> 
> 赞同：0
> 
> 时间：2012-08-22T13:39:00.230
> 
> 标签：

TweenLite 是一个极其快速、轻量级和灵活的补间引擎，它是 GreenSock 动画平台 (GSAP) 的基础，该平台可用于 JavaScript、ActionScript 3 和 ActionScript 2。

# ajax - ajax 调用没有响应 $.post

> ID：12074455
> 
> 赞同：0
> 
> 时间：2012-08-22T13:39:20.630
> 
> 标签：ajax, jquery

我想要做的是通过 jquery 选择来获取所选元素的值。之后，这些值通过 ajax 发布到 php 脚本，然后从数据库中检索数据并将其显示在同一页面上（称为自动竞争）。

```
var marvalue=$("input[name=m_status]:checked").val();
var fromhvalue=$("#fromheight").val();
var tohvalue=$("#toheight").val();
var value = $("#edu_det1").val();
alert (value);
var regvalue = $("#religion").val();
alert (regvalue);
var occvalue = $("#occupation").val();
alert (occvalue);
var convalue = $("#country").val();
alert (convalue); 
```

警报用于检查正确的值。正如您在上面的代码中看到的，这将从不同的输入元素中获取值。下面是我用来发布到 php 的代码

```
/*                              
$.post("regsearch.php", {queryString: ""+value+"",queryString1: ""+marvalue+"",queryStringfage: ""+fage+"",queryStringtage: ""+tage+""+queryStringfromh: ""+fromhvalue+""+queryStringtoh: ""+tohvalue+""+}, function(data) { // Do an AJAX call
            $('#suggestions').fadeIn(); // Show the suggestions box
            $('#suggestions').html(data); // Fill the suggestions box
        });
                                        */ 
```

**问题**：

当评论被删除时，警报弹出窗口也没有显示结果。好的，因为没有发布任何查询。
主要部分是当我使用下面的代码时，它只保留`m_status`并且`edu_det1`它可以工作。

```
marvalue=$("input[name=m_status]:checked").val();
alert (marvalue);

var value = $("#edu_det1").val();

alert (value); 
```

上面的邮编是

```
$.post("regsearch.php", {
    queryString: ""+value+"",
    queryString1: ""+marvalue+"",
    queryStringfage: ""+fage+"",queryStringtage: ""+tage+""
}, function(data) {
    // Do an AJAX call
    $('#suggestions').fadeIn(); // Show the suggestions box
    $('#suggestions').html(data); // Fill the suggestions box
}); 
```

此处不添加年龄及其验证码。有什么问题以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:45:09.853

首先，您应该使用控制台查看 Javascript 错误，因为我确信这会产生一些错误。例如，查询字符串未定义。

我也会使用 console.log 而不是警报，它不那么烦人，而且信息量更大。

然后：您不需要使用 fe ""+marvalue+"" - 只需使用 marvalue。另一方面 fe queryString 应该被引用......

```
$.post("regsearch.php", {'queryString':value,'queryString1': marvalue,'queryStringfage':fage,'queryStringtage':tage,'queryStringfromh': fromhvalue,'queryStringtoh':tohvalue}, function(data) { 
            $('#suggestions').fadeIn();
            $('#suggestions').html(data);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:45:37.967

如果你使用jquery`serialize()`函数会更好。这将使您的生活更容易使用表格。

```
var querstring = $(form).serialize(); 
```

以上会有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T13:46:27.450

我猜想使用 ajax post jQuery.ajax() 会做同样的事情，你甚至可以序列化页面中的字段。

[http://api.jquery.com/jQuery.ajax/#jQuery-ajax-settings](http://api.jquery.com/jQuery.ajax/#jQuery-ajax-settings)

我已经完成了类似类型的代码

UserName 是我要传递的字段

```
 var data = $('#Username').serialize();
        $('#usernameCheck').empty();

        if (!$("form").validate().element("#Username"))
            return;

        $.ajax({
            url: '/SignUp/CheckUsername',
            type: 'POST',
            data: data,
            async: true,
            success: function (result) {
                if (result == 1) {

                    $('#usernameCheck').html('<font color=green>Username available</font>');
                    usernameOK = true;
                }
                else if (result == 2) {

                    $('#usernameCheck').html('<font color=red>Username not available</font>');
                    usernameOK = false;
                }
                else {
                    $('#usernameCheck').empty();
                    usernameOK = false;
                }

            }
        }); 
```

# asp.net - 是否可以编辑已发布的 Visual Studio asp.net 网站？

> ID：12074462
> 
> 赞同：3
> 
> 时间：2012-08-22T13:39:34.157
> 
> 标签：asp.net, vb.net, web-applications

我已经使用 Visual Studio 发布了一个 asp.net 网站。但是，我希望对网页进行更改，但我发现发布的站点只有 .aspx 扩展名文件，并且没有类似于开发的代码隐藏 .vb 文件。

有什么方法可以让我在不重新发布的情况下进行编辑？或者我可以将已发布的网站转换回原始网站，因为我没有任何已发布文件的备份。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:47:10.343

从服务器下载所有文件并使用[反射器](http://www.reflector.net/)之类的工具从二进制/bin 文件夹中获取源代码。

为了将来总是使用源代码控制，我使用了保管箱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:24:24.220

dll 只是源代码的编译程序集。您可以手动更新任何已更新的 dll，而无需再次执行整个发布过程。更新 dll 后，您可能需要对 Web 配置文件进行细微更改，以触发 IIS 重新加载最新的 dll。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-10T09:41:18.953

你可以改变

```
<%@ page language="VB" autoeventwireup="false" inherits="test, App_Web_olnjngph" culture="bg-BG" uiculture="bg-BG" %> 
```

和

```
<%@ Page Language="VB" AutoEventWireup="false" CodeFile="test.aspx.vb" Inherits="test"  Culture="bg-BG" UICulture="bg-BG" %> 
```

并在内部文件之后编辑源代码**`test.aspx.vb`**

# java - 附件上传进度

> ID：12074465
> 
> 赞同：0
> 
> 时间：2012-08-22T13:39:35.247
> 
> 标签：java, jakarta-mail

我使用 javamail api 从 java 应用程序发送带有附件的电子邮件，这很简单。

```
File f= new File(file);
MimeBodyPart mbp2 = new MimeBodyPart();

try {
    mbp2.attachFile(f);
} catch (IOException e) {
    e.printStackTrace();
}

Multipart mp= new MimeMultipart();
mp.addBodyPart(mbp2);

message.setContent(mp); 
```

但我想知道的是如何知道我的附件的上传进度，不像httpclient我找不到要写入的输出流！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:51:49.040

请参阅方法实现。

```
public void attachFile(File file) throws IOException, MessagingException {
    FileDataSource fds = new FileDataSource(file);      
    this.setDataHandler(new DataHandler(fds));
    this.setFileName(fds.getName());
} 
```

您需要使用跟踪文件上传的自定义实现来覆盖 FileDataSource。

您应该重写 getInputStream() 方法以返回对读取字节进行计数的 FilterOutputStream。Apache commons-io 具有可以完成这项工作的[CountingInputStream类。](http://commons.apache.org/io/api-release/org/apache/commons/io/input/CountingInputStream.html)

然后，您只需将读取的字节数与文件长度进行比较即可获得进展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T17:25:42.743

好的，我通过覆盖 DataHandler() 做到了，它工作得非常好！

```
class progress extends DataHandler{
long len;
public idky(FileDataSource ds) {
    super(ds);
    len= ds.getFile().length();
    // TODO Auto-generated constructor stub
}

long transferredBytes=0;
public void writeTo(OutputStream os) throws IOException{

        InputStream instream = this.getInputStream();
        DecimalFormat dFormat = new DecimalFormat("0.00");

      byte[] tmp = new byte[4096];
      int l;
      while ((l = instream.read(tmp)) != -1)
      {
        os.write(tmp, 0, l);
        this.transferredBytes += l;
        System.out.println(dFormat.format(((double)transferredBytes/(double)this.len)*100)+"%");

      }
      os.flush();

}
} 
```

并将其添加到 MimeBodyPart。

# git - 使 .git-ftp-ignore 忽略除少数文件/目录之外的所有内容

> ID：12074473
> 
> 赞同：1
> 
> 时间：2012-08-22T13:39:56.033
> 
> 标签：git, web-deployment, git-ftp

例如，我怎样才能让 git-ftp 忽略整个目录“foo”而不是“foo/bar/”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-29T20:50:23.783

我在某处读到 git 2.9+ 你可以这样做

```
#untrack foo
foo/

# track foo/bar
!foo/bar/ 
```

# delphi - 如何在不丢失系统主题的情况下修复 TPageControl 背景颜色？

> ID：12074478
> 
> 赞同：10
> 
> 时间：2012-08-22T13:40:05.300
> 
> 标签：delphi, delphi-2010, vcl

在启用了主题的 Delphi 2010 应用程序中，我在一个带有 clMoneyGreen 背景的表单中有两个 TPageControls（一个在另一个里面）：

![在此处输入图像描述](../Images/b4cd813edeba244d4bdd8c755641702a.png)

外部页面控件正确地使用父组件的颜色绘制其背景，但是内部页面控件使用 clBtnFace（图像中的红色省略号）而不是其父控件 (TTabSheet) 的白色来绘制其背景。有没有办法在不将页面控件返回到其 Windows 经典外观（丢失 Windows 主题）的情况下解决此问题？

我在 Google 和 Stack Overflow 上找到的所有修复都涉及 OwnerDraw，这会使页面控件失去其主题。

我尝试使用一种方法来创建从 TPageControl 继承的新页面控件组件来处理 WM_ERASEBKGND 窗口消息：

```
procedure TMyPageControl.WMEraseBkGnd(var Msg: TWMEraseBkGnd);
begin
  if Parent is TCustomPageControl then
  begin
    Brush.Color := clWhite;
    Windows.FillRect(Msg.dc, ClientRect, Brush.Handle);
    Msg.Result := 1;
  end
  else
    inherited;
end; 
```

它将背景绘制为白色，但在 WM_ERASEBKGND 之后调用的其他一些方法（我猜是 TWinControl 的 WM_PAINT 方法）在白色背景上重新绘制灰色。

注意：我正在研究这个，因为我正在从 Delphi 7 移植的大型应用程序上实现主题，这就是为什么我试图通过派生组件解决这个问题：我可以轻松地搜索并用我的新课程，但在其中一些后面放置面板将需要更多时间。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-22T14:14:04.260

这是 Delphi 2010 中的一个已知错误。您可以通过添加一个面板来解决它，该面板是最外层选项卡的子级，并且是内部页面控件的父级。

我不知道为什么这可以解决问题。我只是自己发现了解决方法，因为我注意到在我的应用程序中，唯一正确呈现的嵌套选项卡/页面控件是那些带有适当插入的面板的控件。

如果我没记错的话，最新的 Delphi 版本中不存在该缺陷。

# macos - xcode 安装

> ID：12074480
> 
> 赞同：0
> 
> 时间：2012-08-22T13:40:13.347
> 
> 标签：macos, xcode4.4

我是 Mac 和 Xcode 的新手。我从应用商店下载了 xcode .dmg 文件并复制到我的 mac。安装后，它没有创建任何 /developer 文件夹，我无法在应用商店安装的应用程序中看到它。但我可以从虚拟驱动器启动 Xcode由 .dmg 文件创建。请指导我正确安装。我使用的是 Mac osx lion 和 XCode4.4.1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:46:15.033

按command+空格键，输入xcode，看看能不能找到

# eclipse - Eclipse 的代理问题

> ID：12074485
> 
> 赞同：1
> 
> 时间：2012-08-22T13:40:34.050
> 
> 标签：eclipse

我在 Eclipse（Indigo、Indigo SR2 和 Juno）中使用 Web 内容时遇到了一些奇怪的问题。当 Eclipse 尝试在 web 上做某事时，我的代理配置似乎被弄乱了。

我的浏览器停止通信，我必须重新启动我的机器才能再次恢复我的 Internet 访问（或关闭 Eclipse 和浏览器并强制浏览器重新加载代理配置）。在 Eclipse 中，通信不稳定，有时工作/不工作。

我的“网络连接”设置为手动，其中代理地址、端口、身份验证、用户和密码设置为 HTTP 和 HTTPS 模式（由于更新问题，我没有将其用于 SOCKS - 请参阅[此问题](https://stackoverflow.com/questions/5857499/how-do-i-have-to-configure-the-proxy-settings-so-eclipse-can-download-new-plugin)）。

我不知道发生了什么，为什么，以及如何解决它。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:46:02.110

Eclipse 不太可能影响您的全局设置。如果 Eclipse 之外的任何东西都不起作用，则应首先在那里查找问题。Eclipse 可以使用系统范围的设置，也可以使用它自己的覆盖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T13:51:02.460

我理解你的沮丧——很难知道出了什么问题。虽然我真的不明白 Eclipse 可以做什么来导致这种情况。不过，我可以建议一些进一步的故障排除步骤。

1.  您可以在任何其他机器上测试代理配置吗？
2.  其他时间可以在这台机器上正常浏览吗？
3.  您可以在浏览器中访问与 Eclipse 相同的 URL 吗？
4.  也许您有 Eclipse 检查所有站点的更新（帮助 > 软件），而这只是网络速度变慢？
5.  当您遇到这种影响时，您可以ping外部站点吗？

# sql - T-SQL - 如果查询仅返回一条记录，则需要运行更新

> ID：12074495
> 
> 赞同：2
> 
> 时间：2012-08-22T13:41:23.193
> 
> 标签：sql, tsql

我需要更新一条记录 IFF 只有一条记录符合我的搜索条件。这是我所拥有的，但它很粗糙：

```
DECLARE @TestCount INT;

SELECT @TestCount = COUNT(*)
FROM TestRecords tr
WHERE
    tr.UnitSerial = @UnitSerial
      AND
    tr.PassFailStatus = 1;

IF (@TestCount = 1)
UPDATE
    TestRecords
SET
    Invalid = 1
WHERE
    TestRecordID = 
           (SELECT TestRecordID
            FROM TestRecords tr
            WHERE
            tr.UnitSerial = @UnitSerial
              AND
            tr.PassFailStatus = 1); 
```

当然这是示例代码 - SELECT 语句中有更多的限制和表连接等，并且它们都由事务包装，但这是存储过程逻辑的要点。

我认为必须有更好的方法，但我不知道那是什么。有什么建议么？

谢谢，戴夫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T13:45:13.637

您可以在一个查询中执行以下操作：

```
with toupdate as (
     select tr.*,
            count(*) over () as cnt
     from TestRecords tr
     where tr.UnitSerial = @UnitSerial AND tr.PassFailStatus = 1
    )
update toupdate
    set Invalid = 1
    where cnt = 1 
```

这假设您使用的是 SQL 2005 或更高版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:44:52.647

我认为您的代码将毫无问题地运行！

使用@@ROWCOUNT 变量来确定有多少记录受到SELECTE、UPDATE、INSERT 语句的影响：但在您的情况下，您刚刚设置了具有相同结果的@TestCount 变量！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T13:45:51.750

这离我要做的不远了，这很简单：

```
IF (SELECT COUNT(*) FROM x WHERE y = z) = 1
BEGIN
    --statements
END 
```

当然，您可以将条件替换为任何内容，例如具有更复杂动态条件的 UDF。

# java - JPanel 设计问题

> ID：12074497
> 
> 赞同：4
> 
> 时间：2012-08-22T13:41:40.433
> 
> 标签：java, swing, graphics, jpanel, paintcomponent

我有窗体，我在 mouseClick 事件上绘制椭圆形。这对我来说很好。圆圈被绘制。但是当我最小化表单并再次最大化它时，面板被刷新并且圆圈被删除（即面板被留空）。

代码是：我有一个 JFrame，上面有一个名为 jPanel1 的 Jpanel，在这个面板上绘制了圆圈。

```
private void jPanel1MouseClicked(java.awt.event.MouseEvent evt) {
        count += 1;
        if (count <= clients) {
            drawCircle(evt.getX() - (radius / 2), evt.getY() - (radius / 2));
        }
    }

    public void drawCircle(int x, int y) {
        Graphics g = jPanel1.getGraphics();
        g.drawOval(x - radius, y - radius, 2 * radius, 2 * radius);
        g.setColor(Color.BLACK);
        g.fillOval(x - radius, y - radius, 2 * radius, 2 * radius);
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T14:10:00.423

在这种情况下，不仅为`paintComponent`JPanel 覆盖您的方法很重要，而且您还需要存储有关要绘制的圆圈的信息。`paintComponent`在通话期间，您可以使用存储的信息在屏幕上绘制所有圆圈。

```
import java.awt.*;
import java.awt.event.*;
import java.util.ArrayList;

import javax.swing.*;

public class TempProject extends JPanel{
    /** Stores info about circles  */
    public ArrayList<CircleInfo> circles = new ArrayList<CircleInfo>();

    /** fields that were in example code */
    public int count = 0;
    public final int radius = 20;
    public final int clients = 20;

    public TempProject(){

        addMouseListener(new MouseAdapter(){

            @Override
            public void mouseClicked(MouseEvent evt) {
                count += 1;
                if (count <= clients) {
                        // Store info about the circle to draw
                    circles.add(new CircleInfo(evt.getX() - (radius / 2), evt.getY() - (radius / 2), radius));
                        // Tell swing to repaint asap
                    repaint();
                }
            }});
    }

    @Override
    public void paintComponent(Graphics g ) {
            super.paintComponent(g);

            //Iterates through saved circles and paints them
        for(CircleInfo circle : circles){
            g.drawOval(circle.x - circle.radius, circle.y - circle.radius, 2 * circle.radius, 2 * circle.radius);
            g.setColor(Color.BLACK);
            g.fillOval(circle.x - circle.radius, circle.y - circle.radius, 2 * circle.radius, 2 * circle.radius);
        }
    }

    public static void main(String args[])    {
        EventQueue.invokeLater(new Runnable()
        {
            public void run()
            {
                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
                frame.setContentPane(new TempProject());  
                frame.setPreferredSize(new Dimension(400, 300));
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    /** Simple class for storing Circle info */
    public static class CircleInfo{
        int x = 0;
        int y = 0;
        int radius = 0;

        public CircleInfo(int x, int y, int radius){
            this.x = x; this.y = y; this.radius = radius;
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T13:45:39.780

您不必`paintComponent`在`JPanel`.

您应该改为扩展`JPanel`并将`drawCircle`代码放入`paintComponent`方法中：

```
public class DrawCircleClass extends JPanel
{
    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        g.drawOval(x - radius, y - radius, 2 * radius, 2 * radius);
        g.setColor(Color.BLACK);
        g.fillOval(x - radius, y - radius, 2 * radius, 2 * radius);
    }

} 
```

`paintComponent`当需要重绘组件时（例如，在最大化最小化窗口之后），Swing 将自动调用方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T13:45:02.197

所有图纸必须以面板的油漆方法完成。所以你必须在面板中重写这个方法并将绘图代码放在那里

# php - 列出类别及其产品

> ID：12074498
> 
> 赞同：2
> 
> 时间：2012-08-22T13:41:45.283
> 
> 标签：php, wordpress, wordpress-theming

使用 WP 电子商务，我正在尝试打印包含所有类别和产品的树。到目前为止，我只设法自己打印类别。

```
<?php wpsc_start_category_query(array('category_group'=>get_option('wpsc_default_category'), 'show_thumbnails'=> get_option('show_category_thumbnails'))); ?>
    <li>
        <a href="<?php wpsc_print_category_url();?>" class="wpsc_category_link <?php wpsc_print_category_classes_section();
        echo 'id';wpsc_print_category_id(); ?>"

        <?php wp_get_object_terms( $object_ids, $taxonomies, $args ); ?>
        <?php title="<?php wpsc_print_category_name(); ?>">
        <?php wpsc_print_category_name(); ?></a>
        <?php wpsc_print_subcategory("<ul>", "</ul>"); ?>
    </li>
<?php wpsc_end_category_query(); ?> 
```

我可以以某种方式将它们与产品混合在一起吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T05:39:34.937

查看您的产品是一种自定义帖子类型，因此您可以通过[get_categories() 显示所有类别；](http://codex.wordpress.org/Function_Reference/get_categories)函数它将返回与您的案例产品中的某些自定义帖子类型相关的所有类别的数组，并借助 foreach 循环和[get_posts(category => $category);](http://codex.wordpress.org/Template_Tags/get_posts) 您可以显示不同的类别和相关的帖子

# iphone - Facebook fbDidLogin 在 [facebook authorize:permissions] 之后被多次调用

> ID：12074508
> 
> 赞同：0
> 
> 时间：2012-08-22T13:42:35.300
> 
> 标签：iphone, facebook, cocoa-touch

当我尝试使用我的应用程序（安装了 facebook IOS 应用程序）登录 facebook 时遇到问题。一切正常，但委托方法上的 fbDidLogin 被调用了两次。

我调用了这个方法一次：

```
-(BOOL)checkForValidFBSessionAndAuthorize
{
    if (![facebook isSessionValid]) {
        NSArray *permissions = [[NSArray alloc] initWithObjects:
                                @"publish_stream",
                                nil];
        [facebook authorize:permissions];
        [permissions release];
    }
    return [facebook isSessionValid];
} 
```

我被重定向到 facebook 应用程序，然后我的应用程序被重新唤醒并调用“- (void)fbDidLogin”。两次！

我在 Facebook 应用程序上的 iPhone App Store ID 设置不正确，因为我只想先测试它，但捆绑包 ID 是正确的。有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:36:06.897

谢谢塞布拉西！你的猜测是正确的。我在打电话

```
[[FacebookService singleton].facebook handleOpenURL:url]; 
```

两次在

```
 - (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation 
```

# windows - 从 Windows 批处理文件中的字符串中删除第一个和最后一个字符

> ID：12074510
> 
> 赞同：13
> 
> 时间：2012-08-22T13:42:36.213
> 
> 标签：windows, batch-file, character, strip

我的 Windows 批处理文件中有以下字符串：

```
"-String" 
```

该字符串还包含字符串开头和结尾的两个引号，如上面所写。

我想去掉第一个和最后一个字符，以便得到以下字符串：

```
-String 
```

我试过这个：

```
set currentParameter="-String"
echo %currentParameter:~1,-1% 
```

这会按原样打印出字符串：

```
-String 
```

但是当我尝试像这样存储编辑的字符串时，它失败了：

```
set currentParameter="-String"
set currentParameter=%currentParameter:~1,-1%
echo %currentParameter% 
```

什么都没有打印出来。我做错了什么？

* * *

这真的很奇怪。当我删除这样的字符时，它可以工作：

```
set currentParameter="-String"
set currentParameter=%currentParameter:~1,-1%
echo %currentParameter% 
```

它打印出来：

```
-String 
```

但实际上我的批次有点复杂，在那里它不起作用。我将展示我编程的内容：

```
@echo off

set string="-String","-String2"

Set count=0
For %%j in (%string%) Do Set /A count+=1

FOR /L %%H IN (1,1,%COUNT%) DO ( 

    echo .
        call :myFunc %%H
)
exit /b

:myFunc
FOR /F "tokens=%1 delims=," %%I IN ("%string%") Do (

    echo String WITHOUT stripping characters: %%I 
    set currentParameter=%%I
    set currentParameter=%currentParameter:~1,-1%

    echo String WITH stripping characters: %currentParameter% 

    echo .

)
exit /b   

:end 
```

输出是：

```
.
String WITHOUT stripping characters: "-String"
String WITH stripping characters:
.
.
String WITHOUT stripping characters: "-String2"
String WITH stripping characters: ~1,-1
. 
```

但我想要的是：

```
.
String WITHOUT stripping characters: "-String"
String WITH stripping characters: -String
.
.
String WITHOUT stripping characters: "-String2"
String WITH stripping characters: -String2
. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-03-07T04:54:54.810

希望这会帮助你。

```
 setlocal enabledelayedexpansion

    echo String WITHOUT stripping characters: %%I 
    set currentParameter=%%I
    set currentParameter=!currentParameter:~1,-1!
    echo String WITH stripping characters: !currentParameter! 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-09T10:46:09.387

您正在修改带括号的块内的变量。注意 - 新值不会在同一个块中使用（除非你用 ! 而不是 % 来分隔变量 - 并在 enabledelayedexpansion 模式下运行）。或者只是将几行提取到另一个子函数中，使用插入 ( ) 的普通行序列

问候，斯塔奇

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-01-02T21:23:03.520

此脚本利用 ENABLEDELAYEDEXPANSION。如果您不知道，批处理脚本执行 for 和 if 命令全部合二为一；因此，如果你这样做：

```
if true==true (
@echo off
set testvalue=123
echo %testvalue%
pause >NUL
) 
```

您不会输出任何内容，因为执行 echo %testvalue% 时，它还没有识别出 testvalue 已更改。使用delayedexapnsion 允许脚本像现在一样读取该值，而忘记我之前提到的问题。你可以像 %testvalue% 一样使用它，但你可以使用 !testvalue! 解决这个问题：

```
if true==true (
@echo off
set testvalue=123
echo !testvalue!
pause >NUL
) 
```

*   会回显 123。

* * *

```
@echo off
SETLOCAL ENABLEDELAYEDEXPANSION
set string="-String","-String2"
Set count=0

For %%j in (%string%) Do Set /A count+=1

FOR /L %%H IN (1,1,%COUNT%) DO ( 
echo .
call :myFunc %%H
)

exit /b
:myFunc

FOR /F "tokens=%1 delims=," %%I IN ("%string%") Do (
echo String WITHOUT stripping characters: %%I 
set currentParameter=%%I
set currentParameter=!currentParameter:~1,-1!
echo String WITH stripping characters: !currentParameter! 
echo .
)

exit /b   
:end 
```

* * *

〜亚历克斯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-22T13:41:57.657

我有类似的问题，但它通过删除 Ex 之间的空格来解决： set FileName=%Name:~0,11% # Working as No space before and after '=' Ex : set FileName = %Name:~0,11% # Not在“=”之前或之后作为空格工作

所以请尝试删除空格，它应该可以工作注意：应该重新打开命令行以刷新背景值，否则它会显示与存储在 temp 中相同的输出

# jquery-mobile - 附加到标题之后的可协作内容？

> ID：12074513
> 
> 赞同：0
> 
> 时间：2012-08-22T13:42:50.583
> 
> 标签：jquery-mobile, jquery-selectors

我遇到了问题，关于追加。我有一个动态可协作，我用动态列表填充。我想将此列表附加在可协作的标题 h3 之后。当我将它附加到collabsible时，它不会出现在

```
<div class="ui-collapsible-content ui-collapsible-content-collapsed"> </div> 
```

但是之后。因此，我在内容标题和列表之间有一个空格，我想避免。我试过这个：

```
$('some-selector > ui-collapsible-content ui-collapsible-content-collapsed') but it does not work. 
```

任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:47:08.753

如果你想在里面追加

```
<div class="ui-collapsible-content ui-collapsible-content-collapsed"> </div> 
```

然后你应该使用：

```
$('div.ui-collapsible-content.ui-collapsible-content-collapsed').append($content); 
```

where`$content`是 jQuery 对象、DOM 元素或 HTML 字符串。请注意`.`选择器中的 ，它指定了一个（或两个）类。

见[附加](http://api.jquery.com/append/)。

# java - 在 TextView 中打印版权符号

> ID：12074521
> 
> 赞同：12
> 
> 时间：2012-08-22T13:43:23.497
> 
> 标签：java, android

我正在解析在某些标签中具有版权符号的 xml，我将其作为字符串获取并将其显示在 TextView 上。但不是符号，而是打印 #174; . 谁能告诉我如何打印适当的符号。

编辑：在 xml **Raghav©**中就像这样，我想这样显示它，但它只显示**#174；**

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-08-22T13:47:33.903

试试 unicode 符号 "\u00a9" 看看它是否有效

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-22T08:11:24.203

尝试使用字符串 '©' 的版权符号，它肯定会帮助您像这样访问您的 xml - **Raghav©**。

# c# - 十进制三进制不起作用

> ID：12074524
> 
> 赞同：6
> 
> 时间：2012-08-22T13:43:30.583
> 
> 标签：c#

我正在尝试使用三元来分配十进制类型。它不适合我。我要疯了吗？

这是我调试的屏幕截图。在我迈出之前，您可以看到一切的价值。 ![在此处输入图像描述](../Images/9a4dbbbf252da1aa33b41e3c8ab4a267.png)

在我走到这里之后就是价值。它甚至不是可行的选项之一（即 1 或 2000）。 ![在此处输入图像描述](../Images/e97f07ebb1a7458359100fe13f71beff.png)

小数有一些我不知道的奇怪限制吗？当我将其分解为完整的 if/else 逻辑表示时，它可以正常工作。我唯一能猜到的是我最近安装了 .NET Framework 4.5。

**更新**

我已经清理了解决方案，并确保我正在按照评论中的建议在调试模式下编译的代码上运行。这些似乎都没有改变任何东西。

当我注意到我所有的单元测试仍然通过时，我开始感到好奇。经过一番调查后，我发现当我再走一步（即跨过 memberItems.Add）时，价格神奇地具有正确的价值。

.Net 是否对三元运算符进行某种延迟解析，类似于迭代器块中的 yield 命令？我以前从未注意到它，但我不知道它还能是什么。我想我也可能意外地在发布模式下编译的代码上运行。在三重检查自己之后，我犯了更愚蠢的错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T15:15:52.770

无法从屏幕截图中诊断代码，所以只是猜测。

您不能总是*完全*依赖手表表达式告诉您的内容。第一种可能的故障模式是调试经过优化的代码。像*价格*这样的局部变量通常会由抖动优化器优化，以存储在 cpu 寄存器而不是堆栈中。watch 表达式将显示堆栈位置值，而不是 cpu 寄存器值。0 是一个常见的结果。您对此唯一真正的防御就是调试由 Debug 配置构建的代码。

第二种故障模式是评估监视表达式的方式。当 CLR 检测到附加的调试器时，它会启动一个专用线程。然后调试器可以使用这个线程来评估监视表达式。如果变量具有任何线程亲和性，这可能会出错。常见情况是 [ThreadStatic] 变量或 COM 对象的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-20T03:47:14.750

我有同样的问题，我还以为我要疯了。

我发现将我的 ASP.NET 应用程序更改为使用“Visual Studio Developer Server”而不是 IIS 可以修复它。可惜，因为我喜欢使用 IIS，因为这更接近生产中发生的事情。

# android - Android：与主应用程序具有相同资源文件名的 Jar 文件

> ID：12074525
> 
> 赞同：0
> 
> 时间：2012-08-22T13:43:34.250
> 
> 标签：android, jar

在我的应用程序中，我有一个名为 main.xml 的资源。我还有一个 jar 文件，其中包含一个名为 main.xml 的资源。直到最近，这一切正常，但后来我开始收到以下错误：

生成最终存档时出错：找到 APK 的重复文件：res/layout/main.xml

不知道为什么突然。必须可以在 jar 文件中包含具有相同文件名的资源。xml 文件实际上位于两个完全不同的路径下，所以我不明白为什么这应该是一个冲突。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:27:58.847

能够删除不需要的重复文件。解决了问题，但不是正确的做事方式。

# java - 加入后获取/设置列名

> ID：12074527
> 
> 赞同：1
> 
> 时间：2012-08-22T13:43:36.143
> 
> 标签：java, jdbc, resultset

我收到这样的查询：

```
String query="select* from Table1 T1 join Table2 T2 on T1.id=T2.id where T1.id=someid"; 
```

现在，我像这样执行它：

```
Statement stm = conn.createStatement();
ResultSet rs = stm.executeQuery(query); 
```

但现在我想引用像“T1.colName”这样的 ResultSet 列，因为 T1 和 T2 有同名的列......这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T07:52:18.830

您将需要手动为具有相同名称的列分配别名，或者您需要通过列索引访问它们。表名或表别名**不是**列标签的一部分当 a`ResultSet`包含具有相同标签的多个列时，它将返回具有该标签的第一列：

> 当使用列名调用 getter 方法并且多个列具有相同名称时，将返回第一个匹配列的值。

（来自：[http](http://docs.oracle.com/javase/7/docs/api/java/sql/ResultSet.html) ://docs.oracle.com/javase/7/docs/api/java/sql/ResultSet.html ）

# sql - SQL Server：从多个 XML 行中获取唯一计数？

> ID：12074530
> 
> 赞同：0
> 
> 时间：2012-08-22T13:43:42.610
> 
> 标签：sql, sql-server, xml, sqlxml

我有一个有两列的表。一个外键标识符和一个 XML 列。XML 列包含有关外来对象的详细信息。例如，如果我的表包含以下内容：

```
1 | <details><software name="iTunes" /></details>
1 | <details><software name="iPhoto" /><software name="iTunes" /></details>
2 | <details><software name="iTunes" /><software name="MSSQL" /></details>
2 | <details><software name="Visual Studios" /></details> 
```

如何运行一个查询，让我获得每个实体的“软件”的唯一计数？因此，例如，预期的结果将是：

```
1 | 2
2 | 3 
```

其中第 1 列是标识符，第 2 列是唯一总和。

我能得到的最接近的是以下查询：

```
SELECT
  DISTINCT
  id,
  details.value('count(/details/software)', 'int') AS SoftwareCount
FROM
  detailsTable 
```

但它几乎没有用处。（它为找到的每个计数显示一个唯一的行）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T13:48:56.820

```
select 
    id,
    COUNT(distinct( x.sw.value('@name','varchar(50)')))
from
    detailstable
cross apply
    detailstable.details.nodes('/details/software') x(sw)
group by id 
```

# c++ - 有什么方法可以让局部变量自动显示在 CodeBlocks nightly builds 的监视窗口中？

> ID：12074534
> 
> 赞同：2
> 
> 时间：2012-08-22T13:43:55.487
> 
> 标签：c++, c, ide, codeblocks

在 CodeBlocks 10.05 中，这很容易。只需右键单击监视窗口->监视“*this”。
但是在夜间构建中，没有办法做到这一点吗？

在代码块 wiki 中，我看到`"In latest nightly builds: The automatic inclusion of local variables and function arguments have not been reimplemented. Sorry for the inconvenience. "`.

如果这是真的，那真的很不方便，对吧？

# java - 如何根据环境加载不同的 Selenium2 设置？

> ID：12074536
> 
> 赞同：0
> 
> 时间：2012-08-22T13:44:01.203
> 
> 标签：java, xml, testing, selenium, automated-tests

我现在正在进行一个大型项目，该项目正在将一些 Selenium 引入他们的测试团队，到目前为止，这主要是手动的。他们有 3 种不同的环境可以运行测试（开发、测试开发和测试生产）。

Selenium 代码是用 Java 编写的，使用 WebDriver/HTMLUnit。我正在寻找一种方法来切换 Selenium 设置，例如浏览器应该访问的主机名和端口、其他浏览器设置、测试数据，具体取决于测试在哪个环境中运行。最好以某种方式自动切换，或者您可以进行一些小的更改根据环境做。另外，这些设置应该如何存储？XML？

# jquery - 更改相同的 div 类

> ID：12074537
> 
> 赞同：0
> 
> 时间：2012-08-22T13:44:03.687
> 
> 标签：jquery

这是我的代码：

```
<div class='silderitem'>
Some Content
</div>

<div class='silderitem'>
Another Some Content
</div>

<div class='silderitem'>
Again Another Some Content
</div>

<a class="next">next</a> 
```

当我使用 jquery 单击“下一步”时，我想更改下一个课程。我试过这个，但它不起作用。

```
<script>
$(document).ready(function(){
    var Slideshow=$('.slideritem');
    $(".next").click(function(){slideshow.next();return false});
</script> 
```

谁能告诉我解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:52:43.520

如果您想循环浏览项目，隐藏未选择的项目，这样的事情可能会起作用：[jsfiddle](http://jsfiddle.net/kLuff/3/)

CSS：

```
.silderitem { display: none }
.next { cursor: pointer }​ 
```

jQuery：

```
$('.selected').show();

$(".next").click(function(){
    var selected = $('.selected');
    selected.removeClass('selected');
    selected.hide();

    var next = selected.next(".silderitem");
    if(next.length === 0) {
        next = $(".silderitem").first();
    }
    next.addClass('selected');
    next.show();
});​ 
```

html:

```
<div class='silderitem selected'>
Some Content
</div>

<div class='silderitem'>
Another Some Content
</div>

<div class='silderitem'>
Again Another Some Content
</div>

<a class="next">next</a> 
```

# android - PhoneGap Build：视口不适用于 Android

> ID：12074538
> 
> 赞同：1
> 
> 时间：2012-08-22T13:44:09.800
> 
> 标签：android, cordova, viewport

无论我尝试什么，我都无法让视口标签以固定宽度工作。

这是我目前的努力：

```
<meta name="viewport" content="width=640" /> 
```

它在运行 iOS5 的 iPhone 模拟器上运行良好。我正在 Android 4.1 上测试它。

我已经阅读了有关在 Java .onCreate(); 中包含一些代码的信息。方法，但使用 PhoneGap Build 我无权访问它。

我的应用在这里：[https ://build.phonegap.com/apps/188638](https://build.phonegap.com/apps/188638)

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T10:15:26.737

试试下面的视口

```
`<meta name="viewport" content="width=device-width, initial-scale=0.5, maximum-scale=0.5, user-scalable=no, target-densitydpi=device-dpi"/`> 
```

# sql-server - SQL Server 标识规范不是顺序的

> ID：12074540
> 
> 赞同：4
> 
> 时间：2012-08-22T13:44:14.980
> 
> 标签：sql-server, database

我注意到 SQL Sever (2008 Express) 在插入自动递增标识规范时会随机向前跳跃。

例如，我的一列“HitStat_ID”将按顺序插入 15、16、17、18，然后突然之间，它会决定跳转到 1012、1013、1014.... 然后是 9120、9121 等。

真的没关系，只要它们是独一无二的（它们是），但为什么要这样做呢？它也在不止一张桌子上做。奇怪的是，这只是在过去一周左右才完成的，但该应用程序已经开发了几个月！

我在 ASP.NET VB 中工作。

这是插入（在这种情况下）：

```
sql = "INSERT INTO [HitStats] ([PageName], [Date_and_Time], [User_ID]) values ('Home',     
'" + TheDateTime + "', '" + Session("User_ID") + "')"
Dim dbcmd As SqlCommand = New SqlCommand(sql, dbconn)
dbcmd.ExecuteNonQuery()
dbcmd.Dispose() 
```

请不要继续谈论 SQL 注入 - 它不会发生！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T13:50:49.320

如果您正在使用应用程序和事务，当您回滚事务时，您将丢失生成的自动递增数字。此外，如果您进行一些插入并回滚它们。

[在这里](https://stackoverflow.com/questions/282451/sql-identity-autonumber-is-incremented-even-with-a-transaction-rollback)查看更多

此外，如果您删除数据，您将不会再次获得生成的数字，除非您重新播种。看[这里](http://msdn.microsoft.com/en-us/library/aa258817%28v=sql.80%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:53:18.720

关于“插入失败”的@ElVieejo +1。另一种可能性是，某人或某物可能正在添加特定值（`SET IDENTITY_INSERT ON`）——这可能解释了巨大的差距。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T13:52:05.163

[如果正在复制数据库并且正在使用自动身份范围管理](http://technet.microsoft.com/en-us/library/ms146907%28v=sql.105%29.aspx)，那么这种差距并不少见。

所发生的情况是将身份值块传递给复制中涉及的每个服务器，以便它们可以分发身份值而无需与其他服务器通信。一旦一个块在服务器上用完，它将“跳转”到已分配给它的下一个块，这可能是一个更高范围的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-09T15:21:43.790

不保证身份会增加 1。请参阅[Microsoft 页面上的](https://docs.microsoft.com/en-us/sql/t-sql/statements/create-table-transact-sql-identity-property?view=sql-server-2017)“连续值” 。另请参阅：[身份增量在 SQL Server 数据库中跳跃](https://stackoverflow.com/questions/14146148/identity-increment-is-jumping-in-sql-server-database)。

# c# - 使用文档哈希将签名的 PDF 与未签名的 PDF 进行比较

> ID：12074543
> 
> 赞同：12
> 
> 时间：2012-08-22T13:44:26.627
> 
> 标签：c#, pdf, itextsharp

在广泛的谷歌搜索之后，我开始怀疑我是否以某种方式错过了数字签名的意义。

这基本上是我认为我原则上应该能够做到的，我希望 iTextSharp 将允许我：

我正在用 C# 和 .NET 编写并使用 iTextSharp 解析 PDF 文件。我有一个未签名的 PDF 文件，以及同一文件的签名版本。

我知道数字签名从根本上对 PDF 数据进行散列，用私钥对其进行加密，然后验证过程的一部分是使用公钥对其进行解密，并确保在再次散列时结果与 PDF 数据匹配。

除此之外，我想获得这个解密的文档哈希，并将其与我的未签名 PDF 生成的文档哈希进行比较。这是因为我不仅要验证签名的 PDF 是否真实，还要验证它是否与我记录在案的未签名 PDF 相同。我想我也可以通过将 PDF 数据（没有签名）与我记录的 PDF 数据进行比较来做到这一点。

我目前还没有弄清楚如何做到这一点！IE：

1.  如何从已签名的 PDF 中提取除签名之外的 PDF 数据？
2.  或者，如何从未签名的 PDF 生成哈希？
3.  除了 2.，如何从 PDF 签名中提取解密的哈希？

希望这很清楚，我没有在某个地方错过重点！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T15:03:49.357

对这个：

> “这是因为我不仅要验证签名的 PDF 是否真实，还要验证它是否与我记录在案的未签名 PDF 相同”

**假设您只想知道您在服务器上获得的文档是真实的：**

创建签名文档时，您可以选择仅签名文件的一部分或整个文档。然后，您可以使用“整个文档”签名，如果您返回到服务器上的文档是“真实的”（这意味着签名验证成功），那么它肯定是您记录在案的同一文档。

值得一提的是，PDF 签名有两种类型，批准签名和认证签名。[来自 Adob​​e 的 PDF 中的数字签名](http://www.adobe.com/it/security/pdfs/DigitalSignaturesInPDF.pdf)文档：

> (...) 批准签名，即某人签署文件以表示同意、批准或接受。经认证的文档是在文档可供使用时具有由发起人应用的认证签名的文档。发起者指定允许哪些更改；选择允许的三个修改级别之一：
> 
> *   没有变化
> *   只填写表格
> *   表格填写和评论

**假设您想要匹配您在服务器上获得的某些签名文档，以及数据库上的未签名文档：**

对于文件识别，我建议单独处理。一旦可以打开一个文档，就可以从其所有页面的解压缩内容的串联中创建一个哈希（例如 md5），然后将其与来自原始文档的另一个类似的哈希进行比较，（可以生成一次并存储在数据库中）。

我这样做的原因是它将独立于文档上使用的签名类型。即使在 PDF 文件中编辑表单域、添加注释或创建新签名，页面内容也不会被修改，它始终保持不变。

如果您使用的是 iText，您可以使用[PdfReader.getPageContent](http://api.itextpdf.com/itext/com/itextpdf/text/pdf/PdfReader.html#getPageContent(int))方法获取页面内容的字节数组，并将结果用于[计算 MD5 哈希](https://stackoverflow.com/questions/415953/generate-md5-hash-in-java)。

Java 中的代码可能如下所示：

```
PdfReader reader = new PdfReader("myfile.pdf");
MessageDigest messageDigest = MessageDigest.getInstance("MD5");
int pageCount = reader.getNumberOfPages(); 
for(int i=1;i <= pageCount; i++)
{
     byte[] buf = reader.getPageContent(i);
     messageDigest.update(buf, 0, buf.length);
}
byte[] hash = messageDigest.digest(); 
```

此外，如果服务器接收到一个未签名的文件又回来了签名，则签名可能只涉及文件的一部分而不是全部。在这种情况下，签名摘要可能不足以识别文件。

来自 PDF 规范（我帐户上的粗体部分）：

> 签名是通过计算文档中的数据**（或部分数据）**的摘要并将摘要存储在文档中来创建的。（...）有两种定义的技术可以计算所有或部分内容的可重现摘要PDF 文件的一部分：
> 
> -**字节范围摘要**是在文件中的字节范围内计算的，由签名字典中的 ByteRange 条目指示。此范围通常是整个文件，包括签名字典但不包括签名值本身（内容条目）。
> 
> - 对象摘要 (PDF 1.5) 是通过**有选择地**遍历内存中对象的**子树**来计算的，从引用的对象开始，该对象通常是根对象。生成的摘要以及有关其计算方式的信息被放置在签名参考字典 (...) 中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-16T15:20:56.507

验证签名 PDF 完整性的策略：

1.  首先不要发送未签名的 PDF。使用 iText（适用于 linux 友好应用程序的 Java 版本）[，](http://itextpdf.sourceforge.net/howtosign.html#howtocertify)使用`CERTIFIED_FORM_FILLING`.

2.  让最终用户将其签名添加到表单字段并将其发回。可以这样做，因为对表格的更改不会破坏文件认证。

3.  验证签名和文件证明。

您应该能够从 iText 文档中弄清楚如何执行所有这些操作：http: [//itextpdf.sourceforge.net/howtosign.html](http://itextpdf.sourceforge.net/howtosign.html)

要验证经过认证的文档是否与原件相同，您需要做的就是将文档元数据与原件进行比较。这个标题是一个潜在的好候选人。

要从 pdf 中获取标题以使用 iText 进行比较，您只需使用以下代码：

```
PdfReader reader = new PdfReader("AsignedPDF.pdf");
string s = reader.Info["Title"]; 
```

# c# - 使用反射设置值 - 转换错误

> ID：12074547
> 
> 赞同：2
> 
> 时间：2012-08-22T13:44:42.017
> 
> 标签：c#, reflection, .net-3.5

我正在使用下面的代码来设置一个类的值，这个类的一些值`string` `decimal` `decimal?` `int?`等等。

我有一个字段列表 - 其值为字符串，.net 抛出以下异常：

```
System.InvalidCastException : Invalid cast from 'System.String' to 'System.Nullable`1[[System.Decimal, mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]]'.
at System.Convert.DefaultToType(IConvertible value, Type targetType, IFormatProvider provider)
at System.String.System.IConvertible.ToType(Type type, IFormatProvider provider)
at System.Convert.ChangeType(Object value, Type conversionType, IFormatProvider provider)
at System.Convert.ChangeType(Object value, Type conversionType)
at Surventrix.Domain.Model.Entities.StatisticalData.UpdateStatisticalData(ReportCommit commit, ILogProvider log) in StatisticalData.cs: line 591
at Surventrix.Tests.Stats.StatsTest.CreateStatsFromCommit() in StatsTest.cs: line 32 
```

我的代码是：

```
 public void UpdateStatisticalData(ReportCommit commit, ILogProvider log)
    {
        var fields = commit.CurrentFieldList.ToList();

        var properties = typeof(StatisticalData).GetProperties();

        foreach (var p in properties)
        {
            log.LogMessage("what my name: {0}", p.Name);
            // If not writable then cannot null it; if not readable then cannot check it's value
            if (!p.CanWrite || !p.CanRead) { continue; }

            var mget = p.GetGetMethod(false);
            var mset = p.GetSetMethod(false);

            // Get and set methods have to be public
            if (mget == null) { continue; }
            if (mset == null) { continue; }

            var val = fields.SingleOrDefault(x => p.Name == x.Name);

            if (val == null) continue;

            //field.value is stored as a string
            if (string.IsNullOrEmpty(val.Value)) continue;

            log.LogMessage("set: {0} ----> {1}", p.Name, val.Value);

            var typedVal = Convert.ChangeType(val.Value, p.PropertyType);

            p.SetValue(this, typedVal, null);
        }

    } 
```

问题：我怎样才能修复我的代码以便不抛出这个异常，我真的不明白*为什么*这里会抛出这个异常......

*更新 - 日志结果**

```
what my name: StatisticalDataID
what my name: OfficeDistanceFromProperty
what my name: OfficeAddress1
set: OfficeAddress1 ----> North Warwickshire House
what my name: OfficeAddress2
set: OfficeAddress2 ----> 92 Wheat Street
what my name: OfficeAddress3
what my name: OfficeCounty
what my name: OfficeTown
set: OfficeTown ----> Nuneaton
what my name: OfficePostcode
set: OfficePostcode ----> CV11 4BH
what my name: ResidentialInternalFloorArea
what my name: ValuationCalculationSqFtAssumed
what my name: SubjectPropertyAddress1
set: SubjectPropertyAddress1 ----> 323 Stanton road
what my name: SubjectPropertyAddress2
set: SubjectPropertyAddress2 ----> cbvcb
what my name: SubjectPropertyAddress3
set: SubjectPropertyAddress3 ----> vcbc
what my name: SubjectPropertyTown
set: SubjectPropertyTown ----> Coventry
what my name: SubjectPropertyCounty
set: SubjectPropertyCounty ----> bcbvc
what my name: SubjectPropertyPostCode
set: SubjectPropertyPostCode ----> CV1 4HH
what my name: OccupierName
set: OccupierName ----> Mr Peters
what my name: AdvanceAmount
set: AdvanceAmount ----> 0 
```

**更新**- 我已经更新了你的代码@Jon，我正在调用这样的方法：

```
 var typedVal = NullableSafeChangeType(val.Value, p.PropertyType);

            if (!string.IsNullOrEmpty(val.Value))
                p.SetValue(this, typedVal, null); 
```

在以下位置引发错误：

```
 _log.LogMessage("error is here ---> {0}", input);
            return input == null || input == "" ? null : Convert.ChangeType(input, underlyingType); 
```

输入是任何有效的字符串，type(System.String)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T13:50:09.607

它与设置属性无关，与更改类型有关。这是一个简短但完整的示例，演示了该问题：

```
using System;

class Test
{
    static void Main()
    {
        object converted = Convert.ChangeType("10", typeof(int?));
        Console.WriteLine(converted);
    }
} 
```

基本`Convert.ChangeType`不支持`Nullable<T>`。你必须自己处理。您可以编写一个检测目标类型为 的方法`Nullable<T>`，并返回 null（如果原始字符串值为 null 或对空字符串的引用）或将其转换为基础类型的结果。

编辑：例如（完全未经测试）：

```
static object NullableSafeChangeType(string input, Type type)
{
    Type underlyingType = Nullable.GetUnderlyingType(type);
    if (underlyingType == null) // Non-nullable; convert directly
    {
        return Convert.ChangeType(input, type);
    }
    else
    {
        return input == null || input == "" ? null
            : Convert.ChangeType(input, underlyingType);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:51:33.273

我认为您需要以下方法：

```
 private static T Convert<T>(string input)
    {
        if (input == null) throw new ArgumentNullException("input");
        var converter = TypeDescriptor.GetConverter(typeof(T));
        if (input.Is(typeof(T)))
        {
            try
            {
                return (T)converter.ConvertFromString(input);
            }
            catch (NotSupportedException notSupportedException)
            {
                Console.WriteLine(notSupportedException);
            }
        }
        return default(T);
    } 
```

使用：

```
 try
                {
                    // If Value is not a string => Convert over Generic Method
                    MethodInfo method = typeof(whereConvertImplemented).GetMethod("Convert", BindingFlags.NonPublic | BindingFlags.Static);
                    MethodInfo generic = method.MakeGenericMethod(property.PropertyType);
                    var value = generic.Invoke(this, new object[] { propvalue });
                    property.SetValue(this, value, null);
                }
                catch
                {

                } 
```

希望对你有帮助 ：）

问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T13:52:30.537

这条线

> var typedVal = Convert.ChangeType(val.Value, p.PropertyType);

不适用于可为空的类型。您为可空类型的属性类型添加了一个特殊情况，如果值为 null 或为空，则将属性值设置为 null。

# c#-4.0 - 在 C# 中使用 LINQ to SQL 将表名参数传递给数据上下文方法

> ID：12074548
> 
> 赞同：1
> 
> 时间：2012-08-22T13:44:44.467
> 
> 标签：c#-4.0, linq-to-sql

我创建了一个方法，通过将 db 列与 csv 文件连接来从数据库中删除数据，我在数据上下文中有一个需要迭代的表列表，我的意思是我需要通过传递它来更改表名作为方法的参数。

基本上我需要对数据上下文中存在的所有表使用此方法

GetTable 方法中的当前硬编码表名称：dw_Job DataContext 对象：job

这是我的代码

```
 var query = from line in File.ReadAllLines(file, Encoding.GetEncoding(1252))
                        //let jobrecord = line.Split(',')
                        join j in job.GetTable<dw_Job>() on
                        Convert.ToInt32(line.Split(',').GetValue(factColPos))
                        equals j.JobID
                        select j;

            foreach (var deletejob in query)
            {
                Console.WriteLine(deletejob);
                job.dw_Jobs.DeleteOnSubmit(deletejob);
            }

            job.SubmitChanges(); 
```

如果您需要我的代码的更多详细信息，我可以提供。请就此纠正我

提前致谢

# c# - 从 DetailsView 插入额外的自定义字段

> ID：12074552
> 
> 赞同：0
> 
> 时间：2012-08-22T13:44:56.417
> 
> 标签：c#, .net, detailsview

我正在使用 DetailsView 控件 (C# 4.0) 添加带有 EntityDataSource 控件的记录。有一些我不想在 DetailsView 控件中显示的字段需要添加 - 例如 DateAdded 和 UserId - 这些字段应该自动添加。

```
<asp:EntityDataSource ID="edsTasks" runat="server" 
    ContextTypeName="EKIMV2_MasterModel.EKIMV2_MasterEntities" 
    EnableFlattening="False" EnableInsert="True"
    EntitySetName="tasks" ConnectionString="name=EKIMV2_MasterEntities" 
    DefaultContainerName="EKIMV2_MasterEntities">
</asp:EntityDataSource>

<asp:DetailsView ID="DetailsView1" runat="server" Height="50px" Width="125px" 
    DataSourceID="edsTasks" DefaultMode="Insert" 
    AutoGenerateRows="False" DataKeyNames="task_id" 
    oniteminserted="DetailsView1_ItemInserted" 
    oniteminserting="DetailsView1_ItemInserting">
    <Fields>
        <asp:BoundField DataField="task_name" HeaderText="task_name" 
            SortExpression="task_name" />
        <asp:BoundField DataField="task_desc" HeaderText="task_desc" 
            SortExpression="task_desc" />
        <asp:TemplateField HeaderText="assigned_to" SortExpression="assigned_to">
            <InsertItemTemplate>
                <asp:DropDownList ID="ddlUsers" runat="server" DataSourceID="edsUsers" DataTextField="UserName" DataValueField="UserId"></asp:DropDownList>
            </InsertItemTemplate>
            <ItemTemplate>
                <asp:Label ID="Label1" runat="server" Text='<%# Bind("assigned_to") %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:CommandField ButtonType="Button" ShowCancelButton="False" 
            ShowInsertButton="True" />
    </Fields>
</asp:DetailsView> 
```

正如您在上面看到的，没有 DateAdded 字段。我想自动将此值设置为今天的日期。用户根本不需要添加值或查看该字段。我还想自动设置其他字段，但无需过多详细说明，我认为 DateAdded 字段就是一个很好的例子。

我想我需要在 ItemInserting 事件期间以某种方式添加额外的字段，但我不知道从哪里开始。

```
protected void DetailsView1_ItemInserting(object sender, DetailsViewInsertEventArgs e)
{

} 
```

我在其他地方读到过，也许我需要在 DetailsView 中保留额外的字段但隐藏它们？是这样吗，这似乎不是正确的做法。

那么是否可以将值添加到实际上不在 DetailsView 中的字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:28:36.960

所以答案在于通过将字段转换为 TemplateFields 然后在模板中使用 HiddenField 来隐藏 DetailsView 中的字段。

然后，您需要像这样处理 DetailsView1_ItemInserting() 事件：

```
protected void DetailsView1_ItemInserting(object sender, DetailsViewInsertEventArgs e)
{
    e.Values["date_submitted"] = DateTime.Now.ToShortDateString();
} 
```

该事件接收 DetailsViewInsertEvenrArgs ("e")，其中包含一个名为 Values 的字典对象。在我的例子中，Values 包含传回数据源控件（EntityDataSource）的数据。

# objective-c - 从 uisplitview 更改主视图和详细视图

> ID：12074554
> 
> 赞同：4
> 
> 时间：2012-08-22T13:44:58.787
> 
> 标签：objective-c, ios, xcode, ipad, uisplitviewcontroller

在我的故事板上，我的项目从一个拆分视图开始，它自动将我的自定义`UITableViewController`（嵌入在导航控制器中）分配为详细视图控制器（由关系 segue 完成）。如何从我的自定义访问拆分视图控件，`UITableViewController`以便我可以根据需要更改主视图控制器视图？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T14:36:01.443

UIViewController 有一个属性`splitViewController`，它是对嵌入 viewController 的拆分视图控制器的引用。由于您的表格视图控制器嵌入在导航控制器中，而导航控制器本身嵌入在拆分视图控制器中，您首先需要获取对导航控制器的引用，然后从中获取对拆分视图的引用。

因此，在您的自定义 tableViewController 的代码中，您可以这样做：

```
UISplitViewController *splitVC = [[self navigationController] splitViewController]; 
```

您可以从中获取对 masterViewController 的引用。splitViewController 有一个属性`viewControllers`，它是一个由两个元素组成的 NSArray。索引为零的元素是主视图控制器。索引 1 处的元素是您的详细视图控制器。

```
UIViewController *masterVC = [[splitVC viewControllers] objectAtIndex:0]; 
```

请注意，如果您的 master 是一个自定义 viewController 子类（它可能是），那么当您将其从数组中拉出时，您应该将其转换为这样。

如果您想用新的 viewController 完全替换主视图控制器，您可以通过使用新的主 VC 和现有的详细视图控制器创建一个新数组并将其分配给拆分视图控制器的`viewControllers`属性来实现：

```
UIViewController *detailVC = [[splitVC viewControllers] objectAtIndex:1];
NSArray *newViewControllerArray = [NSArray arrayWithObjects:newMasterVC, detailVC, nil];
splitVC.viewControllers = newViewControllerArray; 
```

# java - 如何使用可比 ?

> ID：12074557
> 
> 赞同：1
> 
> 时间：2012-08-22T13:45:01.183
> 
> 标签：java, generics

我有以下`interface`

```
public interface Identifiable {

    public Comparable<?> getIdentifier();

} 
```

和一个实现类

```
public class Agreement implements Identifiable {

    private Long id;

    public Comparable<Long> getIdentifier() {
        return id;
    }
} 
```

编辑：请注意，可能还有其他具有不同类型标识符的实现。
现在我想，是的，比较可比对象：

```
// Agreement a;
// Agreement b;
...
if (a.getIdentifier().compareTo(b.getIdentifier()) {
... 
```

但是这`compareTo`给了我以下编译器错误：

*Comparable<Long> 类型中的方法 compareTo(Long) 不适用于参数 (Comparable<Long>)*

这个接口应该如何与泛型一起使用？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-22T13:46:32.367

`Comparable<T>`旨在用作泛型参数的上限：

```
public interface Identifiable<T extends Comparable<T>> {    
    public T getIdentifier();
}

public class Agreement implements Identifiable<Long> {

    private final Long id;

    public Long getIdentifier() {
        return id;
    }
} 
```

这迫使返回类型为 a `T`，而不仅仅是可以与 a 进行比较的东西`T`。

* * *

您的代码本质上是不安全的。
要了解原因，请考虑以下代码：

```
class Funny implements Comparable<Long> { ... }
class Funnier implements Identifiable {
    public Comparable<Long> getIdentifier() {
        return new Funny();
    }
}

Identifiable<Funny> funnier;
funnier.getIdentifier().compareTo(funnier.getIdentifier());
// You just tried to pass a Funny to compareTo(Long) 
```

# android - 谷歌地图在出口时显示灰色瓷砖

> ID：12074558
> 
> 赞同：1
> 
> 时间：2012-08-22T13:45:02.100
> 
> 标签：android, google-maps

我遵循了关于 SO 中有关此问题的不同问题的所有说明，但我没有正确导出基于谷歌地图的应用程序。

当我使用 eclipse 在设备上调试我的应用程序时，应用程序工作正常，但是当我导出它时，它不显示地图。

我确实正确获得了我的 API 密钥：

```
<com.google.android.maps.MapView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapview"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:apiKey="API KEY HERE"
    android:clickable="true" >
</com.google.android.maps.MapView> 
```

并且确实要求在应用程序标签之外和清单文件内提供所有权限：

```
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/> 
```

我还确保自定义调试密钥库与 Eclipse 构建首选项中的默认调试密钥库相同。

我使用了eclipse[导出向导](http://developer.android.com/tools/publishing/app-signing.html#ExportWizard)，不知道下一步该怎么做......

还有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:06:05.640

您需要生成**已签名的 apk** eclipse 生成自己的已签名 apk 但您必须使用自己的。

你需要使用**释放密钥**

要生成发布密钥，请使用**您的应用程序密钥库文件**而不是默认**密钥库**

# c - 使用 zlib 压缩文件

> ID：12074565
> 
> 赞同：1
> 
> 时间：2012-08-22T13:45:38.520
> 
> 标签：c, windows, compression, zlib

我可以使用 zlib 库函数来压缩文件吗？我尝试使用“gzopen()”进行文件压缩，这实际上是在处理单个文件时存在一些问题。当我尝试使用“WinZip”解压缩输出文件时，输出中不存在文件扩展名。例如。如果我压缩一个名为“test.pdf”的文件，则输出文件名为“test”。（文件内容是正确的。唯一的问题是扩展名）

```
 fi = (gzFile *)gzopen(destfile,"ab");
     gzwrite(fi,buff,bufflen);
     gzclose(fi); 
```

当我尝试压缩两个不同的文件（例如“test.pdf”和“sample.pdf”）时，使用“WinZip”（“test”）提取后只有一个文件。如何使用 zlip 文件压缩多个文件。我认为问题出在压缩文件中的标头信息上。我可以使用 zlib 压缩文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T01:22:37.807

您可以使用`-N`or`--name`选项`gzip`让它使用存储在 gzip 文件中的文件名，而不是 gzip 文件的名称。

您不能单独使用 gzip 来存储多个文件。对于 Windows 应用程序，我建议将[libzip](http://nih.at/libzip/)用于多个文件，它可以对 .zip 文件进行编码和解码。libzip 使用[zlib](http://zlib.net/)进行压缩和解压缩部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T13:57:20.187

zlib（库）和 gzip（实用程序）并没有真正做任何文件管理。它没有任何文件名的概念，因此 gunzip 实用程序通常只是从提取的文件中删除 .gz 扩展名。gzip 压缩文件中没有嵌入文件名数据，它只是在您解压缩文件时使用文件名。

gzip 也不支持将多个文件一起压缩到同一个存档中。为此，您通常使用 tar 命令创建一个包含要压缩的各个文件的文件，然后 gzip tar 文件。这就是为什么您会经常看到archive.tar.gz 或archive.tgz 的原因。它是用 gzip 压缩的 tar 文件中的一堆文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T13:51:08.690

[你可以使用http://gnuwin32.sourceforge.net/packages/libarchive.htm](http://gnuwin32.sourceforge.net/packages/libarchive.htm)之类的东西来创建一个 tar 并压缩它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T13:51:48.950

zlib 只做压缩它不处理文件名、文件数据、目录布局等。

Winzip 将所有这些添加到 ZLIB 协议中。在 zlib 发行版中有一个 contrib 库，可为您提供 zip 功能

# oracle - 用另一个表中的值更新一个表列具有相似的值

> ID：12074567
> 
> 赞同：0
> 
> 时间：2012-08-22T13:45:40.987
> 
> 标签：oracle

大家好，我有两个表（MIGADM.CORPMISCELLANEOUSINFO 和 CRMUSER.PREFERENCES），每个表都有一个名为 PREFERENCE_ID 和 ORGKEY 的字段。我想为每个对应的 ORGKEY 使用来自 CRMUSER.PREFERENCES 的 Preference_ID 更新 MIGADM.CORPMISCELLANEOUSINFO 的 Preference ID。所以我写了这个查询；

```
update migadm.CORPMISCELLANEOUSINFO s set s.PREFERENCE_ID = (
select e.PREFERENCE_ID from crmuser.preferences e where s.ORGKEY = e.ORGKEY) 
```

但我得到：

```
ORA-01427: single-row subquery returns more than one row 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:53:43.207

这意味着您选择的列不够独特，无法识别源表中的一行。您的第一步是识别这些列。

要查看存在此问题的行集，请运行此查询。

```
select e.origkey, 
       count(*) 
  from crmuser.preferences e 
  group by e.origkey
  having count(*) > 1 
```

例如：对于 2 的 origkey，假设首选项表中有两行。

```
orig_key PREFERENCE_ID

2         202
2         201 
```

Oracle 不确定哪些应该用于更新 CORPMISCELLANEOUSINFO 中的preference_id 列

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T13:54:41.910

识别子查询返回多行的行（例如，您可以使用 REJECT ERROR 子句来执行此操作）或使用条件“where rownum = 1”。

# css - Webkit 上的溢出和圆角边框

> ID：12074569
> 
> 赞同：0
> 
> 时间：2012-08-22T13:45:43.357
> 
> 标签：css, webkit

我正在尝试构建一个带有隐藏面板的圆形区域，该面板在圆圈内向上滑动。这似乎在 Firefox 上完美运行，但是，对于 Chrome/Webkit，没有“屏蔽”。我假设这有某种CSS技巧，但到目前为止我一直在用头撞墙......

[http://jsfiddle.net/HQDdR/1/](http://jsfiddle.net/HQDdR/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:43:05.960

您可以使用径向渐变，然后您甚至不需要容器和支架 - [**DEMO**](http://dabblet.com/gist/3427282)。

相关CSS：

```
#top {
    overflow: hidden;
    width: 300px;
    height: 300px;
    border-radius: 50%;
}
#slider {
    height: 600px;
    background: radial-gradient(circle, gainsboro 70.71%, transparent 70.71%) 
            no-repeat 0 100%;
    background-size: 300px 300px;
    transition: .3s;
}
#top:hover #slider {
    height: 300px;
} 
```

我已经`height`为滑块设置了动画，但您也可以为`background-position`.

# jquery - 带有幻灯片的字幕

> ID：12074570
> 
> 赞同：0
> 
> 时间：2012-08-22T13:45:44.373
> 
> 标签：jquery, css, slideshow, fade, captions

我创建了一个带有淡入淡出过渡的幻灯片，我希望标题居中在图像上方的 3 列表内。我已经尝试了一些脚本但没有运气，表格内的定位不知何故被搞砸了。

我想将标题放在幻灯片上方表格的第二列中：

[http://munzerhodayfa.com/blaise.html](http://munzerhodayfa.com/blaise.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:08:24.360

首先，您不应该使用表格进行布局。

这是您的布局：

```
<table width="100%" border="0" cellspacing="0" cellpadding="0">
  <tbody>
    <tr>
      <td width="25%"><a href="contact.html">BLAISE REUTERSWARD</a></td>
      <td width="50%"></td>
      <td width="25%"></td>
    </tr>
  </tbody>
</table>
<div class="fadein">
   <!-- All your images in here -->
</div> 
```

将以上内容更改为：

```
<div id="header clearfix">
  <div id="contact">
    <a href="contact.html">BLAISE REUTERSWARD</a>
  </div>
  <div id="caption">
    <!-- Caption Text Here -->
  </div>
</div>
<div class="fadein">
   <!-- All your images in here -->
    <img src="images/BR_12.jpg" alt="This will be your caption area for javascript to read">
</div> 
```

这是上面的CSS：

```
.clearfix:after { content: "."; display: block; clear: both; visibility: hidden; line-height: 0; height: 0; }

.clearfix { display: inline-block; }

html[xmlns] .clearfix { display: block; }

* html .clearfix { height: 1%; }

#contact {
    width: 25%;
    float: left;
}

#caption {
    width: 50%;
    float: left;
}

.fadein {
    clear:both;
} 
```

对于 Javascript，您必须从某个地方获取标题。我会将标题放在图像的“alt”属性中，并在图片加载时使用 javascript 将其放入标题 div 中（参见上面建议的 HTML）。

```
$(function() {

    $(".fadein :first-child").appendTo(".fadein");

    setInterval(function() {

         $(".fadein :first-child").hide().appendTo(".fadein").fadeIn(2000, function () {
                 var caption = $(this).attr('alt');
                 $('#caption').text(caption);
             });

    }, 6000);
}); 
```

# http - 当我添加这个时 Nagios 不会运行

> ID：12074575
> 
> 赞同：0
> 
> 时间：2012-08-22T13:46:11.953
> 
> 标签：http, webserver, ping, nagios

我希望能够检查我的站点是否已启动并在本地通过 nagios 对其进行监控。

所以我去了这个网站[http://www.linickx.com/nagios](http://www.linickx.com/nagios)做了以下，现在虽然我看不到 hosts.cfg 所以我创建了它和 services.cfg 我也必须创建：

```
hosts.cfg
    #  host definition for bonus
    define host{
    use                     generic-host            ; Name of host template to use
    host_name               bonus
    alias                   bonus
    address                 92.12.35.162
    check_command           check-host-alive
    max_check_attempts      10
    notification_interval   120
    notification_period     24x7
    notification_options    d,u,r}  
    services config

The following should appended to the end of hosts.cfg (located in /etc/nagios or /usr/local/nagios/etc)
# Service definition for bonus
define service{
use             generic-service     ; Name of service template to use
host_name           bonus
service_description     HTTP
is_volatile         0
check_period            24x7
max_check_attempts      3
normal_check_interval       3
retry_check_interval        1
contact_groups          technical,support
notification_interval       120
notification_period     24x7
notification_options        w,u,c,r
check_command           check_http
} 
```

请问我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:35:35.733

除非在主 nagios.cfg 中指定了文件或目录，否则 Nagios 不会添加新的配置文件。此外，在您重新启动 Nagios 进程之前，不会添加新的对象配置。您能否详细说明您如何安装 Nagios（源代码或软件包）以及您使用的 linux 发行版？

以下是一些额外的资源：

Nagios 核心文档 [http://nagios.sourceforge.net/docs/3_0/](http://nagios.sourceforge.net/docs/3_0/)

Nagios 核心支持论坛 [http://support.nagios.com/forum/viewforum.php?f=7](http://support.nagios.com/forum/viewforum.php?f=7)

# c# - 解决库设计 - 集中配置参考

> ID：12074577
> 
> 赞同：0
> 
> 时间：2012-08-22T13:46:23.623
> 
> 标签：c#, design-patterns, dll, circular-dependency

考虑下面的示例代码，其中包含一个类库*设计*和一个使用该库的可执行程序。

```
namespace AppLib
{
    /// <summary>
    /// Entry point for library. Stage manages all the actors in the logic.
    /// </summary>
    class StageApp
    {
        /// <summary>
        /// Setting that is looked up by different actors
        /// </summary>
        public int SharedSetting { get; set; }

        /// <summary>
        /// Stage managing actors with app logic
        /// </summary>
        public IEnumerable<Actor> Actors { get { return m_actors.Where(x => x.Execute() > 40).ToArray(); } }

        private List<Actor> m_actors = new List<Actor>();
    }

    /// <summary>
    /// An object on the stage. Refers to stage (shared)settings and execute depending on the settings.
    /// Hence actor should have reference to stage
    /// </summary>
    class Actor
    {
        private StageApp m_StageApp;

        private int m_Property;

        /// <summary>
        /// An actor that needs to refer to stage to know what behavior to execute
        /// </summary>
        /// <param name="stage"></param>
        public Actor(StageApp stage)
        {
            m_StageApp = stage;
            m_Property = new Random().Next();
        }

        /// <summary>
        /// Execute according to stage settings
        /// </summary>
        /// <returns></returns>
        public int Execute()
        {
            return m_StageApp.SharedSetting * m_Property;
        }
    }
}

namespace AppExe
{
    using AppLib;

    class Program
    {
        static void Main(string[] args)
        {
            StageApp app = new StageApp();
            app.SharedSetting = 5;

            // Question: How to add actor to stage?

            foreach (var actor in app.Actors)
                Console.WriteLine(actor.Execute());
        }
    }
} 
```

**问题**

`Stage`并且`Actor`有循环依赖，对我来说似乎很糟糕。例如，我们应该如何将演员添加到舞台？

如果我让用户自己创建新`Actor()`的，那么他们必须继续提供`Stage`.

如果我给`Actor()`一个内部构造函数并创建`Stage`一个工厂，那么我会失去一些让用户进行继承`Actor`的灵活性。

如果我做`Stage`一个单例，那么我只能有一组`SharedSetting`. `Stage`如果用户在他的 中想要多个`AppExe`，则无法完成。

无论如何要重新设计架构以避免上述问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:04:09.443

如果您的功能不受在演员之间共享 StageApp 设置的限制，还会有一些其他逻辑。例如，当您需要从 Actor 了解父 StageApp 时，反之亦然。我更喜欢以这种方式实现它：

```
namespace AppLib
{
    /// <summary> 
    /// Entry point for library. Stage manages all the actors in the logic. 
    /// </summary> 
    class StageApp
    {
        /// <summary> 
        /// Setting that is looked up by different actors 
        /// </summary> 
        public int SharedSetting { get; set; }

        /// <summary> 
        /// Stage managing actors with app logic 
        /// </summary> 
        public IEnumerable<Actor> Actors { get { return m_actors.Where(x => x.Execute() > 40).ToArray(); } }

        private List<Actor> m_actors = new List<Actor>();

        public int TotalActorsCount
        {
            get
            {
                return m_actors.Count;
            }
        }

        public void AddActor(Actor actor)
        {
            if (actor == null)
                throw new ArgumentNullException("actor");

            if (m_actors.Contains(actor))
                return; // or throw an exception

            m_actors.Add(actor);
            if (actor.Stage != this)
            {
                actor.Stage = this;
            }
        }

        // we are hiding this method, to avoid because we can change Stage only to another non null value
        // so calling this method directly is not allowed
        internal void RemoveActor(Actor actor)
        {
            if (actor == null)
                throw new ArgumentNullException("actor");

            if (!m_actors.Contains(actor))
                return; // or throuw exception

            m_actors.Remove(actor);
        }
    }

    /// <summary> 
    /// An object on the stage. Refers to stage (shared)settings and execute depending on the settings. 
    /// Hence actor should have reference to stage 
    /// </summary> 
    class Actor
    {
        private StageApp m_StageApp;

        private int m_Property;

        public StageApp Stage
        {
            get
            {
                return m_StageApp;
            }
            set
            {
                if (value == null)
                {
                    throw new ArgumentNullException("value");
                }
                if (m_StageApp != value)
                {
                    if (m_StageApp != null) // not a call from ctor
                    {
                        m_StageApp.RemoveActor(this);
                    }
                    m_StageApp = value;
                    m_StageApp.AddActor(this);
                }
            }
        }

        /// <summary> 
        /// An actor that needs to refer to stage to know what behavior to execute 
        /// </summary> 
        /// <param name="stage"></param> 
        public Actor(StageApp stage)
        {
            Stage = stage;
            m_Property = new Random().Next();
        }

        /// <summary> 
        /// Execute according to stage settings 
        /// </summary> 
        /// <returns></returns> 
        public int Execute()
        {
            return m_StageApp.SharedSetting * m_Property;
        }
    }
}

namespace AppExe
{
    using AppLib;

    class Program
    {
        static void Main(string[] args)
        {
            StageApp app = new StageApp();
            app.SharedSetting = 5;

            StageApp anotherApp = new StageApp();
            anotherApp.SharedSetting = 6;

            // actor is added to the stage automatically after instantiation
            Actor a1 = new Actor(app);
            Actor a2 = new Actor(app);
            Actor a3 = new Actor(anotherApp);

            Console.WriteLine("Actors in anotherApp before moving actor:");
            Console.WriteLine(anotherApp.TotalActorsCount);

            // or by calling method from StageApp class
            anotherApp.AddActor(a1);

            Console.WriteLine("Actors in anotherApp after calling method (should be 2):");
            Console.WriteLine(anotherApp.TotalActorsCount);

            // or by setting Stage through property
            a2.Stage = anotherApp;

            Console.WriteLine("Actors in anotherApp after setting property of Actor instance (should be 3):");
            Console.WriteLine(anotherApp.TotalActorsCount);

            Console.WriteLine("Actors count in app (should be empty):");
            Console.WriteLine(app.TotalActorsCount);
        }
    }
} 
```

它允许您透明地操作对象关系，但需要一点 mor 代码来实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:04:12.210

添加一个新类“ActorRole”如何定义每个阶段中演员的行为。它使您可以将 Actor 和 Stage 彼此分离，因此您可以独立地实例化两者（例如通过工厂），然后将它们组合起来，创建配置您的 Stage 的 ActorRole 对象。如果需要，可以使用 Builder 模式进行这种组合。

如果您需要动态更改您的演员行为，您可以使用基于 ActorRole 类的[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)，因此您可以根据舞台为演员分配其行为的不同具体实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T14:34:12.303

我会通过使用`Func`而不是传递`Stage`给`Actor`. 像这样：

```
namespace AppExe
{
    using AppLib;
class Program
    {
        static void Main(string[] args)
        {
            StageApp app = new StageApp();
            app.CreateActor();
            app.SharedSetting = 5;
            foreach (var actor in app.Actors)
                Console.WriteLine(actor.Execute());
        }
    }
}

namespace AppLib
{
    class StageApp
    {
        public int SharedSetting { get; set; }
        public IEnumerable<Actor> Actors { get { return m_actors.Where(x => x.Execute() > 40).ToArray(); } }
        private List<Actor> m_actors = new List<Actor>();
        public void CreateActor()
        {
            m_actors.Add(new Actor(Executed));
        }
        private int Executed(int arg)
        {
            return SharedSetting * arg;
        }
    }

    class Actor
    {
        private int m_Property;
        private Func<int, int> m_executed;

        public Actor(Func<int, int> executed)
        {
            m_executed = executed;
            m_Property = new Random().Next();
        }

        public int Execute()
        {
            return m_executed(m_Property);
        }
    }
} 
```

我完全同意你的观点，循环引用并不好玩:)。

你也可以使用事件来解决这个问题，但我喜欢传递回调等函数。

# android - 像iOS这样的Android中是否有UISwitch设置控件

> ID：12074589
> 
> 赞同：0
> 
> 时间：2012-08-22T13:46:58.100
> 
> 标签：android

我查看了 Android 用于设置的偏好活动。我正在寻找如下图所示的 UISwitch 之类的东西，Android 是否有这样的东西。

我可以看到 Android 首选项设置上最近的控件是“列表首选项”

![在此处输入图像描述](../Images/dd2413f88c757ba4ef310fdd0e0e3732.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:49:56.817

有[ToggleButton](http://developer.android.com/reference/android/widget/ToggleButton.html)和[CompoundButton](http://developer.android.com/reference/android/widget/CompoundButton.html)（一个扩展另一个）。

但是那些具有与您正在寻找的不同的默认显示小部件。但是，两者都可以与您自己的可绘制资源一起使用，以创建您所追求的“开关”类型控件。

但默认情况下，系统不包含提供此功能并按照您希望的方式显示的小部件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T13:50:19.217

不，在 Android 中，它称为 ToggleButton。但它仍然可以通过扩展放置在 RadioGroup 中的 RadioButton 并提供您想要的 UI 方式来开发。

# javascript - JavaScript ajax 请求 servlet 调用错误回调函数

> ID：12074596
> 
> 赞同：0
> 
> 时间：2012-08-22T13:47:15.957
> 
> 标签：javascript, servlets, callback

我有以下代码片段：

```
$(d).ready(function() {
    $.ajax({
        url : "http://localhost:8080/ProjTest/TestServlet",
        type : "POST",
        dataType : "text",
        data : { test : "test" },
        error : function() {
            alert(1);
        },
        success : function(data) {
            alert(2);
        }
    });
}); 
```

在我的 servlet 中：

```
protected void doPost(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException {
    Printer out = res.getWriter();
    String paramTest = req.getParameter("test");
    System.out.println("1");
    out.print(paramTest);
    out.close();
    System.out.println("2");
} 
```

当我运行时，在控制台中：

```
1
2 
```

但是，在 javascript 中调用错误函数！！！

任何想法 ？？？

* * *

解决了：

我将servlet更改为

```
protected void doPost(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException {
    res.setHeader("Access-Control-Allow-Origin", "*");
    Printer out = res.getWriter();
    String paramTest = req.getParameter("test");
    System.out.println("1");
    out.print(paramTest);
    out.close();
    System.out.println("2");
} 
```

我添加了这一行：

*res.setHeader("Access-Control-Allow-Origin", "*");*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T13:49:10.483

`{}`for后面没有逗号`data`：

```
dataType : "text",
data : { test : "test" } 
// No comma here --------^
error : function() { 
```

它应该是这样的：

```
dataType : "text",
data : { test : "test" },  // <--- can you see the comma :-D
error : function() { 
```

# wordpress - 在 wordpress 的相应页面上保持 Subnav 处于活动状态？

> ID：12074598
> 
> 赞同：0
> 
> 时间：2012-08-22T13:47:31.943
> 
> 标签：wordpress, drop-down-menu

好的，所以我正在为 wordpress 构建一个主题。但是我无法弄清楚如何做到这一点。如何在相应页面上保持 subnav 处于活动状态？例如，您单击下拉子导航，单击子导航链接，它会在相应页面上保持打开状态，向用户显示他们在网站上的位置。谢谢你的帮助。

导航在这里？ [http://uhuruchild.phpfogapp.com/](http://uhuruchild.phpfogapp.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:24:26.333

```
.current-menu-ancestor{background-color: #000000;} 
```

这会起作用

请参阅文档[wordpress 导航菜单](http://codex.wordpress.org/Function_Reference/wp_nav_menu#Current-Page_Menu_Items)

# asp.net - ViewModel 分配了一个对象，我怎样才能将它传递回 Post？

> ID：12074600
> 
> 赞同：0
> 
> 时间：2012-08-22T13:47:34.713
> 
> 标签：asp.net, asp.net-mvc-3

所以我有两种方法：

```
 public ActionResult Create(Guid id)
    {
        Assignment viewModel = new Assignment();
        viewModel.Classroom = classroomRepository.GetByID(id);
        return View(viewModel);
    } 

    [HttpPost]
    public ActionResult Create(Assignment assignment)
    {
        if (ModelState.IsValid)
        {
            assignmentRepository.Insert(assignment);
            assignmentRepository.Save();
            return RedirectToAction("Index");
        }
        return View(assignment);
    } 
```

如您所见，当我加载 Create 页面时，我正在将 Classroom 加载到 viewModel 中。这有效并在视图上显示正确的教室。

当我 POST 到 Create 方法时出现我的问题，我`assignment`现在传入的对象不包括（它是 NULL）我在 GET 上传入的 Classroom。

编辑〜显示视图：

```
@model My_School_Book.Models.Assignment
@{
    ViewBag.Title = "Create";
}
<div class="span9">
    <div class="row-fluid">
        <h1>Creating New Assignment:</h1>
        <hr />
        @using (Html.BeginForm("Create", "Assignment", FormMethod.Post, new { @class = "form-horizontal" }))
        {
            @Html.ValidationSummary(true)

            <div class="control-group">
                @Html.LabelFor(model => model.Classroom.Name, "Classroom", new { @class = "control-label" })
                <div class="controls">
                    <span style="font-size: 26px;">@Html.DisplayTextFor(model => model.Classroom.Name)</span>
                </div>
            </div>

            <div class="control-group">
                @Html.LabelFor(model => model.Name, new { @class = "control-label" })
                <div class="controls">
                    @Html.TextBoxFor(model => model.Name)
                    @Html.ValidationMessageFor(model => model.Name)
                </div>
            </div>

            <div class="control-group">
                @Html.LabelFor(model => model.Description, new { @class = "control-label" })
                <div class="controls">
                    @Html.TextAreaFor(model => model.Description)
                    @Html.ValidationMessageFor(model => model.Description)
                </div>
            </div>

            <div class="control-group">
                @Html.LabelFor(model => model.AssignedDate, new { @class = "control-label" })
                <div class="controls">
                    <div class="input-prepend">
                        <span class="add-on"><i class="icon-calendar"></i></span>@Html.TextBoxFor(model => model.AssignedDate)
                    </div>
                    @Html.ValidationMessageFor(model => model.AssignedDate)
                </div>
            </div>

            <div class="control-group">
                @Html.LabelFor(model => model.DueDate, new { @class = "control-label" })
                <div class="controls">
                    <div class="input-prepend">
                        <span class="add-on"><i class="icon-calendar"></i></span>@Html.TextBoxFor(model => model.DueDate)
                    </div>
                    @Html.ValidationMessageFor(model => model.DueDate)
                </div>
            </div>

            <div class="control-group">
                @Html.LabelFor(model => model.Weight, new { @class = "control-label" })
                <div class="controls">
                    @Html.TextBoxFor(model => model.Weight, new { @class = "span2" })
                    @Html.ValidationMessageFor(model => model.Weight)
                </div>
            </div>

            <div class="control-group">
                @Html.LabelFor(model => model.Total, new { @class = "control-label" })
                <div class="controls">
                    @Html.TextBoxFor(model => model.Total, new { @class = "span2" })
                    @Html.ValidationMessageFor(model => model.Total)
                </div>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn btn-primary"><i class="icon-plus-6"></i>&nbsp;Create</button>
                <a href="@Url.Action("Index", "Assignment")" class="btn btn-primary"><i class="icon-back"></i>&nbsp;Cancel</a>
            </div>
        }
    </div>
</div>
@section Scripts
{
    <script type="text/javascript">
        $(function () {
            $("#AssignedDate").datepicker({
                showOtherMonths: true,
                selectOtherMonths: true,
                dateFormat: "DD MM d, yy",
                minDate: -14,
                onSelect: function (selectedDate) {
                    $("#DueDate").datepicker("option", "minDate", selectedDate);
                }
            });
            $("#DueDate").datepicker({
                dateFormat: "DD MM d, yy",
                minDate: 0,
                onSelect: function (selectedDate) {
                    $("#AssignedDate").datepicker("option", "maxDate", selectedDate);
                }
            });
        });
    </script>
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:06:21.423

您只包括 Classroom.Name，因此在表单上没有任何内容可供模型绑定器用来填充您的模型。

你真的需要重新安置教室吗？你想达到什么目的？如果您需要 ID，只需将其写为：

```
@Html.HiddenFor(o=>o.Classroom.ClassroomId)
```

（或任何 id ）并将其加载到服务器端。

如果您真的需要它 - 您可以通过以下方式将其写为输入

```
@Html.EditorFor(o=>o.Classroom)
```

然后允许最终用户修改我认为你不想要的它，因此我会使用 ID（guid）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:25:10.507

如果您希望课堂在帖子中存活，则需要将其添加到隐藏字段中的表单：

只需将其添加到表单中：

```
@Html.HiddenFor(m=m.Classroom.ClassroomId)
@Html.HiddenFor(m=m.Classroom.ClassroomName) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T16:19:46.047

我最终使用了一个视图模型：

```
public class AssignmentCreateData
{
    public Guid ClassroomID { get; set; }
    public String ClassroomName { get; set; }
    public Assignment Assignment { get; set; }
} 
```

我的控制器看起来像这样：

```
 public ActionResult Create(Guid id)
    {
        AssignmentCreateData viewModel = new AssignmentCreateData();
        Classroom classroom = classroomRepository.GetByID(id);
        viewModel.ClassroomID = classroom.ClassroomID;
        viewModel.ClassroomName = classroom.Name;
        viewModel.Assignment = null;
        return View(viewModel);
    } 

    [HttpPost]
    public ActionResult Create(AssignmentCreateData viewModel)
    {
        if (ModelState.IsValid)
        {
            viewModel.Assignment.ClassroomID = viewModel.ClassroomID;
            assignmentRepository.Insert(viewModel.Assignment);
            assignmentRepository.Save();
            return RedirectToAction("Index");
        }
        return View(viewModel);
    } 
```

然后我的视图包括：

```
@Html.HiddenFor(model => model.ClassroomID) 
```

# android - 如何从片段中开始活动？

> ID：12074608
> 
> 赞同：56
> 
> 时间：2012-08-22T13:48:03.677
> 
> 标签：android, android-activity, fragment

我在 a 中有一组选项卡`FragmentActivity`，每个选项卡都有自己的片段。当我尝试通过一个从该片段中启动一个新活动`onClickListener`并使用该`startActivity(myIntent)`方法时，我的应用程序强制关闭。

环顾了一会后，我找到了一个或两个对名为 的方法的引用`startActivityFromFragment`，但是在搜索了一个小时左右之后，我找不到任何关于如何使用它或者这是否是我应该使用的解释或示例.

我想我要问的是从活动启动新活动与从片段启动新活动之间是否有任何区别，如果是，我需要实现什么？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-08-22T13:52:49.507

你应该这样做`getActivity().startActivity(myIntent)`

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2013-05-20T08:00:04.937

我做到了，下面的代码对我有用....

```
@Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.hello_world, container, false);

        Button newPage = (Button)v.findViewById(R.id.click);
        newPage.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                Intent intent = new Intent(getActivity(), HomeActivity.class);
                startActivity(intent);
            }
        });
        return v;
    } 
```

请确保您的目标活动应在 Manifest.xml 文件中注册，

但在我的情况下，所有选项卡都没有显示在 HomeActivity 中，有什么解决方案吗？

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-10-09T10:44:35.480

从 Fragment 启动 Activity 和从 Activity 启动 Activity 的区别在于如何获取上下文，因为在这两种情况下它都必须是 Activity。

**来自活动：** 上下文是当前活动 ( `this`)

```
Intent intent = new Intent(this, NewActivity.class);
startActivity(intent); 
```

**来自片段：** 上下文是父活动 ( `getActivity()`)。请注意，片段本身可以通过 启动活动`startActivity()`，这不是必须从活动中完成的。

```
Intent intent = new Intent(getActivity(), NewActivity.class);
startActivity(intent); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-01-25T12:17:43.957

我这样做是为了从出现在多个活动中的（自定义）菜单片段启动 SendFreeTextActivity：

在 MenuFragment 类中：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.fragment_menu, container, false);

    final Button sendFreeTextButton = (Button) view.findViewById(R.id.sendFreeTextButton);
    sendFreeTextButton.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            Log.d(TAG, "sendFreeTextButton clicked");
            Intent intent = new Intent(getActivity(), SendFreeTextActivity.class);
            MenuFragment.this.startActivity(intent);
        }
    });
    ... 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-21T19:55:07.283

使用 Fragment 所在的 Activity 的基本上下文来启动 Intent。

```
Intent j = new Intent(fBaseCtx, NewactivityName.class);         
startActivity(j); 
```

`fBaseCtx`您当前的活动在哪里`BaseContext`。你可以得到它`fBaseCtx = getBaseContext();`

# sql - SQL 右连接？

> ID：12074609
> 
> 赞同：1
> 
> 时间：2012-08-22T13:48:04.900
> 
> 标签：sql, sql-server, dynamics-gp

Arrrgh，我没有得到这个。

我有一张来自 Dynamics GP 的帐户表，它有 7 列。我需要为给定月份没有任何活动的帐户填写空白月份。

我创建了一个内存表@MONTHS，其中包含如下行：

帐户、描述、年份、月份、月份名称、Netchange、PeriodBal

* * *

1110000，空，2006，1，空，0，空

这应该与来自 Dynamics GP 的相同信息相匹配。来自 GP 的类似行如下所示：

1110000, 零用现金, 2006, 1, 一月, 15.00, 343.97

如果我们在 2 月份没有花费任何零用现金，那么 2006 年 2 月该帐户将没有任何行，我想将 @MONTHS 表与 DynamicsGP 表进行 RIGHT JOIN 以便填充空白月份。

以下是为便于阅读而缩写的 SQL：

```
SELECT Z.GPACCOUNTNO, 
Z.DESCRIPTION, 
Z.FISCALYEAR, 
Z.FISCALPERIOD, 
Z.FISCALPERIODNAME, 
Z.NETCHANGE, 
Z.PERIODBALANCE
FROM Z
RIGHT JOIN @MONTHS M 
    ON Z.GPACCOUNTNO = M.GPACCOUNTNO
    AND Z.FISCALPERIOD = M.FISCALPERIOD
    AND Z.FISCALYEAR = M.FISCALYEAR 
```

SQL 永远运行。（即在我失去耐心之前的 5 分钟）

我已经验证了我的@MONTHS 表看起来像我想要的那样。我试过用这两个表做一个“UNION ALL”，它给了我重复。

如果表 Z 没有给定帐户/年/月的当前行，我希望我的 @MONTHS 表添加该行，Netchange 余额为 0。

感谢您的帮助。完整的 SQL 如下。

* * *

```
/* Create in memory table to hold account numbers */
DECLARE @i int
DECLARE @c int
DECLARE @ACCT char(129)
DECLARE @numrows int
DECLARE @numyears int
DECLARE @y int
DECLARE @m int
DECLARE @ACCT_TABLE TABLE (
idx smallint Primary Key IDENTITY(1,1),
account char(129)
)

/* Populate account number table */
INSERT @ACCT_TABLE
select distinct ACTNUMST from SBM01.[dbo].[GL00105]

/* Year table reads available years in the DB */
DECLARE @YEAR_TABLE TABLE (
idx smallint Primary Key IDENTITY(1,1),
YEAR1 smallint
)

/* Populate year table */
INSERT @YEAR_TABLE
SELECT distinct YEAR1 FROM SBM01.dbo.SY40101 ORDER BY YEAR1

/* Create our table of months to UNION to the main accounts */
DECLARE @MONTHS table (
GPACCOUNTNO char(129),
DESCRIPTION char(51),
FISCALYEAR smallint ,
FISCALPERIOD smallint,
FISCALPERIODNAME char(21),
NETCHANGE numeric(19, 5),
PERIODBALANCE numeric(19, 5)
)

/* Here comes the heavy lifting. 
We loop over the account numbers and add year and month values.
*/
SET @i = 1
SET @numrows = (SELECT COUNT(*) FROM @ACCT_TABLE)
IF @numrows > 0
WHILE(@i <= (SELECT MAX(idx) FROM @ACCT_TABLE))
BEGIN

/* Get the next account number */
SET @ACCT = (SELECT account FROM @ACCT_TABLE WHERE idx = @i)
SET @c = 1
SET @numyears = (SELECT COUNT(*) FROM @YEAR_TABLE)
    WHILE(@c <= (SELECT MAX(idx) FROM @YEAR_TABLE))
    BEGIN
        SET @y = (SELECT YEAR1 FROM @YEAR_TABLE WHERE idx = @c)
        SET @m = '0'
            WHILE(@m < '13')
            BEGIN
                INSERT INTO @MONTHS (GPACCOUNTNO, DESCRIPTION, FISCALPERIOD, FISCALYEAR, FISCALPERIODNAME, NETCHANGE, PERIODBALANCE)
                VALUES (@ACCT, NULL, @m, @y, NULL, '0', NULL)
                SET @m = @m + 1
            END
            SET @c = @c + 1
        END
        SET @i = @i + 1
    END
/* We should now have a populated Database */   

SELECT Z.GPACCOUNTNO, Z.DESCRIPTION, Z.FISCALYEAR, Z.FISCALPERIOD, Z.FISCALPERIODNAME, Z.NETCHANGE, Z.PERIODBALANCE
FROM    ( SELECT    RTRIM(B.[ACTNUMST]) AS GPACCOUNTNO,
                RTRIM(C.[ACTDESCR]) AS DESCRIPTION,
                A.[YEAR1] AS FISCALYEAR,
                A.[PERIODID] AS FISCALPERIOD,
                E.[PERNAME] AS FISCALPERIODNAME,
                ISNULL(A.[PERDBLNC], 0) AS NETCHANGE,
                ( SELECT    ISNULL(SUM(D.[PERDBLNC]), 0)
                  FROM      SBM01.[dbo].[GL10110] D
                  WHERE     D.[ACTINDX] = A.[ACTINDX]
                            AND D.[YEAR1] = A.[YEAR1]
                            AND D.[PERIODID] <= A.[PERIODID]
                ) AS PERIODBALANCE
      FROM      SBM01.[dbo].[GL10110] A
                INNER JOIN SBM01.[dbo].[GL00105] B ON B.[ACTINDX] = A.[ACTINDX]
                INNER JOIN SBM01.[dbo].[GL00100] C ON C.[ACTINDX] = A.[ACTINDX]
                INNER JOIN SBM01.[dbo].[SY40100] E ON E.[YEAR1] = A.[YEAR1]
                                                AND E.[PERIODID] = A.[PERIODID]
                                                AND E.[SERIES] = 0
      UNION ALL
      SELECT    RTRIM(B.[ACTNUMST]) AS GPACCOUNTNO,
                RTRIM(C.[ACTDESCR]) AS DESCRIPTION,
                A.[YEAR1] AS FISCALYEAR,
                A.[PERIODID] AS FISCALPERIOD,
                E.[PERNAME] AS FISCALPERIODNAME,
                ISNULL(A.[PERDBLNC], 0) AS NETCHANGE,
                ( SELECT    ISNULL(SUM(D.[PERDBLNC]), 0)
                  FROM      SBM01.[dbo].[GL10111] D
                  WHERE     D.[ACTINDX] = A.[ACTINDX]
                            AND D.[YEAR1] = A.[YEAR1]
                            AND D.[PERIODID] <= A.[PERIODID]
                ) AS PERIODBALANCE
      FROM      SBM01.[dbo].[GL10111] A
                INNER JOIN SBM01.[dbo].[GL00105] B ON B.[ACTINDX] = A.[ACTINDX]
                INNER JOIN SBM01.[dbo].[GL00100] C ON C.[ACTINDX] = A.[ACTINDX]
                INNER JOIN SBM01.[dbo].[SY40100] E ON E.[YEAR1] = A.[YEAR1]
                                                AND E.[PERIODID] = A.[PERIODID]
                                                AND E.[SERIES] = 0
) Z
RIGHT JOIN @MONTHS M 
    ON Z.GPACCOUNTNO = M.GPACCOUNTNO
    AND Z.FISCALPERIOD = M.FISCALPERIOD
    AND Z.FISCALYEAR = M.FISCALYEAR 
ORDER BY Z.[GPACCOUNTNO],
     M.[FISCALYEAR],
     M.[FISCALPERIOD] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:03:17.567

您可以使用 SQL case 语句在 null 时加入

```
CREATE TABLE #TMP
(
    id int,
    [month] datetime
)
INSERT INTO #TMP(id,[month])values(1,GETDATE())
INSERT INTO #TMP(id,[month])values(2,null)
INSERT INTO #TMP(id,[month])values(3,GETDATE())
INSERT INTO #TMP(id,[month])values(4,GETDATE())

CREATE TABLE #TMP2
(
    id int,
    [month] datetime
)
INSERT INTO #TMP2(id,[month])values(1,GETDATE())
INSERT INTO #TMP2(id,[month])values(2,GETDATE())
INSERT INTO #TMP2(id,[month])values(3,GETDATE())
INSERT INTO #TMP2(id,[month])values(4,GETDATE())

select * from #TMP
select * from #TMP2

SELECT #TMP.[id], case when #TMP.[month] is null then #TMP2.[month] else #TMP.month end
from #tmp
inner join #tmp2 on #tmp.id= #tmp2.id

drop table #tmp,#tmp2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T14:04:33.210

为什么不使用@Months 表作为起点（因为它已经为您提供了所需的所有月份）并填写 Z 中的值（如果可用）？

```
SELECT 
M.GPACCOUNTNO, 
M.DESCRIPTION, 
M.FISCALYEAR, 
M.FISCALPERIOD, 
M.FISCALPERIODNAME, 
ISNULL(Z.NETCHANGE, 0) as NETCHANGE
ISNULL(Z.PERIODBALANCE, 0) as PERIODBALANCE
FROM @MONTHS M
LEFT JOIN Z
    ON Z.GPACCOUNTNO = M.GPACCOUNTNO
    AND Z.FISCALPERIOD = M.FISCALPERIOD
    AND Z.FISCALYEAR = M.FISCALYEAR 
```

# jquery - jQuery脚本设置div高度似乎只运行一次然后停止

> ID：12074616
> 
> 赞同：0
> 
> 时间：2012-08-22T13:48:22.740
> 
> 标签：jquery, html, css

我有四个 div，每个 div 具有相同的 ID 但不同的类。

```
<div id="inner" class="1"></div>
<div id="inner" class="2"></div>
<div id="inner" class="3"></div>
<div id="inner" class="4"></div> 
```

然后我有一个 jQuery 脚本将 div 的高度设置为窗口的高度（加上一点点）

```
jQuery(document).ready(function($) {
var h = $(window).height();
$('#inner') .css({'height': h+100}); 
```

然而，这仅适用于 Div1，脚本似乎停止为接下来的 3 个 div 工作。有没有办法让它为所有 4 个 div 运行？

非常感谢

*快速编辑*我显然是新手，只需要一个快速的帮助，所以感谢那些给我时间给我一个我可以合作的答案的人，我真诚地向对这个问题投反对票的人道歉，如果它是阅读是你的负担，你可能只是不读吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T13:49:50.553

ID 必须是唯一的，使他们的 ID 是唯一的，否则调用 $("#inner") 将只返回第一个 div。

HTML：

```
<div class="inner 1"></div>
<div class="inner 2"></div>
<div class="inner 3"></div>
<div class="inner 4"></div> 
```

Javascript：

```
jQuery(document).ready(function($) {
var h = $(window).height();
$('.inner') .css({'height': h+100}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T13:50:53.033

用这个

```
<div id="one" class="inner"></div>
<div id="two" class="inner"></div>
<div id="three" class="inner"></div>
<div id="four" class="inner"></div>

jQuery(document).ready(function($) {
    var h = $(window).height();
    $('.inner').css({'height': h+100}); 
```

ID 必须是唯一的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T13:51:17.033

您的 id 标签不是语义的。一页上只能存在一个唯一的 ID 标签。您需要添加一个类似的类。

```
<div id="inner" class="1 inners"></div>
<div id="inner2" class="2 inners"></div>
<div id="inner3" class="3 inners"></div>
<div id="inner4" class="4 inners"></div>

jQuery(document).ready(function($) {
   var h = $(window).height();
   $('.inners') .css({'height': h+100});
} 
```

# actionscript-3 - 将绘制的线条转换为位图数据 - Bitmap.draw() + Sprite.graphics - 不起作用

> ID：12074618
> 
> 赞同：0
> 
> 时间：2012-08-22T13:48:29.703
> 
> 标签：actionscript-3, bitmapdata

编辑：它自己工作的转换/复制过程，我只是不知道如何告诉位图数据，要复制阶段的哪个部分 - 我试图通过将画布电影到 x=0 y=0 来解决这个问题，但没有显示任何变化. 唯一显示变化的是我在绘制之前确实将画布移动到零，但这完全是错误的，因为具有负坐标的绘图部分不会被复制，因为坐标更改只会影响位图，如果你之前这样做你开始画画

旧条目：我想将 Sprite.graphics 转换为 bitmapData，因为我有一个 drawTool 允许用户绘制线条，我认为这些线条位于 Sprite.graphics 内部。

我需要将这些线转换为位图数据，因为这允许我稍后将它们变形，但我不能使用它

```
Bitmapdata.draw(Sprite.graphics); 
```

并且仅使用 Sprite 而不是 Sprite.graphics 不会显示任何结果 =\ 需要帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:45:31.890

如果您只想从 (0,0) 以外的原点绘制某个部分，请使用矩阵。Adobe 文档中有很多关于此的内容，或者这里有一个很好的例子：

[http://www.quasimondo.com/archives/000670.php](http://www.quasimondo.com/archives/000670.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:27:06.567

我想，你还没有完全理解 usage `BitmapData.draw()`。

`BitmapData.draw()`是可能的所有 DisplayObject(Sprite, MovieClip, Shape, Text, Video...) 绘图。因为他们有一个 IBitmapDrawable。（更多信息参考 adobe 文档是最好的老师。）

如果你想实现油漆板。参考下面的代码。非常简单的油漆板。但有些可以帮助你。

**尝试复制和粘贴。**

```
import flash.display.Sprite;
import flash.events.Event;
import flash.display.BitmapData;
import flash.display.Bitmap;
import flash.events.MouseEvent;

var isDraw:Boolean = false;
var brush:Sprite =new Sprite();
brush.graphics.beginFill(0x0000ff);
brush.graphics.drawCircle(0,0,5);
brush.graphics.endFill();

var canvasData:BitmapData = new BitmapData(600,400, false);
var canvas:Bitmap = new Bitmap(canvasData);
addChild(canvas);

stage.addEventListener(MouseEvent.MOUSE_DOWN, onDrawStart);
stage.addEventListener(MouseEvent.MOUSE_UP, onDrawStop);
stage.addEventListener(Event.ENTER_FRAME, render);

function onDrawStart(e:MouseEvent):void
{
    isDraw = true;
}

function onDrawStop(e:MouseEvent):void
{
    isDraw = false;
}

function render(e:Event):void
{
    if(!isDraw) return;

    brush.x = mouseX;
    brush.y = mouseY;

    canvasData.draw(brush,brush.transform.matrix);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T14:15:51.173

仅`graphics`在绘图时使用。实际`Sprite`对象包含您想要的内容，因此按照您的约定，只需执行以下操作：

```
BitmapData.draw(Sprite); 
```

虽然对于一个文字示例：

```
var mySprite:Sprite = new Sprite();
// add lines etc using mySprite.graphics

var myBitmapData:BitmapData = new BitmapData(mySprite.width, mySprite.height);
myBitmapData.draw(mySprite); 
```

# http - 在 2.2.3 上禁用 TRACE 方法

> ID：12074621
> 
> 赞同：3
> 
> 时间：2012-08-22T13:48:50.640
> 
> 标签：http, xss, trace, apache

所以我试图禁用 Apache 中的 TRACE 方法，这也是这个问题[Disabling TRACE request method on Apache/2.0.52](https://stackoverflow.com/questions/1114249/disabling-trace-request-method-on-apache-2-0-52)中的问题。

我已经在 VirtualHost 块、目录块、.htaccess 文件等中尝试了重写规则。此外，httpd.conf 中的 TraceEnable Off 选项不起作用。

这是我的测试的输出：

```
[root@localhost user]# nc www.domain.com 80
TRACE / HTTP/1.1
Host: www.domain.com
VAR1:test

HTTP/1.1 200 OK
Date: Wed, 22 Aug 2012 13:37:38 GMT
Server: Apache/2
Transfer-Encoding: chunked
Content-Type: message/http

3c
TRACE / HTTP/1.1
Host: www.domain.com
VAR1: test

0 
```

重写规则是：

```
RewriteEngine on
RewriteCond %{REQUEST_METHOD} ^TRACE
RewriteRule .* - [F] 
```

任何可能出错的线索？

干杯!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-11T10:30:37.763

对于 apache2，可以在主 httpd.conf 文件中添加以下内容：

```
TraceEnable off 
```

您可以使用 Curl 测试 Trace 是否打开/关闭，例如：

```
curl -v -X TRACE http://www.yourserver.com 
```

参考：[http ://www.ducea.com/2007/10/22/apache-tips-disable-the-http-trace-method/](http://www.ducea.com/2007/10/22/apache-tips-disable-the-http-trace-method/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-07T21:18:06.057

此配置更改适用于**“Apache/2.2.3 (Linux/SUSE)”/CENTOS**

编辑文件**/etc/sysconfig/apache2**查找下面的行并将**rewrite**添加到末尾。它将加载模块“mod_rewrite.so”。解释，在 CENTOS 中，LoadModule 配置文件 (/etc/apache2/sysconfig.d/loadmodule.conf) 被 /usr/sbin/rcapache2 覆盖

```
APACHE_MODULES="apparmor actions alias auth_basic authn_file authz_host authz_groupfile authz_default authz_user authn_dbm autoindex cgi dir env expires include log_config mime negotiation setenvif ssl suexec userdir php5 rewrite" 
```

在**/etc/apache2/httpd.conf.local**中添加/替换以下 IfModule 语句，以避免在未加载模块的情况下引发错误。

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteCond %{REQUEST_METHOD} ^TRACE
    RewriteRule .* - [F]
</IfModule> 
```

要进行测试，您可以访问[http://web-sniffer.net/](http://web-sniffer.net/)并选择 TRACE 单选按钮。如果可行，您应该会看到**Status: HTTP/1.1 403 Forbidden**。

# wpf - KeyGesture 不只支持一键

> ID：12074627
> 
> 赞同：4
> 
> 时间：2012-08-22T13:49:07.170
> 
> 标签：wpf, c#-4.0

我想创建我的自定义命令并将其连接到某个键。为此，我在代码中使用 KeyGesture ，在构造函数中我看到我只能传递一个键（没有修饰键），但在运行时我得到异常，说：

```
"'None + Q' key and modifier combination is not supported for KeyGesture" 
```

我只是不明白为什么只有一个键有一个构造函数，而且我还需要设置修饰键组合以免出现异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:17:41.767

从[MSDN](http://msdn.microsoft.com/en-us/library/ms522894.aspx)粘贴：

> 在大多数情况下，KeyGesture 必须与一个或多个 ModifierKey 相关联。此规则的例外是功能键和数字键盘键，它们本身可以是有效的 KeyGesture。

“普通”键的问题在于区分实际的按钮按下和快捷方式。例如，如果您有一个文本框，则不能使用带有手势 Q 的命令来执行与插入字符 Q 不同的操作。如果您想要类似的操作，请使用 KeyDown/Up 命令和您自己的命令调用。

# html - 为什么 HTML 表单不显示在 Outlook 电子邮件客户端中？

> ID：12074628
> 
> 赞同：0
> 
> 时间：2012-08-22T13:49:07.843
> 
> 标签：html, forms, google-apps-script, outlook-2007, outlook

下面是我的谷歌应用程序脚本，用于在发送给客户端的邮件中显示 HTML 表单并通过网络服务获取响应。当我的客户使用 Gmail 帐户并且表单显示非常好并且所有事件都正常工作时，这可以正常工作。但是当我的客户尝试使用 Outlook 帐户进行相同操作时，就会出现问题`<textarea>`，`<button>`（这些标签未显示）。谁能告诉我有什么问题？对于outlook帐户，我们需要做更多的设置吗？

```
function sendAutoReply(e)
{
  var myemail = "viral.shah@searce.com";
  var email = "";
  var subject = "Your Request Status Message.."; 
  var html = 
      '<body>' + 
      '<table border="1">'+
      '<tr>'+
      '<td>'+
      '<label>  Comment </label>'+'<br>'+'<br>'+
      '</td>'+
      '</tr>'+
      '<tr>'+
      '<td>'+
      '<textarea rows="5" cols="100"/>'+'<br>'+'<br>'+
      '</td>'+
      '</tr>'+
      '<tr>'+
      '<td>'+
      '<input type="button" value="accept"/>'  +
      '</td>'+
      '<td>'+
      '<input type = "button" value = "Decline"/>'+
      '</td>'+
      '</tr>'+
      '</table>'+
      '</body>';

  try {  
    for(var field in e.namedValues) {

      if (field == 'Subject') {
        subject += e.namedValues[field].toString();
      }
      if (field == 'Email') {
        email = e.namedValues[field].toString();
      }
      html += field + ' : '
        + e.namedValues[field].toString() + "\n\n";
    }   
    MailApp.sendEmail(email, subject, html, {replyTo:myemail, htmlBody:html});
 }
catch(e){
   MailApp.sendEmail(myemail, "Error in Auto replying to contact form submission. No reply was sent.", e.html);
 }
} 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T05:15:47.387

Outlook 不支持以下`<button>`标记：

[Outlook 支持的 HTML 标记](http://msdn.microsoft.com/en-us/library/office/aa338201%28v=office.12%29.aspx)

尝试使用`<input type="button">`而不是它应该可以工作。

至于`<textarea>`，它在技术上是受支持的，但似乎有很多人抱怨它不起作用。该文档在一个地方说它支持“cols”属性，而在另一个地方它不支持，所以尝试删除它。此外，Outlook 对 HTML 非常挑剔，我会尝试使用明确的结束标签`<textarea></textarea>`来代替速记样式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-03T07:29:10.617

不，我是说它不支持 Outlook 电子邮件客户端中的任何 HTML 标记

请通过此[论坛链接](http://forums.sugarcrm.com/f30/designing-html-emails-outlook-2007-a-20920/)

而这个[MSDN 链接](http://msdn.microsoft.com/en-us/library/office/aa338201%28v=office.12%29.aspx)

我认为这些文章将对此做出清晰的思考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T07:42:31.563

对于 Outlook 2007 邮件客户端[不在那里显示表单](http://www.campaignmonitor.com/blog/post/2435/how-forms-perform-in-html-emai/)。所以，这在 Outlook 邮件客户端中是不可能的。检查给定的链接。

希望这个对你有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-18T14:10:37.743

如果按钮操作足够简单，可以等同于访问 url，则可以添加如下消息：

> 如果确认按钮不可用，请通过此链接确认电子邮件 [https://www.example.com/confirm/av87hfua7ImAToken4vf8a98jao5ia](https://www.example.com/confirm/av87hfua7ImAToken4vf8a98jao5ia)

看到按钮的人也会看到这句话，但由于这是一种相当普遍的做法，因此不会引起太大的噪音。

# constants - 来自 __constant 的 async_work_group_copy

> ID：12074630
> 
> 赞同：0
> 
> 时间：2012-08-22T13:49:13.010
> 
> 标签：constants, opencl

像这样的代码：

```
__constant char a[1] = "x";
...
__local char b[1];
async_work_group_copy(b, a, 1, 0); 
```

抛出编译错误：

```
no instance of overloaded function "async_work_group_copy" matches the argument list 
```

所以看来这个函数不能用来从`__constant`地址空间复制。我对吗？`__constant`如果是，将数据复制到`__local`内存以加快访问速度的首选方法是什么？现在我使用一个简单的 for 循环，其中每个工作项复制几个元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T09:25:47.563

`async_work_group_copy()`被定义为仅在本地和全局内存之间复制（参见此处：[http](http://www.khronos.org/registry/cl/sdk/1.1/docs/man/xhtml/) ://www.khronos.org/registry/cl/sdk/1.1/docs/man/xhtml/ ）。

据我所知，没有方法可以从常量批量复制到本地内存。也许原因是常量内存实际上缓存在我所知道的所有 GPU 上，这基本上意味着它以与本地内存相同的速度工作。

函数族可以为所有类型的`vloadn()`内存加载整个向量，包括常量，因此可能部分符合您的需要。但是，它不是批量复制。

# c# - 反序列化json c#获取变量的值

> ID：12074631
> 
> 赞同：1
> 
> 时间：2012-08-22T13:49:18.823
> 
> 标签：c#, json, windows-phone

我使用[Newtonsoft JSON DLL](http://james.newtonking.com/pages/json-net.aspx)反序列化 JSON 。我有下一个 JSON 答案

```
string answer = getjsonnanswer(url);
JObject a = JObject.Parse(answer); 
```

我如何参考`a`，得到 615 - 它在 JSON 答案中的变量值，但它没有名称。

```
{
    "response": [615, 
    {
        "body": "Привет) как жизнь?",
        "title": "Re(2): ...",     
        "date": 1268238828,
        "uid": 10024748,
        "mid": 11056,
        "read_state": 0,
        "out":0
    }, 
    {
        "body": "Жду :)",
        "title": "Re(23): ...",
        "date": 1268238448, 
        "uid": 27495120, 
        "mid": 11045,
        "read_state": 1,
        "out":1
    }]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:19:52.467

您只需要添加索引器即可从“响应”数组中获取第一项：

```
JObject a = JObject.Parse(answer);

var val = a["response"][0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:54:15.707

```
 JObject a = JObject.Parse(answer);

JsonObject a = new JsonObject(answer);
JsonArray ss = (JsonArray)a["response"];
var result = ss[0]; 
```

# android - 关闭单个自定义通知

> ID：12074635
> 
> 赞同：3
> 
> 时间：2012-08-22T13:49:31.600
> 
> 标签：android

Android 开发者网站上有一个教程，它指导您如何创建自定义通知。它在大多数 android 设备上都很好用，但是摩托罗拉 (Motorola Electrify) 的一些品牌手机有自己的关闭按钮。我猜这个固件/ android 的 ROM 会覆盖默认通知的默认 XML 布局。因此，自定义通知没有此关闭按钮。

![在此处输入图像描述](../Images/5ab6464c4e1ccf8390eb7627104890d3.png)

有没有简单的方法来保留这个按钮？或者唯一的方法是检查这个设备是否有这样的按钮，如果有，添加一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:08:51.880

> 有没有简单的方法来保留这个按钮？

根据定义，不，因为您一开始没有将按钮放在那里。

> 或者唯一的方法是检查这个设备是否有这样的按钮

我不知道你会怎么做。

> 如果是这样添加一个？

我也不知道你会怎么做。对于缺少 per `Notification`-dismiss 选项的设备 (Android 1.x/2.x)，您不能拥有自己的按钮。您始终可以将您的`Notification`设置为自动取消（例如，`setAutoCancel(true)`使用`Notification.Builder`），在这种情况下，点击 上的任何位置`Notification`都会将其关闭。

# android - android中的服务器客户端（套接字编程除外）

> ID：12074637
> 
> 赞同：0
> 
> 时间：2012-08-22T13:49:35.160
> 
> 标签：android, client-server

我有一个学校项目。我必须为android客户端-linux服务器或android客户端-android服务器设计一个服务器-客户端系统。我看到很多关于套接字编程的文档，但我不是在寻找那个。我想找到像RMI这样的方法。我怎样才能做到这一点？

（我尝试使用 Binder 或 AIDL，但不明白这些对我有效。）

谢谢

# sql - 来自行而不是列的 TSQL 内部收益率 (IRR)

> ID：12074638
> 
> 赞同：3
> 
> 时间：2012-08-22T13:49:39.883
> 
> 标签：sql, tsql, sql-server-2005

我有一个这样的数据表：

```
Group   ID    M0    M1    ...    M20
------------------------------------
    1    1    10    -2    ...     54
    1    2    -8    10    ...    -20
    2    6   -10    12    ...      0
    2    4    45    52    ...      0
    2    5    12   102    ...      0 
```

我按组对我的数据进行分组，如下所示：

```
SELECT Group
     , round(sum(M0+M1+M2+...+M20)/count(ID),2) as profit
     , round(sum(M0),2) as M0
     , round(sum(M1),2) as M1
     , ...
     , round(sum(M20),2) as M20
FROM
    data_table
GROUP BY
    Group 
```

我需要添加的是基于 M0 到 M20 列的 IRR。

我找到了一个看起来像这样的 IRR 函数：

```
CREATE FUNCTION [dbo].[ufn_IRR]
  (
   @strIDs VARCHAR(8000),
   @guess DECIMAL(30,10)
  )
RETURNS DECIMAL(30, 10)
AS 
  BEGIN
    DECLARE @t_IDs TABLE (
        id INT IDENTITY(0, 1),
        value DECIMAL(30, 10)
    )
    DECLARE @strID VARCHAR(12),@sepPos INT,@NPV DECIMAL(30, 10)
    SET @strIDs = COALESCE(@strIDs + ',', '')
    SET @sepPos = CHARINDEX(',', @strIDs)
    WHILE @sepPos > 0 
      BEGIN
        SET @strID = LEFT(@strIDs, @sepPos - 1)
        INSERT INTO @t_IDs ( value ) SELECT ( CAST(@strID AS DECIMAL(20, 10)) ) WHERE ISNUMERIC(@strID) = 1
        SET @strIDs = RIGHT(@strIDs, DATALENGTH(@strIDs) - @sepPos)
        SET @sepPos = CHARINDEX(',', @strIDs)
      END

    SET @guess = CASE WHEN ISNULL(@guess, 0) <= 0 THEN 0.00001 ELSE @guess END

    SELECT @NPV = SUM(value / POWER(1 + @guess, id)) FROM @t_IDs
    WHILE @NPV > 0 
      BEGIN
        SET @guess = @guess + 0.00001
        SELECT @NPV = SUM(value / POWER(1 + @guess, id)) FROM @t_IDs
      END
    RETURN @guess
  END 
```

示例用法如下所示：

```
SELECT  dbo.ufn_IRR('-4000,1200,1410,1875,1050',0.00001) 
```

但就我而言，我想避免从我的列中创建字符串，如下所示：

```
 SELECT  dbo.ufn_IRR(
    cast(round(sum([M0]), 2) AS NVARCHAR)+','
   +cast(round(sum([M1]), 2) AS NVARCHAR)+','
   +cast(round(sum([M2]), 2) AS NVARCHAR)+','
   +cast(round(sum([M3]), 2) AS NVARCHAR)+','
   +cast(round(sum([M4]), 2) AS NVARCHAR)+','
   +...+','
   +cast(round(sum([M20]), 2) AS NVARCHAR)
 ,0.00001) 
```

我认为首先创建一个字符串然后在函数内部将其切入表格是没有意义的。
我想修改 IRR 函数，这样我就可以传递我的列，但我不知道该怎么做：/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-16T12:38:21.607

我更新了代码以将猜测方法从增量（0.00001）更改为访客从 0.1 到 0.01 到 0.001

该函数的示例用法是

```
select [dbo].[fn_IRR]('-21000,0,0,1948.00,1948.00,1948.00,1948.00,1948.00,1948.00,1948.00,1948.00,1948.00,1948.00,1948.00,1948.00',0.0000000001) 
```

希望这有帮助。

```
ALTER FUNCTION [dbo].[fn_IRR]
(
    @str varchar(max),
    @precision DECIMAL(30,10)
)
RETURNS DECIMAL(30, 10)
AS 
BEGIN
    declare  @AdjValue decimal(30,10)
            ,@guess Decimal(30,10)
            ,@guess_new Decimal(30,10)

    Select @AdjValue = 0.1, @guess=0

    DECLARE @t_IDs TABLE (
        id INT IDENTITY(0, 1),
        value DECIMAL(30, 10)
    )
    Declare @NPV DECIMAL(30, 10)
           ,@iter_cnt int

    INSERT INTO @t_IDs 
        select * from dbo.fn_SplitString(@str,',')

    SET @guess = CASE WHEN ISNULL(@guess, 0) <= 0 THEN 0 ELSE @guess END

    SELECT @NPV = SUM(value / POWER(1 + @guess, id)) FROM @t_IDs
    WHILE ((@NPV > 0 or @AdjValue > @precision) and (isnull(@iter_cnt,0) < 8192))
    BEGIN
        SET @guess_new = @guess + @AdjValue
        SELECT @NPV = SUM(value / POWER(1 + @guess_new, id)) FROM @t_IDs
        set @iter_cnt = isnull(@iter_cnt,0) + 1
        if (@NPV > 0)
            select @guess=@guess_new
        else
            select @AdjValue=@AdjValue/10
    END
    RETURN @guess
END

Create FUNCTION [dbo].[fn_SplitString](
     @str nvarchar(max)
    ,@sep nvarchar(max)
)
RETURNS TABLE
AS
RETURN
    WITH a AS(
        SELECT CAST(0 AS BIGINT) as idx1,CHARINDEX(@sep,@str) idx2
        UNION ALL
        SELECT idx2+1,CHARINDEX(@sep,@str,idx2+1)
        FROM a
        WHERE idx2>0
    )
    SELECT SUBSTRING(@str,idx1,COALESCE(NULLIF(idx2,0),LEN(@str)+1)-idx1) as StrValue
    FROM a 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T14:16:29.850

```
CREATE FUNCTION [dbo].[ufn_IRR]
  (
   @s0 DECIMAL(30,10),
   @s1 DECIMAL(30,10),
   @s2 DECIMAL(30,10),
   @s3 DECIMAL(30,10),
   @s4 DECIMAL(30,10),
   @s5 DECIMAL(30,10),
   @s6 DECIMAL(30,10),
   @s7 DECIMAL(30,10),
   @s8 DECIMAL(30,10),
   @s9 DECIMAL(30,10),
   @s10 DECIMAL(30,10),
   @s11 DECIMAL(30,10),
   @s12 DECIMAL(30,10),
   @s13 DECIMAL(30,10),
   @s14 DECIMAL(30,10),
   @s15 DECIMAL(30,10),
   @s16 DECIMAL(30,10),
   @s17 DECIMAL(30,10),
   @s18 DECIMAL(30,10),
   @s19 DECIMAL(30,10),
   @s20 DECIMAL(30,10),
   @guess DECIMAL(30,10)
  )
RETURNS DECIMAL(30, 10)
AS 
  BEGIN
    DECLARE @t_IDs TABLE (
        id INT IDENTITY(0, 1),
        value DECIMAL(30, 10)
    )
    Declare @NPV DECIMAL(30, 10)

    INSERT INTO @t_IDs (value) values (@s0);
    INSERT INTO @t_IDs (value) values (@s1);
    INSERT INTO @t_IDs (value) values (@s2);
    INSERT INTO @t_IDs (value) values (@s3);
    INSERT INTO @t_IDs (value) values (@s4);
    INSERT INTO @t_IDs (value) values (@s5);
    INSERT INTO @t_IDs (value) values (@s6);
    INSERT INTO @t_IDs (value) values (@s7);
    INSERT INTO @t_IDs (value) values (@s8);
    INSERT INTO @t_IDs (value) values (@s9);
    INSERT INTO @t_IDs (value) values (@s10);
    INSERT INTO @t_IDs (value) values (@s11);
    INSERT INTO @t_IDs (value) values (@s12);
    INSERT INTO @t_IDs (value) values (@s13);
    INSERT INTO @t_IDs (value) values (@s14);
    INSERT INTO @t_IDs (value) values (@s15);
    INSERT INTO @t_IDs (value) values (@s16);
    INSERT INTO @t_IDs (value) values (@s17);
    INSERT INTO @t_IDs (value) values (@s18);
    INSERT INTO @t_IDs (value) values (@s19);
    INSERT INTO @t_IDs (value) values (@s20);

    SET @guess = CASE WHEN ISNULL(@guess, 0) <= 0 THEN 0.00001 ELSE @guess END

    SELECT @NPV = SUM(value / POWER(1 + @guess, id)) FROM @t_IDs
    WHILE @NPV > 0 
      BEGIN
        SET @guess = @guess + 0.00001
        SELECT @NPV = SUM(value / POWER(1 + @guess, id)) FROM @t_IDs
      END
    RETURN @guess
  END 
```

并使用它

```
dbo.ufn_IRR(round(sum([M0]), 2),
            round(sum([M1]), 2),
            .....
            round(sum([M20]),2),
            0.00001) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T15:00:07.627

我建议的方法是...

定义一个独立的`table @t_IDs ( term INT, value DECIMAL )`. 在调用 之前，`ufn_IRR()`手动填充`table`. `rows` `(1, M0), (2, M1) ... (n, M20)`（错误，据我`SQL`所知，这似乎是一个循环步骤，但也许`SQL-Server`可以在一个语句中完成？）然后只需`ufn_IRR()`使用`@guess`参数调用。您首先需要修改`ufn_IRR()`并丢弃拆分`@strIDs`为`@t_IDs table`.

这种方法的优点是可以处理不同大小的数据。

`ufn_IRR()`使用线性寻根方法。对于大型或重复性任务，也许可以研究其他方法；关于“内部收益率”的维基百科页面提出了一些建议。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T18:40:48.130

勾勒出一种方法来做到这一点。

首先，我将编写一个处理这个表的过程，步骤如下：

*   创建临时表
*   使用`select... unpivot...`查询从基表中填充它（将 21 列转换为 1 列 21 行数据集）
*   对临时表运行数学

缺点是只能处理一张表，而且必须硬编码 unpivot 查询中 21 列的名称，不够灵活。

更高级的步骤是使用创建 #temp 表，然后使用动态 sql 根据您以编程方式确定需要处理的任何列（来自任何表）构建 unpivot。

要将其转换为函数，您必须创建一个表变量并将其用作参数。然后，任何想要调用函数的例程都必须构建并填充#temp 表，然后将其传递给函数。

就像我说的，它变得相当复杂。为了快速完成工作，我会选择@valexhome 的答案，并担心稍后在需要时更新/升级它。

# mysql - 使用 (0,1)^T 交叉连接表的首选方式？

> ID：12074639
> 
> 赞同：2
> 
> 时间：2012-08-22T13:49:47.793
> 
> 标签：mysql, sql, cross-join

我有一个表 T1，我想得到一个包含两倍行的新表：一个额外的列，它得到 0（对于 T1 的一个副本）和 1（对于 T1 的第二个副本）。

换句话说，我想将 T1 与一个带有一个布尔列和所有可能值的常量表交叉连接。

在 MySQL 中执行此操作的最佳/最有效/更合适的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T14:01:44.023

如果你想通过交叉连接来做到这一点，你可以这样做：

```
select t.*, const.which
from t cross join
     (select 0 as which union all select 1 as which) const 
```

这绝对比 UNION 更有效。是否比 UNION ALL 更高效取决于数据库引擎。

如果“t”是一个子查询，那么这可能更有效，因为子查询不可能被多次评估。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T13:51:48.673

你是说工会？

```
select 0 as newfield, * from yourtable
union all
select 1, * from yourtable 
```

# r - 使用循环计数和标记每个参与者的观察结果

> ID：12074644
> 
> 赞同：-2
> 
> 时间：2012-08-22T13:50:04.917
> 
> 标签：r, loops

我有重复测量的数据。

我需要创建一个循环，对参与者内的每个观察结果进行递增计数，并对其进行标记。

我是编写循环的新手。我的逻辑是，对于唯一 ID 列表中的每个项目，计算其中的每一行，并将某些函数应用于该行。

有人可以指出我们做错了什么吗？

```
data$Ob <- 0

for (i in unique(data$id)) {
  count <- 1
  for (u in data[data$id == i,]) {
      data[data$id ==u,]$Ob <- count
      count <- count + 1
      print(count)
    }
} 
```

谢谢！贾斯汀

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T16:37:28.510

您还可以使用`ave`：

```
set.seed(1)
data <- data.frame(id = sample(4, 10, TRUE))
data$Ob = ave(data$id, data$id, FUN=seq_along)
data
   id Ob
1   2  1
2   2  2
3   3  1
4   4  1
5   1  1
6   4  2
7   4  3
8   3  2
9   3  3
10  1  2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T13:58:17.207

```
# Generate some dummy data
data <- data.frame(Ob=0, id=sample(4,20,TRUE))

# Go through every id value
for(i in unique(data$id)){
    # Label observations
    data$Ob[data$id == i] = 1:sum(data$id == i)
} 
```

请注意，尽管`for`R 中的循环非常慢。在这种简单的情况下，它们可以正常工作，但是如果您的数据框中有数百万行，您最好做一些纯矢量化的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T16:30:22.543

但是你不需要循环......

```
data <- data.frame (id = sample (4, 10, TRUE))

##    id
## 1   3
## 2   4
## 3   1
## 4   3
## 5   3
## 6   4
## 7   2
## 8   1
## 9   1
## 10  4

data$Ob  [order (data$id)] <- sequence (table (data$id))

##    id Ob
## 1   3  1
## 2   4  1
## 3   1  1
## 4   3  2
## 5   3  3
## 6   4  2
## 7   2  1
## 8   1  2
## 9   1  3
## 10  4  3 
```

（也适用于字符或因子 ID）

（R 不是很酷吗！？）

# php - MySQL 中的条件 JOIN 语句

> ID：12074645
> 
> 赞同：5
> 
> 时间：2012-08-22T13:50:06.380
> 
> 标签：php, mysql, sql, join

我有以下工作 MySQL 查询：

```
SELECT 
    a.id id,
    a.price price,
    a.stock stock,
    a.max_per_user max_per_user,
    a.purchased purchased, 
    b.quantity owned 
FROM 
    shop_items a 
        JOIN shop_inventory b 
            ON b.iid=a.id 
            AND b.cid=a.cid 
WHERE 
    a.cid=1 
    AND a.szbid=0 
    AND a.id IN(3,4) 
```

`JOIN`加入表`shop_inventory b`返回`b.quantity owned`。但是，如果`shop_inventory b`表中没有`b.iid=a.id`我希望它返回的记录`b.quantity = 0`。我该怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-22T13:52:38.160

改为使用`LEFT JOIN`。而且`COALESCE`由于某些记录为空（*我猜*）。尝试，

```
SELECT a.id id,a.price price,a.stock stock,
       a.max_per_user max_per_user,a.purchased purchased, 
       COALESCE(b.quantity, 0) owned 
FROM shop_items a 
          LEFT JOIN shop_inventory b 
                ON b.iid=a.id AND b.cid=a.cid 
WHERE a.cid=1 AND 
      a.szbid=0 AND 
      a.id IN(3,4) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T13:52:25.460

像这样的东西应该可以解决问题。

```
SELECT a.id id,a.price price,a.stock stock,
       a.max_per_user max_per_user,a.purchased purchased, 
       COUNT(b.quantity) AS owned 
FROM shop_items a 
          LEFT JOIN shop_inventory b 
                ON b.iid=a.id AND b.cid=a.cid 
WHERE a.cid=1 AND a.szbid=0 AND a.id IN(3,4)
GROUP BY id 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-22T13:52:36.467

您想使用 a`LEFT JOIN`而不是 a `JOIN`。

```
SELECT a.id id,a.price price,a.stock stock,
       a.max_per_user max_per_user,a.purchased purchased, 
       b.quantity owned 
FROM shop_items a 
LEFT JOIN shop_inventory b ON b.iid=a.id AND b.cid=a.cid 
WHERE a.cid=1 AND a.szbid=0 AND a.id IN(3,4) 
```

如果字段与子句`b`不匹配，这将使字段为NULL。`ON`

如果你想要它`0`，你可以使用`IFNULL`

```
SELECT IFNULL(b.quantity, 0) owned 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-22T13:54:04.220

这将是您使用 Left Join 和 Group By 的地方。如果您只需要 b 中的项目数，那就是。

```
SELECT a.id id,a.price price,a.stock stock,
       a.max_per_user max_per_user,a.purchased purchased, 
       COUNT(b.quantity owned) as quantity_owned
FROM shop_items a 
          LEFT JOIN shop_inventory b 
                ON b.iid=a.id AND b.cid=a.cid 
WHERE a.cid=1 AND a.szbid=0 AND a.id IN(3,4)
GROUP BY a.id 
```

# iis - IIS 管道中第一个可用的 HTTP 状态代码在哪里？

> ID：12074648
> 
> 赞同：0
> 
> 时间：2012-08-22T13:50:13.020
> 
> 标签：iis, http-status-codes

有没有人知道 HTTP 状态代码（200、404、500 等）在 IIS 管道中的首次可用位置？我正在尝试为错误处理目的编写一系列 http 模块和处理程序，并且我不想特别想复制请求/响应来获取值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:50:19.280

看看这里的任何事件，然后选择:)

[http://msdn.microsoft.com/en-us/library/ms693685(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms693685(v=vs.90).aspx)

理论上，状态码可以被管道中的任何一个http模块改变；它只取决于他们订阅了哪些事件。

例如，授权模块可以订阅该`OnAuthorizeRequest`方法，并在那时执行其逻辑，并在需要时更改状态码。在另一种情况下，经典的 ASP 应用程序可能作为处理程序运行，您将无法确定状态代码是否为 500，直到`OnPostExecuteRequestHandler`. 最后，日志模块中的错误可能会生成 500，直到请求处理几乎完成时才会发生 ( `OnLogRequest`)

更复杂的是，一些处理程序可能会在执行期间吐出未缓冲的数据，因此它可能出现在任何`OnSendResponse`事件中，这些事件没有任何特定的顺序，并且状态代码可能在响应之间发生了变化。

所以，这真的取决于你想要达到什么目的才能有效地解决这个问题。如果你能提供更多细节，也许我们可以制定一个解决方案。

# liferay - 在 Liferay 中从 LDAP 导入用户

> ID：12074649
> 
> 赞同：1
> 
> 时间：2012-08-22T13:50:13.940
> 
> 标签：liferay, openldap

自 5 天以来，我遇到了完全相同的问题，无法将用户和组从 OpenLDAP 导入 Liferay CE 6.1 ...这是我的 OpenLDAP 的结构：

```
World
--tn
----com
------domain
--------admin
--------Computers
--------domain
--------Groups
----------IT
------------cn
------------gidNumber
------------objectClass
------------memberUid (n member)
--------Users
----------uid0001
------------cn
------------gidNumber
------------homeDirectory
------------objectClass 
------------sn
------------uid
------------uidNumber
------------givenName
------------loginShell
------------userPassword 
```

这是我的 portal-ext.porterties 文件：

```
## LDAP Server Settings
ldap.base.provider.url=ldap://controller.domain.com.tn:389
ldap.base.dn=DC=domain,DC=com,DC=tn 

# authentication
ldap.security.principal=cn=admin,dc=domain,dc=com,dc=tn
ldap.security.credentials=My Password !

# search from this point in the tree
ldap.users.dn=DC=domain,DC=com,DC=tn

# You can write your own class that implements
# com.liferay.portal.security.ldap.AttributesTransformer to transform the
# LDAP attributes before a user or group is imported to the LDAP store.

ldap.attrs.transformer.impl=com.liferay.portal.security.ldap.DefaultAttributesTransformer
# standard mappings, must be present in LDAP or we get an exception
#ldap.user.mappings=screenName=cn\npassword=userPassword\nemailAddress=\nfirstName=givenName\nlastName=sn\njobTitle=\ngroup=
ldap.user.mappings=screenName=cn\npassword=userPassword\nfirstName=givenName\nlastName=sn\njobTitle=title\ngroup=groupMembership\nemailAddress=uid

ldap.auth.search.filter=(mail=@user_id@)
ldap.import.user.search.filter=(objectClass=inetOrgPerson)

## Import,  users can be imported on demand at login or at startup and at regular intervals.
ldap.import.enabled=true
ldap.import.interval=360
ldap.import.on.startup=true

ldap.export.enabled=false 
ldap.user.default.object.classes=inetOrgPerson,organizationalPerson

## Custom Mappings, same format as ldap.user.mappings
##Commented by ME : ldap.user.custom.mappings=nickname=mailNickname\ndisplay=cn

## Added from this link : http://www.liferay.com/community/forums/-/message_boards/message/5681334
users.screen.name.validator=com.liferay.portal.security.auth.LiberalScreenNameValidator
users.screen.name.allow.numeric=true

##added from this link :  http://issues.liferay.com/browse/LPS-14519
users.screen.name.always.autogenerate=true

##added from this link : http://vkbardia.blogspot.com/2012/05/liferay-authentication-fails-for-screen.html?showComment=1345199625453#c3592789922325172023
users.email.address.required= false

#Groups
ldap.group.mappings=groupName=cn\ndescription=description\nuser=memberUid
ldap.import.create.role.per.group=false 
```

PS：我的用户没有电子邮件字段，这就是为什么我希望他们使用他们的 UID 登录。PS：在eclipse中运行时我得到了这个：

```
13:35:47,450 ERROR [PortalLDAPImporterImpl:196] Error importing LDAP users and groups
java.lang.NullPointerException
    at com.liferay.portal.kernel.io.unsync.UnsyncStringReader.<init>(UnsyncStringReader.java:33)
    at com.liferay.portal.kernel.util.PropertiesUtil.load(PropertiesUtil.java:199)
    at com.liferay.portal.kernel.util.PropertiesUtil.load(PropertiesUtil.java:192)
    at com.liferay.portal.security.ldap.LDAPSettingsUtil.getUserExpandoMappings(LDAPSettingsUtil.java:124)
    at com.liferay.portal.security.ldap.PortalLDAPImporterImpl.importFromLDAP(PortalLDAPImporterImpl.java:169)
    at com.liferay.portal.security.ldap.PortalLDAPImporterImpl.importFromLDAP(PortalLDAPImporterImpl.java:128)
    at com.liferay.portal.security.ldap.PortalLDAPImporterUtil.importFromLDAP(PortalLDAPImporterUtil.java:34)
    at com.liferay.portal.util.PortalInstances._initCompany(PortalInstances.java:448)
    at com.liferay.portal.util.PortalInstances.initCompany(PortalInstances.java:92)
    at com.liferay.portal.servlet.MainServlet.initCompanies(MainServlet.java:766)
    at com.liferay.portal.servlet.MainServlet.init(MainServlet.java:336)
    at javax.servlet.GenericServlet.init(GenericServlet.java:160)
    at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1266)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1185)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1080)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:5001)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5289)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:866)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:842)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615)
    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:649)
    at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1581)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:619) 
```

PS：我正在详细写所有这些，因为这对我来说非常重要。

等待您的帮助。

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T20:58:55.553

希望这可以帮助你，

[http://www.liferay.com/community/forums/-/message_boards/message/8246721](http://www.liferay.com/community/forums/-/message_boards/message/8246721)

# c# - WPF USB读卡器keyDown

> ID：12074650
> 
> 赞同：0
> 
> 时间：2012-08-22T13:50:17.753
> 
> 标签：c#, wpf, keypress, cardreader

我从连接到 USB 的读卡器读取文本时遇到问题。我在窗口中有方法：

```
private void Window_KeyDown(object sender, KeyEventArgs e)
{
    Key k = (Key)e.Key;

    textBoxLogin.Text += k.ToString();
} 
```

问题是，它模拟了所有按下的键，所以如果在我的磁卡中我有类似的东西：！示例，这将读取 LeftShift1LeftShiftELeftShiftX 等。任何解决方案如何改变它？顺便说一句，我知道我可以单击文本框，然后从读卡器中读取所有内容，但这应该适用于禁用的文本框。

谢谢你的任何答案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:40:30.087

我想没有简单的方法可以将键转换为字符串。如果您真的想从 Window_KeyDown 回调中获取文本，我认为您必须编写自己的转换器。

您的问题的根源来自输入：为什么卡片包含一系列按键事件而不是直接包含字符？

# c++ - 具有动态内存分配的构造函数和运算符 =

> ID：12074657
> 
> 赞同：1
> 
> 时间：2012-08-22T13:50:35.003
> 
> 标签：c++, crash, copy-constructor, dynamic-memory-allocation, assignment-operator

菜鸟在这里。我正在从书中做一个练习，编译器没有报告任何错误，但是当我尝试运行它时程序崩溃了。

我正在尝试运行一个小程序来执行 Cow 类的不同方法。它显式地具有：构造函数、默认构造函数、复制构造函数、析构函数、重载赋值运算符和显示其内容的方法。

我将把整个项目：

类规范：

```
//cow.h -- For project Exercise 12.1.cbp

class Cow
{
    char name[20]; // memory is allocated in the stack
    char *hobby;
    double weight;
public:
    Cow();
    Cow(const char *nm, const char *ho, double wt);
    Cow(const Cow &c);
    ~Cow();
    Cow & operator=(const Cow &c);
    void ShowCow() const; // display all cow data
}; 
```

方法实现：

```
// cow.cpp -- Cow class methods implementation (compile with main.cpp)

#include <cstring>
#include <iostream>
#include "cow.h"

Cow::Cow() // default destructor
{
    strcpy(name, "empty");
    hobby = new char[6]; // makes it compatible with delete[]
    strcpy(hobby, "empty");
    weight = 0.0;
}

Cow::Cow(const char *nm, const char *ho, double wt)
{
    strcpy(name, nm); // name = nm; is wrong, it copies the address of the argument pointer (swallow copying)
    /*if (name[20] != '\0') // if it's not a string, make it a string (in case nm is larger than 20)
        name[20] = '\0';*/
    hobby = new char[strlen(ho) + 1]; // allocates the needed memory to hold the argument string
    strcpy(hobby, ho); // copies the pointed-to data from the argument pointer to the class pointer
    weight = wt;
}

Cow::Cow(const Cow &c) // copy constructor
{
    strcpy(name, c.name); // copies the value to the desired address
    char *temp = hobby; // stores the address of the memory previously allocated with new
    hobby = new char[strlen(c.hobby) + 1];
    strcpy(hobby, c.hobby); // copies the value to the new address
    delete[] temp; // deletes the previously new allocated memory
    weight = c.weight;
}

Cow::~Cow()
{
    delete[] hobby;
}

Cow & Cow::operator=(const Cow &c) // overloaded assignment operator
{
    strcpy(name, c.name);
    char *temp = hobby;
    hobby = new char[strlen(c.hobby) + 1];
    strcpy(hobby, c.hobby);
    delete[] temp;
    weight = c.weight;
    return *this;
}

void Cow::ShowCow() const
{
    std::cout << "Name: " << name << '\n';
    std::cout << "Hobby: " << hobby << '\n';
    std::cout << "Weight: " << weight << "\n\n";
} 
```

客户：

```
// main.cpp -- Exercising the Cow class (compile with cow.cpp)

#include "cow.h"
#include <iostream>

int main()
{
    using std::cout;
    using std::cin;

    Cow subject1; // default constructor
    Cow subject2("Maria", "Reading", 120); // non-default constructor
    Cow subject3("Lula", "Cinema", 135);
    subject1 = subject3; // overloaded assignment operator
    Cow subject4 = subject2; // copy constructor
    subject1.ShowCow();
    subject2.ShowCow();
    subject3.ShowCow();
    subject4.ShowCow();

    cin.get();
    return 0;
} 
```

我隐藏了代码的某些部分以定位可能的问题，并且该程序似乎不喜欢这两行：

```
subject1 = subject3;
Cow subject4 = subject2 
```

特别是在重载的赋值运算符和复制构造函数中，如果我隐藏该`delete[] temp`行，程序不会崩溃。

我完全是菜鸟，可能有点愚蠢，但我看不出我在这些定义中做错了什么。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T13:53:14.117

```
Cow::Cow(const Cow &c) // copy constructor
{
    strcpy(name, c.name); // copies the value to the desired address
    char *temp = hobby; // stores the address of the memory previously allocated with new
    hobby = new char[strlen(c.hobby) + 1];
    strcpy(hobby, c.hobby); // copies the value to the new address
    delete[] temp; // deletes the previously new allocated memory
    weight = c.weight;
} 
```

这是复制品。没有以前分配的成员。`this->hobby`指向随机垃圾。所以当你`delete[] temp`（即`this->hobby`在新任务之前）时，你会得到 UB。

```
Cow & Cow::operator=(const Cow &c) // overloaded assignment operator
{
    strcpy(name, c.name);
    char *temp = hobby;
    hobby = new char[strlen(c.hobby) + 1];
    strcpy(hobby, c.hobby);
    delete[] temp;
    hobby = name;
    weight = c.weight;
    return *this;
} 
```

`hobby = name`是不正确的，因为它会导致内存泄漏 + 析构函数将尝试删除未分配的对象`operator new[]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:05:33.620

@ForEveR 已经注意到您的复制构造函数正在删除从未分配的内存。

But I'm going to argue that the entire exercise is flawed and is teaching C with classes, NOT C++. If you used string all your problems would go away because you wouldn't have to manage resources directly. This eliminates the need for you to write a destructor or copy assignment/constructor entirely. For example:

```
class Cow
{
    std::string name;
    std::string hobby;
    double weight;
public:
    Cow();
    Cow(const std::string& nm, const std::string& ho, double wt);
    void ShowCow() const; // display all cow data
}; 
```

# c++ - 删除指向指针向量的指针

> ID：12074658
> 
> 赞同：-1
> 
> 时间：2012-08-22T13:50:38.763
> 
> 标签：c++, templates, pointers, vector, delete-operator

我正在尝试删除指向向量的指针，但它包含指针（在某种程度上）

```
struct TestObject
{
    public:
    // some values
};

template <typename T> class VectorObject
{
    public:
    T       Object;
};

vector< VectorObject<TestObject*> > *pVector = 
                                    new vector< VectorObject<TestObject*> >();

TestObject *test = new TestObject;

VectorObject<TestObject*> testObject;
testObject.Object = test;

pVector->push_back(testObject);

vector<VectorObject<TestObject*>>::iterator i;

for (i = pVector->begin(); i != pVector->end(); i++)
{
     delete * (i->Object);
}

delete pVector; 
```

这不正是它应该工作的方式吗？还是我必须更改为：

```
vector< VectorObject < TestObject > *>? 
```

**要求**

TestObject 必须是指针，因为它是从外部库方法返回的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T13:56:45.270

这就是你的代码应该是这样的：

```
vector< VectorObject<TestObject> > pVector;

VectorObject<TestObject> testObject;

pVector.push_back(testObject); 
```

不需要使用指针。

* * *

如果您从期望释放的外部方法接收指针，您应该使用它`unique_ptr`来管理它们的生命周期：

```
vector< unique_ptr<TestObject> > pVector;
unique_ptr<TestObject> test(external_method());
pVector.push_back(test); 
```

# java - 如何在 Maven 项目中从 C 运行 java 类文件

> ID：12074661
> 
> 赞同：2
> 
> 时间：2012-08-22T13:50:46.387
> 
> 标签：java, c, maven, java-native-interface, beagleboard

我在 Maven 项目中有一个运行良好的 WebApp（WAR 文件）。

我想从 C 文件调用 Maven 项目内部的类文件中的 Java 方法。C 程序读取我的 beagleboard 的 GPIO 输入，当它打开时，它运行 Java 方法。我使用 JNI 来做到这一点。

我可以运行一个经典的 HelloWorld Java 方法，但是当我想从我的 Maven 项目中运行一个方法时，我的 JVM 在尝试加载 Java 静态方法时收到了一个致命错误。

我在我的 WebApp 中添加了 C 代码，在 /WEB-INF/myapp/classes/classfile/

类文件：应用方法：测试

我的 C 程序：

```
JNIEnv* create_vm(JavaVM ** jvm) {

    JNIEnv *env;
    JavaVMInitArgs vm_args;
    JavaVMOption options;
    //Path to the java source code
    options.optionString = "-Djava.class.path=./";
    //JDK version. This indicates version 1.6
    vm_args.version = JNI_VERSION_1_6;
    vm_args.nOptions = 1;
    vm_args.options = &options;
    vm_args.ignoreUnrecognized = 0;

    int ret = JNI_CreateJavaVM(jvm, (void**)&env, &vm_args);
    if(ret < 0)
        printf("\nUnable to Launch JVM\n");
    return env;
}

int main(int argc, char** argv)
{
    int fd, ret, data[64];
    JNIEnv *env;
    JavaVM * jvm;
    env = create_vm(&jvm);
    if (env == NULL)
        return 1;

    fd = ret = open(argv[argc - 1], O_RDONLY);
    printf("open returned %d\n", ret);
    while (1) {
        ret = read(fd, &data, sizeof(data));
        printf("read returned %d\n", ret);
        jclass helloWorldClass = (*env)->FindClass(env, "App");
        printf("appel class\n");
        jmethodID mainMethod = (*env)->GetStaticMethodID(
            env, helloWorldClass, "test", "([Ljava/lang/String;)V");
        printf("appel method\n");
        (*env)->CallStaticVoidMethod(env, helloWorldClass, mainMethod, NULL);

        sleep(2);
    }
    (*jvm)->DestroyJavaVM(jvm);
    exit(0);
} 
```

Java类：

```
package App;
public class App 
{
   public static void test (String[] args){
        System.out.println("Hello World");
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T16:20:40.213

~~您是否使用[反向 JNI](http://java.sys-con.com/node/45840)进行过调查？~~

我注意到您有以下行：

`options.optionString = "-Djava.class.path=./"; //Path to the java source code`

类路径需要指向 Maven 生成的 jar 文件，或者 Java 类文件所在的根目录。

请参阅： [设置 ClassPath](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/classpath.html)，

在一个标准的 Maven 项目中，Maven 会`target/`在你执行时创建你的 jar `mvn package`。因此，您可能会更改`-Djava.class.path=./`为`-cp /target/App.jar`

# installation - Visual Studio 2012 帮助查看器坏了，如何重新安装？

> ID：12074673
> 
> 赞同：6
> 
> 时间：2012-08-22T13:51:08.807
> 
> 标签：installation, visual-studio-2012, help-viewer

我已经卸载了 VS 2012 的 Help Viewer 3。

现在我想重新安装它，但我不知道如何。

使用添加/删除程序和“修改”VS 2012，没有重新安装帮助的选项。

VS 2012 的修复不安装帮助。

如果我从 VS DVD 映像启动文件`Packages\Help\help3_vs_net.msi`，它会说

> 此组件只能在 Visual Studio 安装期间安装。

如何强制重新安装？是否有任何开关可以传递给 msiexec 以解决该问题？

**[编辑]**有点进步，根据[这个线程](http://social.msdn.microsoft.com/Forums/en-US/devdocs/thread/634c56e2-c803-48a3-a6c8-866aa6cb39ba)，我可以运行了`msiexec /i help3_vs_net.msi VS_SETUP=1`。这将安装帮助查看器。

不幸的是，当我启动它时，它说：

```
A content file required by the Help Viewer is missing or has been corrupted. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-02T16:34:27.750

当帮助查看器的内容存储已被移动并且注册表项指向错误的位置时，通常会发现此消息，如此处[所示](http://connect.microsoft.com/VisualStudio/feedback/details/735869/vs11-help-viewer-2-beta-no-longer-works-after-update)。

请尝试将以下文件夹下的注册表项“LocationPath”更改为您将内容存储移动到的正确文件夹。

```
HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Help\v2.0\Catalogs\VisualStudio11 
```

（您可能可以通过搜索文件找到该文件夹`CatalogType.xml`​​）

# jsp - 是否可以在 servlet 中获取其他用户的会话属性

> ID：12074675
> 
> 赞同：1
> 
> 时间：2012-08-22T13:51:15.210
> 
> 标签：jsp, session, servlets, attributes

在我的应用程序中，我想获取其他用户的会话属性，例如他的姓名等。

有没有可能`request.getsession.getAttribute("Other User's attribute key")`。

请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:01:30.640

会话是每个“用户”；这就是会议的重点。

您可以实现一个会话侦听器，在添加/删除其他会话数据时将其放入应用程序上下文中。但是，未显式关闭的会话会将数据留在应用程序上下文中。

你具体想做什么？您为什么要尝试从另一个会话访问会话数据？

如果您*不*尝试从*不同*`setAttribute`的会话访问数据，那么您可以使用and获取并将所需的任何数据放入会话中`getAttribute`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:04:38.900

首先你这样做

```
javax.servlet.http.HttpSession session = request.getSession(); 
```

然后设置会话

```
session.setAttribute("username","value"); 
```

然后检索

```
String str = (String) session.getAttribute("username"); 
```

问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T04:46:30.370

在这种情况下，您应该将此类值存储在会话范围之外。如果需要跨多个会话访问数据，则需要将此类数据存储在应用程序范围内。

# git - 我们可以在 gerrit 存储库中包含我们自己的钩子吗

> ID：12074677
> 
> 赞同：0
> 
> 时间：2012-08-22T13:51:25.287
> 
> 标签：git, gerrit

我们有可能将自己的钩子添加到 Gerrit 管理的 git 存储库中吗？我们尝试向 hooks 目录（默认为空）添加一个 pre-recieve 钩子，但钩子没有触发！
Gerrit 不支持自定义钩子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T16:49:44.393

我的一位同事指出了 Gerrit 文档： http: [//gerrit.googlecode.com/svn/documentation/2.2.1/config-hooks.html](http://gerrit.googlecode.com/svn/documentation/2.2.1/config-hooks.html)

> Gerrit 不会在它使用的存储库中运行任何标准的 git 钩子，但它确实包含了自己的钩子机制。

# intellij-idea - Intellij Idea - 像在 Eclipse 中一样“显示选定的元素”

> ID：12074678
> 
> 赞同：1
> 
> 时间：2012-08-22T13:51:26.543
> 
> 标签：intellij-idea

想法是否具有与eclipse中相同的“**显示选定元素”的内容？**它所做的是隐藏所有其他代码并仅显示选定的方法及其主体。这是一个示例[http://wiki.eclipse.org/images/0/05/Show_Selected_Element_Only.gif](http://wiki.eclipse.org/images/0/05/Show_Selected_Element_Only.gif)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:12:44.180

我相信它没有......您可以为他们[创建一个请求](http://youtrack.jetbrains.com)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:35:34.223

它没有，但尝试这种类似的方法： - 转到“结构”视图 - 单击方法名称或按 F4。这会将焦点设置在方法代码上

我希望它有所帮助。

# tridion - Tridion 模板生成器：打开复合模板时出错

> ID：12074687
> 
> 赞同：2
> 
> 时间：2012-08-22T13:51:52.283
> 
> 标签：tridion

Tridion 模板生成器错误

从模板生成器打开复合模板时，我们收到错误消息

“无法加载文件或程序集 Tridion.ContentManager.TemplateTypes Ver 5.3.0.1219 ......或其依赖项之一。系统找不到指定的文件。”

我们正在使用 Tridion R5.3。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T14:03:25.657

您可以尝试卸载模板生成器并重新安装吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T07:46:35.253

此错误可能是由于版本不匹配。我们尝试在 Tridion 2011 SP1 中使用模板生成器，它运行良好。

这应该不是问题，因为我们正在从 5.3 迁移到 Tridion 2011

谢谢大家。

# iphone - 如何从 Mac OS X 10.7.3 卸载 Phonegap？

> ID：12074688
> 
> 赞同：1
> 
> 时间：2012-08-22T13:52:02.213
> 
> 标签：iphone, ios5, cordova

我对 iPhone 开发非常陌生。我希望使用 PhoneGap 框架。我想从我的 XCode 和我的 Mac 中卸载 Phonegap 框架版本 2.0.0。我已经搜索了谷歌来解决这个问题，但我从那里找不到任何想法。而且我对开发也很陌生。

你能帮我解决这个问题并运行这个项目吗？提前致谢。期待您的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T14:03:19.813

1.  从路径**PhoneGap/phonegap-phonegap-de1960d/lib/ios**打开**Cordova-1.7.3.dmg**

     **单击并打开它。您可以看到与下图相同的窗口，然后单击**Uninstall Cordova**选项。** 

 **![在此处输入图像描述](../Images/b1cfc80070b2e46489d69767ceb19140.png)

2.  使用 phonegap[卸载脚本](https://svn.apache.org/repos/asf/incubator/callback/phonegap-iphone/trunk/Uninstall%20PhoneGap.applescript)**

# viewstate - 将 Viewstate 置于底部或禁用爬虫的 Viewstate

> ID：12074695
> 
> 赞同：2
> 
> 时间：2012-08-22T13:52:18.250
> 
> 标签：viewstate

我正在优化网站以使其对 SEO 友好。某些控件需要具有 Viewstate。所以，我不能完全禁用它。
有两种方法可以实现这一目标。
- 将 Viewstate 数据移动到页面底部。
- 仅对爬虫禁用 Viewstate。
我在某处读过，更改爬虫和普通用户的内容会影响 SEO 排名。但不太确定该声明，因为这最终会影响隐藏字段。
将 Viewstate 移到底部似乎需要更多资源，然后禁用爬虫的 Viewstate。

请建议我错过的最佳方法或任何其他选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T01:20:37.817

我有一个类似的问题，最后结合了一些方法，所以只有当请求代理是爬虫时 ViewState 才会移动到底部。我的问题已关闭，因为 SEO 与 StackOverflow 无关，但如果您想尝试这种方法，阅读它可能会有所帮助：

[https://stackoverflow.com/questions/16328172/dealing-with-an-imperfect-viewstate-best-practices-move-to-the-bottom-disab](https://stackoverflow.com/questions/16328172/dealing-with-an-imperfect-viewstate-best-practices-move-to-the-bottom-disab)

最好的，斯蒂芬

# c++ - 将现有 .h 和 .c 文件添加到 Microsoft Visual Studio 2010 C++ 项目

> ID：12074696
> 
> 赞同：4
> 
> 时间：2012-08-22T13:52:18.203
> 
> 标签：c++, visual-studio, header-files

我想在我的 MSVS2010 C++ 项目中使用一些预先编写的 .h 和 .c 文件。这些是我想在我的项目中使用的库的源文件。我将 .h 文件添加到我的 MSVS 解决方案中的“Header Files”文件夹中，并将 .c 文件添加到“Source Files”文件夹中。但是，当我使用 include "sample.h" 包含其中一个 .h 文件时，它无法识别该头文件。我需要做什么才能使 MSVS 识别添加的文件？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T13:53:03.100

将标头的路径添加到`Extra include directories`项目设置中。

将现有文件添加到项目实际上并不复制文件。他们留在原来的位置。

# c++ - 将上 MatrixXd 复制到下 MatrixXd (Eigen3) C++ 库

> ID：12074705
> 
> 赞同：6
> 
> 时间：2012-08-22T13:52:47.577
> 
> 标签：c++, eigen, eigenvector, eigenvalue

我有一个下三角 MatrixXd，我想将其较低的值复制到上侧，因为它将成为一个对称矩阵。我该怎么做？

到目前为止，我已经完成了：

```
 MatrixXd m(n,n); 
 .....
 //do something with m
 for(j=0; j < n; j++)
       {
         for(i=0; i<j; i++)
           {
             m(i,j) = m(j,i);

           }
       } 
```

有最快的方法吗？我正在考虑一些能够将下三角矩阵“复制”到上三角矩阵的内部方法。假设我有这个矩阵，我们称之为`m`：

```
1 2 3
4 5 6
7 8 9 
```

我需要获得的`m`是：

```
1 4 7
4 5 8
7 8 9 
```

我也知道你可以让矩阵的上部或下部做一些事情：

```
MatrixXd m1(n,n);
 m1 = m.triangularView<Eigen::Upper>();
cout << m1 <<endl;

1 2 3
0 5 6
0 0 9 
```

但是我还没有得到我想要的...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T08:16:16.877

I assume here that you are referring to working with the [Eigen3](http://eigen.tuxfamily.org/index.php?title=Main_Page) c++ library. This is not clear from your question. if not, you should consider it. In any case, within Eigen, there is no need to actually copy the triangular part, to get a selfadjoint matrix. Eigen has the concept of views, and you can use a [self adjoint view](http://eigen.tuxfamily.org/dox/classEigen_1_1SelfAdjointView.html) in order to perform an operation like e.g.

```
using namespace Eigen;
MatrixXd m(m,n);
...
(generate uppper triangular entries in m)
...
VectorXd r(n), p(n);
r = m.selfadjointView<Upper>() * p; 
```

here is a small example to illustrate using fixed size matrices:

```
#include <Eigen/Core>

using namespace std;
using namespace Eigen;

int main()
{
    Matrix2d m,c;
    m << 1, 2,
         0, 1;

    Vector2d x(0,2), r;

    // perform copy operation 
    c = m.selfadjointView<Upper>(); 
    cout << c << endl;

    // directly apply selfadjoint view in matrix operation
    // (no entries are copied)
    r = m.selfadjointView<Upper>() * x;
} 
```

the output will be [1, 2, 2, 1]. now, the result in `r` is the same as if you had used `c * x` instead. Just that there is no need for copying the values in the original matrix to make it selfadjoint.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-02T09:20:19.517

如果 selfadjointView 不适合您，解决方案是在目标矩阵上使用 triangularView：

`m.triangularView<Lower>() = m.transpose();`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-09T15:35:36.023

我能想到的最简单的方法是将*m*矩阵的上半部分移到上半部分：

```
 m.triangularView<Upper>() = m.transpose(); 
```

例如，下面的代码：

```
 MatrixXd m(3,3);
    m << 1, 2, 3, 4, 5, 6, 7, 8, 9;

    m.triangularView<Upper>() = m.transpose();
    std::cout << m << std::endl; 
```

给出您要求的输出：

```
1 4 7
4 5 8
7 8 9 
```

问候。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-11-07T20:10:35.743

简单地：

```
m = m.selfadjointView<Upper>(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-22T14:25:45.670

我认为你的做法是正确的。如果您了解矩阵中数据的内存布局的一些细节，您可以使用一些低级优化。其中一种技术是[循环平铺](http://en.wikipedia.org/wiki/Loop_tiling)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-22T14:25:51.210

如果速度是一个大问题，我不会复制任何东西，只是用一个坐标反转对象来装饰/包装矩阵对象，该对象会将 (x,y) 翻转为 (y,x)。如果您将 () 运算符设为内联函数，则使用它时不会产生任何重大成本。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-22T14:18:33.953

这行得通，你可以剪一些东西，但你至少需要 n*m/2 （少一些东西），所以只有 2x

编辑：我看到你使用这个矩阵对象......语法不同，但算法是这样的，无论如何

```
#include <stdio.h>

int main ( )
{
    int mat [ 4 ] [ 4 ];
    int i, j;

    mat [ 0 ] [ 0 ] = 0;
    mat [ 0 ] [ 1 ] = 1;
    mat [ 0 ] [ 2 ] = 2;
    mat [ 0 ] [ 3 ] = 3;
    mat [ 1 ] [ 0 ] = 4;
    mat [ 1 ] [ 1 ] = 5;
    mat [ 1 ] [ 2 ] = 6;
    mat [ 1 ] [ 3 ] = 7;
    mat [ 2 ] [ 0 ] = 8;
    mat [ 2 ] [ 1 ] = 9;
    mat [ 2 ] [ 2 ] = 10;
    mat [ 2 ] [ 3 ] = 11;
    mat [ 3 ] [ 0 ] = 12;
    mat [ 3 ] [ 1 ] = 13;
    mat [ 3 ] [ 2 ] = 14;
    mat [ 3 ] [ 3 ] = 15;

    for ( i = 0; i < 4; i++ )
    {
        for ( j = 0; j < 4; j++ )
            printf ( "%02d", mat [ i ] [ j ] );
        printf ( "\n" );
    }
    printf ( "\n" );

    for ( i = 1; i < 4; i++ )
    {
        for ( j = 0; j < i; j++ )
            mat [ j ] [ i ] = mat [ i ] [ j ];
    }

    for ( i = 0; i < 4; i++ )
    {
        for ( j = 0; j < 4; j++ )
            printf ( "%02d ", mat [ i ] [ j ] );
        printf ( "\n" );
    }
    printf ( "\n" );

    scanf ( "%d", &i );
} 
```

# abap - 动态代码生成和执行，无需将代码写入数据库

> ID：12074712
> 
> 赞同：-1
> 
> 时间：2012-08-22T13:53:21.417
> 
> 标签：abap

是否可以生成ABAP代码并在内存中执行而不将代码写入数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:40:24.140

[是](http://help.sap.com/abapdocu_70/en/ABAPGENERATE_SUBROUTINE_POOL.htm)的。使用谷歌。使用谷歌。使用谷歌。使用谷歌。使用谷歌。（我必须写至少 30 个字符，尽管我真的没有其他话要说，除了想要动态生成代码通常表明你走错了路。）

# java - 以最小的复杂性将值匹配到最接近的值范围

> ID：12074713
> 
> 赞同：1
> 
> 时间：2012-08-22T13:53:23.767
> 
> 标签：java, search, time, range

我遇到了一个需要帮助的问题——假设我有一些由键（整数）和值（整数）组成的数据集。我需要能够给定某个键的值，找到它所属的最小键范围（即找到最近的更大和更小的键），然后通过插值返回匹配值。我想知道哪种方式可以让我在最快的时间内做到这一点（空间复杂性要小得多）。此外，删除是无关紧要的，所有值都是在启动时给出的（我们可以假设启动后不会再添加更多值）。我的重点是搜索时间，而不是插入。

最基本的解决方案是保留一个排序的键数组并对其使用二进制搜索 - 直到我找到输入键或找到两个大于和小于输入键的相邻元素。此选项需要 O(log n) 进行插入和搜索。我想知道是否有更好的。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T13:55:14.000

我会使用 NavigableMap，例如 TreeMap。

```
NavigableMap<Integer, Integer> map = new TreeMap<>();
map.put(1, 10);
map.put(0, -10);
map.put(5, 25);
map.put(3, 20);

// find the value below.
int key = 2;
Map.Entry<Integer, Integer> entry1 = map.floorEntry(key);
Map.Entry<Integer, Integer> entry2 = map.ceilingEntry(key);
System.out.println(key + " is between " + entry1 + " and " + entry2); 
```

印刷

```
2 is between 1=10 and 3=20 
```

插入、更新、查找和删除的时间复杂度为`O(log N)`

# javascript - Android Webview 触摸内容

> ID：12074715
> 
> 赞同：1
> 
> 时间：2012-08-22T13:53:25.703
> 
> 标签：javascript, android

我想以字符串的形式获取我在 webview 中触摸的那个标签的内容。

假设我有 5 个段落并且我触摸了一个段落，然后我想要该段落的内容为字符串。我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T17:51:09.770

嗯，这很容易，但是您需要分部分进行，并且需要 JavaScript。

1.- 在您的 web 视图中启用 JavaScript。

```
web.getSettings().setJavaScriptEnabled(true); //"web" is the object of type WebView 
```

2.- 在 WebView 和 Html 之间创建一个 JavaScript 接口。

```
public class JavaScriptInterface {

    private Handler myHandler = new Handler();

    public void getParagraph(final String paragraph){
        myHandler.post(new Runnable() {
            @Override
            public void run() {
                //Do something with the String
            }
        });
    }
} 
```

**注意：**在方法运行中，您将使用从 Html 检索到的字符串添加您需要处理的任何内容。此类可以在您创建 WebView 的类中创建，或者如果您要在另一个活动中使用相同的行为，则可以将其作为单独的类创建。

3.- 将接口发送到 WebView。

```
web.addJavascriptInterface(new JavaScriptInterface(), "android");
/* In this case "android" is the name that you will use from the Html to call 
your methods if is not too clear yet, please keep reading */ 
```

4.- 您需要将 onClick 事件处理程序添加到每个 P 标签。

```
<p onclick="android.getParagraph(this.innerText);">Text inside the paragraph</p>
/*android was the name we set for the interface in step 3, getParagraph is the name
of the method created on step2,"this.innerText" retrieves the text inside the paragraph*/ 
```

**注意：**您在我的示例中看到的所有名称都可以更改，但是如果您更改 java 类的名称，请记住更改 html 中的所有调用

# ios - Jenkins 将 xcode 应用程序版本更新为 Hockeyapp

> ID：12074717
> 
> 赞同：3
> 
> 时间：2012-08-22T13:53:33.353
> 
> 标签：ios, xcode, hudson, jenkins, testflight

我正在为我的应用程序开发 CI（持续集成）。

所以，我将 Jenkins 与[HockeyApp](http://www.hockeyapp.net)一起使用（等于[TestFlyApp](https://testflightapp.com)）。

问题是 HopckeyApp 只接受新版本的应用程序，如果它与最后一个添加的版本不同，否则它会给我一个已经存在版本的错误，并且没有更新。

我正在阅读有关更新值**CFBundleShortVersionString的苹果工具****Agvtool**。

 **我的主要问题是，

*   如何在 Jenkins 中自动执行此操作。
*   如何更新项目存储库（在我的例子中是 Git），以便下一次构建它知道哪个是最后一个更新的版本，或者任何其他选项来跟踪最后一个更新的版本。

我正在尝试这样做，但其他方法将被接受。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T09:49:28.100

建议更新`CFBundleVersion`而不是更新`CFBundleShortVersionString`，请参阅[http://support.hockeyapp.net/kb/how-tos/how-to-do-versioning-for-beta-versions-on-ios-or-mac](http://support.hockeyapp.net/kb/how-tos/how-to-do-versioning-for-beta-versions-on-ios-or-mac)

以下博客文章介绍了整个设置，还展示了如何使用 git 标签自动更新版本号：[http://monitzer.com/ ?p=75](http://monitzer.com/?p=75)

这是另一种使用 git 更新版本号的方法：[https ://gist.github.com/3395649](https://gist.github.com/3395649)**

# mod-rewrite - Mod_rewrite - 不要在 url 中显示某些查询字符串

> ID：12074719
> 
> 赞同：0
> 
> 时间：2012-08-22T13:53:39.547
> 
> 标签：mod-rewrite

我知道这个问题可能已经被问过好几次了，但老实说，我还没有找到完整的答案。

我有这个网址：modelDetails.php?manufacturerName=$1&manfuacturerID=$2&modelName=$3&modelID=$4&yachtCode=$5&lang=$6

是否可以不在 url 中显示 YachtCode 和 lang 并且仍然在页面之间传递值？这是我的 htacces 文件：

```
Options +FollowSymlinks
RewriteEngine on
RewriteRule ^(.*)\.html$ $1.php [nc]
RewriteCond %{QUERY_STRING} ^lang=(EN|DE|NL)$ [NC]
RewriteRule ^(.*)/([0-9]+)/(.*)/([0-9]+)/([0-9]+)$ modelDetails.php?manufacturerName=$1&manufacturerID=$2&modelName=$3&modelID=$4&yachtCode=$5 [L,QSA] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T22:31:33.483

如果您从查询字符串中删除数据，那么访问数据的唯一其他方法是从 cookie 中检索数据。但是要设置 cookie，您必须在某些时候让游艇代码值出现在查询字符串中。

唯一的选择是使用 POST（Web 表单使用的模式）而不是 GET（通常使用的模式）。POST 模式将变量作为请求的一部分提交，而不是将变量添加到查询字符串中。但是您不能强制超链接使用 POST 模式，因此这可能对您没有用处。

简而言之，您可能无法对最终用户完全隐藏游艇代码。

# javascript - 尝试后清除样式

> ID：12074723
> 
> 赞同：0
> 
> 时间：2012-08-22T13:53:48.993
> 
> 标签：javascript, jquery

在我的拼写游戏中，用户单击字母以使它们动画到网格上的插槽中以拼写单词。

我已经设计了它，所以当一个单词拼写正确时，会应用一种称为“wordglow2”的样式，使单词消失并显示背后的图片 - 这是游戏的目标。

当用户读错单词时，他/她会再次尝试该单词。当用户输入错误的单词时，一种名为“wordglow4”的样式将应用于该单词，使其发出红色光。问题是应用于错误单词的样式不会消失以腾出空间进行另一次尝试。

**单击单词的第三个字母（尝试）后，如何使样式消失 2 秒？**

此代码根据单词是对还是错来应用样式...

```
 if (!$('.drop-box.spellword:not(.occupied)').length) {
       var wordIsCorrect = 0;
       $('.drop-box.spellword').each(function() {
          if ($(this).attr("data-letter") == $(this).find("div").attr("data-letter")) {
                wordIsCorrect++;
            }
        });
        console.log(wordIsCorrect);
        console.log($('.drop-box.spellword').length);
        if ($('.drop-box.spellword').length == wordIsCorrect) {

                $('.drop-box.spellword').addClass('wordglow2');
                $(right).val('Well Done!');
                $(right).show();
                audioS.play();
                $('.counter').html(completeWords + '/6').show();
                $(wrong).hide();
                $('.minibutton').prop('disabled', false);

            } else {

                $('.drop-box.spellword').addClass("wordglow4").css('color', 'transparent');
                $(wrong).val('Try Again');
                $('.minibutton').prop('disabled');
                $(wrong).show();
                audioF.play();
                $('.counter').html(completeWords + '/6').show();
                $(right).hide();
                $('.minibutton').prop('disabled', true);

            }

        }
    });

}

var completeLetters = $('.wordglow2').length;
var completeWords = (completeLetters / 3);
$('.counter').html(completeWords + '/6');

if (completeWords == 3) {
    $('table').fadeOut(2000);
}

var incompleteWords = $('.spellword').hasClass('.wordglow4').length;
if (incompleteWords == 3) {
    $('.minibutton').prop('disabled', false);
}
}); 
```

我试过这个...

```
if $('.drop-box.spellword').hasClass("wordglow4") {
               $("wordglow4").fadeOut(2000);                   
            } 
```

这是一个工作小提琴...... [http://jsfiddle.net/smilburn/3qaGK/25/](http://jsfiddle.net/smilburn/3qaGK/25/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:21:16.267

使用[removeClass](http://docs.jquery.com/UI/Effects/removeClass#overview)方法来做到这一点。您可以在 removeClass 调用本身上放置持续时间/动画：

```
$('.drop-box.spellword').removeClass("wordglow4", "2000"); 
```

这将删除类并为过渡设置动画，这可能是您正在寻找的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T14:40:02.577

我不太明白你想做什么，但这样的事情可能会削减它：

```
 $('.drop-box.spellword')
                    .animate({ 'opacity': 1 }, 2000, function()
                             {
                                $(this)
                                    .removeClass('wordglow4')
                                    .removeClass('occupied')
                                    .html('')
                                    }); 
```

[http://jsfiddle.net/cTGGA/](http://jsfiddle.net/cTGGA/)

# python - TypeError：“生成器”对象不可调用

> ID：12074726
> 
> 赞同：18
> 
> 时间：2012-08-22T13:53:58.920
> 
> 标签：python, generator, yield

我有一个这样定义的生成器：

```
def lengths(x):
    for k, v in x.items():
        yield v['time_length'] 
```

它有效，调用它

```
for i in lengths(x):
    print i 
```

产生：

```
3600
1200
3600
300 
```

这是正确的数字。

但是，当我这样称呼它时：

```
somefun(lengths(x)) 
```

其中`somefun()`定义为：

```
def somefun(lengths):
    for length in lengths():  # <--- ERROR HERE
        if not is_blahblah(length): return False 
```

我收到此错误消息：

```
TypeError: 'generator' object is not callable 
```

我有什么误解？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-22T13:55:07.063

你不需要调用你的生成器，去掉`()`括号。

您可能对函数内部的变量使用与生成器名称相同的名称这一事实感到困惑；以下也将起作用：

```
def somefun(lengen):
    for length in lengen:
        if not is_blahblah(length): return False 
```

然后将传递给`somefun`函数的参数绑定到局部`lengen`变量而不是`lengths`，以明确该局部变量与`lengths()`您在其他地方定义的函数不同。

# php - W7 Pro IIS 7.5 覆盖 PHP Location: Header

> ID：12074730
> 
> 赞同：5
> 
> 时间：2012-08-22T13:54:11.770
> 
> 标签：php, rest, iis, http-headers

我正在用 PHP 创建一个 RESTful API，但遇到了问题。当客户端向服务器发送数据时，服务器应该返回：

```
Status code 201 CREATED
Header Location with the location of the new object
Content-Type application/xml

<SomeXmlData></SomeXmlData> 
```

虚拟代码，在我的计算机上产生问题：

```
<?php
header("Location: http://google.no/",true,201);
header("Content-Type: application/xml;charset=iso-8859-1");

echo "<?xml version=\"1.0\" encoding=\"utf-8\" standalone=\"yes\"?>\n";
echo "<Jada></Jada>";
?> 
```

HTTP 结果是

```
HTTP/1.1 201 Created
Content-Type: text/html; charset=UTF-8
Location: http://google.no/
Server: Microsoft-IIS/7.5
X-Powered-By: PHP/5.4.5
X-Powered-By: ASP.NET
Date: Wed, 22 Aug 2012 13:52:57 GMT
Content-Length: 209

<head><title>Document Moved</title></head>
<body><h1>Object Moved</h1>This document may be found <a HREF="http://google.no/">here</a></body><?xml version="1.0" encoding="utf-8" standalone="yes"?>
<Jada></Jada> 
```

由于位置标头，PHP 会自动将一些 HTML 代码和 HTML 内容类型添加到响应中。

正因为如此，我的 api 不能与它的客户一起工作。

编辑：IIS 7.5 Windows 7 专业版

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T14:03:11.543

我很抱歉承受坏消息，但请看这里：

[防止 IIS 在存在 Location 标头时更改响应](https://stackoverflow.com/questions/10594225/prevent-iis-from-changing-response-when-location-header-is-present)

> 编辑：从来没有找到答案 - 我最终切换到 Apache

似乎 IIS 长期以来一直在关注标头：

[http://forums.iis.net/t/1158431.aspx](http://forums.iis.net/t/1158431.aspx)

> 这是 IIS FastCGI 模块中的一个错误。它将在 Windows 7 RTM 中修复。我们还在研究使此修复可用于 IIS 7 的可能方法。

希望**如果**这些错误是相关的（我希望它们是相关的），**如果**您现在拥有 FastCGI，*那么*下面的修复可能会起作用。否则，切换到 PHP 非 FastCGI 模块也可能会起作用，而且它可能比使用 Apache 更容易。

[http://support.microsoft.com/kb/980363](http://support.microsoft.com/kb/980363)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T11:46:33.810

解决方案是创建一个 IIS 模块，在 FastCGI 完成后将标题“Custom-Location”重写为“Location”。

然后，FastCGI 根本不会知道我们正在发送 Location 标头，也不会修改我的响应。

模块：

```
string Location = context.Response.Headers["Custom-Location"] as string;
if (!string.IsNullOrEmpty(Location))
{
    context.Response.Headers.Remove("Custom-Location");
    context.Response.AddHeader("Location", Location);
} 
```

PHP：

```
header("Custom-Location: http://google.no",true,201);
header("Content-Type: application/xml");
echo "<xml></xml>"; 
```

（仍然是虚拟代码，不是非常正确的代码:)）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-18T07:51:05.783

我对 IIS 8.5 上的 WP REST API 有类似的问题。以下html

```
<head>
    <title>Document Moved</title>
</head>
<body>
    <h1>Object Moved</h1>
    This document may be found 
    <a HREF="[url-from-location-header]">here</a>
</body> 
```

`Location`在每个带有header 和 status返回的 json 的开头添加`201 Created`。`Content-Type`已更改为`text/html; charset=UTF-8`.

添加`cgi.rfc2616_headers = 1`php.ini 导致：

*   干净的正文（json），不添加 html
*   正确的“内容类型”
*   缺少“位置”标题
*   状态更改为`200 OK`

我不会称这个解决方案，这更像是用另一个问题代替一个问题。幸运的是，在我的情况下，这个新问题比原来的问题要小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-11T22:26:53.050

要规避此 IIS 行为，您可以使用出站重写规则。以下将查找状态 201，如果是，则消除所有内容行，包括结束 body 标记：

```
<outboundRules>
  <rule name="Remove injected 201 content" preCondition="Status 201">
    <match filterByTags="None" pattern="^(?:.*[\r\n]*)*.*&lt;/body>" />
    <action type="Rewrite" value="" />
  </rule>
  <preConditions>
   <preCondition name="Status 201" patternSyntax="Wildcard">
     <add input="{RESPONSE_STATUS}" pattern="201" ignoreCase="false" />
   </preCondition>
  </preConditions>
</outboundRules> 
```

# qt - 实现 TCP 服务器

> ID：12074736
> 
> 赞同：1
> 
> 时间：2012-08-22T13:54:30.973
> 
> 标签：qt

谁能告诉我我这样做是否正确？

使用 Qt，我通过继承 QTcpServer 类来实现 TCP 服务器。在传入的连接上，我创建了一个新线程、一个新的 Worker 对象，并将该对象移动到新线程并启动该线程。从这里开始，服务器一直在监听新客户端，然后每个线程都在其对象 Worker 的运行方法中。

现在，我创建了一个计时器，因为我需要基于 1 秒的间隔和播放歌曲时向每个客户端发送更新。在 readyRead 插槽中，我使用 readAll 读取数据，然后执行一些工作并发送回复。

但是，当我回到我的运行方法时，我只需要继续向客户端发送歌曲数据更新（客户端没有响应）。这一切都应该进入一个while（true）循环然后我检查一些布尔值来启动和停止计时器吗？我需要发送的曲目信息是歌曲进度时间。

我想我的问题是，我应该这样做吗？这似乎有点复杂，但话又说回来，这对你来说是并发性的。基本上，当某些条件为真时，我需要 TCP 服务器反复向客户端发送数据。我觉得只是一个无休止的 while 循环来检查何时启动和停止计时器是无用的工作。

发布代码会更清楚吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-31T12:57:38.513

这个问题是一个非常古老的问题，但也许它仍然可以提供帮助。

*关于 Qt 中的线程：*
许多人认为 Qt 中的并行处理就像在 .NET 中一样，您需要为每个操作另一个线程，在 qt 中这不是必需的！
**在 qt 中，如果您有阻塞代码（例如计算大事或等待同步器以获取 SQLServer 的答案），您只需要一个线程**

如果我对您的理解正确，您就没有这样的阻塞操作。
所以我编写了一个非常小的 TcpServer，没有继承也没有单个线程（当然除了主 eventloop 线程），希望能解决您的问题并帮助其他人：

```
#include <QObject>
#include <QSet>
#include <QTcpServer>
#include <QTcpSocket>
#include <QTimer>

class TcpServer : public QObject
{
    Q_OBJECT
    public:
        TcpServer()
        {
            // handle new connections
            this->connect(&this->serverTcp, &QTcpServer::newConnection, this, &TcpServer::handleClientConnect);

            // init client refresh timer
            this->timer.setInterval(1000);
            this->connect(&this->timer, &QTimer::timeout, this, &TcpServer::handleClientUpdates);
            this->timer.start();
        }

        bool startListen(qint16 port)
        {
            return this->serverTcp.listen(QHostAddress::Any, port);
        }

    private slots:
        void handleClientConnect()
        {
            QTcpSocket* socketClient = *this->setConnectedClients.insert(this->serverTcp.nextPendingConnection());
            this->connect(socketClient, &QTcpSocket::disconnected, this, &TcpServer::handleClientDisconnect);
            this->connect(socketClient, &QTcpSocket::readyRead, this, &TcpServer::handleClientData);
        }

        void handleClientDisconnect()
        {
            this->setConnectedClients.remove((QTcpSocket*)this->sender());
        }

        void handleClientData()
        {
            QTcpSocket* socketSender = (QTcpSocket*)this->sender();
            // handle here the data sent by the client
        }

        void handleClientUpdates()
        {
            // construct here your update data
            QByteArray baUpdateResponse = "test";

            // send update data to all connected clients
            foreach(QTcpSocket* socketClient, this->setConnectedClients) {
                socketClient->write(baUpdateResponse);
            }
        }

    private:
        QTcpServer serverTcp;
        QTimer timer;
        QSet<QTcpSocket*> setConnectedClients;
}; 
```

# android - Android Multitouch，在特定时间获取位置数据（不考虑它的历史）

> ID：12074742
> 
> 赞同：0
> 
> 时间：2012-08-22T13:54:39.873
> 
> 标签：android, multi-touch

我在 android 上遇到了多点触控问题，我相信我已经解决了，但是有时问题似乎仍然存在。我知道有很多类似问题的答案（这里和其他地方），但我还没有找到解决这个特殊情况的方法。

在某种程度上，我的问题很简单：我有一个计时器，每次运行时我都想知道有多少手指向下以及它们在哪里。我对他们的历史不感兴趣，无论他们是否已经搬家，或者自上次以来是否已经上涨，只需了解现在所触动的位置。

所以换句话说，我不想在触摸事件发生时运行一个进程，我想在一个进程运行时获取当前的触摸数据（手指触摸屏幕的位置）。

（在 Ragnagord 的建议之后，我认为我应该说我以前是如何尝试的。试图做的是让布尔值在向下（移动等）时为“真”，在向上（取消等）时为“假”，然后当我运行该过程时，它会检查哪个是真还是假。尽管有时会失败并变得一团糟，但这种排序仍然有效。而且我觉得这有点像黑客，应该有一个很好的解决方法。 )

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:03:06.820

我想最好的解决方案是在 up 和 down 事件中设置将布尔值设置为 false 或 true 的事件，因此如果布尔值为 true，则当前触摸屏幕。您也可以将 x 和 y 值存储在变量或其他东西中。这样您就可以从计时器事件中读取信息。（我不太了解android事件，但这对我来说似乎是合乎逻辑的）

# javascript - 如何检查monogdb数据库连接

> ID：12074745
> 
> 赞同：0
> 
> 时间：2012-08-22T13:54:41.763
> 
> 标签：javascript, node.js, mongodb, logging, database

使用 Node.js（monogdb、express 和其他模块）我想知道是否有用于数据库连接的 mongoose 方法，比如如果我打开一个连接`var db = mongoose.connect('mongo://localhost/members');`，那么我可以`db.on('close', function(){ /*do stuffs here*/})`。

基本上，下面的函数完成了从数据库获取用户列表并在数据库连接关闭时记录的工作。

所以我需要一些东西`if()`来检查数据库连接，或者在它关闭时无法获取数据并进行日志记录。我试过`if(docs != null)`了，它似乎刚刚结束。任何建议将不胜感激！

```
var logger = require('bunyan');

var log = new logger({
name: "loggings",
streams: [  
    {
        level: 'error',
        path: 'test.log',   
    }
],
serializers: {
    err: logger.stdSerializers.err,
}

});

function(req, res){
memberModel.find(function(err, docs){
    if (/*connection is closed*/) {
        res.render('users.jade', { members: docs });    
    }else{
            try {
                throw new DatabaseError ("Error!");
            } catch (err){
                log.warn({err: err}, "Check database connection!");
            }
        res.render('index.jade');
    };
});
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:00:07.933

您为什么要检查您所在的位置以关闭数据库连接？如果它在那时关闭，那么文档很可能为空。我认为检查

```
if (!err) {
   res.render('users.jade', { members : docs });
} else { 
    /* throw err, etc */ 
```

是一个合理的课程。

既然要在数据库连接关闭时记录，为什么不将记录功能附加到 Db 的“关闭”事件？

如果我误解并检查连接的状态是您真正想要的，那么我建议您使用以下属性：

[http://mongoosejs.com/docs/api.html#connection_Connection](http://mongoosejs.com/docs/api.html#connection_Connection)

（点击“显示代码”按钮）。连接的 _closeCalled 属性看起来可能是您要检查的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-23T19:08:27.880

```
var uri = 'mongodb://localhost/user1';
var promise = mongooose.connect(uri,{
    useMongoClient: true,
    });

promise.openUri(uri,function(errr,db){
    if(errr){
        throw errr;
    }else{
        console.log("Connection Successfull");                  
        glo_db = db;
    }
}); 
```

> 上面可能需要为较新版本的 mongoose 编写，如果在连接数据库时发现任何错误，则会抛出错误。 [在这里检查](http://mongoosejs.com/docs/promises.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-29T11:35:37.907

您可以使用 mongoose 事件，只要您的服务器断开连接就会触发：

```
mongoose.connection.on('error', function (err) {
    console.log('Mongoose default connection error: ' + err);
   //HERE SERVE YOUR DISCONNECT WARNING PAGE AND LOGGER
});

mongoose.connection.on('disconnected', function () {
    console.log('Mongoose default connection disconnected');
   //HERE SERVE YOUR DISCONNECT WARNING PAGE AND LOGGER

}); 
```

# javascript - 在没有 Flash 的网页中查看 PDF

> ID：12074747
> 
> 赞同：1
> 
> 时间：2012-08-22T13:54:45.310
> 
> 标签：javascript

我正在开发一个需要在页面上嵌入每周 PDF 文件的网站。
我们不想使用 Flash，因为网站需要支持跨浏览器（如 Android）。
我已经查看了以下主题，但它不符合我的目标，因为某些浏览器不支持 HTML5。
[在不使用 Flash 的情况下浏览网页中的 PDF](https://stackoverflow.com/questions/10380963/browsing-pdf-in-a-web-page-without-flash)
我现在有三个选项，想知道哪个更好。

1.使用谷歌文档查看器——谷歌文档查看器的问题是PDF分辨率不能太高。
结果我们的 PDF 内容变得不清楚。
2\. [OpenLayers](http://www.OpenLayers.org/) - 我们必须将我们的 PDF 文件转换为图像。
3\. [DimViewer](http://www.dimviewer.com/) - 这不是开源工具。

如果有人有类似经验欢迎分享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:08:44.087

以前使用 Google Doc Viewer，是的，它有一些限制，比如放大/缩小。

如果您在开源方面有更多经验，那么[OpenLayers](http://www.OpenLayers.org/)是一个不错的选择。

否则，就支持而言，像[DimViewer](http://www.dimviewer.com/)这样的商业工具可能是一个不错的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:57:14.980

你可以看看广告[pdf.js](http://mozilla.github.com/pdf.js/)。

当前的 Firefox 将其作为其原生 PDF 查看器引入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T23:26:30.790

只需将其放入 iframe

[http://jsfiddle.net/gAH8F/](http://jsfiddle.net/gAH8F/)

# mongodb - 覆盖 mongoDB 中的集合（涉及删除 + 批量保存）。如何确保这是作为交易执行的？

> ID：12074748
> 
> 赞同：4
> 
> 时间：2012-08-22T13:54:49.017
> 
> 标签：mongodb, transactions

在某些情况下，我需要通过执行以下操作完全覆盖特定的 MongoDB 集合：

1.  `db.collection.remove()`
2.  `db.collection.insert(doc)`多次。

如果 1\. 成功但某处 2\. 失败了怎么办？失败时有没有办法回滚？还有其他方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T14:22:17.847

如果您的收藏没有分片，您可以：

1.  [重命名](http://docs.mongodb.org/manual/reference/commands/#renameCollection)原始集合。
2.  使用原始名称创建一个新集合。
3.  填充新集合。
4.  如果一切顺利，则删除原始集合，否则删除新集合并将原始集合重命名为原始名称。

# google-app-engine - Google App Engine 应用互操作性

> ID：12074754
> 
> 赞同：0
> 
> 时间：2012-08-22T13:55:17.447
> 
> 标签：google-app-engine

我曾尝试在同一域内搜索有关 GAE 上的应用程序的信息，但到目前为止我没有任何运气。这里有一个帖子，但我不知道这个答案是否正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T21:56:32.600

您还可以将两个不同的“应用程序”作为同一个 appid 的不同*版本运行。*然后他们共享数据存储。此外，对同一应用程序路径的 urlfetch.fetch() 调用会受到特殊处理，它们更快并且不需要身份验证（它们被视为以管理员身份登录）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T17:19:21.577

我相信通过为您的两个应用程序公开一个 REST API 将为您提供最好的服务，以便它们可以根据需要读取/写入信息。

例如，如果您的一个应用程序是发票应用程序，而另一个应用程序只需要对发票的读取权限，您可以在发票应用程序中公开一个 API，用于：

*   通过某些过滤器搜索发票
*   在给定发票 ID 的情况下提供发票详细信息

公开 API 将使应用程序之间保持松散耦合，并允许您在出现更多需求时增强 API。将来，您甚至可以让其他客户端（例如移动应用程序）访问 API。

# ajax - 将 Spring Security 与 Ajax 调用集成

> ID：12074756
> 
> 赞同：3
> 
> 时间：2012-08-22T13:55:21.543
> 
> 标签：ajax, jsf, spring-security, primefaces

所以我有一个使用 jsf 和 primefaces 进行前端演示的 Web 应用程序。

我们将 Spring 安全性用于登录机制，并已将并发定义为

```
<session-management session-fixation-protection="newSession">
<concurrency-control max-sessions="1" error-if-maximum-exceeded="true" 
expired-url="multipleLogins.xhtml" />
</session-management> 
```

问题似乎是当用户从不同的浏览器进行两次登录时，某些按钮会执行不会触发重定向的 ajax 操作。似乎只有提交表单或重定向到页面本身的按钮才能识别多个登录操作。

例如，这个按钮

```
<p:commandButton id="retrieve" value="#{msgs.BUTTON_RETRIEVE}"
action="#{removeContactForm.retrieve}" update="@form"/> 
```

如果有多个登录，它从 Web 服务中检索内容并将它们显示在页面上不会触发重定向。

```
<p:commandButton id="remove" value="#{msgs.BUTTON_REMOVE}"
action="/pages/confirm/confirmRemove.xhtml" ajax="false" process="@this"          
immediate="true" rendered="#{!empty removeContactManager and   
removeContactManager.contactRolesSuccessful}" /> 
```

但是，此按钮将（因为它重定向到另一个页面）

任何人都知道一种让 webapp 将这些 ajax 调用注册为事件的方法，而不会将所有基于 ajax 的内容都粘贴到新页面中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T14:04:03.837

我使用了 Ben Simpson 编写的 JSFRedirectStrategy 在会话过期时使用会话管理过滤器重定向到会话过期 url。来源可以在[这里](http://wiki.icesoft.org/display/ICE/Spring+Security)找到。我认为同样可以在这里应用，但我们需要删除命名空间配置并添加一些像这样的 bean：

```
<http>
  <custom-filter position="CONCURRENT_SESSION_FILTER" ref="concurrencyFilter" />
  <custom-filter position="FORM_LOGIN_FILTER" ref="myAuthFilter" />
  <session-management session-authentication-strategy-ref="sas"/>
</http>

<beans:bean id="concurrencyFilter"
   class="org.springframework.security.web.session.ConcurrentSessionFilter">
  <beans:constructor-arg name="sessionRegistry" ref="sessionRegistry" />
  <beans:constructor-arg name="expiredUrl" value="/multipleLogins.xhtml" />
  <!-- this permits redirection to session timeout page from javascript/ajax or http -->
  <beans:property name="redirectStrategy" ref="jsfRedirectStrategy" />
</beans:bean>

<beans:bean id="myAuthFilter" class=
   "org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter">
  <beans:property name="sessionAuthenticationStrategy" ref="sas" />
  <beans:property name="authenticationManager" ref="authenticationManager" />
</beans:bean>

<beans:bean id="sas" class=
 "org.springframework.security.web.authentication.session.ConcurrentSessionControlStrategy">
  <beans:constructor-arg name="sessionRegistry" ref="sessionRegistry" />
  <beans:property name="maximumSessions" value="1" />
  <beans:property name="alwaysCreateSession" value="true" />
  <beans:property name="exceptionIfMaximumExceeded" value="true" />
</beans:bean>

<beans:bean id="jsfRedirectStrategy" class="com.examples.JsfRedirectStrategy"/>
<beans:bean id="sessionRegistry"
    class="org.springframework.security.core.session.SessionRegistryImpl" /> 
```

现在，您可以检查请求是否是 ajax 请求，然后在 JSFRedirectStrategy 类中发送这样的重定向： 这是从 ICEfaces 教程复制的代码。

```
/**
 * This class represents an extension to the way DefaultRedirectStrategy works.
 * This class takes into account if the incoming request causing action by Spring Security
 * requires a "partail-response" xml redirect instead of a response.sendRedirect().
 *
 * @author Ben Simpson ben.simpson@icesoft.com
 */
public class JsfRedirectStrategy implements RedirectStrategy {

    protected final Log logger = LogFactory.getLog(getClass());

    private boolean contextRelative;

    /**
     * Redirects the response to the supplied URL.
     * <p>
     * If <tt>contextRelative</tt> is set, the redirect value will be the value after the request context path. Note
     * that this will result in the loss of protocol information (HTTP or HTTPS), so will cause problems if a
     * redirect is being performed to change to HTTPS, for example.
     */
    public void sendRedirect(HttpServletRequest request, HttpServletResponse response, String url) throws IOException {
        String redirectUrl = calculateRedirectUrl(request.getContextPath(), url);
        redirectUrl = response.encodeRedirectURL(redirectUrl);

        if (logger.isDebugEnabled()) {
            logger.debug("Redirecting to '" + redirectUrl + "'");
        }

        //we should redirect using ajax response if the case warrants
        boolean ajaxRedirect = request.getHeader("faces-request") != null
                && request.getHeader("faces-request").toLowerCase().indexOf("ajax") > -1;

        if(ajaxRedirect) {
            //javax.faces.context.FacesContext ctxt = javax.faces.context.FacesContext.getCurrentInstance();
            //ctxt.getExternalContext().redirect(redirectUrl);

            String ajaxRedirectXml = "<?xml version=\"1.0\" encoding=\"UTF-8\"?>" +
                "<partial-response><redirect url=\""+redirectUrl+"\"></redirect></partial-response>";
            response.setContentType("text/xml");
            response.getWriter().write(ajaxRedirectXml);
        } else {
            response.sendRedirect(redirectUrl);
        }

    }

    private String calculateRedirectUrl(String contextPath, String url) {
        if (!UrlUtils.isAbsoluteUrl(url)) {
            if (contextRelative) {
                return url;
            } else {
                return contextPath + url;
            }
        }

        // Full URL, including http(s)://

        if (!contextRelative) {
            return url;
        }

        // Calculate the relative URL from the fully qualified URL, minus the scheme and base context.
        url = url.substring(url.indexOf("://") + 3); // strip off scheme
        url = url.substring(url.indexOf(contextPath) + contextPath.length());

        if (url.length() > 1 && url.charAt(0) == '/') {
            url = url.substring(1);
        }

        return url;
    }

    /**
     * If <tt>true</tt>, causes any redirection URLs to be calculated minus the protocol
     * and context path (defaults to <tt>false</tt>).
     */
    public void setContextRelative(boolean useRelativeContext) {
        this.contextRelative = useRelativeContext;
    }
} 
```

# java - 如何显示包含对象 HashMap 的模型的值？

> ID：12074759
> 
> 赞同：1
> 
> 时间：2012-08-22T13:55:24.540
> 
> 标签：java, spring, spring-mvc

我有一个哈希图如下：

```
HashMap<String, Object> myHashMap = new HashMap<String, Object>(); 
```

其中的数据如下所示：

```
{CompanyName=null, CompanyId=null} 
```

我想迭代它并在我的表示层中显示它的值。我将它添加到我的模型中，如下所示：public String

```
showPage(Map model)
{
        HashMap<String, Object> myHashMap =  new HashMap<String, Object>();

        model.put("company", myHashMap);

        return "page";
} 
```

我的 JSP

```
<h1>${companyName}</h1>

<fieldset>
    <p>
        <form:label path="companyName" cssErrorClass="form-error">Issuer Name</form:label>
    </p>
</fieldset>
<input type="submit" value="Next" class="round blue ic-right-arrow" /> 
```

我收到以下错误：

```
Caused by: org.springframework.beans.NotReadablePropertyException: Invalid property 'companyName' of bean class [java.util.HashMap]: Bean property 'companyName' is not readable or has an invalid getter method: Does the return type of the getter match the parameter type of the setter? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:09:24.247

像下面这样尝试它可能会起作用

```
${company["CompanyName"]} 
```

# c++ - Windows 和 linux 中使用的可执行二进制格式的低级解释

> ID：12074765
> 
> 赞同：3
> 
> 时间：2012-08-22T13:55:43.273
> 
> 标签：c++, compiler-construction, format, executable

我遇到过很多编程语言。他们每个人都有自己的魅力，但也有一些我不喜欢的东西。因此，我正在设计自己的编程语言，并简单地用其他语言实现我喜欢的东西。

在做了一些研究之后，虽然主要是猜测，但我相信我对处理器和操作系统的工作原理有所了解。我设法制作了一个解释器，它以我使用指令指针和一些（虚拟）寄存器制作的自定义格式读取和解释指令，并且目前一直在将代码编译为该格式。

然而，这对我来说似乎很愚蠢，因为我的编译器现在生成一个二进制文件来生成一个二进制文件并解释它，然后解释它。虽然目前的做法确实有一些好处（例如只编译一次并且*几乎*可以在任何地方运行它），但我很好奇在制作一个实际生成操作系统可以读取的代码的编译器时从哪里开始。

我听说过一些关于 PE 和 ELF 的东西，但一直找不到任何描述这些格式的低层次的东西。大多数事情似乎都是关于它用来做各种事情的伟大概念，但似乎没有任何东西以可理解的方式构造，例如*首先 16 位 ...，然后 20 位 ...，然后 28 位 . ..，然后是重定位表，然后是其中的一些指令......意味着......等等。*

另外，我使用 C++。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T14:06:40.883

这是一篇关于如何为 Windows 创建微小/简单 PE 文件的文章：

[http://www.phreedom.org/research/tinype/](http://www.phreedom.org/research/tinype/)

该文章链接到为 Linux 创建微小/简单 ELF 文件的指南：

[http://www.muppetlabs.com/~breadbox/software/tiny/teensy.html](http://www.muppetlabs.com/~breadbox/software/tiny/teensy.html)

他们都有很多关于文件格式的技术细节，他们都提到了 nasm 和类似的工具。我认为实现目标的最佳方式是生成汇编代码并让 nasm 或其他汇编程序创建可执行文件。

# sql - 从存储过程运行时更新语句不更新，但手动运行时完美运行

> ID：12074767
> 
> 赞同：0
> 
> 时间：2012-08-22T13:55:49.473
> 
> 标签：sql, sql-server, stored-procedures, sql-update

我在这里的第一篇文章，所以请对我温柔:)

我有一个存储过程，我用它获取一些源数据，进行一些操作，对其运行一些更新语句，然后将数据放入我们的主数据表中（我猜你可以说它是一个 ETL）。我遇到的问题是我编写的一些更新语句在程序运行时似乎没有工作，但是，如果我在单独的查询窗口中手动运行它们，它们工作得很好。从技术上讲，有两个部分更新语句，一部分更新，另一部分失败，这给我的麻烦增加了进一步的复杂性。

更新的代码片段如下：

```
UPDATE Prod_DDb.dbo.DataLoadTeleconnect
SET    pCommissionValue = (SELECT Commission
                           FROM   dbo.MappingiPhoneCommission
                           WHERE  Prod_DDb.dbo.DataLoadTeleconnect.pMRC BETWEEN BaseMRC AND HighMRC),
       pMRCBand = (SELECT MRCBand
                   FROM   dbo.MappingiPhoneCommission
                   WHERE  Prod_DDb.dbo.DataLoadTeleconnect.pMRC BETWEEN BaseMRC AND HighMRC)
WHERE  pMapID = 'iPhone' 
```

代码更新了我的源表中的 2 列，其中记录的 MRC 介于基本和高 mrc 之间。佣金是未更新的值，但 MRCBand 正确更新。

MappingiPhoneCommission 表具有以下列：

*   BaseMRC
*   高MRC
*   委员会
*   MRC乐队

如果有人能解释为什么这会在存储过程中失败但在新的查询窗口中运行良好，我将不胜感激。

如果您需要任何进一步的信息，请告诉我，我会尽力提供所需的信息。

亲切的问候托尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:16:30.137

我认为这段代码没有理由在存储过程中表现不同，所以我假设存储过程在更新之前对数据进行了更改。我建议向您的存储过程添加一些检查，以查看运行时的实际数据是什么。您可能会在更新之前开始添加以下内容：

```
SELECT * FROM Prod_DDb.dbo.DataLoadTeleconnect WHERE  pMapID = 'iPhone'
SELECT Commission FROM dbo.MappingiPhoneCommission, Prod_DDb.dbo.DataLoadTeleconnect
WHERE Prod_DDb.dbo.DataLoadTeleconnect.pMRC BETWEEN dbo.MappingiPhoneCommission.BaseMRC AND dbo.MappingiPhoneCommission.HighMRC
SELECT MRCBand FROM dbo.MappingiPhoneCommission, Prod_DDb.dbo.DataLoadTeleconnect
WHERE Prod_DDb.dbo.DataLoadTeleconnect.pMRC BETWEEN dbo.MappingiPhoneCommission.BaseMRC AND dbo.MappingiPhoneCommission.HighMRC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T18:15:26.267

如果存储的 proc 没有 try catch 块，则放入一个。 SP 可能在此更新之上失败，这就是它没有发生的原因；如果没有 trycatch 块，您可能不会回滚整个事务或冒泡实际错误。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2018-03-25T22:10:27.167

您可以使用 FOR 循环调用 select 语句中的列，然后更新列。这将帮助你。

# objective-c - Cocoa Mac, IB - NSButton（类型 Radio）可以像类型“Switch”一样工作，同时在点击打开/关闭方面保持边框“Radio”

> ID：12074770
> 
> 赞同：1
> 
> 时间：2012-08-22T13:56:02.690
> 
> 标签：objective-c, macos, cocoa, interface-builder

这是关于 OSX - iOS 与我无关。我在 InterfaceBuilder 中创建了一个 NSButton 并将其边框设置为“Radio”。默认情况下不选中该按钮。在我的应用程序中，我当然可以检查它，但是当再次单击它时，它不会被取消选中 - 因为单选按钮通常不是。

现在我的问题是是否有可能获得带有“Radio”边框的 NSButton，这似乎将类型固定为“Radio”，也可以像它的类型是“Switch”一样行事（“Switch”类型不能是当挡板为“收音机”时选择，所以我认为这必须通过代码完成）。

问题不在于这样做是否有意义:-) 而是是否可以做到以及通过什么方式。

**编辑：**选择斜面“无线电”然后将“推送”到“推送”或“在”接口构建器“中的”开关“时，Bezel切换到按钮的”斜角“，但无线电按钮外观保持不可立一体，只要一个人这样做以该顺序更改，之后不会触及任何其他内容。该按钮也可用作开/关。然而，我尝试获得的原始“收音机”边框有一个不同之处。我在 NSBox 中使用这个按钮，当设置为“Push On Push Off”时，我无法让它不绘制窗口的背景颜色。这是问题的屏幕截图：

![](../Images/6971e59d4169ad2c52e26a7c2eae2f13.png)

下部元素是斜角“Radio”/类型“Radio”，上部元素切换为类型“Push On Push Off”，如上详述。我可以以某种方式使那个窗口色的正方形消失还是有不同的方法？

**编辑 2：**我尝试为相应的 NSButtonCell 创建一个 IBOutlet，然后使用：

```
[myButtonCell setBackgroundColor:[NSColor clearColor]]; 
```

然而，alpha coponent 被忽略了，我最终得到了黑色背景。仍然不知道如何解决这个问题......

**解决方案：**奇怪的是，我偶然发现，当将类型设置为“瞬时更改”时，单击将打开按钮，然后单击将其关闭，上面详述的背景问题就消失了。没问题。

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSButtonCell_Class/Reference/Reference.html#//apple_ref/c/econst/NSPushOnPushOffButton](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSButtonCell_Class/Reference/Reference.html#//apple_ref/c/econst/NSPushOnPushOffButton)上的文档是什么意思说明“ Momentary Change”：“按住按钮时，会显示替代图像和替代标题。不按下按钮时会显示正常图像和标题。” 我不知道 - 按住按钮时没有任何反应...

**编辑 3：上面的解决方案在 MacOS 10.12 (Sierra) 上崩溃了，因为在 10.11 之前一切正常，结果按钮将永远不会显示为“on”**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-01T20:52:27.937

If you want to have `NSSwitchButton` behavior for a button that looks like an `NSRadioButton`, then you can `setImage:` and `setAlternateImage:` of the `NSSwitchButton` to the `image` and `alternateImage` of a dummy `NSRadioButton`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:58:49.910

查看此[Apple 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Button/Tasks/SettingButtonType.html)的“粘滞按钮”部分。

# javascript - 每月的每个星期五如何倒计时？

> ID：12074771
> 
> 赞同：0
> 
> 时间：2012-08-22T13:56:29.453
> 
> 标签：javascript, countdown, repeat, week-number

我的网站上有倒计时，我希望它倒计时到下周五，当周五结束时，我希望它自动倒计时到下周五.. 重复一遍..

我有这个脚本，但似乎无法让它工作，有人可以帮我吗？

提前致谢

```
$(function(){

var note = $('#note'),
    ts = new Date(5), //Setting the date here
    newYear = true;

if((new Date()) > ts){
    ts = (new Date()).getTime() + 10*24*60*60*1000;
    newYear = false;
}

$('#countdown').countdown({
    timestamp   : ts,
    callback    : function(days, hours, minutes, seconds){

        var message = "";

        message += days + " day" + ( days==1 ? '':'s' ) + ", ";
        message += hours + " hour" + ( hours==1 ? '':'s' ) + ", ";
        message += minutes + " minute" + ( minutes==1 ? '':'s' ) + " and ";
        message += seconds + " second" + ( seconds==1 ? '':'s' ) + " <br />";

        if(newYear){
            message += "left until the new year!";
        }
        else {
            message += "left to 10 days from now!";
        }

        note.html(message);
    }
});

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:13:08.457

使用 Date 对象上存在的 getDay() 方法，该方法将返回天数 0 = 星期日，1 = 星期一，5 = 星期五。
确定今天是哪一天，距离下一天还有多少天 5.
然后 ts = (new Date()).getTime() + 60*60*24*daysUntilFriday*1000;
在此之后，您还希望使用方法 setHours()、setMinutes() 和 Seconds 为 0，以便获得周五开始之前的准确时间。

EDIT! Sorry when you are done with your ts variable you want to use setTime(ts) so that you get a new Date object with the next Fridays date. And then you start setting hours, minutes and seconds to zero and then getTime() again so that your ts is the correct format for your countdown method.

Good luck!

Regards Tobias

# android - 我应该什么时候在我的登录页面上关闭我的数据库？

> ID：12074774
> 
> 赞同：0
> 
> 时间：2012-08-22T13:56:34.873
> 
> 标签：android, database, sqlite

**编辑**

第一个活动打开一个数据库：我使用了代码

```
LoginDbAdapter mDbHelper; // as a data member 
```

叫

```
// in my onCreate() of my main activity login

mDbHelper = new LoginDbAdapter(this); 
```

然后在我的

```
public void onResume(){
    mDbHelper.open(); // opens only when the activity is resumed
    super.onResume();
} 
```

然后我在我的第二个活动中做同样的事情来添加一个用户。这行得通。

我的问题如下：**如何打开指向数据库中第二个表的链接以访问

a 仅用户信息。我在哪里关闭它。**

**更新**

另一种效果更好的方法是在 onResume 中初始化我的 DbAdapter，然后`DbAdapter.open();`仅在我需要访问数据库时调用并在工作完成后立即关闭它`DbAdapter.close();`

注意：打电话`startManagingCursor(cursor);`和`stopManagingCursor(cursor);`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:08:05.060

在您的活动中

```
mDbHelper= new DatabaseAdapter(this); 
```

`DatabaseAdapter`并在您的类插入方法中

```
SQLiteDatabase db = this.getWritableDatabase(); 
```

最后在您的插入方法调用中`db.close();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:08:23.000

这些可能会有所帮助：

在您获得可写权限的地方找到这些，如下所示：

```
SQLiteDatabase db=this.getWritableDatabase(); 
```

现在你需要做什么 iz::

```
db.insert(TABLE, null, values);
db.close();//put these after inserting your database; 
```

您需要进入您的 DATABASEADAPTER 类，然后按照上面的代码在插入后关闭数据库连接

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T14:40:56.767

## 您需要在 close() 方法内的 LoginDbAdapter 中编辑这些行；

```
public class LoginDbAdapter
 {
   // close the database
     public void close(){
     if(mDbHelper != null){
      mDbHelper.close();
       mDb.close;//insert these line ;these close sqlitedatabase;
       }

    }

   } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-22T13:59:33.023

在 try{} catch{} 中给出关闭命令

# java - 获取存储过程的小数输出参数时的 JDBC 异常

> ID：12074775
> 
> 赞同：1
> 
> 时间：2012-08-22T13:56:34.933
> 
> 标签：java, stored-procedures, jdbc, out-parameters

我正在尝试从 MYSQL 过程中获取参数。我的过程：

```
CREATE PROCEDURE proc(someIn INT UNSIGNED, 
                      anotherIn INT UNSIGNED, 
                      OUT x DECIMAL(10,7),
                      OUT y DECIMAL(10,7)) 
```

我的java代码：

```
CallableStatement cs = conn.prepareCall("{call proc(?, ?,?,?)}");
cs.setLong(1, someLong);
cs.setLong(2, anotherLong);
cs.registerOutParameter(3,Types.DECIMAL,7);
cs.registerOutParameter(4,Types.DECIMAL,7);
rs = cs.executeQuery();
if (rs.next()) {
    double x = rs.getBigDecimal(3).doubleValue(); 
    double y = rs.getBigDecimal(4).doubleValue();
} 
```

我在调用 rs.next() 时遇到错误：

> java.sql.SQLException：ResultSet 来自 UPDATE。没有数据。

如果我手动调用具有相同参数的过程，我会得到结果数据。我试图将十进制更改为双精度，但这没有效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T14:01:03.090

调用该过程的正确方法是：

```
cs.execute();
double x = cs.getBigDecimal(3).doubleValue(); 
double y = cs.getBigDecimal(4).doubleValue(); 
```

# google-chrome - Chrome 扩展沙箱

> ID：12074777
> 
> 赞同：0
> 
> 时间：2012-08-22T13:56:41.357
> 
> 标签：google-chrome

我使用清单 2。

清单.json

```
{
...
"manifest_version": 2,
...
"sandbox": {
"pages": ["options.html"]
},
 "browser_action" : {
  ...
  "default_popup" : "popup.html"
}
...
} 
```

popup.html

```
<script type="text/javascript" charset="utf-8">
chrome.i18n.getMessage("@@ui_locale");
</script> 
```

我得到这个错误。“未捕获的 TypeError：无法调用未定义的方法 'getMessage'” 为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T11:04:58.253

我也发现了这个错误。

在 popup.html 上，会发生此错误。在 option.html 页面上，chrome.i18n 看起来不错，但如果在 iframe 中使用，它又会变坏。

尝试

```
if(chrome.i18n)
{
    return chrome.i18n.getMessage(msg)
}
else
{
    return ...
} 
```

[关于https://groups.google.com/a/chromium.org/forum/?fromgroups=#!topic/chromium-apps/csLpa0ndqjo](https://groups.google.com/a/chromium.org/forum/?fromgroups=#!topic/chromium-apps/csLpa0ndqjo)的相同讨论

# javascript - ajax成功响应后如何更改html类？

> ID：12074782
> 
> 赞同：1
> 
> 时间：2012-08-22T13:56:58.240
> 
> 标签：javascript, jquery

我想切换投票箭头类，就像stackoverflow的投票箭头一样。对于已登录的用户，如果已经投票，则 html 为：

```
<a href="#vote" id="vote-up-%1$d" class="vote vote-up-on"></a>
<a href="#vote" id="vote-down-%1$d" class="vote vote-down-off"></a> 
```

用户单击向下箭头后，如果响应成功，如何将“vote-up-on”更改为“vote-up-off”，将“vote-down-off”更改为“vote-down-one”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T13:59:13.343

好吧，这与 SA 投票相同 - 它可能更简洁一些，但我真的需要重新开始工作 ;-)

```
<a href="#vote" id="vote-up-%1$d" class="vote vote-up">vote up</a>
<span class="votes">0</span>
<a href="#vote" id="vote-down-%1$d" class="vote vote-down">vote down</a> 
```

和jQuery：

```
$(document).on('click', '.vote-up', function () {
    if(!$(this).hasClass('vote-locked')){     
        var votes = parseInt($(this).parent().find('.votes').text());  
        if(!$(this).hasClass('vote-off')){

            $(this).addClass('vote-off');
            $(this).nextAll('a').addClass('vote-locked');
            votes++;

        }
        else{

            $(this).removeClass('vote-off');
            $(this).nextAll('a').removeClass('vote-locked');
            votes--;

        }
       $(this).parent().find('.votes').text(votes);
   }
 });

 $(document).on('click', '.vote-down', function () {
     if(!$(this).hasClass('vote-locked')){  
        var votes = parseInt($(this).parent().find('.votes').text());  
        if(!$(this).hasClass('vote-off')){

            $(this).addClass('vote-off');
            $(this).prevAll('a').addClass('vote-locked');
            votes--;

        }
        else{

            $(this).removeClass('vote-off');
            $(this).prevAll('a').removeClass('vote-locked');
            votes++;

        }
       $(this).parent().find('.votes').text(votes);
    }
 }); 
```

[http://jsfiddle.net/gqDgL/](http://jsfiddle.net/gqDgL/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:01:24.740

```
 $("#vote-up").click(function () {
            $(this).toggle();
            $(this).toggleClass("vote vote-down-off");
        }); 
```

尝试这个

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T13:59:47.007

jQuery可以添加和删除类，使用addClass和removeClass，

```
$('#vote-up-%1$d').removeClass('vote-up-on');

$('#vote-up-%1$d').addClass('vote-up-off'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T14:16:19.987

当你收到 Ajax 响应时，做一个回调函数。

```
function addVoteUpClass() {
    if (jQuery(".vote").hasClass("vote-up-on")) {
        jQuery(".vote-up-on").removeClass("vote-up-on").addClass("vote-up-off");
    }
}

jQuery.ajax({
    url: "your_url",
    method: "GET",
    success: function(data) {
        addVoteUpClass();
    }
}); 
```

# path - 如何使用 Meteor 为定义的路径提供服务？

> ID：12074784
> 
> 赞同：0
> 
> 时间：2012-08-22T13:57:05.050
> 
> 标签：path, meteor

目前我正在`http://localhost:3000`使用我的 meteorApp.html 文件连接到我的流星项目。

我怎样才能让 Meteor 响应以下网址： `http://localhost:3000/otherPath`？

更明确地说，我在服务器端确实有一个文件，我只是希望能够在客户端使用`http://localhost:3000/nameOfTheFile.sufix`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T14:36:06.837

如果您希望 otherPath 在流星应用程序中，则 public 不会这样做。有几种方法可以做到这一点，[http](http://multi-page-config.meteor.com) ://multi-page-config.meteor.com是在一个流星进程中创建看起来像传统多页站点的一种方法。

我前一阵子做了这个，后来稍微完善了一点，但还没有更新。这至少可以给你一些想法……你可以在这里查看源代码：[https ://github.com/bolora/多页配置](https://github.com/bolora/multi-page-config)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T03:18:55.173

我想你可以把它放在`nameOfTheFile.sufix`目录下`public`。

请参阅[http://docs.meteor.com/#structuringyourapp](http://docs.meteor.com/#structuringyourapp)

# c# - 在 linq 中加入 3 个表，从两个表中获取所有条目

> ID：12074792
> 
> 赞同：1
> 
> 时间：2012-08-22T13:57:31.953
> 
> 标签：c#, linq, join

我有 3 张桌子

*   项目表
*   产品表
*   更新表

产品表保存项目中的不同产品，更新表保存对各种产品所做的更新，并保存对执行此操作的用户的引用。

基本上我想要的是有一个查询返回所有产品（因为产品到项目是多对一的关系），按我们最后一次由当前登录的用户更新的日期排序。

这是我当前的查询：

```
IEnumerable<ProjectProduct> list =
       from joined in
           (from product in db.GetTable<Product>()
            join project in db.GetTable<Project>()
            on product.ProjectId equals project.ID
            select new { product, project })
       join projectupd in db.GetTable<ProjectUpdate>()
       on joined.product.ID equals projectupd.ProductID
       where projectupd.CreatedBy == ParamUser
       orderby projectupd.LastUpdate
       select new ProjectProduct(joined.project, joined.product); 
```

但是，我得到的结果只是更新表中的条目，而不是所有现有产品。我知道“where”子句使它只选择由特定用户创建的更新，所以我走在正确的轨道上，但我尝试了一些方法来使查询成功，但没有运气。

有人对如何获得所需结果有建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:57:52.657

这是一个有点冗长的答案，它使用方法链语法，但我确实认为它可以满足您的需求：

```
var products = db.GetTable<Product>();
var projects = db.GetTable<Project>();
var projectUpdates = db.GetTable<ProjectUpdate>();

var latestProjectUpdatesForUser = projectUpdates
    .Where(x => x.CreatedBy == paramUser)
    .GroupBy(x => x.ProductId)
    .Select(g => g.OrderByDescending(x => x.LastUpdate).First());

var list = products
    .Join(
        projects,
        product => product.ProjectId,
        project => project.Id,
        (product, project) => new
            {
                Product = product,
                Project = project,
                Update = latestProjectUpdatesForUser.FirstOrDefault(u => u.ProductId == product.Id)
            }
    )
    .OrderByDescending(x => x.Update != null ? (DateTime?)x.Update.LastUpdate : null)
    .ThenBy(x => x.Project.Id)
    .ThenBy(x => x.Product.Id)
    .Select(x => new ProjectProduct { Project = x.Project, Product = x.Product}); 
```

它利用了`DateTime?`可排序的事实，并且`null`在使用`OrderByDescending`.

# websphere - WebSphere：我可以在不重新启动 jvm 的情况下重新加载事务设置吗？

> ID：12074794
> 
> 赞同：0
> 
> 时间：2012-08-22T13:57:53.947
> 
> 标签：websphere, settings, reload

是否可以在不重新启动 JVM 的情况下重新加载事务超时设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T00:36:11.560

我不相信这是可以做到的。这会影响在 JVM 上运行的每个应用程序，因此我坚信如果不重新启动 JVM，这将无法正常工作。kurtcebe 的建议绝对是一种测试和观察的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T08:28:09.973

基于@kurtcebe 的回答。以下命令不会重新加载设置，但会在运行时应用设置

```
set ts [$AdminControl completeObjectName cell=mycell,node=mynode,
process=server1,type=TransactionService,*]

$AdminControl setAttributes $ts {{clientInactivityTimeout 30} 
{totalTranLifetimeTimeout 180}} 
```

# magento - 如何拆分 (A/B) 测试 Magento 产品页面

> ID：12074797
> 
> 赞同：2
> 
> 时间：2012-08-22T13:58:02.387
> 
> 标签：magento, google-analytics, magento-1.7, ab-testing

我想测试我在 Magento 上设置的产品页面/布局的不同变体。使用 CMS 页面会很简单——但不能仅仅创建一个新产品。客户应该能够购买完全相同的产品，但在不同的页面上输入。

注意：谷歌网站优化器（无论如何我永远无法工作）现在显然已经死了，取而代之的是通过谷歌分析的内容实验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T21:20:36.623

考虑只测试一种产品的布局更改。正常的产品页面将是您的控制页面（页面“A”）

如果控制页面上的价格没有经常更新，只需将挑战者页面（页面 B）创建为服务器上某处的静态页面。

在 Analytics 中设置好实验后，将实验代码添加到页面 A 即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T02:15:31.543

CMS 页面是简单的 A/B，而产品页面是多变量的。这意味着如果你去设置不同的描述、标题、图片和其他任何东西，你会得到一些荒谬的东西，比如一个产品的 32 种食谱。这一切在 1.7 中都可以正常工作，但需要一些努力来遵循截屏视频、测试和修补程序。

如果您想要产品的 A/B，请考虑在后端设置两个商店/网站视图，例如“商店 A”和“商店 B”。现在编辑 index.php 并为具有偶数 IP 地址的人设置商店代码为“A”，为具有奇数 IP 地址的人设置“B”：

```
$mageRunCode=(ip2long(1 & $_SERVER['REMOTE_ADDR']) ? 'A' : 'B') 
```

# jquery - 将动态 href 传递到 Fancybox Iframe

> ID：12074798
> 
> 赞同：0
> 
> 时间：2012-08-22T13:58:04.950
> 
> 标签：jquery, fancybox

我正在尝试动态构建href以将其传递到fancybox iframe并将链接传递到php文件中

```
 <script type="text/javascript">
  jQuery(document).ready(function($){
    $('a').each(function(){
    var Href = 'GetImg.php?img=' + $(this).attr("href");
    alert ("Href");
    $(".Images").click(function() {

           $.fancybox.open({
           href : Href,
           type : 'iframe',
           padding : 5
           });
    });
   };

 }) ; // ready
</script> 
```

正在设置 Href，即警报（“Href”）并传递到 php 文件中，但未在 iframe 中打开。如果我硬编码

```
href : 'GetImg.php?img=/images/myImg.jpg' it works 
```

我的链接是

```
<a class="Images" href="/images/myImg.jpg" title="A witty Title">Send to PHP</a> 
```

仅供参考，这是 GetImg.php

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=windows-1250">
  <meta name="generator" content="PSPad editor, www.pspad.com">
  <title>Holly Gibbons</title>
<script type="text/javascript" src="fancyBox-2.0.6/lib/jquery-1.7.2.min.js"></script>

  <script type="text/javascript" src="/js/ddpowerzoomer.js"></script>    
<script type="text/javascript">
jQuery(function($){
    $('#image3').addpowerzoom({
        defaultpower: 2,
        powerrange: [2,5],
        largeimage: null,
        magnifiersize: [100,100] //<--no comma following last option!  
    }); 
    });
    </script>
  </head>
  <body>
  <?php 
  $my_img = $_GET['img'];
  ?>
<p> <img id="image3" src = <?php echo $my_img ?> /></p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T16:18:58.913

无需选择所有`a`标签和循环，你可以简单地做

```
$(document).on('click', '.Images', function(e) {
    e.preventDefault();
    var Href = 'GetImg.php?img=' + $(this).attr("href");
    alert(Href);
    $.fancybox.open({
        href: Href,
        type: 'iframe',
        padding: 5
    });
});​ 
```

# java - 文件存储服务器

> ID：12074800
> 
> 赞同：1
> 
> 时间：2012-08-22T13:58:09.580
> 
> 标签：java, mongodb, caching, memcached

我正在寻找更清洁的方法来水平扩展我的 Java 应用程序，同时对源代码和基础架构的影响最小。这是我的问题：我目前正在本地文件系统中保存资源，所以我需要**始终如一**在我所有的新处理处理节点之间共享这些文件。我知道 ehcache 和 terractora 服务器阵列的存在，但 localRestartable（保证持久性）仅在 ehcache 企业上可用，我希望尽可能远离商业许可证。其他替代方案可能是 memcached、redis、mongodb（考虑到持久性），甚至 nfs，但我希望有使用这些服务作为存储服务经验的人的意见，我还需要澄清：要求阻止使用任何在线云存储服务，尽管我愿意接受任何可以安装在我的数据中心的替代方案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T14:11:18.863

使用 MongoDB，您可以利用：

*   用于将数据分发到多个服务器的[副本集](http://www.mongodb.org/display/DOCS/Replica+Sets)
*   [分片](http://www.mongodb.org/display/DOCS/Sharding)以扩展写入（如果适合您需要管理的数据量和写入）

您有几个选项可以在 MongoDB 中存储二进制文件：

1）您可以将文件保存为 MongoDB 文档中字段中的二进制数据。当前的文档大小限制（在 MongoDB 2.2 中）是 16Mb，这对于您的 ~1Mb 文件来说似乎绰绰有余。

2) 您可以使用[GridFS API](http://www.mongodb.org/display/DOCS/GridFS)方便地处理较大的文档或以较小的块获取二进制文件（另请参见：[GridFS 类的 Java 文档](http://api.mongodb.org/java/current/com/mongodb/gridfs/GridFS.html)）。

# java - 为我的语法编写递归后代解析器

> ID：12074801
> 
> 赞同：3
> 
> 时间：2012-08-22T13:58:10.433
> 
> 标签：java, parsing, builder, recursive-descent

我必须使用 Recursive Descendent Parser Builder 构建表达式。

这是我的语法：

```
----RULES----
<cond> → <termb> [OR <termb>]*
<termb>→&lt;factb>[AND <factb>]*
<factb>→&lt;expr> RELOP <expr> | NOT <factb> | OPAR <cond> CPAR
<expr> → [PLUS | MINUS] <term> [(PLUS <term>) | (MINUS <term>)]*
<term> → <termp> [(MULT <termp>) | (DIV <termp>) | (REM <termp>)]*
<termp> → <fact> [POWER <fact>]*
<fact> → ID | NUM | OPAR1 <expr> CPAR1
----TERMINALS----
ID → ("A" | ... | "Z" | "a" | ...| "z") [("A"| ... | "Z" | "a" | ...| "z" | "0" | ... | "9")]*
NUM → ("0" | ... | "9") [("0" | ... | "9")]*
OPAR → "("
CPAR → ")"
OPAR1 → "["
CPAR1 → "]"
RELOP → EQ | NEQ | GT | GE | LT | LE
EQ → "= ="
NEQ → "!="
GT → ">"
GE → ">="
LT → "<"
LE → "<="
POWER → "^"
DIV → "/"
REM → "%"
MULT → "*"
MINUS → "−"
PLUS → "+"
AND → “and” or “&amp;&”
OR → “or” or “||”
NOT → “not” or “!” 
```

现在，我有一个复合结构，每个终端都有一个类，我正在尝试按照上述语法规则来构建它。

这个想法是我需要一个用于每个语法规则的方法，并且每个方法都必须构建表达式树的一部分。

虽然它适用于更简单的语法（例如，只允许布尔表达式的语法），但我遇到了一些问题。

主要问题来自于`expr`规则，它强制我使用 + 和 - 的一元版本，允许这样的表达式`+3-4`。这需要我找出何时必须将操作数视为一元以及何时视为二进制！

这是我的 Builder 类的代码。请注意，有些东西是意大利语的，但我已经使用评论解释了一切，甚至是我的问题。另请注意，有一行我使用了伪代码，所以这一行不可编译！

```
package espressioniCondizionali;

import espressioniCondizionali.espressioni.*;

/**
 *
 * @author Stefano
 */
public class Builder6 {

    /**
     * This one is used just to parse the input String.
     * It has a prossimoSimbolo() method (something like a nextSymbol()) that returns a String with the next Symbol in the String
     */
    private GestoreInput gestoreInput;
    /**
     * Espressione is the Composite structure that represents and expression
     */
    private Espressione root = null;
    private String symbol = null;

    public Builder6(GestoreInput gestoreInput) {
        this.gestoreInput = gestoreInput;
    }

    public Espressione build() {
        buildCond();
        return root;
    }

    private void buildCond() {
        buildTermb();
        //I'm unsing a class named Simboli that holds every terminal symbol of my grammar. Symbol names are the same defined in the grammar.
        while (symbol.equalsIgnoreCase(Simboli.OR1) || symbol.equalsIgnoreCase(Simboli.OR2)) {
            Or or = new Or();
            or.setLeft(root);
            buildTermb();
            or.setRight(root);
            root = or;
        }
    }

    private void buildTermb() {
        buildFactb();
        while (symbol.equalsIgnoreCase(Simboli.AND1) || symbol.equalsIgnoreCase(Simboli.AND2)) {
            And and = new And();
            and.setLeft(root);
            buildFactb();
            and.setRight(root);
            root = and;
        }
    }

    private void buildFactb() {
        buildExpr();
        if (symbol.equalsIgnoreCase(Simboli.EQ) || symbol.equalsIgnoreCase(Simboli.NEQ) || symbol.equalsIgnoreCase(Simboli.GT) || symbol.equalsIgnoreCase(Simboli.LT) || symbol.equalsIgnoreCase(Simboli.LE) || symbol.equalsIgnoreCase(Simboli.GE)) {
            Operatore op = null;
            switch (symbol) {
                case Simboli.EQ: {
                    op = new Eq();
                    break;
                }
                case Simboli.NEQ: {
                    op = new Neq();
                    break;
                }
                case Simboli.GT: {
                    op = new Gt();
                    break;
                }
                case Simboli.GE: {
                    op = new Ge();
                    break;
                }
                case Simboli.LT: {
                    op = new Lt();
                    break;
                }
                case Simboli.LE: {
                    op = new Le();
                    break;
                }
                default: {
                    //Symbol not recognized, abort!
                    throw new RuntimeException("\"" + symbol + "\" non è un simbolo valido.");
                }
            }
            op.setLeft(root);
            buildExpr();
            op.setRight(root);
            root = op;
        } else if (symbol.equalsIgnoreCase(Simboli.NOT1) || symbol.equals(Simboli.NOT2)) {
            Not not = new Not();
            buildFactb();
            not.setRight(root);
            root = not;
        } else if (symbol.equalsIgnoreCase(Simboli.OPAR)) {
            buildCond();
            if (!symbol.equalsIgnoreCase(Simboli.CPAR)) { //If there's no closgin square bracket it means that our expression is not well formed
                throw new RuntimeException("Espressione non valida. Attesa una \")\", trovato \"" + symbol + "\"");
            }
        }
    }

    private void buildExpr() {
        Operatore op = null;
        if (symbol != null) { //Let's check if our expression starts with a + or a -
            if (symbol.equalsIgnoreCase(Simboli.PLUS)) {
                op = new Plus();
            } else if (symbol.equalsIgnoreCase(Simboli.MINUS)) {
                op = new Minus();
            }
        }
        buildTerm();
        //If our op is still null, we didn't found a + or a - so our operand will be a binary one
        //If op != null, our + or - is unary and we've got to manage it! A unary operand doesn't have a left son!
        if (op != null) {
            op.setRight(root);
            root = op;
        }
        //Since we can have something like -3+2+s-x we've got to check it
        while (symbol.equalsIgnoreCase(Simboli.PLUS) || symbol.equalsIgnoreCase(Simboli.MINUS)) {
            Operatore op1 = null; //We define a new Operatore that will be a + or a -
            switch (symbol) {
                case Simboli.PLUS: {
                    op1 = new Plus();
                    break;
                }
                case Simboli.MINUS: {
                    op1 = new Minus();
                    break;
                }
            }
            /*
             * Here comes a BIG problem. We used the first if/else to check if
             * our unary operand was at the beginning of the string, but now
             * we've got to see if our current operand is either binary or
             * unary! That's because we can have both a==-1+d and a==3-1+d. In
             * the first case, the - is unary, while is binary in the second.
             * So, how do we choose it?
             * 
             * EXAMPLE : (-a>2 || -b-12>0)
             * This one will be evaluated to -a > 2 || -12 > 0 that's clearly wrong!
             * -b is missing before -12\. That's because the -12 is used as unary 
             * and so it won't have a left child (the -b part)
             */
            //--PSEUDOCODE
            if (op1 is not unary) {
                op1.setLeft(root);
            }
            //--END PSEUDOCODE
            //CURRENT IMPLEMENTATION OF THE PSEUDOCODE PART
            if (root != null && (root.getClass().equals(Num.class) || root.getClass().equals(Id.class))) { //It is binary if the previous value is a constant or a variable but not if it is an operand!                  
                op1.setLeft(root);
            }
            //END OF CURRENT IMPLEMENTATION OF THE PSEUDOCODE PART
            //Setting the right child must be done in both cases
            buildTerm();
            op1.setRight(root);
            root = op1;
        }
    }

    private void buildTerm() {
        buildTermp();
        while (symbol.equalsIgnoreCase(Simboli.MULT) || symbol.equalsIgnoreCase(Simboli.DIV) || symbol.equalsIgnoreCase(Simboli.REM)) {
            Operatore op = null;
            switch (symbol) {
                case Simboli.MULT: {
                    op = new Mult();
                    break;
                }
                case Simboli.DIV: {
                    op = new Div();
                    break;
                }
                case Simboli.REM: {
                    op = new Rem();
                    break;
                }
            }
            op.setLeft(root);
            buildTermp();
            op.setRight(root);
            root = op;
        }
    }

    private void buildTermp() {
        buildFact();
        while (symbol.equalsIgnoreCase(Simboli.POWER)) {
            Power p = new Power();
            p.setLeft(root);
            buildFact();
            p.setRight(root);
            root = p;
        }
    }

    private void buildFact() {
        symbol = gestoreInput.prossimoSimbolo();
        if (symbol.equalsIgnoreCase(Simboli.OPAR1)) { //Sottoespressione            
            buildExpr();
            if (!symbol.equalsIgnoreCase(Simboli.CPAR1)) { //Se non c'è una parentesi chiusa vuol dire che l'espressione non valida
                throw new RuntimeException("Espressione non valida. Attesa una \"]\", trovato \"" + symbol + "\"");
            }
        } else if (symbol.matches("[A-Za-z][A-Za-z | 0-9]*")) { //Nome di una variabile!
            root = new Id(symbol);
            symbol = gestoreInput.prossimoSimbolo();
        } else if (symbol.matches("[0-9]*")) { //E' una costante!
            root = new Num(symbol);
            symbol = gestoreInput.prossimoSimbolo();
        }
    }
} 
```

已知问题：

`(a<=b && c>1) || a==4`评估为`a <= b && c > 1`

`a==[-4]`评估为`a == a - 4`

`-4+3>c-2`评估为`+3 > c - 2`

可能还有更多错误，但这些是最常见的。

所以这是我的问题：

首先，你认为这段代码有一些逻辑问题吗？我的意思是，它是按照语法所说的还是我做错了什么？您将如何修复该`expr`方法以使其适用于一元和二进制 + 或 - 操作数？

如果我的代码完全错误，是否有人可以帮助我编写工作版本？正如你在类名中看到的，这是我写的**第六个**实现，我真的不知道接下来要做什么！

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T15:11:05.780

## 第 1 步：以不同的方式思考语法

我认为您在实现递归下降解析器时遇到问题，因为您的语法非常复杂。表单所代表的任意迭代`[ ... ]*`很难让你理解。试着这样想：

```
<cond> → <termb> <cond-tail>
<cond-tail> → OR <termb> <cond-tail> | EPSILON
<termb> → <factb> <termb-tail>
<termb-tail> → AND <factb> <termb-tail> | EPSILON
<factb> → <expr> RELOP <expr> | NOT <factb> | OPAR <cond> CPAR
<expr> → <unary-op> <term> <expr-tail>
<unary-op> → PLUS | MINUS | EPSILON
<expr-tail> → ((PLUS <term>) | (MINUS <term>)) <expr-tail> | EPSILON
<term> → <termp> <term-tail>
<term-tail> → ((MULT <termp>) | (DIV <termp>) | (REM <termp>)) <term-tail> | EPSILON
<termp> → <fact> <termp-tail>
<termp-tail> → POWER <fact> <termp-tail> | EPSILON
<fact> → ID | NUM | OPAR1 <expr> CPAR1
EPSILON → "" 
```

该语法与您发布的语法相同，但我将`[ ... ]*`规则拆分为它们自己的非终端。为了做到这一点，我添加了`EPSILON`规则，它允许非终端匹配`""`（空字符串）。这与您的规则基本相同`[ ... ]`，可能实际匹配也可能不匹配。epsilon 规则只是表示“现在停止尝试匹配”的最后一个替代方案。例如，如果您当前正在解析 a`cond-tail`那么您将首先检查`OR`输入中的 an。如果您没有看到 an`OR`那么您将继续使用下一个替代方案，即`EPSILON`. `OR`这意味着这个条件链中没有更多的条件，所以它`cond-tail`匹配空字符串。

`expr-tail`您可以通过在and中将运算符组合在一起来进一步简化语法`term-tail`：

```
<cond> → <termb> <cond-tail>
<cond-tail> → OR <termb> <cond-tail> | EPSILON
<termb> → <factb> <termb-tail>
<termb-tail> → AND <factb> <termb-tail> | EPSILON
<factb> → <expr> RELOP <expr> | NOT <factb> | OPAR <cond> CPAR
<expr> → <unary-op> <term> <expr-tail>
<unary-op> → PLUS | MINUS | EPSILON
<expr-tail> → (PLUS | MINUS) <term> <expr-tail> | EPSILON
<term> → <termp> <term-tail>
<term-tail> → (MULT | DIV | REM) <termp> <term-tail> | EPSILON
<termp> → <fact> <termp-tail>
<termp-tail> → POWER <fact> <termp-tail> | EPSILON
<fact> → ID | NUM | OPAR1 <expr> CPAR1
EPSILON → "" 
```

现在您应该返回并重构您的解决方案，为每个新规则添加新方法。（您可以选择将新规则的代码保留在原始规则中，但至少用注释清楚地标记不同的部分，以帮助您跟踪代码的哪些部分在做什么。）

现在应该很明显在哪些情况下`+`和`-`是一元运算符，因为它们将被您的新`buildUnaryOp`方法解析（对应`unary-op`于语法中的新规则）。

至于新`*-tail`规则，您可以选择严格递归地实现它们，或者如果您担心在长表达式上炸毁堆栈，您可以在函数体内使用循环来实现它们。

## 第 2 步：修复您的状态跟踪

这是您的主要问题：

```
/**
 * Espressione is the Composite structure that represents and expression
 */
private Espressione root = null;
private String symbol = null; 
```

您正在使用实例级字段来存储递归下降解析器的状态。我从未见过一个递归下降解析器，其方法的返回类型为`void`——至少在它实际上构建抽象语法树时不会。[wikipedia](http://en.wikipedia.org/wiki/Recursive_descent_parser#C_implementation)上的示例具有`void`返回类型，但那是因为它所做的只是*检查*输入并丢弃结果，而不是实际从输入构建 AST。

由于您将状态存储在类级字段中，因此该字段在每个同级调用中都会被覆盖，`buildExpr()`并且您正在丢失数据。无论如何，这是我的理论。您可以通过制作一长串`expr`s like来测试它`"1+2+3+4+5"`。它应该最终放弃前面的所有条款。

我建议在功能上构建解析器（不使用任何`.set*()`方法），其中每个`build*()`方法都从 AST 返回解析的节点。这将涉及更改所有构造函数以接受子节点。如果您更清楚，您仍然可以使用突变代替。这是一个重构`buildCond`：

```
private Espressione buildCond() {
      Espressione leftHandSide = buildTermb();
      if (symbol.equalsIgnoreCase(Simboli.OR1) || symbol.equalsIgnoreCase(Simboli.OR2)) {
          Or or = new Or();
          or.setLeft(leftHandSide);
          or.setRight(buildTermb());
          return or;
      }
      return leftHandSide;
  } 
```

这是新的`build()`样子：

```
public Espressione build() {
    return buildCond();
} 
```

如果您以这种方式重新编写其余代码以构建树（而不是使用实例级字段来保存您的状态），那么它应该会更好地工作。

祝你好运！

# javascript - Node.js 上的性能重算法

> ID：12074802
> 
> 赞同：3
> 
> 时间：2012-08-22T13:58:11.477
> 
> 标签：javascript, multithreading, performance, node.js, socket.io

我正在创建一些性能非常高的算法，例如进化和人工智能。对我来说重要的是我的更新函数经常被调用（精度），我只是不能`setInterval`以每毫秒一次的速度更快地更新。

最初我只想使用一个 while 循环，但我不确定这些类型的阻塞循环在 Node.js 环境中是否是一个可行的解决方案。如果我遇到“无限”循环，Socket.io 的 socket.on("id", cb) 会工作吗？我的代码是否需要以某种方式返回到 Node.js 以让它检查所有事件，还是自动完成？

最后（但并非最不重要），如果 while 循环确实会阻塞我的代码，那么在我的更新函数之间获得非常低的增量时间的另一种解决方案是什么？我认为线程可能会有所帮助，但我怀疑它们是否可行，我的 Socket.io 服务器和其他类需要以某种方式进行通信，而“其他类”是指主`World`类，它有一个需要调用的更新方法并完成繁重的工作，以及`getInfo`我的服务器使用的方法。我觉得大部分时间程序只是坐在那里，等待间隔触发，浪费时间而不是进行计算......

另外，我想知道 Node.js 是否适合这类任务。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T14:56:27.963

[您可以使用child_process.fork](http://nodejs.org/api/child_process.html#child_process_child_process_fork_modulepath_args_options)在单独的线程中执行 havy 算法，并通过在主线程中等待结果`child.on('message', function (message) { });`

应用程序.js

```
var child_process = require('child_process');
var child = child_process.fork('./heavy.js', [ 'some', 'argv', 'params' ]);
child.on('message', function(message) {
     // heavy results here
}); 
```

沉重的.js

```
while (true) {
    if (Math.random() < 0.001) {
        process.send({ result: 'wow!' });
    }
} 
```

# android - Facebook“提要”对话框显示问题

> ID：12074805
> 
> 赞同：3
> 
> 时间：2012-08-22T13:58:21.587
> 
> 标签：android, iphone, ios, facebook, facebook-graph-api

我正在尝试借助“提要”对话框在 Facebook 上发帖。我在帖子中提供了一些信息，例如“链接”、“图片”、“标题”、“描述”、“标题”等。

但是当我分享帖子时，预览如下图所示：

![在此处输入图像描述](../Images/2ab63012f350f7b6cfecec8ac1e7354d.png)

我担心的是，我想在图像结束后显示与对话框右对齐的描述。我可以通过对我的代码进行一些更改来做到这一点。

更新后的屏幕如下图所示：

![在此处输入图像描述](../Images/6efde40f7e0a1349eb4666b2bb217fd2.png)

```
mFacebook.dialog(MyActivity.this, "feed",parameters, new FbDialogListener()); 
```

其中参数是 Bundle 的对象，包含要在 Facebook 上发布的所有值。

Iphone SDK 也存在同样的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T22:34:48.223

你不能这样做，对话框是从 Facebook 端呈现的，内容本身也是如此。您似乎还尝试在描述中嵌入 HTML，这也不起作用，因为 Facebook 不会在其界面中呈现客户端提供的 HTML。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T17:07:11.813

不要使用 Facebook 的对话框，您可以创建自己的视图（例如 iOS 中的 UIView 或 Android 中的视图），类似于第二个对话框（或任何您喜欢的）。在分享按钮点击时，您可以使用 Facebook 的图形 API 将其分享到您的墙上。

iOS 示例

```
NSMutableDictionary * params = [NSMutableDictionary dictionaryWithObjectsAndKeys:[appDelegate.facebook accessToken],@"access_token",
                                    <your FB app id>, @"api_key",
                                    <message you want to post>, @"message",
                                    imageData, @"source",
                                    nil];
    [appDelegate.facebook requestWithGraphPath:@"me/feed"
                          andParams:params 
                      andHttpMethod:@"POST" 
                        andDelegate:appDelegate]; 
```

有关图形 API，请参见[此处](https://developers.facebook.com/docs/reference/api/)。

我在我的 iOS 应用程序中使用了类似的方法。我设计了与 Facebook 的分享 UI 几乎相似的分享对话框。

# java - 创建 Eclipse SVN“虚拟分支”？

> ID：12074809
> 
> 赞同：0
> 
> 时间：2012-08-22T13:58:38.020
> 
> 标签：java, eclipse, svn, version-control, subclipse

我在我的公司中使用 Eclipse 和 SVN 编写 Java，其中一个提交规则是每个提交都有自己的目的，而且它始终是一个目的。

有时我可以完成一些工作，但直到一天结束才能在服务器上发布它（它会破坏构建）然后我必须做一些其他工作（与第一个无关）并提交它，但是如果我这样做，我将提交与 2 个任务相关的更改。

我在这里想要的是有一种方式告诉 Eclipse，我想将这些更改和我想使用主干代码的两个任务分开。所以，基本上它是一个分支，但从未存在过，以便让我进行单独的提交。我曾想过让 N 个 Eclipse 工作区与主干代码一起工作，并为每次更改使用每个 onde，但这似乎有点过头了。

可行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:04:24.190

在 Intellij 中，您有可以单独提交的更改列表。也许这个问题可以帮助您进一步了解：[subclipse 中的更改列表](https://stackoverflow.com/questions/1280451/different-change-lists-in-subclipse)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:37:41.060

我能想到这样做以便您可以在单个文件中进行两组不同更改的唯一方法是为`checkout`第二组更改任务设置第二个工作副本，并独立处理这些更改。当任一任务完成时，您可以提交在该工作副本中所做的更改，并在构建后提交之前更新另一个工作副本。

# xml - XLINQ：提取元素值时的字符串与 Convert.ToString()

> ID：12074810
> 
> 赞同：0
> 
> 时间：2012-08-22T13:58:38.553
> 
> 标签：xml, linq, casting, linq-to-xml, type-conversion

我是 LINQ 的新手，并使用它来查询 XML（这太不可思议了）。我有以下函数，它只是为XML 中的`List`每个后代创建一个新对象。：`list`

```
public void ParseLists(XDocument xDoc)
{
    XNamespace ns = xDoc.Root.Name.Namespace;
    AddRange((
        from e in xDoc.Descendants(ns + "list")
        select new List
        {
            Id = (string)e.Element(ns + "id"),
            ItemsLink = (string)e.Element(ns + "items-link"),
            BatchLink = (string)e.Element(ns + "batch-link"),
            Name = (string)e.Element(ns + "name"),
            IsVendor = (string)e.Element(ns + "is-vendor"),
            Levels = (string)e.Element(ns + "levels")
        }).ToList());
} 
```

下面是 XML 的一个片段：

```
<lists xmlns="www.namespaceurl.com" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
  <list>
    <batch-link>www.batchlinkurl.com</batch-link>
    <id>12345</id>
    . . .
  </list>
</lists> 
```

**问题**：在构建`List`对象时，我最初使用`Convert.ToString()`而不是`(string)`将元素值作为字符串获取。我发现的是：

`Convert.ToString(e.Element(ns + "id"))`将返回`<id>12345</id>`

然而

`(string)e.Element(ns + "id")`将返回`12345`。

**有人可以解释为什么返回值不同吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:02:02.917

`Convert.ToString(...)`将调用被覆盖的[`ToString()`](http://msdn.microsoft.com/en-us/library/bb341005.aspx)方法，该方法将*元素本身*作为字符串返回。

`(string) ...`将使用[重载的显式转换为字符串运算符](http://msdn.microsoft.com/en-us/library/bb155263)，它将元素的*文本内容*作为字符串返回。

# javascript - JQuery Mobile 捏和缩放 iOS

> ID：12074814
> 
> 赞同：0
> 
> 时间：2012-08-22T13:58:50.703
> 
> 标签：javascript, jquery, jquery-mobile

我正在使用 JQuery Mobile 和 Phonegap 构建一个 iPhone 应用程序。如何启用捏合和缩放手势？

我用这个试过：

```
$(document).bind('mobileinit', function(){
        alert('mobileinit2');
        $.mobile.metaViewportContent = 'width=device-width, minimum-scale=1, maximum-scale=2, user-scalable=yes';

        $.extend($.mobile.zoom, {locked:false,enabled:true});
        alert('/mobileinit');
}); 
```

但这对我不起作用。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T12:59:56.097

你想缩放整个应用程序还是只是其中的一个 div？

如果是第二个，请尝试使用 iScroll

[滚动](http://cubiq.org/iscroll-4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T04:35:54.633

尝试这样的事情：

```
var con=document.getElementById('containerId');

con.addEventListener('gesturechange',function(e){
    if(e.scale>1)
    {
        //zoom in 
    }
    else if(e.scale<1)
    {
        //zoom out 
    }
}); 
```

# php - 制作智能通知列表

> ID：12074817
> 
> 赞同：2
> 
> 时间：2012-08-22T13:58:54.430
> 
> 标签：php, notifications

**设想**

具有上传、评​​论、点赞、关注用户等基本功能的图片网站。

现在我有一个基本的通知系统，我很快就建立了它，基本上当一个事件发生时，比如上传或喜欢它被插入到`notifications`表中，然后有一个`read`列来确定用户是否看到它，很简单。

当前的示例输出将是这样的，

```
John Doe liked Picture of my cat.
Sarah Doe liked Picture of my cat.
Adam Doe liked Picture of my cat.
Sarah Doe liked Picture of my cat.
Henry Doe is now following you. 
```

这基本上是按输入时间排序的。

现在我想要实现的是类似于以下内容，

```
4 users liked Picture of my cat.
Henry Doe is now following you. 
```

我正在努力将我的平均 PHP 知识包装起来，我能想到的最好的方法就是做这样的事情。

```
$query = mysql_query("SELECT * FROM `notifications` WHERE `read` = '0' LIMIT 20");
$likes = array();
$following = array();
while($row = mysql_fetch_array($query)){

    if($row['type'] == "like"){

        array_push($likes,$row['id']);

    }   elseif($row['type'] == "following"){

        array_push($following,$row['id']);

    }

} 
```

然后以某种方式对它们进行排序以正确显示。但这似乎仍然非常复杂。

如果有人提出建议，还需要考虑一件事，如果有一个算法可以将它们分组，即使它们不是直接在彼此之后，例如相隔 5 分钟但有不同的通知，这是否是一个好主意介于两者之间，例如

```
John Doe liked Picture of my cat.
John Doe is now following you.
Sarah Doe liked Picture of my cat.
Sarah is now following you. 
```

进入

```
2 People liked Picture of my cat.
2 New Users are now following you. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:03:07.157

我相信最好的解决方案是使用`GROUP BY`in `SQL`not at `PHP`side。您需要按事件类型对结果进行分组。如果只有一个结果，只需使用第二个查询显示单个结果。如果有多个结果，`COUNT(*)`请按照您的意图显示。

编辑：例子。

```
SELECT event_type, COUNT(*) AS count FROM `notifications` WHERE `read` = '0' GROUP BY event_type

result:
event_type  count
----------  -----
4           4
6           2
9           1
12          2 
```

然后，您可以对仅出现一次的事件运行第二次查询。

```
SELECT * FROM `notifications` WHERE `read` = '0' AND `event_type` = '9' 
```

当然你也应该在最后改变他们的阅读状态

```
UPDATE `notifications` SET `read` = '1' WHERE `read` = '0' 
```

这些只是快速准备的示例。您应该注意特殊情况，仅更新显示的条目等。

我用作`event_type`一个字段。我相信你有这样的领域。您应该根据您的数据库结构重命名该部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:11:48.713

以 FB 为例，无论计数如何，都会处理通知。如果我们点击 FB 上的点赞数，我们就会知道谁点赞了它，所以这个点数只是处理过的商品的占位符。

当您正在处理时，请保留通知计数

```
mysql_query("SELECT * FROM `notifications` WHERE `read` = '0' AND 'date_added' > {SOMETIMEEXPRESSION} GROUP BY type LIMIT 20");
while($row = mysql_fetch_array($query)) {
if ($curType != $row['type']) {
    $curType = $row['type'];
    $curCount = 0;
    //Other Type switch conditions
 }
//    do the magic that you wish to do for the type.
} 
```

# ajax - 强制首页语言

> ID：12074823
> 
> 赞同：1
> 
> 时间：2012-08-22T13:59:10.377
> 
> 标签：ajax, multilingual, joomla2.5

我有一个启用了 sef url 的多语言 joomla 2.5 网站。页面严重依赖ajax，所以各种内容都是从服务器拉出来的好旧的

```
window.onload 
```

事件。为了使一切正常并且 url 看起来不错，我想强制 Joomla 在页面加载和调用模板的 index.php 时始终以站点默认语言响应。

或者描述不同的问题：

如果 ajax 调用拉取与默认语言不同的项目并且随后进行页面刷新，joomla 将重定向到最后一个 ajax 调用语言的主页，这就是我想要阻止的。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:29:53.157

得到它的工作！问题本身是错误的！我应该一直在问：“如何以默认语言重定向到首页？”

回答：

```
$app = JFactory::getApplication();
$doc = JFactory::getDocument();
$languages = JLanguageHelper::getLanguages('lang_code');
$lang = JFactory::getLanguage();
$defaultLang = ( $lang->getTag() == $lang->getDefault() ) ? $lang : JLanguage::getInstance( $lang->getDefault() );

if( ! ( $lang->getTag() == $defaultLang->getTag() ) ){
    $app->redirect( JRoute::_( 'index.php?lang='.$languages[ $defaultLang->getTag() ]->sef ), 'hallo', true );
} 
```

完毕！

问候....

# asp.net - 管理业务层、数据层、数据上下文实例asp.net网站生命周期的最佳实践

> ID：12074830
> 
> 赞同：1
> 
> 时间：2012-08-22T13:59:16.317
> 
> 标签：asp.net, linq-to-sql, datacontext, lifecycle

我们的 Asp.net Web 应用程序使用 LINQ-to-SQL（Stored Procs 被拖放到 dbml 文件上以创建类），三层架构类似于下面的架构。我刚刚创建了粗略的方法来给读者正确的想法，以便他能够很好地回答。

```
namespace MyDataLayer
{
    public class MyDataAccess
    {
        // global instance of datacontext
        MyDataModelDataContext myDB = new MyDataModelDataContext();     (#1)

        public void GetUserIDByUsername(string sUserName, ref int iUserID)
        {
            int? iUserIDout = 0;
            // this will make call to SP in SQL DB
            myDB.USP_RP_GETUSERIDBYUSERNAME(sUserName, "", ref iUserIDout);
            iUserID = (int)iUserIDout;
        }

        public List<USP_APP_USERDETAILSResult> GetUserDetails(string sUserIDs)
        {
            // this will make call to SP in SQL DB
            return myDB.USP_APP_USERDETAILS(sUserIDs).ToList();
        }
        ...
        ... // several CRUD methods
    }
}

namespace MyBusinessLayer
{
    public class SiteUser
    {
        // global DataAccess instance
        MyDataLayer.MyDataAccess myDA = new MyDataAccess();             (#2)
        public void GetUserIDByUsername(string sUserName, ref int iUserID)
        {
            myDA.GetUserIDByUsername(sUserName, ref iUserID);
        }
        public List<USP_APP_USERDETAILSResult> GetUserDetails(string sUserIDs)
        {
            // this will make call to SP in SQL DB
            return myDA.GetUserDetails(sUserIDs);
        }
        ...
        ... // several CRUD methods
    }
}

namespace MyWebApplication
{
    public class BaseWebPage : System.Web.UI.Page
    {
        // static business layer instance
        public static MyBusinessLayer.SiteUser UserBLInstance = new SiteUser();         (#3)                    
        ...             
    }
}
// Index.aspx.cs code fragment
namespace MyWebApplication
{
    public class Index : BaseWebPage
    {       
        public void PopulateUserDropDown()
        {
            // using static business layer instance declared in BaseWebPage
            List<USP_APP_USERDETAILSResult> listUsers = UserBLInstance.GetUserDetails("1,2,3");

            // do databinding and so on ...
        }
        ...             
    }
} 
```

问题

*   （Ref.#1）在 DataAccess 中有全局数据上下文是好方法吗？是/否 为什么？
*   如果您的建议是每个请求都有数据上下文，那么最佳实践是什么
*   （Ref.#2）在 BusinessLayer 中拥有全局 DataAccess 实例是好方法吗？是/否 为什么？
*   如果您的建议是每个请求都有 DataAccess 实例，那么最佳做法是什么
*   （参考#3）在 BaseWebPage 中声明的静态业务层实例是好方法吗？是/否 为什么？
*   一般管理 BL 实例和 DL 实例的生命周期的最佳方法

我们在生产服务器上面临周期性的 InvalidCastException，这是一个非常简单的方法，如果我从 IIS 重新启动我的应用程序，它可以正常工作。当出现此问题时，我们可以从 SQL Management Studio 访问相同的数据库并执行相同的 SP

我们对这个问题的主要怀疑是 DataContext 管理不善，我在网上阅读了很多关于管理 DataContext 生命周期的文章，但我现在对各种方法感到困惑。这就是为什么我详细阐述了我的问题，以便许多处于相同情况的人可以清楚地了解问题/答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:37:42.350

> （Ref.#1）在 DataAccess 中有全局数据上下文是好方法吗？是/否 为什么？

是的。

但是，在数据访问类中手动创建它意味着您无法控制数据上下文的**生命周期**。相反，将其设置为**构造函数**参数，以便将其注入数据访问

> （Ref.#2）在 BusinessLayer 中拥有全局 DataAccess 实例是好方法吗？是/否 为什么？

是的。但请参阅 1\. -通过构造函数使其**可注入。**

> （参考#3）在 BaseWebPage 中声明的静态业务层实例是好方法吗？是/否 为什么？

不。避免复杂对象的*静态*，因为这些对象通常具有非平凡的*状态*。如果您在并发环境中共享此类对象，则会发生许多令人讨厌的问题。

总结一下。

```
public class DataAccess {
   public DataAccess( DataContext context ) { ... }    
}

public class BusinessLayer {
   public BusinessLayer( DataAccess access ) { ... }    
}

public class MyPage : Page {
 ...

 var ctx = TheDataContext.Current;
 var bl = new BusinessLayer( new DataAccess( ctx ) );  
} 
```

在请求范围内共享数据上下文：

```
public partial class TheDataContext {

  // Allow the datacontext to be shared in a request-scope
  public static TheDataContext Current {
     get {
         if ( HttpContext.Current.Items["context"] == null )
            HttpContext.Current.Items.Add( "context", new TheDataContext() );

         return (TheDataContext)HttpContext.Current.Items["context"];
     } 
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:26:28.540

在您的示例中 - 您的 MyDataLayer 通常具有名称存储库。在 Repositories 中拥有 DataContext 实例并且不要尝试在外部使用它们绝对是一件好事。因此，只有在存储库中，您才会依赖于 Linq-To-Sql，这意味着您可以为这些存储库创建 Stub 对象，并且非常容易测试应用程序的其他部分。

绝对应该 Dispose 你的 Data Context 实例，DataContext 包含太多的对象，无法让它们保持活动状态并让 GC 杀死它们。正如您所看到的，您在使用 DataContextes 时不会创建任何事务对象，所以我认为 LinqToSql 的理念是您应该拥有每个事务的所有内容（当然您也可以尝试手动处理事务，但您真的想这样做吗？）。在 Repository 的方法中处理数据上下文是一个好方法，因为这将不允许您使用所有 ORM 框架的酷特性：延迟加载。如果您尝试使用延迟加载 - 您会喜欢它，但通常它只是可能的性能下降原因之一。

绝对你应该使用 DataContextes 更短或相同的请求时间，不要尝试使用 LongSession （这是当你试图为多个 Http 请求保留 DataContext 时，如果你想要的话，这只是屁股的痛苦，仅此而已要了解这一点，只需尝试阅读有关 Hibernate 中的长时间运行会话的几篇文章，我尝试使用 nHibernate - 不要在家里这样做；））。

# python - 如何使用列表项来处理字典键并附加相应的值

> ID：12074833
> 
> 赞同：1
> 
> 时间：2012-08-22T13:59:20.920
> 
> 标签：python, dictionary, python-2.7

我有一个包含客户信息的列表，客户列表中的每个项目本身就是一组相应信息的列表。所以：

```
customers = [
  [customerID1, NameOfCustomer1, etc., 01 02 03] 
  [customerID2, NameOfCustomer2, etc., 02 05]
  .
  .
  .
  ] 
```

每个客户信息集中的数字是我需要将客户分配到的类别。也就是说，我有一个带有 n 个键的字典，每个类别一个：

```
dict = {
  01: [],
  02: [],
  03: [],
  04: [],
  05: []
  } 
```

现在我需要将客户分配到他们各自的类别，以便客户 1 最终进入类别 1、2 和 3 - 而客户 2 进入类别 2 和 5。当然，我可以运行 n 个 if 语句，每个现有类别一个，但随着类别数量的增加，我发现这相当令人不安。因此，我想做的是：从每个客户那里获取类别列表：

```
for customer in customers:
  categories = re.findall(r'[0-9]{2}', customer[3]) 
```

简单的部分就这么多。现在我正在寻找一种基本上遍历这个“类别”列表的方法：

```
for category in categories:
  dict[category].append(customer) 
```

但是，python 似乎不喜欢我使用变量来选择键。这可能有一个愚蠢的简单解决方案 - 我只是不知道。

非常感谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:12:52.160

第 1 步是将这些平面列表转换为字典，这对于访问属性更有用。我不得不想象你的数据实际上是什么样子，但你应该明白：

```
>>> customers = [
...     ['customerID1', 'NameOfCustomer1', 'e','t','c', '01 02 03'],
...     ['customerID2', 'NameOfCustomer2', 'e','t','c', '02 05']
...     ]
>>> 
>>> cust_keys = ('id', 'name', 'q1','q2','q3','categories')
>>> cdicts = [dict(zip(cust_keys, cust_vals)) for cust_vals in customers]
>>> cdicts
[{'q1': 'e', 'q3': 'c', 'q2': 't', 'name': 'NameOfCustomer1', 'id': 'customerID1', 'categories': '01 02 03'}, {'q1': 'e', 'q3': 'c', 'q2': 't', 'name': 'NameOfCustomer2', 'id': 'customerID2', 'categories': '02 05'}] 
```

最好将类别作为代码列表，我们不需要正则表达式：

```
>>> for cdict in cdicts:
...     cdict['categories'] = cdict['categories'].split()
... 
>>> cdicts
[{'q1': 'e', 'q3': 'c', 'q2': 't', 'name': 'NameOfCustomer1', 'id': 'customerID1', 'categories': ['01', '02', '03']}, {'q1': 'e', 'q3': 'c', 'q2': 't', 'name': 'NameOfCustomer2', 'id': 'customerID2', 'categories': ['02', '05']}] 
```

现在，为了附加到一堆类别列表中，我们可以每次检查键是否存在，如果不存在则创建一个空列表，或者我们可以使用`defaultdict`为我们处理的：

```
>>> from collections import defaultdict
>>> by_categories = defaultdict(list)
>>> for customer in cdicts:
...     for category in customer['categories']:
...         by_categories[category].append(customer)
... 
```

产生

```
>>> for k in sorted(by_categories):
...     print 'category', k, 'contains:'
...     for v in by_categories[k]:
...         print v
... 
category 01 contains:
{'q1': 'e', 'q3': 'c', 'q2': 't', 'name': 'NameOfCustomer1', 'id': 'customerID1', 'categories': ['01', '02', '03']}
category 02 contains:
{'q1': 'e', 'q3': 'c', 'q2': 't', 'name': 'NameOfCustomer1', 'id': 'customerID1', 'categories': ['01', '02', '03']}
{'q1': 'e', 'q3': 'c', 'q2': 't', 'name': 'NameOfCustomer2', 'id': 'customerID2', 'categories': ['02', '05']}
category 03 contains:
{'q1': 'e', 'q3': 'c', 'q2': 't', 'name': 'NameOfCustomer1', 'id': 'customerID1', 'categories': ['01', '02', '03']}
category 05 contains:
{'q1': 'e', 'q3': 'c', 'q2': 't', 'name': 'NameOfCustomer2', 'id': 'customerID2', 'categories': ['02', '05']} 
```

# r - 如何在 venn (R) 中更改“A”、“B”、“C”等标签

> ID：12074834
> 
> 赞同：-2
> 
> 时间：2012-08-22T13:59:24.293
> 
> 标签：r, diagram, venn-diagram

我尝试`venn()`在 R 中创建一个带有函数的维恩图。它可以工作，但我希望能够定义我自己的标签而不是`"A"`等`"B"`。我不明白如何做到这一点，因为没有可以传递的标签参数到功能。

**编辑**：忘了说我使用了一个包含字符串的向量列表......

*编辑2：

它是来自 gplots 的包“venn”：

```
library(gplots) 
```

示例代码：

变量 list_ 看起来像这样：

```
> list_
[[1]]
[1] "hejsan"   "pelle"    "svanslov"

[[2]]
[1] "kok"   "nalle" "pelle" 
```

然后我做：

```
venn(list_) 
```

看起来像这样：

[http://postimage.org/image/wpis8ny2b/deea76ff/](http://postimage.org/image/wpis8ny2b/deea76ff/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:58:53.137

该`venn`函数从列表元素的名称中获取图中的标签。

```
names(list_) <- c("First list", "Second list")
venn(list_) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:07:35.983

我找不到您正在使用的 venn() 函数。如果您愿意使用不同的软件包，这里有一个简短的教程-> [http://www.ats.ucla.edu/stat/r/faq/venn.htm](http://www.ats.ucla.edu/stat/r/faq/venn.htm)可以让您使用“名称”的论点。

# macos - 如何在mac上创建一个dylib

> ID：12074835
> 
> 赞同：1
> 
> 时间：2012-08-22T13:59:25.220
> 
> 标签：macos, dylib

我在 Windows 中创建了一个 dll。现在我想在 mac/iPhone 上创建类似的东西。我想，我们可以将 dylib 与应用程序捆绑在一起，这将是最好的方法。

首先，这是正确的方法吗？

其次，我试图弄清楚如何创建一个 dylib 并在我的 app/xproj 中使用它。有人可以指点我任何教程，或者如果这个查询已经回答，请指点我。

谢谢你，维努。

# asp.net - AjaxToolkit Asp.net 3.5 系统未定义

> ID：12074839
> 
> 赞同：0
> 
> 时间：2012-08-22T13:59:32.620
> 
> 标签：asp.net, ajax, iis, httphandler

我正在尝试将 AjaxToolkit 用于 Asp.net 3.5 项目。我有一个现有项目，我使用此链接[http://www.asp.net/ajax/documentation/live/ConfiguringASPNETAJAX.aspx](http://www.asp.net/ajax/documentation/live/ConfiguringASPNETAJAX.aspx)添加了 ajax 配置，但我收到了`Sys not defined`. 我想知道它是否与设置的处理程序有关。我在使用 .net 3.5 项目的 Windows 2003 服务器上使用 IIS 6 有人有什么想法吗？

HTTP 处理程序：

```
 <remove verb="*" path="*.asmx" />
  <add verb="*" path="*.asmx" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
  <add verb="*" path="*_AppService.axd" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
  <add verb="GET,HEAD" path="ScriptResource.axd" validate="false" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" /> 
```

我的完整 web.config

[http://pastebin.com/8AFLA3KA](http://pastebin.com/8AFLA3KA)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T08:40:50.730

您缺少 system.webserver 中的 web.config 条目。如果没有 system.webserver 条目，它将在开发服务器和 iis 6- 上工作，但不能在集成模式下的 IIS 7+ 上工作。另一种选择是将 IIS7 应用程序池切换到经典模式。

Visual Studio Web 应用程序模板使用服务包进行了更新，但您的项目是在该更新之前创建的 :)

只要确保您安装了所有更新，创建一个新的 ajax 项目，并比较 web.config 文件。

# file - 在 unix 中重命名文件以包含 $ 符号（即 java 类文件）

> ID：12074842
> 
> 赞同：4
> 
> 时间：2012-08-22T14:00:02.510
> 
> 标签：file, unix, creation

我有一个 java 类文件，由于名称的长度而导致问题：

GroundTransportationProductType$GroundTransportationOptions$GroundTransportationProductOption$GroundTransportationOptionProviderLinks$ProviderLinks.class

我已经设法通过缩短的文件名在 unix box (Solaris) 上获取文件。我的课

如何将 my.class 重命名为上述正确的类名？

正常使用 mv 和 cp （即不为美元符号做某事）不起作用。我已经用谷歌搜索并进行了广泛的搜索，但找不到任何关于如何在 unix 上创建一个带有美元名称的文件的信息。

谢谢，

肯尼

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T14:01:48.267

`$`在 shell 中具有特殊含义，因此您需要以某种方式对其进行转义。最好的选择是在文件名周围使用单引号。'$' 符号前面的 \ 也可以。

```
mv my.class 'Long$File$Name.class' 
```

或者

```
mv my.class Long\$File\$Name.class 
```

# jquery - 基于json数据构建jstree

> ID：12074843
> 
> 赞同：0
> 
> 时间：2012-08-22T14:00:03.057
> 
> 标签：jquery, jstree

我正在尝试使用 json 数据来构建一个 jstree，如下所示：

```
$(document).ready(function () {

$(function () {  

   $("#left").jstree({   

         "json_data" : {  

             "ajax" : {

                 "url": "http://192.168.101.2/img/jstree.json",  

                 "data" : function (n) {   

                     return { id : n.attr ? n.attr("id") : 0 };   
                     }  
                 }  
            },  
            "plugins" : [ "themes", "json_data" ]  
        });  
     });
}); 
```

我的树没有建造，任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:08:23.667

这是解决方案

您必须使用其中之一`$().ready(function() {})`或`$(function() {})`. 这两者具有相同的含义。

```
$(function () {  

     $("#left").jstree({   

         "json_data" : {  

             "ajax" : {

                 "url": "http://192.168.101.2/img/jstree.json",  

                 "data" : function (n) {   

                     return { id : n.attr ? n.attr("id") : 0 };   
                 }  
             }  
        },  
        "plugins" : [ "themes", "json_data" ]  
   });  
}); 
```

# php - php取模返回错误结果

> ID：12074845
> 
> 赞同：3
> 
> 时间：2012-08-22T14:00:23.557
> 
> 标签：php

我遇到了这段代码的问题：

```
if (!empty($_GET[ "lic" ])) $lic = $_GET[ "lic" ]; else $e = true;
echo ($lic % 11); 
```

当我发布`8911076856`它回声`1`，但它应该是`0`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-22T14:05:20.500

值“8911076856”可能高于系统的最大整数值。

```
echo ((int)8911076856); 
```

我的 32 位系统上的结果是 321142264。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-22T14:06:35.367

使用[fmod](http://php.net/manual/en/function.fmod.php)：

```
echo fmod(8911076856, 11); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T14:06:15.593

这很可能是因为您发布的数字高于`PHP_INT_MAX`，在大多数 64 位系统 AFAIK 上为 9223372036854775807。如果您使用的是 32 位系统（我希望您是），它可能是 2147483647。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-22T14:12:50.473

你试过这个：

if (!empty($_GET[ "lic" ])) $lic = **intval** ($_GET[ "lic" ]); 否则 $e = true;

回声（$lic % 11）；

# gwt - 股票图表上 GWT Highcharts 中的第二个 Y 轴？

> ID：12074849
> 
> 赞同：0
> 
> 时间：2012-08-22T14:00:32.530
> 
> 标签：gwt, highcharts, highstock

我正在尝试使用 Moxieapps Highcharts 包装器向 StockChart 添加第二个 Y 轴，但没有成功。我需要在图表的右侧添加一个新轴，并希望以下代码能够正常工作：

```
StockChart chart = new StockChart();

YAxis firstYAxis = chart.getYAxis(0);
firstYAxis.setAxisTitleText("First Y axis");

Series firstSeries = chart.createSeries();
firstSeries.setPoints(/* Imagine lots of points. */);
firstSeries.setYAxis(0); // Not required since 0 is the default Y axis.

chart.addSeries(firstSeries);

YAxis secondYAxis = chart.getYAxis(1);
secondAxis.setOpposite(true); // *Should* put the axis on the right side.
secondYAxis.setAxisTitleText("Second Y axis");

Series secondSeries = chart.createSeries();
secondSeries.setPoints(/* Imagine lots of points. */);
secondSeries.setYAxis(1); // *Should* add the series to the second Y axis.

chart.addSeries(secondSeries);

// Somehow the second series ends up being in the navigator... 
chart.setOption("navigator/enabled", true);
chart.setOption("scrollbar/enabled", true);

add(chart); 
```

第二个 Y 轴甚至不渲染。如果我不将第二个系列添加到第二个 Y 轴，它会（*如预期*）显示为第一个 Y 轴上的值。

有没有人在 StockChart 上成功添加了**多个 Y 轴**，这可以告诉我我在这里做错了什么？提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-17T12:09:46.283

我遇到了同样的问题，似乎 GWT-HighCharts 是问题所在。您必须通过本机调用手动创建 YAxis。这是解决方案；

[HighCharts 股票图表错误代码 18](https://stackoverflow.com/questions/20618155/highcharts-stock-chart-error-code-18/20633673#20633673)

# php - 是否可以从本地主机到外部地址

> ID：12074853
> 
> 赞同：0
> 
> 时间：2012-08-22T14:00:55.050
> 
> 标签：php, mysql, phpmyadmin

我可以连接到我的本地主机并从本地 phpMyAdmin 数据库获取信息。

现在我想要一个 php 文件，它存储在我的本地计算机上，但现在 php 文件让我转到一个外部网站：

```
<?php

//mysql_connect('localhost','root','root');
mysql_connect("http://eternal website","username","password");

mysql_select_db("dlvplant_portret_v1");

$q=mysql_query("SELECT * FROM people WHERE voornaam LIKE '%%'");
//$q=mysql_query("SELECT * FROM people WHERE voornaam ='""'");

while($e=mysql_fetch_assoc($q))

    $output[]=$e;

print(json_encode($output));

mysql_close();

?> 
```

我尝试了链接并复制/粘贴用户名并通过，我使用了良好的网站链接。（该链接将我带到服务器的 myPhpAdmin 登录）。因此，一切正常，并且充满了良好的状态。但是当我尝试连接我的 android 手机（从手机到本地 comp 的 php 文件）时，php 文件让我转到外部网页，但它说：`Host is unknown`

甚至可以从本地到外部再返回吗？

![在此处输入图像描述](../Images/504d0d84c1498a21132d4e023d8a083c.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T14:03:22.543

您*可以*连接到外部 MySQL 主机 - 但您不使用**HTTP**协议。并且需要在 MySQL 服务器上启用外部访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T14:27:05.700

您应该使用纯 IP 地址（xxx.xxx.xxx.xxx）或单个“DOMAIN.SOMETHING”而不是“http://DOMAIN.SOMETHING”

```
mysql_connect("IPADDRESS","username","password"); 
```

# delphi-xe2 - FinalBuilder 内置应用程序的 GUI（使用 dcc32.exe）与 Embarcadero IDE 内置的应用程序不同

> ID：12074855
> 
> 赞同：3
> 
> 时间：2012-08-22T14:00:58.100
> 
> 标签：delphi-xe2, finalbuilder

当我在 FinalBuilder 中构建应用程序时，显然是使用 dcc32.exe，GUI 看起来像 windows xp 应用程序，但如果我在 IDE 中编译它，它看起来就像 Windows 7 程序一样正常。TLinkLabel 也被认为是一个简单的 TLabel。任何想法可能是什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T09:44:52.183

为了在 FinalBuilder 中编译 XE2 项目期间启用运行时主题，您必须在资源中包含清单文件：

> default_app.manifest

![在此处输入图像描述](../Images/6f6aebd5b73036079521a1ad822a4e82.png)

# java - Java ImageIO：异常怪异

> ID：12074858
> 
> 赞同：5
> 
> 时间：2012-08-22T14:01:09.253
> 
> 标签：java, exception, io, ioexception, filenotfoundexception

在我的应用程序中，我试图`BufferedImage`使用`ImageIO`. 该文件是由用户选择的，所以我需要对可能发生的错误做出反应（例如，用户试图保存在他没有写权限的位置）。但是我无法捕捉到`IOException`发生的情况。

以下代码显示了该问题。对于 *nix 系统上的大多数用户，尝试保存到“/foo”应该会引发异常，因为他们在根目录中没有写权限。

```
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;

public class IOTest {

    public static void main(String[] args) {
        BufferedImage img = new BufferedImage(640, 480,
                BufferedImage.TYPE_INT_RGB);
        try {
            File f = new File("/foo");
            ImageIO.write(img, "png", f);
        } catch (IOException e) {
            System.out.println("Caught IOException!");
        }
    }
} 
```

但是，没有捕获到异常。输出：

```
 java.io.FileNotFoundException: /foo (Permission denied)
    at java.io.RandomAccessFile.open(Native Method)
    at java.io.RandomAccessFile.<init>(RandomAccessFile.java:233)
    at javax.imageio.stream.FileImageOutputStream.<init>(FileImageOutputStream.java:69)
    at com.sun.imageio.spi.FileImageOutputStreamSpi.createOutputStreamInstance(FileImageOutputStreamSpi.java:55)
    at javax.imageio.ImageIO.createImageOutputStream(ImageIO.java:419)
    at javax.imageio.ImageIO.write(ImageIO.java:1530)
    at IOTest.main(IOTest.java:16)
Exception in thread "main" java.lang.NullPointerException
    at javax.imageio.ImageIO.write(ImageIO.java:1538)
    at IOTest.main(IOTest.java:16) 
```

请注意，这`FileNotFoundException`是一个子类，`IOException`所以它应该被抓住。第二个 catch 块也没有帮助：

```
catch (FileNotFoundException e) {
    System.out.println("Caught FileNotFoundException!");
} catch (IOException e) {
    System.out.println("Caught IOException!");
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T14:06:12.613

它源于`ImageIO`实施的细节。如果您不将`File`实例传递给，您将绕过该问题`ImageIO.write`，但首先尝试`FileOutputStream`自己打开一个并将其传递给`write`.

这是对`ImageIO.write`. [第 1530 行](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/javax/imageio/ImageIO.java#1530)：

```
stream = createImageOutputStream(output); 
```

[第 1538 行](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/javax/imageio/ImageIO.java#1538)：

```
stream.close(); 
```

如果你看一下 的实现`createImageOutputStream`，你会看到几个返回的代码路径`null`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T14:07:04.667

看起来该`ImageIO.write`方法打印了，`IOException`但实际上并没有处理它并以`NullPointerException`. 在这种有问题的库的特定情况下，也许您*应该*抓住任何`RuntimeException`...

当然，如果目录存在并且[可写](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#isWritable%28java.nio.file.Path%29)，最好先测试一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T14:09:42.557

似乎将`ImageIO.write()`包装`FileNotFoundException`成`NullPointerException`.

您应该在调用之前捕获`NullPointerException`或更好地检查文件是否存在`ImageIO.write()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T14:10:24.577

从外观上看，FileNotFoundException 正在 javax.imageio.ImageIO.write 中处理，并且该故障导致空指针异常。在尝试保存之前尝试检查文件权限！

# android - 从命令行链接 Android 库项目，错误：...taskdef class com.android.ant.SetupTask 找不到

> ID：12074859
> 
> 赞同：2
> 
> 时间：2012-08-22T14:01:13.480
> 
> 标签：android, ant

我在使用库项目的 project.properties 文件中链接了一个库项目

```
android.library.reference.1=~/Documents/Workspace/LibraryProject/ 
```

图书馆项目的 project.properties 说：

```
android.library=true 
```

[我在这里](https://stackoverflow.com/questions/7925747/how-do-you-set-the-android-library-absolute-path-in-ant-properties)读到我必须使用相对路径。所以我使用前面带有波浪号的路径，因为我读到这被认为是我使用的基于 Unix 的操作系统（Mac OS）上的相对路径。

但是，当我使用 Ant 脚本构建我的项目时（我没有在此处发布它，因为它可以在没有上面那一行的情况下工作，所以我认为这不是问题），我收到以下错误：

```
/Users/home/Documents/android-sdk-macosx/tools/ant/build.xml:545: ~/Documents/Workspace/LibraryProject/ resolve to a path with no project.properties file for project /Users/home/ApplicationAndroidBuilt 
```

**编辑**

在我将代码更新为 Boris Answer 后，我得到另一个错误，但我认为我走对了

这是我现在在 ant 脚本中所做的

```
<target name="updateProject">

    <echo>updating Project...</echo>
    <!-- The Library -->
    <exec dir="${android_home}/tools" executable="./android">
        <arg line="update"/>
        <arg line="project"/>
        <arg line="--target"/>
        <arg line="4"/>
        <arg line="-p"/>
        <arg line="${scannerLibrary_home}"/>
    </exec>
   <!-- The consuming Project -->
    <exec dir="${android_home}/tools"  executable="./android"> 
        <arg line="update"/>
        <arg line="project"/>
        <arg line="--target"/>
        <arg line="4"/>
        <arg line="-p"/>
        <arg line="${targetdir}"/>
    </exec>

    <antcall target="buildScanner"/>
</target>

<target name="buildScanner">
    <exec dir="${scannerLibrary_home}"  executable="ant"> 
        <arg line="clean"/>
        <arg line="release"/>
    </exec>
    <antcall target="buildProject"/>
</target>

<target name="buildProject">
    <exec dir="${targetdir}"  executable="ant"> 
        <arg line="debug"/>
    </exec>
    <antcall target="install"/>
</target> 
```

我现在收到此错误：

```
taskdef class com.android.ant.SetupTask cannot be found 
```

谷歌搜索了一下，它说我必须在库项目的 local.properties 文件中提供我的 android_home 的路径，我这样做：

```
sdk.dir=/Users/home/Documents/android-sdk-macosx 
```

遗憾的是还没有运气，有人知道这里有什么问题吗？

**编辑2：**

删除使用库项目的 build.xml 文件后，找不到 SetupTask 的错误消失了，但我原来的帖子中的“解析到没有 project.properties 的路径”再次出现。即使路径是正确的，并且指向带有 project.property 文件的目录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-07T13:36:13.683

关于“解析到没有 project.properties 的路径”——以防万一其他人点击它：我的“android.library.reference.1=abc”行末尾有一个额外的空间，这导致了我的头痛。一旦我删除了额外的空间，一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:28:05.970

您需要`ant project update --path .`先在库的文件夹中运行，然后在项目的文件夹中运行。

就在那时，您已准备好进行编译。您需要首先使用该库单独构建该库，`ant clean release`然后`ant clean release`在使用该库的项目中进行构建。

# android - ListView 复选框无法正常工作

> ID：12074861
> 
> 赞同：0
> 
> 时间：2012-08-22T14:01:18.747
> 
> 标签：android, listview

在我的 ListItems 中选择 CheckBoxes 时遇到问题。每个 ListItem 在其布局中都有一个 CheckBox，当单击 ListItem 时，应激活 CheckBox。问题是复选框是随机激活的。例如：当我有 2 个 ListItems 并单击 ListItem1 时，它的 CheckBox 被激活。当我再次单击时，ListItem2 的 CheckBox 也被激活。当我再次单击时， ListItem1 的 CheckBox 被停用。当我再次单击时， ListItem2 的 CheckBox 被停用。当我再次单击时，一切都从头开始。我了解 ListView 重用了 Items 并且我必须使用 getView() 方法，但我无法让它工作。我不得不提一下，我是一个血腥的初学者，所以如果某些代码根本没有意义，请原谅我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:25:47.257

您需要创建一个自定义阵列适配器和所有设置。

这是我为 ChekBoxList 的 ListView 创建的 Activity 类

**ActivityGamesList.java**

```
package com.rdc.gameListApp;

import java.util.List;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.CheckBox;
import android.widget.ListView;
import android.widget.Toast;

public class ActivityGamesList extends Activity {

     private ListView listGames = null; 
     private DBAdapter database = null;
     private Context context = null;    

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.list_of_games);

        final CheckBox favBox = (CheckBox) findViewById(R.id.favbuttonInList);
        listGames = (ListView) findViewById(R.id.listViewGame); 

        context = getApplicationContext();
        database = new DBAdapter(context);

        //here I am getting the data from database and  putting in to List
        List<String> gamelistArrayR = database.selectAllName();     

        // custom adapter for adding fav box
        //make sure here "gamelistArrayR" is List and type is String
        listGames.setAdapter(new CustomAdapter(this, gamelistArrayR));

        //listener for list view
        listGames.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {

                Toast.makeText(getApplicationContext(), "You have selected:  " +
                          position+" no row", Toast.LENGTH_SHORT).show();

            }
        });
    }

} 
```

下面是自定义阵列适配器

**CustomAdapter.java**

* * *

```
package com.rdc.gameListApp;

import java.util.List;

import android.content.Context;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.TextView;
import android.widget.Toast;

public class CustomAdapter extends ArrayAdapter<String> {
    private final Context context;
    private final List<String> values;

    public CustomAdapter(Context context, List<String> gamelistArrayR) {
        super(context, R.layout.list_row_custom, gamelistArrayR);
        this.context = context;
        this.values = gamelistArrayR;
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        View rowView = inflater.inflate(R.layout.list_row_custom, parent, false);

        //Game Name Text in list
        TextView textView = (TextView) rowView.findViewById(R.id.txtGameNameInList);
        // Check Box in list
        CheckBox favBox = (CheckBox) rowView.findViewById(R.id.favbuttonInList);

        textView.setText(values.get(position));         

        //listener for check box
        favBox
        .setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton buttonView,boolean isChecked) {
                Boolean flag = isChecked;               
                if(flag){                   

                        Log.v("Debug", "step no 1");
                        Toast.makeText(context, "Marked as Favorite Game!", 1).show();                  
                }
            }
        }); 
        return rowView;
    }
} 
```

我得到了这样的输出..

![在此处输入图像描述](../Images/66e91586ebc678e938e61ad3ea3f4a20.png)

**编辑：**

当您滚动列表时，检查框会因为或重新创建视图而取消检查。

所以你需要存储复选框的状态，你应该检查下面的链接

[**这个**](https://stackoverflow.com/questions/9309250/checkbox-gets-unchecked-on-scroll-in-a-custom-listview)所以线程或 [**本**](http://www.lalit3686.blogspot.in/2012/06/today-i-am-going-to-show-how-to-deal.html)教程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:25:17.637

您需要将项目状态存储在您的适配器中，*而不是*视图本身中，因为它可能是重用的，就像您说的那样。您的调用`super.getView()`将为您填写正确的文本，但不会更改复选框状态。保留一个反映每个复选框状态的布尔数组，并在 getView() 中应用状态，然后再返回您的视图：

```
CheckBox cb = (CheckBox) view.findViewById(R.id.cb);
cb.setChecked(cbStates[position]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T14:06:46.123

尝试使用**setOnItemSelectedListener**而不是**setOnItemClickListener**。我相信 click 事件会更频繁地被调用，这是您需要的。

# image - 未找到图像，但仅在某些情况下

> ID：12074875
> 
> 赞同：0
> 
> 时间：2012-08-22T14:02:10.197
> 
> 标签：image, internet-explorer, internet-explorer-8, cross-browser

我有一个网站区域有一些损坏的图像；然而，它只是在几种不同的情况下。

**它在哪里工作**

*   Windows 7（全部 64 位）- Chrome、Firefox、IE7、IE8、IE9
*   Windows XP - 火狐、Chrome

**哪里不行**

*   Windows XP - IE8、IE7

如果我查看 Windows XP/IE 组合的源代码，生成的源代码看起来不错。但是，如果我将图像的 URL 粘贴到地址栏中，尽管它在那里，但确实找不到它。如果我将相同的 URL 复制并粘贴到其他浏览器之一中，它会发现它很好。跨浏览器的怪癖是我们都熟悉的东西，但是没有找到但仅在某些硬件/软件组合中找到的图像对我来说肯定是新的。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-10-29T11:47:03.603

我知道这个问题已经存在 3 年了，并且图像不再存在，但是任何调查这个问题的人都可能对这个答案有一些运气：
[Some images won't display in IE7 or IE8](https://stackoverflow.com/questions/7313466/some-images-wont-display-in-ie7-or-ie8?rq=1)

短版：图像是 CMYK 压缩而不是 RGB；显然它可以通过在 irfanview 中打开并重新保存它来修复，或者在 Photoshop 中使用类似的东西。

# ios - 从终端构建 iOS 工作区时出错

> ID：12074876
> 
> 赞同：4
> 
> 时间：2012-08-22T14:02:11.137
> 
> 标签：ios, xcode, xcodebuild

我在从终端构建 iOS 应用程序时遇到问题。我正在关注 xcodebuild -h 帮助，但我无法让它工作......我一直在谷歌搜索我遇到的很多错误，但找不到答案......

这就是我正在做的事情：

xcodebuild -workspace AppName.xcworkspace -scheme '集成测试' -configuration 调试

我得到的错误是：

```
The following build commands failed:
ProcessPCH /Users/UserName/Library/Developer/Xcode/DerivedData/AppName/Build/PrecompiledHeaders/AppName-Prefix/AppName-Prefix.pch.pth AppName/AppName-Prefix.pch normal armv6 objective-c com.apple.compilers.llvm.clang.1_0.compiler
ProcessPCH /Users/UserName/Library/Developer/Xcode/DerivedData/AppName/Build/PrecompiledHeaders/AppName-Prefix/AppName-Prefix.pch.pth AppName/AppName-Prefix.pch normal armv6 objective-c com.apple.compilers.llvm.clang.1_0.compiler
(2 failures) 
```

我找不到失败的地方，使用 xCode 我可以毫无问题地编译和运行这个应用程序......知道发生了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:05:51.617

您是否尝试过使用 xcode-select 选择您的 xcode？

```
xcode-select -switch /Applications/Xcode.app/Contents/Developer 
```

大多数情况下……</p>

您也可以尝试通过以下方式更新 xcodebuild

```
$sudo /usr/bin/xcode-select -switch /Applications/Xcode.app/Contents/Developer
$cd /usr/bin
$sudo rm xcodebuild
$ln -s /Applications/Xcode.app/Contents/Developer/usr/bin/xcodebuild xcodebuild 
```

# iphone - GTM OAuth2通过钥匙串检索access_token不成功

> ID：12074884
> 
> 赞同：1
> 
> 时间：2012-08-22T14:02:37.970
> 
> 标签：iphone, cocoa-touch, oauth-2.0

我正在关注 Google 关于如何授权应用访问一个或多个 API 的示例。问题是，当我成功授权时，我得到了 access_token，但在此之后我无法从它存储到的钥匙串中获取它。我在某处读到 iPhone Simulator 不能与 Keychain 一起使用，是不是因为这个，如果是这样，你能告诉我一些其他方法来存储我的访问令牌吗？

这是我的代码：

```
 static NSString *const kKeychainItemName = @"OAuthGoogleReader";

    GTMOAuth2Authentication *auth;
    auth = [GTMOAuth2ViewControllerTouch authForGoogleFromKeychainForName:kKeychainItemName
                                                                 clientID:kClientID
                                                             clientSecret:kClientSecret];

BOOL isSignedIn = [auth canAuthorize];
    if (isSignedIn) {
        NSLog(@"Signed");
        self.window.rootViewController = self.viewController;
        auth.accessToken = [[NSUserDefaults standardUserDefaults] objectForKey:@"accessToken"];
          NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://www.google.com/reader/api/0/subscription/list?access_token=%@", [auth accessToken]]]];
          GTMHTTPFetcher* myFetcher = [GTMHTTPFetcher fetcherWithRequest:request];

          // optional upload body data

          //[myFetcher setPostData:[postString dataUsingEncoding:NSUTF8StringEncoding]];
        [myFetcher setAuthorizer:auth];
          [myFetcher beginFetchWithDelegate:self
                          didFinishSelector:@selector(myFetcher:finishedWithData:error:)];
         // - (void)myFetcher:(GTMHTTPFetcher *)fetcher finishedWithData:(NSData *)retrievedData error:(NSError *)error;
    }else{
    NSString *scope = @"https://www.google.com/reader/api/";

    GTMOAuth2ViewControllerTouch *viewController;
    viewController = [[GTMOAuth2ViewControllerTouch alloc] initWithScope:scope
                                                                clientID:kClientID
                                                            clientSecret:kClientSecret
                                                        keychainItemName:kKeychainItemName
                                                                delegate:self
                                                        finishedSelector:@selector(viewController:finishedWithAuth:error:)];

        self.window.rootViewController = viewController;
    } 
```

我得到错误：

```
2012-08-22 16:54:47.253 greader[20833:c07] Signed
2012-08-22 16:54:47.705 greader[20833:c07] Cannot authorize request with scheme http (<NSMutableURLRequest http://www.google.com/reader/api/0/subscription/list?access_token=(null)>) 
```

如您所见， access_token 只是零。

还有一些关于如何使用这个库的简单例子也会很棒。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T07:35:36.350

The gtm-oauth2 library handles storing and retrieving the access token and other auth values on the keychain. The app should not need to use the access token string directly, nor should the app put the authorization tokens into NSUserDefaults, as that is insufficiently secure.

gtm-auth2 also by default will refuse to attach an access token to a URL with an http: scheme. OAuth 2 is secure only when used with https: scheme URLs.

# java - DuplicateKeyException 即使在删除唯一约束之后

> ID：12074885
> 
> 赞同：1
> 
> 时间：2012-08-22T14:02:39.860
> 
> 标签：java, db2, constraints, unique

我正在研究 db2。我有一张表，其中包含一些数据：

```
Data | Value | Lang 
```

对该表的数据列，添加了唯一约束。但是，现在应用程序可以包含同一日期的许多行。所以，我删除了约束，但是，在重组表之后，重新启动服务器时，当我想添加多个具有相同数据的行时，它仍然会引发异常。

不幸的是我一开始没有创建这个表，我不能从中删除数据：/

有人知道发生了什么吗？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:00:51.093

好的，看来此列上也有索引。

检查索引：

```
select * from SYSIBM.SYSINDEXES where TBNAME= 'TABLE_NAME'; 
```

删除索引：

```
drop index INDEX_NAME; 
```

现在它起作用了！：） 很容易。

# .net - iTextSharp第一次长时间加载

> ID：12074887
> 
> 赞同：0
> 
> 时间：2012-08-22T14:03:02.943
> 
> 标签：.net, itextsharp

我正在使用 iTextSharp 即时创建 pdf 文档，但我的问题是因为第一次完成 pdf 生成需要太多时间。下一次它走得更快。有人知道是否有办法解决这种情况。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T19:44:29.793

您可以使用[ngen.exe](http://msdn.microsoft.com/en-us/library/6t9t5wcf%28v=vs.80%29.aspx)来消除 JIT 编译和类型安全验证（通常的启动活动）。

# emacs - 在 Emacs 中自动跳转到标签

> ID：12074897
> 
> 赞同：4
> 
> 时间：2012-08-22T14:03:31.873
> 
> 标签：emacs, ctags, etag

我想`find-tag`自动接受默认选项（即点的单词）并在没有提示的情况下跳转到标签位置。

这可能吗？

我也在使用 Emacswiki 的 find-tag 的建议版本，在匹配的情况下重新运行 ctags。所以我想要这样的东西：

```
is current word a known tag?
-> yes: jump to it without further confirmation
-> no: rerun ctags
is it known now?
-> yes: jump to it without further confirmation
-> no: prompt user for input 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-07-22T22:49:21.810

这是 Google 上“查找标签 emacs 无提示”的热门歌曲之一。对于那个简单的版本 - 没有海报提到的 ctag-regeneration 逻辑 - 似乎关键是：

```
(find-tag (find-tag-default)) 
```

所以，对我来说，这有效：

```
(defun find-tag-no-prompt ()
  "Jump to the tag at point without prompting"
  (interactive)
  (find-tag (find-tag-default)))
;; don't prompt when finding a tag
(global-set-key (kbd "M-.") 'find-tag-no-prompt) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T14:26:37.440

这是我的 ctags 设置，对我来说很棒。我从[这里](http://mattbriggs.net/blog/2012/03/18/awesome-emacs-plugins-ctags/)借来的。

```
(require 'eproject)
(require 'etags-select)

(defun build-ctags ()
  (interactive)
  (message "building project tags")
  (let ((root (eproject-root)))
    (shell-command
     (concat "ctags-exuberant -e -R --extra=+fq --exclude=db --exclude=test --exclude=.git --exclude=public -f " root "TAGS " root)))
  (visit-project-tags)
  (message "tags built successfully"))

(defun visit-project-tags ()
  (interactive)
  (let ((tags-file (concat (eproject-root) "TAGS")))
    (visit-tags-table tags-file)
    (message (concat "Loaded " tags-file))))

(defun hbin-find-tag ()
  "Borrow from http://mattbriggs.net/blog/2012/03/18/awesome-emacs-plugins-ctags/"
  (interactive)
  (if (file-exists-p (concat (eproject-root) "TAGS"))
      (visit-project-tags)
    (build-ctags))
  (etags-select-find-tag-at-point))

(global-set-key (kbd "M-.") 'hbin-find-tag) 
```

PS：你可能需要这些：

```
git://github.com/jrockway/eproject.git
git://github.com/emacsmirror/etags-select.git 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-23T07:50:11.703

好吧，我找到了一个 hack-y 解决方案：

```
;; auto jump
(global-set-key (kbd "C-x C-M->") 'find-tag) ; bind to some unused placeholder
(global-set-key (kbd "M-.") (kbd "C-x C-M-> <return>")) 
```

首先将 find-tag 绑定到一些您永远不会使用的虚拟绑定（此步骤是避免无限循环所必需的）。然后绑定`M-.`到这个新的绑定 + `<return>`。

丑陋，但有效......如果有人有更好的答案（包括原始问题中描述的失败搜索的处理），我会留下这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T17:47:55.410

这是一个稍微修改过的版本，可以加载依赖的 gem（在 ruby​​ on rails 中很有用）

```
 (defun build-ctags ()
      (interactive)
      (message "building project tags")
      (let ((default-directory (eproject-root)))
        (shell-command (concat "exctags -e -R --extra=+fq --exclude=db --exclude=test --exclude=.git --exclude=public -f TAGS * " (trim-string (shell-command-to-string "rvm gemdir")) "/gems/*"))
        (visit-project-tags)
        (message "tags built successfully"))) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-21T04:46:56.370

Emacs 25 默认执行此操作。`M-.`( `xref-find-definitions`) 跳转到定义并且`M-,`( `xref-pop-marker-stack`) 弹回。

# windows-xp - Windows XP 上的 Meteor 0.3.9 退出代码：-1073741819

> ID：12074899
> 
> 赞同：0
> 
> 时间：2012-08-22T14:03:36.097
> 
> 标签：windows-xp, meteor

我最近在 Windows XP 上安装了 Meteor 0.3.9（msi 安装程序来自：[http](http://win.meteor.com/) ://win.meteor.com/ ），当我尝试运行时（在 CMD 下）：

```
meteor create --example leaderboard
cd leaderboard
meteor 
```

我得到：

```
[[[[[ C:\temp\leaderboard ]]]]]

Running on: http://localhost:3000/
Exited with code: -1073741819
Exited with code: -1073741819
Exited with code: -1073741819
Your application is crashing. Waiting for file change. 
```

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T02:10:55.177

起初，我尝试在安装了流星的目录 C:\Program Files\meteor 上运行以下命令。没运气。然后我尝试在目录上运行相同的命令

C:\ 我的 Windows Vista Ultimate 上的主根目录。我键入**流星创建 myapp**

然后创建*myapp*目录。

要运行您的新应用程序，请将目录更改为 myapp，（**CD myapp**）然后键入**流星**，然后输入`Enter`.

转到您的浏览器并输入**localhost:3000** ，瞧！您将能够看到“Hello World！”

尝试不在目录*temp*上运行它。

# html - 如何在 MVC 视图中设置表格列宽？

> ID：12074901
> 
> 赞同：3
> 
> 时间：2012-08-22T14:03:44.173
> 
> 标签：html, css, asp.net-mvc, asp.net-mvc-4

我在 MVC4 Razor 应用程序中使用列表的默认设计时脚手架视图。每列如下：

```
<td class="col-code">
    @Html.DisplayFor(modelItem => item.Code)
</td> 
```

我曾尝试向`width`TD 添加一个属性，但似乎没有效果。唯一可行的方法是对由 呈现的 INPUT 进行样式设置`DisplayFor`，但我不能在这里这样做，因为我无处设置 html 属性。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T14:19:11.317

如果您使用的是简单的 HTML 表格，您应该使用`th`标签将标题添加到列中，然后可以将其样式设置为所需的宽度。

例如：

```
<table>
  <tr>
    <th class="col1">First col</th>
    <th class="col2">Second col</th>
  </tr>
  <tr>
    <td>First cell</td>
    <td>Second cell</td>
  </tr>
  <tr>
    <td>Third cell</td>
    <td>Fourth cell</td>
  </tr>
</table> 
```

可以与此 CSS 代码一起使用：

```
.col1 {
    width: 75%;
}

.col2 {
    width: 25%; /* not very useful in this case as 'col2' will take the remaining */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-16T20:08:12.567

您也可以在视图中使用它：

```
**@model List<Student>
@{
    ViewData["Title"] = "Index"; }
<h2>NEW VIEW Index</h2>
<table class="table">
    <tr>
        <th scope="col">
         ID          </th>
        <th scope="col">
            FirstName
        </th>
        <th scope="col">
            LastName
        </th>
     </tr>
     @foreach (var element in Model) {
    <tr>    <td>@Html.DisplayFor(m => element.ID)</td>  <td>@Html.DisplayFor(m => element.FirstName)</td>   <td>@Html.DisplayFor(m => element.LastName)</td>    </tr>
}
    </table>** 
```

结果很好：

[![在此处输入图像描述](../Images/3a5abae38818848dbbe7561398bbc6c2.png)](https://i.stack.imgur.com/NPOed.png)

# mysql - 使用 SQL 进行多重排序

> ID：12074906
> 
> 赞同：0
> 
> 时间：2012-08-22T14:03:59.153
> 
> 标签：mysql, sql, sql-order-by

我有一张桌子，可以组织一个节目的节目（每个节目都将在多个节目中进行）。我需要了解它们按时间顺序排列到程序中的位置。

SQL 查询实际上要长得多，但简而言之：

```
SELECT * FROM show_table ORDER BY program, timebegin 
```

结果在此表中：

```
 # show_table

program  |   timebegin     
3399        Do, 01\. Nov. 2012 20 Uhr
3399        Fr, 02\. Nov. 2012 20 Uhr
3399        Sa, 03\. Nov. 2012 20 Uhr
3401        Do, 08\. Nov. 2012 20 Uhr
3401        Fr, 09\. Nov. 2012 20 Uhr
3401        Sa, 10\. Nov. 2012 20 Uhr
3719        So, 04\. Nov. 2012 20 Uhr
3739        Mo, 12\. Nov. 2012 20 Uhr
3777        So, 04\. Nov. 2012 12 Uhr 
```

因此，程序本身是按时间排序的，但我希望顺序略有不同，如下所示：

```
program  |   timebegin     
3399        Do, 01\. Nov. 2012 20 Uhr
3399        Fr, 02\. Nov. 2012 20 Uhr
3399        Sa, 03\. Nov. 2012 20 Uhr
3777        So, 04\. Nov. 2012 12 Uhr
3719        So, 04\. Nov. 2012 20 Uhr
3401        Do, 08\. Nov. 2012 20 Uhr
3401        Fr, 09\. Nov. 2012 20 Uhr
3401        Sa, 10\. Nov. 2012 20 Uhr       
3739        Mo, 12\. Nov. 2012 20 Uhr 
```

现在一切都由 排序`timebegin`，而程序不会被截获。基本上，我不想按程序排序，而是按`timebegin`，而是将所有程序组合在一起。

这是否可以使用纯 mySQL 或者我必须应用服务器端逻辑？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:41:39.890

你可以这样做：

```
SELECT show_table.program, show_table.timebegin
FROM show_table
INNER JOIN (
    SELECT program, MIN(timebegin) AS firsttime
    FROM show_table
    GROUP BY program
) AS groups
ON (show_table.program = groups.program)
ORDER BY groups.firsttime, show_table.program, show_table.timebegin; 
```

基本上，还有另一个查询获取每个程序组的最小值`timebegin`（称为`firsttime`），然后将查询连接到原始表。然后我们只是 order by`firsttime`以使程序组正确排序，并通过`timebegin`使程序组内的行正确排序。如果两个程序组碰巧有相同的 ，它们之间的`program`字段就在那里，所以在这种情况下我们不会混合它们。`ORDER BY``firsttime`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:09:11.063

看着你想要的结果，我想你可以使用

```
SELECT * FROM show_table 
ORDER BY timebegin, program 
```

如果您希望每次都开始所有程序，请试试这个

```
SELECT timebegin, GROUP_CONCAT(program)
FROM show_table 
GROUP BY timebegin
ORDER BY timebegin 
```

查看[GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)手册页。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T14:12:21.443

你试过了`ORDER BY timeBegin, program`吗？当`timeBegin`的数据类型为时，这要容易得多`DateTime`。对？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T14:14:01.003

> 基本上，我不想按程序排序，而是按时间开始，而是将所有程序组合在一起。

这些要求相互矛盾。您必须选择哪个列更重要。在先排序时`timebegin`，程序保持组合在一起的唯一方法是数据恰好按该顺序排列，例如，在另一个程序的两个实例之间没有程序 2 的任何实例发生。这有点令人怀疑。

# c# - 需要有关删除 xml 行的建议

> ID：12074908
> 
> 赞同：0
> 
> 时间：2012-08-22T14:04:02.107
> 
> 标签：c#, xpath

我正在使用 CMS，并找到了一个从文件夹中的内容生成 rss 提要的功能。但是，我希望从列表中删除其中的一行。我已经完成了我的研究，我“认为”我应该使用 XmlDocument 类来帮助我删除我不想要的行。我已经使用 Firebug 和 FirePath 来获取 XPath - 但我似乎无法弄清楚如何正确应用它。我也不确定我应该使用 .Load 还是 .LoadXml - 我使用了后者，好像提要显示正常。但是我不得不转换 ToString() 来摆脱那个重载的匹配错误......

我要删除的行称为“存档平面”我为 FirePath 获得的 XPath 是“.//*[@id='feedContent']/xhtml:div[11]/xhtml:h3/xhtml:a”

我还假设 .RemoveChild(node); 在我 Response.Write 之前将其从 rssData 中删除。谢谢

```
Object rssData = new object();
Cms.UI.CommonUI.ApplicationAPI AppAPI = new Cms.UI.CommonUI.ApplicationAPI();
rssData = AppAPI.ecmRssSummary(50, true, "DateCreated", 0, "");
Response.ContentType = "text/xml";

XmlDocument xmlDocument = new XmlDocument();

xmlDocument.LoadXml(rssData.ToString());

XmlNode node = xmlDocument.SelectSingleNode(@"xhtml:div/xhtml:h3/xhtml[a = 'Archived Planes']");

    if (node != null)
    {
        node.ParentNode.RemoveChild(node);
    }

Response.Write(rssData); 
```

## 编辑以包括下面的输出

```
This is the what the response.write from rssData is pumping out:
<?xml version="1.0" ?> 
<rss xmlns:xsd="http://www.w3.org/2001/XMLSchema"     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.0">
<channel>
<title>Plane feed</title>
<link>http://www.domain.rss1.aspx</link>
<description></description>
<item>
<title>New Planes</title>
<link>http://www.domainx1.aspx</link>
<description>
This is the description
</description>
<author>Andrew</author>
<pubDate>Thu, 16 Aug 2012 15:55:53 GMT</pubDate>
</item>
<item>
<title>Archived Planes</title>
<link>http://www.domain23.aspx</link>
<description>
Description of Archived Planes
</description>
<author>Jan</author>
<pubDate>Wed, 15 Aug 2012 10:34:23 GMT</pubDate>
</item>
</channel>
</rss> 
```

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:59:43.890

我怀疑您的 xpath 不正确，它看起来像您正在引用的一些时髦的 dom 元素，而不是 xml 元素......例如对于以下 xml

```
<?xml version="1.0" encoding="UTF-16" standalone="yes"?>
<NewDataSet>
 <userinfo>
     <username>pqr2</username>
     <pass>abc</pass>
     <addr>abc</addr>
 </userinfo>

 <userinfo>
     <username>pqr1</username>
     <pass>pqr2</pass>
     <addr>pqr3</addr>
 </userinfo>
</NewDataSet> 
```

此代码将删除用户名元素为 pqr1 的 userinfo 节点

```
XmlDocument xmlDocument = new XmlDocument();
xmlDocument.Load(@"file.xml");
XmlNode node = xmlDocument.SelectSingleNode(@"NewDataSet/userinfo[username = 'pqr1']");

if (node != null) {
  node.ParentNode.RemoveChild(node);
  xmlDocument.Save(@"file.xml");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T21:47:58.857

以为我会发布答案，尽管我会将 Pauls 标记为答案，因为他的代码/建议是我进一步研究的基础。仍然不知道 SelectSingleNode 中的“@”是什么以及我是否真的应该拥有它 - 将做更多的研究。

```
 Object rssData = new object();
    Cms.UI.CommonUI.ApplicationAPI AppAPI = new Cms.UI.CommonUI.ApplicationAPI();
    rssData = AppAPI.ecmRssSummary(50, true, "DateCreated", 0, "");
    Response.ContentType = "text/xml";
    Response.ContentEncoding = System.Text.Encoding.UTF8;

    XmlDocument xmlDocument = new XmlDocument();

    xmlDocument.LoadXml(rssData.ToString());

    XmlNode node = xmlDocument.SelectSingleNode("rss/channel/item[title = 'Archived Planes']");

    if (node != null)
        try
        {
            node.ParentNode.RemoveChild(node);
            xmlDocument.Save(Response.Output);
        }
        catch { }

    else { Response.Write(rssData); }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T09:12:23.207

@ 符号只是表示逐字字符串文字（与普通字符串声明相比，允许您在字符串中使用时髦的字符），例如

```
string e = "Joe said \"Hello\" to me";      // Joe said "Hello" to me
string f = @"Joe said ""Hello"" to me";   // Joe said "Hello" to me 
```

有关详细信息，请参阅[此 msdn 链接](http://msdn.microsoft.com/en-us/library/aa691090%28v=vs.71%29.aspx)

# java - 如何以编程方式找到 JNLP 文件的路径？我正在使用 Java Web Start 生成 JNLP 文件

> ID：12074910
> 
> 赞同：2
> 
> 时间：2012-08-22T14:04:07.320
> 
> 标签：java, jnlp, java-web-start

如何以编程方式查找 JNLP 文件的路径？我正在使用 Java Web Start 生成 JNLP 文件。我知道手动可以在资源中的 Java Cache Viewer 中找到名为 JNLP 的文件`launch.jnlp`，但我真的需要知道是否存在一个 Java 类，它可以通过搜索内存缓存以编程方式找到 jnlp 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T22:42:31.720

> 如何以编程方式找到 JNLP 文件的路径？

它是故意隐藏的。如果您可以从代码中找到它（要求用户浏览它的缩写），则 JRE 存在安全漏洞。

> ..为了启动安装程序，我需要应用程序 jar 文件路径

不，你没有。

*   将安装程序放在 Jar 中。
*   将 Jar 添加到应用程序的资源中。
*   使用`getResource(String)`.
*   读取`byte[]`并将其写入***已知****位置*（例如）的临时*文件。***`java.io.tmpdir`**
***   从已知位置启动安装程序。**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:11:47.110

字符串 jnlpPath = System.getProperty("jnlpx.origFilenameArg");**

# jquery - 如何对这个 JavaScript 函数进行单元测试，包括模拟 Ajax 调用？

> ID：12074913
> 
> 赞同：7
> 
> 时间：2012-08-22T14:04:16.320
> 
> 标签：jquery, jquery-ui, unit-testing, mocking, qunit

正如在这个[jsFiddle](http://jsfiddle.net/aknuds1/bCNcj)中看到的，我有一个函数'init'，它配置一个按钮，以便在单击它时打开一个进度对话框并发出一个 Ajax 调用。我想对此 JavaScript 代码进行单元测试（使用[QUnit](http://qunitjs.com/)），并检查以下情况：

1.  Ajax 调用成功
2.  Ajax 调用失败

我至少需要模拟 Ajax 调用和对 的调用`window.open`，以及我确定的其他调用，具体取决于单元测试实现。

如何为测试这两种场景的代码编写 QUnit 单元测试？

**编辑：**需要测试的代码：

```
var statusmod = (function() {
    var spinner = $("#spinner");

    var init = function(id) {
        var progressDialog = $("#progressdialog-content").dialog({
            autoOpen: false,
            title: "Launching Status Page"
        });
        var errorDialog = $("#errordialog-content").dialog({
            autoOpen: false,
            modal: true,
            buttons: {
                "OK": function() {
                    $(this).dialog("close");
                }
            }
        });

        var btn = $("#button-status");
        btn.button().click(function() {
            spinner.show();

            progressDialog.dialog("open");

            var url = $.validator.format("/api/binid/?id={0}", id);
            // Call Web service to get binary ID
            $.ajax({
                url: url,
                dataType: "json"
            }).done(function(data) {
                window.open($.validator.format("http://status/?Page=Status&Id={0}", data.Id), target = "_newtab");
            }).fail(function(jqXHR, msg, errorThrown) {
                errorDialog.dialog("open");
            }).always(function() {
                progressDialog.dialog("close");
            });

            return false;
        });
    };

    return {
        init: init,
        _spinner: spinner
    };
}()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T07:50:23.240

我已经成功地为成功案例编写了一个 QUnit 测试，为失败案例编写了另一个测试，正如您从[这个 jsFiddle](http://jsfiddle.net/aknuds1/Ph8qH/15/)中看到的那样。我使用[Mockjax](https://github.com/appendto/jquery-mockjax)来伪造 Ajax 响应并模拟成功/失败条件。值得注意的是，我将 Ajax 调用配置为同步的，这样我就可以编写同步测试，因为在异步 Ajax 回调触发后我无法弄清楚如何运行我的测试。

我还利用[Sinon.JS](http://sinonjs.org/)库来伪造依赖项并验证对话框是否正确启动。

工作测试代码包含在下面，请参阅我对被测函数的问题（`statusmod.init`）。如果您认为我遗漏了什么，请告诉我。

```
var dialogSpy = null;
var windowSpy = null;
var id = "srcId";
var binId = "binId";
var url = $.validator.format("/api/binid/?id={0}", id);
var btnId = "#button-status";

module("Open status page", {
    setup: function() {
        // Allow us to run tests synchronously
        $.ajaxSetup({
            async: false
        });
        windowSpy = sinon.spy(window, "open");
        dialogSpy = sinon.spy();
        sinon.stub($.fn, "dialog", function() {
            return {
                "dialog": dialogSpy
            };
        });

        statusmod.init(id);
    },
    teardown: function() {
        windowSpy.restore();
        $.fn.dialog.restore();
        $.mockjaxClear();
        // Remove click event handler for each test
        $(btnId).unbind();
    }
});

test("Successfully open status page", function() {
    expect(4);

    $.mockjax({
        url: url,
        contentType: "text/json",
        responseText: {
            Id: binId
        }
    });

    var spinner = statusmod._spinner;
    var spinnerSpy = sinon.spy(spinner, "show");

    $(btnId).click();

    ok(spinnerSpy.calledOnce, "Spinner shown");
    ok(dialogSpy.withArgs("open").calledOnce, "Dialog opened");
    ok(dialogSpy.withArgs("close").calledOnce, "Dialog closed");
    equal(windowSpy.lastCall.args[0], $.validator.format("http://status/?Page=Status&Id={0}", binId), "Window opened");
});

test("Binary ID not found on server", function() {
    expect(3);

    $.mockjax({
        url: url,
        contentType: "text/json",
        status: 404
    });

    $(btnId).click();

    ok(dialogSpy.withArgs("open").calledTwice, "Dialogs opened");
    ok(dialogSpy.withArgs("close").calledOnce, "Progress dialog closed");
    ok(!windowSpy.called, "Window not launched");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T17:08:00.670

首先，下载并包含[Mockjax](https://github.com/appendto/jquery-mockjax)。

然后模拟你的 ajax 调用：

```
module("Mock Ajax", {
  setup: function () {
    /** this mocks the ajax call **/
    $.mockjax({
      url: 'yourUrl.php',
      data: {'action': 'your',
        'data': {
          'that': 'you',
          'send': 'here'
        }
      },
      responseText:'{"your": ["returned":"json"],"string"}'
    });
  });
}); 
```

然后您可以在测试用例中进行 ajax 调用：

```
test( "Your testcase", function() {
  $.ajax('yourUrl.php',
    data: {'action': 'your',
       'data': {
      'that': 'you',
      'send': 'here'
    }
  }, function(data) {
      ok("do something with your data");
  });
}); 
```

等等，你已经成功地测试了一些东西！您可以在 mockjax 调用中添加额外的参数（isTImeout、isError 等）。文档可以在[这里](https://github.com/appendto/jquery-mockjax)找到。

这些是基础知识，您可以使用非常完整的文档对其进行编辑以满足您的需求。

# sql - SQL SELECT WHERE 仅精确的数组值

> ID：12074917
> 
> 赞同：0
> 
> 时间：2012-08-22T14:04:26.060
> 
> 标签：sql, sql-server, select, exact-match

我有 2 张桌子：

```
threads (thread_id)
users   (thread_id,user_id) 
```

用户通过邀请其他用户加入线程来创建线程，因此多个用户可以在同一个线程上。我试图阻止用户创建具有相同用户（重复用户集）的新线程。有人有一个快速的 SELECT 语句来测试这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:22:47.507

由于您的用户组是动态的（即用户可以随时邀请其他用户加入线程），因此没有充分的理由强制执行新线程验证。我会放弃其中一项要求。要么使用户组静态（即新用户应在创建时定义组成员），要么允许用户创建他们想要的任何线程。如果对新线程的限制是为了防止垃圾邮件，请使用其他方法，例如验证码（或每个用户每小时新线程数的限制）来实现相同的目标。

如果您尝试同时满足这两个要求，您将遇到 SQL 性能问题，因为每次有人尝试启动新线程时，您都将在数据库上运行多个全表扫描。此外，在任何时候，您都可能会遇到 2 个线程拥有相同用户的情况。例如，线程 1 有用户 A、B 和 C。线程 2 有用户 A 和 B。当用户 B 邀请 C 加入线程 2 时会发生什么？

# arrays - Eclipse - 如何在调试器中更好地查看 java 数组/集合

> ID：12074921
> 
> 赞同：3
> 
> 时间：2012-08-22T14:04:53.230
> 
> 标签：arrays, eclipse, debugging, visualization

在 Eclipse Java 调试器中查看/搜索 Java 数组和集合既繁琐又耗时。

我尝试了这个有前途的插件（截至 2012 年 8 月的 alpha 版本） [http://www.cvast.tuwien.ac.at/projects/visualdebugging/ArrayExplorer](http://www.cvast.tuwien.ac.at/projects/visualdebugging/ArrayExplorer) 但它冻结了 Eclipse 以获取超过几百个元素的简单数组。

我确实使用了 Detail 格式化程序，但这仍然需要单击每个元素来查看值。

有没有更好的方法来查看这个数组/集合数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:11:30.660

使用“表达式”选项卡。

在那里，您可以输入任意数量的表达式，并在当前范围内对它们进行评估。即：collection.size()、collection.getValueAt(i) 等...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-24T01:16:38.167

`Eclipse > Preferences > Java > Debug >Detail Formatter`

这可能与您正在寻找的内容接近。这是另一项繁琐的设置工作，但一旦完成，您就可以在“表达式”窗口中看到对象的值。

这是[开始的链接](https://dzone.com/articles/tips-and-tricks-debugging-ecli)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-15T18:08:20.257

覆盖类的 toString 方法，您将能够看到您想看到的内容。我附上例子来向你展示这一点。[![在此处输入图像描述](../Images/7946a40c31ebd85b03d50ca215727f6d.png)](https://i.stack.imgur.com/nteHL.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-17T18:00:24.837

即使我找不到在漂亮的表/数组中查看它们的方法，我还是找到了一个中途的解决方法。

解决方案是在一次性类中定义一个静态方法，该类将数组作为输入并返回一个想要快速浏览的串联值字符串。它可以包括数组索引和换行符，以查看格式良好的结果。可以对其进行微调以仅打印某些数组索引以减少混乱。

然后可以在监视区域中使用此静态方法。

# image-processing - 使用 OpenCV Haar 级联分类器查找形状

> ID：12074922
> 
> 赞同：3
> 
> 时间：2012-08-22T14:04:56.343
> 
> 标签：image-processing, opencv, object-recognition

我在一些雷达数据中寻找抛物线。我正在使用 OpenCV Haar 级联分类器。我的正图像是 20x20 PNG，所有像素都是黑色的，除了那些追踪抛物线形状的图像——每个正图像一个抛物线。

我的问题是：这些积极因素会训练分类器来寻找带有抛物线的黑盒子，还是会训练分类器来寻找抛物线形状？

我应该在正面图像中添加一层中等值的噪点，还是应该不切实际地清晰和高对比度？

这是原始数据的示例。

![原始数据。](../Images/e79e72ddc590ec45d0d2c61c78ef7ac6.png)

这是我使用 GIMP 执行简单边缘检测后的数据示例。抛物线形状在白框中突出显示

![边缘检测后的数据。](../Images/15ece4f4c042b93c030ac5f222652b04.png)

这是我的正面形象之一。

![正像样本。](../Images/f6f09a344869d78defd95a43d6d2d669.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T14:53:11.883

我想出了一种方法来检测抛物线，最初使用 OpenCV 的 MatchTemplate 方法。起初，我使用的是 Python`cv`和后来的`cv2`库，但我必须确保我的输入图像是 8 位无符号整数数组。我最终获得了类似的效果，而使用`scipy.signal.correlate2d( image, template, mode='same')`. 将`mode='same'`输出大小调整为`image`. 完成后，我使用该功能执行阈值处理，并使用该模块`numpy.where()`打开和关闭以消除椒盐噪声。`scipy.ndimage`

这是阈值之前的输出。

![在此处输入图像描述](../Images/dc175eb43b10a3f729132624c0cc995b.png)

# c# - Launcher.LaunchFileAsync(...) 不工作

> ID：12074926
> 
> 赞同：0
> 
> 时间：2012-08-22T14:05:08.347
> 
> 标签：c#, xaml, windows-runtime, windows-store-apps, winrt-xaml

我正在开发一个适用于 Win8 的应用程序，其中应该包括保存联系信息的可能性。我使用的服务提供 VCard 支持，所以我决定使用它们。我可以成功下载并保存它们，仅自动打开它们不起作用。这些文件是“正确的”，可以从资源管理器中毫无问题地打开。为什么 LaunchFileAsync 不起作用的任何想法？

这是代码的转储：

```
 private async void SaveContactSelected()
    {
        IRandomAccessStreamReference img = RandomAccessStreamReference.CreateFromUri(SelectedItem.Image.UriSource);
        StorageFile file = await StorageFile.CreateStreamedFileFromUriAsync(SelectedItem.Title.Replace(' ', '_')+".vcf", new Uri(SelectedItem.VCardUrl), img);

        var stream = await file.OpenReadAsync();
        uint size = Convert.ToUInt32(stream.Size);
        IBuffer buffer = await stream.ReadAsync(new Windows.Storage.Streams.Buffer(size), size, InputStreamOptions.None);
        if(!stream.CanRead)
        {
            //TODO: Error handling
            return;
        }

        FileSavePicker savePicker = new FileSavePicker();
        savePicker.FileTypeChoices.Add("vcard", new List<string> { ".vcf" });
        savePicker.SuggestedStartLocation = PickerLocationId.DocumentsLibrary;
        savePicker.SuggestedFileName = SelectedItem.Title.Replace(' ', '_') + ".vcf";
        StorageFile saveDestination = await savePicker.PickSaveFileAsync();

        if (saveDestination != null)
        {
            CachedFileManager.DeferUpdates(saveDestination);
            await FileIO.WriteBufferAsync(saveDestination, buffer);
            FileUpdateStatus status = await CachedFileManager.CompleteUpdatesAsync(file);
            if (status == FileUpdateStatus.Complete)
            {
                bool succ = await Launcher.LaunchFileAsync(saveDestination, new LauncherOptions() { DisplayApplicationPicker=true });
                return;
            }
            else
            {
                //TODO: Error handling
            }
        } 
    } 
```

这里是清单相关部分的转储：

```
<Application Id="App" Executable="$targetnametoken$.exe" EntryPoint="MyApp.App">
  <VisualElements DisplayName="MyApp.com" Logo="Assets\Images\Logo.png" SmallLogo="Assets\Images\SmallLogo.png" Description="MyApp.com Description TODO" ForegroundText="dark" BackgroundColor="#464646">
    <DefaultTile ShowName="allLogos" WideLogo="Assets\Images\LogoWide.jpg" />
    <SplashScreen Image="Assets\Images\SplashScreen.png" BackgroundColor="#FFFFFF" />
    <InitialRotationPreference>
      <Rotation Preference="landscape" />
    </InitialRotationPreference>
  </VisualElements>
  <Extensions>
    <Extension Category="windows.search" />
    <Extension Category="windows.fileTypeAssociation">
      <FileTypeAssociation Name="vcard">
        <DisplayName>V-Card</DisplayName>
        <EditFlags OpenIsSafe="true" />
        <SupportedFileTypes>
          <FileType ContentType="text/x-vcard">.vcf</FileType>
        </SupportedFileTypes>
      </FileTypeAssociation>
    </Extension>
  </Extensions>
</Application> 
```

编辑：为更清晰添加了清单转储。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T18:39:55.923

您有任何处理 VCard 格式的应用程序吗？我认为应用程序 Package.appxmanifest 需要包含这样的部分：

```
 <Extensions>
    <Extension Category="windows.fileTypeAssociation">
      <FileTypeAssociation Name="...">
        <DisplayName>...</DisplayName>
        <InfoTip>...</InfoTip>
        <SupportedFileTypes>
          <FileType ContentType="text/vcard">.vcf</FileType>
        </SupportedFileTypes>
      </FileTypeAssociation>
    </Extension>
  </Extensions> 
```

如果您在这里查看邮件应用程序 - 它似乎没有这样的部分。

“c:\Program Files\WindowsApps\microsoft.windowscommunicationsapps_16.4.4206.722_x64__8wekyb3d8bbwe\AppxManifest.xml”

*编辑

Mail 应用程序实际上有一个提到 <SupportsAnyFileType/> 的部分，但它位于 ShareTarget 部分，而不是 FileTypeAssociation 部分。

*编辑 2

似乎在 Windows 中内置了对 VCF 文件的支持，这对我来说很好，假设您的 Documents 库中有 TestCard.vcf 文件，能够打开清单中声明的​​ DocumentsLibrary 和声明为 open 的文件类型关联。 vcf 文件（内容类型：文本/vcard，文件类型：.vcf）。

```
var vcf = await KnownFolders.DocumentsLibrary.GetFileAsync("TestCard.vcf");
var vcfBytes = await FileIO.ReadBufferAsync(vcf);
var vcfCopy = await KnownFolders.DocumentsLibrary.CreateFileAsync("TestCard - copy.vcf");
CachedFileManager.DeferUpdates(vcfCopy);
await FileIO.WriteBufferAsync(vcfCopy, vcfBytes);
await CachedFileManager.CompleteUpdatesAsync(vcfCopy);
Launcher.LaunchFileAsync(vcfCopy, new LauncherOptions { DisplayApplicationPicker = true }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-01T00:27:34.153

在处理此错误时：

*   将文件写入我的 W8.1 应用程序的临时文件夹
*   双击文件打开它就好了（在这种情况下是 pptx）
*   LaunchFileAsync 始终返回 false。

我发现了两件事。首先，引用 Windows 完成的一些奇怪的安全检查（这对我来说不是导致它的原因：[https ://social.msdn.microsoft.com/Forums/en-US/c0625345-5d57-4e40-b446-85db4c6ef355 /why-does-windowssystemlauncherlaunchfileasync-fail-with-file-from-my-local-folder?forum=winappswithhtml5](https://social.msdn.microsoft.com/Forums/en-US/c0625345-5d57-4e40-b446-85db4c6ef355/why-does-windowssystemlauncherlaunchfileasync-fail-with-file-from-my-local-folder?forum=winappswithhtml5)）。

其次，这是我的问题，是我不在 UI 线程上！切换所以 LaunchFileAsync 在 UI 线程上使它突然工作得很好。

# php - 如果页面刷新，PHPmailer 会发送重复项

> ID：12074928
> 
> 赞同：2
> 
> 时间：2012-08-22T14:05:15.930
> 
> 标签：php, email, phpmailer

两个月前我就遇到了这个问题，现在还在苦苦挣扎。我将 PHPMailer 用于我的邮件列表程序。我有一个在特定时间运行的 cron 作业。但是，电子邮件存在问题。

我在发送给所有邮件列表成员的循环中使用 PHPMailer。代码如下所示：

```
<?php
require("PHPMailer/class.phpmailer.php");
$mail = new PHPMailer();
$mail->SingleTo = true;
$mail->CharSet = "UTF-8";
$mail->Subject = "Our news";
$r_receivers = array("John"=>"john@mail.com","Mary"=>"mary@mail.com","Rob"=>"rob@mail.com");

foreach($r_receivers as $name=>$email){
    $mail->SetFrom('no-reply@oursite.com', "Oursite");
    $mail->MsgHTML($sendContent);
    $mail->AddAddress($email, $name);
        $sendContent = "<p>E-mail body</p>";
    if($mail->Send())
        echo "Sent to: ".$email."<br/>";
    else
        echo "Not sent to: ".$email.", reason: ".$mail->ErrorInfo."<br/>";
    $mail->ClearAddresses();
}?> 
```

当我用 ajax 调用这个代码时，它工作得很好。但是，如果我在浏览器中执行此代码或刷新它或使用 cron 作业调用它，它会向我发送重复项。

有人可以解释为什么我用浏览器/刷新打开它时会出错吗？为什么我通过使用 ajax 调用它并从浏览器调用它得到不同的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T15:33:45.460

似乎有一个与此相关的未解决问题：[http](http://code.google.com/a/apache-extras.org/p/phpmailer/issues/detail?id=31) ://code.google.com/a/apache-extras.org/p/phpmailer/issues/detail?id=31 。您可能希望将您的 PHPMailer 副本升级到最新版本，然后重试。问题状态是“已修复”，尽管从问题单中的评论中可以看出问题可能仍然存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-11T20:06:54.137

您正在使用 SingleTo，这是不鼓励的。根据 PHPMailer 库的作者的说法，SingleTo 计划在 PHPMailer 6.0 版本中被弃用，并在 7.0 中删除。作者解释说，最好在更高级别控制发送给多个收件人，因为 PHPMailer 不是邮件列表发件人。他们告诉我们也需要不鼓励使用 PHP mail() 函数，因为它很难安全使用；SMTP 更快、更安全，并提供更多控制和反馈。而且由于 SMTP 与 SingleTo 不兼容，PHPMailer 的作者将删除 SingleTo，而不是 SMTP。

# css - WordPress 主题中的并排 div

> ID：12074933
> 
> 赞同：0
> 
> 时间：2012-08-22T14:05:34.573
> 
> 标签：css, wordpress, html, wordpress-theming

[HTML](http://www.guestvibe.com/wordpress/)

[子主题的CSS](http://www.guestvibe.com/wordpress/wp-content/themes/guestvibe/style.css)

父主题的 CSS 可以在目录 www.guestvibe.com/wordpress/wp-content/themes/zincious/css/ 中找到，并被称为：

*   行政
*   颜色
*   布局
*   IE
*   导航
*   分页
*   必需的
*   幻灯片
*   排版

我知道这种定位问题已经被做死了，但由于编辑现有主题的性质，我发现它很困难。

本质上，我想在#featured 中将#left 和#right 彼此相邻放置，但它下面的#body 给我带来了问题。目前，#right 位于蓝色条纹#body 中。

我的尝试在子 CSS 中被注释掉了，但这只会造成更大的破坏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:59:37.727

添加以下定义：

```
#left {
    width: 50%;
    float: left;
}
#right {
    width: 50%;
    display: block;
    float: right;
}
#body {
    clear: left;
} 
```

当然，您可以将#left 和#right 设置为您想要的任何尺寸。出于说明目的，我只是将它们设为 50%。

# c# - Rad 加载面板在导出后不关闭

> ID：12074935
> 
> 赞同：1
> 
> 时间：2012-08-22T14:05:35.657
> 
> 标签：c#, export-to-excel, radgrid, radajaxloadingpanel

我正在使用 radgrid。当我单击导出按钮时，Rad Ajax 加载面板会显示，但在导出过程完成后不会关闭。

你对这个问题有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T05:44:26.047

嗨，我找到了我的解决方案 :) 我删除了 AjaxPanel 和 AjaxLoadingPanel 之间的连接。之后，我明确地触发了 AjaxLoadingPanel。这是我以前使用的代码。

```
<telerik:RadAjaxManager ID="RadAjaxManager1" runat="server">
     <AjaxSettings>
        <telerik:AjaxSetting AjaxControlID="RadGrid1">
            <UpdatedControls>
                <telerik:AjaxUpdatedControl ControlID="RadAjaxPanel1" LoadingPanelID="RadAjaxLoadingPanel1"/>
            </UpdatedControls>
        </telerik:AjaxSetting>
        <telerik:AjaxSetting AjaxControlID="btnList">
         <UpdatedControls>
                <telerik:AjaxUpdatedControl ControlID="RadAjaxPanel1" LoadingPanelID="RadAjaxLoadingPanel1"/>
            </UpdatedControls>
        </telerik:AjaxSetting>
     </AjaxSettings>
     <ClientEvents OnRequestStart="ResponseEnd" />
</telerik:RadAjaxManager> 
```

和java脚本

```
<telerik:RadCodeBlock ID="RadCodeBlock1" runat="server">
<script type="text/javascript">
    var currentLoadingPanel = null;
    var currentUpdatedControl = null;
    function ResponseEnd(sender, args) {
        //hide the loading panel and clean up the global variables
        if (args.get_eventTarget().indexOf("ExportToExcelButton") >= 0 ||
                args.get_eventTarget().indexOf("ExportToPdfButton") >= 0 ||
                args.get_eventTarget().indexOf("ExportToCsvButton") >= 0) {
            args.set_enableAjax(false);
        }

        currentLoadingPanel = $find("<%= RadAjaxLoadingPanel1.ClientID %>");

        if (args.get_eventTarget() == "<%= btnList.UniqueID %>") {
            currentUpdatedControl = "<%= RadAjaxPanel1.ClientID %>";
        }
        else {
            currentUpdatedControl = "<%= RadAjaxPanel1.ClientID %>";
        }
        if (currentLoadingPanel != null)
            currentLoadingPanel.hide(currentUpdatedControl);
        currentUpdatedControl = null;
        currentLoadingPanel = null;
    }
</script> 
```

# java - 如何使用gmail从spring应用程序发送电子邮件？

> ID：12074936
> 
> 赞同：0
> 
> 时间：2012-08-22T14:05:38.300
> 
> 标签：java, spring, email, smtp, gmail

我正在开发一个弹簧（基于注释）应用程序。

其中一个页面要求用户提供他们的联系方式和消息。提交此页面后，我希望通过电子邮件将这些详细信息发送到我的公司 ID。

有人可以提供我可以用来实现此功能的示例示例/代码吗？我想使用 gmail smpt 服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:14:25.457

听起来你想要的是 Java Mail...

[http://www.oracle.com/technetwork/java/javamail/index.html](http://www.oracle.com/technetwork/java/javamail/index.html)

这将允许您通过 gmail smtp 服务器发送邮件...

smtp.gmail.com（使用身份验证）

使用身份验证：是

TLS/STARTTLS 端口：587

SSL 端口：465

根据[http://support.google.com/mail/bin/answer.py?hl=en&answer=13287](http://support.google.com/mail/bin/answer.py?hl=en&answer=13287)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T14:23:13.310

看这里： [http ://static.springsource.org/spring/docs/3.0.x/reference/mail.html](http://static.springsource.org/spring/docs/3.0.x/reference/mail.html)

使用来自 GMail 的 SMTP 数据创建一个 JavaMailSenderImpl bean，并将其注册到应用程序上下文中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T14:13:50.497

您可以使用[JavaMail](http://www.oracle.com/technetwork/java/javamail/index.html) (SMTP) 或[Google API](https://developers.google.com/google-apps/gmail/#oauth_access_to_imap_and_smtp)。

JavaMail 更直接，但使用 SMTP 通信。Google API 需要更长的时间才能使用，但它是基于 Web 的 (REST)

# php - 抑制来自 odbc_connect 调用的 PHP 错误

> ID：12074937
> 
> 赞同：-1
> 
> 时间：2012-08-22T14:05:39.323
> 
> 标签：php, odbc

假设我做了一个odbc_connect调用，故意使用错误信息，如下：

```
<?PHP odbc_connect('bogus','bogus','bogus'); ?> 
```

现在，[手册](http://php.net/manual/en/function.odbc-connect.php)指出 odbc_connect “[r] 在错误时返回 ODBC 连接 id 或 0 (FALSE)”。我对返回的 0 没意见，但是当我运行文件时（使用[Wampserver](http://www.wampserver.com/en/)），我还收到错误消息，告诉我出了点问题。

我想禁止显示此错误消息，因为我正在[尝试构建一个 PHP 文件](https://stackoverflow.com/questions/12061825/try-different-odbc-connect-calls)，当数据库调用的信息错误时，它只回显某段文本，例如“不成功”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T14:08:00.410

使用`try-catch`：

```
<?php
try {
    odbc_connect('bogus', 'bogus', 'bogus');
} catch (Exception $e) {
    // handle your exception
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T14:08:29.753

您还可以使用`@`在一行中抑制错误消息 - 但这不是一个好习惯。

```
<?PHP @odbc_connect('bogus','bogus','bogus'); ?> 
```

错误消息是有原因的，不要忽略它们。使用像@Matt 建议的东西并根据需要捕获它们 - 而不仅仅是让它们安静下来。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T14:08:14.700

您可以使用错误抑制运算符`@`。

```
<?php
    $conn = @odbc_connect('bogus','bogus','bogus');
?> 
```

# sql-server - 获取 ROWS 作为 COLUMNS（SQL Server 动态 PIVOT 查询）

> ID：12074939
> 
> 赞同：11
> 
> 时间：2012-08-22T14:05:47.133
> 
> 标签：sql-server, tsql, pivot

我正在使用 MS SQL 2008 R2，具有以下架构的三个表：

表 1：包含每个工人的轮班信息

```
CREATE TABLE workshift (
[ws_id] [bigint] NOT NULL,
[start_date] [datetime] NOT NULL,
[end_date] [datetime] NOT NULL,
[worker_id] [bigint] NOT NULL
)

INSERT INTO workshift VALUES (1, '2012-08-20 08:30:00', '2012-08-20 14:30:00', 1)
INSERT INTO workshift VALUES (2, '2012-08-20 14:30:00', '2012-08-20 22:30:00', 2) 
```

表 2：包含货币面额

```
CREATE TABLE currency_denom (
[cd_id] [decimal](7, 2) NOT NULL,
[name] [nchar](100) NOT NULL
)

INSERT INTO currency_denom VALUES (1, '100.00')
INSERT INTO currency_denom VALUES (2, '50.00')
INSERT INTO currency_denom VALUES (3, '20.00')
INSERT INTO currency_denom VALUES (4, '10.00')
INSERT INTO currency_denom VALUES (5, '5.00')
INSERT INTO currency_denom VALUES (6, '1.00') 
```

表 3：包含工人在每个班次中收到的每种面额的数量

```
CREATE TABLE currency_by_workshift (
[cd_id] [decimal](7, 2) NOT NULL,
[ws_id] [bigint] NOT NULL,
[qty] [int] NOT NULL
)

INSERT INTO currency_by_workshift VALUES (1, 1, 1)
INSERT INTO currency_by_workshift VALUES (2, 1, 2)
INSERT INTO currency_by_workshift VALUES (3, 1, 2)
INSERT INTO currency_by_workshift VALUES (2, 2, 3)
INSERT INTO currency_by_workshift VALUES (4, 2, 4)
INSERT INTO currency_by_workshift VALUES (5, 2, 2) 
```

我需要在列而不是行中获取 currency_by_workshift 值以及工作班次值，即：

```
workshift |     workshift       |     workshift       | 100.00 | 50.00 | 20.00 | 10.00 | 5.00 | 1.00 
  ws_id   |     start_date      |     end_date        |        |       |       |       |      | 

    1     | 2012-08-20 08:30:00 | 2012-08-20 14:30:00 |    1   |   2   |   2   |   0   |   0  |   0
    2     | 2012-08-20 14:30:00 | 2012-08-20 22:30:00 |    0   |   2   |   0   |   4   |   2  |   0 
```

我无法使用案例来计算每种货币面额的数量，因为它们是可配置的，如果添加了新面额，则应修改查询。如果使用 PIVOT 功能也同样适用，还是我错了？

我怎样才能以这种方式获取信息？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-22T14:16:51.860

您正在尝试做的事情称为[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx). 有两种方法可以做到这一点，使用静态枢轴或动态枢轴。

Static Pivot - 您将在其中硬编码行的值以转换为列（参见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/4005d/17)）：

```
select ws_id,
  start_date,
  end_date,
  IsNull([100.00], 0) [100.00],
  IsNull([50.00], 0) [50.00],
  IsNull([20.00], 0) [20.00],
  IsNull([10.00], 0) [10.00],
  IsNull([5.00], 0) [5.00],
  IsNull([1.00], 0) [1.00]
from 
(
  select ws.ws_id,
    ws.start_date,
    ws.end_date,
    cd.name,
    cbw.qty
  from workshift ws
  left join currency_by_workshift cbw
    on ws.ws_id = cbw.ws_id
  left join currency_denom cd
    on cbw.cd_id = cd.cd_id
) x
pivot
(
  sum(qty)
  for name in ([100.00], [50.00], [20.00], [10.00], [5.00], [1.00])
) p 
```

动态透视是在运行时确定列的位置（请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/4005d/18)）：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX),
    @colsPivot AS NVARCHAR(MAX)

select @colsPivot = 
  STUFF((SELECT ', IsNull(' + QUOTENAME(rtrim(name)) +', 0) as ['+ rtrim(name)+']' 
                    from currency_denom
                   GROUP BY name
                   ORDER BY cast(name as decimal(10, 2)) desc
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

select @cols = STUFF((SELECT distinct ', ' + QUOTENAME(name)
                    from currency_denom
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query 
      = 'SELECT ws_id, start_date, end_date,' + @colsPivot + ' from 
         (
            select ws.ws_id,
              ws.start_date,
              ws.end_date,
              cd.name,
              cbw.qty
            from workshift ws
            left join currency_by_workshift cbw
              on ws.ws_id = cbw.ws_id
            left join currency_denom cd
              on cbw.cd_id = cd.cd_id
         ) x
         pivot 
         (
            sum(qty)
            for name in (' + @cols + ')
         ) p '

execute(@query) 
```

两个版本将产生相同的结果。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-22T15:40:05.753

@bluefeet 利用内置`PIVOT`功能提供了一个非常好的答案。但是，我经常发现`PIVOT`和`UNPIVOT`命名法令人困惑，并且我还没有遇到过标准聚合无法获得相同结果的情况：

```
select w.ws_id, w.start_date, w.end_date,
    [100.00] = isnull(sum(case when c.name='100.00' then cw.qty else null end), 0),
    [50.00]  = isnull(sum(case when c.name='50.00'  then cw.qty else null end), 0),
    [20.00]  = isnull(sum(case when c.name='20.00'  then cw.qty else null end), 0),
    [10.00]  = isnull(sum(case when c.name='10.00'  then cw.qty else null end), 0),
    [5.00]   = isnull(sum(case when c.name='5.00'   then cw.qty else null end), 0),
    [1.00]   = isnull(sum(case when c.name='1.00'   then cw.qty else null end), 0)
from workshift w
    join currency_by_workshift cw on w.ws_id=cw.ws_id
    join currency_denom c on cw.cd_id=c.cd_id
group by w.ws_id, w.start_date, w.end_date 
```

如果要进行动态透视，只需构建一次透视列的字符串：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = 
stuff(( select replace(',[@name] = isnull(sum(case when c.name=''@name'' then cw.qty else null end), 0)'
                       , '@name', rtrim(name))
        from currency_denom
        order by cd_id
        for xml path(''), type
    ).value('.', 'nvarchar(max)')
    ,1,1,'')

select @query = '
select w.ws_id, w.start_date, w.end_date, '+@cols+'
from workshift w
    join currency_by_workshift cw on w.ws_id=cw.ws_id
    join currency_denom c on cw.cd_id=c.cd_id
group by w.ws_id, w.start_date, w.end_date
'

execute(@query) 
```

# visual-studio-2010 - TFS + Visual Studio 2010 + 获取提取用户的名称

> ID：12074946
> 
> 赞同：0
> 
> 时间：2012-08-22T14:06:22.403
> 
> 标签：visual-studio-2010

我正在与其他 3 位开发人员一起在我的公司开发一个 WinForm 项目。
我们在 Visual Studio 2010 中工作，项目中的文件由 TFS 实例管理。
当用户提取文件时，代表男人的小图标会显示在项目树视图中文件名的左侧。
我希望有一种方法可以获取提取文件的用户的名称。

我目前尝试提取已提取的文件以获取提取用户的名称。
然后会显示一条错误消息，其中包含正在提取的用户名。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T15:11:13.547

您可以使用源代码管理资源管理器查看哪些用户已签出项目以及许多其他信息。这是 MSDN 参考： http: [//msdn.microsoft.com/en-us/library/ms181370](http://msdn.microsoft.com/en-us/library/ms181370(VS.100).aspx) (VS.100).aspx 。

# java - Android：ScrollView 内的 Horizo ntalScrollView

> ID：12074950
> 
> 赞同：16
> 
> 时间：2012-08-22T14:06:38.370
> 
> 标签：java, android

我在 ScrollView 中有多个**Horizo** **​​ntalScrollViews**。水平滚动一点也不流畅。我必须几乎完美地水平滚动才能滚动工作。有一个简单的解决方法来调整这个？？？谢谢！

 **![单个 ScrollView 内的多个 Horizo​​ntalScrollViews](../Images/7b5e2d996dc01f297083db118b40be33.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-23T00:25:12.300

您可以将 Recycler 视图与交错布局管理器一起使用

```
 StaggeredGridLayoutManager  staggeredGridLayoutManager = new StaggeredGridLayoutManager(4, StaggeredGridLayoutManager.HORIZONTAL);

 RecyclerViewAdapter recyclerViewAdapter = newRecyclerViewAdapter(this);

 recyclerView.setAdapter(recyclerViewAdapter); //Don't miss to initialize your adapter 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T11:48:54.153

此类创建一个 ScrollView，其中包含一个合并为一个类的 Horizo​​ntalScrollView。您可以使用 AddChild() 方法将内容放入其中。dispatchTouchEvent 覆盖保持滚动平滑，因此您可以用手指的单次滑动来平移。

（我最近用它来包装一个以编程方式创建的 TextView）

```
class MultiScrollView extends ScrollView
{           
 public HorizontalScrollView hscroll;

 public MultiScrollView ( Context context ) 
 { 
   super( context );
 }

 public void AddChild( View child ) 
 {                                              
   hscroll.addView( child );
 }

 @Override
 public boolean dispatchTouchEvent( MotionEvent event ) 
 {
   hscroll.dispatchTouchEvent(event);
   onTouchEvent(event);
   return true;
 }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-08T13:55:00.720

如果您使用来自 ( [http://www.dev-smart.com/archives/34 ) 的水平滚动视图解决方案，则](http://www.dev-smart.com/archives/34)**滚动视图**和**列表视图**之间的交叉焦点问题的解决方案会阻止**滚动视图**的焦点一旦您专注于列表视图。

从技术角度来看，您应该将以下行添加到`onScroll`Horizo​​ntalListView 类内的函数中。

```
getParent().requestDisallowInterceptTouchEvent(true); 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T10:04:12.113

我找到了解决方案，但仍然无法相信这是您必须做的才能使这项工作正常进行！刚刚将**空白 onClickListener添加到 Horizo** **​​ntalScrollView**中的每个项目：

```
 item.setOnClickListener(new OnClickListener() {         
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
        }
    }); 
```

之后这张幻灯片真的很顺利，无论是向上还是向下。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T14:38:17.660

一般来说，您根本不应该在 Android 中使用嵌套的 ScrollView，以这种方式滚动的行为也是不自然的。

您可能想重新考虑您的布局设计，这是可扩展列表无法实现的吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-13T11:43:06.817

虽然大卫的答案有效，但它有一个缺点。它将ScrollView 的MotionEvent 对象直接传递给Horizo​​ntalScrollView.onTouchEvent()，因此如果Horizo​​ntalScrollView 或其子级试图获取事件坐标，他们将得到基于ScrollView 的错误坐标。

我的解决方案：

```
public class CustomScrollView extends ScrollView{

    /*************skip initialization*************/

    @Override
    public boolean onInterceptTouchEvent(MotionEvent e){
        //returning false means ScrollView is not interested at any events,
        //so ScrollView's onTouchEvent() won't be called,
        //and all of the events will be passed to ScrollView's child
        return false;
    }

    @Override
    public boolean dispatchTouchEvent(MotionEvent ev) {
        //manually call ScrollView's onTouchEvent(),
        //the vertical scrolling happens there.
        onTouchEvent(ev);
        //dispatch the event,
        //ScrollView's child will have every event.
        return super.dispatchTouchEvent(ev);
    }
} 
```

只需将此 CustomScrollView 包裹在布局文件中的 Horizo​​ntalScrollView 上。**

# ios - MFMailComposeViewController canSendMail - Exchange Active Sync

> ID：12074955
> 
> 赞同：1
> 
> 时间：2012-08-22T14:06:59.970
> 
> 标签：ios, email, activesync

我正在编写一个 iOS 应用程序，我允许用户从我的应用程序发送电子邮件。为了检测他们是否能够发送电子邮件，我使用了**[MFMailComposeViewController canSendMail]**方法。

除非我有 Exchange Active Sync 帐户注册，否则它运行良好。在这种情况下， canSendMail 方法返回 false ！

有人知道为什么 MFMailComposeViewController 似乎无法将我的 Exchange 帐户识别为电子邮件帐户吗？而我能做什么？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:13:02.867

这是我的 MobileIron 配置的问题。我从 MDM 收到的证书不允许我从 Mail 以外的其他应用程序发送电子邮件。

所以：一切都适用于 Exchange 和 MFMailComposeViewController。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T16:28:59.510

您现在可以使用具有 Exchange Active Sync 帐户的手机进行测试吗？如果没有尝试得到一个。

然后看看如果您忽略该标志并尝试发送邮件会发生什么。如果最终您可以发送电子邮件，那么至少暂时您可以弹出一个操作表，上面写着“如果您正在使用'Exchange Active Sync'，请点击继续，否则您应该取消并配置一个邮件帐户”。这至少可以让你继续工作，直到 Apple 修复它。

在任何情况下，您都应该向 Apple (bugreporter.apple.com) 输入一个错误。

# javascript - 如何用 D3 添加简单的弧线

> ID：12074959
> 
> 赞同：7
> 
> 时间：2012-08-22T14:07:03.830
> 
> 标签：javascript, svg, d3.js

我想在图表部分添加一个简单的弧线，比如一个圆圈：

```
vis.append("circle")
    .style("stroke", "gray")
    .style("fill", "white")
    .attr("r", 40)
    .attr("cx", 50)
    .attr("cy", 50); 
```

提供[的 D3 示例](http://bl.ocks.org/1308257)正在使用数据属性，但我希望在没有任何基础数据的情况下查看它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-22T17:02:10.290

D3 使用弧的路径生成器。如果您不想对弧进行数据驱动，只需定义弧生成器并添加一些方法...

```
var arc = d3.svg.arc()
    .innerRadius(50)
    .outerRadius(70)
    .startAngle(45 * (Math.PI/180)) //convert from degs to radians
    .endAngle(3) //just radians

vis.append("path")
    .attr("d", arc)
    .attr("transform", "translate(50,50)") 
```

你可以在这里看到一个演示：http: [//jsfiddle.net/h9XNz/](http://jsfiddle.net/h9XNz/)

# python - T9系统转小键盘

> ID：12074963
> 
> 赞同：2
> 
> 时间：2012-08-22T14:07:18.057
> 
> 标签：python

我正在尝试做一个 T9 系统，可能是手机中的系统，但使用的是键盘。我真的需要一些关于如何做到这一点的建议。

我已经找到了一个包含我想要使用的单词的文本文件。我希望能够将数字 2 按钮用作 'abc' 3 = 'def', 4='ghi'.. 等如果有人感到无聊或只是可以帮助我走上这条路，那将是非常重要的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T17:14:09.577

这是一个蛮力T9模仿者：

```
import itertools 

n2l={2:'abc',3:'def',4:'ghi',5:'jkl',6:'mno',7:'pqrs',8:'tuv',9:'wxyz'}

with open('/usr/share/dict/words','r') as di:  # UNIX 250k unique word list 
    all_words={line.strip() for line in di}

def combos(*nums):
    t=[n2l[i] for i in nums]
    return tuple(''.join(t) for t in itertools.product(*(t)))

def t9(*nums):
    combo=combos(*nums)
    return sorted(word for word in all_words if word.startswith(combo))

def try_it(*nums):
    l=list(t9(*nums))
    print('  {:10} {:10,} words'.format(','.join(str(i) for i in nums),len(l)))
    if len(l)<100:
        print(nums,'yields:',l)

try_it(2)
try_it(2,3)
try_it(2,3,4)
try_it(2,3,3,4)
try_it(2,3,3,4,5) 
```

印刷：

```
 2              41,618 words
  2,3             4,342 words
  2,3,4             296 words
  2,3,3,4           105 words
  2,3,3,4,5          16 words
(2, 3, 3, 4, 5) yields: ['aedile', 'aedileship', 'aedilian', 'aedilic', 'aedilitian', 
    'aedility', 'affiliable', 'affiliate', 'affiliation', 'bedikah', 'befilch', 
    'befile', 'befilleted', 'befilmed', 'befilth', 'cedilla'] 
```

您可以看到，从 25 万字（一个非常大的集合）开始需要 5 个数字才能收敛到可管理的大小。

虽然此代码是说明性的，并且可以帮助您入门，但您还需要做两件事：

1.  一组较小的单词;-)和
2.  将出现在 UI 的 T9 自动完成区域中的更常见单词的排名。（即，“附属”或“附属”比“aedile”或“befilth”更可能是（2、3、3、4、5）中所需的词。这些需要以某种方式进行排名......）

* * *

**拿 2**

这是加权的快速尝试。我读了同一个大字典（常见的 Unix '单词'文件），然后用[Project Gutenberg 的 The Adventures of Sherlock Holmes 对](http://www.gutenberg.org/cache/epub/1661/pg1661.txt)这些单词进行加权。你可以使用任何好的文本集合来做到这一点。

```
from collections import Counter
import re
import itertools 

all_words=Counter()
n2l={2:'abc',3:'def',4:'ghi',5:'jkl',6:'mno',7:'pqrs',8:'tuv',9:'wxyz'}
with open('/usr/share/dict/words','r') as di:  # UNIX 250k unique word list 
     all_words.update({line.strip() for line in di if len(line) < 6}) 

with open('holmes.txt','r') as fin:   # http://www.gutenberg.org/ebooks/1661.txt.utf-8
    for line in fin:
         all_words.update([word.lower() for word in re.findall(r'\b\w+\b',line)])

def combos(*nums):
    t=[n2l[i] for i in nums]
    return tuple(''.join(t) for t in itertools.product(*(t)))

def t9(*nums):
    combo=combos(*nums)
    c1=combos(nums[0])
    first_cut=(word for word in all_words if word.startswith(c1))
    return (word for word in first_cut if word.startswith(combo))

def try_it(*nums):
    s=set(t9(*nums))
    n=10
    print('({}) produces {:,} words. Top {}:'.format(','.join(str(i) for i in nums),
            len(s),min(n,len(s))))
    for i, word in enumerate(
          [w for w in sorted(all_words,key=all_words.get, reverse=True) if w in s],1):
        if i<=n:
            print ('\t{:2}:  "{}" -- weighted {}'.format(i, word, all_words[word]))

    print()        

try_it(2)
try_it(2,3)
try_it(2,3,4)
try_it(2,3,3,4)
try_it(6,6,8,3)   
try_it(2,3,3,4,5) 
```

印刷：

```
(2) produces 2,584 words. Top 10:
     1:  "and" -- weighted 3089
     2:  "a" -- weighted 2701
     3:  "as" -- weighted 864
     4:  "at" -- weighted 785
     5:  "but" -- weighted 657
     6:  "be" -- weighted 647
     7:  "all" -- weighted 411
     8:  "been" -- weighted 394
     9:  "by" -- weighted 372
    10:  "are" -- weighted 356

(2,3) produces 261 words. Top 10:
     1:  "be" -- weighted 647
     2:  "been" -- weighted 394
     3:  "before" -- weighted 166
     4:  "after" -- weighted 99
     5:  "between" -- weighted 60
     6:  "better" -- weighted 51
     7:  "behind" -- weighted 50
     8:  "certainly" -- weighted 45
     9:  "being" -- weighted 45
    10:  "bed" -- weighted 40

(2,3,4) produces 25 words. Top 10:
     1:  "behind" -- weighted 50
     2:  "being" -- weighted 45
     3:  "began" -- weighted 25
     4:  "beg" -- weighted 13
     5:  "ceiling" -- weighted 10
     6:  "beginning" -- weighted 7
     7:  "begin" -- weighted 6
     8:  "beggar" -- weighted 6
     9:  "begging" -- weighted 4
    10:  "begun" -- weighted 4

(2,3,3,4) produces 5 words. Top 5:
     1:  "additional" -- weighted 4
     2:  "addition" -- weighted 3
     3:  "addicted" -- weighted 1
     4:  "adding" -- weighted 1
     5:  "additions" -- weighted 1

(6,6,8,3) produces 11 words. Top 10:
     1:  "note" -- weighted 38
     2:  "notes" -- weighted 9
     3:  "move" -- weighted 5
     4:  "moved" -- weighted 4
     5:  "novel" -- weighted 4
     6:  "movement" -- weighted 3
     7:  "noted" -- weighted 2
     8:  "moves" -- weighted 1
     9:  "moud" -- weighted 1
    10:  "november" -- weighted 1

(2,3,3,4,5) produces 0 words. Top 0: 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-26T09:24:24.470

```
Dictionary<char,char[]> btnDict = new Dictionary<char,char[]>()
        {
            {'0',new char[]{'A','B','C'}},
            {'1',new char[]{'D','E','F'}},
            {'2',new char[]{'G','H','I'}},
            {'3',new char[]{'J','K','L'}},
            {'4',new char[]{'M','N','0'}},
            {'5',new char[]{'P','Q'}},
            {'6',new char[]{'R','S','T'}},
            {'7',new char[]{'U','V','W'}},
            {'8',new char[]{'X','Y','Z'}},
            {'9',new char[]{'#','@','.'}}
        };

        public void PrintT9(string input)
        {
            char[] T9Suggestion = new char[input.Length];
            FillPosition(T9Suggestion, 0, input.ToArray<char>());
        }

        void FillPosition(char[] array, int position, char[] input)
        {
            char[] alphabets = btnDict[input[position]];
            foreach (char alphabet in alphabets)
            {
                array[position] = alphabet;
                if (position == array.Length - 1)
                {
                    string s = new string(array);
                    Console.Write(s+",");
                }
                else
                {
                    FillPosition(array, position + 1, input);
                }
            }

        }
    } 
```

[http://coding4geeks.blogspot.com/2015/01/t9-dictionary.html](http://coding4geeks.blogspot.com/2015/01/t9-dictionary.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T14:15:04.130

一种天真的方法是生成由给定数字序列产生的所有可能的字母组合。请注意，这些组合本质上是 N 个字母元组的[笛卡尔积](http://en.wikipedia.org/wiki/Cartesian_product)，每个元组对应一个数字，N 是单词的长度。要获得所有组合，您可以使用[`itertools.product`](http://docs.python.org/library/itertools.html#itertools.product)，例如：

```
itertools.product(*(letters(d) for d in digits)) 
```

where`letters`是一个函数，因此`letters('1')`返回`'abc'`等等，`digits`是代表一个单词的数字字符串。然后遍历您的单词列表并找到匹配项。

# php - php检查foreach中的值如果匹配输出匹配行之后的值

> ID：12074964
> 
> 赞同：0
> 
> 时间：2012-08-22T14:07:17.853
> 
> 标签：php, foreach

一些简单的代码，如果我有一个 json 数据。我想做点什么，首先检查`match string`json数据中的，如果有，输出匹配行之后的值，否则输出所有json数据。

示例1，匹配字符串为9，在json数据中匹配，输出匹配第7、3行之后的值。

```
$txt = '[{"a":"5"},{"a":"9"},{"a":"7"},{"a":"3"}]';
$array = json_decode($txt);
$match_string = '9';
foreach ($array as $data){      
    echo $data->a;//7, 3
} 
```

例2，匹配字符串为2，在json数据中不匹配，输出所有值，5,9,7,3。

```
$txt = '[{"a":"5"},{"a":"9"},{"a":"7"},{"a":"3"}]';
$array = json_decode($txt);
$match_string = '2';
foreach ($array as $data){      
    echo $data->a;//5, 9, 7, 3
} 
```

这个判断怎么做？我在 foreach 中做了类似的事情，只需忽略匹配字符串：

```
if($match_string == $data->a){
  continue;//fut this in the foreach ,get 5, 7, 3, but I need 7, 3, next value from 9.
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:15:07.667

您需要设置一个标志，告诉您是否找到了匹配项：

```
$txt = '[{"a":"5"},{"a":"9"},{"a":"7"},{"a":"3"}]';
$array = json_decode($txt);
$match_string = "2";
$found = false;
foreach ($array as $data) {
    if ($found) {
        echo $data->a;
    } else if ($data->a === $match_string) {
        // If we set $found *after* we have the opportunity to display it,
        // we'll have to wait until the next pass.
        $found = true;
    }
}
if (!$found) {
    // Display everything
    foreach ($array as $data) {
        echo $data->a;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T14:34:45.387

让它更短。

```
$txt = '[{"a":"5"},{"a":"9"},{"a":"7"},{"a":"3"}]';
$array = json_decode($txt);
$toFind = "9";
$mapped = array_map("current",$array);

if (!in_array($toFind,$mapped))
    echo implode(", ",$mapped);
else
    echo implode(", ",array_slice($mapped,array_search($toFind,$mapped)+1)); 
```

请注意，您不会使用该功能保留键
为性能而编辑

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T14:13:54.363

```
$matched = false;
foreach($array as $data){
    if($matched)
        echo $data->a;
    $matched = ($data->a==$matchString) || $matched;
}
if(!$matched)
    foreach($array as $data)
        echo $data->a; 
```

这是你的基本情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T14:22:35.527

下面的代码应该可以工作，前提是 $txt 是一个有序列表而不是数组字典（对不起；我显然是幻听了）。

```
<?php
    $txt = '[{"a":"5"},{"a":"9"},{"a":"7"},{"a":"3"}]';
    $array = json_decode($txt);
    $match_string = '9';

    $found = false;
    foreach ($array as $data)
    {
        if ($found) // Line before was lucky
        {
            print $data->a;
            break;
        }
        if ($data->a == $match_string)
            $found = true;
    }
    if (!$found)
    {
        // Output the whole object
    }
?> 
```

仍然不清楚当所需的匹配是数组中的最后一个条目时应该发生什么。将发生的情况是没有任何输出，因为已找到该行但没有继任者。

# backbone.js - 如何更新现有模型的属性？

> ID：12074966
> 
> 赞同：4
> 
> 时间：2012-08-22T14:07:19.400
> 
> 标签：backbone.js

我想更新从另一个视图传递的现有模型的**等级属性。**但是，我收到错误**Uncaught TypeError: Object # has no method 'set'**。

在视图的初始化部分，我有：

```
this.collection = new tgcollection({model : this.options.model }); 
```

我定义了一个函数**updateModel**旨在将属性值更新为：

```
updateModel: function(){
    var val= $("#textbox_id").val();
console.log(val);   
console.log(JSON.stringify(this.options.model));
JSON.stringify(this.options.model);
this.options.model.set({"rank": val});
this.render();
//
}, 
```

我哪里错了？我可以在控制台中看到值和模型及其先前的属性值。

该模型：

```
define(['jquery','underscore', 'backbone', 'deepmodel'], 
       function($,_, Backbone) {
         var model = Backbone.DeepModel.extend({

        // Default attributes for the model.
        defaults : {
            id: null,
                rank: null,

        },

        initialize: function(){
            _.bindAll(this,"update");
                    this.bind('change : cost', this.update);
        },

        update: function(){
            console.log(this.get("cost"));

        },
        // Remove this model from *localStorage*.
        clear : function() {
            this.destroy();
        },

    });
    return model; 
```

});

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-22T19:14:43.180

做就是了

```
this.model.set({"rank": val}); 
```

代替

```
this.options.model.set({"rank": val}); 
```

视图中的模型通过 this.model 而不是 this.options.model 访问

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T18:49:34.383

我喜欢一个很好的谜。这是我根据我所看到的最好的猜测。问题可能更久远。您在哪里打电话：

```
this.collection = new tgcollection({model : this.options.model }); 
```

`this.options.model`可能不是你想的那样。在实例化并传入 this.options.model 的视图之前查看视图会很有帮助。顺便说一句，将模型和集合传递到视图中，您始终可以将其缩短为`this.model`模型、集合，并且少数其他的特殊之处在于它们在传入后直接附加到视图。

我假设在您`updateModel()`的以下 SEEM 中起作用：

```
console.log(JSON.stringify(this.options.model));
JSON.stringify(this.options.model); 
```

错误出现在 上`set()`，而不是上面的行。所以假设你传入了一个模型。还是你？我的疯狂猜测是，`this.options.model`实际上只是模型的一个 json 对象。这可能解释了为什么当您对它进行字符串化时您在控制台中“看到”模型，但是当您调用`set()`它时 Backbone 会抗议。

而不是 JSON.stringify 来测试 this.options.model 尝试只是`console.log(this.options.model)`. 好吧，您不必真正进行测试。Backbone 在这个物体上找不到的事实`set()`是一个明显的迹象。如果您没有在控制台中看到 Backbone 模型的复杂性 - 它不是模型。

此外，对于测试和调试特别是模型，我倾向于使用该`model.toJSON()`函数快速检查它是否是模型，并且我看到了我期望的属性。

如果您有更多线索，请告诉我们。

# facebook - facebook 标签默认 http over https

> ID：12074968
> 
> 赞同：1
> 
> 时间：2012-08-22T14:07:22.827
> 
> 标签：facebook, security, https

我知道这种问题一直被问到，我已经设法处理所有的 https 问题等等。但我现在的问题是当用户点击我页面中的应用程序选项卡时，他们的安全浏览选项被禁用时，它们会自动重定向到 https 的 http url。（我的应用程序只能通过 https 运行）。

我尝试不将任何内容放入 Page Tab URL: 在应用程序设置中以及将 https url 放在那里，但它们都不会工作......

如何使我的选项卡默认重定向到 https url？

ps 我也试过用这样的代码重定向：

```
if($_SERVER['HTTPS']!=”on”)
{
   $redirect= “https://”.$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];
   header(“Location:$redirect”);
} 
```

也像这样：

```
if (!$_SERVER['HTTPS']) {
  header("HTTP/1.1 301 Moved Permanently");
  header('Location: https://[myappurl]');
  exit;
} 
```

但它没有用

**更新：问题已解决**
我需要在 facebook 开发人员的应用程序设置中填写 facebook 上的应用程序部分。我不知道为什么，但它奏效了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:14:10.817

> 我的应用程序只能通过 https 运行

你的意思是，只会“工作”（在某种意义上“我只能保证用户数据的安全”），还是只能通过 HTTPS*访问？*

> 如何使我的选项卡默认重定向到 https url？

用户选择通过 HTTP 浏览 facebook.com，因此 Facebook 会将您应用的 HTTP 版本加载到 iframe 中。因此，除非您的应用程序至少有一页只能通过 HTTP 访问——否则您不能。如果您确实有这样的页面，请使用 JavaScript 重定向到 HTTPS 版本，`top.location.href = "https://www.facebook.com/…"`

# asp.net-mvc - MVC 模态弹窗提交

> ID：12074970
> 
> 赞同：0
> 
> 时间：2012-08-22T14:07:25.437
> 
> 标签：asp.net-mvc, popup, jquery-post

这是一个独特的问题，而且我对 MVC 还很陌生，所以我会尽力解释它。我有一个带有第三方网格的页面，其中每一行都是一个“公司”对象。我的视图模型是一个`CompanyManager`对象，搜索参数为字段，列表填充网格。用户可以选择一行进行编辑，这会弹出一个弹出窗口。网格外的按钮也会打开相同的弹出窗口以创建新记录。

弹出窗口的内容在局部视图中，`AddEdit`它的模型是“公司”对象。与其他字段一起，还有另一个以“联系人”作为记录的第三方网格。从“联系人”的第三方网格中，我可以对记录进行序列化并在提交时传递它们。

我的问题在于在模式弹出窗口上提交，成功时应该关闭并在公司模型（或网格中的任何联系人）验证失败时保持打开状态。提交的最佳方式是什么？目前，我有一个调用 JavaScript 函数的按钮。在此功能中，我尝试过 jquery `$.submit`，但由于表单发布到`Index`，无论如何都会关闭弹出窗口。我也尝试过`$.post`发布到 Ajax 调用，但是我在控制器中为此返回了一个 JSON 结果，这没有像我预期的那样工作 - 它只是将 JSON 输出为 HTML。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:36:59.720

如果您像这样使用 JQUERY 进行 ajax 调用：

```
 $.ajax({
                    type: 'POST',
                    dataType: 'json',
                    url: '/url/', //url your posting to
                    data: $('#form-addedit').serialize(), //serialize the data in your form
                    success: function (result) {

                       //hide modal
                    }
                }); 
```

您应该在“结果”中获得 JSON 结果。请注意，如果它是“html”，则 dataType 会显示“json”，它会期望返回 html。结果将在成功函数调用中放入变量 result 中，然后您可以对变量做任何您想做的事情，并确定是否需要关闭模态框。

此外，请确保在您的控制器中，您确实收到了一个 ajax 调用 - Request.IsAjaxRequest()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:42:24.547

您可以通过使用常规按钮来提交表单来完成此操作，就像在任何页内表单上一样。设置按钮的 id，比如说“提交”。然后使用 jQuery 和 .click 函数验证表单。类似的东西

```
 $("#Submit").click(function () {
                var value = $("#your_field").val();
                if (/*check for invalid condition*/) {
                    $("#Error_message").show();
                    return false;
               return true;
            }); 
```

这应该检查您需要验证的每个字段的值。如果验证失败，则显示用户和错误消息并返回 false。这可以防止单击事件（表单提交）执行。如果验证检查通过，则返回 true 以允许单击事件，该事件将提交表单并关闭窗口。

# xpages - 没有文档 xpages 时隐藏类别

> ID：12074972
> 
> 赞同：0
> 
> 时间：2012-08-22T14:07:29.213
> 
> 标签：xpages

我有一个带有分类视图的 xpage，第一列显示了用户可能无权查看其下方文档的类别。所以他们应该从网络上的视图中隐藏起来。我相信有一种简单的方法可以使用类似......

```
<xp:viewPanel value="#{view1}" var="rowData" id="viewPanel1" rows="50">
    if (rowData.IsCategory()) {
        if (rowData.(WHATEVER THE PROPERTY IS THAT SHOWS # OF DOCUMENTS FOR THE CATEGORY)) < 1 {
            DON'T SHOW ROW
           }
    } 
```

但我找不到 # of 个文档的属性。有吗？如果不是，那么您会使用重复控件来处理空类别吗？如果这是处理此问题的正确方法，您能否指出一些使用重复控件处理此问题的代码示例。这对我来说是目前比较棘手的概念之一。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T15:31:18.853

视图本身（不是视图面板，实际的视图设计元素）有一个设置来抑制空类别。如果您为视图启用该设置，则绑定到它的任何视图面板都应遵守该设置。

# php - PHP未定义偏移量：比较循环中的-1

> ID：12074973
> 
> 赞同：0
> 
> 时间：2012-08-22T14:07:34.447
> 
> 标签：php

我收到此错误**未定义偏移量：-1。**

我很确定这是因为我将数组索引的值与前一个索引的值进行比较，所以在第一次迭代时它失败了，因为没有 -1 索引。

```
for ($i=0; $i<$rows_n; $i++) 
{
    formatTR($i, $rows, 'YEAR');
}

// Function
function formatTR($i, $rows, $year) 
{

    if ($rows[$year][$i] != $rows[$year][$i-1] ) {
        print "<tr class='header-year-tr'><td colspan='2'>{$rows[$year][$i]}</td></tr>";
    }

    print "<tr>";
} 
```

该函数检查 $rows[year][i] 的先前值是否与先前的 $rows[year][i-1] 相同。如果不同，它会打印出一个格式化的<TR>。

似乎避免此错误的一种方法是首先检查 $i 的值是否为零，但我想知道是否还有另一种方法。可能在我的条件下。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T14:13:06.033

我认为最简单的方法是检查 $i>0

```
if ($i > 0 && $rows[$year][$i] != $rows[$year][$i-1] ) {
  // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T14:10:49.130

“未定义的偏移量”几乎总是一个错误，这是罪魁祸首：

```
if ($rows[$year][$i] != $rows[$year][$i-1] ) {
-------------------------------------^^^^ 
```

确保你永远不会调用这一行，如果`$i == 0`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T14:14:20.683

```
function formatTR($i, $rows, $year) 
{
    if($i > 0){
        if ($rows[$year][$i] != $rows[$year][$i-1] ) {
        print "<tr class='header-year-tr'><td colspan='2'>{$rows[$year][$i]}</td></tr>";
        }
    }
    print "<tr>"; //not sure why you have this here.

} 
```

如果你想`$rows[$year][0]`打印一个`<tr>`：

```
function formatTR($i, $rows, $year) 
{
    if($i > 0){
        if ($rows[$year][$i] != $rows[$year][$i-1] ) {
          print "<tr class='header-year-tr'><td colspan='2'>{$rows[$year][$i]}</td></tr>";
        }
    } else {
        print "<tr class='header-year-tr'><td colspan='2'>{$rows[$year][$i]}</td></tr>";
    }
    print "<tr>"; //not sure why you have this here.

} 
```

# jar - 如何使用环服务器构建 clojure 应用程序

> ID：12074975
> 
> 赞同：7
> 
> 时间：2012-08-22T14:07:34.917
> 
> 标签：jar, clojure, leiningen, ring

我得到了带有环库的 clojure 项目。这是 project.clj：

```
(defproject words "1.0.0-SNAPSHOT"
:description "Websocket handler for sessions"
:dependencies [[org.clojure/clojure "1.4.0"]
  [org.clojure/clojure-contrib "1.2.0"]
  [aleph "0.3.0-alpha1"]
  [org.clojure/data.json "0.1.2"]
  [clj-redis "0.0.13-SNAPSHOT"]
  [compojure "0.6.2"]
  [clj-http "0.1.3"]]
:main words.play
;; Lein ring plugin will provide `lein ring server` functionality
;; (and some other relative to ring actions)
:plugins [[lein-ring "0.6.6"]]
:ring {:handler words.api/engine}) 
```

在开发环境中，我使用 2 个命令运行它： lein run server lein ring server 并且它可以工作。

对于生产环境，我想最小化依赖关系并将其构建到独立的 jar 中：

```
lein uberjar 
```

如何构建它并从一个 jar 文件运行两台服务器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T10:06:21.793

关于

```
:main words.play 
```

我建议您以类似的方式实现`-main`功能`words.play`

```
(defn -main [& args]
  (case (first args)
    "server1" (do (println "Starting server1") (start-server1))
    "server2" (do (println "Starting server2") (start-server2))
    (println "Enter server name, pls"))) 
```

请注意，这`:gen-class`在命名空间定义中是必需的：

```
(ns words.play
    (:gen-class)) 
```

实现`start-server1`并`start-server2`应该依赖于具体的框架：`(run-jetty ...)`for ring、`(start-http-server ...)`for aleph 等等（您可以在相关文档中找到更多信息）。

用法：

```
lein uberjar
## to start first server
java -jar my-project-1.0.0-SNAPSHOT-standalone.jar server1
## to start second one
java -jar my-project-1.0.0-SNAPSHOT-standalone.jar server2 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T16:10:21.770

最直接的方法是从启动应用程序的 clojure 源文件中预编译一个类。您的`-main`函数最终应该调用类似`(run-jetty #'engine {:port 8080})`.

如果您不熟悉 Clojure 提前编译（“aot”），这里有一个很好的教程：http: [//kotka.de/blog/2010/02/gen-class_how_it_works_and_how_to_use_it.html](http://kotka.de/blog/2010/02/gen-class_how_it_works_and_how_to_use_it.html)

然后是创建一个 shell 脚本来启动你的应用程序的`java -cp you-uber.jar words.Main`问题。

请注意，您的“应用程序启动器”类的名称和最终的 jar 名称是完全任意的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-22T04:43:57.563

你可以使用`lein ring uberjar`. 那将启动环服务器。`:init`您可以在lein-ring 提供的钩子中启动其他服务器。

# google-drive-api - Google Drive iOS 原生应用程序 URL 方案

> ID：12074977
> 
> 赞同：4
> 
> 时间：2012-08-22T14:07:36.900
> 
> 标签：google-drive-api

我发现可以从 AppStore 下载的用于谷歌驱动器的原生 iOS 应用程序支持 URL 方案：

```
googledrive:// 
```

*   是否有此方案的任何文档或在哪里可以找到如何使用谷歌驱动器原生 iOS 应用程序授权我的应用程序？
*   甚至可以通过这种方式授权应用程序吗？
*   还有其他方法可以通过网络浏览器进行授权吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T23:18:37.263

如果您想将 Google Drive 集成到您的 iOS 应用程序中，您应该使用支持 Google Drive[的 Google API 的 Objective-C 客户端库](http://code.google.com/p/google-api-objectivec-client/)。

对于授权，客户端库将使用 Web 视图来启动 OAuth 2 流。

您可以查看使用 Google Drive的[示例应用程序。](http://code.google.com/p/google-api-objectivec-client/source/browse/#svn/trunk/Examples/DriveSample)

至于 iOS 原生 Drive 应用，目前还没有办法与之交互。虽然如果我们这样做了，我们很可能会将这些功能添加到 Objective-C 客户端库中：）

# php - Restler API 框架安装

> ID：12074979
> 
> 赞同：3
> 
> 时间：2012-08-22T14:07:43.247
> 
> 标签：php, apache, api, rest, restler

我想开始使用 Restler 开发一个 Rest api，但是我找不到任何关于如何安装它的详细信息，此外，它似乎在 nginx 服务器上运行。

有没有办法在 apache 上运行这个框架？构建高质量 APIS 是否有其他替代方案？有没有关于安装这个框架的详细文档？

我必须能够在 apache 上运行这个框架并使用 php5.3

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:10:46.263

我正在为 API ( [api.hostingxs.nl](https://api.hostingxs.nl) ) 运行 restler ( 稍加修改)。它在带有 PHP 5.3 的 apache 上运行良好。只需从 github ( `git clone https://github.com/Luracast/Restler.git <yourdirectory>`) 克隆存储库并开始包含使用它的类（阅读手册）。

如果您需要更多指导，我可以发布一些示例代码，但如果您了解面向对象的 PHP，基本功能真的很容易。

首先，将所有请求重定向到您的 restler 域、文件夹到 index.php 并使用以下内容创建该文件：

```
require_once( "restler.php" ); # or whatever you need to link to
$r = new Restler;
$r -> handle();
# above is the basic functionality without any of your own things 
```

单击以下链接中的课程以阅读有关设置自己的课程的更多信息；[help.luracast.com/restler/examples/_002_minimal/readme.html](http://help.luracast.com/restler/examples/_002_minimal/readme.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T15:08:55.070

你必须启用 apache mod_rewrite

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T15:19:51.440

如果您想创建一个 RESTful API，那么我为此创建了一个轻量级框架：[https ://github.com/martinbean/api-framework](https://github.com/martinbean/api-framework)

# android - 用户单击主页按钮后将应用程序置于最前面

> ID：12074980
> 
> 赞同：23
> 
> 时间：2012-08-22T14:07:52.313
> 
> 标签：android

我的应用程序处于**运行模式[前台]**，用户单击主页按钮，将应用程序置于**后台[并且仍在运行]**。我的应用程序中有警报功能，它会启动。我想要的是当我的闹钟响起时，我想将我的后台运行应用程序置于前台并从它的最后状态开始。

```
 <application
            android:name="com.abc.android.state.management.MainEPGApp"
            android:icon="@drawable/icon"
            android:label="@string/app_name"
            android:largeHeap="true"
            android:logo="@drawable/app_logo" >
            <activity
                android:name=".SplashScreen"
                android:label="@string/app_name"
                android:launchMode="singleTop"
                android:screenOrientation="nosensor"
                android:theme="@style/Theme.Sherlock" >
                <intent-filter>
                    <action android:name="android.intent.action.MAIN" />
                    <category android:name="android.intent.category.LAUNCHER" />
                </intent-filter>
            </activity>
        <activity
                    android:name=".Starter"
                    android:configChanges="orientation|screenSize"
                    android:screenOrientation="behind"
                    android:launchMode="singleTop"
                    android:uiOptions="none"
                    android:windowSoftInputMode="adjustPan" />
</application> 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-08-22T14:26:31.230

```
Intent intent = new Intent(context, MyRootActivity.class);
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK|Intent.FLAG_ACTIVITY_SINGLE_TOP);
startActivity(intent); 
```

您应该将您的起始活动或**根**活动用于`MyRootActivity`.

这会将现有任务带到前台，而无需实际创建新 Activity。如果您的应用程序没有运行，它将创建一个实例`MyRootActivity`并启动它。

**编辑**

我添加`Intent.FLAG_ACTIVITY_SINGLE_TOP`到 Intent 以使其真正起作用！

**第二次编辑**

还有另一种方法可以做到这一点。您可以模拟应用程序的“启动”，就像当用户从可用应用程序列表中选择它时 Android 启动应用程序一样。如果用户启动一个已经在运行的应用程序，Android 只是将现有任务带到前台（这是您想要的）。像这样做：

```
Intent intent = new Intent(context, SplashScreen.class);
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); // You need this if starting
                                                //  the activity from a service
intent.setAction(Intent.ACTION_MAIN);
intent.addCategory(Intent.CATEGORY_LAUNCHER);
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-04-23T06:33:42.807

对我有用的组合是使用：

```
Intent bringToForegroundIntent = new Intent(context, RootActivity.class);
bringToForegroundIntent.setFlags(Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED | Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(bringToForegroundIntent); 
```

如果您在从启动器图标启动活动时检查设备上的日志，则这是通过启动应用程序或将其移回前台（例如，如果用户单击主页按钮）传递的意图。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-09-23T10:04:16.527

您可以使用以下代码将应用程序置于最前面：

```
private void bringApplicationToFront()
    {

        Log.d(TAG, "====Bringging Application to Front====");

        Intent notificationIntent = new Intent(this, MainActivity.class);
        notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_SINGLE_TOP);
        PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);
        try 
        {
            pendingIntent.send();
        }
        catch (CanceledException e) 
        {
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-01-07T10:32:32.873

我找到了一种将应用程序带到前台的新方法，它模仿单击图标来启动应用程序。

```
 PackageManager packageManager = context.getPackageManager();
    Intent intent = packageManager.getLaunchIntentForPackage(pkName);
    if (intent != null)
    {
            //模拟点击桌面图标的启动参数
            intent.setPackage(null);
         // intent.setSourceBounds(new Rect(804,378, 1068, 657));
            intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK|Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);
           context.startActivity(intent);

    } 
```

它对我有用，但是谁能告诉我为什么包必须为空

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-05-08T09:03:54.880

根据我的测试，要模仿 Launcher 的行为，关键是：

`intent.setPackage(null);`

后

`Intent intent = packageManager.getLaunchIntentForPackage(pkName);`

此线程中的其他方法在我的情况下不起作用。

感谢嘉庆的回答，因为我没有评论的权利，所以我发布了这个答案。我也不知道这背后的逻辑，我猜它与任务所有者有关。任何人都知道，很高兴知道。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-04-08T13:45:43.933

使用 ActivityManager 类，您可以将正在运行的任务放在前面

```
void bringToFront(){

 ActivityManager activtyManager = (ActivityManager)getSystemService(Context.ACTIVITY_SERVICE);
 List<ActivityManager.RunningTaskInfo> runningTaskInfos = activtyManager.getRunningTasks(3);
 for (ActivityManager.RunningTaskInfo runningTaskInfo : runningTaskInfos)
            {
              if (this.getPackageName().equals(runningTaskInfo.topActivity.getPackageName()))
                {
                     activtyManager.moveTaskToFront(runningTaskInfo.id, ActivityManager.MOVE_TASK_WITH_HOME);
                     return;
                 }
             }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-22T14:24:59.313

对于警报，您想看看启动[Android 服务](http://developer.android.com/reference/android/app/Service.html)

此服务将比您的应用程序更具弹性，后者可能会在后台被终止，并且可以在警报响起时触发将您的应用程序置于最前面（或如果它被终止，则重新启动它）的[意图。](https://stackoverflow.com/questions/736571/using-intent-in-an-android-application-to-show-another-activity)

# android - 如何判断是否检查（启用）特定的 TTS 引擎？

> ID：12074981
> 
> 赞同：9
> 
> 时间：2012-08-22T14:07:55.420
> 
> 标签：android, text-to-speech, android-2.2-froyo

此问题仅适用于 Android **2.2**：

以下屏幕截图显示了安装的 3 个不同的文本到语音引擎：

1.  PIco TTS（Android 自 Froyo 2.2 起的默认设置）
2.  IVONA 文字转语音总部
3.  SVOX 经典 TTS

在此屏幕截图中，您可以看到并非所有 3 个都被选中（启用）。相反，IVONA 未选中，只留下 Pico（隐含，因为它是硬编码的）和 SVOX（选中）。

![在此处输入图像描述](../Images/153d8223478b1cbacccb55f427a68fd3.png)

我希望能够以编程方式从我的应用程序中查询是否**[检查](https://stackoverflow.com/a/11985345/636571)**了特定的 TTS 引擎（例如 IVONA） （当然，假设我在编码时知道它们的包名称）。

在 Android **2.2**中，我所拥有的只是在将*Pico*选为默认值并检查*SVOX*`getDefaultEngine()`的情况下，这无济于事（换句话说，如果*Pico*是默认值，我怎么知道检查了*SVOX*？）

 ***我如何在 Android **2.2**中实现这一点？

这是可能吗？

**PS** Android 4.x (API >= 14) 引入了[getEngines()](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.4_r1.2/android/speech/tts/TtsEngines.java#TtsEngines.getEngines%28%29)这可能会让你相信这个问题已经为 ICS+ 解决了，但仔细检查会发现：

1.  [getEngines()](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.4_r1.2/android/speech/tts/TtsEngines.java#TtsEngines.getEngines%28%29)仅列出**已安装**，未**检查**（启用）的软件包。
2.  每个列出的包附带的[EngineInfo](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.4_r1.2/android/speech/tts/TextToSpeech.java#TextToSpeech.EngineInfo)仅提供名称、标签、图标、优先级以及是否是系统映像的一部分。换句话说，与 Android 2.2 中的限制相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:37:24.520

请参阅[Android TextToSpeech API 指南](http://developer.android.com/reference/android/speech/tts/TextToSpeech.html#getEngines%28%29)

`getEngines()`将列出所有已安装的引擎，以及每个引擎的一些信息。

`getDefaultEngine()`将给出用户默认选择的任何引擎的包名称。

将每个引擎的包名称（或您预先拥有的列表）与默认引擎的包名称进行比较，您将能够看到哪个被选中。

请注意，前一个功能仅在 API 级别 14 中可用，而第二个功能在 API 级别 8 中可用。***

# tfs - 如何避免源代码依赖层次导致的嵌套分支

> ID：12074984
> 
> 赞同：4
> 
> 时间：2012-08-22T14:07:59.610
> 
> 标签：tfs, branch, dependency-management

我们正在使用 TFS 2010，我们的依赖项/分支管理存在一些非常烦人的问题。

乍一看，我们的问题很常见。我们有`AppServer`和。两者都依赖于. 还有两个额外的限制：`WebClient``WinClient``WebClient``WinClient``AppServer`

1.  我们更喜欢包含使用依赖项的特定版本
2.  我们更喜欢包含源代码而不是二进制文件，因为它更容易实现和测试`AppServer`来自特定来源的更改，例如`WinClient`.

我们选择以下文件夹结构：

```
\
|-AppServer (1)
|-WebClient
    |-Dependencies
        |-AppServer (2)
    |-Sources
|-WinClient
    |-Dependencies
        |-AppServer (3)
    |-Sources 
```

`AppServer`s`(2)`和`(3)`是 的分支（作为一级分支）`AppServer (1)`。这一切都运行良好，符合我们的开发场景。

现在，麻烦来了。假设我们想在 上实现“branch-per-release”模式`WebClient`，这意味着将整个`WebClient`层次结构分支到另一个地方。我们**不能**这样做，因为 TFS2010 不允许嵌套的第一类分支。

为了增加挑战，我们设想分支层次结构（仅适用于`WebClient`，并且我们还有其他几个依赖和依赖项目）是这样的：

```
WebClient
    |-Client1
    |    |-feature-1
    |    |-feature-2
    |    |-v1 Release
    |    |   |-v1 hotfix1
    |    |   |-v1 hotfix2
    |    |-v2 Release
    |        |-v1 hotfix1
    |        |-v1 hotfix2
    |
    |-Client2
         |-feature-1
         |-feature-2
         |-v1 Release
         |   |-v1 hotfix1
         |   |-v1 hotfix2
         |-v2 Release
             |-v1 hotfix1
             |-v1 hotfix2 
```

我们有哪些选择？我能想到几个：

1.  将一流的分支转换为文件夹。这将允许我们嵌套分支，但我们将失去跟踪和可视化，这是我不喜欢的。
2.  我们可以以某种方式根据依赖关系重构我们的代码。但我试着想了一段时间，仍然没有看到答案。
3.  我们可以从代码依赖切换到二进制依赖，但这会减慢我们的开发速度。

有什么我想念的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T03:38:59.173

几个想法：

1）您可以将您的 AppServer 分支与您的 WebClients 分开并且不嵌套，并且只需使用 TFS 中的工作区映射功能来模拟您通过将 AppServer 分支到客户端分支中定义的内容。这将允许开发人员选择他们想要的 AppServer 分支并将其嵌套到他们的本地文件结构中的正确位置以促进他们的工作。

2）您关于使用二进制文件会减慢开发速度的说法似乎是我将进一步探索并尝试衡量和量化的内容。如果您的 AppServer 和客户端之间有明显的中断，那么我希望它们之间*没有*依赖关系，而是一些可以由 svcutil 或其他工具生成的代理代码。如果是这种情况，并且您在某个进程中托管 AppServer 并在另一个进程中与客户端通信，我不明白为什么您需要从一开始就实现原始结构。这似乎是不必要的耦合，我想知道为什么要更详细地完成它。

# android - 异步任务 Android 中的 java.util.concurrent.RejectedExecutionException

> ID：12074985
> 
> 赞同：4
> 
> 时间：2012-08-22T14:08:02.703
> 
> 标签：android, multithreading, listview, android-asynctask

```
public View getView(final int position, View convertView, ViewGroup parent) {
    SectionHolder sectionHolder = null;
    ViewHolder holder = null;
    convertView = listAdapter.getView(getIndexForPosition(position),
                convertView, parent);
    convertView.setTag(contactsIds[getIndexForPosition(position)]);
    holder = new ViewHolder();
    holder.txtTitle = (TextView) convertView
                .findViewById(R.id.list_item_title);
    holder.id = contactsIds[getIndexForPosition(position)];
    new ThumbnailTask(holder,contactsIds[getIndexForPosition(position)]).execute();
    return convertView;
}

private class ThumbnailTask extends AsyncTask<Void, Void, Integer> {
    private String mId;
    private ViewHolder mHolder;
    public ThumbnailTask(ViewHolder holder, String id) {
        mId = id;
        mHolder = holder;
    }

    @Override
    protected Integer doInBackground(Void... params) {
        // TODO Auto-generated method stub
        int drawableId = getContactStatus(mHolder.id);
        // Log.i("DRAWABLE",drawableId+"");
        return drawableId;
    }

    protected void onPostExecute(Integer drawableId) {
        if (mHolder.id.equals(mId)) {
            if (drawableId != 0) {
                if (UpdateStatusService.user == 1) {
                    mHolder.txtTitle.setCompoundDrawablesWithIntrinsicBounds(0, 0,drawableId, 0);
                } else {
                    mHolder.txtTitle.setCompoundDrawablesWithIntrinsicBounds(0, 0,R.drawable.ic_action_quetion, 0);
                }
            } else {
                    mHolder.txtTitle.setCompoundDrawablesWithIntrinsicBounds(0,0, android.R.color.transparent, 0);
            }
        }
    }
}
static class ViewHolder {
    public TextView txtTitle;
    public String id;
} 
```

这是我的列表视图getView的适配器代码。

ListView 包含来自 android 的联系人列表。

但我得到**java.util.concurrent.RejectedExecutionException** 异步任务基本上是从服务器获取图像，如果有任何数字与将包含一个图像的服务器数据匹配，否则将不设置。

那么我应该怎么做才能避免这个异常呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-22T14:22:26.303

`AsyncTask`线程被放置在工作队列中。该工作队列限制了您可以实例化的线程数。当你超过最大值时，它会给你一个`RejectedExecutionException`.

解决方案是重构您的代码以不实例化线程`getView()`或检查控制当前行的线程是否已经启动。`getView()`被非常频繁地调用，因此如果您不检查线程当前是否在一行上运行，您最终将超过允许的线程数。

下载链接：[https ://www.dropbox.com/s/pvr9zyl811tfeem/ListViewImageCache.zip](https://www.dropbox.com/s/pvr9zyl811tfeem/ListViewImageCache.zip)

# java - JTextArea 中的滚动条事件

> ID：12074987
> 
> 赞同：2
> 
> 时间：2012-08-22T14:08:05.840
> 
> 标签：java, swing

我有一个文本区域，每当滚动条滚动时，我都想调用一个方法。在什么事件上我应该调用该方法？我试过了：

```
private void jScrollPane1MouseReleased(java.awt.event.MouseEvent evt) {
      //execute();  
     System.out.println("Scroller Moved");       
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T14:20:10.690

您想`AdjustmentListener`在 JScrollBar 上使用 （选择您要在其上收听移动的那个）。这是在竖线上聆听的示例。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class TempProject extends JPanel{

    public static void main(String args[])    {
        EventQueue.invokeLater(new Runnable()
        {
            public void run()
            {
                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
                JPanel panel = new JPanel();
                panel.setPreferredSize(new Dimension(300, 2000));
                JScrollPane pane = new JScrollPane(panel);
                pane.setPreferredSize(new Dimension(400, 300));
                pane.getVerticalScrollBar().addAdjustmentListener(new AdjustmentListener(){

                    @Override
                    public void adjustmentValueChanged(AdjustmentEvent e) {
                        System.out.println("Hi Mom!");
                    }});

                frame.setContentPane(pane); 
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T14:11:33.810

您应该改用 mouselistener 事件。

如果您想了解更多信息，请查看此处 - [http://docs.oracle.com/javase/tutorial/uiswing/events/mouselistener.html](http://docs.oracle.com/javase/tutorial/uiswing/events/mouselistener.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T14:16:06.413

使用 mouseclicked 方法，然后使用 getX() 和 getY() 获取坐标，然后使用 if 测试，测试坐标是否在 JScrollPane 的尺寸范围内。只要记住实现 mouselister 并添加所有继承的抽象方法 :)

# java - 从 Tomcat 服务器迁移到 JBoss 时出现数据源错误？

> ID：12074999
> 
> 赞同：0
> 
> 时间：2012-08-22T14:08:28.883
> 
> 标签：java, tomcat, jboss

如果有人可以在这里帮助我，我将不胜感激。我已经使用 Apache Tomcat 开发了一个应用程序，并且它已部署并正在运行。但是，当我想将应用程序迁移到 JBoss 并在该服务器上部署 WAR 文件时，我遇到了数据源错误。我是 JBoss 的新手，我不知道接下来应该做什么来解决这个问题。如果有人能指导我完成这个过程，我将不胜感激！

我的 DBConnector 类代码：

```
import java.sql.*;
import java.util.Properties;
import java.io.InputStream;
import javax.naming.InitialContext;
import javax.sql.DataSource;
import org.apache.tomcat.dbcp.dbcp.BasicDataSourceFactory; 
```

公共类 DbConnector {

```
private static String JDBC_DRIVER = "jdbc.driver";
private static String JDBC_URL = "jdbc.url";
private static String JDBC_USER = "jdbc.user";
private static String JDBC_PASSWORD = "jdbc.password";
private static Properties props = new Properties();
private Connection connection = null;
private Statement stat = null;
private ResultSet rs = null;
private static volatile DataSource dsObj;
static {
    try {
        // a way to retrieve the data in
        // connection.properties found
        // in WEB-INF/classes
        InputStream is = DbConnector.class.getResourceAsStream("/connection.properties");
        props.load(is);
        //PropertyConfigurator.configure("log4j.properties");
    } catch (Exception e) {
        e.printStackTrace();
    }
    try {
        Class.forName(props.getProperty(JDBC_DRIVER)).newInstance();
    } catch (Exception e) {
        e.printStackTrace();
    }
}

private static void initialize() {
    try {
        dsObj = BasicDataSourceFactory.createDataSource(props);
    } catch (Exception e) {
        e.printStackTrace();
    }
}

/**
 * Constructor
 */
public DbConnector() {
    try {
        initialize();
        this.connection = getConnection();
    } catch (Exception e) {
        e.printStackTrace();
    }
}

/**
 * Returns DB Connection
 * @return Connection
 * @throws SQLException
 */
public static Connection getConnectionFromPool() throws SQLException {
    Connection connection = null;
    // checking for null singleton instance
    if (null == dsObj) { // synchronized over class to make thread safe
        synchronized (DbConnector.class) {
    // double checking for making singleton instance thread safe
            if (null == dsObj) {
                initialize();
            }
        }
    }
    // getting connection from data sourceconnection = dsObj.getConnection();
    return connection;
}

/**
 * Get Connection
 * @return Connection object
 * @throws SQLException
 */
private Connection getConnection() throws SQLException {
    return DriverManager.getConnection(props.getProperty(JDBC_URL), props.getProperty(JDBC_USER), props.getProperty(JDBC_PASSWORD));
}

/**
 * Execute Query
 * Purpose: SELECT
 * @param sql SQL Statement
 * @return ResultSet
 */
public ResultSet executeQuery(String sql) {
    try {
        if (connection == null) {
            return null;
        }
        stat = connection.createStatement();
        rs = stat.executeQuery(sql);
        return rs;
    } catch (Exception e) {
        e.printStackTrace();
        return null;
    }
}

/**
 * Execute Update
 * Purpose: Insert, Update, Delete
 * @param sql SQL Statement
 * @return int No. of Rows Updated
 */
public int executeUpdate(String sql) {
    try {
        if (connection == null) {
            return -1;
        }
        stat = connection.createStatement();
        return stat.executeUpdate(sql);
    } catch (Exception e) {
        //e.printStackTrace();

        return -1;
    }
}

/**
 * Execute
 * Purpose: Create, Drop
 * @param sql statement to update.
 * @return true is statement execute sucessfuly and false otherwise
 */
public boolean execute(String sql) {
    try {
        if (connection == null) {
            return false;
        }
        stat = connection.createStatement();
        return stat.execute(sql);
    } catch (Exception e) {
        //e.printStackTrace();

        return false;
    }
}

/**
 * Close ResultSet
 */
public void closeResultSet() {
    if (rs != null) {
        try {
            rs.close();
        } catch (Exception e) {
            //e.printStackTrace();

        }
    }
}

/**
 * Close Statement
 */
public void closeStatement() {
    if (stat != null) {
        try {
            stat.close();

        } catch (Exception e) {
            e.printStackTrace();
            //log.error(e);
        }
    }
}

/**
 * Close Connection
 */
public void closeConnection() {
    try {
        connection.close();
    } catch (Exception e) {
        e.printStackTrace();
    }
}

/**
 * Close
 * Connection, Statement and Resultset     *
 */
public void close() {
    try {
        if (rs != null) {
            rs.close();
        }
    } catch (SQLException e) {
        e.printStackTrace();
    }
    try {
        if (stat != null) {
            stat.close();
        }
    } catch (SQLException e) {
        e.printStackTrace();
    }
    try {
        if (connection != null) {
            connection.close();
        }
    } catch (SQLException e) {
        e.printStackTrace();
    }
} 
```

}

在线阅读后，我知道我必须对 context.xml 和 web.xml 文件做一些事情。

有人可以给我一些示例代码或给我一些帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T14:18:16.117

我做的第一件事就是去掉你自己的连接池代码，使用[容器提供的那个](https://community.jboss.org/wiki/ConfigDataSources)。您基本上定义了 DataSource，并且容器（Tomcat/JBOSS）将通过 JNDI 将其提供给您的应用程序。定义后，您可以在 web.xml 中引用它。谷歌搜索操作方法。

```
<resource-ref>  
  <description>Customer Database</description>  
  <res-ref-name>jdbc/CustomerDB</res-ref-name>  
  <res-type>javax.sql.DataSource</res-type>  
  <res-auth>Container</res-auth>  
</resource-ref> 
```

**更新**

如果您仍然想按照自己的方式进行这项工作，请确保您的类路径中包含 jar 文件`org.apache.tomcat.dbcp.dbcp.BasicDataSourceFactory`（WEB-INF/lib）。并发布你得到的堆栈跟踪。

**更新 2**

错误非常明显

**部署 URL 文件的***Web 映射已存在***：/C:/Users/Dane/Desktop/jboss-as-distribution-6.0.0.Final/jboss-6.0.0.Final/server/default/tmp/vfs/automountec9d6360903186ac/SurveyApplication .war-a018e9cb945f462b/**

 **似乎您已经使用相同的上下文路径部署了另一个应用程序。**