# StackOverflow 问答 11876000-11876999

# php - PHP从3个变量中获得最大的数字

> ID：11876000
> 
> 赞同：2
> 
> 时间：2012-08-09T02:34:39.277
> 
> 标签：php, numbers, highest

> **可能重复：**
> [返回具有最高值的变量？](https://stackoverflow.com/questions/5737305/return-variable-with-the-highest-value)

我试图想出一种简单的方法来找到 3 个变量中的最大数字。

```
$1 = 100
$2 = 300
$3 = 200 
```

在这 3 个变量中，我想将一个新变量设置为最高的变量 ($2)

所以：

```
$highest_number = 300 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-09T02:36:51.170

```
$highest_number = max($1, $2, $3); 
```

或者

```
$values = array($1, $2, $3);
$highest_number = max($values); 
```

更多信息可以在快速参考中找到[max](http://php.net/manual/en/function.max.php)

# svn - TortoiseSVN checkout 删除了我所有的本地代码，然后说“OK”

> ID：11876001
> 
> 赞同：1
> 
> 时间：2012-08-09T02:34:41.973
> 
> 标签：svn, tortoisesvn, visual-sourcesafe

我来自**Visual SourceSafe**背景，所以请多多包涵。我正在尝试实现**TortoiseSVN**范式转变。顺便说一句，我有**VisualSVN**，但我没有用它来制造我现在遇到的这个问题。

他们都有一个共同点，那就是他们都需要消息框的自由帮助，以达到“嘿，我要从某个*位置*吹走大量文件。这样可以吗？”的效果。

我正在工作和在家中编写代码。我是唯一的开发者。在办公室的工作日结束时，我做了一个*检查*，呃，`Commit`我在白天所做的所有更改。那工作得很好。

当我回到家时，我想做的只是相当于在 VSS中*获取。*我只是想用更新的存储库中的文件替换任何本地文件。就这样。我希望没有什么复杂的。

所以我`Update`在我的顶级工作文件夹上做了一个（顺便说一下，这个词在方向上是模棱两可的）。抱怨一堆文件有冲突。请注意，我不想合并，我想用存储库中的内容覆盖本地。所以现在我的外壳覆盖图标是，呃，是彩虹的所有颜色。

所以然后我用谷歌搜索并阅读答案是做 a`Check Out`然后 a `Revert`。所以我从**存储库浏览器**的根文件夹中进行了检查，然后 TortoiseSVN 开始**删除**我工作目录中的几乎所有文件！然后它说**好的**，任务完成，太好了，这就是你想要的，你打赌！

好的，任何人都可以以对旧 VSS 用户有意义的方式解释这一点吗？我没有阅读 200 页的书（也许我的答案在第 176 页的第 3 段），但我做了谷歌，并且有很多关于恢复用户意外删除的文件的点击，但没有解释 TortoiseSVN 的删除行为.

**概括：**

1.  为什么这样做？
2.  当我下班回家时，我怎样才能可靠地执行*Get操作？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T08:35:21.990

在我看来，您可能遇到了这样一种情况：您的工作副本是一个科学怪人混合的文件目录，该目录早于您使用 SVN 和“正确的”SVN 工作副本。您必须进行结帐然后还原的事实让我感到很奇怪，因为结帐将始终为您提供干净的工作副本，而不会更改文件。我怀疑您签出了一个非空目录，通常不建议这样做（在某些情况下这样做是有意义的，但我认为在这种情况下不是这样）。

我认为您需要做的是签出一个新目录。然后，您应该有一个没有更改的原始工作副本。checkout 目录应该是创建的新目录的名称。我怀疑您已经删除了路径的最后一位以强制签出到当前目录。这是一个具体的例子：

*   您要结帐的网址是`http://server/svn/trunk`
*   您已经有一个目录`c:\source`，其中包含其他项目。在资源管理器中右键单击并选择 SVN Checkout。
*   输入 URL 并在目录字段中输入`c:\source\trunk`。如果您要进入，`c:\source`那么 SVN 会尝试将现有内容与结帐中的内容合并，这很少是您想要的。

一旦你有了一个原始的工作副本，你就不应该得到你所看到的惊喜。当您更新时，您只会遇到冲突，即其他人更改了文件，而您自己更改了文件。*除非*您手动将文件复制到已独立添加到 SVN 的工作副本中，否则对正确工作副本的更新永远不会破坏您创建的任何文件。

# castle - 使用 Castle 的自代理构造函数？

> ID：11876008
> 
> 赞同：0
> 
> 时间：2012-08-09T02:35:08.793
> 
> 标签：castle, castle-dynamicproxy, dynamic-proxy

类的构造函数是否可以在自身周围包装代理？不幸的是，这段代码会导致 StackOverflowException。

```
void Main()
{
    var thing = new Thing();
}

public static readonly ProxyGenerator generator = new ProxyGenerator();

public class Thing
{
    public Thing()
    {
        generator.CreateClassProxyWithTarget(this);
    }
} 
```

我想要某种方法来保证我的类的新实例被包装在代理中，而不是必须创建某种创建代理实例的工厂。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T03:30:11.980

据我所知，不支持您想要的。如果你有一个公共的、无参数的构造函数，任何人都可以创建你的类。

现在，这并不意味着你不能得到你想要的——它只是需要更多的工作。您可以在范围为内部的类上有一个“初始化”标志（只有程序集中的类可以访问它）。工厂将用于创建代理实例并将初始化标志设置为 true。只有工厂会设置这个标志。类中的每个公共方法都可以执行检查以确保“已初始化”标志为真，如果为假则抛出异常（这是“更多工作”的来源——您必须手动将此检查添加到每种方法）。由于它的范围，新的实例无法设置初始化标志。

这不会阻止某人新建您的课程，但至少会阻止他们使用它。至于序列化，您可能希望拥有一些仅数据类并序列化那些而不是代理类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T22:07:35.557

我最接近的是创建一个返回代理的单例。这是一个例子：

```
public class MySingleton
{
    protected static MySingleton _instance = null;
    public static MySingleton Instance
    {
        get
        {
            if (_instance == null)
            {
                if (Simple.UseDynamicProxies)
                    _instance = Simple.GetProxy(typeof(MySingleton));
                else
                    _instance = new MySingleton();
            }
            return _instance;
        }
    }
} 
```

请注意，Simple 类包含实际创建代理、拦截和日志记录等的“繁重工作”以及 UseDynamicProxies 标志，因此我可以在整个解决方案中打开/关闭代理使用。

# c# - 同一个自定义控件的不同引用名称

> ID：11876009
> 
> 赞同：0
> 
> 时间：2012-08-09T02:35:10.310
> 
> 标签：c#, asp.net, html, custom-controls

当我们编写自定义控件时，例如：

```
[assembly: TagPrefix("Pro.UI", "pro")]
public class ProTextBox : TextBox 
{
 ...
} 
```

在 HTML 编码中，我们有义务引用控件如下：

```
<pro:ProTextBox runat="server" ... etc. 
```

我的问题是：

有没有办法在 HTML 中引用控件，消除前缀“Pro”，如下所示：

```
<pro:TextBox runat="server" ... etc. 
```

此致。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T02:41:10.983

在页面中使用它时，您必须`class`将自定义控件命名为您想要的名称。

笔记：

为了避免冲突，我`namespace`在派生时使用了完全限定的`TextBox`

做这样的事情：

```
[assembly: TagPrefix("Pro.UI", "pro")]
public class TextBox : System.Web.UI.WebControls.TextBox
{
 ...
} 
```

然后：

```
<pro:TextBox runat="server" ... etc. 
```

# php - 如何使用ups api获取pdf中的标签？以及如何直接在网络上打印？（php）

> ID：11876011
> 
> 赞同：3
> 
> 时间：2012-08-09T02:35:35.400
> 
> 标签：php, pdf, label, tracking, ups

我已成功获取 gif 文件的标签。如何获取 pdf 格式。我已多次阅读有关 labelimageformat 的指南。它说：

“要为 EPL2 格式的标签生成标签的标签打印方法代码使用 EPL，对于 SPL 格式的标签使用 SPL，对于 ZPL 格式的标签使用 ZPL，对于图像格式使用 GIF，对于 Star Printer 格式的标签使用 STARPL。

对于没有退货服务的货件，有效值为 GIF、ZPL、EPL 和 SPL。对于带有 PRL 退货服务的货件，有效值为 EPL、ZPL、SPL、STARPL 和 GIF。"

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T06:35:29.560

UPS 不退回 PDF 标签。您必须将返回的 GIF 转换为 PDF。您可以使用 ImageMagick 的“转换”命令或使用 GhostScript 轻松完成此操作。

这是“转换”的示例：

```
convert  -bordercolor none -border 100x100  -page Letter ups.gif ups.pdf 
```

# c# - 如何组织 XNA 内容项目以允许在运行前和运行时编辑游戏脚本

> ID：11876022
> 
> 赞同：2
> 
> 时间：2012-08-09T02:37:21.043
> 
> 标签：c#, xna

现在在我的 XNA 解决方案中，我有 2 个项目，我的主要 XNA 游戏项目和一个 XNA 内容项目。我开始将游戏的某些方面暴露给脚本引擎，主要目的是让自己能够更改行为和数据，而无需关闭游戏、重新编译、重新启动。

现在，当我进行新构建时，它会在 C:\solution\project\bin\x86\Debug 目录中创建二进制文件，并将内容项目中的所有数据复制到 C:\solution\project\bin\x86\Debug \内容。我要解决的问题是把我的游戏脚本放在哪里，这样它们既可以在运行时被游戏访问，又可以在运行之前和运行期间进行编辑，并且不会冒更改被下次重建/复制过程覆盖的风险。

如果脚本在我的内容项目中并且我在运行时对其进行了编辑，我可以看到加载脚本更改的唯一方法是检查 C:\solution\project\bin\x86\Debug\Scripts 并将其与C:\solution\projectContent\Scripts 中的相同脚本文件并加载较新的脚本文件。这看起来很可疑，需要硬编码路径。

有没有更优雅的方法来处理这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:39:07.837

您甚至无法在 Windows Phone 或 XBox 上运行时获得这些路径 - 所以您大概是在询问 Windows 上的 XNA（如果是，请在您的问题中澄清这一点）。

如果您的文件不需要以任何方式由 Content Pipeline 处理，我建议您将它们放在由[Environment.SpecialFolder.ApplicationData](http://msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx)标识的公共位置。该值适用于 XNA 框架（尽管我不确定它在 PC 以外的平台上指向何处）。

至于您的开发设置，您可以[使用通配符](https://stackoverflow.com/a/11620187/802203)和[环境变量](http://msdn.microsoft.com/en-us/library/ms171459%28v=vs.80%29.aspx)包含这些文件。

如果这些文件不存在，一个简单的预构建批处理文件可以将这些文件复制到公共位置 - 这样检查您的代码的人就不需要手动复制这些文件。

希望这可以帮助！

# winforms - 单击按钮时应用程序窗口冻结（C#）

> ID：11876025
> 
> 赞同：0
> 
> 时间：2012-08-09T02:37:46.553
> 
> 标签：winforms, visual-studio-2010, freeze

我正在开发一个 Windows 应用程序：

*   连接到 FTP 并发送/接收文件
*   通过 SSH 连接到服务器并发送命令
*   创建 Excel 报告
*   和其他一些东西

所有这些任务都在用户单击按钮时开始。问题是点击按钮后：

*   光标变成手形图标
*   窗口冻结，用户不能做任何事情（甚至移动它）
*   甚至“请稍候”动画也没有播放，进程日志也几乎没有显示

![在此处输入图像描述](../Images/80464be744e2103eeadfb5380d463456.png)

我应该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T02:45:29.113

您需要在后台线程上完成您的工作。开始使用后台线程的最简单方法是[后台工作](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)线程。

当你在后台线程上工作时，如果你想更新 GUI 组件，你需要调用主线程。后台工作人员有一个[报告进度](http://msdn.microsoft.com/en-us/library/ka89zff4.aspx)方法，可以让您执行此操作。

阅读线程的基础知识并试一试。如果您遇到问题，请返回并发布带有特定代码示例的新问题。

# xcode - iPhone上奇怪的崩溃错误

> ID：11876029
> 
> 赞同：0
> 
> 时间：2012-08-09T02:37:59.147
> 
> 标签：xcode, ios5

我正在开发我的第一个 iPhone 应用程序，到目前为止它运行良好，但突然它开始崩溃并且我不断收到此错误：

> 2012-08-13 08:39:50.000 OGLGame[36085:10a03]-[ **NSCFString setFrame:]：无法识别的选择器发送到实例 0x7368300 2012-08-13 08:39:50.031 OGLGame[36085:10a03]（0 CoreFoundation
> __except 0x0166203ePreprocesse + 206 1 libobjc.A.dylib
> 0x01c7fcd6 objc_exception_throw + 44 2 CoreFoundation
> 0x01663cbd -[NSObject doesNotRecognizeSelector:] + 253 3
> CoreFoundation 0x015c8ed0 __ *forwarding*** + 432 4 CoreFoundation 0x015c8cb2 _CF_forwarding_prep_0 + 50 5 OGLGame 0x00004673 -[EAGLView setupScore] + 355 6 OGLGame
> 0x0000335b - [EAGLView initGame] + 299 7 OGLGame
> 0x00003217 -[EAGLView initWithCoder:] + 1047 8 UIKit
> 0x00a48135 -[UIClassSwapper initWithCoder:] + 243 9 UIKit
> 0x00b47c6e UINibDecoderDecodeObjectForValue + 2276 10 UIKit
> 0x00b47383 -[UINibDecoder decodeObjectForKey:] + 117 11 UIKit
> 0x00a47cad -[UIRuntimeConnection initWithCoder:] + 187 12 UIKit
> 0x00b47c6e UINibDecoderDecodeObjectForValue + 2276 13 UIKit
> 0x00b4767b UINibDecoderDecodeObjectForValue + 753 14 UIKit
> 0x00b47383 -[UINibDecoder decodeObjectForKey:] + 117 15 UIKit
> 0x00a47105 -[UINib instantiateWithOwner:options:] + 817 16 UIKit
> 0x00a48eb7 -[NSBundle(UINSBundleAdditions) loadNibNamed:owner:options:] + 157 17 用户界面套件
> 0x00825ce1 -[UIApplication _loadMainNibFileNamed:bundle:] + 58 18 UIKit 0x00825ff8 -[UIApplication _loadMainInterfaceFile] + 225 19 UIKit 0x0082517f -[UIApplication _runWithURL:payload:launchOrientation:statusBarStyle:statusBarHidden:] + 279 20 UIKit 处理事件:withNewEvent:withNewEvent 0x008 ] + 1027 21 UIKit 0x00834c38 -[UIApplication sendEvent:] + 68 22 UIKit
> 0x00828634 _UIApplicationHandleEvent + 8196 23 GraphicsServices
> 0x03af7ef5 PurpleEventCallback + 1274 24 CoreFoundation
> 0x01636195 **CFRUNLOOP_IS_CALLING_SOUT_FUNCTION_A** + 53 25 CoreFoundation 0x0159aff2 __CFRunLoopDoSource1 + 146 26 CoreFoundation 0x015998da __CFRunLoopRun + 2218 27 CoreFoundation
> 0x01598d84 CFRunLoopRunSpecific + 212 28 CoreFoundation
> 0x01598c9b CFRunLoopRunInMode + 123 29 UIKit
> 0x00824c65 -[UIApplication _run] + 576 30 UIKit
> 0x00826626 UIApplicationMain + 1163 31 OGLGame
> 0x000029c4 main + 116 32 OGLGame
> 0x00002945 开始 + 53 33 ???
> 0x00000001 0x0 + 1)

这是我认为引发错误的函数：

> -（无效）setupScore{
> 
> ```
> scoreLabel = [NSString stringWithFormat:@"foo"];
> scoreLabel.frame = CGRectMake(262, 250, 100, 40);
> [scoreLabel setText: scoreString];
> 
> //normally you'll want a transparent background for your label
> scoreLabel.backgroundColor = [UIColor clearColor]; 
> 
> //you can use non-standard fonts
> [scoreLabel setFont:[UIFont fontWithName:@"TimesNewRoman" size: 1.0f]];
> 
> //change the label's text color
> scoreLabel.textColor = [UIColor whiteColor];
> 
> //you can even create a drop shadow on your label text
> /*myLabel.layer.shadowOpacity = 0.6;   
>  myLabel.layer.shadowRadius = 0.0;
>  myLabel.layer.shadowColor = [UIColor blackColor].CGColor;
>  myLabel.layer.shadowOffset = CGSizeMake(1.0, 1.0);*/
> 
> //add it to your view
> scoreLabel.transform = CGAffineTransformMakeRotation(89.53);
> [self addSubview:scoreLabel];  } 
> ```
> 
> -（无效）resetScore { score = 0; scoreLabel.textColor = [UIColor blackColor]; [分数标签发布]；}
> 
> -(void)drawScore{
> [scoreLabel setText: scoreString]; }

有谁知道如何解决这个奇怪的崩溃？

如果您需要更多代码，请告诉我，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T21:23:58.820

根据您发布的堆栈，很可能在`[EAGLView setupScore]`其中有一个地方您正在将一个变量分配为具有 just 的东西（可能是一个`NSString`）`alloc`，而不是将其`init`方法的返回分配给同一个 var。

```
// this is WRONG!!
NSString *aString = [NSString alloc];
[aString initWithFormat:@"foo"];

// this is correct
NSString *aString = [[NSString alloc] initWithFormat:@"foo"];

// even better
NSString *aString = [NSString stringWithFormat:@"foo"];
// (class methods named in this manner (start with name of class) 
// take care of alloc and init for you) 
```

原因是 init 方法被允许返回一个与 alloc 返回完全不同的指针，并且这个新指针是有效的，旧的不是。**总是**以这种方式嵌套你的 alloc/init 调用。

# 编辑

`[scoreLabel setText: scoreString];`根据您在另一个答案的评论中发布的一些信息，内部调用似乎`-(void) setupScore`使用了不正确保留的 NSString 对象`scoreString`。

我的猜测是该字符串的@property 被声明为弱，否则您没有在任何地方正确初始化它。

# 编辑 2

您对 scoreLabel 和 scoreString 变量的处理不当。在一个地方，您将 scoreLabel 属性设置为 NSString。您可能打算这样做：

```
scoreString = [NSString stringWithFormat:@"foo"]; 
```

然后，您假设它`scoreLabel`存在，但在您的其他方法之一中，您明确释放它。这意味着您需要在此处检查它是否正确存在，并在需要时创建一个新的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T21:46:03.150

您的代码可能正在访问无效内存。当对象被释放并在之后使用时，这种情况经常发生。您可以打开僵尸检测来阻止这些情况。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-11T01:20:33.133

堆栈跟踪显示您正在使用自己的视图，它在初始化期间`EAGLView`调用方法。`setupScore`此处的第 340 行导致崩溃。

这种方法看起来如何？

# httpclient - HttpClient - 查询字符串的限制？

> ID：11876034
> 
> 赞同：2
> 
> 时间：2012-08-09T02:38:19.070
> 
> 标签：httpclient, apache-httpclient-4.x

我想使用一个仅服务于获取请求的现有框架。并且客户端代码也只是使用 Httpclient 发出一个获取请求来执行某些查找。到目前为止，一切正常，因为 get 请求查询参数不会太长。我正在尝试使用与上述相同的设置，但我的查询字符串会变得太长。get 命令的示例查询将如下所示：可能增长到 70K 个数字

`http://server.com?id=xx&num=123,12,31,22,23,24,.....`

所以我想知道 HttpCient get 方法中的查询长度是否有任何限制。会不会像我们在普通浏览器 IE,FF 中的 get request 查询限制一样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T18:47:21.630

可以选择配置 HttpClient 以设置 HTTP 标头长度的最大限制。它没有特别限制请求 URI 或其查询组件的长度。

# java - ObjectInputStream catch 块产生EOFException？

> ID：11876042
> 
> 赞同：0
> 
> 时间：2012-08-09T02:39:49.643
> 
> 标签：java, objectinputstream, eofexception

很抱歉把它拖上来，但我环顾四周，我仍然不断收到 EOFException。我已经评论了我的方法中的所有内容，除了：

```
 File receivedFileObject;
    File newFile = new File("newlyWrittenFile.mp3");

    try{
        Socket socket = new Socket(SERVER_IP, PORT);

        try{
        ObjectInputStream incommingData = new ObjectInputStream(socket.getInputStream()); 
```

我要做的就是将文件、txt 或 mp3 从服务器传递到客户端 - 我什至没有尝试调用`readObject()`它`ObjectInputStream`，但我仍然得到 EOFException？我怎样才能到达我没有尝试阅读的文件的末尾？实际上，我希望我尝试逐行读取文本文件，因为我知道如何做到这一点非常好。我只想接收一个对象，将其转换为文件并将其写入文件系统，但由于某种原因我的 catch 块：

```
 } catch (IOException e){
            System.out.println("Incomming data assignment error : " + e);   
        } 
```

打印出来：

> 传入数据分配错误：java.io.EOFException

我一直在尝试遵循[此论坛帖子](http://www.java-forums.org/networking/25669-sending-file-server-client-saving-file-clients-computer.html)中列出的服务器代码。基本上从服务器我使用以下几行将文件写入客户端：

```
 if (myFile.exists()) {
        ObjectOutputStream oos=new ObjectOutputStream(client.getOutputStream());

        oos.writeObject(myFile);
    } 
```

如果有人能解释如何解决我觉得愚蠢的错误，我将不胜感激 - 提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T02:53:21.243

An`ObjectOutputStream`用于将 java 对象序列化为流。您不太可能想要这样做。

如果你想“传递一个文件”，那可能意味着你想“传递文件的*内容*”，所以就这样：

```
FileOutputStream newFile = new FileOutputStream("newlyWrittenFile.mp3");
InputStream input = socket.getInputStream();
byte[] bytes = // pseudo code for reading all bytes from input
newFile.write(bytes); // pseudo code for writing to file
newFile.close(); 
```

您可能会发现 apache common-io 库`IOUtils`类方法非常方便，可以轻松读取和写入数据

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T02:59:08.773

如果您检查以下的[javadoc`ObjectInputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/ObjectInputStream.html#ObjectInputStream%28java.io.InputStream%29)：

> 从流中读取序列化流标头并进行验证。

所以创建对象确实会触发读取。

# cross-browser - 使用 CrossRider 作为为多个浏览器开发扩展的平台有哪些缺点？

> ID：11876044
> 
> 赞同：10
> 
> 时间：2012-08-09T02:40:04.987
> 
> 标签：cross-browser, browser-extension, crossrider

与竞争对手相比，我已经阅读了很多关于使用 CrossRider 的积极见解，但我还没有阅读任何与它的任何限制（功能、速度、与第三方服务的集成等）相关的内容。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-09T03:34:52.937

使用任何框架的最大缺点是您必须受到该框架的限制。

但是，如果您发现使用该框架实现的目标是可行的（并且 Crossrider 很可能会满足您的需求），那么您会发现它会为您节省大量的时间和精力，相比之下自己做所有艰苦的工作。

我建议你去看看他们的[跨浏览器开发框架](http://crossrider.com)，看看能做什么不能做什么。如果你正在寻找的东西可以完成 - 显然去吧。无需学习 Firefox 和 Chrome API 以及用于 IE 开发的 C++，您只需熟悉 Javascript（和 jQuery）即可。

Crossrider 有一个在线 IDE，可让您在几秒钟内直接进入代码。无需下载任何开发 SDK（除非您真的想要），您将看到您的代码更改实时生效。

其他值得一提的好处是它们的发布工具，例如直接下载链接、小部件生成器和可以在所有浏览器上自动安装您的扩展程序的动态窗口安装程序。

（披露：我是 Crossrider 的员工之一）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-08T15:36:48.730

我发现的一些缺点：

在我的例子中，扩展不是您应用程序的主要部分（我有一个桌面解决方案，可以下载 Flash 视频并将其转换为其他格式，而 CrossRider 仅用于在包含 Flash 视频的页面中添加下载链接）。我们将我的应用程序称为 FVD（Flash 视频下载器）。

缺点：

1.  FVD 和 CrossRider 代码在“添加删除程序”中作为 2 个单独的条目安装，这让用户感到困惑（理想情况下，它应该只有 1 个条目，在我的情况下是 FVD，或者至少有一种隐藏 CrossRider 条目的方法）
2.  可以配置 FVD（例如，用户不希望在站点 A 和 B 上显示链接），但将配置传递给 CrossRider 扩展并不容易/直接（因为您只有一个适用于所有用户的扩展，所以您可以t 传递参数以根据每个用户的选择对其进行自定义）。您可以使用套接字（例如，从扩展程序向 localhost:8181 发出请求，并从您的主应用程序在端口 8181 上侦听套接字），但这看起来很笨拙并且容易出错。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-26T21:16:14.380

截至 2016 年 9 月 26 日，Crossrider 不再根据发送给用户的电子邮件提供其扩展开发平台：

> 亲爱的合作伙伴，
> 
> 所有美好的事物最终都必须结束，遗憾的是，Crossrider 扩展开发平台也是如此。
> 
> 经过几年与您的合作，我们决定终止服务。
> 
> 请注意，服务的终止在发布或收到此通知后立即生效。
> 
> 为方便起见，Crossrider 扩展开发平台将在 2016 年 9 月 27 日起再提供 30 天，供您下载项目代码/源代码/扩展，之后您的数据将丢失。
> 
> 请参阅下面有关如何从我们的服务器下载项目代码的说明，以供您参考；但请注意，Crossrider 无法提供进一步的帮助。
> 
> 我们要感谢您多年来对我们的支持和信任，希望我们将来有机会再次合作。
> 
> 最好的，
> 
> 跨界车队

所以我认为这是一个很大的限制。

# django - 使用模板渲染 django 小部件？

> ID：11876045
> 
> 赞同：1
> 
> 时间：2012-08-09T02:40:36.057
> 
> 标签：django, django-forms

我真的很喜欢在 django 中使用模型表单来加速 UI 的能力。IE：

```
<html>
    ...
    {{ myform }}
    ...
</html> 
```

但是，我需要创建的 HTML 输出与默认创建的不匹配。我无法更改所需的 HTML 输出，但我想更改表单的输出。

我知道有几种方法可以做到这一点。循环遍历字段并单独显示每个字段（即循环和显示`{{ myform.field }}`）可以正常工作，但它并不像刚刚做的那样好`{{ myform }}`。小部件似乎是个好主意，但是在查看了文档和一些示例之后，我不太确定 - 我只想更改 html 输出，而不是功能。如果有某种方法可以基于模板输出字段，那就太好了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T02:47:32.687

我通常使用[包含](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#include)标签。我创建了一个自定义模板 (form_snippet.html)。

为了论证，假设 form_snippet.html 只是打印表单：

```
<!-- Form snippet -->
{{ form }} 
```

然后，当您想在其他模板中使用该表单模板时，您只需使用：

```
{% include 'form_snippet.html' with form=myform %} 
```

您可以简单地遍历字段并添加您的自定义标记。

# spring - JSF 2 + Spring 3：无法正常工作

> ID：11876046
> 
> 赞同：2
> 
> 时间：2012-08-09T02:40:36.210
> 
> 标签：spring, jsf, spring-mvc

我真的无法解决这个问题。首先，我从 STS 创建了一个 Spring 模板项目 (Spring MVC)。

然后我完全复制了[http://blog.terrencemiao.com/archives/spring-3-shacks-up-jsf-2-the-maverick-way](http://blog.terrencemiao.com/archives/spring-3-shacks-up-jsf-2-the-maverick-way)报告的代码，它对我不起作用。

我认为该代码中至少存在一个错误，即“applicationConfigure.xml 应该是 applicationContext.xml”。我纠正了它，但它还没有工作。

除了该网站上报告的文件（相同的结构），我还有：

(1) 根上下文（WEB-INF/spring）

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns:faces="http://www.springframework.org/schema/faces"
 xmlns:mongo="http://www.springframework.org/schema/data/mongo"
 xsi:schemaLocation="http://www.springframework.org/schema/beans
                    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd 
                    http://www.springframework.org/schema/mvc
                    http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
                    http://www.springframework.org/schema/faces
                    http://www.springframework.org/schema/faces/spring-faces-2.2.xsd
                    http://www.springframework.org/schema/context
                    http://www.springframework.org/schema/context/spring-context-3.1.xsd
                ">  
<!-- Root Context: defines shared resources visible to all other web components --> 
```

(2) servlet-context (WEB-INF/spring/appServlet)

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"     
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"     
xmlns:beans="http://www.springframework.org/schema/beans"     
xmlns:context="http://www.springframework.org/schema/context"     
xsi:schemaLocation="http://www.springframework.org/schema/mvc     
http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd     
http://www.springframework.org/schema/beans     
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd     
http://www.springframework.org/schema/context     
http://www.springframework.org/schema/context/spring-context-3.0.xsd">

<!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->

<!-- Enables the Spring MVC @Controller programming model -->
<annotation-driven />

<!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
<resources mapping="/resources/**" location="/resources/" />

<!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory -->
<beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <beans:property name="prefix" value="/WEB-INF/views/" />
    <beans:property name="suffix" value=".jsp" />
</beans:bean>

<context:component-scan base-package="org.paradise.sandbox" /> 
```

===============================

其余的完全一样。不幸的是，当我启动服务器并打开 localhost:8080/HelloSpring/helloSpring 时，我收到以下错误：

> 严重：servlet [DispatcherServlet] 在路径 [/HelloSpring] 的上下文中的 Servlet.service() 引发异常 [圆形视图路径 [helloSpring]：将再次分派回当前处理程序 URL [/HelloSpring/helloSpring]。检查您的 ViewResolver 设置！（提示：由于默认视图名称生成，这可能是未指定视图的结果。）] 根本原因 javax.servlet.ServletException：循环视图路径 [helloSpring]：将分派回当前处理程序 URL [/HelloSpring/ helloSpring] 再次。检查您的 ViewResolver 设置！（提示：由于默认视图名称生成，这可能是未指定视图的结果。）在 org.springframework.web.servlet.view.InternalResourceView.prepareForRendering(InternalResourceView.java:292) 在 org.springframework.web.servlet .view.InternalResourceView。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T04:42:21.573

它不起作用，因为您的 InternalViewResolver 正在“/WEB-INF/views/”下寻找 helloSpring.jsp 文件，而您拥有的文件是 helloSpring.xhtml。

您可以将后缀更改为值“.xhtml”或使用 .jsp 视图文件。

# php - CakePHP - 如何即时切换数据库？(CakePHP 1.1.x)

> ID：11876047
> 
> 赞同：1
> 
> 时间：2012-08-09T02:40:50.767
> 
> 标签：php, database, cakephp, dynamic

虽然我们正在尝试将我们的系统升级到更新版本的 CakePHP，这样更容易在数据库之间切换，但我目前必须让 1.1.x 版本能够在数据库之间切换。

我试过使用[这篇文章](http://insanityville.com/2010/04/how-to-switch-between-databases-in-cakephp-on-the-fly/)中显示的相当简单的方法，但是我无法让它完全正常工作。调试`$connected`对象确实会显示我试图保存到的数据库的所有信息，但是当我将某些内容保存到数据库时，我仍然最终会更改原始数据库而不是第二个数据库。任何人都知道我可以用来在 cakePHP 1.1 上切换数据库的方法，或者发布的网站上给出的方法可能出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T16:01:20.743

看到这个网址： -

[http://insanityville.com/2010/04/how-to-switch-between-databases-in-cakephp-on-the-fly/](http://insanityville.com/2010/04/how-to-switch-between-databases-in-cakephp-on-the-fly/)

**阅读**

我很确定我使用的一些功能是 1.2 特有的。但是你可以试试。我会给你一个我所做的基本概述。

我制作了一个组件，并在初始化方法中的组件内.. 我这样做：（所有连接数据都存储在客户端模型中，我使用 loadModel 加载）

```
 $newDb =& ConnectionManager::create('myconn_name',
array('driver' => 'mysql'
                ,'host' => $client->data['Client']['db_host']
                ,'login' => $client->data['Client']['db_login']
                ,'password' => $client->data['Client']['db_password']
                ,'database' => $client->data['Client']['db_name']
                ,'persistent' => false 
```

然后在我的 app_model 我设置

```
 var $useDbConfig = 'myconn_name'; 
```

同样，我完全不确定这在 1.1 中的效果如何

# emacs - 如何插入“|” 在组织模式表中

> ID：11876048
> 
> 赞同：12
> 
> 时间：2012-08-09T02:40:53.083
> 
> 标签：emacs, org-mode

我在使用 org-mode 时遇到了一些麻烦。我想在 org-mode 中创建一个表，如下所示：

```
| operator | use         |
|----------+-------------|
|   |      | expr | expr | 
```

但是当我按 TAB 时，表格变成了这样：

```
| operator | use |      |      |
|----------+-----+------+------|
|          |     | expr | expr |. 
```

如何避免？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-09T07:45:41.737

> 要在表格字段中插入竖线，请使用 \vert 或在单词 abc\vert{}def 内。

来源：[组织模式手册：内置表格编辑器](http://orgmode.org/manual/Built_002din-table-editor.html#fn-1)。

如果`\vert`没有自动转换为`|`, call `org-toggle-pretty-entities`, per:

> `C-c C-x \`
> 
> 切换实体显示为 UTF-8 字符。这不会改变保持纯 ASCII 的缓冲区内容，但它覆盖 UTF-8 字符仅用于显示目的。

来源：[组织模式手册：特殊符号](http://orgmode.org/manual/Special-symbols.html#Special-symbols)

该功能是在[7.01 版本](http://orgmode.org/Changes_old.html#sec-12-2-3)`org-toggle-pretty-entities`中引入的。如有必要，请调用并升级 Org-mode。`org-version`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T20:30:38.867

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-08-09T19:40:41.003

If you just want to insert a new column, just type 'M-S right'.

# c# - 使用正则表达式将“-”替换为“-1*”

> ID：11876052
> 
> 赞同：-1
> 
> 时间：2012-08-09T02:41:17.333
> 
> 标签：c#, regex

我有如下字符串，

```
string str  =  "FX(Y + 1, -(5 * 10) + FML("Test - KB")"; 
```

我想用“-1 *”替换“-”。但是它不应该适用于文字字符串。例如。FML("Test - KB") 不应更改为 FML("Test -1 * KB")。

所需的输出是“FX(Y + 1, -1 * (5 * 10) + FML(“Test - KB”)”。

有没有办法在正则表达式中做到这一点？

非常感谢任何建议/帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T02:54:40.697

在您的示例中，您可以替换`-(`为`-1*(`, 这似乎是您想要的，但这实际上取决于您的确切字符串。例如，在您的示例中，`Test - KB`- 永远不会被替换，因为它不是字符串的一部分，而是添加到字符串中的计算。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T03:48:20.180

```
-(?=[^"]*(?:[^"]*\"[^"]*\"[^"]*)*$) 
```

前面的正则表达式字符串将匹配每个不跟偶数或零“的减号。因此它将匹配此字符串中的减号：

```
abc - dssda dsda asd
ab - dssd ds F(" sdds ")
fhdhhf - asd F("ssd") sdsd D("dsfdf") 
```

这可确保被替换的减号不包含在字符串文字中。这是 C# 中的示例。

```
string input = "FX(Y + 1, -(5 * 10) + FML(\"Test - KB\")";
string replacement = "-1 *";
Regex rgx = new Regex("-(?=[^\"]*(?:[^\"]*\"[^\"]*\"[^\"]*)*$)");
string result = rgx.Replace(input, replacement); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T02:59:05.143

您可以尝试使用此正则表达式仅匹配由“（”放置的“-”

[^-]+(-)(?:()[^-]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T02:59:20.053

试试这个代码：

```
using System.Text.RegularExpressions;

string str  =  "FX(Y + 1, -(5 * 10) + FML(\"Test - KB\")";
string r = new Regex("-[(]").Replace(str,"-1*("); 
```

此代码找到 -( 并替换为 -1*(

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T03:17:25.937

它看起来像这样：

```
var result = Regex.Replace("FX(Y + 1, -(5 * 10) + FML(\"Test - KB\")",
                           "(?<=^([^\"]|\"[^\"]*\")*)-",
                           "-1 * "); 
```

正则表达式解释：

```
(?<=        # preceded by..
^           # the start of the string, then
([^"]       # either not a " character
|"[^"]*"    # or a string: "..."
)*          # as many times as you want
)
-           # then match the hyphen 
```

您的示例字符串的输出是：

```
FX(Y + 1, -1 * (5 * 10) + FML("Test - KB") 
```

（请注意，这不处理字符串转义，如果它们在您的目标语言中受支持。）

此解决方案将正确处理字符串，而不仅仅是启发式。这是一个例子：

```
FX(Y+1, -(X+Y) + "EMBEDDED: FX(Y + 1, -(5 * 10)" - (X+Y) 
```

变成：

```
FX(Y+1, -1 *(X+Y) + "EMBEDDED: FX(Y + 1, -(5 * 10)" -1 * (X+Y) 
```

请注意，即使字符串“看起来像”其他部分，它也不会被触及。

# php - 使用jquery在循环内获取选择标签的值

> ID：11876053
> 
> 赞同：0
> 
> 时间：2012-08-09T02:41:32.763
> 
> 标签：php, jquery, jquery-selectors

如何使用 jquery 获取循环内字段的值？前任。

```
<?php 
    for($counter=0; $counter<2; $counter++)
    {
       ?><select name="try<?php echo $counter; ?>">
       //bla bla bla..,.,.,.,.,. 
<?php 
    } 
 ?> 
```

非常感谢,.,.,

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T02:49:55.967

```
$('select[name=try]').val(); 
```

或者如果您需要知道的不是所选值，而是索引值：

```
$('select[name=try]').find('option').eq(0).text(); - for text inside option node
$('select[name=try]').find('option').eq(0).attr('value') - for value attribute 
```

其中 0 是选项节点的索引，即 0 - 第一个，1 - 第二个等。

<select name="try0"> 之后还有一个计数器，所以很自然地你必须做 $('select[name=try0]').val(), $('select[name=try1]')。 val() 等

# jms - 在 JUnit 中运行时，activemq 消费者没有收到消息？

> ID：11876054
> 
> 赞同：1
> 
> 时间：2012-08-09T02:41:37.563
> 
> 标签：jms, activemq

![在此处输入图像描述](../Images/807fc62503d75fbb7cd206b05c484ada.png)

使用上面的 consumer.class，当它在 JUnit 中运行时，它无法接收消息。但是`main`直接通过方法运行时，效果很好。以下是调用代码：

![在此处输入图像描述](../Images/9341bac1da7fc25c711eeef432f0f506.png)

JUnit 版本是 4.10。

那么，有人能给点意见吗？提前非常感谢！

当然，在运行这两个调用时，JMS 服务器有足够的消息等待消费。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T04:22:22.677

由于您的 testMq() 方法只是注册一个侦听器并且不会阻塞测试线程，因此测试用例将停止。尝试在注册监听器之后但在测试用例结束之前添加 Thread.sleep(10000) ...

# linux - 从 OS X 交叉编译到 Linux

> ID：11876066
> 
> 赞同：6
> 
> 时间：2012-08-09T02:43:19.987
> 
> 标签：linux, macos, gcc, cross-compiling

我想从 OS X 10.7 + Eclipse 构建系统为 Linux 服务器编译二进制文件。这意味着一个 GCC 交叉编译器。我从本机 4.7.1 开始，为主机 4.7.1 拍摄。

大多数在线说明都特定于嵌入式开发。我想使用 libstdc++-v3 和 glibc，这让它有点不同。

# 什么成功：

1.  安装包

    ```
    port install gcc47
    export CC=gcc-mp-47
    export LD=ld-mp-47
    export CXX=g++-mp-47
    export CPP=cpp-mp-47

    port install gmake
    ln /opt/local/bin/gmake /opt/local/bin/make

    port install gsed
    ln /opt/local/bin/gsed /opt/local/bin/sed

    port install gawk
    port install autoconf
    port install msgfmt 
    ```

2.  制作并安装 binutils-2.22

3.  `make all-gcc`和`make install-gcc`

    使用了以下配置：

    > $ ../gcc/configure --enable-languages=c,c++,objc,obj-c++ --with-gmp=/opt/local --with-mpfr=/opt/local --with-mpc=/opt /local --prefix=/usr/local/cross/linux --target=x86_64-pc-linux-gnu --disable-nls

4.  将构建环境指向交叉编译器

    ```
    export CC=/usr/local/cross/linux/bin/x86_64-pc-linux-gnu-gcc
    export LD=/usr/local/cross/linux/bin/x86_64-pc-linux-gnu-ld
    export AR=/usr/local/cross/linux/bin/x86_64-pc-linux-gnu-ar
    export CXX=/usr/local/cross/linux/bin/x86_64-pc-linux-gnu-g++
    export CPP=/usr/local/cross/linux/bin/x86_64-pc-linux-gnu-cpp 
    ```

5.  使用配置构建 glibc-2.16

    > ../glibc/configure --host=x86_64-pc-linux-gnu --build=x86_64-apple-darwin11 --prefix=/usr/local/cross/linux/ --with-binutils=/usr/local/ cross/linux/bin/ --with-headers=/usr/local/cross/linux/include/ libc_cv_forced_unwind=yes libc_cv_ctors_header=yes libc_cv_c_cleanup=yes

# 失败：

glibc 构建不久就失败了。此消息多次出现：

```
In file included from ./sysdeps/unix/sysdep.h:20:0,
                 from ./sysdeps/unix/x86_64/sysdep.h:18,
                 from sysdeps/unix/sysv/linux/x86_64/sysdep.h:22,
                 from <stdin>:1:
sysdeps/unix/sysv/linux/sys/syscall.h:24:24: fatal error: asm/unistd.h: No such file or directory
compilation terminated. 
```

不过，这可能是正常的。

然后它无法生产`stdio_lim.h`。随着`make -d`，我得到这个：

```
 Successfully remade target file `/Users/dkrauss/Documents/work/glibc-build/csu/abi-tag.h'.
          Considering target file `/Users/dkrauss/Documents/work/glibc-build/bits/stdio_lim.h'.
           File `/Users/dkrauss/Documents/work/glibc-build/bits/stdio_lim.h' does not exist.
           Looking for an implicit rule for `/Users/dkrauss/Documents/work/glibc-build/bits/stdio_lim.h'.
           Trying pattern rule with stem `lim'.
           Trying implicit prerequisite `/Users/dkrauss/Documents/work/glibc-build/bits/stdio_lim.st'.
           Found an implicit rule for `/Users/dkrauss/Documents/work/glibc-build/bits/stdio_lim.h'.
            Considering target file `/Users/dkrauss/Documents/work/glibc-build/bits/stdio_lim.st'.
            Recently tried and failed to update file `/Users/dkrauss/Documents/work/glibc-build/bits/stdio_lim.st'.
make[2]: *** No rule to make target `/Users/dkrauss/Documents/work/glibc-build/bits/stdio_lim.st', needed by `/Users/dkrauss/Documents/work/glibc-build/bits/stdio_lim.h'.  Stop. 
```

这是它尝试构建的第一个标头`bits`。有一个文件`stdio_lim.h.in`，它是其目录中唯一的`.in`文件。是否应该连接一些`.st`规则`.in`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-14T06:05:46.720

为了正确构建 glibc，您需要来自 Linux 系统的头文件——可能内核头文件就足够了。

这是因为在该系统的任何正常软件构建中都需要这些头文件，并且在交叉编译时也没有什么不同。

自从我从事创建交叉编译器以来已经有很长时间了，所以我无法告诉您如何构建 glibc 以查看标头，但我相信它可以以直接的方式完成。

# cocoa - 我如何知道我的 mac 应用程序何时进入后台？

> ID：11876068
> 
> 赞同：-2
> 
> 时间：2012-08-09T02:43:37.193
> 
> 标签：cocoa

当用户开始使用另一个应用程序或 Finder 并且我的应用程序不再是焦点时，我想在我的 mac 应用程序中做一些事情。

我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T02:48:15.567

您可以观察`NSApplicationDidResignActiveNotification`以了解您何时不再是活动应用程序。此通知和相关通知记录在[*NSApplication Class Reference*](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSApplication_Class/Reference/Reference.html#//apple_ref/doc/uid/20000012-BAJFCBDJ)中。

如果您不知道如何观察通知，您将需要阅读[*通知编程主题*](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Notifications/Introduction/introNotifications.html#//apple_ref/doc/uid/10000043i)。

# c++ - 如何让 CPU 精确到 1 毫秒？

> ID：11876069
> 
> 赞同：0
> 
> 时间：2012-08-09T02:43:39.703
> 
> 标签：c++, operating-system, window

我想让 CPU 的核心在 1 毫秒内保持忙碌状态。它在做什么并不重要，例如，只做循环加操作。
在 Windows 中，在 C++ 中。
给我Linux的相关资料也很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T02:48:56.280

您始终可以估计 CPU 上的繁忙工作（无用的循环，一遍又一遍地旋转并检查经过的时间，直到经过 1 毫秒）。问题在于，由于操作系统中实施的进程管理，您无法保证 1 毫秒的完整时间片。CPU 计时器可以随时中断您的进程并执行另一个进程（在您的 1ms 窗口完成之前）。对于 Linux 和 Windows，同样适用。

# git - 如何推送到 git 包

> ID：11876070
> 
> 赞同：15
> 
> 时间：2012-08-09T02:43:42.590
> 
> 标签：git, push, bundle

我刚刚开始使用 git 进行版本控制。我想在本地文件服务器上保留我的存储库的备份副本。在阅读了备份 git 存储库的正确方法后，我决定将存储库作为 git 包存储在文件服务器上。

我可以捆绑我的存储库并将生成的捆绑包复制到文件服务器。查看。我还尝试克隆并从中提取。一切运作良好。但是，我也想不时推送我的本地更改。当我执行类似

```
git push bundlefile.git 
```

我得到错误：

```
error: failed to push some refs to 'bundlefile.git' 
```

您可以克隆或从捆绑中提取，但不能推送到它吗？每次我想要备份时，我真的不想创建整个存储库的捆绑包。

这个用户错误还是不打算推送到捆绑包？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T03:16:43.053

您不能直接推送到捆绑文件。捆绑文件是存储库的压缩表示，要对其进行修改将涉及解绑、推送和再次捆绑。

一种方法是如您所说，每次要进行备份时都创建一个新包。

另一种方法是在文件服务器上创建一个*裸*存储库，然后推送到该存储库。裸存储库是没有工作目录的存储库，它本质上是`.git`来自正常克隆的目录的内容。您可以使用`git init --bare`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-13T17:15:51.997

如果您对远程文件服务器具有写入权限，那么肯定：

```
myrepo$ git init --bare //server/my/backup/folder/myrepo.git
myrepo$ git remote add backup  //server/my/backup/folder/myrepo.git
myrepo$ git push backup --mirror 
```

我还没有完全尝试过，但是在 MSys 中，我使用 /j/myFolder/myrport.git 和

```
myrepo$ git push --set-upstream backup master 
```

然后还原只是它的克隆，

```
dev$ git clone //server/my/backupo/folder/myrepo.git
Cloning into myrepo...
dev$ cd myrepo 
```

你又回到了快乐的状态。

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2012-08-09T02:51:56.703

听起来您在文件服务器上有权限问题。确保您的用户/组具有写入权限。

# javascript - JQuery 函数存在但说方法未定义

> ID：11876074
> 
> 赞同：0
> 
> 时间：2012-08-09T02:44:02.107
> 
> 标签：javascript, jquery, function, methods

我对 Jquery 比较陌生，因此接受答案可能非常明显。我有一个提供功能的插件，但是当我运行我的程序时，我收到控制台错误：

```
Cannot call method 'createEvent' of undefined 
```

就像我说的那样，我可能错过了一些简单的东西，但我找不到什么。var desiredValue 是，当然，检索正确的数据，我确保插件在标题中正确链接。如果有人得到任何建议，他们可以提供，将不胜感激！谢谢。

```
function createEvent(title,location,notes, startDate, endDate){
  var title= "My Appt";
  var location = "Los Felix";
  var notes = "me testing";
  var startDate = "2012-11-23 09:30:00";
  var endDate = "2012-11-23 12:30:00";

  cal.createEvent(title,location,notes,startDate,endDate);
}

var cal;

$(document).ready(function() {
  cal = window.plugins.calendarPlugin;

  $('.calinfo').live('click', function() {    
    var desiredValue = $(this).parent().prev().find('.calendar').val();                                                
    var calInfo = desiredValue.split(',');

    createEvent(calInfo[0], calInfo[1], calInfo[2], calInfo[3], calInfo[4]);
  });                              
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T02:49:13.087

在校准分配之后放置一个调试点。问题是您的函数中的这行代码：

```
cal.createEvent(title,location,notes,startDate,endDate); 
```

cal 在该上下文和范围内未定义。

我有一种感觉

```
cal = window.plugins.calendarPlugin; 
```

未正确分配。

...感谢您的链接（见评论）——@Ohgodwhy。

老实说，那个插件写得不是很好。但是，您应该做的只是编辑函数的第一行：

```
window.plugins.calendarPlugin.prototype.createEvent = function(title,location,notes, startDate, endDate){ 
```

每当您调用该函数时，只需使用 cal.createEvent （您需要编辑 click 事件处理程序。

这听起来很愚蠢，但是...您确定插件 JS 文件已包含并在此脚本之前执行吗？如果您在此脚本执行后包含插件（日历插件 javascript 文件），则 calendarPlugin 对象将不存在（因此，它将保持未定义）！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T02:50:29.120

这是一个范围问题，它阻止了`var cal`被提升到顶部。在准备好的函数中移动你的函数声明。你也变得未定义，因为你`createEvent`作为一个方法调用`cal`但你还没有创建一个类对象。

```
$(document).ready(function() {
    var cal;
    cal = window.plugins.calendarPlugin;

    $('.calinfo').live('click', function() {
        var desiredValue = $(this).parent().prev().find('.calendar').val();
        var calInfo = desiredValue.split(',');

        createEvent(calInfo[0], calInfo[1], calInfo[2], calInfo[3], calInfo[4]);
    });

    function createEvent(title, location, notes, startDate, endDate) {
        var title = "My Appt";
        var location = "Los Felix";
        var notes = "me testing";
        var startDate = "2012-11-23 09:30:00";
        var endDate = "2012-11-23 12:30:00";

        cal.createEvent(title, location, notes, startDate, endDate);
    }

});​ 
```

# php - php从目录生成随机图像

> ID：11876075
> 
> 赞同：3
> 
> 时间：2012-08-09T02:44:03.980
> 
> 标签：php, random, directory

我必须从目录生成随机图像。我知道这很简单，

```
 $dire="images/";
   $images = glob($dire. '*.{jpg,jpeg,png,gif}', GLOB_BRACE);
   $randomImage = $images[array_rand($images)];
   <input type="image" src="<?=$randomImage;?>" alt="<?=$randomImage;?>" /> 
```

但我必须确保该目录中的每个图像在随机生成第二次之前至少选择一次。上面的代码只会显示任何随机图像。

我的想法是，我必须将随机图像存储在一个数组中，并每次使用新创建的随机图像检查数组。如果新的随机图像不在该数组中，我需要显示该图像，否则我必须找到另一个图像。

我用上面的想法创建了下面的代码。

```
 $allimgs=array();
  $dire="images/";
  $images = glob($dire. '*.{jpg,jpeg,png,gif}', GLOB_BRACE);
  $randomImage = $images[array_rand($images)];

   if(!in_array($randomImage,$allimgs))
   {
     $allimgs[]=$randomImage;
     <input type="image" src="<?=$randomImage;?>" alt="<?=$randomImage;?>" />
   } 
```

但我仍然坚持使用这段代码。有人请帮助改进此代码吗？或任何其他想法？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T02:51:23.467

一种解决方案可能是这样做：

```
<?
// initialize $images
shuffle($images);
$randomImage = array_pop($images);
?>
<input type="image" src="<?=$randomImage;?>" alt="<?=$randomImage;?>" /> 
```

这将保证您以随机顺序仅使用每个图像一次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T02:49:49.567

array_rand 的一种替代方法是随机播放：

```
$dire="images/";
$images = glob($dire. '*.{jpg,jpeg,png,gif}', GLOB_BRACE);
shuffle($images); 
```

然后显示下一个随机图像：

```
$randomImage=array_pop($images); 
```

当数组为空时，您再次调用初始化代码。所以把它放在一起：

```
$images=array()  //Initialize once at top of script
$dire="images/";
...
if(count($images)==0){
  $images = glob($dire. '*.{jpg,jpeg,png,gif}', GLOB_BRACE);
  shuffle($images);
  }
$randomImage=array_pop($images); 
```

（我故意重复 glob() 以便在第二次迭代中发现任何新图像。）

PS 我假设你明白，默认情况下，PHP 是无状态的。如果这应该在每个用户每次访问页面时为他们提供不同的图像（例如旋转横幅广告），那么代码几乎相同，但将`$images`数组移动到`$_SESSION`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T14:00:11.963

这些代码有助于从文件夹中提取随机图像

```
 <?php 
            $files = glob('photos/*'); 
               natcasesort($files);      // Display images  
            foreach($files as $file) {     
               echo '<img src="' . $file . '"/>';
            }  
        ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-09T06:29:22.350

这是我的答案，它似乎工作正常。它从给定文件夹中的图像随机生成一张图像：

```
<?php 
$result = glob('images/*'); 
shuffle($result);
foreach($result as $result) {     
   break;     
}  
?>
<img src="<?php echo "$result"; ?>" /> 
```

# objective-c - XML 解析器不起作用

> ID：11876076
> 
> 赞同：1
> 
> 时间：2012-08-09T02:44:13.187
> 
> 标签：objective-c, ios, xcode, cocoa-touch, xml-parsing

我正在尝试将 XML 提要加载到我的应用程序中，我正在使用[来自 Github 的 XML 解析器框架。](https://github.com/ZaBlanc/RaptureXML) 在我的 ViewDidload 我放置

```
[self Loadit]; 
```

和

```
- (void)Loadit {

    RXMLElement *LoadFile = [RXMLElement elementFromURL:[NSURL URLWithString:@"url"]];

    [LoadFile iterate:@"Name" usingBlock:^(RXMLElement *element) {
        NSString *name = [element attribute:@"User"];
        NSLog(@"APP NAME: %@", name);
    }];

    NSLog(@"Done");

} 
```

但我不知道我是否愚蠢但它没有调用函数

```
[LoadFile iterate:@"Name" usingBlock:^(RXMLElement *element) {
        NSString *name = [element attribute:@"User"];
        NSLog(@"APP NAME: %@", name);
    }]; 
```

有谁知道为什么？Nslog 没有出现在我的 xCode 日志中

```
 NSLog(@"APP NAME: %@", name); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:05:56.793

请确保参数“名称”（在此方法中 - `[LoadFile iterate:@"Name" usingBlock:^(RXMLElement *element)`）存在于您的 XML 中，并且与 XML 中的完全相同（我的意思是检查区分大小写）。

# android - 在 ViewPagerIndicator 两侧创建模糊效果

> ID：11876078
> 
> 赞同：1
> 
> 时间：2012-08-09T02:45:05.773
> 
> 标签：android

我意识到，对于 Google Play 市场，它们对左右有“模糊”效果（见左边的“付费”，右边的“趋势”，如附件）

我想知道，是否可以使用[ViewPagerIndicator](https://github.com/JakeWharton/Android-ViewPagerIndicator/)来实现这样的效果？从我看到的演示中，我们可以自定义各种指标（从线到三角形）。但我还没有看到一个例子，它会在左侧产生“模糊”效果。

![在此处输入图像描述](../Images/2e0df6e46899ac77b41ef38d7c702ccf.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T08:39:55.100

> 我想知道，是否可以使用 ViewPagerIndicator 实现这样的效果？

您可以扩展`TitlePagerIndicator`类并简单地自己绘制褪色边缘：

```
public class TitlePageIndicatorFade extends TitlePageIndicator {

    private GradientDrawable mDrawableLeft, mDrawableRight;
    private static final int FADE_SIZE = 30;

    public TitlePageIndicatorFade(Context context, AttributeSet attrs,
            int defStyle) {
        super(context, attrs, defStyle);
        init();
    }

    public TitlePageIndicatorFade(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    public TitlePageIndicatorFade(Context context) {
        super(context);
        init();
    }

    private void init() {
        mDrawableLeft = new GradientDrawable(
                GradientDrawable.Orientation.LEFT_RIGHT, new int[] {
                        Color.parseColor("#F9F9F9"),
                        Color.parseColor("#00000000") });
        mDrawableRight = new GradientDrawable(
                GradientDrawable.Orientation.RIGHT_LEFT, new int[] {
                        Color.parseColor("#F9F9F9"),
                        Color.parseColor("#00000000") });
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        mDrawableLeft.setBounds(0, 0, FADE_SIZE, getHeight());
        mDrawableRight.setBounds(getWidth()- FADE_SIZE, 0, getWidth(),
                getHeight());
        mDrawableLeft.draw(canvas);
        mDrawableRight.draw(canvas);
    }

} 
```

# c# - 从 asp.net (C#) Web 应用程序发送短信

> ID：11876082
> 
> 赞同：1
> 
> 时间：2012-08-09T02:46:46.063
> 
> 标签：c#, asp.net, asp.net-mvc

> **可能重复：**
> [通过 Asp.net Web 应用程序发送 SMS：](https://stackoverflow.com/questions/9051610/sending-sms-thru-asp-net-web-application)

我是 asp.net Web 应用程序的新手，我想将 SMS 消息从 asp.net (C#) Web 应用程序发送到手机。我能怎么做？我能做到多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T02:53:35.063

完成此操作的一种可能性是使用专门从事此操作的外部 Web 服务，因为它是电话网络使用

但这里有几篇文章

[http://www.aswinanand.com/2008/07/send-free-sms-web-service/](http://www.aswinanand.com/2008/07/send-free-sms-web-service/)

[http://www.twilio.com/](http://www.twilio.com/)

[http://www.webservicex.net/ws/WSDetails.aspx?CATID=4&WSID=60](http://www.webservicex.net/ws/WSDetails.aspx?CATID=4&WSID=60)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T02:51:57.190

您应该与服务提供商签约来执行此操作，没有内置解决方案。您必须找到提供此服务的公司，这可能会按每条消息收费。

这个提供者会告诉你如何使用它的服务。最常见的方法是 REST 接口，您将在其中发布消息和目标号码。

由于运营成本，要找到该提供商，重要的是寻找靠近您的目的地号码的公司。因此，假设您来自英格兰，但您通常向意大利的人发送短信。这样，最好在意大利找到服务提供商。

# sockets - 使用第三方应用程序向已经打开的 TCP 连接发送数据？

> ID：11876083
> 
> 赞同：0
> 
> 时间：2012-08-09T02:47:00.260
> 
> 标签：sockets, tcp, client

我正在运行一个使用 TCP 套接字与服务器通信的客户端程序。当我启动客户端时，它会立即创建与服务器的套接字连接，并且不会关闭连接。

我想知道的是，我可以创建另一个应用程序（独立于客户端/服务器应用程序）在这个已经打开的套接字上发送数据吗？

我知道一个似乎正是这样做的程序。该程序旨在嗅探客户端和服务器之间的数据包，并允许您在连接上发送数据。在发送数据之前，您必须向程序提供客户端进程名称（例如，client.exe）。我相信它正在做的是使用客户端进程作为服务器的一种*代理*（这不是我想要做的，我希望能够直接连接到服务器）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T08:35:05.797

是的，您可以，在特定情况下 - 前提是您的第二个应用程序与客户端在同一主机上运行，​​并且是 Unix 操作系统。

您需要做的是让您的客户端应用程序和第二个应用程序在它们之间打开一个 Unix 域套接字，然后让客户端应用程序将它为套接字获得的打开文件描述符的副本传递给第二个应用程序。

请参阅有关如何执行此操作的 SO question 敌人详细信息：[Portable way to pass file descriptor between different processes](https://stackoverflow.com/questions/909064/portable-way-to-pass-file-descriptor-between-different-processes)

# java - jackson json with hibernate：jackson-module-hibernate 用法

> ID：11876087
> 
> 赞同：1
> 
> 时间：2012-08-09T02:47:15.203
> 
> 标签：java, json, hibernate, jackson

我对jackson比较陌生，正在尝试通过hibernate 3.3将json导入mysql，反之亦然，并且对jackson-module-hibernate有问题

从它的 github 网站：

ObjectMapper 映射器 = 新 ObjectMapper(); mapper.registerModule(new HibernateModule());

我想我需要将其更改为：

mapper.registerModule(new Hibernate4Module());

但是，存在类型不匹配：

mapper.registerModule 需要 org.codehaus.jackson.map.Module 接口，但 Hibernate4Module 扩展了 com.fasterxml.jackson.databind.Module。

因此，我得到编译错误。有人可以帮我吗？一些有关如何执行此操作的示例代码将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:38:26.183

这是 Jackson 1.x 和 Jackson 2.0 之间的区别。Hibernate 4 模块仅适用于 Jackson 2.0（Hibernate 3 版本可用于 1.x 和 2.0）。

# c++ - 如何构建 NS-3 以使用 C++0x/C++11 库？

> ID：11876088
> 
> 赞同：3
> 
> 时间：2012-08-09T02:47:20.163
> 
> 标签：c++, gcc, c++11, waf, ns-3

我需要在网络模拟器 NS-3 的代码中使用像 unordered_map 这样的数据结构。它使用 waf builder 来编译源代码。我很困惑，我应该在哪里添加 -std=c++0x 以添加到编译器标志？我尝试使用以下方法将其附加到主 wscript 文件中的 CXXFlags：

```
module.env.append_value('CXXFLAGS', '-std=c++0x'); 
```

但我仍然收到此错误：

> 该文件需要对即将推出的 ISO C++ 标准 C++0x 的编译器和库支持。此支持目前是实验性的，必须使用 -std=c++0x 或 -std=gnu++0x 编译器选项启用。C/C++ 问题

我还应该向我的 waf 模块添加任何库吗？

PS：我的 GCC 版本是 4.4

更新：更新到 4.7 后出现此错误：

```
error: #error This file requires compiler and library support for the ISO C++ 2011 standard. This support is currently experimental, and must be enabled with the -std=c++11 or -std=gnu++11 compiler options. 
```

有没有办法告诉编译器使用 0x 而不是 11？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T21:55:52.957

这是解决方案：

首先将Ns-3的GCC升级到4.7会因为标准的变化而导致更多的错误，并不能解决问题。所以我把 gcc 和 g++ 改回 4.4.3。

但是为了摆脱这个错误（正如它所说），这个选项应该被添加到 CXXFLAGS 中：

```
-std=c++0x 
```

要向 CXXFLAG 添加选项，您可以使用以下命令：

```
CXXFLAGS="-std=c++0x" ./waf configure 
```

或者，如果您想向 waf 配置添加选项：

```
CXXFLAGS="-std=c++0x" ./waf -d debug --enable-examples --enable-tests configure 
```

# php - 如何使 Apache 允许可执行文件运行？

> ID：11876091
> 
> 赞同：0
> 
> 时间：2012-08-09T02:47:37.640
> 
> 标签：php, apache

我只是想知道在这种情况下我能做些什么。我有这个简单的网页，我想通过它调用一个在站点上留下文件的程序。供您参考，此网页本身可以写入（它将上传的文件保存在服务器的特定位置）。但问题是，当我通过网页调用程序时，它不会在网页成功留下文件的同一特定位置生成文件。

简单来说，我的情况是网页可以将文件保存到文件夹A，但是当网页调用程序将文件留在文件夹中时，它不能。问题是
当它被网页调用时，我怎样才能让程序这样做？

谢谢，HJ。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T04:06:14.020

您需要设置文件夹权限以允许对 apache 进行写访问。从 linux 的命令行：

```
sudo chmod 644 path/to/folder 
```

您也应该允许 apache 组拥有该文件夹。

```
sudo chown yourlinuxusername:apache path/to/folder 
```

Apache 也可能有不同的名称。在这种情况下，只需将 apache 更改为应有的名称即可。

# android - Android：访问硬件相机预览帧数据而不绘制它们

> ID：11876093
> 
> 赞同：13
> 
> 时间：2012-08-09T02:47:44.410
> 
> 标签：android, plugins, camera, unity3d, preview

根据 Java SDK 端的 android 相机文档，必须为相机预览帧提供一个（可见且活动的）要绘制的表面，以便访问帧数据。我已经链接了我在这里遇到的一些事情（我是新来的，所以最多只能有 2 个超链接），但是在结束在 SO 上发布我自己的问题之前，我查阅了大量关于各种事情的文档。

### 我的问题：

a）我明确不想将相机预览绘制到屏幕上，如果可能的话，我只想直接从相机缓冲区中获取字节数据（我可以从这里获得）。

b) 是的，我看到了这个： [从没有预览的相机拍照](https://stackoverflow.com/questions/2386025/android-camera-without-preview)。

然而，这要求使用这个库的应用程序必须将这个（看似）任意视图插入到它们的应用程序布局中，它必须始终可见（它们不能切换布局、更改父容器的可见性或使用子活动）应用程序生命周期。

事实上，我的需求与[这张海报的](https://stackoverflow.com/questions/9744790/android-possible-to-camera-capture-without-a-preview)类似，除了我想要相机预览数据的连续实时流，而不是保存到磁盘上的图像的捕获。因此`PictureCallback`与`myCamera.takePicture`呼叫一起为他工作。出于显而易见的原因，将连续捕获写入磁盘不是我的解决方案，因此在我的情况下不起作用。`myCamera.takePicture`也比获取预览帧慢得多。

c) 我已经开始涉足 NDK，并且对它有很好的感觉。但是，据此通过[本](https://groups.google.com/forum/?fromgroups#!topic/android-ndk/qehnrEEoxa0%5B1-25%5D)机访问相机数据是不支持或不推荐的，即使这样，设备兼容性也是一个巨大的麻烦。

如果这已经过时，并且有可靠的 NDK 路线从 android 设备获取相机数据，我找不到它们，所以如果你能指出它们，那就太好了。

d) 我想让这个库可以从 Unity 之类的工具中访问（以统一插件的形式），我希望能够将它编译成 JAR（或者 .so 对于本机）并期望它能够工作以这种方式导入库的 android 应用程序，这样他们就可以使用相机，而无需应用程序开发人员提供特定的 UI/布局配置。

### 语境：

我希望能够创建一个用于 android 应用程序的视觉处理库，并且不想限制使用该库的应用程序必须使用特定的应用程序布局并将特定视图绘制到屏幕上才能使用视觉处理结果——举一个非常简单的例子，如果一个应用程序想要使用我的库来获取相机看到的平均颜色，并且想要在屏幕上为图像着色该颜色。

无论我对我的任何观点提出什么建议，都会非常有帮助。非常感谢您的时间！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-24T11:05:37.753

我完全忘记了我有这个问题。2 年和几个 Android SDK 版本之后，我们有了一个工作系统。

我们正在使用扩展的`SurfaceTexture`，`cameraSurface`并引用所需的相机。使用 cameraSurface 的`SurfaceTexture`，我们调用

```
mCamera.setPreviewTexture(mSurfaceTexture);
mCamera.startPreview(); 
```

`previewCallback`然后从您的活动或您需要的任何地方覆盖当前活动的相机。

```
mCamera.setPreviewCallback(new PreviewCallback() {

     public void onPreviewFrame(final byte[] data, final Camera camera) {
         // Process the contents of byte for whatever you need
     }
}); 
```

这使您可以连续处理相机看到的内容，而不仅仅是浏览存储的图像。当然，这将受限于您相机的预览分辨率（可能与静态捕捉或视频分辨率不同）。

如果我有时间，我会尝试抛出一个准系统工作演示。

编辑：我链接到的 SDK 不再免费提供。您仍然可以通过[BitGym 联系页面](https://www.bitgym.com/developer/index.html#contact)申请。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-14T08:09:28.757

没有解决`SurfaceView`图像预览的问题。您可以做的是将捕获图像的责任委托`byte[]`给实现您的库的应用程序，这将允许他们使用您的库，不仅可以获取来自相机的图像，还可以使用已经拍摄的图像。

# android - android - 如何更新不在 onCreate 事件中的主题？

> ID：11876094
> 
> 赞同：0
> 
> 时间：2012-08-09T02:48:04.887
> 
> 标签：android, colors, themes, spinner

在我的 android 应用程序中，我将主题设置为：

```
@Override
public void onCreate(Bundle savedInstanceState){
    ThemeSetterActivity.setStyle(Main_MenuActivity.this); // this just calls context.setTheme();
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_menu);
} 
```

但是我如何改变主题使用

```
ThemeSetterActivity.setStyle(Main_MenuActivity.this); 
```

当它在 onresume 事件中时。当我尝试它时，它确实调用了该函数，但主题没有改变。是否与不调用有关：

```
super.onCreate(savedInstanceState);
setContentView(R.layout.main_menu); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T03:49:34.333

要在运行时更改应用程序的主题，您可以使用`setTheme(...)`Activity 中的方法。在加载该活动的视图之前，您必须将主题设置为活动。

有关更多信息和实施，[请参阅链接](http://www.anddev.org/applying_a_theme_to_your_application-t817.html)：

**更新**

而且，根据[文档](http://developer.android.com/reference/android/view/ContextThemeWrapper.html#setTheme%28int%29)设置主题，您需要重新启动整个活动。`onResume()`您可以在您的活动中尝试此代码，

```
Intent i = getIntent();
i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(i); 
```

# php - 多个 if() 合二为一

> ID：11876098
> 
> 赞同：4
> 
> 时间：2012-08-09T02:48:20.073
> 
> 标签：php, javascript, c++

这：

```
if (A || B) { X; }
if (C && D) { X; }
if (F != G && H + I === J) { X; } 
```

可以替换为：

```
if ((A || B) || (C && D) || (F != G && H + I === J)) { X; } 
```

但是可以替换为：

```
if (A || B || C && D || F != G && H + I === J) { X; } 
```

? （不带括号）

语言之间有什么区别吗？

PS：答案不应该基于这些例子。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T02:51:31.177

一，如果这些有副作用，这都是无效的。

第二，只有当 X 是幂等的，这是一种花哨的说法，如果 X 可以被调用两次而第二次没有变化。

[http://en.cppreference.com/w/cpp/language/operator_precedence](http://en.cppreference.com/w/cpp/language/operator_precedence)

`&&`绑定比 紧密，所以是的，您可以在这种情况下`||`丢弃括号。`&&`我认为运算符优先规则适用于任何拥有它们的语言，我不知道任何反例，并且您询问的语言确实遵循 C 运算符优先规则。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T02:52:22.690

根据这个：

[http://en.cppreference.com/w/cpp/language/operator_precedence](http://en.cppreference.com/w/cpp/language/operator_precedence)

几乎所有事情都优先于 || 所以是的，它应该仍然有效。

这也应该适用于 Java，为什么？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T02:57:19.180

您的第一个等价语句至少在 C++ 中是不正确的。这

```
if(A||B){X;}
if(C&&D){X;}
if(F!=G&&H+I==J){X;} 
```

`X`如果多个条件为真，则可以执行多次。此外，上述保证至少评估`A`,`C`和. 同时这`F``G`

```
if((A||B) || (C&&D) || (F!=G&&H+I===J)){X;} 
```

保证`X`只执行一次，并且只保证至少评估`A`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T02:58:58.353

是的，它并没有显示出太大的区别，因为 && 具有比 || 更高的优先级

# javascript - 来自融合表的 KML 线在 Google 地图上奇怪地呈现

> ID：11876099
> 
> 赞同：0
> 
> 时间：2012-08-09T02:48:23.273
> 
> 标签：javascript, google-maps-api-3, google-fusion-tables

我在创建的应用程序中遇到了一些路径无法正确呈现的问题。

如果您查看此链接：http: [//jeremyfry.com/test/](http://jeremyfry.com/test/)只需调整窗口大小，使其宽于高，并且应该显示地图。你可以看到路径有点不稳定。我的融合表中的路径是正确的，如果您沿着 Riverside Dr 移动光标，您会看到路径在技术上就在那里（光标变为指针）但渲染已关闭。

有任何想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:47:06.683

[kml 在 FusionTables 中的复杂程度](https://developers.google.com/fusiontables/docs/developers_guide#Geo)是有限制的

您的表是否超过了每个图块 500 个特征的限制？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T00:51:43.030

你为什么不尝试减少线宽？粗线可能会导致线条渲染不稳定。

# javascript - 我怎么知道调用者使用 jQuery 主干.js 等更改了我的表单输入值

> ID：11876100
> 
> 赞同：0
> 
> 时间：2012-08-09T02:48:24.223
> 
> 标签：javascript, jquery, backbone.js, backbone-views

我正在维护由许多成员编辑的很长的 java 脚本代码。（非结构化代码）

在 HTML 页面中，有数百个输入。输入的 id 由 for 循环自动命名。

等等 FOR (int i;i<1000;i<++)

在 javascript 文件中。有很多函数会修改 HTML 页面中输入的值。

但现在我想追踪是什么 javascript 函数修改了这个值。我能怎么做？

jQuery onchange 不起作用，因为它只检测到 UI 更改的事件。它无法通过 js 代码检测到更改。Backbone.js 更改方法也不起作用。

谢谢大家 ！！！

# javascript - Javascript 子字符串方法帮助

> ID：11876101
> 
> 赞同：2
> 
> 时间：2012-08-09T02:48:32.680
> 
> 标签：javascript

长话短说，我正在开发一个网络应用程序并在其中使用 AJAX。我试图在单击时禁用链接的默认操作，将哈希值附加到链接，然后从 url 中删除“#”。

我遇到的问题是，尽管相应地附加了哈希值，但子字符串方法并没有提取“#”，而是提取了它后面的字母.....

这是我的代码。PS，我在那里留下了我的评论，所以你得到了我试图去的地方，所以我不知道......我的逻辑或设置可能是错误的......

```
$(document).ready(function(){

    //app vars
    var mainHash = "index";
    var menuBtn = $('.leftButton');
    //~~~~~~load the index page at first go.
    loadPage();

    //~~~~~~~~~~~~~~~~~~~~~~~~~~~menu show/hide
    menuBtn.click( function(){
        $('#menu').toggleClass();   
    });

    //Menu items on click , disable link default actions.
    $('#menu a').click( hijackLinks );

    //~~~~~~~~~~~~~~~~~~~~~~~~~~~functions for mobile index load AND hijacking app links to AJAX links.
    function loadPage(url){
        if( url == undefined){
            $('#contentHere').load('index.html #content', hijackLinks);
                window.location.hash = mainHash;
        } else {
            $('#contentHere').load(url + '#content', hijackLinks ); 
        }
    }

    function hijackLinks(e){
        var url = e.target.href;
        e.preventDefault();
        loadPage(e.target.href);
        window.location.hash = $(this).attr("href").substring(1);
    }
}); 
```

我想要的是从网址中删除“#”。我做错了什么，我没有看到/理解什么？

我尝试了 substring/substr 等，并且两者都做同样的事情，无论我选择将什么数字插入到子字符串参数中，它们都会删除除“#”之外的所有内容，哈哈。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T02:55:47.783

好吧，你并没有真正改变链接本身，你只是改变了`window.location.hash`，并且哈希总是在开头有一个“#”。

为了更改整个 url（并删除“#”），您需要做的是[操纵浏览器历史记录](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)。

尽管您应该知道它仅适用于较新的浏览器（确切的浏览器版本在链接中），但如果您将网站定位到较旧的浏览器，您可能需要考虑使用哈希进行后备。如果您决定有这样的后备，我建议您搜索一个可以完成它的插件，而不是自己制作。

# json - 从表单生成 JSON

> ID：11876108
> 
> 赞同：0
> 
> 时间：2012-08-09T02:49:52.877
> 
> 标签：json, code-generation

我正在寻找[这个问题](https://stackoverflow.com/questions/5376618/any-tool-to-generate-html-form)的反面，因为我寻找一个可以使用呈现的（查看源代码）HTML 页面/表单并生成可以表示该表单发布的 JSON 的实用程序。[1](https://stackoverflow.com/questions/5376618/any-tool-to-generate-html-form)

答案建议[http://www.jsonschema.net](http://www.jsonschema.net/)格式接近 - JSON 模式到/来自 JSON 代码 - 我想粘贴到 HTML 表单中并查看 JSON 被删除。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T03:12:29.140

像这样的东西：

```
$fn.serializeForm = function()
{
 var o = {};
  var a = this.serializeArray();
  $.each(a, function() {
      if (o[this.name]) {
          if (!o[this.name].push) {
              o[this.name] = [o[this.name]];
          }
          o[this.name].push(this.value || '');
      } else {
          o[this.name] = this.value || '';
      }
  });

 return o;
} 
```

然后调用：

```
$('form').serializeForm(); 
```

# mysql - h2数据库中的脚本文件

> ID：11876111
> 
> 赞同：0
> 
> 时间：2012-08-09T02:50:15.323
> 
> 标签：mysql, spring, h2

我正在尝试通过在 applicationcontext.xml 中设置以下内容将 h2 数据库嵌入到我的 spring 应用程序中

```
<jdbc:embedded-database id="embeddedDataSource" type="H2">

<jdbc:script location="classpath:data.sql"/>

</jdbc:embedded-database> 
```

当我执行它时，它会在 data.sql 文件中显示语法错误。但是这个文件是来自工作 mysql 数据库的备份文件。h2 是否支持 mysql 备份脚本文件。任何人都可以给我一个 h2 脚本文件的例子。

它显示的错误是

```
Syntax error in sql statement "create database[*] ""test"" ";expected "OR,FORCE,VIEW,ALIAS,SEQUENCE,USER,TRIGGER,ROLE,SCHEMA,CONSTANT"; sql statement: 
```

我的 data.sql 包含

```
create database 'test'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T05:25:25.583

H2 并非 100% 兼容 MySQL，就像其他数据库如 Oracle、MS SQL Server、PostgreSQL 等*也不*是100% 兼容 MySQL。只有 MySQL 与 MySQL 100% 兼容。如果要运行为 MySQL 编写的 SQL 语句，则需要确保它们不包含任何 H2 不支持的语法。

> 它显示语法错误

你能发一下吗？

> 谁能给我一个h2脚本文件的例子。

支持的语法[记录在 H2 网站上](http://h2database.com/html/grammar.html)。

# flash - 可以将 AIR2.7 添加到 Flash Pro CS6 吗？

> ID：11876112
> 
> 赞同：1
> 
> 时间：2012-08-09T02:50:23.913
> 
> 标签：flash, air

似乎在 Kindle Fire 上调试 AIR 应用程序的唯一方法是使用 AIR2.7 创建它。我有 Flash Pro CS6，所以我从 Adob​​e 存档下载了 AIR2.7，并尝试通过 Manage AIR SDK 对话框添加它，结果却出现了这个错误：

> 所选文件夹不包含有效的 AIR SDK。

有什么建议么？

# selenium - selenium.click 和 driver.click 有什么区别

> ID：11876116
> 
> 赞同：0
> 
> 时间：2012-08-09T02:50:50.560
> 
> 标签：selenium, junit4

我在 Selenium IDE 中记录了一个场景，并将其导出为 Junit4 Webdriver 支持的代码。

有一个使用 selenium 对象的命令，驱动程序对象可以完成同样的事情。所以我无法理解使用哪一个以及何时使用

例如：selenium.click("id=gen_info") 也可以通过

driver.findElement(By.id("gen_info")).click();

是的，我确实可以选择拥有特定 Web 浏览器的驱动程序对象，但同样的事情也可以通过使用 selenium 对象来完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T04:07:09.223

我想硒点击你的意思是这样的：

```
WebDriver driver = new FirefoxDriver();
Selenium selenium = new WebDriverBackedSelenium(driver, baseUrl); 
```

WebDriverBackedSelenium 允许那些拥有使用 Selenium-RC 的测试套件的人迁移到 WebDriver。但是它并没有实现所有方法。

在这种特殊情况下，它应该工作相同，但 WebDriverBacked 可能会更慢

# c# - 命令执行过程中遇到致命错误

> ID：11876119
> 
> 赞同：0
> 
> 时间：2012-08-09T02:51:22.480
> 
> 标签：c#, .net, mysql, database, phpmyadmin

```
private void button1_Click_1(object sender, EventArgs e)
        {
            MySqlConnection con = new MySqlConnection(MyConString);
            con.Close();
            con.Open();
            string m = "INSERT INTO Tools (TCode,TName,Description,
                          Classification,Model,Capacity,Status,Quantity,
                          Avaiability,DatePurchased,DateDelivered) 
                      VALUES (@TCode,@TName,@Description,
                             @Classification,@Model,@Capacity,@Status,@Quantity,
                            @Avaiability,@DatePurchased,@DateDelivered)";
            MySqlCommand cmd = new MySqlCommand(m, con);

            cmd.Parameters.Add("@TCode", MySqlDbType.VarChar).Value = txtCode.Text;
            cmd.Parameters.Add("@TName", MySqlDbType.VarChar).Value = txtName.Text;
            cmd.Parameters.Add("@Description", MySqlDbType.VarChar).Value = txtDesc.Text;
            cmd.Parameters.Add("@Classification", MySqlDbType.VarChar).Value = txtClass.Text;
            cmd.Parameters.Add("@Model", MySqlDbType.VarChar).Value = txtModel.Text;
            cmd.Parameters.Add("@Capacity", MySqlDbType.VarChar).Value = txtCapacity.Text;
            cmd.Parameters.Add("@Status", MySqlDbType.VarChar).Value = txtStat.Text;
            cmd.Parameters.Add("@Quantity", MySqlDbType.VarChar).Value = txtQuantity.Text;
            cmd.Parameters.Add("@Availability", MySqlDbType.VarChar).Value = ttAvail.Text;
            cmd.Parameters.Add("@DatePurchased", MySqlDbType.VarChar).Value = txtDP.Text;
            cmd.Parameters.Add("@DateDelivered", MySqlDbType.VarChar).Value = txtDD.Text;

            cmd.ExecuteNonQuery();
            con.Close();
            MessageBox.Show("Successful!", "Message");
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T02:57:10.520

不是在这里`@Avaiability`代替`@Availability`吗？

```
cmd.Parameters.Add("@Availability", MySqlDbType.VarChar).Value = ttAvail.Text; 
```

请检查哪一个是您的列的正确名称：`Avaiability`或`Availability`。

谢谢。

# javascript - 放大孩子以创建可滚动空间的最小解决方案

> ID：11876122
> 
> 赞同：-1
> 
> 时间：2012-08-09T02:51:37.793
> 
> 标签：javascript, html, css, resize, scroll

在 html 中，如果子 div 大于父 div，如果您设置了适当的样式规则，它将在父 div 上创建滚动条。

但是，我希望它在发生滚动*尝试*时（通过按箭头键，在元素上进行适当的 javascript 调用）发生在子节点上的最小所需大小扩展，以便它可以滚动到它的程度如果孩子已经那么大，无论如何都会滚动。

再次声明：如果孩子在 200px 宽度的父项中是 300px 宽度，我按右箭头键，它向右滚动 20 像素，那么如果孩子在同一场景中是 200px，我希望它放大宽度增加 20 像素，如果可能的话不要再增加，然后向右滚动 20 像素。

这一切都假设没有办法在其父元素中滚动子元素，无论它是否实际上大于其父元素。如果我没有做足够的研究，很可能会提前道歉。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T03:48:07.290

您可能知道`overflow: scroll`无论子项大小如何，该样式都会显示滚动条。您是否真的需要 Javascript 来提升子维度，而不是拥有一个更大尺寸的额外包装 div 会导致像[**本演示**](http://jsfiddle.net/gFTeG/10/)中那样的滚动？我知道 Safari 默认情况下已经在选定的滚动 div 中向下滚动大约 20px 的箭头键，我假设其他浏览器也具有此功能。

如果您确实需要使用 javascript 增加 div 的大小，jQuery 有一些有用的功能。查找左右箭头键的[.keydown() 方法（我相信分别是键码 37 和 39）和](http://api.jquery.com/keydown/)[.animate()](http://api.jquery.com/animate/)或其他一些[CSS 方法](http://api.jquery.com/category/css/)可以调整链接在一起的 div 的大小。

.scroll [() 方法](http://api.jquery.com/scroll/)也可以派上用场。您可以将调整大小代码链接到`overflow: scroll`已应用属性的滚动方法。即使滚动条为空，我也会测试浏览器是否会触发 .scroll 方法。如果没有，您可能会使子元素比父 div 宽/高 1px，然后依靠 jQuery 来进一步调整用户滚动的大小。

从广义上讲，我建议不要使用 javascript/jQuery 调整大小和滚动。与不同浏览器，尤其是移动浏览器的兼容性将不一致或无法使用。我不确切知道您的需求是什么，但如果它可以只用 HTML/CSS 来完成，它会更干净、更兼容。如果它不运行，我会保留 javascript 的可用性不会丢失的情况。

# android - 第一次单击后动画不运行

> ID：11876125
> 
> 赞同：0
> 
> 时间：2012-08-09T02:52:09.447
> 
> 标签：android, android-emulator

我第一次在模拟器中打开我的应用程序并单击图像以运行动画时没有任何反应。当我返回主菜单，然后返回我的应用程序时，动画在我没有点击任何内容的情况下运行。在此点之后的后续单击会按预期运行动画。这是在模拟器中使用 2.3.3。我没有使用 4.1 版看到这个问题。

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    image1 = (ImageView) findViewById(R.id.ImageView01);
    image2 = (ImageView) findViewById(R.id.ImageView02); 
    image2.setVisibility(View.INVISIBLE);

    image1.setClickable(true);

    image1.setOnClickListener(new OnClickListener(){

 public void onClick(View v) {

    Log.d("== My activity ===","OnClick is called");  // This gets logged on every click
    Animation fade1 = AnimationUtils.loadAnimation(MainActivity.this, R.anim.fade_in);

    image2.startAnimation(fade1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T03:10:33.703

之前的活动退出动画覆盖了您的进入动画。通常你必须停止/覆盖那些：

```
activity.overridePendingTransition(R.anim.fade1, R.anim.fade_in); 
```

# c++ - C++ OutputIterator 后增量要求

> ID：11876128
> 
> 赞同：9
> 
> 时间：2012-08-09T02:52:38.137
> 
> 标签：c++, iterator, post-increment

C++ 要求 OutputIterator 类型`X`支持形式的表达式`r++`，其中`r`是 的实例`X`。这个后缀增量必须在语义上等价于：

(*) `{ X tmp = r; ++r; return tmp; }`

并且必须返回可转换为`X const&`. 在 C++11 中，请参阅 24.2.4（但这并不是新的）。在同一部分，它说

> > 输出迭代器的算法永远不应该尝试通过同一个迭代器两次。它们应该是*单通道*算法。

给定（*），上面说我复制返回值，如`X a(r++);`

1.  假设`r`在递增之前是可取消引用的，但没有被取消引用。是否需要`a`可取消引用？如果是这样，是否必须`X a(r++); *a = t;`执行与其他情况相同的任务`*r++ = t;`？`a`和是否有任何（其他）条件`r`？

2.  否则，假设`r`在递增之前被取消引用/分配，并且其递增值（也）是可取消引用的。以下哪项（如果有）是明确定义的： (a) `*a = t;`、 (b) `++a; *a = t;`、 (c) `*r = t;`？

* * *

另请参阅后续内容：[取消引用分配给双倍递增的 OutputIterator](https://stackoverflow.com/q/11887104/985943)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T13:53:25.427

如您所述，`r++`具有操作语义

```
X operator++(int) { X tmp = r; ++r; return tmp; } 
```

我添加了返回值，`X`因为 per 24.2.2:2`Iterator`满足`CopyConstructible`，因此将构造的返回值复制`r++`到 type 的实例中是合法的`X`。

接下来，`*r++ = o`必须是有效的；这与上面的*操作语义*`{ const X &a(r++); *a = o; }`定义中仅增加了一个序列点不同，它与序列点after合并，因此复合语句与表达式语句具有相同的有效性。通过调用，具有相同的有效性和操作语义。`return tmp;`*`CopyConstructible``{ X a(r++); *a = o; }`*

 *在这种情况下

```
*r = o;
X a(r++); 
```

以下保持：

*   (a)`*a = o`无效，因为该迭代器的值已被取消引用分配；

*   (b)`++a; *a = o`无效，因为迭代器的值已经增加，违反了单遍要求，因为只有（的新值）`r`需要是可增加的：根据 24.2.4:2 的注释，*输出算法迭代器永远不应该尝试通过同一个迭代器两次*，尽管没有指定在这种情况下*通过是什么意思；*

*   (c)`*r = o`是有效的，因为与整体的唯一区别`*r = o; r++; *r = o`是 的原始值的副本的持续存在，`r`根据`CopyConstructible`要求，该副本对从中复制的值没有语义影响。

另一个有趣的问题是（对于非取消引用分配`r`）：

```
X a(r);
++r;
++r;
*a = o; 
```

标准没有直接涵盖这一点，但从`CopyConstructible`看来它应该是有效的。*

# javascript - Javascript 错误“ReferenceError：找不到变量：imenu_title”从何而来？

> ID：11876129
> 
> 赞同：3
> 
> 时间：2012-08-09T02:52:38.673
> 
> 标签：javascript, iphone, ios, onerror

我最近向 Web 应用程序添加了一个 window.onerror 处理程序。处理程序将错误的详细信息（与处理程序公开的一样多）发布到我的服务器，因此我可以看到用户看到的错误类型。问题是我看到了很多这样的：

```
ReferenceError: Can't find variable: imenu_title 
```

或者

```
ReferenceError: Can't find variable: imenu_list_id 
```

这些的用户代理始终是 iPhone，例如：

```
Mozilla/5.0 (iPhone; CPU iPhone OS 5_1_1 like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Mobile/9B206 
```

我没有使用这些变量的任何代码，而且我怀疑错误实际上来自安装在某些用户的 iPhone 浏览器上的某种扩展程序。有人能认出这些并指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:57:52.060

不幸的是，当对 window 对象使用 onerror 处理程序时，这就是中断。我从由病毒和链接扫描程序、工具栏甚至某些浏览器的某些版本添加的 javascirpt 中得到的错误比实际的页面错误更多。可理解的最常见的原因是内联 javascript（我知道这是邪恶的，但测试速度很快，并尽快用好的代码替换），它在加载它使用的库或加载它需要的 DOM 片段之前被激活。

不可能不发生这些错误，但它们很可能不会影响您的页面在浏览器中的工作方式。有关获取有用错误报告的更多信息，请参阅[https://stackoverflow.com/questions/8528005/are-there-any-tools-for-automatically-reporting-errors-from-client-side-javascri](https://stackoverflow.com/questions/8528005/are-there-any-tools-for-automatically-reporting-errors-from-client-side-javascri)

# segmentation-fault - 指针数组中的 Fortran 分段错误

> ID：11876134
> 
> 赞同：0
> 
> 时间：2012-08-09T02:54:03.580
> 
> 标签：segmentation-fault, fortran

我在 fortran 中有分段错误问题。我通过调用一个子程序来分配一个指针数组并将这个数组传递给另一个子程序。

我在 Linux 机器上通过 PGI fortran 9.0.2 编译了这个程序。这是我的测试程序。我应该如何解决这个问题？

非常感谢您的帮助。

```
module hogehoge
  implicit none
  type foo
     real, pointer :: x(:)=>null()
  end type foo
contains
  subroutine hogehoge_func(foox)
    type(foo), intent(inout) :: foox
    integer i
    allocate(foox%x(2048))
    do i = 1, 2048
       foox%x(i)=i
    end do
  end subroutine hogehoge_func
end module hogehoge

!main program------------------------------------------
program test
  use hogehoge
  implicit none
  type(foo) :: foox
  call hogehoge_func(foox)

  print*, 'in main program'
  print*, foox%x(1:20)
  call hoge(foox%x)

end program test
subroutine hoge(foox)
  use hogehoge
  implicit none
  type(foo), intent(in) :: foox

  print*, 'in subroutine'
  print*, foox%x(1)

end subroutine hoge 
```

这是输出。

```
 in main program
    1.000000        2.000000        3.000000        4.000000
    5.000000        6.000000        7.000000        8.000000
    9.000000        10.00000        11.00000        12.00000
    13.00000        14.00000        15.00000        16.00000
    17.00000        18.00000        19.00000        20.00000
 in subroutine
Segmentation fault 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T03:00:27.120

您需要更改主程序的最后一行：

```
call hoge(foox%x) 
```

至

```
call hoge(foox) 
```

如果您`hoge`在模块中定义了例程并导入了该例程，那么编译器将拾取此类型错误。

# oracle - 有没有办法在 Oracle 中保持数字精度（0.100 对 0.1）？

> ID：11876135
> 
> 赞同：1
> 
> 时间：2012-08-09T02:54:30.240
> 
> 标签：oracle, decimal, precision

有没有办法在 Oracle 中保持数字精度（0.100 对 0.1）？出于责任原因，需要存储精度。

我想避免将这些数字存储为字符串，因为还有一组存储过程可以对这些值进行一些数字运算。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T03:49:13.887

不。从 Oracle 的角度来看，数字 0.100、0.1 和 .1 都是相同的。它们都将具有相同的内部表示。

如果您需要存储精度，则需要第二列来存储精度。或者，您需要将数字存储在一`VARCHAR2`列中并将其转换为数字，然后再进行数字运算。当然，您需要在数字运算逻辑中定义处理精度的规则。例如，如果将 0.100 和 0.22 相加，结果是 0.32 还是 0.320？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T06:08:16.740

我建议存储查询和数学运算的数值，以及“输入”的字符串版本以用于审计目的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-09T03:54:19.390

我建议如果用例只需要显示额外的数字，然后将其转换为字符串作为将数据发送到报告之前的最后一步：

```
SELECT
    TO_CHAR(column_name, 999.999)
FROM
    table_name; 
```

# c# - 是否有用于绘制数学表达式的 WPF 库？

> ID：11876140
> 
> 赞同：2
> 
> 时间：2012-08-09T02:54:46.997
> 
> 标签：c#, wpf, xaml, math, wpf-controls

我正在寻找一个 WPF 库，您可以在其中插入一个字符串表达式，这可以用 XAML 表示。例如，如果我写`(2)/(4)`，这应该画一个分数（这只是一个例子）。

我真的不知道，我用谷歌搜索过，虽然我发现很多网站都建议 Bazaar，但链接都坏了。如果你能给我指一个图书馆，那就太好了。

我不是在寻找这个来评估表达式，只是在 XAML 中绘制它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T03:00:00.617

碰巧[有](https://launchpad.net/wpf-math)。

# sql - 从 Access 2003 到 SQL Server 2008？

> ID：11876142
> 
> 赞同：0
> 
> 时间：2012-08-09T02:55:07.607
> 
> 标签：sql, sql-server-2008, ms-access

客户希望将其 MS Access 2003 后端数据库托管到驻留在不同服务器中的 SQL Server 2008 中。他们将使用升迁向导将他们的数据库和表移动到 SQL 服务器中。

客户端也有用 VB 编写的 MS Access 前端应用程序。在将他们的数据库表升级为 SQL 之后，他们希望使用 SQL Server 来读取/写入数据并使用 adv。SQL Server 的可编程特性，如存储过程、函数等。我的团队将托管他们的 SQL 数据库。

客户将有越来越多的用户输入数据。那么，对于我们的团队来说，提供对 SQL Server 的访问权限以便他们只能在我们的 SQL Server 中使用他们的数据库的最佳选择是什么？有没有办法为他们提供连接字符串或类似的东西，以便他们可以测试它在他们的前端应用程序中查看他们是否可以连接到我们的 SQL Server 进行读/写？基本上我想知道连接用 VB 编写的 MS Access 2003 前端应用程序连接到托管在不同的服务器，以便用户可以读取/写入 SQL 数据库表？有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T08:05:21.477

实际上，此设置的工作方式与您的开发人员使用 c++、vb.net、c# 甚至 asp.net 没有任何不同。归根结底，这些软件开发工具（例如 c++、FoxPro 或 MS Access）只是让您编写软件的工具。Access 连接到 MySql 或 Oracle 或插入您最喜欢的 X 数据库品牌的能力从一开始就存在。

只要您的数据库支持所谓的“开放式数据库连接”，那么您就可以参加比赛了。以及如何设置该数据库服务器以允许使用 C#、FoxPro 或 MS Access 编写的某些软件，据我所知并不会真正改变任何事情。

因此，Access 与任何其他软件工具（例如 c++ 或 vb.net）一样 - 它是一种工具，可让您编写代码并将应用程序和用户界面连接到您选择的某些数据库系统。

Access 在此处使用的连接技术基于行业标准，因此对于您现在在本地运行且使用 SQL Server 的任何其他应用程序，您对服务器端的设置和维护将非常相似。

这里唯一相关的问题是，在 Access 中，您可以选择两种数据对象模型，ADO 和 DAO。目前，由于微软正在贬低 ADO，他们正在继续对 DAO 进行投资，并且还建议使用开放式数据库连接。例如，Access 2010 附带了对 SQL Azure (cloud sql) 的支持，该支持基于开放的数据库连接。

因此，与 2003 年一样，此时 Access 中推荐的数据对象模型是使用 DAO。

您可以在此处阅读有关 SQL Server 中 ADO 支持折旧的信息：

[http://blogs.msdn.com/b/sqlnativeclient/archive/2011/08/29/microsoft-is-aligning-with-odbc-for-native-relational-data-access.aspx](http://blogs.msdn.com/b/sqlnativeclient/archive/2011/08/29/microsoft-is-aligning-with-odbc-for-native-relational-data-access.aspx)

虽然大量的一般导出和导入以及链接到 SQL 服务器的操作可以 100% 发生在 Access 内部，但这些用户仍然需要一组 Access 之外的客户端工具来有效地使用 SQL 服务器，如果随着时间的推移他们要开始使用 SQL 服务器功能。因此，这表明他们需要某些版本的 SSMS（Sql server management studio）。在这种情况下，SSMS 的免费快递版本应该足够了。

# xaml - Windows8 中的首选字体大小是否需要计算器？

> ID：11876143
> 
> 赞同：5
> 
> 时间：2012-08-09T02:55:38.383
> 
> 标签：xaml, fonts, windows-8, microsoft-metro, font-size

在查看一些官方的 Windows8/“Metro”材料时，我看到了这行 xaml：

```
<TextBlock Text="Contoso Cookbook" FontFamily="Segoe UI" FontWeight="SemiLight" FontSize="26.667" /> 
```

什么？！？字体大小为 26.667？我意识到这是 40 的 2/3 和 32 的 5/6，所以也许那里发生了一些转换，但这会是设置字体大小的首选方式吗？如果是，未来的指导方针是什么这些看似随机的尺寸？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T03:41:42.720

有预定义的 Windows 8 样式，位于您的项目中的`Common\StandardStyles.xaml`. 以这些为标准。

你说的尺寸属于`SubheaderTextStyle`。

这就是为什么你会得到“奇怪”的尺寸。如果您查看[排版指南](http://msdn.microsoft.com/en-us/library/windows/apps/hh700394.aspx)，您会看到以点为单位的值。但是，在 XAML 中，您以像素为单位指定字体大小。配套样品：96 PPI（每英寸像素）显示屏。1英寸，你得到72分。做简单的数学：

```
96 pixels per inch / 72 points per inch = 1.(3) pixels/point 
```

所以，`26.667 / 1.(3) ~ 20pt`

这样，您将获得一致的字体大小。

# javascript - JavaScript 可以设置哪些 HTTP 标头？

> ID：11876145
> 
> 赞同：13
> 
> 时间：2012-08-09T02:56:47.813
> 
> 标签：javascript, http, http-headers, xmlhttprequest

W3C 是否指定 XMLHttpRequest 可以设置哪些 HTTP 标头？如果是这样，他们是否发布了一份文件，以安全原因证明这些要求的合理性？

浏览器是否可以自行决定限制 HTTP 标头？如果是这样，是否有在线文档或文档集列出了不同 XHR 实现的怪癖，或者是否有必要在每个实现的文档中找到该信息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T12:38:19.610

W3C 有[这个](http://www.w3.org/TR/XMLHttpRequest/#the-setrequestheader-method)关于允许的标头的规范`setRequestHeader`

> 如果标头与以下标头之一不区分大小写，则终止这些步骤：
> 
> *   接受字符集
> *   接受编码
> *   访问控制请求标头
> *   访问控制请求方法
> *   联系
> *   内容长度
> *   曲奇饼
> *   饼干2
> *   内容传输编码
> *   日期
> *   预计
> *   主持人
> *   活着
> *   起源
> *   推荐人
> *   TE
> *   预告片
> *   传输编码
> *   升级
> *   用户代理
> *   通过
> 
> …或者如果标头的开头是 Proxy- 或 Sec- 不区分大小写的匹配项（包括标头只是 Proxy- 或 Sec- 时）。
> 
> 上述标头由用户代理控制，以使其控制传输的这些方面。**这在一定程度上保证了数据的完整性。**不允许设置以 Sec- 开头的标头名称以允许生成新标头，这些标头保证不会来自 XMLHttpRequest。

你也可以考虑：

如果 header 不在[author-request-headers](http://www.w3.org/TR/XMLHttpRequest/#author-request-headers)列表中，则将 header 及其关联值附加到列表中并终止这些步骤。

关于浏览器的实现，我发现了这个很好的测试：[https](https://dvcs.w3.org/hg/webapps/diff/5814514eeba4/tests/XMLHttpRequest/setrequestheader-header-forbidden.htm) ://dvcs.w3.org/hg/webapps/diff/5814514eeba4/tests/XMLHttpRequest/setrequestheader-header-forbidden.htm你不能用它来找到当前的差异。

例如，**IE**对标头的安全性有以下定义：

[IE](http://msdn.microsoft.com/en-us/library/ms536752.aspx)：请参阅[RFC2616，第 14 节](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)：标头字段定义以获取标准标头的一般列表。服务器最终负责遵守请求的标头。到目前为止，最常见的请求标头是 Content-Type，它是某些 XML Web services 所需要的。

# dart - DART 中是否有类似的方式用于声明性 ui？

> ID：11876146
> 
> 赞同：1
> 
> 时间：2012-08-09T02:56:51.243
> 
> 标签：dart

由于 Dart 是一种面向浏览器的语言，它看起来构建 UI 的演示代码都是基于 dom 的。所以我的问题是：我们可以在 Dart 中做声明式 ui 样式吗？像 GWT 的 UIBinder 还是 JavaFX 的 FXML？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T06:47:45.370

像 GWT 的 UiBinder 中的声明式 UI 定义是 Dart 中期待已久的功能。不幸的是，还没有用于此目的的内置 Dart 库。[谷歌自己的第一个模板库方法](http://dart.googlecode.com/svn/branches/bleeding_edge/dart/utils/template/)在 6 月 11 日最后一次提交时被处理掉了。显然，谷歌正在研究一种全新的 UI 方法。

但是，有 3rd 方开发人员在 Dart 之上提供了包含声明性 UI 定义的框架，例如[**Buckshot UI**框架](https://github.com/prujohn/Buckshot)和这里的[演示它是如何工作](http://www.youtube.com/watch?v=LOacOkmd9FI)的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T02:21:43.883

请查看John Evans 的[Buckshot](https://github.com/prujohn/Buckshot)。这是 Dart 的声明式 UI。

这是一个例子：

```
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    <title>TreeView</title>
  </head>
  <body>
    <div id='BuckshotHost'></div>

    <script id='main' type='text/xml'>
        <treeview name='tvDemo' borderthickness='1' bordercolor='Black' >
            <treenode header='Tree Node L1A' >
                <treenode header='Tree Node L2A (custom icon)' >
                    <fileicon>
                        <border width='20' height='20' cornerradius='20' background='Orange' />
                    </fileicon>
                </treenode>
                <treenode header='Tree Node L2B'>
                    <treenode header='Tree Node L3A' />
                    <treenode header='Tree Node L3B' />
                    <treenode header='Tree Node L3C' />
                </treenode>
                <treenode header='Tree Node L2C' />
            </treenode>
            <treenode header='Tree Node L1B' />
        </treeview>
    </script>

    <script type="application/dart" src="TreeViewDemo.dart"></script>
    <script src="dart.js"></script>
  </body>
</html> 
```

# php - PHP在数组中创建组合

> ID：11876147
> 
> 赞同：0
> 
> 时间：2012-08-09T02:57:06.870
> 
> 标签：php, arrays, implode

假设我有一个包含： 的数组`apples, watermelons, grapes`。我想要做的是创建另一个数组

`apples, apples;watermelons, apples;watermelons;grapes`

我尝试使用 implode，但这并不是我想要的。此任务是否有内置功能？谢谢！

编辑：为澄清起见，创建的字符串基本上是这三个元素的组合。所以创建的数组也可能如下所示：

`apples, apples-watermelons, apples-watermelons-grapes`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T03:06:19.337

```
<?php
$my_array = array('apples','watermelons','grapes');
$string = '';
$result = array();
for ($i=0; $i<count($my_array); $i++) {
   $string .= $my_array[$i];
   $result[] = $string;
   $string .= '-';
}
print_r($result); 
```

也可能有一种方法可以使用`array_walk()`或`array_map()`或其他`array_*()`功能之一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T03:27:00.977

一种优雅的方法是使用[array_reduce](http://www.php.net/manual/en/function.array-reduce.php)

```
<?php
$my_array = array('apples','watermelons','grapes');

function collapse($result, $item) {
    $result[] = end($result) !== FALSE ? end($result) . ';' . $item : $item;
    return $result;
}

$collapsed = array_reduce($my_array, "collapse", array());
var_dump($collapsed);
?> 
```

测试：

```
matt@wraith:~/Dropbox/Public/StackOverflow$ php 11876147.php 
array(3) {
  [0]=>
  string(6) "apples"
  [1]=>
  string(18) "apples;watermelons"
  [2]=>
  string(25) "apples;watermelons;grapes"
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T03:34:06.027

```
<?php

$array = array("apples", "watermelons", "grapes");
$newarray = $array;
for ($i = 1; $i < count($array); $i++)
{
   $newarray[$i] = $newarray[$i - 1] . ";" . $newarray[$i] ;
}

print_r($newarray);
?> 
```

**输出：**

```
Array
(
    [0] => apples
    [1] => apples;watermelons
    [2] => apples;watermelons;grapes
) 
```

# android - 在具有多个进程的应用程序上进行 Robotium 单元测试

> ID：11876151
> 
> 赞同：1
> 
> 时间：2012-08-09T02:57:24.877
> 
> 标签：android, unit-testing, robotium, multiple-processes

我编写了一个在多个进程中运行活动的应用程序。

我通过为我的应用程序创建一个新的测试项目集目标包来尝试 Robotium。当我执行它时，测试停止并显示以下错误消息：

```
Error in testDisplayBlackBox:
java.lang.RuntimeException: Intent in process com.abc.def resolved to different process com.abc.def:mail: Intent { act=android.intent.action.MAIN flg=0x10000000    cmp=com.abc.def/com.abc.def.email.activity.Welcome }
    at android.app.Instrumentation.startActivitySync(Instrumentation.java:377)
    at android.test.InstrumentationTestCase.launchActivityWithIntent(InstrumentationTestCase.java:119)
    at android.test.InstrumentationTestCase.launchActivity(InstrumentationTestCase.java:97)
    at android.test.ActivityInstrumentationTestCase2.getActivity(ActivityInstrumentationTestCase2.java:104)
    at com.abc.def.test.TestApk.setUp(TestApk.java:31)
    at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:190)
    at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:175)
    at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:555)
    at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1584)

Test results for InstrumentationTestRunner=.E
Time: 0.027

FAILURES!!!
Tests run: 1,  Failures: 0,  Errors: 1 
```

如果我手头有源代码，是否有可能有任何解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T23:02:50.267

Robotium 不会测试你的包之外的活动......我想这就是为什么当你通过 Intent 移动到不同的活动时，Robotium 会在那里丢失它！

# macos - Mac 防火墙阻止正确关闭多个多播 UDP 端口

> ID：11876152
> 
> 赞同：0
> 
> 时间：2012-08-09T02:57:34.827
> 
> 标签：macos, udp, osx-lion, ipfw

在我的 Mac OSX 10.74 上，我遇到了这种行为，我已经接近得出结论，这是 Mac OSX 的防火墙软件中的一个错误。基本上，在应用程序退出后，会话期间使用的多播 UDP 端口除了一个之外没有关闭。

出于本演示的目的，我设置了两个应用程序。一种叫做 UDPSender，它只是向两个多播组发送两条消息。以下代码段可以从 Mac 或 iOS 设备运行。GCDAsyncUdpSocket 是最新版本。

```
GCDAsyncUdpSocket *udpSocket1;
GCDAsyncUdpSocket *udpSocket2;
udpSocket1 = [[GCDAsyncUdpSocket alloc] initWithDelegate:self delegateQueue:dispatch_get_main_queue()];
udpSocket2 = [[GCDAsyncUdpSocket alloc] initWithDelegate:self delegateQueue:dispatch_get_main_queue()];
NSData *data = [@"A test message from socket1" dataUsingEncoding:NSUTF8StringEncoding];
[udpSocket1 sendData:data toHost:@"239.1.1.110" port:46110 withTimeout:-1 tag:1];
data = [@"A test message from socket2" dataUsingEncoding:NSUTF8StringEncoding];
[udpSocket2 sendData:data toHost:@"239.1.1.120" port:46120 withTimeout:-1 tag:1]; 
```

我为 Mac 创建了另一个名为 UDPReceiver 的应用程序。（这是行为不端）

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    // Insert code here to initialize your application
    GCDAsyncUdpSocket *udpSocket1;
    GCDAsyncUdpSocket *udpSocket2;
    udpSocket1 = [[GCDAsyncUdpSocket alloc] initWithDelegate:self delegateQueue:dispatch_get_main_queue()];
    udpSocket2 = [[GCDAsyncUdpSocket alloc] initWithDelegate:self delegateQueue:dispatch_get_main_queue()];
    NSError *error = nil;

    // udpSocket1
    if ([udpSocket1 bindToPort:46110 error:&error])
    {
        if (![udpSocket1 joinMulticastGroup:@"239.1.1.110" error:&error])
        {
            NSLog(@"udpSocket1 multicast failed to multicast group");
        }
        if (![udpSocket1 beginReceiving:&error])
        {
            [udpSocket1 close];
            NSLog(@"udpSocket1 rrror starting server (recv): %@", error);
        }
    } else  
    {
        NSLog(@"udpSocket1 rrror starting server (bind): %@", error);
        //        return;
    }

    // udpSocket2
    if ([udpSocket2 bindToPort:46120 error:&error])
    {
        if (![udpSocket2 joinMulticastGroup:@"239.1.1.120" error:&error])
        {
            NSLog(@"udpSocket2 multicast failed to multicast group");
        }
        if (![udpSocket2 beginReceiving:&error])
        {
            [udpSocket2 close];
            NSLog(@"udpSocket2 rrror starting server (recv): %@", error);
            return;
        }
    } else 
    {
        NSLog(@"udpSocket2 rrror starting server (bind): %@", error);
        //        return;
    }

}

- (void)udpSocket:(GCDAsyncUdpSocket *)sock didReceiveData:(NSData *)data
      fromAddress:(NSData *)address
withFilterContext:(id)filterContext
{
    NSString *msg = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
    NSLog(@"Receiving: %@", msg);
} 
```

像这样的测试序列：打开 Mac 的防火墙。启动 UDPReceiver，启动 UDPSender。在 UDPReceiver 机器上，Mac 的防火墙提示许可……选择允许。结果是两个正确的日志语句：

```
2012-08-07 19:56:53.594 UDPReceiver[290:403] Receiving: A test message from socket1
2012-08-07 19:56:53.595 UDPReceiver[290:403] Receiving: A test message from socket2 
```

接下来，关闭 UDPReceiver，然后再次重新打开 UDPReceiver。您将立即看到此日志。

```
2012-08-07 19:39:13.639 UDPReceiver[810:403] udpSocket1 rrror starting server (bind): Error Domain=NSPOSIXErrorDomain Code=48 "Address already in use" UserInfo=0x7fc7b3109d20 {NSLocalizedDescription=Address already in use, NSLocalizedFailureReason=Error in bind() function} 
```

如果此时重启 UDPSender，你会看到另一个日志输出：

```
2012-08-07 19:39:29.939 UDPReceiver[810:403] Receiving: A test message from socket2 
```

我打开 Mac 终端并使用此命令查看活动端口： `netstat -anf inet`. 第一张图是第一次执行 UDPReceiver。第二张图片是在 UDPReceiver 关闭之后。

我发现有两种方法可以解决这个问题：

1.  重新启动我的 Mac。然后它将再次正常工作。但上述症状仍然存在。
2.  完全关闭防火墙。这将彻底消除问题。

有没有人遇到过这种现象？任何建议如何（编程）解决这个问题？

![在此处输入图像描述](../Images/96ccc6f483740980259e78012894690e.png)

![在此处输入图像描述](../Images/3e2f11f82d87ad3efef256bc523978e3.png)

# php - 删除所有这些字符

> ID：11876155
> 
> 赞同：0
> 
> 时间：2012-08-09T02:58:18.743
> 
> 标签：php

> **可能重复：**
> [正则表达式：去除非字母数字或标点符号](https://stackoverflow.com/questions/3050352/regex-strip-non-alpha-numeric-or-punctuation)

我想删除字符串中的所有字符，但这些字符除外

Aplha 和数字以及字符 @#()-._,

我怎么能做到这一点？

# android - android 如何设置隐藏这个栏（平板Android 4.0.3）

> ID：11876158
> 
> 赞同：0
> 
> 时间：2012-08-09T02:58:35.467
> 
> 标签：android

我正在尝试将我的应用程序设置为全屏（没有任何栏）我如何编码来设置它。(Android 版本 4.0.3) 非常感谢![在此处输入图像描述](../Images/fca6f9bc4bf8b199e2e60c4da7368453.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T03:14:55.433

你不能隐藏那个栏。[在 Honeycomb(3.0) 上存在一个](http://android.serverbox.ch/?p=306)允许隐藏它的错误（在有根设备上），但在 ICS(4.0) 中已修复。（[注意：有关适用于 3.0 的更多技术，请参阅此答案](https://stackoverflow.com/a/5956361/507810)）截至目前，还没有办法在 4.0 上执行此操作。不幸的是，由于设备不再具有物理按钮，因此必须将导航按钮（主页和返回）放在屏幕上。因为如果您要隐藏它，该栏包含导航按钮，因此可以通过不允许他们离开您的应用程序（至少在他们重新启动进入安全模式之前）将用户“锁定”在设备之外。

因此，如果您想这样做，则必须制作自己的操作系统的自定义版本以允许它。

# debugging - Windows NTSD 调试器

> ID：11876160
> 
> 赞同：1
> 
> 时间：2012-08-09T02:58:55.107
> 
> 标签：debugging

我正在使用 NTSD 对故障转储文件进行一些调试。是否可以将我现在在控制台上看到的所有输出重定向到 txt 文件？我正在获取所有线程的所有调用堆栈，但是在调试器窗口中看不到该信息。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T03:06:10.803

查看`.logopen`and`.logclose`命令。你应该能够做`.logopen foo.txt`，发出你的命令（我假设是`~*k`），然后当它完成后，做`.logclose`。

# backbone.js - 在添加/渲染集合中的所有项目之前，如何防止 CollectionView 渲染？

> ID：11876166
> 
> 赞同：2
> 
> 时间：2012-08-09T02:59:21.867
> 
> 标签：backbone.js, marionette

我想显示一条加载消息，直到集合视图及其子视图完全呈现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T13:02:50.577

`emptyView`当集合中没有项目时，您可以指定要呈现的。集合视图将自动处理此问题。每当它看到集合下降到零项目时，它都会改为呈现它。用它来显示您的“加载”消息。

```
 LoadingMessageView = Backbone.ItemView.extend({
  template: "#loading-message-template"
});

ItemView = Backbone.ItemView.extend({
  template: "#normal-item-view"
});

MyCollectionView = Backbone.CollectionView.extend({
  emptyView: LoadingMessageView,
  itemView: ItemView
}); 
```

然后在您的代码中，您可以将尚未加载到视图中的集合传递给视图，显示它，然后加载它。

```
 var col = new MyCollection();
var colView = new MyCollectionView({
  collection: col
});

App.someRegion.show(colView);

col.fetch(); 
```

这将呈现并显示集合视图，显示`emptyView`最初的加载消息。当集合完成获取时，“reset”事件将触发，集合视图将重新呈现所有项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T10:46:38.037

可以这么简单吗？

```
// code simplified no tested
var MyCollectionView = Backbone.View.extend({
  render: function(){
    $("#loading").show();
    // render stuff
    $("#loading").hide();
  }
}); 
```

我错过了什么吗？

# performance - Netbeans 7.2 FTP 速度非常慢

> ID：11876167
> 
> 赞同：6
> 
> 时间：2012-08-09T02:59:36.920
> 
> 标签：performance, netbeans, ftp, netbeans-7.2

我刚刚创建了一个连接到远程网站以编辑文件的新项目。已经10分钟了，还没有下载完。

该网站不超过 30mb，而且我的互联网连接良好。

还有其他人遇到这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T09:05:26.800

验证 NetBeans 正在做什么（在 IDE 日志中，在“输出”窗口中）。还尝试打开/关闭被动/主动模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T16:07:42.050

是的，对我来说也是。

我刚刚用 Netbeans 上传了一个项目，花了 4:47 分钟。我对 FileZilla 做了同样的事情，花了 1:48 分钟。

我认为这是因为它做了许多其他操作。例如，上传相同的文件：

网豆：

```
 ...
RNFR forms.php
RNTO forms.php.old
Rename successful.
RNFR forms.php.new
RNTO forms.php
Rename successful.
DELE formus.php.old
File delete OK.
  ... 
```

Filezilla：

```
 ...
Command: put "P:\Projects\...\forms.php" "forms.php"
State:   Successfully transfered, transfered 4.096 bytes in 1 seconds
  ... 
```

他们应该让我们配置这种行为。

# c# - 用于从图像中捕获字符的 OCR 引擎

> ID：11876168
> 
> 赞同：2
> 
> 时间：2012-08-09T02:59:38.413
> 
> 标签：c#, ocr, tesseract, tessnet2

我正在为 Tesseract OCR 引擎使用 c# tessnet2 包装器来捕获图像文件的字符。我一直在到处搜索 tessnet2 是否有任何内置函数来覆盖某些字符并将它们保存到它正在读取的同一个图像文件中，但没有找到任何相关的内容。所以我想做的是根据我从 tessnet2 收到的内容创建一个新的想象文件，但我需要以相同的方式创建新图像，但只更改新创建的图像中的一些内容。我不确定我是否使用了正确的方法，或者是否有其他 c# 程序集允许您从图像文件中读取字符，同时允许您根据需要进行操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T03:07:18.310

祝你好运——但 tess 无法用正确的字体替换。光栅图形通常不存储字形信息。即使是这样，您也可能会违反与您要书写的字体相关的许可和/或版权。我不是 OCR 方面的专家，但我会自信地说，这不是现成的东西在野外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T03:12:01.173

扩展布赖恩的回答：您需要自己做。我没有使用过 Tesseract，但我使用过 Nuance OCR 引擎。它将返回字体信息以及它已识别的字符的坐标（请注意，您很可能必须计算实际的图像坐标，因为 OCR 引擎会在执行识别之前对图像进行校正）。一旦你得到坐标和纠偏以便计算实际坐标，你就可以使用任何图像处理库（Leadtools、Accusoft 等）或直接 GDI+ 函数来清除字符，然后使用字体信息和大小信息创建一个新角色并将其合并到图像中。这不是微不足道的，但肯定是可行的。

编辑：当我写最初的答案时已经很晚了，想澄清**字体信息**
的含义。 OCR 引擎将为您提供有关点大小、粗体/斜体和字体系列（Seriph 等）的信息。我不知道有哪一种能告诉您文档所在的确切字体。如果您有要处理的文档样本，那么您可以根据 OCR 引擎提供的信息做出很好的猜测。

# cakephp - cakePHP 命名约定如何工作？

> ID：11876170
> 
> 赞同：5
> 
> 时间：2012-08-09T02:59:47.570
> 
> 标签：cakephp

我对 PHP 比较陌生。开始学习 PHP，但后来遇到了 cakePHP，据说可以加快开发时间。

阅读文档和博客教程后，我仍然不明白命名约定。我想在我开始做一些例子之前我不会知道，但是为了让我开始，有人可以向我解释 cakePHP 如何将数据库表关联到控制器/模型层吗？

下面的代码是教程的摘要。它是一个将 post id 传递给视图层的控制器方法。数据库表称为“posts”。$this->Post 指的是 Post 的模型类，对应于数据库中帖子的复数形式。

```
public function view($id = null) {
  $this->Post->id = $id;
  $this->set('post', $this->Post->read());
} 
```

好的，我明白了。然后，在文档中它指的是以下相关性：

**真正的大人物和真正的大人物**

所以看起来相关性实际上遵循英语语义中的规则。这是否意味着 cakePHP 有一个单数和复数单词列表隐藏在它工作的某个地方？例如，我可以在不破坏代码的情况下使用以下相关性吗？

**这和这些**或**人和人**或**脚和脚**或**驼鹿和驼鹿**或**鹅和鹅**

此外，如果我的数据库中有单数和复数形式的表，它会破坏代码，还是只会与复数形式的表相关联？

只是觉得莫名其妙......为什么他们不能像 for like 和前缀一样匹配命名约定？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-09T04:32:57.573

# 变形器

CakePHP 使用它的`Inflector`类来确定事物的复数形式。

由于命名约定规定模型名称是单数，表名称是复数，因此它使用变形器来应用英语语义/规则来确定复数。

如果您在理解 Inflector 的输出方面需要一些帮助，可以使用[CakePHP inflector 网站](http://inflector.cakephp.org)。

# 多元化例子

```
Model name: Post
Table name: posts

Model name: User
Table name: users

Model name: Sheep
Table name: sheep

Model name: News
Table name: news

Model name: Radius
Table name: radii 
```

检查 Inflector 站点以确保。

# 非标准表名

虽然 CakePHP 为命名和约定提供了标准规则集，但没有一个是一成不变的。如果要更改用于特定模型的表名，只需在模型中指定表名：

```
class Thing extends AppModel {
    public $useTable = 'somethings';
} 
```

或者，如果您想要一个不使用表格的模型：

```
class Post extends AppModel {
    public $useTable = null;
} 
```

# file - PHP dirname() 丢失最后一个文件夹

> ID：11876171
> 
> 赞同：2
> 
> 时间：2012-08-09T02:59:49.900
> 
> 标签：file, path, explode, dirname

## 问题

这是一个非常容易理解的问题。

我让用户提交一个 URL，例如“http://example.com/path/filename.html”。

我正在使用 PHP 的`dirname()`函数来获取这个 URL 的所谓“基础”。对于上面的示例，这将是“http://example.com/path”。

当用户输入以下内容时，我的问题出现了：

```
http://example.com/blog 
```

如果您在浏览器中输入上述内容，您将在名为“blog”的文件夹中看到 index.php 或 .html 页面。但是，PHP`dirname()`将只返回“http://example.com”。

我不确定它是否认为“博客”是一个无扩展名的文件，如果存在的话，但我真的找不到解决方案。

## 我尝试过的事情

我首先尝试使用这种快速方法获取 URL 的扩展名：

```
$url = 'http://example.com/index.php';
$file_extension = end(explode('.', $filename)); 
```

然后，我会使用 PHP 检查扩展是否存在`empty()`。如果扩展名存在，则意味着在文件夹后输入了一个文件名，例如“http://example.com/path/file.html”，并且`dirname()`是完美的。如果扩展名不存在，则没有输入文件并且路径中的最后一项是文件夹，因此它已经是“基础”。

但是，在简单的“http://example.com/path/”的情况下，上面将返回“.com/path/”作为文件扩展名，我们都知道它不存在。在这种情况下，我会使用该`dirname()`函数并切断“/path/”。

编辑：

使用的扩展名`basename($url)`不起作用，因为如果用户输入“http://example.com”`basename()`返回“example.com”，其扩展名应该是“.com”

### 希望有人遇到过同样的问题并知道解决方案。我仍在寻找，但任何答案都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T03:02:31.577

**编辑** 好的，上次我放弃之前：

```
function getPath($url){
    $parts=explode("/",$url);
    $patharray=array(".","http:","https:");
    if(!in_array(pathinfo($url,PATHINFO_DIRNAME),$patharray) && strpos($parts[count($parts)-1], ".")!==false)
        unset($parts[count($parts)-1]);
    $url=implode("/",$parts);
    if(substr($url,-1)!='/')
        $url.="/";
    return $url;
}
echo getPath("http://www.google.com/blog/testing.php")."\n";
echo getPath("www.google.com/blog/testing.php")."\n";
echo getPath("http://www.google.com/blog/")."\n";
echo getPath("http://www.google.com/blog")."\n";
echo getPath("http://www.google.com")."\n";
echo getPath("http://www.google.com/")."\n";
echo getPath("www.google.com/")."\n";
echo getPath("www.google.com")."\n"; 
```

最后一部分带有“。”的任何网址。in 它被解析出来，否则它就会被单独留下。它用于`pathinfo()`检查它是否只是一个域（“google.com”或“http://www.google.com”），然后留下最后一部分，因为会有一个“。” 在里面。这是脚本输出：

```
http://www.google.com/blog/
www.google.com/blog/
http://www.google.com/blog/
http://www.google.com/blog/
http://www.google.com/
http://www.google.com/
www.google.com/
www.google.com/ 
```

# javascript - 如何从对象 URL 获取文件或 blob？

> ID：11876175
> 
> 赞同：190
> 
> 时间：2012-08-09T03:00:12.593
> 
> 标签：javascript, html, fileapi, blobs

我允许用户通过拖放和其他方法将图像加载到页面中。删除图像时，我使用`URL.createObjectURL`转换为对象 URL 来显示图像。我不会撤销 url，因为我会重复使用它。

所以，当需要创建一个`FormData`对象时，我可以允许他们上传一个包含其中一个图像的表单，有没有什么方法可以将该对象 URL 反转回一个`Blob`或者`File`然后我可以将它附加到一个`FormData`目的？

* * *

## 回答 #1

> 赞同：195
> 
> 时间：2018-09-19T16:04:41.453

现代解决方案：

```
let blob = await fetch(url).then(r => r.blob()); 
```

url 可以是对象 url 或普通 url。

* * *

## 回答 #2

> 赞同：82
> 
> 时间：2012-08-10T12:25:51.690

正如 genkev 在他上面的评论中提到的那样，看起来最好/唯一的方法是使用 async xhr2 调用：

```
var xhr = new XMLHttpRequest();
xhr.open('GET', 'blob:http%3A//your.blob.url.here', true);
xhr.responseType = 'blob';
xhr.onload = function(e) {
  if (this.status == 200) {
    var myBlob = this.response;
    // myBlob is now the blob that the object URL pointed to.
  }
};
xhr.send(); 
```

更新（2018 年）：对于可以安全使用 ES5 的情况，Joe 在下面有一个更简单的基于 ES5 的答案。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2018-02-06T11:44:10.240

也许有人在使用 React/Node/Axios 时发现这很有用。我在 UI 上将它用于我的 Cloudinary 图像上传功能`react-dropzone`。

```
 axios({
        method: 'get',
        url: file[0].preview, // blob url eg. blob:http://127.0.0.1:8000/e89c5d87-a634-4540-974c-30dc476825cc
        responseType: 'blob'
    }).then(function(response){
         var reader = new FileReader();
         reader.readAsDataURL(response.data); 
         reader.onloadend = function() {
             var base64data = reader.result;
             self.props.onMainImageDrop(base64data)
         }

    }) 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2019-09-20T04:34:12.443

使用 fetch 例如如下：

```
 fetch(<"yoururl">, {
    method: 'GET',
    headers: {
        'Content-Type': 'application/json',
        'Authorization': 'Bearer ' + <your access token if need>
    },
       })
.then((response) => response.blob())
.then((blob) => {
// 2\. Create blob link to download
 const url = window.URL.createObjectURL(new Blob([blob]));
const link = document.createElement('a');
link.href = url;
link.setAttribute('download', `sample.xlsx`);
 // 3\. Append to html page
 document.body.appendChild(link);
 // 4\. Force download
 link.click();
 // 5\. Clean up and remove the link
 link.parentNode.removeChild(link);
}) 
```

您可以粘贴到 Chrome 控制台上进行测试。使用“sample.xlsx”下载的文件希望它可以提供帮助！

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2021-04-08T06:29:37.137

再次获取 Blob URL 的问题在于，这将创建 Blob 数据的完整**副本**，因此您将拥有两次，而不是只在内存中保存一次。使用大 Blob，这会很快破坏您的内存使用量。

不幸的是，File API 没有让我们访问当前链接的 Blob，当然他们认为网络作者应该在创建时自己存储该 Blob，这是真的：

**最好的方法是存储您在创建 blob:// URL 时使用的对象。**

如果您担心这会阻止 Blob 被垃圾收集，那么您是对的，但是首先 blob:// URL 也是如此，直到您撤销它。所以给自己一个指向那个 Blob 的指针不会改变任何事情。

但是对于那些不负责创建 blob:// URI 的人（例如，因为库制作了它），我们仍然可以通过覆盖默认的*URL.createObjectURL*和*URL.revokeObjectURL*方法来自己填补这个 API 漏洞，以便他们存储对传递对象的引用。

确保在调用生成 blob:// URI 的代码之前调用此函数。

```
// Adds an URL.getFromObjectURL( <blob:// URI> ) method
// returns the original object (<Blob> or <MediaSource>) the URI points to or null
(() => {
  // overrides URL methods to be able to retrieve the original blobs later on
  const old_create = URL.createObjectURL;
  const old_revoke = URL.revokeObjectURL;
  Object.defineProperty(URL, 'createObjectURL', {
    get: () => storeAndCreate
  });
  Object.defineProperty(URL, 'revokeObjectURL', {
    get: () => forgetAndRevoke
  });
  Object.defineProperty(URL, 'getFromObjectURL', {
    get: () => getBlob
  });
  const dict = {};

  function storeAndCreate(blob) {
    const url = old_create(blob); // let it throw if it has to
    dict[url] = blob;
    return url
  }

  function forgetAndRevoke(url) {
    old_revoke(url);
    try {
      if(new URL(url).protocol === 'blob:') {
        delete dict[url];
      }
    } catch(e){}
  }

  function getBlob(url) {
    return dict[url] || null;
  }
})();

//  Usage:
const blob = new Blob( ["foo"] );
const url = URL.createObjectURL( blob );
console.log( url );
const retrieved = URL.getFromObjectURL( url );
console.log( "retrieved Blob is Same Object?", retrieved === blob );
fetch( url ).then( (resp) => resp.blob() )
  .then( (fetched) => console.log( "fetched Blob is Same Object?", fetched === blob ) );
```

另一个优点是它甚至可以检索[MediaSource](https://developer.mozilla.org/en-US/docs/Web/API/MediaSource)对象，而在这种情况下，获取解决方案只会出错。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-12-12T21:58:01.357

请参阅[从 XHR 请求中获取 BLOB 数据，](https://stackoverflow.com/questions/8022425/getting-blob-data-from-xhr-request)其中指出 BlobBuilder 在 Chrome 中不起作用，因此您需要使用：

```
xhr.responseType = 'arraybuffer'; 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-11-22T11:52:47.483

不幸的是，@BrianFreud 的回答不符合我的需求，我有一点不同的需求，我知道这不是@BrianFreud 问题的答案，但我把它留在这里是因为很多人带着我同样的需要来到这里。我需要诸如“如何从 URL 获取文件或 blob？”之类的内容，而当前的正确答案不符合我的需求，因为它不是跨域的。

我有一个使用 Amazon S3/Azure 存储中的图像的网站，并在那里存储使用 uniqueidentifiers 命名的对象：

**示例：http://****.blob.core.windows.net/systemimages/bf142dc9-0185-4aee-a3f4-1e5e95a09bcf**

其中一些图像应该从我们的系统界面下载。为了避免通过我的 HTTP 服务器传递这个流量，因为这个对象不需要任何安全性来访问（通过域过滤除外），我决定在用户​​的浏览器上发出直接请求并使用本地处理来给文件一个真实的名称和延期。

为此，我使用了 Henry Algus 的这篇精彩文章： [http ://www.henryalgus.com/reading-binary-files-using-jquery-ajax/](http://www.henryalgus.com/reading-binary-files-using-jquery-ajax/)

**1.第一步：为jquery添加二进制支持**

```
/**
*
* jquery.binarytransport.js
*
* @description. jQuery ajax transport for making binary data type requests.
* @version 1.0 
* @author Henry Algus <henryalgus@gmail.com>
*
*/

// use this transport for "binary" data type
$.ajaxTransport("+binary", function (options, originalOptions, jqXHR) {
    // check for conditions and support for blob / arraybuffer response type
    if (window.FormData && ((options.dataType && (options.dataType == 'binary')) || (options.data && ((window.ArrayBuffer && options.data instanceof ArrayBuffer) || (window.Blob && options.data instanceof Blob))))) {
        return {
            // create new XMLHttpRequest
            send: function (headers, callback) {
                // setup all variables
                var xhr = new XMLHttpRequest(),
        url = options.url,
        type = options.type,
        async = options.async || true,
        // blob or arraybuffer. Default is blob
        dataType = options.responseType || "blob",
        data = options.data || null,
        username = options.username || null,
        password = options.password || null;

                xhr.addEventListener('load', function () {
                    var data = {};
                    data[options.dataType] = xhr.response;
                    // make callback and send data
                    callback(xhr.status, xhr.statusText, data, xhr.getAllResponseHeaders());
                });

                xhr.open(type, url, async, username, password);

                // setup custom headers
                for (var i in headers) {
                    xhr.setRequestHeader(i, headers[i]);
                }

                xhr.responseType = dataType;
                xhr.send(data);
            },
            abort: function () {
                jqXHR.abort();
            }
        };
    }
}); 
```

**2\. 第二步：使用这种传输类型发出请求。**

```
function downloadArt(url)
{
    $.ajax(url, {
        dataType: "binary",
        processData: false
    }).done(function (data) {
        // just my logic to name/create files
        var filename = url.substr(url.lastIndexOf('/') + 1) + '.png';
        var blob = new Blob([data], { type: 'image/png' });

        saveAs(blob, filename);
    });
} 
```

现在您可以使用创建的 Blob，在我的情况下，我想将它保存到磁盘。

**3\. 可选：使用 FileSaver 将文件保存在用户的计算机上**

我已经使用 FileSaver.js 将下载的文件保存到磁盘，如果您需要这样做，请使用这个 javascript 库：

[https://github.com/eligrey/FileSaver.js/](https://github.com/eligrey/FileSaver.js/)

我希望这可以帮助其他有更具体需求的人。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-05-07T16:31:22.423

如果您在画布中显示文件，您还可以将画布内容转换为 blob 对象。

```
canvas.toBlob(function(my_file){
  //.toBlob is only implemented in > FF18 but there is a polyfill 
  //for other browsers https://github.com/blueimp/JavaScript-Canvas-to-Blob
  var myBlob = (my_file);
}) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-10-06T10:51:53.363

在@Kaiido 回答之后，另一种重载 URL 而不会弄乱 URL 的方法是像这样扩展 URL 类：

```
export class URLwithStore extends URL {
  static createObjectURL(blob) {
    const url = super.createObjectURL(blob);
    URLwithStore.store = { ...(URLwithStore.store ?? {}), [url]: blob };
    return url;
  }

  static getFromObjectURL(url) {
    return (URLwithStore.store ?? {})[url] ?? null;
  }

  static revokeObjectURL(url) {
    super.revokeObjectURL(url);
    if (
      new URL(url).protocol === "blob:" &&
      URLwithStore.store &&
      url in URLwithStore.store
    )
      delete URLwithStore.store[url];
  }
} 
```

用法

```
const blob = new Blob( ["foo"] );
const url = URLwithStore.createObjectURL( blob );
const retrieved = URLwithStore.getFromObjectURL( url );
console.log( "retrieved Blob is Same Object?", retrieved === blob ); 
```

# python - 使用 ElementTree 解析 XML

> ID：11876176
> 
> 赞同：1
> 
> 时间：2012-08-09T03:00:16.327
> 
> 标签：python, xml, parsing, lxml, elementtree

我正在尝试使用 ElementTree 在 XML 字符串中搜索标签和属性。这是字符串：

```
'<?xml version="1.0" encoding="UTF-8" ?>\n<uclassify xmlns="http://api.uclassify.com/1/ResponseSchema" version="1.01">\n\t<status success="true" statusCode="2000"/>\n\t<readCalls>\n\t<classify id="thing">\n\t\t<classification textCoverage="0">\n\t\t\t<class className="Astronomy" p="0.333333"/>\n\t\t\t<class className="Biology" p="0.333333"/>\n\t\t\t<class className="Mathematics" p="0.333333"/>\n\t\t</classification>\n\t</classify>\n\t</readCalls>\n</uclassify>' 
```

美化：

```
<?xml version="1.0" encoding="UTF-8" ?>
<uclassify xmlns="http://api.uclassify.com/1/ResponseSchema" version="1.01">
    <status success="true" statusCode="2000"/>
    <readCalls>
        <classify id="thing">
        <classification textCoverage="0">
            <class className="Astronomy" p="0.333333"/>
            <class className="Biology" p="0.333333"/>
            <class className="Mathematics" p="0.333333"/>
        </classification>
        </classify>
    </readCalls>
</uclassify> 
```

我使用这个小代码将字符串转换为可搜索的 XML 树：

```
>>> from xml.etree.ElementTree import fromstring, ElementTree
>>> tree = ElementTree(fromstring(a)) 
```

我认为 using`tree.find('uclassify')`会返回该元素/标签，但它似乎什么也没返回。我也试过：

```
for i in tree.iter():
    print i 
```

它打印了一些东西，但不是我想要的：

```
<Element '{http://api.uclassify.com/1/ResponseSchema}uclassify' at 0x1011ec410>
<Element '{http://api.uclassify.com/1/ResponseSchema}status' at 0x1011ec390>
<Element '{http://api.uclassify.com/1/ResponseSchema}readCalls' at 0x1011ec450>
<Element '{http://api.uclassify.com/1/ResponseSchema}classify' at 0x1011ec490>
<Element '{http://api.uclassify.com/1/ResponseSchema}classification' at 0x1011ec4d0>
<Element '{http://api.uclassify.com/1/ResponseSchema}class' at 0x1011ec510>
<Element '{http://api.uclassify.com/1/ResponseSchema}class' at 0x1011ec550>
<Element '{http://api.uclassify.com/1/ResponseSchema}class' at 0x1011ec590> 
```

搜索标签和属性的最简单方法是什么，例如在 BeautifulSoup 模块中？例如，如何轻松检索类元素的 className 和 p 属性？我一直在阅读有关 lxml、xml.dom.minidom 和 ElementTree 的不同内容，但我一定错过了一些东西，因为我似乎无法得到我想要的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T03:53:04.790

首先`uclassify`是根节点，所以如果你只是在`tree`上面打印，你会看到：

```
>>> tree
<Element '{http://api.uclassify.com/1/ResponseSchema}uclassify' at 0x101f56410> 
```

Find 只查看当前节点的子节点，因此`tree.find`只能找到`status`and`readCalls`标记。

最后，xml 命名空间正在调整所有内容的名称，因此您需要获取 xmlns 并使用它来构建您的标签名称：

```
xmlns = tree.tag.split("}")[0][1:]
readCalls = tree.find('{%s}readCalls' % (xmlns,)) 
```

例如，要获取`class`您需要的 3 个标签：

```
classify = readCalls.find('{%s}classify' % (xmlns,))
classification = classify.find('{%s}classification' %(xmlns,))
classes = classification.findall('{%s}classes'%(xmlns,)) 
```

# system.speech.recognition - 如何使用 System.Speech 将确切的短语识别为命令

> ID：11876181
> 
> 赞同：0
> 
> 时间：2012-08-09T03:01:22.003
> 
> 标签：system.speech.recognition

例如，假设我想要一个在屏幕中心单击鼠标的命令“中心”。简单的例子，但我对它的语法方面更感兴趣。

如果我只想匹配“中心”怎么办？

因此，如果我暂停，说“中心”，然后暂停它是匹配的。

但是，如果我说“我在房间的中央”，我就找不到匹配项。

以下代码似乎与“中心”一词相匹配，无论它是在短语的哪个部分说的：

```
 Choices center = new Choices( new string[] { "center" } );
            SemanticResultKey centerKeys = new SemanticResultKey( "center", center );

            GrammarBuilder centerGrammarBuilder = new GrammarBuilder();
            centerGrammarBuilder.Append( centerKeys );

           speechRecognitionEngine.UnloadAllGrammars();

           speechRecognitionEngine.LoadGrammar(new Grammar(centerGrammarBuilder)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T04:04:32.313

语音引擎通常做得不错，确保它们不能识别句子中间的语法词。但并非总是如此，如果您发现引擎识别句子中的术语的边缘情况之一，我可以推荐两件事来提供帮助。

*   将垃圾规则添加到您的语法中，然后忽略任何包含垃圾规则的识别事件。通常，不建议这样做（但可以工作），因为人们很少使用垃圾规则权衡是在模型构建期间进行的，并且性能会受到影响。此外，您可能会注意到它在某些语言模型中效果更好，而不是在其他语言模型中。同样，这是模型构建和调整的结果。（在 grxml 中，它看起来像这样 < **ruleref special="GARBAGE"/>）** [http://msdn.microsoft.com/en-us/library/system.speech.recognition.srgsgrammar.srgsruleref.garbage(v=VS .85).aspx](http://msdn.microsoft.com/en-us/library/system.speech.recognition.srgsgrammar.srgsruleref.garbage(v=VS.85).aspx)
*   检查并调整结果单词的置信度。即使它识别出中间句子，您对该短语的置信度得分也会低得多。不幸的是，这种调音有时需要大量的音频才能正确。

# java - 在Java中，同步块可以在任何对象引用上同步？

> ID：11876187
> 
> 赞同：0
> 
> 时间：2012-08-09T03:02:25.327
> 
> 标签：java

我想知道是否存在这种说法是真实和需要的情况。我见过的所有例子都只在“this”引用上同步。有人能告诉我一个对象中的代码块如何在除此之外的任何其他引用上同步吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T03:19:24.070

是的，这句话是真的。

不希望使用内部监视器`synchronized(this)`（多变的。如果另一个线程使用 A 的同一个实例并尝试运行`a.methodA()`，它将被阻塞直到`methodB()`结束。

因此，使用内部监视器会暴露同步策略，并可能导致细微的错误和性能问题。

```
public class A {

    public synchronized void methodA() {}

}

public class B {
    A a = new A();
    public void methodB() {
        synchronized(a) {
            // do something a little long
        }
    }
    public A getA() {return a;}
} 
```

如果 A 使用了内部监视器，则不会出现该问题。

```
public class A {
    private final Object lock = new Object();

    public void methodA() {
        synchronized(lock) {}
    }

} 
```

使用 ad hoc 监视器有意义的另一种情况是，当一个类包含 2 个（或更多）不相关的对象时，它们都需要以同步方式访问。使用 2 个监视器而不是一个监视器可以减少争用，因为现在可以同时访问 2 个对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T03:05:29.150

在 Java 中，您可以使用`synchronized`构造在任何对象引用上创建内在锁，是的。阅读相关的[Java 教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/locksync.html)。

**不**使用this的直接示例`synchronized`是在`Class`对象上同步时，这就是[方法的`static synchronized`工作方式](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.3.6)。实际上，有很多有效的用途。您可能希望避免使用`synchronized (this)`内部实现锁，否则您正在设置您在内部使用锁的限制，您不知道的其他代码可能会违反。

但是，您应该知道，通常您可以`synchronized`用`ReentrantLock`. [您可以在我的帖子](https://stackoverflow.com/questions/11821801/why-use-a-reentrantreadwritelock-if-one-can-use-synchronizedthis/11821900#11821900)中阅读更多相关信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T03:05:58.723

是的，它可以做到。

同步块将使用该对象作为锁，而不是整个类。使用 synchronized(this) { } 的人对整个对象设置了排他锁，这可能是您想要的。但是，您可能有类似持久性的东西，这是唯一需要同步的东西。synchronized(persister) { }，将提供一种不那么精细的方式来执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T03:06:39.257

```
public class SyncTest{
    private Object obj = new Object();

    public void func1() {
        synchronized(obj) {
            obj.something();
        }
} 
```

# ruby-on-rails - haml 为表单元素添加样式

> ID：11876191
> 
> 赞同：2
> 
> 时间：2012-08-09T03:03:08.853
> 
> 标签：ruby-on-rails, haml, styling, form-for

似乎无法找到这个问题的答案 - 向 rails form_for 中的元素添加样式或类样式的 haml 语法是什么？

我正在处理的代码是

```
.row.form
.threecol
.sevencol
    = form_for @article do |a|
      %h3= a.label "title"
      =    a.text_field :title 
      %h3= a.label "description"
      =    a.text_area :description
      %h3= a.label "body"
      =    a.text_area :body
      %br/
      =  a.submit "Post Article"
 .twocol.last 
```

我想为文本区域描述元素添加样式。我已经尝试过（其中 new_desc 是类样式）

```
= a.text_area.new_desc :description 
```

和

```
= a.text_area { :style ... } :description 
```

但两者都未能编译。任何人都可以帮助解决这个（希望是微不足道的）问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T03:07:24.750

text_area 是一种采用（对象、方法和选项）的方法 (http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-text_area)

当您将其附加到表单对象时，您会保留该对象，因此它变为 text_area(method, options={})

```
= a.text_area :description, class: "description" 
```

或者

```
= a.text_area :description, class: "description", style: "font-size: 45" 
```

# wpf - 何时启动 WPF 进度条

> ID：11876193
> 
> 赞同：0
> 
> 时间：2012-08-09T03:03:53.313
> 
> 标签：wpf, visual-studio-2010, c#-4.0

我希望我的应用程序在进行一些组件检查时显示正在运行的进度条。但是，由于我缺乏桌面应用程序编程和 WPF 方面的知识，我找不到合适的地方。

我试图在 期间显示递增的进度条`Window_Loaded()`，`ContentRendered()`但没有运气。

而不是显示progressBar 增加，它只显示progress Bar 的最终状态。

这是代码

```
public partial class Loading : Window
{
    public Loading()
    {
        InitializeComponent();
        SetProgressBar();
        this.Show();
        CheckComponents();
    }

    private void CheckComponents()
    {
        System.Threading.Thread.Sleep(3000);

        CheckProductionDBConnection();
        pgrsBar.Value = 30;

        System.Threading.Thread.Sleep(3000);
        CheckInternalDBConnection();
        pgrsBar.Value = 60;

        System.Threading.Thread.Sleep(3000);
        CheckProductionPlanning();
        pgrsBar.Value = 90;

        //MainWindow mainWindow = new MainWindow();
        //mainWindow.Show();
    }

    private void SetProgressBar()
    {
        pgrsBar.Minimum = 0;
        pgrsBar.Maximum = 100;
        pgrsBar.Value = 0;
    }
//more code down here... 
```

我应该把`CheckComponents()`方法放在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T03:08:41.470

您可以将此代码放在订阅该`Activated`事件的事件处理程序中。与此有关的一个问题是，`Activated`每次窗口在失去焦点后获得焦点时都会触发该事件。为了解决这个问题，您可以在事件处理程序中做的第一件事是取消订阅`Activated`事件，以便您的代码仅在第一次激活窗口时执行。

如果您不希望延迟阻塞主线程，您还需要将此工作卸载到工作线程。如果你这样做，你将不得不调用你的调用来更新进度条的值。

这里有一些示例代码可以帮助您入门：

```
public Loader()
{
  InitializeComponent();
  SetProgressBar();

  this.Activated += OnActivatedFirstTime;
}

private void OnActivatedFirstTime(object sender, EventArgs e)
{
  this.Activated -= this.OnActivatedFirstTime;

  ThreadPool.QueueUserWorkItem(x =>
  {
    System.Threading.Thread.Sleep(3000);

    CheckProductionDBConnection();
    this.Dispatcher.BeginInvoke(new Action(() => pgrsBar.Value = 30));

    System.Threading.Thread.Sleep(3000);
    CheckInternalDBConnection();
    this.Dispatcher.BeginInvoke(new Action(() => pgrsBar.Value = 60));

    System.Threading.Thread.Sleep(3000);
    CheckProductionPlanning();
    this.Dispatcher.BeginInvoke(new Action(() => pgrsBar.Value = 90));
  });
}

private void SetProgressBar()
{
  pgrsBar.Minimum = 0;
  pgrsBar.Maximum = 100;
  pgrsBar.Value = 0;
} 
```

# javascript - 如何在javascript中对二维数组进行排序

> ID：11876198
> 
> 赞同：-3
> 
> 时间：2012-08-09T03:05:07.293
> 
> 标签：javascript

给定以下数组...

```
 '0' ...
         'item_id' ...
         'parent_id' => "none"
         'depth' => "0"
         'left' => "1"
         'right' => "30"
     '1' ...
         'item_id' => "1"
         'parent_id' ...
         'depth' => "1"
        'left' => "2"
         'right' => "7"
     '2' ...
         'item_id' => "784657484"
         'parent_id' => "1"
         'depth' => "2"
         'left' => "3"
         'right' => "4"
     '3' ...
         'item_id' => "3"
         'parent_id' => "1"
         'depth' => "2"
         'left' => "5"
         'right' => "6" 
```

什么是javascript中最好的方法来挑选空`item_id`时`parent_id`并将其放入另一个数组中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T03:29:08.643

由于您的数据是伪代码而不是实际的 javascript，我猜它是一个对象数组（我已经要求您澄清，但没有收到任何回复）。所以，有了这个猜测，这段代码会在或者 丢失`item_id`时创建一个值数组：`parent_id``"none"`

```
var empties = [];
for (var i = 0; i < data.length; i++) {
    if (!data[i].parent_id || data[i].parent_id === "none") {
        empties.push(data[i].item_id);
    }
} 
```

# apache - 将 URL 重定向到 DocumentRoot 中的文件夹？

> ID：11876200
> 
> 赞同：0
> 
> 时间：2012-08-09T03:05:35.430
> 
> 标签：apache, url-rewriting, rewrite, localhost

我的文档根目录中有三个文件夹 -

```
localhost/myMainProject/   
localhost/myMainProjectSubdomain/  
localhost/myThirdProject/ 
```

我想做以下 URL 映射 -

```
www.mymainproject.com ---> localhost/myMainProject/
mysubdomain.mymainproject.com ---> localhost/myMainProjectSubdomain/
www.mythirdproject.com ---> localhost/myThirdProject/ 
```

我试图将我的主机文件更改为：

```
127.0.0.1/myMainProjectSubdomain mysubdomain.mymainproject.com
127.0.0.1/myMainProject www.mymainproject.com 
127.0.0.1/myThirdProject www.mythirdproject.com 
```

但这不起作用。我想我必须在某个地方创建一些 .htaccess 文件或其他东西，但不知道它是如何工作的。

这可能吗 ？请指导我如何实现这一目标。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T03:09:48.900

将其放入文档根目录中的 htaccess 文件中：

```
RewriteEngine On

# for www.mymainproject.com
RewriteCond %{HTTP_HOST} ^(www\.)?mymainproject\.com$ [NC]
RewriteCond %{REQUEST_URI} !^/myMainProject
RewriteRule ^(.*)$ /myMainProject/$1 [L]

# for mysubdomain.mymainproject.com
RewriteCond %{HTTP_HOST} ^mysubdomain.mymainproject\.com$ [NC]
RewriteCond %{REQUEST_URI} !^/myMainProjectSubdomain
RewriteRule ^(.*)$ /myMainProjectSubdomain/$1 [L]

# for www.mythirdproject.com
RewriteCond %{HTTP_HOST} ^(www\.)?mythirdproject\.com$ [NC]
RewriteCond %{REQUEST_URI} !^/myThirdProject
RewriteRule ^(.*)$ /myThirdProject/$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T03:59:29.570

最后我是如何让它工作的：

在主机文件中 -

```
127.0.0.1 mysubdomain.mymainproject.com
127.0.0.1 www.mymainproject.com 
127.0.0.1 mymainproject.com 
127.0.0.1 www.mythirdproject.com
127.0.0.1 mythirdproject.com 
```

在文档根目录中 - （如接受的答案中所述）

```
RewriteEngine On

# for www.mymainproject.com
RewriteCond %{HTTP_HOST} ^(www\.)?mymainproject\.com$ [NC]
RewriteCond %{REQUEST_URI} !^/myMainProject
RewriteRule ^(.*)$ /myMainProject/$1 [L]

# for mysubdomain.mymainproject.com
RewriteCond %{HTTP_HOST} ^mysubdomain.mymainproject\.com$ [NC]
RewriteCond %{REQUEST_URI} !^/myMainProjectSubdomain
RewriteRule ^(.*)$ /myMainProjectSubdomain/$1 [L]

# for www.mythirdproject.com
RewriteCond %{HTTP_HOST} ^(www\.)?mythirdproject\.com$ [NC]
RewriteCond %{REQUEST_URI} !^/myThirdProject
RewriteRule ^(.*)$ /myThirdProject/$1 [L] 
```

在我的项目文件夹中，我必须创建另一个 .htaccess 文件 -

```
RewriteEngine on
RewriteCond $1 !^(index\.php|resources|robots\.txt|images|stylesheets|javascript|captcha|js|css|table-images)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L,QSA] 
```

现在 URL 映射完美！例如。

> www.mymainproject.com/welcome --> localhost/myMainProject/welcome

# jquery - jQuery 是否主动选择了类实时更新的 div？

> ID：11876201
> 
> 赞同：1
> 
> 时间：2012-08-09T03:05:37.417
> 
> 标签：jquery

我现在正在阅读一本 jQuery 书籍，并且我正在尝试为我的网站做一些基本的标记作为练习。

积极选择包含让我们在其末尾说出“活动”一词的类的最佳方法是什么。我本来打算使用 live() 方法，但是在 jQuery 的网站上查找之后，他们说它现在已经过时了？在 DOM 完成初始加载后，我还能如何告诉 jQuery 继续在父 div 中寻找以单词“active”结尾的类？

它需要继续查找的原因是，我在首页使用了一些开源 jQuery 滑块，它在当前显示显示图像的 div 类的末尾添加了“活动”一词。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T03:10:36.723

您可以使用以下方法选择以特定值结尾的元素：

```
$("[class$='active']") 
```

如果只想选择顶级`div`元素，可以使用以下内容：

```
$("body > div[class$='active']") 
```

我不确定该`live()`事件与您要执行的操作有什么关系。

* * *

**参考：**

*   [属性以选择器结尾](http://api.jquery.com/attribute-ends-with-selector/)
*   [子选择器](http://api.jquery.com/child-selector/)

# c# - 查找数据库上打开的连接数

> ID：11876202
> 
> 赞同：9
> 
> 时间：2012-08-09T03:05:37.587
> 
> 标签：c#, asp.net, sql-server, sql-server-2008, ado.net

我的 Web 应用程序位于 asp.net 2.0、c#2.0 和 sql server 208 中，如何在我的 sql server 2008 数据库中找到打开的连接数。有没有办法清除连接池。因为我的网站托管在共享主机上他们提供了有限的联系。在我的编码中，我在使用后关闭了所有连接，但我仍然收到暂停数据库的警告。

谁能告诉我如何在数据库上查找打开的连接数以及如何清除连接池。

我使用 using 语句进行连接，并在 finally 块中使用后关闭了所有连接。因此，尽管出现错误，它会关闭已打开的连接。

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-09T05:03:11.143

这显示了每个 DB 的连接数：

```
SELECT 
    DB_NAME(dbid) as DBName, 
    COUNT(dbid) as NoOfConnections,
    loginame as LoginName
FROM
    sys.sysprocesses
WHERE 
    dbid > 0
GROUP BY 
    dbid, loginame 
```

这给出了总连接：

```
SELECT 
    COUNT(dbid) as TotalConnections
FROM
    sys.sysprocesses
WHERE 
    dbid > 0 
```

从 c#，您可以关注：
[http](http://www.c-sharpcorner.com/UploadFile/dsdaf/ConnPooling07262006093645AM/ConnPooling.aspx) ://www.c-sharpcorner.com/UploadFile/dsdaf/ConnPooling07262006093645AM/ConnPooling.aspx 另一个很好的参考可以在：
[http ://www.wduffy.co.uk/blog/监控数据库连接/](http://www.wduffy.co.uk/blog/monitoring-database-connections/)

调用静态方法`ReleaseObjectPool`就`OleDbConnection`-见[http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbconnection.releaseobjectpool.aspx](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbconnection.releaseobjectpool.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T05:51:36.313

sql查询获取当前活动连接

```
SELECT DB_NAME(dbid) as 'DbNAme', COUNT(dbid) as 'Connections' from master.dbo.sysprocesses with (nolock) WHERE dbid > 0 GROUP BY dbid 
```

如果您想要特定于数据库的连接，您可以定义 dbid

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T03:45:57.470

您可能想阅读连接池：http: [//msdn.microsoft.com/en-us/library/8xx3tyca.aspx](http://msdn.microsoft.com/en-us/library/8xx3tyca.aspx)

为每个不同的连接字符串创建一个单独的连接池。此外，如果您通过集成安全进行连接，并且您的网站使用基本或 Windows 身份验证（而不是匿名），则将为网站的每个用户创建一个单独的连接池。

为了清除连接池，该`SqlConnection`对象提供了方法`ClearPool()`和 ClearAllPool()`。但是，在关闭或处置之前，不会关闭单个连接并将其从池中删除。

执行 sql 查询所涉及的所有各种对象`IDisposable`都应包装在一条`using`语句中，以保证正确处理。这些方面的东西：

```
IEnumerable<BusinessObject> list = new List<BusinessObject>() ;

using ( SqlConnection  connection = new SqlConnection( credentials ) )
using ( SqlCommand     command    = connection.CreateCommand() )
using ( SqlDataAdapter adapter    = new SqlDataAdapter( command ) )
using ( DataSet        results    = new DataSet() )
{

  command.CommandType = CommandType.StoredProcedure ;
  command.CommandText = @"someStoredProcedure" ;

  try
  {
    connection.Open() ;
    adapter.Fill( results ) ;
    connection.Close() ;

    list = TransformResults( results ) ;

  }
  catch
  {
    command.Cancel() ;
    throw
  }

}

return list ; 
```

您可以通过执行存储过程`sp_who`（必须在 SQL Server 中具有适当的管理员权限）来检查在 Sql Server 中打开了哪些 SPID。您也可以使用 perfmon。

# ruby - Ruby-从微秒获取日期

> ID：11876205
> 
> 赞同：2
> 
> 时间：2012-08-09T03:05:56.313
> 
> 标签：ruby, google-chrome, history

好吧，我在 python 中看这个，但我更喜欢 ruby​​。我想做的是从这个数字获取日期和时间 - 12988822998637849 - 这是自 1601 年 1 月 1 日 UTC 以来的微秒数。这就是 Chrome 存储它的时间戳的方式，我已经看到了很多在 python 中执行此操作的方法，但我对 ruby​​ 更满意，我什至不知道如何开始执行此操作。（我的 Google-Fu 这次没有帮到我）请注意这个示例编号是几天前的。我会尽我所能得到的帮助。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T03:10:57.603

看看[**Time.at**](http://ruby-doc.org/core-1.9.3/Time.html#method-c-at)。

Windows 文件时间是“一个 64 位值，表示自公元 1601 年 1 月 1 日午夜 12:00 (CE) 协调世界时 (UTC) 以来经过的 100 纳秒间隔数。” [参考。](http://msdn.microsoft.com/en-us/library/system.datetime.tofiletime.aspx)

相比之下，Ruby 像 Unix 一样存储时间：“时间在内部存储为自纪元 1970 年 1 月 1 日 00:00 UTC 以来的秒数和微秒数”[参考。](http://ruby-doc.org/docs/ProgrammingRuby/html/ref_c_time.html)

```
# This return a Time
Time.at(12988822998637849/1000000-11644473600) # Epoch Diff is 11644473600
# => 2012-08-07 11:23:18 -0300 

# This returns a String
Time.at(12988822998637849/1000000-11644473600).strftime("%Y-%m-%d %H:%M.%S")
# => "2012-08-07 11:23.18" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T03:24:38.230

您需要做的就是使用 Chrome 时间原点创建一个 Ruby 日期，然后按所需的微秒数递增：

```
Time.gm(1601,1,1) + 12988822998637849 / 1000000

# => 2012-08-07 14:23:18 UTC 
```

# sql - 为什么我会收到“数据库 'tempdb' 的日志文件已满”

> ID：11876212
> 
> 赞同：6
> 
> 时间：2012-08-09T03:06:36.157
> 
> 标签：sql, sql-server, sql-server-2000, sql-execution-plan

让我们有一个支付表，其中包含 35 列，主键 (autoinc bigint) 和 3 个非聚集、非唯一索引（每个在一个 int 列上）。

在表的列中，我们有两个日期时间字段：

1.  **付款日期** `datetime NOT NULL`

2.  **编辑日期** `datetime NULL`

该表有大约 1 200 000 行。只有 ~1000 行的 edit_date 列 = null。9000 行的 edit_date 不为 null 且不等于 payment_date 其他有 edit_date=payment_date

当我们运行以下**查询 1**时：

```
select top 1 *
from payments
where edit_date is not null and (payment_date=edit_date or payment_date<>edit_date)
order by payment_date desc 
```

![在此处输入图像描述](../Images/f4d8634f63786c53c1202576b313bebb.png)

服务器需要几秒钟来完成它。但是如果我们运行**查询 2**：

```
select top 1 *
from payments
where edit_date is not null
order by payment_date desc 
```

![在此处输入图像描述](../Images/73aacd25cbae85859c90367afb32002d.png)

执行结束时**数据库“tempdb”的日志文件已满。备份数据库的事务日志以释放一些日志空间。**

如果我们将 * 替换为某个特定的列，请参见**查询 3**

```
select top 1 payment_date
from payments
where edit_date is not null
order by payment_date desc 
```

![在此处输入图像描述](../Images/3a781466dd7e605aa37320f576ec3989.png)

它也在几秒钟内完成。

魔法在哪里？

**编辑** 我更改了查询 1，使其在与第二个查询完全相同的行数上运行。它仍然会在一秒钟内返回，而查询 2 会填充 tempdb。

**回答** 我按照建议添加索引，对两个日期字段都这样做了 - 正如预期的那样，一切都开始快速工作。不过，问题是 - 为什么在这种确切情况下 sql server 在类似查询（查询 1 与查询 2）上表现不同；我想了解服务器优化的逻辑。如果两个查询确实使用了类似的 tempdb，我会同意，但他们没有....

最后，我将第一个标记为答案，在那里我看到了我的问题的必然症状，以及第一个关于如何避免这种情况的想法（即 indeces）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T04:08:19.613

`tempdb`发生这种情况是因为执行计划中的某些步骤可能会触发对特定数据的写入，`sorts`并且`joins`涉及大量数据。

由于您正在对具有大量列的表进行排序，因此 SQL 认为在没有关联数据的情况下在 temp db 中单独执行排序会很疯狂。如果这样做，则需要在基础表上进行大量低效的书签查找。

遵循以下规则：

1.  尝试仅选择您需要的数据
2.  适当调整 tempdb 的大小，如果您需要执行对大量行进行排序的疯狂查询，最好有一个适当大小的 tempdb

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-09T04:54:20.357

通常，当您的磁盘空间不足时，或者当您为数据库增长设置的最大大小不合理时，tempdb 会填满。许多人认为 tempdb 仅用于#temp 表。事实上，您可以轻松填充 tempdb，而无需创建单个临时表。可能导致 tempdb 填满的其他一些情况：

*   任何需要比已分配给 SQL Server 更多内存的排序都将被迫在 tempdb 中完成其工作；
*   如果排序需要的空间多于分配给 tempdb 的空间，则会发生上述错误之一；
*   DBCC CheckDB('any database') 将在 tempdb 中执行其工作——在较大的数据库上，这会占用相当多的空间；
*   DBCC DBREINDEX 或带有“在 tempdb 中排序”选项集的类似 DBCC 命令也可能会填满 tempdb；
*   涉及联合、排序依据/分组依据、笛卡尔连接、外部连接、游标、临时表、表变量和散列的大型结果集通常需要 tempdb 的帮助；
*   任何未提交且未回滚的事务都可能使对象在 tempdb 中成为孤立对象；
*   使用带有“创建临时存储过程”选项的 ODBC DSN 可以在连接的整个生命周期内将对象留在那里。

    使用 tempdb 去

    ```
     SELECT name 
            FROM tempdb..sysobjects 

        SELECT OBJECT_NAME(id), rowcnt 
            FROM tempdb..sysindexes 
            WHERE OBJECT_NAME(id) LIKE '#%' 
            ORDER BY rowcnt DESC 
    ```

较高的行数值可能表示占用空间的最大临时表。

短期修复

```
DBCC OPENTRAN -- or DBCC OPENTRAN('tempdb')
DBCC INPUTBUFFER(<number>)
KILL <number> 
```

长期预防

```
-- SQL Server 7.0, should show 'trunc. log on chkpt.' 
-- or 'recovery=SIMPLE' as part of status column: 

EXEC sp_helpdb 'tempdb' 

-- SQL Server 2000, should yield 'SIMPLE': 

SELECT DATABASEPROPERTYEX('tempdb', 'recovery')
ALTER DATABASE tempdb SET RECOVERY SIMPLE 
```

参考：[https ://web.archive.org/web/20080509095429/http://sqlserver2000.databases.aspfaq.com:80/why-is-tempdb-full-and-how-can-i-prevent-this- from-happening.html](https://web.archive.org/web/20080509095429/http://sqlserver2000.databases.aspfaq.com:80/why-is-tempdb-full-and-how-can-i-prevent-this-from-happening.html)
其他参考资料：[http ://social.msdn.microsoft.com/Forums/is/transactsql/thread/af493428-2062-4445-88e4-07ac65fedb76](http://social.msdn.microsoft.com/Forums/is/transactsql/thread/af493428-2062-4445-88e4-07ac65fedb76)

# python - 为什么这个 python 代码的执行时间会增加每次调用？

> ID：11876214
> 
> 赞同：-1
> 
> 时间：2012-08-09T03:07:12.130
> 
> 标签：python, performance, time

```
import time
word = {"success":0, "desire":0, "effort":0, ...}
def cleaner(x):
    dust = ",./<>?;''[]{}\=+_)(*&^%$#@!`~"
    for letter in x:
        if letter in dust:
            x = x[0:x.index(letter)]+x[x.index(letter)+1:]
        else:
            pass
    return x #alhamdlillah it worked 31.07.12
print "input text to analyze"
itext = cleaner(raw_input()).split()
t = time.clock()
for iword in itext:
    if iword in word:
        word[iword] += 1
    else:
        pass
print t
print len(itext) 
```

每次我调用代码时，t 都会增加。谁能解释这背后的基本概念/原因。也许在系统过程方面？非常感谢你们，编程小伙子们。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T03:09:03.703

因为**每次运行脚本时都会打印出***当前时间*

 **时间就是这样运作的，它不断地前进。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T03:10:27.623

如果要测量`for`循环所用的时间（从第一次调用到`time.clock()`结束），请打印出时间*差*：

```
print time.clock() - t 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T03:12:23.023

您正在打印当前时间......当然，每次运行代码时它都会增加。

从 python 文档中`time.clock()`：

> 在 Unix 上，以浮点数形式返回当前处理器时间，以秒为单位。精度，实际上是“处理器时间”含义的定义，取决于同名 C 函数的精度，但无论如何，这是用于对 Python 或计时算法进行基准测试的函数。
> 
> 在 Windows 上，此函数根据 Win32 函数 QueryPerformanceCounter() 返回自第一次调用此函数以来经过的挂钟秒数，作为浮点数。分辨率通常优于一微秒。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T07:03:48.390

`time.clock()`返回自进程创建以来经过的**CPU 时间。**CPU 时间基于 CPU 在进程上下文中花费的周期数。它在进程的生命周期内是一个单调函数，即如果您`time.clock()`在同一执行过程中多次调用，您将得到一个递增数字的列表。两次连续调用之间的差异`clock()`可能小于或更多，这取决于 CPU 没有以 100% 运行（例如，有一些等待 I/O）或者如果您有一个多线程程序消耗超过 100% 的 CPU 时间（例如，多核 CPU 有 2 个线程，每个线程使用 75% -> 你将获得 150% 的挂钟时间）。但是如果你打电话`clock()`在一个进程中一次，然后再次重新运行程序，如果在新进程中处理输入所需的时间更少，您可能会得到比以前更低的值。

您应该做的是使用`time.time()`which 返回具有小数（亚秒）精度的当前 Unix 时间戳。您应该在处理开始之前调用一次，之后调用一次，然后减去两个值，以计算两次调用之间经过的挂钟时间。

请注意，在 Windows 上，会`time.clock()`返回自进程启动以来经过的挂钟时间。这就像`time.time()`在脚本开始时立即调用，然后从后面的调用中减去值`time.time()`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-14T23:24:17.260

有一个非常好的名为[jackedCodeTimerPy](https://github.com/BebeSparkelSparkel/jackedCodeTimerPY)的库，它比 time 模块工作得更好。它还具有一些巧妙的错误检查功能，因此您可能想尝试一下。

使用 jackedCodeTimerPy，您的代码应如下所示：

```
# import time
from jackedCodeTimerPY import JackedTiming
JTimer = JackedTiming()

word = {"success":0, "desire":0, "effort":0}
def cleaner(x):
    dust = ",./<>?;''[]{}\=+_)(*&^%$#@!`~"
    for letter in x:
        if letter in dust:
            x = x[0:x.index(letter)]+x[x.index(letter)+1:]
        else:
            pass
    return x #alhamdlillah it worked 31.07.12
print "input text to analyze"
itext = cleaner(raw_input()).split()

# t = time.clock()
JTimer.start('timer_1')
for iword in itext:
    if iword in word:
        word[iword] += 1
    else:
        pass
# print t
JTimer.stop('timer_1')
print JTimer.report()
print len(itext) 
```

它提供了非常好的报告，例如

```
label            min          max         mean        total    run count
-------  -----------  -----------  -----------  -----------  -----------
imports  0.00283813   0.00283813   0.00283813   0.00283813             1
loop     5.96046e-06  1.50204e-05  6.71864e-06  0.000335932           50 
```

我喜欢它如何为您提供有关它的统计信息以及计时器运行的次数。

使用起来很简单。如果我想测量 for 循环中的时间代码，我只需执行以下操作：

```
from jackedCodeTimerPY import JackedTiming
JTimer = JackedTiming()

for i in range(50):
  JTimer.start('loop')  # 'loop' is the name of the timer
  doSomethingHere = 'This is really useful!'
  JTimer.stop('loop')
print(JTimer.report())  # prints the timing report 
```

您还可以同时运行多个计时器。

```
JTimer.start('first timer')
JTimer.start('second timer')
do_something = 'amazing'
JTimer.stop('first timer')

do_something = 'else'
JTimer.stop('second timer')

print(JTimer.report())  # prints the timing report 
```

回购中有更多使用示例。希望这可以帮助。

[https://github.com/BebeSparkelSparkel/jackedCodeTimerPY](https://github.com/BebeSparkelSparkel/jackedCodeTimerPY)**

# android - Joda DateTime，无法更改年份

> ID：11876217
> 
> 赞同：0
> 
> 时间：2012-08-09T03:07:42.237
> 
> 标签：android, datetime, jodatime

我正在使用 Java 的 Joda DateTime 函数将 30 分钟添加到设定时间。例如 10:00:00 到 10:30:00。但是，下面的代码不起作用。主要的两个问题是
1\. 当年份设置为 2012 年时，myFormat.parse 函数自动将日期设置为 2014 年（见下面的 logcat）。2\. plusMinutes(30) 不是在时间上增加 30 分钟。你能看看我的代码，让我知道如何修复它吗？

Java代码：

```
package com.google.android.gcm.demo.app.Alerts;

import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;
import java.util.GregorianCalendar;

import org.joda.time.DateTime;

import android.app.Activity;
import android.content.Intent;
import android.graphics.Color;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.Spinner;
import android.widget.TextView;
import android.widget.ToggleButton;

import com.google.android.gcm.demo.app.R;
import com.google.android.gcm.demo.app.EventList.DataView;
import com.google.android.gcm.demo.app.EventList.EventDetails;
import com.google.android.gcm.demo.app.sqllite.DatabaseSqlite;

public class AlertDetails extends Activity {

    Integer id;
    String name;
    String date;
    String startTime;
    String endTime;
    String location;
    int alertState;
    Bundle bundle;
    String alertTime;
    String s;

    private String update_alarmTime;
    String eventYear;
    String eventDay;
    String eventMonth;

    DatabaseSqlite entry = new DatabaseSqlite(AlertDetails.this);

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.alertview);

        bundle = getIntent().getExtras();

        alertTime = bundle.getString("alertTime");
        alertTime = "10:00:00";// for testing

        // set Date
        eventYear = date.substring(0, 4);
        eventDay = date.substring(5, 7);
        eventMonth = date.substring(8, 10);
        mDateDisplay.setText(eventDay + "-" + eventMonth + "-" + eventYear);

        String eventdate = eventDay + "/" + eventMonth + "/" + eventYear;
System.out.println("event date "+eventdate);

        String currentDate;
        SimpleDateFormat myFormat = new SimpleDateFormat("dd/MM/yyyy HH:mm:ss");
        Date date1 = null;
        DateTime dt;

        currentDate = eventdate+ " "+alertTime;
        System.out.println("current date "+currentDate);

        try {
            date1 = myFormat.parse(currentDate);
            System.out.println("date formated: "+date1);

        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        dt = new DateTime(date1);
        dt.plusMinutes(30);
        System.out.println(" origional time is " +alertTime+" new time is "+dt); 
```

日志猫：

```
 02:43:16.844: D/dalvikvm(1027): GC_FOR_MALLOC freed 2421 objects / 165200 bytes in 137ms
08-09 02:43:18.355: I/ActivityManager(58): Starting activity: Intent { cmp=com.google.android.gcm.demo.app/.Alerts.AlertDetails (has extras) }
08-09 02:43:18.405: I/System.out(1027): event date 05/30/2012
08-09 02:43:18.415: I/System.out(1027): current date 05/30/2012 10:00:00
08-09 02:43:18.415: I/System.out(1027): date formated: Thu Jun 05 10:00:00 GMT+00:00 2014
08-09 02:43:18.605: D/dalvikvm(1027): GC_FOR_MALLOC freed 2743 objects / 261528 bytes in 43ms
08-09 02:43:18.665: D/dalvikvm(1027): GC_FOR_MALLOC freed 216 objects / 242000 bytes in 43ms
08-09 02:43:18.905: D/dalvikvm(1027): GC_FOR_MALLOC freed 1461 objects / 314440 bytes in 45ms
08-09 02:43:19.305: D/dalvikvm(1027): GC_FOR_MALLOC freed 3043 objects / 276440 bytes in 55ms
08-09 02:43:19.945: D/dalvikvm(1027): GC_FOR_MALLOC freed 5365 objects / 354056 bytes in 54ms
08-09 02:43:19.955: I/System.out(1027):  origional time is 10:00:00 new time is 2014-06-05T10:00:00.000Z 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T07:51:01.140

*1) 为什么没有添加 30 分钟？*
方法`dt.plusMinutes(30);`不向`dt`实例添加 30 分钟。实例`dt`是**不可变**的。方法`dt.plusMinutes(30);`创建的新实例`DateTime`大于`dt`30 分钟。
所以：

```
dt = new DateTime(date1);
dt.plusMinutes(30); 
```

是错的！
应该

```
dt = new DateTime(date1).plusMinutes(30); 
```

或者

```
dt = new DateTime(date1);
DateTime greaterDate = dt.plusMinutes(30); 
```

*2) 为什么年份 = 2012？*

你的模式是`"dd/MM/yyyy HH:mm:ss"`
你的日期是`"05/30/2012 10:00:00"`
30个月？:-)
改变模式`"MM/dd/yyyy HH:mm:ss"`

# github - 在 repo 中看不到已提交的更改

> ID：11876218
> 
> 赞同：3
> 
> 时间：2012-08-09T03:07:44.380
> 
> 标签：github

我已经像这样上演了我的文件

```
git add mydir
git add mydir/myfile 
```

然后将它们推送到我的仓库

```
git remote add origin https://github.com/usename/myrepo.git
git push origin master 
```

当我查看`git status -s`它时说我的文件已添加，但我在我的实际存储库中看不到它们。有谁知道这里发生了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T03:11:12.097

您**尚未**将文件“添加”到*存储库*中，仅添加到*暂存索引*中。

您需要将`git commit`更改从 更改`staging index`为`repository`.

`git status`向您显示*工作树*和*暂存索引*的状态。`git log`向您显示*历史*的状态- 换句话说，`git log`将向您显示*已提交到存储库的内容*。

例如，请参见以下`git status`输出：

```
 git status               
# On branch master
# Changes to be committed:
#   (use "git reset HEAD ..." to unstage)
#
#   modified:   Game.py
# 
```

在这种情况下，我们可以看到*要提交的更改*涉及`Game.py`. 请注意，这些更改尚未添加到存储库中——正如上面`git status`所说，它们只是暂存，准备提交。

下一步是提交我们在 中准备好的这些更改`staging index`并将它们添加到存储库中。`git commit`是执行此操作的命令。

[这个答案](https://stackoverflow.com/questions/10658195/simple-sequence-of-git-commands/10659298#10659298)，以及链接的[Pro Git 书](http://git-scm.com/book/en/Getting-Started-Git-Basics)，都有一些优秀的阅读材料，可以帮助您了解提交到`git`存储库的设置和步骤。

> 我在我的实际存储库中看不到它们。

“实际”存储库是什么意思？我假设您的意思是您看不到*local commit*，但是您使用的存储库可能会有些混乱。

您正在使用*两个*存储库，一个`local`和一个`remote`. 就您而言，`remote`存储库位于 GitHub 上。你在*本地*做你的工作，然后`git push`到*远程*。

## 一、本地更改和提交

因此，将代码更改放入`local`存储库的步骤如下：

1.  **在您的`working directory`**. 这通常是编写一些代码。
2.  **`commit`通过分期更改构建一个**。这是使用`git add`.
3.  **“保存”您已构建到存储库中的提交**。这是使用`git commit`.

这些步骤发生在**本地*。这些步骤都不会对您的`GitHub`存储库产生任何影响。

## 其次，`git push`到`remote`存储库（在这种情况下，是您的 GitHub 存储库）。

将您的代码从`local`存储`remote`库中获取，`git push`使用。

1.  检查`remote`您的存储库已知哪些存储`local`库：`git remote -v`.
2.  如果**未**`GitHub`显示存储库，则需要添加它：.**`git remote add <NAME> <URL>`**
***   因为您没有`git clone`，所以两个存储库 (`local`和`remote`) 没有任何共同的提交。没关系; 它只是意味着`git`不会自动知道将更改推送到何处，因此您必须指定：`git push <NAME> master:master`. 这会将您`local master`的分支推送到`<NAME> master`分支。**

# r - sparse-QR 比原始矩阵多行

> ID：11876219
> 
> 赞同：0
> 
> 时间：2012-08-09T03:07:53.453
> 
> 标签：r, matrix

我用类似的包做了一个稀疏`qr`分解`"Matrix"``R`

```
a <- Matrix(runif(20), nrow = 5, sparse = T)
a[3:5,] <- 0 #now **a** is a 5X4 matrix
b <- qr.R(qr(a), complete = T) #but now **b** is a 7X4 matrix! 
```

有谁知道为什么？请注意，如果我保持`a`密集，则不会出现错误（？）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T03:42:43.640

我假设您没有看到警告，否则您会提到它，对吗？

> 警告消息：在 qr.R(qr(a), complete = T) 中：qr.R(< sparse >) 可能因排列而与 qr.R(< dense >) 不同

现在，如果您要问这些排列是什么意思，那就另当别论了……

该`help("sparseQR-class")`页面可能包含有关此问题的更多信息：

> 但是，由于矩阵 Q 不是唯一定义的，qr.qy 和 qr.qty 的结果不一定与相应密集矩阵计算的结果相匹配。

也许它是一样的`qr.R`？

最后，在同一个帮助页面上进一步向下：

> *qr.R* --- signature(qr = "sparseQR")：计算 QR 分解的上三角 R 矩阵。请注意，由于可能与经典 qr.R() 结果的排列不匹配，这当前会发出警告，您可以通过将 options() 设置为“Matrix.quiet.qr.R”或（更一般的）“Matrix .quiet” 为 TRUE。

# php - 如何构建不链接到 symfony2 中任何实体的通用表单

> ID：11876220
> 
> 赞同：1
> 
> 时间：2012-08-09T03:08:03.413
> 
> 标签：php, symfony, twig

到目前为止，我只使用 formbuilder 构建了与实体相关的表单

我通常这样做

`$builder->add("tasks")`

然后我这样做

`$Form = $this->createForm(new TaskType(), $entity);`

现在我只想要一个通用表单，其中我有选择框，我可以在其中从数据库加载实体。

我没有保留或绑定该表单，我只是希望当用户选择用户并点击提交时，我会转到该用户页面

在上面的表格中，我曾经将任务作为用户实体中的属性，所以我使用了 add。

但我只想显示与用户无关的任务我可以这样做吗

```
$form = $this->createFormBuilder($task)
        ->add('task', 'text')
        ->add('dueDate', 'date')
        ->getForm(); 
```

上面的代码示例我可以这样做吗

```
$form = $this->createFormBuilder()
        ->add('task', 'text')
        ->add('dueDate', 'date')
        ->getForm(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:08:37.677

在阅读之前，你为什么要显示一个`<select>`无所事事？也许有更好的解决方案来实现你想要的:)

无论如何，如果您的表单有一些与实体属性无关的字段，只需将选项设置`property_path`为`false`. 假设您想显示`<select>`我会做的其他任务：

```
$this->createFormBuilder()
    ->add('task', 'entity', array(
        'property_path' => false,
        'class'         => 'Acme\HelloBundle\Entity\Task', // Full/short FQCN
        'property'      => 'name', // Assuming your task as a property "name",
    ))
; 
```

如果由于某种原因您需要选定的值（意味着选定`Task`的对象），您可以`$form->get('task')->getData()`在将其与请求绑定后获得。

# java - 如何在单词之间拆分具有不同字符的字符串？

> ID：11876222
> 
> 赞同：0
> 
> 时间：2012-08-09T03:08:12.160
> 
> 标签：java, string, split

我目前有一个程序，它将一组值从哈希映射传递到另一个将它们存储为字符串的类。存储在字符串中的信息如下：

```
Station 1=[1, Task 1, 10, false, 0, java.awt.Color[r=255,g=0,b=0]]
Station 2=[2, Task 2, 10, false, 0, java.awt.Color[r=0,g=0,b=255]]
Station 3=[3, Task 3, 10, false, 0, java.awt.Color[r=0,g=255,b=0]]
Station 4=[4, Task 4, 10, false, 0, java.awt.Color[r=255,g=200,b=0]]
Station 5=[5, Task 5, 10, false, 0, java.awt.Color[r=0,g=0,b=0]] 
```

我试图将它们分成（fe）：

```
Station 1
1
Task 1
10
false
0
java.awt.Color[r=255,g=0,b=0] 
```

我首先尝试拆分每个字符串，但是由于在设置颜色值的字符串的最后一部分有“=”和“”，所以它变得一团糟。

我也尝试过 StringTokenizer() 但我在最后一部分也遇到了问题。

有没有更简单或有效的方法来根据需要拆分这些字符串？欢迎任何建议！

提前感谢您的时间，如果需要代码，请告诉我！

**编辑：**

我通过从哈希图中正确传递参数来解决我的特定问题。

```
public MultiMap stationmap = new MultiHashMap( );

public Collection getkeyValues(String s) {
   Collection values = (Collection) stationmap.get(s);
   return values;
} 
```

这样，我可以将此集合传递给需要它们的类，并且可以进一步迭代它以获取键的值。

我将保持开放状态，因为进一步的答案可能会帮助有类似字符串问题的人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T03:39:57.920

使用谷歌的图书馆**番石榴**：

```
public static List<String> convertToList(String str) {
    List<String> list = Lists.newArrayList(Splitter.on(CharMatcher.anyOf("=[,")).omitEmptyStrings().trimResults().limit(7).split(str));
    /**
     Returns:
            Station 1
            1
            Task 1
            10
            false
            0
            java.awt.Color[r=255,g=0,b=0]]
             */

    int lastIndex = list.size() - 1;
    String last = list.get(lastIndex);
    String amendedValue = last.substring(0, last.length()-1);
    list.set(lastIndex, amendedValue);
    // Convert the last element "java.awt.Color[r=255,g=0,b=0]]" to  "java.awt.Color[r=255,g=0,b=0]"

    return list;
} 
```

或者：

```
public static List<String> convertToList2(String str) {
    str = str.substring(0, str.length()-1);
    return Lists.newArrayList(Splitter.on(CharMatcher.anyOf("=[,")).omitEmptyStrings().trimResults().limit(7).split(str));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T03:10:08.977

如果您正在控制字符串的格式，则可以将它们格式化为[json](http://www.json.org)并在那里使用解析。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T03:19:21.287

我不确定你为什么以这种方式工作:) 其他类接受 HashMap 并以同样的方式处理它不是更容易吗？如果要将其输出到文件，则可以将其序列化；哈希图是可序列化的。

# mysql - 哪一个适合为大量数据编写 MySql INSERT INTO 命令？

> ID：11876223
> 
> 赞同：0
> 
> 时间：2012-08-09T03:08:23.083
> 
> 标签：mysql, sql

我有大约 400k 数据，也许更多（以 sql 格式）并将其插入 mysql 数据库。哪一个性能更好，在sql文件中写入sql命令插入数据：

1.  对每个数据重复此命令，直到 400k

    插入表（col1，col2，coln）值（val1，val2，valn）；

2.  先写 INSERT 命令，然后在下一个 VALUE 语句中写入 400k 数据

    INSERT INTO table (col1, col2, coln) VALUES (val1, val2, valn), (val1, val2, valn), (val1, val2, valn), .....直到400k数据

3.  像 no.2 一样重复此命令，但仅针对每 100 个数据

    INSERT INTO table (col1, col2, coln) VALUES (val1, val2, valn), (val1, val2, valn), (val1, val2, valn), ..... [直到 100 个数据]
    INSERT INTO table (col1 , col2, coln) VALUES (val1, val2, valn), (val1, val2, valn), (val1, val2, valn), ..... [直到下 100 个数据]

4.  或者也许还有其他不错的选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T07:35:52.797

您可以使用第一个或第二个变体，第二个可能更快。如果您选择第二个变体和语句长度大于允许的最大数据包大小（MySQL 变量），则应用第三个变体 - 将 INSERT 语句拆分为一些小语句。

# android - Android mediaPlayer - 是否有“isPrepared()”或“getStatus()”方法？

> ID：11876229
> 
> 赞同：22
> 
> 时间：2012-08-09T03:08:55.347
> 
> 标签：android, android-mediaplayer

我在使用 Android 的 MediaPlayer 时遇到问题。它似乎缺少重要的功能，主要是获取 MediaPlayer 的当前状态或了解它是否准备好的方法。我知道有准备好的监听器，但是 MediaPlayer 的持续时间比 Activity 长，所以当播放 Activity 恢复时，获取当前播放器状态会很好，无论它是否尝试加载媒体，是否加载媒体等. 我错过了什么，还是我必须自己跟踪玩家状态？

其他不错的功能是 onPlayStateChanged() - 我目前必须手动跟踪播放状态。我做错了吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-10-11T08:41:56.097

希望现在给出答案还为时不晚。[MediaPlayer](http://developer.android.com/reference/android/media/MediaPlayer.html)类没有isPrepared () 或 getStatus() 方法，您必须自己跟踪其状态。然而，这并不难。

MediaPlayer 类有一个非常有用的状态图。您应该根据该图实现您的服务。此外，如果您始终从同一个线程控制 MediaPlayer 对象，则很容易跟踪其状态，因此我建议您这样做。prepareAsync() 方法是您必须处理的唯一异步方法，但您可以保留一个布尔值，指示播放器正在准备中，从 prepareAsync() 调用直到 onPrepared() 为“真”叫。无论如何，如果您不小心从非法状态调用任何方法，您始终可以实现 onError 并捕获 IllegalStateException 以避免崩溃。

尽管如此，[媒体播放指南](http://developer.android.com/guide/topics/media/mediaplayer.html)对我帮助很大。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-08-17T06:45:39.797

我需要在调试时查看状态以解决问题，所以在我知道 MediaPlayer 已经准备好之后，我只是将这段代码放在了某个地方：

```
try {
    this.audioPlayer.prepare();
} catch (Exception e) {
} 
```

这会向控制台打印一个错误，例如“E/MediaPlayer：在状态 32 中调用 prepareAsync”。

现在，如果我能找到一个列出所有状态代码的地方......

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-03-14T17:53:14.270

我发现了一些可能对你和其他人有帮助的东西。MediaPlayer 类中有一个`setOnPreparedListener()`函数可以让您在准备好 MediaPlayer 时运行一段代码。

此外，如果您想确保您的媒体已加载，您可以使用该`getDuration()`功能。此代码以毫秒为单位返回持续时间，如果没有可用的持续时间，则返回 -1。下面是代码：

```
yourMediaPlayer.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {
    @Override
    public void onPrepared(MediaPlayer mp) {
        if(yourMediaPlayer.getDuration() != -1){
            //your code when when something is loading
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-07-24T11:56:52.590

没有`getState`类`MediaPlayer`，但在内部它有一个状态，正如 alex.magellan 所解释的那样。在“不允许的状态”处调用方法会导致异常。

为了避免这些，我创建了一个`StateMachine`with`MediaPlayerWrapper`类。因此，不是`MediaPlayer`直接调用，`MediaPlayerWrapper`而是使用它，它在内部更新`StateMachine`和公开`getState()`方法。

`StateMachine`和`Wrapper`类实现可以在[这里找到。](https://gist.github.com/jemshit/3fd38d3ba04556c99bd7d953f5c056f7)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-07T13:03:14.503

我认为没有办法通过 MediaPlayer 类本身来做到这一点。

最简单的做法是在创建和重置时将全局变量设置为 true。它在发布时设置为 false。

```
boolean playerAvailable = true;

mediaPlayer = MediaPlayer.create(myContext, soundId); // ready to play

playerAvailable = true;

....

mediaPlayer.reset();   // ready to play again

playerAvailable = true;

....

mediaPlayer.release(); // can't be played until release.

playerAvailable = false; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-23T12:01:36.470

您可以通过使用预定义的布尔变量并在调用 onPrepared() 回调时将其设置为 true 并在 MediaPlayer 启动时将其设置为 false 来解决此问题。例如：

```
public boolean mpPrepared = false;

mp.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {
    @Override
    public void onPrepared(MediaPlayer mp) {
        mpPrepared = true;
    }
});

mp.start();
mpPrepared = false; 
```

# java - 如何为一个方法定义多个实现？

> ID：11876231
> 
> 赞同：1
> 
> 时间：2012-08-09T03:09:18.817
> 
> 标签：java, design-patterns, inheritance

只是为了玩一点，我正在尝试通过命令行与两名玩家制作一个回合制战斗游戏。每个玩家控制一个怪物，最多有 4 个不同的动作。我已经定义了 Monster 和 Move 类来定义不同的怪物和动作。当玩家使用移动时，我想我想在移动中调用类似 performOn(Monster mon) 的方法来使用。在那个方法中，我想定义动作的实现，因为不是每个动作都会做同样的事情。我很确定 Java 可以做到这一点，但我不完全确定它是如何完成的。对于 Monster 和 Move 类，我有一个内部 Builder 类来避免使用大的构造方法。如果有人对如何执行移动有更好的想法，请随时分享。:)

谢谢！

例子：

```
// moves is a HashMap<String, Move>
monster1.moves.get("Firebreath").performOn(monster2); // damages monster2
monster2.moves.get("Heal").performOn(monster2); // heals monster2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T03:16:45.437

您可以为它创建一个超类，`Move`并且所有特殊动作都可以扩展它：

```
public abstract class Move
{
    public abstract void performOn(Monster m);
} 
```

然后扩展：

```
public class FirebreathMove extends Move
{
    public void performOn(Monster m)
    {
         // do something to Monster
    }
} 
```

或者你可以创建一个接口：

```
public interface Move
{
    public void performOn(Monster m);
} 
```

你的动作可以实现它：

```
public class FirebreathMove implements Move
{
    public void performOn(Monster m)
    {
         // do something to Monster
    }
} 
```

在任何一种情况下，您都会引用`Move`可以调用的 a `performOn(Monster)`，但这取决于所有移动是否共享某种您想要子类化的通用功能（第一种方法，带有超类），或者移动是否也可以是其他东西和你只需要`performOn(Monster)`方法签名。例如，如果你有类似武器的东西，它有一个移动：

```
public class FancyWeapon extends Weapon implements Move
{

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T03:15:01.650

我不确定这是否是你的意思，但`interface`可能是你所追求的？

界面如下所示： `public interface Move() { void performOn(Object o); String getMoveName(); }`

该示例，然后您将创建一系列类： `public class BreatheFire implements Move { @Overrides public void performOn(Object o) { .... } }`.

希望有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T03:15:14.937

你可以有一个 Move 父类（或接口），所以它的工作原理与此类似。

```
public interface Move{
  public void performOn(Monster m);
}

public Firebreath implements Move{
  public void performOn(Monster m)
  {
    m.takeFireDamage(5);
  }
}

public Heal implements Move{
  public void performOn(Monster m)
  {
    m.healDamage(5);
  }
} 
```

# excel - 用于计算唯一值的简单数据透视表

> ID：11876238
> 
> 赞同：138
> 
> 时间：2012-08-09T03:09:56.630
> 
> 标签：excel, excel-formula, pivot-table

这似乎是一个简单的数据透视表来学习。我想为我分组的特定值计算唯一值。

例如，我有这个：

```
ABC   123
ABC   123
ABC   123
DEF   456
DEF   567
DEF   456
DEF   456 
```

我想要的是一个向我展示这个的数据透视表：

```
ABC   1
DEF   2 
```

我创建的简单数据透视表只是给了我这个（多少行的计数）：

```
ABC   3
DEF   4 
```

但我想要的是唯一值的数量。

我真正想做的是找出第一列中的哪些值在所有行的第二列中没有相同的值。换句话说，“ABC”是“好”，“DEF”是“坏”

我确信有一种更简单的方法可以做到这一点，但我想我会试试数据透视表......

* * *

## 回答 #1

> 赞同：252
> 
> 时间：2014-02-04T12:21:45.117

更新：您现在可以使用 Excel 2013 自动执行此操作。我将其创建为新答案，因为我之前的答案实际上解决了一个略有不同的问题。

如果您有该版本，请选择您的数据以创建数据透视表，并在创建表时确保选中“将此数据添加到数据模型”复选框（见下文）。

![勾选“将此数据添加到数据模型”旁边的框](../Images/ba6ff94d789fb41e01298bcea4620dad.png)

然后，当您的数据透视表打开时，正常创建行、列和值。然后单击要计算不同计数的字段并编辑字段值设置： ![编辑字段值设置](../Images/6322105b52311aa4f0d5670d5fba6c31.png)

最后，向下滚动到最后一个选项并选择“不同计数”。 ![选择“不同计数”选项](../Images/28c1707e7cb788439d12f314afd874cc.png)

这应该会更新您的数据透视表值以显示您正在查找的数据。

* * *

## 回答 #2

> 赞同：110
> 
> 时间：2012-08-09T03:18:52.793

插入第三列并在单元格中`C2`粘贴此公式

```
=IF(SUMPRODUCT(($A$2:$A2=A2)*($B$2:$B2=B2))>1,0,1) 
```

并将其复制下来。现在根据第 1 列和第 3 列创建您的数据透视表。查看快照

![在此处输入图像描述](../Images/e29503c1fa2b5384dc51a42502dd3eba.png)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-08-02T11:51:11.507

我想在不需要公式的组合中添加一个额外的选项，但如果您需要计算两个不同列中集合中的唯一值，这可能会有所帮助。使用原始示例，我没有：

```
ABC   123  
ABC   123  
ABC   123   
DEF   456  
DEF   567  
DEF   456  
DEF   456 
```

并希望它显示为：

```
ABC   1  
DEF   2 
```

但更像是：

```
ABC   123  
ABC   123  
ABC   123  
ABC   456  
DEF   123  
DEF   456  
DEF   567  
DEF   456  
DEF   456 
```

并希望它显示为：

```
ABC  
   123    3  
   456    1  
DEF  
   123    1  
   456    3  
   567    1 
```

我发现将数据转换为这种格式然后能够进一步操作它的最佳方法是使用以下内容：

![在此处输入图像描述](../Images/6dd0a9ae57d749bec3cc432d49386f71.png)

一旦您选择“运行总计”，然后选择辅助数据集的标题（在这种情况下，它将是包含 123、456 和 567 的数据集的标题或列标题）。这将为您提供一个最大值，其中包含您的主要数据集中该集合中的项目总数。

然后我复制了这些数据，将其粘贴为值，然后将其放入另一个数据透视表中以更轻松地对其进行操作。

仅供参考，我有大约 25 万行数据，所以这比一些公式方法好得多，尤其是那些试图跨两列/数据集进行比较的方法，因为它不断使应用程序崩溃。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-07-06T00:46:29.900

我发现最简单的方法是使用`Distinct Count`下面的选项`Value Field Settings`（**左键**`Values`单击窗格中的字段）。的选项`Distinct Count`位于列表的最底部。

[![点击位置](../Images/a889d6b7c7edf50a297d53ac2d835de7.png)](https://i.stack.imgur.com/3ALQM.png)

这是之前 (TOP; normal `Count`) 和之后 (BOTTOM; `Distinct Count`)

[![数数](../Images/76d70b476e576f5e214ad869cebbb408.png)](https://i.stack.imgur.com/BqGv0.png)

[![不同的计数](../Images/aa2fcf4a0c4367d06dcf7929d99d771c.png)](https://i.stack.imgur.com/JPj0A.png)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-08-09T03:21:21.987

参见 Debra Dalgleish 的[独特物品计数](http://www.contextures.com/xlPivot07.html#Unique)

![在此处输入图像描述](../Images/7a66787f9d7023dbb2592d2181b981c3.png)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-10-01T20:52:31.707

不必为以下公式对表进行排序，以便为每个存在的唯一值返回 1。

假设问题中数据的表格范围是 A1:B7 在单元格 C1 中输入以下公式：

```
=IF(COUNTIF($B$1:$B1,B1)>1,0,COUNTIF($B$1:$B1,B1)) 
```

将该公式复制到所有行，最后一行将包含：

```
=IF(COUNTIF($B$1:$B7,B7)>1,0,COUNTIF($B$1:$B7,B7)) 
```

这导致第一次找到记录时返回 1，之后所有时间返回 0。

只需对数据透视表中的列求和

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-10-23T18:17:48.820

我解决这个问题的方法与我在这里看到的有点不同，所以我会分享一下。

1.  （首先复制您的数据）
2.  连接列
3.  删除连接列上的重复项
4.  最后 - 以结果集为中心

**注意：**我想包含图像以使其更容易理解，但不能因为这是我的第一篇文章；）

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-08T21:55:36.777

悉达多的回答非常棒。

*但是*，这种技术在处理大量数据时可能会遇到麻烦（我的计算机在 50,000 行时冻结）。一些处理器密集程度较低的方法：

**单一唯一性检查**

1.  按两列排序（本例中为 A、B）
2.  使用查看较少数据的公式

    ```
    =IF(SUMPRODUCT(($A2:$A3=A2)*($B2:$B3=B2))>1,0,1) 
    ```

**多重唯一性检查**

如果您需要检查不同列中的唯一性，则不能依赖两种排序。

反而，

1.  排序单列 (A)
2.  添加涵盖每个分组的最大记录数的公式。如果 ABC 可能有 50 行，则公式为

    ```
    =IF(SUMPRODUCT(($A2:$A49=A2)*($B2:$B49=B2))>1,0,1) 
    ```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-10-14T20:39:11.593

Excel 2013 可以在数据透视表中进行不同计数。如果无法访问 2013 年，并且数据量较小，我会制作原始数据的两份副本，并在副本 b 中选择两列并删除重复项。然后进行枢轴并计算您的列 b。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-09-09T12:36:26.360

**步骤 1.**添加列

**步骤 2.**`IF(COUNTIF(C2:$C$2410,C2)>1,0,1)`在第一条记录中使用公式 =

**步骤 3.**将其拖到所有记录中

**步骤 4.**用公式过滤列中的“1”

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-07-09T19:01:24.413

您可以将 COUNTIFS 用于多个条件，

=1/COUNTIFS(A:A,A2,B:B,B2) 然后向下拖动。您可以在其中放置任意数量的标准，但这往往需要花费大量时间来处理。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-05-27T06:58:02.557

如果您对数据进行了排序..我建议使用以下公式

```
=IF(OR(A2<>A3,B2<>B3),1,0) 
```

这更快，因为它使用更少的单元格来计算。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-06-05T11:12:43.137

我通常按​​需要进行不同计数的字段对数据进行排序，然后使用 IF(A2=A1,0,1); 然后你会在每组 ID 的第一行得到一个 1。简单，不需要任何时间来计算大型数据集。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2012-08-09T03:20:07.073

您可以创建一个额外的列来存储唯一性，然后在您的数据透视表中*进行总结。*

我的意思是，细胞`C1`应该永远是`1`. 单元格`C2`应包含公式`=IF(COUNTIF($A$1:$A1,$A2)*COUNTIF($B$1:$B1,$B2)>0,0,1)`。将此公式复制下来，以便单元格`C3`包含`=IF(COUNTIF($A$1:$A2,$A3)*COUNTIF($B$1:$B2,$B3)>0,0,1)`等等。

如果你有一个标题单元格，你会想要将这些都向下移动一行，你的`C3`公式应该是`=IF(COUNTIF($A$2:$A2,$A3)*COUNTIF($B$2:$B2,$B3)>0,0,1)`.

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-10-03T07:40:20.100

您也可以使用辅助列`VLOOKUP`。我测试过，看起来比`COUNTIF`.

如果您使用标题并且数据从单元格开始`A2`，则在行中的任何单元格中使用此公式并复制到同一列中的所有其他单元格中：

```
=IFERROR(IF(VLOOKUP(A2;$A$1:A1;1;0)=A2;0;1);1) 
```

* * *

## 回答 #16

> 赞同：-3
> 
> 时间：2013-01-08T17:06:46.583

我找到了一种更简单的方法。参考 Siddarth Rout 的示例，如果我想计算 A 列中的唯一值：

*   添加一个新列 C 并用公式“=1/COUNTIF($A:$A,A2)”填充 C2
*   将公式向下拖动到列的其余部分
*   以 A 列作为行标签并在值中求和 {column C) 以获取 A 列中唯一值的数量

# ios - 异步请求/响应：我什么时候才真正完成？

> ID：11876243
> 
> 赞同：1
> 
> 时间：2012-08-09T03:10:35.783
> 
> 标签：ios, cocoa-touch, cocoa, cocoa-design-patterns

这是一个设计模式问题。

想象一个编程任务，其中一个人正在开发一个将与服务器异步（通过流）交互的客户端。假设挑战是执行不确定数量的任务，每个任务都可能产生不确定数量的子任务（即 - 爬树）。每个任务向服务器发出一个异步请求，并提供两个块（一个用于处理预期返回条件，一个用于错误条件）来处理响应处理。

在这样的场景中，我很容易看出如何将出站请求排队，但是清空该队列并不意味着整体任务已完成，因为后续响应处理可能会排队更多出站请求。在完成整体任务的过程中，出站请求队列可能多次为零。

在 iOS 下，您会建议什么样的选项（设计模式和有用的类）来确定整体任务何时真正完成？

另一个问题是，在错误情况下（对于任何子任务），我希望取消整体任务（和所有子任务）。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:10:00.983

出站请求排队与服务器和客户端之间的通信有关，与完成无关。

每当您需要执行某项任务时，您都会发送对该任务的请求并将其添加到当前待处理的任务集合中。

当您收到答案时，您会对其进行处理，最终生成新任务，然后从待处理任务集合中删除与答案相关的任务。

当没有待处理的任务时，您就完成了。

中止错误需要服务器的明确支持。您需要能够为挂起的任务发送中止请求，并且服务器必须能够中止该任务并向您确认这一事实（或者如果在服务器上任务已经完成，则忽略中止请求并且服务器已经向您发送了该任务的答案）。

处理错误响应时，您遍历待处理任务的集合，为每个任务发送一个中止请求到服务器并将它们标记为已取消（但将它们留在待处理任务集合中）。

当您收到标记为已取消的任务的答案时，您将忽略它（并从集合中删除该任务），无论它是成功答案、错误答案还是中止确认。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T06:15:25.493

对不起，可能是我对你的理解不正确，试试 ASIHTTPRequest，[http:](http://allseeing-i.com/ASIHTTPRequest/) //allseeing-i.com/ASIHTTPRequest/ ，可能对你有帮助。

# javascript - jQuery 手风琴在其内容被清空并重新创建后不起作用

> ID：11876245
> 
> 赞同：0
> 
> 时间：2012-08-09T03:10:43.930
> 
> 标签：javascript, jquery, html, jquery-ui-accordion

您将看到单击 divA 时，divAA 会向下滑动。单击 divB 时，divBB 将向下滑动。

清除主 DIV 并再次附加相同的内容后，手风琴停止工作，如本演示所示：http: [//jsfiddle.net/p7vUk/2/](http://jsfiddle.net/p7vUk/2/)

有人可以解释为什么它停止工作以及如何解决它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T03:21:45.263

试试[这个](http://jsfiddle.net/arunpjohny/p7vUk/19/)。

您需要在清除之前重置手风琴小部件。仅调用`.accordion()`将不起作用，因为`accordion`已经为`#content`元素初始化，因此您需要从`#content`使用该`.accordion('destroy')`方法中删除现有的手风琴小部件。

```
function createAccordion(){
    $("#content").accordion({
        active: -1,
        collapsible: true,
        autoHeight: false,
        clearStyle: true
    });
}

$(document).ready(function () {
            createAccordion();                
        });

function clearAndAdd() {
    $("#content").accordion( "destroy" ).empty();
    $("#content").append('<div id="a">DIV ID A</div><div id="aa">DIV ID AA</div><div id="b">DIV ID B</div><div id="bb">DIV ID BB</div>');
    createAccordion();                
} 
```

在这里，手风琴的创建被抽象为一个单独的方法，因为它必须使用两次。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T03:22:24.250

您的问题是删除了手风琴功能附加到的原始 DOM 对象。仅仅因为您添加了新的并不意味着它是同一件事。它们是全新的元素，因此您必须再次在它们上运行手风琴功能。这就像我能说的那样愚蠢。

所以试试这个..

```
function clearAndAdd() {

            $("#content").empty();
            $("#content").append('<div id="a">DIV ID A</div><div id="aa">DIV ID AA</div><div id="b">DIV ID B</div><div id="bb">DIV ID BB</div>');
            $("#content").accordion();
        } 
```

如果最后一个新行不起作用，试试这个

```
$("#content").accordion('destroy').accordion(); 
```

# html-parsing - 我正在通过 phantomjs 解析一些 HTML，如何设置解析的语言？

> ID：11876251
> 
> 赞同：0
> 
> 时间：2012-08-09T03:11:23.310
> 
> 标签：html-parsing, phantomjs

我想解析phantomjs的英文版html源代码。

以下是我的代码：

```
var page = require('webpage').create();

if (phantom.args.length === 0) {
    console.log('Usage: google.js keyword');
    phantom.exit();
}

address = "http://www.google.com"
keyword = phantom.args[0];

page.open(address, function (status) {
    if (status !== 'success') {
        console.log('FAIL to load the address');
    } else {

        if (page.injectJs("jquery-1.3.2.min.js")) {
            console.log("jQuery loaded...");
        }   

        console.log(page.content);
    }

    phantom.exit();
}); 
```

但是，由于我在台湾，所以我得到的是中文版。我的平台是 Macbook Pro，Mountain Lion（英文版）。

如何更改我解析的语言？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:01:07.843

您获得页面的语言取决于站点的实现。如果站点根据您的位置决定语言，则对您来说情况更糟。解决此问题的唯一方法是使用来自英语地区的代理服务器。

**更新**

如果是 google.com，请使用以下网址

```
https://www.google.com/?hl=en 
```

代替

```
https://www.google.com/ 
```

# javascript - 如何将数组拆分为另一对数组

> ID：11876252
> 
> 赞同：1
> 
> 时间：2012-08-09T03:11:48.160
> 
> 标签：javascript

我想要一个非常简单的功能，我希望用简短而漂亮的代码来做下面

输入：

```
[1,2,3,4,5,6,7,8,9,10] 
```

输出：

```
[[1,2],[3,4],[5,6],[7,8],[9,10]] 
```

如何在 javascript 中执行此操作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T03:23:30.177

这是一种不同的风格，它改变了数组（假设数组条目的数量是偶数）：

```
var orig = [1,2,3,4,5,6,7,8,9,10];
for (var i = 0; i < orig.length; i+=2) {
    orig[i/2] = [orig[i], orig[i+1]];
}
orig.length /= 2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T03:15:03.460

```
function splitPairs(arr) {
  var newArr = new Array(Math.round(arr.length / 2));
  for (var i=0, l=arr.length; i<l; i+=2) {
    newArr[i>>1] = [arr[i], arr[i+1]];
  }
  return newArr;
} 
```

[小提琴](http://jsfiddle.net/elclanrs/PRC9R/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T03:20:43.223

两行：

```
function cut(ar)
{
    for(var i=0,l=ar.length,tmpar=[];i<l;i+=2)tmpar[tmpar.length]=[ar[i],ar[i+1]];
    return tmpar;
} 
```

[http://jsfiddle.net/7yd26/3/](http://jsfiddle.net/7yd26/3/)

并且数组中有奇数个元素，它也可以工作：http: [//jsfiddle.net/7yd26/4/](http://jsfiddle.net/7yd26/4/)

# iphone - NSInteger 是 32 位整数吗

> ID：11876254
> 
> 赞同：4
> 
> 时间：2012-08-09T03:11:55.963
> 
> 标签：iphone, ios, nsinteger, int32

我认为在 ios 环境中声明 NSInteger 意味着它只会是 32 位值，我是否正确？

我想知道，另一位不熟悉目标 c 的程序员告诉我使用 int32，我在目标 C 中可以找到的唯一类似的东西是 int32_t，_t 代表“整数类型”。但是使用这些types 正在成为一种真正的痛苦我觉得我没有像 NSInteger 那样从objective c 提供的所有功能控制。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T03:24:55.190

以下是旧 SDK`NSInteger`中“”中“”的定义方式：`NSObjCRuntime.h`

```
#if __LP64__ || (TARGET_OS_EMBEDDED && !TARGET_OS_IPHONE) || TARGET_OS_WIN32 || NS_BUILD_32_LIKE_64
typedef long NSInteger;
typedef unsigned long NSUInteger;
#else
typedef int NSInteger;
typedef unsigned int NSUInteger;
#endif 
```

截至 2013 年 9 月，iPhone 现在可以运行 64 位芯片，这意味着 NSInteger 可能要大得多。

在我自己的编码中，如果我在做纯粹的 Objective C，我会坚持下去，`NSInteger`因为这为我的代码提供了面向未来的证明。另一方面，开源的东西和某些程序员喜欢使用 " `uint32_t`" 或 " `int32_t`" 和其他类似的显式类型，所以当我看到这些时，我会尝试在我正在使用的代码中匹配他们的风格.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T05:25:49.737

typedef 的存在是为了保护您免受基本类型的影响，这就是为什么您使用它们而不是原始类型（称为可移植性）的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-01T10:12:24.623

更新 iOS 11：NSInteger 可以是 32 位或 64 位，具体取决于构建的应用程序和 iOS 版本。

> 在构建 32 位应用程序时，NSInteger 是一个 32 位整数。64 位应用程序将 NSInteger 视为 64 位整数。

[https://developer.apple.com/documentation/objectivec/nsinteger](https://developer.apple.com/documentation/objectivec/nsinteger)

# coordinates - 如何在不使用 Google 的地理编码服务的情况下获取地址的纬度和经度

> ID：11876259
> 
> 赞同：5
> 
> 时间：2012-08-09T03:12:39.457
> 
> 标签：coordinates, geocoding, mapbox

我想获取地址的纬度和经度。有没有办法在不使用 Google 的地理编码 API 的情况下做到这一点？

我想使用[tilemill](http://mapbox.com/tilemill/)在我的地图上显示我的地址。据我了解，使用从谷歌获得的纬度和经度阻止我在瓷砖厂使用它们。

那么我应该怎么做才能得到这些。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T03:36:56.073

正确的。荣誉 TOS。

还有其他执行地理编码的服务。仅举几例：[Bing](http://msdn.microsoft.com/en-us/library/ff701713.aspx)、[Yahoo](http://developer.yahoo.com/maps/rest/V1/geocode.html)、[MapQuest](http://developer.mapquest.com/web/products/dev-services/geocoding-ws)、[Nominatim](http://wiki.openstreetmap.org/wiki/Nominatim)。但是，它们有各种服务条款限制，这些限制与 Google 的类似，也可能适用。如果不是这样，那么就有查询限制。还有 USC WebGIS，但它的[演示](https://webgis.usc.edu/Services/AddressValidation/AjaxValidator.aspx)经常出现故障，而且据报道该服务是断断续续的。

绕过许多这些免费服务的限制的方法可能是使用商业服务。那里有几个，每个工作都有点不同。有些人会搜索地址并做出最佳猜测（或近似）结果——这就是谷歌和其他搜索服务所做的。

其他人将获取一个疑似真实的地址，并对其进行实际验证，然后对其进行地理编码。这可能会导致更有用和更准确的结果，因为可以保证地址是正确和标准化的。在美国，这称为[CASS™ 处理](http://smartystreets.com/what-is/cass-processing)（尽管并非所有供应商都会进行地理编码）。它对于在地图上创建周长（给定地理编码精度值）以及在正确的位置而不是数百英里外的次优地址显示坐标很有用。

[LiveAddress API](http://smartystreets.com/products/liveaddress-api)就是这样一种地理编码服务。（我在 SmartyStreets 工作。）[演示展示了地理编码的工作原理](http://smartystreets.com/products/liveaddress-api/demo)，但它很灵活，因此您可以选择如何使用 tilemill 来实现它。此外，LiveAddress 没有查询限制，因为系统将根据需求进行扩展。而且您不会为未验证的地址付费，这有助于防止滥用。

选择是你的，取决于你的需要。做一点研究，你应该找到一些好的东西。希望这个对你有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-04T20:44:57.703

我一直在使用这项免费服务，效果很好。我建议使用 100 或更小的地址批次以获得最佳效果。

[http://www.findlatitudeandlongitude.com/batch-geocode/#.UxY7OvSwJDR](http://www.findlatitudeandlongitude.com/batch-geocode/#.UxY7OvSwJDR)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-07T18:27:08.520

当然，也可以运行自己的 Nominatim 安装。是相当多的工作，但你没有任何限制......

要开始，请参阅[此页面](http://wiki.openstreetmap.org/wiki/Nominatim/Installation)

# android - Android，加载gridview时如何禁用显示“正在加载...”？

> ID：11876261
> 
> 赞同：0
> 
> 时间：2012-08-09T03:13:13.543
> 
> 标签：android, gridview, loading

当我的 gridview 加载内容时，它总是会在网格项中显示一个“正在加载...”字符串。

我怎样才能禁用它？所以我想在加载某些东西时将网格保持为原始样式。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T06:59:42.173

这就是我所做的。

有一个框架布局或一个包含 GridView 和 TextView 的相对布局（fill_parent，中间有文本“正在加载...”）。

在 AsyncTask 期间，onPreExcute 将 gridView 的可见性设置为`View.GONE`，将 textview 设置为 Visible，在 onPostExecute 期间，将 GridView 的可见性切换回 Visible 并关闭 textview 的可见性。

除了 TextView，它还可以是包含进度条和文本视图的复合布局。

这也是“空视图”的工作原理。（至少对于旧版本）

# erlang - 偏航作为钢筋依赖

> ID：11876263
> 
> 赞同：3
> 
> 时间：2012-08-09T03:13:34.437
> 
> 标签：erlang, yaws, rebar

如何在我的 Erlang 应用程序中安装 Yaws 作为 Rebar 依赖项？

谢谢，

LRP

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T12:54:59.207

首先，确保您使用的是`rebar`2012 年 4 月或更高版本（`rebar`提交`dc472b`或更高版本）的最新版本，因为在 2012 年初对其进行了更改，专门用于支持 Yaws 等项目。

要将 Yaws 用作依赖项，请在`rebar.config`文件中指定以下内容：

```
{deps, [{yaws, ".*", {git, "git://github.com/klacke/yaws", {branch, "master"}}}]}. 
```

`{branch, "master"}`如果您愿意，可以使用特定的 Yaws 标签替换该部分：

```
{deps, [{yaws, ".*", {git, "git://github.com/klacke/yaws", {tag, "yaws-1.94"}}}]}. 
```

但请注意，我不建议使用低于 Yaws 1.94 的版本，因为专门针对`rebar`构建支持对 Yaws 进行了更改。

你实际运行 Yaws 的方式取决于你的应用程序如何使用它。[以嵌入式方式](http://yaws.hyber.org/embed.yaws)使用它可能最适合 rebar 构建的应用程序，因为这样您就不会对`yaws.conf`文件有任何依赖。但是如果你想将 Yaws 作为一个独立的 Web 服务器运行，你可以构建你的依赖项和你的应用程序，然后像这样[交互式地运行 Yaws](http://yaws.hyber.org/yman.yaws?page=yaws)：

```
rebar get-deps compile
./deps/yaws/bin/yaws -i -pa ebin 
```

这使用在 中找到的默认`yaws.conf`文件`./deps/yaws/etc/yaws/yaws.conf`，您可以根据需要对其进行修改。以这种方式启动 Yaws 不会`ebin`在加载路径中包含任何其他应用程序的 rebar 依赖项的目录，但您可以使用`-pa`Yaws 的附加选项添加必要的路径，或者在[文件](http://yaws.hyber.org/yman.yaws?page=yaws.conf)[中指定它们`yaws.conf`](http://yaws.hyber.org/yman.yaws?page=yaws.conf)。

# objective-c - 在后台线程上渲染新的 UIView 图层内容？

> ID：11876264
> 
> 赞同：1
> 
> 时间：2012-08-09T03:13:48.050
> 
> 标签：objective-c, ios5, uiview, calayer

我有一大堆旋转动画 UIView 实例，其内容设置为各种 CGImage ，它们都是（并且本质上需要）动态创建的。它工作得很好，但图像生成速度很慢（大约 1/4 秒到 1 秒——即，不可接受）。

所以我想做的是非常快速地生成一个低分辨率的近似值（比如 1/100 秒），并将 UIView 的 CALayer 的内容（例如，`view.layer.contents`）设置为那个快速的低分辨率图像，然后立即生成背景线程来生成高分辨率版本，以便在准备好后立即替换低分辨率版本。

有哪些明智的方法可以做到这一点？

我的想法是我应该使用GCD（Grand Central Dispatch）来调度后台线程，然后在完成后再次使用它来发送消息。如果我这样做，将新的高分辨率替换图像作为完成消息的一部分发送是否有意义？

如果我需要取消后台线程怎么办？如果用户向前翻页到不同的对象，就会发生这种情况，在这种情况下，我将不得不取消当前的后台任务并为不同的视图启动一个新任务。（这实际上是一个相当普遍的情况，所以我肯定需要处理它。）我不认为我可以杀死后台任务，因为它可能正在处理 CGPath、CGGradient、CGImage 等对象那将需要被释放。有哪些方法可以从一个线程设置另一个线程可以测试的标志？我是否应该从主线程向后台线程发送某种“中止”信号，然后让后台线程在最舒适的位置自行中止创建图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T04:34:02.797

我不会为此使用 GCD。GCD 在回调中更新 UI 时出现问题。如果按图像执行此操作，则会破坏性能。只需分离一个线程并实现高清图像在每次渲染其中一个图像时串行执行回调。它更简单，您对主线程的回调将显示得更快。

由于某种原因，来自 GCD 的 UI 更新似乎不太可靠，因为速度太慢了。不知道为什么会这样。

# c# - 像在 C# 中一样在 C++ 中绑定

> ID：11876267
> 
> 赞同：0
> 
> 时间：2012-08-09T03:14:05.877
> 
> 标签：c#, c++, binding

是否可以像在 C# 中一样在 C++ 中绑定变量（转换值......自动更新......等）？

几年前，我对 C++ 有过短暂的体验，现在已经使用 C# 编程大约一年半了。现在我想回到 C++ 并想到这个问题。有谁能够帮助我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T03:38:03.343

C++ 没有直接的 IDE 级模式来将模型绑定到视图。像 C# 和 Obj-C 这样的语言在设计时就考虑到了这一点，围绕它们构建的框架也是如此。因此，即使您不能使用界面构建器将模型绑定到视图，也可能编写一些样板代码并且 BAM 应用程序可以工作......您仍然可以获得相同的效果，但您需要了解这背后的样板代码模式更直接。

Qt 一如既往是一个很好的例子：http: [//doc.qt.nokia.com/4.7-snapshot/model-view-programming.html](http://doc.qt.nokia.com/4.7-snapshot/model-view-programming.html)

# android - Flex - 从视图中访问 TabbedViewNavigatorApplication 中的 ViewNavigators？

> ID：11876273
> 
> 赞同：0
> 
> 时间：2012-08-09T03:15:02.320
> 
> 标签：android, apache-flex, mobile, air

我`TabbedViewNavigatorApplication`在 Flex 上有一个 android 应用程序。我有各种 Spark`View`包含我的应用程序的内容。我`ViewNavigator`里面也有`TabbedViewNavigatorApplication`。`ViewNavigator`如果某个进程正在我的某个 s中进行，我想禁用某些`View`s。所以我的问题是，如何从 Spark 中引用 ViewNavigators `View`？

我已经尝试过`this.parent.idOfOneOfMyVieNavigator.enabled = false;`，但 Flash Builder 无法识别`idOfOneOfMyVieNavigator`，所以我认为它不起作用。另外，它给了我错误：*未定义属性 idOfOneOfMyVieNavigator 的访问*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T04:46:25.950

尝试[`View.navigator`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/View.html#navigator)获取包含导航器：

```
myView.navigator.enabled = false; 
```

（此外，在玩皮肤的情况下，`owner`第一次猜测可能比`parent`.）

由于您有多个`ViewNavigator`s，因此最好直接进入应用程序：

```
var myApp:MyApplication = FlexGlobals.topLevelApplication as MyApplication;
myApp.firstNavigator.enabled = true;
myApp.secondNavigator.enabled = false; 
```

显然，如果此代码位于 中`View`，那么重用代码的方式将受到限制，但这对您来说可能不是问题。

# meteor - 有人致力于改进 todo 示例吗？

> ID：11876277
> 
> 赞同：0
> 
> 时间：2012-08-09T03:15:29.777
> 
> 标签：meteor

待办事项示例的视频以演讲者提到 (a) 添加按钮以删除整个列表 (b) 添加控件以让用户更改列表中项目的顺序结束。

有人做过这些改进吗？如果是这样，你介意分享吗？我很想通过比较变更集来开始进入流星。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T05:41:20.213

所以，我得到了一份 Todo 工作的副本，因为它一点都不简单，对于第一次使用流星的人来说，这样做，我将记录我遇到的主要障碍，以及如何克服它。

首先，我使用“meteor create --example todo”来下拉 todo 示例。

然后，（我的障碍的第一个根本原因 - 过度思考）而不是仅仅破解它，我使用“meteor create projectname”开始了一个新项目

然后我将 3 个目录的文件复制到新项目中 - “客户端”、“公共”和“服务器”。

我立即开始破解文件（我的障碍的第二个根本原因 - 没有采取婴儿步骤），当我测试时，它几乎可以工作。

最初的渲染工作，mongo db 的东西是金色的，双击让我编辑东西......但是“选择”不起作用。即用于选择列表项的on-mousedown 处理程序不会选择它。

我添加了一些 alert() 调用，最后得知“Router”为空！我决定专注于我所做的改变之外，看看它是否不是更基本的东西。

我检查了 javascript 控制台是否有错误，果然有一个很大的错误：Backbone 未定义。

检查示例“todo”项目，“meteor list --using”告诉我：下划线骨干

...而在我的新项目中，同样的命令告诉我我没有使用任何可用的包。

当我添加下划线和主干时，我的 todo 副本开始正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T06:55:04.220

我在 Meteor.com 的“Todos”示例中创建了“删除列表”功能。

警告：当用户单击“删除列表”图标时，没有警告或警报。应该有吧。接下来我会这样做。:-)

“删除列表”功能会删除所有关联的待办事项。另一种实现可以选择将这些不相关的 Todos 保留到“未命名列表”中。练习留给读者。

享受

艾伦·S。

以下是补丁的要点，然后是三个受影响文件的各个补丁：todos.js、todos.css、todos.html。

[https://gist.github.com/aks/fd8b1fad8b583be24af1](https://gist.github.com/aks/fd8b1fad8b583be24af1)

## todos.js

```
--- todos-orig/client/todos.js  2013-04-19 23:05:05.422782896 -0700
+++ todos/client/todos.js       2013-04-19 23:00:57.571651600 -0700
@@ -93,6 +93,23 @@
     // prevent clicks on <a> from refreshing the page.
     evt.preventDefault();
   },
+  'click .destroy': function (evt) { // delete list
+    var list_id = this._id;
+    // remove todos attached to this list
+    Todos.find({list_id: list_id}).
+         forEach(function (todo) { 
+           Todos.remove(todo._id);
+         });
+    // remove the list
+    Lists.remove(list_id);
+    Session.set("list_id", null);
+    var list = Lists.findOne({}, {sort: {name: 1}});
+    if (list) {
+      Router.setList(list._id);
+      Session.set("list_id", list._id);
+    }
+    Deps.flush();
+  },
   'dblclick .list': function (evt, tmpl) { // start editing list name
     Session.set('editing_listname', this._id);
     Deps.flush(); // force DOM redraw, so we can focus the edit field 
```

## todos.css

```
--- todos-orig/client/todos.css 2013-04-19 23:05:05.422782896 -0700
+++ todos/client/todos.css      2013-04-19 23:31:40.682096634 -0700
@@ -121,6 +121,11 @@

 #lists .list {
     padding: 3px 6px;
+    display: block;
+    height: 30px;
+    position: relative;
+    overflow: hidden;
+    /*border-top: 1px solid #ccc;*/
 }

 #lists .selected {
@@ -129,10 +134,22 @@
     font-weight: bold;
 }

-#lists .list-name {
+#lists .list .destroy {
     cursor: pointer;
+    position: absolute;
+    left: 5px;
+    top: 5px;
+    height: 20px;
+    width: 20px;
+}
+
+#lists .list-name {
     color: black;
+    cursor: pointer;
+    float: left;
+    margin-left: 30px;
     text-decoration: none;
+    width: auto;
 }

 #createList {
@@ -201,11 +218,13 @@
     color: #999;
 }

-#item-list .todo:hover .destroy {
+#item-list .todo:hover .destroy, 
+#lists .list:hover .destroy {
     background: url('/destroy.png') no-repeat 0 0;
 }

-#item-list .todo .destroy:hover {
+#item-list .todo .destroy:hover,
+#lists .list .destroy:hover {
     background-position: 0 -20px;
 } 
```

## todos.html

```
--- todos-orig/client/todos.html        2013-04-19 23:05:05.418783039 -0700
+++ todos/client/todos.html     2013-04-19 21:10:28.576711844 -0700
@@ -29,6 +29,7 @@
               <input class="list-name-input" id="list-name-input" type="text" value="{{name}}" />
             </div>
           {{else}}
+           <div class="destroy"></div>
             <div class="display">
               <a class="list-name {{name_class}}" href="/{{_id}}">
                 {{name}} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-24T17:33:39.023

我[在我的 github 存储库](https://github.com/foobarbecue/meteor-todos)中添加了两个新功能，将其变成了时间跟踪器：

*   记录和显示每个待办事项的完成时间戳。
*   时间跟踪——当你在做某事时点击“活动”，然后它会计数并显示你在该项目上花费的时间。

# cuda - cudaErrorInvalidResourceHandle？

> ID：11876279
> 
> 赞同：0
> 
> 时间：2012-08-09T03:16:07.807
> 
> 标签：cuda

我有在 Linux 系统上开发并在那里工作的 CUDA 主机和内核代码。我将它们移植到 Win 7 系统以使用 Nvidia Nsight 调试和分析工具。

代码*不在*Win 7系统上运行；在某些时候，对 cudaMalloc 或内核调用的请求会返回一个错误代码，翻译为：cudaErrorInvalidResourceHandle。（失败的内核是第一个内核调用；使用 Nsight 在内核的第一行设置断点无法触发——错误发生在内核实际被调用之前。）

该程序创建单个流并且不创建任何事件，因此唯一的资源句柄必须是与流关联的资源句柄，但流句柄不会出现损坏。我的系统中有一个 Fermi 和一个 Kepler 板，因此我可以检查每个板的运行时间，因此我加载了最新的 Nvidia 驱动程序 [9.18.13.448 (6-11-2012) - nvoglv64][304.48]。我可以在第二个系统上复制这个问题。

有没有人见过这个错误信息？对要检查的内容有任何见解吗？通常我会注释掉程序的大部分以隔离有罪的行，但这个程序非常复杂（你能说意大利面条吗）并且 cuda 调用来自各地。所以在我开始屠杀程序之前，我想我会问这个社区是否曾经出现过这个错误。我也在考虑这可能是驱动程序问题，但由于 Nvidia 论坛关闭，我无法访问 Nvidia。

感谢您的任何想法。

杰米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T22:24:09.913

问题似乎是 nvidia 驱动程序和 cuda 版本不匹配。将nvidia驱动程序简化为cuda版本，问题就消失了。

# javascript - 在 nodejs 上启动新进程

> ID：11876281
> 
> 赞同：11
> 
> 时间：2012-08-09T03:16:13.860
> 
> 标签：javascript, node.js, process

我正在使用node.js，并且我希望在有对像./calculate 这样的url 的请求时启动一个新进程来进行这些复杂的计算，并且即使调用它的脚本已经完成，我也希望该进程继续进行。可能吗？

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T12:33:40.547

您可以使用本机提供的子进程工具： [http ://nodejs.org/api/child_process.html](http://nodejs.org/api/child_process.html)

并使用 unix "nohup" 命令使生成的进程保持活动状态，即使父进程死亡。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T03:20:02.953

对此有不同的方法。

您可以使用[https://github.com/pgriess/node-webworker](https://github.com/pgriess/node-webworker)。

或者更好的[http://nodejs.org/docs/latest/api/cluster.html#cluster_cluster](http://nodejs.org/docs/latest/api/cluster.html#cluster_cluster)。

这些解决方案是，如果您想在 Node 中执行子进程，您也可以简单地生成一个新的 Node 进程并等待输出（http://nodejs.org/api/all.html#all_child_process_spawn_command_args_options）但 node-webworker 是包装该解决方案并且更清洁。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T07:17:12.197

因此，在您的最后评论之后，我更了解您想要做什么。

您想生成进程而不是子进程。最好和更干净的方法是使用某种恶魔化器来运行它们。

看看永远：
[https ://github.com/nodejitsu/forever](https://github.com/nodejitsu/forever)
[https://github.com/nodejitsu/forever-monitor](https://github.com/nodejitsu/forever-monitor)

这可能是您的完美工具。我从来没有以*编程*方式使用它，只是 cli。但这是我要研究的。

# performance - 是返回值还是直接将它们写入给定的输出参数更好？

> ID：11876282
> 
> 赞同：1
> 
> 时间：2012-08-09T03:16:19.387
> 
> 标签：performance, function, memory, stack, maintainability

[我在 dablooms 上](https://github.com/bitly/dablooms/pull/19 "一些性能调整")阅读这个拉取请求

> 最重要的是，Murmur 不会返回堆栈/寄存器上的哈希值，而是将其直接写入提供的缓冲区。这使得用大量随机数据填充bloom-> hashes缓冲区并逐步执行模块化变得非常容易。

```
for (i = 0; i < bloom->nsalts; i++, hashes += 4) {
    MurmurHash3_x64_128(key, key_len, bloom->salts[i], hashes);
    hashes[0] = hashes[0] % bloom->counts_per_func;
    hashes[1] = hashes[1] % bloom->counts_per_func;
    hashes[2] = hashes[2] % bloom->counts_per_func;
    hashes[3] = hashes[3] % bloom->counts_per_func;
} 
```

我最近注意到一些库（至少在 C++ 中，我的知识非常有限，因为我是个新手）似乎不返回值，而是期望他们将在其上写入结果的输出参数。我更习惯看到这样的事情：

```
Matrix leftOperand = { /* some values */ };
Matrix rightOperand = { /* some values */ };
Matrix result;
result = multiplyMatrices( leftOperand, rightOperand ); 
```

`result`的`return`值在哪里`multiplyMatrices`。但是在我最近的项目中学习使用 OpenGL、GLEW 和 freeglut，我经常看到这样的调用：

```
Matrix leftOperand = { /* some values */ };
Matrix rightOperand = { /* some values */ };
Matrix result;
multiplyMatrices( leftOperand, rightOperand, result ); 
```

我理解它的作用，但我觉得这个符号很奇怪。然而，我越来越频繁地看到这种情况，当我看到上面的 pull request 的作者“称赞”它时，我认为可能有一个很好的理由这样做。

因此，在我寻求编写更少糟糕和难闻的代码的过程中，我想知道这是否是一种好的做法。我认为这一定是出于性能原因，但我不清楚从堆栈中推送/弹出是否比直接写入给定内存地址慢。

我正在寻找一些关于使用一种方式而不是另一种方式的原因的指导方针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:29:45.917

让我们在 C 中举一个简单的例子：

```
struct X
{
    /* a lot of data */
};

struct X func1(/*args*/)
{
    struct X result;
    /* fill in result */
    return result;
}

int func2(/*args*/, struct X *result)
{
    if (result == NULL)
        return -1;
    /* fill in *result */
    return 0;
}

/* in the code */
struct X x;
x = func1(/* args */);
func2(/* args */, &x); 
```

`func1`, 在自己的堆栈帧上填充必要的数据，然后该行将`x = func1(...)`其复制到`x`. `func2`获取指向的指针`x`作为其参数并填充它。

正如您在此处看到的，使用 有两个缺点`func1`：

1.  您不能报告错误，除非设置`x`为无效状态（可能并非所有结构都存在，例如矩阵）
2.  您必须复制可能大量的数据。

在某些情况下，可能根本不可能出错，因此第 1 点可能不一定成立。但是，如果您的结构很大，第 2 点是性能杀手。

现在想象在 C++ 中同样的事情，除了`struct X`is now `class X`，里面有一个复制构造函数和一堆`std::string`等`std::list`。using 的性能提升`func2`变得更大，因为`X`现在复制类的对象需要调用多个复制构造函数，深度复制所有内容，然后破坏内部的本地对象`func1`。（对于 C++11，这将不那么糟糕（与 C 中一样糟糕），因为可以移动对象）。

人们想要使用的唯一原因`func1`是可读性和易于编写。例如，比较这个：

```
string fix(const string &s);
void print(const string &s);

string str;
print(fix(str)); 
```

与这个：

```
void fix(const string &s, string &res);
void print(const string &s);

string str;
string fixed;
fix(str, fixed);
print(fixed); 
```

第一个显然更容易理解，而第二个更有效。请注意，在像 C 这样的语言中，第一个代码的等效项可能会导致内存泄漏，因此甚至不可能。

所以问题归结为你更关心这两者中的哪一个。如果您与 Java 人员交谈，他们可能会告诉您“性能差异是如此之小，您甚至都不会注意到它”。*如果您与 C 人员交谈，他们可能会告诉您“在某些*架构上性能差异可能很小，但这并不意味着您可以四处做不必要的事情”。

在您提到的帖子中，程序员正在尝试提高库的性能。他正在改进的功能是“填充缓冲区”。这要求将缓冲区作为参数传递：

*   您不需要复制缓冲区的内容
*   您可以提供自己的缓冲区，无论是静态分配还是动态分配。
    *   该函数不需要每次都分配内存
    *   您可以重用缓冲区而无需重新分配内存
    *   如果是静态分配的，则不需要释放缓冲区
*   您可以部分填充更大的缓冲区

# php - 使用ajax在同一页面中传递值

> ID：11876283
> 
> 赞同：0
> 
> 时间：2012-08-09T03:16:24.010
> 
> 标签：php, javascript

我是ajax的新手。我的情况是，我想在同一页面上传递值，所以如果我单击选中的值传递到上部

![在此处输入图像描述](../Images/9c94e590f97374d19762fcbf4b5b702e.png)

在我这样的纯php代码上

```
<?php include('connect.php');

$query="SELECT barang_id, nama, stok, AuUser,AuDate FROM barang";
$result=mysql_query($query);

$num=mysql_numrows($result);

mysql_close();
?>
<table border="1" cellspacing="2" cellpadding="2" >
<tr>
<td><font face="Arial, Helvetica, sans-serif">No.</font></td>
<td><font face="Arial, Helvetica, sans-serif">Barang ID</font></td>
<td><font face="Arial, Helvetica, sans-serif">Nama</font></td>
<td><font face="Arial, Helvetica, sans-serif">Stock</font></td>
<td><font face="Arial, Helvetica, sans-serif">AuUser</font></td>
<td><font face="Arial, Helvetica, sans-serif">AuDate</font></td>
<td><font face="Arial, Helvetica, sans-serif">Select</font></td>
</tr>

<?php
$i=0;$j=1;
while ($i < $num) {

$f1 = mysql_result($result,$i,"barang_id");
$f2 = mysql_result($result,$i,"nama");
$f3 = mysql_result($result,$i,"stok");
$f4 = mysql_result($result,$i,"auuser");
$f5 = mysql_result($result,$i,"audate");

?>

<tr>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $j; ?></font></td>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $f1; ?></font></td>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $f2; ?></font></td>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $f3; ?></font></td>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $f4; ?></font></td>
<td><font face="Arial, Helvetica, sans-serif"><?php echo $f5; ?></font></td> 
<td><a href="data.php?id=<?php echo $f1;?>&nama=<?php echo $f2;?>&stok=<?php echo $f3;?>&auuser=<?php echo $f4;?>&audate=<?php echo $f5;?>">Selected</a></td>
</tr>

<?php
$i++; $j = $j + 1;
}?>
<?php

$id1 = ($_GET['id']) ;
$nama1 = ($_GET['nama']) ;
$stok1 = ($_GET['stok']);
$auuser1 = ($_GET['auuser']);
$audate1 = ($_GET['audate']) ;

?>
<div class="tengah">
    <form action="doupload.php" method="post">
        <div class="kiri">ID </div>
        <div class="kanan"><input type="text" name="id" id="id" value="<?php echo $id1;?>"/> </div>
        <div class="kiri">nama </div> 
        <div class="kanan"><input type="text" name="nama" id="nama" value="<?php echo $nama1;?>"/></div>
        <div class="kiri"> stock </div>
        <div class="kanan"><input type="text" name="stok" id="stok" value="<?php echo $stok1;?><?php echo $id1;?>"/></div>
        <div class="kiri">auuser </div>
        <div class="kanan"><input type="text" name="user" id="user" value="<?php echo $auuser1;?>"/></div>
        <div class="kiri">audate </div>
        <div class="kanan"><input type="text" name="date" id="date" value="<?php echo $audate1;?>"/></div>

        <div class="kiri"><input name="Submit" type="submit" value="submit" /></div>
        <div class="kanan"><input name="Reset" type="reset" value="cancel" /></div>
    </form>
    <div id="insert_response"></div>
</div> 
```

这是我想使用ajax的问题​​，所以当我单击表上的选择时。没有加载就在顶部传递的值。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T03:55:54.957

您不需要使用 AJAX，因为您不必从外部文件加载数据。您可以只使用一些 javascript 来填充表单。有比下面的代码更有效的方法，但这里有一个快速而肮脏的答案......

哦，我在 jquery 中编写了 javascript，因为它使事情变得更容易。但同样可以在纯 javascript 中完成。

对于您的 HTML/PHP 代码，将 a 标签更改为使用 onclick 而不是 href，并调用 javascript 函数：

```
<a onclick="updateForm('<?php echo '$f1'?>','<?php echo '$f2'?>','<?php echo '$f3'?>','<?php echo '$f4'?>','<?php echo '$f5'?>');">Selected</a> 
```

然后，在同一页面上创建一个 javascript 函数，如下所示：

```
<script>

function updateForm(id, nama, stok, user,date){
    $('#id').val(id);
    $('#nama').val(name);
    $('#stok').val(stok);
    $('#user').val(user);
    $('#date').val(date);
}

</script> 
```

如果你不想使用 jquery，我认为 $('#id').val(id) 的等价物是 document.getElementById('id').value = id;

# c++ - c++ 最快的方法来读取文本文件的最后一行？

> ID：11876290
> 
> 赞同：12
> 
> 时间：2012-08-09T03:16:50.630
> 
> 标签：c++, iostream, seek

我只想阅读文本文件的最后一行（我在 UNIX 上，可以使用 Boost）。我知道的所有方法都需要扫描整个文件以获取最后一行，这根本没有效率。有没有一种有效的方法来只得到最后一行？

此外，我需要它足够强大，即使有问题的文本文件不断被另一个进程附加到它，它也能正常工作。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-09T05:53:28.937

使用 seekg 跳转到文件末尾，然后回读直到找到第一个换行符。下面是一些使用 MSVC 的示例代码。

```
#include <iostream>
#include <fstream>
#include <sstream>

using namespace std;

int main()
{
    string filename = "test.txt";
    ifstream fin;
    fin.open(filename);
    if(fin.is_open()) {
        fin.seekg(-1,ios_base::end);                // go to one spot before the EOF

        bool keepLooping = true;
        while(keepLooping) {
            char ch;
            fin.get(ch);                            // Get current byte's data

            if((int)fin.tellg() <= 1) {             // If the data was at or before the 0th byte
                fin.seekg(0);                       // The first line is the last line
                keepLooping = false;                // So stop there
            }
            else if(ch == '\n') {                   // If the data was a newline
                keepLooping = false;                // Stop at the current position.
            }
            else {                                  // If the data was neither a newline nor at the 0 byte
                fin.seekg(-2,ios_base::cur);        // Move to the front of that data, then to the front of the data before it
            }
        }

        string lastLine;            
        getline(fin,lastLine);                      // Read the current line
        cout << "Result: " << lastLine << '\n';     // Display it

        fin.close();
    }

    return 0;
} 
```

下面是一个测试文件。它成功处理文本文件中的空、单行和多行数据。

```
This is the first line.
Some stuff.
Some stuff.
Some stuff.
This is the last line. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T03:20:30.943

跳到最后，然后开始向后阅读块，直到找到任何一条线的标准。如果最后一个块没有以一行“结束”，您可能还需要尝试向前扫描（假设主动附加到文件中的行非常长）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-10-15T00:52:21.060

虽然 derpface 的答案绝对正确，但它经常返回意想不到的结果。这样做的原因是，至少在我的操作系统（Mac OSX 10.9.5）上，许多文本编辑器使用“结束行”字符终止他们的文件。

例如，当我打开 vim 时，只输入单个字符 'a'（不返回），然后保存，文件现在将包含（十六进制）：

```
61 0A 
```

其中 61 是字母“a”，0A 是行尾字符。

这意味着，derpface 的代码将对此类文本编辑器创建的所有文件返回一个空字符串。

虽然我当然可以想象以“结束行”结尾的文件应该返回空字符串的情况，但我认为在处理常规文本文件时忽略最后一个“结束行”字符会更合适；如果文件以“结束行”字符终止，我们将正确地忽略它，如果文件没有以“结束行”字符终止，我们不需要检查它。

我忽略输入文件的最后一个字符的代码是：

```
#include <iostream>
#include <string>
#include <fstream>
#include <iomanip>

int main() {
    std::string result = "";
    std::ifstream fin("test.txt");

    if(fin.is_open()) {
        fin.seekg(0,std::ios_base::end);      //Start at end of file
        char ch = ' ';                        //Init ch not equal to '\n'
        while(ch != '\n'){
            fin.seekg(-2,std::ios_base::cur); //Two steps back, this means we
                                              //will NOT check the last character
            if((int)fin.tellg() <= 0){        //If passed the start of the file,
                fin.seekg(0);                 //this is the start of the line
                break;
            }
            fin.get(ch);                      //Check the next character
        }

        std::getline(fin,result);
        fin.close();

        std::cout << "final line length: " << result.size() <<std::endl;
        std::cout << "final line character codes: ";
        for(size_t i =0; i<result.size(); i++){
            std::cout << std::hex << (int)result[i] << " ";
        }
        std::cout << std::endl;
        std::cout << "final line: " << result <<std::endl;
    }

    return 0;
} 
```

这将输出：

```
final line length: 1
final line character codes: 61 
final line: a 
```

在单个“a”文件上。

编辑：`if((int)fin.tellg() <= 0){` 如果文件太大（> 2GB），该行实际上会导致问题，因为 tellg 不仅仅返回文件开头的字符数（[tellg() 函数给出错误的文件大小？](https://stackoverflow.com/questions/22984956/tellg-function-give-wrong-size-of-file)）。最好分别测试文件的开头`fin.tellg()==tellgValueForStartOfFile`和错误`fin.tellg()==-1`。可能是 0，但更好的`tellgValueForStartOfFile`确保方法可能是：

```
fin.seekg (0, is.beg);
tellgValueForStartOfFile = fin.tellg(); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-05-30T09:23:01.840

最初，它旨在读取最后一个 syslog 条目。鉴于 EOF 之前的最后一个字符是`'\n'`我们寻找下一个出现的`'\n'`字符，然后我们将该行存储到一个字符串中。

```
#include <fstream>
#include <iostream>

int main()
{
  const std::string filename = "test.txt";
  std::ifstream fs;
  fs.open(filename.c_str(), std::fstream::in);
  if(fs.is_open())
  {
    //Got to the last character before EOF
    fs.seekg(-1, std::ios_base::end);
    if(fs.peek() == '\n')
    {
      //Start searching for \n occurrences
      fs.seekg(-1, std::ios_base::cur);
      int i = fs.tellg();
      for(i;i > 0; i--)
      {
        if(fs.peek() == '\n')
        {
          //Found
          fs.get();
          break;
        }
        //Move one character back
        fs.seekg(i, std::ios_base::beg);
      }
    }
    std::string lastline;
    getline(fs, lastline);
    std::cout << lastline << std::endl;
  }
  else
  {
    std::cout << "Could not find end line character" << std::endl;
  }
  return 0;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-09T03:33:02.470

您可以使用 seekg() 跳转到文件末尾，并向后读取，伪代码如下：

```
ifstream fs
fs.seekg(ios_base::end)
bytecount = fs.tellg()
index = 1
while true
    fs.seekg(bytecount - step * index, ios_base::beg)
    fs.read(buf, step)
    if endlinecharacter in buf
        get endlinecharacter's index, said ei
        fs.seekg(bytecount - step*index + ei)
        fs.read(lastline, step*index - ei)
        break
    ++index 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-10T20:01:40.323

我也在为这个问题苦苦挣扎，因为我运行了 uberwulu 的代码并且也得到了空白行。这是我发现的。我以以下 .csv 文件为例：

```
date       test1  test2
20140908       1      2
20140908      11     22
20140908     111    235 
```

要理解代码中的命令，请注意以下位置及其对应的字符。(Loc, char) : ... (63,'3') , (64,'5') , (65,-) , (66,'\n'), (EOF,-)。

```
#include<iostream>
#include<string>
#include<fstream>

using namespace std;

int main()
{
    std::string line;
    std::ifstream infile; 
    std::string filename = "C:/projects/MyC++Practice/Test/testInput.csv";
    infile.open(filename);

    if(infile.is_open())
    {
        char ch;
        infile.seekg(-1, std::ios::end);        // move to location 65 
        infile.get(ch);                         // get next char at loc 66
        if (ch == '\n')
        {
            infile.seekg(-2, std::ios::cur);    // move to loc 64 for get() to read loc 65 
            infile.seekg(-1, std::ios::cur);    // move to loc 63 to avoid reading loc 65
            infile.get(ch);                     // get the char at loc 64 ('5')
            while(ch != '\n')                   // read each char backward till the next '\n'
            {
                infile.seekg(-2, std::ios::cur);    
                infile.get(ch);
            }
            string lastLine;
            std::getline(infile,lastLine);
            cout << "The last line : " << lastLine << '\n';     
        }
        else
            throw std::exception("check .csv file format");
    }
    std::cin.get();
    return 0;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-07T16:50:09.933

我采用了亚历山德罗斯的解决方案并对其进行了一些修饰

```
bool moveToStartOfLine(std::ifstream& fs)
{
    fs.seekg(-1, std::ios_base::cur);
    for(long i = fs.tellg(); i > 0; i--)
    {
        if(fs.peek() == '\n')
        {
            fs.get();
            return true;
        }
        fs.seekg(i, std::ios_base::beg);
    }
    return false;
}

std::string getLastLineInFile(std::ifstream& fs)
{
    // Go to the last character before EOF
    fs.seekg(-1, std::ios_base::end);
    if (!moveToStartOfLine(fs))
        return "";

    std::string lastline = "";
    getline(fs, lastline);
    return lastline;
}

int main()
{
    const std::string filename = "test.txt";
    std::ifstream fs;
    fs.open(filename.c_str(), std::fstream::in);
    if(!fs.is_open())
    {
        std::cout << "Could not open file" << std::endl;
        return -1;
    }

    std::cout << getLastLineInFile(fs) << std::endl;

    return 0;
} 
```

# r - 为什么 R 中的 optimx 没有为这个简单的非参数似然最大化给出正确的解决方案？

> ID：11876291
> 
> 赞同：9
> 
> 时间：2012-08-09T03:16:53.507
> 
> 标签：r, optimization, maximization

### 是 optimx() 提供了不正确的解决方案还是我错过了一个简单的点？谢谢！

我试图最大化一个非常简单的可能性。这是一个非参数似然，因为 F 的分布不是参数化的。相反，对于每个观察到`xi`的 ，`f(xi)=pi`因此`log(Likelihood)=Sum(log(f(xi)))=Sum(log(pi))`。

我试图最大化的函数是：`sum(log(pi))+lamda(sum(pi-1))` 哪里`sum(pi)=1`（即这是一个可以使用拉格朗日乘数解决的约束最大化问题）。

这个问题的答案是数据点的数量`pi=1/n`在哪里。`n`但是，optimx 似乎没有给出这个解决方案。有没有人有任何想法。如果`n=2`，我最大化的功能是`log(p1)+log(p2)+lamda(p1+p2-1)`。

这是我的代码和 R 的输出：

```
n=2
log.like=function(p)
{
  lamda=p[n+1]
  ll=0
  for(i in 1:n){
    temp = log(p[i])+lamda*p[i]-lamda/(n)
    ll=ll+temp
  }
  return(-ll)
}

mle = optimx(c(0.48,.52,-1.5),
             log.like,
             lower=c(rep(0.1,2),-3),
             upper=c(rep(.9,2),-1),
             method = "L-BFGS-B")

> mle
             par  fvalues   method fns grs itns conv  KKT1 KKT2 xtimes
1 0.9, 0.9, -1.0 1.010721 L-BFGS-B   8   8 NULL    0 FALSE   NA      0 
```

方程的解`n=2`是`p1=p2=1/2`和`lamda=-2`。但是，我在使用 optimx 时没有得到这个。任何想法？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-09T05:12:25.767

没有错`optimx`。退后一步，看看你想要最大化的函数：`log(p1) + log(p2) + lamda*(p1+p2-1)`. 很直观，最佳解决方案是使所有变量尽可能大，不是吗？看到`optimx`正确地返回了您指定的上限。

那么你的方法有什么问题呢？使用拉格朗日乘数时，临界点是上述函数的鞍点，而不是像`optimx`可以帮助您找到的局部最小值。所以你需要修改你的问题，使这些鞍点成为局部最小值。这可以通过优化梯度范数来完成，这很容易针对您的问题进行分析计算。这里有一个很好的例子（带图片）：

[http://en.wikipedia.org/wiki/Lagrange_multiplier#Example:_numerical_optimization](http://en.wikipedia.org/wiki/Lagrange_multiplier#Example:_numerical_optimization)。

对于您的问题：

```
grad.norm <- function(x) {
  lambda <- tail(x, 1)
  p <- head(x, -1)
  h2 <- sum((1/p + lambda)^2) + (sum(p) - 1)^2
}

optimx(c(.48, .52, -1.5),
       grad.norm,
       lower = c(rep(.1, 2), -3),
       upper = c(rep(.9, 2), -1),
       method = "L-BFGS-B")

#                               par      fvalues   method  fns grs [...]
# 1 0.5000161, 0.5000161, -1.9999356 1.038786e-09 L-BFGS-B  13  13 [...] 
```

**跟进**：如果您不想或不能自己计算梯度，可以让 R 计算一个数值近似值，例如：

```
log.like <- function(x) {
  lambda <- tail(x, 1)
  p <- head(x, -1)
  return(sum(log(p)) + lambda*(sum(p) - 1))
}

grad.norm <- function(x) {
  require(numDeriv)
  return(sum(grad(log.like, x)^2))
}

optimx(c(.48, .52, -1.5),
       grad.norm,
       lower = c(rep(.1, 2), -3),
       upper = c(rep(.9, 2), -1),
       method = "L-BFGS-B")

#                                par      fvalues   method fns grs [...]
# 1 0.5000161, 0.5000161, -1.9999356 1.038784e-09 L-BFGS-B  13  13 [...] 
```

# java - 如何在 Eclipse 中为开发模式设置 MySQL + Tomcat + GWT

> ID：11876296
> 
> 赞同：0
> 
> 时间：2012-08-09T03:17:30.387
> 
> 标签：java, mysql, eclipse, gwt, tomcat

有什么方法可以将 Eclipse（或 GWT？）配置为在 Tomcat 上运行，而不是在内置 Jetty 服务器上运行。

最近几天我一直在玩 GWT，并完成了启动项目。现在我想转向更令人兴奋的涉及数据库、身份验证和多个模块的内容。

所以，问题是我如何配置（或集成？）Eclipse 与 GWT、MySQL 和 Tomcat 服务器，以便我可以在开发模式下在 Tomcat 上运行应用程序。

我遇到了几篇文章，但不幸的是它们对我来说不够清楚。

附加信息：

1.  赢 7 32 位
2.  日食太阳神
3.  JDK 1.6 JRE 6
4.  雄猫 6
5.  GWT 2.4（带有用于 Eclipse 的谷歌插件）
6.  MySQL 5.5.20（作为 WampServer 的一部分与 PHP 和 Apache 一起安装）
7.  Java、Eclipse、Tomcat 和 GWT 的新手 :)

请指导我如何设置我的开发环境。此外，如果您能指导我学习一些基本教程来演示 GWT 中的数据库通信，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T04:29:45.900

尝试测试[这篇](http://boldinventions.com/index.php?option=com_content&view=article&id=95%3ainstalling-apache-and-tomcat-and-mysql-on-window-7&catid=34%3acategory-electronics-articles&Itemid=53&limitstart=5)文章。这可能是你的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T06:14:45.790

首先，您应该阅读有关 jdbc 从 eclipse 项目中连接 mysql 的信息，您可以从中轻松连接到 mysql（类似于 PHP 中的 mysql_connect）

# tfs - 敏捷中的剩余工作报告

> ID：11876297
> 
> 赞同：0
> 
> 时间：2012-08-09T03:17:42.723
> 
> 标签：tfs

我是敏捷新手。我很想知道如何确定剩余的工作时间，是由贡献者决定还是由经理决定，还是通过 check_in auto 计算？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:44:27.613

我相信这来自任务工作项中的剩余工作量字段（假设您使用的是 MSF 敏捷过程模板）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T21:24:56.340

剩下的工作只是您需要手动更新的字段。没有为您完成自动计算。通常，拥有该任务的人正在更新剩余的工作域。许多团队进行每日站会，并在每日站会中更新每个人的剩余工作。

# javascript - jQuery Blueimp fileupload 插件删除文件而不需要先检查复选框？

> ID：11876299
> 
> 赞同：1
> 
> 时间：2012-08-09T03:18:19.277
> 
> 标签：javascript, jquery, file-upload, onclick, onchange

我不知道如何修改[jQuery Blueimp 文件上传插件](http://blueimp.github.com/jQuery-File-Upload/) [jquery.fileupload-ui.js](https://github.com/blueimp/jQuery-File-Upload/blob/master/js/jquery.fileupload-ui.js)以便删除按钮只删除文件而无需先选中复选框。

有人可以帮我弄清楚如何做到这一点吗？

这是 jquery.fileupload-ui.js 代码，它似乎需要某种修改：

```
 fileUploadButtonBar.find('.delete')
            .bind('click.' + ns, function (e) {
                e.preventDefault();
                filesList.find('.delete input:checked')
                    .siblings('button').click();
                fileUploadButtonBar.find('.toggle')
                    .prop('checked', false);
            });
        fileUploadButtonBar.find('.toggle')
            .bind('change.' + ns, function (e) {
                filesList.find('.delete input').prop(
                    'checked',
                    $(this).is(':checked')
                );
            }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-11T20:25:33.267

我遇到了同样的问题，解决方案非常简单。

1.您必须从 html 中删除所有输入复选框。
2.为删除所有按钮添加一个类（我使用了deleteAll）。
3.每个删除按钮都有一个 class="delete" 所以..
4.当单击顶部的删除按钮时，为每一行激活该按钮。

```
//delete all photos when click top Delete all button
$('.deleteAll').click(function(){
  $('.delete').each(function(){
    $(this).click();
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T21:54:26.953

好的，我解决了我自己的问题。`checked="checked"`解决方案是在渲染这些元素之前在模板和 HTML 中设置复选框属性。尝试使用 Javascript 单击按钮检查复选框对我不起作用，可能与调用堆栈有关。

无论如何，这是代码。而`template-download`不是这个：

`<input type="checkbox" name="delete" value="1">`

做这个：

```
<input type="checkbox" name="delete" value="1" checked="checked"> 
```

和中删除按钮旁边的复选框`fileuploadBar`，而不是这个：

```
<input type="checkbox" class="toggle"> 
```

做这个：

```
<input type="checkbox" class="toggle" checked="checked"> 
```

如果您这样做，则单击任何删除按钮将删除文件（即，一步而不是两步）。

# c# - 在 Metro 应用程序中将图像绘制到画布上

> ID：11876302
> 
> 赞同：0
> 
> 时间：2012-08-09T03:19:05.207
> 
> 标签：c#, xaml, windows-8, microsoft-metro, imagebrush

我一直在尝试在我的 Metro 应用程序的画布上绘制图像，但到目前为止还没有出现。这是我的代码：

```
 Rectangle blueRectangle = new Rectangle();
        blueRectangle.Height = 100;
        blueRectangle.Width = 200;
        ImageBrush imgBrush = new ImageBrush();
        imgBrush.ImageSource = new Windows.UI.Xaml.Media.Imaging.BitmapImage(new Uri("C:\\Users\\Public\\Pictures\\dock.jpg"));
        blueRectangle.Fill = imgBrush;
        paintCanvas.Children.Add(blueRectangle); 
```

当我使用这条线时

```
 blueRectangle.Fill = new SolidColorBrush(Colors.Blue); 
```

而不是使用 ImageBrush 的那个，我得到了一个我想要的蓝色矩形，所以我想我一定是 ImageBrush 做错了什么。

当我学习如何绘制它们时，我计划将图像用作游戏中的精灵，因此我必须能够使用 c# 来操作它们。

谢谢你的帮助！

编辑：我已更改代码以访问漫游应用程序数据，但我仍然收到未找到文件的异常。（文件在正确的位置）

```
 ApplicationData appData = ApplicationData.Current;

        try
        {
            StorageFile sourceFile = await StorageFile.GetFileFromApplicationUriAsync(new Uri("ms-appx:///Assets/dock.jpg"));
            await sourceFile.CopyAsync(appData.RoamingFolder);
        }
        catch (Exception ex)
        {
            // If images have already been copied the CopyAsync() methods aboev will fail.
            // Ignore those errors.
            System.Diagnostics.Debug.WriteLine(ex.ToString());
        }

        Rectangle blueRectangle = new Rectangle();
        blueRectangle.Height = 100;
        blueRectangle.Width = 200;

        // Create an ImageBrush
        ImageBrush imgBrush = new ImageBrush();

        imgBrush.ImageSource = new BitmapImage(new Uri("ms-appdata:///roaming/dock.png"));

        // Fill rectangle with an ImageBrush
        blueRectangle.Fill = imgBrush;
        //blueRectangle.Fill = new SolidColorBrush(Colors.Blue);
        paintCanvas.Children.Add(blueRectangle); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T18:37:47.273

我最终想通了。这就是我现在的代码。

```
StorageFile file;
StorageFolder InstallationFolder = Windows.ApplicationModel.Package.Current.InstalledLocation;      

string filePath = @"Assets\dock.jpg";
file = await InstallationFolder.GetFileAsync(filePath);
IRandomAccessStream dockpic = await file.OpenAsync(0);
BitmapImage dockimage = new BitmapImage();
dockimage.SetSource(dockpic);

Rectangle blueRectangle = new Rectangle();
blueRectangle.Height = 100;
blueRectangle.Width = 200;
// Create an ImageBrush
ImageBrush imgBrush = new ImageBrush();
imgBrush.ImageSource = dockimage;

// Fill rectangle with an ImageBrush
blueRectangle.Fill = imgBrush;
paintCanvas.Children.Add(blueRectangle); 
```

我最终使用了 StorageFolder 并使用 Stream 而不是 uri 创建了 BitmapImage。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T04:09:16.230

您不能以这种方式从 Metro 风格应用程序访问本地数据。有关访问本地数据的方法，请参阅这篇关于[访问本地数据](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/Hh758319%28v=win.10%29.aspx)的文章和此[应用程序数据示例](http://code.msdn.microsoft.com/windowsapps/ApplicationData-sample-fb043eb2)。

# google-app-engine - GAE ndb 查询不包括实体

> ID：11876304
> 
> 赞同：1
> 
> 时间：2012-08-09T03:19:22.727
> 
> 标签：google-app-engine, google-cloud-datastore

我想编写一个 ndb 查询，它从结果集中排除由其 id 标识的特定实体。

我尝试了以下方法：

```
result = Entity.query(Entity.key.id() != 'entity-id', *some other condition*).fetch() 
```

Entity.key.id() != 'entity-id' 位会引发错误。什么是正确的语法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T05:02:18.723

我不知道是否可以在键上查询排除，您有一个简单的解决方法可以从最终结果中删除结果。

但如果它有效，语法应该是这样的：

```
result = Entity.query(Entity.key != ndb.Key(Entity, id), *some other condition*).fetch() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T17:42:37.233

可以使用 db API 根据其 id 排除特定实体（我假设 ndb API 有一些小的改动）。以下语法适用于我使用 db API。`id_to_retrieve`它使用排除变量中的 id 的结果构建查询：

```
id_to_retrieve = 123456
query = Entity.all() 
query.filter('__key__ !=',  db.Key.from_path('Entity', id_to_retrieve))
query.fetch(None) 
```

# php - 通过 PHP 从 MYSQL 创建图像下载链接

> ID：11876308
> 
> 赞同：0
> 
> 时间：2012-08-09T03:19:56.737
> 
> 标签：php, mysql, image, file-upload, upload

我在下面有一个查询脚本，它为特定用户的发票提取一行数据。我正在尝试让脚本能够具有指向上传文件的链接，以便它可以下载/显示（**第 17 行**，**发票上传**或**sal.npc_image_upload**）。

文件名看起来不错，但我不确定如何实际为它创建链接？

```
 <?php
        require_once ('/database.php'); // Connect to the db.

        // Retrieve the user's and inovoice information.
        $query = "SELECT us.sp_user_id, us.sp_firstname, us.sp_surname, us.sp_amb_club_no, sal.npc_item_id, sal.sp_user_id, sal.npc_battery_n_code , sal.npc_battery_other_code , sal.npc_ft_part_no, sal.npc_quantity, sal.npc_customer_name, sal.npc_registration_no , sal.npc_suo_no, sal.npc_amb_club_no, sal.npc_repair_order, sal.npc_invoice_no, sal.npc_entry_userdate, sal.npc_image_upload, sal.npc_usertype, sal.npc_points, sal.npc_bonus_points , sal.npc_active  
                 FROM sp_user AS us, npc_sales_list AS sal
                 WHERE sal.npc_item_id=$id
                 AND us.sp_user_id = sal.sp_user_id";

        $result = mysql_query ($query) or die(mysql_error());
        if (mysql_num_rows($result)) { // Valid user ID, show the form.

            // Get the user's information.
            $row = mysql_fetch_array ($result, MYSQL_NUM);
            echo '<h1>Invoice Number: ' . $row[15] . ' </h1><br />
            <table width="450" border="0" cellspacing="1" cellpadding="7" style=" padding:0px 0px 0px 7px;">
            <tr bgcolor="#eaeced">
            <td><div align="right"><strong>N-Club Part Number:</strong></div></td>
            <td width="200">' . $row[6] . '</td>
            </tr>
            <tr bgcolor="#d4d9df">
            <td><div align="right"><strong>Other Part Number:</strong></div></td>
            <td>' . $row[7] . '</td>
            </tr>
            <tr bgcolor="#eaeced">
            <td><div align="right"><strong>Fuel Treatment:</strong></div></td>
            <td>' . $row[8] . '</td>
            </tr>
            <tr bgcolor="#d4d9df">
            <td><div align="right"><strong>Quantity:</strong></div></td>
            <td><strong>' . $row[9] . '</strong></td>
            </tr>       
            <tr bgcolor="#eaeced">
            <td><div align="right"><strong><strong>Customer Name</strong></div></td>
            <td>' . $row[10] . '</td>
            </tr>
            <tr bgcolor="#d4d9df">
            <td><div align="right"><strong><strong>Registration Number:</strong></div></td>
            <td>' . $row[11] . '</td>
            </tr>
            <tr bgcolor="#eaeced">
            <td><div align="right"><strong>SUO Number:</strong></div></td>
            <td>' . $row[12] . '</td>
            </tr>
            <tr bgcolor="#d4d9df">
            <td><div align="right"><strong>A-Club No.</strong></div></td>
            <td>' . $row[13] . '</td>
            </tr>
            <tr bgcolor="#eaeced">
            <td><div align="right"><strong>Repair Order</strong></div></td>
            <td>' . $row[14] . '</td>
            </tr>
            <tr bgcolor="#d4d9df">
            <td><div align="right"><strong>Invoice Date</strong></div></td>
            <td>' . $row[16] . '</td>
            </tr>
            <tr bgcolor="#eaeced">
            <td><div align="right"><strong>Invoice Upload</strong></div></td>
            <td>' . $row[17] . '</td>
            </tr>
            </table>
            <br><br>
            <p><a href="viewsale.php"> << Back to Logged Sales</a></p>
            ';

        } else { // Not a valid user ID.
            echo '<h1 id="mainhead">Page Error</h1>
            <p class="error">This page has been accessed in error.</p><p><br /><br /></p>';   
        }

        mysql_close(); // Close the database connection.
        ?> 
```

# c# - 通过 HTTP 使用 ASP.NET (C#) 发送 SMS

> ID：11876313
> 
> 赞同：-2
> 
> 时间：2012-08-09T03:20:22.003
> 
> 标签：c#, asp.net

您是否尝试过 OZEKI NG SMS 网关？现在我正在测试如何通过 OZEKI NG SMS Gateway 免费试用服务通过 HTTP 使用 ASP.NET (C#) 发送 SMS，但出现错误，我不知道如何配置它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T04:10:16.397

好的，在所有这些评论之后，让我们尝试解释发生了什么：**它正在工作**。您正在发送一个 HTTP 请求，并且您会收到一个说明它的响应。

看看这里（你在评论中发布了它！）：

```
<Responses>
    <Response0>
        <Action>sendMessage</Action>
        <Data>
            <AcceptReport>
                <StatusCode>0</StatusCode>
                <StatusText>Message accepted for delivery</StatusText>
                <MessageID>89c8011c-e291-44c3-ac72-cd35c76cb29d</MessageID>
                <Recipient>+85568922903</Recipient>
            </AcceptReport>
        </Data>
    </Response0>
</Responses> 
```

您只需要处理这些 XML 数据。看看这里，有很多关于它的问题。

# haskell - 在实例上下文中需要泛型实例（对于更高种类的类型构造函数）

> ID：11876316
> 
> 赞同：4
> 
> 时间：2012-08-09T03:20:32.700
> 
> 标签：haskell, typeclass, higher-rank-types

我正在尝试为归纳数据类型（描述具有数据类型和模式匹配的 lambda 演算的一个版本）创建一个灵活的表示。这里的灵活性应该意味着很容易在节点上添加额外的数据（自由comonad-style）或进行替换（free monad-style）。所以这就是我所拥有的：

```
type Tie f φ = φ (f φ)

type Id = String
type Var = Id
type Con = Id

data Pat φ = PVar Var
           | PCon Con [Tie Pat φ]
           | PWildcard

data Expr φ = EVar Var
            | ECon Con
            | EApp (Tie Expr φ)
            | ELam (Tie Pat φ) (Tie Expr φ) 
```

当我想派生`Show`实例时，麻烦就来了。当然，我可以这样做：

```
{-# LANGUAGE FlexibleContexts, UndecidableInstances #-}
{-# LANGUAGE StandaloneDeriving #-}

deriving instance (Show (φ (Pat φ))) => Show (Pat φ)
deriving instance (Show (φ (Expr φ)), Show (φ (Pat φ))) => Show (Expr φ) 
```

但是当归纳结构变得更复杂时，手动写出上下文变得笨拙。

理想情况下，我希望能够写出类似的东西

```
{-# LANGUAGE RankNTypes #-}
deriving instance (forall a. Show (φ a)) => Show (Expr φ) 
```

表示函子 φ 在某种意义上应该对 Show 实例是“透明的”。

有没有办法做这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:57:52.593

一个可能的解决方案将涉及

```
class Show1 f where
  showsPrec1 :: Show a => Int -> f a -> ShowS 
```

这个类型类在`prelude-extras`. 不幸的是，Haskell 的派生机制没有利用它，因此无法使用。一个可能的替代可能是使用新的`GHC.Generics`和`DefaultSignatures`创建，虽然不是“派生的”，至少是微不足道的实例。

```
instance (Show1 φ) => Show (Pat φ)
instance (Show1 φ) => Show (Expr φ) 
```

现在是困难的部分：实际使用`GHC.Generics`. 可以使用的是

```
instance (Show1 f, Show a) => Show (f a) where showsPrec = showsPrec1 
```

但是，这具有要求`OverlappingInstances`（除了其他问题之外）的极端缺点。一种可能的解决方案是定义一个名为 shadows 的类`Show`。

```
class Show' a where showsPrec' ...
instance (Show1 f, Show' a) => Show' (f a) where ... 
```

如果所有`GHC.Generics`机器都到位（`GShow`, `GShow1`，默认签名等），那么最终结果看起来不会太糟糕。

```
instance (Show1 φ) => Show' (Pat φ)
instance (Show1 φ) => Show (Pat φ) where showsPrec = showsPrec'
instance (Show1 φ) => Show' (Expr φ)
instance (Show1 φ) => Show (Expr φ) where showsPrec = showsPrec' 
```

但是，假装所需的工作量并没有那么糟糕（这很糟糕），某些类型必须手动设置为 forward from `showsPrec'`to `showsPrec`( `Char`,`Bool`等)，并且所有使用的类型都必须成为实例of ，如果是or`Show'`的实例，虽然微不足道，但肯定不方便。`Generic``Generic1`

# ember.js - 应用程序启动时绑定到属性

> ID：11876317
> 
> 赞同：1
> 
> 时间：2012-08-09T03:20:32.560
> 
> 标签：ember.js

当我的应用程序首次启动并加载应用程序视图时，我尝试绑定到布尔属性以有条件地设置 CSS 类。布尔属性已正确初始化，但未设置类。启动后绑定似乎工作正常。这是一个演示该[问题](http://jsfiddle.net/jimpresley63/uWJWh/)的 JSFiddle 。任何想法为什么它在第一次运行时失败？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T02:07:00.937

我在 GitHub 上收到了 ember.js 团队的答复。

这是克里斯托弗·塞尔登的回应……

> 您的模板输出 2 个类属性，当 jQuery 将其带入 DOM 时，它会删除 > 后者，但不会合并它们。之后，绑定会更新 DOM 中的属性。如果你想要一个静态类和一个绑定类，你需要将静态类放在 bindAttr 帮助器中 {{bindAttr class=":something isB:redbg:greenbg"}}
> 
> [http://jsfiddle.net/krisselden/uWJWh/9/](http://jsfiddle.net/krisselden/uWJWh/9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T03:42:51.447

为什么不把它`redbg`也放入条件中呢？

[http://jsfiddle.net/uWJWh/4/](http://jsfiddle.net/uWJWh/4/)

编辑：更新 jsfiddle 使用`toggleProperty`

[http://jsfiddle.net/uWJWh/5/](http://jsfiddle.net/uWJWh/5/)

# javascript - Google Drive API - 复制现有的电子表格文件并使用 JavaScript 客户端 API 设置“标题”

> ID：11876320
> 
> 赞同：1
> 
> 时间：2012-08-09T03:20:50.790
> 
> 标签：javascript, google-api, client-side, google-drive-api

我正在处理 Google Javascript Client API 示例：

[https://code.google.com/p/google-api-javascript-client/source/browse/samples/authSample.html](https://code.google.com/p/google-api-javascript-client/source/browse/samples/authSample.html)

我正在测试 Google Drive API，特别是 gapi.client.drive.files.copy 方法。我可以让它将文件复制到我的云端硬盘，但我无法让它更改标题。这是代码：

```
function makeApiCall() {
        gapi.client.load('drive', 'v2', function() {
          var request = gapi.client.drive.files.copy({

        "title": "New Landmax SS from API 5",
        "fileId": "0Ap_i-ZEiVl0pdDhYbFpxSFc5ZW1nYlMwV2poSXhTSGc"
          });
          request.execute(function(resp) {
                result = resp;
          });
        });
      } 
```

但是，我可以使用 Google API Explorer 让它工作，但它没有提供 JavaScript 代码。所以这可能是一个小的语法问题。建议？不幸的是，Drive API 示例代码都没有使用新的（er）Javascript 客户端 API，只是服务器端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T21:56:17.430

再次观看 Google I/O 视频后，我现在似乎可以使用复制具有新名称的 Google 电子表格的语法：

```
var url = 'drive/v2/files/0Ap_i-ZEiVl0pdDhYbFpxSFc5ZW1nYlMwV2poSXhTSGc/copy'

var request = gapi.client.request({
'path':url,
'method': 'POST',
'body':{
    'title': 'New Landmax SS from API 6'
    }
    }); 
```

REST 请求和 JsonRPC 之间发生了混淆，它们相似但不相同。上面的 REST 版本有效。最初的问题是我无法开始工作的 JsonRPC。如果有人可以使 RPC 版本工作并解释何时使用任一版本，我想很多开发人员会很感激。

这是非常酷的东西！想象力正在燃烧。我注意到原始电子表格中的 Google App Scripts 也被复制了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-10T08:37:37.287

试试下面的代码：

```
/**
* Copy an existing file.
*
* @param {String} originFileId ID of the origin file to copy.
* @param {String} copyTitle Title of the copy.
*/
function copyFile(originFileId, copyTitle) {
    var body = {'title': copyTitle};
    var request = gapi.client.drive.files.copy({
       'fileId': originFileId,
       'resource': body
     });
    request.execute(function(resp) {
    console.log('Copy ID: ' + resp.id);
  });
} 
```

希望这会有所帮助。

来源 - [Google Drive SDK 参考](https://developers.google.com/drive/v2/reference/files/copy)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T04:48:17.917

根据您使用客户端库发送的请求和响应，检查来自 API 控制台的请求和响应。我怀疑它们不一样。

你需要的是更像：

```
var request = gapi.client.drive.files.copy({
  "fileId": "0Ap_i-ZEiVl0pdDhYbFpxSFc5ZW1nYlMwV2poSXhTSGc",
  "body":    {
    "title": "New Landmax SS from API 5",
  }
}); 
```

此处的区别在于 fileId 是 API 方法调用的参数，而标题是随方法发送的 JSON 资源的一部分。

# java - 更改字符串中的某些字符

> ID：11876328
> 
> 赞同：0
> 
> 时间：2012-08-09T03:21:57.667
> 
> 标签：java, string, chars

我是一个初学者程序员，我正在尝试制作一个非常简单的 Hangman 版本。我的代码有问题。这是我遇到问题的代码部分：

```
 for(int i = 0; i <= wordLength - 1; i++ ) {

            if (letter == theWord.charAt( i )) {

                onemore=i+1;
                System.out.println("This letter matches with letter number " + onemore + " in the word.");
                ***displayWord.charAt(i)=letter;***
                System.out.println("The word so far is " + displayWord);
            } 

        } 
```

我遇到错误的部分两边都有 3 个星号。

displayWord 是一个字符串，而字母是一个字符。

Netbeans 告诉我：

```
unexpected type
  required: variable
  found:    value 
```

我不知道问题是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T03:27:23.600

基本上，Java`String`是不可变的，即内容不能改变。

你最好使用`StringBuilder`.

```
String theWord = "This is a simple test";
char letter = 'i';
char changeTo = '-';

StringBuilder displayWord = new StringBuilder(theWord);

int i = theWord.indexOf(letter);
if (i != -1) {
    System.out.println("This letter matches with letter number " + (i + 1) + " in the word.");
    displayWord.setCharAt(i, changeTo);

    System.out.println("The word so far is " + displayWord);
}

System.out.println(displayWord); 
```

这导致：

```
This letter matches with letter number 3 in the word.
The word so far is Th-s is a simple test
This letter matches with letter number 6 in the word.
The word so far is Th-s -s a simple test
This letter matches with letter number 12 in the word.
The word so far is Th-s -s a s-mple test
Th-s -s a s-mple test 
```

现在简短的版本可能看起来像

```
String displayWord = theWord.repace(letter, changeTo); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T03:27:46.613

我不确定那个错误，但在 Java 中你不能以这样的样式更新字符。

相反，请尝试使用`StringBuilder`您的 displayWord。那有一个方法：`setCharAt`那可能就是你想要的。

祝你编码好运:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T03:30:20.900

charAt(i) 返回单词那部分字母的值，你不能用它来改变值。Java 中的字符串是不可变的，因此您实际上无法更改它。您可以创建一个新的（使用构造函数或可能的 replaceXXX 函数之一）并将其分配回 displayWord，或查看对此类事物更有效的[StringBuffer类。](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/StringBuffer.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T04:06:32.920

由于`String`是不可变对象，因此您无法更改其内容。不可变意味着一旦`String`设置了内容，你就没有能力以任何方式改变它。您始终可以更改参考，但不能更改内容本身。

话虽如此，该`String`对象并未提供任何违反此原则的方法。没有`setCharAt`，您不能为 的结果分配新值`charAt(i)`。请注意，一些“似乎”改变`String`(like `replace`) 的方法是如何返回一个新的克隆对象并对其进行更改。例如：

```
String sample = "Hello World!";
sample.replace('e', '*');
System.out.println(sample); 
```

上面的代码**没有**做任何改动`sample`，所以屏幕上打印的结果会是`Hello World!`。为了捕获`replace`方法所做的更改，我们需要将`sample`变量重新分配给结果`replace`：

```
String sample = "Hello World!";
sample = sample.replace('e', '*');
System.out.println(sample); 
```

在这种情况下，我们将使用由返回`sample`的新克隆更新我们的变量。这个值会有变化，所以我们会看到打印出来的。`String``replace``H*llo World!`

既然你知道了为什么不能改变你`String`的 s 的内容，那么让我们看看你有什么解决方案。

1.  首先，要保持程序的确切行为，完美的方法是使用`StringBuilder`之前指出的@MadProgrammer。查看`StringBuilder`类的过于简单化的方式基本上是 mutable `String`。有了它，您可以进行各种替换和修改。

2.  另一种解决方案（但不推荐）是`String`每次要更改角色时都使用 来创建新副本。这将非常麻烦，并且与`StringBuilder`解决方案相比没有任何优势，因此我不打算详细介绍。

3.  第三种解决方案取决于您的要求以及您的灵活性。`String`如果您要做的只是替换`replace`. 它会是这样的：

    String theWord = "这是我们的测试字符串"; 字符字母 = 'e'; char changeTo = '*'; 字符串 displayWord = theWord.replace(letter, changeTo); System.out.println("得到的单词是：" + displayWord);

这将输出以下结果：

```
The resulting word is: H*r* is our t*sting string 
```

同样，这仅在您的要求足够灵活并且您可以跳过示例代码中遵循的“逐步”方法的情况下才有效。

# php - 如何更改 URL 中的文件名

> ID：11876332
> 
> 赞同：0
> 
> 时间：2012-08-09T03:22:32.287
> 
> 标签：php

我在数据库“FileName”和“UrlFileName”中有两个字段，所以我从无效字符中清理“FileName”以获得新的文件名，例如“FinaleFileName”，所以我的问题是我需要一个简单的代码或函数来更改名称在将我的两个字段存储在数据库中之前，URL 中的文件也是如此，例如：

```
$FileName = "NaMeoFImagE-10.jpeg"
$UrlFileName = "uploads/pics/NaMeoFImagE-10.jpeg"
....
//I had created a function to remove or replace a invalid character //Ok

$FinaleFileName= nameofimage-10.jpeg

.....

A function to replace a File name in URL // Not OK

$FinaleUrlFileName = "uploads/pics/nameofimage-10.jpeg"// Im looking for this result 
```

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T03:26:48.423

我不确定我是否理解您的要求，但根据您的测试用例，我认为您正在寻找[`strtolower`](http://php.net/manual/en/function.strtolower.php).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T03:41:27.023

我不确定这是否是您想要的，除此之外，这是一个快速而肮脏的解决方案。

```
 <?php

         $FileName = "nameofimage-10.jpeg";  //your sanitized file name
         $UrlFileName = "uploads/pics/NaMeoFImagE-10.jpeg";  //unclean URl

 $parts = explode("/", $UrlFileName);
 $name = $parts[ count($parts) - 1] ;
 $name = $FileName;
 $final = "";  //final cleaned URL

 for($i = 0; $i < count($parts) - 1; $i++)
 {
    $final .= $parts[$i] . "/";
 }
 $final .= $name;

  echo $final  //return the clean URL;
?> 
```

这是你想要的吗 ？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T03:26:05.197

如果您要使用`URLfilename`搜索，`finalFilename`那么是的，它们需要相同，否则您将找不到您的文件。如果 URLFileName 仅用于搜索 URLFileName，那么它不会有任何区别（只要您检查它是否对您的数据库进行了注入攻击）。

话虽如此，为什么要保留两者？为什么不只清理 URLFilename 并仅使用它呢？为什么要加倍信息？

# mysql - 如何在 order by 中使用左连接？

> ID：11876335
> 
> 赞同：0
> 
> 时间：2012-08-09T03:23:03.973
> 
> 标签：mysql

我有 USER 表（主表）和 ONLINE 表（与 USER 具有一对一关系的参考表），如下所示：我在表上使用了左连接 ![在此处输入图像描述](../Images/3f635de775d67be4469735d8910728ce.png)

我在 ONLINE 表的“is_logged”字段上应用 order by。（ASC）我得到了按顺序排列的记录，但所有记录都排在第一位，而 ONLINE 表中不存在这些记录。我想要用户表顺序的所有记录，但那些记录应该排在最后，而在线表中不存在

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T03:34:46.727

看一下这个。

```
SELECT  o.*
FROM     users u
             LEFT JOIN online 
                 o ON u.id = o.user_id
ORDER BY COALESCE(is_logged, -1) DESC, user_id ASC 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!2/fd16e/9)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T03:31:41.380

为空时给它一个大于 0 和 1 的值。

```
SELECT
  u.*, IFNULL(o.is_logged, 99) as is_logged
FROM
  user u
LEFT JOIN online o ON u.id = o.user_id
ORDER BY is_logged ASC 
```

# ruby-on-rails-3 - 从 Rails 应用程序中删除 redis

> ID：11876336
> 
> 赞同：0
> 
> 时间：2012-08-09T03:23:18.897
> 
> 标签：ruby-on-rails-3, heroku, redis

我玩了一下 redis，但决定不使用它，并将它从我的应用程序和 gem 文件中删除。

当我将我的应用程序上传到 heroku 时，出现错误

```
2012-08-09T03:00:03+00:00 应用程序 [web.1]:/app/vendor/bundle/ruby/1.9.1/gems/actives
支持 3.2.3/lib/active_support/dependencies.rb:251:in `require': 没有这样的文件 t
o 加载——redis (LoadError)

```

`/app/vendor/bundle`但是，我在我的应用程序（或我的机器上）中找不到任何路径，并且`grep -r 'redis '`在 app 目录中没有返回任何结果。

如何从我的应用程序中删除 redis，或者 Heroku 为什么认为它在那里。

我已经完成了我的初始化程序，并且在任何地方都没有引用 redis。

# python - Python (3.2.3) If 或语句语法错误

> ID：11876338
> 
> 赞同：2
> 
> 时间：2012-08-09T03:23:33.290
> 
> 标签：python, syntax, if-statement, conditional

感谢您阅读本文。我正在尝试[从 programarcadegames.com 做这个实验](http://programarcadegames.com/index.php?chapter=lab_create_a_quiz#section_24)，你必须在那里写一个测验。我完成了我的第一个问题并得到了一个语法错误。这是代码：

```
print ("This is a quiz.")
x=0
questionOne=input("First question! How many fingers does a human have? "
if questionOne == "10" or questionOne.lower() == "ten":
                   print ("Correct! Good job!")
                   x+=1
else:
                   print ("Not quite... try the next one!")
print ("You got the following amount of questions right:",x) 
```

当我去运行它时，我得到一个语法错误，Python shell 编辑器窗口突出显示第四行末尾的冒号。删除冒号会使其突出显示下一行的打印。我还尝试删除 or 语句，只制作第四行：

```
 if questionOne == "10": 
```

为了排除故障，但我最终得到了同样的错误和红色冒号。有任何想法吗？批评？嘲讽评论？再次感谢您的阅读。

**编辑：** 这不是`.lowercase()`问题，解决了这个问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T03:24:48.460

您在前一行（带有 的行`input`）中缺少右括号。

# c# - 如果收件人在特定时间内没有回复，则显示电子邮件提醒

> ID：11876342
> 
> 赞同：2
> 
> 时间：2012-08-09T03:24:10.920
> 
> 标签：c#

我有一项任务，即在 Windows 应用程序中使用 c# 制作请假申请表。步骤如下。

1.  填写完所有字段后，邮件应发送给经理。
2.  如果经理没有看到那封电子邮件或者他一天没有给出任何回复，那么我们必须显示一个提醒或通知，例如“等待回复”（例如）。

第一步，我知道如何通过 SMTP 发送电子邮件。但是如何知道经理是否响应该线程并显示通知（可能是警报消息或 Windows 通知）。对于所有这些过程，我应该使用工作流程吗？有什么最好的方法吗？

在 asp.net 或 windows 应用程序中实现更好吗？我打算做它的Windows应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T03:31:29.480

*如果经理没有看到电子邮件*，可以通过请求阅读回执并检查来完成。这不是万无一失的，因为经理可以简单地拒绝退回收据，但这是您拥有的最好的。

*不过，他一天没有回应*要困难得多。我能看到的唯一方法是将所有通信作为中间人通过您的应用程序返回。我的意思是将回复地址设置为您的应用程序可以访问的地址，然后一旦您的应用程序读取并记录响应，程序就会将电子邮件转发给预期的收件人。通过这种方式，您可以看到响应经过并将其转发给预期的收件人。这确实意味着您需要您的应用程序一直运行，可能作为服务。

唯一的其他选择是完全放弃电子邮件并使用您的应用程序来阅读和响应请求。这样您就可以访问所有内容，并且可以在数据库中保留时间戳。

# java - 正则表达式只读取句子直到'='但不包括

> ID：11876343
> 
> 赞同：0
> 
> 时间：2012-08-09T03:24:13.343
> 
> 标签：java, regex, properties

我正在尝试使用包含空格的键读取属性文件。

例如：

```
Parent File name = 'Mother.Older'
Child File name = 'Daughter.Younger' 
```

我尝试了正则表达式`^.*=`，它成功读取了密钥，但它也读取了`=`符号。

有没有更好的正则表达式只读取键直到`=`符号。

[我原来的问题的链接](https://stackoverflow.com/questions/11838674/how-to-read-property-name-with-spaces-in-java)

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T03:27:32.213

试试`^[^=]*`。`^`里面的意思`[]`不是，所以`[^=]`匹配除 之外的任何字符`=`。

# python - 变换节点更改时强制计算（Maya 插件）

> ID：11876344
> 
> 赞同：3
> 
> 时间：2012-08-09T03:24:25.427
> 
> 标签：python, plugins, maya

使用该`attributeAffects`功能可以链接 Maya 节点的两个属性。例如，输入属性`x`可以链接到输出属性`y`。这意味着当`x`更改时，Maya 将`compute()`在给定节点上运行回调函数，以计算`y`.

但是，据我所知，只有节点本身的属性才能像这样从插件内部连接。

在我的插件中，我扩展了一个`MPxLocator`，并使输出属性`out`. 我想做以下事情：

```
# replace <...> with transform node name.
attributeAffects(CustomNode.out, <custom node's tranform node>.translateX)
attributeAffects(CustomNode.out, <custom node's tranform node>.translateZ) 
```

我根本找不到任何有关如何执行此操作的文档！有人做过/知道怎么做吗？有一种方法可以通过在脚本编辑器（python）中执行以下操作来破解此问题：

```
import maya.cmds as cmds

# Creates CustomNode1, which is linked to transform1 in the DG.
cmds.createNode("CustomNode") 
cmds.connectAttr("transform1.translateX", "CustomNode.out")
cmds.connectAttr("transform1.translateZ", "CustomNode.out") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T20:28:51.647

设计的节点不应该知道其他节点。也就是说，如果节点有一些它需要的数据，那么这些数据需要是内部的，或者在创建时或由用户连接。这就是使 Maya 高效的原因。并不是 Maya 实际上强制执行此操作，而是忽略此设计理念会让您非常不高兴，因为您一直在与 Maya 作斗争（加上它更多，极易出错，需要维护的代码）。

所以这给你留下了两个选择：

*   创建 2 个输入属性并读取它们（在您使用时制作 3 个，然后您可以连接所有翻译）。这种方法的好处是，现在任何 Maya 用户都可以使用您的节点做一些您没想到的事情。这就是所有其他 Maya 节点的工作方式。大多数工厂节点都提供了创建节点的命令，因此它们可以将预期的连接连接到其余节点。希望做其他事情的用户始终可以使用*createNode*。所以不，如果你不连接到 out 属性，这样做并不是一个真正的黑客。
*   碰巧*定位器*节点已经知道其父节点的转换，以 DAG 节点继承属性*parentMatrix*的形式，现在这不是父节点的本地坐标，而是它在世界空间坐标中的坐标。现在，这也是 Maya 建立的连接，但它是一种隐藏的连接类型。*

这些是您唯一明智的选择。但是，如果您真的必须这样做，您也可以按照您的要求进行操作，但是您将在免费的性能优化 Maya 用品的基础上进行自己的事件监控。它有一些额外的代码和更多的调试，而且它在所有方面都会逊色。

PS：您的 hack 起作用的原因是 Maya 以相反的方式评估连接，因此如果您使输出变脏并且 Maya 被要求评估输出，那么 Maya 将触发计算

*就像时间一样，如果您创建一个名为时间类型的属性，那么 Maya 会在不询问和显示的情况下为您连接它，除非您将它连接到其他东西。着色主要基于这些连接。

# javascript - 将 Jquery 添加到 ASP.Net 创建的元素

> ID：11876348
> 
> 赞同：1
> 
> 时间：2012-08-09T03:24:55.890
> 
> 标签：javascript, jquery, asp.net, css

我有一个gridview，它在某一列的每个单元格中放置一个下拉列表。

我希望所有的下拉列表都实现一个 Jquery 选择类。执行此操作的正常方法如下

```
<script type="text/javascript">
$(function () {
    $("#language").selectbox();
});
</script> 
```

现在的问题是会有多个具有不同ID的所以我不能这样设置..有没有办法根据他们的cssclass设置所有下拉列表或内联？（即我可以通过 C# 将属性添加到下拉列表中）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T03:30:50.460

要通过它们的 id 选择多个元素，只需将它们指定为逗号分隔的列表作为选择器

```
$("#id1,#id2,#id3") 
```

如果您要选择的所有元素都有一个类`.`，请在选择器中的类之前使用一个点

```
$(".yourclass") 
```

[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

# linux - 在 bash 脚本中对字符串进行 URL 编码

> ID：11876353
> 
> 赞同：11
> 
> 时间：2012-08-09T03:26:07.523
> 
> 标签：linux, bash, command-line, wget, urlencode

我正在编写一个 bash 脚本，在其中尝试提交一个 post 变量，但是 wget 将其视为多个 URL，我相信因为它不是 URLENCODED ......这是我的基本想法

```
MESSAGE='I am trying to post this information'
wget -O test.txt http://xxxxxxxxx.com/alert.php --post-data 'key=xxxx&message='$MESSAGE'' 
```

我收到错误，alert.php 没有得到 post 变量，而且它在说

无法解决我无法解决我无法解决尝试..等等。

我上面的示例是一个简单的 sudo 示例，但我相信如果我可以对其进行 url 编码，它会通过，我什至尝试过 php，例如：

```
MESSAGE='I am trying to post this information'
MESSAGE=$(php -r 'echo urlencode("'$MESSAGE'");') 
```

但php错误..有什么想法吗？如何在不执行 php 的情况下传递 $MESSAGE 中的变量？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2017-02-09T08:10:57.667

在 CentOS 上，不需要额外的软件包：

```
python -c "import urllib;print urllib.quote(raw_input())" <<< "$message" 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-09T03:39:40.487

您希望`$MESSAGE`使用双引号，因此 shell 不会将其拆分为单独的单词，然后将其作为参数传递给 PHP：

```
ENCODEDMESSAGE="$(php -r 'echo rawurlencode($argv[1]);' -- "$MESSAGE")" 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-05-27T07:54:12.000

扩展[Rockallite 对 Python 3 和来自文件的多行输入非常有用的答案](https://stackoverflow.com/a/42131272/5794048)（这次是在 Ubuntu 上，但这不重要）：

```
cat any.txt | python3 -c "import urllib.parse, sys; print(urllib.parse.quote(sys.stdin.read()))" 
```

这将导致文件中的所有行连接成一个 URL，换行符被替换为`%0A`.

# c# - MVC3 传递字典 从视图到控制器

> ID：11876357
> 
> 赞同：3
> 
> 时间：2012-08-09T03:26:28.830
> 
> 标签：c#, asp.net, asp.net-mvc-3, view

我需要在表单上显示几个复选框，用户可以根据需要检查任意数量。

所以我将复选框选项存储在数据库中。（必需的）

模型

```
public class Options
{
    public int OptionsId {get; set;}
    public string Option {get; set;}
} 
```

在视图模型上，

```
IEnumerable<Options> listCheckBoxOptions {get; set;}// store list of options from database
Dictionary<string,bool> checkboxs {get; set;} // store if is check or not 
```

因此，在视图中，我想将复选框值（真/假）存储在此复选框字典中。

```
@foreach (var x in Model.listCheckBoxOptions)
     {                  
           @Html.CheckBoxFor(m => m.checkboxs[x.Option])
           @m.Option <br />                             
     } 
```

所以当我提交表单时......当到达控制器时复选框为空。

知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T03:42:57.423

您的复选框将被赋予这样的名称和像这样`checkboxs[key here]`的 ID `checkboxs_key_here_`。MVC 不知道如何将这些绑定回来。

看看我几天前回答的这个线程：[Generating an MVC3 RadioButton list in a loop statement](https://stackoverflow.com/questions/11839111/generating-an-mvc3-radiobutton-list-in-a-loop-statement/11839242#11839242)

同样的事情，只是使用 RadioButtons 而不是 CheckBoxes。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T04:00:24.453

使用**编辑器模板**

向您的 ViewModel 添加一个属性。为了更好的可读性，我将把名称从复数改为单数（**Options**到**Option**）

```
public class Option
{
    public int OptionId {get; set;}
    public string Option {get; set;}
    public bool IsSelected { set;get;}
} 
```

还有你的主视图模型，

```
public class CustomerViewModel
{
  public IEnumerable<Option> OptionList { set;get;}
  public CustomerViewModel()
  {
     OptionList=new List<Option>();
  }
} 
```

在文件夹`Option.cshtml`下创建一个名为的视图。`Views/YourControllerName`

里面有这个内容。

```
@model Option
@{
   Layout = null;
}
<p>
 @Html.CheckBoxFor(x => x.IsSelected)
 @Html.LabelFor(x => x.IsSelected, Model.Option)
 @Html.HiddenFor(x => x.OptionId)
</p> 
```

在主窗体中，这样称呼它

```
@model YourViewModel
@using(Html.BeginForm())
{     
   @Html.EditorFor(m=>m.OptionList)
  <input type="submit" value="Save" />
} 
```

现在在您的`POST`操作中，您可以检查`IsSelected`属性中项目的属性`OptionList`值

```
[HttpPost]
public ActionResult Edit(CustomerViewModel model)
{
   foreach(var opt in model.OptionList)
   {
      //check for model.IsSelected value for each item
   }
} 
```

# database-normalization - 复杂的数据库规范化

> ID：11876359
> 
> 赞同：-1
> 
> 时间：2012-08-09T03:26:57.640
> 
> 标签：database-normalization

我正在尝试为水务部门的在线系统建立一个数据库，跟踪每个帐户/仪表的所有过去使用情况。
数据库收到一个包含当天所有读数的 csv 文件。我收到的 csv 具有以下数据：

*   帐号（一个帐户上可能有多个计量器/地址）
*   地址
*   Meter ID（可能有多个端口用于公寓大楼、商业建筑等）
*   端口号
*   阅读（数字）
*   阅读日期（字符串）
*   仪表序列号（与仪表 ID 相关）
*   安装日期（与仪表 ID 相关）

我开始考虑数据库设置，据我所知：

*   仪表信息
    *   仪表 ID（主键）
    *   仪表系列
    *   安装日期
    *   地址
    *   端口数
*   仪表使用情况（标题为我的仪表 ID）
    *   阅读日期
    *   阅读

我在想每个仪表都有自己的表，该表名为仪表 ID，这将使访问一米的过去数据变得容易，但带来了按端口分隔的问题。

下面，我将如何区分meter# 000003 的端口？ 一个想法是将端口号附加到仪表 ID# 的末尾， 即具有 0000031 和 0000032 [![](../Images/6f95b4708f57a8a84f348af33cdef640.png)](https://i.stack.imgur.com/Izkiu.png)

所以我的主要问题是，处理一个可能有多个端口的仪表和一个可能有多个仪表的帐户，它可能有多个端口。

这将是我建立的第一个非伪数据库，因此非常感谢你们的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T03:56:50.923

继续@Roger 的思考过程，如果不能将端口号拆分为单独的帐户#，则许多人不需要端口号，但是您应该有一个帐户表，其中帐户号是 PK 并且喜欢您的仪表表，也许是一个地址表，尽管如果您计划使用地址表作为仪表表指向的地址表，这可能会变得复杂。另外，如果我是正确的，您的仪表序列号应该是唯一的，因此您可以将其用作主键，而不是创建自动递增的 PK 此外，您不一定需要为每个仪表使用一个新表，您可以简单地使用 MeterUsageTable一个名为 UsageID 的 Auto inc PK，带有仪表 ID 的 MeterID 读取日期和读取以及简单的查询将能够为您提供所有历史记录。尽管如果您要进入一家公司完整的使用历史记录，它将增加大量数据。编辑：我认为您希望您的数据库看起来像这样，您可以调整您需要和不需要的内容，但这是我认为您需要的关系，以便从 AccountNumber 转到使用 ![可能的解决方案](../Images/218d8a8b00e1b0682931818bcd9b4419.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T03:38:41.157

根据评论，我会提出以下建议：

## 帐户

## 仪表

id account_id serial_number 安装日期地址

## 仪表端口

Meter_id

## 读数

Meter_port_id reading_date 读数

就地址而言，我不确定您是否会支持多个城市、州、邮政编码。如果愿意，您也可以考虑对其进行规范化，以使您能够对某些邮政编码、城市等进行分组。

# c++ - 实现自己的 memcpy（以字节为单位的大小？）

> ID：11876361
> 
> 赞同：10
> 
> 时间：2012-08-09T03:27:17.847
> 
> 标签：c++, c

我最近有一个面试问题，我必须实现 memcpy。根据我的经验，我使用过很多 memcpy，所以这似乎不是一个棘手的问题。

所以，我开始实现一个循环，从指针到指针一次复制一个地址，如下所示：

```
void memcpy(void* dest, void* src, int size){
    for(int index = 0; index < size; index++){
        dest[index] = src[index];
    }
} 
```

然而，面试官打断了他们注意到 memcpy 的手册页说它“将 n 个字节从 src 复制到 dest”（我稍后确认）然后希望我通过 size/4 进行迭代，然后用另一个索引循环来获取剩余的< size%4 （我猜假设它是 32 位系统？）

好吧，这看起来很奇怪，因为我多年来一直没有问题地使用 memcpy 而不必给它一个 *4 修饰符）。当我回到家时，我启动了 gdb 并复制了一个小字符串“hello”，并小心地使用 strlen() 和常量输入大小以查看它在哪里开始和停止。

```
 char* src = "hello";
    char* dest = calloc(16, sizeof(char));
    int len = strlen(src);
    memcpy(dest, src, len); // both my version and official version 
```

现在我用 gdb 仔细检查了 src 和 dest，它们都包含“hello\0”。

所以我的问题是：我对使用数字 4（或“以字节为单位的大小”）有什么不理解？当这不是真正的行为时，为什么文档会说“n字节”？我在这里看不清楚什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-09T04:00:10.797

正如其他人所说，一次复制 4 个字节比一次复制 1 个字节要快。面试官希望你做这样的事情：

```
void memcpy(void* dest, void* src, int size)
{
    uint8_t *pdest = (uint8_t*) dest;
    uint8_t *psrc = (uint8_t*) src;

    int loops = (size / sizeof(uint32_t));
    for(int index = 0; index < loops; ++index)
    {
        *((uint32_t*)pdest) = *((uint32_t*)psrc);
        pdest += sizeof(uint32_t);
        psrc += sizeof(uint32_t);
    }

    loops = (size % sizeof(uint32_t));
    for (int index = 0; index < loops; ++index)
    {
        *pdest = *psrc;
        ++pdest;
        ++psrc;
    }
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-09T03:31:10.600

他们要求您优化您的实现，并让它在循环内一次复制一个 32 位字，而不是一次复制一个字节。这将需要仔细检查以处理边界情况，例如`size`不是 4 的倍数，`dest`或者`src`未在 4 字节边界上对齐。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T06:41:52.363

出于某种原因，面试官要求您执行过早的优化。这通常是个坏主意。

确实，32 位机器复制一个 32 位卡盘比复制 4x1 字节快。但优化远不止这些。

32 位机器很有可能将您的数据放入高速缓存内存中，然后突然快速的内存访问可能比 CPU 指令更相关。高速缓存存储器可能有各种对齐要求。他们可能更喜欢普通的循环，或者他们可能更喜欢 32 位对齐的块。我不是这方面的专家，所以我避免过早优化并将其留给编译器，希望编译器比我更了解高速缓存。

然后是 CPU 分支预测和指令管道。这个特定的代码是相当确定的，所以这可能不是问题。但作为经验法则：简单代码比复杂代码产生更有效的分支预测。

此外，还有除法，这在许多 CPU 架构上很慢。根据要复制的数据量，划分可能会导致 memcpy 慢得多。

总结一下：手动优化是相当复杂的，需要对CPU和硬件有深入的了解。您不能也不应该“针对 32 位 CPU 进行优化”，您需要了解具体情况。在大多数情况下，编译器会比您更有效地优化代码。特别是库 memcpy()，通常是用内联汇编程序编写的，针对特定目标进行了优化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T03:34:57.960

您的 memcpy 的逻辑是正确的，并且您的面试官没有要求您更改它或添加限制。一次复制 4 个字节会更快，但如果您的大小不是 4 的倍数，就会出现问题。因此面试官告诉您使用两个循环：第一个循环一次复制 4 个字节，第二个循环一个字节一次时间（最多迭代 3 次）。

所以大部分的拷贝是用快速的 4 字节拷贝完成的，但你不限于大小为 4 的倍数，因为第二个“清理”循环将复制任何不是 4 的倍数的东西。

第一个循环：复制 uint32_t 并递增 4
第二个循环：复制 uint8_t 并递增 1

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-09T03:41:58.290

面试官正在测试你对计算机体系结构的了解，并希望你优化你的算法。内存操作的是字而不是字节。在 32 位系统中，一个字通常是 4 个字节，读/写 1 个字节所用的时间与读/写 1 个字所用的时间相同。第二个循环是处理要复制的字节数不能被 4 个字节整除的情况。

你真正想要的是3个循环。2 循环用于 dest 之后和 dest+size 之前的字节，当两者都不是字对齐时。然后对中间的所有单词进行另一个循环。

您实际上可以通过利用特定于架构的指令进行更多优化。如果您有兴趣，请查看这篇文章：[http ://www.eetimes.com/design/embedded/4024961/Optimizing-Memcpy-improves-speed](http://www.eetimes.com/design/embedded/4024961/Optimizing-Memcpy-improves-speed)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-09T03:31:35.023

他们希望你加快速度。32 位处理器复制 32 位的速度比复制 8 位的速度快。因此，如果有人想要复制 4 个字节而不是一次复制一个，那么您可以一次完成所有操作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-24T06:34:26.140

看一下这个..

```
void myMemCpy(void *dest, void *src, size_t n)
{
   // Typecast src and dest addresses to (char *)
   char *csrc = (char *)src;
   char *cdest = (char *)dest;

   // Copy contents of src[] to dest[]
   for (int i=0; i<n; i++)
       cdest[i] = csrc[i];
} 
```

[欲了解更多信息](http://www.geeksforgeeks.org/write-memcpy/)

# nhibernate - 流畅的 nhibernate 映射嵌套属性“找不到 getter”

> ID：11876365
> 
> 赞同：3
> 
> 时间：2012-08-09T03:27:36.107
> 
> 标签：nhibernate, orm, fluent-nhibernate, fluent-nhibernate-mapping

好的，这可能是一个双重问题。我有一个类`User`，它包含一个`Location`类型的属性`UserLocation`。起初，我同时映射**类**`User`和**类**，并将它们都存储在`UserLocation`数据库中，但这对我来说没有多大意义，因为 for 的唯一目的`UserLocation`是成为`User`. 无论如何，现在，我的映射看起来像这样：

```
public class UserMap : ClassMap<User>
    {
        public UserMap()
        {
            Id(x => x.Id).Access.ReadOnlyPropertyThroughLowerCaseField().GeneratedBy.Identity();
            Map(x => x.Location.Address);
            Map(x => x.Location.City);
            Map(x => x.Location.State);
            Map(x => x.Location.ZipCode);
        }
    } 
```

但我收到错误“找不到吸气剂`UserLocation.Address`”。我也得到了一堆转换错误，因为 NHibernate 似乎仍在为`UserLocation`. 所以我想问题是**从映射的自定义类中引用非映射自定义类的最佳方法是什么**。

哦，补充一下，我很确定它`UserLocation`没有被映射到**任何地方**。我什至尝试从映射中删除对它的引用，但在`User`尝试将计算类转换为真实类时仍然遇到转换错误。我无法理解为什么此时甚至会有一个计算类型..

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T07:38:36.097

你所拥有的是一个[组件](http://nhforge.org/doc/nh/en/index.html#components)。组件在 NHibernate 中单独映射。

您的 Fluent NHibernate 映射应如下所示：

```
public class UserMap : ClassMap<User>
{
    public UserMap()
    {
        Id(x => x.Id).Access.ReadOnlyPropertyThroughLowerCaseField()
            .GeneratedBy.Identity();

        Component(x => x.Location,
            loc =>
            {
                loc.Map(x => x.Address);
                loc.Map(x => x.City);
                loc.Map(x => x.State);
                loc.Map(x => x.ZipCode); 
            });
    }
} 
```

# java - 如何在java中删除日志标题

> ID：11876366
> 
> 赞同：0
> 
> 时间：2012-08-09T03:27:43.957
> 
> 标签：java, logging

当我登录java时。对于每个日志信息，它都会以这样的标题行开头，

```
Aug 9, 2012 11:19:13 AM com.aures.IBDownload.ContractHistoryDataDownloader logActivity 
```

`com.aures.IBDownload.ContractHistoryDataDownloader`是java类名，`logActivity`是日志名

time 之后的文本仅显示在控制台中。在日志文件中，只是时间。

现在我也想在控制台的时间之后删除txt，因为它太长而且每次都重复，太烦人了。

任何想法，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T03:47:32.190

如果您正在使用`java.util.logging`，那么（根据我对文档的阅读），您需要编写一个自定义`Formatter`类来更改日志文件格式。标准类库提供了一个`SimpleFormatter`类，但它似乎没有为您提供任何调整格式的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T03:32:12.350

如果您使用的是 log4j，请找到您的 log4j.xml 或 log4j.properties 并更改日志格式。在日期和类之后可能会有一个字符（从内存中它是 [d] [c] 或类似的），它将代表日志文件名。只需删除该字符及其周围的括号，您应该是对的。:)

# c++ - 定位事件处理程序

> ID：11876368
> 
> 赞同：4
> 
> 时间：2012-08-09T03:28:40.243
> 
> 标签：c++, visual-studio-2008, mfc, event-handling, breakpoints

我有一个非常大的 MFC 应用程序的源代码，但文档很差。我试图在代码执行时跟踪它，以了解它在做什么。不幸的是，一旦用户获得了对应用程序的控制权，我需要在事件处理程序上设置一个断点，以便在调试器中再次开始跟踪。如果我尝试逐行遍历代码，那么用户将永远无法控制应用程序，因为它开始逐步遍历空闲例程。

我需要的是在单击按钮之前确定与按钮关联的事件处理程序的名称。这样，我可以在该事件处理程序上设置一个断点，并在按下它后立即遍历相关代码。

由于应用程序的大小，在每个事件处理程序处手动设置断点是不可行的。如果有一种简单的方法可以在包含特定模式的所有行上设置断点，那么这也可以。我可以在 (alt+e+f+i) 中搜索 '::On' 并同时在数千个结果命中设置断点。我必须手动取消选择以这种方式无意触发的所有断点，但这仍然有效。有没有办法做到这一点？

此外，我尝试通过资源查看器搜索并找到看起来像我想要的按钮但无法找到它的东西。即使我这样做了，我也不确定这会有什么帮助。难道不应该有一个很好的简单列表来列出图形元素及其相关事件吗？

**我剩下的选择是什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T04:26:56.537

好的，我要做的第一件事就是您显然已经尝试过：在资源查看器中查找相关控件的资源 ID。如果您有 ID，则可以在类声明中搜索它，其中将有 MFC 宏将“click”事件映射到该控件的回调。回调当然是您要查找的事件处理程序。

因此，如果您无法用眼睛找到按钮，请搜索它。有几个合理的可能性：

1.  它在资源文件中但是你看不到它——可能它被其他按钮覆盖了；
2.  它在应用程序中动态命名；
3.  它是在应用程序中动态创建的。

在您的项目中搜索按钮上显示的文本 - 匹配大小写并尝试首先包含引号，如果不成功则不包含引号。您可能必须手动打开和搜索资源文件（关闭资源编辑器并将 RC 文件作为文本加载到 Visual Studio，然后搜索）。

如果它在资源文件中，您将能够将控件与 ID 匹配。如果根本找不到，请检查字符串表。如果它在字符串表中，则追溯使用该字符串资源的位置。

在动态命名和/或创建的情况下，您可能需要做更多的侦探工作。

这种方法可能发生的最糟糕的事情是按钮上的文本出现在整个项目中，或者按钮有一个图标而没有文本。如果你真的很挣扎，你可能会通过使用 Spy++ 来获取有关按钮的信息。您应该能够从中检索数字 ID，然后在`resource.h`.

玩得开心！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T08:46:09.260

假设您的应用程序是一个相当标准的 MFC 应用程序，几乎所有按钮点击都将通过消息映射处理，并且看起来像：

```
ON_BN_CLICKED( IDC_BUTTONID, OnMyButtonClicked ) 
```

它将按钮 IDC_BUTTONID 的 BN_CLICKED 通知映射到方法 OnMyButtonClicked。

因此，查找事件处理程序的最简单方法是在源代码中搜索按钮的资源 ID（您应该在对话框编辑器或 .rc 文件中找到）。显然，如果你想更具体一点，你可以进行正则表达式搜索，例如

```
ON_BN_CLICKED.*IDC_BUTTONID 
```

该项目可能看起来像一个按钮，但实际上不是一个按钮，或者它是通过 OnCmdMsg 手动路由的，在这种情况下，您最好寻找点击的症状（即您必须知道的一些代码）运行）放一个中断，然后跟踪调用堆栈以查看消息是如何处理的。

对于广泛的源代码搜索，我建议查看专用的第 3 方搜索程序，例如[Agent Ransack](http://www.mythicsoft.com/agentransack)或[WinGrep](http://www.wingrep.com/)。

# sendmail - 在多租户站点中发送大量电子邮件的最有效方式？

> ID：11876369
> 
> 赞同：1
> 
> 时间：2012-08-09T03:28:48.573
> 
> 标签：sendmail, sendgrid

我有一个多租户站点。我的一些客户在这里和那里发送 1 封电子邮件，其他客户可能一次发送 1,000 封。

我使用[SendGrid.com](http://sendgrid.com)作为我的邮件服务器，使用[SwiftMailer.org](http://swiftmailer.org/)作为我的 PHP 代码。

问题是每封电子邮件都需要一秒钟左右的时间才能发送。我想它需要连接到 SendGrid.com 以进行身份​​验证等。因此，如果您发送 1,000 封电子邮件，实质上它会超时大约需要 1,000 秒。

我认为最好的方法是将电子邮件存储在数据库中，然后通过 cron 作业将它们发送出去。

那会是最有效的方法吗？我应该一次只发送一定数量的电子邮件吗？例如，每个 cron 作业 100 个？

当我谈到 cron 作业时，cron 作业可以跨圈吗？因此，如果我让它每分钟运行一次 cron 作业，并且该页面需要 2 分钟来发送所有电子邮件，那么该 cron 作业会在一分钟后再次运行，还是会等待 2 分钟直到最后一个 cron 作业处理完毕？

谢谢你的帮助！

本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T03:33:20.827

您有一个 IO 绑定任务（在这种情况下为网络/网络服务 IO）。

IO 绑定任务非常适合多线程。

在您的发送应用程序中启动多个线程以并行处理多个电子邮件发送请求。

如果您希望定期检查电子邮件是否准备好发送，cron 是一个不错的选择。但是，您可能希望考虑使用一个持续运行（并且可能间歇性休眠）的守护进程（也称为服务）作为替代方案。

# php - PHP file_put_contents 从 ManiaPlanet GBX 文件中提取缩略图时创建 0bytes 图像文件

> ID：11876372
> 
> 赞同：0
> 
> 时间：2012-08-09T03:29:12.427
> 
> 标签：php, gd

我无法从 GBX 文件（ManiaPlanet 文件）中提取缩略图。

主要问题是它在前一段时间有效，但它现在不起作用。从那以后，我对代码进行了很多更改。

这是代码：

```
<?php
$domain = 'http://bryan1998.dyndns.org';
$ml = 'bryan199813';
include_once('files/gbxdatafetcher.inc.php');
//Filenames
$ext = '.Map.Gbx';
$file = 'TFS_Battle 001';
$filename = $maps_dir . $file . $ext; 
//Make simplename
$simplename = str_replace(' ', '_', $file);
$simplename = strtolower($simplename);
$simplename = recode_string("us..flat", $simplename);
//$simplename = preg_replace('/[^(\x20-\x7F)]*/','_', $simplename);
//GBX class
$gbx = new GBXChallengeFetcher($filename, $tnimage, true);
//Extract thumbnail
if (!file_exists($filename)) {
file_put_contents('YourManialink/Content/Thumbnails/Maps/' . $simplename . '.jpg', $gbx->thumbnail);
    chmod('YourManialink/Content/Thumbnails/Maps/' . $simplename . '.jpg', 0777);
}
else {}
//Display Manialink
echo '
<frame posn="0 65.5 10">
<quad posn="0 0 0" sizen="34 34 0" halign="center" style="Bgs1" substyle="BgList"/>
<quad posn="0 -1.5 5" sizen="31 31 0" halign="center" image="' . $domain . '/ml/' . $ml . '/YourManialink/Content/Thumbnails/Maps/' . $simplename . '.jpg"/>
</frame>';
?> 
```

请注意，我使用的 PHP 框架有一些未在此文件中声明的变量。

# algorithm - 找到可以放置在网格中的最大项目的算法

> ID：11876373
> 
> 赞同：3
> 
> 时间：2012-08-09T03:29:14.533
> 
> 标签：algorithm

在二维空间中有一个 NXM 点网格。一个项目可以放置在 (x,y) 点，这样在 (x+2,y-2) 或 (x-2,y-2) 或 (x-2,y+2) 处不得有另一个项目) 或 (x+2,y+2)。此外，网格中很少有被卡住的点，即无法将项目放置在这些点中。

那么如何找到可以放置在网格中的最大项目数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:13:07.847

考虑一个更简单的一维问题：给定一个包含阻塞单元格的长度数组，`n`有多少种方法可以用这样的方法填充它，如果 1 处有 1，则和`x`处没有 1 。`x - 2``x + 2`

请注意，这是一个冗余条件：如果我们有一个 1 at `x`，那么没有 1 就足够了`x - 2`（如果有一个 1 at `x + 2`，那将打破这个简化的条件）。

让`dp[i, j] = number of ways to populate 1 .. i with points such that the last element is j`.

我们有：

```
dp[i, 0] = dp[i - 1, 0] + dp[i - 1, 1] <- no 1 at i
dp[i, 1] = 2 * dp[i - 2, 0] <- we MUST have 0 at i - 2, but i - 1 can have whatever
=> if i is blocked dp[i, _] = dp[i - 1, _] 
```

例子：

```
n = 3
brute force solutions:
000
010
100
001
110
011
=> 6
dp[0, 0] = 1 dp[0, 1] = 0
dp[1, 0] = 1 dp[1, 1] = 1
dp[2, 0] = 2 dp[2, 1] = 2
dp[3, 0] = 4 dp[3, 1] = 2
=> dp[3, 0] + dp[3, 1] = 6 
```

同样可以用于您的问题。请注意，条件可以简化为**“如果 (x - 2, y - 2) 和 (x + 2, y - 2) 处没有点，则 (x, y) 处可能有一个点”**。然后只需迭代并填写您的 dp 矩阵`O(lines*columns)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T04:10:01.370

我认为将网格视为圆环是说明性的，即侧面“环绕”（顶部->底部，左侧->右侧），以便您可以忽略边缘情况。当 N 和 M 很大时，无论如何这是一个很好的近似值。

在环面上，每个点必然会阻止其他两个点存在，但您可以重叠排除项，即一个点`(x+2, y-2)`是另一个点`(x+2, y-2)`。所以你可以达到的最大包装是 1/2。这可以通过交替列条来实现：2 个完整列、2 个空列、2 个完整列等。

我将保留极端情况（M 不是 4 的倍数）。

在不是圆环的网格上，您有两个考虑因素。首先，您可以将完整的列直接启动到网格的边缘。您也可以完全填充底部的两行（“底部”是最小的 y）。因此，您可以实现比 1/2 稍好一些的打包，但是当尺寸接近无穷大时，您仍然会得到 1/2。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T03:48:38.927

没有这些阻塞点的最佳填料是放置在柱子上

```
(a + 0), (a + 3), (a + 6), ..., (a + 3*n) 
```

只要这些列存在块，就无法进行改进。如果列上存在块，在 (x, y) 处，您可以在 (x+2, y-2) 和 (x-2, y-2) 上放置点。因此，查看所有列并尝试放置它们以**最小化**列上的块数。（注意这之前说的是最大化。我昨晚也睡了 3 小时）

检查这可以在 n*m 步骤中完成。

# eclipse - ubuntu 上的 Eclipse：我的配置中缺少什么？

> ID：11876374
> 
> 赞同：0
> 
> 时间：2012-08-09T03:29:24.633
> 
> 标签：eclipse, web-applications, eclipse-plugin, ubuntu-12.04

我正在尝试按照[这些](http://lackovic.wordpress.com/2012/05/31/set-up-eclipse-and-tomcat-7-on-ubuntu-12-04-to-create-java-restful-web-services-with-jersey/)说明在 ubuntu 12.04 下设置 java 开发环境。

但是，我认为我的配置中缺少一些东西。

我安装了eclipse，在第2步中添加了Web、XML和java开发包。默认的JVM是：

```
java version "1.6.0_24"
OpenJDK Runtime Environment (IcedTea6 1.11.3) (6b24-1.11.3-1ubuntu0.12.04.1)
OpenJDK Server VM (build 20.0-b12, mixed mode) 
```

Tomcat 已安装，我可以从 localhost:8080 查看并运行示例

但是当我尝试添加新服务器（第 4 步）时，首选项下没有“服务器”；当我创建一个新的“动态 Web 项目”（第 5 步）时，那里没有选项。

当我尝试切换视角时，我所拥有的只是“CVS 存储库探索”、“调试”、“资源（默认）”和“团队同步”。

我显然遗漏了一些东西（希望很简单） - 但为什么我似乎无法为 Java 开发做好准备？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T03:35:23.133

您可能下载了错误的 Eclipse 版本/没有安装足够的软件包。

您是否下载了 Eclipse for Java 或 Eclipse for Java EE Developers？我相信服务器只包含在 Eclipse for Java EE 中。

我建议不要尝试添加额外的包，而是直接获取 Java EE 版本。它会附带您需要的所有其他 XML 和 Web 包，以及任何其他缺少的依赖项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T04:39:26.993

好的，所以我尝试从全新安装开始。我使用软件中心删除了eclipse，然后手动删除了/etc/eclipse.ini

我还删除了我的默认工作区 (~/workspace) 和 .eclipse

然后我重新安装了 Eclipse，并按照[这个](https://askubuntu.com/questions/56104/how-can-i-install-oracle-java-jre-7)安装了 oracle java 7。

[有一个问题，按照这个](https://stackoverflow.com/questions/10165693/ubuntu-eclipse-cannot-load-swt-libraries-not-opening)问题中的步骤解决了。

然后，我从 Help->Install New Software 安装了 Web、XML 和 Java EE 插件，它似乎可以工作。

# maven - 如何使用 Maven 让正确的 application.xml 文件出现在我的 EAR 文件中？

> ID：11876378
> 
> 赞同：1
> 
> 时间：2012-08-09T03:30:03.723
> 
> 标签：maven, ear, maven-ear-plugin

我将 Maven 3.0.3 与 Maven EAR 插件 (v2.7) 一起使用。我无法在我的 EAR 发行版中获取正确的 application.xml 文件。尽管正确生成了 target/application.xml ...

```
<!DOCTYPE application PUBLIC
    "-//Sun Microsystems, Inc.//DTD J2EE Application 1.3//EN"
    "http://java.sun.com/dtd/application_1_3.dtd">
<application>
  <display-name>Orders</display-name>
  <description>Runs periodic jobs to process DIDO orders.</description>
  <module>
    <java>lib/myclient-1.0-SNAPSHOT.jar</java>
  </module>
</application> 
```

实际插入我的 EAR 文件（在 META-INF 目录中）的 application.xml 文件是

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE application PUBLIC "-//Sun Microsystems, Inc.//DTD J2EE Application 1.3//EN" "http://java.sun.com/dtd/application_1_3.dtd">
<application id="Application_ID">
    <display-name>orders-ear</display-name>
</application> 
```

是什么赋予了？下面是我的 EAR 项目的 pom.xml 文件

```
<project>
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <groupId>org.mainco.myco</groupId>
        <artifactId>orders</artifactId> 
        <version>1.0-SNAPSHOT</version>
    </parent>
    <artifactId>orders-ear</artifactId>
    <name>Orders :: Enterprise Application</name>
    <packaging>ear</packaging>
    <description>Orders EAR</description>

<dependencies>
    <dependency>
        <groupId>org.mainco.myco</groupId>
        <artifactId>myclient</artifactId>
        <version>1.0-SNAPSHOT</version>
    </dependency>
</dependencies>

<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-ear-plugin</artifactId>
            <version>2.7</version>
            <configuration>
                <displayName>Orders</displayName>
                <description>Runs periodic jobs to process DIDO orders.</description>
                <defaultLibBundleDir>lib</defaultLibBundleDir> 
                <modules>
                    <jarModule>
                        <groupId>org.mainco.myco</groupId>
                        <artifactId>myclient</artifactId>
                        <includeInApplicationXml>true</includeInApplicationXml>
                    </jarModule>
                </modules>
            </configuration>
        </plugin>       
    </plugins>
</build>
</project> 
```

如何让我的 EAR 包含正确的 application.xml 文件？谢谢， - 戴夫

# android - Android - 下载管理器 NullPointerException

> ID：11876383
> 
> 赞同：0
> 
> 时间：2012-08-09T03:30:42.590
> 
> 标签：android, nullpointerexception, download-manager

我正在尝试在我当前的 Android 项目中实现 DownloadManager 从 URL 下载 mp3。我使用的 Android SDK 版本是 2.3.3。甚至通过单击按钮开始下载。从那里将一个字符串传递给 downloadPodcast 方法以开始下载。我遇到的问题是尝试开始下载时出现空指针异常。我已经通过调试器并验证了 URL 字符串已正确传递给此方法并包含有效的字符串值。失败的特定行是：

```
downloadId= dm.enqueue(new DownloadManager.Request(Uri.parse(podcastUrl)) 
```

调试后，我相信我已将其范围缩小到“dm”。即使在我相信是在 onCreate 方法中正确初始化它之后，此项的值也始终为“null”。我已经查看了几个示例，并相信我正在正确地实现这一点，我只是在死胡同，不知道为什么这仍然是空的。

主要活动代码：

```
public class Podcasts extends ListActivity{

private DownloadManager dm;
private long downloadId=-1L;

@Override
public void onCreate(Bundle savedInstanceState) { 
    super.onCreate(savedInstanceState);
    setContentView(R.layout.podcasts); 

    dm = (DownloadManager)getSystemService(DOWNLOAD_SERVICE);
    registerReceiver(onComplete, new IntentFilter(DownloadManager.ACTION_DOWNLOAD_COMPLETE)); 
```

下载方式：

```
public void downloadPodcast (String podcastUrl){

    Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS).mkdir();

    downloadId= dm.enqueue(new DownloadManager.Request(Uri.parse(podcastUrl))
        .setAllowedOverRoaming(false)
        .setAllowedNetworkTypes(Request.NETWORK_MOBILE | Request.NETWORK_WIFI)
        .setDestinationInExternalPublicDir(Environment.DIRECTORY_DOWNLOADS, "test.mp3")
        .setTitle("TEST"));

} 
```

添加了 Logcat：

```
FATAL EXCEPTION: main
java.lang.NullPointerException
at tv.undignified.android.Podcasts.downloadPodcast(Podcasts.java:275)
at tv.undignified.android.Podcasts$CustomAdapter$2.onClick(Podcasts.java:218)
at android.view.View.performClick(View.java:2485)
at android.view.View$PerformClick.run(View.java:9080)
at android.os.Handler.handleCallback(Handler.java:587)
at android.os.Handler.dispatchMessage(Handler.java:92)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:3683)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T02:05:41.507

想通了问题。我在我的 onCreate 中为我的 Activity 初始化了 DownloadManager，但是试图通过这个 Activity 中的一个类来访问它，该类正在创建我的主要 Activity 的一个新实例，其中 DownloadManager 从未被初始化。

为了解决这个问题，我为我的下载 URL 创建了一个 setter 和 getter 方法，并将它从我的活动中的类传递回我的主要活动，然后调用启动下载管理器的方法。

# iphone - stringByReplacingCharactersInRange 减少 NSString 长度

> ID：11876392
> 
> 赞同：-2
> 
> 时间：2012-08-09T03:31:18.687
> 
> 标签：iphone, objective-c, xcode, ipad, nsstring

我以某种方式错误地使用了 stringByReplacingCharactersInRange，但我不明白如何。我的目标是`NSString`用另一个替换一个字符。我这样做了很多次，但是在两次替换后它从 NSString 的末尾开始切割，我不想要这个。这是我的代码。

```
 NSRange firstCharRange = NSMakeRange(mi, mi); // mi is an int, indicating the index of the replaced char

    myword = [myword stringByReplacingCharactersInRange:firstCharRange withString:bb.titleLabel.text]; // myword is the string 
```

最初`myword`是@"RRRRRRRR"，替换第一个字符串后变成

```
eRRRRRRR 
```

然后

```
egRRRRRR 
```

然后

```
eghRRRR // why did cut off the last character? 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T03:32:48.210

的第二个参数`NSMakeRange()`是长度，而不是结束索引。您可能只想传入`1`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T04:15:42.023

NSString *str =@"Hardeep_Singh";

```
NSLog(@"Before = %@",str);

str = [str stringByReplacingOccurrencesOfString:@"_" withString:@" "];

NSLog(@"After = %@",str); 
```

您可以使用它。在此我们可以将一个字符替换为 NSString 的另一个字符。可能对你有帮助。

```
NSString *myword=[NSString stringWithString:@"0123456789"];

NSLog(@"Before = %@ ",myword);

NSRange firstCharRange = NSMakeRange(1,2); 
```

// 第一个参数是起点，第二个是终点，从 0 开始，以此类推。

```
myword = [myword stringByReplacingCharactersInRange:firstCharRange withString:@"H"];

NSLog(@"After = %@ ",myword); 
```

这是你的答案可能是你的理解。

# php - 在 PHP If 语句中使用 HTML

> ID：11876396
> 
> 赞同：0
> 
> 时间：2012-08-09T03:31:37.393
> 
> 标签：php, wordpress

我在 Wordpress 中有一个 PHP 文件，其中包含一些 HTML，“登录和注册”，我只想在站点成员未登录时显示。当他们登录时，我希望它显示“欢迎，[姓名]。”

我只是不确定如何在 PHP If 语句中使用 HTML。条件是这样的：

```
<?php
      if ( member_is_logged_in() ) {
         print "Welcome [name]";
      } else {
         print "<a href="...">Login</a> | <a href="...">Register</a>";
      }
?> 
```

这就是我认为它应该看起来的样子，但它不起作用。我对 PHP 不是很好，但我会很感激任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T03:34:07.163

您可以在双引号字符串中使用 PHP 变量。所以只需将 [name] 替换为 $name 或任何变量。请注意，这*不适*用于单引号。

此外，在 else 情况下，您有两组双引号。这将导致语法错误。使其中一个单引号或转义内部引号。

```
<?php
      if ( member_is_logged_in() ) {
         print "Welcome $name";
      } else {
         print '<a href="...">Login</a> | <a href="...">Register</a>';
      }
?> 
```

您也可以只结束 PHP 标记并直接编写 HTML。

```
<?php
      if ( member_is_logged_in() ) {
         print "Welcome $name";
      } else {
?>
         <a href="...">Login</a> | <a href="...">Register</a>
<?php
      }
?> 
```

有一个更好，更容易阅读的语法：

```
<?php if(<your evaluation here>): ?>
HTML for when true
<?php else: ?>
HTML for when false
<?php endif; ?> 
```

查看[控制结构的替代语法以](http://php.net/manual/en/control-structures.alternative-syntax.php)获取更多信息。

当我们在这里时，[打印与回声，哪个更快？](http://fabien.potencier.org/article/8/print-vs-echo-which-one-is-faster)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T03:34:00.720

简单地：

```
<?php
      if ( member_is_logged_in() ) {
         print "Welcome $name";
      } else { ?>
         <a href="...">Login</a> | <a href="...">Register</a>
      <?php }
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T03:36:57.197

如果您可以使用 wordpress，请尝试以下代码：

见Utl：- [http://codex.wordpress.org/Function_Reference/wp_get_current_user](http://codex.wordpress.org/Function_Reference/wp_get_current_user)

例如：要确定当前是否有用户登录，请执行以下操作：

```
<?php
$current_user = wp_get_current_user();
if ( 0 == $current_user->ID ) {
    // Not logged in.
} else {
    // Logged in.
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T03:36:59.163

试试这个代码块，让我知道——

```
<?php
      if ( member_is_logged_in() ) {
    global $display_name;
    get_currentuserinfo();
         print "Welcome ".$display_name;
      } else {
         print "<a href="...">Login</a> | <a href="...">Register</a>";
      }
?> 
```

# xcode - Xcode：如何正确组织共享文件的提交？

> ID：11876403
> 
> 赞同：0
> 
> 时间：2012-08-09T03:32:51.877
> 
> 标签：xcode, git, version-control

我当前的 Xcode 项目使用了一些我最初在另一个 Xcode 项目中创建并添加到当前项目中的文件。

我已经从当前项目中编辑了一些添加的文件，并希望使用源代码管理来提交它们。但是，当我转到组织者时，这些提交显示在最初创建它们的项目下，而不是我当前的活动项目下。

有没有办法让这些提交也出现在我当前的活动项目中？如果没有，我是否只需将这些文件从它们的“旧”项目文件中移出并移到我当前的活动项目中（然后将这些文件重新添加回旧项目中）？如果两个项目都使用这些文件并且提交影响两个项目，这些提交只会显示在旧项目下似乎不合逻辑。

(nb This question is a follow-up / related to the following question...希望回答这个问题也能回答我之前的问题：[Xcode 卡在“Loading Revision”和“Scanning for working copies...” when using Source Control](https://stackoverflow.com/questions/11871096/xcode-stuck-on-loading-revision-and-scanning-for-working-copies-when-usin) )

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T03:58:04.650

如果您没有将文件复制到新项目目录，那么它们仍将处于另一个项目的源代码控制之下，因为它们存在于磁盘上。您要么需要将文件复制到新项目中，要么将您的其他 xcode 项目设置为您正在使用的项目的 git 子模块。这样，您只需更新一次代码，它应该反映在两个代码库的另一个项目中。

[http://git-scm.com/book/en/Git-Tools-Submodules](http://git-scm.com/book/en/Git-Tools-Submodules)

# c# - 在 C# 中打印 PDF

> ID：11876405
> 
> 赞同：0
> 
> 时间：2012-08-09T03:32:58.337
> 
> 标签：c#, pdf, printing

我正在制作一个用于打印 PDF 的 C# Windows 应用程序。

当我打开应用程序时，它只打开 Acrobat Reader 窗口而不再打印。Print() 的函数中有什么我遗漏的吗？

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Diagnostics;
using Microsoft.Win32;

namespace PrintDocumentsApplication
   {
public partial class PrintForm : Form
{
    public PrintForm()
    {
        InitializeComponent();
    }

    private void printPdfButton_Click(object sender, EventArgs e)
    {
        String File = @"C:\Documents and Settings\larasasasrylo\Desktop\QRCODE_DEMO\test.pdf";
        String Printer = "\\vhssadasdasoftaweafs\\HP Color LaserJet 5550 PCL 6";
            Print(File, Printer);
    }

    public static bool Print(string file, string printer)
    {
        try
        {

            Process.Start(
               Registry.LocalMachine.OpenSubKey(
                    @"SOFTWARE\Microsoft\Windows\CurrentVersion" +
                    @"\App Paths\AcroRd32.exe").GetValue("").ToString(),
               string.Format("/h /t \"{0}\" \"{1}\"", file, printer));

            return true;

        }
        catch { }
        return false;

    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T05:44:52.630

你试试这个

```
Process process = new Process();

process.StartInfo.FileName = pathToPdfOrDocFile; 
process.UseShellExecute = true;
process.StartInfo.Verb = "printto";
process.StartInfo.Arguments = "\"" + printerName + "\""; 
process.Start();

process.WaitForInputIdle();
process.Kill(); 
```

# jsf-2 - 将鼠标悬停在数据表的列上时不显示标题

> ID：11876407
> 
> 赞同：1
> 
> 时间：2012-08-09T03:33:18.723
> 
> 标签：jsf-2, xhtml

对于类似于下面的代码，当光标悬停在列标题上时，标题不会出现。有任何想法吗？

```
 <h:column title="COLUMN 1">
            <f:facet name="header" >COL 1</f:facet>
            <h:outputText id="col1" value="#{oneEntry.col1}" styleClass="al"/>
        </h:column>

        <h:column title="COLUMN 2">
            <f:facet name="header" >COL 2</f:facet>
            <h:outputText id="col2" value="#{oneEntry.col2}" styleClass="al"/>
        </h:column> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T05:02:16.340

该`<h:column>`标记没有 HTML 4.0 传递属性，因为 JSF 仅将这些属性生成为`<td>`元素。在 HTML 中，表格由`<td>`行内的元素组成，而列在行内隐式定义。

所以它喜欢为每一`<td>`行的每个特定元素指定标题属性。

```
<table border="1">
  <tr>
   <td title="first">Cell A1</td>
   <td>Cell B1</td>
  </tr>
  <tr>
   <td title="first">Cell A2</td>
   <td>Cell B2</td>
  </tr>
</table> 
```

因此，没有什么比在 HTML 中为列指定整体标题更重要的了，您可以为`<table>`标签指定一个标题，它不过是`<h:dataTable>`.

或者，您可以通过将标题添加到该列中的组件来为单个数据单元格添加标题，如下所示：

```
<h:column>
      <f:facet name="header" >COL 1</f:facet>
      <h:outputText id="col1" value="#{oneEntry.col1}" styleClass="al"  title="COLUMN 1"/>
</h:column>

 <h:column>
      <f:facet name="header" >COL 2</f:facet>
      <h:outputText id="col2" value="#{oneEntry.col2}" styleClass="al" title="COLUMN 2"/>
</h:column> 
```

它生成一个`<span>`包含带有 title 属性的 outputText 的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-24T11:37:09.927

如果你使用 Primefaces，你可以使用类似的代码

```
<p:column>
    <f:facet name="header">
        <h:outputText value="TYPE" title="LINK-TYPE (DIRECT,TDR,TLGA)"/>
    </f:facet>

    <h:outputText escape="false" value="#{test.getLinkType()}"/>
</p:column> 
```

我认为您的问题的解决方案是`<f:facet>`按照您在示例中所做的定义并`<h:outputText>`放入`<f:facet>`！

使用您的示例，您将获得以下代码

```
<h:column>
    <f:facet name="header">
        <h:outputText value="COL 1" title="COLUMN 1"/>
    </f:facet>
    <h:outputText id="col1" value="#{oneEntry.col1}" styleClass="al"/>
</h:column>

<h:column title="COLUMN 2">
    <f:facet name="header">
        <h:outputText value="COL 2" title="COLUMN 2"/>
    </f:facet>
    <h:outputText id="col2" value="#{oneEntry.col2}" styleClass="al"/>
</h:column> 
```

# wordpress - FOREACH 循环中的分页

> ID：11876411
> 
> 赞同：0
> 
> 时间：2012-08-09T03:34:00.440
> 
> 标签：wordpress, foreach, pagination

谁能指出我正确的方向？我试图让分页工作，因为我在页面上的条目太多（请参阅下面的示例页面链接），但完全处于杂草之中。

这是一个存档页面，它根据自定义字段（开始日期）列出自定义帖子，并在开始日期过去时将它们从列表中删除。

这是一个示例页面： http: [//www.musicfestivaljunkies.com/festival-guide/us-festivals/](http://www.musicfestivaljunkies.com/festival-guide/us-festivals/)

这是我一直在使用的代码：

```
 <?php
    /**
    * Do we need to filter by event tag?
    */
    if(is_tax('event_tags') ) :
$tag = strip_tags( get_query_var('event_tags') );

$querystr = "
    SELECT wposts.*
    FROM $wpdb->posts wposts, $wpdb->postmeta wpostmeta, $wpdb->terms wterms, $wpdb->term_taxonomy wtax, $wpdb->term_relationships wrels
    WHERE wposts.ID = wpostmeta.post_id
    AND wterms.term_id = wtax.term_id
    AND wtax.term_taxonomy_id = wrels.term_taxonomy_id
    AND wrels.object_id = wposts.ID
    AND wterms.slug = '$tag'
    ";

    else:
$querystr = "
    SELECT wposts.*
    FROM $wpdb->posts wposts, $wpdb->postmeta wpostmeta
    WHERE wposts.ID = wpostmeta.post_id";
    endif;

    // Build the rest of the query, i.e. only get events with dates, and order newest first.
$querystr .= "
AND wpostmeta.meta_key = 'Date'
AND STR_TO_DATE(wpostmeta.meta_value,'%m/%d/%Y') >= CURDATE()
AND wposts.post_status = 'publish'
AND wposts.post_type = 'events'
ORDER BY STR_TO_DATE(wpostmeta.meta_value,'%m/%d/%Y') ASC
";

$events = $wpdb->get_results($querystr, OBJECT);

if ($events):
echo '<ul>';
foreach ($events as $post):
    global $post;
    setup_postdata($post);

    // Get a friendlier version of the date.
    $date = get_post_meta($post->ID, 'Date', true);
    $date = date_create($date);
    $date = date_format($date, 'jS F, Y');
    ?>

    <li><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a> - <?php echo $date; ?></li>      
<?php endforeach;
echo '</ul>';
    endif; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T06:17:42.610

除非您尝试获取一些非常独特的数据，否则在 WordPress 中通常要避免编写自己的查询。在这种情况下，您需要查看 get_posts() 方法 ( [http://codex.wordpress.org/Template_Tags/get_posts](http://codex.wordpress.org/Template_Tags/get_posts) )。我不能 100% 确定您需要哪些参数来实现您的目标，但绝对要从查看“post_type”参数以及“meta_key”和“meta_value”开始，您可以使用它们来查找其中的帖子具有特定元值的特定自定义类型（看起来至少部分是您想要完成的）。

如果这不能让你朝着正确的方向前进，请让我知道你想要更具体地完成什么，也许我可以进一步澄清。

更新：get_posts() 文档的这一部分应该专门帮助自定义字段，作为奖励，它也使用自定义 post_type：[http ://codex.wordpress.org/Template_Tags/get_posts#Custom_Field_Parameters](http://codex.wordpress.org/Template_Tags/get_posts#Custom_Field_Parameters)

# javascript - 使用 javascript 在网页上的同一位置更新编号

> ID：11876414
> 
> 赞同：2
> 
> 时间：2012-08-09T03:34:17.727
> 
> 标签：javascript, timer, delay

有没有办法让 JavaScript 在页面的同一位置连续打印一个计数器？

```
for(var x=0; x<3000; x++){
    document.write(x + '</br>');
    document.body.innerHTML = "";
} 
```

我希望数字 x 更新并替换以前的数字，但是此代码似乎要等到循环完成才能显示数字（到那时为时已晚）

有没有办法说，打印数字 x，现在等待 100 毫秒，现在清除并在同一空间中更新 x 的新值，然后重复？

（我知道这`innerHTML`正在杀死整个页面，现在所有这些页面需要做的是运行一个计数器，所以其他元素无关紧要。我不想要的是所有这些数字的打印列表，我需要延迟)

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T03:42:54.267

JavaScript 运行时浏览器不会更新显示。要使计时器发生，您需要使用`setTimeout()`or `setInterval()`。此外，`document.write()`除非您有充分的理由使用它，否则请避免使用它（如果您不确定什么是充分的理由，则根本不要使用它）。

你想要这样的东西：

```
<body>
   <div id="counter"></div>
</body> 
```

然后：

```
window.onload = function() {
    var x = 0,
        max = 3000,
        ctr = document.getElementById("counter");

    function incrementCounter() {
       ctr.innerHTML = x;
       if (x++ < max)
           setTimeout(incrementCounter, 100);
    }

    incrementCounter();
} 
```

演示：http: [//jsfiddle.net/nnnnnn/v5hmE/](http://jsfiddle.net/nnnnnn/v5hmE/)

请注意，以上仅更新“计数器” div 的内容，因此您页面上的任何其他元素都不会受到影响。

给你的家庭作业：谷歌所有你在那个代码中不理解的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T03:41:01.830

是的！为此，我向您推荐两件事：

1.  为此目的使用容器（假设是 div）：

    并将其称为`document.getElementById('counter').innerHTML = x`

2.  在更新之前使用[javascript 计时器。](http://www.google.com.au/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&sqi=2&ved=0CE8QFjAA&url=http://www.w3schools.com/js/js_timing.asp&ei=LzEjULzLEMuaiAfs0YHYBQ&usg=AFQjCNFkWK5XLaslzcd5uM3rUtr3fyjP0Q)

希望有帮助，

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T03:45:04.503

> *...但是此代码似乎要等到循环完成后才显示数字...*

不要`for`为此使用循环。你需要一个特定的时间间隔，就像你说的那样。使用带有 a`setTimeout`和一些递归的函数：

```
var x = 0;
var speed = 100;
function update() {
  if (x <= 3000) {
    setTimeout(function() {
      // update DOM here
      x++; 
      update();
    }, speed);
  } else {
    return false;
  }
} 
```

**演示：http:** [//jsfiddle.net/elclanrs/PRC9R/](http://jsfiddle.net/elclanrs/PRC9R/)

您可以更改间隔以`9`使其看起来可信但速度更快。

```
x += 9; // instead of x++ 
```

# java - Spring 安全性：使用相对路径

> ID：11876416
> 
> 赞同：0
> 
> 时间：2012-08-09T03:34:34.280
> 
> 标签：java, spring, tomcat, spring-security

我有一个名为 test.war 的应用程序。

由于我的服务器上安装了 Apache，我必须为 Tomcat 应用程序使用另一个端口号，因此在部署此应用程序后，该应用程序可在 domain.com:8080/test/ 获得。

我决定创建一个子域，以便从 url 中删除那个丑陋的 8080，所以我按照[这里描述](https://stackoverflow.com/questions/10200204/apache-subdomain-redirect-into-tomcat)的方式设置了服务器。所以现在 test.domain.com 指的是 domain.com:8080/test/。

除了一个问题外，一切似乎都很好——因为我的应用程序不是 ROOT.war 并且我正在使用`spring:url`函数，应用程序中的每个 url 都被转换为 /test/bla-bla。所以我删除了那个功能。但是 spring security 仍然存在问题，因为它仍然会转换相对于应用程序名称的 url，即 /test/bla-bla。

我该如何解决这个问题？

谢谢

UPD：我不想将其部署为 ROOT 应用程序，因为我有两个或三个这样的应用程序，并且我想为每个应用程序创建一个子域

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T13:20:24.783

Spring Security 不会“翻译” URL。事实上，这并不是 Spring Security 特有的。任何执行重定向的应用程序都会遇到类似的问题。如果要隐藏代理后面的应用程序的上下文路径，则需要重写代理处的 URL。

我建议您阅读 Tomcat [Generic Proxy Howto](http://tomcat.apache.org/connectors-doc/generic_howto/proxy.html)和 URL 重写部分，因为它专门解决了这个问题。

# if-statement - 简单的批处理文件 if() 失败

> ID：11876422
> 
> 赞同：2
> 
> 时间：2012-08-09T03:35:00.050
> 
> 标签：if-statement, batch-file

我正在开发一个简短的批处理文件程序，该程序接受输入并进行一些简单的数学运算。除了第一个回声之外，它似乎对所有东西都正常工作。这是代码：

```
set /p usercommand= "Input:"
if "%usercommand%" equ "done" (

set /p usertimeouthours= "Input Hours: "
echo (%usertimeouthours%)

set /p usertimeoutminutes= "Input Minutes: "
echo (%usertimeoutminutes%)

set /p usertimeoutseconds= "Input Seconds: "
echo (%usertimeoutseconds%)

set /a answer= %usertimeouthours%*3600+%usertimeoutminutes%*60+%usertimeoutseconds%
echo %answer%

goto end
) else (
echo finished
goto user
)
:end 
```

为什么第一个回显只输出

> (

我的猜测是我的 if 语句有问题，有谁知道我应该如何更改它？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T04:29:22.340

**问题 1 - 变量的正常扩展与延迟扩展**
正常扩展 using`%var%`发生在解析时，整个 IF 语句被一次性解析，包括括号内的内容。因此`echo (%usertimeouthours%)`，在执行 IF 语句之前（在 SET /P 设置值之前）显示 USERTIMEOUTHOURS 的值。

解决方法是在顶部启用延迟扩展，使用`setlocal enableDelayedExpansion`和 use`!var!`而不是`%var%`. 延迟扩展发生在执行时而不是解析时。

**问题 2 - 未转义的特殊字符**如果您希望将字符视为字符串文字
，则有许多具有特殊含义的字符必须转义或引用。`^`

特殊字符之一是`)`. 它将终止任何打开的代码块，`(`除非它被转义或引用。当您在 ECHO 语句中使用它时，您需要转义该字符，`^)`因为这些语句位于带括号的代码块中。

**SET /A 语句的简化**
在 SET /A 计算中使用时不需要扩展变量。您可以简单地使用变量名而不用百分比或感叹号括起来。这种便利只适用于 SET /A。

```
@echo off
setlocal enableDelayedExpansion
set /p usercommand= "Input:"
if "%usercommand%" equ "done" (

  set /p usertimeouthours= "Input Hours: "
  echo (!usertimeouthours!^)

  set /p usertimeoutminutes= "Input Minutes: "
  echo (!usertimeoutminutes!^)

  set /p usertimeoutseconds= "Input Seconds: "
  echo (!usertimeoutseconds!^)

  set /a answer= usertimeouthours*3600+usertimeoutminutes*60+usertimeoutseconds
  echo !answer!

  goto end
) else (
  echo finished
  goto user
)
:end 
```

# grails - 无法设置只读属性：参数

> ID：11876423
> 
> 赞同：0
> 
> 时间：2012-08-09T03:35:20.440
> 
> 标签：grails, params

我正在尝试保存图片并返回它的访问网址，但系统抛出有关参数的异常：'cannot set readonly property: params'

```
def upload() {
    def attachmentInstance = new Attachment(utype:params.type, udata:params.data)
    if (!attachmentInstance.save(flush: true)) {
        render(view: "create", model: [attachmentInstance: attachmentInstance])
        return
    }

    def subMap = [url:"${createLink(controller:'attachment', action:'renderImg', params:'[id:${attachmentInstance.id}]')}", width:0, height:0]

    def jsonMap = [id:attachmentInstance.id, type:"image", thumbnail:"", data:subMap]

    def result = [result:jsonMap]

    render result as JSON
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T04:20:07.003

它看起来有点过于复杂，你可以试试：

```
def subMap = [url:createLink(controller:'attachment', action:'renderImg', params:[id:attachmentInstance.id]), width:0, height:0] 
```

# c++ - 头文件包含循环和多重定义

> ID：11876434
> 
> 赞同：0
> 
> 时间：2012-08-09T03:37:27.887
> 
> 标签：c++, include-guards, multiple-definition-error

我有一个`util.h`包含一个函数，它将用于`a.h`和'bh'，以及更多，`a.h`并将`b.h`相互包含以访问彼此定义的一些类。

```
//util.h

#ifndef _UTIL_H_
#define _UTIL_H_

#include <iostream>

void foo()
{
    std::cout << "foo\n";
}

#endif

//a.h, it has a a.cpp
#ifndef _A_H_
#define _A_H_

#include "util.h"
#include "b.h"

//some classes' definition

#endif

//b.h, it has a b.cpp
#ifndef _B_H_
#define _B_H_

#include "util.h"
#include "a.h"

//some classes' definition

#endif 
```

我的问题是，我得到`multiple definition`了`foo`. 如何？

我认为问题可能是，`a.h`包括`util.h`和`b.h`，并再次`b.h`包括，所以我得到了多个 def 错误。`util.h`但这似乎没有意义，因为`util.h`我写了`#ifndef/#define`守卫。

任何人都可以给我帮助，谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T04:02:20.057

您的问题是由*定义*而不是简单地在内部*声明引起的* `foo``utils.h`

对于这个例子，假设我们有：

**a.cpp**

```
#include "a.h" 
```

**b.cpp**

```
#include "b.h" 
```

**主文件**

```
#include "a.h"
#include "b.h"
#include "utils.h"

int main(){
    foo();
    return 0;
} 
```

在预处理之后，但在编译之前，您的文件现在看起来像这样（这是一个简化，但您明白了）：

**a.cpp**

```
void foo()
{
    std::cout << "foo\n";
} 
```

**b.cpp**

```
void foo()
{
    std::cout << "foo\n";
} 
```

**主文件**

```
void foo()
{
    std::cout << "foo\n";
}

int main(){
    foo();
    return 0;
} 
```

现在，当您编译时，您有 3 个定义`foo`（它们都是相同的，但这无关紧要）。编译后，链接器无法知道为任何给定的调用选择哪个定义，`foo`因此会产生错误。

而不是`foo`在标题中定义，而是在其中定义它`utils.cpp`并且只在其中放置一个声明`utils.h`，例如

**实用程序.h**

```
#ifndef _UTIL_H_
#define _UTIL_H_

void foo();

#endif 
```

或者，或者，声明`foo`为`static`or `inline`：

**实用程序.h**

```
#ifndef _UTIL_H_
#define _UTIL_H_

static void foo()
{
    std::cout << "foo\n";
}

/* OR */

inline void foo()
{
    std::cout << "foo\n";
}

#endif 
```

只有当您想[内联](http://en.wikipedia.org/wiki/Inline_function)您的函数时，您才需要这样做。在这种情况下，编译器*需要*在每个使用它的翻译单元中定义函数，因为它本质上变成了编译时宏。

# java - 深拷贝二维数组

> ID：11876436
> 
> 赞同：0
> 
> 时间：2012-08-09T03:37:40.687
> 
> 标签：java, generics, data-structures, multidimensional-array

我一直在尝试对二维数组进行深度复制，但从未成功。这是我的代码。

```
class node {
    public node head;
    public node left;
    public node right;
    public node up;
    public node down;
}

node[][] OriginalArrayOfNode = new node[100][200];

//filling original node
for (int n = 0; n < 200; n++) {
     for(int m = 0; m < 100; m++) {
        OriginalArrayOfNode[m][n].head = OriginalArrayOfNode[m][0];
        OriginalArrayOfNode[m][n].left = ...
        //etc
     }
}

node[][]CopyArrayOfNode = new node[100][200];
//The code to copy the original array to new array should be here. 
```

我的问题是如何将我的 OriginalArrayOfNode 复制到 CopyArrayOfNode ？提前致谢。

**编辑 ：**

我试图为 Knuth 的 Dancing Link 算法制作一个带有 4 个指针的循环双向链表的副本。很难追踪问题出在哪里，但我假设如果原始数组给出“x”作为 Knuth 的 DL 算法的结果，那么原始数组的正确深层副本也会给出“x”作为结果，前提是没有其他变量变化且没有随机修饰符。但是，我尝试了 clone() 方法、arrayutil.copy() 方法，但根据我上面的假设，它们都没有给出“正确”的深层副本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T03:45:28.593

在我看来，您正在以一种非常奇怪的方式复制它；几乎就像您试图以错误的方式复制一样。

我会更像这样：

```
for (int m = 0; n < 200; m++) {
     for(int n = 1; n < 100; n++) {
        OriginalArrayOfNode[m][n].head = OriginalArrayOfNode[m][0].head;
        OriginalArrayOfNode[m][n].left = OriginalArrayOfNode[m][0].left;
        //etc
     }
} 
```

*注意：你应该从 1 开始 n，因为你从 0 复制到其他人。*

然而，我建议你做的是在你的类节点中添加一个`clone()`方法。然后克隆将提供原始类的精确副本。

```
class node {
    public node head;
    public node left;
    public node right;
    public node up;
    public node down;

    public node clone() {
        final node clonedNode = new node();
        node.head = this.head;
        node.left = this.left;
        node.right = this.right;
        node.up = this.up;
        node.down = this.down;
    }
}

for (int n = 1; n < 200; n++) {
    OriginalArrayOfNode[n] = OriginalArrayOfNode[m].clone(); } 
```

这根本不是确切的代码，但你明白我的意思。

最后，要注意的另一件事是，如果您尝试以您正在做的方式进行深度复制，您可以轻松地从索引 1 到 200 使用`ArrayUtil.copy(...)`.

希望这一切都有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T06:29:20.800

我假设`OriginalArrayOfNode`包含节点引用同一数组中的其他节点？在这种情况下，您将无法进行深度复制，除非您加强`node`数据结构以包含其自己的二维索引。例如，如果 `OriginalArrayOfNode[0][0].right`碰巧引用`OriginalArrayOfNode[15][27]`，您将无法确定`[15][27]`在将结果分配给之前需要从旧数组到新数组的索引的深层复制，`CopyArrayOfNode[0][0].right`除非您使用对象标识彻底搜索旧数组.

即使您可以忍受对所有节点进行蛮力搜索，或者您可以修改`node`数据结构以包含其自己的索引，也可能会通过跟踪这些链接形成循环，从而使任何尝试确定正确顺序的尝试变得非常复杂复制东西。如果你能保证有一定的链接链可以遵循不会导致循环，并且你可以有效地确定每个节点的二维索引，你可能会有机会。

# css - dojo中tabContainers的高度

> ID：11876445
> 
> 赞同：3
> 
> 时间：2012-08-09T03:39:39.657
> 
> 标签：css, layout, dojo

我正在使用 Dojo tabContainer。快速的问题：如果您正在处理 Dojo 容器，您是否必须在 CSS 中以像素为单位指定小部件的大小*？*从我所看到的，让 T​​abContainer 实际显示的唯一方法是通过 CSS 给它一个绝对大小。

**更新：**我发现元素`body`和`html`缺少`height`属性，因此它被计算为 0。所以，现在如果我将它们设置为 100%，我将显示表单......但是，它会很大！（只要页面）。这个想法是将它的高度设置为`auto`，这样它就“只要它需要”......这甚至可能吗？

在我的 HTML 中，我有类似的内容：

```
...
<body>
  <div id="loginForm"> </div>
</body>
... 
```

然后我在代码中：

```
require(["app/widgets/LoginForm"], function( loginForm){
  // Create the "application" object, and places them in the right spot.
  loginForm = new LoginForm( {} , 'loginForm');
  loginForm.startup();
}); 
```

LoginForm 是一个简单的基于模板的小部件，具有以下模板：

```
<div data-dojo-attach-point="tabContainer" data-dojo-type="app.TabFading" data-dojo-props="tabPosition:'top'" style="height:100%">         

  <div data-dojo-type="dijit.layout.ContentPane" data-dojo-attach-point="loginPane" data-dojo-props="title: 'Login'">
    <form data-dojo-type="dijit.form.Form" data-dojo-attach-point="loginForm" method="POST">
      <label for="${id}_login">Login</label>
      <input name="login" id="${id}_login" data-dojo-attach-point="login" data-dojo-type="dijit.form.ValidationTextBox" data-dojo-props="required:true"/>
      <label for="${id}_password">Password</label>  
      <input name="password" id="${id}_password0" data-dojo-attach-point="password" data-dojo-type="app.ValidationPassword" />
      <input type="submit" data-dojo-attach-point="button" data-dojo-type="app.BusyButton" label="Login!" />
    </form>
  </div>
</div>
</div> 
```

CSS 是最基本的：

```
#loginForm {
 width: 300px;
 margin: 0 auto;
 padding: 20px;

 -moz-border-radius: 20px;
 -webkit-border-radius: 20px;

 /*** Background Gradient - 2 declarations one for Firefox and one for Webkit ***/
 background:  -moz-linear-gradient(19% 75% 90deg,#FCFCFC, #CCCCCC);
 background:-webkit-gradient(linear, 0% 0%, 0% 100%, from(#FCFCFC), to(#CCCCCC));

 /*** Shadow behind the box ***/
 -moz-box-shadow:0px -5px 300px #a9a0a0;
 -webkit-box-shadow:0px -5px 300px #a9a0a0;
}

body {
  background-color: #fcfcfc;
  font: 9pt/1.5em Helvetica Neue, Helvetica, Arial, sans-serif;
  margin: 0  0;
} 
```

我必须使 TabContainer 实际出现的唯一方法是`height:300px`在其中包含 - 否则，计算的高度为 0。

这就是它的本意吗？还是我做错了什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-09T12:16:56.650

如果`doLayout`在 ContentPane 或 TabContainer 上将属性设置为 false，它应该自动调整内容的高度。dijit 布局容器的`doLayout`属性默认为 true，然后需要对其应用特定的高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-22T10:25:49.317

只需将选项卡容器设置为 doLayout="false"

详细示例在这里：[https ://dojotoolkit.org/reference-guide/1.7/dijit/layout/TabContainer.html#examples](https://dojotoolkit.org/reference-guide/1.7/dijit/layout/TabContainer.html#examples)

# apache - 使用 .htaccess 重写 url 并添加反斜杠

> ID：11876454
> 
> 赞同：0
> 
> 时间：2012-08-09T03:40:28.080
> 
> 标签：apache, url, url-rewriting

我是 htaccess url 重写的新手。我有一个动态的 cms 网站。我将此网址 **http://exampl.com/?ca=home&bb=tech**重写为**http://exampl.com/home/tech/**。

htaccess 代码是：

```
 RewriteEngine On
 RewriteRule ^([^/]*)/([^/]*)/$ /?ca=$1&bb=$2 [L] 
```

当用户忘记在 url 中添加反斜杠时，它将被重定向到错误页面，例如：

```
 http://exampl.com/home/tech - redirected in to error page 
```

如何使用 htaccess 在 url 上避免并自动添加**反斜杠（/）** 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T06:31:20.020

如果要显式添加反斜杠，可以将此规则放在已有的规则之上：

```
RewriteRule ^([^/]*)/([^/]*)$ /$1/$2/ [R=301,L] 
```

否则，您可以通过添加一个**?** 根据您现有的规则：

```
RewriteRule ^([^/]*)/([^/]*)/?$ /?ca=$1&bb=$2 [L] 
```

# javascript - 使用 jQuery UI 从选择选项中获取价值

> ID：11876457
> 
> 赞同：2
> 
> 时间：2012-08-09T03:40:35.247
> 
> 标签：javascript, jquery, jquery-ui

使用 JQuery UI $('#id').combobox() 时，我无法从选择选项中获取值。当我使用没有 Ui 的简单 JQuery 时，它可以工作，但是当我使用 Ui 时，它无法获得价值。这是我的一些 HTML 代码：

```
<table>
    <tr>
        <td>Reset by: </td>
        <td>
            <select name="resetType" id="resetType">
                <option value="email" selected>Email</option>
                <option value="phone">Phone's Number</option>
                <option value="username">Username</option>
            </select>
        </td>
    </tr>
    <tr>
        <td id="type"></td>
        <td><input type="text" name="type"/></td>
    </tr>
</table> 
```

这是我的jQuery代码：

```
$(function(){
    $('#resetType').combobox(); // Code have Problem
    switch($('#resetType').val()){
    case 'email':
        $('#type').html('Email: ');
    break;
    case 'phone':
        $('#type').html('Phone: ');
    break;
    case 'username':
        $('#type').html('Username: ');
    break;
    }
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T03:47:22.930

我在`[name*="type"]`这里做是因为你没有给那个文本框一个 ID 或任何东西，所以我只是按`name`属性搜索它。

```
$('#resetType').on('change', function () {
    $('[name*="type"]').val($(this).find('option:selected').val());       
});​ 
```

这是一个工作演示：http: [//jsfiddle.net/JwB6z/2/](http://jsfiddle.net/JwB6z/2/)

# c++ - 类上的行外定义错误，但它在头文件中声明

> ID：11876459
> 
> 赞同：16
> 
> 时间：2012-08-09T03:40:47.907
> 
> 标签：c++, xcode, cocos2d-x

现在这是一个奇怪的问题。两天前我在编码，然后停下来，然后继续。在我的头文件 ( `Fruit.h`) 中，我添加了一个方法`animateGrow()`，如下所示：

水果.h：

```
class Fruit {
private:
   // Member variables here

public:
   // Other methods here
   void animateGrow( );
}; 
```

但是当我尝试在 CPP 文件中添加相同的方法时，我得到一个`Out-of-line definition of 'animateGrow' does not match any declaration in 'Fruit'`错误。它在标头中声明，但 Xcode 似乎无法找到该方法。

水果.cpp：

```
#include "SimpleAudioEngine.h"
#include "Fruit.h"
#include "Tree.h"

using namespace cocos2d;
using namespace CocosDenshion;

Fruit::Fruit( ) {
   // Constructor
}

// Getter Methods
// Setter Methods
// Other Methods

void Fruit::animateGrow( ) {
   // I get an error here when I type it.
} 
```

**完整代码**：（已删除链接）（在代码中，`Tree`该类存在，并且所有其他方法和函数都可以正常工作，但`animateGrow()`它给了我错误）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T03:54:08.100

修复。

我不知道为什么，但 Xcode 没有将我的更改保存在头文件中。我关闭了 Xcode 并打开了头文件，但更改不存在。我再次添加了方法并保存了。我打开了 CPP 文件，在其中添加了新方法，效果很好。

真的很奇怪。

# javascript - Backbone.js 分页，从 Backbone.history.fragment 中删除页码

> ID：11876462
> 
> 赞同：0
> 
> 时间：2012-08-09T03:41:15.480
> 
> 标签：javascript, backbone.js, backbone-routing

我想为我用 Backbone 编写的应用程序创建页面导航。

当我想创建页面导航时，我在创建 URL 时遇到了问题。

```
<a href="' + Backbone.history.fragment + '/some_page_number">some_page_number</a> 
```

因为 Backbone.history.fragment 将返回 path/to/1

上面的代码将返回 path/to/1/some_page_number。

虽然我希望它是

路径/到/some_page_number。

我怎么能这样。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T01:11:05.947

我的建议：

```
<a href="' + MyApp.Utils.linkToPage( some_page_number ) + '">some_page_number</a>

// code no tested
MyApp.Utils.linkToPage = function( page ) {
  return Backbone.history.fragment.replace( /\/\d*$/, "" ) + "/" + page;
} 
```

也许 RegExp 没有正确定义，但您可以提出一个想法。

# c# - 性能/风格：通过引用更改对象与在 C# 中返回副本

> ID：11876469
> 
> 赞同：1
> 
> 时间：2012-08-09T03:41:51.300
> 
> 标签：c#, .net, performance, garbage-collection, styles

首先让我提供上下文：

*在 C# 中，传递给方法的对象是通过引用传递的。仅当使用关键字重新实例化传入的对象时，引用才会丢失`new`*

*所以，我喜欢做`var obj = Alter(obj)`**（方法1）**之类的事情，即我传入一个对象并返回该对象。与执行等效操作相反：（`Alter(obj)` **方法 2）**引用对象的更改相同，除了通过引用而不是返回副本。我认为第一个更好，因为如果某些冒失的编码员后来修改代码以使用关键字“new”......现有代码不会烧毁和死亡。*

**我的问题是*方法 1会比**方法 2*使用更多的内存还是会导致任何其他性能下降？即这会更频繁地调用 GC 吗？**

> > 答案是不

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T03:59:05.377

> 在 C# 中，传递给方法的对象是通过引用传递的。仅当使用关键字 new 重新实例化传入的对象时，引用才会丢失

不，不，至少默认情况下不是。默认情况下，*所有内容*都按值传递。碰巧的是，在引用类型的情况下，按值传递的东西是引用。

因此，制作了参考的*副本*。这也反驳了第二个说法。您可以根据需要重新分配方法参数；您只是在修改副本。这也改变了您问题的含义，因为您继续说...

> 所以，我喜欢做类似 var obj = Alter(obj)(method 1)... 我认为第一个更好，因为如果某些冒失的编码员后来修改代码以使用关键字“new”...现有代码不会燃烧和死亡。

这种情况不会发生。其次，如果你和那些签入的代码完全不起作用并且他们没有测试过的程序员一起工作，你就会遇到更大的问题。但是，无论如何，在参考副本上“使用`new`关键字”是无关紧要的（至少在影响原件方面）。即使你的方法是正确的，这也会过于防御。

我的问题是；如果您的函数仅用于改变其单个输入的状态，那么为什么此方法不是开始类型的实例方法？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T03:45:42.290

C# 从不复制引用类型。如果您将*obj*传递给您的方法然后返回它，那么这与您开始使用的对象实例完全相同。

这不会给 GC 带来额外的压力。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T03:45:33.147

通常，不修改指定为方法输入的参数会更安全。至于性能，这两者之间的内存消耗差异几乎可以忽略不计，绝对不会成为您程序的性能瓶颈。这是一个未成熟优化的案例。

您应该选择更清洁、更安全的解决方案，除非您有证据表明性能差异导致程序出现问题。

# c++ - 在 Xcode 4.4 上调试 10.6

> ID：11876470
> 
> 赞同：0
> 
> 时间：2012-08-09T03:41:52.020
> 
> 标签：c++, xcode, macos, debugging, gdb

我最近一直在尝试为 Xcode 中的游戏引擎编译一个静态库。我正在使用 OS X 10.8 和 Xcode 4.4。我设法从旧的 Xcode 安装中复制了 10.6 平台。在复制了一些东西之后，我设法获得了一个可运行的 10.6 SDK，其中包含适当的标头和内容。我不得不使用 GDB 进行调试，因为 LLDB 不再喜欢 10.6。调试进行了一段时间，直到我触及了一个构建设置，不知道是哪个。进行快照还原没有解决任何问题。无论如何，现在调试真的很不稳定。会发生什么：我第一次运行应用程序时，一切正常。它启动游戏，加载静态库，断点工作，一切都很好。但在那之后，下一次运行尝试以及所有未来的尝试都会导致此错误消息：

```
Unable to find Mach task port for process-id 49069: (os/kern) failure (0x5). 
```

崩溃报告报告了这一点：

```
Thread 0 Crashed:
0   dyld                            0x8fe01030 _dyld_start + 0 
```

调试器输出除了正常之外没有显示任何信息。

有没有办法让 Xcode 4.4 为 10.6 编译并 100% 运行？

编辑：我尝试使用[http://sourceware.org/gdb/wiki/BuildingOnDarwin](http://sourceware.org/gdb/wiki/BuildingOnDarwin)中描述的技术，但错误仍然存​​在。

# java - 当您只有变量名作为字符串时获取变量的值

> ID：11876475
> 
> 赞同：0
> 
> 时间：2012-08-09T03:42:32.483
> 
> 标签：java

```
int text01=2012；
String entrance= "text01"; 
```

我怎样才能`int value(2012)`通过字符串'入口'获得'text01'？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T03:52:07.960

如果你知道类是什么，你可以使用反射：

```
public class Test
{
    int text01 = 2012;
} 
```

在其他地方，您可以通过以下方式获取该字段的值：

```
String entrance = "text01";
Test t = new Test();

Field f = t.getClass().getDeclaredField(entrance);
System.out.println("value = "+f.getInt(t));

// you can even change the value:
t.text01 = 2013;
System.out.println("value = "+f.getInt(t)); 
```

这将打印出来`2012`，然后`2013`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T04:03:45.953

整数变量`text01`和`text01`存储在字符串变量中的值是两个不同的东西。

不可能像这样获取变量的值，因为**int**变量`text01`和存储在**string**变量中的值`text01`彼此无关。

**更新：**

如果有人正在寻找一种简单的方法，使用 map 是一个不错的选择。只需将变量名称存储为键，将它们的值存储为键值

```
 Map<String, Integer> m = new HashMap<String, Integer>();

    int text01=2012;
    String entrance= "text01";

    m.put(entrance, text01); 
```

获得价值

```
m.get(entrance); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T03:52:31.263

我想你可能想要的是这样的： `public Map values = new HashMap(); values.add("text01", 2012);`

`System.out.println(values.get("text01"));`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T04:08:44.393

> int text01=2012；</p>
> 
> 字符串入口=“text01”；

2012 和 test01 是两个不同的值，具有不同的引用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T05:23:09.807

您可以为此使用 apache commons org.apache.commons.beanutils.PropertyUtils 类。

```
int text01 = 2012;
String entrance = "text01"; 
```

只需使用：如果您的类对象是 Test test = new Test();

```
Object value = PropertyUtils.getProperty(test, entrance); 
```

# python - 类返回语句不打印任何输出

> ID：11876478
> 
> 赞同：2
> 
> 时间：2012-08-09T03:42:48.257
> 
> 标签：python, class, return

我正在学习类并且`return`语句有问题（它是语句吗？我希望如此），程序什么也没打印，它只是结束而没有做任何事情。

```
class className:
    def createName(self, name):
        self.name = name
    def displayName(self):
        return self.name
    def saying(self):
        print("Hello %s" % self.name)

first = className()
second = className()

first.createName("Jack")
second.createName("Joy")

first.displayName()
second.displayName() 
```

我知道我在做一些明显错误的事情，但我真的不知道是什么。我会很感激一些帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T06:12:34.640

回答你的问题 -`return`不打印*任何*东西，但它有点令人困惑，因为交互式 python 提示*确实*打印出最后一条语句的值，例如：

```
Python 2.7.2 (default, Jun 20 2012, 16:23:33) 
[GCC 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-418.0.60)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> 1+1
2 
```

但是，如果您创建一个包含内容的文件`1+1`并将其作为 python 脚本运行，则不会打印任何内容。

既然你说你是新手，那我就给你一些关于如何改进代码的指点。

```
class className:
    def createName(self, name):
        self.name = name
    def displayName(self):
        return self.name
    def saying(self):
        print("Hello %s" % self.name) 
```

`className`有冗余，你应该重命名你的类`Name`-*[新样式](https://stackoverflow.com/questions/54867/old-style-and-new-style-classes-in-python)*类也应该总是继承`object`，所以让我们稍微改变一下你的定义：

```
class Name(object):
    def createName(self, name):
        self.name = name
    def displayName(self):
        return self.name
    def saying(self):
        print("Hello %s" % self.name) 
```

*通过覆盖 classes方法可以*自动完成**创建*某些内容。`__init__()`例如：*

 *```
class Name(object):
    def __init__(self, name):
        self.name = name
    def displayName(self):
        return self.name
    def saying(self):
        print("Hello %s" % self.name) 
```

这样你就可以在实例化你的类时初始化你的名字*，*例如

```
first = Name("Jack") 
```

其次，`display`通过重写方法以惯用方式处理，`__repr__`例如

```
class Name(object):
    def __init__(self, name):
        self.name = name
    def __repr__(self):
       return self.name
    def saying(self):
        print("Hello %s" % self.name) 
```

这样，你只需要做两件事：

```
>>> n = Name("Jack")
>>> print n
Jack 
```*

# python - python导入语句

> ID：11876483
> 
> 赞同：1
> 
> 时间：2012-08-09T03:43:16.573
> 
> 标签：python, import

在我正在查看的某些代码中，有以下语句：

```
from math import exp, sqrt, ceil 
```

但是，项目文件夹中没有名为 math 的文件夹，也没有名为 exp、sqrt 和 ceil 的模块。我的问题基本上是这些模块是从哪里导入的，我如何查看它们和其他类似的文件？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T03:48:45.560

你有一些混淆的术语。在这种情况下，`math`是模块，`exp, sqrt, ceil`是它定义的函数。通常是`from <module> import <function/class>`。`math`是一个基本模块，它包含在每个 Python 安装中。Python 有一组特定的位置来查找模块。在这种情况下，`math`将是一个用 C 编写的动态加载模块。

您可以通过以下方式找出它的来源：

```
import math
math.__file__ 
```

但是请注意，这将对解释器中内置的任何内容产生错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T03:47:20.870

您正在导入一个标准 Python 模块。有关数学模块的文档，请参见[此处](http://docs.python.org/library/math.html)，对于完整的标准库，请参见[此处。](http://docs.python.org/library/index.html)

文件系统上模块的位置因环境而异。不要费心试图在那里找到东西。只需为文档添加书签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T03:47:28.740

您看到的是[Python 标准库](http://docs.python.org/library/)。它们是通过在[PYTHONPATH](http://www.stereoplex.com/blog/understanding-imports-and-pythonpath)中搜索匹配的模块来解决的。除了 PYTHONPATH，您还可以从包含名为的文件的 python 脚本的任何子文件夹导入`__init__.py`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T03:47:46.310

该`math`模块是 Python 标准库的一部分，在任何 Python 安装中始终可用。但是，由于这些函数不是内置函数，因此确实需要导入它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T03:53:20.410

当导入名为 spam 的模块时，解释器首先搜索具有该名称的内置模块。如果没有找到，它会在变量 sys.path 给出的目录列表中搜索名为 spam.py 的文件。sys.path 从这些位置初始化：

```
- The directory containing the input script (or the current directory).
- PYTHONPATH (a list of directory names, with the same syntax as the shell variable PATH).
- the installation-dependent default. 
```

初始化后，Python 程序可以修改 sys.path。包含正在运行的脚本的目录位于搜索路径的开头，位于标准库路径之前。这意味着将加载该目录中的脚本，而不是库目录中的同名模块。除非打算更换，否则这是一个错误。有关详细信息，请参阅标准模块部分。

在 shell 中，您可以键入以下内容以获取默认的 sys.path

```
 >>> import sys
            >>> print sys.path
            ['', '/usr/lib/python2.6', '/usr/lib/python2.6/plat-linux2', '/usr/lib/python2.6/lib-tk', '/usr/lib/python2.6/lib-old', '/usr/lib/python2.6/lib-dynload', '/usr/lib/python2.6/dist-packages', '/usr/lib/python2.6/dist-packages/PIL', '/usr/lib/python2.6/dist-packages/gst-0.10', '/usr/lib/pymodules/python2.6', '/usr/lib/python2.6/dist-packages/gtk-2.0', '/usr/lib/pymodules/python2.6/gtk-2.0', '/usr/local/lib/python2.6/dist-packages'] 
```

# macos - 如何在 Mac OS (`⌥+a` ) 中按 `alt+a`/`option+a` 键绑定时禁用生成特殊字符？

> ID：11876485
> 
> 赞同：145
> 
> 时间：2012-08-09T03:43:28.027
> 
> 标签：macos, keyboard, keyboard-shortcuts, macos-big-sur

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2013-04-15T16:02:43.500

You can create a **custom keyboard mapping with option-letters all set to BLANK** using online tool [from this webpage](http://wordherd.com/keyboards/). You can create a custom mapping in several clicks out of almost any keyboard layout. Proved to work on MacOSX 10.7+ with IntelliJ Idea, Php/WebStorm, NetBeans, Eclipse.

Select **"Set blank for option key"** radio in the form, submit the form, and download a patched keyboard layout with "option" key feature disabled. I'm sharing the working file for standard US English keyboard layout:

*   [MacOS <= 10.10](https://pelam.fi/osx/USKeylayout_custom_no_alt.keylayout)
*   [MacOS >= 10.11](https://gist.github.com/haosdent/573ea124e5ea666fc576)

After enabling this custom mapping, if you type a letter with "option" key pressed, nothing is printed to text output. But, the "option key press" is triggered by OS, and detected by your IDE. So you get exactly the same behaviour as you have for other command keys!

1.  Download the key mapping file `My Layout.keylayout`.
2.  Move it to `~/Library/Keyboard\ Layouts/`
3.  Open `System Preferences` -> `Language Input Methods` (or `Keyboard` -> `Input Sources`)
4.  Go to `Input Sources` -> `(hit +)` -> `Select Others`
5.  You should find `My Layout` in the list and select it.

*Step 4 can change slightly across MacOS versions. Please be patient to find keyboard layouts list in the settings.*

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2014-06-07T17:55:50.647

Here are detailed steps to Sebastian Zaha's answer. (I ended up fumbling around a bit before I got this working).

(Alternatively [here is a ready made file by me](https://pelam.fi/osx/USKeylayout_custom_no_alt.keylayout))

1.  Download [Ukelele](http://scripts.sil.org/cms/scripts/page.php?site_id=nrsi&id=ukelele)
2.  You can run it directly from the .dmg file
3.  File -> New Based On Current Input Source (I had US selected)
4.  Click Modifiers button
5.  Select each modifier from list that have **Left Down** or **Right Down** in the **Option column**. (There could be some like **Either Down OR Up** too, but AFAIK you can leave those.)
    *   Press the minus button for each like this
6.  Go to Keyboard menu -> Set Keyboard Name
7.  Change the name somehow to make it easier to identify
8.  Go to File -> Save as
9.  Save to ~/Library/Keyboard\ Layouts/ with suffix .keylayout
10.  Log out from your Mac OS account
11.  Log back in
12.  Go to System Preferences -> Keyboard -> Input Sources
13.  Hit the + button -> Others -> Your new layout should be available
14.  Add the new layout
15.  Possibly leave original keyboard layout too and configure some nice way to switch

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2012-09-05T18:34:04.753

I was having the exact same problem, in the exact same IDE.

The solution to this is to download Ukulele from here:

[http://scripts.sil.org/cms/scripts/page.php?site_id=nrsi&id=ukelele](http://scripts.sil.org/cms/scripts/page.php?site_id=nrsi&id=ukelele)

In the application you can create a new keylayout using File -> New from current source. Pressing *Option* will show you in the place for Option-b a red colored key - meaning it's a *dead key*. Double clicking it will allow you to change it from a dead key to an output key. When prompted for the output you can put in the same thing (by pressing Option-b).

Thus it will output the same character but will not be considered a dead key, so Intellij can bind it as a shortcut.

To enable your new layout you must save it into your *~/Library/Keyboard Layouts* (it helps if you give it a new name with Keyboard -> Set Keyboard Name), and then enable it from System Preferences -> Language & Text.

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2014-11-12T20:33:00.740

Use `Ctrl-Alt-<MNEMONIC>`. IMHO much easier than having to install and configure a separate app.

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2015-12-22T05:47:32.677

I have a solution! Place a file at: `~/Library/KeyBindings/DefaultKeyBinding.dict` as:

```
/* ~/Library/KeyBindings/DefaultKeyBinding.dict */
 {
    /* Additional Emacs bindings */
    "~f" = "moveWordForward:";
    "~b" = "moveWordBackward:";
    "~<" = "moveToBeginningOfDocument:";
    "~>" = "moveToEndOfDocument:";
    "~v" = "pageUp:";
    "~d" = "deleteWordForward:";
    "~^h" = "deleteWordBackward:";
    "~\010" = "deleteWordBackward:";  /* Option-backspace */
    "~\177" = "deleteWordBackward:";  /* Option-delete */

    /* Escape should really be complete: */
    "\033" = "complete:";  /* Escape */        
} 
```

It will hide the original textual input. But you can still get that by using Ctrl-Q before the combination. So Ctrl-Q Alt-f gives me ƒ for example. In fact, I'm writing this answer with the option keybindings enabled. You can also add other keys you like! Official reference: [https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/EventOverview/TextDefaultsBindings/TextDefaultsBindings.html](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/EventOverview/TextDefaultsBindings/TextDefaultsBindings.html)

Here is a good list of things you can bind to: [https://www.hcs.harvard.edu/~jrus/site/selectors.html](https://www.hcs.harvard.edu/~jrus/site/selectors.html)

Oh, by the way, if you bind a key to an undefined action, your application will have a memory leak and your system will run out of memory in a few seconds. Tested on el capitan, in the hard way.

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2016-12-19T09:03:51.900

I had the same issue on a new Macbook with VSCode which had worked fine on my old Macbook. When I typed alt-shift-f for format I got unicode instead. I realised the difference was my old Macbook had a British keyboard setup instead of the default "ABC - Extended". Adding the British keyboard fixed the issue for me.

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-10-23T05:45:36.817

Using the Apple JRE, the Option key combinations will work as shortcuts instead of inserting special characters.

Download link: [https://support.apple.com/kb/DL1572?locale=en_US](https://support.apple.com/kb/DL1572?locale=en_US)

It's an old outdated JRE (based on Java 6) but as of October 2015 it's still what seems to work best w/ my JetBrains RubyMine installation. (Anything else, the keys go back to inserting special characters.)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-02-23T08:34:31.033

Use ABC as input method instead of ABC-Extended, then option + [char] would be able to use the application shortcut instead of showing special character.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-01-11T20:11:17.910

I have found a decent workaround. I use the software Karabiner to change my right enter key to control when held down.

So what iv done is remapped the option key to option+cmd+control, as I'm not aware of any commands that use all three modifiers. Now I can map the right shortcuts without any characters. But you could also map to additional keys if required

Add this to your private.xml: (in between root)

```
<item>
<name>Change option Key to cmd + control + option</name>
<identifier>private.optiontoelse</identifier>
<autogen>__KeyToKey__ 
    KeyCode::OPTION_L, 
    KeyCode::OPTION_L, ModifierFlag::CONTROL_L | ModifierFlag::COMMAND_L</autogen>
<autogen>__KeyToKey__ 
    KeyCode::OPTION_R, 
    KeyCode::OPTION_R, ModifierFlag::CONTROL_R | ModifierFlag::COMMAND_R</autogen>
</item> 
```

Then reload the xml and enable the option at the top of the 'Change Key' tab

[https://pqrs.org/osx/karabiner/](https://pqrs.org/osx/karabiner/)

# jquery - 使用 getGridParam 克隆 jqGrid 表（内部有子网格）显示奇怪的结果

> ID：11876487
> 
> 赞同：0
> 
> 时间：2012-08-09T03:44:06.187
> 
> 标签：jquery, jqgrid

基本上我有第一个 jqGrid 里面有一个子网格

```
jQuery("#FirstGrid").jqGrid({ 
...
subGrid: true,
...
}); 
```

我正在尝试使用克隆/复制第一个网格到另一个页面（网格）

```
var gridconfig = $("#FirstGrid").jqGrid('getGridParam');
$("#SecondGrid").jqGrid(gridconfig); 
```

问题是“SecondGrid”显示 2 列子网格可点击列

这是一个 jqGrid 错误还是我错过了什么？

更新 ：

通过打印“gridconfig”找到可能的根本原因

```
colModel":[
....
{"name":"subgrid","width":20,"sortable":false,"resizable":false,"hidedlg":true,"search":false,"fixed":true,"title":true,"hidden":false,"widthOrg":20},
....
], // first subgrid column added 
```

和

```
"subGrid":true //another subgrid column added 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T09:47:11.787

使用解决：

```
$("#SecondGrid").remapColumns(*your permutation here*); 
```

它基本上是在移动列

# asp.net-mvc-3 - 带有通配符的 Razor 视图引擎自定义路径

> ID：11876488
> 
> 赞同：3
> 
> 时间：2012-08-09T03:44:17.187
> 
> 标签：asp.net-mvc-3, razor

我需要使用模板文件 (.cshmtl) 呈现部分视图。用于渲染的模板文件将取决于各种参数。

所以路径可能看起来像

> ~views/themes/student_themes/V1/Gen.cshtml 或
> 
> ~views/themes/student_themes/V2/Gen.cshtml 或
> 
> ~views/themes/teacher_themes/V1/Gen.cshtml 或
> 
> ~views/themes/student_themes/V2/Gen.cshtml 或

V1 ， V2 等也可以达到 20 个版本目录

我已将自定义视图路径注册为

```
ViewEngines.Engines.Add(new TemplateViewEngine());
            FreeSurvey.Web.Startup.DoStartup.Run();
        }
    }
    class TemplateViewEngine : RazorViewEngine
    {
        private static string[] NewPartialViewFormats = new[] {         
        "~/Views/themes/theme_student/v2/{0}.cshtml" ,       
"~/Views/themes/theme_student/v1/{0}.cshtml" ,   
        ..
        ..
    };
        public TemplateViewEngine()
        {
            base.PartialViewLocationFormats = base.PartialViewLocationFormats.Union(NewPartialViewFormats).ToArray();
        }
    } 
```

但是，由于我有很多这样的视图路径，它会变得笨拙。有没有办法将通配符路径定义为 `"~/Views/themes/.*/.*/{0}.cshtml"`

这对我来说是一个更好的解决方案

# php - php die() 不起作用（简单代码）

> ID：11876493
> 
> 赞同：0
> 
> 时间：2012-08-09T03:45:24.043
> 
> 标签：php

我正在学习如何使用“setcookie”，但是，我无法使用以下线路，我已将所有代码粘贴在这里，如果有人可以帮帮我吗？不知道原因。非常感谢。

```
 else{ die ("hahahahahahahahahahahahahaha"); } 
```

HTML 代码

```
<form method="POST" action="">
<div class="error"><?php echo $error;?></div>
<p></p>
<label>Username: </label><br>
<input type="text" name="username"><br>
<label>Password: </label><br>
<input type="password" name="password"><br>
<input type="checkbox" name="rememberme"> Remember me<br>
<input type="submit" name="submit" value="Login"> 
```

PHP代码

```
<?
if(isset($_POST['submit'])){
    //get data
    $username = $_POST['username'];
    $password = $_POST['password'];
    $rememberme = isset($_POST['rememberme']);
    echo $rememberme;

    if($username&&$password){
    $login = mysql_query("SELECT * FROM form WHERE username='$username'");

    while ($row = mysql_fetch_assoc($login))
    {
        $db_password = $row['password'];
        if (md5($password)== $db_password)
        {
            $logstatus = TRUE;
            }
        else{
            $logstatus = FALSE; 
            }
        if ($logstatus == TRUE)
        {
            if ($rememberme == "1")
                setcookie("username", $username, time()+600);
            else if ($rememberme == "")
                $_SESSION['username'] = $username;

        echo " I am here";
        }

        else{
           die ("hahahahahahahahahahahahahaha"); //unable to get here
        }
    }

}

    else{
    echo "enter username / password";
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T03:56:57.360

试试这个代码，我没有测试过，但应该可以工作:)

```
session_start();//dont forget this :P
if(isset($_POST['submit'])){
    //get data
    $username = $_POST['username'];
    $password = $_POST['password'];
    $rememberme = isset($_POST['rememberme']);
    echo $rememberme;    
if($username&&$password){
    $login = mysql_query("SELECT * FROM form WHERE username='$username' AND password='".md5($password)."'");

        if (mysql_num_rows($login))//if this returns 1 you are logged in
        {
            if ($rememberme == "1")
                setcookie("username", $username, time()+600);
            else
                $_SESSION['username'] = $username;

                echo " I am here";              

        }else{
           die ("Incorrect Username/Password"); //unable to get here
        }
    }

}

    else{
    echo "enter username / password";
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-09T03:49:23.430

while 循环导致问题，只需将其删除即可。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-09T03:52:50.703

好吧，我没有测试代码，但尝试以下可能会有所帮助。

添加行：

```
$logstatus = TRUE; 
```

前一阵子。

理由：变量的范围在块完成后立即完成。在 while 之外定义 logstatus 将确保其范围不会在需要的地方结束。

# servlets - 地图内地图的JSTL分页

> ID：11876495
> 
> 赞同：0
> 
> 时间：2012-08-09T03:45:32.133
> 
> 标签：servlets, jdbc, collections, pagination, jstl

我需要实现简单的分页，每页显示 100 条记录，并且分页数据按日期排序。虽然我已经对信息进行了正确排序，但是我无法考虑分页逻辑，因为结果集在 map 内部，它再次在其中保存 Map，

下面是我的 JSTL 代码以及 TitleList/Title 的定义，我在其中添加结果集数据后正在对其进行迭代。

```
 Map<Date, LinkedHashMap<Integer, String>> TitleList = new LinkedHashMap<Date, LinkedHashMap<Integer, String>>();

LinkedHashMap<Integer, String> Title = new LinkedHashMap<Integer, String>();

<c:forEach items="${TitleList}" var="column"> 
            <p><c:out value="${column.key}"/></p>                      
            <c:forEach var="Title" items="${column.value}">
                <p><a href="<%=request.getContextPath()%>/Test.do?id=${Title.key}"><c:out value="${Title.value}"/></a></p>
            </c:forEach>
        </c:forEach> 
```

虽然我可以通过将结果集直接添加到列表来对其进行分页，但是这会被我正在寻找的排序顺序和功能杀死。不知何故，对于上面的代码，我需要限制每页 100 条记录，然后实现 Next 按钮，它将再次显示 100记录。感谢对此的一些想法。

更新：添加更多信息，这是我创建标题列表和标题图的 servlet 中的地图外观，

```
map = {2012-07-12={160=tstng, 159=testing}, 2012-07-10={158=test, 157=test, 156=Testing, 155=Testing, 154=Testing, 153=Testing, 152=Testing, 151=Testing, 150=Testing, 149=Testing, 148=Testing, 147=Testing, 146=Testing, 145=Testing, 144=Testing, 143=Testing, 142=Testing, 141=Teasting, 140=Teasting, 139=Testing, 138=Testing, 137=Testing , 136=Testing for testing, 135=Testing for testing, 134=Testing for Test, 133=Testing}, 2012-07-04={132=Testing for Broker}, 2012-07-03={131=Testing for Post, 130=1200 TESTIN}, 2012-07-01={129=testing}, 2012-03-30={128=upload test}, 2012-03-28={127=test}, 2012-01-08={126=1BHK flat for 1000$ at Journal Square}, 2012-01-04={125=tseting by kiran, 124=tseting by kiran, 123=tseting by kiran, 122=tseting by kiran, 121=tseting by kiran, 120=tseting by kiran, 119=tseting by kiran, 118=tseting by kiran, 117=tseting by kiran, 116=tseting by kiran, 115=tseting by kiran, 114=tseting by kiran, 113=tseting by kiran, 112=tseting by kiran, 111=tseting by kiran, 110=tseting by kiran, 109=tseting by kiran, 108=tseting by kiran, 107=tseting by kiran, 106=tseting by kiran, 105=tseting by kiran, 104=tseting by kiran}, 2012-01-02={103=testing, 102=testing, 101=testing, 100=testing, 99=testing, 98=testing, 97=testing, 96=testing, 95=testing, 94=testing, 93=testing, 92=testing, 91=testing, 90=testing, 89=testing, 88=testing, 87=testing, 86=testing, 85=testing, 84=testing, 83=testing, 82=testing, 81=testing, 80=testing, 79=testing, 78=testing, 77=testing, 76=testing, 75=testing, 74=testing}, 2011-12-09={73=The monthly consumer price index rose 4.2% from the year-ago period, reflecting a huge easing from Octoberâ??s 5.5% increase. }, 2011-12-08={72=Testing for dispplay}, 2011-11-25={71=Apartment for Rent at Journal Square for 1000$.Please see now., 70=Apartment for Rent at Journal Square for 1000$.Please see now., 69=testing, 68=AS, 67=A, 66=A, 65=q, 64=q, 63=Testing, 62=Testing}, 2011-11-24={61=testing, 60=tEST, 59=TESTING, 58=TESTING, 57=Testing, 56=Testing, 55=Testing, 54=tseting, 53=testing, 52=testing, 51=testing, 50=teting, 49=tESTING, 48=tESTING, 47=tESTING, 46=Testing, 45=TESTING, 44=TESTING, 43=tESTING}, 2011-11-23={42=Testing, 41=testing, 40=Testing, 39=tESTING, 38=TETING, 37=testing}, 2011-11-22={36=Testing, 35=Testing, 34=Testing, 33=Testing by Kiran, 32=testing, 31=Testing, 30=Testing by Kiran, 29=Testing byt kiran, 28=Testing by Kiran, 27=testing by kiran, 26=testing by kiran, 25=Testing , 24=TSETING, 23=Testing by Kiran}, 2011-11-21={22=testing, 21=Testng, 20=TESTING, 19=TESTING, 18=ESTING, 17=ESTING, 16=ESTING, 15=ESTING, 14=testing by kiran, 13=testing by Kiran, 12=Testing by Kiran, 11=testing by Kiran, 10=Testing by Kian, 9=Testing by Kiran, 8=Testing by Kiran, 7=Testing byKiran, 6=testing, 5=Test by Kiran, 4=Test by Kiran}, 2011-11-20={3=testing, 2=testing, 1=testing}} 
```

下面是 servlet 代码 I，它将在从 DB 读取后创建映射，

```
 Map<Date, LinkedHashMap<Integer, String>> TitleList = new LinkedHashMap<Date, LinkedHashMap<Integer, String>>();
            String sqld = "Select Distinct DATE(timestamp) as DATE from table ORDER BY DATE DESC LIMIT 730 ;";
            ResultSet rsd = null;
            try {
                rsd = stmt1.executeQuery(sqld);
            } catch (SQLException ex) {
                Logger.getLogger(myclass.class.getName()).log(Level.SEVERE, null, ex);
            }
            try {
                while (rsd.next()) {
                    LinkedHashMap<Integer, String> Title = new LinkedHashMap<Integer, String>();
            //        System.out.println("Testing");
                    Date Date = rsd.getDate("Date");
            //        System.out.println(Date);
                    String sql = "Select title,id from table Where DATE(timestamp) = '" + Date + "'ORDER BY id DESC";
           //         System.out.println(sql);
                    ResultSet rs = stmt.executeQuery(sql);
                    rs.last();
                    int numRows = rs.getRow();
          //          System.out.println(rs.getRow());
                    rs.beforeFirst();
                    while (rs.next()) {                                  
                        for (int i = 1; i <= numRows; i++) {
                            String title = rs.getString("title");
                            Integer id = rs.getInt("id");
                               Title.put(id, title);                         
                            TitleList.put(Date, Title);
                        }
                        System.out.println("Size of LinkedHashMap for Title  : " + Title.size());
         //               System.out.println(rs.getString("title"));
                    }

                } 
```

这是我尝试过 Richz 的东西，这是我在 dao 课上得到的东西，我做了类似下面的事情，

```
string query ="select title,id,date(timestamp) as date from table";
list<TitleList> list = new ArrayList<Titlelist>(); 
try {

 resultset rs = stmt.executeQuery(query);
    while(rs.next()){
     myclass myc = new myclass();
     myc.setcid(rs.getInt("id");
     myc.settitle(rs.getString("title");
     myc.settimestamp(rs.gettimestamp("timestamp");
     list.add(myc);
    } 
```

并在jsp中

```
<c:foreach var="Titlelist" items="${Titlelist}">
  EL for title,id and title
</c:foreach>
With this approach I can do pagination date wise along pages and data looks like below along with pagination

Date10 title10
Date10 title09

However I need data in this format,
Date 10
title10
title09 
```

我尝试做列表列表，但由于某些原因我无法做到。我正在失去列之间的关系。我的互联网搜索显示我的分页，如上面对列表所做的那样。

8 月 31 日更新详情，

Ok Richz 这里是我的 JSP，我使用的结构和你的完全相同。

```
<%@page import="java.util.LinkedHashMap"%>
<%@page import="java.util.Date"%>
<%@page import="java.util.Map"%>
<%@page import="java.util.List"%>
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@ include file="/header.jsp" %>
<%@ include file="WEB-INF/jspf/navdisplay.jspf" %>
<%@page import="java.util.ArrayList"%>
<%@page session="true" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/sql" prefix="sql" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %> 

<!DOCTYPE html>
<html>
    <head>
        <title>DB Test</title>
    </head>
    <body>
        <c:set var="dateTotal" scope="session" value="${fn:length(list)}"/>
        <c:set var="currentDate" value="${param.date}"/>
        <c:if test="${empty currentDate or currentDate < 0}">
            <c:set var="currentDate" value="0"/>
        </c:if>
        <c:if test="${dateTotal <= currentDate}">
            <c:set var="currentDate" value="${dateTotal - 1}"/>
        </c:if>
        <c:set var="perPage" scope="session"  value="10"/>
        <c:set var="pageStart" value="${param.start}"/>
        <c:if test="${empty pageStart or pageStart < 0}">
            <c:set var="pageStart" value="0"/>
        </c:if>
        <a href="?date=${currentDate - 1}">Previous Date</a>  <a  href="?date=${currentDate + 1}">Next Date</a><br/>
        Titles <a href="?start=${pageStart - perPage}"><<</a>${pageStart + 1} - ${pageStart + perPage} <a  href="?start=${pageStart + perPage}">>></a>
        <c:forEach items="${list[currentDate]}" var="item" > 
            <p><c:out value="${item.key}"/></p> 
            <c:forEach var="Title" items="${item.value}" begin="${pageStart}" end="${pageStart + perPage - 1}" >
                <p><a href="<%=request.getContextPath()%>/Test.do?id=${Title.key}"><c:out value="${Title.value}"/></a></p>   
            </c:forEach>                  
        </c:forEach>
    </body>
</html> 
```

下面是为列表生成数据的servlet，

列表列表 = 新的 ArrayList();

```
 Map<Date, LinkedHashMap<Integer, String>> TitleList = new LinkedHashMap<Date, LinkedHashMap<Integer, String>>();
    String sqld = "Select Distinct DATE(ctimestamp) as DATE from table ORDER BY DATE DESC LIMIT 730 ;";
    ResultSet rsd = null;
    try {
        rsd = stmt1.executeQuery(sqld);
    } catch (SQLException ex) {
        Logger.getLogger(sortResultshs.class.getName()).log(Level.SEVERE, null, ex);
    }
    try {
        while (rsd.next()) {
            LinkedHashMap<Integer, String> Title = new LinkedHashMap<Integer, String>();
    //        System.out.println("Testing");
            Date Date = rsd.getDate("Date");
   //         System.out.println(Date);

            String sql = "Select title,id from table Where DATE(ctimestamp) = '" + Date + "'ORDER BY id DESC";
    //        System.out.println(sql);
            ResultSet rs = stmt.executeQuery(sql);
            rs.last();
            int numRows = rs.getRow();
  //          System.out.println(rs.getRow());
            rs.beforeFirst();
            while (rs.next()) {
                //        List<String> Title = new ArrayList<String>();               
                for (int i = 1; i <= numRows; i++) {
                    String title = rs.getString("title");
                    Integer id = rs.getInt("id");
                    Title.put(id, title);
                    TitleList.put(Date, Title);                         

                }

 //               System.out.println(rs.getString("title"));
            }

             list.add(TitleList);

        } 
```

列表如下所示，

118=kiran 设置，117=kiran 设置，116=kiran 设置，115=kiran 设置，114=kiran 设置，113=kiran 设置，112=kiran 设置，111=kiran 设置，110= kiran tseting, 109=kiran tseting, 108=kiran tseting, 107=kiran tseting, 106=kiran tseting, 105=kiran tseting, 104=kiran tseting}, 2012-01-02={103=测试, 102=测试, 101=测试, 100=测试, 99=测试, 98=测试, 97=测试, 96=测试, 95=测试, 94=测试, 93=测试, 92=测试, 91=测试, 90=测试，89=测试，88=测试，87=测试，86=测试，85=测试，84=测试，83=测试，82=测试，81=测试，80=测试，79=测试，78= testing, 77=testing, 76=testing, 75=testing, 74=testing}, 2011-12-09={73=月度消费者物价指数较去年同期上涨 4.2%，反映出 10 月以来的大幅回落。增加 5.5%。},

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T15:12:02.607

请尝试此演示页面。

```
<%@ page import="java.util.*" %>
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%> 
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>
<%
  //dummy data
  List<Map> list = new ArrayList<Map>();
  long now = new Date().getTime();
  for(int i = 1; i < 4; i++){
     LinkedHashMap<Integer, String> titleMap = new LinkedHashMap<Integer, String>();
     for(int j = 1; j < 43 ;j++){
         titleMap.put(j, "title" + j);
     }
     Map<Date, LinkedHashMap<Integer, String>> dateMap = new LinkedHashMap<Date,    LinkedHashMap<Integer, String>>();
     dateMap.put(new Date(now + 1000*60*60*25* i), titleMap);
     list.add(dateMap);
 }
 pageContext.setAttribute("list", list);
%>
<c:set var="dateTotal" scope="session" value="${fn:length(list)}"/>
<c:set var="currentDate" value="${param.date}"/>
<c:if test="${empty currentDate or currentDate < 0}">
    <c:set var="currentDate" value="0"/>
</c:if>
<c:if test="${dateTotal <= currentDate}">
    <c:set var="currentDate" value="${dateTotal - 1}"/>
</c:if>
<c:set var="perPage" scope="session"  value="10"/>
<c:set var="pageStart" value="${param.start}"/>
<c:if test="${empty pageStart or pageStart < 0}">
    <c:set var="pageStart" value="0"/>
</c:if>
<a href="?date=${currentDate - 1}">Previous Date</a>  <a  href="?date=${currentDate + 1}">Next Date</a><br/>
Titles <a href="?start=${pageStart - perPage}"><<</a>${pageStart + 1} - ${pageStart + perPage} <a  href="?start=${pageStart + perPage}">>></a>
<c:forEach items="${list[currentDate]}" var="item" > 
     <p><c:out value="${item.key}"/></p> 
     <c:forEach var="Title" items="${item.value}" begin="${pageStart}" end="${pageStart + perPage - 1}" >
          <p><a href="<%=request.getContextPath()%>/Test.do?id=${Title.key}"><c:out value="${Title.value}"/></a></p>   
     </c:forEach>                  
</c:forEach> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T10:09:30.830

在这种情况下，我假设您正在检索数据库中的所有记录，现在您想要对其进行排序并在页面上一次仅显示 100 条记录。要解决此问题，您可以按照以下方法

1.  将结果存储在主数组列表中。然后使用 public List subList(int fromIndex, int toIndex) 提取前100条记录并将这些数据存储到请求范围中并在上面提到的jsp中使用它
2.  当用户单击 Next 按钮时，使用主数组列表，现在获取下一组 100 条记录，并再次显示带有新记录集的页面。确保您维护一个变量，该变量具有当前记录的 startIndex 计数。

如果您有一个大列表，以这种方式进行分页可能会影响性能，因为该列表将需要存储在会话中以供同一用户的后续请求。

# java - 将 Java 类实例绑定到 C++ 类实例

> ID：11876501
> 
> 赞同：2
> 
> 时间：2012-08-09T03:46:21.753
> 
> 标签：java, c++, java-native-interface

我正在尝试为我没有所有源代码的动态库编写一个包装器，就像大多数使用 JNI 的人似乎正在尝试做的那样。

我需要做的是使用 Java 包装类调用 C++ 类的构造函数，然后通过 Java 类的实例将该 C++ 类实例用于所有进一步的本机方法。只要 Java 类只有一个实例，只要创建一个新实例，旧的 C++ 实例就会被一个新实例覆盖，这样就可以正常工作。我必须能够创建多个实例，因为每个实例都处理一个传感器。

有什么方法可以优雅地将 Java 类实例绑定到 C++ 类实例？

免责声明：我不是 C++ 程序员，就像猴子不是人一样。即使是 C++ 端最简单的答案也可能有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T08:07:46.720

您应该熟悉对*等类*的概念。

这在 Sun（或 Oracle 挑剔的）的这本在线书籍中有详细描述：[Peer Classes](http://java.sun.com/docs/books/jni/html/stubs.html#30234)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T03:55:26.583

您可以创建 java 类 Singleton 并确保没有创建其他 java 类实例。我想这就是你可以做的解决方案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T21:37:53.837

由于完全不知道对等类，我会执行以下操作：`native void register()`在您想要配对的 Java 类中有一个（或类似的）。在 C JNI 部分，将`GlobalRef`调用`jobject`的 a 作为键存储在`std::map<jobject,NativeImplementationObject>`. 您可以`GlobalRef`通过构造函数将键设置为 C++ 对象，以简化对 JVM 的回调。在从 JVM 对任何与传感器相关的本机方法的任何后续调用中，通过与当前调用对象`NativeImplementationObject`进行比较来查找右侧。`IsSameObject`然后简单地将调用“转发”到该对象。JNI 存根实现将只是一个持有地图的瘦调度程序。当然，在适当的时候删除所有对象和全局引用（没有自动 JVM）是​​不平凡的部分，但这超出了这里可以解释的范围。

再想一想，您可能不需要地图，除非传感器的数量相当大（至少在几十个数量级），或者您愿意通过使用上述的比较谓词函数来学习一些人类技能`IsSameObject`。一个简单的结构列表也可以（对于猴子和人类）。

# objective-c - 如何将视图的触摸传递给它的父映射

> ID：11876502
> 
> 赞同：0
> 
> 时间：2012-08-09T03:46:44.413
> 
> 标签：objective-c, xcode4.2

为了表示距离，我在 MKMapview 上画了一个圆圈。

问题是圆圈妨碍了 MKMapview。当那个圆圈在附近时，我无法轻松放大或缩小 MKMapview。

我怎么能告诉那个圆圈只是将所有触摸事件传递给父级，即 MKMapview。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T04:18:43.633

看看`UIView`方法：

```
- (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event 
```

从`-hitTest:withEvent:`文档：

“如果 pointInside:withEvent: 返回 YES，则遍历子视图的层次结构；否则，忽略其视图层次结构的分支。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T04:19:39.507

如果你的圈子是 UIView 的一个实例，你可以简单地禁用它的用户交互：

```
circle.userInteractionEnabled = NO; 
```

这样圆圈就不会收到任何触摸事件，mapView 会处理它们。

# c# - .net中引用类型内的值类型的内存分配

> ID：11876503
> 
> 赞同：7
> 
> 时间：2012-08-09T03:46:58.000
> 
> 标签：c#, .net

我认为这是一个非常微不足道的问题，但我无法在网上得到明确的答案。

我有一个包含值类型和引用类型的类。考虑到类中的引用类型会在执行期间的某个时间被实例化，如何为此类的每个成员分配内存？如何为这些成员中的每一个存储和访问指针？还有哪种类型是在哪种内存结构中创建的，即堆栈或堆？

我很清楚，如果我的代码中只使用了一个值类型的变量，那么它的值和所有其他细节（如它的类型等）都存储在堆栈中。类似地，如果引用类型被实例化，那么实际对象会在堆中创建，并且指向该内存位置的指针存储在堆栈中。但是类中存在的值类型（引用类型）呢？它们存储在哪里以及如何访问它们？

我在下面给出了这样一个类的例子。参考此类的答案将非常有帮助。

```
public class Employee
{
    public int EmpNo { get; set; }
    public string EmpName { get; set; }
    public BankAccDetails AccDetails { get; set; }
}

public class BankAccDetails
{
    //Other properties here
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T03:59:39.487

> 但是类中存在的值类型（引用类型）呢？它们存储在哪里以及如何访问它们？

**值类型存储在声明它们的位置**。在您的情况下，它们将在堆上。

但是您应该看到以下有关 C# 内存管理的文章。

[值类型的真相 - Eric Lippert](https://docs.microsoft.com/en-us/archive/blogs/ericlippert/the-truth-about-value-types)

> 在桌面 CLR 上的 C# 的 Microsoft 实现中，当值是局部变量或临时值且不是 lambda 或匿名方法的封闭局部变量且方法体不是迭代器块，并且抖动选择不注册该值。

[堆栈是一个实现细节，第一部分 - Eric Lippert](https://docs.microsoft.com/en-us/archive/blogs/ericlippert/the-stack-is-an-implementation-detail-part-one)
[.NET 中的内存 - 去哪里 - Jon Skeet](https://web.archive.org/web/20160429155135/http://www.yoda.arachsys.com/csharp/memory.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T03:50:36.003

它们被初始化为其默认值，对于 int 和 float 为 0，对于 bool 为 false，对于所有其他数据类型为 null。使用默认构造函数初始化结构。另请参阅[default 关键字](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/default)来初始化泛型类型，而不知道它们是否是简单数据类型。

对象存储在堆上，每个字段都有一点空间，可以是值类型的值，也可以是其他类型的指针。它们是对齐的，这意味着对象中可能存在空间间隙。

# .net - WinDbg 地址汇总

> ID：11876516
> 
> 赞同：11
> 
> 时间：2012-08-09T03:48:24.043
> 
> 标签：.net, debugging, memory, heap-memory, windbg

随着用户负载的增加，我们在 IIS 中托管的 WCF 服务崩溃（w3wp.exe ~ 1.6 GB）。我们通过 Debug Diag 获得了转储，并在 WinDbg 中运行了此命令。这是输出：

```
0:000> !address -summary

Failed to map Heaps (error 80004005)

--- Usage Summary ---------------- RgnCount ----------- Total Size -------- %ofBusy %ofTotal
<unclassified>                         6007          57a86000 (   1.370 Gb)  85.37%   68.48%
Free                                    268          19519000 ( 405.098 Mb)           19.78%
Image                                   874           80da000 ( 128.852 Mb)   7.84%    6.29%
Stack                                  8022           64ce000 ( 100.805 Mb)   6.14%    4.92%
TEB                                    2674            a72000 (  10.445 Mb)   0.64%    0.51%
NlsTables                                 1             24000 ( 144.000 kb)   0.01%    0.01%
ActivationContextData                     4              b000 (  44.000 kb)   0.00%    0.00%
CsrSharedMemory                           1              7000 (  28.000 kb)   0.00%    0.00%
PEB                                       1              1000 (   4.000 kb)   0.00%    0.00%

--- Type Summary (for busy) ------ RgnCount ----------- Total Size -------- %ofBusy %ofTotal
MEM_PRIVATE                           16360          5dd0f000 (   1.466 Gb)  91.37%   73.30%
MEM_IMAGE                              1188           8454000 ( 132.328 Mb)   8.05%    6.46%
MEM_MAPPED                               36            974000 (   9.453 Mb)   0.58%    0.46%

--- State Summary ---------------- RgnCount ----------- Total Size -------- %ofBusy %ofTotal
MEM_COMMIT                            14613          51e17000 (   1.279 Gb)  79.75%   63.97%
MEM_FREE                                268          19519000 ( 405.098 Mb)           19.78%
MEM_RESERVE                            2971          14cc0000 ( 332.750 Mb)  20.25%   16.25%

--- Protect Summary (for commit) - RgnCount ----------- Total Size -------- %ofBusy %ofTotal
PAGE_READWRITE                         8423          475ea000 (   1.115 Gb)  69.51%   55.76%
PAGE_EXECUTE_READ                       155           69f1000 ( 105.941 Mb)   6.45%    5.17%
PAGE_READWRITE|PAGE_GUARD              5319           1f24000 (  31.141 Mb)   1.90%    1.52%
PAGE_READONLY                           364           11bc000 (  17.734 Mb)   1.08%    0.87%
PAGE_WRITECOPY                          179            a16000 (  10.086 Mb)   0.61%    0.49%
PAGE_EXECUTE_READWRITE                  109            1fd000 (   1.988 Mb)   0.12%    0.10%
PAGE_EXECUTE_WRITECOPY                   64            149000 (   1.285 Mb)   0.08%    0.06%

--- Largest Region by Usage ----------- Base Address -------- Region Size ----------
<unclassified>                               66f0000           c041000 ( 192.254 Mb)
Free                                        71c97000           4109000 (  65.035 Mb)
Image                                       51b0e000            da4000 (  13.641 Mb)
Stack                                         c90000             3d000 ( 244.000 kb)
TEB                                         7f370000              1000 (   4.000 kb)
NlsTables                                   7ffb0000             24000 ( 144.000 kb)
ActivationContextData                          70000              5000 (  20.000 kb)
CsrSharedMemory                             7f6f0000              7000 (  28.000 kb)
PEB                                         7ffd4000              1000 (   4.000 kb) 
```

我不明白的是未分类的。他们都是巨大的！我跑了`!address`，又得到了很多未分类的东西。我是 WinDbg 的初学者，所以不知道如何从这里着手处理内存泄漏。

`!heap -s`并`!gchandles`给出以下输出，这些数字看起来非常小。

```
0:000> !gchandles
GC Handle Statistics:
Strong Handles:       101224
Pinned Handles:       23
Async Pinned Handles: 2
Ref Count Handles:    4
Weak Long Handles:    0
Weak Short Handles:   0
Other Handles:        0
Statistics:
      MT    Count    TotalSize Class Name
67370460        1           12 System.Web.Hosting.AppManagerAppDomainFactory
79b5f8b4        1           16 System.Threading.RegisteredWaitHandle
7aa02d34        1           20 System.Net.TimerThread+TimerQueue
79b76668        1           20 System.Threading._ThreadPoolWaitOrTimerCallback
79b9a934        1           24 System.Threading.AutoResetEvent
79ba1b18        1           28 System.SharedStatics
6733fc00        3           36 System.Web.Hosting.ISAPIRuntime
79b9f5e8        5           60 System.Object
79b9fde8        1           84 System.ExecutionEngineException
79b9fd9c        1           84 System.StackOverflowException
79b9fd50        1           84 System.OutOfMemoryException
79b9fc0c        1           84 System.Exception
7988736c        2          136 System.Threading.OverlappedData
79b9fe34        2          168 System.Threading.ThreadAbortException
79ba3670       10          360 System.Security.PermissionSet
79ba0ec8        4          448 System.AppDomain
79b88df4       19         1520 System.Runtime.Remoting.ServerIdentity
6736eb50       54         1728 System.Web.NativeFileChangeNotification
67375ecc      489        95844 System.Web.HttpContext
79b9ffcc     2645       126960 System.Threading.Thread
79b56c28    10536       683588 System.Object[]
79baa808    87474      1749480 System.Threading._TimerCallback
Total 101253 objects
0:000> !heap -s
LFH Key                   : 0x866023d1
  Heap     Flags   Reserv  Commit  Virt   Free  List   UCR  Virt  Lock  Fast 
                    (k)     (k)    (k)     (k) length      blocks cont. heap 
-----------------------------------------------------------------------------
Virtual block: 020b0000 - 020b0000 (size 00000000)
Virtual block: 02250000 - 02250000 (size 00000000)
00080000 00000002   65536  42512  42512   1765   248     1    2  21d36   L  
00180000 00008000      64     12     12     10     1     1    0      0      
00260000 00001002    1088    628    628     24     0     1    0      0   L  
00500000 00000002    1024     20     20      2     1     1    0      0   L  
00640000 00001002     256     28     28      1     1     1    0      0   L  
00680000 00001002     256     12     12      4     1     1    0      0   L  
006c0000 00001002     256     12     12      4     1     1    0      0   L  
00700000 00001002    1280   1172   1172     42    10     1    0      0   L  
00740000 00001002     256     12     12      4     1     1    0      0   L  
00ad0000 00001002    1280    296    296      2     1     1    0      0   L  
00b10000 00001002     256     12     12      4     1     1    0      0   L  
00b50000 00001002     256     12     12      4     1     1    0      0   L  
00b90000 00001002     256     12     12      4     1     1    0      0   L  
00bd0000 00001002     256     12     12      4     1     1    0      0   L  
00c10000 00001002     256     12     12      4     1     1    0      0   L  
00c50000 00001002     256     12     12      4     1     1    0      0   L  
00dc0000 00001002     256     12     12      4     1     1    0      0   L  
00e00000 00001002     256     12     12      4     1     1    0      0   L  
00e40000 00001002     256     12     12      4     1     1    0      0   L  
00e80000 00001002     256     12     12      4     1     1    0      0   L  
00ec0000 00001002     256     12     12      4     1     1    0      0   L  
00f00000 00001002     256     12     12      4     1     1    0      0   L  
01050000 00001002    7424   4628   4628     14     4     1    0      0   L  
01090000 00001002     256     36     36      1     1     1    0      0   L  
01110000 00001002    7232   3192   3192     70    41     1    0      0   L  
01120000 00001002     256     12     12      4     1     1    0      0   L  
01160000 00001002     256    176    176      2     1     1    0      0   L  
011a0000 00001002     256     24     24      3     1     1    0      0   L  
012e0000 00001002     256     12     12      3     1     1    0      0   L  
01320000 00001002     256     12     12      4     1     1    0      0   L  
01360000 00001002     256     12     12      4     1     1    0      0   L  
013a0000 00001002     256     12     12      4     1     1    0      0   L  
013e0000 00001002     256     72     72      3     1     1    0      0   L  
01420000 00001002     256     12     12      4     1     1    0      0   L  
01460000 00001002     256    168    168      3     1     1    0      0   L  
014a0000 00001002     256     12     12      4     1     1    0      0   L  
014e0000 00001002     256     12     12      4     1     1    0      0   L  
01520000 00001002     256     12     12      4     1     1    0      0   L  
01560000 00001002     256     12     12      4     1     1    0      0   L  
01670000 00001002     256     12     12      4     1     1    0      0   L  
016b0000 00001002     256     12     12      4     1     1    0      0   L  
016f0000 00001002     256     12     12      4     1     1    0      0   L  
01730000 00001002     256     12     12      4     1     1    0      0   L  
01770000 00001002     256     12     12      4     1     1    0      0   L  
017b0000 00001002     256     12     12      4     1     1    0      0   L  
017f0000 00001002     256     12     12      4     1     1    0      0   L  
01830000 00011002     256     12     12      4     1     1    0      0   L  
01870000 00001002    1088    120    120      7     1     1    0      0   L  
01880000 00001002      64     12     12      4     1     1    0      0   L  
01890000 00001002     256     12     12      4     1     1    0      0   L  
019d0000 00001002     256     12     12      4     1     1    0      0   L  
01a10000 00001002     256    116    116      0     0     1    0      0   LFH
01a50000 00001002     256     12     12      4     1     1    0      0   L  
01b50000 00001002     256    200    200      4     0     1    0      0   L  
01bb0000 00001002    3136   1500   1500     69    41     1    0      0   L  
01bc0000 00041002     256     12     12      4     1     1    0      0   L  
01c00000 00001002    3136   1500   1500     69    41     1    0      0   L  
01c10000 00041002     256     12     12      4     1     1    0      0   L  
01c50000 00041002     256     16     16      1     1     1    0      0   L  
01e10000 00041002     256     64     64      1     1     1    0      0   L  
01ed0000 00001002    1088    424    424     20     1     1    0      0   L  
1af40000 00001002     256    152    152      0     0     1    0      0   L  
1b060000 00001002      64     48     48     40     2     1    0      0   L  
1bab0000 00001002    1280    688    688     28     2     2    0      0   L  
----------------------------------------------------------------------------- 
```

!eeheap -gc 给出以下输出：

```
0:000> !eeheap -gc
Number of GC Heaps: 4
------------------------------
Heap 0 (000e9678)
generation 0 starts at 0x3415e208
generation 1 starts at 0x340b6894
generation 2 starts at 0x026f0038
ephemeral segment allocation context: none
 segment     begin allocated  size
026f0000  026f0038  066eda74  0x3ffda3c(67099196)
336c0000  336c0038  3471a7c4  0x105a78c(17147788)
Large object heap starts at 0x126f0038
 segment     begin allocated  size
126f0000  126f0038  1272cd38  0x3cd00(249088)
Heap Size:               Size: 0x5094ec8 (84496072) bytes.
------------------------------
Heap 1 (000ea8b0)
generation 0 starts at 0x39fd9748
generation 1 starts at 0x39f13224
generation 2 starts at 0x066f0038
ephemeral segment allocation context: none
 segment     begin allocated  size
066f0000  066f0038  0a6ef668  0x3fff630(67106352)
38e00000  38e00038  3a63e8bc  0x183e884(25421956)
Large object heap starts at 0x146f0038
 segment     begin allocated  size
146f0000  146f0038  146f0048  0x10(16)
Heap Size:               Size: 0x583dec4 (92528324) bytes.
------------------------------
Heap 2 (000ebdb8)
generation 0 starts at 0x3087fedc
generation 1 starts at 0x307e8868
generation 2 starts at 0x0a6f0038
ephemeral segment allocation context: none
 segment     begin allocated  size
0a6f0000  0a6f0038  0e6ee9f4  0x3ffe9bc(67103164)
2f3b0000  2f3b0038  31acc084  0x271c04c(41009228)
Large object heap starts at 0x166f0038
 segment     begin allocated  size
166f0000  166f0038  166f0048  0x10(16)
Heap Size:               Size: 0x671aa18 (108112408) bytes.
------------------------------
Heap 3 (000ed4d0)
generation 0 starts at 0x6d1c892c
generation 1 starts at 0x6d110038
generation 2 starts at 0x0e6f0038
ephemeral segment allocation context: none
 segment     begin allocated  size
0e6f0000  0e6f0038  126ee814  0x3ffe7dc(67102684)
2b1a0000  2b1a0038  2d14311c  0x1fa30e4(33173732)
6d110000  6d110038  6d75f814  0x64f7dc(6617052)
Large object heap starts at 0x186f0038
 segment     begin allocated  size
186f0000  186f0038  186f0048  0x10(16)
Heap Size:               Size: 0x65f10ac (106893484) bytes.
------------------------------
GC Heap Size:            Size: 0x175de850 (392030288) bytes. 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T14:16:37.530

关于*unclassified*，网上很多帖子显示，在 WinDBG 的后期版本中，unclassified*条目*只是替换了之前映射到不同区域的东西。在以前版本的调试器中，您有这些[RegionUsageIsVAD, RegionUsageImage](http://social.msdn.microsoft.com/Forums/pl/windbg/thread/c8207dba-78ba-46d0-99c6-be7db06d7ead)。

在我这边，我的输出中也有很多或未*分类*的条目`!address -summary`，但这并不妨碍我以后进行调试。

不，回到你的其他结果：

根据我使用 WinDBG 的经验，如果在 MEM_COMMIT 提供 1.3Gb 时 eeheap 显示约 300Mb 的内存，则可能是本机内存泄漏。

请参阅[CodeProject](http://www.codeproject.com/Articles/31382/Memory-Leak-Detection-Using-Windbg)了解如何捕捉它。

请注意，运行时您可能没有堆栈`!heap -p -a`，因此您需要在调试之前使用适当的 gflags 运行您的进程。你可以[阅读更多关于它](http://learn.iis.net/page.aspx/1213/troubleshooting-native-memory-leak-in-an-iis-7x-application-pool/)

然后，您可能会遇到另一种更简单的重复字符串的情况。我曾经遇到过这种情况并[描述了它](http://kate-butenko.blogspot.com/2012/07/investigating-issues-with-unmanaged.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-05-30T20:00:48.673

WCF（Windows 通信基础）是一种 .NET 技术。.NET 不使用 Windows 堆管理器，因此使用任何`!heap`命令都不适用于 .NET。难怪它很小。

相反，由于垃圾收集，.NET 框架有自己的内存管理器。您已经使用正确的命令`!eeheap -gc`来显示有关 .NET 堆的信息。该命令的最后一行说：

```
GC Heap Size:            Size: 0x175de850 (392030288) bytes. 
```

所以 .NET 负责将近 400 MB 的`<unclassified>`( `<unknown>`) 内存。其余的可能是由于

*   `VirtualAlloc()`当然直接调用
*   通过大于 512 kb 的 Windows 堆管理器分配（参见[Sasha Goldshtein 的声明](http://blogs.microsoft.co.il/sasha/2015/10/23/large-win32-heap-allocations-go-directly-to-virtualalloc/)）。例如，这可能是一些 C++ 代码。处理图像或视频通常属于这一类。
*   某些版本的 MSXML
*   潜在的其他垃圾收集内存管理器，例如来自 Java 的堆管理器（猜测，我从未验证过，但 Windows 堆管理器不适用于垃圾收集）

如果这些值保持不变，则无需担心。但如果它增加，这可能表明泄漏。我个人认为这 87000 个计时器回调是潜在的来源。所有这些计时器回调在做什么？他们能完成他们的工作吗？

```
79baa808    87474      1749480 System.Threading._TimerCallback 
```

# python - 如何在 mongoengine 中使用 python 对 dict 中包含的嵌套字典或数组执行此类过滤器查询？

> ID：11876518
> 
> 赞同：8
> 
> 时间：2012-08-09T03:48:33.820
> 
> 标签：python, mongodb

假设我有以下 dict 对象：

```
{
    "a": "value of a",
    "somedict": {
        "someinfo": [
            {
                "name": "Jordan",
                "food": [
                    "fries",
                    "coke",
                    "drink"
                ]
            }
        ]
    }
} 
```

如果我想使用 mongoengine 在 python 中应用查询过滤器，我该怎么做？我在文档中看到您可以执行以下操作：

```
sample_objs_filter = Sample.objects(a='value of a') 
```

但是我将如何过滤说

```
1) "name='Jordan'" 
2)'food' contains 'fries'? 
```

如果 mongoengine 不能做到这一点，还有其他一些 mongo 库可以更好地完成这个吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-13T10:45:09.233

我建议阅读更多关于 mongodb 的[点表示法](http://www.mongodb.org/display/DOCS/Dot+Notation+%28Reaching+into+Objects%29)，了解如何查询/查看对象并返回匹配的文档。

由于您不能使用点作为关键字参数，[因此 mongoengine](https://github.com/MongoEngine/mongoengine)遵循双下划线的 django orm 样式：

```
1) Sample.objects(somedict__someinfo__name='Jordan')
2) Sample.objects(somedict__someinfo__food='Fries') 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-03-09T23:19:33.680

mongoengine 点符号可以通过以下方式在 mongoengine 中使用： Sample.objects( `__raw__`= " ***name_of_db_field*** . **key** ":"value_to_match")

假设你的班级是：

```
Class data(Document):
   field = DictField(db_field="dbfield") 
```

你存储字典：

```
{
    "a": "value of a",
    "somedict": {
        "someinfo": [
            {
                "name": "Jordan",
                "food": [
                    "fries",
                    "coke",
                    "drink"
                ]
            }
        ]
    }
} 
```

键充当对象属性，因此可以这样查询：

```
data.objects(field__a = "value of a") 
```

读起来一样

```
data.objects(__raw__ = {'dbfield.a' : 'value of a'}) 
```

对于嵌套项目，`__`作品作为点。例子

```
data.objects(field__somedict__someinfo__name="Jordan") 
```

读法相同：

```
data.objects(__raw__ = {'dbfield.somedict.someinfo.name' : 'Jordan'}) 
```

# symfony - 如何使复选框被选中？

> ID：11876526
> 
> 赞同：0
> 
> 时间：2012-08-09T03:49:29.847
> 
> 标签：symfony

我在表单生成器中有这个字段

```
->add('pay_method', 'choice', array(
            'choices' => array(
                'telnet' => 'Image',
            ),
            'expanded' => true,
            'label' => 'Способ оплаты',
        )) 
```

只有一个选项，但我怎样才能检查呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T05:24:20.297

添加`attr`索引`'checked' => 'checked'`：

```
->add('pay_method', 'choice', array(
        'choices' => array(
            'telnet' => 'Image',
        ),
        'expanded' => true,
        'label' => 'Способ оплаты',
        'attr' => array('checked' => 'checked')
    )) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T06:12:23.590

将其设置在表单用于的对象或数组上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T20:18:37.093

您可以通过在域模型中设置它来设置默认值：

```
private $pay_method = 'telnet'; 
```

或者

```
$object->pay_method = 'telnet' 
```

或通过指定字段的“数据”选项：

```
$builder->add('pay_method', 'choice', array(
    'choices' => array(
        'telnet' => 'Image',
        ...
    ),
    'data' => 'telnet',
    'expanded' => true,
    'label' => ...,
)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T07:17:46.347

好的，我是通过 JavaScript 完成的

# python - 切换到 Postgres 时使用 Django 的 loaddata 的 IntegrityError

> ID：11876530
> 
> 赞同：1
> 
> 时间：2012-08-09T03:49:48.413
> 
> 标签：python, mysql, django, postgresql

我收到以下错误：

```
IntegrityError: duplicate key value violates unique constraint "users_userprofile_pkey" 
```

我正在从 MySQL 迁移到 Postgres，因此我使用以下方法从 MySQL 数据库中转储数据：

```
python2.7 manage.py dumpdata --indent=4 --natural > dump.json 
```

当我尝试将 dump.json 加载到 Postgresql 数据库时出现错误：

```
 python manage.py loaddata dump.json 
```

我的用户/模型中有以下信号：

```
post_save.connect(create_user_profile, sender=User, dispatch_uid="user_create_profile")
post_save.connect(create_api_key, sender=User, dispatch_uid="user_create_api_key") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T22:09:14.110

我不得不注释掉 post_save 信号，然后执行 loaddata。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T04:53:39.743

问题可能是由于关键字，如果您在[这里](https://docs.djangoproject.com/en/dev/topics/serialization/#topics-serialization-natural-keys)`--natural`阅读有关转储数据自然键的文档，您会发现它存在一些适用于数据库迁移的问题。

同样[在这里](https://docs.djangoproject.com/en/1.3/topics/serialization/#deserialization-of-natural-keys)，他们讨论了这个问题的解决方案，这似乎很有趣（而且乏味）。

您始终可以尝试先添加不相互依赖的模型，以便在尝试创建另一个模型之前确保它们存在。IE：

如果你有这个模型：

```
class Person(models.Model):
    first_name = models.CharField(max_length=100)
    last_name = models.CharField(max_length=100)

    birthdate = models.DateField()

    class Meta:
        unique_together = (('first_name', 'last_name'),)

class Book(models.Model):
    name = models.CharField(max_length=100)
    author = models.ForeignKey(Person) 
```

然后先迁移 Person 类，再迁移 book 类。

另外，如果您可以发布错误，那将非常有帮助（因为我可以更具体），但我很确定问题是主键问题

# javascript - 获取可排序的项目的顺序 jquery 并为它们设置顺序

> ID：11876532
> 
> 赞同：1
> 
> 时间：2012-08-09T03:49:55.170
> 
> 标签：javascript, jquery

我对无序列表（ul）使用jquery draggble函数，并面临在更改后获取项目顺序并设置页面加载顺序的问题。假设我们有以下代码：

```
<html>
   <head>
     <script src="http://code.jquery.com/jquery-latest.js"></script>
     <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js>  </script>
     <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
   <script>
      $(document).ready(function(){

            $(".block").sortable({
            axis: 'y',
            update: function(event, ui) {// order changed
               var order = jQuery(this).sortable('toArray');
               // send this order to index.php and store it in db

            }
         });
      });
  </script>

  </head>
  <body>
      <ul class="block" type="none">
           <li id = "one">1</li>
           <li id = "two">2</li>
           <li id = "three">3</li>
           <li id = "four">4</li>
           <li id = "five">5</li>
      </ul>
  </body> 
```

第二个文件是

```
<html>
  <head>
  <script>
         $('.secondblock').sortable({axis:'y'});
      // get order from index.php and set it to .secondblock

  </script>
  </head>
    <body>
     <ul class="secondblock" type="none">
           <li id = "one">1</li>
           <li id = "two">2</li>
           <li id = "three">3</li>
           <li id = "four">4</li>
           <li id = "five">5</li>
      </ul>
    </body>
 </html> 
```

有没有可能的解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T04:24:23.613

如果您不想在我评论过的链接上使用该解决方案，您可以使用它，**更**简单：

```
function reorder(orderArray, elementContainer)
{
    $.each(orderArray, function(key, val){
        elementContainer.append($("#"+val));
    });
} 
```

**orderArray**：一个包含所有 id 的数组，按你想要的顺序排列^(（正是*sortable("toArray")*返回的内容）)

**elementContainer**：是包含您的可排序项目的 jQuery 对象。

这里有一个工作示例：http:
[//jsfiddle.net/ecP5k/1/](http://jsfiddle.net/ecP5k/1/)

# knockout.js - 更新模型块时自动更新“MODIFIED”字段

> ID：11876534
> 
> 赞同：0
> 
> 时间：2012-08-09T03:50:20.327
> 
> 标签：knockout.js, knockout-mapping-plugin

我有一个使用敲除映射映射的地址数组。当同一地址块中的任何其他字段被修改时，是否有自动将我的“修改”字段设置为“1”，而不单独订阅每个可观察成员？

示例 - [http://jsfiddle.net/bookamp/8Wc5J/11/](http://jsfiddle.net/bookamp/8Wc5J/11/)

```
"ADDR_L1": "XYZ",
"ADDR_L2": "ABC",
"ADDR_L3": "",
"SMONTH": "12",
"SDAY": "02",
"EMONTH": "06",
"EDAY": "22",
"MODIFIED" : false 
```

这是我的子模型数组中的第一个子模型。如果修改了 ADDR_L1，我想将 MODIFIED 更新为“1”。这是否可能无需订阅每个可观察成员？如果更改被还原，是否可以休息修改的标志。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T01:19:16.500

对于任何有兴趣的人，这就是我的做法 -

[http://jsfiddle.net/bookamp/8Wc5J/12/](http://jsfiddle.net/bookamp/8Wc5J/12/)

在帮助下 - [链接](https://stackoverflow.com/questions/10143682/knockoutjs-subscribe-to-property-changes-with-mapping-plugin)和[链接](http://www.knockmeout.net/2011/05/creating-smart-dirty-flag-in-knockoutjs.html)

# android - 亚马逊应用内购买

> ID：11876539
> 
> 赞同：0
> 
> 时间：2012-08-09T03:51:29.140
> 
> 标签：android, amazon, in-app

有人试过实现亚马逊的应用内购买吗？我在他们的网站上实施该示例时遇到问题。下面的例子，它给了我 INVALID_SKU 响应：

开始购买时，

`PurchasingManager.initiateItemDataRequest("DeveloperSKU-1234");`

上面的响应将通过以下代码收到：

```
public void onPurchaseResponse(final PurchaseResponse purchaseResponse) {
    Log.v(TAG, "onPurchaseResponse recieved");
    Log.v(TAG, "PurchaseRequestStatus:" + purchaseResponse.getPurchaseRequestStatus());
} 
```

不幸的是，我总是得到“PurchaseRequestStatus：INVALID_SKU”。

你们中的任何人都知道如何进行这项工作，或者您知道本教程的好网站吗？

同样在他们的[网站上](https://developer.amazon.com/sdk/in-app-purchasing/documentation/developer-guide.html)，如果我得到一个我没有得到的 INVALID_SKU，对话框应该会显示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T06:09:20.957

以下是我如何让应用内购买在 Kindle Fire 上工作（经过几个小时的努力......）

1.  adb install AmazonSDKTester.apk（在 Kindle Fire 上安装 SDKTester）
2.  在 SDCARD 目录中创建一个文件 amazon.sdktester.json（连接的 KF 在您的 Mac 上的 Finder 中显示为 SDCARD）
3.  amazon.sdktester.json 的内容 - **{ "com.yourcompany.yourpkgname.200_coins" : { "itemType": "CONSUMABLE", "price": 0.99, "title": "200 COINS", "description": "2 COINS ", "smallIconUrl": "http://www.yourcompany.com/icon.png" } }**
4.  按下 KF 上的电源按钮并按下“断开连接”按钮 - 现在 KF 不再是您 Mac 上的已安装驱动器。
5.  在 KF 上运行 AmazonSDKTester 应用程序。
6.  从 Eclipse 运行您的应用程序。确保 JSON 中的包名称与亚马逊网站上的 In App Item 包名称和**PurchasingManager.initiatePurchaseRequest("com.yourcompany.yourpkgname.200_coins");**
7.  现在您应该会看到应用内插页式广告出现了。
8.  仍然不起作用 - 在 KF 上强制关闭您的应用程序和 AmazonSDKTester；硬复位 KF ; 重新启动 Eclipse 并从步骤 1 重新启动

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T03:33:33.670

当 SKU 不匹配或未在 JSON 文件中输入时发生 INVALID_SKU。如果您使用 SDK Tester 实现您的测试应用程序，请确保您在应用程序中使用的 SKU 也必须在 JSON 文件中有一个条目。JSON 文件位于 /mnt/sdcard/ 下，名称为 amazon.sdktester.json。要求您验证您是否在设备中的此路径下创建了带有 SKU 详细信息的 JSON 文件。

管理 SKU 的一个好方法是：

1.  在应用程序的 strings.xml 文件中将 SKU 作为字符串引用——与使用任何字符串常量的方式相同。
2.  您可以使用 SDK Tester 和 amazon.sdktester.json 文件测试您的应用程序，而无需在 Developer Portal 上执行任何操作。
3.  当您准备好提交您的应用程序时（在使用 SDKTester 进行测试后），请确保您还在开发者门户上提交了您的 IAP 项目——注意拼写错误！

我们建议使用 . 对于 SKU 格式，只是因为它可以清楚地表明它是什么以及它属于什么应用程序。例如：

com.yoyodyne.beachblanketbingo.500_coins

# windows - 如何让我在 python 中的控制台不关闭？

> ID：11876545
> 
> 赞同：1
> 
> 时间：2012-08-09T03:52:41.093
> 
> 标签：windows, python-2.7

我正在从 Windows 中用 python 制作一个应用程序。当我在控制台中运行它时，它会停止、显示错误并关闭。我看不到错误，因为它太快了，我看不懂。我正在用 IDLE 编辑代码（我安装它时 python 附带的程序），当我用 python shell 运行它时，没有错误。我会从 IDLE 运行它，但是当我使用控制台时，它具有更多功能。

我不知道为什么会这样。我需要你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T03:56:40.687

从已经打开的终端运行程序。打开命令提示符并键入：

```
python myscript.py 
```

为此，您需要路径中的 python 可执行文件。只需检查如何在 Windows 上编辑环境变量，然后添加 C:\PYTHON26 （或您将 python 安装到的任何目录）。当程序结束时，它会让您回到 CMD 窗口提示符而不是关闭窗口。添加在脚本结束时等待的代码。添加...

```
raw_input() 
```

...在脚本的末尾使其等待 ENTER 键。该方法很烦人，因为您必须修改脚本，并且必须记住在完成后将其删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T03:55:25.547

从 Windows 命令提示符运行您的程序。程序完成后，它不会自动关闭。

如果您通过双击`.py`文件图标来运行程序，那么 Windows 将在您的程序完成时关闭窗口（无论它是否成功）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-29T19:22:44.207

在程序目录（即脚本所在的任何位置）中创建一个文本文件。将扩展名更改`.bat`为例如`text.bat`. 然后编辑文本文件并写入：

```
python main.exe
pause 
```

现在你可以通过双击bat文件来运行程序而无需输入命令控制台，并且**控制台窗口不会关闭**。

# excel - 如何使用 VBA 或宏将 Outlook 邮件复制到 Excel 中

> ID：11876549
> 
> 赞同：18
> 
> 时间：2012-08-09T03:52:56.197
> 
> 标签：excel, vba, outlook

我是 VBA 和宏的新手。如果有人帮助我处理 VBA 代码和宏，那将会很有帮助。

每天我会收到大约 50-60 封邮件，其中一个标准主题是：“任务已完成”。我为所有这些邮件创建了一个规则以移动到特定文件夹：“任务已完成”。

每天阅读所有 50-60 封邮件并更新所有邮件非常耗时。进入我的收件箱的所有 50-60 封邮件都有相同的主题，但来自不同的用户。邮件正文会有所不同。

我正在使用 Outlook 2010 和 Excel 2010。

![在此处输入图像描述](../Images/e76cead3104829bae294b43fe06b980b.png)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-09T05:50:10.600

由于您没有提到需要复制的内容，因此我在下面的代码中将该部分留空。

此外，您无需先将电子邮件移动到文件夹，然后在该文件夹中运行宏。您可以在收到的邮件上运行宏，然后同时将其移动到文件夹中。

这会让你开始。我已经对代码进行了注释，这样您在理解它时就不会遇到任何问题。

首先将下面提到的代码粘贴到 Outlook 模块中。

然后

1.  点击工具~~>规则和警报
2.  点击“新规则”
3.  点击“从空白规则开始”
4.  选择“当他们到达时检查消息”
5.  在条件下，单击“主题中带有特定单词”
6.  点击规则描述下的“特定词”。
7.  在弹出的对话框中键入您要检查的单词，然后单击“添加”。
8.  点击“确定”，然后点击下一步
9.  选择“将其移动到指定文件夹”**并**在同一框中选择“运行脚本”
10.  在下面的框中，指定特定文件夹以及要运行的脚本（您在模块中拥有的宏）。
11.  点击完成，你就完成了。

当新电子邮件到达时，不仅电子邮件会移动到您指定的文件夹，而且其中的数据也会导出到 Excel。

**代码**

```
Const xlUp As Long = -4162

Sub ExportToExcel(MyMail As MailItem)
    Dim strID As String, olNS As Outlook.Namespace
    Dim olMail As Outlook.MailItem
    Dim strFileName As String

    '~~> Excel Variables
    Dim oXLApp As Object, oXLwb As Object, oXLws As Object
    Dim lRow As Long

    strID = MyMail.EntryID
    Set olNS = Application.GetNamespace("MAPI")
    Set olMail = olNS.GetItemFromID(strID)

    '~~> Establish an EXCEL application object
    On Error Resume Next
    Set oXLApp = GetObject(, "Excel.Application")

    '~~> If not found then create new instance
    If Err.Number <> 0 Then
        Set oXLApp = CreateObject("Excel.Application")
    End If
    Err.Clear
    On Error GoTo 0

    '~~> Show Excel
    oXLApp.Visible = True

    '~~> Open the relevant file
    Set oXLwb = oXLApp.Workbooks.Open("C:\Sample.xls")

    '~~> Set the relevant output sheet. Change as applicable
    Set oXLws = oXLwb.Sheets("Sheet1")

    lRow = oXLws.Range("A" & oXLApp.Rows.Count).End(xlUp).Row + 1

    '~~> Write to outlook
    With oXLws
        '
        '~~> Code here to output data from email to Excel File
        '~~> For example
        '
        .Range("A" & lRow).Value = olMail.Subject
        .Range("B" & lRow).Value = olMail.SenderName
        '
    End With

    '~~> Close and Clean up Excel
    oXLwb.Close (True)
    oXLApp.Quit
    Set oXLws = Nothing
    Set oXLwb = Nothing
    Set oXLApp = Nothing

    Set olMail = Nothing
    Set olNS = Nothing
End Sub 
```

**跟进**

要从您的电子邮件正文中提取内容，您可以使用 SPLIT() 对其进行拆分，然后从中解析出相关信息。看这个例子

```
Dim MyAr() As String

MyAr = Split(olMail.body, vbCrLf)

For i = LBound(MyAr) To UBound(MyAr)
    '~~> This will give you the contents of your email
    '~~> on separate lines
    Debug.Print MyAr(i)
Next i 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-08-27T17:05:45.213

**新介绍2**

在以前版本的宏“SaveEmailDetails”中，我使用此语句查找收件箱：

```
Set FolderTgt = CreateObject("Outlook.Application"). _
              GetNamespace("MAPI").GetDefaultFolder(olFolderInbox) 
```

此后，我安装了较新版本的 Outlook，发现它不使用默认收件箱。对于我的每个电子邮件帐户，它都创建了一个单独的商店（以电子邮件地址命名），每个商店都有自己的收件箱。这些收件箱都不是默认的。

此宏将保存默认收件箱的商店名称输出到即时窗口：

```
Sub DsplUsernameOfDefaultStore()

  Dim NS As Outlook.NameSpace
  Dim DefaultInboxFldr As MAPIFolder

  Set NS = CreateObject("Outlook.Application").GetNamespace("MAPI")
  Set DefaultInboxFldr = NS.GetDefaultFolder(olFolderInbox)

  Debug.Print DefaultInboxFldr.Parent.Name

End Sub 
```

在我的安装中，这会输出：“Outlook 数据文件”。

我在宏“SaveEmailDetails”中添加了一个额外的语句，它显示了如何访问任何商店的收件箱。

**新介绍1**

许多人选择了下面的宏，发现它很有用，并直接与我联系以获得进一步的建议。在这些联系之后，我对宏进行了一些改进，因此我在下面发布了修改后的版本。我还添加了一对宏，它们一起将为具有 Outlook 层次结构的任何文件夹返回 MAPIFolder 对象。如果您希望访问默认文件夹以外的其他文件夹，这些将非常有用。

原始文本按日期引用了一个问题，该问题与较早的问题相关联。第一个问题已被删除，因此链接已丢失。该链接是[基于 Outlook 邮件更新 excel 表（已关闭）](https://stackoverflow.com/a/8699250/973283)

**原文**

这个问题的变体数量惊人：“如何将数据从 Outlook 电子邮件提取到 Excel 工作簿？” 例如，[outlook-vba] 上有两个问题，8 月 13 日提出了同一个问题。这个问题引用了我试图回答的 12 月的一个变体。

对于 12 月的问题，我给出了一个两部分的答案。第一部分是探索 Outlook 文件夹结构并将数据写入文本文件或 Excel 工作簿的一系列教学宏。第二部分讨论了如何设计提取过程。对于这个问题，Siddarth 提供了一个出色、简洁的答案，然后跟进以帮助下一阶段。

每个变体的提问者似乎无法理解的是，向我们展示数据在屏幕上的样子并不能告诉我们文本或 html 正文的样子。这个答案是试图解决这个问题。

下面的宏比 Siddarth 的更复杂，但比我在 12 月的答案中包含的要简单得多。还有更多可以添加的，但我认为这已经足够开始了。

该宏创建一个新的 Excel 工作簿并输出收件箱中每封电子邮件的选定属性以创建此工作表：

![宏创建的工作表示例](../Images/af6a1eeb813cc83b204b82bd915d8206.png)

在宏的顶部附近有一个包含八个哈希 (#) 的注释。**必须**更改该注释下方的语句，因为它标识了将在其中创建 Excel 工作簿的文件夹。

所有其他包含哈希的注释都建议进行修改以使宏适应您的要求。

如何识别要从中提取数据的电子邮件？是发送者、主题、正文中的字符串还是所有这些？这些评论为消除无趣的电子邮件提供了一些帮助。如果我正确理解了这个问题，将会有一封有趣的电子邮件`Subject = "Task Completed"`。

注释对从有趣的电子邮件中提取数据没有帮助，但工作表会同时显示电子邮件正文的文本和 html 版本（如果存在）。我的想法是，您可以看到宏将看到的内容并开始设计提取过程。

这未在上面的屏幕图像中显示，但宏在文本主体上输出两个版本。第一个版本没有改变，这意味着遵循制表符、回车、换行，并且任何非换行空格看起来都像空格。在第二个版本中，我用字符串 [TB]、[CR]、[LF] 和 [NBSP] 替换了这些代码，因此它们是可见的。如果我的理解是正确的，我希望在第二个正文中看到以下内容：

Activity[TAB]Count[CR][LF]Open[TAB]35[CR][LF]HCQA[TAB]42[CR][LF]HCQC[TAB]60[CR][LF]HAbst[TAB]50 45 5 2 2 1[CR][LF] 等等

从该字符串的原始值中提取值应该不难。

除了电子邮件的属性之外，我会尝试修改我的宏以输出提取的值。只有当我成功实现此更改时，我才会尝试将提取的数据写入现有工作簿。我还将处理过的电子邮件移动到不同的文件夹。我已经展示了必须在哪里进行这些更改，但没有提供进一步的帮助。如果您需要此信息，我将回答一个补充问题。

祝你好运。

**原文中包含的最新版本宏**

```
Option Explicit
Public Sub SaveEmailDetails()

  ' This macro creates a new Excel workbook and writes to it details
  ' of every email in the Inbox.

  ' Lines starting with hashes either MUST be changed before running the
  ' macro or suggest changes you might consider appropriate.

  Dim AttachCount As Long
  Dim AttachDtl() As String
  Dim ExcelWkBk As Excel.Workbook
  Dim FileName As String
  Dim FolderTgt As MAPIFolder
  Dim HtmlBody As String
  Dim InterestingItem As Boolean
  Dim InxAttach As Long
  Dim InxItemCrnt As Long
  Dim PathName As String
  Dim ReceivedTime As Date
  Dim RowCrnt As Long
  Dim SenderEmailAddress As String
  Dim SenderName As String
  Dim Subject As String
  Dim TextBody As String
  Dim xlApp As Excel.Application

  ' The Excel workbook will be created in this folder.
  ' ######## Replace "C:\DataArea\SO" with the name of a folder on your disc.
  PathName = "C:\DataArea\SO"

  ' This creates a unique filename.
  ' #### If you use a version of Excel 2003, change the extension to "xls".
  FileName = Format(Now(), "yymmdd hhmmss") & ".xlsx"

  ' Open own copy of Excel
  Set xlApp = Application.CreateObject("Excel.Application")
  With xlApp
    ' .Visible = True         ' This slows your macro but helps during debugging
    .ScreenUpdating = False ' Reduces flash and increases speed
    ' Create a new workbook
    ' #### If updating an existing workbook, replace with an
    ' #### Open workbook statement.
    Set ExcelWkBk = xlApp.Workbooks.Add
    With ExcelWkBk
      ' #### None of this code will be useful if you are adding
      ' #### to an existing workbook.  However, it demonstrates a
      ' #### variety of useful statements.
      .Worksheets("Sheet1").Name = "Inbox"    ' Rename first worksheet
      With .Worksheets("Inbox")
        ' Create header line
        With .Cells(1, "A")
          .Value = "Field"
          .Font.Bold = True
        End With
        With .Cells(1, "B")
          .Value = "Value"
          .Font.Bold = True
        End With
        .Columns("A").ColumnWidth = 18
        .Columns("B").ColumnWidth = 150
      End With
    End With
    RowCrnt = 2
  End With

  ' FolderTgt is the folder I am going to search.  This statement says
  ' I want to seach the Inbox.  The value "olFolderInbox" can be replaced
  ' to allow any of the standard folders to be searched.
  ' See FindSelectedFolder() for a routine that will search for any folder.
  Set FolderTgt = CreateObject("Outlook.Application"). _
              GetNamespace("MAPI").GetDefaultFolder(olFolderInbox)
  ' #### Use the following the access a non-default Inbox.
  ' #### Change "Xxxx" to name of one of your store you want to access.
  Set FolderTgt = Session.Folders("Xxxx").Folders("Inbox")

  ' This examines the emails in reverse order. I will explain why later.
  For InxItemCrnt = FolderTgt.Items.Count To 1 Step -1
    With FolderTgt.Items.Item(InxItemCrnt)
      ' A folder can contain several types of item: mail items, meeting items,
      ' contacts, etc.  I am only interested in mail items.
      If .Class = olMail Then
        ' Save selected properties to variables
        ReceivedTime = .ReceivedTime
        Subject = .Subject
        SenderName = .SenderName
        SenderEmailAddress = .SenderEmailAddress
        TextBody = .Body
        HtmlBody = .HtmlBody
        AttachCount = .Attachments.Count
        If AttachCount > 0 Then
          ReDim AttachDtl(1 To 7, 1 To AttachCount)
          For InxAttach = 1 To AttachCount
            ' There are four types of attachment:
            '  *   olByValue       1
            '  *   olByReference   4
            '  *   olEmbeddedItem  5
            '  *   olOLE           6
            Select Case .Attachments(InxAttach).Type
              Case olByValue
            AttachDtl(1, InxAttach) = "Val"
              Case olEmbeddeditem
            AttachDtl(1, InxAttach) = "Ebd"
              Case olByReference
            AttachDtl(1, InxAttach) = "Ref"
              Case olOLE
            AttachDtl(1, InxAttach) = "OLE"
              Case Else
            AttachDtl(1, InxAttach) = "Unk"
            End Select
            ' Not all types have all properties.  This code handles
            ' those missing properties of which I am aware.  However,
            ' I have never found an attachment of type Reference or OLE.
            ' Additional code may be required for them.
            Select Case .Attachments(InxAttach).Type
              Case olEmbeddeditem
                AttachDtl(2, InxAttach) = ""
              Case Else
                AttachDtl(2, InxAttach) = .Attachments(InxAttach).PathName
            End Select
            AttachDtl(3, InxAttach) = .Attachments(InxAttach).FileName
            AttachDtl(4, InxAttach) = .Attachments(InxAttach).DisplayName
            AttachDtl(5, InxAttach) = "--"
            ' I suspect Attachment had a parent property in early versions
            ' of Outlook. It is missing from Outlook 2016.
            On Error Resume Next
            AttachDtl(5, InxAttach) = .Attachments(InxAttach).Parent
            On Error GoTo 0
            AttachDtl(6, InxAttach) = .Attachments(InxAttach).Position
            ' Class 5 is attachment.  I have never seen an attachment with
            ' a different class and do not see the purpose of this property.
            ' The code will stop here if a different class is found.
            Debug.Assert .Attachments(InxAttach).Class = 5
            AttachDtl(7, InxAttach) = .Attachments(InxAttach).Class
          Next
        End If
        InterestingItem = True
      Else
        InterestingItem = False
      End If
    End With
    ' The most used properties of the email have been loaded to variables but
    ' there are many more properies.  Press F2\.  Scroll down classes until
    ' you find MailItem.  Look through the members and note the name of
    ' any properties that look useful.  Look them up using VB Help.

    ' #### You need to add code here to eliminate uninteresting items.
    ' #### For example:
    'If SenderEmailAddress <> "JohnDoe@AcmeSoftware.co.zy" Then
    '  InterestingItem = False
    'End If
    'If InStr(Subject, "Accounts payable") = 0 Then
    '  InterestingItem = False
    'End If
    'If AttachCount = 0 Then
    '  InterestingItem = False
    'End If

    ' #### If the item is still thought to be interesting I
    ' #### suggest extracting the required data to variables here.

    ' #### You should consider moving processed emails to another
    ' #### folder.  The emails are being processed in reverse order
    ' #### to allow this removal of an email from the Inbox without
    ' #### effecting the index numbers of unprocessed emails.

    If InterestingItem Then
      With ExcelWkBk
        With .Worksheets("Inbox")
          ' #### This code creates a dividing row and then
          ' #### outputs a property per row.  Again it demonstrates
          ' #### statements that are likely to be useful in the final
          ' #### version
          ' Create dividing row between emails
          .Rows(RowCrnt).RowHeight = 5
          .Range(.Cells(RowCrnt, "A"), .Cells(RowCrnt, "B")) _
                                      .Interior.Color = RGB(0, 255, 0)
          RowCrnt = RowCrnt + 1
          .Cells(RowCrnt, "A").Value = "Sender name"
          .Cells(RowCrnt, "B").Value = SenderName
          RowCrnt = RowCrnt + 1
          .Cells(RowCrnt, "A").Value = "Sender email address"
          .Cells(RowCrnt, "B").Value = SenderEmailAddress
          RowCrnt = RowCrnt + 1
          .Cells(RowCrnt, "A").Value = "Received time"
          With .Cells(RowCrnt, "B")
            .NumberFormat = "@"
            .Value = Format(ReceivedTime, "mmmm d, yyyy h:mm")
          End With
          RowCrnt = RowCrnt + 1
          .Cells(RowCrnt, "A").Value = "Subject"
          .Cells(RowCrnt, "B").Value = Subject
          RowCrnt = RowCrnt + 1
          If AttachCount > 0 Then
            .Cells(RowCrnt, "A").Value = "Attachments"
            .Cells(RowCrnt, "B").Value = "Inx|Type|Path name|File name|Display name|Parent|Position|Class"
            RowCrnt = RowCrnt + 1
            For InxAttach = 1 To AttachCount
              .Cells(RowCrnt, "B").Value = InxAttach & "|" & _
                                           AttachDtl(1, InxAttach) & "|" & _
                                           AttachDtl(2, InxAttach) & "|" & _
                                           AttachDtl(3, InxAttach) & "|" & _
                                           AttachDtl(4, InxAttach) & "|" & _
                                           AttachDtl(5, InxAttach) & "|" & _
                                           AttachDtl(6, InxAttach) & "|" & _
                                           AttachDtl(7, InxAttach)
              RowCrnt = RowCrnt + 1
            Next
          End If
          If TextBody <> "" Then

            ' ##### This code was in the original version of the macro
            ' ##### but I did not find it as useful as the other version of
            ' ##### the text body.  See below
            ' This outputs the text body with CR, LF and TB obeyed
            'With .Cells(RowCrnt, "A")
            '  .Value = "text body"
            '  .VerticalAlignment = xlTop
            'End With
            'With .Cells(RowCrnt, "B")
            '  ' The maximum size of a cell 32,767
            '  .Value = Mid(TextBody, 1, 32700)
            '  .WrapText = True
            'End With
            'RowCrnt = RowCrnt + 1

            ' This outputs the text body with NBSP, CR, LF and TB
            ' replaced by strings.
            With .Cells(RowCrnt, "A")
              .Value = "text body"
              .VerticalAlignment = xlTop
            End With
            TextBody = Replace(TextBody, Chr(160), "[NBSP]")
            TextBody = Replace(TextBody, vbCr, "[CR]")
            TextBody = Replace(TextBody, vbLf, "[LF]")
            TextBody = Replace(TextBody, vbTab, "[TB]")
            With .Cells(RowCrnt, "B")
              ' The maximum size of a cell 32,767
              .Value = Mid(TextBody, 1, 32700)
              .WrapText = True
            End With
            RowCrnt = RowCrnt + 1
          End If

          If HtmlBody <> "" Then

            ' ##### This code was in the original version of the macro
            ' ##### but I did not find it as useful as the other version of
            ' ##### the html body.  See below
            ' This outputs the html body with CR, LF and TB obeyed
            'With .Cells(RowCrnt, "A")
            '  .Value = "Html body"
            '  .VerticalAlignment = xlTop
            'End With
            'With .Cells(RowCrnt, "B")
            '  .Value = Mid(HtmlBody, 1, 32700)
            '  .WrapText = True
            'End With
            'RowCrnt = RowCrnt + 1

            ' This outputs the html body with NBSP, CR, LF and TB
            ' replaced by strings.
            With .Cells(RowCrnt, "A")
              .Value = "Html body"
              .VerticalAlignment = xlTop
            End With
            HtmlBody = Replace(HtmlBody, Chr(160), "[NBSP]")
            HtmlBody = Replace(HtmlBody, vbCr, "[CR]")
            HtmlBody = Replace(HtmlBody, vbLf, "[LF]")
            HtmlBody = Replace(HtmlBody, vbTab, "[TB]")
            With .Cells(RowCrnt, "B")
              .Value = Mid(HtmlBody, 1, 32700)
              .WrapText = True
            End With
            RowCrnt = RowCrnt + 1

          End If
        End With
      End With
    End If
  Next

  With xlApp
    With ExcelWkBk
      ' Write new workbook to disc
      If Right(PathName, 1) <> "\" Then
        PathName = PathName & "\"
      End If
      .SaveAs FileName:=PathName & FileName
      .Close
    End With
    .Quit   ' Close our copy of Excel
  End With

  Set xlApp = Nothing       ' Clear reference to Excel

End Sub 
```

**未包含在原始帖子中的宏，但上述宏的一些用户发现这些宏很有用。**

```
Public Sub FindSelectedFolder(ByRef FolderTgt As MAPIFolder, _
                              ByVal NameTgt As String, ByVal NameSep As String)

  ' This routine (and its sub-routine) locate a folder within the hierarchy and
  ' returns it as an object of type MAPIFolder

  ' NameTgt   The name of the required folder in the format:
  '              FolderName1 NameSep FolderName2 [ NameSep FolderName3 ] ...
  '           If NameSep is "|", an example value is "Personal Folders|Inbox"
  '           FolderName1 must be an outer folder name such as
  '           "Personal Folders". The outer folder names are typically the names
  '           of PST files.  FolderName2 must be the name of a folder within
  '           Folder1; in the example "Inbox".  FolderName2 is compulsory.  This
  '           routine cannot return a PST file; only a folder within a PST file.
  '           FolderName3, FolderName4 and so on are optional and allow a folder
  '           at any depth with the hierarchy to be specified.
  ' NameSep   A character or string used to separate the folder names within
  '           NameTgt.
  ' FolderTgt On exit, the required folder.  Set to Nothing if not found.

  ' This routine initialises the search and finds the top level folder.
  ' FindSelectedSubFolder() is used to find the target folder within the
  ' top level folder.

  Dim InxFolderCrnt As Long
  Dim NameChild As String
  Dim NameCrnt As String
  Dim Pos As Long
  Dim TopLvlFolderList As Folders

  Set FolderTgt = Nothing   ' Target folder not found

  Set TopLvlFolderList = _
          CreateObject("Outlook.Application").GetNamespace("MAPI").Folders

  ' Split NameTgt into the name of folder at current level
  ' and the name of its children
  Pos = InStr(NameTgt, NameSep)
  If Pos = 0 Then
    ' I need at least a level 2 name
    Exit Sub
  End If
  NameCrnt = Mid(NameTgt, 1, Pos - 1)
  NameChild = Mid(NameTgt, Pos + 1)

  ' Look for current name.  Drop through and return nothing if name not found.
  For InxFolderCrnt = 1 To TopLvlFolderList.Count
    If NameCrnt = TopLvlFolderList(InxFolderCrnt).Name Then
      ' Have found current name. Call FindSelectedSubFolder() to
      ' look for its children
      Call FindSelectedSubFolder(TopLvlFolderList.Item(InxFolderCrnt), _
                                            FolderTgt, NameChild, NameSep)
      Exit For
    End If
  Next

End Sub
Public Sub FindSelectedSubFolder(FolderCrnt As MAPIFolder, _
                      ByRef FolderTgt As MAPIFolder, _
                      ByVal NameTgt As String, ByVal NameSep As String)

  ' See FindSelectedFolder() for an introduction to the purpose of this routine.
  ' This routine finds all folders below the top level

  ' FolderCrnt The folder to be seached for the target folder.
  ' NameTgt    The NameTgt passed to FindSelectedFolder will be of the form:
  '               A|B|C|D|E
  '            A is the name of outer folder which represents a PST file.
  '            FindSelectedFolder() removes "A|" from NameTgt and calls this
  '            routine with FolderCrnt set to folder A to search for B.
  '            When this routine finds B, it calls itself with FolderCrnt set to
  '            folder B to search for C.  Calls are nested to whatever depth are
  '            necessary.
  ' NameSep    As for FindSelectedSubFolder
  ' FolderTgt  As for FindSelectedSubFolder

  Dim InxFolderCrnt As Long
  Dim NameChild As String
  Dim NameCrnt As String
  Dim Pos As Long

  ' Split NameTgt into the name of folder at current level
  ' and the name of its children
  Pos = InStr(NameTgt, NameSep)
  If Pos = 0 Then
    NameCrnt = NameTgt
    NameChild = ""
  Else
    NameCrnt = Mid(NameTgt, 1, Pos - 1)
    NameChild = Mid(NameTgt, Pos + 1)
  End If

  ' Look for current name.  Drop through and return nothing if name not found.
  For InxFolderCrnt = 1 To FolderCrnt.Folders.Count
    If NameCrnt = FolderCrnt.Folders(InxFolderCrnt).Name Then
      ' Have found current name.
      If NameChild = "" Then
        ' Have found target folder
        Set FolderTgt = FolderCrnt.Folders(InxFolderCrnt)
      Else
        'Recurse to look for children
        Call FindSelectedSubFolder(FolderCrnt.Folders(InxFolderCrnt), _
                                            FolderTgt, NameChild, NameSep)
      End If
      Exit For
    End If
  Next

  ' If NameCrnt not found, FolderTgt will be returned unchanged.  Since it is
  ' initialised to Nothing at the beginning, that will be the returned value.

End Sub 
```

# android - 从网页重定向到手机应用程序中的页面

> ID：11876550
> 
> 赞同：1
> 
> 时间：2012-08-09T03:52:56.930
> 
> 标签：android, iphone, url-redirection

我想知道是否可以进行以下重定向：

假设一个智能手机用户在他的手机上安装了我的手机应用程序，他点击了一个指向我指定的目标 URL 的网络链接。我想让目标 url 将用户重定向回已安装的手机应用程序并转到应用程序中的特定页面。所以程序是

Safari|QR 码扫描 --> 我的网址 --> 打开我的手机应用程序 --> 在应用程序中加载目标页面。

可以为 iOS 和 Android 实现此重定向吗？我将非常感谢有关此的任何信息。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T04:19:11.227

对于 ios，您可以在 info.plist 中定义一个 url 方案。然后，您可以在应用程序委托中处理 url。一个很好的教程位于here

[http://mobiledevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html](http://mobiledevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html)

在 android 上，您将其设置为数据意图过滤器

```
<data android:host="string"
  android:mimeType="string"
  android:path="string"
  android:pathPattern="string"
  android:pathPrefix="string"
  android:port="string"
  android:scheme="string" /> 
```

[http://developer.android.com/guide/topics/manifest/data-element.html](http://developer.android.com/guide/topics/manifest/data-element.html)

它作为启动应用程序的意图中的数据组件到达

```
<intent-filter>
 <action android:name="android.intent.action.VIEW" />
 <category android:name="android.intent.category.DEFAULT" />
 <category android:name="android.intent.category.BROWSABLE" />
     <data android:scheme="http" android:host="myhost" android:pathPrefix="/details" />
</intent-filter> 
```

但是，我不确定 android 上的所有浏览器实际上是否会测试其他应用程序是否会在将其加载为下一页之前接受 url 方案。

# asp.net - 变量捕获 mod_rewrite

> ID：11876558
> 
> 赞同：0
> 
> 时间：2012-08-09T03:54:00.783
> 
> 标签：asp.net, .htaccess, web-applications, mod-rewrite

基本上，我一直在为网站迁移安排多个重定向。但是，在我的工作中，我们有多个服务器用于测试/开发/生产。域通常映射如下：

`http://<accountname>.(test|dev|).<maindomain>.edu.au`

对于内部重定向，维护对适当服务器的引用没有问题。但是，当我们在站点上执行迁移到另一个帐户时，要确保重定向保留在适当的服务器上变得有点困难。

例如，假设我们决定将“foo”帐户重定向到“bar”，用于我的公司名为“foobar”。

```
Foo's production URL:  http://foo.foobar.edu.au
Foo's test URL:        http://foo.test.foobar.edu.au
Foo's development URL: http://foo.dev.foobar.edu.au

Bar's production URL:  http://bar.foobar.edu.au
Bar's test URL:        http://bar.test.foobar.edu.au
Bar's development URL: http://bar.dev.foobar.edu.au 
```

基本上我需要编写 htaccess 文件，以便所有请求`foo`都正确映射到`bar`的`test/dev/production`域。

我目前实现这一点的方法是使用 RewriteCond 并捕获一些用于重定向的服务器信息：

```
RewriteCond %{SERVER_NAME} ^foo(\.test|\.dev|\.)foobar.edu.au
    RewriteRule ^(.*)$ http://bar%1foobar.edu.au/$1 
```

这适用于批量重定向。但是，当我需要稍微花哨一点时（即，并非所有`foo`' 目录都匹配完全相同的路径`bar`并需要单独的重定向），我发现我需要`RewriteCond`为每个新目录复制相同的`RewriteRule`内容（因为您不能将 a`RewriteCond`应用于多个`RewriteRule`，同时仍在捕获数据。

例如：

```
# resources/data has been duplicated on bar
RewriteCond %{SERVER_NAME} ^foo(\.test\.|\.dev\.|\.)foobar.edu.au
    RewriteRule ^(resources/data/.+)$ http://bar%1foobar.edu.au/$1 [R=301,L]
# the rest of foo just points to a static page on bar
RewriteCond %{SERVER_NAME} ^foo(\.test\.|\.dev\.|\.)foobar.edu.au
    RewriteRule ^ http://bar%1foobar.edu.au/migration/foo.cfm [R=301,L]
# there are actually more, but removed for brevity 
```

**TL;DR**
有没有一种直接的方法来捕获**`SERVER_PATH`**变量的一部分并在多个`RewriteRule`'s 中使用它？

我是 mod_rewrite 的新手，所以任何帮助都将不胜感激。

谢谢，
J

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T04:05:17.210

> 是否有一种直接的方法来捕获 SERVER_PATH 变量的一部分并在多个 RewriteRule 中使用它？

我认为除了复制匹配并在每次需要使用它时使用反向引用之外别无他法。但是，如果你把它交给一个，这会更容易[`RewriteMap`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritemap)吗？

可能类似于（这必须在您的虚拟主机或服务器配置中）：

```
RewriteMap mymap prg:/path/to/my/mapping/script.sh 
```

然后在您的 htaccess 中，您可以像这样调用它：

```
RewriteRule ^(.*)$ ${mymap:%{SERVER_NAME}%{REQUEST_URI}|$1} [L] 
```

因此，您的 script.sh 需要采用`%{SERVER_NAME}%{REQUEST_URI}`（理论上类似于：）`foo.test.foobar.edu.au/some/path/to/file.html`并确定它需要去哪里。如果您需要重定向浏览器，请输出以开头的结果，`http://`否则它将在内部重写。

# jquery - jQuery，一旦值存储在新部分中，就禁用输入

> ID：11876559
> 
> 赞同：0
> 
> 时间：2012-08-09T03:54:01.607
> 
> 标签：jquery

我有 2 个选择列表 mySelect 和 mySelect2。当您单击复选框选择一个时，另一个同时更改。

请检查以下代码：

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">

function displayResult() {
    if(document.form1.billingtoo.checked == true) {
        var x = document.getElementById("mySelect").selectedIndex;
        // Set selected index for mySelect2
        document.getElementById("mySelect2").selectedIndex = x;
   }
}

</script>
</head>
<body>

<form name="form1">
Select your favorite fruit:
    <select id="mySelect">
        <option>Apple</option>
        <option>Orange</option>
        <option>Pineapple</option>
        <option>Banana</option>
    </select>

    <br>

    <input type="checkbox" name="billingtoo" onclick="displayResult()">

    <br>

Select your favorite fruit 2:
    <select id="mySelect2">
        <option>Apple</option>
        <option>Orange</option>
        <option>Pineapple</option>
        <option>Banana</option>
    </select>

</form>
</body>
</html> 
```

...如何禁用（灰色）mySelect2，以便在值到位后无法进行任何更改？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T03:56:55.270

当您不使用任何问题时，不确定为什么您的问题被标记为“jQuery”，但仍然：

```
// with "plain" JS:
document.getElementById("mySelect2").disabled = true;

// with jQuery
$("#mySelect2").prop("disabled", true); 
```

无论哪种方式，将`disabled`背面设置`false`为重新启用控件。

这是使用 jQuery 重写函数的众多方法之一：

```
$(document).ready(function() {
    // bind the checkbox click handler here,
    // not in an inline onclick attribute:
    $('input[name="billingtoo"]').click(function() {
        var $mySelect2 = $("#mySelect2");
        // if checkbox is checked set the second select value to
        // the same as the first
        if (this.checked)
            $mySelect2.val( $("#mySelect").val() );
        // disable or re-enable select according to state of checkbox:
        $mySelect2.prop("disabled", this.checked);
    });
}); 
```

演示：http: [//jsfiddle.net/nnnnnn/99TsC/](http://jsfiddle.net/nnnnnn/99TsC/)

# java - 我应该如何从 str 获取这个特定的文本？

> ID：11876568
> 
> 赞同：1
> 
> 时间：2012-08-09T03:55:02.997
> 
> 标签：java

我在数据库中有很多这样的字符串：`"\\LDDESKTOP\news\1455Bloomberg Document # 180784.txt"`。我想在最后一个斜杠之后获取文件名。

我只是以正常方式这样做：

```
str.substring(str.lastIndexOf("\\")+1) 
```

但它不起作用，因为单斜杠用于更改含义。java中有没有办法像python一样告诉编译器将其视为像这样的纯字符串，`str=r'.......'`.

或者如何将字符串更改为`"\\\\LDDESKTOP\\news\\1455Bloomberg Document # 180784.txt"`. 所以我可以将它传递给 File Object 来读取这个文件。

我该怎么做？或其他解决此问题的方法。

谢谢。

news 表中名为 path(varchar(150)) 的列是这样的“\LDDESKTOP\news\1362Bloomberg Document #180691.txt”

我在路径上做了一个正常的选择。

编码 ：

```
public List<String> getNewsFileName(String startTime,String endTime) {
    List<String> newsFileNames = new ArrayList<String>();
    String tableName = ConfigFile.getConfig("configuration.txt","SQLServerTable");
    String sql = "select Path from [" + tableName + "] where localtime >= '" + startTime + "' and localtime <= '" + endTime + "'";
    try {
        if(connection==null) {
            InvertedIndex.logger.log(Level.SEVERE, "Database connection has not been initialized");
            System.exit(-1);
        }
        stmt=connection.createStatement();
        ResultSet rs = stmt.executeQuery(sql);

        while(rs.next()) {
            String path=rs.getString(1);
            newsFileNames.add(path);
        }

    } catch (SQLException e) {
        InvertedIndex.logger.log(Level.SEVERE,"Fail to store news");
    }
    return newsFileNames;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T04:02:58.700

您使用[转义序列](http://docs.oracle.com/javase/tutorial/java/data/characters.html)来指定某些特殊字符，这些特殊字符也具有分配给它们的 java 属性。

为了在字符串中打印单个反斜杠字符，您使用一组 2 个反斜杠`\\`。

```
String string = new String("\\\\LDDESKTOP\\news\\1455Bloomberg Document # 180784.txt");

String str = string.substring(string.lastIndexOf("\\")+1);

System.out.println(str); 
```

这打印

```
1455Bloomberg Document # 180784.txt 
```

编辑1：

获得字符串后，您可以使用相同的转义字符将其传回。

```
String string = "\\\\LDDESKTOP\\news\\" + str; 
```

这将输出原始

```
\\LDDESKTOP\news\1455Bloomberg Document # 180784.txt 
```

编辑2：

根据您的要求，为了将所有单反斜杠转换为双反斜杠，您必须同时使用转义序列和字符串“替换”方法。

如果你有这个字符串：

```
String string = new String("\\\\LDDESKTOP\\news\\1455Bloomberg Document # 180784.txt"); 
```

您需要调用此代码以“加倍”每个反斜杠：

```
String newString = string.replace("\\", "\\\\"); 
```

这会产生以下结果：

```
//Note this is before we print it.  This illustrates all the escape sequences.
\\\\\\\\LDDESKTOP\\\\news\\\\1455Bloomberg Document # 180784.txt 
```

字符串本身将如下所示：

```
\\\\LDDESKTOP\\news\\1455Bloomberg Document # 180784.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T04:03:22.080

这段代码：

```
String st = "\\LDDESKTOP\news\1455Bloomberg Document # 180784.txt";

st = st.replace("\n", "\\n");

st = st.replace("\\", "\\\\");

String str = st.substring(st.lastIndexOf("\\")+1); 
```

测试它。"\n" 是换行符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T02:22:22.957

感谢您所做的一切努力。最后，我想我找到了答案。

我没有在java程序中处理字符串，而是直接使用sql函数处理字符串。

以下是我所做的。

```
SELECT * substring(path,len(path)-charindex('\',reverse(path))+2,charindex('\',reverse(path)))
 FROM News 
```

这确实做得很好！

# windows - FindStr 的输出到变量

> ID：11876569
> 
> 赞同：0
> 
> 时间：2012-08-09T03:55:07.543
> 
> 标签：windows, batch-file, dos

我想将以下命令的输出保留为变量。

```
corflags ICEConnectDT.dll | findstr "PE" 
```

当我尝试以下语句时，它显示错误**“| 在这个时候是意外的。”**

```
for /F "delims=" %%a in ('corflags ICEConnectDT.dll | findstr PE') do  echo %%a 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T04:09:02.350

逃离管道

```
for /F "delims=" %%a in ('corflags ICEConnectDT.dll ^| findstr PE') do echo %%a 
```

或将整个命令字符串用双引号括起来（在单引号内）

```
for /F "delims=" %%a in ('"corflags ICEConnectDT.dll | findstr PE"') do echo %%a 
```

# json - Grails 2 - 自动生成 JSON 输出（就像 Spring 3.x 一样）

> ID：11876570
> 
> 赞同：7
> 
> 时间：2012-08-09T03:55:08.660
> 
> 标签：json, grails

在 Spring MVC 3.x 中，我可以将`ContentNegotiatingViewResolver`bean 配置为自动以 JSON 或 XML 呈现任何给定端点，只需将文件扩展名更改为`.json`或`.xml`. 我认为 Grails 中有一个等效的功能，但我找不到它。

我读过的所有内容都说我必须捕获传入的 mime 类型（使用`withFormat`），然后`render as JSON`在我的每个控制器方法中使用（或等效）指定 JSON 输出（例如[，使用 Grails 渲染 JSON？](https://stackoverflow.com/questions/4304924/rendering-json-with-grails)）。在我潜入并开始向我的控制器添加特定于 JSON 的代码之前，我想我会在这里问...

所以我的问题是：我可以通过简单地为任何给定的 URL 添加一个 `.json' 文件扩展名（或更改接受标头）来配置 Grails 2 以自动生成 JSON 输出吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T08:26:35.733

我认为您可以使用[grails 过滤器轻松实现](http://www.grails.org/doc/latest/guide/theWebLayer.html#filters)

这是我在我的应用程序中通过 OAuth API 完成的过滤器，它基于接受标头执行 xml、json 和 yalm

```
class RenderFilters {

    def grailsApplication

    def filters = {

        multiFormat(controller: '*EndPoint', action: '*', search: true) {

            after = { Map model ->

                def accepts = request.getHeaders('accept')*.toLowerCase()

                def out = model.containsKey('out')?model.out:model

                if(accepts.any{ it.contains('json')  }){
                    render(text: out as JSON, contentType: 'application/json', encoding:"UTF-8")
                }

                else if(accepts.any{ it.contains('yaml')  }){
                    render(text: Yaml.dump(out), contentType: 'application/x-yaml;', encoding:"UTF-8")
                }

                else if(accepts.any{ it.contains('html')  }){
                    render(text: out as JSON, contentType: 'application/json', encoding:"UTF-8")
                }

                else if(accepts.any{ it.contains('xml')  }){
                    render(text: out as XML, contentType: 'application/xml', encoding:"UTF-8")
                }

                else {
                    render(text: out as JSON, contentType: 'application/json', encoding:"UTF-8")
                }
                false
            }

            before = {

                def contentType = request.getHeader('Content-Type')?.toLowerCase()

                if(!contentType) return true

                if(contentType == 'application/json'){
                    params.body = JSON.parse(request.reader)                    
                    }
                if(contentType == 'application/xml'){
                    params.body = XML.parse(request.reader)
                    }
                if(contentType == 'application/x-yaml'){
                    params.body = Yaml.load(request.reader)
                    }

                params.body = new TypeConvertingMap((Map) params.body)              

                true
                }

        }

    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T04:13:02.953

对于遇到这个 SO 问题的任何人，我想我会包含我的最终 Grails（版本 2.x）过滤器代码，因为它确实与 Fabiano 的答案（上图）中的不同。

以下过滤器允许 Grails 正常处理纯 HTML 内容，并使用 Grails 内容协商机制设置`response.format`按文件扩展名或接受标头（取决于 conf 设置：`grails.mime.use.accept.header`& `grails.mime.file.extensions`）。我还添加了对 JSONP 回调包装器的支持。

```
import grails.converters.JSON
import grails.converters.XML

class RenderFilters {

    def filters = {
        multiFormat(controller: '*', action: '*', find: true) {
            after = { Map model ->
                def out = model?.containsKey('out')?model.out:model

                if (response.format == "json" && params.callback) {
                    render(text: params.callback + "(${out as JSON})" , contentType: 'application/javascript', encoding:"UTF-8")
                    false
                } else if (response.format == "json") {
                    render(text: out as JSON, contentType: 'application/json', encoding:"UTF-8")
                    false
                } else if (response.format == "xml") {
                    render(text: out as XML, contentType: 'application/xml', encoding:"UTF-8")
                    false
                }
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-18T23:47:42.310

偶然地，我发现最新的 grails 只需在查询中设置 Accept 标头即可自动输出 JSON 和 XML！

我目前使用的是 2.3.2，但可能与早期版本相同，我只是创建了一个新应用程序，创建了一个具有一些属性的新简单域类，运行 generate-all 然后运行应用程序。运行后， curl -i -H "Accept: application/json" 返回 JSON， curl -i -H "Accept: application/xml" 返回 XML，无需任何额外工作。

我对此感到非常惊讶，为了确保我没有在本地机器上安装奇怪的东西，我在安装了新 grails 的全新服务器上尝试了它......它可以工作！！！

# kernel32 - 如何通过 kernel32 API 获取分区类型？

> ID：11876571
> 
> 赞同：0
> 
> 时间：2012-08-09T03:55:19.253
> 
> 标签：kernel32

是否有 kernel32 API 可以帮助我们检测分区类型（主/逻辑）？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T04:03:56.547

我认为这些链接可能很有趣：

示例代码： [http ://forums.codeguru.com/showthread.php?312464-Windows-SDK-File-System-How-to-get-information-about-a-partition](http://forums.codeguru.com/showthread.php?312464-Windows-SDK-File-System-How-to-get-information-about-a-partition)

微软文档： http: [//support.microsoft.com/kb/139547](http://support.microsoft.com/kb/139547)

# python - Windows 上的导入错误 Twisted

> ID：11876575
> 
> 赞同：4
> 
> 时间：2012-08-09T03:55:36.557
> 
> 标签：python, twisted

尝试运行简单的扭曲代码时，出现以下错误

```
Traceback (most recent call last):
File "C:\Python25\Lib\site-packages\pythonwin\pywin\framework\scriptutils.py", line 322, in RunScript
debugger.run(codeObject, __main__.__dict__, start_stepping=0)
File "C:\Python25\Lib\site-packages\Pythonwin\pywin\debugger\__init__.py", line 60, in run
_GetCurrentDebugger().run(cmd, globals,locals, start_stepping)
 File "C:\Python25\Lib\site-packages\pythonwin\pywin\debugger\debugger.py", line 655, in run
exec cmd in globals, locals
File "C:\Users\Sony\Desktop\my.py", line 1, in <module>
from twisted.internet.protocol import Protocol, Factory
ImportError: No module named twisted.internet.protocol 
```

我使用 .exe 安装程序成功安装了 twisted。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T08:48:42.427

确保您安装了正确版本的twisted。例如，如果您使用的是 python 2.7，则 twisted 安装程序应为：Twisted-13.0.0.win32-py2.7.msi

安装程序将配置环境路径，如果没有，您必须配置然后重新启动 Windows。

# wpf - 如何使用 ImpromptuInterface.MVVM 进行多个事件绑定？

> ID：11876576
> 
> 赞同：1
> 
> 时间：2012-08-09T03:55:44.930
> 
> 标签：wpf, impromptu-interface

使用 ImpromptuInterface.MVVM 绑定到单个事件非常简单：

```
<DataGrid MVVM:Event.Bind="{Binding Events.RowEditEnding.To[DoRowEditEnding]}"
 ... 
```

如何绑定到同一个 DataGrid 控件中的第二个事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:56:52.843

您始终可以在`To`语句之后链接另一个事件。这是一个示例，我使用它来绑定来自一个对象的多个鼠标监听事件：

```
 <Grid Background="{Binding Color}" MVVM:Event.Bind="{Binding Events.MouseEnter.To[CenterMouseEnter].MouseLeave.To[MouseLeave].MouseLeftButtonDown.To[LeftButtonClick]}" 
```

# regex - 我想打印文件中每一行中的最后 2 个字符串

> ID：11876580
> 
> 赞同：-5
> 
> 时间：2012-08-09T03:56:16.740
> 
> 标签：regex, string, perl

**F1.txt**

```
boy a s b/b/b see

girl d e w/w/w day 
```

**结果**

F2.txt

```
b/b/b see

w/w/w day 
```

大家好，你能帮帮我吗？我有一个文件 f1.txt 我想打印文件中每一行中存在的最后 2 个字符串。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T04:15:30.530

这将做你需要的

```
use strict;
use warnings;

open my $in, '<', 'f1.txt' or die $!;
open my $out, '>', 'f2.txt' or die $!;

while (<$in>) {
  my @fields = split;
  splice @fields, 0, @fields - 2;
  print $out "@fields\n";
} 
```

**输出**

```
b/b/b see

w/w/w day 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T04:04:28.747

不太了解 perl，但是要从任何语言的行中提取想要的字符串，这个正则表达式会做：

```
\s([^\s]+\s[^\s]+)$ 
```

**编辑：**

正如有人所说，正则表达式是为特定文件格式量身定制的，这种格式会更加灵活，并且最后两个字符串由任意数量的空格分隔：

```
\s+(\S+)\s+(\S+)$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T04:10:30.000

也许是这样的：

```
perl -lane 'print "@F[-2,-1]" if $F[-2] && $F[-1];' f1.txt >f2.txt 
```

# java - ObjectOutputStream 在 java web 服务器中抛出 ObjectOutputStream

> ID：11876581
> 
> 赞同：1
> 
> 时间：2012-08-09T03:56:23.257
> 
> 标签：java, exception, header, stream, webserver

我正在尝试按照只能处理 GET 查询的指令编写一个最简单的 Java Web 服务器程序。主要思想是从一个socket中获取一个ObjectOutputStream，使用一个ObjectInputStream打开一个本地文件，然后一个字节一个字节的写入ObjectOutputStream。

下面`serve()`附上。它需要我要写入的 ObjectOutputStream 和文件的路径作为参数。

```
public void serve(ObjectOutputStream out, String path) throws IOException {
    System.out.println("Trying to serve: " + path);
    File file = new File(path);
    if (!file.exists()) {
        //return an HTTP 404
    } else {
        out.writeBytes("HTTP/1.1 200 OK\n\n");
        ObjectInputStream in = null;
        try {
            in = new ObjectInputStream(new FileInputStream(file));
            int data;
            while ((data = in.readByte()) != -1) {
                out.writeByte((byte) data);
            }
            System.out.println("Request valid.");
        } catch (IOException  e) {
            System.out.println("Error in serve(): sending file: " + e.getMessage());
        } finally {
            if (null != in)
                in.close();
        }
    }
} 
```

但是，当我使用浏览器访问 localhost:8080（端口在 8080）时，它会抛出一个 IOException

```
 invalid stream header: 3C68746D 
```

我相信这是`out.writeByte((byte) data);`步调一致的。你能告诉我为什么以及如何解决它吗？提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T04:13:05.383

`ObjectInputStream`并`ObjectOutputStream`用于java中的对象序列化。请参阅以下文章以了解这些流的用法。

[http://java.sun.com/developer/technicalArticles/Programming/serialization/](http://java.sun.com/developer/technicalArticles/Programming/serialization/)

对于您的代码，您可以更好地使用`BufferedInputStream`并`BufferedOutputStream`在任何地方找到相应的对象流。

# list - 如何清除：left，同时保持我的 float:left 完好无损？

> ID：11876582
> 
> 赞同：1
> 
> 时间：2012-08-09T03:56:25.587
> 
> 标签：list, dom, drop-down-menu, clearfix

我有一个 jquery 脚本，它依赖于 'ul' 的高度来调整其包含的 'div' 的大小。

在我的 'li' 元素上没有 'clear:left' 时，它们的父级 'ul' 的高度为一个 'li'。

在我的 'float:left' 'li' 元素上使用 'clear:left'，结构丢失了。

**这是没有'clear：left'的DOM。'li' 元素处于完美位置，但 div 没有调整大小以适应它们。**

jsfiddle.net/63pNN/35/

**这是带有'clear：left'的DOM。div 正在调整大小以适应列表高度，“li”元素重叠**

jsfiddle.net/63pNN/36/

任何想法都是有帮助的！我好近啊……！

谢谢

# ruby - 为什么 55.0 / 1.1 等于 49.99999999999999？

> ID：11876588
> 
> 赞同：0
> 
> 时间：2012-08-09T03:57:09.050
> 
> 标签：ruby, floating-point

> **可能重复：**
> [为什么 6.84 - 3.6 == 3.2399999999999998](https://stackoverflow.com/questions/10721739/why-6-84-3-6-3-2399999999999998)

通过扩展，为什么 49.99999999999999 * 1.1 等于 55.0？

我认为这与浮点算术有关，但我有点困惑为什么会发生这种简单的求和，以及为什么乘法的情况也是如此。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T03:59:49.573

你是对的，这完全与浮点运算有关。许多十进制数字只能以一定的精度表示为二进制，这就是您在此处看到行为的原因。这不仅限于 ruby​​ - 我建议阅读[每个计算机科学家都应该知道的关于浮点运算](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)的知识。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T03:59:01.647

您的计算机以二进制而不是十进制工作。数字 1.1 不能以有限的二进制表示形式*精确*表示，因此它必然是一个近似值。

# c# - 勾选 CheckBox 时如何获取 GridView 中 HiddenField 的值？

> ID：11876589
> 
> 赞同：1
> 
> 时间：2012-08-09T03:57:24.027
> 
> 标签：c#, asp.net, .net, checkbox

我有一个具有多行的 GridView，在每一行上我都有一个 CheckBox 和一个 HiddenField。单击按钮时，我想检查 CheckBox 是否被选中，如果是，我想为该行获取 HiddenField 的值。每行上的每个 HiddenField 都有不同的值。用户可以检查多个 CheckBox，因此我需要能够提取每个 HiddenField 的值。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T04:22:36.833

遍历网格中的每一行，检查复选框是否被选中，如果是，则获取隐藏字段的值。

```
foreach (GridViewRow row in grdView.Rows)
{
    if((row.FindControl("chkBoxId") as CheckBox).Checked)
    {
        string hiddenFieldValue = (row.FindControl("hiddenFieldId") as HiddenField).Value;
    }
} 
```

其中 chkBoxId 是页面上复选框的 ID 属性， hiddenFieldId 是页面上隐藏字段控件的 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T04:15:58.457

```
Possible duplicates. 
```

[如何获取使用asp .net检查的gridview中的CheckBoxes值](https://stackoverflow.com/questions/540304/how-to-get-values-of-checkboxes-inside-gridview-that-are-checked-using-asp-net)

[获取gridview（Asp.net）c＃中选定复选框的ID](https://stackoverflow.com/questions/5500091/get-the-id-of-selected-checkboxes-in-gridview-asp-net-c-sharp)

[如何在选中复选框的gridview中获取值？](https://stackoverflow.com/questions/9294184/how-to-get-the-value-in-the-gridview-which-the-checkbox-is-checked)

上述链接中的答案之一：

```
foreach(Gridviewrow gvr in Gridview1.Rows)
{
 if(((CheckBox)gvr.findcontrol("CheckBox1")).Checked == true)
 {

   //Get hidden field value here.
 }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T04:22:30.483

您可以使用这样的代码：

```
protected void BtnMybutton_click( Object sender, EventArgs e)
{
    Button Mybutton = (Button) sender;
    GridViewRow row = (GridViewRow) MyButton.NamingContainer;
    CheckBox ChkTest = (CheckBox) row.FindControl("ChkTest");
    HidenFiekd HdfValue = (HidenField) row.FindControl("HdfValue");
    if(ChkTest.Checked)
    {
        Console.WriteLine(HdfValues.Value);
    }
} 
```

# linq - Entity Framework 4.0 只包含一些相关数据

> ID：11876590
> 
> 赞同：0
> 
> 时间：2012-08-09T03:57:33.023
> 
> 标签：linq, c#-4.0, entity-framework-4

我希望我的查询结果只包含一些相关的数据。例如，我有实体 Sale 和 Item ，每个 Sale 都有一个 Items 属性，该属性是特定销售的 Item 列表：

```
from s in myContext.Sales
select s; 
```

返回所有销售，每个销售包含所有项目（当我导航到项目时，默认情况下 LazyLoading 处于打开状态）。但我只想包含每个销售的特定项目 - 比如说名称 ==“橙色”的项目，我仍然想要所有销售。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T04:03:49.663

如果开启延迟加载，它实际上会延迟加载您引用的内容。如果您不想启用它，请将其关闭。

```
myContext.Configuration.LazyLoadingEnabled = false; 
```

您可以指定您希望在初始数据库往返中加载某些内容，这样就不需要延迟加载。在那里，*Include*是你的朋友。

```
using System.Data.Entity; // You need this to get the lambda version of Include

from s in myContext.Sales.Include(s => s.PropertyA).Include(s => s.PropertyB)
select s; 
```

请注意，您*始终可以通过不将**特定*属性声明为虚拟来禁用延迟加载。

我推荐以下博客以获得很好的概述

[http://blogs.msdn.com/b/adonet/archive/2011/01/31/using-dbcontext-in-ef-feature-ctp5-part-6-loading-related-entities.aspx](http://blogs.msdn.com/b/adonet/archive/2011/01/31/using-dbcontext-in-ef-feature-ctp5-part-6-loading-related-entities.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T07:08:57.817

我的回答是针对 EF 4.0 的，主要来自这里：http: [//msdn.microsoft.com/en-us/library/bb896249.aspx](http://msdn.microsoft.com/en-us/library/bb896249.aspx)

防止 LazyLoading 在访问导航属性时加载所有内容：

```
myContext.Configuration.LazyLoadingEnabled = false; 
```

加载您的项目：

```
List<Sale> sales = (from s in myContext.Sales
                    select s).ToList() 
```

Foreach item 附加你想要的相关项目（只获取一些项目的关键是 CreateSourceQuery() 方法）：

```
foreach(Sale s in sales)
    s.Items.Attach(s.Items.CreateSourceQuery().Where(i => i.Name == "Orange")); 
```

# javascript - 在 datasnap 代理生成的 javascript 中捕获身份验证 403

> ID：11876591
> 
> 赞同：2
> 
> 时间：2012-08-09T03:57:47.417
> 
> 标签：javascript, delphi, rest, basic-authentication, datasnap

有一个浏览器客户端，在服务器端有一个 DataSnap REST Server 应用程序。我想验证一个 javascript 客户端。我正在关注本指南： [http ://docwiki.embarcadero.com/RADStudio/en/Authentication_with_a_JavaScript_Client](http://docwiki.embarcadero.com/RADStudio/en/Authentication_with_a_JavaScript_Client)

```
...
function doEcho()
  {
    var userName = document.getElementById("namefield"); //get the user name from the form
    var password = document.getElementById("passwordfield"); //get the password from the form

    //create the proxy instance with the specified user credentials
    var Proxy = new TServerMethods1(getAuth(userName, password));
    var Response = Proxy.EchoString("Hello World");

     //Will show an error message if authorization failed,
    //or the JSON Object of parameters if successful
    alert(Response.toJSONString());
  }
... 
```

问题是当用户名和密码凭据错误时，响应只是`null`. 如何获得有关所发生情况的更详细信息，例如请求状态代码？

有没有人使用 datasnap 休息服务器应用程序进行过 javascript 身份验证？

提前致谢

# objective-c - 检测全屏菜单栏移动

> ID：11876596
> 
> 赞同：11
> 
> 时间：2012-08-09T03:58:20.373
> 
> 标签：objective-c, macos, statusbar

所以现在我有一个 NSWindow ，它使用[INAppStoreWindow](https://github.com/indragiek/INAppStoreWindow/)像 NSToolbar 一样绘制自己，我想知道当应用程序全屏时菜单栏移动时是否有任何类型的事件或消息发送，以便我可以移动响应窗口的标题栏（标准 NSToolbar 的工作方式）。显然 NSToolbar 知道一些我不知道的东西，它可以让我免于在窗口的上部制作 NSTrackingArea。

这是它现在的作用：

![前](../Images/c72379bae71f8eb8f62a53b368435e5f.png)

这就是我想做的事情：

![在此处输入图像描述](../Images/8984fb729163a41980d7d73d5c25c372.png)

不幸的是，KVO'ing a`fullScreenAccessoryView`也不能正常工作。框架事件仅在进入和退出全屏模式时生成，而不是在工具栏被状态栏“向下移动”时生成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T20:45:32.277

这个怎么样？使用具有宽度`NSStatusBarItem`的自定义创建，然后使用.`NSView``0``window``NSWindowWillMoveNotification`

更新：我制作了[INAppStoreWindow](https://github.com/indragiek/INAppStoreWindow/)的一个分支，并在菜单栏上附加了一个自定义工具栏。[检查出来](https://github.com/shpakovski/INAppStoreWindow/commit/3b92672ee3c04f93cdc7f06ff29c8d999f37e6fd)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T18:39:56.607

您可以尝试的一件事是在窗口上设置一个假的（即空的）工具栏，然后给它一个`fullScreenAccessoryView`. 此视图在进入全屏时会从视图层次结构中移除并附加在工具栏下方。但是，不知道在使用自定义窗口类时这是如何工作的...：/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-21T23:22:05.703

我希望完成完全相同的事情。我可以通过在[WAYAppStoreWindow](https://github.com/weAreYeah/WAYAppStoreWindow/)（或 INAppStoreWindow）中设置标题栏视图的超级视图来发布帧更改通知，然后在此视图上观察帧更改通知来做到这一点。在您的设置中添加以下观察者：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(windowTitleBarFrameDidChange:)
                                             name:NSViewFrameDidChangeNotification
                                           object:window.titleBarView.superview]; 
```

并在进入/退出全屏时打开/关闭帧更改通知：

```
window.titleBarView.superview.postsFrameChangedNotifications = YES; 
```

然后在`windowTitleBarFrameWillChange:`方法的实现中，通过比较它的superview框架的最后一个y位置来检查标题栏何时显示。这是代码：

```
// Window titlebar heights.
#define kWindowTitlebarHeightDefault    22.0
#define kWindowTitlebarHeightStandard   37.0
#define kWindowTitlebarHeightExtended   82.0

- (void) windowTitleBarFrameDidChange:(NSNotification *)notification;
{
    NSView * titleBarView = [notification object];  // view is actually the titlebar container view

    if (NSMinX(_lastTitleBarFrame) == NSMinX(titleBarView.frame) &&
        NSWidth(_lastTitleBarFrame) == NSWidth(titleBarView.frame) &&
        NSHeight(_lastTitleBarFrame) == NSHeight(titleBarView.frame) &&
        NSMinY(_lastTitleBarFrame) == -kWindowTitlebarHeightDefault &&
        NSMinY(titleBarView.frame) > -kWindowTitlebarHeightDefault)                     // titlebar will show
    {
        [self windowTitleBarWillShow];
    }
    else if (NSMinX(_lastTitleBarFrame) == NSMinX(titleBarView.frame) &&
             NSWidth(_lastTitleBarFrame) == NSWidth(titleBarView.frame) &&
             NSHeight(_lastTitleBarFrame) == NSHeight(titleBarView.frame) &&
             NSMinY(_lastTitleBarFrame) == 0.0 && NSMinY(titleBarView.frame) < 0.0)     // titlebar will hide
    {
        [self windowTitleBarWillHide:YES];
    }
    else if (NSWidth(_lastTitleBarFrame) != NSWidth([NSScreen mainScreen].frame) &&
             NSWidth(titleBarView.frame) == NSWidth([NSScreen mainScreen].frame))       // just went full-screen
    {
        [self windowTitleBarWillHide:NO];
    }

    _lastTitleBarFrame = titleBarView.frame;
}

- (void) windowTitleBarWillHide:(BOOL)animate
{
    WAYAppStoreWindow * window = (WAYAppStoreWindow *)[(NSWindowController *)[[self windowControllers] objectAtIndex:0] window];
    NSView * themeFrame = window.titleBarView.superview.superview;    
    if (animate)
        [themeFrame animator].alphaValue = 0.0;
    else
        themeFrame.alphaValue = 0.0;
}

- (void) windowTitleBarWillShow
{
    WAYAppStoreWindow * window = (WAYAppStoreWindow *)[(NSWindowController *)[[self windowControllers] objectAtIndex:0] window];
    NSView * themeFrame = window.titleBarView.superview.superview;
    [themeFrame animator].alphaValue = 1.0;
}

- (void) windowWillEnterFullScreen:(NSNotification *)notification
{
    WAYAppStoreWindow * window = [notification object];
    [self setUpFullScreenTitleBarForWindow:window];
    _lastTitleBarFrame = NSZeroRect;
}

- (void) windowDidEnterFullScreen:(NSNotification *)notification;
{
    WAYAppStoreWindow * window = [notification object];
    window.titleBarView.superview.postsFrameChangedNotifications = YES;
    _fullscreenToolbarView.hidden = NO;
}

- (void) windowWillExitFullScreen:(NSNotification *)notification;
{
    WAYAppStoreWindow * window = [notification object];
    window.titleBarView.superview.postsFrameChangedNotifications = NO;
    [self setUpStandardTitleBarForWindow:window];
}

- (void) setUpNormalTitleBarForWindow:(WAYAppStoreWindow *)window
{
    window.appearance = nil;
    window.showsTitle = NO;
    window.titleBarHeight = kWindowTitlebarHeightExtended;
    window.verticalTrafficLightButtons = YES;
    window.centerTrafficLightButtons = YES;
    window.trafficLightButtonsLeftMargin = 13.0;

    _fullscreenToolbarView.hidden = YES;
}

- (void) setUpFullScreenTitleBarForWindow:(WAYAppStoreWindow *)window
{
    window.appearance = [NSAppearance appearanceNamed:NSAppearanceNameVibrantDark];
    window.showsTitle = YES;
    window.titleBarHeight = kWindowTitlebarHeightStandard;
    window.verticalTrafficLightButtons = NO;
    window.centerTrafficLightButtons = YES;
    window.trafficLightButtonsLeftMargin = 13.0;
    window.verticallyCenterTitle = YES;

    _fullscreenToolbarView.hidden = YES;
    _lastTitleBarFrame = NSZeroRect;
} 
```

注意：我正在使用[WAYWindow](https://github.com/dbrisinda/WAYWindow)的一个分支，它增加了对在标题栏中垂直居中文档标题的支持。

# c# - 如何使用 HttpTaskAsyncHandler

> ID：11876597
> 
> 赞同：5
> 
> 时间：2012-08-09T03:58:29.793
> 
> 标签：c#, .net, asynchronous, httptaskasynchandler

```
public class FooHandler  : HttpTaskAsyncHandler
{
    public override async Task ProcessRequestAsync(HttpContext context)
    {
        return await new AdRequest().ProcessRequest();
        // getting error here. "Return type of async type is void"
    }
}

public class FooRequest
{

    public async Task<String> ProcessRequest()
    {
        //return await "foo"; obviously nothing to wait here
    }

} 
```

我想做一个异步处理程序，只想返回一个字符串。我怎样才能让这个工作？是否有使用异步方法和任务的简明参考？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T10:34:30.497

几点：

*   您可以`await`any `Task`，而不仅仅是从`async`方法返回的。
*   `async`方法将它们的返回值包装成`Task<TResult>`; 如果没有返回值，它们会将返回值本身包装到一个`Task`.
*   有几种方便的方法可用，例如，`Task.FromResult`如果您不需要`async`方法的开销。
*   仅在`async`必须使用方法时才创建方法`await`。如果您不需要制作方法`async`，请不要。

你可能会发现我的[async/await 介绍](http://nitoprograms.blogspot.com/2012/02/async-and-await.html)很有帮助。

```
public class FooHandler  : HttpTaskAsyncHandler
{
  public override Task ProcessRequestAsync(HttpContext context)
  {
    return new AdRequest().ProcessRequest();
  }
}

public class AdRequest
{
  public Task<String> ProcessRequest()
  {
    return Task.FromResult("foo");
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T08:34:29.037

您不应该“返回”任务，编译器会隐式执行它，因为它是一个异步函数：

```
public override async Task ProcessRequestAsync(HttpContext context)
{
    await new AdRequest().ProcessRequest();
}

public async Task<String> ProcessRequest()
{
    return "foo";
} 
```

这是另一种方式，更接近您尝试做的事情：（没有异步/等待）

```
public override Task ProcessRequestAsync(HttpContext context)
{
    return new AdRequest().ProcessRequest();
}

public Task<String> ProcessRequest()
{
    return Task.Return("foo");
} 
```

一般参考`async`是[here](http://msdn.microsoft.com/en-us/library/hh156513%28v=vs.110%29.aspx) 本质上将`async`修饰符添加到方法中，使其`Task`隐式返回。如果您返回一个 int，它将把它变成一个`Task<int>`. `await`反之，将 a`Task<int>`变成`int`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-09T14:58:35.307

这是一个真正的异步方法：

```
public Task<string> ProcessRequest()
{
    var textFile = File.OpenText("file.txt");
    var readTask = textFile.ReadToEndAsync();

    readTask.ContinueWith(previousTask => textFile.Dispose());

    return readTask;
} 
```

如果您使用大文件或慢速驱动器上的文件运行此方法，则执行将在文件读取结束之前返回调用者很久。在 Stephen Cleary 的示例中，调用者只有在结果 ("foo") 计算完成后才能取回控制权。

Dispose 必须在 ContinueWith 中，因为方法执行将在文件读取完成之前返回给调用者，因此无法在 ProcessRequest 方法中关闭文件。

一个人当然可以开始自己的任务。

```
public Task<string> ProcessRequest(CancellationToken cancellationToken)
{
    var readTask = Task.Run(() =>
    {
        using (var textFile = File.OpenText("file.txt"))
        {
            var text = textFile.ReadToEnd();

            cancellationToken.ThrowIfCancellationRequested();

            var processedText = text.Replace("foo", "bar");

            return processedText;
        }
    });

    return readTask;
} 
```

最好有一个 CancellationToken 并定期检查是否请求取消以允许取消长时间运行的操作。

编辑 1

正如@Stephen Cleary 强调的第一个样本，这会导致大致或可能完全相同的 CIL：

```
public async Task<string> ProcessRequest()
{
    using (var textFile = File.OpenText("file.txt"))
    {
        var s = await textFile.ReadToEndAsync();

        return s;
    }
} 
```

基本上，编译器会将 await textFile.ReadToEndAsync() 之后的代码转换为 ContinueWith。

每种语法都有其优点，我的偏好是 1-2 行（即 dispose 和 log）进入 ContinueWith，更复杂的延续使用 await。

# vb.net - 对象引用未设置为实例，带有..Split(",") 的公共数组

> ID：11876598
> 
> 赞同：0
> 
> 时间：2012-08-09T03:58:34.560
> 
> 标签：vb.net, arrays, split

我想知道下面的 vb.net 代码有什么问题。

```
Public Class Form10

Public IDs() As String = TextBox1.Text.Split(",")

Private Sub Form10_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
End Sub

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    For Each id In IDs
        MsgBox(id)
    Next
End Sub 
```

结束类

当我做

```
Form10.show() 
```

我收到错误“对象引用未设置为实例”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T04:19:45.550

您已在类中声明了一个字段，该字段将使用相应表单上尚不存在的控件中的值进行初始化。在访问字段成员上的初始化程序时，控件未初始化和加载，从而导致错误。

要保留公共 ID 声明，您可以从字段声明中删除初始化，然后将分配移至 Button1_Click 事件，如下所示：

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    IDs=TextBox1.Text.Split(",")
    ' Do something interesting with IDs now...
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T04:18:33.257

```
Public Class Form10
Private Sub Form10_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
End Sub

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim IDs() As String = TextBox1.Text.Split(",")
    Form1.somefunction(IDs)
End Sub 
```

在 Form1 中

```
 Public Sub somefunction(ByVal IDs() As String)
    For Each id In IDs
        MsgBox(id)
    Next
End Sub 
```

# php - PHP Codeigniter：下拉菜单上的 set_value

> ID：11876604
> 
> 赞同：8
> 
> 时间：2012-08-09T03:59:06.967
> 
> 标签：php, codeigniter

我有以下视图，但如何在`set_value`不默认为“请选择”的情况下应用它？

```
<label for="add_fields_type">Type: </label>
<select name="add_fields_type" id="add_fields_type">
    <option value="">Please Select</option>
    <option value="<?php echo set_value('input'); ?>">Input</option>
    <option value="<?php echo set_value('textarea'); ?>">Text Area</option>
    <option value="<?php echo set_value('radiobutton'); ?>">Radio Button</option>
    <option value="<?php echo set_value('checkbox'); ?>">Check Box</option>
</select> 
```

**更新：**

**看法：**

```
<label for="add_fields_placeholder">Placeholder: </label>
    <select name="add_fields_placeholder" id="add_fields_placeholder">
        <option value="">Please Select</option>
        <option value="<?php echo set_value('yes'<?php echo set_select('add_fields_placeholder','yes', ( !empty($placeholderType) && $placeholderType == "yes" ? TRUE : FALSE ));?>">Yes</option>
        <option value="<?php echo set_value('no' <?php echo set_select('add_fields_placeholder','no', ( !empty($placeholderType) && $placeholderType == "no" ? TRUE : FALSE )); ?>">No</option>
    </select>

    <label for="add_fields_placeholderValue">Placeholder Text: </label>
    <input type="text" name="add_fields_placeholderValue" id="add_fields_placeholderValue" value="<?php echo set_value('add_fields_placeholderValue'); ?>">

    <label for="add_fields_type">Type: </label>
<select name="add_fields_type" id="add_fields_type">
    <option value="">Please Select</option>
    <option value="input" <?php echo set_select('add_fields_type','input', ( !empty($fieldType) && $fieldType == "input" ? TRUE : FALSE )); ?>>Input</option>
    <option value="textarea" <?php echo set_select('add_fields_type','textarea', ( !empty($fieldType) && $fieldType == "textarea" ? TRUE : FALSE )); ?>>Text Area</option>
    <option value="radiobutton" <?php echo set_select('add_fields_type','radiobutton', ( !empty($fieldType) && $fieldType == "radiobutton" ? TRUE : FALSE )); ?>>Radio Button</option>
    <option value="checkbox" <?php echo set_select('add_fields_type','checkbox', ( !empty($data) && $data == "checkbox" ? TRUE : FALSE )); ?>>Check Box</option>
</select> 
```

**控制器：**

```
$data['fieldType'] = $this->input->get('add_fields_type');
$data['placeholderType'] = $this->input->get('add_fields_placeholder'); 
```

**第 16 行：**

```
<option value="<?php echo set_value('yes'<?php echo set_select('add_fields_placeholder','yes', ( !empty($placeholderType) && $placeholderType == "yes" ? TRUE : FALSE ));?>">Yes</option> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T11:49:51.780

这应该有助于：

**控制器（test.php）**

```
<?php
    class Setup extends CI_Controller {

        function index() {
            //for the set_select() function
            $this->load->library('form_validation');

            //for base_url() function
            $this->load->helper('url');

            $list['data'] = $this->input->get('add_fields_type');

            $this->load->view('test_view.php', $list);
        }
?> 
```

**查看 (test_view.php)**

```
<!DOCTYPE HTML>
<html>
<body>
<form action="<?php echo base_url(); ?>test">
    <label for="add_fields_type">Type: </label>
    <select name="add_fields_type" id="add_fields_type">
        <option value="">Please Select</option>
        <option value="input" <?php echo set_select('add_fields_type','input', ( !empty($data) && $data == "input" ? TRUE : FALSE )); ?>>Input</option>
        <option value="textarea" <?php echo set_select('add_fields_type','textarea', ( !empty($data) && $data == "textarea" ? TRUE : FALSE )); ?>>Text Area</option>
        <option value="radiobutton" <?php echo set_select('add_fields_type','radiobutton', ( !empty($data) && $data == "radiobutton" ? TRUE : FALSE )); ?>>Radio Button</option>
        <option value="checkbox" <?php echo set_select('add_fields_type','checkbox', ( !empty($data) && $data == "checkbox" ? TRUE : FALSE )); ?>>Check Box</option>
    </select>
    <input type="submit" />
</form>
</body>
</html> 
```

**注意：**第三个参数`set_select()`决定是否应该选择

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-01T20:56:56.877

就像 Abid 所说的那样，您只需在表单验证后使用 set_value() 即可。

```
form_dropdown('add_fields_type', $field_types, set_value('field_type')); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-09T04:11:18.563

尝试这个：

```
<option value="<?php echo set_value('textarea'); ?>" <?php echo (set_value('textarea')=='TEXTAREA')?" selected=' selected'":""?>>Text Area</option> 
```

高于 TEXTAREA 是您希望在该选项上出现的值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T04:23:16.277

尝试这个 ：-

见网址：-- [http://codeigniter.com/user_guide/helpers/form_helper.html](http://codeigniter.com/user_guide/helpers/form_helper.html)

```
$options = array(
                  'small'  => 'Small Shirt',
                  'med'    => 'Medium Shirt',
                  'large'   => 'Large Shirt',
                  'xlarge' => 'Extra Large Shirt',
                );

$shirts_on_sale = array('small', 'large');

echo form_dropdown('shirts', $options, 'large'); 
```

// 会产生：

```
<select name="shirts">
<option value="small">Small Shirt</option>
<option value="med">Medium Shirt</option>
<option value="large" selected="selected">Large Shirt</option>
<option value="xlarge">Extra Large Shirt</option>
</select>

echo form_dropdown('shirts', $options, $shirts_on_sale); 
```

// 会产生：

```
<select name="shirts" multiple="multiple">
<option value="small" selected="selected">Small Shirt</option>
<option value="med">Medium Shirt</option>
<option value="large" selected="selected">Large Shirt</option>
<option value="xlarge">Extra Large Shirt</option>
</select> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-14T23:21:59.740

要使用 set_select，您需要为相关字段设置验证规则。在此处查看我对类似问题的回答： [CodeIgniter select_value in form_dropdown](https://stackoverflow.com/questions/14445982/codeigniter-select-value-in-form-dropdown/27475117#27475117)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-04T02:30:05.867

使用 javascript 更容易（已测试）

```
<select name="add_fields_type" id="add_fields_type">
 <option value="">Please Select</option>
 <option value="Input">Input</option>
 <option value="Text Area">Text Area</option>
 <option value="Radio Button">Radio Button</option>
 <option value="Check Box">Check Box</option>
</select>

 <script>
    document.getElementById('select_status').value="<?php echo set_value('status'); ?>";
 </script> 
```

# java - 如何使用 equals() 创建唯一元素的 ArrayList

> ID：11876605
> 
> 赞同：0
> 
> 时间：2012-08-09T03:59:06.623
> 
> 标签：java, list, arraylist

我必须只向`ArrayList`. 我怎样才能`equals`为此目的覆盖该方法？我想要类似的东西：

```
public boolean equals (Object in) {
    if(in == null) {
        return false;
    }
    else if(in instanceof UniqueFruits) {
        // ?? check whether the newly added element exists or not           
        return true;
    }
    else {
        return false;
    }       
} 
```

如何检查新添加的元素是否存在？我必须检查水果名称。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T04:08:15.523

听起来你想使用一个[`Set`](http://docs.oracle.com/javase/7/docs/api/java/util/Set.html)实现。如果顺序无关紧要，只需使用[`HashSet`](http://docs.oracle.com/javase/7/docs/api/java/util/HashSet.html). 如果要保留插入顺序，请使用[`LinkedHashSet`](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashSet.html). 或者，为了保持自然顺序，使用[`TreeSet`](http://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html).

在任何情况下，请确保覆盖您的元素对象的`equals`方法。你所拥有的是一个好的开始。检查后`in instanceof UniqueFruits`，`in`转换为`UniqueFruits`：

```
UniqueFruits uf = (UniqueFruits)in; 
```

然后，您可以依次检查每个相关字段`equals`（确保首先检查`null`字段是否可为空）。任何现代 IDE 都将帮助您`equals`自动生成。首先自己尝试一下，然后与生成的版本进行比较，这可能是有教育意义的。

确保也覆盖`hashCode`（IDE 将同样帮助您解决此问题，并且有大量关于此问题的在线阅读 - 只需搜索）。

如果你使用`TreeSet`（或其他一些`SortedSet`实现），你的元素对象应该要么实现，要么[`Comparable`](http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html)你应该提供`SortedSet`一个[`Comparator`](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T04:07:44.847

我建议使用`Set`而不是`ArrayList`存储独特的元素。它更容易，更清洁。

根据[javadoc](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Set.html) for `Set`，它是这样说的：

> 不包含重复元素的集合。更正式地说，集合不包含一对元素 e1 和 e2 使得 e1.equals(e2)，并且最多包含一个空元素。正如它的名字所暗示的，这个接口模拟了数学集合抽象

这是[一篇](https://stackoverflow.com/questions/203984/how-do-i-remove-repeated-elements-from-arraylist)关于如何从`ArrayList`. 但是，您会注意到提供的大多数解决方案都使用 的实现`Set`来实现您想要做的事情。在任何情况下，`equals()`你所做的压倒一切都无助于实现你的目标。*如果不是太麻烦（我不明白为什么您需要坚持`ArrayList`给定的实际要求，我**强烈**建议您转向`Set`实现。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T04:09:53.183

如果你的 fruitname 类有 2 个属性，比如`fruitname`然后`fruitclass`

你的校验码应该是

```
UniqueFruits current = (UniqueFruits) in;
if(this.fruitname.equals(current.fruitname) && this.fruitclass.equals(current.fruitclass)) {
  return true;
}else{
   return false;
} 
```

并且来到 hashcode 要求您的 IDE 为`UniqueFruits`Class 生成 hasdcode。并使用`Set`而不是`ArrayList`

稍微轻松一点，您的 IDE 甚至可以为您生成 equals()。

# python - 正则表达式替换为 Python 中的否定前瞻

> ID：11876606
> 
> 赞同：2
> 
> 时间：2012-08-09T03:59:15.783
> 
> 标签：python, regex, negative-lookahead

我正在尝试删除常规文本周围的单引号。例如，给定列表：

```
alist = ["'ABC'", '(-inf-0.5]', '(4800-20800]', "'\\'(4.5-inf)\\''", "'\\'(2.75-3.25]\\''"] 
```

我想将“'ABC'”变成“ABC”，但保留其他引号，即：

```
alist = ["ABC", '(-inf-0.5]', '(4800-20800]', "'\\'(4.5-inf)\\''", "'\\'(2.75-3.25]\\''"] 
```

我尝试使用如下外观：

```
fixRepeatedQuotes = lambda text: re.sub(r'(?<!\\\'?)\'(?!\\)', r'', text)
print [fixRepeatedQuotes(str) for str in alist] 
```

但收到错误消息：

```
sre_constants.error: look-behind requires fixed-width pattern. 
```

还有其他解决方法吗？提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T04:21:55.840

**尝试应该工作：**

```
result = re.sub("""(?s)(?:')([^'"]+)(?:')""", r"\1", subject) 
```

**解释**

```
"""
(?:         # Match the regular expression below
   '           # Match the character “'” literally (but the ? makes it a non-capturing group)
)
(           # Match the regular expression below and capture its match into backreference number 1
   [^'"]       # Match a single character NOT present in the list “'"” from this character class (aka any character matches except a single and double quote)
      +           # Between one and unlimited times, as many times as possible, giving back as needed (greedy)
)
(?:         # Match the regular expression below
   '           # Match the character “'” literally (but the ? makes it a non-capturing group)
)
""" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T04:25:57.833

`re.sub`接受一个函数作为替换文本。所以，

```
re.sub(r"'([A-Za-z]+)'", lambda match: match.group(), "'ABC'") 
```

产量

```
"ABC" 
```

# python - Python，按任意键退出

> ID：11876618
> 
> 赞同：16
> 
> 时间：2012-08-09T04:00:48.687
> 
> 标签：python, python-2.7, key, any

所以，正如标题所说，我想要一个正确的代码来关闭我的 python 脚本。到目前为止，我已经使用`input('Press Any Key To Exit')`了 ，但是这样做会产生错误。我想要一个只关闭你的脚本而不使用错误的代码。

有人有想法吗？谷歌给了我输入选项，但我不希望它使用这个错误关闭：

```
Traceback (most recent call last):
  File "C:/Python27/test", line 1, in <module>
    input('Press Any Key To Exit')
  File "<string>", line 0

   ^
SyntaxError: unexpected EOF while parsing 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-09T05:13:47.973

如果您在 Windows 上，则 cmd`pause`命令应该可以工作，尽管它显示“按任意键继续”

```
import os
os.system('pause') 
```

linux替代方案是`read`，可以在[这里找到一个很好的描述](https://stackoverflow.com/questions/92802/what-is-the-linux-equivalent-to-dos-pause)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-09T04:03:43.570

此语法错误是由[`input`](https://docs.python.org/2/library/functions.html#input)在 Python 2 上使用引起的，它将尝试[`eval`](https://docs.python.org/2/library/functions.html#eval)在终端提示符下键入的任何内容。如果你按下`enter`了，那么 Python 基本上会尝试评估一个空字符串，`eval("")`，这会导致 a`SyntaxError`而不是通常的`NameError`.

如果您对“any”键作为回车键感到满意，那么您可以简单地将其换成[`raw_input`](https://docs.python.org/2/library/functions.html#raw_input)：

```
raw_input("Press Enter to continue") 
```

*请注意，在 Python 3 上`raw_input`已重命名为[`input`](https://docs.python.org/3/library/functions.html#input).*

对于在搜索中发现这个问题的用户，[他们确实希望能够按*任意*键](https://www.youtube.com/watch?v=st6-DgWeuos)退出提示并且不限于使用`enter`，您可以考虑使用 3rd-party 库作为跨平台解决方案。我推荐[`readchar`](https://github.com/magmax/python-readchar)可以使用`pip install readchar`. 它适用于 Linux、macOS 和 Windows 以及 Python 2 或 Python 3。

```
import readchar
print("Press Any Key To Exit")
k = readchar.readchar() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-09T05:27:22.230

如果可以避免使用 python 中特定于平台的函数，我会劝阻它们，但你可以使用内置[`msvcrt`](https://docs.python.org/2/library/msvcrt.html)模块。

```
from msvcrt import getch

junk = getch() # Assign to a variable just to suppress output. Blocks until key press. 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-11-28T01:10:14.510

A little late to the game, but I wrote a library a couple years ago to do exactly this. It exposes both a `pause()` function with a customizable message and the more general, cross-platform `getch()` function inspired by [this answer](https://stackoverflow.com/a/1394994/233098).

Install with `pip install py-getch`, and use it like this:

```
from getch import pause
pause() 
```

This prints `'Press any key to continue . . .'` by default. Provide a custom message with:

```
pause('Press Any Key To Exit.') 
```

For convenience, it also comes with a variant that calls `sys.exit(status)` in a single step:

```
pause_exit(0, 'Press Any Key To Exit.') 
```

[Check it out](https://github.com/joeyespo/py-getch).

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-12-17T20:52:05.880

```
a = input('Press a key to exit')
if a:
    exit(0) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-09T05:31:32.737

这是一种通过按 *nix 上的任意键来结束的方法，不显示该键并且*不按 return*。（通用方法的功劳归功于[Python read a single character from the user](https://stackoverflow.com/questions/510357/python-read-a-single-character-from-the-user)。）从 SO 的角度来看，您似乎可以使用该`msvcrt`模块在 Windows 上复制此功能，但我没有将它安装在任何地方进行测试。过度评论以解释发生了什么......

```
import sys, termios, tty

stdinFileDesc = sys.stdin.fileno() #store stdin's file descriptor
oldStdinTtyAttr = termios.tcgetattr(stdinFileDesc) #save stdin's tty attributes so I can reset it later

try:
    print 'Press any key to exit...'
    tty.setraw(stdinFileDesc) #set the input mode of stdin so that it gets added to char by char rather than line by line
    sys.stdin.read(1) #read 1 byte from stdin (indicating that a key has been pressed)
finally:
    termios.tcsetattr(stdinFileDesc, termios.TCSADRAIN, oldStdinTtyAttr) #reset stdin to its normal behavior
    print 'Goodbye!' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-08T18:40:09.287

Ok I am on Linux Mint 17.1 "Rebecca" and I seem to have figured it out, As you may know Linux Mint comes with Python installed, you cannot update it nor can you install another version on top of it. I've found out that the python that comes preinstalled in Linux Mint is version 2.7.6, so the following will for sure work on version 2.7.6\. If you add `raw_input('Press any key to exit')` it will not display any error codes but it will tell you that the program exited with code 0\. For example this is my first program. [MyFirstProgram](https://drive.google.com/file/d/0B463x4ZnH5QJUXNRZHp1Tk5UcWM/view?usp=sharing). Keep in mind it is my first program and I know that it sucks but it is a good example of how to use "Press any key to Exit" BTW This is also my first post on this website so sorry if I formatted it wrong.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-01-29T06:59:45.943

in Windows:

```
if msvcrt.kbhit():
    if msvcrt.getch() == b'q':
        exit() 
```

# android - Soundpool 中的多点触控

> ID：11876621
> 
> 赞同：2
> 
> 时间：2012-08-09T04:01:18.667
> 
> 标签：android, button, soundpool, multi-touch

如何在 soundpool 中进行多次触摸？我有 3 个按钮。当手指滑动触摸按钮时，就像钢琴中的声音？这是我的代码：

```
sp = new SoundPool (5, AudioManager.STREAM_MUSIC, 0);
player1 = sp.load(this, R.raw.ndang, 1);
player2 = sp.load(this, R.raw.nding, 1);
player3 = sp.load(this, R.raw.ndung, 1);

ndang = (ImageButton) this.findViewById(R.id.ndang);
ndang.setOnClickListener(new OnClickListener() {
    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        sp.play(player1, 1, 1, 0, 0, 1);
    }
});

ndang = (ImageButton) this.findViewById(R.id.ndang2);
ndang.setOnClickListener(new OnClickListener() {
    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        sp.play(player1, 1, 1, 0, 0, 1);
    }
});

nding = (ImageButton) this.findViewById(R.id.nding);
nding.setOnClickListener(new OnClickListener() {
    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        sp.play(player2, 1, 1, 0, 0, 1);
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T09:46:36.470

愿这对您有所帮助：http: [//www.martinhoeller.net/2012/01/13/developing-a-musical-instrument-app-for-android/](http://www.martinhoeller.net/2012/01/13/developing-a-musical-instrument-app-for-android/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T04:14:08.627

您需要`View.OnTouchListener`为钢琴实现一个或更好的是创建一个包含整个键盘和覆盖的自定义视图`onTouchEvent`。这将使您能够在最小化代码的同时检测多个钢琴按键和滑键。

编辑：

```
public class PianoView extends View {
    @Override
    onTouchEvent(MotionEvent event) {
        //your code to find which key was pressed based on x,y touch
    }
} 
```

或者

```
public class PianoActivity extends Activity {
    @Override
    dispatchTouchEvent(MotionEvent event) {
        //your code to find which key was pressed based on x,y touch
    }
} 
```

# javascript - 我的约会有什么问题？

> ID：11876625
> 
> 赞同：0
> 
> 时间：2012-08-09T04:02:15.843
> 
> 标签：javascript, sql

我有以下 javascript：

```
today = new Date(); //real "today" value if not using sample database

var curr_date = today.getDate();
var curr_month = today.getMonth();
curr_month++;
var curr_year = today.getFullYear().substr(2,2);
var t = curr_date + "/" + curr_month + "/" + curr_year;
this.queryText = this.queryText + " where exdate between '" + t + "' and '" + t + "'"; 
```

当我这样做时，查询会返回所有内容，但实际上，今天和今天之间只有 1 条记录。

如果我手动编写“在 '8/9/12' 和 '8/9/12' 之间”，那么查询就可以了。这里有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T04:07:23.217

`today.getFullYear()`返回一个数字，而一个数字没有方法`.substr()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T04:10:31.513

你在增加`curr_month`！所以你不是在检查“今天和今天之间”，而是“从今天起一个月到今天一个月之间”，所以我认为它的行为是正确的。

旁注：这将在 1/29-1/31、3/31、5/31 等发生。最好先将日期添加 1 个月，然后提取日/月/年。

# actionscript-3 - AS3 在循环中创建动态加载器名称

> ID：11876626
> 
> 赞同：1
> 
> 时间：2012-08-09T04:02:17.813
> 
> 标签：actionscript-3, flash, variables, loops, dynamic

**为清楚起见进行了编辑：**我想在 for 循环中从外部 url 加载各种图像。我想循环调用它们，当它结束时，我再次开始循环。但是我不想用“http请求”再次调用它们，而是我想一遍又一遍地循环加载图像。

是否可以在循环中创建动态加载器名称？

这是代码示例：

```
var Count = 0;
// Loop Begins
var Count:Loader = new Loader();
Count.load(new URLRequest("myurl");
addChild(Count);
Count++;
// End Loop 
```

另一个例子是有一个名字，然后在最后加上数字。但是如何

```
var Count = 0;
// Loop Begins
var MyName+Count:Loader = new Loader(); 
MyName+Count.load(new URLRequest("myurl");
addChild(MyName+Count);
Count++;
// End Loop 
```

简而言之：我想将一堆图像加载到一个数组中，并通过稍后调用它们来循环加载的图像。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T04:56:19.120

CASE1 代码是如何在 Sequence 中加载图像。

CASE2 代码是如何在 Synchronized 中加载图像。

首先，您要导入所有图像的 URL 必须按顺序命名。例如 必须采用以下格式：

```
www.myURL.com/img0.jpg 
www.myURL.com/img1.jpg 
www.myURL.com/img2.jpg 
www.myURL.com/img3.jpg 
www.myURL.com/img4.jpg 
www.myURL.com/img5.jpg
        .
        .
        . 
```

**试试下面的代码，只是一个测试。**

## **`CASE1`**

```
var   imgLoader:Loader;
var   imgRequest:URLRequest;
var   count:int = -1;
const TOTAL_COUNT:int = 10;
var   imgBox:Array = [];
var   isCounting:Boolean;

function loadImage():void
{
    count ++;

    isCounting = true;

    imgLoader = new Loader();
    imgRequest = new URLRequest();
    imgRequest.url = "www.myURL.com/img" + count +".jpg";
    imgLoader.load(imgRequest);
    imgLoader.contentLoaderInfo.addEventListener(IOErrorEvent.IO_ERROR, unloadedImg);
    imgLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, onLoadedImg);

    if(count == TOTAL_COUNT)
    {
          isCounting = false;
          count = -1;
    }
}

function onLoadedImg(e:Event):void
{
    imgLoader.contentLoaderInfo.removeEventListener(Event.COMPLETE, onLoadedImg);

    var bmp:Bitmap = e.currentTarget.content;
    bmp.x = Math.random() * width;
    bmp.y = Math.random() * height;
    bmp.width = 100;
    bmp.height = 100;
    this.addChild(bmp);

    imgBox.push(bmp);

    if( isCounting == false) 
    {
        return;
    }

    loadImage();
}

function unloadedImg(e:IOErrorEvent):void
{
    imgLoader.contentLoaderInfo.removeEventListener(IOErrorEvent.IO_ERROR, unloadedImg);
    trace("load Failed:" + e);
}

loadImage(); 
```

* * *

## **`CASE2`**

```
var   imgLoader:Loader;
var   imgRequest:URLRequest;
const TOTAL_COUNT:int = 10;
var   imgBox:Array = [];

function loadImage2():void
{
    for(var i:int = 0; i<TOTAL_COUNT; i++)
    {
        imgLoader = new Loader();
        imgRequest = new URLRequest();
        imgRequest.url = "www.myURL.com/img" + i +".jpg";
        imgLoader.load(imgRequest);
        imgLoader.contentLoaderInfo.addEventListener(IOErrorEvent.IO_ERROR, unloadedImg);
        imgLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, onLoadedImg);
    }
}

function onLoadedImg(e:Event):void
{
    imgLoader.contentLoaderInfo.removeEventListener(Event.COMPLETE, onLoadedImg);

    var bmp:Bitmap = e.currentTarget.content;
    bmp.x = Math.random() * width;
    bmp.y = Math.random() * height;
    bmp.width = 100;
    bmp.height = 100;
    this.addChild(bmp);

    imgBox.push(bmp);
}

function unloadedImg(e:IOErrorEvent):void
{
    imgLoader.contentLoaderInfo.removeEventListener(IOErrorEvent.IO_ERROR, unloadedImg);
    trace("load Failed:" + e);
}

loadImage2(); 
```

如果你想访问加载的图像。参考以下代码。如果不把它们放在一个数组中，以后就不能访问了。

```
for(var int:i=0; i<TOTAL_COUNT; i++)
{
    var bitmap:Bitmap = imgBox[i] as Bitmap;
    trace("index: " + i + "x: " + bitmap.x + "y: " + bitmap.y, "width: " + bitmap.width + "height: " + bitmap.height);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T04:26:20.220

现在我们在同一页面上：

```
var imgArray:Array = new Array;
var totalImages:int = 42;
var totalLoaded:int = 0;
var loaded:Boolean = false;

function loadImages():void{
  for(var count:int = 0; count < totalImages; count++){
    var image:Loader = new Loader();
    image.load(new URLRequest("image" + i + ".jpg");
    image.addEventListener(Event.COMPLETE, loaded);
    imgArray.push(image);
  }
}

function loaded(e:Event):void{
  totalLoaded++;
  if (totalLoaded == totalImages){
    loaded = true;
  }
}

function displayImages():void{
  if (loaded){
    for(var i:int = 0; i < imgArray.length(); i++){
      addChild(imgArray[i]);
    }
  }
} 
```

# c# - 在日历控件中自定义选择

> ID：11876632
> 
> 赞同：2
> 
> 时间：2012-08-09T04:03:02.517
> 
> 标签：c#, asp.net, calendar

我在 Asp.Net 中使用日历控件。我要实现的条件是“如果用户从一周中选择特定的工作日，他应该不能从任何不同的周中选择任何其他日期”。就像，所有的选择都应该在一周内完成。但我无法弄清楚如何禁用除选定日期的一周之外的其余几周。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T05:09:03.193

我会这样做..当所选日期更改时，获取该特定周的开始和结束。然后，在渲染每一天时，确保该天在该周范围内。

```
private DateTime? _firstDayOfWeek;
private DateTime? _lastDayOfWeek;

protected void yourCalendar_SelectionChanged(object sender, EventArgs e)
{
    var selectedDate = yourCalendar.SelectedDate;

    DayOfWeek firstDay = CultureInfo.CurrentCulture.DateTimeFormat.FirstDayOfWeek;

    _firstDayOfWeek = selectedDate.Date;
    while (_firstDayOfWeek.Value.DayOfWeek != firstDay)
        _firstDayOfWeek = _firstDayOfWeek.Value.AddDays(-1);

    _lastDayOfWeek = selectedDate.Date;
    while (_lastDayOfWeek.Value.DayOfWeek != _firstDayOfWeek.Value.AddDays(6).DayOfWeek)
        _lastDayOfWeek = _lastDayOfWeek.Value.AddDays(1);
}

protected void yourCalendar_DayRender(object sender, DayRenderEventArgs e)
{
    if (_firstDayOfWeek.HasValue && _lastDayOfWeek.HasValue)
    {
        // There are dates to work with now, so check to see if the day falls
        // outside of the week range...
        if (e.Day.Date.Ticks < _firstDayOfWeek.Value.Ticks || e.Day.Date.Ticks > _lastDayOfWeek.Value.Ticks)
            e.Day.IsSelectable = false;
    }
} 
```

# css - 将 DIV 停靠在屏幕的一侧

> ID：11876634
> 
> 赞同：1
> 
> 时间：2012-08-09T03:56:17.980
> 
> 标签：css, html

我正在尝试创建侧边栏。好吧，设计应该是3个div。页眉（已经完成）、侧边栏和主 div。

侧边栏应位于屏幕左侧，一直延伸到底部（高度：100%）。我遇到的问题是我无法制作 100% 的 Div，因为它的高度仅延伸到我在 div 中的文本行数。

这是我目前拥有的侧边栏的 CSS：

```
#sidebar {
    float: left;
    margin-top:36px;
    width: 300px;
    height:100%;
    background-color: #111211;
} 
```

这是我目前拥有的正文的 CSS 代码：

```
body {
    margin:0;
    padding:0px;
    background-color:#87AFC7;
} 
```

这是HTML代码：

```
<body>
  <div id="sidebar"> left-sidebar </div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T04:09:16.457

您需要将侧边栏父级的高度设置为`100%`，然后将其父级设置为。由于侧边栏是元素的直接子`body`元素，只需将其添加到您的 CSS 中：

```
html,body { height:100%; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T05:57:29.210

你可以尝试类似的东西；

**CSS**

```
#container {
    top: 0px;
    bottom: 0px;
    left: 0px;
    right: 0px;
}
#top, #left, #right {
    position: absolute
}
#top {
    top: 0;
    width: 100%;
    height: 50px;
    background: #00b7f0
}
#left {
    top: 50px;
    width: 50px;
    bottom: 0px;
    background: #787878
}
#right {
    top: 50px;
    left: 50px;
    right: 0;
    bottom: 0px;
    background: #ff7e00
} 
```

**HTML**

```
<div id="container">
    <div id="top"></div>
    <div id="left"></div>
    <div id="right"></div>
</div> 
```

***[这](http://jsfiddle.net/blasteralfred/V4mxS/2/)***是一个有效的现场演示。

希望这可以帮助..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T04:29:35.437

您可以使用像素而不是百分比：

```
height:1000px; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T06:12:30.237

请试试这个，让我知道

```
#sidebar {
    position:fixed;
    right:0px;
    margin-top:36px;
    width: 300px;
    height:100%;
    background-color: #111211;
}

body, html {

hieght:100%

} 
```

# spring - 异常：在 SecurityContex 中找不到 Authentication 对象

> ID：11876636
> 
> 赞同：3
> 
> 时间：2012-08-09T04:03:22.703
> 
> 标签：spring, security

最近在使用spring security来控制方法的访问权限。访问一个页面可以触发认证方法（在@PreAuthorize 中指定）来决定用户是否有权限。

但我使用的是 Spring 计划作业（带有 @Scheduled 的方法），这意味着该方法在没有会话上下文的情况下自动运行。如果该方法使用@PreAuthorize 调用某个函数，则无法通过身份验证。它没有给出“真”或“假”来判断访问是被接受还是被拒绝。它给出了以下异常。这很烦人！

==================================================== =================================

```
org.springframework.security.authentication.AuthenticationCredentialsNotFoundException: An Authentication object was not found in the SecurityContext
at org.springframework.security.access.intercept.AbstractSecurityInterceptor.credentialsNotFound(AbstractSecurityInterceptor.java:325)
at org.springframework.security.access.intercept.AbstractSecurityInterceptor.beforeInvocation(AbstractSecurityInterceptor.java:196)
at org.springframework.security.access.intercept.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:64)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
at $Proxy40.refreshGlobalCacheStrategyMetrics(Unknown Source)
at org.sly.main.server.service.system.scheduling.MaintenanceServiceImpl.runRecreateStrategyMetricsCache(MaintenanceServiceImpl.java:85)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318)
at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
at org.springframework.aop.interceptor.AsyncExecutionInterceptor$1.call(AsyncExecutionInterceptor.java:80)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.lang.Thread.run(Thread.java:662) 
```

==================================================== =================================

我已经搜索了很多页面试图弄清楚，但我找不到最终的解决方案。

springsource.org 中的一个页面显示了问题：

[http://static.springsource.org/spring-security/site/faq.html#auth-exception-credentials-not-found](http://static.springsource.org/spring-security/site/faq.html#auth-exception-credentials-not-found)

> 1.5。我收到一条异常消息“在 SecurityContext 中找不到身份验证对象”。怎么了？
> 
> 这是另一个调试级别的消息，当匿名用户第一次尝试访问受保护的资源时出现，但是当您的过滤器链配置中没有 AnonymousAuthenticationFilter 时。
> 
> DEBUG [ExceptionTranslationFilter] - 发生身份验证异常；重定向到身份验证入口点
> org.springframework.security.AuthenticationCredentialsNotFoundException：在 org.springframework.security.intercept.AbstractSecurityInterceptor.credentialsNotFound(AbstractSecurityInterceptor.java:342) 在 org.springframework.security.intercept 的 SecurityContext 中找不到身份验证对象。 AbstractSecurityInterceptor.beforeInvocation(AbstractSecurityInterceptor.java:254)

我找到另一个页面来描述如何配置 AnonymousAuthenticationFilter [http://static.springsource.org/spring-security/site/docs/3.0.x/reference/anonymous.html](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/anonymous.html)

它说配置应该是：

```
<bean id="anonymousAuthFilter"
    class="org.springframework.security.web.authentication.AnonymousAuthenticationFilter">
  <property name="key" value="foobar"/>
  <property name="userAttribute" value="anonymousUser,ROLE_ANONYMOUS"/>
</bean>

<bean id="anonymousAuthenticationProvider"
    class="org.springframework.security.authentication.AnonymousAuthenticationProvider">
  <property name="key" value="foobar"/>
</bean> 
```

所以我在我的 application-security.xml 中配置它，但它没有任何区别。

```
<beans:bean id="springSecurityFilterChain"
    class="org.springframework.security.web.FilterChainProxy">
    <security:filter-chain-map path-type="ant">
        <security:filter-chain pattern="/**"
            filters="anonymousAuthFilter" />
    </security:filter-chain-map>
</beans:bean>
<!-- ///////////////////////////////////////// -->
<!-- ////for AnonymousAuthenticationFilter//// -->
<!-- ///////////////////////////////////////// -->
<beans:bean id="anonymousAuthFilter"
    class="org.springframework.security.web.authentication.AnonymousAuthenticationFilter">
    <beans:property name="key" value="foobar" />
    <beans:property name="userAttribute" value="anonymousUser,ROLE_ANONYMOUS" />
</beans:bean>

<beans:bean id="anonymousAuthenticationProvider"
    class="org.springframework.security.authentication.AnonymousAuthenticationProvider">
    <beans:property name="key" value="foobar" />
</beans:bean> 
```

有人精通春季安全吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T05:28:58.683

从异常和您的配置中，我看到没有身份验证过程。这对于任何访问安全资源都是必需的。所以你应该被重定向到`entryPoint`页面。

根据您的过滤器配置，我没有看到其他过滤器，这很奇怪。您使用的是命名空间还是过滤器链？如果后者为真，请添加其他过滤器。您可能需要查看[此](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/security-filter-chain.html)内容以了解您的任务需要哪些过滤器。

# apache - Tomcat 7 出现 CreateJavaVM 失败错误

> ID：11876637
> 
> 赞同：8
> 
> 时间：2012-08-09T04:03:30.510
> 
> 标签：apache, jvm, tomcat7, permgen

我在 Windows R2 服务器上有一个 Apache tomcat 7.0.5 服务器，我在上面部署了一个 webApp（java JSF），一切正常，但它突然停止并且不会再次运行。当我尝试运行它时，它告诉我“错误 1067：进程意外终止”并且在日志中我得到这些文件：

tomcat7-stdout.2012-08-08.log

```
2012-08-08 18:00:06 Commons Daemon procrun stdout initialized 
```

commons-daemon.2012-08-08.log

```
[2012-08-08 19:02:30] [info]  Commons Daemon procrun finished
[2012-08-08 19:13:02] [info]  Commons Daemon procrun (1.0.4.0 64-bit) started
[2012-08-08 19:13:02] [info]  Running 'Tomcat7' Service...
[2012-08-08 19:13:02] [info]  Starting service...
[2012-08-08 19:13:02] [error] CreateJavaVM Failed
[2012-08-08 19:13:03] [info]  Service started in 1000 ms.
[2012-08-08 19:13:03] [info]  Run service finished.
[2012-08-08 19:13:03] [info]  Commons Daemon procrun finished 
```

tomcat7-stderr.2012-08-08.log

```
2012-08-08 18:00:06 Commons Daemon procrun stderr initialized
Please use CMSClassUnloadingEnabled in place of CMSPermGenSweepingEnabled in the future
Unrecognized VM option '+HeapDumpOnOutOfMemoryError ' 
```

因为我遇到了一些“perm gen”内存错误，所以我在我的 apache Tomcat 属性中添加了一些东西，按照这个链接 [如何处理 Perm Gen](http://www.zulutown.com/blog/2009/03/12/solving-tomcat-outofmemoryerror-heap-space-and-permgen-space/)

所以我的 Java 选项看起来像这样：

```
-Dcatalina.home=C:\Program Files\Apache Software Foundation\Tomcat 7.0
-Dcatalina.base=C:\Program Files\Apache Software Foundation\Tomcat 7.0
-Djava.endorsed.dirs=C:\Program Files\Apache Software Foundation\Tomcat 7.0\endorsed
-Djava.io.tmpdir=C:\Program Files\Apache Software Foundation\Tomcat 7.0\temp
-Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager
-Djava.util.logging.config.file=C:\Program Files\Apache Software Foundation\Tomcat 7.0\conf\logging.properties
-XX:+CMSClassUnloadingEnabled
-XX:+CMSPermGenSweepingEnabled
-XX:PermSize=256m
-XX:MaxPermSize=256m
-XX:+HeapDumpOnOutOfMemoryError 
```

关于为什么服务器不再启动的任何想法？谢谢！

～喵喵

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-15T17:35:55.477

在花了几个小时试图弄清楚这一点后，我终于找到了。我在 VM 命令的末尾有一个额外的空间。

```
 '+HeapDumpOnOutOfMemoryError ' 
```

这给了我无法识别的 VM 选项.....

感谢阅读，希望当您收到此错误时，您可以采取额外的预防措施来验证语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T19:24:40.713

管理你需要设置一些 Xms 和 Xmx 参数的内存

*   Xms 管理初始堆大小
*   Xmx 管理最大堆大小

因此尝试添加：

```
-Xms=256m -Xmx=256m 
```

问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T19:23:09.483

错误出现在您的帖子中甚至没有列出的选项“HeapDumpOnOutOfMemoryError”上。您能否从“tomcat”服务屏幕发布“Java”选项卡的屏幕打印（类似于您提供的链接）？这将告诉我们您正在使用的实际选项以及您设置的内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-27T06:38:18.293

将文件 msvcr71.dll 从 java 安装的 bin 目录复制到 tomcat 安装的 bin 目录。

# c# - 如何设计一个订阅者依赖另一个订阅者的场景？

> ID：11876647
> 
> 赞同：0
> 
> 时间：2012-08-09T04:04:36.547
> 
> 标签：c#, design-patterns, ooad

在我的应用程序中，我有一个场景，如果特定模块发生更改，则必须将其通知给其他几个模块。我认为观察者模式适合这里，通过将发生更改的模块保持为主题并将要通知的模块作为观察者。

但是按照观察者模式的原则，观察者是相互独立的。观察者之间不应该有任何联系。就我而言，尽管模块不同，但它们是相互依赖的。成功完成第一个模块的执行对于下一个要执行的模块很重要。此外，如果模块 x 发生故障，则必须恢复模块 1 对模块 x-1 所做的所有更改。也就是说，要么所有模块都必须成功执行，要么我们必须回滚到以前的状态。你可以把它想象成一个交易。然后我意识到我错了，观察者模式不是实现这一点的正确方法。

我有点想提出一个干净的设计，其中有一组模块需要在主题发生变化时进行处理，但在约束条件下，模块相互依赖。有人可以帮我解决这个问题以提出一个好的设计吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:43:02.000

关于交易部分。实际上，您的问题是您正在对数据库执行一系列更新操作，并且一个失败应该恢复以前的所有操作。

天真的解决方案是简单地将原始调用包装在事务范围内。

开始事务 A：更新数据库引发事件 B：更新数据库引发事件 C：更新数据库结束事务。

这可能会奏效！唯一的问题是，如果您在两者之间进行计算，则会延长事务的持续时间。事务应尽可能短，因此您需要确保在事务期间不会“浪费”任何时间在与事务下的资源无关的操作上。

*如果*您有上述问题，您可以将所有更新命令累积在一个地方（一个 lambda 表达式列表，每个都将延迟执行包装到 db）并在累积所有更改后立即运行它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T05:44:01.770

您仍然可以使用观察者模式：您需要做的就是改变事件在观察者之间传播的方式。

在最初的设计中，模块 X 引发了模块 A、B 和 C 的事件。但问题是 C 依赖于 B，并且由于您无法控制（也不想）观察者的执行顺序， 你有问题。我建议你简单地让 C 和 B 的观察者，而不是 A 的观察者！

这样，当 A 引发事件时，它将以所需的顺序传播。A -> B -> C。

话虽如此，我想知道您是否真的需要这种程度的解耦。基本上，您在这里描述的是标准的信息流，除非模块非常可重用，否则您可以显式地进行调用。A直接调用B，B直接调用C。

事务是数据传播的正交关注点。恐怕您将不得不分别对待它们。如果您详细说明可能需要回滚的状态转换，社区也可能会尝试提供帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T08:46:48.283

你可以为你的观察者使用 Composite 和一个获取-执行-释放结构。不过，我不确定我会不再称它为观察者——它更像是事务与复合的抽象。

界面将是这样的：

```
public interface TransIf {
  boolean acquire();
  void execute() throws TransFailed;
  void release();
} 
```

# mysql - 来自数据库 ASP/MySQL 的背景颜色

> ID：11876655
> 
> 赞同：0
> 
> 时间：2012-08-09T04:05:59.357
> 
> 标签：mysql, asp-classic

我试图让我的 asp-classic 页面根据通过 js 颜色选择器发送到 mysql db 的六位十六进制值显示背景颜色。我可以显示图像，但不能显示颜色。这是我的小片段。

正文 {背景色：url(<%=(Recordset1.Fields.Item("bg_color").Value)%>);}

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T08:01:19.597

只需删除 url(..) 的东西，因为你想要一种不需要 url() 的颜色...

像这样：

```
body {background-color: <%=(Recordset1.Fields.Item("bg_color").Value)%>;} 
```

# php - PHP超时不会停止脚本？

> ID：11876656
> 
> 赞同：2
> 
> 时间：2012-08-09T04:06:02.350
> 
> 标签：php, time, timeout, max, execution

我期待一些错误，如 500 或超时页面，代码如下：

```
<?php
      ini_set('max_execution_time',5);
      set_time_limit(5);
      echo 'start';
      sleep(10);
      echo '<br/>hi'; 
```

但是，我得到这样的东西：

```
开始
你好
```

我做错了什么吗？

我想要的只是在第 5 秒超时时看到脚本停止，因此不应执行第二个回显（我知道这是一个很奇怪的要求）

有没有人能开个灯，谢谢

PS：似乎 sleep() 部分很分散注意力，我如何更改代码如下：

```
<?php
      ini_set('max_execution_time',5);
      set_time_limit(5);
      echo 'start';
      for($i=1;$i<100000000;$i++){
          if($i%100==2) echo $i;
          else echo '--';
      }
      echo '<br/>hi'; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T04:10:16.397

根据 php.net 中的此评论，您必须使用 unix ... [“请注意，在 Linux 下，睡眠时间被忽略，但在 Windows 下，它算作执行时间。”](http://www.php.net/manual/en/function.set-time-limit.php#75557) （在 Unix/Linux 中，睡眠不被考虑为执行时间的一部分。）

此外，要使其超时，只需永远循环

```
<?php
while (true) {
    // i'll error out after max_execution_time
} 
```

要查看多长时间，您可以使用[microtime](http://php.net/manual/en/function.microtime.php)找出执行时间，或者查询您刚刚设置的 max_execution_time 变量。

```
$max_time = ini_get("max_execution_time");
echo $max_time
?> 
```

**更新** 使用您更新的代码，输出符合预期。

```
Fatal error: Maximum execution time of 5 seconds exceeded in newfile.php on line 7 
```

# linux - 根据用户输入创建文件

> ID：11876657
> 
> 赞同：0
> 
> 时间：2012-08-09T04:06:04.537
> 
> 标签：linux, bash

我有一个 bash 脚本，它要求用户输入 3 个数字（例如 123）。

我被困在如何分隔这些数字以创建文件 1、文件 2、文件 3，我还必须确定它们是否是唯一的。

任何帮助，将不胜感激。

如果需要，我可以发布我的 bash 脚本。

```
! /bin/bash
clear
echo -n "Enter three digits number: "
read number

echo $number | grep "^[0-9][0-9][0-9]$"
if [ "$?" -eq 1 ] 
then
   echo "Error!! Please enter only 3 numbers."
   exit 1
fi

if [ -d ~/a2/numbers ]
then
   rm -r ~/a2/numbers
fi
mkdir ~/a2/numbers

if [ ! -e ~/a2/products ]
then
   echo "Error the file \'products\'! does not exist"
   exit 1
fi
echo ' '
cat ~/a2/products

echo ' '
cut -f2 -d',' ~/a2/products > ~/a2/names
cat ~/a2/names

echo "I have $(cat ~/a2/names | wc -l) products in my product file"
echo ' ' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T04:14:36.913

您可以使用`fold`将按字符拆分字符串的命令。例子：

```
echo ${number} | fold -w1 
```

要检查它们是否唯一，只需使用该`if`语句，因为在您的情况下，您只允许三个一位数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T05:28:18.807

```
#!/bin/bash
read -p "enter 3 numbers: " nums
if [[ $nums != [0-9][0-9][0-9] ]]; then
  echo "digits only please"
  exit
fi

read n1 n2 n3 < <(sed 's/./& /g' <<< $nums)

if ((n1 == n2)) || ((n1 == n3)) || ((n2 == n3)); then
  echo "no duplicate numbers"
  exit
fi 
```

# c - 在 Windows x64 上调试 C 故障转储

> ID：11876661
> 
> 赞同：0
> 
> 时间：2012-08-09T04:06:50.320
> 
> 标签：c, debugging, dump, crash-dumps

在 Windows x64 2008 R2 机器上创建了一个崩溃转储（通过设置 LocalDump 注册表项创建的完整转储，如此处所述[）](http://msdn.microsoft.com/en-us/library/windows/desktop/bb787181%28v=vs.85%29.aspx)，我可以在同一台机器上使用 VS 2010 调试此转储文件（可以为我的模块，查看堆栈跟踪中的模块，函数名称，选择源文件后查看代码）但是当我将此转储、必要的 EXE、DLLS 及其 PDB 和源文件复制到不同的 Windows x64 2008 R2 机器时，VS 2010 看不到调用堆栈窗口中的模块名称和函数名称（尽管可以为我的模块加载符号）。我想知道我在这里缺少什么步骤。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T04:41:29.023

是否使用了相同的 exe 和相应的 pdb 导致崩溃？我的意思是你不能重新编译相同的代码并使用 pdb 和 exe。您需要有导致崩溃的 exe 及其相应的 pdb

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T08:39:34.793

使用 Windows 调试工具中的 Windbg。使用 Windbg 中的[!sym noise](http://msdn.microsoft.com/en-us/library/windows/hardware/ff565396%28v=vs.85%29.aspx)命令显示有关 exe 和 dll 图像的详细信息。这将向您显示在哪里找不到正确的 pdb 并突出显示 pdb 不匹配的情况。还要检查您是否在两台机器上设置了相同的符号路径。

# wordpress - 在 wordpress 中获取特定所有者的链接

> ID：11876667
> 
> 赞同：-2
> 
> 时间：2012-08-09T04:07:40.283
> 
> 标签：wordpress

我想显示链接，说所有者 id 5。我怎样才能在 wordpress 中实现这一点。提前感谢您的任何建议或帮助。我找到了这个[链接](http://codex.wordpress.org/Template_Tags/wp_list_bookmarks)。但没有选项提及link_owner id

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T04:42:23.973

如果您正在拉取当前登录用户的帖子，那么您可以使用[get_the_author_posts()](http://codex.wordpress.org/Function_Reference/get_the_author_posts)或[the_author_posts_link()](http://codex.wordpress.org/Function_Reference/the_author_posts_link)。

如果没有，那么您可以使用[WP_Query](http://codex.wordpress.org/Class_Reference/WP_Query)。查看作者参数，如果您需要进一步的帮助，请告诉我。

# c# - Codeplex Excel 数据阅读器为 Excel 2010 提供空数据集

> ID：11876669
> 
> 赞同：2
> 
> 时间：2012-08-09T04:07:48.030
> 
> 标签：c#, excel, codeplex

我正在使用 Codeplex Excel 数据阅读器来读取 excel。我面临的问题是它可以毫无困难地读取 Excel 97-2003 文档，但是当使用 ExcelReaderFactory.CreateOpenXmlReader(stream) 读取 Excel 207-2010 文档时，它输出的是一个空数据集。有没有人遇到过这个问题。有没有人对此有任何解决方案？

读取方法如下

```
private DataSet ReadExcel(string fileName, string extention)

{

    DataSet dsData = null;
    FileStream stream = File.Open(fileName, FileMode.Open, FileAccess.Read);
    IExcelDataReader excelReader = null;

    try
    {

        if (extention.Equals("xls"))
        {
            //1\. Reading from a binary Excel file ('97-2003 format; *.xls)
            excelReader = ExcelReaderFactory.CreateBinaryReader(stream);
        }
        else
        {
            //2\. Reading from a OpenXml Excel file (2007 format; *.xlsx)
            excelReader = ExcelReaderFactory.CreateOpenXmlReader(stream);
           // excelReader = ExcelReaderFactory.CreateBinaryReader(stream);
        }

        excelReader.IsFirstRowAsColumnNames = false;
        dsData = excelReader.AsDataSet();
    }
    catch (Exception ex)
    {
        throw ex;
    }
    finally
    {
        if (excelReader != null)
        {
            excelReader.Close();
        }
    }
    return dsData;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T04:34:59.413

8000401a 表示它与`Run As Logon Failure`.

避开[办公室的服务器端自动化](http://support.microsoft.com/kb/257757)。或者使用 XML 在服务器上处理 Excel 电子表格。

根据[Excel 数据阅读器的支持问题](http://exceldatareader.codeplex.com/releases/view/31934)：

> 设计和使用都很棒。到目前为止，我遇到的唯一问题是某些 XLSX 文件无法正确解析（读取错误的表格、错误的单元格值等）。为了解决这些问题，我不得不使用来自 [http://www.icsharpcode.net/OpenSource/SharpZipLib/Download.aspx](http://www.icsharpcode.net/OpenSource/SharpZipLib/Download.aspx)的最新 SharpZipLib 重建 Excel.dll 。正如其他人所说，项目需要更新，但仍然很好。

或者只是使用标准的 micrsoft 方式：

```
Microsoft.Office.Interop.Excel.Application xlApp;
Workbook wb = null;
try
{
wb = xlApp.Workbooks.Open(filePath, false, true,5,null,"WrongPAssword");
}

foreach (object possibleSheet in wb.Sheets)
   {
   var aSheet = possibleSheet as Worksheet;
     if (aSheet != null)
     {
.... 
```

# java - JComboBox 列出对象 ArrayList 中的字符串

> ID：11876674
> 
> 赞同：0
> 
> 时间：2012-08-09T04:08:24.660
> 
> 标签：java, collections, arraylist

我有一个`ArrayList`从文件中获取包含用户信息的对象

加载完成后，我需要将每个对象的 name 属性加载到 a`JComboBox`中，以便用户可以选择用户名继续。

来自an的这种转换`ArrayList<object> user --> String[] strName`是我遇到麻烦的地方

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T04:14:04.463

```
String[] values = list.toArray(new String[list.size()]); 
```

您可以轻松地循环`ArrayList`并使用该`DefaultComboBoxModel's` `addElement`方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T04:13:05.773

[这里](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html)有一个关于如何使用组合框的很好的教程。

```
ArrayList<User> users;
int nUsers = users.size();
String[] userNames = new String[nUsers];
for (int i=0;i <nUsers; ++i) {
    User user = users.get(i);
    userNames[i] = user.getName();
}
JComboBox userList = new JComboBox(userNames); 
```

如果列表是 ArrayList<Object> 那么您需要：

```
// call toString on the object...
userNames[i] = String.valueOf(user);
// or cast it if you know the type
User user = (User)users.get(i); 
```

# three.js - Three.js r49 中 CanvasRenderer 纹理支持的替代方案？

> ID：11876675
> 
> 赞同：0
> 
> 时间：2012-08-09T04:08:30.110
> 
> 标签：three.js

在 Three.js r47 中，我使用 CanvasRenderer 绘制了一些带有图像纹理的对象。然后我将 Three.js 升级到 r49，所有这些对象都不再显示了。r49 的更改日志显示“删除了 CanvasRenderer 中的 Lamber 纹理支持”。所以我认为这就是原因。

我的问题是 Three.js 是否支持通过 CanvasRenderer 绘制纹理对象的替代方法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T04:21:23.667

尝试`MeshBasicMaterial`改用？

# javascript - window.open() URL 有 www。和 cookie 问题

> ID：11876678
> 
> 赞同：1
> 
> 时间：2012-08-09T04:08:55.913
> 
> 标签：javascript, jquery, html, url, popup

我有一个执行此操作的脚本：

```
window.open("http://www.myurl.com","myURL","width=400,height=200"); 
```

好的，这行得通。我设置了 cookie 和会话。用户只有在登录时才能访问我的页面。`window.open()`当我注销时，此页面将按预期将我引导至登录页面。

`www`当我拿出`window.open()`

```
window.open("http://myurl.com","myURL","width=400,height=200"); 
```

cookie 和会话不适用？即使我已经注销，我仍然可以进入该页面。

现在，当我`myurl.com`在原始浏览器中尝试时，它会将我定向到我应该在的登录页面。

任何想法为什么？我的意思是我可以将其设置为 www，但我想知道原因是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T05:21:19.913

我假设您正在使用 PHP 的`setcookie()`函数设置 cookie（因为这就是您对问题的评论）。

PHP 会将这些 cookie 设置为用户当前所在的域。如果用户是 on `www.mysite.com`，则 cookie 将仅应用于`www.`-subdomain。相反，您应该为域 PHP 设置 cookie：

```
setcookie('name', 'value', $time, '/', '.example.com') 
```

请注意前导点：`.example.com`，因为它表示通配符，因此 cookie 应用于`example.com`（即，`www.example.com`和`example.com`，以及您可能拥有的其他子域）的所有子域。

有关此函数的更多信息：[PHP 文档](http://nl.php.net/manual/en/function.setcookie.php)

# asp.net - 实体框架DBContexts如何构造？

> ID：11876683
> 
> 赞同：1
> 
> 时间：2012-08-09T04:09:14.120
> 
> 标签：asp.net, asp.net-mvc

我正在努力创建一个包含许多模型的站点。我应该有个人背景，还是应该只有一个？我已经将我所有的 Dbsets 放在了我创建的总括上下文中，这样 Add-Migration 和 Update-Database 才能真正起作用。（因为它只能处理 1 个上下文）。

我注意到每个强类型控制器都有一个与其关联的模型上下文的实例。现在我想知道我是否应该只为一个页面生命周期永久打开一个开放上下文（我的伞超类上下文）。一直创建上下文的新实例并一直处理它们（在本地方法中）似乎效率太低了。推荐的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T04:29:24.610

最好让一个上下文跟踪多个实体。然后，相同的上下文可以**跟踪**所有实体，并且在使用连接查询和更新具有外键关系的实体时非常有用。您还可以使用 fluent API 在 DBContext 方法“OnModelCreating”中配置实体。如果上下文没有它们，那么配置实体关系就变得很困难。在不同的上下文中对实体进行分组最终会影响代码的维护。我喜欢流畅的 API 方式来配置实体，以保持模型清洁和面向未来。

DBContext 具有可以覆盖的 Dispose 方法。我们可以更好地利用它。除了 DBContext 创建一个数据库上下文，它是从哪里调用的，这绝对没问题。这就是我们想要的，不是吗？传入请求以线程的形式出现，该线程创建 DBContext（数据库上下文），然后查询数据库，获取模型，然后填充视图，然后将其返回给用户。

重要的是使用 DBContext 的“using”语句，它将在作用域超出 using 大括号后立即处理上下文。如果你这样做了，那么你在请求生命周期中的上下文就没有问题了。

```
using (MyDbContext dbCtx = new MyDbContext())
 {
     //fetch the model
 } 
//here the context is disposed. 
```

# php - 如何在组件中保持页眉和页脚相同，并且内容将被更改

> ID：11876686
> 
> 赞同：0
> 
> 时间：2012-08-09T04:09:18.677
> 
> 标签：php, javascript, jquery, html, web

我是Web开发的初学者。我可以使用 PHP 服务器端脚本。

我有以下设计：

1.  第 5 页
2.  都有相同的页眉和页脚

是否可以将页眉和页脚保留在不同的文件中，以便每个页面都将页眉/页脚用作组件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T04:13:41.093

是的，您可以使用 php[包含](http://php.net/manual/en/function.include.php)功能。

你可以写这样的东西。对于您的所有 5 页，此页眉和页脚将是不变的。并且在每个页面中您都可以更改您的代码。

```
<?php
include '/Path/To/header.php';
// Here you can write your page script without header and footer.
include '/Path/To/footer.php';
?> 
```

# database - 如何提高 cassandra 中数据索引的性能

> ID：11876703
> 
> 赞同：1
> 
> 时间：2012-08-09T04:11:45.460
> 
> 标签：database, cassandra, cql

**Cassandra**没有一些 CQL 喜欢`like clause.... in MySQL`在数据库中搜索更具体的数据。

我查看了一些数据并提出了一些想法

1.使用*Hadoop*

2.使用*MySQL服务器*做我的另一个数据库服务器

但是有什么方法可以让我更轻松地提高我的**Cassandra DB**性能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:48:58.473

可以通过多种方式提高 Cassandra DB 的性能，但我觉得您需要有效地查询数据，这与 db 本身的性能调整无关。

如您所知，Cassandra 是一个 nosql 数据库，这意味着在处理它时，您会牺牲查询的灵活性以实现快速读/写以及可扩展性和容错性。这意味着查询数据会稍微困难一些。有许多模式可以帮助您查询数据：

提前知道你需要什么。由于使用 CQL 进行查询不如在 RDBMS 引擎中找到的灵活，因此您可以利用快速读写并通过复制以正确格式保存要查询的数据。太复杂了？

```
Imagine you have a user entity that looks like that:

{
  "pk" : "someTimeUUID",
  "name": "someName",
  "address": "address",
  "birthDate": "someBirthDate"
} 
```

如果您像这样保留用户，您将按照他们加入您的数据库的顺序获得一个排序的用户列表（您保留了他们）。假设您想获得相同的用户列表，但只包含名为“John”的用户。使用 CQL 可以做到这一点，但效率略低。您可以在此处修改此问题的方法是通过复制数据来反规范化您的数据，以适应您要对其执行的查询。您可以在此处阅读有关此内容的更多信息：

[http://arin.me/blog/wtf-is-a-supercolumn-cassandra-data-model](http://arin.me/blog/wtf-is-a-supercolumn-cassandra-data-model)

但是，这种方法对于简单的查询似乎没问题，但对于复杂的查询，它有点难以实现，而且，如果您不确定要提前查询什么，则无法事先以正确的方式存储数据。

Hadoop 来拯救。如您所知，您可以使用 hadoop 的 map reduce 来解决涉及大量数据的任务，而根据我的经验，Cassandra 数据可以变得非常非常大。使用 hadoop，要解决上面的示例，您将按原样迭代数据，在每个 map 方法中查找用户是否名为 John，如果是，则写入上下文。

以下是伪代码的外观：

```
map<data> {
 if ("John".equals(data.getColumn("name")){ 
    context.write(data);
 }
} 
```

在 map 方法的最后，您将得到一个名为 John 的所有用户的列表。您可以在您提供给 hadoop 的数据上放置一个时间范围（范围切片），这将为您提供在特定时期内加入您的数据库并命名为 John 的所有用户。如您所见，在这里您拥有更多的灵活性，您几乎可以做任何事情。如果你得到的数据足够小，你可以把它作为摘要数据放在一些 RDBMS 中，或者将它缓存在某个地方，以便对相同数据的进一步查询可以轻松地检索它。您可以在此处阅读有关 hadoop 的更多信息：

[http://hadoop.apache.org/](http://hadoop.apache.org/)

# java - 为不同的屏幕设计 xml 布局：Android

> ID：11876705
> 
> 赞同：1
> 
> 时间：2012-08-09T04:12:01.697
> 
> 标签：java, android, android-layout, android-screen

我正在开发一个小应用程序，左角（垂直）有 3 个按钮和一个覆盖屏幕其余部分的编辑框。

我想运行这个应用程序以便能够在所有屏幕分辨率上工作。所以我使用了相对布局、线性布局和 Android:weight 按钮，它们平等地共享按钮的大小并且工作正常。

我的问题是我做错了吗？

我们应该为不同的屏幕设计不同的布局还是使用相同的布局但添加重量和填充等属性很好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T04:32:16.060

> 因此，您需要为您的 android 应用程序提供响应式布局。

**指向你的问题：**

> [+1] 布局 -> 相对/线性（除了相对布局）
> 
> 属性（按钮）-> Android：重量

是你为你的应用做的正确的事情。

**选择：**

但是如果你想要一个更具[响应性的设计](http://www.html5rocks.com/en/mobile/responsivedesign/)，那么你可以通过使用 html5 和 css3 媒体查询等来遵循响应式设计技术。而且，也可以选择流畅的布局。通过这样做，您将拥有的优势是：

> *   不会有仅适用于**android**的本机 UI，但如果您需要，同样可以用于其他平台（**iOS、黑莓**等）。
>     
>     
> *   该设计将与本机浏览器更加无缝，并且小部件在您的 android 平台的较新版本中也不会过时，并且一旦完成更改也将反映在其他平台上。

**更多信息：如果您想清楚了解如何为 Android 设计，必须阅读**

[http://developer.android.com/design/style/devices-displays.html](http://developer.android.com/design/style/devices-displays.html) [http://developer.android.com/design/style/metrics-grids.html#48dp-rhythm](http://developer.android.com/design/style/metrics-grids.html#48dp-rhythm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T04:14:06.773

你可以看到这个[`Supporting Multiple Screens`](http://developer.android.com/guide/practices/screens_support.html)也[`Designing for Multiple Screens`](http://developer.android.com/training/multiscreen/index.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T07:05:17.397

要支持不同的屏幕尺寸，您必须实现不同的布局。在 res 目录下，您应该创建以下目录：

布局布局-小布局-大布局-xlarge

在每个目录中你实现你的布局。请注意以相同的名称调用所有布局。如果您也想支持横向模式，则必须添加：

布局-小地布局-大地布局-地

当在 Eclipse 中打开布局时，选择名为 'Graphical Layout' 的选项卡，您将看到您的布局将如何显示。使用左上角的选项更改屏幕尺寸，您可以检查它在不同屏幕尺寸下的显示方式。如果出现问题，您可以使用打开 xml 并进行更正。我在这里创建了一个小教程[Multiple screen support](https://www.survivingwithandroid.com/2012/07/how-to-support-multiple-screen-in.html)

希望这对你有帮助

# c# - 是否可以阻止 ObjectDataSource 自动绑定？

> ID：11876707
> 
> 赞同：7
> 
> 时间：2012-08-09T04:12:13.463
> 
> 标签：c#, asp.net, gridview, objectdatasource

我有一个 GridView，我使用 ObjectDataSoure 作为数据源。ObjectDataSource 从 TextBox 和 DropDownList 中获取参数，然后将其传递到存储过程中。还有一个名为 Search 的按钮，可用于通过提供/更改 TextBox 和/或 DropDownList 中的值来强制刷新 GridView。但是我注意到，如果我更改了值，我不必单击“搜索”按钮；只需单击 GridView 即可导致数据绑定。

在仍然使用 ObjectDataSource 的同时有没有办法阻止这个动作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T04:21:29.127

当您在 GridView 上分配 DataSourceID 时，网格将自动绑定到 ObjectDataSource。您可以简单地省略 GridView 上的该属性，然后等到搜索按钮的单击事件来分配它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T04:30:32.077

问题是每次用于 ObjectDataSource 的任何参数发生更改时，ODS 都会执行“DataBind”。

您可以使用两个 HiddenFields 来保留这些值。当您更改 HiddenFields 上的值时，ObjectDataSource 只会执行“DataBind”。因此，您可以更改 TextBox 和 DropDownList 上的值，当您需要“DataBind”时，您只需将值复制到 HiddenFields。

这是我为另一个[问题](https://stackoverflow.com/a/11877172/1350308)制作的代码示例：[Q11874496WebApp.7z](https://dl.dropbox.com/u/49510149/stackoverflow/dotnet/Q11874496WebApp.7z)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-21T12:50:55.287

In my case i just used a private boolean field in codebehind and respect its values on datasourceName_Selecting event.

For example i declared the following:

```
private bool IsInSearchingMode = false; 
```

set it true only in search mode:

```
 protected void btnSearch_Click(object sender, EventArgs e)
    {
        this.IsInSearchingMode = true;
        this.gridData.DataBind();
    } 
```

and then check the value on Selecting event:

```
 protected void myLinqDataSource_Selecting(object sender, LinqDataSourceSelectEventArgs e)
        {
            e.Result = new List<BranchDataClass>();
            if (!this.IsInSearchingMode)
                return; 

// e.result = select code 
} 
```

A drawback is that a new page_load that is not caused by btnSearch_Click will reset the private variable's value. If you want it to be persistent you should use a hidden field as proposed or save it to viewstate.

# php - 如何在数组索引中连接两个变量？？？PHP

> ID：11876711
> 
> 赞同：-1
> 
> 时间：2012-08-09T04:13:00.490
> 
> 标签：php, arrays

如何连接数组索引值，就好像我有两个 var

```
 $string='helloworld'; 
```

和

```
$数字=1
```

我如何将它们连接到像 $array[$string+$number]=$value(some value variable) 这样的数组值中，但它给了我像 $array[1]= 这样的结果

```
 $string="helloworld;
    $number=1;
    $array[$string+$number]=$value; 
```

结果，

```
 $array[1]=... 
```

我也通过各种方式尝试过，但它不起作用

希望得到你的建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T04:15:31.583

`+`添加数字。`.`连接字符串。

```
echo "Hello " . "world!"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T04:33:01.497

合并以上两个答案...

```
$string="helloworld";
$number=1;
$array[$string . $number]=$value; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T04:17:31.200

检查一下

```
$string="helloworld"; // missing closing "
$number=1;
$array[$string . $number]=$value;  // replace + with . for concatination 
```

# vim - 使用空格确认搜索

> ID：11876712
> 
> 赞同：7
> 
> 时间：2012-08-09T04:13:02.727
> 
> 标签：vim, ack, janus

我将 Ack 与 MacVim 和 Janus 插件一起使用。每次我想在我的项目中搜索包含空格的字符串时，我都需要使用`\`or来转义它们`.`

有没有办法避免这种情况？我知道一旦你输入一个空格，你搜索的目录应该跟随......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T04:44:46.913

您也可以引用您的搜索：

```
:Ack "my searching query"
:Ack 'another one' 
```

# version-control - Jenkins - 如何阻止构建流？

> ID：11876718
> 
> 赞同：2
> 
> 时间：2012-08-09T04:13:46.560
> 
> 标签：version-control, build, jenkins

**问题：**如果另一个构建流正在构建过程中，有没有办法阻止构建流？

这就是我想要做的。我有两个包含多个作业的构建流。我可以阻止给定流的上游或下游作业。但是，如果另一个构建流正在构建，我无法阻止构建流。

**这是我的设置：**

**构建流 1：** A1 -> B1 -> C1
**构建流 2：** A2 -> B2 -> C2

作业**A1**和**A2**是使用 SCM 插件设置的，以轮询我们 repo 中的不同位置。因此，可以在发现更改的任何时候触发构建。构建流应该被独立处理，但如果另一个有工作构建则阻塞。

我已经尝试过**Build Blocker Plug-in**但问题是它**只会**在当前正在构建一个或多个工作时才会阻止。它似乎并不关心构建队列中等待的其他构建。

我提供给我的资源数量有限，所以我不得不加倍构建我们的构建。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T09:08:06.333

[排除插件](https://wiki.jenkins-ci.org/display/JENKINS/Exclusion-Plugin)可能会在这里为您提供帮助。

您要做的是设置另外两个作业来管理构建火车，M1 作业将具有执行以下操作的构建步骤：

1.  获取信号量
2.  触发 A1
3.  等待 C1 完成
4.  释放信号量

M2工作将是相似的

1.  获取信号量
2.  触发 A2
3.  等待 C2 完成
4.  释放信号量

您将需要超时，但这本质上是想法

# javascript - .selected 在 Safari 中不起作用

> ID：11876724
> 
> 赞同：0
> 
> 时间：2012-08-09T04:14:54.507
> 
> 标签：javascript, safari

我有一个表单，如果用户从下拉列表中选择“已婚”，则会显示一些文本字段，询问他们配偶的信息。在 Firefox 和 IE 中一切正常，但 Safari 给我带来了麻烦。

这是HTML：

```
<ul>
<li>
              <label for="maritalStatus">Marital Status</label><br/>
              <select name="maritalStatus" id="maritalStatus" tabindex="80">
                <option name="Single" id="Single" value="Single" selected="selected" onClick="imSingle()">Single</option>

                <option id="Married" name="Married" value="Married" onClick="imMarried()">Married</option>

              </select>
            </li>

<li id="spouseFullName">
              <label for="spouseFullName">Spouse Full Name</label><br/>
              <input type="text" name="Spouse Full Name" id="spouseFullNameField" onchange="spouseName()" tabindex="90"/>
            </li>
            <li id="spouseDOB">
              <label for="spouseDOB">Spouse Date of Birth</label><br/>
              <input type="text" name="Spouse DOB" id="spouseDOB" tabindex="100" />
            </li>
            <li id="spouseOccupation">
              <label for="spouseOccupation">Spouse Occupation</label><br/>
              <input type="text" name="Spouse Occupation" id="spouseOccupation" tabindex="101" />
            </li>
</ul> 
```

这是javascript：

```
document.getElementById("spouseFullName").style.display = "none";
document.getElementById("spouseDOB").style.display = "none";
document.getElementById("spouseOccupation").style.display = "none";

function imMarried() {
    if (document.getElementById('Married').selected){
        document.getElementById("spouseFullName").style.display = "block";
        document.getElementById("spouseDOB").style.display = "block";
        document.getElementById("spouseOccupation").style.display = "block";
    }
} 
```

我确实启用了javascript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T04:48:21.120

必须

```
function imMarried() {
    var maritalStat = document.getElementById('maritalStatus');
    if (maritalStat.options[maritalStat.selectedIndex] && maritalStat.options[maritalStat.selectedIndex].value=="Married") {
        document.getElementById("spouseFullName").style.display = "block";
        document.getElementById("spouseDOB").style.display = "block";
        document.getElementById("spouseOccupation").style.display = "block";
    }
} 
```

并添加 onchange 触发器以从选项中选择和删除 onclick，即：

```
<select name="maritalStatus" id="maritalStatus" tabindex="80" onchange="imMarried()">
...
<option id="Married" name="Married" value="Married">Married</option> 
```

# xcode - 升级到 XCode 4.4 后运行 Mac 应用程序时权限被拒绝

> ID：11876726
> 
> 赞同：16
> 
> 时间：2012-08-09T04:15:03.090
> 
> 标签：xcode, macos, osx-mountain-lion, xcode4.4

在我更新到 XCode 4.4 和 Mountain Lion 之前，我有一个可以工作的 Mac 应用程序。现在应用程序仍然可以编译，但是当我尝试运行它时，我收到一条错误消息。

```
error: failed to launch '/Users/username/James/mac/Browser/trunk/Browser/DerivedData/Browser/Build/Products/Debug/Browser.app/Contents/MacOS/Browser' -- Permission denied* 
```

谁能解释我为什么会得到这个？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T18:35:17.010

我在为开发而新设置的 iPhone 5 (iOS 6.0) 上发现了这一点。我不得不在手机上手动启动应用程序，它说“你确定要启动这个开发者签名的应用程序吗？” 一旦我批准了，“权限被拒绝”就消失了，它现在从 Xcode 启动。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-20T19:56:46.163

### 解锁设备

在运行之前尝试简单地解锁您的设备。我被同样的问题难住了。在不更改操作系统、环境、代码等的情况下构建和运行时，我收到了错误消息。

类似的问题已经在[这里](https://stackoverflow.com/questions/6402003/xcode-cant-create-output-file-permission-denied?rq=1)和[这里](https://stackoverflow.com/questions/8109468/permission-denied-on-xcode-4)提出，但在这种情况下没有帮助。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-12T18:12:43.073

这是由权利引起的（并且可能是拥有错误的证书）。

*   如果您启用了沙箱，并尝试使用开发人员 ID 证书进行签名，您的应用程序将在启动时崩溃（截至 Lion——我还没有在 Mountain Lion 上尝试过）。
*   如果您启用了 iCloud，并尝试使用 Developer ID 证书进行签名，您的应用程序将根本无法启动——在 Xcode 中，您将收到问题中的错误消息，而在 Finder 中，应用程序将启动得如此短暂，并且然后得到 SIGKILLed。

据推测，如果您拥有 Mac 开发人员计划会员资格，则可以使用一种正确的证书来签署应用程序，以便能够使用沙盒甚至 iCloud 进行测试。开发人员 ID 证书不是那种证书。

（无论如何，这解决*了我的*问题。丹尼斯，你要签署什么样的证书？）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-17T20:10:25.123

打开管理器，确保你的 mac 处于开发者模式。

还要检查您的网守设置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-18T00:05:59.533

由于缺乏更好的描述，该设备将该应用程序视为“从网络下载的未经授权的应用程序”。进入设置>安全和隐私，在底部，允许从任何地方下载应用程序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-18T01:33:11.870

在墙上抛出一些想法：

*   您是否在外部磁盘上构建？一些驱动器获得特殊权限（例如“忽略权限”复选框），或者可能以一种奇怪的方式设置了 ACL。尝试在内部启动盘上构建？

*   你是代码签名吗？您是否尝试过将其关闭，以查看代码签名或权利中是否存在错误？新的协同设计工具已经不是第一次出现错误了。

*   您是否尝试过使用 xcode-select 并更新已安装的任何命令行工具以确保它们都与使用的 Xcode 版本相匹配？

*   您是否有任何 shell 脚本构建阶段或类似的东西可能在应用程序被签名后编辑，从而破坏签名？

*   您是否检查过您的硬盘是否已满或路径中某处是否存在（损坏？）符号链接，或已卸载的卷名？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-04T01:58:55.757

我确信这早就被弄清楚了，但是我一直被拒绝许可，结果我不得不将我的笔记本电脑添加到配置文件中。我最近重新映像了我的机器，因此配置文件不再对那台机器有效。在我启用 iCloud 之前它运行良好。那是权限被拒绝的开始。

检查 XCODE 中的管理器，单击设备选项卡，然后单击左侧的机器。检查它显示的 UDID 是否列在您的 mac 开发人员门户的设备部分中。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-01-13T09:58:30.080

简短的回答是当您收到此错误消息时，构建的应用程序中没有有效的开发配置文件。

仅凭这一点并不能解决您的问题！造成这种情况的常见原因有很多：

*   您已移至新机器并且尚未在 Xcode 中安装配置文件。另见下文
*   您已移至新机器，但它未处于开发人员模式或未添加到配置文件中

对于这两种情况，让 Xcode 重新生成它，或者在会员中心自己做......您可以通过运行控制台和过滤 taskgated 来验证原因是否与您的配置文件有关，您可以在其中查看它是哪个配置文件尝试使用（它会先提取嵌入在应用程序中的那个，然后尝试从 Mac 上安装的任何一个提取）。

确保检查您的构建设置，确保正确的设置用于调试构建。通常可以解决的简单步骤（XCode 5）

1.  前往会员中心并创建新的开发资料
2.  选择应用程序和证书
3.  验证您正在使用的机器是否在要包含在配置文件中的机器列表中，勾选该框
4.  生成证书
5.  下载它，然后将它拖到文档中的 Xcode 图标上
6.  转到目标中的 Build Settings 选项卡，并将配置文件设置为您刚刚下载的配置文件

    *   您没有正确配置 iCloud/APN/GameCenter 权利。

# php - MVC:: 哪个去哪里？

> ID：11876730
> 
> 赞同：2
> 
> 时间：2012-08-09T04:15:28.673
> 
> 标签：php, model-view-controller, codeigniter, codeigniter-2

在过去的 2 年里，我是一名平面 php 程序员。现在我想转向`MVC`建筑，所以我正在使用`codeigniter`它看起来很容易开始。我想知道一些在`codeigniter`.

我有一个`controller`被调用的`building`，一个`model`被调用的`building_data`和一个被调用的视图`building_view`。现在我想通过检查很多条件来显示建筑物列表。我在平面 PHP 中执行以下操作

1.  从数据库中获取建筑物列表
2.  根据特定标准 A、B、C 拆分结果
3.  `section - A`在、`section -B`和中显示结果`section-c`作为`HTML`输出。

现在`MVC`我正在做以下事情

1.  获取`building_data`（模型）上的数据库中的构建列表
2.  将结果存储在控制器`building_data`的`$data`数组中`building`
3.  根据条件 A、B、C 拆分结果`building_view`并输出`HTML`（我可以在视图中进行基于条件的数据分类（不使用 mysql 查询）吗？`!My actual question`）

我在不违反 MVC 架构规则的情况下做正确的事吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T05:01:46.857

MVC 是一种设计模式。不是架构。

但是，如果您想学习*最佳实践*或 MVC，那么 CodeIgniter 是错误的选择。它充满了糟糕和过时的做法（PHP4 代码片段、全局状态和许多其他问题），并且没有实现任何接近 MVC 模式的东西。它更像是 PHP 的糟糕 Rails 克隆。

视图应该是对象，而不是愚蠢的模板。您的控制器应该告诉模型层用户选择了哪个建筑物，然后视图获取有关当前建筑物的详细信息并决定如何表示它。

在正确的 MVC 实现中，视图是包含表示逻辑的实例。他们从模型层获取信息，然后选择使用哪些模板来呈现响应，甚至是否需要 HTML 响应。也许用户实际上请求了 JSON 或 XML 格式的数据。或者，视图需要发送的唯一响应可能是 HTTP 标头。

您还应该知道，您不能在 Web 应用程序中实现经典的 MVC 模式（或者至少它非常困难并且需要使用套接字和持久模型）。相反，我们使用受 MVC 启发的模式。它们之间的主要区别在于 View 如何从 Model 层获取信息。

*   在 MVP 和 MVVM 模式中，视图是被动的，并通过类似控制器的结构（从透视的角度看演示者或视图模型）接收数据。
*   在 Model2 MVC 和 HMVC 模式中，视图处于活动状态，它直接从模型层请求信息。

还有第三组：类似 Rails 的实现。它将模型层替换为基于 ActiveRecord 的 ORM 的集合，假装视图是一个模板，而“控制器”是演示者和视图职责的组合。

# django - 向 models.py 添加一个类会导致“视图不存在”错误吗？

> ID：11876734
> 
> 赞同：0
> 
> 时间：2012-08-09T04:15:32.363
> 
> 标签：django, django-models, django-forms, django-views, rating

我试图实现一个评级系统来接收用户提交的信息。但我只是想知道是否可以在一个模型文件中有两个类并获得`Could not import myapp.comments.views.stars. View does not exist in module myapp.comments.views.`

在我的模型文件中，我有

```
class CommentWithRating(Comment):
    rating = models.IntegerField()

    def save(self, *args, **kwargs):
        self.content_object.rating.add(score=self.rating, user=self.user, ip_address=self.ip_address)
        super(CommentWithRating, self).save(*args, **kwargs)

class Rating(models.Model):
    first_name = models.charField(maxlength=30)
    last_name = models.charField(maxlength=30)
    department = models.charField(maxlength=30)
    comment = models.charField(maxlength=10000)
    communi_rating = models.IntegerField()
    prepar_rating = models.IntegerField()
    interact_rating = models.IntegerField()
    help_rating = models.IntegerField() 
```

顺便说一下，stars 是一个 html 文件。有任何想法吗？

这是我的看法，

```
from django.shortcuts import render_to_response, render
from django.http import HttpResponse
from models import CommentWithRating
def stars(request):
    return render(request, 'star.html', {'score': ''}) 
```

我的错误信息很简单，

> 无法导入 myapp.comments.views.stars。模块 myapp.comments.views 中不存在视图。

我的追溯是，

> 环境：请求方法：GET
> 
> Django 版本：1.4
> 
> Python版本：2.7.2
> 
> 已安装的应用程序：
> 
> （'django.contrib.auth'、'django.contrib.contenttypes'、'django.contrib.sessions'、'django.contrib.sites'、'django.contrib.messages'、'django.contrib.staticfiles'、'注册'，'django.contrib.admin'，'djangoratings'）安装的中间件：（'django.middleware.common.CommonMiddleware'，'django.contrib.sessions.middleware.SessionMiddleware'，'django.middleware.csrf.CsrfViewMiddleware' , 'django.contrib.auth.middleware.AuthenticationMiddleware', 'django.contrib.messages.middleware.MessageMiddleware')
> 
> Traceback：文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/handlers/base.py”在get_response 101.request.path_info）文件“/Library/ Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/urlresolvers.py" 在解析 300\. sub_match = pattern.resolve(new_path) File "/Library/Frameworks/Python.framework /Versions/2.7/lib/python2.7/site-packages/django/core/urlresolvers.py" 在解析 209\. return ResolverMatch(self.callback, args, kwargs, self.name) File "/Library/Frameworks/Python .framework/Versions/2.7/lib/python2.7/site-packages/django/core/urlresolvers.py" 在回调 216\. self._callback = get_callable(self._callback_str) 文件"/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/utils/functional.py”在包装器 27 中。结果 = func(*args) 文件“/Library/Frameworks/Python .framework/Versions/2.7/lib/python2.7/site-packages/django/core/urlresolvers.py" 在 get_callable 101\. (lookup_view, mod_name))
> 
> 异常类型：ViewDoesNotExist at /rating/ 异常值：无法导入 myapp.comments.views.stars。模块 >myapp.comments.views 中不存在视图。`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T16:24:40.137

是的，这绝对是可能的。

尝试做一个

```
python ./manage.py shell 
```

然后导入给您带来问题的模型或视图。这可能最终会为您提供更多有用的调试信息。

（来自[Django 视图不存在或无法导入](https://stackoverflow.com/questions/10593194/django-views-does-not-exist-or-could-not-import)）

# java - java 1.5中@Retention背后发生了什么

> ID：11876738
> 
> 赞同：5
> 
> 时间：2012-08-09T04:16:22.097
> 
> 标签：java, annotations

我试图了解 Java 1.5 的保留政策。但没有得到清晰的图像。

根据[JavaDoc](http://docs.oracle.com/javase/7/docs/api/java/lang/annotation/RetentionPolicy.html)，

*   `CLASS`- 注释将由编译器记录在类文件中，但不需要在运行时由 VM 保留。
*   `RUNTIME`- 注释将由编译器记录在类文件中，并在运行时由 VM 保留，因此可以反射性地读取它们。
*   `SOURCE`- 注释将被编译器丢弃

1.  “丢弃”是什么意思？
2.  是不是就像类文件中没有特定的注释元素一样，通过用 SOURCE 标记它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T04:19:39.953

`SOURCE`注释只存在于源文件中。

当编译器“丢弃”注释时，它本质上忽略了注释甚至存在。源注释基本上与注释代码的目的相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T04:20:32.070

带注释的*元素*不受影响。

`@Retention`就是您所说的元注释：它*仅*适用于*其他注释接口*。因此，它也*只* 影响它所应用的*注释*。

例如，如果您有一个名为*的*注解，该注解*本身*`@Foo`是用注释，你会得到否定的答案）。*`@Retention(RetentionPolicy.SOURCE)``@Foo`*`.class``@Foo`**

 **如果您将注释纯粹用于文档目的，或者如果您想通过注释处理（在编译步骤期间）来处理它，这将很有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-15T07:01:07.733

在 Java 编程语言中，注解可以用作源代码中一种特殊形式的句法元数据。类、方法、变量、参数和包可以被注释。注释可以嵌入到编译器生成的类文件中，并且可以被 Java 虚拟机保留，从而影响应用程序的运行时行为。

保留策略确定应在什么时候丢弃注释。具有保留策略 RUNTIME 的注释将通过运行时提供给 JVM。**

# java - 如何以编程方式在 Sun JDK 1.5 (windows) 中进行堆转储

> ID：11876739
> 
> 赞同：0
> 
> 时间：2012-08-09T04:17:01.380
> 
> 标签：java, jvm

> **可能重复：**
> [触发在 Windows 上运行的 1.5 JVM 的堆转储](https://stackoverflow.com/questions/3136125/trigger-heap-dump-of-a-1-5-jvm-running-on-windows)

我已经通过 HotSpotMXBean 和使用 jmap 在 Sun JDK 1.6 (Windows) 中成功进行了堆转储。现在，我必须在 JDK 1.5(windows) 中做同样的事情。

现在的问题是，在 JDK 1.5 (windows) 中没有 jmap ，它也不支持 HotSpotMXBean。那么，您能指导我如何在 1.5 中获取整个 JVM 的堆转储。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T04:53:24.133

在 JDK 5 中进行堆转储的选项有很多。请参阅

*   [HPROF](http://java.sun.com/developer/technicalArticles/Programming/HPROF.html)
*   [控制台](http://docs.oracle.com/javase/1.5.0/docs/guide/management/jconsole.html)
*   [内存分析器](http://www.eclipse.org/mat/)

尽可能多地尝试。

# r - R 词干字符串/文档/语料库

> ID：11876740
> 
> 赞同：12
> 
> 时间：2012-08-09T04:17:09.413
> 
> 标签：r, nlp, stemming, tm

我正在尝试在 R 中做一些词干处理，但它似乎只适用于单个文档。我的最终目标是一个术语文档矩阵，它显示文档中每个术语的频率。

这是一个例子：

```
require(RWeka)
require(tm)
require(Snowball)

worder1<- c("I am taking","these are the samples",
"He speaks differently","This is distilled","It was placed")
df1 <- data.frame(id=1:5, words=worder1)

> df1
  id                 words
1  1           I am taking
2  2 these are the samples
3  3 He speaks differently
4  4     This is distilled
5  5         It was placed 
```

此方法适用于词干部分，但不适用于术语文档矩阵部分：

```
> corp1 <- Corpus(VectorSource(df1$words))
> inspect(corp1)
A corpus with 5 text documents

The metadata consists of 2 tag-value pairs and a data frame
Available tags are:
  create_date creator 
Available variables in the data frame are:
  MetaID 

[[1]]
I am taking

[[2]]
these are the samples

[[3]]
He speaks differently

[[4]]
This is distilled

[[5]]
It was placed

> corp1 <- tm_map(corp1, SnowballStemmer)
> inspect(corp1)
A corpus with 5 text documents

The metadata consists of 2 tag-value pairs and a data frame
Available tags are:
  create_date creator 
Available variables in the data frame are:
  MetaID 

[[1]]
[1] I am tak

[[2]]
[1] these are the sampl

[[3]]
[1] He speaks differ

[[4]]
[1] This is distil

[[5]]
[1] It was plac

>  class(corp1)
[1] "VCorpus" "Corpus"  "list"   
> tdm1 <- TermDocumentMatrix(corp1)
Error in UseMethod("Content", x) : 
  no applicable method for 'Content' applied to an object of class "character" 
```

因此，我尝试先创建术语文档矩阵，但这次没有词干：

```
> corp1 <- Corpus(VectorSource(df1$words))
> tdm1 <- TermDocumentMatrix(corp1, control=list(stemDocument=TRUE))
>  as.matrix(tdm1)
             Docs
Terms         1 2 3 4 5
  are         0 1 0 0 0
  differently 0 0 1 0 0
  distilled   0 0 0 1 0
  placed      0 0 0 0 1
  samples     0 1 0 0 0
  speaks      0 0 1 0 0
  taking      1 0 0 0 0
  the         0 1 0 0 0
  these       0 1 0 0 0
  this        0 0 0 1 0
  was         0 0 0 0 1 
```

这里的词显然不是词干的。

有什么建议么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T19:46:59.923

CRAN 上的[RTextTools](http://cran.r-project.org/web/packages/RTextTools/index.html)包允许您执行此操作。

```
library(RTextTools)
worder1<- c("I am taking","these are the samples",
"He speaks differently","This is distilled","It was placed")
df1 <- data.frame(id=1:5, words=worder1)

matrix <- create_matrix(df1, stemWords=TRUE, removeStopwords=FALSE, minWordLength=2)
colnames(matrix) # SEE THE STEMMED TERMS 
```

这将返回一个`DocumentTermMatrix`可以与 package 一起使用的`tm`。您可以使用其他参数（例如删除停用词、更改最小字长、使用不同语言的词干分析器）来获得您需要的结果。当显示`as.matrix`该示例时，会生成以下术语矩阵：

```
 Terms
Docs                      am are differ distil he is it place sampl speak take the these this was
  1 I am taking            1   0      0      0  0  0  0     0     0     0    1   0     0    0   0
  2 these are the samples  0   1      0      0  0  0  0     0     1     0    0   1     1    0   0
  3 He speaks differently  0   0      1      0  1  0  0     0     0     1    0   0     0    0   0
  4 This is distilled      0   0      0      1  0  1  0     0     0     0    0   0     0    1   0
  5 It was placed          0   0      0      0  0  0  1     1     0     0    0   0     0    0   1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-02T06:15:50.550

这在0.6 版中`R`按预期工作。`tm`您有一些小错误阻止了词干正常工作，也许它们来自旧版本的`tm`? 无论如何，这里是如何使它工作：

```
require(RWeka)
require(tm) 
```

词干包不是你的`Snowball`但是`SnowballC`：

```
require(SnowballC)

worder1<- c("I am taking","these are the samples",
            "He speaks differently","This is distilled","It was placed")
df1 <- data.frame(id=1:5, words=worder1)
corp1 <- Corpus(VectorSource(df1$words))
inspect(corp1) 
```

像这样在下一行更改`SnowballStemmer`为：`stemDocument`

```
corp1 <- tm_map(corp1, stemDocument)
inspect(corp1) 
```

正如预期的那样，单词是词干的：

```
<<VCorpus (documents: 5, metadata (corpus/indexed): 0/0)>>

[[1]]
<<PlainTextDocument (metadata: 7)>>
I am take

[[2]]
<<PlainTextDocument (metadata: 7)>>
these are the sampl

[[3]]
<<PlainTextDocument (metadata: 7)>>
He speak differ

[[4]]
<<PlainTextDocument (metadata: 7)>>
This is distil

[[5]]
<<PlainTextDocument (metadata: 7)>>
It was place 
```

现在做术语文档矩阵：

```
corp1 <- Corpus(VectorSource(df1$words)) 
```

更改`stemDocument`为`stemming`：

```
tdm1 <- TermDocumentMatrix(corp1, control=list(stemming=TRUE))
as.matrix(tdm1) 
```

正如预期的那样，我们得到了一个词干的 tdm：

```
 Docs
Terms    1 2 3 4 5
  are    0 1 0 0 0
  differ 0 0 1 0 0
  distil 0 0 0 1 0
  place  0 0 0 0 1
  sampl  0 1 0 0 0
  speak  0 0 1 0 0
  take   1 0 0 0 0
  the    0 1 0 0 0
  these  0 1 0 0 0
  this   0 0 0 1 0
  was    0 0 0 0 1 
```

所以你去。也许更仔细地阅读`tm`文档可能会为您节省一些时间；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T05:12:22.440

是的，用于在您需要的语料库中提取文档的单词`Rweka`，`Snowball`并`tm`打包。

使用以下说明

```
> library (tm)
#set your directory Suppose u have set "F:/St" then next command is 
> a<-Corpus(DirSource("/st"), 
            readerControl=list(language="english")) # "/st" it is path of your directory
> a<-tm_map(a, stemDocument, language="english")
> inspect(a) 
```

确保你会找到你想要的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-15T13:52:23.470

另一种解决方案是硬编码。它只是拆分文本和词干，然后重新集中：

```
library(SnowballC)
i=1
#Snowball stemming
while(i<=nrow(veri)){
  metin=veri[i,2]
  stemmed_metin="";
  parcali=unlist(strsplit(metin,split=" ")) #split the text
  for(klm in parcali){
    stemmed_klm=wordStem(klm,language = "turkish") #stem word by word
    stemmed_metin=sprintf("%s %s",stemmed_metin,stemmed_klm) #reconcantrate
  }

  veri[i,4]=stemmed_metin #write to new column

  i=i+1
} 
```

# javascript - 尝试从开源脚本加载某些功能

> ID：11876742
> 
> 赞同：-2
> 
> 时间：2012-08-09T04:17:30.343
> 
> 标签：javascript

我一直在尝试从我从[http://detectmobilebrowsers.com/](http://detectmobilebrowsers.com/)下载的检测代码中从检测移动浏览器的 js 脚本中加载函数，我想要的只是当浏览器的检查成功时，它会加载 abc() 函数。我试过了

`(navigator.userAgent||navigator.vendor||window.opera,abc());` 或者

`(abc());`

但它不起作用，因为它停止检测浏览器然后请让我知道如何修改以下可以成功加载我的功能的开源 js scipt。我尝试过，但由于代码混乱，而且作为初学者，我无法执行该功能。

```
 (function(a,b){if(/android.+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|meego.+mobile|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))
window.location=b})
(navigator.userAgent||navigator.vendor||window.opera,'http://detectmobilebrowser.com/mobile'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T04:25:39.453

更改测试以调用第二个参数而不是设置`window.location`它，然后传递一个函数（而不是 URL），例如：

```
(function(a,b){
  if (/thatreallylongregex/i.test(a.substr(0,4))) b();
})(navigator.userAgent||navigator.vendor||window.opera, abc); 
```

# arrays - CakePHP 中的冗余 ModelName 查找结果

> ID：11876745
> 
> 赞同：11
> 
> 时间：2012-08-09T04:17:49.447
> 
> 标签：arrays, json, cakephp

我试图摆脱 CakePHP 中 find 方法返回的结果数组中的冗余模型名称。现在，如果我要执行 $results = $this->Model->find('all') 之类的操作，我将不得不通过 $results[Model][fieldName] 而不是 $results 访问结果字段[字段名称]。

我知道在数组中有模型名称有好处，但我正在尝试构建一个 api，所以我需要对数组进行 json 编码。包含模型名称后，我得到了一些可怕的东西，例如：

```
[{"Model":{"field":"blah","field":"blah"}},{"Model":{"field":"blah","field":"blah"}}] 
```

我想要更优雅的东西，比如：

```
[{"field":"blah","field":"blah"},{"field":"blah","field":"blah"}] 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-09T04:26:29.697

在您的控制器中，不是序列化查找的结果，而是更深层次地序列化。

假设 CakePHP 2：

```
$things = $this->Thing->find('all');
$things = Set::extract('/Thing/.', $things); 
```

现在您的结果应该没有 JSON 中的额外级别。

另一种冗长的方法是`for loop`超过结果：

```
foreach ($things as $k => &$v) {
    $v = $v['Thing']
} 
```

之后，您的 $things 将删除额外级别的键。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-07T14:50:38.783

对于更高版本的 Cake，使用 $things = Set::extract($things, '{n}.Thing');

# c# - 选择集线器或持久连接的参数是什么？

> ID：11876749
> 
> 赞同：0
> 
> 时间：2012-08-09T04:18:01.120
> 
> 标签：c#, signalr, signalr-hub

为服务器端选择集线器或持久连接。我不知道在客户端有什么影响？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T15:17:46.180

连接方面没有区别，但是如果您选择 PersistentConnection，您将必须创建自己的客户端（和服务器）消息调度逻辑，因为 Hub 为您提供管道。

# sql - OPENXML，将 Base64 转换为二进制

> ID：11876750
> 
> 赞同：2
> 
> 时间：2012-08-09T04:18:28.877
> 
> 标签：sql, sql-server, tsql, sql-server-2005

对于导入/导出过程，我们将二进制数据作为 Base64 编码字符串放入 XML。取回值时出现了问题...

我们使用 OPENXML 是因为使用[nodes()](http://msdn.microsoft.com/en-us/library/ms188282.aspx)在 2005/2008 年的性能非常糟糕——它根本无法很好地扩展。他们修复了 SQL Server 2012 中的性能问题，但为了遗留支持（2005+），这不是一个现实的选择，而且 MS 似乎不想向后移植一些东西（假设甚至可能）。

这是有关该主题的一些[相关信息](http://blogs.msdn.com/b/sqltips/archive/2008/06/30/converting-from-base64-to-varbinary-and-vice-versa.aspx)。

理想情况下，我正在寻找使用 OPENXML 的单个 SQL 语句来分解包含编码为 Base64 的二进制数据的 XML 文档，并在那里提供一个结果集，该结果集将数据正确呈现为二进制数据。我有一个不使用节点的解决方案，希望有人有更好的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T06:43:13.447

您可以将列指定为 XML 并用于`.value`获取数据为`varbinary`.

像这样的东西。

```
declare @XML xml 

set @XML = 
'<root>
  <item>
    <ID>1</ID>
    <Col>Um93MQ==</Col>
  </item>
  <item>
    <ID>2</ID>
    <Col>Um93Mg==</Col>
  </item>
</root>'

declare @idoc int
exec sp_xml_preparedocument @idoc out, @xml

select T.ID,
       T.Col.value('.', 'varbinary(max)')
from openxml(@idoc, '/root/item', 2)
with (ID int,
      Col xml) as T

exec sp_xml_removedocument @idoc 
```

或者您可以使用 CLR（如果您可以选择），如下所示：

```
using System;
using System.Text;
    public class CLRTest
    {
        public static byte[] ConvertBase64ToBinary(string str)
        {
            if (str == null)
            {
                return null;
            }
            return Convert.FromBase64String(str);
        }
    } 
```

# ios - ios 动画，例如通过电子邮件发送照片

> ID：11876766
> 
> 赞同：6
> 
> 时间：2012-08-09T04:20:09.840
> 
> 标签：ios, uiview, uiwindow, uianimation

我真的很好奇苹果是如何进行这种转换的：如果你在照片应用程序中查看一张照片，然后尝试通过电子邮件发送它，你会看到这个非常酷的转换，苹果抓取图像，向上滑动modal email vc，然后将图像放入消息中。很酷。

无论如何，我想知道是否有人对如何做这样的事情有任何想法。我正在考虑这样做的一种方法是实际复制它，将其粘贴在 UIWindow 上，然后以这种方式对其进行动画处理。实际上，我对这如何工作感到有些困惑。有什么想法吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T07:19:56.170

今晚我实际上与这个非常接近（[Github](https://github.com/CodaFi/PhotosAnimationDemo)上的示例项目）。这有点“假装它”，但话又说回来，如果你真的仔细观看动画，照片应用程序也是如此。动画的值是硬编码的，但它主要用于缩放和移动，这意味着这应该适用于几乎任何图像（不要引用我的话）。该代码现在是 iOS 5+，因为 Xcode 一直在对我大喊大叫关于不推荐使用的模态表示方法......

# javascript - 在 Node.js 中对 JSON 进行排序

> ID：11876767
> 
> 赞同：-1
> 
> 时间：2012-08-09T04:20:30.073
> 
> 标签：javascript, json, node.js

我一直在寻找几天的答案，但似乎没有任何效果。我对 node.js 有点陌生，我只在服务器端工作以从客户端回答 POST。这有点像我必须做的任务。我需要做的是，当我没有编写的客户端脚本在位置“/sort”使用参数发出 POST 请求时`theArray`，我需要对数组进行排序，删除所有非字符串值并将结果值作为 JSON 返回。客户端脚本将在字符串化 JSON 数组中发送 Array 参数。所以像这样

`{"theArray":"[[],\"d\",\"B\",{},\"b\",12,\"A\",\"c\"]"}`.

我在这里尝试过这段代码：

```
case '/sort':
        if (req.method == 'POST') {
            res.writeHead(200,{
                'Content-Type': 'application/json'
            });
            var fullArr = "";
                req.on('data', function(chunk) {
                    fullArr += chunk;
                    });
                req.on('end', function() {
                            var jPar = JSON.parse(fullArr);
                            var arr = "";
                            var par = jPar.theArray;
                            arr += par;

                                function censor(key, value) {
                                    if (typeof value == "string") {
                                            return value;
                                        } 
                                        return undefined;
                                        }
                        var jsonString = JSON.stringify(par, censor);
                        console.log(jsonString);
                });         
                    res.end();

        };

break; 
```

但它返回此错误：

```
undefined:1
%2C%22A%22C%22
^
SyntaxError: Unexpected token h
    at Object.parse (native) ... 
```

有人可以帮助我吗，如果你能告诉我一些代码来帮助我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T04:31:16.397

您需要根据传输编码解码 POST 数据（我相信它是[application/x-www-form-urlencoded](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4)在您的情况下）

```
var json = require('querystring').parse(fullArr).formParamName; 
```

替换`formParamName`为 POST 表单中使用的实际名称。这是[查询字符串模块文档](http://nodejs.org/api/querystring.html#querystring_querystring_parse_str_sep_eq_option)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T11:19:56.900

```
function parseBody (req, callback) {
  var buffer = '';
  req.on('data', function(chunk) {
    buffer += chunk;
  });
  req.on('end', function() {
    try {
      callback(null, JSON.parse(buffer));
    } catch(e) {
      callback(e);
    }
  });
}

function stringFilter(element) {
  return typeof element === 'string';
}

function requestHandler (req, res) {
  parseBody(req, function(err, body) {
    if(err) {
      res.writeHead(400, {
        'Content-Type': 'application/json'
      });
      return res.end(err.toString());
    }

    res.writeHead(200,{
      'Content-Type': 'application/json'
    });

    var result = body.theArray.filter(stringFilter).sort();

    res.end(JSON.stringify(result));
  });
}

require('http').createServer(requestHandler).listen(3000); 
```

我省略了 url 处理，这只是为了解析正文，过滤掉非字符串，我还添加了`sort()`.

您可以使用（如果您命名文件`app.js`）对此进行测试：

```
node app.js

curl -H "Content-Type: application/json" -d '{"theArray": [[], "a", {}, "c", "B"]}' localhost:3000 
```

*编辑：*不过，这要求输入（请求正文）是有效的 JSON。如果它看起来像问题中的数据，那么您将不得不为该格式编写一个解析器。对我来说，看起来有人有一个这样的数组

```
var arr = [[],"d","B",{},"b",12,"A","c"]; 
```

然后做了

```
JSON.stringify({theArray: JSON.stringify(arr)}); 
```

# flash - 我可以通过禁用 Adob e Flash Player 来禁用 LSO 或 Flash Cookie 的创建和存储吗？

> ID：11876770
> 
> 赞同：1
> 
> 时间：2012-08-09T04:20:42.633
> 
> 标签：flash, cookies, flash-cs5, lso

我可以通过禁用 Adob​​e Flash Player 来禁用 LSO 或 Flash Cookie 的创建和存储吗？

由于它是 Flash，我可以禁用 adobe flash player，一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:53:58.757

我不确定我是否遵循您的大写...“Cookie By Disable”是某种品牌名称吗？

无论如何。LSO 文件保存在您计算机上的某个位置。播放器的每个实例、独立的、浏览器插件或 ActiveX 都会将它们保存在同一个位置。它们与网络 cookie 具有不同的功能，您无法禁用它们，原因与您无法禁用文件的原因相同......（它不是文件的功能，文件只是数据，您无法禁用数据，但是，您可以删除它）。

在禁用与这些文件相关的任何内容时，您的选择是：

*   防止自动访问（我猜这就是你所追求的）。就像阻止播放器访问文件一样。您可以通过几种不同的方式进行操作。最简单的方法是[找到保存文件的目录，](http://en.wikipedia.org/wiki/Local_shared_object#File_locations)并设置访问规则以禁止 Flash Player 用户读取/写入。这也可以通过此处的一些 GUI 帮助来实现：[www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager03.html](http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager03.html)。但是，这可能会破坏某些假定本地存储可访问性的 Flash 应用程序。

*   您可以简单地删除文件，它不会损害 Flash Plyaer 的任何版本或实例。

*   禁用浏览器插件不会删除文件，也不会限制任何其他程序从文件中读取。因为 LSO 的用途与 cookie 不同，所以没有存储数据过期的概念，也没有隐私的概念。存储的数据是未加密的，除非存储程序专门对其进行加密。因此，如果您的意思是禁用它们以使其他程序无法读取它们（在您的 PC 中肆虐 :) 具有超级用户访问权限），那么您实际上可以采用类似于常规 cookie 加密的机制，或者更确切地说是任何双向基于公钥/私钥的加密。即，如果您的网站在用户机器上存储 cookie，并且您担心用户机器上的其他程序可能会发现您代表用户存储在那里的有价值信息，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-01T14:52:16.583

那是你要找的吗？

[http://helpx.adobe.com/flash-player/kb/disable-third-party-local-shared.html](http://helpx.adobe.com/flash-player/kb/disable-third-party-local-shared.html)

不过好像有点过时了……</p>

就个人而言，我有一个光标和两个复选框。我将光标设置为允许存储 0K 并取消选中，至少，第一个复选框禁止 Flash 内容将内容放在您的计算机上。

请注意，您不能再删除调用的默认 LSO `settings.sol`，因为它存储了您刚刚所做的设置。删除它会撤消您刚刚所做的事情。

# c - 局部变量的返回地址

> ID：11876772
> 
> 赞同：0
> 
> 时间：2012-08-09T04:21:02.643
> 
> 标签：c, pointers

> **可能重复：**
> [可以在其范围之外访问局部变量的内存吗？](https://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope)

我试图了解为什么我会为以下程序获得此输出

```
[hello] [0xbfde68f4]
[world] [0xbfde68f4]
[world] [0xbfde68f4] 
```

该程序是

```
int main(void)
{
    char **ptr1 = NULL;
    char **ptr2 = NULL;

    ptr1 = func1();
    ptr2 = func2();
    printf(" [%s] [%p]\n",*ptr1, (void*)ptr1);

    printf(" [%s] [%p]\n",*ptr2, (void*)ptr2);

    printf(" [%s] [%p]\n",*ptr1, (void*)ptr1);

    return 0;
}

char** func1()
{
    char *p = "hello";
    return &p;
}

char** func2()
{
    char *p = "world";
    return &p;
} 
```

我知道返回局部变量的地址不是一个好习惯，但这只是一个实验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T04:25:28.083

内存地址被重新使用。首先它持有常量持有“hello”的地址，然后它被重新用来保存持有常量“world”的地址。

一旦内存不再使用，它​​就可以重新使用。重用最近使用的内存通常是最有效的，因此编译器和内存管理器通常会尝试这样做。

请注意，绝对不能保证。您可能会发现该程序在不同的编译器或平台上崩溃或给出不同的地址。但是，在这种特定情况下，重用是非常非常有可能的，因为这两个变量都是本地的并且在堆栈上分配，并且没有中间代码使用任何堆栈空间。如果您添加对堆栈空间的干预使用，您将获得不同的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T04:26:51.257

局部变量存在于堆栈中。当您调用 func1() 时，会创建局部变量，然后在超出范围时将其销毁。func2() 为其局部变量使用了相同的空间，因为 func1() 不再使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T04:33:39.757

`ptr1 = func1();`如下使用内存块。

```
prt1
 ↓
[h][e][l][l][o][\0]
 ↑
0xbfde68f4 
```

`ptr2 = func2();`使用相同的内存块，因为退出 func1 后，这个内存块可以被重用。

```
 prt2
      ↓
prt1→[w][o][r][l][d][\0]
      ↑
    0xbfde68f4 
```

# javascript - 为一个请求设置 HTTP 标头

> ID：11876777
> 
> 赞同：159
> 
> 时间：2012-08-09T04:22:13.380
> 
> 标签：javascript, http-headers, angularjs

我的应用程序中有一个需要基本身份验证的特定请求，因此我需要为该请求设置 Authorization 标头。我阅读了有关[设置 HTTP 请求标头](http://docs.angularjs.org/api/ng.$http)的信息，但据我所知，它将为该方法的所有请求设置该标头。我的代码中有这样的东西：

```
$http.defaults.headers.post.Authorization = "Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ=="; 
```

但我不希望我的每个帖子请求都发送此标头。有没有办法只为我想要的一个请求发送标头？还是我必须在我提出要求后将其删除？

* * *

## 回答 #1

> 赞同：323
> 
> 时间：2012-08-09T04:39:01.317

您传递给`$http`每个调用标头的配置对象中有一个标头参数：

```
$http({method: 'GET', url: 'www.google.com/someapi', headers: {
    'Authorization': 'Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ=='}
}); 
```

或者使用快捷方式：

```
$http.get('www.google.com/someapi', {
    headers: {'Authorization': 'Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ=='}
}); 
```

[$http](https://docs.angularjs.org/api/ng/service/$http)服务文档中提供了有效参数的列表。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-11-27T04:59:32.097

试试这个，也许它有效;）

```
.factory('authInterceptor', function($location, $q, $window) {

return {
    request: function(config) {
      config.headers = config.headers || {};

      config.headers.Authorization = 'xxxx-xxxx';

      return config;
    }
  };
})

.config(function($httpProvider) {
  $httpProvider.interceptors.push('authInterceptor');
}) 
```

并确保你的后端也能正常工作，试试这个。我正在使用 RESTful CodeIgniter。

```
class App extends REST_Controller {
    var $authorization = null;

    public function __construct()
    {
        parent::__construct();
        header('Access-Control-Allow-Origin: *');
        header("Access-Control-Allow-Headers: X-API-KEY, Origin, X-Requested-With, Content-Type, Accept, Access-Control-Request-Method, Authorization");
        header("Access-Control-Allow-Methods: GET, POST, OPTIONS, PUT, DELETE");
        if ( "OPTIONS" === $_SERVER['REQUEST_METHOD'] ) {
            die();
        }

        if(!$this->input->get_request_header('Authorization')){
            $this->response(null, 400);    
        }

        $this->authorization = $this->input->get_request_header('Authorization');
    }

} 
```

# python - 在 celery worker 中存储数据的常见且明显的方法是什么？

> ID：11876782
> 
> 赞同：2
> 
> 时间：2012-08-09T04:22:52.203
> 
> 标签：python, sqlalchemy, celery

我使用 Celery 运行抓取一些数据的网络蜘蛛，然后我需要将这些数据保存在数据库中的某个位置（例如 SQLite），但据我所知，我无法在 Celery 工作人员之间共享 SQLAlchemy 会话。你怎么解决这个问题？哪种方式常见？

目前我正在尝试使用 Redis 作为数据的中间存储。

```
@celery.task
def run_spider(spider, task):
    # setup worker
    logger = logging.getLogger('Spider: %s' % spider.url)
    spider.meta.update({'logger': logger, 'task_id': int(task.id)})

    # push task data inside worker
    spider.meta.update({'task_request': run_spider.request})

    spider.run()

    task.state = "inactive"
    task.resolved = datetime.datetime.now()
    db.session.add(task)
    db.session.commit() 
```

编辑：其实我错了，我不需要共享会话，我需要为每个 celery 进程/任务创建新的数据库连接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T04:41:11.450

我也曾在大型 celery 应用程序中使用 redis 进行持久化。

我的任务通常如下所示：

```
@task
def MyTask(sink, *args, **kwargs):
    data_store = sharded_redis.ShardedRedis(sink)
    key_helper = helpers.KeyHelper()
    my_dictionary = do_work()
    data_store.hmset(key_helper.key_for_my_hash(), my_dictionary) 
```

*   `sharded_redis`只是通过客户端处理分片键的几个 redis 分片的抽象。
*   `sink`是一个`(host, port)`元组列表，用于在确定分片后建立适当的连接。

本质上，您是通过每个任务连接和断开与 redis 的连接（非常便宜），而不是创建连接池。

使用连接池是可行的，但如果你真的要使用 celery（运行大量并发任务），那么使用这种方法会更好（在我看来），因为你冒着耗尽连接池的风险，尤其是如果您在 redis 中执行的操作需要更长的时间（例如将大型数据集读入内存）。

与 redis 的连接非常便宜，因此应该可以很好地扩展。我们在几个实例上每分钟处理数十万个任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T04:43:44.810

其实我错了，我不需要共享会话，我需要**为每个 celery 进程/任务创建新的数据库连接**。

# java - 从 SQL Server 登录 Windows 7 Active Directory 用户

> ID：11876784
> 
> 赞同：3
> 
> 时间：2012-08-09T04:23:13.183
> 
> 标签：java, sql-server-2008, active-directory, spring-security, windows-authentication

简单地说 - 我有一个 Spring-Jersey 应用程序（没有前端）作为服务部署到 Tomcat 中，它安装在 SQL Server 2008 中。

用户登录他们的机器（Windows 7）并通过 VPN 进入 SQL Server。

之后，他们可以在 Google 地球中打开一个 KML 文件。

这将实时绘制由 tomcat 应用程序生成的坐标。

问题 - 我只希望活动目录中某个组中的用户能够使用绘图服务。

如何获取登录到他的 windows 7 机器的用户的 win7-username 和 win7-group 名称？

我的 Java 位于 Tomcat/SQL Server 中，所以**.getProperty("user.name");** 将获得 SQL 服务器用户的用户名，而不是试图访问我的应用程序的 Windows 7 用户。

我希望这更清楚。

我感谢你的努力。

# ruby-on-rails - Heroku 推送被拒绝：在源中找不到 jquery-rails-2.0.0

> ID：11876788
> 
> 赞同：17
> 
> 时间：2012-08-09T04:23:37.707
> 
> 标签：ruby-on-rails, heroku

我正在尝试将 Enki gem 博客推送到 Heroku，但出现错误

```
Could not find jquery-rails-2.0.0 in any of the sources 
```

但是，在我拥有的 Gemfile

```
`gem 'jquery-rails'` 
```

而且我以前从未遇到过使用此设置推送 Enki 博客的问题。这是完整的错误信息

```
 Running: bundle install --without development:test --path vendor/bundle --binstubs bin/ --deployment
           Fetching gem metadata from https://rubygems.org/.......
           Could not find jquery-rails-2.0.0 in any of the sources
     !
     !     Failed to install gems via Bundler.
     !
     !     Heroku push rejected, failed to compile Ruby/rails app 
```

收到错误消息后，我将其添加到 gemfile

```
gem 'jquery-rails-2.0.0' 
```

我收到此错误消息

```
Could not find gem 'jquery-rails-2.0.0 (>= 0) java' in the gems available on this machine. 
```

然后我试着做

```
gem install jquery-rails 
```

它给了我

```
 Successfully installed jquery-rails-2.0.2
1 gem installed
Installing ri documentation for jquery-rails-2.0.2...
Installing RDoc documentation for jquery-rails-2.0.2... 
```

但是推送没有用，同样的错误

```
 -----> Heroku receiving push
-----> Ruby/Rails app detected
-----> Installing dependencies using Bundler version 1.2.0.rc
       Running: bundle install --without development:test --path vendor/bundle --binstubs bin/ --deployment
       Fetching gem metadata from https://rubygems.org/.......
       Could not find jquery-rails-2.0.0 in any of the sources
 !
 !     Failed to install gems via Bundler.
 !
 !     Heroku push rejected, failed to compile Ruby/rails app 
```

这是宝石文件

```
source 'https://rubygems.org'

gem 'rails', '3.2.6'
gem 'heroku'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  gem 'uglifier', '>= 1.0.3'
end

group :development, :test do
  gem 'sqlite3'
end
group :production do
  gem 'pg'
end

group :production do
  gem 'thin'
end
platforms :jruby do
  gem 'activerecord-jdbcsqlite3-adapter'
  gem 'trinidad'
  gem 'jruby-openssl'
end

gem 'jquery-rails'
#gem 'jquery-rails-2.0.0'

# Use unicorn as the web server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'ruby-debug'

# Bundle the extra gems:
gem 'RedCloth', '~> 4.2.9', :require => 'redcloth'
gem 'ruby-openid', :require => 'openid'
gem 'rack-openid', :require => 'rack/openid'
gem 'aaronh-chronic', :require => 'chronic' # Fixes for 1.9.2
gem 'coderay'
gem 'lesstile'
gem 'formtastic'
gem 'will_paginate', '~> 3.0.2'
gem 'exception_notification', '~> 2.5.2'
gem 'open_id_authentication'

# Bundle gems for the local environment. Make sure to
# put test-only gems in this group so their generators
# and rake tasks are available in development mode:
group :test do
  gem 'database_cleaner'
  gem 'cucumber-rails',    :require => false
  gem 'cucumber-websteps', :require => false
  gem 'factory_girl'
  gem 'rspec'
  gem 'nokogiri', '~> 1.5.0'
  gem 'webrat'
end

group :development, :test do
  gem 'rspec-rails'
end 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-08-21T05:14:03.727

我遇到了同样的错误并使用以下方法修复了它：

`bundle update jquery-rails`

在调查它时，似乎 jquery-rails 2.0.0 出于任何原因从 ruby​​gems 中被拉出：[http](http://d.pr/i/cLms/1ReBI4U8) ://d.pr/i/cLms/1ReBI4U8 。因此，当该 gem 是最新版本时，您（和我）可能碰巧安装了 jquery-rails。

值得注意的是，删除您的文件`Gemfile.lock`可能很危险，并且在大多数情况下不建议这样做。这会导致下载 Gemfile 中没有版本号的每个 gem 的所有最新版本。如果 gems 更新了 API 破坏性更改（发生的频率比您想象的要多），您的应用程序可能会崩溃。但它也可能不会。请注意，如果有测试用例，请运行它们。这让我不止一个头痛。

您可以在此处阅读更多关于 bundler、Gemfile 和 Gemfile.lock 的工作原理（以及如何正确升级某些 gems 的指南）：http: [//viget.com/extend/bundler-best-practices](http://viget.com/extend/bundler-best-practices)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-09T15:05:15.440

为我工作：

*   删除 Gemfile.lock
*   从行中删除了 rails 版本 => gem 'rails' （jquery 已经没有 av 编号）
*   运行命令“捆绑安装”
*   还运行“捆绑更新 jquery-rails”以确保所有内容都已更新
*   重要的是，提交新的 .lock 文件 => 运行“git add ”。和“git commit ...”
*   推动一切

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T20:08:31.607

更新：我正在阅读 mhartl 的 Rails 教程，并且必须更新 Gemfile 中的 jquery-rails '2.0.1'，才能让包更新 jquery-rails 继续进行。

谢谢，贾廷

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-25T08:14:09.643

我有类似的问题，通过将 Gemfile jquery-rails-2.0.0 更改为 2.0.1 将解决我的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T13:15:56.817

迈克尔，

我必须从 2.0.0 中删除我的 jquery gem 中的版本号，并让它拉出最新版本才能正常工作。我在 rails 3.2.8.rc2 并在 heroku 的雪松堆栈上运行。祝你好运！

标记

# salesforce - 使用 api 更新 Salesforce 机会

> ID：11876789
> 
> 赞同：0
> 
> 时间：2012-08-09T04:23:46.193
> 
> 标签：salesforce

请帮助我，我正在使用 SalesForce Enterprise API 通过我的 C# 代码更新 Opportunity：

```
QueryResult query = service.query("SELECT ID,ChargentSFA__Gateway__c FROM Opportunity WHERE       AccountId = '" + accountItem.Id + "'");
if (query.records != null && query.records.Length > 0)
{
Opportunity opportunity = query.records[0] as Opportunity;
SaveResult update_result = new SaveResult();
opportunity.Acct_Email__c = accountItem.PersonEmail;
update_result = service.update(new sObject[] { opportunity })[0];
if (update_result.success)
{
// TODO
}
else
{
Logs(update_result.errors[0].message);
// TODO
}
} 
```

所有数据输入都是真实的，但它告诉我一个错误

> StatusCode.FIELD_FILTER_VALIDATION_EXCEPTION
> 
> 消息：“请选择一个活动网关记录”
> 
> 错误字段：*ChargentSFA_Gateway_c*

请给我你对这个错误的意见。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T04:49:44.143

机会所指的 Chargent CC 网关对象已停用。并且错误消息来自阻止引用非活动网关的验证规则。

有关更多信息，请参阅[此处的文档](http://www.rogueit.net/support/chargent.php#gateway)

# sql - 结合 select 语句得到的结果集创建视图

> ID：11876790
> 
> 赞同：0
> 
> 时间：2012-08-09T04:24:06.493
> 
> 标签：sql, union, union-all

对于 4 个不同的表，我有 4 个 Select 语句，每个 Select 查询给出满足指定条件的最新记录，例如：

`Select TOP 1 * from table where column_name = 'something' order by col1 DESC;`

现在我必须组合所有 4 个查询的结果集并从组合结果集中创建一个视图。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T04:27:24.853

```
create view some_view as
(
(select TOP 1 * from table1 where ....)
UNION ALL
(select TOP 1 * from table2 where ....)
UNION ALL
(select TOP 1 * from table3 where ....)
UNION ALL
(select TOP 1 * from table4 where ....)
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T04:53:53.583

一些数据库不允许您在联合查询中提供“order by”子句。

如果您按 col1 desc 排序，则它可能是您可以应用 min() 或 max() 的某种类型的列。

如果是这种情况，下面可以解决您的问题（如果记录不多，或者如果表很大，则“col1”和“some_column”被索引。）

```
create view some_view as
(
select * from table1
  where some_column = 'something'
  and col1 = (select max(col1) from table1 where some_column = 'something')
UNION ALL
select * from table2 
  where some_column = 'something'
  and col1 = (select max(col1) from table2 where some_column = 'something')
UNION ALL
select * from table3 
  where some_column = 'something'
  and col1 = (select max(col1) from table3 where some_column = 'something')
UNION ALL
select * from table4 
  where some_column = 'something'
  and col1 = (select max(col1) from table4 where some_column = 'something')
) 
```

# linux - 查找除跳过一个文件夹外的所有文件夹

> ID：11876793
> 
> 赞同：0
> 
> 时间：2012-08-09T04:25:05.960
> 
> 标签：linux, find, skip

我有一个命令可以查看我所有的子文件夹中的文件，但是我希望它从搜索中跳过一个文件夹，我不确定这样做的正确方法是什么：

```
find -name '*.avi' -o -name '*.mkv' -o -name '*.mp4' -o -name '*.vob' 
```

我希望它不查看文件夹名称：安全

我试过：

```
find -name '*.avi' -o -name '*.mkv' -o -name '*.mp4' -o -name '*.vob' --skip 'secure' 
```

但它不起作用。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T04:47:15.240

GNU find 中没有 --skip 参数。`-path`但是你可以使用and`-prune`表达式做你想做的事。语法有点奇怪：您将`-path ./secure -prune`其用作一个术语，然后将其与表达式的其余部分进行 OR。所以在你的情况下：

`find . -name '*.avi' -o [...] -o -path ./secure -prune`

请注意，这仍将返回`./secure`结果中的目录，但其中没有任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T04:35:34.680

下面的呢？

```
find \( -name '*.avi' -o -name '*.mkv' -o -name '*.mp4' -o -name '*.vob' \) -a -not -path './secure*' 
```

# c# - 让列表框为其所有项目调用 ToString 方法

> ID：11876798
> 
> 赞同：1
> 
> 时间：2012-08-09T04:25:51.360
> 
> 标签：c#, winforms

我有一个包含一组 PathItems 的列表框。根据用户的喜好，我用几种不同的情况覆盖了 ToString 方法。

它基本上是自定义对象中包含的文件名列表。

```
class PathItem
{
    public static bool show_ext { get; set; }
    public static bool use_full_path { get; set; }
    public string filepath { get; set; }

    public override string ToString()
    {
        if (use_full_path)
            return filepath;
        else if (show_ext)
            return Path.GetFileName(filepath);
        else
            return Path.GetFileNameWithoutExtension(filepath);
    }
} 
```

GUI 有两个复选框。一个复选框将显示文件扩展名，另一个复选框将显示文件的绝对路径。检查其中任何一个都将更新上面定义的静态变量。

每当我选择一个复选框时，我都希望更新列表框以反映用户的选择。

我相信解决方案是让列表框通过再次调用 ToString 方法来刷新其所有项目以获取每个项目的新值，但我不确定如何做到这一点。

我也不确定这是否属实，但如果我说

```
PathItem.show_ext = true; 
```

这适用于所有现有`PathItem`对象吗？

更新：

按照建议尝试该`Refresh`方法后，即使选中了复选框（它们在 ClickChanged 上触发 Refresh 调用），列表框中的字符串也没有更新。在方法内部写了一条打印语句`ToString`，但是刷新后没有打印出任何消息。

不确定这是否是因为我在列表框中使用了自定义对象。

这就是我向列表框中添加项目的方式

```
foreach (string filename in files)
    listBox1.Items.Add(new PathItem { filepath = filename }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T04:30:22.977

有趣的是，打电话

```
myListBox.Refresh() 
```

不会导致 ListBox*对*包含的对象重新评估 ToString()。大概这些值被缓存在某处。

您可以使用以下方法强制 ListBox 重新计算 ToString()。我在我的 ListBox 中使用超过 100 个项目（在一台快速计算机上）对其进行了测试，并且没有看到任何视觉伪影或延迟。

```
 private void UpdateToString(ListBox listBox)
    {
        int count = listBox.Items.Count;
        listBox.SuspendLayout();
        for (int i = 0; i < count; i++)
        {
            listBox.Items[i] = listBox.Items[i];
        }
        listBox.ResumeLayout();
    } 
```

还，

```
PathItem.show_ext = true; 
```

会立即影响从该点开始引用 *show_ext* 的每个 PathItem 实例，因为 *show_ext* 是一个静态变量。它在任何时间点都只有一个值，该值在该类的所有实例之间共享。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-05T14:53:11.497

我为*ComboBox*找到了一个解决方案，但它也适用于*ListBox*：强制控件重新创建它的句柄，如果失败，只需将*DrawMode*更改为其他内容并将其改回。

让它成为广泛的方法，以便您可以轻松地从任何地方调用它：

```
/// <summary>
/// <see cref="ListBox"/> helper methods
/// </summary>
public static class ListBoxHelper
{
    /// <summary>
    /// Forces the control to refresh it's items drawing
    /// </summary>
    public static void Redraw(this ListBox control)
    {
        // Check input parameter
        if (control != null)
        {
            // Try get handle recreate method, may fail in some scenarios
            MethodInfo recreate = typeof(Control).GetMethod("RecreateHandle", BindingFlags.Instance | BindingFlags.NonPublic);
            if (recreate != null)
            {
                // Just force control do recreate it's handle
                recreate.Invoke(control, null);
            }

            // Fail to get recreate handle method
            // Let's do it manually
            else
            {
                // Render is normal?
                DrawMode original = control.DrawMode;
                if (original == DrawMode.Normal)
                {
                    // Change it to owner and then back in normal
                    control.DrawMode = DrawMode.OwnerDrawFixed;
                    control.DrawMode = DrawMode.Normal;
                }
                else
                {
                    // Change it to normal and them back to original
                    control.DrawMode = DrawMode.Normal;
                    control.DrawMode = original;
                }
            }
        }
    }
} 
```

并使用它：

```
this.MyList.Redraw(); 
```

# c++ - 机器唯一 ID

> ID：11876799
> 
> 赞同：1
> 
> 时间：2012-08-09T04:25:52.507
> 
> 标签：c++

> **可能重复：**
> [生成唯一的机器 ID](https://stackoverflow.com/questions/99880/generating-a-unique-machine-id)

我想要处理器序列号，它是唯一的 ID，没有其他处理器具有该 ID。我也有硬盘序列号。我正在使用 C++。有人可以帮我吗？

我需要使用 c++ 的唯一机器 ID，例如 CPU 编号、主板编号。

Win32_BaseBoard、Win32_Processor Win32_DiskPartition

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T04:33:40.170

根据 Wikipedia，从 Pentium III 开始支持 CPUID 汇编器操作码，但出于安全考虑，不再实施。有关详细信息，请参阅以下文章：http://en.wikipedia.org/wiki/CPUID#EAX.3D3: [_Processor_Serial_Number](http://en.wikipedia.org/wiki/CPUID#EAX.3D3:_Processor_Serial_Number)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T05:13:52.463

最好的方法是从不同的来源而不是依赖于单个参数导出机器唯一 ID。

查看[http://sowkot.blogspot.com/2008/08/generating-unique-keyfinger-print-for.html](http://sowkot.blogspot.com/2008/08/generating-unique-keyfinger-print-for.html)了解更多信息。

即使上面链接中描述的方法也不能保证始终相同的 MID（用户可能会更改硬件）。

根据我的经验，在应用程序启动/启动时生成 MID 并存储在应用程序特定区域（可能在注册表中）并将其用于所有其他与应用程序相关的任务，而不是每次都生成。在这种情况下，正常的 GUID 生成就足够了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T05:34:26.870

如果您需要一个唯一的 ID，您不必将其与硬件绑定，只需生成一个新的*随机*ID（128 位或更大）！将其存储在您喜欢的任何持久存储机制中，以便下次提取之前生成的相同 ID。

如果您使用处理器或磁盘序列号，它们可能会发生变化，因为用户可以升级他们的硬件。您自己的唯一 ID 永远不会改变。唯一的缺点是具有双引导的机器将有两个或多个 ID——每个操作系统实例一个 ID。

# python - 跳过单循环

> ID：11876814
> 
> 赞同：1
> 
> 时间：2012-08-09T04:27:29.230
> 
> 标签：python

我遍历文件中的所有行，根据空格将每一行拆分为标记。例如，一行：`circle 1 2 3`将被分成 4 个标记，`circle`, `1`, `2`, `3`。

如果该行以注释 ( `#`) 开头或为空，则 my`tokenList`也是空的。如果是这种情况，我无法检查`tokenList[0]`等。

如果列表的大小为0，我想跳到下一行——循环中的下一个`for`循环：

```
 for line in self.myFile:
            tokenList = self.getTokens(line)
            if len(tokenList) == 0:
                ## ISSUE HERE
            if tokenList[0] == "shape":
                s = RayTracerShapes.Shape()
                self.scene.addShape(s) 
```

我试过`break`了，但这似乎直接跳出了循环，而不是结束当前的迭代。有没有办法跳出我所在的循环并进入下一个循环，而无需完全跳出 for 循环？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T04:28:19.110

使用[continue](http://docs.python.org/reference/simple_stmts.html#continue)关键字。

当`continue`遇到时，将跳过循环体中的其余语句，并从循环顶部继续执行。

这个 SO 问题可能会有所帮助：[Example use of "continue" statement in Python?](https://stackoverflow.com/questions/8420705/example-use-of-continue-statement-in-python) 此[快速参考](http://infohost.nmt.edu/tcc/help/pubs/python/web/continue-statement.html)有两个简短的使用示例。

在你的情况下：

```
 for line in self.myFile:
        tokenList = self.getTokens(line)
        if len(tokenList) == 0:
            continue # skip the rest of the loop, go back to top
        if tokenList[0] == "shape":
            s = RayTracerShapes.Shape()
            self.scene.addShape(s) 
```

# namespaces - Common Lisp 一个 Lisp-n？

> ID：11876815
> 
> 赞同：5
> 
> 时间：2012-08-09T04:27:49.470
> 
> 标签：namespaces, lisp, common-lisp, lisp-2

我知道 Common Lisp 对函数和变量有不同的绑定环境，但我相信它还有另一个用于标签体标签的绑定环境。还有比这更多的绑定环境吗？如果是这样，那么将 Common Lisp 归类为 Lisp-2 是否公平？

这些问题并不意味着迂腐或自行车脱落，我只是想更好地了解 Common Lisp 并希望能获得一些指示，了解在哪里更深入地研究它的规范。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T06:05:21.473

> 我知道 Common Lisp 对函数和变量有不同的绑定环境，

根据[HyperSpec](http://www.lispworks.com/documentation/HyperSpec/Body/26_glo_n.htm#namespace) ，这将是*namespaces*：

> 命名空间 n. 1\. 外延仅限于特定种类的绑定。`The bindings of names to tags is the tag namespace.'' 2\. any mapping whose domain is a set of names.`一个包定义了一个命名空间。''

（第 1 点。）

> 但我相信它还有另一个标签体标签的绑定环境。还有比这更多的绑定环境吗？

是的，还有更多的命名空间。我什至记得有一个小片段暴露了它们中的大部分，但不幸的是，我再也找不到它了¹。它至少公开了*variable*、*function*、*tag*和*block*命名空间，但也可能包括了*类型*和*声明*。还有另一个列出这些名称空间的[SO 答案。](https://stackoverflow.com/a/1021811/271324)

> 如果是这样，那么将 Common Lisp 归类为 Lisp-2 是否公平？

在对上述链接答案的评论中，Rainer Joswig 同意“一般性辩论是关于 Lisp-1 与 Lisp-n 的”。

“2”可能是由于值槽和函数槽之间区别的相对重要性，或者因为其他命名空间的对象不是一流的对象。例如在另一个答案中引用的[Gabriel/Pitman 论文中：](http://www.dreamsongs.com/Separation.html)

> 除了这里讨论的两个，实际上还有更多的命名空间。正如我们前面提到的，其他命名空间至少包括块和标签的命名空间。类型名称和声明名称通常被视为命名空间。因此，我们一直使用的名称 Lisp1 和 Lisp2 具有误导性。Lisp5 和 Lisp6 的名称可能更合适。

和：

> 在本文中，有两个命名空间值得关注，我们将其称为“值命名空间”和“函数命名空间”。其他命名空间包括标记名称（由 TAGBODY 和 GO 使用）和块名称（由 BLOCK 和 RETURN-FROM 使用），但其绑定的位置部分中的对象不是一流的 Lisp 对象。

* * *

¹) [PAIP](https://rads.stackoverflow.com/amzn/click/com/1558601910) , p. 837：

```
(defun f (f)
  (block f
    (tagbody
     f (catch 'f
         (if (typep f 'f)
             (throw 'f (go f)))
         (funcall #'f (get (symbol-value 'f) 'f)))))) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T17:35:23.903

在 PAIP 中，Peter Norvig 说“Common Lisp 至少有七个名称空间”（第 836 页）。

他列出的七个是：

1.  函数和宏
2.  变量
3.  特殊变量
4.  数据类型
5.  tagbody 中 go 语句的标签
6.  块内 return-from 语句的块名
7.  带引号的表达式中的符号

Peter Seibel 在他关于“编译器”与“库”名称空间的 comp.lang.lisp 帖子中提出了一个很好的观点。我认为所有 Norvig 的七个命名空间都是“编译器”命名空间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T11:09:56.690

例如，参见 comp.lang.lisp 的这个旧讨论帖子：

[http://coding.derkeiler.com/Archive/Lisp/comp.lang.lisp/2004-04/0737.html](http://coding.derkeiler.com/Archive/Lisp/comp.lang.lisp/2004-04/0737.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T04:50:14.950

是的 - [http://www.lispworks.com/documentation/lw51/CLHS/Body/t_symbol.htm#symbol](http://www.lispworks.com/documentation/lw51/CLHS/Body/t_symbol.htm#symbol)指定了一个单独的值单元格和函数单元格，与 lisp-2 一致。

还有一个属性列表，但由于没有符号“自然”引用其属性列表的上下文，因此通常不将 CL 描述为 lisp-3（实际上，我通常不知道任何语言如此指定）。

# servicestack - 用于高性能 REST 服务的 servicestack 应用程序主机与 iis

> ID：11876817
> 
> 赞同：3
> 
> 时间：2012-08-09T04:27:59.190
> 
> 标签：servicestack

作为 servicestack 使其开放以在 Web 服务器或独立应用程序中托管服务。

对于原始客户和大量客户而言，最好的性能是什么？

在 apache 或 nginx 或 XSP 或 IIS 上托管只是为了增加功能或性能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T05:09:43.193

[servicestack.net](http://www.servicestack.net/) itself runs on Ubuntu / Nginx + MonoFastCGI, although we've been notified others have been able to get better performance with [self-hosting](https://github.com/ServiceStack/ServiceStack/wiki/Self-hosting) which you can still serve behind a Nginx/Apache reverse proxy if you still wanted access to a full-featured web server.

You can also wrap a [self-hosted ServiceStack in a Linux Daemon](https://github.com/ServiceStack/ServiceStack/wiki/Run-ServiceStack-as-a-daemon-on-Linux).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-10T08:52:26.920

在为我们的 ServiceStack 服务选择托管模式时，我们遇到了同样的问题。使用托管在自托管和 IIS 下的相同服务运行一些基准测试。SelfHost Windows 服务的性能比 IIS 托管应用程序好近 1.5 倍。当然，这不是绝对数字，它可能会因服务的负载类型（cpu/io）而异，但很明显，IIS 例程会增加大量开销。

如果您需要速度并且不担心 IIS 可以为您提供的所有这些功能（监控 / 高级路由 / 管理 / 等）- 自主机是要走的路。我们的设置将 ServiceStack 主机隐藏在 nginx 节点后面，这些节点服务于所有路由/代理/平衡的东西，所以我们不需要可怕的 IIS 例程。

# python - 不同类实例的成员通过方法定义中的参数默认值引用同一对象

> ID：11876818
> 
> 赞同：0
> 
> 时间：2012-08-09T04:27:59.503
> 
> 标签：python, class, static, multiple-instances, keyword-argument

Python 文档说明了关键字参数（词汇表）：

> ...变量名称指定函数中的局部名称，该值被分配给...

因此，除非明确说明，否则我认为一个类的不同实例是真正不同的。然而，下面的代码显然是通过给定的默认值将类的两个实例的一个成员变量引用到 /same/ 对象（好像方法的关键字字典是类变量（“静态”））。一旦修改了成员，一切都很好，但如果由于某种原因没有发生：

1.  我想知道代码的行为是否有充分的理由，因为这根本不是我所期望的（请参阅代码和输出中的标记）和
2.  问题是否有好的解决方案（除了使用“复制”）。谢谢。

    ```
    class C:
        def setParams(self):
            self.e = []
        def setParamsKw(self, kw=['default list']): # <----- kw arg.
            self.eKw = kw                           # <--- that member should
                                                    #      default to the
                                                    #      default argument
                                                    #      (use 'kw.copy()'?)

    def outputMember():
        print " c1.e=", c1.e
        print " c2.e=", c2.e
        print " type(c1.e)=", type(c1.e)
        print " type(c2.e)=", type(c2.e)
        print " c1.e == c2.e:", c1.e == c2.e
        print " c1.e is c2.e:", c1.e is c2.e

    def outputMemberKw():
        print " c1.eKw=", c1.eKw
        print " c2.eKw=", c2.eKw
        print " type(c1.eKw)=", type(c1.eKw)
        print " type(c2.eKw)=", type(c2.eKw)
        print " c1.eKw == c2.eKw:", c1.eKw == c2.eKw
        print " c1.eKw is c2.eKw:", c1.eKw is c2.eKw # <----- this result
                                                     #      is unexpected

    c1 = C()
    c2 = C()

    print " c1 == c2:",  c1 == c2
    print " c1 is c2:",  c1 is c2

    print "Calling setParams for both instances:"
    c1.setParams()
    c2.setParams()
    outputMember()

    print "Calling setParamsKw for both instances:"
    c1.setParamsKw()
    c2.setParamsKw()
    outputMemberKw()

    print "Now manually modifying members of c1:"
    c1.e = [1, 2, 3, 4, 5]
    c1.eKw = [1, 2, 3, 4, 5]
    print "e:"
    outputMember()
    print "eKw:"
    outputMemberKw() 
    ```

输出：

```
c1 == c2: False
 c1 is c2: False
Calling setParams for both instances:
 c1.e= []
 c2.e= []
 type(c1.e)= <type 'list'>
 type(c2.e)= <type 'list'>
 c1.e == c2.e: True
 c1.e is c2.e: False
Calling setParamsKw for both instances:
 c1.eKw= ['default list']
 c2.eKw= ['default list']
 type(c1.eKw)= <type 'list'>
 type(c2.eKw)= <type 'list'>
 c1.eKw == c2.eKw: True
 c1.eKw is c2.eKw: True
Now manually modifying members of c1:
e:
 c1.e= [1, 2, 3, 4, 5]
 c2.e= []
 type(c1.e)= <type 'list'>
 type(c2.e)= <type 'list'>
 c1.e == c2.e: False
 c1.e is c2.e: False
eKw:
 c1.eKw= [1, 2, 3, 4, 5]
 c2.eKw= ['default list']
 type(c1.eKw)= <type 'list'>
 type(c2.eKw)= <type 'list'>
 c1.eKw == c2.eKw: False
 c1.eKw is c2.eKw: False 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T04:31:06.040

```
def setParamsKw(self, kw=None): # <----- kw arg.
            self.eKw = kw  if kw == None else ['default list'] 
```

应该管用

# php - 如何将传递给引导模式对话框的值分配给 php 变量？

> ID：11876822
> 
> 赞同：0
> 
> 时间：2012-08-09T04:28:53.883
> 
> 标签：php, twitter-bootstrap

我正在将值传递给这样的 bootstarp 模态形式 -

`echo '<a data-toggle="modal" data-id="ISBN564541" data-toggle="modal" title="Add this item" class="open-AddBookDialog" href="#addBookDialog">';`

**javascript:**

```
<script>
 $(document).on("click", ".open-AddBookDialog", function () {
 var myBookId = $(this).data('id');
 $(".modal-body #bookId").val( myBookId );
 $('#addBookDialog').modal('show');
});
</script> 
```

并在这样的文本区域中接收它 -

`echo '<textarea name="bookId" id="bookId"></textarea>';`

现在我的问题是如何将此值放入 php 变量中说`$receivedValue`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T04:59:31.927

您必须使用 AJAX 请求或纯表单提交将其发布到您的 PHP 脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-01T20:10:22.197

我能想到的唯一方法是使用 post 或 get 方法抛出 '$.ajax' 方法。这是您需要的代码：

```
.ajax({
    url : "URL of the php script", 
    type: "POST",
    data : //The data that you want to pass
    success: function(res)
    {
         //code if everything passed fine
     }
     }); 
```

# asp-classic - 在 asp-classic 中计算购物车二维数组项目

> ID：11876823
> 
> 赞同：0
> 
> 时间：2012-08-09T04:28:57.393
> 
> 标签：asp-classic, vbscript, shopping-cart, multidimensional-array

`Cart(3, 20)`我有一个使用二维数组在会话中存储用户商店 的购物车。
它存储这样的数据：

```
 Cart(0,0) = Product_ID
 Cart(1,0) = Product_Name
 Cart(2,0) = Product_Price
 Cart(3,0) = Product_Qty 
```

我想根据 product_id 计算 Items （我们没有重复的 product_id）我在这里找到了一个函数：

```
Function UniqueEntryCount(SourceRange)

  Dim MyDataset
  Dim dic
  Set dic=Server.CreateObject("Scripting.Dictionary")

  MyDataset = SourceRange

  For i = 1 To UBound(MyDataset, 2)
   if not dic.Exists(MyDataset(0, i)) then dic.Add MyDataset(0, i), ""
  Next

  UniqueEntryCount = dic.Count
  Set dic = Nothing

End Function 
```

但是还有一个问题，当我的购物车为空时，它会显示 1

怎么能解决呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T06:47:03.283

一个未初始化的固定数组 (Dim a(i, j)) 包含 i * j 个空元素；您的

```
if not dic.Exists(MyDataset(0, i)) then dic.Add MyDataset(0, i), "" 
```

将拿起并计算第一个空项目。在代码中演示：

```
 Dim afCart(3, 4)
  Dim dicPID : Set dicPID = countPID00(afCart)
  Dim aKeys  : aKeys      = dicPID.Keys
  Dim vKey   : vKey       = aKeys(0)
  WScript.Echo "A", dicPID.Count, TypeName(vKey)
  Set dicPID = countPID(afCart)
  WScript.Echo "B", dicPID.Count

  afCart(0, 0) = "ignored"
  afCart(0, 1) = 4711
  afCart(0, 2) = 4712
  afCart(0, 3) = 4711
' afCart(0, 4) = "not initialized/Empty"

  Set dicPID = countPID(afCart)
  WScript.Echo "C"
  For Each vKey In dicPID.Keys
      WScript.Echo "", vKey, "=", dicPID(vKey)
  Next

Function countPID00(afCart)
  Dim dicRVal   : Set dicRVal = CreateObject("Scripting.Dictionary")
  Dim MyDataset : MyDataset   = afCart ' waste of ressources
  Dim iRow
  For iRow = 1 To UBound(MyDataset, 2)
      If Not dicRVal.Exists(MyDataset(0, iRow)) Then
         dicRVal(MyDataset(0, iRow)) = "" ' loss of info; will pick up Empty item
      End If
  Next
  Set countPID00 = dicRVal
End Function ' countPID00

Function countPID(afCart)
  Dim dicRVal : Set dicRVal = CreateObject("Scripting.Dictionary")
  Dim iRow
  For iRow = 1 To UBound(afCart, 2)
      If Not IsEmpty(afCart(0, iRow)) Then
         dicRVal(afCart(0, iRow)) = dicRVal(afCart(0, iRow)) + 1
      End If
  Next
  Set countPID = dicRVal
End Function ' countPID 
```

输出：

```
A 1 Empty
B 0
C
 4711 = 2
 4712 = 1 
```

# komodo - 为什么 komodo 编辑需要一个重复的 .py 文件来执行我的命令？

> ID：11876824
> 
> 赞同：0
> 
> 时间：2012-08-09T04:29:01.420
> 
> 标签：komodo

我在运行 OS X 山狮的 macbook pro 上使用 Komodo edit 7.1

请注意，复制文件的开头需要一个空格。例如：为了执行 hello-world.py，我编写了课程中给出的代码，但是在运行命令时我得到一个错误 /bin/sh: /usr/bin/pythonhello-world.py: No such file or directory。

当我创建一个文件名：_hello-world.py（下划线实际上是空格）并从那里执行它时，该命令正确完成了操作'/usr/bin/python hello-world.py'返回0。

有趣的是，复制文件的代码可能是空白的，它以某种方式选择了正确的文件。

ps 显然我在这方面是全新的。我在谷歌上搜索过类似的问题，但没有找到我需要的。请帮忙！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T12:53:51.317

python 可执行文件的路径设置不正确。使用[终端](http://docs.activestate.com/activepython/2.7/gettingstarted.html#macosx)修复它。

# jquery - 如何动态创建 CSS 样式？

> ID：11876833
> 
> 赞同：0
> 
> 时间：2012-08-09T04:29:42.730
> 
> 标签：jquery, css

在这个 jQuery 示例中：http: [//jqueryui.com/demos/sortable/#empty-lists](http://jqueryui.com/demos/sortable/#empty-lists)，它们为每个可排序的 ul（sortable1、2 和 3）都有 CSS 标签，如下所示：

CSS

```
#sortable1 li, #sortable2 li, #sortable3 li { 
    margin: 5px;
    padding: 5px;
    font-size: 1.2em;
    width: 120px;
}​ 
```

HTML

```
<div class="demo">

<ul id="sortable1" class='droptrue'>
    (...)
</ul>

<ul id="sortable2" class='dropfalse'>
    (...)
</ul>

<ul id="sortable3" class='droptrue'>
</ul> 
```

我遇到的问题是，在我的网页中，我不知道提前有多少个 ul。在不定义#sortable 的每次迭代的情况下处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T04:33:10.910

您实际上不需要为 CSS 使用单独的 id，您可以使用单个类来代替：

CSS

```
.sortable li { 
    margin: 5px;
    padding: 5px;
    font-size: 1.2em;
    width: 120px;
}​ 
```

HTML

```
<div class="demo">

<ul id="sortable1" class='sortable droptrue'>
    (...)
</ul>

<ul id="sortable2" class='sortable dropfalse'>
    (...)
</ul>

<ul id="sortable3" class='sortable droptrue'>
</ul> 
```

和`droptrue`类`dropfalse`仍将按预期工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T04:56:02.117

人们似乎忘记了简单的 CSS3 方法：

```
ul[id^=sortable] li {
    margin: 5px;
    padding: 5px;
    font-size: 1.2em;
    width: 120px;
} 
```

我们在这里使用 Attribute Starts With 选择器。因此，这会将样式应用于 any中属性以 term 开头的任何`li`元素。`ul``id``sortable`

[例子](http://jsfiddle.net/purmou/5THyv/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T04:46:47.550

@AndrewBarber 的答案是处理事情的更好方法，但为了记录，您*可以*动态创建 CSS。

您需要做的是使用某种服务器端语言（PHP 是最流行的，无论其价值如何；也使用 ASP.NET、JSP 等）来动态生成 CSS。

例如，您可以使用以下 HTML：

```
<link rel="stylesheet" type="text/css" href="stylesheet.php"> 
```

然后有这个`stylesheet.php`：

```
<?php
    header('Content-Type: text/css');
    for ( $i = 1; $i < $sortableMax; ++$i )
    {
        echo <<<EOT
#sortable$i
{
    margin: 5px;
    padding: 5px;
    font-size: 1.2em;
    width: 120px;
}
EOT;
    }
?> 
```

这会产生以下 CSS，假设`$sortableMax`以某种方式设置为`5`：

```
#sortable1
{
    margin: 5px;
    padding: 5px;
    font-size: 1.2em;
    width: 120px;
}
#sortable2
{
    margin: 5px;
    padding: 5px;
    font-size: 1.2em;
    width: 120px;
}
#sortable3
{
    margin: 5px;
    padding: 5px;
    font-size: 1.2em;
    width: 120px;
}
#sortable4
{
    margin: 5px;
    padding: 5px;
    font-size: 1.2em;
    width: 120px;
} 
```

# mysql - mysql子选择新手

> ID：11876835
> 
> 赞同：0
> 
> 时间：2012-08-09T04:29:59.177
> 
> 标签：mysql, select, subquery

```
SELECT a.lead_id, c.state_name AS COL1DATA, count( c.state_name ) AS leadcount, (

SELECT count( won_loss ) AS wonlosscount
FROM lead_status
WHERE (won_loss = 'loss')
AND lead_id = a.lead_id
) AS losscount
FROM lead AS a
JOIN states AS c ON a.state_id = c.states_id
GROUP BY c.state_name
ORDER BY losscount DESC 
```

我得到的答案是

```
Lead_id COL1DATA 线索计数 losscount
1 昆士兰 7 0
8 维多利亚 3 0

```

领先地位

```
lead_id     won_loss    won_price   won_mainreason  loss_mainreason     loss_attachment_id  lost_dont_sell_note     add_note    dealer_satisfaction
      5     win         4655        pricing                                                                         fghfg       somewhat
      8     won         34543       pricing                                                                         sfdgs       satisfied
      7     loss                                    service                                                         Additional Notes    verygood
      9     loss                                    not_in_stock                                                    Additi      satisfied 
```

但损失计数应该是 1 和 1

有任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T04:49:00.310

我猜想在 state_name 上分组的同时在相关查询中混合非聚合的lead_id 存在问题。也许你可以描述你想要回来的东西。

**编辑：**基于下面评论中的 OP 反馈。

**编辑 2：**更改为基于聊天会话的左外连接。并非所有潜在客户都有lead_status。

```
SELECT
    s.state_name AS COL1DATA, count(c.state_name) AS leadcount,
    sum(case when ls.won_loss = 'loss' then 1 else 0 end) as losscount
FROM
    lead AS l
    INNER JOIN states AS s ON s.state_id = l.states_id
    LEFT OUTER JOIN lead_status as ls on ls.lead_id = l.lead_id
GROUP BY s.state_name
ORDER BY losscount DESC 
```

我可能会争辩说这个版本稍微好一点。但我不想完全改变你的查询。（我确实更改了别名，因为 A 和 C 令人困惑。）

```
SELECT
    min(s.state_name) AS COL1DATA,
    count(l.lead_id) AS leadcount, /* counting non-nullable key on the outer side */
    sum(case when ls.won_loss = 'loss' then 1 else 0 end) as losscount
FROM
    lead AS l
    INNER JOIN states AS s ON s.state_id = l.states_id
    LEFT OUTER JOIN lead_status as ls on ls.lead_id = l.lead_id
GROUP BY s.state_id /* might be better to group on the id */
ORDER BY losscount DESC 
```

您在输出中包含的lead_id 列是不可预测的，除非该组只有一行。根据你所说的，我怀疑你真的想要它。

# iphone - 如何从表视图IOS中删除一行

> ID：11876838
> 
> 赞同：0
> 
> 时间：2012-08-09T04:30:05.037
> 
> 标签：iphone, objective-c, ios, xcode

我想在不使用以下数据源方法的情况下从表视图中删除一行。怎么做？

```
- (void) tableView : (UITableView *)tableView 
commitEditingStyle : (UITableViewCellEditingStyle)editingStyle 
 forRowAtIndexPath : (NSIndexPath *)indexPath 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T04:32:20.293

怎么样[`[UITableView deleteRowsAtIndexPaths: withRowAnimation:]`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableView/deleteRowsAtIndexPaths%3awithRowAnimation%3a)？

（我已经为您链接了 Apple 的文档）。

@Scar 的想法也不错，但这会刷新整个表格，如果用户滚动到表格底部并且刷新将他们带到顶部，这可能会对用户造成一点干扰。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T04:42:18.353

没那么简单，您必须使用 UITableView 原子地执行此操作

```
[_tableView beginUpdates]; // <-- pretty important

long selectedRow = _tableView.selectedRow;

[_tableView removeRowsAtIndexes:[NSIndexSet indexSetWithIndex:selectedRow] withAnimation:NSTableViewAnimationSlideUp];

//then remove your object from the array
[((NSMutableArray*) _searchResults) removeObjectAtIndex:selectedRow];

[_tableView endUpdates]; 
```

这可以防止在更新数组时调用委托方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T04:31:56.690

从模型中删除该行并调用`-deleteRowsAtIndexPaths:withRowAnimation:`.

# mysql - 创建具有多个值的字段

> ID：11876841
> 
> 赞同：1
> 
> 时间：2012-08-09T04:30:11.387
> 
> 标签：mysql, field

首先感谢您停下来阅读这个问题。所以这是我的问题。我在 mysql 中有一个名为 tbl_section 的表，其中核心字段应该是：

*   section_id
*   节名
*   顾问ID
*   学生卡

所以这里的交易是1个部分有可能有多个student_id，如果是这样我应该怎么做？我试图研究数据类型 Enum 来解决这个困境，但我得到的只是什么。

希望大家对此有解决办法。感谢您的阅读！解决这个问题的人，我会为他做一尊雕像，像上帝一样放在我的前院！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T05:00:34.080

是的，您需要主从表或 1 到 N 关系表，即

```
create table section (
  section_id int,
  section_name varchar(100),
  adviser_id -- don't know what this field mean
)
create table student (
  section_id int,
  student_id int,
  student_name varchar(200)
) 
```

那么你可以这样做

```
insert into section (1, 'section1', 0)
insert into student (1,10,'John Gordon')
insert into student (1,11,'Shor Khan') 
```

那么你可以让所有学生在第1部分

```
select * from student where section_id = 1 
```

# file - exec ant 替换 .m 文件中的值

> ID：11876845
> 
> 赞同：0
> 
> 时间：2012-08-09T04:30:46.353
> 
> 标签：file, ant, replace, exec

如何在 ant 中编写一个 exec 任务来替换 .m 文件中的两个值。因为我想替换 iphone 应用程序中的版本号，包括我使用 hudson 构建的内部版本号，所以我远程访问了 macos 并将应用程序复制到我的 Windows 系统上，所以我使用 ant exec 任务生成了构建，但是现在我想在编译之前将我的内部版本号替换到关注文件中，那么我如何使用 exec 任务来替换文件中的某些值。我知道 propertyfile 任务替换属性文件中的值，但它不适用于此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:43:30.193

如果您有*模板*文件，则可以使用[`<copy>`](http://ant.apache.org/manual/Tasks/copy.html)带有嵌套的任务[`<filterset>`](http://ant.apache.org/manual/Types/filterset.html)来替换某些值。如果没有，您仍然可以使用[`<copy>`](http://ant.apache.org/manual/Tasks/copy.html)，这次使用包含[令牌过滤器](http://ant.apache.org/manual/Types/filterchain.html#tokenfilter)的嵌套过滤器链。如果您想就地编辑，您可以稍后[将](http://ant.apache.org/manual/Tasks/move.html)新创建的文件移动到旧位置。[`<replaceregex>`](http://ant.apache.org/manual/Types/filterchain.html#replaceregex)

几乎可以肯定，对于您的应用程序来说，使用[`<exec>`](http://ant.apache.org/manual/Tasks/exec.html)是一个坏主意，因为它会使您的构建依赖于通常并非在所有平台上都可用的外部应用程序，从而破坏了构建的可移植性。

# ios - ios模拟器中的phonegap总是显示弹出窗口

> ID：11876848
> 
> 赞同：0
> 
> 时间：2012-08-09T04:30:53.987
> 
> 标签：ios, cordova

基本上我把我的 html + css + javascript 代码给了我的朋友，让他为 iOS 中的 phonegap 编译它。相同的代码适用于 android。但是他说每次编译代码时都会显示弹出窗口

这是他的意思的弹出窗口：

![在此处输入图像描述](../Images/76051282e44cdd726527767332428864.png)

和

![在此处输入图像描述](../Images/cb45c7ebf7007677183a92f356dea77e.png)

我如何删除这些弹出窗口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:21:54.893

我遇到了完全相同的问题，阅读了 codemonkey 的评论，发现在我的 html 文件中，我指的是一个旧的 cordova javascript 文件。

我换了

```
<script src="js/cordova-2.2.0.js"></script> 
```

和

```
 <script src="cordova-2.5.0.js"></script> 
```

弹出窗口消失了:)

# internet-explorer - 如何在 Internet Explorer 上运行现代用户脚本？

> ID：11876852
> 
> 赞同：25
> 
> 时间：2012-08-09T04:31:22.680
> 
> 标签：internet-explorer, cross-browser, userscripts, browser-extension

我发现使用 Greasemonkey 类型的用户脚本并将其转换为 Chrome、Safari 和 Firefox 的扩展程序/插件非常容易。当然，人们可以在 Chrome 中本地运行它们，也可以使用 Greasemonkey 插件在 Firefox 中简单地运行它们。

我现在正在探索是否可以在 IE 上运行我的用户脚本。我尝试了古老的 Trixie 和臃肿的 ie7pro，但都没有正确运行脚本。它们部分工作，但似乎在同一页面上多次重新加载脚本，不断插入应该只出现一次的项目。经常提到的用于 IE 的 Greasemonkey 现在似乎已经失效，它的域名 (gm4ie.com) 已被停放并充满了广告。

我已经在 w/sea​​rch 中挖掘了一下，寻找有关如何开发 IE 扩展的信息（例如[this](https://stackoverflow.com/questions/5643819/developing-internet-explorer-extensions/5740004#5740004)）。但是我没有找到任何人谈论让用户脚本在插件内部运行。至少看起来 javascript 在这些环境中可能不可用，需要用 C# 完全重写。

有没有我上面没有列出的 Greasemonkey 类型的插件？是否可以将 javascript 用户脚本转换为 IE 扩展？

# ruby-on-rails - 在 ruby on rails 中从另一个模型访问数据

> ID：11876859
> 
> 赞同：3
> 
> 时间：2012-08-09T04:32:28.570
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有 2 个名为主题和页面的模型。它们之间存在一对多的关联。

```
class Subject < ActiveRecord::Base

  has_many :pages
  attr_accessible :name
  attr_accessible :position
  attr_accessible :visible
  attr_accessible :created_at
end 
```

和

```
class Page < ActiveRecord::Base

  belongs_to :subject                                                    
   attr_accessible :subject_id
   attr_accessible :name
   attr_accessible :permalink
   attr_accessible :position
   attr_accessible :visible
   attr_accessible :created_at
end 
```

我在 view -> pages 文件夹中有 list.html.erb。

Q. 我的问题是我想在 list.html.erb 中显示所有的 subject_id。如何？对于我必须在 pages_controller 和 list.html.erb 中进行的更改，以便我得到解决方案......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T04:39:42.233

您可以通过以下方式访问任何控制器中的任何模型

```
 @instance_variable = ModelClass.all 
```

在您的情况下，它应该类似于以下内容

pages_controller.rb

```
def list 
  @subjects_list = Subject.all
end 
```

应用程序/视图/页面/list.html.erb

```
<% for subject in @subjects_list %>
  <!--  Your Code Here  -->
<% end %> 
```

# php - 将 1 个值与 PHP 中的单个数组进行比较

> ID：11876861
> 
> 赞同：0
> 
> 时间：2012-08-09T04:32:35.413
> 
> 标签：php, arrays, comparison, string-comparison, comparison-operators

如何将一个值与特定数组中的每个值进行比较？

例如：

```
$list =  ("blue", "red", "green", "yellow", "orange", "white");
$value = "blue";

if ($value == $list)
{
  // then print "This is BLUE";
} 
```

我只需要一次确定颜色，无需重复打印其他颜色。

这可能会让我实现从数据库中检索的动态值，然后比较 PHP 脚本中的 [hardcode] 数组。然后，将精确的值匹配返回到屏幕上，例如上面的场景。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T04:34:14.820

你可以寻找[in_array()](http://php.net/manual/en/function.in-array.php)吗？

```
if (in_array('blue', $colors)) {
    // the color blue is there
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T04:35:10.130

你的意思是[in_array](http://php.net/manual/en/function.in-array.php)吗？

```
$list =  array("blue", "red", "green", "yellow", "orange", "white");
$value = "blue";

if (in_array($value, $list))
{
  // then print "This is BLUE";
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T04:35:12.533

```
$list = array("blue","orange","green");
$value = "blue";

if(in_array($value, $list)) {
    echo $value;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T05:38:39.117

`in_array`是在将单个值与数组进行比较时应该使用的函数， **但**如果需要将**多个值**与数组进行比较，则可以创建一个包含已有值的新数组，然后使用`array_intersect($array1,$array2)`

# perl - 如何通过perl获取xml代码块

> ID：11876867
> 
> 赞同：-4
> 
> 时间：2012-08-09T04:33:21.353
> 
> 标签：perl, perl-module

从早上开始，我一直在挠头来解决以下要求。我知道如何解析 xml，但无法找到解决方案来获取确切的块和标签。

**示例代码：**

```
<employee name="sample1">
 <interest name="cricket">
<function action= "bowling">
   <rating> average </rating>
</function>
 </interest>
 <interest name="football">
<function action="defender">
   <rating> good </rating>
</function>
 </interest>
</employee> 
```

我只想从上面的 xml 文件中提取以下内容并将其写入另一个文本文件。

```
 <interest name="cricket">
     <function action= "bowling">
        <rating> average </rating>
     </function>
  </interest> 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T06:42:22.503

使用 XML::Twig：

```
#!/usr/bin/perl

use strict;
use warnings;
use XML::Twig;

XML::Twig->new( twig_handlers => { 'interest[@name="cricket"]' => sub { $_->print } },
              )
         ->parsefile( 'interest.xml'); 
```

一点解释：当满足触发条件的元素（在本例中为 ）时调用 twig_handler `interest[@name="cricket"]`。此时调用关联的子程序。在 sub`$_`中设置为当前元素，然后打印。对于更复杂的 subs，传递 2 个参数，twig 本身（文档）和当前元素。

瞧。

XML::Twig 还附带了一个名为 的工具`xml_grep`，它可以轻松提取您想要的内容：

```
xml_grep --nowrap 'interest[@name="cricket"]' interest.xml 
```

该`--nowrap`选项可防止将结果包装在包含元素中的默认行为。

# c++ - 应用程序在对话关闭时崩溃，线程正在运行

> ID：11876876
> 
> 赞同：0
> 
> 时间：2012-08-09T04:34:14.570
> 
> 标签：c++, mfc

在我的应用程序中，我有一个模式对话框，其中包含大约 20 个不同的组合框，它们绑定到数据库中的某些字段。数据库很大，在加载对话框时，我必须从数据库中加载所有组合框。所以我设置了 20 个线程（每个组合框 1 个）。

一切正常，但仅当用户在线程运行时使用关闭或取消按钮或确定按钮关闭对话框时才会出现问题；在这种情况下，应用程序崩溃。

我也试图过早地终止线程，但这无济于事。这是线程终止代码

```
if(m_iNoOfThreadsCompleted != m_iTotalThreads)      
{
        for(int i = 0; i < m_iTotalThreads - 1; i++)
    {
            if (m_threads[i] != NULL)
        {
            GetExitCodeThread(m_threads[i]->m_hThread, &exit_code);
            if(exit_code == STILL_ACTIVE)
                CloseHandle(m_threads[i]->m_hThread);
        }
        if(m_iNoOfThreadsCompleted == m_iTotalThreads)
            break;
    }
} 
```

问题是什么？还是我需要使用更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T04:41:37.610

同步线程通常使用事件来完成。

```
// Before Creating threads
HANDLE hEndEvent = CreateEvent(NULL,FALSE,FALSE,NULL);
// Pass handle to threads 
```

然后在终止时

```
SetEvent(hEndEvent);
WaitForMultipleObjects(m_iTotalThreads,m_threads,TRUE,INFINITE); // Wait for all threads to end

// Loop through and close all the thread handles 
```

请注意，您需要偶尔寻找要设置的结束事件，否则您的线程将不会结束。

```
// In Thread
if (WaitForSingleObject(hEndEvent,0)==WAIT_OBJECT_0) {
    // Clean up
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T04:46:11.047

`CloseHandle`不会终止线程。你可以打电话`TerminateThread`，但这不是最好的做法......

正常情况是为您的线程提供一个手动重置事件对象，该对象表示正在发生关闭。有时最好有一个标志，以便线程可以中止冗长的操作。线程像往常一样继续工作，每当它们必须等待某个对象时，您就会在该等待中包含关闭事件对象。

所以退出的过程通常是这样做的：

1.  设置关机标志
2.  发出关闭事件信号
3.  恢复所有线程（以防任何线程被挂起）
4.  `WaitForMultipleObjects`在所有线程句柄上，具有适当的超时
5.  调用`TerminateThread`未在超时内退出的任何线程
6.  关闭所有线程句柄
7.  销毁关闭事件

这种方法要求使用创建线程`_beginthreadex`，以便您负责关闭句柄。这样做的好处是您可以等待线程，即使它们已经退出（当然退出的线程已经处于信号状态）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T04:51:45.323

作为 paddy 描述的另一种方法的替代方法是，不是让 20 个线程加载组合框，而是只有一个线程可以加载。通过拥有 20 个线程，您可能无法加快速度，具体取决于您的数据库库。

然后当该线程定期加载时（例如在每个复选框之间）检查用户是否按下取消，如果是，则停止处理并退出线程。

恕我直言，这将使处理比管理 20 个线程更简单。

# javascript - PhoneGap/Cordova 插件 - 如何设置？

> ID：11876877
> 
> 赞同：-1
> 
> 时间：2012-08-09T04:34:16.940
> 
> 标签：javascript, jquery, cordova

我已经从这里成功安装了 iOS 的日历插件（我认为）： [https ://github.com/phonegap/phonegap-plugins/tree/master/iOS/CalendarPlugin](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/CalendarPlugin)

但是我似乎无法让它工作。到目前为止，这是我所做的：

1.  将日历 .h 和 .m 文件放入我项目的插件文件夹中。
2.  将 calendar.js 文件添加到我的目录结构中并在标题中链接
3.  在我的项目中添加了 EventKit 和 EventKitUI 框架
4.  将术语 calendarPlugin 添加到我的 cordova.plist 文件中

5.将以下代码添加到我要保存的第一页：

```
window.plugins.calendarPlugin.prototype.createEvent = function(title,location,notes, startDate, endDate){
                var title= "My Appt";
                var location = "Los Felix";
                var notes = "me testing";
                var startDate = "2012-11-23 09:30:00";
                var endDate = "2012-11-23 12:30:00";

   cal.createEvent(title,location,notes,startDate,endDate);
            }

            $(document).ready(function() {
                    cal = window.plugins.calendarPlugin;
                    var cal;

 $('.calinfo').live('click', function() {

          var desiredValue = $(this).parent().prev().find('.calendar').val();
                                             console.log(desiredValue);                                               
                                             var calInfo = desiredValue.split(',');

             createEvent(calInfo[0], calInfo[1], calInfo[2], calInfo[3], calInfo[4]);

                                            });                              
                    }); 
```

当我运行它时，注意到发生了。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T08:01:52.903

不要使用 $(document).ready(function());。而是使用准备好的设备。在身体负荷上调用函数 onBodyLoad()。

```
 function onBodyLoad()
        {        
            document.addEventListener("deviceready", onDeviceReady, false);
            deviceready = true;
        } 
```

//////////////////////////////

```
 function onDeviceReady()
    {
       // Your code goes here

    } 
```

# socialengine - 我们如何在社交引擎中设置 cron 作业？

> ID：11876878
> 
> 赞同：2
> 
> 时间：2012-08-09T04:34:52.417
> 
> 标签：socialengine, cron-task

我正在开发一个社交引擎项目，它有一个模块，每天早上都会自动向用户发送一封电子邮件。我已经在模块的控制器上创建了一个动作，它将向用户发送电子邮件。我想在cron下设置job任务怎么做呢？你能举个例子在每天早上 9 点设置它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T12:21:18.190

任务计划程序已经存在于使用 cron 作业的管理面板中，您可以在`settings/task scheduler/task scheduler settings`管理面板中编辑 cron 作业的设置。

参考链接： [cron作业](http://support.socialengine.com/questions/222/Admin-Panel-Settings-Task-Scheduler)

# java - Arduino ADK 无法通过 USB 接收来自 Galaxy S II 的数据

> ID：11876886
> 
> 赞同：1
> 
> 时间：2012-08-09T04:35:38.767
> 
> 标签：java, android, arduino, galaxy, adk

我正在开发一个依赖于我的 Galaxy S II 和我的 Mega ADK 之间通信的项目。

Arduino 显示它正在正常开始通信，并且 S II 在连接时正在发送 USB_ACCESSORY_ATTACHED 意图，但 Arduino 无法读取发送给它的任何字节。

Arduino代码： http: [//pastebin.com/UiKzx1Rk](http://pastebin.com/UiKzx1Rk)

安卓代码： http: [//pastebin.com/f6PageAZ](http://pastebin.com/f6PageAZ)

这个问题是在arduino方面还是在android方面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T09:15:27.687

ADK 确实支持 Galaxy S II（我目前正在使用它来开发配件）

我不确定你的问题出在哪里。但我建议您看一下本教程，详细介绍如何从 Android 控制一个 LED：http: [//allaboutee.com/2011/12/31/arduino-adk-board-blink-an-led-with-your-phone -代码和解释/](http://allaboutee.com/2011/12/31/arduino-adk-board-blink-an-led-with-your-phone-code-and-explanation/)

在此示例中（在 Arduino 方面），他们使用对象`read()`上的方法`AndroidAccessory`而不是`readBytes`您正在使用的方法。也许您也想尝试使用`read()`。

对不起，我的回答没有多大帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T14:09:16.463

ADK 不支持 Galaxy S II。你相信吗？:(。我今天刚买了一个Mega ADK后从网上得到了这个信息。如果你找到解决这个问题的方法，请写在这里。

# css - CSS：菜单栏和内容样式问题

> ID：11876888
> 
> 赞同：1
> 
> 时间：2012-08-09T04:35:49.093
> 
> 标签：css

我目前正在向网页添加导航栏。但我遇到了一些 CSS 样式问题。导航菜单栏正在推送下面的内容，中间留下了巨大的空隙，使其参差不齐。我采取了预防措施，省略了任何会弄乱底部的东西，`margin` `bottom-padding`但我仍然得到相同的结果。如何让菜单栏不影响下面的内容？[例子](http://webprolearner2346.zxq.net/css-test2/)

**添加导航栏后：** ![在此处输入图像描述](../Images/0b9f7724a70aeb32ffe5064ff5a83908.png)

**没有导航栏，下面的内容是偶数：** ![在此处输入图像描述](../Images/3ccacfcafdf75a25b2a8fefd08881811.png)

我已将导致问题的特定 css 规则添加到`devgrow.css`：

```
<style>
#navigation {
    position:relative;
    top:-45px;
    left:450px;
}

#au_title {
    color: #FC821D;
    font-size: 120%;
    font-weight: bold;
    left: 515px;
    letter-spacing: 2px;
    position: relative;
    text-transform: uppercase;
    top: -105px;
}

#searchInput {
    left: 700px;
    position: relative;
    top: -180px;
}

#contentNav { color: #cfdae3; }

/* Dark Button CSS */
.buttonNav {
    outline: 0;
    padding: 5px 12px;
    display: block;
    color: #EBEBEB;
    font-weight: bold;
    text-shadow: 1px 1px #1f272b;
    border: 1px solid #1c252b;
    border-radius: 3px;
    -moz-border-radius: 3px;
    -webkit-border-radius: 3px;
    background: #232B30; /* old browsers */
    background: -moz-linear-gradient(top, #3D4850 3%, #313d45 4%, #232B30 100%); /* firefox */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(3%,#3D4850), color-stop(4%,#313d45), color-stop(100%,#232B30)); /* webkit */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#3D4850', endColorstr='#232B30',GradientType=0 ); /* ie */
    box-shadow: 1px 1px 1px rgba(0,0,0,0.2); /* CSS3 */
    -moz-box-shadow: 1px 1px 1px rgba(0,0,0,0.2); /* Firefox */
    -webkit-box-shadow: 1px 1px 1px rgba(0,0,0,0.2); /* Safari, Chrome */
}
.buttonNav:hover {
    color: #fff;
    background: #4C5A64; /* old browsers */
    background: -moz-linear-gradient(top, #4C5A64 3%, #404F5A 4%, #2E3940 100%); /* firefox */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(3%,#4C5A64), color-stop(4%,#404F5A), color-stop(100%,#2E3940)); /* webkit */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#4C5A64', endColorstr='#2E3940',GradientType=0 ); /* ie */
}
.buttonNav:active {
    background-position: 0 top;
    position: relative;
    top: 1px;
    color: #fff;
    padding: 6px 12px 4px;
    background: #20282D; /* old browsers */
    background: -moz-linear-gradient(top, #20282D 3%, #252E34 51%, #222A30 100%); /* firefox */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(3%,#20282D), color-stop(51%,#252E34), color-stop(100%,#222A30)); /* webkit */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#20282D', endColorstr='#222A30',GradientType=0 ); /* ie */
    -moz-box-shadow: 1px 1px 1px rgba(255,255,255,0.1); /* Firefox */
    -webkit-box-shadow: 1px 1px 1px rgba(255,255,255,0.1); /* Safari, Chrome */
    box-shadow: 1px 1px 1px rgba(255,255,255,0.1); /* CSS3 */
}

/* Other stuff: */
.button-list { list-style: none; width: 100%; float: left; display: block; }
.button-list li { float: left; margin: 0 5px 0 0; }
.button-list li.search { padding-left: 18px; margin-left: 10px; position: relative; }

/* Search CSS: */
.search-input {
    padding: 0 5px 0 22px;
    border: 2px solid #DADADA;
    height: 30px;
    font-size: 12px;
    line-height: 30px;
    border-radius: 25px;
    -moz-border-radius: 25px;
    -webkit-border-radius: 25px;
    background: #FFF; /* old browsers */

}
.search-input:focus {outline: none;}

.search-submit {
    width: 13px;
    height: 13px;
    border: none;
    background: url(images/mag-glass.png) no-repeat;
    display: block;
    position: absolute;
    left: 26px;
    top: 10px;
    text-indent: -9999em;
}
</style> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T04:43:01.553

首先我要说编码真的很糟糕。为了解决该问题，请从您那里删除**浮动**`button-list`。像这样写：

```
.button-list {
    list-style: none outside none;
    overflow: hidden;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T04:38:38.827

嘿，现在在你的 css **id中****定义** `overflow hidden``#contentArea`

 **像这样

```
#contentArea {
    overflow: hidden;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T04:42:14.360

在第一个内容区域的 css 中添加样式 clear

```
<div id="contentArea" style="clear:both"> 
```**

# java - 从java程序备份mysql数据库

> ID：11876890
> 
> 赞同：2
> 
> 时间：2012-08-09T04:36:07.360
> 
> 标签：java, database, backup

我正在尝试从 Java 应用程序备份我的数据库。目前，我正在使用 xampp 作为`localhost`数据库。我在我的程序中尝试了这些代码，但是当我执行这些代码时，我的程序进入等待状态。当我从命令行执行相同的代码时，它会询问密码，并在提供密码后`backup.sql`成功创建备份文件。我正在使用的代码是：

```
String executeCmd = "C:\\xampp\\mysql\\bin\\mysqldump.exe -u root -p db1 -r D:/mine/backup.sql"; 
```

Java代码：

```
 Process runtimeProcess;
    try {

        runtimeProcess = Runtime.getRuntime().exec(executeCmd);

        int processComplete = runtimeProcess.waitFor();

        if (processComplete == 0) {
            System.out.println("Backup created successfully");
            return true;
        } else {
            System.out.println("Could not create the backup");
        }
    } catch (Exception ex) {
        ex.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T04:45:01.890

尝试使用带有密码的命令，例如

```
String executeCmd = "C:\\xampp\\mysql\\bin\\mysqldump.exe -u root -pYOUR_DB_PASSWORD db1 -r D:/mine/backup.sql"; 
```

注意和之间的*NO SPACE*。`-p``DATABASE PASSWORD`

* * *

**编辑1：（**来自评论）

要恢复您的数据库，您需要执行

```
mysql -u root -pPASSWORD db1 < /full/qualified/path/to/backup.sql 
```

**编辑2：（**改进）

您可能还想尝试一些很酷的选项，例如

```
mysqldump --user MYSQL_USER --password=MYSQL_PASSWORD --add-locks --flush-privileges \
--add-drop-table --complete-insert --extended-insert --single-transaction \
--database DB_TO_BACKUP > FILENAME_FOR_SQL_STATEMENTS 
```

参考[这里](http://code.naishe.in/2012/07/backup-your-mysql-to-amazon-s3.html)。

# c# - 如何在运行时创建 .aspx 页面？

> ID：11876891
> 
> 赞同：0
> 
> 时间：2012-08-09T04:36:21.643
> 
> 标签：c#, asp.net

我需要在运行时创建 .aspx 页面：

说前：

我有一个配置 xml 文件，它有 2 个主节点，每个节点都有其子节点，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<Root>
<Options name="First">
    <controls>
        <control type="textbox" lable="Option1TextBox" value="">            
    </controls>
</Options>

<Options name="Second">
    <controls>
        <control type="textbox" lable="Option2TextBox" value="">
        <control type="dropdown" lable="Option2dropdown" value="Value1, Value2">            
    </controls>
</Options> 
```

1.  当我加载 .aspx 页面时，我必须读取 xml 文件节点并获取“名称”属性并在页面中创建下拉列表控件。
2.  从下拉列表中，如果用户选择“第一个”，我需要遍历子节点并在运行时在同一个 aspx 页面中创建控件。EX：如果用户从下拉列表中选择“第一个”，我需要在页面中创建一个 Texbox。如果用户从下拉列表中选择“第二”，我需要创建一个文本框和下拉列表，如 xml 中给出的那样。

任何建议/指南将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T04:39:08.050

您应该考虑[为 ASP.Net 创建用户控件](http://msdn.microsoft.com/en-us/library/26db8ysc%28v=vs.85%29.aspx)，然后根据需要在运行时添加它们，而不是在运行时创建“aspx”页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T05:59:54.600

您需要执行一些步骤来实现您想要的。

1.  [反序列化](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.deserialize%28v=vs.100%29.aspx)xml。
2.  订阅`DropDownList` `SelectedIndexChanged` [事件](http://msdn.microsoft.com/ru-ru/library/system.web.ui.webcontrols.listcontrol.selectedindexchanged.aspx)。
3.  [添加将动态添加到页面的控件的](http://msdn.microsoft.com/en-us/library/kyt0fzt1.aspx)代码。

# java - 内置jsp的动态网页到任何高级java框架

> ID：11876892
> 
> 赞同：0
> 
> 时间：2012-08-09T04:36:25.800
> 
> 标签：java, ajax, model-view-controller, jsf, jakarta-ee

我是 Java Web 开发的新手。

我有一个动态 jsp 页面（贷款申请表），它也使用 ajax 来加载可靠的下拉参数并进行验证。

**我的任务是将此动态 web(jsp) 页面迁移到任何高级 Java 框架。**

请建议哪一个可能是我这样做的最佳选择？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T05:07:56.540

试试 Java Server Faces。这更方便迁移 JSP 开发人员。检查这些链接

*   [JavaServer Faces 技术](http://www.oracle.com/technetwork/java/javaee/javaserverfaces-139869.html)
*   [JavaServer Faces 社区](http://javaserverfaces.java.net/)

JSF 有很多资源，很容易与 ajax 一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T04:38:18.163

根据最新的 Java EE 规范， JSP 正在被[XHTML](http://dev.fyicenter.com/faq/xhtml/Tools-for-Viewing-XHTML-Documents.html)取代。所以，我建议使用 XHTML。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T04:51:07.190

有许多可用的 Java 框架[http://java-source.net/open-source/web-frameworks](http://java-source.net/open-source/web-frameworks)，[http://orangeslate.com/2007/11/27/six-best-web-frameworks-in-java/](http://orangeslate.com/2007/11/27/six-best-web-frameworks-in-java/)

谷歌了解更多。Struts 和 Spring 是业界最容易接受的两个框架。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T05:18:59.583

对于新手来说，最好的学习可能是[Java EE 6 教程](http://docs.oracle.com/javaee/6/tutorial/doc/)中定义的 Oracle Java 标准，其中解释了使用[JSF](https://stackoverflow.com/tags/jsf/info) 2 和 Facelets 的基础知识。是的，还有更多 Java MVC 框架，例如：

*   [支柱](http://struts.apache.org/)
*   [春天](http://www.springsource.org/)
*   [玩！](http://www.playframework.org/)
*   [谷歌网络工具包 (GWT)](https://developers.google.com/web-toolkit/)
*   [挂毯](http://tapestry.apache.org/)

和更多。有关我的答案的更多参考资料，请参阅：

*   [什么是 ASP.NET / PHP 的主流 Java 替代品](https://stackoverflow.com/a/2556601/1065197)
*   [Java Web开发，我需要什么技能？](https://stackoverflow.com/a/1958854/1065197)
*   [在 Java EE 6 中制作 Java Web 应用程序需要学习什么？](https://stackoverflow.com/a/1960447/1065197)（题外话：这是我最喜欢的其他答案）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T06:03:11.247

使用 spring 和 hibernate。Spring 性能高，易于测试。初学者也很容易学习。Hibernate 是一个 ORM - 对象关系映射。使用 hibernate，您可以创建一个“虚拟”对象数据库，可以在编程语言本身。它也很容易学习。

采用

Java --- 后端 JSP,Jquery --- 前端数据库 --- mysql

:)

# java - 我的 EJB 抛出了一个需要事务的异常，尽管另一个 EJB 设置以相同的方式使用相同的持久性单元不会抛出异常

> ID：11876893
> 
> 赞同：0
> 
> 时间：2012-08-09T04:36:54.473
> 
> 标签：java, jakarta-ee, ejb, jta, entitymanager

首先是我的整个 EJB 文件：

```
package enkia.pulse.indexing.beans;

import enkia.pulse.core.Category;
import enkia.pulse.core.Product;
import enkia.pulse.core.Review;
import enkia.pulse.core.Twitter;
import enkia.utils.HarvestingConstants;
import java.util.HashMap;
import java.util.LinkedList;
import java.util.List;
import java.util.Map;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.annotation.Resource;
import javax.ejb.SessionContext;
import javax.ejb.Stateless;
import javax.ejb.TimedObject;
import javax.ejb.Timer;
import javax.ejb.TimerService;
import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;
import javax.persistence.Query;
import javax.transaction.UserTransaction;
import twitter4j.FilterQuery;
import twitter4j.Status;
import twitter4j.StatusDeletionNotice;
import twitter4j.StatusListener;
import twitter4j.TwitterException;
import twitter4j.TwitterStream;
import twitter4j.TwitterStreamFactory;
import twitter4j.auth.AccessToken;

/**
 *
 * @author joshua
 */
@Stateless
public class TwitterBean implements TwitterBeanLocal,
    TimedObject {

    List<String> _twitterTopics;
    Map<String,Integer> _tagCatRel;
    TimerService _timerService;
    Timer _timer;

    /** The session context needed to create the timer */
    @Resource
    private SessionContext _sc;

    @PersistenceContext(unitName=HarvestingConstants.PERSISTENCE_UNIT)
    EntityManager _entityManager;

    /** A logging object for formatted output to the server log. */
    private Logger _logger;
    private int errors;

    /**
     * Constructs the logger
     */
    public TwitterBean(){
    _logger = Logger.getLogger(this.getClass().getName());
        _logger.log(Level.INFO,"Instantiating Twitter Bean");
    }

    /**
     * Attempts to retrieve the configuration object. Creates the harvester
     * with the configuration and then sets a timer to run the harvester
     * periodically
     */
    public void initialize() {
        _logger.log(Level.INFO,"Initializing Twitter bean.");
        _twitterTopics = new LinkedList<String>();
        _tagCatRel = new HashMap<String,Integer>();
        _timerService = _sc.getTimerService();

    _timer = _timerService.createTimer(0,1000*60*60,null); //restart every hour

        _logger.log(Level.INFO,"Starting Twitter timer");
    }

    public void ejbTimeout(Timer timer) {
        _logger.log(Level.INFO,"Running Twitter timer");
        findTopics();
        try {
            setupStream();
        } catch (TwitterException ex) {
            Logger.getLogger(TwitterBean.class.getName()).log(Level.SEVERE, null, ex);
        }

    }

    private void setupStream() throws TwitterException{
        StatusListener listener = new StatusListener(){

            @Override
            public void onStatus(Status status) {
                insertStatus(status);
            }

            @Override
            public void onDeletionNotice(StatusDeletionNotice statusDeletionNotice) {
                //DO nothing
            }

            @Override
            public void onTrackLimitationNotice(int numberOfLimitedStatuses) {
               _logger.log(Level.INFO,"Track limitation notice: "+numberOfLimitedStatuses);
            }

            @Override
            public void onScrubGeo(long l, long l1) {
                _logger.log(Level.INFO,"Scrub GEO");
            }

            @Override
            public void onException(Exception ex) {
                ex.printStackTrace();
            }

        };
        TwitterStream twitterStream = new TwitterStreamFactory().getInstance();
        twitterStream.setOAuthConsumer("secret", "secret");
        twitterStream.setOAuthAccessToken(new AccessToken("secret","secret"));

        FilterQuery query = new FilterQuery();
        query = query.track(_twitterTopics.toArray(new String[_twitterTopics.size()]));

        twitterStream.addListener(listener);
        twitterStream.filter(query);
    }

    public void insertStatus(Status status){

            String foundTag="";
            for(String tag : _tagCatRel.keySet()){
                if(status.getText().toLowerCase().contains(tag.toLowerCase())){
                    //found
                    foundTag=tag;
                    break;
                }
            }
            if(foundTag.equals("")){
                return;
            }
            Integer category = _tagCatRel.get(foundTag);
            Query q=_entityManager.createNamedQuery("Category.findByCategoryId");
            q.setParameter("categoryId",category);
            Category c = (Category) q.getSingleResult();
            Product p = new Product(c);

            _entityManager.persist(p);
            _entityManager.merge(p);

            Review r = new Review();

            r.setReview(status.getText());
            r.setUrl("http://www.twitter.com/"+status.getUser().getScreenName()+"/statuses/"+status.getId());
            r.setProcessed(0);
            r.setDateCreated(status.getCreatedAt().getTime());
            p.getPartNumber();
            r.setProductId(p.getProductId());
            _entityManager.persist(r);

            _logger.log(Level.INFO,"Added tweet:" + r.getReview());

    }

    private void findTopics() {
        _twitterTopics = new LinkedList<String>();
        Query twitterQuery=_entityManager.createNamedQuery("Twitter.findAll");
        String all="";
        for(Object t: twitterQuery.getResultList()){
            Twitter twitter=(Twitter) t;

            for(String tag : twitter.getTags().split(" ")){
                _twitterTopics.add(tag);
                all+=tag+", ";
                Integer test = twitter.getCategoryId();
                _tagCatRel.put(tag,twitter.getCategoryId());
            }
        }
        _logger.log(Level.INFO,"Tracking: "+all);
    }
} 
```

还有我的persistence.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="1.0" xmlns="http://java.sun.com/xml/ns/persistence"   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">
  <persistence-unit name="PulsePU" transaction-type="JTA">
    <jta-data-source>pulseEJB</jta-data-source>
    <class>enkia.pulse.core.Category</class>
    <class>enkia.pulse.core.Department</class>
    <class>enkia.pulse.core.Feature</class>
    <class>enkia.pulse.core.Product</class>
    <class>enkia.pulse.core.Review</class>
    <class>enkia.pulse.core.ReviewSnippet</class>
    <class>enkia.pulse.core.Sentiment</class>
    <class>enkia.pulse.core.SentimentReview</class>
    <class>enkia.pulse.core.Twitter</class>
    <exclude-unlisted-classes>true</exclude-unlisted-classes>
    <properties/>
  </persistence-unit>
</persistence> 
```

最后是我的 sun-resource.xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
  <!DOCTYPE resources PUBLIC "-//Sun Microsystems, Inc.//DTD Application Server 9.0 Resource Definitions //EN" "http://www.sun.com/software/appserver/dtds/sun-resources_1_3.dtd">
<resources>
<jdbc-resource enabled="true" jndi-name="pulseEJB" object-type="user" pool-name="mysqlPool"/>
<jdbc-connection-pool allow-non-component-callers="false" associate-with-thread="false" connection-creation-retry-attempts="0" connection-creation-retry-interval-in-seconds="10" connection-leak-reclaim="false" connection-leak-timeout-in-seconds="0" connection-validation-method="auto-commit" datasource-classname="com.mysql.jdbc.jdbc2.optional.MysqlDataSource" fail-all-connections="false" idle-timeout-in-seconds="300" is-connection-validation-required="false" is-isolation-level-guaranteed="true" lazy-connection-association="false" lazy-connection-enlistment="false" match-connections="false" max-connection-usage-count="0" max-pool-size="32" max-wait-time-in-millis="60000" name="mysqlPool" non-transactional-connections="false" pool-resize-quantity="2" res-type="javax.sql.DataSource" statement-timeout-in-seconds="-1" steady-pool-size="8" validate-atmost-once-period-in-seconds="0" wrap-jdbc-objects="false">
<property name="serverName" value="endpoint"/>
<property name="portNumber" value="3306"/>
<property name="databaseName" value="pulse"/>
<property name="User" value="user"/>
<property name="Password" value="password"/>
<property name="URL" value="jdbc:mysql://endpoint/pulse"/>
<property name="driverClass" value="com.mysql.jdbc.Driver"/> 
```

我正在使用 Netbeans。

我`EJB`在一个`webproject`. 我有另一个 EJB 设置，与我在那里实例化的相同，它适用于容器管理的事务。我也试过只是说“搞砸”并使用了 UserTransaction 但合并出现问题并最终出现许多意想不到的问题，NPE 在 p 之后 `"_entityManager.persist(p); _entityManager.merge(p);"`

任何关于在哪里寻找两个 EJB 之间差异的建议都值得赞赏，因为我没有想法。

我还注意到`netbeans`在有问题的 EJB 中为我的两个实体类生成源，`"ap-source-output"`但在工作的 EJB 中没有。

生成的代码我不明白为什么会在下面生成：package enkia.pulse.core;

```
import javax.annotation.Generated;
import javax.persistence.metamodel.SingularAttribute;
import javax.persistence.metamodel.StaticMetamodel;

@Generated(value="EclipseLink-2.2.0.v20110202-r8913", date="2012-08-08T23:09:05")
@StaticMetamodel(Twitter.class)
public class Twitter_ { 

    public static volatile SingularAttribute<Twitter, Integer> id;
    public static volatile SingularAttribute<Twitter, String> tags;
    public static volatile SingularAttribute<Twitter, Integer> categoryId;
    public static volatile SingularAttribute<Twitter, Long> lastStatus;

} 
```

和

```
package enkia.pulse.core;

import enkia.pulse.core.Category;
import javax.annotation.Generated;
import javax.persistence.metamodel.SingularAttribute;
import javax.persistence.metamodel.StaticMetamodel;

@Generated(value="EclipseLink-2.2.0.v20110202-r8913", date="2012-08-08T23:41:31")
@StaticMetamodel(Product.class)
public class Product_ { 

    public static volatile SingularAttribute<Product, String> productBrand;
    public static volatile SingularAttribute<Product, Category> category;
    public static volatile SingularAttribute<Product, String> model;
    public static volatile SingularAttribute<Product, byte[]> image;
    public static volatile SingularAttribute<Product, String> productName;
    public static volatile SingularAttribute<Product, String> imageURL;
    public static volatile SingularAttribute<Product, String> specifications;
    public static volatile SingularAttribute<Product, Integer> productId;
    public static volatile SingularAttribute<Product, String> partNumber;

} 
```

当我这样做时，我也会显示实体文件： /* * 要更改此模板，请选择工具 | 模板 * 并在编辑器中打开模板。*/ 包 enkia.pulse.core;

```
import java.io.Serializable;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.NamedQueries;
import javax.persistence.NamedQuery;
import javax.persistence.Table;

/**
 *
 * @author fbarrow
 */
@Entity
@Table(name = "twitter")
@NamedQueries({
    @NamedQuery(name = "Twitter.findAll", query = "SELECT t FROM Twitter t"),
    @NamedQuery(name = "Twitter.findById", query = "SELECT t FROM Twitter t WHERE t.id = :id"),
    @NamedQuery(name = "Twitter.findByCategoryId", query = "SELECT t FROM Twitter t WHERE t.categoryId = :categoryId"),
    @NamedQuery(name = "Twitter.findByTags", query = "SELECT t FROM Twitter t WHERE t.tags = :tags"),
    @NamedQuery(name = "Twitter.findByLastStatus", query = "SELECT t FROM Twitter t WHERE t.lastStatus = :lastStatus")})
public class Twitter implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "id")
    private Integer id;
    @Column(name = "categoryId")
    private Integer categoryId;
    @Column(name = "tags")
    private String tags;
    @Column(name = "lastStatus")
    private Long lastStatus;

    public Twitter() {
    }

    public Twitter(Integer id) {
        this.id = id;
    }

    public Twitter(Integer id, Integer categoryId, String tags, Long lastStatus) {
        this.id = id;
        this.categoryId = categoryId;
        this.tags = tags;
        this.lastStatus = lastStatus;
    }

    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public Integer getCategoryId() {
        return categoryId; 
    }

    public void setCategoryId(Integer categoryId) {
        this.categoryId = categoryId; 
    }

    public String getTags() {
        return tags;
    }

    public void setTags(String tags) {
        this.tags = tags;
    }

    public Long getLastStatus() {
        return lastStatus;
    }

    public void setLastStatus(Long lastStatus) {
        this.lastStatus = lastStatus;
    }

    @Override
    public int hashCode() {
        Integer hash = 0;
        hash += (id != null ? id.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof Twitter)) {
            return false;
        }
        Twitter other = (Twitter) object;
        if ((this.id == null && other.id != null) || (this.id != null && !this.id.equals(other.id))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "enkia.pulse.core.Twitter[ id=" + id + " ]";
    }

} 
```

错误：

```
SEVERE: javax.persistence.TransactionRequiredException
    at com.sun.enterprise.container.common.impl.EntityManagerWrapper.doTxRequiredCheck(EntityManagerWrapper.java:163)
    at com.sun.enterprise.container.common.impl.EntityManagerWrapper.doTransactionScopedTxCheck(EntityManagerWrapper.java:145)
    at com.sun.enterprise.container.common.impl.EntityManagerWrapper.persist(EntityManagerWrapper.java:263)
    at enkia.pulse.indexing.beans.TwitterBean.insertStatus(TwitterBean.java:154)
    at enkia.pulse.indexing.beans.TwitterBean$1.onStatus(TwitterBean.java:99)
    at twitter4j.StatusStreamImpl.onStatus(StatusStreamImpl.java:78)
    at twitter4j.AbstractStreamImplementation$1.run(AbstractStreamImplementation.java:107)
    at twitter4j.internal.async.ExecuteThread.run(DispatcherImpl.java:114) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T06:19:04.997

### 使用Timer创建TwitterStream，运行独立线程？

计时器调用`setupStream`，它创建一个侦听器，并将该侦听器绑定到`twitterStream`通过`TwitterStreamFactory`. 该代码未显示，但从上下文看来 TwitterStream 正在异步运行代码：

> twitter4j.internal.async.ExecuteThread

位于您的堆栈跟踪中，位于异常下方。我敢打赌，您正在管理自己的线程，这些线程不在容器的上下文中运行 - 在此模型中访问容器资源和与容器交互的所有赌注都已关闭（这就是为什么 Java EE 强烈建议您不要运行您自己的线程模型）。

具体来说，该代码不在容器管理的事务中运行。

您可能会探索让 Timer Service 通过 MDB 启动后台任务，该 MDB 将在适当的容器中从您的 EJB 异步运行。

# java - 在 Java 中返回之前等待

> ID：11876894
> 
> 赞同：0
> 
> 时间：2012-08-09T04:36:59.697
> 
> 标签：java, wait

现在，我有一段代码联系另一台服务器，询问项目是否在列表中，并根据返回值返回一个布尔值。

代码如下：

```
public boolean checkIfOnline(int accountId) {
    //First loop is incase if someone is already checking. Second is for the checking that this account is doing.
    while (isCheckingIfOnline) {
        try {
            Thread.sleep(1);
        } catch (InterruptedException ex) {
        }
    }
    isCheckingIfOnline = true;
    sendCheckIfOnline(accountId);
    while (isCheckingIfOnline) {
        try {
            Thread.sleep(1);
        } catch (InterruptedException ex) {
        }
    }
    return onlineResponse;
} 
```

onlineResponse 和 isCheckingIfOnline 在处理其他服务器返回内容的方法中进行了更改，这是我组合在一起让系统等待其他服务器响应的方法。显然，这是非常有缺陷的，因为当这个方法经常被调用时，它会减慢系统速度，因为它一次只允许一个查询，而它应该允许同时执行多个查询。

我可以使用什么其他方法来完成上述代码的功能，但允许一次运行多个查询？

编辑：为了更清楚地说明，checkIfOnline 需要一个帐户 ID，并询问另一个服务器该帐户 ID 是否在列表中，如果该帐户 ID 是否在列表中，则该其他服务器会响应当前服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T05:20:27.637

听起来您想在 Java 6+ 中使用[ExecutorService 。](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)

ExecutorService 要求您向它提交一个实现 Callable 的类。当您向 ES 提交 Callable 时，您会收到一个[Future](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Future.html)，您可以使用它来做很多事情，包括取消流程或从已完成的流程中获取结果。

我有点难以准确理解你试图用你的代码实现什么，以及你为什么要线程化那个特定的部分。话虽这么说，如果你想在那里实现并发，你必须：

1.  向执行在线检查和查询的 ES 提交 Callable；
2.  为 Callable 提供一种方法来通知您的应用程序它已完成执行。

仅仅提交任务并对其调用 Future.get() 是不够的，因为任何进行该调用的线程都将被挂起，直到任务完成。

您需要允许 Callable 调用回调，或者线程执行任务提交的类并允许它坐下来等待 future.get() 方法返回结果。

祝你好运 ：）

# mysql - 获取本周的计数值

> ID：11876897
> 
> 赞同：-1
> 
> 时间：2012-08-09T04:37:13.087
> 
> 标签：mysql, count

我必须使用下面的查询来获取今天的计数值。

```
select *
from orders 
where status='P' 
AND DATE_FORMAT(FROM_UNIXTIME(date),'%Y-%m-%d')=CURDATE(); 
```

它已成功显示计数值。但是获取本月的计数值意味着必须使用以下查询。

```
select * from xcart_orders where status='C' AND DATE_FORMAT(FROM_UNIXTIME(date),'%m')=DATE_FORMAT(CURDATE(),'%m'); 
```

它成功显示正确的计数值。

如何获取本周的计数值..请帮助我。如何编写本周的查询

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T11:49:35.857

The following works for me, try it and let me know

```
SELECT * FROM TABLE_NAME WHERE date_format(FROM_UNIXTIME(date_field), '%u')=date_format(now(), '%u') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T04:54:41.043

您需要删除：

```
DATE_FORMAT(FROM_UNIXTIME(date),'%Y-%m-%d')= (MONTH(date) 
```

您的查询应该是：

```
select * 
from orders 
where status='P' AND 
(MONTH(FROM_UNIXTIME(date)) = MONTH(CURDATE()) AND 
(YEAR(date) = YEAR(CURDATE()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T04:54:49.893

只需稍微修改您的查询，这应该可以工作：

```
select * from orders 
where status='P'
AND MONTH(date) = MONTH(CURDATE()) 
AND YEAR(date) = YEAR(CURDATE()); 
```

您可以将其重写为：

```
select * from orders 
where status='P'
AND EXTRACT(YEAR_MONTH FROM date) = EXTRACT(YEAR_MONTH FROM NOW()) 
```

# javascript - Javascript不工作我把它放在jquery中的dom.ready中

> ID：11876898
> 
> 赞同：0
> 
> 时间：2012-08-09T04:37:45.300
> 
> 标签：javascript, jquery, dom

我的 JS 文件中有这段代码。如果我删除 if else 循环，那么我可以将 hello 作为警报，否则不会。

我在萤火虫控制台中也没有任何错误

基本上在那些循环中，我只是检查 url 是否包含几个关键字，以便可以将 css 更改为选中

```
$(document).ready(function(){ 
    var userPage = /child\/(.+)/.exec(location.href)[1];        
    if( userPage.indexOf('show') != -1 )
        {$('.profile').addClass('selected');}           
    if( userPage.indexOf('workbook') != -1 )
    {
        $('.selected').removeClass('selected');
        $('.workbook').addClass('selected');
    }
    if( userPage.indexOf('gallery') != -1 )
    {
        $('.selected').removeClass('selected');
        $('.gallery').addClass('selected');
    }
    if( userPage.indexOf('mylist') != -1 )
    {
        $('.selected').removeClass('selected');
        $('.mylist').addClass('selected');
    }

    if( userPage.indexOf('Photos') != -1 )
    {
        $('.selected').removeClass('selected');
        $('.photos').addClass('selected');
    }

    if( userPage.indexOf('profile/list') != -1 )
    {
        $('.selected').removeClass('selected');
        $('.list').addClass('selected');
    }                   
    alert("hillo"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T05:14:30.667

您设置警报的方式不在任何 if 语句中，因此无论如何它都应该发出警报。如果没有警报，您的脚本有错误，我发现至少有两个：

您假设 url 包含 string `child/`，如果它不包含您的脚本将停止并且无法工作，接下来您假设该输出`exec()`是一个具有至少两个值的数组，选择该数组的第二个值，如果由于某种原因，您的 url 不包含`child/`该数组中不会有第二个值，并且脚本会停止，但是它已经在`exec()`.

第二个错误是`document.ready`函数没有关闭，那可能只是一个错字。

另一方面，您应该想办法更动态地执行此操作。您正在使用与要检查的 url 字符串相同的类，因此在大多数情况下，您可以直接在选择器中使用它，将您的函数缩减为几行，例如：

```
$(document).ready(function() {
    var url = 'http://somesite.com/child/gallery'; //just a test url

    var userPage = url.indexOf('child/') != -1 ? /child\/(.+)/.exec(url)[1] : null;

    if (userPage) {
        console.log('has child in url');
        $('.selected').removeClass('selected');
        $('.'+userPage).addClass('selected');

    }else{
        console.log('not ok');
    }
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T05:47:59.150

它在代码的第一行返回 null。

var userPage = /child/(.+)/.exec(location.href)[1];

并且您必须收到此错误“：无法读取 null 的属性 'indexOf'”

最好先检查 url 是否有孩子然后继续。

# powershell - 如何在 PowerShell 中换行？

> ID：11876901
> 
> 赞同：91
> 
> 时间：2012-08-09T04:37:53.863
> 
> 标签：powershell, line-breaks

我是 [ *PowerShell 的新手，并且*] 在循环中连接一个字符串，如果发生特殊情况，我应该**插入一个换行符......我该怎么做？**

基本上寻找相当于`\n`.

```
$str = ""
foreach($line in $file){
  if($line -Match $review){ #Special condition
    $str += ANSWER #looking for ANSWER
  }
  #code.....
} 
```

到目前为止我已经尝试过

```
"\n" '\n' "\N" '\N' "\r" '\r' "\R" '\R' '`n' '`r' '-n' '-r' 
```

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2012-08-09T04:42:06.797

尝试`"`n"`使用双引号。（**不是**单引号`'`n'`）

有关转义字符的完整列表，请参见：

`Help about_Escape_character`

代码应该是

```
$str += "`n" 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-11-28T02:17:49.230

我想我找到了。您所要做的就是输入“`n”（带引号！）

谢谢！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-12-07T16:42:58.787

以防万一其他人遇到此问题，以澄清答案 `n 是重音 n，而不是单勾 n

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-12-31T13:16:48.527

如果你只使用下面这样的代码，你必须在 line 的末尾加上一个**重音**```。

```
docker run -d --name rabbitmq `
           -p 5672:5672 `
           -p 15672:15672 `
           --重启=总是`
           --主机名rabbitmq-master`
           -vc:\docker\rabbitmq\data:/var/lib/rabbitmq `
           rabbitmq:最新的

```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-07-12T00:15:04.007

您也可以只使用：

```
Write-Host ""; 
```

或者，就您的具体问题而言：

```
$str = ""
foreach($line in $file){
  if($line -Match $review){ #Special condition
    $str += Write-Host ""
    $str += ANSWER #looking for ANSWER
  }
  #code.....
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-15T01:09:49.537

如果转义不起作用，您可以尝试以下操作：

`$str += $("" | Out-String)`

它只是没有添加任何内容，而是添加了一个`Out-String`，它创建了一个新行。

# email - 如何在 symfony 1.4 的密码恢复邮件中包含用户的用户名和密码？

> ID：11876903
> 
> 赞同：-3
> 
> 时间：2012-08-09T04:38:18.967
> 
> 标签：email, login, symfony1, passwords, recovery

我想在我的用户登录模块中添加“忘记密码”功能，因为我已经创建了密码恢复操作，当用户输入电子邮件系统时，将检查邮件是否存在，如果存在，它将向用户发送邮件. 我想知道的是如何在该邮件中包含用户当前密码和用户名。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T04:58:10.933

你永远不会这样做，*永远*，**永远**，你发送一个密码恢复哈希，并添加一个带有时间的令牌到你的数据库，然后通过电子邮件将哈希发送给丢失密码的用户。不要明文存储密码，这会违反客户端密码安全性，并且如果您的数据库遭到破坏，它将向您的整个用户群释放用户名和密码组合。

将密码存储为：

```
 DB.userTable.setTupple(username,sha1(username+"optionaldelimiter"+password)); 
```

检索密码为：

```
resetPasswd(username : string, hash : string, newPasswd: string)
{
tup = DB.recoveryTable.fetchTupple(username,hash);
  if( tup != null && tup.expiresAt <= Date.now())
  {
  DB.setPasswd(username,newPasswd);
  }
} 
```

# php - 什么可以替代加载剥离javascript并将其放入数组以供以后使用的方法

> ID：11876904
> 
> 赞同：2
> 
> 时间：2012-08-09T04:38:25.947
> 
> 标签：php, javascript, regex, dom

我正在使用以下代码从 html dom 字符串中删除 javascript 并将它们放入数组中以备后用。

有什么可以替代的好用的。

我的问题：我在文件中遇到了 unicode 的问题。解析带有 unicode 的文件时，会产生以下错误：

> 警告：DOMDocument::saveHTML() [domdocument.savehtml]：由于转换错误，输出转换失败，字节 0x97 0xC3 0xA0 0xC2 in

我的代码：

```
function loadJSCodeToLast( $strDOM ){
    //Find all the <script></script> code and add to $objApp
    global $objApp;
    $objDOM = new DOMDocument();
    //$x = new DOMImplementation();
    //$doc = $x->createDocument(NULL,"rootElementName");

    //$strDOM = '<kool>'.$strDOM.'</kool>';
    $objDOM->preserveWhiteSpace = false;
    //$objDOM->formatOutput = true; 
    @$objDOM->loadHtml( $strDOM );
    $xpath = new DOMXPath($objDOM);

    $objScripts = $xpath->query('//script');
    $totCount = $objScripts->length;
    if ($totCount > 0) {
         //document contains script tags
        foreach($objScripts as $entries){
            $strSrc = $entries->getAttribute('src');
            if( $strSrc !== ''){
                $objApp->AddJSFile( $strSrc );
            }else{
                $objApp->AddJSScript( $entries->nodeValue );                    
            }
            $entries->parentNode->removeChild( $entries );
        }
    }
    //return $objDOM->saveHTML();
    //echo $GLOBALS['strTemplateDirAbs'];
    return preg_replace('/^<!DOCTYPE.+?>/', '', str_replace( array('<html>', '</html>', '<body>', '</body>'), array('', '', '', ''), $objDOM->saveHTML()));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T05:46:38.980

`utf8_encode()`在加载之前尝试转换你的字符串。

```
$txt = utf8_encode($txt);

var_dump(loadJSCodeToLast($txt)); 
```

> XML 解析器将 XML 文档的文本转换为 UTF-8，即使您已经设置了 XML 的字符编码，例如作为 DOMDocument 构造函数的第二个参数。使用 load() 命令解析 XML 后，其所有文本都已转换为 UTF-8。
> 
> 如果您将带有特殊字符（例如元音变音）的文本节点附加到您的 XML 文档，那么您应该在将文本附加到文档之前使用 utf8_encode() 将您的文本转换为 UTF-8。否则，您将在 save() 处收到类似“由于转换错误导致输出转换失败”的错误消息

来自[DOMDocument::save 文档评论](http://www.php.net/manual/en/domdocument.save.php#67952)。

# iphone - UITableview 问题中的水平滚动视图

> ID：11876913
> 
> 赞同：-2
> 
> 时间：2012-08-09T04:40:34.570
> 
> 标签：iphone, objective-c, ios, xcode, uitableview

我在 UITableViewCell 中创建了 UIScrollview。scrollView 有一些图片要水平显示。它在一行中运行良好，但我正在加载多个行单元格，当一个单元格被其他单元格替换时会出现问题。

我正在使用`[tableView dequeueReusableCellWithIdentifier:section]`.

我还为每一行提供了单独的标识符。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath     *)indexPath 
{
    NSString *section = [NSString stringWithFormat:@"section%@cell", indexPath.section];
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:section]; 
    if (cell == nil) 
    { 
        cell = [[UITableViewCell alloc] initWithStyle: UITableViewCellStyleDefault reuseIdentifier:section]; 
        NSArray *pageImages = imgs; 
    }    
    else
    {
        NSLog(@"recall");
    } 
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T13:52:27.063

您不想给每个单元格一个不同的重用标识符。改变

```
NSString *section = [NSString stringWithFormat:@"section%@cell", indexPath.section]; 
```

至

```
NSString *section = @"Arbitrary"; 
```

# iphone - iPhone：当铃声/静音开关从关闭模式打开时不想退出游戏

> ID：11876917
> 
> 赞同：0
> 
> 时间：2012-08-09T04:41:33.447
> 
> 标签：iphone, objective-c, cocoa-touch, ios5, avaudioplayer

我正在开发应用程序，其中音频文件起着非常重要的作用。

为了播放音频文件，我在我的应用程序中使用**AVaudioPlayer**。

但一个问题是假设设备处于静音模式并且用户开始运行应用程序

并假设他/她在应用程序中间打开静音/响铃开关。

现在他/她必须退出游戏，但我想要这样的功能

他/她不应该退出应用程序并且在应用程序用户中间应该是

当他从设备打开响铃/静音开关时能够听到声音。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T05:08:17.173

iOS 应用程序能够在后台播放音乐，无论它们是否是游戏，因为 iOS 中引入了多任务处理。

请参阅以下教程。

[http://mobile.tutsplus.com/tutorials/iphone/ios-sdk_background-audio/](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk_background-audio/)

我严重质疑游戏这样做是否合法。但那是你的电话。

# eclipse - 如何在 Eclipse 4.2 中更改工具栏按钮的顺序？

> ID：11876920
> 
> 赞同：12
> 
> 时间：2012-08-09T04:42:05.667
> 
> 标签：eclipse, eclipse-juno

在旧版本中，我们只需要拖放即可更改位置工具栏的按钮。但是对于朱诺，我们如何做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T04:44:02.717

我不相信您可以在 Eclipse 4.2 中重新订购它们。

但是，您可以选择隐藏它们： - 窗口 -> 自定义透视图 -> 工具栏可见性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-03T19:15:41.017

这是[错误 364046](https://bugs.eclipse.org/bugs/show_bug.cgi?id=364046)，据说已修复但尚未发布。

同时，您可以使用 Live Application Model View 重新排列透视按钮。我不确定你需要安装什么来获得这个视图——也许是 Eclipse e4 工具？我没有在“显示视图”对话框中看到该视图，但它使用 Ctrl-3 显示。

获得实时应用程序模型视图后，您需要找到 Perspectives Stack，我在 Windows->Trimmed Window->Controls->PartSashContainer->Perspectives Stack 下找到了它。然后，您可以通过在树视图中拖放或通过编辑器中的向上/向下按钮重新排序。我必须重新启动 Eclipse 才能看到更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-07T03:21:32.437

在修复错误之前，我发现可以：

1.  找出您感兴趣的透视项目的顺序
2.  关闭所有视角（或至少所有顺序错误的视角
3.  按首选顺序重新打开。

如果切换最后一个，只需关闭第二个到最后一个，然后重新打开它，它将是最后一个。

如果要将第一个移动到最后一个位置，请将其关闭，然后重新打开。

如果你想将最后一个移到第一个位置，那么......你必须关闭所有其他的，然后按照你想要的顺序重新打开它们。

与拉入“实时应用程序模型视图”相比，这可能涉及更少的工作。至少，在提出这个问题后，它对我有用，希望能找到问题的真正答案。

# asp.net - 在 ASP.NET MVC3 中，会编译 cshtml 文件吗？喜欢 JSP 文件吗？

> ID：11876925
> 
> 赞同：2
> 
> 时间：2012-08-09T04:42:14.360
> 
> 标签：asp.net, asp.net-mvc-3, razor

在 Java EE 中，Servlet 容器会将 JSP 文件转换为 Servlet 类并对其进行编译。

那么，ASP.NET 服务器如何处理 .cshtml 文件呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T05:08:20.623

*   是的，当应用程序运行时，对特定 cshtml 的每个请求都会编译它。
*   不，在构建应用程序时。这种行为是可以改变的。

# memory-leaks - IOS在图像内存泄漏上绘制图像

> ID：11876929
> 
> 赞同：1
> 
> 时间：2012-08-09T04:42:22.573
> 
> 标签：memory-leaks, uiimage, core-graphics, retina-display, drawimage

我正在尝试使用以下方法在 UIImageView 中绘制文本。问题是该方法是从迭代 32 次的循环内部调用的（在这种特定情况下）。我在第 14 次通话的“文本图像准备就绪”之后就死了。

不幸的是，当我使用仪器寻找泄漏时，应用程序在我得到任何东西之前就死了。我不太确定我应该发布什么，或者是否有更好的方法来做到这一点。

谢谢！

```
-(void) writeNameToImage:(int)soundIndex setNumber:(int)setNumber
{

    NSString* strTextToWrite;

    if(setNumber==1)
        strTextToWrite= ((MyObject*)[arrObjects1 objectAtIndex:soundIndex-1]).soundName;
    else 
        strTextToWrite= ((MyObject*)[arrObjects2 objectAtIndex:soundIndex-1]).soundName;

    NSLog(@"string to draw: %@",strTextToWrite);
    //Retrieve image from UIImageView
    UIImage* layerToUpdate= imgViewRecorded.image;

    //***** Drawing the text image.
    UIFont *font = [UIFont boldSystemFontOfSize:15.0];
    CGSize size  = [strTextToWrite sizeWithFont:font];

    UIGraphicsBeginImageContextWithOptions(size,NO,0.0);

    // draw in context, you can use also drawInRect:withFont:
    [[UIColor whiteColor] set];
    [strTextToWrite drawAtPoint:CGPointMake(0.0, 0.0) withFont:font];

    // transfer image
    UIImage* imgToAdd = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    NSLog(@"text image ready");
    //**** Finished drawing text image

    //**** Updating layer image with generated image
    UIGraphicsBeginImageContextWithOptions(layerToUpdate.size, FALSE, 0.0);
    NSLog(@"layer created in context");
    [layerToUpdate drawInRect:CGRectMake( 0, 0, layerToUpdate.size.width, layerToUpdate.size.height)];

    //translate to the center
    CGContextTranslateCTM( UIGraphicsGetCurrentContext(), 0.5f * layerToUpdate.size.width, 0.5f * layerToUpdate.size.height ) ;
    //rotate with the center of the image as the rotation point
    CGContextRotateCTM(UIGraphicsGetCurrentContext(), CC_DEGREES_TO_RADIANS( degrees ) );
    //translate back to original position
    CGContextTranslateCTM( UIGraphicsGetCurrentContext(), -0.5f *layerToUpdate.size.width, -0.5f *layerToUpdate.size.height ) ;

    if(setNumber==1)
        [imgToAdd drawInRect:CGRectMake( (303-(imgToAdd.size.width/2)), 80, imgToAdd.size.width, imgToAdd.size.height)];
    else
        [imgToAdd drawInRect:CGRectMake( (303-(imgToAdd.size.width/2)), 23, imgToAdd.size.width, imgToAdd.size.height)];

    NSLog(@"text drawn to layer");

    CGContextRotateCTM(UIGraphicsGetCurrentContext(), CC_DEGREES_TO_RADIANS( degrees ) );
    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    //[layerToUpdate release];
    NSLog(@"assigning new created image");
    imgViewRecorded.image = newImage;

} 
```

我注意到，如果我`[newImage release]`在方法的末尾添加它会完全运行但显然会导致 EXC_BAD_ACCESS。

***更新***

我已经尝试过其他解决方案，但在这种情况下，文本会逐渐模糊。这意味着我画的第一个文字是最模糊的，而最后一个看起来非常清晰。我认为这可能是由于视网膜鳞片，但我不知道如何解决这个问题。

```
-(void) writeSoundNameToImage:(int)soundIndex setNumber:(int)setNumber
{

    NSString* strTextToWrite;

    if(setNumber==1)
        strTextToWrite= ((MyObject*)[arrObjects1 objectAtIndex:soundIndex-1]).soundName;
    else 
        strTextToWrite= ((MyObject*)[arrObjects2 objectAtIndex:soundIndex-1]).soundName;

    NSLog(@"string to draw: %@",strTextToWrite);

    //***** Drawing the text image.
    UIFont *font = [UIFont boldSystemFontOfSize:15.0];
    CGSize size  = [strTextToWrite sizeWithFont:font];

    UIImage* layerToUpdate= imgViewRecorded.image;

    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    CGFloat scale = [[UIScreen mainScreen] scale];
    CGContextRef context = CGBitmapContextCreate( NULL,layerToUpdate.size.width,layerToUpdate.size.height, 8, 4  * layerToUpdate.size.width, colorSpace, kCGImageAlphaPremultipliedFirst);

    CGContextDrawImage(context, CGRectMake(0, 0, layerToUpdate.size.width, layerToUpdate.size.height), layerToUpdate.CGImage);

    //translate to the center
    CGContextTranslateCTM( context, 0.5f * layerToUpdate.size.width, 0.5f * layerToUpdate.size.height ) ;
    //rotate with the center of the image as the rotation point
    CGContextRotateCTM(context, -CC_DEGREES_TO_RADIANS( ((soundIndex-1)*self.myProfile.degreesPerSound)+self.myProfile.degreesPerSound/2 ) );
    //translate back to original position
    CGContextTranslateCTM( context, -0.5f*layerToUpdate.size.width, -0.5f*layerToUpdate.size.height ) ;

    char* text = (char *)[strTextToWrite cStringUsingEncoding:NSASCIIStringEncoding];
    CGContextSelectFont(context, "Helvetica", 15, kCGEncodingMacRoman);
    CGContextSetTextDrawingMode(context, kCGTextFillStroke);

    CGContextSetRGBFillColor(context, 255, 255, 255, 1);
    CGContextSetRGBStrokeColor(context, 255, 255, 255, 1);

    if(setNumber==1)
        CGContextShowTextAtPoint(context, (303-(size.width/2)), 600-90, text, strlen(text));
    else
        CGContextShowTextAtPoint(context, (303-(size.width/2)), 600-33, text, strlen(text));

    CGContextRotateCTM(context, -CC_DEGREES_TO_RADIANS( ((soundIndex-1)*self.myProfile.degreesPerSound)+self.myProfile.degreesPerSound/2 ) );

    //CGContextScaleCTM(context, layerToUpdate.size.width/scale, layerToUpdate.size.height/scale);

    CGImageRef imageMasked = CGBitmapContextCreateImage(context);

    UIImage* newImage=[UIImage imageWithCGImage:imageMasked scale:scale orientation:UIImageOrientationUp];

    imgViewRecorded.image =newImage;

    CGImageRelease(imageMasked);
    CGContextRelease(context);
    CGColorSpaceRelease(colorSpace); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T06:46:48.690

在我的特殊情况下，因为这是用于图像初始化，所以我最终做了以下事情。

```
UIImage* layerToUpdate= imgViewRecorded.image;

UIGraphicsBeginImageContextWithOptions(layerToUpdate.size, FALSE, 0.0);

NSLog(@"layer created in context");
[layerToUpdate drawInRect:CGRectMake( 0, 0, layerToUpdate.size.width, layerToUpdate.size.height)];
UIFont *font = [UIFont boldSystemFontOfSize:15.0];
[[UIColor whiteColor] set];

for (int i=0; i<self.myProfile.totalSounds; i++)
{ 
    //translate to the center
    CGContextTranslateCTM( UIGraphicsGetCurrentContext(), 0.5f * layerToUpdate.size.width, 0.5f * layerToUpdate.size.height ) ;
    //rotate with the center of the image as the rotation point
    CGContextRotateCTM(UIGraphicsGetCurrentContext(), degrees );
    //translate back to original position
    CGContextTranslateCTM( UIGraphicsGetCurrentContext(), -0.5f *layerToUpdate.size.width, -0.5f *layerToUpdate.size.height ) ;

    NSString* strTextToWrite;

    //do set one first
    strTextToWrite= ((MyObject*)[arrObjects1 objectAtIndex:soundIndex-1]).soundName;
    CGSize size  = [strTextToWrite sizeWithFont:font];

    [strTextToWrite drawAtPoint:CGPointMake((303-(size.width/2)), 80.0) withFont:font];

    //do set 2
    strTextToWrite= ((MyObject*)[arrObjects2 objectAtIndex:soundIndex-1]).soundName;
    size  = [strTextToWrite sizeWithFont:font];

    [strTextToWrite drawAtPoint:CGPointMake((303-(size.width/2)), 23.0) withFont:font];

    //translate to the center
    CGContextTranslateCTM( UIGraphicsGetCurrentContext(), 0.5f * layerToUpdate.size.width, 0.5f * layerToUpdate.size.height ) ;
    //rotate back
    CGContextRotateCTM(UIGraphicsGetCurrentContext(), -degrees );
    //translate back to original position
    CGContextTranslateCTM( UIGraphicsGetCurrentContext(), -0.5f *layerToUpdate.size.width, -0.5f *layerToUpdate.size.height ) ;
}

UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext();

imgViewRecorded.image =  newImage; 
```

两者之间的区别非常明显，我过去创建了多个上下文，但不知道它们的资源何时会被释放，从而导致内存泄漏和应用程序退出。在后一个中，我创建了一个独特的上下文并对其进行操作以绘制我需要绘制的所有文本。

希望这对某人有用。

# java - 用于 Office 365 的基于 LDAP 的解决方案

> ID：11876931
> 
> 赞同：-2
> 
> 时间：2012-08-09T04:42:35.110
> 
> 标签：java, authorization, office365

当前系统使用基于 LDAP 的解决方案来授权用户角色，该解决方案适用于 2003-2007 Microsoft Exchange 服务器，但由于 Office365 基于云，因此系统无法用于 Office365。

您能否建议我如何在 Office 365 中实现基于 LDAP 的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T04:46:26.583

您将无法在 office365 中实现任何东西，它是一个专有（封闭）系统，拥有自己的登录和管理系统。

# java - PageContext 线程是否共享

> ID：11876935
> 
> 赞同：1
> 
> 时间：2012-08-09T04:43:05.577
> 
> 标签：java, multithreading, jsp, servlets

在此[链接](http://cs.gmu.edu/~offutt/classes/432/examples/jsp/counterScope_jsp.java)中，我看到以下代码。

```
synchronized (_jspx_page_context) {
    pageCounter = (jspexamples.counterBean) _jspx_page_context.getAttribute("pageCounter", PageContext.PAGE_SCOPE);
    if (pageCounter == null){
      pageCounter = new jspexamples.counterBean();
      _jspx_page_context.setAttribute("pageCounter", pageCounter, PageContext.PAGE_SCOPE);
    }
} 
```

其中 _jspx_page_context 是 PageContext 类型。为什么 _jspx_page_context 上有同步？PageContext 是线程共享的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T04:46:11.873

它是**线程共享的**，意味着多个线程可以`pagecontext`随时访问。所以，为了保证**线程安全**，我们必须`synchronize`对pageContext进行操作。否则，多个线程可能会更新相同的值，结果会很奇怪。

# javascript - 使用 javascript 或 d3.js 在形状之间转换

> ID：11876936
> 
> 赞同：3
> 
> 时间：2012-08-09T04:43:06.670
> 
> 标签：javascript, canvas, svg, d3.js, adobe-illustrator

我正在尝试编写一个程序，该程序在使用 javascript 在 Adob​​e Illustrator 中创建的两个形状之间进行步进。我可以通过将形状导出为 SVG 然后使用 Raphael.js 来实现这一点：

[http://jsfiddle.net/ZLfkZ/4/](http://jsfiddle.net/ZLfkZ/4/)

然而，这两个形状之间的插值看起来很糟糕。我从[研究](http://cagd.cs.byu.edu/~tom/papers/arc.pdf) [这个主题](http://tom.cs.byu.edu/~tom/papers/sig.pdf)中了解到，最好使用使用 b 样条曲线的算法进行插值，并在适当的地方添加或减去顶点，我假设 Raphael 使用的 SVG 标准不这样做。我想知道是否可以使用 d3.js 完成此操作，因为我注意到它的 SVG 文档中有插值选项，并且“基础”似乎使用 b-spline。我的 jsfiddle 可以在 d3 中通过适当的插值完成吗？

或者，有没有更好的方法来解决这个问题？我可能使用 SVG 走错了路，因为无论如何，生成的路径都会在画布中呈现。我最初选择 SVG 是因为路径很容易存储为字符串。我注意到有一个[Illustrator to canvas 插件](http://visitmix.com/labs/ai2canvas/)可以导出画布命令，是否可以插入这些命令？我应该以某种方式从 illustrator 捕获形状作为点数组吗？任何见解将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T05:23:19.833

我不知道在 JavaScript 中有一个很好的现成解决方案。在您链接的论文中实现算法看起来相当耗时（虽然很有趣！）。根据您尝试插值的特定形状，您可以使用更简单的解决方案。

通常，您需要重新采样源或目标形状（或两者），以便它们具有相同数量的控制点。重新采样形状后，您可以使用标准线性插值，例如[d3.interpolate](https://github.com/mbostock/d3/wiki/Transitions#wiki-d3_interpolate)。

重新采样的一种方法是测量源形状中每个控制点沿其圆周的距离，然后以等效（缩放）距离重新采样目标形状。以下是在加利福尼亚和圆之间插值的这种技术的演示：

*   [http://bl.ocks.org/3081153](http://bl.ocks.org/3081153)

线性插值有自相交的趋势，但对于大多数凸形，它工作得相当好并且速度很快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-16T13:01:51.617

使用超公式插件有一个新的解决方案：http: [//bl.ocks.org/mbostock/1020902](http://bl.ocks.org/mbostock/1020902)

# h.264 - 使用 AVAssetWriter 从原始 H.264 / AAC 文件创建 QuickTime 电影

> ID：11876943
> 
> 赞同：7
> 
> 时间：2012-08-09T04:44:41.350
> 
> 标签：h.264, aac, avassetwriter

使用 Mac OSX Objective-C，我正在尝试创建一个命令行工具，该工具将单个 H.264 和单个 AAC 文件作为输入 - 从相同的源材料编码 - 并使用 AVAssetWriter 创建单个 QuickTime 兼容mov (和/或 m4v) 文件以供进一步编辑/分发。

到目前为止我所做的： 1) 使用 AVFoundation 框架组件，即 AVAssetWriter、AVAssetWriterInput 等和核心媒体框架组件，即 CMSampleBufferCreate、CMBlockBufferReplaceDataBytes 等 - 我已经对 CL 工具进行了原型设计。2) 我已经连接了输入/输出文件的 URL，创建了 AVAssetWriter 和 AVAssetWriterInput、CMBlockBuffer 等。 3) 当我执行我的 runLoop 时，AVAssetWriter 创建了 m4v 文件，但是，虽然它格式正确，但它是只有一个 136 字节的文件，表示没有视频轨道数据的电影头原子。4) 我搜索了 StackOverflow - 以及 Apple 论坛和互联网 - 以找到我的特定问题的答案。

使用我的代码中的错误检查以及 Xcode 调试器，我发现 AVAssetWriter 设置正确 - 它开始构建电影文件 - 但 CMBlockBufferReplaceDataBytes 不会将 H.264 NAL 数据写入 CMBlockBuffer（我相信我应该做）。那么我错过了什么？

这是我的 runLoop 代码的相关部分：

```
// Create the videoFile.m4v AVAssetWriter.
AVAssetWriter *videoFileWriter = [[AVAssetWriter alloc] initWithURL:destinationURL fileType:AVFileTypeQuickTimeMovie error:&error];
NSParameterAssert(videoFileWriter);
if (error) {
    NSLog(@"AVAssetWriter initWithURL failed with error= %@", [error localizedDescription]);
}

// Create the video file settings dictionary.
NSDictionary *videoSettings = [NSDictionary dictionaryWithObjectsAndKeys: AVVideoCodecH264, AVVideoCodecKey, [NSNumber numberWithInt:1280],
                               AVVideoWidthKey, [NSNumber numberWithInt:720], AVVideoHeightKey, nil];

// Perform video settings check.
if ([videoFileWriter canApplyOutputSettings:videoSettings forMediaType:AVMediaTypeVideo]) {
    NSLog(@"videoFileWriter can apply videoSettings...");    
}

// Create the input to the videoFileWriter AVAssetWriter.
AVAssetWriterInput *videoFileWriterInput = [[AVAssetWriterInput alloc] initWithMediaType:AVMediaTypeVideo outputSettings:videoSettings];
videoFileWriterInput.expectsMediaDataInRealTime = YES;
NSParameterAssert(videoFileWriterInput);
NSParameterAssert([videoFileWriter canAddInput:videoFileWriterInput]);

// Connect the videoFileWriterInput to the videoFileWriter.
if ([videoFileWriter canAddInput:videoFileWriterInput]) {
   [videoFileWriter addInput:videoFileWriterInput]; 
}

// Get the contents of videoFile.264 (using current Mac OSX methods).
NSData *sourceData = [NSData dataWithContentsOfURL:sourceURL];
const char *videoFileData = [sourceData bytes];
size_t sourceDataLength = [sourceData length];
NSLog(@"The value of 'sourceDataLength' is: %ld", sourceDataLength);

// Set up to create the videoSampleBuffer.
int32_t videoWidth = 1280;
int32_t videoHeight = 720;
CMBlockBufferRef videoBlockBuffer = NULL;
CMFormatDescriptionRef videoFormat = NULL;
CMSampleBufferRef videoSampleBuffer = NULL;
CMItemCount numberOfSampleTimeEntries = 1;
CMItemCount numberOfSamples = 1;

// More set up to create the videoSampleBuffer.
CMVideoFormatDescriptionCreate(kCFAllocatorDefault, kCMVideoCodecType_H264, videoWidth, videoHeight, NULL, &videoFormat);
result = CMBlockBufferCreateWithMemoryBlock(kCFAllocatorDefault, NULL, 150000, kCFAllocatorDefault, NULL, 0, 150000, kCMBlockBufferAssureMemoryNowFlag,
                                            &videoBlockBuffer);
NSLog(@"After 'CMBlockBufferCreateWithMemoryBlock', 'result' is: %d", result);

// The CMBlockBufferReplaceDataBytes method is supposed to write videoFile.264 data bytes into the videoSampleBuffer.
result = CMBlockBufferReplaceDataBytes(videoFileData, videoBlockBuffer, 0, 150000);
NSLog(@"After 'CMBlockBufferReplaceDataBytes', 'result' is: %d", result);

CMSampleTimingInfo videoSampleTimingInformation = {CMTimeMake(1, 30)};
result = CMSampleBufferCreate(kCFAllocatorDefault, videoBlockBuffer, TRUE, NULL, NULL, videoFormat, numberOfSamples, numberOfSampleTimeEntries,
                              &videoSampleTimingInformation, 0, NULL, &videoSampleBuffer);
NSLog(@"After 'CMSampleBufferCreate', 'result' is: %d", result);

// Set the videoSampleBuffer to ready (is this needed?).
result = CMSampleBufferMakeDataReady(videoSampleBuffer);
NSLog(@"After 'CMSampleBufferMakeDataReady', 'result' is: %d", result);

// Start writing...
if ([videoFileWriter startWriting]) {
    [videoFileWriter startSessionAtSourceTime:kCMTimeZero];
}

// Start the first while loop (DEBUG)... 
```

欢迎所有想法、意见和建议。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:40:41.700

问题在于 CMSampleBufferCreate 您传入零 numSampleSizeEntries 和 NULL sampleSizeArray。如果你什么都不传入，那么什么都不会被写入！

# javascript - 可调整大小的选项卡区域

> ID：11876951
> 
> 赞同：0
> 
> 时间：2012-08-09T04:45:29.257
> 
> 标签：javascript, jquery, jquery-ui

我想在页面的选项卡上设置一个可调整大小的选择器，所以我使用了 Jquery UI 可调整大小的组件。但是我在找出所选标签的数量等方面遇到了问题。

注意：可以从两端调整 div 的大小。

这是我的小提琴：http: [//jsfiddle.net/svXTa/10/](http://jsfiddle.net/svXTa/10/)

**是否有任何 jquery 插件可以为我提供这种功能？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T04:49:30.093

```
var enw = parseInt(Math.abs(newWidth / gridSize)); 
```

编辑：

我带着新的更新回来了。请检查这个[jsfiddle](http://jsfiddle.net/svXTa/14/)

```
var tabs = [];

$(document).ready(function(){

    $('.dateTab ul li').each(function(){
        var tabNo = parseInt($(this).html(),10);
        tabs.push({'no':tabNo, 'right':tabNo * ($(this).width() + 2)});
    });

    $('#dDragHandler').resizable({
        handles: 'e,w' ,
        grid: [32,32],
        distance: 28,
        maxWidth: 940,
        minWidth: 0,    
        resize: function(event, ui) {
                   },
        stop : function(event, ui) {

        var pos = $('.dateDragHandler').offset();
        var width  = $('.dateDragHandler').width()+1;
        var right = pos.right + width;

            var html = "Number of tabs selected: " + parseInt(width / 32, 10);

        for(var i = 0; i < tabs.length; i++) {
            if(tabs[i].right == pos.left) {
                html += "<br />First tab selected is: " + tabs[i + 1].no;
            }
            if(tabs[i].right == right) {
                html += "<br />Latest tab selected is: " + tabs[i].no;
            }
        }
        $('.dateInfoTab').html(html);

    }
    });
}); 
```

# mongodb - mongoDB PHP查询在哪里不是

> ID：11876960
> 
> 赞同：0
> 
> 时间：2012-08-09T04:46:34.243
> 
> 标签：mongodb, find

好的，我需要一种快速的方法来使用 mongoDB 执行以下操作

我正在寻找一个查询来搜索集合中的水果或蔬菜列中没有 Apple 一词的任何东西

这里等

```
{
 "fruit":"apple"
},{
 "fruit":"orange"
},{
 "fruit":"banana"
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T06:32:01.457

您可能要使用的运算符是[$nin](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24nin)（“不在”）：

```
db.market.find({
    'fruit': {$nin:['apple']},
    'veg':   {$nin:['apple']}
}) 
```

您也可以使用[$not](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-Metaoperator%3A%7B%7B%24not%7D%7D)来否定标准 where 条件。

# objective-c - 获取 NSImage 的正确图像宽度和高度

> ID：11876963
> 
> 赞同：22
> 
> 时间：2012-08-09T04:46:42.013
> 
> 标签：objective-c, macos, cocoa, nsimage

我使用下面的代码来获取 NSImage 的宽度和高度：

```
NSImage *image = [[[NSImage alloc] initWithContentsOfFile:[NSString stringWithFormat:s]] autorelease];
imageWidth=[image size].width;
imageHeight=[image size].height;
NSLog(@"%f:%f",imageWidth,imageHeight); 
```

但有时`imageWidth`，`imageHeight`不返回正确的值。例如，当我阅读图像时，EXIF 信息显示：

```
PixelXDimension = 2272;
PixelYDimension = 1704; 
```

但是 imageWidth, imageHeight 输出

```
521:390 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-05T07:59:39.183

以像素为单位的图像尺寸存储在图像的 NSImageRep 中。如果您的文件只包含一张图像，它将是这样的：

```
NSImageRep *rep = [[image representations] objectAtIndex:0];
NSSize imageSize = NSMakeSize(rep.pixelsWide, rep.pixelsHigh); 
```

其中**image**是您的 NSImage 并且**imageSize**是您的图像大小（以像素为单位）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-09T05:00:46.597

NSImage size 方法返回取决于屏幕分辨率的大小信息。要获得实际文件图像中表示的大小，您需要使用 NSImageRep。

请参阅[nsimage-size-not-real-size-with-some-pictures](https://stackoverflow.com/questions/9264051/nsimage-size-not-real-size-with-some-pictures)链接并获得帮助

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-08-13T08:11:06.737

直接 API 也给出了正确的结果

```
CGImageRef cgImage = [oldImage CGImageForProposedRect:nil context:context hints:nil];
size_t width = CGImageGetWidth(cgImage);
size_t height = CGImageGetHeight(cgImage); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-09T05:01:01.337

Apple 使用基于 DPI 的点系统将点映射到物理设备像素。EXIF 说什么并不重要，重要的是您的画布必须有多少个逻辑屏幕点才能显示图像。

iOS 和 OSX 会为您执行此映射。您应该关心的唯一大小是从 UIImage.size 返回的大小

您不能（阅读不应该不必关心）自己映射到设备像素，这就是苹果这样做的原因。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-01-02T22:32:28.243

**斯威夫特 4**

您必须对 进行`NSBitmapImageRep`表示`NSImage`以获得正确的像素高度和宽度。首先一个这个扩展来收集一个`CGImage`：`NSImage`

```
extension NSImage {
    @objc var CGImage: CGImage? {
        get {
            guard let imageData = self.tiffRepresentation else { return nil }
            guard let sourceData = CGImageSourceCreateWithData(imageData as CFData, nil) else { return nil }
            return CGImageSourceCreateImageAtIndex(sourceData, 0, nil)
        }
    }
} 
```

然后当你想得到高度和宽度时：

```
let rep = NSBitmapImageRep(cgImage: (NSImage(named: "Your Image Name")?.CGImage)!)
let imageHeight = rep.size.height
let imageWidth = rep.size.width 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-07-11T05:49:06.110

我做了这样的扩展：

```
extension NSImage{
    var pixelSize: NSSize?{
        if let rep = self.representations.first{
            let size = NSSize(width: rep.pixelsWide, height: rep.pixelsHigh)
            return size
        }
        return nil
    }
} 
```

# php - mysql select 语句返回不总是在同一列中的数据。

> ID：11876967
> 
> 赞同：1
> 
> 时间：2012-08-09T04:47:42.937
> 
> 标签：php, mysql

我有一个包含比赛名称和结果的数据库。我正在尝试编写一个 sql 语句来确定所有特定名称的结果。问题是，根据比赛的地点，本地或公路，结果在不同的列中。例如

```
 ____________________________________________________________________
    | home Runner | Road runner| road Outcome | home Outcome |   ID     |
    --------------------------------------------------------------------
    |    Jerry    |    Brian   |     323      |     350      |    1     |
    --------------------------------------------------------------------
    |   Brian     |    Jerry   |     259      |     265      |    2     | 
```

正如你所看到的，如果我想为 Brian 拉结果，这变得很困难，因为他的结果可以在道路和主场之间切换。我想我可以存储一个包含所有与 brian 匹配的 id 的数组，然后以某种方式返回结果，具体取决于 brian 位于 (home, road) 的列 到目前为止，我已经完成了以下操作，但被困在底部

```
 $getRunner = "select id from $db where homeRunner = brian union select id from $db where roadRunner = Brian" order by id asc;
    $result=mysql_query($getRunner);
    $id=array(); // this is to hold all the Id's that match
    while($row = mysql_fetch_array($result)){
        $id[]=$row['id'];
    }
    foreach ($id as $element){
        $getOutcome = "select roadOutcome from $db where roadRunner = brian and id =$element"; 
        $result2 = mysql_query($getOutcome);
        while($row2 = mysql_fetch_array($result2)){
            echo $row2['roadOutcome'];
            echo '<br />';
        } 
```

这里有很多问题，我知道。如果可能的话，我想合并查询，更不用说让它工作了。我怎么能说“如果 homeRunner = brian 然后选择 homeOutcome，否则选择 roadOutcome where id = $element”？

最终，我试图在一个数组中返回答案，以便我可以绘制它。我正在用 PHP 写这个。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T04:56:18.990

```
SELECT 
  CASE 
    WHEN HomeRunner = 'Brian' THEN 'Home'
    ELSE 'Road'
  END OutcomeType,
  CASE 
    WHEN HomeRunner = 'Brian' THEN HomeOutcome
    ELSE RoadOutcome 
  END Outcome
FROM $db
WHERE HomeRunner = 'Brian' OR RoadRunner = 'Brian' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T04:56:50.977

您可以在单个查询中实现此目的：

```
 SELECT IF(homeRunner = 'Brian', homeOutcome, road_Outcum) AS outcum
 FROM table_name
 WHERE (homeRunner = 'Brian' OR roadRunner = 'Brian'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T05:05:37.023

试试这个：

```
$getOutcome = "SELECT CASE 'BRIAN' 
               WHEN homeRunner THEN homeOutcome
               WHEN roadRunner THEN roadOutcome
               END FROM $db WHERE id =$element";
$result2 = mysql_query($getOutcome);
$outcome = mysql_fetch_row($getOutcome);
echo $outcome[0]; // Final Output! 
```

# java - 在画布上显示两点 A 和 B

> ID：11876972
> 
> 赞同：1
> 
> 时间：2012-08-09T04:48:30.210
> 
> 标签：java, android, android-canvas, trigonometry

我需要在我使用 Android 中的 Canvas 创建的雷达圆圈图像上显示以下两点（A 和 B）。这两个点具有纬度和经度值。假设 A 点有这些值——

```
Latitude: 37.33774833333334
Longitude: -121.88670166666667 
```

B点有这些价值观——

```
Latitude: 37.336453
Longitude: -121.884985 
```

我需要通过从圆的中心点进行某种计算来在画布上显示上述两个点，如下图所示。下面是在 Android 中创建雷达圈的代码，如下所示 -

```
public class CircleCanvas extends View{

    Context context;
    int[] imageNames=new int[6];

    public CircleCanvas(Context mContext,int mUser,int mfirstDis,int msecondDis,int mthirdDis,int mfourDis,int bgMap) {
        super(mContext);
        context = mContext;
        imageNames[0]=mUser;
        imageNames[1]=mfirstDis;
        imageNames[2]=msecondDis;
        imageNames[3]=mthirdDis;
        imageNames[4]=mfourDis;
        imageNames[5]=bgMap;
    }
    protected void onDraw(Canvas canvas) { 
        super.onDraw(canvas); 
        Paint p = new Paint(); 
        p.setColor(Color.BLACK); //BLACK 
        p.setStyle(Style.STROKE);
        //canvas.drawColor(Color.BLACK); //WHITE

        WindowManager mWinMgr = (WindowManager)context.getSystemService(Context.WINDOW_SERVICE);
        @SuppressWarnings("deprecation")
        int displayWidth = mWinMgr.getDefaultDisplay().getWidth();
        @SuppressWarnings("deprecation")
        int displayHeight = mWinMgr.getDefaultDisplay().getHeight();

        canvas.drawBitmap(BitmapFactory.decodeResource(getResources(),imageNames[5]), 0, 0, null);

        int totalCircle=4;
        int radius=40;
        int centerimagesize=13;

        for (int i = 1; i <= totalCircle; i ++) { 
            canvas.drawCircle(displayWidth/2,displayHeight/4, i*radius, p); 
            canvas.drawBitmap(BitmapFactory.decodeResource(getResources(),imageNames[i]), ((displayWidth/2)+(i*radius)),(displayHeight/4), null);
        } 

        canvas.drawLine((displayWidth/2-(totalCircle*radius)), (displayHeight/4), (displayWidth/2+(totalCircle*radius)), (displayHeight/4), p);
        canvas.drawLine((displayWidth/2), (displayHeight/4-(totalCircle*radius)), (displayWidth/2), (displayHeight/totalCircle+(4*radius)), p);
        canvas.drawBitmap(BitmapFactory.decodeResource(getResources(),imageNames[0]), ((displayWidth/2)-(centerimagesize/2)),((displayHeight/4)-(centerimagesize/2)), null);

        invalidate(); 
    } 

} 
```

这是上面代码中画布的图像- ![在此处输入图像描述](../Images/bcfb3d0d8756dcb46d57c0b95587bf3d.png)

我正在通过该`onCreate`方法传递我当前在 Canvas 上显示的所有图像

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    FrameLayout main = (FrameLayout) findViewById(R.id.main_view);
    CircleCanvas circleCanvas=new CircleCanvas(this,R.drawable.current_user,R.drawable.tenm,R.drawable.twentym,R.drawable.thirtym,R.drawable.fourtym,R.drawable.bg_map);
    main.addView(circleCanvas);

   locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
   locationManager.requestLocationUpdates(
            LocationManager.GPS_PROVIDER,
            MINIMUM_TIME_BETWEEN_UPDATES,
            MINIMUM_DISTANCE_CHANGE_FOR_UPDATES,
            new MyLocationListener()
    ); 
} 
```

而且我不确定，如何通过从我使用 Canvas 创建的圆的中心点进行计算来在该雷达圆图像上显示两个点（A 和 B）。是否需要进行一些角度计算？`A and B`我在 Android 项目的可绘制文件夹中有两个点的单独图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T05:08:17.737

`OverlayItem`最简单的方法是`GeoPoint`在`MapView`. [https://developers.google.com/maps/documentation/android/hello-mapview](https://developers.google.com/maps/documentation/android/hello-mapview)。你最好把雷达也做成一个`OverlayItem`。

# css - 浏览器之间动画计时功能的差异？我只想要线性

> ID：11876973
> 
> 赞同：1
> 
> 时间：2012-08-09T04:48:30.117
> 
> 标签：css, css-animations

我正在尝试设置一个可以在 Chrome、Firefox、Safari 和 Opera 中运行的 CSS 动画，以在保持整体宽度以适应页面的同时来回设置一些彩色条的宽度。

[我在http://codepen.io/marblegravy/pen/rxhym](http://codepen.io/marblegravy/pen/rxhym)设置了一个演示

如果你在 Chrome 中打开它，它会完全按照我想要的方式工作，它会粘在页面的边缘（无论宽度如何，它都会在响应式布局中工作）。

然而，在 Firefox、Safari 和 Opera 中，似乎`animation-timing-function: linear;`or 中的线性声明`animation: bulge4 7s infinite alternate-reverse linear;`没有生效，整个事情来回缩放。

我正在使用[无前缀](http://leaverou.github.com/prefixfree/)来简化 Codepen 上的编码，但我认为这不是问题所在。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T05:26:52.037

您正在通过 CSS Tricks/Hacks 为宽度槽设置动画。由于 CSS 在不同浏览器中的解释不同，它会给出不同的结果。也因为这是一个技巧，所有浏览器都会以自己的方式解释它。

您可以通过 jQuery Ui 进行类似的设置。例如，动画还可以缩放元素、颜色等的大小。在我看来，这是一个比使用 CSS 技巧更好、更可靠的替代方案。

更多信息可以在[http://jqueryui.com/docs/animate找到](http://jqueryui.com/docs/animate)

# jquery - 如何使用 jQuery 自动完成切换与搜索结果源匹配的隐藏元素？

> ID：11876975
> 
> 赞同：0
> 
> 时间：2012-08-09T04:48:47.003
> 
> 标签：jquery, autocomplete, toggle

如何使用 jQuery Autocomplete 切换或显示 HTML 中的隐藏元素而不是数据库？

这是包含我一直在使用的元素的[jsFiddle 。](http://jsfiddle.net/cazepeda/kMcFZ/21/)一切正常，除了我不知道如何继续显示与搜索源匹配的隐藏元素。

JavaScript 中的源变量与具有自动完成搜索字段的 HTML 页面中隐藏元素的类名相匹配。因此，根据您要搜索的元素（此示例搜索 HTML5 元素），当源与隐藏的类元素匹配时，将出现结果。

我一直在查看[结果处理程序](http://docs.jquery.com/Plugins/Autocomplete/result)，但似乎无法用我现在拥有的代码来解决它。

任何有关我的问题的帮助将不胜感激。或者，如果这是过度使用自动完成，请告诉我。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T05:25:42.140

像这样的东西可能会起作用

尝试 jQuery UI [http://jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)并查看事件部分。

例如，如果用户在哪里搜索“体育”，而您希望出现一个带有体育新闻的 div

你可以写一个像这样的自定义搜索选项：

```
$( ".selector" ).autocomplete({
   search: function(event, ui) { 
      if($( ".selector" ).val() == "sport"){
         // open sport div
         $("#sport").fadeIn();
      }
  }
}); 
```

这是你的意思吗？

让我知道你的情况，如果我能提供更多帮助

# c# - ListBox 中的多列数据

> ID：11876983
> 
> 赞同：9
> 
> 时间：2012-08-09T04:49:56.283
> 
> 标签：c#, .net, winforms, listbox, multiple-columns

我想在我的 ListBox 中有多列。下面是我在应用程序中获得的图片示例。

![没有多列的 ListBox 的图片](../Images/058d20869ddb0a406519c2b58bc0a1ae.png)

我实际上有大约 7 列，但为了便于理解，只打印了两列。

所以，第一列会说`date`，第二列会说`name`。如您所见，数据没有进入它们自己的列。

这是我的代码：

```
this.listBox1 = new System.Windows.Forms.ListBox();
this.SuspendLayout();
// 
// listBox1
// 
this.listBox1.FormattingEnabled = true;
this.listBox1.HorizontalScrollbar = true;

foreach (XmlNode xn in xnList)
{
    string date = xn.OfType<XmlNode>().FirstOrDefault(n => n.Name == "Date").FirstChild.Value;
    string id = xn.OfType<XmlNode>().FirstOrDefault(n => n.Name == "ID").FirstChild.Value;
    if (date == cari)
    {
        this.listBox1.Items.AddRange(new object[] {                    
        //dateBox.Text,
        dateBox.Text + "\r\n" + date});

        this.listBox1.Items.AddRange(new object[] {                    
        "sarabrown"});
    }
}
this.listBox1.Location = new System.Drawing.Point(12, 28);
this.listBox1.MultiColumn = true;
this.listBox1.Name = "listBox1";
this.listBox1.ScrollAlwaysVisible = true;
this.listBox1.Size = new System.Drawing.Size(300, 95);
this.listBox1.TabIndex = 0;
this.listBox1.ColumnWidth = 100;
// 
// Form3
// 
this.ClientSize = new System.Drawing.Size(400, 273);
this.Controls.Add(this.listBox1);
this.Name = "Form3";
this.ResumeLayout(false); 
```

[我在那里](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.multicolumn.aspx)找到了这段代码，但它创建了一个列表框，看起来就像上图所示。有人知道吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T05:00:26.347

only的`MultiColumn`属性`ListBox`有助于避免垂直滚动，因此只会将溢出的项目堆叠到下一列中。默认情况下，您的要求在 .NET 中不可用。因此，您可能必须构建自己的自定义控件来支持它。

顺便说一句，`GridView`是你的朋友。你需要的东西很容易使用`GridView`. 例如，为了使其简单化（您可能必须完全调整它以适应您的问题）

```
protected void MyGridView_PreRender(object sender, EventArgs e)
{
    DataSet myDataSet = new DataSet();
    myDataSet.ReadXml(new StringReader(myXmlDoc.OuterXml));
    GridView gv = (GridView)sender;
    gv.DataSource = myDataSet;
    gv.DataBind();
} 
```

**更新：**

您可能想要签出`ListView`而不是`GridView`or `ListBox`。它比 a 相对轻量级`GridView`。

`ListView`您还可以在不同的列中添加其他控件，例如复选框。

检查[这个例子](http://www.c-sharpcorner.com/uploadfile/mgold/listviewincsharp11172005021741am/listviewincsharp.aspx)给你一个想法。
或者这个更简单：[在 C# 中使用 ListView 控件](http://programmerslog.wordpress.com/2008/07/18/using-listview-control/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-28T11:38:12.077

我认为您误解了 ListBox 中 MultiColumn 属性的用法。

[来自 MSDN：](https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.listbox.multicolumn?view=netframework-4.7.2)

> 多列 ListBox 将项目放置到所需的尽可能多的列中，以使垂直滚动变得不必要。

所以这只是避免滚动的事情。

如果您想在每列上显示几列和单独的数据，我建议您使用[ListView](https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.listview?view=netframework-4.7.2)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-09T05:40:21.663

对于 C# 中 ListBox 中的 MutliColumn，这工作正常

```
listBox1.Items.AddRange(
    new object[]
    {
        "Name","Aman"

    }
); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2020-04-09T00:12:49.857

我已经能够创建一个代码，以便我可以从 Excel 中的电子表格中订购任何年份范围内的日期。

```
Private Sub UserForm_Initialize()

 With Me

       .StartUpPosition = 0
        '.Width = Application.Width * 0.46
        '.Height = Application.Height * 0.57
        .Left = Application.Left + (Application.Width * 0.7) \ 2
        .Top = Application.Top + (Application.Height * 0.3) \ 2

 End With

End Sub

Private Sub CommandButton1_Click()

initialize ("lth") 'Call rutine "initialize" to order listbox from down to up

End Sub

Private Sub CommandButton2_Click()

initialize ("htl") 'Call rutine "initialize" to order listbox from up to down

End Sub

Sub initialize(ByVal ordertype As String)

Dim x As Integer
Dim i As Integer
Dim fechas As Date
Dim datofecha As String
Dim arrayyear() As Date
Dim diasmesbisiesto(1 To 12) As Integer
Dim diasmesnobisiesto(1 To 12) As Integer
Dim lastrow As Integer
Dim mayoryear As Integer
Dim menoryear As Integer
Dim f As Integer
Dim c As Date

lastrow = Worksheets(1).Range("A" & Rows.Count).End(xlUp).Row

ReDim arrayyear(lastrow)

For u = 1 To lastrow

arrayyear(u) = Format(Sheet1.Cells(u, 1).Value, "dd/mm/yyyy")

Next u

'-------------------------
'Obtener mayor valor fecha
'-------------------------
Dim vm As Integer
Dim maxindex As Integer

maxindex = 1

For vm = 2 To UBound(arrayyear) 'suponemos indice desde 1 a n
If arrayyear(vm) > arrayyear(maxindex) Then
maxindex = vm
End If
Next

mayor = arrayyear(maxindex)
'-------------------------

'-------------------------
'Obtener menor valor fecha
'-------------------------
Dim vn As Integer
Dim minindex As Integer

minindex = 1

For vn = 2 To UBound(arrayyear) 'suponemos indice desde 1 a n
If arrayyear(minindex) < arrayyear(vn) Then

Else
minindex = vn
End If

Next

menor = arrayyear(minindex)
'-------------------------

menoryear = Year(menor) ' Asign the lowest year in menoryear
mayoryear = Year(mayor) ' Asign the highest year in mayoryear
ListBox1.Clear

'Carga vector diasmesbisiesto
'---------------------------
diasmesbisiesto(1) = 31
diasmesbisiesto(2) = 29
diasmesbisiesto(3) = 31
diasmesbisiesto(4) = 30
diasmesbisiesto(5) = 31
diasmesbisiesto(6) = 30
diasmesbisiesto(7) = 31
diasmesbisiesto(8) = 31
diasmesbisiesto(9) = 30
diasmesbisiesto(10) = 31
diasmesbisiesto(11) = 30
diasmesbisiesto(12) = 31
'---------------------------

'Carga vector diasmesnobisiesto
'---------------------------
diasmesnobisiesto(1) = 31
diasmesnobisiesto(2) = 28
diasmesnobisiesto(3) = 31
diasmesnobisiesto(4) = 30
diasmesnobisiesto(5) = 31
diasmesnobisiesto(6) = 30
diasmesnobisiesto(7) = 31
diasmesnobisiesto(8) = 31
diasmesnobisiesto(9) = 30
diasmesnobisiesto(10) = 31
diasmesnobisiesto(11) = 30
diasmesnobisiesto(12) = 31
'---------------------------

f = 0 'Variable para ubicar la ubicacion de la fila en donde se guardaran los datos en el listbox
cuenta = 0 ' Variable para contar la cantidad de elementos que se cargaron en el listbox

If ordertype = "lth" Then

 GoTo 1 ' Ordering lowest to highest

End If

If ordertype = "htl" Then

 GoTo 2 ' Ordering highest to lowest

End If

'---------------------------
' Ordering lowest to highest
'---------------------------
1:

For anio = menoryear To mayoryear

    For mes = 1 To 12

            If (anio Mod 4 = 0 And anio Mod 100 <> 0 Or anio Mod 400 = 0) Then

                 ' Años bisiestos
                 diasmes = diasmesbisiesto(mes)

            Else

                 ' Años no bisiestos
                 diasmes = diasmesnobisiesto(mes)

            End If

            datofecha = Format(DateSerial(anio, mes, 1), "dd/mm/yyyy")

            fechas = datofecha

            'Carga del listbox
            '------------------------------------------------------------------------------------------------------------
                For x = 0 To diasmes - 1

                        For i = 1 To lastrow
                        c = fechas
                        If Format(Sheet1.Cells(i, 1), "dd/mm/yyyy") = c + x Then

                            Me.ListBox1.AddItem

                           Me.ListBox1.List(f, 0) = Format(Sheet1.Cells(i, 1), "dd/m/yyyy")
                           cuenta = cuenta + 1
                            For b = 1 To 1

                             Me.ListBox1.List(f, b) = Sheet1.Cells(i, b + 1)

                            Next b
                            f = f + 1
                        End If

                        Next i

                Next x
             '------------------------------------------------------------------------------------------------------------
    Next mes

Next anio

Label2.Caption = "Number of Elements: " & cuenta
Label3.Caption = "Order from Lowest to Highest "

Exit Sub

'---------------------------
' Ordering highest to lowest
'---------------------------
2:

For anio = mayoryear To menoryear Step -1

    For mes = 12 To 1 Step -1

            If (anio Mod 4 = 0 And anio Mod 100 <> 0 Or anio Mod 400 = 0) Then

                 ' Años bisiestos
                 diasmes = diasmesbisiesto(mes)

            Else

                 ' Años no bisiestos
                 diasmes = diasmesnobisiesto(mes)

            End If

            datofecha = Format(DateSerial(anio, mes, diasmes), "dd/mm/yyyy")

            fechas = datofecha

            'Carga del listbox
            '------------------------------------------------------------------------------------------------------------
                For x = 0 To diasmes - 1

                        For i = 1 To lastrow
                        c = fechas
                        If Format(Sheet1.Cells(i, 1), "dd/mm/yyyy") = c - x Then

                            Me.ListBox1.AddItem

                           Me.ListBox1.List(f, 0) = Format(Sheet1.Cells(i, 1), "dd/m/yyyy")
                           cuenta = cuenta + 1
                            For b = 1 To 1

                             Me.ListBox1.List(f, b) = Sheet1.Cells(i, b + 1)

                            Next b
                            f = f + 1
                        End If

                        Next i

                Next x
             '------------------------------------------------------------------------------------------------------------
    Next mes

Next anio

Label2.Caption = "Number of Elements: " & cuenta
Label3.Caption = "Order from Highest to Lowest "

Exit Sub

End Sub 
```

# javascript - 我可以将图像捆绑到一个网页文件中吗？

> ID：11876985
> 
> 赞同：3
> 
> 时间：2012-08-09T04:50:14.597
> 
> 标签：javascript, html

我有一个包含大约 70 张图片的网页。我正在寻找一种将这些图像捆绑到资源文件中的方法。这并不是为了提高客户端性能，因为缓存等会解决这个问题。通过我们的 cms 更多地用于服务器端的资产管理 - 我希望能够将单个资源部署到 cms 中，而不必创建 70 个单独的资源。

是否有 JavaScript 库可以让我捆绑图像？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T05:34:55.873

**使用Image Sprites**很容易做到这一点，您无需使用 JavaScript。Sprite 是单个图像文件，其中包含位于特定位置的图像集合。我建议使用带有图像的透明**PNG**图像。

下面你可以看到谷歌、Windows Live 和 Facebook 使用的透明 PNG 精灵。

![新的 Google 图片精灵](../Images/24f5486c187c3f6410eadcf5eea6daa7.png)![Windows Live 精灵](../Images/bafe7e97aed65dfd257f4b41ea48777e.png)![在此处输入图像描述](../Images/b5ff396c0e016dceb4b20d1b721fcca1.png)

一旦精灵加载到网页中，很容易在另一个页面中显示图像，因为浏览器通常会缓存图像以提高页面加载速度。您可以通过使用 CSS 定义其在 sprite 中的特定位置来在 sprite 中显示特定图像，例如；

```
#prev{left:63px;width:43px;}
#prev{background:url('img_navsprites.gif') -47px 0;}
#next{left:129px;width:43px;}
#next{background:url('img_navsprites.gif') -91px 0;} 
```

最后，**[Spritebox](http://www.spritebox.net/)**是一个方便的工具，可以创建您自己的自定义图像精灵。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T05:12:11.100

我认为你需要的是 CSS sprite。使用 CSS sprite，您可以在单个图像中包含多个图像，并使用该图像根据您的要求显示单个图像。

这样做的主要优点是您需要对该图像的单个请求，而不是对每个图像的请求。

要了解更多关于 CSS Sprite 的信息，请查看以下链接 [http://www.w3schools.com/css/css_image_sprites.asp](http://www.w3schools.com/css/css_image_sprites.asp)

# arrays - 无法将枚举器转换为数组

> ID：11876986
> 
> 赞同：2
> 
> 时间：2012-08-09T04:50:55.143
> 
> 标签：arrays, ruby, ruby-on-rails-3.2, mongoid, enumerator

在处理一个应用程序时，我收到此错误：

> 无法将枚举器转换为数组

这是我的代码，`mr_collection`是 MongoID 查询。

```
mr_collection = self.where(query).map_reduce(map, reduce).finalize(finalize).out({:replace => 'mr_results'})
paginator = WillPaginate::Collection.new(page, limit, collection_count)

collection = mr_collection.find(
   :sort => sort,
   :limit => limit,
   :skip => skip
)
paginator.replace(collection) 
```

在获取`mr_collection`时，如果我检查结果`mr_collection`给我：

```
[   
   {"_id"=>1.0, "value"=>{"s"=>4.2, "p"=>14.95, "pml"=>0.01993}}, 
   {"_id"=>2.0, "value"=>{"s"=>3.7, "p"=>12.9, "pml"=>0.0172}}, 
   {"_id"=>3.0, "value"=>{"s"=>4.2, "p"=>12.9, "pml"=>0.0172}}, 
   {"_id"=>4.0, "value"=>{"s"=>4.0, "p"=>11.95, "pml"=>0.01593}}, 
   {"_id"=>300.0, "value"=>{"s"=>0.0, "p"=>8.95, "pml"=>0.01193}}, 
] 
```

在获取`collection`时，如果我检查结果`collection`给我：

```
#<Enumerator: []:find({:sort=>[["value.s", :desc], ["value.pml", :asc]], :limit=>10, :skip=>0})> 
```

我在线上遇到错误`paginator.replace(collection)`。我正在使用 Ruby 1.9.3 和 Rails 3.2.6。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T19:08:38.960

我不知道 mongoid 从未使用过它。但是搜索带来了一个非常相似的问题 - [Mongoid 3 - access map_reduce results](https://stackoverflow.com/questions/11784727/mongoid-3-access-map-reduce-results)

不幸的是，我的环境并没有设置测试的魔力

```
collection = mr_collection.send(:documents).sort(sort).limit(limit).skip(skip).to_a 
```

你看过这个链接吗？希望它能帮助您解决问题！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-18T15:39:03.610

`collection`is an`Enumerator`显然无法转换为 a `Array`，这是`replace`预期的。

以下是来自 ruby​​docs 的评论：

> **可枚举#find(ifnone = nil) { |e| ... }**
> 
> 将枚举中的每个条目传递给阻塞。返回第一个不为假的块。如果没有对象匹配，则调用 ifnone 并在指定时返回其结果，否则返回 nil。
> 
> **如果没有给出块，则返回一个枚举器。**

因此，您有两种选择：

1.  如果您想要所有元素，请从 Enumerator 生成一个数组。
2.  如果您只想要第一个匹配项，请提供一个块来确定匹配项。

希望这可以帮助。

（故事的寓意：总是阅读文档！）

# c# - 使用对象数据源控件的gridview加载数据

> ID：11876988
> 
> 赞同：1
> 
> 时间：2012-08-09T04:51:01.590
> 
> 标签：c#

我有一个问题要问大家，如何让对象数据源仅在有人单击链接按钮时才将数据加载到网格视图中？主要是我将根据用户的搜索条件在运行时为对象数据源中的 select 方法传递一些参数。任何人都可以为此提出解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T04:55:31.803

[设置`DataSource`和调用`DataBind()`](http://msdn.microsoft.com/en-us/library/fkx0cy6d.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T05:13:12.823

将所有参数放在HiddenField 中，其中一个HDF 必须是一个标志，用于决定select 方法是否必须返回查询项。看到这个[答案](https://dl.dropbox.com/u/49510149/stackoverflow/dotnet/Q11874496WebApp.7z)。

代码示例：

FilterGridView.aspx：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="FilterGridView.aspx.cs"
    Inherits="Q11876988WebApp.FilterGridView" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <%--
        Fields for user inputs
        --%>
        &nbsp;Id:
        <asp:TextBox ID="TxtId" runat="server"></asp:TextBox>
        &nbsp;Name:
        <asp:TextBox ID="TxtName" runat="server"></asp:TextBox>
        &nbsp;Phone:
        <asp:TextBox ID="TxtPhone" runat="server"></asp:TextBox>
        <%--
        Button to perform query
        --%>
        <asp:Button ID="BtnQuery" runat="server" OnClick="BtnQuery_Click" Text="Query" />
        <%--
        Hidden Fields used as parameters
        --%>
        <asp:HiddenField ID="HdfId" runat="server" />
        <asp:HiddenField ID="HdfName" runat="server" />
        <asp:HiddenField ID="HdfPhone" runat="server" />
        <%--'false': Avoid query execution before 'BtnQuery' click.--%>
        <asp:HiddenField ID="HdfDoQuery" runat="server" Value="false" />
        <%--
        GridView
        --%>
        <asp:GridView ID="GrvMyData" runat="server" AutoGenerateColumns="False" DataSourceID="OdsMyData">
            <Columns>
                <asp:BoundField DataField="Id" HeaderText="Id" SortExpression="Id" />
                <asp:BoundField DataField="Name" HeaderText="Name" SortExpression="Name" />
                <asp:BoundField DataField="Phone" HeaderText="Phone" SortExpression="Phone" />
            </Columns>
        </asp:GridView>
        <%--
        ObjectDataSource and parameters related to Hidden Fields
        --%>
        <asp:ObjectDataSource ID="OdsMyData" runat="server" OldValuesParameterFormatString="original_{0}"
            SelectMethod="QueryMyDataPoco" TypeName="Q11876988WebApp.FilterGridViewODS">
            <SelectParameters>
                <asp:ControlParameter ControlID="HdfId" ConvertEmptyStringToNull="False" Name="id"
                    PropertyName="Value" Type="String" />
                <asp:ControlParameter ControlID="HdfName" ConvertEmptyStringToNull="False" Name="name"
                    PropertyName="Value" Type="String" />
                <asp:ControlParameter ControlID="HdfPhone" ConvertEmptyStringToNull="False" Name="phone"
                    PropertyName="Value" Type="String" />
                <asp:ControlParameter ControlID="HdfDoQuery" ConvertEmptyStringToNull="False" Name="doQuery"
                    PropertyName="Value" Type="Boolean" />
            </SelectParameters>
        </asp:ObjectDataSource>
    </div>
    </form>
</body>
</html> 
```

FilterGridView.aspx.cs：

```
public partial class FilterGridView : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
    }

    protected void BtnQuery_Click(object sender, EventArgs e)
    {
        //change this values causes the 'OdsMyData' 'DataBind'.
        this.HdfId.Value = this.TxtId.Text;
        this.HdfName.Value = this.TxtName.Text;
        this.HdfPhone.Value = this.TxtPhone.Text;
        this.HdfDoQuery.Value = true.ToString();
    }
} 
```

FilterGridViewODS.cs：

```
/// <summary>
/// Class for a ObjectDataSource
/// </summary>
[DataObject]
public class FilterGridViewODS
{
    private static IList<MyDataPoco> MyDataList = new List<MyDataPoco>();

    /// <summary>
    /// Static constructor. Creates a list of 50 items.
    /// </summary>
    static FilterGridViewODS()
    {
        for (int i = 0; i < 50; i++)
        {
            MyDataList.Add(
                new MyDataPoco()
                {
                    Id = i.ToString(),
                    Name = "Name " + i,
                    Phone = i + "" + i + "" + i + "." + i + "" + i + "" + i + "" + i + ""
                });
        }
    }

    /// <summary>
    /// if <paramref name="doQuery"/> is <c>true</c>, performs a 
    /// query over the data content, Otherwise return an empty list.
    /// </summary>
    [DataObjectMethod(DataObjectMethodType.Select)]
    public IEnumerable<MyDataPoco> QueryMyDataPoco(String id, String name, String phone, bool doQuery)
    {
        if (doQuery)
        {
            IEnumerable<MyDataPoco> filteredEnum =
                from md in MyDataList
                where
                    md.Id.Contains(id)
                    && md.Name.Contains(name)
                    && md.Phone.Contains(phone)
                select md;

            return filteredEnum;
        }
        else
        {
            //returning an empty list.
            return new List<MyDataPoco>();
        }
    }
} 
```

MyDataPoco.cs：

```
public class MyDataPoco
{
    public String Id { get; set; }
    public String Name { get; set; }
    public String Phone { get; set; }
} 
```

完整来源：[Q11874496WebApp.7z](https://dl.dropbox.com/u/49510149/stackoverflow/dotnet/Q11874496WebApp.7z)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T06:04:25.533

我假设您已经为 ObjectDataSource 控件中的每个参数值指定了哪个源。

您需要做的是在搜索按钮的单击事件上指定数据源并显式绑定网格，如下所示：

```
gridView1.DataSource = objectDataSource1;
gridView1.DataBind(); 
```

# jquery-ui - 在使用 jQuery UI 的切换时，我们究竟可以在 'option' 参数上设置什么？

> ID：11876993
> 
> 赞同：1
> 
> 时间：2012-08-09T04:51:48.810
> 
> 标签：jquery-ui

文档说：“一个对象/哈希，包括效果的特定选项。” 检查了有关效果的文档，相同的描述。

虽然这个例子暗示了这样的事情：

> {到：{宽度：200，高度：60}}；

我仍然很好奇还能做什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T05:17:39.993

切换选项仅采用动画特定参数。[您可以在jQuery UI 套件网站](http://jqueryui.com/docs/Effects/Methods)上找到这些参数的概述，当然您必须包含它才能使用效果。

# amazon-web-services - aws php sdk，如何检查状态是否正常

> ID：11876994
> 
> 赞同：0
> 
> 时间：2012-08-09T04:52:48.920
> 
> 标签：amazon-web-services

我正在使用 AWS PHP 开发工具包。想检查实例是否启动，如果没有，我将启动它，如果关闭，我将停止 ip。任何人都知道如何使用 PHP sdk 检查实例状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T09:04:28.470

`AmazonEC2::describe_instances()`将返回有关所有实例的元数据，包括运行状态。（EC2 会在短时间内保留有关最近终止的实例的信息。）

如果您有实例的 ID，则可以通过将其传递给`InstanceId`输入参数来过滤结果。

[http://docs.amazonwebservices.com/AWSSDKforPHP/latest/#m=AmazonEC2/describe_instances](http://docs.amazonwebservices.com/AWSSDKforPHP/latest/#m=AmazonEC2/describe_instances)

# c++ - 在多个文件中使用 jmp_buf

> ID：11876995
> 
> 赞同：-2
> 
> 时间：2012-08-09T04:53:04.327
> 
> 标签：c++, exception-handling, goto, setjmp

为了清楚起见，请查看我的示例

我有两个文件：main.cpp 和 myfunction.h

这是 main.cpp

```
#include <setjmp.h>
#include <myfunction.h>

int main()
{
   if ( ! setjmp(bufJum) ) {
      printf("1");
      func();
   } else {
      printf("2");
   }
   return 0;
} 
```

这是 myfunction.h

```
#include <setjmp.h>
static jmp_buf bufJum;

int func(){
   longjum(bufJum, 1);
} 
```

现在，我想要我的屏幕打印“1”，然后打印“2”，但这段代码不正确！请帮我！非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T08:11:28.393

如果你想在多个文件中拥有它，那么你需要创建两个*源*文件，而不是一个源文件和一个头文件

myfunction.cpp：

```
#include <setjmp.h>

extern jmp_buf bufJum;  // Note: `extern` to tell the compiler it's defined in another file

void func()
{
    longjmp(bufJum, 1);
} 
```

主.cpp：

```
#include <iostream>
#include <setjmp.h>

jmp_buf bufJum;  // Note: no `static`

void func();  // Function prototype, so the compiler know about it

int main()
{
    if (setjmp(bufJum) == 0)
    {
        std::cout << "1\n";
        func();
    }
    else
    {
        std::cout << "2\n";
    }

    return 0;
} 
```

如果您使用 GCC 编译这些文件，您可以使用以下命令行：

```
$ g++ -Wall main.cpp myfunction.cpp -o myprogram

```

现在您有一个名为的可执行程序`myprogram`，它由*两个*文件组成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T04:57:25.890

我对 setjmp 一无所知，但是您的代码中至少有一个错误：

```
-#include <myfunction.h>
+#include "myfunction.h" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T05:00:43.033

您在 .h 文件中定义了一个非内联函数。虽然不违法，但这几乎总是错误的。

您在 .h 文件中定义了一个静态全局变量。虽然不违法，但这几乎总是错误的。

# testing - 单独测试 Dexterity 内容创建

> ID：11876996
> 
> 赞同：1
> 
> 时间：2012-08-09T04:53:14.903
> 
> 标签：testing, plone, dexterity

对于一个项目，我有一个复杂的主对象，其中包含许多子组件。这些对象的设置由构造函数接口控制，我将其绑定到各种生命周期和工作流事件，如下所示：

```
@grok.subscribe(schema.ICustomFolder, lifecycleevent.IObjectAddedEvent)
def setup_custom_folder(folder, event):
    interfaces.IConstructor(folder).setup()

@grok.subscribe(schema.ICustomFolder, lifecycleevent.IObjectModifiedEvent)
def setup_custom_folder(folder, event):
    interfaces.IConstructor(folder).update() 
```

我想做的是在*不*依赖事件处理程序的情况下测试构造函数方法。我尝试通过直接创建对象来避免生命周期事件来做到这一点：

```
def test_custom_item_constructor(self):
    master = createContent('model.master_object', 
        needed_attribute = 2
    )
    folder = createContent('model.custom_folder',
        __parent__ = master
    )
    self.assertEqual(0, len(folder))
    constructor = interfaces.IConstructor(folder)
    constructor.setup()
    self.assertEqual(2, len(folder)) 
```

该方法根据主对象上提供的属性在实例`setup`内创建许多项目。`Custom_Folder`但是，这是挂起的，我认为这是由于两个对象实际上都不属于该站点，因此没有获取权限。我可以通过将`createContent`主对象更改为`createContentInContainer`并将其添加到测试站点的适当部分来实现这一点，但这会触发*所有*生命周期事件，这些事件最终会执行构造函数调用，这不会让我在其中测试它们隔离。

我已经尝试为此使用模拟对象，但是处理在 Constructor 期间发生的内容创建变得混乱`.setup`。

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T06:04:18.613

我不确定这是否是最好的方法，但我设法通过首先禁用相关的事件处理程序，然后在站点内正确创建内容来获得我想要的结果：

```
def test_custom_item_constructor(self):
    zope.component.getGlobalSiteManager().unregisterHandler(
        adapters.master.constructor.setup_masterobject,
        required=[schema.IMasterObject, lifecycleevent.IObjectAddedEvent]
    )
    zope.component.getGlobalSiteManager().unregisterHandler(
        adapters.custom.constructor.setup_customfolder,
        required=[schema.ICustomFolder, lifecycleevent.IObjectAddedEvent]
    )
    master = createContentInContainer(self.portal, 'model.master_object', 
        needed_attribute = 2
    )
    folder = createContentInContainer(master, 'model.custom_folder',
        __parent__ = master
    )
    self.assertEqual(0, len(folder))
    constructor = interfaces.IConstructor(folder)
    constructor.setup()
    self.assertEqual(2, len(folder)) 
```

这足以解除由添加新主对象触发的事件链。