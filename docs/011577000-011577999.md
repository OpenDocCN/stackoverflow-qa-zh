# StackOverflow 问答 11577000-11577999

# regex - TCL 中的正则表达式问题

> ID：11577000
> 
> 赞同：0
> 
> 时间：2012-07-20T09:52:34.843
> 
> 标签：regex, shell, tcl

我对 TCL 中的正则表达式有疑问。
我如何`some text`使用正则表达式函数查找和更改 TCL 字符串变量。
文本示例： `/folder/folder2/test-c+a+t -test1 -test2`
我想收到： `/folder/folder2/test-d+o+g`

或者例如它可以只是：
`test-c+a+t`
我想收到：
`test-d+o+g`

抱歉添加此内容：
在这种情况下：
`/test-c+a+t/folder2/test-c+a+t -test1 -test2`
我想收到：
`/test-c+a+t/folder2/test-d+o+g -test1 -test2`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T10:49:40.687

```
% set old {/folder/folder2/test-c+a+t -test1 -test2}
/folder/folder2/test-c+a+t -test1 -test2
% set new [regsub {(test)-c\+a\+t.*} $old {\1-d+o+g}]
/folder/folder2/test-d+o+g 
```

注意文字`+`符号需要转义，因为它们是正则表达式量词。

[http://tcl.tk/man/tcl8.5/TclCmd/re_syntax.htm](http://tcl.tk/man/tcl8.5/TclCmd/re_syntax.htm)
[http://tcl.tk/man/tcl8.5/TclCmd/regsub.htm](http://tcl.tk/man/tcl8.5/TclCmd/regsub.htm)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T10:57:18.907

在您在此处提到的特定情况下，您最好使用字符串映射。正则表达式更灵活，所以这完全取决于您的任务的具体程度。

```
set modified [string map {test-c+a+t test-d+o+g} $original] 
```

否则，学习如何使用正则表达式语法是无可替代的。它几乎一直很有用，因此请阅读手册页，尝试各种表达方式，并在您未能达到预期时重新阅读手册。还可以尝试 sed、awk 和 grep 来学习使用正则表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T20:59:29.270

使用`string map`或使用`regsub`（可能与`-all`标志一起使用）。以下是这两种方法的一些示例：

```
set myString [string map [list "test-c+a+t" "test-d+o+g"] $myString] 
```

```
set myString [regsub -all "***=test-c+a+t" $myString "test-d+o+g"]
### Or equivalently, for older Tcl versions...
regsub -all "***=test-c+a+t" $myString "test-d+o+g" myString 
```

可以在一次扫描中`string map`应用多个更改（映射`a b b a`将交换所有`a`和`b`字符），但它只*替换*文字字符串并且总是替换它可以替换的所有内容。该`regsub`命令可以进行更复杂的转换，并且可以更有选择性地替换它，但它确实需要您使用正则表达式，并且在 a`string map`可以完成等效工作的情况下它会更慢。但是，模式中的特殊前导`***=`意味着模式的*其余部分*是文字字符串。

# java - Swing：单击特定按钮时忽略文本框焦点丢失事件

> ID：11577002
> 
> 赞同：0
> 
> 时间：2012-07-20T09:52:38.497
> 
> 标签：java, swing, jtextcomponent, documentlistener, focuslistener

我有一个摆动文本框，其中包含一个在 focuslost 事件上验证的值。该表单具有许多其他控件，包括取消按钮。如果由于单击取消按钮而失去焦点，我希望跳过验证。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T09:59:03.413

我建议删除执行验证的代码`focusLost`并在 a 中实现您的验证`DocumentListener`，或者选择`JFormattedTextField`具有内置验证的 a。

同样从用户的角度来看，我更喜欢动态验证而不是失去焦点。当我开始打字时，很高兴看到您的输入何时变得不正确。此外，您可以选择在输入无效时禁用“确定”按钮，而仅启用“取消”按钮。这当然要求您的验证不会弹出消息，而只是在输入字段中/旁边添加指示

# mfc - 在 MFC CView 中处理动态文本编辑

> ID：11577006
> 
> 赞同：0
> 
> 时间：2012-07-20T09:52:54.950
> 
> 标签：mfc, cedit

我有一个实现 OnDraw 以将文本和图像绘制到 CView 的类。在某些时候（即 onClick），我希望该文本可以就地编辑。实现这一点的最佳方法是什么？

*   让班级有一个 CEdit 对象，我将其隐藏、显示并绘制在我的文本顶部。
*   在课堂上处理按键并实现我自己的编辑
*   有一些外部的类控制是否显示编辑框或我的类
*   还有什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T10:30:03.167

使用您的第一个想法，当您需要一些文本编辑时创建一个 CEdit 框。如果您查看 ListCtrl 如何处理重命名功能，它就是这样做的。

# linq-to-sql - 加两个价格来做一个

> ID：11577008
> 
> 赞同：0
> 
> 时间：2012-07-20T09:53:04.713
> 
> 标签：linq-to-sql

早晨，

我想知道如何从我的数据库中添加两个价格来生成一个价格。我当前的代码如下。

```
 orderPriceTotal = oi.price + oi.shippingPrice, 
```

非常感谢所有帮助，谢谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:11:51.923

如果`oi.price`和`oi.shippingPrice`是数字（希望是`decimal`）值，那么您所拥有的应该可以工作。

如果它们已经是字符串，则返回数据源并将它们作为十进制值返回。

如果你不能这样做，那么你需要将它们转换回数值，添加它们，然后再转换回字符串。

```
System.Globalization.CultureInfo culture = <your culture>;
decimal price;
if (decimal.TryParse(oi.price, NumberStyles.Currency, culture, out price); 
```

这`NumberStyles.Currency`将允许您解析可能包含货币符号的字符串。

然后做同样的事情`shippingPrice`：

```
orderPriceTotal = (price + shippingPrice).ToString("C", culture); 
```

转换回带有正确货币符号的完整字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T10:21:46.103

它应该可以工作..但我认为如果这些不是数值那么首先你需要转换成数字然后做加法。

# wordpress - 使用 backupbuddy 克隆 wordpress 后无法上传、更新、安装插件

> ID：11577013
> 
> 赞同：0
> 
> 时间：2012-07-20T09:53:22.343
> 
> 标签：wordpress, permissions

我刚刚使用最新版本的 BackupBuddy v3.0.40 将一个客户端站点迁移到她的生产服务器，乍一看一切看起来都很花哨，但仔细观察，大多数 WP 文件功能都很糟糕：更新 wp、上传图像、上传插件.

我已经做了很多次了（在这个主机上好几次），不知道为什么它不能在这里工作

*   我怀疑它与 tmp 目录有关，但我看不出问题..
*   另一种可能性是脚本（通过 cpanel 安装可能会干扰..我注意到在 2016 年之前的所有月份都创建了上传文件夹！我读到这是 WP 过去权限问题的解决方案）

这是我尝试过的：

*   将 wp-media 上传位置更改为默认值，更改“年/月存储”设置和一般摆动。这被导入为“/home/###/public_html/wp-content/uploads”，看起来正确，但不必要，默认为 wp-content/uploads。既不工作。
*   更改 wp-content 的权限并将目录上传到 777（不是所有内容）
*   在 wp-config.php 中添加一行：define('WP_TEMP_DIR', ABSPATH . 'wp-content/'); 没有骰子
*   卸载了 installatron 脚本化 wp 安装的所有痕迹（没有文件或数据库保留）
*   重复迁移（相同的备份文件，相同的结果）

确认：

*   我可以创建新帖子，但不能上传媒体
*   它适用于登台服务器（同一主机）
*   安全模式已关闭
*   apache 以用户身份运行，tx suPHP
*   文件是由 php 通过浏览器提取的
*   我已经将 phpinfo 与其他工作站点进行了比较，并没有发现任何异常

希望你能有所启发！

谢谢，蒂姆

图片上传错误：

```
“envelope-9887.jpg” has failed to upload due to an error
The uploaded file could not be moved to /home/###/public_html/wp-content/uploads/2012/07. 
```

wordpress 更新错误：

```
Download failed.: Destination directory for file streaming does not exist or is not writable. 
```

插件安装错误：

```
Download failed. Destination directory for file streaming does not exist or is not writable 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T01:06:41.713

我最终发现我会忽略这条线

```
define('WP_TEMP_DIR', 'old-hard-link-here'); 
```

我相信它直接位于 wp 盐下，伪装成疲惫的眼睛！只需删除该行并将媒体路径设置为默认值即可解决问题。

我相信该行是由 cPanel 脚本“Installatron”安装的。结案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T13:23:42.527

有时在迁移时您可能需要查看数据库选项表并更改一些整体，即：

从旧的站点结构来看，它可能是：/home/yoursiteid/public_html/wp-content/ 等。但是在新服务器上，结构可能已经改变了？即：/home/differentuserid/wwwroot/wp-content/

编辑服务器上的文件以包括：

```
echo getcwd() . "\n"; 
```

只是为了查看主目录是否与您当前的服务器相同，或者它是否从您的旧服务器更改，检查您的数据库选项表并更新引用旧目录结构的整体..

# classification - Jahmm lib：如何解释 ForwardBackwardScaledCalculator.lnProbability() 的负值？

> ID：11577017
> 
> 赞同：0
> 
> 时间：2012-07-20T09:53:27.263
> 
> 标签：classification, logarithm, hidden-markov-models

我使用 Jahmm 库对加速度计序列进行分类。

我已经创建了模型，但是当我尝试通过以下方式计算模型上测试序列的概率时：

```
ForwardBackwardScaledCalculator fbsc = new ForwardBackwardScaledCalculator(test_pair.getValue(),model_pair.getValue().get_hmm());
                System.out.println(fbsc.lnProbability()); 
```

我得到负值，例如-1278.0926336276573。

库代码中的注释指出 lnProbability 方法：

> 返回生成此对象的序列概率的纳皮尔对数。
> 
> 返回：感兴趣的序列的napierian对数的概率

但是如何比较两个这样的对数呢？我用两个测试序列在两个不同的模型上调用该方法，所以我得到 4 个概率：

```
The test sequence: fast_test.seq on fast_model yields a Napierian log from -1278.0926336276573
The test sequence: fast_test.seq on slow_model yields a Napierian log from -1862.6947488370433
The test sequence: slow_test.seq on fast_model yields a Napierian log from -4433.949818774553
The test sequence: slow_test.seq on slow_model yields a Napierian log from -4208.071445499895 
```

但是在这种情况下，这是否意味着我们越接近零，测试序列与模型越相似（所以在这个例子中分类准确率 = 100%？）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T10:05:57.690

如果“[纳皮尔对数](https://en.wikipedia.org/wiki/Napierian_logarithm)”是指自然对数，那么您可以通过将*e*提高到*x来从返回值**x*中获得概率，例如使用. 但是，返回对数的原因是概率值太小而无法在 a 中表示；将简单地返回零。请参阅有关[日志概率](https://en.wikipedia.org/wiki/Log_probability)的 Wikipedia 文章。**`Math.exp``double``Math.exp(-1278.0926336276573)`**

 **> 这是否意味着我们越接近零，测试序列与模型越相似

`exp(0) == 1`并且`log(1) == 0`，实际上概率越低，其对数越小（越负）。所以，你越接近零，句子就越有可能在模型之下。

然而，这不需要直接与“与模型的相似性”相关，更不用说“分类准确性”了，因为 HMM（作为生成模型）会将较低的概率归因于较长的序列。在您最喜欢的教科书中阅读 HMM；对于这个答案框来说，完整的解释太长了，而且是一个数学问题，因此与本网站无关。**

# android - 在 ics 中播放 mp4 视频

> ID：11577019
> 
> 赞同：0
> 
> 时间：2012-07-20T09:53:30.790
> 
> 标签：android

我有一个以 mp4 (MPEG_4) 格式录制电影的应用程序，我想在重新编码器结束时将其呈现给用户。我的代码如下所示：

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.parse(path), "video/*");
startActivity(intent); 
```

它适用于 2.2 和 3 但它不适用于 ICS。为什么？有人可能对我的问题有其他解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:58:56.013

这是因为默认编解码器，我认为它们已在 ICS 中更改。但是，您应该尝试另一个 .mp4 文件 - 其中一些仍然可以播放

# objective-c - [自我自动释放] 可以接受吗？

> ID：11577024
> 
> 赞同：2
> 
> 时间：2012-07-20T09:53:38.977
> 
> 标签：objective-c, ios, memory-management, uikit

在某些情况下，您希望使用自己的动画（而不是使用`presentModalViewController:animated:`or `UIAlertView`）呈现警报样式视图控制器。

释放此视图控制器的正确方法是在视图消失时调用回调，但设置一个委托和所有这些似乎都是多余的。

所以我这样做：

```
- (void)dismiss
{
    [UIView animateWithDuration:0.3 delay:0 options:UIViewAnimationOptionCurveEaseIn animations:^{
        self.view.alpha  = 0;
    } completion:^(BOOL finished) {
        [self.view removeFromSuperview];
        [self autorelease];
    }];
} 
```

并且呈现对象不会释放或自动释放视图控制器。明智的内存管理我认为这没有问题。这是不好的做法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:56:48.373

我会考虑这种不好的做法。

只有调用过这个对象的对象才`retain`应该调用它。`release``autorelease`

我假设你没有打电话`[self retain]`

* * *

我什至不确定这是否会像您期望的那样工作。你能保证那时`self`需要释放吗？为什么保留它的对象不能调用`release`自己？你想强迫`self`吗`dealloc`？

如果`self`此时被解除分配，则任何其他期望`self`仍处于活动状态的对象都会将消息传递给 nil，或者更糟的是，内存可能会被重新分配，并且这些对象将向任意对象发送消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T10:01:04.597

这似乎是不好的做法，但对记忆没有任何影响。就模式视图而言，如果那是您想要实现的目标，为什么不直接将其弹出：

```
[self.navigationController popViewControllerAnimated:YES]; 
```

# jquery - jQuery手机日期框图标大小

> ID：11577029
> 
> 赞同：0
> 
> 时间：2012-07-20T09:54:18.830
> 
> 标签：jquery, html, jquery-mobile

是否可以更改日期框输入框中按钮的大小？

现在看起来像这样：

![在此处输入图像描述](../Images/690edaf3eff2a604d0791734a48e3d7b.png)

但我希望它更大，因为现在要干净点击它变得很棘手！如果不只是打开日历的图标，而是单击输入标签的任何部分来打开它，那也很好！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T16:29:52.133

日期框样式表 ( [http://dev.jtsage.com/cdn/datebox/latest/jqm-datebox.min.css](http://dev.jtsage.com/cdn/datebox/latest/jqm-datebox.min.css) ) 引用单个 datebox.png sprite ( [http://dev.jtsage.com/cdn/datebox/最新/图像/日期框.png](http://dev.jtsage.com/cdn/datebox/latest/image/datebox.png) )。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:28:30.660

您需要添加一个更大尺寸的 datebox.png 图标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T17:24:58.720

请尝试使用 Firebug 或 google chrome 查看 JQuery Mobile 的 DOM，您可以将图标大小更改为类。希望这可以帮助。:)

# android - 不使用 JSON 的 GCM 推送通知

> ID：11577033
> 
> 赞同：0
> 
> 时间：2012-07-20T09:54:34.640
> 
> 标签：android, android-c2dm, google-cloud-messaging

我正在尝试将我的应用程序从 C2DM 服务迁移到新的 GCM 推送通知。我已经成功集成了扩展 GCMBaseIntentService 的 GCMIntentService 类。当我使用 PHP 从服务器发送推送通知时，GCM 将消息数据作为 JSON 对象发送。我在我的 Android GCM 服务中使用以下代码，并使用新代码返回空值。

```
public void onMessage(Context context, Intent intent)
    {
        String action = intent.getAction();     
        if ("com.google.android.c2dm.intent.RECEIVE".equals(action))   {            
             message=intent.getStringExtra("message");                                  
            createNotification(context);
        }
   } 
```

PHP 脚本包含：

$headers = array('Authorization: key=' . $apiKey, 'Content-Type: application/json');

```
// Open connection
$ch = curl_init();

// Set the url, number of POST vars, POST data
curl_setopt( $ch, CURLOPT_URL, $url );

curl_setopt( $ch, CURLOPT_POST, true );
curl_setopt( $ch, CURLOPT_HTTPHEADER, $headers);
curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true );

curl_setopt( $ch, CURLOPT_POSTFIELDS, json_encode( $fields ) ); 
```

请建议我在我的 PHP 脚本中需要进行哪些更改才能使用 GCM 库而不使用 JSON 来发送推送通知。

提前感谢蒂姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:32:18.287

您必须通过 JSON 发送有效负载 - 您不想使用 JSON 的原因是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T14:39:09.493

您确实可以在没有 JSON 的情况下发送有效负载（如果您愿意的话），就像 C2DM 一样。

首先，内容类型更改为：

```
Content-Type: application/x-www-form-urlencoded;charset=UTF-8 
```

然后您的 HTTP 正文将包含以下内容：

```
registration_id=xxxxxx&collapse_key=yyyyy&data.data1=value1&data.data2=value2 
```

但是，通过将有效负载作为纯文本发送，您只能将其发送到`one device at a time`. 仅此一个原因就应该让您避免使用此选项，除非您的 C2DM 代码中已经有不希望更改的批量发送逻辑。

有关详细信息，请参见此处：http: [//developer.android.com/guide/google/gcm/gcm.html#request](http://developer.android.com/guide/google/gcm/gcm.html#request)

# java - CentOS 服务器中的 com.mysql.jdbc.exceptions.MySQLSyntaxErrorException 异常

> ID：11577039
> 
> 赞同：3
> 
> 时间：2012-07-20T09:55:03.753
> 
> 标签：java, mysql, database-connection, centos

在 CentOS 服务器上运行 java 代码连接 mysql

我的代码是 -

```
String server = "", url = "", password = "", user = "", databasename = "";
    Connection con = null;
    try {
        server = "xxx.xxx.xxx.xxx";
        databasename = "xx";
        user = "user";
        password = "pass";
        Class.forName("com.mysql.jdbc.Driver");
        url = "jdbc:mysql://" + server + "/" + databasename + "";
        con = DriverManager.getConnection(url, user, password);
        System.out.println(server + " Database connection established");
        System.out.println(con);
    } catch (Exception e) {
        System.out.println("***************connection failed********************");
        e.printStackTrace();
    } 
```

我的数据库在同一台服务器上运行。

我在我的本地系统和其他服务器中为同一数据库运行此代码，它运行良好，但它没有在我的数据库可用的同一服务器上运行。我得到了这个例外 -

```
 com.mysql.jdbc.exceptions.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '??????????????' at line 1
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1027)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:957)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3361)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3295)
   at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1852)
   at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:1975)
   at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2470)
   at com.mysql.jdbc.ConnectionImpl.configureClientCharacterSet(ConnectionImpl.java:1669)
   at com.mysql.jdbc.ConnectionImpl.initializePropsFromServer(ConnectionImpl.java:3336)
   at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:1979)
   at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:718)
   at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:287)
   at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:283)
   at java.sql.DriverManager.getConnection(libgcj.so.10)
   at java.sql.DriverManager.getConnection(libgcj.so.10)
   at testthread.ConnectionFactory.getConnection(ConnectionFactory.java:28)
   at testthread.ConnectionFactory.main(ConnectionFactory.java:39) 
```

有没有人帮我看看有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T06:07:26.280

这个问题似乎与以下非常相似： [Stumped SQL Exception for JDBC](https://stackoverflow.com/questions/4742927/stumped-sql-exception-for-jdbc)

尝试检查本地数据库服务器中的字符集配置/数据

# android - 放大/缩小状态管理

> ID：11577040
> 
> 赞同：0
> 
> 时间：2012-07-20T09:55:10.180
> 
> 标签：android

我是安卓新手。我在 opengl 上工作了 2 周，现在卡在了某个时间点。我可以通过单指触摸拖动 3d 图像并通过 2 指触摸放大/缩小。但是在一次触摸之后，当第二次开始缩放时，它不会从先前的状态渲染图像，而是首先缩放 3d 对象，然后开始放大/缩小。

这是我的代码。请看一下..

```
public class AnimateActivity extends RendererActivity 
{
Object3dContainer objModel;

// touch events
    private final int NONE = 0;
    private final int DRAG = 0;
    private final int ZOOM = 0;

    // pinch to zoom
    float oldDist = 100.0f;
    float newDist;

    int mode = 0;

    private float mPreviousX;
    private float mPreviousY;
    private final float TOUCH_SCALE_FACTOR = 180.0f / 320;

    private GLSurfaceView mGLSurfaceView;

    Renderer renderer;
@Override
public void initScene() {

    scene.lights().add(new Light());

    IParser parser = Parser.createParser(Parser.Type.OBJ,
            getResources(),"com.example.magic3d:raw/camaro_obj", true);
    parser.parse();

    //mGLSurfaceView=new GLSurfaceView(this);
    objModel = parser.getParsedObject();
//  objModel.scale().x = objModel.scale().y = objModel.scale().z = .8f;
    objModel.scale().x = objModel.scale().y = objModel.scale().z = .8f;
    scene.addChild(objModel);
    scene.backgroundColor().setAll(Color.WHITE);
    renderer=new Renderer(scene);
}

@Override
public void updateScene() {
    /*objModel.rotation().x++;
    objModel.rotation().z++;*/

}

public void onCreate(Bundle savedInstanceState)
{
        super.onCreate(savedInstanceState);
        mGLSurfaceView=new GLSurfaceView(this);
}

@Override public boolean onTouchEvent(MotionEvent e) {

    float x = e.getX();
    float y = e.getY();
    switch (e.getAction()) {
    case MotionEvent.ACTION_DOWN:           // one touch: drag
        Log.d("ShaderActivity", "mode=DRAG" );
        System.out.println("Action Down");
        mode = DRAG;
        break;
    case MotionEvent.ACTION_POINTER_DOWN:   // two touches: zoom
        Log.d("ShaderActivity", "mode=ZOOM" );
        System.out.println("Action zoom");
        oldDist = spacing(e);
        if (oldDist > 10.0f) {
            mode = ZOOM; // zoom
        }
        break;
    case MotionEvent.ACTION_UP:     // no mode
        mode = NONE;
        System.out.println("Action up");
        Log.d("ShaderActivity", "mode=NONE" );
        oldDist = 100.0f;
        break;
    case MotionEvent.ACTION_POINTER_UP:     // no mode
        mode = NONE;
        Log.d("ShaderActivity", "mode=NONE" );
        oldDist = 100.0f;
        break;
    case MotionEvent.ACTION_MOVE:   
        System.out.println("Action Move");
        // rotation
        if (e.getPointerCount() > 1 && mode == ZOOM) {
            newDist = spacing(e);
            Log.d("SPACING: ", "OldDist: " + oldDist + ", NewDist: " + newDist);
            if (newDist > 15.0f) {
                float scale = newDist/oldDist; // scale
                // scale in the renderer
                renderer.changeScale(scale);
                objModel.scale().x =renderer.scaleX; 
                        objModel.scale().y = renderer.scaleY ;
                                objModel.scale().z =renderer.scaleZ;

                oldDist = newDist;
            }
        }
        else if (mode == DRAG){
     float dx = x - mPreviousX;
     float dy = y - mPreviousY;
     renderer.mAngleX += dx * TOUCH_SCALE_FACTOR;
      renderer.mAngleY += dy * TOUCH_SCALE_FACTOR;
                //mGLSurfaceView.requestRender();
    updateScene();
                objModel.rotation().x=renderer.mAngleY;
                objModel.rotation().y=renderer.mAngleX;
    //            objModel.rotation().z=
           //Toast.makeText(getApplicationContext(), "action move downl", Toast.LENGTH_SHORT).show();
       //   updateScene();
        }
    }
    mPreviousX = x;
    mPreviousY = y;
    return true;
}
    // finds spacing
    private float spacing(MotionEvent event) {
        float x = event.getX(0) - event.getX(1);
        float y = event.getY(0) - event.getY(1);
        return FloatMath.sqrt(x * x + y * y);
    } 
```

}

谢谢....

# jquery - 使用jQuery隐藏字符串？

> ID：11577045
> 
> 赞同：1
> 
> 时间：2012-07-20T09:55:23.853
> 
> 标签：jquery

我想在 div 中隐藏字符串。考虑下面我想隐藏“一些”的例子。

```
<div id="Disappear">Here is some text.</div> 
```

调用函数后应该是

```
<div id="Disappear">Here is      text.</div> 
```

请注意，该空间仍然保留。被隐藏的句子和字符串也是随机的。

我尝试了什么？

用空格替换字符串。解决方案并不优雅，因为空格的宽度不能总是等于字符串。

**更新**我也不能使用`<span>`。实际的 div 包含更多的字符串，使用 span 不是一个选项。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T10:02:13.843

这是一个简单的示例 - 它将搜索文本包装在一个跨度中，这（通过 css）将可见性更改为隐藏

[http://jsfiddle.net/4kTVC/1/](http://jsfiddle.net/4kTVC/1/)

更新 - 正如评论中提到的，`{visibility: hidden}`比`{color: #fff}`

# php - php in_array 检查数组的最佳方法？

> ID：11577046
> 
> 赞同：0
> 
> 时间：2012-07-20T09:55:26.040
> 
> 标签：php, html, arrays, if-statement, error-handling

我有以下数组：

```
if ( empty($a)||empty($b)||empty($c)){
    if(empty($a)){
        $errors[]="a is empty";
    }
    if(empty($b)){
        $errors[]="b is empty";
    }
    if(empty($c)){
        $errors[]="c is empty";
            }
 }... 
```

如何检查`if (in_array('??'; $errors))`数组是否填充了`$a`,`$b`或`$c`错误消息？

我知道这种方式：

```
$errors = array(
    'a' => 'Please enter a.',
    'b' => 'Please enter b.',
    'c' => 'Please enter c.'
); 
```

在这里，我可以简单地检查`if (in_array('a'; $errors))`是否有一些错误消息`a`。我遇到的问题是，我不仅有一个关于 a、b 或 c 的错误消息。所以我寻找一种结合两种方法的方法：

```
$errors = array(
        'a' => if ( empty ($a) || $specific_error1_for_a  || $specific_error2_for_a ),
        'b' => if ( empty ($b) || $specific_error1_for_b  || $specific_error2_for_b ),
        'c' => if ( empty ($c) || $specific_error1_for_c  || $specific_error2_for_c ),
    ); 
```

我正在寻找一种方法来搜索数组`errors[]`中每个元素的失败消息实例`a,b`或`c`.

主要问题是我想要一个变量或其他东西，我可以在使用 in_array 时搜索它。要更具体：

我的每个输入字段都有一个错误层。`errors[]`因此，如果特定输入字段存在特定错误消息，我需要搜索整个数组：

```
<input type="text" id="a" name="a" value="<?php echo isset ($_POST['a'])? $_POST['a'] : ''; ?>" tabindex="10" autocomplete="off"/><?php if (**in_array(...., $errors)**):?><span class="error"><?php echo $errors['a'];?></span><?php endif;?> 
```

问题是，就像我已经说过的那样，每个输入字段我都有不止一个错误消息实例，所以我会有这样的东西：

```
(**in_array('a is empty' || 'a is too short' || 'a is too long' ..., $errors)**) 
```

这就是为什么我认为最好只搜索一个这样的变量：

```
(**in_array($a, $errors)**) 
```

如果有人可以就此提供建议，我将不胜感激。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T10:08:45.650

`array_intersect`可以像`in_array`多个值一样使用：

```
if(array_intersect($errors, array(
    'a is empty',
    'specific_error1_for_a',
    'specific_error2_for_a',
))) {
    // There is an error for a
} 
```

但是，我建议您以不同的方式设计程序。如果首先将错误存储在关联数组中，那么检查给定变量是否有任何错误会变得更加有效：

```
if(empty($a)){
    $errors['a'][]="a is empty";
}
if(empty($b)){
    $errors['b'][]="b is empty";
}
if(empty($c)){
    $errors['c'][]="c is empty";
} 
```

...

```
if(isset($errors['a'])) {
    // There is an error for a
} 
```

# ruby-on-rails - 使用回形针更新文件而不上传文件。

> ID：11577047
> 
> 赞同：0
> 
> 时间：2012-07-20T09:55:26.907
> 
> 标签：ruby-on-rails, paperclip

我在徽标模型上使用回形针并具有以下设置。

```
class Logo < ActiveRecord::Base
  has_attached_file :attached,
        :styles => {
        :small => ["170x170>", :jpg], :large => ["400x400>", :jpg]
      }
end 
```

如果我更新图片`logo`，文件应该通过回形针上传。但是，我不希望它上传，我只想更新数据库中徽标的属性。

你有什么好主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:04:56.573

`logo.some_attribute = "value"`那干脆干什么`logo.save`呢？

# jsp - 如何在 JSP 中显示文本？文本路径存储在数据库中

> ID：11577048
> 
> 赞同：1
> 
> 时间：2012-07-20T09:55:30.763
> 
> 标签：jsp

首先我将文本和图像保存在数据库中，在前端我使用语句来显示 web 对象中的文本：

```
<img src="<%=picturepath %>" width="570" /> 

<jsp:include page="<%=contentpath %>" /> 
```

然后在后端，我重新启动一个 web 项目。我使用虚拟路由：***D:\site***。当读取***a.jpg***或***a.txt***时，我可以进入

```
http://localhost:8080/site/a.jpg or
http://localhost:8080/site/a.txt in the IE. 
```

然后它显示。

***我使用 apache 在D:\site***上上传图像和文本 ，然后将路由 ***txt/site/a.jpg 和 /site/a.txt 保存***在 Mysql 中。并声明

```
<img src="<%=picturepath %>" width="570" /> 
```

文本和图像将显示

但

```
<jsp:include page="<%=contentpath %>" /> 
```

此语句无法显示文本

我认为这是因为内容***路径***是相对路径，站点和项目在同一目录中。我原来的看法是

```
http://localhost:8080/site/a.txt 
```

但结果是：

```
http://localhost:8080/webapp/site/a.txt 
```

我希望知道如何显示***/site/a.txt***在 jsp 中使用 datebase 读取

谢谢美女

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:09:21.100

我为前端和后端构建了两个单独的Web项目，将后端的文本上传到前端的Web项目：workspace \ webapp。并且前端和后端共享同一个mysql数据库，数据库存储图像的相对路径，然后搭建虚拟路由，重新部署前端，图片可以显示，文字不行。

# jquery - 在 jQuery 图表插件中使用我的 CSHTML 变量

> ID：11577050
> 
> 赞同：0
> 
> 时间：2012-07-20T09:55:51.037
> 
> 标签：jquery, variables, razor, webmatrix

我需要使用[http://www.highcharts.com/](http://www.highcharts.com/) jQuery 插件在我的 Intranet 上制作条形图。

我的所有数据都在我的 SQL 请求中的 CSHTML 中，所有结果都存储在 int 类型中。

我想将值放在插件中以供使用。

插件中放置数据的部分是这样的：

```
series: [{
            name: 'Actifs',
            data: [49.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6]

        }, {
            name: 'Inactifs',
            data: [83.6, 78.8, 98.5, 93.4, 106.0, 84.5, 105.0]

        }] 
```

我已经搜索了如何“打破”jQuery 来放置我的 CSHTML 变量，但我还没有找到答案。

那可能吗 ？如果不是如何在我的 jQuery 中获取我的 CSHTML 变量？在 jQuery 中插入基本代码*CSHTML @{ //CSHTML Code }*不起作用。

提前感谢您的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:29:33.223

您可以使用[Json Helper](http://www.mikesdotnetting.com/Article/160/WebMatrix-Working-With-The-JSON-Helper)为图表生成 JSON 数据。或者，您可以简单地在服务器端代码中生成一个逗号分隔的字符串，并通过在变量前面加上 @ 符号将其插入到适当的位置。不需要代码块大括号：

```
series: [{
            name: 'Actifs',
            data: [@MyFirstCommaSeparateString]

        }, {
            name: 'Inactifs',
            data: [@MySecondCommaSeparateString]

        }] 
```

# php - 如何使用 date() 获取上个月的年份

> ID：11577053
> 
> 赞同：1
> 
> 时间：2012-07-20T09:55:57.143
> 
> 标签：php

我想得到上个月的年份。

例如在`July 2012`我想要结果`2012`。但在`January 2013`我想要结果`2012` 和`Feb 2013`我想要结果`2013`

我已经搜索并找到了[如何使用 strtotime 和 date 获取相对于今天的上个月和年份？](https://stackoverflow.com/questions/5489502) 它使用`date_create`函数（即 DateTime 类）。但我想要一个不使用它的解决方案。即通过使用简单的`date()`功能

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T09:58:00.417

```
<?php
echo date('Y', strtotime('-1 month')); 
```

应该按预期工作。

# google-chrome-devtools - 评估 Chrome 中的实时 javascript 编辑？

> ID：11577056
> 
> 赞同：1
> 
> 时间：2012-07-20T09:56:07.840
> 
> 标签：google-chrome-devtools

我如何告诉 Chrome 开发人员工具我已经完成了一段 javascript 的实时编辑，并希望对结果进行“评估”？
即时编辑 javascript 很简单，我只需将光标放在“脚本”选项卡中的某个脚本中并开始输入，但如何完成编辑过程？

[我在这里](https://stackoverflow.com/a/5506786/125938)读到“您应用于代码的更改仅在执行通过它们时表达”，~~但即使我在调用函数时尝试编辑函数（即，当其中有一个命中断点时），我也可以不要让我的更改得到确认。~~编辑：整个“执行通过它”的东西似乎是错误的或充其量是过时的。

[Paul Irish 在 3:30 左右的视频](https://www.youtube.com/watch?v=nOEw9iiopwI)中演示了在开发人员工具中动态编辑 javascript ，但我无法弄清楚他是如何从编辑代码到让浏览器实际使用它的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-09T20:29:48.443

这就是您要查找的内容：

1.- 导航到 Source 选项卡并打开 javascript 文件

2.- 编辑文件，右键单击它，将出现一个菜单：单击**保存**并保存在本地。

要查看差异或恢复您的更改，请右键单击并从菜单中选择选项**Local Modifications** ...。如果您展开显示的时间戳，您将看到与原始文件的更改差异。

更多详细信息：[http ://www.sitepoint.com/edit-source-files-in-chrome/](http://www.sitepoint.com/edit-source-files-in-chrome/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:47:59.090

`Ctrl+S`或“右键单击 > 保存”。
确保你没有启用漂亮打印，因为你不能实时编辑代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-06T13:31:05.047

*   转到来源，选择您想要的文件。
*   点击暂停按钮暂停调试。
*   修改脚本添加一个console.log或任何你想要的，无论你想要什么
*   保存文件（cmd-s 或 ctrl-2）
*   单击暂停/恢复按钮以恢复执行
*   修改后的代码将被执行

# c# - LINQ Group by 并具有 where 子句

> ID：11577070
> 
> 赞同：3
> 
> 时间：2012-07-20T09:57:33.303
> 
> 标签：c#, linq

下面是我要翻译的 SQL 查询

```
SELECT dbo.Contracts.Supplier 
FROM dbo.Contracts INNER JOIN dbo.Products ON dbo.Contracts.Product = dbo.Products.Product
where dbo.Products.ProductGroup='Crude'
GROUP BY dbo.Contracts.Supplier 
```

我做错了什么，因为我没有得到与以下 LINQ 相同的结果

```
 var result = from c in context.Contracts
                     join p in context.Products on c.Product equals p.Product1
                     where p.Product1.Equals("Crude")
                     group c by c.Supplier into g    
                     select new { supplier = g.Key  }; 
```

它正在生成一个奇怪的声明

```
SELECT 
1 AS [C1], 
[Distinct1].[Supplier] AS [Supplier]
FROM ( SELECT DISTINCT 
[Extent1].[Supplier] AS [Supplier]
FROM [dbo].[Contracts] AS [Extent1]
WHERE N'Crude' = [Extent1].[Product]
)  AS [Distinct1] 
```

使用 distinct 会起作用，但要获得相同的结果，LINQ 应该生成这样的语句（就像它忽略连接一样）：

```
SELECT distinct dbo.Contracts.Supplier 
FROM dbo.Contracts INNER JOIN dbo.Products ON dbo.Contracts.Product = dbo.Products.Product
where dbo.Products.ProductGroup='Crude' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:27:45.283

我假设您使用的是“EntityFramework”或“Linq To SQL”。如果是这样，您应该能够使用`navigation properties`导航到产品并过滤无效结果。这样您的查询可能看起来像这样：

```
var result = (from c in context.Contracts
              where c.Products.Any(p => p.ProductGroup == "Crude")
              select c.Supplier).Distinct(); 
```

它将自动转换为正确的查询（在这种情况下甚至可能没有连接，只使用`Exists`sql 关键字）并返回不同的供应商。这是如果我正确理解您的目标 - 您希望获得分配给包含“粗”产品组产品的合同的所有供应商。

基本上，当您可以使用导航属性时，您应该尽量避免使用`join`s from`linq to sql`或`linq to entities`尽可能多的。系统可能会更好地将它们转换为特定`sql`的 .

# python - 为什么第三次暴露事件 event.area 比以前小？

> ID：11577073
> 
> 赞同：0
> 
> 时间：2012-07-20T09:57:50.200
> 
> 标签：python, gtk, pygtk

看看自己：

```
import gtk

def expose(widget, event):
        print event.area

win = gtk.Window()
win.show()
win.connect('expose-event', expose)  
gtk.main() 
```

所以，结果是：

```
gtk.gdk.Rectangle(0, 0, 200, 200)
gtk.gdk.Rectangle(0, 0, 200, 200)
gtk.gdk.Rectangle(194, 0, 6, 200) 
```

并且没有滚动条......为什么会发生这种情况以及如何避免这种情况？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T12:48:27.230

正如 ergosys 所说 - “这可能取决于系统和库。在 LMDE 上，使用股票 python，我只得到前两个曝光。”。我检查了LMDE，他是对的。

# c# - 改变数组的类型

> ID：11577077
> 
> 赞同：0
> 
> 时间：2012-07-20T09:58:03.940
> 
> 标签：c#, arrays, object, reflection

是否可以更改整个数组的类型，例如，我有：

```
object[] array; 
```

我想要：

```
MyObject[] array; 
```

数组仅包含 MyObject 类型的项目，但我只能将其视为对象 [] 类型，如果我不想通过反射将此数组保存到我的对象，这不会是问题，如下所示：

```
class MyArrayObject
{
   public MyObject[] objects {get; set;} 
} 
```

因此，如果我使用反射--`MyArrayObject.GetType().GetProperty("objects").SetValue(array)`我会得到异常，因为如果`object[]`类型不是数组`MyObject[]`-是否可以更改数组的类型，以便我可以通过反射将其添加到所需的属性？

我`object[]`没有`MyObject[]`数组的原因是，我想将新项目添加到数组中，所以我需要调整它的大小或放入列表 - 然后它更改为 object[] 数组并不总是 MyObject[] 类型 - 它可以是 MyObject2、MyObject3 ..任何东西 - 我也通过反射得到它 - 所以问题是将项目添加到动态指定类型的数组中。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T10:00:51.837

> 我有 object[] 而不是 MyObject[] 数组的原因是，我想将新项目添加到数组中，所以我需要调整它的大小或放入列表

这听起来像是一个`List<MyObject>`开始使用的理由。通常更喜欢列表而不是数组。

> 并不总是 MyObject[] 类型 - 它可以是 MyObject2、MyObject3 .. 任何东西

听起来是一个使用泛型的好地方。如果你真的需要使用反射，你总是可以使用[`Array.CreateInstance`](http://msdn.microsoft.com/en-us/library/system.array.createinstance.aspx)正确的元素类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T10:02:11.053

我不知道是否有直接的方法，但作为一种解决方法，您可以遍历所有对象并将每个对象转换为 MyObject 并将转换的对象添加到集合中。我知道这不是最好的解决方案，性能也不是很好，但正如我所说，这只是一种解决方法。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T10:21:23.993

使用 LINQ

```
array.Cast<MyObject>() // cast every element to MyObject 
```

或者

```
array.OfType<MyObject>() // filters all MyObject elements 
```

如果要保留数组类型，则调用 .ToArray() 方法

总的来说不是很好，但最简单的理解和支持方式

# java - 如何在类路径上找到重复的类？

> ID：11577079
> 
> 赞同：5
> 
> 时间：2012-07-20T09:58:06.410
> 
> 标签：java, jar, classpath

如何在类路径上找到重复的类？

背景：

我怀疑有一个重复的类（javax.mail.Session）。我找到了这个类的一个罐子，但我不知道包含同一类的第二个罐子在哪里。

我正在使用 Eclipse。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T10:00:11.193

在 Eclipse 中按 ctrl-shift-T 并输入 Session：

![日食截图](../Images/787ded2d9197489976d32faa6ba7ceda.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T10:12:01.687

这些工具或许能够解决您的问题：

1.  [类路径检查器](http://alumnus.caltech.edu/%7Eleif/opensource/cpcheck/index.html)

2.  [类路径检查器](http://classpathchecker.free.fr/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-16T13:19:44.400

验证这是否可以帮助您。该脚本将在一个文件夹中查找所有 jar 文件，提取所有类并找到相同的类（全名完全相同）。

[删除目录中的重复 jar](https://stackoverflow.com/questions/17555928/remove-duplicate-jars-in-a-directroy/20611435#20611435)

# android - android原生调试（ndk-gdb不工作）

> ID：11577081
> 
> 赞同：1
> 
> 时间：2012-07-20T09:58:10.620
> 
> 标签：android, android-ndk, gdb

首先，我已经阅读了 3 或 4 个教程，20 个有关堆栈溢出的相关问题，我很绝望，似乎没有任何工作......

我在 mac os x、eclipse juno、ndk-r8 上运行，我尝试调试使用库 (.jar) 的应用程序 (.apk)，它使用许多本机库 (.so)。我的 2 AndroidManifest.xml 包含 debuggable=true，我用“ndk-build NDK_DEBUG=1”编译 .so

但是当我在应用程序目录上调用“ndk-gdb”时，我得到：

```
"ERROR: Could not find gdbserver binary under ./libs/none" 
```

（这看起来很正常）

在库目录中，我得到：

```
"ERROR: Non-debuggable application installed on the target device." 
```

（这是错误的）

当我的程序因 segv 崩溃时，如果我使用 addr2line 或 ndk-stack，两者都说我的地址不正确。

有人知道为什么 gdb 不能附加到我的进程吗？或有解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T19:59:19.417

正如我之前在评论中所说：

ndk-gdb 无法附加到 jni 位于 android 库项目中的进程。

作为一种解决方法，您可以在库中放置一个模拟主入口点，将其转换为可执行项目，在调试模式下执行它。

# css - 在 CSS 文件中访问 Ruby 中的语言环境

> ID：11577083
> 
> 赞同：4
> 
> 时间：2012-07-20T09:58:16.560
> 
> 标签：css, ruby-on-rails, ruby, ruby-on-rails-3, locale

所以我在一个项目中使用 CSS、JS 和 Ruby。现在我在 ruby​​ 中设置了我的位置等，但我想在我的 css 文件上访问它们。这是为特定语言环境自定义视图。我在控制器中完成了以下操作。

```
 before_filter :set_locale

 private

 def set_locale
    @locale ||= params[:locale] || session[:locale] || I18n.default_locale
      I18n.locale = session[:locale] = @locale
 end 
```

如何在我的 CSS 文件中访问这个设置的位置？例如，如果位置是俄罗斯，则将高度设置为 200 像素或类似的东西。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T10:16:31.050

您可以将当前语言环境作为 lang 添加到 html 标记。例如

```
%html{lang: I18n.locale}
<html lang="en"> or <html lang="ru"> 
```

并添加带有语言前缀的特定语言样式

```
html[lang="en"] {
  # for english part
}

html[lang="ru"] {
  # for russian part
} 
```

你也可以改变行为现有的类

```
.test-title {
  html[lang="en"] & {
    // specific english style
  }
} 
```

# c# - 为 Windows 8 Metro App 转换 HTML/XAML 的第三方库？

> ID：11577085
> 
> 赞同：0
> 
> 时间：2012-07-20T09:58:26.323
> 
> 标签：c#, windows, silverlight

为 Windows 8 Metro App 转换 HTML/XAML 的第三方库？我使用 C#、Visual Studio 2012 Express for Windows 8、Windows 8 Release Preview 我想将 html 文件转换为 xaml，但我找不到第三方库来转换 HTML/XAML 支持 Metro App，有什么想法吗？谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:04:19.570

我相信您可以使用 Javascript 创建 Metro 应用程序。您必须检查项目模板

这是创建您的第一个 HTML 和 JAvascript MEtro 应用程序的链接 [http://msdn.microsoft.com/en-us/library/windows/apps/hh986964.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh986964.aspx)

# sproutcore - 无法安装 SproutCore

> ID：11577087
> 
> 赞同：0
> 
> 时间：2012-07-20T09:58:29.840
> 
> 标签：sproutcore

我用了

```
rvm 1.8.7 do gem install sproutcore 
```

它已成功安装，但现在运行`sproutcore gen project getting_started` 时出现以下错误：

```
/Users/user/.rvm/gems/ruby-1.8.7-p370/gems/sproutcore-1.8.2.1/vendor/chance/lib/chance/instance/slicing.rb:22: syntax error, unexpected ':', expecting '}'
            mtime: file[:mtime],
                  ^
/Users/user/.rvm/gems/ruby-1.8.7-p370/gems/sproutcore-1.8.2.1/vendor/chance/lib/chance/instance/slicing.rb:23: syntax error, unexpected ':', expecting '='
            canvas: canvas
                   ^
/Users/user/.rvm/gems/ruby-1.8.7-p370/gems/sproutcore-1.8.2.1/vendor/chance/lib/chance/instance/slicing.rb:234: syntax error, unexpected $end, expecting kEND 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-25T09:10:27.427

我同意 Topher Fangio 的观点，但要补充一点：这就是我所做的。

```
gem update --system 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:00:27.037

我认为这是 Ruby 1.8.7 的一个“已知错误”，因为它使用了一些仅在 1.9 中可用的语法。

您可能应该尝试升级到 Ruby 1.9.2 或 1.9.3，这应该可以解决问题。

# linux - 带密钥 + 密码的 lftp

> ID：11577090
> 
> 赞同：12
> 
> 时间：2012-07-20T09:58:52.263
> 
> 标签：linux, key, sftp, passphrase, lftp

我正在使用**lftp**将文件发送到 SFTP 服务器，但我不知道如何使用密钥和密码进行连接。

所以在 中`sftp`，我可以这样做：

```
sftp -i .ssh/id_rsa.mykey login@my.host.fr
Enter passphrase for key '.ssh/id_rsa.mykey': my passphrase here 
```

那么，我怎样才能通过这种连接方式使用 lftp 呢？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-09-04T20:09:58.363

基于[Jean-Luc Boss](https://stackoverflow.com/questions/11577090/lftp-with-key-passphrase/17783480#17783480)和 wiak 的答案，但更明确一点：

要连接到服务器，默认`lftp`使用命令。它没有用于更改要使用的密钥文件的显式选项，但正如您所注意到的，确实如此，因此我们只需要在连接之前设置为使用连接。`ssh``ssh -a -x``ssh``lftp``ssh -a -x -i <keyfile>`

您可以通过以下几种方式做到这一点：

*   如果您使用的是 lftp 的交互式命令行，请在连接之前运行以下命令：

    ```
     set sftp:connect-program "ssh -a -x -i <keyfile>" 
    ```

*   如果您要指定一堆命令`lftp`using `-c`，只需将该 set 命令添加到命令序列的开头：

    ```
     lftp -c 'set sftp:connect-program "ssh -a -x -i <keyfile>"; connect sftp://user@example.com; mirror -eR files; ...' 
    ```

*   如果您总是想使用相同的密钥，只需将`set ...`第一个项目符号中的那一行添加到您的`~/.lftprc`文件（或 中列出的其他配置文件选项之一`man lftp`）。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-09-06T02:01:09.373

You must specify the username, and just pass anything as the password, to skip it asking.

```
lftp -u user,xxx sftp://... 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-10-30T05:54:21.920

只需添加：

```
set sftp:connect-program "ssh -a -x -i yourprivatekeyfile" 
```

到您的`~/.lftprc`，因为大多数设置都可以在那里永久设置。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-22T09:01:24.453

LFTP 似乎没有通过或没有将“ssl:key-file”指定的身份文件与 SSH 一起使用。您必须在 sftp:connect-program 选项中指定它：

```
ssh -a -x -i yourprivatekeyfile 
```

这应该有效。

# macos - 在 iMac 中未检测到 3G USB 调制解调器设备

> ID：11577094
> 
> 赞同：1
> 
> 时间：2012-07-20T09:59:02.143
> 
> 标签：macos, osx-snow-leopard, device-driver, modem, at-command

我正在尝试连接到 3G USB 调制解调器以发出 AT 命令。但它没有在 /dev 中列出。在系统属性中，我可以看到检测到的 CDC 设备很少。我需要为 ACM 设备安装任何驱动程序吗？有什么想法吗？

规格：Mac OSX 10.6.7。英特尔酷睿 2 双核 2GB 内存

# objective-c - 将数据从标签传递到另一个视图控制器

> ID：11577102
> 
> 赞同：0
> 
> 时间：2012-07-20T09:59:25.503
> 
> 标签：objective-c, uilabel, segue

我所拥有的是，当您选择某个 uipickerview 时，标签将更改为选择器视图的内容。这可行，但是我无法在我的 pickerView.h 中获取标签的内容并将其发送到我的 pickerDuration.h(secondViewController) 中设置另一个标签的内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:05:58.463

好吧试试这个......

`NSString`在你里面有一个`SecondViewController`并确保你创建它的一个属性（`strong` 如果你使用的是 IOS 5 ARC）合成它

您必须有一个`SecondViewController`用于导航目的的对象。使用相同的对象来设置这样的值

```
secondViewObj.myStr = label.text; 
```

在导航到下一个视图之前确保你这样做

**编辑**

好的试试这个

在 performSegueWithIdentifier:sender: 之后，假设您的新视图控制器有一些要设置的属性，您的视图控制器将调用：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender

    if ([[segue identifier] isEqualToString:@"NextView"])   {
       SecondViewController *myVC = [segue destinationViewController];
        myVC.mystr=  label.text;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T10:51:06.047

在具有标签的 currentViewController 中创建 SecondViewController 的对象。在 SecondViewController 中声明一个字符串。

在您的 currentViewController 中初始化 secondViewController 对象并将其 NSString 设置为标签的文本。像这样的东西

secondViewController.string = 标签.文本；

# javascript - 使用表单值在另一个网站上创建帐户

> ID：11577111
> 
> 赞同：0
> 
> 时间：2012-07-20T10:00:01.037
> 
> 标签：javascript, html

嗨，我有以下代码：

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Registration Form</title>

<script type="text/javascript">
function validateForm() {
    var x = document.forms["myForm"]["uname"].value;
    var y = document.forms["myForm"]["pass"].value;
    if (x == null || x == "") {
        alert("UserName must be filled out");
        return false;
    }
    if (y == null || y == "") {
        alert("Password must be filled out");
        return false;
    }
}
</script>

</head>
<body>
    <h2> Register new GreenHouse </h2>
    <div>
    <form id="login" name= "myForm" method="put" action="" onsubmit="return validateForm()">
        <fieldset id="inputs">
            <input name="uname" id="username" type="text" placeholder="Username" autofocus required>   
            <input name="pass" id="password" type="password" placeholder="Password" required>
        </fieldset>
        <fieldset id="actions">
            <input type="submit" id="submit" value="Log in">
        </fieldset>
        </form>
    </div>
</body>
</html> 
```

我希望能够使用用户名和密码的值并在另一个网站（例如 yahoo 或 google）上创建一个新帐户。我不太确定如何开始这样做。当有人在文本框中填写一个具有相同用户 ID 和密码（与他们输入的一样）的新帐户时，将为他们创建一个基本概念。如果有人能给我指路或给我看一个关于这个的教程，我会很高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:08:11.893

仅当您要在其中创建帐户的站点（例如 google）提供您可以调用以创建帐户的服务时，这才有可能。如果该站点提供任何服务，则只需调用该服务即可创建帐户。

但我不认为网站确实提供这样的服务，因为他们希望用户自己创建帐户并停止他们使用 CAPTCHA 的恶意帐户创建。提供搜索服务对网站来说太危险了，因为这可能会破坏服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T10:13:38.080

以您建议的方式在 Google 或 Yahoo 上创建用户帐户存在道德和可能的法律（以及技术）问题。用户应该直接创建帐户。

不过，您可以通过如下方式整理 Javascript 来继续前进：)

```
function validateForm() {
    var form = document.forms.myForm,
        x = form.uname.value,
        y = form.pass.value;

    if (x === null || x === "") {
        alert("UserName must be filled out");
        return false;
    }
    if (y === null || y === "") {
        alert("Password must be filled out");
        return false;
    }
} 
```

编辑（根据您的评论）：

如果您拥有第二个网站，那么道德和法律问题就会消失。如果两个站点都托管在同一台服务器上，并且您可以直接访问数据库，那么通过哪个网站创建帐户实际上并不重要。

# objective-c - 通过 xcode 界面生成器标记和取消标记静态表格单元格

> ID：11577114
> 
> 赞同：0
> 
> 时间：2012-07-20T10:00:06.997
> 
> 标签：objective-c, xcode, storyboard

是否可以通过 xcode 界面生成器标记和取消标记静态表格单元格？还是我应该以编程方式进行？

![在此处输入图像描述](../Images/9f6970b6412dc2929cb3fbf1f359f047.png)

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:04:15.077

我相信您可能已经检查过，但这可能会回答您的问题：

[是否可以配置 UITableView 以允许多选？](https://stackoverflow.com/questions/308081/is-it-possible-to-configure-a-uitableview-to-allow-multiple-selection)

# java - java中对象的动态生成

> ID：11577118
> 
> 赞同：0
> 
> 时间：2012-07-20T10:00:17.760
> 
> 标签：java

```
HashSet<String> outScopeActiveRegionCodeSet=new HashSet<String>();
for (String regionCode : outScopeActiveRegionCodeSet) {
    //code required
} 
```

在这里，我需要在循环中动态创建新的 TransactionLOgDTO 对象，如下所示。如果哈希集中有 3 个区域代码，我需要 3 个 TransactionLOgDTO 对象，并将区域代码附加到新对象的名称中。

```
TransactionLOgDTO regionCode1DTO=new TransactionLOgDTO(); 

} 
```

我需要做这样的事情............

```
for (String regionCode : outScopeActiveRegionCodeSet) { TransactionLOgDTO "regionCode"+DTO=new TransactionLOgDTO(); } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T10:03:45.770

我建议使用 a`ArrayList`而不是将索引放在变量名中：

```
List<TransactionLOgDTO> regionCodeDTOs = new ArrayList<TransactionLOgDTO>();
HashSet<String> outScopeActiveRegionCodeSet=new HashSet<String>();
for (String regionCode : outScopeActiveRegionCodeSet) {
    regionCodeDTOs.add(new TransactionLOgDTO());
} 
```

或者，因为您没有使用`regionCode`字符串：

```
List<TransactionLOgDTO> regionCodeDTOs = new ArrayList<TransactionLOgDTO>();
HashSet<String> outScopeActiveRegionCodeSet=new HashSet<String>();
for (int i = 0; i < outScopeActiveRegionCodeSet.size(); i++) {
    regionCodeDTOs.add(new TransactionLOgDTO());
} 
```

然后您可以使用以下方式访问它们：

```
regionCodeDTOs.get(i); 
```

**[编辑]**
如果你想连接`regionCode`到`TransactionLogDTO`我会推荐一个`Map instead`：

```
Map<String, TransactionLOgDTO> transactionCodeDTOs = new HashMap<String, TransactionLOgDTO>();
HashSet<String> outScopeActiveRegionCodeSet=new HashSet<String>();
for (String regionCode : outScopeActiveRegionCodeSet) {
    transactionCodeDTOs.put(regionCode, new TransactionLOgDTO());
} 
```

检索如下：

```
transactionCodeDTOs.get(regionCode); 
```

# c# - MVVM：为什么 ViewModel 应该对 View 一无所知？

> ID：11577121
> 
> 赞同：0
> 
> 时间：2012-07-20T10:00:44.260
> 
> 标签：c#, .net, mvvm

问了这个[问题](https://stackoverflow.com/q/11557539/196526)后，我得到了新问题的答案

1.  为什么 UI 不应该知道它显示的逻辑的任何细节？
2.  为什么 ViewModel 应该对 View 一无所知？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T10:03:25.137

1.  无论在何种上下文中使用，都可以重用。
2.  看点1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T10:06:32.490

一个词来回答您的 2 个问题：紧耦合。进一步的解释包括关注点分离和防止可能导致安全问题的不良编码习惯。

Sux，为什么不考虑这个？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T10:15:41.040

正如其他答案所说，这保持了 ViewModel 和 View 之间的松散耦合，但它也遵守[Single Responsibility Principle](http://en.wikipedia.org/wiki/Single_responsibility_principle)。ViewModel 是否应该关心它的数据是如何显示给用户的？这只是视图的责任。

所有课程都应该有 1 个，而且只有 1 个理由来改变。在视图中拥有逻辑意味着您违反了此规则，如果逻辑发生更改，则需要更改它，而只有在 UI 需要更改时才应更改它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T10:35:32.270

viewmodel 包含视图逻辑 - 这就是你想要的单元测试。View 只是一个漂亮的界面，它允许用户与您的 ViewModel 进行交互。

> 为什么 ViewModel 应该对 View 一无所知？

视图模型不应**引用**视图。

# mongodb - 在 map reduce 中使用 IF/ELSE

> ID：11577123
> 
> 赞同：3
> 
> 时间：2012-07-20T10:00:47.167
> 
> 标签：mongodb

我正在尝试在我的一个 MongoDB 数据库集合上创建一个简单的 map/reduce 函数。我得到了数据，但它看起来不对。我不确定地图部分。我可以这样使用 IF/ELSE 吗？

**更新**

我想获得拥有这些文件的作者数量。换句话说，有多少作者拥有上传的文件，因此有多少作者没有文件。

集合中的对象如下所示：

```
{
    "_id": {
        "$id": "4fa8efe33a34a40e52800083d"
    },
    "file": {
        "author": "john",
        "type": "mobile",
        "status": "ready"
    }
} 
```

map/reduce 看起来像这样：

```
$map = new MongoCode ("function() {

if (this.file.type != 'mobile' && this.file.status == 'ready') {

 if (!this.file.author) {

  return;

 }

 emit (this.file.author, 1);

}

}");

$reduce = new MongoCode ("function( key , values) {

 var count = 0;

 for (index in values) {

  count += values[index];

 }

 return count;

}");

$this->cimongo->command (array (

 "mapreduce" => "files",  

 "map"       => $map,   

 "reduce"    => $reduce,  

 "out"       => "statistics.photographer_count"

)

); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:03:50.520

地图部分在我看来还可以。我会稍微改变减少部分。

```
values.forEach(function(v) {
  count += v;
} 
```

你不应该**使用**循环`for in`来迭代一个数组，它不是为了这样做。它用于枚举对象的属性。[这里有](https://stackoverflow.com/a/3010848/125816)更详细的解释。

为什么你认为你的数据是错误的？你的源数据是什么？你得到了什么？你期望得到什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T19:31:11.113

我刚刚尝试了您的地图并在 mongo shell 中减少并得到了正确（看起来合理）的结果。

您可以做的另一种方法是摆脱地图中的内部“if”条件，但使用适当的查询子句调用您的 mapreduce 函数，例如：

`db.files.mapreduce(map,reduce,{out:'outcollection', query:{"file.author":{$exists:true}}})`

或者，如果您碰巧有索引来提高查询效率，只需摆脱所有 if 并运行 mapreduce with`query:{"file.author":{$exists:true},"file.type":"mobile","file.status":"ready"}`子句。更改条件以匹配您要总结的实际案例。

在 2.2（即将推出的 rc0 版本）中，您可以将聚合框架用于此类查询，而不是编写 map/reduce 函数，希望这会在某种程度上简化事情。

# objective-c - 更新 NSOpenGLView 大小

> ID：11577125
> 
> 赞同：0
> 
> 时间：2012-07-20T10:00:49.873
> 
> 标签：objective-c, xcode, macos, cocoa, opengl

我想在更改纹理大小时更新我的​​ NSOpenGLView 窗口。没关系。发生这种情况时我会注册事件，但我无法调整 OpenGLView 的大小。值女巫正在改变是`w`和`h`。

```
-(void)initOpenGL {
NSSize size = {w, h};
[self setFrameSize:size];
NSOpenGLContext *glcontext;
glcontext = [self openGLContext];
[glcontext makeCurrentContext];
glMatrixMode(GL_PROJECTION);
glClearColor(0.0, 0.0, 0.0, 1.0);
glClear(GL_COLOR_BUFFER_BIT);               
glOrtho(0.0, h, 0.0, w, -1.0, 10.0); 
} 
```

当应用程序启动时它可以正常工作，但是当我`[self initOpenGL]`在任何这些大小更改后这样做时，OpenGL 视图会变黑，并且不再工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:00:06.270

如果您使用的是 NSOpenGLView，那么`reshape`会调用一个方法，该方法会在视图被重塑时被调用。在那里，您应该相应地调用`glViewport`并更新大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T10:09:06.163

您可能需要调用`[glcontext update]`并`glViewport(0,0,oglWidth,oglHeight)`调整视图大小的变化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T13:59:43.650

如果有人会遇到这个问题，只需`glLoadIdentity();`在 OpenGL 初始化的开头添加。

# android - 非 UI 片段与单例

> ID：11577132
> 
> 赞同：9
> 
> 时间：2012-07-20T10:00:57.433
> 
> 标签：android, singleton, android-fragments, android-configchanges

我猜非 UI 片段的主要目的是存储在配置更改时保留的数据，对吧？那么，除了这个存储特定于拥有这个片段的活动之外，这是它在整个应用程序中使用单例模式的好处（这是我迄今为止一直在做的解决方案）？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-20T11:15:14.757

片段被限定在其活动范围内的事实意味着长期内存泄漏的可能性较小，与单例相反——片段最终应该被垃圾收集，而单例则不会。

您还可以更好地控制时间。`Application`是在您的应用程序中的 any 之后创建的`ContentProviders`，您别无选择。相反，您可以控制何时创建片段，因此可以利用该控制。

因此，对于那些真正只有活动需要数据的地方，非 UI 片段可能比单例更好。单例将用于需要跨多个组件的数据的地方。

# javascript - javascript日期和时间加入

> ID：11577133
> 
> 赞同：2
> 
> 时间：2012-07-20T10:00:57.010
> 
> 标签：javascript, datetime

我分别有两个日期变量，如下所示

`startDate`是一个`Date`具有值的实例`Tue Jul 17 2012 00:00:00 GMT+0530 (IST)`

`startTime`是一个`String`与价值`"11:30 AM"`

现在我需要的是加入上述日期和时间，作为`Date`.

`startDateTime`= `Tue Jul 17 2012 11:30:00 GMT+0530 (IST)`

我试过了

`new Date(startDate + " " + startDate)`但输出`invalid date`。

还尝试了这篇[文章](https://stackoverflow.com/questions/8423963/how-to-merge-two-dates-in-javascript)中显示的方式。但仍然无法正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T10:11:13.640

您可以轻松解析`startTime`它是否采用明确定义的格式，然后使用`setHours`and `setMinutes`：[Live example](http://jsbin.com/uzayuq) | [资源](http://jsbin.com/uzayuq/edit)

```
var startDateTime;
var parts = /^(\d+):(\d+) (AM|PM)$/.exec(startTime);
if (parts) {
    hours = parseInt(parts[1], 10);
    minutes = parseInt(parts[2], 10);
    if (parts[3] === "PM" && hours !== 12) {
        hours += 12;
    }
    else if (parts[3] === "AM" && hours === 12) {
        hours = 0;
    }
    if (!isNaN(hours) && !isNaN(minutes)) {
        startDateTime = new Date(startDate.getTime());
        startDateTime.setHours(hours);
        startDateTime.setMinutes(minutes);
    }
} 
```

...或类似的规定。

请注意，关键是您所说的事实`startDate`是一个`Date`实例。以上假设我们在 JavaScript 环境的时区内工作，而不是跨区域工作。如果您从日期*字符串*开始，并且该字符串指定了 JavaScript 环境时区以外的时区，然后您将其转换为`Date`via `new Date("Tues Jul....")`，那么您必须确保调整结果`Date`以使用本地时间环境或 UTC；如果您将其调整为 UTC，您将使用`setUTCHours`and `setUTCSeconds`above 而不是`setHours`and `setSeconds`。同样，如果您的起点是日期*字符串*，并且该字符串指定*不同的时区，这只是一个问题*从上面的代码运行的时区。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T10:28:57.920

你可以这样做：

```
var theDate = new Date("Tue Jul 17 2012 00:00:00 GMT+0530 (IST)");
var theTime = "11:30 AM";
var hours = theTime .substr(0,2);
var minutes = theTime .substr(3,2);
var amOrPm = theTime .substr(6,2);
if (hours < 12 && "PM" == amOrPm) {
    hours = +hours + 12;
}
theDate.setHours(hours);
theDate.setMinutes(minutes); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T10:11:15.307

尝试

```
new Date(startDate.toDateString() + " " + startTime) 
```

这会将`Date`对象中的日期字符串与时间字符串结合起来，并且应该为您提供一个有效的日期。请注意，这会*忽略*您最初使用的时区，您可能需要`" GMT+0530"`再次添加。

但是，由于您的日期字符串已经存在时区偏差（2012 年 7 月 16 日，UTC 时间 20:30:00），最好将它们加在一起，例如`new Date(+startDate + milliseconds)`：

```
var startDate = new Date("Tue Jul 17 2012 00:00:00 GMT+0530");
var startTime = "11:30 AM";
return new Date(+startDate + +new Date("1 1 1970 "+startTime)) 
```

# ios - Photoshop 的选择性色彩和色彩平衡滤镜如何工作？

> ID：11577136
> 
> 赞同：3
> 
> 时间：2012-07-20T10:01:03.960
> 
> 标签：ios, image-processing, colors, photoshop

大家
好，我是图像处理的新手。我想在 IOS 上做一些颜色更改滤镜，就像 Photoshop 中的“选择性颜色”和“颜色平衡”。但是，我不知道这些很棒的功能的算法。
我尝试在 Paint.Net 的源代码中查找，但不幸的是，PainDotNet 没有此功能。

[有了色彩平衡，我在iPhone上](https://stackoverflow.com/questions/6781603/color-balance-on-the-iphone) 尝试了这个链接色彩平衡，但结果并不好。它与 Photoshop 的结果不同。

所以有人知道两种技术的算法：选择性色彩和色彩平衡吗？

谢谢你，对我复杂的演示感到抱歉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T05:24:14.760

I've been trying to find a solution for this for 2 days now, got some results but they are different from Photoshop implementation and I'm afraid not exactly correct.

The way I'm trying to approach it is to convert RGB color to HSL color space and then adjust Hue and Saturation color values along different axis (Cyan/Red, Yellow/Blue, Green/Magenta). I'm doing this by using cartesian coordinate system instead of polar one, as described here: [http://en.wikipedia.org/wiki/HSL_and_HSV#Hue_and_chroma](http://en.wikipedia.org/wiki/HSL_and_HSV#Hue_and_chroma)

My idea is that in cartesian coordinate space (with alpha and beta axis) changing alpha results in modifying color along Cyan/Red axis. Changing color along yellow/blue axis can be achieved by modifying alpha and beta at the same time:

`alpha = alpha + adjustment * cos(PI/3)`
`beta = beta + adjustment * sin(PI/3)`

Same can be done for other axes. After you got new alpha and beta values you can convert them to HSL and then to RGB.

Unfortunately the result is still quiet different from Photoshop implementation. Also I can't figure out the proper way to adjust only Reds, Yellows, Neutrals, Blacks, etc without touching the rest of the colours.

Does anyone have any hints on how this type of adjustment can be achieved?

**Update:**
Here's a discussion about color balance filter in GIMP and Photoshop: [https://github.com/BradLarson/GPUImage/issues/193](https://github.com/BradLarson/GPUImage/issues/193)

And here is sample code recreating GIMP color balance filter as a shader:
[https://gist.github.com/3168961](https://gist.github.com/3168961)
It's only implemented for midtones at the moment, but it should be pretty straight forward to make changes for highlights and shadows.
Unfortunately GIMP's color balance filter gives different results from Photoshop :(

I've created a color balance filter for GPUImage framework: [https://github.com/liovch/GPUImage/commit/fcc85db4fdafae1d4e41313c96bb1cac54dc93b4](https://github.com/liovch/GPUImage/commit/fcc85db4fdafae1d4e41313c96bb1cac54dc93b4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-21T15:18:37.383

也许这会有所帮助。我通过 Pixel Bender 将其编写为 photoshop 和 flash 扩展，Pixel Bender 是 Adob​​e 着色器语言，但它等同于任何其他着色器语言。这是大致将 Adob​​e ShaderLab 转换为 CG 着色器语言。

```
Shader "Filters/ColorBalance"
{
Properties
{
    _MainTex ("Main (RGB)", 2D) = "white" {}
    // Red, Green, Blue
    _Shadows ("shadows", Vector) = (0.0,0.0,0.0,0.0)
    _Midtones ("midtones", Vector) = (0.0,0.0,0.0,0.0)
    _Hilights ("hilights", Vector) = (0.0,0.0,0.0,0.0)
    _Amount ("amount mix", Range (0.0, 1.0)) = 1.0
}

SubShader
{
    Tags {"RenderType"="Transparent" "Queue"="Transparent"}
    Lighting Off

    Pass
    {
        ZWrite Off
        Cull Off
        Blend SrcAlpha OneMinusSrcAlpha

        CGPROGRAM
        #pragma vertex vert
        #pragma fragment frag
        #pragma fragmentoption ARB_precision_hint_fastest
        #include "UnityCG.cginc"

        sampler2D _MainTex;

        uniform float4 _Shadows;
        uniform float4 _Midtones;
        uniform float4 _Hilights;
        uniform float _Amount;

        uniform float pi = 3.14159265358979;            

        struct appdata
        {
            float4 vertex : POSITION;
            float2 texcoord : TEXCOORD0;
            float4 color : COLOR;
        };

        // vertex output
        struct vertdata
        {
            float4 pos : SV_POSITION;
            float2 texcoord : TEXCOORD0;
            float4 color : COLOR;
        };

        vertdata vert(appdata ad)
        {
            vertdata o;
            o.pos = mul(UNITY_MATRIX_MVP, ad.vertex);
            o.texcoord = ad.texcoord;
            o.color = ad.color;
            return o;
        }

        fixed4 frag(vertdata i) : COLOR
        {               
            float4 dst = tex2D(_MainTex, i.texcoord);
            float intensity = (dst.r + dst.g + dst.b) * 0.333333333;  

            // Exponencial Shadows
            float shadowsBleed = 1.0 - intensity;
            shadowsBleed *= shadowsBleed;
            shadowsBleed *= shadowsBleed;

            // Exponencial midtones
            float midtonesBleed = 1.0 - abs(-1.0 + intensity * 2.0);
            midtonesBleed *= midtonesBleed;
            midtonesBleed *= midtonesBleed;

            // Exponencial Hilights
            float hilightsBleed = intensity;
            hilightsBleed *= hilightsBleed;
            hilightsBleed *= hilightsBleed;

            float3 colorization = dst.rgb + _Shadows.rgb * shadowsBleed + 
                                            _Midtones.rgb * midtonesBleed +
                                            _Hilights.rgb * hilightsBleed;   

            dst.rgb = lerp(dst.rgb, colorization, _Amount);
            return dst;
        }
        ENDCG
        }
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T02:01:03.420

关于色彩平衡，更改红色/青色调整红色通道值，品红色/绿色调整绿色，黄色/蓝色调整蓝色。这解决了问题。
但是使用 Photoshop 中的保留亮度选项，我们必须保持一个像素的亮度恒定（原始像素和色彩平衡像素）。

我阅读了 Gimp 的源代码，它使用将新像素的 RGB 转换为 HSL，用旧像素的 L 值替换 L，然后将新的 HSL 转换回 RGB 来解决这个问题。这个 RGB 值在平衡颜色的同时保持像素的亮度。但是，当我在 GIMP 上测试时，使用“保留亮度”选项调整阴影和高光模式的颜色通道，这是错误的。

我很困惑如何确定阴影、中间色调或高光？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-08-31T22:26:00.077

**选择性颜色的奥秘**

红色是由洋红色、黄色和黑色（没有青色）组成的颜色。但是，如果您选择红色范围并减少青色，颜色会发生变化。

# gdb - GDB 硬件断点不适用于远程调试

> ID：11577139
> 
> 赞同：1
> 
> 时间：2012-07-20T10:01:35.803
> 
> 标签：gdb, arm, gdbserver

我使用 GDBServer 通过 ARM11 CPU 进行远程调试。软件断点运行良好，但我们使用“hbreak test.c:5”设置硬件断点，CPU 永远不会停止。

GDB 版本：7.3.1

目标CPU：ARM11

手术：

```
arm-linux-gdb ./main
(gdb) target remote 192.168.0.1:2345
(gdb) hbreak test.c:5   => HW breakpoint, it doesn't work. but if change to "b test.c:5", it will works
(gdb) c 
```

有人可以告诉我如何使用 GDB7.3.1 启用硬件调试吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T18:53:42.200

硬件断点只能由 JTAG 探针操作。GDB 不能访问它们，除非你有一个 JTAG 探针（我怀疑你有）连接到你的设备和一个软件胶水（例如 OpenOCD），允许 GDB 与 JTAG 探针通信。例如，在 pandaboard 上，TI 推荐使用这些 JTAG 探针：[http ://omapedia.org/wiki/PandaBoard_JTAG_Debugging](http://omapedia.org/wiki/PandaBoard_JTAG_Debugging)

# c# - 在 IE9 中通过表单提交发送输入类型文件不起作用？

> ID：11577140
> 
> 赞同：0
> 
> 时间：2012-07-20T10:01:36.573
> 
> 标签：c#, asp.net

我正在尝试按**文件类型 html input**上传文件。点击提交按钮后。响应到达 ASP.NET home.aspx 文件有以下 C# 代码编码..

```
string root = "C:\\uploaded\\";
root +=Request["fileName"];
var buffer = new byte[Request.Files[0].InputStream.Length];
Request.InputStream.Read(buffer, 0, buffer.Length);
System.IO.File.WriteAllBytes(root, buffer); 
```

上面的代码是在给定路径上创建文件但文件已损坏..如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T10:15:41.397

首先总是尝试使用 System.IO.Path 来玩文件路径。在您的示例中，使用 System.IO.Path.Combine 来组合根目录和文件名。这是提示，与您的问题无关。谈论你的问题用途

```
Request.Files[0].SaveAs(root); 
```

# android - 我想更改整个应用程序的主题

> ID：11577143
> 
> 赞同：3
> 
> 时间：2012-07-20T10:01:52.690
> 
> 标签：android, android-theme

我正在尝试在单击时更改我的应用程序的*主题。*`button`我`onClick()`在我的`Activity`.

我的代码：

```
public class Screen2 extends Activity{
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.secondscreen);
}

public void theme(View view){       
    getApplication().setTheme(android.R.style.Theme_Holo);
} 
```

它不起作用。你能帮我改变我的应用程序的主题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T10:14:09.733

[这](https://sites.google.com/site/ramkiranworks/customization/Themes.zip?attredirects=0&d=1)是更改主题的好教程`Button click`

还有[这里](http://www.therealjoshua.com/2012/01/styling-android-with-defaults/)是使用默认设置样式化 Android 的教程

# objective-c - 由 UIImage:resizableImageWithCapInsets 创建的崩溃释放图像

> ID：11577144
> 
> 赞同：0
> 
> 时间：2012-07-20T10:01:57.793
> 
> 标签：objective-c, ios, memory-management, retain

我最近刚开始使用 iOS 编程，并假设我理解了 Objective-C 引用计数，但似乎我没有......以下代码完全运行，但之后我的应用程序崩溃`EXC_BAD_ACCESS`（代码 1 或代码 2）。

**我没有使用 ARC（基于PhoneGap 的项目）。**

```
for(int i = 0; i < 10; ++i)
{
    UIImage *a = [UIImage imageNamed:@"NavigationBarBackButtonBlack.png"];
    UIImage *b = [a resizableImageWithCapInsets:UIEdgeInsetsMake(0, 13, 0, 7)];
    NSLog(@"a has %d retains, b has %d retains, a==b == %d\n", [a retainCount], [b retainCount], a==b ? 1 : 0);
    [a release];
    [b release];
    NSLog(@"#%d\n", i);
}
NSLog(@"FINISHED\n"); 
```

输出如我所料：

```
a has 1 retains, b has 1 retains, a==b == 0
#0
a has 1 retains, b has 1 retains, a==b == 0
#1
a has 1 retains, b has 1 retains, a==b == 0
[...snip...]
a has 1 retains, b has 1 retains, a==b == 0
#9
FINISHED 
```

这里有什么问题？是否有一些自动释放，或者加盖的图像是否保留对原始图像的引用？不知道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T10:03:49.537

`imageNamed`并且`resizableImageWithCapInsets`都返回自动释放的对象。您不应该手动释放它们。

换句话说：如果你没有`alloc`，`copy`或者`retain`它，你就不应该`release`它！

最后提示：忘记`retainCount`属性，它对你没用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T10:03:40.257

你不应该发布图像 a 和 b。这些图像是自动发布的。当您使用关键字`alloc`或时，您应该只执行您的对象的释放`new`。

这是Objective C中内存管理的相当不错的入门：

[http://interfacelab.com/objective-c-memory-management-for-lazy-people/](http://interfacelab.com/objective-c-memory-management-for-lazy-people/)

# github - 如何修复 Github 页面上的 HTTP 404？

> ID：11577147
> 
> 赞同：222
> 
> 时间：2012-07-20T10:02:05.730
> 
> 标签：github, github-pages

[这](https://github.com/roine/p1/tree/gh-pages)`gh-pages`是我在分支上的 GitHub 存储库。一切看起来都不错，我有我的`index.html`、我的 CSS、JS 和图片文件夹。

但是当我访问[http://roine.github.com/p1](http://roine.github.com/p1)时，我得到 HTTP 404 not found。

有什么解释和解决办法吗？

* * *

## 回答 #1

> 赞同：242
> 
> 时间：2017-08-27T17:51:04.663

我的所有文件只有一次提交。我推送了一个空提交，刷新了页面并且它起作用了。

```
git commit --allow-empty -m "Trigger rebuild"
git push 
```

如果这不起作用，正如@Hendrikto 在评论中指出的那样，请查看[Github 状态页面](https://www.githubstatus.com)并确保 GitHub Pages 是可操作的。

* * *

## 回答 #2

> 赞同：111
> 
> 时间：2018-04-26T03:31:32.857

我在[*My Fork*](https://github.com/chetabahana/chetabahana.github.io)上做了所有技巧[来](https://stackoverflow.com/questions/11577147/how-to-fix-page-404-on-github-page)修复[*Github Page*](https://chetabahana.github.io/)上的第 404 页，但它一直是 404。[](https://github.com/chetabahana/chetabahana.github.io)*[](https://chetabahana.github.io/)*

 **最后发现我的浏览器几乎没有保留[*10 分钟的缓存*](https://guides.github.com/features/pages/)，然后才在网络上运行。

只需添加`/index.html`到 URL 的末尾，它就会出现并解决了这个问题。

```
https://username.github.io/{repoName}/index.html 
```

* * *

## 回答 #3

> 赞同：104
> 
> 时间：2016-09-25T20:23:57.220

就我而言，我有名称以`_`(like `_css`and `_js`) 开头的文件夹，根据 Jekyll 处理规则，GH Pages 会忽略这些文件夹。如果你不使用 Jekyll，解决方法是`.nojekyll`在根目录下放置一个名为的文件。否则，您可以从这些文件夹中删除下划线

* * *

## 回答 #4

> 赞同：58
> 
> 时间：2012-12-11T02:27:26.497

四个月前，我联系了支持人员，他们告诉我这是他们方面的问题，他们暂时修复了它（针对当前提交）。

今天我又试了

1.  我删除了 github 上的 gh-pages 分支

    `git push origin --delete gh-pages`

2.  我删除了本地的 gh-pages 分支

    `git branch -D gh-pages`

3.  我重新初始化了 git

    `git init`

4.  我在本地重新创建了分支

    `git branch gh-pages`

5.  我将 gh-pages 分支推送到 github

    `git push origin gh-pages`

工作正常，我终于可以在页面上更新我的文件了。

* * *

## 回答 #5

> 赞同：44
> 
> 时间：2019-03-23T15:25:28.110

如果您还没有，请在 GitHub Pages 设置选项卡中选择 Jekyll 主题。显然[，即使您没有将 Jekyll](https://github.community/t5/GitHub-Pages/Github-Pages-are-not-published-after-following-the-documentation/td-p/18627)用于您的 Pages 站点，这也是必需的。

[![GitHub 设置截图](../Images/06743cd7676ce188e1e48fa0d780b659.png)](https://i.stack.imgur.com/E7emz.png)

* * *

## 回答 #6

> 赞同：23
> 
> 时间：2017-01-30T07:32:16.177

在与分支分叉后，我遇到了同样的问题`gh-pages`。我可以通过简单地将新的提交（只是空格`index.html`）推送到我的 fork`gh-pages`分支来修复。

* * *

## 回答 #7

> 赞同：20
> 
> 时间：2019-05-09T10:28:19.563

只需等待大约十分钟到一小时。如果还是不行，联系github。通常这是他们最后的问题。但是，如果您赶时间，可以尝试通过添加“？”来打开。URL 末尾的问号。它强制查询搜索资源。像这样：

[http://roine.github.com/p1?](http://roine.github.com/p1?)

* * *

## 回答 #8

> 赞同：20
> 
> 时间：2017-08-08T06:40:54.317

就我而言，2017 年**8 月 8 日**

1.  如果您的用户页面是[https://github.com/mgravell](https://github.com/mgravell)，那么您的仓库名称必须是 **mgravell.github.io**
2.  在root下，创建一个文件`index.html`

3.  在根目录下，创建一个文件夹`docs`， `CNAME`在下面创建一个文件`docs`（注意：**没有**像 .txt 这样的扩展名，请确保您的文件系统显示扩展名）

4.  `gh-pages`分支是可选的，`master`分支就足够了

**更多**：在这里查看官方文档：[https ://help.github.com/articles/configuring-a-publishing-source-for-github-pages/](https://help.github.com/articles/configuring-a-publishing-source-for-github-pages/)

* * *

## 回答 #9

> 赞同：16
> 
> 时间：2021-01-13T10:46:51.667

在我的情况下，浏览器有我的应用程序的**先前缓存版本**。为避免获取缓存版本，请使用随机查询字符串访问您的 url：

```
https://{{your-username}}.github.io/{{your-repository}}?randomquery 
```

* * *

## 回答 #10

> 赞同：13
> 
> 时间：2012-11-01T00:42:02.440

我的页面也保持 404'ing。联系了支持人员，他们指出 url 区分大小写；解决了我的问题。

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2017-09-09T19:03:08.037

在我的情况下，我必须去项目设置并启用 github 页面。默认关闭

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2020-05-21T10:04:03.577

在我的情况下，必须选择 gh-pages 分支：

[![在此处输入图像描述](../Images/881f28837272bea5b8de18ef388e657f.png)](https://i.stack.imgur.com/q1bpS.png)

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2018-01-19T15:47:34.707

**如果您看到 404 甚至一切正常，请尝试切换 https/http。**

原始问题的 url 错误，通常您可以检查 repo 设置并找到生成站点的正确 url。

但是我已经正确设置了所有内容，并且设置页面说它已发布，然后我仍然看到 404。

感谢@Rohit Suthar 的评论（尽管该评论是使用 https），我将 url 更改为 http 并且它有效，然后 https 也有效。

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2020-10-16T11:34:22.400

我遇到了同样的问题，在尝试了上面提到的大多数方法后，我无法得到解决方案。在我的情况下，由于 Github 将名称更改`master`为`main`分支的问题。

转到 Setting -> 转到 GitHub Pages 部分并将分支更改为 main：

[![在此处输入图像描述](../Images/8b1023abd2b0b82658d143e488cde172.png)](https://i.stack.imgur.com/MOpgX.png)

至

[![在此处输入图像描述](../Images/b74fe8cc20e45186ac11d543ec9bd9ab.png)](https://i.stack.imgur.com/aONOx.png)

保存并选择一个主题，网站就上线了。

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2019-05-11T17:48:35.127

在 index.html 文件的开头添加以下内容

```
<!DOCTYPE html> 
```

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2017-10-17T12:54:03.363

如果您确定您的结构是正确的，只需推送一个空提交或使用一些空间更新 index.html 文件，它就可以工作！

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2020-04-24T22:40:18.807

我对 typedocs 有这个确切的问题。README.md 有效，但没有显示由我的文档字符串生成的实际文档，我只是得到一个 404 Github Pages 屏幕。

要解决此问题，只需在 /docs 目录（或生成文档的任何位置）中放置一个空文件并调用它`.nojekyll`

为了确认，您的文件结构现在应该如下所示：

```
./docs/.nojekyll  # plus all your generated docs 
```

将此推送到您的远程 Github 存储库，您的链接等现在应该可以工作了。

还要确保您已在 Github 设置中选择：

```
Settings -> Github Pages -> Source -> master brach /docs folder 
```

根据您的文档框架，您可能必须在每次更新文档时重新创建此文件，这是使用 typedocs 并每次在 package.json 文件中创建 .nojekyll 文件的示例：

```
# package.json

      "scripts": {
        "typedoc": "typedoc --out docs src && touch docs/.nojekyll"
      }, 
```

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2021-02-10T10:46:51.560

我的解决方案是正确设置`homepage`in `package.json`。

我的项目名称是`monsters-rolodex`并且我正在从控制台发布`gh-pages -d build`。

`"homepage": "https://github.com/monsters-rolodex",`

> 该项目是在假设它托管在 /monsters-rolodex/ 的情况下构建的。

在它不起作用之前，因为在主页 url 中我包含了我的 github 用户名。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2020-05-05T02:20:57.783

出于某种原因，GitHub 页面的部署今天（2020 年 5 月 5 日）停止工作。以前我没有任何 html，只有 md 文件。我尝试创建一个 index.html 并立即发布该页面。删除 index.html 后，该出版物继续工作。

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2017-09-25T15:59:15.503

我通过删除计算机上的“username.github.io”文件夹再次执行这些步骤，包括更改 index/html 文件，从而使该站点正常工作。

我的错误（*我认为*）是我最初克隆了“ [https://github.com/username/username.github.io](https://github.com/username/username.github.io) **.git** ”而不是[https://github.com/username/username.github.io](https://github.com/username/username.github.io)（没有“ .git")

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2018-07-20T07:11:09.060

就我而言，上述所有建议都是正确的。我的大多数页面都在工作，除了少数返回 404 的页面，即使降价文件在那里并且它们看起来是正确的。以下是在这些页面上为我修复的内容：

*   在一个页面上，有一些特殊字符不属于其中`UTF-8`，我认为这就是 GitHub 页面无法呈现它们的原因。更新/删除这些字符并推送新的提交修复了它。
*   在另一个页面上，我发现`'`标题周围有撇号，我删除它们，页面内容开始显示正常

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2020-10-13T14:30:01.727

我正在关注[这个 YT 视频](https://youtu.be/F8s4Ng-re0E)。因此，当我在终端中运行命令时，它`gh-pages`已经将代码推送到分支。然后我推到了`master`树枝上。它给了我404错误。

然后我将分支交换到`master`然后再次恢复到`gh-pages`，现在错误消失了。它指向`index.html`即使它不在 URL 中。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2013-07-21T13:25:04.907

在此问题出现之前，我绑定了我的域。我提交并推送了分支 gh-pages，它解决了我的问题。新的提交迫使 jekyll 重建你的页面。

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2017-08-19T20:41:06.467

就我而言，URL 很长。所以，我想有一个限制。我把它放到我的自定义子域中并且它有效。

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2018-06-12T23:00:12.580

在私人仓库中，当我第一次添加并将我的 gh-pages 分支推送到 github 时，github 页面的设置会自动更改以指示 gh-pages 分支将被发布，但 github.io 没有绿色或蓝色条url 并且没有自定义域选项。

直到我将源切换为 master 并快速将源切换回 gh-pages，它才真正更新为包含已发布 url 的绿色条。

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2019-09-22T16:06:51.207

此错误的另一个变体：

在完成教程后，我设置了我的第一个 Github 页面，但给文件`readme.md`起了一个 - 从我的角度来看 - 更有意义的名称：**`welcome.md`**.

这是一个致命的错误：

> 如果您没有 `index.md`（或`index.html`），我们将使用您的 README 文件作为站点的索引，这与您浏览 GitHub 上的存储库时没有什么不同。

*来自[使用 GitHub Pages 发布，现在就像 1、2、3 一样简单](https://github.blog/2016-12-09-publishing-with-github-pages-now-as-easy-as-1-2-3/)*

然后，我可以使用/ /下指定的**`published at`链接**访问我的网站页面，然后使用.`Repository``Settings``GitHub Pages`**`welcome.html`****`welcome`**

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2019-06-11T20:45:16.483

我有同样的问题..非常奇怪的问题..我的 HTML**标题后有空格**

```
> <title>
> 
> <script> 
```

固定，删除空间后

```
> <title>
> <script> 
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2018-11-29T07:22:16.577

我也遇到了这个问题（404），根本原因是我的文件被命名为`INDEX.md`. 我在 Windows 上进行开发，并且我的本地 Jekyll 站点正常工作（因为 Windows 默认情况下不区分文件名大小写）。当推送到 Github 时，它不起作用。一旦我将其重命名为`INDEX.md`to `index.md`，一切都运行良好。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2020-11-03T05:04:16.583

我必须将我的 repo 重命名为一个随机名称，然后将其重命名为原始名称才能正常工作。

似乎它可能是一个 GH Pages 错误。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2018-11-30T02:32:45.213

还有一个场景：

*   使用具有名为的存储库的组织页面（不是项目页面）`<orgname>.github.io`
*   源文档作为`master`分支中的标记 (asciidoc)
*   Travis CI 提取源文档文件`master`并将生成的 html 文件推送到`gh-pages`分支

使用`gh-pages`生成的 html 页面更新分支。GitHub`Environment`选项卡提供了组织页面的链接。单击它会产生一个`404`.

根据 [https://help.github.com/articles/configuring-a-publishing-source-for-github-pages/](https://help.github.com/articles/configuring-a-publishing-source-for-github-pages/)

> 具有此类存储库名称的用户和组织页面仅从`master`分支发布

`gh-pages`如果我理解正确，如果您创建的是站点而不是站点，则不会从分支`User`发布`Organization`GitHub Pages `Project`。

我重命名了我的 repo 以使其成为`Project`站点而不是`Organization`站点，然后`gh-pages`分支按预期发布。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2019-08-20T15:41:14.783

此外，[GitHub 页面目前不支持 Git LFS](https://github.com/git-lfs/git-lfs/issues/791)。因此，如果您在使用 Git LFS 提交的 GitHub 页面中有图像（或其他二进制资产），您将得到 404 not found 这些文件。

这对于使用 Doxygen 或类似工具生成的文档非常常见。

在这种情况下，解决方案是简单地不使用 Git LFS 提交这些文件。

* * *

## 回答 #32

> 赞同：0
> 
> 时间：2019-11-29T00:21:11.383

我也遇到了这个问题，我的页面得到 404。然后我在我的存储库中添加了**README.md**，404 消失了。

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2019-09-17T19:07:21.970

就我而言，我的存储库是私有的。公开存储库并再次执行所有步骤。

* * *

## 回答 #34

> 赞同：0
> 
> 时间：2018-07-01T13:31:07.183

转到存储库的设置部分并在源部分选择主分支，然后在刷新页面后单击保存按钮，您将能够看到页面的链接！

* * *

## 回答 #35

> 赞同：0
> 
> 时间：2020-09-15T02:42:58.333

昨天我遇到了同样的问题（新设置的 GitHub pages 网站上的 404）。我尝试了很多方法，例如切换新主题等。但它似乎仍然不适用于我的情况。我终于通过将 GitHub pages 网站的分支切换到另一个分支来解决这个问题，点击保存。稍等片刻再切换回来。然后问题就突然解决了。

* * *

## 回答 #36

> 赞同：0
> 
> 时间：2021-12-06T08:35:56.750

我使用[umijs](https://umijs.org/config#base)将项目打包部署到github页面。以下操作帮助了我：

*   1.  在[第 13 行](https://github.com/niexq/dumi-template-simple/blob/main/.umirc.ts#L13)，添加 base: my-project-name;
*   2.  重新部署 gh-pages

一点猜测：github页面需要部署到非根目录

* * *

## 回答 #37

> 赞同：0
> 
> 时间：2021-12-06T10:26:16.677

以下操作帮助了我：

网络包构建：

Webpack output.publicPath

```
publicPath: './' 
```

vite 构建：

维生素基地

```
base: './' 
```**

# spring - 用于配置 DataSource 我们在哪里提供主机名、用户名、密码等详细信息

> ID：11577149
> 
> 赞同：0
> 
> 时间：2012-07-20T10:02:10.743
> 
> 标签：spring

为了配置数据源，我们在哪里提供主机名、用户名、密码等详细信息？
什么是 LocalSessionFactoryBean？它的用途是什么？JndiObjectFactoryBean 类从哪里获取数据库详细信息？任何人都可以详细解释它是如何工作的吗？
任何想法，资源，示例代码，链接，高度赞赏。提前致谢。

```
<bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean>   
<property name="jndiName"> <value>java:comp/env/jdbc/trainingDatasource</value> </property>   
</bean>   
<bean id="sessionFactory" class="org.springframework. orm.hibernate.LocalSessionFactoryBean"> <property name="dataSource"> <ref bean="dataSource"/> </property>   
</bean> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:57:49.530

看看这个链接。1\. [StackOverflow 链接](https://stackoverflow.com/questions/4699381/best-way-to-inject-hibernate-session-by-spring-3) 2\. [SpringByExample 链接](http://www.springbyexample.org/examples/simple-hibernate-xml-config.html) 3.[博客链接](http://snehaprashant.blogspot.in/2009/05/integrating-hibernate-with-spring.html)

LocalSessionFactoryBean：创建 Hibernate SessionFactory 的 FactoryBean。这是在 Spring 应用程序上下文中设置共享 Hibernate SessionFactory 的常用方法；然后可以通过依赖注入将 SessionFactory 传递给基于 Hibernate 的 DAO。

希望这会帮助你。

# android - 更改 GridView 的行为以使其水平滚动而不是垂直滚动

> ID：11577153
> 
> 赞同：5
> 
> 时间：2012-07-20T10:02:30.747
> 
> 标签：android, android-listview, android-view, android-custom-view, android-gridview

我想制作一个`UI`像 a 这样的元素`GridView`，我希望它具有完整的功能，但希望它可以水平滚动而不是垂直滚动。

通过水平滚动，我的意思是它应该以这种方式构建，而不是放在`HorizontalScrollView`.

我`Custom GridView`将有固定数量的`rows`发言权`4-5`，并且`columns`应该`extensible`基于`Adapter`. 您可以将其视为与本机`GridView`所做的相反，但它应该保持功能。

我看过`GridView`谷歌如何实现a的源代码，但我能理解的很少，`View`从头开始似乎不是一个好主意，因为我怕我无法做到以 Google 的方式公平对待内存优化。

我观察到`GridView`extends `AbsListView`，所以我的问题是，它`AbsListView`是允许`GridView`垂直滚动并从适配器添加项目，还是`GridView`增加垂直滚动能力？我应该调整`GridView`还是`AbsListView`？

知道是否有一些东西已经做了我想做的事情会更好吗？

这已经在 Android Honeycomb 3.1 及更高版本的原生 Gallery 和 YouTube 应用程序中实现。所以如果有人有想法，请详细说明。

**Honeycomb Gallery 应用程序的快照：**

![在此处输入图像描述](../Images/a553d567c450241f538f22aa0edcf06f.png)

**Honeycomb YouTube 应用程序的快照：**

![在此处输入图像描述](../Images/131290e62a8b6c58cca921479257ed11.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-23T10:45:20.127

API 11 中有`setRotation`。您必须将 gridview 旋转 90 度，将子视图旋转 -90 度。

文档： http: [//developer.android.com/reference/android/view/View.html#setRotation](http://developer.android.com/reference/android/view/View.html#setRotation(float) (float )

## 更新：

要在视图上获得 3d 效果，遵循 API 会很有用

[setCameraDistance(float)](http://developer.android.com/reference/android/view/View.html#setCameraDistance%28float%29) - 设置 z 轴距离（深度）

[setRotationX(float)](http://developer.android.com/reference/android/view/View.html#setRotationX%28float%29) - 设置水平轴角度

[setRotationY(float)](http://developer.android.com/reference/android/view/View.html#setRotationY%28float%29) - 设置垂直轴角度

将相机距离设置为屏幕高度的一半。然后根据视图在屏幕上的位置设置rotationX。从左到右的旋转角度应该类似于 (20, 10, 0, -10, -20)。稍后您可以使用旋转角度来获得一些高度感知。

`GridView`在扩展的覆盖`layout`方法中进行所有设置。

```
@override
void layout(int t, int l, int r, int b) {
    super.layout(t, l, r, b);
    ...
    int columnStart = getFirstVisiblePosition()/no_of_columns;
    int columnEnd = getLastVisiblePosition()/no_of_columns;

    loop from 'columnStart' to 'columnEnd' 'no_of_colmns' times {
        // set the camera distance and rotationX to views
        // depending on the position of a view on screen.
    }
} 
```

# android - 我们的 3d 动态壁纸在 Galaxy s2 上运行良好，但在 Galaxy s3 上崩溃（包括日志）

> ID：11577154
> 
> 赞同：1
> 
> 时间：2012-07-20T10:02:36.343
> 
> 标签：android, 3d, wallpaper

我们已经开发了几个基于 Gl ES 1的**3D 动态壁纸已经在 Google Play 上，****一切都很好，直到全新的 Galaxy SIII 发布**。

我们的壁纸在所有设备（包括所有 Galaxy 系列）上的 Android 2、3、4 上运行良好。和银河 S2

除了 Galaxy sIII。 **它只是在启动时崩溃**。那么 Galaxy s2 和 s3 有什么区别呢？**为什么在 s2 (android 4.0.3) 上工作而在 s3 (android 4.0.4) 上崩溃**

这是日志（apkname 是 turtleisle）：

07-20 09:07:08.075 D/KeyguardViewMediator（2094）：setHidden false

07-20 09:07:08.090 D/dalvikvm(7968): 试图加载 lib/data/data/com.hotpies.turtleisle/lib/libgdx.so 0x418f0bf0

07-20 09:07:08.090 D/KeyguardViewMediator（2094）：setHidden false

07-20 09:07:08.100 D/dalvikvm（7968）：添加共享库/data/data/com.hotpies.turtleisle/lib/libgdx.so 0x418f0bf0

07-20 09:07:08.100 D/dalvikvm（7968）：在 /data/data/com.hotpies.turtleisle/lib/libgdx.so 0x418f0bf0 中找不到 JNI_OnLoad，跳过初始化

07-20 09:07:08.105 D/KeyguardViewMediator（2094）：setHidden false

……

07-20 09:07:20.005 I/ActivityManager(2094): 进程 com.hotpies.turtleisle (pid 7968) 已经死亡。

07-20 09:07:20.005 I/WindowManager(2094): WIN DEATH: Window{429f06f0 XXX.XXXXXXX.XXXXXXXXXX.XXXXXXXXXXXXXXXX paused=false}

07-20 09:07:20.005 W/ActivityManager（2094）：计划在 5000 毫秒内重新启动崩溃的服务 com.hotpies.turtleisle/.WallpaperService

07-20 09:07:20.010 W/LiveWallpaperPreview（7950）：壁纸服务消失：ComponentInfo{com.hotpies.turtleisle/com.hotpies.turtleisle.WallpaperService

谢谢！！

# magento - Magento：在结构块“内容”的末尾添加内容块

> ID：11577155
> 
> 赞同：8
> 
> 时间：2012-07-20T10:02:38.737
> 
> 标签：magento, magento-1.7

我正在尝试向 Magento 添加一个内容块，它应该在主要内容下方的每一侧都可见。我想用一个自定义扩展来存档它，所以我可以复制这个扩展，它可以在不触及核心设计文件的情况下工作。我的扩展包括以下布局更新：

```
<default>
    <reference name="content">
        <block type="mymod/blockname" name="myblockname" after="-" template="mymod/block.phtml"/>
    </reference>
</default> 
```

我的问题是，该属性`after="-"`不起作用。该块始终显示在内容块的顶部。似乎`before`并`after`没有任何后果。如果我将块移动到页脚，属性`before`和`after`工作正常。

如何将我的块放在块“内容”的底部

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-22T09:17:55.220

据我所知，问题在于您在“默认”布局句柄中指定了您的块，而“内容”块中的大部分内容是由稍后应用的其他布局句柄添加的。这就是为什么在您的 XML 注册文件中添加的依赖项（Fabian 提到）没有帮助。

请根据您的需要考虑这两个选项：

## 1.如果您真的想在所有前端页面上包含您的块

在您的 XML 布局文件（local.xml 或自定义文件）中，**添加一个新的布局句柄**：

```
<?xml version="1.0" encoding="UTF-8"?>
<layout version="0.1.0">

    <!-- your other adjustments for default, category_product_view and so on go here -->

    <add_my_block>
        <reference name="content">
            <block type="mymod/blockname" name="myblockname" after="-" template="mymod/block.phtml"/>
        </reference>
    </add_my_block>
</layout> 
```

现在您**创建一个事件观察**器来将您的布局句柄注入到您的布局中：

```
 <?php

    class YourCompany_YourExtension_Model_Observer
    {
        /**
         * Adds a block at the end of the content block.
         * 
         * Uses the event 'controller_action_layout_load_before'.
         * 
         * @param Varien_Event_Observer $observer
         * @return YourCompany_YourExtension_Model_Observer
         */
        public function addBlockAtEndOfMainContent(Varien_Event_Observer $observer)
        {
            $layout = $observer->getEvent()->getLayout()->getUpdate();
            $layout->addHandle('add_my_block');
            return $this;
        }
    } 
```

然后在您的 XML 扩展配置文件 (config.xml) 中**注册事件观察器：**

```
<?xml version="1.0" encoding="UTF-8" ?>
<config>
    <modules>
        <YourCompany_YourExtension>
            <version>0.0.1</version>
        </YourCompany_YourExtension>
    </modules>

    <frontend>
        <events>
            <controller_action_layout_load_before>
                <observers>
                    <mymod_add_block_at_end_of_main_content>
                        <type>singleton</type>
                        <class>mymod/observer</class>
                        <method>addBlockAtEndOfMainContent</method>
                    </mymod_add_block_at_end_of_main_content>
                </observers>
            </controller_action_layout_load_before>
        </events>
        <!-- declaring your layout xml etc. -->
    </frontend>

    <global>
        <!-- declaring your block classes etc. -->
        <models>
            <mymod>
                <class>YourCompany_YourExtension_Model</class>
            </mymod>
        </models>
    </global>
</config> 
```

现在你的块应该在其他块之下。我成功地测试了主页、客户登录页面和类别视图页面。如果您必须在几个页面上排除您的块，您可以检查您的事件观察器是否应该在该特定页面上排除该块。

## 2.如果您只想在某些页面上包含您的块

**就像我们之前所做的那样，向您的 XML 布局文件**添加一个布局句柄，但不是创建和注册事件观察者，而是****告诉您的 XML 布局文件**在某些​​区域使用自定义布局句柄：**

 **```
<?xml version="1.0" encoding="UTF-8"?>
<layout version="0.1.0">

    <catalog_category_default>
        <update handle="add_my_block" />
    </catalog_category_default>

    <catalog_category_layered>
        <update handle="add_my_block" />
    </catalog_category_layered>

    <cms_page>
        <update handle="add_my_block" />
    </cms_page>

    <!-- and so on -->

    <add_my_block>
        <reference name="content">
            <block type="mymod/blockname" name="myblockname" after="-" template="mymod/block.phtml"/>
        </reference>
    </add_my_block>

</layout> 
```**

# excel - 如何让 VBA excel 插件 .xlam 用远程更新的 .xlam 替换自己？

> ID：11577158
> 
> 赞同：3
> 
> 时间：2012-07-20T10:02:47.753
> 
> 标签：excel, vba

我需要一些方法来更新我的员工之间共享的 excel 插件，这样每个人都不必手动下载和安装它。

我用谷歌搜索，发现我们可以将文件写入操作系统文件系统，因此任务最终以编写新版本插件（即 .xlam 文件）来覆盖自身。

我不知道该怎么做。如果你有，请分享！谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T10:28:45.190

我不知道是否有一种不那么粗糙的方法，但我已经“破解”了一个涉及`SendKeys`. 呸，我知道。希望其他人会有更好的解决方案。

我记得，您需要先卸载插件，然后才能覆盖 .xla(m) 文件，而我找不到纯粹使用内置对象的方法。

下面的代码基本上卸载了加载项，调用“加载项”对话框并用于`SendKeys`将其从列表中删除，然后再复制新文件并重新安装加载项。

根据您的情况对其进行修改 - 当然，这取决于您的用户的安全设置是否足够低以使其运行。

```
Sub UpdateAddIn()          
    Dim fs As Object
    Dim Profile As String

    If Workbooks.Count = 0 Then Workbooks.Add
    Profile = Environ("userprofile")
    Set fs = CreateObject("Scripting.FileSystemObject")
    AddIns("MyAddIn").Installed = False
    Call ClearAddinList
    fs.CopyFile "\\SourceOfLatestAddIn\MyAddIn.xla", Profile & "\Application Data\Microsoft\AddIns\", True
    AddIns.Add Profile & "\Application Data\Microsoft\AddIns\MyAddIn.xla"
    AddIns("MyAddIn").Installed = True
End Sub

Sub ClearAddinList()        
    Dim MyCount As Long
    Dim GoUpandDown As String

    'Turn display alerts off so user is not prompted to remove Addin from list
    Application.DisplayAlerts = False
    Application.ScreenUpdating = False

    Do
        'Get Count of all AddIns
        MyCount = Application.AddIns.Count    

        'Create string for SendKeys that will move up & down AddIn Manager List
        'Any invalid AddIn listed will be removed
        GoUpandDown = "{Up " & MyCount & "}{DOWN " & MyCount & "}"    
        Application.SendKeys GoUpandDown & "~", False
        Application.Dialogs(xlDialogAddinManager).Show    
    Loop While MyCount <> Application.AddIns.Count    

    Application.DisplayAlerts = True
    Application.ScreenUpdating = True    
End Sub 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T11:15:40.043

我使用一个还原插件管理器来做到这一点：基本上它是一个小的 xla/xlam，它永远不会改变安装在每个用户机器上的那个。它检查网络共享中最新版本的真实插件并将其打开，就好像它是一个普通的工作簿一样：这具有为用户加载真实插件的效果。

有一个可下载的工作示例，您可以[在此处自定义](http://www.decisionmodels.com/downloads.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-02T12:25:43.053

另一种选择，这就是我所做的。

关键点。插件版本是“某个数字”，文件名始终相同。必须知道安装目录

当被问到时，当前插件会查看是否有新版本可用。我通过一个系统来执行此操作，该系统在“更新”的文件名中具有版本号，并且在代码中具有作为 const 的版本号。

确定我可以更新后，我去获取更新“包”——在我的情况下，我使用的是安装程序和一个小的 vb.net 应用程序。如果你不能这样做，那么你可能想要启动一个 PPT 或 word 文件，然后使用它来完成安装。

接下来关闭自己，或要求用户关闭 Excel。

现在我们需要做的就是用相同的文件名将新插件保存在旧插件上。

告诉用户它已更新，他们应该重新打开 Excel，关闭安装程序。

这对我来说效果很好 - 尽管您需要记住编号系统、文件名以及该代码的工作方式。

以下是代码有点混乱的主要内容，但可能会对您有所帮助。

```
Private Sub CommandButton1_Click()
    Dim RetVal As Long
    MsgBox "To install the update, follow the installer programes directions." & vbNewLine & vbNewLine & _
           "You will need to then closed down and restart Excel.", vbInformation + vbOKOnly, "::::UPDATE TRS:::::"
    RetVal = Shell(gsDataBase1 & "\" & gsUpdatefolder & "\" & GetUpdateFileName(), 1)
    ThisWorkbook.Close
    Unload Me
End Sub

Private Sub CommandButton2_Click()
    gbInUpdate = False
    Unload Me
End Sub

Private Sub UserForm_Initialize()
    Me.lbNew = GetServerVersion2
    Me.lbCurrent.Caption = gcVersionNumber
    'CheckVersionNumbers
End Sub

'''This method might be better, but is quite slow.
Public Sub GetServerVersion()
    Set objshell = CreateObject("Shell.Application")
    Set objFolder = objshell.Namespace(gsDataBase1 & "\" & gsUpdatefolder)
    For Each strFileName In objFolder.Items
        Me.lbNew.Caption = objFolder.GetDetailsOf(strFileName, 11)
    Next
    Set objshell = Nothing
End Sub

Public Function IsNewer() As Boolean
    Dim curVer As Long
    Dim newVer As Long
    On Error GoTo Catch
    curVer = CLng(Left(Replace(Me.lbCurrent, ".", ""), 2))
    newVer = CLng(Left(Replace(Me.lbNew, ".", ""), 2))
    If curVer < newVer Then
        IsNewer = True
    Else
        IsNewer = False
    End If
    Exit Function
Catch:
    IsNewer = False
End Function

Private Function GetServerVersion2() As String
    On Error GoTo LEH
    Dim strDocPath As String
    Dim strCurrentFile As String
    strDocPath = gsDataBase1 & "\" & gsUpdatefolder & "\"
    strCurrentFile = Dir(strDocPath & "*.*")
    'gets last file - randomly? should onl;y be one anyway!
    'Do While strCurrentFile <> ""
    GetServerVersion2 = Right(strCurrentFile, 11)
    GetServerVersion2 = Left(GetServerVersion2, 7)
    'Loop
    Exit Function
LEH:
    GetServerVersion2 = "0.Error"
End Function

'Basiclly a coop of GetSeverVerion, but just get the file name so the exe can be called by the shell operation under the update button
''seems clumbys, but works!
Private Function GetUpdateFileName() As String
    On Error GoTo LEH
    Dim strDocPath As String
    Dim strCurrentFile As String
    strDocPath = gsDataBase1 & "\" & gsUpdatefolder & "\"
    GetUpdateFileName = Dir(strDocPath & "*.*")
    Exit Function
LEH:
    GetUpdateFileName = "0.Error"
End Function 
```

# django-templates - 如何将循环应用于此 div

> ID：11577168
> 
> 赞同：0
> 
> 时间：2012-07-20T10:03:37.590
> 
> 标签：django-templates

由于django模板中没有模数（％）所以如何在此应用循环

```
{% for story in data %}
   {{forloop.counter}} 
```

当 forloop.counter%4==1 那么这应该被执行

```
 <div class="thumb">
    <a href="#"><img src="{{ STATIC_URL }}images/thumb.jpg" width="185" height="185" /></a>
    </div>
    <div class="thumbFooter">
    <span class="view">
    <a href="#" class="viewIcon">{{ story.views }}</a>
    </span>
    <span class="like">
    <a href="#" class="likeIcon">{{ story.likes }}</a>
    </span>
    </div>

    </li> 
```

当 forloop.counter%4==2 或 3 那么这个

*   应该被执行

    ```
     <li>
        <div class="thumb">
        <a href="#"><img src="{{ STATIC_URL }}images/thumb.jpg" width="185" height="185" /></a>
        </div>
        <div class="thumbFooter">
        <span class="view">
        <a href="#" class="viewIcon">{{ story.views }}</a>
        </span>
        <span class="like">
        <a href="#" class="likeIcon">{{ story.likes }}</a>
        </span>
        </div>
        </li> 
    ```

    当 forloop.counter%4==0 的 for 循环时，应该执行

    ```
     <li class="omega">
        <div class="thumb">
        <a href="#"><img src="{{ STATIC_URL }}images/thumb.jpg" width="185" height="185" /></a>
        </div>
        <div class="thumbFooter">
        <span class="view">
        <a href="#" class="viewIcon">{{ story.views }}</a>
        </span>
        <span class="like">
        <a href="#" class="likeIcon">{{ story.likes }}</a>
        </span>
        </div>
        </li>

        <div class="clear"></div>

       {% endfor %} 
    ```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T10:18:04.503

**您可以构建自己的自定义过滤器**

在 Django 的 templatetags 目录中，添加一个名为“mod.py”的文件。在该文件中添加以下代码：

```
from django import template
register = template.Library()

def mod(value, arg):
    if value % arg == 0:
        return True
    else:
        return False

register.filter('mod', mod) 
```

在您的模板中使用 mod 过滤器，如下所示：

```
...
{% load mod %}
...
<tr bgcolor="{% if forloop.counter|mod:2 %}#cccccc{% else %}#ffffff">
... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T10:18:56.620

我想你想`class='omega'`在每 4`li`天`forloop`。这样在模板中使用django [Cycle ，](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#cycle)

```
{% for story in data %}
  <li {% cycle '' '' '' 'class="omega"' %}>
    <div class="thumb">
    <a href="#"><img src="{{ STATIC_URL }}images/thumb.jpg" width="185" height="185" /></a>
    </div>
    <div class="thumbFooter">
    <span class="view">
    <a href="#" class="viewIcon">{{ story.views }}</a>
    </span>
    <span class="like">
    <a href="#" class="likeIcon">{{ story.likes }}</a>
    </span>
    </div>
  </li>

    {% cycle '' '' '' '<div class="clear"></div>' %}

{% endfor %} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T17:49:14.363

或者您可以使用[divisibleby](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#divisibleby)过滤器。您还可以使用[添加](https://docs.djangoproject.com/en/1.3/ref/templates/builtins/#add)过滤器来调整您的所有条件：

> 当 forloop.counter%4==1 那么这应该被执行

```
{% if forloop.counter|add:"-1"|divisibleby:"4" %} 
```

> 当 forloop.counter%4==2 或 3 那么这个

```
{% if forloop.counter|add:"-2"|divisibleby:"4" or forloop.counter|add:"-3"|divisibleby:"4" %} 
```

并且不使用`add`可被 4 整除的那些：

> 当 forloop.counter%4==0 的 for 循环时，应该执行

```
{% if forloop.counter|divisibleby:"4" %} 
```

# sql - 在带有分区的表上导入表失败（ORA-00959：表空间“USR”不存在）

> ID：11577171
> 
> 赞同：0
> 
> 时间：2012-07-20T10:03:41.987
> 
> 标签：sql, oracle

> **可能重复：**
> [oracle 导入错误](https://stackoverflow.com/questions/10892847/oracle-import-error)

我正在尝试将两个表从一个数据库导出到另一个：

这是代码：

```
echo  "Exporting TMP_OA_PSTN_CMP_11035 and  table from SF-PSTN " | tee -a $sqllog
echo "Do you wish to continue (Y/N): " | tee -a $sqllog
read choice1
if [ "${choice1}" = "Y" ];
then
exp ${SF_PSTN_CONN_STRING} tables=TMP_OA_PSTN_CMP_11035 TMP_ORDER_ACTION_PSTN_11035 file=COMPLETE_OPEN_ORDERS_11035.dmp indexes=y  grants=no log=COMPLETE_OPEN_ORDERS_11035.log
else
echo "Exiting solution";
exit ;
fi

echo "Now We are importing TMP_OA_PSTN_CMP_11035 table in Router" | tee -a $sqllog

echo "Importing TMP_OA_PSTN_CMP_11035 table in SF-BIGPOND " | tee -a $sqllog
echo "Do you wish to continue (Y/N): " | tee -a $sqllog
read choice1
if [ "${choice1}" = "Y" ];
then
imp ${ROUTER_CONN_STRING} file=COMPLETE_OPEN_ORDERS_11035.dmp full=y indexes=y grants=n ignore=y log=COMPLETE_OPEN_ORDERS_11035_import.log
else
echo "Exiting solution";
exit ;
fi 
```

其中一张表已成功导入（TMP_ORDER_ACTION_PSTN_11035），但另一张未成功导入。错误是：

```
Connected to: Oracle Database 10g Enterprise Edition Release 10.2.0.3.0 - 64bit 
Production
With the Partitioning and Data Mining options
Export done in US7ASCII character set and AL16UTF16 NCHAR character set
server uses AL32UTF8 character set (possible charset conversion)
Note: grants on tables/views/sequences/roles will not be exported

About to export specified tables via Conventional Path ...
. . exporting table          TMP_OA_PSTN_CMP_11035
. . exporting partition                             P1          0 rows exported
. . exporting partition                             P2          0 rows exported
. . exporting partition                             P3          0 rows exported
. . exporting partition                             P4          1 rows exported
. . exporting partition                             P5          1 rows exported
. . exporting partition                             P6          0 rows exported
. . exporting partition                             P7          0 rows exported
. . exporting partition                             P8          0 rows exported
. . exporting partition                             P9          0 rows exported
. . exporting partition                            P10          0 rows exported
. . exporting table    TMP_ORDER_ACTION_PSTN_11035          4 rows exported
Export terminated successfully without warnings.
Now We are importing TMP_AXIS_COMPLETE_NOTIF table in Router
Importing TMP_AXIS_COMPLETE_NOTIF table in SF-BIGPOND
Do you wish to continue (Y/N):
Y

Import: Release 10.2.0.3.0 - Production on Fri Jul 20 15:20:08 2012

Copyright (c) 1982, 2005, Oracle.  All rights reserved.

Connected to: Oracle Database 10g Enterprise Edition Release 10.2.0.3.0 - 64bit Production
With the Partitioning, OLAP and Data Mining options

Export file created by EXPORT:V10.02.01 via conventional path

Warning: the objects were exported by CRAMER, not by you

import done in US7ASCII character set and AL16UTF16 NCHAR character set
import server uses WE8ISO8859P1 character set (possible charset conversion)
. importing CRAMER's objects into SA
. importing CRAMER's objects into SA
IMP-00017: following statement failed with ORACLE error 959:
 "CREATE TABLE "TMP_OA_PSTN_CMP_11035" ("ACTION_OBJID" VARCHAR2(12), "CONTRAC"
 "T_OBJID" VARCHAR2(12), "STATUS" VARCHAR2(40), "UPDATE_DATE" DATE)  PCTFREE "
 "10 PCTUSED 40 INITRANS 1 MAXTRANS 255 TABLESPACE "USR" LOGGING PARTITION BY"
 " HASH ("ACTION_OBJID" )  (PARTITION "P1"  TABLESPACE "USR", PARTITION "P2" "
 " TABLESPACE "USR", PARTITION "P3"  TABLESPACE "USR", PARTITION "P4"  TABLES"
 "PACE "USR", PARTITION "P5"  TABLESPACE "USR", PARTITION "P6"  TABLESPACE "U"
 "SR", PARTITION "P7"  TABLESPACE "USR", PARTITION "P8"  TABLESPACE "USR", PA"
 "RTITION "P9"  TABLESPACE "USR", PARTITION "P10"  TABLESPACE "USR" )"
IMP-00003: ORACLE error 959 encountered
ORA-00959: tablespace 'USR' does not exist
. . importing table  "TMP_ORDER_ACTION_PSTN_11035"          4 rows imported
Import terminated successfully with warnings. 
```

是因为表 TMP_OA_PSTN_CMP_11035 包含分区吗？请帮助解决这个问题。

# windows - 如何创建只能访问一个给定文件夹的用户？

> ID：11577173
> 
> 赞同：1
> 
> 时间：2012-07-20T10:03:47.663
> 
> 标签：windows, policy

我需要制作“沙盒”来运行脚本和应用程序（PHP、Perl、exe 文件、Ruby 等）。但是解释器需要可以运行，并且只有一个文件夹可以访问以进行更改。此外，允许在硬盘驱动器上使用配额启动应用程序也很棒。在这种情况下我需要使用什么？

我需要 C# 中的解决方案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T10:14:09.017

您可以设置 windows 安全性以允许此操作，选择您希望用户访问的文件夹并设置其权限（右键单击、属性、安全性）。这种方法的问题是，如果您不希望用户使用它们（即每个人和用户访问），您需要找到所有其他文件夹并撤销对它们的访问。

或者看看你需要的[WinJail](http://www.winquota.com/wj/faq.html)包。（Windows 的 CHROOT/JAIL 实施）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T10:31:28.520

您可能需要创建某种虚拟驱动器。看看这个 [创建虚拟硬盘驱动器](https://stackoverflow.com/questions/3753758/creating-virtual-hard-drive) 和一个 csharp 库来玩虚拟驱动器 [http://dokan-dev.net/en/](http://dokan-dev.net/en/) 希望这有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T05:45:25.387

您可以在所有文件操作上设置文件系统过滤器并以这种方式控制它们，但如此宽的过滤器会显着减慢操作，尤其是在用户模式下（通过回调）进行检查时。您可以测试我们的[CallbackFilter](http://www.eldos.com/cbflt/)产品，它可以让您在 C# 中执行上述操作，但要为速度慢做好准备。

# vb.net - 在 vb.net 中创建垂直进度条

> ID：11577177
> 
> 赞同：1
> 
> 时间：2012-07-20T10:03:58.307
> 
> 标签：vb.net, visual-studio-2010, progress-bar, orientation

我正在尝试找到一种在 VB.NET Windows 应用程序中创建垂直进度条的方法。我看到了[这篇文章](https://stackoverflow.com/questions/1285966/vertical-progress-bar)，但它是用 C# 编写的，因此对我没有太大帮助。任何人都可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T10:23:27.067

为什么 C# 答案对您没有帮助？我通过[代码转换器](http://converter.telerik.com/)运行它，它立即工作：

```
Public Class VerticalProgressBar
    Inherits ProgressBar
    Protected Overrides ReadOnly Property CreateParams() As CreateParams
        Get
            Dim cp As CreateParams = MyBase.CreateParams
            cp.Style = cp.Style Or &H4
            Return cp
        End Get
    End Property
End Class 
```

**编辑**
虽然您应该为 (PBS_VERTICAL) 样式值 (&H4) 真正定义一个公共常量，而不是在这样的代码中使用幻数。

# ios - 从单视图 ios 创建一个吐视图应用程序

> ID：11577178
> 
> 赞同：1
> 
> 时间：2012-07-20T10:04:09.860
> 
> 标签：ios, ipad

我在将单个视图样式应用程序更改为拆分视图样式应用程序时遇到了麻烦。

我已经做到了，所以我将详细视图设置为正确的视图控制器，但不知道如何为主视图设置表格视图。我在情节提要之外将表格视图创建为自己的文件，但我不知道如何将其添加到主视图中。

另外我应该如何在我的代码中将两者链接在一起？表视图显示在应用程序的单个视图版本中，并在选择单元格时调用视图控制器的方法。我将如何实现代码来绑定它们？

对不起，如果这看起来很无聊，但这是我的第一个应用程序，还在学习。

# r - 当另一列等于特定值时计算一列值的百分比

> ID：11577182
> 
> 赞同：-1
> 
> 时间：2012-07-20T10:04:14.967
> 
> 标签：r, dataframe, percentage

```
df <- data.frame(dive=factor(sample(c("dive1","dive2", "dive3"),20,replace=TRUE)),speed=runif(20))
> df
    dive      speed   Drift
1  dive1 0.80668490    TRUE
2  dive1 0.53349584    FALSE
3  dive2 0.07571784    TRUE
4  dive2 0.39518628    TRUE
5  dive1 0.84557955    TRUE
6  dive1 0.69121443    FALSE
7  dive1 0.38124950    TRUE
8  dive2 0.22536126    FALSE
9  dive1 0.04704750    FALSE
10 dive2 0.93561651    TRUE 
```

假设我有一个这种形式的数据框，其中第三列名为“Drift”，其中行值为“TRUE”或“FALSE”。当“潜水”等于特定值时，我将如何计算等于 TRUE 的行的百分比。即当潜水==1 时，“漂移”列的“真”百分比是多少？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T10:18:23.187

你可以试试：

```
df$Drift <- c(T,F)
sapply(split(df, df$dive), function(x) sum(x$Drift) / nrow(x) * 100 ) 
   dive1    dive2    dive3 
57.14286 42.85714 50.00000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T10:13:50.660

尝试

```
set.seed(1)
df$Drift<-sample(c(T,F),20,replace=T)

sapply(split(df,df$dive),function(x){mean(x$Drift)})

> sapply(split(df,df$dive),function(x){mean(x$Drift)})
    dive1     dive2     dive3 
0.0000000 0.7500000 0.2727273 
```

如果你想要百分比，将平均值乘以 100

# ios - 如何向 nsdictionary 添加 id 和选择器？

> ID：11577187
> 
> 赞同：1
> 
> 时间：2012-07-20T10:04:46.130
> 
> 标签：ios

如何向 nsdictionary 添加 id 和选择器？这些不起作用：

```
id target = mainTarget;
    SEL selector=mainSelector;
    NSDictionary *tAndS=[[NSDictionary alloc]initWithObjectsAndKeys:target,@"target",selector,@"selector", nil]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T10:16:09.583

[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsdictionary_Class/Reference/Reference.html)说：

> 一般来说，一个键可以是任何对象（只要它符合 NSCopying 协议——见下文）

选择器不符合 NSCopying，但您*可以*将其转换为字符串（符合协议）：

```
NSString* sel = NSStringFromSelector(@selector(hello:)); 
```

`id`没有什么不同。如果您的对象符合，`NSCopying`那么您就可以开始了。如果没有，您将不得不将其包装在可以执行的操作中，例如`NSData`或只是实现`NSCopying`（后者将是“最干净的”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T10:09:18.950

尝试像这样使用 NSMutableDictionary

```
NSMutableDictionary *tAndS = [[NSMutableDictionary alloc]init];
[tAndS setObject:target forKey:selector]; 
```

# function - 如何将 select * 包含到 Oracle 程序中？

> ID：11577196
> 
> 赞同：0
> 
> 时间：2012-07-20T10:05:36.440
> 
> 标签：function, select, stored-procedures, plsql, oracle10g

可能是愚蠢的话题，但是......我有一个选择内容的函数，并希望将其编译为存储过程：

```
CREATE OR REPLACE PROCEDURE PDATA.FILE_PARALLEL_DUMP
IS
BEGIN

SELECT * FROM TABLE
            (parallel_dump
                (
                CURSOR(
                SELECT 
                to_clob(B1)||to_clob(B2)||to_clob(B3)||to_clob(B4) AS cvs  
FROM 
(select 
(A1...A839) as B4 from 
  PDATA.FILE_TAB) s),
                'PR',
                'TEST_FOLDER'
                )
            ) nt;

END EXT_FILE_PARALLEL_DUMP;
/ 
```

但是在编译过程中我收到了一个错误：`PLS-00428: an INTO clause is expected in this SELECT statement`.

我知道存储过程中选择的结构应该是这样的`"select A1, A2 into p_a1, a_A2 from..."`，但是在下面的情况下（使用函数）我不知道如何编写正确的代码。你能帮帮我吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:05:45.723

在 PL/SQL 中，SELECT 的结果需要去某个地方。您可以创建一个循环：

```
FOR r IN (SELECT ... your query ) LOOP
   -- do something with the row r
END LOOP; 
```

或者您使用内存表：

```
SELECT * INTO mem_tab_instance FROM .... 
```

或者，您需要以不同的方式处理您的任务。

您之前是否有使用过其他数据库系统（例如 SQL Server）的经验？在这方面，这些系统非常不同。

# objective-c - 尝试将 SmartfoxServer 框架与 Kobold-2D 项目一起使用时出现链接器错误

> ID：11577206
> 
> 赞同：0
> 
> 时间：2012-07-20T10:06:11.537
> 
> 标签：objective-c, cocos2d-iphone, kobold2d

当尝试在 Kobold2d 项目中使用 SmartfoxServer 框架时，我们收到以下错误：

```
Undefined symbols for architecture i386:
"_OBJC_CLASS_$_CCAsyncObject", referenced from:
objc-class-ref in libcocos2d-extensions-ios.a(CCTextureCache+CCBigImageExtensions.o)
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 
```

之所以会发生这种情况，是因为我们必须包含`-ObjC`链接器标志才能加载类别，这些类别在 SmartfoxServer 框架中定义。我已经读到需要强制链接包含类别的静态库[，](https://stackoverflow.com/questions/11163759/why-cctexturecacheccbigimageextensions-isnt-linked-in-my-kobold2d-project)但 SmartFoxServer-Framework 不是静态库。

有没有办法强制加载框架，所以它包括所有类别而不使用`-ObjC`链接器标志？或者有没有一种方便的方法可以将框架转换为静态库？任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T12:06:07.153

除非您使用 CCBigImage，否则您可以从目标中取消选择 CCTextureCache+CCBigImageExtensions.h 和 .m 文件。

打开 Kobold2D-Libraries 项目并浏览到组 /Extensions/CCBigImage。从菜单中选择查看 -> 实用程序 -> 文件检查器。选择每个文件并取消选中文件检查器中的目标复选框。现在这个特定的类将不再被编译并且错误消失了。

问题似乎是这个类别使用了一个只在实现文件中定义的私有类。不幸的是，强制加载整个 cocos2d-iphone-extensions 项目并不是一个解决方案，因为这会带来其他错误。

# iphone - 有一个按钮来触发 EGORefreshTableHeaderView

> ID：11577208
> 
> 赞同：2
> 
> 时间：2012-07-20T10:06:31.653
> 
> 标签：iphone, objective-c, ios, animation

我使用[EGOTableViewPullRefresh](https://github.com/enormego/EGOTableViewPullRefresh) 在我的`tableView`. 我添加了一个`UIBarButtonItem`可以`(IBAction)refreshBtnClicke`调用**EGORefreshTableHeaderView.h**`refreshByClickRegreshBtn:`中的自定义方法来显示并重新加载我的**`EGORefreshTableHeaderView``tableView`**

 ****表视图控制器.m**

```
-(IBAction)refreshBtnClicked{

    [_refreshHeaderView refreshByClickRegreshBtn:self.tableView];

} 
```

**EGORefreshTableHeaderView.h**

```
- (void)refreshByClickRegreshBtn:(UIScrollView *)scrollView{

[self setState:EGOOPullRefreshLoading];
NSLog(@"scrollView.contentInset.top :%f", scrollView.contentInset.top);// it's always 0 here
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.2];
[scrollView setContentInset:UIEdgeInsetsMake(60.0f, 0.0f, 0.0f, 0.0f)];

[UIView commitAnimations];
if ([_delegate respondsToSelector:@selector(egoRefreshTableHeaderDidTriggerRefresh:)]) {
    [_delegate egoRefreshTableHeaderDidTriggerRefresh:self];
}
} 
```

**问题**：当我的没有数据时`tableView`，点击`EGORefreshTableHeaderView`后会一直显示`UIBarButtonItem`。但是一旦下载的数据填满，当我再次点击时`tableView`，将永远不会出现，即使被调用。任何帮助表示赞赏:)`EGORefreshTableHeaderView``UIBarButtonItem``refreshByClickRegreshBtn:`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:31:44.317

问题通过替换 `[scrollView setContentInset:UIEdgeInsetsMake(60.0f, 0.0f, 0.0f, 0.0f)]`为`[scrollView setContentOffset:CGPointMake(0, -60)]`如下解决。

```
- (void)refreshByClickRegreshBtn:(UIScrollView *)scrollView{

[self setState:EGOOPullRefreshLoading];
NSLog(@"scrollView.contentInset.top :%f", scrollView.contentInset.top);// it's always 0 here
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.2];
//[scrollView setContentInset:UIEdgeInsetsMake(60.0f, 0.0f, 0.0f, 0.0f)];
[scrollView setContentOffset:CGPointMake(0, -60)];

[UIView commitAnimations];
if ([_delegate respondsToSelector:@selector(egoRefreshTableHeaderDidTriggerRefresh:)]) {
    [_delegate egoRefreshTableHeaderDidTriggerRefresh:self];
}
} 
```**

# ruby-on-rails - Mongoid::Errors::MixedRelations + 保存

> ID：11577212
> 
> 赞同：5
> 
> 时间：2012-07-20T10:06:40.237
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, mongoid

我有 3 个模型：

```
class Interest
  include Mongoid::Document

  has_many :user_hobby
end

class UserHobby
 include Mongoid::Document
  field :contacts, :type => Array

  belongs_to :interest, :foreign_key => "interest", inverse_of: nil
  belongs_to :interest, :foreign_key => "related_interests", inverse_of: nil
  embedded_in :user
end

class User
 include Mongoid::Document
 embeds_many :user_hobby
end 
```

我必须添加 user 和 user_hobby 之间的嵌入关系，但之后（在我的测试中）当我想保存兴趣时出现此错误：

> Mongoid::Errors::MixedRelations: 由于嵌入了 UserHobby，因此不允许通过关系关联从兴趣文档中引用 (n) UserHobby 文档。

我看了这个话题，但也没有帮助我[Mongoid::Errors::MixedRelations](https://stackoverflow.com/questions/8437181/mongoiderrorsmixedrelations)

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T11:29:22.420

在这方面的主要问题是您的 UserHobby 模型嵌入在 User 中。根据 mongodb，如果一个文档被嵌入，它不能被任何其他模型引用，除了嵌入它的模型。如果你想从其他模型引用 UserHobby 文档，那么 UserHobby 和 User 不应该有嵌入关系。

# java - JavaCompiler 接口：在运行时传入变量

> ID：11577220
> 
> 赞同：0
> 
> 时间：2012-07-20T10:07:37.757
> 
> 标签：java, compiler-construction

我正在使用 java 提供的接口从程序中调用编译器。

```
JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();

StandardJavaFileManager fileManager = compiler.getStandardFileManager(null, null, null);

Iterable<? extends JavaFileObject> compilationUnits = fileManager.getJavaFileObjectsFromStrings(Arrays.asList("MyClass.java"));

compiler.getTask(null, fileManager, null, null, null, compilationUnits).call();

fileManager.close(); 
```

一切工作正常，但我想要做的是将变量传递给我正在编译的项目并比较结果以查看它们是否符合预期，因此我没有程序正常工作。有点像 JUnit 如何测试类。JavaCompiler 接口中是否有允许您传入变量并读取它们的方法......类似于`System.in()`and `System.out()`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:07:13.967

运行（Java）程序与编译它没有太大关系。要么你动态加载编译的类并运行它们（例如在一个新线程中），要么你使用`ProcessBuilder`启动一个新的VM，基本上构建一个像“ `java -cp /class/path my.compiled.MainClass ...`”这样的命令行。后者可能是首选，因为被测程序不会意外终止您的程序`System.exit()`。

当然还有一个*更好*的解决方案：为什么不以编程方式生成一些 JUnit 测试（并调用 JUnit）？

# iphone - PushViewController 和 Popview Controller 在初始视图控制器的导航栏上

> ID：11577222
> 
> 赞同：0
> 
> 时间：2012-07-20T10:07:46.620
> 
> 标签：iphone, ios

我是 iPhone 新手。我对 uinavigation 控制器有一点困惑，即我希望在该视图控制器中的初始视图控制器中有一个导航栏，当我们单击时，导航栏中有一个按钮，它将从那里推送另一个视图控制器（第二个视图控制器）是一个后退按钮，如果我们单击我想弹出该视图控制器并返回到初始视图控制器。如果有人知道这一点，请帮助我。如果你用一些代码解释它会更好地理解我们。

我写的以下代码，到目前为止，这里存在模态视图控制器和关闭模型视图控制器正在工作，但 pushview 控制器和 popview 控制器不工作

在 appDelegate 我这样写

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
        //create a window
        self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

        //biblePlayerController is an instance of BiblePlayerViewController class and then set the biblePlayerController as a rootViewController to the window
        self.biblePlayerController = [[BiblePlayerViewController alloc] initWithNibName:@"BiblePlayerViewController" bundle:nil];

       navigationController = [[UINavigationController alloc]initWithRootViewController:self.biblePlayerController];

      // self.window.rootViewController = self.biblePlayerController;
        [self.window addSubview:navigationController.view];  
//make the window visible
        [self.window makeKeyAndVisible];

        return YES;   

}   

//In initial View controller there is a navigation on that there is a download button code for that is 

//BiblePlayerViewController.m
 UIBarButtonItem *downloadButton = [[UIBarButtonItem alloc] initWithTitle:@"Download" style:UIBarButtonItemStylePlain target:self action:@selector(gotoProgressViewController:)];
        self.navigationItem.rightBarButtonItem = downloadButton;

- (IBAction)gotoProgressViewController:(id)sender {
    @try {

        //ShowProgressViewCont is initialized with the nibName
        showProgressViewController = [[ShowProgressViewCont alloc]initWithNibName:@"ShowProgressViewCont" bundle:nil];

        //UINavigationController is initialized with the rootViewController showProgressViewController
        navigationController = [[UINavigationController alloc]initWithRootViewController:showProgressViewController]; 

        //The transition style of the navigationController is set to UIModalTransitionStyleCrossDissolve
        navigationController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;

        //Presents a modal view managed by the given view controller to the user.Here navigation Controller that manages the modal view.
        [self presentModalViewController:navigationController animated:YES];
      //  [navigationController pushViewController:showProgressViewController animated:YES];
    }
    @catch(NSException * e){NSLog(@"Exception At10: %s %d %s %s %@",__FILE__,__LINE__,__PRETTY_FUNCTION__,__FUNCTION__,e);}@finally{}
} 
```

在上面的代码中，presentModalViewController 可以正常工作，但 pushViewController 不能正常工作。如果有人知道这一点，请帮助我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:30:53.830

假设您在 ParentViewController 中，并且通过按 Child Btn 您想转到 ChildViewController。

```
- (void) childBtnPressed : (id) sender
{
     ChildViewController *makeNewObject = [[ChildViewController alloc] initWithNibName:@"ChildViewController" bundle:nil];
     [self.navigationController pushViewController:makeNewObject animated:YES];
     [makeNewObject release];
} 
```

现在在您的 ChildViewController.m 文件中，将其写入 Back Btn 操作以返回父视图控制器。

```
- (void) backBtnPressed : (id) sender
{
    [self.navigationController popViewControllerAnimated:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T10:52:51.803

单击导航栏中的按钮时，推送下一个视图

```
- (IBAction)NextViewAction:(id) sender
{
     NextViewController *NxtView = [[NextViewController alloc] initWithNibName:@"NextViewController" bundle:nil];
     [self.navigationController pushViewController:NxtView animated:YES];
     [NxtView release];
} 
```

从 NextViewController 弹出

```
[self.navigationController popViewControllerAnimated:YES]; 
```

# extjs4 - EXTJS：访问 TreePanel 的单元格

> ID：11577227
> 
> 赞同：0
> 
> 时间：2012-07-20T10:07:57.620
> 
> 标签：extjs4

如何访问树网格面板中的单元格。

访问[http://try.sencha.com/extjs/4.0.7/examples/tree/treegrid/](http://try.sencha.com/extjs/4.0.7/examples/tree/treegrid/)以查看示例 TreePanel。如何访问“持续时间”或“分配给”列下的单元格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T18:31:48.523

我不确定您真正想要返回的数据是什么，这是一种从网格存储中获取数据的方法：

```
store.getAt(1).get("user") 
```

将为您获取数据索引为“user”的列的行索引 1 处的值。

# sql - SQL 将注册人名称与参考表进行比较

> ID：11577229
> 
> 赞同：0
> 
> 时间：2012-07-20T10:08:03.983
> 
> 标签：sql, stored-procedures, pattern-matching

您好我的数据库中有两个表，一个包含“注册人姓名”字段和其他信息的注册人表和一个包含名为“Business_Identifier”的列的参考/查找表

想法是将“Registrant Name”字段中的数据与“Business_Identifier”列中包含的数据进行比较，以识别“Registrant Name”字段中包含的数据是企业还是个人的数据

一个例子是：

```
Registrant Table:
ID: 1234
Registrant NAme: ABC Ltd

Lookup Table:
ID:1,2,3                      
Business_Identifier: ltd,PLC,LLC 
```

我希望创建一个存储过程，该过程将执行某种形式的模式匹配，获取查找表数据并查看其中是否出现在“注册人名称”字段中，从而将记录识别为企业。

我创建了一个在静态列表上执行模式匹配的脚本，请参见下面的示例，但我需要将静态列表转换为表格以便可以更新它

当前脚本：

```
With Test as (
SELECT *    
  FROM [Registrant_Table]
  where (patindex('%[0-9]%',UPPER([Registrant name])) > 0
     or patindex('%null%',UPPER([Registrant name])) > 0
     or patindex('%n/a%',UPPER([Registrant name])) > 0     
     or patindex('na',UPPER([Registrant name])) > 0
     or patindex('%LTD%',UPPER([Registrant name])) > 0
     or patindex('%None%',[Registrant name]) > 0
     or patindex('%unknown%',[Registrant name]) > 0
     or patindex('%Ltd%',[Registrant name]) > 0
     or patindex('%ltd%',[Registrant name]) > 0
     or patindex('%LLC%',[Registrant name]) > 0
     or patindex('%LLc%',[Registrant name]) > 0     
     or patindex('%LLP%',[Registrant name]) > 0
     or patindex('%LLp%',[Registrant name]) > 0       
     or patindex('%llp%',[Registrant name]) > 0
     or patindex('%Limited%',[Registrant name]) > 0          
     or patindex('%LIMITED%',[Registrant name]) > 0
     or patindex('%Limi%',[Registrant name]) > 0 
     or patindex('%Company%',[Registrant name]) > 0
     or patindex('%Tele%',[Registrant name]COLLATE Latin1_General_CS_AI) > 0  
     or patindex('%Trade%',[Registrant name]) > 0
     or patindex('%Host%',[Registrant name]) > 0
     or patindex('%Domain%',[Registrant name]) > 0
     )

select * 
Into [Registrant_Table_Business]
from Test 
```

任何帮助将非常感激

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:16:26.620

`upper`如果查找表为和定义位列`collation`，您可以使用：

```
SELECT *    
  FROM [Registrant_Table] r
 CROSS JOIN [PatternLookup] l
 WHERE patindex('%' + l.Pattern + '%', 
        case when l.IsUpper = 1
             then case when l.IsLatin1_General_CS_AI = 1 
                  then upper (r.[Registrant name]) COLLATE Latin1_General_CS_AI
                  else upper (r.[Registrant name]) 
                  end
             else case when l.IsLatin1_General_CS_AI = 1 
                       then r.[Registrant name]  COLLATE Latin1_General_CS_AI
                       else r.[Registrant name]
                  end
        end) > 0 
```

**更新：**为模式创建表：

```
create table PatternLookup
(
  PatternLookupID int identity primary key,
  Pattern nvarchar(100) not null,
  IsUpper bit default 0 not null,
  IsLatin1_General_CS_AI bit default 0 not null
) 
```

并且很少插入：

```
 insert into PatternLookup (Pattern, isUpper, IsLatin1_General_CS_AI) values
          ('LTD', 1, 0),   -- This pattern asks for uppercased [Registrant name]
          ('Tele', 0, 1),  -- This one needs registrant in different collation
          ('Company', 0, 0)-- And this one is as-is 
```

# iphone - 如何检测连接状态

> ID：11577231
> 
> 赞同：0
> 
> 时间：2012-07-20T10:08:12.233
> 
> 标签：iphone, ios, network-programming

我在基于 iPhone telnet 的应用程序中使用 AsyncSocket 与服务器通信。沟通工作正常。

如果有人从服务器上拔下 LAN 电缆。我希望我的应用程序应该显示一些警报。

有谁知道我怎么能做到这一点？

先谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:11:57.803

像这样为网络可达性添加一个观察者

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                     selector:@selector(myReachabilityDidChangedMethod)
                                         name:kReachabilityChangedNotification
                                       object:nil];
Reachability *reachability;
reachability = [Reachability reachabilityForInternetConnection];
[reachability startNotifier]; 
```

因此，当网络状态发生变化时，您将使用观察者方法收到通知 -

```
(void)myReachabilityDidChangedMethod:(Reachability*){

} 
```

# javascript - 为什么我们在 Javascript 的类中需要“var self = this”？

> ID：11577241
> 
> 赞同：18
> 
> 时间：2012-07-20T10:08:37.753
> 
> 标签：javascript, json, knockout.js

为什么我们不能在下面的示例中直接使用`this`而不是？`self`

```
function SeatReservation(name, initialMeal) {
    var self = this;
    self.name = name;
    self.meal = ko.observable(initialMeal);
} 
```

回复后，我了解到：

是的，如果类中没有上下文切换，则不需要。

但我会将这种方法用作“约定”，尽管没有必要。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-20T10:12:15.513

没有理由你不能直接在那里使用**（**`this`我会说如果你*这样做*会更好的可读性）。

但是，在`var self = this;`以下情况下通常需要 （基本上，任何异步操作，如事件绑定、AJAX 处理程序等，其中的解析`this`被推迟*到*它等于其他东西）；

```
function SeatReservation(name, initialMeal) {
    var self = this;
    self.name = name;
    self.meal = ko.observable(initialMeal);

    setTimeout(function () {
        alert(self.name); // otherwise, this is window; use self to keep a reference to the "SeatReservation" instance.
    }, 100);
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-20T10:14:47.947

通常这样做是为了在上下文发生变化时保持对此的引用。它通常用于事件处理程序或回调函数。但如前所述，没有理由在您的具体示例中使用它。

您将在以下文章中找到更多详细信息：[http ://www.alistapart.com/articles/getoutbindingsituations](http://www.alistapart.com/articles/getoutbindingsituations)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-20T10:14:41.737

在您的示例代码中，根本没有理由复制`this`到变量。

它通常在代码使用回调方法时使用。回调方法内部`this`不引用对象，因此您为此使用变量。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-20T10:14:09.000

根据您的示例，这样做是“没有”理由的。

然而，在某些情况下它会对您有所帮助，尽管有些人可能不赞成使用它。

IE

```
$('a.go').click(function(e)
{
    e.preventDefault();
    if(!$(this).hasClass('busy'))
    {
        $(this).addClass('busy');
        $.ajax(
        {
            success : function(resp)
            {
                $(this).removeClass('busy');
            },
            error : function()
            {
                $(this).removeClass('busy');                
            }
        });
    }
}); 
```

在上面，`$(this)`成功和错误回调不会反映到您单击的链接，因为范围已经丢失。

`var self = $(this)`为了解决这个问题，你会这样做

```
$('a.go').click(function(e)
{
    e.preventDefault();
    if(!$(this).hasClass('busy'))
    {
        $(this).addClass('busy');
        var btn = $(this);
        $.ajax(
        {
            success : function(resp)
            {
                btn.removeClass('busy');
            },
            error : function()
            {
                btn.removeClass('busy');                
            }
        });
    }
}); 
```

# vim - 使 NeoComplCache 显示与omnicomplete 相同的匹配

> ID：11577243
> 
> 赞同：7
> 
> 时间：2012-07-20T10:08:47.890
> 
> 标签：vim

我正在尝试在 VIM 中设置自动完成（智能感知）。为此，我使用了 NeoComplCache 插件，它可以工作，但它不会显示所有显示的条目`C-x``C-o`。例如，NeoComplCache 不显示任何新创建的函数、变量或类，而作为 omnicomplete 显示它们就好了。

我的 _vimrc 中有这个：

```
autocmd FileType php set omnifunc=phpcomplete#CompletePHP
let g:neocomplcache_enable_at_startup = 1
let g:neocomplcache_enable_auto_select = 1
let g:neocomplcache_min_syntax_length = 1 
```

有没有办法告诉 NeoComplCache 也显示这些条目，以便显示 Vim 的默认`C-x``C-o`项目？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T01:52:13.943

```
if !exists('g:neocomplcache_omni_patterns') 
    let g:neocomplcache_omni_patterns = {} 
endif 

let g:neocomplcache_omni_patterns.php = '[^. \t]->\h\w*\|\h\w*::' 
```

从[neocomplcache.txt](https://github.com/Shougo/neocomplcache/blob/master/doc/neocomplcache.txt)我认为这可能有效。

# matlab - 如何从Matlab中的同一文件夹中依次读取wav文件

> ID：11577244
> 
> 赞同：1
> 
> 时间：2012-07-20T10:08:57.053
> 
> 标签：matlab, file-io, wav

我正在尝试编写一个程序，我必须读取一个 wav 文件，从中提取一些特征并保存它们，然后去选择下一个文件重复相同的过程。要选择的波形文件数量超过100。有人可以帮我如何读取一个接一个的波形文件。（比如说文件被命名为 e1.wav、e2.wav 等等）。有人请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:18:33.777

该`dir`命令在这里很有帮助。它既可以显示目录的全部内容，也可以指定一个 glob 来仅返回文件的子集，例如`dir('*.wav')`. 这将返回一个包含文件信息的结构数组，例如`name`、`date`、等。`bytes``isdir`

要开始，请尝试以下操作：

```
filelist = dir('*.wav');
for file = filelist
    fprintf('Processing %s\n', file.name);
    fid = fopen(file.name);
    % Do something here with your file.
    fclose(fid);
end 
```

**编辑 1：**将双引号更改为单引号（[感谢 user1540393](https://stackoverflow.com/users/1540393/user1540393)）。

**编辑 2**（由[amro](https://stackoverflow.com/users/97160/amro)建议）：如果必须按文件存储处理结果，我经常使用以下模式。我通常预先分配一个与文件列表大小相同的数组、结构数组或元胞数组。然后我使用一个整数索引来遍历文件列表，我也可以使用它来编写输出。如果要存储的信息是同质的（例如每个文件一个标量），请使用数组或结构数组。但是，如果信息因文件而异（例如不同大小的向量或矩阵），请改用元胞数组。

使用普通数组的示例：

```
filelist = dir('*.wav');
% Pre-allocate an array to store some per-file information.
result = zeros(size(filelist));
for index = 1 : length(filelist)
    fprintf('Processing %s\n', filelist(index).name);
    % Read the sample rate Fs and store it.
    [y, Fs] = wavread(filelist(index).name);
    result(index) = Fs;
end
% result(1) .. result(N) contain the sample rates of each file. 
```

使用元胞数组的示例：

```
filelist = dir('*.wav');
% Pre-allocate a cell array to store some per-file information.
result = cell(size(filelist));
for index = 1 : length(filelist)
    fprintf('Processing %s\n', filelist(index).name);
    % Read the data of the WAV file and store it.
    y = wavread(filelist(index).name);
    result{index} = y;
end
% result{1} .. result{N} contain the data of the WAV files. 
```

# c# - GLSL - Opentk 传递 Vector3 的数组

> ID：11577245
> 
> 赞同：1
> 
> 时间：2012-07-20T10:09:04.573
> 
> 标签：c#, opengl, glsl, opentk

如何使用 OpenTK 将 Vector3 数组传递给 GLSL 着色器？在 C++ 的 OpenGL 中有一个名为 glUniform3fv 的函数，但是我似乎找不到任何与 OpenTK 等效的函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:33:54.247

在 OpenTK 中 - 每个方法的“gl”前缀不可用（因为您必须通过静态类 GL 访问所有 OpenGL 方法）。相反，电话是

```
 GL.Uniform3(...) 
```

查看[源代码](http://opentk.svn.sourceforge.net/viewvc/opentk/trunk/Source/OpenTK/Graphics/OpenGL/GL.cs?revision=3125&view=markup)中的第 21318 行。

希望这可以帮助！

# winsock - 服务和分层服务提供者之间的 IPC

> ID：11577249
> 
> 赞同：0
> 
> 时间：2012-07-20T10:09:14.320
> 
> 标签：winsock

有很多方法可以在服务和 LSP（winsock hook DLL）之间进行 IPC。但哪个是最有效的？命名管道、COM 服务器、共享内存等。任何线索或提示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:39:43.107

这取决于你追求什么？速度。如果苏

[http://www.codeproject.com/Articles/14740/Fast-IPC-Communication-Using-Shared-Memory-and-Int](http://www.codeproject.com/Articles/14740/Fast-IPC-Communication-Using-Shared-Memory-and-Int)

Winsocks 可能会更慢。

# oracle - 声明外键，错误：ORA-00907：缺少右括号

> ID：11577254
> 
> 赞同：0
> 
> 时间：2012-07-20T10:09:29.290
> 
> 标签：oracle

我创建了一个名为 sv_hardware(column: ip_adrs) 的表。

现在我想创建一个表，其中 ip_adrs 将是外键，所以我编码：

```
Create table sv_req_info(
"server_no" number not null PRIMARY KEY,
"host_ name" varchar2(100),
"cur_ status"  varchar2(100),
"loc " varchar2(100),
"buss_roles"  varchar2(100),
"rack _no"  varchar2(100),
"rk U_ consump"  varchar2(100),
"Rmarks_owner"  varchar2(100),
"ip_ adrs " varchar2(100) ,
"sv_type_cat" varchar2(100),
date_added  date,
CONSTRAINT fk_sv_hardware
  FOREIGN KEY (ip_adrs)
  REFERENCES sv_hardware(ip_adrs)); 
```

发生错误`ORA-00907: missing right parenthesis`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T10:24:01.377

```
CREATE TABLE sv_hardware 
(
  ip_adrs   VARCHAR(10) PRIMARY KEY
)
;

CREATE TABLE sv_req_info 
(
  "server_no"      NUMBER NOT NULL PRIMARY KEY,
  "host_ name"     VARCHAR2(100),
  "cur_ status"    VARCHAR2(100),
  "loc "           VARCHAR2(100),
  "buss_roles"     VARCHAR2(100),
  "rack no"        VARCHAR2(100),
  "rk U consump"   VARCHAR2(100),
  "Rmarks_owner"   VARCHAR2(100),
  "ip_adrs"        VARCHAR2(100),
  "sv_type_cat"    VARCHAR2(100),
  date_added       DATE,
  CONSTRAINT fk_sv_hardware FOREIGN KEY ("ip_adrs") REFERENCES sv_hardware (ip_adrs)
)
; 
```

以上作品，对我来说似乎是引用“ip_adrs”的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T12:42:35.847

问题似乎是您的列被调用`"ip_ adrs "`（带有空格）并且外键提到`ip_adrs`

其中一个是错的，你应该知道哪个。

作为旁注，我强烈建议不要使用包含任何字符的标识符，这些字符会迫使您引用标识符。不要使用空格，使用下划线。

# objective-c - 在 cocos2d 中录制声音

> ID：11577256
> 
> 赞同：1
> 
> 时间：2012-07-20T10:09:39.023
> 
> 标签：objective-c

我正在尝试构建像会说话的汤姆猫这样的应用程序。我能够录制声音并以花栗鼠风格播放声音。但它也会记录背景噪音。它不仅记录人声，还记录一切。我只想录制人声。任何人都可以帮助解决这个问题。

# php - 定位 XML 文件时出错

> ID：11577258
> 
> 赞同：0
> 
> 时间：2012-07-20T10:09:48.977
> 
> 标签：php, xml

为了了解如何从 XML 读取数据，我从一个非常基本的示例开始。所以，`test.xml`和`index.php`都位于根目录下。以下代码`index.php`返回`Failed Loading XML`。为什么会发生这种情况？

```
 <?php
            $source = './test.xml';

            loadXml($source);

        function loadXml($source){ 
            /*
             * Checks for xml file errors
             */
            libxml_use_internal_errors(true);

            $xml = simplexml_load_file($source);
            if (!$xml){
                echo "Failed Loading XML\n";
                foreach(libxml_get_errors() as $error){
                    echo "\t", $error->message;
                }
            } else {
                    print_r($xml);
            }
            // etc....
     }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:32:52.430

有几种可能性：

1.  在加载 xml 之前，请先检查文件是否确实存在。我知道你说它在那里，但为了以防万一，做这个检查总是值得的：`if (is_file($source))`
2.  XML 可能格式不正确。您可以通过[http://www.xmlvalidation.com/](http://www.xmlvalidation.com/)等在线服务进行检查。不过，最容易检查的事情之一是 XML 声明之前没有空格`<?xml version='1.0'?>`

# java - 我可以在java中将字符串转换为数学运算吗？

> ID：11577259
> 
> 赞同：7
> 
> 时间：2012-07-20T10:09:52.007
> 
> 标签：java, string, math, operation

我可以将像“3 * 3 + 3”这样的字符串转换为java中的数学运算吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-20T10:12:27.270

[使用ScriptEngine](http://docs.oracle.com/javase/6/docs/api/javax/script/ScriptEngine.html)将其评估为 JavaScript

```
String xyz = "3*3+3";
ScriptEngineManager manager = new ScriptEngineManager();
ScriptEngine se = manager.getEngineByName("JavaScript");        
Object result = se.eval(xyz); 
```

参考：[文档](http://docs.oracle.com/javase/6/docs/technotes/guides/scripting/programmer_guide/index.html#who)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T10:12:31.607

没有内置函数，您必须实现解析器。但是，您也可以查找现成的项目，例如：http: [//sourceforge.net/projects/jep/](http://sourceforge.net/projects/jep/)或 [http://code.google.com/p/symja/wiki/MathExpressionParser](http://code.google.com/p/symja/wiki/MathExpressionParser)

# php - 连接多个 id 的表

> ID：11577260
> 
> 赞同：0
> 
> 时间：2012-07-20T10:10:03.840
> 
> 标签：php, mysql

exp 表：这是我存储条目的地方，同时将域和子域保存在单独的表中。该列可以有一个或多个与 中的列`sub_domain`匹配的 id 。`id``misc`

```
+----+---------+-----------+------------+-----------+--------+-------------+------------+------------+
| id | user_id | job_type  | experience | exp_title | domain | sub_domain  | start      | end        |
+----+---------+-----------+------------+-----------+--------+-------------+------------+------------+
| 83 |     268 | Full Time | dasdfg     | dest      | 76     | 89,91,93,95 | 07/15/2012 | 07/31/2012 |
| 84 |     269 | Full Time | abcdef     | title     | 77     | 89          | 07/15/2011 | 07/31/2011 |
+----+---------+-----------+------------+-----------+--------+-------------+------------+------------+ 
```

杂项表：

```
+-----+----------------------------------------+--------------+
| id  | name                                   | category     |
+-----+----------------------------------------+--------------+
|  89 | Name1                                   | category    |
|  91 | Name2                                   | category    |
|  93 | Name3                                   | category    |
|  95 | Name4                                   | category    |
|  55 | Name5                                   | category    | 
```

`LEFT JOIN misc c ON a.sub_domain=c.id`我想知道如果 exp 表中有多个 sub_domains 时如何更改，同时记住也可以有一个 id。

```
$query_str = "SELECT a.*, b.name, c.name AS sub_name
            FROM exp a 
            LEFT JOIN misc b ON a.domain=b.id
            LEFT JOIN misc c ON a.sub_domain=c.id
            WHERE a.user_id = ?"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:21:46.167

试试这个

```
$query_str = 
    "SELECT a.*, b.name, c.name AS sub_name 
    FROM exp a  
    LEFT JOIN misc b ON a.domain=b.id 
    LEFT JOIN misc c ON locate(concat('','',c.id ,'',''),'','',a.sub_domain,'','') >0
    WHERE a.user_id = ?"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T10:33:21.370

您必须在两个查询中执行此操作。主要原因之一是，如果您设法完成您想做的事情，您将返回除`sub_name`列之外具有几乎相同数据的行。这真的是不必要的。

您可以首先`JOIN`打开这两个表`a.domain = b.id`，然后构造第二个查询，该查询`IN(...)`对所有子域值使用一条语句。它会是这样的：

```
$subdomains = explode(',', $data_from_first_query['sub_domain']);
if (count($subdomains)) {
  $q2 = '
    SELECT
      b.name
    FROM 
      misc AS b 
    WHERE b.id IN ('.implode(',',array_fill(0, count($subdomains), '?')).')';
} 
```

然后使用 foreach 在占位符中绑定值。

但话又说回来，确保您的数据库已规范化是一种很好的做法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T11:10:57.983

使用逗号分隔值的列是不好的。阅读问题的答案：

**[在数据库列中存储逗号分隔列表真的那么糟糕吗？](https://stackoverflow.com/questions/3653462/is-storing-a-comma-separated-list-in-a-database-column-really-that-bad)**

简短的回答是：**这真的很糟糕。**

* * *

在您修复设计之前，您可以使用以下[`FIND_IN_SET()`](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_find-in-set)功能：

```
$query_str = "
        SELECT a.*, b.name, c.name AS sub_name
        FROM exp a 
          LEFT JOIN misc b ON a.domain = b.id
          LEFT JOIN misc c ON FIND_IN_SET(c.id, a.sub_domain) 
         WHERE a.user_id = ?
             "; 
```

# php - 在 PHP 中调用输出变量的简单过程

> ID：11577266
> 
> 赞同：0
> 
> 时间：2012-07-20T10:10:36.300
> 
> 标签：php, mysql, procedure

我正在尝试调用一个将名称返回给 PHP 页面的简单过程。

执行此操作时我得到空记录集

**程序**

```
DROP PROCEDURE IF EXISTS prSample1;
CREATE PROCEDURE prSample1(OUT Name VARCHAR(255))
BEGIN
 SET Name = 'Mugil';
 SELECT Name;
END; 
```

**PHP 过程调用**

```
 mysql_connect('localhost', 'root', '');
    mysql_select_db('dbName');

    $strSQL = "CALL prSample1(@Name);";
    $Result = mysql_query($strSQL);

    $strSQL = "SELECT @Name";
    $Result = mysql_query($strSQL);

    while($Row = mysql_fetch_array($Result))
      $Name = $Row[0];

    print $Name; 
```

当我运行此 PHP 代码时，我没有得到名称。

谢谢你的回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:23:55.747

```
$strSQL = "CALL prSample1(@Name);"; 
```

应该：

```
$strSQL = "CALL prSample1(@Name)"; 
```

注意“;” :)

# c# - 如何通知用户控件另一个用户控件中发生了事件？

> ID：11577267
> 
> 赞同：0
> 
> 时间：2012-07-20T10:10:38.463
> 
> 标签：c#, wpf, events, xaml, event-handling

我有一个名为的窗口`MainWindow`，其中包含 2 个用户控件：

```
SearchBox 
```

和

```
CustomerList 
```

当有人输入 SearchBox 时，我想相应地更改 CustomerList。

**问题：**`CustomerList`知道`TextChanged`事件已经执行的最佳方法是`SearchBox`什么？

现在我`SearchBox`定义为：

```
public class SearchSubmittedEventArgs : EventArgs
{
    public string Term { get; set; }

    public SearchSubmittedEventArgs(string term)
    {
        Term = term;
    }
}

public partial class SearchBox : UserControl
{
    public event EventHandler<SearchSubmittedEventArgs> SearchSubmitted;
    public SearchBox()
    {
        InitializeComponent();
    }

    private void SearchTextBox_TextChanged(object sender, TextChangedEventArgs e)
    {
        if (SearchSubmitted != null) SearchSubmitted.Invoke(this, new SearchSubmittedEventArgs(((TextBox)sender).Text));
    }
} 
```

并`MainWindow`具有以下 XAML 和 EventHandler：

```
<UserControls:SearchBox SearchSubmitted="SearchSubmitted_Invoked" />

private void SearchSubmitted_Invoked(object sender, SearchSubmittedEventArgs e)
{
    // I know SearchBox has been typed into

    // but I don't know how best to inform CustomerList
} 
```

我需要从 to 传递事件`SearchSubmitted_Invoked`吗`CustomerList`？有没有办法让我直接从`SearchBox`to传递它`CustomerList`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T10:17:41.027

我认为您可以订阅该活动...类似以下内容：

```
 var search = new SearchBox();
 var cust = new CustomerList();
 search.SearchSubmitted += (s,e)=>{ cust.Update(e.Term); } 
```

希望它可以帮助您找到前进的方法...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T13:25:56.903

这些控件彼此靠近吗？然后在里面烘焙一个新的用户控件可能是有意义的。该外部用户控件应该进行事件处理。

# php - 表最后更新。php mysqli

> ID：11577270
> 
> 赞同：1
> 
> 时间：2012-07-20T10:10:44.930
> 
> 标签：php, mysqli

我正在尝试执行以下 mysqli 语句：

> 显示表状态，如“问题”

我想遍历结果并找到并返回 Update_time 的值。

我在网上找到了一些示例，但无法让它们在我的 PHP 脚本中工作。

我的其他 PHP 函数遵循以下格式，我希望这个函数与之匹配。

```
public function getQuestionsSections() {
 $stmt = mysqli_prepare($this->connection,
      "SELECT DISTINCT
          QUESTIONS.SECTION
       FROM QUESTIONS");     

  $this->throwExceptionOnError();

  mysqli_stmt_execute($stmt);
  $this->throwExceptionOnError();

  $rows = array();
  mysqli_stmt_bind_result($stmt, $row->SECTION);

  while (mysqli_stmt_fetch($stmt)) {
      $rows[] = $row;
      $row = new stdClass();
      mysqli_stmt_bind_result($stmt,  $row->SECTION);
  }

  mysqli_stmt_free_result($stmt);
  mysqli_close($this->connection);

  return $rows;
} 
```

我真的很感谢在编写 php 函数方面的一些帮助，因为我不是 php 程序员。

这里给出了问题的答案，

[无法显示 mySQL 表的最后更新时间](https://stackoverflow.com/questions/10937968/having-trouble-displaying-last-update-time-of-mysql-table)

不幸的是，它对我不起作用。如果我们使用上面的 mysqli_prepare 将是理想的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:33:01.207

```
 SHOW TABLE STATUS LIKE  'QUESTIONS' 
```

是等价的

```
 SELECT UPDATE_TIME FROM information_schema.TABLES WHERE TABLE_NAME LIKE 'QUESTIONS' 
```

. 您需要访问“information_schema”数据库以获取 UPDATE_TIME (not Update_time) 。

```
public function getStatus() {

 $con = mysqli_connect("localhost","root","password","information_schema");
 $stmt = mysqli_prepare($con ,
      "SELECT UPDATE_TIME FROM information_schema.TABLES WHERE TABLE_NAME LIKE 'QUESTIONS'");     

  mysqli_stmt_execute($stmt);

  $rows = array();
  mysqli_stmt_bind_result($stmt, $row->UPDATE_TIME );

  while (mysqli_stmt_fetch($stmt)) {
      $rows[] = $row;
      $row = new stdClass();
      mysqli_stmt_bind_result($stmt,  $row->UPDATE_TIME );
  }

  mysqli_stmt_free_result($stmt);
  mysqli_close($con);

  return $rows;
 } 
```

我希望它会起作用。

Reference : [https://dba.stackexchange.com/questions/3221/how-to-select-from-show-table-status-results](https://dba.stackexchange.com/questions/3221/how-to-select-from-show-table-status-results)

# c# - 如何提高我的自定义函数的性能以获得快速结果？

> ID：11577272
> 
> 赞同：0
> 
> 时间：2012-07-20T10:10:53.243
> 
> 标签：c#, lucene.net

我正在使用 Lucene/.NET 来实现一个数字搜索引擎。

我想从一个大范围内过滤数字，这取决于字符串数组中存在的数字。

我使用了以下代码：

```
int startValue = 1; 
endValue = 100000;

//Assume that the following string array contains 12000 strings
String[] ArrayOfTerms = new String[] { "1", "10",................. , "99995"};

public String[] GetFilteredStrings(String[] ArrayOfTerms)
{
  List<String> filteredStrings = new List<String>();

  for (int i = startValue; i <= endValue; i++)
  {                       
     int index = Array.IndexOf(ArrayOfTerms,i.ToString());

     if( index != -1)
     {
        filteredStrings.Add((String)ArrayOfTerms.GetValue(index));
     }      
  }

return filteredStrings.ToArray();

} 
```

现在，我的问题是它搜索从 1 到 100000 的每个值并且花费了太多时间。有时我的应用程序挂起。

你们中的任何人都可以帮助我如何改善这个性能问题吗？我不知道缓存的概念，但我知道 Lucene 支持缓存过滤器。我应该使用缓存过滤器吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:14:54.073

实际上，您正在尝试确定 Array 是否包含该项目。我认为您应该使用 HashSet 或 Dictionary 之类的东西来确定 O(1) 时间而不是 O(n) 时间的值的存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T10:22:30.740

这段代码的运行速度要快得多。

```
var results = ArrayOfTerms.Where(s => int.Parse(s) <= endValue); 
```

如果我得到你想做的事

# ios - 在滚动视图iOS中制作位置指示器“地图”

> ID：11577273
> 
> 赞同：0
> 
> 时间：2012-07-20T10:11:00.437
> 
> 标签：ios, uiscrollview, position

我有一个包含大图像大小的滚动视图的视图，我想为您在滚动视图中的位置添加一个位置指示器，就像游戏中的地图一样。

我在滚动视图的顶部创建了一个较小版本的图像，我想知道如何在较小的视图中添加一个相对于滚动视图缩放比例的大小和位置的矩形，在小图像上指出您当前正在查看的大图像的哪一部分？我的目标是使用 ARC 的 iOS 5+。

这是我到目前为止所拥有的 - 它似乎正确设置了原点，但是当我放大它时它会变小，而它应该变大，反之亦然：

```
int scrollxint = self.scrollView.bounds.origin.x;
int scrollyint = self.scrollView.bounds.origin.y;
int scrollxlength = self.scrollView.contentSize.width;
int scrollylength = self.scrollView.contentSize.height;

int reducedscrollxint = (scrollxint*0.05);
int reducedscrollyint = (scrollyint*0.05);
int reducedscrollxlength = (scrollxlength*0.05);
int reducedscrollylength = (scrollylength*0.05);

areaFrame.frame = CGRectMake(reducedscrollxint, reducedscrollyint, reducedscrollxlength, reducedscrollylength);
[self.mapView addSubview:areaFrame]; 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:34:09.480

我必须使用相对于区域指示器原始大小的缩放比例来完成这项工作，但这段代码对我有用：

```
int scrollxint = self.scrollView.bounds.origin.x;
int scrollyint = self.scrollView.bounds.origin.y;

float scale = self.scrollView.zoomScale;

int reducedscrollxint = (scrollxint*0.05);
int reducedscrollyint = (scrollyint*0.05);

areaFrame.frame = CGRectMake(reducedscrollxint, reducedscrollyint, (10/scale), (6.5/scale));
[self.mapView addSubview:areaFrame]; 
```

# java - 使用 Apache POI 从 excel 文件中获取图像及其位置

> ID：11577274
> 
> 赞同：7
> 
> 时间：2012-07-20T10:11:04.307
> 
> 标签：java, excel, apache-poi

是否可以使用 Apache POI 从 xls 电子表格中提取图像信息？

在我的一个项目中，我需要从 .xls 文件中读取一些图像。我可以一起阅读所有图像，但是如何获取图像位置（如列和行数或坐标）？否则，我可以获得图像位置，但我不知道有关找到位置的特定图像的信息，例如图片名称或扩展名或其他信息。我如何也可以获得图像和位置？

在这里[阅读所有图像......](http://poi.apache.org/spreadsheet/quick-guide.html#Images)在这里[获取图像位置......](http://apache-poi.1045710.n5.nabble.com/A-newbie-question-how-to-get-image-position-td2294815.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-23T09:32:05.530

看看这里：

[http://poi.apache.org/components/spreadsheet/quick-guide.html#Images](http://poi.apache.org/components/spreadsheet/quick-guide.html#Images)

样本：

```
List lst = workbook.getAllPictures();

for (Iterator it = lst.iterator(); it.hasNext(); ) {

    PictureData pict = (PictureData)it.next();

    String ext = pict.suggestFileExtension();

    byte[] data = pict.getData();

    if (ext.equals("jpeg")) {

      FileOutputStream out = new FileOutputStream("pict.jpg");

      out.write(data);

      out.close();

    }
} 
```

在此之后，您可以使用扩展 Magick 的 ImageInfo 等工具来查找各种配置。Yo甚至可以将图像转换为不同的尺寸。

也看看这个类：

[http://blog.jaimon.co.uk/simpleimageinfo/SimpleImageInfo.java.html](http://blog.jaimon.co.uk/simpleimageinfo/SimpleImageInfo.java.html)

- 希望这可以帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-09-04T15:40:06.690

我希望这段代码会有所帮助）

```
 XSSFDrawing dp = workbook.getSheetAt(1).createDrawingPatriarch();
    List<XSSFShape> pics = dp.getShapes();
    XSSFPicture inpPic = (XSSFPicture)pics.get(0);

    XSSFClientAnchor clientAnchor = inpPic.getClientAnchor();
    inpPic.getShapeName(); // узнаю название картинки
    PictureData pict = inpPic.getPictureData();
    FileOutputStream out = new FileOutputStream("pict.jpg");
    byte[] data = pict.getData();
    out.write(data);
    out.close();
    System.out.println("col1: " + clientAnchor.getCol1() + ", col2: " + clientAnchor.getCol2() + ", row1: " + clientAnchor.getRow1() + ", row2: " + clientAnchor.getRow2());
    System.out.println("x1: " + clientAnchor.getDx1() + ", x2: " + clientAnchor.getDx2() +  ", y1: " + clientAnchor.getDy1() +  ", y2: " + clientAnchor.getDy2()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-13T22:27:48.763

如果您不想使用迭代器（因为有时它们很重）

```
public List readDrawing(Workbook workbook) throws Exception {
    List list = workbook.getAllPictures();

    for (int i=0; i<list.size(); i++) {
        PictureData picture = (PictureData) list.get(i);

        String ext = picture.suggestFileExtension();
        byte[] data = picture.getData();

        FileOutputStream out = new FileOutputStream("imageName" + "." + ext);
        out.write(data);
        out.close();
    }

    return list;
} 
```

# javascript - 简单的 Jquery CheckAll /UncheckAll 复选框

> ID：11577278
> 
> 赞同：1
> 
> 时间：2012-07-20T10:11:26.477
> 
> 标签：javascript, jquery, html

我有这个 Jquery：

```
$(document).ready(function() {
   $('#masterChecks input[type="checkbox"]').click(function() {
   var togClass=$(this).attr('class');
   if($(this).attr('checked')){

    //need to make sure all checkboxes for this class is checked, when the
    //master checkbox is checked.
    $('div.' + togClass ).css("display", "inline-block");
}
else
{
        //need to make sure all checkboxes for this class is unchecked, when the
    //master checkbox is checked.
    $('div.' + togClass ).css("display", "none");

}
}); 
```

});

我有许多 div 和许多类的 Html。有很多复选框。现在我正在检查 mastercheckbox，它将隐藏与复选框具有相同类的所有属性的 css。我还有一组本地复选框，它们的作用相同，但仅针对它们所在的 div。我希望 Jquery 在未选中时取消选中具有相同类的本地复选框，反之亦然。这是html结构

```
<div id="masterChecks">
   // checbox here with class="sampleclass"
</div>
 <div class="sampleclass">
      //local checkbox here 
 </div> 
```

看起来很简单，但不能让它工作，

我尝试了一些这样的事情：

```
 $('div.' + togClass + 'input[type="checkbox"]').attr('checked','checked'); 
```

谁能帮忙？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T10:20:24.737

看看[jQuery.each()](http://api.jquery.com/jQuery.each/)

您可以在哪里迭代所有复选框并查看它们是否被选中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T10:19:49.573

您可以使用 jquery 函数[.is()](http://api.jquery.com/is/)检查复选框的状态，然后使用[.each()](http://api.jquery.com/each/)函数循环并将具有相同类的所有复选框的状态设置为主复选框之一：

```
$('#masterChecks input[type="checkbox"]').click(function(){
 var checkclass= $(this).attr('class');
if($(this).is(':checked'))
   $('div.' + checkclass + ' input[type="checkbox"]').each(function(){
       $(this).attr('checked', true);
   });
 else   
    $('div.' + checkclass + ' input[type="checkbox"]').each(function(){
        $(this).attr('checked', false);
   });
}); 
```

编辑：添加了工作代码的jsfiddle：http: [//jsfiddle.net/CFeam/2/](http://jsfiddle.net/CFeam/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T10:40:52.130

通过以下方式尝试：

```
$('#masterChecks input[type="checkbox"]').click(function(){
var yourClass = $(this).attr('class');
if($(this).is(':checked'))
{
    $('div.' + yourClass + ' input[type="checkbox"]').each(function(){
        $(this).attr('checked', true);
    });
}
else
{
    $('div.' + yourClass + ' input[type="checkbox"]').each(function(){
        $(this).attr('checked', false);
    });
}
});​ 
```

[工作小提琴](http://jsfiddle.net/6kTBr/15/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T10:44:50.127

只需替换您的文档就绪功能：

```
 $(document).ready(function() {
       $('#masterChecks input[type="checkbox"]').click(function() {
       var togClass=$(this).attr('class');
       $(togClass).click(function(){
             if($('#masterChecks').is(':checked'){
                $('div.' + togClass ).css("display", "inline-block");
                $(togClass).each(function(){
                    $(this).attr('checked','checked');      
                });  
             }else{
                $('div.' + togClass ).css("display", "none");
                $(togClass).each(function(){
                    $(this).removeAttr('checked');      
                });  
             }
            });
        });        
    }); 
```

# ruby - 如何点击奇怪的选择列表元素？

> ID：11577285
> 
> 赞同：0
> 
> 时间：2012-07-20T10:11:57.123
> 
> 标签：ruby, selenium-webdriver, watir-webdriver

在身份不明的下拉菜单中选择选项时出现问题。当我单击下拉箭头时会出现下拉元素，但我无法单击它们，因为我不知道它们的 ID 或其他我可以使用的属性。这是代码。我无法从 select_list 中选择：

```
on_page(RegistrationPage).id_of_select_list_with_options = "8" 
```

或者

```
@browser.select_list(:name => "field_profile_bday[0][value][day]").select("8") 
```

或者

```
@browser.select_list(:id => "edit-field-profile-bday-0-value-day").select("8") 
```

错误是：元素当前不可见，因此可能无法与之交互（Selenium::WebDriver::Error::ElementNotVisibleError）

当我单击组合按钮元素下拉列表时出现，但我无法选择其中的元素，因为它们在选择后出现在组合选择的 div 中。（就像组合选择的 div 中的“Jour”文本一样，默认情况下它在那里）这是 html：

```
 <div class="form-item" id="edit-field-profile-bday-0-value-day-wrapper">
 <label for="edit-field-profile-bday-0-value-day">Jour : <span class="form-required" title="Ce champ est obligatoire.">*</span></label>
 <select name="field_profile_bday[0][value][day]" class="form-select required  date-day" id="edit-field-profile-bday-0-value-day" ><option value="" selected="selected">Jour</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option><option value="10">10</option><option value="11">11</option><option value="12">12</option><option value="13">13</option><option value="14">14</option><option value="15">15</option><option value="16">16</option><option value="17">17</option><option value="18">18</option><option value="19">19</option><option value="20">20</option><option value="21">21</option><option value="22">22</option><option value="23">23</option><option value="24">24</option><option value="25">25</option><option value="26">26</option><option value="27">27</option><option value="28">28</option><option value="29">29</option><option value="30">30</option><option value="31">31</option></select>
</div>
<div class="combo-wrapper" style="display: inline-block; width: 61px; height: 24px; " tabindex="0"><div class="combo-button" style="width: 24px; height: 24px; display: inline-block; ">+</div><div class="combo-selected" style="width: 37px; height: 24px; display: inline-block; ">Jour</div></div>
<div class="combo-button" style="width: 24px; height: 24px; display: inline-block; ">+</div>
<div class="combo-selected" style="width: 37px; height: 24px; display: inline-block; ">Jour</div>
"Jour"
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:06:23.180

而不是 .select("8")。尝试类似：

```
@browser.select_list(:name => "field_profile_bday[0][value][day]").option(:value, '8').select 
```

或者

```
@browser.select_list(:name => "field_profile_bday[0][value][day]").options[7].select 
```

我认为您需要指向选项元素，然后使用固有的选择方法。希望这有效。祝你好运！

# linux - 在不修改代码的情况下测量函数时间执行

> ID：11577294
> 
> 赞同：2
> 
> 时间：2012-07-20T10:12:44.337
> 
> 标签：linux, performance, compiler-construction, time, measurement

我在库中找到了一些代码（函数），可以通过优化编译器来改进（作为主要思想 - 找到深入编译器的好东西）。我想通过脚本自动测量这个函数的执行时间。由于它是库中的低级函数并获取参数，因此很难提取这个函数。**因此，我想找出在不修改库/应用程序/环境的情况下准确测量此功能（精确的 CPU 时间）的方法**。你有什么想法如何实现吗？

我可以编写包装器，但在不久的将来我需要更多的应用程序来进行性能测试，而且我认为为每个应用程序编写包装器非常难看。

PS：我的代码将在 ARM (armv7el) 架构上运行，该架构具有某种“性能监视器控制”寄存器。我已经了解了 linux 内核中的“perf”。但不知道这是我需要的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:35:25.767

目前尚不清楚您是否可以访问要分析或改进的函数的源代码，即是否能够重新编译所考虑的库。

如果你在最近的 Linux 系统上使用最近的 GCC（至少是 4.6），你可以使用像`gprof`（假设你能够重新编译库）或更好的分析器（你可以在[`oprofile`](http://oprofile.sourceforge.net/)不重新编译的情况下使用），你可以自定义GCC 满足您的需求。

请注意，与任何测量一样，分析可能会改变观察到的现象。

如果您正在考虑自定义 GCC 编译器以进行优化，请考虑为此目的制作 GCC 插件，或者更好的是[MELT](http://gcc-melt.org/)扩展（MELT 是一种高级域特定语言，用于扩展 GCC）。您还可以根据自己的特定分析目的自定义 GCC（使用 MELT）。

# firebird - 火鸟插入返回到另一个插入

> ID：11577301
> 
> 赞同：1
> 
> 时间：2012-07-20T10:13:05.413
> 
> 标签：firebird

我使用 Firebird 作为数据库，我需要这样做：

```
INSERT INTO TG (ID, UID, GID) 
    SELECT (INSERT INTO TBO VALUES (GEN_ID('o',1)) RETURNING ID), UID, 10 
    FROM TBL l 
    WHERE l.is=1 
```

当我使用时，带有 select 的部分是可以的：

```
SELECT (GEN_ID('o',1)), UID, 10 
    FROM TBL l 
    WHERE l.is=1 
```

但我`ID`首先需要在其他表中进行依赖。

我知道一些叫做程序的东西，但我不知道如何使用它们。是否可以使用 SQL 来执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T13:54:12.820

看一下[EXECUTE BLOCK](http://www.firebirdsql.org/refdocs/langrefupd20-execblock.html)语句。它允许您在一个“批处理”中执行多个语句，或者如果您无法将其嵌入到一个 SQL 查询中，则可以编写复杂的逻辑。

[在 EXECUTE BLOCK 中，您可以使用PSQL](http://www.firebirdsql.org/refdocs/langrefupd21-psql.html)编写多个命令。

EB 允许输入参数、输出参数（是的，您可以将其用作表格）、局部变量、if 语句、while、for select 等......非常强大的工具。

只需准备您的块并像简单的 SQL 查询一样执行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T08:14:37.047

更简单的方法是使用触发器。在此示例中，它将是插入前触发器。像这样的东西：

```
CREATE TRIGGER TG_BI0 FOR TABLE TG ACTIVE BEFORE INSERT 0
AS
BEGIN
    /* Before insert create a new record in TBO */
    INSERT INTO TBO (ID) VALUES (NEW.ID);
END 
```

使用此触发器后，您应该只在 TG 中插入记录。

```
INSERT INTO TG (ID, UID, GID)
VALUES (GEN_ID('o',1), 'SOME_UUID', 10) 
```

# android - Android - 在 wifi 连接上执行 http 帖子

> ID：11577302
> 
> 赞同：-1
> 
> 时间：2012-07-20T10:13:07.270
> 
> 标签：android, android-service, android-wifi

我正在开发一个在公共 wifi 网络上登录的应用程序。我已经通过向身份验证服务器发送 http 帖子来进行登录。我的下一步是让应用程序在有新的 wifi 连接时自动执行 http post，检查我们是否连接到正确的 ssid。我的问题是，这是最好的方法吗？是创建服务并注册到广播接收器的最佳方式吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:27:36.137

我这样做的方式是我有一个广播接收器来监听`android.net.conn.CONNECTIVITY_CHANGE`意图。在该广播接收器中，您可以通过轮询来检查建立了什么样的连接`ConnectivityManager`：

```
ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
boolean hasWifi = cm.getNetworkInfo(ConnectivityManager.TYPE_WIFI) != null && cm.getNetworkInfo(ConnectivityManager.TYPE_WIFI).isAvailable()  && cm.getNetworkInfo(ConnectivityManager.TYPE_WIFI).isConnected(); 
```

然后启动向身份验证服务器发送邮件的服务。

或者，您确实可以让服务监听`android.net.conn.CONNECTIVITY_CHANGE`意图并在那里进行 wifi 检查。

# mysql - SQL - 计算包含两个不同字段的行数

> ID：11577306
> 
> 赞同：1
> 
> 时间：2012-07-20T10:13:30.650
> 
> 标签：mysql, database

有没有办法计算 fieldB 但只有 fieldA 和 fieldB 组合是唯一的？

例如

```
fieldA     fieldB
X          A
X          B
Y          C
X          B
Y          A 
```

字段 B 的计数将返回：

```
A = 2
B = 1
C = 1 
```

我试过使用'SELECT DISTINCT fieldA，COUNT(fieldB) AS count FROM table GROUP BY fieldB'。这似乎返回了 fieldB 中所有值的计数，而不仅仅是那些具有唯一 fieldA 的值。

我希望我正在尝试做的事情是有道理的，我发现很难用语言表达。我正在尝试用 SQL 做什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T10:15:08.860

它应该是

```
SELECT fieldB, COUNT(DISTINCT  fieldA, fieldB) AS count 
FROM table 
GROUP BY fieldB; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T10:16:54.157

```
SELECT   fieldA, COUNT(fieldB) AS count from
(SELECT DISTINCT fieldA, fieldB FROM table)a
FROM a GROUP BY a.fieldB 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T10:20:01.970

我认为这可以让你到达那里

```
Declare @mytbl table (fieldA char(1), fieldB char(1))
insert into @mytbl
select 'X','A'
union all select 'X','B'
union all select 'Y','C'
union all select 'X','B'
union all select 'Y','A'

select COUNT(*), LEFT(myfields,1)
from 
(
select distinct fieldb + fielda as myfields
from @mytbl
group by fieldb + fielda
) a
group by LEFT(myfields,1) 
```

退货

2 A 1 B 1 C

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T10:20:03.847

```
DECLARE @mytb table
(
fieldA varchar(10),
fieldB varchar(10)
);

INSERT into @mytb values('X','A');
INSERT into @mytb values('X','B');
INSERT into @mytb values('Y','C');
INSERT into @mytb values('X','B');
INSERT into @mytb values('Y','A');

SELECT fieldB,count(DISTINCT fieldA+fieldB) as count
from @mytb
group BY fieldB;

   fieldB     count
---------- -----------
    A          2
    B          1
    C          1 
```

# ruby-on-rails-3 - Rails 3.2.2 在现有的 Rails 应用程序中集成 spree。迁移表名冲突

> ID：11577307
> 
> 赞同：1
> 
> 时间：2012-07-20T10:13:31.597
> 
> 标签：ruby-on-rails-3, spree

我拥有完整的现有 Rails 3.2.2 运行应用程序。我想将 spree 应用程序与它集成。

我已经按照 Github [http://github.com/spree/spree](http://github.com/spree/spree)中给出的添加 Spree 的步骤进行了操作，但是我已经有一些同名的表，Spree 具有像“地址”和“用户”这样的名称

由于名称冲突，迁移失败。当我尝试

```
config.active_record.table_name_prefix = "spree_" 
```

它从头开始运行所有迁移并将 spree_ 添加到每个表并再次发生冲突，因为原始表的名称也类似于 spree_addresses。

我应该如何继续将大礼包集成到现有应用程序中。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:09:51.607

不幸的是，这将非常艰难。您必须以某种方式合并 spree 和您的应用程序用户模型和地址模型，以使它们兼容。

最简单的方法是从头开始并安装 spree。我遇到了你的情况，最后得到了一个新的 Rails 应用程序。

# java - 用于在末尾限制 _ 的正则表达式

> ID：11577311
> 
> 赞同：0
> 
> 时间：2012-07-20T10:14:05.933
> 
> 标签：java, regex

我有一个正则表达式`^[\\p{L}\\d._]*\\p{L}+[\\p{L}\\d._]*$` ，这适用于

1.  `ABC123de`（字母数字 - 不论大小写）
2.  `ABCDEfgh`（仅字母 - 无论大小写）
3.  `Abc_.123`（只允许使用特殊字符`_`和`.`）

但是，它正在接受像这样的输入

1.  `balaji_,jacob_`（`_`最后有）
2.  `2balaji,2jacob`（以数字开头）

我们可以修改上面的正则表达式来限制上面的两个测试用例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:16:56.837

当然，像这样在开头和结尾添加适当的限制：

```
^\p{L}[\p{L}\d._]*\p{L}+[\p{L}\d._]*[\p{L}\d.]$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T10:18:49.550

第一点：

> `^[\p{L}\d._]*\p{L}+[\p{L}\d._]*$`

has`*`允许*零*个或多个，首先修复问题 #2 将其更改为`+`：*一个*或多个：

```
^[\p{L}\d._]+\p{L}+[\p{L}\d._]*$. 
```

为了防止最后出现下划线，需要另一个不包括的子句`_`：

```
^[\p{L}\d._]+\p{L}+[\p{L}\d._]*[\p{L}\d.]?$. 
```

但这仍然允许 a`_`单独（仅从第一部分匹配）。如果您不想要唯一的下划线，只需从第一个子句中删除：

```
^[\p{L}\d.]+\p{L}+[\p{L}\d._]*[\p{L}\d.]?$. 
```

如果需要以下划线开头的能力，我认为我们需要有关单字符串和双字符串的允许大小写的更多信息。

# java - Java Map 迭代使用 Map Inside Map 并在迭代后将其存储在另一个 Map 中

> ID：11577324
> 
> 赞同：0
> 
> 时间：2012-07-20T10:14:47.660
> 
> 标签：java, arrays, list, map

我使用从数据库中获取一些数据并将其存储在如下列表中：

```
List<MyObject> list =new ArrayList<MyObject>(); 
```

列表包含 2 个 MyObject 类的对象。

我有 2 个地图实现：

```
Map<String,Map<String,Long>> map1 = new HashMap<String,Map<String,Long>>();
Map<String,Long> map2 = new HashMap<String,Long>(); 
```

我迭代了列表并执行了以下代码

```
for(myObjectObj   :   list){

      map2.put(myObjectObj.getAction(),myObjectObj.getCount());
      map1.put(myObjectObj.getName(),map2);
} 
```

我想要的最终输出是以下方式的map1：

```
Name1 action1 count1
      action2 count2
Name2 action3 count3
      action4 count4 
```

但是我的代码没有得到想要的输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T10:19:41.693

在您当前的版本中，您添加到 map2 实例的数据实际上将添加到 map1 的所有条目中，因为 map2 引用对所有 map1 实例都是通用的。

鉴于您希望列表中的每个条目都有一个新的嵌套映射，您需要在循环中获取或实例化一个新的 map2：

```
for(myObjectObj   :   list){ 
      String key = myObjectObj.getName();
      Map<String,Long> map2 = map1.get(key);
      if (map2 == null) {
          map2 = new HashMap<String,Long>();
          map1.put(key, map2);
      }
      map2.put(myObjectObj.getAction(),myObjectObj.getCount());
} 
```

# eclipse - 如何使 Eclipse 在下一行使用 + 运算符打破字符串文字？

> ID：11577329
> 
> 赞同：5
> 
> 时间：2012-07-20T10:15:06.180
> 
> 标签：eclipse

* * *

（已编辑）注意：这个问题与 Eclipse 的代码格式化程序如何包装长字符串文字无关。这是手动破坏/包装字符串文字的行为

* * *

当我通过在文字内按 Enter 来破坏字符串文字时，默认行为是 Eclipse 将`" +`在我按 Enter 的位置追加，并在下一行开始我的行的其余部分，并带有`"`前缀。

```
 // v ENTER HERE
String longString = "abcdefghij|klmno";

String longString = "abcdefghij" +
        "klmno"; 
```

但是，正常的编码风格实践建议在运算符之前换行。有什么方法可以告诉 Eclipse 像这样破坏我的字符串？

```
String longString = "abcdefhij"
        + "klmno"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-10-17T09:38:21.973

*在 4.3 中，您可以使用Binary expressions的**Wrap before operator*复选框来控制此设置。

 *![Eclipse Luna 中的格式化程序设置](../Images/bdc31f95d6926bfeb99fd7e30ad9f038.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T04:08:42.847

最后我发现这是 Eclipse 缺少的一个特性。

目前这个问题在 Eclipse 的问题跟踪器下被跟踪： [https ://bugs.eclipse.org/bugs/show_bug.cgi?id=48433](https://bugs.eclipse.org/bugs/show_bug.cgi?id=48433)

* * *

更新：我现在使用的是 Eclipse 4.3，发现这个特性现在可用。`+`当您手动打破长字符串时，操作员的位置现在将遵循您的代码格式化程序设置。*

# windows-8 - 如何最好地创建 Windows 8 Metro Hub 页面

> ID：11577330
> 
> 赞同：1
> 
> 时间：2012-07-20T10:15:06.467
> 
> 标签：windows-8, microsoft-metro, winrt-xaml

我想创建一个 Windows 8 Metro 应用程序，该应用程序具有类似于以下的精美“集线器”页面：

[http://blogs.msdn.com/cfs-file.ashx/__key/communityserver-blogs-components-weblogfiles/00-00-01-51-31-metablogapi/3482.landing_2D00_brand_5F00_thumb_5F00_287109A4.jpg](http://blogs.msdn.com/cfs-file.ashx/__key/communityserver-blogs-components-weblogfiles/00-00-01-51-31-metablogapi/3482.landing_2D00_branded_5F00_thumb_5F00_287109A4.jpg)

关键元素是： 水平全景样式滚动页面，但带有数据绑定的“部分”。我已经环顾四周寻找实施，并提出不足。

在我看来，可以使用包含一个 Horizo​​ntal Stackpanel 的 ScrollViewer，该 Stackpanel 具有构成每个部分的元素。但鉴于这是一种常见的 Metro 设计模式，我认为可能有一种更简单/推荐的实现方式。

只是想知道是否有人可以给我一些提示。你会怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:52:56.817

当您开始使用 VariableSizedWrapGrid 时，所有事物都有自己的相对大小。[http://msdn.microsoft.com/en-us/library/windows/apps/br227651.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br227651.aspx)

设置 ColumnSpan 和 RowSpan 属性以使事物变成两倍大小、三倍大小等...

对我来说，我通过将 ColumnSpan 和 RowSpan 设置为 2 来使集合中的第一项成为双倍宽度、双倍高度。所有其他项都将此 ColumnSpan 和 Rowspan 设置为 1，并且效果很好。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-28T04:51:52.647

除了 Hans 提到的内容之外，我强烈建议您阅读现有的[Metro Style App Samples](http://code.msdn.microsoft.com/windowsapps/site/search)。从工作示例中学习比任何文档都更有效。

# mysql - 为什么五个的和是1 = 4

> ID：11577333
> 
> 赞同：1
> 
> 时间：2012-07-20T10:15:29.413
> 
> 标签：mysql, sql

基本查询按预期工作，但是当我尝试对第一列求和时，它假定为 5，但我得到 4，为什么？

**基本查询：**

```
SET @last_task = 0;
SELECT 
  IF(@last_task = RobotShortestPath, 0, 1) AS new_task,
  @last_task := RobotShortestPath
FROM rob_log
ORDER BY rog_log_id;

1   1456
0   1456
0   1456
1   1234
0   1234
1   1456
1   2556
1   1456 
```

**求和查询**

```
SET @last_task = 0;
SELECT SUM(new_task) AS tasks_performed
FROM (
  SELECT 
    IF(@last_task = RobotShortestPath, 0, 1) AS new_task,
    @last_task := RobotShortestPath
  FROM rob_log
  ORDER BY rog_log_id
) AS tmp

4 
```

**表结构**

```
CREATE TABLE rob_log (
  rog_log_id BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,
#  RobotPosX FLOAT NOT NULL,
#  RobotPosY FLOAT NOT NULL,
#  RobotPosDir TINYINT UNSIGNED NOT NULL,
  RobotShortestPath MEDIUMINT UNSIGNED NOT NULL,
  PRIMARY KEY(rog_log_id),
  KEY (rog_log_id, RobotShortestPath)
);

INSERT INTO rob_log(RobotShortestPath) SELECT 1456;
INSERT INTO rob_log(RobotShortestPath) SELECT 1456;
INSERT INTO rob_log(RobotShortestPath) SELECT 1456;
INSERT INTO rob_log(RobotShortestPath) SELECT 1234;
INSERT INTO rob_log(RobotShortestPath) SELECT 1234;
INSERT INTO rob_log(RobotShortestPath) SELECT 1456;
INSERT INTO rob_log(RobotShortestPath) SELECT 2556;
INSERT INTO rob_log(RobotShortestPath) SELECT 1456; 
```

在 sqlfiddle 对其进行测试：[http](http://sqlfiddle.com/#!2/e80f5/3) ://sqlfiddle.com/#!2/e80f5/3 作为[使用 MySQL 计算时间线变化](https://stackoverflow.com/questions/11576929/counting-changes-in-timeline-with-mysql/11577043#comment15316961_11577043)的答案， 但很困惑

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T19:00:16.283

[原因如下（如Twitter 上](https://twitter.com/sqlfiddle/status/226460243629060099)所讨论的）：

变量@last_task 在单独的查询“批处理”中定义。我将 SQL Fiddle 上的查询分解为单独的批次，分别执行。我这样做是为了让您可以在下面看到每个批次的输出作为不同的结果集。在您的 Fiddle 中，您可以看到有两组输出：[http](http://sqlfiddle.com/#!2/e80f5/3/0) ://sqlfiddle.com/#!2/e80f5/3/0和[http://sqlfiddle.com/#!2/e80f5/3/1](http://sqlfiddle.com/#!2/e80f5/3/1) . 这些映射到您正在运行的两个语句（集合和选择）。问题是，您的 set 语句定义了一个仅存在于第一批中的变量；当 select 语句运行时，它是一个单独的批处理，并且您的变量未在该上下文中定义。

要纠正这个问题，您所要做的就是定义一个不同的查询终止符。请注意架构和查询面板（ [ ; ] ）下的下拉框/按钮 - 单击它，您可以选择分号以外的其他内容（默认值）。然后您的两个语句将作为同一批次的一部分包含在一起，您将获得所需的结果。例如： [http ://sqlfiddle.com/#!2/e80f5/9](http://sqlfiddle.com/#!2/e80f5/9)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T10:28:40.587

这可能是旧版本 MySQL 中的一些错误。

我已经在 MySQL 5.5 上尝试过它并且它工作得很好。

# .net - 使用 .net 中的注册表类读取 mydocument 文件夹路径

> ID：11577334
> 
> 赞同：0
> 
> 时间：2012-07-20T10:15:33.453
> 
> 标签：.net

我想在网络中使用注册表类读取我的文档文件夹路径，请帮助我。我不要使用 Environment.SpecialFolder.MyDocument。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T11:52:49.717

正如@nitram 所说，您必须使用注册表吗？

```
var folderPath = Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments); 
```

# java - Java AES 解密检测到不正确的密钥

> ID：11577341
> 
> 赞同：3
> 
> 时间：2012-07-20T10:15:54.077
> 
> 标签：java, android, encryption, aes, padding

我正在编写对文件进行 AES 加密/解密的 android 应用程序。我希望能够检测是否指定了不正确的密码，因此不匹配的密钥被派生用于解密。我正在使用带有 256 位密钥的 AES/CBC/PKCS7Padding。如果我执行 cipher.doFinal() 我可以尝试/捕获 BadPaddingException，它会告诉我有问题并且可能密钥不正确。但是如果我使用 CipherInputStream 来读取加密文件，我不会得到关于填充正确性的反馈。因此，如果我故意指定错误的密码，它会解密文件，然后报告一切正常，但解密的文件完全是垃圾。所以我的问题是如何在使用 CipherInputStream 时检测到错误的填充？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T04:22:32.980

将一些已知的标头添加到您的数据中。首先解密它，如果它不符合您的预期，停止并返回错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T10:53:47.830

尝试改用 GCM 模式（Java 7 或 Bouncy Castle 提供程序）。填充的技巧是，有时在消息被更改后它是正确的（大约 256 次一次）。GCM 模式将添加完整性保护，因此任何更改都将导致从 BadPaddingException 派生的异常。

不过有一件事：在使用 GCM 加密时，您应该预先添加一个（随机）随机数（实际上也是 CBC 模式的规则，但在 CBC 中使用非随机 IV 的影响不那么严重）。

请注意，您需要执行最终计算以获得 badpaddingexception，因此不要忘记关闭或结束底层流。这可能是您当前的问题。

[编辑]：这不是答案，但输入可用于生成更好的`CipherInputStream`，请参阅我关于此问题的[其他答案。](https://stackoverflow.com/a/11591779/589259)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T11:31:06.667

我认为由于某种原因，错误的填充被捕获，这是来自`CipherInputStream`源：

```
private int getMoreData() throws IOException {
    if (done) return -1;
    int readin = input.read(ibuffer);
    if (readin == -1) {
        done = true;
        try {
            obuffer = cipher.doFinal();
        }
        catch (IllegalBlockSizeException e) {obuffer = null;}
        catch (BadPaddingException e) {obuffer = null;}
        if (obuffer == null)
            return -1;
        else {
            ostart = 0;
            ofinish = obuffer.length;
            return ofinish;
        }
    }
    try {
        obuffer = cipher.update(ibuffer, 0, readin);
    } catch (IllegalStateException e) {obuffer = null;};
    ostart = 0;
    if (obuffer == null)
        ofinish = 0;
    else ofinish = obuffer.length;
    return ofinish;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-23T08:28:51.573

这是 CipherInputStream 中 getMoreData() 方法的修改版本，它可能对遇到我的问题的人有用：

```
private int getMoreData() throws IOException {
    if (done) return -1;
    int readin = input.read(ibuffer);
    if (readin == -1) {
        done = true;
        try {
            obuffer = cipher.doFinal();
        }
        catch (IllegalBlockSizeException e) {
            throw new IOException(e);
        }
        catch (BadPaddingException e) {
            throw new IOException(e);
        }
        if (obuffer == null)
            return -1;
        else {
            ostart = 0;
            ofinish = obuffer.length;
            return ofinish;
        }
    }
    try {
        obuffer = cipher.update(ibuffer, 0, readin);
    } catch (IllegalStateException e) {obuffer = null;};
    ostart = 0;
    if (obuffer == null)
        ofinish = 0;
    else ofinish = obuffer.length;
    return ofinish;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-09-11T17:44:25.233

我有同样的问题，如何知道用于加密的密钥是否与用于解密的密钥相同，因为在我的情况下，我可以解密字符串但它返回了一些垃圾，我需要知道加密的字符串（它是随机的）得到正确的值。

所以我所做的是；

解密加密的字符串。
使用正确的密钥再次加密字符串。
解密之前的加密字符串。
如果原始解密密钥等于新解密密钥，则匹配。

```
 Cipher c = Cipher.getInstance(algorithm);
    c.init(Cipher.DECRYPT_MODE, keyspec, ivspec);
    byte[] decValue = c.doFinal(encryptedData.getBytes());
    decryptedValue = new String(decValue,"UTF-8");

  //now i have the string decrypted in decryptedValue

  byte[] encryptAgain = encrypt(decryptedValue);
  String encryptAgaindecripted = new String(c.doFinal(encryptAgain),"UTF-8");

  //if keys match then it uses the same key and string is valid
 if (decryptedValue.equals(encryptAgaindecripted)){
  //return valid
 } 
```

希望这可以帮助某人。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-09T11:29:02.917

我也遇到了这个。我有一个测试，在使用 Java 支持的 AES/CBC/PKCS5Padding 的一千次运行中可靠地失败了几次。

要修复，您可以按照上面的建议进行操作并使用充气城堡。

但是，我做了一个不同的修复，只是在加密之前向纯文本添加了一个 md5 内容哈希，我在解密时验证了这一点。只需将内容附加到 md5 散列并在解密时获取 md5 散列的前 22 个字符并验证字符串的其余部分是否具有相同的散列，如果没有则抛出异常或返回明文（没有 md5 散列）如果匹配。无论加密算法如何，这都将起作用。可能在 GCM 模式下，这确实是不需要的。无论如何，这样你可以避免对充气城堡的额外依赖。

# iphone - 有没有像“Codea”这样的应用程序，但适用于 MonoTouch？

> ID：11577347
> 
> 赞同：3
> 
> 时间：2012-07-20T10:16:12.347
> 
> 标签：iphone, ios, xamarin.ios, codea

有没有像“Codea”（[http://twolivesleft.com/Codea/](http://twolivesleft.com/Codea/)）这样的应用程序，但对于 MonoTouch？我需要一种直接在 iPad 上编写和编译 MonoTouch 代码的方法。我曾想过为 iPad 编写自己的实时 c# MonoTouch 编译器，但我担心这是一项艰巨的任务。但也许已经有一些开源资源。

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T18:43:26.717

简而言之，没有。MonoTouch 被明确设计为允许使用 Apple XCode 开发环境的开发人员将 Monotouch 引擎嵌入到他们的 IOS 应用程序中。正如评论者所提到的，IOS 没有 C# 解释器。

学习 Lua，对你有好处 :)

# javascript - 是否可以通过插件在 Firefox 浏览器中阻止请求的网页？

> ID：11577348
> 
> 赞同：0
> 
> 时间：2012-07-20T10:16:12.797
> 
> 标签：javascript, firefox-addon-sdk

我正在开发一个 firefox 插件（使用 Add-on Builder），它将请求的网页内容与可疑的网页内容进行比较并阻止网页（如果匹配）。

但是我没有通过我的插件代码在浏览器中阻止请求的网页（预计在完全加载之前）。

一些解决方案，例如 GoogleSafeBrowsing（不是插件），阻止网页并显示恶意软件域名等。如何在加载网页之前显示可疑内容并阻止网页加载。

我需要一个机制（带插件或不带插件）。任何帮助.......

谢谢，

更新：我需要在 javascript 中以编程方式使用这种机制（例如 if(match){window.close()} .....就像那样）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T23:08:34.480

您应该考虑使用名为 nsiContentPolicy 的较低级别的 Firefox api - 可以将其与 SDK 一起使用，如本文所述：

[http://lduros.net/posts/blocking-images-and-other-content-mozila-add-sdk-and-nsicontentpolicy/](http://lduros.net/posts/blocking-images-and-other-content-mozila-add-sdk-and-nsicontentpolicy/)

# android - 在 eclipse 中处理韩文字符

> ID：11577349
> 
> 赞同：0
> 
> 时间：2012-07-20T10:16:14.543
> 
> 标签：android, eclipse

我正在尝试使用 eclipse 制作我的应用程序的韩语版本。如果我将韩文文本剪切并粘贴到 eclipse 的 strings.xml 视图中，所有字符都显示为小方块。但是当我切换到我的布局的图形视图时，韩文字符会正确显示......我可以以这种方式跛行并制作程序，但如果我能在查看时看到字符正确显示会更开心字符串.xml。知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:21:27.363

尝试将编辑器中的文本编码更改为`UTF-8.`

右键-->属性-->资源-->文本文件编码。

# c# - 如何计算归一化距离？

> ID：11577354
> 
> 赞同：0
> 
> 时间：2012-07-20T10:16:26.943
> 
> 标签：c#, geometry

我一直在查看我在这里找到的以下代码：http: [//tehc0dez.blogspot.co.uk/2010/04/nice-curves-catmullrom-spline-in-c.html](http://tehc0dez.blogspot.co.uk/2010/04/nice-curves-catmullrom-spline-in-c.html)

```
/// <summary>
/// Calculates interpolated point between two points using Catmull-Rom Spline
/// </summary>
/// <remarks>
/// Points calculated exist on the spline between points two and three.
/// </remarks>/// <param name="p0">First Point</param>
/// <param name="p1">Second Point</param>
/// <param name="p2">Third Point</param>
/// <param name="p3">Fourth Point</param>
/// <param name="t">
/// Normalised distance between second and third point 
/// where the spline point will be calculated
/// </param>
/// <returns>
/// Calculated Spline Point
/// </returns>
static public PointF PointOnCurve(PointF p0, PointF p1, PointF p2, 
                                  PointF p3, float t)
{
    PointF ret = new PointF();
    float t2 = t * t;
    float t3 = t2 * t;
    ret.X = 0.5f * ((2.0f * p1.X) + (-p0.X + p2.X) * t + 
                    (2.0f * p0.X - 5.0f * p1.X + 4 * p2.X - p3.X) * t2 + 
                    (-p0.X + 3.0f * p1.X - 3.0f * p2.X + p3.X) * t3);
    ret.Y = 0.5f * ((2.0f * p1.Y) + (-p0.Y + p2.Y) * t + 
                    (2.0f * p0.Y - 5.0f * p1.Y + 4 * p2.Y - p3.Y) * t2 + 
                    (-p0.Y + 3.0f * p1.Y - 3.0f * p2.Y + p3.Y) * t3);    
    return ret;
} 
```

我不明白的参数是 t ，它被描述为第二点和第三点之间的归一化距离。在这种情况下，什么是以及如何计算归一化距离？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T10:30:35.277

有关 Catmull-Rom Spline 的更好解释，请查看[此页面](http://www.mvps.org/directx/articles/catmull/)，图 1 应该可以帮助您。

您给出了四个点，它们定义了您的样条曲线。`t`表示点 2 和 3 之间的位置，应为其计算坐标。`t=0` *是*第 2 点，`t=1` *是*第 3 点。`t=0.5`在第 2 点和第 3 点之间。

为了在屏幕上绘制样条曲线，您通常会做的是`t`从 0 到 1 以特定的间隔运行，例如 0.1。这将为您提供`t`= 0.1、0.2、0.3、... 0.9 的点的确切坐标。您可以选择一个较小的间隔并为每个结果坐标绘制一个点，或者您可以选择一个较大的间隔并在两个相邻坐标之间绘制一条直线。

# build - maven-resources-plugin 的类似物或 leiningen 的 maven-antrun-plugin

> ID：11577362
> 
> 赞同：4
> 
> 时间：2012-07-20T10:16:46.367
> 
> 标签：build, clojure, leiningen

我使用 leiningen 来管理我的 clojure 项目，并且我想将 jar 文件与其他一些文件一起复制到某个目录中，作为构建过程的最后一部分。Leiningen 将“资源”视为应该包含在 jar 文件中的东西，这对我来说是不可接受的。如果我使用 maven，我可以使用 maven-resource-plugin 为此类任务配置它，或者使用 maven-antrun-plugin 回退到 Ant，但是对于 clojure 项目来说，leiningen 是更方便的工具。

奇怪的是，我无法在互联网上的 leiningen 中找到任何有关类似功能的信息。这很奇怪，因为主要的 clojure 应用程序之一是网站，而网站通常不会将它们的资源（js、css 等）包含在 jar 中（或者是吗？这很奇怪，因为轻微的 css 调整需要相当长的时间重新编译）。很自然，我们必须准备站点环境（将静态资源与jar包一起复制到一些目录布局中），这个任务应该由构建工具完成。

是否有一个插件可以在文件系统周围复制文件（或者可以替代它的东西，比如运行 Ant），或者我必须自己写一个？现在我正在使用 shell 脚本，但它非常不方便，因为我必须运行多个命令而不是一个命令，而且它也是不可移植的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-08T01:07:55.300

你检查[了 lein-resource](https://github.com/m0smith/lein-resource)吗？任何状况之下。这是lein[可用插件的一长串列表，也许你会觉得其中一些有用](https://github.com/technomancy/leiningen/wiki/Plugins)

# java - 如何自定义 Spring MVC 验证消息的资源键查找

> ID：11577363
> 
> 赞同：0
> 
> 时间：2012-07-20T10:16:49.603
> 
> 标签：java, spring-mvc, bean-validation

资源键外观的默认行为似乎是在字段名称前加上约束。我想发布修复它。

```
public class MyForm {
    @NotEmpty
    private String name;
} 
```

在我的`messages.properties`：

```
myForm.name=The label
NotEmpty.myForm.name=Please enter your name 
```

我想使用：

```
myForm.name=The label
myForm.name.NotEmpty=Please enter your name 
```

这显然纯粹是装饰性的，但我的强迫症无法处理我的资源文件的外观。

我正在使用带有休眠验证器 4.3.0.Final 的 spring 3.1.2。它自己的应用程序使用`@Configuration`,`@EnableWebMvc`和`WebMvcConfigurerAdapter`样式配置，但我应该能够翻译任何基于 xml 的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:30:50.123

一个简单的想法是扩展[`DefaultMessageCodesResolver`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/validation/DefaultMessageCodesResolver.html)和覆盖`postProcessMessageCode()`最初的方法：

```
protected String postProcessMessageCode(String code) {
    return getPrefix() + code;
} 
```

并按照你想要的方式改变它。我相信 Spring 会在引导时将您的 bean 类型`MessageCodesResolver`作为默认行为。希望这可以帮助。

在[Spring 3.1+](https://jira.springsource.org/browse/SPR-6506?focusedCommentId=62729&page=com.atlassian.jira.plugin.system.issuetabpanels%3acomment-tabpanel#comment-62729)中，现在您可以通过`<mvc:annotation-driven />`. 似乎对 Java API 的支持将出现在[3.2](http://static.springsource.org/spring-framework/docs/3.2.0.M1/api/org/springframework/web/servlet/config/annotation/WebMvcConfigurer.html#getMessageCodesResolver%28%29)中。

# image-preloader - Flexslider - 图像预加载器

> ID：11577369
> 
> 赞同：6
> 
> 时间：2012-07-20T10:17:10.313
> 
> 标签：image-preloader, flexslider

我的响应式 flexslider 插件有问题。除非您在实际幻灯片中有许多图像，否则该插件可以正常工作。加载行为是不可接受的。

我希望有人可以帮助我使用以下 flexslider 图像预加载器脚本，因为我无法让它工作。

这是我正在使用的代码：

FLEXSLIDER HTML

```
<div class="slider">
    <div class="flexslider loading" style="overflow-x: hidden; overflow-y: hidden; ">
        <ul class="slides" style="width: 5200%; -webkit-transition-duration: 0s; -webkit-transform: translate3d(-9702px, 0px, 0px); ">

        <li style="float: left; display: block; width: 940px; ">
        <img src="image1.jpg">  
        </li>
        <li style="float: left; display: block; width: 940px; ">
        <img src="image2.jpg">  
        </li>                       
        <li style="float: left; display: block; width: 940px; ">
        <img src="image3.jpg">

        </ul>

    </div> 
```

HTML HEAD 中的 FLEXSLIDER 脚本

```
<!-- FlexSlider -->
<script type="text/javascript" charset="utf-8">
    $(window).load(function() {
    $('.flexslider').flexslider({
    animation: "slide",  
    slideshow: false,
    controlsContainer: ".slider"

    start: function(slider) {
    slider.removeClass('loading');}

        });
 });                    

</script> 
```

FLEXSLIDER.CSS

```
.loading {min-height: 300px; background: url('loader.gif') no-repeat center center;} 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T17:04:53.837

不要使用 flexslider 中的滑块对象，而是尝试使滑块元素本身成为一个 jQuery 对象。

```
<!-- FlexSlider -->
<script type="text/javascript" charset="utf-8">
    $(window).load(function() {
       var target_flexslider = $('.flexslider');
       target_flexslider.flexslider({
           animation: "slide",  
           slideshow: false,
           controlsContainer: ".slider",

           start: function(slider) {
               target_flexslider.removeClass('loading');
           }

    });

});                    
</script> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-22T06:39:59.277

我尝试了很多次，对我来说它是这样工作的：

```
<script type="text/javascript" charset="utf-8">
  $(window).load(function() {
    $('.flexslider').flexslider({
        start: function(slider) {
            slider.removeClass('loading');
    }  
});
});
</script> 
```

在 flexslider.css 上

```
.loading {min-height: 300px; background: url('loader.gif') no-repeat center center !important;} 
```

注意“！important”部分，没有它就无法工作，因为它与flexslider的默认白色背景发生冲突。我将html设置为

```
 <div class="flexslider loading"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T09:56:44.413

我设法使用回调“之前”而不是“开始”让它工作。

所以 JS 位将是：

```
<!-- FlexSlider -->
<script type="text/javascript" charset="utf-8">
    $(window).load(function() {
      $('.flexslider').flexslider({
        animation: "slide",  
        slideshow: false,
        controlsContainer: ".slider"

        before: function(slider) {
          slider.removeClass('loading');
        }  
      });
    });                    

</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T13:13:54.163

尝试为每个 li 'style="display: none;"' 添加，除了第一个 li。它应该工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-29T15:36:52.317

我也在为此苦苦挣扎，实际上答案很简单。您的代码中唯一错误的是：

```
<div class="flexslider loading" style="overflow-x: hidden; overflow-y: hidden; "> 
```

在你的css中你定义加载类 .loading

因此，您必须更改该 div 的类。像这样：

```
<div class="loading" style="overflow-x: hidden; overflow-y: hidden; "> 
```

# javascript - 从javascript中的url哈希获取数据

> ID：11577370
> 
> 赞同：0
> 
> 时间：2012-07-20T10:17:18.820
> 
> 标签：javascript, regex, url, hash

我正在尝试从下面的 url 哈希中读取“源”参数和“组”参数。我不知道如何使用正则表达式并继续以空白变量结束。

如何从下面的 url 哈希中读取“源”和“组”参数

```
 console.log(urlObj.hash); // #source-items?source=1002&?group=Menu
    var source = urlObj.hash.replace( /.*source=/, ""); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:21:23.633

尝试

```
function getParameterByName(urlString, name)
{
  name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
  var regexS = "[\\?&]" + name + "=([^&#]*)";
  var regex = new RegExp(regexS);
  var results = regex.exec(urlString);
  if(results == null)
    return "";
  else
    return decodeURIComponent(results[1].replace(/\+/g, " "));
} 
```

并通过调用它`getParameterByName(urlObj.hash, "source");`

**更新：这是**[在 JavaScript 中获取查询字符串值](https://stackoverflow.com/q/901115/30594)的答案的略微修改版本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T10:25:36.157

如果你删除`?`之后`&`，你可以使用这样的东西：

```
function parseParams() {
    var params = window.location.hash.split('?')[1].split('&').map(function(item) {
        return item.split('=');
    });
    var namedparams = {};

    for (i=-1; param = params[++i]; ) {
        namedparams[param[0]] = param[1];
    }

    return namedparams;
} 
```

这是您使用此功能的方式：

```
var params = parseParams();
params.group; // the group parameter
params.source; // the source parameter 
```

# html - 自动将宽度扩展到文本字段

> ID：11577372
> 
> 赞同：0
> 
> 时间：2012-07-20T10:17:37.917
> 
> 标签：html, css, forms, uitextfield

如何根据浏览器宽度（使用纯 CSS）自动扩展文本字段。例如，如果我将浏览器缩放到最小宽度，那么文本字段也不应该跳转到第二行。

我需要和这张图片中显示的完全一样![在此处输入图像描述](../Images/7d69413bead3526b8c899bb7f67b182c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:35:26.487

不是 100% 确定这是所需的效果，但对于某些浏览器，这可能是您正在寻找的：

html:

```
<p>
<label>Test</label>
<span><input></span>
</p>​ 
```

和CSS：

```
label{width:200px;float:left;}
span{display:block;width:100%;box-sizing:border-box;padding-left:200px;}
input{width:100%;box-sizing:border-box;}​ 
```

示例： http: [//jsfiddle.net/48fNt/](http://jsfiddle.net/48fNt/)（至少在 chrome 中工作）

也许您还需要使用 white-space:nowrap 和 min-width。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T10:24:10.380

你不能单独使用 CSS 来做这件事。使用 [jQuery AutoResize 插件](http://james.padolsey.com/javascript/jquery-plugin-autoresize/)

```
 $('#myTextBox').autoResize({
        onResize : function() {
           //Do something on resize
        },
        animateCallback : function() {
           //Do something after resize
        },
        animateDuration : 300,//Duration
        extraSpace : 40//Extra Space
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T10:25:07.307

据我所知，您不能仅使用 CSS 作为输入，但您可以使用with属性来***模拟***[这种行为 - 演示http://dabblet.com/gist/3150040](http://dabblet.com/gist/3150040)`div`[**`contenteditable`**](https://developer.mozilla.org/en/HTML/Content_Editable)

HTML

```
<div contenteditable></div> 
```

CSS

```
div {
    min-width: 150px;
    width: auto;
    border: solid 1px #ccc;
    display: inline-block;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T10:54:06.540

有不止一种方法可以达到这个位置
[http://jsfiddle.net/rHqE7/4/](http://jsfiddle.net/rHqE7/4/)

```
<div id="wrap">
<div id="name">Name</div>
<input type="text" name="fname" id="text" />
</div>​

#wrap{width:500px;overflow:auto;}​
#name{float:left;width:100px;font-size:16pt;padding:10px 5px;}
#text{float:left;min-width:300px;max-height:20px;border:1px solid black;padding:3px;} 
```

# php - 是否使用 TCPDF API 实现了任何进度条功能

> ID：11577373
> 
> 赞同：0
> 
> 时间：2012-07-20T10:17:40.387
> 
> 标签：php, javascript, tcpdf

从过去 6 小时开始，尽最大努力在 TCPDF 中生成 pdf 以显示进度条，但未成功。

我正在使用 TCPDF API 生成 HTML 到 PDF，但问题是在生成 PDF 时我们不能使用自定义 javascript，我们可以在生成 PDF 时显示进度条吗？

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T09:46:15.513

我不确定你为什么说“不能使用自定义 javascript”。如果您只想要一个“加载图标”，则应该这样做-显示加载图标（来自js）-对php文件的ajax请求，将pdf生成到服务器文件中-成功后您将获得指向生成的pdf的链接。（对于这个解决方案，您可能会根据生成的文件的大小尝试一些估计）

如果你想要一个准确的渐进式，你应该在 php 文件上添加一些估计。假设当您生成 pdf 时，您知道将生成多少页，并且每个“addPage”命令都将完整性状态保存在文件或 memcached 键中。在您的 JavaScript 方面，您每秒调用一个文件来读取该完整性状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T10:45:32.083

不。

即使您能够使用自定义 javascript，也无法准确预测生成文档所需的时间并因此显示进度 - 但可以获得估计值（基于广泛的基准测试） . 但是为了显示进度条，您需要自定义 javascript 并更改处理以解耦浏览器和服务器上的线程。[在这个问题](https://stackoverflow.com/questions/11544714/why-does-php-send-it-all-at-once)中对此进行了更多讨论（恕我直言，这不是所引用帖子的重复）。

# android - 安全地发送电子邮件附件

> ID：11577375
> 
> 赞同：2
> 
> 时间：2012-07-20T10:17:46.617
> 
> 标签：android, security, file, email-attachments

我希望在 Android 上以电子邮件附件的形式安全地发送文件（文件内容对用户是私有的）。从我读过的所有帖子看来，只有在 SD 卡上创建文件并提供对所有（其他应用程序）的读取访问权限后，才能将文件作为电子邮件附件发送。就设备上的其他用户访问此数据而言，这似乎本质上是不安全的（假设是多用户设备）。

有没有办法在 Android 上安全地做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T11:07:37.350

> 从我读过的所有帖子看来，只有在 SD 卡上创建文件并提供对所有（其他应用程序）的读取访问权限后，才能将文件作为电子邮件附件发送。

电子邮件程序必须能够读取附件才能发送附件。AFAIK，在人类历史上创建的每个操作系统上都是如此。

这可能并不一定要求您将文件放在外部存储设备上（您称之为“SD 卡”），尽管我没有尝试使用 a 发送电子邮件附件`ContentProvider`以使附件可用于其他应用程序。无论如何，您没有很好的方法来限制仅对电子邮件客户端的读取访问，尽管您可以在一段时间后使访问不可用（例如，在您认为电子邮件已发送之后）。

> 就设备上的其他用户访问此数据而言，这似乎本质上是不安全的（假设是多用户设备）。

Android 目前还不是多用户操作系统。

> 有没有办法在 Android 上安全地做到这一点？

通过编写自己的电子邮件客户端，自己发送它，也许使用浮动的 JavaMail for Android 端口。

# c# - 为什么 Thread.Sleep() 会这样

> ID：11577376
> 
> 赞同：-3
> 
> 时间：2012-07-20T10:17:46.953
> 
> 标签：c#, multithreading

> **可能重复：**
> [为什么 Thread.sleep() 会以这种方式运行](https://stackoverflow.com/questions/11576637/why-does-thread-sleep-behave-in-this-way)

这是我写的一个简单的代码：

```
 private void button1_Click(object sender, EventArgs e)
    {
        label1.Text = "first";
        Thread.Sleep(1000);
        label1.Text = "second";
    } 
```

执行此代码并单击按钮时，label1 仅将文本显示为“第二”而不是“第一”。我使用断点检查，语句 label1.text="first" 被执行但标签不显示'first'。为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T10:21:49.463

因为您的代码在 UI 线程上运行。

当您的应用程序正在运行并且您没有点击任何东西时，应用程序的主线程会四处奔波，等待事件，处理 Windows 消息并绘制屏幕。当您单击按钮时，应用程序会停止执行这些操作，而是运行您的函数。在运行您的方法时，它无法绘制屏幕。您的函数将标签设置为“第一”，将线程阻塞一秒钟，然后将标签设置为“第二”。

当您返回时，控制权会传回给应用程序，然后应用程序可以自由地重新绘制表单。它使用“第二个”标签重新绘制它。消息循环从来没有机会用“第一个”标签来绘制它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T10:24:41.503

您正在运行一个单线程应用程序。虽然将 label1 对象的 Text 属性设置为“first”的语句已被执行，但由于您正在导致主应用程序线程暂停，[“Windows 消息泵”](http://en.wikipedia.org/wiki/Message_loop_in_Microsoft_Windows)并未被执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T10:21:30.140

问题是您在这里冻结了 UI 线程。

文本“first”已设置，但随后您将主 GUI 线程置于睡眠状态 - 因此 UI 不会被绘制。

睡眠阶段结束后，设置文本“second”并绘制 UI。

这正是 Windows 的工作方式，因此您必须以不同的方式进行操作。例如使用线程或Backgroundworker

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T10:21:00.533

如果你想延迟使用计时器。

在 UI 中看不到结果的原因是因为 Dipatcher 的优先级。渲染任务的优先级低于执行。

这可以帮助您：计时器！

```
DispatcherTimer dispatcherTimer = new DispatcherTimer();
dispatcherTimer.Tick += new EventHandler(dispatcherTimer_Tick);
dispatcherTimer.Interval = new TimeSpan(0, 0, 0, 1);
dispatcherTimer.Start();

private void dispatcherTimer_Tick(object sender, EventArgs e)
{
//your code goes here
} 
```

如果你在 WPF 中工作，你可以试试这个：

```
private void button1_Click(object sender, RoutedEventArgs e)
{
    label1.Text = "first";
    Dispatcher.Invoke(new Action(() => { }), DispatcherPriority.ContextIdle);
    Thread.Sleep(1000);                            
    label1.Text = "second";
} 
```

# javascript - 如何显示谷歌字体预览

> ID：11577379
> 
> 赞同：5
> 
> 时间：2012-07-20T10:18:06.753
> 
> 标签：javascript, jquery

我正在将 Google 字体系列名称加载到选择列表中。当用户从列表中选择任何字体系列时，我会动态加载该字体。我的代码：

```
$.get("https://www.googleapis.com/webfonts/v1/webfonts?key=...", {}, function (data) {
    $.each(data.items, function (index, value) {
        $('#fc').append($("<option></option>").attr("value", value.family)
                .text(value.family));
    });
    $('#fc').selectmenu({ select: function () {
        $('body').append("<link rel='stylesheet' id='colorbox-css'  href='http://fonts.googleapis.com/css?family=" + escape($(this).selectmenu("value")) + "' type='text/css' media='all' />");
    }
    });
}); 
```

现在我想在加载字体之前向用户显示字体的预览。

这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-12-30T01:37:35.693

我自己遇到了这个挑战，所以使用了一些控制台操作并开源了以下内容：[https ://github.com/onassar/GoogleWebFonts-FontFamilyPreviewImages](https://github.com/onassar/GoogleWebFonts-FontFamilyPreviewImages)

我会非常积极地维护它（现在只需要编写文档）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-07T06:43:21.690

试试**[HiGoogleFonts](https://github.com/saadqbal/HiGoogleFonts)**。它在下拉列表中显示所有 google 字体，并提供每种字体的预览。它只加载被选中的字体。它使用单个图像进行字体预览。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T13:27:34.633

[您可以按照此处所述](https://developers.google.com/webfonts/docs/webfont_loader)将字体加载到您的页面中。然后只需使用带有示例文本的 div 并根据从下拉列表中选择的字体对其进行样式设置。

具体查看关于添加事件处理程序的最后一节 - 您可以使用 JS 来检测字体何时完成加载并酌情应用它们

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T08:29:36.903

想到了这个 github 项目。它还为用户提供了谷歌字体的预览[Fontselect jQuery 插件](https://github.com/tommoor/fontselect-jquery-plugin)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-09T14:32:06.980

我最近在添加 Google Fonts API 功能以不断更新当前可用 Google 字体的选择列表时自己解决了这个问题。我使用[jQuery Fontselect Plugin](https://github.com/tommoor/fontselect-jquery-plugin)作为基础，但我对其进行了相当多的修改以适应我的目的。我在这里解释了我是如何解决它的：[https](https://www.bibleget.io/2020/04/released-v5-3-of-the-wordpress-plugin/) ://www.bibleget.io/2020/04/released-v5-3-of-the-wordpress-plugin/ 基本上我正在使用一些复杂的 cURL 请求到 Google Fonts API为了在本地下载每种字体的简化版本，其中仅包含用于字体名称的字符，然后将这些字体的简化版本预加载到具有选择下拉菜单的页面上。你可以在这里看到它的实际效果：[https ://youtu.be/zqJqU_5UZ5M](https://youtu.be/zqJqU_5UZ5M)

# eclipse - 如何设置 Eclipse 以忽略“类路径依赖验证器消息”警告

> ID：11577380
> 
> 赞同：14
> 
> 时间：2012-07-20T10:18:09.900
> 
> 标签：eclipse, liferay, warnings, classpath

我希望它在我的 Eclipse 项目中没有警告，但我收到了这个警告：

```
Classpath entry org.eclipse.jdt.USER_LIBRARY/Liferay 6.1 GA Plugin API will not be exported or published. Runtime ClassNotFoundExceptions may result. 
```

从警告类型`Classpath Dependency Validator Message`。

我明白 eclipse 想对我说什么，但那是错误的，该库存在于服务器上，将其与我的项目一起导出是不正确的。

但是，我需要在eclipse中设置这个警告忽略，我该怎么做呢？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-20T10:24:33.050

在此处将其删除：首选项 -> 验证 -> 类路径依赖验证器

还要检查您的特定项目是否有自己的验证设置覆盖全局设置。项目 -> 属性 -> 验证

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-26T08:47:51.390

选择警告，按 Ctrl+1（快速修复），选择“从...中排除关联的原始类路径条目”选项

# javascript - 如何在初始页面加载时禁用 Backbone.js 路由

> ID：11577385
> 
> 赞同：7
> 
> 时间：2012-07-20T10:18:28.230
> 
> 标签：javascript, model-view-controller, backbone.js, backbone-routing

我知道最佳做法是说“您的内容必须在页面加载时可用”，我就这样做了。如果用户导航到`/questionnaire/info/id/2`，PHP 会提供完整的 html。但是在此之后问题出现了，backbone.js 匹配相同的路由并重新请求相同的页面并使用 ajax 加载它。

如何为当前页面的首次加载禁用主干？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T10:29:27.260

我找到了答案。只需使用 silent: true 参数开始历史记录，如下所示：

```
Backbone.history.start({pushState: true, silent: true}); 
```

# ruby-on-rails - 如何将 IPN 处理程序与 Pay 操作一起使用并接收消息？

> ID：11577388
> 
> 赞同：0
> 
> 时间：2012-07-20T10:18:43.983
> 
> 标签：ruby-on-rails, paypal, paypal-ipn

我有功能，付费用户：

```
 def pay
    require 'httpclient'
    require 'xmlsimple'
    clnt = HTTPClient.new
    user = User.find(params[:user_id])
    @params_id = params[:user_id]
    credentials = {
        'USER' => 'payer_1342623102_biz_api1.gmail.com',
       'PWD' => '1342623141',
       'SIGNATURE' => 'Ay2zwWYEoiRoHTTVv365EK8U1lNzAESedJw09MPnj0SEIENMKd6jvnKL '
     }

    header =  {"X-PAYPAL-SECURITY-USERID" => "payer_1342623102_biz_api1.gmail.com",
                   "X-PAYPAL-SECURITY-PASSWORD" => "1342623141",
                   "X-PAYPAL-SECURITY-SIGNATURE" => "Ay2zwWYEoiRoHTTVv365EK8U1lNzAESedJw09MPnj0SEIENMKd6jvnKL ",
                   "X-PAYPAL-REQUEST-DATA-FORMAT" => "NV",
                   "X-PAYPAL-RESPONSE-DATA-FORMAT" => "XML",
                   "X-PAYPAL-APPLICATION-ID" =>  "APP-80W284485P519543T"
                    }
    //here is data what is posting to PayPal
    data = {"actionType" => "PAY",
               "receiverList.receiver(0).email"=> user.email,
               "receiverList.receiver(0).amount" => "10",
               "currencyCode" => "USD",
               "cancelUrl" => "http://127.0.0.1:3000/",
               "returnUrl" => "http://127.0.0.1:3000/",          
               "requestEnvelope.errorLanguage" => "en_US"}
    uri = "https://svcs.sandbox.paypal.com/AdaptivePayments/Pay"
    res = clnt.post(uri, data, header) 
```

从文档结束：

```
 Adaptive Payments API operation  - use -
  ipnNotificationUrl field of the Pay or Preapproval request 
```

所以，我应该添加到数据变量中：

```
 "ipnNotificationUrl" => "myaapp.com"//my site url yes ? 
```

我应该在这个字段中输入我的网站网址吗？

如何从此通知中获取信息？

如果交易成功，如何发送一些电子邮件并执行一些操作？

我不能在本地测试它，是吗？

如何在沙盒中测试它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T01:50:14.520

是的，如果您想接收与付款相关的通知，您应该包含该字段，

您需要指定一个可从外部访问的 URL（因为这是 PayPal 将从其服务器发布信息的位置）。

这个 URL 可以是一个 PHP 页面，在收到 IPN 并对其进行验证后，会发送您提到的电子邮件。

要模拟来自 PayPal 的 IPN，您可以使用沙盒开发者页面中的以下工具：[https ://developer.paypal.com/cgi-bin/devscr?cmd=_ipn-link-session](https://developer.paypal.com/cgi-bin/devscr?cmd=_ipn-link-session)

（或者，您可以在沙箱中完成购买，如果您在 API 调用中指定了 ipnNotificationURL，PayPal 将在付款完成后发送给您）

# android - 我怎么知道设备有多少 DPI？

> ID：11577391
> 
> 赞同：4
> 
> 时间：2012-07-20T10:18:54.043
> 
> 标签：android, screen, resolution

我怎么知道一个设备有多少 DPI（因此如果它是 ldpi / mdpi / hdpi / xhdpi， - 以及屏幕尺寸，也以 dp 为单位测量 - xlarge / large / normal / small - 根据[http://developer .android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)）？

我知道设备的分辨率和对角线尺寸，例如：

> 显示 TFT LCD，3.5 英寸（89 毫米）对角线。
> 
> 320×480 px HVGA，带大猩猩玻璃
> 
> 1600万色

（取自[http://en.wikipedia.org/wiki/Samsung_Galaxy_Ace](http://en.wikipedia.org/wiki/Samsung_Galaxy_Ace)）

不需要它以编程方式，只是为了计算自己。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T10:43:55.517

使用[DPI 计算器计算 dpi，并在](http://members.ping.de/~sven/dpi.html)[dev docs](http://developer.android.com/guide/practices/screens_support.html)中确定其 ldpi、mdpi 等是否符合图 1 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T10:50:59.433

我认为 DPI 指的是打印机......在你的情况下 DPI = PPI。如果我错了，请纠正我[编辑：我错了：P]

'因此，一台 1200 dpi 的打印机每英寸使用 1200 个墨水点来构成颜色。如果您要打印 300 PPI 的图像，那么每个像素将由 16 个较小的墨点组成（1200 DPI x 1200 DPI / 300 PPI x 300 PPI）。较低的 DPI 会使组成每个像素的墨点更少，这会使颜色看起来更糟。更高的 DPI 会为每个像素提供更多的墨点，并且应该提供更准确的颜色（尤其是在仔细检查时）。

# java - 从 servlet 发送 post 请求

> ID：11577394
> 
> 赞同：1
> 
> 时间：2012-07-20T10:19:01.210
> 
> 标签：java, apache-commons-httpclient, accesscontrolexception

我一直在尝试从 servlet 发送 POST 请求，我编写的代码是这样的：

```
HttpPost post = new HttpPost(url.build());
post.setEntity(new UrlEncodedFormEntity(nameValue));
post.setHeader("content-type", "application/json");
HttpClient client = new DefaultHttpClient();
HttpResponse res = client.execute(post); 
```

URL 是“https://accounts.google.com/o/oauth2/token”，我在这个请求中发送了一些参数。

但是，当我运行它时，我得到`AccessControlException`.

我这里使用的`HttpPost`方法来自`org.apache.http`即commons HttpClient API。我已经尝试了很多，但它似乎不起作用。

所以问题是“是否可以使用 HttpClient 发送跨域请求？”

# java - 对象处理数组的 Java 字符串表示

> ID：11577400
> 
> 赞同：2
> 
> 时间：2012-07-20T10:19:44.113
> 
> 标签：java, arrays, reflection

我有一个 Object 类型的对象，我想使用*toString()*方法返回它的 String 表示，除非它是一个数组，否则我想返回对象的 Arrays.toString()（我不需要一个 deepToString）。

我考虑过使用这个：

```
public static String getValueAsString(Object value){
    if(value != null && value.getClass().isArray()){
        if(value instanceof Object[])
            return Arrays.toString((Object[])value);
        else if(value instanceof int[])
            return Arrays.toString((int[])value);
        else ...
    }else
        return String.valueOf(value);
} 
```

问题是我可以检测到它是一个数组，但我必须处理所有不同的原始数组......

有没有更清洁的方法来实现这一目标？使用核心方法还是反射？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T10:23:47.900

您可以使用反射在数组上调用正确的 Arrays.toString 方法，如下所示：

```
public static String toStr(Object a) {
        if (a == null)
              return "null"; //like String.valueOf(null);

        Class<?> clazz = a.getClass();
        if (clazz.isArray()) {
            if (Object[].class.isAssignableFrom(clazz))
                clazz = Object[].class;
            try {
                final Method m = Arrays.class.getMethod("toString", clazz);
                return (String) m.invoke(null, a);
            } catch (Exception e) {
                throw new RuntimeException(e);
            }
        } else {
            return a.toString();
        }
    } 
```

它适用于原始数组和对象数组：

```
public static void main(String[] args) {
        System.out.println(toStr(new int[]{2,4}));
        System.out.println(toStr(new double[]{2L,3L}));
        System.out.println(toStr(new String[]{"a","b", null}));
        System.out.println(toStr(new Integer[]{2,3}));
        System.out.println(toStr(new char[]{'a','r'}));
    } 
```

输出：

```
[2, 4]
[2.0, 3.0]
[a, b, null]
[2, 3]
[a, r] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T10:24:46.127

您可以使用泛型[`Array`](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Array.html)类来迭代**任何**数组，如下所示：

```
private static String toStr(Object o) {
    if (o == null || !o.getClass().isArray()) {
        return String.valueOf(o);

    } else {
        final int len = Array.getLength(o);

        StringBuilder sb = new StringBuilder('[');
        for (int i = 0; i < len; i++)
            sb.append(Array.get(o, i)).append(i + 1 < len ? ", " : "");

        return sb.append(']').toString();
    }
} 
```

* * *

## 例子：

```
public static void main(String[] args) {

    System.out.println(toStr(new int[] {1,2,3}));
    System.out.println(toStr(new double[] {4.0, 5.0, 6.0}));
    System.out.println(toStr(new Object[] {null, 7, 8.0}));
    System.out.println(toStr("Hello World!"));
} 
```

输出：

```
[1, 2, 3]
[4.0, 5.0, 6.0]
[null, 7, 8.0]
Hello World! 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T10:32:01.497

尝试 Apache Commons 语言 - [ArrayUtils.toString()](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/ArrayUtils.html)

```
public static String toString(Object array) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T11:51:31.770

我最近使用[这篇博文](http://binkley.blogspot.nl/2007/08/recursive-tostring.html)作为创建灵活的递归 toString 方法的基础。

# javascript - onclick 在视图中显示重复的 json 结果

> ID：11577414
> 
> 赞同：0
> 
> 时间：2012-07-20T10:20:20.690
> 
> 标签：javascript, jquery, json

我有从我的控制器返回的数据，并且 thouse 结果在 js 中正确显示为 json，它在我的视图中附加 div 以显示这些数据。现在我有一个问题，每次点击 div 都会附加到 +1 行以显示相同的数据。如何在添加新 div 之前在单击操作时删除这些 div。

```
 success: function (result) {
            var data = null;
            $.each(result, function (i, item) {
                data = '<div>' + item.Id + ' ' + item.Title + '</div>';
                $("#tab-" + item.PropertyType).append(data);
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:28:34.477

在添加一组新 div 之前，您可以删除所有父 div 名称以“tab-”开头的 div

```
success: function (result) {
        var data = null;
        $("[id^='tab-'] div").remove();
        $.each(result, function (i, item) {
            data = '<div>' + item.Id + ' ' + item.Title + '</div>';
            $("#tab-" + item.PropertyType).append(data);
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T10:34:55.930

试试这个 ：

```
 success: function (result) {
        var data = null;
        $.each(result, function (i, item) {
            $("#tab-" + item.PropertyType).children('div').remove(); //remove any divs inside the tab 
            data = '<div>' + item.Id + ' ' + item.Title + '</div>';
            $("#tab-" + item.PropertyType).append(data);
        }); 
```

**或：**成功时替换选项卡的全部内容：

```
success: function (result) {
        $.each(result, function (i, item) {
            $("#tab-" + item.PropertyType).html('<div>' + item.Id + ' ' + item.Title + '</div>');
        }); 
```

# java - 致命错误：1:1：序言中不允许内容

> ID：11577420
> 
> 赞同：30
> 
> 时间：2012-07-20T10:20:57.137
> 
> 标签：java, xml

我正在使用 Java，我正在尝试从一些 http 链接获取 XML 文档。我正在使用的代码是：

```
URL url = new URL(link);

HttpURLConnection connection = (HttpURLConnection)url.openConnection();
connection.setRequestMethod("GET");
connection.connect();
Document doc = null;

CountInputStream in = new CountInputStream(url.openStream());
doc = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(in); 
```

不要注意`CountInputStream`，它是一些像常规输入流一样的特殊类。

使用上面的代码，我有时会遇到错误`Fatal Error :1:1: Content is not allowed in prolog`。我认为这与 xml 格式错误有关，但我不知道如何修复它。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-22T21:02:24.753

*我正在将我的评论变成一个答案，所以它可以被接受，这个问题不再没有答案。*

最可能的原因是格式错误的响应，其中包括初始`<?xml …&gt;`. 因此，请查看通过 HTTP 传输的文档，并在服务器端修复此问题。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-20T11:06:44.010

在 XML 前导 ( ) 之前肯定有一些奇怪的字符（例如[BOM](http://en.wikipedia.org/wiki/Byte_order_mark)`<?xml ...?>` ）或一些空格？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-31T16:46:15.017

我为这个问题找到的真正解决方案是*禁用任何 XML 格式后处理器*。我添加了一个名为“ `jp@gc - XML Format Post Processor`”的后处理器并开始注意到错误“ `Fatal Error :1:1: Content is not allowed in prolog`”

**通过禁用**后处理器已经停止抛出这些错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-11-12T17:48:37.310

我想要 log4j2 配置文件的 YAML，因为它消除了 XML 的视觉混乱，但与 Guest96 有相同的错误。我在网上搜索了上述问题的解决方案，调查了 Utf-8 BOM 或 YAML 标头区域中的其他内容；没有喜悦。当然，答案通常很简单。

在某个地方，我完全错过了使用 YAML 和 log4j2 需要*杰克逊*库，每个[https://www.sentinelone.com/blog/log4j2-configuration-detailed-guide/](https://www.sentinelone.com/blog/log4j2-configuration-detailed-guide/)。将*杰克逊*引用添加到我的（Gradle）配置解决了这个问题：

```
// Gain support for log4j2.
// https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j
implementation 'org.apache.logging.log4j:log4j-api:2.14.1'
implementation 'org.apache.logging.log4j:log4j-core:2.14.1'

// Gain support for YAML with log4j2.
// https://www.sentinelone.com/blog/log4j2-configuration-detailed-guide/
implementation 'com.fasterxml.jackson.dataformat:jackson-dataformat-yaml:2.10.0'
implementation 'com.fasterxml.jackson.core:jackson-databind:2.10.0' 
```

这样，可怕的**Fatal Error :1:1: Content is not allowed in prolog**错误就消失了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-13T09:04:46.413

有人应该将 Johannes Weiß 的评论标记为这个问题的答案。这就是为什么 xml 文档不能只加载到 DOM Document 类中的原因。

[http://en.wikipedia.org/wiki/Byte_order_mark](http://en.wikipedia.org/wiki/Byte_order_mark)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-24T08:45:52.843

可能*不支持文件编码*。例如，将其更改为 UTF-8。

我已经使用[Sublime完成了这个](https://stackoverflow.com/questions/21289157/set-encoding-of-file-to-utf8-with-bom-in-sublime-text-3)

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2018-05-29T06:01:50.453

看起来您忘记在获取请求中添加正确的标头（询问 REST API 开发人员或您的特定 API 描述）：

```
HttpURLConnection connection = (HttpURLConnection)url.openConnection();
connection.header("Accept", "application/xml")
connection.setRequestMethod("GET");
connection.connect(); 
```

或者

```
connection.header("Accept", "application/xml;version=1") 
```

# c# - 在 MS SQL server R2 中等待超过 24 小时执行

> ID：11577423
> 
> 赞同：0
> 
> 时间：2012-07-20T10:21:00.210
> 
> 标签：c#, sql-server-2008, stored-procedures, sql-server-2008-r2, sql-agent-job

**我的问题（场景）：**

已经有一个内置的方法调用**“WAITFOR”**可以执行例如**“存储过程”**。这种等待只能完成不到 24 小时。

但问题是我的客户也是一名开发人员，他想找到一种方法来解决这个问题，并找到一种等待超过 24 小时以减少**开发时间**的方法。

已经有方法了。这可以每天查询一次必要的表，并将必要的电子邮件发送给客户等。

我知道，由于这个**“WAITFOR”**被限制为 24 小时，因此必须存在性能问题，因为这个**“WAITFOR”**执行次数会更高（例如 2000）。

**我的问题：**

1.  有没有办法让存储过程超过 24 小时。可以说超过14天。
2.  如果没有办法解决这个问题，我应该如何为这个问题辩护，我可以向我的客户提供哪些事实，例如性能问题，，

这就是我的想法，由于这种等待仅限于 24 小时，因此没有其他选择可以提供预期的功能来准确按时执行数据库任务。但这给服务器带来了很大的开销，以跟踪每个**“WAITFOR”**执行。如果这个超过2000左右，，这对于服务器来说是无法承受的。

可用的最佳选择是让**“SQL 代理作业”**每天运行一次（如您所愿）并获取与设置**WAITFOR**相关的值以准时执行某些作业。

请让我更好地理解等待超过 24 小时的问题。去寻找下一个选择。:((((

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T10:30:13.140

> 有没有办法让存储过程超过 24 小时。可以说超过14天。

是的，例如 14 x 24 小时`WAITFOR`……当然，这将是**无法形容的可怕**；您正在强制连接在该期间保持打开状态，在该期间消耗服务器上的资源等等。

您所描述的*正是*SQL 代理作业的用途，使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:16:00.917

关于 WAITFOR 限制的问题可以通过简单的方式解决——只需执行几次“Waitfor”即可：

```
Declare @i int;
Set @i = 0;
While @i < 5
Begin
    Set @i = @i + 1
    WAITFOR DELAY '00:00:01';
End; 
```

如果您想在精确的时间段后执行某些作业，则可以使用服务代理 (SB) 和对话计时器。（我只是喜欢 SB，所以也许我到处都能看到它的用法……）。

在 SB 中，您可以发送消息（女巫可能包括应该运行的时间，或者您可以设置固定时间）并启动对话计时器。这样你就不会保持连接打开。

SB [BEGIN CONVERSATION TIMER](http://msdn.microsoft.com/en-us/library/ms187804.aspx)和[Service Broker](http://msdn.microsoft.com/en-us/library/bb522893.aspx)。

# java - 我是mysql，没有得到id

> ID：11577424
> 
> 赞同：0
> 
> 时间：2012-07-20T10:21:01.363
> 
> 标签：java, mysql

在我们的聊天应用程序中，以下是这种情况，在两种情况下，有一个人“A”与人“B”聊天，1）一对一聊天和 2）群聊。所以在数据库中的记录如下，

**表：核心**

```
 id   name
   1    A
   2    B
   3    C 
```

表：**主**

```
 id    core_id 
  1       1
  2       2 
```

表：**收件人**

```
 id    core_id    master_id
  1       1        1 
  2       2        1
  3       1        2
  4       2        2
  5       3        2 
```

所以在接收者表中，我们有 2 个“A”条目。现在的问题是，我想要 master_id = 1 表格接收者表，其中“A”和“B”人进行通信。但是接收者表中有两个条目。那么如何获得该ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:59:06.393

目前尚不清楚您要问什么，并且您的表名无助于使这一点更清晰。但是，我怀疑您仅根据 master_id 从收件人表中选择记录，并且需要与其他表连接，以便您还可以在查询中包含名称。

因此，考虑到这一点，请尝试以下操作（警告：我尚未对此进行测试，并且我使用的是 Oracle 而不是 mysql）但是：

```
select * 
from core c, master m, recipient r
where c.id = m.core_id
and   c.id = r.core_id
and   m.id = r.master_id
and   c.name = 'A' 
```

在有人抱怨这个 sql 不遵循最新的 ANSI 标准之前，我就是这样做的，它对我有用！

# jquery - JQuery 日历来跟踪约会

> ID：11577426
> 
> 赞同：2
> 
> 时间：2012-07-20T10:21:10.580
> 
> 标签：jquery, web-applications, calendar

我正在实现一个简单的 Web 应用程序来跟踪公司内的工作面试日期。

有一个插入/更新约会日期和描述的界面，现在我想创建一个带有日历的页面，显示为约会选择的日期。单击它查看每个日期的详细信息可能很有用。

我可以使用 JQuery datepicker 来实现这一点吗？或者是否有其他插件来实现这种类型的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T10:25:15.887

根据我的个人经验，FullCalendar 是一个 jQuery 插件，它提供了一个全尺寸的拖放日历。我说这将是你最好的选择。它被广泛的开发人员所接受，几乎可以插入每一种网络技术。它是一个基于 jquery 的解决方案，并且记录得很好。它也很容易定制（例如：像 Outlook 日历）。我建议/推荐您使用 FullCalendar 插件。您可以在**[这里](http://arshaw.com/fullcalendar/)**查看演示和文档。

**更新**

**[首先，您可以在gitHub](https://github.com/biesior/Play-20-Sample-FullCalendar-Java)**上找到 FullCalendar 插件的简单示例 java 集成。如果您在 SO 上遇到任何问题，您会发现像您和我这样的开发人员面临的许多问题。

我希望这能帮到您。

# tabcontrol - C#：在其他选项卡中执行某些操作后如何自行刷新某人选项卡？

> ID：11577429
> 
> 赞同：0
> 
> 时间：2012-07-20T10:21:24.453
> 
> 标签：tabcontrol

```
<UserControl.DataContext>
    <local:Model1 />
</UserControl.DataContext>
<Grid x:Name="LayoutRoot">
    <telerik:RadTabControl Name="tab">
        <telerik:RadTabItem x:Name="Tab0"
                            Height="30"
                            MinWidth="100"
                            Header="t1"
                            TabIndex="0">
            <my:Control1 />
        </telerik:RadTabItem>
        <telerik:RadTabItem x:Name="Tab1"
                            Height="30"
                            MinWidth="100"
                            Header="t2"
                            TabIndex="1">
            <my:Control2 />
        </telerik:RadTabItem>
        <telerik:RadTabItem x:Name="Tab2"
                            Height="30"
                            MinWidth="100"
                            Header="t3"
                            TabIndex="2">
            <my:Control3 />
        </telerik:RadTabItem>
    </telerik:RadTabControl> 
```

以下是我的 tabcontrol Radtabitems 中的所有控件都显示了数据来自数据库的表。Radtabitems 中的所有控件都具有刷新功能，用于在刷新数据库中的日期时进行刷新。

问题是如何在其他选项卡中执行某些操作后自行刷新某人选项卡？请帮我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:57:44.213

```
<my:Control2 x:Name = "myControl1"/> 
```

并在您的 .cs 中使用 selectionchanged

。CS

```
selectionchanged....
{
   //if itemIndex = 1
   Control2 temp = myControl1;
   //some veiwing model...for example: ViewControl2
   if(temp.Datacontext is ViewControl2)
   {
      ViewControl2 Viewtmp = temp.Datacontext as ViewControl2;
      Viewtmp.Refresh();//your refresh function can create in Viewtmp
   }
} 
```

# c# - c#在两个表单之间创建引用

> ID：11577430
> 
> 赞同：0
> 
> 时间：2012-07-20T10:21:25.797
> 
> 标签：c#

我的问题可能听起来很奇怪，但我不知道如何在 2 个窗口窗体之间*创建*引用（例如创建引用并将其命名为 TheMainForm1）。我从 2 天以来一直在与这个作斗争（是的，我知道...... ）我想要做的是隐藏Form1，但直到现在我发现的唯一方法是：

```
this.Hide();
        Form2 form2 = new Form2();
        form2.Show(); 
```

但是上面的代码创建了一个新的 Form1...

请指导我如何创建参考，我正在尝试学习 c#。

非常感谢任何重播！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:29:46.880

你可以试试这个解决方案：

应该有一个`Program.cs`包含一个`Program`类。添加两个静态属性（或字段）并使用它们。

```
static class Program
{
    internal static Form1 form1;
    internal static Form2 form2;

    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        form1 = new Form1();
        form2 = new Form2();
        Application.Run(form1);
    }
} 
```

如果你想从 切换`Form1`到`Form2`，你可以使用这个：

```
this.Hide();
Program.form2.Show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T10:25:03.000

为什么不直接将它传入 Form1 的构造函数并将其存储在成员变量中呢？

```
public Form1(Form2 form2)
{
  // store in member
  _form2 = form2;
} 
```

# android - 在 Sony Xperia NXT 系列（U、Sola、P、S）中安装自定义 Android 内核

> ID：11577438
> 
> 赞同：1
> 
> 时间：2012-07-20T10:21:55.843
> 
> 标签：android, linux-kernel, kernel, android-source

我有一台 Sony Xperia P。它在 6_0_B_1_564 内核和 Andriod 2.3.7 上运行。我已经从源代码编译了一个自定义内核。我改变了外向性等。我得到了 zImage。如何在手机上安装它？

我已经尝试过 Anykernel.zip 方法。当我尝试使用 Clockworkmod 安装它时，我得到-

```
--Installing: /sdcard/new_kernel.zip
Finding update package...
Opening update package...
Installing update...
AnyKernel Updater by Koush.
Extracting System Files...
Extracting Kernel files...
Changing device name...
Done!

Install from sdcard complete. 
```

但是当我启动手机时，它是相同的旧内核

当我通过zip文件的内容时，我发现里面没有boot.img。

我可以使用 Fastboot 刷新内核吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T19:36:53.783

最后我确实设法安装了自定义内核。猜猜该程序适用于所有索尼 Xperia NXT 系列手机（Xperia U、Sola、P、S）。我就是这样做的——

1.  从以下链接下载 Stock Kernel -

    [索尼 Xperia U](http://d-h.st/6q1)

    [索尼 Xperia Sola](http://d-h.st/aoY)

    [索尼 Xperia P](http://d-h.st/Gaa)

    [索尼 Xperia S](http://api.viglink.com/api/click?format=go&drKey=1359&loc=http%3A%2F%2Fforum.xda-developers.com%2Fshowthread.php%3Ft%3D1635582&v=1&libid=1343847870568&out=http%3A%2F%2Fbit.ly%2Fxps_ask_1&ref=http%3A%2F%2Fforum.xda-developers.com%2Fshowthread.php%3Fp%3D16742112&title=%5BKERNEL%5D%5BXperia%20S%5D%20Advanced%20Stock%20Kernel%20with%20Recovery%20%5BRel%3Av01%5D%5BDt%3A05%2FMAY%5D%20-%20xda-developers&txt=%3Cb%3E%5BXperia%20S%5D%20Advanced%20Stock%20Kernel%20%28FW%3A%20.62%2F.67%2F.73%20%29%3C%2Fb%3E&jsonp=vglnk_jsonp_13438478860922)

    这些将是 ELF 格式。

2.  [从这里](http://dl-developer.sonymobile.com/tools/image_generation_script_for_Xperia_smartphones.zip)下载图像生成脚本。

3.  解压 Stock Kernel。

    `7z e kernel.elf`

    这会产生三个文件 -

    `0 - Kernel`

    `1 - RAMDisk`

    `2 - Resource Power Manager (only for Xperia S)`

4.  用自定义编译的内核（`zImage`）替换内核。注意`zImage`重命名为`0`. 由于我们打算只更改内核，因此请保持 RAMDisk 和资源电源管理器（如果有）不变。

5.  使用之前下载的脚本生成内核映像

    对于 Xperia U、Sola 和 P -

    `python mkelf.py -o new_kernel.elf 0@0x00200000 1@0x01200000,ramdisk`

    对于 Xperia S -

    `python mkelf.py -o new_kernel.elf 0@0x40208000 1@0x41200000,ramdisk 2@0x20000,rpm`

    这会生成一个新内核`new_kernel.elf`

6.  按住音量调高按钮，然后在关闭状态下按电源按钮，将手机重新启动到快速启动模式。

7.  刷入新内核

    `android-sdk-linux/platform-tools/fastboot -i 0x0fce flash boot new_kernel.elf`

    重启手机。

    `android-sdk-linux/platform-tools/fastboot -i 0x0fce reboot`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T10:37:28.583

当您使用 anykernel 更新程序时，会发生以下情况。

> updater-script 运行并从您当前的 ROM 中提取 boot.img。它将 boot.img 解压缩到内核和 ramdisk 中。它使用新内核和相同的 ramdisk 重新打包 newboot.img。它会闪烁新创建的引导映像。

现在，您的 boot.img 与旧内核的相同。只有您的 zImage 已更改。

现在该脚本可能与您现有的内核不兼容。

`uname -a`使用终端模拟器之类的工具从控制台检查以确认带有时间戳的内核版本。检查时间戳以查看新的 zImage 是否到位。

# c# - 动态创建控件还是以侧面形式创建控件？C# 窗体

> ID：11577440
> 
> 赞同：1
> 
> 时间：2012-07-20T10:22:03.033
> 
> 标签：c#, .net, winforms

我有一个充满控件的表单，没有其他控件的空间。在表单的底部，我有一个面板，上面有一些控件。

我的目标是，当单击某个按钮时，底部的原始面板将替换为另一个包含可以在程序启动之前创建的控件的面板，这意味着面板中的这些控件不需要动态创建。将通过将每个面板的可见字段设置为其匹配值来执行替换操作。

我已经想到了两种方法 - 要么动态创建新面板（及其控件）并将其添加到表单而不是原始面板，要么以另一种形式创建新面板，然后单击相关按钮时面板正在取自该表单并添加到所需的表单（通过创建新表单的实例并将其设为面板的修饰符公开）。“侧面表单”的目的只是创建该面板，它没有自己的功能。

动态创建新面板的优点：

*   无需创建零功能表单。

以侧面形式创建新面板的优点：

*   哪些控件添加到新面板及其位置非常清楚。
*   在新面板中设置控件的位置和其他字段非常容易。

哪种方式更好？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:31:59.473

IMO 最好的方法是为此目的使用用户控件。只需为您希望显示/隐藏的每个面板创建一个用户控件，然后将控件放置在其中。这样，您将同时拥有：设计师和您想要的“额外形式”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T10:34:49.153

你考虑过 TabControl 吗？这似乎很适合您的需求。我能想到的其他控件是 StackPanel（对于 Windows 窗体可以相当容易地完成）或类似 OutlookBar 的控件（又是一个用户控件）。

最简单最快的方法似乎是 TabControl。

编辑：

1.  我想 SideForm 是一种不同的窗口形式。因此，如果您正在考虑将控件公开，然后更改其可见性等，请不要这样做。在 MainForm 中使用委托来处理 SideForm 的事件。
2.  正如您所提到的，没有更多控件的空间，我建议使用更多屏幕而不仅仅是一个。话虽如此，我对您当前的 UI 设计和功能知之甚少，所以这取决于您。

我会说隐藏控件并仅使用可见性就可以了。这意味着您不必担心运行时控件的定位、锚定和停靠。问题很可能是加载表单。拥有大量与它们相关联的数据的控件可能会减慢速度。

# javascript - IE7 / 8不动态添加css属性'top'作为内联样式

> ID：11577441
> 
> 赞同：1
> 
> 时间：2012-07-20T10:22:03.223
> 
> 标签：javascript, jquery, html, css, internet-explorer-7

我正在处理其他人整理的一些代码。这个想法是在一个页面上你有多个表格。首先，它们只是一个图像，但是当您单击图像时，您可以查看整个表格。这些表格被包裹在一个 div 覆盖层中，该覆盖层根据您在页面上的位置控制表格的位置。

该脚本基本上会找到您在页面上的位置，然后将“顶部”属性添加为内联样式，像素将取决于您单击的表格以及您在页面上的位置。它在除 IE7 / 8 之外的所有浏览器中都能正常工作。

我已经解决了问题，它没有将“顶部”属性添加为内联样式。在 IE7 / 8 中。我尝试添加一个可以在其中添加顶部的类，但不能以这种方式动态添加样式。

无论如何，这里有一些代码：

添加 top 属性的 JS 片段：

```
// Get the current browser size and scroll position
        viewport_width = viewport().width;
        viewport_height = viewport().height;

        viewport_offsetx = window.pageXOffset;
        viewport_offsety = window.pageYOffset;

        $("#tablesorter_overlay").css("top", viewport_offsety);

        table_instance = $("#tablesorter_" + $(this).attr("rel"));
        table_instance.css("position", "absolute");

        // Make a copy of this table so we'll have the original safe, and set it to be sorted. Add it to the overlay
        new_table_instance = table_instance.clone().tablesorter();
        new_table_instance.appendTo("#tablesorter_overlay");
        new_table_instance.show(); 
```

//点击表格后的表格和覆盖HTML...

```
<div id="tablesorter_overlay" style="top: 2803px;" class="topclass">
<p class="tablesorter_overlay_close"><a href="#">X</a></p><table cellspacing="0" cellpadding="0" class="tablesorter generic" id="tablesorter_2" style="max-width: 95%; position: absolute;">
<thead> 
<tr> etc.. 
```

**注意：html 代码是 firefox 代码，在 IE 中是一样的，但没有 'top' 属性。

我知道缺少代码，但我希望你不再需要，因为我（手指交叉）发现了问题。

谢谢！

乔什

***答案********

```
function getScrollTop(){
        if(typeof pageYOffset!= 'undefined'){
        //most browsers
        return pageYOffset;
    }
        else{
            var B= document.body; //IE 'quirks'
            var D= document.documentElement; //IE with doctype
            D= (D.clientHeight)? D: B;
            return D.scrollTop;
    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T23:56:28.350

尝试将 position:relative 放在其父级上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T16:08:23.440

函数 getScrollTop()

```
{
        if(typeof pageYOffset!= 'undefined'){
        //most browsers
        return pageYOffset;
    }
        else{
            var B= document.body; //IE 'quirks'
            var D= document.documentElement; //IE with doctype
            D= (D.clientHeight)? D: B;
            return D.scrollTop;
    }
    } 
```

# macos - 在 Cocoa 应用程序中获取文件夹的路径

> ID：11577442
> 
> 赞同：0
> 
> 时间：2012-07-20T10:22:04.170
> 
> 标签：macos, cocoa

有没有办法在原生可可应用程序中以编程方式获取文件夹路径（任何文件夹，并且可以在 mac 中的任何位置）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:12:59.037

你到底想达到什么目的？你看过[NSFileManager](https://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/nsfilemanager_Class/Reference/Reference.html)吗？要让用户选择目录，请查看[NSOpenPanel](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSOpenPanel_Class/Reference/Reference.html)。

# jquery - Jplayer 动态播放列表

> ID：11577443
> 
> 赞同：1
> 
> 时间：2012-07-20T10:22:04.607
> 
> 标签：jquery, asp-classic, jplayer

我已经阅读了一些关于它的文章，但它们都在 javascript/php 中...我需要在 javascript 和 ASP 中创建一个动态播放列表。那可能吗？我必须从服务器中的文件夹中获取我的视频。我使用 jplayer（不是 jwplayer）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:21:40.287

是的，这是可能的。您可以在服务器上生成 JSON 对象并将此对象提供给[播放列表](http://jplayer.org/latest/demo-02-jPlayerPlaylist/)。您可以在页面加载时呈现该 JSON，或从 wevservice/handler/controller/whatever 请求它并`playlistObject.setPlaylist(...)`在之后使用。

# web - 下载地址：Web Publish 更新，随 Visual Studio 2012 RC 发布。

> ID：11577449
> 
> 赞同：2
> 
> 时间：2012-07-20T10:22:44.173
> 
> 标签：web, publish

我正在运行 Visual Studio 2010 Ultimate 并从事 MVC 3 项目。

我刚刚在阅读：“使用 Visual Studio 或 Visual Web Developer 将 ASP.NET Web 应用程序部署到托管提供程序：简介 - 1 of 12”

这表明“.....安装随 Visual Studio 2012 RC 发布的 Web 发布更新。”

我在哪里下载这个？

请注意：我不想安装 VS 2012。我只想升级我的 VS2010 Ultimate

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T02:29:19.487

它是 VS2010 的 Windows Azure SDK 的一部分：http: [//www.windowsazure.com/en-us/develop/downloads/](http://www.windowsazure.com/en-us/develop/downloads/)

# security - MongoDB id 可以猜测吗？

> ID：11577450
> 
> 赞同：24
> 
> 时间：2012-07-20T10:22:50.507
> 
> 标签：security, mongodb

如果您将 api 调用绑定到对象的 id，是否可以简单地强制此 api 获取所有对象？如果您想到 MySQL，那么使用增量整数 ID 完全可以实现这一点。但是MongoDB呢？id可以猜吗？例如，如果你知道一个 id，是否很容易猜出其他（下一个、上一个）id？

谢谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-20T10:56:55.203

**2019 年 1 月更新：如评论中所述，以下信息在**[3.2 版](https://docs.mongodb.com/v3.2/reference/method/ObjectId/)之前都是正确的。版本 3.4+[更改了规范](https://docs.mongodb.com/v3.4/reference/method/ObjectId/)，以便将机器 ID 和进程 ID 合并为一个随机的 5 字节值。这可能会使找出文档的来源变得更加困难，但它也简化了生成过程并降低了冲突的可能性。

**原答案：**

对于塞尔吉奥的回答+1，就回答是否可以猜到它们而言，它们不是散列，它们是可预测的，因此只要有足够的时间，它们就可以“强制”。可能性取决于 ObjectID 的生成方式以及您如何猜测。为了解释，首先，请阅读此处的规范：

[对象 ID 规范](https://docs.mongodb.com/manual/reference/method/ObjectId/)

然后让我们逐个分解：

*   时间戳 - 只要您大致了解数据的生成时间，就可以完全预测
*   机器 - 这是几个选项之一的 MD5 哈希，其中一些比其他选项更容易确定，但高度依赖于环境
*   PID - 同样，这里的值不是大量的，并且可以针对从已知来源生成的数据进行侦查
*   增量 - 如果这是一个随机数而不是增量（两者都允许），那么它的可预测性较差

稍微扩展一下来源。ObjectID 可以通过以下方式生成：

*   MongoDB 本身（但可以迁移、移动、更新）
*   驱动程序（在任何插入或更新数据的机器上）
*   您的应用程序（如果您愿意，可以手动插入自己的 ObjectID）

所以，你可以做一些事情来让它们更难单独猜测，但是如果没有大量的深思熟虑和保护措施，对于一个正常的数据集，有效的 ObjectID 的范围应该很容易计算出来，因为它们都带有前缀时间戳（除非您以某种方式操纵它）。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-20T10:28:35.237

Mongo 的 ObjectId 绝不是为了防止暴力攻击（或任何攻击，就此而言）。它们只是提供全球独特性。你不应该**假设**某个对象不能被用户访问，因为这个用户不应该知道它的 id。

为了实际保护您的资源，请使用其他技术。

如果您防御未经授权的访问，请在您的应用程序中放置一些授权逻辑（允许合法用户访问，拒绝其他所有人）。

如果您想阻止转储所有对象，请使用某种速率限制。如果适用，请结合授权。

可选读物：[Eric Lippert 谈 GUID](http://blogs.msdn.com/b/ericlippert/archive/2012/04/24/guid-guide-part-one.aspx)。

# bash - 詹金斯反向运行shell脚本？

> ID：11577451
> 
> 赞同：0
> 
> 时间：2012-07-20T10:22:58.760
> 
> 标签：bash, jenkins, tomcat6, sh, jenkins-plugins

我的 jenkins 服务器存在以相反顺序运行 shell 命令的问题。我指定要运行的命令

1.  将文件复制到另一台服务器
2.  运行更新脚本

例如，

```
$nohup scp -i .ssh/blah -o StrictHostKeyChecking=no foo.txt tomcat@foo.coo.com:/tmp/FOO.txt &> /dev/null
$nohup ssh -t -t -n -i .ssh/blah -o StrictHostKeyChecking=no tomcat@foo.coo.com '/home/tomcat/bin/update.sh /tmp/FOO.txt.war' 
```

相反，詹金斯输出控制台将显示：

1.  运行更新.sh
2.  复制文件

当我将两个命令与 && 配对时也会出现同样的问题，并且我在 jenkins 上的所有工作都会发生同样的问题

我目前在 tomcat6 服务器上运行 jenkins 1.469

任何帮助将不胜感激谢谢！

编辑：

我将这些命令作为每个作业的批处理任务运行。问题似乎不是詹金斯，因为它运行正确

```
[workspace] $ /bin/sh -xe /tmp/tomcat6-tomcat6-tmp/hudson8724999678434432030.sh
+ echo 1
1
+ echo 2
2
+ echo 3
3
+ echo 4
4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:56:17.350

使用`&>`来重定向 stdout 和 stderr 是 bash shell 的一个特性。如果你想使用 bash 特定的功能，你需要让 Jenkins 知道构建步骤应该使用 bash 执行。

这可以通过两种方式完成：

1) 更改 Jenkins 全局配置中的默认 shell 或

2) 构建步骤的第一行必须以`#!/bin/bash ...`

请注意，`/bin/sh`它并不总是指向`/bin/bash`.

# canvas - 车床几何上的文字

> ID：11577452
> 
> 赞同：1
> 
> 时间：2012-07-20T10:23:01.893
> 
> 标签：canvas, html5-canvas, three.js

这是我想要实现的一个小例子：

[http://www.artlineatvb.it/test_3d/test_10](http://www.artlineatvb.it/test_3d/test_10)

现在我不知道如何在外表面上正确定位文本，如何在不拉伸文本和其他一些东西的情况下准确地填充整个环！我需要帮助，如果有人对这项工作感兴趣，我们可以付费！谢谢！

# c# - 为什么此 Linq 不起作用（将 Linq 表达式转换为 URI 时出错：只能指定查询选项（orderby、where、take、skip）

> ID：11577458
> 
> 赞同：2
> 
> 时间：2012-07-20T10:23:37.370
> 
> 标签：c#, linq, odata

```
var query = from ch in Client.wcf.context.CashHeading
    where ch.Id_customer == customern//cc.Id
    from cs in Client.wcf.context.Cash
    where cs.Id_cashheading == ch.Id
    from gg in Client.wcf.context.Good
    where gg.Id == cs.Id_good
    select gg.Price.Value; 
```

我正在处理它的内部错误：

> 将 Linq 表达式转换为 URI 时出错：只能在上次导航后指定查询选项（orderby、where、take、skip）。

我不明白为什么，完整的来源 [在这里，在 GitHub 上](https://github.com/Nensha/ENT/blob/master/ENT_Client/MainForm.cs)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T13:20:59.217

*基本上，在执行完所有*导航 ( ) 之后，您必须将 where 子句压缩为*单个*where 子句，如下所示：*`from`*

 *```
var query = 
    from ch in Client.wcf.context.CashHeading
    from cs in Client.wcf.context.Cash
    from gg in Client.wcf.context.Good
    where 
        ch.Id_customer == customern && //cc.Id
        cs.Id_cashheading == ch.Id &&
        gg.Id == cs.Id_good
    select gg.Price.Value; 
```

当然，这似乎不是*最优*的，因为它似乎会交叉连接所有表，*然后*执行过滤，但请记住，您可能正在处理[`IQueryable<T>`接口](http://msdn.microsoft.com/en-us/library/bb351562.aspx)实现，这意味着这很可能是解释然后由处理翻译查询的任何东西进行优化。*

# haskell - 是否有 Haskell 时间类型类

> ID：11577461
> 
> 赞同：5
> 
> 时间：2012-07-20T10:23:54.190
> 
> 标签：haskell

我想用类型签名构建一个函数`Time t => t -> Bool`。[查看Data.Time](http://www.haskell.org/ghc/docs/7.0.2/html/libraries/time-1.2.0.3/Data-Time.html "数据.时间")的文档时，有几种不同的类型可以按时工作，例如：`UTCTime`、`LocalTime`和`ZonedTime`，但我发现没有统一它们的类型类。有没有这样的，或者我应该把时间当作一个`Num`？（即一个连续体）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T12:27:56.807

向量空间包有一个[仿射空间类型类](http://hackage.haskell.org/packages/archive/vector-space/0.7.2/doc/html/Data-AffineSpace.html)。

`Diff p`这里是持续时间类型（应该是 的一个实例`VectorSpace`），并且`p`是时间点类型。您需要一个额外的`Ord`实例进行比较。

这为您免费提供时间点之间的线性插值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T12:32:48.837

标准时间库中没有这样的类型类，但是可以自己实现一个。

`UTCTime`但是，通常您应该以用于所有基于时间的计算的方式构建程序逻辑（这不是 Haskell 特定的）。`LocalTime`并且`ZonedTime`应该只用于在 UTC 和向用户显示的演示文稿或来自外部来源的数据之间来回转换。这可能是没有现成的函数来计算本地和分区时间类型的时间差异和时间加法的原因。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T12:18:33.517

时间有些奇怪。

时间可以指*特定的时间瞬间*（例如，09:27 AM，公元 1821 年 2 月 14 日），或*持续时间*（例如，6 分钟）。

增加和减少持续时间是有意义的。在时间上找到两个瞬间的总和是没有意义的。这代表什么？给一个瞬间增加一个持续时间会给你另一个瞬间；这就说得通了。从另一个实例中减去一个实例应该会给您它们之间的持续时间。

总之，时间算术并不像你想象的那么简单。

现在，该`time`软件包提供了什么？我不知道。听起来你提到的所有时间都是瞬间，而不是持续时间......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T16:22:13.410

看一下[time-lens](http://hackage.haskell.org/package/time-lens)包中的[HasTime](http://hackage.haskell.org/packages/archive/time-lens/0.3/doc/html/Data-Time-Lens.html#t%3aHasTime)类。

它使您可以（读取和写入）访问`TimeOfDay`所有这些结构的组件。所以，如果你实现你的函数`TimeOfDay`，它可以很容易地推广到`LocalTime`，`ZonedTime`和`UTCTime`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T10:59:49.180

根据文档（[http://www.haskell.org/ghc/docs/7.0.2/html/libraries/time-1.2.0.3/Data-Time-Format.html](http://www.haskell.org/ghc/docs/7.0.2/html/libraries/time-1.2.0.3/Data-Time-Format.html)），所有 UTCTime、ZonedTime 和 LocalTime 都是类型类 FormatTime 和 ParseTime 的实例。它们应该是您正在寻找的东西。

# c# - 使用 Itextsharp 为 Pdfptable 中的所有文本设置字体

> ID：11577465
> 
> 赞同：0
> 
> 时间：2012-07-20T10:24:07.337
> 
> 标签：c#, itextsharp, pdfptable

```
var htmlarraylist = HTMLWorker.ParseToList(new StringReader(htmlText), styles);
document.Open();

BaseFont Vn_Helvetica = BaseFont.CreateFont(@"C:\Windows\Fonts\arial.ttf", 
"Identity-H", BaseFont.EMBEDDED);
Font fontNormal = new Font(Vn_Helvetica, 12, Font.NORMAL);

                foreach (var t in htmlarraylist)
                {
                    if (t is PdfPTable)
                    {                          
                       //how set fontNormal all text from Pdfptable ?
                    }

                    document.Add((IElement)t);

                }

                    document.Close(); 
```

有人能帮助我吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T10:45:21.853

请尝试通过将字体设置为`PdfPTable.DefaultCell property` 你`foreach loop`

```
Example:
t.DefaultCell.Phrase = new Phrase() { Font = fontNormal }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-04T10:11:58.733

我尝试在 pdf 模板中设置字体系列。并显示以下错误

“BaseFont”不包含“Cambria”的定义

请建议我...谢谢

```
public void abcd()
        {
            try
            {
                string UniqueNumber = Request.QueryString["UniqueNumber"];
                string strFileName = UniqueNumber;
                string strFileExtension = ".pdf";
                string strContentType = FileManager.FileContentType_application_pdf;
                string strExportData = string.Empty;
                Document pdfDoc = new Document();
                HTMLWorker htmlparser = new HTMLWorker(pdfDoc);
                var output = new MemoryStream();
                BaseFont bfTimes = BaseFont.CreateFont(BaseFont.Cambria, BaseFont.CP1252, false);
                //Font ChronicleFont = new Font(bfTimes, 26f);
                StringWriter sw = new StringWriter();
                HtmlTextWriter htw = new HtmlTextWriter(sw);
                StringReader sr;
                sr = new StringReader(Convert.ToString(ExportData.UserDetails(UniqueNumber)));
                PdfWriter.GetInstance(pdfDoc, output);
                pdfDoc.Open();
                htmlparser.Parse(sr);
                pdfDoc.Close();
                strFileName = strFileName.Replace(" - ", "-").Replace(" ", "-").Replace("--", "-");
                Response.ClearContent();
                Response.Buffer = true;
                Response.AddHeader("content-disposition", string.Format("attachment; filename={0}{1}", strFileName, strFileExtension));
                Response.ContentType = strContentType;
                Response.Charset = "";
                Response.BinaryWrite(output.ToArray());
                Response.Flush();
                Response.End();

            }
            catch (Exception ex)
            {
                //

            }
        } 
```

# grails - 如何使用 grails 中的操作按钮传递参数

> ID：11577468
> 
> 赞同：6
> 
> 时间：2012-07-20T10:24:23.093
> 
> 标签：grails, button, submit, action, params

一直在用有动作的按钮来解决问题。我有几个 btns，我想知道它的参数。在 grails 教程中它说它应该是这样的：

```
 <g:actionSubmit    action="action" value="${message(code: 'default.button.edit.label', default: 'Edit')}" params="['actionTaken':editPhone]"/> 
```

我尝试使用 remotelink、submitButton、submitToRemote 标签，但没有一个有效。当我尝试在控制器中解析它时，我总是得到 null：

```
def action=
    {
        def actionTaken = params.actionTaken
        def employeeId= params.employeeId

        MySession session = MySession.getMySession(request, params.employeeId)
        profileInstance = session.profileInstance

        switch(actionTaken)
        {
            case "editPhone" :
                isEditPhone=true
                break

            case "editEmail" :
                isEditEmail=true
                break
        }
        render(view:"profile", model:[profileInstance:session.profileInstance, isEditPhone:isEditPhone, isEditEmail:isEditEmail])
    } 
```

我错过了什么？我的参数代码错了吗？我解析参数的代码错了吗？这只是让我陷入没有进展的圈子。帮助。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-21T06:05:52.490

[Grails 文档](http://grails.org/doc/latest/ref/Tags/actionSubmit.html)并未将其`params`列为`actionSubmit`.

*通过*利用该标签的*实际*作用，可以在控制器的参数列表中注入您想要的值：

```
def editPhone = { forward(action:'action', params:[actionTaken: 'editPhone'])}
def editEmail = { forward(action:'action', params:[actionTaken: 'editEmail'])} 
```

如果这使您的代码更清晰，您可能还只想将完全独立的逻辑编码到`editPhone`and操作中。`editEmail`

更新的查看代码：

```
<g:actionSubmit action="editPhone" value="${message(code: 'default.button.edit.label', default: 'Edit')}" /> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T12:33:57.687

该`params`属性被解析为一个映射，其中*键*被视为字符串，但*值*被视为表达式。所以

```
params="['actionTaken':editPhone]" 
```

正在尝试将名为的键定义为具有GSP 模型中`actionTaken`命名的变量的值。`editPhone`由于没有这样的变量，您将获得空值。所以解决方法是移动引号：

```
params="[actionTaken:'editPhone']" 
```

这会将值设置为字符串“editPhone”。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-03T12:13:42.590

您还可以使用在 POST 数据中传递参数

```
<input type="hidden" name="actionTaken" value="editPhone" /> 
```

表格内。然后它也可以通过 params 变量访问。这个对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-14T17:04:32.990

我刚刚遇到了类似的问题（我需要连同一个 id 一起提交删除）并找到了使用 HTML5 的“formaction”属性进行提交输入的解决方案。它们可以被赋予一个值，该值可以包括控制器、动作、附加参数等。

通常，向提交按钮添加参数（例如编辑表单上的特定子对象）如下所示：

```
<input type="submit" formaction="/<controller>/<action>/<id>?additionalParam1=...&additionalParam2=..." value="Action" > 
```

在你的例子中：

```
<input type="submit" formaction="action?actionTaken=editPhone" value="${message(code: 'default.button.edit.label', default: 'Edit')}" > 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-20T19:24:06.903

在我的情况下，我有一个表单元素，在表的每一行（即数据表编辑按钮）上有多个操作。发送整个表单数据很重要，所以我不能只使用链接。我发现注入参数的最快方法是使用 javascript。不理想，但它有效：

```
function injectHiddenField(name, value) {
    var control = $("input[type=hidden][name='" + name + "']");
    if (control.size() == 0) {
        console.log(name + " not found; adding...");
        control = $("<input type=\"hidden\" id=\"" + name + "\" name=\"" + name + "\">");
        $("form").append(control);
    }
    control.val(value);
} 
```

您的按钮可能如下所示：

```
<g:each in="${objects}" var="object">
     ...
     <g:actionSubmit value="edit" action="anotherAction"
                     onclick="injectHiddenField('myfield', ${object.id})"/>
</g:each> 
```

# php - FTP Webhoster 上的 Symfony2

> ID：11577470
> 
> 赞同：0
> 
> 时间：2012-07-20T10:24:36.103
> 
> 标签：php, symfony, hosting

我用 Symfony2 写了一个小站点，我想把它托管在我的 WebSpace 上。我只有 FTP 访问权限，所以我无法访问任何控制台/终端！

问题是：Symfony 无法正确创建缓存目录！可能还有权限问题？！

到目前为止，这些是 y 步骤：

1.  使用空缓存目录上传我的整个项目（因为没有控制台，我无法清理它）
2.  使用我的 ftp 客户端更改缓存和日志目录的权限
3.  取消屏蔽控制台、app.php 和 app_dev.php 就像解释[这里](http://symfony.com/doc/current/book/installation.html#configuration-and-setup)
4.  将我的 IP 添加到文件中的白名单中：config.php 和 app_dev.php
5.  检查 config.php 以查看我的配置是否满足 symfony 的要求（它们满足！没有大问题！）
6.  检查 PHP 设置：那里有 PHP 5.3.3-7、SQLite3 和 PDO-Driver！
7.  打开`app_dev.php/_configurator/step/0`以 RuntimeException 结束：

    `RuntimeException: Unable to create the cache directory (/var/www/userx/html/MySiteSymfony/app/cache/dev/twig/83/4c).`

8.  打开 app.php 导致 500 服务器错误并且没有创建日志文件

**有人知道如何让 symfony 工作吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:40:55.487

进入应用程序/文件夹单击缓存文件夹上的“获取信息”并设置正确的权限（确保单击“应用到封闭的文件夹/文件”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T12:46:54.100

终于换了我的供应商。似乎它的操作系统刚刚被弃用。

# java - freemarkers 跳过 assertNonNull InvalidReferenceException

> ID：11577482
> 
> 赞同：1
> 
> 时间：2012-07-20T10:25:18.870
> 
> 标签：java, exception, freemarker

我用 freemarker 渲染了一个对象列表：

```
<ul>
    <#list publication as item>
        <li><b>${item.key}</b> : ${item.value}</li>
    </#list>
</ul> 
```

但有些项目有一个 item.value null 引发异常：

```
freemarker.core.InvalidReferenceException: Expression item.value is undefined on line 12, column 44 in mailTemplate.
    at freemarker.core.TemplateObject.assertNonNull(TemplateObject.java:125)
    at freemarker.core.Expression.getStringValue(Expression.java:118) 
```

我希望freemarker呈现“null”或什么都没有并继续发送邮件而不是阻止它

我总是可以先检查列表，然后再将其发送到 freemarker，但如果我可以避免这一步，那就更好了

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T13:25:19.367

如果缺少值，您应该检查模板，然后打印对收件人有意义的内容（“null”当然对他们没有意义）。就像，如果项目不需要价值，则不适用：

```
<li><b>${item.key}</b> : ${item.value!'N/A'}</li> 
```

或者如果由于记录仍然不完整而缺少值，则跳过整行：

```
<#if item.value??>
  <li><b>${item.key}</b> : ${item.value}</li>
</#if> 
```

# ios - 在视图控制器之间传递变量

> ID：11577484
> 
> 赞同：12
> 
> 时间：2012-07-20T10:25:23.970
> 
> 标签：ios, properties, uiviewcontroller, uistoryboard, uistoryboardsegue

我正在使用此功能在 Xcode 4.3 中的视图之间切换。

```
[self performSegueWithIdentifier:@"NextView" sender:self]; 
```

我想在页面之间传递一些参数。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-20T10:34:29.410

在`performSegueWithIdentifier:sender:`您的视图控制器将调用之后

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender 
```

假设你的新视图控制器有一些属性需要设置：

```
if ([[segue identifier] isEqualToString:@"NextView"]) {
    MyViewController *myVC = [segue destinationViewController];
    myVC.propertyToSet = // set your properties here
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-20T10:28:56.907

这个问题对在视图控制器之间传递数据有一个非常好的和正确的解释：

[在视图控制器之间传递数据](https://stackoverflow.com/q/5210535/870155)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-04-09T03:43:10.330

这是 Pfitz 的答案，但我通过一个示例让 Objective-C 新手更容易理解：

1.  在您的destinationViewController.h 文件中，将变量的属性设置添加到来自您的源controller.m 文件的“接收”值

    ```
    @property (nonatomic) int billIdReceivingVote; 
    ```

2.  将您的 destinationViewController.h 导入到您的 sourceViewController.m 文件中：

    ```
    // VOLViewController.m
    #import "VOLVoteViewController.h 
    ```

3.  将`prepareForSegue`方法添加到您的 sourceViewController.m 文件并传递变量

    ```
    - (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
    {
        VOLVoteViewController *myDestinationViewController = [segue destinationViewController];

        // myDestinationViewController.variable = sourceViewController variabe
        myDestinationViewController.billIdReceivingVote = [self.idOfBillSelected intValue];
    } 
    ```

# c++ - 包含语句的顺序在链接步骤中有何影响？

> ID：11577490
> 
> 赞同：2
> 
> 时间：2012-07-20T10:26:06.213
> 
> 标签：c++, linker, include

我无法解释链接代码时看到的行为。也许有人知道发生了什么...

我有一个多文件 C++ 项目，它使用 GNU automake 工具作为其构建系统（全部在 Linux 上）。

在将源文件和头文件（让我们调用它们`util.cc`和`util.h`）添加到项目并让已经存在的源文件（`calc.cc`）从新添加的文件中调用函数后，我会收到一个链接错误，具体取决于`include`语句出现的位置。我再说一遍：错误发生在链接步骤中，编译运行正常！！

例子：

将新的 include 语句放在预先存在的语句的末尾时出现错误，例如：

`calc.cc:`

```
#include "file1.h"
#include "file2.h"
#include "file3.h"
#include "file4.h"
#include "util.h"   // new header 
```

这个版本编译得很好。但是链接会产生错误（找不到符号）！

现在，当将其更改为

```
#include "util.h"   // new header
#include "file1.h"
#include "file2.h"
#include "file3.h"
#include "file4.h" 
```

然后编译和链接运行正常！

由于链接器只读取`.o`文件，这必然意味着根据包含语句出现的位置产生不同的内容。怎么会这样？

编译器是 g++ (GCC) 4.4.6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:30:08.843

很有可能 util.h 有一个 #define 来改变其他文件之一的行为。

你最好的机会来确定到底发生了什么，包括检查这些头文件中丢失符号的名称，并通过“工作”和“非工作”方式编译 calc.cc 获取预处理器输出，并比较两个文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T10:32:54.443

简单的头文件可以（重新）定义可以更改后续宏的解释的宏。

例如，在上面的示例中，如果 file1.h 确实

```
#define lseek lseek64 
```

并且 util.h 有一个调用 lseek 的内联函数，然后根据包含顺序，生成的目标代码将具有对 lseek 或 lseek64 的符号引用。

这就是为什么项目倾向于首先包含 config.h（由 autoconf 生成）的规则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T10:34:40.527

你是绝对正确的：在这两种情况下会产生不同的目标代码。正如@hmjd 还指出的那样，很可能在 util.h 中有一个宏，其他（.h 或 .c）文件之一使用该宏，并且任何未声明的调用标识符都被编译器假定为一个函数——这是很可能是这里的错误。

# javascript - 当我使用函数getJSON（读取文件）时如何附加到特定的div中

> ID：11577492
> 
> 赞同：0
> 
> 时间：2012-07-20T10:26:12.133
> 
> 标签：javascript, jquery, json

我有 id="bah" 的表格和 id="demo" 的 div。我有附加问题，因为我如何在演示中附加数据。如何纠正？错`}.appendTo('#demo);` 了怎么改？？？

```
<script type='text/javascript'>
        var p;
    $.getJSON('config_json.cfg', function(data) {
      var items = [];

      $.each(data, function(key, val) {
//      items.push('<li id="' + key + '">' + val + '</li>');
        items.push('<li id="'+key+'"class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>'+val+'</li>');
            p=key;
      });

      $('<ul/>', {
             'id' :'sortable',
        html: items.join('')
       }).appendTo('#demo');

    });

    $(function() {
        $( "#sortable" ).sortable();
        $( "#sortable" ).disableSelection();

    });
</script>
</head>
<body>

<form action="#" method="get" id="form1">

<div id="demo">
</div>
<br>
<p>Clicca su <input type="image" src="img/finish.png" value="Submit" alt="Submit"> per inviare il form</p>
<br>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:30:45.557

`}.appendTo('#demo);`它是正确的。尝试更改 `}).appendTo('#demo');`为 `}).appendTo($('#demo'));`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:02:23.210

以旧时尚的方式来做如何：

```
$(function() {
    $.getJSON('config_json.cfg', function(data) {
        var items = '<ul id="sortable">';

        $.each(data, function(key, val) {
            items += '<li id="'+key+'"class="ui-state-default"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span>'+val+'</li>';
        });

        items += '</ul>';

        $(items).appendTo('#demo');

    });

    $( "#sortable" ).sortable();
    $( "#sortable" ).disableSelection();
});​ 
```

# jquery - 如何设置 JSON 响应并使用 jQuery 表单插件检索它？

> ID：11577500
> 
> 赞同：0
> 
> 时间：2012-07-20T10:26:24.543
> 
> 标签：jquery, json, response

在我的服务器中，我有以下代码：

```
response.getWriter().write(myJsonString);
response.setContentType("application/json;charset=UTF-8");
response.setHeader("Cache-Control", "no-cache");
return null; 
```

如果我执行普通表单提交或 AJAX jQuery 提交，这会将 JSON 对象作为字符串返回（如在屏幕上显示）。[但是，当我从http://jquery.malsup.com/form/#json](http://jquery.malsup.com/form/#json)的 malsup 示例中添加代码来处理响应时，我无法显示警报？我什至不知道是响应设置还是 jQuery 得到的不正确。

```
$('form[name=uploadForm]').submit(function() {
    //ajax form submission
    $('form[name=uploadForm]').ajaxSubmit({
        // dataType identifies the expected content type of the server response
        dataType:  'json',

        // success identifies the function to invoke when the server response
        // has been received
        success:   processJson
    });
    //cancels normal form submission
    return false;
});
function processJson(data) {
    // 'data' is the json object returned from the server
    alert(data.message);
} 
```

我对消除使用表单插件（即仅使用`jQuery.post()`调用）的选项持开放态度。

# arrays - Twig ：通过拆分显示的数组元素的翻译

> ID：11577502
> 
> 赞同：0
> 
> 时间：2012-07-20T10:26:42.603
> 
> 标签：arrays, split, translation, twig

假设我有这种数组：

```
<?php
$monsterOne['statistics'] = array('attack' => 15, 'defense' => 20, 'speed' => 5);
$monsterTwo['statistics'] = array('attack' => 10, 'defense' => 0, 'speed' => 7); 
```

**我想通过 twig 显示：**

```
monsterOne : 15 en Attaque, 20 en Défense, 5 en Vitesse
monsterTwo : 10 en Attaque, 7 en Vitesse 
```

我怎样才能做到这一点？

我试过这个，它工作，**但每个统计数据之间的逗号不存在。**

```
{% if statistics.attack is defined %} {{statistics.attack}} {{"en Attaque" | trans}} {% endif %}
{% if statistics.defense is defined %} {{statistics.defense}} {{"en Défense" | trans}} {% endif %}
{% if statistics.escape is defined %} {{statistics.escape}} {{"en Vitesse" | trans}} {% endif %} 
```

我认为我应该使用这样的东西，但我不知道如何将翻译放入：

```
{{ statistics|join(', ') }} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T13:35:41.020

我找到了答案。诀窍是解析`array`via a`loop`并使用`loop.last`：

```
 {% for statistic, value in statistics %}
        {% if statistic == 'attack' %} {{ value }} {{ 'en Attaque' | trans }}{% endif %}
        {% if statistic == 'defense' %} {{ value }} {{ 'en Defense' | trans }}{% endif %}
        {% if statistic == 'speed' %} {{ value }} {{ 'en Vitesse' | trans }}{% endif %}
        {% if loop.last == false %}, {% endif %}
    {% endfor %}"> 
```

# c++ - WinHttp 在异步模式下使用 - ERROR_INTERNET_CANNOT_CONNECT 如何干净地关闭连接

> ID：11577503
> 
> 赞同：3
> 
> 时间：2012-07-20T10:26:53.593
> 
> 标签：c++, windows, networking, winhttp

我在请求的回调过程中得到了很多 ERROR_INTERNET_CANNOT_CONNECT （12029 代码）。我在异步模式下（在服务器上）使用 WinHttp。在这种情况下，您如何干净地关闭连接。你只是使用这样的东西（就像你通常关闭连接一样？）：

```
 ::WinHttpSetStatusCallback(handle, NULL, 0, 0);
            ::WinHttpCloseHandle(this->handle)); 
```

我问这个是因为我有一些奇怪的与 winhttp dll 相关的内存泄漏，发生在所描述的情况下（想要创建数百个可能被公司内部防火墙阻止的并发连接或目标服务器丢弃连接）。我已经在 msdn 上查看了 WinHttpCloseHandle 的文档...

以下是我如何处理回调状态：

```
 template <typename T>
void WinHttp::AsyncRequest<T>::OnCallback(DWORD code, const void* info, DWORD length)
{
    T* pT = static_cast<T*>(this);

    switch (code)
    {
    case WINHTTP_CALLBACK_STATUS_SENDREQUEST_COMPLETE:
    case WINHTTP_CALLBACK_STATUS_WRITE_COMPLETE:
        {
            HRESULT result = pT->OnWriteData();
            if (FAILED(result))
            {
                throw CommunicationException(::GetLastError());
            }
            if (S_FALSE == result)
            {
                if (!::WinHttpReceiveResponse(handle, 0)) // reserved
                {
                    throw CommunicationException(::GetLastError());
                }
            }
            break;
        }

    case WINHTTP_CALLBACK_STATUS_HEADERS_AVAILABLE:
        {
            DWORD statusCode;
            DWORD statusCodeSize = sizeof(DWORD);
            if (!::WinHttpQueryHeaders(handle, WINHTTP_QUERY_STATUS_CODE | WINHTTP_QUERY_FLAG_NUMBER, WINHTTP_HEADER_NAME_BY_INDEX, &statusCode, &statusCodeSize, WINHTTP_NO_HEADER_INDEX))
            {
                throw CommunicationException(::GetLastError());
            }
            pT->OnStatusCodeReceived(statusCode);
            if (!::WinHttpQueryDataAvailable(handle, 0))
            {
                // If a synchronous error occured, throw error.  Otherwise
                // the query is successful or asynchronous.
                throw CommunicationException(::GetLastError());
            }

            break;
        }

    case WINHTTP_CALLBACK_STATUS_DATA_AVAILABLE:
        {
            unsigned int size = *((LPDWORD) info);
            if (size == 0)
            {
                pT->OnResponseComplete(S_OK);
            }
            else
            {
                unsigned int sizeToRead = (size <= chunkSize) ? size : chunkSize;
                if (!::WinHttpReadData(handle, &buffer[0], sizeToRead, 0)) // async result
                {
                    throw CommunicationException(::GetLastError());
                }
            }
            break;
        }

    case WINHTTP_CALLBACK_STATUS_READ_COMPLETE:
        {
            if (length != 0)
            {
                pT->OnReadComplete(&buffer[0], length);
                if (!::WinHttpQueryDataAvailable(handle, 0))
                {
                    // If a synchronous error occured, throw error.  Otherwise
                    // the query is successful or asynchronous.
                    throw CommunicationException(::GetLastError());
                }
            }
            else
            {
                pT->OnResponseComplete(S_OK);
            }

            break;
        }

    case WINHTTP_CALLBACK_STATUS_REQUEST_ERROR:
        {
            {
                throw CommunicationException(::GetLastError());
            }

            break;
        }
    }
} 
```

这里的缓冲区是一个向量，一旦发起请求，就保留了 8K。提前致谢。

在 OnResponseComplete, OnResponsEerror 我最终也调用：

```
::WinHttpSetStatusCallback(handle, NULL, 0, 0);
 assert(::WinHttpCloseHandle(this->handle));
 this->handle = nullptr; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T20:36:52.283

Roman R 对这个问题的看法是正确的，只是想在回复中包含更多细节。取消是棘手的。对于 WinHTTP，您需要记住回调在线程池上触发。它们可以到达随机线程，并且由于线程池不保证回调何时执行，您可以调用 WinHttpSetStatusCallback 清除回调，然后稍后仍会接收回调。因此，您需要自己同步它。一个更微妙的问题是您不能从回调中回调 WinHTTP。处理 WinHTTP 回调的最安全和最可靠的方法是将回调分派到单个线程。这可以是 UI 线程或单线程线程池。

到目前为止，我的测试表明，关闭请求句柄必须在回调之外完成，并且最终关闭连接句柄。可以将关闭请求的意图排队，然后使用 QueueUserApc 在单独的线程上关闭连接和其他清理，以便至少同步这两个操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T22:15:57.933

**编辑** 问题仍然存在。我在下面写的并没有解决问题。

所描述的问题实际上与 ERROR_CANNOT_CONNECT 并没有太大关系，而是与我“错误地”处理 winhttp 的异步状态回调通知的方式有关。如果有人有兴趣，我将在此处复制处理状态通知的典型方式。

# javascript - 将文本字段值发送到 ruby 哈希

> ID：11577504
> 
> 赞同：0
> 
> 时间：2012-07-20T10:26:59.263
> 
> 标签：javascript, ruby-on-rails, ruby

如果 RoR 3.2 应用程序，我有简单的文本字段。每次用户在此文本字段中输入新值时，我都想将其保存在 ruby​​ 哈希或数组中。在铁轨上可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T20:06:54.520

您可以将其保存为特定哈希中的值。参见例如[http://rails.nuvvo.com/lesson/6371-action-controller-parameters](http://rails.nuvvo.com/lesson/6371-action-controller-parameters)

从页面上的示例：

```
<form action="/clients" method="post">
  <input type="text" name="client[name]" value="Acme" />
  <input type="text" name="client[phone]" value="12345" />
  <input type="text" name="client[address][postcode]" value="12345" />
  <input type="text" name="client[address][city]" value="Carrot City" />
</form> 
```

提交此表单时的值`params[:client]`将是`{:name => "Acme", :phone => "12345", :address => {:postcode => "12345", :city => "Carrot City"}}`。

# python - 如何进一步优化这个 python 脚本？

> ID：11577505
> 
> 赞同：1
> 
> 时间：2012-07-20T10:27:00.387
> 
> 标签：python, optimization, micro-optimization

我创建了这个脚本来计算 python 中的[字符串相似度](https://www.interviewstreet.com/challenges/dashboard/#problem/4edb8abd7cacd)。有什么办法可以让它运行得更快吗？

```
tries = input()
while tries > 0:
    mainstr = raw_input()
    tot = 0
    ml = len(mainstr)
    for i in xrange(ml):
        j = 0
        substr = mainstr[i:]
        ll = len(substr)
        for j in xrange(ll):
            if substr[j] != mainstr[j]:
                break
            j = j + 1
        tot = tot + j
    print tot
    tries = tries - 1 
```

**编辑：**应用一些优化后，这是代码，但这还不够！

```
tries = int(raw_input())
while tries > 0:
    mainstr = raw_input()
    tot = 0
    ml = len(mainstr)
    for i in xrange(ml):
        for j in xrange(ml-i):
            if mainstr[i+j] != mainstr[j]:
                break
            j += 1
        tot += j
    print tot
    tries = tries - 1 
```

**编辑 2**：代码的第三个版本。还是不行！

```
def mf():
    tries = int(raw_input())
    for _ in xrange(tries):
        mainstr = raw_input()
        tot = 0
        ml = len(mainstr)
        for i in xrange(ml):
            for j in xrange(ml-i):
                if mainstr[i+j] != mainstr[j]:
                    break
                j += 1
            tot += j
        print tot
mf() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:16:32.080

如果你使用`i = mainstr.find(mainstr[0], i+1)`而不是检查 all ，你可以通过一个常数因子来改进它`i`。i==0 的特殊情况也有帮助。

将代码放入函数中。它还可能以恒定的因素加速事情。

用于`for ... else: j += 1`避免`j`在每一步增加。

尝试找到一个比 O(n**2) 更好的算法，该算法利用您比较字符串的所有后缀这一事实。

最[直接的 C 实现](http://ideone.com/ZNilm)比 CPython 快 100 倍（Pypy 快 10-30 倍）并通过了挑战：

```
import os

def string_similarity(string, _cp=os.path.commonprefix):
    return sum(len(_cp([string, string[i:]])) for i in xrange(len(string)))

for _ in xrange(int(raw_input())):
    print string_similarity(raw_input()) 
```

上述优化只提供了百分之几的改进，不足以通过 CPython 中的挑战（Python 时间限制仅大 8 倍）。

几乎没有区别（在 CPython 中）：

```
def string_similarity(string):
    len_string = len(string)
    total = len_string # similarity with itself
    for i in xrange(1, len_string):
        for n, c in enumerate(string[i:]):
            if c != string[n]:
                break
        else:
            n += 1

        total += n
    return total 
```

和：

```
def string_similarity(string):
    len_string = len(string)
    total = len_string # similarity with itself
    i = 0
    while True:
        i = string.find(string[0], i+1)
        if i == -1:
            break
        n = 0
        for n in xrange(1, len_string-i):
            if string[i+n] != string[n]:
                break
        else:
            n += 1

        total += n
    return total 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T10:43:04.187

您可以跳过循环内的内存分配。`substr = mainstr[i:]`不必要地分配一个新字符串。你只在 中使用它`substr[j] != mainstr[j]`，相当于`mainstr[i + j] != mainstr[j]`，所以你不需要构建`substr`.

内存分配很昂贵，因此您需要在紧密循环中避免它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T16:48:15.670

对于这样简单的数字脚本，您只需要做两件事：

*   使用 PyPy（它没有复杂的依赖关系，而且速度会大大提高）

*   将大部分代码放在一个函数中。这极大地加快了 CPython 和 PyPy 的速度。代替：

    一些代码

做：

```
def main():
    some_code

if __name__ == '__main__':
    main() 
```

差不多就是这样。

干杯，菲亚尔

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T14:14:25.457

Here's mine. It passes the test case, but may not be the absolute fastest.

```
import sys

def simstring(string, other):
    val = 0
    for l, r in zip(string, other):
        if l != r:
            return val
        val += 1
    return val

dsize = sys.stdin.readline()

for i in range(int(dsize)):
    ss = 0
    string = sys.stdin.readline().strip()
    suffix = string
    while suffix:
        ss += simstring(string, suffix)
        suffix = suffix[1:]
    sys.stdout.write(str(ss)+"\n") 
```

# java - Spring Security 3.1 中的默认角色

> ID：11577506
> 
> 赞同：7
> 
> 时间：2012-07-20T10:27:07.150
> 
> 标签：java, spring-security, default, roles

Spring 3.1 Security`contact`示例在其中使用了几个角色`applicationContext-security.xml`：

```
<intercept-url pattern="/" access="IS_AUTHENTICATED_ANONYMOUSLY"/>
<intercept-url pattern="/index.jsp" access="IS_AUTHENTICATED_ANONYMOUSLY"/>
<intercept-url pattern="/hello.htm" access="IS_AUTHENTICATED_ANONYMOUSLY"/>
<intercept-url pattern="/login.jsp*" access="IS_AUTHENTICATED_ANONYMOUSLY"/>
<intercept-url pattern="/switchuser.jsp" access="ROLE_SUPERVISOR"/>
<intercept-url pattern="/j_spring_security_switch_user" access="ROLE_SUPERVISOR"/>
<intercept-url pattern="/**" access="ROLE_USER"/> 
```

这些 IS_AUTHENTICATED_ANONYMOUSLY、ROLE_SUPERVISOR、ROLE_USER 角色在哪里定义？这些默认角色是由 Spring Security 创建的吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-20T11:30:46.483

**IS_AUTHENTICATED_ANONYMOUSLY**在[AuthenticatedVoter](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/access/vote/AuthenticatedVoter.html)类中定义。
各种**ROLE_xxxx**没有特殊含义。

Spring Security 默认建议使用这些角色，因为它们在大多数应用程序中使用。
但是，您可以自由定义和使用自定义角色（即 ROLE_SUPERMAN）。
您只需要确保`UserDetail`您返回的`UserDetailService`已`ROLE`分配为`GrantedAuthority`（从数据库或手动）。

实际上**ROLE**是前缀。如果要将其更改为**APP**（即 APP_ADMIN），则必须定义一个自定义`AppVoter`：

```
<bean class="org.springframework.security.vote.RoleVoter">
  <property name="rolePrefix" value="APP"/>
</bean> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T12:23:49.227

角色`ROLE_SUPERVISOR, ROLE_USER`由我们根据我们的应用程序定义。

如何创建自定义角色：[如何在 Spring Security 中使用自定义角色/权限？](https://stackoverflow.com/questions/986892/how-do-i-use-custom-roles-authorities-in-spring-security)

请参阅[教程](http://giannisapi.wordpress.com/2011/09/21/spring-3-spring-security-implementing-custom-userdetails-with-hibernate/)以使用创建自定义角色`org.springframework.security.core.userdetails.UserDetailsService`

# objective-c - 使用应用委托添加项目

> ID：11577508
> 
> 赞同：0
> 
> 时间：2012-07-20T10:27:12.150
> 
> 标签：objective-c, uitableview, uiscrollview

我正在尝试向**表格单元格添加动态水平滚动。**

我在搜索了一段时间后找到了一个示例，但由于示例项目只是一个视图，它直接连接到包含大部分相关代码的应用程序委托。大部分在`applicationDidFinishLaunching`.

你们中有人知道我应该如何将此代码添加到我的项目中吗？

在此先感谢，汤姆

编辑：这是我下载的示例项目的链接：http: [//blog.sallarp.com/wp-content/uploads/2008/11/slidemenu.zip](http://blog.sallarp.com/wp-content/uploads/2008/11/slidemenu.zip)

这是它应该如何工作的 youtube 剪辑：[http ://www.youtube.com/watch?v=wFqBNXZ4SHI](http://www.youtube.com/watch?v=wFqBNXZ4SHI)

编辑 2（新代码）：

"famorables" 用 5 个单字串声明

```
- (UITableViewCell *)tableView:(UITableView *)aTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"MyFamorablesCell";
UITableViewCell *cell;

//Create Cell
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];    
}
//Create a UIScroll View
UIScrollView    *scrollview  = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, 80)]; 
scrollview.contentSize = CGSizeMake(self.view.frame.size.width * 2, 80); 
scrollview.showsHorizontalScrollIndicator = NO;

float totalButtonWidth = 0.0f;
famorableArray = self.famorables;

for(int i = 0; i < [self.famorables count]; i++){

    UIButton *famorableButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [famorableButton setFrame:CGRectMake(0.0f, 0.0f, 100.0f, 30.0f)];
    [famorableButton setTitle:[NSString stringWithFormat:@"%@", [famorableArray objectAtIndex:[indexPath row]]] forState:UIControlStateNormal];

    // Move the buttons position in the x-demension (horizontal).
    CGRect btnRect = famorableButton.frame;
    btnRect.origin.x = totalButtonWidth;
    [famorableButton setFrame:btnRect];

    // Add the button to the scrollview
    [scrollview addSubview:famorableButton];

    // Add the width of the button to the total width.
    totalButtonWidth += famorableButton.frame.size.width;

}

[cell.contentView addSubview:scrollview];
return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:49:24.023

好的试试这个

```
- (UITableViewCell *)tableView:(UITableView *)aTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        static NSString *CellIdentifier = @"Cell";
        UITableViewCell *cell;

        //Create Cell
        if (cell == nil) {
            cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];    
        }
     //Create a UIScroll View
     UIScrollView    scrollview  = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, (it will be the height of the Cell u want))]; 
    scrollview.contentSize = CGSizeMake(self.view.frame.size.width * 2,(it will be the height of the Cell u want)); 
    scrollview.showsHorizontalScrollIndicator = NO;

/*
Now add every this u might want to add in ur Scroll view.

keep that in mind that the height and width of contentSize and ScrollView will be depandent on ur requirement

Make sure u add every thing u want in the Scroll view will be the part of Scroll View
like for label

//Add Something to Scroll View
[scrollView addSubview:label];
*/

//Add Scroll view to Cell

[cell.contentView addSubview:scrollView];
return cell;
} 
```

这将起作用

如有任何疑问，请随时询问

# jquery - JQueryMobile 可折叠标题

> ID：11577510
> 
> 赞同：3
> 
> 时间：2012-07-20T10:27:17.787
> 
> 标签：jquery, jquery-mobile, cordova

```
var dw=function(string){
document.write(string+"-Hello");
}
<h1><script>dw("Hi")</script></h1>   //Hi-Hello 
```

这工作正常。但是当我把这个标题放在一个可折叠的里面时，它只会打印 Hi-Hello 并且不显示可折叠。

```
<div data-role="collapsible">
<h3><script>dw("Hi")</script></h3>
 <p>collapsible content.</p>
</div> 
```

是否有任何解决方法来更改可折叠标题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:32:08.090

因此，如果您想更改 Collapsible 的 Header-Text，请给 Collapsible 一个 ID 或一个类：

```
<div id="myCollapsible" data-role="collapsible">
<h3>OldTitle</h3>
<p>Content</p>
</div> 
```

由于 JQM 使用 jQuery，您可以使用一些 jQuery-Magic，例如：

```
<script>
$("#myCollapsible .ui-btn-text").text("My New Title");
</script> 
```

如果你想在“pageshow”或“pagecreate”上改变它，你可以试试这个：

```
<script>
// $("#myPageId").bind ... would be possible too
$(document).bind("pageshow", function(){     
    $("#myCollapsible .ui-btn-text").text("My New Title");
});
</script> 
```

希望我能帮助你:)

# c# - 解析 xml - 从播放列表中的视频中获取 youtube 描述

> ID：11577511
> 
> 赞同：0
> 
> 时间：2012-07-20T10:27:21.067
> 
> 标签：c#, xml, linq

我试图从 youtube 播放列表中获取 youtube 视频的描述。

xml 播放列表如下所示：

```
<entry gd:etag="W/&quot;YhjhqeyM.&quot;">
  <title>My Title</title>
  <media:group>
    <media:description type="plain">My description</media:description>
  </media:group>
</entry>
.
.
.
...multiple entry elements 
```

我正在遍历多个条目并获得如下标题：

```
var x = (from e in xmlFeed.Root.Elements().Where(n => n.Name.LocalName == "entry") select e);

     foreach (XElement element in x)
      {
          title = element.Elements().Where(n => n.Name.LocalName == "title").FirstOrDefault().Value;
          description = //??;
      } 
```

我怎样才能得到上述格式的描述？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:37:20.027

```
description = element.Descendants(XName.Get("description")).First().Value(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T13:25:15.703

```
XDocument xDoc = XDocument.Load("https://gdata.youtube.com/feeds/api/playlists/63F0C78739B09958?v=2");
XNamespace media = XNamespace.Get("http://search.yahoo.com/mrss/");
var descs = xDoc.Descendants(media + "description")
    .Select(d => d.Value)
    .ToArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T10:52:03.757

这样做，这取决于你如何在你的文档中加载。在这种情况下，我用`HttpWebRequest`/读过它：`StreamReader`

```
HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
doc.Load(requestData("https://gdata.youtube.com/feeds/api/playlists/63F0C78739B09958?v=2"));

var node = doc.DocumentNode.Descendants("media:description").ToList();

foreach (var description in node)
{
     Response.Write(string.Format("Description: {0}\n",description.InnerText.ToString()));
} 
```

# html - Photoshop文字效果的CSS

> ID：11577513
> 
> 赞同：0
> 
> 时间：2012-07-20T10:27:37.617
> 
> 标签：html, css, text, photoshop

Photoshop中有一些文字效果，例如**清晰，锐利，强烈，平滑** 我如何为这些效果生成css

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:30:30.267

上述效果在 CSS 中是不可能的。但是，还有其他人。CSS3 中有一种样式，`font-smooth:always;`您可以使用它来获得平滑的字体。您也可以使用`font-weight`和。以上所有样式的组合可以为您提供接近 Photoshop 效果的结果。`font-variant``font-size`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T22:30:40.467

CSS 无法继承 Photoshop 的样式，但我知道以下工具可以将所有可能的 CSS 样式和效果应用于任何网站的图像。它只使用 CSS 和 jQuery，并且在提供的编辑器的帮助下，您不需要了解 CSS。我还没有看到类似的工具。 [http://image-styles-and-effects.impression-estudio.gr/](http://image-styles-and-effects.impression-estudio.gr/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T12:58:46.020

您提到的选项不是“效果”，而是模式如何 Photoshop 呈现文本 - 或使用多少抗锯齿。如果您想使用 PS 进行网站设计，请在浏览器中输入一些文本（如果可能，使用使用的字体） - 制作屏幕截图并调整 PS 以使其最适合。

这不是一个真正的答案 - 因为这些不是您可以通过 css 重建的效果，但试试这个：

[使用 css 强制抗锯齿：这是一个神话吗？](https://stackoverflow.com/questions/761778/forcing-anti-aliasing-using-css-is-this-a-myth)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T10:34:35.593

这取决于您要达到的效果。CSS 无法实现 Photoshop 的*所有*文本效果，但能够再现其中一些的近似值。

你有你想要达到的效果的图像吗？

# c# - 手机与电脑断开连接时获取错误日志

> ID：11577515
> 
> 赞同：0
> 
> 时间：2012-07-20T10:27:49.367
> 
> 标签：c#, windows-phone-7, logging, windows-phone-7.1

我有一个芒果版的 WP7 应用程序。当我通过应用程序部署工具将应用程序部署到手机时，我无法获取错误日志或日志报告。我需要日志来检查背后发生了什么。这一点很重要。我怎样才能做到这一点？有没有办法获取记录并获取正在运行的应用程序的日志？我正在使用如下记录器语句：

```
#if LOG_ENABLED
                                Logger.log(TAG, "Client not received any UserId from server response.. so Exiting the application.");
#endif 
```

记录器类是这样实现的：

```
 public static void log(string tag, string str)
    {
#if LOG_ENABLED
        string  strMsg= new StringBuilder().Append(DateTime.Now.ToShortDateString()).Append(" , ").Append(DateTime.Now.ToShortTimeString()).Append(" : ").Append(tag).Append(" : ").Append(str).ToString();            
        System.Diagnostics.Debug.WriteLine("Telus Application log : "+strMsg);           
       // LogOffline(strMsg);
#endif
    }

 internal static void log(Exception e)
    {
#if LOG_ENABLED
        System.Diagnostics.Debug.WriteLine("Telus Application log : {0}", e.StackTrace);
#endif
    } 
```

当模拟器运行时，或者即使应用程序通过 Visual Studio 部署在手机上，我也可以毫无问题地获取日志。

谢谢！！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T12:14:13.080

一种解决方案是将日志写入独立存储。然后，您可以使用独立存储工具访问独立存储，也可以在应用中添加一个选项，在应用中显示它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T10:38:42.537

As far as I know, `System.Diagnostics.Debug.WriteLine` only outputs the message in the Visual Studio Output window when *debugging* an app (and of course Visual Studio needs to be connected to the Windows Phone emulator or device).

# iphone - 复杂的Json解析结果格式

> ID：11577518
> 
> 赞同：2
> 
> 时间：2012-07-20T10:28:06.183
> 
> 标签：iphone, json, jsonresult

我是 ios 开发的新手。我在从复杂的 json 响应中获取数组时遇到问题。所以任何人都知道它而不是请帮助我......我的json响应如下，我想获取 subcat_id 和 subcat_name 的数组

```
 (
    {
    0 =         {
        "subcat_id" = 2;
        "subcat_name" = Restaurants;
    };
    1 =         {
        "subcat_id" = 3;
        "subcat_name" = "Bar &amp; Club";
    };
    "cat_id" = 1;
    "cat_name" = "Dining &amp; Nightlife";
},
    {
    0 =         {
        "subcat_id" = 5;
        "subcat_name" = Massage;
    };
    1 =         {
        "subcat_id" = 6;
        "subcat_name" = Facial;
    };
    2 =         {
        "subcat_id" = 7;
        "subcat_name" = "Manicure / Pedicure";
    };
    3 =         {
        "subcat_id" = 8;
        "subcat_name" = Tanning;
    };
    4 =         {
        "subcat_id" = 9;
        "subcat_name" = "Hair Salon";
    };
    5 =         {
        "subcat_id" = 10;
        "subcat_name" = "Hair Removal";
    };
    6 =         {
        "subcat_id" = 11;
        "subcat_name" = Spa;
    };
    7 =         {
        "subcat_id" = 12;
        "subcat_name" = "Teeth Whitening";
    };
    8 =         {
        "subcat_id" = 13;
        "subcat_name" = "Eye &amp; Vision";
    };
    9 =         {
        "subcat_id" = 15;
        "subcat_name" = "Cosmetic &amp; Beauty Treatments";
    };
    "cat_id" = 4;
    "cat_name" = "Health &amp; Beauty";
},
    {
    0 =         {
        "subcat_id" = 17;
        "subcat_name" = Pilates;
    };
    1 =         {
        "subcat_id" = 18;
        "subcat_name" = Yoga;
    };
    2 =         {
        "subcat_id" = 19;
        "subcat_name" = Gym;
    };
    3 =         {
        "subcat_id" = 20;
        "subcat_name" = "Boot Camp";
    };
    "cat_id" = 16;
    "cat_name" = Fitness;
},
    {
    0 =         {
        "subcat_id" = 22;
        "subcat_name" = "Men's Clothing";
    };
    1 =         {
        "subcat_id" = 23;
        "subcat_name" = "Women's Clothing";
    };
    2 =         {
        "subcat_id" = 24;
        "subcat_name" = "Food &amp; Grocery";
    };
    3 =         {
        "subcat_id" = 25;
        "subcat_name" = "Wine &amp; Liquor";
    };
    4 =         {
        "subcat_id" = 26;
        "subcat_name" = "Home Services";
    };
    5 =         {
        "subcat_id" = 27;
        "subcat_name" = "Rental Car/ Car Wash/ Car Repair";
    };
    6 =         {
        "subcat_id" = 53;
        "subcat_name" = "Product / Service Discounts";
    };
    "cat_id" = 21;
    "cat_name" = "Retail &amp; Services";
},
    {
    0 =         {
        "subcat_id" = 29;
        "subcat_name" = Museums;
    };
    1 =         {
        "subcat_id" = 30;
        "subcat_name" = "Wine Tasting";
    };
    10 =         {
        "subcat_id" = 42;
        "subcat_name" = "Dance Classes";
    };
    11 =         {
        "subcat_id" = 50;
        "subcat_name" = "Family Fun";
    };
    2 =         {
        "subcat_id" = 31;
        "subcat_name" = "City Tours";
    };
    3 =         {
        "subcat_id" = 32;
        "subcat_name" = "Comedy Clubs";
    };
    4 =         {
        "subcat_id" = 33;
        "subcat_name" = Theater;
    };
    5 =         {
        "subcat_id" = 34;
        "subcat_name" = Concerts;
    };
    6 =         {
        "subcat_id" = 35;
        "subcat_name" = "Education &amp; Personal Development";
    };
    7 =         {
        "subcat_id" = 36;
        "subcat_name" = Golf;
    };
    8 =         {
        "subcat_id" = 38;
        "subcat_name" = Bowling;
    };
    9 =         {
        "subcat_id" = 39;
        "subcat_name" = "Sporting Events";
    };
    "cat_id" = 28;
    "cat_name" = "Activities &amp; Adventures";
},
    {
    0 =         {
        "subcat_id" = 44;
        "subcat_name" = Others;
    };
    1 =         {
        "subcat_id" = 56;
        "subcat_name" = "Accommodation and Holidays";
    };
    "cat_id" = 43;
    "cat_name" = Others;
},
    {
    0 =         {
        "subcat_id" = 46;
        "subcat_name" = "Pet Grooming Services";
    };
    "cat_id" = 45;
    "cat_name" = Pets;
},
    {
    0 =         {
        "subcat_id" = 52;
        "subcat_name" = "Car Servicing / Repairs";
    };
    "cat_id" = 51;
    "cat_name" = "Car Servicing / Repairs";
}
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:56:51.783

What you have posted in your question isn't JSON. It might have been originally transmitted as JSON data. But the post shows a data structure in the property list format. Note that some of the strings are HTML or XML encoded which will cause problems later. You should fix this at the source before transmitting it as JSON.

Now the result you post is an array of dictionaries containing further dictionaries. The outmost array is a list of categories. Each category is given as a dictionary containg both its own name and ID as well as the subcategories. The innermost dictionaries are the subcategories containing their ID and name.

The category dictionaries are somewhat problematic because the mix two things and are a mixture of a dictionary and an array. It's difficult to access the subcategories.

Your code could like like this:

```
NSArray* categoryList = [someJSONParser parse];
for (NSDictionary* category in categoryList ) {
    NSString* categoryName = [category objectForKey: @"cat_name"];
    NSNumber* categoryIdObj = [category objectForKey: @"cat_id"];
    int categoryId = [categoryIdObj intValue];

    int index = 0;
    NSDictionary* subcategory = [category objectForKey: [NSString stringWithFormat: @"%d", index] ];
    while (subcategory != nil) {
        NSString* subcategoryName = [subcategory objectForKey: @"subcat_name"];
        NSNumber* subcategoryIdObj = [subcategory objectForKey: @"subcat_id"];
        int subcategoryId = [subcategoryIdObj intValue];

        index++;
        subcategory = [category objectForKey: [NSString stringWithFormat: @"%d", index] ];
    }
} 
```

# c++ - 从另一个函数获取 char[] 的好方法。开始思考 c/c++

> ID：11577519
> 
> 赞同：4
> 
> 时间：2012-07-20T10:28:09.023
> 
> 标签：c++, c

据我了解，正确的编程风格告诉如果你想从另一个函数获取字符串（char []）最好由调用者创建 char * 并将其与创建的字符串长度一起传递给字符串格式化函数。在我的情况下，字符串格式化函数是“getss”。

```
void getss(char *ss, int& l)
{

    sprintf (ss,"aaaaaaaaaa%d",1);
    l=11;
}

int _tmain(int argc, _TCHAR* argv[])
{

    char *f = new char [1];
    int l =0;
    getss(f,l);

    cout<<f;
    char d[50] ;
    cin>> d;
    return 0;
} 
```

"getss" 格式化字符串并将其返回给 ss*。我认为 gets 不允许超出调用者创建的字符串长度。据我了解，调用者通过变量“l”告诉长度，“getcc”返回长度，以防缓冲区未完全填充但不允许超出调用者定义的数组范围。

但现实告诉我，调用者创建的缓冲区大小并不那么重要。没关系，如果您创建大小为 1，并填充 11 个字符长。在输出中，我将获得“getss”已填充的所有字符。

那么传递长度变量的原因是什么 - 你总是会得到零终止的字符串，你会根据它找到结尾。

如果getss可以扩展它，创建具有指定长度的缓冲区的原因是什么？

它是如何在现实世界中完成的——从另一个函数中获取字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T10:32:43.827

实际上，调用者是分配缓冲区并知道可以容纳在其中的字符串的最大大小的那个。它将那个大小传递给函数，函数必须使用它来避免溢出传递的缓冲区。

在您的示例中，这意味着调用[snprintf()](http://linux.die.net/man/3/snprintf)而不是`sprintf()`：

```
void getss(char *ss, int& l)
{
    l = snprintf(ss, l, "aaaaaaaaaa%d", 1);
} 
```

当然，在 C++ 中，您只需要返回[std::string](http://www.cplusplus.com/reference/string/string/)的一个实例，所以这主要是一个 C 范式。由于 C 不支持引用，因此该函数通常返回字符串的长度：

```
int getss(char *buffer, size_t bufsize)
{
    return snprintf(buffer, bufsize, "aaaaaaaaaa%d", 1);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T10:30:35.787

你只是幸运。Sprintf() 无法扩展（静态分配的）存储，除非您传入至少 length + 1 个元素的 char 数组，否则您的程序会崩溃。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T10:31:16.883

在现实世界中，C++ 最好使用`std::string`对象和`std::stringstream`

```
char *f = new char [1];

sprintf (ss,"aaaaaaaaaa%d",1); 
```

你好，缓冲区溢出！在 C 中使用`snprintf`而不是`sprintf`在 C++ 中使用 C++ 功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T10:34:30.763

> 据我了解，调用者通过变量“l”告诉长度，“getcc”返回长度，以防缓冲区未完全填充但不允许超出调用者定义的数组范围。

这是现场！

> 但现实告诉我，调用者创建的缓冲区大小并不那么重要。没关系，如果您创建大小为 1，并填充 11 个字符长。在输出中，我将获得“getss”已填充的所有字符。

这是绝对错误的：您调用了未定义的行为，并且没有崩溃。像 valgrind 这样的内存检查器会将此行为报告为错误。

> 那么传递长度变量的原因是什么。

长度是为了避免这种未定义的行为。我知道当您不知道要返回的字符串的长度时，这是相当令人沮丧的，但这是唯一不会产生字符串所有权问题的安全方法。

一种替代方法是动态分配返回值。这使您可以返回任意长度的字符串，但调用者现在负责释放返回的值。这对读者来说不是很直观，因为`malloc`和`free`发生在不同的地方。

C++ 中的答案完全不同，而且要好得多：您使用`std::string`标准库中的一个类，它表示任意长度的字符串。此类对象管理为字符串分配的内存，无需`free`手动调用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-20T10:35:13.423

在这种情况下，您很幸运，内存中的“char *”之后没有“重要的”其他数据。C 运行时并不总是能可靠地检测到这些违规行为。尽管如此，您在这里弄乱了内存，并且您的程序随时容易崩溃。

除此之外，在“现代”C++ 代码中使用原始“char*”指针确实是你不应该再做的事情。

请改用 STL 类（std::string、std::wstring）。这样您就不必担心这样的内存问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-20T10:43:58.227

对于 cpp 考虑[智能指针](http://en.wikipedia.org/wiki/Smart_pointer)在你的情况下可能是 a `shared_ptr`，这将负责释放内存，目前你的程序正在泄漏内存，因为你永远不会释放你分配的内存`new`。分配的空间`new`必须用 delete 重新分配，否则它将一直分配到您的程序退出，这很糟糕，想象一下您的浏览器在关闭它们时没有释放它用于选项卡的内存。

在字符串的特殊情况下，我会推荐 OP 所说的，使用字符串。使用 Cpp11，它将被移动（而不是复制），您无需使用`new`，也无需担心`delete`.

```
std::string myFunc() {
    std::string str
    //work with str
    return str
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-20T11:00:44.700

*在 C++中*，您不必构建字符串。只需单独输出零件

```
std::cout << "aaaaaaaaaa" << 1; 
```

或者，如果您想将其保存为字符串

```
std::string f = "aaaaaaaaaa" + std::to_string(1); 
```

（事件虽然调用`to_string`对于一个常量值来说有点傻）。

# c++ - win32 - 第二次调用 EM_SETTEXTEX 不会正确显示附加的文本。为什么？

> ID：11577521
> 
> 赞同：2
> 
> 时间：2012-07-20T10:28:24.987
> 
> 标签：c++, windows, winapi

我正在尝试通过附加原始字符串并重新发送 EM_SETTEXTEX 消息来将文本附加到富编辑控件。

```
char outputText[4096] = "{\\rtf1\\ansi\\ansicpg0\\deff0{\\colortbl;\\red0\\green0\\blue0;\\red255\\green0\\blue0;\\red50\\green205\\blue50;\\red255\\green140\\blue0;}TEST";

SETTEXTEX s;s.flags = ST_DEFAULT;s.codepage = CP_ACP;
SendMessage(hOutputWndText,EM_SETTEXTMODE,(WPARAM)TM_RICHTEXT,NULL);
SendMessage(hOutputWndText,EM_SETTEXTEX,(WPARAM)&s,(LPARAM)outputText); 
```

我知道字符串上没有右括号，但它显示了我想要的。

```
TEST 
```

现在我在富编辑控件中附加字符串并“重新设置”文本。请注意，我添加了一个右括号以防万一。

```
strcat_s(outputText,"NEWSTUFF}");
SendMessage(hOutputWndText,EM_SETTEXTEX,(WPARAM)&s,(LPARAM)outputText); 
```

而这次的输出。

```
NEWSTUFF} 
```

是什么赋予了？我将变量 outputText 打印到控制台，我得到了完整的字符串。

```
{\rtf1\ansi\ansicpg0\deff0{\colortbl;\red0\green0\blue0;\red255\green0\blue0;\red50\green205\blue50;\red255\green140\blue0;}TESTNEWSTUFF} 
```

# javascript - 点击时在javascript中调用一个url

> ID：11577522
> 
> 赞同：12
> 
> 时间：2012-07-20T10:28:31.573
> 
> 标签：javascript, jsp, url

我有一个javascript函数。点击会调用这个。使用`document.getElementById`我在那里得到某些参数。使用该参数，我需要构建一个 url。即，onclick 必须执行该 url。

例如，在 javascript 中，

```
function remove()
{
var name=...;
var age = ...;
// url should be like http://something.jsp?name=name&age=age
} 
```

简而言之，我需要`http://something.jsp?name=name&age=age`在点击时执行此 url

```
<input type="button" name="button" onclick="remove();" /> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-20T10:30:44.293

使用[`window.location`](https://developer.mozilla.org/en/DOM/window.location)：

```
function remove()
{
    var name = ...;
    var age  = ...;

    window.location = 'http://something.jsp?name=' + name + '&age=' + age;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-20T10:40:31.867

我用：

```
document.location.href = "report.html"; 
```

所以，在你的情况下：

```
function remove() {
    var name=... ,
        age = ...;

    document.location.href = "something.jsp?name=" + name + "&age=" + age;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T10:31:43.713

打电话

```
window.location=myURL; 
```

在你的功能中

# javascript - Array.prototype 与 [] 性能

> ID：11577533
> 
> 赞同：7
> 
> 时间：2012-07-20T10:29:14.873
> 
> 标签：javascript, performance

我还没有真正有机会研究的快速问题。在调用/应用类型的上下文中使用时哪个性能更高：`Array.prototype`vs `[]`？

例如：

```
function test1() {
    return Array.prototype.splice.apply(arguments, [1, 2]);
}

test1([1,2,3,4,5,6,7,8,9]);

function test2() {
    return [].splice.apply(arguments, [1, 2]);
}

test1([1,2,3,4,5,6,7,8,9]); 
```

我的想法：我认为这种`Array.prototype`方式更高效，因为原型函数可以重用，并且不需要创建字面量。不过不太确定。

使用 JSPerf (with chrome) 看起来`Array.prototype`确实稍微更高性能：

[http://jsperf.com/array-perf-prototype-vs-literal](http://jsperf.com/array-perf-prototype-vs-literal)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T10:39:02.257

这取决于运行它的浏览器。在 chrome 中，.prototype 似乎更快，firefox 显示两者之间没有区别，尽管通常比 chrome 执行得慢。IE9 显示 .prototype 的速度大幅提升，但它是迄今为止最慢的浏览器。

然而，这种优化是如此之小，以至于人们可能会争辩说节省的时间抵消了读取代码所需的额外字节。不过，我离题了，如果这些是您遇到的最大性能问题，那么您在优化方面真的没有任何问题！

编辑：

[我在这里](http://jsperf.com/array-perf-prototype-vs-literal/2)添加了一个额外的测试，我使用传递给函数的数组来调用 splice 函数，它在 IE、Chrome 和 Firefox 中都显示得更快。我的结论是，如果您已经有了方便的数组，请使用它，否则使用原型。

# django - 检查 django 中的域可用性

> ID：11577534
> 
> 赞同：0
> 
> 时间：2012-07-20T10:29:19.087
> 
> 标签：django, dns

我想设计一个用户输入域名的页面，程序检查它是否可用。我在网上搜索了几个小时，最后没有结果。[这个页面](https://stackoverflow.com/questions/2523260/recommendations-for-domain-name-registrar-with-api-support)和[这个](https://gis.stackexchange.com/questions/25129/how-to-check-if-domain-already-exists)页面都有指导，但他们没有'帮不了我。我`arcpy`在 django 中搜索过，但听起来我不能在 django 中使用它，对吗？还有一些 API，但它们是用于 PHP、Ruby 等的。如果你做了这样的事情，您能告诉我您使用了哪个 API 或库吗？

**编辑：**

我认为这个[问题](https://stackoverflow.com/questions/3450339/python-get-whois)的解决方案很好，但是要使用什么依赖项`subprocess`？

**编辑：** 这是[我的解决方案](https://stackoverflow.com/questions/11578943/error-when-using-pywhois)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:31:25.910

试试这个[http://code.google.com/p/pywhois/](http://code.google.com/p/pywhois/)

**编辑：** [适用于 Windows 的 python whois](https://stackoverflow.com/questions/3450339/python-get-whois)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T10:46:39.613

Django 的 URLField 有一个内置的“verify_exists”方法，您可以使用它。对于更高级的行为，我将只使用 urllib2 或其他一些库并向您的表单添加一些功能

# asp.net-mvc - 无法让 Web API 在我的 MVC 应用程序中工作

> ID：11577536
> 
> 赞同：1
> 
> 时间：2012-07-20T10:29:26.807
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-web-api

当我访问 Web api 路由时出现以下异常，但该站点在其他方面工作正常。

我正在运行仍然部分在 Web 表单上的 MVC 应用程序。我们正在为 DI 使用结构映射，我按照此处的建议 ( [http://lucid-nonsense.co.uk/dependency-injection-web-api-and-mvc-4-rc/](http://lucid-nonsense.co.uk/dependency-injection-web-api-and-mvc-4-rc/) ) 为 WebAPI 设置 DI ，但没有任何区别。

什么需要 System.Data.Services 3.5.0？对我来说这是 3.5 而不是 4.x 似乎很奇怪

> System.IO.FileNotFoundException 无法加载文件或程序集“Microsoft.Data.Services，Version=3.5.0.0，Culture=neutral，PublicKeyToken=b77a5c561934e089”或其依赖项之一。该系统找不到指定的文件。在 System.Reflection.RuntimeAssembly.GetExportedTypes(RuntimeAssembly 程序集，ObjectHandleOnStack retTypes) 在 System.Web.Http.Dispatcher.DefaultHttpControllerTypeResolver.GetControllerTypes(IAssembliesResolver assemblyResolver) 在 System.Web.Http.WebHost 的 System.Reflection.RuntimeAssembly.GetExportedTypes()。 WebHostHttpControllerTypeResolver.GetControllerTypes(IAssembliesResolverassemblyResolver) 在 System.Web.Http.Dispatcher.HttpControllerTypeCache.InitializeCache() 在 System.Lazy `1.CreateValue() at System.Lazy`1.LazyInitValue()在 System.Lazy 1.CreateValue()`1.get_Value() at System.Web.Http.Dispatcher.HttpControllerTypeCache.get_Cache() at System.Web.Http.Dispatcher.DefaultHttpControllerSelector.InitializeControllerInfoCache() at System.Lazy`在 System.Lazy`1.LazyInitValue() at System.Lazy`1.get_Value() 在 System.Web.Http.Dispatcher.DefaultHttpControllerSelector.SelectController(HttpRequestMessage 请求) 在 System.Web.Http.Dispatcher.HttpControllerDispatcher.SendAsyncInternal(HttpRequestMessage request, CancellationToken cancelToken) 在 System.Web.Http.Dispatcher.HttpControllerDispatcher .SendAsync(HttpRequestMessage 请求，CancellationToken cancelToken)

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T07:42:31.050

您的系统缺少 ADO.Net 数据服务附带的 .Net Framework 3.5 SP1。您可以尝试安装 ADO.NET Data Services v1.5 CTP2：[http](http://www.microsoft.com/en-us/download/details.aspx?id=23113) ://www.microsoft.com/en-us/download/details.aspx?id=23113并查看它是否有效。即使在安装过程中出现错误，它也可能有效。您正在使用哪个数据库上下文生成器？如果您使用 EF 4.x DbContext Generator，那么我认为它可能需要旧版本的数据服务。MVC4 附带的 EF 5 不适用于 VS2010。

# java - Android手机在最大音量时静音

> ID：11577540
> 
> 赞同：3
> 
> 时间：2012-07-20T10:29:47.820
> 
> 标签：java, android, volume

我在 SO 上的第一篇文章，所以我们开始吧：我正在开发一个通过音频插孔与附件通信的应用程序。为了可靠，信号量必须最大化。我使用媒体频道`AudioTrack`进行播放。要设置音量，我使用以下代码，在几个地方推荐，包括 SO：

```
AudioManager audioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
audioManager.setStreamVolume(AudioManager.STREAM_MUSIC, audioManager.getStreamMaxVolume(AudioManager.STREAM_MUSIC), AudioManager.FLAG_SHOW_UI); 
```

对我来说相当令人惊讶的结果：根本没有声音。但是，如果我愿意，在本节执行后，手动降低手机的音量（在 S+、S2、S3 和 Nexus 上测试并确认）它会突然调到最大音量。不是在滑块上，而是在实际音量上。应用程序的每次重复执行都会变得更糟。在执行一切正常之前，0 是无声的，15 是响亮的。
第一次运行：15 静音，14 最大。
第二次运行：15 是静音，14 是一半，13 是最大。
...
更糟糕的是：这种行为是系统持久的。杀死应用程序并收听 mp3 后，使用音量摇杆手动设置最大音量时没有声音。

我用静态值 14 替换了`getStreamMaxVolume`（似乎总是返回 15，有几个地方指出音量范围是 0-15，我还没有找到证据），至少启动后现在有声音，但我的客户赢了我担心，如果我的应用程序改变了他的音量滑块行为，我不会太高兴。

我听说过/读过另一种可以改变相对于用户设置的音量的方法，所以如果他以 50% 的音量运行手机，该方法会将音量控制在 0-50% 之间，但我需要绝对最大音量.

哦，为了完整记录 AudioTracks 初始阶段：

```
mAudioTrack = new AudioTrack(AudioManager.STREAM_MUSIC, mSampleRate /* 44100 */, AudioFormat.CHANNEL_OUT_MONO, AudioFormat.ENCODING_PCM_8BIT, 5000, AudioTrack.MODE_STREAM); 
```

并且播放（`mBAWholePeriod`是一个字节数组）：

```
mAudioTrack.write(mBAWholePeriod, 0, mBAWholePeriod.length); 
```

因此，尽管我不存在声誉，但如果有人能回答我，我将不胜感激！

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T14:45:56.810

另一种选择是使用 MediaPlayer 播放音频。音量在 0.0（静音）和 1.0（最大）之间浮动。Android 习惯于所有你设置大容量，但这是一个错误。使用 MediaPlayer.setVolume(1.0f, 1.0f)。

[http://developer.android.com/reference/android/media/MediaPlayer.html#setVolume(float](http://developer.android.com/reference/android/media/MediaPlayer.html#setVolume(float) , float)

通过使用 AudioManager，您可以调整手机的音量，就好像您真的将手指放在开关上并向上敲击一样。所以是的，这就是为什么即使在杀死应用程序之后它仍然存在的原因。您可能会考虑告诉用户确保将他们的音量调到最大，而不是为他们这样做。您可以使用 AudioManager 来询问它的级别，然后通知用户您需要最大音量。然后他们可以打开它。或者您可以保存他的设置并在您的应用程序安静等后恢复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T14:20:40.893

AudioTrack 类有一个 setStereoVolume(left, right) 调用，它的运行完全独立于系统的音量设置。似乎是在特定轨道本身上设置的。

Seeing how you instantiate with Mono rather than Stereo sound in your track, I don't know if you'd end up with the desired results.

# java - java保存的文件消失（ObjectOutputStream）

> ID：11577544
> 
> 赞同：0
> 
> 时间：2012-07-20T10:30:01.310
> 
> 标签：java, objectoutputstream

嗯，这是一个奇怪的。第一次保存尝试通常有效（最多再尝试一次）。
**但是**在重负载（连续保存很多次）**中，保存的文件消失了**。
如果取消注释“Thread.sleep”，则捕获错误，否则验证成功通过

```
public void save(Object key, T objToSave) throws FileNotFoundException, IOException {
    IOException ex = null;
    for (int i = 0; i < NUM_OF_RETRIES; i++) {
        try {
            /* saving */
            String filePath = getFilePath(key);
            OutputStream outStream = getOutStream(filePath);
            ObjectOutputStream os = new ObjectOutputStream(outStream);          
            os.writeObject(objToSave);
            os.close(); 

            /* validations warnings etc. */
            if (i>0){
                logger.warn(objToSave + "  saved on attamped " + i);
                /* sleep more on each fail */
                Thread.sleep(100+i*8);
            }

            //Thread.sleep(50);
            File doneFile = new File(filePath); 
            if (! (doneFile.exists())){
                logger.error("got here but file was not witten to disk ! id was" + key);
                throw new IOException();
            }
            logger.info("6\. start persist " + key + " path=" + new File(filePath).getAbsolutePath() + " exists="+doneFile.exists());

            return;
        } catch (IOException e) {
            logger.error(objToSave + " failed on attamped " + i);
            ex = e;
        } catch (InterruptedException e) {          
            e.printStackTrace();
        }
    }
    throw ex;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:28:59.760

这不是 Java 作家的问题。我没有明确使用线程，但在我的测试中，我删除了我保存使用的文件夹： Runtime.getRuntime("rm -rf saver_directory"); 我发现它是异步的，确切的删除和创建时间以毫秒为单位变化。所以解决方案是在删除后添加“睡眠”。正确的答案是使用 java 进行删除而不是创建快捷方式；）

谢谢你们。

# java - 在 Spring 中指定具有值的列表的最简单方法是什么？

> ID：11577547
> 
> 赞同：12
> 
> 时间：2012-07-20T10:30:12.107
> 
> 标签：java, spring

假设我有大量值 aa bb cc dd ee ff gg 等，我需要在 spring 中作为构造函数传递

如果我需要配置为字符串数组，这在 spring 中很容易，因为我们可以将值指定为逗号分隔为 aa、bb、cc 等，

如果我需要配置为列表，我需要执行以下操作

```
<bean name="myBean" class="MyClass">
    <constructor-arg>
        <list>
            <value>aa</value>
            <value>bb</value>
            <value>cc</value>
            <value>dd</value>
        </list>
    </constructor-arg>
</bean> 
```

当值的数量增加时，它会占据很大的线条，看起来很难看。

有人可以帮助我如何将大值作为字符串中的列表作为构造函数传递吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-20T11:33:55.080

传递给列表的值是否来自属性文件？如果是这样，你可以使用这样的东西：

```
<bean name="myBean" class="MyClass">
   <constructor-arg>
      <bean class="org.springframework.util.StringUtils" factory-method="commaDelimitedListToSet">
          <constructor-arg type="java.lang.String" value="${list.value}"/>
      </bean>
    </constructor-arg>
</bean> 
```

使用以下 .properties 文件

```
list.value=aa,bb,cc,dd 
```

如果没有，您显然可以直接通过 then ：

```
<bean name="myBean" class="MyClass">
   <constructor-arg>
      <bean class="org.springframework.util.StringUtils" factory-method="commaDelimitedListToSet">
          <constructor-arg type="java.lang.String" value="aa,bb,cc,dd"/>
      </bean>
    </constructor-arg>
</bean> 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-20T14:06:05.130

Spring 可以自动为您将任何逗号分隔的字符串转换为列表或数组：

```
public class Foo {
   public void setValueList(String[] values) { ... }
}

<bean class="Foo"
      p:valueList="a,b,c,d" />
<bean class="Foo"
      c:_0="a,b,c,d" />
<bean class="Foo">
     <constructor-arg><value>a,b,c,d</value></constructor-arg>
</bean> 
```

事实上，即使字符串中只有 1 个值，并且没有逗号，它仍然可以工作。

不需要有人在另一个答案中提到的对 org.springframework.util.StringUtils 的调用。

这个词也适用于构造函数参数（c:_0 是使用 c 命名空间的 <constructor-arg index="0"> 的简写。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-05-22T12:41:45.483

您可以尝试更简单的方法并使用 Spring 表达式语言将值转换为列表：

```
<bean name="myBean" class="MyClass">
    <constructor-arg value="#{T(java.util.Arrays).asList('${list.values}')}"/>
</bean> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-11-16T04:14:31.113

如果您使用的是最新的 Spring 框架版本（我相信是 Spring 3.1+），则不需要在 SpringEL 中进行字符串拆分，

只需在 Spring 的 Configuration 类中添加 PropertySourcesPlaceholderConfigurer 和 DefaultConversionService （带有注释的 Configuration ），例如，

```
@Configuration
public class AppConfiguration {

    @Bean
    public static PropertySourcesPlaceholderConfigurer propertyPlaceholderConfigurer() {
        return new PropertySourcesPlaceholderConfigurer();
    }

    @Bean public ConversionService conversionService() {
        return new DefaultConversionService();
    }
} 
```

在你的课堂上

```
@Value("${list}")
private List<String> list; 
```

或者，如果您想要这样做，请在构造函数的参数上使用 @Value 注释。

最后在属性文件中

```
list=A,B,C,D,E 
```

如果没有 DefaultConversionService，当您将值注入字段时，您只能将逗号分隔的字符串放入字符串数组中，但是 DefaultConversionService 为您做了一些方便的魔术，并将它们添加到 Collection、Array 等中（如果您愿意，请检查实现想了解更多）

With these two, it even handles all the redundant whitespaces including newline, so you don't need to add additional logics to trim them.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T11:15:47.170

您可以实现一个以逗号分隔的字符串作为其参数的构造函数（并自己将该字符串拆分为值）。

如果您想要一个适用于任何构造函数/属性的解决方案，您可以考虑实现自己的`PropertyEditor`并配置 Spring 以使用它。

# shell - 执行命令 tar -xjf 时出错

> ID：11577551
> 
> 赞同：0
> 
> 时间：2012-07-20T10:30:22.783
> 
> 标签：shell

在 shell 脚本中执行如下命令时出现错误，请帮助

```
tar -xjf $tarfile 
```

错误是：

```
tar: option requires an argument -- f 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:21:45.763

发生这种情况是因为 $tarfile 变量为空。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T11:41:00.590

然后变量 $tarfile 显然是空的。参数`f`需要文件名或连字符来表示标准输入，允许将数据管道传输到 tar。该`j`参数期望找到以 bzip2 格式压缩的 tarfile。

在您的脚本中，您必须执行类似的操作：

```
tarfile=/path/to/file.tar.bz2
tar -xjf $tarfile 
```

或管道示例：

```
ssh user@remotehost cat /path/to/file.tar.bz2|tar -xjf - 
```

# powershell - 无法从 powershell 为系统用户运行 exe

> ID：11577553
> 
> 赞同：3
> 
> 时间：2012-07-20T10:30:29.787
> 
> 标签：powershell

我正在尝试从 windows-7 64 位机器上的 powershell 脚本运行 exe。在这个脚本中，我想以另一个用户身份运行 exe。当调用脚本的用户是实际用户时，它可以工作。但在我的情况下，这个 powershell 脚本将从系统用户帐户执行，并且系统用户脚本不起作用。这是我用来打开记事本的简单代码。此代码对系统用户失败。

```
$username = 'MyDomain\MyUser'
$password = 'mypswd'
$cred = New-Object System.Management.Automation.PSCredential -ArgumentList @($username,(ConvertTo-SecureString -String $password -AsPlainText -Force))
Start-Process -Credential $cred  "notepad.exe" 
```

我已将执行策略设置为不受限制。当我为系统用户运行此脚本时，我收到错误消息

> Start-Process ：由于错误无法执行此命令：拒绝访问。在 D:\temp\trythis.ps1:4 char:14 + Start-Process <<<< -Credential $cred "notepad.exe" + CategoryInfo : InvalidOperation: (:) [Start-Process], InvalidOperationException + FullyQualifiedErrorId ： InvalidOperationException,Microsoft.PowerShell.C ommands.StartProcessCommand

有什么方法可以为系统用户运行这个脚本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:43:40.037

这里最可能的问题是权限问题（我可以重现您的问题的唯一方法是为帐户设置拒绝条目）。

我建议以下内容来确认权限是否正确。说明适用于 Windows XP、SP3 - 根据您的版本进行调整！

1.  右键单击“notepad.exe”，然后单击“**属性”**
2.  单击**安全**选项卡
3.  单击**高级**按钮
4.  单击**有效权限**选项卡
5.  单击**选择...**按钮
6.  输入您要检查的帐户并确认该帐户具有适当的读取和执行权限。

# ruby-on-rails - 使用 Solr 在生产环境中设置 Ruby on Rails 应用程序

> ID：11577555
> 
> 赞同：1
> 
> 时间：2012-07-20T10:30:32.997
> 
> 标签：ruby-on-rails, tomcat, solr, tomcat7

我创建了一个使用 Solr 进行搜索的 RoR 应用程序（通过 Sunspot gem）。在开发中一切都很好， sunspot_solr gem 为开发提供了一个简单的 solr 实例。但是在生产中，我看到了不同的配置，我对每种配置的优缺点感到困惑：

**Solr + Tomcat：** 我已经阅读过这样的指南[，](http://minhajuddin.com/2011/11/10/how-to-setup-solr-and-sunspot-on-a-rails-production-server)其中概述了设置。但是我现在收到[此错误](https://gist.github.com/3150027)。整个设置似乎很脆弱，但如果这种方法最好，我会坚持下去。任何有关该错误的帮助/建议将不胜感激？

**重用 Solr 示例 jar** [这种方法](http://charlesleifer.com/blog/solr-ubuntu-revisited/)似乎要容易得多，只需在后台启动示例 jar。这是否完全取代了对 Tomcat 的需求？表现不佳是明智的吗？

我很久以前就对 Java 有过一点经验，所以这一切都是非常新的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:54:17.097

对于生产环境，我建议使用在 Tomcat 上运行的 Solr。如果您完全忘记了这些示例，那就更好了，这些示例旨在加快使用 Solr 并展示您可以使用它做什么。

你现在得到的错误很清楚：

```
org.apache.lucene.index.IndexNotFoundException: no segments* file found in org.apache.lucene.store.MMapDirectory@/var/lib/tomcat7/solr/data/index 
```

这意味着 Solr 没有指向 lucene 索引。根据您使用的配置，您应该检查您的 solr 主目录或数据目录设置。

# javascript - 无法调用 null 的方法 addEventListener() - 即使使用 jQuery DOM 就绪事件

> ID：11577559
> 
> 赞同：1
> 
> 时间：2012-07-20T10:30:39.223
> 
> 标签：javascript, jquery, html, innerhtml, addeventlistener

我正在使用 jQuery for/with javascript 来尝试修改 .htm 文件中 div 的内部 HTML 代码。我正在使用此处推荐的 jQuery DOM 就绪事件（http://stackoverflow.com/questions/9856140/javascript-uncaught-typeerror-cannot-call-method-addeventlistener-of-null）以避免脚本在 div 准备好之前运行，但这没关系；我不断收到这个错误。

我必须说距离我接触 Javascript 仅几天时间，距离我上次使用 HTML 已经有很长时间了，所以请不要丢弃任何典型的菜鸟错误，因为很可能就是这样。

这是我正在使用的文件，托管在 Skydrive 中：

[AMPlayer.htm](http://sdrv.ms/MNUPtj)

[播放列表.js](http://sdrv.ms/LZTPZ8)

可以猜到，我使用 videoJS 作为视频播放器。videojs 的 CSS 和 JS 文件可以在线 (http://videojs.com/#section5) 或离线引用，如 AMPlayer.htm 所示，但这只是间接信息，因为它看起来更像是一个问题javascript而不是videojs的问题。

编辑：我认为是文件的重要部分：

AMPlayer.htm（我认为问题出在这里，所以我粘贴了整个文件）：

```
<!DOCTYPE html>
<html>

<head>
    <link href="video-js.css" rel="stylesheet" type="text/css">
    <script src="video-js.js"></script>
    <script src="jquery-1.7.2.min.js"></script>
    <script src="playlister.js" type="text/javascript"></script>
    <title>AMPlayer</title>
</head>

<body>
    <div id="the-video" class="video-js-box">
            <span>&nbsp;</span>
        </div>
</body>

</html> 
```

播放列表.js：

```
function postVideo()
{

    getNextVideo();
    document.write("NEXT VIDEO: "+videoNames[iNewVideoId]+"<br>");
    var video1 = '<video id="AMPlayer" class="video-js vjs-default-skin" preload="auto" width="650" height="365" data-setup="{}" autoplay> <source src="videos/AVANCE/vid.mp4" type="video/mp4" /><source src="videos/AVANCE/vid.webm" type="video/webm" /></video>';

    //document.write(video1); This writes the text so the video is played, but it drives me to an undesired behaviour
    document.write("BEFORE THE .SETUP<br>");
    //$("#the-video").html(video1); This doesn't work
    //document.getElementById("the-video").innerHTML=video1; This does neither work
    //window.VideoJS.setup($'video1'));
    document.write("AFTER THE .SETUP<br>");
    document.getElementById("AMPlayer").addEventListener('ended', postVideo, true);
    //$(".video-js")[0].player.play();
    document.write("AFTER THE .PLAY<br>");
    //postVideo();
} 
```

任何提供的帮助肯定会非常有用。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T10:46:46.543

您正在尝试使用 id 获取元素`AMPlayer`，但您没有。

您有一个包含要创建的 HTML 的字符串，但它尚未添加到 DOM。

# magento - 在 Magento 中获取特定订单中的产品数量

> ID：11577560
> 
> 赞同：2
> 
> 时间：2012-07-20T10:30:43.217
> 
> 标签：magento, product, mage, orders

我想请您提供一些信息，以帮助我解决我的问题。我的目的是从 Magento 数据库中获取每个订单中的特定产品数量（订单必须处于准确定义的状态）。我使用与 Magento 分开的批处理/脚本，但使用 Mage:app。我不知道我应该从模型开始（这似乎是合乎逻辑的方法，但同时速度很慢）还是直接在数据库上工作（这更困难）。

谢谢你的任何建议。

问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T10:45:39.327

查询数据库并不复杂：

```
 SELECT * 
     FROM sales_flat_order o
LEFT JOIN sales_flat_order_item i ON o.entity_id = i.order_id
    WHERE o.status IN ('pending', 'processing')
      AND i.product_id = <YOUR_PRODUCT_ID> 
```

`total_qty_ordered`结果中的字段将代表订购的数量。

通过模型获取订购的商品数量也不重：

```
<?php

require_once('app/Mage.php');
umask(0);
Mage::app('default');

$core_resource = Mage::getSingleton('core/resource');
$orders = Mage::getResourceModel('sales/order_collection');
$orders->getSelect()->joinLeft(array('ordered_products' => $core_resource->getTableName('sales/order_item')), 'main_table.entity_id = ordered_products.order_id', array('ordered_products.*'));
$orders->addAttributeToSelect('*')
       ->addFieldToFilter('status', array('in' => array('pending', 'processing')))
       ->addAttributeToFilter('main_table.store_id', Mage::app()->getStore()->getId())
       ->addAttributeToFilter('ordered_products.product_id', array('eq' => '2'));
foreach($orders as $order) {
    echo 'Order #' . $order->getId() . ': ' . $order->getData('total_qty_ordered') . '<br/>';
} 
```

第一种方法可能更快，但第二种方法是 Magneto-Upgrade-Safe。因此，您决定使用哪种方法。

# python - virtualenv 中的 SQLAlchemy 错误

> ID：11577561
> 
> 赞同：0
> 
> 时间：2012-07-20T10:30:43.370
> 
> 标签：python, sqlalchemy, python-2.7, virtualenv

我正在尝试在没有 root 权限的计算机上运行 python 脚本。为此，我`virtualenv`使用 Python 2.7 设置了一个，然后添加了我需要的两个包 Parallel Python 和 SQLAlchemy。当我运行脚本时，我收到此错误：

```
(virtPython)thaddeus:recipes ab940$ python2.7 matchIngsParallel.py 
Starting pp with 8 workers
Reading ingredients into dictionary
Traceback (most recent call last):
  File "matchIngsParallel.py", line 65, in <module>
    for synonym, parentIng in session.query(IngSyn.synonym, IngSyn.parentIng): 
  File "build/bdist.macosx-10.6-intel/egg/sqlalchemy/orm/query.py", line 2227, in     __iter__
  File "build/bdist.macosx-10.6-intel/egg/sqlalchemy/orm/query.py", line 2242, in     _execute_and_instances
  File "build/bdist.macosx-10.6-intel/egg/sqlalchemy/engine/base.py", line 1449, in execute
  File "build/bdist.macosx-10.6-intel/egg/sqlalchemy/engine/base.py", line 1584, in _execute_clauseelement
  File "build/bdist.macosx-10.6-intel/egg/sqlalchemy/engine/base.py", line 1698, in _execute_context
  File "build/bdist.macosx-10.6-intel/egg/sqlalchemy/engine/base.py", line 1691, in _execute_context
  File "build/bdist.macosx-10.6-intel/egg/sqlalchemy/engine/default.py", line 331, in do_execute
sqlalchemy.exc.OperationalError: (OperationalError) no such table: ingSyns u'SELECT     "ingSyns".synonym AS "ingSyns_synonym", "ingSyns"."parentIng" AS "ingSyns_parentIng" \nFROM     "ingSyns"' () 
```

似乎所有内容都已正确导入，但未正确访问数据库。

脚本如下：

```
from assignDB import *
from sqlalchemy.orm import sessionmaker
import pp, sys

ppservers = ()

job_server = pp.Server(ppservers=ppservers)

print "Starting pp with", job_server.get_ncpus(), "workers"

print "Reading ingredients into dictionary"
ingreds = {}
for synonym, parentIng in session.query(IngSyn.synonym, IngSyn.parentIng): 
    ingreds[synonym] = parentIng
print "Finished reading ingredients" 
```

（这段代码被缩短了，但是包含了出错的地方）

`assignDB`看起来像这样：

```
from sqlalchemy import Column, Integer, String, ForeignKey, create_engine, Table
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy.orm import relationship, backref, sessionmaker
from sqlalchemy.dialects.sqlite import DATETIME, REAL

engine = create_engine('sqlite:///recDB.db')
Session = sessionmaker(bind=engine)
session = Session()
Base = declarative_base() 
```

其次是类定义。

我已经在其他计算机上尝试过这个脚本（但是我有 root 访问权限），包括在其他 virtualenvs 中，它工作正常。我很困惑可能出了什么问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:43:09.987

您的脚本可以正常访问数据库，但其中似乎没有表。我想你从另一台机器上复制了脚本，你也复制了 SQLite 数据库文件`recDB.db`吗？

# android - Android_RelativeLayout - 如何将两个元素放在同一行？

> ID：11577570
> 
> 赞同：1
> 
> 时间：2012-07-20T10:30:59.050
> 
> 标签：android, android-layout, android-relativelayout

问题是：我有一个 TextView 和一个 EditText，我怎样才能将它们放在同一个“级别”上？

[http://postimage.org/image/o9l17a3zv/](http://postimage.org/image/o9l17a3zv/)

如您所见，我想将“用户名”放在 EditText 的同一级别...

这是我的代码：

```
<TextView
    android:id="@+id/account_creation"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="@string/account_creation"
    android:textSize="20sp"
    android:textStyle="bold" />

<!-- Username -->

<TextView
    android:id="@+id/username_registration"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@id/account_creation"
    android:layout_toLeftOf="@+id/username_new_account"
    android:text="@string/user_text"
    android:textSize="15sp" />

<EditText
    android:id="@+id/username_new_account"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@id/account_creation"
    android:layout_alignParentRight="true"
    android:ems="10"
    android:hint="@string/user_editext" >

    <requestFocus />
</EditText> 
```

我想在他们两个上加上相同的“高度”值，但我不知道这是否是正确/更好的方式......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T10:44:57.673

文本视图和编辑文本在同一行，触及父布局的底线 试试这个。

```
android:layout_alignBottom="@+id/editText1" 
```

这肯定会帮助你。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/parentView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/editText1"
        android:text="TextView" />

    <EditText
        android:id="@+id/editText1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_toRightOf="@+id/textView1"
        android:ems="10" >

        <requestFocus />
    </EditText>

</RelativeLayout> 
```

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T10:33:49.363

`android:gravity="center"`是解决方案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T10:34:11.120

使用`android:layout_toRightOf`or`android:layout_toLeftOf`属性，专用于相对布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="TextView" />

    <EditText
        android:id="@+id/editText1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true" android:layout_toRightOf="@+id/textView1">

        <requestFocus />
    </EditText>

</RelativeLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T10:40:40.023

试试这个

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<TextView
    android:id="@+id/account_creation"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="account_creation"
    android:textSize="20sp"
    android:textStyle="bold" />

<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/account_creation" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="user_text" />

    <EditText
        android:id="@+id/editText1"
        android:hint="Enter_username"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_toRightOf="@+id/textView1" >
    </EditText>
</RelativeLayout>

</RelativeLayout> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T11:00:10.863

您必须在 TextView 小部件中将文本居中，只需`android:gravity`在 TextView xml 声明中使用 android 属性即可。

如果您希望您的文本垂直和水平居中，请使用：

```
 android:gravity="center" 
```

如果您希望您的文本仅水平居中，请使用：

```
 android:gravity="center_horizontal" 
```

# javascript - fancybox 2 图像刷新

> ID：11577572
> 
> 赞同：0
> 
> 时间：2012-07-20T10:31:01.660
> 
> 标签：javascript, jquery, fancybox, fancybox-2

我的网页上有一个fancybox 2，它显示了从网络摄像头自动生成的全尺寸图像。

我使用以下内容刷新网页上的图像：

```
 //reload the images so they are always current
$(document).ready(function () {
    setInterval('reloadBackscatterImage()', 60000); // 60 seconds
});

function reloadBackscatterImage() {
    var src = $('#backscatter-img').attr('src');
    // check for existing ? and remove if found 
    var queryPos = src.indexOf('?');
    if (queryPos != -1) {
        src = src.substring(0, queryPos);
    }
    //generate a timestamp so we always get the latest image (break browser cache)
    var timestamp = new Date().getTime();
    $('#backscatter-img').attr('src', src + "?time=" + timestamp);
    $('#backscatter-link').attr('href', src + "?time=" + timestamp);

    return false; 
} 
```

而fancybox目前由以下发起：

```
$(document).ready(function () {
       $(".fancybox").fancybox();
   });

   $("#backscatter-link").fancybox({
       openEffect: 'elastic',
       closeEffect: 'elastic',

       helpers: {
           title: {
               type: 'inside'
           }
       }
   }); 
```

我需要fancybox内的图像同时刷新。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T12:07:14.113

我发现以下刷新图像而不关闭并重新打开fancybox：

```
 if ($.fancybox.isOpened) {
        $(".fancybox-inner").find("img").attr('src', src + "?time=" + timestamp);
    } 
```

在我看来，这比使用 click 事件处理程序更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T19:26:49.727

**首先**，你的fancybox初始化应该在`$(document).ready()`like里面

```
$(document).ready(function () {
   $(".fancybox").fancybox();

   $("#backscatter-link").fancybox({
       openEffect: 'elastic',
       closeEffect: 'elastic',
       helpers: {
           title: {
               type: 'inside'
           }
       }
   }); // fancybox
}); // ready 
```

（通过这种方式，您将 fancybox 绑定到带有`id="backscatter-link"`AND 的元素到所有带有 的元素`class="fancybox"`）

**其次**，如果你用fancybox v2.x重新加载网页上的图像（并改变它的`href`属性）你不必做任何事情，因为它总是会打开相应的图像（v2.x使用该`.live()`方法）

**第三**，如果fancybox已经打开并且网页中的图片被刷新（它的`href`属性也发生了变化）并且你想让fancybox相应地刷新它的内容，那么你需要在你的`reloadBackscatterImage()`函数中添加一个监听器来评估fancybox的状态并触发a`click`到`#backscatter-link`选择器，它将使用`href`此类选择器的当前打开fancybox ...像这样：

```
 if($.fancybox.isOpened){
  $("#backscatter-link").trigger("click");
 } 
```

为了让这个解释更清楚，我创建了一个[DEMO HERE](http://www.picssel.com/playground/jquery/refreshFancyboxContent_20jul12.html)，它每 10 秒刷新一次网页中的图像（我还添加了一个 fancybox 状态指示器。）当您单击它时，Fancybox 将始终打开页面上的当前图像并刷新其内容因此。

**注意**：这是为 fancybox v2.0.6+

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-14T21:59:03.890

我试图解决同样的问题——将图像从网络摄像头转发到 Fancybox。

我解决了使用两个 Fancybox href 到同一个图像 - 同一个组（rel = “something”），将自动播放设置为 true 并将幻灯片超时设置为所需的刷新间隔。完美运行。

它会开始播放 2 个（虚拟）图像的幻灯片，它一次又一次地指向同一个网络摄像头源图像。

# ruby - Ruby 正则表达式 - 提取单词

> ID：11577585
> 
> 赞同：0
> 
> 时间：2012-07-20T10:32:06.357
> 
> 标签：ruby, regex

我想从 SQL 查询中提取表名。

```
SELECT col1, col2, count(1) as count_all,     FROM     tbl1, tbl2 where condition order by column 
```

我要结果`["tbl1", "tbl2"]`

不必查询多个表。在这种情况下，查询将是

```
SELECT col1, col2, count(1) as count_all,     FROM     tbl1  where condition order by column 
```

和预期的结果`["tbl1"]`

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:09:56.270

请注意，这可能会匹配 SQL 字符串中的内容，因此并不完美。

```
test = [
"SELECT col1, col2, count(1) as count_all FROM tbl1, tbl2 where condition order by column",
"SELECT col1, col2, count(1) as count_all FROM tbl1 where condition order by column",
"SELECT col1, col2, count(1) as count_all FROM tbl1",
]
tests.map { |str| str.match(/\s*from\s*([a-z_0-9]+(?:,\s*[a-z_0-9]+)*)\b/i); $1 }
#=> ["tbl1, tbl2", "tbl1", "tbl1"] 
```

# html - 无法使用 jsp 编写指向 Get 方法的链接

> ID：11577594
> 
> 赞同：0
> 
> 时间：2012-07-20T10:33:01.417
> 
> 标签：html, jsp, servlets

我在我的jsp页面中写了下一个链接：

```
<a href="Controller?pageName=OptionCategory&pageCommand=Map"  data-role="button">Map</a> 
```

我想将参数发送到我的控制器（控制器是 servlet）。

但问题是在浏览器中它显示的是：

```
"http://localhost:8080/Attraxions4/Controller#/Attraxions4/Controller?pageName=OptionCategory&pageCommand=Map" 
```

代替：

```
"http://localhost:8080/Attraxions4/Controller?pageName=OptionCategory&pageCommand=Map" 
```

这个标志号是什么#？为什么它再次复制根文件夹？

我能做些什么来解决它？

谢谢你！！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:39:06.670

> 这个标志号是什么#？

它是一个片段标识符。它指示要发送到服务器的 URL 部分的结尾，并指示要滚动到的元素的 id。

它经常被滥用来存储用于 Ajax 请求的数据。

> 我能做些什么来解决它？

找到您拥有的劫持链接正常功能的 JavaScript 并将其删除。

# c# - 离开屏幕 - 光标离开表格区域

> ID：11577595
> 
> 赞同：0
> 
> 时间：2012-07-20T10:33:03.843
> 
> 标签：c#, winforms, winforms-interop

关注这个[帖子](https://stackoverflow.com/questions/11567016/winform-off-screen-preventing)

我想到了一个“简单”的解决方案。我的目标是在我的 winForm 达到允许的坐标时防止鼠标移动。例如，如果 offScreen 用于 maxX（右边框），用户将可以在除从左到右之外的所有方向移动鼠标。

是否有一些事件（也是本地的）来实现这一点？

# xslt - XSLT disable-output-escaping="yes" 没有换行符

> ID：11577596
> 
> 赞同：0
> 
> 时间：2012-07-20T10:33:12.737
> 
> 标签：xslt, xslt-1.0

我需要制作将生成 json 的 XSLT。

问题是我的 xml 中有`&lt;`和`&gt;`符号，需要在输出中用 <> 替换。但是 disable-output-escaping="yes" 使换行符，我可以删除这个换行符吗？

XML:

```
<item id="166" group="0">
<name>Some Titile</name>
<text>&lt;p&gt;A dizzying array of deep, robust color, the Hugs and Kisses bouquet contains one dozen tulips and one dozen iris, fresh from the fields. It's an always-impressive bouquet perfect for a &quot;dinner for two,&quot; a special someone's birthday, or anytime you want to make someone's heart race.&lt;/p&gt;</text>
</item> 
```

我需要的输出

```
{
    "name": "Some Title",
    "text": "<p>A dizzying array of deep, robust color, the Hugs and Kisses bouquet contains one dozen tulips and one dozen iris, fresh from the fields. It's an always-impressive bouquet perfect for a &quot;dinner for two,&quot; a special someone's birthday, or anytime you want to make someone's heart race.</p>;"
} 
```

XSLT

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="text" encoding="UTF-8"/>

  <xsl:template match="item">
    {
    "name": "<xsl:value-of select="name" />",
    "text": "<xsl:value-of select="text" />"
    }
  </xsl:template>
</xsl:stylesheet> 
```

输出

```
{
    "name": "Some Title",
    "text": "&lt;p&gt;A dizzying array of deep, robust color, the Hugs and Kisses bouquet contains one dozen tulips and one dozen iris, fresh from the fields. It's an always-impressive bouquet perfect for a &quot;dinner for two,&quot; a special someone's birthday, or anytime you want to make someone's heart race&lt;./p&gt;;"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:01:48.007

好吧，如果您想分别生成 Javascript 代码和 JSON 代码，那么只需使用`<xsl:output method="text"/>`，这样转换结果中的任何字符都不会被转义，当然也就不需要使用 disable-output-escaping。

另一方面，我不明白为什么 disable-output-escaping 应该产生换行符，所以如果您仍然有问题，请考虑向我们展示 XML 输入、XSLT 代码、您想要的结果以及您得到的结果等详细信息，以及您使用的 XSLT 处理器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:03:57.097

如果是生成JSON，不要使用disable-output-escaping，使用文本输出方式：

```
<xsl:output method="text"/> 
```

使用文本输出方法，没有转义，因此无需禁用它。

我不知道这是否解决了换行符的问题，因为我不知道是什么导致了这个问题。

# php - 处理 rss 提要中的多种语言

> ID：11577597
> 
> 赞同：0
> 
> 时间：2012-07-20T10:33:18.103
> 
> 标签：php, utf-8, rss, lang

我在处理不同的语言和由 phil 外科医生提供的安静服务时遇到问题。

我正在向设置为 utf-8unicode 的数据库中添加不同的语言，但是当我将其拉出时，它对于某些语言的外观是随机的。

像僧伽罗语¹ç§°æžªå‡»æ¡ˆå«ŒçŠ¯å¯èƒ½ç»è¿‡è®ç»ƒè£...å¤</p>

取自 gossip lanka，他们的提要是 [http://www.gossiplankanews.com/feeds/posts/default?alt=rss](http://www.gossiplankanews.com/feeds/posts/default?alt=rss)

这是他们的饲料吗？因为我无法将项目保存到我的数据库中，然后将其作为僧伽罗语返回

问题可能出在哪里的任何建议？

![在此处输入图像描述](../Images/aaa2c3bc3e1a58afa8c347ef6ff0578d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:41:26.130

您的数据实际上是 UTF-8，而您的 MySQL 连接（我猜您有 MySQL）未配置为输出 UTF8。

在 PHP 中，一旦您建立了连接，您必须将连接选项转换为以 UTF8 格式导入/导出。

像这样 ：

```
mysql_query("SET NAMES 'utf8'"); 
```

或使用 PDO ：

```
$pdo = new PDO(
    'mysql:host=hostname;dbname=defaultDbName',
    'username',
    'password',
    array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES utf8")
); 
```

# java - ActionListener 是java中的线程吗？

> ID：11577599
> 
> 赞同：3
> 
> 时间：2012-07-20T10:33:42.760
> 
> 标签：java, multithreading, swing, actionlistener

动作监听器是线程吗，如果是，这个线程对我自己定义的线程有什么影响？

特别是在 Swing/AWT 中，当您定义自己的线程时，或者当您使用线程制作动画时，actionlistener 会影响吗？为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T10:38:01.490

不，动作监听器是一个接口。您可以通过定义其`actionPerformed()`方法的作用来实现该接口（假设您引用[此 ActionListener](http://docs.oracle.com/javase/7/docs/api/java/awt/event/ActionListener.html)）。该方法将在调用它的线程中运行。

因此，如果您从其中一个线程调用它，它将在该线程中运行。如果`actionPerformed`与 UI 组件交互，那么这样做可能是个坏主意。

您可以在 Swing和[Concurrency & Swing](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)中阅读有关[ActionListener 的](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)更多信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T10:51:23.530

*   看看[摇摆动作](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)

*   `Swing Action`与[AWT 侦听器相比，可扩展性最强](http://docs.oracle.com/javase/tutorial/uiswing/events/index.html)

*   输出`Swing Action`应该是[ActionListener](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)

*   的输出`Swing Action`应始终在完成[EDT](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)

编辑

> Mohamed Magdy Hassan 特别在 Swing/AWT 中写道，当您定义自己的线程时，或者当您使用线程制作动画时，actionlistener 会影响它吗？为什么？

*   不要将线程（`Thread`或`Runnable#Thread`）用于动画`Swing JComponents`，这可能是正确的，也可能`AWT`部分是正确的`SWT`，

*   内部例子请忘记，大部分已经过时，仅供Swing [Timer](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)`Swing JComponents`使用

# map - Clojure 嵌套地图 - 更改值

> ID：11577601
> 
> 赞同：17
> 
> 时间：2012-07-20T10:33:59.733
> 
> 标签：map, clojure, key

不得不说我大约两周前开始学习 Clojure，现在我整整三天就被一个问题困住了。

我有一张这样的地图：

```
{
  :agent1 {:name "Doe" :firstname "John" :state "a" :time "VZ" :team "X"}
  :agent2 {:name "Don" :firstname "Silver" :state "a" :time "VZ" :team "X"}
  :agent3 {:name "Kim" :firstname "Test" :state "B" :time "ZZ" :team "G"}
} 
```

并且需要更改`:team "X"`为`:team "H"`. 我尝试了很多东西，比如`assoc`，`update-in`等等，但没有任何效果。

我该怎么做我的东西？非常感谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-20T11:25:45.917

assoc-in 用于在 path 指定的映射中替换或插入值

```
(def m { :agent1 {:name "Doe" :firstname "John" :state "a" :time "VZ" :team "X"}
         :agent2 {:name "Don" :firstname "Silver" :state "a" :time "VZ" :team "X"}
         :agent3 {:name "Kim" :firstname "Test" :state "B" :time "ZZ" :team "G"}})

(assoc-in m [:agent1 :team] "H")

{:agent1 {:state "a", :team "H", :name "Doe", :firstname "John", :time "VZ"},
 :agent2 {:state "a", :team "X", :name "Don", :firstname "Silver", :time "VZ"},
 :agent3 {:state "B", :team "G", :name "Kim", :firstname "Test", :time "ZZ"}} 
```

但是，如果您想更新所有团队“X”，无论具体路径如何，在树的所有递归级别上，您都可以使用 clojure.walk 的 prewalk 或 postwalk 函数与您自己的函数相结合：

```
(use 'clojure.walk)
(defn postwalk-mapentry
    [smap nmap form]
    (postwalk (fn [x] (if (= smap x) nmap x)) form))

(postwalk-mapentry [:team "X"] [:team "T"] m)

{:agent1 {:state "a", :team "T", :name "Doe", :firstname "John", :time "VZ"},
 :agent2 {:state "a", :team "T", :name "Don", :firstname "Silver", :time "VZ"},
 :agent3 {:state "B", :team "G", :name "Kim", :firstname "Test", :time "ZZ"}} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-20T11:57:22.190

步行功能很适合这样的替换。

`(clojure.walk/prewalk-replace {[:team "X"] [:team "H"]} map)`

传入向量可以确保您不只是替换所有的“X”。

# android - 键盘将底部选项卡按钮向上移动，并在 android 中隐藏 EditText 和 CheckBox

> ID：11577610
> 
> 赞同：2
> 
> 时间：2012-07-20T10:34:45.853
> 
> 标签：android, android-keypad

在布局中，我有 2 `EditText`、 one`Button`和 a `CheckBox`。我的整个布局都在里面`ScrollView`，因此在显示键盘时它会向上移动。

现在的问题是，当显示键盘时，它也会向上移动底部标签按钮。用户可以滚动查看`EditText`和`CheckBox`。但我不希望底部标签向上移动。所以我改用这个

```
android:windowSoftInputMode="adjustPan" 
```

使用它可以停止底部选项卡的移动，但它也可以停止滚动具有编辑文本、按钮和复选框的布局。

我怎样才能让键盘不随它移动底部选项卡，并且当显示键盘时，我的布局具有edittext和复选框被向上移动，以便用户可以看到布局。

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-20T10:37:40.337

解决转移问题的最好方法是：不要在 android manifest 中定义这个“android:windowSoftInputMode”参数。没有它它工作正常。

以下是我在清单中主要声明我的活动的方式：

```
 <activity android:name="com.lisnx.ui.TabView"
        android:configChanges="orientation|keyboardHidden"
        android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen" /> 
```

# linq - IList vs IEnumerable：当他们“执行”LINQ查询时？

> ID：11577611
> 
> 赞同：2
> 
> 时间：2012-07-20T10:34:45.873
> 
> 标签：linq

我知道当我调用一些方法时，它开始执行链接到该集合实例的整个 LINQ 查询。

例如，每次我调用`.Count()`. 而且我认为每次我打电话给`.ToList()`.

获得 ToList() 后，我对该集合进行“复制”，如果我不对集合的新实例编写任何 LINQ 查询，Count() 将不会执行任何操作。（正确的？）

如果我打电话给`.Union()`2 名单呢？并在 2 Ienumerable 上？和`.Except()`它是一样的吗？

尝试了一些跟踪/诊断，但我无法真正理解何时执行 LINQ 查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T10:43:14.367

Union 和 except 被延迟执行。阅读文档中的备注部分以获取更多信息。

[http://msdn.microsoft.com/en-us/library/bb341731](http://msdn.microsoft.com/en-us/library/bb341731)

[http://msdn.microsoft.com/en-us/library/bb300779](http://msdn.microsoft.com/en-us/library/bb300779)

此外，在这种情况下，当您确定幕后发生的事情时，您可以使用 Reflector 或任何其他 .NET 反编译器。这真的很有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T11:01:40.203

对您的问题的回答取决于两个选项：

*   **操作类型**：懒惰（或延迟）和贪婪。延迟操作不会立即执行，而是延迟到代码开始从您的 linq 源实现数据。贪婪操作总是立即执行。
    *   惰性操作示例：`.Union`, `.Except`, `.Where`, . `Select`和大多数其他 linq 操作
    *   贪心的是：`.ToList`，`.Count` `.ToArray`以及所有实现数据的操作
*   **linq 操作**的数据源。**当您使用 Linq to Memory 时，所有操作（懒惰和贪婪）都将立即执行。通常 Linq*到外部数据源*只会在物化期间执行惰性操作。**

 **使用这两个规则，您可以预测 linq 的行为方式：

1.  `.Count`并将`.ToList`立即执行并实现数据
2.  之后`.ToList`，您将在内存中收集，并且将立即执行所有后续操作（`.Count`将再次执行）
3.  `.Union`懒惰或贪婪的行为方式`.Except`取决于数据源的类型。对于内存，他们将是贪婪的，对于 SQL 是懒惰的。

[LinqPad](http://www.linqpad.net/)的示例。在使用贪婪或实现之前和之后，我有一个`Enumerable`懒惰或延迟`.Where`和操作：`.Select``.Count``.ToList`

```
void Main() 
{ 
    "get enumerable".Dump(); 
    var samplesEnumerable = GetSamples(); 

    "get count on enumerable #1".Dump(); 
    samplesEnumerable.Count().Dump(); 

    "get enumerable to list #1".Dump();  
    var list = samplesEnumerable.ToList();   

    "get count on list #1".Dump();   
    list.Count().Dump(); 

    "get count on list again #2".Dump(); 
    list.Count().Dump(); 

    "get where/select enumerable #1".Dump(); 
    samplesEnumerable 
        .Where(sample => { sample.Dump(); return sample.Contains("5"); }) 
        .Select(sample => { sample.Dump(); return sample; })
        .Dump(); 

    "get where/select list #1".Dump(); 
    list 
        .Where(sample => { sample.Dump(); return sample.Contains("5"); }) 
        .Select(sample => { sample.Dump(); return sample; })
        .Dump(); 
} 

string[] samples = new [] { "data1", "data2", "data3", "data4", "data5" }; 

IEnumerable<string> GetSamples() 
{ 
    foreach(var sample in samples)  
    { 
        sample.Dump(); 
        yield return sample; 
    } 
} 
```

样本输出。关键点

1.  在未具体化的数据上，每一次都在一次`.Count`又一次`.List`地检索数据

    *   `get count on enumerable #1`
    *   `get where/select enumerable #1`
2.  物化数据后，将不再检索可枚举

    *   `get enumerable to list #1`
    *   `get count on list #1`
    *   `get count on list again #2`
    *   `get where/select list #1`

输出：

```
get enumerable
get count on enumerable #1
data1
data2
data3
data4
data5

5
get enumerable to list #1
data1
data2
data3
data4
data5
get count on list #1

5
get count on list again #2

5
get where/select enumerable #1
data1
data1
data2
data2
data3
data3
data4
data4
data5
data5
data5

data5 

get where/select list #1
data1
data2
data3
data4
data5
data5

data5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T10:44:32.507

当 Linq 查询**具有**基础集合但它**不是**集合时，将执行该查询。例如，您可以使用`ToList()`或来实现查询`ToArray`。

每个延迟执行`Enumerable`的扩展首先尝试将`IEnumerable<T>`转换为`IList<T>`（如果需要索引器，则为`ICollection<T>`fe）或（如果需要，则为 fe `Count`）。如果可以，它将使用不需要执行查询的“本机”方法，否则将枚举序列。

在[MSDN](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.range.aspx)上搜索*deferred*项，查看方法是执行 xd deferred 还是立即执行。如果您检查源代码（fe via ），您可以通过查找.`ILSpy`[`yield keyword`](http://msdn.microsoft.com/en-us/library/9k7k7cf0.aspx)

`Union`并`Except`使用延迟执行来实现。所以 如果你想保持这个结果，你需要一个`ToList`/ 。`ToArray`

这是一个示例，实现`Enumerable.Count`：

```
ICollection<TSource> collection = source as ICollection<TSource>;
if (collection != null)
{
    return collection.Count;
}
ICollection collection2 = source as ICollection;
if (collection2 != null)
{
    return collection2.Count;
}
int num = 0;
using (IEnumerator<TSource> enumerator = source.GetEnumerator())
{
    while (enumerator.MoveNext())
    {
        num++;
    }
}
return num; 
```**

# c# - 将未经授权的用户重定向到自定义页面错误

> ID：11577614
> 
> 赞同：1
> 
> 时间：2012-07-20T10:34:53.577
> 
> 标签：c#, asp.net

当他们访问管理员页面时，我试图将未经授权的用户重定向到自定义页面，但我收到错误..

管理员文件夹的 Web.Config

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <authorization>
      <allow roles="Administrators" />
      <deny users="*"/>
    </authorization>
  </system.web>
</configuration> 
```

登录页面代码：

```
protected void Page_Load(object sender, EventArgs e)
        {
            if (!Page.IsPostBack)
            {
                if (Request.IsAuthenticated && !string.IsNullOrEmpty(Request.QueryString["ReturnUrl"]))
                    Response.Redirect("~/ErrorUNTH.aspx");
            }
} 
```

错误以普通用户身份登录并访问管理员页面后：

```
Server Error in '/' Application.
Runtime Error
Description: An application error occurred on the server. The current custom error settings for this application prevent the details of the application error from being viewed remotely (for security reasons). It could, however, be viewed by browsers running on the local server machine.

Details: To enable the details of this specific error message to be viewable on remote machines, please create a <customErrors> tag within a "web.config" configuration file located in the root directory of the current web application. This <customErrors> tag should then have its "mode" attribute set to "Off".

<!-- Web.Config Configuration File -->

<configuration>
    <system.web>
        <customErrors mode="Off"/>
    </system.web>
</configuration>

Notes: The current error page you are seeing can be replaced by a custom error page by modifying the "defaultRedirect" attribute of the application's <customErrors> configuration tag to point to a custom error page URL.

<!-- Web.Config Configuration File -->

<configuration>
    <system.web>
        <customErrors mode="RemoteOnly" defaultRedirect="mycustompage.htm"/>
    </system.web>
</configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T10:38:00.930

删除 `<deny users="*"/>`和添加`<deny users="?"/>`

1.  `?`- 匿名用户
2.  `*`- 所有用户

并从事件*中删除*代码。`Page_Load`

如果用户未登录，则将自动重定向到*login.aspx*。看看`<authentication>`root 的部分`web.config`。

```
<authentication mode="Forms">
        <forms loginUrl ="mylogin.aspx"/> <!-- You can change the url -->
</authentication> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T10:48:12.540

您可以通过在 Global.asax.cs 的 Application_EndRequest 事件中添加以下代码来操作“401 Access Denied”响应的内容（如果是这种情况）：

```
protected void Application_EndRequest(Object sender, 
                                             EventArgs e)
  { 
     HttpContext context = HttpContext.Current;
     if (context.Response.Status.Substring(0,3).Equals("401"))
     {
        context.Response.ClearContent();
        context.Response.Write("<script language="javascript">" + 
                     "self.location='../login.aspx';</script>");
     } 
  } 
```

当浏览器识别 401 并且没有凭据时，将发生客户端重定向。浏览器将显示自定义 401 页面。

# macos - 如何在可可中获取正确的 IPv6 地址

> ID：11577616
> 
> 赞同：1
> 
> 时间：2012-07-20T10:34:58.057
> 
> 标签：macos, cocoa, ip-address, ipv6

我有以下代码片段，它返回正确的 IPV4 地址。

```
NSArray *addresses = [[NSHost currentHost] addresses];
NSString *stringAddress;

for (NSString *anAddress in addresses) {
    if (![anAddress hasPrefix:@"127"] && [[anAddress componentsSeparatedByString:@"."] count] == 4) {
        stringAddress = anAddress;
        NSLog(@"stringAddress is %@",stringAddress);
        break;
    } else {
   //     Do Something
    }
} 
```

运行此应用程序后，这些是 NSHost 地址显示的 IP 地址。

```
2012-10-01 17:30:45.722 GetIPV6Address[1928:403] addresses is (
    "fe80::426c:8fff:fe07:f4e4%en0",
    "fdc7:2c68:e800::426c:8fff:fe07:f5e5",
    "fdc7:2c68:e800::fd62:f01c:155d:3228",                                                                                                  
    "fe80::7ec3:a1ff:fea5:c32d%en1",
    "198.168.10.144",) 
```

在我的系统偏好设置中，我可以看到我的 IPV4 地址是 198.168.10.144，而 IPV6 地址是 fdc7:2c68:e800::426c:8fff:fe07:f5e5。

此列表并不总是相同的顺序，因此我无法动态获取正确的 IP 地址。从列表中我怎么能发现 fdc7:2c68:e800::426c:8fff:fe07:f5e5 是我的 IPV6 地址。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T14:03:44.953

您显然有 2 个接口，`en0`并且`en1`.

两者都有一个`fe80:`地址（本地链接），并且都有一个地址`fdc7:2c68:e800::...`，不管它是什么。（本地站点？）

它们都应该是可访问和可用的。

# c# - 如何在wpf中动态删除文本块

> ID：11577618
> 
> 赞同：2
> 
> 时间：2012-07-20T10:34:58.147
> 
> 标签：c#, wpf, textblock

```
public partial class Window2 : Window
{
    int margin = 200;
    public Window2()
    {
        this.InitializeComponent();

        for (int i = 1; i <= 5; i++)
        {
            TextBlock DynamicLine = new TextBlock();
            DynamicLine.Name = "lbl_DynamicLine" + i;
            DynamicLine.Width = 600;
            DynamicLine.Height = 20;
            DynamicLine.Text =i+"Dynamic TextBlock";
            DynamicLine.Margin = new Thickness(50, margin, 0, 0);
            margin = margin + 20;

            LayoutRoot.Children.Add(DynamicLine);

        }
    }
} 
```

我试图动态删除文本块，如下所示。

```
LayoutRoot.Children.Remove(DynamicLine); 
```

但我只能使用上面的代码行删除最后创建的文本块。现在我想动态删除所有文本块。我该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:42:55.307

试试这个代码

```
public partial class Window2 : Window
{
    int margin = 200;
    TextBlock DynamicLine;
    public Window2()
    {
        this.InitializeComponent();

        for (int i = 1; i <= 5; i++)
        {
            DynamicLine = new TextBlock();
            DynamicLine.Name = "lbl_DynamicLine" + i;
            RegisterName(DynamicLine.Name, DynamicLine);
            DynamicLine.Width = 600;
            DynamicLine.Height = 20;
            DynamicLine.Text =i+"Dynamic TextBlock";
            DynamicLine.Margin = new Thickness(50, margin, 0, 0);
            margin = margin + 20;

            LayoutRoot.Children.Add(DynamicLine);             

        }

        for (int i = 1; i <= 5; i++)
        {
            DynamicLine = (TextBlock)this.FindName("lbl_DynamicLine" + i);
            LayoutRoot.Children.Remove(DynamicLine);
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T10:46:57.250

要删除所有子项，您应该调用 clear 方法。

```
LayoutRoot.Children.Clear(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T10:45:43.387

```
for (int i = LayoutRoot.Children.Count; i > 0; i--)
{
    LayoutRoot.Children.RemoveAt(i-1);
} 
```

# python - 在python中减去匹配的行

> ID：11577619
> 
> 赞同：1
> 
> 时间：2012-07-20T10:35:01.053
> 
> 标签：python

我得到了两个文件，每个文件都包含一个带有“时间”的列和一个带有“id”的列，如下所示：

文件 1：

```
time     id
11.24    1
11.26    2
11.27    3
11.29    5
11.30    6 
```

文件 2：

```
time     id
11.25    1
11.26    3
11.27    4
11.31    6
11.32    7
11.33    8 
```

我正在尝试做一个 python 脚本，它可以减去具有匹配 id 的行的时间。文件的长度不同。

我尝试使用`set(id's of file 1) & set(id's of file 2)`来获取匹配的 id，但现在我被卡住了。任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T12:03:04.230

列表推导可以很容易地做到这一点：

```
#read these from file if you want to, included in this form for brevity
F1 = {1: 11.24, 2: 11.26, 3:11.27, 5:11.29, 6:11.30}
F2 = {1:11.25, 3:11.26, 4:11.27, 6:11.31, 7:11.32, 8:11.33}

K1 = set(F1.keys())
K2 = set(F2.keys())

result = dict([ (k, F1[k] - F2[k]) for k in (K1 & K2)])
print result 
```

这将输出：

```
{1: -0.009999999999999787, 3: 0.009999999999999787, 6: -0.009999999999999787} 
```

编辑：正如 mhawke 指出的，最后一行可以是：

```
result = {k: F1[k] - F2[k]) for k in (K1 & K2)} 
```

我已经忘记了所有关于 dict 的理解。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T10:42:16.657

Python Set 不支持对元素进行排序。我会将数据存储为字典

```
file1 = {1:'11:24', 2:'11:26', ... etc}
file2 = {1:'11:25', 3:'11:26', ... etc} 
```

在键的交集（或根据您的需要的联合）上循环以进行减法（基于时间或基于数学）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T10:55:14.363

This is a bit old school. Look at using a default dict from the `collections` module for a more elegant approach.

This will work for any number of files, I've named mine `f1`, `f2` etc. The general idea is to process each file and build up a list of time values for each id. After file processing, iterate over the dictionary subtracting each value as you go (via `reduce` on the values list).

```
from operator import sub

d = {}
for fname in ('f1','f2'):
    for l in open(fname):
        t, i = l.split()
        d[i] = d.get(i, []) + [float(t)]

results = {}
for k,v in d.items():
    results[k] = reduce(sub, v)

print results
{'1': -0.009999999999999787, '3': 0.009999999999999787, '2': 11.26, '5': 11.29, '4': 11.27, '7': 11.32, '6': -0.009999999999999787, '8': 11.33} 
```

**Updated**

If you want to include only those ids with more than one value:

```
results = {}
for k,v in d.items():
    if len(v) > 1:
        results[k] = reduce(sub, v) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T10:57:04.877

You can use this as a base (instead of treating '11.24' as a float, I guess you want to adapt for hours/minutes or minutes/seconds)... you can effectively union and subtract matching keys using a `defaultdict`.

As long as you can get your data into a format like this:

```
f1 = [
    [11.24, 1],
    [11.26, 2],
    [11.27, 3],
    [11.29, 5],
    [11.30, 6]
]

f2 = [
    [11.25, 1],
    [11.26, 3],
    [11.27, 4],
    [11.31, 6],
    [11.32, 7],
    [11.33, 8]
] 
```

Then:

```
from collections import defaultdict
from itertools import chain

dd = defaultdict(float)
for k, v in chain(
    ((b, a) for a, b in f1),
    ((b, -a) for a, b in f2)): # negate a

    dd[k] += v 
```

Results in:

```
{1: -0.009999999999999787,
 2: 11.26,
 3: 0.009999999999999787,
 4: -11.27,
 5: 11.29,
 6: -0.009999999999999787,
 7: -11.32,
 8: -11.33} 
```

**For matches only**

```
matches = dict( (k, v) for v, k in f1 )
d2 = dict( (k, v) for v, k in f2 )

for k, v in matches.items():
    try:
        matches[k] = v - d2[k]
    except KeyError as e:
        del matches[k]

print matches
# {1: -0.009999999999999787, 3: 0.009999999999999787, 6: -0.009999999999999787} 
```

# javascript - 将 .NET 变量值传递给 Java Script 变量

> ID：11577622
> 
> 赞同：0
> 
> 时间：2012-07-20T10:35:09.487
> 
> 标签：javascript, .net

我有一个 HTML 页面，然后由后端的一些 .NET 代码获取并显示为输出页面。

在 HTML 页面中，我可以显示一些变量的值，例如

```
<PrintingField:PrintingQuantity>

<PrintingField:ClientPrintingNotes> 
```

我想将其中一个变量的值捕获到同一 HTML 页面中的 java 脚本变量中。例如：

```
Var T1 = <PrintingField:ClientPrintingNotes> 
```

这样我就可以使用一些 java 脚本函数来验证 T1。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:39:21.553

您可以在 aspx 页面和 jquery 上使用文字控件来检索值。

在 aspx 上你有这个标记：

```
<div id="TheDivID"><asp:Literal runat="server" ID="SomeValue" /></div> 
```

然后在 C# 代码后面的代码中编写：

```
SomeValue.Text = MyVar.ToString(); 
```

然后在javascript中你有：

```
var TheValueFromServer = $('#TheID').text(); 
```

希望这有帮助，祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T10:40:01.203

我不确定您的意思是什么`PrintingField`，但我认为这是您拥有的自定义类。如果您只是访问该类的属性，则可以使用以下方法完成此操作：

```
var T1 = '<%= PrintingField.ClientPrintingNotes %>'; 
```

如果它是实例类，`PrintingField`则必须是变量的名称。请记住，这不是双向识别。当页面构建并推送到客户端时会发生这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T10:42:42.480

要访问在 HTML 部分的代码隐藏中定义的属性，您需要将属性或变量定义为公共的，然后按如下方式使用它们：

```
<%= this.MyVariable %> 
```

希望这会有所帮助，问候

# hibernate - 关于hibernate的几个问题

> ID：11577625
> 
> 赞同：0
> 
> 时间：2012-07-20T10:35:23.163
> 
> 标签：hibernate

我有几个关于休眠的问题

1.  我问了基本问题：持久身份可以在数据库中有相应的行。那么，`Persist`对象在hibernate中有哪些优势呢？

2.  如何使用休眠和 Oracle 从表中获取最后一行？

3.  在我的应用程序中保存个人信息，即员工姓名、出生日期、入职日期等。我们将员工姓名的名字、姓氏、姓氏存储在数据库中。例如：

    ```
    Firstname Lastname 
    =======    ======  
    Rinkan     John 
    ```

    如何`Rinkan John`从休眠对象中检索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:44:31.913

Hibernate 用于将对象存储在数据库中，这意味着不是使用标准的 sql 查询检索数据，然后构造您不需要的对象；根本不需要担心这一点，而是您只需访问您的持久数据存储，就好像它一样是所有对象的容器，通常通过它们的 id 访问。

对我来说，使用 hibernate 的好处是我不必处理非基于对象的代码，因为 hibernate 为我完成了这一切。

获取最后一行在某种程度上是一种非对象的做事方式。您可以访问由您的数据库表/表表示的最后一个对象。

至于您的员工，对我来说，您将拥有一个 Employee 实体，当您的应用程序部署时，该实体将创建一个适当结构的表来保存一个 Employee 对象。你真的不需要太担心它实际上是如何构建表的，因为你只会处理 Employee 对象而不是 sql 本身。

# c# - 代码优先实体模型.. 没有主键的连接表

> ID：11577636
> 
> 赞同：-3
> 
> 时间：2012-07-20T10:35:48.350
> 
> 标签：c#, ef-code-first, composite-key

我使用带有 Web API Asp.Net 的 Code First 实体模型
我总共需要 3 个表
第一个表`(Table1)`包含一些具有唯一 ID 的信息让我们说它就像

```
string id 
string model 
```

第二个表`(Table2)`包含有关用户的一些信息。可以说是

```
string Id
string name
string company 
```

现在我需要第三张桌子。它只能用作连接表，并且包含

```
Table1 ModelInfo
Table2 UserInfo 
```

但它向我显示了一个错误，即无法在没有`unique id`. 但由于我的架构是我不需要`unique id`
我该怎么办？还是我需要改变我的架构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T22:10:22.840

您的问题是一般的 EF CodeFirst 多对多关系。建议阅读：

*   [EF CodeFirst - 建立多对多关系](http://blogs.msdn.com/b/wriju/archive/2011/05/14/code-first-ef-4-1-building-many-to-many-relationship.aspx)
*   [复合键 - StackOverflow 上的问题](https://stackoverflow.com/questions/5466374/composite-key-with-ef-4-1-code-first)
*   [如何在 EF CodeFirst 中进行多对多关联](https://stackoverflow.com/questions/4251794/how-to-have-many-to-many-association-in-entity-framework-code-first)

# android - 如何专注于 EditText

> ID：11577638
> 
> 赞同：3
> 
> 时间：2012-07-20T10:35:56.890
> 
> 标签：android, android-edittext

我有两个 EditText 框 editText1 和 editText2 ，我正在尝试使用软键盘向这些编辑框提供输入。在将值输入到 editText1 并从 devise backpress 按钮按下（即关闭软键盘）后，焦点自动变为 editText2 并且光标在 editText2 上闪烁。我不希望这种情况发生，我希望重点放在 editText1 上。知道该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:37:09.450

这就是你可以做到的。

```
edit.requestFocus(); 
```

其中 edit 将是您要设置焦点的编辑文本。

# css - IE8 中的链式伪选择器

> ID：11577639
> 
> 赞同：1
> 
> 时间：2012-07-20T10:36:01.630
> 
> 标签：css, internet-explorer-8, css-selectors, selectivizr

链式伪选择器似乎在 Windows XP 上的 IE8 中不起作用。有这方面的文件吗？

我正在使用 Selectivizr 开发一个网站以使用 CSS3 选择器，但是这样的样式在 IE8 中不起作用，而在其他任何地方都可以使用（不足为奇）：

```
span:last-child:after {content: "foobar";} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T18:48:25.243

这不是错误，这是因为选择器本身不匹配。

> 简单选择器是类型选择器或通用选择器，后跟零个或多个属性选择器、ID 选择器或伪类，顺序不限。如果所有组件都匹配，则简单选择器匹配。

在这种情况下，简单的选择器是或者`span:first-child`，它在 IE8 中本机匹配，或者`span:last-child`，它不匹配。

> 一个伪元素可以附加到链中的最后一个简单选择器，在这种情况下，样式信息适用于每个主题的子部分。

追加`:after`到`span:first-child`是匹配项，而追加到`span:last-child`则不是，而且由于 Selectivizr 是一个后处理器，所以来不及挽救这一天。也许预处理器会有更好的运气。

# python - 在鼻子测试中关闭 sqlalchemy 警告

> ID：11577644
> 
> 赞同：8
> 
> 时间：2012-07-20T10:36:42.693
> 
> 标签：python, sqlalchemy, nosetests

我试图在使用nosetests 运行我的测试套件时抑制所有sqlalchemy 警告。我阅读[了在 sqlalchemy 中关闭警告](https://stackoverflow.com/questions/5225780/turn-off-a-warning-in-sqlalchemy)

```
.............................../Users/ca/.pythonbrew/venvs/Python-2.7.3/api/lib/python2.7/site-packages/SQLAlchemy-0.7.5-py2.7-macosx-10.7-x86_64.egg/sqlalchemy/engine/default.py:330: Warning: Field 'random_id' doesn't have a default value
cursor.execute(statement, parameters) 
```

我将它包含在我的包`__init__.py`文件中：

```
def setup_package():
    """Setup the test during the whole session.

    Run by nosetests
    """
    # Suppress all SQLAlchemy warnings
    warnings.filterwarnings("ignore", category=sa_exc.SAWarning) 
```

使用适当的进口。我知道它是由nosetests 运行的，因为我尝试了其他一些引发错误的东西。唯一的问题是它没有任何效果。仍然显示警告。

任何的想法？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-09-22T13:25:28.750

似乎鼻子会覆盖您设置的任何内容：

```
warnings.filterwarnings("ignore") 
```

但是，您可以在鼻子测试期间使用鼻子的命令行选项过滤警告。例如：

```
$ nosetests --logging-filter=SAWarning 
```

我发现这在所有情况下仍然可能不起作用。如果是这种情况，您可以尝试：

```
$ python -W ignore `which nosetests` 
```

# sql - SQL 查询 - UNION 查询中的 SUM 和 AVG

> ID：11577646
> 
> 赞同：1
> 
> 时间：2012-07-20T10:36:48.763
> 
> 标签：sql

给定下表：

```
SITE
----
id   name          reference
----------------------------
1    AAM           783C3502-19B9-EFA7-D6B8874219EF6734
3    AOC           B4E82054-C09F-4338-50C809C7515E755B

SERVICE
-------
id   name               type
-----------------------------------
1    Outbound data      Web Hosting
2    Inbound data       Web Hosting
3    API Data           API Traffic
4    Site Space         Disk Space
5    DB Space           Disk Space

USAGE
-------
site   service   timeperiod     detail
-----------------------------------------------
1      4         477             21997
1      5         477                53
1      4         479              1991
1      5         479                53
3      4         477               448
3      5         477                10
3      4         479               448
....

TIMEPERIOD
----------
id     year   month    day    when
-----------------------------------------
477    2012   7        2      2012-07-02 
479    2012   7        3      2012-07-03 
```

以下查询在两个磁盘空间类别（数据库空间和站点空间）下平均一个月内特定网站的活动：

如果我分别在每个站点 UUID 上运行联合查询，

**UUID：783C3502-19B9-EFA7-D6B8874219EF6734**

```
SELECT `month`,`year`, 
        AVG(`usage`.detail) as dbsize, 0 as sitesize, 
        AVG(`usage`.detail) as totalsize 
    FROM site 
    INNER JOIN `usage` ON site.reference 
         IN ('783C3502-19B9-EFA7-D6B8874219EF6734') 
        AND `usage`.site = site.id 
    INNER JOIN service ON service.name = 'DB Space' 
         AND service.id = `usage`.service 
    INNER JOIN timeperiod 
         ON timeperiod.when > '2012-07-01' 
            AND timeperiod.when < '2012-07-31' 
        AND `usage`.timeperiod = timeperiod.id
    WHERE `usage`.site = site.id 
    GROUP BY `month`,`year` 

    UNION 

    SELECT `month`,`year`, 0 as dbsize, 
         AVG(`usage`.detail) as sitesize, 
         AVG(`usage`.detail) as totalsize 
    FROM site 
    INNER JOIN `usage` 
         ON site.reference IN ('783C3502-19B9-EFA7-D6B8874219EF6734') 
        AND `usage`.site = site.id 
    INNER JOIN service 
         ON service.name = 'Site Space'
        AND service.id = `usage`.service 
    INNER JOIN timeperiod 
         ON timeperiod.when > '2012-07-01' 
            AND timeperiod.when < '2012-07-31' 
        AND `usage`.timeperiod = timeperiod.id 
    WHERE `usage`.site = site.id 
    GROUP BY `month`,`year` 
```

给出以下结果：

```
month   year     dbsize      sitesize   totalsize
-------------------------------------------------
7       2012    53.0000        0.0000     53.0000
7       2012     0.0000     2002.7273   2002.7273 
```

**UUID：B4E82054-C09F-4338-50C809C7515E755B**

```
SELECT `month`,`year`, 
        AVG(`usage`.detail) as dbsize, 0 as sitesize, 
        AVG(`usage`.detail) as totalsize 
    FROM site 
    INNER JOIN `usage` 
        ON site.reference IN ('B4E82054-C09F-4338-50C809C7515E755B') 
        AND `usage`.site = site.id 
    INNER JOIN service 
        ON service.name = 'DB Space' 
            AND service.id = `usage`.service 
    INNER JOIN timeperiod 
        ON timeperiod.when > '2012-07-01' 
            AND timeperiod.when < '2012-07-31' 
        AND `usage`.timeperiod = timeperiod.id
    WHERE `usage`.site = site.id 
     GROUP BY `month`,`year` 

    UNION 

    SELECT `month`,`year`, 0 as dbsize, 
        AVG(`usage`.detail) as sitesize, 
        AVG(`usage`.detail) as totalsize 
    FROM site 
    INNER JOIN `usage` 
        ON site.reference IN ('B4E82054-C09F-4338-50C809C7515E755B') 
        AND `usage`.site = site.id 
    INNER JOIN service ON service.name = 'Site Space'
        AND service.id = `usage`.service 
    INNER JOIN timeperiod 
        ON timeperiod.when > '2012-07-01' 
            AND timeperiod.when < '2012-07-31' 
        AND `usage`.timeperiod = timeperiod.id 
    WHERE `usage`.site = site.id 
    GROUP BY `month`,`year` 
```

给出以下结果：

```
month   year     dbsize      sitesize   totalsize
-------------------------------------------------
7       2012    10.0000        0.0000     10.0000
7       2012     0.0000      448.6364    448.6364 
```

到目前为止一切都很好。

但是，当我按如下方式传递多个站点 UUID 时：

```
 SELECT `month`,`year`, AVG(`usage`.detail) as dbsize, 0 as sitesize, AVG(`usage`.detail) as totalsize 
FROM site 
INNER JOIN `usage` ON site.reference 
        IN ('783C3502-19B9-EFA7-D6B8874219EF6734','B4E82054-C09F-4338-50C809C7515E755B') 
    AND `usage`.site = site.id 
INNER JOIN service 
        ON service.name = 'DB Space' 
        AND service.id = `usage`.service 
INNER JOIN timeperiod 
        ON timeperiod.when > '2012-07-01' 
            AND timeperiod.when < '2012-07-31' 
    AND `usage`.timeperiod = timeperiod.id
WHERE `usage`.site = site.id 
 GROUP BY `month`,`year` 

UNION 

SELECT `month`,`year`, 0 as dbsize, AVG(`usage`.detail) as sitesize, AVG(`usage`.detail) as totalsize 
FROM site 
INNER JOIN `usage` ON site.reference 
        IN ('783C3502-19B9-EFA7-D6B8874219EF6734','B4E82054-C09F-4338-50C809C7515E755B') 
    AND `usage`.site = site.id 
INNER JOIN service 
        ON service.name = 'Site Space'
    AND service.id = `usage`.service 
INNER JOIN timeperiod 
        ON timeperiod.when > '2012-07-01' 
            AND timeperiod.when < '2012-07-31' 
    AND `usage`.timeperiod = timeperiod.id 
WHERE `usage`.site = site.id 
GROUP BY `month`,`year` 
```

它产生以下结果：

```
month   year     dbsize      sitesize   totalsize
-------------------------------------------------
7       2012    31.5000        0.0000     31.5000
7       2012     0.0000     1225.6818   1225.6818 
```

与单独传递 id 相比，多个 UUIID 的结果甚至更少。这是因为处理多个 UUID 的查询正在平均各个 UUID 查询的结果。

我希望多 UUID 查询对各个 UUID 的结果求和。我当然希望这是有道理的。

## 编辑

这是我使用的总和查询类型：

```
SELECT `month`,`year`, SUM(dbsize) as dbsize, SUM(sitesize) as sitesize, SUM(totalsize) as totalsize 
FROM ( 
    SELECT `month`,`year`, AVG(`usage`.detail) as dbsize, 0 as sitesize, AVG(`usage`.detail) as totalsize 
    FROM site 
    INNER JOIN `usage` ON site.reference IN ('783C3502-19B9-EFA7-D6B8874219EF6734','B4E82054-C09F-4338-50C809C7515E755B') 
        AND `usage`.site = site.id 
    INNER JOIN service ON service.name = 'DB Space' AND service.id = `usage`.service 
    INNER JOIN timeperiod ON timeperiod.when > '2012-07-01' AND timeperiod.when < '2012-07-31' 
        AND `usage`.timeperiod = timeperiod.id
    WHERE `usage`.site = site.id 
     GROUP BY `month`,`year` 

    UNION 

    SELECT `month`,`year`, 0 as dbsize, AVG(`usage`.detail) as sitesize, AVG(`usage`.detail) as totalsize 
    FROM site 
    INNER JOIN `usage` ON site.reference IN ('783C3502-19B9-EFA7-D6B8874219EF6734','B4E82054-C09F-4338-50C809C7515E755B') 
        AND `usage`.site = site.id 
    INNER JOIN service ON service.name = 'Site Space'
        AND service.id = `usage`.service 
    INNER JOIN timeperiod ON timeperiod.when > '2012-07-01' AND timeperiod.when < '2012-07-31' 
        AND `usage`.timeperiod = timeperiod.id 
    WHERE `usage`.site = site.id 
    GROUP BY `month`,`year` 
) as x 
GROUP BY `month`,`year` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:11:54.427

如果要按站点引用平均分区，则需要将 Site_reference 添加到 group by 子句。

# ios - 检测物体、touchesmoved 和 UITouch

> ID：11577654
> 
> 赞同：0
> 
> 时间：2012-07-20T10:37:21.967
> 
> 标签：ios, uitouch, touchesmoved

我有一个 UIView 在哪里添加带有 ID 的球。当我用 ID 1 触摸球时，我画一条虚线跟随我的手指。

问题是当我将手指移到其他球上时，我不知道如何检测这些球并检查它们的 ID。我需要发生的是，当我用 ID 2 触摸下一个球时，线完成绘制并从球 1 停留到球 2，并从 2 到手指创建新的，下一个.. 3 等等...

编码：

```
#import "DrawView.h"

@implementation DrawView

- (id)init
{
    self = [super initWithFrame:CGRectMake(0, 0, 1024, 768)];
    if (self) {
        self.backgroundColor = [UIColor clearColor];
        self.opaque = YES;

        checkPointCircle = [[CheckPointCircle alloc] initWithPosX:315 posY:138 andNumber:1];
        checkPointCircle.userInteractionEnabled = YES;
        [self addSubview:checkPointCircle];

        checkPointCircle = [[CheckPointCircle alloc] initWithPosX:706 posY:138 andNumber:2];
        checkPointCircle.userInteractionEnabled = YES;
        [self addSubview:checkPointCircle];

        checkPointCircle = [[CheckPointCircle alloc] initWithPosX:315 posY:526 andNumber:3];
        checkPointCircle.userInteractionEnabled = YES;
        [self addSubview:checkPointCircle];

        checkPointCircle = [[CheckPointCircle alloc] initWithPosX:706 posY:526 andNumber:4];
        checkPointCircle.userInteractionEnabled = YES;
        [self addSubview:checkPointCircle];

    }
    return self;
}

- (Line *)drawLine {
    return drawLine;
}

- (void)setDrawLine:(Line *)line
{
    drawLine = line;
}

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];

    CheckPointCircle * checkTouch = (CheckPointCircle *)touch.view;

    if (touch.view.class == checkPointCircle.class) {
        if ([checkTouch getObjectID] == 1) {
            startTouchPoint = CGPointMake([checkTouch center].x, [checkTouch center].y);
            endTouchPoint = [touch locationInView:self];
        }
    }

    self.drawLine = [[Line alloc] initWithPoint:[touch locationInView:self]];
    [self setNeedsDisplay];
}

-(void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event
{
    NSLog(@"Cancelado");
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{

    UITouch *touch = [touches anyObject];

    UITouch *secondaryTouch = (UITouch *)[[[event touchesForView:checkPointCircle] allObjects] objectAtIndex: 0];

    NSLog(@"Que toco: %@ ", secondaryTouch.view);

    if (touch.view.class == checkPointCircle.class) {
        CheckPointCircle * checkTouch = (CheckPointCircle *)touch.view;
        if ([checkTouch getObjectID] == 1) {
            endTouchPoint = [touch locationInView:self];
        }
    }
    [self setNeedsDisplay];
}

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];
    CheckPointCircle * checkTouch = (CheckPointCircle *)touch.view;

    if (touch.view.class == checkPointCircle.class) {
        if ([checkTouch getObjectID] == 1) {
            endTouchPoint = [touch locationInView:self];
        }
    }
    [self setNeedsDisplay];
}

- (void)drawRect:(CGRect)rect
{
    [drawLine drawLineFrom:startTouchPoint to:endTouchPoint];
}

@end 
```

如何检测其他球以获取 ID。

有谁能够帮我？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:29:26.517

类 UIView 的 Apple 文档（[https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/occ/instm/UIView/hitTest:withEvent:](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/occ/instm/UIView/hitTest:withEvent:)）列出了两种方法，它们将确定哪个视图包含命中/点：

```
– hitTest:withEvent:
– pointInside:withEvent: 
```

可能 hitTest 最有帮助：它的描述为“返回包含指定点的视图层次结构（包括其自身）中接收器的最远后代。”，因此它甚至可以根据需要转换坐标。

如果您在您的 touchesMoved: 方法中检查 [self hitTest: [touch.locationInView self] withEvent: event] （或类似的，此处没有代码完成 ;-)=，您应该能够检测到手指何时超过其他任何一个界。

希望这会有所帮助，诺比

# android - 我的按钮无法点击

> ID：11577655
> 
> 赞同：0
> 
> 时间：2012-07-20T10:37:23.737
> 
> 标签：android, buttonclick

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent" 
android:layout_height="fill_parent">

<LinearLayout
    android:id="@+id/li"
    android:layout_alignParentTop="true" 
    android:layout_width="match_parent"
    android:layout_height="50dip"
    android:orientation="horizontal" 
     android:background="@drawable/title_bg">
    <ImageButton
        android:id="@+id/invitebackButton"
        android:layout_width="wrap_content"
        android:background="@android:color/transparent"
        android:src="@drawable/back_button"
        android:layout_height="wrap_content"
        android:layout_marginLeft="5dip"      />
    <TextView
        android:id="@+id/invitation_sinatitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:gravity="center"
        android:text="@string/invite_myfriends"
        android:layout_marginLeft="70dip"      />

</LinearLayout>
<LinearLayout android:id="@+id/buttonLayout"
    android:orientation="horizontal"
    android:layout_width="fill_parent" 
    android:gravity="center"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true" >

    <Button android:id="@+id/invite_mobile_Button"
        android:focusable="true"
        android:clickable="true"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:layout_margin="2dp" 
        android:text="@string/invite_my_friends" /> 
    <Button android:id="@+id/clean_Button"
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:layout_marginLeft="30dip"
        android:layout_margin="2dp" 
        android:text="@string/invite_clean" />

 </LinearLayout>

 <ExpandableListView
    android:id="@+id/mobileinvitelist" 
    android:layout_width="wrap_content"
    android:layout_height="fill_parent" 
    android:layout_marginTop="10dip"
       android:layout_below="@id/li"    />

   </RelativeLayout> 
```

您在我的布局中看到了invite_mobile_Button 和clear_button，但是当我运行我的应用程序时，这两个按钮没有获得焦点并单击。你能给我一些线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:09:06.067

你设置 `android:layout_height="fill_parent"`

因此，正如 Akki 评论的那样，您的 ExpandableListView 会填充所有窗口。这就是为什么你的按钮不能被点击的原因，因为 ExpandableListView 覆盖了它们。

尝试将其更改为`android:layout_height="wrap_content"`或明确定位 ExpandableListView 和 LinearLayout(@+id/buttonLayout)，即 (@+id/buttonLayout) 设置在下方 (@+id/li) 并且 ExpandableListView 设置在下方 (@+id /buttonLayout)，因此布局可以正确显示。

# java - 不能暂停我的线程！为什么？

> ID：11577661
> 
> 赞同：1
> 
> 时间：2012-07-20T10:37:53.800
> 
> 标签：java, multithreading, concurrency

我无法弄清楚以下代码中的问题：
我有一个可以暂停和恢复的线程
代码如下：

```
public class CustomThread implements Runnable {   

    private volatile boolean stop;  
    private volatile boolean suspend;  

    String[] names = new String[]{  
            "A", "B","C","D","E", "F", "G","H","I","J","K", "L"  
    };  

    public CustomThread(){  
        Collections.shuffle(Arrays.asList(names));  
        System.out.println("Available names:");  
        System.out.println(Arrays.asList(names));  

    }  

    @Override  
    public void run() {  

        while(!stop){             
            synchronized (this) {  
                if(suspend){  
                    try {  
                        System.out.println("Got suspended");  
                        wait();  
                        System.out.println("Resumed");  
                    } catch (InterruptedException e) {  
                        System.out.println("Got interupted");  
                    }  
                }     
                else System.out.println("Suspend false");  
            }  
            int randomIdx = new Random().nextInt(names.length);  
            System.out.println(names[randomIdx]);             
        }  
    }  

    public synchronized void suspend(){  
        System.out.println(">>>>>>>>>>>>>>>>>>>>>>>>>>>Suspend true");  
        suspend = true;  
    }  

    public synchronized void resume(){  
        suspend = false;  
        notify();  
    }    
} 
```

我运行以下简单代码：

```
public class CustomTest {  

    /**
     * @param args
     * @throws InterruptedException 
     */
    public static void main(String[] args) throws InterruptedException {  
        CustomThread c = new CustomThread();  
        Thread t = new Thread(c);  
        t.start();  
        Thread.sleep(5000);  
        System.out.println("++++++++++++++++++++++++++++++++");         
        c.suspend();  
    }  
} 
```

我期望看到的是：
线程自定义运行，主线程休眠，主线程暂停自定义线程，`c.suspend()`并且由于`main`终止并且没有人恢复线程，线程保持在`wait`状态。
但我看到的是`CustomThread`连续打印`Suspend false`和来自`names`.

这里有什么问题？就像`Thread.sleep(5000)`and `c.suspend()`in main 什么都不做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:23:05.993

代码写得很好，但是您的问题可能是您正在通过 Eclipse 运行它并且您压倒了控制台。缩短延迟时间`main`，您会看到好的结果。

注意：您的`suspend`方法不需要，`synchronized`因为它只写入`volatile`变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T10:52:30.390

而不是`if(suspend)`你应该有`while(suspend)`，在这里查看javadoc中的解释：http: [//docs.oracle.com/javase/6/docs/api/java/lang/Object.html#wait%28%29](http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html#wait%28%29)

来自的javadoc `Object.wait()`：

> ...可能会出现中断和虚假唤醒，并且应该始终在循环中使用此方法

# windows - 用于搜索文件和重命名文件的脚本

> ID：11577662
> 
> 赞同：0
> 
> 时间：2012-07-20T10:37:54.830
> 
> 标签：windows, scripting, file-rename

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:31:03.037

这是 PowerShell 的起点，如果这对您有用：

```
#Look for any PDF format documents in K:\ CDS_TOOL_MANUAL_OVERRIDES folder.
$pdfFiles = Get-ChildItem -Path K:\CDS_TOOL_MANUAL_OVERRIDES -filter "*.pdf"

#For each document in K:\ CDS_TOOL_MANUAL_OVERRIDES look for PDF document with identical file name held in the \\mastercorrespondence” any sub-directory.
$referenceFiles = Get-ChildItem -Path \\mastercorrespondence -recurse -filter "*.pdf"
$pdfFiles | %{
    $_ = $pdfFile
    $matched = ""
    #I don't fully understand what you're asking for, but it seems to me that the move and rename are on the same file, and technically a rename is a move... so I've combined them.
    $referenceFiles | %{if ($_.Name -eq $pdfFile.Name) {$matched = $_}  }
    if ($matched -ne "") {
        $destinationName = ($pdfFile.Name + "_OverWritten_"+(Get-Date -format dd.MM.yy))
        Move-Item -Path $_.FullName -Destination ($matched.DirectoryName + "\" + $destinationName)
    }
    else{
        #If any documents did not have a corresponding file in \\mastercorrespondence sub-directory then write a message to log file stating names of unmatched files.
        ("Unable to locate matching file: " + $pdfFile.FullName) | Out-File -Append -FilePath "K:\mover.log"
    }
} 
```

# python - Change x axes scale in matplotlib

> ID：11577665
> 
> 赞同：101
> 
> 时间：2012-07-20T10:38:25.703
> 
> 标签：python, matplotlib

I created this plot using Matlab

![enter image description here](../Images/bdeae629fd725c9acd99b89ffedce233.png)

Using matplotlib, the x-axies draws large numbers such as 100000, 200000, 300000\. I would like to have something like 1, 2, 3 and a 10^5 to indicate that it's actually 100000, 200000, 300000.

Is there a simple way to create such scale in matplotlib?

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2012-07-20T12:56:25.280

尝试使用[`matplotlib.pyplot.ticklabel_format`](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.ticklabel_format)：

```
import matplotlib.pyplot as plt
...
plt.ticklabel_format(style='sci', axis='x', scilimits=(0,0)) 
```

这将科学记数法（即`a x 10^b`）应用于您的 x 轴刻度线

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-25T13:53:50.890

这与其说是对您的原始问题的回答，不如说是对您在问题正文中提出的问题之一的回答。

一点序言，让我的命名看起来并不奇怪：

```
import matplotlib
from matplotlib import rc
from matplotlib.figure import Figure
ax = self.figure.add_subplot( 111 ) 
```

如前所述，您可以使用 ticklabel_format 指定 matplotlib 应该对大值或小值使用科学记数法：

```
ax.ticklabel_format(style='sci',scilimits=(-3,4),axis='both') 
```

您可以使用 rcParams 中的标志（来自 matplotlib 导入 rcParams）或直接设置它们来影响其显示方式。我还没有找到比在 '1e' 和 'x10^' 科学记数法之间转换更优雅的方式：

```
ax.xaxis.major.formatter._useMathText = True 
```

这应该给你更多的 Matlab-esc，并且确实可以说是更好的外观。我认为以下应该做同样的事情：

```
rc('text', usetex=True) 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-07-20T13:00:14.770

标[量格式化程序](http://matplotlib.sourceforge.net/api/ticker_api.html#matplotlib.ticker.ScalarFormatter)支持收集指数。文档如下：

> 类 matplotlib.ticker.ScalarFormatter(useOffset=True, useMathText=False, useLocale=None) 基础：matplotlib.ticker.Formatter
> 
> 刻度位置是一个普通的旧数字。如果 useOffset==True 并且数据范围远小于数据平均值，则将确定偏移量，以使刻度标签有意义。科学记数法用于数据 < 10^-n 或数据 >= 10^m，其中 n 和 m 是使用 set_powerlimits((n,m)) 设置的功率限制。这些的默认值由 axes.formatter.limits rc 参数控制。

你的技术是：

```
from matplotlib.ticker import ScalarFormatter
xfmt = ScalarFormatter()
xfmt.set_powerlimits((-3,3))  # Or whatever your limits are . . .
{{ Make your plot }}
gca().xaxis.set_major_formatter(xfmt) 
```

要获得以格式显示的指数`x10^5`，请使用 . 实例化 ScalarFormatter `useMathText=True`。

![后像](../Images/a6f31423dbbb21b5cb47b00342673a76.png)

您还可以使用：

```
xfmt.set_useOffset(10000) 
```

要得到这样的结果：

![在此处输入图像描述](../Images/55aa637f65eb3028694549bdf35c94b6.png)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-12-21T06:17:17.663

我找到了简单的解决方案

```
pylab.ticklabel_format(axis='y',style='sci',scilimits=(1,4)) 
```

# visual-studio-2010 - Visual Studio 2010 中的文件/引用重命名

> ID：11577666
> 
> 赞同：1
> 
> 时间：2012-07-20T10:38:28.370
> 
> 标签：visual-studio-2010, file, class, struct, rename

在 Visual Studio（我使用的是 2010）中，当您创建自己的类/结构时，文件名和类名/结构名称匹配，然后尝试重命名文件，Visual Studio 会询问您是否要更新类名/struct 名称和对类/struct 的所有引用。

当我将代码文件导入项目时，遵循命名约定（文件名和类名/结构名相同）然后尝试重命名文件，Visual Studio 不会要求我更新类/结构和引用对它...为什么它只适用于我创建的文件而不是我导入的文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T12:25:50.090

您仍然可以使用重构重命名该类，以确保它更新所有引用，如果它是您正在寻找的。

不过，这不是答案，如果您真的只是想知道为什么它不起作用^^

也许文件必须正确编译才能使这个技巧起作用？

# javascript - raphael svg free hand drawing in ipad is not smooth pl tell how to have a smooth curve instead of polygonal ends

> ID：11577668
> 
> 赞同：1
> 
> 时间：2012-07-20T10:38:29.563
> 
> 标签：javascript, ipad, svg, raphael

i am using raphael.js to draw free hand drawing in ipad. it works but the curves or path i am drawing is not smooth and its not fast. the curves appear to be like polygonal. pl help me how to sort this out in ipad.the code i am using to draw is

```
paper = Raphael(document.getElementById('loadOnPdf'),780,1500);
masterBackground =paper.image("image1.jpg",0,0,780,1500);
masterBackground.touchmove(function (event)
{
  var evt = event;
  var IE = document.all?true:false;  
  var x,y;                                                                                       
  x = evt.changedTouches[0].clientX;  
  y=evt.changedTouches[0].clientY;                                                                     this.ox = x;
 this.oy = y;
});                                
 var start = function () {
 g_masterPathArray = new Array();
 };
 var move = function (dx, dy) {
 if (g_masterPathArray.length == 0) {
 g_masterPathArray[0] = ["M",this.ox,this.oy];
 g_masterDrawingBox = paper.path(g_masterPathArray);
g_masterDrawingBox.attr({id:"path",stroke: colour,"stroke-width": 10});                                                      
 }
 else
 gmasterPathArray[g_masterPathArray.length] =["L",this.ox,this.oy];
 g_masterDrawingBox.attr({path: g_masterPathArray});
 }; 
```

# javascript - eval condition in javascript where the parameter type mismatch

> ID：11577673
> 
> 赞同：0
> 
> 时间：2012-07-20T10:38:47.903
> 
> 标签：javascript

I have script

```
<script type="text/javascript">
   a = eval("dog!='cat'");
   document.write(a);
</script> 
```

It give's "dog is not defined".But i want true/false. If i put,

```
 <script type="text/javascript">
       a = eval("'dog'!='cat'");
       document.write(a);
    </script> 
```

It works. But i cannot put quotes to dog because condition dynamically generated, can any one suggest any other way to do it. Here cat have quotes,but dog don't have the quotes.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:45:15.720

如果您希望您的操作

*   `false`如果`dog`未定义则返回
*   返回`dog`与`'cat'`其他的比较结果

写吧

```
((typeof dog != 'undefined') && (dog != 'cat')) 
```

你绝对不需要`eval`电话。上面的表达式返回一个布尔值，所以你只需要

```
a = ((typeof dog != 'undefined') && (dog != 'cat'))
document.write(a); 
```

另外，我不完全理解，您的“条件动态生成”是如何产生的，但无论如何，您可以`dog`以变量（可能是字符串）的方式进行操作，因此您可以使用此代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T10:58:43.033

如果您尝试比较的值来自页面上的文本框，您将必须先获取该文本框的值并存储它。

举个例子：

```
<input type="text" id="dogText" /> 
```

并且您想将该文本框中输入的文本与`'cat'` First 进行比较，您需要获取该值。试试 jQuery。

```
var dog = $("#dogText").val();
a = (dog !== cat); 
```

确保您使用`!=`或`!==`取决于您实际寻找的内容。

**或者**，也许你试图做这样的事情？

您说过您的“条件是动态生成的”？你的意思是字符串是动态生成的？如果是这种情况，则意味着您`dog`来自某个地方..

```
var str = 'dog'
var condition = "'" + str + "'!='cat'"; 
```

这会在其中添加引号，它们似乎丢失了？

然后我又可能会再次**偏离目标**..

# c# - Anyone know what the symbols on the right of the wp7 in debug are all about?

> ID：11577674
> 
> 赞同：1
> 
> 时间：2012-07-20T10:38:48.323
> 
> 标签：c#, visual-studio-2010, windows-phone-7

Thias is a screenshot of the right hand side of the application in the emulator, these also appear when I deploy to the phone device. what are they, are they supposed to be there?

![enter image description here](../Images/1b7ade44223254815576775e234a5190.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T10:49:51.540

这些值是诸如帧速率计数之类的统计信息，以及有关 cpu 和内存使用情况的信息。

您经常在调试期间保持它们打开，但在发布时将它们关闭。

这最好在 App 类的构造函数中完成，例如

```
/// <summary>
    /// Constructor for the Application object.
    /// </summary>
    public App()
    {
        // Global handler for uncaught exceptions. 
        UnhandledException += Application_UnhandledException;

        // Phone-specific initialization
        InitializePhoneApplication();

        // Standard Silverlight initialization
        InitializeComponent();

        // XNA initialization
        InitializeXnaApplication();

        DispatcherHelper.Initialize();

        // Show graphics profiling information while debugging.
        if (System.Diagnostics.Debugger.IsAttached)
        {
            // Display the current frame rate counters.
            Application.Current.Host.Settings.EnableFrameRateCounter = true;

            // Show the areas of the app that are being redrawn in each frame.
            //Application.Current.Host.Settings.EnableRedrawRegions = true;

            // Enable non-production analysis visualization mode, 
            // which shows areas of a page that are handed off to GPU with a colored overlay.
            //Application.Current.Host.Settings.EnableCacheVisualization = true;

            // Disable the application idle detection by setting the UserIdleDetectionMode property of the
            // application's PhoneApplicationService object to Disabled.
            // Caution:- Use this under debug mode only. Applications that disable user idle detection will continue to run
            // and consume battery power when the user is not using the phone.
            PhoneApplicationService.Current.UserIdleDetectionMode = IdleDetectionMode.Disabled;
        }

        //set up the tile
        //StartSearchAgent();
        //ScheduledActionService.LaunchForTest("shottracker", TimeSpan.FromSeconds(1));
    } 
```

因此，您将 EnableFrameRateCounter 设置为 false 等。

可以在此处找到有关值的详细信息

[帧率计数器](http://msdn.microsoft.com/en-us/library/gg588380%28v=VS.92%29.aspx)

# android - 你用什么来创建可绘制资源？（最佳实践）

> ID：11577675
> 
> 赞同：1
> 
> 时间：2012-07-20T10:38:50.913
> 
> 标签：android, android-resources

我有许多 PNG 图像，我使用我编写的 bash 脚本将它们转换为不同的分辨率。

输入是一个图像，输出是许多分辨率匹配的缩放图像：drawable-xhdpi、drawable-hdpi、drawable-mdpi、drawable-ldpi。

有没有更好的缩放图标和 PNG 图像的方法？你用什么？我应该改用 SVG 图像吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:42:32.583

对于某些可绘制资源，您可能希望使用 9-patch 图像。例如：如果您正在为按钮设置自定义背景。此链接简要说明了 9 个补丁图像是什么以及如何创建它们。[简单的 9patch 图像指南](http://radleymarx.com/blog/simple-guide-to-9-patch/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T10:44:12.587

有 来自 Google的[Android Asset Studio](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/index.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-17T13:46:11.010

我们对大多数图标使用 svg 并使用脚本导出到不同的分辨率：

```
 #!/bin/bash
# This script export a .svg to different android resolution classes.
# Christian Beier, shoutrLabs
#

# Export individual svg to png with inkscape
# $1 = File
# $2 = Size 
# $3 = destination dir
function exportFile {
    FILE=$1
    SIZE=$2
    DESTDIR=$3

    echo 
    echo '################### EXPORTING '$FILE $SIZE $DESTDIR' ...'

    if [ -e $FILE ]; then

        EXPORTFILE=`basename $FILE .svg`
        EXPORTFILE=$EXPORTFILE".png"

        # If format is WIDTHxHEIGHT do this, else assume 1:1 ratio
        if [ `echo $SIZE | grep -E '^[0-9]+x[0-9]+$'` ]; then
            SIZEWIDTH=`echo $SIZE | sed 's/x[0-9]*//'`
            SIZEHEIGHT=`echo $SIZE | sed 's/[0-9]*x//'`
        else
            SIZEWIDTH=$SIZE
            SIZEHEIGHT=$SIZE
        fi

        mkdir -p $DESTDIR
        inkscape --without-gui --file=$FILE --export-area-drawing --export-png="$DESTDIR/$EXPORTFILE" -w=$SIZEWIDTH -h=$SIZEHEIGHT

    else 
        echo "File does not exist."
    fi

}

# go!

exportFile $1 36 "drawable-ldpi"
exportFile $1 48 "drawable-mdpi"
exportFile $1 72 "drawable-hdpi"
exportFile $1 96 "drawable-xhdpi"
exportFile $1 144 "drawable-xxhdpi"

echo DONE baby! 
```

# c - 为什么我的程序（用 libpcap 编码）不能捕获无线 80211 数据包？

> ID：11577676
> 
> 赞同：0
> 
> 时间：2012-07-20T10:38:56.630
> 
> 标签：c, linux, capture, wireless

我已经编写了一个程序来从我的网络接口卡（ralink 2870（USB），atheros（PCI）等）捕获无线网络数据包。现在我无法捕获我需要的正确格式的数据包，即使没有捕获数据包。 1，我试着把我的卡调到监控模式或者为它添加一个接口mon0。但是它输出“不支持那个接口”。2，这个程序只能通过pcap_datalink（）澄清“这是以太网链路类型”，为什么？我的 wlan0 接口是那种链接类型？这是我的代码：

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>
#include<signal.h>
#include<unistd.h>
#include<net/if.h>
#include<netinet/if_ether.h>
#include<pcap.h>

/*ugly shortcuts - Defining our header types*/
#define ETH_HEADER_SIZE 14          
#define AVS_HEADER_SIZE 64          /*AVS capture header size*/
#define DATA_80211_FRAME_SIZE 24    /*header for 802.11 data packet*/
#define LLC_HEADER_SIZE 8           /*LLC frame for encapsulation*/
#define MAC_MASK (0XFF)
/*
#define uint8 unsigned char;
#define int8 char;
#define uint16 int;
#define int16 int;
#define u_int32_t unsigned int;
#define int32 signed int;
*/

/*for the sake of clarity we'll use globals for a few things*/
char *device;       /*device to sniff on*/
int verbose = 0;    /*verbose output about the device*/
int wired = 0;      /*flag for the opened pcap session*/
pcap_t *handle;     /*handle for the opened pcap session*/

/*8 bytes SNAP LLC header format*/
struct snap_header_t{
u_int8_t dsap;
u_int8_t ssap;
u_int8_t ctl;
u_int16_t org;
u_int8_t org2;
u_int16_t ether_type;   /* ethernet type */

}__attribute__((__PACKED__));

//24 bytes 80211 header
struct wireless_80211_header_t{
u_int16_t fc;   /*2 bytes */
u_int16_t dur;  /*2 bytes duration*/
u_int8_t da[6]; /*6 bytes destination*/
u_int8_t sa[6]; /*6 bytes source*/
u_int8_t bssid[6];  /*6 bytes bssid*/
u_int16_t seq_ctrl; /*2 bytes sequence control*/
};

//64 bytes AVS header
struct AVS_header_t
{
u_int32_t version;
u_int32_t length;
u_int64_t mactime;
u_int64_t hosttime;
u_int32_t phytype;
u_int32_t channel;
u_int32_t datarate;
u_int32_t antenna;
u_int32_t priority;
u_int32_t ssi_type;
int32_t ssi_signal;
int32_t ssi_noise;
u_int32_t preamble;
u_int32_t encoding;
};

/*========defined but not used=========*/
/*prism value */
struct prism_value{
u_int32_t did;
u_int16_t status;
u_int16_t len;
u_int32_t data;
};

/*prism header for traditional wireless card*/
struct prism_header{
u_int32_t msgcode;
u_int32_t msglen;
struct prism_value hosttime;
struct prism_value mactime;
struct prism_value channel;
struct prism_value rssi;
struct prism_value sq;
struct prism_value signal;
struct prism_value noise;
struct prism_value rate;
struct prism_value istx;
struct prism_value frmlen;
};
/*===============================*/

/*gracefully handle a Control + C action*/
void
ctrl_c()
{
printf("\nExiting\n");
pcap_breakloop(handle); /*tell pcap_loop or pcap_dispatch to stop capturing*/
pcap_close(handle);
exit(0);
}

/*Usage of this program*/
void
usage (char *name)
{
printf("\n%s - simple ARP sniffer\n",name);
printf("Usage: %s [-i interface] [-l] [-v]\n",name);
printf("\t-i\tinterface to sniff on\n");
printf("\t-l\tlist available interfaces\n");
printf("\t-v\tprint verbose info\n");
exit(1);
}

/*callback function to process a packet when captured*/
void
process_packet(u_char *args, const struct pcap_pkthdr *header,\
    const u_char *packet)
{
struct ether_header *eth_header; /*in ethernet.h included by if_eth.h*/
struct wireless_80211_header_t *wireless_header; /*80211 header*/
struct snap_header_t *llc_header; /*RFC 1042 encapsulation header*/
struct ether_arp *arp_packet;   /*from if_eth.h*/

if(wired)   /*global flag - wired or wireless*/
{
    eth_header = (struct ether_header *) packet;
    arp_packet = (struct ether_arp *) (packet + ETH_HEADER_SIZE);
    if(ntohs(eth_header->ether_type) != ETHERTYPE_ARP)return;
}
else
{
    /*wireless*/
    wireless_header = (struct wireless_80211_header_t *)
        (packet + AVS_HEADER_SIZE);

    llc_header = (struct snap_header_t *)
        (packet + AVS_HEADER_SIZE + DATA_80211_FRAME_SIZE);
    arp_packet = (struct ether_arp *)
        (packet + AVS_HEADER_SIZE + DATA_80211_FRAME_SIZE + LLC_HEADER_SIZE);
    if(ntohs(llc_header->ether_type) != ETHERTYPE_ARP)return;
}

printf("SRC: %.2X.%.2X.%.2X.%.2X.%.2X.%.2X--> DES:"
            "%.2X.%.2X.%.2X.%.2X.%.2X.%.2X\n",
            wireless_header->sa[0]&MAC_MASK,
            wireless_header->sa[1]&MAC_MASK,
            wireless_header->sa[2]&MAC_MASK,
            wireless_header->sa[3]&MAC_MASK,
            wireless_header->sa[4]&MAC_MASK,
            wireless_header->sa[5]&MAC_MASK,
            wireless_header->da[0]&MAC_MASK,
            wireless_header->da[1]&MAC_MASK,
            wireless_header->da[2]&MAC_MASK,
            wireless_header->da[3]&MAC_MASK,
            wireless_header->da[4]&MAC_MASK,
            wireless_header->da[5]&MAC_MASK);

printf("Src: %d.%d.%d.%d--> Des: %d.%d.%d.%d\n",
        arp_packet->arp_spa[0],
        arp_packet->arp_spa[1],
        arp_packet->arp_spa[2],
        arp_packet->arp_spa[3],
        arp_packet->arp_tpa[0],
        arp_packet->arp_tpa[1],
        arp_packet->arp_tpa[2],
        arp_packet->arp_tpa[3]);

}/*end of process_packet*/

/*the main function*/
int
main(int argc,char *argv[])
{
char opt;                           /*for option processing*/
char errbuf[PCAP_ERRBUF_SIZE];  /*pcap error messages buffer*/
struct pcap_pkthdr header;      /*packet header from pcap*/
const u_char *packet;           /*packet*/
bpf_u_int32 netp;       /*ip address of interface*/
bpf_u_int32 maskp;      /*subnet mask of interface*/
char *filter = "arp";   /*filter for BPF (human readable)*/
struct bpf_program fp;  /*compiled BPF filter*/
int ret;                /*gegeric return value*/
pcap_if_t *alldevsp;    /*list of interfaces*/

while((opt = getopt(argc, argv, "i:vl")) > 0)
{
    switch(opt)
    {
        case 'i':
            device = optarg;
            break;
        case 'l':
            if(pcap_findalldevs (&alldevsp,errbuf) < 0)
            {
                fprintf(stderr,"erros in find all devs: %s\n",errbuf);
                exit(1);
            }
            while(alldevsp != NULL)
            {
                printf("%s\n",alldevsp->name);
                alldevsp = alldevsp->next;
            }
            exit(0);
        case 'v':
            verbose = 1;
            break;
        default:
            usage(argv[0]);
            break;
    }//end of switch

}//end of while

/*setup signal handler to Control+C will graceful*/
signal(SIGINT,ctrl_c);

/*find device for sniffing if needed*/
if(device == NULL)/*if user hasn't specified a device*/
{
    device = pcap_lookupdev(errbuf);/*let pcap find a compatible device*/
    if(device == NULL)//there was an error
    {
        fprintf(stderr,"%s\n",errbuf);
        exit(1);
    }
}

/*set errbuf to 0 length string to check for warnings*/
//memset(errbuf,PCAP_ERRBUF_SIZE,0);
errbuf[0] = 0;

/*open device for sniffing*/
handle = pcap_open_live(device, /*device to sniff on*/
                        BUFSIZ, /*maximum number of bytes to capture per packet*/
                        1,      /*set 1 for promisc mode,0 to not*/
                        0,      /*0,snigg until an error occurs*/
                        errbuf);

if(handle == NULL)
{
        fprintf(stderr,"%s\n",errbuf);
        exit(1);
}
if(strlen(errbuf) > 0)
{
        fprintf(stderr,"warning: %s\n",errbuf);
        errbuf[0] = 0;
}
if(verbose)
{
        printf("Using device: %s\n",device);
        printf("libpcap version: %s\n",(char *)pcap_lib_version);
}

/*find out the datalink type of the connection*/
if(pcap_datalink (handle) == DLT_EN10MB)
{
    wired = 1;/*ethernet link*/
    printf("this is a ethernet link\n");
}
else if((pcap_datalink (handle) == DLT_IEEE802_11_RADIO_AVS)\
||(pcap_datalink (handle) == DLT_IEEE802_11_RADIO)\
||(pcap_datalink (handle) == DLT_IEEE802_11)\
||(pcap_datalink (handle) == DLT_PRISM_HEADER))
{
    wired = 0;
    printf("this is a wireless link\n");
}
else
{
    fprintf(stderr,"do not support this interface type!\n");
    exit(1);
}

/*get the IP subnet mask of the device,so we set a filter on it*/
if(pcap_lookupnet(device,&netp,&maskp,errbuf) == -1)
{
    fprintf(stderr,"%s\n",errbuf);
    exit(1);
}

/*compile the filter,so we can capture only stuff we are interested in*/
if(pcap_compile(handle,&fp,filter,0,maskp) == -1)
{
    fprintf(stderr,"%s\n",pcap_geterr(handle));
    exit(1);
}

/*set the filter for the device we have opened*/
if(pcap_setfilter(handle,&fp) == -1)
{
    fprintf(stderr,"%s\n",pcap_geterr(handle));
    exit(1);
}

/*it will be nice and free the memory used for the compiled filter*/
pcap_freecode(&fp);

/*the 'main loop' of capturing packet with our callback function*/
if((ret = pcap_loop(handle, /*our session created previous*/
                        -1, /*(count) a negative number means sniff until error*/
            process_packet, /*callback function*/
                    NULL)) < 0)/*arg can be transfer to callback function*/
{
    if(ret == -1)
    {   fprintf(stderr,"%s\n",pcap_geterr(handle));
        exit(1);
    }/*otherwise return should be -2,meaning pcap_breakloop has been called*/
}

/*close our session*/
pcap_close(handle);

return 0;
} 
```

# c# - 如何构建内部单用户凭证以控制其他伪装成用户的实体（Facebook 页面/公司资料）

> ID：11577680
> 
> 赞同：1
> 
> 时间：2012-07-20T10:39:07.043
> 
> 标签：c#, asp.net-mvc, web-applications, architecture

我不确定这是否是提出这个问题的最佳方式。

我已经建立了一个 facebook 克隆。

现在已经到了我希望人们能够创建页面/公司简介的地步。

所以我希望许多用户能够

A）管理这些页面（简单，只需授权用户对页面）

B）充当这些页面，就好像它们是普通用户帐户一样（在页面上发布帖子，并在整个应用程序中进行操作，就好像它们是普通用户一样

现在要做到这一点，我可以

i) 实际上创建一个不同类型的新用户。当普通用户想要充当 PAGE/Company 时，我实际上对他们进行了身份验证/授权，并将他们的登录帐户实际切换到第二个用户。当以该用户身份登录时，他们可以使用相同的方法切换回其他用户类型。我实际上非常喜欢这个想法，因为它意味着代码更改很少，并且一切都应该正常工作。

问题 - Cookie？多个用户同时登录同一个帐户？我猜这是我的问题以及我如何构建我的一般应用程序/cookie 方法

ii) 我可以在数据库中创建新类型，即页面/公司，并在每个我有用户 ID（帖子、消息、照片、图像等）的地方添加一个页面 ID 和公司 ID。然后，当作为页面或公司工作时，我可以记录正在交互的页面/公司。

与选项 a) 中理论上干净的想法相比，这将导致相当多的代码更改，并且感觉也很糟糕。

但是，我可能错过了一些绝对巨大的安全漏洞或选项 A) 是一个坏主意的其他原因。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T02:08:34.380

看来你的情况过于复杂了。您似乎想要执行以下操作：

*   创建一个`User`模型，它是您唯一能够登录的模型
*   添加“其他帐户类型”作为该`User`模型中添加的身份验证级别

这类似于为`roles`您的`User`模型添加不同的内容。

*   UserA 可以拥有一个角色，允许他们比 UserB 做更多的事情
*   这些角色可以根据需要来来去去

你的方法似乎走在了正确的轨道上`i`。 [KISS浮现](http://en.wikipedia.org/wiki/KISS_principle)在脑海中。

## **更新 - 根据您的评论：**

我会回到绘图板上你想如何做到这一点 - 明显的结构太不干净了，我们需要在这里更有创意。

*如果我们知道有关您的确切结构的更多*信息，我们将能够提供更多帮助，但这很乏味。话虽如此，导致这些问题的解决方案本身就很复杂。

我会尽力而为——当我想到您的用户需求时，我会想到：

*   感觉类似于教室环境。您有一群用户（学生、教师、管理人员）可以访问同一区域（教室），并且其中有几个区域是相似的（不同的教室）。
*   如果它类似于教室设置，您将拥有具有以下角色的用户：
    *   管理员可以在任何他们想要的地方访问任何东西。
    *   教师可以访问他们明确教授的任何教室。
        *   作为一名教师意味着他们可以在课堂上做的事情比学生多。
    *   学生的权限要有限得多，基本上只能上课、上交作业和查看成绩。他们唯一能控制的是他们出现与否的天气。

*起初，上述情况可能听起来令人费解——如何为这种结构设置权限方案？*

# 简单的：

*   你有三个角色：`Admin` `Teacher` `Student`

*   （我将过度简化）您放弃`[Authorize(Roles = "Admin")]`需要用户登录的每一个控制器操作 - 因为他们可以做任何他们想做的事情。

*   您允许`Teacher`s 几乎完全控制与他们教授的课程相关的任何操作：`if User.IsInRole("Teacher") && User.Name == classroom.Teacher`

*   您允许`Student`s 对他们可以做什么有更大的限制，并进一步限制他们的用户是否真的在教室里：（`if User.IsInRole("Student") && User.Name.IsInList().List<Enrollments>EnrollmentListForCurrentClassroom`非常伪代码）

您只有三个角色，但您可以通过角色以外的方式限制对数据库各个部分的访问 - 您可以通过天气限制访问 用户还被添加到班级的注册学生列表、教师列表中教一堂课（通常每个班只有一位老师……）等。

希望采用与上述类似的方法将有助于简化您的情况。

# python - 在 Django 中显示/渲染静态图像的简单视图

> ID：11577681
> 
> 赞同：9
> 
> 时间：2012-07-20T10:39:16.080
> 
> 标签：python, django, django-staticfiles, django-1.4

我试图找到使用 django 的模板上下文加载器显示图像的最有效方法。我的应用程序中有一个静态目录，其中包含图像“victoryDance.gif”和项目级别的空静态根目录（带有`settings.py`）。`urls.py`假设我和`settings.py`文件中的路径是正确的。什么是最好的景色？

```
from django.shortcuts import HttpResponse
from django.conf import settings
from django.template import RequestContext, Template, Context

def image1(request): #  good because only the required context is rendered
    html = Template('<img src="{{ STATIC_URL }}victoryDance.gif" alt="Hi!" />')
    ctx = { 'STATIC_URL':settings.STATIC_URL}
    return HttpResponse(html.render(Context(ctx)))

def image2(request): # good because you don't have to explicitly define STATIC_URL
    html = Template('<img src="{{ STATIC_URL }}victoryDance.gif" alt="Hi!" />')
    return HttpResponse(html.render(RequestContext(request)))

def image3(request): # This allows you to load STATIC_URL selectively from the template end
    html = Template('{% load static %}<img src="{% static "victoryDance.gif" %}" />')
    return HttpResponse(html.render(Context(request)))

def image4(request): # same pros as image3
    html = Template('{% load static %} <img src="{% get_static_prefix %}victoryDance.gif" %}" />')
    return HttpResponse(html.render(Context(request)))

def image5(request):
    html = Template('{% load static %} {% get_static_prefix as STATIC_PREFIX %} <img  src="{{ STATIC_PREFIX }}victoryDance.gif" alt="Hi!" />')
    return HttpResponse(html.render(Context(request))) 
```

感谢您的回答这些观点都有效！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-20T10:56:57.997

如果您需要渲染图像，请在此处阅读[http://www.djangobook.com/en/1.0/chapter11/](http://www.djangobook.com/en/1.0/chapter11/)并使用您的以下代码版本：

对于 django 版本 <= 1.5：

```
from django.http import HttpResponse

def my_image(request):
    image_data = open("/path/to/my/image.png", "rb").read()
    return HttpResponse(image_data, mimetype="image/png") 
```

对于 django 1.5+`mimetype`被替换为`content_type`（很高兴我不再使用 django）：

```
from django.http import HttpResponse

def my_image(request):
    image_data = open("/path/to/my/image.png", "rb").read()
    return HttpResponse(image_data, content_type="image/png") 
```

还有[更好](https://stackoverflow.com/questions/3003146/best-way-to-write-an-image-to-a-django-httpresponse/15832328)的做事方式！

否则，如果您需要高效的模板引擎，请使用 Jinja2

否则，如果您使用的是 Django 的模板系统，据我所知，您不需要定义 STATIC_URL，因为它由“静态”上下文预处理器提供给您的模板：

```
TEMPLATE_CONTEXT_PROCESSORS = (
    'django.contrib.auth.context_processors.auth',
    'django.core.context_processors.debug',
    'django.core.context_processors.i18n',
    'django.core.context_processors.static',
    'django.core.context_processors.media',
    'django.core.context_processors.request',
    'django.contrib.messages.context_processors.messages',
) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T14:50:59.160

在您的最后一个示例（**image5**）中，您应该使用`{{ STATIC_PREFIX }}`而不是`{% STATIC_PREFIX %}`

`STATIC_PREFIX`是变量，不是标签

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T10:41:59.277

为避免`STATIC_URL`显式定义，您可以[`RequestContext`](https://docs.djangoproject.com/en/dev/ref/templates/api/#subclassing-context-requestcontext)在呈现模板时使用 a。只要确保`django.core.context_processors.static`在您的 `TEMPLATE_CONTEXT_PROCESSORS`设置中。

```
from django.template import RequestContext
...
return HttpResponse(html.render(RequestContext(request, ctx))) 
```

或者，您可以使用[静态模板标签](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#std%3atemplatetag-static)。

```
html = Template('<img src="{% static "victoryDance.gif" %} alt="Hi!" />') 
```

第三个选项是[`get_static_prefix`](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#get-static-prefix)模板标签。

# php - 如何检查mysql查询是否成功

> ID：11577682
> 
> 赞同：0
> 
> 时间：2012-07-20T10:39:17.957
> 
> 标签：php, mysql, rows-affected

执行几个 mysql 查询后，如何确定是否全部成功？

`mysql_error()`我知道我可以使用每个数据（）构建一个数组，`mysql_query`然后分析该数组，但这不是更好的方法吗？因为`mysql_affected_rows()`在这种情况下不是提供帮助的适当功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T10:42:35.200

```
$unsuccessful = 0;

function query($query)
{
    mysql_query($query) or $GLOBALS['unsuccessful']++;
}

// -------------------------
// USAGE:
// -------------------------

query("UPDATE yourTable SET field1 = 'value'");
query("invalid query 1");
query("invalid query 2");
query("UPDATE yourTable SET field2 = 'value'");

if($GLOBALS['unsuccessful'] > 0) 
    echo $GLOBALS['unsuccessful'] .' queries was unsuccessful.'; // prints "2 queries was unsuccessful" 
```

# python - 地址的纬度和经度

> ID：11577690
> 
> 赞同：1
> 
> 时间：2012-07-20T10:40:02.677
> 
> 标签：python, latitude-longitude

我有大约 8000 + 纬度和经度。我需要提取（反向代码），它们到位置，可能是城市。

最初我检查了谷歌地图，但根据他们的条款，我们不应该用我们的脚本访问他们的服务。

即使是 OpenStreetMaps 也不允许我们反复访问他们的服务器。他们有一些时间限制。

所以，我下载了位置的纬度和经度。我写了一个python脚本，

```
import tabular as tb
import csv

citiesLatLongData = tb.tabarray(SVfile="D:/latitude-longitude/citieslatlong.csv")

allData = tb.tabarray(SVfile="C:/Users/User/Desktop/alldata.csv")

latlonglocs = {'a1':"Car Nicobar",'a2':"Port Blair",'a3':"Hyderabad",'a4':"Kadapa",'a5':"Puttaparthi",
'a6':"Rajahmundry",'a7':"Tirupati",'a8':"Vijayawada",'a9':"Vishakhapatnam",'a10':"Itanagar",
'a11':"Dibrugarh",'a12':"Dispur",'a13':"Guwahati",'a14':"North Lakhimpur",'a15':"Silchar",
'a16':"Gaya",'a17':"Patna",'a18':"Chandigarh",'a19':"Raipur",'a20':"Silvassa",
'a21':"Daman",'a22':"Bawana",'a23':"New Delhi",'a24':"Mormugao",'a25':"Panaji",
'a26':"Ahmedabad",'a27':"Bhavnagar",'a28':"Bhuj",'a29':"Gandhinagar",'a30':"Jamnagar",
'a31':"Kandla",'a32':"Rajkot",'a33':"Vadodara",'a34':"Hisar",'a35':"Bilaspur",
'a36':"Dharamsala",'a37':"Kulu",'a38':"Shimla",'a39':"Jammu",'a40':"Srinagar",'a41':"Jamshedpur",
'a42':"Ranchi",'a43':"Bangalore",'a44':"Belgaum",'a45':"Bellary",'a46':"Hubli Dharwad",
'a47':"Mandya",'a48':"Mangalore",'a49':"Mysore",'a50':"Cochin",'a51':"Kozhikode",
'a52':"Thiruvananthapuram",'a53':"Bingaram Island ",'a54':"Kavaratti",'a55':"Bhopal",'a56':"Gwalior",
'a57':"Indore",'a58':"Jabalpur",'a59':"Khandwa",'a60':"Satna",'a61':"Ahmadnagar",
'a62':"Akola",'a63':"Aurangabad",'a64':"Jalna",'a65':"Kolhapur",'a66':"Mumbai",
'a67':"Nagpur",'a68':"Nasik",'a69':"Pimpri",'a70':"Pune",'a71':"Solapur",
'a72':"Imphal",'a73':"Shillong",'a74':"Aizawl",'a75':"Kohima",'a76':"Bhubaneswar",
'a77':"Jharsuguda",'a78':"Karaikal",'a79':"Mahe",'a80':"Pondicherry",'a81':"Yanam",
'a82':"Amritsar",'a83':"Pathankot",'a84':"Jaipur",'a85':"Jodhpur",'a86':"Kota",
'a87':"Udaipur",'a88':"Gangtok",'a89':"Chennai",'a90':"Coimbatore",'a91':"Madurai",
'a92':"Nagercoil",'a93':"Thiruchendur",'a94':"Thiruvannaamalai",'a95':"Thoothukudi",
'a96':"Tiruchirappalli",'a97':"Tirunelveli",'a98':"Vellore",'a99':"Agartala",
'a100':"Agra",'a101':"Allahabad",'a102':"Bareilly",'a103':"Gorakhpur",'a104':"Jhansi",
'a105':"Kanpur",'a106':"Lucknow",'a107':"Varanasi",'a108':"Dehradun",'a109':"Pantnagar",
'a110':"Kolkata",'a111':"Siliguri"}

latlongs = {'a1':[9.15,92.8167],'a2':[11.6667,92.7167],'a3':[17.45,78.4667],'a4':[14.4833,78.8333],
            'a5':[14.1333,77.7833],'a6':[16.9667,81.7667],'a7':[13.65,79.4167],'a8':[16.5333,80.8],
            'a9':[17.7,83.3],'a10':[27.0833,93.5667],'a11':[27.4833,95.0167],'a12':[26.0833,91.8333],
            'a13':[26.1667,91.5833],'a14':[27.2333,94.1167],'a15':[24.8167,92.8],'a16':[24.75,84.95],
            'a17':[25.6,85.1],'a18':[30.7333,76.75],'a19':[21.2333,81.6333],'a20':[20.2833,73],
            'a21':[20.4167,72.85],'a22':[28.7833,77.0333],'a23':[28.5667,77.1167],'a24':[15.3833,73.8167],      
            'a25':[15.3833,73.8167],'a26':[23.0333,72.6167],'a27':[21.75,72.2],'a28':[23.25,69.6667],
            'a29':[23.3333,72.5833],'a30':[22.4667,70.0667],'a31':[23.0333,70.2167],'a32':[22.3,70.7833],
            'a33':[22.3,73.2667],'a34':[29.1667,75.7333],'a35':[31.25,76.6667],'a36':[32.2,76.4],
            'a37':[31.9667,77.1],'a38':[31.1,77.1667],'a39':[32.7,74.8667],'a40':[34.0833,74.8167],
            'a41':[22.8167,86.1833],'a42':[23.3167,85.3167],'a43':[12.9833,77.5833],'a44':[15.85,74.6167],
            'a45':[15.15,76.85],'a46':[15.35,75.1667],'a47':[12.55,76.9],'a48':[12.9167,74.8833],
            'a49':[12.3,76.65],'a50':[9.95,76.2667],'a51':[11.25,75.7667],'a52':[8.46667,76.95],
            'a53':[10.9167,72.3333],'a54':[10.5833,72.65],'a55':[23.2833,77.35],'a56':[26.2333,78.2333],
            'a57':[22.7167,75.8],'a58':[23.2,79.95],'a59':[21.8333,76.3667],'a60':[24.5667,80.8333],
            'a61':[19.0833,74.7333],'a62':[20.7,77.0667],'a63':[19.85,75.4],'a64':[19.8333,75.8833],
            'a65':[16.7,74.2333],'a66':[19.1167,72.85],'a67':[21.1,79.05],'a68':[19.8933,73.8],
            'a69':[18.55,73.8167],'a70':[18.5333,73.8667],'a71':[17.6667,75.9],'a72':[24.7667,93.9],
            'a73':[25.55,91.85],'a74':[23.6667,92.6667],'a75':[25.6667,94.1167],'a76':[20.25,85.8333],
            'a77':[21.5833,84.08333],'a78':[10.95,79.7833],'a79':[11.7,75.5333],'a80':[11.9333,79.8833],
            'a81':[16.7333,82.2167],'a82':[31.6333,74.8667],'a83':[32.2833,75.65],'a84':[26.8167,75.8],
            'a85':[29.1667,75.7333],'a86':[25.15,75.85],'a87':[24.5667,73.6167],'a88':[27.3333,88.6167],
            'a89':[13,80.1833],'a90':[11.0333,77.05],'a91':[9.83333,78.0833],'a92':[8.16667,77.4333],
            'a93':[8.48333,78.1167],'a94':[12.2167,79.0667],'a95':[8.78333,78.1333],'a96':[10.7667,78.7167],
            'a97':[8.73333,77.7],'a98':[12.9167,79.15],'a99':[23.8833,91.25],'a100':[27.15,77.9667],
            'a101':[25.45,81.7333],'a102':[28.3667,79.4],'a103':[26.75,83.3667],'a104':[29.1667,75.7333],
            'a105':[26.4,80.4],'a106':[26.75,80.8833],'a107':[25.45,83],'a108':[30.3167,78.0333],
            'a109':[29.0833,79.5],'a110':[22.65,88.45],'a111':[26.6333,88.3167]
            }

for eachOne in allData:
    for eachTwo in latlongs:
        eachOne_Coordinates_Latitude = eachOne['COORDINATES-Latitude']
        latlongs_eachTwo_Latitude_Plus  = int(latlongs[eachTwo][0]) + 0.18
        latlongs_eachTwo_Latitude_Minus = int(latlongs[eachTwo][0]) - 0.18

        eachOne_Coordinates_Longitude = eachOne['COORDINATES-Longitude']
        latlongs_eachTwo_Longitude_Plus = int(latlongs[eachTwo][1]) + 0.18
        latlongs_eachTwo_Longitude_Minus = int(latlongs[eachTwo][1]) - 0.18

        if ( (eachOne_Coordinates_Latitude < latlongs_eachTwo_Latitude_Plus) and (latlongs_eachTwo_Latitude_Plus > latlongs_eachTwo_Latitude_Minus) ) and ( (eachOne_Coordinates_Longitude < latlongs_eachTwo_Longitude_Plus)  and (eachOne_Coordinates_Longitude > latlongs_eachTwo_Longitude_Minus) ):
            someDict.setdefault((eachOne_Coordinates_Latitude,eachOne_Coordinates_Longitude),[]).append(latlongs[eachTwo])

for each in someDict:
    print each,':', min(someDict[each]) 
```

**我的问题：** 如您所知，我们从外部来源获得的纬度和经度与我们拥有的纬度和经度并不完全匹配。我在某处听说它们不匹配，并且会有一些错误百分比或其他东西。

我需要任何人的指导。我请求有人请指点我正确的方向，或者如果您知道执行此操作的任何包或脚本。

我会非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T12:12:46.723

这听起来很像“最近点问题”。您有 N 个点（城市）和 M 个位置（您的 8000 个坐标）。对于 M 个位置中的每一个，您都希望按其最近的城市对位置进行分类。[最近邻搜索](http://en.wikipedia.org/wiki/Closest_point_query)有多种解决方案，但最简单的一种是线性搜索：

```
function getClosestCity(Coordinate location){
    bestCity = cities[0];
    foreach(city in cities){
        if (distance(bestCity.location, location) < distance(city.location, location)){
            bestCity = city;
        }
    }
    return bestCity;
} 
```

# android - 在android中显示另一个活动的对话框

> ID：11577692
> 
> 赞同：0
> 
> 时间：2012-07-20T10:40:13.143
> 
> 标签：android, android-activity, dialog

从活动 1，我打开活动 2。现在，当我在活动 2 的屏幕中时，我收到活动 1 的事件，并且在收到该事件时我想显示一个对话框。我怎样才能做到这一点？？当我在活动 2 中时，我没有看到对话框，但是当我回到活动 1 时，我看到了对话框。

即使我在活动 2 的屏幕中，我也想看到对话框。我也查看了这个链接，但是 [在另一个正在运行的活动（Android）之上显示对话框并没有多大帮助？](https://stackoverflow.com/questions/10031951/showing-dialog-on-top-of-another-running-activity-android) 在收到 reqd 事件时，我调用此方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:00:56.757

在您的第一个活动（splashScreen）中编写此函数以创建警报框

```
public static void MyAlertBox(String title, String mymessage,  Context context)
{
new AlertDialog.Builder(context)
   .setMessage(mymessage)
   .setTitle(title)
   .setCancelable(false)
   .setPositiveButton("OK", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
        .
        }
    })
   .show();
} 
```

声明全局可验证：

```
public static Activity currentActivity= null; 
```

在每个活动中： onResume() 写“currentActivity=this ;”

你想在哪里显示警报只需写：（活动1）

```
SplashScreen.MyAlertBox("Alert",
            "Alert box from activity 1",currentActivity ); 
```

希望它对你有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:14:06.610

首先在 Activity 2 中创建单独的对话框并执行下面提到的操作

1.  当收到与活动 1 相关的数据时，尝试发送广播。
2.  创建一个接收器类来监听广播
3.  现在您必须使用观察者设计模式，即当 Receiver 类中出现某些事件时，它将通知 Activity B 数据已到达并显示相应的对话框。

如果不成功，请分享结果。

# ios - 从代码 ios 访问表格视图单元格中的分段控件

> ID：11577694
> 
> 赞同：0
> 
> 时间：2012-07-20T10:40:19.737
> 
> 标签：ios, uisegmentedcontrol

我有一个使用故事板创建的分段控件。我想从代码中改变它的高度。我如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:18:52.563

因此，执行此操作的传统方法是设置分段控件的“标签”，以便在您的 tableView 委托中，您可以通过发送单元格“[cell.contentView viewWithTag:theTagNumber];”来访问它。由于我不使用故事板，因此我无法准确告诉您如何使用故事板创建的应用程序来做到这一点。

所以一旦你有了控制权，你就改变了它的框架。我不确定它的外观，但这就是你的做法：

```
UISegmentedControl *control = (UISegmentedControl *)[cell.contentView viewWithTag:theTagNumber];
CGRect r = control.frame;
r.size.height = 50; // whatever you want
control.frame = r; 
```

# java - Java中的回调接口是什么？

> ID：11577695
> 
> 赞同：14
> 
> 时间：2012-07-20T10:40:21.680
> 
> 标签：java

这个接口 SetObserver 的代码片段取自**Effective Java (Avoid Excessive Synchronization Item 67)**

```
public interface SetObserver<E> {
// Invoked when an element is added to the observable set
void added(ObservableSet<E> set, E element);
} 
```

并且`SetObserver`传递给`addObserver()`和`removeObserver`方法，如下所示：

```
// Broken - invokes alien method from synchronized block!
public class ObservableSet<E> extends ForwardingSet<E> {
  public ObservableSet(Set<E> set) {
    super(set);
  }

  private final List<SetObserver<E>> observers =
      new ArrayList<SetObserver<E>>();

  public void addObserver(SetObserver<E> observer) {
    synchronized (observers) {
      observers.add(observer);
    }
  }

  public boolean removeObserver(SetObserver<E> observer) {
    synchronized (observers) {
      return observers.remove(observer);
    }
  }

  private void notifyElementAdded(E element) {
    synchronized (observers) {
      for (SetObserver<E> observer : observers)
        observer.added(this, element);
    }
  } 
```

Bloch 将该`SetObserver<E>`接口称为**回调接口**。Java中的接口什么时候称为回调接口？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-20T10:46:36.523

接口成为“回调接口”的一般要求是该接口为被调用者提供了一种调用调用者内部代码的方法。主要思想是调用者有一段代码需要在另一个组件的代码中发生某些事情时执行。回调接口提供了一种将此代码传递给被调用组件的方法：调用者实现一个接口，而被调用者调用其中一个方法。

回调机制在不同语言中的实现方式可能不同：C# 除了回调接口之外还有委托和事件，C 有可以通过指针传递的函数，Objective C 有委托协议等等。但主要思想始终是相同的：调用者传递一段代码以在某个事件发生时被调用。

# javascript - google v8 preparser的使用示例

> ID：11577696
> 
> 赞同：1
> 
> 时间：2012-07-20T10:40:29.637
> 
> 标签：javascript, v8

我需要解析 JavaScript 代码并进入 AST 元素树。我正在尝试使用 Google V8 JavaScript 引擎。有人尝试过 Google V8 预解析器吗？任何代码示例？或者引用使用 Google V8 预解析器的开源项目？nayone 是否也有使用预解析数据从中获得 AST 的经验？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T10:53:07.690

V8 的预解析器不打算用作独立的解析器，它甚至不构建完整的 AST。Preparser 是 V8 内部惰性解析/编译基础设施的一部分，它的存在是为了加速大型 JavaScript 文件的初始解析。它只能与 V8 中的实际解析器结合使用。

# opengl - 存储渲染层

> ID：11577698
> 
> 赞同：1
> 
> 时间：2012-07-20T10:40:32.677
> 
> 标签：opengl, opentk

我正在使用 OpenTK（.NET 的 OpenGL 包装器）来绘制 2D 对象 一般来说，我正在绘制两个元素（由较小的对象组成）

```
public void Draw()
{
    DrawElement1();  // Element1 changes every 300ms
    DrawElement2();  // Element2 changes every 50ms
} 
```

在当前实现中，我必须`Draw`每 50 毫秒调用一次，以使 Element2 保持最新状态。在这种情况下，我毫无意义地刷新 Element1 5 次。

所以我需要一些方法来存储 Element1 的渲染状态以加快我的绘图速度

```
public void Draw()
{
    if(needUpdateElement1)
       DrawElement1();
    else
       DrawRenderedElement1();
    DrawElement2();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:22:15.943

您要做的是将“Element2”渲染到屏幕外渲染目标并每 300 毫秒刷新一次。每帧，只需将渲染目标映射为纹理并渲染四边形，使其与“Element1”正确混合

[这](http://www.opentk.com/node/2605)是一个使用 OpenTK 进行离屏渲染的好教程。

*要记住的关键是，如果切换渲染目标的成本超过渲染元素的成本，那么这甚至可能会减慢速度。但是如果“Element2”足够复杂/沉重，这种技术将有很大帮助。*

希望这可以帮助！

# php - XMLReader::next() 错误停止脚本

> ID：11577700
> 
> 赞同：0
> 
> 时间：2012-07-20T10:40:44.583
> 
> 标签：php, xml-parsing

我正在使用 XMLReader 处理一个大型 (1.2GB) XML 文件。当它到达一个包含无效字符的节点时，脚本停止运行并显示错误消息“警告：XMLReader::next(): 解析器错误：输入不正确的 UTF-8，指示编码！”。

这是一个复制错误的示例脚本：

```
$reader = new XMLReader();        
$reader->open('sample.xml',null, LIBXML_NOERROR | LIBXML_NOWARNING);
while ($reader->read() && $reader->name !== 'item');
while ($reader->name === 'item') {
    $reader->next('item');
}
$reader->close(); 
```

示例.xml：

```
<?xml version="1.0" ?>
<source>
<item>
    <data><![CDATA[good node]]></data>
</item>
<item>
    <data><![CDATA[Suspendisse euismod, ultrices, ligula leo lacinia magna, eleifend fermentum lacus est ut velit! Vestibulum nec magna in tellus mollis fermentum. Mauris vehicula felis eget eros auctor consectetur. Pellentesque imperdiet arcu ac mauris tempor id feugiat mauris commodo. Sed facilisis turpis eu mi ornare tempor. Ut velit erat, volutpat ut sollicitudin et, mattis sed turpis. bad nodé]]></data>
</item>
<item>
    <data><![CDATA[another good node]]></data>
</item>
</source> 
```

无论如何要忽略该节点并移至下一个节点，还是清理数据以处理它？

XML 文档来自外部来源，我无法控制它，也无法更改它。

亲切的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:16:00.473

try with

```
$reader->open('sample.xml',UTF8, LIBXML_NOERROR | LIBXML_NOWARNING); 
```

this may help you

```
 // enable user error handling
  libxml_use_internal_errors(true);
  /* ... do your XML processing ... */
  $errors = libxml_get_errors();
 foreach ($errors as $error) {
    // handle errors here
 }
 libxml_clear_errors(); 
```

# c# - 在 DataGridView 单元格中插入路径

> ID：11577701
> 
> 赞同：0
> 
> 时间：2012-07-20T10:40:48.900
> 
> 标签：c#

好吧，我在当前的项目中有一个非常具体的要求。我需要在 DataGridView 中添加路径值（作为字符串）。因此单元格必须以 PathEllipsis 格式显示路径，即类似于此 -

d:\abcd\efgh\ijkl\mnop\qrst...\test.txt\0F\GHIJ\KLMN\OPQR\STIV\WXYZ\test.txt。

我不知道我是否正确搜索它，但我无法找到相关信息。任何想法？

我知道的一种解决方法是手动编辑路径，但为此，我必须保留一个隐藏的列或标签。这个过程会很乏味，我不希望这样......

帮助！！！

后来编辑 - 是的，如果路径长度比单元格宽，路径的开始和结束必须适合单元格的长度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:04:05.197

在这里，我发布了用于我的项目的解决方案。 `<textbox>`用于动态数据和用于静态数据的标签

```
<asp:TemplateField HeaderText="Path Details" ShowHeader="False">
    <ItemTemplate>
        <a href="D:\FolderName\YourFileName.txt">D:\FolderName\YourFileName.txt</a>
        <asp:TextBox ID="txtpath" TextMode="MultiLine" runat="server" ReadOnly="true" Text='<%# (string)Eval("Database Field") %>'></asp:TextBox>                                                                                                
    </ItemTemplate>
</asp:TemplateField> 
```

# iphone - CGContextRef 的问题

> ID：11577703
> 
> 赞同：0
> 
> 时间：2012-07-20T10:40:54.320
> 
> 标签：iphone, ios, uikit, quartz-2d, cgcontext

我正在使用绘图项目，因为我们知道绘制我们需要调用这个函数的东西`UIGraphicsGetCurrentcontext`，所以我也在任何地方调用它，我需要它，无论是清除还是擦除。我正在做的是在每个函数中，我这样称呼它

```
CGContextRef context = UIGraphicsGetCurentContext() 
```

我想知道的是，每当我调用这个函数时，我是否会得到相同的上下文？指针是否指向相同的上下文？

因为我的橡皮擦在某些情况下有效，在某些情况下失败。

下面是我的橡皮擦功能

```
- (void)erase
{
    [m_curImage drawAtPoint:CGPointMake(0, 0)];
    CGContextRef context = UIGraphicsGetCurrentContext(); 
    CGContextClearRect(context, rect); 
} 
```

问候兰吉特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-23T09:08:33.643

您必须创建一个自定义视图并在该方法中编写您的 erase() 方法代码`drawRect`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T18:46:09.407

您只能`UIGraphicsGetCurentContext()`在 drawRect 方法内部使用，在此之外它不会配置有效的上下文。

# c# - WP7 App 中的 XNA 框架组件？

> ID：11577709
> 
> 赞同：0
> 
> 时间：2012-07-20T10:41:14.753
> 
> 标签：c#, windows-phone-7, xna, marketplace

我想再次确认我的这个疑问。还是没有办法体面地退出应用程序？？？我的意思是没有引发和捕获异常。因为最近，我在[这里](http://forums.create.msdn.com/forums/p/92018/551387.aspx)读到现在我们可以在我们的应用程序中使用 XNA 框架 API，所以 Game.Exit() 现在有效。使用它会导致通过App认证吗？

谢谢，阿普尔瓦 :)

# android - CheckBox 在 Android 中显示异常行为

> ID：11577710
> 
> 赞同：-1
> 
> 时间：2012-07-20T10:41:20.130
> 
> 标签：android, android-listview

下面我实际上在滚动列表视图时编写了我的代码，复选框处于其原始位置，任何代码帮助将不胜感激。

```
 cp.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
        // TODO Auto-generated method stub
        cp.setChecked(true);
        cx.setChecked(false);

        ck.setChecked(false);
        int a=1;

        String c=getListView().getItemAtPosition(position).toString();
        updatetable(c, "FULL");
        //Toast.makeText(getApplicationContext(), c+"full", Toast.LENGTH_LONG).show();
        // Toast.makeText(getApplicationContext(), "year", Toast.LENGTH_LONG).show();
    }
});

 cx.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {

        // TODO Auto-generated method stub
        cx.setChecked(true);
        cp.setChecked(false);
        ck.setChecked(false);
        int a=1;
        String c=getListView().getItemAtPosition(position).toString();
        updatetable(c, "CRITICAL");

        //Toast.makeText(getApplicationContext(), c+"ok", Toast.LENGTH_LONG).show();
    }
});

 ck.setOnClickListener(new OnClickListener() {

        public void onClick(View v)  {
            ck.setOnCheckedChangeListener(null);
            // TODO Auto-generated method stub
            ck.setChecked(true);
            cp.setChecked(false);
            cx.setChecked(false);
            int a=1;
    String c=getListView().getItemAtPosition(position).toString();
    updatetable(c, "FINISH");
            //Toast.makeText(getApplicationContext(), c+"fineshed", Toast.LENGTH_LONG).show();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:44:05.940

你的问题不清楚，但我想我有问题。

我认为这不是问题`CheckBox`。我认为您的适配器有问题。

```
public class MyAdapter extends BaseAdapter {
    private List<Something> mList;
    private Context mContext;

    public MyAdapter(Context context, List<Something> list) {
        mContext = context;
        mList = list;
    }

    @Override
    public int getCount() {
        return mList.getSize();
    }

    @Override
    public Object getItem(int position) {
        return mList.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        if (convertView == null) {
            LayoutInflater inflater = mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater.inflate(R.layout.row_layout, null);
        }

        CheckBox checkbox = (CheckBox) convertView.findViewById(R.id.checkbox);
        /* Here you should set your checkbox state */
    }
} 
```

我认为你的问题是`convertView`。

当您向下滚动时`ListView`，弹出的项目不会被破坏，而是被回收。回收的物品以`convertView`. `convertView` **未清理**，因此如果`CheckBox`选中了弹出的项目，则检查了`CheckBox`in `convertView`。

您必须维护一个`List<Boolean> states`保存`CheckBox`所有项目状态的位置。然后：

```
 @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        if (convertView == null) {
            LayoutInflater inflater = mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater.inflate(R.layout.row_layout, null);
        }

        CheckBox checkbox = (CheckBox) convertView.findViewById(R.id.checkbox);
        checkBox.setChecked(states.get(position));
    } 
```

我没有你的代码，所以上面的例子是尽可能通用的。如果您让我们查看代码，我们可以为您提供帮助。

# twitter-bootstrap - Twitter Bootstrap 中的标签无法正常工作？

> ID：11577712
> 
> 赞同：95
> 
> 时间：2012-07-20T10:41:26.943
> 
> 标签：twitter-bootstrap

这是我的代码：

```
<div class="container">
<div>
<h1>Welcome TeamName1</h1>
  asdf
  <hr>
  asdf

</div>
</div> <!-- /container --> 
```

hr 标签似乎没有像我预期的那样工作。它不是画一条线，而是创建一个间隙，如下所示：

> ![在此处输入图像描述](../Images/ffab399cac86070820ba0039a85733d7.png)

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-07-20T13:42:36.523

的css属性`<hr>`是：

```
hr {
  -moz-border-bottom-colors: none;
  -moz-border-image: none;
  -moz-border-left-colors: none;
  -moz-border-right-colors: none;
  -moz-border-top-colors: none;
  border-color: #EEEEEE -moz-use-text-color #FFFFFF;
  border-style: solid none;
  border-width: 1px 0;
  margin: 18px 0;
} 
```

它对应于一条 1px 的水平线，带有非常浅的灰色和 18px 的垂直边距。

并且因为`<hr>`在一个`<div>`没有类的范围内，所以宽度取决于`<div>`

如果您希望`<hr>`全宽，请替换`<div>`为`<div class='row'><div class='span12'>`（使用相应的结束标签）。

如果您期望有所不同，请通过添加评论来描述您的期望。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2017-04-21T03:58:39.953

而不是写

```
<hr> 
```

写

```
<hr class="col-xs-12"> 
```

它将正常显示全宽。

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2015-04-03T08:19:58.133

我通过将 HR 背景颜色设置为黑色来解决这个问题，如下所示：

```
<hr style="width: 100%; color: black; height: 1px; background-color:black;" /> 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2015-09-05T15:10:19.507

这是因为 Bootstrap 的**默认 CSS**是`<hr />`::

```
hr {
    margin-top: 20px;
    margin-bottom: 20px;
    border: 0;
    border-top: 1px solid #eeeeee;
} 
```

它在这两行之间创建了 40px 的间隙

因此，如果您想更改`<hr />`页面中的任何特定边距样式，您可以尝试这样的操作::

```
<hr style="margin-bottom:5px !important; margin-top:5px !important; " /> 
```

如果您想更改`<hr />` 页面中任何特定的外观/其他样式，例如颜色和边框类型或粗细，您可以尝试以下操作：

```
<hr style="border-top: 1px dotted #000000 !important; " /> 
```

对于`<hr />`您页面中的所有人

```
<style>
   hr {
       border-top: 1px dotted #000000 !important;
       margin-bottom:5px !important; 
       margin-top:5px !important;
   }
</style> 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-05-17T09:26:32.907

默认情况下，`hr`Twitter Bootstrap CSS 文件中的元素的上边距和下边距为`18px`. 这就是造成差距的原因。如果您希望间隙更小，则需要调整`hr`元素的边距属性。

在您的示例中，执行以下操作：

```
.container hr {
margin: 2px 0;
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-11-17T12:25:20.647

我认为如果我们添加边框颜色会更好看：透明如下：

```
<hr style="width: 100%; background-color: black; height: 1px; border-color : transparent;" /> 
```

如果您不使边框透明，它将是白色的，我认为这一直都不好。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-11-22T02:49:02.647

我可以通过编辑内联样式来自定义 hrTag：

```
<div class="row"> <!-- You can also position the row if need be. -->
<div class="col-md-12 col-lg-12"><!-- set width of column I wanted mine to stretch most of the screen-->
<hr style="min-width:85%; background-color:#a1a1a1 !important; height:1px;"/>
</div>
 </div> 
```

hrTag 现在更厚更显眼了；它也是一种较深的灰色。引导代码实际上非常灵活。正如上面的代码片段所示，您可以使用内联样式或您自己的自定义代码。希望这可以帮助某人。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-09-05T07:44:12.030

您可能需要其中之一，以便对应于 Bootstrap 布局：

```
<div class="col-xs-12">
    <hr >
</div>

<!-- or -->

<div class="col-xs-12">
    <hr style="border-style: dashed; border-top-width: 2px;">
</div>

<!-- or -->

<div class="col-xs-12">
    <hr class="col-xs-1" style="border-style: dashed; border-top-width: 2px;">
</div> 
```

如果不包含`DIV`网格元素，布局可能会在不同的设备上停止。

# html - 使一个 DIV 出现，另一个 DIV 消失

> ID：11577714
> 
> 赞同：0
> 
> 时间：2012-07-20T10:41:39.173
> 
> 标签：html, image, dom-events, hidden, area

当我单击图片上的某个区域时，我不知道如何使隐藏的 DIV 出现。

如果隐藏的 DIV 可见，如何在新的 DIV 出现之前使其消失 - 当我单击图片上的另一个可点击区域时。

我的图片上有 7 个可点击区域。

这是我的 HTML 页面的一部分

我刚刚通过测试发现 href JavaScript 不起作用

```
<div class="" > 
  <img src="Pictures/image7.jpg" alt="" width="449" height="436" usemap="#Map" border="0"  />
        <map name="Map" id="Map">

            <area id="MapRegel" alt="Regel" shape="poly"
            coords="0,235,-2,151,185,126,218,141,200,184,111,185,112,234" 
            href="javascript:document.getElementById('MapRegel').onclick = 
            document.getElementById('Regel').style.visibility = 'visible';" />                          

            <area id="MapHakRegel" alt="HakRegel" shape="poly"
            coords="118,284,231,282,261,228,267,168,224,145,203,188,114,187" 
            href="javascript:document.getElementById('MapRegel').onclick = 
            document.getElementById('HakRegel').style.visibility = 'visible';" />

        </map>

        <div class="Hidden" id="Regel">
            <h2>Regeln</h2>
            <p>Är den som låser eller öppnar dörren till skillnad från tryckesfallet som bara håller dörren stängd. 
            Förr fanns uttrycket att man reglar dörren. En symetrisk rektangulär kolv. </p>
        </div>

        <div class="Hidden" id="HakRegel">
            <h2>Tryckesfall (Fallregeln)</h2>   
            <p>Den regel som håller dörren stängd utan att vara låst och är sned till 
            utseende. Regeln är stum och tryckesfallet skjuts undan eller ger vika pga. 
            dess sneda utformning när dörren stängs.</p>
        </div>                  

        <div class="Hidden" id="Tryckesfall"></div>
        <div class="Hidden" id="TryckesRoddare"></div>
        <div class="Hidden" id="CylinderRoddare"></div>
        <div class="Hidden" id="DomsNyckelAvstand"></div>
        <div class="Hidden" id="Stolpe"></div>  
        <script type="text/javascript"> 
            document.getElementByClass('Hidden').onclick = style.visibility = 'hidden';
            document.getElementById('MapRegel').onclick = document.getElementById('Regel').style.visibility = 'visible';
            document.getElementById('MapHakRegel').onclick = document.getElementById('HakRegel').style.visibility = 'visible';
            document.getElementById('MapTryckesfall').onclick = document.getElementById('Tryckesfall').style.visibility = 'visible';
            document.getElementById('MapTryckesRoddare').onclick = document.getElementById('TryckesRoddare').style.visibility = 'visible';
            document.getElementById('MapCylinderRoddare').onclick = document.getElementById('CylinderRoddare').style.visibility = 'visible';
            document.getElementById('MapDomsNyckelAvstand').onclick = document.getElementById('DomsNyckelAvstand').style.visibility = 'visible';
            document.getElementById('MapStolpe').onclick = document.getElementById('Stolpe').style.visibility = 'visible';
        </script>
    </img>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:54:59.197

将 Hidden 类赋予所有 div，然后您可以通过 (使用 Jquery) 隐藏整个 div 类：

```
$('.Hidden').hide(); 
```

这将隐藏所有带有 class="Hidden" 的 div

现在假设您想让 div id="div_1" 默认可见，那么您将添加：

```
$('#div_1').show(); 
```

现在您必须创建可以打开其他 div 的链接，例如：

```
<a href="#div_3" class="open_div">Show div_3</a> 
```

然后在jquery中：

```
 $('.open_div').click(function(){ //when a class="open_div" is clicked
      $('.Hidden').hide(); //hide all divs
      $($(this).attr('href')).show(); //show the id="div_3" div
      return false; //return false so your browser doesn't try to open the link
    }); 
```

希望这可以帮助！

# regex - 从文件中删除包含非英语 (Ascii) 字符的行

> ID：11577720
> 
> 赞同：15
> 
> 时间：2012-07-20T10:42:08.700
> 
> 标签：regex, unix, sed, awk, grep

我有一个文本文件，其中包含来自不同语言（如中文、拉丁文等）的字符

我想删除所有包含这些非英文字符的行。我想包括所有英文字符 (ab)、数字 (0-9) 和所有标点符号。

我如何使用 awk 或 sed 等 unix 工具来做到这一点。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-20T11:10:31.400

Perl 支持`[:ascii:]`字符类。

```
perl -nle 'print if m{^[[:ascii:]]+$}' inputfile 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T14:14:02.967

您可以使用 Awk，前提是您强制使用 C 语言环境：

```
LC_CTYPE=C awk '! /[^[:alnum:][:space:][:punct:]]/' my_file 
```

环境变量`LC_TYPE=C`（或`LC_ALL=C`）强制使用 C 语言环境进行字符分类。它将字符类（ 、 等）的含义更改为`[:alnum:]`仅`[:space:]`匹配 ASCII 字符。

正`/[^[:alnum:][:space:][:punct:]]/`则表达式匹配任何非 ASCII 字符的行。正`!`则表达式之前反转条件。所以只有没有任何非 ASCII 字符的行才会匹配。然后由于没有给出任何操作，默认操作用于匹配行 ( `print`)。

编辑：这也可以用 grep 来完成：

```
LC_CTYPE=C grep -v '[^[:alnum:][:space:][:punct:]]' my_file 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-09-08T07:16:37.780

使用支持 perl 兼容正则表达式的 GNU grep，您可以使用：

```
grep -P '^[[:ascii:]]+$' file 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-20T10:44:53.367

您可以使用`egrep -v`仅返回与模式*不*匹配的行并使用类似`[^ a-zA-Z0-9.,;:-'"?!]`模式的内容（根据需要包含更多标点符号）。

嗯，想想看，双重否定（`-v`和倒置字符类）可能不是那么好。另一种方式可能是`^[ a-zA-Z0-9.,;:-'"?!]*$`.

您也可以只过滤 ASCII：

```
egrep -v "[^ -~]" foo.txt 
```

# android - 从相机拍照后延迟和丢失图片问题

> ID：11577728
> 
> 赞同：0
> 
> 时间：2012-07-20T10:42:39.993
> 
> 标签：android, camera, imageview, uri

我面临从 android 相机拍照然后将其显示给下一个活动的问题。过程正常，但在 10 张图片中，有 1 张图片丢失。

步骤：活动 a 我调用相机并拍照，然后我将其 URI 的活动 b 传递给在图像视图中显示，重复此循环 10 次 1-2 次图片丢失，并且在拍照时观察到 2 秒的延迟和以空白屏幕的形式显示到下一个屏幕的图像视图中。

请检查代码并指导我在这里做错了什么？

**活动一**

```
 @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if(requestCode==CAMERA_IMAGE_CAPTURE && resultCode==Activity.RESULT_OK){

        String[] projection = {
        MediaStore.Images.Thumbnails._ID,  // The columns we want
        MediaStore.Images.Thumbnails.IMAGE_ID,
        MediaStore.Images.Thumbnails.KIND,
        MediaStore.Images.Thumbnails.DATA};
        String selection = MediaStore.Images.Thumbnails.KIND + "="  + // Select only mini's
        MediaStore.Images.Thumbnails.MINI_KIND;

        String sort = MediaStore.Images.Thumbnails._ID + " DESC";

       //At the moment, this is a bit of a hack, as I'm returning ALL images, and just taking the latest one. There is a better way to narrow this down I think with a WHERE clause which is currently the selection variable
       Cursor myCursor = this.getContentResolver().query(MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI, projection, selection, null, sort);

       long imageId = 0l;
       long thumbnailImageId = 0l;
       String thumbnailPath = "";

       try{
        myCursor.moveToFirst();
       imageId = myCursor.getLong(myCursor.getColumnIndexOrThrow(MediaStore.Images.Thumbnails.IMAGE_ID));
       thumbnailImageId = myCursor.getLong(myCursor.getColumnIndexOrThrow(MediaStore.Images.Thumbnails._ID));
       thumbnailPath = myCursor.getString(myCursor.getColumnIndexOrThrow(MediaStore.Images.Thumbnails.DATA));
       }
       finally{myCursor.close();}

        //Create new Cursor to obtain the file Path for the large image

        String[] largeFileProjection = {
        MediaStore.Images.ImageColumns._ID,
        MediaStore.Images.ImageColumns.DATA
        };

        String largeFileSort = MediaStore.Images.ImageColumns._ID + " DESC";
        myCursor = this.getContentResolver().query(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, largeFileProjection, null, null, largeFileSort);
       String largeImagePath = "";

       try{
        myCursor.moveToFirst();

       //This will actually give you the file path location of the image.
       largeImagePath = myCursor.getString(myCursor.getColumnIndexOrThrow(MediaStore.Images.ImageColumns.DATA));
       }
       finally{myCursor.close();}
        // These are the two URI's you'll be interested in. They give you a handle to the actual images
        Uri uriLargeImage = Uri.withAppendedPath(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, String.valueOf(imageId));
        Uri uriThumbnailImage = Uri.withAppendedPath(MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI, String.valueOf(thumbnailImageId));

        Intent next= new Intent(this,AddListing.class);

        next.putExtra("imageUriThumb", uriThumbnailImage.toString());
        next.putExtra("imageUriFull", uriLargeImage.toString());

        startActivity(next);

   }

   } 
```

**活动 B**

```
String uri = bundle.getString("imageUriThumb");
            Uri myThumbUri = Uri.parse(uri);

            try {
                tempBitmap = MediaStore.Images.Media.getBitmap(this.getContentResolver(),myThumbUri);
                imgThumbnail.setImageBitmap(tempBitmap);

                ByteArrayOutputStream bao = new ByteArrayOutputStream();
                tempBitmap.compress(Bitmap.CompressFormat.PNG, 90, bao);

                byte [] ba = bao.toByteArray();
                imageBytesString = Base64.encodeToString(ba, 0);

            } catch (Exception e) {

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T19:24:50.077

我用以下几点结束了这个问题：

我已经在互联网上搜索了这个问题，实际上这些手机没有使用 intent.get("data") 获取图像，这就是我使用上述技术的原因。我已经尝试过使用三星王牌手机、三星 Galaxy 和同样的问题。我想整个三星都不能完美地工作，当你需要一次又一次地拍照时，会有延迟响应:( HTC 等其他手机都可以正常工作。

# oauth - Jmeter OAuth 插件

> ID：11577731
> 
> 赞同：1
> 
> 时间：2012-07-20T10:42:52.853
> 
> 标签：oauth, jmeter

我正在使用 jmeter 执行一些负载测试。此特定测试将记录使用 OAUTH 从 Web 服务获得响应所需的时间。

我添加了 Jmeter Oauth 插件，设置了我的密钥、url 和要发布的数据等，但是我在报告中不断收到错误消息

```
 Response code: Non HTTP response code: java.net.URISyntaxException
    Response message: Non HTTP response message: Expected closing bracket for IPv6 address at index 14 
```

以前有没有人遇到过这个错误，或者有没有人对如何使用 OAUTH 插件有很好的指导？

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T07:04:16.530

当我收到此错误时，问题是我使用 http 为服务器名称或 IP 加上前缀，因此如果您使用例如[http://www.google.com](http://www.google.com)设置服务器名称或 IP 参数，则需要将其替换为 www.google.co .il 即省略http://（可以在http请求的协议值中设置http协议）

# c++ - 哪个是更快的 Hbase 或 Hypertable？

> ID：11577740
> 
> 赞同：0
> 
> 时间：2012-07-20T10:43:46.967
> 
> 标签：c++, nosql

我需要存储数百万条记录，其中所有记录都是唯一的，具有多列。例如

```
eventcode description count
526       blocked     100
5230       xxx         20
.... 
```

并且我在获取计数列上的排序、列上的过滤时需要以下要求。

所以我想到了使用 Hbase，但我用谷歌搜索并知道超表更快。

所以我有点困惑知道它。请帮助我解决这个问题。

注意：我想将 C++ 用于事务（读取、写入）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T18:25:41.120

大免责声明：我为 hypertable 工作。

我们前段时间创建了一个基准测试，您可以在此处阅读：[http](http://hypertable.com//why_hypertable/hypertable_vs_hbase_2/) ://hypertable.com//why_hypertable/hypertable_vs_hbase_2/ 结论：Hypertable 速度更快，通常快两倍。

性能实际上是hypertable成立的原因。那时有些人坐在一起讨论 Google 的 bigtable 架构的开源实现。他们没有就编程语言达成一致（java vs. c++ - 分歧在于性能）。结果，一组创建了 hypertable（一种 C++ 实现），另一组开始研究 hbase（在 java 中）。

如果您不信任基准，那么您将不得不运行自己的基准；这两个系统都是开源的并且可以免费使用。如果您对超表有疑问或在评估时遇到问题，请随时给我发邮件（或使用邮件列表 - 所有问题都会得到解答。）

顺便说一句 - 超表不（还）支持排序。您必须在您的客户端应用程序中实现它。

# linux - rpmbuild hp-be2net emulex 驱动程序

> ID：11577747
> 
> 赞同：0
> 
> 时间：2012-07-20T10:44:19.620
> 
> 标签：linux, driver

我正在尝试在 centos 6.3 上为 HP DL360 G7 Emulex 驱动程序进行 rpmbuild

但它失败了这个错误..有什么想法吗？

```
+ umask 022
+ cd /root/rpmbuild/BUILD
+ cd hp-be2net-4.1.402.6
+ LANG=C
+ export LANG
+ unset DISPLAY
+ export 'EXTRA_CFLAGS=-DVERSION=\"4.1.402.6\"'
+ EXTRA_CFLAGS='-DVERSION=\"4.1.402.6\"'
+ for flavor in default
+ rm -rf obj/default
+ cp -r source obj/default
+ export SRC=/root/rpmbuild/BUILD/hp-be2net-4.1.402.6/obj/default
+ SRC=/root/rpmbuild/BUILD/hp-be2net-4.1.402.6/obj/default
++ '[' default = default ']'
+ make -C /usr/src/kernels/2.6.32-279.1.1.el6.centos.plus.x86_64 modules M=/root/rpmbuild/BUILD/hp-be2net-4.1.402.6/obj/default CONFIG_BE2NET=m
make: Entering directory `/usr/src/kernels/2.6.32-279.1.1.el6.centos.plus.x86_64'
  CC [M]  /root/rpmbuild/BUILD/hp-be2net-4.1.402.6/obj/default/be_main.o
/root/rpmbuild/BUILD/hp-be2net-4.1.402.6/obj/default/be_main.c: In function 'get_rx_page_info':
/root/rpmbuild/BUILD/hp-be2net-4.1.402.6/obj/default/be_main.c:1279: error: 'struct be_rx_page_info' has no member named 'bus'
/root/rpmbuild/BUILD/hp-be2net-4.1.402.6/obj/default/be_main.c: In function 'be_post_rx_frags':
/root/rpmbuild/BUILD/hp-be2net-4.1.402.6/obj/default/be_main.c:1679: error: 'struct be_rx_page_info' has no member named 'bus'
make[1]: *** [/root/rpmbuild/BUILD/hp-be2net-4.1.402.6/obj/default/be_main.o] Error 1
make: *** [_module_/root/rpmbuild/BUILD/hp-be2net-4.1.402.6/obj/default] Error 2
make: Leaving directory `/usr/src/kernels/2.6.32-279.1.1.el6.centos.plus.x86_64'
error: Bad exit status from /var/tmp/rpm-tmp.R3DzsV (%build) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T04:07:43.837

我遇到了同样的问题。HP 尚未为我提供解决方案，因此我开始四处寻找其他可能的解决方案。我发现 Emulex（该卡的制造商）提供了与 RHEL 6.2 兼容的二进制驱动程序，该驱动程序似乎在 RHEL 6.3 中加载良好。

查找 UCNA 以太网驱动程序 - 二进制驱动程序 RPM 套件 [http://www.emulex.com/downloads/emulex/linux/rhel6x/drivers.html](http://www.emulex.com/downloads/emulex/linux/rhel6x/drivers.html)

# mysql - mysql索引以获得更好的选择性能

> ID：11577748
> 
> 赞同：0
> 
> 时间：2012-07-20T10:44:19.610
> 
> 标签：mysql, performance, select, indexing

我不完全理解索引，想要一些精度。

我有一张表，命名为帖子，加班时间可能会变得很大。每个帖子属于一个类别和一种语言，通过 2 列 category_id 和 lang

如果我在 category_id 和 lang 列上创建索引，这是否意味着 post 表将在 mysql 中通过 category_id 和 lang 的“块”进行“组织”/“分类”，从而在我精确时允许更好的数据选择性能我的查询中的 category_id 和/或 lang...？

那么应该创建哪种类型的索引呢？

我希望我在这里足够清楚......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:47:24.487

索引所做的是创建一个“影子”表，仅包含索引值，因此它只需要查看索引即可找到您要查找的内容。

如果您正在执行查询，则使用如下所示的位置：

```
WHERE zipcode = 555 AND phone = 12345678 
```

您将需要有关邮政编码和电话的索引。

如果查询只是：

```
WHERE zipcode = 555 
```

您只需要索引邮政编码。

# qt - 使用 QML 文档库 (Qt Mobility) 进行过滤

> ID：11577749
> 
> 赞同：0
> 
> 时间：2012-07-20T10:44:22.663
> 
> 标签：qt, filter, qml, qt-mobility

我只想过滤一位艺术家的专辑，但没有显示任何内容。

我的代码是：

SelectArtistPage.qml：

```
import QtQuick 1.1
import com.nokia.meego 1.0
import QtMobility.gallery 1.1

Page
{
    id: selectArtistPage
    tools: backtoolbar
    property string selectedartist

    ListView
    {
        id: galleryView
        anchors.fill: parent
        clip: true
        model: artistModel
        delegate: Item
        {
            height: 60
            width: parent.width
            Button
            {
                height: 50
                width: parent.width - 20
                text: (artist != "") ? artist : "(unknown artist)"
                onClicked:
                {
                    selectedartist = (text != "(unknown artist)") ? text : ""
                    selectAlbumPageLoader.source = "SelectAlbumPage.qml"
                    pageStack.push(selectAlbumPageLoader.item)
                }
            }
        }
    }

    DocumentGalleryModel
    {
        id: artistModel
        rootType: DocumentGallery.Artist
        properties: ["artist"]
    }
} 
```

SelectAlbumPage.qml：

```
import QtQuick 1.1
import com.nokia.meego 1.0
import QtMobility.gallery 1.1

Page
{
    id: selectAlbumPage
    tools: backtoolbar
    property string selectedalbum

    ListView
    {
        id: galleryView
        anchors.fill: parent
        clip: true
        model: albumModel
        delegate: Item
        {
            height: 60
            width: parent.width
            Button
            {
                height: 50
                width: parent.width - 20
                text: (albumTitle != "") ? albumTitle : "(unknown album)"
                onClicked:
                {
                    selectedalbum = (text != "(unknown album)") ? text : ""
                    // here should be launching the last page
                }
            }
        }
    }

    DocumentGalleryModel
    {
        id: albumModel
        rootType: DocumentGallery.Album
        properties: ["albumTitle", "artist"]
        filter: GalleryEqualsFilter
        {
            property: "artist"
            value: selectedartist
        }
    }
} 
```

当我在 SelectArtistPage 中选择艺术家时，会打开另一个页面，没有绘制带有专辑名称的按钮。如果我删除过滤器，则会显示所有专辑。

我究竟做错了什么？我正在为 Maemo 使用 Qt Mobility 1.2 包（我正在 N900 上进行测试）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T12:45:47.863

这似乎是 Maemo Qt Mobility 中的一个错误，正如我在这里写的：[http ://talk.maemo.org/showpost.php?p=1254495&postcount=112](http://talk.maemo.org/showpost.php?p=1254495&postcount=112)

# hadoop - 在 GROUP BY 中计算 PIG 查询和 MySql 查询结果的差异

> ID：11577750
> 
> 赞同：1
> 
> 时间：2012-07-20T10:44:30.087
> 
> 标签：hadoop, apache-pig, sqoop

我的 PIG 查询如下

* * *

```
emp = LOAD 'hdfs://master:9000/hrms/DimEmployee' AS  (EmployeeID,OrganizationID,EmploymentType);
grouped = group emp by (OrganizationID, EmploymentType);
AggEmploymentType = FOREACH grouped GENERATE group.OrganizationID, group.EmploymentType,COUNT(emp.EmployeeID) as cnt;
DUMP AggEmploymentType; 
```

* * *

下面给出了上述猪查询的分步说明。

1.  从制表符分隔的 HDFS 文件中加载 100097 条记录。
2.  按公司记录分组，就业状态
3.  按 EmployeeID 统计记录。
4.  转储输出。

执行上述查询后，**Pig shell 说，成功读取了 100115 条记录。**

在 Pig 查询成功执行后，我得到以下三个问题：

1.  为什么 pig 准备的记录多于 HDFS 中可用的记录 (100115>100097)
2.  为什么有警告消息“ACCESSING_NON_EXISTENT_FIELD 27 TIMES”
3.  当我在 MySQL 中按查询运行相同的组时，结果的计数差异为 9。

**请尽快解决我的问题。我的猪，hadoop 项目取决于您的及时响应。由于上述问题，我从过去 5 天开始感到震惊**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:22:39.887

我不认为您正在加载额外的记录并且您也正在访问不存在的字段错误是巧合。当您加载并且没有足够的列时，会显示不存在的字段错误。例如，如果您看到如下行，您可能会收到错误消息：`hello,world`当您预期 3 列时。

**建议：**另外需要注意的是`COUNT(x)`不计算为空的项目。尝试换掉`COUNT(emp.EmployeeID)`. 考虑空值。`COUNT_STAR(emp.EmployeeID)``COUNT_STAR`

**建议：** Pig 在没有字段时会做的一件事就是在其中放入空值。我建议您在`GROUP`删除带有空值的记录（以及可能的“坏”记录）之前添加一个过滤器。

```
emp = FILTER emp BY EmployeeID IS NOT NULL AND 
                    OrganizationID IS NOT NULL AND
                    EmploymentType IS NOT NULL; 
```

# magento - Magento：添加产品：等级价格

> ID：11577755
> 
> 赞同：0
> 
> 时间：2012-07-20T10:44:44.487
> 
> 标签：magento

我想知道在将产品添加到目录时，是否有人可以指导我了解 Tier Price 部分的目的。什么是层级价格？页面的这一部分是如何工作的？

Magento 文档有点有限，不知道在哪里可以找到这些信息，并且希望掌握通用概念和细节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:53:21.097

等级价格非常容易 - 一旦您了解它们。对 Magento 一开始扔给你的所有事情全神贯注可能会让人不知所措，并使你过度思考一些事情。因此，希望我可以为您解释一下 Magento 的等级价格。

分层价格允许您根据用户想要购买的数量（和客户组）拥有多个价格。例如：

数量 | 价格
   1 | 10 美元
   5 | 12 美元
   10 | 13 美元

客户组（如果您不知道它们是什么）允许您将不同的客户分组在一起，并为每个组设置不同的规则和设置 - 例如单独的价格层。例如，我的公司是一家 B2B 供应级公司，为了在我们的网站上拥有一个帐户，您必须是我们的经过验证的经销商，或者是在我们行业开展业务的销售组织的成员。如果他们的客户能够登录我们的网站并查看他们（作为我们的分销商）支付的费用，我们的客户会生气。为了纠正这种情况，我们为包含 MSRP 的“未登录”客户组显示了一个价格等级。我们也不想让客户在弄清楚他们实际支付的费用时过于努力，所以我们有一个“登录”

我们还为在特定时间段内与我们开展一定金额业务的“奖励”计划客户提供了第三个价格等级 - 但这只是如何使用它的另一个示例。

希望这会有所帮助。如果您还有其他问题，请告诉我。

# forms - 表单助手选择框输出不正确

> ID：11577756
> 
> 赞同：0
> 
> 时间：2012-07-20T10:44:47.503
> 
> 标签：forms, cakephp, select, cakephp-2.1

我正在使用 cakephp 2.1，我决定将选择框移出一个视图并将其粘贴到另一个视图中。然而，虽然它以一种形式工作，但在新的形式中却没有。我直接开门见山：

```
<?php 
echo $this->Form->create();
echo $this->Form->input('Basket.delivery', array('options' => array( '13' => 'United Kingdom (£13)', '45' => 'European Union (£45)', '75' => 'International (£75)'))); 
echo $this->Form->end(); ?> 
```

输出：

```
<select name="data[Basket][delivery]" id="BasketDelivery">
<option value="13"></option>
<option value="45"></option>
<option value="75"></option>
</select> 
```

现在为什么会这样？？？:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:26:44.507

您必须使用[货币特殊字符代码](http://webdesign.about.com/od/localization/l/blhtmlcodes-cur.htm)才能在下拉列表中显示属于[ISO 8859-1](http://www.w3schools.com/tags/ref_entities.asp)标准的选项。

```
<?php 
echo $this->Form->create();
echo $this->Form->input('Basket.delivery', array('options' => array( '13' => 'United Kingdom (&pound;13)', '45' => 'European Union (&pound;45)', '75' => 'International (&pound;75)'))); 
echo $this->Form->end(); ?> 
```

如果您也遇到表单本身的问题，您可以尝试将模型名称传递给`Form->create()`函数：

```
<?php 
    echo $this->Form->create(Basket);
    ...... 
```

阅读[有关 FormHelper 的 CakePHP 书籍条目](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html)。也有[API](http://api20.cakephp.org/class/form-helper)。请询问它是否不适合您。

# nhibernate - nibernate调用mysql存储过程

> ID：11577764
> 
> 赞同：0
> 
> 时间：2012-07-20T10:45:11.647
> 
> 标签：nhibernate, stored-procedures

我有一个带有两个返回 int 参数的存储过程。

我的mapping.hbm.xml

```
 <sql-query name="CreateAttribute">
        <query-param name="idAttrType" type="int"/>
        <query-param name="idSystemUser" type="int"/>
        call CreateAttribute :idAttrType,:idSystemUser
    </sql-query> 
```

C# 用法

```
 var t = session.GetNamedQuery("CreateAttribute");
    t.SetInt32("idAttrType", 12);
    t.SetInt32("idSystemUser",int.Parse(id));
    var result = t.List(); 
```

然后我收到以下信息：

[SQL: call CreateAttribute ?p0,?p1] ---> MySql.Data.MySqlClient.MySqlException: 你的 SQL 语法有错误；

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:44:37.910

Should it not be:-

```
 <sql-query name="CreateAttribute">
        <query-param name="idAttrType" type="int"/>
        <query-param name="idSystemUser" type="int"/>
        call CreateAttribute(:idAttrType,:idSystemUser);
    </sql-query> 
```

Notice the braces around the params.

**edit** run this against your MySql database, does it run?

```
call CreateAttribute(0,0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T13:32:24.280

修改调用如下 SELECT call CreateAttribute(0,0); - 有效

现在的新映射是

```
 <sql-query name="CreateAttribute">
       <query-param name="idAttrType" type="int"/>
       <query-param name="idSystemUser" type="int"/>
       select CreateAttribute(:idAttrType,:idSystemUser);
    </sql-query> 
```

# javascript - 我的 html 代码中是否有任何错误。它没有按预期生成条形图

> ID：11577771
> 
> 赞同：0
> 
> 时间：2012-07-20T10:45:28.843
> 
> 标签：javascript, html, html5-canvas

全部，这里都是我的 html 代码，当我将它声明为单个数据时，它可以正常工作。但是当我将它声明为二维数组时。它不工作。有什么问题。谁能帮我。这是有错误的代码

```
<!doctype html>
<html>
    <head>
        <script type="text/javascript">
            window.onload=function()
            {
                var canvas=document.getElementById('mycanvas');
                var ctx=canvas.getContext('2d');
                var value=[[10,30,40,60,80],[10,20,30,40,50,90]];
                var width=50;
                var currx=30;

                var i = 0, j;
                for(j=0;j<=1;j++)
                {
                var interval = setInterval(function(){

                    if (i == value[j].length)
                    {
                        clearInterval(interval);
                        return;
                    }
                    var h=value[j][i];
                    ctx.fillStyle="grey";
                    ctx.fillRect(currx+2,canvas.height-h+1,width+2,h+2);
                    ctx.fillStyle="red";
                    ctx.fillRect(currx,canvas.height-h,width,h);                    
                    currx+=60;  
                    i++;
                }, 2000);
                }

            };
        </script>
    </head>
    <body>
        <canvas id="mycanvas" height="400" width="400" style="border:1px solid #c3c3c3;">
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:06:55.447

这是更改的代码。测试一下。。

```
<script type="text/javascript">
    window.onload=function()
    {
        var canvas=document.getElementById('mycanvas');
        var ctx=canvas.getContext('2d');
        var value=[[10,30,40,60,80],[10,20,30,40,50,90]];
        var width=50;
        var currx=30;
        var i = 0, j;
        for(j=0;j<=1;j++)
        {
        var interval = setInterval(function(){

            if (j == value[i].length)
            {
                clearInterval(interval);
                return;
            }

            var h = value[i][j];
            ctx.fillStyle="grey";
            ctx.fillRect(currx+2,canvas.height-h+1,width+2,h+2);
            ctx.fillStyle="red";
            ctx.fillRect(currx,canvas.height-h,width,h);                    
            currx+=60;  
            i++;
        }, 2000);
        }

    };
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:06:16.690

在您的代码中发生错误`value[j] is undefined`是因为循环结束后`j`变量评估为值。但是数组的长度是2。使用下一个代码作为示例来避免这个麻烦。`3``for``value`

```
<!doctype html>
<html>
    <head>
        <script type="text/javascript">
        window.onload=function() {
            var canvas=document.getElementById('mycanvas');
            var ctx=canvas.getContext('2d');
            var graphInfo=[{data:[10,30,40,60,80,10],color:'red'},{data:[10,20,30,40,50,90],color:'grey'}];
            var width=45;

            function getFunctionForTimeout(j){
                var i=0,currx=30,info=graphInfo[j],x5=j*5;
                var fTimeout=function(){
                    var h=Math.max(info.data[i]-x5,0);
                    ctx.fillStyle=info.color;
                    ctx.fillRect(currx+x5,canvas.height-h,width,h);                    
                    currx+=60;  
                    i++;
                    if(i<info.data.length)setTimeout(fTimeout,2000);
                };
                return fTimeout;
            }

            for(var j=graphInfo.length-1;j>=0;j--) {
                setTimeout(getFunctionForTimeout(j),2000);
            }
        };
        </script>
    </head>
    <body>
        <canvas id="mycanvas" height="400" width="400" style="border:1px solid #c3c3c3;">
    </body>
</html> 
```

# raphael - 拖动对象时出现发光问题

> ID：11577773
> 
> 赞同：2
> 
> 时间：2012-07-20T10:45:32.443
> 
> 标签：raphael

我有一个矩形，它在 mousedown 事件时发光，并且在 mouseup 事件时发光消失。问题是当我拖动矩形时，画布上仍然存在发光！

为了清楚起见，这是我的代码：

```
window.onload = function(){
        var paper = new Raphael("holder",500,500);

        var myRect = paper.rect(200,200,200,100,10);
        myRect.attr({
            fill: "#999",
            stroke: "#555",
            'stroke-width': 5
        });

        myRect.mousedown(function(){
                this.g = myRect.glow();
            }
        );
        myRect.mouseup(function(){
                this.g.remove();
        });
        var start = function(){
            this.ox = this.attr('x');
            this.oy = this.attr('y');
        },
        move = function(dx,dy){
            var att = {x:this.ox+dx,y:this.ox+dy};
            this.attr(att);
        },
        up = function(){
            //
        };
        myRect.drag(move,start,up);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T10:56:49.867

您可以移除对象的辉光`start`并再次将其应用到 上`up`。这样，当您拖动对象时，阴影将不可见，但在您放下对象时会出现。

这是您的示例的**[小提琴](http://jsfiddle.net/bvUJK/1/)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T15:35:23.790

首先，你不应该`this`在匿名函数中使用，因为它的作用域`this`只是在那里可用。

其次，您不需要`myRect.mousedown`并且`myRect.mouseup`因为您处理那些我们在您的`myRect.drag`(`start`和`up`)中的回调

所以我给你做了一个[**小提琴**](http://jsfiddle.net/GztWJ/)，你可以看到它在工作。

**PS**定位似乎还有另一个错误：当您拖动几次时，矩形会远离光标。

# android - 如何在android中使用View Stub

> ID：11577777
> 
> 赞同：69
> 
> 时间：2012-07-20T10:45:50.183
> 
> 标签：android, viewstub

我想在android中使用ViewStub，所以请帮助我。我创造了

```
ViewStub stub = new ViewStub;
View inflated = stub.inflate(); 
```

如何以编程方式使用它？

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2012-07-20T11:06:15.553

就像[文档](http://developer.android.com/reference/android/view/ViewStub.html)说的那样，`ViewStub`是一个`View`懒惰的膨胀。

`ViewStub`您可以像这样在 XML 文件中声明 a ：

```
 <ViewStub android:id="@+id/stub"
           android:inflatedId="@+id/subTree"
           android:layout="@layout/mySubTree"
           android:layout_width="120dip"
           android:layout_height="40dip" /> 
```

该`android:layout`属性是对 的引用`View`，它将在调用`inflate()`. 所以

```
ViewStub stub = (ViewStub) findViewById(R.id.stub);
View inflated = stub.inflate(); 
```

当该方法`inflate()`被调用时，`ViewStub`从其父级中移除并替换为右边`View`（`mySubTree`布局的根视图）。

如果您想以编程方式执行此操作，那么您的代码应该类似于：

```
ViewStub stub = new ViewStub(this);
stub.setLayoutResource(R.layout.mySubTree);
stub.inflate(); 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2015-05-27T11:58:03.323

只需使用 ViewStub 来提高渲染布局的效率。通过使用 ViewStub，可以手动创建视图，但不能将其添加到视图层次结构中。在运行时，可以很容易地被充气，而 ViewStub 被充气时，viewstub 的内容会被viewstub 中定义的布局所取代。

activity_main.xml 我们定义了viewstub，但没有先创建。![在此处输入图像描述](../Images/718f5df1e3663579a6e51a6b212e1ba5.png)

简单的例子可以更好地理解，

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/content"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >
    <Button
        android:id="@+id/btn1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="create the view stub" />
     <Button
        android:id="@+id/btn2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Hide the stub." />

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1" >

        <ViewStub
            android:id="@+id/stub_import"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:inflatedId="@+id/content_import"
            android:layout="@layout/splash" />
    </RelativeLayout>
</LinearLayout> 
```

在运行时，当我们膨胀时，内容将被替换为视图中定义的布局。

```
public class MainActivity extends Activity {

    Button b1 = null;
    Button b2 = null;

    ViewStub stub = null;
    TextView tx = null;

    int counter = 0;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        b1 = (Button) findViewById(R.id.btn1);
        b2 = (Button) findViewById(R.id.btn2);
        b1.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                if (stub == null) {     
                    stub = (ViewStub) findViewById(R.id.stub_import);
                    View inflated = stub.inflate();
                    tx = (TextView) inflated.findViewById(R.id.text1);
                    tx.setText("thanks a lot my friend..");
                } 

            }
        });

        b2.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                if (stub != null) {
                    stub.setVisibility(View.GONE);
                }

            }
        });

    } 
```

![在此处输入图像描述](../Images/05f477f24809d761fa1fc5836396daf9.png)

所以，让我们再看看视图层次结构，

![在此处输入图像描述](../Images/c127672dba07163b36dc5c4206409cd1.png)

当我们对viewstub进行膨胀时，它将从视图层次结构中移除。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-03-24T09:27:38.373

这是`ViewStub`在运行时显示/隐藏和更改数据的示例

**activity_main.xml**

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <Button
        android:id="@+id/buttonShow"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Show View Stub"/>

    <Button
        android:id="@+id/buttonHide"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Hide View Stub"/>

    <ViewStub
        android:id="@+id/viewStub"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout="@layout/layout_of_view_stub"
        />

</LinearLayout> 
```

**layout_of_view_stub.xml**

```
<TextView
    android:id="@+id/textInViewStub"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    />

<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="ViewStub Button"
    /> 
```

**MainActivity.java**

```
public class MainActivity extends AppCompatActivity {
    private ViewStub viewStub;
    private Button buttonShow;
    private Button buttonHide;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        buttonShow = findViewById(R.id.buttonShow);
        buttonHide = findViewById(R.id.buttonHide);
        buttonShow.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                showViewStub();
            }
        });

        buttonHide.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                hideViewStub();
            }
        });
    }

    private void showViewStub() {
        if (viewStub == null) {
            viewStub = findViewById(R.id.viewStub);

            // If you want to change data of ViewStub at runtime, you can do like this
            View inflatedView = viewStub.inflate();
            TextView textViewInViewStub = inflatedView.findViewById(R.id.textInViewStub);
            textViewInViewStub.setText("ABC");
        }
        viewStub.setVisibility(View.VISIBLE);
    }

    private void hideViewStub() {
        if (viewStub == null) {
            return;
        }
        viewStub.setVisibility(View.GONE);
    }
} 
```

# php - PHP 图片上传 - 发现错误

> ID：11577779
> 
> 赞同：0
> 
> 时间：2012-07-20T10:45:58.810
> 
> 标签：php, mysql

我的 PHP 图片上传代码有一个小问题，我没有将正确的文件名保存到我的 MySQL 数据库中。

请告诉我我做错了什么。

**PHP**：

```
// Upload File to Directory
$code = md5(time());
$image = $_FILES['userfile']['name'];
$imagename = $code.$image;
$uploaddir = '../_gallery/' . $imagename;
$uploadfile = $uploaddir . basename($_FILES['userfile']['name']);
move_uploaded_file($_FILES['userfile']['tmp_name'], $uploadfile); 
```

**MySQL查询**：

```
$sql="UPDATE b_events 
      SET ename = '$event_name', 
          edescription = '$event_description', 
          edate = '$event_date', 
          etime = '$event_time', 
          ecost = '$event_cost', 
          eimage = '$imagename' 
      WHERE id = '$update'";
$result=mysql_query($sql); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:52:53.007

您需要将此名称插入数据库，因为您使用此名称将文件上传到目录

或通过为新变量赋值

```
$sql="UPDATE b_events 
          SET ename = '$event_name', 
              edescription = '$event_description', 
              edate = '$event_date', 
              etime = '$event_time', 
              ecost = '$event_cost', 
              eimage = '$uploadfile' 
        WHERE id = '$update'"; 
```

或者

```
 $file_name =basename($_FILES['userfile']['name'];

$sql="UPDATE b_events 
          SET ename = '$event_name', 
              edescription = '$event_description', 
              edate = '$event_date', 
              etime = '$event_time', 
              ecost = '$event_cost', 
              eimage = '$file_name' 
        WHERE id = '$update'"; 
```

# android - 将 CImg 库添加到 android NDK（用于图像处理）

> ID：11577780
> 
> 赞同：1
> 
> 时间：2012-07-20T10:46:11.963
> 
> 标签：android, c, image-processing, android-ndk, cimg

如何将 CImg 库添加到 android NDK 中以便进行图像处理？提前感谢您的宝贵建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T15:30:26.297

CImg 是一个只有头文件的库，所以你可以写

```
#include "cimg.h" 
```

在您的代码中的某处。如果它无法为 Android 编译，您将需要自己修复它或寻找其他解决方案，即[FreeImage。](http://freeimage.sourceforge.net)

有关详细信息，请参阅演示幻灯片：http: [//cimg.sourceforge.net/CImg_slides.pdf](http://cimg.sourceforge.net/CImg_slides.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-19T09:47:07.447

创建在 Android 中使用 CImg 的简单示例：[https ://github.com/tttzof351/CImgAndroid](https://github.com/tttzof351/CImgAndroid)

# ruby - 如何在heroku中运行我的ruby文件？

> ID：11577781
> 
> 赞同：0
> 
> 时间：2012-07-20T10:46:12.510
> 
> 标签：ruby, heroku

对不起，如果我不能让你理解，但这就是我理解的方式，也是我可以告诉你的方式。我是 ruby​​ 的新手，现在我已经学到了一些，并且我已经编写了一个 ruby​​ 代码。它实际上是从我用 ruby​​ 完成的表单访问储藏室内容管理系统。我使用了 sinatra，所以我将样式表文件保存在公用文件夹中，同样我有一个名为 storage_room_gem 的文件夹，我必须将其保存在我的代码所在的目录中。另一件事是我的代码写入 html 文件并显示 html文件。现在我在我的机器上运行代码并且运行良好。但我尝试使用 heroku 运行，它显示 H10 错误。我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T21:25:32.497

通过发出命令

```
heroku logs --app <your appname here> 
```

你可以看到日志。错误应该列在那里，以及堆栈跟踪。如果您发布它，它可以更轻松地帮助调试您的代码。以下是有关 heroku 日志的更多信息的链接：[https ://devcenter.heroku.com/articles/logging#log_retrieval](https://devcenter.heroku.com/articles/logging#log_retrieval)

此外，您可以使用工头在类似 Heroku 的环境中本地运行它。通过在本地运行，您可以使用更多工具来调查错误。

这是有关工头的更多信息的链接：[https ://devcenter.heroku.com/articles/procfile/#developing_locally_with_foreman](https://devcenter.heroku.com/articles/procfile/#developing_locally_with_foreman)

# sql - 如何在SQL中找出表的依赖关系

> ID：11577783
> 
> 赞同：1
> 
> 时间：2012-07-20T10:46:29.890
> 
> 标签：sql

有没有办法找出表的依赖关系。我的意思是说哪个存储过程正在影响表的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:54:01.277

试试这个命令：

```
SELECT DISTINCT so.name
 FROM syscomments sc
 INNER JOIN sysobjects so ON sc.id=so.id
 WHERE sc.TEXT LIKE '%tablename%'
 ----Option 2
 SELECT DISTINCT o.name, o.xtype
 FROM syscomments c
 INNER JOIN sysobjects o ON c.id=o.id
 WHERE c.TEXT LIKE '%tablename%' 
```

# solr - carrot2 Workbench and filter Query fq

> ID：11577789
> 
> 赞同：0
> 
> 时间：2012-07-20T10:46:51.250
> 
> 标签：solr, workbench, carrot2

i need to add [clusteringComponent](http://wiki.apache.org/solr/ClusteringComponent) from solr to my application. For tuning the clusteringComponent i use the Carrot2 workbench, which is very useful to find out what ar the right parameters. The point is: i only like to analyse / cluster new data, which is added at the past 24 hours to the solr/lucene index. For that usually i use an timestemp filed on querytime, like:

```
....&fq=timestemp:[NOW-24HOUR TO NOW] 
```

The question is: is there a way to add this filter query to the carrot2 workbench as an search parameter?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T11:43:43.503

I just checked that currently there is no way to pass extra Solr parameters from the production releases of Carrot2 Workbench. I've already [added such a feature](http://issues.carrot2.org/browse/CARROT-943), it is available in [development builds of Carrot2 Workbench](http://download.carrot2.org/head/).

If you'd like to stick with production releases of Carrot2, a possible workaround may be configuring the extra fq parameter directly in your Solr request handler.

# joomla - 在 Joomla 2.5 的组件（前端部分）中创建类似“创建文章”的表单

> ID：11577791
> 
> 赞同：1
> 
> 时间：2012-07-20T10:46:58.017
> 
> 标签：joomla, components

任何人都知道如何创建一个表单，就像在 com_content 组件中的“创建文章”中一样。基本上我想在我的组件前端部分制作一个表单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:40:48.903

您最好的选择是下载一个表单模块并将其嵌入到文章中。

检查这 2 个类别，看看哪个扩展程序适合您的需求。

[http://extensions.joomla.org/extensions/contacts-and-feedback/forms](http://extensions.joomla.org/extensions/contacts-and-feedback/forms)

[http://extensions.joomla.org/extensions/contacts-and-feedback/contact-forms](http://extensions.joomla.org/extensions/contacts-and-feedback/contact-forms)

一旦你有了一个模块，通过输入一个而不是选择一个来给它一个自定义位置，然后转到你的文章并使用以下代码：

```
{loadposition xxx} 
```

希望这可以帮助。

# c++ - Qt QComboBox - 未按预期更改当前索引

> ID：11577793
> 
> 赞同：1
> 
> 时间：2012-07-20T10:47:08.120
> 
> 标签：c++, qt, user-interface, combobox, refresh

我想在打开编辑器时选择组合框中的给定项目，以及加载应该在编辑器中更新的给定数据时。组合框没有按预期工作！

当我打开窗口时，我有这些行来选择给定的项目：

```
normBox = new QComboBox(page1);
gridBox->addWidget(normBox, 2, 1, 1, 1);
QStringList normsLst;
normsLst.append(tr("sum"));
normsLst.append(tr("maxF"));
normsLst.append(tr("sumF"));
setComboBoxItems(normsLst, m_normBox);
m_normBox->setCurrentIndex(0); 
```

但是当我创建编辑器时，组合框中不显示第一项“总和”。

然后，我实现了我的“加载”功能，它应该在界面中加载保存的数据，并以复习结束：

```
normBox->setCurrentIndex(model->getNormIdx()); 
```

其中模型具有准确的成员 normIdx。

如何使用 Qt 在组合框中实现正确的选择？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T11:48:04.473

也许您创建了一个组合框，然后设置另一个组合框的当前索引？

```
normBox = new QComboBox(page1);
...
m_normBox->setCurrentIndex(0); 
```

什么是`setComboBoxItems(normsLst, m_normBox)`？我在 Qt 文档中没有找到这个函数（带有两个参数）。

此代码应该可以工作：

```
QComboBox* combo = new QComboBox;

QStringList list;
list << "sum" << "maxF" << "sumF";

combo->addItems(list);
combo->setCurrentIndex(0); 
```

# android - 覆盖普通屏幕设备的“布局”文件夹布局

> ID：11577794
> 
> 赞同：0
> 
> 时间：2012-07-20T10:47:09.570
> 
> 标签：android, layout, screen

我为 hdpi 设备实现了所有布局文件。并将它们放在“布局”中。现在我在普通屏设备上测试，有一些屏幕我急需更换，因为没有出现必填字段（因为屏幕小）。

我所做的是创建一个名为“layout-normal”的文件夹并将我的布局文件的副本放在那里，并在副本中减少所有内容以使其适合屏幕。现在我有两个问题，什么都不懂。

1.  两个文件都指向同一个源 - 当我打开它们时，我没有得到 2 个文件，但只有 1 个文件经过我的修改。

2.  在普通屏幕设备上运行它，它仍然看起来像一开始。

请帮忙 ：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:51:29.683

layout-normal 和 just layout 是一样的。这只是默认布局

参考：安卓开发者网站

```
res/layout/my_layout.xml             // layout for normal screen size ("default")
res/layout-small/my_layout.xml       // layout for small screen size
res/layout-large/my_layout.xml       // layout for large screen size
res/layout-xlarge/my_layout.xml      // layout for extra large screen size
res/layout-xlarge-land/my_layout.xml // layout for extra large in landscape orientation

res/drawable-mdpi/my_icon.png        // bitmap for medium density
res/drawable-hdpi/my_icon.png        // bitmap for high density
res/drawable-xhdpi/my_icon.png       // bitmap for extra high density 
```

..

```
Size    small   Resources for small size screens.
normal  Resources for normal size screens. (This is the baseline size.)
large   Resources for large size screens.
xlarge  Resources for extra large size screens. 
```

# mysql - MySQL如何查询排序的日期文本

> ID：11577795
> 
> 赞同：0
> 
> 时间：2012-07-20T10:47:09.550
> 
> 标签：mysql

我有一个表，其中有一个 TEXT 列，如下所示：

```
0-4 mėn
5-12 mėn
1-3 metai
4-6 metai
7 metai ir daugiau 
```

文本是立陶宛语。现在数据库的设计使其将值保存为 TEXT，这非常糟糕，但是我需要查询它，以便对数据进行排序。

我写了这个查询：

```
SELECT DISTINCT `Age`, 
SUBSTRING_INDEX(Age, " ", -1) as `AgePrefix`, 
SUBSTRING_INDEX(Age, " ", 1) as `AgeValue` 
FROM `suoPage` 
ORDER BY `AgePrefix`, `AgeValue` 
```

它可以满足我的需要，但问题是“7 metai ir daugiau”。SUBSTRING_INDEX 获取它的 AgePrefix 为“daugiau”，因此它显示为第一条记录。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:09:53.507

出于排序目的，您需要在第一个空格之后提取整个字符串，您可以将`SUBSTRING`函数用作：

```
SELECT DISTINCT `Age`, 
       SUBSTRING(Age, LOCATE(" ", Age)) as `AgePrefix`, 
       SUBSTRING_INDEX(Age, " ", 1) as `AgeValue` 
FROM `suoPage` 
ORDER BY `AgePrefix`, `AgeValue` 
```

# iphone - Facebook SDK 和 Parse 用户身份验证

> ID：11577798
> 
> 赞同：2
> 
> 时间：2012-07-20T10:47:21.510
> 
> 标签：iphone, facebook, ios5, oauth, facebook-ios-sdk

我已经设置了一个应用程序来使用 Parse.com 和 Facebook SDK 进行用户身份验证。

无论如何，在 Facebook 应用中心或其他任何地方我都可以找到使用 Facebook 设置的用户。我可以在 Parse 中看到基本的身份验证信息，但是如何找到 Facebook 用户请求的信息，即个人资料信息、电子邮件地址等，然后通过电子邮件发送/使用？

谢谢

# ios5 - 删除 UIManagedDocument 的正确方法

> ID：11577800
> 
> 赞同：3
> 
> 时间：2012-07-20T10:47:32.043
> 
> 标签：ios5, uimanageddocument

我的应用程序中有一个功能，用户可以通过单击按钮重置应用程序上的所有内容。此时，我没有尝试删除所有 Core Data 关系（Cascade Delete）和其他复杂情况，而是决定使用这段代码实际删除整个 UIManagedDocument

```
-(void)cleanUpDocument
{
   [[NSFileManager defaultManager] removeItemAtPath:[self.document.fileURL path] error:nil];
} 
```

这应该删除我假设的文档？但它有时会引发错误。奇怪的是，当我下次尝试重新创建文档时，我收到一条错误消息，提示“无法创建文件，文件已存在”。我用来创建文档的代码是这样的：-

```
 if (![[NSFileManager defaultManager] fileExistsAtPath:[self.document.fileURL path]]) {
    [self.document saveToURL:self.document.fileURL
            forSaveOperation:UIDocumentSaveForCreating
           completionHandler:nil]
     } 
```

我的问题是：- 删除/删除整个 UIManagedDocument 并在下次成功登录时重新开始的最佳/正确方法是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:50:01.917

我刚遇到同样的问题，一开始完全尝试了你的方法，只是遇到了类似的错误。据我所知，删除整个 UIManagedDocument 并不是最好的（或至少没有必要），而只是删除底层的持久存储（当然，同时保持这个 managedObjectContext 同步）。

这个答案对我有用：[https ://stackoverflow.com/a/8467628/671915](https://stackoverflow.com/a/8467628/671915)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-07T14:07:56.053

问题是您正在删除文件，而某些对象仍然持有对它的引用并保持打开状态。

正确的解决方案是这样做：

```
[document closeWithCompletionHandler:^(BOOL success){
    if([[NSFileManager defaultManager] fileExistsAtPath:[document.fileURL path]]){
        [[NSFileManager defaultManager] removeItemAtURL:document.fileURL error:nil];
    } 
```

# mysql - 计算序列中日期的总和（1/天，一个接一个）

> ID：11577804
> 
> 赞同：1
> 
> 时间：2012-07-20T10:47:58.197
> 
> 标签：mysql

我想编写一个查询，计算从今天开始并按时间倒退的顺序（即找出链断裂前连续多少天）。相同的日期在数据库中只出现一次。

示例（今天的日期是 2012-07-15 这里）：

```
2012-07-14
2012-07-13
2012-07-10 
```

= 2

```
2012-07-14
2012-07-13
2012-07-12
2012-07-10
2012-07-09 
```

= 3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:23:29.130

这是在 sql server 中完成的。请将其转换为 mysql 语法

```
 select count(*) from
(select dateval,DATEDIFF(day,dateval,'2012-07-15') day_diff,
ROW_NUMBER() over (order by dateval desc) as rownum from test_11 )a
where a.rownum=a.day_diff 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T11:17:24.433

您可以使用函数[strtotime()](http://php.net/manual/en/function.strtotime.php)来获取日期的[time()](http://us3.php.net/manual/en/function.time.php)值..

```
<?php

$userDate = "2012-07-14";

$pastDate = strtotime($userDate);
$currentTime  = time();
$secondsSince = round($currentTime-$pastDate);
$daysSince    = $secondsSince/86400; // 86400 being the seconds in a day

$preciseNumDays = sprintf("%.2f", $daysSince);

echo $preciseNumDays;

?> 
```

我刚刚编写了那个简单的脚本来计算自过去日期以来的天数。你可以循环一个天数并获取每个日期通过循环后的天数。

# java - 如何在 Java 中为 IP 地址生成子网掩码？

> ID：11577808
> 
> 赞同：-3
> 
> 时间：2012-07-20T10:48:34.510
> 
> 标签：java, ip-address, mask

我正在使用**mail.jar**在 java 中发送邮件。在那里我给出了一个 URL 来执行一些操作。

在 URL 中，我给出了实际的**IP 地址**。但我发现提供 IP 地址并不安全。

所以我想**生成子网掩码**或类似的东西来保护**IP 地址**。

所以请帮我**在Java中为IP地址生成子网掩码。**

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:55:57.670

您无法根据 IP 地址计算子网掩码。你可以猜测，但这种猜测可能是错误的。我看不出子网掩码如何以任何方式“保护”地址，或者 IP 地址如何不如主机名安全。您在这里想到什么样的安全性？

因此，对于目前阅读的问题，答案是：
**这是不可能的，但你为什么要这样做呢？**

# ruby-on-rails - 我们如何将葡萄 api 资源分成多个文件？

> ID：11577813
> 
> 赞同：4
> 
> 时间：2012-07-20T10:49:05.893
> 
> 标签：ruby-on-rails, ruby, api, rest, grape-api

嗨，我正在使用 intridea 的葡萄在红宝石中开发一个简单的 api。假设我们有这个：

```
class API_v1 < Grape::API
  resource :foo do
  end

  resource :bar do
  end

end 
```

我怎样才能使它的声明`:foo`和`:bar`在单独的文件中？基本上，我想知道是否有可能有类似于 rails 控制器的东西，其中有多个文件来组织代码。

我希望有人可以让我了解如何实现这一目标。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T10:50:38.213

Ruby 有[开放类](http://rubylearning.com/satishtalim/ruby_open_classes.html)，因此您应该能够简单地将它们移动到单独的文件中。

```
# foo.rb
class API_v1 < Grape::API
  resource :foo do
  end
end

# bar.rb
class API_v1 < Grape::API
  resource :bar do
  end
end 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-11-22T22:21:11.963

自述文件建议您使用`mount`：

```
class Foo < Grape::API
  resource :foo ... 
end

class Bar < Grape::API
  resource :bar ... 
end

class API < Grape::API
  mount Foo
  mount Bar
end 
```

# asp.net-mvc - 无法在 MVC3 的 url 中设置可选语言

> ID：11577814
> 
> 赞同：0
> 
> 时间：2012-07-20T10:49:09.890
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing

我在 MVC3 中路由 Web 的 URL 时遇到问题。我覆盖功能为

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
        routes.MapPageRoute("GrpViewRoute", "Report/{ReportName}", "~/Views/Offer/{ReportName}.aspx");
        routes.MapRoute(
            "Default", // Route name
            "{language}/{controller}/{action}/{id}", // URL with parameters

            new { language = "en",  controller = "Home", action = "Index", id = UrlParameter.Optional }
        );
        //routes.IgnoreRoute("{resource}.aspx/{*pathInfo}");
    } 
```

如果我请求“语言/家庭/索引”我每次都需要提供语言，这很好用。有什么解决方案可以让我以“home/index”的形式访问网站。如果我默认不提供语言，则为 en。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:58:23.953

对的，这是可能的：

```
routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters

            new { language = "en",  controller = "Home", action = "Index", id = UrlParameter.Optional }
        ); 
```

把它放在你当前的地图路线之后。

# ios - 创建 iOS 客户端服务器应用程序。ASIFormDataRequest 问题

> ID：11577815
> 
> 赞同：0
> 
> 时间：2012-07-20T10:49:12.803
> 
> 标签：ios, json, post, client-server, asihttprequest

我的问题是：如何使用`ASIFormDataRequest`和第二个创建与下面相同的请求，因为我认为我需要从响应中解析 JSON。

```
http://exampledomain.com/mobile_api/register/?client=iphone&info=A=iPhone/OS=5.1/C=UA&time=1342780143&udid=8b6f0cc104d137ae2e1730235f5664094b831122&version=1.0&secure=5444d72741bad93b916577d9297fa 
```

现在我尝试使用这样的代码

```
NSString *strURL = @"http://test2.mafia.ua/mobile_api/register/";
    ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:[NSURL URLWithString:strURL]];
    [request setDelegate:self];
    [request setPostValue:@"iphone" forKey:@"client"];
    [request setPostValue:@"A=iPhone/OS=5.1/C=UA" forKey:@"info"];
    [request setPostValue:@"1342780143" forKey:@"time"];
    [request setPostValue:@"8b6f0cc104d137ae2e1730235f5664094b831122" forKey:@"udid"];
    [request setPostValue:@"1.0" forKey:@"version"];
    [request setPostValue:@"5444d72741bad93b916577d9297fa" forKey:@"secure"];
    [request startAsynchronous]; 
```

它是否正确？

我也实现了委托方法

```
- (void)requestFinished:(ASIHTTPRequest *)request {

    NSLog(@"Response %d ==> %@", request.responseStatusCode, [request responseString]);

}
- (void)requestFailed:(ASIHTTPRequest *)request {

} 
```

作为回应，如果我使用某些浏览器，我会得到这个（我认为这是 JSON）。

{“状态”：“确定”，“秘密”：“b82b7771f600772c2c5af903b117b5e”，“客户端”：“200004”，“过期”：“1345372850”}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:49:45.890

您在 POST 字段中传递数据（就是`setPostValue:`这样。）

您应该将它们包含在您的 URL 中；尝试寻找一种在 URL 中构建查询参数的简单方法，或者只使用类似 stringWithFormat: 和适当的转义。

# javascript - 在 knockoutjs 中将 JSON 与表绑定

> ID：11577816
> 
> 赞同：2
> 
> 时间：2012-07-20T10:49:13.790
> 
> 标签：javascript, json, knockout.js

如何将我的 json 对象与 knockoutjs 绑定，这是我的 json：

```
 "{\"Sport\":[{\"Name\":\"nana\",\"Description\":\"lmkmsdqd\",\"EndDate\":\"2012-07-22T00:00:00\"},
              {\"Name\":\"sfqsdffqf\",\"Description\":\"lkqjskdlqsd\",\"EndDate\":\"2012-07-22T00:00:00\"}],
    \"Music\":[{\,\"Name\":\"nana\",\"Description\":\"lmkmsdqd\",\"EndDate\":\"2012-07-22T00:00:00\"},
               {\"Name\":\"sfqsdffqf\",\"Description\":\"lkqjskdlqsd\",\"EndDate\":\"2012-07-22T00:00:00\"}]}" 
```

请建议我如何绑定它！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T16:32:22.967

好的，所以我整理了一个粗略的[小提琴](http://jsfiddle.net/tyrsius/re6fv/)来演示一些绑定概念，以及 ViewModel 构造。我必须清理你的 JSON 才能做到这一点。它演示了模板、foreach 和文本绑定。如果您还没有这样做，我强烈建议您[阅读淘汰赛网站上的教程](http://learn.knockoutjs.com/)。

以下是 HTML 绑定：

```
Sports
<ul data-bind="template: { name: 'listingTemplate', foreach: sports}"></ul>
</br>
Music
<ul data-bind="template: { name: 'listingTemplate', foreach: music}"></ul>

<script type="text/html" id="listingTemplate">
<li>
    <span data-bind="text: name"></span></br>
    <span data-bind="text: description"></span></br>
    <span data-bind="text: endDate"></span></br></br>
</li>
</script>​ 
```

和视图模型：

```
var Listing = function(data) {
    this.name = ko.observable(data.Name || '');
    this.description = ko.observable(data.Description|| '');
    this.endDate = ko.observable(data.EndDate|| '');
};

var ViewModel = function(data) {
    this.sports = ko.observableArray(
        ko.utils.arrayMap(data.Sport, function(i) {return new Listing(i);})
    );
    this.music = ko.observableArray(
        ko.utils.arrayMap(data.Music, function(i) {return new Listing(i);})
    );
}; 
```

# c# - 如何突出显示 TreeView 中的节点？不仅是文本区域，而且是所有行

> ID：11577819
> 
> 赞同：2
> 
> 时间：2012-07-20T10:49:29.763
> 
> 标签：c#, .net, winforms

`TreeNode.Select()`不起作用。我希望它像

![图1](../Images/3ad8b26237666ea5ae4b3031508d6aa8.png)

我所拥有的只有

![图2](../Images/ae9ea6f3158424cf4706c85a9299b06e.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-20T11:02:56.790

您可以为此使用 TreeView.FullRowSelect 属性。但请记住，如果 ShowLines 设置为 true，它会被忽略。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-02-12T14:22:36.980

```
TreeView.FullRowSelect Property 

Gets or sets a value indicating whether the selection highlight spans the width of the tree view control.

public class CustomizedTreeView : TreeView
    {
        public CustomizedTreeView()
        {`enter code here`
            // Customize the TreeView control by setting various properties.
            BackColor = System.Drawing.Color.CadetBlue;
            FullRowSelect = true;
            HotTracking = true;
            Indent = 34;
            ShowPlusMinus = false;

            // The ShowLines property must be false for the FullRowSelect 
            // property to work.
            ShowLines = false;
        }

        protected override void OnAfterSelect(TreeViewEventArgs e)
        {
            // Confirm that the user initiated the selection.
            // This prevents the first node from expanding when it is
            // automatically selected during the initialization of 
            // the TreeView control.
            if (e.Action != TreeViewAction.Unknown)
            {
                if (e.Node.IsExpanded) 
                {
                    e.Node.Collapse();
                }
                else 
                {
                    e.Node.Expand();
                }
            }

            // Remove the selection. This allows the same node to be
            // clicked twice in succession to toggle the expansion state.
            SelectedNode = null;
        }

    }

follow this link

https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.treeview.padding?view=netframework-4.7.2 
```

# c# - 如何为用户控件设置数据绑定？

> ID：11577827
> 
> 赞同：1
> 
> 时间：2012-07-20T10:50:05.873
> 
> 标签：c#, wpf, data-binding, user-controls, dependency-properties

我的项目，我想使用一个用户控件，它是一个文本块和一个文本框的组合。我可以为用户控件创建一些自定义属性，例如

```
 public string Caption
    {
        get
        {
            return this.Block.Text;
        }
        set
        {
            this.Block.Text = value;
        }
    }

    public string Value
    {
        get
        {
            return this.Box.Text;
        }
        set
        {
            this.Box.Text = value;
        }
    } 
```

我还想在这个用户控件中设置文本块的绑定。我知道我们必须为此使用依赖属性，如下所示：

```
 public string fieldValue
    {
        get
        {
            return (string)GetValue(fieldValueProperty);
        }
        set
        {
            SetValue(fieldValueProperty, value);
        }
    }          
    public static readonly DependencyProperty fieldValueProperty =
        DependencyProperty.Register("fieldValue", typeof(string), typeof(TextBlox), 
        new FrameworkPropertyMetadata("", FrameworkPropertyMetadataOptions.BindsTwoWayByDefault)); 
```

在我的实际应用中：

```
 <my:TxtBlox HorizontalAlignment="Left" Name="txtBlox1"                      
                 fieldValue="{Binding Path=ProdCode,Mode=TwoWay}"
                 VerticalAlignment="Top" Width="228" /> 
```

我正在将此控件的容器的数据上下文设置为数据库对象。

```
 oProd = dt.ProdInfoes.First();
        Main.DataContext = oProd; 
```

但我无法让它发挥作用。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:10:43.553

如果要绑定到它们，则必须创建 DependencyProperties`Caption`而不是普通属性。`Value`在您的用户控件 xaml 中，您必须将绑定设置为具有绑定的属性`ElementName`。看到[这个](https://stackoverflow.com/questions/11226843/data-binding-in-wpf-user-controls)帖子

# r - 带有属性的 R igraph add.edges()

> ID：11577830
> 
> 赞同：2
> 
> 时间：2012-07-20T10:50:20.157
> 
> 标签：r, attr, igraph, edges

在 add.edges() 期间分配一个属性，例如宽度：

```
g <- add.edges(g,c(from,to), attr= width <- 1 ) 

Error message:
please supply names for attributes 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T11:14:19.550

您需要为其分配一个命名列表：

```
g <- graph.adjacency(matrix(0,2,2))
g <- add.edges(g,c(1,2),attr=list(width=10)) 
```

使用您使用的代码，您分配`1`给一个变量`width`，然后将 的值`width`，即`1`，分配给参数`attr`。

# c# - 禁用右键单击树视图

> ID：11577832
> 
> 赞同：-1
> 
> 时间：2012-07-20T10:50:28.757
> 
> 标签：c#, winforms, treeview

当点击树视图的一个节点时，该节点会被高亮，然后在空白区域右击，当前选择的节点将被取消高亮。所以我想要的就是禁用右键单击。我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:53:27.167

如果目的是停止此取消突出显示，请尝试将树的“HideSelection”属性设置为 false。

# wix - WiX 如何删除标记为永久的组件

> ID：11577833
> 
> 赞同：1
> 
> 时间：2012-07-20T10:50:28.607
> 
> 标签：wix, windows-installer

我处于以下情况，我需要删除标记为永久的组件。我们的安装程序的早期版本安装了一个 Windows 服务，在卸载主要产品后应该留在系统上。

现在我们尝试删除左侧的服务并用更新的版本替换它。问题是我们有两个不同的组件 guid，因为我们更改了用于创建 msi 的工具。

在我看来，有三种可能的方式来实现这个目标：

a) 使用文件搜索来更新文件本身。b) 使用组件搜索并尝试找到它。如果没有找到，请尝试找到另一个。如果找到任何一个，请使用升级元素来升级组件。C） ？？？- 可能是“最佳实践”方式

我的一些同事提到只删除文件，但这会导致更多麻烦，因为 Windows Installer 注册表中没有未注册的组件。

我在这里没有提到 CustomActions，因为它应该是实现目标的最后一个选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:16:01.927

您最好的选择是使用[InstEd It 打开您的旧 MSI！](http://www.instedit.com/)或 Orca，然后复制组件 GUID 并在新安装程序中使用它们。

这样，WindowsInstaller 将为您处理升级。显然，如果您将数百个组件设置为永久组件（您只需要关心永久组件），这将非常痛苦，但如果它只是一个服务元素，它应该是一个相当容易的任务。

还要确保您的 UpgradeCode 已转移并执行[MajorUpgrade](http://wix.sourceforge.net/manual-wix3/major_upgrade.htm)以便首先卸载旧的安装程序。

# vb.net - 在 GridView 中隐藏 UserId

> ID：11577836
> 
> 赞同：0
> 
> 时间：2012-07-20T10:50:45.067
> 
> 标签：vb.net, sql-server-2008, gridview

我有 2 个 GridView，通过一个复选框，我可以选择 GridView 1 (gvAll) 中的行，并将所选行的多个值传递给另一个 GridView 2 (gvSelected)。我又用它来将所选行插入到数据库中。GridViews 中的数据是用户数据 UserId、Firstname、Surname、ServiceNo。我需要插入整个选定记录中的每个值。但是，尽管这部分工作正常，但只有当 UserId 显示在我不想要的 GridView 中时才有效！我想隐藏 UserId 但仍将值插入数据库。有解决办法吗？

```
<div>
        <asp:Label ID="lbTitle" runat="server" Text=""></asp:Label>
        <asp:DataList ID="DataList1" OnItemCommand="DataList1_ItemCommand"
            OnItemDataBound="DataList1_ItemDataBound" RepeatDirection="Horizontal" runat="server" Width="500">

        <SeparatorTemplate>

            </SeparatorTemplate>
            <ItemTemplate>
                <asp:LinkButton ID="lnkbtnPaging" runat="server" CommandArgument='<%# Bind("PageIndex") %>'
                    Text='<%# Bind("PageText") %>'></asp:LinkButton>
            </ItemTemplate>
        </asp:DataList>

        <br />
                <asp:Panel ID="pnlgvAll" runat="server">

           <asp:GridView ID="gvAll" runat="server" 
        AutoGenerateColumns = "false"  AllowPaging ="true"   
        OnPageIndexChanging = "OnPaging" PageSize = "10" CssClass="rounded-corner" Width="550" >
       <Columns>
        <asp:TemplateField>
            <HeaderTemplate>
                <asp:CheckBox ID="chkAll" runat="server" onclick = "checkAll(this);" AutoPostBack = "true"  OnCheckedChanged = "CheckBox_CheckChanged"/>
            </HeaderTemplate> 
            <ItemTemplate>
                <asp:CheckBox ID="chk" runat="server" onclick = "Check_Click(this)" AutoPostBack = "true"  OnCheckedChanged = "CheckBox_CheckChanged" />
            </ItemTemplate>
        </asp:TemplateField>

        <asp:BoundField DataField = "UserId" HeaderText = "UserId" HtmlEncode = "false"  /> 
        <asp:BoundField DataField = "serviceNo" HeaderText = "Service No" HtmlEncode = "false" />
        <asp:BoundField DataField = "forename" HeaderText = "First Name" HtmlEncode = "false" />
        <asp:BoundField DataField = "surname" HeaderText = "Surname" HtmlEncode = "false" />
       </Columns> 

    </asp:GridView> </asp:Panel>
    <asp:Label ID="Msg" runat="server"></asp:Label>
            <br />
            <asp:UpdatePanel ID="UpdatePanel2" runat="server">
                    <ContentTemplate>
<asp:GridView ID="gvSelected" runat="server" 
AutoGenerateColumns = "False" EmptyDataText = "No Firefighters Selected" CssClass="rounded-corner" Width="500"   >

<Columns>
<asp:TemplateField HeaderText="UserId">
        <ItemTemplate>
            <input id="txtDetUsr" type="hidden" runat="server" value='<%# Bind("UserId") %>'  />
                <%--<asp:Label ID="lbl1" runat="server" Text='<%# Bind("UserId") %>'></asp:Label>--%>
        </ItemTemplate>
       </asp:TemplateField>
    <asp:TemplateField HeaderText="Service No">
        <ItemTemplate>
            <asp:Label ID="Label1" runat="server" Text='<%# Bind("serviceNo") %>'></asp:Label>
        </ItemTemplate>
        <EditItemTemplate>"
            <asp:TextBox ID="TextBox1" runat="server" Text='<%# Bind("serviceNo") %>'></asp:TextBox>
        </EditItemTemplate>
    </asp:TemplateField>
    <asp:TemplateField HeaderText="First Name">
        <ItemTemplate>
            <asp:Label ID="Label2" runat="server" Text='<%# Bind("forename") %>'></asp:Label>
        </ItemTemplate>
        <EditItemTemplate>
            <asp:TextBox ID="TextBox2" runat="server" Text='<%# Bind("forename") %>'></asp:TextBox>
        </EditItemTemplate>
    </asp:TemplateField>
    <asp:TemplateField HeaderText="Surname">
        <ItemTemplate>
            <asp:Label ID="Label3" runat="server" Text='<%# Bind("surname") %>'></asp:Label>
        </ItemTemplate>
        <EditItemTemplate>
            <asp:TextBox ID="TextBox3" runat="server" Text='<%# Bind("surname") %>'></asp:TextBox>
        </EditItemTemplate>
    </asp:TemplateField>
    </Columns>

<HeaderStyle BackColor="Green"></HeaderStyle>
</asp:GridView>
 </ContentTemplate>
                </asp:UpdatePanel>
<asp:Button ID="But3" runat="server" Text="My Text" OnClick="btnMyText_Click" OnClientClick="btClick3()" OnCommand="Button_Command" CommandArgument="AddDetach" />
        </div>

Private Sub BindPrimaryGrid()
        Dim constr As String = ConfigurationManager.ConnectionStrings("ConString").ConnectionString
        Dim query As String = "select UserId, serviceNo, forename, surname from userProfilesTbl"
        Dim con As New SqlConnection(constr)
        Dim sda As New SqlDataAdapter(query, con)
        Dim dt As New DataTable()
        sda.Fill(dt)
        gvAll.DataSource = dt
        gvAll.DataBind()
    End Sub
    Protected Sub OnPaging(ByVal sender As Object, ByVal e As GridViewPageEventArgs)
        GetData()
        gvAll.PageIndex = e.NewPageIndex
        BindPrimaryGrid()
        SetData()
    End Sub
    Private Sub GetData()
        Dim dt As DataTable
        If ViewState("SelectedRecords") IsNot Nothing Then
            dt = DirectCast(ViewState("SelectedRecords"), DataTable)
        Else
            dt = CreateDataTable()
        End If
        Dim chkAll As CheckBox = DirectCast(gvAll.HeaderRow _
                            .Cells(0).FindControl("chkAll"), CheckBox)
        For i As Integer = 0 To gvAll.Rows.Count - 1
            If chkAll.Checked Then
                dt = AddRow(gvAll.Rows(i), dt)
            Else
                Dim chk As CheckBox = DirectCast(gvAll.Rows(i) _
                                .Cells(0).FindControl("chk"), CheckBox)
                If chk.Checked Then
                    dt = AddRow(gvAll.Rows(i), dt)
                Else
                    dt = RemoveRow(gvAll.Rows(i), dt)
                End If
            End If
        Next
        ViewState("SelectedRecords") = dt
    End Sub
    Private Sub SetData()
        Dim chkAll As CheckBox = DirectCast(gvAll.HeaderRow.Cells(0).FindControl("chkAll"), CheckBox)
        chkAll.Checked = True
        If ViewState("SelectedRecords") IsNot Nothing Then
            Dim dt As DataTable = DirectCast(ViewState("SelectedRecords"), DataTable)
            For i As Integer = 0 To gvAll.Rows.Count - 1
                Dim chk As CheckBox = DirectCast(gvAll.Rows(i).Cells(0).FindControl("chk"), CheckBox)
                If chk IsNot Nothing Then
                    Dim dr As DataRow() = dt.[Select]("serviceNo = '" & gvAll.Rows(i).Cells(1).Text & "'")
                    chk.Checked = dr.Length > 0
                    If Not chk.Checked Then
                        chkAll.Checked = False
                    End If
                End If
            Next
        End If
    End Sub
    Private Function CreateDataTable() As DataTable
        Dim dt As New DataTable()
        dt.Columns.Add("UserId")
        dt.Columns.Add("serviceNo")
        dt.Columns.Add("forename")
        dt.Columns.Add("surname")
        dt.AcceptChanges()
        Return dt
    End Function
    Private Function AddRow(ByVal gvRow As GridViewRow, ByVal dt As DataTable) As DataTable
        Dim dr As DataRow() = dt.Select("serviceNo = '" _
                                    & gvRow.Cells(1).Text & "'")
        If dr.Length <= 0 Then
            dt.Rows.Add()
            dt.Rows(dt.Rows.Count - 1)("UserId") = gvRow.Cells(1).Text
            dt.Rows(dt.Rows.Count - 1)("serviceNo") = gvRow.Cells(2).Text
            dt.Rows(dt.Rows.Count - 1)("forename") = gvRow.Cells(3).Text
            dt.Rows(dt.Rows.Count - 1)("surname") = gvRow.Cells(4).Text
            dt.AcceptChanges()
        End If
        Return dt
    End Function
    Private Function RemoveRow(ByVal gvRow As GridViewRow, ByVal dt As DataTable) As DataTable
        Dim dr As DataRow() = dt.Select("serviceNo = '" _
                                    & gvRow.Cells(1).Text & "'")
        If dr.Length > 0 Then
            dt.Rows.Remove(dr(0))
            dt.AcceptChanges()
        End If
        Return dt
    End Function
    Protected Sub CheckBox_CheckChanged(ByVal sender As Object, ByVal e As EventArgs)
        GetData()
        SetData()
        'BindWatchGrid()
        BindSecondaryGrid()

    End Sub
    Private Sub BindSecondaryGrid()
        Dim dt As DataTable = DirectCast(ViewState("SelectedRecords"), DataTable)
        gvSelected.DataSource = dt
        gvSelected.DataBind()
    End Sub
    Private Sub CreateAlphaPagings()
        lbTitle.Text = "<h3>Add Detached Firefighters</h3>"
        Dim dt As New DataTable()
        dt.Columns.Add("PageIndex")
        dt.Columns.Add("PageText")

        If Me.ViewState("Paging") Is Nothing Then
            For i As Integer = 65 To (65 + 25)
                Dim dr As DataRow = dt.NewRow()
                dr(0) = [Char].ConvertFromUtf32(i)
                dr(1) = [Char].ConvertFromUtf32(i)
                dt.Rows.Add(dr)
            Next

            Dim drNew As DataRow = dt.NewRow()
            drNew("PageIndex") = "All"
            drNew("PageText") = "All"
            dt.Rows.Add(drNew)

            Me.ViewState("Paging") = dt
        Else
            dt = DirectCast(Me.ViewState("Paging"), DataTable)
        End If

        DataList1.DataSource = dt
        DataList1.DataBind()

    End Sub
    Private Sub BindGrid(ByVal StartAlpha As String)
        Dim constr As String = ConfigurationManager.ConnectionStrings("ConString").ConnectionString
        Dim sql As String = ""

        If StartAlpha = "All" Then
            sql = "Select * from userProfilesTbl Order By serviceNo asc"
        Else
            sql = "Select  * from userProfilesTbl Where surname Like '" & StartAlpha & "%' Order By serviceNo asc "
        End If

        Dim da As New SqlDataAdapter(sql, constr)
        Dim dtSelect As New DataTable()
        da.Fill(dtSelect)

        gvAll.DataSource = dtSelect
        gvAll.DataBind()

    End Sub
    Protected Sub DataList1_ItemCommand(ByVal source As Object, ByVal e As DataListCommandEventArgs)
        Dim lbkbtnPaging As LinkButton = DirectCast(e.CommandSource, LinkButton)
        BindGrid(e.CommandArgument.ToString())
        Me.ViewState("SelectedText") = e.CommandArgument.ToString()
        CreateAlphaPagings()
    End Sub
    Protected Sub DataList1_ItemDataBound(ByVal sender As Object, ByVal e As DataListItemEventArgs)
        If e.Item.ItemType = ListItemType.AlternatingItem OrElse e.Item.ItemType = ListItemType.Item Then
            If Me.ViewState("SelectedText") IsNot Nothing Then
                Dim lbkbtnPaging As LinkButton = DirectCast(e.Item.FindControl("lnkbtnPaging"), LinkButton)
                If Me.ViewState("SelectedText").ToString() = lbkbtnPaging.Text Then
                    lbkbtnPaging.Enabled = False
                End If
            End If
        End If
    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:56:47.153

You should be able to set the Width of the column you want to hide to 0 to achieve this.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T16:17:24.227

感谢 03usr 和 AVD 的贡献。但是，通过这里的 css 解决了它

```
<style type="text/css">
    .hide
    {
        display:none;
    }
</style>

<asp:BoundField DataField = "UserId" HeaderText = "UserId" HtmlEncode = "false" ><ItemStyle CssClass="hide"/><HeaderStyle CssClass="hide" /></asp:BoundField > 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T10:53:20.603

添加`TemplateField`并使用`<asp:HiddenField/>`来绑定`UserId`元素。

# windows-phone-7 - 如何更改 ViewModel 属性的属性并使更改反映在绑定控件上？

> ID：11577838
> 
> 赞同：0
> 
> 时间：2012-07-20T10:50:57.047
> 
> 标签：windows-phone-7, data-binding

我正在编写一个 Windows Phone 应用程序；作为一个好公民，我正在使用 MVVM 模式:) 作为 MVVM 方面的专家，我遇到了以下问题，希望我能在这里找到解决方案。

我有以下代码：

**XAML**

```
<Grid x:Name="LayoutRoot" Background="Transparent" DataContext="{Binding MyPOCO}">
    <StackPanel>
        <TextBlock Text="{Binding Name}"/>
        <TextBlock Text="{Binding IsActive}"/>
    </StackPanel>
</Grid> 
```

**代码背后**

```
this.DataContext = new ViewModel(); 
```

**视图模型**

```
public class ViewModel : ViewModelBase
{
    private POCO myPOCO;

    public ViewModel()
    {
        this.myPOCO = new POCO();
        this.ToggleActiveStatusCommand = new RelayCommand(this.ToggleActiveStatus);
    }

    public POCO MyPOCO
    {
        get
        {
            return this.myPOCO;
        }
    }

    public RelayCommand ToggleActiveStatusCommand { get; private set; }

    private void ToggleActiveStatus()
    {
        this.MyPOCO.IsActive = !this.MyPOCO.IsActive;
        System.Diagnostics.Debug.WriteLine(this.MyPOCO.IsActive);
        this.RaisePropertyChanged("MyPOCO");
    }
} 
```

**POCO**

```
public class POCO
{
    public string Name { get; set; }
    public bool IsActive { get; set; }
} 
```

我想要实现的是更改 TextBlock 文本作为 IsActive 更改的值......怎么做？我的意思是除了将 POCO 所需的属性作为属性暴露给 ViewModel 之外。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:02:53.610

我认为您必须在 ViewModel 中实现调用 POCO 属性的属性，除非您在 POCO 中实现 INotifyPropertyChanged ，然后它会违反 MVVM，您的模型应该只保存您的数据，而您的 ViewModel 是将模型与视图链接的粘合剂.

在 ViewModel 中创建属性可能看起来需要做很多额外的工作，但它确实增加了能够基于单个 Model 定义许多 ViewModel 的好处。因此，在特定的 ViewModel 中，您只公开您需要的属性，而不是 Model 可以为您提供的所有内容。

定义 ViewModel 属性后，您可能需要将 Binding 的 Mode 设置为 TwoWay，以便在底层 ViewModel 属性更改时更新 UI。

# java - 将 long（其十进制表示表示 yyyyMMdd.. 日期）转换为不同的日期格式

> ID：11577847
> 
> 赞同：2
> 
> 时间：2012-07-20T10:51:36.363
> 
> 标签：java

我有很长的形式

```
20120720162145
yyyymmddhhmmss 
```

我必须将其转换为`2012-07-20 4:21 PM`形式。Java有什么办法可以做到这一点`Date`吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T10:58:09.857

就是这样：

```
long input = 20120720162145L;

DateFormat inputDF = new SimpleDateFormat("yyyyMMddHHmmss");
DateFormat outputDF = new SimpleDateFormat("yyyy-MM-dd K:mm a");

Date date = inputDF.parse(""+input);

System.out.println(outputDF.format(date)); 
```

**输出：**

```
2012-07-20 4:21 PM 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-01T11:01:18.043

我想贡献现代答案。2012 年的答案是正确的（如果您接受 0:21 PM 作为时间，否则很容易将其更改为 12:21 PM）。今天我更喜欢

```
 // convert your long into a LocalDateTime
    DateTimeFormatter uuuuMmDdHhMmSs = DateTimeFormatter.ofPattern("uuuuMMddHHmmss");
    long longDate = 20120720162145L;
    LocalDateTime dateTime = LocalDateTime.parse(String.valueOf(longDate), uuuuMmDdHhMmSs);

    // Format the LocalDateTime into your desired format
    DateTimeFormatter humanReadableFormatter
            = DateTimeFormatter.ofPattern("uuuu-MM-dd h:mm a", Locale.ENGLISH);
    String formattedDateTime = dateTime.format(humanReadableFormatter);
    System.out.println(formattedDateTime); 
```

这将打印所需的

> 2012-07-20 下午 4:21

我建议您为格式化提供明确的语言环境。我已经给出了英语，因为 AM 和 PM 在英语以外的其他语言中几乎不使用，但你可以选择。

我注意到在您的问题中，日期和时间之间有两个空格`2012-07-20 4:21 PM`。如果您希望填充小时空间，以便它们始终占据两个位置（如果格式化的日期时间在一列中彼此下方显示，那就太好了），请在 :`pp`之前使用 pad 修饰符`h`：

```
 DateTimeFormatter humanReadableFormatter
            = DateTimeFormatter.ofPattern("uuuu-MM-dd pph:mm a", Locale.ENGLISH); 
```

如果您想格式化为`20/07/2012`（如[在此重复问题中](https://stackoverflow.com/questions/48558248/how-to-convert-a-long-to-a-date-with-dd-mm-yyyy-format)所问）：

```
 DateTimeFormatter dateFormatter = DateTimeFormatter.ofPattern("dd/MM/yyyy");
    String formattedDate = dateTime.format(dateFormatter); 
```

## java.time

2012 年的答案中使用的类现在早已过时`Date`，`DateFormat`并且`SimpleDateFormat`也被证明设计不佳。我建议您将它们抛在脑后，而使用`java.time`现代 Java 日期和时间 API。

**链接：** [Oracle 教程：日期时间](https://docs.oracle.com/javase/tutorial/datetime/)解释如何使用`java.time`.

# html - jQuery Mobile：如何创建带有标题和描述的链接行

> ID：11577848
> 
> 赞同：0
> 
> 时间：2012-07-20T10:51:49.887
> 
> 标签：html, jquery-mobile

jQuery Mobile: Up and Running 中有一个示例，它显示了一个包含标题、描述和链接的交互式列表

[http://my.safaribooksonline.com/book/-/9781449331085/4dot-lists/id2712982](http://my.safaribooksonline.com/book/-/9781449331085/4dot-lists/id2712982)

我找不到此代码，到目前为止，我能够重现相同效果的唯一方法是将`<hX>`元素嵌套在 中`<a>`，我知道这是不好的做法。

任何人都可以提出正确的方法来实现这一目标吗？下面的示例有效，但只能通过将 .

```
<!DOCTYPE html> 
<html> 
    <head> 
    <meta charset="utf-8" />
    <title>List Example</title>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head> 

<body>
    <div data-role="page" id="example">

        <div data-role="header" data-theme="c">
            <h2>List Example</h2>
        </div>

        <div data-role="content">

            <ul data-role="listview" >
                <li>
                    <a href="#">
                    <h3>Title1</h3>
                    <p>Description1</p>
                    </a>
                </li>
                 <li>
                    <a href="#">
                    <h3>Title2</h3>
                    <p>Description2</p>
                    </a>
                </li>
              </ul>
        </div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:41:52.293

来自[JQM 文档](http://jquerymobile.com/demos/1.1.1/docs/lists/docs-lists.html)（在“文本格式和计数”下）

> 要添加文本层次结构，请使用标题来增加字体强调并使用段落来减少强调。

所以这似乎是正确的方法。也就是说，您可以在其中嵌套任何您想要的内容，`li`并使用“CSS”对其进行样式设置。

# java - 使用 jdbc 中的 execute 方法更新数据

> ID：11577852
> 
> 赞同：1
> 
> 时间：2012-07-20T10:52:01.030
> 
> 标签：java, jdbc

使用 executeQuery 而不是 executeUpdate 更新数据库中的数据有什么影响。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:56:31.163

`executeQuery()`返回 a `ResultSet`，您必须自己从中检索 int 结果。此外，您必须自己关闭并发布结果集。

# php - https://graph-video.facebook.com/ 上传后重定向

> ID：11577853
> 
> 赞同：0
> 
> 时间：2012-07-20T10:52:02.993
> 
> 标签：php, facebook, facebook-graph-api, video

我正在使用以下代码成功上传视频，但上传后显示一些 ID 页面。成功上传视频后，任何人都可以帮助如何将页面重定向到我想要的位置。

提前致谢。

```
$app_id = "YOUR_APP_ID";
$app_secret = "YOUR_APP_SECRET";
$my_url = "YOUR_POST_LOGIN_URL";
$video_title = "TITLE FOR THE VIDEO";
$video_desc = "DESCRIPTION FOR THE VIDEO";
$page_id = "YOUR_PAGE_ID";

$code = $_REQUEST["code"];

echo '<html><body>';

if(empty($code)) {
    // Get permission from the user to publish to their page.
    $dialog_url = "http://www.facebook.com/dialog/oauth?client_id="
        . $app_id . "&redirect_uri=" . urlencode($my_url)
        . "&scope=publish_stream,manage_pages";
    echo('<script>top.location.href="' . $dialog_url . '";</script>');
} else {

    $token_url = "https://graph.facebook.com/oauth/access_token?client_id="
        . $app_id . "&redirect_uri=" . urlencode($my_url)
        . "&client_secret=" . $app_secret
        . "&code=" . $code;
    $access_token = file_get_contents($token_url);

    $accounts_url = "https://graph.facebook.com/me/accounts?" . $access_token;
    $response = file_get_contents($accounts_url);

    $resp_obj = json_decode($response,true);
    $accounts = $resp_obj['data'];

    foreach($accounts as $account) {
        if($account['id'] == $page_id) {
            $access_token = $account['access_token'];
            break;
        }
    }

    $post_url = "https://graph-video.facebook.com/" . $page_id . "/videos?"
        . "title=" . $video_title. "&description=" . $video_desc
        . "&access_token=". $access_token;

    echo "<form enctype="multipart/form-data" action=" '.$post_url.' "
        method="POST">";
    echo "Please choose a file:";
    echo "<input name="file" type="file">";
    echo "<input type="submit" value="Upload" />";
    echo "</form>";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:27:57.747

您必须在服务器端而不是访问者浏览器上将视频上传到 Facebook，这样您就可以捕获输出并将访问者浏览器发送到正确的位置。

您的用户将首先将他们的文件上传到您的服务器上，然后您可以使用 curl 将视频发送到 facebook，完成后您可以重定向用户。

*例子*：

1.  Facebook Graph api 视频对象：http: [//developers.facebook.com/docs/reference/api/video/](http://developers.facebook.com/docs/reference/api/video/)
2.  命令行 Curl 示例： http: [//facebook.stackoverflow.com/questions/5227607/posting-an-embedded-video-link-using-the-facebook-graph-api](http://facebook.stackoverflow.com/questions/5227607/posting-an-embedded-video-link-using-the-facebook-graph-api)
3.  Facebook PHP api 示例：http: [//facebook.stackoverflow.com/questions/9018213/video-post-on-timeline-not-playing-inline](http://facebook.stackoverflow.com/questions/9018213/video-post-on-timeline-not-playing-inline)

# sql - 在单个选择语句中显式输入多行

> ID：11577857
> 
> 赞同：2
> 
> 时间：2012-07-20T10:52:33.760
> 
> 标签：sql, postgresql

我正在测试一个查询并希望用来`SELECT`获取一些初始数据，如下所示：

```
SELECT 1,2,3
    UNION
SELECT 2,3,4 
```

是否有将这两个选择合并为一个的语法，还是我必须`UNION`为每一行使用一个语句？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T11:17:37.030

您可以使用值子句

```
select t.*  from (values(1,2,3), (2,3,4)) as t(col1,col2,col3) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:04:53.653

如果要将结果显示为一个结果集，则必须使用 union/union all

# android - 我的android应用程序上的java.lang.ClassNotFoundException和Xml是find

> ID：11577858
> 
> 赞同：0
> 
> 时间：2012-07-20T10:52:33.967
> 
> 标签：android

我遇到了一个问题：

```
07-20 18:10:52.755: ERROR/AndroidRuntime(3019): Caused by: java.lang.ClassNotFoundException: com.lok.camfly.CamFlyCtrlMain in loader dalvik.system.PathClassLoader[/mnt/asec/com.lok.camfly-2/pkg.apk] 
```

我在谷歌上搜索过这个问题。所以我检查了我的xml，发现它是find。并且类名与 xml Activity 名称匹配。

有人可以帮助我吗？非常感谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:04:41.763

请尝试检查您是否在清单文件中提到了“包”条目。这可能是问题的原因。分享结果。

# java - 如何从 IP 地址整数值中获取位置详细信息

> ID：11577860
> 
> 赞同：0
> 
> 时间：2012-07-20T10:52:34.897
> 
> 标签：java, geolocation

我正在将 IP 地址转换为相应的数字。现在我想知道位置详细信息，即经纬度、时区等。在 Java 中是否可能。我必须为数据库使用一些外部 jar 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T10:55:22.227

IP addresses themselves don't have location info. However a number of databases/services exist that have this mapping.

See [this blog entry](http://blog.programmableweb.com/2009/03/31/3-free-ways-to-geolocate-by-ip/) for a number of different options. There are a number of APIs and databases to connect to for this, and you have the option of downloading such info locally to avoid remote lookups.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-03T08:22:42.643

要从 IP 地址获取位置，您必须购买 IP 数据库，它们会定期更新 IP 表。

但是，如果您愿意，您可以从请求标头中获取位置详细信息，即城市、地区、国家、经度、纬度。

它仅适用于 GAE 用户。

有关更多详细信息，请参阅 [GAE 发行 说明](https://code.google.com/p/googleappengine/wiki/SdkForJavaReleaseNotes#Version_1.6.5_-_April_24,_2012)

```
public static HashMap<String, Object> getLocationDetails(HttpServletRequest request)
{
    HashMap<String, Object> locationMap =   null; 
    String country  =   "",city="",region="",latitude="",longitude="",temp="",state="",title="",address="",zip="";
    boolean primary =   true;
    try
    {
        locationMap = new HashMap<String, Object>();
        country     =   request.getHeader("X-AppEngine-Country"); 
        region      =   request.getHeader("X-AppEngine-Region");
        city        =   request.getHeader("X-AppEngine-City");
        temp        =   request.getHeader("X-AppEngine-CityLatLong");
        latitude    =   (temp.split(","))[0];
        longitude   =   (temp.split(","))[1];
        log.info("country>>"+country+"region>>"+region+"city>>"+city+"temp>>"+temp+"latitude>>"+latitude+"longitude>>"+longitude);

        locationMap.put("city"      , city);
        locationMap.put("state"     , region);
        locationMap.put("country"   , country);
        locationMap.put("latitude"  , latitude);
        locationMap.put("longitude" , longitude);
        log.info("locationMap==>"+locationMap);
    }catch (Exception e) 
    {
        log.log(Level.SEVERE,"Exception while getting location"+e.getMessage(),e);
    }
    return locationMap;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-08T06:33:38.120

```
 ipAddress = request.getRemoteAddr();
  GeoLocation gl = new GeoLocation();
  gl.GetGeoLocationByIP(ipAddress);

String country = gl.Country; 
```

[参考](http://www.javaquery.com/2011/10/geolocation-javaquery-api.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T11:14:44.987

因此，正如其他人正确指出的那样，IP 地址不包含任何有关位置的“元数据”。您将需要依靠第三方来获取此信息，自己检索此信息，或者不使用它。在 Java 中编写库来抓取这些信息应该是可能的。

# java - 在 Java 中显示小数而不带尾随零

> ID：11577861
> 
> 赞同：1
> 
> 时间：2012-07-20T10:52:37.403
> 
> 标签：java

我遇到了这个问题，我有许多类型 long 代表时间（只有秒和毫秒）。我想像这样显示它`1,124 ms`。我认为简单的除法就可以完成这项工作，所以我尝试了这段代码

```
 long time = 2;
 System.out.println(((float) time) / 1000); 
```

但是当数字只有一个数字时，就像上面的例子一样，它给了我`0,0020`. 那么有没有办法纠正我的公式，或者我必须手动删除最后一个零？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T10:56:19.560

Just use a formatting statement that makes it 3 decimal places

```
String.format("%.3f", floatValue); 
```

If you need to find out more about number formatting check out [this](http://docs.oracle.com/javase/tutorial/java/data/numberformat.html) link

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T10:59:18.527

这将完成任务

```
 long time = 2;
    float num = ((float) time) / 1000;
    DecimalFormat df = new DecimalFormat("#.###");
    String str = df.format(num);
    System.out.println(str); 
```

# openembedded - 从单个 bitbake 配方脚本创建两个包映像，（在 local.conf 文件中定义两个 MACHINE 变量的方法）

> ID：11577864
> 
> 赞同：0
> 
> 时间：2012-07-20T10:52:47.323
> 
> 标签：openembedded

如何从单个 bitbake recipie 脚本创建两个包图像。这些包是从相同的源创建的，它应该只在某些补丁中有所不同。

> > 或

如何为两台机器同时构建 openembedded，以任何方式在 local.conf 文件中定义多个 MACHINE 变量，以便在构建时为两台不同的机器构建和创建图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T19:08:08.007

无法为 MACHINE 变量分配多个值。不过，您可以使用不同的 MACHINE 值多次运行 BitBake。

一种方法是不在 local.conf 中设置 MACHINE，而是在外部设置它并将其作为环境变量传递给 BitBake。

```
MACHINE="machine1"
export MACHINE

BB_ENV_EXTRAWHITE="MACHINE"
export BB_ENV_EXTRAWHITE

./bitbake helloworld-image 
```

这样，您将在 tmp/deploy/images 下的单独目录中获取每台机器的图像。

然后，您可以使用这样的 shell 脚本自动构建多台机器：

```
MACHINES="machine1 machine2 machine3"
for MACHINE in "$MACHINES" ; do
    ...
done 
```

您可以在此处找到有关 BB_ENV_EXTRAWHITE 的更多信息： [http ://www.openembedded.org/wiki/Advanced_configuration#Whitelist_Environment_Variables](http://www.openembedded.org/wiki/Advanced_configuration#Whitelist_Environment_Variables)

# c# - 如何在 C# 中阅读特定语言的 pdf？

> ID：11577867
> 
> 赞同：1
> 
> 时间：2012-07-20T10:52:59.573
> 
> 标签：c#

我是编程世界的新手。刚接到一个任务来阅读印地语的 pdf 文件。有成千上万的参考资料，我在互联网上获得了有关如何阅读 pdf 文件的信息，但不幸的是，没有针对特定语言的任何参考资料。

谁能帮我解决这个问题？

注意：每次我阅读 pdf 时，它都会以非可读文本的形式出现。

# asp.net-mvc-3 - MVC 3 & Uploadify - 如何显示自定义错误消息？

> ID：11577868
> 
> 赞同：1
> 
> 时间：2012-07-20T10:53:03.837
> 
> 标签：asp.net-mvc-3, uploadify

上传文件后，在将其保存到磁盘之前，我正在做一些验证。

如果出现问题，我想向用户显示我的自定义错误消息。我在这里发现了一些奇怪的东西[Uploadify: show error message from HTTP response](https://stackoverflow.com/questions/1877644/uploadify-show-error-message-from-http-response)

如何在 MVC 3 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T10:57:25.720

Tony,

Taken straight from ab mvc3 app that I'm working on right now:

```
<script type="text/javascript">
    function initupLoadify() {
        $("#fileInput").uploadify({
            uploader: '@Url.Content("~/scripts/swf/uploadify.swf")',
            script: '@Url.Action("Upload", "Home")',
            cancelImg: '@Url.Content("~/Content/cancel.png")',
            auto: true,
            sizeLimit: 5500000,
            fileDataName: 'fileData',
            //scriptData: { 'propertyId': $("#PropertyID").val() },
            buttonText: 'Add Schedule',
            wmode: 'transparent',
            //buttonImg: '@Url.Content("~/Content/button.png")', // make nice gradient image for button
            onComplete: function (event, queueId, fileObj, response) {
                $("#msg").html(response);
                // do something
                setTimeout(2000, window.location = '@Url.Action("Index")' + '?id=' + response);
                return true;
            },
            onCancel: function (evt, queueId, fileObj, data) {
                $("#msg").html("<br />Operation cancelled");
                return true;
            },
            onOpen: function (evt, queueId, fileObj) {
                $("#msg").html("<br />Upload in progress");
                return true;
            },
            onError: function (event, queueId, fileObj, errorObj) {
                $("#msg").html(fileObj.name + " was not uploaded ");
                if (errorObj.status == 404)
                    $("#msg").html("Could not find upload script. Use a path relative to: " + "<?= getcwd() ?>");
                else if (errorObj.type === "HTTP")
                    $("#msg").html("error " + errorObj.type + ": " + errorObj.status);
                else if (errorObj.type === "File Size")
                    $("#msg").html(fileObj.name + " " + errorObj.type + " Limit: " + errorObj.info / 1000 + " KB");
                else
                    $("#msg").html("error " + errorObj.type + ": " + errorObj.text);
            }
        });
    };
</script> 
```

hope this helps

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T11:44:10.700

这是一个 MVC 3[示例](http://www.uploadify.com/forum/#/discussion/7098/mvc-3-razor-experience/p1)。

如果您使用的是 3.0+ 版本，请使用[onUploadComplete](https://stackoverflow.com/a/13396695/1524303)而不是 onComplete（意识到它们的参数不同）。

# iphone - 努力让字典通过 NSNotification

> ID：11577870
> 
> 赞同：0
> 
> 时间：2012-07-20T10:53:15.850
> 
> 标签：iphone, objective-c, ios, xcode

我收到了通知，所以我这样处理

```
-(void) dateSelected:(NSNotification *) notification
{
NSLog(@"Value: %@", [[notification userInfo] valueForKey:@"date"] );
NSMutableDictionary * dateDict = [[NSDictionary alloc] initWithDictionary:[notification userInfo]];
NSLog(@"The Date Dict: %@", dateDict );
} 
```

我得到的日志是

```
2012-07-20 11:32: TestApp[10701:40b] Value: (null)
2012-07-20 11:32: TestApp[10428:40b] The Date Dict: {
} 
```

如果我 NSLog 退出通知本身，它看起来是有效的：

```
2012-07-20 11:33: TestApp[10457:40b] Notification: NSConcreteNotification 0x16629460 {name = date_selected_; object = {
date = 20120705;
}} 
```

我以前做过这个并且它的工作。

我敢肯定它很简单，但今天我看不到这个问题。

任何帮助，将不胜感激。

谢谢，-代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:06:46.940

这很简单，看看你的日志输出......你的通知中没有设置*userInfo 。*只有*name*和*object*。将您的输出与此进行比较...

```
NSNotification *notification = [NSNotification notificationWithName:@"NAME"
  object:self
  userInfo:[NSDictionary dictionaryWithObjectsAndKeys:@"obj", @"key", nil]];
NSLog( @"NOT: %@", notification ); 
```

...

```
NOT: NSConcreteNotification 0x73586f0 {name = NAME;
object = <CMAppDelegate: 0x884a4e0>; userInfo = {
    key = obj;
}} 
```

... 看到不同？日志输出中有*name*，*object*，还有*userInfo*。

所以答案是 - 您的通知不包含*userInfo*字典。查看触发此通知的代码。

# c# - 同步两个枚举

> ID：11577876
> 
> 赞同：2
> 
> 时间：2012-07-20T10:53:44.977
> 
> 标签：c#, linq, synchronization, ienumerable

我有两个系列。

```
 var a = new List<string>() { "a", "b", "c", "d", "e", "f", "j" };
  var b = new List<string>() { "a", "c", "d", "h", "i" }; 
```

而且我想对该项目执行一些操作，以防它在一个或另一个集合中丢失。

```
public static Synchronize<T>(IEnumerable<T> first, IEnumerable<T> second, Action<T> firstSynchronizer, Action<T> secondSynchronizer)
{
  var firstUnique = first.Distinct();
  var secondUnique = second.Distinct();
  foreach (var item in firstUnique)
  {
    if (!secondUnique.Contains(item)) firstSynchronizer(item);
  }
  foreach (var item in second.Distinct())
  {
    if (!firstUnique.Contains(item)) secondSynchronizer(item);
  }
} 
```

这就是我得到的，但我对此并不满意。我不禁想知道是否有更好的方法来实现这一点，因为我认为对`Distinct()`性能的影响很大，而且我不确定是否最好迭代整个第二个 Enumerable 并检查第一个 Enumerable 中是否不存在项目（像上面一样）还是迭代会更好`second.Except(first)`？你们有什么感想？

我这样称呼它：

```
 var a = new List<string>() { "a", "b", "c", "d", "e", "f", "j" };
  var b = new List<string>() { "a", "c", "d", "h", "i" };
  Synchronize(a.ToArray(), b.ToArray(), t => b.Add(t), t => a.Add(t)); 
```

我这样称呼`ToArray()`集合在被迭代时不会被改变，而 lambdas 只是将缺失的元素添加到相应的列表中。

Also, this is just a test implementation. In production environment, Enumerables won't be of same type. This is intended to be used to sync remote and local storage. In future, Enumerable first will be for example `ICollection<DummyRemoteItem>` and Enumerable second will be `List<IO.FileSystemInfo>`. But I want it to be more generic. To make it possible to work with different collections, I think I would propose another type parameter and a `Func<T1, T2, bool>` for comparing items. That would be a best approach, right?

Generally, what's the best way to implement insides of

```
Synchronize<T>(IEnumerable<T> first,IEnumerable<T> second,Action<T> firstSynchronizer,Action<T> secondSynchronizer) 
```

and

```
Synchronize<TFirst, TSecond>(IEnumerable<TFirst> first,IEnumerable<TSecond> second,Action<TFirst> firstSynchronizer,Action<TSecond> secondSynchronizer, Func<TFirst, TSecond, bool> predicate) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:57:30.460

You can use the `Except` and `Intersect` methods to find the differences or identical items between two enumerable sources. MSDN has a lot of resources on both [Except](http://msdn.microsoft.com/en-us/library/bb300779.aspx) and [Intersect](http://msdn.microsoft.com/en-us/library/bb460136.aspx).

As for the comment about `Distinct()` having an expensive performance hit I would suspect that the hit is minor and trying to optimize would be to do so prematurely.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T10:58:46.897

I guess the most elegant way would be to use sets. In .NET HashSet might be what you are looking for,

[http://msdn.microsoft.com/en-us/library/bb495294.aspx](http://msdn.microsoft.com/en-us/library/bb495294.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T10:59:45.403

Linq full outer join is your friend here.

Here's an implementation (from [here](http://blogs.geniuscode.net/RyanDHatch/?p=116))

```
public static IEnumerable<Tuple<T1, T2>> FullOuterJoin<T1, T2>
   (this IEnumerable<T1> one, IEnumerable<T2> two, Func<T1,T2,bool> match)
{
 var left = from a in one
   from b in two.Where((b) => match(a, b)).DefaultIfEmpty()
   select new Tuple<T1, T2>(a, b);

 var right = from b in two
   from a in one.Where((a) => match(a, b)).DefaultIfEmpty()
   select new Tuple<T1, T2>(a, b);

 return left.Concat(right).Distinct();
} 
```

so:

```
a.FullOuterJoin(b,a=>a,b=>b,(a,b)=>new {a,b}) 
```

and look for nulls in the resulting enumerable.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-09T15:11:40.437

The following could be used if the items in collections are of two different types:

```
 class CollectionSynchronizer<TSource, TDestination>
    {
        public Func<TSource, TDestination, bool> CompareFunc { get; set; }
        public Action<TDestination> RemoveAction { get; set; }
        public Action<TSource> AddAction { get; set; }
        public Action<TSource, TDestination> UpdateAction { get; set; }

        public void Synchronizer(ICollection<TSource> sourceItems, ICollection<TDestination> destinationItems)
        {
            // Remove items not in source from destination
            RemoveItems(sourceItems, destinationItems);

            // Add items in source to destination 
            AddOrUpdateItems(sourceItems, destinationItems);
        }

        private void RemoveItems(ICollection<TSource> sourceCollection, ICollection<TDestination> destinationCollection)
        {
            foreach (var destinationItem in destinationCollection.ToArray())
            {
                var sourceItem = sourceCollection.FirstOrDefault(item => CompareFunc(item, destinationItem));

                if (sourceItem == null)
                {
                    RemoveAction(destinationItem);
                }
            }
        }

        private void AddOrUpdateItems(ICollection<TSource> sourceCollection, ICollection<TDestination> destinationCollection)
        {
            var destinationList = destinationCollection.ToList();
            foreach (var sourceItem in sourceCollection)
            {
                var destinationItem = destinationList.FirstOrDefault(item => CompareFunc(sourceItem, item));

                if (destinationItem == null)
                {
                    AddAction(sourceItem);
                }
                else
                {
                    UpdateAction(sourceItem, destinationItem);
                }
            }
        }
    } 
```

And the usage would be like this:

```
var collectionSynchronizer = new CollectionSynchronizer<string, ContentImageEntity>
            {
                CompareFunc = (communityImage, contentImage) => communityImage == contentImage.Name,
                AddAction = sourceItem =>
                {
                    var contentEntityImage = _contentImageProvider.Create(sourceItem);
                    contentEntityImages.Add(contentEntityImage);
                },
                UpdateAction = (communityImage, contentImage) =>
                {
                    _contentImageProvider.Update(contentImage);
                },
                RemoveAction = contentImage =>
                {
                    contentEntityImages.Remove(contentImage);
                }
            };

            collectionSynchronizer.Synchronizer(externalContentImages, contentEntityImages); 
```

# xml - 在 Wix 中指定带有 heat 的文件 id

> ID：11577878
> 
> 赞同：6
> 
> 时间：2012-07-20T10:53:49.577
> 
> 标签：xml, xslt, wix

我正在收集一个带有热量的文件，我真的很想给它一个像样的 ID，而不是通常的“filXXXXXXXX”，主要是因为我需要在安装程序的其他部分引用它。我知道 Id 在不同的机器上和不同的文件内容上总是相同的，所以我可以放心地使用它，比如在 CI 服务器上构建时它不会改变。

当然，让这个值更加人性化会更好。似乎 Heat 没有生成文件 ID 的命令行选项（编辑：显然有一个 -suid 选项将停止生成数字 ID 并仅使用文件名作为 ID，无论如何这在很多情况下都是不可行的） ，所以我正在经历编写 XSLT 的痛苦，但无法实现我想要的，有人可以帮忙吗？

这是片段文件：

```
<?xml version="1.0" encoding="utf-8"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Fragment>
        <DirectoryRef Id="DBScripts" />
    </Fragment>
    <Fragment>
        <ComponentGroup Id="CSInstallerConfig">
            <Component Id="cmpD6BAFC85C2660BE8744033953284AB03" Directory="DBScripts" Guid="{A39BABF5-2BAC-46EE-AE01-3B47D6C1C321}">
                <File Id="filB31AC19B3A3E65393FF9059147CDAF60" KeyPath="yes" Source="$(var.CONFIG_PATH)\CSInstaller.config" />
            </Component>
        </ComponentGroup>
    </Fragment>
</Wix> 
```

这是 XSLT：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl">
    <xsl:output method="xml" indent="yes"/>
    <xsl:template match="@*|*">
        <xsl:copy>
            <xsl:apply-templates select="@*|*" />
        </xsl:copy>
    </xsl:template>
    <xsl:template match="File">
        <xsl:attribute name="Id">
            <xsl:value-of select="123"/>
        </xsl:attribute>
    </xsl:template>
</xsl:stylesheet> 
```

现在，我是 XSL 的真正菜鸟，所以也许上面的文件完全是胡说八道，但无论如何，发生的事情是“文件”元素被立即复制而没有更改 ID。

任何的想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T11:24:41.910

您的基本问题是名称空间或您的 XML 根元素 wi。您没有解决这个问题，因此 XSLT 实际上根本找不到您的 File 元素。

接下来，您必须对模板进行一些调整以正确复制 File 的其他属性：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns:wi="http://schemas.microsoft.com/wix/2006/wi">
    <xsl:output method="xml" indent="yes"/>
    <xsl:template match="@*|*">
        <xsl:copy>
            <xsl:apply-templates select="@*|*" />
        </xsl:copy>
    </xsl:template>
    <xsl:template match="wi:File">
        <xsl:copy>
            <xsl:attribute name="Id">
                <xsl:value-of select="123"/>
            </xsl:attribute>
            <xsl:apply-templates select="@*[not(name()='Id')]" />
            <xsl:apply-templates select="*" />
        </xsl:copy>
    </xsl:template>
</xsl:stylesheet> 
```

# android - 如果活动堆栈为空，则启动主活动

> ID：11577879
> 
> 赞同：11
> 
> 时间：2012-07-20T10:53:56.387
> 
> 标签：android, android-activity

我有一个可以从其他几个活动启动的活动，以及 url 过滤器意图。

在此活动中，我将操作栏中的主页图标用作后退按钮，将用户带回到上一个活动（而不是作为“主页”操作）。现在我通过调用 finish() 函数来做到这一点。在应用程序中工作时，这可以正常工作。

但是，如果通过 url 过滤器意图启动活动，我希望主页图标将用户带到主要活动。显然，调用 finish() 只会关闭活动。

所以我的问题是，有没有办法检查我的应用程序堆栈是否为空，如果为真则启动主要活动？还是我以错误的方式攻击这个？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-20T11:44:44.867

如果您的应用程序是通过 url 意图过滤器启动并创建自己的任务，那么您可以使用

```
if (isTaskRoot()) {
    // This activity is at root of task, so launch main activity
} else {
    // This activity isn't at root of task, so just finish()
} 
```

**编辑：添加了另一种可能的方法**

如果您的应用在通过 URL 意图过滤器启动时被启动到现有任务中，那么您可以执行以下操作：

当您从应用程序中的其他活动启动活动时，将 EXTRA 添加到 Intent 中，如下所示：

```
Intent intent = new Intent(this, MyActivity.class);
intent.putExtra("internal", "true");
startActivity(intent); 
```

当您的活动启动时，它可以检查 Intent 中是否存在 EXTRA，以确定它是在内部启动还是通过 URL 意图过滤器启动，如下所示：

```
Intent intent = getIntent();
if (intent.hasExtra("internal")) {
    // Launched internally
} else {
    // Launched via intent-filter
} 
```

# xml - C# Linq XML 按 ElementName 提取值

> ID：11577884
> 
> 赞同：0
> 
> 时间：2012-07-20T10:54:13.350
> 
> 标签：xml, c#-4.0, linq-to-xml

我有以下示例 MODS XML 部分：

```
<modsCollection xsi:schemaLocation="http://www.loc.gov/mods/v3 http://www.loc.gov/standards/mods/v3/mods-3-4.xsd" xmlns="http://www.loc.gov/mods/v3" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <mods version="3.4">
      <titleInfo>
         <title>PhD study</title> 
         <subTitle>trends and profiles 1996-97 to 2009-10</subTitle> 
      </titleInfo>
   <typeOfResource>text</typeOfResource> 
     ...
   </mods>
</modsCollection> 
```

我的尝试：

```
 XNamespace ns = "http://www.loc.gov/standards/mods/v3";
        var test = modsDoc.Descendants(ns + "title").Single().Value;
        test.Should().NotBeNull(); 
```

[源示例。](https://stackoverflow.com/questions/6752505/linq-to-xml-extract-single-element)

以上给我绝对没有！***'System.InvalidOperationException：序列不包含任何元素'***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:09:28.530

因为您在代码中使用的 NameSpace 是错误的。它应该是：

```
XNamespace ns = "http://www.loc.gov/mods/v3"; 
```

或者如果您想避免命名空间，请尝试：

```
var test2 = modsDoc.Descendants().Where(a => a.Name.LocalName == "title").Single().Value; 
```

编辑：

检查这个例子：

```
XDocument modsDoc = XDocument.Load("test.xml");
XNamespace ns = "http://www.loc.gov/mods/v3";
var test = modsDoc.Descendants(ns + "title").Single().Value;
var test2 = modsDoc.Descendants().Where(a => a.Name.LocalName == "title").Single().Value;
Console.WriteLine(test);
Console.WriteLine(test2); 
```

输出将是：

```
PhD study
PhD study 
```

# vba - 使用宏验证 Excel 中的空白字段

> ID：11577885
> 
> 赞同：0
> 
> 时间：2012-07-20T10:54:20.290
> 
> 标签：vba, excel

我在验证空白字段时遇到了一点困难。

当我使用此代码打开文件时，它会打开文件，检查该列中的应用程序编号（在我的应用程序编号位于第一列中）

我想要做的是，如果没有申请号，那么它应该写出以下错误“在以下行号找到空白申请号”

```
'Global Variables

 Dim rErr As Integer

'
' Find the last used row in a Column: column A in this example
'

Function LastRowInOneColumn(ColNo As String) As Long

    Dim LastRow As Long

    With ActiveSheet
        LastRow = .Cells(.Rows.Count, ColNo).End(xlUp).Row
    End With

   LastRowInOneColumn = LastRow

End Function

'
' Find the last used column in a Row: row 1 in this example
'

Function LastColumnInOneRow(RowNo As String)

    Dim LastCol As Integer

    With ActiveSheet
        LastCol = .Cells(1, .Columns.Count).End(xlToLeft).Column
    End With

    LastColumnInOneRow = LastCol

    'MsgBox LastCol

End Function

'
' To Check Application Number
'

Function Check_AppNo(appNo, pRow, Lrow) As Boolean

    Check_AppNo = True

    Dim MinAppNo, MaxAppNo As Single

    MinAppNo = 0
    MaxAppNo = 9999999999#

    If (appNo < MinAppNo Or appNo > MaxAppNo) Then
        Worksheets("Error_Results").Cells(rErr, 1) = "Application number out of range at Row " & i
        rErr = rErr + 1
        Check_AppNo = False
    End If

    For j = pRow + 1 To Lrow
        If (appNo = Worksheets("Sheet1").Cells(j, 1)) Then
            Worksheets("Error_Results").Cells(rErr, 1) = "Duplicate Application numbers at Rows " & pRow & " and " & j
            rErr = rErr + 1
            Check_AppNo = False
        End If
    Next j

End Function

Function OpenFile() As String
  NewFN = Application.GetOpenFilename(FileFilter:="Excel Files (*.xls*), *.xls*",         Title:="Please select a file")
  If NewFN = False Then
    ' They pressed Cancel
    OpenFile = ""
    'MsgBox "Stopping because you did not select a file"
    Exit Function
  Else
    Workbooks.Open Filename:=NewFN
    iPos = InStr(1, NewFN, "\") + 1
    ipos1 = 0
    Do
        ipos1 = InStr(iPos, NewFN, "\") + 1
        If (ipos1 <> 1) Then
             iPos = ipos1
        End If
    Loop Until (ipos1 = 1)
    OpenFile = Mid(NewFN, iPos, Len(NewFN) - iPos + 1)
  End If
End Function

Sub AddWorkSheet(fName As String, sName As String)
    Dim wSheet As Worksheet
    Workbooks(fName).Activate
    On Error Resume Next
    Set wSheet = Worksheets(sName)
    If wSheet Is Nothing Then
         Worksheets.Add().Name = sName
    Else
         Worksheets(sName).Clear   
    End If
    On Error GoTo 0
End Sub

Sub validate()

    Dim fName As String
    Dim aName As String
    Dim flag As Variant

    fName = OpenFile()           ' Open the required data file

    If (fName = "") Then
        Exit Sub
    End If

    Call AddWorkSheet(fName, "Error_Results")  ' Add Error Worksheet to the data Excel File
    rErr = 1

    Worksheets("Sheet1").Select
    LastRow = LastRowInOneColumn("A")       ' Get The Last Row in Column

    For pRow = 2 To LastRow

        rerr1 = rErr

        appNo = Worksheets("Sheet1").Cells(pRow, 1)
        flag = Check_AppNo(appNo, pRow, LastRow)

    Next pRow        'Process the next Record in Error_Results WorkSheet

    Workbooks(fName).Close (True) ' Closes an opened workbook on which the validation was done

End Sub

Sub Button1_Click()

    Call validate

End Sub 
```

请按照以下步骤运行代码：

*   第1步：首先制作一个名为“abc1”的excel文件
*   第 2 步：在该文件的第 1 列中，将其标题设为“申请号”
*   第 3 步：现在在其中输入申请编号（您想要的任何编号），中间留一个空白单元格
*   第 4 步：让另一个 excel 文件显示“验证器”
*   第 5 步：在那个地方的开发人员选项卡中的一个按钮
*   第 6 步：在开发人员选项卡中，单击 Visual Basic
*   第 7 步：您将看到一个 Visual Basic 编辑器
*   第8步：在左侧，您将看到一个项目浏览器窗口，在该窗口中右键单击粗体名称>选择插入>模块
*   第9步：然后按原样复制并粘贴上述代码
*   第 10 步：保存它并将 excel 文件另存为启用宏的文件
*   第 11 步：现在打开文件“验证器”，然后单击按钮运行代码

你会明白我想说什么，如果你看到代码，很容易理解

希望，任何人都可以帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T12:12:08.147

嗯，我不确定我是否做对了，因为它看起来很简单，但是您是否正在寻找类似的东西：

```
Sub Test()

dim lAppNo as long
dim sError as string 
dim lRow as long
dim lLastRow as long
dim bFlag as boolean

For lRow = 2 To lLastRow            

    rerr1 = rErr            

    lappNo = Worksheets("Sheet1").Cells(lRow, 1).value

    'Or put this in a function if you want to
    if lAppNO = 0 then 
        sError = "Blank application number found at following Row number " & lRow
        Call Write_Error(sError)
    end if

    bFlag = Check_AppNo(lAppNo, lRow, lLastRow)            

Next lRow  
End Sub

Sub Write_Error(sError As String)

Dim sPath               As String
Dim sFile               As String
Dim oBook               As Excel.Workbook
Dim oSheet              As Excel.Worksheet
Dim oRange              As Excel.Range
Dim iRange_Row          As Integer

sPath = "U:/"
sFile = "Errors.xls"
Set oBook = Workbooks.Open(sPath & sFile)
Set oSheet = oBook.Sheets("Errors")

If oSheet.Range("A1") <> "" Then
    Set oRange = oSheet.UsedRange
    iRange_Row = oRange.Rows.Count + 1
    oSheet.Cells(iRange_Row, 1).Value = Now
    oSheet.Cells(iRange_Row, 2).Value = sError
Else
    oSheet.Range("A1").Value = Now
    oSheet.Range("B1").Value = sError
End If

oBook.Save
oBook.Close

Set oRange = Nothing
Set oSheet = Nothing
Set oBook = Nothing

End Sub 
```

如果单元格为空白，如果 AppNo 定义为数字数据类型，则返回的值将为零。
如果 AppNo 将被声明为字符串，它将返回一个空字符串：**""**
我注意到您没有使用 Option Explicit，因为并非所有变量都已声明。
我建议您这样做，以使您的代码更易于维护。
在键入变量时，Als 使用一些约定。

# fonts - TINYmce change fonts family trouble in Safari and MAC

> ID：11577895
> 
> 赞同：0
> 
> 时间：2012-07-20T10:55:20.527
> 
> 标签：fonts, tinymce

When i trying to change text fonts-family by TINYmce in Safary or MAC, the font-family becomes to `mceinline`, no matter which font i chose. But in all other browsers all works good.

Any body know how to resolve such problem?

# ruby-on-rails - Rails 查询播放列表推荐器

> ID：11577897
> 
> 赞同：0
> 
> 时间：2012-07-20T10:55:26.513
> 
> 标签：ruby-on-rails, activerecord

基本上我有三个模型歌曲、播放列表和作业。

歌曲通过分配有许多播放列表，反之亦然。

我想编写一个查询来查找包含指定歌曲的每个播放列表。假设这首歌是由@song 指定的。

到目前为止，我有：

```
#find all the assignments that contain a song_id 

@commonAssignments = Assignment.where("song_id = ?", @data)
@commonPlaylists = #code to find playlists which contain any of the assignments found here 
```

我想知道从这里去哪里，提前感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:07:29.973

```
#create an array of strings made up of playlist id's

@commonAssignments = Assignment.select(:playlist_id).where("song_id = ?", @data).map &:setlist_id

#then find all records associated
    @commonPlaylists = Playlist.find(@commonAssignments) 
```

# magento - Magento - 为什么模板不更新？

> ID：11577898
> 
> 赞同：0
> 
> 时间：2012-07-20T10:55:29.640
> 
> 标签：magento

**类别层次结构**

```
Root Catalog
|___ Books 
```

我想更新一个特定类别而不影响其他类别。所以我把下面的代码放在 Admin->Catalog->Manage Categories->select Book->Custom Design->Custom Layout Update (Magento v1.7)

```
<reference name="category">
    <action method="setTemplate"><template>catalog/category/bookview.phtml</template></action>
</reference> 
```

但是，点击顶部菜单上的 Book 后，页面仍然使用 view.phtml（默认一个）。我希望使用 bookview.phtml。有没有人可以帮助我。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:04:52.033

我猜你使用了错误的参考。`<reference name="category.products">`如果您想更新类别页面包装模板或者`<reference name="product_list">`如果您想更新产品列表本身，请尝试使用。

# entity-framework - “LINQ to SQL 是一个允许将 Microsoft SQL Server 数据库直接 1-1 映射到 .NET 类的 ORM”是什么意思？

> ID：11577899
> 
> 赞同：0
> 
> 时间：2012-07-20T10:55:29.613
> 
> 标签：entity-framework, linq-to-sql

当我遇到一点时，我正在经历 LINQ to SQL 和实体框架之间的区别“LINQ to SQL 是一个对象关系映射 (ORM) 框架，它允许将 Microsoft SQL Server 数据库直接 1-1 映射到 .NET课”

谁能向我解释“将 Microsoft SQL Server 数据库直接 1-1 映射到 .NET 类”是什么意思

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T10:58:29.087

架构中的每个表和数据库都将由 ORM 中的 .Net 类表示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:53:03.440

这不一定是一个全面的答案，但它应该澄清最常见的情况。

如果用户和组之间存在多对多关系，LinqToSql 将创建 3 个类：User、UserToGroup、Group。实体框架将创建 2 个类：用户、组。

对于大多数人来说，在代码模型中公开一个 UserToGroup 类（本质上是一个关系数据库结构来解决多对多关系）是很尴尬的。在代码中从用户导航到用户所在的组更自然，然后必须通过一个额外的、无意义的类进行导航。

这通常被视为 LinqToSql 的“限制”。我想不出另一个具有此“功能”的 .NET ORM，我所知道的其他每个都支​​持实体框架方式。

# python - 是否最好返回一个匿名类或一个对象以用作“结构”？

> ID：11577900
> 
> 赞同：1
> 
> 时间：2012-07-20T10:55:33.723
> 
> 标签：python, class, object

考虑到内存使用、时钟周期或良好的 Pythonic 风格，最好这样做：

```
def func():
    class A:
       x = 10
       y = 20
    return A 
```

或这个

```
def func():
    o = object()
    o.x = 10
    o.y = 20
    return o 
```

或者是其他东西？我不想返回字典，因为我不喜欢使用方括号。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-20T11:07:04.073

我喜欢使用一种特殊的方式来制作`dict`我在[这里](http://pydoc.net/js-object/0.1/)找到的子类。看起来像：

```
class Struct(dict):
    """Python Objects that act like Javascript Objects"""
    def __init__(self, *args, **kwargs):
        super(Struct, self).__init__(*args, **kwargs)
        self.__dict__ = self 
```

这个对象可以这样使用：

```
o = Struct(x=10)
o.y = 20
o['z'] = 30
print o.x, o['y'], o.z 
```

可以以可交换的方式使用不同类型的访问。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T11:04:45.867

通常的技巧是使用[namedtuple](http://docs.python.org/library/collections.html#namedtuple-factory-function-for-tuples-with-named-fields)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-20T11:07:48.220

听起来你想要一个`namedtuple`（但它实际上是只读的）：

```
from collections import namedtuple

XYTuple = namedtuple('XYTuple', 'x y')
nt = XYTuple._make( (10, 20) )

print nt.x, nt.y 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-20T10:59:10.927

我用 dict 来处理这样的事情。Dics 有很多好处，例如列出所有键等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-20T11:11:44.770

第二种解决方案不起作用：

```
>>> o = object()
>>> o.x = 10
AttributeError: 'object' object has no attribute 'x' 
```

这是因为 object 的实例没有`__dict__`.

我同意使用方括号访问属性并不优雅。为了返回一个值对象，我的团队使用这个（这个代码当然可以改进）：

```
class Struct(object):
    """
    An object whose attributes are initialized from an optional positional
    argument or from a set of keyword arguments (the constructor accepts the
    same arguments than the dict constructor).
    """

    def __init__(self, *args, **kwargs):
        self.__dict__.update(*args, **kwargs)

    def __repr__(self):
        klass = self.__class__
        attributes = ', '.join('{0}={1!r}'.format(k, v) for k, v in self.__dict__.iteritems())
        return '{0}.{1}({2})'.format(klass.__module__, klass.__name__, attributes) 
```

使用`Struct`，您的示例可以按原样重写：

```
def func():
    return Struct(x = 10, y = 20) 
```

`Struct`over的优点`namedtuple`是您不必事先定义类型。例如，它更接近于您在 JavaScript 等语言中使用的内容。`namedtuple`具有更高效的优点，并且属性可以同时通过索引或名称访问。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-10-17T20:33:36.900

[`jsobect`](http://pydoc.net/jsobject/0.10.2/)@glglgl 的[答案](https://stackoverflow.com/a/11578092/355230)中也使用了从 [now current] 版本派生的另一种方式（但非常不同）：

```
class Struct(dict):
    def __getattr__(self, k):
        try:
            return self[k]
        except KeyError:
            return self.__getitem__(k)

    def __setattr__(self, k, v):
        if isinstance(v, dict):
            self[k] = self.__class__(v)
        else:
            self[k] = v

o = Struct(x=10)
o.y = 20
o['z'] = 30
print(o.x, o['y'], o.z)  # -> (10, 20, 30)
print(o['not_there'])    # -> KeyError: 'not_there'
print(o.not_there)       # -> KeyError: 'not_there' 
```

# visual-studio-2010 - Visual Studio 2010 中的单元测试

> ID：11577902
> 
> 赞同：0
> 
> 时间：2012-07-20T10:55:37.413
> 
> 标签：visual-studio-2010, unit-testing

显然，我一直在努力测试由我的团队中的开发人员构建的应用程序。类：Apis，从用户读取连接字符串、id 和错误消息。我返回值名称和资格权重的字典。因为我是测试中的新手，我面临很多问题，以使我的测试按预期工作。请告知在哪里我没有做错。
班级：

```
 public class Apis
{

    public Dictionary<String, String> getQualWeight(String sqlConStr, String inBin, Label lblResults)
    {
        Dictionary<String, String> qualList = new Dictionary<string, string>();
        string selectSQL = "select Name,qual_weight from Qualification_type "
                            + "where ID in (select Qualification_ID from Qualifications where BIN = @inBin)";
        con = getConn(sqlConStr);
        SqlCommand cmd = new SqlCommand(selectSQL, con);
        cmd.Parameters.AddWithValue("@inBin", inBin);
        SqlDataReader reader;
        try
        {
            con.Open();
            reader = cmd.ExecuteReader();
            while (reader.Read())
            {
                qualList.Add(reader[0].ToString(), reader[1].ToString());
            }
            reader.Close();
            return qualList;
        }
        catch (Exception err)
        {
            lblResults.Text = "error fetching qualification weight " + err.Message;
            return null;
        }
        finally
        {
            con.Close();
        }
    } 
```

我的测试：

```
[TestMethod()]
    public void getQualWeightTest()
    {
        Api target = new Api();
        string sqlConStr = "SERVER=ABC123; Database=DB; UID=id; PWD=passme;encrypt=no;enlist=false";
        string inBin = "2012-52-456"; 
        Label lblResults = null;

        lblResults.Text = " Failed";
        Dictionary<string, string> expected = new Dictionary<string,string>();
        expected.Add("Gohn", "50");
        Dictionary<string, string> actual;
        actual = target.getQualWeight(sqlConStr, inBin, lblResults);
        Assert.AreEqual(expected, actual);

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:05:36.147

看看你的代码，我有几个建议。

1.  You don't want to rely on an external resource (in this case the Database) in your unit tests. Your code could be fine but the test could fail if this database is down. Look at something like the [Repository Pattern](http://msdn.microsoft.com/en-us/library/ff649690.aspx) and pass in (or ideally inject using [Dependency Injection](http://en.wikipedia.org/wiki/Dependency_injection)) a repository rather than a connection string. Using this approach you can use a 'Fake' repository and you have complete control over the data being passed back and you remove the dependency on the database. You can also test your repository in isolation if need be.
2.  This code looks like it is in violation of the Single Responsibility Principle, it is responsible for Data Access and updating the UI. Calling out to a repository would remove the data access from the code and make it easier to test.

我找到了一个很好的指标，说明您的代码的解耦程度以及测试的容易程度。如果您在测试代码时遇到困难，它可能是重构的候选者。

# javascript - HTML5 bar chart exported from Flash does not work in IE6, IE7 or IE8

> ID：11577907
> 
> 赞同：0
> 
> 时间：2012-07-20T10:56:09.140
> 
> 标签：javascript, jquery, flash, html, adobe

I have made a graph using flash and have exported it to a HTML5 format. Its works fine in IE9,Mozilla Firefox, Google Chrome and most of the major browsers. But I want a work around to make it work in IE 6 and 7\. I tried changing the doctype but still it soen't display anything in my IE 6 browser.

HTML

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Untitled</title>
<!--Adobe Edge Runtime-->
    <script type="text/javascript" charset="utf-8" src="sample_edgePreload.js"></script>
    <style>
        .edgeLoad-EDGE-36508108 { display:none; }
    </style>
<!--Adobe Edge Runtime End-->

</head>
<body style="margin:0;padding:0;">
    <div id="Stage" class="EDGE-36508108">
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:20:15.893

Internet Explorer 6-8 渲染引擎不支持 HTML5，因为它们是建立在人们仍然用棍子狩猎猛犸象的时候，而这是在 HTML5 之前。

要在 Internet Explorer 6-8 中添加对 HTML5 的支持，请考虑使用以下 Google Chrome Frame 安装程序 Javascript：

[http://www.chromium.org/developers/how-tos/chrome-frame-getting-started/#TOC-Detecting-Google-Chrome-Frame-and-Prompting-to-Install](http://www.chromium.org/developers/how-tos/chrome-frame-getting-started/#TOC-Detecting-Google-Chrome-Frame-and-Prompting-to-Install)

# php - 调整大小并保存 html2canvas 生成的图像

> ID：11577908
> 
> 赞同：1
> 
> 时间：2012-07-20T10:56:13.357
> 
> 标签：php, javascript, jquery, image-resizing, html2canvas

这是我正在使用的脚本

```
<script src="http://code.jquery.com/jquery.min.js"></script> 
<script>window.jQuery||document.write('<script src="js/jquery-1.7.1.min.js"><\/script>');</script>
<script type="text/javascript" src="http://html2canvas.hertzen.com/js/html2canvas.js?rev032"></script> 
<script type="text/javascript">
    var date=new Date();
    var message,timeoutTimer,timer;
    var proxyUrl="http://html2canvas.appspot.com";

    function addRow(a,c,d){var b=$("<tr />").appendTo($(a));b.append($("<td />").css("font-weight","bold").text(c)).append($("<td />").text(d))}

    function throwMessage(b,a){
        window.clearTimeout(timeoutTimer);
        timeoutTimer=window.setTimeout(function(){
            message.fadeOut(function(){message.remove()})
        },
        a||2000);

        $(message).remove();
        message=$("<div />").html(b).css({
            margin:0,
            padding:10,
            background:"#000",
            opacity:0.7,
            position:"fixed",
            top:10,right:10,
            fontFamily:"Tahoma",
            color:"#fff",
            fontSize:12,
            borderRadius:12,
            width:"auto",
            height:"auto",
            textAlign:"center",
            textDecoration:"none"
        }).hide().fadeIn().appendTo("body");
    }

    $(function(){$("#recommended a").click(function(c){
            c.preventDefault();
            $("#url").val(this.href);
            $("button").click()
        });

        var a,b;$('input[type="button"]').click(function(){$(a.contentWindow).unbind("load");$(a).contents().find("body").html2canvas({canvasHeight:b.body.scrollHeight,canvasWidth:b.body.scrollWidth,logging:true})});

        $("#getscreenshot").click(function(d){
            d.preventDefault();
            $(this).prop("disabled",true);
            var c=$("#url").val();
            $("#content").append($("<img />").attr("src","http://html2canvas.hertzen.com/loading.gif").css("margin-top",40));
            var f=document.createElement("a");
            f.href=c;
            $.ajax({
                data:{xhr2:false,url:f.href},url:proxyUrl,dataType:"jsonp",success:function(e){
                    a=document.createElement("iframe");
                    $(a).css({visibility:"hidden"}).width($(window).width()).height($(window).height());
                    $("#content").append(a);
                    b=a.contentWindow.document;
                    b.open();$(a.contentWindow).load(function(){
                        var g=$(a).contents().find("body"),h={onrendered:function(j){
                            $("#content").empty().append(j);
                            $("#getscreenshot").prop("disabled",false);
                            $("base").attr("href","")
                        }, 
                        allowTaint:true,
                        taintTest:false,
                        flashcanvas:"src/flashcanvas.min.js"},
                        i=html2canvas(g,h)
                    });
                    $("base").attr("href",f.protocol+"//"+f.hostname+"/"+f.pathname);
                    e=e.replace("<head>","<head><base href='"+f.protocol+"//"+f.hostname+"/"+f.pathname+"'  />");

                    if($("#disablejs").prop("checked")){
                        e=e.replace(/\<script/gi,"<!--<script");
                        e=e.replace(/\<\/script\>/gi,"<\/script>-->")
                    }
                    b.write(e);b.close()
                }
            });
        })
    });
</script> 
```

**HTML**

```
<h1>Html2Canvas javaScript screenshot creator</h1>
<form class="well form-search"> <label for=url>Website URL:</label> 
    <input type=url id=url value="http://www.google.co.in" class="input-medium search-query"/><button class=btn id=getscreenshot>Get screenshot!</button> 
</form> 
<label for="disablejs">Disable JavaScript (recommended, doesn't work well with the proxy)</label>
<input id="disablejs" type="checkbox" checked="">
<br>
<div id=content></div> <!-- Image will be displayed here--> 
```

现在它正在生成 html 正文内容的屏幕截图

我需要调整图像大小并（存储在/上传到）本地服务器

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:37:12.620

您需要做的是通过使用 ajax 或提交表单将图像的源发送到服务器。要获取源代码，请使用以下内容：

```
var src = $("#your-image").attr('src');
$.post(url, {'source':src}, function(data){}); 
```

在php中：

```
$img = $_POST['source'];
file_put_contents('image_file', base64_decode($img)); 
```

尚未测试代码，但应该让您走上正轨。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-07T11:43:22.013

这似乎是一个好方法，而不是将图像发送到服务器。我们可以使用 drawImage 方法在另一个画布上绘制图像。

```
var c=document.getElementById("myCanvas");
var ctx=c.getContext("2d");
ctx.drawImage(img,sx,sy,swidth,sheight,x,y,width,height); 
```

sx ---- x 坐标开始剪辑的位置
sy ---- y 坐标开始剪辑的位置
swidth ---- 剪辑图像的宽度
sheight ---- 剪辑图像的高度
x ---- x 坐标 where将图像放置在画布上
y ---- y 坐标 将图像放置在画布上的位置
width ---- 要使用的图像的宽度。
height ---- 要使用的图像的高度。

在画布上绘制后，我们可以使用“ **toDataURL** ”取回图像源。

```
 finalImgSrc = mycanvas.toDataURL(); 
```

借助这个图像源，我们可以得到图像元素。

# javascript - 将 jquery onclick 绑定到这个工具提示

> ID：11577909
> 
> 赞同：2
> 
> 时间：2012-07-20T10:56:17.050
> 
> 标签：javascript, jquery

我正在使用这个[很棒](http://cssglobe.com/lab/easytooltip/03.html)的工具提示，它在悬停时显示工具提示（带有 .tooltip 函数的锚元素的标题）。这一次，我希望它在点击时显示，所以我这样做了：-

```
$(document).ready(function(){

    $(".icons a.tooltips").click(function() {
        return $($(this).attr("href")).html().easyTooltip();

        // Prevent the browser jump to the link anchor
        e.preventDefault();
    });
}); 
```

用于此的 html 如下：

```
<div class="foo">
    <a class="bar" title="Lorem ipsum" href="#"></a>
    <a class="bar" title="meaningless text" href="#"></a>
    <a class="bar" title="more meaningless text" href="#"></a>
    <a class="bar" title="even more meaningless text" href="#"></a>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:59:48.560

默认情况下，easyTooltip 使用悬停事件来确定是显示还是隐藏工具提示。此行为只能通过插件的源来更改。幸运的是，正如您可以在下面的演示中看到的那样，这非常简单。我所做的基本上是将工具提示触发器从悬停更改为单击，同时保持其余行为（和代码）与以前完全相同。

在演示中，插件代码也被嵌入。请注意我添加的注释以指出插件代码中的更改。

**更新演示：http:** [//jsfiddle.net/techfoobar/FhLLA/2/](http://jsfiddle.net/techfoobar/FhLLA/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T11:39:46.773

easytooltip 函数只需要启动工具提示。您只需调用此函数一次。

```
$(document).ready(function(){   
    $("foo a.bar").easyTooltip();
}); 
```

这将在鼠标悬停时显示工具提示。

如果您想将其更改为仅在单击时触发，则必须修改此插件的脚本或找到另一个脚本。

示例 jquery 插件将允许您指定 jquery 事件以显示您的工具提示：http: [//craigsworks.com/projects/qtip/docs/reference/#show](http://craigsworks.com/projects/qtip/docs/reference/#show)

# javascript - Draggable popup window in JavaScript

> ID：11577914
> 
> 赞同：2
> 
> 时间：2012-07-20T10:56:34.090
> 
> 标签：javascript

I have a popuo window that is created using java script. JQuery cannot be used. I want to make this popup window draggable. That is to allow it to move on mousemove. Is there anyway to make this happen in javascript.

It could be helpful if there is any single function or method in javascript. It is just a normal popup window. So there are no restrictions in it but it is developed only in javascript (cannot make use of jquery). Any help in this regard would be appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-20T08:40:54.600

```
<!DOCTYPE html>
<html>
<head>
</head>
<body>
<div>Hello, world!</div>
<button id="btn_popup">popup</button>
<div id="smoke"style="display:none;position:absolute;top:-30px;left:-30px;opacity:0.3;background-color:black;z-index:9998">...</div>
<div id="popup" style="display:none;background-color:green;position:absolute;top:0px;z-index:9999;box-shadow: 6px 6px 5px #888888;border-radius:6px;border:1px solid #4f4f4f;">
  <div id="popup_bar" style="width:100%;background-color:#aaff66;position:relative;top:0;border-radius:6px 6px 0 0; text-align:center;height:24px;cursor:move">Title<span id="btn_close" style="float:right;cursor:pointer;padding-right:6px;">[X]</span></div>
  <p>Popup Window.<br>Press ESC to close.</p>
</div>
</body>
<script>
(function(){

var SCROLL_WIDTH = 24;

var btn_popup = document.getElementById("btn_popup");
var popup = document.getElementById("popup");
var popup_bar = document.getElementById("popup_bar");
var btn_close = document.getElementById("btn_close");
var smoke = document.getElementById("smoke");

//-- let the popup make draggable & movable.
var offset = { x: 0, y: 0 };

popup_bar.addEventListener('mousedown', mouseDown, false);
window.addEventListener('mouseup', mouseUp, false);

function mouseUp()
 {
 window.removeEventListener('mousemove', popupMove, true);
 }

 function mouseDown(e){
  offset.x = e.clientX - popup.offsetLeft;
  offset.y = e.clientY - popup.offsetTop;
  window.addEventListener('mousemove', popupMove, true);
  }

  function popupMove(e){
   popup.style.position = 'absolute';
  var top = e.clientY - offset.y;
  var left = e.clientX - offset.x;
  popup.style.top = top + 'px';
   popup.style.left = left + 'px';
  }
   //-- / let the popup make draggable & movable.

   window.onkeydown = function(e){
   if(e.keyCode == 27){ // if ESC key pressed
    btn_close.click(e);
   }
   }

   btn_popup.onclick = function(e){
   // smoke
    spreadSmoke(true);
  // reset div position
   popup.style.top = "4px";
   popup.style.left = "4px";
    popup.style.width = window.innerWidth - SCROLL_WIDTH + "px";
   popup.style.height = window.innerHeight - SCROLL_WIDTH + "px";
   popup.style.display = "block";
   }

    btn_close.onclick = function(e){
    popup.style.display = "none";
     smoke.style.display = "none";
    }

   window.onresize = function(e){
    spreadSmoke();
    }

   function spreadSmoke(flg){
   smoke.style.width = window.outerWidth + 100 + "px";
    smoke.style.height = window.outerHeight + 100 + "px";
    if (flg != undefined && flg == true) smoke.style.display = "block";
    }

   }());
   </script>
    </html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:04:02.387

简单的。

有一个全局布尔变量`dragging`。然后，向您的`document.body`附加三个事件处理程序。

*   上`mousedown`，设置`dragging = true`
*   上`mousemove`，检查是否`dragging == true`。如果是，请检查`x, y`鼠标位置（在`event`对象中）。设置元素的 css：

    ```
    position: absolute
    left: x + 'px'
    top: y + 'px' 
    ```

*   上`mouseup`，设置`dragging = false`

在 上`mousedown`，您可能还想测量您单击的元素中的确切位置，因此它是元素中跟随鼠标光标的确切点，而不是元素的左上角。

而且您可能希望将整个事物包装成一个不错的类以避免全局变量并使其可重用:)

# qt - 在 Qt 中执行调试与发布版本

> ID：11577919
> 
> 赞同：4
> 
> 时间：2012-07-20T10:56:53.427
> 
> 标签：qt, debugging, build, release

如果有任何其他差异，除了嵌入在调试版本中的调试符号之外，有人可以解释一下。此外，我很想知道它们在执行二进制文件方面有何不同。正在使用哪些机制在调试版本中使用调试符号显示错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T21:33:15.963

在 qt 中编译为调试设置了编译器调用中的 -DQT_NO_DEBUG 标志，该标志在许多 qt 库中使用。正如 Jimmy 已经指出的那样，主要的性能差异来自这个来源。一个极端的例子是使用可用于检查边界的 STL 容器的调试版本。如果在调试模式下在您的代码中使用此功能，则可能需要更长的时间（Qt 不使用此功能，但在其库中引入了类似的检查）。

此外，通常优化标志会改变。对于发布 -O2 选择发布而不是优化调试

关于调试构建的一个更重要的事情是，您可以使用它来触发 pro 文件中的不同内容，例如添加定义、更改目标或针对另一组库进行编译：

```
CONFIG(debug, debug|release) {
  message("Debug")
  DESTDIR = $$DESTDIR-debug
  CONFIG += debug
  DEFINES += DEBUG
  TARGET = $$TARGET-debug
}else{
  message("Release")  
  DEFINES += QT_NO_DEBUG_OUTPUT
  DESTDIR = $$DESTDIR-release
  TARGET = $$TARGET-release
} 
```

如果您对更多详细信息感兴趣，请查看 qmake 配置文件。Linux Ubuntu：/usr/share/qt4/mkspecs/common/g++.conf /usr/share/qt4/mkspecs/common/linux.conf 和目标依赖的conf文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T21:38:27.253

“发布构建”与“调试构建”的确切定义和行为取决于构建系统和您使用的编译器。与调试版本相比，发布版本的一些常见属性：

*   调试版本通常会生成调试信息，发布版本不会。不过也有一些混合体，比如带有单独调试信息的发布版本。
*   断言不会被评估（assert(p = getFoo()); 不会分配任何东西 - 也不会断言）。所以在断言中带有副作用的表达式是个坏主意。
*   优化设置通常不同（调试版本中没有或很少优化）
*   调试输出可能被抑制
*   任何库开发人员都可能另外实现不同的行为，例如 NDEBUG 预处理器宏

# wix - How to call a function from a DLL?

> ID：11577920
> 
> 赞同：0
> 
> 时间：2012-07-20T10:56:54.107
> 
> 标签：wix, custom-action

Can I call a function from a DLL (custom action) to search for the location a program is already installed on and install my msi there?

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-20T11:30:30.760

在这种情况下，您不需要自定义操作。使用WiX 开箱即用的[DirectorySearch](http://wix.sourceforge.net/manual-wix3/wix_xsd_directorysearch.htm) / [FileSearch元素。](http://wix.sourceforge.net/manual-wix3/wix_xsd_filesearch.htm)此外，如果该程序在系统注册表中留下痕迹，[RegistrySearch](http://wix.sourceforge.net/manual-wix3/wix_xsd_registrysearch.htm)元素很有用。

**更新**：据我从您下面的评论中了解到，您有现成的功能来检测主程序安装到的路径，并且您想利用此功能在那里安装额外的插件。

您应该编写一个立即自定义操作 (CA)，它从 DLL 调用一个函数并将其安排在 AppSearch 和 LaunchConditions 之间的某个位置。此自定义操作应将结果保存到[MSI 属性](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370889.aspx)中，例如 INSTALLLOCATION。这意味着如果您有一个返回路径的函数，您可能希望将其包装到另一个函数（实际的 CA）中，该函数只会将该值保存到 INSTALLLOCATION 属性。

然后，您可以在目录结构中使用此属性，如下所示：

```
 <Directory Id="TARGETDIR" Name="SourceDir">
     <Directory Id="INSTALLLOCATION" Name="my app">
     ...
     </Directory>
  </Directory> 
```

**注意**：遵循此建议仍然需要一些有关 Windows Installer 和 WiX 的基本知识，因此我强烈建议您阅读[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/cc185688.aspx)和[WiX 教程](http://wix.tramontana.co.hu/tutorial)以获取基础知识。

# red5 - can not add scrollbar in text field

> ID：11577925
> 
> 赞同：1
> 
> 时间：2012-07-20T10:57:07.200
> 
> 标签：red5, openlaszlo

this is a chat application in openlaszlo. i write in the inputtext area. and receive the sent text in the text area. after sometime i can not see the texts in the text field. so, i want to add a scroll bar in the text area. but i cannot make it work. any ideas? thanks in advance!!

```
<canvas height="100%" width="100%" bgcolor="white" allowfullscreen="true" debug="true">

<class name="chatSender">
<attribute name="_netConnection" />
<attribute name="_sharedObject" />

<handler name="oninit">
this._netConnection = new NetConnection();
this._netConnection.connect("rtmp://115.187.37.167/oflaDemo/room1");

this._sharedObject = SharedObject.getRemote("chat", this._netConnection.uri, true);
this._sharedObject.connect(this._netConnection);
Debug.write("ChatSender initiated");
</handler>

<method name="sendMessage" args="mensaje">
Debug.write("SendMessage: " + mensaje )
this._sharedObject.send("messageHandler",mensaje);
</method>
</class>

<class name="chatReceiver">
<attribute name="_netConnection" />
<attribute name="_sharedObject" />

<handler name="oninit"><![CDATA[

this._netConnection = new NetConnection();
this._netConnection.connect("rtmp://115.187.37.167/oflaDemo/room1");

this._sharedObject = SharedObject.getRemote("chat", this._netConnection.uri, true);
this._sharedObject.connect(this._netConnection);

this._sharedObject.messageHandler = function(str) {

var textoAnterior = texto.text;
Debug.write( textoAnterior + "<br/>" + str);
texto.setAttribute("text", textoAnterior + "<br/>" + str);
};
Debug.write ("chatReceiver initiated");
]]>
</handler>
</class>

<chatReceiver name="chatRec"/>
<chatSender name="chatSen"/>

<simplelayout/>
<view width="100%" height="80%" bgcolor="white" clip="true">
<text id="texto" width="100%" height="90%" multiline="true" clip="true">
</text>
</view>

<view bgcolor="blue" width="70%">
<simplelayout axis="x"/>
<inputtext bgcolor="cyan" width="100%" id="mensajeAEnviar"/>
<button width="50" onclick="canvas.chatRec._cajaChat=texto; canvas.enviarTexto(mensajeAEnviar.text);">Send</button>
</view>

<method name="enviarTexto" args="texto">
Debug.write("enviarTexto:" + mensajeAEnviar.text);
canvas.chatSen.sendMessage(mensajeAEnviar.text);
mensajeAEnviar.setAttribute("text","");
</method>

</canvas> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T22:19:37.503

我已经删除了 Red5/chat 特定的代码，以便让您清楚地知道如何在 OpenLaszlo 中使用滚动条。对于要滚动的输入文本，不要设置高度。父视图必须剪切内容，然后当输入文本的大小大于父视图时，滚动条将激活。

```
<canvas height="100%" width="100%" bgcolor="white" allowfullscreen="true" debug="true">

    <method name="addLineOfText" args="line"><![CDATA[
        var newText = texto.text;
        if (newText != '')
          newText += '<br/>';
        newText += line;
        texto.setAttribute("text", newText);
    ]]>
    </method>

    <simplelayout/>
    <view width="200" height="150" bgcolor="#eeffee" clip="true">
        <text id="texto" width="100%" multiline="true" clip="true">
            Here are just a few lines of text for testing...<br/>
            Here are just a few lines of text for testing...<br/>
            Here are just a few lines of text for testing...<br/>
            Here are just a few lines of text for testing...<br/>
            Here are just a few lines of text for testing...
        </text>
        <scrollbar axis="y" />
    </view>

    <view bgcolor="blue" width="300">
        <simplelayout axis="x"/>
        <inputtext id="mensajeAEnviar"
                   bgcolor="cyan"
                   width="100%" />
        <button id="but1"
                width="50"
                onclick="canvas.addLineOfText(mensajeAEnviar.text)"
                text="Send" />
    </view>
>

</canvas> 
```

这是一篇博客文章，其中包含有关 OpenLaszlo 中滚动条的更多详细信息： [http ://www.antunkarlovac.com/blog/2006/11/16/using-a-scrollbar/](http://www.antunkarlovac.com/blog/2006/11/16/using-a-scrollbar/)

我已经在 SWF10 和 DHTML 运行时中使用 OpenLaszlo 5.0（主干）测试了这段代码。

# javascript - Is there a way to serialize a string in java script?

> ID：11577929
> 
> 赞同：0
> 
> 时间：2012-07-20T10:57:16.637
> 
> 标签：javascript, file, serialization, cordova

I am new to javascript. I want to store the value of a string in a file. I am able to store the string in a normal text file. But what i need is I want to serialize the data and then store it in a file so that no one can edit it.

Like what we do in java (serialization concept in java).

Can anyone help me in how to serialize a string using javascript?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T10:59:54.123

序列化，通常将对象转换为文本格式，即 Json，然后允许您将文本重新构建为对象。

在 javascript 中，您可以使用 Json 执行此操作，但是将其存储在文件中必须通过服务器端编码完成，即通过 Ajax 请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:00:03.673

就在这里！

[序列化数据](http://api.jquery.com/serialize/)

从那里你可以存储它，传递它等等。

# php - Ajax username availability check in php oop structure

> ID：11577933
> 
> 赞同：0
> 
> 时间：2012-07-20T10:57:28.243
> 
> 标签：php, ajax, oop, validation

Understanding how ajax works has been really difficult for me. I think it's mainly because, somehow, I ended up writing php code in oop structure (I am a beginner, and it happened because of this php book about oop I read when I first started learning php), and I seem to have a problem connecting php class file (functions inside it) to ajax function.

I am trying to add a real-time username availability check feature to my web application (like the one you see in twitter's signup page).

I have two files, `register.php` and `class.register.php`

Inside `register.php` file, there are some php code that fires `class.register.php` file, some html code, and some ajax code (haven't separated javascript file yet).

php part of `register.php` file looks like this,

```
<?php
require_once 'class/class.register.php';
$register = new Register();
if(isset($_POST['picked_username'])){
    $register->ajax_username();
}
?> 
```

html part of `register.php` file looks like this,

```
<input type="text" name="username_input" id="username_input" value="" />
<span id="validate_username"></span> 
```

ajax part of `register.php` file looks like this,

```
$("#username_input").keyup(function(){

    var picked_username = $("#username_input").val();
    $("#validate_username").text("loading…");

    $.ajax({
        type:"post",
        url:"register.php",
        data:{"picked_username":picked_username},
        success:function(result){
            if(result == "0"){
                $("#validate_username").text("available");
            }else if(result == "1"){
                $("#validate_username").text("not available");
            }
        },
        error:function(){
            $("#validate_username").text("something is wrong");
        }
    });
    return false;
}); 
```

So basically, when you type something in the username_input area, it sends the data to the same page (`register.php`), and then triggers `isset($_POST['picked_username'])` php code on top of the page, which then calls `ajax_username();` function in the `class.register.php` file.

And this is the `ajax_username();` function in `class.register.php` file (used PDO).

```
public function ajax_username(){
    $picked_username = $_POST['picked_username'];

    $query = "SELECT username FROM mytable WHERE username = '$picked_username' LIMIT 1";
    $result = $this->db->query($query);
    $number = $result->rowCount();

    if($number == 0){
        echo '0';
    }elseif($number == 1){
        echo '1';
    }
} 
```

And unfortunately, nothing happens. Can anyone please tell me what the problem is?

When I do UPDATE or INSERT query instead of SELECT, it actually works fine. For instance, I used a very similar code to update checkbox value in the database with ajax.

```
public function update_checkbox(){
    $check_box = $_POST['check_box'];
    $query = "UPDATE mytable SET checkbox = '$check_box' WHERE id = $myid LIMIT 1";
    $result = $this->db->query($query);
} 
```

I think this code works because it doesn't **echo** anything. And I don't think my ajax code is receiving any value from **echo**.

Please help me! I've been struggling with this problem for a while. Thank you so much in advance!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T13:55:11.750

好的，考虑一下您所说的有关返回的 HTML 的内容。你的代码是这样的...

```
<?php
require_once 'class/class.register.php';
$register = new Register();
if(isset($_POST['picked_username'])){
    $register->ajax_username();
}
?> 
```

问题（或至少部分）是在`$register->ajax_username();`被调用之后我想你的 HTML 页面的其余部分是在它之后被调用的。您将需要使用`exit()`来防止运行任何其他代码。尝试这个

```
if($number == 0){
    exit('0');
}else{
    exit('1');
} 
```

我也可以看到 rupesh-patel 的观点。以上可能是一个更优雅的解决方案。（我们真的不需要检查 0 以外的任何值）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T11:32:25.300

通过查看您的代码，我可以在 ajax_username() 函数中指出一件事

```
if($number == 0){
        echo '0';
    }elseif($number == 1){
        echo '1';
    } 
```

如果您的号码既不是 0 也不是 1 会发生什么，我认为 $number 是 NULL 因为`$result->rowCount()`返回 NULL。你没有包括这个案例。改用这个

```
if($number == 0){
        echo '0';
    }elseif($number == 1){
        echo '1';
    }
    else
    {
       echo '0'; //or any thing else
    } 
```

# ruby - Multiple war web applications in ear with JRuby rack

> ID：11577936
> 
> 赞同：0
> 
> 时间：2012-07-20T10:57:38.250
> 
> 标签：ruby, glassfish, jruby, warbler, jruby-rack

I'm trying to pack two JRuby Sinatra web apps (runtime 1.9) bundled with warbler into an ear file. After deploying in glassfish (2.1.1 or 3.1) I have a crash.

JRuby.jar, jruby-stdlib.jar and jruby-rack.jar are accesible in the classpath of both applications and both of them deploy correctly if I leave only one of them. But if I leave them two the second one always crashes while deploying for an error during rack startup:

```
[#|2012-07-20T10:00:10.743+0200|INFO|sun-appserver2.1|javax.enterprise.system.container.web|_ThreadID=18;_ThreadName=Thread-34;|PWC1412: WebModule[/licences] ServletContext.log():INFO: jruby 1.6.7.2 (ruby-1.9.2-p312) (2012-05-01 26e08ba) (Java HotSpot(TM) Client VM 1.6.0_30) [linux-i386-java]|#]

[#|2012-07-20T10:00:10.744+0200|INFO|sun-appserver2.1|javax.enterprise.system.container.web|_ThreadID=18;_ThreadName=Thread-34;|PWC1412: WebModule[/licences] ServletContext.log():INFO: using a shared (threadsafe!) runtime|#]

[#|2012-07-20T10:00:11.926+0200|INFO|sun-appserver2.1|javax.enterprise.system.container.web|_ThreadID=18;_ThreadName=Thread-34;|PWC1412: WebModule[/licences] ServletContext.log():An exception happened during JRuby-Rack startup
invalid runtime
--- System
jruby 1.6.7.2 (ruby-1.9.2-p312) (2012-05-01 26e08ba) (Java HotSpot(TM) Client VM 1.6.0_30) [linux-i386-java]
Time: 2012-07-20 10:00:11 +0200
Server: Sun GlassFish Enterprise Server v2.1.1
jruby.home: file:/usr/local/glassfish/domains/myapp-domain/applications/j2ee-apps/myapp-server/lib/jruby-stdlib.jar!/META-INF/jruby.home

--- Context Init Parameters:
com.sun.faces.forceLoadConfiguration = true
com.sun.faces.injectionProvider = com.sun.faces.vendor.GlassFishInjectionProvider
com.sun.faces.validateXml = true
jruby.compat.version = 1.9
public.root = /
rack.env = production

--- Backtrace
RuntimeError: invalid runtime
        require at org/jruby/RubyKernel.java:1042
        require at file:/usr/local/glassfish/domains/myapp-domain/applications/j2ee-apps/myapp-server/lib/jruby-stdlib.jar!/META-INF/jruby.home/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36
            Ext at /usr/local/glassfish/domains/myapp-domain/applications/j2ee-apps/myapp-server/licences-web_war/WEB-INF/gems/gems/json-1.7.3/lib/json/ext.rb:13
           JSON at /usr/local/glassfish/domains/myapp-domain/applications/j2ee-apps/myapp-server/licences-web_war/WEB-INF/gems/gems/json-1.7.3/lib/json/ext.rb:12
         (root) at /usr/local/glassfish/domains/myapp-domain/applications/j2ee-apps/myapp-server/licences-web_war/WEB-INF/gems/gems/json-1.7.3/lib/json/ext.rb:9
        require at org/jruby/RubyKernel.java:1042
        require at file:/usr/local/glassfish/domains/myapp-domain/applications/j2ee-apps/myapp-server/lib/jruby-stdlib.jar!/META-INF/jruby.home/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36
           JSON at /usr/local/glassfish/domains/myapp-domain/applications/j2ee-apps/myapp-server/licences-web_war/WEB-INF/gems/gems/json-1.7.3/lib/json/ext.rb:58
         (root) at /usr/local/glassfish/domains/myapp-domain/applications/j2ee-apps/myapp-server/licences-web_war/WEB-INF/gems/gems/json-1.7.3/lib/json.rb:54
        require at org/jruby/RubyKernel.java:1042
        require at file:/usr/local/glassfish/domains/myapp-domain/applications/j2ee-apps/myapp-server/lib/jruby-stdlib.jar!/META-INF/jruby.home/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:60
        require at file:/usr/local/glassfish/domains/myapp-domain/applications/j2ee-apps/myapp-server/lib/jruby-stdlib.jar!/META-INF/jruby.home/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:55
         (root) at /usr/local/glassfish/domains/myapp-domain/applications/j2ee-apps/myapp-server/licences-web_war/WEB-INF/gems/gems/json-1.7.3/lib/json.rb:3
        require at org/jruby/RubyKernel.java:1042
        require at /usr/local/glassfish/domains/myapp-domain/applications/j2ee-apps/myapp-server/licences-web_war/WEB-INF/./lib/licences.rb:36
         (root) at /usr/local/glassfish/domains/myapp-domain/applications/j2ee-apps/myapp-server/licences-web_war/WEB-INF/config.ru:1
  instance_eval at org/jruby/RubyBasicObject.java:1730
     initialize at /usr/local/glassfish/domains/myapp-domain/applications/j2ee-apps/myapp-server/licences-web_war/WEB-INF/gems/gems/rack-1.4.1/lib/rack/builder.rb:51
         (root) at /usr/local/glassfish/domains/myapp-domain/applications/j2ee-apps/myapp-server/licences-web_war/WEB-INF/config.ru:1

--- RubyGems
Gem.dir: /usr/local/glassfish/domains/myapp-domain/applications/j2ee-apps/myapp-server/licences-web_war/WEB-INF/gems
Gem.path:
/usr/local/glassfish/domains/myapp-domain/applications/j2ee-apps/myapp-server/licences-web_war/WEB-INF/gems
Activated gems:
  rack-1.4.1
  haml-3.1.6
  rack-protection-1.2.0
  tilt-1.3.3
  sinatra-1.3.2
  json-1.7.3

--- Bundler
undefined method `bundle_path' for Bundler:Module

--- JRuby-Rack Config
compat_version = RUBY1_9
default_logger = org.jruby.rack.logging.StandardOutLogger@171c310
err = org.apache.jasper.util.SystemLogHandler@d9b1cd
filter_adds_html = true
filter_verifies_resource = false
ignore_environment = false
initial_memory_buffer_size = 
initial_runtimes = 
jms_connection_factory = 
jms_jndi_properties = 
logger = org.jruby.rack.logging.ServletContextLogger@11196da
logger_class_name = servlet_context
logger_name = jruby.rack
maximum_memory_buffer_size = 
maximum_runtimes = 
num_initializer_threads = 
out = com.sun.enterprise.server.logging.SystemOutandErrHandler$LoggingPrintStream@31c0d7
rackup = 
rackup_path = 
rewindable = true
runtime_arguments = 
runtime_timeout_seconds = 
serial_initialization = false
servlet_context = org.apache.catalina.core.ApplicationContextFacade@1033f5a
|#]

[#|2012-07-20T10:00:11.928+0200|SEVERE|sun-appserver2.1|javax.enterprise.system.container.web|_ThreadID=18;_ThreadName=Thread-34;_RequestID=bb69f89a-3d4a-46db-9b73-34ab72248271;|WebModule[/licences]ERROR: unable to create shared application instance
org.jruby.rack.RackInitializationException: invalid runtime
 from file:/usr/local/glassfish/domains/myapp-domain/applications/j2ee-apps/myapp-server/lib/jruby-stdlib.jar!/META-INF/jruby.home/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `require'
 from /usr/local/glassfish/domains/myapp-domain/applications/j2ee-apps/myapp-server/licences-web_war/WEB-INF/gems/gems/json-1.7.3/lib/json/ext.rb:13:in `Ext'
 from /usr/local/glassfish/domains/myapp-domain/applications/j2ee-apps/myapp-server/licences-web_war/WEB-INF/gems/gems/json-1.7.3/lib/json/ext.rb:12:in `JSON'
 from /usr/local/glassfish/domains/myapp-domain/applications/j2ee-apps/myapp-server/licences-web_war/WEB-INF/gems/gems/json-1.7.3/lib/json/ext.rb:9:in `(root)'
 from org/jruby/RubyKernel.java:1042:in `require'
 from file:/usr/local/glassfish/domains/myapp-domain/applications/j2ee-apps/myapp-server/lib/jruby-stdlib.jar!/META-INF/jruby.home/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `require'
 from /usr/local/glassfish/domains/myapp-domain/applications/j2ee-apps/myapp-server/licences-web_war/WEB-INF/gems/gems/json-1.7.3/lib/json/ext.rb:58:in `JSON'
 from /usr/local/glassfish/domains/myapp-domain/applications/j2ee-apps/myapp-server/licences-web_war/WEB-INF/gems/gems/json-1.7.3/lib/json.rb:54:in `(root)'
 from org/jruby/RubyKernel.java:1042:in `require'
 from file:/usr/local/glassfish/domains/myapp-domain/applications/j2ee-apps/myapp-server/lib/jruby-stdlib.jar!/META-INF/jruby.home/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:60:in `require'
 from file:/usr/local/glassfish/domains/myapp-domain/applications/j2ee-apps/myapp-server/lib/jruby-stdlib.jar!/META-INF/jruby.home/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:55:in `require'
 from /usr/local/glassfish/domains/myapp-domain/applications/j2ee-apps/myapp-server/licences-web_war/WEB-INF/gems/gems/json-1.7.3/lib/json.rb:3:in `(root)'
 from org/jruby/RubyKernel.java:1042:in `require'
 from /usr/local/glassfish/domains/myapp-domain/applications/j2ee-apps/myapp-server/licences-web_war/WEB-INF/./lib/licences.rb:36:in `require'
 from /usr/local/glassfish/domains/myapp-domain/applications/j2ee-apps/myapp-server/licences-web_war/WEB-INF/config.ru:1:in `(root)'
 from.. 
```

Based on the error, it looks like the second application for a reason theat I can't understand is using 1.8 rubygems:

```
require at file:/usr/local/glassfish/domains/myapp-domain/applications/j2ee-apps/myapp-server/lib/jruby-stdlib.jar!/META-INF/jruby.home/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36 
```

There is no require 'rubygems' in my code or such.

My gemfile.lock is

```
 remote: http://rubygems.org/
  specs:
    haml (3.1.6)
    jruby-jars (1.6.7.2)
    jruby-rack (1.1.7)
    json (1.7.3)
    mime-types (1.19)
    rack (1.4.1)
    rack-protection (1.2.0)
      rack
    rack-test (0.6.1)
      rack (>= 1.0)
    rake (0.9.2.2)
    rest-client (1.6.7)
      mime-types (>= 1.16)
    rspec-mocks (2.11.1)
    rubyzip (0.9.9)
    sinatra (1.3.2)
      rack (~> 1.3, >= 1.3.6)
      rack-protection (~> 1.2)
      tilt (~> 1.3, >= 1.3.3)
    tilt (1.3.3)
    warbler (1.3.5)
      jruby-jars (>= 1.4.0)
      jruby-rack (>= 1.0.0)
      rake (>= 0.8.7)
      rubyzip (>= 0.9.4)

PLATFORMS
  x86-mingw32

DEPENDENCIES
  haml
  json
  rack-test
  rest-client
  rspec-mocks
  sinatra
  warbler 
```

Thanks a lot in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T06:53:17.883

看起来默认情况下 glassfish jar 文件在战争应用程序之间共享，并且看起来 jruby-rack 不喜欢到处共享。

在我的案例中，需要对 sun-web.xml 进行一些更改以隔离类加载器

[http://docs.oracle.com/cd/E19316-01/820-4336/beadh/index.html](http://docs.oracle.com/cd/E19316-01/820-4336/beadh/index.html)

# ruby-on-rails - Ruby on Rails：搜索表单 - 多个搜索字段

> ID：11577937
> 
> 赞同：5
> 
> 时间：2012-07-20T10:57:38.703
> 
> 标签：ruby-on-rails, ruby, forms, search, textbox

我正在尝试创建一个允许用户搜索数据库的应用程序。搜索页面布局将与一些下拉菜单一起运行，这些下拉菜单将显示数据库中已有的数据以缩小搜索范围，以及允许用户输入“项目名称”等关键字的文本框。我在获取 rails 以获取已在搜索表单中输入的所有信息并执行一次大搜索时遇到问题。

这是我的搜索布局的一部分：

```
<%= form_tag search_path, :method => 'get' do %>

<%= hidden_field_tag :direction, params[:direction] %>
 <%= hidden_field_tag :sort, params[:sort] %>
<p>
<%= text_field_tag :search, params[:search] %>
<%= submit_tag "Search Project Name", :project_name => nil %>
</p>
<p>
<%= text_field_tag :search, params[:search] %>
<%= submit_tag "Search Client", :client => nil %>
</p>
<% end %> 
```

这是我在项目控制器中的索引和搜索操作：

```
def index
@projects = Project.all

respond_to do |format|
  format.html # index.html.erb
  format.json { render :json => @projects }
 end
end

def search

@project_search = Project.search(params[:search]).order(sort_column + ' ' + sort_direction).paginate(:per_page => 5, :page => params[:page])

end 
```

这是我的模型/project.rb 文件的一部分

```
def self.search(search)
if search
  where('project_name LIKE ?', "%#{search}%") || where('client LIKE ?', "%#{search}%")
else
  scoped
end
end 
```

如您所见，我只是尝试搜索 project_name 或客户端。如果我能做到这一点，我会将它扩展到其他领域。

目前的功能是，当我尝试在两个框中搜索它时，它会覆盖一个框，并且只进行其中一个字段搜索。

我是 ROR 的新手，希望有人能提供帮助。任何建议将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T11:26:50.293

我想建议一些你可能想做的事情。首先，在控制器中除了 index 方法之外还有一个搜索方法是不必要的，因为它们都在呈现项目集合。

所以首先，我会改变：

```
<%= form_tag search_path, :method => 'get' do %> 
```

至

```
<%= form_tag projects_path, :method => 'get' do %> 
```

这将改为调用 index 方法。

我接下来建议将搜索逻辑本身放入模型中。

在您的 Project 类中，添加以下方法：

```
def self.search search_term
  return scoped unless search_term.present?
  where(['project_name LIKE ? OR client LIKE ?', "%#{search_term}%", "%#{search_term}%"])
end 
```

最后，修改 index 的控制器操作，如下所示：

```
@projects = Project.search(params[:search]).all 
```

实际上，您所做的是仅在存在术语时才进行搜索，否则会链接范围。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-23T13:49:04.953

> **这个问题已经在另一个问题中解决了：[Ruby on Rails: Advanced search](https://stackoverflow.com/questions/11609005/ruby-on-rails-advanced-search/11610450#11610450)**

根据您的问题，@Chris Wise 假设您的`projects`表中有两列：`project_name`和`client`.

我可能错了，但我认为您实际上有两个模型，`Client`并且`Project`客户有很多项目。如果是这样，您需要在每个模型中定义搜索：

客户型号：

```
def self.search search_term
  return scoped unless search_term.present? 
  where(['client_name LIKE ?', "%#{search_term}%"]) #client_name means the column name, change it to the correct name.
end 
```

项目型号：

```
def self.search search_term
  return scoped unless search_term.present? 
  where(['project_name LIKE ?', "%#{search_term}%"]) #project_name means the column name, change it to the correct name.
end 
```

你的表格：

```
<%= form_tag projects_path, method: :get do %>
  <%= text_field_tag :project_name, params[:project_name] %>
  <%= text_field_tag :client, params[:client] %>
  <%= submit_tag "Search", name: nil %>
<% end %> 
```

然后你的控制器：

```
#return all projects that match the search criteria
@project_search = Project.search(params[:project_name]).all
#return all clients that match the search criteria
@clients_search = Client.search(params[:client]).all 
```

我希望它有帮助...

# jquery - FadeIn 不适用于 Load 功能

> ID：11577940
> 
> 赞同：1
> 
> 时间：2012-07-20T10:57:53.557
> 
> 标签：jquery, fadein

我有一个关于 Jquery 淡入淡出的问题。我正在尝试在 div 上使用它，但它不起作用，即使在第一次隐藏它时也是如此。

我正在使用此代码在加载页面时填充 DIV：

```
$('#pagebody').html('<p><img src="/common/images/loader.gif" width="24" height="24" /></p>');
$('#pagebody').load("useradmin.php").hide().fadeIn('slow'); 
```

首先它加载一个小预加载图像，然后加载我想要淡入的 div 的内容。为什么这不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:06:10.863

`$.load()`是异步的 - 在这种情况下，这意味着`.hide().fadeIn()`将在加载完成之前执行。将 fadeIn 放入一个回调函数，该函数将在内容加载*后执行：*

```
$('#pagebody').load("useradmin.php", function() {
    $( this ).hide().fadeIn('slow');
}); 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:06:40.170

你应该写这样的东西。

```
 $('#pagebody').html('<p><img src="/common/images/loader.gif" width="24" height="24" /></p>').load("useradmin.php", function(){
       $('#pagebody').hide().fadeIn('slow');

    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T11:06:52.123

```
$('#pagebody').load('useradmin.php', function() {
  $(this).fadeIn('slow');
}); 
```

那应该工作...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T11:07:09.373

不确定我是否得到问题，但我猜等到内容加载后再进行任何褪色是个好主意？

```
$('#pagebody').hide()
   .html('<p><img src="/common/images/loader.gif" width="24" height="24" /></p>')
   .load("useradmin.php", function() {
       $(this).fadeIn('slow');
   }); 
```

另一方面，`load()`将替换添加的内容`html()`，因此您使用 html() 添加的`<p>`and`<img>`元素被 useradmin.php 中的内容覆盖，但由于它是预加载器，我猜这是预期的效果？

# c# - 如何在 asp.net mvc 域名/用户名中进行路由，以便每个用户都有他的“用户名”，就像 facebook 一样

> ID：11577951
> 
> 赞同：4
> 
> 时间：2012-07-20T10:58:31.553
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-routing

如何在 asp.net mvc 域名/用户名中进行路由，以便每个用户都有他的“用户名”，就像 facebook 一样

先感谢您！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T11:01:45.717

您只需使用用户名部分作为 {id} 元素，并有一个默认的 {action}。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T11:02:45.027

```
routes.MapRoute(
           "UserController", // Route name
            "User/{username}", // URL with parameters
            new { controller = "UserService", action = "UserInfo" } 
```

在 UserController 中执行一个以用户名作为参数的操作：

```
public ActionResult UserInfo(string username)
{
    ///... do your magic here
} 
```

请注意，我没有编译它，因此没有测试它:-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T11:12:12.617

试试这个

```
 routes.MapRoute(
           "users", // Route name
           "{username}", // URL with parameters
           new { controller = "Home", action = "User" } // Parameter defaults
       ); 
```

这将是第一个 MapRoute，动作就像

```
 public ActionResult User(string username)
    {
        return View();
    } 
```

# c# - 如何在打印批量 pdf 时通过打印机设置

> ID：11577956
> 
> 赞同：0
> 
> 时间：2012-07-20T10:58:50.827
> 
> 标签：c#, vb.net, pdf, printing, vbscript

我使用了以下代码： -

```
 Process objP = new Process();
 objP.StartInfo.FileName = "C:\\pdfs\\A007D_EDIQ61281.pdf";
 // FileName(.pdf) to print.
 //objP.StartInfo = new ProcessStartInfo(strFilePath);
 objP.StartInfo.WindowStyle =
 ProcessWindowStyle.Hidden; //Hide the window.
 objP.StartInfo.Verb = "print";
 objP.StartInfo.Arguments = "/p /h " + "C:\\pdfs\\A007D_EDIQ61281.pdf" + " " + "KONICA MINOLTA 190f GDI";
 objP.StartInfo.CreateNoWindow = true;//!! Don't create a Window.
 objP.Start();
 objP.CloseMainWindow();
 MessageBox.Show("All done"); 
```

但是如何在参数中传递设置，例如 - 订书钉或双面打印或纵向/横向。我也看过这篇文章 - [http://www.codeproject.com/Articles/6899/Changing-printer-settings-using-C](http://www.codeproject.com/Articles/6899/Changing-printer-settings-using-C) 但它没有多大帮助，因为我不知道如何结合这两个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:03:50.910

没有办法告诉你一个通用的答案。最后，它实际上取决于与“打印”动词相关的程序以及它如何解释参数（以及它接受哪些参数）。

您不能将两种方法（您的方法和链接的方法）结合起来，因为您的方法取决于外部程序，而链接的示例会自行打印文档（您必须编写自己的“导入过滤器”（不要）不要这样做））。

但是，您可以使用预制/第三方库。有些链接在此页面右侧的**相关下方。**

# decimal - 入库价含税

> ID：11577961
> 
> 赞同：0
> 
> 时间：2012-07-20T10:59:06.870
> 
> 标签：decimal

我有一个收银系统，其中有价格和税金字段。输入的价格不含税（按照美国的惯例）。

对于欧洲的一些人来说，他们喜欢在价格中包含税费。例子：

含税 30.00 税率 10%

为了存储不含税的价格，价格将为：27.2727273

问题是，在我的系统中，我只允许 2 个小数点的价格。

最好的方法是增加价格字段允许的小数位数并为英国客户计算不含税的价格并存储它？

我需要多少小数点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:45:39.263

If we are talking about currency you need more the two decimal point accuracy. I would say you need at least 4 decimal point accuracy for the simple fact. 1/100 of a cent and 1/1000 of a cent given enough transactions CAN be a good sum of money

> Is the best way to do this to increase the number of decimal points allowed for the price field and calculate the price without tax for UK customers and store it?

The solution to your problem is to store 3 numbers.

*   Price of the item without Tax.

*   Amount of Tax

*   Total Price with Tax

This would allow you to store the same information for any item, for any customer, all that matters is how they input and/or display the price.

Sadly, this was a little long for a comment, and since there is no code I can't supply any.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:08:54.757

我认为你最好的选择是根本不存储税额。

存储适用的起始/截止日期的*税率*，并在需要时通过将该税率应用于价格来得出税额。当税率发生变化时，这也将使您的喜欢变得更容易（因为不久前英国的增值税税率没有变化）。

对于实际价格，您应该能够获得小数点后 2 位，因为四舍五入将应用于每笔交易，因为它们发生在“现实世界”中 - 即没有人支付 6.66 英镑和三分之二，将四舍五入为 6.67 英镑。

如果您交易的不是离散的实物（石油、外币、股票），那么是的，您需要能够记录最低货币面额的分数。

# visual-studio - VS.NET 2012 RC Crash on Web Publish with System.UnauthorizedAccess

> ID：11577963
> 
> 赞同：0
> 
> 时间：2012-07-20T10:59:17.460
> 
> 标签：visual-studio, iis-7.5, windows-server-2008-r2

每次我尝试使用 Web Publish 工具在 Windows 2008 Server 上发布 MVC4 网站时，VS.NET 都会因 System.UnauthorizedAccess 而崩溃。VS.NET exe 以完全管理员权限运行，并且目标文件夹具有分配给 IIS_IURS 用户的完全控制权限。

在同一台机器上，VS.NET 2010 发布时不会崩溃。

![网络发布设置](../Images/098272c174707bc4d4e6078258ac63e2.png)

![错误](../Images/f77bf930f8a977ec522bfdba160769b1.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T14:32:34.197

我有同样的问题，当我在下面的地址安装建议的补丁时，它解决了我的问题。

[http://blogs.msdn.com/b/webdev/archive/2012/07/12/visual-studio-2012-rc-web-tooling-extensions-update.aspx](http://blogs.msdn.com/b/webdev/archive/2012/07/12/visual-studio-2012-rc-web-tooling-extensions-update.aspx)

背景信息：这是可能与您的类似的连接问题：

[http://connect.microsoft.com/VisualStudio/feedback/details/747721/vs-2012-crashing-when-trying-to-run-publish](http://connect.microsoft.com/VisualStudio/feedback/details/747721/vs-2012-crashing-when-trying-to-run-publish)

# javascript - 通过 setRequestHeader 授权

> ID：11577979
> 
> 赞同：5
> 
> 时间：2012-07-20T11:00:20.563
> 
> 标签：javascript, authentication

我发现这段代码可以使用 setRequestheader 和 Ajax 进行身份验证。

```
this.xmlDoc.setRequestHeader('Authorization','Basic ' + Base64.encode("User:Password")); 
```

不幸的是，我不了解 Ajax，而且 Base64 似乎不是我可以参考的类或方法。这种基本加密有替代方案吗？还是我可以从 Javascript 调用的模拟编码函数？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:14:59.740

您需要一个对 User:Password 字符串进行 Base64 编码的函数。请参阅[这个问题](https://stackoverflow.com/questions/246801/how-can-you-encode-to-base64-using-javascript)，它提供了几个在 javascript 中执行此操作的好选择。

# iphone - 如何从未使用 Cocoa-Touch 创建的方法访问动态加载的标签？

> ID：11577980
> 
> 赞同：0
> 
> 时间：2012-07-20T11:00:26.450
> 
> 标签：iphone, objective-c, cocoa-touch

我需要从没有创建标签的方法中设置标签的文本。

标签是在viewdidload上创建的，而需要更改标签的方法不在viewdidload中。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T11:19:12.820

您可以将该 UILabel 创建为属性：

在 YourClass.h

```
@property (nonatomic, retain) UILabel *myLabel; 
```

在 YourClass.m 中合成它

```
@synthesize myLabel; 
```

现在，当您在 viewDidLoad 方法中创建此标签时，请这样做

```
self.myLabel = [[UILabel alloc] init] autorelease];
//set the frame, color and text properties here
self.myLabel.text = @"initial text";
self.myLabel.frame =  CGRectMake(0,0,30,100); 
```

每当您需要访问 UILabel 来更新它的任何属性（如文本）时，您都可以使用 self 访问器来执行此操作：

```
self.myLabel.text = @"Updated text here"; 
```

执行此操作时，请确保在 viewDidUnload 中将 myLabel 设置为 nil 以正确处理内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:02:21.107

将 uilabel 作为类的实例变量。在 viewdidload 中对其进行初始化，并以您想要的任何方法设置文本。

编辑：检查此代码示例：在标题中：

```
UILabel *myLabel; 
```

在实施中：

```
-(void) viewDidLoad {
     myLabel = [[UILabel alloc] initWithFrame:myFrame]];
     [self.view addSubview:mylabel]
 }
 -(void)sumOtherMethod {
     myLabel.text = @"this is my text";
 } 
```

# python - 是否有更清晰/更好的方法来按字段计算不同项目的数量？

> ID：11577982
> 
> 赞同：2
> 
> 时间：2012-07-20T11:00:29.820
> 
> 标签：python, django, django-models

我希望编写一个通用函数，给定一个查询集，返回模型每一列的不同字段的数量。

我到目前为止的功能是：

`[queryset.aggregate(Count(x, distinct=True)) for x in [x.get_attname() for x in queryset.model._meta._fields()]]`

然而，这相当hacky/丑陋/不清楚。我想知道是否有更简单/更清晰的方法来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T13:35:30.500

您可以将[多个](https://docs.djangoproject.com/en/dev/topics/db/aggregation/)聚合传递给`.aggregate`，因此您可以这样做以减少对数据库的调用。下面的代码未经测试，只是为了说明我的意思。

```
args = [Count(x.get_attname(), distinct=True)) for x in queryset.model._meta._fields()]
queryset.aggregate(*args) 
```

# php - 帖子不工作

> ID：11577988
> 
> 赞同：0
> 
> 时间：2012-07-20T11:00:47.563
> 
> 标签：php, javascript, jquery

这是我的 jscript 代码：当我运行它时，我没有得到任何响应，并且 firefox webconsole 显示正常

```
dataS = friendMediaArray; // array?
var jsonS = JSON.stringify(dataS);
$(function() { 
   $("#xbut").click(function() { 
      var data = {}; 
      data.dataArray = friendMediaArray; // I'm setting it as a property here 

      var jsonS = JSON.stringify(data); 
      jQuery.ajax({ 
          type: "GET", 
          data: {type: "stream", namef: jsonS }, 
          url: 'catch.php', 

        success: function (msg) 
                { alert("OK");alert(data); console.log(data); },
        error: function (err)
        { alert(err.responseText)}
    });}); }); 
```

捕获.php

```
<?php 
if($_GET['type']=='stream'){ 
     $obj = json_decode($_GET['namef']); 
   for($i=0;$obj[$i];$i++){ 
    echo $obj[$i]->{'namef'}." "; 
    } 
} 

json_decode($_GET['namef']); 

?> 
```

即使使用 var_dump($_POST) 我也无法定义它似乎没有发送

GRT罗伯特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:06:51.230

```
dataString = friendMediaArray; // array? 
```

如果你的数据是一个数组，你真的不应该用“字符串”来命名它！

```
var jsonString = JSON.stringify(dataString); 
```

现在，你`jsonString`是一个真正的字符串，并且

```
jsonString[field.name] = field.value; 
```

将*一事无成*。您不能设置原始字符串值的属性。相反，您需要将它们设置为对象的属性，然后您可以对其进行序列化：

```
$(function() {
   $("#xbut").click(function() {
      var data = {};
      data.dataArray = friendMediaArray; // I'm setting it as a property here
      $.each($(':input').serializeArray(), function(i,field){
           data[field.name] = field.value; 
      });
      var jsonString = JSON.stringify(data);
      jQuery.ajax({
          type: "GET",
          data: {type: "stream", namef: jsonString },
          ...
      });
   });
}); 
```

另请注意，当您使用`GET`url 参数发送数据时，`$_POST`显然是空的。然而，`json_decode($_GET['namef']);`应该给你你想要的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T11:05:30.893

您正在使用类型：“GET”，请尝试：

```
var_dump($_GET); 
```

# php - 下拉列表带有 chrome 中的滚动条

> ID：11577990
> 
> 赞同：0
> 
> 时间：2012-07-20T11:00:58.050
> 
> 标签：php, html, css, drop-down-menu

在 chrome 中，某些情况下下拉列表项带有滚动条，我想在下拉单击时显示所有没有滚动条的项目，在我的情况下，所有项目都在下拉列表中可用，但只有一个显示，需要滚动才能看到其他.

下面给出的代码。

```
<div class="controls">
                            <select name="teamId" id="teamIdSel" class="span2" >
                                 <?php foreach ($team_list as $team): ?>
                                    <option class="teamSelOpt" diviID="<?php echo $team->division_id; ?>" value="<?php echo $team->team_id; ?>" <?php if ($team->team_id == $teamId) { ?> selected <?php } ?> ><?php echo $team->name; ?></option>
                                <?php endforeach; ?>    
                            </select>
                        </div>

<input type="button" onclick="onChangeDivision('10', null, null)"/> 
```

在这里，我在 javascript 中使用“diviID”动态显示和隐藏选项。

下面给出的javascript函数。

```
 function onChangeDivision(id, teamId, clientUserID){
    if(id){
        $('.teamSelOpt').each(function() {
            var diviId = $(this).attr("diviID");
            if(diviId == id){
                $(this).show();
            }else{
                $(this).hide();
            }
        });
}
} 
```

当我删除“$(this).hide();” 函数中的代码可以正常工作。但结果将违反我的要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:06:09.860

您将不得不改用列表并在悬停/点击时显示它，就像 Google 在 Google plus 中所做的那样。您不能隐藏下拉菜单的滚动条。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:48:07.093

通常这些选择、文件上传等是浏览器、操作系统特定的，所以我们不能按照我们的意愿设置它们的样式。为了在所有浏览器上实现选择框的一致性，有两种方法

**方法1：-**

您可以使用 divs 或 ul & li 创建自己的弹出类型的东西，并将其绝对定位在所需的位置，并在单击框时显示它。

**方法2：-**

您可以简单地使用 jquery 插件[dropkick](http://jamielottering.github.com/DropKick/)，您可以根据需要设置选择框的样式，并且它们在所有浏览器上看起来都一样

# android - Android的默认度量单位？

> ID：11577992
> 
> 赞同：3
> 
> 时间：2012-07-20T11:00:59.173
> 
> 标签：android, layout

所以我现在注意到我在布局中的任何地方都使用了“dip”而不是“dp”，但由于某种原因，它起作用了。为什么？它会回到dp吗？或者我得到了什么单位？

# python - 如何使用由南管理的现有应用程序设置 django-hstore？

> ID：11577993
> 
> 赞同：23
> 
> 时间：2012-07-20T11:01:10.397
> 
> 标签：python, django, psycopg2, hstore

我尝试使用[这个不错的教程](http://www.craigkerstiens.com/2012/06/11/schemaless-django/)来使用 django-hstore 。我在 South 管理的现有应用程序中添加了两个类：

```
class Attribute(models.Model):
    name  = models.CharField(max_length=200, verbose_name=_("name"))
    description = models.CharField(max_length=1000, verbose_name=_("description"))

class Measure(models.Model):
    attribute = models.ForeignKey(Attribute)
    data = hstore.DictionaryField(db_index=True)
    objects = hstore.HStoreManager() 
```

做了一个`schemamigration --auto`，启动了迁移，得到了一个`django.db.utils.DatabaseError: type "hstore" does not exist`.

好的，tuto 似乎不完整，django-hstore[文档](https://github.com/jordanm/django-hstore/)告诉我使用自定义数据库后端，我在我的设置文件中添加了以下内容：

```
DATABASES['default']['ENGINE'] = 'django_hstore.postgresql_psycopg2' 
```

然后我`KeyError: 'default'`进去了`south/db/__init__.py", line 78`。此时，intertubes + 一些试验/错误将我指向`SOUTH_DATABASE_ADAPTERS`设置变量，我将以下内容添加到设置中：

```
SOUTH_DATABASE_ADAPTERS = {'default': 'south.db.postgresql_psycopg2'} 
```

新错误：

```
File ".../psycopg2/extras.py", line 769, in register_hstore
"hstore type not found in the database. "
psycopg2.ProgrammingError: hstore type not found in the database. please install it from your 'contrib/hstore.sql' file 
```

现在这很奇怪，因为我安装了 hstore 扩展：

```
$ sudo -u postgres psql
create extension hstore;
postgres=# CREATE EXTENSION hstore;
ERROR:  extension "hstore" already exists
postgres=# \dx
                           List of installed extensions
  Name   | Version |   Schema   |                   Description                    
---------+---------+------------+--------------------------------------------------
 hstore  | 1.0     | public     | data type for storing sets of (key, value) pairs
 plpgsql | 1.0     | pg_catalog | PL/pgSQL procedural language
(2 rows)
postgres=# SELECT 'hstore'::regtype::oid;
  oid  
-------
 57704
(1 row) 
```

这应该如何工作？我正在使用 Django 1.4、Postgresql 9.1。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-20T15:05:31.760

我最终发现没有为我使用的特定数据库安装 hstore 扩展：

```
$ psql -d mydb
psql (9.1.4)
Type "help" for help.

mydb=# SELECT t.oid, typarray FROM pg_type t JOIN pg_namespace ns ON typnamespace = ns.oid WHERE typname = 'hstore';
 oid | typarray 
-----+----------
(0 rows)

mydb=# \dx
                 List of installed extensions
  Name   | Version |   Schema   |         Description          
---------+---------+------------+------------------------------
 plpgsql | 1.0     | pg_catalog | PL/pgSQL procedural language
(1 row)

mydb=# create extension hstore;
WARNING:  => is deprecated as an operator name
DETAIL:  This name may be disallowed altogether in future versions of PostgreSQL.
CREATE EXTENSION
mydb=# \dx
                           List of installed extensions
  Name   | Version |   Schema   |                   Description                    
---------+---------+------------+--------------------------------------------------
 hstore  | 1.0     | public     | data type for storing sets of (key, value) pairs
 plpgsql | 1.0     | pg_catalog | PL/pgSQL procedural language
(2 rows)

mydb=# SELECT t.oid, typarray FROM pg_type t JOIN pg_namespace ns ON typnamespace = ns.oid WHERE typname = 'hstore';
  oid  | typarray 
-------+----------
 58800 |    58805
(1 row) 
```

我认为在 hstore 安装后创建的数据库将包含扩展。似乎并非如此，[我是否误解了扩展的工作原理？它们是特定于数据库的吗？](https://stackoverflow.com/q/11584749/343834)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-09-14T11:08:20.877

Django 现在包含[一个迁移操作来`hstore`在 PostgreSQL 中创建扩展](https://docs.djangoproject.com/en/stable/ref/contrib/postgres/operations/#hstoreextension)：

```
from django.contrib.postgres.operations import HStoreExtension

class Migration(migrations.Migration):
    ...

    operations = [
        HStoreExtension(),
        ...
    ] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-05-13T08:00:07.580

自从我上次回答以来，Django 弃用并删除了`pre_syncdb`信号。我已经更新了答案以适应更新的版本。新版本的基本机制是相同的，因为这两种方法都依赖于信号和仅在 HSTORE 扩展不存在时执行的 SQL 代码。

# 姜戈 1.8+

由于 Django 引入了 DB 迁移，`pre_syncdb`信号[*在 1.7 中被标记为弃用，*](https://docs.djangoproject.com/en/1.8/ref/signals/#django.db.models.signals.pre_syncdb)并[**在 1.9 中被完全删除**](https://docs.djangoproject.com/en/1.9/ref/signals/#management-signals)。然而，他们引入了一个新的信号，称为[`pre_migrate`](https://docs.djangoproject.com/en/1.10/ref/signals/#pre-migrate)它可以以相同的方式使用。

**例子：**

```
"""
This is an example models.py which contains all model definition.
"""
from django.db import connection, models
from django.db.models.signals import pre_migrate
from django.dispatch import receiver
import sys

# sender is optional but will be called for every pre_migrate signal if removed
@receiver(pre_migrate, sender=sys.modules[__name__])
def setup_postgres_hstore(sender, **kwargs):
    """
    Always create PostgreSQL HSTORE extension if it doesn't already exist
    on the database before syncing the database.
    Requires PostgreSQL 9.1 or newer.
    """
    cursor = connection.cursor()
    cursor.execute("CREATE EXTENSION IF NOT EXISTS hstore")

# ...rest of your model definition goes here
class Foo(models.Model):
    # ...field definitions, etc. 
```

* * *

# Django 1.6+（原始答案）

确保在此期间安装 HSTORE 扩展的一种方法`./manage.py syncdb`是利用**Django 1.6**引入的文件中`pre_syncdb`的信号。`models.py`

 ****例子：**

```
"""
This is an example models.py which contains all model definition.
"""
from django.db import connection, models
from django.db.models.signals import pre_syncdb
from django.dispatch import receiver
import sys

# sender is optional but will be called for every pre_syncdb signal if removed
@receiver(pre_syncdb, sender=sys.modules[__name__])
def setup_postgres_hstore(sender, **kwargs):
    """
    Always create PostgreSQL HSTORE extension if it doesn't already exist
    on the database before syncing the database.
    Requires PostgreSQL 9.1 or newer.
    """
    cursor = connection.cursor()
    cursor.execute("CREATE EXTENSION IF NOT EXISTS hstore")

# ...rest of your model definition goes here
class Foo(models.Model):
    # ...field definitions, etc. 
```

如果您不想为每个新的数据库实例运行它，我发现这很有用。此方法也适用于测试数据库设置期间的 Django 单元测试。

有关 Django 中信号挂钩的更多信息： [https ://docs.djangoproject.com/en/1.6/ref/signals/#management-signals](https://docs.djangoproject.com/en/1.6/ref/signals/#management-signals)**

# asp.net - 数据列表编辑不起作用？

> ID：11577994
> 
> 赞同：0
> 
> 时间：2012-07-20T11:01:12.123
> 
> 标签：asp.net, datalist

我正在研究数据列表项编辑概念，我认为我已完成所有代码正确，但是当单击编辑按钮时显示空白页面，请查看此问题并发送任何错误和拯救建议

代码

```
 <asp:DataList ID="DataList1" runat="server" DataKeyField="outlet_id" OnEditCommand="DataList1_EditCommand" OnCancelCommand="DataList1_CancelCommand" RepeatColumns="2"> 
        <ItemTemplate>
        <asp:Label ID="Label1" runat="server" Text='<%#Eval("outlet_id") %>' ></asp:Label>
            <asp:Label ID="lbl" runat="server" Text='<%#Eval("company_name") %>' ></asp:Label>
            <asp:Button ID="edit" runat="server" Text="Edit" CommandName="edit"  />
            <asp:Button ID="delete" runat="server" Text="Del" CommandName="del" />
        </ItemTemplate>
        <EditItemTemplate>
        id<asp:TextBox ID="id" runat="server" Text='<%#Eval("outlet_id") %>'></asp:TextBox> 
        name<asp:TextBox ID="name" runat="server" Text='<%#Eval("company_name") %>'  ></asp:TextBox>
            <asp:Button ID="Button2" runat="server" CommandName="update" Text="update" />
            <asp:Button ID="Button3" runat="server" CommandName="cancel" Text="Cancel" />
        </EditItemTemplate>
    </asp:DataList>

    </form>
</body> 
```

和下面的c#代码

页面加载

```
 protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        bind();
    }

} 
```

编辑命令代码

```
protected void DataList1_EditCommand(object source, DataListCommandEventArgs e)
    {
        DataList1.EditItemIndex = e.Item.ItemIndex;
        DataList1.DataBind();

    } 
```

取消命令代码

```
protected void DataList1_CancelCommand(object source, DataListCommandEventArgs e)
{
    DataList1.EditItemIndex = -1;
    DataList1.DataBind();
} 
```

这是数据列表绑定

```
protected void bind()
{
    SqlConnection con = new SqlConnection(strconnection);
    con.Open();
    string qry = "select top 10 outlet_id,company_name from outlet_table ";
    SqlDataAdapter Da = new SqlDataAdapter(qry, con);
    DataSet ds = new DataSet();
    Da.Fill(ds, "outlet");
    DataList1.DataSource = ds;
    DataList1.DataBind();
} 
```

这是单击编辑按钮后显示的客户端 html 数据

```
<body>
<form name="form1" method="post" action="Demo.aspx" id="form1">
<div>
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="zVlNF4jkNpf9ZmIBtYaHSdSPa9l8zKVA4H0JXxnhqVytzfrbVWUuOuY8004hXYRY8KuBKqPKgV3kS4RQBegrJQ5LErL3VdV9TeluNoxAZLtDu0/62xR8Ij/jD638pPKb">
</div>

<div>

    <input type="hidden" name="__VIEWSTATEENCRYPTED" id="__VIEWSTATEENCRYPTED" value="">
</div>

    </form>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T20:10:42.487

您需要将数据重新绑定到 Datalist。

这个：

```
protected void DataList1_EditCommand(object source, DataListCommandEventArgs e)
    {
        DataList1.EditItemIndex = e.Item.ItemIndex;
        DataList1.DataBind();

    } 
```

应该是这样的：

```
protected void DataList1_EditCommand(object source, DataListCommandEventArgs e)
    {
        DataList1.EditItemIndex = e.Item.ItemIndex;
        bind();

    } 
```

在回发时，Datalist 会丢失其数据源并再次需要它。

# jquery - Backbone.js - 旅游行程设计/存储 - 链接列表

> ID：11577997
> 
> 赞同：0
> 
> 时间：2012-07-20T11:01:26.090
> 
> 标签：jquery, backbone.js

我正在使用一天模型对象作为行程集合的一部分来显示旅行行程（如下所示）。

第 1 天 2012 年 8 月 5 日 “前往 SFO”
第 2 天 2012 年 8 月 6 日 “Blah Blah”
第 3 天 2012 年 8 月 7 日 “Blah Blah”
第 4 天 2012 年 8 月 8 日 “回家！”

问题：

1.  当我从上面的计划中删除说第 3 天（这不是问题）时，我希望将第 4 天重命名为第 3 天，并将其日期更改为 8 月 7 日而不是 8 月 8 日。

实现它的最佳/骨干方式是什么？

1.  当删除第 3 天时，是否意味着第 4 天的索引现在减少了 1？还是访问第 4 天的索引保持不变？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T11:04:00.997

有一个主干集合“Days”，模型为“day”。所以当你删除一个模型时。您刷新与集合绑定的视图。

是的，第 4 天的指数减少了 1。

# 编辑-1

Days 集合具有绑定到其模型的删除功能的功能。此函数计算索引和哈希。

# cocoa - 非基于文档的 Cocoa 应用程序中的多个窗口

> ID：11577998
> 
> 赞同：0
> 
> 时间：2012-07-20T11:01:27.183
> 
> 标签：cocoa, osx-lion, nswindowcontroller

我正在构建一个基于非文档的可可应用程序，我希望其行为如下：

*   主窗口包含一个带有项目列表的表视图（由 Core Data 支持）。
*   每个项目都应在自己的窗口中打开
*   同样，单击新项目按钮应该会打开一个新项目窗口，同时可以打开多个这样的窗口。

在我当前处理表格视图的应用程序委托中，我实现了以下方法来打开一个新的项目窗口：

```
-(IBAction)newItem:(id)sender {

    MyItemWindowController *itemController = [[MyItemWindowController alloc]initWithWindowNibName:@"MyItemWindowController"];

    [itemController showWindow:self];

} 
```

窗口确实显示了，**但它几乎立即消失了**。但是，如果我实例化一个窗口控制器，它是我的 appDelegate 的一个实例变量，该窗口确实会保留，但显然，在任何给定时间只有一个这样的窗口可以保持打开状态。

我真的很想拥有提到的功能，但不想使用基于文档的架构，因为我不需要能够将项目作为文档保存到磁盘。

有什么建议么？我知道我一定错过了一些非常基本的东西，但我就是想不通！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T11:05:36.007

我猜你的窗口因为ARC而消失了（不太熟悉它，所以我不确定这是否是原因），所以只要按照你说的做，但不要将 MyItemWindowController 作为实例变量，而是有一个数组作为您的实例变量，当您需要另一个新窗口时，它会添加一个新的窗口控制器。

# linq - 对延期执行的质疑

> ID：11577999
> 
> 赞同：0
> 
> 时间：2012-07-20T11:01:37.770
> 
> 标签：linq, deferred-execution

假设我有这个：

```
IEnumerable<MyObject> StructsTemp; 
```

我在 StructsTemp 上编写了 n 个查询，以便它从数据库中填充，依此类推。后来，我执行它们调用`.ToList()`：

```
IList<MyObject> StructsFinal = StructsTemp.ToList();
... some queries on StructsFinal ....
StructsTemp = StructsFinal; 
```

如果以后我这样做呢？

```
StructsTemp.Count() 
```

它会重新执行 StructsTemp 上的 n 个查询吗？这会重新执行 StructsTemp.ToList() 吗？这会重新执行 StructsFinal 上的所有查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:13:51.580

如果您`List<T>`为变量分配一个引用`StructsTemp`，则它`IEnumerable<T> actually`**是**一个`List<T>`并且将使用它的`Count`属性而不是枚举底层序列。

```
var numbers = new []{ 1,2,3 };
IEnumerable<int>evenNumbers = numbers.Where(i=> i % 2 == 0);
// deferred, will enumerate the sequence to count the even numbers
int count = evenNumbers.Count();
evenNumbers = evenNumbers.ToList();
// not deferred, using the Count property of List<T>
count = evenNumbers.Count(); 
```

所以后者总是会返回相同的值，因为它被持久化在一个新的集合中。当底层集合发生变化时，前者可以在每次迭代中返回不同的结果（fe`numbers.Remove(2)`导致`evenNumbers.Count`为 0）。

**编辑**：

这是该行为的更有意义的演示：http: [//ideone.com/91Yrh](http://ideone.com/91Yrh)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T11:17:00.740

`ToList()`将强制评估`StructsTemp`，无论是什么，但它对后续的 Linq 没有影响。

`... some queries on StructsFinal ....`可能会或可能不会懒惰评估，让我们假设它\他们是。

`Count()`扩展不是懒惰的，所以会强制执行`... some queries on StructsFinal ....`,

`... some queries on StructsFinal ....`顺便说一句，如果implements的结果是`ICollection<T>`一样`IList<T>`的，那么`Count()`扩展将只访问`Count`结果的属性。