# StackOverflow 问答 11873000-11873999

# mysql - 我应该为每个执行的语句打开一个单独的 MySQL 连接吗？

> ID：11873006
> 
> 赞同：-2
> 
> 时间：2012-08-08T20:53:38.500
> 
> 标签：mysql

打开单个 MySQL 连接（来自 C#）然后使用同一连接执行多个 SQL 语句是个好主意吗？或者我应该为我需要执行的每个语句打开和关闭一个单独的 MySQL 连接？

这样的事情（下面的伪代码）是否可能，或者我应该避免使用同一连接运行多个 SQL 语句的模式？

```
MYSQL.OPEN()
FOR(INT I =0 ; I < CODE.COUNT ; I ++)
{
ALL ITEMS I WANT ENTER BY ONCE TIME OPEN CONNECTION ( is it possible) or wrong idea ?
}
MYSQL.CLOSE() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T21:36:56.240

不要搅动连接。

打开与 MySQL 数据库的连接，完成所有需要做的工作，然后关闭连接。

为每个 SQL 语句打开和关闭连接对于数据库服务器来说是很多繁重的工作。（从客户端看起来很简单，但服务器有一个非常重要的代码路径。）

连接池是一种常用的实现方法。连接池管理一组与数据库的连接；客户端可以从池中“借用”连接，因此搅动（大量的连接请求）由池在客户端处理，并且数据库服务器会看到一组稳定的连接。所以每个人都很高兴。

# ruby-on-rails - rails admin 列不存在

> ID：11873011
> 
> 赞同：1
> 
> 时间：2012-08-08T20:54:03.750
> 
> 标签：ruby-on-rails, postgresql, rails-admin

在 rails admin 中编辑用户时，我得到一列不存在。sales 和 users 之间的关系是 user has_many :sales，而 sale belongs_to 买家和另一个 belongs_to 卖家，写成这样

`belongs_to :seller, :class_name=>User, :foreign_key=>:seller_id`

```
ActionView::Template::Error (PG::Error: ERROR:  column sales.user_id does not exist
LINE 1: SELECT "sales".* FROM "sales"  WHERE "sales"."user_id" = 14
                                             ^
: SELECT "sales".* FROM "sales"  WHERE "sales"."user_id" = 14):
    1: = rails_admin_form_for @object, :url => edit_path(@abstract_model, @object.id), :as => @abstract_model.param_key, :html => { :method => "put", :multipart => true, :class => "form-horizontal denser", :data => { :title => @page_name } } do |form|
    2:   = form.generate :action => :update 
```

我尝试编辑模型的配置文件（initializers/rails_admin），以便在显示页面上不显示任何有关销售的内容。为此，我只在 User 模型的`list do`,`show do`和块中添加了一些测试字段（并省略了与销售有关的任何内容） 。`edit do`

我不太确定要编辑什么，这样 Rails 管理员就不会尝试在销售表中查找用户 ID。

任何想法，尤其是答案都将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T03:47:12.610

你需要`foreign_key`在`has_many`/`has_one`关联上指定。

查看 Rails 文档：

> :foreign_key
> 
> 指定用于关联的外键。默认情况下，这被猜测为这个类的小写名称和“_id”后缀。因此，建立 has_many 关联的 Person 类将使用“person_id”作为默认值：foreign_key

# c++ - 如何从派生类访问模板参数？

> ID：11873012
> 
> 赞同：3
> 
> 时间：2012-08-08T20:54:03.657
> 
> 标签：c++, templates, derived

我有一个

```
template <int N> class Base 
```

和

```
class Derived : public Base<1> 
```

...有没有办法`int N`从 a 的定义中访问`Derived::myMethod()`（而不是得到编译器错误“使用未声明的标识符'N'”）？

更准确地说，我想做

```
void Derived::myMethod() {
   for (int n=0; n<N; n++) { ... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T20:58:35.777

模板参数具有模板的范围，但您可以在模板中定义一个可供派生类使用的嵌套常量：

```
template <int N> class Base {
public: // or protected:
   static const int theN = N;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T21:22:31.320

另一种选择是您可以模板派生类：

```
template <int N>
class Derived : public Base<N>
{
    void myMethod()
    {
        for (int i = 0; i < N; ++i)
        //
    }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T21:34:16.137

这就是我上面评论的意思：

```
class Base{
  public:
     Base(int value = 1) : value_(value){}  //don't need to use default param but can
  private:
     int value_
}

class Derived : public Base
{} 
```

为什么要模板化 N？你需要专攻整个班级吗？另一种方法是“虚拟化”根据您设置为“专业化”的标准从模板调用的非成员函数。

编辑：[模板类中方法的部分特化](https://stackoverflow.com/questions/10284498/partial-specialization-of-a-method-in-a-templated-class/10287407#10287407)

# windows-7 - 为 LAMP 开发设置 Windows 7

> ID：11873013
> 
> 赞同：8
> 
> 时间：2012-08-08T20:54:12.147
> 
> 标签：windows-7, development-environment, lamp

我是一个 .Net 人，刚刚接到一个基于 LAMP 的项目（其中 P=PHP），没有“否”选项。我将不得不在 Windows 7(64) 机器上构建它，但它是针对纯 LAMP 平台的。

我不太担心 PHP 或 mySQL，我已经足够应付了，但 Linux 和 Apache 也可能是 NASA 的 Curiosity 平台。

在生产环境中，我将主要依靠主机来配置 L 和 A，希望我可以几乎同步我的 M 和 P 文件，弄清楚如何做一些特定于应用程序的配置并开始。也许乐观，但我会从那里开始；-)

现在的问题是

*   在 W7 机器上设置 LAMP 开发以相对无故障地投入生产的最无故障方法是什么？

*   有什么合理的方法可以在不放弃我的 Visual Studio 安全毯的情况下做到这一点？

*   对在线某处的演练有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T22:21:57.113

> • 在 W7 机器上设置 LAMP 开发以相对无故障地投入生产的最无故障方式是什么？

这两者都能够为您提供 windows7 LAMP 和 LAMPP(php/perl) 环境。

```
 http://www.ampps.com/
or
    http://www.apachefriends.org/en/xampp-windows.html 
```

两者都易于使用，并且应该使您将代码迁移到 prod 变得简单。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-09T22:53:31.147

Why dont you install a free Virtual Machine and setup a real LAMP environment, You can access the VM from your windows environment.

If you create a samba bridge(fairly straight forward) , you can develop at your windows environment and deploy to linux easily.

Really easy to setup LAMP environment with VM and pretty sure, you ll find many tutorials, which help you go though the setup.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-13T11:51:48.237

Wamp 服务器将完美地为您工作：[Wamp 服务器](http://www.wampserver.com/en)

# sql - 重复插入语法以提高向量效率 - 有什么例子吗？

> ID：11873016
> 
> 赞同：1
> 
> 时间：2012-08-08T20:54:30.870
> 
> 标签：sql, ingres, vectorwise

我需要加快插入 Ingress VectorWise 数据库的速度，文档显示了这一点：

[http://docs.actian.com/ingres-vectorwise/2.5/sql-language-guide/5315-insert](http://docs.actian.com/ingres-vectorwise/2.5/sql-language-guide/5315-insert)

```
The INSERT statement inserts rows into a table.

This statement has the following format:

[REPEATED]]INSERT INTO [schema.]table_name
    [(column {, column})]
    [OVERRIDING SYSTEM VALUE | OVERRIDING USER VALUE]
    [VALUES (expr{, expr}) {,(expr{ ,expr})} |
    [WITH common_table_expression] subselect]; 
```

并说：

> REPEATED：保存insert的执行计划，可以让后续的执行速度更快。

我一生都无法使用“REPEATED”成功执行查询，而且我无法在网上找到任何使用直接 SQL 的示例。有没有人对如何让它在语法上工作有任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:51:34.473

我不确定 Vectorwise 是否支持它，Ingres 支持，但你可能想看看 using `CACHE_DYNAMIC`. 有关更多信息，请参阅[http://docs.actian.com/ingres/10s/upgrade-guide/2038-cached-dynamic-cursor-query-plans](http://docs.actian.com/ingres/10s/upgrade-guide/2038-cached-dynamic-cursor-query-plans)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T07:51:02.520

@w00te：忽略重复。如果多插入性能是必不可少的，我宁愿做一些更“激进”的事情。- 我会创建一个临时 HEAP 表（它们是插入时最快的存储类型），一旦我完成插入一堆（可以是数百万）行，然后我只需将表修改为[VECTORWISE](http://www.actian.com/products/vectorwise)或从中选择一张`vectorwise`桌子。如果您只是选择，那么该表可能不必是临时的，它可以是您临时存储数据的普通表。取决于用例。

在插入上述 HEAP 表时，尽可能使用[批处理](http://community.actian.com/forum/blogs/teresa/65-improving-data-load-using-new-ingres-10-batch-execution-feature.html)（Ingres JDBC >= 4.0.1），它可以显着提高插入数百万行的速度（我知道这是事实——我做了很少的测试）。

**编辑：**显然，这不适用于 VectorWise。最好的方法是直接插入 VectorWise 表，最好是非索引的。使用 JDBC 准备好的语句，并批量执行，你会没事的。格兰特关于使用 CACHE_DYNAMIC 的提议也应该被考虑。

# entity-framework - 当代码第一次使用表名“对象”进行逆向工程时出了什么问题

> ID：11873022
> 
> 赞同：1
> 
> 时间：2012-08-08T20:55:08.273
> 
> 标签：entity-framework

我使用 Entity Framework Power Tools Beta 2 对 Code First 进行逆向工程。在数据库中有一个表名“对象”。

当我测试时，它给了我这个错误：

未映射类型“TestEFPowerTools.Models.Object”。使用 Ignore 方法或 NotMappedAttribute 数据注释检查该类型是否被显式排除。验证该类型是否被定义为一个类，不是原始的、嵌套的或泛型的，并且不是从 EntityObject 继承的。

在我注释掉之后

```
public DbSet<Object> Objects { get; set; }

modelBuilder.Configurations.Add(new ObjectMap()); 
```

在上下文文件中，一切正常。我该如何修复它还是电动工具中的错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T20:57:54.613

Object 是 C# 中的保留字，[它是 Everything 的基类](http://msdn.microsoft.com/en-us/library/system.object.aspx)，尽管您可以通过将类重命名为 object 以外的其他内容，并使用流利或数据注释映射到 object 表来解决此问题。如果可能的话，我会重命名表格。

将您的类名从 Object 更改为其他名称，例如 ObjectData。将所有对 Object 的引用重命名为 ObjectData：

```
public class ObjectData ()
{

}

public DbSet<ObjectData> ObjectDatas {get;set;} 
```

在配置中，将映射添加到不同的表：

```
public class ObjectData Map : EntityTypeConfiguration<ObjectData>
{
  public ObjectDataMap()
   {
     //other mappings
     this.ToTable("Object");
   }

} 
```

# java - 在黑白图像上查找未连接区域（岛）的算法

> ID：11873031
> 
> 赞同：2
> 
> 时间：2012-08-08T20:55:42.877
> 
> 标签：java, c++, algorithm

我有黑白点（像素）的图像。我需要为每个不同的白色像素簇创建不同的集合，其中包含该白点的 x,y 坐标（例如，如果我有带有三个未连接的白色图像岛的黑色图像，我需要生成三个带有坐标的集合）。任何人都可以为此建议我算法吗？

细胞是连接的，如果`abs(x1-x2) <=1 && abs(y1-y2)<=1`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T05:05:26.550

[连接组件标记](http://en.wikipedia.org/wiki/Connected-component_labeling)算法旨在隔离和枚举此类集群

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T20:56:49.573

也许是[洪水填充算法](http://en.wikipedia.org/wiki/Flood_fill)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T21:01:53.227

[区域增长](https://stackoverflow.com/questions/11779455/how-to-auto-crop-an-image/11784485#11784485)，这应该可以解决问题。该链接正在回答一个不同的问题，但基本算法应该正好满足您的需求。你只需要传递另一个参数，它告诉集群的数量。从 1 开始，每当你进入一个新的集群时，增加这个值。

这个新参数将取代前景的 1 和背景的 2。这将为您提供所有集群的总数以及它们的所有位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T21:18:57.433

这使用洪水填充算法。查找连接区域的数量 import com.sun.corba.se.spi.presentation.rmi.IDLNameTranslator;

```
import javax.xml.transform.Source;
import java.awt.*;
import java.awt.font.ImageGraphicAttribute;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.Collections;

/**
 * Created by IntelliJ IDEA.
 * User: ruzbeh
 * Date: 6/29/12
 * Time: 12:58 AM
 * To change this template use File | Settings | File Templates.
 */
public class Solution {

    static int[][] img;

    static void compLabel(int i, int j, int m,int  n) {
        if(i<0 || j<0 ||i > n-1||j > n-1) return;
        if (img[i][j] == 1) {
            img[i][j] = m;
            compLabel(i - 1, j - 1, m,n);
            compLabel(i - 1, j, m,n);
            compLabel(i - 1, j + 1, m,n);
            compLabel(i, j - 1, m,n);
            compLabel(i, j + 1, m,n);
            compLabel(i + 1, j - 1, m,n);
            compLabel(i + 1, j, m,n);
            compLabel(i + 1, j + 1, m,n);
        }
    }

    public static void main(String[] args) throws IOException {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));

        int T = Integer.parseInt(br.readLine());
        for (int t = 0; t < T; t++) {
            int n = Integer.parseInt(br.readLine());
            img = new int[n][n];
            int label = 2;
            for (int i = 0; i < n; i++) {
                int j = 0;
                for (String str : br.readLine().split(" ")) {
                    int value = Integer.parseInt(str);

                    img[i][j] = value;

                    j++;
                }

            }
            for (int y = 0; y < n; y++)
                for (int x = 0; x < n; x++)
                    if (img[x][y] == 1) {
                        compLabel(x, y, ++label,n);
                    }

            System.out.println(label - 2);
        }
    }
} 
```

# mongodb - 用于不断发展的内容管理应用程序的敏捷/演化数据库建模

> ID：11873033
> 
> 赞同：0
> 
> 时间：2012-08-08T20:56:01.180
> 
> 标签：mongodb, database-design, temporal-database, anchor-modeling, database

需要明确的是，当我说敏捷时，我并不是指在敏捷开发过程中。我的意思是一个不断发展的数据模型，可以添加和管理新的对象属性。

我正在尝试解决一个 Web 应用程序挑战，它允许用户为数据输入创建新的内容表单，可以通过添加（或可能修改）其他字段来改进（可能版本化）。这本身就是一种直截了当。每个用户的内容表单都会有一个动态创建的视图和触发器来处理读/写，并且当对内容表单结构进行更改时，将动态创建基础表。数据输入将仅使用触发器进行写入，而视图将用于读取。

我正在寻找的建议是，是否存在有助于应对此类挑战的现有数据库建模技术或数据库类型。该应用程序将对更改跟踪、历史查看、完全不同的内容形式之间的迁移等有更多要求。可能还会在顶部添加一些基于授权的复杂 Web 应用程序查看。

我仔细研究了[Anchor Modeling](http://www.anchormodeling.com/)，虽然它具有双时态建模方面，并且它的 6NF 允许敏捷模式开发，但不清楚如何将它从开发良好的模型转换为 SQL 脚本，再到可以演变内容的 Web 应用程序数据。也许我看错了，但我不想修改 Anchor 模型中的任何触发器或视图，而且我认为我不能用它创建一个可以按需扩展的模型。将需要建模工具来安全地进行更改。

我仍然需要更多地研究一些可用的 NoSQL 数据库。[MongoDB](http://www.mongodb.org/)的面向文档的存储看起来非常有趣。

任何有关这些工具或所描述的数据建模挑战的建议或经验都将非常受欢迎！感谢您提前提供任何答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-11T10:58:49.977

XML 到 SQL 代码的生成是通过称为 sisula 的模板语言完成的。GitHub 上有一个独立的[sisula 引擎](https://github.com/Roenbaeck/sisula/tree/master)，您可以将其应用到您的工作流程中，以免依赖在线建模工具。荷兰至少有一家公司使用这种方法自动进行架构更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T18:06:54.410

如果您正在寻找支持双时态数据的 NoSql 数据库，您应该查看[RavenDB](http://www.ravendb.net) - 一个面向 .Net Framework 开发人员的事务性 NoSQL 文档数据库。

使用它对插件的出色支持，我创建了一个[Temporal Versioning Bundle](https://github.com/mj1856/RavenDB-TemporalVersioning)，它添加了完整的双时域功能。

# xcode - 每次打开 nswindow 时都会初始化一个对象 - mac app

> ID：11873039
> 
> 赞同：0
> 
> 时间：2012-08-08T20:56:25.207
> 
> 标签：xcode, cocoa, nswindow

我有一个有点愚蠢的问题，使用 iPhone 应用程序我没有这个问题，但是使用 mac 应用程序是的，我想在每次打开窗口时初始化一个对象，这个方法只调用一次：

```
- (id)initWithWindow:(NSWindow *)window
- (void) windowDidLoad
- (void) awakeFromNib 
```

我可以在关闭窗口时初始化对象，但我认为这是一个逻辑错误：

```
- (void)windowWillClose:(NSNotification *)notification 
```

我以这种方式打开和关闭窗户：

```
[tabellaController showWindow:self];
[self close]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T22:45:35.487

*   (void) windowDidBecomeKey:(NSNotification *)notification {}

这是我的问题的解决方案！

# java - javafx：PieChart 不正确的数据处理 MouseEvent

> ID：11873041
> 
> 赞同：2
> 
> 时间：2012-08-08T20:56:27.360
> 
> 标签：java, javafx-2, pie-chart

我昨天刚刚了解了 JavaFX，现在正在测试图形选项。[我在 Oracle 网站 ( http://docs.oracle.com/javafx/2/charts/pie-chart.htm](http://docs.oracle.com/javafx/2/charts/pie-chart.htm) )的饼图示例中注意到了这种行为，但我添加了更多数据点和一些悬停效果来实现它更明显。

当您将鼠标悬停在图表上时，MouseEvent 并不总是由正确的数据段处理。鼠标光标越靠近饼图的中心，这种效果就越明显。据我所知，当靠近边缘时，行为是准确的。

谁能证实这一点？这是一个错误，还是我做错了什么？

尝试移动鼠标，从线段的标记边缘开始，向内移动到中心，查看光标下的线段是否正确指示。

![图表的屏幕截图 - 鼠标是工具提示显示的地方](../Images/d3dfd0948f97987005914acafeedeeba.png)

我在玩这张图表时注意到的其他几件事 –</p>

1.  笔划效果（此处为白色破折号）在段上不一致。左边缘通常看起来被剪裁了
2.  你如何在java中更改工具提示页面角？在 CSS 中是“.page-corner”
3.  有没有办法改变饼标签线的形状，或者把圆形端点一起去掉？

编辑：忘记添加代码！

```
package piechartsample;

import javafx.application.Application;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.event.EventHandler;
import javafx.geometry.Side;
import javafx.scene.Scene;
import javafx.scene.paint.Color;
import javafx.stage.Stage;
import javafx.scene.chart.*;
import javafx.scene.control.Label;
import javafx.scene.control.Tooltip;
import javafx.scene.effect.Glow;
import javafx.scene.input.MouseEvent;
import javafx.scene.layout.BorderPane;
import javafx.scene.shape.StrokeType;
import javafx.scene.Node;

public class PieChartSample extends Application {

    private PieChart.Data selectedData;
    private Tooltip tooltip;

    @Override
    public void start(Stage stage) {

        ObservableList<PieChart.Data> pieChartData =
                FXCollections.observableArrayList(
                new PieChart.Data("Grapefruit", 13),
                new PieChart.Data("Orange", 25),
                new PieChart.Data("Plum", 10),
                new PieChart.Data("Pear", 22),
                new PieChart.Data("Banana", 10),
                new PieChart.Data("Peach", 5),
                new PieChart.Data("Apricot", 1),
                new PieChart.Data("Pineapple", 20),
                new PieChart.Data("Passion Fruit", 100),
                new PieChart.Data("Lychee", 5));

        final PieChart chart = new PieChart(pieChartData);
        chart.setTitle("Fruits Graph");
        chart.setLabelLineLength(10);
        chart.setLegendSide(Side.LEFT);

        final Label caption = new Label("");
        caption.setTextFill(Color.DARKORANGE);
        caption.setStyle("-fx-font: 24 arial;");

        tooltip = new Tooltip("");

        tooltip.setStyle("-fx-font: 14 arial;  -fx-font-smoothing-type: lcd;");// -fx-text-fill:black; -fx-background-color: linear-gradient(#e2ecfe, #99bcfd);");

        for (final PieChart.Data data : chart.getData()) {
            Tooltip.install(data.getNode(),tooltip);
            applyMouseEvents(data);
        }

        BorderPane pane = new BorderPane();
        pane.setCenter(chart);
        Scene scene = new Scene(pane);
        stage.setTitle("Fruits");
        stage.setScene(scene);
//        scene.getStylesheets().add("piechartsample/Chart.css");
        stage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }

    private void applyMouseEvents(final PieChart.Data data) {

        final Node node = data.getNode();

        node.setOnMouseEntered(new EventHandler<MouseEvent>() {

            @Override
            public void handle(MouseEvent arg0) {
                node.setEffect(new Glow());
                String styleString = "-fx-border-color: white; -fx-border-width: 3; -fx-border-style: dashed;";
                node.setStyle(styleString);
                tooltip.setText(String.valueOf(data.getName() + "\n" + (int)data.getPieValue()) ); 
            }
        });

        node.setOnMouseExited(new EventHandler<MouseEvent>() {

            @Override
            public void handle(MouseEvent arg0) {
                node.setEffect(null);
                node.setStyle("");
            }
        });

        node.setOnMouseReleased(new EventHandler<MouseEvent>() {

            @Override
            public void handle(MouseEvent mouseEvent) {
                    selectedData = data;
                    System.out.println("Selected data " + selectedData.toString());
            }
        });
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T22:10:56.150

> MouseEvent 的饼图不正确的拾取行为

对于您的特定实现，我在使用 JavaFX 2.2 时没有遇到切片区域的挑选问题。

饼图切片区域的选择错误似乎是一个已知问题。对于 JavaFX 2.2 (jdk7u6)，该问题似乎已[部分修复。](http://javafx-jira.kenai.com/browse/RT-22954)有一个与 JavaFX 3.0 计划相关的[悬而未决的问题。](http://javafx-jira.kenai.com/browse/RT-22987)任何人都可以注册访问以查看此答案中链接的 jira 问题。

[JavaFX 2.2 开发人员预览版](http://www.oracle.com/technetwork/java/javafx/downloads/devpreview-1429449.html)可在此处获得。

* * *

> 你如何在java中更改工具提示页面角？

[JavaFX css 参考指南](http://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html)提供了有关工具提示的 css 结构的信息。这表明子结构具有 .page-corner 类。要查看 JavaFX 默认里海皮肤如何设置页面角的样式，您可以查看[caspian.css](http://hg.openjdk.java.net/openjfx/2.2/master/rt/raw-file/tip/javafx-ui-controls/src/com/sun/javafx/scene/control/skin/caspian/caspian.css)。此答案中的链接指向 2.2 版本。如果需要，您还可以从 jfxrt.jar 为您的 JavaFX 安装提取 caspian.css。

拥有 caspian.css 后，您可以搜索 Tooltip 以查看应用于 .page-corner css 类的特定样式。这是默认的 .page-corner 样式 =>

```
.page-corner {
  -fx-padding: 4.5 4.5 4.5 4.5;
  -fx-background-color: linear-gradient( from 0% 0% to 50% 50%, #fcf7b6, #a59c31);
  -fx-shape: "M0,0H9L0,9Z";
  -fx-effect: dropshadow( three-pass-box , rgba(0,0,0,0.6) , 4 , 0.0 , 0 , 0 );
} 
```

要更改默认样式，请使用您对页面角的特定定义加载您自己的用户 css 样式表。例如，下面的 styleclass 定义会将页面角落变成一个发光的绿色 pac-man。

```
.page-corner {
  -fx-padding: 10;
  -fx-background-color: green;
  -fx-shape: "M30,20 h-15 a15,15 0 1,0 15,-15 z";
  -fx-effect: dropshadow( three-pass-box , derive(green, 40%), 10, 0.0 , 0 , 0 );
} 
```

* * *

> 有没有办法改变饼标签线的形状，或者把圆形端点一起去掉？

是的，但这并不完全简单。

pie-label-line 似乎是一个已实现的单个路径，其样式通过：

```
.chart-pie-label-line {
  -fx-stroke: #aaaaaa;
  -fx-fill: #aaaaaa;
} 
```

要更改路径的形状，您可以在图表显示后在标签线上进行查找，并编写一些代码从中删除球元素；例如`(Path) chart.lookup(".chart-pie-label-line")`，或者您可以继承 PieChart 并覆盖该`layoutChartChildren`方法。此版本的[PieChart 源](http://hg.openjdk.java.net/openjfx/2.2/master/rt/file/218e7d2c04da/javafx-ui-charts/src/javafx/scene/chart/PieChart.java)中的第 670-6 行是生成标签线的行。

* * *

> 笔划效果（此处为白色破折号）在段上不一致。左边缘通常看起来被剪裁了

剪辑是因为您将边框应用于饼图切片节点，并且饼图在内部布局，以便添加到图表中的后面的项目覆盖前面的项目。当您添加粗边框时，（除了绘制的最后一个切片）边框将与绘制的下一个饼图重叠。您可以通过在鼠标输入方法中调用[node.toFront()来解决此问题。](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#toFront%28%29)

然而，笔画还有其他偏移问题，它应该更好地对齐饼图。如果笔画宽度设置为 1，它会很好地对齐，如果它设置为更大的数字，例如 10，它最终不会对齐。我的猜测是这是边框样式的 css 处理中的一些错误，并鼓励注册一个帐户并在 JavaFX 问题跟踪器中记录有关此问题的[jira 问题。](http://javafx-jira.kenai.com)

* * *

将与问题标题无关的其他一些问题作为单独的 stackoverflow 问题发布可能会更好。

# oop - 跟踪对象的修改

> ID：11873045
> 
> 赞同：2
> 
> 时间：2012-08-08T20:56:49.820
> 
> 标签：oop

我正在考虑一种通用机制来跟踪对象的任何成员的变化。这个想法基本上是在调用 a 时将时间戳保存到某个`lastModified`成员`set`。

到目前为止，我的想法是有一些父类（这里是伪代码）

```
class Tracker {
    time lastModified;
    void onChildSet() {
        lastModified = NOW();
    }
} 
```

并为我的特定对象继承这个

```
public class Object extends Tracker {
    sometype member;
    void setMember(sometype value) {
        member = value;
        onChildSet();
    }
} 
```

我不喜欢这种方法的是，我看不到如何避免`onChildSet()`从父类显式调用的必要性。实际上，我正在寻找一种`lastModified`无需编写任何代码即可自动更新的方法。是否有一些概念如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:05:22.633

使用调用处理程序。您也可以使用字节码检测自己做同样的事情，但 InvocationHandler 更简单

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T17:35:22.723

大多数动态语言都有一些拦截方法调用的方法。例如，所有 ruby​​ 对象都有一个方法“method_missing”，只要对未定义的对象调用方法，就会调用该方法。您可以使用此功能设置代理对象以跟踪 lastModified 值。另一种动态语言，Actionscript 3.0 有一个[代理](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/Proxy.html)API 中的类。同样，您可以使用此代理类来拦截函数调用。不幸的是，使用这样的代理意味着您必须修改定义方法的方式。在 ruby​​ 的情况下，method_missing 显然只在方法不存在时才被调用。这意味着您必须在一个对象上定义您的方法，然后由代理类包装。看看我在 AS3 中整理的示例。要跟踪的属性必须通过 trackSet 方法定义，我们不能直接在 MyObject 类上定义该方法。trackSet 将属性的名称存储在对象中以及回调函数中。当在代理类上调用 setProperty 时，会根据 setters 对象检查属性的名称，如果存在 lastModified 则更新该属性并调用该属性回调。

```
package {

    import flash.utils.Proxy;
    import flash.utils.flash_proxy;

    public dynamic class Tracker extends Proxy {

        private var setters : Object;

        public function Tracker() { 
            setters = { };
        }

        public function getLastModified(name : String) : Number {
            return setters[name] ? setters[name].lastModified : 0;  
        }

        protected function trackSet(name : String, fn : Function) : void {
            setters[name] = {
                lastModified: 0,
                setter: fn
            };
        }

        override flash_proxy function setProperty(name : *, value : *) : void {
            if(!setters[name]) return;
            setters[name].lastModified = new Date().time;
            setters[name].setter(value);
        }

    }
} 
```

-

```
package {

    public dynamic class MyObject extends Tracker {

        public function MyObject() {
            trackSet('member', setMember);
        }

        private function setMember(val : String) : void {
            trace('set member =', val);
        }

    }
} 
```

-

```
var obj : MyObject = new MyObject();
obj.member = 'monkey';
trace('member getlast modified at', obj.getLastModified('member')); 
```

# python - Python奇怪的添加错误

> ID：11873046
> 
> 赞同：3
> 
> 时间：2012-08-08T20:56:54.297
> 
> 标签：python, floating-point, addition

> **可能重复：**
> [python - 浮点数的小数位问题](https://stackoverflow.com/questions/286061/python-decimal-place-issues-with-floats)
> [Python 浮点相等怪异](https://stackoverflow.com/questions/10560832/python-float-equality-weirdness)

在下面的代码中，我有`percentage`一个浮点变量。我已经将它设置为 if`number`到达`10,000`，`percentage`应该会上升`.01`。

```
# Tries to find a number that when squared and 5%'ed is still a square.

import math

print("Script has started:\n")

percentage = .1
number = 1
while number != -1:
    number = number + 1
    num_powered = number ** 2
    num_5per = num_powered * percentage
    num_5per_sqrt = math.sqrt(num_5per)
    num_list = list(str(num_5per_sqrt))
    dot_location = num_list.index(".")
    not_zero = 0
    for x in num_list[dot_location + 1:]:
        if x != "0":
            not_zero = 1
            break
    if not_zero == 0:
        print("*********************************")
        print("Map :",number)
        print("Safe-Area :",num_5per_sqrt)
        print("Percentage :",percentage)
        print("*********************************")
        input()

    if number > 10000:
              number = 0
              percentage = percentage + .01
              print(percentage) 
```

输出：

```
0.11
0.12
0.13
0.14
0.15000000000000002  # Here is where it goes crazy
0.16000000000000003 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-08T21:01:50.617

来自[Python 文档](http://docs.python.org/tutorial/floatingpoint.html)

> 请注意，这是二进制浮点的本质：这**不是 Python 中的错误，也不是您的代码中的错误**（强调我的）。您会在所有支持硬件浮点运算的语言中看到相同的内容（尽管某些语言默认情况下或在所有输出模式下可能不会显示差异）

您可能应该使用[该`decimal`模块](http://docs.python.org/library/decimal.html)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-08T20:59:57.453

您正在使用浮点数并且遇到了[表示错误](http://en.wikipedia.org/wiki/Round-off_error)。特别是，0.01 没有作为二进制浮点数的精确表示。相反，将存储一个非常接近但不完全等于 0.01 的数字。这不是错误。这就是浮点运算的工作方式。

您可以通过几种方式解决您的问题。

*   接受结果不完全准确或
*   将所有内容乘以 100 并使用整数或
*   使用`Decimal`类型。

例子：

```
from decimal import Decimal
percentage = Decimal('0.1')
step = Decimal('0.01')
percentage += step 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T21:00:46.003

浮点数没有无限的精度，所以你会得到这样的奇怪行为。

更好的解决方案是将您的百分比存储为整数，表示十分之一百分比并以 1 递增。

例如：

```
percent_as_integer += 1 
```

代替

```
percent_as_float += 0.01 
```

当您想显示百分比时，只需执行以下操作：

```
print "%d.%02d" % divmod(percent_as_integer, 100) 
```

编辑：实际上，按照另一个答案中的建议使用十进制模块可能是一个更好、更 Pythonic 的解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T21:10:21.413

如其他答案中所述，这是当前所有微处理器中本机浮点数的限制。

如果您需要精确表示十进制数（例如用于会计和业务应用程序），您应该使用[十进制](http://docs.python.org/library/decimal.html)类型，而不是浮点数。您也可以使用[cdecimal](http://pypi.python.org/pypi/cdecimal/2.3)模块，它是十进制类型的高性能实现。

更新：从 Python v3.3 开始，内置的十进制模块是用 C 实现的。

# ruby-on-rails - 在rails中分组记录

> ID：11873047
> 
> 赞同：0
> 
> 时间：2012-08-08T20:56:55.487
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我正在构建一个简单的博客应用程序，我想添加一个档案，人们可​​以点击一个月并显示该月的所有文章。这就像基于月份和年份的分组。例如，

**文章：**

*   2012 年 6 月
*   2011 年 5 月

因此，当单击某个日期时，它会将您带到一个页面并列出该月的所有文章。我怎样才能完成它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:57:43.170

2012 年 7 月：

```
require 'date'

month = 7
year = 2012

start_date = Date.new(year,month,1)
end_date =  Date.new(year,month+1,1) - 1.day

articles_in_july = Article.where(:created_at => start_date..end_date) 
```

您可以使用上述方法在控制台中进行测试。但是，在您的模型中，您可能想要：

```
def self.in_month(month,year)
    start_date = Date.new(year,month,1)
    end_date =  Date.new(year,month+1,1) - 1.day
    where(:created_at => start_date..end_date)
end 
```

然后你可以调用：

```
Article.in_month(7,2012) 
```

或者，假设用户 has_many 文章：

```
current_user.articles.in_month(7,2012) 
```

# sql - 插入sql数据库一对多关系

> ID：11873048
> 
> 赞同：3
> 
> 时间：2012-08-08T20:56:57.967
> 
> 标签：sql, sql-server, stored-procedures

伙计们，如果有人可以帮助我，我将不胜感激。我在将记录插入一对多关系数据库时遇到问题。场景如下，我有一个技术人员表（techid，name，surname）和一个技能表（skillid，skillDesc，techid）。技能表有一个 techID 外键。

如何创建 sql 语句/程序来插入具有分配给技术人员的多种技能的技术人员？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T21:08:48.443

我认为您应该有三个表：Technician(techid, name, surname)、Skill(skillid, SkillDesc) 和Ability(skillid, techid)。如果您只有两个表，则技能到技术人员的每个映射都必须包含技能描述的副本，这是冗余信息。相反，您希望使用表格来定义 Technician 对象和 Skill 对象，并使用第三个表格来捕获它们之间的关系。

首先执行这个查询：

```
insert into technician values (my_id, my_name, my_surname) 
```

然后循环技能（伪代码）：

```
for skill in skills:
    insert into Ability values(skill, my_id) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T21:07:39.263

您需要三个表 Technician、Skill 和 TechnicianSkill。使用两个表，您不能将多个技能分配给单个技术人员。（如果 TechID 和 SkillID 是主键）

```
Technician Table:
Columns: TechID, Name, SurName

Skill Table:
Columns: SkillID, SkillDesc

-- Put the TechID and SkillID as a foreign key in this table
TechnicianSkill Table:
Columns: TechID, SkillID 
-- You can make a primary key by using the two columns (TechID,SkillID) 
```

# php - 寻找循环或其他东西，只是想摆脱所有这些如果，使代码更小

> ID：11873055
> 
> 赞同：1
> 
> 时间：2012-08-08T20:57:22.300
> 
> 标签：php, loops, if-statement

```
 $num = 1
 if ($unix[9] == $num) {   
 $out[0] = $letters[1];
}
 if ($unix[9] == $num + 1) { 
 $out[1] = $letters[2];``
}
 if ($unix[9] == $num + 2) {
 $out[2] = $letters[3];
}
 if ($unix[9] == $num + 3) {
 $out[3] = $letters[4];
}
 if ($unix[9] == $num + 4) {
 $out[4] = $letters[5];
}
 if ($unix[9] == $num + 5) {
 $out[5] = $letters[6];
}
 if ($unix[9] == $num + 6) {
 $out[6] = $letters[7];
}
 if ($unix[9] == $num + 7) {
 $out[7] = $letters[8];
}
 if ($unix[9] == $num + 8) {
 $out[8] = $letters[9];
} 
```

我正在寻找一个循环来避免上述行，或者其他东西来替换大多数 if 语句。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T21:00:46.747

```
for($num = 1, $max = 9 ; $num < $max ; $num++){
  if ($unix[9] == $num) {   
     $out[$num] = $letters[$num + 1];
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T21:00:02.487

```
$num = 1
for($i=1;$i<=9;i++) {
    if ($unix[9] == $num+($i-1)) {   
        $out[$i-1] = $letters[$i];
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T21:01:18.633

这应该做的工作

```
for ($num = 1; $num < 9; $num++) {

    if ($unix[9] == $num) {

        $out[$num - 1] = $letters[$num];
    }
} 
```

# php - 检查用户是否是我的 Facebook 页面的粉丝

> ID：11873056
> 
> 赞同：1
> 
> 时间：2012-08-08T20:57:35.577
> 
> 标签：php, facebook, facebook-graph-api

我正在使用 facebook php SDK 将用户登录到网站。我还要求用户授予权限，例如：

```
user_likes,publish_actions,email,offline_access,user_birthday 
```

现在我正在检查用户是否是我的 Facebook 页面的粉丝。

```
$isFan = $facebook->api(array(
            "method"    => "pages.isFan",
            "page_id"   => 'xxxxxxxxxxx'
            )); 
```

问题是当用户的 Facebook 会话结束时，即使用户之前喜欢该页面，上述代码也会返回 false。现在有什么方法可以检查是否喜欢我的粉丝页面，例如使用访问令牌。由于我使用离线访问，我有一个有效的用户访问令牌 60 天，然后我会要求他再次登录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T21:57:56.307

[您可以在page_fan](http://developers.facebook.com/docs/reference/fql/page_fan/)表上运行[FQL](http://developers.facebook.com/docs/reference/fql/)查询。

```
$isFan = $facebook->api(array(
  "method" => "fql.query",
  "query"  => "SELECT uid FROM page_fan WHERE page_id = '<YOUR PAGE ID>' AND uid = '<UID>"
)); 
```

也很有用——http: [//developers.facebook.com/docs/reference/php/facebook-api/](http://developers.facebook.com/docs/reference/php/facebook-api/)

# android - 如何合并来自我的两个 Android 应用程序的客户

> ID：11873068
> 
> 赞同：1
> 
> 时间：2012-08-08T20:58:51.307
> 
> 标签：android, android-manifest, google-play

我的问题是我的 android 应用程序有一个版本（比如说 xx.xxx.xxx.versionA），而第二个有相同的前缀（xx.xxx.xxx.versionB）但数据不同。它们现在都是免费的独立应用程序。

我的目标是将它们合并到 Android 市场上的单个应用程序中。因为我通过应用程序下载/购买来管理不同数据的问题。所以我想让来自第二个应用程序的人被重定向到第一个应用程序进行更新（更容易维护等等）。

甚至可能吗？我可以在应用程序中宣布他们必须下载第一个应用程序以进行更新（甚至弹出 android 页面）。但我希望通过合并尽可能地对用户友好。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T04:59:17.743

我认为最温和的方法是向版本 B 的用户发送一条消息，说他们正在使用的当前版本将很快被放弃，他们应该安装版本 A 以继续使用该应用程序。然后单击按钮会将他们带到市场上的版本 A，以便他们可以安装它。

您可以使用以下代码执行此操作：

```
Uri marketUri = Uri.parse("market://details?id=" + packageName);
Intent marketIntent = new Intent(Intent.ACTION_VIEW, marketUri);
startActivity(marketIntent); 
```

其中 packageName 将是版本 A 应用程序的包名称。

# text - c# 组合框中选中文本的下一个文本？

> ID：11873071
> 
> 赞同：0
> 
> 时间：2012-08-08T20:59:01.413
> 
> 标签：text, combobox, next

这是一个关于c#学校的程序我有comboboxGrade它是数据绑定其中的文本是年级名称，在选择一个作为年级名称的文本comboboxGrade.Text后我做了一些编码但之后确定学生统计为“通过" 我需要将当前文本的下一个文本放入一个字符串变量中，即在从表单中直观地选择一个等级后，文本将是 combobox.Text == "fourth" 但我需要在代码中获取下一个文本学生通过时是第五，怎么样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T21:26:59.473

有几种方法可以做到这一点。一个只是使用组合的是

```
if ((combobox.SelectedIndex >= 0) && ((combobox.SelectedIndex + 1) < combobox.Items.Count))
{
   String nextGrade = combobox.Items[combobox.SelectedIndex + 1].ToString();
} 
```

我会在组合框绑定的数据上做类似的事情。

# php - Symfony 2 和 Doctrine 2 中的循环/自动引用

> ID：11873072
> 
> 赞同：1
> 
> 时间：2012-08-08T20:59:01.813
> 
> 标签：php, symfony, doctrine

您将如何创建实体与其自身的关系？我有一个“SupportTicket”实体，我希望有一个“depends”字段，它依赖于另一个“SupportTicket”实体。我怎样才能创建这个循环引用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:25:09.473

[教义 2 一对一的自引用关联](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/association-mapping.html#one-to-one-self-referencing)是你的朋友 :)

# eclipse - 构建路径 src/main/resources 的 Maven 项目错误

> ID：11873080
> 
> 赞同：2
> 
> 时间：2012-08-08T20:59:18.730
> 
> 标签：eclipse, maven, buildpath

我有一个有四个构建路径的 Maven 项目

```
src/main/java
src/main/resources
src/test/java
src/test/resources 
```

但是当我在eclipse中执行“Maven->更新项目配置”时，构建路径“src/main/resources”被删除并保留为简单文件夹。

知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T01:44:49.137

Which version of m2e are you using?

I currently am using m2e 1.2, the latest N release.

For your maven configuration, just note:

*   Don't specify your build paths: m2e & Maven will recognise those are part of the build paths. This is defined in Maven's internal [super-pom](http://maven.apache.org/guides/introduction/introduction-to-the-pom.html%20super-pom)

*   src/main/resources is *on* the build path, but is not a source directory. Meaning, Eclipse may not show it as being on Java's source path within your project, but any files added there are included in the built package / on execution. Therefore, being just 'simple' folders is correct.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:59:16.610

如果您希望将您的`src/main/resources`文件夹映射为 eclipse 中的源文件夹，只需在`.classpath`项目文件中添加以下行：

```
<classpathentry kind="src" path="src/main/resources"/> 
```

# c# - 编写我自己的音频播放器，从哪里开始

> ID：11873082
> 
> 赞同：1
> 
> 时间：2012-08-08T20:59:24.783
> 
> 标签：c#, audio

我正在对我发现的一些旧 DOS 游戏进行逆向工程。我很快意识到许多文件只是非常旧的格式（嗯，也许不是那么旧。20 年？）许多音频文件是使用当时基于 Creative 技术的东西构建的。有问题的格式在[http://wiki.multimedia.cx/index.php?title=Creative_Voice](http://wiki.multimedia.cx/index.php?title=Creative_Voice)中有详细描述。

我可以使用哪些东西来帮助我编写应用程序来播放这些音频文件？例如，是否有一个库允许我输入数据，然后让它决定如何处理数据？

我想将其编写为 C# 应用程序，然后将播放器用于其他旧音频格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:03:33.873

你需要做更多的研究。具体来说，查看数据字节。这些将被编解码器编码。因此，除了 CV 解码器之外，您还需要编写约 8 个编解码器解码器。

这些可能会有所帮助

[http://csharpsynthproject.codeplex.com](http://csharpsynthproject.codeplex.com)

[http://blogs.msdn.com/b/dawate/archive/2009/06/24/intro-to-audio-programming-part-3-synthesizing-simple-wave-audio-using-c.aspx](http://blogs.msdn.com/b/dawate/archive/2009/06/24/intro-to-audio-programming-part-3-synthesizing-simple-wave-audio-using-c.aspx)

[http://channel9.msdn.com/coding4fun/articles/Generating-Sound-Waves-with-C-Wave-Oscillators](http://channel9.msdn.com/coding4fun/articles/Generating-Sound-Waves-with-C-Wave-Oscillators)

# python - TypeError：render_page() 正好采用 2 个参数（1 个给定）

> ID：11873084
> 
> 赞同：-2
> 
> 时间：2012-08-08T20:59:43.583
> 
> 标签：python, django, typeerror

尝试访问我正在尝试构建的个人网站时，我不断收到以下错误消息：

```
TypeError: render_page() takes exactly 2 arguments (1 given) 
```

我什至不知道如何，因为我使用的是 render_to_response() 而不是直接调用 render_page() ，所以我认为这种事情会得到处理？

视图.py：

```
from django.http import HttpResponse,Http404
from django.template import Template,Context
from django.template.loader import get_template
from django.shortcuts import *

navs = {"About Me":"/aboutme/","Teaching":"/teaching/","CV":"/cv/","Online":"/epresence/",
"Links":"/links/","Main":"/main/"}
def render_page(request,page):
    if page == "epresence":
        return epresence(request)
    elif page == "links":
        return links(request)
    elif page == "teaching":
        return teaching(request)
    else:
        return other(request,page)
def epresence(request):
    pagetitle = "My Online Presence"
    sites = {...}
    navitems = globals().get("navs")
    return render_to_response("epresence.html",locals())
def links(request):
    pagetitle = "Links"
    navitems = globals().get("navs")
    friends = {...
}
    idols = {...
}
    resources = {...}
    return render_to_response("links.html",locals())
def teaching(request):
    pagetitle = "Teaching"
    navitems = globals().get("navs")
    teach = [...]
    learn = [...]
    return render_to_response("teaching.html",locals())
def other(request,page):
    pages = {"about":"About Me","me":"About Me","cv":"CV","home":"Home","main":"Home",}
    patetitle = pages.get(page)
    navitems = globals().get("navs")
    return render_to_response("main.html",locals()) 
```

网址.py：

```
from django.conf.urls import patterns, include, url
from personalsite.views import *
# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    url(r'^.*$',render_page),
) 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T21:04:09.047

我不知道“我正在使用 render_to_response() 而不是直接调用 render_page() ”是什么意思。您是`render_page`从您的 urlconf 调用的 - 但是，您没有将任何 URL 传递给它，因为您没有在正则表达式中使用组。

您应该像这样捕获参数：

```
url(r'^(?P<page>.*)$',render_page), 
```

（但请注意，这是一件相当奇怪的事情。URLconf 的全部目的是匹配特定的 URL 并分派到特定的视图函数：这样您`epresence`就可以在 urlconf 中匹配并让它直接调用 epresence 函数。此外，您应该查看[上下文处理器](https://docs.djangoproject.com/en/1.4/ref/templates/api/#subclassing-context-requestcontext)以将您的`navs`dict 传递给每个模板。）

# jquery - 将文档对象传递给网络工作者

> ID：11873092
> 
> 赞同：9
> 
> 时间：2012-08-08T21:00:22.690
> 
> 标签：jquery, html, web-worker

我知道网络工作者不能直接访问 dom。但是做这样的事情是不是一个坏主意：

```
var doc = $(document);

var worker = new Worker("worker.js");

worker.postMessage({ cmd: 'doDomStuff', data: doc }); 
```

你觉得这段代码有什么缺点吗？

非常感谢任何提示/评论。

**更新：**明确一点：我只想从 DOM 中获取数据，而不是设置任何新值或以任何方式操作 DOM。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-08T21:04:34.140

~~**我看不出你不能**这样做的任何原因，但是当你试图同时在 worker 和主 js 代码中操作相同的元素时，这可能会导致问题。~~

~~您需要在代码中添加一些互斥锁。~~

对不起，划破上面...

* * *

> 工人**无权**访问：
> 
> DOM（它不是线程安全
> 的） 窗口对象
> 文档对象
> 父对象

[**来源**](http://www.html5rocks.com/en/tutorials/workers/basics/#toc-enviornment-features)

# ios - 如何强制我的 UIViewController 视图的初始大小与其笔尖相匹配？

> ID：11873095
> 
> 赞同：1
> 
> 时间：2012-08-08T21:00:38.960
> 
> 标签：ios, uiviewcontroller

在 my`UIViewController`中`nib`，我为 指定了自定义大小 (743x533) `view`，但是当我实例化 my 时`UIViewController`，它`view`的大小始终为 768x1024。如何将其大小强制为（743x533）？我不想在两个地方指定这个大小（在我实例化 my`UIViewController`和 my `UIViewController`'s之后的代码中`nib`）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T21:23:29.933

从[`UIViewController`类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)：

> 视图控制器通常由窗口或另一个视图控制器拥有。如果视图控制器由窗口对象拥有，则它充当窗口的根视图控制器。视图控制器的根视图作为窗口的子视图添加并调整大小以填充窗口。

因此，除非您以模态方式显示它，否则它将占据全屏。

如果这不是您想要的，您可以创建一个容器视图，其中可以在其中包含多个 UIViewController，您可以在其中指定大小，或者这应该只是添加到现有视图控制器的 UIView。

# android - 运行使用 OpenCV 的 Android 应用程序时出错

> ID：11873098
> 
> 赞同：2
> 
> 时间：2012-08-08T21:00:45.657
> 
> 标签：android, opencv, android-ndk, emulation

当我在 Android 模拟器上使用 opencv 运行代码时，模拟器屏幕上显示以下错误：

未找到 OPENCV 管理器包。尝试安装它？

代码已成功构建和安装。

我在 LogCat 中看到了以下内容：

1.  尝试安装opencv库
2.  无法连接到 opencv 管理器
3.  没有检测到 gpu 仿真的仿真器
4.  尝试通过 google play 安装 opencv 管理器
5.  谷歌播放服务未安装

我按照以下站点中提到的步骤链接 ndk 和 opencv

[http://opencv.itseez.com/doc/tutorials/introduction/android_binary_package/android_binary_package.html](http://opencv.itseez.com/doc/tutorials/introduction/android_binary_package/android_binary_package.html)

和

[http://opencv.itseez.com/doc/tutorials/introduction/android_binary_package/android_binary_package_using_with_NDK.html#android-binary-package-with-ndk](http://opencv.itseez.com/doc/tutorials/introduction/android_binary_package/android_binary_package_using_with_NDK.html#android-binary-package-with-ndk)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T08:20:53.983

> 未找到 OPENCV 管理器包。尝试安装它？

你读过错误信息吗？您只需要安装 OpenCV Manager 包（从 android 市场下载或从`samples`文件夹安装 APK）。

# javascript - GWT - 用 jQuery 编写的包装小部件

> ID：11873101
> 
> 赞同：1
> 
> 时间：2012-08-08T21:00:50.353
> 
> 标签：javascript, jquery, gwt, gwtquery

我想在 GWT 中使用一个菜单小部件（教程和代码在这里：[http](http://tympanus.net/codrops/2010/07/16/slide-down-box-menu/) ://tympanus.net/codrops/2010/07/16/slide-down-box-menu/ ），它具有用 jQuery 编写的 javascript 代码。jQuery 代码看起来很简单，但我没有使用这个库的经验，所以我想知道在 GWT 中使用（运行）该代码的最佳（假设是快速和简单）方法是什么（也许我会使用其他jQuery 小部件也是如此）。

我找到了一个名为[gwtquery](http://code.google.com/p/gwtquery/)的库，如果这是采用的方法，那么任何建议或代码都会非常有用（在加快代码包装过程中）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T02:54:58.930

您可以将 jQuery 与 GWT 一起使用。

1.  第一个键是[JSNI](https://developers.google.com/web-toolkit/doc/2.4/DevGuideCodingBasicsJSNI)。JSNI 是您可以从 GWT/Java 类中直接调用本机 JavaScript 函数的方式。
2.  第二个关键是要意识到原生 JavaScript 代码中所有具有全局（窗口）范围的名称都是`$wnd`JSNI 中对象的属性。
3.  最后，JSNI 具有 GWT 编译器识别的符号，用于从 JavaScript 代码调用 GWT/Java 代码。这很重要，因为所有“Java”方法都编译为 JavaScript，并且在 JavaScript 中具有自动生成的名称。GWT 编译器必须在您的 JavaScript 代码中插入正确的名称才能调用“Java”代码。
4.  GWT API 让您可以访问 DOM 中的元素。如果您在页面中创建元素，则 GWT 代码可以将它们作为元素进行访问。某些元素可以“包装”为小部件，但有些小部件不支持包装简单的 DOM 元素。

这是一个简短的（未经测试的）示例，演示了如何在 GWT 中嵌入来自 slide-down-box-menu 网站的示例 JavaScript 代码。这个例子并没有做太多的 GWT<->JSNI/jQuery 交互，但是它确实将标准的 jQuery 代码集成到了一个 GWT 类中。

```
 import com.google.gwt.core.client.EntryPoint;
    public class MyEntryPoint implements EntryPoint
        {
        public void onModuleLoad()
            {
            this.configureMenu();
            }

        public static final native void configureMenu()
            /*-{
            $wnd.$(function() {
                    $wnd.$('#sdt_menu > li').bind('mouseenter',function(){
                            var $elem = $wnd.$(this);
                            $elem.find('img')
                                     .stop(true)
                                     .animate({
                                            'width':'170px',
                                            'height':'170px',
                                            'left':'0px'
                                     },400,'easeOutBack')
                                     .andSelf()
                                     .find('.sdt_wrap')
                                     .stop(true)
                                     .animate({'top':'140px'},500,'easeOutBack')
                                     .andSelf()
                                     .find('.sdt_active')
                                     .stop(true)
                                     .animate({'height':'170px'},300,function(){
                                    var $sub_menu = $elem.find('.sdt_box');
                                    if($sub_menu.length){
                                            var left = '170px';
                                            if($elem.parent().children().length == $elem.index()+1)
                                                    left = '-170px';
                                            $sub_menu.show().animate({'left':left},200);
                                    }   
                            });
                    }).bind('mouseleave',function(){
                            var $elem = $wnd.$(this);
                            var $sub_menu = $elem.find('.sdt_box');
                            if($sub_menu.length)
                                    $sub_menu.hide().css('left','0px');

                            $elem.find('.sdt_active')
                                     .stop(true)
                                     .animate({'height':'0px'},300)
                                     .andSelf().find('img')
                                     .stop(true)
                                     .animate({
                                            'width':'0px',
                                            'height':'0px',
                                            'left':'85px'},400)
                                     .andSelf()
                                     .find('.sdt_wrap')
                                     .stop(true)
                                     .animate({'top':'25px'},500);
                    });
            });
            }-*/; // end JSNI method
        } // end class 
```

gwtquery 库不是您要寻找的：它与 jQuery 无关，只是模仿它的 API。

# java - 用java在windows vista上安装和使用play框架

> ID：11873102
> 
> 赞同：2
> 
> 时间：2012-08-08T21:00:56.440
> 
> 标签：java, playframework, windows-vista

我是 play 框架的新手，可以先了解一下 play 框架为什么有用，以及如何在 windows vista 上安装和使用它。我将从事的项目将是制作一个自定义 API，该 API 将为移动和桌面设备访问的照片共享软件提供支持。我试图通过播放网站上的安装指南，但我无法让它工作（不幸的是，在 Windows 上的命令行中手动安装时我不是很好）。

我希望能够运行其中包含的示例项目之一，但我不确定如何在命令行上安装 play 命令来运行它。任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T21:13:36.130

打开命令窗口，然后键入：

c://pathtoplay目录/播放

# asp.net - 如何在 ASP.NET 页面中制作此布局？

> ID：11873103
> 
> 赞同：-3
> 
> 时间：2012-08-08T21:01:03.533
> 
> 标签：asp.net

我想在 ASP.Net 页面中进行此布局，并希望其中的每个圆圈都是一个 ImageButton，当将鼠标悬停在 ImageButton 上时，它会`<div></div>`在圆圈中间的标签中显示一个文本。

![在此处输入图像描述](../Images/608c3870b42067d69f3526ae10000d0b.png)

```
<%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
CodeFile="Default.aspx.cs" Inherits="Default" %>

<%@ Register assembly="AjaxControlToolkit" namespace="AjaxControlToolkit" tagprefix="cc1" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
<style >
.modalBackground 
{
    background-color:Gray;
    filter:alpha(opacity=70);
    opacity:0.7;
}
.modalPopup
{
    background-color:#ffffdd;
    border-width:3px; 
    border-style:solid;
    border-color:Gray; 
    padding:3px; 
    width:200px; 
}
</style>
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
<h2>
    Welcome To SeearaBook 
</h2>
<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>
<a id="SeearaBook" runat="server" href="#">سيرة بووك</a>
<asp:Panel ID="pnlpopup" runat="server" Width="525px" BorderStyle="Solid"
BorderColor="#333737" BackColor="White" BorderWidth="3px" Height="170px" >
<cc1:hovermenuextender ID="HoverMenuExtender1" runat="server" 
TargetControlID="A" PopupControlID="Ages" PopupPosition="Left" HoverDelay="200">
</cc1:hovermenuextender>
<div id ="Ages" style="position: fixed; display: none; color:Blue; font-size:20px; background-color:transparent; width:auto;" >
سيتم دخولك الى عالم سيرة باختيارك للزمان
</div>
<cc1:hovermenuextender ID="HoverMenuExtender2" runat="server" 
TargetControlID="P" PopupControlID="Places" PopupPosition="Left" HoverDelay="200">
</cc1:hovermenuextender>
<div id ="Places" style="position: fixed; display: none; color:Blue; font-size:20px; background-color:transparent; width:auto;" >
سيتم دخولك الى عالم سيرة باختيارك للمكان
</div>
<cc1:hovermenuextender ID="HoverMenuExtender3" runat="server" 
TargetControlID="C" PopupControlID="Char" PopupPosition="Left" HoverDelay="200">
</cc1:hovermenuextender>
<div id ="Char" style="position: relative; display: none; color:Blue; font-size:20px; background-color:transparent; width:auto;" >
مازال العمل جاري عليها
</div>
<cc1:hovermenuextender ID="HoverMenuExtender4" runat="server" 
TargetControlID="E" PopupControlID="Events" PopupPosition="Left" HoverDelay="200">
</cc1:hovermenuextender>
<div id ="Events" style="position: relative; display: none; color:Blue; font-size:20px; background-color:transparent; width:auto;" >
مازال العمل جاري عليها
</div>
<cc1:hovermenuextender ID="HoverMenuExtender5" runat="server" 
TargetControlID="N" PopupControlID="Not" PopupPosition="Left" HoverDelay="200">
</cc1:hovermenuextender>
<div id ="Not" style="position: relative; display: none; color:Blue; font-size:20px; background-color:transparent; width:auto;" >
مازال العمل جاري عليها
</div>
<div align="right">
<asp:ImageButton ID="A" runat="server" BorderWidth="2px" Height="50px" 
        ImageUrl="~/Images/Ages.jpg" onclick="A_Click" Width="50px"  />
<br />
<asp:ImageButton ID="P" runat="server" BorderWidth="2px" Height="50px" 
        ImageUrl="~/Images/Places.jpg" onclick="P_Click" Width="50px" />
<br />
<asp:ImageButton ID="C" BorderWidth="2px" runat="server" Height="50px" 
        ImageUrl="~/Images/Characters.jpg" Width="50px" onclick="C_Click" />
<br />
<asp:ImageButton ID="E" runat="server" BorderWidth="2px" Height="50px" 
        ImageUrl="~/Images/Events.jpg" Width="50px" onclick="E_Click" />
<br />
<asp:ImageButton ID="N" runat="server" BorderWidth="2px" Height="50px" 
        ImageUrl="~/Images/5.jpg" Width="50px" onclick="N_Click" />
<br />
<div align="center">
<asp:Button ID="btnCancelpopup" runat="server" Text="Cancel" BorderStyle="Groove" />
</div>
</div>
</asp:Panel>
<cc1:AnimationExtender id="OpenAnimation" runat="server" TargetControlID="SeearaBook">
<Animations>
    <OnClick>
        <Sequence>
            <EnableAction Enabled="false" />
            <Parallel AnimationTarget="pnlpopup" Duration=".75" Fps="25">
                <Move Horizontal="25" Vertical="-50" />
                <Resize Height="350" Width="475" />
            </Parallel>
        </Sequence>
    </OnClick>
</Animations>
</cc1:AnimationExtender>
<cc1:AnimationExtender id="CloseAnimation" runat="server" TargetControlID="btnCancelpopup">
<Animations>
    <OnClick>
        <Sequence>
            <EnableAction Enabled="true"
                AnimationTarget="SeearaBook" />
            <Parallel AnimationTarget="pnlpopup" Duration=".75" Fps="25">
                <Move Horizontal="0" Vertical="0" />
                <Resize Height="170" Width="525" />
            </Parallel>
        </Sequence>
    </OnClick>
</Animations>
</cc1:AnimationExtender>
<cc1:RoundedCornersExtender ID="rce" runat="server"
TargetControlID="pnlpopup"
Radius="10"
BorderColor="#333737"
Corners="All" />
<cc1:RoundedCornersExtender ID="RoundedCornersExtender1" runat="server"
TargetControlID="A"
Radius="25"
BorderColor="#333737"
Corners="All" />
<cc1:RoundedCornersExtender ID="RoundedCornersExtender2" runat="server"
TargetControlID="P"
Radius="25"
BorderColor="#333737"
Corners="All" />
<cc1:RoundedCornersExtender ID="RoundedCornersExtender3" runat="server"
TargetControlID="C"
Radius="25"
BorderColor="#333737"
Corners="All" />
<cc1:RoundedCornersExtender ID="RoundedCornersExtender4" runat="server"
TargetControlID="E"
Radius="25"
BorderColor="#333737"
Corners="All" />
<cc1:RoundedCornersExtender ID="RoundedCornersExtender5" runat="server"
TargetControlID="N"
Radius="25"
BorderColor="#333737"
Corners="All" />
<cc1:DropShadowExtender ID="dse" runat="server"
TargetControlID="pnlpopup" 
Opacity=".8" 
Rounded="true"
TrackPosition="true" />
<cc1:ModalPopupExtender ID="mpe" runat="server" 
    TargetControlID="SeearaBook" 
    PopupControlID="pnlpopup"  
    CancelControlID="btnCancelpopup" 
    EnableViewState="true"
    DropShadow="true"
    BackgroundCssClass="modalBackground" />
</asp:Content>` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:09:20.307

你可能想看看`ImageMap`控件。[http://msdn.microsoft.com/en-us/library/cc295596.aspx](http://msdn.microsoft.com/en-us/library/cc295596.aspx)如果你想要一些`mouseover`效果，你可能还需要 javascript。祝你好运！

编辑：

```
<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
    <script type="text/javascript" language="javascript">

        function changeMiddleText(text) {
            //I don't have time to position this div. Find a way to do it
            //and that's it.
            document.getElementById("divContent").innerHTML = text;
        }
    </script>
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
    <div id="divContent">
    </div>
    <div style="text-align: center; width: 304px; margin-left: auto; margin-right: auto;">
        <img id="divMap" src="http://i.stack.imgur.com/slQsk.png" usemap="#map" border="0"
            width="304" height="306" alt="" />
        <map id="map" name="map">
            <area shape="poly" onmouseover="changeMiddleText('Text1');" coords="153, 2, 189, 31, 152, 67, 120, 36"
                href="#" alt="" title="" />
            <area shape="poly" onmouseover="changeMiddleText('Text2');" coords="267, 90, 297, 123, 266, 156, 235, 123"
                href="#" alt="" title="" />
            <area shape="poly" onmouseover="changeMiddleText('Text3');" coords="221, 231, 252, 263, 222, 295, 190, 264"
                href="#" alt="" title="" />
            <area shape="poly" onmouseover="changeMiddleText('Text4');" coords="77, 236, 108, 269, 76, 299, 46, 268"
                href="#" alt="" title="" />
            <area shape="poly" onmouseover="changeMiddleText('Text5');" coords="34, 92, 66, 120, 31, 152, 2, 122"
                href="#" alt="" title="" />
            <area shape="circle" id="middleContent" coords="153, 157, 67" alt="" />
        </map>
    </div>
</asp:Content> 
```

[JSFiddler](http://jsfiddle.net/k9YdW/3/)

GL！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T21:45:47.827

您可以使用元素的绝对定位。只需确保将元素包含在一个容器中，例如一个 div，它具有`position:relative`

例子：

```
<div style="position:relative; height: 400px; width: 500px; background-color: yellow;">
 <img id="topleft" style="position: absolute; top: 150px; left: 100px;">
 <img id="topright" style="position: absolute; top: 150px; right: 100px;">
 <img id="topcenter" style="position: absolute; top: 50px; left: 250px;">
 <img id="bottomleft" style="position: absolute; bottom: 50px; left: 100px;">
 <img id="bottomright" style="position: absolute; bottom: 50px; right: 100px;">
 <img id="center" style="position: absolute; left: 200px; top: 200px;">
</div> 
```

我使用简单的 HTML 标签来传达绝对定位的概念。用您的 ImageButtons 等替换 img 标签。

您可以摆弄 top/left/bottom/top css 值以将您的子元素准确放置在您想要的位置。

# php - 如何在 MAMP 中升级 OpenSSL

> ID：11873107
> 
> 赞同：6
> 
> 时间：2012-08-08T21:01:16.387
> 
> 标签：php, openssl, mamp

我在 Mac OS X 10.6.8 上使用 MAMP 2.1 - 这带有 PHP 的 OpenSSL 扩展，但只有 0.9 版 - 我需要将其升级到 1.0 - 但是我不确定我将如何完成这样的任务。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-08-24T12:51:13.107

你可以按照我从[这里得到的这些说明](https://github.com/lunr/mamp-curl-tls)

> 升级步骤
> 
> **1) 确保您已安装 XCode 命令行工具。**
> 
> 我们将需要一个 C 编译器和其他库来升级 cURL。因此，启动一个终端，您将继续在本文档中的每个步骤中使用它。
> 
> `xcode-select --install`
> 
> **2) 安装 Homebrew 的 OpenSSL 库**
> 
> 目标是针对 [http://brew.sh](http://brew.sh)提供的 OpenSSL 库编译 cURL ，因此，如果您尚未安装自制软件，请按照其网站上的说明进行操作，或者谨慎运行以下命令：
> 
> ```
> /usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)" 
> ```
> 
> 接下来，安装 OpenSSL 库：
> 
> ```
> brew install openssl 
> ```
> 
> **3) 检查 MAMP 包含的 cURL 版本**
> 
> 我们只是想确认我们使用的是哪个版本的 cURL，因为我们想从 cURL 官方网站 haxx.se 下载并安装相同的版本
> 
> ```
> /Applications/MAMP/Library/bin/curl-config --version
> The command should return with version 7.43.0 
> ```
> 
> 确保在完成后续步骤之前退出 MAMP！
> 
> **4) 下载 cURL 源**
> 
> 从官网 curl.haxx.se/download 下载 cURL 的源代码或直接获取：
> 
> ```
> cd ~/Downloads
> wget https://curl.haxx.se/download/curl-7.43.0.tar.gz 
> ```
> 
> 接下来，将 tarball 和 cd 解压到工作目录中
> 
> ```
> tar xzvf curl-7.43.0.tar.gz
> cd curl-7.43.0 
> ```
> 
> **5) 下载 CA / 证书包并解压到 MAMP**
> 
> 默认情况下，cURL 不附带任何 CA 文件或捆绑包。您可以找到自己的源代码，或从该存储库 ( [https://github.com/lunr/mamp-curl-tls](https://github.com/lunr/mamp-curl-tls) ) 下载 ca-bundle.tgz 文件并解压到 MAMP 中：
> 
> ```
> tar xzvf ca-bundle.tgz -C /Applications/MAMP 
> ```
> 
> **6) 编译 cURL**
> 
> 在 cURL 源代码的工作目录中执行以下配置命令：
> 
> ```
> ./configure --prefix=/Applications/MAMP/Library --with-ssl=/usr/local/Cellar/openssl/1.0.2g --with-ca-path=/Applications/MAMP/etc/openssl/certs --with-ca-bundle=/Applications/MAMP/etc/openssl/certs/ca-bundle.crt 
> ```
> 
> 此命令专门针对自制的 OpenSSL 库和您在第 5 步中下载的 CA 包构建。如果您愿意，可以添加自己的选项。
> 
> 命令完成后，您应该得到完全像这样的输出：
> 
> ```
> curl version:     7.43.0
> Host setup:       x86_64-apple-darwin15.4.0
> Install prefix:   /Applications/MAMP/Library
> Compiler:         gcc
> SSL support:      enabled (OpenSSL)
> SSH support:      no      (--with-libssh2)
> zlib support:     enabled
> GSS-API support:  no      (--with-gssapi)
> TLS-SRP support:  enabled
> resolver:         default (--enable-ares / --enable-threaded-resolver)
> IPv6 support:     enabled
> Unix sockets support: enabled
> IDN support:      no      (--with-{libidn,winidn})
> Build libcurl:    Shared=yes, Static=yes
> Built-in manual:  enabled
> --libcurl option: enabled (--disable-libcurl-option)
> Verbose errors:   enabled (--disable-verbose)
> SSPI support:     no      (--enable-sspi)
> ca cert bundle:   /Applications/MAMP/etc/openssl/certs/ca-bundle.crt
> ca cert path:     /Applications/MAMP/etc/openssl/certs
> LDAP support:     enabled (OpenLDAP)
> LDAPS support:    enabled
> RTSP support:     enabled
> RTMP support:     no      (--with-librtmp)
> metalink support: no      (--with-libmetalink)
> HTTP2 support:    disabled (--with-nghttp2)
> Protocols:        DICT FILE FTP FTPS GOPHER HTTP HTTPS IMAP IMAPS LDAP LDAPS POP3 POP3S RTSP SMB SMBS SMTP SMTPS TELNET TFTP 
> ```
> 
> 具体来说，查看 Install prefix 和 ca cert path 和 ca cert bundle 行，并确认它们指向 MAMP 的目录。
> 
> 如果是，请继续，否则，configure 命令有问题
> 
> **7) 安装新的 cURL 库**
> 
> ```
> make && make install 
> ```
> 
> **8) 重启 MAMP 并确认 OpenSSL 版本**
> 
> 打开 MAMP 应用程序并启动服务器。您可以使用 phpinfo() 在 phpinfo() 的 curl 部分下确认 OpenSSL 版本。它应该是 SSL 版本：OpenSSL/1.0.2g

# f# - OCaml、F# 连续、级联 let 绑定

> ID：11873116
> 
> 赞同：7
> 
> 时间：2012-08-08T21:01:54.033
> 
> 标签：f#, ocaml

在 OCaml 或 F# 中，具有以下形式的连续 let 绑定是典型的：

```
let a1 = ...
let a2 = ...
let a3 = ...
let f1 = ...
let f2 = ...
let f3 = ... 
f3 a1 a2 a3 
```

在许多情况下，其中一些 let 绑定（例如上面示例中的**f1**和**f2**）仅用作紧跟它们的表达式或函数的构建块，之后不再被引用。在其他情况下，确实在“链”的末尾使用了一些值（例如上面示例中的**a1**、**a2**和**a3**）。是否有任何语法习惯可以使这些范围上的差异明确？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-08T21:15:34.557

On 可以用这个来明确表示`temp`只在定义中使用`a1`：

```
let a1 =
  let temp = 42 in
  temp + 2 in
let a2 = ... 
```

的范围`temp`确实仅限于 的定义`a1`。

另一个模板重用相同的名称来隐藏它以前的使用，因此也清楚地表明以前的使用是临时的：

```
let result = input_string inchan in
let result = parse result in
let result = eval result in
result 
```

不过，重用同名是有争议的。

当然，总是有注释和空行：

```
let a1 = ...
let a2 = ...
let a3 = ...

(*We now define f3:*)
let f1 = ...
let f2 = ...
let f3 = ...

f3 a1 a2 a3 
```

编辑：正如 fmr 所指出的，我也喜欢管道操作员。在 OCaml 中默认没有定义，使用

```
let (|>) x f = f x;; 
```

然后你可以写类似

```
input_string inchan |> parse |> eval |> print 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-09T13:42:47.337

除了 jrouquie 的回答之外，您还可以通过明智地使用函数组合和其他组合器来避免为中间值命名。[我特别喜欢Batteries](http://ocaml-batteries-team.github.com/batteries-included/hdoc/BatPervasives.html)提供的以下三个：

```
# let ( |> ) x f = f x;;
val ( |> ) : 'a -> ('a -> 'b) -> 'b = <fun>
# let ( |- ) f g x = g (f x);;
val ( |- ) : ('a -> 'b) -> ('b -> 'c) -> 'a -> 'c = <fun>
# let flip f x y = f y x;;
val flip : ('a -> 'b -> 'c) -> 'b -> 'a -> 'c = <fun> 
```

一个使用的小例子`|>`是

```
# [1;2;3]
  |> List.map string_of_int
  |> String.concat "; "
  |> Printf.sprintf "[%s]";;
- : string = "[1; 2; 3]" 
```

You'll end up needing `|-` and `flip` in more realistic examples. This is known as [point-free](https://stackoverflow.com/questions/944446/what-is-point-free-style-in-functional-programming) or [tacit](http://en.wikipedia.org/wiki/Tacit_programming) programming.

# iphone - ios 邮件应用程序无法在我的应用程序中打开电子名片

> ID：11873117
> 
> 赞同：4
> 
> 时间：2012-08-08T21:01:56.367
> 
> 标签：iphone, objective-c, ios, email, vcf-vcard

我想使用邮件应用程序将 vCards 导入我的 iOS 应用程序。我已将 public.vcard 添加到我的项目列表中。如果我尝试在另一个应用程序中打开电子名片，`UIDocumentInteractionController`一切都会按预期工作。但是，如果我尝试在邮件应用程序中打开 vCard，则会在邮件中打开 vCard，而我的应用程序没有选择。有解决办法吗？

**更新：** vcard 的 plist 条目看起来像

```
<key>CFBundleDocumentTypes</key>
<array>
    <dict>
        <key>CFBundleTypeName</key>
        <string>vCard</string>
        <key>LSHandlerRank</key>
        <string>Default</string>
        <key>LSItemContentTypes</key>
        <array>
            <string>public.vcard</string>
        </array>
    </dict>
</array> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T05:48:55.663

这个条目在我看来相当不完整。通常，如果您的应用程序能够打开某些类型，您需要有一个导入声明（如果文件格式归另一个应用程序所有）或导出声明（如果格式归您所有）

iOS 和 Mac 主要通过扩展来匹配 UTI，所以我想你也需要在声明中包含它。检查 iOS 上的 UTI 功能是否确实为您的文件扩展名分配了 public.vCard 类型。如果没有，则无法找到。

如果存在这样的关联，我会在您的 plist 中添加一个 UTImportedTypeDeclarations，如果没有，则添加一个 UTExportedTypeDeclarations

我写了这个教程来解释你需要的所有东西：http: [//www.cocoanetics.com/2012/09/fun-with-uti/](http://www.cocoanetics.com/2012/09/fun-with-uti/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-12T00:31:25.397

从 iOS 7.0.4 开始，这似乎是不可能的。

iOS 似乎在处理邮件应用程序中的某些文件类型时与其他文件类型不同。在邮件应用程序中，您将无法在非 Apple 应用程序中打开这些文件类型。

您可以通过使用 UIDocumentInteractionController 以编程方式打开文件来验证这一点。这将提示用户在许多应用程序中打开文件（在所有注册此文件类型或更通用的应用程序中。Dropbox 应用程序例如几乎可以打开所有内容）。

当您向自己邮寄完全相同的文件并尝试在邮件应用程序中打开它时，您将无法获得这些选项（如 Dropbox）。

我通过注册 VCard/.vcf、Jpegs 和自定义类型来验证这一点。

# vim - Janus/Vim 中的双斜线用于最大化窗格。不再工作了。知道为什么吗？

> ID：11873119
> 
> 赞同：0
> 
> 时间：2012-08-08T21:01:57.587
> 
> 标签：vim

我使用 Janus 的旧 Vim 设置有一个有用的快捷方式，可以在拆分窗格环境中最大化给定窗格：按两次斜杠。此快捷方式不起作用，因为我更换了计算机并再次设置了 Janus。这是一些我不记得而且找不到的晦涩插件，还是一个已停产的 janus 预设？无论哪种方式......我如何找回它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T15:34:37.680

它实际上是双反斜杠。我不确定它什么时候被替换，但现在它是`\zw`（对于“ZoomWin”）。要取回它，把它放在你的 .vimrc.after 中：

```
call janus#add_mapping('zoomwin', 'map', '<Leader><Leader>', ':ZoomWin<CR>') 
```

(`<Leader>`是一个可以映射到任何东西的特殊键，但默认情况下它是反斜杠（在 Janus 中）。您也可以将映射指定为`'\\'`.)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T22:06:36.343

`<C-w>_`您可以使用（请参阅）最大化窗格`:help CTRL-W__`。如果您想查看某个键映射到什么，请尝试`:map //`。您可以随时使用 重新设置`nnoremap // <C-w>_`。

# r - 在多列上滚动回归

> ID：11873123
> 
> 赞同：7
> 
> 时间：2012-08-08T21:02:16.230
> 
> 标签：r, apply, xts, linear-regression, rolling-computation

我在寻找最有效的方法来计算对具有多列的 xts 对象的滚动线性回归时遇到问题。我已经在 stackoverflow 上搜索并阅读了几个以前的问题。

这个[问题和答案](https://stackoverflow.com/questions/9351066/applying-a-rolling-window-regression-to-an-xts-series-in-r)很接近，但在我看来还不够，因为我想计算多个回归，而因变量在所有回归中都保持不变。我试图用随机数据重现一个例子：

```
require(xts)
require(RcppArmadillo)  # Load libraries

data <- matrix(sample(1:10000, 1500), 1500, 5, byrow = TRUE)  # Random data
data[1000:1500, 2] <- NA  # insert NAs to make it more similar to true data
data <- xts(data, order.by = as.Date(1:1500, origin = "2000-01-01"))

NR <- nrow(data)  # number of observations
NC <- ncol(data)  # number of factors
obs <- 30  # required number of observations for rolling regression analysis
info.names <- c("res", "coef")

info <- array(NA, dim = c(NR, length(info.names), NC))
colnames(info) <- info.names 
```

创建数组是为了随时间和每个因子存储多个变量（残差、系数等）。

```
loop.begin.time <- Sys.time()

for (j in 2:NC) {
  cat(paste("Processing residuals for factor:", j), "\n")
  for (i in obs:NR) {
    regression.temp <- fastLm(data[i:(i-(obs-1)), j] ~ data[i:(i-(obs-1)), 1])
    residuals.temp <- regression.temp$residuals
    info[i, "res", j] <- round(residuals.temp[1] / sd(residuals.temp), 4)
    info[i, "coef", j] <- regression.temp$coefficients[2]
  } 
}

loop.end.time <- Sys.time()
print(loop.end.time - loop.begin.time)  # prints the loop runtime 
```

`data[, 1]`正如循环所示，这个想法是每次针对其他因素之一运行 30 个观察值滚动回归，并将其作为因变量（因子）。我必须将 30 个残差存储在一个临时对象中，以便将它们标准化，因为`fastLm`不计算标准化残差。

如果 xts 对象中的列数（因子）增加到大约 100 到 1,000 列，则循环非常缓慢并且会变得很麻烦，这需要很长时间。我希望有一个更有效的代码来在大型数据集上创建滚动回归。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T14:12:29.547

如果你深入到线性回归的数学水平，它应该会很快。如果 X 是自变量，Y 是因变量。系数由下式给出

`Beta = inv(t(X) %*% X) %*% (t(X) %*% Y)`

我对您希望哪个变量成为依赖变量以及哪个变量是独立变量有点困惑，但希望解决下面的类似问题也会对您有所帮助。

在下面的示例中，我采用 1000 个变量而不是原来的 5 个，并且不引入任何 NA。

```
require(xts)

data <- matrix(sample(1:10000, 1500000, replace=T), 1500, 1000, byrow = TRUE)  # Random data
data <- xts(data, order.by = as.Date(1:1500, origin = "2000-01-01"))

NR <- nrow(data)  # number of observations
NC <- ncol(data)  # number of factors
obs <- 30  # required number of observations for rolling regression analysis 
```

现在我们可以使用 Joshua 的 TTR 包计算系数。

```
library(TTR)

loop.begin.time <- Sys.time()

in.dep.var <- data[,1]
xx <- TTR::runSum(in.dep.var*in.dep.var, obs)
coeffs <- do.call(cbind, lapply(data, function(z) {
    xy <- TTR::runSum(z * in.dep.var, obs)
    xy/xx
}))

loop.end.time <- Sys.time()

print(loop.end.time - loop.begin.time)  # prints the loop runtime 
```

时差 3.934461 秒

```
res.array = array(NA, dim=c(NC, NR, obs))
for(z in seq(obs)) {
  res.array[,,z] = coredata(data - lag.xts(coeffs, z-1) * as.numeric(in.dep.var))
}
res.sd <- apply(res.array, c(1,2), function(z) z / sd(z)) 
```

如果我在索引中没有犯任何错误，`res.sd`应该给你标准化的残差。请随时修复此解决方案以纠正任何错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-02T17:39:08.717

`rollRegres`这是使用包的一种更快的方法

```
library(xts)
library(RcppArmadillo)

#####
# simulate data
set.seed(50554709)
data <- matrix(sample(1:10000, 1500), 1500, 5, byrow = TRUE)  # Random data
# data[1000:1500, 2] <- NA # only focus on the parts that are computed
data <- xts(data, order.by = as.Date(1:1500, origin = "2000-01-01"))

#####
# setup for solution in OP
NR <- nrow(data)
NC <- ncol(data)
obs <- 30L
info.names <- c("res", "coef")

info <- array(NA, dim = c(NR, length(info.names), NC))
colnames(info) <- info.names

#####
# solve with rollRegres
library(rollRegres)

loop.begin.time <- Sys.time()

X <- cbind(1, drop(data[, 1]))
out <- lapply(2:NC, function(j){
  fit <- roll_regres.fit(
    y = data[, j], x = X, width = obs, do_compute = c("sigmas"))

  # are you sure you want the residual of the first and not the last
  # observation in each window?
  idx <- 1:(nrow(data) - obs + 1L)
  idx_tail <- idx + obs - 1L
  resids <- c(rep(NA_real_, obs - 1L),
                  data[idx, j] - rowSums(fit$coefs[idx_tail, ] * X[idx, ]))

  # the package uses the unbaised estimator so we have to time by this factor
  # to get the same
  sds <-  fit$sigmas * sqrt((obs - 2L) / (obs - 1L))

  unclass(cbind(coef = fit$coefs[, 2L], res = drop(round(resids / sds, 4))))
})

loop.end.time <- Sys.time()
print(loop.end.time - loop.begin.time)
#R Time difference of 0.03123808 secs

#####
# solve with original method
loop.begin.time <- Sys.time()

for (j in 2:NC) {
  cat(paste("Processing residuals for factor:", j), "\n")
  for (i in obs:NR) {
    regression.temp <- fastLm(data[i:(i-(obs-1)), j] ~ data[i:(i-(obs-1)), 1])
    residuals.temp <- regression.temp$residuals
    info[i, "res", j] <- round(residuals.temp[1] / sd(residuals.temp), 4)
    info[i, "coef", j] <- regression.temp$coefficients[2]
  }
}
#R Processing residuals for factor: 2
#R Processing residuals for factor: 3
#R Processing residuals for factor: 4
#R Processing residuals for factor: 5

loop.end.time <- Sys.time()
print(loop.end.time - loop.begin.time)  # prints the loop runtime
#R Time difference of 7.554767 secs

#####
# check that results are the same
all.equal(info[, "coef", 2L], out[[1]][, "coef"])
#R [1] TRUE
all.equal(info[, "res" , 2L], out[[1]][, "res"])
#R [1] TRUE

all.equal(info[, "coef", 3L], out[[2]][, "coef"])
#R [1] TRUE
all.equal(info[, "res" , 3L], out[[2]][, "res"])
#R [1] TRUE

all.equal(info[, "coef", 4L], out[[3]][, "coef"])
#R [1] TRUE
all.equal(info[, "res" , 4L], out[[3]][, "res"])
#R [1] TRUE

all.equal(info[, "coef", 5L], out[[4]][, "coef"])
#R [1] TRUE
all.equal(info[, "res" , 5L], out[[4]][, "res"])
#R [1] TRUE 
```

请注意上述解决方案中的此评论

```
# are you sure you want the residual of the first and not the last
# observation in each window? 
```

* * *

这是与[Sameer的答案的比较](https://stackoverflow.com/a/11885383/5861244)

```
library(rollRegres)
require(xts)

data <- matrix(sample(1:10000, 1500000, replace=T), 1500, 1000, byrow = TRUE)  # Random data
data <- xts(data, order.by = as.Date(1:1500, origin = "2000-01-01"))

NR <- nrow(data)  # number of observations
NC <- ncol(data)  # number of factors
obs <- 30  # required number of observations for rolling regression analysis

loop.begin.time <- Sys.time()

X <- cbind(1, drop(data[, 1]))
out <- lapply(2:NC, function(j){
  fit <- roll_regres.fit(
    y = data[, j], x = X, width = obs, do_compute = c("sigmas"))

  # are you sure you want the residual of the first and not the last
  # observation in each window?
  idx <- 1:(nrow(data) - obs + 1L)
  idx_tail <- idx + obs - 1L
  resids <- c(rep(NA_real_, obs - 1L),
              data[idx, j] - rowSums(fit$coefs[idx_tail, ] * X[idx, ]))

  # the package uses the unbaised estimator so we have to time by this factor
  # to get the same
  sds <-  fit$sigmas * sqrt((obs - 2L) / (obs - 1L))

  unclass(cbind(coef = fit$coefs[, 2L], res = drop(round(resids / sds, 4))))
})

loop.end.time <- Sys.time()
print(loop.end.time - loop.begin.time)
#R Time difference of 0.9019711 secs 
```

时间包括用于计算标准化残差的时间。

# javascript - jquery.serialScroll-1.2.1.js 在 Coda Slider 中编辑

> ID：11873125
> 
> 赞同：0
> 
> 时间：2012-08-08T21:02:33.063
> 
> 标签：javascript, jquery

尾声滑块：

[http://jqueryfordesigners.com/coda-slider-effect/](http://jqueryfordesigners.com/coda-slider-effect/)

我最近在我的网页上实现了 Coda Slider，但遇到了一个问题。我想知道的问题更像是一个实现，如果用户在第一张幻灯片上，则更改/禁用左按钮，如果用户在右幻灯片上，则更改/禁用右键。用户不能按左键转到最后一张幻灯片，按右键滚动到第一张幻灯片。我想禁用该功能。

我试图查看代码，看看我必须在哪里更改或添加代码，但无法确定。有人可以帮忙吗？

示例：我有四张幻灯片 (0-3) 我将添加什么代码，以便在滚动到幻灯片 0 时隐藏左侧按钮 (id=leftb)，当我滚动到幻灯片 3 时隐藏右侧按钮 (id=rightb) .我添加了以下代码：

```
if (n<0) { //if on first slide make left button hidden and right button visible
if (document.getElementById) { 
document.getElementById('leftb').style.visibility = 'hidden'; 
document.getElementById('rightb').style.visibility = 'visible'; 
}}
if (n==0 || n==1 || n ==2) { //if on second and third slides make both button visible
if (document.getElementById) { 
document.getElementById('leftb').style.visibility = 'visible'; 
document.getElementById('rightb').style.visibility = 'visible'; 
}}

if (n>2) { //if on last slide make right button hidden and left button visible
if (document.getElementById) { 
document.getElementById('leftb').style.visibility = 'visible'; 
document.getElementById('rightb').style.visibility = 'hidden'; 
}} 
```

我认为上面的代码在根据幻灯片编号隐藏和显示导航按钮方面是有意义的，但它不起作用。

任何的想法？

***编辑：***

我目前拥有的文件版本是：

*   jquery-1.2.6.js
*   jquery.easing.1.3.js
*   jquery.localscroll-1.2.5.js
*   jquery.scrollTo-1.3.3.js
*   jquery.serialScroll-1.2.1.js
*   coda-slider.js

我从 github 下载哪些文件并更新我的服务器以使其正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T22:03:09.050

我已经分叉了 serialScroll 以添加此功能。您现在有一个 'wrap' 选项，您可以将其设置为 false 以禁用。您可以在 github 上查看我的提交以查看详细信息：

[https://github.com/lperrin/jquery.serialScroll](https://github.com/lperrin/jquery.serialScroll)

基本上，我补充说`checkDisableWrap`：

```
function checkDisableControls( pos, limit ){
  $(settings.prev).css('visibility', pos <= 0 ? 'hidden' : 'visible');
  $(settings.next).css('visibility', pos >= limit ? 'hidden' : 'visible');
}; 
```

每次插件滚动时都会触发。

# facebook - 使用 Facebook 连接在流星应用程序中登录回调

> ID：11873130
> 
> 赞同：1
> 
> 时间：2012-08-08T21:02:50.063
> 
> 标签：facebook, node.js, meteor

如何订阅 Meteor.loginWithFacebook() 或 Meteor.loginWithGoogle() 方法的回调？如果没有这样的事情，什么是一个好的解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T19:14:34.840

想象一下 facebook 也一样（注意代码是 coffeescript）

```
Meteor.loginWithGithub = _.wrap(Meteor.loginWithGithub, function(login, options, callback) 
  {

    // Create a new callback 
    newCallback = function()
    {
      callback();
      console.log('custom stuff can go here');
    }

    // Call the original login with new wrapping callback
    login(options, newCallback);
  }
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T13:06:12.600

他们刚刚在最后一次*身份验证*提交中添加了回调：[69110dec0f90877a9294057a4572876d0dae37e0](https://github.com/meteor/meteor/commit/69110dec0f90877a9294057a4572876d0dae37e0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T07:14:48.353

虽然流星没有提供，但他们正在努力将其纳入下一个版本，请查看他们在 github 上的 auth 分支

# xpages - 想在 xe:formTable 控件中上传并显示图片

> ID：11873131
> 
> 赞同：1
> 
> 时间：2012-08-08T21:02:52.697
> 
> 标签：xpages, xpages-extlib

我一直在尝试将 xp:fileUpload 和 xe:multiImage 组合起来进行显示，但没有运气。我没有使用这两个控件的解决方案，并且会接受任何有效的方法。

如果可能，我想在 xe:formTable 中提供带有 xe:formRow 的上传/显示图片功能。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T08:39:50.973

如果您只想显示上传到文档的图像列表，我建议您改用**xp:repeat**。

在**xe:formRow 中**，您可以添加以下内容以添加上传控件（仅在编辑模式下）和附加图像列表。假设 XPage 绑定到文档数据源，我使用“图像”作为用于存储图像的富文本项的名称：

```
<xp:fileUpload id="fileUpload1" value="#{document1.images}"
    rendered="#{javascript:document1.isEditable()}">
</xp:fileUpload>
<xp:repeat id="repeatImages" rows="30" var="image">
    <xp:this.value><![CDATA[#{javascript:document1.getAttachmentList("images");}]]></xp:this.value>
    <xp:image url="#{javascript:image.getHref()}" id="image1"></xp:image>
</xp:repeat> 
```

# html - 960网格系统中的多行列

> ID：11873132
> 
> 赞同：0
> 
> 时间：2012-08-08T21:03:03.243
> 
> 标签：html, css, 960.gs

我需要制作一个使用具有多行列的 960 网格系统的页面。我的意思是我在 16 列中有三列，分为 3-10-3 但在最后一列中，我需要为新闻提要、广告以及“关注我们...”框制作几个 div全部垂直对齐。请参阅图片以获取视觉 pov。

![网站理念](../Images/3bb70cc1c3e015d5eae373994ebc159e.png)

有没有办法在 960gs 上做到这一点？似乎我可以在列中堆放等宽的 div，但我不知道。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T22:21:36.917

我明白了，结果不是在网格列中使用更多带有“grid_x”类的 div，您可以只使用没有类的普通 div，它会自动与父 div 对齐。

# c# - C# 中的 Selenium RC 如何验证页面源代码

> ID：11873133
> 
> 赞同：0
> 
> 时间：2012-08-08T21:03:03.813
> 
> 标签：c#, testing, selenium, selenium-rc

您好，我被分配了一张 QA 票来验证页面上的 javascript 代码片段。当然，最好的方法是在页面上查看源代码并查找代码。

但是，我必须在 20 个不同的语言环境中执行此操作，并且我一直在轻松地使用 Selenium RC 和 .NET 驱动程序。

Selenium 中是否有检查页面源代码的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T15:29:14.553

您可以使用该`getHtmlSource`命令，但您所要求的并不像听起来那么容易。除非您只是想看看并说“是的，脚本就在那里！”。

# python - 如何设置子窗口的标题

> ID：11873138
> 
> 赞同：1
> 
> 时间：2012-08-08T21:03:16.917
> 
> 标签：python, tkinter

我有以下代码：

```
from tkinter import *

class MyApplication(Tk):
    def __init__(self):
        super().__init__()
        self.title = "Root Window"
        self.bind("<1>", self.showChild)

    def showChild(self):
        child = Toplevel(self)
        child.title = "This is the CHILD window"

app = MyApplication()
app.mainloop() 
```

子窗口的标题总是设置为`"Root Window"`. 我不知道如何设置子窗口的标题。我也试过`child.wm_title = "This is the CHILD window"`无济于事。[http://effbot.org/tkinterbook/](http://effbot.org/tkinterbook/)和[http://www.tkdocs.com/](http://www.tkdocs.com/)上的文档似乎有点过时并且根本没有帮助。

如何将 Toplevel 小部件的标题设置为除主标题以外的其他内容？

注意：我很确定这无关紧要，但我使用的是 Python 3.2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T21:24:46.120

`.title()`使用方法设置标题，
而不是将其视为属性。

```
import Tkinter as tk

class MyApplication(tk.Tk):
    def __init__(self):
        tk.Tk.__init__(self)
        self.title("Root Window")
        self.bind("<1>", self.showChild)

    def showChild(self, event=None):
        self.top = tk.Toplevel(self)
        self.top.title("This is the CHILD window")

app = MyApplication()
app.mainloop() 
```

# java - SwingPropertyChangeSupport 从文件读取后刷新 GUI

> ID：11873141
> 
> 赞同：2
> 
> 时间：2012-08-08T21:03:20.817
> 
> 标签：java, swing, refresh, filereader

继昨晚我的问题之后：[SwingPropertyChangeSupport to dynamic update JTextArea](https://stackoverflow.com/questions/11827326/swingpropertychangesupport-to-dynamically-update-array-displayed-in-jtextarea)，我试图在读入文本文件后刷新 GUI。

我有一个包含两位整数的数组。我可以通过在文本区域中输入一串数字来动态更新它，然后选择要修改的索引。字符串被分成两位数的片段并按顺序添加。输入字符串并单击按钮后，调用此方法：

```
public void modifyArray() {

    // show dialog to retrieve entered address
    addressToModify = (String) JOptionPane
            .showInputDialog("At which location?");

    // convert to integer if decimal address entered
    memAddress = Integer.parseInt(addressToModify);
    arrayForUpdate.instructionsIn(codeIn.getText(), memAddress);
} 
```

我的这部分代码现在可以按预期工作。也就是说，如果我输入“123456”，然后输入位置“0”（或“0000”），显示将更新为：

```
Index     0000   Value:   12
Index     0001   Value:   34
Index     0002   Value:   56
Index     0003   Value:   00 
```

我还有一个文本文件，其中包含一个字符串，该字符串由捐赠数组索引的四位数字组成，然后是一系列要添加到数组中的两位数字值。我可以通过 gui 按钮/文件选择器加载它。示例文件的内容是：

```
0000123456 
```

我有以下方法来处理文件：

```
 public void readRecord(File fileName) {

    // create file reader
    try {
        FileReader reader = null;
        try {
            // open input file
            reader = new FileReader(fileName);

            // create scanner to read from file reader
            Scanner in = new Scanner(reader);

            // read each line and remove whitespace
            while (in.hasNextLine()) {
                String line = in.nextLine().trim();
                parseRecord(line);
            }

        } finally {
            // close reader assuming it was successfully opened
            if (reader != null)
                reader.close();
        }
      } catch (IOException e) {
        e.printStackTrace();
    }
  }

public void parseRecord(String record) {

    // create address substring from start, 4 long
    String addrString = record.substring(0, 3);
    int s1Address = Integer.parseInt(addrString);

    // create binary data substring (4 from start, up to end)
    String dataString = record.substring(4, record.length());

    // pass data string as parameter to InstructionsIn method
    arrayForUpdate.instructionsIn(dataString, s1Address);
} 
```

在上述两种情况下，都会调用“instructionsIn”方法。在第一种情况下，这会导致显示被更新，但在第二种情况下它没有，我不知道为什么。我希望有人能够发现我遗漏的东西。

这是运行的代码的完整简化版本：

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.FocusListener;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import java.io.File;
import java.io.FileReader;
import java.io.IOException;
import java.util.Scanner;

import javax.swing.JButton;
import javax.swing.JFileChooser;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JTextArea;
import javax.swing.event.SwingPropertyChangeSupport;

public class PropertyChangeExample extends JFrame implements ActionListener {

private static final long serialVersionUID = 1L;
private String addressToModify, mList;
private int memAddress;
private JTextArea codeIn, displayOutput;
private S_Record sRec;
private JButton loadButton, modifyArrayButton;
private FocusListener focusListener;
private JPanel displayPanel;
private ArrayForUpdate arrayForUpdate = new ArrayForUpdate();

public static void main(String[] arg) {
    PropertyChangeExample display = new PropertyChangeExample();
    display.setVisible(true);
}

public PropertyChangeExample() {
    setDefaultCloseOperation(EXIT_ON_CLOSE);
    setSize(450, 170);
    layoutLeft();
    layoutDisplay();
    layoutBottom();
}

public void layoutDisplay() {
    displayPanel = new JPanel();
    add(displayPanel, BorderLayout.CENTER);
    displayOutput = new JTextArea(32, 38);
    displayPanel.add(displayOutput);
    displayOutput.addFocusListener(focusListener);

    mList = arrayForUpdate.getBoundProperty();
    displayOutput.setText(mList);

    arrayForUpdate.addPropertyChangeListener(new PropertyChangeListener() {

        @Override
        public void propertyChange(PropertyChangeEvent pcEvt) {
            if (pcEvt.getPropertyName().equals(
                    ArrayForUpdate.BOUND_PROPERTY)) {
                mList = (pcEvt.getNewValue().toString());
                displayOutput.setText(mList);
            }
        }
    });
}

public void layoutLeft() {
    JPanel left = new JPanel();
    add(left, BorderLayout.WEST);
    codeIn = new JTextArea(10, 7);
    left.add(codeIn, BorderLayout.NORTH);
    codeIn.addFocusListener(focusListener);
}

public void layoutBottom() {
    JPanel bottom = new JPanel();
    bottom.setBackground(Color.LIGHT_GRAY);
    loadButton = new JButton("Load file");
    loadButton.addActionListener(this);
    bottom.add(loadButton);
    add(bottom, BorderLayout.SOUTH);
    modifyArrayButton = new JButton("Add value to array");
    modifyArrayButton.addActionListener(this);
    bottom.add(modifyArrayButton);
}

public void actionPerformed(ActionEvent ae) {
    if (ae.getSource() == modifyArrayButton) {
        modifyArray();
    }

    if (ae.getSource() == loadButton) {
        processInputFile();
    }
}

public void modifyArray() {
    addressToModify = (String) JOptionPane
            .showInputDialog("At which location?");

    // convert to integer if decimal address entered
    memAddress = Integer.parseInt(addressToModify);
    arrayForUpdate.instructionsIn(codeIn.getText(), memAddress);
}

public void processInputFile() {

    sRec = new S_Record();
    JFileChooser chooser = new JFileChooser();
    int returnVal = chooser.showOpenDialog(getParent());
    if (returnVal == JFileChooser.APPROVE_OPTION) {
        // create the file
        File file = chooser.getSelectedFile();

        // pass to readRecord method in S_Record class
        sRec.readRecord(file);
    }
 }
}

class S_Record {

private ArrayForUpdate arrayForUpdate = new ArrayForUpdate();

public void readRecord(File fileName) {

    // create file reader
    try {
        FileReader reader = null;
        try {
            // open input file
            reader = new FileReader(fileName);

            // create scanner to read from file reader
            Scanner in = new Scanner(reader);

            // read each line and remove whitespace
            while (in.hasNextLine()) {
                String line = in.nextLine().trim();
                parseRecord(line);
            }
        } finally {
            // close reader assuming it was successfully opened
            if (reader != null)
                reader.close();
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
}

public void parseRecord(String record) {

    // create address substring from start, 4 long
    String addrString = record.substring(0, 3);

    int s1Address = Integer.parseInt(addrString);

    // create binary data substring (4 from start, up to end)
    String dataString = record.substring(4, record.length());

    // pass data string as parameter to InstructionsIn method
    arrayForUpdate.instructionsIn(dataString, s1Address);
 }
}

class ArrayForUpdate {

public static final String BOUND_PROPERTY = "bound property";
private String boundProperty = "";
private SwingPropertyChangeSupport spcSupport = new SwingPropertyChangeSupport(
        this);
private int[] myArray;
private final int MEM_LOCATIONS = 6;
/** StringBuilder object for displaying memory */
private StringBuilder mList;

public ArrayForUpdate() {

    myArray = new int[MEM_LOCATIONS];
    for (int i = 0; i < myArray.length; i++) {
        myArray[i] = 0;
    }
    setArrayyDisplayString();
}

/** 
 * method to create formatted string of array
 */
public void setArrayyDisplayString() {

    // create StringBuilder for display in memory tab
    mList = new StringBuilder();
    for (int i = 0; i < myArray.length; i++) {

        mList.append(String.format("%10s %04x %10s %02x", "Index:   ", i,
                "Value:  ", myArray[i]));
        mList.append("\n");
    }
    setBoundProperty(mList.toString());
}

/**
 * This method takes in a string passed through from the GUI
 */
public void instructionsIn(String codeIn, int loc) {

    String code = codeIn.trim();
    int len = code.length();
    int chunkLength = 2; // the length of each chunk of code
    int i = 0;

    // traverse entered code and split into 2 digit chunks
    for (i = 0; i < len; i += chunkLength) {

        String chunk = code.substring(i, Math.min(len, i + chunkLength));
        int oc = Integer.parseInt(chunk, 16);

        // add the data to the array
        setArrayData(loc, oc);
        loc++;
    }
}

/**   
 * method to add data to the array
 */
public void setArrayData(int a, int memData) {
    myArray[a] = memData;
    setArrayyDisplayString();
}

public String getBoundProperty() {
    return boundProperty;
}

/**
 * Method to implement changes to array for display
 * 
 * @param boundProperty - the String representing the memory array
 */
public void setBoundProperty(String boundProperty) {
    String oldValue = this.boundProperty;
    String newValue = boundProperty;
    this.boundProperty = newValue;
    spcSupport.firePropertyChange(BOUND_PROPERTY, oldValue, newValue);
}

public void addPropertyChangeListener(PropertyChangeListener listener) {
    spcSupport.addPropertyChangeListener(listener);
 }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T21:33:59.930

这看起来是参考的问题。

您似乎至少有两个 ArrayForUpdate 对象，一个由 GUI 侦听，另一个完全不同的实例保存在 S_Record 类中。后一个是从文件中获取信息的那个，而前一个，GUI 正在收听的那个不是。解决方案：确保两个地方都只使用一个 ArrayForUpdate 对象。也许您可以通过其构造函数将 GUI 实例的引用传递给您的 S_Record 对象？

# c# - 如何使用由列表支持的我自己的 IQueryable 延迟加载

> ID：11873150
> 
> 赞同：4
> 
> 时间：2012-08-08T21:04:13.493
> 
> 标签：c#, .net, .net-4.0, iqueryable

我有一个这样定义的权限列表：

```
private List<PermissionItem> permissionItems;
private ReadOnlyCollection<PermissionItem> permissionItemsReadOnly; 
```

该列表是通过后台线程从 Web 服务中检索的。只读版本由 List 版本填充。

我将此列表公开给我的（相当大的）应用程序的其余部分，如下所示：

```
public IQueryable<PermissionItem> PermissionItems
{
   get
   {
       // Make sure that the permissions have returned.  
       // If they have not then we need to wait for that to happen.
       if (!doneLoadingPermissions.WaitOne(10000))
           throw new ApplicationException("Could not load permissions");

       return permissionItemsReadOnly.AsQueryable();
   }
} 
```

这一切都很好。用户可以请求权限并在加载后获取它们。

但是，如果我在构造函数中有这样的代码（在不同的类中）：

```
ThisClassInstanceOfThePermisssions = SecurityStuff.PermissionItems; 
```

然后我相当确定这将阻止直到权限返回。但在实际使用权限之前，它不需要阻塞。

我读过 IQueryable 是“延迟加载”。（我在我的实体框架代码中使用了这个功能。）

**有没有办法可以更改它以允许随时引用我的 IQueryable，并且仅在实际使用数据时才阻止？**

注意：这是一个“值得拥有”的功能。实际上加载权限不会花费太长时间。所以如果这是一个“自己动手”查询/表达式的东西，那么我可能会通过。但我很好奇如何让它发挥作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T21:16:41.193

是的，这是可能的。首先，您可能应该切换到 IEnumerable，因为您没有使用任何 IQueryable 功能。接下来，您需要实现一个新的迭代器：

```
public IEnumerable<PermissionItem> PermissionItems
{
   get
   {
        return GetPermissionItems();
   }
}
static IEnumerable<PermissionItem> GetPermissionItems()
{
       // Make sure that the permissions have returned.  
       // If they have not then we need to wait for that to happen.
       if (!doneLoadingPermissions.WaitOne(10000))
           throw new ApplicationException("Could not load permissions");

       foreach (var item in permissionItemsReadOnly) yield return item;
} 
```

The event will only be waited on if the caller of the property enumerates the `IEnumerable`. Just returning it does nothing.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T21:10:08.343

看看[`Lazy<T>`](http://msdn.microsoft.com/en-us/library/dd642331.aspx)课堂。

> 延迟初始化在第一次访问[Lazy.Value](http://msdn.microsoft.com/en-us/library/dd642177.aspx)属性时发生。使用 Lazy 实例来延迟创建大型或资源密集型对象或执行资源密集型任务

# c# - ConfigurationManager.GetSection 返回 null

> ID：11873151
> 
> 赞同：16
> 
> 时间：2012-08-08T21:04:22.173
> 
> 标签：c#, app-config

这是我的 app.config

```
<configuration>
  <configSections>
      <section name="procedureList" type="System.Configuration.NameValueSectionHandler, System, Version=4.0.30319, Culture=neutral, PublicKeyToken=b77a5c561934e089"/>
  </configSections>

  <procedureList>
    <add key="NAS.spBusObjGetLineProd" value="@area='Melt Shop';@endDt=?date?;@dayonly=1;@obj='Melt Shop Business Objective" />
    <add key="NAS.spBusObjGetLineProd" value="@area='Cold Mill';@endDt=?date?;@dayonly=1;@obj='Cold Mill Business Objective" /> 
  </procedureList>
  <appSettings>
    <add key="Connstr" value=""/>
    <add key="Userid" value=""/>
    <add key="Timeout" value=""/>
  </appSettings>

</configuration> 
```

但是当我在代码中调用它时，我得到一个空值

```
public void samplemethod()
{
    NameValueCollection nvc = ConfigurationManager.GetSection("procedureList") as NameValueCollection;
    string[] keys = nvc.AllKeys;
} 
```

我将不胜感激任何帮助指出我做错了什么

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T21:10:49.203

[使用节处理程序对配置文件中的设置进行分组](http://www.codeproject.com/Articles/10981/Understanding-Section-Handlers-App-config-File)

例如，您可以遵循以下内容

```
private void ReadSettings()
{
    NameValueCollection loc = 
   (NameValueCollection )ConfigurationSettings.GetConfig("procedureList");
} 
```

[MSDN ConfigurationManager.GetConfig 方法](https://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.getsection(v=vs.110).aspx)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-10-28T08:20:48.737

如果您正在测试您的课程，您必须将配置复制到`app.config`您的测试项目中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-29T10:34:59.103

使用即时窗口检查它指向的配置文件。就我而言，我有 app.config 我希望它可以读取，但是使用命令。ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None) 它指向其他类似 nuintrunner.exe.config 的信息，因为该信息已加载到 bin 中。这有助于加载正确的配置文件

# c# - 使用变量的 Linq to SQL 查询

> ID：11873155
> 
> 赞同：0
> 
> 时间：2012-08-08T21:05:04.600
> 
> 标签：c#, linq, linq-to-sql

我的 RegApp 表如下所示：

```
|CaseType      |         ItPinType     |      ItPinNumber|
-----------------------------------------------------------
|Test1         |         Type1         |      123465
------------------------------------------------------------
|Test2         |         Type2         |      566565 
```

Linq 查询从 Regapp 表中提取数据并将其存储到“测试”：

```
var allTests = from test in db.regApp 
               select test; 
```

假设我定义了以下变量来保存 RegApp 表中的列名：

> 字符串变量CaseType = "CaseType"

如何在以下查询中使用定义的变量“variableCaseType”？如果我用 test.CaseType 替换 test.variableCaseType 它将返回我想要的数据，但如果可能的话我希望能够传递变量。我的目标是在运行时将表列名存储到数组列表中，并能够将值存储到变量中。这将允许我在不更改代码的情况下添加数据库列......理论上......在运行中，但除非我可以将变量传递给 linq 查询，否则我认为它不会起作用。

```
 foreach(var tests in allTests)
 { 
     if(test.variableCaseType == Null)
     {
         do something;
     }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T21:07:49.863

查看有关动态 LINQ 的这些文章：

[http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

[http://weblogs.asp.net/davidfowler/archive/2010/08/19/dynamic-linq-part-2-evolution.aspx](http://weblogs.asp.net/davidfowler/archive/2010/08/19/dynamic-linq-part-2-evolution.aspx)

# c++ - 编写带有节点跨步的trie解析递归函数

> ID：11873156
> 
> 赞同：0
> 
> 时间：2012-08-08T21:05:05.210
> 
> 标签：c++, visual-studio-2008, recursion, trie

目的：此函数通过与输入字符串匹配的路径后面的字符串树进行解析。当字符串中的所有字符都被解析后，`true`返回。如果仍有有效路径，我想跳过一个字符并返回。

应用程序：字符串是高速公路项目的位置层次结构。因此，项目 5 具有路线 C，其偏移量为 N，工作区为 3；5CN3。但是，有时我想为涵盖所有位置的项目任务的所有子位置定义一个字符串。因此，“0”是所有位置；对于像坡度泥土这样的半天操作，没有工作区 - 代表这项任务的所有工作区都是北线 C 中的所有工作区；5CN0\. 如果一个操作涵盖整个项目，则相同；5000。

方法：我可以使用通配符“？” 功能，但我想保留此特定步骤以抽象位置。也许 '？' 是正确的方法，但似乎失去了一些控制。此外，这可以在没有 for 循环的情况下编写并使用位置索引参数；也许这就是问题所在 - 也许是回溯。

代码：`nodeT`是trie节点，`word`是输入字符串，这个函数是a `bool`，如果字符串路径存在则返回1/0。

```
bool Lexicon::containsWordHelper(nodeT *w, string word)) //check if prefix can be combined
{
    if(word == "") { //base case: all char found
        return true;
    } else {
        for(int i = 0; i < w->alpha.size(); i++) { //Loop through all of the children of the current node
            if (w->alpha[i].letter == word[0])
                return containsWordHelper(w->alpha[i].next, word.substr(1));
            else if (word[0] == '0') //if '0' then step over and continue searching for valid path
                containsWordHelper(w->alpha[i].next, word.substr(1)); //removed return here to allow looping through all the possible paths
        } //I think it is continuing through after the loop and triggering return false
    }
    return false; //if char is missing - meaning the exact code is not there
} 
```

问题是当使用 '0' 通配符时返回 false。这里出了什么问题？我的知识有限。

我在这个问题上研究了一段时间，并使用了“howboutthis howboutthat”方法，发现将 放在`return`step over 语句的末尾是可行的。

```
bool Lexicon::containsWordHelper(nodeT *w, string word, int &time, int &wag, string compare) //check if prefix can be combined
{
    if(word == "") { //base case: all letters found
        if ((w->begin-wag) <= time && time <= (w->end+wag)) 
            return w->isWord; // case 2: timecard check for high/low date range
        else if (time == ConvertDateToEpoch(9999, 01, 01)) return w->isWord; //this is for single code lookup w/o date
    } else {
        for(int i = 0; i < w->alpha.size(); i++) { //Loop through all of the children of the current node
            if (w->alpha[i].letter == word[0])
                return containsWordHelper(w->alpha[i].next, word.substr(1), time, wag, compare);
            else if (word[0] == 'ž')
                if (containsWordHelper(w->alpha[i].next, word.substr(1), time, wag, compare)) return true;
        }
    }
    return false; //if char is missing - meaning the exact code is not there
} 
```

似乎合乎逻辑的是，如果我只有一条以 true 结尾的路径返回，那么我应该在递归完成后放置 return，然后只有在 true 时有条件地返回。它有效，回想起来似乎合乎逻辑，但我对此的信心充其量是粗略的。

我仍然有同样的问题。出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T21:10:00.550

您可以测试后一个`containsWordHelper`调用的结果，如果结果为真则返回真，否则继续迭代。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T16:25:29.130

已解决：在包含递归调用的 if 语句之后放置一个 return

```
bool Lexicon::containsWordHelper(nodeT *w, string word) 
    {
        if(word == "") return w->isWord;
        else {
            for(int i = 0; i < w->alpha.size(); i++) {
                if (w->alpha[i].letter == word[0])
                    return containsWordHelper(w->alpha[i].next, word.substr(1));
                else if (word[0] == 'ž')
                    if (containsWordHelper(w->alpha[i].next, word.substr(1))) return true;
            }
        }
        return false;
    } 
```

# oracle - 使用 ODBC 连接到 Oracle DB

> ID：11873160
> 
> 赞同：6
> 
> 时间：2012-08-08T21:05:25.447
> 
> 标签：oracle, odbc

我正在开发一个需要与“轻度记录”的旧版 Oracle 数据库交互的应用程序。要开始该过程，我想开始使用 ODBC 链接到 MS Access 数据库中创建该数据库的视图，这样我就可以弄清楚 DB 结构，但我不知道如何设置与 Oracle DB 的 ODBC 连接。

我已经能够使用主机和服务名称连接到并使用 SQL Developer 查看数据库；但是，我不知道如何设置 ODBC。我正在运行 Windows 7 并安装了 Oracle 11g、Oracle Express Edition、Instant Client 和 ODBC 扩展；但是在 ODBC 设置中，Oracle 希望我选择一个 TNS 服务名称，但是没有可以选择的，也没有地方可以指定主机。我试图在 tnsnames.ora 中设置一个 TNS；但我不确定我是否知道该文件的正确位置。

我真的认为这将是简单的部分；但是，它真的没有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T21:20:47.820

导航到**控制面板**>**管理工具**>**数据源 (ODBC)**

选择**系统 DSN**选项卡，然后单击“添加”。接下来向下滚动驱动程序列表，直到找到**Microsoft ODBC for Oracle**。

![在此处输入图像描述](../Images/faee7e1240068a1f05e66d724025593f.png)

在上述表格中填写所需信息，然后单击“确定”。现在，您可以通过单击“外部数据”选项卡然后单击“更多”将表添加到“访问”。选择“ODBC 数据库”，然后选择“导入源数据...”，然后单击“机器数据源”选项卡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T21:21:35.993

生成 tnsnames.ora 文件的最简单选择是让 Oracle 来完成。如果您启动 Oracle Net Configuration Assistant（开始 | Oracle in *Oracle Home Name* | Configuration and Migration Tools | Net Configuration Assistant），您应该能够选择“Local Net Service Name configuration”，它允许您添加（或修改）一个TNS 别名。这将引导您收集连接所需的信息。

如果您更愿意直接处理文本文件，您可以使用此模板直接编辑 %Oracle Home%\network\ADMIN\tnsnames.ora 中的 tnsnames.ora 文件。

```
<TNS alias> = 
  (DESCRIPTION = 
    (ADDRESS = (PROTOCOL = TCP)(HOST = <hostname or IP>)(PORT = <port>)) 
    (CONNECT_DATA = 
      (SERVER = DEDICATED) 
      (SERVICE_NAME = <database service name>) 
    ) 
  ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-03T20:16:47.063

在 tnsnames.ora 中，尝试将 SERVICE_NAME 更改为 SID。这对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-18T03:35:25.420

我的经验 1\. TNSNAMES.ORA 如下。XE = (DESCRIPTION = (ADDRESS_LIST = (ADDRESS = (PROTOCOL = TCP) (HOST = 192.168.2.116) (PORT = 1521))) (CONNECT_DATA = (SERVICE_NAME = XE)))

2.  设置 Windows 环境变量 (ControlPanel --> System --> Detail..) 2-1\. 添加到PATH c:\oraclexe\instantclient_11_2\ --- Instantclient 2-2 的安装目录。添加新环境变量 TNS_ADMIN c:\oraclexe\instantclient_11_2\ --> 安装目录 NLS_LANG = JAPANESE_JAPAN.JA16SJISTILDE
3.  Windows 命令提示符 cd c:\Windows\SysWow64 <--我在 64 位 Win7 odbcad32.exe 中使用 32 位 ODBC 名称：ICODBC <--如你所愿服务名称：XE 用户名：系统按下连接测试按钮

# objective-c - 您如何将 Game Center 成就放入您的 iPhone 应用程序中？

> ID：11873162
> 
> 赞同：-1
> 
> 时间：2012-08-08T21:05:34.903
> 
> 标签：objective-c, ios, xcode, gamekit, achievements

我对 Xcode 和 Objective C 非常陌生。所以我需要有关 Game Center 成就的帮助。我已经在 iTunes 连接上设置了它，但不知道如何让它们在我的游戏中工作。
另外，我想做到这一点，如果用户按下按钮，他们会在 Game Center 上获得成就。到目前为止，除了导入框架之外，我还没有对 Gamekit 做任何事情。

谢谢，
凯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:17:14.413

Apple 有许多视频和文档，您可以通过查看来完成此操作...

[https://developer.apple.com/devcenter/ios/gamecenter/](https://developer.apple.com/devcenter/ios/gamecenter/)

我不记得您需要的确切 API 调用，但您可以在 Apple 开发人员门户上找到它。

# javascript - 如何将输入值添加到下面的结果列表并允许相同的文本输入字段继续添加更多？

> ID：11873164
> 
> 赞同：1
> 
> 时间：2012-08-08T21:05:40.943
> 
> 标签：javascript, jquery, ajax, forms, list

我有一个文本字段和一个随附的“添加”按钮：

```
<fieldset id="itemList">
    <input type="text" id="addItem" name="addItem">
    <input type="button" name="add" value="add">
</fieldset> 
```

每当有人单击“添加”时，我想将新项目添加到下面的列表中并清除上面的输入字段。

```
<hr>
<ol id="resultList">
    <li>just example</li>
    <li>new text input</li>
    <li>last entered item</li>
</ol> 
```

我不确定如何在 jQuery 中实现这一点。你能帮我吗？

作为奖励，我想将列表限制为 10。所以我需要以某种方式计算列表项的数量，并使上述表单的显示取决于 <11 个列表项。

你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:09:05.107

```
function addItem(){
  var list = $("#resultList");
  var count = list.find("li").size();
  if(count < 10){
     var input = $("input[name=addItem]");
     var item = input.val();
     list.append(("<li>"+item+"</li>"));
     input.val(" "); // clear field
  }else{
    // already have 10 items
  }
}
$("input[name=add]").click(addItem); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T21:33:39.743

```
jQuery(function($){
    $('input[name="add"]').click(function() {
        if($('#resultList li').length < 10)
        {    value = $('input[name="addItem"]').val();
             $('ol li:last').after("<li>" + value + "</li>");
             $('input[name="addItem"]').val(""); }
        if($('#resultList li').length == 10)
        {   $('input[name="addItem"]').css("display", "none");
            $('input[name="add"]').css("display", "none"); }
    });
}); 
```

在这里工作 jsFiddle：http: [//jsfiddle.net/bhZdz/2/](http://jsfiddle.net/bhZdz/2/)

编辑是因为我没有看到您问题的最后一部分，现在添加第 10 个元素后表单隐藏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T21:34:40.337

尝试这个

```
 ​$('input[type=button]').click(function(){
    $('#resultList').append('<li>'+$('#addItem').val()+'</li>');
    $('#addItem').val("");
  }
 );​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

你也可以使用`input[name=add]`

# selenium - assertText 在 Selenium IDE 中有换行符的消息

> ID：11873169
> 
> 赞同：2
> 
> 时间：2012-08-08T21:06:11.017
> 
> 标签：selenium

我是 Selenium IDE 的新手，需要 assertText 一个具有换行符的值。例子：

assertText 的实际消息：
Hello
World

```
store      | Hello <br/> World | txtValue
assertText | id=label          | ${txtValue} 
```

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T03:49:36.427

将您的变量传递`id=label`给变量，删除换行符，然后对变量运行断言。

1.  存储预期文本：

    ```
    store | Hello World | txtValue 
    ```

2.  存储页面文本：

    ```
    storeText | xpath=(//*[@id=label]) | labelValue 
    ```

3.  从页面文本中删除换行符：

    ```
    echo  | javascript{storedVars.labelValue = storedVars.labelValue.replace(/(\r\n|\n|\r)/gm,"")} | 
    ```

4.  断言您的预期文本=您的页面文本：

    ```
    assertExpression | javascript{storedVars.txtValue==storedVars.labelValue} | true 
    ```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-03-26T02:58:23.310

以下模式匹配对我有用`Selenium IDE 2.5.0`

```
regexp:Hello\s+World 
```

# c++ - 我应该如何将 SSE 数据传递给我的函数/操作员？

> ID：11873172
> 
> 赞同：5
> 
> 时间：2012-08-08T21:06:23.277
> 
> 标签：c++, parameter-passing, sse, simd, intrinsics

我正在为 SSE Intrinsics 编写几个包装类——主要是为了获得类型安全的几何操作，但也为了添加一些便利功能。我所有的函数和运算符都是内联的。理论上，它们都将直接编译为原始 SSE 程序集（无函数调用），并且我的电子永远不会离开 XMM 寄存器。

如何将我的 SSE 类作为参数传递以确保此结果？

我从不修改我的论点，所以选择主要是在通过值传递或通过 const 引用传递之间。我假设一个好的编译器会在相同的代码中优化两种样式。但我不确定。在该领域有更多经验的人可以阐述最佳实践吗？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T21:39:58.803

对于大多数编译器来说两者都可以，但是如果您希望使用 Visual Studio 编译代码，则使用 const 引用，因为 Visual Studio 编译器有点脑残，并且即使函数是内联的，也会应用不必要的 ABI 限制。

# java - Java枚举函数返回值

> ID：11873173
> 
> 赞同：1
> 
> 时间：2012-08-08T21:06:26.533
> 
> 标签：java, enums, return

我正在尝试制作一个简单的脚本来返回枚举的值，让我们举个例子：//EG.class（应该返回动物 ID。

```
import Object.Animal;

public class EG {
    public void main() {
        Animal AnimalID = Object.Animal.CAT;

        System.out.print(AnimalID);
        //Should return value of CAT: 2000 (long)
        //But I can't figure out what's wrong.
    }
} 
```

//对象.类

```
public class Object {
    public enum Animal {
        CAT(2000L), DOG(2001L), MONKEY(2002L), TIGER(2003L);

        private long animal;

        private Animal(long a) {
          animal = a;
        }

        public long getAnimal() {
          return animal;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-08T21:08:09.967

你需要打电话`System.out.print(AnimalID.getAnimal());`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-08T21:08:48.897

为什么不在枚举上创建一个`toString()`方法？`Animal`

```
public enum Animal {
    CAT(2000L), DOG(2001L), MONKEY(2002L), TIGER(2003L);

    private long animal;

    private Animal(long a) {
      animal = a;
    }

    public long getAnimal() {
      return animal;
    }

    @Override
    public String toString() { 
       return this.name() + ": " +animal;
    }
} 
```

# delphi - DWScript 安装

> ID：11873178
> 
> 赞同：4
> 
> 时间：2012-08-08T21:07:04.527
> 
> 标签：delphi, delphi-xe2, dwscript

我正在尝试在 XE2 中安装 DWScript，但我似乎很挣扎。我找不到任何最新的安装说明，而且我找到的旧说明似乎不再适用。

我已经尝试过 svn 存储库中的 head 以及以前的版本之一，但都没有太多运气。

我已将源目录添加到我的库路径中。

当我最初打开 dwsLib 时，我有一条 TdwsUnit not found 消息，尽管它似乎可以编译。dwsLibDesignOnly 和 dwsLibRuntime.dpk 都有一个关于 dwsCodeGen 丢失的错误，并且看起来图书馆中有一个完整的 JSCodeGen 目录不存在但应该存在。

任何帮助将非常感激。

谢谢，

理查德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T09:55:20.640

您可以尝试修订 r1462。之后，项目所有者决定关闭 JavaScript CodeGen 的源代码并继续仅针对 MobileStudio 产品的开发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:07:32.550

CodeGen 不再在 SVN 中维护，dpks 有点过时（现在更新）。您可以删除从 .dpk 中找不到的单元/类

有关 CodeGen 的更多详细信息，请参见[http://delphitools.info/2012/05/18/from-op4js-to-smart-mobile-studio/](http://delphitools.info/2012/05/18/from-op4js-to-smart-mobile-studio/) 最后一个开源版本可以在 SVN 的 r1462 中找到。

# c# - 使用时区将字符串格式化为日期时间

> ID：11873179
> 
> 赞同：15
> 
> 时间：2012-08-08T21:07:08.520
> 
> 标签：c#, .net, parsing, timezone

我有一个`string s = "May 16, 2010 7:20:12 AM CDT`我想转换为 DateTime 对象。在下面的代码中，尝试解析具有已知格式的文本时，出现日期格式无法转换错误。

```
timeStamp = matches[0].Groups[1].Value;
dt = DateTime.ParseExact(timeStamp, "MMM dd, yyyy H:mm:ss tt", null); 
```

时区以 CDT UTC 的形式出现......我认为是什么导致了问题或我的格式？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-08T21:41:57.537

[中部夏令时间](http://en.wikipedia.org/wiki/Central_Daylight_Time)

尝试这个：

```
string dts = "May 16, 2010 7:20:12 AM CDT";
DateTime dt = 
    DateTime.ParseExact(dts.Replace("CDT", "-05:00"), "MMM dd, yyyy H:mm:ss tt zzz", null); 
```

编辑：

对于夏令时，请考虑[DateTime.IsDaylightSavingTime](http://msdn.microsoft.com/en-us/library/system.datetime.isdaylightsavingtime.aspx)和[TimeZone.CurrentTimeZone](http://msdn.microsoft.com/en-us/library/system.timezone.currenttimezone.aspx)

[自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-09T01:29:47.693

确保 DateTime 明确为 DateTimeKind.Utc。避免“GMT”，它对于夏令时来说是模棱两可的。

```
 var dt = new DateTime(2010, 1, 1, 1, 1, 1, DateTimeKind.Utc);
    string s = dt.ToLocalTime().ToString("MMM dd, yyyy HH:mm:ss tt \"GMT\"zzz"); 
```

它给出了输出：2010 年 12 月 31 日 19:01:01 pm GMT-06:00

有关更多详细信息，请参阅此[链接](https://stackoverflow.com/questions/246498/creating-a-datetime-in-a-specific-time-zone-in-c-sharp-fx-3-5)

# python - 国际象棋编程成败

> ID：11873180
> 
> 赞同：1
> 
> 时间：2012-08-08T21:07:09.377
> 
> 标签：python, chess

你好！我正在制作一个国际象棋引擎，但 make/unmake 方法存在一些问题。

我有一个 Piece 类来保存棋子的类型（棋子、皇后等）和位置，还有一个 Move 类来保存目标方格、移动的棋子和捕获的棋子。

问题是，当我调用 makeMove 方法时，它会将片段的位置更改为 Piece 对象内的目标正方形。但是现在，我不能用 Move 对象调用 unmakeMove，因为现在我没有关于移动来自哪里的信息，因为我刚刚改变了棋子的位置。你将如何解决这个问题？

非常感谢！

```
class Board:
# Previous methods omitted. 

    def makeMove(self, move, player):
        """ Makes a move on the board and changes Piece object. Returns None. """
        self.moved_piece = move.getPiece()
        self.captured_piece = move.getCapturedPiece(self)

        if self.captured_piece:  # Remove captured piece from player's piece dict. 
            player.removePiece(self.captured_piece)

        self.setPiece(move.getTargetSquare(), self.moved_piece)  # Set moved piece on target square.
        self.setPiece(self.moved_piece.getPosition(), EMPTY)  # Make the origin square empty.
        self.moved_piece.changePosition(move.getTargetSquare())  # Change piece object's position.

    def unmakeMove(self, move, player):
        """ Unmakes a move. Returns None. """
        self.moved_piece = move.getPiece()
        self.captured_piece = move.getCapturedPiece(self)

        self.setPiece(self.moved_piece.getPosition(), captured_piece)  # Set captured piece or empty square to target square.
        # Set piece to original square. HOW !? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T21:25:19.693

根据我的评论和Fred Larson 发布[的有关 Memento 模式的链接，以下](http://en.wikipedia.org/wiki/Memento_pattern)是您可能想要做的示例实现：

```
class Engine(object):
    def __init__(self):
        self.board = Board()
        self.move_list = []

    def make_move(self, from, to):
        #board.makeMove returns a "memento object".
        self.move_list.append(board.makeMove(from, to))
        ...

    def undo_move(self):
        board.undo(self.move_list.pop())
    ...
    ... 
```

假设你有一个这种结构的移动对象：

```
class Move(object):
    def __init__(self, from_coords, to_coords, capture=None):
        self.from = from_coords
        self.to = to_coords
        self.capture = capture 
```

您的`Board`对象将实现以下方法：

```
class Board(object):
    ...
    def make_move(self, from_coords, to_coords):
        #move logic here
        return Move(from_coords, to_coords, capturedPiece)

    def undo_move(self, move_object):
        self.make_move(move_object.to_coords, move_object.from_coords)
        self.uncapture(move_object.capture, move_object.to_coords) 
```

显然，上面的代码只是概念性的。实际的实现将取决于其余代码的结构。

注意：我为对象使用了一个类，`Move`因为属性访问是明确的并且易于遵循。实际上，像这样基本的对象可能只是形式的元组`(from, to, capturedpiece)`。

# php - CodeIgniter 分页 - 第一页的链接不起作用，为什么？

> ID：11873185
> 
> 赞同：1
> 
> 时间：2012-08-08T21:07:15.230
> 
> 标签：php, codeigniter, pagination

我在我的网站上使用分页库，我的配置在这里：

```
$data['url_keyword'] = url_title($keyword, '_');
$config['base_url'] = base_url().'image/'.$data['url_keyword'].'/';
$config['per_page'] = 1;
$config['uri_segment']=3; 
```

我的网址是：`mysite/image/keyword/1`（page2） ， `mysite/image/keyword/2`（ page3），（page4） `mysite/image/keyword/3`，`mysite/image/keyword/4`（page5）

当我在第 2 页 ( `mysite/image/keyword/1`) 并单击上一个时 - 它让我进入`mysite/image/keyword/`- 这不起作用，但可以工作`mysite/image/keyword/0`。库只是不会在 url 的末尾添加零。

如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T21:47:00.930

尝试这个：

```
if (!$this->uri->segment(3))
       $page = 0;

//Your other logic 
```

默认情况下，如果`$this->uri->segment(x)`为空，它将返回 false。在没有看到您的控制器或视图的情况下，我无法更具体地说明将其放置在何处或您为变量命名的内容。这应该适用于您调用的实例：yoursite.com/image/keyword

# msbuild - 批处理文件无法访问脚本

> ID：11873192
> 
> 赞同：0
> 
> 时间：2012-08-08T21:07:57.707
> 
> 标签：msbuild, batch-file

我是批处理脚本的新手。有人可以帮我解决以下问题吗？

```
call %comspec% /k "C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\vcvarsall.bat" x86
set MSBuildEmitSolution=1
msbuild "C:\Users\bleh\Documents\Visual Studio 2010\Projects\BuildApp\BuildApp.sln"
pause 
```

这仅执行批处理文件的第一行，即设置 VS 环境。请提出建议。

干杯！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:18:26.177

尝试`/k`在第一行替换为`/c`. `/k`切换到`cmd.exe`使命令解释器运行命令并随后等待用户输入，而在`/c`运行命令后使其退出。

# jquery - CSS（JQUERY）：图标周围的边框

> ID：11873196
> 
> 赞同：0
> 
> 时间：2012-08-08T21:08:13.090
> 
> 标签：jquery, css, jquery-ui, icons, border

![在此处输入图像描述](../Images/c55d12852e800ff209f5eba924f12c48.png)使用大图标时，图标区域周围会出现边框。

```
I have tried: 
.ui-icon {
border: none;
} 
```

那不是解决方案。有什么想法或者你能指出我正确的方向吗？

```
<head>
<style type="text/css">
<!--
.ui-icon-green5{
background-image: url(green_05_64x64.png);
}
.ui-icon {
background-color: transparent;
width: 64px;
height: 64px;
border: none;
margin-top:150px;
margin-left:150px;
}

a{
    line-height: 600px; 
 }
-->
</head>
<body>
<div id="content2" style="background-color:#000000;height:400px;width:400px;float:left;">
        <a data-theme="a" id="start-button" data-iconpos="top" data-icon="green5"
          data-role="button"
          href="index.html"
          data-corners="false">LIVINGROOM</a>
      </div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:35:43.813

尝试

```
.ui-icon {
   border: 0 !important;
} 
```

如果这不起作用，边框必须在 png 本身上

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T06:54:15.867

-webkit-box-shadow：无；

这解决了问题。![在此处输入图像描述](../Images/5c965952ce3765c92ac5cde642c3bb5f.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T21:35:56.150

我不完全确定是什么导致了这个问题。我可能也值得将轮廓设置为无，而不仅仅是边框。某些浏览器，例如 chrome，可能会使用它来指示元素的焦点（尽管我不记得在链接上看到它，仅在输入字段上）。可能值得检查的另一件事是，这实际上是否不是您图像中的人工制品。可能是您在边缘处褪色为白色，您是否可能将其切片不正确。在类似 Photoshop 的程序中将它放在黑色背景上应该会立即显示出来。

另外我不知道所有这些数据属性的用途，假设它们与您使用的一些 jQuery 插件有关。无论如何，我会为您的链接设置一个 ui-icon 类，以确保明确应用边框：无（和大纲：无），因为从当前的片段中我不能说他们这样做。

# c# - System.ComponentModel.IContainer 需要 1 秒来声明？

> ID：11873199
> 
> 赞同：1
> 
> 时间：2012-08-08T21:08:21.813
> 
> 标签：c#, visual-studio-2010, system.componentmodel

我目前正在使用 Red Gate 的性能分析器来优化应用程序。我一直在运行 VS 生成的声明，并且总是需要大约一秒钟的时间来声明。它也被设置为null。我不明白为什么这需要一秒钟。我知道 VS Designer 可以将它用于某些组件，但有没有办法减少这些声明的数量？解释为什么会发生这种情况也很好。

[![探查器截图](../Images/ce10399f897bbfe3af14a0cc71e06191.png)](https://i.stack.imgur.com/13Whi.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:11:51.183

那是一个字段初始化器。分析器可能正在测量该行的整个类的初始化。尝试在构造函数中将该字段设置为 null 以查看是否存在时间差异。

# ios - 向 uiview 添加矩形时出现的问题

> ID：11873202
> 
> 赞同：0
> 
> 时间：2012-08-08T21:08:37.550
> 
> 标签：ios, core-graphics, drawrect

我在[这里使用教程绘制一个矩形](http://www.techotopia.com/index.php/An_iOS_4_iPhone_Graphics_Drawing_Tutorial_using_Quartz_2D)

标志类.m

```
-(void)drawRect:(CGRect)rect {

        CGContextRef context = UIGraphicsGetCurrentContext();

        CGContextSetLineWidth(context, 2.0);

        CGContextSetStrokeColorWithColor(context, [UIColor blueColor].CGColor);

        CGContextMoveToPoint(context, 100, 100);
        CGContextAddLineToPoint(context, 150, 150);
        CGContextAddLineToPoint(context, 100, 200);
        CGContextAddLineToPoint(context, 50, 150);
        CGContextAddLineToPoint(context, 100, 100);

        CGContextStrokePath(context);
}

    @end 
```

然后我将此视图添加到另一个视图，如下所示

```
-(IBAction)drawRectangle {
    FlagClass     *flag     =   [[FlagClass alloc] initWithFrame:CGRectMake(20.0, 100.0, 80, 40)];

    [self.view addSubview:flag];

} 
```

点击按钮后，我得到的是

![在此处输入图像描述](../Images/b59ab738b899f1b49e24540fa2b6da59.png)

我的问题 ：

1.  我的矩形的这些坐标是（20,100,80,40）。`drawRect`方法中的数字是什么
2.  为什么我只得到一个黑色矩形而不是蓝色矩形，其中定义了坐标`drawRect`

如果您对此有任何想法，请提供帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T21:21:09.183

由于您的视图（`FlagClass`实例）的尺寸，您的所有绘图都在可见边界之外进行（视图正在“剪裁”蓝色矩形）。您看到的黑色矩形是 UIView 的默认背景填充。

要获得您想要的，您可以调整子视图的框架，使其足够大以包含描边路径。或者改变你用来绘制的坐标；这些是对 的调用中的数字`CGContextAddLineToPoint`。这是至少查看您在做什么的一种方法（同时删除黑色背景）：

```
FlagClass *flag = [[FlagClass alloc] initWithFrame:CGRectMake(20.0, 100.0, 250, 250)];
flag.backgroundColor = [UIColor clearColor];
[self.view addSubview:flag]; 
```

通过更改子视图的宽度和高度（第 3 和第 4 个参数为`CGRectMake`），子视图变得足够大以包含正在绘制的正方形。

# iphone - 适用于 iOS 的 HTTP 中的 getReasonPhrase()

> ID：11873203
> 
> 赞同：0
> 
> 时间：2012-08-08T21:08:40.770
> 
> 标签：iphone, objective-c, ios, xcode

在 Android 中，我们可以`getReasonPhrase()`在 HTTP 客户端中使用：

```
HttpResponse response = httpClient.execute(getRequest);
System.print.out(response.getStatusLine().getReasonPhrase()); 
```

可以是`ok`,或来自 Web 服务的任何内容`Not Found`。`Created`

我们如何在 Objective-C 中得到它？

这是我可以收到的方式`status Code`：

```
NSURLResponse *resp
NSHTTPURLResponse* httpResponse = (NSHTTPURLResponse*)resp;
int responseStatusCode = [httpResponse statusCode];
NSLog(@"%i", responseStatusCode); 
```

怎么样`getReasonPhrase()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:11:54.867

```
NSString *reasonString = [NSHTTPURLResponse localizedStringForStatusCode:responseStatusCode]; 
```

干杯

# c++ - 定义cpp文件位置

> ID：11873210
> 
> 赞同：0
> 
> 时间：2012-08-08T21:08:53.430
> 
> 标签：c++, visual-studio-2010

我有`a.cpp`与`a.h`主项目目录分开的文件。我`a.h`使用绝对路径将头文件包含到主项目中。热告诉 c++ 它必须在哪里寻找`a.cpp`文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T21:11:29.687

最好的方法是将`cpp`文件添加到项目中。

如果它在项目之外或从构建中排除，您*可以*将其包含在另一个源文件 ( ) 中，并在项目设置下的**其他包含目录**`#include "othercpp.cpp"`中指定其路径。

 **但正确的方法是将其添加到项目中。它不必与其他`cpp`文件位于同一位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T21:11:42.120

如果您的 .cpp 在项目中，它会找到它。如果不是，您可以使用包含目录来解决这个问题，但这只是不好的做法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T21:11:47.580

Visual Studio 通常会编译项目中包含的所有 cpp 文件，因此您实际上不需要“查找”它。只需将其拖入当前项目即可。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T21:17:50.830

将 ah 添加到项目的默认头文件位置。对您的 a.cpp 执行相同的操作。将这两个文件添加到您的项目中。您现在可以成功构建。

当我说将它们添加到默认位置时，我的意思是项目的 main.cpp 所在的实际物理位置以及项目的头文件所在的位置。如果将它们放在其他任何地方，则需要为头文件“添加其他包含”目录路径。**

# java - 我的标签中的自定义 PNG 背景，Android 应用程序，（无法理解 logcat）

> ID：11873212
> 
> 赞同：1
> 
> 时间：2012-08-08T21:09:09.313
> 
> 标签：java, android

虽然现在似乎我的按钮失败而不是背景，所以我将粘贴我的一些代码。

而且不知道为什么我会遇到这个问题，所以我开始删除我试图从中获取背景的东西，现在我似乎无法理解现在的问题是什么。该应用程序刚刚崩溃。在我解决了这个问题之后，主要问题是在所有选项卡中获得相同的背景。

如果您想要我的代码的任何其他部分，请告诉我。

```
08-08 20:54:11.798: D/dalvikvm(521): GC_EXTERNAL_ALLOC freed 41K, 53% free 2550K/5379K, external 1625K/2137K, paused 175ms

08-08 20:54:17.309: D/dalvikvm(552): GC_EXTERNAL_ALLOC freed 42K, 53% free 2550K/5379K, external 1625K/2137K, paused 119ms

08-08 20:54:21.169: D/dalvikvm(552): GC_EXTERNAL_ALLOC freed 6K, 53% free 2568K/5379K, external 7485K/9347K, paused 33ms

08-08 20:54:21.549: D/dalvikvm(552): GC_EXTERNAL_ALLOC freed 3K, 53% free 2569K/5379K, external 16274K/18322K, paused 27ms

08-08 20:54:21.599: D/dalvikvm(552): GC_EXTERNAL_ALLOC freed 0K, 53% free 2569K/5379K, external 16274K/18322K, paused 31ms

08-08 20:54:21.719: I/dalvikvm-heap(552): Clamp target GC heap from 25.509MB to 24.000MB

08-08 20:54:21.739: D/dalvikvm(552): GC_FOR_MALLOC freed 0K, 53% free 2569K/5379K, external 18899K/20947K, paused 45ms

08-08 20:54:22.050: D/dalvikvm(552): GC_EXTERNAL_ALLOC freed <1K, 53% free 2573K/5379K, external 18899K/20947K, paused 32ms

08-08 20:54:22.069: E/dalvikvm-heap(552): 9000000-byte external allocation too large for this process.

08-08 20:54:22.169: I/dalvikvm-heap(552): Clamp target GC heap from 25.512MB to 24.000MB

08-08 20:54:22.169: E/GraphicsJNI(552): VM won't let us allocate 9000000 bytes

08-08 20:54:22.179: D/dalvikvm(552): GC_FOR_MALLOC freed 0K, 53% free 2573K/5379K, external 18899K/20947K, paused 36ms

08-08 20:54:22.179: D/skia(552): --- decoder->decode returned false

08-08 20:54:22.179: D/AndroidRuntime(552): Shutting down VM

08-08 20:54:22.179: W/dalvikvm(552): threadid=1: thread exiting with uncaught exception (group=0x40015560)

08-08 20:54:22.199: E/AndroidRuntime(552): FATAL EXCEPTION: main

**08-08 20:54:22.199: E/AndroidRuntime(552): java.lang.RuntimeException: Unable to start activity ComponentInfo{taxi.allians/taxi.allians.Tabs}: android.view.InflateException: Binary XML file line #45: Error inflating class android.widget.Button**

08-08 20:54:22.199: E/AndroidRuntime(552):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)

08-08 20:54:22.199: E/AndroidRuntime(552):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)

08-08 20:54:22.199: E/AndroidRuntime(552):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)

08-08 20:54:22.199: E/AndroidRuntime(552):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)

08-08 20:54:22.199: E/AndroidRuntime(552):     at android.os.Handler.dispatchMessage(Handler.java:99)

08-08 20:54:22.199: E/AndroidRuntime(552):     at android.os.Looper.loop(Looper.java:123) 
```

所以这是我的一些 XML 代码`tabs.xml`：

```
 <Button
        android:id="@+id/bRingTaxi"
        android:layout_width="250dp"
        android:layout_height="250dp"
        android:layout_gravity="center"
        android:layout_y = "50dp"
        android:background= "@drawable/button_custom_callcab"
        android:textSize="40dp" />
</LinearLayout> 
```

来这里`button_custom_callcab`：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/callbutton_pressed"
          android:state_pressed="true" />
    <item android:drawable="@drawable/callbutton_pressed"
          android:state_focused="true" />
    <item android:drawable="@drawable/callbutton_un_pressed" />
</selector> 
```

这是我尝试获取背景的部分。这是在`tabs.xml`文件中：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="@drawable/carbonfibre"
> 
```

所以我希望你能帮助我理解这个logcat。我如何获得正确的背景？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T05:06:56.190

图像尺寸太大。减小大小并重试。

# ruby-on-rails - ActionView::Template::Error（highcharts.js 未预编译）：

> ID：11873215
> 
> 赞同：2
> 
> 时间：2012-08-08T21:09:17.910
> 
> 标签：ruby-on-rails, heroku, actionview

我在 heroku 上的应用程序显示此错误：

```
ActionView::Template::Error (highcharts.js isn't precompiled): 
```

我尝试了在互联网上找到的两种解决方案

```
config.assets.initialize_on_precompile = false 
```

和

```
config.assets.compile = true 
```

我读了一篇文章（我不记得是哪个）并使用以下命令创建了 de heroku：

```
heroku create --stack cedar 
```

当我运行 heroku open 时，我也收到了这个错误：

![在此处输入图像描述](../Images/2794a2f117a29aa5dbad2ab67b3f0bdf.png)

这是我的heroku日志

```
....
2012-08-08T21:03:41+00:00 app[web.1]: ActionView::Template::Error (highcharts.js isn't precompiled):
2012-08-08T21:03:41+00:00 app[web.1]: 
2012-08-08T21:03:41+00:00 app[web.1]:     5:   <%= stylesheet_link_tag    "application", :media => "all" %>
2012-08-08T21:03:41+00:00 app[web.1]:     6:   <%= javascript_include_tag "application" %>
2012-08-08T21:03:41+00:00 app[web.1]:     7:   <%= javascript_include_tag "http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"  %>
2012-08-08T21:03:41+00:00 app[web.1]:     8:   <%= javascript_include_tag :highcharts %>
2012-08-08T21:03:41+00:00 app[web.1]:     10: </head>
2012-08-08T21:03:41+00:00 app[web.1]:     11: <body>
2012-08-08T21:03:41+00:00 app[web.1]:     9:   <%= csrf_meta_tags %>
2012-08-08T21:03:41+00:00 app[web.1]:   app/views/layouts/application.html.erb:8:in `_app_views_layouts_application_html_erb___4426161850966429466_47229900'
2012-08-08T21:03:41+00:00 heroku[router]: GET floating-forest-7331.herokuapp.com/favicon.ico dyno=web.1 queue=0 wait=0ms service=4010ms status=304 bytes=0
.... 
```

编辑如果你想看我的应用程序（我会很感激你检查它）这里是我的[github](https://github.com/asantoya/tankinlog)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T21:14:56.683

请试试：

```
RAILS_ENV=production bundle exec rake assets:precompile 
```

然后将创建的文件夹添加`./public/assets/`到您的 Git 存储库并推送到 Heroku。

* * *

如果 rake 将尝试连接到您的数据库，请添加`./config/application.rb`：

```
config.assets.initialize_on_precompile = false 
```

* * *

[预编译资产@guides.rubyonrails.org](http://guides.rubyonrails.org/asset_pipeline.html#precompiling-assets)

# redirect - 一行中的多个 301 重定向

> ID：11873222
> 
> 赞同：0
> 
> 时间：2012-08-08T21:09:42.247
> 
> 标签：redirect, http-status-code-301

对于经常处理这些问题的人来说，这可能很容易，但我不确定我需要使用什么样的代码来实现我想要的。我知道如何将单个 URL 重定向到其他 URL，但是在一次重定向多个 URL 时，我做不到。

基本上，当我建立我的网站时，我的网站结构有点糟糕。我有一堆名为：

Crafting-alchemist-level-1-10.php

全部在根目录中，其中 alchemist-level-1-10 是页面名称，crafting 是站点部分。我有大约 50 个这样的 URL，我想将它们全部放在 /crafting 目录中，并用 crafting- 截断文件名。

我可以单独执行此操作，但必须有一种方法可以用一条线完成所有操作。有没有？

这些 URL 重定向也需要与 .php 之后的任何参数兼容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T22:10:59.283

在你的 .htaccess 中使用 mod_rewrite

```
RewriteEngine On
RewriteRule ^(.*)/(.*)/(.*)$ $1-$2-$3.php 
```

有关更多信息（您需要对其进行一些自定义）： [http ://httpd.apache.org/docs/current/rewrite/intro.html#regex](http://httpd.apache.org/docs/current/rewrite/intro.html#regex)

**编辑** 这会将一/二/三重写为一二三.php。

# javascript - 使用 jQuery 按属性查找元素

> ID：11873227
> 
> 赞同：0
> 
> 时间：2012-08-08T21:10:08.567
> 
> 标签：javascript, jquery, html

如何找到文档中所有 data-num 属性大于或等于 251 的元素？我更喜欢使用 jQuery。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T21:18:11.173

您想使用[“具有属性”](http://api.jquery.com/has-attribute-selector/)选择器，然后根据值进行[过滤。](http://api.jquery.com/filter/)

```
$('[data-num]').filter(function(){
    return parseInt($(this).data('num'), 10) >= 251;
}); 
```

演示：http: [//jsfiddle.net/xsvrv/](http://jsfiddle.net/xsvrv/)

**更新**：根据您的评论，如果您想更新 data-num 值，您可以这样做：

```
$('[data-num]').filter(function(){
    var num = parseInt($(this).data('num'), 10);
    if(num >= 251){
        $(this).data('num', num+1);
        return true;
    }
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T21:14:36.573

```
$('[data-num]').filter(function(){
    if (parseInt(this.getAttribute('data-num')) >= 251){
        return true;
    }
    else{
        return false;
    }
}) 
```

# c# - 通过 C# 控制物理设备

> ID：11873228
> 
> 赞同：3
> 
> 时间：2012-08-08T21:10:15.177
> 
> 标签：c#, device

我想控制一个物理设备。即：闪烁一些LED或转动伺服。（非常简单，我将把我的 LED 的腿连接到 USB 的腿或串行端口引脚，然后将信号发送到 LED 的一个腿并用伺服点亮它。）

问题：我怎样才能在 C# 中做到这一点？如何通过 USB 或串口发送信号？我需要什么东西？我该如何管理它？谢谢。

```
 messageBox.Show("How to control a physical device via c# ?");

 messageBox.Show("thanks"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T21:18:39.590

您需要一个可以将您的 USB 信号转换为您的设备可以理解的信号的设备（可能是 LED 的简单开或关）。

我过去使用过[U421](http://www.kadtronix.com/usbhidapi.htm#U4x1Device)，他们有一个库，您只需使用 P/Invoke 加载 DLL，然后您就可以将信号发送到芯片上的引脚。然后，您需要将您想要控制的任何东西连接到芯片（*正确*，但这超出了 Stack Overflow 的范围，您可能想尝试[Electronics.StackExchange.com](https://electronics.stackexchange.com/)）。有关示例代码和接线图，请参见 [USBMicro 网站](http://www.usbmicro.com/)`U4x1 Application Notes`上的部分。

来自网站的示例代码：

```
⁄⁄ needed to import the .dll
using System.Runtime.InteropServices;

    public class USBm
        {
        public static byte BitA0 = 0x00;
        public static byte BitA1 = 0x01;
        public static byte BitA2 = 0x02;
        public static byte BitA3 = 0x03;
        public static byte BitA4 = 0x04;
        public static byte BitA5 = 0x05;
        public static byte BitA6 = 0x06;
        public static byte BitA7 = 0x07;
        public static byte BitB0 = 0x08;
        public static byte BitB1 = 0x09;
        public static byte BitB2 = 0x0A;
        public static byte BitB3 = 0x0B;
        public static byte BitB4 = 0x0C;
        public static byte BitB5 = 0x0D;
        public static byte BitB6 = 0x0E;
        public static byte BitB7 = 0x0F;

⁄⁄  USBm.dll - C# pInvoke examples
⁄⁄  "Commands"
⁄⁄      [DllImport("USBm.dll", EntryPoint = "USBm_FindDevices", CharSet = CharSet.Auto)]
        [DllImport("USBm.dll")]
        public static extern bool USBm_FindDevices();
        [DllImport("USBm.dll")]
        public static extern int USBm_NumberOfDevices();
        [DllImport("USBm.dll")]
        public static extern bool USBm_DeviceValid(int Device);
        [DllImport("USBm.dll")]
        public static extern bool USBm_About(StringBuilder About);
        [DllImport("USBm.dll")]
        public static extern bool USBm_Version(StringBuilder Version);
        [DllImport("USBm.dll")]
        public static extern bool USBm_Copyright(StringBuilder Copyright);
        [DllImport("USBm.dll")]
        public static extern bool USBm_DeviceMfr(int Device, StringBuilder Mfr);
        [DllImport("USBm.dll")]
        public static extern bool USBm_DeviceProd(int Device, StringBuilder Prod);
        [DllImport("USBm.dll")]
        public static extern int USBm_DeviceFirmwareVer(int Device);
        [DllImport("USBm.dll")]
        public static extern bool USBm_DeviceSer(int Device, StringBuilder dSer);
        [DllImport("USBm.dll")]
        public static extern int USBm_DeviceDID(int Device);
        [DllImport("USBm.dll")]
        public static extern int USBm_DevicePID(int Device);
        [DllImport("USBm.dll")]
        public static extern int USBm_DeviceVID(int Device);
        [DllImport("USBm.dll")]
        public static extern bool USBm_DebugString(StringBuilder DBug);
        [DllImport("USBm.dll")]
        public static extern bool USBm_RecentError(StringBuilder rError);
        [DllImport("USBm.dll")]
        public static extern bool USBm_ClearRecentError();
        [DllImport("USBm.dll")]
        public static extern bool USBm_SetReadTimeout(uint TimeOut);
        [DllImport("USBm.dll")]
        public static extern bool USBm_ReadDevice(int Device, byte[] inBuf);
        [DllImport("USBm.dll")]
        public static extern bool USBm_WriteDevice(int Device, byte[] outBuf);
        [DllImport("USBm.dll")]
        public static extern bool USBm_CloseDevice(int Device);
        } 
```

函数调用示例

```
⁄⁄ Test USBm device attached

if ( !USBm.USBm_FindDevices() )
    { 
    MessageBox.Show( string.Format("No Device Present"), "USBm Devices", MessageBoxButtons.OK, MessageBoxIcon.Information );
    return;
    }  ⁄⁄ implied else

⁄⁄Walk the USBm.dll functions

⁄⁄ some containers
StringBuilder sb = new StringBuilder( 200 );
bool result = false;  ⁄⁄ return values

⁄⁄ .DLL FindDevices  returns the number of devices
result = USBm.USBm_FindDevices();

⁄⁄ return the number of devices
int TotalDevices = USBm.USBm_NumberOfDevices();
int Device = TotalDevices -1;  ⁄⁄ only One device is ever attached so ...

⁄⁄ .DLL About info
result = USBm.USBm_About( sb );

⁄⁄ .DLL Version info
result = USBm.USBm_Version( sb );

⁄⁄ .DLL Copyright info
result = USBm.USBm_Copyright( sb );

⁄⁄ Device Valid
result = USBm.USBm_DeviceValid( Device );

⁄⁄ Device Manufacturer
result = USBm.USBm_DeviceMfr( Device, sb );

⁄⁄ Device Product String
result = USBm.USBm_DeviceProd( Device, sb );

⁄⁄ Device Firmware Version
int FirmVer = USBm.USBm_DeviceFirmwareVer(Device);

⁄⁄ Device SerialNumber [ ]
result = USBm.USBm_DeviceSer(Device, sb);

⁄⁄ Device DiD
int DID = USBm.USBm_DeviceDID(Device);

⁄⁄ Device PiD
int PID = USBm.USBm_DevicePID(Device);

⁄⁄ Device ViD
int VID = USBm.USBm_DeviceVID(Device);

⁄⁄ Device Debug String
result = USBm.USBm_DebugString(sb);

⁄⁄ Device Recent Error - always returns true
result = USBm.USBm_RecentError(sb);

⁄⁄ Device Clear Recent Error
result = USBm.USBm_ClearRecentError();

⁄⁄ Device SetReadTimeout [ sixteen-bit millisecond value]
uint tOUT = 3000;
result = USBm.USBm_SetReadTimeout(tOUT);

⁄⁄ Device WriteDevice [ 8 byte to write (device raw commands)]
byte[] OutBuf = { 0, 21, 3, 65, 8, 17, 60, 0 };
result = USBm.USBm_WriteDevice(Device, OutBuf);

⁄⁄ Device ReadDevice [ ]
byte[] InBuf = { 0, 0, 0, 0, 0, 0, 0, 0 };
result = USBm.USBm_ReadDevice(Device, InBuf);

// Device CloseDevice [ ]
result = USBm.USBm_CloseDevice(Device); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T22:27:20.807

您可以像这样使用您的串行端口：

```
 SerialPort port = new SerialPort("COM1", 2400, Parity.None, 8, StopBits.One);
  port.Open();
  port.Write(new byte[] {0x00, 0xFF, 0xFF}, 0, 3);
  port.Close(); 
```

整个事情将在串行端口的一根线上逐位发送，并带有用于传输控制的附加位。

You can blink LED with this. You need to connect LED to pin Transmit Data and to Ground that is usually the plug cover or one of pins. Check [this](http://airborn.com.au/serial/rs232.html) for reference. You need also resistor to lower the current. 3k [ohm] resistor should do.

Driving small servo motor is possible but not that easy. Its better to control servo with microcontroller connected to Your computer.

You can connect two computers and exchange data with this.

You can burn Your equipment so be careful.

You can also buy or build something like [this](http://www.quasarelectronics.com/8191-3-channel-high-current-rgb-led-controller-serial-rs232-ttl.htm)

EDIT: Ok, lots of questions.

> QUESTION 1) why its hard? cant i just send a signal to the servo and make it run just like i did on the LED?

Serial port is a communication port so **its purpose is to communicate and NOT to drive equipment**. Its power capabilities are low. This port will store data to send in buffer and send bit by bit. So its extremely hard to shape [PWM](http://en.wikipedia.org/wiki/Pulse-width_modulation) \ [PPM](http://en.wikipedia.org/wiki/Pulse_position_modulation) [signal to drive servo](http://en.wikipedia.org/wiki/File%3aSinais_controle_servomotor.JPG) and after all result are not gonna be brilliant as well. Depending on motor that You have You may need other control method, but it will be hard to implement with serial port as well. If You really want to drive hardware from a port I would advice [parallel port](http://www.codeproject.com/Articles/4981/I-O-Ports-Uncensored-1-Controlling-LEDs-Light-Emit).

> QUESTION 2) in which cases i burn my equipment? and do u mean i burn my serial port? or i burn LED or the servo?
> 
> QUESTION 3) you said "Your PC should also have current limited output" so as you referred if i put a resistor then i can manage this? and does 3k solves in all case?

In case You do not know enough about electrical [circuits](http://en.wikipedia.org/wiki/Electronic_circuit), [networks](http://en.wikipedia.org/wiki/Electrical_network) and [analysis](http://en.wikipedia.org/wiki/Circuit_theory) then You have big chance to damage Your equipment. You can burn all of them and in worst case scenario also Your PC and house! First two problems that You need to worry about are [short circuit](http://en.wikipedia.org/wiki/Short_circuit) and [electrostatic discharge](http://en.wikipedia.org/wiki/Electrostatic_discharge)

Current limited output should lower current when resistors value is too low. This should prevent the damage of serial port driver on mainboard of PC.

3k resistor complies with [serial port specification](http://en.wikipedia.org/wiki/RS-232) requirements (3-7[kOhm] <2500[pF]). It should drop taken current below 4[mA]. So in theory it should solve all cases.

> QUESTION 4) where will i write your code? in to the button1 clicked? i mean lest say i have a winform and a button there, will i write your code in to the button clicked event?

You can open port on opening Your program. Then write to port on button click. Then close port on close program. All the code on button click should work as well.

* * *

PS.: Its also possible to connect serial port to audio input of sound card and then send data on serial port and record it as audio. It works as simple oscilloscope. (You can damage Your PC with this)

# java - 为什么我的背景在重绘后会出现故障？

> ID：11873230
> 
> 赞同：1
> 
> 时间：2012-08-08T21:10:20.373
> 
> 标签：java, swing, graphics, repaint, paintcomponent

我有一个我制作的程序选择工具。它会打开一个带有 17 个按钮的 JFrame，其中 15 个是可自定义的，它们从位于 C: 驱动器中的 .txt 文档中获取文本。当我单击分配按钮时，它会打开一个 JFileChooser 以在单击按钮时选择要打开的文件。然后选择要更改的按钮，然后键入要通过该按钮显示的文本。之后，程序会重写 .txt 文件并更新按钮。这是更新的代码：

```
public static void restart() {
    start.assignButtonActions();
    start.assignButtonText();
    start.paint(graphics);
}
public void assignButtonActions() {
    /**
     * assign button actions
     */
    for (int i = 0; i < buttonAction.length; i++) {
        buttonAction[i] = io.readSpecificFromHD("C:\\ButtonActions.txt", i
                + 1 + actionButton.length);
    }
}

public void assignButtonText() {
    for (int i = 0; i < actionButton.length; i++) {
        /**
         * set button text
         */
        actionButton[i].setText(io.readSpecificFromHD(
                "C:\\ButtonActions.txt", i + 1));
    }

}
public void paint(Graphics g) {
    g.drawImage(getImage("files/background.png"), 0, 0, FRAMEWIDTH,
            FRAMEHEIGHT, null);
    refresh();
}

public void refresh() {
    graphics.drawImage(getImage("files/background.png"), 0, 0, FRAMEWIDTH,
            FRAMEHEIGHT, null);
    for (int i = 0; i < actionButton.length; i++) {
        actionButton[i].repaint();
    }
    assignButton.repaint();
    helpButton.repaint();
} 
```

这就是我相信这个问题所需的所有代码。问题是，`restart()`调用该方法后，背景就在那里，按钮周围有一个白色方块，方块内部是白色的。不是一个真正的大问题，但真的非常烦人而且非常不专业。起初我以为是在绘制背景后按钮正在调整大小，所以我做了它，以便每次调用时刷新运行两次。一点帮助都没有。

编辑：我解决了这个问题。我接受了气垫船的回答并修改了我学到的一点。我所要做的就是将`restart()`方法修改为：

```
public static void restart() {
    start.assignButtonActions();
    start.assignButtonText();
    start.repaint();
} 
```

因为`repaint();`重绘了气垫船所说的整个组件。非常感谢大家！希望这有助于未来的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T21:16:49.337

通过直接调用并尝试在 JComponent 的方法`paint(...)`之外使用 Graphics 对象，您似乎错误地处理了 Swing 图形。`paintComponent(...)`不要这样做，因为所有的 Swing 图形教程都会告诉你（如果你还没有学习过其中的一些，你很快就会想要这样做）。而是在一个 JComponent 的（比如 JPanel 的）内做所有的图形`paintComponent(...)`，先调用 super 的方法，然后在 paintComponent 的方法参数中使用 JVM 提供的 Graphics 对象。

**编辑**
教程链接：

*   介绍性教程在这里：[课程：执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/index.html)。
*   高级教程在这里：[在 AWT 和 Swing 中绘画](http://www.oracle.com/technetwork/java/painting-140037.html)。

我认为您将不得不重新编写大部分图形代码。你应该做的改变：

*   仅在 JPanel 或其他 JComponent 派生类中绘制，而不在 JFrame 或其他顶级窗口中绘制。
*   绘制你的类的`paintComponent(...)`方法。
*   在您的方法上方放置一个 @Override 注释，`paintComponent(...)`以确保您实际上覆盖了超级方法。
*   将超级调用作为覆盖方法`paintComponent(...)`的第一行（通常） 。`paintComponent(...)`
*   使用 JVM 传递给此方法的 Graphics 对象。
*   不要使用通过调用`getGraphics()`组件获得的 Graphics 对象（极少数例外）。
*   不要给你的类一个 Graphics 字段并尝试在其中存储 Graphics 对象。JVM 提供的 Graphics 对象不会持久存在，并且会很快变为 null 或不可用。
*   不要自己打电话`paint(...)`或`paintComponent(...)`直接打电话（除了极少数例外——而且你当前的代码不属于例外之一，相信我）。
*   您可能不需要调用`repaint()`您的 JButton

# java - 是否有一个 java_opts 我可以禁用发送电子邮件？

> ID：11873233
> 
> 赞同：-1
> 
> 时间：2012-08-08T21:10:28.907
> 
> 标签：java, email, cron, java-opts

我有一些在生产中发送电子邮件的 cron 作业，是否有这样的选项可以防止在测试中发送电子邮件？

现在我希望找到这样一个 java_opt 选项或重新实现很多电子邮件功能......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T21:14:13.213

不。最好是模拟电子邮件服务。这样您就可以在不实际发送的情况下测试*电子邮件是否已移交给服务。*

或者实现一个 dummyservice（假设您已经针对接口对电子邮件服务进行了编程）并将其用于测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T21:18:50.643

[DevNullSMTPServer](http://www.aboutmyip.com/AboutMyXApp/DevNullSmtp.jsp)将模拟本地 SMTP 服务器并记录传出的电子邮件而不是发送它们。

# php - 在 PHP Web 应用程序中使用时区

> ID：11873234
> 
> 赞同：6
> 
> 时间：2012-08-08T21:10:30.523
> 
> 标签：php, mysql, html, timezone, utc

几个小时以来，我一直在寻找在 PHP/MySQL Web 应用程序中使用时区的最佳方法，但很难找到明确的答案。根据我到目前为止所学到的知识，最好将每个人的东西以 UTC 格式存储在数据库中（如果我错了，请纠正我）。

当用户注册时，我会询问他们那里的时区，然后将其存储到那里的用户。这将采用这种格式作为下拉菜单：

```
<option value="Europe/London">(GMT) Greenwich Mean Time : London</option> 
```

我正在构建的应用程序将允许用户在未来与人（会议）进行安排，就像日历一样。显然，在一年的时间里，不同的时区有不同的夏令时，知道我将如何满足这一点吗？

假设来自英国的用户在 2013 年 1 月 24 日下午 3:00 召开会议，并邀请住在加利福尼亚的人参加这次会议，我如何获得它以便美国人在他/她的时区看到该会议，而英国用户看到它在他/她的时区？（请注意，两个用户都已注册并设置了他们的时区）。

有没有人有一个明确的解释，也许有一些例子？或者可以指出我在哪里可以找到它？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-09T13:22:09.493

我在一年前为一家私人飞机运营商编写的 PHP/MySQL 应用程序中广泛处理了这种情况。在这两个平台上处理时区有不同的策略，但我将解释我是如何做到的。我将 MySQL 服务器设置为 UTC，并在用户在用户配置文件注册过程中指定的时区运行每个 PHP 脚本。

MySQL 和 PHP（PHP 5.2 及更高版本）都具有本机日期时间数据类型。MySQL 的 datetime 是一种原始数据类型，而 PHP 5.2 及更高版本提供了内置的[DateTime 类](http://www.php.net/manual/en/class.datetime.php)。MySQL datetime 数据类型不包含时区的元数据，但 PHP DateTime 对象始终包含时区。如果 PHP 日期时间构造函数未在第二个参数中指定可选时区，则 PHP 日期时间构造函数使用 php 环境变量。

MySQL 和 PHP 都在配置文件中设置了默认时区。MySQL 使用[配置文件](https://dev.mysql.com/doc/refman/5.5/en/time-zone-support.html)中为每个 db 连接设置的日期时间，除非用户在使用命令启动连接后指定不同的时区`SET time_zone = [timezone];`。PHP 还使用服务器配置文件中设置的时区为每个脚本设置一个时区环境变量，并且可以[`date_default_timezone_set()`](http://php.net/manual/en/function.date-default-timezone-set.php)在脚本启动后使用 PHP 函数覆盖该环境变量。

PHP DateTime 类有一个名为*timezone*的属性，它是一个[PHP DateTimeZone 对象](http://php.net/manual/en/class.datetimezone.php)。DateTimeZone 对象是使用字符串指定的确切时区。[时区列表](http://php.net/manual/en/timezones.php)很全面，在世界各地有数百个单独的时区。 **PHP 时区将自动考虑夏令时。**

当用户在 Web 应用程序中生成日期时间时，在用户配置文件的时区中构造一个 PHP 日期时间对象。然后使用该[`setTimezone`](http://www.php.net/manual/en/datetime.settimezone.php)方法将 DateTime 对象修改为 UTC 时区。现在您有了 UTC 格式的用户日期时间，您可以将值存储在数据库中。使用 DateTime[`format`](http://www.php.net/manual/en/datetime.format.php)方法将数据表示为 MySQL 接受的格式的字符串。

所以用户生成一个日期时间，你在用户指定的时区创建一个 PHP 日期时间对象：

```
// set using an include file for user profile
$user_timezone = new DateTimeZone('America/New_York'); 

// 1st arg in format accepted by PHP strtotime
$date_object1 = new DateTime('8/9/2012 5:19 PM', $user_timezone); 
$date_object1->setTimezone(new DateTimeZone('UTC'));
$formated_string = $date_object1->format('Y-m-d H:i:s');
$query_string = "INSERT INTO `t_table1` (`datetime1`) VALUES('$formated_string')"; 
```

当您从数据库中检索值时，以 UTC 构造，然后转换为用户的时区。

```
$query_string = "SELECT `datetime1` FROM `t_table1`";
$date_object1 = new DateTime($datetime_string_from_mysql, new DateTimeZone('UTC'));
$date_object1->setTimezone($user_timezone);
$string_for_display_in_application = $date_object1->format('m/d/Y g:i a'); 
```

使用此方法，您的日期时间值始终以 UTC 格式存储在数据库中，并且用户始终会体验到他/她的个人资料时区中的值。如果需要，PHP 将针对每个时区更正夏令时。

一个问题：这个解释不包括 MySQL 时间戳数据类型。我建议使用 MySQL datetime 日期类型来存储日期时间值，而不是时间戳数据类型。[此处](http://dev.mysql.com/doc/refman/5.5/en/datetime.html)的手册中介绍了时间戳数据类型。

**编辑：您可以使用**[listIdentifiers](http://www.php.net/manual/en/datetimezone.listidentifiers.php) 生成一个包含每个 PHP 时区字符串的数组，这是 DateTimeZone 类的静态方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T21:35:13.107

在 MySQL 中，您需要做的是：

1.  将每个用户选择的时区存储在某个地方，您可以在代表该用户进行数据库查询时检索它。您可以将其存储为字符串。
2.  在您代表特定用户工作之前（例如，存储或检索约会时间和日期）`SET time_zone = (stored time zone setting)`

这将导致时区适当地转换为每个人的本地时间。

**编辑：**

这有效，因为

1.  MySQL 尝试使用 UTC（通用时间，以前称为格林威治标准时间）将 DATETIME 和 TIMESTAMP 数据项存储在表中。
2.  只有知道应用程序提供的每个数据项的正确本地时区，它才能正确执行此操作。
3.  在不关心不同时区的应用程序中，它以 MySQL 服务器范围的方式执行此操作。请参阅[https://dev.mysql.com/doc/refman/5.5/en/time-zone-support.html](https://dev.mysql.com/doc/refman/5.5/en/time-zone-support.html)。大多数运行多国和多时区应用程序的人将他们的服务器时区设置为 UTC，而不是本地时间，因为这样*更*容易整理事情。
4.  除非您还知道日期和时区，否则尝试将时间从 UTC 转换为本地时间几乎没有意义，因为本地时间在一年中的不同时间打开和关闭。尝试为以色列、亚利桑那州和纽约的所有三个地区都做到这一点，我敢说！以色列在逾越节和犹太新年在白天和标准时间之间切换；亚利桑那州没有转换，而纽约则随美国联邦立法机构的心血来潮而转换。
5.  有一个会话范围的 time_zone 设置 ( `SET time_zone = something`)。如果您不设置它，它将使用上面第 3 项中的时区表示。如果您设置它，服务器将使用它作为时区来将其内部表示转换为它在查询中发送回的表示。
6.  您可以通过发出`SELECT Name from mysql.time_zone_name`. 这可以填充下拉菜单，您的用户可以从中选择她的时区。[如果此查询未返回任何项目，请查看https://dev.mysql.com/doc/refman/5.5/en/time-zone-support.html](https://dev.mysql.com/doc/refman/5.5/en/time-zone-support.html)的底部。

因此，这意味着您可以将会话 time_zone 设置设置为特定用户的时区，然后返回该用户时区的所有时间。此外，您或将要从该用户的时区转换为 MySQL 的内部表示的任何`DATETIME`或`TIMESTAMP`项目，因为它们被放置在您的表中。`INSERT``UPDATE`

注意：在具有持久 MySQL 连接的 Web 应用程序中，新用户请求的工作将继承连接的 time_zone 设置。不要忘记为新用户重置它。

如果您正在运行返回多个用户的本地时间数据的查询，并且这些用户恰好位于不同的时区，则您无法利用此 MySQL per-session 功能集。您可以通过为不同的用户运行不同的查询并更改他们之间的 time_zone 设置来解决此问题。

或者，您可以使用 MySQL 功能

```
CONVERT_TZ(datetime,'UTC','user_time_zone') 
```

或类似的每个项目。

或者，Java 和 DotNET 拥有自己的高质量时区操作系统。因此，您可以选择使用 UTC 的 time_zone 设置运行 MySQL 服务器，并在应用程序中进行所有时区转换。

# php - PHP preg_split 有两个分隔符，除非分隔符在引号内

> ID：11873240
> 
> 赞同：4
> 
> 时间：2012-08-08T21:10:51.140
> 
> 标签：php, regex, delimiter, preg-split

[`preg_split`](https://stackoverflow.com/questions/11867342/php-preg-split-with-two-delimiters-and-capture-only-one)多亏了尼克，我之前的问题是关于哪个答案超级快的问题；当分隔符在引号内时，我真的很想将场景扩展到不拆分字符串。例如：

如果我有 string `foo = bar AND bar=foo OR foobar="foo bar"`，我希望在每个空格或`=`字符上拆分字符串，但将`=`字符包含在返回的数组中（目前效果很好），但我不想拆分字符串中的任何一个分隔符都在引号。

到目前为止我有这个：

```
<!doctype html>
<?php

$string = 'foo = bar AND bar=foo';

$array = preg_split('/ +|(=)/', $string, -1, PREG_SPLIT_DELIM_CAPTURE | PREG_SPLIT_NO_EMPTY);

?>
<pre>
<?php

print_r($array);

?>
</pre> 
```

这让我：

```
Array
(
    [0] => foo
    [1] => =
    [2] => bar
    [3] => AND
    [4] => bar
    [5] => =
    [6] => foo
) 
```

但是，如果我将字符串更改为：

```
$string = 'foo = bar AND bar=foo OR foobar = "foo bar"'; 
```

我真的很希望数组是：

```
Array
(
    [0] => foo
    [1] => =
    [2] => bar
    [3] => AND
    [4] => bar
    [5] => =
    [6] => foo
    [6] => OR
    [6] => foobar
    [6] => =
    [6] => "foo bar"
) 
```

注意`"foo bar"`没有在空间上拆分，因为它在引号中？

真的不确定如何在 RegEx 中执行此操作，或者是否有更好的方法，但非常感谢您的所有帮助！

谢谢大家！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T21:13:36.547

尝试

```
$array = preg_split('/(?: +|(=))(?=(?:[^"]*"[^"]*")*[^"]*$)/', $string, -1, PREG_SPLIT_DELIM_CAPTURE | PREG_SPLIT_NO_EMPTY); 
```

这

```
(?=(?:[^"]*"[^"]*")*[^"]*$) 
```

part 是一个[前瞻断言](http://www.regular-expressions.info/lookaround.html)，确保字符串中有偶数个引号字符，因此如果当前位置在引号之间，它将失败：

```
(?=      # Assert that the following can be matched:
 (?:     # A group containing...
  [^"]*" #  any number of non-quote characters followed by one quote
  [^"]*" #  the same (to ensure an even number of quotes)
 )*      # ...repeated zero or more times,
 [^"]*   # followed by any number of non-quotes
 $       # until the end of the string
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T21:17:24.277

我可以通过添加带引号的字符串作为分隔符 a-la 来做到这一点

```
"(.*?)"| +|(=) 
```

引用的部分将被捕获。看起来这有点脆弱，我没有对它进行广泛的测试，但它至少适用于您的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-27T02:06:01.033

**但是为什么要拆分呢？**

看了这个老问题后，我想到了这个简单的解决方案，使用 a`preg_match_all`而不是 a `preg_split`。我们可以使用这个简单的正则表达式来指定我们想要的：

```
"[^"]*"|\b\w+\b|= 
```

见[在线演示](http://regex101.com/r/lX1wQ4)。

# objective-c - 如何将数组加载到 UITableView，而不是 TableViewController

> ID：11873241
> 
> 赞同：1
> 
> 时间：2012-08-08T21:10:52.497
> 
> 标签：objective-c, ios, xcode, uitableview

我正在尝试获取从另一个查看器加载的数组并将其放入 UITableView，而不是 TableViewController。我不知道我会怎么做。现在我有这个代码：

CRHCommentSection.m

```
#import "CRHCommentSection.h"
#import "CRHViewControllerScript.h"

@interface CRHCommentSection ()

@end

@implementation CRHCommentSection
@synthesize observationTable;

NSArray *myArray; 

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
 {
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
}
return self;
}

- (void)viewDidLoad
    {

    myArray = [CRHViewControllerScript theArray];
    NSLog(@"%@", myArray);
    //NSArray* paths = [NSArray arrayWithObject:[NSIndexPath indexPathForRow:0   inSection:1]];
    //[observationTable insertRowsAtIndexPaths:paths   withRowAnimation:UITableViewRowAnimationTop];

    [super viewDidLoad];
    // Do any additional setup after loading the view.

}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    // Return the number of sections.

    NSLog(@" in method 1");
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

    NSLog(@" in method 2");
   // Return the number of rows in the section.
   return [myArray count];

   }

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath    *)indexPath {

    NSLog(@" in method 3");

    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault   reuseIdentifier:CellIdentifier];
    }

    cell.textLabel.text = [myArray objectAtIndex:indexPath.row];    
    return cell;
} 
```

CRHCommentSection.h

```
 #import <UIKit/UIKit.h>

@interface CRHCommentSection : UIViewController

@property (weak, nonatomic) IBOutlet UITableView *observationTable;

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T21:27:30.003

由于您已多次发布相同的示例代码，因此我将为您提供不使用静态的方法。是的，您确实需要在视图控制器而不是 UITableView 上设置集合（数组），因为 tableView 使用控制器作为数据源。

假设您有一个显示搜索结果的 UITableView ...并且您从其他视图或从应用程序委托启动此视图控制器，就像这样..

在您的 viewController（您的是 CRHCommentSection）中，为您要用来填充表格的数组定义一个属性。

```
@property (nonatomic,retain, setter=setSearchResults:) NSArray *searchResults; //use your array name here
//BTW please dont call it ARRAY..its confusing. 
```

同样在你的commentsController（这将是一个更好的名字，你所拥有的）添加数组的setter

```
-(void) setSearchResults:(NSArray *)searchResults
{
    //in case we loaded this view with results previously release the previous results
    if ( _searchResults )
    {
        [_searchResults release];
    }
    _searchResults = [searchResults retain]; 

   [_tableView reloadData];
} 
```

当您在其中使用 UITableView 实例化新视图控制器时 - 设置“数组”，在您的情况下，在我的情况下进行评论 searchResults

```
_searchResultsViewController = [[SearchResultsViewController alloc] initWithNibName:@"SearchResultsViewController" bundle:nil];

//now set the array on the controller
_searchResultsViewController.searchResults = mySearchResults; //(your array) 
```

这是在实例化视图控制器时为表视图传达数组的简单方法。

此外，命名约定将帮助您理清思路

如果你有一个用于评论的视图控制器，它应该是

评论视图控制器

如果数组包含注释，则应将其称为注释 - 以提高可读性。

干杯。

至于设置数据源和委托以及 cellForRow 等的其余样板文件，您在最后一次得到了建议，所以我不会在这里重复。

@bigkm 有一个好点子

```
@interface SearchResultsViewController : UIViewController<UITableViewDataSource, UITableViewDelegate> 
```

您的视图控制器必须按照上面的协议正确定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T21:29:38.403

您需要设置数据源

```
[self setDataSource:self]; 
```

并将协议添加到您的界面。

```
<UITableViewDataSource> 
```

# android - java.lang.RuntimeException：无法启动活动 ComponentInfo？

> ID：11873243
> 
> 赞同：0
> 
> 时间：2012-08-08T21:10:55.777
> 
> 标签：android, database, fatal-error

我一直在尝试让一个 android 应用程序连接到位于 localhost 上的数据库，但到目前为止我一直没有运气。我的程序过去可以启动，我可以在文本字段中输入文本，但是一旦我做了一些更改，它现在甚至无法启动。我查看了 LogCat，但我不知道问题可能是什么。我在这方面有点新，认为那里的任何人都可以帮助我吗？

这是来自 LogCat 的错误日志：

```
08-08 20:31:35.367: E/AndroidRuntime(605): FATAL EXCEPTION: main
08-08 20:31:35.367: E/AndroidRuntime(605): java.lang.RuntimeException: Unable to start activity     ComponentInfo{com.example.databasetester/com.example.databasetester.DashboardActivity}: android.database.sqlite.SQLiteException: no such table: users: , while compiling: SELECT  * FROM users
08-08 20:31:35.367: E/AndroidRuntime(605):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2049)
08-08 20:31:35.367: E/AndroidRuntime(605):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2083)
08-08 20:31:35.367: E/AndroidRuntime(605):  at android.app.ActivityThread.access$600(ActivityThread.java:134)
08-08 20:31:35.367: E/AndroidRuntime(605):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1233)
08-08 20:31:35.367: E/AndroidRuntime(605):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-08 20:31:35.367: E/AndroidRuntime(605):  at android.os.Looper.loop(Looper.java:137)
08-08 20:31:35.367: E/AndroidRuntime(605):  at android.app.ActivityThread.main(ActivityThread.java:4697)
08-08 20:31:35.367: E/AndroidRuntime(605):  at java.lang.reflect.Method.invokeNative(Native Method)
08-08 20:31:35.367: E/AndroidRuntime(605):  at java.lang.reflect.Method.invoke(Method.java:511)
08-08 20:31:35.367: E/AndroidRuntime(605):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
08-08 20:31:35.367: E/AndroidRuntime(605):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
08-08 20:31:35.367: E/AndroidRuntime(605):  at dalvik.system.NativeStart.main(Native Method)
08-08 20:31:35.367: E/AndroidRuntime(605): Caused by: android.database.sqlite.SQLiteException: no such table: users: , while compiling: SELECT  * FROM users
08-08 20:31:35.367: E/AndroidRuntime(605):  at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
08-08 20:31:35.367: E/AndroidRuntime(605):  at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:68)
08-08 20:31:35.367: E/AndroidRuntime(605):  at android.database.sqlite.SQLiteProgram.compileSql(SQLiteProgram.java:143)
08-08 20:31:35.367: E/AndroidRuntime(605):  at android.database.sqlite.SQLiteProgram.compileAndbindAllArgs(SQLiteProgram.java:361)
08-08 20:31:35.367: E/AndroidRuntime(605):  at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:127)
08-08 20:31:35.367: E/AndroidRuntime(605):  at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:94)
08-08 20:31:35.367: E/AndroidRuntime(605):  at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:53)
08-08 20:31:35.367: E/AndroidRuntime(605):  at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:47)
08-08 20:31:35.367: E/AndroidRuntime(605):  at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1671)
08-08 20:31:35.367: E/AndroidRuntime(605):  at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1645)
08-08 20:31:35.367: E/AndroidRuntime(605):  at library.DatabaseHandler.getRowCount(DatabaseHandler.java:103)
08-08 20:31:35.367: E/AndroidRuntime(605):  at library.UserFunctions.isUserLoggedIn(UserFunctions.java:71)
08-08 20:31:35.367: E/AndroidRuntime(605):  at com.example.databasetester.DashboardActivity.onCreate(DashboardActivity.java:24)
08-08 20:31:35.367: E/AndroidRuntime(605):  at android.app.Activity.performCreate(Activity.java:4539)
08-08 20:31:35.367: E/AndroidRuntime(605):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
08-08 20:31:35.367: E/AndroidRuntime(605):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2013)
08-08 20:31:35.367: E/AndroidRuntime(605):  ... 11 more 
```

我还应该补充一点，我的数据库中有一个名为“users”的表。如果你们需要我展示我的一些代码（我相信你们会的），我会非常乐意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T21:16:34.900

这是错误：

```
08-08 20:31:35.367: E/AndroidRuntime(605): FATAL EXCEPTION: main
08-08 20:31:35.367: E/AndroidRuntime(605): java.lang.RuntimeException: 
  Unable to start activity
  ComponentInfo{com.example.databasetester/com.example.databasetester.DashboardActivity}:
    android.database.sqlite.SQLiteException: no such table: users: , 
  while compiling: SELECT  * FROM users 
```

建议：

1）确保你*有*一个表“用户”（你说你有，但请仔细检查）

... 和 ...

2）确保您正确指定了数据库文件：

> * [SQLite 异常：没有这样的表错误](https://stackoverflow.com/questions/934237/sqlite-exception-no-such-table-error)
> 
> 如果您没有正确指定数据库文件名，我相信它会退回到创建一个空数据库。这通常是“找不到表”的原因。检查您的路径和数据库文件名。

# elasticsearch - 如何使用 Elasticsearch 和 Tire 防止附件存储在 _source 中？

> ID：11873248
> 
> 赞同：4
> 
> 时间：2012-08-08T21:11:39.567
> 
> 标签：elasticsearch, attachment, tire

我使用 Tire gem 在 Elasticsearch 中索引了一些 PDF 附件。这一切都很好，但我将拥有许多 GB 的 PDF，我们可能会将 PDF 存储在 S3 中以供访问。现在 base64 编码的 PDF 存储在 Elasticsearch _source 中，这将使索引变得巨大。我想让附件被索引，但不存储，而且我还没有找到正确的咒语来放入轮胎的“映射”块以防止它。块现在是这样的：

```
mapping do
  indexes :id, :type => 'integer'
  indexes :title
  indexes :last_update, :type => 'date'
  indexes :attachment, :type => 'attachment'
end 
```

我尝试了一些变化，例如：

```
indexes :attachment, :type => 'attachment', :_source => { :enabled => false } 
```

当我运行轮胎：import rake 任务时它看起来不错，但它似乎并没有什么不同。有谁知道A）如果这是可能的？B）怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T17:35:16.407

[_source 字段设置](http://www.elasticsearch.org/guide/reference/mapping/source-field.html)包含应从源中排除的字段列表。我猜想在轮胎的情况下，应该这样做：

```
mapping :_source => { :excludes => ['attachment'] } do
  indexes :id, :type => 'integer'
  indexes :title
  indexes :last_update, :type => 'date'
  indexes :attachment, :type => 'attachment'
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T16:01:28.143

@imotov 的解决方案对我不起作用。当我执行 curl 命令时

```
curl -X GET "http://localhost:9200/user_files/user_file/_search?pretty=true" -d '{"query":{"query_string":{"query":"rspec"}}}' 
```

我仍然可以看到搜索结果中包含的附件​​文件的内容。

```
"_source" : {"user_file":{"id":5,"folder_id":1,"updated_at":"2012-08-16T11:32:41Z","attachment_file_size":179895,"attachment_updated_at":"2012-08-16T11:32:41Z","attachment_file_name":"hw4.pdf","attachment_content_type":"application/pdf","created_at":"2012-08-16T11:32:41Z","attachment_original":"JVBERi0xL ..... 
```

这是我的实现：

```
include Tire::Model::Search
include Tire::Model::Callbacks

def self.search(folder, params)
  tire.search() do
    query { string params[:query], default_operator: "AND"} if params[:query].present?
    filter :term, folder_id: folder.id
    highlight :attachment_original, :options => {:tag => "<em>"}
  end
end

mapping :_source => { :excludes => ['attachment_original'] } do
  indexes :id, :type => 'integer'
  indexes :folder_id, :type => 'integer'
  indexes :attachment_file_name
  indexes :attachment_updated_at, :type => 'date'
  indexes :attachment_original, :type => 'attachment'
end

def to_indexed_json
   to_json(:methods => [:attachment_original])
end

def attachment_original
  if attachment_file_name.present?
    path_to_original = attachment.path
    Base64.encode64(open(path_to_original) { |f| f.read })
  end    
end 
```

# javascript - 不透明度使 div 更轻不透明

> ID：11873252
> 
> 赞同：3
> 
> 时间：2012-08-08T21:11:47.393
> 
> 标签：javascript, jquery, css, opacity

我想让悬停时出现的 DIV 透明，以便它下面的图像稍微显示出来，但它只会变得更亮。我有另一个具有类似功能的页面，其中 DIV 水平滑入而不是从底部滑入；此页面具有成功的透明度。由于某种原因，代码没有翻译。

这是我到目前为止所拥有的：http: [//jsfiddle.net/tGEZb/](http://jsfiddle.net/tGEZb/)

我已经尝试了 rgba 而不是我在这里的代码，但没有运气，并且还搜索了这里的帖子，但找不到任何可以解决这个确切问题的东西..不知道还有什么可以尝试的。我敢肯定，很明显，我无法长时间盯着代码看，但希望有人能提供帮助。

如果可能的话，我想避免使用 CSS3，并且现在还保持滑块的流畅功能（而不是切换的东西）。

免责声明：我从网上找到的一篇文章中复制并粘贴了 JavaScript - 不幸的是，这就是我的 JS 能力范围。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T21:17:06.723

您通过将其父级的高度设置为 来隐藏图像`0`。div 没有什么可以透视的，所以白色背景使它更亮。

尝试移动底部的 div。[http://jsfiddle.net/tGEZb/6/](http://jsfiddle.net/tGEZb/6/)

```
$(document).ready(function(){
    $('.espot-up-down').mouseover(function(){
        $('.espot-slide-onhover').stop().animate({
            top: -230
        }, 150);                        
    }).mouseout(function(){
        $('.espot-slide-onhover').stop().animate({
            top: 0
        }, 250)    
    })

});​ 
```

`.espot-up-down`需要`position: relative;`

# php - 如何使用 % 通配符？

> ID：11873254
> 
> 赞同：0
> 
> 时间：2012-08-08T21:11:51.443
> 
> 标签：php, mysql, escaping

```
public function searchItem($itemname) //search item based on itemname
{

    $itemname = (string)$itemname; 
    $select = $this->select() 
    ->from(array('item')) 
    ->where('itemname LIKE "%"?"%', $itemname);
    $row = $this->fetchAll($select);
    if (!$row) { //if row can't be found
        throw new Exception("Could not find row $itemname"); //Catch exception where itemid is not found

    }
    return $row->toArray();
} 
```

关于如何使用这两个 '%' 的任何想法？我尝试使用 ' 和 " 的组合，但它不起作用，无法弄清楚该使用什么。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T21:13:33.840

您可以使用`\%`转义百分号。

请注意，您可以使用 PHP [mysql_real_escape_string](http://us2.php.net/mysql_real_escape_string)为您执行此操作。

# javascript - 在变量 jquery 中运行 .hover()

> ID：11873255
> 
> 赞同：0
> 
> 时间：2012-08-08T21:11:52.097
> 
> 标签：javascript, jquery

我只是想写一些这样的代码：

```
var clickAction = function(){
    $('#OL_Icon_55').append("<em class='well'>Hello World</em>");
}
$("body").one("mouseenter",clickAction); 
```

我想`Hello World`在鼠标悬停时隐藏字符串`#OL_Icon_55`，而不是代码如下所示：

```
var clickAction = function(){
    $('#OL_Icon_55').append("<em class='well'>Hello World</em>", function() {
        $(this).hover(function () {
            $(".well").hide();
        });
    });
}
$("body").one("mouseenter",clickAction); 
```

但这对我不起作用。有没有人有更多的想法或更正该代码以便悬停功能可以工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:21:24.047

看看这个[小提琴](http://jsfiddle.net/EeGYs/1/)。

如果鼠标在里面，将显示“Hello World” `#OL_Icon_55`。

这是JS：

```
var $OL = $('#OL_Icon_55'),
    $span = $("<span class='well'>Hello World</span>");

$("body").one("mouseenter", function() {
    $OL.append($span);
});

$OL.mouseenter(function () {
    $span.show();
}).mouseout(function () {
    $span.hide();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T21:32:33.317

从@depot 窃取了大部分代码。但要短得多

```
$(function(){  // <-- on dom ready
    var $OL = $('#OL_Icon_55'),
    $span = $("<span class='well'>Hello World</span>");  

    $("body").one("mouseenter", function() {  // <-- on one mouse enter
        $OL.append($span);  // <-- append span
    });

    $OL.hover(function () {  // <-- on hover
        $span.toggle();  // <-- toggle (show/hide) span
    });   
}); 
```

[http://jsfiddle.net/EeGYs/3/](http://jsfiddle.net/EeGYs/3/)

# facebook - 负面用户反馈警告：有什么方法可以缩小特定帖子的范围？

> ID：11873260
> 
> 赞同：2
> 
> 时间：2012-08-08T21:12:44.483
> 
> 标签：facebook, feedback

我们收到了一条自动消息“我们的系统已将您的应用 <> 标记为收到大量负面用户反馈。因此，我们可能会被迫对您的应用设置临时限制，以保护平台上的用户体验。我们要求您在发送此通知后 48 小时内立即解决此问题，之后我们的自动化系统将再次评估您的应用。请注意，我们保留在此 48 小时结束之前对您的应用采取行动的权利时期。

具体来说，用户对使用您的应用程序的朋友的流媒体故事做出了负面反应。”

我们正在努力尽快对其进行分类和纠正。我们不知道任何会引入问题的工程变更，我们管理着一个新闻风格的网站，用户可以从中分享任意数量的故事。但我们无法找到任何洞察力，让我们了解某个特定故事是否被分享，以及是否是被报告为垃圾邮件的根本原因。

是否有人知道如何“深入”洞察力并深入了解有关被标记/报告的特定帖子的元数据？

# html - 尝试启动 http 删除但似乎不起作用

> ID：11873264
> 
> 赞同：1
> 
> 时间：2012-08-08T21:13:01.047
> 
> 标签：html, forms, rest

是否可以使用 html 表单触发 http DELETE？我有一个需要 http 删除的应用程序，但是当我尝试使用我的表单发布到它时，它告诉我该方法不允许并尝试删除。这是我的表单代码：

```
<form method='delete' action='/groups/dissolve/$org_ID' />
<input class='btn btn-danger' type='submit' value='close group forever' style='font-size:82.5%' />
</form> 
```

我正在遵循我在这个网站上找到的说明：http: [//amundsen.com/examples/put-delete-forms/](http://amundsen.com/examples/put-delete-forms/)

当我为 FireFox 使用 REST 客户端插件并发送 http 删除时，它可以工作。不适用于我上面写的表格。帮助？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:19:51.203

不——您不能从 HTML 4.x 或 XHTML 表单中编写 HTTP 动词，例如“DELETE”：

*   [是否可以从 HTML 表单触发 HTTP DELETE 请求？](https://stackoverflow.com/questions/277149/is-it-possible-to-trigger-an-http-delete-request-from-an-html-form)

*   [在 HTML 表单中支持 PUT 和 DELETE 的提案](http://amundsen.com/examples/put-delete-forms/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T21:24:53.887

（我认为即使在直接的 HTML 中你仍然想完成它是不可能的。）

你可以用一点 Jquery 来做到这一点：

[如何在 jQuery 中发送 PUT/DELETE 请求？](https://stackoverflow.com/questions/2153917/how-to-send-a-put-delete-request-in-jquery)

覆盖提交按钮的行为并调用您自己的代码来处理删除。

# javascript - 提交按钮无法处理 javascript 进行验证

> ID：11873265
> 
> 赞同：1
> 
> 时间：2012-08-08T21:13:04.960
> 
> 标签：javascript, jquery, forms, division

有谁知道为什么我的提交按钮不会调用 javascript 来验证表单中是否填充了某些字段？

为了更好地了解，我提供了一个网站链接：[http](http://www.flyingcowproduction.com/pls) ://www.flyingcowproduction.com/pls ，然后单击顶部菜单中的“预订”按钮。

形式：

```
<form method="post" action="process.php">
                <div class="grid_6">
                    <div class="element">
                        <label>Name*</label>
                        <input type="text" name="name" class="text" style="width:427px;" />
                    </div>
                </div>
                <div class="clear"></div>
                <div class="grid_3">
                    <div class="element">
                        <label>Email*</label>
                        <input type="text" name="email" class="text" style="width:200px;" />
                    </div>
                </div>
                <div class="grid_3">
                    <div class="element">
                        <label>Phone</label>
                        <input type="text" name="phone" class="text" style="width:200px;" />
                    </div>
                </div>
                <div class="clear"></div>
                <div class="grid_3">
                    <div class="element">
                        <label>Address*</label>
                        <input type="text" name="address" class="text" style="width:200px;" />
                    </div>
                </div>
                <div class="grid_2">
                    <div class="element">
                        <label>City*</label>
                        <input type="text" name="city" class="text" style="width:119px;" />
                    </div>
                </div>
                <div class="grid_1">
                    <div class="element">
                        <label>Zip*</label>
                        <input type="text" name="zipcode" class="text" style="width:55px;" />
                    </div>
                </div>
                <div class="clear"></div>
                <div class="grid_6">
                    <div class="element">
                        <label>Where do you want to go?*</label>
                        <input type="text" name="service" class="text" style="width:427px;" />
                    </div>
                </div>
                <div class="clear"></div>
                <div class="grid_3">
                    <div class="element">
                        <label>Date and time of service*</label>
                        <input type="text" name="datetime" class="text" style="width:200px;" />
                    </div>
                </div>
                <div class="grid_2">
                    <div class="element">
                        <label>Passengers (max)</label>
                        <input type="text" name="passingers" class="text" style="width:75px;" />
                    </div>
                </div>
                <div class="grid_1">
                    &nbsp;
                </div>
                <div class="clear"></div>
                <div class="grid_6">
                    <div class="element">
                        <label>Comment</label>
                        <textarea name="comment" class="text textarea" style="width:427px;" rows="4"  /></textarea>
                    </div>
                </div>
                <div class="clear"></div>
                <div class="grid_6">
                    <div class="element">
                        <input type="submit" id="submit" value="MAKE RESERVATION" />
                        <p>&nbsp;</p>
                    </div>
                </div>
            </form>

<script type="text/javascript"> 
```

$(文档).ready(函数() {

```
//if submit button is clicked
$('#submit').click(function () {        

    //Get the data from all the fields
    var name = $('input[name=name]');
    var email = $('input[name=email]');
    var phone = $('input[name=phone]');
    var address = $('input[name=address]');
    var city = $('input[name=city]');
    var zipcode = $('input[name=zipcode]');
    var service = $('input[name=service]');
    var datetime = $('input[name=datetime]');
    var passingers = $('input[name=passingers]');
    var comment = $('textarea[name=comment]');

    //Simple validation to make sure user entered something
    //If error found, add hightlight class to the text field
    if (name.val()=='') {
        name.addClass('hightlight');
        return false;
    } else name.removeClass('hightlight');

    if (email.val()=='') {
        email.addClass('hightlight');
        return false;
    } else email.removeClass('hightlight');

    if (address.val()=='') {
        address.addClass('hightlight');
        return false;
    } else address.removeClass('hightlight');

    if (city.val()=='') {
        city.addClass('hightlight');
        return false;
    } else city.removeClass('hightlight');

    if (zipcode.val()=='') {
        zipcode.addClass('hightlight');
        return false;
    } else zipcode.removeClass('hightlight');

    if (service.val()=='') {
        service.addClass('hightlight');
        return false;
    } else service.removeClass('hightlight');

    if (datetime.val()=='') {
        datetime.addClass('hightlight');
        return false;
    } else datetime.removeClass('hightlight');

    //organize the data properly
    var data = 'name=' + name.val() + '&email=' + email.val() + '&phone=' + phone.val() + '&address=' + address.val() + '&city=' + city.val() + '&zipcode=' + zipcode.val() + '&service=' + service.val() + '&datetime=' + datetime.val() + '&passingers=' + passingers.val() + '&comment='  + encodeURIComponent(comment.val());

    //disabled all the text fields
    $('.text').attr('disabled','true');

    //show the loading sign
    $('.loading').show();

    //start the ajax
    $.ajax({
        //this is the php file that processes the data and send mail
        url: "process.php", 

        //GET method is used
        type: "GET",

        //pass the data         
        data: data,     

        //Do not cache the page
        cache: false,

        //success
        success: function (html) {              
            //if process.php returned 1/true (send mail success)
            if (html==1) {                  
                //hide the form
                $('.form').fadeOut('slow');                 

                //show the success message
                $('.done').fadeIn('slow');

            //if process.php returned 0/false (send mail failed)
            } else alert('Sorry, unexpected error. Please try again later.');               
        }       
    });

    //cancel the submit button default behaviours
    return false;
}); 
```

});

非常感谢提前

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T21:16:26.683

你应该写：

```
$('form').submit(function () {
    //Get the data from all the fields
    var name = $('input[name=name]');
    ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T21:18:34.027

在您的单击事件处理程序中，您可能希望阻止在代码运行之前提交表单的单击的默认操作。

```
$('#submit').click(function(e) {
    e.preventDefault();
    ...
}); 
```

但是，我会按照 Laurent 所说的去做，而是绑定在表单提交上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T21:28:19.340

你的函数很好，如果有人使用上面提供的 html，就会被调用。但是您提供链接的网站显示了这一点

```
<input type="submit" value="MAKE RESERVATION" id="FormId"> 
```

看到 id="FormId" 它应该是“提交”

好的，现在请试试这个

1) 确保备份内容 2) 删除我们刚刚添加到 index.html 的验证功能 3) 将 index.html 上的最后一个脚本块（从第 358 行开始）替换为以下内容

```
<script type="text/javascript">
    $(document).ready(function () {     
    // Added by Prayas  (Start)
    function menuItemClick(section) {
        content1 = "loader.html " + section;
        toTheSky();
        $("#singleContentContainer").delay(400).fadeIn();
        $('#singleContentInside').load(content1);

          if(section=="#reservations")
            {
                    $('#submit').click(function(e) {
                    e.preventDefault();    

                    //Get the data from all the fields
                    var name = $('input[name=name]');
                    var email = $('input[name=email]');
                    var phone = $('input[name=phone]');
                    var address = $('input[name=address]');
                    var city = $('input[name=city]');
                    var zipcode = $('input[name=zipcode]');
                    var service = $('input[name=service]');
                    var datetime = $('input[name=datetime]');
                    var passingers = $('input[name=passingers]');
                    var comment = $('textarea[name=comment]');

                    //Simple validation to make sure user entered something
                    //If error found, add hightlight class to the text field
                    if (name.val()=='') {
                        name.addClass('hightlight');
                        return false;
                    } else name.removeClass('hightlight');

                    if (email.val()=='') {
                        email.addClass('hightlight');
                        return false;
                    } else email.removeClass('hightlight');

                    if (address.val()=='') {
                        address.addClass('hightlight');
                        return false;
                    } else address.removeClass('hightlight');

                    if (city.val()=='') {
                        city.addClass('hightlight');
                        return false;
                    } else city.removeClass('hightlight');

                    if (zipcode.val()=='') {
                        zipcode.addClass('hightlight');
                        return false;
                    } else zipcode.removeClass('hightlight');

                    if (service.val()=='') {
                        service.addClass('hightlight');
                        return false;
                    } else service.removeClass('hightlight');

                    if (datetime.val()=='') {
                        datetime.addClass('hightlight');
                        return false;
                    } else datetime.removeClass('hightlight');

                    //organize the data properly
                    var data = 'name=' + name.val() + '&email=' + email.val() + '&phone=' + phone.val() + '&address=' + address.val() + '&city=' + city.val() + '&zipcode=' + zipcode.val() + '&service=' + service.val() + '&datetime=' + datetime.val() + '&passingers=' + passingers.val() + '&comment='  + encodeURIComponent(comment.val());

                    //disabled all the text fields
                    $('.text').attr('disabled','true');

                    //show the loading sign
                    $('.loading').show();

                    //start the ajax
                    $.ajax({
                        //this is the php file that processes the data and send mail
                        url: "process.php", 

                        //GET method is used
                        type: "GET",

                        //pass the data         
                        data: data,     

                        //Do not cache the page
                        cache: false,

                        //success
                        success: function (html) {              
                            //if process.php returned 1/true (send mail success)
                            if (html==1) {                  
                                //hide the form
                                $('.form').fadeOut('slow');                 

                                //show the success message
                                $('.done').fadeIn('slow');

                            //if process.php returned 0/false (send mail failed)
                            } else alert('Sorry, unexpected error. Please try again later.');               
                        }       
                    });

                    //cancel the submit button default behaviours
                    return false;
                });
    }

    }

    $("#services1").click(function() {
        menuItemClick("#services")
    });
    $("#services2").click(function() {
        menuItemClick("#services")
    });
    $("#rates1").click(function() {
        menuItemClick("#rates")
    });
    $("#rates2").click(function() {
        menuItemClick("#rates")
    });
    $("#reservations1").click(function() {
        menuItemClick("#reservations")
    });
    $("#reservations2").click(function() {
        menuItemClick("#reservations")
    });
    $("#fleet1").click(function() {
        menuItemClick("#fleets")        
    });
    $("#fleet2").click(function() {
        menuItemClick("#fleets")        
    });

    $("#closeContainer").click(function() {
        downToEarth();
        $("#singleContentContainer").fadeOut();
    });     
    // Added by Prayas  (End)
});

</script> 
```

编辑 2

1）删除我们刚刚添加的底部的脚本块。2) 将整个预订 div 从 loader.html 复制到一个名为 reservations.html 的新文件中。3) 将这个 div 中的原始验证函数放回其在“reservations.html”中的位置。4) 将此脚本块放在 index.html 的末尾

```
<script type="text/javascript">
    $(document).ready(function () {     
    // Added by Prayas  (Start)
    function menuItemClick(section) {

    if(section=="#reservations")
    {
            content1 = "reservations.html;
    }
    else
    {
            content1 = "loader.html " + section;
        toTheSky();
        $("#singleContentContainer").delay(400).fadeIn();
        $('#singleContentInside').load(content1);
    }

    $("#services1").click(function() {
        menuItemClick("#services")
    });
    $("#services2").click(function() {
        menuItemClick("#services")
    });
    $("#rates1").click(function() {
        menuItemClick("#rates")
    });
    $("#rates2").click(function() {
        menuItemClick("#rates")
    });
    $("#reservations1").click(function() {
        menuItemClick("#reservations")
    });
    $("#reservations2").click(function() {
        menuItemClick("#reservations")
    });
    $("#fleet1").click(function() {
        menuItemClick("#fleets")        
    });
    $("#fleet2").click(function() {
        menuItemClick("#fleets")        
    });

    $("#closeContainer").click(function() {
        downToEarth();
        $("#singleContentContainer").fadeOut();
    });     
    // Added by Prayas  (End)
});

</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T21:19:19.117

您必须在表单的提交事件中执行此操作。

首先给你的表单一个id，说“FormId”

```
$("#FormId").submit(function () {        

        //Get the data from all the fields
        var name = $('input[name=name]');
        var email = $('input[name=email]');
        var phone = $('input[name=phone]');
        var address = $('input[name=address]');
        var city = $('input[name=city]');
        var zipcode = $('input[name=zipcode]');
        var service = $('input[name=service]');
        var datetime = $('input[name=datetime]');
        var passingers = $('input[name=passingers]');
        var comment = $('textarea[name=comment]');

        //Simple validation to make sure user entered something
        //If error found, add hightlight class to the text field
        if (name.val()=='') {
            name.addClass('hightlight');
            return false;
        } else name.removeClass('hightlight');

        if (email.val()=='') {
            email.addClass('hightlight');
            return false;
        } else email.removeClass('hightlight');

        if (address.val()=='') {
            address.addClass('hightlight');
            return false;
        } else address.removeClass('hightlight');

        if (city.val()=='') {
            city.addClass('hightlight');
            return false;
        } else city.removeClass('hightlight');

        if (zipcode.val()=='') {
            zipcode.addClass('hightlight');
            return false;
        } else zipcode.removeClass('hightlight');

        if (service.val()=='') {
            service.addClass('hightlight');
            return false;
        } else service.removeClass('hightlight');

        if (datetime.val()=='') {
            datetime.addClass('hightlight');
            return false;
        } else datetime.removeClass('hightlight');

        //organize the data properly
        var data = 'name=' + name.val() + '&email=' + email.val() + '&phone=' + phone.val() + '&address=' + address.val() + '&city=' + city.val() + '&zipcode=' + zipcode.val() + '&service=' + service.val() + '&datetime=' + datetime.val() + '&passingers=' + passingers.val() + '&comment='  + encodeURIComponent(comment.val());

        //disabled all the text fields
        $('.text').attr('disabled','true');

        //show the loading sign
        $('.loading').show();

        //start the ajax
        $.ajax({
            //this is the php file that processes the data and send mail
            url: "process.php", 

            //GET method is used
            type: "GET",

            //pass the data         
            data: data,     

            //Do not cache the page
            cache: false,

            //success
            success: function (html) {              
                //if process.php returned 1/true (send mail success)
                if (html==1) {                  
                    //hide the form
                    $('.form').fadeOut('slow');                 

                    //show the success message
                    $('.done').fadeIn('slow');

                //if process.php returned 0/false (send mail failed)
                } else alert('Sorry, unexpected error. Please try again later.');               
            }       
        });

        //cancel the submit button default behaviours
        return false;
    }); 
```

# objective-c - 从 URL 保存文件

> ID：11873273
> 
> 赞同：1
> 
> 时间：2012-08-08T21:13:38.367
> 
> 标签：objective-c, macos, url, download, save

我试图在用户按下按钮时将图像保存到用户计算机。到目前为止，我已经构建了这样的 URL：

```
NSString *baseURL = @"http://url/";
NSString *username = [txtUsername stringValue];
NSString *userImage = [username stringByAppendingString:@".png"];
NSString *userURL = [baseURL stringByAppendingString:userImage]; 
```

从这里，我需要能够将链接文件下载到用户计算机。有没有办法在单击按钮时打开“另存为”对话框，然后将链接文件下载到指定的保存位置？

如果没有，有没有办法将链接文件保存到用户计算机的桌面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T21:27:54.937

[注意：您提到了“用户计算机”，但您标记为“osx” - osx 不提供在用户指导下保存或打开文件的框架。所以，对于 Mac OS X...]

查看 NSSavePanel 以允许用户选择 Mac OS X 文件位置来保存文件。

查看 NSURLDownload 以将数据从 NSURLRequest 下载到文件中。

# php - 使用 CodeIgniter Tank-Auth 作为一个包？

> ID：11873275
> 
> 赞同：0
> 
> 时间：2012-08-08T21:14:01.533
> 
> 标签：php, codeigniter, packages, tankauth

是否可以让 Tank-Auth 作为 CodeIgniter 中的一个包工作？

我将数据库模式安装到我的 MySQL 数据库中，并将 tank_auth 的所有文件夹复制到我的应用程序“third_party”文件夹“[CI]\application\third_party\tank_auth”中。截图：

![在此处输入图像描述](../Images/ff51f2632f91d1813948c9a6b9ebfdeb.png)

会话工作正常。

我可以加载 tank_auth 模型

```
$this->load->model('tank_auth/users'); 
```

我可以加载 tank_auth 视图

```
$this->load->view('auth/login_form'); 
```

但我无法访问“auth”和“welcome”控制器。我的应用程序显示 404。我的日志文件除了 404 之外没有任何警告或错误。

任何想法？

西蒙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T12:56:31.450

我在 CI 文档中发现了它为什么不起作用以及如何正确修复它：[这里（应用程序“包”部分）](http://codeigniter.com/user_guide/libraries/loader.html)

您只能将资源放在那里，而不是控制器。然后我将控制器（auth 和 welcome）移动到我的 CI 应用程序/控制器文件夹中。现在一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T21:58:33.540

据我所知，您正在尝试在 codeigntier MVC 中设置分层模型-视图-控制器 (HMVC)。我认为核心 codeigniter 本身不支持这一点，而是您可能需要安装模块化扩展管理。签出 Codeigniter 的模块化扩展 (HMVC)。这允许您将模块创建为可以访问核心 CI 框架类的“伪控制器”。

[在http://getsparks.org/set-up-mx](http://getsparks.org/set-up-mx)和当然谷歌结帐更多:)

# visual-studio-2010 - Visual Studio 2010 在 Visual Web 部件项目中丢失引用

> ID：11873276
> 
> 赞同：1
> 
> 时间：2012-08-08T21:14:09.750
> 
> 标签：visual-studio-2010, reference

我遇到了 Visual Studio 2010 丢失引用的问题。我已经看过好几次了，这可能与它是一个可视 Web 部件无关，但这通常是我正在使用的，所以我认为我应该指出这一点。

场景是这样的：我创建一个新的 VWP 项目，然后添加两个新的类库项目（业务逻辑和数据访问层），然后相互添加引用。它通常可以正常工作一段时间，但在调试的某个时刻，它会突然无法构建，并出现“您是否缺少参考？” 消息，即使它仍然显示参考。我的解决方法是重新添加引用（即使它已经在引用列表中），并且会再次工作一段时间，直到另一个（看似）随机调试会话再次使构建失败。

类库和 VWP 都针对 .NET 3.5 Framework 和 x64 平台。VS 已完全修补。

# r - 使用 R 透视 CSV 文件

> ID：11873279
> 
> 赞同：2
> 
> 时间：2012-08-08T21:14:22.630
> 
> 标签：r, csv, data-manipulation, traminer

我有一个看起来像这样的文件：

```
 type          created_at repository_name
1         IssuesEvent 2012-03-11 06:48:31       bootstrap
2         IssuesEvent 2012-03-11 06:48:31       bootstrap
3         IssuesEvent 2012-03-11 06:48:31       bootstrap
4         IssuesEvent 2012-03-11 06:52:50       bootstrap
5         IssuesEvent 2012-03-11 06:52:50       bootstrap
6         IssuesEvent 2012-03-11 06:52:50       bootstrap
7   IssueCommentEvent 2012-03-11 07:03:57       bootstrap
8   IssueCommentEvent 2012-03-11 07:03:57       bootstrap
9   IssueCommentEvent 2012-03-11 07:03:57       bootstrap
10        IssuesEvent 2012-03-11 07:03:58       bootstrap
11        IssuesEvent 2012-03-11 07:03:58       bootstrap
12        IssuesEvent 2012-03-11 07:03:58       bootstrap
13         WatchEvent 2012-03-11 07:15:44       bootstrap
14         WatchEvent 2012-03-11 07:15:44       bootstrap
15         WatchEvent 2012-03-11 07:15:44       bootstrap
16         WatchEvent 2012-03-11 07:18:45        hogan.js
17         WatchEvent 2012-03-11 07:18:45        hogan.js
18         WatchEvent 2012-03-11 07:18:45        hogan.js 
```

我正在使用的数据集可以在[https://github.com/aronlindberg/VOSS-Sequencing-Toolkit/blob/master/twitter_exploratory_analysis/twitter_events_mini.csv](https://github.com/aronlindberg/VOSS-Sequencing-Toolkit/blob/master/twitter_exploratory_analysis/twitter_events_mini.csv)上访问。

我想为“repository_name”列中的每个条目创建一个表（例如bootstrap、hogan.js）。在该列中，我需要具有与该条目相对应的“类型”列中的数据（即，只有当前“类型”列中的行在当前“repository_name”列中也具有值“bootstrap”应属于新的“引导”列）。因此：

*   时间戳仅用于排序，不需要跨行同步（实际上它们可以删除，因为数据已经根据时间戳排序）
*   即使“IssuesEvent”重复 10 次，我也需要保留所有这些，因为我将使用 R 包 TraMineR 进行序列分析
*   列可以不等长
*   不同存储库的列之间没有关系（“repository_name”）

换句话说，我想要一个看起来像这样的表：

```
 bootstrap            hogan.js
1    IssuesEvent          PushEvent
2    IssuesEvent          IssuesEvent
3    OssueCommentEvent    WatchEvent 
```

我怎样才能在 R 中做到这一点？

我使用 reshape 包的一些失败尝试可以在[https://github.com/aronlindberg/VOSS-Sequencing-Toolkit/blob/master/twitter_exploratory_analysis/reshaping_bigqueries.R](https://github.com/aronlindberg/VOSS-Sequencing-Toolkit/blob/master/twitter_exploratory_analysis/reshaping_bigqueries.R)上找到。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T22:29:27.920

我刚加入stackoverflow；希望我的回答有点用处。

通过表格，我假设您的意思是您想要一个数据框。但是，列的长度似乎不太可能相等，而且行似乎无论如何都没有多大意义。也许列表会更好？

这是一个混乱的解决方案：

```
names <- unique(olddataframe$repository_name)
results <- sapply(1:length(names), function(j){
    sapply(which(olddataframe$repository_name == names[j]), function(i){
        olddataframe$type[i]
   )
})
names(results) <- names
results 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-09T00:31:55.607

您的样本数据：

```
data <- structure(list(type = structure(c(2L, 2L, 2L, 2L, 2L, 2L, 1L, 
1L, 1L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 3L, 3L), .Label = c("IssueCommentEvent", 
"IssuesEvent", "WatchEvent"), class = "factor"), created_at = structure(c(1L, 
1L, 1L, 2L, 2L, 2L, 3L, 3L, 3L, 4L, 4L, 4L, 5L, 5L, 5L, 6L, 6L, 
6L), .Label = c("2012-03-11 06:48:31", "2012-03-11 06:52:50", 
"2012-03-11 07:03:57", "2012-03-11 07:03:58", "2012-03-11 07:15:44", 
"2012-03-11 07:18:45"), class = "factor"), repository_name = structure(c(1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 
2L), .Label = c("bootstrap", "hogan.js"), class = "factor")), .Names = c("type", 
"created_at", "repository_name"), class = "data.frame", row.names = c(NA, 
-18L)) 
```

我从您的预期输出中收集到，`type`当它多次显示相同的`created_at`值时，您只需要一个，换句话说，您想要删除重复项：

```
data <- unique(data) 
```

然后，要按照它们出现的顺序提取所有`type`条目 ，您可以简单地使用：`repository_name`

```
data.split <- split(data$type, data$repository_name)
data.split
# $bootstrap
# [1] IssuesEvent       IssuesEvent       IssueCommentEvent
# [4] IssuesEvent       WatchEvent       
# Levels: IssueCommentEvent IssuesEvent WatchEvent
# 
# $hogan.js
# [1] WatchEvent
# Levels: IssueCommentEvent IssuesEvent WatchEvent 
```

它返回一个列表，该列表是具有不同长度的向量集合的 R 数据结构选择。

**编辑：**现在您已经提供了输出数据的示例，很明显您的预期输出确实是一个 data.frame。`NA`您可以使用以下函数将上面的列表转换为用 s 填充的 data.frame ：

```
list.to.df <- function(arg.list) {
   max.len  <- max(sapply(arg.list, length))
   arg.list <- lapply(arg.list, `length<-`, max.len)
   as.data.frame(arg.list)
}

df.out <- list.to.df(data.split)
df.out
#           bootstrap   hogan.js
# 1       IssuesEvent WatchEvent
# 2       IssuesEvent       <NA>
# 3 IssueCommentEvent       <NA>
# 4       IssuesEvent       <NA>
# 5        WatchEvent       <NA> 
```

然后，您可以使用将其保存到文件中

```
write.csv(df.out, file = "out.csv", quote = FALSE, na = "", row.names = FALSE) 
```

获得与您在 github 上发布的完全相同的输出格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T03:59:03.130

使用@flodel 的`data`对象，您也可以尝试`aggregate()`，但是对于许多事件类型，这将很快变得不可读：

```
aggregate(list(Type = unique(data)$type), 
          list(Repository = unique(data)$repository_name), 
          function(x) paste0(x))
#   Repository                                                                 Type
# 1  bootstrap IssuesEvent, IssuesEvent, IssueCommentEvent, IssuesEvent, WatchEvent
# 2   hogan.js                                                           WatchEvent 
```

您也可以尝试`reshape()`使用 (transpose) 进行一些技巧`t()`，如下所示。

```
temp = unique(data)
temp = reshape(temp, direction = "wide", 
               idvar="repository_name", timevar="created_at")
# If you want to keep the times, remove `row.names=NULL` below
temp1 = data.frame(t(temp[-1]), row.names=NULL)
names(temp1) = t(temp[1])
temp1
#           bootstrap   hogan.js
# 1       IssuesEvent       <NA>
# 2       IssuesEvent       <NA>
# 3 IssueCommentEvent       <NA>
# 4       IssuesEvent       <NA>
# 5        WatchEvent       <NA>
# 6              <NA> WatchEvent 
```

但是，我发现所有这些 NA 都令人讨厌。我想说@flodel 的答案是最直接的，从长远来看可能是最有用的（也就是说，一旦你以这种形式获得数据，就不知道你想做什么）*。*

# 更新（更多诡计）

### （实际上，这是一个“非常适合拖延”的时刻）

我的最终（非常低效）答案如下。

如上所述继续，但删除日期/时间的东西，并从因素转换为字符。

```
# Using @flodel's data
temp1 = unique(data)[-2]
# Remove the factors
temp1[sapply(temp1, is.factor)] = lapply(temp1[sapply(temp1, is.factor)], 
                                         as.character)
# Split and unlist your data
temp2 = split(temp1[-c(2:3)], temp1$repository_name)
temp3 = sapply(temp2, as.vector) 
```

`rbind()`并将`cbind()`“回收”不同长度的对象以使它们具有相同的长度，但我们不希望这样。因此，我们需要强制 R 相信长度是相同的。所以，找出最大长度。`temp3`当我们这样做时，提取对象中名称的清理版本。

```
# What is the max number of rows we need?
LEN = max(sapply(temp3, length))
# What are the names we want for our columns?
NAMES = gsub(".type", "", names(temp3)) 
```

现在，将项目从`temp3`您的工作区中提取出来，并确保它们的长度相同。

```
# Use assign to unlist the vectors to the workspace
for (i in 1:length(temp3)) assign(NAMES[i], temp3[[i]])
# Make sure they have the same lengths
length(hogan.js) = LEN
length(bootstrap) = LEN 
```

最后，用于`cbind()`将您的数据放在一起。

```
# Use cbind to put these together
data.frame(cbind(bootstrap, hogan.js))
#           bootstrap   hogan.js
# 1       IssuesEvent WatchEvent
# 2       IssuesEvent       <NA>
# 3 IssueCommentEvent       <NA>
# 4       IssuesEvent       <NA>
# 5        WatchEvent       <NA> 
```

# mysql - 从 MySQL 表中获取计数，该表在某个日期或之前添加并在某个日期或之后删除

> ID：11873280
> 
> 赞同：1
> 
> 时间：2012-08-08T21:14:22.767
> 
> 标签：mysql, select, date-comparison

我对 SQL 很陌生，但我不太了解

TABLE`employee_table`包含以下列

```
`pkId` INT(10),
`name` VARCHAR(60),
`pfStatus` TINYINT(3),
`is_active` TINYINT(3),
`addedDate` DATE,
`deletedDate` DATE 
```

并且有一个具有给定值的条目

> pkId = 1, name = abhips, pfStatus = 0, is_active = 1, addedDate = 2012-08-08, deletedDate = 2012-08-18

-

> SELECT COUNT(*) FROM employee_table WHERE pfStatus = 0 AND addedDate >= '2012-07-07' AND deletedDate <= '2012-08-09';

我想获取在特定日期或之前注册并在特定日期或之后删除且 pfStatus = 0 的员工数量。

但是我得到的计数是 0 而不是 1 ，请帮我处理这个查询，要使这个查询正确，需要做哪些更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T21:16:35.977

你`<=`和`>=`是错误的方式。

> 我想获取在特定日期**或之前注册并在**特定日期**或之后删除**且 pfStatus = 0 的员工数量。

试试这个：

```
SELECT COUNT(*)
FROM employee_table
WHERE pfStatus = 0
AND addedDate <= '2012-07-07'
AND deletedDate >= '2012-08-09'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T17:56:33.250

这将为您提供在 2012-07-07 - 2012-08-09 期间活跃的员工。

**SELECT COUNT(*)
FROM employee_table
WHERE pfStatus = 0
AND addedDate <= '2012-08-09'
AND deletedDate >= '2012-07-07';**

# python - 通过 CruiseControl 将变量传递到 Python 文件

> ID：11873282
> 
> 赞同：0
> 
> 时间：2012-08-08T21:14:29.710
> 
> 标签：python, xml, continuous-integration, cruisecontrol, build-script

我有一个执行文件的 CruiseControl 项目`build.py`，无论是夜间还是 CI。我想在我的构建脚本中抛出某种标志，它可以确定要调用哪个函数，所以我不必有两个`.py`基本上做同样事情的文件。

执行文件时是否可以通过 CruiseControl 传入变量或参数`.py`？

```
<project name="x" default="build">
<target name="build-ci">
    <exec executable="python" failonerror="true">
        <arg value="build-cc.py" />
        <arg value="$(label)" />
    </exec>
</target> 
```

```
<project name="x-nightly" default="build">
    <target name="build-nightly">
        <exec executable="python" failonerror="true">
            <arg value="build-cc.py" />
            <arg value="$(label)" />
        </exec>
    </target>
</project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T21:27:06.120

您可以将属性从 Cruisecontrol 传递给 ant。**build-type**将是您的 ant 脚本中的一个属性。

```
<schedule interval="${schedule_interval.seconds}">
    <ant anthome="${anthome.dir}" buildfile="${buildfiles.dir}${antbuild.file}" target="my-ant-target" uselogger="true">
        <property name="build-type" value="nightly"/>               
    </ant>
</schedule> 
```

因此，如果您有两个 Cruisecontrol 项目，一个用于 nightly 项目，一个用于 CI，它们可以分别为 build-type 传递不同的值。

不过，你的问题对我来说很难理解。你能发布一些你的巡航控制脚本吗？

# meteor - 同一 Meteor Collection 的多个订阅

> ID：11873285
> 
> 赞同：0
> 
> 时间：2012-08-08T21:14:41.323
> 
> 标签：meteor

### 目标

我有一个名为“n”的顶级集合`Players`和一个名为“n”的会话变量。除了我的顶级集合之外，我还希望有一个`Players`基于的 top-'n' 集合`player.points`，它会根据`Session.set('n', n)`（当然，基础`Players`数据的任何更改）进行更新。

### 基本原理

我想要一个的原因`TopNPlayers`是因为在每个播放器模板中（调用它`Template.player_item`）我想提供几个变量：

*   `Template.player_item.isInTopN`，它设置一个 CSS 类来突出显示一个播放器，如果它位于前 n 个点中
*   `Template.player_item.PointsVsBaseline`，它给出了该玩家的分数与 中的第 n 个玩家之间的差异`TopNPlayers`。

由于我不想手动管理包含`Players`按 的值过滤的全局变量`Session.get('n')`，而且我当然不想每次渲染另一个时都计算 top-'n' `player_item`，所以我想设置一个额外的订阅到`Players`收藏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T03:16:31.380

我不确定你是否需要一个单独的集合，游标不会起到作用吗？

就像是：

```
var topNPlayers = function() { 
  return Players.find({}, {limit: Session.get('n')}); 
}

Template.player_item.isInTopN = function() {

  // there are a bunch of ways you could do this step...
  _.include(topNPlayers().fetch(), this);
} 
```

# php - 如何在 Zend Framework 中路由动态子域？

> ID：11873288
> 
> 赞同：0
> 
> 时间：2012-08-08T21:15:10.173
> 
> 标签：php, apache, zend-framework, subdomain, zend-route

我对 zend_router_hostname 上的“动态子域”有疑问，我有类似的代码（我没有这样的子域，但不想使用子域作为路由参数）：

```
protected function _initRoutes() {
        $front = Zend_Controller_Front::getInstance();
        $router = $front->getRouter();
        $config = $this->getOptions();
        Zend_Registry::set("config", $config);
        $routerHost = new Zend_Controller_Router_Hostname(':language.mysite.local',
                        array('controller' => 'index',
                            'action' => 'index',
                            'language'=>'pl')
);
        $router->addDefaultRoutes();
        $routes = $router->getRoutes();
        foreach ($routes as $key => $routeEntry) {
            $router->addRoute($key, $routeHost->chain($routeEntry));
        }
    } 
```

但是当我尝试调用例如：pl.mysite.local 时，我得到 Server not found 错误。我的 /etc/hosts 文件是：

```
127.0.0.1       localhost
127.0.2.1       mysite.local
127.0.3.1       mysite.dev
127.0.4.1       mysite.production 
```

我的虚拟主机配置是：

```
VirtualHost *:80>
   DocumentRoot "/var/www/mysite/public"
   ServerName mysite.local
   ServerAlias *.mysite.local
   # This should be omitted in the production environment
   SetEnv APPLICATION_ENV development
   <Directory "/var/www/mysite/public">
       Options Indexes MultiViews FollowSymLinks
       AllowOverride All
       Order allow,deny
       Allow from all
   </Directory>

</VirtualHost> 
```

我尝试将 dnsmasq 与以下条目一起使用：

```
address=/local/127.0.0.1 
```

但是问题仍然存在，我不知道如何解决这种情况，任何线索我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T06:01:48.017

向 /etc/hosts 添加通配符是不可能的，但在我们的例子中也是必需的。但是，这是如何去做的：

安装[dnsmasq](http://www.thekelleys.org.uk/dnsmasq/doc.html)

然后，

```
cp /usr/share/doc/dnsmasq-base/examples/dnsmasq.conf.example /usr/local/etc/dnsmasq.conf 
```

然后，编辑您的 /usr/local/etc/dnsmasq.conf 并添加：

```
address=/mysite.local/127.0.0.1
listen-address=127.0.0.1 
```

启动 DNSMASQ：

```
~$ sudo ./usr/local/sbin/dnsmasq 
```

此外，不要使用 Zend_Controller_Router_Hostname，而是使用[Zend_Controller_Router_Route_Hostname](http://framework.zend.com/manual/en/zend.controller.router.html#zend.controller.router.routes.hostname)

浏览文档，你应该没问题！

```
$toRoute = new Zend_Controller_Router_Route_Hostname(
    ':language.mysite.local',
    array(
        'controller' => 'index',
        'action' => 'index',
        'language' => 'pl')
    ) ); 
```

PS：不要忘记在 /etc/resolv.conf 中将名称服务器提及为 127.0.0.1 。有时，重新启动系统会有所帮助！

享受编码！:)

# asp.net - 未找到网页 - HTTP 404，ASP.NET 页面不适用于 IIS7.5

> ID：11873289
> 
> 赞同：0
> 
> 时间：2012-08-08T21:15:21.920
> 
> 标签：asp.net, iis, http-status-code-404

我正在尝试在我们的 IIS7.5 服务器上创建一个新网页。我正在使用与现有和工作站点相同的设置，但新站点无法正常工作。如果它正在运行，我会得到同样的错误，就好像它甚至不存在一样：

> “/”应用程序中的服务器错误。
> 无法找到该资源。
> 说明：HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保其拼写正确。
> 请求的 URL：/HomePage.aspx

我错过了什么？

谢谢广州

* * *

它现在适用于 Firefox、Chrome、Opera，但不适用于 IE。

它使用 Windows 身份验证。在 IE9 上，在获得 401-未授权页面之前，我被询问了几次我的凭据。

为什么它适用于其他 3 个浏览器而不是这个？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T17:22:18.547

尝试在 IIS 上的应用程序中打开您的网站。您可以在网站属性、主目录选项卡、应用程序设置中找到它。如果您找到一个创建按钮（单击它）。

还要验证执行权限。将其设置为仅脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T21:20:08.050

确保 IIS 和 WebSite 都已启动。

# jquery - jQuery scrollTop 几个 css 和动画变化

> ID：11873290
> 
> 赞同：0
> 
> 时间：2012-08-08T21:15:33.087
> 
> 标签：jquery, css-position, scrolltop

出现了一些新问题。我想通过滚动特定数量来更改几个项目。

我有这个代码：

```
$(document).ready(function() {
   $(window).scroll(function () {
    if ($(this).scrollTop() > 160) {
        $('#test').css({
            'position' : 'fixed',
            'top' : '0'
        })
        $('#test2').animate({
            'width' : '105px',
            'margin-left' : '20px'
        })
    } else {
        $('#test').css({
            'position' : 'absolute',
            'top' : '100px'
        })
        $('#test2').animate({
            'width' : '0px',
            'margin-left' : '0px'
        })
    }
    });
}); 
```

#test div 完美运行。它更改为位置：滚动 160 像素时固定。如果你向后滚动，它就会变得绝对。但是#test2 只是改变它的宽度一次。当我向后滚动时，没有任何变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T21:33:56.167

您缺少 4 个分号：

```
$(document).ready(function() {
   $(window).scroll(function () {
    if ($(this).scrollTop() > 160) {
        $('#test').css({
            'position' : 'fixed',
            'top' : '0'
        });
        $('#test2').animate({
            'width' : '105px',
            'margin-left' : '20px'
        });
    } else {
        $('#test').css({
            'position' : 'absolute',
            'top' : '100px'
        });
        $('#test2').animate({
            'width' : '0px',
            'margin-left' : '0px'
        });
    }
    });
}); 
```

# ruby - 为规范确定 gem 的文件列表

> ID：11873294
> 
> 赞同：9
> 
> 时间：2012-08-08T21:15:36.267
> 
> 标签：ruby, gem, packaging, file-listing

我一直习惯于`git`确定哪些文件应该进入 gem 包：

```
gem.files = `git ls-files`.split "\n" 
```

不幸的是，[这种方法最近被证明是不合适](https://github.com/matheusmoreira/acclaim/issues/6)的。我需要一个独立的纯 Ruby 解决方案。

我的第一个想法是简单地 glob 整个目录，但仅此一项就可能包含不需要的文件。所以，在研究了这个问题之后，我想出了这个：

```
# example.gemspec

directory = File.dirname File.expand_path __FILE__
dotfiles = %w(.gitignore .rvmrc)
ignore_file = '.gitignore'
file_list = []

Dir.chdir directory do
  ignored = File.readlines(ignore_file).map(&:chomp).reject { |glob| glob =~ /\A(#|\s*\z)/ }
  file_list.replace Dir['**/**'] + dotfiles
  file_list.delete_if do |file|
    File.directory?(file) or ignored.any? { |glob| File.fnmatch? glob, file }
  end
end

# Later...

gem.files = file_list 
```

这对于`gemspec`. 它也不完全支持[`gitignore`'s 模式格式](http://schacon.github.com/git/gitignore.html)。它目前似乎有效，但我不想以后遇到问题。

是否有一种更简单但更强大的方法来计算 gem 的文件列表？大多数宝石显然使用`git ls-files`，而那些既不使用类似于我的解决方案也不手动指定文件的宝石。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-12T10:16:20.903

你好，

您可以使用纯 Ruby 列出项目的所有文件：

```
gem.files = Dir['**/*'].keep_if { |file| File.file?(file) } 
```

或者您可以手动完成，[Ruby on Rails gems](https://github.com/rails/strong_parameters/blob/master/strong_parameters.gemspec#L15)使用此解决方案：

```
gem.files = Dir['lib/**/*'] + %w(.yardopts Gemfile LICENSE README.md Rakefile my_gem.gemspec) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-08-03T19:25:35.827

## 带耙子

最简单的解决方案取决于 rake 列出目录中的所有文件，但排除文件中的所有内容`.gitignore`：

```
require 'rake/file_list'
Rake::FileList['**/*'].exclude(*File.read('.gitignore').split) 
```

## 红宝石宝石

官方 ruby​​gems 解决方案，手动列出和排除：

```
require 'rake'
spec.files = FileList['lib/*.rb',
                      'bin/*',
                      '[A-Z]*',
                      'test/*'].to_a

# or without Rake...
spec.files = Dir['lib/*.rb'] + Dir['bin/*']
spec.files += Dir['[A-Z]*'] + Dir['test/**/*']
spec.files.reject! { |fn| fn.include? "CVS" } 
```

## 捆绑器

Bundler 解决方案，手动列出：

```
s.files = Dir.glob("{lib,exe}/**/*", File::FNM_DOTMATCH).reject {|f| File.directory?(f) } 
```

注意：拒绝目录是没有用的，因为 gem 默认会忽略它们。

## 流浪汉

在纯红宝石中模仿`git ls-files`和照顾的流浪解决方案：`.gitignore`

```
 # The following block of code determines the files that should be included
  # in the gem. It does this by reading all the files in the directory where
  # this gemspec is, and parsing out the ignored files from the gitignore.
  # Note that the entire gitignore(5) syntax is not supported, specifically
  # the "!" syntax, but it should mostly work correctly.
  root_path      = File.dirname(__FILE__)
  all_files      = Dir.chdir(root_path) { Dir.glob("**/{*,.*}") }
  all_files.reject! { |file| [".", ".."].include?(File.basename(file)) }
  all_files.reject! { |file| file.start_with?("website/") }
  all_files.reject! { |file| file.start_with?("test/") }
  gitignore_path = File.join(root_path, ".gitignore")
  gitignore      = File.readlines(gitignore_path)
  gitignore.map!    { |line| line.chomp.strip }
  gitignore.reject! { |line| line.empty? || line =~ /^(#|!)/ }

  unignored_files = all_files.reject do |file|
    # Ignore any directories, the gemspec only cares about files
    next true if File.directory?(file)

    # Ignore any paths that match anything in the gitignore. We do
    # two tests here:
    #
    #   - First, test to see if the entire path matches the gitignore.
    #   - Second, match if the basename does, this makes it so that things
    #     like '.DS_Store' will match sub-directories too (same behavior
    #     as git).
    #
    gitignore.any? do |ignore|
      File.fnmatch(ignore, file, File::FNM_PATHNAME) ||
        File.fnmatch(ignore, File.basename(file), File::FNM_PATHNAME)
    end
  end 
```

## 路径规范

使用 pathspec gem`Match Path Specifications, such as .gitignore, in Ruby!`

见[https://github.com/highb/pathspec-ruby](https://github.com/highb/pathspec-ruby)

## 参考

参考： [Bundler](https://github.com/bundler/bundler/blob/e1c518363641208429f397170354054b3d28effd/bundler.gemspec#L37) [Vagrant](https://github.com/hashicorp/vagrant/blob/89cf1e70c578169c22ef40a32c1849fd1e4d7365/vagrant.gemspec#L53-L84) [RubyGems](https://guides.rubygems.org/specification-reference/#files) [Rake 简单的解决方案](http://shorts.jeffkreeftmeijer.com/2014/glob_a_directory_but_exclude_files_listed_in_gitignore/)

# jquery - Aptana Studio 3 中 FTP 项目的 jQuery 代码辅助

> ID：11873295
> 
> 赞同：2
> 
> 时间：2012-08-08T21:15:40.613
> 
> 标签：jquery, aptana3, code-assist

我正在寻找一种在 Aptana Studio 3 中为 jQuery 添加代码辅助的方法。我知道这里有很多线程讨论添加对**Projects**的支持，但我所有的开发都是通过**FTP**完成的。我不会在 Aptana 中创建项目来在我的网站上工作。

如何为 Aptana 添加代码辅助以完成此类工作？

如果 SO 中确实存在这样的说明，我很抱歉 - 我没有看到它们。请指点我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:47:21.530

我设法让它在我的 Mac 上工作。我将传输用于 FTP。由于它将文件保存在缓存文件夹中，因此我在那里创建了我的项目文件夹，因此 Aptana 实际上可以在本地查看文件。

Transmit 的临时文件夹对我来说是：/Users/plamen/Library/Caches/Cleanup At Startup/Transmit

尽管缓存文件夹可能会在某个时候与我的项目文件夹一起被删除，但这是我解决此问题的唯一解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T09:54:46.870

试图在这里得到同样的结果。我正在处理 ftp connetcions 并且代码辅助在“projectName->connections->yourconnection”中不起作用...

我已经尝试了 Aptana 支持中所说的“project->clean”功能......但没有任何改变。现在我将一个标准项目与一个连接项目进行比较，以确定是否缺少某些链接。对于我看到的情况，在这种情况下存在一些问题，就好像你创建了一个新的 std 类你有代码辅助但你在文档中没有信息。例如在 php 中发生这种情况：

$a = 新的 DOMDocument(); // 我有代码助手和 DOM* 类的列表

$a-> // 此时没有代码辅助，没有属性列表，也没有方法列表...奇怪

如果你点击“ctrl+space”来调出代码助手......使用“No Proposal”这让我认为aptana在“连接模式”下的文档路径有问题......

如果我得到一些东西，我会告诉你...如果你知道如何使这项工作，请做同样的事情...

# html - 验证器说“Stray end tag script”，但我没有在我的页面上使用脚本

> ID：11873297
> 
> 赞同：1
> 
> 时间：2012-08-08T21:15:46.950
> 
> 标签：html, w3c-validation

我在 W3C HTML 验证器上收到一个奇怪的错误：

> 第 167 行，第 74 列：杂散结束标记脚本。`…ipt type="text/javascript" src="http://stats.hosting24.com/count.php"></script>`
> 
> 第 167 行，第 74 列：在最后一个错误后无法恢复。任何进一步的错误都将被忽略。 `…ipt type="text/javascript" src="http://stats.hosting24.com/count.php"></script>`

奇怪的是，我没有第 167 行。我的文档在第 165 行结束，页面上没有脚本标签。也没有 count.php 文件。

有人知道怎么修这个东西吗？

**编辑**：[W3C 验证器链接](http://validator.w3.org/check?uri=http://www.aleczandru.host56.com/&charset=%28detect%20automatically%29&doctype=Inline&group=0)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T21:44:20.173

脚本标签在`BODY`标签之外。它需要在里面。将脚本标记放在结束`</body>`标记之前会导致成功验证。

不会工作：

```
 </div><!--div#footer-->

    </body>
</html>

<!-- Hosting24 Analytics Code -->
<script type="text/javascript" src="http://stats.hosting24.com/count.php"></script>
<!-- End Of Analytics Code --> 
```

作品：

```
 </div><!--div#footer-->
        <!-- Hosting24 Analytics Code -->
        <script type="text/javascript" src="http://stats.hosting24.com/count.php"></script>
        <!-- End Of Analytics Code -->
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T21:52:04.727

在关闭告诉浏览器不再有 HTML 的 HTML 标记后，您正在使用 HTML 代码。如果您不是自己做的话，可能是由您的托管服务提供商添加的。编辑页面，将分析脚本放在文档的 HEAD 中，然后重新验证。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T12:37:34.873

它由您的托管服务提供商自动添加。我有完全一样的问题。但我不认为有解决问题的办法。它由您的托管服务提供商自动添加。Javascript也不起作用：

1）验证器不会使用它，因为它肯定是在页面加载后加载的。

2）代码在DOM之外，这意味着您无法使用javascript访问它。

希望你有这方面的一些信息。

# javascript - JavaScript - 从警报到功能

> ID：11873300
> 
> 赞同：0
> 
> 时间：2012-08-08T21:15:52.120
> 
> 标签：javascript, html

我对学习 JavaScript 的追求非常陌生（仅两周），所以请对我取得的进步感到惊讶和惊讶。

我想要做的是点击一个按钮，该按钮将唤起一个随机图像或 div 来到前面。如您所见，我通过将元素从后向前移动来使用 z-index。

我已经足够远，可以创建一个警报，告诉我它确实找到了随机功能，只是无法让它激活这个功能（当我将它分配给一个按钮时，changeCombined 功能确实可以正常工作，但无法让 getImage 运行）。

我不确定这是否可能，而且我知道可能有一百种更好的方法可以做到这一点，但一次只需要一步。

```
function changeZIndex(i,id) {
    document.getElementById(id).style.zIndex=i;
};

var changeCombined1 = function() {
    changeZIndex(-5,"scene1");
    changeZIndex(5,"scene2");
};  

var changeCombined2 = function() {
    changeZIndex(-5,"scene2");
    changeZIndex(5,"scene1");
};

function get_random(){
    var ranNum= Math.floor(Math.random()*2);
    return ranNum;
}

function getImage(){
    var whichImage=get_random();
    var image=new Array()
    image[0]=changeCombined2;
    image[1]=changeCombined1;

    alert(quote[whichImage]);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:27:20.540

尝试这个：

```
function changeZIndex(i,id) {
    document.getElementById(id).style.zIndex=i;
};

function getImage(){
    var whichImage=Math.floor(Math.random()*2);
    var image=new Array()
    image[0]=function() {
        changeZIndex(-5,"scene2");
        changeZIndex(5,"scene1");
    };
    image[1]=function() {
        changeZIndex(-5,"scene1");
        changeZIndex(5,"scene2");
    };

    image[whichimage]();

    alert(quote[whichImage]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T21:21:59.433

您根本没有调用这些`changeCombined()`函数。

如果您尝试*调用*这些函数，则必须使用`()`

```
image[0]=changeCombined2();
image[1]=changeCombined1(); 
```

你所拥有的只是函数本身`image[0]`和`image[1]`。所以之后

```
x = changeCombined2; 
```

`x`将持有对`changeCombined2` *函数本身*的引用。所以现在如果你说`x()`（或者在你的情况下`image[0]()`），它会*调用* `changeCombined2`.

`()`将调用函数并将函数的返回值放入数组元素中。

注意：因为函数没有显式返回任何东西，`image[0]`并且`image[1]`会持有`undefined`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T14:19:54.930

感谢所有帮助克服我的障碍，不调用我的函数的新手错误是最大的问题。我能够蒙太奇评论以创建按预期工作的这个版本。

```
function changeZIndex(i,id) { 
    document.getElementById(id).style.zIndex=i;}; 

function getImage(){ 
    var whichImage=Math.floor(Math.random()*2); 

    var image=new Array() 

    image[0]=function() { 
    changeZIndex(-5,"scene2"); 
    changeZIndex(5,"scene1"); 
    }; 

    image[1]=function() { 
    changeZIndex(-5,"scene1"); 
    changeZIndex(5,"scene2"); 
    }; 

    image[whichImage].apply(undefined);}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T21:24:58.993

要调用函数，您应该使用[apply](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)或[call](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)方法。

你试过`image[whichImage].apply(undefined)`而不是你的`alert`吗？

# javascript - 检测 div 中的变化并重新绑定事件 jQuery

> ID：11873302
> 
> 赞同：1
> 
> 时间：2012-08-08T21:15:56.880
> 
> 标签：javascript, jquery, events, html

在 jQuery 中，我如何查看 div 以确定它是否已更改，以便我可以重新绑定事件并根据需要执行一些其他操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:50:07.803

如果`div`有动态内容，我想告诉您有关[事件委托](http://davidwalsh.name/event-delegate)的信息。

> 事件委托允许您避免将事件侦听器添加到特定节点；相反，事件侦听器被添加到一个父级。[1](http://davidwalsh.name/event-delegate)

要在 jQuery 中使用事件委托，您可以使用[on](http://api.jquery.com/on/)方法*并*提供一个`selector`参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T21:58:03.460

你可以使用 DOMSubtreeModified 事件（见[这里](http://www.w3.org/TR/2000/REC-DOM-Level-2-Events-20001113/events.html#Events-MutationEvent)）

```
$('my-selector').bind('DOMSubtreeModified', function() {
  console.log('Children have been modified');
}); 
```

我尚未检查此事件的受支持性质，但在 chrome 中它可以工作。

不幸的是：[为什么在 DOM 级别 3 中不推荐使用 DOMSubtreeModified 事件？](https://stackoverflow.com/questions/6659662/why-is-the-domsubtreemodified-event-deprecated-in-dom-level-3)

# r - 带有 R Tcl/Tk 的简单对话框

> ID：11873303
> 
> 赞同：3
> 
> 时间：2012-08-08T21:16:07.683
> 
> 标签：r, tcl, tk

我尝试使用 Tcl 小部件对话框调用一个简单的函数 - 将 x、y 和 z 放在一起并总结它们，在控制台中显示结果，并带有一个消息框（“完成！”） - 但我缺少一些变量并没有设法做消息框..

```
mydialog <- function(){

       myfun <- function(x,y,z) x+y+z

       xvar <- tclVar("1")
       yvar <- tclVar("2")
       zvar <- tclVar("3")

       tt <- tktoplevel()
       tkwm.title(tt,"MYTEST")
       x.entry <- tkentry(tt, textvariable=xvar)
       y.entry <- tkentry(tt, textvariable=yvar)
       z.entry <- tkentry(tt, textvariable=zvar)

       reset <- function()
        {
         tclvalue(xvar)<-""
         tclvalue(yvar)<-""
         tclvalue(zvar)<-""
        }

       reset.but <- tkbutton(tt, text="Reset", command=reset)

       x <- tclvalue(xvar)
       y <- tclvalue(yvar)
       z <- tclvalue(zvar)
       submit.but <- tkbutton(tt, text="submit", command=function() substitute(myfun(x,y,z)))

       tkgrid(tklabel(tt,text="MYTEST"),columnspan=2)
       tkgrid(tklabel(tt,text="x variable"), x.entry)
       tkgrid(tklabel(tt,text="y variable"), y.entry)
       tkgrid(tklabel(tt,text="z variable"), z.entry)
       tkgrid(submit.but, reset.but)

    }

mydialog() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T21:57:08.300

我看不到你`myfun`的定义在哪里。这是您的代码略有改动

```
mydialog <- function(){

       xvar <- tclVar("1")
       yvar <- tclVar("2")
       zvar <- tclVar("3")

       tt <- tktoplevel()
       tkwm.title(tt,"MYTEST")
       x.entry <- tkentry(tt, textvariable=xvar)
       y.entry <- tkentry(tt, textvariable=yvar)
       z.entry <- tkentry(tt, textvariable=zvar)

       reset <- function()
        {
         tclvalue(xvar)<-""
         tclvalue(yvar)<-""
         tclvalue(zvar)<-""
        }

       reset.but <- tkbutton(tt, text="Reset", command=reset)

       submit <- function() {
         x <- as.numeric(tclvalue(xvar))
         y <- as.numeric(tclvalue(yvar))
         z <- as.numeric(tclvalue(zvar))
         print(x+y+z)
         tkmessageBox(message="Done!")
         #tkdestroy(tt)
       }
       submit.but <- tkbutton(tt, text="submit", command=submit)

       tkgrid(tklabel(tt,text="MYTEST"),columnspan=2)
       tkgrid(tklabel(tt,text="x variable"), x.entry)
       tkgrid(tklabel(tt,text="y variable"), y.entry)
       tkgrid(tklabel(tt,text="z variable"), z.entry)
       tkgrid(submit.but, reset.but)

    }

mydialog() 
```

# flash - 从 swf 线导出 actionscript 和原始数据结构

> ID：11873307
> 
> 赞同：3
> 
> 时间：2012-08-08T21:16:33.473
> 
> 标签：flash, decompiling, swf-decompiler

在过去的几天里，我遇到了 swf 线作为反编译 swf 文件的好方法，但是对于我的生活，我无法弄清楚如何将反编译的文件实际放入对我有用的地方。有没有人知道如何从 swf 线检查器导出纯文本而不必复制和粘贴每个文件？我应该使用一些更好的免费 swf 反编译器来让我的生活更轻松吗？

# javascript - jQuery调整iframe高度

> ID：11873312
> 
> 赞同：7
> 
> 时间：2012-08-08T21:16:41.907
> 
> 标签：javascript, jquery, iframe, height

此代码已传递给我。它使我的 iframe 设置为屏幕的 100% 高度：

```
jQuery(document).ready(function(){var height = $(window).height();
             $('iframe').css('height', height)
         }); 
```

我是 JavaScript 新手。如何编辑此代码以将其设置为 90% 高度而不是 100%？此外，此代码针对所有 iframe，有没有办法使其针对特定 iframe（通过其 ID 或 NAME 值）？如果你愿意，你可以在这里摆弄这段代码：http: [//jsfiddle.net/VurLy/](http://jsfiddle.net/VurLy/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-08T21:18:34.053

乘以 90%？

```
jQuery(document).ready(function() {
    var height = $(window).height();
    $('iframe').css('height', height * 0.9 | 0);
}); 
```

至于按 ID 或名称定位，只需将适当的选择器传递给`$`而不是`'iframe'`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T21:20:57.930

```
jQuery(document).ready(function(){
    $('#YOUR_FRAME_ID_HERE').css('height', '90%')
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T21:25:23.997

在 jquery 中，您可以通过多种不同的方式识别您想要的元素，最流行的是像这样 $('#scoop') 的 id 或像这样的类 $('.scoop') - 如果类是勺子

这就是您识别所需特定 iFrame 的方式，然后像这样更改高度

```
 jQuery(document).ready(function() {
   var height = $(window).height();
   $('#scoop').css('height', '90%'); 
}); 
```

# cuda - 不同流之间的CUDA内核间通信

> ID：11873315
> 
> 赞同：0
> 
> 时间：2012-08-08T21:17:00.533
> 
> 标签：cuda, sync

有没有人在 2 个不同的 CUDA 流中成功运行 2 个不同的内核并让它们同步？基本上我想让 1 个内核 A 将数据发送到另一个同时运行的内核 B（在不同的流中），然后返回结果。原因：内核 A 在 1 个 CUDA 线程中运行，我想要内核 B 的多 GPU 线程实现。

这是使用高端 GPU (Fermi/Tesla)、CUDA 4.2

相同的 GPU，不同的流。所以数据应该能够通过**设备**内存进行通信，但是如何同步它们呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T05:10:43.867

The CUDA Programming Model only supports communication between threads in the same thread block ([CUDA C Programming Guide](http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/CUDA_C_Programming_Guide.pdf) at the end of section 2.2 Thread Hierarchy). This cannot be reliably implemented through the current CUDA API. If you try you may find partial success. However, this will fail on different OSes, different executions of your application, and this will be broken by future driver updates and new hardware (GK110 supports enhanced concurrency model).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-25T12:18:25.867

如果我正确地抓住了你的问题，你有两个问题：

1.  内核间数据交换
2.  内核间同步

1）内核间数据交换可以通过共享全局设备内存中的数据来实现。

2）据我所知，CUDA没有提供可靠的内核间同步设施。而且我不知道可以在这里应用任何合适的技巧。

[CUDA C Programming Gide v7.5](http://docs.nvidia.com/cuda/cuda-c-programming-guide/)告诉我们：“应用程序通过流管理上述并发操作。流是按顺序执行的命令序列（可能由不同的主机线程发出）。另一方面，不同的流可能相对于彼此无序或同时执行它们的命令；不能保证这种行为，因此不应依赖于正确性（例如，**内核间通信未定义**）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T02:20:04.063

*   您的数据必须在全局内存中
*   需要获取主机上的数据地址
*   您必须将此数据发送回第二个内核

您的代码必须与此类似：

*dataToExchange_h,*dataToExchange_d;
cudaMalloc((void**)dataToExchange, sizeof(data));

kernel1<<< M1,N1,0,stream1>>>(dataToExchange);
cudaStreamSynchronize(stream1);
kernel2<<< M2,N2,0,stream2>>>(dataToExchange);

但请注意，流同步会减慢该过程，因此您应尽可能避免它。您还可以通过 cuda 事件获得流同步，它不太明显并且没有特别的优势，但了解它很有用;-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-08T21:20:43.070

您将需要在主机上进行同步。从我的脑海中，依次为每个流调用 cudaDeviceSynchronize 应该可以解决问题，但它可能并不那么容易。

# xml - 使用 XSLT 避免 XML 中的重复？

> ID：11873317
> 
> 赞同：0
> 
> 时间：2012-08-08T21:17:07.333
> 
> 标签：xml, xslt, duplicates

这个问题是我上一个问题的后续。多亏了提供的答案，我才能够匹配谱系的查询项和查询名称。但是，我现在得到重复的查询项名称，因为在多个查询节点中使用了相同的项。

为了稍微解释一下 XML，dataItem“区域”位于多个查询中，XSL 正在遍历并将根/沿袭/项目/名称与 XML 中的查询/查询/选择/数据项/表达式匹配。但是，由于“区域”位于多个查询中，因此它会多次抓取它。我只想要一次。这是我正在使用的 XML 示例：

```
<root>
  <lineage>
    <item>
      <name>[Sales (query)].[Retailers].[Retailer Province-State]</name>
      <ns>[goretailers]</ns>
      <qs>[RETAILER_SITE]</qs>
      <qi>[Retailer Province-State]</qi>
    </item>
    <item>
      <name>[Sales (query)].[Products].[Product line]</name>
      <exp>#'[gosales].[PRODUCT_LINE].[PRODUCT_LINE_'+ $Language_lookup{$runLocale}+ '] '#</exp>
    </item>
  </lineage>

 <!--There is more XML code in between -->

<queries>
    <query name="RevenuMapquery">
    <!--More Code in between that is unimportant-->
    <selection>
        <dataItem name="Region">
            <expression>[AllRegion].[Region]</expression>
        </dataItem>
        <dataItem name="Revenue">
            <expression>[MeasureRevenue].[Revenue]</expression>
        </dataItem>
        <dataItem name="Planned revenue">
            <expression>[MeasureRevenue].[Planned revenue]</expression>
        </dataItem>
    </selection>
    </query>
    <query name="AllRegion">
    <source>
    <model />
    </source>
    <selection>
        <dataItem name="Region">
            <expression>[Sales (query)].[Retailers].[Retailer Province-State]</expression>
        </dataItem>
    </selection>
        <detailFilters>
        <detailFilter>
    <filterExpression>[Sales (query)].[Retailers].[Retailer country] = ('United States')    </filterExpression>
        </detailFilter>
        </detailFilters>
    </query>    
</root> 
```

```
<xsl:key name="dataItems" match="dataItem" use="expression"/>

  <xsl:template match="root">
      <xsl:apply-templates select="lineage"/>
   </xsl:template>

<!-- The above is included at the top of the XSl stylesheet as a child of the stylesheet node -->

<xsl:for-each select="item">
   <Row>        
        <Cell Borders="#ffffff">
          <xsl:attribute name="Background">
            <xsl:choose>
              <xsl:when test="position() mod 2 = 1">#CCCCFF</xsl:when>
              <xsl:when test="position() mod 2 = 0">#FFFFFF</xsl:when>
            </xsl:choose>
          </xsl:attribute>
          <Paddings Left="5" Right="5" Top="2" Bottom="2"/>
          <xsl:for-each select="key('dataItems', name)">
              <Text Style="TableContent">
                  <xsl:value-of select="@name"/>
                      <xsl:apply-templates select="dataItems"/>
              </Text>
           </xsl:for-each>
        </Cell>    
   </Row>
</xsl:for-each> 
```

我现在得到的结果类似于：Region, Region, Region, Product Line, Product Line, Revenue, Revenue

我想要的结果是：地区、产品线、收入

# java - 从 Jersey 请求中获取字符串和 JAXB 对象

> ID：11873318
> 
> 赞同：1
> 
> 时间：2012-08-08T21:17:12.500
> 
> 标签：java, jaxb, jersey

我正在寻找完全按照下面的问题讨论的内容（即，在 Jersey 请求中取回字符串和 JAXB 对象以进行日志记录）。

[JAX-RS 将实体作为 JAXB 对象和字符串获取](https://stackoverflow.com/questions/1828526/jax-rs-get-entity-as-jaxb-object-and-as-string)

由于这个问题此时已有 2.5 年的历史，我想知道现在是否有比在每个请求类中添加额外的 MessageBodyReader 代码更简单的方法。在这一点上，对我们的 API 代码库进行这将是一项耗时且昂贵的改造。考虑到 JAXB/Jersey 已经存在多长时间以及这个问题的普遍性，如果没有简单的方法来做到这一点，我会感到惊讶，但除了那个旧帖子之外，我找不到任何关于它的信息。

# html - CSS 精灵按钮

> ID：11873323
> 
> 赞同：3
> 
> 时间：2012-08-08T21:17:31.063
> 
> 标签：html, css, css-sprites

这些 Sprite 按钮让我发疯。我几乎可以让他们工作，但不完全是。

我正在玩这个非常简单的精灵图像：

![jp2Rollover Sprite](../Images/4a17b97768f1672ded9147a6f21b9f37.png)

我有一个 jsfiddle 项目[>> HERE <<](http://jsfiddle.net/jp2code/PZh9F/1/)如果你想看的话，但如果你只是想看的话，代码在下面。

对于我的 CSS，我有以下内容：

```
#menu {
  left:10px;
  top:50px;
  height:300px;
  width: 147px;
  position:fixed;
}
.sprite {
  background: url('http://www.jp2code.net/logos/jp2Rollover.png') 0px -100px no-repeat;
  height:50px;
  padding-left: 50px;
  width:147px;
  z-index:1;
}
.sprite a {
  background-position: 0px 0px;
  color:Red;
  vertical-align: middle;
}
.sprite a:hover {
  background-position: 0px -50px;
  color:Yellow;
}
​ 
```

这样，我的 HTML 就变得简单而小巧：

```
<html>
<body>
  <ul id="menu">
    <li class="sprite">You Are Here</li>
    <li class="sprite"><a href="#A">Contact</li>
    <li class="sprite"><a href="#B">Projects</li>
  </ul>
</body>
</html>​ 
```

我似乎无法显示我的活动链接图像（位置 0）或悬停链接图像（位置 50）。

另外，我想找到一种方法使整个矩形区域（50 x 147）成为超链接。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T21:25:39.833

我更新了你的小提琴：http: [//jsfiddle.net/PZh9F/12/](http://jsfiddle.net/PZh9F/12/)

当您设置了 ul 的背景（应该如此）时，您还需要`ul`在悬停时更改它的背景位置，所以不要`a`像您所做的那样。但是应该更改文本颜色，`a:hover`我希望这会为您指明正确的方向。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T21:26:38.727

那是你想要得到的：http: [//jsfiddle.net/PZh9F/37/](http://jsfiddle.net/PZh9F/37/)？

CSS：

```
#menu { left:10px; top:50px; height:300px; width: 147px; position:fixed; }
.sprite { background: url('http://www.jp2code.net/logos/jp2Rollover.png') 0px -100px no-repeat; height:50px; padding-left: 50px; width:147px; z-index:1; }
.sprite a { background-position: 0px 100px; color:Red; vertical-align: middle; }
.sprite.current { background-position: 0px 0px; }
.sprite:hover { background-position: 0px -50px; }
.sprite:hover a { color:Yellow; } 
```

和 HTML：​</p>

```
<html>
<body>
  <ul id="menu">
    <li class="sprite current">You Are Here</li>
    <li class="sprite"><a href="#A">Contact</li>
    <li class="sprite"><a href="#B">Projects</li>
  </ul>
</body>
</html>​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T21:25:48.717

y 轴的背景位置应具有负值 -50px 和 -100px。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T21:25:11.683

您将应用于`background`标签`<li>`和标签`background-position`，`<a>`而不是将两者应用于同一组标签。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-08T21:25:31.603

您为 li.sprite 而不是超链接定义了背景。这就是为什么当 a:hover 发生时没有背景可以向下 -50px 。

```
.sprite a {
   background-image: url('http://www.jp2code.net/logos/jp2Rollover.png');
   background-position: 0px -100px;
   color:Red;
   vertical-align: middle;
   display:block;
   width:147px;
   height:50px;
  }
.sprite a:hover {

   background-position: 0px -50px;

  } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-08T21:59:26.970

只是几个问题：

锚标签没有关闭，所以这可能会导致一些问题。

任何时候你想让某个东西表现得像一个链接，它应该使用一个锚标签；我注意到第一个 li 标签只是文本。从技术上讲，您仍然可以达到相同的效果，但我猜您正在尝试链接到某些东西。

当您将 html 文本用于使用背景图像的按钮内的链接时，我建议将文本放入一个 span 中，以便于格式化。当您在不使用跨度的情况下向锚标记添加填充时，即使设置了宽度，您也可以在某些浏览器的另一端获得额外的填充。只是我多年来学到的一个小技巧。

使用精灵时，请确保将高度、宽度和 display:block 属性添加到“a”选择器。这将确保整个链接都是可点击的。

看起来你的一些悬停在跳跃，这可能是你的精灵的问题。您的测量准确无误至关重要。如果它甚至偏离 1px，它会产生不希望的闪烁效果。

完整代码在这里：http: [//jsfiddle.net/PZh9F/65/](http://jsfiddle.net/PZh9F/65/)

希望有帮助！

# android - 为什么我的应用在 Google Play 中被“隐藏”了？

> ID：11873324
> 
> 赞同：2
> 
> 时间：2012-08-08T21:17:30.937
> 
> 标签：android, search-engine, google-play

首先对不起我的英语不好：我是法国人，我可能会犯一些错误。

我创建了一个应用程序，并于上个月将其上传到了 Google Play 商店。您可以在这里毫无问题地找到它：https: [//play.google.com/store/apps/details?id=com.malerbati.fourInAMine](https://play.google.com/store/apps/details?id=com.malerbati.fourInAMine)。

问题是：用搜索引擎几乎不可能找到我的应用程序！当我在 Google Play 中搜索“4 in a mine”时，我的应用名称仅出现在第 20 个结果中！

此外，当我上传该应用程序时，它并没有出现在“头条新闻”中。我记得我创建的最后一个应用程序在发布后 1 天就下载了 200 次，这显然要归功于“头条新闻”的事情……而这个应用程序在 1 个月后只有 65 次下载！当我查看统计数据时，我发现 100% 的下载者是法国人（我的国家），这意味着所有获得我的应用程序的人都是通过口耳相传的方式找到它的！实在是太没效率了...

因此，这是我的问题：为什么我们不能像其他人一样轻松地看到我的应用程序？有没有其他人遇到同样的问题？我对问题的根源有一些假设：

*   我创建的最后一个应用程序非常失败：95% 的人卸载了它，主要是因为游戏太难了。Google Play 搜索引擎是否考虑到这一点？

*   我去年创建了我的最后一个应用程序。现在必须有更多的应用程序。我的应用程序是否被（太多）其他应用程序隐藏了？

*   我的应用程序比上一个应用程序小得多（只有 300 ko，对 3 Mo）。是否也考虑在内？

谢谢你的期待。我真的很想知道问题出在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:29:41.227

以下是一些可以提供帮助的资源：

[Android 开发者如何通过 Google Play 茁壮成长](http://techcrunch.com/2012/05/20/how-android-developers-can-thrive-with-google-play/)

> *   **在您的应用标题中最大化搜索潜力**：确定您最成功的关键字并确保将它们包含在您的应用标题中。事实上，这对成功至关重要（可能在您的搜索排名中占据 80 到 100 个位置），因此您应该认真考虑从标题中删除您的应用名称，并将您的描述集中在最佳关键字上。在应用描述的正文中包含应用名称——用户仍然可以通过名称找到它。与 iOS 不同的是，身体描述是在 Google Play 下搜索的。
> *   **使用但不要过度使用关键字**：尝试在应用描述正文的五倍处使用最佳关键字。这可能会影响 10 到 20 个位置的搜索排名。任何超过五次都没有额外的好处，所以不要过度。
> *   **测试您的搜索参数**：以上建议是基于积累经验的指南，但搜索结果可能会因许多因素而异。
> *   **稳步努力效果最好**：Google Play 的排名算法倾向于长期用户获取——获取并留住满意用户的应用会获得更高的排名。与 iOS 市场中常见的短期活动爆发不同，广告活动应持续较长时间并持续两到三个月。
> *   **使用闭环归因并定位长期用户**：由于留存用户对排名有重要影响，因此使用闭环营销来确保您识别和利用带来忠实用户的广告来源。
> *   不要害怕在 Android 上尝试和测试您的营销策略。您可以将这些知识应用到您的 iOS 版本中，并降低您的成本和风险。

[Google Play 优化秘诀 - 5 个有用的提示](http://www.silverbackstrategies.com/internet-marketing/google-play-optimization-secrets-5-helpful-tips)

第二个链接包含更多信息，这些信息更倾向于营销和销售策略，而不是实际步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T18:55:10.243

您的应用程序包含许多非常常见的单词。一些最常见、最小的小辅助词可能会被丢弃，因为它们会对所有内容都产生影响。

如果你在它周围加上引号，那么 Google Play 将搜索整个序列。当我搜索时`4 in a mine`，我基本上看不到您的应用程序。当我搜索`"4 in a mine"`时，您的应用程序是*唯一*的结果。

我知道这些信息并不能真正帮助您，因为虽然它回答了您的问题，但您无法控制用户的行为。你最好让你的标题独一无二。当然，这也使得它的描述性降低，用户更难记住。这是一个不可避免的权衡。

**回答您的其他问题：**

如果您的其他游戏的成功或失败与该游戏的搜索相关性有任何关系，我会感到惊讶。我可以相信卸载率会影响已卸载标题的搜索相关性。

大量新应用的发布确实意味着您希望快速进入安装的良性循环。因此，在您上传应用程序的同一天，进入您的社交网络并告诉您所有的朋友和关注者您有一个新游戏可以尝试。确保它适用于他们使用的大多数设备。:-)

一个能很好地描述您的应用程序的列表页面可以帮助您从“用户也查看过”列表中获得一些附带利益，以搜索导致类似游戏的搜索。通过发布出现在“来自开发者的更多信息”下的其他应用程序，您可以获得更多附带利益。这可能不是一个很大的提升，但它是一个反馈路径——可能是你直接控制的唯一路径。

如果应用程序大小有任何不同，我会感到惊讶。

**总结一下：**

我认为您的问题是您的标题完全由被丢弃的小词或与许多其他游戏匹配的常用词组成。您可以通过在一个整体中搜索短语来轻松找到您的应用程序，但用户不会这样做。因此，努力将只有您使用的独特术语与帮助搜索引擎确定您在搜索中的相关性的描述性术语结合起来。并跟进一些营销。

# c++ - 过滤奇怪的 C++ 多图值

> ID：11873333
> 
> 赞同：0
> 
> 时间：2012-08-08T21:18:30.380
> 
> 标签：c++, multimap, garbage

我的代码中有这个多图：

```
multimap<long, Note> noteList;

// notes are added with this method. measureNumber is minimum `1` and doesn't go very high
void Track::addNote(Note &note) {
    long key = note.measureNumber * 1000000 + note.startTime;
    this->noteList.insert(make_pair(key, note));
} 
```

当我尝试阅读最后一个小节的注释时遇到了问题。在这种情况下，这首歌只有 8 个小节，而导致问题的是第 8 个小节。如果我达到 16 项措施，则导致问题的措施是 16 项，依此类推。

```
// (when adding notes I use as key the measureNumber * 1000000\. This searches for notes within the same measure)
for(noteIT = trackIT->noteList.lower_bound(this->curMsr * 1000000); noteIT->first < (this->curMsr + 1) * 1000000; noteIT++){
if(this->curMsr == 8){
    cout << "_______________________________________________________" << endl;
    cout << "ID:" << noteIT->first << endl;
    noteIT->second.toString();
    int blah = 0;
}

// code left out here that processes the notes
} 
```

我只在第 8 小节中添加了**一个**注释，但这是我在控制台中得到的结果：

```
_______________________________________________________
ID:8000001
note toString()
Duration: 8
Start Time: 1
Frequency: 880
_______________________________________________________
ID:1
note toString()
Duration: 112103488
Start Time: 44
Frequency: 0    
_______________________________________________________
ID:8000001
note toString()
Duration: 8
Start Time: 1
Frequency: 880
_______________________________________________________
ID:1
note toString()
Duration: 112103488
Start Time: 44
Frequency: 0 
```

*这不断重复。*第一个结果是我自己添加的正确注释，但我不知道注释`ID: 1`来自哪里。

任何想法如何避免这种情况？这个循环卡住了重复相同的两个结果，我无法摆脱它。即使小节 8 中有多个音符（这意味着多重映射中以`8xxxxxx`它开头的多个值仅重复第一个音符和不存在的音符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T21:30:36.673

您没有正确检查循环的结束。具体不保证`noteIT`不等于`trackIT->noteList.end()`。试试这个

```
for (noteIT = trackIT->noteList.lower_bound(this->curMsr * 1000000); 
    noteIT != trackIT->noteList.end() &&
    noteIT->first < (this->curMsr + 1) * 1000000;
    ++noteIT)
{ 
```

从外观上看，最好使用对 upper_bound 的调用作为循环的限制。这将自动处理最终情况。

# c++ - 找到第 n 个加泰罗尼亚数 mod m 的最快（已知）算法是什么？

> ID：11873334
> 
> 赞同：16
> 
> 时间：2012-08-08T21:18:32.403
> 
> 标签：c++, algorithm, math, catalan

问题是要找到第**n 个加泰罗尼亚**数 mod `m`，其中`m`不是**素数**，`m = (10^14 + 7)`。以下是我尝试过的方法列表：（max `N = 10,000`）

1.  查表的动态编程，太慢了
2.  使用加泰罗尼亚公式`ncr(2*n, n)/(n + 1)`，由于函数的原因，它又不够快，不能使用**指数平方**`ncr`加速，因为它不是素数。**`m`**
***   对预先生成的表进行硬编码`Catalans`，但由于文件大小限制而失败。*   递归关系`C(i,k) = C(i-1,k-1) + C(i-1,k)`，这太慢了**

 **所以我想知道有没有其他更快的算法来找到我不知道的**第 n 个加泰罗尼亚数字？**

**使用动态规划**

```
void generate_catalan_numbers() {
    catalan[1] = 1;
    for (int i = 2; i <= MAX_NUMBERS; i++) {
        for (int j = 1; j <= i - 1; j++) {
            catalan[i] = (catalan[i] + ((catalan[j]) * catalan[i - j]) % MODULO) % MODULO;
        }
        catalan[i] = catalan[i] % MODULO;
    }
} 
```

**使用原始公式**

```
ull n_choose_r(ull n, ull r) {
    if (n < r)
        return 0;

    if (r > n/2) {
        r = n - r;
    }

    ull result = 1;
    ull common_divisor;
    for (int i = 1; i <= r; ++i) {
        common_divisor = gcd(result, i);
        result /= common_divisor;
        result *= (n - i + 1) / (i / common_divisor);
    }

    return result;
} 
```

**使用递归关系**

```
ull n_choose_r_relation(ull n, ull r) {
    for (int i = 0; i <= n + 1; ++i) {
        for (int k = 0; k <= r && k <= i; ++k) {
            if (k == 0 || k == i) {
                ncr[i][k] = 1;
            }
            else {
                ncr[i][k] = (ncr[i - 1][k - 1] + ncr[i - 1][k]) % MODULO;
            }
        }
    }

    return ncr[n][r];
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-08T22:43:44.987

从我写的答案中，就在[这个关于 nCr 计算的问题](https://stackoverflow.com/questions/9107653/fast-computation-of-multi-category-number-of-combinations)被关闭时，它最终出现在评论中：

我不确定这是绝对最快的，但它应该足够高效。关键是模乘分解，但除法不分解，所以首先必须减少分数，如下：

*   由于`n <= 10000`，很有可能构建一个大小为 的数组`2*n`。

*   使用 Eratosthenes 筛法查找并存储最大为 的所有合数的成对因子`20000)`。无论要计算多少个加泰罗尼亚数字，此步骤只需执行一次。

*   制作另一个大小表`2*n`，代表每个因子的指数。

*   现在，在 Catalan 公式中迭代产品![在此处输入图像描述](../Images/480472f3dd1667f28f3f0edaebd38477.png)。

*   使用筛表将每个因子分解为素因子，为分子中的每一项增加指数表，为分母中的每一项递减指数表。

*   没有条目最终会是负面的。

*   现在，使用模算术将未取消的因子相乘。

*   任何时候都不需要除法操作。也没有任何分数。

*   我的方法的演示应用于：http `multi-nCr`: [//ideone.com/Weeg6](http://ideone.com/Weeg6)

要将其用于加泰罗尼亚数字，您可以使用它而不是内部的循环`calc_combinations`：

```
 for( unsigned k = 2; k <= N; ++k ) {
         factor<+1>(k+N);
         factor<-1>(k);
    } 
```

然后代码如下所示：http: [//ideone.com/ZZApk](http://ideone.com/ZZApk)

# 解决方案

```
#include <utility>
#include <vector>

std::vector< std::pair<int, int> > factor_table;
void fill_sieve( int n )
{
        factor_table.resize(n+1);
        for( int i = 1; i <= n; ++i )
                factor_table[i] = std::pair<int, int>(i, 1);
        for( int j = 2, j2 = 4; j2 <= n; (j2 += j), (j2 += ++j) ) {
                if (factor_table[j].second == 1) {
                        int i = j;
                        int ij = j2;
                        while (ij <= n) {
                                factor_table[ij] = std::pair<int, int>(j, i);
                                ++i;
                                ij += j;
                        }
                }
        }
}

std::vector<unsigned> powers;

template<int dir>
void factor( int num )
{
        while (num != 1) {
                powers[factor_table[num].first] += dir;
                num = factor_table[num].second;
        }
}

void calc_catalan(unsigned N)
{
    powers.resize(0);
    powers.resize(2*N+1);
    for( unsigned k = 2; k <= N; ++k ) {
         factor<+1>(k+N);
         factor<-1>(k);
    }
} 
```

# 测试驱动程序

```
#include <iostream>
#include <cmath>
int main(void)
{
    fill_sieve(20000);
    unsigned N = 9913;
    unsigned long long M = 1000000000007LL;
    calc_catalan(N);
    unsigned long long result = 1;
    for( unsigned i = 0; i < powers.size(); ++i ) {
        while (powers[i]--) {
            result *= i;
            result %= M;
        }
    }
    std::cout << "Catalan(" << N << ") modulo " << M << " = " << result << "\n\n";
} 
```

完成的演示：http: [//ideone.com/FDWfB](http://ideone.com/FDWfB)

这是另一个相关问题，我用代码和演示回答了这个问题：[C++ 中的组合数（N 选择 R）](https://stackoverflow.com/questions/9330915/number-of-combinations-n-choose-r-in-c?lq=1)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T01:14:59.000

十分简单。计算二项式系数的主要因子。使用筛子的简单任务。其余部分我不会讨论，但 powermod 计算是微不足道的，你甚至不需要除法。

对于 N = 10000，我很快得到 42224403014400。

但是，如果你想要完整的数字本身，那么第 10000 个加泰罗尼亚数字本身就是......

```
 22453781249338521563359358425736057870110358621936588777329371383585
443658870053449099810271911432021020990539379958970114932732650095370271
397751300183876130693653440780258549445459994177372998459176454278220288
679699783327649549651476024591222065426709156831181207130089121989402216
517545144106669143509197596949973192167548893412063804651413496597406903
967719298471463870452875276986356795262033484770727452974197655810423629
386184662262278329466750526865120502476640878488187299740404235631962632
335108916990663560351330901464515744357084282208286669901241545533951877
777078174205283779947690623035078595904048715811899275348402286537327410
009576296851062523691528014340846065120667839872568170381150542379156626
173532955062796771718993285598391346886779480658586379448386923993317934
139425945651509102645665277040984870211604644540699508509248821099873225
565699224344151993874742555422872473424262356666363196825449089721410665
537521519676271082500130505509387186351879731113568837096419481746389018
721284533242225719341420124434480886444987373634542567071582458263380247
628252179873943804465262216365735901268165347321451279736504798992232739
106390706179212626442096326217616178171108663008963682821183764312867791
507672494716865305031842633900748973827504534625795968537648004286087039
823233370550650634239448544304798764239028734674653967478032618882557954
859328131980782727940394400855369003385513208814011609977239377877068501
893633819436630205358663340684840462204867552576509569736390978718963517
869423927523718504671005747648411794527978689778762460237949479732242725
154275831263823307362585789708343583184171797113785187466609433767144371
710845773715328364171910363978492352051901370003068055356444233141131383
192077598317531370925033378421138581148001529316546340657631162629562941
211065221871760353772365014435796695284269667873562415761642871681276498
507492541421942131281008978510862112693424595990036710403533420006771490
575482785612280198742983770649313043583275207213939274300662039637048647
395250014477941359641726047221826652916778311801541491816826072282488555
018173563867058868251361080516013361134986419403377613243853586312008767
909635869692823359899687030213634793656744420820912530014968355236934193
747181786083577435923400955703014812335311495073521773651461701750485101
119310472898683618090898735223665962918372501660743711042258315604294195
583076309209507444333462531858856911411408798540404888967120239682480627
570158137868956844950713279360385273144560292399045892610118082102910880
862332337854786916935223744892537176357434650161037841572213751901947447
479406915511862629144757855890852243043614898752155191154178797427659170
858428903659564218086017881546286273599385917718058276038925354040884258
022546721698832195059172836919416429064599278227491956109630837263590884
232587058023101145921693423507849076470763334833613166731358258440439729
023251976962577737416518794914009277934381234511794730677137605309953636
716963188964230436087118746073758080815722286112796870306754227017546055
347853334923811143440952672436342961180384459596879312187164969968096364
679341577416027452001090523659332406246454292701122715894579618818643071
139925009651888661718404932582731927646801878919152052218535889565319288
284306134970608577076704660104569794464663831193002735423564364371354521
236158069405955372080665906666149641642367693009585743888230289135078928
729184475260174446278915850624301208853693618442212023236924456444468934
014289741543223145235333811594418344798647068944904371005158995839127368
111629241573877617157577569590584624720552246920280151741755137476154967
741272080362312952750328628775530857638646138592895858764915987201920286
661490154786097488396300779244279606416541720716707237058679072236693234
932525387774462125138686406910133757255779021404876020200833761157767584
015369673586027681003369474431448843539054790848335705489738731700240579
310855452462903455809888697753847348175077261616431384533713924568807999
599683993362082982833949280082553659996487889394727840889035163412693106
865702752400579571351436509808650503057036278511515529330634352096987240
087618010503197530225589878764240330302768263496958673020211712107611762
945771002810537812467742009399047607169797035466100221770262334445478074
080845928677855301631860443068261061887109865290453732333638130446973519
286828584088203627113605849939106943614542645022903932947597417823646592
053417189520415596451505598330301782369213897762201629272201936584136036
027455748892667375417522206148332891409959866390232031014358337935412166
499617373308661369292739138448626161089231445046384163766705419698533262
040353901193260661841441922949263756492472641127072018961101915467728184
640938751407261817683231072132781927769994322689591991504965204544928105
747119997826784396172488376877215547707335474490892399544875233372674064
229287210750045834971802632275569822679385098328070604595140732389126327
092826465756212595551194678295464565601548041854366455751504169209131794
100099734293551231149329072243438440125013340293416345726479426178738686
238273833019523777019099811511419301476900607138083408535229058593795242
998150989330379630607152057165593682028276808657989133687600036850256257
973833780907105126134335912174477305526445570101413725539992976023375381
201759604514592679113676113078381084050224814280307372001545194100603017
219283437543128615425515965977881708976796492254901456997277712672653778
789696887633779923567912536882486775488103616173080561347127863398147885
811314120272830343521897029277536628882920301387371334992369039412492040
272569854478601604868543152581104741474604522753521632753090182704058850
525546680379379188800223157168606861776429258407513523623704438333489387
460217759660297923471793682082742722961582765796049294605969530190679149
426065241142453853283673009798518752237906836442958353267589634936329512
043142900668824981800672231156890228835045258196841806861681826866706774
199447245550164975361170844597908233890221446745462710788815648943858461
7793175431865532382711812960546611287516640 
```**

# android - 从 InDesign 导出的 epub 中恢复混淆/压缩字体

> ID：11873352
> 
> 赞同：2
> 
> 时间：2012-08-08T21:19:51.050
> 
> 标签：android, epub, adobe-indesign

我一直在尝试从使用 InDesign 创建的 epub 中恢复一些字体。我尝试了 Adob​​e 和 IDPF 算法（我使用了这个[源](http://code.google.com/p/epub-tools/source/browse/trunk/epubtools/epubgen/com.adobe.dp.epub/src/com/adobe/dp/epub/opf/FontResource.java)）。我尝试使用 InDesign 之外的字体对其进行混淆和撤消，并且效果很好。

在我的搜索中，我发现 InDesign 压缩了字体。我想知道的是如何在android中解压缩这些字体。我尝试使用 InflaterInputStream 解压缩它，但没有成功导致

> IOException 导致：java.util.zip.DataFormatException：数据错误

我尝试了这种方法，因为 epub 文件中的字体有 11kb，而原始字体有 253kb。

好吧，我尽量说得更清楚，有任何疑问请追问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T21:28:16.050

一条可能有用的信息是 InDesign CS5 现在对 epub 文档中包含的字体进行了子集化。253kb 到 11kb 的大小差异可能只是压缩，但似乎不太可能。

因此，您可能会发现，即使在提取字体之后，重新使用也不是很有帮助，因为它会丢失 ePub 中未使用的关键字符。

# java - 在我的 ftp 服务器上使用 JAVA 上传后的空文件

> ID：11873353
> 
> 赞同：1
> 
> 时间：2012-08-08T21:20:00.377
> 
> 标签：java, file, upload, ftp

尝试使用 java 在我的 ftp 服务器上上传文件时遇到一些问题。这是我的代码功能：

```
public static void upload_files(String un, String pw, String ip, String f){
  try
    {
        FTPClient client = new FTPClient();
        client.connect(ip);
        client.login(un,pw);
        InputStream is = new FileInputStream(f);
        client.storeFile("test2",is);
        is.close();

    } catch(Exception e) {
        e.printStackTrace();
    }
    } 
```

“f”是我要上传的文件的路径（即“C:\myfile”）。编译过程中没有错误，一个文件很好地发送到服务器，但遗憾的是空的（0字节）。

我还注意到，即使我有一个非常好的 ISP，简单上传一些文本（大约 40 秒）也需要很长时间。

我提前感谢所有会帮助我的人。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:18:01.097

我认为这可能与文件传输模式有关。您可以将转移模式设置为二进制吗？有时，当您以 ASCII 格式发送数据时，它会损坏。请参阅此 [https://superuser.com/questions/82726/how-to-set-binary-mode-by-default-when-ftping-to-a-remote-site](https://superuser.com/questions/82726/how-to-set-binary-mode-by-default-when-ftping-to-a-remote-site)

它讲述了如何在 FTP 命令客户端中设置二进制模式。您还将在 FTPClient 类中有类似的规定。

刚刚发现我认为在这里回答了类似的问题 [FTPClient - Java, upload file](https://stackoverflow.com/questions/5925572/ftpclient-java-upload-file)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T21:30:52.087

似乎问题与 FTPClient 的实现有关。你确定这门课是这样工作的吗？

尝试上传到不同的服务器或使用不同的类来查找失败的原因。

另外：您确定关闭 FileInputStream 是您的责任吗？我可以想象该`.storeFile(…)`方法将在完成后自行关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-02T16:06:24.790

在 client.login ftpClient 之前添加这些行 默认协议是全文仅适用于您需要指定二进制模式的其他文件

```
client.enterLocalPassiveMode()
client.setFileType(FTP.BINARY_FILE_TYPE, FTP.BINARY_FILE_TYPE);
client.setFileTransferMode(FTP.BINARY_FILE_TYPE); 
```

# java - 如何覆盖 LWJGL 中的按键

> ID：11873354
> 
> 赞同：1
> 
> 时间：2012-08-08T21:20:03.813
> 
> 标签：java, keyboard, lwjgl

我正在使用 LWJGL 中的键盘类，目前正在使用

```
if(Keyboard.isKeyDown(Keyboard.KEY_A))
{
   //move left
}
else if(Keyboard.isKeyDown(Keyboard.KEY_D))
{
   //move right
} 
```

如果我按下'a'键然后'd'键它会向右移动但是如果我按下'd'键然后'a'键由于“else”部分它仍然会继续向右移动。

我已经尝试过没有其他的，只是让它们都运行，但如果两个键都按下则没有动作

我正在寻找一段代码，它允许我只从按下的最后一个键中获取输入。

我还需要能够上下移动（使用'w'和's'），这样解决方案就不能阻止其他键工作，只有'a'或'd'。

谢谢。亚历克斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T22:11:38.300

用于[`Keyboard.getEventKeyState`](http://www.lwjgl.org/javadoc/org/lwjgl/input/Keyboard.html#getEventKeyState%28%29)确定当前事件，然后[`Keyboard.getEventKey`](http://www.lwjgl.org/javadoc/org/lwjgl/input/Keyboard.html#getEventKey%28%29)确定这是哪个键。然后，您需要确保通过 禁用重复事件[`Keyboard.enableRepeatEvents`](http://www.lwjgl.org/javadoc/org/lwjgl/input/Keyboard.html#enableRepeatEvents%28boolean%29)。保持当前运动的状态，根据这些事件进行更改，并且每个刻度都会相应地移动。如下所示，作为速写：

```
Keyboard.enableRepeatEvents(false);
...
/* in your game update routine */
final int key = Keyboard.getEventKey();
final boolean pressed = Keyboard.getEventKeyState();
final Direction dir = Direction.of(key);
if (pressed) {
  movement = dir;
} else if (movement != Direction.NONE && movement == dir) {
  movement = Direction.NONE;
}
...
/* later on, use movement to determine which direction to move */ 
```

在上面的例子中，`Direction.of`为按下的键返回适当的方向，

```
enum Direction {
  NONE, LEFT, RIGHT, DOWN, UP;

  static Direction of(final int key) {
    switch (key) {
      case Keyboard.KEY_A:
        return Direction.LEFT;
      case Keyboard.KEY_D:
        return Direction.RIGHT;
      case Keyboard.KEY_W:
        return Direction.UP;
      case Keyboard.KEY_S:
        return Direction.DOWN;
      default:
        return Direction.NONE;
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-18T06:11:01.570

如果这仍然对您有帮助，我想知道，但是您可以锁定第一次按下的键，直到松开为止。我建议将此变量放在方法之外（如果我没记错的话，它称为字段），以便可以通过任何类访问它，并且不会在每次调用 update 时重新实例化。看起来像这样：

```
boolean isHorizontalLocked = false;
String lockedKey = null; 
```

之后，在更新方法中编写如下内容：

```
if (!isHorizontalLocked) {
   if (input.isKeyDown("KEY_A")) {
       isHorizontalLocked = true;
       lockedKey = "A";
   }
   else if (input.isKeyDown("KEY_D")) {
       isHorizontalLocked = true;
       lockedKey = "D";
   }
   else {
       isHorizontalLocked = false;
   }
}
else if (isHorizontalLocked) {
   if (lockedKey == "A") {
       if (input.isKeyDown("KEY_A")) {
          //move left
       }
       if (!input.isKeyDown("KEY_A")) {
          lockedKey = null;
          isHorizontalLocked = false;
       }
   }
   else if (lockedKey == "D") {
       if (input.isKeyDown("KEY_D")) {
          //move right
       }
       if (!input.isKeyDown("KEY_D")) {
          lockedKey = null;
          isHorizontalLocked = false;
       }
   }
} 
```

我认为这应该可行，但如果有人发现错误，请告诉我，我会修复它。

# html - 无法从包含谷歌分析页面的 iframe 登录

> ID：11873358
> 
> 赞同：0
> 
> 时间：2012-08-08T21:20:41.887
> 
> 标签：html, iframe, google-analytics

我想使用一个 iframe 来显示谷歌分析正在为我跟踪的一些指标。

我这样使用它：

```
<iframe src="https://www.google.com/analytics/" style="width: 1158px; height: 640px"></iframe> 
```

该页面已显示，但当 iframe 显示在浏览器中时，我无法从 iframe 登录。是否应该添加更多内容，以便我可以从我的网页本身登录到分析？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T22:10:05.343

我相信出于安全原因，谷歌不允许从 iframe 访问登录页面。这个想法是，用户更难区分连接到实际谷歌网站的合法用途和虚假登录收集网站。

# c# - 列表框项目被放置在彼此之上

> ID：11873361
> 
> 赞同：1
> 
> 时间：2012-08-08T21:20:53.233
> 
> 标签：c#, wpf

我似乎无法弄清楚为什么列表框项目彼此重叠......它们应该在彼此下方。这是一些标记和代码。

```
<ListBox x:Name="DeviceList" Background="#ff4c4c4c" BorderThickness="0" ScrollViewer.CanContentScroll="False" MouseEnter="DeviceList_MouseEnter" MouseLeave="DeviceList_MouseLeave" 
                     ManipulationBoundaryFeedback="DeviceList_ManipulationBoundaryFeedback" ItemContainerStyle="{DynamicResource ResourceKey=ListBoxItemStyle}" PreviewMouseDown="DeviceList_PreviewMouseDown" 
                     PreviewMouseMove="DeviceList_PreviewMouseMove" PreviewMouseUp="DeviceList_PreviewMouseUp" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" DockPanel.Dock="Bottom">
                <ListBox.Resources>
                    <ResourceDictionary>
                        <ResourceDictionary.MergedDictionaries>
                            <ResourceDictionary Source="..\Utilities\Resources\Themes\Slider.xaml"></ResourceDictionary>
                        </ResourceDictionary.MergedDictionaries>
                    </ResourceDictionary>
                </ListBox.Resources>
            </ListBox>

#region Constructors
    /// <summary>
    /// Constructor.
    /// </summary>
    public ConfiguratorView()
    {
        InitializeComponent();

        foreach (Device device in (Application.Current.Windows[1].DataContext as ConfiguratorViewModel).AvailableDevices)
        {
            devices.Add(AddDevice(device.Icon + "_def", device.Description));
        }

        DeviceList.ItemsSource = devices;
    }
    #endregion

    #region Internal Members
    /// <summary>
    /// Add the device to the list of devices.
    /// </summary>
    /// <param name="icon"></param>
    /// <param name="description"></param>
    /// <returns></returns>
    private Canvas AddDevice(string icon, string description)
    {
        Canvas canvas = new Canvas();
        canvas.Name = icon;

        ContentControl backgroundContent = new ContentControl();
        Label label = new Label();

        backgroundContent.Template = Application.Current.FindResource(icon) as ControlTemplate;
        label.Content = description;

        canvas.Children.Add(backgroundContent);
        canvas.Children.Add(label);

        return canvas;
    } 
```

设备列表将画布添加为项目...然后我将 ItemsSource 设置为列表。加载它会在最后一个图标的顶部显示所有图标。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:28:23.380

因为 Canvas.Top 默认为 NaN，所以一切都将出现在彼此之上。

您可以手动计算适当的 Canvas.Top 值，但我建议：

1.  使用描述和图标的属性使设备对象保持简单

2.  为 ListBox 项创建一个[DataTemplate](http://msdn.microsoft.com/en-us/library/ms742521.aspx)以显示这些属性。

编辑：

例如（我没有测试过这个）

假设您的设备类看起来像这样：

```
public class Device
{
    public string Description { get; set; }
    public object Icon { get; set; } 
} 
```

然后 ListBox 的数据模板可能如下所示：

```
<ListBox ItemsSource="{Binding Devices}">
    <ListBox.ItemsTemplate>
        <DataTemplate>
            <Canvas>
                <!-- add items here -->
                <TextBlock Text="{Binding Description}" Canvas.Top="5" />
            <Canvas>
        </DataTemplate>
    </ListBox.ItemsTemplate>
</ListBox> 
```

# jquery - jQuery滚动效果不起作用

> ID：11873364
> 
> 赞同：0
> 
> 时间：2012-08-08T21:21:01.550
> 
> 标签：jquery, scroll

我试图在我的网站上实现[这一点](http://www.sycha.com/jquery-smooth-scrolling-internal-anchor-links)，但它根本不起作用。有人知道我要去哪里错了吗？

[包含 jQuery 代码但没有任何反应的网站](http://www.haselden.co.uk/james/docs/index.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T21:31:34.177

这是平滑滚动教程提供的代码：

```
jQuery(document).ready(function($) {
    $(".scroll").click(function(event){     
        event.preventDefault();
        $('html,body').animate({scrollTop:$(this.hash).offset().top}, 500);
    });
}); 
```

这是您页面上的代码：

```
$('html,body').animate({scrollTop:$('[name="'+this.hash.substring(1)+'"]').offset().top}, 500); 
```

您使用的代码是本教程在使用命名锚时提供的替代方法。但是，这意味着替换原始代码的相应部分。我相信你应该拥有的是：

```
jQuery(document).ready(function($) {
    $(".scroll").click(function(event){     
        event.preventDefault();
        $('html,body').animate({scrollTop:$('[name="'+this.hash.substring(1)+'"]').offset().top}, 500);
    });
}); 
```

# android - 挂在 inStream.readline() 上的 Android TCP 应用程序

> ID：11873366
> 
> 赞同：2
> 
> 时间：2012-08-08T21:21:10.577
> 
> 标签：android, sockets, tcp, inputstream

这是[这个问题](https://stackoverflow.com/questions/11847092/android-tcp-does-not-flush-until-socket-is-closed/11848643#comment15771685_11848643)的延续，因为它回答了我的原始问题，但它没有解决错误。

问题：

*   如何修复挂在这条线上的代码 **inStream.readline()**

我的意图：

1.  这是一个线程，将循环检查是否有 outMessage，如果有，它将发送消息。
2.  接下来，它将检查流内是否有任何内容，如果有，它会将其发送到我的主要活动中的处理程序。
3.  最后，它会休眠 1 秒钟，然后再次检查。
4.  这应该允许我多次读/写，而无需关闭和打开套接字。

问题：

*   它的阅读和写作更好，但仍然无法正常工作

现在发生了什么：

*   如果 outMessage 用一个值初始化，则在与服务器连接时，套接字：
    1.  写入并刷新值（服务器接收和响应）
    2.  更新 outMessage 的值（根据我的硬编码方式为 null 或“x”）
    3.  读取并显示来自服务器的响应消息
    4.  重新进入下一个循环
    5.  如果我将 outMessage 设置为 null，它会跳过 if 语句正确然后挂起；否则，如果我将 outMessage 设置为一个字符串（比如说“x”），它会遍历整个 if 语句，然后挂起。
        *   它**挂起**的代码是**inStream.readline()**调用之一（我目前有一个注释掉）。

附加信息： - 连接后，我可以在“发送”框中输入，提交（更新 outMessage 值），然后断开连接。重新连接后，它将读取该值并再次执行序列，直到它卡在同一条线上。

自引用问题以来的更改： - 将 outMessage 和 connectionStatus 都设为“易失性” - 在必要的地方添加了行尾分隔符。

代码：

```
 public void run() { 
            while (connectionStatus != TCP_SOCKET_STATUS_CONNECTED) {
                try {
                    Thread.sleep(500);  
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
            while (connectionStatus == TCP_SOCKET_STATUS_CONNECTED) {
                try {   
                    if (outMessage != null){                                            
                        OutStream.writeBytes(outMessage + "\n");                    
                        OutStream.flush();                                          
                        sendMessageToAllUI(0, MAINACTIVITY_SET_TEXT_STATE, "appendText" , "OUT TO SERVER: " + outMessage);
                        outMessage = "x";                                           
                    }                                                           
                    Thread.sleep(100);
 //             if (InStream.readLine().length() > 0) {                             
                        String modifiedSentence = InStream.readLine();              
                        sendMessageToAllUI(0, MAINACTIVITY_SET_TEXT_STATE, "appendText" , "IN FROM SERVER: " + modifiedSentence);
//                  }                                                   
                    Thread.sleep(1000);
                } catch (IOException e) {                               
                    connectionLost();
                    break;
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }                               
        } 
```

制作套接字的线程：

```
public void run() {
        setName("AttemptConnectionThread");
        connectionStatus = TCP_SOCKET_STATUS_CONNECTING;
        try {
            SocketAddress sockaddr = new InetSocketAddress(serverIP, port);
            tempSocketClient = new Socket(); // Create an unbound socket

            // This method will block no more than timeoutMs. If the timeout occurs, SocketTimeoutException is thrown.
            tempSocketClient.connect(sockaddr, timeoutMs);
            OutStream = new DataOutputStream(tempSocketClient.getOutputStream());
            InStream = new BufferedReader(new InputStreamReader(tempSocketClient.getInputStream()));
            socketClient = tempSocketClient;
            socketClient.setTcpNoDelay(true);
            connected(); 
        } catch (UnknownHostException e) {
            connectionFailed();
        } catch (SocketTimeoutException e) {
            connectionFailed();
        } catch (IOException e) {
            // Close the socket
            try {
                tempSocketClient.close();
            } catch (IOException e2) {
            }
            connectionFailed();
            return;
        }
    } 
```

服务器：

```
public static void main(String[] args) throws IOException {
    String clientSentence;
    String capitalizedSentence;
    try {
        ServerSocket welcomeSocket = new ServerSocket(8888);
        SERVERIP = getLocalIpAddress();
        System.out.println("Connected and waiting for client input!\n Listening on IP: " + SERVERIP +"\n\n");
        Socket connectionSocket = welcomeSocket.accept();
        BufferedReader inFromClient = new BufferedReader(new InputStreamReader(connectionSocket.getInputStream()));
        DataOutputStream outToClient = new DataOutputStream(connectionSocket.getOutputStream());
        while(true)
        {
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            clientSentence = inFromClient.readLine();
            System.out.println("clientSentance == " + clientSentence);
            String ip = connectionSocket.getInetAddress().toString().substring(1);
            if(clientSentence != null)
            {
                System.out.println("In from client ("+ip+")("+ System.currentTimeMillis() +"): "+clientSentence);
                capitalizedSentence = clientSentence.toUpperCase() + '\n';
                outToClient.writeBytes(capitalizedSentence + '\n');
                System.out.println("Out to client ("+ip+"): "+capitalizedSentence);
            }
        }
    } catch (IOException e) {
        //if server is already running, it will not open new port but instead re-print the open ports information
         SERVERIP = getLocalIpAddress();
         System.out.println("Connected and waiting for client input!\n");
         System.out.println("Listening on IP: " + SERVERIP +"\n\n");

    }
} 
```

提前致谢！

编辑：

*   更新后添加服务器代码
*   我尝试为套接字设置 SoTimout，但把它拿回来了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T21:47:53.523

您的服务器专门设计用于从客户端接收一行并发送回一行。看代码：

```
 while (true) {
        Socket connectionSocket = welcomeSocket.accept();
        BufferedReader inFromClient = new BufferedReader(
                new InputStreamReader(connectionSocket.getInputStream()));
        DataOutputStream outToClient = new DataOutputStream(
                connectionSocket.getOutputStream());

        clientSentence = inFromClient.readLine();
        String ip = connectionSocket.getInetAddress().toString()
                .substring(1);
        System.out.println("In from client (" + ip + "): "
                + clientSentence);
        if (clientSentence != null) {
            capitalizedSentence = clientSentence.toUpperCase() + '\n';
            System.out.println("Out to client (" + ip + "): "
                    + capitalizedSentence);
            outToClient.writeBytes(capitalizedSentence + "\n");
        } 
```

请注意，在循环内部，它接受一个新连接，只读取一行，然后只写入一行。它不会关闭连接。它并没有明智地结束谈话。它只是停止阅读。

与该服务器一起工作的客户端必须连接，只发送一行，只读回一行，然后客户端必须关闭连接。你的客户不这样做。为什么？因为你不知道那是你必须做的。为什么？因为你没有设计……没有计划。

所以这是你的具体问题。但是，请让我敦促您*退后*一步，彻底改变您的方法。在编写单行代码之前，请实际设计并指定字节级别的协议。协议应该说明发送什么数据、如何分隔消息、谁发送什么时间、谁关闭连接等等。

否则，无法调试您的代码。查看上面的服务器代码，是否正确？嗯，谁知道呢。因为不清楚它应该做什么。当您编写客户端时，您假设服务器以一种方式运行。这个假设有效吗？服务器坏了吗？谁知道呢，因为没有关于服务器应该做什么的规范。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T21:48:25.400

您需要检查是否有可用的数据：

```
if (InStream.available > 0) {                                                      
   String modifiedSentence = InStream.readLine();
   sendMessageToAllUI(0, MAINACTIVITY_SET_TEXT_STATE, "appendText" , "IN FROM SERVER: " + modifiedSentence); 
} 
```

但老实说，即使这样也不是很理想，因为您无法保证会收到 eond-of-line。如果服务器发送了几个字节但从不发送行尾，那么您仍然会永远阻塞。生产套接字代码不应该依赖，`readLine`而是读入缓冲区并检查该缓冲区的行尾（或您的协议需要的任何标准）。

* * *

读得不够仔细，我以为`InStream`是一个`InputStream`例子。 `InputStream`有`available`。 `InputStreamReader`has `ready`（这反过来又调用`InputStream.available`。只要您保留对其中任何一个的引用，那么您就可以查看是否有数据可供读取。

# python - Django 查询集 - 按字段值排序记录 - 首先显示字段名称 = 值的记录

> ID：11873368
> 
> 赞同：1
> 
> 时间：2012-08-08T21:21:16.667
> 
> 标签：python, django, django-queryset

这是模型：

```
TYPE_CHOICES = (
('x','Some X'),
('y','Some Y'),
('z', 'Some Z'),
)

class MyModel(models.Model):
    some_type = models.CharField(max_length=1, choices=TYPE_CHOICES)
    desc = models.TextField()
    date_added = models.DateFimeField() 
```

我想先获取记录，`some_type='x'`然后再获取其他记录（都按`date_added`每个“组”排序）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T21:25:25.660

使用[`order_by`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.order_by)?

```
MyModel.objects.all().order_by("some_type", "date_added") 
```

# qt - QStyleSheet 中的静态 Gif 动画

> ID：11873372
> 
> 赞同：1
> 
> 时间：2012-08-08T21:21:43.607
> 
> 标签：qt, stylesheet, gif, animated, qtstylesheets

我想用样式表自定义 QProgressBar 的外观。我想给它那种动画的、“不确定的”外观。所以我制作了一个动画 GIF 来贴在`QProgressBar::chunk`.

它显示得很好，但图像是静态的，没有动画。有什么建议或解决方法吗？

我在 OS X 10.8 上运行 PyQt 4.9.4。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T20:10:08.660

因此，这是您面临的一个稍微复杂的问题。

QProgressBar 依赖于来自循环的信息或某个确定的数量来表示完成百分比。当您通过代码设置值时，Qt 将设置进度条的值，重绘它并显示更新后的值。这实际上需要在您的循环中进行几毫秒的处理。如果你不这样做，那么 Qt 的优化将永远不会重绘。这是同步的。

您想要的“不确定”外观（如 AJAX gif 微调器或条形图）在 Web 上使用，因为该进程实际上已从客户端移出并在服务器上进行处理并等待响应。客户端的进程完全没有被阻塞，所以可以随电影自由更新界面。

您可以通过在 QLabel 中使用 QMovie 来实现您想要的外观：

```
movie = QMovie()
movie.setFileName('/path/to/ajax_loader.gif')
movie.start()

label = QLabel(parent)
label.setMovie(movie) 
```

这将使您的不确定微调器。但是，它只会在事件循环正在处理事件时播放。一旦你开始你的实际工作进程，它就会阻塞事件循环，这样你的电影就会开始播放。

您实际上需要将事件“泵送”给循环中的播放器以使其更新。您可以通过以下方式做到这一点：

```
app = QApplication.instance()

# show my label
label.show()

for obj in objs:
    # process stuff on my obj
    app.processEvents()

# hide the label
label.hide() 
```

当然，根据您在循环中执行的每个单独操作需要多长时间，您的微调器/加载器电影将“卡住”，直到再次处理事件。

确实，实现您想要的外观的最佳方法是使用线程应用程序。您可以使用 QThread 执行所有操作，并在处理时向用户显示加载器图像。这更类似于 ajax 的工作方式 - 主 Qt 事件循环将在您的工作线程处理所有内容时继续运行 - 在未知的时间内。这是异步的。

就像是：

```
class MyThread(QThread):
    def run( self ):
       # perform some actions
       ...

class MyDialog(QDialog):
    def __init__( self, parent ):
        # initialize the dialog
        ...
        self._thread = MyThread(self)
        self._thread.finished.connect(self.refreshResults)

        self.refresh()

    def refresh( self ):
        # show the ajax spinner
        self._ajaxLabel.show()

        # start the thread and wait for the results
        self._thread.start()

    def refreshResults( self ):
        # hide the ajax spinner
        self._ajaxLabel.hide()

        # process the thread results
        ... 
```

我有一个加载器小部件，每当我在我的 GUI 库中执行此类操作时都会使用它。如果您想查看/使用它的代码，请访问[http://dev.projexsoftware.com/projects/projexui](http://dev.projexsoftware.com/projects/projexui)并且该类是 XLoaderWidget (projexui.widgets.xloaderwidget)

设置与上面相同，但只是：

```
from projexui.widgets.xloaderwidget import XLoaderWidget

class MyThread(QThread):
    def run( self ):
       # perform some actions
       ...

class MyDialog(QDialog):
    def __init__( self, parent ):
        # initialize the dialog
        ...
        self._thread = MyThread(self)
        self._thread.finished.connect(self.refreshResults)

        self.refresh()

    def refresh( self ):
        # show the ajax spinner
        XLoaderWidget.start(self)

        # start the thread and wait for the results
        self._thread.start()

    def refreshResults( self ):
        # hide the ajax spinner
        XLoaderWidget.stop(self)

        # process the thread results
        ... 
```

# c# - 重用在可移植类库中创建的 LINQ 表达式

> ID：11873374
> 
> 赞同：0
> 
> 时间：2012-08-08T21:21:57.377
> 
> 标签：c#, .net, windows-phone-7, compiled-query, portable-class-library

是否可以在可移植类库中创建 LINQ 表达式并在应用程序的其他部分重用该表达式？对我来说，一个方便的用例是在 CompiledQuerys 中跨平台使用这些表达式，而不是多次复制/粘贴相同的代码。

到目前为止，我所有的尝试最终都抛出了一些或多或少毫无意义的运行时异常（`NullReferenceException`, Column not found..）。我猜 PCL 中的 LINQ 表达式的处理方式与 WP 应用程序中的处理方式不同？

```
public class SomeClassNotInPCL
{
    private static readonly Func<Context, int, MyClass> CompiledQuery = 
        CompiledQuery.Compile(ClassFarAway.MethodInsidePCL());
}

public class ClassFarAway
{
    private static Expression<Func<IContext, int, MyClass>> MethodInsidePCL()
    {
        return (context, id) => context.MyClass.FirstOrDefault(m => m.Id == id);
    }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-08T21:26:32.617

这样的事情怎么样？

```
var commonExpressions = new Dictionary<CommonRegEx, Regex>();

public enum CommonRegEx{
   Phone,
   Email,
   SSN
} 
```

# c# - 将占位符文本添加到文本框

> ID：11873378
> 
> 赞同：169
> 
> 时间：2012-08-08T21:22:29.063
> 
> 标签：c#, wpf, placeholder

我正在寻找一种将占位符文本添加到文本框的方法，就像使用 html5 中的文本框一样。

即如果文本框没有文本，则添加文本`Enter some text here`，当用户单击它时，占位符文本消失并允许用户输入自己的文本，如果文本框失去焦点并且仍然没有文本，则占位符是添加回文本框。

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-08-08T21:34:03.987

那不就是这样吗：

```
Textbox myTxtbx = new Textbox();
myTxtbx.Text = "Enter text here...";

myTxtbx.GotFocus += GotFocus.EventHandle(RemoveText);
myTxtbx.LostFocus += LostFocus.EventHandle(AddText);

public void RemoveText(object sender, EventArgs e)
{
    if (myTxtbx.Text == "Enter text here...") 
    {
     myTxtbx.Text = "";
    }
}

public void AddText(object sender, EventArgs e)
{
    if (string.IsNullOrWhiteSpace(myTxtbx.Text))
        myTxtbx.Text = "Enter text here...";
} 
```

那只是伪代码，但概念就在那里。

* * *

## 回答 #2

> 赞同：103
> 
> 时间：2014-01-29T18:17:17.323

您可以使用它，它对我有用，并且是非常简单的解决方案。

```
 <Style x:Key="placeHolder" TargetType="{x:Type TextBox}" BasedOn="{StaticResource {x:Type TextBox}}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type TextBox}">
                    <Grid>
                        <TextBox Text="{Binding Path=Text,
                                                RelativeSource={RelativeSource TemplatedParent}, 
                                                Mode=TwoWay,
                                                UpdateSourceTrigger=PropertyChanged}"
                                 x:Name="textSource" 
                                 Background="Transparent" 
                                 Panel.ZIndex="2" />
                        <TextBox Text="{TemplateBinding Tag}" Background="{TemplateBinding Background}" Panel.ZIndex="1">
                            <TextBox.Style>
                                <Style TargetType="{x:Type TextBox}">
                                    <Setter Property="Foreground" Value="Transparent"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding Path=Text, Source={x:Reference textSource}}" Value="">
                                            <Setter Property="Foreground" Value="LightGray"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBox.Style>
                        </TextBox>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

用法：

```
<TextBox Style="{StaticResource placeHolder}" Tag="Name of customer" Width="150" Height="24"/> 
```

‎‎‎‎‎‎‎‎‎‎‎‎‎‎‎‎‎‎‎‎‎‎‎‎‎‎‎‎‎‎‎‎‎‎‎‎‎‎‎‎

* * *

## 回答 #3

> 赞同：54
> 
> 时间：2014-03-14T12:49:53.770

除了处理焦点进入和焦点离开事件来设置和删除占位符文本之外，还可以使用 Windows SendMessage 函数将 `EM_SETCUEBANNER`消息发送到我们的文本框来为我们完成工作。

这可以通过两个简单的步骤来完成。首先，我们需要公开 Windows`SendMessage`功能。

```
private const int EM_SETCUEBANNER = 0x1501;

[DllImport("user32.dll", CharSet = CharSet.Auto)]
private static extern Int32 SendMessage(IntPtr hWnd, int msg, int wParam, [MarshalAs(UnmanagedType.LPWStr)]string lParam); 
```

然后只需使用我们的文本框的句柄、EM_SETCUEBANNER 的值和我们要设置的文本来调用该方法。

```
SendMessage(textBox1.Handle, EM_SETCUEBANNER, 0, "Username");
SendMessage(textBox2.Handle, EM_SETCUEBANNER, 0, "Password"); 
```

参考：[为文本框设置占位符文本（提示文本）](http://www.fluxbytes.com/csharp/set-placeholder-text-for-textbox-cue-text/)

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2016-05-18T07:11:52.867

将此类添加到您的项目并构建您的解决方案。单击 Visual Studio 上的工具箱，您将看到一个名为 PlaceholderTextBox 的新文本框组件。删除表单设计上的当前文本框并替换为 PlaceHolderTextBox。

[![在此处输入图像描述](../Images/64994657afdb3f19f7b96ee4b55e666a.png)](https://i.stack.imgur.com/BZJd4.png)

PlaceHolderTextBox 有一个属性 PlaceHolderText。设置您想要的任何文本并度过美好的一天:)

```
public class PlaceHolderTextBox : TextBox
{

    bool isPlaceHolder = true;
    string _placeHolderText;
    public string PlaceHolderText
    {
        get { return _placeHolderText; }
        set
        {
            _placeHolderText = value;
            setPlaceholder();
        }
    }

    public new string Text
    {
        get => isPlaceHolder ? string.Empty : base.Text;
        set => base.Text = value;
    }

    //when the control loses focus, the placeholder is shown
    private void setPlaceholder()
    {
        if (string.IsNullOrEmpty(base.Text))
        {
            base.Text = PlaceHolderText;
            this.ForeColor = Color.Gray;
            this.Font = new Font(this.Font, FontStyle.Italic);
            isPlaceHolder = true;
        }
    }

    //when the control is focused, the placeholder is removed
    private void removePlaceHolder()
    {

        if (isPlaceHolder)
        {
            base.Text = "";
            this.ForeColor = System.Drawing.SystemColors.WindowText;
            this.Font = new Font(this.Font, FontStyle.Regular);
            isPlaceHolder = false;
        }
    }
    public PlaceHolderTextBox()
    {
        GotFocus += removePlaceHolder;
        LostFocus += setPlaceholder;
    }

    private void setPlaceholder(object sender, EventArgs e)
    {
        setPlaceholder();
    }

    private void removePlaceHolder(object sender, EventArgs e)
    {
        removePlaceHolder();
    }
} 
```

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2015-10-29T09:38:16.387

这不是我的代码，但我经常使用它，而且效果很好……仅限 XAML

```
<TextBox x:Name="Textbox" Height="23" Margin="0,17,18.8,0" TextWrapping="Wrap" Text="" VerticalAlignment="Top" HorizontalAlignment="Right" ></TextBox>

<TextBlock x:Name="Placeholder" IsHitTestVisible="False" TextWrapping="Wrap" Text="Placeholder Text" VerticalAlignment="Top" Margin="0,20,298.8,0" Foreground="DarkGray" HorizontalAlignment="Right" Width="214">
  <TextBlock.Style>
    <Style TargetType="{x:Type TextBlock}">
      <Setter Property="Visibility" Value="Collapsed"/>
      <Style.Triggers>
        <DataTrigger Binding="{Binding Text, ElementName=Textbox}" Value="">
          <Setter Property="Visibility" Value="Visible"/>
        </DataTrigger>
      </Style.Triggers>
    </Style>
  </TextBlock.Style>
</TextBlock> 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2016-04-28T09:00:55.240

救援的附加属性：

```
public static class TextboxExtensions
{
    public static readonly DependencyProperty PlaceholderProperty = 
        DependencyProperty.RegisterAttached(
            "Placeholder", 
            typeof(string), 
            typeof(TextboxExtensions), 
            new PropertyMetadata(default(string), propertyChangedCallback: PlaceholderChanged)
            );

    private static void PlaceholderChanged(DependencyObject dependencyObject, DependencyPropertyChangedEventArgs args)
    {
        var tb = dependencyObject as TextBox;

        if (tb == null)
            return;

        tb.LostFocus -= OnLostFocus;
        tb.GotFocus -= OnGotFocus;

        if (args.NewValue != null)
        {
            tb.GotFocus += OnGotFocus;
            tb.LostFocus += OnLostFocus;
        }

        SetPlaceholder(dependencyObject, args.NewValue as string);

        if (!tb.IsFocused)
            ShowPlaceholder(tb);
    }

    private static void OnLostFocus(object sender, RoutedEventArgs routedEventArgs)
    {
        ShowPlaceholder(sender as TextBox);
    }

    private static void OnGotFocus(object sender, RoutedEventArgs routedEventArgs)
    {
        HidePlaceholder(sender as TextBox);
    }

    [AttachedPropertyBrowsableForType(typeof(TextBox))]
    public static void SetPlaceholder(DependencyObject element, string value)
    {
        element.SetValue(PlaceholderProperty, value);
    }

    [AttachedPropertyBrowsableForType(typeof(TextBox))]
    public static string GetPlaceholder(DependencyObject element)
    {
        return (string)element.GetValue(PlaceholderProperty);
    }

    private static void ShowPlaceholder(TextBox textBox)
    {
        if (string.IsNullOrWhiteSpace(textBox.Text))
        {
            textBox.Text = GetPlaceholder(textBox);
        }
    }

    private static void HidePlaceholder(TextBox textBox)
    {
        string placeholderText = GetPlaceholder(textBox);

        if (textBox.Text == placeholderText)
            textBox.Text = string.Empty;
    }
} 
```

用法：

```
<TextBox Text="hi" local:TextboxExtensions.Placeholder="Hello there"></TextBox> 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2016-12-12T17:05:49.513

虽然使用`EM_SETCUEBANNER`消息可能是最简单的，但我不喜欢的一件事是当控件获得焦点时占位符文本会消失。当我填写表格时，这是我的一个小烦恼。我必须单击它才能记住该字段的用途。

因此，这是 WinForms 的另一种解决方案。它覆盖`Label`在控件的顶部，仅当用户开始键入时它才会消失。

这当然不是防弹的。它接受 any `Control`，但我只用`TextBox`. 它可能需要修改才能与某些控件一起使用。如果您需要在特定情况下对其进行一些修改，该方法将返回`Label`控件，但这可能永远不需要。

像这样使用它：

```
SetPlaceholder(txtSearch, "Type what you're searching for"); 
```

这是方法：

```
/// <summary>
/// Sets placeholder text on a control (may not work for some controls)
/// </summary>
/// <param name="control">The control to set the placeholder on</param>
/// <param name="text">The text to display as the placeholder</param>
/// <returns>The newly-created placeholder Label</returns>
public static Label SetPlaceholder(Control control, string text) {
    var placeholder = new Label {
        Text = text,
        Font = control.Font,
        ForeColor = Color.Gray,
        BackColor = Color.Transparent,
        Cursor = Cursors.IBeam,
        Margin = Padding.Empty,

        //get rid of the left margin that all labels have
        FlatStyle = FlatStyle.System,
        AutoSize = false,

        //Leave 1px on the left so we can see the blinking cursor
        Size = new Size(control.Size.Width - 1, control.Size.Height),
        Location = new Point(control.Location.X + 1, control.Location.Y)
    };

    //when clicking on the label, pass focus to the control
    placeholder.Click += (sender, args) => { control.Focus(); };

    //disappear when the user starts typing
    control.TextChanged += (sender, args) => {
        placeholder.Visible = string.IsNullOrEmpty(control.Text);
    };

    //stay the same size/location as the control
    EventHandler updateSize = (sender, args) => {
        placeholder.Location = new Point(control.Location.X + 1, control.Location.Y);
        placeholder.Size = new Size(control.Size.Width - 1, control.Size.Height);
    };

    control.SizeChanged += updateSize;
    control.LocationChanged += updateSize;

    control.Parent.Controls.Add(placeholder);
    placeholder.BringToFront();

    return placeholder;
} 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2016-06-11T10:27:50.227

基于 ExceptionLimeCat 的回答，改进：

```
Color farbe;
string ph = "Placeholder-Text";

private void Form1_Load(object sender, EventArgs e)
{
    farbe = myTxtbx.ForeColor;
    myTxtbx.GotFocus += RemoveText;
    myTxtbx.LostFocus += AddText;
    myTxtbx.Text = ph;
}

public void RemoveText(object sender, EventArgs e)
{
    myTxtbx.ForeColor = farbe;
    if (myTxtbx.Text == ph)
        myTxtbx.Text = "";
}

public void AddText(object sender, EventArgs e)
{
    if (String.IsNullOrWhiteSpace(myTxtbx.Text))
    {
        myTxtbx.ForeColor = Color.Gray;
        myTxtbx.Text = ph;
    }
} 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-02-20T08:07:27.347

这意味着您有一个按钮，可让您执行操作，例如登录或其他操作。在执行操作之前，请检查文本框是否已填写。如果没有，它将替换文本

```
 private void button_Click(object sender, EventArgs e)
 {
     string textBoxText = textBox.Text;

     if (String.IsNullOrWhiteSpace(textBoxText))
     {
         textBox.Text = "Fill in the textbox";
     }
 }

 private void textBox_Enter(object sender, EventArgs e)
 {
     TextBox currentTextbox = sender as TextBox;
     if (currentTextbox.Text == "Fill in the textbox")
     {
         currentTextbox.Text = "";
     }
 } 
```

这有点俗气，但是检查文本以获取您提供的值是我能做的最好的 atm，而不擅长 c# 以获得更好的解决方案。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2012-08-08T22:02:19.647

您可以[获取默认值`Template`](https://stackoverflow.com/questions/1559261/control-template-for-existing-controls-in-wpf)，通过覆盖 a 对其进行修改`TextBlock`，并使用 a`Style`添加以正确状态隐藏和显示它的触发器。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2021-06-16T04:15:17.850

我知道这是一个旧线程，但 .NET Core 和 .NET 5.0 已经实现了该`TextBox.PlaceholderText`属性。

[https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.textbox.placeholdertext?view=net-5.0](https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.textbox.placeholdertext?view=net-5.0)

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2017-01-07T09:42:42.030

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;

namespace App_name
{
   public class CustomTextBox : TextBox
    {
        private string Text_ = "";
        public CustomTextBox() : base()
        {}

        public string setHint
        {
            get { return Text_; }
            set { Text_ = value; }
        }
        protected override void OnGotFocus(RoutedEventArgs e)
        {
            base.OnGotFocus(e);
            if (Text_.Equals(this.Text))
                this.Clear();
        }
        protected override void OnLostFocus(RoutedEventArgs e)
        {
            base.OnLostFocus(e);
            if (String.IsNullOrWhiteSpace(this.Text))
                this.Text = Text_;
        }
    }
}
>    xmlns:local="clr-namespace:app_name"
>  <local:CustomTextBox
>                 x:Name="id_number_txt"
>                 Width="240px"
>                 Height="auto"/> 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2020-09-18T20:07:41.677

这是 texbox 的扩展方法。只需以编程方式添加占位符文本：

```
myTextBox.AddPlaceholderText("Hello World!"); 
```

扩展方法：

```
public static void AddPlaceholderText(this TextBox textBox, string placeholderText)
        {
            if (string.IsNullOrWhiteSpace(textBox.Text))
                textBox.Text = placeholderText;
            textBox.SetResourceReference(Control.ForegroundProperty,
                textBox.Text != placeholderText
                    ? "SystemControlForegroundBaseHighBrush"
                    : "SystemControlForegroundBaseMediumBrush");
            var ignoreSelectionChanged = false;
            textBox.SelectionChanged += (sender, args) =>
            {
                if (ignoreSelectionChanged) { ignoreSelectionChanged = false; return; }
                if (textBox.Text != placeholderText) return;
                ignoreSelectionChanged = true;
                textBox.Select(0, 0);
            };
            var lastText = textBox.Text;
            var ignoreTextChanged = false;
            textBox.TextChanged += (sender, args) =>
            {
                if (ignoreTextChanged) { ignoreTextChanged = false; return; }
                if (string.IsNullOrWhiteSpace(textBox.Text))
                {
                    ignoreTextChanged = true;
                    textBox.Text = placeholderText;
                    textBox.Select(0, 0);
                }
                else if (lastText == placeholderText)
                {
                    ignoreTextChanged = true;
                    textBox.Text = textBox.Text.Substring(0, 1);
                    textBox.Select(1, 0);
                }

                textBox.SetResourceReference(Control.ForegroundProperty,
                    textBox.Text != placeholderText
                        ? "SystemControlForegroundBaseHighBrush"
                        : "SystemControlForegroundBaseMediumBrush");
                lastText = textBox.Text;
            };
        } 
```

快乐编码，BierDav

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2017-11-10T11:22:45.510

在这里，我提出了受@Kemal Karadag 启发的解决方案。

我注意到这里发布的每个解决方案都依赖于焦点，

虽然我希望我的占位符是 Google Chrome 中标准 HTML 占位符的精确克隆。

当框聚焦时，而不是隐藏/显示占位符，

我根据框的文本长度隐藏/显示占位符：

如果框为空，则显示占位符，如果您在框中键入，则占位符消失。

由于它继承自标准文本框，因此您可以在工具箱中找到它！

```
using System;
using System.Drawing;
using System.Windows.Forms;

public class PlaceHolderTextBox : TextBox
{
    private bool isPlaceHolder = true;
    private string placeHolderText;

    public string PlaceHolderText
    {
        get { return placeHolderText; }
        set
        {
            placeHolderText = value;
            SetPlaceholder();
        }
    }

    public PlaceHolderTextBox()
    {
        TextChanged += OnTextChanged;
    }

    private void SetPlaceholder()
    {
        if (!isPlaceHolder)
        {
            this.Text = placeHolderText;
            this.ForeColor = Color.Gray;
            isPlaceHolder = true;
        }
    }

    private void RemovePlaceHolder()
    {
        if (isPlaceHolder)
        {
            this.Text = this.Text[0].ToString(); // Remove placeHolder text, but keep the character we just entered
            this.Select(1, 0); // Place the caret after the character we just entered
            this.ForeColor = System.Drawing.SystemColors.WindowText;
            isPlaceHolder = false;
        }
    }

    private void OnTextChanged(object sender, EventArgs e)
    {
        if (this.Text.Length == 0)
        {
            SetPlaceholder();
        }
        else
        {
            RemovePlaceHolder();
        }
    }
} 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2014-02-14T17:55:50.500

我想出了一种对我有用的方法，但这只是因为我愿意使用文本框名称作为占位符。见下文。

```
public TextBox employee = new TextBox();

private void InitializeHomeComponent()
{
    //
    //employee
    //
    this.employee.Name = "Caller Name";
    this.employee.Text = "Caller Name";
    this.employee.BackColor = System.Drawing.SystemColors.InactiveBorder;
    this.employee.Location = new System.Drawing.Point(5, 160);
    this.employee.Size = new System.Drawing.Size(190, 30);
    this.employee.TabStop = false;
    this.Controls.Add(employee);
    // I loop through all of my textboxes giving them the same function
    foreach (Control C in this.Controls)
    {
        if (C.GetType() == typeof(System.Windows.Forms.TextBox))
        {
            C.GotFocus += g_GotFocus;
            C.LostFocus += g_LostFocus;
        }
     }
 }

    private void g_GotFocus(object sender, EventArgs e)
    {
        var tbox = sender as TextBox;
        tbox.Text = "";
    }

    private void g_LostFocus(object sender, EventArgs e)
    {
        var tbox = sender as TextBox;
        if (tbox.Text == "")
        {
            tbox.Text = tbox.Name;
        }
    } 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-11-18T15:20:04.807

试试下面的代码：

```
<TextBox x:Name="InvoiceDate" Text="" Width="300"  TextAlignment="Left" Height="30" Grid.Row="0" Grid.Column="3" Grid.ColumnSpan="2" />
                    <TextBlock IsHitTestVisible="False" Text="Men att läsa" Width="300"  TextAlignment="Left" Height="30" Grid.Row="0" Grid.Column="3" Grid.ColumnSpan="2" Padding="5, 5, 5, 5"  Foreground="LightGray">
                        <TextBlock.Style>
                            <Style TargetType="{x:Type TextBlock}">
                                <Setter Property="Visibility" Value="Collapsed"/>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Text, ElementName=InvoiceDate}" Value="">
                                        <Setter Property="Visibility" Value="Visible"/>
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding ElementName=InvoiceDate, Path=IsFocused}" Value="True">
                                        <Setter Property="Visibility" Value="Collapsed"/>
                                    </DataTrigger>

                                </Style.Triggers>
                            </Style>
                        </TextBlock.Style>
                    </TextBlock> 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-01-31T05:49:07.013

您也可以在单击鼠标时执行此操作，假设您的占位符文本是“User_Name”

```
 private void textBox1_MouseClick(object sender, MouseEventArgs e)
 {
     if(textBox1.Text == "User_Name")
          textBox1.Text = "";
 } 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-07-31T04:54:31.503

你也可以这样试试。。

调用函数

```
TextboxPlaceHolder(this.textBox1, "YourPlaceHolder"); 
```

写这个函数

```
private void TextboxPlaceHolder(Control control, string PlaceHolderText)
{
        control.Text = PlaceHolderText;
        control.GotFocus += delegate (object sender, EventArgs args)
        {
            if (cusmode == false)
            {
                control.Text = control.Text == PlaceHolderText ? string.Empty : control.Text;
                //IF Focus TextBox forecolor Black
                control.ForeColor = Color.Black;
            }
        };

        control.LostFocus += delegate (object sender, EventArgs args)
        {
            if (string.IsNullOrWhiteSpace(control.Text) == true)
            {
                control.Text = PlaceHolderText;
                //If not focus TextBox forecolor to gray
                control.ForeColor = Color.Gray;
            }

        };
} 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2016-01-15T06:02:50.703

```
 public void Initialize()
    {
        SetPlaceHolder(loginTextBox, " Логин ");
        SetPlaceHolder(passwordTextBox, " Пароль ");
    }

    public void SetPlaceHolder(Control control, string PlaceHolderText)
    {
        control.Text = PlaceHolderText;
        control.GotFocus += delegate(object sender, EventArgs args) {
            if (control.Text == PlaceHolderText)
            {
                control.Text = "";
            }
        };
        control.LostFocus += delegate(object sender, EventArgs args){
            if (control.Text.Length == 0)
            {
                control.Text = PlaceHolderText;
            }
        };
    } 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-07-23T23:24:08.727

有更好的解决方案，但最简单的解决方案在这里：将文本框文本设置为所需的字符串，然后创建一个删除文本的函数，让该函数在文本框焦点输入事件上触发

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2018-10-11T13:42:55.497

我写了一个可重用的自定义控件，也许它可以帮助需要在他的项目中实现多个占位符文本框的人。
这是带有实例实现示例的自定义类，您可以通过将此代码粘贴到使用 VS 的新 winforms 项目中轻松测试：

```
namespace reusebleplaceholdertextbox
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            // implementation
            CustomPlaceHolderTextbox myCustomTxt = new CustomPlaceHolderTextbox(
                "Please Write Text Here...", Color.Gray, new Font("ARIAL", 11, FontStyle.Italic)
                , Color.Black, new Font("ARIAL", 11, FontStyle.Regular)
                );

            myCustomTxt.Multiline = true;
            myCustomTxt.Size = new Size(200, 50);
            myCustomTxt.Location = new Point(10, 10);
            this.Controls.Add(myCustomTxt);
        }
    }

    class CustomPlaceHolderTextbox : System.Windows.Forms.TextBox
    {
        public string PlaceholderText { get; private set; }
        public Color PlaceholderForeColor { get; private set; }
        public Font PlaceholderFont { get; private set; }

        public Color TextForeColor { get; private set; }
        public Font TextFont { get; private set; }

        public CustomPlaceHolderTextbox(string placeholdertext, Color placeholderforecolor,
            Font placeholderfont, Color textforecolor, Font textfont)
        {
            this.PlaceholderText = placeholdertext;
            this.PlaceholderFont = placeholderfont;
            this.PlaceholderForeColor = placeholderforecolor;
            this.PlaceholderFont = placeholderfont;
            this.TextForeColor = textforecolor;
            this.TextFont = textfont;
            if (!string.IsNullOrEmpty(this.PlaceholderText))
            {
                SetPlaceHolder(true);
                this.Update();
            }
        }

        private void SetPlaceHolder(bool addEvents)
        {
            if (addEvents)
            {  
                this.LostFocus += txt_lostfocus;
                this.Click += txt_click;
            }

            this.Text = PlaceholderText;
            this.ForeColor = PlaceholderForeColor;
            this.Font = PlaceholderFont;
        }

        private void txt_click(object sender, EventArgs e)
        {
            // IsNotFirstClickOnThis:
            // if there is no other control in the form
            // we will have a problem after the first load
            // because we dont other focusable control to move the focus to
            // and we dont want to remove the place holder
            // only on first time the place holder will be removed by click event
            RemovePlaceHolder();
            this.GotFocus += txt_focus;
            // no need for this event listener now
            this.Click -= txt_click;
        }

        private void RemovePlaceHolder()
        {
            this.Text = "";
            this.ForeColor = TextForeColor;
            this.Font = TextFont;
        }
        private void txt_lostfocus(object sender, EventArgs e)
        {
            if (string.IsNullOrEmpty(this.Text))
            {
                // set placeholder again
                SetPlaceHolder(false);
            }
        }

        private void txt_focus(object sender, EventArgs e)
        {
            if (this.Text == PlaceholderText)
            {
                // IsNotFirstClickOnThis:
                // if there is no other control in the form
                // we will have a problem after the first load
                // because we dont other focusable control to move the focus to
                // and we dont want to remove the place holder
                RemovePlaceHolder();
            }
        }
    }
} 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2020-10-24T07:35:12.960

让我们用 PlcaeHoldText 和 PlaceHoldBackround 扩展 TextBox。我从我的项目中删除了一些代码。

告别网格或画布！

```
<TextBox x:Class="VcpkgGui.View.PlaceHoldedTextBox"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:VcpkgGui.View"
             mc:Ignorable="d"
             Name="placeHoldTextBox"
             TextAlignment="Left"
         >
    <TextBox.Resources>
        <local:FrameworkWidthConverter x:Key="getElemWidth"/>
        <local:FrameworkHeightConverter x:Key="getElemHeight"/>
        <VisualBrush x:Key="PlaceHoldTextBrush" TileMode="None" Stretch="None" AlignmentX="Left" AlignmentY="Center" Opacity="1">
            <VisualBrush.Visual>
                <Border Background="{Binding ElementName=placeHoldTextBox, Path=PlaceHoldBackground}"
                        BorderThickness="0"
                        Margin="0,0,0,0"
                        Width="{Binding Mode=OneWay, ElementName=placeHoldTextBox, Converter={StaticResource getElemWidth}}"
                        Height="{Binding Mode=OneWay, ElementName=placeHoldTextBox, Converter={StaticResource getElemHeight}}"
                        >
                    <Label Content="{Binding ElementName=placeHoldTextBox, Path=PlaceHoldText}"
                           Background="Transparent"
                           Foreground="#88000000"
                           HorizontalAlignment="Stretch"
                           VerticalAlignment="Stretch"
                           HorizontalContentAlignment="Left"
                           VerticalContentAlignment="Center"
                           ClipToBounds="True"
                           Padding="0,0,0,0"
                           FontSize="14"
                           FontStyle="Normal"
                           Opacity="1"/>
                </Border>
            </VisualBrush.Visual>
        </VisualBrush>
    </TextBox.Resources>
    <TextBox.Style>
        <Style TargetType="TextBox">
            <Style.Triggers>
                <Trigger Property="Text" Value="{x:Null}">
                    <Setter Property="Background"  Value="{StaticResource PlaceHoldTextBrush}"/>
                </Trigger>
                <Trigger Property="Text" Value="">
                    <Setter Property="Background"  Value="{StaticResource PlaceHoldTextBrush}"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </TextBox.Style>
</TextBox> 
```

```
using System;
using System.Collections.Generic;
using System.Globalization;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace VcpkgGui.View
{
    /// <summary>
    /// PlaceHoldedTextBox.xaml 的交互逻辑
    /// </summary>
    public partial class PlaceHoldedTextBox : TextBox
    {

        public string PlaceHoldText
        {
            get { return (string)GetValue(PlaceHoldTextProperty); }
            set { SetValue(PlaceHoldTextProperty, value); }
        }

        // Using a DependencyProperty as the backing store for PlaceHolderText.  This enables animation, styling, binding, etc...
        public static readonly DependencyProperty PlaceHoldTextProperty =
            DependencyProperty.Register("PlaceHoldText", typeof(string), typeof(PlaceHoldedTextBox), new PropertyMetadata(string.Empty));

        public Brush PlaceHoldBackground
        {
            get { return (Brush)GetValue(PlaceHoldBackgroundProperty); }
            set { SetValue(PlaceHoldBackgroundProperty, value); }
        }

        public static readonly DependencyProperty PlaceHoldBackgroundProperty =
            DependencyProperty.Register(nameof(PlaceHoldBackground), typeof(Brush), typeof(PlaceHoldedTextBox), new PropertyMetadata(Brushes.White));

        public PlaceHoldedTextBox() :base()
        {
            InitializeComponent();
        }
    }

    [ValueConversion(typeof(FrameworkElement), typeof(double))]
    internal class FrameworkWidthConverter : System.Windows.Data.IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
        {
            if(value is FrameworkElement elem)
                return double.IsNaN(elem.Width) ? elem.ActualWidth : elem.Width;
            else
                return DependencyProperty.UnsetValue;
        }

        public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
        {
            return DependencyProperty.UnsetValue;
        }
    }

    [ValueConversion(typeof(FrameworkElement), typeof(double))]
    internal class FrameworkHeightConverter : System.Windows.Data.IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
        {
            if (value is FrameworkElement elem)
                return double.IsNaN(elem.Height) ? elem.ActualHeight : elem.Height;
            else
                return DependencyProperty.UnsetValue;
        }

        public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
        {
            return DependencyProperty.UnsetValue;
        }
    }

} 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2016-08-18T12:54:12.720

我没有使用 TextBox 的 .Text 属性，而是用占位符覆盖了一个 TextBlock。我无法使用 .Text 属性，因为它已绑定到事件。

XAML：

```
<Canvas Name="placeHolderCanvas">
    <TextBox  AcceptsReturn="True" Name="txtAddress" Height="50" Width="{Binding ActualWidth, ElementName=placeHolderCanvas}"
              Tag="Please enter your address"/>
</Canvas> 
```

VB.NET

```
Public Shared Sub InitPlaceholder(canvas As Canvas)
    Dim txt As TextBox = canvas.Children.OfType(Of TextBox).First()
    Dim placeHolderLabel = New TextBlock() With {.Text = txt.Tag,
                                                 .Foreground = New SolidColorBrush(Color.FromRgb(&H77, &H77, &H77)),
                                                 .IsHitTestVisible = False}
    Canvas.SetLeft(placeHolderLabel, 3)
    Canvas.SetTop(placeHolderLabel, 1)
    canvas.Children.Add(placeHolderLabel)
    AddHandler txt.TextChanged, Sub() placeHolderLabel.Visibility = If(txt.Text = "", Visibility.Visible, Visibility.Hidden)
End Sub 
```

结果： [![在此处输入图像描述](../Images/f67d6f0c2c0e4b9bd670035d1b43ea33.png)](https://i.stack.imgur.com/6KVSs.png)

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2015-08-28T14:04:45.283

txtUsuario.Attributes.Add("placeholder", "Texto");

* * *

## 回答 #25

> 赞同：-1
> 
> 时间：2018-08-30T11:41:00.923

WindowsForms TextBox 控件的[非常](https://mking.net/blog/cue-banners-in-winforms)有效的解决方案。（不确定 XAML）。

这也适用于多行模式。

可能它可以扩展到其他控件，例如 ComboBox 控件（未选中）

* * *

## 回答 #26

> 赞同：-2
> 
> 时间：2019-07-31T14:19:43.860

奇迹般有效。

```
public class WTextBox : TextBox
{
    private string _placeholder;

    [Category("Appearance")]
    public string Placeholder
    {
        get { return _placeholder; }
        set
        {
            _placeholder = value ?? string.Empty;
            Invalidate();
        }
    }

    public WTextBox()
    {
        _placeholder = string.Empty;
    }

    protected override void WndProc(ref Message m)
    {
        base.WndProc(ref m);

        if (m.Msg != 0xF || Focused || !string.IsNullOrEmpty(Text) || string.IsNullOrWhiteSpace(_placeholder))
        {
            return;
        }

        using (var g = CreateGraphics())
        {
            TextRenderer.DrawText(g, _placeholder, Font, ClientRectangle, SystemColors.GrayText, BackColor, TextFormatFlags.Left);
        }
    }
} 
```

# scala - 停止 REPL 的热键？

> ID：11873380
> 
> 赞同：9
> 
> 时间：2012-08-08T21:22:37.440
> 
> 标签：scala, read-eval-print-loop

是否有停止/退出 Scala REPL 的热键？

示例：我使用 command 从 SBT 启动 Scala REPL `console`，然后执行一些愚蠢的操作，例如无限循环，并希望在完全不关闭 shell 的情况下结束 REPL。像`Ctrl`+ `C`，`Ctrl`+`D`或`Ctrl`+之类的东西`Z`（都不起作用）。

**更新：** 使用的操作系统：Windows 7 64 位。

`Ctrl`+`D`存在 SBT 和 REPL，但是当我处于无限循环中时`Ctrl`+不会退出 REPL`D`

```
while(true) prinln("test") 
```

有没有办法在不关闭外壳的情况下使用热键退出无限循环？或者这是不可能的，因为 REPL 在循环结束之前不会对热键做出反应（当然，在这种情况下不会发生）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T01:50:41.387

The following works with Scala 2.10.0-M6, but in 2.9.2 you can probably achieve something similar using `:wrap` in REPL power mode.

Assume that the REPL is started from sbt via `sbt console`—without loss of generality (you may otherwise just put the `ReplUtil` class on scala's class path). Assume the following class is on the class path, e.g. its source is at `src/main/scala/ReplUtil.scala`:

```
import java.util.concurrent.{Executors, ExecutorService, TimeoutException, TimeUnit}
import concurrent._

object ReplUtil {
  @volatile private var exec: ExecutorService = _
  @volatile private var threads = Set.empty[ Thread ]
  private def freshPool() { exec = Executors.newCachedThreadPool() }
  freshPool()

  private implicit def context = ExecutionContext.fromExecutorService( exec )

  def panic() {
    (new Thread {
      override def run() {
        try {
          exec.shutdownNow()
          exec.awaitTermination( 1, TimeUnit.SECONDS ) 
        } finally {
          val th = threads
          threads = Set.empty
          th.foreach( _.stop )
          freshPool()
        }
      }
    }).start()
  }    

  def spawn[T](t: => T) = {
    var futPrint = false
    val fut = future {
       val th = Thread.currentThread()
       threads += th
       val res = try { t } finally { threads -= th }
       if( futPrint ) println( "<calculation done>\n" + res )
       t
    }
    try {
      Await.result( fut, util.Duration( 4, TimeUnit.SECONDS )).toString
    } catch {
      case e: TimeoutException =>
        futPrint = true
        "<ongoing calculation>"
    }
  }
} 
```

Then the following will activate the semi-asynchronous REPL:

```
$ sbt console
...
Welcome to Scala version 2.10.0-M6 (Java HotSpot(TM) 64-Bit Server VM, Java 1.6.0_33).
...
scala> import ReplUtil.panic
import ReplUtil.panic

scala> :power
** Power User mode enabled - BEEP WHIR GYVE **
...

scala> power.intp.setExecutionWrapper("ReplUtil.spawn")

scala> 2+2
res1: Int = 4

scala> Thread.sleep(6000); 33
<ongoing calculation>

scala> <calculation done>
res2: Int = 33

scala> while(true) { Thread.sleep(2000); println( "Zzz" )}
Zzz
Zzz
<ongoing calculation>
scala> panic

scala> [error] (pool-5-thread-1) java.lang.ExceptionInInitializerError
java.lang.ExceptionInInitializerError
...
Caused by: java.lang.InterruptedException: sleep interrupted
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-22T07:19:12.527

与该主题相关的是一个有用的`Shift`+`D`键绑定，用于在 eclipse scala 工作表中退出程序的非终止评估。

# python - 如何使用 python 将 JSON 存储到 mongodb 中？

> ID：11873384
> 
> 赞同：2
> 
> 时间：2012-08-08T21:23:03.187
> 
> 标签：python, mongodb

假设我在变量**`somejson`**（字典）中有一个 json 对象。我有一个`myjson`像这样声明的对象：

```
myjson['a'] = 'valueofa'
myjson['b'] = 'valueofb'
myjson['c'] = somejson 
```

我想把这个`myjson`对象插入到`mongodb`. 我该如何做到这一点？我读到 mongoengine 是首选`pymongo`，但我看到的所有内容`mongoengine`似乎都非常强调**文档**，与现有的`json`. 请通过一些示例代码阐明一些观点，或者阐明将我的`myjson`对象插入`mongodb`并能够检索它的最佳方法。是`mongoengine`完成我正在寻找的最佳方法吗？还是`pymongo`对这种情况更好？

我认为它应该非常简单，但还没有找到任何真正能很好地解释必须做什么的东西。

我看过以下教程： [http ://docs.mongodb.org/manual/tutorial/write-a-tumblelog-application-with-flask-mongoengine/](http://docs.mongodb.org/manual/tutorial/write-a-tumblelog-application-with-flask-mongoengine/)

在**Define the Schema**部分下，它讨论了许多用于准备结构的大量文档信息，但没有涉及将现有的 JSON 结构放入其中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T21:45:09.080

如果您想使用 mongoengine，您可以将字典存储在[DictField](http://mongoengine-odm.readthedocs.org/en/latest/apireference.html#mongoengine.DictField)中，例如，或将其解压缩到[DynamicDocument](http://mongoengine-odm.readthedocs.org/en/latest/apireference.html#mongoengine.DynamicDocument)。而且您始终可以检索它。

在`pymongo`您的情况下，您可以将您的 dict 存储到没有架构的文档中，因为[bson](http://bsonspec.org/)支持所有 json 类型。它就像文档中的子文档。

# c# - 在 ScrollViewer 中显示用户控件

> ID：11873385
> 
> 赞同：1
> 
> 时间：2012-08-08T21:23:17.303
> 
> 标签：c#, user-controls, microsoft-metro, scrollviewer

我有一个滚动查看器，我想显示我的所有用户控件。我有两种类型的用户控件，即教育和工作。它们只是文本框和按钮。我动态地创建各种数量的每个并将它们添加到类型 usercontrol 的列表中。但是我无法显示所有用户控件！

滚动查看器 xaml

```
<ScrollViewer x:Name="myScrollViewer" HorizontalAlignment="Left" Height="518" Margin="128,10,0,0" Grid.Row="1" VerticalAlignment="Top" Width="1123" FontSize="22"/> 
```

背后的代码

```
List<UserControl> info = new List<UserControl>();
EducationControl educationControl = new EducationControl(school._school, school._degree, school._fieldOfStudy, school._educationStartDate, school._educationEndDate);
info.Add(educationControl);
WorkControl workControl = new WorkControl(work._employer, work._jobTitle, work._jobStartDate, work._jobEndDate);
info.Add(workControl);
myScrollViewer.Content = info; 
```

当我将滚动查看器的内容设置为信息时，它只显示一个字符串，如： System.Collections.Generic.list'1[Windows.UI.Xaml.Controls.UserControl]

但是，当我这样做时，我可以让一个单独的用户控件正确显示：

```
myScrollViewer.Content = info.ElementAt(0); 
```

如何在滚动查看器中显示所有用户控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:34:12.100

ScrollViewer 的内容必须是列表样式的*控件*，例如 ListBox。ScrollViewer 本身不知道如何呈现 a `List<UserControl>`，因此它只打印类型名称。

看起来你可能想`items`成为`ItemsSource`一个`ListBox`或类似的控件。

# sql - 在 SQL Server 2008 中加入 Row_Number()

> ID：11873388
> 
> 赞同：3
> 
> 时间：2012-08-08T21:23:19.653
> 
> 标签：sql, sql-server, common-table-expression

我正在尝试使用`row_number()`.

使用此语法

```
select row_number() over(order by x.patientid, x.dischargedate) as rn
         ,* from x
    inner join x as x2 on row_number() over(order by x.patientid,    x.dischargedate)=row_number() over(order by x2.patientid, x2.dischargedate) 
```

CTE`x`做了我想要的，但是当我尝试加入行号时，我得到了错误 `Msg 4108, Level 15, State 1, Line 35 Windowed functions can only appear in the SELECT or ORDER BY clauses.`

我知道我可以在 CTE 本身中包含 row_number 并给它一个列名，然后加入类似的东西，`x.rn`但是有什么逻辑原因我想不出为什么你不能直接加入这个函数`row_number()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:30:34.593

在内部连接的连接条件中，您正在对两个表的笛卡尔积执行过滤。因此，您的操作 row_number() over (order by xa, xb) 将不是对表 x 的操作，而是对笛卡尔生产的操作。

如果您将其置于连接条件中，则系统将处于确定您选择的候选行的阶段。您不能拥有仅在用于*查找*这些结果行的*结果行上定义其语义的操作。*过滤器会改变结果，结果也会改变过滤器。

 *与 CTE 的区别在于您在中间结果集上定义 row_number 列，*然后*进行连接。*

# iframe - 如何打破 iFrame 的跨度

> ID：11873395
> 
> 赞同：0
> 
> 时间：2012-08-08T21:24:09.073
> 
> 标签：iframe, html

我修改了我在网上找到的用于剧透的代码：

```
<a id="show_id" onclick="document.getElementById('spoiler_id').style.display=''; document.getElementById('show_id').style.display='none';" class="link">
  <img src="{link1}" alt="Stats">
</a>

<span id="spoiler_id" style="display: none;position:absolute;top:5px;left:5px;">
  <a onclick="document.getElementById('spoiler_id').style.display='none'; document.getElementById('show_id').style.display='';" class="link">
    Hide
  </a>
  <br />
  <iframe src="{link2}" width="600" height="175" frameborder="0"></iframe>
</span> 
```

这应该做什么：在页面加载时显示带有 alt 代码“Stats”的图片。单击图片时，图片将消失，并且应该出现一个带有 Hide {iFrame} 的跨度，悬停在距离左侧 5 个像素和距离顶部 5 个像素处。

当它自己离开时，它可以正常工作。但是，我想通过破坏此代码的源将其放到网上（图片会显示，但单击时不会更改。）如果我 iFrame 元素，那么它可以工作，除了跨度保持在 iFrame 内。我想知道的是是否有办法打破 iFrame 的跨度。另一种选择是将代码中的 iframe 从它所在的 iframe 中分离出来。

感谢您提供任何帮助。注意：我确实意识到这是不可能的。如果是这样，对此的确认非常感谢。

编辑：原来我想放的地方不支持Javascript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T00:07:34.583

iframe 充当嵌套的浏览器窗口。您无法将元素放置在 iframe 之外，就像您无法将它们放置在浏览器之外一样。

您可以尝试将跨度隐藏在 iframe 中，并在父窗口中构建一个具有相同内容的新跨度。

# android - ViewPagerIndicator 的 TabPageIndicator 的默认样式失败。为什么以及如何解决？

> ID：11873396
> 
> 赞同：16
> 
> 时间：2012-08-08T21:24:12.193
> 
> 标签：android, viewpagerindicator

如果我只是向您展示，而不是解释问题，会容易得多：

![无样式的标签标题](../Images/c630d4248cbcd61922b265cc499affb7.png)

如您所见，选项卡标题全部混合在一起并且完全没有样式。它们在通过切换选项卡滑动时正常工作（尽管除了在适当的位置移动之外没有可见的指示）并点击选项卡切换视图，但所有样式都丢失了。这是代码：

画廊列表.xml

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent" >

  <com.viewpagerindicator.TabPageIndicator
    android:id="@+id/indicator"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

  <android.support.v4.view.ViewPager
    android:id="@+id/gallerypager"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1" />

</LinearLayout> 
```

GalleryLists.java

```
public class GalleryLists extends Activity {
  Context context;

  private static final String[] titles = new String[] {
        "20 Hottest", "20 Worst", "20 Awesomest", "MMA", "Comedy", "Moto", "Games" };

  ViewPager listPager;
  ListPagerAdapter listPagerAdapter;

  PageIndicator indicator;

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.gallerylists);

    context = this;

    listPagerAdapter = new ListPagerAdapter();

    ViewPager.OnPageChangeListener changeListener = new ViewPager.OnPageChangeListener() {

      @Override
      public void onPageScrolled(int i, float v, int i1) {}

      @Override
      public void onPageSelected(int i) {}

      @Override
      public void onPageScrollStateChanged(int i) {}
    };

    listPager = (ViewPager) findViewById(R.id.gallerypager);
    listPager.setAdapter(listPagerAdapter);
    listPager.setOnPageChangeListener(changeListener);

    indicator = (TabPageIndicator) findViewById(R.id.indicator);
    indicator.setViewPager(listPager);
    indicator.setOnPageChangeListener(changeListener);
  }

  private class ListPagerAdapter extends PagerAdapter {

    // Not important (I believe)
  }
} 
```

就是这样。现在，除非我在阅读文档和检查示例时感到非常困惑，否则我不应该采取任何额外的步骤来使用默认样式。我有点不知所措。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-22T13:47:47.793

我有同样的问题，但`android:theme="@style/Theme.PageIndicatorDefaults"`没有与我的应用主题结合。

还有另一种个性化的方法，覆盖`res/values/style.xml`：

```
<resources>

    <style name="AppTheme" parent="android:Theme.Light" >
        <item name="vpiTabPageIndicatorStyle">@style/CustomTabPageIndicator</item>

    </style>

    <style name="CustomTabPageIndicator" >
        <item name="android:gravity">center</item>
        <item name="android:background">@drawable/vpi__tab_indicator</item>        
        <item name="android:paddingTop">12dp</item>
        <item name="android:paddingBottom">12dp</item>
        <item name="android:textAppearance">@style/TextAppearance.TabPageIndicator</item>
        <item name="android:textSize">15sp</item>
        <item name="android:maxLines">1</item>
        <item name="android:textColor">#FF555555</item>
    </style>
</resources> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-09T20:03:50.197

我觉得自己有点白痴，但这是非常简单明了的解决方案。

AndroidManifest.xml

```
...
<activity
  android:name=".GalleryLists"
  android:theme="@style/Theme.PageIndicatorDefaults"
  ... >
</activity>
... 
```

是的，我需要做的就是实际**使用**主题。希望这会帮助其他一些可怜的失落的灵魂。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-12-01T12:25:09.233

Michaels 解决方案的一个小补充：如果您已经为 Activity 使用自定义主题，只需在其中添加这两行：

```
<item name="vpiIconPageIndicatorStyle">@style/Widget.IconPageIndicator</item>
<item name="vpiTabPageIndicatorStyle">@style/Widget.TabPageIndicator</item> 
```

# javascript - 可以使用 HTML/CSS 创建静态照明效果叠加层吗？

> ID：11873398
> 
> 赞同：2
> 
> 时间：2012-08-08T21:24:24.863
> 
> 标签：javascript, html, css

我想知道是否可以使用 HTML/CSS 创建静态照明效果叠加层。

我拥有的是一个纯粹的 HTML5/JS 应用程序，它包含在顶部导航栏的大多数页面和身体中的一系列卡片上，这些卡片通过使用滑动手势进行转换。这些都是黑色背景上的灰色。

我想要完成的是在屏幕中心有一种聚光灯渐变，它只会影响页面上的 div 而不会影响黑色背景。这个聚光灯将被固定，以便在刷卡时，它会保持在屏幕的中心。

我知道我可以用聚光灯图像作为背景覆盖一个 div，但显然这会弄乱页面上的点击/滑动。它会影响黑色背景。

有没有人有做这样的事情的经验？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T00:19:16.670

**一个简单的 CSS 解决方案**（不需要事件）

*   使用聚光灯渐变创建全页宽度的 bg 图像。
*   给每个 div 这个 bg 图像，`background-attachment`值为`fixed`.

无论每个 div 当时恰好在页面上的哪个位置，它都将充当一个窗口，您可以通过该窗口看到聚光灯渐变的一部分。实际上，当 div 在它上面移动时，bg 图像保持固定在原位。

[小提琴演示，以及带有](http://jsfiddle.net/Matt_Coughlin/janK3/1/)[圆角](http://jsfiddle.net/Matt_Coughlin/Ypn2V/)的相同演示。

或者，可以在 CSS 中为每个 div 赋予相同的径向渐变（也是固定的），而不是创建静态图像文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T21:48:37.857

尝试使用带有渐变的绝对定位 div。要通过该 div 事件，请使用 css 属性`pointer-events`（IE 不支持）或查看该资源： http: [//www.vinylfox.com/forwarding-mouse-events-through-layers/](http://www.vinylfox.com/forwarding-mouse-events-through-layers/)

# javascript - 使 jquery 延迟加载插件在视口内工作

> ID：11873400
> 
> 赞同：1
> 
> 时间：2012-08-08T21:24:39.643
> 
> 标签：javascript, jquery, lazy-loading

lazyload jquery 插件延迟了长网页中图像的加载。在用户滚动到它们之前，不会加载视口之外的图像（网页的可见部分）。

问题是我有一个缩略图库，其中包含大约 40 个小图像，每行 10 个。如果我加载网站，我可以看到 3 行图像（总共 30 张图像）。该插件与其他 10 个插件相比确实很棒，但我仍然一次收到 30 个 HTTP 请求。

可以修改此插件以延迟视口中的图像吗？也许分组？显示前 10 个，等待半秒，显示下一个 10，再次等待，以此类推。

PS Lazyload 可以选择延迟加载所有图像，直到 DOM 准备好，但如果像 jquery 或其他脚本这样的脚本有时加载速度有点慢 - 我会看到一个没有图像的站点。

这是插件[源代码](https://raw.github.com/tuupola/jquery_lazyload/master/jquery.lazyload.js)的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T23:29:32.987

如果您手动为第 10 行中的每个图像添加一个类，并为之后的行中的图像添加一个单独的类，依此类推，您可以像这样触发每一行的加载：

```
$(function() {          
    $("img").lazyload({
        event : "timedload"
    });
});

$(window).bind("load", function() { 
    setTimeout(function() { $("img.row1").trigger("timedload")}, 1000);
    setTimeout(function() { $("img.row2").trigger("timedload")}, 2000);
    setTimeout(function() { $("img.row3").trigger("timedload")}, 3000);
    setTimeout(function() { $("img.row3").trigger("timedload")}, 4000);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T12:38:31.060

如果您只担心请求量，您可以使用[Image Sprites](http://www.w3schools.com/css/css_image_sprites.asp)来捆绑您的图像。

例如，您可以将第一行捆绑在一个 sprite 中，将第二行捆绑在另一个 sprite 中，依此类推。这将您的 40 个请求减少到 4 个！

当然这需要

*   图像要么是静态的，因此每个用户看到相同的图像，要么
*   某种服务器端的“图像精灵”生成器。然而，谷歌和 Facebook 都没有使用服务器端的“图像精灵”生成器来捆绑他们的图像

# jquery - jquery 与 fancybox 上的 updatepanel 中断，说状态信息对此页面无效并且可能已损坏

> ID：11873402
> 
> 赞同：0
> 
> 时间：2012-08-08T21:24:50.093
> 
> 标签：jquery, asp.net, iframe, error-handling, fancybox

我有一个名为 Site.master 的主页

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="Site.master.cs" Inherits="Fancybox.SiteMaster" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<title></title>
<link href="~/Styles/Site.css" rel="stylesheet" type="text/css" />
  <%--    JQUERY--%>
<script src="<%= ResolveClientUrl("~/Scripts/jquery-1.7.2.js") %>" type="text/javascript">
</script>
<%--    JQUERYui    --%>
<script src="<%= ResolveClientUrl("~/jquery-ui-1.8.21.custom.min.js") %>"
    type="text/javascript"></script>
<link rel="stylesheet" href="<%= ResolveClientUrl("~/Styles/jquery-ui-1.8.21.custom.css") %>"
    type="text/css" media="screen" />
<%-- FANCYBOX VERSION 1.3.4--%>
<script type="text/javascript" src="<%= ResolveClientUrl("~/Scripts/jquery.fancybox-1.4.3.min.js") %>">
</script>
<link rel="stylesheet" href="<%= ResolveClientUrl("~/Styles/style-fancybox-1.3.4.css") %>"
    type="text/css" media="screen" />
     <script type="text/javascript" >
        $(document).ready(function () {

            $("#LoginLightbox").fancybox({

                scrolling: "no"

            });

        });      

</script>
<asp:ContentPlaceHolder ID="HeadContent" runat="server">
</asp:ContentPlaceHolder>
</head>
<body>
<form runat="server">
<asp:ScriptManager runat="server">
</asp:ScriptManager>
<div class="page">
    <div class="header">
        <div class="title">
            <h1>
                My ASP.NET Application
            </h1>
            <a href="Login.aspx?iframe=true" id="LoginLightbox">PRESIONAR</a>
        </div>           
    </div>
    <div class="main">
        <asp:ContentPlaceHolder ID="MainContent" runat="server"/>
    </div>
    <div class="clear">
    </div>
</div>
<div class="footer">

</div>
</form> 
```

当我单击链接 Presionar 时，fancybox 显示为 iframe。

此 iframe 是名为 litebox.master 的其他 Masterpage

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="litebox.master.cs" Inherits="Fancybox.litebox" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title>
<asp:ContentPlaceHolder ID="head" runat="server">
</asp:ContentPlaceHolder>
</head>
<body>
<form id="form1" runat="server">
<asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>
<div>
    <asp:ContentPlaceHolder ID="ContentPlaceHolder1" runat="server">

    </asp:ContentPlaceHolder>
</div>
</form>
</body> 
```

使用 litebox.master 的页面是 Login.aspx

```
<%@ Page Title="" Language="C#" MasterPageFile="~/litebox.Master" AutoEventWireup="true" CodeBehind="login.aspx.cs" Inherits="Fancybox.login" %>
<%@ Register TagPrefix="uc1" TagName="Login" Src="~/control/Login.ascx" %>
<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="head">
<link rel="stylesheet" href="Template/Styles/style.css" type="text/css" media="screen" />
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="ContentPlaceHolder1">

    <uc1:Login ID="LoginControl" runat="server"></uc1:Login>
</asp:Content> 
```

最后用户控件 Login.ascx 是

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="login.ascx.cs" Inherits="Fancybox.control.login" %>

<div style="width:400px;height:400px;background-color:Blue">
<div style="color:White">Hola</div>

<asp:TextBox ID="txtnombre" runat="server"></asp:TextBox>

<asp:TextBox ID="txtcontrasena" runat="server"></asp:TextBox>

<asp:UpdatePanel runat="server" ID="updPanelLoginIncorrecto">
        <ContentTemplate>
            <asp:CustomValidator ForeColor="Red" OnServerValidate="usuarioExistente_Validation"
                Display="Static" Font-Size="Small" runat="server" ID="vldLogin" ValidationGroup="grupoValidacionLoginUsuario"
                Text="HEYYY">
            </asp:CustomValidator>
        </ContentTemplate>
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="btnregistro" EventName="Click" />
        </Triggers>
    </asp:UpdatePanel>

<asp:Button ID="btnregistro" runat="server" onclick="btnregistro_Click" ValidationGroup="grupoValidacionLoginUsuario"/>
</div> 
```

当我第一次按下按钮 btnregistro 时，它运行良好，如果页面无效，则显示 heyyy，如自定义验证器中所述。问题是当我按下以下按钮时，它会中断

Firefox 控制台向我抛出此错误

```
Timestamp: 08/08/2012 18:15:42
Error: Sys.WebForms.PageRequestManagerServerErrorException:     Sys.WebForms.PageRequestManagerServerErrorException: the state information is invalid for  this page and might be corrupted.
Source File: http://localhost:6037/Scripts/jquery-1.7.2.js
Line: 2121 
```

它打破jquery的行是

```
jQuery.dequeue( elem, type ); 
```

请帮帮我！我已经与这个错误作斗争了好几个星期，我不知道还能做什么，我做了很多谷歌但没有找到任何解决方案！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:46:26.287

经过数周的尝试，我尝试输入 type:"iframe" 并且神奇地起作用了！我不知道必须做什么，但现在它可以工作了:) 所以代码是：

```
<script type="text/javascript" charset="utf-8">
$(document).ready(function () {
$("#LoginLightBox").fancybox({
    type: "iframe",
    width: 300,
    height: 750,
    scrolling: "no"
});
$("#RegistroLightbox").fancybox({
    type: "iframe",
    width: 300,
    height: 750,
    scrolling: "no"
});
});

</script> 
```

# ios - 故事板中静态样式单元格的替代方法是什么？

> ID：11873403
> 
> 赞同：0
> 
> 时间：2012-08-08T21:24:50.930
> 
> 标签：ios

由于底层控制器必须是 UITableViewController 的情节提要限制，我不能使用静态样式 UITableViewCells。

那么如何在 ios 联系人应用程序中实现类似于“新联系人”屏幕的 UI 布局？

特别是电话号码/电子邮件（“手机”，家庭）输入：是否有任何现有的 API 可以绘制细垂直分隔线？或者我必须创建一个笔尖？

![在此处输入图像描述](../Images/3be8a59c1c9234f7f9bcf65289adc101.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T23:00:01.137

我已经看到通过让前三个字段是假的来做到这一点。使用具有图像视图的表格视图标题，并且 First/Last/Company 是简单的文本字段。您在 First/Last/Company 后面放置了一张看起来像表格单元格的漂亮图片。

# parallel-processing - OpenCL中的Groupby减少？

> ID：11873405
> 
> 赞同：0
> 
> 时间：2012-08-08T21:24:53.997
> 
> 标签：parallel-processing, mapreduce, opencl, reduce

我想在 OpenCL 中实现 groupby 减少。例如，输入

```
a1 a2 a3 b1 b2 c3 c4 
```

会产生

```
a6 b3 c7 
```

C 伪代码如下所示：

```
int data[n][2], result[n][2], result_count = -1, 
    added = 0, group = data[0][0];
for (int i = 0; i < n; i++) { 
  if (group == data[i][0]) {
    added += data[i][1];
  } else {
    result[++result_count][0] = group;
    result[result_count][1] = added;
    group = data[i][0];
    added = 0;
  }
} 
return result, result_count; 
```

我知道朝这个方向发展的唯一标准算法是并行归约。但是，它减少到一个数字，而不是按组添加值的缓冲区。我不确定并行减少是否可以与动态结果缓冲区（例如在本地内存中）一起使用，并且在性能方面仍然有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T23:47:59.980

哈希的解决方案

阶段 1) 可以使用散列方案将组值散列到某个位置，然后原子加法可以将第二个值的内容相加。

阶段 2) 前缀和扫描算法通过哈希表来压缩它。

阶段 3) 可选择对结果进行排序

排序解决方案

阶段 1) 对组值上的数据进行排序

阶段 2) 使用归约法对每个组求和

阶段 3) 前缀和扫描以压缩总和

# image - ascx文件中相对路径的绝对url？

> ID：11873410
> 
> 赞同：0
> 
> 时间：2012-08-08T21:25:12.863
> 
> 标签：image, url, linker, absolute, ascx

想象一下，我有一张图片托管在`http://www.mypage.com/content/images/myimage.png`我的网页上，我想将它显示在我的网页上。在我的 ascx 文件中如下：

```
<img runat="server" id="ImgLarge"  class="myimage" src="../content/images/myimage.png" /> 
```

唯一的问题是该图像无法打印。我相信解决方法是让图像使用绝对 URL，但我宁愿不使用`http://www.mypage.com/content/images/myimage.png`，而是使用类似`src=@Url.Absolute('~/images/solar-panel.png')`.

这在 ascx 文件中有效吗？如果没有，是否有替代方案？我只在我的 cshtml 文件中这样做过。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T20:25:19.240

图片是项目的一部分吗？通常，您会将用户控件放在一个文件夹中，而将图像控件放在另一个文件夹中（同一级别）。如果是这种情况，您将有一个这样的网址：

```
<asp:ImageButton runat="server" ID="ImageButton2"  OnClick="sortApproved_Click" ImageUrl="~/images/down.png" /> 
```

否则，如果您想诊断发生了什么，请查看呈现的网页源。网址是什么样的？

# java - 有没有人使用 ruby avro sample_ipc_http_client.rb 与 Java 实现的 avro 服务器通信？

> ID：11873411
> 
> 赞同：3
> 
> 时间：2012-08-08T21:25:16.743
> 
> 标签：java, ruby, avro

我一直在尝试使此设置正常工作，但是当我向 avro-1.7.1 服务器发出请求时，我得到一个

```
~/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/protocol.rb:141:in `read_nonblock': end of file reached (EOFError) 
```

在服务器端，我看到以下消息。avro 服务器在 Netty-3.4.0 上运行：

```
WARN ipc.NettyServer: Unexpected exception from downstream. 
```

java.lang.OutOfMemoryError：Java 堆空间

我有一个协议/模式来描述我试图提出的请求：

```
"messages" : {
    "ping" : {
    "request" : [ ],
    "response" : "boolean"
} 
```

根据 http_client 示例，我的请求正在加载我的协议，它可以很好地解析，我的请求现在是：

```
result = requestor.request('ping',{}) 
```

有没有人让 Ruby 客户端与 Java avro 服务器通信？谢谢你的帮助！

# ruby-on-rails-3 - 无法使用 rake 制作开发数据库

> ID：11873416
> 
> 赞同：0
> 
> 时间：2012-08-08T21:25:25.917
> 
> 标签：ruby-on-rails-3, rake

***更新***：运行

```
RAILS_ENV=development rake db:create 
```

...有效。`RAILS_ENV`但是没有前缀的 rake 命令不会。是什么赋予了？

* * *

出于某种原因，我不再能够与我的开发数据库进行交互。

我试过`rake db:create`了，它使我的测试数据库很好，但根本没有创建开发数据库。

我正在使用[postgresapp.com](http://postgresapp.com)，直到最近，它都运行良好。`config/database.yml`最近没有对我的文件进行任何更改，也没有对我的任何应用程序配置文件进行更改。

我可以很好地连接到我的测试数据库`psql -h localhost redtail_test`，并且它使用与我的开发盒相同的连接凭据，所以我有理由确定这不是 PG 的连接问题——除非它是一个奇怪的问题。

```
redtail git:master ❯ rake db:create
redtail_test already exists
redtail git:master ❯ psql -h localhost redtail  
psql: FATAL:  database "redtail" does not exist 
```

有没有人遇到过这个问题？

* * *

```
common: &common
  encoding: utf8

postgres: &postgres
  adapter: postgresql
  user: postgres
  password:
  min_messages: WARNING

development: &development
  <<: *common
  <<: *postgres
  host: localhost
  database: redtail

memory: &memory
  <<: *common
  adapter: sqlite3
  host: localhost
  database: ":memory:"

test: &test
  <<: *common
  <<: *postgres
  host: localhost
  database: redtail_test

production:
  adapter: postgresql
  encoding: utf8
  database: redtail

cucumber:
  <<: *test 
```

# mongodb - MongoDB 索引使查询变得更糟

> ID：11873418
> 
> 赞同：1
> 
> 时间：2012-08-08T21:25:34.760
> 
> 标签：mongodb

当我在集合上放置索引时，查询需要更长的时间。

```
> db.baz.drop();for(var n=0;n<100000;n++)db.baz.insert({i:n}) 
```

没有索引，

> db.baz.find({i: {$mod: [10,0]}}).explain()
> "millis" : 107,

但有了索引，

> db.baz.ensureIndex({i:1})
> db.baz.find({i: {$mod: [10,0]}}).explain()
> "millis" : 284,

怎么会这样？

谢谢，

埃里克·J。

# ios - 在 iOS 中评估基于 XPath 函数的表达式

> ID：11873421
> 
> 赞同：1
> 
> 时间：2012-08-08T21:25:43.897
> 
> 标签：ios, xml, function, xpath, expression

有没有办法在 iOS 中评估 xPath 表达式？例如，像这样的表达式：

```
concat(xyz:field3, "!") 
```

**编辑**：我只关心基于函数的 xPath 表达式（例如 concat、substring、abs）

我尝试使用**stringByEvaluatingJavaScriptFromString**来运行以下脚本，该脚本将 xPath 表达式和 XML 文件作为输入，但我没有得到任何输出。

```
 function evaluateXPath(inputXML,xPathExpr)
    {
        // load the XML document

        xmldoc=loadXMLDoc(inputXML);

        // process the input doc

        xPathResult = xmldoc.evaluate(xPathExpr, xmldoc, null, XPathResult.ANY_TYPE, null);

        // convert result to string and return the string

        var serializer = new XMLSerializer();
        try {                        
            var str = serializer.serializeToString(xPathResult);                        
            // alert ("OUTPUT: "+str);                        
            return str; 
        }                    
        catch (e) {   
            // error catching stuff
        }  

    } 
```

# bash - 为什么 sort -k 不能一直工作？

> ID：11873427
> 
> 赞同：0
> 
> 时间：2012-08-08T21:25:56.070
> 
> 标签：bash

我现在有一个脚本，它将文件列表放在两个单独的数组中：

首先，我从一个 ZIP 文件中获取一个文件列表并填写`FIRST_Array()`它。其次，我从 ZIP 文件中的控制文件中获取文件列表并填写`SECOND_Array()`它

```
while read length date time filename 
do
    FIRST_Array+=( "$filename" )
    echo "$filename" >> FIRST.report.out
done < <(/usr/bin/unzip -qql AAA.ZIP |sort -g -k12 -t~) 
```

第三，我像这样比较两个数组：

```
diff -q <(printf "%s\n" "${FIRST_Array[@]}") <(printf "%s\n" "${SECOND_Array[@]}") |wc -l 
```

我可以说这是 `Diff`失败的，因为我将每个数组输出到文件：`FIRST.report.out`并且`SECOND.report.out`根本没有正确排序。

1) FIRST.report.out（ZIP 文件中的内容）

`JGS-Memphis~AT1~Pre-Test~X-BanhT~JGMDTV387~6~P~1100~HR24-500~033072053326~20120808~240914.XML JGS-Memphis~PRE~DTV_PREP~X-GuinE~JGMDTV069~6~P~1100~H24-700~033081107519~20120808~240914.XML JGS-Memphis~PRE~DTV_PREP~X-MooreBe~JGM98745~40~P~1100~H21-200~029264526103~20120808~240914.XML JGS-Memphis~FUN~Pre-Test~X-RossA~jgmdtv168~2~P~1100~H21-200~029415655926~20120808~240914.XML`

2) SECOND.report.out (ZIP 的控制文件里面有什么)

`JGS-Memphis~AT1~Pre-Test~X-BanhT~JGMDTV387~6~P~1100~HR24-500~033072053326~20120808~240914.XML JGS-Memphis~FUN~Pre-Test~X-RossA~jgmdtv168~2~P~1100~H21-200~029415655926~20120808~240914.XML JGS-Memphis~PRE~DTV_PREP~X-GuinE~JGMDTV069~6~P~1100~H24-700~033081107519~20120808~240914.XML JGS-Memphis~PRE~DTV_PREP~X-MooreBe~JGM98745~40~P~1100~H21-200~029264526103~20120808~240914.XML`

使用`sort -k12 -t~`有道理，因为`~`是文件日期字段的分隔符（第 12 位）。但它并不能始终如一地工作。添加`-g`没有任何区别。

当我的脚本处理更大的 ZIP 文件时，排序会更糟。为什么 sort -k 不能一直工作？如何对两个数组进行排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T21:48:50.407

你的数据中并没有真正的 k12，你的分隔符在你的规范中是 '~'，但你有 ~ 有时 - 在你的数据中。

你可以检查

```
head -n 1 your.data.file |  sed -e "s/~/\n/g" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T23:53:59.873

业务需求将发生变化。在这种情况下不再需要排序。线程可以关闭。谢谢你。

# jquery - 单击引用的 div 时停止 jquery 切换

> ID：11873432
> 
> 赞同：0
> 
> 时间：2012-08-08T21:26:19.470
> 
> 标签：jquery

我是 jquery 的新手，我可能应该使用另一个函数来实现这一点，所以请告诉我。

我有一个下拉框，它带有一个切换按钮，但是当单击下拉框时，它会淡出。这不会发生，因为下拉菜单中有链接。

这是一个[jsfiddle](http://jsfiddle.net/K3GpR/1/)，所以请看看我做错了什么。

HTML：

```
<span id="profile">
        <span id="profileDrop">
          <div id="triangleUp"></div>
          <div id="profileDown">
           <a href="../likes.php"><div id="profileElement"><img src="files/images/heart.png" height="12px" border="0"><d> Your Favourites</d></div></a>
           <a href="../tracks.php"><div id="profileElement"><img src="files/images/settings.png" height="12px" border="0"><d> Settings</d></div></a>
           <a href="../phpscripts/logout.php"><div id="profileElement"><img src="files/images/logout.png" height="12px" border="0" /><d> Logout</d></div></a>
          </div>  
        </span>
      </span>​ 
```

jQuery：

```
$('#profile').toggle(function(){

        $('#profileDown', '#profile').fadeIn(300);
        $('#triangleUp', '#profile').fadeIn(300);
    }, function(){

        $('#profileDown', this).fadeOut(300);
        $('#triangleUp', '#profile').fadeOut(300);
});​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T21:28:38.273

尝试添加：

```
$('#profile a').click(function(e) {
    e.stopPropagation();
});​ 
```

这将阻止点击事件从您的链接传播并触发淡入淡出。

**[jsFiddle 示例](http://jsfiddle.net/j08691/K3GpR/3/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T21:30:36.700

因为它在`#profile`元素内部，所以它会冒泡到父元素并切换并最终消失。

尝试

```
 $('#profile').toggle(function(){
        $('#profileDown', '#profile').fadeIn(300);
        $('#triangleUp', '#profile').fadeIn(300);
        return false;
    }, function(){

        $('#profileDown', this).fadeOut(300);
        $('#triangleUp', '#profile').fadeOut(300);
        return false;
    });​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T21:36:00.320

我不确定您到底在寻找什么，但是这个[http://jsfiddle.net/K3GpR/5/](http://jsfiddle.net/K3GpR/5/)是否实现了您正在寻找的东西？

基本上，我所做的是将您的下拉菜单从您附加切换开关的范围中拉出来。

```
<span id="profile">
   <span id="profileDrop">
       <div id="triangleUp"></div>
   </span>
</span>
<div id="profileDown">
     <a href="../likes.php"><div id="profileElement"><img src="files/images/heart.png" height="12px" border="0">Your Favourites</div></a>
     <a href="../tracks.php"><div id="profileElement"><img src="files/images/settings.png" height="12px" border="0">Settings</div></a>
     <a href="../phpscripts/logout.php"><div id="profileElement"><img src="files/images/logout.png" height="12px" border="0" />Logout</div></a>
</div> ​ 
```

即使单击下拉菜单，这种嵌套也会导致您的切换事件触发。现在只有图像触发切换。（我也稍微改变了你的选择器。只是个人喜好）。

这是更新的js：

```
$('#profile').toggle(function(){

        $('#profileDown').fadeIn(300);
        $('#triangleUp').fadeIn(300);
    }, function(){

        $('#profileDown').fadeOut(300);
        $('#triangleUp').fadeOut(300);

    });​ 
```

# r - 在 R 中对行使用 mapply() 与列

> ID：11873437
> 
> 赞同：1
> 
> 时间：2012-08-08T21:26:54.897
> 
> 标签：r

我在工作中要处理大量的调查数据等，而且我经常不得不制作各种逐行处理数据的评分程序。例如，我现在正在处理一个包含 12 列的表格，其中包含来自心理测量仪器的子量表分数。这些将使用仪器创建者提供的表格转换为标准化分数。到目前为止看起来很简单。

但是，有四张表 - 根据性别和年龄范围，该乐器的评分不同。因此，例如，一个 14 岁的女性和一个 10 岁的男性得到不同的标准化表。所有归一化数据都存储在 R 数据帧中。

我想做的是编写一个可以应用于行的函数，它返回一个从规范化数据中查找的向量。所以，有点像这样：

```
converter <- function(rawscores,gender,age) {
    if(gender=="Male") {
        if(8 <= age & age <= 11) {convertvec <- c(1:12)}
        if(12 <= age & age <= 14) {convertvec <- c(13:24)}
    }
    else if(gender=="Female") {
        if(8 <= age & age <= 11) {convertvec <- c(25:36)}
        if(12 <= age & age <= 14) {convertvec <- c(37:48)}
    }

    converted_scores <- rep(0,12)
    for(z in 1:12) {
        converted_scores[z] <- conversion_table[(unlist(rawscores)+1)[z],
                                                convertvec[z]]
    }
    rm(z)
    return(converted_scores)
} 
```

编辑：我用昨天实际工作的代码更新了这个。这个版本返回一个带有分数的简单向量。下面是我如何实现它。

```
mydata[,21:32] <- 0
for(x in 1:dim(mydata)[1]) {
    tscc_scores[x,21:32] <- converter(mydata[x,7:18],
                                      mydata[x,"gender"],
                                      mydata[x,"age"])
} 
```

这行得通，但就像我说的，我明白这是不好的做法？

旁注： rawscores+1 的原因是数据框在第一个索引中的得分为零。

从根本上说，这个函数看起来并不复杂，我知道我可以使用一个循环来实现它，我会在其中执行 for(x in 1:number_of_records)，但我的理解是这样做是不好的做法。我曾希望简单地使用 apply() 来执行此操作，如下所示：

```
apply(X=mydata[,1:12],MARGIN=1,
      FUN=converter,gender=mydata[,"gender"],age=mydata[,"age"]) 
```

不幸的是，R 似乎不赞成这种方法，因为它不会遍历传递给后续参数的向量，而是尝试将它们作为一个整体的参数。解决方案似乎是 mapply()，但我不知道是否有办法在行而不是列上使用 mapply()。

所以，我想我的问题是三方面的。一，有没有办法在行上使用 mapply() ？二，有没有办法让 apply() 迭代参数？第三，有更好的选择吗？我已经看到并听到了很多关于 plyr 包的信息，但在我完全研究 Base R 中存在的选项之前，我不想跳到那个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T23:04:26.573

我建议不要按行应用这些东西，而是按列应用它。原因是只有 12 列，但可能有很多行。

以下代码对我有用。可能有更好的方法，但它可能对你来说很有趣。

```
offset <- with(mydata, 24*(gender == "Female") + 12*(age >= 12))
idxs <- expand.grid(row = 1:nrow(mydata), col = 1:12)
idxs$off <- idxs$col + offset
idxs$val <- as.numeric(mydata[as.matrix(idxs[c("row", "col")])]) + 1
idxs$norm <- normdf[as.matrix(idxs[c("val", "off")])]
converted <- mydata
converted[,1:12] <- as.matrix(idxs$norm, ncol=12) 
```

这里棘手的部分是这个`idxs`数据框，它结合了所有其余部分。它具有以下列：

*   **row and column：**在原始数据中的位置
*   **off:**中的列`normdf`，基于性别和年龄
*   **val:** row in `normdf`, 基于原始值 + 1
*   **norm：**对应的归一化值

我会带着这个第一个想法在这里发布这个，看看我是否能想出一个更好的答案，或者基于 jorans 的评论，或者使用`normdf`. 还不确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T22:40:31.853

您可以重写“转换器”，以便它获取性别、年龄和行索引的向量，然后您可以使用转换数组和数据数组（即数字分数列）对 convert_scores 进行查找和分配。使用 apply 还有一个额外的问题，因为它会将所有 x 参数转换为“字符”类，因为性别类是“字符”。目前尚不清楚您的代码`normdf[ rawscores+1, convertvec]`应该是数组提取还是函数调用。

在没有工作示例的情况下未经测试（带有`normdf`, `mydata`）：

```
 converted_scores <- matrix(NA, nrow=NROW(rawscores), ncol=12) 
 converter <- function(idx,gender,age) {
     gidx <- match(gender, c("Male", "Female") )
     aidx <- findInterval(age, c(8,12,15) ) 
     ag.idx <- gidx + 2*aidx -1  
          # the aidx factor needs to be the same number of valid age categories
     cvt <- cvt.arr[ ag.idx, ]

     converted_scores[idx] <- normdf[rawscores+1,convertvec]
     return(converted_scores)
 }
 cvt.arr <- matrix(1:48, nrow=4, byrow=TRUE)[1,3,2,4] # the genders alternate
 cvt.scores <- mapply(converter, 1:NROW(mydata), mydata$gender, mydata$age) 
```

# amazon-s3 - 将实时网络日志从一个 Ec2 实例传输到另一个 Ec2 实例

> ID：11873440
> 
> 赞同：0
> 
> 时间：2012-08-08T21:27:09.350
> 
> 标签：amazon-s3, amazon-ec2, amazon-cloudfront

解释：

*   我在一个 EC2 实例上部署了一个可执行 Jar，它可以手动运行以在端口 80 上侦听代理流量
*   我在另一个 EC2 实例上有一个 Spring 应用程序，它访问了第三方服务器上的网站

这两台机器之间的连接：

Spring应用程序设置，即B告诉第三方服务器打开一个网站并使用A作为代理，这会导致在A上生成网络调用日志。

我想要做的是：对于我从 B 发送到第三方服务器的每个请求，我希望将 A 上生成的网络日志传输到 B

我尝试了什么：

1.  一种方法是轮换 A 上的日志并写入 S3，然后应用程序从 S3 中选择并处理它们
2.  ssh 进入 A 并 grep 日志文件，但这会阻止 JAR 侦听新流量并且卡住

我在找什么：

一种实时解决方案，一旦日志显示在 AI 上，希望它们被移植到 B 而无需停止 A 的侦听工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T05:50:53.447

正如 Kevin 提到的，您可以在 EC2 实例上设置 Splunk Indexer 并使用它来聚合来自 A 和 B 以及任何其他来源的日志集合，然后使用 Splunk Search 语言“近乎实时地搜索此日志数据” “，将各种系统中的事件关联在一起，创建自定义仪表板，设置主动警报等......

[http://www.splunk.com/](http://www.splunk.com/)

至于将这些数据从您的系统获取到 Splunk Indexer 的机制：

1) 使用 Splunk Universal Forwarder 监控日志输出并将其转发到您的 Splunk Indexer，[http://www.splunk.com/download/universalforwarder](http://www.splunk.com/download/universalforwarder)

2) 由于您的系统是基于 Java 的，SplunkJavaLogging 具有 log4j/logback/jdk 附加程序，您可以无缝连接到您的日志记录配置，以将日志事件转发到您的 Splunk 索引器：[https ://github.com/damiendallimore/SplunkJavaLogging](https://github.com/damiendallimore/SplunkJavaLogging)

3) 使用 Splunk Java SDK，[http](http://dev.splunk.com/view/java-sdk/SP-CAAAECN) ://dev.splunk.com/view/java-sdk/SP-CAAAECN，通过 HTTP REST 或 Raw TCP 将日志事件输入到 Splunk Indexer

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T00:46:00.307

我不确定您正在运行什么操作系统，但如果您正在运行 nix 变体，您可以安装 syslog-ng 而不是 syslog 或 rsyslog，它能够记录本地和外部事件。在这种情况下，我将设置一个中央日志服务器，它侦听来自服务器 a 和服务器 b 的日志。

另一种选择是 syslog-ng 不是您想要的，您可以在服务器上安装 splunk，并让它从您要集中记录的每台服务器上的 splunk 报告器中获取日志。

希望这可以帮助。

# vba - 2个文件之间的实时通信

> ID：11873442
> 
> 赞同：1
> 
> 时间：2012-08-08T21:27:17.650
> 
> 标签：vba, excel

我们在 PC#1 上有“host.xlsb”和“checkin.xlsb”。

PC#2 通过局域网打开“签入”。

在营业时间，客户会来使用条形码扫描仪扫描他们的会员卡的条形码。

条形码扫描仪读取 ID 并发送到“签到”。

“checkin”检查ID和向客户显示信息（例如哪个表），并将ID和签入时间记录到一个列表中。

“host”用于接待，从“checkin”中提取数据以查看谁来了谁没有，并检查客户是否去错了表。

因此，我希望“主机”可以实时读取“签入”的更改，可能吗？

PS：

我知道如果我简单地将“主机”和“签入”放在一个工作簿中并仅使用 PC#1，我可以做到这一点。

但是如果我将它们结合起来，我将需要接待等待客户或客户等待接待。

我也不希望任何其他 PC 同时打开组合的 PC。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:35:37.837

使签入机上的应用程序将数据保存在单独的 (ASCII) 文件中。Checkin 将打开具有写入权限的文件并更新信息。“主机”机器将以读取权限打开文件并检查最新信息，然后关闭文件。

# matlab - 如何以编程方式构造大型元胞数组

> ID：11873445
> 
> 赞同：0
> 
> 时间：2012-08-08T21:27:27.020
> 
> 标签：matlab, dataset

假设矩阵 summary_whts 的列数约为 400？？？

```
lrwghts = dataset(...
         {summary_whts(:,01),'w00'},...
         {summary_whts(:,02),'w01'},...
         {summary_whts(:,03),'w02'},...
         {summary_whts(:,04),'w03'},...
         {summary_whts(:,05),'w04'},...
         {summary_whts(:,06),'w05'},...
         {summary_whts(:,07),'w06'},...
         {summary_whts(:,08),'w07'},...
         {summary_whts(:,09),'w08'},...
         {summary_whts(:,10),'w09'},...
         {summary_whts(:,11),'w10'},...
         {summary_whts(:,12),'w11'},...
         'ObsNames',summary_mthd); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T00:21:17.550

为什么不使用简单的循环来填充`dataset`？

```
nCols = size(summary_whts,1);
dataset = cell(nCols, 2);
for i = 1:nCols
  dataset{i,1} = summary_whts(:,i);
  dataset{i,2} = sprintf('w%04d', i);
end
dataset{end+1,1} = 'ObsNames';
dataset(end, 2} = summary_mthd; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T12:56:06.053

终于，我找到了！这就是我一直在寻找的：

```
cat = [];
for i = 0:(size(X,2)),
    cat = [cat;sprintf('w%03d',i)];
end
cat = cellstr(cat);
lrwghts = dataset({summary_whts,cat{:}},'ObsNames',cellstr(summary_mthd)); 
```

# python - 构建自引用元组

> ID：11873448
> 
> 赞同：19
> 
> 时间：2012-08-08T21:27:33.463
> 
> 标签：python, tuples, ctypes, creation, self-reference

多年前在论坛中看到一个从未解决的对话后，这让我想知道如何正确地创建一个引用自身的元组。从技术上讲，这是一个非常糟糕的主意，因为元组应该是不可变的。一个不可变的对象怎么可能包含它自己？但是，这个问题不是关于最佳实践，而是关于 Python 中可能发生的事情的查询。

```
import ctypes

def self_reference(array, index):
    if not isinstance(array, tuple):
        raise TypeError('array must be a tuple')
    if not isinstance(index, int):
        raise TypeError('index must be an int')
    if not 0 <= index < len(array):
        raise ValueError('index is out of range')
    address = id(array)
    obj_refcnt = ctypes.cast(address, ctypes.POINTER(ctypes.c_ssize_t))
    obj_refcnt.contents.value += 1
    if ctypes.cdll.python32.PyTuple_SetItem(ctypes.py_object(array),
                                            ctypes.c_ssize_t(index),
                                            ctypes.py_object(array)):
        raise RuntimeError('PyTuple_SetItem signaled an error') 
```

前面的函数旨在访问 Python 的 C API，同时牢记内部结构和数据类型。但是，运行该函数时通常会产生以下错误。通过未知的过程，以前可以通过类似的技术创建自引用元组。

**问题：**应该如何修改函数`self_reference`以始终始终如一地工作？

```
>>> import string
>>> a = tuple(string.ascii_lowercase)
>>> self_reference(a, 2)
Traceback (most recent call last):
  File "<pyshell#56>", line 1, in <module>
    self_reference(a, 2)
  File "C:/Users/schappell/Downloads/srt.py", line 15, in self_reference
    ctypes.py_object(array)):
WindowsError: exception: access violation reading 0x0000003C
>>> 
```

**编辑：**这是与口译员的两次不同对话，有些令人困惑。如果我正确理解文档，上面的代码似乎是正确的。然而，下面的对话似乎既相互冲突，又与`self_reference`上面的功能发生冲突。

**对话一：**

```
Python 3.2.3 (default, Apr 11 2012, 07:15:24) [MSC v.1500 32 bit (Intel)]
on win32
Type "copyright", "credits" or "license()" for more information.
>>> from ctypes import *
>>> array = tuple(range(10))
>>> cast(id(array), POINTER(c_ssize_t)).contents.value
1
>>> cast(id(array), POINTER(c_ssize_t)).contents.value += 1
>>> cast(id(array), POINTER(c_ssize_t)).contents.value
2
>>> array
(0, 1, 2, 3, 4, 5, 6, 7, 8, 9)
>>> cdll.python32.PyTuple_SetItem(c_void_p(id(array)), 0,
                                  c_void_p(id(array)))
Traceback (most recent call last):
  File "<pyshell#6>", line 1, in <module>
    cdll.python32.PyTuple_SetItem(c_void_p(id(array)), 0,
                                  c_void_p(id(array)))
WindowsError: exception: access violation reading 0x0000003C
>>> cdll.python32.PyTuple_SetItem(c_void_p(id(array)), 0,
                                  c_void_p(id(array)))
Traceback (most recent call last):
  File "<pyshell#7>", line 1, in <module>
    cdll.python32.PyTuple_SetItem(c_void_p(id(array)), 0,
                                  c_void_p(id(array)))
WindowsError: exception: access violation reading 0x0000003C
>>> array
(0, 1, 2, 3, 4, 5, 6, 7, 8, 9)
>>> cdll.python32.PyTuple_SetItem(c_void_p(id(array)), 0,
                                  c_void_p(id(array)))
0
>>> array
((<NULL>, <code object __init__ at 0x02E68C50, file "C:\Python32\lib
kinter\simpledialog.py", line 121>, <code object destroy at 0x02E68CF0,
file "C:\Python32\lib   kinter\simpledialog.py", line 171>, <code object
body at 0x02E68D90, file "C:\Python32\lib      kinter\simpledialog.py",
line 179>, <code object buttonbox at 0x02E68E30, file "C:\Python32\lib
kinter\simpledialog.py", line 188>, <code object ok at 0x02E68ED0, file
"C:\Python32\lib        kinter\simpledialog.py", line 209>, <code object
cancel at 0x02E68F70, file "C:\Python32\lib    kinter\simpledialog.py",
line 223>, <code object validate at 0x02E6F070, file "C:\Python32\lib
kinter\simpledialog.py", line 233>, <code object apply at 0x02E6F110, file
"C:\Python32\lib     kinter\simpledialog.py", line 242>, None), 1, 2, 3, 4,
5, 6, 7, 8, 9)
>>> 
```

**对话2：**

```
Python 3.2.3 (default, Apr 11 2012, 07:15:24) [MSC v.1500 32 bit (Intel)]
on win32
Type "copyright", "credits" or "license()" for more information.
>>> from ctypes import *
>>> array = tuple(range(10))
>>> cdll.python32.PyTuple_SetItem(c_void_p(id(array)), c_ssize_t(1),
                                  c_void_p(id(array)))
0
>>> array
(0, (...), 2, 3, 4, 5, 6, 7, 8, 9)
>>> array[1] is array
True
>>> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-23T19:48:49.493

感谢 nneonneo 的帮助，我确定了该`self_reference`方法的以下实现。

```
import ctypes

ob_refcnt_p = ctypes.POINTER(ctypes.c_ssize_t)

class GIL:
    acquire = staticmethod(ctypes.pythonapi.PyGILState_Ensure)
    release = staticmethod(ctypes.pythonapi.PyGILState_Release)

class Ref:
    dec = staticmethod(ctypes.pythonapi.Py_DecRef)
    inc = staticmethod(ctypes.pythonapi.Py_IncRef)

class Tuple:
    setitem = staticmethod(ctypes.pythonapi.PyTuple_SetItem)
    @classmethod
    def self_reference(cls, array, index):
        if not isinstance(array, tuple):
            raise TypeError('array must be a tuple')
        if not isinstance(index, int):
            raise TypeError('index must be an int')
        if not 0 <= index < len(array):
            raise ValueError('index is out of range')
        GIL.acquire()
        try:
            obj = ctypes.py_object(array)
            ob_refcnt = ctypes.cast(id(array), ob_refcnt_p).contents.value
            for _ in range(ob_refcnt - 1):
                Ref.dec(obj)
            if cls.setitem(obj, ctypes.c_ssize_t(index), obj):
                raise SystemError('PyTuple_SetItem was not successful')
            for _ in range(ob_refcnt):
                Ref.inc(obj)
        finally:
            GIL.release() 
```

要使用该方法，请按照下面显示的示例创建您自己的自引用元组。

```
>>> array = tuple(range(5))
>>> Tuple.self_reference(array, 1)
>>> array
(0, (...), 2, 3, 4)
>>> Tuple.self_reference(array, 3)
>>> array
(0, (...), 2, (...), 4)
>>> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-22T16:01:33.593

AFAICT，您看到问题的原因是`PyTuple_SetItem`如果元组的引用计数不完全是一个，则会失败。这是为了防止在元组已在其他地方使用过时使用该函数。我不确定你为什么会因此而受到访问冲突，但这可能是因为抛出的异常`PyTuple_SetItem`没有得到正确处理。此外，数组似乎变异为其他对象的原因是因为`PyTuple_SetItem`DECREF 是每次失败时的元组；两次失败后，引用计数为零，因此对象被释放（并且某些其他对象显然最终位于同一内存位置）。

在 ctypes 中使用`pythonapi`对象是访问 Python DLL 的首选方式，因为它可以正确处理 Python 异常并保证使用正确的调用约定。

我没有方便的 Windows 机器来测试它，但以下在 Mac OS X（Python 2.7.3 和 3.2.2）上运行良好：

```
import ctypes

def self_reference(array, index):
    # Sanity check. We can't let PyTuple_SetItem fail, or it will Py_DECREF
    # the object and destroy it.
    if not isinstance(array, tuple):
        raise TypeError("array must be a tuple")

    if not 0 <= index < len(array):
        raise IndexError("tuple assignment index out of range")

    arrayobj = ctypes.py_object(array)

    # Need to drop the refcount to 1 in order to use PyTuple_SetItem.
    # Needless to say, this is incredibly dangerous.
    refcnt = ctypes.pythonapi.Py_DecRef(arrayobj)
    for i in range(refcnt-1):
        ctypes.pythonapi.Py_DecRef(arrayobj)

    try:
        ret = ctypes.pythonapi.PyTuple_SetItem(arrayobj, ctypes.c_ssize_t(index), arrayobj)
        if ret != 0:
            raise RuntimeError("PyTuple_SetItem failed")
    except:
        raise SystemError("FATAL: PyTuple_SetItem failed: tuple probably unusable")

    # Restore refcount and add one more for the new self-reference
    for i in range(refcnt+1):
        ctypes.pythonapi.Py_IncRef(arrayobj) 
```

结果：

```
>>> x = (1,2,3,4,5)
>>> self_reference(x, 1)
>>> import pprint
>>> pprint.pprint(x)
(1, <Recursion on tuple with id=4299516720>, 3, 4, 5) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-04-17T20:35:05.727

更简单的解决方案：

```
import ctypes
tup = (0,)
ctypes.c_longlong.from_address(id(tup)+24).value = id(tup) 
```

结果：

```
>>> tup
((...),)
>>> type(tup)
tuple
>>> tup[0] is tup
True 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-22T16:48:39.237

从技术上讲，您可以将对元组的引用包装在可变对象中。

```
>>> c = ([],)
>>> c[0].append(c)
>>> c
([(...)],)
>>> c[0]
[([...],)]
>>> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-22T16:54:28.487

不变性不应阻止对象引用自身。这在 Haskell 中很容易做到，因为它有惰性求值。这是一个通过使用 thunk 实现的模仿：

```
>>> def self_ref_tuple():
    a = (1, 2, lambda: a)
    return a

>>> ft = self_ref_tuple()
>>> ft
(1, 2, <function <lambda> at 0x02A7C330>)
>>> ft[2]()
(1, 2, <function <lambda> at 0x02A7C330>)
>>> ft[2]() is ft
True 
```

这不是一个完整的答案，只是初步的。我正在努力看看是否有另一种方法可以实现这一点。

# css - 我之前在 Photoshop 中创建了按钮等，然后将它们保存到网络上。我现在应该使用 css 为我创建按钮吗？

> ID：11873449
> 
> 赞同：2
> 
> 时间：2012-08-08T21:27:36.063
> 
> 标签：css

我之前在 Photoshop 中创建了按钮和其他图形（页脚栏），然后将它们保存到网络上。我现在应该使用 css 为我创建按钮吗？我注意到这些代码非常繁重。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:31:36.237

您不必这样做，但使用 css 的原因被认为是更好的方法，因为您不需要发出额外的 http 请求来获取图像。这真的是个人喜好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T21:35:55.653

如果您之前所做的设计满足您的目标，则无需更改它。但是，如果您想利用 CSS 的优势，并且如果您不害怕不完全支持 CSS 的浏览器的某些问题或存在一些错误，您可以创建新的 CSS 元素。

以下是这两种方式的*一些*优点和缺点。

图片

```
 + cross-browser solution. Easier to make GUI look the same way in all browsers.
   - extra requests to the server
   - extra traffic downloaded by users
   - the page will weight more and load longer time
   - much more time needed to make some little changes in the GUI appearance 
```

CSS

```
 + no extra requests to the server
   + no extra traffic downloaded by users
   + the page will weight less and load faster
   + less time needed to make changes in the GUI appearance
   - NOT a cross-browser solution. Harder to make GUI look the same way in all browsers. 
```

如您所见，CSS 具有更多优势，但使用它进行跨浏览器设计要困难得多。

PS我很抱歉我的语言不好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T21:37:16.337

通常，目前的方法是为按钮之类的东西使用代码。在 Photoshop 中创建的按钮往往看起来很花哨（目前），如果您查看大多数网站，您会发现按钮非常干净，通常是微妙的渐变和轻微的框阴影等。由于没有额外的 http 请求，这为使用代码创建此类内容提供了更多优势。

有许多工具和预制按钮可用于帮助创建按钮。

[Twitter Bootstrap](http://twitter.github.com/bootstrap/base-css.html#buttons)按钮非常干净且被广泛使用。（您不必使用整个引导系统来使用它们，只需查看它们的代码并重新创建 :)）

或者要自定义您自己的按钮，您可以使用[CSS 按钮生成器等网站](http://www.cssbuttongenerator.com/)

# sql-server - 在 SQL Server 2000 中修复/重建 master.mdf

> ID：11873450
> 
> 赞同：0
> 
> 时间：2012-08-08T21:27:39.337
> 
> 标签：sql-server, database, restore, rebuild, repair

有没有人知道或知道在哪里可以找到修复/重建 Microsoft SQL Server 2000 主数据库的工具或信息？我假设这是基于以下错误我需要做的，并且该服务将无法启动。

谢谢

```
2012-08-08 13:59:55.10 server    Microsoft SQL Server  2000 - 8.00.760 (Intel X86) 
    Dec 17 2002 14:22:05 
    Copyright (c) 1988-2003 Microsoft Corporation
    Desktop Engine on Windows NT 5.1 (Build 2600: Service Pack 3)

2012-08-08 13:59:55.10 server    Copyright (C) 1988-2002 Microsoft Corporation.
2012-08-08 13:59:55.12 server    All rights reserved.
2012-08-08 13:59:55.12 server    Server Process ID is 640.
2012-08-08 13:59:55.12 server    Logging SQL Server messages in file 'C:\Program Files\Microsoft SQL Server\MSSQL\LOG\ERRORLOG'.
2012-08-08 13:59:55.12 server    SQL Server is starting at priority class 'normal'(2 CPUs detected).
2012-08-08 13:59:55.59 server    SQL Server configured for thread mode processing.
2012-08-08 13:59:55.59 server    Using dynamic lock allocation. [500] Lock Blocks, [1000] Lock Owner Blocks.
2012-08-08 13:59:55.64 spid4     Starting up database 'master'.
2012-08-08 13:59:55.64 spid4     Error: 9003, Severity: 20, State: 1.
2012-08-08 13:59:55.64 spid4     Cannot recover the master database. Exiting. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T07:35:44.410

如果您有 master 数据库的备份，请重建 master 数据库，以便您可以启动 sql server。在单用户模式下执行此操作 (sqlserver.exe -c -m)，然后还原备份。

如果您没有备份，则必须重建 master 数据库，然后手动（或通过脚本，如果您碰巧将数据库和登录名脚本化）重新添加数据库和登录名。

重建你的主数据库：

[http://www.techrepublic.com/article/recover-the-master-database-in-sql-server/5025441](http://www.techrepublic.com/article/recover-the-master-database-in-sql-server/5025441)

# jquery - 重新加载 JQGrid 编辑表单

> ID：11873451
> 
> 赞同：2
> 
> 时间：2012-08-08T21:27:46.280
> 
> 标签：jquery, asp.net-mvc-3, jqgrid-asp.net

我有一个启用了添加/编辑表单功能的 JQGrid。两者都工作正常。我正在扩展编辑功能。

我正在添加一个自定义元素来编辑表单。自定义元素是定义了点击事件的 ANCHOR TAG

1.  单击 ANCHOR TAG，我正在对服务器进行 ajax 调用并更新一些值。直到这里它工作正常。

2.  成功返回后，我想用新值重新加载编辑表单。

**我的方法**

成功返回后，

1.  我重新加载网格（工作正常） - `$('#grid').jqGrid().trigger("reloadGrid");`
2.  关闭编辑表单（工作正常）—— `$('#grid').find('.ui-jqdialog-titlebar-close').click();`
3.  重新打开编辑表单**（不起作用）**。它使用旧值打开相同的编辑表单。如果我通过单击编辑图标手动打开它，它会刷新值。-- `$('#grid').jqGrid('editGridRow', gr, {Edit params})`

**问题**

有人能找到为什么我的第 3 步不起作用吗？也请让我知道是否有人有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T14:39:07.607

我通过以下方式解决了这个问题：

*   关闭现有的 JQGrid 编辑表单

*   首先设置选定的行

*   然后触发editGridRow事件

# ruby-on-rails - 观察者的未定义局部变量或方法“current_user”？

> ID：11873453
> 
> 赞同：1
> 
> 时间：2012-08-08T21:28:04.733
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, devise

我已经查看了几个关于使用`current_user`观察者的问题，并试图实现一个人所说的但它不起作用（[见这里](https://stackoverflow.com/a/11845562/604023)）。

当复选框标记为 true 时，我正在尝试由我的观察者创建一个工程师。工程师和军队属于用户：

**模型/用户.rb**

```
class User < ActiveRecord::Base
  cattr_accessor :current 
  has_many :armies
  has_many :engineers
end 
```

**控制器/application_controller.rb**

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  before_filter :set_time_zone, :set_current_user

  private

  def set_current_user
    User.current = current_user
  end
end 
```

**模型/army_observer.rb**

```
class ArmyObserver < ActiveRecord::Observer
  def after_save(army)
    if army.siege
      Engineer.create({ :user_id => current_user.id, :army_id => :army_id })
    end
  end
end 
```

使用此代码，它给了我错误：

```
undefined local variable or method `current_user' for #<ArmyObserver:0x4e68970> 
```

还有什么办法吗？也许它与设计 current_user 方法冲突？也许最好将其保留`current_user`在控制器中？如果是这样，我会怎么做？

感谢刚刚学习的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T21:38:11.203

您将设计分配给`current_user`类`User.current`访问器正是因为它在模型（和观察者）级别上不可用。因此，不要尝试在`current_user`那里使用，而是使用您刚刚创建的类访问器：

```
Engineer.create({ :user_id => User.current.id, :army_id => :army_id }) 
```

编辑：

顺便说一句，我认为这不是线程安全的 - 除非您还实现[了该解决方案的第一部分，该部分](http://rails-bestpractices.com/posts/47-fetch-current-user-in-models)链接在您引用的帖子的答案之一中。

# node.js - now.js 如何在没有浏览器（简单客户端）的情况下获取“现在”对象？

> ID：11873459
> 
> 赞同：1
> 
> 时间：2012-08-08T21:28:55.060
> 
> 标签：node.js, nowjs-sockets

我在玩 node.js 和 now.js。一切正常。但我想做一个简单的客户端，我可以从命令行运行（所以没有浏览器）。

[http://nowjs.com/doc/example](http://nowjs.com/doc/example)

在示例中，提供了一个 HTML 页面，该页面包含 now.js 文件，该文件创建了神奇的“现在”对象。但是在命令行上没有这样的事情。

对于我正在运行的服务器（helloworld_server.js）

我有客户端 helloworld_client.js：

```
// client.js
var nowjs = require("now");

// now i need to connect to the server (127.0.0.1:8080)
// so i i need a server object?

server = ????

var everyone = nowjs.initialize(server);

everyone.now.distributeMessage('hi!'); 
```

那么我如何获得“现在”对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T22:51:49.920

好的，我知道了。一旦你现在安装

```
npm install now 
```

它创建了一个**node_modules**文件夹，在里面你可以看到每个扩展的文件夹。深入你会发现：

> ```
> ./node_modules/now/examples 
> ```

并且有**nodeclient_example**文件夹

> ```
> ./node_modules/now/examples/nodeclient_example 
> ```

从那里很清楚，但是那些好奇的人，这就是你需要的魔法：

```
var nowjs = require('../../lib/nodeclient/now.js');
var now = nowjs.nowInitialize('http://localhost:8080'); 
```

它就是**现在**的“魔法”对象

确保*安装*：

> npm install socket.io-client

否则它对我不起作用！

# flash - osmf插件和swf验证

> ID：11873460
> 
> 赞同：0
> 
> 时间：2012-08-08T21:29:01.727
> 
> 标签：flash, cdn, osmf

我的 Flash 播放器是基于 osmf 的。它加载了一个 osmf 插件，在这个插件中它调用“DefaultMediaFactory.createMediaElement(...)”来创建一个 VideoElement 并开始播放它。托管内容的 cdn 需要 swf 验证。是osmf插件还是需要swf验证的播放器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T19:36:59.287

swf 验证应该发生在播放器上，而不是插件上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T22:00:29.177

我想这可能取决于您使用的 cdn 以及它们如何实现 swf 验证。

据我从使用某些 cdns 可以看出，您需要验证请求流的模块，因此经验法则是验证实际执行播放的模块。

话虽如此，即使您的插件是触发请求的插件，但如果 MediaElement 类在播放器中，那很有可能是您需要验证的。

# google-apps-script - 如何自动回复电子邮件

> ID：11873464
> 
> 赞同：0
> 
> 时间：2012-08-08T21:29:36.993
> 
> 标签：google-apps-script, google-docs

我想自动回复一封包含一些信息的电子邮件。这个想法是为学生提供一种获取成绩和密码的自助服务方式。我看到了适用于电子邮件的示例脚本，但我需要：

1.  在主题中查找关键字以了解要提供的信息类型（即等级、密码等）
2.  查看入站电子邮件的电子邮件以识别学生（可选地找到密码）
3.  查找信息（可能在电子表格中）
4.  创建电子邮件并将其发送给学生

我更熟悉在电子邮件和电子表格中使用脚本，但我更愿意在 Google 协作平台页面上创建它或将其嵌入到 wiki 中。

提前感谢您的帮助，JDF

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T22:17:13.743

我不确定您正在寻找多少细节，或者您是否在哪里寻找示例代码，但这里有一些需要考虑的高级事项。

1.  首先，如果您要将代码嵌入到您希望能够轻松访问所有其他 Google 内容的网页中。例如，如果我将所有学生姓名密码和学生编号存储在电子表格或数据库中，您必须设置权限才能这样做。您的网站不算作您的“论据”，因为如果您将其分享出去，那么有人可能会窃取您所有的谷歌资料。
2.  仔细查看 Google appi [google apps 脚本](https://developers.google.com/apps-script/service_gmail)。您可以按主题（主题）搜索您的电子邮件，然后像这样浏览电子邮件。我认为您想要的所有功能都在那里。

# python - 我想在第一个空行开始解析文本文件

> ID：11873466
> 
> 赞同：1
> 
> 时间：2012-08-08T21:29:39.943
> 
> 标签：python

我想在文本文件的第一个空行开始解析文本文件。每个文本文件的前几行都有我不希望在搜索中使用的 URL，并且每个文件的长度标题略有不同。每个文件在标题和正文之间都有一个空行，所以我想在空行之后开始我的正则表达式搜索

我知道如何找到空行，但不知道如何获取它们的索引。

```
myfile = open(mydir,'r')
for line in myfile:
    if line in ['\n', '\r\n']:
        print 'Found it' 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T21:42:27.523

```
with open(mydir,'r') as myfile
    next(line for line in myfile if line.isspace())
    # now myfile is at the first line after the blank line 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T21:32:08.793

只需单步执行文件，忽略所有内容，直到找到空行。然后处理其余部分。

```
myfile = open(mydir,'r')
for line in myfile:
    if line in ['\n', '\r\n']:
        break
for line in myfile:
    #dostuff 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T21:32:06.887

> 我知道如何找到空行，但不知道如何获取它们的索引。

你还没有说为什么需要索引，我不认为你这样做。但是假设您（或其他阅读此问题的人）*确实*需要索引，那么您可以使用内置[`enumerate`](http://docs.python.org/library/functions.html#enumerate)函数：

```
for i, line in enumerate(myfile):
    if line in ['\n', '\r\n']:
        print 'Found it!', i 
```

请注意，如果您想要一个*行号*而不是*索引*，那么您通常希望从 1 而不是 0 开始。为此，将第一行更改为：

```
for i, line in enumerate(myfile, 1): 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T21:31:45.123

为什么不从“找到它”的正则表达式开始，而不用担心行号？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T21:31:55.387

```
myfile = open(mydir,'r')
for index,line in enumerate(myfile):
    if line in ['\n', '\r\n']:
        print 'Found it' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-08T21:44:09.363

```
>>> from itertools import dropwhile
>>> from operator import truth
>>> from itertools import islice
>>> with open('test.z') as f:
...     gen = dropwhile(lambda x: not(x == '\n' or x == '\r\n'), f)
...     gen = islice(gen, 1, None)
...     for line in gen:
...             print(line), 
```

# .net - 视觉工作室非常非常慢

> ID：11873470
> 
> 赞同：0
> 
> 时间：2012-08-08T21:30:19.117
> 
> 标签：.net, visual-studio-2010, visual-studio, msbuild, resharper

我的视觉工作室最近表现非常非常缓慢。我有一个包含 22 个项目的解决方案，以前从未出现过问题。我已经有几个月的这种大小的代码了，它总是又快又好。

为了调试，我尝试删除所有扩展。我已经尝试删除 re-sharper （虽然我可能会导致问题。）但它仍然很慢。

通过构建需要将近 5 分钟，运行测试需要将近 10-15 分钟。我已经多次重新启动计算机。清洗过的溶液。

剩下要做的唯一一件事就是重新安装 Visual Studio，但这根本不能保证任何类型的解决方案，在我这样做之前，我想确保我已经尽我所能来解决这个问题。

还有一件事，我的 Visual Studio 配置文件在网络上，因为我们公司的网络配置为所有用户的配置文件数据都驻留在网络上。我目前无法改变这个事实，但我也想知道它是否对 Visual Studio 构建的性能有任何影响。

有什么你认为我应该尝试的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T21:43:13.200

我有一个类似的问题。原来我设置了太多的断点。我把它们都删除了，它又恢复了正常。所以试一试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T21:37:11.443

我认为很可能有某种网络访问会减慢它的速度，尤其是当您说配置文件存储在那里时。我建议运行[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)以捕获数据几秒钟，然后查看列表中的一些网络路径或运行`Tools -> File Summary`或`Network Summary`查看它在哪里花费时间。可能是某处的服务器已关闭，因此有很多网络超时，或者网络上有很多延迟或流量。

# css - 需要相对列表项以忽略父母和孩子，并与兄弟姐妹一起浮动

> ID：11873476
> 
> 赞同：0
> 
> 时间：2012-08-08T21:30:43.143
> 
> 标签：css, list, drop-down-menu, height

我一直试图让这些列表项与他们的兄弟姐妹一起浮动，但他们会自动为他们的孩子创建一个边距。

这些列表项必须保持 position:relative 以便 #dropdown div 在显示新子项时调整大小。

我尝试将孩子设置为绝对，并使用 jquery 使用 .height() 调整 div 的大小，但它不响应“ul”的高度。

尚未实现下拉功能 - 仍在尝试让它们正确坐下。

请帮忙！

到目前为止，这是我的小提琴[http://jsfiddle.net/63pNN/3/](http://jsfiddle.net/63pNN/3/)

选择 Item1 > ItemA 时，菜单应如下所示：

主页**Item1** Item2 Item3
**ItemA** ItemB
ItemX ItemY

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T00:45:50.447

使用浮动和边距时需要指定宽度，如下所示：

```
li {
  display: inline-block;
  float:left;
  width:50px;
  margin-left:10px;
} 
```

希望这可以帮助 ：）

更新：http: [//jsfiddle.net/63pNN/31/](http://jsfiddle.net/63pNN/31/)

# jquery - jquery 验证插件和颜色框调整大小

> ID：11873477
> 
> 赞同：0
> 
> 时间：2012-08-08T21:30:43.250
> 
> 标签：jquery, validation, colorbox

我在颜色框中使用以下 Jquery 验证插件。我要做的是`$(this).colorbox.resize();`在“输入”行修改其类时触发。

Iv 尝试在几个位置添加调整大小代码，并且几乎可以正常工作。我似乎无法将函数添加到重要的位置，因为当添加或删除“错误”或“有效”类时，它仍然会弹出滚动条，但是如果您在表单输入字段之外单击，我添加的颜色框调整大小功能有效。

所以，我的目标和问题是，我需要在哪里添加颜色框调整大小，以便在将“错误”或“有效”类应用于表单中的输入字段时触发。

提前感谢任何帮助。

jQuery 验证插件 1.5.5 太大，复制到这里，所以我把它放在 Fiddle [http://jsfiddle.net/ZHScy/](http://jsfiddle.net/ZHScy/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T09:55:52.830

好吧，就我而言，我不做任何调整大小。我只是让错误溢出

```
$("#My_Form").colorbox();

$(document).bind('cbox_complete', function(){
    $("#cboxContent, #cboxOverlay, ,#cboxWrapper, #colorbox").css('overflow', 'visible');

}); 
```

![在此处输入图像描述](../Images/1da2132de3f3f5a0c0a2fc36318bbf36.png)

仅供参考，它适用于 IE、FF、Chrome ......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T07:58:12.563

当验证成功时，我们需要附加一个操作。

请附加以下代码。

```
success: function(label) 
{
 $.colorbox.resize();
} 
```

# audio - 在 Firefox 浏览器中播放 mp3 音频文件

> ID：11873478
> 
> 赞同：0
> 
> 时间：2012-08-08T21:30:47.030
> 
> 标签：audio

我搜索了有关在 Firefox 中播放 mp3 文件的各种文章，但没有运气。我想要类似于这个网站的东西来播放我的音频文件： [http ://www.waatea603am.co.nz/podcasts](http://www.waatea603am.co.nz/podcasts)

谁能告诉我网站上的音频文件是如何播放的。我想做类似的事情。我无法弄清楚它是如何完成的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:36:32.520

这是使链接播放声音的 JavaScript：

[http://www.waatea603am.co.nz/Resources/JavaScript/podcast-audio.js](http://www.waatea603am.co.nz/Resources/JavaScript/podcast-audio.js)

它基本上是使用 HTML5 Audio 元素：

```
<script type="text/javascript">
    var snd = new Audio("file.mp3"); // buffers automatically when created
    snd.play();
</script> 
```

[http://www.w3.org/wiki/HTML/Elements/audio](http://www.w3.org/wiki/HTML/Elements/audio)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T21:36:33.080

这不是一个真正的“编程”问题，而是一个“Firefox 配置”问题。

亲自：

*   我对 Linux 的“媒体播放器”没有任何偏好

*   我只是在 Windows 上使用 Windows 媒体播放器

*   所有最新版本的 Windows 都内置了 Windows Media 播放器

*   Windows 媒体是所有最新版本 Windows 上 .mp3 的默认文件关联

*   因此，Firefox 自动使用 Windows Media player 播放 .mp3

这里有更多信息：

*   问题：_Sound">​​http://kb.mozillazine.org/Mozilla_Suite_：*问题*：_Sound

*   [http://support.mozilla.org/en-US/kb/fix-common-audio-and-video-issues](http://support.mozilla.org/en-US/kb/fix-common-audio-and-video-issues)

'希望有帮助.. PSM

PS：

不幸的是，大多数商业互联网广播电台似乎都使用 Flash 来广播音频流。叹...

# objective-c - 从 Objective-c 中的单个方法获取多个输出

> ID：11873483
> 
> 赞同：4
> 
> 时间：2012-08-08T21:31:18.747
> 
> 标签：objective-c, methods

我有自己的类，并且正在编写一个具有多个输入（三个浮点值）和多个输出（三个浮点值）的方法。我不知道如何从一个方法中获得多个输出。有任何想法吗？

我当前的方法如下所示：

```
- (void)convertABC2XYZA:(float)a
                  B:(float)b 
                  C:(float)c 
            outputX:(float)x 
            outputY:(float)y 
            outputZ:(float)z 
{
    x = 3*a + b;
    y = 2*b;
    z = a*b + 4*c;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-08T21:35:54.900

“返回”多个输出的一种方法是将指针作为参数传递。像这样定义你的方法：

```
- (void)convertA:(float)a B:(float)b C:(float) intoX:(float *)xOut Y:(float *)yOut Z:(float)zOut {
    *xOut = 3*a + b;
    *yOut = 2*b;
    *zOut = a*b + 4*c;
} 
```

并这样称呼它：

```
float x, y, z;
[self convertA:a B:b C:c intoX:&x Y:&y Z:&z]; 
```

另一种方法是创建一个结构并返回它：

```
struct XYZ {
    float x, y, z;
};

- (struct XYZ)xyzWithA:(float)a B:(float)b C:(float)c {
    struct XYZ xyz;
    xyz.x = 3*a + b;
    xyz.y = 2*b;
    xyz.z = a*b + 4*c;
    return xyz;
} 
```

像这样称呼它：

```
struct XYZ output = [self xyzWithA:a B:b C:c]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-08T21:34:17.683

Objective-C 中的方法（与[Python 或 JavaScript](https://stackoverflow.com/questions/3951946/what-is-the-name-of-a-foo-bar-foo-bar-feature)不同）最多只能返回 1 个东西。创建一个“事物”以包含您要返回的 3 个浮点数，然后返回其中一个。

[您可以使用输出参数](https://stackoverflow.com/a/11873546/139010)而不是返回。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T21:45:08.037

这与 C 的关系比与 Objective-c 的关系更大。

您需要通过引用传递值。你的函数应该这样声明：

```
- (void)convertABC2XYZA:(float)a
              B:(float)b 
              C:(float)c 
        outputX:(float *)x 
        outputY:(float *)y 
        outputZ:(float *)z; 
```

并像这样调用：

```
[receiver convertABC2XYZA:a B:b C:c outputX:&x outputY:&y outputZ:&z]; 
```

# jquery - 试图从表中获取正确的 'td:nth-child(1)' 值

> ID：11873484
> 
> 赞同：1
> 
> 时间：2012-08-08T21:31:21.113
> 
> 标签：jquery, asp.net

我正在学习一些 JQuery 基础知识，并且对这种特殊情况感到困惑。我有一个基本表，每行末尾都有一个删除按钮，我试图让我的 JQuery 代码根据我单击“删除”按钮的行来识别第 1 列的值。无论我实际在哪一行，它都会不断地给我第一行的值。

这是我的表格代码：

```
 <table id="DemoTable">
        <thead><tr><th>Product</th><th>Price</th></tr></thead>
        <tr><td>Sirloin Steak 10 oz.</td><td>8.77</td><td><input type="submit" value="Delete" /></td></tr>
        <tr><td>Filet Mignon 8 oz.</td><td>14.50</td><td><input type="submit" value="Delete" /></td></tr>
        <tr><td>Redi-Grill 5 oz.</td><td>1.55</td><td><input type="submit" value="Delete" /></td></tr>
        <tr><td>San Marco Stuffed Shells</td><td>.35</td><td><input type="submit" value="Delete" /></td></tr>
        <tr><td>Sliced Cheese Yellow</td><td>.10</td><td><input type="submit" value="Delete" /></td></tr>
    </table> 
```

这是 JQuery 部分：

```
<script type="text/javascript">
  $(document).ready(function () {
    $('form').submit(function () {
        var itemName = $('td:nth-child(1)', this).html();
        return confirm('Are you sure you want to delete ' + itemName + '?');
    });
  });
</script> 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T21:37:21.037

*您的代码在form*的 submit 事件上运行，因此当您使用`this`它时，它是表单本身，而不是被单击的特定按钮。尝试处理删除按钮上的点击事件，因为这样您可以获得与按钮在同一行的 td：

```
$('#DemoTable input[type="submit"]').click(function() {
   var itemName = $(this).closest("tr").children().eq(0).html();
   return confirm('Are you sure you want to delete ' + itemName + '?');
}); 
```

演示：http: [//jsfiddle.net/nnnnnn/VxWUJ/](http://jsfiddle.net/nnnnnn/VxWUJ/)

请注意，当表单被提交时，您需要对要删除的值做一些事情，例如，将其放在表单内的隐藏字段中。您没有在问题中显示表单的其余部分，但看起来您拥有的唯一表单元素是删除按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T21:33:04.207

尝试：

```
$('form').submit(function (e) {
    var itemName = $(e.target).parents('tr').children(":first-child").html();
    return confirm('Are you sure you want to delete ' + itemName + '?');
}); 
```

# java - 您的内容必须有一个 TabHost，其 id 属性为 'android.R.id.tabhost' android 应用程序错误

> ID：11873489
> 
> 赞同：1
> 
> 时间：2012-08-08T21:31:49.833
> 
> 标签：java, android, xml

我正在 Android 中使用 eclipse 创建一个应用程序。我的软件运行完美，直到我创建了一个函数，该函数从我的一个选项卡式 Activiy 中创建了一个返回 MainActivity 的新意图，然后它停止工作，每当我运行它时都会出现“强制关闭应用程序”错误。我已经删除了该功能，但错误仍然存​​在，

这是我的代码，

包我的.main；

```
import java.io.UnsupportedEncodingException;
import java.net.URLEncoder;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.TabActivity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.view.View;
import android.widget.EditText;
import android.widget.TabHost;
import android.widget.TabHost.TabSpec;

public class MainActivity extends TabActivity {

    HttpClient      client      = new HttpClient();
    Security        security    = new Security();

    //file name for storing persistent data for sessions
        public static final String PREFS_SESSION = "AccountsFile";
        public static String storedEmailName = "userEmail";
        public static String storedPasswordName = "userPassword";

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        /*check if username has been stored*/

        // if stored info exists, log the user in with login details and display main layout
            if(doesPersistExist(storedEmailName, PREFS_SESSION)){
                // auto login user
                    try 
                        {autologin();} 
                    catch (UnsupportedEncodingException e) 
                        {e.printStackTrace();}
                    setContentView(R.layout.tabbed_main);
               // Once logged in, display tabbed layouts
               // Generate tabes suing function generateTags()

                    // Generate tabs 
                        generateTab("Scan", R.drawable.icon_tab_scan, ScanActivity.class);
                        generateTab("Recent", R.drawable.icon_tab_recent, RecentActivity.class);
                        generateTab("Favourites", R.drawable.icon_tab_favourites, FavouritesActivity.class);
                        generateTab("Settings", R.drawable.icon_tab_settings, SettingsActivity.class);

            }

        // else, username has not been stored, prompt login
            else{
                    setContentView(R.layout.login);
                }

    }

    // Auto login user if credentials already exist
    public void autologin() throws UnsupportedEncodingException{
          //deleted contents of function to save room - this function definitely works
    }

    // Function that logs a user out by deleting the store user credentials
    public void logout(){
        //Create a sharedPreferences instance
            SharedPreferences persist = getSharedPreferences(PREFS_SESSION, 0);
        // Delete stored username and password
            persist.edit().remove(storedPasswordName).commit();
            persist.edit().remove(storedEmailName).commit();
        // Rteurn user to login screen
            setContentView(R.layout.login);
    }

    /*storeString*/

    //Persistently store a string - used for cookie name and value strings
    public Boolean storeString(String PREF_NAME, String stringName, String stringValue){

        // We need an Editor object to make preference changes.
        // All objects are from android.context.Context
        SharedPreferences settings = getSharedPreferences(PREF_NAME, 0);
        SharedPreferences.Editor editor = settings.edit();

        //commit session name and value to memory
        editor.putString(stringName, stringValue);
        // Commit the edits
        Boolean result = editor.commit();

        return result;
    }

    /*retrieveStoredString*/

    //retrieve a persistently stored string from function storeString()
    public String retrieveStoredString(String PREF_NAME, String stringName){

        SharedPreferences persist = getSharedPreferences(PREF_NAME, 0);
        String result = persist.getString(stringName, null);

        return result;
    }

    // Check if persistent store exists
    public Boolean doesPersistExist(String key, String PREF_NAME){

        SharedPreferences persist = getSharedPreferences(PREF_NAME, 0);
        Boolean result = persist.contains(key);

        return result;
    }

    // Function will generate a new tab
    public void generateTab(String tabSpec, int id, Class activity){
        TabHost tabHost = getTabHost();
        // Tab for scan
            TabSpec scanspec = tabHost.newTabSpec(tabSpec);
        // setting Title and Icon for the Tab
            scanspec.setIndicator(tabSpec, getResources().getDrawable(id));
        // create intent to start new tabbed activity
            Intent scanIntent = new Intent(this, activity);
            scanspec.setContent(scanIntent);
        // add the tab to the tab layout
            tabHost.addTab(scanspec);

    }

} 
```

这是我的 tabbed_main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />
        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"/>
    </LinearLayout>
</TabHost> 
```

正如我所说，我已经创建了 in Manifest，选项卡式布局在我尝试添加该功能之前运行良好，从那时起就没有任何效果。这是来自 logcat 的日志，

```
08-08 22:11:42.390: D/dalvikvm(1966): GC_FOR_ALLOC freed 37K, 5% free 6387K/6659K, paused 32ms
08-08 22:11:42.390: I/dalvikvm-heap(1966): Grow heap (frag case) to 6.834MB for 513744-byte allocation
08-08 22:11:42.440: D/dalvikvm(1966): GC_FOR_ALLOC freed 8K, 5% free 6881K/7175K, paused 35ms
08-08 22:11:42.490: D/AndroidRuntime(1966): Shutting down VM
08-08 22:11:42.490: W/dalvikvm(1966): threadid=1: thread exiting with uncaught exception (group=0x40226760)
08-08 22:11:42.490: E/AndroidRuntime(1966): FATAL EXCEPTION: main
08-08 22:11:42.490: E/AndroidRuntime(1966): java.lang.RuntimeException: Unable to start activity ComponentInfo{my.main/my.main.MainActivity}: java.lang.RuntimeException: Your content must have a TabHost whose id attribute is 'android.R.id.tabhost'
08-08 22:11:42.490: E/AndroidRuntime(1966):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1751)
08-08 22:11:42.490: E/AndroidRuntime(1966):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1767)
08-08 22:11:42.490: E/AndroidRuntime(1966):     at android.app.ActivityThread.access$1500(ActivityThread.java:122)
08-08 22:11:42.490: E/AndroidRuntime(1966):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1005)
08-08 22:11:42.490: E/AndroidRuntime(1966):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-08 22:11:42.490: E/AndroidRuntime(1966):     at android.os.Looper.loop(Looper.java:132)
08-08 22:11:42.490: E/AndroidRuntime(1966):     at android.app.ActivityThread.main(ActivityThread.java:4028)
08-08 22:11:42.490: E/AndroidRuntime(1966):     at java.lang.reflect.Method.invokeNative(Native Method)
08-08 22:11:42.490: E/AndroidRuntime(1966):     at java.lang.reflect.Method.invoke(Method.java:491)
08-08 22:11:42.490: E/AndroidRuntime(1966):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
08-08 22:11:42.490: E/AndroidRuntime(1966):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
08-08 22:11:42.490: E/AndroidRuntime(1966):     at dalvik.system.NativeStart.main(Native Method)
08-08 22:11:42.490: E/AndroidRuntime(1966): Caused by: java.lang.RuntimeException: Your content must have a TabHost whose id attribute is 'android.R.id.tabhost'
08-08 22:11:42.490: E/AndroidRuntime(1966):     at android.app.TabActivity.onContentChanged(TabActivity.java:105)
08-08 22:11:42.490: E/AndroidRuntime(1966):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:245)
08-08 22:11:42.490: E/AndroidRuntime(1966):     at android.app.Activity.setContentView(Activity.java:1780)
08-08 22:11:42.490: E/AndroidRuntime(1966):     at my.main.MainActivity.onCreate(MainActivity.java:57)
08-08 22:11:42.490: E/AndroidRuntime(1966):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
08-08 22:11:42.490: E/AndroidRuntime(1966):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1715)
08-08 22:11:42.490: E/AndroidRuntime(1966):     ... 11 more
08-08 22:11:42.500: D/dalvikvm(1966): GC_CONCURRENT freed 61K, 4% free 7021K/7239K, paused 2ms+4ms
08-08 22:16:46.110: I/Process(1966): Sending signal. PID: 1966 SIG: 9
08-08 22:20:10.500: V/TLINE(2142): new: android.text.TextLine@40871fb0
08-08 22:20:10.530: V/TLINE(2142): new: android.text.TextLine@40872bf8
08-08 22:22:19.030: I/jdwp(2142): Ignoring second debugger -- accepting and dropping
08-08 22:22:21.210: I/jdwp(2205): Ignoring second debugger -- accepting and dropping
08-08 22:22:21.310: D/dalvikvm(2205): GC_FOR_ALLOC freed 39K, 5% free 6385K/6659K, paused 34ms
08-08 22:22:21.310: I/dalvikvm-heap(2205): Grow heap (frag case) to 6.833MB for 513744-byte allocation
08-08 22:22:21.370: D/dalvikvm(2205): GC_CONCURRENT freed 0K, 5% free 6887K/7175K, paused 3ms+2ms
08-08 22:22:21.400: D/AndroidRuntime(2205): Shutting down VM
08-08 22:22:21.400: W/dalvikvm(2205): threadid=1: thread exiting with uncaught exception (group=0x40226760)
08-08 22:22:21.410: E/AndroidRuntime(2205): FATAL EXCEPTION: main
08-08 22:22:21.410: E/AndroidRuntime(2205): java.lang.RuntimeException: Unable to start activity ComponentInfo{my.main/my.main.MainActivity}: java.lang.RuntimeException: Your content must have a TabHost whose id attribute is 'android.R.id.tabhost'
08-08 22:22:21.410: E/AndroidRuntime(2205):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1751)
08-08 22:22:21.410: E/AndroidRuntime(2205):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1767)
08-08 22:22:21.410: E/AndroidRuntime(2205):     at android.app.ActivityThread.access$1500(ActivityThread.java:122)
08-08 22:22:21.410: E/AndroidRuntime(2205):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1005)
08-08 22:22:21.410: E/AndroidRuntime(2205):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-08 22:22:21.410: E/AndroidRuntime(2205):     at android.os.Looper.loop(Looper.java:132)
08-08 22:22:21.410: E/AndroidRuntime(2205):     at android.app.ActivityThread.main(ActivityThread.java:4028)
08-08 22:22:21.410: E/AndroidRuntime(2205):     at java.lang.reflect.Method.invokeNative(Native Method)
08-08 22:22:21.410: E/AndroidRuntime(2205):     at java.lang.reflect.Method.invoke(Method.java:491)
08-08 22:22:21.410: E/AndroidRuntime(2205):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
08-08 22:22:21.410: E/AndroidRuntime(2205):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
08-08 22:22:21.410: E/AndroidRuntime(2205):     at dalvik.system.NativeStart.main(Native Method)
08-08 22:22:21.410: E/AndroidRuntime(2205): Caused by: java.lang.RuntimeException: Your content must have a TabHost whose id attribute is 'android.R.id.tabhost'
08-08 22:22:21.410: E/AndroidRuntime(2205):     at android.app.TabActivity.onContentChanged(TabActivity.java:105)
08-08 22:22:21.410: E/AndroidRuntime(2205):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:245)
08-08 22:22:21.410: E/AndroidRuntime(2205):     at android.app.Activity.setContentView(Activity.java:1780)
08-08 22:22:21.410: E/AndroidRuntime(2205):     at my.main.MainActivity.onCreate(MainActivity.java:57)
08-08 22:22:21.410: E/AndroidRuntime(2205):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
08-08 22:22:21.410: E/AndroidRuntime(2205):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1715)
08-08 22:22:21.410: E/AndroidRuntime(2205):     ... 11 more
08-08 22:27:25.039: I/Process(2205): Sending signal. PID: 2205 SIG: 9 
```

看起来“您的内容必须有一个 id 属性为 'android.R.id.tabhost' 错误的 TabHost”是这里的主要错误，但从网上看我发现这通常是由于没有设置 id 标签在 'tabbed_main.xml' 中正确，但我肯定设置正确。我花了几个小时在网上和通过代码查看，但对它为什么不起作用一无所知。任何帮助将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T11:41:49.350

对，所以我设法找出问题所在，所以我想我会分享。问题归结于在**TabActivity中使用****SharedPreferences**函数。当我将扩展更改为**Activity**并创建一个新的 MainTabbedActivity 来为选项卡布局生成选项卡时，一切正常。

 ****我不是 100% 确定这是为什么，但我想这可能与上下文有关。我很可能错误地使用了 TabActivity，因为所有该活动应该做的是为 tablayout 生成选项卡 ​​- 不执行任何功能。（如果有人知道它不起作用的确切原因，请随时发表评论，我很想知道！）

因此，对于将来遇到类似问题的任何人，只需在您的主要活动中做任何您需要做的事情，然后像这样为您的 TabActivity 创建一个意图，

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    /*check if username has been stored*/

    // if stored info exists, log the user in with login details and display main layout
        if(doesPersistExist(storedEmailName, PREFS_SESSION)){
            // auto login user
           // Once logged in, display tabbed layouts
                Intent i = new Intent(getApplicationContext(), MainTabbedActivity.class);
                startActivity(i);

        }

    // else, username has not been stored, prompt login
        else{
                setContentView(R.layout.login);
            }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T21:40:43.317

出色地，

我真的不确定，但根据[这个](https://stackoverflow.com/a/2297503/975959)答案，一旦他更换

```
android:id="@android:id/tabhost" 
```

和

```
android:id="@+id/tabhost" 
```

它对他有用..试一试。

**编辑** 因为这不起作用，所以下面的答案表明他通过删除`R.java`文件得到了这个工作，并且一旦 IDE 重新生成它（可能通过重建）它就工作了祝你好运

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-08T21:50:48.810

将您的 xml 文件重命名为独特的名称，例如 main.xml 或其他名称，而不是 tabbed_main.xml。还要清理您的项目并删除 R 文件（它将再次重新生成），有时它可以解决您的问题。****

# objective-c - 如何在 viewWillAppear 中获取 TabBarController 的 selectedIndex？

> ID：11873495
> 
> 赞同：0
> 
> 时间：2012-08-08T21:32:13.563
> 
> 标签：objective-c, ios, xcode4

我的 viewWillAppear 方法中有代码，需要检查标签栏的 selectedIndex。唯一的问题是，此时程序返回索引还为时过早，所以我得到了空值。

有没有一种方法可以访问 selectedIndex 而无需将代码放入 viewDidAppear 中？我正在尝试解决可见的 1 秒闪烁/延迟负载，这似乎仅适用于 viewWillAppear。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T21:41:55.387

你有两种方法可以得到它，我能想到。首先，将tabBarController设为appDelegate的属性，然后你可以从sharedApplication中获取appDelegate引用，然后向它询问UITabBarController对象并直接询问（或者在你的appDelegate中添加一个方法来提供selectedIndex）。

第二个想法是在你的 viewController 上有一个属性，就在它被推送（无论如何） selectedIndex 被设置之前。

# sql - 在 SQL Server 中搜索空格

> ID：11873503
> 
> 赞同：0
> 
> 时间：2012-08-08T21:32:48.700
> 
> 标签：sql, sql-server, sql-server-2008, tsql

在一张表中，我有一个条目

```
12-345678
123-456-789
123456789 
```

在 UI 文本框中，当有人键入时：`&nbsp;&nbsp;- (two spaces then one dash).`

输出应该是：

```
12-345678 
```

在 UI 文本框中，当有人键入时：`12-`

输出应该是：

12-345678

在 UI 文本框中，当有人键入时：`12`

```
12-345678
123-456-789
123456789 
```

我的选择查询是

```
select column1,column2 from table1 where column1 like '%textbox1.text%'; 
```

textbox1.text-> UI 的文本框名称。

之前的任何东西 - 都需要退回，例如：

```
if you type 12-, return output should be 12-345678 alone,
if you type 123-, then the return output should be 123-456-789 alone.
if you type - (only dash, no space on the front , then the return output should be 12-345678 and 123-456-789 . 
```

但是它在少数情况下会失败，有什么方法可以计算空间并直接在 sql 中修改查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T21:52:24.130

就像是

```
"Select column1,column2 From Table1 Where column like " + textbox1.text.Replace(' ','_') + "%" 
```

'当然你应该使用参数化查询。

sql通配符是

```
% 0 to n of any character
underscore 1 single character
[xyz] any single character that is x, y or z 
```

所以在你的例子中，它会是 Like '__-%' a space 后面跟 2 会是 Like '_2%' 并拿起你的所有三个例子，因为每个都是一个字符，后跟“2”，然后是另一个东西

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T21:53:41.850

如果我理解正确：当有前导空格时，您需要将它们转换为`_`. 对于没有前导空格的情况，您只需附加`%`.

```
<space><space>-  '__-%'
12-              '12-%'
12               '12%'
123-             '123-%' 
```

但是这个不符合模式，所以这是一个特例：

```
-                '%-%' 
```

我怀疑你想要一个单行修复，但是虽然你可以将它全部打包成一个`iff()`，但如果可能的话我会避免这样做。

**编辑添加**

C＃：

```
string arg = theTextbox.Text;
arg = arg.Replace("'", "''"); // avoid SQL injection attack

arg = arg.Replace(" ", "_"); // space = single character wildcard = '_'

if (arg.StartsWith("-")) // special case
    arg = "%-";

string sqlStatement = string.Format("SELECT column1, column2 " +
             "FROM table1 WHERE column1 like '{0}%', arg); 
```

# android - 跟踪内存不足错误

> ID：11873504
> 
> 赞同：0
> 
> 时间：2012-08-08T21:32:54.187
> 
> 标签：android, trace, out-of-memory

我在 google play 上收到以下堆栈跟踪错误。这只发生在我最近的更新中，其中包括添加一些需要互联网连接的第三方代码以及对我的代码进行更新。我无法弄清楚如何重现这个问题，也无法弄清楚它来自哪里。有任何想法吗？

> java.lang.OutOfMemoryError: (Heap Size=8519KB, Allocated=5304KB, Bitmap Size=24283KB) at android.webkit.ByteArrayBuilder$Chunk.(ByteArrayBuilder.java:136) at android.webkit.ByteArrayBuilder.obtainChunk(ByteArrayBuilder.java: 127) 在 android.webkit.ByteArrayBuilder.append(ByteArrayBuilder.java:55) 在 android.webkit.LoadListener.data(LoadListener.java:744) 在 android.net.http.Request.readResponse(Request.java:377) 在android.net.http.Connection.processRequests(Connection.java:386) 在 android.net.http.ConnectionThread.run(ConnectionThread.java:144)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:37:21.457

某处，有人正在加载 24 MB 位图（位图大小=24283KB）。我怀疑这是你的问题。

如果是您创建位图，我建议您阅读这个[答案](https://stackoverflow.com/questions/477572/android-strange-out-of-memory-issue-while-loading-an-image-to-a-bitmap-object/823966#823966)和这篇[文章](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)。

# svn - 我在签入所有文件之前删除了 Tortoise SVN：重新安装了 Tortoise，现在我该怎么办？

> ID：11873506
> 
> 赞同：1
> 
> 时间：2012-08-08T21:33:09.690
> 
> 标签：svn, tortoisesvn, working-copy

在我有机会检查工作副本中的所有更改之前，必须格式化我的 windows 框，显然这删除了 ​​Tortoise SVN。工作副本仍然存在，现在我已经重新安装了 Tortoise SVN，最好的行动计划是什么？

基本上有没有比创建新的工作副本并手动检查我已更改的文件并将它们从旧工作副本复制过来更简单的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T22:32:24.883

使用 SVN，工作副本和存储库之间的链接存储在一个名为 .svn 的隐藏目录中，或者在工作副本的根目录中，或者在工作副本的每个目录中。

因此，您需要做的就是提交。把它想象成记事本和一个文本文件，您可以根据需要卸载并重新安装记事本，只要安装了记事本，您就可以编辑该文本文件，它不会消失（直到您也将其删除）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T21:40:52.333

首先，创建一个备份。然后，在每个步骤中，创建一个备份并将它们以只读方式存储在安全的地方。

然后，我建议的行动计划相当简单：

1：尽一切可能将工作副本连接到基础（很可能如下所示）

*   安装乌龟
*   在另一个位置签出整个项目
*   您可能希望在问题发生时检查您正在处理的修订（而不是 HEAD）：这将简化以后的合并

2：现在你有了一个“工作”的工作副本，用你从崩溃中恢复的数据覆盖它（从 SVN 的角度来看，这看起来像是一个编辑）

3：像往常一样将工作副本更新为 HEAD。希望你们不要有太多的冲突。然后提交并恢复工作

# jquery - Flexigrid 不分页

> ID：11873509
> 
> 赞同：1
> 
> 时间：2012-08-08T21:33:33.530
> 
> 标签：jquery, flexigrid

我有一个 jQuery flexigrid，它在第一页上显示 15 项中的 1-10 项，但分页不起作用。即当我请求第二页时，数据保持不变。有任何想法吗？

这是配置：

```
$("#tblLists").flexigrid({
    url: '/lists/load/',
    dataType: 'json',
    colModel : [
        {display: 'Name', name : 'name', width : 900, sortable : true, align: 'left'},
        {display: 'Recipients', name : 'recipients', width : 200, sortable : true, align: 'left'}
        ],
    searchitems : [
        {display: 'Name', name : 'name', isdefault: true}
        ],
    sortname: "name",
    sortorder: "desc",
    usepager: true,
    title: 'Lists',
    useRp: true,
    rp: 10,
    width: 'auto',
    height: 200,
    singleSelect: true,
    onSuccess: function(){
        $('.flexigrid tr').dblclick(function(event){
            console.log($(this).attr('id').substr(3));
        });
    }, 
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T23:25:27.223

我猜你的 /lists/load/ url 一次返回所有 12 个项目。FlexiGrid 不支持客户端分页（这很糟糕……但他们不支持）。他们希望您在服务器端实现分页。因此，如果 rp 为 10 且 page = 1，则返回结果 1 到 10。如果 rp 为 10 且 page = 2，则返回结果 11 到 20。排序也是如此。Flexigrid 会将排序参数传递给您，您需要在服务器端进行排序并返回排序后的数据。

# javascript - 使用 jquery 或 JavaScript 突出显示？

> ID：11873510
> 
> 赞同：0
> 
> 时间：2012-08-08T21:33:34.730
> 
> 标签：javascript, jquery, highlight

我是编程新手，我有一个过去被问过很多次的问题。我需要以某种方式实现突出显示。我看过一个 jquery 插件（SearchHighlight）。Jquery 正在使用选择器。老实说，我不想使用它们。我需要的是向插件“提供”要突出显示的字符串以及通过变量 ex 保存搜索词的字符串。

```
var searchterms = 'lolo loli let';
var searchstring = ' Lolo loves loli and .... Blah, blah';
var highlightedstring = '';

// SearchHighlight plugin

highlightedstring return; 
```

如果以上不可能，那么纯 JavaScript 中有没有办法进行子字符串突出显示？

尊重地，

汤姆

希腊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T21:47:50.620

突出显示的概念是从您正在搜索的容器中获取 html，并使用您可以设置样式的标签来包装找到的单词。只有一个单词的简单示例，但这可以用一组单词进行扩展。

```
function highlight(word, content) {
    var html = $(content).html();
    var re = new RegExp(word, 'gi');
    $(content).html(html.replace(re, '<code>$&</code>'));
}

highlight('pleasure', '#content'); 
```

**演示：http:** [//jsfiddle.net/elclanrs/hdYmb/](http://jsfiddle.net/elclanrs/hdYmb/)

# axapta - Dynamics AX 2009：如何以编程方式在复选框控件上允许编辑

> ID：11873511
> 
> 赞同：1
> 
> 时间：2012-08-08T21:33:35.590
> 
> 标签：axapta, dynamics-ax-2009, ax

本质上，这就是我所面临的：

1.  我想修改 InventTrans 表单
2.  默认情况下，它将整个 InventTrans 数据源设置为 AllowEdit = No
3.  我想在一个新的枚举字段（NoYes 类型）上启用编辑

我应该将 InventTrans 数据源设置为 AllowEdit = Yes，然后痛苦地将数据源中的 40 多个字段更改为 AllowEdit = No，还是有办法以编程方式遍历数据源的字段并按名称设置此属性？（请说有，或者同样简单的方法来做到这一点！）

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T05:09:37.343

This is how I would try to disable editing to all fields:

```
DictTable    dictTable;
DictField    dictField;
int          fldCnt;
;
dictTable = new DictTable(tablenum(InventTrans));
for (fldCnt = 1; fldCnt <= dictTable.fieldCnt() ; fldCnt++)
{
    dictField = new DictField(tablenum(InventTrans), dictTable.fieldCnt2Id(fldCnt));
    info(strfmt("%1", dictField.id(),dictField.name()));
    InventTrans_DS.object(dictField.id()).allowEdit(false);
} 
```

EDIT: Better approach to iterate through form's DS'es fields only:

```
DictTable           dictTable;
DictField           dictField;
int                 fldCnt;
QueryBuildFieldList qBFL;
;
qBFL = InventTrans_DS.query().dataSourceTable(tablenum(InventTrans)).fields();
for (fldCnt = 1; fldCnt <= qBFL.fieldCount() ; fldCnt++)
{
    dictField = new DictField(tablenum(InventTrans), qBFL.field(fldCnt));
    info(strfmt("%1 %2 ", dictField.id(),dictField.name()));
    if(InventTrans_DS.object(qBFL.field(fldCnt))) //exception recVersion for example
    {
        InventTrans_DS.object(qBFL.field(fldCnt)).allowEdit(false);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-23T13:01:43.113

我有一个场景，我想允许在 InventJournalTrans 表单中编辑 ItemID，基于 ANOTHER 表单中的枚举值。这可能吗？

可以使用 args() 类（parm 方法）来获取复选框的值吗？以及在活动（）中的以下条件？
我的代码：

```
public int active()
{
int ret;
;

ret = super();

if([datasource table name].[Column 1 field name] == [Column1 value to
deactivate Column 3])
{
[datasource table name]_ds.object(fieldNum([datasource table name],
[Column 1 field name])).allowEdit(false);
}
else
{
[datasource table name]_ds.object(fieldNum([datasource table name],
[Column 1 field name])).allowEdit(true);
}

return ret;
} 
```

# javascript - 如何阻止元素堆叠？jqueryui

> ID：11873513
> 
> 赞同：0
> 
> 时间：2012-08-08T21:33:44.703
> 
> 标签：javascript, jquery, html, jquery-ui

我在这里有一个例子：http: [//jsfiddle.net/BAk9N/4/](http://jsfiddle.net/BAk9N/4/)

我正在尝试使“测试”元素不能拖到其他测试元素和堆栈之上，并且还没有找到可行的解决方案。

有没有人对如何防止测试元素相互堆叠有任何想法？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T15:03:23.887

我能看到的一件事是，捕捉行为如此有趣的原因是你的 li 之间的空白。如果您`//margin: 10px;`从`.meals li`css 中取出，它会吸附到元素的中间。我建议把它拿掉。否则，我觉得您将不得不提出自己的捕捉解决方案。

这也是我为另一个问题与此半相似的人制作的小提琴。这可能会在自定义捕捉解决方案中帮助您。

在这里演示：[JsFiddle](http://jsfiddle.net/jeschafe/JTKBR/)

# html - iframe 滚动条右对齐

> ID：11873515
> 
> 赞同：3
> 
> 时间：2012-08-08T21:33:53.550
> 
> 标签：html, iframe

有一种方法可以将滚动条从 iframe 对齐到右侧吗？默认为左。
任何的想法？

[看看这里](http://www.w3schools.com/Tags/tryit.asp?filename=tryhtml_iframe_align)我想在加载页面时看到搜索框！

我有一个具有 ifram 的应用程序，在 ifram 中我正在加载一个搜索框位于右上角的网站，
我希望当页面加载时我应该能够立即看到搜索框而不必向右滚动....有什么不清楚的地方吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T23:23:11.303

你能用jquery吗？如果是，您可以执行以下操作：

```
<!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>
<p>This is some text. This is some text. This is some text.
<div id="frame" style="width: 200px; height: 200px; overflow: scroll";>
<iframe src="http://www.w3schools.com/default.asp" width="1024" height="768" scrolling="no">
<p>Your browser does not support iframes.</p>
</iframe>
</div>
This is some text. This is some text. This is some text.</p>
<p>The align attribute was deprecated in HTML 4, and is not supported in HTML 4.01 Strict DTD or in XHTML 1.0 Strict DTD. Use CSS instead.</p>
<script type="text/javascript">
jQuery(document).ready(function () {
$("#frame").scrollTop(10).scrollLeft(750);
});
</script>
</body>
</html> 
```

如果您将代码复制并粘贴到 html 文件中并在浏览器中打开它，您会看到 iframe 自动滚动到最右侧。

主要变化是：

1.  在您的 html 文件中导入 jquery
2.  add scrolling="no" to your iframe
3.  specify the width and height of your iframe, it should be roughly the same as the actualy width & height of the embedded page
4.  wrap your iframe in a `<div>`, be sure to specify the width & height (less than the iframe width & height)
5.  add the javascript code before the closing `</body>` tag

    `<script type="text/javascript"> jQuery(document).ready(function () { $("#frame").scrollTop(10).scrollLeft(800); }); </script>`

# shell - Send an email using shell script and appending the output from the query

> ID：11873516
> 
> 赞同：0
> 
> 时间：2012-08-08T21:33:53.580
> 
> 标签：shell, unix, hadoop, solaris, hive

Below is my shell script from which I am running two Hive SQL queries. Which is working fine.

```
#!/bin/bash

DATE_YEST_FORMAT2=`perl -e 'use POSIX qw(strftime); print strftime "%Y%m%d",localtime(time()- 3600*96);'`
echo $DATE_YEST_FORMAT2

hive -e "
set mapred.job.queue.name=data-technology;
SELECT SUM(total_items_purchased), SUM(total_items_missingormismatch) from lip_data_quality where dt='$DATE_YEST_FORMAT2';
SELECT 100 * SUM(total_items_missingormismatch*1.0) / SUM(total_items_purchased) FROM lip_data_quality where dt='$DATE_YEST_FORMAT2';" 
```

I am running the above shell script like this-

```
sh -x test.sh 
```

**Problem Statement:-**

If you see my first SELECT query, it will give me two columns as an OUTPUT, SUM of total_items_purchased and SUM of total_items_missingormismatch. And my second SELECT will give the percentage of those columns.

I need to send these three details in an email using that above `SHELL SCRIPT`. Basically I need to send these three things in an email.

From the first query- I need to send-

```
total_items_purchased and total_items_missingormismatch 
```

And from the second query- I need to send-

```
Percentage that I am calculating. 
```

Email can be like this or some better approach-

```
Total Items Purchased:- Some Number
Total Items MissingorMismatch:- Some Number
Error Percentage:- Some Percentage 
```

Any suggestions will be appreciated.

**Update:**

After making changes in my Shell Script, I ran the below shell script-

```
#!/bin/bash

QUERY1 = `hive -e "
set mapred.job.queue.name=data-technology;
SELECT SUM(total_items_purchased), SUM(total_items_missingormismatch) from lip_data_quality where dt='20120804';`

QUERY2 = `hive -e "
set mapred.job.queue.name=data-technology;
SELECT 100 * SUM(total_items_missingormismatch*1.0) / SUM(total_items_purchased) FROM lip_data_quality where dt='20120804';"`

echo "Total items purchased: `echo $QUERY1 | awk '{print $1}'`"
echo "Total Items MissingorMismatch: `echo $QUERY1 | awk '{print $2}'`"
echo "Error Percentage: $QUERY2" 
```

**Output that I got which I don't think is right? Something wrong with script? As I am running SunOS:**

```
bash-3.00$ sh -x emailtest.sh
+ hive -e
set mapred.job.queue.name=data-technology;
SELECT SUM(total_items_purchased), SUM(total_items_missingormismatch) from lip_data_quality where dt='20120804';
+ QUERY1 = 3443837 448750
emailtest.sh: QUERY1: not found
+ hive -e
set mapred.job.queue.name=data-technology;
SELECT 100 * SUM(total_items_missingormismatch*1.0) / SUM(total_items_purchased) FROM lip_data_quality where dt='20120804';
+ QUERY2 = 13.030523802375084
emailtest.sh: QUERY2: not found
+ awk {print $1}
+ echo
+ echo Total items purchased:
Total items purchased:
+ awk {print $2}
+ echo
+ echo Total Items MissingorMismatch:
Total Items MissingorMismatch:
+ echo Error Percentage:
Error Percentage: 
```

Few parts from the script are working fine, but the last three echo statements are not working fine I guess.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T22:00:51.963

My solution, which is admittedly old-school, would be to use awk to parse the output by appending the following to your script:

```
QUERY1=`hive -e "
set mapred.job.queue.name=hdmi-technology;
SELECT SUM(total_items_purchased), SUM(total_items_missingormismatch) from lip_data_quality where dt='$DATE_YEST_FORMAT2';`

QUERY2=`hive -e "
set mapred.job.queue.name=hdmi-technology;
SELECT 100 * SUM(total_items_missingormismatch*1.0) / SUM(total_items_purchased) FROM lip_data_quality where dt='$DATE_YEST_FORMAT2';"`

echo "Total items purchased: `echo $QUERY1 | awk '{print $1}'`"
echo "Total Items MissingorMismatch: `echo $QUERY1 | awk '{print $2}'`"
echo "Error Percentage: $QUERY2"

```

These days, I'd do something like this in Python. But Awk still has its uses.

# xml - XSLT XML 到 XML 选择特定节点

> ID：11873522
> 
> 赞同：0
> 
> 时间：2012-08-08T21:34:05.357
> 
> 标签：xml, xslt

我正在尝试通过 XSLT 将一个非常复杂的 XML 文件转换为 XML，因此它将是先前 XML 文档的副本，仅在输出中排除了第二个孙节点。希望有一个使用 XSLT 的简单解决方案。

这是我尝试转换的 XML 示例：

```
<cases>
    <Parent>
        <text1>Text1</text1>
        <text2>Text2</text2>
        <text3>Text3</text3>
        <Child_node>
             <Grandchild_node>
                 <gctext1>Sample text 1</gctext1>
                 <gctext2>Sample text 2</gctext2>
                 <gctext3>Sample text 3</gctext3>
                 <Great_grandchild_node>
                     <ggctext1>Great grandchild text 1</ggctext1>
                 </Great_grandchild_node>
             </Grandchild_node>
             <Grandchild_node>
                 <gctext1>More Sample text 1</gctext1>
                 <gctext2>Different Sample text 2</gctext2>
                 <gctext3>More Sample text 3</gctext3>
                 <Great_grandchild_node>
                     <ggctext1>Great grandchild text 2</ggctext1>
                 </Great_grandchild_node>
             </Grandchild_node>
        </Child_node>
    </Parent>
</cases> 
```

我希望输出显示除第二个 Grandchild_node 中包含的信息之外的所有内容。我想要实现的输出示例：

```
<cases>
    <Parent>
        <text1>Text1</text1>
        <text2>Text2</text2>
        <text3>Text3</text3>
        <Child_node>
             <Grandchild_node>
                 <gctext1>Sample text 1</gctext1>
                 <gctext2>Sample text 2</gctext2>
                 <gctext3>Sample text 3</gctext3>
                 <Great_grandchild_node>
                     <ggctext1>Great grandchild text 1</ggctext1>
                 </Great_grandchild_node>
             </Grandchild_node>
        </Child_node>
    </Parent>
</cases> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T22:05:57.363

您应该能够将[xsl:copy](http://msdn.microsoft.com/en-us/library/ms256128.aspx)与匹配您想要删除的任何节点结合使用：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes"/>
    <xsl:template match="node()">
        <xsl:copy>
            <xsl:apply-templates/>
        </xsl:copy>
    </xsl:template>
    <xsl:template match="Grandchild_node[2]|Grandchild_node[5]"></xsl:template>
</xsl:stylesheet> 
```

由于您评论说要删除一些单独**的唯一child_nodes，因此您可以将它们包含在此列表中。**Tim 使用 position() 的解决方案适用于排除范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T22:06:40.087

这可以通过向恒等变换添加一个额外的模板匹配来简单地匹配不在第一个位置的**Grandchild_node元素来实现**

```
<xsl:template match="Grandchild_node[position() > 1]" /> 
```

因此，给定以下 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="Grandchild_node[position() > 1]" />

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

应用于您的示例 XML 时，将输出以下内容

```
<cases>
   <Parent>
      <text1>Text1</text1>
      <text2>Text2</text2>
      <text3>Text3</text3>
      <Child_node>
         <Grandchild_node>
            <gctext1>Sample text 1</gctext1>
            <gctext2>Sample text 2</gctext2>
            <gctext3>Sample text 3</gctext3>
            <Great_grandchild_node>
               <ggctext1>Great grandchild text 1</ggctext1>
            </Great_grandchild_node>
         </Grandchild_node>
      </Child_node>
   </Parent>
</cases> 
```

# c# - 泛型构造函数和继承

> ID：11873524
> 
> 赞同：4
> 
> 时间：2012-08-08T21:34:14.747
> 
> 标签：c#, generics, constructor

我有一个带有类约束的泛型类。

```
public class MyContainer<T> where T : MyBaseRow 
```

MyBaseRow 是一个抽象类，我还想包含一些 MyContainer 风格的成员。

```
public abstract class MyBaseRow
{
    public MyContainer<MyBaseRow> ParentContainer;

    public MyBaseRow(MyContainer<MyBaseRow> parentContainer)
    {
        ParentContainer = parentContainer;
    }
} 
```

我对从 MyBaseRow 继承的类的构造函数有问题，例如。

```
public class MyInheritedRowA : MyBaseRow
{
    public MyInheritedRowA(MyContainer<MyInheritedRowA> parentContainer)
    : base(parentContainer)
    { }
} 
```

不允许在构造函数中使用 MyInheritedRowA，编译器只期望并且只允许 MyBaseRow。我认为通用类约束允许继承？我在这里做错了什么，有什么办法可以重新设计这些类来解决这个问题？非常感谢您的任何回复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T21:48:50.450

基本上，您不能那样使用泛型，因为协方差系统不适*用于 classes*。见这里： http: [//geekswithblogs.net/abhijeetp/archive/2010/01/10/covariance-and-contravariance-in-c-4.0.aspx](http://geekswithblogs.net/abhijeetp/archive/2010/01/10/covariance-and-contravariance-in-c-4.0.aspx)

但是，您*可以*使用这样的界面：

```
public interface MyContainer<out T> where T : MyBaseRow {

    } 
```

该代码将编译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T21:54:34.070

您可以创建一个协变泛型接口 (C#4.0)：

```
 public interface IContainer<out T> where T : MyBaseRow
  {

  }

  public class MyContainer<T> : IContainer<T> where T : MyBaseRow
  {

  }

  public abstract class MyBaseRow
  {
    public IContainer<MyBaseRow> ParentContainer;

    public MyBaseRow(IContainer<MyBaseRow> parentContainer)
    {
      ParentContainer = parentContainer;
    }
  }

  public class MyInheritedRowA : MyBaseRow
  {
    public MyInheritedRowA(IContainer<MyInheritedRowA> parentContainer)
      : base(parentContainer)
    { }
  } 
```

# git - 使用 git 分支与多个存储库的好处

> ID：11873527
> 
> 赞同：13
> 
> 时间：2012-08-08T21:34:21.867
> 
> 标签：git, version-control, dvcs, git-branch

我们正在开发自动化代码。

我们的代码使公司的产品自动化，并**同步**到特定的产品版本。

目前，我们有 1 个包含多个分支的大型 Git 存储库 - v1.0、v1.1、v2.0（1.0 版的自动化进入 v1.0 分支等）。

**将这些放在带有分支的单个存储库中与将每个版本代码保存在单独的存储库中的优点和缺点是什么？**

两种解决方案都可以工作，我正在寻找的答案是**任何一种方法的优缺点列表。**

我知道很多团队都在使用分支来隔离开发中的临时阶段，例如进行错误修复或新功能，最终将工作合并回主开发分支。

我知道的其他工作模式有用于开发、发布等的不同分支，以将代码的“更清洁”修订版与不断进行的脏修订版区分开来。

这些听起来都不像我们目前正在做的事情。

*请注意，我们在特定版本中所做的一些修改与所有产品版本相关，而有些则不相关。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T06:13:34.763

## 多个分支

### 优点：

*   只需管理一个仓库（您的自动化指向一个遥控器）
*   可以直接从该一个存储库中进行分支之间的比较（差异）
*   您可以将这些分支中的任何一个从该存储库拉到可能需要它的任何其他下游存储库

### 缺点：

*   分支混乱（您需要管理/删除分支的总和）
*   标签适用于*所有*回购（不仅仅是“某些产品”

## 多个回购

### 优点

*   你可以从主仓库中提取你需要的东西并从那里工作
*   您可以轻松清理旧的“分支”（只需删除该特定回购）

### 缺点

*   回购重复（占用更多空间）
*   回购管理（您需要指向正确的遥控器）

* * *

我认为单一回购方法是一种更简单、更经典的方法。
也就是说，如果您有*很多*版本（需要定期清理），那么在他们自己的仓库中隔离这些临时版本也可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T22:01:44.460

这是一个有趣的答案，使用来自此堆栈溢出问题的 Git 标记和分支：[https](https://stackoverflow.com/a/2714318/1552414) ://stackoverflow.com/a/2714318/1552414 （None-da 的回答）

1.  达到新版本时创建标签。(v3.0.0)
2.  第一次需要修改的时候创建它的一个分支

    ```
    git checkout -b v3.0.0_branch v3.0.0 
    ```

3.  当您达到 v3.0.1、v3.0.2、v3.1.0 时提交到分支并创建新标签

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-15T18:24:13.970

不久前，我的公司进行了类似的讨论（分支机构的利弊）。在进行研究时，我发现以下指导很有帮助。[http://guides.beanstalkapp.com/version-control/branching-best-practices.html](http://guides.beanstalkapp.com/version-control/branching-best-practices.html)我希望它对你也有帮助。

# post - QtWebKit QWebPage::acceptNavigationRequest 和 POST 数据

> ID：11873528
> 
> 赞同：2
> 
> 时间：2012-08-08T21:34:26.837
> 
> 标签：post, qtwebkit, phantomjs, qnetworkaccessmanager, qwebpage

是否可以在这个（QWebPage::acceptNavigationRequest）时刻访问 POST 数据？我希望在那里查看请求的 POST 数据，因为我锁定了导航并且我没有机会在 NetworkAccessManager::createRequest 因为它没有到达。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T18:00:21.967

您是创建请求的人吗？如果您正在发出请求，您应该能够看到 POST 数据。如果发出请求的网页不是您创建的，您应该使用其他工具（如 Wireshark）来查看发送到服务器的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-15T16:53:00.157

是的，可以简单地将 QNetworkAccessManager::createRequest 成员覆盖为：

```
QNetworkReply * networkaccessman::createRequest ( Operation op, const QNetworkRequest & req, QIODevice * outgoingData )
{if(outgoingData){
        qDebug()<<"%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%";
    qDebug()<<outgoingData->peek(1000000);
}
    return QNetworkAccessManager::createRequest (  op, req, outgoingData  );
} 
```

# grails - 自动重新加载模板文件

> ID：11873534
> 
> 赞同：5
> 
> 时间：2012-08-08T21:34:55.513
> 
> 标签：grails

我有一个非常标准的 2.0.3 Grails 应用程序，我已经执行`grails install-templates`了将文件 list.gsp、edit.gsp 等放置在 src/templates/scaffolding/ 目录中的操作。对这些文件进行更改时，它们不会自动重新加载。有没有办法让这些自动重新加载，这样我就不必每次进行更改时都停止/启动应用程序？我试过查看watchedResources，但这似乎与插件开发有关。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-14T13:19:47.690

您是正确的，“监视资源”机制仅适用于插件。对此的正确解决方法是修改核心`ScaffoldingGrailsPlugin.groovy`以添加

```
def watchedResources = "file:./src/templates/scaffolding/*" 
```

并且可能值得为此提交一个[JIRA](http://jira.grails.org/browse/GRAILS)。同时，您可以通过编写自己的简单插件将这种行为“注入”到脚手架插件中来使其工作。做`grails create-plugin watch-scaffolding`然后使用以下插件描述符：

```
import org.codehaus.groovy.grails.plugins.GrailsPlugin

class WatchScaffoldingGrailsPlugin {
    def version = "0.1"
    def grailsVersion = "2.0 > *"
    def dependsOn = [:]
    def pluginExcludes = [ "grails-app/views/error.gsp" ]

    def title = "Watch Scaffolding Plugin"
    def author = "Your name"
    def authorEmail = ""
    def description = '''\
Watches for changes to scaffolding templates and reloads dynamically-scaffolded
controllers and views.
'''
    // URL to the plugin's documentation
    def documentation = "http://grails.org/plugin/watch-scaffolding"

    // watch for changes to scaffolding templates...
    def watchedResources = "file:./src/templates/scaffolding/*"

    // ... and kick the scaffolding plugin when they change
    def onChange = { event ->
        event.manager.getGrailsPlugin('scaffolding').notifyOfEvent(
            GrailsPlugin.EVENT_ON_CHANGE, null)
    }

    // rest of plugin options are no-op
    def onConfigChange = { event -> }
    def doWithWebDescriptor = { xml -> }
    def doWithSpring = { }
    def doWithDynamicMethods = { ctx -> }
    def doWithApplicationContext = { applicationContext -> }
    def onShutdown = { event -> }
} 
```

现在在您的应用程序中`BuildConfig.groovy`添加

```
grails.plugin.location.'watch-scaffolding' = '../watch-scaffolding' 
```

（或者从你的应用程序的根目录到插件的根目录的任何适当的相对路径）并且你的脚手架模板更改应该开始自动重新加载。

（这是在 Grails 2.1 上测试的，我最初尝试使用[影响](http://grails.org/doc/latest/guide/plugins.html#participatingInAutoReloadEvents)但它没有任何效果，但是`onChange`在脚手架插件中强制事件具有所需的结果。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T20:41:00.963

此代码刷新脚手架缓存。您可以为其创建特定的管理操作：

```
org.codehaus.groovy.grails.scaffolding.view.
  ScaffoldingViewResolver.scaffoldedViews.clear() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T15:43:43.937

根据[GRAILS-755](http://jira.grails.org/browse/GRAILS-755)，这已得到修复，但我认为没有，因为它们也不会为我重新加载。

从那个 Jira，这里有一个可能的解决方法：

> 使用控制台插件，并运行以下命令来清除动态脚手架视图缓存：
> 
> ​def scaffoldedView = org.codehaus.groovy.grails.scaffolding.view.ScaffoldingViewResolver.scaffoldedViews.clear()​</p>
> 
> 之后，下次我请求一个页面时，它在缓存中找不到它，因此回到磁盘重新创建它。

# jquery - Chrome blurs div when clicked upon

> ID：11873535
> 
> 赞同：1
> 
> 时间：2012-08-08T21:34:58.023
> 
> 标签：jquery, html, css, google-chrome

We've come across something strange while developing [our site](http://bit.ly/Noz3gV). We have a collection of divs on the screen similar to Pinterest. When any of the divs gets clicked, the content of that div gets loaded in an iframe on the right. The problem is that in Chrome, when a div gets clicked, everything in that div (image, text) blurs until the mouse is moved away from the div. Any idea what can be causing this?

Thanks in advance!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T21:42:26.850

The problem is that the `spring` CSS class is being applied when you click, and removed when "moused out".

[![enter image description here](../Images/e0d271c73b4a47834e5465a5e72ccba9.png)](https://i.stack.imgur.com/uixHA.png)

# java - 将数据拟合到配电（java）

> ID：11873539
> 
> 赞同：2
> 
> 时间：2012-08-08T21:35:17.367
> 
> 标签：java, curve-fitting, power-law

就像在 Excel 中我们可以获取分布并为其制作趋势线（幂律）一样，我如何在 Java 中为数字数组计算它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T21:48:27.037

该软件包[`org.apache.commons.math.optimization.fitting`](http://commons.apache.org/math/apidocs/org/apache/commons/math/optimization/fitting/package-summary.html)包括`CurveFitter`并将`PolynomialFitter`涵盖许多典型的 Excel 趋势线选项。`JFreechart`包括对[`Regression`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/data/statistics/Regression.html).

# apache - htaccess 给出错误 - 404

> ID：11873542
> 
> 赞同：0
> 
> 时间：2012-08-08T21:35:39.053
> 
> 标签：apache, .htaccess

我在这里找到了一个解决方案，我正在寻找

> [在 htaccess 中创建动态 URL](https://stackoverflow.com/questions/5845609/creating-dynamic-urls-in-htaccess)

所以基本上我修改了给定的htaccess代码（以下代码来自解决方案）

```
RewriteRule ^products/([A-Za-z0-9-])/?$ /view.php?mode=prod&title=$1 
```

我改变了它以适应我的需要

```
RewriteRule ^blog/([A-Za-z0-9-])/?$ /blog.php?id=$1 
```

但是当我访问 url 时`localhost/blog/1`，它给了我 404 错误，这是我的 .htaccess 文件中唯一的一行，我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T00:30:44.273

你说这是你的 .htaccess 中唯一的一行，你不是也有这一行吗（就在你的之前）？

```
RewriteEngine On 
```

您的 .htaccess 至少应包含：

```
RewriteEngine On
RewriteRule ^blog/([A-Za-z0-9-])/?$ /blog.php?id=$1 
```

# android - SQLite：多个选择语句与一个选择语句

> ID：11873545
> 
> 赞同：0
> 
> 时间：2012-08-08T21:35:50.443
> 
> 标签：android, sqlite

在我的 Android 项目中，我有一个`data`包含两行的 SQLite 表，`id`并且`name`. 它有 +/- 十条记录。请注意，记录可能已被删除，因此 id 可能是非连续的。

在一项活动中，我需要 +/- 100 个 ID 的相应名称（显然有很多重复值）。

我可以通过执行 SQLite 查询`SELECT name FROM data WHERE id = x`一百次来做到这一点。

另一种选择是执行`SELECT id,name FROM data`一次 SQLite 查询，然后将 id 和名称存储在一个数组中，然后通过 java (`String name = namesArray[Arrays.binarySearch(idsArray, x)];`

我应该使用哪种方法？还是有更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T10:29:10.187

第二种选择要快得多。

# objective-c - 来自“孙子”的代表团

> ID：11873552
> 
> 赞同：0
> 
> 时间：2012-08-08T21:36:02.940
> 
> 标签：objective-c, delegates

我有一个 UIView，它在 Popover 中显示一个 tableView。然后，此 tableView 显示另一个带有可选数据的 tableView。有人可以向我解释一下如何唤起委托将选定的数据一直返回到 UIView 吗？当我呈现弹出框时，我初始化了第二个 tableView 并将它的委托设置为“self”。但是当我实际上在第二个 tableView 中使用委托时，它被设置为 null。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T21:50:48.640

那将是这样的：

TopMostView.h

```
@protocol ParentViewDelegate
-(void) operateOnData:(NSObject *)data;
@end

@interface TopMostSubview <ParentViewDelegate>
... 
```

在 TopMostView.m

```
-(void)crateSubview {
... create subview stuff
subview.delegate = self;
... 
```

}

然后在每个子视图中都有类似的内容：

```
@property (weak, nonatomic) id<ParentViewDelegate> delegate; 
```

每当您希望将数据传递给超级视图时，您都可以使用 operationonData: 选择器。

# iphone - 我无法弄清楚为什么我的标签没有按照我的说明打印？

> ID：11873561
> 
> 赞同：0
> 
> 时间：2012-08-08T21:36:41.890
> 
> 标签：iphone, ios, label, kobold2d

我正在创建一个游戏，在我的说明类中，我创建了一个带有说明的标签

但是，由于某种原因，当我运行我的游戏时，指令不会打印出来。我很难弄清楚为什么。

感谢您为我提供的任何帮助！

```
#import "Instructions.h"
#import "MainMenu.h"

@implementation Instructions

+ (CCScene *) scene
{
    CCScene * scene = [CCScene node]; // scene is an autorelease object
    Instructions * layer =  [Instructions node]; // later is an autorelease object
    [scene addChild: layer]; // add layer as a child to scene
    return scene; // return the scene
}

- (id) init
{
    if ( ( self = [super init] ) )
    {
        [ self how ];
    }
    return self;
}

- (void) how 
{
    // Create the label
    CCLabelTTF *label = [CCLabelTTF labelWithString:@"The object of this game is for kangaroo Leo to collect various berries by jumping and running through obstacles in order to unlock other kangaroos and the worlds in which they live." fontName:@"Consolas" fontSize:16];

    // Position it on the screen
    label.position = ccp(160,240);

    // Add it to the scene so it can be displayed
    [self addChild:label z:0];

}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T22:11:04.793

Consolas 没有预装在 iOS 上。Ether 使用默认字体（如 Arial）或将 Consolas.ttf 文件放入您的项目中。添加 .ttf 文件后，转到 info.plist 并使用应用程序提供的关键字体添加一个新行。也添加 Consolas.ttf。

有关添加自定义字体的更详细说明，请访问：[http ://tetontech.wordpress.com/2010/09/03/using-custom-fonts-in-your-ios-application/](http://tetontech.wordpress.com/2010/09/03/using-custom-fonts-in-your-ios-application/)

或在 stackoverflow 上： [我可以在 iPhone 应用程序中嵌入自定义字体吗？](https://stackoverflow.com/questions/360751/can-i-embed-a-custom-font-in-an-iphone-application)

# javascript - Javascript：私有函数的嵌套——好还是坏？

> ID：11873566
> 
> 赞同：11
> 
> 时间：2012-08-08T21:37:18.943
> 
> 标签：javascript, function, nested

我经常使用这种结构：

```
var example = (function () {
    function privateFn2 () {
       ...
    }
    function privateFn1 () {
       ...
    }
    return {
        publicMethod1: function () {...
        },
        publicMethod2: function () {...
        }
    };
}()); 
```

我想知道的是：如果 privateFn1 是唯一调用 privateFn2 的函数/方法，那么将其设置如下是否被视为更好的做法？

为清楚起见已编辑

```
var example = (function () {
    function privateFn1() {
        function privateFn2() {
        }
        ...
        privateFn2();
    }
    return {
        publicMethod1: function () {...
        },
        publicMethod2: function () {...
        }
    };
}()); 
```

当然，这是一个非常简化的示例。问题是我有很多私有函数，我想知道嵌套是否受到好评。我承认这很可能是一个偏好问题，但我们将不胜感激地接受任何建议。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T22:24:03.573

这取决于实际情况。如果您有几个仅与另一个私有函数相关的私有函数，那么这可能是对象或类打包了更多功能的情况。

这里有一些问题要问：

*   这些私有函数有副作用吗？也就是说，他们是否在操纵任何封闭的属性？如果不是，这是一些可以静态实现并单独包含的通用逻辑吗？或者，这些私有函数是否在操作可以移动到另一个类或对象的属性子集？
*   在更大的算法或控制函数中使用私有函数是简单的任务特定的辅助函数吗？例如用于对数组进行排序的过滤器函数，或其他类型的迭代回调？如果是这样，那么将这些函数嵌套在内部并将它们排除在主对象的范围之外实际上可能更干净。任何其他代码都需要这些功能吗？
*   主私有函数会被调用多少次？如果它会被非常频繁地调用（在循环内或在计时器间隔内），那么将私有函数嵌套在内部可能会产生可衡量的开销——如果私有函数只是偶尔被调用，这将可以忽略不计。

总是需要权衡取舍，考虑这些问题将帮助您确定最适合您的特定情况的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T21:39:39.737

我会避免你的第二个例子。每次`privateFn1`被调用时，它都会重新定义`privateFn2`. 为什么不只做一次？您甚至可能需要稍后在其他地方使用它。

但是，如果您真的想隐藏`privateFn2`，更好的解决方案是：

```
var privateFn1 = (function () {
    function privateFn2() {
        // ...
    }

    return function () {
        privateFn2();
        // ...
    };
})(); 
```

# angularjs - 带有数字和范围的 AngularJS For 循环

> ID：11873570
> 
> 赞同：256
> 
> 时间：2012-08-08T21:37:27.387
> 
> 标签：angularjs, angularjs-ng-repeat

Angular 确实为在其 HTML 指令中使用数字的 for 循环提供了一些支持：

```
<div data-ng-repeat="i in [1,2,3,4,5]">
  do something
</div> 
```

但是，如果您的范围变量包含一个具有动态数字的范围，那么您每次都需要创建一个空数组。

在控制器中

```
var range = [];
for(var i=0;i<total;i++) {
  range.push(i);
}
$scope.range = range; 
```

在 HTML 中

```
<div data-ng-repeat="i in range">
  do something
</div> 
```

这可行，但没有必要，因为我们根本不会在循环中使用范围数组。有谁知道为最小值/最大值设置范围或常规？

就像是：

```
<div data-ng-repeat="i in 1 .. 100">
  do something
</div> 
```

* * *

## 回答 #1

> 赞同：283
> 
> 时间：2012-08-09T06:40:16.803

我稍微调整了[这个答案](https://stackoverflow.com/a/11161353/1207991)并想出了[这个小提琴](http://jsfiddle.net/gwfPh/)。

过滤器定义为：

```
var myApp = angular.module('myApp', []);
myApp.filter('range', function() {
  return function(input, total) {
    total = parseInt(total);

    for (var i=0; i<total; i++) {
      input.push(i);
    }

    return input;
  };
}); 
```

像这样使用重复：

```
<div ng-repeat="n in [] | range:100">
  do something
</div> 
```

* * *

## 回答 #2

> 赞同：150
> 
> 时间：2013-06-15T13:11:13.333

我想出了一个更简单的版本，用于在两个定义的数字之间创建一个范围，例如。5 到 15

[在 JSFiddle 上查看演示](http://jsfiddle.net/sqren/ZBrJB/58/)

**HTML**：

```
<ul>
    <li ng-repeat="n in range(5,15)">Number {{n}}</li>
</ul> 
```

**控制器**：

```
$scope.range = function(min, max, step) {
    step = step || 1;
    var input = [];
    for (var i = min; i <= max; i += step) {
        input.push(i);
    }
    return input;
}; 
```

* * *

## 回答 #3

> 赞同：97
> 
> 时间：2015-02-26T16:55:36.220

无非是纯 Javascript（你甚至不需要控制器）：

```
<div ng-repeat="n in [].constructor(10) track by $index">
    {{ $index }}
</div> 
```

建模时非常有用

* * *

## 回答 #4

> 赞同：70
> 
> 时间：2013-02-18T08:47:42.557

我想出了一个稍微不同的语法，它更适合我一点，并添加了一个可选的下限：

```
myApp.filter('makeRange', function() {
        return function(input) {
            var lowBound, highBound;
            switch (input.length) {
            case 1:
                lowBound = 0;
                highBound = parseInt(input[0]) - 1;
                break;
            case 2:
                lowBound = parseInt(input[0]);
                highBound = parseInt(input[1]);
                break;
            default:
                return input;
            }
            var result = [];
            for (var i = lowBound; i <= highBound; i++)
                result.push(i);
            return result;
        };
    }); 
```

您可以将其用作

```
<div ng-repeat="n in [10] | makeRange">Do something 0..9: {{n}}</div> 
```

或者

```
<div ng-repeat="n in [20, 29] | makeRange">Do something 20..29: {{n}}</div> 
```

* * *

## 回答 #5

> 赞同：31
> 
> 时间：2013-02-04T20:40:00.327

对于那些不熟悉 angularjs 的人。可以使用 $index 获取索引。

例如：

```
<div ng-repeat="n in [] | range:10">
    do something number {{$index}}
</div> 
```

当你使用 Gloopy 的方便过滤器时，它会打印：
做一些事情 0
做一些事情 1
做一些事情 2
做一些事情 3
做一些事情 4
做一些事情 5
做一些事情 6
做一些事情 7
做一些事情 8
做第 9 件事

* * *

## 回答 #6

> 赞同：21
> 
> 时间：2013-09-26T14:30:16.653

一个简短的方法是使用 Underscore.js 的 _.range() 方法。:)

[http://underscorejs.org/#range](http://underscorejs.org/#range)

```
// declare in your controller or wrap _.range in a function that returns a dynamic range.
var range = _.range(1, 11);

// val will be each number in the array not the index.
<div ng-repeat='val in range'>
    {{ $index }}: {{ val }}
</div> 
```

* * *

## 回答 #7

> 赞同：20
> 
> 时间：2014-01-29T11:18:49.783

我使用我的自定义`ng-repeat-range`指令：

```
/**
 * Ng-Repeat implementation working with number ranges.
 *
 * @author Umed Khudoiberdiev
 */
angular.module('commonsMain').directive('ngRepeatRange', ['$compile', function ($compile) {
    return {
        replace: true,
        scope: { from: '=', to: '=', step: '=' },

        link: function (scope, element, attrs) {

            // returns an array with the range of numbers
            // you can use _.range instead if you use underscore
            function range(from, to, step) {
                var array = [];
                while (from + step <= to)
                    array[array.length] = from += step;

                return array;
            }

            // prepare range options
            var from = scope.from || 0;
            var step = scope.step || 1;
            var to   = scope.to || attrs.ngRepeatRange;

            // get range of numbers, convert to the string and add ng-repeat
            var rangeString = range(from, to + 1, step).join(',');
            angular.element(element).attr('ng-repeat', 'n in [' + rangeString + ']');
            angular.element(element).removeAttr('ng-repeat-range');

            $compile(element)(scope);
        }
    };
}]); 
```

和html代码是

```
<div ng-repeat-range from="0" to="20" step="5">
    Hello 4 times!
</div> 
```

或者干脆

```
<div ng-repeat-range from="5" to="10">
    Hello 5 times!
</div> 
```

甚至简单地

```
<div ng-repeat-range to="3">
    Hello 3 times!
</div> 
```

要不就

```
<div ng-repeat-range="7">
    Hello 7 times!
</div> 
```

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2015-01-29T18:49:51.927

最简单的无代码解决方案是使用范围初始化一个数组，并使用 $index + 我想通过以下方式抵消多少：

```
<select ng-init="(_Array = []).length = 5;">
    <option ng-repeat="i in _Array track by $index">{{$index+5}}</option>
</select> 
```

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2014-12-10T12:48:08.633

## 方法定义

下面的代码定义了一个`range()`可用于整个应用程序范围的方法`MyApp`。[`range()`](https://docs.python.org/2/library/functions.html#range)它的行为与 Python方法非常相似。

```
angular.module('MyApp').run(['$rootScope', function($rootScope) {
    $rootScope.range = function(min, max, step) {
        // parameters validation for method overloading
        if (max == undefined) {
            max = min;
            min = 0;
        }
        step = Math.abs(step) || 1;
        if (min > max) {
            step = -step;
        }
        // building the array
        var output = [];
        for (var value=min; value<max; value+=step) {
            output.push(value);
        }
        // returning the generated array
        return output;
    };
}]); 
```

## 用法

有一个参数：

```
<span ng-repeat="i in range(3)">{{ i }}, </span> 
```

`0, 1, 2,`

有两个参数：

```
<span ng-repeat="i in range(1, 5)">{{ i }}, </span> 
```

`1, 2, 3, 4,`

带三个参数：

```
<span ng-repeat="i in range(-2, .7, .5)">{{ i }}, </span> 
```

`-2, -1.5, -1, -0.5, 0, 0.5,`

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2014-07-17T10:21:40.093

您可以在 angular.filter 模块（[https://github.com/a8m/angular-filter](https://github.com/a8m/angular-filter)）中使用 'after' 或 'before' 过滤器

```
$scope.list = [1,2,3,4,5,6,7,8,9,10] 
```

**HTML：**

```
<li ng-repeat="i in list | after:4">
  {{ i }}
</li> 
```

**结果：** 5、6、7、8、9、10

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2016-05-22T07:31:31.260

无需对控制器进行任何更改，您就可以使用它：

```
ng-repeat="_ in ((_ = []) && (_.length=51) && _) track by $index" 
```

享受！

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2014-12-10T18:19:50.577

## 最短答案：2行代码

**JS（在你的 AngularJS 控制器中）**

```
$scope.range = new Array(MAX_REPEATS); // MAX_REPEATS should be the most repetitions you will ever need in a single ng-repeat 
```

**HTML**

```
<div data-ng-repeat="i in range.slice(0,myCount) track by $index"></div> 
```

...`myCount`应该出现在这个位置的星星的数量在哪里。

您可以`$index`用于任何跟踪操作。例如，如果您想在索引上打印一些突变，您可以将以下内容放入`div`：

```
{{ ($index + 1) * 0.5 }} 
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2016-08-02T05:25:48.067

嗨，您可以使用 AngularJS 使用纯 html 来实现这一点（不需要指令！）

```
<div ng-app="myapp" ng-controller="YourCtrl" ng-init="x=[5];">
  <div ng-if="i>0" ng-repeat="i in x">
    <!-- this content will repeat for 5 times. -->
    <table class="table table-striped">
      <tr ng-repeat="person in people">
         <td>{{ person.first + ' ' + person.last }}</td>
      </tr>
    </table>
    <p ng-init="x.push(i-1)"></p>
  </div>
</div> 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2014-06-24T14:34:19.023

使用下划线JS：

```
angular.module('myModule')
    .run(['$rootScope', function($rootScope) { $rootScope.range = _.range; }]); 
```

将此应用于`$rootScope`使其随处可用：

```
<div ng-repeat="x in range(1,10)">
    {{x}}
</div> 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2015-01-17T01:23:57.630

很简单的一个：

```
$scope.totalPages = new Array(10);

 <div id="pagination">
    <a ng-repeat="i in totalPages track by $index">
      {{$index+1}}
    </a>   
 </div> 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2014-09-11T20:23:35.193

**在控制器中设置范围**

```
var range = [];
for(var i=20;i<=70;i++) {
  range.push(i);
}
$scope.driverAges = range; 
```

**在 Html 模板文件中设置重复**

```
<select type="text" class="form-control" name="driver_age" id="driver_age">
     <option ng-repeat="age in driverAges" value="{{age}}">{{age}}</option>
</select> 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2014-11-29T00:55:40.913

@Mormegil 解决方案的改进

```
app.filter('makeRange', function() {
  return function(inp) {
    var range = [+inp[1] && +inp[0] || 0, +inp[1] || +inp[0]];
    var min = Math.min(range[0], range[1]);
    var max = Math.max(range[0], range[1]);
    var result = [];
    for (var i = min; i <= max; i++) result.push(i);
    if (range[0] > range[1]) result.reverse();
    return result;
  };
}); 
```

用法

```
<span ng-repeat="n in [3, -3] | makeRange" ng-bind="n"></span> 
```

**3 2 1 0 -1 -2 -3**

```
<span ng-repeat="n in [-3, 3] | makeRange" ng-bind="n"></span> 
```

**-3 -2 -1 0 1 2 3**

```
<span ng-repeat="n in [3] | makeRange" ng-bind="n"></span> 
```

**0 1 2 3**

```
<span ng-repeat="n in [-3] | makeRange" ng-bind="n"></span> 
```

**0 -1 -2 -3**

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2015-04-09T14:49:04.953

我尝试了以下方法，对我来说效果很好：

```
<md-radio-button ng-repeat="position in formInput.arrayOfChoices.slice(0,6)" value="{{position}}">{{position}}</md-radio-button> 
```

角 1.3.6

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2015-12-15T23:33:46.513

晚会迟到了。但我最终只是这样做：

在您的控制器中：

```
$scope.repeater = function (range) {
    var arr = []; 
    for (var i = 0; i < range; i++) {
        arr.push(i);
    }
    return arr;
} 
```

html:

```
<select ng-model="myRange">
    <option>3</option>
    <option>5</option>
</select>

<div ng-repeat="i in repeater(myRange)"></div> 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2016-03-09T12:24:02.527

这是 jzm 改进的答案（我无法评论，否则我会评论她/他的答案，因为他/她包含错误）。该函数有一个开始/结束范围值，因此它更灵活，并且......它可以工作。这种特殊情况适用于月份中的某天：

```
$scope.rangeCreator = function (minVal, maxVal) {
    var arr = [];
   for (var i = minVal; i <= maxVal; i++) {
      arr.push(i);
   }
   return arr;
};

<div class="col-sm-1">
    <select ng-model="monthDays">
        <option ng-repeat="day in rangeCreator(1,31)">{{day}}</option>
    </select>
</div> 
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2016-06-27T11:57:25.017

```
<div ng-init="avatars = [{id : 0}]; flag = true ">
  <div ng-repeat='data in avatars' ng-if="avatars.length < 10 || flag"
       ng-init="avatars.length != 10 ? avatars.push({id : $index+1}) : ''; flag = avatars.length <= 10 ? true : false">
    <img ng-src="http://actual-names.com/wp-content/uploads/2016/01/sanskrit-baby-girl-names-400x275.jpg">
  </div>
</div> 
```

如果您想在没有任何控制器或工厂的情况下在 html 中实现这一点。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2013-06-27T03:25:19.377

我掀起了这个，发现它可能对某些人有用。（是的，CoffeeScript。起诉我。）

### 指示

```
app.directive 'times', ->
  link: (scope, element, attrs) ->
    repeater = element.html()
    scope.$watch attrs.times, (value) ->
      element.html ''
      return unless value?
      element.html Array(value + 1).join(repeater) 
```

要使用：

### HTML

```
<div times="customer.conversations_count">
  <i class="icon-picture></i>
</div> 
```

这可以变得更简单吗？

我对过滤器持谨慎态度，因为 Angular 总是无缘无故地重新评估它们，如果你像我一样拥有成千上万个过滤器，这将是一个巨大的瓶颈。

该指令甚至会监视模型的变化，并相应地更新元素。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2020-02-12T12:12:20.483

假设`$scope.refernceurl`是一个数组然后

```
for(var i=0; i<$scope.refernceurl.length; i++){
    $scope.urls+=$scope.refernceurl[i].link+",";
} 
```

* * *

## 回答 #24

> 赞同：-8
> 
> 时间：2015-06-05T16:09:41.057

这是最简单的变体：只使用整数数组....

```
 <li ng-repeat="n in [1,2,3,4,5]">test {{n}}</li>
```

# java - XText 注册全局变量

> ID：11873572
> 
> 赞同：1
> 
> 时间：2012-08-08T21:37:39.087
> 
> 标签：java, eclipse-emf, xtext, xtend, xbase

我想在[XText](http://www.eclipse.org/Xtext/index.html)的帮助下[从 Gate 构建对 jape 语言的](http://gate.ac.uk/sale/tao/splitch8.html#chap%3ajape)工具支持。Jape 基本上是一种超越注解的模式语言；您声明遇到这些注释时要采取的操作。问题是动作可以用java编写。在与 jdt 斗争了一段时间后，我无法让它在部分解析内容上工作。所以我放弃了，决定使用 XBlockExpression 的 xbase 支持。

问题是有一些变量可以在动作中使用 - 例如，有一个变量**绑定**允许您绑定然后从模式中获取注释。所以我的问题是如何在 xblock 范围内注册这些变量。在阅读了 3 个小时的文档后，我仍然离我很近。

这是我的问题的最小语法

```
grammar org.xtext.example.mydsl.MyDsl with org.eclipse.xtext.xbase.Xbase

generate myDsl "http://www.xtext.org/example/mydsl/MyDsl"

Model:
    greetings=Greeting;

Greeting:
    block=XBlockExpression; 
```

我想解析具有如下内容的文件：

```
{
    val testAS = bindings.get("test") as AnnotationSet
} 
```

我首先插入我自己的范围提供程序，但这对我没有多大帮助。以下是提供者的实现：

```
package org.xtext.example.mydsl;

import java.util.List;

public class MyScopeProvider extends XbaseScopeProvider {

    XbaseFactory factory = new XbaseFactoryImpl();

    @Override
    public IScope getScope(EObject context, EReference reference) {
        //System.err.println(context);
        //System.err.println(reference);
        List<IValidatedEObjectDescription> descriptions = Lists.newArrayList();
        XVariableDeclaration variableDeclaration = factory
                .createXVariableDeclaration();
        variableDeclaration.setName("bindings");
        IValidatedEObjectDescription variableDescription = createLocalVarDescription(variableDeclaration);

        System.err.println(variableDescription);

        IScope scope = super.getScope(context, reference);
        System.err.println(variableDeclaration);
        return new JvmFeatureScope(scope, "test", descriptions);
    }
} 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T21:48:34.883

您应该尝试为您的语言实现 JvmModelInferrer，在其中添加隐式可用变量作为推断类型中的字段或操作参数。那会成功的。该方法在[xtext.org上的 7 个语言示例中有很好的记录](http://www.xtext.org)

# android - 将字符串转换为 Android Geopoint 的 int

> ID：11873573
> 
> 赞同：0
> 
> 时间：2012-08-08T21:37:43.840
> 
> 标签：android, geopoints

我从 Google Places URL 获取纬度和经度作为字符串。现在我想使用获得的坐标在地图上放置一个图钉。有些事情很愚蠢，因为我试图将字符串解析为 GeoPoint 的整数，结果显示为 0,0，因此引脚放置在非洲海岸附近。这是我的代码：

```
 int lati5Int, longi5Int;        

String latiString = in.getStringExtra(TAG_GEOMETRY_LOCATION_LAT);
    String longiString = in.getStringExtra(TAG_GEOMETRY_LOCATION_LNG);
    TextView getLatiStringtv.setText(latiString);
    TextView getLongiStringtv.setText(longiString);

    try { 
        lati5Int = Integer.parseInt(getLatiStringtv.getText().toString());
        longi5Int = Integer.parseInt(getLongiStringtv.getText().toString());
    } catch(NumberFormatException nfe) { 
       System.out.println("Could not parse " + nfe); 
    }
// shows that the ints are zeros
    doubleLatiTV.setText(Integer.toString(lati5Int));
    doubleLongiTV.setText(Integer.toString(longi5Int));

//--- GeoPoint---
newPoint = new GeoPoint(lati5Int,longi5Int);
mapController.animateTo(newPoint);
mapController.setZoom(17);
//--- Place pin ----
marker = getResources().getDrawable(R.drawable.malls);      

OverlayItem overlaypoint = new OverlayItem(newPoint, "Boing", "Whattsup");
CustomPinpoint customPin = new CustomPinpoint(marker, SMIMap.this);
customPin.insertPinpoint(overlaypoint);
overlayList.add(customPin); 
```

我认为错误在于整数的解析：

```
 lati5Int = Integer.parseInt(getLatiStringtv.getText().toString());
        longi5Int = Integer.parseInt(getLongiStringtv.getText().toString()); 
```

我认为解析会看到坐标中的小数点并吓坏了。那么如何将坐标字符串解析为整数，以便 GeoPoint 将它们视为格式正确的坐标，例如：30.487263、-97.970799

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T21:45:04.410

`GeoPoint`不想将它们视为 30.487263、-97.970799。它希望它们为整数 30487263、-97970799。所以就像 AA 所说，首先解析为 double，乘以 E6，然后转换为 int。

所以也许是这样的：

```
lati5Int = Double.parseDouble(getLatiStringtv.getText().toString());
latiE6 = (int) (lati5Int*1000000); 
```

# python - 如何从下拉列表中获取价值

> ID：11873576
> 
> 赞同：4
> 
> 时间：2012-08-08T21:38:09.100
> 
> 标签：python, flask, flask-sqlalchemy

我试图从下拉框中获取值到变量中，然后存储它。我是 Flask 的新手，在文档中找不到任何关于它的内容。但我不知道如何使用 request.form 或任何其他原因从下拉列表中获取值。

我在 app.py 中的烧瓶代码

```
@app.route('/add', methods=['POST'])
def add_entry():
    if not session.get('logged_in'):
        abort(401)
    title = request.form['title']
    link  = request.form['link']
    shown  = request.form['shown']

    #I hardcoded the id here too see basic function.

    kate = Category.query.filter_by(id = 2).first()
    add_into = Entries(title, link, shown, kate)
    db.session.add(add_into)
    db.session.commit() 
```

这是它的html。

```
<form action="{{ url_for('add_entry') }}" method=post class="add-entry custom">
  <dl>
    <dt>Title:
    <dd><input type=text size=120 name=title>
    <dt>Link:
    <dd><input type=text size=120 name=link>
    <dt>Shown:
    <dd><input type=text size=120 name=shown>
    <label for="customDropdown">Category</label>
    <select style="display:none;" id="customDropdown">
      {% for c in cate %}
        {% if c.id == 1 %}
          <option id="{{ c.name }}" name="{{ c.name }}" SELECTED>{{ c.name }}</option>
        {% else %}
          <option>{{ c.name }}</option>
        {% endif %}

      {% endfor %}
    </select>
    <dd><input class="success button" type=submit value=Post it!>
    </dl>
</form> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T19:19:54.843

如果您希望将值作为表单数据传递，则选择标签（如输入标签）需要一个“名称”属性。

```
<select name="name" style="display:none;" id="customDropdown"> 
```

现在，您应该能够`request.form['name']`像作为输入元素一样访问它。

# javascript - 如何检测浏览器是否正在加载

> ID：11873580
> 
> 赞同：1
> 
> 时间：2012-08-08T21:38:25.320
> 
> 标签：javascript, jquery

当用户单击将在同一页面中显示大图像的链接时，我试图显示加载图像。

我想知道在页面已经加载时检测图像加载的最佳方法是什么（所以 window.onload() 不起作用）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T21:43:32.297

```
$("img.loader").show();
$("img.big").ready(function() {
  $("img.loader").hide();
}): 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T21:43:48.287

使用 JavaScript 加载图像，然后您可以使用图像的`onLoad`属性：

```
Image1 = new Image();
Image1.src = 'photo.gif';

/* Code here to display loading hour glass etc */

Image1.onload = function() {
                           /* Image has loaded here */
                        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T21:46:17.303

将“onclick”事件添加到您的链接，其中通过 setTimeout 显示您的加载图像。例如

```
<a href="...some slow loading page" onclick="setTimeout(showLoading,1)">Link Text</a>

function showLoading() {
   // Code to show "Loading..."
} 
```

# linux - 内核模块：hrtimer_start“模块中的未知符号”

> ID：11873581
> 
> 赞同：5
> 
> 时间：2012-08-08T21:38:44.870
> 
> 标签：linux, linux-kernel, kernel, kernel-module

我正在构建一个使用 hrtimer 接口的内核模块。我已成功编译模块，并且已`MODULE_LICENSE("GPL")`设置：

```
make -C /lib/modules/3.0.0-23-server/build SUBDIRS=/home/projects/net-modeler modules
make[1]: Entering directory `/usr/src/linux-headers-3.0.0-23-server'
  CC [M]  /home/projects/net-modeler/nm_injector.o
  CC [M]  /home/projects/net-modeler/nm_scheduler.o
  LD [M]  /home/projects/net-modeler/net-modeler.o
  Building modules, stage 2.
  MODPOST 1 modules
  CC      /home/projects/net-modeler/net-modeler.mod.o
  LD [M]  /home/projects/net-modeler/net-modeler.ko
make[1]: Leaving directory `/usr/src/linux-headers-3.0.0-23-server' 
```

...但是当我尝试`insmod`它时， dmesg 输出

```
[111853.094925] Unknown symbol hrtimer_init (err 0)
[111853.094931] Unknown symbol hrtimer_start (err 0)
[111853.094942] Unknown symbol hrtimer_cancel (err 0) 
```

这些函数在 内外部`<linux/hrtimer.h>`，并在 kernel/hrtimer.c 中导出，如下所示：

```
/**
 * hrtimer_init - initialize a timer to the given clock
 * @timer:  the timer to be initialized
 * @clock_id: the clock to be used
 * @mode: timer mode abs/rel
 */
void hrtimer_init(struct hrtimer *timer, clockid_t clock_id,
      enum hrtimer_mode mode)
{
  debug_init(timer, clock_id, mode);
  __hrtimer_init(timer, clock_id, mode);
}
EXPORT_SYMBOL_GPL(hrtimer_init); 
```

`cat /proc/kallsyms | grep <func>`这三个函数的结果是：

```
0000000000000000 T hrtimer_init
0000000000000000 T hrtimer_cancel
0000000000000000 T hrtimer_start 
```

谁能帮我弄清楚发生了什么？在我看来，所有功能都已导出，应该可以找到它们，但由于某种原因，它们不是。我在做傻事吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T15:42:44.060

对于试图解决这个问题的任何其他人，`MODULE_LICENSE("GPL")`必须在所有模块文件中，而不仅仅是主要文件。

没有它，实际包含函数调用的文件将被限制访问它们`EXPORT_SYMBOL_GPL`。

# c# - MVC3 日期验证

> ID：11873583
> 
> 赞同：-2
> 
> 时间：2012-08-08T21:38:53.903
> 
> 标签：c#, asp.net, asp.net-mvc-3, validation, razor

[http://thewayofcode.wordpress.com/2012/01/18/custom-unobtrusive-jquery-validation-with-data-annotations-in-mvc-3/](http://thewayofcode.wordpress.com/2012/01/18/custom-unobtrusive-jquery-validation-with-data-annotations-in-mvc-3/)

我试图使上述链接中的示例工作，但无法正确。我不确定我做错了什么？

我复制了模型验证

```
 [DataType(DataType.Date)]
    [DisplayName("Start Date of Construction")]
    [DisplayFormat(DataFormatString = "{0:MM/dd/yyyy}", ApplyFormatInEditMode = true)]
    public DateTime? StartDate { get; set; }

[DataType(DataType.Date)]
[DisplayNameAttribute("End Date of Construction")]
[DisplayFormat(DataFormatString = "{0:MM/dd/yyyy}", ApplyFormatInEditMode = true)]
[DateGreaterThan("StartDate", "Estimated end date of construction must be greater than the start date of the construction")]
public DateTime? EndDateOf { get; set; } 
```

其次是 DateGreaterThan 代码。

在视图中

```
 @Html.EditorFor(model => model.StartDate)
  @Html.EditorFor(model => model.EndDate)
   @Html.ValidationMessageFor(model => model.StartDate)
   @Html.ValidationMessageFor(model => model.EndDate) 
```

但是，如果有人能提供一些启发，按钮点击不会触发任何事情。这将非常有帮助，甚至任何其他不同的方式都会受到赞赏。同样地，在下拉菜单中选择一个值时，尝试从模型中获取验证工作在文本框中输入的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:54:18.003

1.  而不是`[DisplayName("Start Date of Construction")]`应该使用`[Display(Name="Start Date of Construction")]`
2.  而不是`[DisplayNameAttribute("End Date of Construction")]`应该使用`[Display(Name="End Date of Construction")]`

看看你是否至少得到这个运行。你的数据注释属性搞砸了，去网上找样例就行了。

# php - 动态选择值

> ID：11873585
> 
> 赞同：0
> 
> 时间：2012-08-08T21:38:55.230
> 
> 标签：php, mysql

例子：

```
$user_input = $_POST['input'];
'SELECT '.$user_input.' FROM table_name' 
```

因此，它根据安全（此示例显然不安全）值在数据库中选择一列。这是实用/允许的代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:44:00.047

在 SQL 中，您只需将 a 发送`string`到 DBMS（如 MySQL）。因此，您可以构建任何`string`您想要的并将其提交给 DBMS。

您只需确保生成的 SQL 查询有效。这意味着例如列存在并且没有出现无效符号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T21:47:50.820

从表面上看，这段代码是有效的，假设它`$user_input`必须是一个有效的列名，这意味着它必须存在并且不能包含任何特殊字符、保留字等（除非它们被转义）。

但是，正如您所说，此代码并不安全，但只要您计划安全地构建查询并使用 PDO 或 MySQLi（不推荐使用的`mysql_*`函数......），您应该没问题。如果您需要一个不使用已弃用函数的示例（包括`mysql_real_escape_string`，也已弃用），我将提供一个。

我知道你说过你知道这段代码不安全，但如果你好奇的话，这里有另一个例子。正如评论和[这个问题](https://stackoverflow.com/q/11874991/869912)中所讨论的，这个输入：

```
$user_input = '; DELETE FROM table_name ; *';
'SELECT '.$user_input.' FROM table_name' 
```

将删除表的全部内容`table_name`。即使此代码引发语法错误，MySQL 仍将继续执行它，从而有效地截断`table_name`.

# javascript - 如何将表单数据提交到html5本地数据库

> ID：11873587
> 
> 赞同：0
> 
> 时间：2012-08-08T21:39:14.323
> 
> 标签：javascript, jquery, html, local-database

我正在编写这个非常小的应用程序以在 iPod 上运行。它旨在存储基于我输入的锻炼的信息。存储将是 html5 本地数据库。我的问题是如何从包含多个练习的表格中获取信息并为每个练习创建新记录？html是：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>lower</title>
        <meta name="description" content="" />
        <meta name="author" content="john" />
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
        <script src="work.js" type="text/javascript" charset="utf-8"></script>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black" />
        <meta name="viewport" content="width=device-width; initial-scale=0.5; maximum-scale=0.6; minimum-scale=0.6; user-scalable=0;" />        
    </head>

    <body>
        <h1>Lower Body</h1>
        <div>
            <form method="post" id="workout_form">          
                <div>
                <table id="hipadd">
                    <label for="hipAddReps">Hip Adductor</label>
                    <tr><td>Seat <input type="text" id="hipAddSeatSetting" size="1"/></td></tr>
                    <tr><td>Reps <input type="text" id="hipAddReps" size="2" value="10"/></td><td>Weight </td><td><input type="text" id="hipAddWeight" size="3" /></td></tr>
                </table>
            </div><br />
            <div>
                <table id="hipab">
                    <label for="hipAbReps">Hip Abductor</label>
                    <tr><td>Seat <input type="text" id="hipAbSeatSetting" size="1"/></td></tr>
                    <tr><td>Reps <input type="text" id="hipAbReps" size="2" value="10"/></td><td>Weight </td><td><input type="text" id="hipAbWeight" size="3"/></td></tr>
                </table>
            </div><br />
            <div>
                <table id="legcurl">
                    <label for="legCurlReps">Leg Curl</label>
                    <tr><td>Back <input type="text" id="legCurlBackSetting" size="1"/></td><td>Feet </td><td><input type="text" id="legCurlFeetSetting" size="1"/></td></tr>
                    <tr><td>Reps <input type="text" id="legCurlReps" size="2" value="10"/></td><td>Weight </td><td><input type="text" id="legCurlWeight" size="3"/></td></tr>
                </table>
            </div><br />
            <div>
                <table id="legext">
                    <label for="legExtensionReps">Leg Extension</label>
                    <tr><td>Back <input type="text" id="legExtensionBackSetting" size="1"/></td></tr>
                    <tr><td>Reps <input type="text" id="legExtensionReps" size="2" value="10"/></td><td>Weight </td><td><input type="text" id="legExtensionWeight" size="3"/></td></tr>
                </table>
            </div><br />
            <div>
                <table id="legpress">
                    <label for="legPressReps">Leg Press</label>
                    <tr><td>Back <input type="text" id="legPressBackSetting" size="1"/></td><td>Seat </td><td><input type="text" id="legPressSeatSetting" size="1"/></td></tr>
                    <tr><td>Reps <input type="text" id="legPressReps" size="2" value="10"/></td><td>Weight </td><td><input type="text" id="legPressWeight" size="3"/></td></tr>
                </table>
            </div><br />
            <div>
                <table id="glute">
                    <label for="gluteReps">Glute</label>
                    <tr><td>Seat <input type="text" id="gluteSeatSetting" size="1"/></td></tr>
                    <tr><td>Reps <input type="text" id="gluteReps" size="2" value="10"/></td><td>Weight </td><td><input type="text" id="gluteWeight" size="3"/></td></tr>
                </table>
            </div><br />
            <div>
                <button type="button" onclick="insertData()">Submit</button>
            </div>
            </form>
        </div>

    </body>
</html> 
```

到目前为止我拥有的 JavaScript 是

```
 $(function(){ initDatabase();

});

function initDatabase() {
    try {
        if (!window.openDatabase) {
            alert('Local Databases are not supported by your browser.');
        } else {
            var shortName = 'WorkoutDB';
            var version = '1.0';
            var displayName = 'Workout Database';
            var maxSize = 100000;
            db = openDatabase(shortName, version, displayName, maxSize);
            createTables();
        }
    } catch(e) {
        if (e == 2) {
            // Version mismatch.
            console.log("Invalid database version.");
        } else {
            console.log("Unknown error "+ e +".");
        }
        return;
    } 
}

 $(document).ready(function(){
        db.transaction(function (transaction) {
            //transaction.executeSql('drop table workout');
            transaction.executeSql('CREATE TABLE IF NOT EXISTS workout(name TEXT, back TEXT, seat TEXT, feet TEXT, reps TEXT, weight TEXT);', [], nullDataHandler, errorHandler);
        }
    );
    //insertData();
 });

 function insertData(){
    var data = [$("label[for=hipAddReps]").text(), '', $('#hipAddSeatSetting').val(), '', $('#hipAddReps').val(), $('#hipAddWeight').val()];
        db.transaction(function (transaction) {         
            transaction.executeSql("INSERT INTO Workout(Name, Back, Seat, Feet, Reps, Weight) VALUES (?, ?, ?, ?, ?, ?)", [data[0], data[1], data[2], data[3], data[4], data[5]]);
    });
 }

function errorHandler(transaction, error){
    if (error.code==1){
        // DB Table already exists
    } else {
        // Error is a human-readable string.
        console.log('Oops.  Error was '+error.message+' (Code '+error.code+')');
    }
    return false;
}

function nullDataHandler(){
    console.log("SQL Query Succeeded");
} 
```

所以我想要填写此表单上的所有字段并点击底部的提交按钮，并为我的每个练习插入一条新记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T17:08:56.513

由于您要为 iOS (iPod) 制作应用程序，因此您通常会在目标 C 中执行此操作，但是要在 HTML5 中执行此操作，您应该研究一个好的框架。看看Phonegap。他们甚至有一个[入门指南](http://docs.phonegap.com/en/2.0.0/guide_getting-started_ios_index.md.html#Getting%20Started%20with%20iOS)，可以让您快速启动和运行。一个替代方案是[appcelerator](http://www.appcelerator.com/)，虽然它不是完全免费的。

如果要将表单数据保存到手机中，则需要考虑使用轻量级数据库或平面文件存储。这是[phonegap 存储](http://docs.phonegap.com/en/1.2.0/phonegap_storage_storage.md.html)建议的链接。

例子：

```
 <!DOCTYPE html>
<html>
<head>
<title>Contact Example</title>

<script type="text/javascript" charset="utf-8" src="phonegap-1.2.0.js"></script>
<script type="text/javascript" charset="utf-8">

// Wait for PhoneGap to load
//
document.addEventListener("deviceready", onDeviceReady, false);

// PhoneGap is ready
//
function onDeviceReady() {
    var db = window.openDatabase("test", "1.0", "Test DB", 1000000);
}

</script>
</head>
 <body>
  <h1>Example</h1>
  <p>Open Database</p>
 </body>
</html> 
```

如果你想要一本关于 iphone、ipod 和 iOS 开发的好书，我会推荐[Big Nerd Ranch 的](http://www.bignerdranch.com/book/ios_programming_the_big_nerd_ranch_guide_rd_edition_)书，这是一本很棒的入门书，它会引导你完成所有关于苹果开发帐户设置的繁文缛节。

祝你好运，我建议使用 phonegap 和 iOS 标签重新发布您的问题，以获得更多曝光。

# android - 如果项目的名称相同，如何找出列表中的哪个项目被点击？

> ID：11873589
> 
> 赞同：0
> 
> 时间：2012-08-08T21:39:16.073
> 
> 标签：android

所以基本上我有来自数据库的记录，每条记录都有自己的唯一 ID（主键）和日期（mm：hh mm/dd/yy）我想在我的应用程序的列表视图中显示这些记录。但是有时间（mm：hh）有点难看所以我决定只在列表中显示mm/dd/yy，现在的问题是，当我对onitemClick进行编程时，我如何找出正在点击的项目?? 因为我没有唯一的 ID 和列表上显示的确切日期了。

```
ArrayList<HashMap<String, String>> aList = new ArrayList<HashMap<String, String>>();
        HashMap<String, String> map;

        for (int x = Records.size()-1; x >=0; x--)
        {
            map = new HashMap<String, String>();
            map.put("ID", String.valueOf(Records.get(x).getId()));
            map.put("date", Records.get(x).getDate()); //I am going to change this date to just mm/dd/yy

            aList.add(map);
        }

        sd = new SimpleAdapter(this, aList, R.layout.historyactivityrow,
                new String[]
                { "date" }, new int[]              
                { R.id.date });

        lv.setAdapter(sd);

        lv.setOnItemClickListener(new OnItemClickListener()
        {

            public void onItemClick(AdapterView<?> arg0, View view, int arg2,
                    long arg3)
            {
                TextView tx = (TextView) view.findViewById(R.id.date);
                String s = tx.getText().toString();
                Intent intent = new Intent(HistoryActivity.this, EditRecordActivity.class);          
                intent.putExtra("date", s); //I can't do this anymore because now the EditRecordActivity will not know the exact record to be edited.
                startActivity(intent);

            }
        }); 
```

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T22:00:59.313

为什么不直接使用 arg2（这是被点击的项目的位置[http://developer.android.com/reference/android/widget/AdapterView.OnItemClickListener.html](http://developer.android.com/reference/android/widget/AdapterView.OnItemClickListener.html)）从您的arrayList 中获取适当的地图？

例如：

```
long rowID = (aList.get(arg2)).get("ID"); 
```

我可能会错误地解释设置，但这可能会引导您朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T21:52:10.830

这一切都在 OnItemClickListener()

```
public void onItemClick(AdapterView<?> arg0, View view, int arg2,
                long arg3) 
```

你是对的，你没有唯一的 ID，但你可以通过使用 a`CursorAdapter`和 a来改变它`LoaderManager`。使用 CursorLoader 时，参数`long arg3`成为唯一 ID。`CursorLoader`使用`LoaderManager`, 和可能是一个很好的附加好处`ContentProvider`，尽管我告诉你这个是为了你可以做一些研究。至于如何做到这一点，你有几个选择。当您将项目放入 中时`ListView`，您可以给它一个带有`setTag()`唯一 ID 的标签。用你现在已经拥有的东西来实现不会有太多额外的代码。您的另一个选择是只检查`int arg2`哪个是`ListView`. 缺点是您没有数据库中的唯一 ID。但它会告诉您哪些是列表中的哪些可能是您需要的。如果您需要 ID，那么前者就是您要做的。

希望能帮助到你。

# c# - 保持控制.句柄

> ID：11873591
> 
> 赞同：0
> 
> 时间：2012-08-08T21:39:39.423
> 
> 标签：c#, .net, winforms, winforms-interop

我有一个正在与之通信的非托管 DLL。有一个函数需要一个窗口句柄来绘制。但是，在一些 MDI 操作、表单隐藏和显示之后，句柄会发生变化。不幸的是，我无法为 DLL 提供新句柄，然后引发 System.AccessViolationException。我可以使用某种方法来防止句柄重新创建吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T22:14:07.317

> 我有一个正在与之通信的非托管 DLL。有一个函数需要一个窗口句柄来绘制。但是，在一些 MDI 操作、表单隐藏和显示之后，句柄会发生变化。不幸的是，我不能给 DLL 一个新的句柄然后`System.AccessViolationException`引发。

*正确的*解决方案是处理[`HandleCreated`事件](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.handlecreated.aspx)并通知 DLL 句柄已更改。但是你说你不能给DLL一个新的句柄。（为什么不？）

> 我可以使用某种方法来防止句柄重新创建吗？

不，没有这样的方法。

问题是设置表单的某些属性会导致框架在内部重新创建底层窗口，这当然会导致您的表单与不同的句柄相关联。但这不是错误，它解决了某些窗口样式属性在创建时被缓存的事实，并且没有办法在不重新创建窗口的情况下强制更新它们。

所以如果你想确保窗口句柄永远不会改变，你必须确保你永远不会改变导致框架重新创建它的句柄的任何表单属性。

借助[ILSpy 之](http://wiki.sharpdevelop.net/ILSpy.ashx)类的东西，您可以准确找出它们的属性/方法。罪魁祸首通常会调用一个名为的方法[`RecreateHandle`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.recreatehandle.aspx)（在某些情况下您甚至可以调用自己来实现类似的效果）。

我想不出另一种解决方法。没有办法告诉 Windows 使用与旧对象相同的句柄重新创建对象。

# php - 在服务器上上传和配置 cakephp - 显示路径但给出 404

> ID：11873593
> 
> 赞同：0
> 
> 时间：2012-08-08T21:39:43.280
> 
> 标签：php, cakephp

我一直在本地主机上运行 cakephp，最后上传到我的服务器。我不必触摸 index.php 文件（使用 XAMPP），它运行得很好，但现在我已经准备好上线了，但我遇到了一些问题。

当我输入 www.mydomain.com 时，它加载了 www.mydomain.com/users/index 但它给出了 404。我是否正确假设它正在找到我的控制器，因为它正在显示 /users/index （我的一个控制器和一个动作它）？我检查了一下，我所有的控制器、模型和视图都在服务器上，所以我不确定它为什么会出现问题。这可能是我的 index.php 文件的问题，还是与蛋糕直接相关？

另外，我可以在哪里更改设置，以便我的网站默认启动为 www.domain.com/posts？通过路由，我可以将 www.domain.com/posts 发送到 www.domain.com，对吗？

我看了这个视频 我看了这个视频[http://www.youtube.com/watch?v=4GobWo1rIkE](http://www.youtube.com/watch?v=4GobWo1rIkE)（我使用的是 cake 2.x 而不是 1.x），但我无法让它正常工作。

**编辑 - 我找到了视图，但我的 css 文件没有加载**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T23:39:19.743

根据您报告的行为，听起来 URL 重写要么未启用，要么配置不正确。

URL 重写允许网络服务器正确定位资源和资产，例如 CSS。

这可以通过多种方式解决。

推荐的方法是将服务器设置为使用该`app/webroot`目录作为您的文档根目录。此目录包含一个`index.php`文件，该文件用作您的应用程序的前端控制器，并且可以毫无问题地找到资产。将此目录用作文档根目录还意味着 webroot 之外的其余代码是安全的。

完成后，请确保您的 URL 重写已启用并正确设置。

如果您使用的是 Apache，则需要`mod_rewrite`启用，并且您的目录`.htaccess`中需要一个文件`app/webroot`。

通常，当人们将应用程序的内容通过 FTP 传输到服务器时，这些`.htaccess`文件会被跳过，因为它们在大多数操作系统上被视为隐藏文件。仔细检查 .htaccess 文件是否就位，并且启用了重写。

## 默认路由

如果你想让默认的 URL`/`转到`PostsController`，你可以在 中修改默认路由`app/Config/routes.php`：

```
Router::Connect('/', array('controller' => 'posts', 'action' => 'index')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T21:51:34.917

您是否在服务器上安装/配置了 mod_rewrite？

> 另外，我可以在哪里更改设置，以便我的网站默认启动为 www.domain.com/posts？通过路由，我可以将 www.domain.com/posts 发送到 www.domain.com，对吗？

正确的。通过路由器。

# session - Backbone + Marionette + RequireJS + Session（认证）

> ID：11873596
> 
> 赞同：1
> 
> 时间：2012-08-08T21:39:56.553
> 
> 标签：session, backbone.js, marionette, server-side, jquery-cookie

**更新 - 2013-07-31**

所以，快速更新一下我为实现这一目标所做的工作。它需要 4 件（仅限 Marionette/Backbone，您仍需要 Web 服务回复会话请求）才能有效工作。我创建了一个 Gists 供任何人查看。随时更新要点，我将提取代码，前提是它没有错误。

我使用 jQuery、require.js、文本 require.js 插件、车把和 moment.js。main.js 包含所有使用把手从磁盘或缓存加载模板的钩子，而不是在运行时将它们嵌入到 HTML 中，并提供一个帮助器来在模板中使用 momentjs。如果您有任何问题，请随时发布。

[要点： https](https://gist.github.com/dkleehammer/6126639) ://gist.github.com/dkleehammer/6126639

**更新！！**

我相信我已经想出了一个可行的解决方案。我会继续测试，并会传递给创建者，看看他是否要查看并添加到他的博客中。我已经看到了一堆与骨干网和身份验证相关的问题，希望这对其他人有所帮助。

**原来的！！**

我在服务器端会话处理和骨干+木偶方面遇到问题。我有一个基于此应用程序的会话模型。会话携带认证标志、会话ID、用户ID等数据。

我尝试了很多方法，但我仍然遇到了一个问题；一个瞬间的计时问题，我们在服务器上等待响应当前会话状态，路由器试图决定我们是否需要被发送到登录页面或在特定区域查看。一旦通过身份验证（当然是在登录之后），我就会被发送到索引标签，但是如果我刷新页面那一秒的时间，模型将返回未定义并返回到登录标签。这对于在渲染期间使用会话模型数据的任何其他事物来说都是一个问题。

用木偶做服务器端会话应用程序的最佳方法是什么？有人有使用骨干网+木偶的路由和服务器端会话的好例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-04T05:29:34.773

对于那些感兴趣的人，我根据我最近的工作提出了一个使用 Backbone Marionette 的服务器端会话应用程序的工作示例。

包含运行示例说明的存储库：[https ://github.com/michael-lee/loopback-example-backbone-marionette](https://github.com/michael-lee/loopback-example-backbone-marionette)

此示例后端使用 LoopBackJS，它是一个具有身份验证支持的 Node.js 服务器，但任何其他提供登录 REST API 并使用授权令牌保护数据访问的后端都可以。当没有用户登录或令牌过期时，对后端的请求会失败并出现 HTTP 401 错误。

Marionette 应用程序存储登录响应中返回的令牌，并在所有后续请求中发送此令牌。**它使用jquery.cookie**保留令牌，因此它在页面重新加载和浏览器重新启动时被保留。在应用程序启动之前，它首先检查它是否已经有一个有效的令牌。然后它启动应用程序和路由器。如果它确实有一个有效的令牌，它会直接进入经过身份验证的页面。经过身份验证后，在任何时间点，如果发生 401 错误（例如会话过期），应用程序会使用**$.ajaxSetup**拦截错误并将用户踢回登录页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T21:57:38.563

**借助 ajax jquery 函数和async : false**选项，您可以向服务器发送同步请求：

```
$.ajax
  ({
    type: "GET",
    url: "login.php",
    dataType: 'json',
    async: false,
    data: '{"username": "' + username + '", "password" : "' + password + '"}',
    success: function (){
      // go wherever you want...
    },
    error: function(){
      // go to login page
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T02:38:39.597

我将通过将会话数据（经过身份验证的标志、会话 ID、用户 ID 等）打印到页面而不是执行额外的 ajax 查询来解决这个问题。

window.userdata = {"username": Marcus, "password": 'user_id': 12343}' 等等。

并在脚本中使用后将其删除。

# c++ - 算法作为成员函数还是非成员函数？

> ID：11873598
> 
> 赞同：0
> 
> 时间：2012-08-08T21:40:10.327
> 
> 标签：c++, encapsulation

我有一个简单的数据结构，一个由`k`and索引的三角矩阵`l`，其中`l`从`1`to`N`和`k`从`1`to运行`l`：

```
template<int N> class triangular_matrix {
    std::vector<int> elem;
public:
    int& operator()(int k, int l) {
        return elem[(N * (N + 1) - l * (l + 1)) / 2 + k - 1];
    }
}; 
```

我还有几个算法在这个数据结构上运行。他们都`triangular_matrix`只能通过`operator()`.

`triangular_matrix`使这些算法成为成员函数而不是使它们成为非成员函数（在非全局命名空间中）有什么优点和缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:43:02.420

在 C++ 中，将不必成为成员函数的所有内容放在非成员函数中是很常见*的*。Herb Sutter 不久前写了一篇关于它的[好文章。](http://www.gotw.ca/gotw/084.htm)

# caching - 缓存初始上下文时，远程查找 ejb 失败

> ID：11873601
> 
> 赞同：0
> 
> 时间：2012-08-08T21:40:33.780
> 
> 标签：caching, ejb, websphere, lookup

我有一种情况，在我的 Web 层中，我执行远程 EJB 查找并缓存初始上下文。现在远程 EJB 部署在 WAS 集群中。所以如果远程 ejb 部署在 server1、server2 和 server3 上，让我们说第一次，指向 server1 的初始上下文被缓存。

在此 server1 关闭但其他服务器仍在运行后。但是因为缓存了初始上下文，所以 ejb 调用失败。

现在简单的解决方案是删除缓存并每次进行新的查找。但这会降低性能。有没有办法在这里两全其美......可靠性和性能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T20:11:36.247

提供者 URL中的引导服务器列表`corbaloc:`仅在`InitialContext`构造时使用。在上下文的构建过程中，客户端会获得一个服务器列表，这些服务器可以回答对该上下文的查找，之后只使用该列表。如果提供者 URL 中的引导服务器是集群成员，那么`InitialContext`只要至少有一个集群成员在运行，它就会继续工作。因此`InitialContext`可以安全地缓存。

请注意，如果提供程序 URL 中的引导服务器不是集群成员，而是节点代理，情况会有所不同。在这种情况下，`InitialContext`引用特定于单个节点代理的上下文，并且当该节点代理关闭时查找将失败。即使在提供者 URL 中指定了多个节点代理也是这种情况：在构建过程中选择了一个节点代理，`InitialContext`之后选择不会改变。

# java - 使用 Reflections 库在 Java 类路径中查询具有任意属性的类

> ID：11873602
> 
> 赞同：0
> 
> 时间：2012-08-08T21:40:35.750
> 
> 标签：java, reflections

我过去曾使用[Reflections](http://code.google.com/p/reflections/)库来查询类路径中具有特定注释或继承自特定类的类。使用反射很容易做到这一点，因为该库已经提供了回答此类特定查询的方法。

例如，下面的代码说明了如何查询继承自 的`SomeType`类和用 注释`SomeAnnotation`的类，查找位于包中的类`my.package.prefix`（示例取自 Reflection.java 类的文档）：

```
Reflections reflections = new Reflections("my.package.prefix");
Set<Class<? extends SomeType>> subTypes = reflections.getSubTypesOf(SomeType.class);
Set<Class<?>> annotated = reflections.getTypesAnnotatedWith(SomeAnnotation.class); 
```

但是，在我当前的问题中，我需要做的是查询具有**任意**属性集的类（例如，特定类名 + 现有注释 + 的组合）。我事先不知道这些属性，因为它们应该由程序员使用我正在开发的库来定义。

我设想解决方案的一部分类似于要求程序员定义一个带有布尔方法的 Strategy 类，以回答该类是否应该在答案集中。

例如，程序员应该实现一个类似于以下的接口：

```
public interface MyStrategy {
    public boolean match(Class clazz);
} 
```

所以我的问题是，一旦我有了这个策略对象，我如何指示反射库过滤类，只保留那些根据程序员定义的策略类匹配的类？

**更新：**

显然过滤部分不是最困难的任务（感谢@MvG的回答），但实际上收集了所有要过滤的类（通常是程序员定义的一组基本包中的类）。所以想法是查询所有类，然后用方法过滤它们： `ReflectionUtils.getAll(allClasses, predicate)`。

然后，为了获得要过滤的初始类集，我尝试查询`Object`程序员选择的特定包中的所有子类型。

在我用于此的代码下方：

```
ConfigurationBuilder config = new ConfigurationBuilder();
FilterBuilder fb = new FilterBuilder();
fb.include(FilterBuilder.prefix("my.package.prefix"));
config.filterInputsBy(fb);
config.setUrls(ClasspathHelper.forPackage("my.package.prefix"));
config.setScanners(new SubTypesScanner(false)); //the first argument at the constructor of SubTypesScanner indicates if the Object class should be ignored
Reflections reflections = new Reflections(config);
Set<Class<? extends Object>> unfilteredClasses = reflections.getSubTypesOf(Object.class); 
```

这是最好（更有效）的解决方案吗？

有人有其他想法吗？提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T22:34:54.147

用于`com.google.common.base.Predicate`表达您的策略，或将您自己的策略对象包装到此类谓词中。然后你可以写

```
ReflectionUtils.getAll(allClasses, predicate); 
```

似乎实际计算这个`allClasses`可迭代对象将是一项要求更高的任务。乍一看，我没有看到任何简单的 API。您可能必须直接访问底层存储，并`Class`自己将类名转换为对象。这意味着加载所有类，这可能非常耗时，甚至在某些情况下可能会失败。

# magento - 我如何在 Magento 的总计框架中输出运输方式

> ID：11873606
> 
> 赞同：2
> 
> 时间：2012-08-08T21:40:51.220
> 
> 标签：magento, methods, checkout, shipping

Magento 结帐有一行显示文件中的总数：

前端/base/default/template/checkout/onepage/review/info.phtml

```
<?php echo $this->getChildHtml('totals'); ?> 
```

但是如果客户选择了一种货运方式，这一行也显示了运输方式，而我没有找到这个从我的总页中取出，我知道我不能从数据库中删除它，因为这个信息用于货运选择.

如果有人知道我会很高兴

现在谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T08:23:12.280

要从总数中删除此数据，您需要覆盖以下类：

将其隐藏在购物车页面中：

**Mage_Sales_Model_Quote_Address_Total_Shipping::fetch()**方法需要通过自定义模块覆盖：

```
public function fetch(Mage_Sales_Model_Quote_Address $address)
{
    $originalShippingDescription = $address->getShippingDescription(); // Keep old description value
    $address->unsShippingDescription(); // Removes description of shipping method
    parent::fetch($address);
    $address->setShippingDescription($originalShippingDescription); // Sets back original description of shipping method
    return $this;
} 
```

要在用户帐户的订单概览页面上隐藏它，您需要执行另一个自定义**Mage_Sales_Block_Order_Totals**类。为此，您需要创建一个从**Mage_Core_Block_Abstract扩展的新块**

1.  在您的一些自定义模块中创建块

    ```
    <?php 
    class Custom_Module_Block_Shipping_Total extents Mage_Core_Block_Abstract
    {
        public function initTotals()
        {
            if ($this->getParentBlock() && $this->getParentBlock()->getTotal('shipping')) {
               $this->getParentBlock()->getTotal('shipping')->setLabel($this->__('Shipping & Handling'));
            }
        }
    } 
    ```

2.  添加布局更新以将您的块包含到订单视图中。

    ```
     <layout>
     <!-- Your custom total on invoices view -->
        <custom_invoice_totals>
            <reference name="invoice_totals">
                <block name="custom_total" type="custom_module/shipping_total" />
            </reference>
        </custom_invoice_totals>

        <!-- Your custom total on shipments view -->
        <custom_shipment_totals>
            <reference name="shipment_totals">
                <block name="custom_total" type="custom_module/shipping_total" />
            </reference>
        </custom_shipment_totals>

        <!-- Your custom total on creditmemos view -->
        <custom_creditmemo_totals>
            <reference name="creditmemo_items">
                <block name="custom_total" type="custom_module/shipping_total" />
            </reference>
        </custom_creditmemo_totals>

        <!-- Applying your handles to particular pages in customer account -->
        <sales_order_view>
            <update handle="custom_order_totals" />
        </sales_order_view>

        <sales_order_print>
            <update handle="custom_order_totals" />
        </sales_order_print>

        <sales_email_order_items>
            <update handle="custom_order_totals" />
        </sales_email_order_items>

        <!-- applies your total in email -->
        <sales_email_order_items>
            <update handle="custom_order_totals" />
        </sales_email_order_items>

        <sales_guest_view>
            <update handle="custom_order_totals" />
        </sales_guest_view>

        <!-- invoice pages -->
        <sales_order_invoice>
            <update handle="custom_invoice_totals" />
        </sales_order_invoice>

        <sales_order_printinvoice>
            <update handle="custom_invoice_totals" />
        </sales_order_printinvoice>

        <sales_email_order_invoice_items>
            <update handle="custom_invoice_totals" />
        </sales_email_order_invoice_items>

        <sales_guest_invoice>
            <update handle="custom_invoice_totals" />
        </sales_guest_invoice>

        <!-- shipment pages -->
        <sales_order_shipment>
            <update handle="custom_shipment_totals" />
        </sales_order_shipment>

        <sales_order_printshipment>
            <update handle="custom_shipment_totals" />
        </sales_order_printshipment>

        <sales_email_order_shipment_items>
            <update handle="custom_shipment_totals" />
        </sales_email_order_shipment_items>

        <sales_guest_shipment>
            <update handle="custom_shipment_totals" />
        </sales_guest_shipment>

        <!-- creditmemo pages -->
        <sales_order_creditmemo>
            <update handle="custom_creditmemo_totals" />
        </sales_order_creditmemo>

        <sales_order_printcreditmemo>
            <update handle="custom_creditmemo_totals" />
        </sales_order_printcreditmemo>

        <sales_email_order_creditmemo_items>
            <update handle="custom_creditmemo_totals" />
        </sales_email_order_creditmemo_items>

        <sales_guest_creditmemo>
            <update handle="custom_creditmemo_totals" />
        </sales_guest_creditmemo>
     </layout> 
    ```

在前端的所有页面上进行此类自定义后，您的运输总额将没有有关运输方式的信息......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-15T05:09:49.160

在您本地的 cart.phtml 中，使用以下代码段：

```
<div class="cart-totals-wrapper">
    <div class="cart-totals">
        <div class="cart-totals-container">
            <!-- <?php echo $this->getChildHtml('totals'); ?> -->
            <?php 
                $_quote = Mage::getSingleton('checkout/session')->getQuote();
                $_cartValue = 0;
                $_items = $_quote->getAllItems();
                foreach ($_items as $_item) {
                    $_cartValue += $_item->getRowTotalInclTax();
                }
            ?>
            <table id="shopping-cart-totals-table">
                <colgroup>
                    <col>
                    <col width="1">
                </colgroup>
                <tbody>
                <tr>
                    <td class="a-right" colspan="1" style=""><?php echo $this->__('Subtotal'); ?></td>
                    <td class="a-right" style="">
                        <span class="price"><?php echo $_quote->getStore()->formatPrice($_cartValue); ?></span>
                    </td>
                </tr>
            </table>
            <p class="message"><?php echo $this->__('Shipping will be calculated at checkout'); ?></p>
        </div> 
```

# jquery - 整个div的反射

> ID：11873607
> 
> 赞同：3
> 
> 时间：2012-08-08T21:40:56.520
> 
> 标签：jquery, css

我有一个`div`，我想给它添加一个反射效果。

我知道有很多教程可以为图像添加反射（例如[**this**](http://www.xhtml-lab.com/css/create-reflection-effect-using-css3)和[**this**](http://designshack.net/articles/css/mastering-css-reflections-in-webkit/)），但我没有找到任何关于反射整个 div 的信息。

CSS3可以吗？那么jQuery呢？如何？

**编辑**
[**这**](http://jsfiddle.net/dmGfK/)是我根据第一个教程尝试的。另外，如果我使用这种方法，用户将不得不下载两次反映的内容，这不好......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-08T21:54:26.020

尝试使用 CSS3 的`transform`属性`scaleY(-1)`：

CSS：

```
div.reflection
{
    -webkit-transform: scaleY(-1);
    -moz-transform: scaleY(-1);
    -o-transform: scaleY(-1);
    -ms-transform: scaleY(-1);
    transform: scaleY(-1);
} 
```

HTML：

```
<div>
    blah
</div>
<div class="reflection">
    blah
</div> 
```

[http://jsfiddle.net/UMEDU/1/](http://jsfiddle.net/UMEdU/1/)

# android - 应用内结算 - 无法购买的商品

> ID：11873608
> 
> 赞同：2
> 
> 时间：2012-08-08T21:41:07.833
> 
> 标签：android, in-app-billing

对此还有其他疑问，但似乎没有一个提供答案。

我正在尝试实施应用内计费。真实应用程序中的代码基于地牢代码。我必须设法让它在测试 ID 上正常工作，但不能让它与真正的购买 ID 一起工作。我有：

1.  通过从 eclipse 导出来签署应用程序。
2.  将此版本安装到手机上。
3.  将相同版本上传到 google play，保存，激活，但未发布。
4.  创建了一个托管的应用内结算项目。
5.  已发布，尽管我注意到它确实说“项目只会在应用程序发布时呈现已发布状态”，但据我所知，这是不可能的。
6.  仔细检查产品 ID 是否匹配。
7.  添加了 gmail 测试帐户，确保这是手机上的主帐户。
8.  等了几个小时以确保它在所有服务器上传播。

我得到的只是“无法购买商品”。它发现该项目正常，因为在对话框下方的屏幕背景中是关于它的所有正确信息。

尤其令人讨厌的是，当构建到纯测试应用程序中时，完全相同的计费代码确实有效，而且我可以购买真正的托管项目。所以我确信代码中的逻辑是有效的。它只是在具有真实托管项目的真实应用程序中不起作用。

因此，我觉得这一定是我/谷歌在开发者控制台端所做的事情的某种错误，而不是在应用程序代码中。

有任何想法吗？我对整个应用内计费系统束手无策。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T06:56:48.213

终于到了时间。花了两天多时间整理出来。

# php - 如何根据分配给每个页面的类别为 wordpress 菜单列表着色？

> ID：11873609
> 
> 赞同：0
> 
> 时间：2012-08-08T21:41:08.210
> 
> 标签：php, css, wordpress, menu, categories

我想创建一个导航菜单，显示 wordpress 网站的所有页面，其布局类似于您在页脚站点地图布局中看到的布局，大约 5 列显示所有页面。每个页面都是一个项目。我想使用 wordpress 类别复选框（就像您对帖子所做的那样）来允许为每个项目页面选择一个相关类别。然后每个页面将在项目的描述文本下方显示一个类别标题，我将使用 CSS 设置样式，因此每个类别都有不同的背景颜色。

因为 Wordpress 不提供页面类别，所以我找到了一个插件来将此类别功能添加到名为 ninja-page-categories-and-tags 的页面中：[http ://wordpress.org/extend/plugins/ninja-page-categories -和标签/](http://wordpress.org/extend/plugins/ninja-page-categories-and-tags/)

可以在 basic-functions.php 下编辑插件 php 代码，为使用 get_slug 显示的类别返回一个“类”，然后为每个应用 css。

我的问题是，在菜单上，这将是显示页面的 30 中的二级菜单，我希望能够为每个链接的背景着色，以匹配之前使用 ninja 插件分配给每个页面的类别。因为菜单适用于页面并且类别不直接链接到菜单项（firebug 不会在每个链接的 html 中显示类别详细信息以使用 css 引用）我想知道如何根据类别为每个链接着色？有任何想法吗？

最终我想要实现的是一个页面链接网格，这些链接都是根据它们的类别着色的，一个颜色编码的菜单。

该插件使用标准的 wordpress 类别功能，但我只是想不出如何将这些类别详细信息连接到菜单项以允许我使用 css 设置它们的样式，任何帮助将不胜感激，即使只是朝着正确的方向.

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-15T23:40:05.060

很难准确地理解你在追求什么，但基本上如果你想为菜单项添加额外的类（这将允许样式），你需要创建一个自定义 walker 函数。

看看这样的教程：[http ://wp.tutsplus.com/tutorials/creative-coding/understanding-the-walker-class/](http://wp.tutsplus.com/tutorials/creative-coding/understanding-the-walker-class/)

# javascript - jQuery .ajax() 正在打破 TinyMCE 3.5.6

> ID：11873612
> 
> 赞同：2
> 
> 时间：2012-08-08T21:41:19.997
> 
> 标签：javascript, jquery, ajax, tinymce, rte

我用多层 jQuery.ajax() 构建了一个简单的 CMS，如下所示：

```
function navto(destination, pageToEdit, insertInto) {
// use JQuery's ajax method to control main navigation
if (pageToEdit == "undefined") {
    var request = $.ajax({
        url: destination
    });
} else {
    var request = $.ajax({
        type: "POST",
        url: destination,
        data: pageToEdit
    });
}

request.done(function(msg) {
    if (insertInto) { $(insertInto).html( msg ); }
    else { $("#mana_content").html( msg ); }
    //alert(msg);
});

request.fail(function(jqXHR, textStatus) {
    alert( textStatus + ". This page could not be found." );
});
} 
```

例如，index.php 用于`<li class="child" onclick="navto('inc/edit_pages.php');">Edit Pages</li>`将 edit_pages.php 加载到`<div id="content"></div>`

edit_pages.php 使用`$(document).on("click", "a.editPage", function(e) { load_page_for_edit(e); return false; });`（其中`load_page_for_edit()`收集并准备要发送到`navto()`函数的信息）发送类似`edit_page.php?t=template.php&c=contentID`

edit_page.php 使用这些值在相应的数据库中查找所需的信息，然后将类似的内容输出`template.php&c=content`到它自己的`<div id="page_to_edit"></div>`... 中，再次与另一个`navto()`.

然后，用户可以单击 $('.edit_text') 元素以取消隐藏带有 TinyMCE 文本区域（称为 $('#editor')）的 div。

内容由`var content = $('.edit_text').html()`

这就是问题所在：当我尝试将内容变量加载到 TinyMCE 文本区域时——`$('#editor').html(content);`文本区域没有收到它。我可以立即使用 来跟进`alert($('#mana_editor').html());`，它会输出正确的内容，但 HTML 字符会变得安全（例如，`<p>`变成`&lt;p&rt;`）。但是，内容不会加载到 TinyMCE。

我猜我有一个 .ajax 范围问题？也许 jQuery 试图`$('#editor').html(content);`在 template.php 上不存在的#editor（回想一下 #editor 在 edit_page.php 上）？找出多层.ajax 的任何好的资源？

花絮，线索和我尝试过的事情：

*   我所有的 jQuery 函数都在一个 functions.js 文件中，除了 TinyMCE init，它位于 edit_page.php 的末尾。
*   只有 index.php 链接到 functions.js
*   我正在使用 TinyMCE 3.5.6、[jQuery 插件包](http://www.tinymce.com/wiki.php/jQuery_Plugin)和 jQuery 1.7.2。
*   我也尝试过 TinyMCE 的伪选择器（`$('textarea:tinymce')`而不是`$('#editor')`），它在 Firebug 中引发错误：jq.min.js 中的“错误：语法错误，无法识别的表达式：tinymce”（第 4 行）。
*   用户在 TinyMCE 中进行更改后，更新按钮会将新内容加载到`$('.edit_text')`单击的内容中。它没有加载我输入的内容，而是加载了上面提到的“安全”HTML——就好像 TinyMCE 完全被绕过了一样。
*   如果我不使用整个 CMS 并首先在 FireFox 中手动输入 `get_page.php?t=template&c=content' 就可以了。
*   如果我不加载 TinyMCE，jQuery 会将内容加载到 textarea
*   [这家伙](https://stackoverflow.com/questions/7639288/tinymce-jquery-plugin-is-not-always-updating-textareas)可能正在做某事......看起来很相似，但我不确定他的 head.js 包含什么，如何实现 head.ready();，或者他的问题是否与我的相同。

这是我第一个使用 Ajax 的项目，所以我有很多东西要学。任何见解/建议阅读/解决方案将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T07:33:15.000

> 这是问题所在：当我尝试将内容变量加载到 TinyMCE 文本区域时 - $('#editor').html(content); -- textarea 没有收到它。我可以立即使用 alert($('#mana_editor').html()); 来跟进，它输出正确的内容，但 HTML 字符是安全的（例如，
> 
> 变成 <p&rt;)。但是，内容不会加载到 TinyMCE。

您需要知道 tinymce 不等于您的 textarea。在初始化编辑器实例时，前文本区域被隐藏，tinymce 创建一个可内容编辑的 iframe - tinymce 编辑器。以前的文本区域会不时根据编辑器的实际内容进行更新（在特殊事件中）。所以我认为你想要实现的是将你的内容写入编辑器。为此，使用 jQuery 处理 textarea 是行不通的（正如您自己发现的那样）。您需要在这里使用 javascript tinymce API：

```
tinymce.get('your_former_textarea_id_needs_to_be_here').setContent(content); 
```

# ruby-on-rails - Ruby on Rails：来自活动记录方法“validates_uniqueness_of”的错误消息存储在哪里

> ID：11873613
> 
> 赞同：0
> 
> 时间：2012-08-08T21:41:25.400
> 
> 标签：ruby-on-rails, validation, activerecord

如何从结果为假的 validates_uniqueness_of 方法中检索消息？

所以我可以选择在我视图的适当位置显示它。

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:03:55.627

您可以像这样访问错误：

```
class Person < ActiveRecord::Base
  validates_uniqueness_of :name
end
person = Person.new(:name => "JD")
person.valid? # => false
person.errors[:name] # => ["has already been taken"] 
```

[在此处](http://guides.rubyonrails.org/active_record_validations_callbacks.html#working-with-validation-errors)阅读有关验证的信息

# android - GridView 中的 StateListDrawable

> ID：11873615
> 
> 赞同：0
> 
> 时间：2012-08-08T21:41:46.483
> 
> 标签：android, android-layout, android-widget

在更改我的代码（[第一次尝试](https://stackoverflow.com/questions/11852585/updating-gridview-child)）后，我遇到了类似的问题。我已经更新了我的 getView() 以执行正确的方式。

```
@Override
public View getView( int position, View convertView, ViewGroup parent ) {
    Resources res = activity.getResources();

    if( convertView == null ) {
        LayoutInflater vi = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = vi.inflate( R.layout.video_gallery_item, parent, false ); 
    }

    Bitmap bmp = getBitmap( videoIds[ position ] );

    /* This layer drawable will create a border around the image. This works */
    Drawable[] layers = new Drawable[ 2 ];
    layers[ 0 ] = new BitmapDrawable( res, bmp );
    layers[ 1 ] = res.getDrawable( R.drawable.border_selected );
    LayerDrawable layerDrawable = new LayerDrawable( layers );

    /* Create the StateListDrawable */
    StateListDrawable drawable = new StateListDrawable();
    drawable.addState( StateSet.WILD_CARD, new BitmapDrawable( res, bmp ) );
    drawable.addState( new int[]{ android.R.attr.state_checked, android.R.attr.state_selected }, layerDrawable );
    ImageView v = (ImageView)convertView.findViewById( R.id.image );
    v.setImageDrawable( drawable );
    v.setAdjustViewBounds( true );
    thumbnails[ position ] = bmp;
    return convertView;
} 
```

这个适配器正在一个名为 videoGallery的[GridView上使用：](http://developer.android.com/reference/android/widget/GridView.html)

```
videoGallery.setChoiceMode( GridView.CHOICE_MODE_MULTIPLE_MODAL );
videoGallery.setMultiChoiceModeListener( new MultiChoiceModeListener() { ... } 
```

我遇到的问题是，通过长按在 GridView 上选择图像时图像不会改变。操作栏发生变化，我的上下文菜单出现等。我还尝试通过 XML 创建 StateListDrawable，结果相同。想法？

**更新**

改变

```
drawable.addState( new int[]{ android.R.attr.state_checked, android.R.attr.state_selected }, layerDrawable ); 
```

至

```
drawable.addState( StateSet.WILD_CARD, layerDrawable ); 
```

在我的 getView() 中显示了我正在寻找的边框。那么也许 StateListDrawable 没有得到状态变化？有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:47:05.980

好吧，我想通了。我的州有一些问题。顺序第一：

```
drawable.addState( StateSet.WILD_CARD, new BitmapDrawable( res, bmp ) );
drawable.addState( new int[]{ android.R.attr.state_checked, android.R.attr.state_selected }, layerDrawable ); 
```

首先`addState`，我使用通配符。因为这个机器人会在下一个之前匹配这个状态。此外，尽管 android 说该项目已“检查”，但实际状态是“激活”。所以我将这两行改为：

```
drawable.addState( new int[] { android.R.attr.state_activated }, layerDrawable );
drawable.addState( new int[] { -android.R.attr.state_activated }, new BitmapDrawable( res, bmp ) ); 
```

它运行良好！

# php - 忽略 "the" php / mysql 输出

> ID：11873618
> 
> 赞同：0
> 
> 时间：2012-08-08T21:41:57.153
> 
> 标签：php, mysql

我按字母顺序对数据进行排序，尽管以“the”开头的条目我希望忽略按第一个单词排序并改为按第二个单词排序。

例如“视图”将列在 V 而不是 T 下，最好的方法是什么？

我知道我可以做一件简单的小事，就像我过去常做的那样，但我一生都记不起来了。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T21:59:38.140

要按照您指定的顺序从 MySQL 获取结果集，您可以使用：

```
ORDER BY TRIM(LEADING 'The ' FROM entry) 
```

这将删除多次出现，因此例如“The Now”将作为“Now”返回。此外，它只会删除单词“The”后面的单个空格。

这可能区分大小写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T21:52:42.873

尝试：

```
SELECT COLUMN FROM TABLE ORDER BY TRIM(LEADING 'The ' FROM COLUMN); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T21:57:30.347

您可以使用自己的比较函数，这样如果索引以“The”开头，php 将采用第二个单词：

```
function cmp($a, $b) {
    $a = preg_replace("/^the /i","",$a);
    $b = preg_replace("/^the /i","",$b);
    return strcmp($a,$b);
} 
```

和排序：

```
$array = array("The Vektor", "Apple", "The Anchor", "Bee");
usort($array, 'cmp');
print_r($array); 
```

我认为这应该可行.. ;) .. 此外，它不会从文本中删除“The”，因为比较的变量只是本地的:)

输出：

```
Array ( [0] => The Anchor [1] => Apple [2] => Bee [3] => The Vektor ) 
```

# html - 如何扩展标题 div 以适应整个页面？

> ID：11873624
> 
> 赞同：0
> 
> 时间：2012-08-08T21:42:31.990
> 
> 标签：html, dreamweaver, indentation

我意识到这个问题已经被问过很多次了，但我想弄清楚这个问题我疯了。

我对 html 很陌生，想构建一个静态标题 (940px x 30px)，其中包含我们的徽标、导航栏和一些社交网络图标。

我正在努力做的是使标题适合整个页面，它在左侧、顶部和右侧显示我的部分背景，这令人沮丧。

下面是我使用的代码。

HTML 代码

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="css/style.css" />
<title>TWChome</title>
</head>
<body>
    <div id="header">
        <div id="headercontents">
        Hello
        </div>
    </div>
</body>
</html> 
```

CSS 代码

```
@charset "utf-8";

/* CSS Document */

body {
    background-image:url(../images/bg.jpg);
}

div#header {
    display:block;
    width:auto;
    height:auto;
    background-image:url(../images/bar.jpg);
}

div#headercontents {
    width:50%;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T21:47:42.700

尝试这个：

```
body{margin:0;padding:0} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T22:28:17.563

实际上并不难：

```
#header {
 width: 940px;
 height: 30px;
 margin: 0 auto;
} 
```

首先，您设置您希望它具有的尺寸，然后将其居中。仅此而已。另外我不知道你为什么将#header-contents 设置为50％的宽度......

更新带有背景图像的标题：

```
 #header {
   height: 30px;
   background: url(../images/bar.jpg) no-repeat center center; /* for a single image with height of approx 30px */
   background: url(../images/bar.jpg) repeat; /* alternative for a tile you want to repeat */
 }
 #headercontents {
  width: 940px;
  margin: 0 auto;
 } 
```

并且确实总是按照其他人的说明应用一些重置 css。

# javascript - AngularJS：使用 jQuery 更改时，ng-model 绑定不更新

> ID：11873627
> 
> 赞同：103
> 
> 时间：2012-08-08T21:42:48.660
> 
> 标签：javascript, jquery, angularjs, data-binding, angular-ngmodel

这是我的 HTML：

```
<input id="selectedDueDate" type="text" ng-model="selectedDate" /> 
```

当我在框中键入时，模型会通过 2-way-binding 机制进行更新。甜的。

*但是*，当我通过 JQuery 执行此操作时...

```
$('#selectedDueDate').val(dateText); 
```

它不会更新模型。为什么？

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2012-08-08T22:00:11.853

Angular 不知道这种变化。为此，您应该调用`$scope.$digest()`或在内部进行更改`$scope.$apply()`：

```
$scope.$apply(function() { 
   // every changes goes here
   $('#selectedDueDate').val(dateText); 
}); 
```

看到[这个](https://stackoverflow.com/questions/9682092/databinding-in-angularjs)以更好地理解*脏检查*

**更新**：[这](http://fiddle.jshell.net/agvTz/39/)是一个例子

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2015-03-06T14:37:29.087

只需使用；

```
$('#selectedDueDate').val(dateText).trigger('input'); 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-10-29T18:18:46.363

我发现，如果您不将变量直接放在范围内，它会更可靠地更新。

尝试使用一些“dateObj.selectedDate”并在控制器中将 selectedDate 添加到 dateObj 对象，如下所示：

```
$scope.dateObj = {selectedDate: new Date()} 
```

这对我有用。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-05-26T03:11:35.387

试试这个

```
var selectedDueDateField = document.getElementById("selectedDueDate");
var element = angular.element(selectedDueDateField);
element.val('new value here');
element.triggerHandler('input'); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-07-19T18:35:07.413

无论在 Angular 范围之外发生什么，Angular 都不会知道。

摘要循环将更改从模型 -> 控制器，然后从控制器 -> 模型。

如果需要查看最新的Model，需要触发digest循环

但是有可能正在进行消化循环，因此我们需要检查并启动循环。

最好始终执行安全应用。

```
 $scope.safeApply = function(fn) {
            if (this.$root) {
                var phase = this.$root.$$phase;
                if (phase == '$apply' || phase == '$digest') {
                    if (fn && (typeof (fn) === 'function')) {
                        fn();
                    }
                } else {
                    this.$apply(fn);
                }
            }
        };

      $scope.safeApply(function(){
          // your function here.
      }); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-02-24T16:35:37.290

只需在函数末尾运行以下行：

$scope.$apply()

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-11-10T10:22:01.160

您必须触发输入元素的**更改事件**，因为 ng-model 侦听输入事件并且范围将被更新。但是，**常规的 jQuery 触发器对我不起作用**。但这就是魅力所在

```
$("#myInput")[0].dispatchEvent(new Event("input", { bubbles: true })); //Works 
```

**关注没用**

```
$("#myInput").trigger("change"); // Did't work for me 
```

您可以阅读有关[创建和调度合成事件](https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Creating_and_triggering_events)的更多信息。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-04-15T06:50:32.450

AngularJS 通过值传递字符串、数字和布尔值，而它通过引用传递数组和对象。因此，您可以创建一个空对象并使您的日期成为该对象的属性。这样，角度将检测模型变化。

在控制器中

```
app.module('yourModule').controller('yourController',function($scope){
$scope.vm={selectedDate:''}
}); 
```

在 html 中

```
<div ng-controller="yourController">
<input id="selectedDueDate" type="text" ng-model="vm.selectedDate" />
</div> 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-05-24T11:07:51.260

只需使用：

```
$('#selectedDueDate').val(dateText).trigger('input'); 
```

代替：

```
$('#selectedDueDate').val(dateText); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-03-12T17:49:18.970

我已经为 jQuery 编写了这个小插件，如果存在，它将进行所有调用以`.val(value)`更新 angular 元素：

```
(function($, ng) {
  'use strict';

  var $val = $.fn.val; // save original jQuery function

  // override jQuery function
  $.fn.val = function (value) {
    // if getter, just return original
    if (!arguments.length) {
      return $val.call(this);
    }

    // get result of original function
    var result = $val.call(this, value);

    // trigger angular input (this[0] is the DOM object)
    ng.element(this[0]).triggerHandler('input');

    // return the original result
    return result; 
  }
})(window.jQuery, window.angular); 
```

只需在 jQuery 和 angular.js 之后弹出这个脚本，`val(value)`现在更新应该会很好。

* * *

缩小版：

```
!function(n,t){"use strict";var r=n.fn.val;n.fn.val=function(n){if(!arguments.length)return r.call(this);var e=r.call(this,n);return t.element(this[0]).triggerHandler("input"),e}}(window.jQuery,window.angular); 
```

* * *

例子：

```
// the function
(function($, ng) {
  'use strict';

  var $val = $.fn.val;

  $.fn.val = function (value) {
    if (!arguments.length) {
      return $val.call(this);
    }

    var result = $val.call(this, value);

    ng.element(this[0]).triggerHandler('input');

    return result;

  }
})(window.jQuery, window.angular);

(function(ng){ 
  ng.module('example', [])
    .controller('ExampleController', function($scope) {
      $scope.output = "output";

      $scope.change = function() {
        $scope.output = "" + $scope.input;
      }
    });
})(window.angular);

(function($){  
  $(function() {
    var button = $('#button');

    if (button.length)
      console.log('hello, button');

    button.click(function() {
      var input = $('#input');

      var value = parseInt(input.val());
      value = isNaN(value) ? 0 : value;

      input.val(value + 1);
    });
  });
})(window.jQuery);
```

```
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.23/angular.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div ng-app="example" ng-controller="ExampleController">
  <input type="number" id="input" ng-model="input" ng-change="change()" />
  <span>{{output}}</span>
  <button id="button">+</button>
</div>
```

* * *

[这个答案是从我对另一个类似问题的回答](https://stackoverflow.com/a/29016756/1185053)中逐字复制的。

# ruby-on-rails-3 - rails redirect_to 不同的子域、控制器和参数

> ID：11873632
> 
> 赞同：0
> 
> 时间：2012-08-08T21:43:08.113
> 
> 标签：ruby-on-rails-3, redirect, subdomain

如果用户尝试访问移动设备上的特定页面（例如：myapp.com/foo），我想将他们重定向到带有参数的移动站点上的不同页面（在本例中为：m.myapp.com/bar ?param1=foo)。

我已经知道如何使用参数重定向到不同的页面（如 myapp.com/bar?param1=foo），但我无法弄清楚如何在不提供整个字符串的情况下重定向到另一个子域，如下所示：`redirect_to "m.myapp.com/bar?param1=foo"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:07:00.910

根据您使用的 Rails 版本，您可以通过以下方式完成此操作：

```
redirect_to some_url(subdomain: 'some_subdomain', some_param: 'foo') 
```

URL 帮助程序接受一个`subdomain`参数——我认为，就像 Rails 3 一样。

# jquery - 如何防止 jquery.ui.dialog 将窗口滚动到顶部（以编程方式调用时）

> ID：11873639
> 
> 赞同：5
> 
> 时间：2012-08-08T21:43:32.607
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

我有以下代码：

```
 $(".foo-form").submit(function (event) {
        event.stopPropagation();
        event.preventDefault();
        $.ajax({
            url: this.action,
            data: $(this).serializeArray(),
            type: 'POST',
            dataType: 'json',
            success: function (data, msg, resp) {
                var $form = $("#second-form");
                $form.show().dialog({
                    resizable: false,
                    height:400,
                    width: 600,
                    modal: true,
                    title: "Recommendation added",
                    buttons: [
                        {
                            text: "OK",
                            click: doOK
                        },
                        {
                            text: "Cancel",
                            click: doCancel
                        }
                    ]
                });
            }
        })
        return false;
    }); 
```

如果我在页面上向下滚动并提交表单，当显示对话框时，它会将页面滚动到顶部。有没有办法覆盖这个？

**不是解决方案的事情**

*   固定`.ui-dialog`班级的定位。未修改（使用 Google 的 CDN）
*   不取消事件 - 如您所见，我调用,`stopPropagation`并*返回*false。所以这并不是事件正在发生（即使是这样，它也不是指向页面顶部的哈希链接）`preventDefault`

 *使用 jQuery 1.72 和 jQuery UI 1.8.21（各自的最新版本）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-16T17:35:21.617

I had the same issue using jQuery dialog with href tags and I fix it adding **"event.preventDefault();"** when I invoque the dialog, example:

```
$(".button").click(function(event){
event.preventDefault();
$("#dialog").dialog();
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T01:23:14.163

我在使用带有 href 标签的 jQuery 对话框时遇到了类似的问题。我所要做的就是从 a 标签中删除 href="#" ，这解决了我的问题。

更改`<a href='#'>SHOW</a>`为`<a>SHOW</a>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-03T13:53:42.020

我发现最好的解决方法是返回 false；打开对话框后。

所以把你的回报移到假；在对话框功能之外。我知道这是一个老问题，但在这里没有看到这个解决方案，它对我有用。

您的 stopPropagation、preventDefault() 和返回 false 的问题；是他们都在错误的地方。

我就是这样做的。

```
 $("<div><p>" + text + "</p></div>").dialog({
        modal: true,
        resizable: false,
        width: width,
        buttons: {
            Ok: function() {
                $(this).dialog("close");
            }
        }
    });
    return false; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-09T15:12:04.567

尝试添加关闭功能并在内部使用 preventDefault ，为我工作

```
$form.show().dialog({
                close: function (event) { event.preventDefault(); }
                resizable: false,
                etc....
            }); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-07-15T12:57:15.037

它因为`<a href=""></a>`标签而滚动。

利用

```
<a class="someClass" href=#!"></a> 
```

防止滚动到顶部*

# java - “？=”在正则表达式中有什么作用？

> ID：11873642
> 
> 赞同：3
> 
> 时间：2012-08-08T21:43:58.037
> 
> 标签：java, regex, string

谁能告诉我“？=”在使用正则表达式时的作用？这是我试图破译的代码片段示例：

```
password.matches("(?=.*\\d.*\\d.*)^[\\w]{8}.*$"); 
```

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T21:45:47.503

这是一个[**积极的前瞻性**](http://www.regular-expressions.info/lookaround.html)。在该特定表达式中，它表示您的密码必须至少包含两位数字 ( `\d`)。

另请注意，前瞻不*消耗*输入，它只是一个**断言**。

例如，在您的正则表达式中，`(?=.*\\d.*\\d.*)`前瞻`password`部分`[a-zA-Z_0-9]`（细绳。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T21:45:24.947

这是一个前瞻：一个零宽度匹配，检查该位置是否跟在给定的表达式后面。

[http://www.regular-expressions.info/lookaround.html](http://www.regular-expressions.info/lookaround.html)

在您的场景中，您正在寻找一个字符串：

*   以包含两位数字的字符串开头（由前瞻强制执行）
*   以 8 个单词字符开头（与正则表达式的其余部分匹配）

前瞻实际上并不是匹配的一部分。它的行为很像单词边界 ( `\b`) 或字符串的开头 ( `^`)。

# c++ - ofstream 如何以二进制模式将 NULL 写入文件？

> ID：11873645
> 
> 赞同：0
> 
> 时间：2012-08-08T21:44:11.553
> 
> 标签：c++, null, filestream, binaryfiles, ofstream

我正在维护一个 C++ 方法，我的一个客户遇到了问题。该方法应该将一系列标识符写入由新行分隔的文件。然而，在他们的机器上，该方法以某种方式将一系列 NULL 写入文件。在二进制编辑器中打开文件显示它包含全零。

我不明白为什么会这样。我尝试分配空字符串和第一个字符集为 0 的字符串。创建文件没有问题，只需将标识符写入它即可。

这是方法：

```
void writeIdentifiers(std::vector<std::string> IDs, std::string filename)
{   
    std::ofstream out (filename.c_str(), std::ofstream::binary);

    if (out.is_open())
    {
        for (std::vector<std::string>::iterator it = IDs.begin();
             it != IDs.end();
             it++)
        {
            out << *it << "\n";
        }
    }

    out.close();
} 
```

我的问题：您是否可以提供任何可能的输入来创建一个包含 NULL 值的文件的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T22:01:27.457

是的，下面的代码很清楚地写了一系列 NULL 字节：

```
std::vector<std::string> ids;
std::string nullstring;
nullstring.assign("\0\0\0\0\0\0\0\0\0\0", 10);
ids.push_back(nullstring);
writeIdentifiers(ids, "test.dat"); 
```

因为`std::string`容器存储了字符串长度，所以它不一定能像普通的 C（空终止）字符串那样使用。在这里，我分配了一个包含 10 个 NULL 字节的字符串。然后输出这些，因为字符串长度为 10。

# jquery - 如果页面加载得足够快，是否可以不触发脚本？

> ID：11873650
> 
> 赞同：0
> 
> 时间：2012-08-08T21:44:58.750
> 
> 标签：jquery, mobile, overlay, document-ready

所以这里有一些背景。

我有一个移动网站，我在其中设置了一个覆盖整个页面内容的 iOS 微调器和白屏。在 document.ready 上，微调器和屏幕立即显示并显示，直到页面内容完全加载——此时屏幕和微调器消失，显示页面内容。

这一切都很好。但是，如果页面加载得足够快，我想稍微完善一下脚本并且不显示覆盖和微调器。其中许多页面将非常轻量级（如果用户之前访问过它们 - 之前已缓存）并且让微调器和叠加层在瞬间闪烁一秒钟或更短时间是无用的，并且可能会造成混乱。但是，当页面加载时间超过几秒钟时，拥有此功能非常有价值。

我试图找到一种仅在页面加载时间超过一秒时才执行脚本的方法。起初我以为我可以简单地告诉脚本等待一秒钟才能执行，但这样做时，当 DOM 构建页面的 html 结构时，用户会看到一闪而过的内容——如果所有资产都没有，那么它就会被隐藏t 在一秒钟内完成。

显然，这使用户感到困惑并且是不可接受的。

另一种看待这个问题的方法是，“如果页面被缓存/加载很快 - 不要显示微调器和覆盖。否则，继续显示它。”

有没有办法做到这一点？

这是我目前正在使用的代码（这是使用 jquery 和 spin.js）：

```
// invoke spin.js
$(document).ready(function() {

    var $overlayScreen = $('<div id="pageLoader" class="overlay pageLoad"></div>');
    $('body').append($overlayScreen);

    var opts = {
      lines: 13, // The number of lines to draw
      length: 7, // The length of each line
      width: 4, // The line thickness
      radius: 10, // The radius of the inner circle
      rotate: 0, // The rotation offset
      color: '#000', // #rgb or #rrggbb
      speed: 1, // Rounds per second
      trail: 60, // Afterglow percentage
      shadow: false, // Whether to render a shadow
      hwaccel: true, // Whether to use hardware acceleration
      className: 'spinner', // The CSS class to assign to the spinner
      zIndex: 2e9, // The z-index (defaults to 2000000000)
      top: 'auto', // Top position relative to parent in px
      left: 'auto' // Left position relative to parent in px
    };
    var target = document.getElementById('pageLoader');
    var spinner = new Spinner(opts).spin(target);
});

// check to see if the page has loaded yet.  If it has, hide the loader div
$(window).load(function() {
    $('#pageLoader').addClass('loadComplete');
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T23:22:04.263

问题是，在页面加载之前，您无法检查页面加载需要多长时间。这样做的唯一方法是延迟显示加载微调器大约 1 到 1.5 秒，如果页面在显示微调器之前完成加载，则清除该延迟。这真的是我认为可以做到的唯一方法。

```
$(document).ready(function() {
    var overlayTimer = setTimeout(function() { 
        $('<div id="pageLoader" class="overlay pageLoad"></div>').appendTo('body');
    }, 1500);

    // other code for the spinner here

    $(window).load(function() {
        clearTimeout(overlayTimer);
        $('#pageLoader').addClass('loadComplete');
    });
}); 
```

这是我能想到的唯一适合您需要的情况。不是最好的解决方案，因为如果需要显示微调器，在显示微调器之前仍然会有 1.5 秒的延迟。

# javascript - 如何使用分页功能取消选中 tablesorter 中的所有复选框

> ID：11873652
> 
> 赞同：0
> 
> 时间：2012-08-08T21:45:04.463
> 
> 标签：javascript, jquery, tablesorter

我已经被这个折磨了很长一段时间。

因为表格排序器分页将完全从表格中删除不可见的行，以便更快地进行排序。我无法让每行中的复选框按我的意愿工作。

这是我的 jsfiddle -> [http://jsfiddle.net/NcqfY/3/](http://jsfiddle.net/NcqfY/3/)

*单击变量触发器以调出表格*

基本上我想要做的是获取所有选定行的 id 并将它们推送到一个数组`selectedID`中。创建报告时的空`selectedID`数组（或单击“创建报告”按钮）。所以在我点击按钮后，我希望表中的所有复选框都应该被取消选中。我正在使用以下代码：

`$('table.tablesorter tbody tr').find('input[type=checkbox]').prop('checked', false); // I can only uncheck the boxes in current page`

但是我只能取消选中当前页面中的框，不包括不可见的页面。这真的让我很难为选定的行获取正确的 ID。

任何人都可以帮助我，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T22:08:23.530

您的部分 javascript 中有一些错误：

```
$('table.tablesorter tbody').on("click", "tr", function(event) {
    if (event.target.type != 'checkbox') {
        $(':checkbox', this).trigger('click');
        var id = $(this).attr('id');
        if (selectedID.indexOf(id) == -1) {
            selectedID.push(id);
        } else {
            var index = selectedID.indexOf(id);
            selectedID.splice(index, 1);
        }
    }
}); 
```

我为你纠正了它们，它似乎工作正常：
`!==`--> `!=`
`===`--> `==`
`var id = $(this).attr('id')`-->`var id = $(this).attr('id');`

编辑：以上内容对我不起作用，所以我认为这是问题所在，但要回答您的问题：

```
$($(".tablesorter")[0].config.rowsCopy).each(function() {
    $(this).find('input[type=checkbox]').prop('checked', false);
}); 
```

这将取消选中表格中的所有复选框，甚至是隐藏的复选框

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T22:18:47.643

根据[tablesort 的 pager 的文档](http://mottie.github.com/tablesorter/docs/example-pager.html)，您可以这样做：

```
var t = $('table')

// disabling the pager will restore all table rows 
t.trigger('disable.pager'); 

// ---do your thing---

// restore pager 
t.trigger('enable.pager'); 
```

这似乎可行，前提是您没有省略寻呼机的大小选择器（如果这样做，它会引发错误）。

我已经更新了你的 JSFiddle：[jsfiddle.net/NcqfY/6/](http://jsfiddle.net/NcqfY/6/)

# c# - 如何公开 Application.Properties.Settings 并保持这种状态

> ID：11873656
> 
> 赞同：21
> 
> 时间：2012-08-08T21:45:16.617
> 
> 标签：c#, visual-studio-2010, configuration

我正在将我的应用程序设置集中到一个位置，并且我选择使用我的公共库中的设置集合来执行此操作。

我已将所有这些设置移动到他们自己的文件中，该文件使用配置源被拉入我的 app.config：

```
<Common.Properties.Settings configSource="config\Common.Properties.Settings.config" /> 
```

这允许我使用 Visual Studio 的“添加链接”功能在我的 Web 和测试应用程序中使用导入的配置文件覆盖默认库设置。

现在，我希望能够从我的其他库中访问所有这些很棒的设置值，并且发现我可以通过将生成的类公开来做到这一点：

文件：Common.Properties.Settings

```
public sealed partial class Settings : global::System.Configuration.ApplicationSettingsBase 
```

`Common.Properties.Settings.Default.MySetting`这让我可以从我的 Web 应用程序或单元测试中访问诸如此类的东西。但是，问题在于，每当添加新设置时，Visual Studio 都会重新生成 Setting.settings 文件，并将 Settings 类翻转回内部：

```
internal sealed partial class Settings : global::System.Configuration.ApplicationSettingsBase 
```

所以我的问题是是否有人知道一种方法来覆盖它，或者可能建议一个宏方法或其他方法来确保在重建 Settings.settings 文件后，这个类被设置为公共。

谢谢！

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-08-08T21:56:48.640

我假设您已经在编辑器中创建和修改了 Visual Studio 构建中的设置，可以通过项目属性部分设置访问这些设置。在同一个编辑器上有一个组合框，您需要将其从内部更改为公共，它被标记为访问修饰符。

![在此处输入图像描述](../Images/22dd491144d8256fb41da6eeb5e62ca3.png)

# asp-classic - 经典 ASP - REMOTE_HOST 变量

> ID：11873660
> 
> 赞同：0
> 
> 时间：2012-08-08T21:45:35.900
> 
> 标签：asp-classic, vb6

我有一个经典的 asp 应用程序（基于 Intranet），它使用以下语句：

```
Host = request.servervariables("REMOTE_HOST") 
```

然后将主变量传递给 VB6 函数，该函数将地址输入到数据库表中。我已经在本地 PC 上设置了应用程序，其中包括将经典 ASP 应用程序发布到 IIS7 并在调试模式下运行 VB6 应用程序。如果我通过导航到本地PC上使用该应用程序：`http://localhost/website`，我注意到主机类似于以下内容：当我在本地连接时，主机类似于：“::1”，但是当远程用户访问应用程序时，IP地址是正确的，例如172.xyz 什么是 ::1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:52:57.403

::1 是 127.0.0.1 的 IPv6 等效项

如果盒子上同时有 IPv6 和 IPv4，则 IPv6 优先。

如果这对您来说是个大问题，您可以禁用 IPv6 堆栈——但最好还是忍受它。

# javascript - 限制可调整大小的 div 上的位置

> ID：11873664
> 
> 赞同：0
> 
> 时间：2012-08-08T21:45:49.280
> 
> 标签：javascript, jquery, jquery-ui-resizable

这项工作是对我之前未回答的问题的回应：[Resizable div doesn't stay within containment parameter](https://stackoverflow.com/questions/11854700/resizable-div-doesnt-stay-within-containment-parameter)

由于我的`resizable`div （称为**pocket**）不是我希望将其包含在其中的容器的直接子级，因此我在*应将*`resize`其包含在容器中的方法中提供了一个回调。

 *在这里小提琴：http: [//jsfiddle.net/dKuER/12/](http://jsfiddle.net/dKuER/12/)

**我的问题**

`resizable`当您将div 向左重新调整大小（这会影响其`left`位置）*超出*网格边界时，它并不*总是*尊重我在回调函数中的逻辑。当您向左拖动时，您会注意到一个闪烁的动作，其中 div 将在其硬编码`left`位置和`left`鼠标确定的位置之间切换。

根据您停止拖动的时间，`left`div 的位置可能位于硬编码位置或鼠标停止拖动的位置。

**如何确保始终遵守回调函数的逻辑？**

```
// Relevant Code

// No blinking action when dealing with the width 
//Re-sizing to the right works
if ( (pocketLeft + currentWidth) > (gridLeft + gridWidth) ) {
    var deltaWidth = (gridLeft + gridWidth) - (pocketLeft + originalWidth);
    ui.size.width = originalWidth -deltaWidth;
}   

// This should force the position if the div is re-sized 
// past the grid's left boundary
if (pocketLeft < gridLeft) {
    ui.position.left = -120;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T03:32:55.077

使用鼠标坐标，以及通过`resizable`div 的对象方法获得的宽度（如此明显！），而不是从一些晦涩的计算中推导出来，我能够达到正确的效果

[http://jsfiddle.net/dKuER/16/](http://jsfiddle.net/dKuER/16/)

```
var x = event.pageX - $('#grid').offset().left;
var y = event.pageY - $('#grid').offset().top; 

if (x < 0)
{
    ui.size.width = $(this).width();
    ui.position.left = $(this).position().left;
} 
```

我实现了这个解决方案，试图理解 jquery.ui.resizable 代码的核心。但是，我认为有比我更可接受的答案。*

# eclipse - Eclipse 3.8 Web 开发中的项目依赖错误在 WebLogic 12 中使用 EJB 3.0

> ID：11873665
> 
> 赞同：0
> 
> 时间：2012-08-08T21:45:58.333
> 
> 标签：eclipse, weblogic, ejb-3.0

在 Eclipse 中，我创建了一个带有 EJB 项目、EJBClient 项目和一个 WebProject 的 EAR 项目。

我在 EJB 项目中创建了一个 EntityBean Person 和一个 SessionBean PersonTask。Eclipse 在 EJBClient 项目中自动创建一个 PersonTaskRemote 接口。以及在 WebProject 中创建的 Servlet 连接。

```
// at EJB Project
@Entity
public class Person {
    private int id;
    private String name;
    ...setter and getter
}

//SessionBean
public class PersonTask implements PersonTaskRemote {
  Person findPerson(int personId){
      do something;
} 
```

和

```
//In EJBClient Project
//The Interface
@Remote
public interface PersonTaskRemote {
   Person findPerson(int personId);
} 
```

通过运行，Eclipse 得到一个错误！因为它在依赖项（项目 EJB 和项目 EJBClient）中有一个循环。我能怎么做？

我在谷歌搜索过，但在所有资助的教程中，客户端帽子中的接口不是 EntityBeans。只有类似`String sayHello();`功能的东西。

我怎样才能避免这个问题？也许在客户端项目中为接口创建本地实体？

或者给我一些关于这些案例的教程。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T10:41:09.767

`Person`移至EJBClient*模块*。它显然是客户端的一部分，因为它是业务方法的返回值。之后就没有循环了，因为*EJBClient*不依赖于其他模块。

# php - Doctrine/Symfony 2：具有太多关系的实体

> ID：11873666
> 
> 赞同：0
> 
> 时间：2012-08-08T21:46:04.720
> 
> 标签：php, symfony, doctrine

我正在处理来自 Doctrine 查询的实体对象，我最终得到了一个非常大的数组，其中包含来自所有相关实体的所有信息。这最终成为一个巨大的数据树......我该如何限制呢？避免列出所有关系中的所有数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T22:54:58.423

你总是可以删除不需要的关联（这是加速 Doctrine 的最佳实践）。或者，您可以仅选择表示层中需要的字段（作为只读数据）：

```
public function getAll()
{
    $qb = $this->createQueryBuilder('u'); // Where are in User custom repository

    return $qb
        ->select(array('u.id', 'u.first', 'u.last'))
        ->getQuery()
            ->getResult();
} 
```

如果您仍然需要使用对象（或对于需要纯 SQL 的复杂查询），则可能只填充域对象所需的属性（最终，关联/嵌套集合）。

一个示例，更多关于[本机 SQL](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.1/reference/native-sql.html#resultsetmappingbuilder)的内容：

```
public function getAll()
{
    $mapping = new \Doctrine\ORM\Query\ResultSetMapping();

    $mapping->addEntityResult('Acme\HelloBundle\User', 'e');

    $mapping->addFieldResult('e', 'id', 'id');
    $mapping->addFieldResult('e', 'first', 'first');
    $mapping->addFieldResult('e', 'last', 'last');

    $sql = "SELECT id, first, last FROM user ";

    $result = $this->_em->createNativeQuery($sql, $mapping)->getResult();

    // Or hust return $result itself (array)
    return new \Doctrine\Common\Collections\ArrayCollection($result);
} 
```

当然，缺点（？）是使用本机 SQL。我不相信它`ResultSetMapping`可以与 DQL 一起使用。

**编辑**：看看[http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/best-practices.html](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/best-practices.html)

# php - 队列系统php

> ID：11873667
> 
> 赞同：3
> 
> 时间：2012-08-08T21:46:08.020
> 
> 标签：php, facebook-graph-api

我有一个网络应用程序，它运行在一个免费的、缓慢的网络服务器上。我试图弄清楚如何在我的应用程序获取数据时向用户显示“您的请求正在等待”页面。我的应用程序是一个 facebook 应用程序，运行图形 API。

图形 API 真的很慢（10 秒，当从用户的提要中获得 300 条帖子时），当然解析也需要很长时间。这是我的应用程序中的一个瓶颈，我不确定如何解决它（如果它只是 facebook 的错或我的错）。我一直在研究 fql 但显然它与图形 API 相同或更慢（因为它是图形 API）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T12:38:51.193

> 图形 API 真的很慢（从用户的提要中获取 300 条帖子时需要 10 秒）
> 
> 我正在过滤 30, 000 行新闻提要数据以仅显示状态。[来自评论]

现在什么数量级才是正确的——我们实际上是在谈论一次阅读数百或一万个帖子吗？

> 我一直在研究 fql 但显然它与图形 API 相同或更慢

您没有仔细查看... FQL 为您提供了通过邮寄过滤[`stream`表格](https://developers.facebook.com/docs/reference/fql/stream/)`type`的能力-`… WHERE type = '46'`只会为您提供状态更新。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-08T21:53:03.787

一些建议（都是客户端）：

1.  [jQuery 和进度条](http://net.tutsplus.com/tutorials/javascript-ajax/create-a-progress-bar-with-javascript/)

2.  [网络工作者](http://www.scottlogic.co.uk/2011/02/web-workers-part-2-using-jquery-deferred/)

希望有帮助

# codeigniter - 如何路由到控制器并在 codeigniter 中运行？

> ID：11873673
> 
> 赞同：-1
> 
> 时间：2012-08-08T21:46:32.510
> 
> 标签：codeigniter, codeigniter-2

例如，我需要路由到“www.url.com/controller/function”，我将代码放在路由中的“config.php”中，但是不起作用。我需要加载到同一个控制器中的视图，而不是在 url 中放置“index.php”。有可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T04:26:16.943

这是从 url 中删除 index.php 的帮助 url

[用户指南删除 index.php](http://codeigniter.com/user_guide/general/urls.html)

您必须使用**.htaccess**文件从 url 中删除 index.php

希望能帮助到你

**更新**

查看 application\config\config.php 文件，有一个名为 'index_page' 的变量

它应该看起来像这样

```
$config['index_page'] = "index.php"; 
```

将其更改为

```
$config['index_page'] = ""; 
```

这是您可以使用的 .htaccess 文件。

```
RewriteEngine on
RewriteCond $1 !^(index\.php|[Javascript / CSS / Image root Folder name(s)]|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

**这里有一些使用完整的链接..你可以关注这些..**

[删除 index.php stackoverflow](https://stackoverflow.com/questions/1445385/how-to-remove-index-php-in-codeigniters-path)
[删除 index.php codeigniter 论坛](http://codeigniter.com/forums/viewthread/155801/)
[从您的服务器启用 mod 重写](https://stackoverflow.com/questions/9619831/remove-index-php-from-codeigniter-in-xamp)

希望这些对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T05:05:00.170

默认情况下，index.php 文件将包含在您的 URL 中：

`www.url.com/index.php/controller/function`

您可以使用带有一些简单规则的 .htaccess 文件轻松删除此文件。以下是此类文件的示例，使用“否定”方法重定向除指定项目之外的所有内容：

```
RewriteEngine on
RewriteCond $1 !^(index\.php)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

将包含上述代码的 .htaccess 文件放入您的应用程序根文件夹。

# paypal - PayPal“订阅”添加到购物车，含税和运费

> ID：11873674
> 
> 赞同：2
> 
> 时间：2012-08-08T21:46:39.260
> 
> 标签：paypal, shopping-cart, subscription, shipping

有没有办法通过 PayPal 创建购物车，允许购物者将多个商品的订阅添加到购物车中，然后一次性结账。这对于定期定价的项目很容易完成，但不适用于定期订阅项目。由于它是一种实物产品，因此还需要将税费和运费添加到订阅中（基于地理位置）。PayPal 客户支持和技术论坛对解决此问题没有帮助。

随后，如果 PayPal 无法做到这一点，是否有人对其他可以处理此任务的支付处理器提出建议，例如 authorize.net ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-13T16:27:16.593

订阅按钮不会处理这个问题。他们只能在每个会话中处理单个项目的单个订阅。

我建议使用 Express Checkout。使用 Express Checkout，您可以预先向买家收取多件商品的费用，并同时设置定期付款资料。

[https://developer.paypal.com/webapps/developer/docs/classic/express-checkout/integration-guide/ECRecurringPayments/](https://developer.paypal.com/webapps/developer/docs/classic/express-checkout/integration-guide/ECRecurringPayments/)

# unix - tmux set -g 鼠标选择窗口不工作

> ID：11873677
> 
> 赞同：11
> 
> 时间：2012-08-08T21:46:44.257
> 
> 标签：unix, tmux

据我了解

```
set -g mouse-select-window on 
```

应该允许我单击状态栏中的窗口并转到该窗口。我把它放在我的 tmux.conf 文件中，当我点击一个窗口时没有任何反应。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-06T20:54:00.313

在我的 .tmux.conf 我有以下内容：

```
set -g mode-mouse on
set -g mouse-select-window on
set -g mouse-select-pane on 
```

你有`mode-mouse on`设置吗？

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-02-08T11:52:22.767

在 2.1 中，此配置已弃用，允许所有鼠标支持的新选项是：

```
set -g mouse on 
```

这打破了不错的鼠标滚动支持，但可以通过以下方式启用：

```
bind -n WheelUpPane if-shell -F -t = "#{mouse_any_flag}" "send-keys -M" "if -Ft= '#{pane_in_mode}' 'send-keys -M' 'select-pane -t=; copy-mode -e; send-keys -M'" 
```

# deployment - 是否可以在 MSI 包中添加支持以在安装后更改应用程序的文件夹？

> ID：11873678
> 
> 赞同：4
> 
> 时间：2012-08-08T21:46:46.140
> 
> 标签：deployment, wix, windows-installer

我知道更改 TARGETDIR 的唯一方法是卸载然后再次安装相同的应用程序。请注意，我需要手头有 MSI 包。

我想在我的 MSI 包中添加支持，以便在安装后更改应用程序的 TARGETDIR。此功能将由“*添加/删除*”窗口中的“*更改”*选项触发。选择该选项时，除了可以更改功能外，用户还可以更改 TARGETDIR 文件夹。

 *那可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T02:05:01.780

不，这是不可能的。一旦安装了引用它们的组件，所有目录属性（包括 INSTALLDIR、TARGETDIR、INSTALLLOCATION 或您称之为的任何其他内容）都是不可变的。您必须卸载从选择功能到整个产品的任何位置（取决于哪些功能具有使用目录的组件），以便能够重新安装功能/产品并为目录赋予新值。*

# java - 不使用 Android 的 SmsManager 发送短信 .. 原生库？

> ID：11873679
> 
> 赞同：5
> 
> 时间：2012-08-08T21:46:47.887
> 
> 标签：java, android, sms, native

我有兴趣发送带有修改后的 UDH 的文本消息或发送二进制数据文本。

`SmsManager`不支持对 UDH 的任何访问，`sendDataMessage`仅适用于*某些*GSM 手机，完全不支持 CDMA。

我已经完成了相当多的研究，并得出结论，我需要找到一种绕过 Android 标准库的方法，这听起来很糟糕。

我的第一直觉告诉我用原生 Java 来做，然后把它导入到我的应用程序中。有谁知道这是否会导致 Android 的 SMS 安全问题？此外，我很好奇 TextPlus 等应用程序如何在不使用 Android API 的情况下工作，因为它们能够在不使用手机标准短信的情况下发送“文本”。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-08T23:49:46.870

> 我已经完成了相当多的研究，并得出结论，我需要找到一种绕过 Android 标准库的方法，这听起来很糟糕。

如果通过“找到一种绕过 Android 标准库的方法”，您的真正意思是“创建我自己的 Android 操作系统的定制版本，我在其中修改它以允许我想要的，然后将该定制操作系统转换为我可以应用的 ROM 模块相对少数的设备，然后使用我公开的功能创建一个在该 ROM 模块上运行的应用程序”，然后是的，这可能是需要的。

> 我也很好奇像 TextPlus 这样的应用程序如何在不使用 Android API 的情况下工作，因为它们能够在不使用手机标准短信的情况下发送“文本”。

我想他们使用互联网。

# python - Matplotlib 将叠加标签添加到轴

> ID：11873683
> 
> 赞同：0
> 
> 时间：2012-08-08T21:47:24.937
> 
> 标签：python, matplotlib

在 matplotlib 中，我想知道将标签*覆盖*到轴上的最干净、最可靠的方法。这可能最好用一个例子来说明：

![标签](../Images/215d3b145826a6e38a1dcf2827e86d5f.png)

虽然每 5.00 个单位放置正常轴标签/刻度，但轴上已覆盖了额外的*不带刻度*的标签（这可以在 1113.75 看到，部分覆盖 1114.00 和完全覆盖的 1105.00）。标签的字体和大小也与它们正常的、勾选的、背景（如果有的话）一直到轴（就像刻度线一样）对应的字体和大小相同。

在 matplotlib 中获得这种效果的最简单方法是什么？

**编辑** 根据@Ken 的建议，我已经设法通过使用和删除刻度标记并更改标签的背景/字体/zorder来获得*现有刻度/标签的效果。*但是，我不确定如何最好地向轴添加新的刻度/标签。`ax.yaxis.get_ticklines``ax.yaxis.get_ticklabels`

换句话说，我正在寻找一个`add_tick(ax.yaxis, loc)`在位置添加刻度`loc`并返回`tickline`和`ticklabel`对象供我操作的函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T22:29:20.507

我从未尝试过这样做，但我认为[Artist 教程](http://matplotlib.sourceforge.net/users/artists.html)可能对您有所帮助。特别是，最后一节有以下代码：

```
for line in ax1.yaxis.get_ticklines():
    # line is a Line2D instance
    line.set_color('green')
    line.set_markersize(25)
    line.set_markeredgewidth(3) 
```

我认为使用类似的东西`line.set_markersize(0)`可能会使标记的大小为零。困难的部分可能是找到需要完成的部分。`line.xdata`or数组可能`line.ydata`包含足够的信息来隔离您需要的信息。当然，如果您手动添加刻度线，则可能会在您这样做时返回实例，因此您可以在创建它们时修改它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:13:56.067

我能够设计的最佳解决方案：

```
# main: axis; olocs: locations list; ocols: location colours
def overlay_labels(main, olocs, ocols):
    # Append the overlay labels as ticks
    main.yaxis.set_ticks(np.append(main.yaxis.get_ticklocs(), olocs))

    # Perform generic formatting to /all/ ticks
    # [...]

    labels  = reversed(main.yaxis.get_ticklabels())
    markers = reversed(main.yaxis.get_ticklines()[1::2]) # RHS ticks only
    glines  = reversed(main.yaxis.get_gridlines())
    rocols  = reversed(ocols)

    # Suitably format each overlay tick (colours and lines)
    for label,marker,grid,colour in izip(labels, markers, glines, rocols):
        label.set_color('white')
        label.set_backgroundcolor(colour)
        marker.set_visible(False)
        grid.set_visible(False) 
```

它不是特别优雅，但似乎确实有效。

# ios - iOS UIWebView - 仅刷新 html 文件的一部分

> ID：11873684
> 
> 赞同：0
> 
> 时间：2012-08-08T21:47:33.563
> 
> 标签：ios, uiwebview, refresh, reload

有没有办法只刷新 UIWebView 中显示的 HTML 文件的一部分？例如，如果我对正文中的 div 进行更改，有没有办法只刷新该 div 标签的内容？还是我必须将整个文件重新加载到我的 UIWebView 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T21:53:30.960

您必须重新加载整个 HTML 文件。不可能只重新加载纯 HTML 文件的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T19:41:14.037

使用一点 javascript？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T15:24:25.117

像这样使用javascript

```
NSString *js = [NSString stringWithFormat:@"document.getElementById('foo').innerHTML ='update';"];
 NSString *res = [self stringByEvaluatingJavaScriptFromString:js]; 
```

# javascript - 提取大写字母（英文） | 首选方法

> ID：11873686
> 
> 赞同：1
> 
> 时间：2012-08-08T21:47:45.040
> 
> 标签：javascript

给定一串文本

```
var string1 = 'IAmNotFoo'; 
```

你如何只提取大写字母？

```
'IANF' 
```

以下是每个链接的一些方法：

```
function isUpperCase1(aCharacter) {    
    if ( ch == ch.toUpperCase() ) {
        return true;
    }
    return false;
}

function isUpperCase2( aCharacter ) {    
    return ( aCharacter >= 'A' ) && ( aCharacter <= 'Z' );
}

var string1 = 'IAmNotFoo',
    string2 = '',
    i = 0,
    ch = '';

while ( i <= string1.length ) {
    ch = string1.charAt( i );
    if (!isNaN( ch * 1 ) ) {
        alert('character is numeric'); 
    }
    else if ( isUpperCase2() ) { // or isUpperCase1
        string2 += ch;
    }
    i++;
} 
```

或者简单地说（根据下面的评论）：

```
var upper = str.replace(/[^A-Z]/g, ''); 
```

**SO相关**

[在字符串中查找大写字符](https://stackoverflow.com/questions/6055152/finding-uppercase-characters-within-a-string)

[如何使用 JavaScript 测试字符串中的字母是大写还是小写？](https://stackoverflow.com/questions/1027224/how-can-i-test-if-a-letter-in-a-string-is-uppercase-or-lowercase-using-javascrip)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T22:10:59.753

我喜欢使用数字，所以我更喜欢转换为整数并检查 ascii 范围。你可以在这里看到这个图表 www.ascii-code.com。

所有大写字母都有一个与小写字母不同的 ascii 代码。

做这样的事情

```
String str = "IAmNoFoo";
returnCaps(str);

Public static String returnCaps(String, str)
{
    for (int i = 0; i < str.length; i++)
        {
            int letter = str.convertToInt(charAt(i));
            if (letter >= 65 || letter <= 90)
              return str.substring.charAt(i);
            else
               return "No Capital Letters Found"
        }
    } 
```

您可能需要将循环检查设置为 i <= str.length

这将检查字符串每个索引处的字符是否为大写字母。我认为用数学方式思考是最容易的。

稍作调整，您就可以很容易地将其变成递归方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T22:13:03.173

regex 方法是迄今为止最简单和最有效的方法，因为它只是一个步骤，而不是一个大循环。

# shell - 在终端/外壳中读取光标位置的内容

> ID：11873692
> 
> 赞同：3
> 
> 时间：2012-08-08T21:48:00.137
> 
> 标签：shell, terminal, text-cursor

我正在使用终端/Shell 开展一个独特的项目，但我遇到了一些我无法解决的障碍。

我希望能够读取光标位置的内容。

例如，如果光标当前位于包含 E 的第 2 行第 5 列，我希望能够读取该 E 并用它创建一个变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:51:26.593

你能解释一下你的项目需要什么吗？如果我们知道您要完成的工作可能会有所帮助。

据我所知，在 shell 中不存在执行此操作的工具。要实际读取远程屏幕，需要将此作为远程终端（或模拟器）的功能。

任何编译语言都不支持这一点。所有看起来这样做的应用程序都通过保留他们*假设的内容的内部副本来**伪造*它，这些副本显示在屏幕上。

 *查找[curses](http://en.wikipedia.org/wiki/Curses_%28programming_library%29) * 库以获取更多信息。该工具包允许程序员将屏幕寻址为随机可访问的网格，并隐藏对实际终端屏幕的所有更新。

参见：[ncurses](http://en.wikipedia.org/wiki/Ncurses)*

# c++ - 如何以依赖于模板类型名的方式提高 C++ 模板的精度？

> ID：11873694
> 
> 赞同：4
> 
> 时间：2012-08-08T21:48:06.097
> 
> 标签：c++, templates, stl

我有一个模板化的数学函数，它接受两个值，对它们进行一些数学运算，然后返回一个相同类型的值。

```
template <typename T>
T math_function(T a, T b) {
  LongT x = MATH_OP1(a,b);
  return MATH_OP2(x,a);
} 
```

我想将中间值（在 x 中）存储在一个基本上是 T 的长版本（上面称为 LongT）的类型中。所以，如果 T 是浮点数，我希望 x 是双精度数；如果 T 是一个 int，我希望 x 是一个 long int。

有没有办法做到这一点？我试过`enable_if`了，但似乎我真的需要一个`enable_if_else`.

我宁愿让编译器自己弄清楚 LongT 使用什么。我宁愿在调用函数时不必指定它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T21:56:24.743

您可以定义将产生所需类型的类型映射：

```
template <typename T> struct long_type;
template <> struct long_type<int> {
   typedef long type;
};
template <> struct long_type<float> {
   typedef double type;
}; 
```

然后使用该元功能：

```
template <typename T>
T math_function(T a, T b) {
  typename long_type<T>::type x = MATH_OP1(a,b);
  return static_cast<T>(MATH_OP2(x,a));
} 
```

使用此特定实现，您的模板将无法针对您提供特征的类型以外的任何类型进行编译`long_type`。您可能希望提供一个仅映射到自身的通用版本，这样如果输入就是`long long int`所使用的（假设您的体系结构中没有更大的类型）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-08T21:56:34.507

例如，假设您不需要处理，只需为and`T=long`创建特征：`int``float`

```
template <typename T>
struct LongT;

template <>
struct LongT<int>
{
    typedef long value_type;
};

template <>
struct LongT<float>
{
    typedef double value_type;
};

template <typename T>
T math_function(T a, T b) {
  typename LongT<T>::value_type x = MATH_OP1(a,b);
  return MATH_OP2(x,a);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-08T22:13:46.397

在 C++11 中，您可以使用`auto`关键字来检索`MATH_OP`. 它是安全的并由编译器处理。

```
auto x = MATH_OP1(a,b); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T12:55:42.053

```
template<typename T> struct LongT  {typedef T type;}

template<> struct LongT<int8_t>    {typedef int16_t type;}
template<> struct LongT<int16_t>   {typedef int32_t type;}
template<> struct LongT<int32_t>   {typedef int64_t type;}
template<> struct LongT<int64_t>   {typedef intmax_t type;}
// same for unsigned ...

template<> struct LongT<float>     {typedef double type;}
// template<> struct LongT<double> {typedef long double type;} 
```

像这样使用：

```
typename LongT<T>::type  x; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-08T22:03:00.030

您可以编写自己的结构的专业化，或使用类似的东西

```
#include <type_traits>

template<typename T>
void func(const T& f, const T& s)
{
   typename std::conditional
   <
      std::is_same<T, float>::value,
      double,
      typename std::conditional
      <
        std::is_same<T, int>::value,
        long,
        void
      >::type
   >::type X(f + s);
   (void)X;
}

int main()
{
   func(1, 1);
   func(1.0f, 1.0f);
   func(1.0, 1.0);
} 
```

[http://liveworkspace.org/code/8f75236b880a3fe210a8751e485a47ed](http://liveworkspace.org/code/8f75236b880a3fe210a8751e485a47ed)

但是写你自己的专业，因为大卫或马克很聪明。

# javascript - jQuery stopPropagation - 函数再次启动

> ID：11873700
> 
> 赞同：0
> 
> 时间：2012-08-08T21:48:31.807
> 
> 标签：javascript, jquery, scroll, bind, event-propagation

你能告诉我如何停止函数传播吗？第一次单击操作后，我需要再次启动某些功能。我使用 scrollTo jquery 插件来滚动我的内容，当我点击我的“fire”按钮内容滚动时很好，但我不能再这样做了...... Thx 4 帮助。

这是我的功能：

```
$('.arrow_down').bind('click', function(event){
    $('.recipe_single_view_right_panel').scrollTo({top:'280px', left:'0'}, 800 );
    event.stopPropagation();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T23:29:58.320

您不需要使用功能丰富的大型插件来实现这一目标。

您需要做的就是更改`scrollTop`包装元素的 - 属性。我用一个简单的例子创建了一个小提琴：http: [//jsfiddle.net/k9bdY/](http://jsfiddle.net/k9bdY/)

包装元素设置为`overflow: scroll`，在单击时为滚动位置设置动画非常简单，然后使用 jQuery 时：

```
$('.scroll-btn').on("click", function(e){
    e.preventDefault();

    $('#wrapper').animate({
        scrollTop: "+=200px"            
    }, 800);
});​ 
```

# python - 我需要了解 Python 才能使用 OpenCV

> ID：11873705
> 
> 赞同：-1
> 
> 时间：2012-08-08T21:48:44.107
> 
> 标签：python, opencv

我需要将 OPenCV 用于一个项目。我的问题是在使用 OpenCV 之前我需要了解 Python 吗？（仅供参考，我不适合 C/C++）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:52:04.833

您可能会使用 C/C++ 找到最佳结果。据我所知，它只有 Python 或 C/C++ 库。也许是Java？在任何情况下，您都需要知道您选择的任何语言才能使用它。它是一组库，而不是独立的语言。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-08T21:51:23.910

是的你是。其他选择是**C/C++**。

# css - 流体宽度表中的响应图像（最大宽度）

> ID：11873706
> 
> 赞同：7
> 
> 时间：2012-08-08T21:48:44.777
> 
> 标签：css, responsive-design, css-tables, fluid-layout

考虑以下代码：

**HTML：**

```
<div>
    <img src="http://placehold.it/600x150" />
</div> 
```

**CSS：**

```
div { max-width: 200px }
img { max-width: 100%  }​ 
```

图像的宽度永远不会超过 200 像素，无论其原始尺寸如何。到目前为止，一切都很好。

这是小提琴：http: [//jsfiddle.net/PeAAb/](http://jsfiddle.net/PeAAb/)

* * *

但是，如果父元素`display`设置为`table`：

```
div { max-width: 200px; display: table } 
```

图像神奇地扩展到其原始宽度，并`table`随之扩展。

这是小提琴：http: [//jsfiddle.net/PeAAb/1/](http://jsfiddle.net/PeAAb/1/)

* * *

实际表也会发生同样的情况：http: [//jsfiddle.net/PeAAb/2/](http://jsfiddle.net/PeAAb/2/)

* * *

**问题：**这是预期的行为吗？如果是这样，可以做些什么来解决这个问题？

设置父`width`级（甚至是基于百分比的宽度）而不是`max-width`正确地将图像压缩回其框中，但这不是解决方案。我需要父级是流畅的（我将它用于网站的主要结构，以便我可以让[侧边栏 HTML 出现在源中的主要内容之后，但侧边栏的宽度是固定的](http://jsfiddle.net/89GME/)）。

此外，[设置`table-layout`为`fixed`](https://stackoverflow.com/questions/9147255/why-doesnt-ie-respect-table-width-with-fluid-image-child#answer-9147563)似乎在这里[没有效果](http://jsfiddle.net/PeAAb/3/)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T22:06:48.530

这里的问题是表格（或设置为像表格一样的 div）不是块元素，并且 max-width 仅适用于块元素。我对您的唯一建议是将表格元素包装在带有 display: block; 的 div 中。放。

如果您有兴趣，这是小提琴：http: [//jsfiddle.net/PeAAb/4/](http://jsfiddle.net/PeAAb/4/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-01-04T01:09:32.547

我知道这已经很晚了，但找到了答案，结果非常简单且超级容易，表格布局：已修复。

在这里找到：http: [//blog.room34.com/archives/5042](http://blog.room34.com/archives/5042)

无论如何，这是为那些像我一样寻找这个难题的答案的人准备的。

# java - SSLException：SSL 对等方错误关闭

> ID：11873709
> 
> 赞同：9
> 
> 时间：2012-08-08T21:48:55.503
> 
> 标签：java, ssl, ant, network-programming, jetty

在我的客户端 Ant 任务中，从 Jetty 服务器下载文件，我偶尔会得到一个

```
javax.net.ssl.SSLException: SSL peer shut down incorrectly 
at com.sun.net.ssl.internal.ssl.InputRecord.readV3Record(InputRecord.java:408)
at com.sun.net.ssl.internal.ssl.InputRecord.read(InputRecord.java:360)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:789) 
```

我已经用谷歌搜索了一下——但到目前为止，我还没有一个关于为什么会发生这种情况的结论性答案。

谁能解释这个异常的根本原因是什么？

我的 Jetty 日志似乎没有此异常的等效跟踪。但是，Jetty 服务器似乎确实在终止安全连接。

作为背景知识 - 当 Ant 任务产生的两个客户端使用相同的证书从 Jetty 服务器下载预定文件时，我看到了这个异常。我唯一的怀疑是来自同一主机的两个客户端提供相同的证书会使 Jetty 跳闸并最终关闭连接 - 但这只是一个未经证实的理论。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T23:06:30.430

如果您有一个包装在 SSLSocket 中的纯文本套接字并且您关闭了纯文本套接字而不是 SSLSocket，则可能会导致此问题。例外是警告可能的截断攻击。

当然它也可能是由*真正的*截断攻击引起的。

# html - 我想使用html在表格的每一行旁边添加一个复选框

> ID：11873711
> 
> 赞同：6
> 
> 时间：2012-08-08T21:49:05.780
> 
> 标签：html, checkbox, html-table, row

如何使用 html 在表格中的每一行旁边添加一个复选框。如何使用以下行添加它：

```
<td>    &nbsp;   </td>
<td>   &nbsp;    </td> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-08T21:50:58.780

```
<td><input type="checkbox" name="name1" />&nbsp;</td>
<td><input type="checkbox" name="name2" />&nbsp;</td> 
```

像那样。这是一个非常基本的问题，因此您可能想提供更多关于您想要什么的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T21:51:45.440

```
<td><input type="checkbox" />    &nbsp;   </td>
<td><input type="checkbox" />    &nbsp;   </td>
<td><input type="checkbox" />    &nbsp;   </td> 
```

等等...

# python - 我如何获得纽约市时间？

> ID：11873714
> 
> 赞同：6
> 
> 时间：2012-08-08T21:49:47.837
> 
> 标签：python

我经常旅行，但住在纽约市，无论我身在何处，我都试图显示纽约市的时间。我如何在 Python 中做到这一点？我有以下，这不起作用，给我错误：

```
 `'module' object is not callable` 
```

另外，我不确定我下面的方法是否会正确更新夏令时：

```
import pytz
utc = pytz.utc
utc_dt = datetime(2002, 10, 27, 6, 0, 0, tzinfo=utc)
eastern = pytz.timezone('US/Eastern')
loc_dt = utc_dt.astimezone(eastern)
fmt = '%Y-%m-%d %H:%M:%S %Z%z'
loc_dt.strftime(fmt) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-08T21:53:01.100

而不是`datetime`，写`datetime.datetime`：

```
import datetime
import pytz

utc = pytz.utc
utc_dt = datetime.datetime(2002, 10, 27, 6, 0, 0, tzinfo=utc)
eastern = pytz.timezone('US/Eastern')
loc_dt = utc_dt.astimezone(eastern)
fmt = '%Y-%m-%d %H:%M:%S %Z%z'
loc_dt.strftime(fmt) 
```

那是因为模块[datetime](http://docs.python.org/library/datetime.html)包含一个 class [`datetime.datetime`](http://docs.python.org/library/datetime.html#datetime.datetime)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-07-03T13:39:19.227

您可以通过以下方式使用该方法获取`datetime`特定时区中当前时间的对象：`now()`

```
import datetime, pytz
nyc_datetime = datetime.datetime.now(pytz.timezone('US/Eastern')) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-04-21T19:54:22.863

像这样编写导入更简洁：

```
from datetime import datetime
import pytz
now = datetime.now(tz=pytz.timezone('US/Eastern')) 
```

这允许在代码中进一步重复使用 datetime，而不必每次都使用 datetime.datetime。还避免了不必要地导入整个 datetime 模块。

另请注意，根据 IANA，“美国/东部”已被弃用。也许考虑“美国/纽约”

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-11-06T23:26:04.270

我会这样做：

```
import datetime
import pytz
now = datetime.datetime.now(tz=pytz.timezone('US/Eastern'))
print("now time is: ", now)
current_hour = now.hour
current_minute = now.minute
current_second = now.second
current_weekday = now.weekday() 
```

# macos - MacOSX Bash App Bundle 作为 Sudo

> ID：11873715
> 
> 赞同：0
> 
> 时间：2012-08-08T21:49:49.113
> 
> 标签：macos, bash, bundle, sudo

我正在开发一个简单的小 mac 应用程序，它在打开时运行一个 bash 脚本。我的问题是，bash 脚本要求调用 sudo 命令！不幸的是，当我尝试在 bash 中执行任何 sudo 命令时，应用程序就会崩溃。

我的应用程序/捆绑包层次结构非常简单：

```
myapp.app
--Contents
----MacOs
------myapp (the bash script) 
```

而已。

看到使用 sudo 显然是行不通的，我有没有办法让应用程序向用户询问密码，然后以 sudo 运行它的 bash 脚本？然后我可以删除 sudo 前缀，理论上一切都会正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T22:31:12.457

似乎有了沙盒，Mac下的授权变得困难（[https://developer.apple.com/library/mac/#documentation/Security/Conceptual/authorization_concepts/01introduction/introduction.html](https://developer.apple.com/library/mac/#documentation/Security/Conceptual/authorization_concepts/01introduction/introduction.html)）

也许你可以在这里找到一些信息：

[https://developer.apple.com/library/mac/#documentation/Security/Conceptual/AppSandboxDesignGuide/AboutAppSandbox/AboutAppSandbox.html](https://developer.apple.com/library/mac/#documentation/Security/Conceptual/AppSandboxDesignGuide/AboutAppSandbox/AboutAppSandbox.html)

# php - 在 PHP 中绘制图像并且没有图像被显示

> ID：11873720
> 
> 赞同：0
> 
> 时间：2012-08-08T21:50:21.133
> 
> 标签：php, image, gd

伙计们，我有大约 288 个点及其 X、Y 坐标和分配给它们的值。我需要形象地展示这一点。我尝试了 gd 和 imagettftext，但是即使我已经安装和配置了 gd，绘制空白图像的简单代码也不起作用。

```
header('Content-Type: image/png');

$image = imagecreatetruecolor(400, 300);

// Allocate a color for the polygon
$col_poly = imagecolorallocate($image, 255, 255, 255);

// Draw the polygon
imagepolygon($image, array(
        0,   0,
        100, 200,
        300, 200
    ),
    3,
    $col_poly);

// Output the picture to the browser
header('Content-type: image/png');

imagepng($image);
imagedestroy($image); 
```

浏览器中的输出是 ![没有图像](../Images/fb897c3c6c14d89769719609dca67cb7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T18:32:50.483

尝试使用您的代码将 php 文件的编码设置为**不带 BOM 的 UTF-8**（例如在 Notepad++ 中）。

![在此处输入图像描述](../Images/cdc72e4da74b3f436363eff48f4dadbd.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T21:56:40.857

您的代码工作正常，图像显示。很可能您的 GD 库没有按预期工作。尝试这个

```
$image = imagecreatetruecolor(400, 300) or die('Cannot Initialize new GD image stream'); 
```

# javascript - jQuery .val 更改不会更改输入值

> ID：11873721
> 
> 赞同：111
> 
> 时间：2012-08-08T21:50:20.987
> 
> 标签：javascript, jquery

我有一个 HTML 输入，值中有一个链接。

```
<input type = 'text' value = 'http://www.link.com' id = 'link' /> 
```

我正在使用 jQuery 来更改某个事件的值。

```
$('#link').val('new value'); 
```

上面的代码改变了文本框的值，但没有改变代码中的值（value = 'http://www.link.com' 保持不变）。我也需要 value = '' 来改变。

* * *

## 回答 #1

> 赞同：206
> 
> 时间：2012-08-08T21:54:02.087

改为使用`attr`。
`$('#link').attr('value', 'new value');`

[演示](http://jsfiddle.net/XWNmd/1/)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-08T21:53:53.617

更改 value 属性不会更改`defaultValue`. 在代码中（使用`.html()`or检索`innerHTML`）， value 属性将包含`defaultValue`，而不是 value 属性。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-03-19T11:36:03.403

扩展一下里卡多的答案：[https ://stackoverflow.com/a/11873775/7672426](https://stackoverflow.com/a/11873775/7672426)

[http://api.jquery.com/val/#val2](http://api.jquery.com/val/#val2)

关于 val()

> 使用此方法（或使用本机 value 属性）设置值不会导致更改事件的调度。因此，不会执行相关的事件处理程序。如果要执行它们，则应在设置值后调用 .trigger("change")。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-08-25T21:20:30.340

```
$('#link').prop('value', 'new value'); 
```

说明： Attr 将在 jQuery 1.6 上工作，但从 jQuery 1.6.1 开始，情况发生了变化。在大多数情况下， prop() 执行 attr() 过去所做的事情。在您的代码中用 prop() 替换对 attr() 的调用通常会起作用。Attr 将为您提供元素的值，因为它在页面加载时在 html 中定义，prop 提供通过 jQuery 修改的元素的更新值。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-12-19T13:53:03.243

这只是发生在我身上的一种可能的情况。好吧，如果它对某人有帮助，那就太好了：我编写了一个复杂的应用程序，在代码的某处，我使用了一个函数来清除所有文本框的值，然后再显示它们。一段时间后，我尝试使用 jquery val('value') 设置文本框值，但我没有注意到在那之后我调用了 ClearAllInputs 方法。所以，这也可能发生。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-01T19:58:43.683

我的类似问题是由选择器中的特殊字符（例如句点）引起的。

解决方法是转义特殊字符：

```
$("#dots\\.er\\.bad").val("mmmk"); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-04-14T09:52:42.303

对我来说，问题是更改此字段的值不起作用：

```
$('#cardNumber').val(maskNumber); 
```

上面的解决方案都不适合我，所以我进一步调查并发现：

根据 DOM Level 2 事件规范： change 事件发生在控件失去输入焦点并且在获得焦点后其值已被修改时。这意味着更改事件旨在通过用户交互触发更改。程序化更改不会导致触发此事件。

解决方案是添加触发功能并使其触发更改事件，如下所示：

```
$('#cardNumber').val(maskNumber).trigger('change'); 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2014-02-27T07:45:55.417

```
<script src="//code.jquery.com/jquery.min.js"></script>
<script>
function changes() {
$('#link').val('new value');
}
</script>
<button onclick="changes()">a</button>
<input type='text' value='http://www.link.com' id='link'> 
```

# shell - 如何使用 grep/sed/awk 从一行中提取多个模式并将它们合并到输出中

> ID：11873722
> 
> 赞同：0
> 
> 时间：2012-08-08T21:50:25.563
> 
> 标签：shell, sed, awk, grep

我有一行表格

```
bla bla bla RequestId=ABCD1234EFGH bla bla bla bla ResponseId=IJKL5678MNOP bla bla bla 
```

我需要从这一行获取 RequestId 和 ResponseId 并用分隔符输出它们。例如，对于这个特定的行，它将是

`ABCD1234EFGH|IJKL5678MNOP`

我可以提取其中一个值，`grep -oe "RequestId=[0-9|a-z|A-Z|-]*"`但我怎样才能同时获得这两个值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T22:02:58.337

像这样的东西怎么样：

```
awk '{
    if (!match($0, /RequestId=([-0-9a-zA-Z]*)/)) next;
    req = (substr($0, RSTART + 10, RLENGTH - 10));
    if (!match($0, /ResponseId=([-0-9a-zA-Z]*)/)) next;
    res = (substr($0, RSTART + 11, RLENGTH - 11));
    printf("%s|%s\n", req, res);
}' yourFile.txt 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T18:43:42.900

```
awk '{
for(i = 1; i <= NF; i++) {
    if($i ~ /^Req/) { 
        printf $i"|||"
    }
    else {
        if($i ~ /^Res/) {
            print $i 
            }
        }
    }  
}' myfile.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-28T11:29:30.563

Using perl:

```
$ perl -nE '$,="|"; say /(?:Request|Response)Id=([-0-9a-zA-Z]*)/g' file
ABCD1234EFGH|IJKL5678MNOP 
```

# database - 托管数据库：如何处理延迟？

> ID：11873725
> 
> 赞同：5
> 
> 时间：2012-08-08T21:50:47.780
> 
> 标签：database, cloud-hosting, cloudant

我读了一些关于托管（又名云）数据库的东西。例如[，Cloudant](http://cloudant.com/)提供托管的 CouchDB 数据库，或者[Cassandra.io](http://cassandra.io/)提供托管的 Cassandra。我理解为什么这些服务可以解决一些问题。

我的问题：为什么这些服务有效？我想我将自己的应用程序托管在自己的服务器上（或云托管平台上的某个地方），并使用其中一种服务来存储我的数据。对于每个数据库请求（读取或写入），我需要通过 Internet 支付完整的往返费用（假设我的应用程序与我的数据库云提供商使用的位置不同）。**为什么这些往返不会杀死我？**在考虑 SQL 时，每个查询仅针对网络就会花费 x*10ms，而无需花费任何时间。

这个问题是如何解决的？或者这些服务不适合需要快速响应并且只能用于延迟不是问题的数据处理的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T20:00:24.037

通常，托管数据库服务的物理主机通常驻留在主要数据中心（例如 AWS）中。为了减少网络延迟，客户可以选择是否将他们的应用程序托管在与托管数据库所在的物理数据中心相同的服务器上。

大多数不使用托管数据库服务的高性能应用程序和/或网站通常出于性能原因将其应用程序服务器和数据库服务器维护在不同的主机上。因此，简而言之，切换到托管数据库服务不一定会增加网络延迟。

# objective-c - 嵌套 NSManagedObjectContext 保存和 objectID

> ID：11873726
> 
> 赞同：6
> 
> 时间：2012-08-08T21:50:50.630
> 
> 标签：objective-c, ios5, core-data

childContext 和 parentContext 都是“NSMainQueueConcurrencyType”

```
[childContext performBlock:^(void) {
  [childContext save:NULL];

  [parentContext performBlock:^(void) {
    [parentContext save:NULL];
    // Why is objectID for the inserted NSManagedObject still a temporary one here?
  }];
}]; 
```

问题：

1.  这是保存子上下文和父上下文的正确方法吗
2.  为什么保存后插入的NSManagedObject的objectID还是临时的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T03:59:02.120

我可以想到一些罕见的情况，您希望将主队列 MOC 作为另一个主队列 MOC 的子队列，但看到这一点肯定会问我：让它们都成为 NSMainQueueConcurrencyType 有什么好处？

此外，这是一个已知的错误（至少它已被多次报告）。当您从子上下文插入和保存时，只有直接连接到持久存储的那个才会改变其 ID。因此，在保存新插入的项目时，您有多种选择。

1.  保存前获取永久 ID。
2.  调用`[moc refreshObject:object mergeChanges:NO]`并将所有引用设置为 nil。
3.  在大多数父级保存后获取永久 ID

我更喜欢#3，因为它需要深入了解数据库。如果你之后这样做，它可以从父母那里得到它们。

# vim - Vim CtrlP 插件：手动设置根搜索目录？

> ID：11873736
> 
> 赞同：26
> 
> 时间：2012-08-08T21:51:42.657
> 
> 标签：vim, vim-plugin

我已经阅读了文档，但无法确定这是否可能。

我想保留默认设置`g:ctrlp_working_path_mode = 2`，但如果需要，我希望能够手动覆盖当前窗口中的所有缓冲区。

具体来说，我想发出一个 ctrlp 命令或更改一个设置根搜索目录的 ctrlp 配置变量，这样无论我在哪个缓冲区中，都使用该目录进行所有未来的搜索。

**奖励问题**：是否可以设置两个根目录，以便搜索它们并组合结果？

谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-18T22:34:07.040

试试这个：

> 让 g:ctrlp_working_path_mode = 'ra'
> 
> 'c' - 当前文件的目录。
> 
> 'r' - 包含以下目录或文件之一的最近祖先：.git .hg .svn .bzr
> 
> 'a' - 与 c 类似，但前提是 CtrlP 之外的当前工作目录不是当前文件目录的直接祖先。
> 
> 0 或 ''（空字符串）- 禁用此功能。

来源：[https ://github.com/kien/ctrlp.vim](https://github.com/kien/ctrlp.vim)

另外，在这里：[https](https://github.com/kien/ctrlp.vim/issues/292) ://github.com/kien/ctrlp.vim/issues/292 ，作者提供了一种设置完整路径的方法：

```
:CtrlP /var/www/myproject/bla/bla/theme 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-10-07T13:53:05.800

我用：

```
let g:ctrlp_cmd='CtrlP :pwd' 
```

这将 ctrlp 突击队重新映射到 :ctrlp :pwd

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-10-14T09:25:31.480

您可以在 vimrc 中使用以下内容

```
noremap <C-a> :CtrlP /yourdir/<CR> 
```

每当您按`ctrl+a`ctrlp 时，都会将 /yourdir/ 作为根目录

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-07-20T23:02:34.110

Ctrlp 触发对当前工作目录的搜索。因此，虽然您可以设置默认 g:ctrlp_working_path_mode = 2 ，但您可以通过更改密码轻松覆盖当前窗口。例子

（默认情况下）

`:pwd tmp/vim/usr`

你想把它改成 tmp 只是为了

`:cd ../../`

现在运行 ctrlp

# python - 在 numpy 的范围内采样随机浮点数

> ID：11873741
> 
> 赞同：44
> 
> 时间：2012-08-08T21:52:06.500
> 
> 标签：python, numpy, scipy

如何在 numpy 的区间 [a, b] 上对随机浮点数进行采样？不仅仅是整数，而是任何实数。例如，

`random_float(5, 10)`

将返回 之间的随机数`[5, 10]`。谢谢。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-08-08T21:56:14.663

[均匀分布](https://numpy.org/doc/stable/reference/random/generated/numpy.random.uniform.html)可能会满足您的要求。

```
np.random.uniform(5,10) # A single value
np.random.uniform(5,10,[2,3]) # A 2x3 array 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-08T22:05:40.740

如果没有 numpy，您可以使用 random 模块执行此操作。

```
import random
random.random()*5 + 10 
```

将返回 10-15 范围内的数字，作为函数：

```
>>> import random
>>> def random_float(low, high):
...     return random.random()*(high-low) + low
...
>>> random_float(5,10)
9.3199502283292208
>>> random_float(5,10)
7.8762002129171185
>>> random_float(5,10)
8.0522023132650808 
```

`random.random()`返回从 0 到 1 的浮点数（不包括上限）。将其乘以一个数字会使其范围更大。ex`random.random()*5`返回从 0 到 5 的数字。向此添加一个数字提供了一个下限。`random.random()*5 +10`返回从 10 到 15 的数字。我不确定您为什么要使用 numpy 完成此操作，但也许我误解了您的意图。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-08T21:55:43.027

```
import numpy as np
>>> 5 + np.random.sample(10) * 5
array([ 7.14292096,  6.84837089,  6.38203972,  8.80365208,  9.06627847,
        5.69871186,  6.37734538,  9.60618347,  9.34319843,  8.63550653]) 
```

# html - IE8+ 中输入元素的边框半径

> ID：11873743
> 
> 赞同：0
> 
> 时间：2012-08-08T21:52:12.997
> 
> 标签：html, css

无论我做什么，我似乎都无法获得边界半径。我正在运行最新的 Internet Explorer，但没有任何反应。我已经进入开发人员工具并将渲染设置为 ie9，但它仍然拒绝阅读：

```
 border-radius: 4px; 
```

据我了解，ie9 实际上支持这个 CSS3 元素。我做错了吗？我试图让浏览器或多或少地看到相同的页面。有什么建议吗？任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T08:15:59.857

我建议您定义所有边框属性。这是一个例子；

```
input{
border: solid 4px #06C;
-webkit-border-radius: 20px;
-moz-border-radius: 20px;
border-radius: 20px;
height: 40px;
width: 100px
} 
```

***[这](http://jsfiddle.net/blasteralfred/aYMZz/)***是一个有效的现场演示，在我的 IE9 中运行流畅。

注意：**[这](http://www.findmebyip.com/litmus/)**是支持 CSS3 的浏览器列表，其他浏览器不支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T22:01:43.500

尝试添加以下一些内容：

```
border-radius: 4px 0 0 0;
-webkit-border-radius: 4px 0 0 0;
-moz-border-radius: 4px 0 0 0; 
```

确保这些项目位于您尝试应用于表单元素的正确 css 类中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-08T22:07:40.093

您有一个[用于创建边界半径 css 代码的网站](http://border-radius.com/)

```
border-radius : 4px; // for new ie, opera, chrome, firefox 
```

是**新**浏览器的**新**W3C 规范，

 **如果您可以对旧浏览器使用边框半径，则可以使用

```
-webkit-border-radius : 4px; // for old chrome, old safari
-moz-border-radius : 4px;  // for old firefox
-o-border-radius : 4px;  // for old opera version 
```

对于旧的 ie 版本，你想使用[CSS3PIE](http://css3pie.com/)。**

# objective-c - 从块中访问属性，Objective C

> ID：11873744
> 
> 赞同：0
> 
> 时间：2012-08-08T21:52:13.830
> 
> 标签：objective-c, xcode, properties, queue, block

嗨，我正在尝试将队列和块用于多线程，但我无法从这些块中访问属性。当我使用 NSLog 打印 self.photoArray 的值时，我得到空值。有人可以解释我做错了什么吗？我试过这个

```
 dispatch_queue_t downloadQueue = dispatch_queue_create("flickrDownload", NULL);

    dispatch_async(downloadQueue, ^{                                 

        NSArray* photos = [FlickrPhotoSort sortTopPlaces];

        dispatch_async(dispatch_get_main_queue(), ^{

            self.photoArray = photos; });

    });

    dispatch_release(downloadQueue); 
```

而这不使用主队列。

```
 dispatch_queue_t downloadQueue = dispatch_queue_create("flickrDownload", NULL);

dispatch_async(downloadQueue, ^{                                 

    NSArray* photos = [FlickrPhotoSort sortTopPlaces];

        self.photoArray = photos; 

});

dispatch_release(downloadQueue); 
```

这是 photoArray 的设置器

```
-(void) setPhotoArray:(NSArray *)photoArray{
    if(!_photoArray) _photoArray = [[NSArray alloc] initWithArray:photoArray];
else 
    _photoArray = photoArray;

} 
```

我正在关注斯坦福的在线课程，老师只是这样称呼该物业，它似乎有效

```
dispatch_queue_t downloadQueue = dispatch_queue_create("flickr downloader", NULL);
    dispatch_async(downloadQueue, ^{
        NSArray *photos = [FlickrFetcher recentGeoreferencedPhotos];
        dispatch_async(dispatch_get_main_queue(), ^{
            self.navigationItem.rightBarButtonItem = sender;
            self.photos = photos;
        });
    });
    dispatch_release(downloadQueue); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T22:30:22.557

> 当我使用 NSLog 打印 self.photoArray 的值时，我得到空值。

`[FlickrPhotoSort sortTopPlaces]`当您点击日志语句并且尚未设置属性时，异步运行可能仍在运行。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-08T22:12:10.627

由于属性调用方法调用，我在块内设置它们没有问题。__block 仅将可见性添加到块范围之外的变量 - 以便在块范围之外看到从块内对变量的更改。它仅对直接在块中使用 var （无论是否为 ivars）对属性没有影响。属性不是 ivars，它们是对在块范围之外设置 ivar 的类的显式方法调用。

不过，您*应该*在设置器中保留照片阵列 - 否则阵列将在块的末尾释放。我在块中拥有大量代码设置属性，没有任何问题。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-08T22:01:12.493

在块中使用 iVar 的关键字`__block`。这可以确保该属性保留在内存中。如果您使用 ARC 和 5.0 之前的版本，请使用`__unsafe_unretained`else`__weak`

```
__block NSArray *bPhotoArray = self.bPhotoArray;
dispatch_async(downloadQueue, ^{                                 

    NSArray* photos = [FlickrPhotoSort sortTopPlaces];
        bPhotoArray = photos; 
}); 
```

# syntax - 如何从另一个 vbscript 执行 vbscript？

> ID：11873746
> 
> 赞同：0
> 
> 时间：2012-08-08T21:52:15.637
> 
> 标签：syntax, vbscript

例如，如果我有两个 vbscript 文件：`A.vbs`和`B.vbs`. 我希望 B.vbs 中的 vbscript 执行 A.vbs，这样的伪代码如下所示：

```
'B.vbs
execute("A.vbs") 
```

就像这一行一样简单，但我真的找不到有效的语法来完成这样的任务。希望有人能帮帮我，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T22:06:27.857

```
Dim oShell 
Set oShell = Wscript.CreateObject("WScript.Shell")
oShell.Run "name_of_vbs_file_here.vbs"   
Set oShell = Nothing 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T23:44:39.200

以下将执行 a.vbs，因为它是调用脚本本身的一部分

```
include "a.vbs" 

sub include(script)
  dim fso, file
  set fso = createObject ("Scripting.Filesystemobject")
  if fso.FileExists (script) then 
    set file = fso.OpenTextFile (script)
    executeGlobal file.ReadAll ()
    file.Close 
    set file = nothing 
  end if 
  set fso = nothing 
end sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-01T23:52:16.313

```
Dim Shell
Set Shell = CreateObject ("WScript.Shell")
Shell.Run "a.vbs" 
```

您还可以通过添加诸如“SendKeys”或其他 Shell 之类的东西来增加它的趣味性。

# sql - 使用 Oracle 时 SQL 报表生成器很慢

> ID：11873748
> 
> 赞同：-2
> 
> 时间：2012-08-08T21:52:22.507
> 
> 标签：sql, oracle, sharepoint, report, builder

每次我们咨询 SQL Report Builder 时，创建此报告都需要 15 分钟或更长时间。数据位于 Oracle 数据库中，我们使用本机连接器（我们也尝试过其他连接器），但我们需要 x64 连接器，因为我们将在 Sharepoint 中发布这些报告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:28:06.083

我们使用特殊的代码来解决这个问题，而且服务器也很慢

这解决了我的问题代码是 Omite Oracle Connection Name=True

# jsf-2 - Jmeter 在 Post 请求中传递 JSF 视图状态

> ID：11873750
> 
> 赞同：3
> 
> 时间：2012-08-08T21:52:24.980
> 
> 标签：jsf-2, jmeter

我正在评估用于对我们的 JSF 应用程序进行负载测试的 JMeter。

我按照下面的链接找到了将 JSF View State Id 从一个请求传递给另一个请求的方法，并且它有效。 [http://wiki.apache.org/myfaces/PerformanceTestingWithJMeter](http://wiki.apache.org/myfaces/PerformanceTestingWithJMeter)

我可以看到 JSF 视图状态 ID 被传递，但问题是字符串被修改如下并导致视图过期异常。

```
Actual JSF View State returned from GET :5843186584364912760:4842974224399060609
  The subsequent POST request send this :5843186584364912760%3A4842974224399060609 
```

中间的“：”字符被替换为 %3A（十六进制值），有没有办法绕过这个并将确切的字符串从一个请求传递给另一个请求。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T06:26:01.977

标记此参数，使其不会被编码。

这是帖子参数中的一个复选框，称为“编码？”

[http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Request](http://jmeter.apache.org/usermanual/component_reference.html#HTTP_Request)

# php - 数据映射器应该如何返回域对象？

> ID：11873752
> 
> 赞同：3
> 
> 时间：2012-08-08T21:52:39.827
> 
> 标签：php, datamapper, domain-object, poeaa

在我的模型层中，我有数据映射器、域对象和“服务”（位于模型层之外）。我选择实现 DomainObjectFactory 和 DataMapperFactory，这让我陷入了 DM<->DO 关系。理想情况下，数据映射器将为执行“get”/“read”的每个方法返回相关域对象的实例（或实例数组），但数据映射器无权访问域对象工厂。

如果没有 DM 和 DO 上的工厂模式，自动加载器可以在 DM 中接管，以便可以创建 DO 的实例。但是，这是如何通过工厂实现的呢？

我能想到的一种可能的解决方案是将相关域对象的实例传递给数据映射器方法，例如：

```
 $user = $this->domainObjectFactory->build('user');
    $mapper = $this->dataMapperFactory->build('userMapper');

    //Pass an [empty] user DO to the DM, which will be returned back
    $mapper->getById($someIDValue, $user); 
```

这个选项看起来很脏，但它适用于单个 get 方法。然而，在处理返回域对象数组时，它在语义上脱轨了，所以显然这不是实现这一目标的最佳方法......另一个选择是允许数据映射器访问域对象工厂，但这会变成大规模的 LOD/SRP 违规。

**简而言之：** *数据映射器如何访问域对象工厂才能返回域对象？*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T22:08:15.777

我这样解决它：

```
$user = $this->domainObjectFactory->build('user');
$mapper = $this->dataMapperFactory->build('userMapper');

$user->setName('Foobar');
$mapper->fetch( $user );
// mapper acquires entries that are related to user with name `"Foobar"`
// and loads it into the domain object 
```

这个想法是，然后从存储中检索数据，映射器使用域对象的现有参数作为条件。如果您正在处理域对象列表，则可以创建一个映射器来代替集合，并将条件分配给该集合。

此外，您可能会发现[此答案](https://stackoverflow.com/a/10988966/727208)与您的问题间接相关。

# java - Struts2 教程在 .action 页面上给出 404

> ID：11873757
> 
> 赞同：1
> 
> 时间：2012-08-08T21:52:55.267
> 
> 标签：java, tomcat, struts2, tomcat7

我似乎遇到了每个人在使用 Struts2 时遇到的同样问题，并且启动并运行它，让我发疯：@

从 Hello_World_Struts2_Ant 项目中手动编写文件并遇到构建路径问题后，我决定只下载该项目以查看它并运行......

出于某种原因，我可以从这个项目访问的唯一页面是 index.jsp，当我尝试单击 hello.action 的链接或通过地址栏访问 hello.action 时，它给了我一个 tomcat 404。（我正在运行雄猫 7).

我通常会承认是我自己的白痴导致我来到这里，但是从 struts 站点下载的项目无法正常工作的事实简直令人讨厌......

我对tomcat错误日志不是很好，但我看不到任何可以帮助我解决这个问题的东西。

任何帮助将不胜感激。

为了节省我使用我拥有的所有代码加载此页面的时间，我在此处分发了代码：[http ://code.google.com/p/struts2-examples/downloads/detail?name=Hello_World_Struts_2_Ant_2_3_1_2.zip&can= 2&q=](http://code.google.com/p/struts2-examples/downloads/detail?name=Hello_World_Struts_2_Ant_2_3_1_2.zip&can=2&q=)

```
Catalina Log
=====================================
INFO: Server startup in 3099 ms

08-Aug-2012 22:28:39 org.apache.jasper.compiler.TldLocationsCache tldScanJar

INFO: At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. 

Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.

08-Aug-2012 22:28:46 org.apache.coyote.AbstractProtocol pause

INFO: Pausing ProtocolHandler ["http-bio-8080"]

08-Aug-2012 22:28:46 org.apache.coyote.AbstractProtocol pause

INFO: Pausing ProtocolHandler ["ajp-bio-8009"]

08-Aug-2012 22:28:46 org.apache.catalina.core.StandardService stopInternal

INFO: Stopping service Catalina

08-Aug-2012 22:28:46 org.apache.catalina.loader.WebappClassLoader checkThreadLocalMapForLeaks

SEVERE: The web application [/Hello_World_Struts2_Ant] created a ThreadLocal with key of type [com.opensymphony.xwork2.inject.ContainerImpl$10] (value [com.opensymphony.xwork2.inject.ContainerImpl$10@39bde3d2]) and a value of type [java.lang.Object[]] (value [[Ljava.lang.Object;@61b80d9b]) but failed to remove it when the web application was stopped. Threads are going to be renewed over time to try and avoid a probable memory leak.

08-Aug-2012 22:28:46 org.apache.catalina.loader.WebappClassLoader checkThreadLocalMapForLeaks

SEVERE: The web application [/Hello_World_Struts2_Ant] created a ThreadLocal with key of type [com.opensymphony.xwork2.inject.ContainerImpl$10] (value [com.opensymphony.xwork2.inject.ContainerImpl$10@39bde3d2]) and a value of type [java.lang.Object[]] (value [[Ljava.lang.Object;@7a856d3b]) but failed to remove it when the web application was stopped. Threads are going to be renewed over time to try and avoid a probable memory leak.

08-Aug-2012 22:28:46 org.apache.coyote.AbstractProtocol stop

stderr Log (INFOS Removed)
================================
08-Aug-2012 22:28:46 org.apache.catalina.loader.WebappClassLoader checkThreadLocalMapForLeaks

SEVERE: The web application [/Hello_World_Struts2_Ant] created a ThreadLocal with key of type [com.opensymphony.xwork2.inject.ContainerImpl$10] (value [com.opensymphony.xwork2.inject.ContainerImpl$10@39bde3d2]) and a value of type [java.lang.Object[]] (value [[Ljava.lang.Object;@61b80d9b]) but failed to remove it when the web application was stopped. Threads are going to be renewed over time to try and avoid a probable memory leak.

08-Aug-2012 22:28:46 org.apache.catalina.loader.WebappClassLoader checkThreadLocalMapForLeaks

SEVERE: The web application [/Hello_World_Struts2_Ant] created a ThreadLocal with key of type [com.opensymphony.xwork2.inject.ContainerImpl$10] (value [com.opensymphony.xwork2.inject.ContainerImpl$10@39bde3d2]) and a value of type [java.lang.Object[]] (value [[Ljava.lang.Object;@7a856d3b]) but failed to remove it when the web application was stopped. Threads are going to be renewed over time to try and avoid a probable memory leak.

08-Aug-2012 22:28:46 org.apache.coyote.AbstractProtocol stop

INFO: Stopping ProtocolHandler ["http-bio-8080"]

08-Aug-2012 22:28:46 org.apache.coyote.AbstractProtocol stop

INFO: Stopping ProtocolHandler ["ajp-bio-8009"] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:05:52.620

在阅读了上述帖子后，我删除了我的 Tomcat 安装并以这种方式重新开始，似乎 Tomcat 是问题所在，因为它在重新安装 Tomcat 后立即为我工作。

可能是我将东西部署为 root.war 导致了 tomcat 问题。

“同样的问题”是我在发布这篇文章之前做了一些搜索，发现很多人在启动和运行 struts 时遇到了问题，这可能是我描述这个问题的一个糟糕的短语。

不过感谢您的帮助！肯定会像很多人推荐的那样研究 Maven，尽管现在复制到 WEB-INF/lib 和配置构建路径有效:)

# c# - C#中uint到int的编译时间转换

> ID：11873760
> 
> 赞同：5
> 
> 时间：2012-08-08T21:53:00.210
> 
> 标签：c#, clr

我在一段旧代码中有一个这样的枚举：

```
[Flags]
public enum Example: uint
{    
    Foo = 0x00000001,
    Bar = 0xC0000000
} 
```

现在，[FxCop 抱怨](http://msdn.microsoft.com/en-us/library/ms182147)这个枚举使用 uint 而不是 int 作为它的支持字段。（而且我的任务是让这段代码尽可能干净地 FxCop ......）但是有一个现有的枚举值使用枚举的高位，我无法更改它，因为它已被持久化到磁盘格式。当我尝试编译它时，C# 编译器正确地抱怨：

```
error CS0266: Cannot implicitly convert type 'uint' to 'int'. An explicit conversion exists (are you missing a cast?) 
```

所以，我打算把它改成这样：

```
[Flags]
public enum Example
{    
    Foo = 0x00000001,
    Bar = (int)0xC0000000
} 
```

但是，我不肯定我可以依靠这个不抛出算术异常，或者在读取或写入磁盘时没有正确处理。我可以依赖这里的位格式匹配枚举由无符号整数支持时使用的格式吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T21:57:04.323

在这里使用未选中的关键字就可以了；持久的位模式将是您所期望的。

```
[Flags]
public enum Example
{
    Foo = 0x00000001,
    Bar = unchecked((int)0xC0000000);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T22:07:30.730

Thomas 的回答是 100% 正确的，但我会加三分钱：与其“修复”你已经正确的代码，你总是可以为代码的某些部分禁止 FxCop 规则。

请参阅[如何使用 SupressMessage 抑制 FxCop 规则“DoNotCatchGeneralExceptionTypes”？](https://stackoverflow.com/questions/3683729/how-do-i-suppress-fxcop-rule-donotcatchgeneralexceptiontypes-with-supressmessa)它是使用示例的公认答案。一切都在代码和 .csproj 中设置，因此所有这些抑制设置在提供给最终客户端时都保留在代码中。

# vim - 在 vim 中使用带有 synmaxcol 的折叠

> ID：11873767
> 
> 赞同：3
> 
> 时间：2012-08-08T21:53:38.453
> 
> 标签：vim, vim-syntax-highlighting

有时当我在做一个项目时，我想玩弄一些数据。很多时候数据在一行并且很大（>25k 个字符）。我知道我可以`set nowrap`并且让这条线从屏幕上消失，但我倾向于`set wrap`出于其他原因喜欢。因此，作为一种解决方法，我想将这些长线隐藏在标记折叠中（例如`{{{ long line }}}`）。`synmaxcol`这很好用，但由于某种原因我遇到了问题。如果折叠线超过`synmaxcol`了，那么当我打开文件时，语法突出显示就会结束。例如：

![在此处输入图像描述](../Images/13882af994ff35b3edf5924332e6eefa.png)

但是，只要我打开折叠，语法就会自行更正：

![在此处输入图像描述](../Images/6744b5304921509551b5952378e35892.png)

不过，每次都必须打开折叠很烦人。正如你在这个例子中看到的那样，这条线实际上并没有那么长——它只是超过了`synmaxcol`. 由于`synmaxcol`在“字符串”元素处超出，文件的其余部分将突出显示为字符串（因此，只有单引号将停止它）。

为什么会发生这种情况，我该如何解决？我已经尝试过使用不同的语法文件和文件类型，但它仍然会发生。我也试过没有插件，一个最小的 vimrc （只包含`syn on`）和一个要设置的模式行`fdm=marker:synmaxcol=60`，它仍然会发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T15:02:39.050

~~你可以手动输入`:syntax sync fromstart`强制 Vim 从打开文件的开头重新扫描语法。
为了方便起见，我建议定义一个热键：~~

 ~~```
noremap  <F5> <Esc>:syntax sync fromstart<CR>
inoremap <F5> <C-o>:syntax sync fromstart<CR> 
```~~ 

现在您可以按 F5 来清理大多数语法高亮问题。

~~另外，请查看 Vim 的[修复语法高亮 - wiki 页面](http://vim.wikia.com/wiki/Fix_syntax_highlighting)
此外阅读[:help :syn-sync-first](http://vimdoc.sourceforge.net/htmldoc/syntax.html#%3asyn-sync-first)可能会更清楚地说明这个问题。~~

## 更新：

我能够在我的机器上重现这种行为（我正在运行 Vim 7.3.429）。
但是，当我包装折叠标记`{{{`和`}}}`块注释时，vim 正确地呈现了语法。`zf`您可以使用该命令创建适当包装的折叠标记。请参阅[Vim 提示：折叠乐趣](http://www.linux.com/learn/tutorials/442438-vim-tips-folding-fun)。

通常 Vim 会根据当前活动的语法选择正确的块注释字符串。然而，我的 Vim 非常普通，无法识别 Ruby 语法。我可以`autocmd FileType ruby set commentstring==begin%s=end`在我的 .vimrc 文件中指定设置正确的块注释。有关详细信息，请参阅[:fold-create-marker](http://vimdoc.sourceforge.net/htmldoc/fold.html#fold-create-marker)。

另一个解决方案是`set synmaxcol=0`，这将有效地将其设置为无穷大。这会导致 Vim 检查整行的语法，不管它有多长。但是，我不确定您必须为此付出什么样的性能损失。

# python - For-loop 在 Python 中读取多个 .csv 文件

> ID：11873769
> 
> 赞同：0
> 
> 时间：2012-08-08T21:53:42.477
> 
> 标签：python, for-loop, standard-deviation

我开始使用 Python 并在这里遇到以下问题。

1.  count +=1 和其他几行的缩进错误

2.  不扫描目录中的所有 .csv 文件。当我运行这个脚本时，它只显示一个 .csv 文件的输出，而不是第一列的多个 .csv 文件输出。我拥有的 for 循环命令一定有问题。

3.  我需要取文件每一行的标准偏差，并取每个文件中所有行的标准偏差的平均值。

    ```
    #!/usr/bin/env python

    import os

    print "Filename, Min, Max, Average, Mean of Std"
    for file in os.listdir("."):
        if not file.endswith(".csv"):
                continue    
        csv = open(file)    
        sum = 0
        diff = 0
        std = 0
        sumstd = 0
        count = 0
        min = 0
        max = 0

        for line in csv.readlines():
            x = line.split(",")
            time  = x[0]
            value = float(x[1])
            sum  += value       
            if value > max:
                max = value

            if 0 < value < min:
                min = value 
                count += 1
            avg = sum / count   

        import math
                count +=1
                diff += (value - avg)**2
                std = math.sqrt (diff / (count+1)-1)
                sumstd += std
                meanstd = sumstd/count

    print file + "," + str(min) + "," + str(max) + "," + str(avg) +  "," + str(meanstd) 
    ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T22:39:49.820

您已用作`sum`变量名，但这将隐藏内置`sum`函数。自然不鼓励隐藏内置插件。

1.  缩进在 Python 中很重要。该行`import math`仅缩进`for line in csv.readlines():`，因此循环的主体`for`以前一行结束。推荐的导入位置在脚本的开头，就像您对`import os`.

2.  你有：

    ```
    if file.endswith(".csv"):
        continue 
    ```

    因此，它将跳过名称以“.csv”结尾的文件。你不是说：

    ```
    if not file.endswith(".csv"):
        continue 
    ```

    请注意，这是区分大小写的。

    顺便说一句，读取 CSV 文件的推荐方法是使用`csv`模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T21:57:41.337

取消 SO 格式化您的问题的方式，看起来您可能有一个额外的空间，从`for line in csv.readlines():`. 额外的空格将解释您的缩进错误。至于其他一切，您将需要修复您的格式，以便我们提供任何帮助。Python 依赖于空白，因此请确保保持空白。

# c# - 如何将 SortedList 转换为 SortedList<>

> ID：11873783
> 
> 赞同：5
> 
> 时间：2012-08-08T21:54:57.597
> 
> 标签：c#

由于我使用的现有框架，方法调用返回一个 SortedList 对象。因为我写了这个调用的另一面，所以我知道它实际上是一个 SortedList。虽然我可以继续使用 SortedList，但使用泛型会更好地传达我的意思。那么，如何将非泛型 SortedList 更改为适当类型的泛型 SortedList？

这方面的背景是调用是使用 SoapFormatter 的远程过程调用。SoapFormatter 不实现泛型（谢谢，Microsoft）。我无法更改格式化程序，因为一些非 .Net 程序还对服务使用其他方法调用。

我希望我的代理调用如下所示：

```
public SortedList<string, long> GetList(string parameter)
{
    return _service.GetList(parameter);
} 
```

由于 SoapFormatter 的要求，GetList 调用的接口如下：

```
public SortedList GetList(string parameter); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T21:56:53.227

您不能直接转换，因为 a`SortedList`实际上不是 a `SortedList<T>`，即使它只包含 type 的元素`T`。

为了将其转换为适当的类型，您需要创建一个`SortedList<T>`并将所有元素添加到其中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-08T22:14:17.690

供您使用的转换函数：

```
static SortedList<TKey,TValue> StronglyType<TKey,TValue>(SortedList list) {
    var retval = new SortedList<TKey,TValue>(list.Count);
    for(int i=0; i<list.Count; i++) 
        retval.Add((TKey)list.GetKey(i), (TValue)list.GetByIndex(i));
    return retval;
} 
```

由于取消装箱的隐式强制转换（您总是需要对 TKey/TValue 进行强制转换），等效`foreach(DictionaryEntry entry in list)`方法稍微慢一些。`DictionaryEntry`

Ballpark 性能开销：在我多年前的机器上，这个函数需要 100 毫秒来转换 1000 个列表，每个列表有 1000 个条目。

# javascript - 正则表达式检查循环中的 [az] 范围

> ID：11873784
> 
> 赞同：0
> 
> 时间：2012-08-08T21:54:58.437
> 
> 标签：javascript, regex, range, jsfl

我在 jsfl 中执行此操作，它使用 javascript 语法。

我想检查不是序列中第一个的 mp3 或 wav 文件。循环为变量“audioFile”提供以下值（---a.mp3、-----b.mp3、----c.mp3）。然后我使用以下代码检查变量：

```
var patt=/([b-z])((\.mp3)|(\.wav))/gi;
if(patt.test(audioFile)){} 
```

这对于 -----b.mp3 返回 true，但对于 ---a.mp3 和 ----c.mp3 返回 false。'b' 和 'c' 文件不应该返回 true 吗？

如果我将它更改为 [az]，它会为 ---a.mp3 和 ----c.mp3 返回 true，但它会为 -----b.mp3 返回 false。不应该所有三个声音文件名都返回 true 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T22:26:09.983

`g`问题是您使用同一个正则表达式对象在设置全局标志的情况下进行多次测试。

来自[MDN`.test()`文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/test#Description)：

> *“与 exec（或与它结合使用）一样，在同一个全局正则表达式实例上多次调用的测试将超过上一次匹配。”*

在这种情况下，我认为您不需要该`g`标志，因为您正在匹配字符串末尾预期的文件扩展名 - 您甚至可能希望明确地使用`$`：

```
/([b-z])((\.mp3)|(\.wav))$/i 
```

# eclipse - Eclipse 产品配置文件应该在工作区的 .metadata 文件夹中编辑吗？

> ID：11873785
> 
> 赞同：1
> 
> 时间：2012-08-08T21:54:59.140
> 
> 标签：eclipse, design-patterns, plugins, configuration

我进入了一个新项目，他们在其中使用 Eclipse，但并没有完全“理解”它，我想开始清理一些基础设施，这样它就更合理了。

一些插件（2 或 3）中有一个 config.xml 文件，它指向为最终客户配置的各种服务器。对于我们的测试，我们必须编辑服务器地址。这些配置文件是从工作区的 .metadata->.plugins 文件中读取和编辑的。这会导致程序在第一次启动时无法正常运行（因为需要将插件复制到元数据区域）。

我过去从未见过这样做。这是 Eclipse 中普遍接受的做法，还是我应该深入研究并坚持我们更改为不同的模式（例如使用 ResourceBundle 包）。

谢谢您的意见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T06:11:53.920

在这里挖掘你的治疗；这绝对*不是*公认的做法。任何东西都不应直接触及`.metadata`工作区中文件夹内的任何东西。使用另一种方法来查找您的配置文件，将它们作为资源访问是非常好的。

# ruby-on-rails-3 - RoR：如何让未登录的用户查看网站上的内容？

> ID：11873786
> 
> 赞同：0
> 
> 时间：2012-08-08T21:55:05.803
> 
> 标签：ruby-on-rails-3

我正在通过 michael hartl 的示例教程学习 rails。在他的最终应用程序中，每个人都必须注册才能做任何事情。我正在尝试制作我的，以便未注册/登录的用户仍然可以查看其他用户的个人资料和他们的微博。问题是当前用户在 app/helpers/sessions_helper.rb 中定义。登录和注销功能基本上是开始或结束会话。

```
module SessionsHelper

  def sign_in(user)
    cookies.permanent[:remember_token] = user.remember_token
    current_user = user
  end

  def signed_in?
    !current_user.nil?
  end

  def current_user=(user)
    @current_user = user
  end

  def current_user
    @current_user ||= user_from_remember_token
  end

  def current_user?(user)
    user == current_user
  end

  def signed_in_user
    unless signed_in?
      store_location
      redirect_to signin_path, notice: "Please sign in."
    end
  end

  def sign_out
    current_user = nil
    cookies.delete(:remember_token)
  end

  def redirect_back_or(default)
    redirect_to(session[:return_to] || default)
    clear_return_to
  end 
```

所以 current_user 在应用程序的许多其他地方都使用了。这意味着每当我尝试将未签名的用户链接到页面时，无论使用 current_user 表示 current_user 未定义（这当然是真的），都会出现错误。我该如何解决这个问题。有没有办法将未登录用户临时定义为当前用户的一种形式。我可以在当前用户的定义中添加一些内容吗？

编辑：错误发生在很多地方。每当未登录用户访问使用当前用户的页面时，它都会给出一个错误，例如未定义的方法“admin？” 对于零：NilClass。这个例子在代码中写着 current_user.admin?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:30:20.403

[这个 railscast](http://railscasts.com/episodes/192-authorization-with-cancan)展示了如何使用 cancan 进行授权，包括如何处理未登录的用户。

# python - Python 的 os.path.join() 的正确结果

> ID：11873787
> 
> 赞同：1
> 
> 时间：2012-08-08T21:55:15.150
> 
> 标签：python

在阅读了 os.path.join() 方法的在线文档后，以下案例似乎应该符合条件，但显然它没有。我是否正确阅读了该文档？

```
>>> import os
>>>
>>> os.path.join("/home/user", "/projects/pyproject", "mycode.py")
>>> '/projects/pyproject/mycode.py' 
```

在第一条和第二条路径上尝试了尾随和前导 os.sep 的不同组合后，似乎要加入的第二条路径的第一个字符不能以 os.sep 开头。

```
>>> os.path.join("/home/user", "projects/pyproject", "mycode.py")
>>> '/home/user/projects/pyproject/mycode.py' 
```

在 path1 和 path2 是来自用户输入的部分的情况下，例如，用户输入意味着编写代码来解析他们的输入以获取领先的 os.sep。

来自 python.org 在线参考：

> `os.path.join(path1[, path2[, ...]])`智能地加入一个或多个路径组件。如果任何组件是绝对路径，则所有先前的组件（在 Windows 上，包括先前的驱动器号，如果有的话）都将被丢弃，并继续加入。返回值是`path1`, 和可选`path2`等的串联，`os.sep`除了最后一个之外的每个非空部分之后只有一个目录分隔符 ( )。（这意味着空的最后一部分将导致路径以分隔符结尾。）请注意，在 Windows 上，由于每个驱动器都有一个当前目录，因此`os.path.join("c:", "foo")`表示相对于驱动器`C:`( `c:foo`) 上当前目录的路径，而不是 `c:\foo`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T21:56:50.560

> 我是否正确阅读了该文档？

再读一遍，强调我的：

> 智能地加入一个或多个路径组件。**如果任何组件是绝对路径，则所有先前的组件**（在 Windows 上，包括先前的驱动器号，如果有的话） **都将被丢弃**，并继续加入。返回值是 path1 和可选的 path2 等的串联，除了最后一个之外，每个非空部分后面都有一个目录分隔符 (os.sep)。（这意味着空的最后一部分将导致路径以分隔符结尾。）请注意，在 Windows 上，由于每个驱动器都有一个当前目录，因此 os.path.join("c:", "foo")表示相对于驱动器 C: (c:foo) 上的当前目录的路径，而不是 c:\foo。

当它说以前的组件被“丢弃”时，意味着它们被忽略并且不包含在最终结果中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T21:56:52.310

正如文档所说：如果任何组件是绝对的，则将先前的组件丢弃。如果您的路径以 开头`/`，那么它是绝对的。如果它不应该是绝对的，它不应该以`/`.

# c++ - 从另一个命名空间内访问 C++ 全局命名空间

> ID：11873790
> 
> 赞同：9
> 
> 时间：2012-08-08T21:55:38.730
> 
> 标签：c++, namespaces, operator-overloading, scope-resolution

在下面的 C++ 代码中，`foobar`首先为单个`double`参数定义 ，然后再次为类型为 的单个参数定义`Foo`。两者都在全局命名空间中定义。

在`one`命名空间中，定义了进一步的重载`foobar`，带有一个类型的参数`Bar`。从这个版本开始，带有参数 (42.0)`foobar`的非限定调用将失败。对 的类似调用，这次使用 (::) 范围解析运算符限定，也带有参数，但会成功。`foobar``double``foobar``double`

另一方面，`foobar`使用 type 参数对的非限定调用`Foo`成功。使用范围解析运算符限定`foobar`的参数调用也成功。`Foo`

为什么这两种情况表现不同？我同时使用 gcc 4.7 和 clang++ 3.2。

```
struct Foo {};
struct Bar {};

double foobar(double x) { return x; }
Foo    foobar(Foo f)    { return f; }

namespace one {

  Bar foobar(Bar b) {
    //foobar(42.0); // error: can't convert to Bar
    ::foobar(42.0);

    Foo f;
      foobar(f);    // no problem
    ::foobar(f);
    return b;
  }
}; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-08T22:03:36.717

[参数依赖查找](https://stackoverflow.com/questions/6211198/3-4-2-argument-dependent-name-lookup-from-n3290-draft?rq=1)。

在`foobar(f)`从命名空间调用函数时`Foo`会考虑。

不起作用，`double`因为该类型未在任何命名空间中声明。

# android - 错误膨胀类片段类未找到 android.view.fragment 但我包含兼容性库？

> ID：11873794
> 
> 赞同：3
> 
> 时间：2012-08-08T21:56:03.790
> 
> 标签：android, android-layout

尽管我使用的是兼容性库，但我看到 android.view.fragment 的类未找到异常。编译正常但崩溃。在 3.0 之前我应该​​使用另一个包吗？我已经将所有片段类更改为 android.support.v4.app.Frament 但由于布局中的内容，它仍然崩溃。我的 SDK 是 4.03，但设备是 2.3。

这是布局

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal" >
<fragment
    android:id="@+id/frag_series"
    android:layout_width="200dip"
    android:layout_height="match_parent"
    android:layout_marginTop="?android:attr/actionBarSize"
    class="com.authorwjf.hello_fragments.ListFrag" />
<fragment
    android:id="@+id/frag_capt"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.authorwjf.hello_fragments.DetailFrag" />
</LinearLayout> 
```

日志猫：

```
08-08 14:53:21.644: E/AndroidRuntime(13056): Caused by: android.view.InflateException:     Binary    XML file line #6: Error inflating class fragment
08-08 14:53:21.644: E/AndroidRuntime(13056):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:576)
08-08 14:53:21.644: E/AndroidRuntime(13056):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
08-08 14:53:21.644: E/AndroidRuntime(13056):    at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
08-08 14:53:21.644: E/AndroidRuntime(13056):    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
08-08 14:53:21.644: E/AndroidRuntime(13056):    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
08-08 14:53:21.644: E/AndroidRuntime(13056):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:200)
08-08 14:53:21.644: E/AndroidRuntime(13056):    at android.app.Activity.setContentView(Activity.java:1647)
08-08 14:53:21.644: E/AndroidRuntime(13056):    at com.authorwjf.hello_fragments.Main.onCreate(Main.java:11)
08-08 14:53:21.644: E/AndroidRuntime(13056):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
08-08 14:53:21.644: E/AndroidRuntime(13056):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
08-08 14:53:21.644: E/AndroidRuntime(13056):    ... 11 more
08-08 14:53:21.644: E/AndroidRuntime(13056): Caused by: java.lang.ClassNotFoundException: android.view.fragment in loader dalvik.system.PathClassLoader[/data/app/com.authorwjf.hello_fragments-2.apk]
08-08 14:53:21.644: E/AndroidRuntime(13056):    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T22:07:34.130

在布局 XML 中执行相同操作：

```
<android.support.v4.app.Fragment /> 
```

另外，注意大小写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-20T12:28:24.987

检查您的活动是否扩展了 FragmentActivity？准确地说是 android.support.v4.app.FragmentActivity...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-05T10:34:40.660

我在使用片段标记时遇到了类似的问题，因为我在 FragmentActivity 中错过了对 super.onCreate() 的调用。添加它解决了问题：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-10T06:15:41.337

> > 我的 SDK 是 4.03，但设备是 2.3。

我也有这个问题。然后我知道当我们在低版本的设备上运行时，我们需要在构建路径中包含支持 jar (android.support.v4)。

将 Jar 包含到构建路径中后，我们还需要确保 jar 文件位于排序的顶部（使用 eclipse 的 Order 和 Export 选项）。

这两件事解决了我的问题..希望它有所帮助..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-12T22:54:57.370

我遇到了同样的问题，这是解决方案。

使用您的片段的活动需要扩展`FragmentActivity`，而不仅仅是`Activity`.

在您的活动布局中，您仍然可以使用`<fragment />`而不是`<android.support.v4.app.Fragment />`

# python - 如何找到给 selenium webdriver 对象的文件夹的名称？

> ID：11873797
> 
> 赞同：0
> 
> 时间：2012-08-08T21:56:15.423
> 
> 标签：python, selenium, webdriver, directory

```
from selenium import webdriver
browser = webdriver.Firefox() 
```

所以这给了我一个浏览器对象和一个新窗口，我想知道的是如何告诉我的临时目录中保存该对象信息的文件夹的名称。大多数时候在 browser.quit() 上删除文件夹做得很好，但有时不会。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T22:12:08.317

看起来它在：

```
 browser.profile.path 
```

您可以查看[Firefox 配置文件的 Python 代码](http://code.google.com/p/selenium/source/browse/trunk/py/selenium/webdriver/firefox/firefox_profile.py)。

# c# - .NET 4.5 beta 中这个 FatalExecutionEngineError 的原因是什么？

> ID：11873798
> 
> 赞同：151
> 
> 时间：2012-08-08T21:56:20.217
> 
> 标签：c#, clr

下面的示例代码自然而然地发生了。突然间，我的代码出现了一个听起来很讨厌的`FatalExecutionEngineError`异常。我花了整整 30 分钟试图隔离和最小化罪魁祸首样本。使用 Visual Studio 2012 作为控制台应用程序进行编译：

```
class A<T>
{
    static A() { }

    public A() { string.Format("{0}", string.Empty); }
}

class B
{
    static void Main() { new A<object>(); }
} 
```

应该在 .NET 框架 4 和 4.5 上产生此错误：

![FatalExecutionException 截图](../Images/ba64780e33ad8a3a90977c0b31935edc.png)

这是一个已知的错误，原因是什么，我能做些什么来减轻它？我目前的工作是不使用`string.Empty`，但我是在叫错树吗？更改有关该代码的任何内容都会使其按预期运行 - 例如删除 的空静态构造函数`A`，或将类型参数从 更改`object`为`int`。

我在我的笔记本电脑上尝试了这个代码，它没有抱怨。但是，我确实尝试了我的主应用程序，但它也在笔记本电脑上崩溃了。在减少问题时，我一定是弄坏了一些东西，我会看看我是否能弄清楚那是什么。

我的笔记本电脑在使用框架 4.0 时使用与上述相同的代码崩溃，但即使使用 4.5 也主要崩溃。两个系统都使用带有最新更新的 VS'12（7 月？）。

**更多信息**：

*   IL 代码（编译后的 Debug/Any CPU/4.0/VS2010（IDE 不重要？））：[http ://codepad.org/boZDd98E](http://codepad.org/boZDd98E)
*   没有看到 VS 2010 与 4.0。在有/没有优化、不同的目标 CPU、附加/未附加调试器等情况下不会崩溃 - [Tim Medora](https://stackoverflow.com/users/453277/tim-medora)
*   如果我使用 AnyCPU，2010 年崩溃，在 x86 中很好。在 Visual Studio 2010 SP1 中崩溃，使用 Platform Target = AnyCPU，但使用 Platform Target=x86 很好。这台机器也安装了 VS2012RC，所以 4.5 可能会进行就地更换。使用 AnyCPU 和 TargetPlatform = 3.5 然后它不会崩溃，所以看起来像框架中的回归[。- colinsmith](https://stackoverflow.com/users/473194/colinsmith)
*   无法在 VS2010 4.0 中的 x86、x64 或 AnyCPU 上重现。–[富士](https://stackoverflow.com/users/408182/fuji)
*   仅适用于 x64，（2012rc，Fx4.5） - [Henk Holterman](https://stackoverflow.com/users/60761/henk-holterman)
*   Win8 RP 上的 VS2012 RC。最初针对 .NET 4.5 时未看到此 MDA。当切换到面向 .NET 4.0 时，MDA 出现了。然后在切换回 .NET 4.5 后，MDA 仍然存在。-[韦恩](https://stackoverflow.com/users/18482/wayne)

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-08-09T02:48:12.370

~~这也不是一个完整的答案，但我有一些想法。~~

**我相信在没有 .NET JIT 团队的任何人回答的情况下，我已经找到了一个很好的解释。**

**更新**

我看的更深了，我相信我找到了问题的根源。它似乎是由 JIT 类型初始化逻辑中的错误和 C# 编译器中的更改引起的，该更改依赖于 JIT 按预期工作的假设。我认为 JIT 错误存在于 .NET 4.0 中，但被 .NET 4.5 的编译器更改发现。

我不认为这`beforefieldinit`是这里唯一的问题。我认为它比这更简单。

.NET 4.0 中的 mscorlib.dll 中的类型`System.String`包含一个静态构造函数：

```
.method private hidebysig specialname rtspecialname static 
    void  .cctor() cil managed
{
  // Code size       11 (0xb)
  .maxstack  8
  IL_0000:  ldstr      ""
  IL_0005:  stsfld     string System.String::Empty
  IL_000a:  ret
} // end of method String::.cctor 
```

在 mscorlib.dll 的 .NET 4.5 版本中，`String.cctor`（静态构造函数）明显不存在：

> .....没有静态构造函数:( .....

在这两个版本中，`String`类型都装饰有`beforefieldinit`：

```
.class public auto ansi serializable sealed beforefieldinit System.String 
```

我尝试创建一个可以类似地编译为 IL 的类型（因此它具有静态字段但没有静态构造函数`.cctor`），但我做不到。所有这些类型`.cctor`在 IL 中都有一个方法：

```
public class MyString1 {
    public static MyString1 Empty = new MyString1();        
}

public class MyString2 {
    public static MyString2 Empty = new MyString2();

    static MyString2() {}   
}

public class MyString3 {
    public static MyString3 Empty;

    static MyString3() { Empty = new MyString3(); } 
} 
```

我的猜测是 .NET 4.0 和 4.5 之间发生了两件事：

首先：EE 已更改，以便它可以自动`String.Empty`从非托管代码初始化。此更改可能是针对 .NET 4.0 进行的。

其次：编译器​​发生了变化，因此它不会为字符串发出静态构造函数，因为它知道`String.Empty`将从非托管端分配。此更改似乎是针对 .NET 4.5 进行的。

似乎 EE在某些优化路径上分配*得不够快。*`String.Empty`对编译器所做的更改（或任何使`String.cctor`消失的更改）期望 EE 在执行任何用户代码之前进行此分配，但似乎 EE 在`String.Empty`用于引用类型具体化泛型类的方法之前并未进行此分配。

最后，我认为该错误表明 JIT 类型初始化逻辑中存在更深层次的问题。看来编译器中的更改是 的特例`System.String`，但我怀疑 JIT 是否在这里为`System.String`.

**原来的**

首先，WOW BCL 人在一些性能优化方面非常有创意。 *许多*方法`String`现在使用 Thread 静态缓存`StringBuilder`对象执行。

我跟随了一段时间，但`StringBuilder`没有在`Trim`代码路径上使用，所以我认为它不可能是线程静态问题。

我想我发现了同一个错误的奇怪表现。

此代码因访问冲突而失败：

```
class A<T>
{
    static A() { }

    public A(out string s) {
        s = string.Empty;
    }
}

class B
{
    static void Main() { 
        string s;
        new A<object>(out s);
        //new A<int>(out s);
        System.Console.WriteLine(s.Length);
    }
} 
```

但是，如果您取消注释`//new A<int>(out s);`，`Main`那么代码就可以正常工作。事实上，如果`A`用任何引用类型具体化，程序就会失败，但如果`A`用任何值类型具体化，那么代码不会失败。此外，如果您注释掉`A`的静态构造函数，则代码永远不会失败。在深入研究`Trim`and之后`Format`，很明显问题在于`Length`被内联，并且在上面的这些示例中，`String`类型尚未初始化。特别是，在`A`的构造函数体内，`string.Empty`没有正确分配，尽管在 , 的体内`Main`被`string.Empty`正确分配。

令我惊讶的是，类型初始化以`String`某种方式取决于是否`A`用值类型具体化。我唯一的理论是，所有类型共享的通用类型初始化有一些优化的 JIT 代码路径，并且该路径对 BCL 引用类型（“特殊类型？”）及其状态做出了假设。快速浏览其他具有字段的 BCL 类`public static`表明，它们基本上*都*实现了静态构造函数（即使是那些具有空构造函数且没有数据的类，例如`System.DBNull`和`System.Empty`。具有字段的 BCL 值类型`public static`似乎没有实现静态构造函数（`System.IntPtr`例如） . 这似乎表明 JIT 对 BCL 引用类型初始化做了一些假设。

仅供参考，这是两个版本的 JITed 代码：

**`A<object>.ctor(out string)`**：

```
 public A(out string s) {
00000000  push        rbx 
00000001  sub         rsp,20h 
00000005  mov         rbx,rdx 
00000008  lea         rdx,[FFEE38D0h] 
0000000f  mov         rcx,qword ptr [rcx] 
00000012  call        000000005F7AB4A0 
            s = string.Empty;
00000017  mov         rdx,qword ptr [FFEE38D0h] 
0000001e  mov         rcx,rbx 
00000021  call        000000005F661180 
00000026  nop 
00000027  add         rsp,20h 
0000002b  pop         rbx 
0000002c  ret 
    } 
```

**`A<int32>.ctor(out string)`**：

```
 public A(out string s) {
00000000  sub         rsp,28h 
00000004  mov         rax,rdx 
            s = string.Empty;
00000007  mov         rdx,12353250h 
00000011  mov         rdx,qword ptr [rdx] 
00000014  mov         rcx,rax 
00000017  call        000000005F691160 
0000001c  nop 
0000001d  add         rsp,28h 
00000021  ret 
    } 
```

其余代码 ( `Main`) 在两个版本之间是相同的。

**编辑**

此外，两个版本的 IL 是相同的，除了对`A.ctor`in的调用`B.Main()`，其中第一个版本的 IL 包含：

```
newobj     instance void class A`1<object>::.ctor(string&) 
```

相对

```
... A`1<int32>... 
```

在第二。

需要注意的另一件事是 : 的 JITed 代码**`A<int>.ctor(out string)`**与非通用版本中的相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-11T01:20:54.693

## 我强烈怀疑这是由.NET 4.0 中的[这种优化（与 .NET 相关`BeforeFieldInit`）引起的。](https://stackoverflow.com/q/6729841/541686)

### 如果我没记错的话：

当您显式声明静态构造函数时，`beforefieldinit`会发出，告诉运行时静态构造函数*必须在任何静态成员访问之前运行*。

### 我猜：

我猜他们以某种方式在 x64 JITer 上搞砸了这个事实，所以当从*一个****自己的*静态构造函数已经运行的类访问***不同****类型的*静态成员时，它会以某种方式*跳过*运行（或以错误的顺序执行）静态构造函数——因此会导致崩溃。（你没有得到空指针异常，*可能是*因为它不是空初始化的。）**

 **我**没有**运行你的代码，所以这部分可能是错误的——但如果我不得不再猜测一下，我会说它可能是某些东西`string.Format`（或`Console.WriteLine`类似的）需要在内部访问导致崩溃，例如也许是一个需要显式静态构造的与*语言环境*相关的类。

同样，我还没有测试它，但这是我对数据的最佳猜测。

随意测试我的假设，让我知道它是怎么回事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T00:08:58.230

一个观察结果，但 DotPeek 显示了反编译的 string.Empty ：

```
/// <summary>
/// Represents the empty string. This field is read-only.
/// </summary>
/// <filterpriority>1</filterpriority>
[__DynamicallyInvokable]
public static readonly string Empty;

internal sealed class __DynamicallyInvokableAttribute : Attribute
{
  [TargetedPatchingOptOut("Performance critical to inline this type of method across NGen image boundaries")]
  public __DynamicallyInvokableAttribute()
  {
  }
} 
```

如果我以相同的方式声明自己`Empty`的属性，但没有属性，我将不再获得 MDA：

```
class A<T>
{
    static readonly string Empty;

    static A() { }

    public A()
    {
        string.Format("{0}", Empty);
    }
} 
```**

# ruby-on-rails - rails 3.2.0 和 3.2.7 的文件有什么区别？（重新：升级）

> ID：11873800
> 
> 赞同：1
> 
> 时间：2012-08-08T21:56:28.317
> 
> 标签：ruby-on-rails, diff, upgrade, ruby-on-rails-3.2

我想从 rails 3.2.0 升级到 3.2.7，我正在寻找两者之间应用程序上下文文件更改的完整列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T21:56:28.317

以下是 rails [3.2.0](http://weblog.rubyonrails.org/2012/1/20/rails-3-2-0-faster-dev-mode-routing-explain-queries-tagged-logger-store/)应用程序和 rails [3.2.7](http://weblog.rubyonrails.org/2012/7/26/ann-rails-3-2-7-has-been-released/)应用程序的带注释的递归差异，不包括`Gemfile.lock`和`config/initializers/secret_token.rb`. 要升级，请进行这些更改并运行`bundle update`.

顺便说一下，这里是中间发布公告：[3.2.1](http://weblog.rubyonrails.org/2012/1/26/rails-3-2-1-has-been-released/) , [3.2.2](http://weblog.rubyonrails.org/2012/3/1/ann-rails-3-2-2-has-been-released/) , [3.2.3](http://weblog.rubyonrails.org/2012/3/30/ann-rails-3-2-3-has-been-released/) , [3.2.4](http://weblog.rubyonrails.org/2012/5/31/ann-rails-3-2-4-has-been-released/) , [3.2.5](http://weblog.rubyonrails.org/2012/5/31/ann-rails-3-2-5-has-been-released/) , [3.2.6](http://weblog.rubyonrails.org/2012/6/12/ann-rails-3-2-6-has-been-released/)。

**宝石文件**

```
diff --recursive rails-3.2.0/depot/Gemfile rails-3.2.7/depot/Gemfile
3c3
< gem 'rails', '3.2.0'
---
> gem 'rails', '3.2.7'
18c18
<   # gem 'therubyracer'
---
>   # gem 'therubyracer', :platforms => :ruby
31c31
< # Use unicorn as the web server
---
> # Use unicorn as the app server
38c38
< # gem 'ruby-debug19', :require => 'ruby-debug'
---
> # gem 'debugger' 
```

**app/assets/stylesheets/application.css** -- 添加空间（装饰）

```
diff --recursive rails-3.2.0/depot/app/assets/stylesheets/application.css rails-3.2.7/depot/app/assets/stylesheets/application.css
13c13
< */
---
>  */ 
```

**config/application.rb** -- 添加配置行（在`whitelist_attributes` [这里](http://weblog.rubyonrails.org/2012/3/30/ann-rails-3-2-3-has-been-released/)阅读）

```
diff --recursive rails-3.2.0/depot/config/application.rb rails-3.2.7/depot/config/application.rb
41a42,44
>     # Enable escaping HTML in JSON.
>     config.active_support.escape_html_entities_in_json = true
>
51c54
<     # config.active_record.whitelist_attributes = true
---
>     config.active_record.whitelist_attributes = true 
```

**config/environments/production.rb** -- 更改注释

```
diff --recursive rails-3.2.0/depot/config/environments/production.rb rails-3.2.7/depot/config/environments/production.rb
23c23
<   # Defaults to Rails.root.join("public/assets")
---
>   # Defaults to nil and saved in location specified by config.assets.prefix 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T22:53:57.990

如果您正在寻找确切的文件差异，您可以使用 Github 来比较标签：

[https://github.com/rails/rails/compare/v3.2.0...v3.2.7#files_bucket](https://github.com/rails/rails/compare/v3.2.0...v3.2.7#files_bucket)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T15:12:57.980

尝试[使用 pkgdiff](http://lvc.github.com/pkgdiff/)工具为 rails 包创建视觉差异。要为[3.2.0](https://github.com/rails/rails/tarball/v3.2.0)和[3.2.7](https://github.com/rails/rails/tarball/v3.2.7)创建一个运行：

```
$ pkgdiff -old rails-3.2.0-0-gf36dcaf.tar.gz -new rails-3.2.7-0-gd1b9cf2.tar.gz

```

输出就是[这个 HTML 报告](http://upstream-tracker.org/pkgdiff_reports/rails/3.2.0-0-gf36dcaf_to_3.2.7-0-gd1b9cf2/changes_report.html)。

# java - 使用 PDFbox 确定文档中单词的坐标

> ID：11873801
> 
> 赞同：19
> 
> 时间：2012-08-08T21:56:28.907
> 
> 标签：java, pdf, pdfbox

我正在使用 PDFbox 来提取 PDF 文档中单词/字符串的坐标，并且到目前为止已经成功地确定了单个字符的位置。这是迄今为止的代码，来自 PDFbox 文档：

```
package printtextlocations;

import java.io.*;
import org.apache.pdfbox.exceptions.InvalidPasswordException;

import org.apache.pdfbox.pdmodel.PDDocument;
import org.apache.pdfbox.pdmodel.PDPage;
import org.apache.pdfbox.pdmodel.common.PDStream;
import org.apache.pdfbox.util.PDFTextStripper;
import org.apache.pdfbox.util.TextPosition;

import java.io.IOException;
import java.util.List;

public class PrintTextLocations extends PDFTextStripper {

    public PrintTextLocations() throws IOException {
        super.setSortByPosition(true);
    }

    public static void main(String[] args) throws Exception {

        PDDocument document = null;
        try {
            File input = new File("C:\\path\\to\\PDF.pdf");
            document = PDDocument.load(input);
            if (document.isEncrypted()) {
                try {
                    document.decrypt("");
                } catch (InvalidPasswordException e) {
                    System.err.println("Error: Document is encrypted with a password.");
                    System.exit(1);
                }
            }
            PrintTextLocations printer = new PrintTextLocations();
            List allPages = document.getDocumentCatalog().getAllPages();
            for (int i = 0; i < allPages.size(); i++) {
                PDPage page = (PDPage) allPages.get(i);
                System.out.println("Processing page: " + i);
                PDStream contents = page.getContents();
                if (contents != null) {
                    printer.processStream(page, page.findResources(), page.getContents().getStream());
                }
            }
        } finally {
            if (document != null) {
                document.close();
            }
        }
    }

    /**
     * @param text The text to be processed
     */
    @Override /* this is questionable, not sure if needed... */
    protected void processTextPosition(TextPosition text) {
        System.out.println("String[" + text.getXDirAdj() + ","
                + text.getYDirAdj() + " fs=" + text.getFontSize() + " xscale="
                + text.getXScale() + " height=" + text.getHeightDir() + " space="
                + text.getWidthOfSpace() + " width="
                + text.getWidthDirAdj() + "]" + text.getCharacter());
    }
} 
```

这会产生一系列包含每个字符位置的行，包括空格，如下所示：

```
String[202.5604,41.880127 fs=1.0 xscale=13.98 height=9.68814 space=3.8864403 width=9.324661]P 
```

其中“P”是字符。我一直无法在 PDFbox 中找到查找单词的函数，而且我对 Java 不够熟悉，即使还包括空格，也无法准确地将这些字符连接回单词以进行搜索。有没有其他人遇到过类似的情况，如果有，您是如何处理的？我真的只需要单词中第一个字符的坐标，以便简化部分，但至于我将如何将字符串与那种输出进行匹配，这超出了我的范围。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-08T22:32:31.130

PDFBox 中没有自动提取单词的功能。我目前正在提取数据以将其收集到块中，这是我的过程：

1.  我提取文档的所有字符（称为字形）并将它们存储在一个列表中。

2.  我对每个字形的坐标进行分析，循环遍历列表。如果它们重叠（如果当前字形的顶部包含在前一个字形的顶部和底部之间/或当前字形的底部包含在前一个字形的顶部和底部之间），我将其添加到同一行。

3.  至此，我已经提取了文档的不同行（注意，如果你的文档是多列的，那么“行”的表达是指所有垂直重叠的字形，即所有列的文本具有相同的垂直坐标）。

4.  然后，您可以将当前字形的左坐标与前一个字形的右坐标进行比较，以确定它们是否属于同一个单词（PDFTextStripper 类提供了一个 getSpacingTolerance() 方法，该方法根据试验和错误为您提供，一个“正常”空间的值，如果左右坐标的差值小于这个值，那么两个字形都属于同一个词。

我将这种方法应用到我的工作中，效果很好。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-04-18T09:28:38.723

基于最初的想法，这里是PDFBox 2的文本搜索版本。代码本身很粗糙，但很简单。它应该让你很快开始。

```
import java.io.IOException;
import java.io.Writer;
import java.util.List;
import java.util.Set;
import lu.abac.pdfclient.data.PDFTextLocation;
import org.apache.pdfbox.pdmodel.PDDocument;
import org.apache.pdfbox.text.PDFTextStripper;
import org.apache.pdfbox.text.TextPosition;

public class PrintTextLocator extends PDFTextStripper {

    private final Set<PDFTextLocation> locations;

    public PrintTextLocator(PDDocument document, Set<PDFTextLocation> locations) throws IOException {
        super.setSortByPosition(true);
        this.document = document;
        this.locations = locations;
        this.output = new Writer() {
            @Override
            public void write(char[] cbuf, int off, int len) throws IOException {
            }
            @Override
            public void flush() throws IOException {
            }

            @Override
            public void close() throws IOException {
            }
        };
    }

    public Set<PDFTextLocation> doSearch() throws IOException {

        processPages(document.getDocumentCatalog().getPages());
        return locations;
    }

    @Override
    protected void writeString(String text, List<TextPosition> textPositions) throws IOException {
        super.writeString(text);

        String searchText = text.toLowerCase();
        for (PDFTextLocation textLoc:locations) {
            int start = searchText.indexOf(textLoc.getText().toLowerCase());
            if (start!=-1) {
                // found
                TextPosition pos = textPositions.get(start);
                textLoc.setFound(true);
                textLoc.setPage(getCurrentPageNo());
                textLoc.setX(pos.getXDirAdj());
                textLoc.setY(pos.getYDirAdj());
            }
        }

    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-12T14:24:50.233

看看这个，我认为这是你需要的。

[https://jackson-brain.com/using-pdfbox-to-locate-text-coordinates-within-a-pdf-in-java/](https://jackson-brain.com/using-pdfbox-to-locate-text-coordinates-within-a-pdf-in-java/)

这是代码：

```
import java.io.File;
import java.io.IOException;
import java.text.DecimalFormat;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

import org.apache.pdfbox.exceptions.InvalidPasswordException;
import org.apache.pdfbox.pdmodel.PDDocument;
import org.apache.pdfbox.pdmodel.PDPage;
import org.apache.pdfbox.pdmodel.common.PDStream;
import org.apache.pdfbox.util.PDFTextStripper;
import org.apache.pdfbox.util.TextPosition;

public class PrintTextLocations extends PDFTextStripper {

public static StringBuilder tWord = new StringBuilder();
public static String seek;
public static String[] seekA;
public static List wordList = new ArrayList();
public static boolean is1stChar = true;
public static boolean lineMatch;
public static int pageNo = 1;
public static double lastYVal;

public PrintTextLocations()
        throws IOException {
    super.setSortByPosition(true);
}

public static void main(String[] args)
        throws Exception {
    PDDocument document = null;
    seekA = args[1].split(",");
    seek = args[1];
    try {
        File input = new File(args[0]);
        document = PDDocument.load(input);
        if (document.isEncrypted()) {
            try {
                document.decrypt("");
            } catch (InvalidPasswordException e) {
                System.err.println("Error: Document is encrypted with a password.");
                System.exit(1);
            }
        }
        PrintTextLocations printer = new PrintTextLocations();
        List allPages = document.getDocumentCatalog().getAllPages();

        for (int i = 0; i < allPages.size(); i++) {
            PDPage page = (PDPage) allPages.get(i);
            PDStream contents = page.getContents();

            if (contents != null) {
                printer.processStream(page, page.findResources(), page.getContents().getStream());
            }
            pageNo += 1;
        }
    } finally {
        if (document != null) {
            System.out.println(wordList);
            document.close();
        }
    }
}

@Override
protected void processTextPosition(TextPosition text) {
    String tChar = text.getCharacter();
    System.out.println("String[" + text.getXDirAdj() + ","
            + text.getYDirAdj() + " fs=" + text.getFontSize() + " xscale="
            + text.getXScale() + " height=" + text.getHeightDir() + " space="
            + text.getWidthOfSpace() + " width="
            + text.getWidthDirAdj() + "]" + text.getCharacter());
    String REGEX = "[,.\\[\\](:;!?)/]";
    char c = tChar.charAt(0);
    lineMatch = matchCharLine(text);
    if ((!tChar.matches(REGEX)) && (!Character.isWhitespace(c))) {
        if ((!is1stChar) && (lineMatch == true)) {
            appendChar(tChar);
        } else if (is1stChar == true) {
            setWordCoord(text, tChar);
        }
    } else {
        endWord();
    }
}

protected void appendChar(String tChar) {
    tWord.append(tChar);
    is1stChar = false;
}

protected void setWordCoord(TextPosition text, String tChar) {
    tWord.append("(").append(pageNo).append(")[").append(roundVal(Float.valueOf(text.getXDirAdj()))).append(" : ").append(roundVal(Float.valueOf(text.getYDirAdj()))).append("] ").append(tChar);
    is1stChar = false;
}

protected void endWord() {
    String newWord = tWord.toString().replaceAll("[^\\x00-\\x7F]", "");
    String sWord = newWord.substring(newWord.lastIndexOf(' ') + 1);
    if (!"".equals(sWord)) {
        if (Arrays.asList(seekA).contains(sWord)) {
            wordList.add(newWord);
        } else if ("SHOWMETHEMONEY".equals(seek)) {
            wordList.add(newWord);
        }
    }
    tWord.delete(0, tWord.length());
    is1stChar = true;
}

protected boolean matchCharLine(TextPosition text) {
    Double yVal = roundVal(Float.valueOf(text.getYDirAdj()));
    if (yVal.doubleValue() == lastYVal) {
        return true;
    }
    lastYVal = yVal.doubleValue();
    endWord();
    return false;
}

protected Double roundVal(Float yVal) {
    DecimalFormat rounded = new DecimalFormat("0.0'0'");
    Double yValDub = new Double(rounded.format(yVal));
    return yValDub;
}
} 
```

依赖项：

> PDFBox、FontBox、Apache 通用日志接口。

您可以通过在命令行上键入来运行它：

```
javac PrintTextLocations.java 
sudo java PrintTextLocations file.pdf WORD1,WORD2,.... 
```

输出类似于：

```
[(1)[190.3 : 286.8] WORD1, (1)[283.3 : 286.8] WORD2, ...] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-17T14:01:43.517

对于那些仍然需要帮助的人，这是我在我的代码中使用的，应该是有用的。它使用 PDFBox 2.0.16

```
public class PDFTextLocator extends PDFTextStripper {

    private static String key_string;
    private static float x;
    private static float y;

    public PDFTextLocator() throws IOException {
        x = -1;
        y = -1;
    }

    /**
     * Takes in a PDF Document, phrase to find, and page to search and returns the x,y in float array
     * @param document
     * @param phrase
     * @param page
     * @return
     * @throws IOException
     */
    public static float[] getCoordiantes(PDDocument document, String phrase, int page) throws IOException {
        key_string = phrase;
        PDFTextStripper stripper = new PDFTextLocator();
        stripper.setSortByPosition(true);
        stripper.setStartPage(page);
        stripper.setEndPage(page);
        stripper.writeText(document, new OutputStreamWriter(new ByteArrayOutputStream()));
        y = document.getPage(page).getMediaBox().getHeight()-y;

        return new float[]{x,y};
    }

    /**
     * Override the default functionality of PDFTextStripper.writeString()
     */
    @Override
    protected void writeString(String string, List<TextPosition> textPositions) throws IOException {
        if(string.contains(key_string)) {
            TextPosition text = textPositions.get(0);
            if(x == -1) {
                x = text.getXDirAdj();
                y = text.getYDirAdj();
            }        
        }
    }
} 
```

以下是 Maven 依赖项详细信息，

```
<dependency>
    <groupId>org.apache.pdfbox</groupId>
    <artifactId>pdfbox</artifactId>
    <version>2.0.16</version>
</dependency> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-13T02:37:52.887

我使用 IKVM 转换 PDFBox.NET 1.8.9 得到了这个工作。在 C# 和 .NET 中。

我终于发现字符（字形）坐标是 .NET 程序集私有的，但可以使用`System.Reflection`.

我在这里发布了一个获取 WORDS 坐标并将它们绘制回使用 SVG 和 HTML 的 PDF 图像的完整示例：[https ://github.com/tsamop/PDF_Interpreter](https://github.com/tsamop/PDF_Interpreter)

对于下面的示例，您需要 PDFbox.NET：http://www.squarepdf.net/pdfbox-in-net ，并在您的项目中包含对它的引用[。](http://www.squarepdf.net/pdfbox-in-net)

我花了很长时间才弄清楚，所以我真的希望它可以节省别人的时间！！

如果您只需要知道在哪里查找字符和坐标，那么一个非常精简的版本将是：

```
 using System;
using System.Reflection;

using org.apache.pdfbox.pdmodel;
using org.apache.pdfbox.util;

  // to test run pdfTest.RunTest(@"C:\temp\test_2.pdf");

class pdfTest
{
    //simple example for getting character (gliph) coordinates out of a pdf doc.
    // a more complete example is here:   https://github.com/tsamop/PDF_Interpreter
    public static void RunTest(string sFilename)
    {
    //probably a better way to get page count, but I cut this out of a bigger project.
    PDDocument oDoc = PDDocument.load(sFilename);
        object[] oPages = oDoc.getDocumentCatalog().getAllPages().toArray();

        int iPageNo = 0; //1's based!!
        foreach (object oPage in oPages)
        {
            iPageNo++;

            //feed the stripper a page.
            PDFTextStripper tStripper = new PDFTextStripper();
            tStripper.setStartPage(iPageNo);
            tStripper.setEndPage(iPageNo);
            tStripper.getText(oDoc);

            //This gets the "charactersByArticle" private object in PDF Box.
            FieldInfo charactersByArticleInfo = typeof(PDFTextStripper).GetField("charactersByArticle", BIndingFlags.NonPublic | BindingFlags.Instance);
            object charactersByArticle = charactersByArticleInfo.GetValue(tStripper);

            object[] aoArticles = (object[])charactersByArticle.GetField("elementData");

            foreach (object oArticle in aoArticles)
            {
                if (oArticle != null)
                {

                    //THE CHARACTERS within the article
                    object[] aoCharacters = (object[])oArticle.GetField("elementData");

                    foreach (object oChar in aoCharacters)
                    {

                        /*properties I caulght using reflection:
                         * endX, endY, font, fontSize, fontSizePt, maxTextHeight, pageHeight, pageWidth, rot, str textPos, unicodCP, widthOfSpace, widths, wordSpacing, x, y
                         * 
                         */
                        if (oChar != null)
                        {
                            //this is a really quick test.  
                            // for a more complete solution that pulls the characters into words and displays the word positions on the page, try this:  https://github.com/tsamop/PDF_Interpreter
                            //the Y's appear to be the bottom of the char?
                            double mfMaxTextHeight = Convert.ToDouble(oChar.GetField("maxTextHeight")); //I think this is the height of the character/word

                            char mcThisChar = oChar.GetField("str").ToString().ToCharArray()[0];
                            double mfX = Convert.ToDouble(oChar.GetField("x"));
                            double mfY = Convert.ToDouble(oChar.GetField("y")) - mfMaxTextHeight;

                            //CALCULATE THE OTHER SIDE OF THE GLIPH
                            double mfWidth0 = ((Single[])oChar.GetField("widths"))[0];
                            double mfXend = mfX + mfWidth0; // Convert.ToDouble(oChar.GetField("endX"));

                            //CALCULATE THE BOTTOM OF THE GLIPH.
                            double mfYend = mfY + mfMaxTextHeight; //  Convert.ToDouble(oChar.GetField("endY"));

                            double mfPageHeight = Convert.ToDouble(oChar.GetField("pageHeight"));
                            double mfPageWidth = Convert.ToDouble(oChar.GetField("pageWidth"));

                            System.Diagnostics.Debug.Print(@"add some stuff to test {0}, {1}, {2}", mcThisChar, mfX, mfY);

                        }
                    }

                }
            }

        }
    }
}

using System.Reflection;

/// <summary>
/// To deal with the Java interface hiding necessary properties! ~mwr
/// </summary>
public static class GetField_Extension
{
    public static object GetField(this object randomPDFboxObject, string sFieldName)
    {
            FieldInfo itemInfo = randomPDFboxObject.GetType().GetField(sFieldName, BindingFlags.NonPublic | BindingFlags.Instance);
            return itemInfo.GetValue(randomPDFboxObject);
    }

} 
```

# spring-mvc - Spring 3.1 ReloadableResourceBundleMessageSource 和 Apache Tiles 2.2.2

> ID：11873803
> 
> 赞同：1
> 
> 时间：2012-08-08T21:56:31.760
> 
> 标签：spring-mvc, internationalization, jstl, servlet-3.0, tiles2

看似简单的任务，结果却是几个小时的痛苦。我在没有 web.xml 文件的 JavaEE 6 和 Servlet 3.0.1 api 上构建 Spring 3.1 MVC 应用程序。我有一个 像这个片段一样的*WebMvcConfiguration*类：

```
@Configuration
@EnableWebMvc
@ComponentScan(basePackages = "be.collectortools.collectorsite")
public class MvcConfig extends WebMvcConfigurationSupport {

@Bean
    public ReloadableResourceBundleMessageSource messageSourceBean() {
        String[] basenames = {"classpath:messages"};

        ReloadableResourceBundleMessageSource resourceBundle = new ReloadableResourceBundleMessageSource();
        resourceBundle.setBasenames(basenames);
        resourceBundle.setDefaultEncoding("UTF-8");
        return resourceBundle;
    }
} 
```

我已经成功设置了 Apache Tiles 2.2.2 和 2 个基本控制器。现在我想将 ResourceBundles 添加到正在工作的 Spring/Tiles 应用程序中，但我无法让它们工作。

搜索后，我发现了一些可能出错的地方：

*   我应该在我的 JSP 页面中使用*fmt:message key="application.header"*还是应该使用*spring:message code="application.header" ？*第一个忽略未找到的值，第二个抛出错误。
*   我使用*ReloadableResourceBundleMessageSource*应该“更好”或至少比*ResourceBundleMessageSource*更新，可以吗？
*   *ReloadableResourceBundleMessageSource*从更多位置加载文件，因此我指定了*类路径：*
*   我将 messages.properties 文件放在 src/main/resources 文件夹中
*   当不将语言环境添加到包名称的末尾时，这仍然是正确的，这被用作（默认）后备？无论哪种方式添加“en_US”语言环境都无济于事。

**错误**：

```
root cause

javax.servlet.jsp.JspTagException: No message found under code 'application.header' for locale 'en_US'.
    org.springframework.web.servlet.tags.MessageTag.doStartTagInternal(MessageTag.java:184) 
```

war 文件也没有在 Eclipse 中运行我手动将它部署到我的本地 tomcat 7.0.23。这也让我可以更轻松地查看部署的文件结构并更好地控制。

我不知道我做错了什么，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T22:14:45.307

MessageSource bean 必须命名为`messageSource`not `messageSourceBean`- 如果您将 @Bean 更改为以下内容，它应该正确解析消息：

```
@Bean
public ReloadableResourceBundleMessageSource messageSource() {
    String[] basenames = {"classpath:messages"};

    ReloadableResourceBundleMessageSource resourceBundle = new ReloadableResourceBundleMessageSource();
    resourceBundle.setBasenames(basenames);
    resourceBundle.setDefaultEncoding("UTF-8");
    return resourceBundle;
} 
```

# jquery - 疯狂地尝试在 ROR 应用程序中启用 JQuery

> ID：11873807
> 
> 赞同：0
> 
> 时间：2012-08-08T21:56:41.250
> 
> 标签：jquery, ruby, ruby-on-rails-3

我一直在尝试在我正在开发的 ROR（Rails 3.2、Ruby 1.9.3.p0）应用程序上启用 JQuery。我已经安装了 jquery-rails 和 jquery-ui-rails gems，捆绑安装，rails 生成 jquery:install 并使用 javascript/css 包含标签以及关闭流水线并将文件转储到 public\javascripts 中进行了测试。

我可以从[http://learn.jquery.com/jquery-ui/getting-started/](http://learn.jquery.com/jquery-ui/getting-started/)运行 jquery 测试页面，“*基本概述：在网页上使用 jQuery UI* ”部分。

在同一个盒子/不同端口上关闭 Apache 服务器没有问题，所以不是浏览器问题。我修改了我的 model#index 页面之一，只呈现相同的 jquery 测试页面，但仍然没有乐趣。可能是WEBrick问题吗？WEBrick 日志显示使用 304 Not Modified 检索的 .js 文件（包括 jquery.js 文件）。有没有办法增强 WEBrick 日志记录以显示网页焦点事件？

我读过 Rails 3.2 上的 jquery 应该在没有 javascript/css_include_tag 修改的情况下运行，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T09:21:36.640

实际上，在 rails 3.2 中，您不需要额外的 jquery 宝石。从宝石你只需要

```
gem 'jquery-rails' 
```

**你准备好了**

在您的布局中添加

```
<%= javascript_include_tag "application" %> #includes the main .js | .coffee file 
```

**应用程序.js**

```
//= require jquery      -> Imports jquery to asset
//= require jquery_ujs  
//= require_tree .      -> Imports an js or coffee file in pipe 
```

所有启用资产管道的人，如果您**不想使用资产管道**（请使用它）*下载 jquery 文件，将其添加到供应商 javascripts*并使用 javascript_include_tag 调用它。

# android - 如何从服务中获取更新信息？

> ID：11873815
> 
> 赞同：0
> 
> 时间：2012-08-08T21:57:08.130
> 
> 标签：android, class, service, android-intent, android-activity

我正在编写一个 Android 应用程序，API 级别 10。

我有一个主要活动，它启动服务并将包含类对象的包裹作为服务意图的额外内容。服务处理的事件更新存储在类对象中的信息。如何从主要活动访问新的类对象？有没有办法向主要活动发送意图或消息？

提前致谢。我有点含糊，所以如果您需要澄清，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T22:22:05.677

是的，Android 提供了 Handlers 来做你需要做的事情。请阅读本文档[http://developer.android.com/reference/android/os/Handler.html](http://developer.android.com/reference/android/os/Handler.html)

但请记住，处理程序只能处理字符串消息，因此您可以做的是在主活动中拥有类对象的副本，然后使用处理程序接收到的消息继续修改该对象（进行条件检查对于每种类型的消息并相应地修改对象）。这有意义吗？

# sql-server - 将同一列中的数据放在结果集中的不同列中

> ID：11873816
> 
> 赞同：0
> 
> 时间：2012-08-08T21:57:14.953
> 
> 标签：sql-server, tsql

我有一个我不确定处理的请求。我正在考虑使用 PIVOT，但我不确定这是否是可行的方法。

我有以下数据：

```
EmployeeA, DepartmentB, 1/10/2010
EmployeeA, DepartmentA, 1/1/2000
EmployeeB, DepartmentC, 1/3/2011 
```

他们只希望为不同部门的员工提供输出。看起来像这样的东西（由于日期，顺序很重要）：

```
EmployeeA, DepartmentA, DepartmentB 
```

任何帮助表示赞赏。出于某种原因，我的头脑没有找到一个好的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T22:09:12.033

您可以通过`JOIN`在表格上执行 self ，然后使用 a`PIVOT`以您想要的格式获取数据来做到这一点：

```
SELECT *
FROM 
(
    SELECT t1.emp, t1.dept, t1.dt
    FROM  test t1
    INNER JOIN test t2
        ON t1.emp = t2.emp
        AND t1.dept != t2.dept
) x
PIVOT
(
    min(dt)
    for dept in ([A], [B], [C], [D], [E])
) p 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/9dca31/1)

如果您删除，`JOIN`您将获得所有记录，但您声明您只想要已在多个部门中的记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T01:15:11.817

这是我得到的答案，主要基于你的工作。Pivot 不起作用，因为我不提前知道类别（在本例中为部门），我只能拥有其中两个。

也许有更简单的方法。我没有使用 CTE，因为我认为这也适用于 Sybase，但我认为这并不支持。

```
 select Meta1.[Employee ID], 
Meta1.Department as PreviousDepartment,
Meta2.Department as CurrentDepartment
from
(
SELECT t1.[First Name], t1.[Last Name],
t1.[Employee ID], t1.Department, t1.[Hire Date],
ROW_NUMBER() over(PARTITION by t1.[EMPLOYEE ID] order by t1.[Hire Date]) as RowNum
FROM  EMPLOYEE t1
INNER JOIN EMPLOYEE t2
    ON t1.[Employee ID] = t2.[Employee ID]
    AND t1.Department != t2.Department
) Meta1  
inner join
(
SELECT t1.[Employee ID], t1.Department, t1.[Hire Date],
ROW_NUMBER() over(PARTITION by t1.[EMPLOYEE ID] order by t1.[Hire Date]) as RowNum
FROM  EMPLOYEE t1
INNER JOIN EMPLOYEE t2
    ON t1.[Employee ID] = t2.[Employee ID]
    AND t1.Department != t2.Department
) Meta2
on Meta1.[Employee ID]=Meta2.[Employee ID]
where Meta1.RowNum=1
and Meta2.RowNum=2 
```

# html - 垂直对齐在 HTML 中不起作用

> ID：11873841
> 
> 赞同：2
> 
> 时间：2012-08-08T22:00:18.407
> 
> 标签：html, css, vertical-alignment

我用 CSS 创建了一个表格，我想将单元格值放在中间垂直对齐。我使用这个 CSS 代码：

```
div.cell
{
   float: right;
   border-left: 1px #293F6F solid;
   border-bottom: 1px #293F6F solid;
   height: 55px;
   width: 27%;
   text-align: center;

   display: table-cell;
   vertical-align: middle; 
} 
```

和我的html代码：

```
<div class="cell">XYZ</div> 
```

但它不起作用。其他垂直对齐类型，如“text-bottom”和“bottom”和“top”也不起作用。问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T22:19:09.983

如果这`float: right;`很重要，我建议删除`height: 55px;`div 并使用`padding-top/bottom`来定位文本。

# arrays - Perl 映射函数未按预期工作

> ID：11873845
> 
> 赞同：0
> 
> 时间：2012-08-08T22:00:36.237
> 
> 标签：arrays, perl, map

我需要一些关于 Perl 中的 map 函数的帮助，它似乎对我的数组进行了裁剪。

```
#!/usr/bin/perl

use Math::Trig;

my @Degre = map {rand(360)} (1..2000);
my @step= map {rand(.5)} (1..2000);
my @aa = map {rand(2000)} (1..2000);
my @bb = map {rand(2000)} (1..2000);

for ($i = 0; $i <=100; $i++)

{
my @xx = map {$aa[$_]*(cos($Degre[$_])*(pi/180))}(1..2000);
my @yy = map {$bb[$_]*(cos($Degre[$_])*(pi/180))}(1..2000);

@Degre = map {@Degre[$_] + @step[$_]} (1..2000);

print "@bb[1]  @aa[1]  @Degre[1] @step[1] \n";
} 
```

现在这个输出给出了

```
1146.56471948439  1909.33326800968  329.443529905881 0.117635819122725
1146.56471948439  1909.33326800968  343.482356802257 0.117635819122725
1146.56471948439  1909.33326800968  164.500200570578 0.117635819122725
1146.56471948439  1909.33326800968  252.734665366625 0.117635819122725
1146.56471948439  1909.33326800968  274.983382178209 0.117635819122725
1146.56471948439  1909.33326800968  324.609187610893 0.117635819122725
1146.56471948439  1909.33326800968  261.96207333817 0.117635819122725
1146.56471948439  1909.33326800968  279.442105351764 0.117635819122725 
```

第三列是度数，我不明白为什么当我预计它会以 0.117635..... 步长增加时它似乎随机跳跃？

干杯

更新

为了确认我正在尝试让地图声明执行以下操作

```
for ($x = 0; $x <=2000; $x++)
{

$degre[$x] = $degre[$x] + $step[$i]
} 
```

将代码更改为

```
for ($i = 0; $i <=100; $i++)

{
my @xx = map {$aa[$_]*(cos($Degre[$_])*(pi/180))}(1..2000);
my @yy = map {$bb[$_]*(cos($Degre[$_])*(pi/180))}(1..2000);

#@Degre = map {$Degre[$_] + $step[$_]} (1..2000);
for ($x = 0; $x <=2000; $x++)

{
$Degre[$x] = $Degre[$x] + $step[$x];
} 
```

给出以下输出

```
738.346205775827  646.171091419262  395.07480695473 0.484472140779317
738.346205775827  646.171091419262  395.559279095509 0.484472140779317
738.346205775827  646.171091419262  396.043751236288 0.484472140779317
738.346205775827  646.171091419262  396.528223377068 0.484472140779317
738.346205775827  646.171091419262  397.012695517847 0.484472140779317
738.346205775827  646.171091419262  397.497167658626 0.484472140779317
738.346205775827  646.171091419262  397.981639799406 0.484472140779317
738.346205775827  646.171091419262  398.466111940185 0.484472140779317 
```

正如您所看到的，度数列现在每次考虑循环时都会按步长值正确递增。那么为什么地图不做同样的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T22:16:56.227

`@Degre`每次 as`aa` `bb`和`step`保持不变时，您都会在循环内更改。

```
 print "$aa[1]  $bb[1]  $Degre[1] $step[1] \n"; 
```

以上显示了正确的值，如

```
 @Degre = map {$Degre[$_] + $step[$_]} (1..2000); 
```

在您的打印语句中打印`@xx`and而不是and并查看值根据计算发生变化。`@yy``@aa``@bb`

在循环`@Degre=sort(@Degre);`之前放一个并查看结果。`for`下面是排序后的结果——

```
1726.50146484375  681.5185546875  0.624771118164063 0.456436157226563 
1726.50146484375  681.5185546875  1.15629577636719 0.456436157226563 
1726.50146484375  681.5185546875  1.7493896484375 0.456436157226563 
1726.50146484375  681.5185546875  2.49296569824219 0.456436157226563 
1726.50146484375  681.5185546875  2.861083984375 0.456436157226563 
1726.50146484375  681.5185546875  3.20767211914063 0.456436157226563 
1726.50146484375  681.5185546875  3.44265747070313 0.456436157226563 
1726.50146484375  681.5185546875  11.8232574462891 0.456436157226563 
1726.50146484375  681.5185546875  12.2711944580078 0.456436157226563 
1726.50146484375  681.5185546875  12.3104858398438 0.456436157226563 
1726.50146484375  681.5185546875  13.2642059326172 0.456436157226563 
1726.50146484375  681.5185546875  13.4784698486328 0.456436157226563 
1726.50146484375  681.5185546875  103.224014282227 0.456436157226563 
1726.50146484375  681.5185546875  103.868133544922 0.456436157226563 
1726.50146484375  681.5185546875  104.103759765625 0.456436157226563 
1726.50146484375  681.5185546875  104.71240234375 0.456436157226563 
```

如您所见，计算是正确的，即第一行`0.624771118164063 + 0.456436157226563`中的`1.15629577636719`数据是第二行中的数据，依此类推。

然而，在某个点上会有一个`3.44265747070313`跳跃`11.8232574462891`。我不确定为什么会发生这种情况，但我的假设是索引在某个时候出错了。这是使用下面的代码解决的

```
@Degre = map {$Degre[$_] + $step[$_]} (0..@step-1); 
```

这次输出在第三列中更加一致 -

```
1139.18230471501  192.716943394942  183.715442551381 0.45937396317494 
1139.18230471501  192.716943394942  184.174816514556 0.45937396317494 
1139.18230471501  192.716943394942  184.634190477731 0.45937396317494 
1139.18230471501  192.716943394942  185.093564440906 0.45937396317494 
1139.18230471501  192.716943394942  185.552938404081 0.45937396317494 
1139.18230471501  192.716943394942  186.012312367256 0.45937396317494 
1139.18230471501  192.716943394942  186.471686330431 0.45937396317494 
1139.18230471501  192.716943394942  186.931060293605 0.45937396317494 
1139.18230471501  192.716943394942  187.39043425678 0.45937396317494 
1139.18230471501  192.716943394942  187.849808219955 0.45937396317494 
1139.18230471501  192.716943394942  188.30918218313 0.45937396317494 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T22:18:55.817

添加后

```
use strict;
use warnings; 
```

我得到了完全不同的输出：

```
Scalar value @Degre[$_] better written as $Degre[$_] at test3 line 20.
Scalar value @step[$_] better written as $step[$_] at test3 line 20.
Scalar value @bb[1] better written as $bb[1] at test3 line 23.
Scalar value @aa[1] better written as $aa[1] at test3 line 23.
Scalar value @Degre[1] better written as $Degre[1] at test3 line 23.
Scalar value @step[1] better written as $step[1] at test3 line 23.
Global symbol "$i" requires explicit package name at test3 line 14.
Global symbol "$i" requires explicit package name at test3 line 14.
Global symbol "$i" requires explicit package name at test3 line 14.
Execution of test3 aborted due to compilation errors. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T22:15:57.290

我想你有@，你的意思是$。

```
@Degre = map {@Degre[$_] + @step[$_]} (1..2000); 
```

如果您尝试访问 @Degre 和 @step 的元素，那么您需要 $Degre[$_] 等。

我不清楚@xx/yy 是什么——它们似乎没有被使用

# linux - SSH 记录 Dreamhost

> ID：11873849
> 
> 赞同：0
> 
> 时间：2012-08-08T22:01:07.927
> 
> 标签：linux, ssh, dreamhost

如何将所有 ssh 尝试记录到我的 Dreamhost 服务器上？或者如果日志已经存在，它在哪里？我检查了 logs/example.com/html/ 我找不到任何 ssh 登录的日志文件。

我想看看我的服务器中所有失败的尝试或成功的 SSH 尝试何时发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T22:25:13.210

致电支持以获取日志，因为这些 ssh 日志不会暴露在它们通过 SSH 向您显示的日志文件夹中（除非您有 VPS 帐户）。尽管如此，他们还是保留了所有这些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T12:57:43.720

在 Dreamhost（以及其他未明确禁用“last”命令的主机/服务器）上，您可以使用以下命令获取所有最近登录尝试的列表：

```
last -i | grep <youruser>
last -if /var/log/wtmp.1 | grep <youruser> 
```

第一个命令将为您提供当月的登录历史记录，而第二个命令将为您提供上个月的登录历史记录。

* * *

有关更多信息，请参阅 Dreamhost Wiki：[http ://wiki.dreamhost.com/Troubleshooting_Hacked_Sites](http://wiki.dreamhost.com/Troubleshooting_Hacked_Sites)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T22:11:21.093

如果你在 Ubuntu/Debian Linux 下，你可以在这里得到这个日志：

```
/var/log/auth.log 
```

# google-api - Google Apps脚本通过UI渲染图表，如何显示图表

> ID：11873852
> 
> 赞同：0
> 
> 时间：2012-08-08T22:01:14.640
> 
> 标签：google-api, google-apps-script, google-apps

我在谷歌应用程序脚本中创建了一个 UI 网络应用程序，它访问电子表格中的数据库，操作数据，然后将其放入图表中。现在我的问题是我让图表重新显示到 Ui 中。我什至不知道这是否有可能，但类似的事情。这是我迄今为止尝试过的：

*   首先，我在 doGet 函数中创建了一个图表，然后在我从用户那里获取一些信息后尝试访问和编辑。问题是当我 .build() 图表时，它变成了一个通用对象并且无法编辑。

    其次，我在获取信息后尝试将图表添加到 Ui，但我无法让 ui 更新。再次，我不知道正确的方法来做到这一点。

如果您需要任何其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T06:04:15.080

您必须完全重新创建图表，即每次更改电子表格（例如插入新行）时，您必须从中获取数据，构建新图表，删除旧图表并放置新图表而不是删除的图表.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T22:39:31.580

这是 Google 最近发布的一篇很棒的博客文章，内容是[在 Apps Script 中编写仪表](http://googleappsdeveloper.blogspot.com.au/2012/07/introducing-dashboards-in-google-apps.html)板，并在开发人员网站上提供了一个新的[图表仪表板教程。](https://developers.google.com/apps-script/articles/charts_dashboard)令我震惊的是，它可能适合您，因为它可以让您准备数据，但是您可以允许用户通过图表控件与 UI 进行交互，而您不必自己在“本机”uiApp 中进行太多连接.

让我们知道你的进展。

# requirejs - PhantomJS require() 一个相对路径

> ID：11873853
> 
> 赞同：19
> 
> 时间：2012-08-08T22:01:15.970
> 
> 标签：requirejs, phantomjs

在 PhantomJS 脚本中，我想加载一个自定义模块，但似乎相对路径在 PhantomJS 中不起作用？

脚本.js：

```
var foo = require('./script/lib/foo.js');
foo.bar('hello world');
phantom.exit(); 
```

foo.js：

```
exports.bar = function(text){
  console.log(text);
} 
```

*   根据 fs.workingDirectory 我在好目录中
*   foo.js 不在 phantomjs 的查找路径中

我错过了什么吗？

编辑：

inject() 并不重要，因为我不需要将 JS 注入 HTML 页面，而是加载我自己的模块，如 require('fs') 但使用相对路径。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-05-06T15:18:44.097

经过大量时间搜索相同的东西，这是我的理解，虽然我可能是错的：

*   PhantomJS 不使用 Node 的`require`，而是它自己的`require`，所以情况有所不同
*   当提供 phantomjs 的相对路径时`require`，它总是被解释为相对于**当前工作目录**
*   PhantomJS 没有实现 node's `__dirname`，因此没有直接的方法来获取脚本的目录

我发现最不烦人的解决方案：

*   如果使用 phantomjs 纯，没有 casperjs ：

    ```
    require(phantom.libraryPath + '/script/lib/foo.js') 
    ```

*   如果使用 casperjs ：

    ```
    var scriptName = fs.absolute( require("system").args[3] );
    var scriptDirectory = scriptName.substring(0, scriptName.lastIndexOf('/'));
    require(scriptDirectory + '/script/lib/foo.js') 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-01T09:39:06.953

要加载自己的模块，正确的做法是使用 module.exports，如下所示：**foo.js**

```
function bar(text) {
   console.log(text);
}

exports.bar = bar 
```

在**script.js**（使用 phantomjs script.js 执行）中：

```
var foo = require('./script/lib/foo');
foo.bar('hello world');
phantom.exit(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-06T08:52:09.160

我的解决方案是从外部文件夹`json`的子文件夹中加载资源文件（比如文件） ，如下结构：`phantomjs`

```
├── consumer.js
├── assets
    ├── data.json
    ├── loader.js 
```

假设`data.json`必须由`consumer`模块加载，并且该模块被这台机器上的其他地方调用，在项目根文件夹之外，`fs.workingDirectory`将不起作用，因为它将是调用程序文件的路径。所以为了解决这个问题，我`loader`在文件夹中做了一个简单的模块`assets`，我要加载的文件是：

```
(function() {

var loader = {
    load : function(fileName) {
        var res=require('./'+fileName);
        return res;
    }
}
module.exports=loader;

}).call(this); 
```

`loader`因此，我从模块中调用模块，`consumer`例如

```
var loader=require('./data/loader');
var assets=loader.load('data.json'); 
```

就是这样。

笔记。这里`require`是`phantomjs`require 而不是`node`版本，所以它的工作方式有点不同。在这种情况下，它`data.json`是一个没有`module.exports`声明的 json 数组。调用方法时，数组将直接支持在`assets`变量中。`loader.load(fileName)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T07:06:34.797

您是否尝试过使用**injectJs(filename)**

摘自 PhantomJS 文档：

> 从指定文件注入外部脚本代码。如果在当前目录中找不到该文件，则使用 libraryPath 进行额外查找。
> 
> 如果注入成功，此函数返回 true，否则返回 false。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-21T10:51:44.247

您正在运行哪个 PhantomJS 版本？1.7 中添加了对用户提供的模块的支持。

# javascript - 如何检查 charCodeAt() 是否可配置

> ID：11873857
> 
> 赞同：0
> 
> 时间：2012-08-08T22:01:27.110
> 
> 标签：javascript, firebug, enumerable, configurable

[这里](https://stackoverflow.com/questions/6262132/why-ie-developer-tools-seems-to-be-more-descriptive-than-firebug-in-this-example)描述了如何`innerHTML`使用 Firebug/FF Web 控制台检查属性是否可配置和可枚举。如何检查相同的`charCodeAt`功能？`Object.getOwnPropertyDescriptor(HTMLElement.prototype,"charCodeAt")` 返回`undefined`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T22:08:16.200

该[`.charCodeAt()`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/charCodeAt)属于[Strings](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String)，不属于`HTMLElement`：

```
Object.getOwnPropertyDescriptor(String.prototype,"charCodeAt") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T22:09:18.380

这是因为`charCodeAt`不是 的方法`HTMLElement`，它是`String`-Object 中的方法（或者更确切地说是它的原型）

```
Object.getOwnPropertyDescriptor(String.prototype,"charCodeAt") 
```

# sql-server-2008 - How do I upgrade from SQL Server 2008 R2 Express to 2008 R2 Developer

> ID：11873858
> 
> 赞同：0
> 
> 时间：2012-08-08T22:01:39.013
> 
> 标签：sql-server-2008, sql-server-2008-r2

I just got my copy of SQL Server 2008 R2 Developer edition, and I'm trying to install it. I wasn't able to find any specific instructions after an exhaustive search, although there is information overload on all surrounding issues.

When I insert the cd, it runs for a good deal of time, but never runs. In windows explorer, one file is shown on the cd, "Track09.cda."

Can anyone point me in the right direction?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T22:07:04.820

I'm not sure you have the right CD in your hand. When I pop my SQL2008 R2 Dev Edition CD in and view the contents in Windows Explorer, I see a whole bunch of files including *.MSI, *.EXE, etc. etc.

Back to your question, I would back up your database(s), then uninstall the Express version and do a clean install of the 2008 Dev edition. I've done this several times myself so I know this method will work without any issues.

# php - CakePHP - 扩展 __construct 函数时遇到问题

> ID：11873861
> 
> 赞同：0
> 
> 时间：2012-08-08T22:02:08.970
> 
> 标签：php, cakephp

我目前正在尝试通过 FormAuthenticate 类在 CakepPHP（在`cake\lib\Cake\Controller\Component\Auth`文件夹中）中扩展 BaseAuthenticate 类，并且在扩展构造函数时遇到了麻烦。

我正在尝试扩展构造函数以声明一个新对象，然后可以在整个类中使用该对象。

```
//BaseAuthenticate.php

public function __construct(ComponentCollection $collection, $settings) {
    $this->_Collection = $collection;
    $this->settings = Hash::merge($this->settings, $settings);
}

//ExtendedFormAuthenticate.php

public function __construct()
{
    parent::__construct(ComponentCollection $collection, $settings);
} 
```

如果我在 ExtendedFormAuthenticate.php 中使用上述 __construct 我会收到错误消息`syntax error, unexpected T_VARIABLE`

```
public function __construct()
{
    parent::__construct($collection, $settings);
} 
```

如果我在 ExtendedFormAuthenticate.php 中使用上面的 __construct ，我会收到`undefined variable`错误消息，因为我没有填充这些变量，但我不知道用什么来填充它们。

有谁知道我如何成功扩展 BaseAuthenticate.php 构造函数？或者，有谁知道如何声明要在类中使用的对象，而不是在 __construct 函数中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-08T22:08:42.917

尝试改变这个：

```
public function __construct()
{
    parent::__construct(ComponentCollection $collection, $settings);
} 
```

对此：

```
public function __construct(ComponentCollection $collection, $settings)
{
    parent::__construct($collection, $settings);
} 
```

# c# - 在中继器控件中查找项目？

> ID：11873864
> 
> 赞同：0
> 
> 时间：2012-08-08T22:02:36.473
> 
> 标签：c#, asp.net

这个可能很简单，但无论如何都在这里。

我有一个`List<Object>`绑定到中继器的。转发器将所有字段绑定到文本框，***除了`Id`***. 在我的网页中，每当用户添加新项目时，我都会`Object`在我的列表中创建一个具有唯一性的新项目`Id`并重新绑定我的转发器。

在我的代码中的某个时刻，我试图从转发器中读取文本框控件并将它们放入我的`List<Object>`. 但是，我需要访问该`Id`字段才能知道要插入哪个列表项。`Id`当我通过中继器时，如何获得具体信息？

我知道我可以在转发器控件中创建一个带有 ID 的隐藏字段并以这种方式获取它，但是有没有更简洁的方法来做到这一点？

例子：

```
if (DependentRptr.Items.Count > 0)
{
    for (int count = 0; count < DependentRptr.Items.Count; count++)
    {
        int did = (form.UserId + (count + 1)); //I'm trying to get the id of this field here.
        ...get control info...

        var temp = AddedDependents.ToList().Find(p => p.Id == did); //here is where I search with the id
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T22:14:54.530

A`Repeater`实际上被认为是一个*只读*控件。

它是最简单的内置数据绑定控件之一。

它不支持*开箱即用的*编辑、插入、删除等操作。如果您想在转发器中使用这些操作之一，则必须编写自定义代码来完成它。甚至不支持开箱即用的分页和排序`Repeater`。

`Repeater`因此，在使用控件时没有更好的方法来满足您的要求，因此 a`HiddenField`将是满足您要求的好方法。

但是，根据您的具体需要，您应该考虑使用另一个数据绑定控件。

For example, the [ListView](http://msdn.microsoft.com/en-us/library/bb398790.aspx) control **is also based on templates like the `Repeater`** but it also supports common actions like editing, inserting and deleting

A `ListView` control contains the `DataKeyNames` property used to keep track of the ID's of each row

# c# - 在我的程序集中找不到 IConnectionIdFactory

> ID：11873870
> 
> 赞同：0
> 
> 时间：2012-08-08T22:03:17.440
> 
> 标签：c#, asp.net, signalr

`CreateConnectionId`在signalR中创建ConnectionId时，我正在尝试扩展我的功能以添加自定义逻辑

```
public class MyConnectionFactory : IConnectionIdFactory
{
   public string CreateConnectionId(IRequest request){
      //Code Goes Here
   }
} 
```

但`IConnectionIdFactory`不会在我的智能感知中得到解决，因为它在我的程序集中找不到它。我的参考资料文件夹中有以下参考资料：

SignalR、SignalR.Hosting.AspNet、SignalR.Ninject

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T05:58:10.970

它在最近的版本中被重命名。`IConnectionIdFactory`界面重命名为`IConnectionIdGenerator`.

您可以在命名空间下找到该接口`SignalR`。

您的代码应如下所示：

```
public class MyConnectionFactory : IConnectionIdGenerator
{
    public string GenerateConnectionId(IRequest request)
    {
        return "some generated ID";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T22:45:35.387

我猜你在某处看一些旧样本？您引用的是哪个版本的 SignalR？我相信这是一个相当旧的接口，早于完成的 MessageBus 返工。我*相信*您现在正在寻找的界面是[`IIdGenerator`](https://github.com/drub0y/SignalR/blob/master/SignalR/MessageBus/IIdGenerator.cs).

# oracle - 11gR2 RAC 问题的预安装请求

> ID：11873873
> 
> 赞同：1
> 
> 时间：2012-08-08T22:03:46.123
> 
> 标签：oracle, oracle11g, oracle11gr2

在安装 11gR2 RAC 之前，是否需要在要进行 RAC 的 2 个节点之间打开端口？它还需要能够在节点之间相互ping通以获取扫描名称吗？操作系统是 linux x86_64 redhat。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T04:29:28.610

您真的应该阅读 oracle 提供的为期 2 天的真实应用程序集群指南。基本上，每个节点都需要以下内容：

*   公共IP
*   虚拟 IP（必须与公共 IP 在同一子网中）
*   私人IP

此外，您还需要 3 个扫描地址。

在开始安装集群件之前，扫描地址和虚拟 IP**必须**不可 ping。公共和私人必须是可 ping 的。

# objective-c - 像在 HTML 中一样访问 UI 输入元素

> ID：11873875
> 
> 赞同：0
> 
> 时间：2012-08-08T22:03:52.760
> 
> 标签：objective-c, ios, uitextfield

我将多个输入转储到一个视图中。它们由 UITextFields、UIPickerViews 和 UIDatePickers 组成。

他们每个人都有一个ID和一个Key，在保存输入值时需要保存。因此，当单击“保存”按钮时，我需要循环并存储以下内容：

```
{
   ID: 'inputid',
   Key: 'yearly',
   Value: (UITextField value)
} 
```

在 HTML 中，我只需将这些值添加到输入 ( `<input type="text" id="inputid" name="yearly" />`) 中，然后使用 $(input).attr('id') 等循环遍历每个值。

在Objective-C中，我能想到的唯一方法是在绘制输入时保留此信息的哈希表，然后针对UITextField的“标签”字段存储某种标识符，然后通过获取来自视图的所有输入并将它们与哈希表进行比较。

这是正确的方法吗？我在这里错过了一些简单的东西吗？你会怎么做？

**编辑**
为了更好地描述情况，页面上的 UITextFields 的数量是从 XML 文件中提取的，因此我不知道会有多少 UITextFields（所以不能将它们分配给控制器）

我需要一些类似的东西：

```
foreach(var question in ArrayOfQuestions) {
    UITextField *textField = [[UITextField alloc] initWithFrame:];
    textField.attributes["id"] = question.Id;
    textField.attributes["key"] = question.Key;
} 
```

并在保存方法中

```
foreach(var textField in UIView) {
    textField = (UITextField)textField;
    NSString *id = textField.attributes["id"];
    NSString *key = textField.attributes["key"];
} 
```

*这也许是我可以在谷歌中找到的东西，但想不出正确的搜索词并且空手而归。在同一级别，如果您能更好地描述我的要求，请更新我的问题的标题*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T02:58:33.017

关于属性数据的哈希表（NSDictionary），我认为您实际上是最佳解决方案。在视图对象本身中包含过多的语义数据确实是一个糟糕的设计决策，因为它与视图无关。

您需要在代码中具体执行以下操作：

要设置您的视图和属性数据：

```
UIView *containerView; // The view that contains your UITextViews.
NSMutableDictionary *attributes; // A dictionary mapping tags to questions.
NSMutableArray *arrayOfQuestions; // The questions that you've parsed from a file or whatever.

// ...

// Each "question" would be of the form @{ @"id" : ____, @"key" : ____ }
for (NSDictionary *question in arrayOfQuestions) {
    UITextField *textField = [[[UITextField alloc] initWithFrame:aFrame] autorelease];
    [containerView addSubview:textField];
    textField.tag = getATag(); // However you want to tag them.

    // Fancy new objective-C container/object-literal syntax :)
    attributes[@(textField.tag)] = question;
} 
```

然后对于您的“保存”方法：

```
for (UIView *childView in containerView.subviews) {
    if ([childView isKindOfClass:[UITextView class]]) {
        // We know the class and can thus safely typecast the UIView.
        UITextField *textField = (UITextField *)childView;

        NSDictionary *aQuestion = attributes[@(textView.tag)];

        // Now you can access the id and key properties of the question.

        // ... Whatever else you want to do.
    }
} 
```

子视图上的枚举循环是我认为你在这里寻找的大事。这与在 jQuery 中使用选择器执行此操作的方式非常相似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T22:59:12.340

如果将每个元素都设为视图控制器的属性，则可以从任何地方直接访问它们并获取当前值。

因此在附加到保存按钮的方法中，您可以像这样获取 UITextField 的当前字符串值，例如：

```
NSString *currentTextFieldString = self.someTextField.text; 
```

# php - 使用 PHP 读取文件 - fopen/fread

> ID：11873876
> 
> 赞同：1
> 
> 时间：2012-08-08T22:03:54.673
> 
> 标签：php, file, fread

```
<?php

$top = "../top.txt";
$middle = "../middle.txt";
$bottom = "../bottom.txt";
$end = "/st.txt";
$data = "/dt.txt";

$handle1 = fopen($top, "r"); 
$contents1 = fread($handle1, filesize($top)); 
fclose($handle1); 

$handle2 = fopen($end, "r"); 
$contents2 = fread($handle2, filesize($end)); 
fclose($handle2);

$handle3 = fopen($middle, "r"); 
$contents3 = fread($handle3, filesize($middle)); 
fclose($handle3);

$handle4 = fopen($data, "r"); 
$contents4 = fread($handle4, filesize($data)); 
fclose($handle4);

$handle5 = fopen($bottom, "r"); 
$contents5 = fread($handle5, filesize($bottom)); 
fclose($handle5);

echo $contents1;
echo $contents2;
echo $contents3;
echo $contents4;
echo $contents5;

?> 
```

我对它们中的每一个都有这些错误：

*警告：fopen（../top.txt）[function.fopen]：打开流失败：没有这样的文件或目录*

*警告：filesize() [function.filesize]: stat failed for ../top.txt*

*警告：fread()：提供的参数不是有效的流资源*

*警告：fclose()：提供的参数不是有效的流资源*

所有文件和文件夹中的 CHMOD 并设置为 777

所有文件都存在于服务器上

PHP5安装在服务器上

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T22:06:25.507

使用整个路径，而不是 `../top.txt` 使用 `/path/to/top.txt`

或者

你也用 `$top = $_SERVER['DOCUMENT_ROOT'] . "/../top.txt";`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T22:07:53.747

```
$top = "../top.txt"; 
```

表示从您当前的位置向上移动一个文件夹，然后搜索文件`top.txt`。`$middle = "../middle.txt";`和相同`$bottom = "../bottom.txt";`。对于这两个：

```
$end = "/st.txt";
$data = "/dt.txt" 
```

它从根目录搜索。请确保您的文件位于您引用它们的位置。我可能认为您希望在最后两个变量中使用它：

```
$end = "./st.txt";
$data = "./dt.txt" 
```

where`./`代表当前目录。

所以，给你更详细的例子。假设您的 PHP 文件位于，`/var/www/httpdocs/project/phpFile.php`那么您的文件将被链接为：

```
$top = "/var/www/httpdocs/top.txt";
$middle = "/var/www/httpdocs/middle.txt";
$bottom = "/var/www/httpdocs/bottom.txt";

$end = "/st.txt";
$data = "/dt.txt" 
```

所以现在注意最后两个变量的区别——它们保持不变，因为您已将其设置为从根目录 ( `/`) 查找。如果您将使用与 的链接`./`，那么路径将是：

```
$end = "/var/www/httpdocs/project/st.txt";
$data = "/var/www/httpdocs/project/dt.txt" 
```

希望这能解释它。是的，请查看其他人在答案中提到的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T22:40:39.647

从[PHP 手册](http://us.php.net/manual/en/function.fopen.php)：

> 如果 PHP 决定 filename 指定一个本地文件，那么它将尝试在该文件上打开一个流。该文件必须可供 PHP 访问，因此您需要确保文件访问权限允许此访问。如果您启用了安全模式，或者 open_basedir 可能会应用进一步的限制。

我建议您检查[open_basedir](http://www.php.net/manual/en/ini.core.php#ini.open-basedir)和[包含路径](http://us2.php.net/manual/en/function.get-include-path.php)。

这里有一些代码可以帮助你做到这一点：

```
echo 'open_basedir: '.ini_get('open_basedir')."\n";
echo 'Include path: '.get_include_path()."\n";
echo 'Current path: '.__DIR__."\n"; 
```

有了它，您应该能够确认您能够访问 open_basedir 中目录内或目录下的文件。如果 open_basedir 是“空白”，那么 PHP 不应该强制执行任何限制。

如果您真正需要的是解释 PHP 通常如何处理文件路径（正如其他一些答案似乎表明的那样），[请阅读此内容](http://us2.php.net/manual/en/function.include.php)（也来自手册）：

> 根据给定的文件路径包含文件，如果没有给出，则根据指定的 include_path 包含文件。如果在 include_path 中找不到该文件，则 include 最终会在失败之前检查调用脚本自己的目录和当前工作目录。如果找不到文件，include 构造将发出警告；这是与 require 不同的行为，后者会发出致命错误。
> 
> 如果定义了路径——无论是绝对路径（在 Windows 上以驱动器号或 \ 开头，或在 Unix/Linux 系统上以 / 开头）还是相对于当前目录（以 . 或 .. 开头）—— include_path 将被完全忽略。例如，如果文件名以 ../ 开头，解析器将在父目录中查找请求的文件。

我假设您不使用安全模式，因为它[现在已被弃用](http://php.net/manual/en/features.safe-mode.php)。

# c# - C#加密到PHP解密

> ID：11873878
> 
> 赞同：18
> 
> 时间：2012-08-08T22:03:59.220
> 
> 标签：c#, php, cookies, encryption, encryption-symmetric

我正在尝试在 C# 中加密一些（cookie）数据，然后在 PHP 中对其进行解密。我选择使用 Rijndael 加密。我几乎让它工作了，除了只有部分文本被解密！我从这个例子开始工作：[Decrypt PHP encrypted string in C#](https://stackoverflow.com/questions/224453/decrypt-php-encrypted-string-in-c-sharp)

这是我正在加密的文本（JSON）（删除了敏感信息）：

```
{"DisplayName":"xxx", "Username": "yyy", "EmailAddress":"zzz"} 
```

所以我登录到 C# 应用程序，该应用程序从存储的密钥和 IV 创建/编码 cookie，然后重定向到应该解密/读取 cookie 的 PHP 应用程序。当我解密 cookie 时，结果如下：

 ~~~~```
{"DisplayName":"xxx","F�A ;��HP=D�������4��z����ť���k�#E���R�j�5�\�t. t�D��" 
```~~ 

**更新**：我已经走得更远了，这就是现在的结果

```
string(96) "{"DisplayName":"xxx","Username":"yyy","EmailAddress"�)ق��-�J��k/VV-v� �9�B`7^" 
```

~~如您所见，它开始解密它，但随后变得一团糟......~~

当解密字符串时它是正确的（带有填充，我有一个删除填充的功能），但是如果我将测试字符串更改一个字符，我会再次得到垃圾：

```
B�nHL�Ek    �¿?�UΣlO����OЏ�M��NO/�f.M���Lƾ�CC�Y>F��~�qd�+ 
```

~~这是我用来生成随机密钥和 IV 的 c# 代码：~~

**更新**：我现在只使用静态密钥/IV，它们是：

```
Key: lkirwf897+22#bbtrm8814z5qq=498j5
IV: 741952hheeyy66#cs!9hjv887mxx7@8y 
```

 ~~~~```
RijndaelManaged symmetricKey = new RijndaelManaged();
symmetricKey.BlockSize = 256;
symmetricKey.KeySize = 256;
symmetricKey.Padding = PaddingMode.Zeros;
symmetricKey.Mode = CipherMode.CBC;
string key = Convert.ToBase64String(symmetricKey.Key);
string IV = Convert.ToBase64String(symmetricKey.IV); 
```~~ 

~~然后我将密钥和 IV 保存到数据库中，以便稍后检索以进行编码/解码。~~

 ~~这是完整的加密类：

```
public static class Encryption
    {
        public static string Encrypt(string prm_text_to_encrypt, string prm_key, string prm_iv)
        {
            var sToEncrypt = prm_text_to_encrypt;

            var rj = new RijndaelManaged()
            {
                Padding = PaddingMode.PKCS7,
                Mode = CipherMode.CBC,
                KeySize = 256,
                BlockSize = 256,
                //FeedbackSize = 256
            };

            var key = Encoding.ASCII.GetBytes(prm_key);
            var IV = Encoding.ASCII.GetBytes(prm_iv);
            //var key = Convert.FromBase64String(prm_key);
            //var IV = Convert.FromBase64String(prm_iv);

            var encryptor = rj.CreateEncryptor(key, IV);

            var msEncrypt = new MemoryStream();
            var csEncrypt = new CryptoStream(msEncrypt, encryptor, CryptoStreamMode.Write);

            var toEncrypt = Encoding.ASCII.GetBytes(sToEncrypt);

            csEncrypt.Write(toEncrypt, 0, toEncrypt.Length);
            csEncrypt.FlushFinalBlock();

            var encrypted = msEncrypt.ToArray();

            return (Convert.ToBase64String(encrypted));
        }

        public static string Decrypt(string prm_text_to_decrypt, string prm_key, string prm_iv)
        {

            var sEncryptedString = prm_text_to_decrypt;

            var rj = new RijndaelManaged()
            {
                Padding = PaddingMode.PKCS7,
                Mode = CipherMode.CBC,
                KeySize = 256,
                BlockSize = 256,
                //FeedbackSize = 256
            };

            var key = Encoding.ASCII.GetBytes(prm_key);
            var IV = Encoding.ASCII.GetBytes(prm_iv);
            //var key = Convert.FromBase64String(prm_key);
            //var IV = Convert.FromBase64String(prm_iv);

            var decryptor = rj.CreateDecryptor(key, IV);

            var sEncrypted = Convert.FromBase64String(sEncryptedString);

            var fromEncrypt = new byte[sEncrypted.Length];

            var msDecrypt = new MemoryStream(sEncrypted);
            var csDecrypt = new CryptoStream(msDecrypt, decryptor, CryptoStreamMode.Read);

            csDecrypt.Read(fromEncrypt, 0, fromEncrypt.Length);

            return (Encoding.ASCII.GetString(fromEncrypt));
        }

        public static void GenerateKeyIV(out string key, out string IV)
        {
            var rj = new RijndaelManaged()
            {
                Padding = PaddingMode.PKCS7,
                Mode = CipherMode.CBC,
                KeySize = 256,
                BlockSize = 256,
                //FeedbackSize = 256
            };
            rj.GenerateKey();
            rj.GenerateIV();

            key = Convert.ToBase64String(rj.Key);
            IV = Convert.ToBase64String(rj.IV);
        }
    } 
```

这是我用来解密数据的 PHP 代码：

```
 function decryptRJ256($key,$iv,$string_to_decrypt)
{
    $string_to_decrypt = base64_decode($string_to_decrypt);
    $rtn = mcrypt_decrypt(MCRYPT_RIJNDAEL_256, $key, $string_to_decrypt, MCRYPT_MODE_CBC, $iv);
    //$rtn = rtrim($rtn, "\0\4");
    $rtn = unpad($rtn);
    return($rtn);
}

function unpad($value)
{
    $blockSize = mcrypt_get_block_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_CBC);
    //apply pkcs7 padding removal
    $packing = ord($value[strlen($value) - 1]);
    if($packing && $packing < $blockSize){
        for($P = strlen($value) - 1; $P >= strlen($value) - $packing; $P--){
            if(ord($value{$P}) != $packing){
                $packing = 0;
            }//end if
        }//end for
    }//end if 

    return substr($value, 0, strlen($value) - $packing); 
}

$ky = 'lkirwf897+22#bbtrm8814z5qq=498j5'; // 32 * 8 = 256 bit key
$iv = '741952hheeyy66#cs!9hjv887mxx7@8y'; // 32 * 8 = 256 bit iv

$enc = $_COOKIE["MyCookie"];

$dtext = decryptRJ256($ky, $iv, $enc);
var_dump($dtext); 
```

~~我对这部分有点不确定，因为我看到的所有示例代码都只是将base64编码的字符串直接传递给解密器，但在我的示例中，我必须在传递之前对其进行base64_decode，否则我会收到错误密钥和 IV 的长度不正确。~~

**更新**：我正在使用 PHP 所需格式的 ASCII 键。如果我从 RijndaelManaged 类生成密钥，它们在 PHP 端不起作用，但我可以使用已知在 PHP 端工作的键并在 RijndaelManaged C# 端使用它们。

如果我遗漏了任何相关信息，请告诉我。蒂亚！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-10T21:38:33.470

为了后代，我将完整的解决方案放在这里。

**C# 加密类**

```
public static class Encryption
{
    public static string Encrypt(string prm_text_to_encrypt, string prm_key, string prm_iv)
    {
        var sToEncrypt = prm_text_to_encrypt;

        var rj = new RijndaelManaged()
        {
            Padding = PaddingMode.PKCS7,
            Mode = CipherMode.CBC,
            KeySize = 256,
            BlockSize = 256,
        };

        var key = Convert.FromBase64String(prm_key);
        var IV = Convert.FromBase64String(prm_iv);

        var encryptor = rj.CreateEncryptor(key, IV);

        var msEncrypt = new MemoryStream();
        var csEncrypt = new CryptoStream(msEncrypt, encryptor, CryptoStreamMode.Write);

        var toEncrypt = Encoding.ASCII.GetBytes(sToEncrypt);

        csEncrypt.Write(toEncrypt, 0, toEncrypt.Length);
        csEncrypt.FlushFinalBlock();

        var encrypted = msEncrypt.ToArray();

        return (Convert.ToBase64String(encrypted));
        }

    public static string Decrypt(string prm_text_to_decrypt, string prm_key, string prm_iv)
    {

        var sEncryptedString = prm_text_to_decrypt;

        var rj = new RijndaelManaged()
        {
            Padding = PaddingMode.PKCS7,
            Mode = CipherMode.CBC,
            KeySize = 256,
            BlockSize = 256,
        };

        var key = Convert.FromBase64String(prm_key);
        var IV = Convert.FromBase64String(prm_iv);

        var decryptor = rj.CreateDecryptor(key, IV);

        var sEncrypted = Convert.FromBase64String(sEncryptedString);

        var fromEncrypt = new byte[sEncrypted.Length];

        var msDecrypt = new MemoryStream(sEncrypted);
        var csDecrypt = new CryptoStream(msDecrypt, decryptor, CryptoStreamMode.Read);

        csDecrypt.Read(fromEncrypt, 0, fromEncrypt.Length);

        return (Encoding.ASCII.GetString(fromEncrypt));
        }

    public static void GenerateKeyIV(out string key, out string IV)
    {
        var rj = new RijndaelManaged()
        {
            Padding = PaddingMode.PKCS7,
            Mode = CipherMode.CBC,
            KeySize = 256,
            BlockSize = 256,
        };
        rj.GenerateKey();
        rj.GenerateIV();

        key = Convert.ToBase64String(rj.Key);
        IV = Convert.ToBase64String(rj.IV);
    }
} 
```

**PHP解密片段**

```
<?php
function decryptRJ256($key,$iv,$encrypted)
{
    //PHP strips "+" and replaces with " ", but we need "+" so add it back in...
    $encrypted = str_replace(' ', '+', $encrypted);

    //get all the bits
    $key = base64_decode($key);
    $iv = base64_decode($iv);
    $encrypted = base64_decode($encrypted);

    $rtn = mcrypt_decrypt(MCRYPT_RIJNDAEL_256, $key, $encrypted, MCRYPT_MODE_CBC, $iv);
    $rtn = unpad($rtn);
    return($rtn);
}

//removes PKCS7 padding
function unpad($value)
{
    $blockSize = mcrypt_get_block_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_CBC);
    $packing = ord($value[strlen($value) - 1]);
    if($packing && $packing < $blockSize)
    {
        for($P = strlen($value) - 1; $P >= strlen($value) - $packing; $P--)
        {
            if(ord($value{$P}) != $packing)
            {
                $packing = 0;
            }
        }
    }

    return substr($value, 0, strlen($value) - $packing); 
}
?>
<pre>
<?php

$enc = $_COOKIE["MyCookie"];

$ky = ""; //INSERT THE KEY GENERATED BY THE C# CLASS HERE
$iv = ""; //INSERT THE IV GENERATED BY THE C# CLASS HERE

$json_user = json_decode(decryptRJ256($ky, $iv, $enc), true);

var_dump($json_user);

?> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-10T19:35:53.123

由于字符串部分正常，但最后有乱码，这表明加密中存在填充问题，需要精确的 256 字节块。我建议将填充设置为**PKCS7** (PaddingMode.PKCS7) 而不是 C# 端的**Zeros**，PHP 可以毫无问题地理解（因为它是该解析器的默认模式）。

**编辑：**糟糕，我没有注意到您的 PHP 中有以下内容：

```
$enc = $_COOKIE["MyCookie"]; 
```

这是警告。PHP 可能无法按原样获取加密数据，并且正在运行一些 urldecode 清理。您应该打印此变量以查看它是否真正匹配从 C# 代码发送的内容。

**编辑2：**

通过添加以下内容，将 cookie 中的空格转换为缺少的 + 字符：

```
str_replace(' ', '+', $enc); 
```~~~~~~

# ios - 创建我自己的 NSNotificationCenter，存储对象？

> ID：11873884
> 
> 赞同：0
> 
> 时间：2012-08-08T22:04:39.897
> 
> 标签：ios, nsnotificationcenter, nsnotifications

我正在尝试创建自己的 NSNotificationCenter 只是为了更好地编程。我遇到了一个我无法完全解决的 EXC_BAD_ACCESS。

我的方法：

```
- (void)addObserver:(id)observer forKey:(NSString *)theKey withSelector:(SEL)block {
    NSString *selector = NSStringFromSelector(block);
    NSDictionary *dict = [NSDictionary dictionaryWithObjectsAndKeys:observer, @"o",selector, "s", nil];
    [[observers objectForKey:theKey] addObject:dict];
} 
```

我在初始化时遇到错误`NSDictionary *dict`，我不明白为什么。被添加的观察者是在它运行`UIViewController`的中调用这个方法的一个，如果这很重要的话。`viewDidLoad``applicationDidFinishLaunching`

我收到错误 EXC_BAD_ACCESS 代码=1

任何帮助，将不胜感激，。

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T22:11:18.630

```
NSDictionary *dict = [NSDictionary dictionaryWithObjectsAndKeys:observer, @"o",selector, "s", nil]; 
```

看起来你在我的“s”上缺少一个@。

```
NSDictionary *dict = [NSDictionary dictionaryWithObjectsAndKeys:observer, @"o",selector, @"s", nil]; 
```

为了您的方便。

# javascript - 获取 div 的高度并添加另一个 div 的值

> ID：11873885
> 
> 赞同：0
> 
> 时间：2012-08-08T22:04:51.630
> 
> 标签：javascript, jquery-selectors, height

我想获得一个 div 的高度，然后将该值作为“top”或“margin-top”添加到另一个 div。第一个 div 具有动态高度，我想在其底部放置另一个 div，其中包含一个链接和一个类似 fb 的按钮。html 代码如下所示：

```
...
<div id="testnew">content</div>
<table>
<tr>
<td id="left">content</td>
<td id="right">
    <div id="test">content</div>
</td>
</tr>
</table>
... 
```

所以#testnew是第二个绝对定位的div，right:0;，而#test是第一个动态高度的div。

[我在这里](https://stackoverflow.com/questions/5704242/get-the-height-of-top-div-and-place-that-value-as-a-top-padding-of-another-div)找到了这个脚本

改成这样：

```
<script type="text/javascript">
var socialNetcss = $("#test").height();
$("#testnew").css({ top: socialNetcss});
</script> 
```

但它没有用。

我是 jQuery/Javascript 的新手，但我真的很想做这件事。提前致谢！

PS：我知道我可以直接将第二个 div 放在第一个底部，但是我的 fb like 按钮有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T22:19:11.870

这里的例子：[jsfiddle](http://jsfiddle.net/srfEn/1/)

```
<div id="first">first<br />first <br />first </div>
<div id="second"></div>​

$(document).ready(function () {
var height= $("#first").height();

$("#second").css({marginTop: height});
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T22:14:24.203

除非您的 div #testnew 将位置样式属性设置为绝对或相对，否则设置“顶部”将不起作用

在上面的代码中尝试“margin-top”而不是“top”

# google-app-engine - 谷歌应用程序向电子邮件添加附件选项

> ID：11873887
> 
> 赞同：0
> 
> 时间：2012-08-08T22:05:34.253
> 
> 标签：google-app-engine, email, google-apps, google-apps-marketplace

我想创建一个谷歌应用程序，它可以让你从云服务中添加一个文件作为电子邮件的附件。从阅读谷歌文档看来，当用户创建电子邮件时，您似乎无能为力，但 attachments.me 应用程序能够做到这一点。撰写电子邮件时，他们的应用程序会在常规附件应用程序旁边弹出一个按钮，让您从云中选择一个附件。我是使用谷歌应用程序的新手，我不明白附件.me 是如何做到这一点的。如果有人知道这是怎么可能的，请告诉我，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T23:27:04.340

要向 GMail UI 添加功能，您可能必须将其实现为 Chrome 扩展（和/或 Firefox 或 IE 扩展以支持这些浏览器）。事实上，这显然是 attachments.me 的做法。

扩展程序的作用是在您访问 gmail.com 时加载，确定 UI 中要添加其按钮的位置，然后使用 JavaScript 注入它们。然后，您可能希望再次使用 JavaScript 执行一些操作，例如在电子邮件文本从云发送到您要附加的媒体之前添加一个链接，或者拦截“发送”按钮以告诉您的服务器发送包含云附件的消息（假设用户已授权您的服务器以他们的身份发送 - 这可能会产生严重的安全隐患）

请注意，使用 Chrome 扩展程序修改复杂的 Web 应用程序用户界面（如 GMail 的用户界面）可能非常困难；GMail 可能会做出破坏您的 UI 或功能的更改，而且他们可能会随时更改，或者只针对一部分用户进行更改，因此您必须不断跟上这些更改以修复错误。总而言之，我不推荐它作为向电子邮件添加附件的一种方式。

# networking - 多个开发者之间指向本地服务器的域名

> ID：11873888
> 
> 赞同：0
> 
> 时间：2012-08-08T22:05:34.250
> 
> 标签：networking, dns, internal

我们是少数 Web 开发人员，目前正在编辑我们的主机文件以将域名指向本地 Web 服务器，但随着客户端数量的增加，这变得越来越困难，我们需要不断更改计算机的每个主机文件。

您认为对我们来说最好的解决方案是什么，使用代理服务器或 dns 服务器，您能告诉我如何解决这个问题吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T22:15:33.243

我会在您的 LAN 上使用 DNS 服务器或使用 mDNS。然后管理员可以简单地将 A 或 CNAME 条目添加到区域中，LAN 上的所有计算机都会看到该记录。

# c++ - 在没有 stl 调试信息的情况下编译 Google 协议缓冲区的影响

> ID：11873893
> 
> 赞同：0
> 
> 时间：2012-08-08T22:06:14.930
> 
> 标签：c++, stl, protocol-buffers

我有一些文件。我们称之为*Msg.proto*

我使用 Google 的 Protocol Buffer protoc.exe 编译器来获取我的 proto 文件，它会生成一个*Msg.h*文件，其中包含*Msg*类的定义。

当我删除一个*Msg*对象时，释放内存可能需要很长时间（当附加了调试器时）。这是因为它使用的是 STL 调试库。因此，我想在删除*Msg*对象时禁用 STL 调试，但我想为我的项目的其余部分保留 STL 调试。这导致我考虑关闭*Msg.h*和 Google Protocol Buffer 项目的 STL 调试信息（因为这由*Msg*类使用，并且仅由*Msg*类使用）。

这意味着什么？

我的猜测是：

1.  使用 STL 调试信息创建的任何 STL 对象都不能传递到*Msg*的任何函数/构造函数/等，因为这意味着如果 STL 库随后被传递给代码的一部分，则创建的 STL 对象只有一个版本使用不同版本的 STL 库
2.  其他的？

# drupal - hook_form_alter - 在模块或 template.php 中

> ID：11873894
> 
> 赞同：0
> 
> 时间：2012-08-08T22:06:21.120
> 
> 标签：drupal, drupal-6, drupal-themes

我想快速更改 ubercart 表单数据（我想删除到购物车中产品节点的链接）。我找到了一个解决方案，该解决方案涉及通过创建一个新模块（下面的链接和代码）来实现 hook_form_alter()。

我的问题是，我是否必须制作一个新模块，或者我可以将此功能添加到我的主题的 template.php 文件中吗？我尝试了后者，但我无法让它工作（我将函数重命名为 theNameOfMyTheme_form_alter）。

（这里更大的问题是我试图了解所有这些drupal 6覆盖的东西。例如，如果我遇到一些我想改变的代码，你怎么知道你是应该创建一个模块还是改变你的主题？ ）。

[http://www.ubercart.org/forum/support/2298/remove_product_links_shopping_cart](http://www.ubercart.org/forum/support/2298/remove_product_links_shopping_cart)

```
function your_module_form_alter(&$form, &$form_state, $form_id) {
  if($form_id == 'uc_cart_view_form') {
    foreach($form['items'] as $key => $item) {
      if(!empty($item['desc']['#value'])) {
        $form['items'][$key]['desc']['#value'] = strip_tags($item['desc']['#value']);
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T17:11:13.990

添加到[Clive 的解决方案中](https://stackoverflow.com/a/11874291/1864167)，只是为了向其他正在寻找这个的人确认：`hook_form_alter`在 Drupal 6 中不需要主题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T22:43:35.963

`hook_form_alter()`是为主题和模块调用的钩子之一，因此将它放在您的 template.php 文件中就可以了。

它实际上记录在 Drupal 7 的功能版本上，但我猜他们在 Drupal 6 版本上错过了它。

记得在添加钩子后清除 Drupal 的缓存，以便它被拾取。

# google-app-engine - 如何将 none_if_empty 与 create_deep_key 一起使用？

> ID：11873895
> 
> 赞同：1
> 
> 时间：2012-08-08T22:06:20.987
> 
> 标签：google-app-engine, bulkloader

我在看[Google App Engine bulkloader 转换的参考页面在哪里？](https://stackoverflow.com/questions/6817626/where-are-the-reference-pages-of-the-google-app-engine-bulkloader-transform)并找出了我的大部分 bulkloader.yaml 配置，但一种情况除外。

我的一种“产品”有一个名为 site 的属性。如果存在，这是客户类型和站点类型的深层密钥。现在我遇到的问题是 non_if_empty。在以下情况下，它永远不会创建深度密钥。它总是一无所获。如果我删除 transform.none_if_empty 它将失败，因为我的输入文件对于其中一些值有空的整体。我怎样才能使这项工作？如何将 none_if_empty 与 create_deep_key 一起使用

```
- property: site
  external_name: site
  export_transform: transform.key_id_or_name_as_string
  import_transform: transform.none_if_empty(transform.create_deep_key(('Customer', 'siteCustomer', True),
                                                ('Site', 'siteId', True)))

  export: 
   - external_name: siteCustomer
     export_transform: transform.key_id_or_name_as_string_n(0)
   - external_name: siteId
     export_transform: transform.key_id_or_name_as_string_n(1)

Product Bulkloader File Example
name,siteCustomer,siteId
first,,
second,1,1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T18:10:56.657

那应该是

```
import_transform: transform.none_if_empty(transform.create_deep_key(
    ('Customer','siteCustomer', True),
    ('Site', transform.CURRENT_PROPERTY, True))) 
```

本质上，将当前属性的导入值称为 transform.CURRENT_PROPERTY。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:10:05.490

所以我仍然不知道我在这里缺少什么，但我的工作是这样的：

从 google.appengine.ext.bulkload 导入转换

def create_deep_key(*path_info): f = transform.create_deep_key(*path_info)

```
def create_deep_key_lambda(value, bulkload_state):

    try:
        return f(value, bulkload_state)
    except:
        return None

return create_deep_key_lambda 
```

# android - Eclipse Android - 清单中的解析器异常

> ID：11873901
> 
> 赞同：1
> 
> 时间：2012-08-08T22:06:50.617
> 
> 标签：android, eclipse, adt, ddms

我正在使用 ADT 在 Eclipse Juno 中为 Android 开发一个应用程序。出于某种原因，我的程序突然出现错误（这很简单：我在菜单中添加了一些项目，仅此而已），出于某种原因，我的项目似乎出现了错误，因为尝试运行它导致失败，原因是我的项目包含错误。奇怪的是，我的菜单 XML 文件和我的主要活动都没有显示任何错误，只是整个项目。这反过来又会在我尝试清理我的项目时删除我的 R.java 文件。现在，当我尝试重新制作“图形”项目时，我在进行任何修改之前就收到了这个 DDMS 错误：

```
[2012-08-08 14:54:24 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for    /nfs/guille/groce/users/nicholsk/workspace3/Graphics/AndroidManifest.xml: The markup in the document following the root element must be well-formed.
[2012-08-08 14:54:24 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for /nfs/guille/groce/users/nicholsk/workspace3/Graphics/AndroidManifest.xml: The markup in the document following the root element must be well-formed.
[2012-08-08 14:54:24 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for /nfs/guille/groce/users/nicholsk/workspace3/Graphics/AndroidManifest.xml: The markup in the document following the root element must be well-formed.
[2012-08-08 14:54:24 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for /nfs/guille/groce/users/nicholsk/workspace3/Graphics/AndroidManifest.xml: The markup in the document following the root element must be well-formed.
[2012-08-08 14:54:24 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for /nfs/guille/groce/users/nicholsk/workspace3/Graphics/AndroidManifest.xml: The markup in the document following the root element must be well-formed.
[2012-08-08 14:54:24 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for /nfs/guille/groce/users/nicholsk/workspace3/Graphics/AndroidManifest.xml: The markup in the document following the root element must be well-formed.
[2012-08-08 14:54:24 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for /nfs/guille/groce/users/nicholsk/workspace3/Graphics/AndroidManifest.xml: The markup in the document following the root element must be well-formed.
[2012-08-08 14:54:24 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for /nfs/guille/groce/users/nicholsk/workspace3/Graphics/AndroidManifest.xml: The markup in the document following the root element must be well-formed.
[2012-08-08 14:54:24 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for /nfs/guille/groce/users/nicholsk/workspace3/Graphics/AndroidManifest.xml: The markup in the document following the root element must be well-formed.
[2012-08-08 14:54:24 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for /nfs/guille/groce/users/nicholsk/workspace3/Graphics/AndroidManifest.xml: The markup in the document following the root element must be well-formed.
[2012-08-08 14:54:24 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for /nfs/guille/groce/users/nicholsk/workspace3/Graphics/AndroidManifest.xml: The markup in the document following the root element must be well-formed.
[2012-08-08 14:54:24 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for /nfs/guille/groce/users/nicholsk/workspace3/Graphics/AndroidManifest.xml: The markup in the document following the root element must be well-formed.
[2012-08-08 14:54:24 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for /nfs/guille/groce/users/nicholsk/workspace3/Graphics/AndroidManifest.xml: The markup in the document following the root element must be well-formed.
[2012-08-08 14:54:24 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for /nfs/guille/groce/users/nicholsk/workspace3/Graphics/AndroidManifest.xml: The markup in the document following the root element must be well-formed.
[2012-08-08 14:54:24 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for /nfs/guille/groce/users/nicholsk/workspace3/Graphics/AndroidManifest.xml: The markup in the document following the root element must be well-formed.
[2012-08-08 14:54:24 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for /nfs/guille/groce/users/nicholsk/workspace3/Graphics/AndroidManifest.xml: The markup in the document following the root element must be well-formed.
[2012-08-08 14:54:24 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for /nfs/guille/groce/users/nicholsk/workspace3/Graphics/AndroidManifest.xml: The markup in the document following the root element must be well-formed.
[2012-08-08 14:54:24 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for /nfs/guille/groce/users/nicholsk/workspace3/Graphics/AndroidManifest.xml: The markup in the document following the root element must be well-formed.
[2012-08-08 14:54:24 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for /nfs/guille/groce/users/nicholsk/workspace3/Graphics/AndroidManifest.xml: The markup in the document following the root element must be well-formed.
[2012-08-08 14:54:24 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for /nfs/guille/groce/users/nicholsk/workspace3/Graphics/AndroidManifest.xml: The markup in the document following the root element must be well-formed.
[2012-08-08 14:54:24 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for /nfs/guille/groce/users/nicholsk/workspace3/Graphics/AndroidManifest.xml: The markup in the document following the root element must be well-formed.
[2012-08-08 14:54:24 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for /nfs/guille/groce/users/nicholsk/workspace3/Graphics/AndroidManifest.xml: The markup in the document following the root element must be well-formed.
[2012-08-08 14:54:24 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for /nfs/guille/groce/users/nicholsk/workspace3/Graphics/AndroidManifest.xml: The markup in the document following the root element must be well-formed.
[2012-08-08 14:54:24 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for /nfs/guille/groce/users/nicholsk/workspace3/Graphics/AndroidManifest.xml: The markup in the document following the root element must be well-formed.
[2012-08-08 14:54:24 - Graphics] Parser exception for /Graphics/AndroidManifest.xml: The markup in the document following the root element must be well-formed.
[2012-08-08 14:54:24 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for /nfs/guille/groce/users/nicholsk/workspace3/Graphics/AndroidManifest.xml: The markup in the document following the root element must be well-formed.
[2012-08-08 14:54:24 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for /nfs/guille/groce/users/nicholsk/workspace3/Graphics/AndroidManifest.xml: The markup in the document following the root element must be well-formed.
[2012-08-08 14:54:24 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for /nfs/guille/groce/users/nicholsk/workspace3/Graphics/AndroidManifest.xml: The markup in the document following the root element must be well-formed.
[2012-08-08 14:54:24 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for /nfs/guille/groce/users/nicholsk/workspace3/Graphics/AndroidManifest.xml: The markup in the document following the root element must be well-formed.
[2012-08-08 14:54:24 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for /nfs/guille/groce/users/nicholsk/workspace3/Graphics/AndroidManifest.xml: The markup in the document following the root element must be well-formed.
[2012-08-08 14:54:24 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for /nfs/guille/groce/users/nicholsk/workspace3/Graphics/AndroidManifest.xml: The markup in the document following the root element must be well-formed.
[2012-08-08 14:54:24 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for /nfs/guille/groce/users/nicholsk/workspace3/Graphics/AndroidManifest.xml: The markup in the document following the root element must be well-formed.
[2012-08-08 14:54:24 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for /nfs/guille/groce/users/nicholsk/workspace3/Graphics/AndroidManifest.xml: The markup in the document following the root element must be well-formed.
[2012-08-08 14:54:24 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for /nfs/guille/groce/users/nicholsk/workspace3/Graphics/AndroidManifest.xml: The markup in the document following the root element must be well-formed.
[2012-08-08 14:54:24 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for /nfs/guille/groce/users/nicholsk/workspace3/Graphics/AndroidManifest.xml: The markup in the document following the root element must be well-formed.
[2012-08-08 14:54:24 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for /nfs/guille/groce/users/nicholsk/workspace3/Graphics/AndroidManifest.xml: The markup in the document following the root element must be well-formed.
 [2012-08-08 14:54:24 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for /nfs/guille/groce/users/nicholsk/workspace3/Graphics/AndroidManifest.xml: The markup in the document following the root element must be well-formed.
 [2012-08-08 14:54:24 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for /nfs/guille/groce/users/nicholsk/workspace3/Graphics/AndroidManifest.xml: The markup in the document following the root element must be well-formed.
[2012-08-08 14:54:24 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for /nfs/guille/groce/users/nicholsk/workspace3/Graphics/AndroidManifest.xml: The markup in the document following the root element must be well-formed.
[2012-08-08 14:54:24 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for /nfs/guille/groce/users/nicholsk/workspace3/Graphics/AndroidManifest.xml: The markup in the document following the root element must be well-formed.
[2012-08-08 14:54:24 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for /nfs/guille/groce/users/nicholsk/workspace3/Graphics/AndroidManifest.xml: The markup in the document following the root element must be well-formed.
[2012-08-08 14:54:24 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for /nfs/guille/groce/users/nicholsk/workspace3/Graphics/AndroidManifest.xml: The markup in the document following the root element must be well-formed.
[2012-08-08 14:54:24 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for /nfs/guille/groce/users/nicholsk/workspace3/Graphics/AndroidManifest.xml: The markup in the document following the root element must be well-formed.
 [2012-08-08 14:54:24 - com.android.ide.eclipse.adt.internal.project.AndroidManifestHelper] Parser exception for /nfs/guille/groce/users/nicholsk/workspace3/Graphics/AndroidManifest.xml: The markup in the document following the root element must be well-formed.
 [2012-08-08 14:54:25 - Graphics] Parser exception for /Graphics/AndroidManifest.xml: The markup in the document following the root element must be well-formed. 
```

我现在不知道是什么原因造成的。我没有对我的库进行任何修改。在此之前，我在另一个工作区中运行测试很好。谁能解释发生了什么？

这是我的清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.graphics"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
</application>

</manifest><manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.graphics"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
</application>

</manifest><manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.graphics"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

这是我的主要布局，在这里我得到了 yugidroid 的回答中提到的错误：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/hello_world"
    tools:context=".MainActivity" />

</RelativeLayout>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/hello_world"
    tools:context=".MainActivity" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T00:53:47.527

我刚刚遇到了同样的问题，我想我已经弄清楚发生了什么。对我来说发生了什么，我有一个名为 Foo 的项目，第一次工作完全正常，但我删除了该项目（检查删除磁盘上项目内容的选项）。现在，当我创建另一个具有相同名称 (Foo) 的项目时，我收到了您在此处遇到的错误。实际上，如果您删除该项目并多次重新创建它，它每次都会添加/复制整个清单部分。

在您删除之前的某个时间，您是否有过一个同名的项目（图形），然后又开始了一个同名的新项目？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-08T22:43:09.170

AFAIK，您的清单只能有一个根`manfiest`标签，而您有 3 个！为什么？

尝试向我们展示如下所示的内容：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.graphics"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

让我知道你的进展。

**编辑：**

你的布局也会发生同样的事情。一个布局文件只能有一个根标签（例如`RelativeLayout`，、`LienarLayout`等）。尝试将您的布局文件内容替换为以下内容：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/hello_world"
    tools:context=".MainActivity" />

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T22:09:50.923

您遇到 XML 解析问题，因此 Andorid_Manifest.xml 代码会有所帮助。

一个示例清单看起来像

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.your.package"
    android:versionCode="1"
    android:versionName="1.0" > 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T17:17:18.667

同样的问题，试图创建一个同名的项目。磁盘已全部删除，但需要重新启动 eclipse 才能生成无错误。

# c# - 为什么不对用作泛型类型参数的类调用静态构造函数？

> ID：11873903
> 
> 赞同：11
> 
> 时间：2012-08-08T22:06:52.473
> 
> 标签：c#, generics, static-constructor

给定以下类：

```
public class Foo {
    static Foo() {
        Console.WriteLine("Foo is being constructed");
    }
}

public class Bar {
    public void ReferenceFooAsGenericTypeParameter<T>() {
        Console.WriteLine("Foo is being referenced as a generic type parameter");
    }
}

public class SampleClass
{
    public static void Main()
    {
        new Bar().ReferenceFooAsGenericTypeParameter<Foo>();
    }
} 
```

输出是

```
Foo 被引用为泛型类型参数
```

根据规范，这是有道理的：

> 在创建第一个实例或引用任何静态成员之前，会自动调用静态构造函数来初始化类。

但是我很好奇为什么当类型被引用为泛型类型参数时不调用静态构造函数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T22:10:13.900

为什么需要这样？

正常调用静态构造函数的目的是确保在静态构造函数中设置的任何状态在首次使用之前都已初始化。

仅用`Foo`作类型参数不会使用其中的任何状态，因此无需调用静态构造函数。

您可能想尝试创建具有副作用的静态变量初始化程序（例如，*然后*打印到控制台的方法调用）并删除静态构造函数——这在某些情况下[会显着影响初始化的时间。](https://codeblog.jonskeet.uk/2010/01/26/type-initialization-changes-in-net-4-0/)它*可能会*在这里触发它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T22:13:45.320

那是因为您实际上不能仅通过包含作为泛型类型参数以任何有意义的方式使用类型内容，该类型需要对其进行处理以保证调用静态构造函数。

你是对的，这符合规范。第 10.12 节（静态构造函数）指出：

> 静态构造函数的执行由在应用程序域中发生的以下第一个事件触发：
> 
> · 创建类类型的一个实例。
> 
> · 引用类类型的任何静态成员。

用作泛型类型参数不是这些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T22:15:09.843

这里要注意的是，在`new Bar().ReferenceFooAsGenericTypeParameter<Foo>();`您创建了一个 Bar 类型的对象时，您的 main 和**Bar**都没有创建实例，`Foo`也没有访问它的任何成员，在这种情况下，类型本身只是作为参数传递.

# javascript - 使用 Capybara 和 Minitest 测试 JavaScript

> ID：11873904
> 
> 赞同：3
> 
> 时间：2012-08-08T22:06:53.553
> 
> 标签：javascript, ruby-on-rails, selenium, capybara, minitest

有人问了这个问题的几个变体，我肯定从阅读该主题中学到了，但大多数答案似乎并不直接适用于这种情况，或者涉及使用 Rspec 或 Cucumber 的解决方案。

我目前正在使用 Minitest 和 Capybara 开发一个测试套件。如果可能的话，我不想引入太多其他的 gem，但如果它们是轻量级的，我愿意接受，因为测试已经需要一段时间才能运行。

Rspec 有`:js => true`，Cucumber 有`@javascript`，但 minitest 似乎没有这样的东西。然后，自然的解决方案是切换驱动程序并执行：`Capybara.current_driver = :selenium`，但是当我这样做时，它不起作用，并且我得到 2 个错误（每个启用 js 的测试都有一个错误）。

我的问题是：为什么会出现这些错误，我怎样才能使一些基本的 JavaScript 测试工作？以下是错误：

```
Component returned failure code: 0x804b0012 (NS_ERROR_UNKNOWN_PROTOCOL) [nsIWebNavigation.loadURI]
    Exception `Selenium::WebDriver::Error::UnknownError' at:
    /Users/epithelialbiology/.rvm/gems/ruby-1.9.2-p320/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/response.rb:52:in `assert_ok'
    /Users/epithelialbiology/.rvm/gems/ruby-1.9.2-p320/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/response.rb:15:in `initialize'
    /Users/epithelialbiology/.rvm/gems/ruby-1.9.2-p320/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/http/common.rb:59:in `new'
    /Users/epithelialbiology/.rvm/gems/ruby-1.9.2-p320/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/http/common.rb:59:in `create_response'
    /Users/epithelialbiology/.rvm/gems/ruby-1.9.2-p320/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/http/default.rb:65:in `request'
    /Users/epithelialbiology/.rvm/gems/ruby-1.9.2-p320/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/http/common.rb:40:in `call'
    /Users/epithelialbiology/.rvm/gems/ruby-1.9.2-p320/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/bridge.rb:598:in `raw_execute'
    /Users/epithelialbiology/.rvm/gems/ruby-1.9.2-p320/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/bridge.rb:576:in `execute'
    /Users/epithelialbiology/.rvm/gems/ruby-1.9.2-p320/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/remote/bridge.rb:99:in `get'
    /Users/epithelialbiology/.rvm/gems/ruby-1.9.2-p320/gems/selenium-webdriver-2.25.0/lib/selenium/webdriver/common/navigation.rb:14:in `to'
    /Users/epithelialbiology/.rvm/gems/ruby-1.9.2-p320/gems/capybara-1.1.2/lib/capybara/selenium/driver.rb:36:in `visit'
    /Users/epithelialbiology/.rvm/gems/ruby-1.9.2-p320/gems/capybara-1.1.2/lib/capybara/session.rb:157:in `visit'
    /Users/epithelialbiology/.rvm/gems/ruby-1.9.2-p320/gems/capybara-1.1.2/lib/capybara/dsl.rb:161:in `visit'
    test/integration/resource_access_test.rb:22:in `block (2 levels) in <top (required)>' 
```

这是另一个错误：

```
undefined method `[]' for nil:NilClass
    Exception `NoMethodError' at:
    /Users/epithelialbiology/.rvm/gems/ruby-1.9.2-p320/gems/rack-test-0.6.1/lib/rack/test.rb:171:in `env_for'
    /Users/epithelialbiology/.rvm/gems/ruby-1.9.2-p320/gems/rack-test-0.6.1/lib/rack/test.rb:56:in `get'
    /Users/epithelialbiology/.rvm/gems/ruby-1.9.2-p320/gems/capybara-1.1.2/lib/capybara/rack_test/browser.rb:62:in `process'
    /Users/epithelialbiology/.rvm/gems/ruby-1.9.2-p320/gems/capybara-1.1.2/lib/capybara/rack_test/browser.rb:21:in `visit'
    /Users/epithelialbiology/.rvm/gems/ruby-1.9.2-p320/gems/capybara-1.1.2/lib/capybara/rack_test/driver.rb:32:in `visit'
    /Users/epithelialbiology/.rvm/gems/ruby-1.9.2-p320/gems/capybara-1.1.2/lib/capybara/session.rb:157:in `visit'
    /Users/epithelialbiology/.rvm/gems/ruby-1.9.2-p320/gems/capybara-1.1.2/lib/capybara/dsl.rb:161:in `visit'
    test/integration/resource_access_test.rb:40:in `block (2 levels) in <top (required)>' 
```

有谁知道这里可能发生了什么，以及我如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T16:24:05.580

尝试使用以下语法切换 Capybara 驱动程序：

```
Capybara.current_driver = Capybara.javascript_driver 
```

# c# - Castle.Windsor 的生活方式取决于上下文？

> ID：11873905
> 
> 赞同：26
> 
> 时间：2012-08-08T22:06:58.580
> 
> 标签：c#, asp.net-mvc-3, inversion-of-control, castle-windsor, quartz.net

我有一个 Web 应用程序，其中使用 注册了许多组件`.LifestylePerWebRequest()`，现在我决定实现**Quartz.NET**，一个 .NET 作业调度库，它在单独的线程中执行，而不是在请求线程中执行。

因此，`HttpContext.Current`产量`null`。`IDbConnection`到目前为止，我的服务、存储库和实例都在使用`.LifestylePerWebRequest()`，因为它使请求结束时更容易处理它们。

现在我想在这两种情况下使用这些组件，在 Web 请求期间我希望它们保持不受影响，在非请求上下文中我希望它们使用不同的生活方式，我想我可以自己处理处置，但我应该怎么去关于它根据当前上下文选择组件的生活方式？

目前我注册服务（例如），如下所示：

```
container.Register(
    AllTypes
        .FromAssemblyContaining<EmailService>()
        .Where(t => t.Name.EndsWith("Service"))
        .WithService.Select(IoC.SelectByInterfaceConvention)
        .LifestylePerWebRequest()
); 
```

我想我应该使用某种扩展方法，但我只是没有看到它..

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-09T08:35:56.493

您应该使用来自[castleprojectcontrib的](https://github.com/castleprojectcontrib/Castle.Windsor.Lifestyles)[混合生活方式](http://bugsquash.blogspot.com/2010/06/hybrid-lifestyles-in-windsor.html)。

> 混合生活方式实际上融合了两种基本生活方式：主要生活方式和次要生活方式。混合生活方式首先尝试使用主要生活方式；如果由于某种原因不可用，它会使用次要生活方式。这通常与 PerWebRequest 一起用作主要生活方式：如果 HTTP 上下文可用，则将其用作组件实例的范围；否则使用次要生活方式。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-09T20:33:19.257

Don't use the same components. In fact, in most scenarios I've seen the "background processing" doesn't even make sense to be in the web process to begin with.

Elaborating based on the comments.

Shoehorning background processing in the web pipeline is compromising your architecture to save a few $ on a EC2 instance. I would strongly suggest to think about this again, but I digress.

My statements still stands, even if you're putting both components in the web process they are two different components used in two different contexts and should be treated as such.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-08T22:26:46.047

我最近遇到了一个非常相似的问题——当 HttpContext.Request 尚不存在时，我希望能够在应用程序启动中基于我的容器运行初始化代码。我没有找到任何方法，所以我修改了 PerWebRequestLifestyleModule 的源代码以允许我做我想做的事。不幸的是，如果不重新编译 Windsor，似乎不可能进行此更改 - 我希望能够以可扩展的方式进行更改，这样我就可以继续使用 Windsor 的主要发行版。

无论如何，为了完成这项工作，我修改了`GetScope`函数，`PerWebRequestLifestyleModule`以便如果它没有在 HttpContext 中运行（或者如果 HttpContext.Request 抛出异常，就像在 Application_Start 中那样），那么它将寻找从容器开始的 Scope反而。这允许我使用以下代码在 Application_Start 中使用我的容器：

```
using (var scope = container.BeginScope())
{
    // LifestylePerWebRequest components will now be scoped to this explicit scope instead
    // _container.Resolve<...>()

} 
```

无需担心显式处置事物，因为它们会在 Scope 存在时被处置。

我已将模块的完整代码放在下面。我不得不在这个类中改变一些其他的东西才能让它工作，但它本质上是一样的。

```
public class PerWebRequestLifestyleModule : IHttpModule
{
    private const string key = "castle.per-web-request-lifestyle-cache";
    private static bool allowDefaultScopeOutOfHttpContext = true;
    private static bool initialized;

    public void Dispose()
    {
    }

    public void Init(HttpApplication context)
    {
        initialized = true;
        context.EndRequest += Application_EndRequest;
    }

    protected void Application_EndRequest(Object sender, EventArgs e)
    {
        var application = (HttpApplication)sender;
        var scope = GetScope(application.Context, createIfNotPresent: false);
        if (scope != null)
        {
            scope.Dispose();
        }
    }

    private static bool IsRequestAvailable()
    {
        if (HttpContext.Current == null)
        {
            return false;
        }

        try
        {
            if (HttpContext.Current.Request == null)
            {
                return false;
            }
            return true;
        }
        catch (HttpException)
        {
            return false;
        }
    }

    internal static ILifetimeScope GetScope()
    {
        var context = HttpContext.Current;
        if (initialized)
        {
            return GetScope(context, createIfNotPresent: true);
        }
        else if (allowDefaultScopeOutOfHttpContext && !IsRequestAvailable())
        {
            // We're not running within a Http Request.  If the option has been set to allow a normal scope to 
            // be used in this situation, we'll use that instead
            ILifetimeScope scope = CallContextLifetimeScope.ObtainCurrentScope();
            if (scope == null)
            {
                throw new InvalidOperationException("Not running within a Http Request, and no Scope was manually created.  Either run from within a request, or call container.BeginScope()");
            }
            return scope;
        }
        else if (context == null)
        {
            throw new InvalidOperationException(
                    "HttpContext.Current is null. PerWebRequestLifestyle can only be used in ASP.Net");
        }
        else
        {
            EnsureInitialized();
            return GetScope(context, createIfNotPresent: true);
        }
    }

    /// <summary>
    ///   Returns current request's scope and detaches it from the request context.
    ///   Does not throw if scope or context not present. To be used for disposing of the context.
    /// </summary>
    /// <returns></returns>
    internal static ILifetimeScope YieldScope()
    {
        var context = HttpContext.Current;
        if (context == null)
        {
            return null;
        }
        var scope = GetScope(context, createIfNotPresent: true);
        if (scope != null)
        {
            context.Items.Remove(key);
        }
        return scope;
    }

    private static void EnsureInitialized()
    {
        if (initialized)
        {
            return;
        }
        var message = new StringBuilder();
        message.AppendLine("Looks like you forgot to register the http module " + typeof(PerWebRequestLifestyleModule).FullName);
        message.AppendLine("To fix this add");
        message.AppendLine("<add name=\"PerRequestLifestyle\" type=\"Castle.MicroKernel.Lifestyle.PerWebRequestLifestyleModule, Castle.Windsor\" />");
        message.AppendLine("to the <httpModules> section on your web.config.");
        if (HttpRuntime.UsingIntegratedPipeline)
        {
            message.AppendLine(
                "Windsor also detected you're running IIS in Integrated Pipeline mode. This means that you also need to add the module to the <modules> section under <system.webServer>.");
        }
        else
        {
            message.AppendLine(
                "If you plan running on IIS in Integrated Pipeline mode, you also need to add the module to the <modules> section under <system.webServer>.");
        }
#if !DOTNET35
        message.AppendLine("Alternatively make sure you have " + PerWebRequestLifestyleModuleRegistration.MicrosoftWebInfrastructureDll +
                           " assembly in your GAC (it is installed by ASP.NET MVC3 or WebMatrix) and Windsor will be able to register the module automatically without having to add anything to the config file.");
#endif
        throw new ComponentResolutionException(message.ToString());
    }

    private static ILifetimeScope GetScope(HttpContext context, bool createIfNotPresent)
    {
        var candidates = (ILifetimeScope)context.Items[key];
        if (candidates == null && createIfNotPresent)
        {
            candidates = new DefaultLifetimeScope(new ScopeCache());
            context.Items[key] = candidates;
        }
        return candidates;
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-09T01:01:46.057

好的，我想出了一个非常干净的方法来做到这一点！

首先，我们需要一个 的实现`IHandlerSelector`，它可以根据我们对此事的意见选择一个处理程序，或者保持中立（通过返回`null`，这意味着“没有意见”）。

```
/// <summary>
/// Emits an opinion about a component's lifestyle only if there are exactly two available handlers and one of them has a PerWebRequest lifestyle.
/// </summary>
public class LifestyleSelector : IHandlerSelector
{
    public bool HasOpinionAbout(string key, Type service)
    {
        return service != typeof(object); // for some reason, Castle passes typeof(object) if the service type is null.
    }

    public IHandler SelectHandler(string key, Type service, IHandler[] handlers)
    {
        if (handlers.Length == 2 && handlers.Any(x => x.ComponentModel.LifestyleType == LifestyleType.PerWebRequest))
        {
            if (HttpContext.Current == null)
            {
                return handlers.Single(x => x.ComponentModel.LifestyleType != LifestyleType.PerWebRequest);
            }
            else
            {
                return handlers.Single(x => x.ComponentModel.LifestyleType == LifestyleType.PerWebRequest);
            }
        }
        return null; // we don't have an opinion in this case.
    }
} 
```

我这样做是为了使意见非常有限。`PerWebRequest`只有当恰好有两个处理程序并且其中一个有生活方式时，我才会发表意见；这意味着另一个***可能***是非 HttpContext 替代方案。

我们需要用 Castle 注册这个选择器。在开始注册任何其他组件之前，我会这样做：

```
container.Kernel.AddHandlerSelector(new LifestyleSelector()); 
```

最后，我希望我知道如何复制我的注册以避免这种情况：

```
container.Register(
    AllTypes
        .FromAssemblyContaining<EmailService>()
        .Where(t => t.Name.EndsWith("Service"))
        .WithService.Select(IoC.SelectByInterfaceConvention)
        .LifestylePerWebRequest()
);

container.Register(
    AllTypes
        .FromAssemblyContaining<EmailService>()
        .Where(t => t.Name.EndsWith("Service"))
        .WithService.Select(IoC.SelectByInterfaceConvention)
        .LifestylePerThread()
); 
```

如果您能找到克隆注册的方法，改变生活方式并注册它们（使用`container.Register`或`IRegistration.Register`），请将其作为答案发布在这里！:)

**更新：**在测试中，我需要唯一地命名相同的注册，我这样做是这样的：

```
.NamedRandomly()

    public static ComponentRegistration<T> NamedRandomly<T>(this ComponentRegistration<T> registration) where T : class
    {
        string name = registration.Implementation.FullName;
        string random = "{0}{{{1}}}".FormatWith(name, Guid.NewGuid());
        return registration.Named(random);
    }

    public static BasedOnDescriptor NamedRandomly(this BasedOnDescriptor registration)
    {
        return registration.Configure(x => x.NamedRandomly());
    } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-08T22:17:10.143

我不知道幕后发生了什么`.LifestylePerWebRequest()`；但这就是我为“每个请求的上下文”场景所做的：

检查`HttpContext`会话，如果存在，则从`.Items`. 如果它不存在，请从`System.Threading.Thread.CurrentContext`.

希望这可以帮助。

# ios - 在设备 iOS websocket 服务器上

> ID：11873918
> 
> 赞同：8
> 
> 时间：2012-08-08T22:07:55.903
> 
> 标签：ios, websocket

希望在 iOS 中的 UIWebView 与 javascript 与 Objective-c 中设备 websockets 服务器上的本地设备之间实现 websockets 通信。任何人都看过一个示例代码集，用于在 iOS 设备上设置本地 websocket 服务器，以便 web 视图的一半可以轻松地与本机容器通信，反之亦然？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T19:40:01.603

我制作了一个在 iOS 上运行的 websocket 服务器。它是 libwebsockets 的包装器，代码在 github 上：[https](https://github.com/benlodotcom/BLWebSocketsServer) ://github.com/benlodotcom/BLWebSocketsServer 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T17:46:13.333

try this library [https://github.com/robbiehanson/CocoaHTTPServer](https://github.com/robbiehanson/CocoaHTTPServer) it has a MAC and IOS example with websockets.

# c# - 生成文件名列表，但没有文件路径

> ID：11873924
> 
> 赞同：1
> 
> 时间：2012-08-08T22:08:23.313
> 
> 标签：c#, winforms

我有一个列表框，显示一组引用文本文件的文件名。我认为显示完整路径在美学上没有吸引力，所以我习惯于`Path.GetFileName`切断目录部分。

但是现在当用户选择要打开的特定文件名时，我已经丢失了路径。这些文件可以位于本地计算机上的任何位置（目前）。

我怎样才能使用列表框，以便我可以显示漂亮的文件名，但也可以参考实际文件？

编辑：我喜欢为每个列表框项拥有一个自定义包装类的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T22:17:23.577

我过去所做的是为我想在 ListBox 中显示的对象创建一个包装类。在此类中重写`ToString`为要在 ListBox 中显示的字符串。

当您需要获取所选项目的详细信息时，将其转换为包装类并提取您需要的数据。

这是一个丑陋的例子：

```
class FileListBoxItem
{
    public string FileFullname { get; set; }
    public override string ToString() {
        return Path.GetFileName(FileFullname);
    }
} 
```

用 FileListBoxItems 填充您的 ListBox：

```
listBox1.Items.Add(new FileListBoxItem { FileFullname = @"c:\TestFolder\file1.txt" }) 
```

取回所选文件的全名，如下所示：

```
var fileFullname = ((FileListBoxItem)listBox1.SelectedItem).FileFullname; 
```

* * *

**编辑**
@user1154664 在对您原来的问题的评论中提出了一个很好的观点：如果显示的文件名相同，用户将如何区分两个 ListBox 项？

这里有两个选项：

**同时显示每个 FileListBoxItem 的父目录**

为此，将`ToString`覆盖更改为：

```
public override string ToString() {
    var di = new DirectoryInfo(FileFullname);
    return string.Format(@"...\{0}\{1}", di.Parent.Name, di.Name);
} 
```

**在工具提示中显示 FileListBoxItem 的完整路径**

为此，在您的表单上放置一个 ToolTip 组件并`MouseMove`为您的 ListBox 添加一个事件处理程序，以检索用户将鼠标悬停在上方的`FileFullname`属性值。`FileLIstBoxItem`

```
private void listBox1_MouseMove(object sender, MouseEventArgs e) {
    string caption = "";

    int index = listBox1.IndexFromPoint(e.Location);
    if ((index >= 0) && (index < listBox1.Items.Count)) {
        caption = ((FileListBoxItem)listBox1.Items[index]).FileFullname;
    }
    toolTip1.SetToolTip(listBox1, caption);
} 
```

当然，您可以将第二个选项与第一个选项一起使用。

[ListBox 中工具提示的来源](http://social.msdn.microsoft.com/forums/en-US/winforms/thread/894d0814-dcf1-4cd6-9cca-2c6239794442/)（已接受的答案，代码重新格式化为我喜欢的风格）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T22:10:14.947

如果使用`ListBoxItem.Tag`WPF，则用于存储每个项目的完整路径。或者，如果使用 WinForms，您可以创建一个自定义类来存储完整路径，但会覆盖 object.ToString() 以便只显示文件名。

```
class MyPathItem
{
    public string Path { get; set; }
    public override string ToString() 
    {
        return System.IO.Path.GetFileName(Path);
    }
}

...

foreach (var fullPath in GetFullPaths())
{
    myListBox.Add(new MyPathItem { Path = fullPath });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T22:15:15.870

我个人不同意你认为这对用户来说是丑陋的观点。显示完整路径为用户提供了明确的详细信息，并使他们对他们的选择或他们正在做的事情充满信心。

我会使用`Dictionary`, 使用项目索引作为键和此列表项的完整路径作为值。

```
Dictionary<int, string> pathDict = new Dictionary<int, string>();
pathDict.Add(0, "C:\SomePath\SomeFileName.txt");
... 
```

以上可能是使用该`item.Tag`物业的最佳方式...

我希望这有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T22:18:45.853

我这样做

```
public class ListOption
{
   public ListOption(string text, string value)
   {
      Value = value;
      Text = text;
   }

   public string Value { get; set; }
   public string Text { get; set; }
} 
```

然后创建我的列表

```
List<ListOption> options = new List<ListOption>()
For each item in files
   options.Add(new ListOption(item.Name, item.Value));
Next 
```

绑定我的清单

```
myListBox.ItemSource = options; 
```

然后获取我的值或文本

```
protected void List_SelectionChanged(...)
{
   ListOption option = (ListOption) myListBox.SelectedItem;
   doSomethingWith(option.Value);
} 
```

只是这里的想法是主要的

# php - 类别中的减少链接

> ID：11873925
> 
> 赞同：-1
> 
> 时间：2012-08-08T22:08:25.127
> 
> 标签：php, wordpress

如果我创建新类别，例如**文章**，我在链接上拥有此类别中的所有帖子：

```
http://www.mypage.com/category/article 
```

我该怎么做：

```
http://www.mypage.com/article 
```

没有“类别”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T22:23:46.943

自从我使用 Wordpress 已经有一段时间了，但如果我没记错的话，你应该可以在 wp-admin 中编辑你的 URL。您可以使用[此](http://codex.wordpress.org/Using_Permalinks)页面来帮助您在管理员中找到该部分。

您将使用这样的 URL 结构...

```
%postname% 
```

这将从 URL 中删除类别。请记住，更改此设置可能会弄乱任何以前帖子的永久链接。您可以在 wp-admin 中修改永久链接，也可以使用 phpMyAdmin 等工具通过数据库修改。或者，我相信有些插件会重定向旧的永久链接，但就像我说的，距离我上次使用 Wordpress 已经有一段时间了。

# mysql - 调整正则表达式以使用 MySQL

> ID：11873931
> 
> 赞同：3
> 
> 时间：2012-08-08T22:09:15.087
> 
> 标签：mysql, regex

我的这个正则表达式在我的所有测试中都可以正常工作，但是我无法让它在 MySQL 中工作，尽管我一直在谷歌搜索并尝试了以下示例：

`^[A-Za-z]{2,4}-\d{3}-\d{2}$`

`AA-001-01`在 Javascript 中，它通过正确匹配`ZZZZ-999-99`，因此在 MySQL 中尝试了它，对正则表达式进行了各种调整，但都没有运气：

```
SELECT * FROM products WHERE sku REGEXP '^[A-Za-z]{2,4}-\d{3}-\d{2}$' 
```

*`sku`（该表包含与上面给出的样本匹配的数千条记录）*

据我所知，Mysql Regex 支持是有限的，但这应该不能正常工作，还是有一些进一步的语法考虑可以与 Mysql 一起工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T22:13:03.357

要匹配一个数字，您应该使用`[0-9]`或`[[:digit:]]`。

试试这个：

```
SELECT col1, col2, ..., coln
FROM products
WHERE sku REGEXP '^[A-Za-z]{2,4}-[0-9]{3}-[0-9]{2}$' 
```

在线查看它：[sqlfiddle](http://sqlfiddle.com/#!2/e690b/1)。

参见手册[`REGEXP`](http://dev.mysql.com/doc/refman/5.6/en/regexp.html)。

# algorithm - 推荐算法

> ID：11873933
> 
> 赞同：5
> 
> 时间：2012-08-08T22:09:21.077
> 
> 标签：algorithm, machine-learning, recommendation-engine

我需要为一个网站组合一个推荐算法。我想出了一个非常简单的方法来实现这一点，但想知道是否有人可以向我指出任何可以帮助我更好地了解其他示例是如何组合在一起的文献。

我已经了解了 Apache Mahout 中的协作过滤、聚类和分类等功能，但我不知道机器学习如何融入所有这些功能。我可以看到如何为上述内容制作算法（除了机器学习），但想知道是否有人知道可以添加到组合中的其他任何东西。

另外，您认为 Recommender 的目的是什么，它如何发挥最佳作用？有人愿意分享定义吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T16:45:52.213

有[一篇文章讨论](https://github.com/gpfvic/IRR/blob/master/A%20Taxonomy%20of%20Recommender%20Agents%20on%20the%20Internet.pdf)了将不同算法组合在一起并创建推荐器的不同可能性。作者分析了 37 个不同的系统及其参考文献，并将它们分类为 8 个基本维度的列表。

尽管该论文已于 2003 年发表并且其中的一些示例现在不可用，但它仍然可以作为研究人员构建自己的推荐系统的一个很好的起点。

我想分享 Robin Burk 在[他的论文](http://dl.acm.org/citation.cfm?id=586352)中对推荐系统的定义：

> 任何产生个人推荐作为输出的系统，或具有以个性化方式引导用户在大量可能选项中找到有趣或有用的对象的效果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-10T03:23:23.340

现在有一个关于推荐系统的优秀 Coursera 课程，由该领域的先驱之一明尼苏达大学的 Joeseph Konstan 教授。这是免费的。相当不错，涵盖了推荐系统的基本分类，包括：

```
 - Rating Systems
 - Content Based Filters
 - Collaborative Systems (User-user and Item-item)
 - Dimensionality Reduction (SVD, its meaning, and how to compute it)
 - Hybrid Systems 
```

SVD 完全属于 ML，我发现这是我在任何地方看到的最连贯和最直观的呈现方式——而且我见过一些。

它还展示了如何使用 Lenskit（一个学术推荐系统工具包）来创建真实世界的系统。显然我喜欢这门课程，尽管我希望它们涵盖贝叶斯方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-02T19:59:47.957

推荐系统是人工智能（特别是数据挖掘）中的一个主题，旨在向用户推荐新项目。这些项目可以是任何类型的，例如书籍、旅行、音乐等。

它主要由一个算法组成，该算法将尝试提取以前数据的一些知识（如用户偏好）以建议新的可购买项目。

它被 Netflix 和亚马逊广泛使用。当您看到“购买此内容的用户也喜欢此内容”这句话时，很有可能是推荐系统在其背后。

聚类和其他类似算法是用于改进推荐系统的方法。例如，您可能希望在应用特定推荐系统之前按相似度对用户进行分组，以获得更好的结果。为此，您可以使用 K-最近邻。

这两篇文章可能会帮助您更好地理解这个主题： *Greg Linden、Brent Smith 和 Jeremy York。Amazon.com 推荐：商品到商品的协同过滤。*

*罗宾·伯克。混合推荐系统：调查和实验。用户建模和用户适应交互*。

# c++ - 使用 extern "C" 时带大括号和不带大括号有区别吗？

> ID：11873939
> 
> 赞同：14
> 
> 时间：2012-08-08T22:10:01.233
> 
> 标签：c++

因此，在[James Kanze 和 Loki Astari 对 C 链接](https://stackoverflow.com/a/11871465/315052)进行教育时，我想知道这一点：

```
extern "C" int foo1 (void (*)());
extern "C" { int foo2 (void (*)()); } 
```

毕业后，我认为它必须是`foo1`只接受一个带有C++链接的函数指针，而`foo2`只接受一个带有C链接的函数指针。我的理解正确吗？C++ 标准中是否有具体的参考资料可以解释我上面示例中的差异？

**编辑：**为了让每个人都更容易理解，[这里有一个包含 C++ 11 草案标准相关部分的 pastebin](http://pastebin.com/F3MP9wFv)。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-08T22:48:41.400

foo1 采用指向 C 函数的指针，如 [dcl.link] 7.5p4 中所示

> 在*链接规范*中，指定的语言链接适用于**所有函数声明**符的函数类型、具有外部链接的函数名以及链接规范中声明的具有外部链接的变量名。*[例子：*
> 
> `extern "C" void f1(void(*pf)(int));`
>                                                                  *// 名称 f1 及其函数类型具有 C 语言*
>                                                                  *// 链接；pf 是指向 C 函数的指针*

该示例直接适用于`foo1`并且添加的重点突出了我认为的原因。函数的参数列表包含一个参数的函数声明符，所有函数声明符都受链接规范的影响。这适用于支撑和非支撑连杆规范。

不使用大括号时的一些区别是名称是自动`extern`的，并且禁止显式使用存储说明符。

```
extern "C" int i; // not a definition

int main() {
    i = 1; // error, no definition
}

extern "C" static void g(); // error 
```

作为这种差异重要的示例，请考虑包含以下内容的标头：

```
extern "C" int a;
extern "C" double b;
extern "C" char c; 
```

有人可能会想将其更改为：

```
extern "C" {
    int a;
    double b;
    char c;
} 
```

但这将是不正确的，因为这会将声明转换为定义。相反，使用的正确代码`extern "C" {}`是：

```
extern "C" {
    extern int a;
    extern double b;
    extern char c;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T23:11:01.303

当您有许多声明和定义时，使用大括号。通常，您可以在头文件中看到`C`代码的开始和结束，以便在`C++`

```
#ifdef __cplusplus
extern "C" {
#endif

// C stuff here to be available for C++ code

#ifdef __cplusplus
}
#endif 
```

我可以推荐阅读有关“名称修饰”的内容[http://en.wikipedia.org/wiki/Name_mangling](http://en.wikipedia.org/wiki/Name_mangling)这`extern "C"`是回退到`C`链接名称约定的关键。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T23:11:56.723

```
extern "C" int foo1 (void (*)());
extern "C" { int foo2 (void (*)()); } 
```

那些是一样的。使用大括号的主要原因是如果您有多个功能，例如：

```
extern "C" int foo1 (void (*)());
extern "C" int foo2 (void (*)());
extern "C" int foo3 (void (*)());
extern "C" int foo4 (void (*)()); 
```

可以更简单地写成：

```
extern "C" {
    int foo1 (void (*)());
    int foo2 (void (*)());
    int foo3 (void (*)());
    int foo4 (void (*)());
} 
```

此外，如果您尝试制作一个同时适用于 C 和 C++ 的头文件，您可能希望将其写为：

```
#ifdef __cplusplus
extern "C" {
#endif

    int foo1 (void (*)());
    int foo2 (void (*)());
    int foo3 (void (*)());
    int foo4 (void (*)());

#ifdef __cplusplus
}
#endif 
```

PS 我不知道任何编译器在函数指针的“C++ 链接”或“C 链接”之间存在差异。当我们谈论 C 或 C++ 链接时，我们谈论的是编译器如何破坏名称。对于函数指针，您传递的是指针，因此名称无关紧要。*调用约定*相同很重要，但对于 C 和 C++，它通常是相同的，因为人们可以自由混合这些语言。

# algorithm - 从哪里开始 - 密码哈希

> ID：11873941
> 
> 赞同：0
> 
> 时间：2012-08-08T22:10:09.487
> 
> 标签：algorithm, wordpress, passwords, hash

我一直在建立一个 Wordpress 站点，并且刚刚在阅读有关在数据库中存储密码和密码哈希的信息。我理解整个概念 - 它是一种将密码转换为（看似）随机十六进制字符串的算法，但以可预测的方式进行，因此可以存储密码并再次用于在登录时进行检查。

了解。要实现这一点，我从哪里开始？我要下载什么，它在我的站点目录中的位置，我如何称呼它等等。任何帮助将不胜感激。另外，对于使用哪种散列算法并不挑剔，我听说 MD5 和 SHA-1 是最好的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T22:21:46.723

不用担心。默认情况下，wordpress 已经对密码进行了哈希处理。除非您自己修改代码，否则应该已经处理好了。

# jquery - Jquery - 插入html片段并向下滑动

> ID：11873944
> 
> 赞同：4
> 
> 时间：2012-08-08T22:10:22.760
> 
> 标签：jquery, slidedown

由于某种原因，这不想工作。我只是想在单击链接时`html`插入一些内容并向下滑动。`div`

[http://jsfiddle.net/nosfan1019/mT9mc/2/](http://jsfiddle.net/nosfan1019/mT9mc/2/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T22:12:24.767

更改您的 CSS。

```
div {
    background: #eee;
    display:none; //add display:none;
} 
```

之前没有滑下来的原因，是已经看得见了。

演示：http: [//jsfiddle.net/mT9mc/6/](http://jsfiddle.net/mT9mc/6/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-08T22:15:10.287

是的，我想说和 ahren 一样，div 已经可见，所以你不能`slideDown`在已经可见的元素上使用。您可以添加`display: none;`到 div 的样式，也可以使用以下...

```
$('a').click(function() {
    $('div').hide().html('ffasdf').slideDown('slow');
}); 
```

如[本例所示。](http://jsfiddle.net/4nmdr/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-08T22:13:38.800

你的 div 必须被隐藏才能真正向下滑动

见[http://jsfiddle.net/mT9mc/4/](http://jsfiddle.net/mT9mc/4/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T22:14:18.493

“div”标签必须用`display: none`;)隐藏

将其添加到 css 中，您的代码应该可以工作：[jsfiddle](http://jsfiddle.net/mT9mc/7/)

# objective-c - 从一个巨大的字符串中选择一个句子

> ID：11873945
> 
> 赞同：0
> 
> 时间：2012-08-08T22:10:36.223
> 
> 标签：objective-c, ios, memory-management, nsstring, nsarray

我正在优化一个objective-c应用程序，在该应用程序中有一个包含大约4000个句子的大型NSString；不要问为什么……但是有。它是随机选择一个句子并返回它。

这是代码（我缩短了分号）：

```
NSString *sentences[] = {@"For crying out loud", @"Too much information", @"Tomorrow", @"Tonight", @"I don't know", @"Forever and ever ", @"Lets get high", @"Foreigner ", @"Sick"};

self.responses = malloc(sizeof(self.responses)/sizeof(void*));
memcpy(strings, self.responses, sizeof(sentences)/sizeof(void*));

[...]

[self performSelector:@selector(didRecieveMessage:) withObject:self.responses[rand() % sizeof(self.responses)] afterDelay:rand() % 15 + 2]; 
```

现在，这需要优化。我正在考虑将句子包含在`SQLLite`数据库中并调用数据库来获取随机句子，但是有没有更好的方法来做到这一点？例如，从 a`text file`或`Plist file`? 如果是这样，我该怎么做？记忆当然是最重要的方面之一。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T22:19:01.690

好吧，您可以从不复制整个数组开始，然后使用 memcpy 占用两倍的内存。

我在这里看到了一些剪切和粘贴的雾，但很明显应该做的是使用 NSArray 作为初始数组，而不是对整个数组进行 m​​emcpy。

除此之外，将其放入 sqlite 并进行查询，您将不会在内存中拥有所有这些东西。如果这是 iOS，我肯定会将这些数据转储到 sqlite。任何大小的参考数据都不应该在内存中。

这是 Sqlite 的主要功能......

# php - 使用 json 解析样式化 textview

> ID：11873946
> 
> 赞同：1
> 
> 时间：2012-08-08T22:10:43.770
> 
> 标签：php, android, json, parsing, textview

我有一段代码将我的 db 值解析为我的 android 活动，但我希望它的样式与现在不同。

这是我的代码

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.leesverslag);
    /* Werkt altijd */
    // Create a crude view - this should really be set via the layout resources  
    // but since its an example saves declaring them in the XML.
    LinearLayout rootLayout = new LinearLayout(getApplicationContext());
    txt = new TextView(getApplicationContext());  
    rootLayout.addView(txt);  
    setContentView(rootLayout);
    /* Werkt altijd */
    // Set the text and call the connect function.  
    //txt.setText("Connecting..."); 
    //call the method to run the data retrieval
    txt.setText(getServerData(KEY_121)); 
} 
```

我认为它来了，因为我说，LinearLayout rootLayout = new LinearLayout(getApplicationContect());

但我不知道如何解决这个问题，所以它可以与我自己的布局一起使用。

新的布局正在向我展示。

[http://www.wvvzondag2.nl/android/leesverslag.php](http://www.wvvzondag2.nl/android/leesverslag.php)

```
{"introtext": "<p>my custom value text for a android application<\/p>"} 
```

我想查看我的 android 应用程序的自定义值文本

这是我的 php 代码。

```
<?php
header('Content-type: application/json');
$user = '***';  
$pswd = '***';  
$db = '***';  
$conn = mysql_connect('localhost', $user, $pswd);  
mysql_select_db($db, $conn);  
$sql =  mysql_query("SELECT jos_content.introtext FROM jos_content, jos_categories WHERE jos_categories.id = '80' AND jos_content.state = '1' AND jos_categories.id = jos_content.catid AND jos_content.title = '".$_REQUEST['titel']."'");
while($row=mysql_fetch_assoc($sql))
$output[]=$row;
print str_replace('\/','/',json_encode($output));
mysql_close;
?> 
```

有人可以帮我做些什么来让它与我自己的布局一起工作吗？

亲切的问候，帕特里克

# c++ - FFT Cooley Tukey算法 - 不适用于多个数字

> ID：11873952
> 
> 赞同：1
> 
> 时间：2012-08-08T22:11:03.590
> 
> 标签：c++, algorithm, fft

我正在尝试为 FFT 编写 Cooley Tukey 算法。现在，该算法运行良好，但仅适用于 2 个数字 - 仅此而已。例如，我使用了在线 FFT 计算，输入相同的数据并得到相同的结果。这是算法的代码：

```
#include <iostream>
#include <math.h>
#include <vector>
#include <complex>

using namespace std;

#define pi 3.14159

void ComplexFFT(vector<float> &realData, vector<float> &actualData, unsigned long sample_num, unsigned int sample_rate, int sign)
{
    unsigned long n, mmax, m, j, istep, i;
    double wtemp,wr,wpr,wpi,wi,theta,tempr,tempi;

    // CHECK TO SEE IF VECTOR IS EMPTY;

    actualData.resize(2*sample_num, 0);

    for(n=0; (n < sample_rate); n++)
    {
        if(n < sample_num)
        {
            actualData[2*n] = realData[n];
        }else{
            actualData[2*n] = 0;
            actualData[2*n+1] = 0;
        }
    }

    // Binary Inversion
    n = sample_rate << 1;
    j = 0;

    for(i=1; (i< n); i+=2)
    {
        if(j > i)
        {
            swap(actualData[j - 1], actualData[i - 1]);
            swap(actualData[j], actualData[i]);
        }
         m = sample_rate;
         while (m >= 2 && j > m) {
          j -= m;
          m >>= 1;
         }
         j += m;
     }
     mmax=2;

     while(n > mmax) {

        istep = mmax << 1;
        theta = sign * (2*pi/mmax);
        wtemp = sin(0.5*theta);
        wpr = -2.0*wtemp*wtemp;
        wpi = sin(theta);
        wr = 1.0;
        wi = 0.0;

        for(m=1; (m < mmax); m+=2) {
            for(i=m; (i <= n); i += istep)
            {
                j = i + mmax;
                tempr = wr*actualData[j-1]-wi*actualData[j];
                tempi = wr*actualData[j]+wi*actualData[j-1];

                actualData[j-1] = actualData[i-1] - tempr;
                actualData[j] = actualData[i]-tempi;
                actualData[i-1] += tempr;
                actualData[i] += tempi;
            }
            wr = (wtemp=wr)*wpr-wi*wpi+wr;
            wi = wi*wpr+wtemp*wpi+wi;
        }
        mmax = istep;
    }

    // determine if the fundamental frequency
    int fundemental_frequency = 0;
    for(i=2; (i <= sample_rate); i+=2)
    {
        if((pow(actualData[i], 2)+pow(actualData[i+1], 2)) > pow(actualData[fundemental_frequency], 2)+pow(actualData[fundemental_frequency+1], 2)) {
            fundemental_frequency = i;
        }

    }
}
int main(int argc, char *argv[]) {

    vector<float> numbers;
    vector<float> realNumbers;

    numbers.push_back(50);
    numbers.push_back(10);
    numbers.push_back(50);
    numbers.push_back(10);
    ComplexFFT(numbers, realNumbers, 4, 8, -1);

    for(int i=0; (i < realNumbers.size()); i++)
    {
        cout << realNumbers[i] << ' ';
    }
} 
```

如果我输入：

50, 10

那么结果将是：

```
60.00, 0.0
40.00, 0.0 
```

而在计算器中，完全相同。

好像我进入的地方：

```
60.00, 0.0
40.00, 0.0 
```

计算器返回结果：

```
120.0, 0.0
0.0, 0.0
80.0, 0.0
0.0, 0.0 
```

我的结果返回：

```
60, 60
24.6446, -45.3553
90, -10.0001
4.64479, 45.3555 
```

有没有人有什么建议？

PS 该算法是否仅适用于 2 位数值？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T09:42:51.417

您的代码中有一些错误：

```
 for(m=1; (m < mmax); m+=2) {
            for(i=m; (i <= n); i += istep)
            {
                j = i + mmax;      // !!! Here, j will be bigger than actualData.size() - 1 
                tempr = wr*actualData[j-1]-wi*actualData[j];
                tempi = wr*actualData[j]+wi*actualData[j-1];

                actualData[j-1] = actualData[i-1] - tempr;
                actualData[j] = actualData[i]-tempi;
                actualData[i-1] += tempr;
                actualData[i] += tempi;
            }
            wr = (wtemp=wr)*wpr-wi*wpi+wr;
            wi = wi*wpr+wtemp*wpi+wi;
        } 
```

# c++ - 继承和纯虚函数

> ID：11873957
> 
> 赞同：0
> 
> 时间：2012-08-08T22:11:31.420
> 
> 标签：c++, inheritance, abstract-class, pure-virtual

我正在学习 C++ 中的继承，而且我是抽象纯虚拟、基类和派生类的新手。所以我想出了下面的代码，它可以工作，但我不确定我是否正确地实现了 c++ 原则。请有人评估以下代码以进行改进。

```
#include <iostream>
using namespace std;

class Pizza
{
   private:
       double pCost;
       double pPrice;

   public:
       Pizza(const double& c, const double& p) : pCost(c), pPrice(p){}
       virtual ~Pizza(){}
       virtual double area() = 0;
       virtual double cost() = 0;
       virtual double price () = 0;
       virtual double profit() = 0;
       double getCost() const {return pCost;}
       double getPrice() const {return pPrice;}
};

class CircularPizza : public Pizza
{
   private:
       double radius;

   public:
       CircularPizza(const double& r, const double& c, const double& p)
        : Pizza(c, p), radius(r){}
        virtual ~CircularPizza(){}
        virtual double area(){ return (3.14 * radius * radius);}
        virtual double cost() { return area() * getCost(); }
        virtual double price() { return area() * getPrice(); }
        virtual double profit() { return price() - cost();}
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T22:23:12.043

如果我要改变任何东西，我会制作`cost(), price()`并`profit()`成为非虚拟并在基`Pizza`类中定义它们。

这是有道理的，因为它们都依赖于区域——这是唯一`CircularPizza`真正定义的东西。如果你做一个`RectangularPizza`班，每面积的成本，每面积的价格，利润的计算都是一样的。唯一会改变的是该地区本身。意识到这一事实应该引导您以相同的方式设计类，其中只有区域发生变化，其他代码对两者都是通用的，`CircularPizza`并且`RectangularPizza`使用基类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T22:24:45.643

看起来不错......但是，有一个`getCost()`方法以及`cost()`. 与价格相同...如果成本和价格函数的全部要点是特定于实现的，那么提供对内部`pCost`和`pPrice`成员的访问似乎是不对的。

也许这只是一个命名的事情？由于您在构造函数中提供了成本和价格，因此以后能够查询这些是公平的。`cost()`因此，在这种情况下，和`price()`成员的名称存在语义问题（无论如何在我看来） 。或者您的意思可能是“单位成本”和“总成本”之类的东西。

您可能需要考虑使成员变量受保护而不是私有。

就您的 C++ 而言，这一切看起来都不错，除了那些不修改类的虚函数可能应该是常量（这样就可以在类的 const 实例上调用它们）。

此外，为了完整起见，您可能希望实现一个与类`CircularPizza::getRadius()`提供的功能一致的功能`Pizza`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T22:26:58.923

对于家庭作业，看起来不错。如需更多阅读，请考虑[何时使用私有虚拟功能](http://www.parashift.com/c++-faq-lite/private-virtuals.html)。此外，我发现[偶尔创建接口](http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml#Interfaces)很有帮助，类似于 C#。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-02T15:23:31.180

另一点值得一提的是，CircularPizza 对象中的 area()、cost()、price() 和 Profit() 函数不需要是虚拟的，除非您打算使用 CircularPizza 作为另一个派生类的基类.

# java - Ehcache中的“缓存未命中”和“内存缓存未命中”有什么区别？

> ID：11873958
> 
> 赞同：7
> 
> 时间：2012-08-08T22:11:34.183
> 
> 标签：java, ehcache

我正在查看 EhCache 统计信息，我看到了这些数字：

> 缓存未命中：75977 缓存
> 命中：38151
> 
> InMemoryCacheMisses：4843
> InMemoryCacheHits：38151

“内存”是唯一的存储——没有堆外存储，也没有磁盘存储（`overflowToDisk="false", diskPersistent="false"`）。那么这两个是什么意思呢？我希望它们是相同的（命中相同），但未命中差异很大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T09:01:14.873

你的缓存中有一些`null`-valued吗？`Element`（Ehcache 允许您将`Element`s 与`null`值一起存储，但我不确定是否有任何限制）。

查看 2.5.3 版本中[Cache.searchInStoreWithStats(Object key)](http://grepcode.com/file/repo1.maven.org/maven2/net.sf.ehcache/ehcache-core/2.5.3/net/sf/ehcache/Cache.java#Cache.searchInStoreWithStats%28java.lang.Object%29)的代码，似乎那里有一个错误：

*   确定是否增加的测试`inMemoryMisses`使用`containsKey()`导数，
*   而针对导数结果增加`cacheMisses`空值检查的测试`get()`。

因此，每次您搜索存在于 中`InMemoryStore`但具有`null`值的键时，它将递增`cacheMisses`但不递增`inMemoryMisses`。

所以，我可能完全不在了，但我闻起来很香。你怎么看？

**编辑：**我意识到我的解释是错误的——元素不能为空，（但它的“值”可以为空）。无论如何我都会在这里留下这个答案，以防它触发任何其他想法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T10:44:41.863

我相信您正在使用 ehcache 2.5+ 。如果您有磁盘持久性为 true 的缓存配置（尽管 overflowtodisk 为 false），它会写入磁盘。所以也可能有磁盘吗？您可以在统计中查看它们。你有diskpersistance是真的吗？请发布您的缓存配置

# python - flask-sqlalchemy - PostgreSQL - 为表定义特定模式？

> ID：11873959
> 
> 赞同：27
> 
> 时间：2012-08-08T22:11:35.543
> 
> 标签：python, flask, flask-sqlalchemy

我想使用 flask-sqlalchemy 为“模型”定义一个特定的模式。当您在 sqlalchemy 本身中创建表对象时，它有一个用于传递模式名称的参数。

我如何在烧瓶 sqlalchemy 中做到这一点？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-08-09T02:03:12.610

当您定义模型类时，请使用：

```
__table_args__ = {"schema":"schema_name"} 
```

也许它会为其他人节省一些狩猎。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-25T22:59:40.523

供将来参考：

```
db = flask.ext.sqlalchemy.SQLAlchemy(app)

app.config['SQLALCHEMY_DATABASE_URI'] = 'your_default_schema_db_uri'
app.config['SQLALCHEMY_BINDS'] = {'other_schema': 'your_other_db_uri'}

class TableA(db.Model):
    # This belongs to Default schema, it doesn't need specify __bind_key__
    ...

class TableB(db.Model):
      # This belongs to other_schema
    __bind_key__ = 'other_schema'
    ... 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-08-03T00:44:53.610

我就是这样做的，但如果可能的话，我也在寻找更好的方法 -

```
db = flask.ext.sqlalchemy.SQLAlchemy(app)

app.config['SQLALCHEMY_DATABASE_URI'] = 'your_default_schema_db_uri'

class Entity():
    __table_args__ = {
        'schema': 'schema_name'
    }
    # common columns below

class TableA(Entity, db.Model):
    # This belongs to Default schema, it doesn't need specify __bind_key__
    __table_args__ = {'schema' : Entity.__table_args__["schema"], 
                      'comment': 'TableA'}

class TableB(Entity, db.Model):
      # This belongs to other_schema
    __table_args__ = {'schema' : Entity.__table_args__["schema"], 
                      'comment': 'TableA'} 
```

# c# - 读取 SQL 到 DataSet 到 XmlDocument

> ID：11873967
> 
> 赞同：2
> 
> 时间：2012-08-08T22:12:13.220
> 
> 标签：c#, xml, dataset

下面的代码很梦幻。但它可以变得更紧凑和 C#'ish 吗？特别是我对两个问题有怀疑。

1.  `fill`通过将变量用作参数来填充变量不是很丑陋（旧的 C 风格）吗？
2.  可以使代码更紧凑而不是通过`String`?

C＃

```
String
  connectionString = "...",
  sqlStatement = "select * from Test",
  output = "";

SqlDataAdapter adapter = new SqlDataAdapter(sqlStatement, connectionString);
DataSet dataSet = new DataSet("Contents");
adapter.Fill(dataSet, "Test");
StringWriter stringWriter=new StringWriter();
dataSet.WriteXml(new XmlTextWriter(stringWriter));
XmlDocument document = new XmlDocument();
output = stringWriter.ToString();
document.LoadXml(output); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T23:44:58.230

我不知道如何使它更 C#ish 或更紧凑，但您确实需要关闭您的适配器和 StringWriter。我会使用该`using`块。

```
 String
       connectionString = "...",
       sqlStatement = "select * from Test",
       output = "";

    DataSet dataSet = new DataSet("Contents");
    using (SqlDataAdapter adapter = new SqlDataAdapter(sqlStatement, connectionString)){
        adapter.Fill(dataSet, "Test");}
    using (StringWriter stringWriter = new StringWriter()) { 
      dataSet.WriteXml(new XmlTextWriter(stringWriter));
      output = stringWriter.ToString();
    };
    XmlDocument document = new XmlDocument();
    document.LoadXml(output); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T11:47:10.650

虽然 Holger 的回答非常好，但我实际上是在使用 Linq to XML。我认为，如果您的输出是 XElement 而不是 XmlDocument 或 XmlNode，我从他的代码到 Linq 中利用的内容更加优雅。您也不需要强制转换为 XmlTextWriter。

```
String
   strConnection = "...",
   strSQL = "select * from Test",

XElement objOutput = null;

DataSet objDataSet = new DataSet("output");

using (SqlDataAdapter objAdapter = new SqlDataAdapter(strSQL, strConnection)){
    objAdapter.Fill(objDataSet, "row");}
using (StringWriter objWriter = new StringWriter()) { 
  objDataSet.WriteXml(objWriter);
  XDocument objDoc = XDocument.Parse(objDataSet.GetXml());
  objOutput = objDoc.Root;
};
return objOutput; 
```

# vba - Microsoft Access 中的可编辑组合框

> ID：11873968
> 
> 赞同：1
> 
> 时间：2012-08-08T22:12:18.893
> 
> 标签：vba, vbscript, ms-access-2007, ms-office, office-2010

我正在尝试在我的访问表单中添加接近可编辑组合框的内容，用户可以在其中键入他们需要的内容或从可用条目列表中进行选择。我是新手，希望能提供有关如何完成此操作的任何信息。

当我测试下面的代码时没有任何反应。

代码

```
Private Sub ddlUNS1_NotInList(NewData As String, Response As Integer)
    Dim ctl As Control

    ' Return Control object that points to combo box.
    Set ctl = Me!ddlUNSC1

    If MsgBox("Value is not in list. Add it?", vbOKCancel) = vbOK Then

        MsgBox ("ddlUNSLEVEL NOT LISTED FIRED ")
    Else 
        'ctl.Undo
        MsgBox ("ddlUNSLEVEL  LISTED FIRED ")
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T22:15:03.370

有多种选择。您可以参考绑定的字段：

```
Row Source: SELECT DISTINCT AddressType FROM ThisTable
Control Source : AddressType 
```

这用途有限，可能只对短期数据库有用。

您可以使用[NotInList 和 LimitToList](http://msdn.microsoft.com/en-us/library/office/bb214329%28v=office.12%29.aspx)添加新值。

# ios - UIButton titleLabel 在按下时调整大小？

> ID：11873969
> 
> 赞同：1
> 
> 时间：2012-08-08T22:12:20.023
> 
> 标签：ios, uikit

我正在尝试根据按下状态为 UIButton（使用 resizableImages 创建）提供一些文本。我看到的行为是按钮图像的宽度在我按下时会发生变化（变宽）。我想要的是当我按下它时文本会改变，但按钮保持相同的宽度。我摆弄了许多 UIButton 选项，但没有任何运气。这是我目前正在做的事情：（有趣的是，按钮的宽度变化量似乎与按钮框架的宽度相关（更大-> 更多变化）：

```
UIImage *normalButton = [UIImage imageNamed:@"ButtonSlice.png"];
UIImage *pressedButton = [UIImage imageNamed:@"ButtonPressedSlice.png"];
normalButton = [normalButton resizableImageWithCapInsets:UIEdgeInsetsMake(0, 2, 0, 2)];
pressedButton = [pressedButton resizableImageWithCapInsets:UIEdgeInsetsMake(0, 2, 0, 2)];

UIButton *myButton = [UIButton buttonWithType:UIButtonTypeCustom];
myButton.contentHorizontalAlignment = UIControlContentHorizontalAlignmentFill;
[myButton setImage:normalButton forState:UIControlStateNormal];
[myButton setImage:pressedButton forState:UIControlStateHighlighted];
[myButton addTarget:self action:@selector(pressed) forControlEvents:UIControlEventTouchUpInside];

myButton.titleLabel.font = [UIFont fontWithName:@"Helvetica" size:18.0];

[myButton setTitleColor:[UIColor colorWithWhite:0.1 alpha:1] forState:UIControlStateNormal];
[myButton setTitle:@"Highlighted" forState:UIControlStateHighlighted];
[myButton setTitle:@"Default" forState:UIControlStateNormal];
myButton.titleLabel.textAlignment = UITextAlignmentCenter;

//No effect?
myButton.adjustsImageWhenHighlighted = NO;

myButton.frame = CGRectMake(ceil(controllerFrame.size.width/2 - 100), 80, 200, 50); 
```

# php - 数据库表不更新

> ID：11873970
> 
> 赞同：-1
> 
> 时间：2012-08-08T22:12:21.753
> 
> 标签：php, mysql, database, mysqli

我正在使用 mysqli 和 php，我想要做的是我希望用户能够创建一个新密码，如果他们希望这样做的话。

对于用户更改密码，他们将在“用户名”文本框中输入他们的用户名，然后在“新密码”文本框中输入他们的新密码。

当用户提交表单时，它应该在数据库中查找，在数据库中找到匹配的用户名并更新该行，以便以前的密码更改为新密码，并且它还会对密码进行加盐以更好地加密。

但问题是它根本没有这样做。数据库根本没有更新密码，别介意给它们加盐，我不知道我需要做什么。

下面是我的尝试（我已经连接到 db，但只是没有包含下面的代码）：

```
 <?php
          // PHP code
          session_start(); 

          $salt = ""; 
        for ($i = 0; $i < 40; $i++) { 
           $salt .= substr(
             "./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789", 
             mt_rand(0, 63), 
             1); 
        }

          $username = (isset($_POST['username'])) ? $_POST['username'] : '';
          $newpassword = (isset($_POST['newpassword'])) ? $_POST['newpassword'] : '';

          if (isset($_POST['submit'])) {

            // don't use $mysqli->prepare here
     $query = "UPDATE Teacher SET TeacherSalt = $salt, TeacherPassword = SHA1(CONCAT($newpassword,$salt)) WHERE TeacherUserName = ?";
            // prepare query
            $stmt=$mysqli->prepare($query);
            // You only need to call bind_param once
            $stmt->bind_param("s",$username);
            // execute query
            $stmt->execute(); 
            // get result and assign variables (prefix with db)
            $stmt->bind_result($dbTeacherUsername,$dbTeacherPassword);

            while($stmt->fetch()) {
              if ($username == $dbTeacherUsername) {
                $loggedIn = true;
              }
            }

            /* close statement */
            $stmt->close();

            /* close connection */
            $mysqli->close();

          }

....

          <p>Username</p><p><input type="text" name="username" /></p>      <!-- Enter Teacher Username-->
          <p>New Password</p><p><input type="password" name="newpassword" /></p>  <!-- Enter Teacher Password--> 
```

下面是数据库表当前的样子：

```
TeacherUsername    TeacherPassword     TeacherSalt
j.lu               fgrfre4r4ffsdfv 
```

所以如果j.lu想修改密码，那么她会输入她的用户名，然后输入一个新密码，那么这应该都更新到上表中。但它没有更新任何东西。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T22:17:51.400

您正在将用户名获取到名为的变量中，`$username`但您正在绑定一个`$teacherusername`在 bind_param() 中调用的变量，这就是查询不获取任何结果的原因。

bind_param 代码应该是：

```
 // You only need to call bind_param once
    $stmt->bind_param("s",$username); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T01:13:22.560

我猜问题出在sql查询字符串上。$salt 和 $newpassword 等变量应该用单引号括起来，这样字符串就会包含 TeacherSalt='random' 而不是 TeacherSalt=random。

所以你应该更换

```
$query = "UPDATE Teacher SET TeacherSalt = $salt, TeacherPassword = SHA1(CONCAT($newpassword,$salt)) WHERE TeacherUserName = ?"; 
```

和

```
$query = "UPDATE Teacher SET TeacherSalt = '$salt', TeacherPassword = SHA1(CONCAT('$newpassword','$salt')) WHERE TeacherUserName = 'yoursearchparam'"; 
```

希望有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T22:30:48.900

1) 我没有看到任何错误检查或处理。

2) 我对变量“$username”、“$newpassword”、“$dbTeacherUsername”、“$dbTeacherPassword”等感到困惑。您确定在正确的地方使用了正确的名称吗?

3) 至少，请检查“$stmt->execute() == false”，并酌情显示 PDO“errorInfo”。

请发回您找到的内容。

# c# - 字符串中字符前的前导空格 - 计算前缀空格

> ID：11873973
> 
> 赞同：-1
> 
> 时间：2012-08-08T22:13:02.547
> 
> 标签：c#, .net, linq

我有一个字符串

```
&nbsp;&nbsp;-123 
```

我需要得到 2 作为计数。

```
&nbsp;&nbsp;&nbsp;-12&&nbsp;3 
```

我需要得到 4 作为计数。（在这种情况下，我想要 3 个，即 '-' 之前的空格）。

我使用的代码是

```
stringValue.Count(countSpace => countSpace == ' '); 
```

我如何通过约束检查，即。在这种情况下，“-”破折号并在“-”破折号之前和“-”之后获取空格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T23:44:26.197

假设有一个或零个破折号，这将起作用：

```
public static int CountSurroundingSpaces(string stringValue, char constraint)
{
    return stringValue.SkipWhile( c => c != constraint)
                      .Skip(1)
                      .TakeWhile( c => c == ' ')
                      .Count() +
           stringValue.Reverse()
                      .SkipWhile( c => c != constraint)
                      .Skip(1)
                      .TakeWhile( c => c == ' ')
                      .Count();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T23:52:26.580

您可以使用 TrimStart() 方法获取没有尾随空格的原始字符串，然后计算原始长度与修剪后的长度之间的差异：

```
 stringValue.Length - stringValue.TrimStart().Length 
```

**编辑**

要计算由某个分隔符拆分的字符串中的空格数，请尝试以下操作：

```
 static IEnumerable<int> GetSpaceCounts(string stringValue, char separator)
    {
        return stringValue.Split(separator).Select(s => s.Count(c => c == ' '));
    } 
```

要测试此代码，您可以使用：

```
 string stringValue = "    -123 12-  ";

    foreach (int i in GetSpaceCounts(stringValue, '-'))
        Console.WriteLine(i);

    Console.ReadLine(); 
```

# outlook - iCal4j 时区与 Microsoft Outlook 时区不兼容？

> ID：11873976
> 
> 赞同：1
> 
> 时间：2012-08-08T22:13:13.107
> 
> 标签：outlook, timezone, icalendar, ical4j

我正在创建一个应用程序来使用 iCal4j(1.0.3) api 创建 .ics 文件，它工作正常。但是我遇到了时区问题。我添加了 ZoneInfoOutlook(1.0.2) 库并一直在使用它来创建我的 .ics 文件。但是，Outlook 无法识别标准时区。例如，当我生成这个时：

```
BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Ben Fortuna//iCal4j 1.0//EN
CALSCALE:GREGORIAN
METHOD:PUBLISH
BEGIN:VEVENT
DTSTAMP:20120808T211508Z
DTSTART;TZID=America/New_York:20120808T020000
DTEND;TZID=America/New_York:20120808T180000
SUMMARY:NewYork Event
LOCATION:Manhattan
DESCRIPTION:This is a test Description
TZID:America/New_York
END:VEVENT
BEGIN:VTIMEZONE
TZID:America/New_York
TZURL:http://tzurl.org/zoneinfo-outlook/America/New_York
X-LIC-LOCATION:America/New_York
BEGIN:DAYLIGHT
TZOFFSETFROM:-0500
TZOFFSETTO:-0400
TZNAME:EDT
DTSTART:19700308T020000
RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
END:DAYLIGHT
BEGIN:STANDARD
TZOFFSETFROM:-0400
TZOFFSETTO:-0500
TZNAME:EST
DTSTART:19701101T020000
RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
END:STANDARD
END:VTIMEZONE
END:VCALENDAR 
```

Outlook 无法识别时区。经过一些实验，我发现在稍微修改文件后，将 America/New_York 更改为东部标准时间，Outlook 可以完美读取时区。

```
BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Ben Fortuna//iCal4j 1.0//EN
CALSCALE:GREGORIAN
METHOD:PUBLISH
BEGIN:VEVENT
DTSTAMP:20120808T211508Z
DTSTART;TZID="Eastern Standard Time":20120808T020000
DTEND;TZID="Eastern Standard Time":20120808T180000
SUMMARY:NewYork Event
LOCATION:Manhattan
DESCRIPTION:This is a test Description
TZID:Eastern Standard Time
END:VEVENT
BEGIN:VTIMEZONE
TZID:Eastern Standard Time
X-LIC-LOCATION:Eastern Standard Time
BEGIN:DAYLIGHT
TZOFFSETFROM:-0500
TZOFFSETTO:-0400
TZNAME:EDT
DTSTART:19700308T020000
RRULE:FREQ=YEARLY;BYMONTH=3;BYDAY=2SU
END:DAYLIGHT
BEGIN:STANDARD
TZOFFSETFROM:-0400
TZOFFSETTO:-0500
TZNAME:EST
DTSTART:19701101T020000
RRULE:FREQ=YEARLY;BYMONTH=11;BYDAY=1SU
END:STANDARD
END:VTIMEZONE
END:VCALENDAR 
```

判断此示例，Outlook 对其时区使用非标准标签。
我目前正在针对 Microsoft Outlook 2010 (14.0.6117.5001) SP1 进行测试。

有人知道 iCal mod 或某种解决方法以使时区与 Microsoft Outlook 完全兼容吗？

或者甚至是另一个允许我创建与 Outlook 兼容的 .ics 文件的 api？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T05:07:28.360

您是否尝试过仅引用现有的 TZID 参数（即不将其更改为“东部标准时间”）？例如：

```
BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Ben Fortuna//iCal4j 1.0//EN
CALSCALE:GREGORIAN
METHOD:PUBLISH
BEGIN:VEVENT
DTSTAMP:20120808T211508Z
DTSTART;TZID="America/New_York":20120808T020000
DTEND;TZID="America/New_York":20120808T180000
... 
```

在 ical4j 中，我们可能会引用标识符（例如，如果启用了 OUTLOOK_COMPATIBILITY 提示），但实际上隐式更改标识符有点困难。

尽管您可能可以在自己的代码中执行此操作，即从注册表中检索时区，获取底层 VTimeZone 对象并替换 TZID 参数（但同样可能需要更改 ical4j 以在输出中引用 TZID）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T00:13:18.450

我终于能够通过“引用” TZID 参数来获得类似的工作，但正如作者所建议的那样，启用 OUTLOOK_COMPATIBILITY 提示不起作用。相反，我必须手动执行此操作：

```
TzId tzid = new TzId("\"America/Vancouver\""); 
```

当然，这感觉更像是一种 hack，而不是真正的解决方案。也许 Fortuna 有一个建议让这个工作？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T07:45:36.237

时区在 icalendar 中不是隐含的，您应该通过在 ics 文件中使用 VTIMEZONE 组件来明确名称；见 rfc5545 § 3.6.5。时区组件（[时区组件）](https://www.rfc-editor.org/rfc/rfc5545#section-3.6.5)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T15:03:23.747

它对我有用..每当我生成一个 ical 时，我将其默认为 UTC。Outlook 在内部将 ical 中的 UTC 时间转换为用户时区。甚至在 Thunderbird 和雅虎日历上也试过。

# c# - C# - 使用 struct 或 enum 在字符串中查找元音

> ID：11873980
> 
> 赞同：0
> 
> 时间：2012-08-08T22:13:36.353
> 
> 标签：c#, struct

我正在学习使用 C# 中的主要类型。为此，我制作了一个简单的算法来查找字符串中的元音。这里是：

```
 public static string Vowels()
        {
            string myString = "Count the number of the vowels in this string";
            string output = string.Empty;
            for (int i = 0; i < myString.Length; i++)
            {
                if (myString[i] == 'a' || myString[i] == 'e' ||
                    myString[i] == 'i' || myString[i] == 'o' ||
                    myString[i] == 'u')
                {
                    output += myString[i].ToString().ToUpper(); //Vowel
                }

            }
            return output;
        } 
```

问题是首先 - 我不喜欢我的`if`语句中有这么多条件，所以我认为使用一些引用类型将是一种更优雅的方式来保存元音，其次，即使有充分的理由选择`if`语句相反`struct`，`enum`或者我也想学习使用它们的任何其他类型。你能帮我找到最好的方法来查找`myString`字符串中的每个字符，`struct`或者`enum`（你认为更好）来保存元音吗？

谢谢

勒龙

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T22:18:15.740

考虑完成编程任务并不是一种真正有用的方法……尤其是这个。在这种情况下，您正在执行更适合 LINQ 的数据处理。例如，您的方法可以实现为：

```
public static string ExtractVowels(string text)
{
    // Note that this won't find upper-case vowels...
    var vowelArray = text.Where(c => "aeiou".Contains(c))
                         .ToArray();
    // Upper-case it if you want, of course.
    return new string(vowelArray);
} 
```

不需要枚举或类似的东西。你应该考虑一个任务涉及的步骤，然后考虑是否需要存储状态，如果需要存储什么样的状态等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T11:50:26.353

“我不喜欢 if 语句中有这么多条件”可以这样解决：

```
 public static string Vowels()
    {
        string myString = "Count the number of the vowels in this string";
        string output = string.Empty;
        for (int i = 0; i < myString.Length; i++)
        {
            switch(myString[i])
            {
               case 'a':
               case 'e':
               case 'i':
               case 'o':
               case 'u':
                  output += myString[i].ToString().ToUpper(); //Vowel
                  break;
            }

        }
        return output;
    } 
```

如果您想完全从函数中提取字母，请尝试：

```
 string Vowels = "aeiou";
 public static string Vowels()
    {
        string myString = "Count the number of the vowels in this string";
        string output = string.Empty;
        for (int i = 0; i < myString.Length; i++)
        {
            if(Vowels.Contains(myString[i]))
            {
                  output += myString[i].ToString().ToUpper(); //Vowel
                  break;
            }

        }
        return output;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-08T22:23:31.507

`struct`s、`enum`s 和`class`es 都是固定大小（非常非常简单）的数据结构。即，每个结构总是包含相同数量的信息，无论其值如何。与 javascript 不同，您不能动态地将成员添加到 C# 结构中。

您正在尝试查找某个集合中的所有字符实例 - 尽管您碰巧知道该集合的大小，但您已经注意到这不是一个非常通用的解决方案。一般来说，集合不是固定大小的：所以没有“只使用结构”的解决方案。您在这里查看了错误的抽象级别。

.NET中的 javascript 对象（您可以在其中添加成员`a` `e` `i` `o` `u`，然后使用该对象检查字母是否作为成员出现）的等价物是`Dictionary<string, object>`. 但是，您知道您的键是单个字母，因此您可以使用`char`而不是`string`，而且您不需要使用这些键保存任何值（您只关心键的存在/不存在），因此您可以使用 `HashSet<char>`.

任何状况之下; 通常，您不能轻松地将诸如某些输入字母之类的动态值映射到诸如类型成员之类的静态概念（至少在没有诸如反射之类的缓慢，不方便，容易出错的技术的情况下并非如此）。尽管枚举值是运行时（动态）变量，但您也不能轻易使用它们，因为（1）如果没有至少像大 if 语句那样复杂的东西，您也不能真正轻松地转换`char`成`enum`很好的变量，以及（2）即使你可以，你通常不能更好地测试枚举是否是某个集合的成员，而你可以检查 char 是否是某个集合的成员。

回顾一下：枚举没有帮助，并且`char`->`enum`不是“微不足道”的转换，并且`struct`s 成员是静态概念，您无法真正将其与动态概念（例如字母的值）进行比较。

另一个小细节：给定输入“另一个小细节”，您的示例方法将产生不正确的输出......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-08T22:41:56.327

也许这就是你要找的：

```
Enum.GetNames(typeof(myenum)).Contains(...); 
```

像这样使用：

```
enum myenum { a, e, i, o, u } 
```

和：

```
for (int i = 0; i < mystring.Length; i++)
    if (Enum.GetNames(typeof(myenum)).Contains(mystring.Substring(i, 1)))
        Text = "True"; 
```

`struct`要在 a （或`class`，就此而言）中查找字段，请使用以下内容：

```
System.Reflection.FieldInfo[] fi = typeof(mystruct).GetFields();
Text = fi[0].Name; 
```

正如其他人所指出的 - 我并不是说这是执行此任务的正确方法。我只是在回答似乎是要点-如何获取这些对象的部分列表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T00:23:47.497

这里有几种不同的方法来完成你的任务。

这个很简单：

```
private static readonly char[] vowel = "aeiouAEIOU".ToArray() ;
public static string ExtractVowels_1( string s )
{
  if ( s == null ) throw new ArgumentNullException("s");

  StringBuilder sb = new StringBuilder( s.Length ) ;

  for ( int i = s.IndexOfAny(vowel) ;  i >= 0 ; i = s.IndexOfAny(vowel , i+1 ) )
  {
    sb.Append(s[i]) ;
  }

  return sb.ToString() ;
} 
```

这更简单：

```
private static readonly Regex rxVowels = new Regex( "[^aeiou]+" , RegexOptions.IgnoreCase ) ;
public static string ExtractVowels_2( string s )
{
  string vowels  = rxVowels.Replace( s , "" ) ;
  return vowels ;
} 
```

如果您愿意，您可以获得所有 Linqy，“流利”：

```
 private static readonly SortedSet<char> setOfVowels = new SortedSet<char>( "aeiouAEIOU" ) ;
    private static string ExtractVowels_3( string s )
    {
        if ( s == null ) throw new ArgumentNullException("s");

        string vowels = new string( s.Where( c => setOfVowels.Contains(c) ).ToArray() ) ;
        return vowels ;

    } 
```

正如 Perl Monks 所说，“Tim Toady”或 TMTOWTDI：有不止一种方法可以做到这一点。

[http://en.wikipedia.org/wiki/There's_more_than_one_way_to_do_it](http://en.wikipedia.org/wiki/There%27s_more_than_one_way_to_do_it)

# javascript - Rails 3.1.1 中的 jquery 总是给出 DOMException

> ID：11873985
> 
> 赞同：2
> 
> 时间：2012-08-08T22:13:49.313
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3, debugging

我创建了一个新应用

```
rails new toy
cd toy
bundle install
rails generate controller start
rm public/index.html 
```

`app/views/start/index.html.erb`包含：

```
Hi 
```

`app/controllers/start_controller.rb`包含：

```
class StartController < ApplicationController
  def index
  end
end 
```

`config/routes.rb`是：

```
Toy::Application.routes.draw do
  root :to => 'start#index'
end 
```

如果我运行它并单击页面上的任意位置，我会在调试器中收到错误：

![在此处输入图像描述](../Images/39a2c2ee430199e6087b0a491a497631.png)

这发生在我运行的每个应用程序上。

这是默认的 Gemfile：

```
source 'https://rubygems.org'

gem 'rails', '3.2.3'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'sqlite3'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platform => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'ruby-debug19', :require => 'ruby-debug' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T17:40:09.697

我能够复制这个。[在此提交](https://github.com/rails/jquery-ujs/commit/33ce990ebb45f00813d2bee9658ac244ba1bc879)中修复了它。

# php - 为密码验证创建 preg_match 允许 (!@#$%)

> ID：11873990
> 
> 赞同：12
> 
> 时间：2012-08-08T22:14:16.433
> 
> 标签：php, regex, passwords, preg-match

我想创建一个`preg_match`函数来验证我的密码，但我不确定如何编写它以允许使用以下特殊字符：`!@#$%`.

```
if(!preg_match(?????)$/', $password)) 
```

这是我想在正则表达式中使用的密码规则：

*   可能包含字母和数字
*   必须包含至少 1 个数字和 1 个字母
*   可能包含以下任何字符：`!@#$%`
*   必须是 8-12 个字符

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-08-08T22:48:39.837

我认为这应该是这样的：

```
if(!preg_match('/^(?=.*\d)(?=.*[A-Za-z])[0-9A-Za-z!@#$%]{8,12}$/', $password)) {
    echo 'the password does not meet the requirements!';
} 
```

在字符串的开始 ->`^`
和结束 ->`$`
之间必须至少有一个数字 ->`(?=.*\d)`
和至少一个字母 ->`(?=.*[A-Za-z])`
并且必须是数字、字母或以下之一：!@#$% - >`[0-9A-Za-z!@#$%]`
并且必须有 8-12 个字符 ->`{8,12}`

正如 user557846 对您的问题所评论的那样，我还建议您允许更多字符，我通常（如果我使用最大值）至少需要 50 :)

顺便说一句，你可能想看看[这个正则表达式教程](http://www.regular-expressions.info/tutorial.html)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-11-13T09:06:25.070

```
preg_match('/^(?=.*\d)(?=.*[@#\-_$%^&+=§!\?])(?=.*[a-z])(?=.*[A-Z])[0-9A-Za-z@#\-_$%^&+=§!\?]{8,20}$/',$password) 
```

*   至少一个小写字符
*   至少一个大写字符
*   至少一位数
*   至少有一个@#-_$%^&+=§! 的特殊符号？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-02-20T14:49:28.270

我喜欢 r3bel 的回答，所以我玩了一下，最后得到了以下密码检查功能：

```
function password_strength_check($password, $min_len = 8, $max_len = 70, $req_digit = 1, $req_lower = 1, $req_upper = 1, $req_symbol = 1) {
    // Build regex string depending on requirements for the password
    $regex = '/^';
    if ($req_digit == 1) { $regex .= '(?=.*\d)'; }              // Match at least 1 digit
    if ($req_lower == 1) { $regex .= '(?=.*[a-z])'; }           // Match at least 1 lowercase letter
    if ($req_upper == 1) { $regex .= '(?=.*[A-Z])'; }           // Match at least 1 uppercase letter
    if ($req_symbol == 1) { $regex .= '(?=.*[^a-zA-Z\d])'; }    // Match at least 1 character that is none of the above
    $regex .= '.{' . $min_len . ',' . $max_len . '}$/';

    if(preg_match($regex, $password)) {
        return TRUE;
    } else {
        return FALSE;
    }
} 
```

最大/最小长度是默认的或可调整的，每个要求都是默认打开的，但可以关闭，我想支持任何符号，所以最后一个要求是“任何不是上述类型之一的东西”，而不是固定的符号集。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-11-03T14:58:51.873

我已经开发了一个完整的正则表达式来进行更复杂的检查

```
/^(?=.*\d)(?=.*[A-Za-z])(?=.*[A-Z])(?=.*[a-z])(?=.*[ !#$%&'\(\) * +,-.\/[\\] ^ _`{|}~\"])[0-9A-Za-z !#$%&'\(\) * +,-.\/[\\] ^ _`{|}~\"]{8,50}$/ 
```

基本上我检查密码是否有 1 个数字、1 个大写字母、1 个小写字母和 1 个特殊字符。我希望这对寻找正则表达式的人有所帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-01-11T07:16:39.687

```
if (!preg_match('/^(?=.*\d)(?=.*[A-Za-z])(?=.*[!@#$%])[0-9A-Za-z!@#$%]
{6,15}$/',($_POST['password']))) {
    $message='Password must contain 6 characters of letters, numbers and 
    at least one special character.';
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-15T09:23:39.917

我在这里使用我的drupal 自定义表单完成了此操作`hook_form_validate`，密码应该是6 个字母、数字和至少一个特殊字符的字符。

```
<?
if (!preg_match('/^(?=.*\d)(?=.*[A-Za-z])(?=.*[!@#$%])[0-9A-Za-z!@#$%]{6,15}$/', $form_state['values']['pass'])) {
    form_set_error('pass', t('Password must contain 6 characters of letters, numbers and at least one special character.'));
}
?> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-16T15:33:26.433

## 不一样的方式

让我们看看不同的，我相信用户可以使用密码中所有的[ASCII](http://www.asciitable.com/)有效字符`(32 < ascii_code < 127)`，并创建了一个函数来检查 ASCII 表中的所有字符！

```
function check($pass, $i = 0){
     if(strlen($pass) > $i)
         return (0rd(pass[$i]) > 32 and 0rd(pass[$i]) < 127) and check($pass, $i + 1);
} 
```

## 用法

```
if(!check($_POST["password"])){
    echo "password is wrong";
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-08-08T22:16:57.007

查找字符类，这是正则表达式的一个基本特征。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2014-03-17T05:55:56.893

```
if(!preg_match('/^(?=.*\d)(?=.*[A-Za-z])[0-9A-Za-z!@#$%]{8,12}$/', $password)) {
    echo 'the password does not meet the requirements!';
    } 
```

在上面的陈述中..因此存在什么可能的密码？

# java - Jibx Maven 插件：在不同目录中拆分模式、绑定和生成的 Java 源文件

> ID：11873996
> 
> 赞同：0
> 
> 时间：2012-08-08T22:14:27.947
> 
> 标签：java, maven, jibx

我使用带有 Jibx 的 Spring Object-Xml 映射将一些 xsd 文件转换为 Java 源文件。Jibx 在构建过程中由 jibx-maven-plugin 调用。我的模式文件 (.xsd) 在目录 resources/oxm/schemas 中，我的 Java-XSD 绑定文件 (.xml) 在目录 resources/oxm/bindings 中，我想将输出的 Java 源文件保存到目录 src。

我在 pom.xml 中的插件配置是：

```
<plugin>
    <groupId>org.jibx</groupId>
    <artifactId>jibx-maven-plugin</artifactId>
    <version>1.2.3</version>
    <configuration>
        <schemaLocation>${basedir}/resources/oxm/schemas</schemaLocation>
        <baseBindingDirectory>${basedir}/resources/oxm/bindings</baseBindingDirectory>
        <schemaBindingDirectory>${basedir}/src</schemaBindingDirectory>
        <defaultPackage>com.ibm.tp4.schema</defaultPackage>
        <customizations>
            <customization>${basedir}/resources/oxm/customizations.xml</customization>
        </customizations>
        <verbose>true</verbose>
    </configuration>
</plugin> 
```

源代码按预期在 src 目录中生成。问题是 resources/oxm/bindings/ 目录中的绑定也被复制到 src 目录。为什么插件会复制我的 xsd-Java 源绑定？有人可能需要输出 jar/war/whatever 中的绑定来在运行时创建 xsd/source 文件吗？如何在我的 src 文件夹中禁用这一代 xml？如果不能，如何在 jibx-maven 插件的 Maven 构建中添加一个步骤（现在运行 jibx:schema-codegen 阶段以生成 Java 源文件）以在生成这些文件后删除它们？

提前致谢。

# mobile - 在移动 Web 应用程序中包含条码扫描器而不使用原生？

> ID：11873997
> 
> 赞同：6
> 
> 时间：2012-08-08T22:14:36.350
> 
> 标签：mobile, cordova, sencha-touch, barcode, barcode-scanner

是否有可能在移动网络应用程序中包含条码扫描仪而无需原生？

作为一名前 Android 开发人员，我知道如何[将 ZXing](http://android-developers.blogspot.com/2012/02/share-with-intents.html)等集成到我的本机代码中，而且我还知道那里有[适用于 Phonegap 的条码扫描器插件](https://stackoverflow.com/questions/8311380/phonegap-barcode-scanner)。它们都有一个共同点：每个移动平台都需要一个开发环境，并且必须亲自动手进行原生开发。此外，您不能使用[PohneGap Build](https://build.phonegap.com/)。

我正在寻找一种独立的 HTML5 移动应用程序方法。更具体地说，我试图找到一种方法将条码扫描从本地平台外包出去。一个例子：我可以使用 HTML5 应用程序访问相机，那么是否有任何网络服务可以接收条形码图片并返回代码？

谁能告诉我这样的事情是否存在或正在进行中？

任何有用的信息表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T18:46:37.613

使用运行在 4.1 (Jelly Bean) 上的 Galaxy S3，我已经能够使用 HTML5 从我的网络应用程序直接访问相机。

[从 Web 应用程序访问 HTML 5 本机摄像头](https://stackoverflow.com/questions/7676036/can-you-launch-the-native-camera-app-from-an-html-5-web-app)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T20:36:20.660

条形码需要相机访问权限。HTML5 的 WebCam API 仍然很新，它在桌面浏览器上的支持并不广泛，在移动浏览器上的支持也更少。你不能依赖它是否可用。

看到您的问题后，我在我的 HTC OneX 中测试了相机示例应用程序。而且，它仅适用于 Opera 移动浏览器。我了解到 Opera 是唯一支持 HTML5 摄像头扩展的移动浏览器。

您也可以测试访问。

[http://people.opera.com/danield/html5/explode/](http://people.opera.com/danield/html5/explode/)

如果你真的打算让它成为原生的，我推荐使用像 PhoneGap 这样的接口框架。