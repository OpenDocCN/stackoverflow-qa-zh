# StackOverflow 问答 10164000-10164999

# django - 你如何定位 django 模板错误？

> ID：10164001
> 
> 赞同：3
> 
> 时间：2012-04-15T16:48:26.667
> 
> 标签：django, django-templates

我有一个不解析的模板 - 而是 django 提出：

```
TemplateSyntaxError: Could not parse the remainder: '"{%' from '"{%' 
```

不幸的是，Django 没有透露错误在哪里。有没有工具可以揭示 Django 模板中语法错误的位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T21:08:57.103

django-extensions 命令中的交互式调试器[`runserver_plus`](https://django-extensions.readthedocs.io/en/latest/runserver_plus.html)将使内省模板节点内容和模板源以及查看上下文变量变得更加容易。

除此之外，请确保 templatetag 是可导入的并且不会引发错误。

不幸的是，我没有比这更简单的方法了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T03:53:03.250

好问题，您可以再次检查错误回溯：

*   突出显示的模板行是损坏代码所在节点的开始。我称节点*为父节点*
*   tracestack 中的最后两项是查找错误的关键。检查其*本地变量中的变量*
    *   'nodelist' -- 错误前的节点列表，在父节点内。
    *   'compiled_result' -- 如果有，是错误前的最后一个完整节点（不包括 TextNode）

例如，看起来像的模板

```
{% block foo %}{{ "{% }} 
```

引发错误跟踪堆栈，最后但两个项目内的“节点列表”可能是

```
nodelist      [] 
```

这意味着错误在块 foo 的第一个子节点附近。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T21:07:02.987

不要认为它会告诉你确切的位置，但 Django 调试工具栏应该在一定程度上有所帮助。

[https://github.com/django-debug-toolbar/django-debug-toolbar](https://github.com/django-debug-toolbar/django-debug-toolbar)

游览[http://vimeo.com/6640136](http://vimeo.com/6640136)

# ios - 当应用程序进入前台时，将 iOS 应用程序与 ALAssetsLibrary 同步的最佳方式

> ID：10164007
> 
> 赞同：6
> 
> 时间：2012-04-15T16:49:08.820
> 
> 标签：ios, ios5, alassetslibrary

我的应用程序保留了 ALAssets 的缓存。用户可以将应用程序置于后台，然后使用照片应用程序或其他方式删除一些照片或视频。当我的应用程序在后台时，我没有从 ALAssetsLibrary 收到有关数据已更改的通知。当应用程序再次变为活动状态时，是否有最佳方法将我的应用程序状态与 ALAssetsLibrary 状态同步？

Upate：看起来我可以使用这种方法来迭代整个库，但这似乎是一种获取更改增量的低效方法。

[如何使用 URL 检查 ALAsset 是否仍然存在](https://stackoverflow.com/questions/7221167/how-to-check-if-an-alasset-still-exists-using-a-url)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-18T20:37:44.880

您应该注册 ALAssetsLibraryChangedNotification 并仅在收到通知时重新枚举库，即库实际上已更改。当您的应用再次处于前台时，您将收到此通知。请注意，iOS 5.X 中有一个关于 ALAssetsLibraryChangedNotification 的错误： [http ://www.openradar.me/10484334](http://www.openradar.me/10484334)

干杯，

亨德里克

# java - Lucene - 如何访问文档在搜索中很受欢迎？

> ID：10164008
> 
> 赞同：0
> 
> 时间：2012-04-15T16:49:10.957
> 
> 标签：java, search, lucene

我基本上是在做一个搜索引擎。我搜索了一个查询并且我使用了 QueryParser，现在我在 TopDocs 对象中没有命中查询。现在，我如何访问我在搜索中获得的命中文档。我想显示那些很受欢迎的文件。我该怎么做！任何形式的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T17:05:22.710

```
for (ScoreDoc sd : topDocs.scoreDocs) {
  if (sd.doc == Integer.MAX_VALUE) break;
  final Document d = searcher.doc(sd.doc);
  final Fieldable f = d.getFieldable(name);
  ...
} 
```

希望这有助于作为一个开始。当然，如果您没有在索引时*存储该字段，这将不起作用。*

# login - 好像没有发帖

> ID：10164010
> 
> 赞同：1
> 
> 时间：2012-04-15T16:49:17.820
> 
> 标签：login, python-3.2

我正在尝试为一个名为 Yakedi 的网站编写登录脚本，它是一项免费短信服务。尽管我尝试了很多，但通常我不会向别人寻求帮助，因为我喜欢自己解决问题，但我被困住了。我正在用 Python 3.2.2 编写。所以请任何人都可以看到我要去哪里错了吗？

```
import urllib
import sys
import http.cookiejar

cookieJar = http.cookiejar.LWPCookieJar()
opener = urllib.request.build_opener(urllib.request.HTTPCookieProcessor(cookieJar))

opener.addheaders = [('User-agent', "Mozilla/5.0")]

username = "insert email here"
password = "insert password here"

url = "http://yakedi.com/login/do"

form = { "email" : username,
         "pass" : password,
         "submit": "login"}

encodedForm = urllib.parse.urlencode(form).encode("UTF-8")
request = urllib.request.Request(url, encodedForm)
page = opener.open(request)
contents = page.read()

print(contents) 
```

谢谢你作为回报

# java - Mobclix 横幅 NullPointerException？

> ID：10164013
> 
> 赞同：1
> 
> 时间：2012-04-15T16:49:40.687
> 
> 标签：java, android, nullpointerexception, ads, mobclix

我将 Andengine 与 Mobclix 一起用于我的第一个游戏，每当我尝试运行该应用程序时，我都会在 LogCat 中收到一个巨大的错误。我已经到处搜索了，我似乎找不到答案。

```
FATAL EXCEPTION: main
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.amzoft.starraider/com.amzoft.starraider.MainScreenMain}: android.view.InflateException: Binary XML file line #8: Error inflating class com.mobclix.android.sdk.MobclixMMABannerXLAdView
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1659)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1675)
    at android.app.ActivityThread.access$1500(ActivityThread.java:121)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:943)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:130)
    at android.app.ActivityThread.main(ActivityThread.java:3701)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624)
    at dalvik.system.NativeStart.main(Native Method)
Caused by: android.view.InflateException: Binary XML file line #8: Error inflating class com.mobclix.android.sdk.MobclixMMABannerXLAdView
    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:581)
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:227)
    at android.app.Activity.setContentView(Activity.java:1657)
    at org.anddev.andengine.ui.activity.LayoutGameActivity.onSetContentView(LayoutGameActivity.java:38)
    at org.anddev.andengine.ui.activity.BaseGameActivity.onCreate(BaseGameActivity.java:67)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1623)
    ... 11 more
Caused by: java.lang.ClassNotFoundException: com.mobclix.android.sdk.MobclixMMABannerXLAdView in loader dalvik.system.PathClassLoader[/mnt/asec/com.amzoft.starraider-2/pkg.apk]
    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
    at android.view.LayoutInflater.createView(LayoutInflater.java:471)
    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:570)
    ... 21 more 
```

这是我的布局 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" 
    android:id="@+id/layoutg">

    <com.mobclix.android.sdk.MobclixMMABannerXLAdView
        android:id="@+id/banner_adview"
        android:layout_width="320dip"
        android:layout_height="50dip"
        android:layout_gravity="center" />

    <org.anddev.andengine.opengl.view.RenderSurfaceView android:id="@+id/gameview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="center" />

</FrameLayout> 
```

还有我的 Ad.class

```
package com.amzoft.starraider.ads;

import android.app.Activity;
import android.util.Log;
import android.view.View;

import com.amzoft.starraider.R;
import com.mobclix.android.sdk.MobclixAdView;
import com.mobclix.android.sdk.MobclixAdViewListener;
import com.mobclix.android.sdk.MobclixMMABannerXLAdView;

public class Ad implements MobclixAdViewListener{

    public static final String TAG = "StarRaider AD Manager";
    public MobclixMMABannerXLAdView adview;

    public Ad(Activity activity)
    {
        adview = (MobclixMMABannerXLAdView)activity.findViewById(R.id.banner_adview);
        adview.addMobclixAdViewListener(this);
        adview.getAd();
        adview.setRefreshTime(30);
    }

    @Override
    public String keywords() 
    {
        return null;
    }

    @Override
    public void onSuccessfulLoad(MobclixAdView view) 
    {
        Log.v(TAG, "The ad request was successful!");
        view.setVisibility(View.VISIBLE);
    }

    @Override
    public void onFailedLoad(MobclixAdView view, int errorCode) 
    {
        Log.v(TAG, "The ad request failed with error code: " + errorCode);
        view.setVisibility(View.GONE);
    }

    @Override
    public void onAdClick(MobclixAdView adView) {
        Log.v(TAG, "Ad clicked!");
    }

    @Override
    public void onCustomAdTouchThrough(MobclixAdView adView, String string) 
    {
        Log.v(TAG, "The custom ad responded with '" + string + "' when touched!");
    }

    @Override
    public boolean onOpenAllocationLoad(MobclixAdView adView, int openAllocationCode) 
    {
        Log.v(TAG, "The ad request returned open allocation code: " + openAllocationCode);
        return false;
    }

    @Override
    public String query() 
    {
        return null;
    }

} 
```

但是当我进入 Eclipse 可视化编辑器时，它说 java.lang.NullPointerException 异常详细信息记录在 Window > Show View > Error Log 中。因此，当我打开错误日志时，我收到有关 andengine 的 RenderSurfaceView 的错误：

```
java.lang.NullPointerException
    at org.anddev.andengine.opengl.view.RenderSurfaceView$Renderer.access$0(RenderSurfaceView.java:93)
    at org.anddev.andengine.opengl.view.RenderSurfaceView.onMeasure(RenderSurfaceView.java:54)
    at android.view.View.measure(View.java:12723)
    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
    at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
    at android.view.View.measure(View.java:12723)
    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
    at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
    at android.view.View.measure(View.java:12723)
    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1369)
    at android.widget.LinearLayout.measureVertical(LinearLayout.java:660)
    at android.widget.LinearLayout.onMeasure(LinearLayout.java:553)
    at android.view.View.measure(View.java:12723)
    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1369)
    at android.widget.LinearLayout.measureVertical(LinearLayout.java:660)
    at android.widget.LinearLayout.onMeasure(LinearLayout.java:553)
    at android.view.View.measure(View.java:12723)
    at com.android.layoutlib.bridge.impl.RenderSessionImpl.measureView(RenderSessionImpl.java:542)
    at com.android.layoutlib.bridge.impl.RenderSessionImpl.render(RenderSessionImpl.java:444)
    at com.android.layoutlib.bridge.Bridge.createSession(Bridge.java:324)
    at com.android.ide.common.rendering.LayoutLibrary.createSession(LayoutLibrary.java:325)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.RenderService.createRenderSession(RenderService.java:372)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.renderWithBridge(GraphicalEditorPart.java:1361)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.recomputeLayout(GraphicalEditorPart.java:1115)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.activated(GraphicalEditorPart.java:941)
    at com.android.ide.eclipse.adt.internal.editors.layout.LayoutEditorDelegate.delegatePageChange(LayoutEditorDelegate.java:450)
    at com.android.ide.eclipse.adt.internal.editors.common.CommonXmlEditor.pageChange(CommonXmlEditor.java:358)
    at org.eclipse.ui.part.MultiPageEditorPart$2.widgetSelected(MultiPageEditorPart.java:290)
    at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:240)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Display.sendEvent(Display.java:4128)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1457)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1480)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1465)
    at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:1270)
    at org.eclipse.swt.custom.CTabFolder.setSelection(CTabFolder.java:2746)
    at org.eclipse.swt.custom.CTabFolder.onMouse(CTabFolder.java:1433)
    at org.eclipse.swt.custom.CTabFolder$1.handleEvent(CTabFolder.java:257)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Display.sendEvent(Display.java:4128)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1457)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1480)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1465)
    at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:1270)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3974)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3613)
    at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2701)
    at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2665)
    at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2499)
    at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:668)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:123)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1410) 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T10:14:56.233

由于这需要一个答案...我更新了 Android Eclipse 插件、android 工具和 eclipse。

# hibernate - JIT 和休眠

> ID：10164014
> 
> 赞同：0
> 
> 时间：2012-04-15T16:49:45.303
> 
> 标签：hibernate, jit

确保 JIT 不会消除某段代码的最佳方法是什么？我知道它可以通过将我得到的 ID 传递给一个`out`流来完成。我只是想知道是否有更优雅的方法来做到这一点？

```
public User getUser(Long id) throws EntityException {
    User user = super.get(id);
    for (UserAnswer userAnswer : user.getUserAnswers()) {
        userAnswer.getPossibleAnswer().getId(); //I DO NOT WANT THIS LINE TO BE REMOVED
    }
    return user;
} 
```

谢谢

**附加信息：** Hibernate.initialize 解决了这个问题。所以下面的代码可以正常工作。至少它没有像上面的代码那样快速复制。

```
public User getForAlgorithm(Long id) throws EntityException {
    User user = super.get(id);
    for (UserAnswer userAnswer : user.getUserAnswers()) {
        Hibernate.initialize(userAnswer.getPossibleAnswer());
    }
    return user;
} 
```

# javascript - 点击 专注

> ID：10164015
> 
> 赞同：31
> 
> 时间：2012-04-15T16:49:52.907
> 
> 标签：javascript, jquery, html, input, onclick

我有一系列`input`元素，每个元素都有几个`<div>`单独的标签。
我喜欢如果我可以`click`在任何一个上`<div>`，它会`focus`在一个上`input`。
这是可能的吗？如果可以，任何人都可以就脚本提出想法吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-04-15T17:01:42.147

`JS`当`HTML`. _

```
<label for="YOURID">The clickable region<label>
<input id="YOURID" type="text" /> 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-04-15T16:54:04.823

用 jquery 试试这个：

```
$('#yourdiv').click(function() {
     $('#yourfield').focus();
}); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-04-15T16:53:54.673

试试这个 ：

```
<input id="myInput" />
<div onclick="document.getElementById('myInput').focus(); return false;"></div> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-15T16:54:22.130

```
$('div').click(function() {
    $(this).find('input[type="text"]').focus();
});​ 
```

[**现场演示**](http://jsfiddle.net/JTnDu/1)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-15T16:52:12.750

1.  使用 javascript（在输入元素上调用 .focus() ）
2.  *使用包裹在您的 div 周围（仅当 div是*标签时才有意义）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-01T20:01:56.763

1.  使用 HTML (" **for** ") ：

    HTML 提供了这个功能。使用“ **for** ”“ **id** ”可以轻松实现。

> ```
>  <label for="idname">Click Here to Reach Input<label>
>  <input id="idname" type="text"> 
> ```

2.  使用 jQuery（“**焦点**”）

> $(".classname").click(function(){
> 
> > $（“输入”）。**焦点**（）；})

# php - 在while循环期间创建一个新的div

> ID：10164020
> 
> 赞同：-1
> 
> 时间：2012-04-15T16:50:12.863
> 
> 标签：php, mysql, css

我编写了代码以从数据库中选择图像并按月份分组显示它们。我希望每个“照片月”都放在自己的“容器”div中。我无法弄清楚如何在 WHILE LOOP 中执行此操作。我想我需要一种方法来判断将要迭代的下一行数据是否是新月份。有什么建议么？

我的代码：

```
<?php

if (isset($_COOKIE['user_id']))
{
if (!isset($_GET['user_id']))
{
$user_id= $_COOKIE['user_id'];
}
else
{
$user_id= $_GET['user_id'];
}

$connect= mysqli_connect("localhost", "root", "", "si");
$query= "SELECT * FROM posts WHERE user_id= $user_id ORDER BY date DESC";

$result= mysqli_query($connect, $query)
or die('error with query');
$date = "0";

while ($row= mysqli_fetch_array($result)) {

if ($date != $row['date']) {
 echo "<p> ".$row['date']."</p><br/>";
 $date = $row['date'];
}

echo '<img src="'.$row['picture']. '"/>' . "<br/>";
}
}
?> 
```

这是它的外观...

![在此处输入图像描述](../Images/f2fbd07c0ebe2f41a0ad14d1abbbb551.png)

例如，2012 年 2 月的月份应该与 2012 年 1 月位于不同的容器 div 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T17:03:01.277

在您创建月份标题的同一位置实现这一点非常容易。

```
$first = true;
if ($date != $row['date']) {
    if ($first) {
        $first = false;
    } else {
        echo "<\div>";
    }
    echo "<div><p> ".$row['date']."</p><br/>";
    $date = $row['date'];
} 
```

然后你必须通过调用关闭while循环后的最后一个div：

```
echo "</div>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T17:00:41.793

我会尝试这样的事情来检查是否打开了新容器：

```
<?php

if (isset($_COOKIE['user_id']))
{
if (!isset($_GET['user_id']))
{
$user_id= $_COOKIE['user_id'];
}
else
{
$user_id= $_GET['user_id'];
}

$connect= mysqli_connect("localhost", "root", "", "si");
$query= "SELECT * FROM posts WHERE user_id= $user_id ORDER BY date DESC";

$result= mysqli_query($connect, $query)
or die('error with query');
$date = "0";

$firstmonth = true; //used to tell if a div has been opened yet or not

while ($row= mysqli_fetch_array($result)) {

if ($date != $row['date']) {
 if(!$firstmonth){ //close existing row first if needed
    echo "</div>";
    $firstmonth = false;
 }
 echo "<div class="month-container"><p> ".$row['date']."</p><br/>";
 $date = $row['date'];
}

echo '<img src="'.$row['picture']. '"/>' . "<br/>";
}
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T17:01:59.323

```
<?php

if (isset($_COOKIE['user_id']))
{
if (!isset($_GET['user_id']))
{
$user_id= $_COOKIE['user_id'];
}
else
{
$user_id= $_GET['user_id'];
}

$connect= mysqli_connect("localhost", "root", "", "si");
$query= "SELECT * FROM posts WHERE user_id= $user_id ORDER BY date DESC";

$result= mysqli_query($connect, $query)
or die('error with query');

$date = "0";
$it= 0;

while ($row= mysqli_fetch_array($result)) {

if ($date != $row['date']) {
if ($it < 1) {
echo "<div class='container'><p> ".$row['date']."</p><br/>";
 $date = $row['date'];
 $it ++;
    }
else {
 echo "</div><div class='container'><p> ".$row['date']."</p><br/>";
 $date = $row['date'];
 $it ++;
 } 
```

}

```
echo '<img src="'.$row['picture']. '"/>' . "<br/>";
}
} 
```

?>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T17:09:08.610

尝试这样的事情：

```
<?php
for($i =1; $i <= 12; $i++)
{
 $result = mysql_fetch_array(mysql_query("SELECT * FROM `posts` WHERE `user_id` = '" . $user_id . "' AND `month` = '" . $i . "'"));
 if(count($result))
    {
      // create the container and the images for the current month here
    }
}
?> 
```

# javascript - Ajax 请求在 Rails 应用程序中给出错误

> ID：10164022
> 
> 赞同：-1
> 
> 时间：2012-04-15T16:50:14.503
> 
> 标签：javascript, jquery, ruby-on-rails, ajax, ruby-on-rails-3

在我的 Rails 应用程序中，我将 ajax 请求设为 $.ajaxSetup({ url: '/get_paypal_button' });

```
 var dataToSend = { fundraiser_id: <%= @fundraiser.id %>,  
        amount:  $("#amount").val(),
        currency: $('#donor_donation_currency').val(),
        comment: $('#donor_donation_comment').val(),
        anonymous: $("#donor_donation_anonymous").is(":checked"),
        donor_email: $('#email').val(),
        donor_name: $('#name').val(),
        donor_city: $('#city').val(),
        donor_country: $('#country').val() };

      $.ajax({
        type: "POST",
        dataType:'JSON',
        async: true,
        data:dataToSend,
        success: function(json){
          $('#id_amount').val(json.amount);
          $('#custom_content').val(json.custom);
        },
        error:function (xhr, ajaxOptions, thrownError){
          console.dir(xhr);
          console.dir(thrownError);
        }
      }); 
```

在控制器中，我将数据处理为

```
def get_paypal_button
  @fundraiser = Fundraiser.where(:id => params[:fundraiser_id]).last
  if params[:currency] == 'INR'
         amount_in_sgd = params[:amount].to_f/@fundraiser.sgd_to_inr.to_f
  elsif params[:currency] == 'USD'
         amount_in_sgd = params[:amount].to_f*@fundraiser.usd_to_sgd.to_f
  else
         amount_in_sgd = params[:amount].to_f
  end

  puts '----------finding donor-------------'
  @donor = Donor.find_or_initialize_by_email(params[:donor_email])
  @donor.update_attributes(:name => params[:donor_name], :city => params[:donor_city], :country => params[:donor_country])
  custom = @donor.id.to_s + "::" + params[:anonymous].to_s + "::" + params[:comment].to_s

  @hash = {:amount => amount_in_sgd, :custom => custom}.to_json
  respond_with(@hash) do |format|
    format.json { render :json =>  @hash }
  end 
```

结尾

当我使用调试器并获取它给出的@hash 的值时（这是正确的）

```
"{\"amount\":15.0,\"custom\":\"2::false::\"}" 
```

但是ajax请求正在执行我编写的代码以防出错并且它得到空响应。

我已经尝试了一切并且完全一无所知，因为几天前类似的代码正在运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T18:26:07.790

可能`format`未按预期设置：

检查`Accepts header`来自浏览器的作为 Ajax 调用的一部分。您可以在 Firebug 的网络选项卡中看到它。

或者转储`format`到日志并检查它。

# php - 基于IP的内容基于国家

> ID：10164023
> 
> 赞同：-2
> 
> 时间：2012-04-15T16:50:23.173
> 
> 标签：php

> **可能重复：**
> [IP 到国家？](https://stackoverflow.com/questions/1033/ip-to-country)
> [PHP中的IP到国家](https://stackoverflow.com/questions/4295970/ip-to-country-in-php)

我有一个网站，当他们访问时我在其中存储*用户的 IP 地址。*我想为他们提供基于 IP 的首页内容。我想我可以将 IP 范围存储在数据库中，当用户来自这些范围时，我可以为他们提供特定的内容。

但问题是在输入网站地址后，网站将加载并显示默认内容。请告诉我怎样才能做到这一点？这样我就可以向我的用户提供基于国家/地区的内容。

假设IP地址是；

```
IP Address: 109.97.86.2 
```

它应该检测到它是*罗马尼亚*，并且应该显示为*罗马尼亚*设计的页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T16:52:55.977

使用各种 geoip 数据库之一；我认为[MaxMind](http://www.maxmind.com/app/country)的那一款是最受欢迎的一款。

然后，当新用户访问您的站点并显示他所在国家/地区的内容时，只需执行 ip=>country 查找。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T16:55:24.583

IP 到国家/地区的数据库通常已经过时 - 更好的方法可能是将您的客户来自的各个国家/地区的标志放在网站顶部，让人们自行选择。这样，如果英国的妈妈和她在日本的儿子交谈，如果他们愿意，他们都可以看到同一个网站。

# delphi - 如何使用存储在 TList 中的对象的方法？

> ID：10164033
> 
> 赞同：6
> 
> 时间：2012-04-15T16:51:11.033
> 
> 标签：delphi, pascal, lazarus

我的问题很简单。我有一个`queue`包含类对象的 TList （称为 ），`CNotif`并希望`is_alive`在这些对象上使用该方法。

问题是，当我使用 时`queue.Items[0].is_alive()`，我收到一条错误消息说`Error: Illegal qualifier`.

我也对在这个 TList 中实例化对象的方式感到困惑（以及编译器如何“知道”存储的对象属于这种类型......）

我现在要做的是：`queue.Add(CNotif.create(timer, title, text, badge))`但我认为不应该那样做。

先感谢您 ！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-15T17:05:12.963

> 问题是，当我使用 queue.Items[0].is_alive() 时，我收到一条错误消息，提示错误：非法限定符。

那是因为编译器不知道`queue.items[0]`除了通用指针之外还有什么（见下文）。

> 我现在要做的是： queue.Add(CNotif.create(timer, title, text, badge)) 但我认为不应该这样做。

这正是您需要这样做的方式。`CNotif.Create`构造一个新对象，该对象从`TObject`. 它编译得很好，因为您的`queue.Add`调用需要一个指针，而包含对象实例的 Delphi/FreePascal 变量实际上是一个指针。（两种语言都为我们隐藏了取消引用使用的需要`MyObj^`。）

要在 中使用某些东西`queue.Items`，您需要告诉编译器除了泛型之外还有什么`pointer`（当然没有`is_alive`方法）。你可以通过类型转换来做到这一点：

```
CNotif(queue.Items[0]).is_alive 
```

注意：有一个更短的方法来使用`TList.Items`; `Items`被声明为 的默认属性`TList`，因此您可以省略它：

```
queue[0] 
```

是相同的

```
queue.Items[0] 
```

并且更容易打字。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-15T23:55:51.027

除非您坚持使用旧的 Delphi 版本，否则您应该研究泛型。

在 generics.collection 单元中有一个`TList<T>`可以在这里使用的类。

```
Queue:TList<CNotify>;

...
Begin
  Queue := TList<CNotify>.Create; // remember to clean it up
  Queue.Add(CNotify.Create(...));
  Queue.Add(CNotify.Create(...));

  If Queue[0].isAlive then
    Beep;
End; 
```

我已经有一段时间没有使用 fpc 和 lazarus 了，但是在 Delphi 中这绝对是这样做的方法。到处都是无类型指针和类型转换的列表可能成为维护的噩梦。

# php - Cassandra 不使用 php

> ID：10164034
> 
> 赞同：1
> 
> 时间：2012-04-15T16:51:12.057
> 
> 标签：php, nosql, cassandra

我正在使用 cassandra 和 php。cassandra 服务器和客户端。两者都已启动。它抛出以下错误：

```
Fatal error: Call to a member function write() on a non-object in C:\cassandra\thrift\Thrift.php on line 715

Call Stack
#   Time    Memory  Function    Location
1   0.0010  395808  {main}( )   ..\cassandra_testFile.php:0
2   0.0409  3143872 CassandraClient->insert( )  ..\cassandra_testFile.php:46
3   0.0409  3143872 CassandraClient->send_insert( ) ..\Cassandra.php:606
4   0.0412  3146072 cassandra_Cassandra_insert_args->write( )   ..\Cassandra.php:625
5   0.0412  3146136 TBase->_write( )    ..\Cassandra.php:2761 
```

在调用堆栈中，在步骤 2。行号。46 是：

```
$client->insert($keyspace, $keyUserId, $columnPath, $value, $timestamp, $consistency_level); 
```

如何解决此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T21:31:08.637

很多很多人在 Thrift 面前使用客户端。对于 PHP，最常见的是[PHPCassa](https://github.com/thobbs/phpcassa)

*   [哪个 PHP 客户端库与 Cassandra 一起使用？](https://stackoverflow.com/questions/8401282/which-php-client-library-to-use-with-cassandra)
*   [通过 PHP 的 Cassandra](https://stackoverflow.com/questions/8858631/cassandra-via-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-07T14:33:48.760

通过 Thrift 连接已弃用。

[通过二进制协议用于 Cassandra 数据库的 PHP 库。](https://github.com/evseevnn/php-cassandra-binary)

# php - 如何在 MySQL 查询结果中查找特定行？

> ID：10164035
> 
> 赞同：2
> 
> 时间：2012-04-15T16:51:15.740
> 
> 标签：php, mysql

所以我这样做是为了检索我的整个表：

```
$result = mysql_query( 'SELECT * FROM mytable' ); 
```

然后，在我的 PHP 页面的另一部分，我执行另一个查询（针对特定行）：

```
$result2 = mysql_query( 'SELECT * FROM mytable WHERE id = ' . $id );
$row = mysql_fetch_array( $result2 ); 
```

所以，我正在执行两个查询。但是，我真的不必那样做，不是吗？我的意思是，我在第二个查询中检索的行已经存在`$result`（我的第一个查询的结果），因为它包含我的整个表。

因此，我不想进行第二个查询，而是`$result`直接从中提取所需的行（同时保持`$result`其自身的机智）。

我该怎么做？

* * *

好的，这就是我实现它的方式：

```
function getRowById ( $result, $id )
{
    while ( $row = mysql_fetch_array( $result ) ) {
        if ( $row['id'] == $id ) {
            mysql_data_seek( $result, 0 );
            return $row;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T16:56:35.493

在第一个查询缓存数据后：

```
$rows = array();
while($row=mysql_fetch_array($result) {
    $rows[$row[0]] = $row;
} 
```

然后只需使用以下命令访问数据：

```
$row = $rows[$id]; 
```

id 必须是您的字段中的*第一*列才能使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T17:00:12.313

您可以遍历结果集以查找行，然后将内部指针重置回第一行：

```
while($row = mysql_fetch_array( $result))
{
  if($row['id'] == $id)
  {
    //row found, do processing ...
    //reset pointer and break from loop
    if(!mysql_data_seek($result, 0))
      //handle error
    break;
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T17:24:47.840

假设您按照您在此处指定的顺序执行此操作，并且您已经知道第一次执行迭代时要查找的 id，您可以从那里保存该值。

所以，在你的脚本的某个地方，你会做类似的事情

```
while ( $row = mysql_fetch_array( $result ) ) {
    // process data
} 
```

在那个循环中，您可以检查您的 id 并将其保存以备后用。

```
while ( $row = mysql_fetch_array( $result ) ) {
        // process data
        if ($row['id'] == $id) $importantid = $row;
    } 
```

如果您只需要取出一行，这将是最快的方法，因为您只需迭代`$result`一次。

# perl - XML::Compile::SOAP 并使用 WSDL 调用 Web 服务

> ID：10164037
> 
> 赞同：2
> 
> 时间：2012-04-15T16:51:18.070
> 
> 标签：perl, soap-client

我很难对 web 服务进行 SOAP 调用，WSDL 看起来像这样：

```
<wsdl:definitions name="Service" targetNamespace="/Service/">
    <wsdl:types>
        <xsd:schema targetNamespace="/#/">
        <xsd:element name="authToken">
            <xsd:complexType>
                <xsd:sequence>
                    <xsd:element name="username" type="xsd:string"/>
                    <xsd:element name="password" type="xsd:string"/>
                </xsd:sequence>
           </xsd:complexType>
        </xsd:element>
        <xsd:element name="fault">
            <xsd:complexType>
                <xsd:sequence>
                    <xsd:element name="faultType">
                        <xsd:simpleType>
                            <xsd:restriction base="xsd:string">
                                <xsd:enumeration value="REQUIRED"/>
                                <xsd:enumeration value="INVALID"/>
                           </xsd:restriction>
                        </xsd:simpleType>
                   </xsd:element>
                   <xsd:element name="faultData" type="xsd:string"/>
               </xsd:sequence>
           </xsd:complexType>
        </xsd:element>
        <xsd:simpleType name="param1">
            <xsd:restriction base="xsd:int"/>
        </xsd:simpleType>
        <xsd:simpleType name="param2">
            <xsd:restriction base="xsd:int"/>
        </xsd:simpleType>
        <xsd:simpleType name="param3">
            <xsd:restriction base="xsd:int"/>
        </xsd:simpleType>
        <xsd:element name="Add">
            <xsd:complexType>
                <xsd:sequence>
                    <xsd:element ref="tns:authToken"/>
                        <xsd:element name="param1" type="tns:param1"/>
                       <xsd:element name="param2" type="tns:param2"/>
                       <xsd:element name="param3" type="tns:param3"/>
                        <xsd:choice>
                            <xsd:element name="Name">
                                <xsd:complexType>
                                    <xsd:sequence>
                                        <xsd:element name="first" type="tns:namefirst"/>
                                        <xsd:element name="last" type="tns:namelast"/>
                                    </xsd:sequence>
                                </xsd:complexType>
                            </xsd:element>
.... 
```

然后使用 XML:Compile，我执行以下操作

```
use XML::Compile::WSDL11;
use XML::Compile::SOAP11;
use XML::Compile::Transport::SOAPHTTP;
my $wsdlXml = XML::LibXML->new->parse_file("pathtowsdl");
my $wsdl = XML::Compile::WSDL11->new($wsdlXml);
my $call = $wsdl->compileClient('Add');
my %param = ('authToken'    =>  {
                    'username'  =>  'xxx',
                    'password'  =>  'xxxx',
                    },
             'param1'   =>  'xxx',
             'param2'   =>  'xxxx',
             'param3'   =>  'xxxx',
             'Name'     =>  {
                'first' =>  'xxx',
                'last'  =>  'xxx',
              });
my ($response, $trace) = $call->(\%params); 
```

我从上面得到一个错误：

解组错误：意外元素（uri：“”，本地：“authToken”）

如果我取出“authToken”，那么我会得到“错误：元素 `authToken' 缺少所需值”的本地错误。

我认为我的参数结构是错误的，但我不确定它应该是什么。有任何想法吗？

TIA

# .net - Regex.CompileToAssembly 如何设置 .dll 文件位置

> ID：10164039
> 
> 赞同：2
> 
> 时间：2012-04-15T16:51:28.087
> 
> 标签：.net, regex, f#

我正在 .fsx 脚本中尝试预编译正则表达式。但我不知道如何为生成的程序集指定 .dll 文件位置。我已经尝试在使用`CodeBase`的`AssemblyName`实例上设置属性，`Regex.CompileToAssembly`但无济于事。这是我所拥有的：

```
open System.Text.RegularExpressions

let rcis = [|
    new RegexCompilationInfo(
        @"^NumericLiteral([QRZING])$",
        RegexOptions.None,
        "NumericLiteral",
        "Swensen.Unquote.Regex",
        true
    );
|]

let an = new System.Reflection.AssemblyName("Unquote.Regex");
an.CodeBase <- __SOURCE_DIRECTORY__  + "\\" + "Unquote.Regex.dll"
Regex.CompileToAssembly(rcis, an) 
```

我在 FSI 中执行此操作，当我评估时，`an`我看到：

```
> an;;
val it : System.Reflection.AssemblyName =
  Unquote.Regex
    {CodeBase = "C:\Users\Stephen\Documents\Visual Studio 2010\Projects\Unquote\code\Unquote\Unquote.Regex.dll";
     CultureInfo = null;
     EscapedCodeBase = "C:%5CUsers%5CStephen%5CDocuments%5CVisual%20Studio%202010%5CProjects%5CUnquote%5Ccode%5CUnquote%5CUnquote.Regex.dll";
     Flags = None;
     FullName = "Unquote.Regex";
     HashAlgorithm = None;
     KeyPair = null;
     Name = "Unquote.Regex";
     ProcessorArchitecture = None;
     Version = null;
     VersionCompatibility = SameMachine;} 
```

但是，再一次，我没有像我想要的那样看到*C:\Users\Stephen\Documents\Visual Studio 2010\Projects\Unquote\code\Unquote\Unquote.Regex.dll*。如果我在 C 驱动器中搜索*Unquote.Regex.dll*，我会在某个临时 AppData 文件夹中找到它。

那么，如何正确指定由 .dll 生成的程序集的文件位置`Regex.CompileToAssembly`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T17:01:50.917

CompileToAssembly 似乎不尊重 CodeBase 或 AssemblyName 中的任何其他属性，而只是将结果程序集保存到当前目录。尝试将 System.Environment.CurrentDirectory 设置为正确的位置，并在保存后将其恢复。

```
open System.Text.RegularExpressions

type Regex with
    static member CompileToAssembly(rcis, an, targetFolder) = 
        let current = System.Environment.CurrentDirectory
        System.Environment.CurrentDirectory <- targetFolder
        try
            Regex.CompileToAssembly(rcis, an)
        finally
            System.Environment.CurrentDirectory <- current

let rcis = [|
    new RegexCompilationInfo(
        @"^NumericLiteral([QRZING])$",
        RegexOptions.None,
        "NumericLiteral",
        "Swensen.Unquote.Regex",
        true
    );
|]

let an = new System.Reflection.AssemblyName("Unquote.Regex");
Regex.CompileToAssembly(rcis, an, __SOURCE_DIRECTORY__) 
```

# entity-framework - EF Fluent API 遇到困难

> ID：10164043
> 
> 赞同：0
> 
> 时间：2012-04-15T16:51:44.623
> 
> 标签：entity-framework, entity-framework-4

我有 4 个这样的表：

```
public class Table1
{
 public int Id {get;set;}
 public string Name {get;set;}
}

public class Table2
{
 public int Id {get;set;}
 public string Name {get;set;}
 public int Table1Id {get;set;}
 public virtual Table1 {get; set;}
}

public class Table3
{
 public int Id {get;set;}
 public string Name {get;set;}
 public int Table2Id {get;set;}
 public virtual Table2 {get; set;}
}

public class Table4
{
 public int Id {get;set;}
 public string Name {get;set;}
 public int Table3Id {get;set;}
 public virtual Table3 {get; set;}
} 
```

我流利的 ​​API 是这样的：

```
modelBuilder.Entity<Table2>().HasRequired(x => x.Table1).WithMany().WillCascadeOnDelete(false);
modelBuilder.Entity<Table3>().HasRequired(x => x.Table2).WithMany().WillCascadeOnDelete(false);
modelBuilder.Entity<Table4>().HasRequired(x => x.Table3).WithMany().WillCascadeOnDelete(false); 
```

当我尝试播种表时，出现此错误：

**INSERT 语句与 FOREIGN KEY 约束“FK_Table4_Table3_Table3Id。冲突发生在数据库 MyDb、表“dbo.Table3”、列“Id”中。语句已终止。”**

我看不到哪里出错了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T17:39:07.790

做这个...

```
modelBuilder.Entity<Table2>()
    .HasRequired(t => t.Table1)
    .WithMany() // t => t.AllTable2s)
    .HasForeignKey(t => t.Table1ID); 
```

……最重要的是`make it compile`！:) （例如`public virtual Table1 {get; set;}`进入`public virtual Table1 Table1 {get; set;}`

# python - 使用 python 和 lxml 抓取页面 - ( , UnicodeEncodeError('ascii',

> ID：10164045
> 
> 赞同：0
> 
> 时间：2012-04-15T16:51:49.257
> 
> 标签：python, unicode, lxml

我正在使用 python2.7 和 lxml 来获取页面。我不断收到以下错误。

```
(<type 'exceptions.UnicodeEncodeError'>, UnicodeEncodeError('ascii', u'Approximate Dimensions: 4\xbd" x 4" x 7" (assembled)', 25, 26, 'ordinal not in range(128)'), <traceback object at 0x7f9198ac48c0>) 
```

我尝试了以下方法：

```
doc = lxml.html.document_fromstring(html)
for el in doc.iter('h2'):
    el.text_content().decode('utf-8','ignore')
    OR
    el.text_content().encode('ascii', 'ignore') 
```

如何解决这些错误？我需要能够 1）保存到文本文件，然后 2）将文本文件上传到 MySQL。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T16:55:33.433

尝试：

```
el.text_content().encode('utf-8') 
```

它是 unicode，您想将它（作为文本）存储到 utf-8。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-19T07:49:04.680

标题所说的用于编码的页面可能与实际情况不同。如果页面的实际编码不是 utf-8，那么做正确的事情就有点棘手了。

首先，您应该查看返回的文本`el.text_content()`

`x = el.text_content() print x`

如果您仍然有一些编码字符串，例如`/x09`，则表示它尚未解码。

如果 x 是 unicode，（以 'u' 开头），您应该转换`unicode`为`str`并使用正确的编码（如`cp1252`或 sth）对其进行解码

`chars = ''.join([chr(ord(x)) for x in el.text_content()]) /// It will change your dumb unicode to str result = chars.decode({try with different encoding until it doesn't throw an error}) /// now you decode str with proper format`

# regex - 匹配有数字的单词，忽略没有的单词

> ID：10164057
> 
> 赞同：0
> 
> 时间：2012-04-15T16:53:46.113
> 
> 标签：regex

我正在尝试使用其中包含数字的正则表达式匹配一个单词，例如： bar12b12 12bar43 44324f b123

同时忽略不包含的单词： bar foo bar foo

在过去的一个小时里，我一直在尝试这样做……没有结果！！

这是我能得到的最接近的：

[a-zA-Z0-9]+[a-zA-Z]+[0-9]+[a-zA-Z0-9]+

但它不正确匹配？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T17:00:51.493

这应该工作...

```
/\b\w*\d\w*/ 
```

# android - iPhone 忽略响应式布局上的正文边距

> ID：10164065
> 
> 赞同：0
> 
> 时间：2012-04-15T16:54:41.367
> 
> 标签：android, iphone, css, ios, responsive-design

我们的响应式设计存在问题。我们在响应式主题上将此样式用于移动设备：

```
body {
    margin-left: 10px;
    margin-right: 10px;
    overflow-x: hidden;
    max-width: 90%;
} 
```

下面你可以看到 iOS Broswer 和 Chrome 之间的区别：

![在此处输入图像描述](../Images/2ffec4bf9e63755637d5977e9d1c9fdf.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T17:01:40.817

将边距应用于您的身体是没有意义的，因为它是最外层的元素。相反，您应该使用填充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T18:21:42.200

根据这篇古老的博文[Body padding and margin](http://www.maxdesign.com.au/articles/body/)，不同的浏览器会以不同的方式处理 body 元素的边距和填充。如果这种差异今天仍然存在，我不会感到惊讶。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-15T20:08:32.907

它适用于百分比：

`body { margin-left: 5%; margin-right: 5%; overflow-x: hidden; max-width: 90%; margin: 0 auto; }`

# php - 使用 PHP 如何 ping 服务器输出其状态？

> ID：10164069
> 
> 赞同：0
> 
> 时间：2012-04-15T16:55:24.323
> 
> 标签：php, status

> **可能重复：**
> [Ping 站点并返回 PHP 中的结果](https://stackoverflow.com/questions/1239068/ping-site-and-return-result-in-php)

我正在为我的办公室开发一个控制面板，它将 ping 一组服务器，大约 12 个，并返回：向上（绿点）、慢速（黄点）或向下（红点）

显然，红色将通过没有响应来确定，而绿色将通过返回低 ping 时间来确定。黄色 我计划为最后 5 次 ping 返回的平均值设置一个阈值。

因为我根本不熟悉 PHP，我这样做只是为了让自己在遇到任何问题时有所了解。

我已经看到了有关如何在单个服务器上进行简单上/下操作的指南，但没有我正在寻找的那么深。我很乐意提供任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T17:05:38.397

```
function ping($host, $port, $timeout) { 
    $tB = microtime(true); 
    $fP = fSockOpen($host, $port, $errno, $errstr, $timeout); 
    if (!$fP) { return "down"; } 
    $tA = microtime(true); 
    return round((($tA - $tB) * 1000), 0)." ms"; 
} 
```

# xml - 从服务器远程处理powershell

> ID：10164073
> 
> 赞同：1
> 
> 时间：2012-04-15T16:55:34.047
> 
> 标签：xml, powershell

我制作了一个 powershell 脚本，它收集信息并将其保存到当前计算机上的 XML 文件中。我在想直接将 XML 保存到本地服务器会更好。问：如何将 XML 文件保存到服务器？- 这就是我保存到与脚本相同的目录的方式： $scriptpath = Split-Path -parent $myinvocation.MyCommand.Definition $template | 输出文件 $ScriptPath\tempXML.xml

问：是否可以从本地服务器 ant 运行脚本，然后将 XML 直接保存在该服务器上？

这是我的脚本：

```
<#
FORMAT:
 - All variabel names are lowercase
 - All tags in XML are lowercase
Some commands are run and placed directly into the XML (Commands before XML is made). 
Some commands are run after the XML is made and then adds children to specified nodes in the XML.
#>

#Saves the scriptpath to ScriptPath variable(HELPER)
$scriptpath = Split-Path -parent $myinvocation.MyCommand.Definition

#Saves computername to compname variable(HELPER)
$compname = gc env:computername

#Username
$brukernavn = gc env:username

#PC Serial Number
$serialnr = gwmi -computer $compname Win32_BIOS | ForEach {$_.SerialNumber}

#System Info
gwmi -computer $compname Win32_ComputerSystem | ForEach {$siname = $_.Name; $simanufacturer = $_.Manufacturer; $simodel = $_.Model}

#Graphic card
gwmi "win32_VideoController" | ForEach-Object {$gpuname = $_.Name}

#Processor Info
gwmi -computer $compname Win32_Processor | ForEach-Object {$cpuname = $_.Name; $cpumanufacturer = $_.Manufacturer; $cpucores = $_.NumberOfCores; $cpuaddresswidth = $_.AddressWidth}

#Memory
$totalmem = 0
$memsticks = gwmi -Class win32_physicalmemory
foreach ($stick in $memsticks) { $totalmem += $stick.capacity }
$totalmem = [String]$($totalmem / 1gb) + " GB"

#Install time for windows OS
$utctime = get-wmiobject win32_OperatingSystem | select-object -expandproperty installDate
$installtime = [System.Management.ManagementDateTimeConverter]::ToDateTime($utctime);

#--------#
#XML-form
#--------#

$template = "<computer version='1.0'>
    <hardware>
        <serialnumber>$serialnr</serialnumber>
        <systeminfo>
            <name>$siname</name>
            <manufacturer>$simanufacturer</manufacturer>
            <model>$simodel</model>
        </systeminfo>
        <drive>
            <name></name>
            <volumename></volumename>
            <size></size>
        </drive>
        <memory>
            <size>$totalmem</size>
        </memory>
        <gpu>
            <name>$gpuname</name>
        </gpu>
        <cpu>
            <name>$cpuname</name>
            <manufacturer>$cpumanufacturer</manufacturer>
            <id>cpuid</id>
            <numberofcores>$cpucores</numberofcores>
            <addresswidth>$cpuaddresswidth</addresswidth>
        </cpu>
    </hardware>
    <software>
        <user>
            <name>$brukernavn</name>
        </user>
        <osinfo>
            <caption></caption>
            <serialnumber></serialnumber>
            <installdate>$installtime</installdate>
            <servicepack></servicepack>
        </osinfo>
    </software>
</computer>"

$template | out-File $ScriptPath\tempXML.xml
$systemroot = [System.Environment]::SystemDirectory
$xml = New-Object xml
$xml.Load("$ScriptPath\tempXML.xml")

#Drive, hardware
$newdrive = (@($xml.computer.hardware.drive)[0])
Get-WmiObject -Class Win32_logicaldisk |
ForEach-Object {
    $newdrive = $newdrive.clone()
    $newdrive.name = [string]$_.name
    $newdrive.volumename = [string]$_.volumename
    $newdrive.size = "{0:N2}" -f ($_.size/1Gb) + " GB"   
    $xml.computer.hardware.AppendChild($newdrive) > $null
}
$xml.computer.hardware.drive | where-object {$_.size -eq "0,00 GB" -or $_.volumename -eq ""} | foreach-object {$xml.computer.hardware.RemoveChild($_)}

#Memory Info, hardware
$newmemory = (@($xml.computer.hardware.memory)[0])
Get-WmiObject -Class WIN32_PhysicalMemory |
ForEach-Object {
    $newmemory = $newmemory.clone()
    $newmemory.PositionInRow = [string]$_.PositionInRow
    $newmemory.datawidth = [string]$_.datawidth
    $newmemory.size = [String]$($_.capacity / 1gb) + " GB"
    $newmemory.devicelocator = $_.devicelocator
    $xml.computer.hardware.AppendChild($newmemory) > $null
}
$xml.computer.hardware.memory | where-object {$_.size -eq ""} | foreach-object {$xml.computer.hardware.RemoveChild($_)}

#OSInfo, software
$newosinfo = (@($xml.computer.software.osinfo)[0])
Get-WmiObject -computer $compname Win32_OperatingSystem | 
ForEach-Object {
        $newosinfo = $newosinfo.clone() 
        [String] $bitversion = gwmi Win32_OperatingSystem osarchitecture;
        $newosinfo.caption = [String]$_.caption
        $newosinfo.serialnumber = [string]$_.serialnumber + " " + $bitversion   
        $newosinfo.servicepack = $_.csdversion
        $xml.computer.software.AppendChild($newosinfo) > $null
}
$xml.computer.software.osinfo | where-object {$_.caption -eq ""} | foreach-object {$xml.computer.software.RemoveChild($_)}

#-------Save content----------------
$xml.Save("$ScriptPath\tempXML.xml")
#----------------------------------- 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T17:12:03.897

试试这样：

```
$xml.Save("\\$compname\c$\tempXML.xml") # this save on the root (c:\) of remote server 
```

您需要本地管理凭据才能访问 ac$ 共享。您可以通过其他方式在每个服务器中创建一个共享作为 \\server\myshareforxlm 并设置正确的权限并执行以下操作：

```
$xml.Save("\\$compname\myshareforxml\tempXML.xml") 
```

# android - 安卓异常处理

> ID：10164074
> 
> 赞同：0
> 
> 时间：2012-04-15T16:55:41.213
> 
> 标签：android, exception-handling, android-alertdialog

我无法处理由方法调用的异常。我要做的是在捕获到异常时创建一个警报对话框（我知道如何创建警报对话框）。抛出异常的方法在不同的类中，这就是为什么在捕获异常时无法创建警报对话框的原因。见下文：-

```
protected Boolean doInBackground(final String... args) { 

    try{
        ParserLive parser = new ParserLive();
        feeds = parser.parse(); // this is the method throwing the exception
        return true;  //won't return true because it gets stuck here
    } catch (Throwable t){
        return false;
    }    
} 
```

下面是方法所在的 ParserLive 类：-

```
public class ParserLive {

       //variables and constructor
       //Below is the method I want to handle

       //Ideally I'd like to wrap the code inside this method with a try-catch, 
       //and put the dialog in the catch statement, but this is not allowed.
       public List<Feed> parse() {
       //some code 
       // the following code is throwing the error, when I try to create an alert dialog inside this catch statement it says "the constructor AlertDialog.Builder(ParserLive) is undefined"
       try {
            Xml.parse(this.getInputStream(), Xml.Encoding.UTF_8, root.getContentHandler());
       } catch (Exception e) {
             throw new RuntimeException(e); 
         }
     return feeds;
  }
} 
```

### 编辑

我已经编辑了上面的代码以包含在 LogCat 中引发以下错误的代码行 - “ java.lang.RuntimeException: org.apache.harmony.xml.ExpatParser$ParseException: At line 1, column 0: no element found ”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T17:22:42.873

```
 protected Boolean doInBackground(final String... args) { 
            try{
                ParserLive parser = new ParserLive();
                feeds = parser.parse(); 
                return true;  
            } catch (Exception e){
                log.d("Error", e.getMessage());
                yourActivity.runOnUiThread(new Runnable() {
                                  public void run() {
                                      Toast.makeText(context, e.getMessage(), 3000).show();        }
                                 });
//Here you can create dialog also
                return false;
            }    
        } 
```

# jquery - 删除属性/点 D3.js JQuery

> ID：10164075
> 
> 赞同：1
> 
> 时间：2012-04-15T16:55:50.627
> 
> 标签：jquery, html, d3.js

我有以下绘图功能：

```
function drawMap(json){ 

d3.json("us-states.json", function(json) {
        states.selectAll("path")
    .data(json.features)
    .enter().append("path")
    .attr("class", data ? quantize : null)
    .attr("d", path)
    .attr("title", function(d) {return "hi";});

});

data  = convertJSON(json);
} 
```

我想使用新的 json 参数多次调用 drawMap() 函数来更新图形，但图形不会被覆盖。我想知道如何删除/删除以前的图形，以便在其上绘制一个新图形？或者我是否可以使用 .exit() 函数删除以前的数据点，然后重新加载新的数据点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T19:25:38.007

这里有一个很好的教程，介绍如何添加新数据和删除旧数据以及 .enter() 和 .exit()[选择](http://mbostock.github.com/d3/tutorial/bar-2.html)。

# android - 配置 android 以在 appcelerator 钛上工作

> ID：10164081
> 
> 赞同：0
> 
> 时间：2012-04-15T16:56:24.660
> 
> 标签：android, titanium, appcelerator, appcelerator-mobile

我正在运行 Windows 7，并试图将 android 配置为在钛中工作......

我已经安装了 32 位和 64 位版本的 Java...（android 似乎不适用于 64 位版本）...

当您从钛内部配置 android 时，我收到以下错误...

所需物品： •附加组件 Google APIs 7、Google APIs 8

当您然后单击安装或更新 Android 时，Android SDK 管理器会打开并选择我需要安装的内容...我单击接受并下载并安装...

但是，一旦完成，我在回到钛合金时仍然会遇到同样的错误......它不应该这么难......有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T16:52:39.277

我遇到了 64 位版本的问题。您是否尝试过卸载 64 位版本的 Java？

另外，你有没有运行 Android 来更新所有的图书馆？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-02T14:52:28.343

我知道这是一个老问题，但如果有人像我一样用谷歌搜索它，这对我有帮助：

*   确保至少为您已安装的最新 Android SDK 安装 Google API
*   **确保安装了 Android** 2.3.x。这很关键，即使我安装了六个高于 2.3 的 SDK，Titanium Studio 也无法链接到我的 Android SDK（设置在钛文件夹之外）
*   重启钛工作室

此外，如果这没有帮助，请尝试干净启动 Titanium Studio，如下所示：

*   关闭钛工作室
*   转到您的 Titanium Studio 安装文件夹（例如“C:\Program Files\Titanium Studio”）
*   打开 TitaniumStudio.ini
*   复制文件开头的这两行：

> ```
> -clean
> true 
> ```

*   保存文件并启动 Titanium Studio。

成功操作后，您可以从 .ini 文件中删除这两行，因为它们不需要。

# c++ - C++ 中的竖线 ( | ) 是什么意思？

> ID：10164086
> 
> 赞同：20
> 
> 时间：2012-04-15T16:56:44.737
> 
> 标签：c++, pipe

我的一本编程书中有这个 C++ 代码：

```
WNDCLASSEX wndClass = { 0 };
wndClass.cbSize = sizeof(WNDCLASSEX);
wndClass.style =  CS_HREDRAW | CS_VREDRAW; 
```

单管在 C++ windows 编程中有什么作用？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-15T16:58:21.577

按位或运算符。它将在提供的两个值中的任何一个中设置为真的所有位。

例如`CS_HREDRAW`可能是 1 也`CS_VREDRAW`可能是 2。然后使用按位 AND 运算符检查它们是否设置非常简单`&`：

```
#define CS_HREDRAW 1
#define CS_VREDRAW 2
#define CS_ANOTHERSTYLE 4

unsigned int style = CS_HREDRAW | CS_VREDRAW;
if(style & CS_HREDRAW){
    /* CS_HREDRAW set */
}

if(style & CS_VREDRAW){
    /* CS_VREDRAW set */
}

if(style & CS_ANOTHERSTYLE){
    /* CS_ANOTHERSTYLE set */
} 
```

也可以看看：

*   [维基百科：按位运算（OR 部分）](http://en.wikipedia.org/wiki/Bitwise_operation#OR)
*   [维基百科：掩码（计算）部分（常用位掩码函数）](http://en.wikipedia.org/wiki/Bitmask#Common_bitmask_functions)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-15T16:57:53.720

`|`称为[按位或运算符](http://en.cppreference.com/w/cpp/language/operator_precedence)。

`||`称为逻辑或运算符。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-15T16:58:48.627

这是一个按位或运算符。例如，

```
if( 1 | 2 == 3) {
    std::cout << "Woohoo!" << std::endl;
} 
```

将打印`Woohoo!`。

# c - 读取文件的一部分并将其写入单个 unsigned char

> ID：10164088
> 
> 赞同：0
> 
> 时间：2012-04-15T16:56:55.773
> 
> 标签：c, file, pointers, fread

我想从文件的几个部分中读取，然后将其输出为一个无符号字符。这是这个的简化版本：

```
void loadPartsOfFile (const char *filename, unsigned char **output)
{
    *output = malloc(333);

    FILE *file = fopen(filename, "rb");
    fseek(file, 0, SEEK_SET); 
    fread(*output, 1, 111, file);
    fseek(file, 10254, SEEK_SET);
    fread(*output, 1, 222, file);

    fclose(file);
} 
```

第二个 fread 只是覆盖了第一次添加到输出中的内容。有没有办法将第二个数据流附加到输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T16:58:37.793

```
void loadPartsOfFile (const char *filename, unsigned char **output)
{
    *output = realloc(*output, 333);

    FILE *file = fopen(filename, "rb");
    fseek(file, 0, SEEK_SET); 
    fread(*output, 1, 111, file);
    fseek(file, 10254, SEEK_SET);
    fread(*output+111, 1, 222, file);

    fclose(file);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T17:00:45.667

只需递增`*output`直到上一次读取结束，即`*output + 111`.

# iphone - 关闭视图控制器动画完成未在 uiimagepickercontroller 上调用完成

> ID：10164089
> 
> 赞同：8
> 
> 时间：2012-04-15T16:56:56.763
> 
> 标签：iphone, objective-c, ios, modalviewcontroller

这是我的代码：

```
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {

    [picker dismissViewControllerAnimated:YES completion:^(void){
        NSLog(@"Test");

    }];
} 
```

它关闭模态视图控制器，但不调用完成参数。难道我做错了什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-15T17:00:04.920

~~void 完成处理程序充满了一个简单的`^{`，我以前从未见过你的语法......~~

```
[picker dismissViewControllerAnimated:YES completion:^{
        NSLog(@"Test");

    }]; 
```

我能想出的唯一可能的解释是您的图像选择器正在通过其他方式被解雇，并且您不是它的代表（因此您不会收到该`didFinishPickingMediaWithInfo`消息）。另一种可能性可能是当时 SDK 内部出现故障。我通过运行一个快速示例项目知道，完成块在两种语法模型中都按预期触发。

# c# - 如何减小图像的大小

> ID：10164095
> 
> 赞同：0
> 
> 时间：2012-04-15T16:57:44.650
> 
> 标签：c#, windows-phone-7

我正在尝试减小从相机拍摄的图像的大小，然后再将其保存到独立存储中。我已经将它降低到最低分辨率 (640x480) 我怎样才能将字节减少到 100kb，而不是它们以近 1mb 的速度出现。

```
void cam_CaptureImageAvailable(object sender, Microsoft.Devices.ContentReadyEventArgs e)
    {

        string fileName = folderName+"\\MyImage" + savedCounter + ".jpg";

        try
        {   

            // Set the position of the stream back to start
            e.ImageStream.Seek(0, SeekOrigin.Begin);

            // Save picture as JPEG to isolated storage.
            using (IsolatedStorageFile isStore = IsolatedStorageFile.GetUserStoreForApplication())
            {
                using (IsolatedStorageFileStream targetStream = isStore.OpenFile(fileName, FileMode.Create, FileAccess.Write))
                {

                    // Initialize the buffer for 4KB disk pages.
                    byte[] readBuffer = new byte[4096];
                    int bytesRead = -1;

                    // Copy the image to isolated storage. 
                    while ((bytesRead = e.ImageStream.Read(readBuffer, 0, readBuffer.Length)) > 0)
                    {
                        targetStream.Write(readBuffer, 0, bytesRead);
                    }

                }

            }

        }
        finally
        {
            // Close image stream
            e.ImageStream.Close();
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T17:04:27.220

我对 Windows Phone 一无所知，但也许这个链接会对你有所帮助：http: [//msdn.microsoft.com/en-us/library/ff769549 (v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/ff769549(v=vs.92).aspx)

1) 加载您的 jpeg 2) 复制到位图 3) 保存为具有质量设置的位图 [http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.extensions.savejpeg(v=vs. 92).aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.extensions.savejpeg(v=vs.92).aspx)

# php - 向用户发送新帐户的激活电子邮件

> ID：10164102
> 
> 赞同：0
> 
> 时间：2012-04-15T16:58:21.320
> 
> 标签：php, forms, mysqli

我有这个代码（这是一个表格，它将注册新用户并向他们发送电子邮件以激活他们的帐户）。

```
 <?php
        if(isset($_POST['submited'])) {
            $msg="";

            $RFname = clean_text($_POST['RFname']);
            $RLname = clean_text($_POST['RLname']);
            $USERname = clean_text($_POST['UserName']);
            $USERpassword = $_POST['UserPass'];
            $USERpassword2 = $_POST['UserPassConfirm'];
            $USERemail = $_POST['UserEmail'];
            $USERwebsite = $_POST['WebSite'];
            $hash = clean_text(md5(rand(0,1000)));

            if($USERpassword !== $USERpassword2) {
            $msg = "<span class='errorMessges'>Confirm passwords did not match</span>";
            }

            elseif($check=$db->query("select 1 from loginaccess where Email ='".$USERemail."'")){
            if(mysqli_num_rows($check) > 0 ) {
                $msg = "<span class='errorMessges'>This email already taken</span>";
            }

            elseif(empty($_SESSION['6_letters_code'] ) || strcasecmp($_SESSION['6_letters_code'], $_POST['6_letters_code']) != 0){
            $msg = "<span class='errorMessges'>Human code verification invalid</span>";
          }

            else{
                $putData = " insert into loginaccess (id, FUname, LUname, Uname, Pword, Email, Website, hash) value ('', '$RFname', '$RLname', '$USERname', '$USERpassword', '$USERemail', '$USERwebsite', '$hash')";

                $inputResult = $db -> query ($putData) or die ('$db->error');

                if ($inputResult){
                $msg = "<span class='successMessgaes'>You have been successfully registered</span>";

                // Send email to our user 
$to='$USERemail'; 
$subject ='Signup | Verification'; 
$message =' 

Thanks for signing up! 
Your account has been created, you can login with the following credentials after you have activated your account by pressing the url below. 

------------------------ 
Username: '.$USERname.' 
Password: '.$USERpassword.' 
------------------------ 

Please click this link to activate your account: 

http://www.yourwebsite.com/verify.php?email='.$USERemail.'&hash='.$hash.' 

';

$headers = 'From:noreply@learning.com' . "\r\n"; 
mail($to, $subject, $message, $headers);

                    }else{
                        $msg = "<span class='errorMessges'>There was an error please try again later</span>";
                    }
                }
            }
        }
    ?>

<form action="<?php $_SERVER['PHP_SELF']; ?>" method="post">

<table width="762" border="0" cellspacing="5" cellpadding="5">
  <tr>
    <td colspan="2" class="socialAndPeopleByName">Personal information</td>
    <td colspan="2"><span class="socialAndPeopleByName">Account information</span></td>
    </tr>
  <tr>
    <td width="91" class="registrationInfo"><span class="red">*</span> First name</td>
    <td width="203"><label for="textfield"></label>
      <span id="sprytextfield1">
      <input name="RFname" type="text" class="registrationFeild" id="textfield" />
      <span class="textfieldRequiredMsg"><br>
      First name  is required.</span></span></td>
    <td width="148"><span class="red">*</span><span class="registrationInfo"> User name</span></td>
    <td width="255"><span id="sprytextfield5">
      <input name="UserName" type="text" class="registrationFeild" id="textfield5" />
      <span class="textfieldRequiredMsg"><br>
      User name is required.</span></span></td>
  </tr>
  <tr>
    <td class="registrationInfo"><span class="red">*</span> Last name</td>
    <td><span id="sprytextfield2">
      <input name="RLname" type="text" class="registrationFeild" id="textfield2" />
      <span class="textfieldRequiredMsg"><br>
      Last name is required.</span></span></td>
    <td><span class="red">*</span><span class="registrationInfo"> Password</span></td>
    <td><span id="sprypassword1">
    <input name="UserPass" type="password" class="registrationFeild" id="textfield7" />
    <span class="passwordRequiredMsg"><br>
    Password is required.</span><span class="passwordMaxCharsMsg"><br>
    Password can't be more then 20 letter</span><span class="passwordMinCharsMsg"><br>
    Password can't be less then 6 letter</span></span></td>
  </tr>
  <tr>
    <td class="registrationInfo"><span class="red">*</span> Valid email</td>
    <td><span id="sprytextfield3">
    <input name="UserEmail" type="text" class="registrationFeild" id="textfield3" />
    <br>
    <span class="textfieldRequiredMsg">Valid email is required.</span><span class="textfieldInvalidFormatMsg">Invalid email format.</span></span></td>
    <td><span class="red">*</span><span class="registrationInfo"> Confirm Password</span></td>
    <td><span id="sprypassword2">
      <input name="UserPassConfirm" type="password" class="registrationFeild" id="textfield8" />
      <span class="passwordRequiredMsg"><br>
      Please confirm your password</span></span></td>
  </tr>
  <tr>
    <td class="registrationInfo">Web site</td>
    <td><span id="sprytextfield4">
      <input name="WebSite" type="text" class="registrationFeild" id="textfield4" />
      <br>
      <span class="textfieldInvalidFormatMsg">Invalid format</span></span></td>
    <td><span class="registrationInfo"><span class="red">*</span> Prove you are human</span></td>
    <td><img src="includes/captcha.php?rand=<?php echo rand(); ?>" align="absmiddle" id='captchaimg' /> <a href="javascript: refreshCaptcha();"><img src="images/refreshIcon.jpg" alt="Refresh" width="18" height="25" border="0" align="absmiddle" /></a>      <input name="6_letters_code" type="text" class="registrationFeildSmall" id="6_letters_code" /></td>
  </tr>
  <tr>
    <td colspan="3"><?php if(!empty($msg)) {echo $msg;} ?></td>
    <td><input name="submited" type="submit" class="signUpItem" id="submited" value="" /></td>
  </tr>
</table>
</form> 
```

当用户提交时我只是不发送任何电子邮件我认为它应该在这里做任何想法。

* * *

我更改了我正在使用的免费托管，但仍未向用户发送确认任何帮助

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T17:47:34.090

检查 php.ini 中的以下属性

*   '发送邮件路径'
*   'sendmail_from'

并正确设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T14:17:45.760

谢谢大家 我得到了答案 我在发送电子邮件时有很多错误，这是正确的。

```
if ($inputResult){

$to = "$USERemail"; $subject = "Signup | Verification"; $email = "$UserEmail"; $message=' 
Thanks for signing up! 
Your account has been created, you can login with the following credentials after you have activated your account by pressing the url below. 

------------------------ 
Username: '.$USERname.' 
Password: '.$USERpassword.' 
------------------------ 

Please click this link to activate your account: 

http://www.yourwebsite.com/verify.php?email='.$USERemail.'&hash='.$hash.' 
'; 
$headers = "From: $UserEmail"; $sent = mail($to, $subject, $name, $message, $headers) ; if($sent) {print "<p style='color:#090'>Your mail was sent successfully</p>"; } else {print "We encountered an error sending your mail"; }
$msg = "<span class='successMessgaes'>You have been successfully registered</span>"; 
```

# php - 保护用于客户端处理的数据库密钥

> ID：10164106
> 
> 赞同：0
> 
> 时间：2012-04-15T16:58:38.570
> 
> 标签：php, mysql, security

我有一个信息树，它以 JSON 对象的形式发送给客户端。在该对象中，我不想拥有来自数据库的原始 ID。我想过在对象（例如标题）或盐中制作 id 和字段的哈希，但我担心这可能会对处理开销产生严重影响。

```
SELECT * FROM `things` where md5(concat(id,'some salt')) = md5('1some salt'); 
```

在这种情况下是否有隐藏 ID 的标准做法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T17:26:55.137

一个选项可能是使用 php 会话数据来存储发送到客户端的 id# 列表，以及哈希 id#s。

这意味着每次都会发出唯一的哈希，下次加载时将无法追踪。

哈希 id 可以按照您的想法进行设置（在这种情况下，带盐的 md5 可以工作，但任何简单的事情都可以）并将它们存储在会话中的数组中。

如果可能，尽量避免在数据库中这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T17:25:14.350

我可以为您想到两个选择：

1）您预先散列每个 id 并将其与原始 id 一起存储在数据库中。这可能是一个好主意，也可能不是一个好主意，具体取决于您的数据库大小和大小限制。

2）自己写一个简单的哈希函数！如果您没有想法，我可以建议您做一些简单的事情。简单不代表不好，只要你知道怎么做就行！我假设该函数没有在客户端被去散列。就个人而言，我更喜欢在服务器端代码端而不是在数据库端管理处理函数（如哈希函数），因为我喜欢让 MySQL 尽可能自由地以尽可能低的延迟返回数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T17:13:41.507

您可以创建一个具有值的新列`md5(concat(id,'some salt'))`并在进行选择语句之前计算它以节省计算开销。

# python - 将参数传递给函数以进行拟合

> ID：10164109
> 
> 赞同：3
> 
> 时间：2012-04-15T16:59:07.420
> 
> 标签：python, numpy, scipy, curve-fitting

我正在尝试拟合一个函数，该函数将 2 个自变量 x、y 和 3 个参数作为输入，以找到 a、b、c。这是我的测试代码：

```
import numpy as np
from scipy.optimize import curve_fit

def func(x,y, a, b, c):
    return a*np.exp(-b*(x+y)) + c    

y= x = np.linspace(0,4,50)
z = func(x,y, 2.5, 1.3, 0.5) #works ok
#generate data to be fitted
zn = z + 0.2*np.random.normal(size=len(x))
popt, pcov = curve_fit(func, x,y, zn) #<--------Problem here!!!!! 
```

但我收到错误消息：“func() 正好需要 5 个参数（给定 51 个）”。如何正确传递我的论点 x,y？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T17:35:55.733

只需查看[文档即可。`scipy.optimize.curve_fit()`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.curve_fit.html)原型是

```
scipy.optimize.curve_fit(f, xdata, ydata, p0=None, sigma=None, **kw) 
```

文档状态`curve_fit()`被调用，目标函数作为第一个参数，自变量作为第二个参数，因变量作为第三个参数，参数的起始值作为第四个参数。您尝试以完全不同的方式调用该函数，因此它不起作用也就不足为奇了。`zn`具体来说，您是作为参数传递的`p0`——这就是为什么使用这么多参数调用函数的原因。

该文档还描述了如何调用目标函数：

> `f`：可调用
> 模型函数，`f(x, ...)`。它必须将自变量作为第一个参数，并将要拟合的参数作为单独的剩余参数。
> 
> `xdata`：具有 k 个预测变量的函数的`N`长度序列或`(k,N)`形状数组
> 。测量数据的自变量。

您尝试使用来分隔因变量的参数，而它应该是单个参数数组。这是固定的代码：

```
def func(x, a, b, c):
    return a * np.exp(-b * (x[0] + x[1])) + c    

N = 50
x = np.linspace(0,4,50)
x = numpy.array([x, x])          # Combine your `x` and `y` to a single
                                 # (2, N)-array
z = func(x, 2.5, 1.3, 0.5)
zn = z + 0.2 * np.random.normal(size=x.shape[1])
popt, pcov = curve_fit(func, x, zn) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T17:08:38.047

尝试将前两个数组参数`func`作为元组传递并修改`func`以接受参数元组

通常预计`curvefit`将接受 x 和 y 参数`func(x)`作为输入以拟合曲线。奇怪的是，在您的示例中，因为您的 x 参数不是单个值，而是两个值（不知道为什么），您必须修改您的函数，以便它接受`x`作为单个参数并在其中扩展它。

一般来说，三维曲线拟合应该以与您尝试实现的方式不同的方式处理。您可以查看以下[SO](https://stackoverflow.com/questions/2298390/fitting-a-line-in-3d)帖子，该帖子试图用一条线拟合三维散点图。

```
>>> def func((x,y), a, b, c):
    return a*np.exp(-b*(x+y)) + c

>>> y= x = np.linspace(0,4,50)
>>> z = func((x,y), 2.5, 1.3, 0.5) #works ok
>>> zn = z + 0.2*np.random.normal(size=len(x))
>>> popt, pcov = curve_fit(func, (x,y), zn) 
```

# c++ - C++打印容器

> ID：10164112
> 
> 赞同：2
> 
> 时间：2012-04-15T16:59:15.600
> 
> 标签：c++, iterator, containers

我正在尝试打印容器，例如集合和地图。我正在使用的书说以下代码是有效的：

```
#include <iostream>
#include <set>
#include <iterator>
#include <fstream>
using namespace std;

template <typename Container>
void print (const Container & c, ostream & out = cout)
{
    typename Container::const_iterator itr;
    for( itr=c.begin(); itr!=c.end(); ++itr)
        out << *itr << " ";
    out << endl;
}

int main()
{
    ifstream fin("Test.txt");
    set<string> s(  istream_iterator<string>(fin),
                    istream_iterator<string>() );
    print( s );

    return 0;
} 
```

然而，我从 Visual Studio 的编译器中得到了一个错误。**我错过了什么？**我知道它可能很简单，比如包含，但我不熟悉 STL 容器和 C++ 迭代器。

我已经有了`#include <iterator>`

**错误：**

*   'Container': 必须是类或命名空间，后跟 '::'
*   'itr' : 未声明的标识符
*   “const_iterator”：不是“全局命名空间”的成员

还有一些我敢肯定是第一个的结果。

**编辑：**

根据教科书，以下代码应该与我的主要代码相同。我无法让它工作，但它可能会有所帮助：

```
ifstream fin("Test.txt");
string x;
set<string> s;
while( fin >> x)
    s.insert(x); 
```

**编辑：**

Visual Studio 构建输出：

```
------ Build started: Project: project, Configuration: Debug Win32 ------
Build started 4/15/2012 1:19:25 PM.
InitializeBuildStatus:

  Touching "Debug\project.unsuccessfulbuild".

ClCompile:

  Project4.cpp

c:\users\admin\documents\visual studio 2010\projects\project\project\project4.cpp(11): error C2825: 'Container': must be a class or namespace when followed by '::'

          c:\users\admin\documents\visual studio 2010\projects\project\project\project4.cpp(22) : see reference to function template instantiation 'void print<std::set<_Kty>
(std::istream_iterator<_Ty>,std::istream_iterator<_Ty> (__cdecl *)(void))>(Container (__cdecl &),std::ostream &)' being compiled

          with

          [

              _Kty=std::string,

              _Ty=std::string,

              Container=std::set<std::string> (std::istream_iterator<std::string>,std::istream_iterator<std::string> (__cdecl *)(void))

          ]

c:\users\admin\documents\visual studio 2010\projects\project\project\project4.cpp(11): error C2039: 'const_iterator' : is not a member of '`global namespace''

c:\users\admin\documents\visual studio 2010\projects\project\project\project4.cpp(11): error C2146: syntax error : missing ';' before identifier 'itr'

c:\users\admin\documents\visual studio 2010\projects\project\project\project4.cpp(11): error C2065: 'itr' : undeclared identifier

c:\users\admin\documents\visual studio 2010\projects\project\project\project4.cpp(12): error C2065: 'itr' : undeclared identifier

c:\users\admin\documents\visual studio 2010\projects\project\project\project4.cpp(12): error C2228: left of '.begin' must have class/struct/union

          type is 'std::set<_Kty> (__cdecl &)'

          with

          [

              _Kty=std::string

          ]

c:\users\admin\documents\visual studio 2010\projects\project\project\project4.cpp(12): error C2065: 'itr' : undeclared identifier

c:\users\admin\documents\visual studio 2010\projects\project\project\project4.cpp(12): error C2228: left of '.end' must have class/struct/union

          type is 'std::set<_Kty> (__cdecl &)'

          with

          [

              _Kty=std::string

          ]

c:\users\admin\documents\visual studio 2010\projects\project\project\project4.cpp(12): error C2065: 'itr' : undeclared identifier

c:\users\admin\documents\visual studio 2010\projects\project\project\project4.cpp(13): error C2065: 'itr' : undeclared identifier

Build FAILED.

Time Elapsed 00:00:01.00

========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T18:09:15.460

它认为这是一个函数声明：

```
set<string> s(  istream_iterator<string>(fin),
                istream_iterator<string>() ); 
```

添加一对额外的括号将更正它：

```
set<string> s( (istream_iterator<string>(fin)),
                istream_iterator<string>() ); 
```

如果您搜索[Most Vexing Parse](https://stackoverflow.com/questions/7007817) ，那么在 SO 上有很多这样的例子。

编辑：您还需要添加`#include <string>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T18:13:21.597

似乎编译器（也是clang ++）似乎感到困惑。不过，以下内容对我有用：

```
#include <iostream>                                                         
#include <set>                                                              
#include <iterator>                                                         
#include <fstream>                                                          

using namespace std;                                                        

template <typename Container>                                               
void print (const Container & c, ostream & out = cout)                      
{                                                                           
    typename Container::const_iterator itr;                                 
    for( itr=c.begin(); itr!=c.end(); ++itr)                                
        out << *itr << " ";                                                 
    out << endl;                                                            
}                                                                           

int main()                                                                  
{                                                                           
    ifstream fin("Test.txt");                                               
    istream_iterator<string> first(fin), last;                              
    set<string> s(first, last);                                             
    print(s);                                                               

    return 0;                                                               
} 
```

但是，我建议将您的`print`函数转换为接受您使用输出的迭代器范围的东西`std::copy`，如下所示：[http ://www.sgi.com/tech/stl/ostream_iterator.html](http://www.sgi.com/tech/stl/ostream_iterator.html)

# scala - Scala定义一个函数并在参数左侧调用它

> ID：10164114
> 
> 赞同：1
> 
> 时间：2012-04-15T16:59:20.947
> 
> 标签：scala, functional-programming

```
 val deck = 1 to 52 toList

// shuffles the deck, and prints it out nicely
deck sortWith ((_, _) => Random.nextBoolean) foreach (x => print(x + " ")) 

```

由于我将一遍又一遍地洗牌和打印甲板，我正在尝试执行以下操作

```
 val deck = 1 to 52 toList
def shuffle : (List[Int] => List[Int]) = {_ sortWith ((_, _) => Random.nextBoolean)}
def printDeck : (List[Int] => Unit) = {_ foreach(x => print(x + " "))}

deck shuffle printDeck // this doesnt work

// I can only do 
printDeck(shuffle(deck)) // this works 

```

当您不必使用括号时，调用参数左侧的函数会更加优雅。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T17:06:19.483

为了获得`object function`语法，您必须将该函数作为类的方法。

您可以通过隐式定义来完成此操作：

```
implicit def enhanceDeck(deck: List[Int]) = new {
  def shuffle = 
    deck sortWith ((_, _) => Random.nextBoolean)

  def printDeck = 
    deck.foreach(x => print(x + " "))
} 
```

现在你可以这样做：

```
val deck = 1 to 52 toList
deck shuffle 
deck printDeck 
```

但是你*不能*这样做`deck shuffle printDeck`，因为 Scala 认为你在做`deck.shuffle(printDeck)`. 相反，请使用以下之一：

```
deck.shuffle.printDeck
deck.shuffle printDeck 
```

**编辑**：您的第一个片段实际上是`object function arg function arg`. 两者`sortWith`并`foreach`采取一个论点。

定义一个类型 for`Deck`可能是一个很好的清洁方法，但仍然不允许你使用你想要的语法，因为你只会有类似`Deck(deck) shuffle printDeck`Scala 假设的东西`Deck(deck).shuffle(printDeck)`。

它看起来像这样：

```
case class Deck(deck: List[Int]) {
  def shuffle = 
    deck sortWith ((_, _) => Random.nextBoolean)

  def printDeck = 
    deck.foreach(x => print(x + " "))
}

Deck(deck).shuffle printDeck 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-15T17:31:46.193

如果你真的想拥有

```
deck <?> shuffle <?> printDeck 
```

代替

```
printDeck(shuffle(deck)) 
```

您应该考虑使用`|>`运算符（在[scalaz](http://code.google.com/p/scalaz/)中定义，或者只是创建自己的），因为这是它的好处

```
deck |> shuffle |> printDeck 
```

*虽然一般来说在 Scala 中使用正向管道*可能有一些合理的观点，但如果你真的只是想颠倒顺序，那么使用这个通用运算符比创建特定的 pimp 到`List[Int]`.

定义（仅供参考，请勿以此作为实现）：

```
implicit def toForwardPipe[T](x : T) = new {
  def |> [U](f : T => U) = f(x)
} 
```

# mysql - MYSQL，Union 中的子查询参考

> ID：10164118
> 
> 赞同：1
> 
> 时间：2012-04-15T16:59:55.803
> 
> 标签：mysql, subquery

有没有办法在联合中引用子查询？

我正在尝试执行以下操作，并且希望避免使用临时表，但是子查询将从更大的数据集中提取，因此只执行一次是有意义的。

```
SELECT * FROM (SELECT * FROM ads WHERE state='FL' AND city='Maitland' AND page='home' ORDER BY RAND()) AS sq WHERE spot = 'full-banner' LIMIT 1
UNION
SELECT * FROM sq WHERE spot = 'leaderboard' LIMIT 1
UNION
SELECT * FROM sq WHERE spot = 'rectangle1' LIMIT 1
UNION
SELECT * FROM sq WHERE spot = 'rectangle2' LIMIT 1
.... etc,, 
```

遗憾的是，不能为结果集的单个列指定 DISTINCT。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T17:18:01.120

好吧，如果不重复创建派生表，就没有办法做你想做的事情。

如果查询`ads`真的很昂贵，那么您应该尝试添加如下索引：

```
alter table ads add index (state, city, page, spot); 
```

如果在添加该索引后查询需要太多时间，那么我建议创建一个表来存储这些数据，然后为每个点查询该表。

根据您的数据，您可以`GROUP BY`尝试获得类似的结果。

# android - 如何使用 setMaxDuration 将 AudioRecord 限制为 MediaRecorder 的录制时间

> ID：10164121
> 
> 赞同：3
> 
> 时间：2012-04-15T17:00:12.463
> 
> 标签：android, audiorecord, android-audiorecord

我需要在开始时间 2 分钟后停止 AudioRecord。使用 MediaRecorder，我使用 setMaxDuration 并且效果很好，但我也需要使用 AudioRecord 的好方法。

感谢帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T17:22:43.927

你可以这样试试。。

```
handler=new Handler();
 Runnable r=new Runnable() 
{
 public void run() 
{
  recorder.stop();
   recorder.release(); 
  } 

};
handler.postDelayed(r, 120000); 
```

# python - 通过 sax 解析 xml 时出错

> ID：10164127
> 
> 赞同：-4
> 
> 时间：2012-04-15T17:00:46.997
> 
> 标签：python, python-3.2

```
Traceback (most recent call last):
 1\. File "C:\Python32\saxparser.py", line 19, in <module>
    parser.parse('xmlfile.xml')
 2\. File "C:\Python32\lib\xml\sax\expatreader.py", line 107, in parse
    xmlreader.IncrementalParser.parse(self, source)
 3\. File "C:\Python32\lib\xml\sax\xmlreader.py", line 125, in parse
    self.close()
 4\. File "C:\Python32\lib\xml\sax\expatreader.py", line 217, in close
    self.feed("", isFinal = 1)
 5\.  File "C:\Python32\lib\xml\sax\expatreader.py", line 211, in feed
    self._err_handler.fatalError(exc)
 6\. File "C:\Python32\lib\xml\sax\handler.py", line 38, in fatalError
    raise exception
xml.sax._exceptions.SAXParseException: xmlfile.xml:26:13: no element found 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T17:10:46.410

此错误表示您试图解析一个空文件。

# javascript - 选择 div 孩子

> ID：10164128
> 
> 赞同：-4
> 
> 时间：2012-04-15T17:00:47.987
> 
> 标签：javascript, jquery

我想使用 jquery 选择一个 div 的孩子。我尝试使用 children() 但没有用

```
<div class="main" id="this_456" onclick="change(456)">

 <div id="title">some text</div>

 <div id="body">some text as well</div>

</div> 
```

javascript

```
function change(id)
{
$('#this_'+id).children("#body").fadeOut();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T17:06:58.510

如果您指定`456`为参数而不是`this_456`（请参阅：http: [//jsfiddle.net/aLxTz/](http://jsfiddle.net/aLxTz/)），则您的代码有效。

但是，由于`<div id="body"/>`由 ID ( `#body`) 标识，因此在内部和其他元素中查找它是多余的 - 它应该在文档范围内是唯一的。`class=""`如果您希望有多个主体实例，请使用该属性`<div/>`，例如`<div class="body">...</div>`.

此外，请注意`onclick`处理程序将`this`变量设置为上下文元素。由于这是有问题的元素本身，您可以编写

```
<div class="main" id="this_456"> ... </div>

$(".main").click(function() {
  $(this).chlidren(".body").fadeOut();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T17:19:15.873

```
<div class="main" id="this_456" onclick="change(this)">
 <div id="title">some text</div>
 <div id="body">some text as well</div>
</div>

function change(elm) {
   $(elm).children("#body").fadeOut();
} 
```

[小提琴](http://jsfiddle.net/adeneo/Wzf75/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T17:04:24.787

试试这个代码：

```
function change(id) {
    $('#this_'+id+ ' > div').find("#body").fadeOut();
} 
```

# windows - 如何调整 SVN 设置以在 Windows 上转换行尾？

> ID：10164132
> 
> 赞同：9
> 
> 时间：2012-04-15T17:00:52.740
> 
> 标签：windows, svn, eol

我需要在 Windows 上使用 SVN，并希望将其设置为始终以 Windows 样式签出行结尾并始终以 Unix 样式提交，无论使用哪个存储库。

1.  这是可能的还是我必须为每个仓库编写一个配置文件？

    如果我必须为每个 repo 编写一个配置文件，我应该把它放在哪里，正确的文件名是什么，文件中的内容以及它对 repo 的其他用户有什么影响？

2.  我对全局 SVN 配置文件进行了以下更改，但没有效果。我还需要做什么？或者我是否必须使用某些特定参数调用 SVN 才能使更改在 Windows 上生效？

    ```
    enable-auto-props = yes
    [auto-props]
    *.c = svn:eol-style=native
    *.cpp = svn:eol-style=native
    *.cxx = svn:eol-style=native
    *.h = svn:eol-style=native
    *.hpp = svn:eol-style=native
    *.hxx = svn:eol-style=native
    *.txt = svn:eol-style=native
    *.tex = svn:eol-style=native
    *.bib = svn:eol-style=native 
    ```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-15T17:08:01.063

您需要为存储库中的所有文件设置`svn:eol-style`属性。`native`Autoprops 将为新添加到存储库的文件设置属性，但对于现有文件，您需要手动添加属性：

```
svn propset svn:eol-style native example.c
svn commit 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T21:37:51.097

[Daniel Roethisberger](https://stackoverflow.com/users/1249950/daniel-roethlisberger)已经给了你[正确的答案](https://stackoverflow.com/a/10164193/368630)。但是，您可能希望以某种方式确保所有文件都`svn:eol-style`设置为 `native.

我有一个[预提交钩子](https://stackoverflow.com/a/10164193/368630)，可以确保在允许提交之前将`svn:eol-style`属性设置为所有相关文件。`native`您可能需要查看它以确保您的政策得到遵守。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2014-07-23T18:37:29.963

这个命令行 android 工具对我有用：

```
cd <install_dir>/adt-bundle-mac-x86_64-20140702/sdk/tools
./android list target 
```

确保为下面的`--target`开关选择上面列出的目标。

```
./android create project --target 1 --name MyFirstApp \
  --path ~/projects/android/MyFirstApp --activity MainActivity \
  --package com.example.myfirstapp 
```

这记录在[https://developer.android.com/training/basics/firstapp/creating-project.html](https://developer.android.com/training/basics/firstapp/creating-project.html)

然后打开eclipse，导入上面创建的项目。

# javascript - C Node Native Extension调用方法两次

> ID：10164135
> 
> 赞同：2
> 
> 时间：2012-04-15T17:01:09.303
> 
> 标签：javascript, c++, c, node.js

所以我对 C 语言相当陌生，并且正在开发一个简单的 Node Native 扩展。

这是我的扩展名为 helloworld.c 的代码

```
Handle<Value> Method(const Arguments& args) {
  printf(":%s:\n", "Calling Method");
  //SendByte(bdrate,'1');
  HandleScope scope;
  if(toggleLight()==0){
    printf(":%s:\n", "Turning On");
    return scope.Close(String::New("Turned On"));
  }
  else{
printf(":%s:\n", "Turning Off");
return scope.Close(String::New("Turned Off"));
  }
}

void init(Handle<Object> target) {
  printf(":%s:\n", "Init");
  target->Set(String::NewSymbol("hello"),
      FunctionTemplate::New(Method)->GetFunction());
}
NODE_MODULE(helloworld, init) 
```

我通过以下 Node.js 类使用前一个...

```
var addon = require('./build/Release/helloworld');

var http = require("http");

http.createServer(function(request, response) {
  response.writeHead(200, {"Content-Type": "text/plain"});
  response.write(addon.hello());
  response.end();
}).listen(8888); 
```

当我调用该站点时，我在终端中看到以下内容

```
~/Desktop/hellonode$ node testnode
:Init:
:Calling Method:
:Turning Off:
:Calling Method:
:Turning On: 
```

为什么它似乎调用了两次该方法？我确信答案很明显，但我看不到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T17:55:41.423

这有点重复。这不是您的扩展程序中的错误，而是您的 HTTP 代码中的问题。

看：

*   [简单的http服务器](https://stackoverflow.com/questions/6973226/simple-http-server)
*   [node.js页面刷新两次调用资源？](https://stackoverflow.com/questions/8283801/node-js-page-refresh-calling-resources-twice)

基本上，您的浏览器正在请求两个 url`/`和`/favicon.ico`，并且由于您没有检查 URL，它会在两个请求上运行您的扩展代码。

# python - 正则表达式匹配函数名和 Python 中的所有参数

> ID：10164137
> 
> 赞同：9
> 
> 时间：2012-04-15T17:01:39.410
> 
> 标签：python, regex

假设我有一个字符串，如下所示：

```
"func(arg1, arg2, arg3, arg4, ..., argn)" 
```

编辑：此功能不是某种特定语言。它只有这种格式。如果它更容易，不要将其视为函数调用，只是一个字符串。

我想编写一个正则表达式来匹配函数和**每个**参数。我正在用 Python 写这个。所需的输出是：

```
{"function" : "func", "arg" : ["arg1", "arg2", ... , "argn"]} 
```

编辑：虽然参数可以是函数调用，但一旦我创建了一个有效的正则表达式，我就可以轻松地递归地尝试将它们与相同的正则表达式匹配。我的意思是我可以用每个参数递归函数。但这并不重要。我**不是**想创建一个解释器，只是为了识别这些论点。

这是我的尝试：

```
import re
s = "func(arg1, arg2, arg3, arg4, argn)"
m = re.match(r"(?P<function>\w+)\s?\((?P<args>(?P<arg>\w+(,\s?)?)+)\)", s)
print m.groupdict() 
```

这是输出：

```
{'function': 'func', 'args': 'arg1, arg2, arg3, arg4, argn', 'arg': 'argn'} 
```

该函数匹配得很好，参数集也是如此。但是，我似乎无法匹配各个论点。这是我的正则表达式的问题，还是 Python 正则表达式匹配的限制？

EDIT2：我知道我现在可以使用以下代码拆分参数：

```
d["arg"] = d["args"].split(", ") 
```

但我想知道我是否可以用正则表达式完成整个工作。特别是，我想知道为什么“arg”只匹配最后一个参数。

EDIT3：我想我（1）希望弄清楚为什么 Python 每次只匹配最后一个参数，以及（2）我是否可以在 Python 中进行 Scheme 样式的模式匹配。或者，如果 Python 中有一些与 Scheme 样式的模式匹配一​​样直观的东西。我查看了 ast 模块，它的语法非常复杂。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-15T17:21:58.163

正则表达式无法解析复杂的编程语言。

如果您只是想解析 Python，我建议您查看[ast](http://docs.python.org/library/ast.html)模块，它会为您解析它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-15T17:38:40.690

看起来你有 90% 在那里，为什么不交换`arg`和`args`分组并做：

```
import re

fn_match = re.match(r"(?P<function>\w+)\s?\((?P<arg>(?P<args>\w+(,\s?)?)+)\)", s)
fn_dict = fn_match.groupdict()
del fn_dict['args']
fn_dict['arg'] = [arg.strip() for arg in fn_dict['arg'].split(',')] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T00:33:02.830

回答你问题的最后一部分：不。Python 没有任何类似于 Scheme 的“匹配”的东西，也没有像 ML/Haskell 这样的模式匹配。它最接近的是能够像这样解构事物

```
>>> (a, [b, c, (d, e)]) = (1, [9, 4, (45, 8)])
>>> e
8 
```

并像这样提取列表的头部和尾部（在 Python 3.x 中）......

```
>>> head, *tail = [1,2,3,4,5]
>>> tail
[2, 3, 4, 5] 
```

虽然有一些模块在 python 中进行真正的模式匹配，但我不能保证它们的质量。

如果我必须这样做，我会以不同的方式实现它——也许能够输入类型和可选参数（例如长度或确切内容）以及在匹配时调用的函数，例如 match([list , length=3, check=(3, str), func]) 这将匹配 (list _ _ somestr) 并在范围内使用 somestr 调用 func，您还可以添加更多模式。

# c# - 从 VSTO Outlook 插件打开 WPF 表单

> ID：10164140
> 
> 赞同：9
> 
> 时间：2012-04-15T17:01:41.283
> 
> 标签：c#, wpf, vsto

我在 Thisaddin.cs 中有这段代码

```
public void Search(string input)
{           
    ServerList listofservers = new ServerList();            
    listofservers.Visibility;                    
} 
```

这`ServerList`是一个带有列表框的简单 WPF 表单，但如何显示`listofservers`？

我找不到`listofserver.show();`

![在此处输入图像描述](../Images/a57a416bc7e5932f0bd5fae6508fefce.png)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-16T13:32:01.657

所以首先没有名为 WPF Form 的项目，只有 WPF 的用户控件。因此，一旦在 XAML 中创建 WPF UserControl，您就会注意到这是代码

```
<UserControl x:Class="SQL_openertak2.ServerList"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" d:DesignHeight="454" d:DesignWidth="259" SizeToContent="WidthAndHeight">
    <Grid>
        <ListBox Height="410" HorizontalAlignment="Left" Margin="12,12,0,0" Name="listBox1" VerticalAlignment="Top" Width="242" />
        <Button Content="Button" Height="23" HorizontalAlignment="Left" Margin="12,427,0,0" Name="button1" VerticalAlignment="Top" Width="75" Click="button1_Click" />
    </Grid>
</UserControl> 
```

所以我查看了 XAML 代码。所以你可以看到整个事情是**USERCONTROL** 你必须将它更改为**WINDOW**然后你将能够看到**.Show()**

但请注意，您还必须更改 xaml.cs 中的代码

因为默认情况下会是这样

```
public partial class ServerList : UserControl 
```

将其更改为

```
public partial class ServerList : Window 
```

原因很明显！！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-04T21:35:14.757

您还可以将其托管在[布局面板](https://msdn.microsoft.com/en-us/library/bb384314%28v=vs.110%29.aspx)中，例如：

1.  在 Windows 窗体设计器中打开 Form1。
2.  在工具箱中，将 TableLayoutPanel 控件拖到 for
3.  在 TableLayoutPanel 控件的智能标记面板上，选择 Remove Last Row。
4.  将 TableLayoutPanel 控件的大小调整为更大的宽度和高度。
5.  在工具箱中，双击 UserControl1 以在 TableLayoutPanel 控件的第一个单元格中创建 UserControl1 的实例。
6.  UserControl1 的实例托管在名为 elementHost1 的新 ElementHost 控件中。
7.  在工具箱中，双击 UserControl1 以在 TableLayoutPanel 控件的第二个单元格中创建另一个实例。
8.  在“文档大纲”窗口中，选择 tableLayoutPanel1。有关详细信息，请参阅文档大纲窗口。
9.  在“属性”窗口中，将 Padding 属性的值设置为 10、10、10、10。
10.  两个 ElementHost 控件都调整大小以适应新布局。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-13T11:46:32.753

如已在 XAML 和 c# 类中回答的那样，使用**Window**更改**UserControl 。**

 **请记住，在通常基于 Windows 窗体的 VSTO 应用程序中，务必记住将 System.XAML 添加到引用中，否则您可能会在编写窗体布局时遇到错误。

正如我最近经历的那样，这可能发生在 VS2015 中，向导过程没有按预期工作，缺少更新类引用。

这里有一些参考：['Window' 类型不支持直接内容](https://stackoverflow.com/questions/33805234/the-type-window-does-not-support-direct-content)**

# css - CSS3 3D webkit 问题

> ID：10164150
> 
> 赞同：2
> 
> 时间：2012-04-15T17:02:30.950
> 
> 标签：css, webkit, css-transitions, css-transforms

我在这里为我的问题创建了一个小提琴[http://jsfiddle.net/aakashgoel/ZcF4N/](http://jsfiddle.net/aakashgoel/ZcF4N/)

3D 渲染在 Mozilla Firefox 中运行良好，但在 Google Chrome 中失败。Chrome 不支持其中使用的哪些属性？

编辑：预期结果：单击框“1”将其翻转。它应该更改为 2，背景为蓝色。

编辑：这是 chrome 输出的内容： ![铬渲染。](../Images/d3927b267b28d20d5fca68b2e80ed866.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T23:46:22.300

目前谷歌浏览器还没有实现完整的 CSS3 模块。透视不起作用，它只是一个“伪”3d 实现。像 translate3d 或 rotate3d 这样的 3d 道具只能在 X 和 Y 轴上工作，而不能在 Z 轴上工作。您的示例仅适用于最新的 Firefox 和 Safari（也适用于 Webkit 作为 Chrome）。

# php - PHP 回显功能未按预期工作

> ID：10164156
> 
> 赞同：0
> 
> 时间：2012-04-15T17:03:05.120
> 
> 标签：php, wordpress, wordpress-theming

我是 PHP 和 WordPress 的新手，目前正处于学习阶段。我正在尝试在我的 WordPress 站点 URL 中附加主机名，以便我可以随时更改主机名，这就是我想要做的事情

```
<?php
   $site="siteurl";
   $home="home";
?> 
```

这就是我想要在我的 php 页面中做的事情

```
<link rel="stylesheet" href ="<?php echo get_cdn($site_cdn); ?>/wp-
content/themes/abc/scripts/fancybox/jquery.fancybox-1.3.4.css" 
type="text/css" /> 
```

这是我的`get_cdn()`功能

```
function get_cdn($cdn_name){
 if ($cdn_name="home" || $cdn_name="siteurl"){
     return "http://id.cloudfront.net";
  }
  else{
     return $cdn_name;
  }
} 
```

所以我想做的是，如果传递给函数的值是`home`or `siteurl`，它将返回亚马逊 CDN 服务器的 URL，所以根据我的理解，上面的脚本应该是

```
<link rel="stylesheet" href ="http://id.cloudfront.net/wp-
    content/themes/abc/scripts/fancybox/jquery.fancybox-1.3.4.css" 
    type="text/css" /> 
```

但这即将到来

```
http://localhost/wordpress/id.cloudfront.net/wp-content/themes/abc/scripts/fancybox/jquery.fancybox-1.3.4.css 
```

我不确定为什么会发生这种情况，这方面的任何帮助/指针都会有所帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T17:10:03.463

`if($cdn_name == "home" || $cdn_name == "siteurl"){`

要将两个值相互匹配，请使用 $a == $b。两个“=”就是。在 PHP 中，=== 也会匹配数据类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T17:10:56.923

`$site_cdn`您发送的参数是什么，请先检查。

看起来你正在发送一个空参数，所以你的`get_cdn`函数返回一个空字符串，你的 src 属性就像

```
src="/wp-content/themes/abc/scripts/fancybox/jquery.fancybox-1.3.4.css" 
```

并且由于您没有指定任何主机，因此 html 从您的本地主机获取 css

# php - MySQL order-by 原“where order”

> ID：10164157
> 
> 赞同：1
> 
> 时间：2012-04-15T17:03:20.153
> 
> 标签：php, mysql, sql-order-by

我有这个按顺序排列的问题，我无法破解。我从我的表中选择这样的：

```
SELECT * FROM 'sidemodules' WHERE name = 'module1' OR name = 'module2' OR 'name3' 
```

它返回了我想要的模块。但是模块位于桌子上，按以下顺序说：

1.  模块3
2.  模块1
3.  模块2

它们按此顺序归还给我。我怎样才能让它们按照`WHERE`条款 (1,2,3) 中的顺序显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T17:06:31.453

我想你正在寻找[`FIELD`](http://dev.mysql.com/doc/refman/5.6/en/string-functions.html#function_field)：

```
SELECT * FROM sidemodules
WHERE name IN ('module1', 'module2', 'name3')
ORDER BY FIELD(name, 'module1', 'module2', 'name3') 
```

无论如何，如果名称按字母顺序排列，请使用：

```
ORDER BY name 
```

另请注意，使用`IN`运算符通常比仅使用 many 更快`OR`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T17:18:59.820

您需要按子句顺序使用 FIELD。returnset 将与您编写的顺序相同。

```
SELECT * FROM sidemodules
WHERE name IN ('module1', 'module2', 'name3')
ORDER BY FIELD(name, 'module1', 'module2', 'name3') 
```

结果：模块1，模块2，名称3

```
SELECT * FROM sidemodules
WHERE name IN ('module1', 'module2', 'name3')
ORDER BY FIELD(name, 'module2', 'module1', 'name3') 
```

结果：模块2，模块1，名称3

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T17:06:58.510

我认为您的问题中有错字。您的最后一个条件应该`name = 'module3'`是`name3`

请尝试以下方法：

```
SELECT * 
FROM 'sidemodules' 
WHERE name = 'module1' OR name = 'module2' OR name = 'module3'
ORDER BY name; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T17:08:56.550

如果您有固定订单，您可以使用 CASE 语句订购：

```
SELECT * FROM 'sidemodules' 
WHERE name = 'module1' 
  OR name = 'module2' 
  OR name = 'module3'
ORDER BY CASE
  WHEN name = 'module1' THEN 1
  WHEN name = 'module3' THEN 2
  WHEN name = 'module2' THEN 3
 ELSE '0'
END 
```

# backbone.js - 骨干网没有响应路由

> ID：10164159
> 
> 赞同：1
> 
> 时间：2012-04-15T17:03:42.307
> 
> 标签：backbone.js, coffeescript

我一定会失去它。我已经设置了最简单的 Backbone 应用程序，但似乎无法获得响应的路线。这是我的路由器（在咖啡脚本中）：

```
class BackboneSupport.Routers.TicketsRouter extends Backbone.Router
  initialize: ->
    @tickets = new BackboneSupport.Collections.TicketsCollection()

  routes:
    "/new"      : "newTicket"
    ".*"        : "index"

  newTicket: ->
    alert 'hi, from the new ticket route'

  index: ->
    // just to prove a point
    $('#tickets').html('tickets go here')
    @navigate('/new') 
```

我让整列火车移动：

```
<div id="tickets"></div>

<script type="text/javascript">
  $(function() {
    window.router = new BackboneSupport.Routers.TicketsRouter();
    Backbone.history.start();
  });
</script> 
```

如您所料，根路由（索引）填充`#tickets`占位符文本并成功导航到 /new 路由（通过地址栏确认），但是，它不会发出任何警报，这意味着该`newTicket`方法没有被触发。

我在这里想念什么？

**更新：**

根据下面的 rjz，我将导航方法更新为：

```
@navigate('/new', {trigger: true}) 
```

但奇怪的是，仍然没有警报：/

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T17:15:59.783

你不应该在你的路线中有前导斜杠，你想要这个：

```
class BackboneSupport.Routers.TicketsRouter extends Backbone.Router
  routes:
    "new": "newTicket"
    ".*" : "index"
  #... 
```

演示：http: [//jsfiddle.net/ambiguous/veSDF/1/](http://jsfiddle.net/ambiguous/veSDF/1/)

来自[精美手册](http://documentcloud.github.com/backbone/#Router-extend)：

> **延长** `Backbone.Router.extend(properties, [classProperties])`
> 
> [...] 请注意，您需要避免在路由定义中使用前导斜杠：

# php - ajax 调用无法加载更新列信息的 php 脚本

> ID：10164164
> 
> 赞同：0
> 
> 时间：2012-04-15T17:04:26.400
> 
> 标签：php, javascript, mysql, ajax

我对进入数据库并更新一行信息的 php 脚本进行了 ajax 调用。如果我在浏览器中输入我想要更改的提供的信息的链接，那么它可以正常工作而不会出现问题。我有几个 ajax 调用设置方式与这个相同，它们都可以正常工作。无法弄清楚为什么这个对 php 脚本的 ajax 调用没有做任何事情。

javascript调用：

```
function updateInfo(userID, email, username, password){
    var validGT;
    var xmlHttp = new XMLHttpRequest();
    xmlHttp.onreadystatechange=function()
    {
        if(xmlHttp.readyState==4){
            if (xmlHttp.status == 200){
                validGT = xmlHttp.responseText;
                    if(validGT == "Success!"){
                        var error = document.getElementById("update-error-message");
                        error.innerHTML = "Updated!";
                    }else{
                        var error = document.getElementById("update-error-message");
                        error.style.color = "Red";
                        error.innerHTML = "error occured";
                    }
            }
        }
    }
    xmlHttp.open("GET", "updateInfo.php?userID=" + userID + "&email=" + email + "&gamertag=" + gamertag + "&password=" + password, true);
    xmlHttp.send();
} 
```

php脚本：

```
****connect to database and such****
$userID = $_GET{"userID"};
$email = $_GET{"email"};
$username = $_GET{"username"};
$password = $_GET{"password"};

if($password != "null"){
    mysql_query("UPDATE users SET email='$email', username='$username', password='$password' WHERE uid='$userID'") or die(mysql_error());
    echo "Success!";
}else{
    mysql_query("UPDATE users SET email='$email' AND username='$username' WHERE uid='$userID'") or die(mysql_error());
    echo "Success!";
}

mysql_close($con); 
```

我从 ajax 调用中得到回复说“成功！” 但是它实际上并没有对数据库中的信息做任何事情。我使用 firebug 来确保信息被正确传递，并且确实如此。所以我在这里不知所措。怎么了？有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T17:10:17.440

else 语句中的 SQL UPDATE 语法不正确，您使用的是 AND 而不是逗号

```
"UPDATE users SET email='$email', username='$username' WHERE uid='$userID'" 
```

在旁注中，您还通过 $_GET 接受来自请求的数据，并且在针对数据库运行数据之前您没有清理该数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T17:07:43.787

这看起来很奇怪

```
$userID = $_GET["userID"];
$email = $_GET["email"];
$username = $_GET["username"];
$password = $_GET["password"]; 
```

如果这没有帮助，请尝试调试/回显查询以查看发生了什么

也改变

```
mysql_query("UPDATE users SET email='$email' AND username='$username' WHERE uid='$userID'") or die(mysql_error()); 
```

至

```
mysql_query("UPDATE users SET email='$email', username='$username' WHERE uid='$userID'") or die(mysql_error()); 
```

但由于您从未收到任何 sql 错误，因此密码似乎一直为“null”

# javascript - JSON 自动完成 ASP.NET Jquery UI

> ID：10164167
> 
> 赞同：0
> 
> 时间：2012-04-15T17:04:46.543
> 
> 标签：javascript, jquery, asp.net, json, jquery-ui

我创建了一个 Web 服务，它基本上是我的应用程序中一组操作的一组 json 值。这个想法是它将从 MongoDB 集合返回一组键/值。到目前为止，返回值有点像：

```
 {"d":"[{\"label\":\"Add A Customer\",\"value\":\"\/EdCustomer\/\"},{\"label\":\"View Suppliers\",\"value\":\"\/Suppliers\/\"},{\"label\":\"Add A Customer\",\"value\":\"\/EdCustomer\/\"}]"} 
```

我有以下 Javascript/JQuery 以使其与作为 JQuery UI 一部分的自动完成一起工作：

```
 var commands;
   var commandstest = [
  {
     value: "test1",
     label: "test1"
  },
  {
    value: "test2",
    label: "test2"
  }
 ];
  $(document).ready(function () {
     //The search button
    $("#btnCmdSearch")
     .button()
     .click(function () {
        alert("You searched for " + txtSearch.value);
    });

$.ajax({
  url: "http://localhost:50305/SearchCommands.svc/GetCommands",
  dataFilter: function (data) {
    var msg = eval('(' + data + ')');

    if (msg.hasOwnProperty('d'))
      return msg.d;
    else
      return msg;
  },
  success: function (data) {
     commands = data;
  }
});

//The search Box AutoComplete...
$("#txtSearch").autocomplete({
  source:commands,
  minLength: 2,
});

}); 
```

有趣的是，当我在自动完成方法的源代码中使用 commandstest 时，它按预期工作。如果我使用命令（json 数组），那么什么也不会发生。我查看了chrome，我得到了错误：

```
 Uncaught TypeError: Property 'source' of object #<Object> is not a function 
```

如果我将 var 命令的声明更改为：

```
 var commands = new Array(); 
```

然后此错误消息不会出现，但自动完成仍然没有任何反应。我到底做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T17:16:55.607

我认为 source 需要是一个回调函数，它返回一个响应

IE

```
$("#txtSearch").autocomplete({
  source: function(request, response){ response(commands); },
  minLength: 2,
}); 
```

如果 tats 不起作用，请回复，然后我会仔细研究一下。

# java - 将地图视为用户定义的基础

> ID：10164177
> 
> 赞同：0
> 
> 时间：2012-04-15T17:06:07.487
> 
> 标签：java

我开发了一个名为 Employee.java 的 pojo。现在我打算把它作为用户定义的集合。我想制作一张地图并将所有员工类型的对象存储在其中。

下面是我的pojo

```
 public class Employee {     
     String name,job;
     int salary;

     public Employee(String n , String j, int t ) //constructor
     {
         this.name= n;
         this.job=j;
         this.salary= t; 

     } 

     @Override
     public int hashCode()
     {       
         return name.hashCode()+job.hashCode()+salary;       

     }
     @Override
        public boolean equals(Object obj) {  

         Employee e = (Employee) obj;   
         return this.name.equals(e.name)&&this.job.equals(e.job)&&this.salary==e.salary;
     }

} 
```

现在我开发了另一个类，其中包含地图并将存储员工类型对象..

```
 public static void main(String[] args)
        {           
        Map employeeMap = new HashMap();
        Employee e = new Employee("Saral", "Trainer", 34000);
        Employee e1 = new Employee("Sarall", "saral", 34090);
        employeeMap.put("S", e);
        employeeMap.put("S1", e);
        System.out.println(employeeMap.size());
        Set s = employeeMap.entrySet();

        Iterator it = s.iterator();
        while(it.hasNext())
        {           
            Map.Entry m =(Map.Entry)it.next();
            System.out.println(m.getKey()+"\t"+m.getValue());

        } 
```

但是当我尝试运行它时，我想获取员工详细信息，但我在屏幕上显示了对象...我想查看员工值，请告诉我如何从员工对象中获取值。

```
2
S   CollectionsPrac.Employee@285c2854
S1  CollectionsPrac.Employee@285c2854 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T17:09:56.363

您需要覆盖`toString`Employee 类中的方法，例如：

```
public String toString() {
    return name + " [" + job + "] - salary: " + salary;
} 
```

顺便说一句，您可以替换：

```
 Iterator it = s.iterator();
    while(it.hasNext())
    {           
        Map.Entry m =(Map.Entry)it.next();
        System.out.println(m.getKey()+"\t"+m.getValue());

    } 
```

和

```
System.out.println(s.toString()); 
```

除非您真的希望输出是制表符分隔的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T17:09:36.300

您需要覆盖`toString()`Employee 的方法

```
@Override pulic String toString() {
    return name + " " + job;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T17:23:10.243

首先。您的哈希码已损坏。尝试运行这个：

```
 System.out.println("Should be false: " + (new Employee("Sara", "Trainer", 1).hashCode() == new Employee("Trainer", "Sara", 1).hashCode())); 
```

如果您正在使用 IDE（如 eclipse），则有一个函数可以自动生成 equals 和 hashcode 方法，您会得到如下内容：

```
@Override
public int hashCode() {
    final int prime = 31;
    int result = 1;
    result = prime * result + ((job == null) ? 0 : job.hashCode());
    result = prime * result + ((name == null) ? 0 : name.hashCode());
    result = prime * result + salary;
    return result;
}

@Override
public boolean equals(Object obj) {
    if (this == obj)
        return true;
    if (obj == null)
        return false;
    if (getClass() != obj.getClass())
        return false;
    Employee other = (Employee) obj;
    if (job == null) {
        if (other.job != null)
            return false;
    } else if (!job.equals(other.job))
        return false;
    if (name == null) {
        if (other.name != null)
            return false;
    } else if (!name.equals(other.name))
        return false;
    if (salary != other.salary)
        return false;
    return true;
} 
```

至于你的主要方法..你应该尝试学习一些关于泛型的基础知识（<>里面的东西）。一开始你不需要详细的细节。只需学习如何将它与列表和地图一起使用。它会让您的生活更轻松。尤其是因为您的使用和 IDE...

这是您的主要方法的重构版本：

```
public static void main(String[] args)
    {           
        Map<String, Employee> employeeMap = new HashMap<String, Employee>();
        Employee e = new Employee("Saral", "Trainer", 34000);
        Employee e1 = new Employee("Sarall", "saral", 34090);
        employeeMap.put("S", e);
        employeeMap.put("S1", e1);
        System.out.println(employeeMap.size());
        Set<Entry<String, Employee>> entrySet = employeeMap.entrySet();
        for (Entry<String, Employee> entry: entrySet) {
            System.out.println(entry.getKey()+"\t"+entry.getValue().name);
        }

        System.out.println("Should be false: " + (new Employee("Sara", "Trainer", 1).hashCode() == new Employee("Trainer", "Sara", 1).hashCode()));
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T17:09:47.377

改变这个

```
Iterator it = s.iterator();
while(it.hasNext())
{           
  Map.Entry m =(Map.Entry)it.next();
  Employee empl = (Employee) m.getValue();
  System.out.println(m.getKey()+"\t"+empl.name);
} 
```

正如你可以看到的线

```
Employee empl = (Employee) m.getValue(); 
```

该值被“强制转换”到一个`Employee`对象，您可以开始使用`empl`变量并使用所有`Employee`类方法和成员。

# c# - 可以处理 WP7.1 中的所有 MouseMove 事件吗？

> ID：10164188
> 
> 赞同：1
> 
> 时间：2012-04-15T17:07:14.583
> 
> 标签：c#, silverlight, windows-phone-7, event-handling, mouse

是否可以获得任何 MouseMove 事件的通知，即使是那些标记为已处理的事件？我有以下 Xaml：

```
<Grid x:Name="ParentContainer">
  <ScrollViewer>
    ...
  </ScrollViewer>
</Grid> 
```

我的目标是获取 ScrollViewer 上的所有 MouseMove 事件，或类似 ParentContainer 之类的合理接近的事件，*而无需*在 ScrollViewer 上设置 ManipulationMode="Control" 以获得最佳性能。

在 ScrollViewer 上设置 ManipulationMode="Control" 时，在 ParentContainer（或 ScrollViewer）上处理 MouseMove 有效，但在 ManipulationMode="System" 时无效。听起来像是在提高 Mango 的性能，ScrollViewer 开始吞下 MouseMove 事件以提高性能。但是，我希望能够获得这些已处理的事件，如下所示：

```
ParentContainer.AddHandler(???.MouseMoveEvent, MyMouseMoveHandler, true); 
```

在 Silverlight 或 WPF 中，我希望该代码将所有鼠标事件路由到 MyMouseMoveHandler，甚至处理事件。不幸的是，我找不到要传递给 AddHandler 的 MouseMoveEvent 的静态定义。

有没有人在 WP7 中使用 AddHandler 和 MouseMoveEvent 成功？

我最后的手段可能是在 ScrollViewer 顶部添加一个具有 Background="Transparent" 的叠加层，它将捕获所有鼠标事件，但不将它们标记为已处理，并查看它们是否向下传播到 ScrollViewer。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T23:22:00.337

在 Windows Phone OS 7.1 中，进行了更改以专门改进 ScrollViewer 控件的滚动。为此，他们必须将触摸手势的侦听移至单独的线程。这意味着控件如何监听手势的架构级别发生了变化。在 Windows Phone 7.1 中，现在有 3 个线程负责滚动 ScrollViewer：一个用于输入，一个用于动画，一个用于创建新项目。

由于此更改，您将无法从此控件捕获已处理的鼠标事件，除非您将 ManipulationMode 设置为 Control。正如您在问题中所述，这将禁用为提高滚动性能所做的更改。

您不能期望适用于非 Windows Phone Silverlight 的解决方案会在这种情况下工作，因为从 Windows Phone 7.1 开始的手机上的底层架构根本不同。

这是微软关于这一变化的博客文章：http: [//blogs.msdn.com/b/slmperf/archive/2011/06/02/listbox-scrollviewer-performance-improvement-for-mango-and-how-it-impacts -你的现有应用程序.aspx](http://blogs.msdn.com/b/slmperf/archive/2011/06/02/listbox-scrollviewer-performance-improvement-for-mango-and-how-it-impacts-your-existing-application.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T03:42:49.740

在用户触摸屏幕时，可以使用 Touch.FrameReported 事件来接收通知，而不是寻找鼠标事件。此事件针对 ManipulationMode == System 的 ScrollViewer 报告。这似乎是 WP7 上全局 MouseMove 处理程序的合适解决方法。

[http://msdn.microsoft.com/en-us/library/system.windows.input.touch.framereported(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.windows.input.touch.framereported(v=vs.95).aspx)

# c++ - 一般程序布局的好资源（最好是 Python 或 C++）

> ID：10164189
> 
> 赞同：1
> 
> 时间：2012-04-15T17:07:14.880
> 
> 标签：c++, python, user-interface, structure

所以我可以用类做一些 C++ 控制台的东西（我认为没什么太花哨的），然后从 Python（很棒的语言，就像 C++ 没有后顾之忧）和 Tkinter 开始。

问题是我真的不知道带有 GUI 的程序通常是如何构造的。我知道您必须将界面与内部工作分开，但仅此而已。作为一个例子，我正在开发一个将 Excel 表转换为 LaTeX 表的小应用程序，到目前为止我有这个：

```
from Tkinter import *

class ExcelToLateX:
    def __init__(self,master):
        self.convert = Button(master,text="Convert",command=self.Conversion)
        self.convert.pack(side=BOTTOM,fill=X)
        self.input=Input(master,40)
        self.output=Output(master,40)
    def Conversion(self):
        self.output.Write(self.input.Read())

class Input:
    def __init__(self,master,x):
        self.u=Text(master,width=x)
        self.u.pack(side=LEFT)
        self.u.insert(1.0,"Paste Excel data here...")

    def Read(self):
        return self.u.get(1.0,END)

class Output:
    def __init__(self,master,x):
        self.v=Text(master,width=x)
        self.v.pack(side=RIGHT)
        self.v.insert(1.0,"LaTeX code")
    def Write (self,input):
        self.input=input
        if self.v.get(1.0,END)=="":
            self.v.insert(1.0,self.input)
        else:
            self.v.delete(1.0,END)
            self.v.insert(1.0,self.input)

#Test script
root=Tk()
Window=ExcelToLateX(root)
root.mainloop() 
```

所以我有两个可以读取和写入内容的 Text 小部件和一个（目前）空转换类，它将获取 Excel 表格并输出 LaTeX 代码。我不知道这是否是要走的路（因此感谢任何评论/提示）。

所以简而言之，我有两个问题：

*   是否有任何广为人知的来源提供有关具有 GUI 的程序的结构的信息？（最好是 Python 和 Tkinter，因为这就是我正在做的事情，尽管它可能更通用（跨语言））

*   我当前的应用程序在结构方面有什么好处，如果没有，有哪些经验法则和我可以改进的地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T17:58:16.710

我只想对帽子发表一些简短的评论。我没有使用 Tkinter 的经验，所以我的知识来源于 PyQt4 的经验。

现在，您正在通过将单个小部件作为成员属性来为您的类使用组合。这显然可以工作，但一个有用的模式是子类化一个 GUI 小部件，然后通过添加更多子小部件和为该类添加父级来组成布局。请参阅我发现的这个随机 Tkinter 教程链接上的示例：http: [//zetcode.com/tutorials/tkintertutorial/](http://zetcode.com/tutorials/tkintertutorial/)

```
class Example(Frame):
    def __init__(self, parent):
        super(Example, self).__init__(parent)
        ... 
```

就像一般的 Python 约定一样，您应该尝试对类名使用大写，对类实例方法和变量使用 camelCase 或 under_score。正如您所拥有的那样，您将大写字母用于实例 ( `Window =`) 和方法 ( `Write`)

此外，如果您不打算继承 Tkinter 小部件，请确保至少通过从以下子类继承来使用新式类`object`：[http ://realmike.org/blog/2010/07/18/introduction-to-new -style-classes-in-python/](http://realmike.org/blog/2010/07/18/introduction-to-new-style-classes-in-python/)

您可能还希望将代码的最后一部分嵌套在经典 python 习语中运行事件循环的位置：

```
if __name__ == "__main__":
    root=Tk()
    window = ExcelToLateX(root)
    root.mainloop() 
```

如果您将此模块作为库导入另一个应用程序，它会阻止您的应用程序立即执行。

# mysql - #1064 错误信息

> ID：10164192
> 
> 赞同：0
> 
> 时间：2012-04-15T17:07:48.820
> 
> 标签：mysql, phpmyadmin, mysql-error-1064

创建表时出错

MySQL 说：

```
1064 - You have an error in your SQL syntax; check the manual that corresponds
to your MySQL server version for the right syntax to use near 
'mysql_query("CREATE TABLE " . DB_TABLE_PREFIX . "mssgs (
id mediumint(5) unsig' at line 1 
```

* * *

```
mysql_query("CREATE TABLE " . DB_TABLE_PREFIX . "mssgs (
      id mediumint(5) unsigned NOT NULL auto_increment,
      uid tinyint(3) unsigned NOT NULL default '0',

      m tinyint(2) NOT NULL default '0',
      d tinyint(2) NOT NULL default '0',
      y smallint(4) NOT NULL default '0',
      start_time time NOT NULL default '00:00:00',
      end_time time NOT NULL default '00:00:00',
      title varchar(50) NOT NULL default '',
      text text NOT NULL,
      PRIMARY KEY  (id)
    ) TYPE=MyISAM") or die(mysql_error());

    mysql_query("create index m on " . DB_TABLE_PREFIX . "mssgs (m)");
    mysql_query("create index y on " . DB_TABLE_PREFIX . "mssgs (y)");

    mysql_query("CREATE TABLE " . DB_TABLE_PREFIX . "users (
      uid smallint(6) NOT NULL auto_increment,
      username char(15) NOT NULL default '',
      password char(32) NOT NULL default '',
      fname char(20) NOT NULL default '',
      lname char(30) NOT NULL default '0',
      userlevel tinyint(2) NOT NULL default '0',
      email char(40) default NULL,
      PRIMARY KEY  (uid)
    ) TYPE=MyISAM") or die(mysql_error());

    mysql_query("INSERT INTO " . DB_TABLE_PREFIX . "users 
        (username, password, fname, lname, userlevel, email) VALUES (
        'admin', 'password', 'default', 'user', 2, '');
    ") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T17:14:20.627

看起来您正在尝试在 phpadmin 中执行上面的代码。

但这不是纯 SQL。它也是 PHP 代码，不会在 PHPAdmin 中运行。

您需要执行 之间的代码`"`并用值填补空白。像那样

```
CREATE TABLE mssgs (
  id mediumint(5) unsigned NOT NULL auto_increment,
  uid tinyint(3) unsigned NOT NULL default '0',
  m tinyint(2) NOT NULL default '0',
  d tinyint(2) NOT NULL default '0',
  y smallint(4) NOT NULL default '0',
  start_time time NOT NULL default '00:00:00',
  end_time time NOT NULL default '00:00:00',
  title varchar(50) NOT NULL default '',
  text text NOT NULL,
  PRIMARY KEY  (id)
) ENGINE=MyISAM; 
```

# wpf - 扩展器标题文本对齐

> ID：10164194
> 
> 赞同：5
> 
> 时间：2012-04-15T17:08:16.753
> 
> 标签：wpf, xaml, layout, expander

因此，我将扩展器的方向更改为垂直对齐而不是水平对齐，但在关闭状态下，扩展器标题文本水平对齐。请告诉我有一种方法可以轻松解决此问题而无需表情混合等。

```
<Expander Header="My Header"> 
```

我希望像`AlignHeaderText`垂直这样的东西，但我看不到它的选择？有没有人有不同的方式可以“展示”我？

因此，如果我想出了这个，请从指导 HB 那里获取：

```
 <StackPanel Orientation="Horizontal" Margin="0,0,342,0" Width="318">
            <StackPanel.Triggers>
                <EventTrigger RoutedEvent="Expander.Expanded" SourceName="expander1">
                    <EventTrigger.Actions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation From="0" To="1.2" Duration="0:0:0.45" Storyboard.TargetName="content" Storyboard.TargetProperty="(FrameworkElement.LayoutTransform).(ScaleTransform.ScaleX)"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger.Actions>
                </EventTrigger>
            </StackPanel.Triggers>
            <Expander ExpandDirection="Right" Name="expander1" OpacityMask="#6C806969" Background="#FF807171">
                <Expander.LayoutTransform>
                    <RotateTransform Angle="90"></RotateTransform>
                </Expander.LayoutTransform>
                <Expander.Header>
                    <TextBlock
                   Text="HEADER"
                   Width="{Binding
                    RelativeSource={RelativeSource
                      Mode=FindAncestor,
                      AncestorType={x:Type Expander}},
                    Path=ActualWidth}"
                  />
                </Expander.Header>
                <Grid x:Name="content" Background="#FF807171" Width="178">
                    <Grid.LayoutTransform>
                        <ScaleTransform ScaleX="0" ScaleY="1"/>
                    </Grid.LayoutTransform>
                </Grid>

            </Expander> 
```

不幸的是，它对扩展器这样做：

![在此处输入图像描述](../Images/26eadccdf5bcddeac60c5e09126c776f.png)

它将文本放在顶部，按钮放在中间，我希望按钮放在顶部，按钮后面的文本？

如果我更改`Path=ActualWidth`为`Height`按钮向上移动但标题文本仍然在按钮的左侧而不是在它的下方？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-03-23T09:49:13.470

我的解决方案（没有其他属性） - 基于**HB**和**Sheikh Neyamat 的**答案：

```
<Expander ExpandDirection="Right">
  <Expander.Header>
    <TextBlock Text="Header">
      <TextBlock.LayoutTransform>
        <RotateTransform Angle="90"/>
      </TextBlock.LayoutTransform>
    </TextBlock>
  </Expander.Header>
  // Content - listbox in my case
</Expander> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T17:10:48.607

通过[元素语法](http://msdn.microsoft.com/en-us/library/ms788723.aspx#property_element_syntax)分配 a `TextBlock`as并将 a作为's应用以获取旋转。如果您想要[可以以不同方式完成的](https://stackoverflow.com/questions/349875/vertical-text-in-wpf-textblock)垂直文本。`Header`[`RotateTransform`](http://msdn.microsoft.com/en-us/library/system.windows.media.rotatetransform.aspx)`TextBlock`[`LayoutTransform`](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.layouttransform.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-02T13:07:40.577

[这里](https://social.msdn.microsoft.com/Forums/vstudio/en-US/00ec727b-9e70-4fb5-a835-17705db28e6b/expander-with-header-that-is-vertical)有一个支持上述建议的例子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-13T10:42:51.457

您还需要设置 ExpandDirection 属性并在标题模板中设置旋转。

在折叠时翻转方向的样式下方

```
<StackPanel Orientation="Horizontal">
    <StackPanel.Resources>
        <Style TargetType="Expander">
            <Style.Triggers>
                <Trigger Property="IsExpanded" Value="False">
                    <Setter Property="HeaderTemplate">
                        <Setter.Value>
                            <DataTemplate>
                                <TextBlock Text="{Binding}">
                                    <TextBlock.LayoutTransform>
                                        <RotateTransform Angle="90"/>
                                    </TextBlock.LayoutTransform>
                                </TextBlock>
                            </DataTemplate>
                        </Setter.Value>
                    </Setter>
                    <Setter Property="ExpandDirection" Value="Right"/>
                </Trigger>
            </Style.Triggers>
            <Setter Property="BorderBrush" Value="DarkGray"/>
            <Setter Property="Margin" Value="1,0,1,1"/>
            <Setter Property="Padding" Value="2"/>
            <Setter Property="VerticalContentAlignment" Value="Top"/>
        </Style>
    </StackPanel.Resources>
    <Expander Header="Command Data">
        <!-- some content -->
    </Expander>
    <Expander Header="Line Status">
        <!-- some content -->
    </Expander>
</StackPanel> 
```

# mysql - 在 Dreamhost 上安装 sphinx

> ID：10164200
> 
> 赞同：0
> 
> 时间：2012-04-15T17:09:01.340
> 
> 标签：mysql, sphinx, dreamhost

我正在关注本教程：[http ://hughevans.net/2009/03/10/thinking-sphinx-dreamhost](http://hughevans.net/2009/03/10/thinking-sphinx-dreamhost)

我在运行时遇到了一个问题：

```
./configure --prefix=$HOME/local/ --exec-prefix=$HOME/local/ 
```

我收到一个错误：“找不到 MySQL 包含文件。”

我已经检查并找不到 mysql_config，所以我猜测 mysql-devel 包没有安装。

我的下一步是从源代码安装 mysql-devel 包，但我想我可能会遗漏一些东西。

有没有人找到解决这个问题的方法？

（我使用的是 VPS）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T10:58:42.210

> 我的下一步是从源代码安装 mysql-devel 包

为什么要从源头上？

建议只使用包管理器来安装包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T14:59:37.780

我通过使用具有 root 访问权限的其他用户解决了我的问题。

我用那个用户安装了带有 APT 的 sphinx。

```
sudo apt-get install sphinxsearch 
```

# bash - 如何在不输入密码的情况下从命令行自动生成 htpasswd？

> ID：10164201
> 
> 赞同：25
> 
> 时间：2012-04-15T17:09:08.327
> 
> 标签：bash, .htpasswd

我正在尝试从命令行自动创建密码。我已经尝试了以下方法，但它仍然不断要求输入密码。

```
echo "test101" | htpasswd -c ~/temp/password admin 
```

如何在`htpasswd`不输入密码的情况下从命令行生成自动化？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-04-15T17:12:16.940

为什么不直接使用：

```
htpasswd -b -c ~/temp/password admin test101 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2018-10-05T09:58:11.483

如果您没有`htpasswd`安装（例如使用 nginx 时），您可以使用 openssl 生成密码。

```
printf "USER:$(openssl passwd -crypt PASSWORD)\n" >> .htpasswd 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-04-15T17:13:08.080

开关应该可以解决问题，`-b`但密码仍然可以通过进程列表（`ps`等）对系统上的其他用户可见：

```
htpasswd -b -c ~/temp/password admin test101 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-05-04T11:49:51.670

从 htpasswd 的手册页我们得到：

> -i 从标准输入读取密码而不进行验证（用于脚本使用）。

因此，根据您的问题，这样的事情应该可以工作：

```
echo "test101" | htpasswd -c -i ~/temp/password admin 
```

But the password will be visible in history and process list.

To automate creating a password from the command line i would write the plain password to a file and do something like that:

```
htpasswd -c -i ~/temp/password admin < ~/temp/pass_plain 
```

Afterwards delete the pass_plain file.

Also make sure the pass_plain file is not readable by anyone else, also if its just there for a few seconds.

# cakephp-2.1 - $this->data 和 $this->request->data 之间的区别？

> ID：10164203
> 
> 赞同：6
> 
> 时间：2012-04-15T17:09:15.007
> 
> 标签：cakephp-2.1

`$this->data`在 cakephp 2.1和之间有什么区别`$this->request->data`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T09:06:35.880

`$this->data`一直使用到 cakephp 1.3

`$this->request->data``$this->data`从 cakephp 2.x 开始替换了数组。

为了向后兼容`$this->data`，也仍然支持。

`$this->request`表示`CakeRequest`对象，可在 和`Controller`中`Views`访问`Helpers`。

欲了解更多信息：[http ://book.cakephp.org/2.0/en/controllers/request-response.html](http://book.cakephp.org/2.0/en/controllers/request-response.html)

# php - DOMXPath 获取查询的第一个值

> ID：10164212
> 
> 赞同：1
> 
> 时间：2012-04-15T17:10:37.040
> 
> 标签：php, domxpath

考虑到您只搜索一个特定的值，是否可以直接获得唯一的第一个结果而不用 foreach 解析结果？像这样：

```
$elements = $dom_xpath->query('//span[@id="loginName"]');

echo $elements->firstNode->nodeValue; // this doesn't exist of course 
```

html代码是

```
<div>
  <div id="name">text<span id="loginName">Me</span></div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T18:10:31.080

如果您需要检索该`<span>`元素内的纯文本字符串，即`"Me"`，您可以使用`evaluate`代替`query`：

```
$xp->evaluate('string(//span[@id="loginName"])') 
```

这可能是您正在寻找的更多内容。它返回：

```
string(2) "Me" 
```

可能这很有帮助，否则，[乔恩写](https://stackoverflow.com/a/10164228/367456)的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T17:12:15.257

如果你*确定*会有匹配，你可以使用

```
echo $dom_xpath->query('//span[@id="loginName"]')->item(0)->nodeValue; 
```

# ruby - 如何缓存输出？（如 php 中的 ob_start() ）

> ID：10164216
> 
> 赞同：1
> 
> 时间：2012-04-15T17:10:54.480
> 
> 标签：ruby

如何缓存“puts”和“print”结果，并将其保存到变量中。喜欢`ob_start()`和`ob_get_contents()`在 php.ini 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T17:15:24.547

有些人可能会发布巧妙的解决方案，这些解决方案利用了我不熟悉的 ruby​​ 标准库的一部分。我只能给你这个肮脏的小猴子补丁：

```
module Kernel
  alias_method :old_puts, :puts

  def puts txt
    @cached_output ||= ''
    @cached_output += "#{txt}\n"
    old_puts txt
  end

  def cached_output
    @cached_output
  end
end

puts 'foo'
puts 'bar'
cached_output # => "foo\nbar\n" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T17:38:19.757

```
require 'stringio'

save_so, $stdout = $stdout, StringIO.new(' ', 'w')
puts 'how now brown cow'
my_so, $stdout = $stdout, save_so

p [:saved_result, my_so.string]
puts 'and this works once again' 
```

# html - Ajax html Domparser

> ID：10164218
> 
> 赞同：0
> 
> 时间：2012-04-15T17:11:00.340
> 
> 标签：html, xml, ajax

我在一个 html 文档中有一些 ajax 代码，它将按钮的文本更改为存储在同一域中另一个 html 文档中的文本。文本在第二个 html 文档的 body 标记中。像这样：

```
<body> Text</body> 
```

因此代码发出 ajax 请求，解析响应以创建 xmldoc。当我尝试使用

```
getElementByTagName("body") or even getElementByTagName("html") 
```

我得到一个空的 HTMLcollection。但是当我使用

```
queryselector("body") I can get to the text. The log to console prints undefined. 
```

这是完整的代码：

```
function gettxt()
 {
var xmlhttp;
if (window.XMLHttpRequest)
  {
  xmlhttp=new XMLHttpRequest();
  }
else
  {
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
  xmlhttp.open("GET", "http://localhost/ajax2.html", true);  
xmlhttp.onreadystatechange = function() 
{
  if (xmlhttp.readyState === 4) {  
    if (xmlhttp.status === 200) 
    { 
      allText = xmlhttp.responseText;   
    var parser = new DOMParser();
    var xmlDoc = parser.parseFromString(allText, "application/xml");            
    var bodyobj=xmlDoc.getElementsByTagName("body");
    console.log(bodyobj.lemgth);                        
      document.getElementById("secbtn").value=bodyobj;        
    }
  }
}

xmlhttp.send(null);

} 
```

我错过了什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T18:44:31.640

我知道我做错了什么。我将按钮的文本设置为 bodyobj 而不是 bodyobj[0].innerHTML。

# android - 我可以更改主活动的名称吗？

> ID：10164219
> 
> 赞同：3
> 
> 时间：2012-04-15T17:11:09.733
> 
> 标签：android, android-layout

主活动视图的布局定义的名称是否总是必须是主的，或者我可以更改它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T17:16:52.973

`MainActivity`是的，您可以在 android中更改类的名称。但也要在`AndroidManifest.xml`文件中更改它的名称。

您还可以将布局名称从 更改`main.xml`为`*.xml`。无论你想要什么。这取决于如何在项目中命名文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T17:13:02.880

您可以更改它，但在 xml 名称和`R.layout.*`( `setContentView`)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T17:12:02.867

您可以根据需要更改它。默认情况下它将是 main.xml，您可以随意更改它。你也改变它活动 setcontentview(R.layout.newname);

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-12T21:34:36.187

只需使用重构（shift+f6）即可轻松更改名称。并检查调试是否做得好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-07-20T20:23:53.040

是的，你可以通过在android studio中打开java文件的目录来更改MainActivity的名称，右键单击它并找到refactor，然后重命名，输入你喜欢的名称然后单击refactor。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-26T15:15:39.813

如下重命名 Android Activity：右键单击 .java 文件并重构重命名。然后验证 AndroidManifest.xml 以确保具有新名称。

# javascript - 使用 Javascript 创建自定义查找

> ID：10164220
> 
> 赞同：0
> 
> 时间：2012-04-15T17:11:17.093
> 
> 标签：javascript, dynamics-crm-2011, crm

此代码在 4.0 中工作，2011 年，当我尝试设置查找的值时，出现“initializelookuppresence”错误

4.0 代码

```
lookupCell.innerHTML = '<TABLE style="table-layout: fixed" class="ms-crm-Lookup" cellspacing="0" cellpadding="0" width="100%"><TBODY><TR><TD><DIV class="ms-crm-Lookup" tabindex="1011" role="list" ime-mode="auto" ms-crm-hidden-nobehavior><UL style="float: left"></UL></DIV><LABEL class="ms-crm-Hidden-NoBehavior" for=' + id + '_ledit>Related Entity</LABEL><INPUT style="display: inline"  id='+ id +'_ledit class=ms-crm-Hidden-NoBehavior disabled tabIndex=1010 ime-mode="auto"></TD><TD class=Lookup_RenderButton_td width=25><IMG style="ime-mode: auto" id=' + id + ' class="ms-crm-Lookup ms-crm-ImageStrip-btn_off_lookup" title="Click to select a value for Company." alt="Click to select a value for Company." src="/_imgs/imagestrips/transparent_spacer.gif" savedquerytype="" forfield=' + label + ' isDisplayOnly="False"  resolveemailaddress="0" disableviewpicker="0" disablequickfind="0" disablemru="0" allowfilteroff="1" AutoResolve="1" additionalparams=""  defaulttype="2" lookupstyle="single" lookupbrowse="0" lookuptypeIcons="/_imgs/ico_16_2.gif:/_imgs/ico_16_8.gif" lookuptypenames="contact:2:Contact,systemuser:8:User" lookuptypes="2,8" attrpriv="7"  req="1" _lookupstyle="single" _lookuptypes="2,8" _lookupbrowse="0"><A title="Click to select a value for Company." tabIndex=-1 onclick=previousSibling.click(); href="#"></A></TD></TR></TBODY></TABLE>'; 
```

有人在 2011 年成功尝试过吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T03:13:51.247

我认为您需要以下内容

`Xrm.Page.getAttribute(“fieldName”).setValue([new {id: idValue, name: textValue, entityType: typeValue}]);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T14:12:05.517

您正在完全替换查找控件。它在 2011 年没有使用与 4.0 中相同的 HTML 呈现。不支持对这些控件的 HTML 进行任何处理。但是，我在那里看到了一些实体查找类型的覆盖......我猜这就是你想要实现的目标，对吗？实现这一点的（也是不受支持的）方法是覆盖元素的属性（而不是整个控件）。

> document.getElementById("parentcustomerid").setAttribute("lookuptypes","2");
> document.getElementById("parentcustomerid").setAttribute("lookuptypenames", "contact:2"); document.getElementById("parentcustomerid").setAttribute("lookuptypeIcons", "/_imgs/ico_16_2.gif"); document.getElementById("parentcustomerid").setAttribute("defaulttype", "2");

我发现[Rhett 的帖子中的评论](http://bingsoft.wordpress.com/2011/01/13/default-customer-lookup-to-contact-in-crm-2011/)对于更多细节非常有用。

希望有帮助。

# android - 使用NDK编译的Android rtsp客户端收不到任何UDP包

> ID：10164222
> 
> 赞同：0
> 
> 时间：2012-04-15T17:11:33.507
> 
> 标签：android

我最近为 android 编译了 ffmpeg 和 live555，并构建了我自己的媒体客户端包装器。整个系统在所有其他系统（windows 和 linux）中都能完美运行，但在 android 中却不行，只是无法接收到 UDP 数据包。RTSP 通信工作正常，它使用 TCP 连接。会话成功启动，并在服务器中继续运行。在搜索了类似的主题后，我发现我似乎必须首先获得 wifi 的多播权限。所以我做了：
**- 将权限放入 AndroidManifest.xml**

```
<uses-permission android:name="android.permission.CHANGE_NETWORK_STATE""/>  
<uses-permission android:name="android.permission.INTERNET"/>  
<uses-permission android:name="android.permission.CHANGE_WIFI_MULTICAST_STATE"/> 
```

**- 将以下java代码放入android Activity::onCreate()**

```
WifiManager wm = (WifiManager)getSystemService(Context.WIFI_SERVICE);  
if( wm != null ) {  
    mMCLock = wm.createMulticastLock( TAG );  
    mMCLock.acquire();  
} 
```

但它仍然不起作用，在模拟器、Galaxy S2 Phone 和 Galaxy Tab 10.1 中的结果都是一样的。即使我停用了live555模块，只使用ffmpeg（ffmpeg也有其内置的rtsp客户端，但不如live555稳定，因此我将live555移植到android中）。结果是一样的，rtsp ok，rtp not，其中rtp使用udp作为底层载体。

在 DDMS 中注册了一个错误：
***协议不支持地址系列***

我认为，问题在于 UDP 端口仍然被阻塞。对于在 android 的用户内核中运行的本机代码，在 java 中获取多播锁可能是不够的。

有人有想法吗？

史蒂文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T15:53:45.123

meinem RTSP客户端的UDP问题已经解决，与权限和组播锁无关。这是 android-ndk-r7 和 android-ndk-r8 都提供的 android stl 库实现中的错误。任何想使用 gnu-libstdc++.so 的人都必须记住：不要使用字符串，尤其是 string::c_str()，它会在堆栈中留下危险指针，并损坏一切。在我扔掉与stl有关的所有事情之后，一切正常，tcp和udp。题外话：live555内部至少有20个bug，最致命的错误是：他们使用unblocked rtp over tcp，因此，大多数数据包在到达网络接口之前就丢失了，而在rtsp客户端， rtp/tcp 套接字永远不会收到在网络接口中丢失的数据包，然后一个 rtsp 会话进入无限接收循环，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T06:13:05.823

我遇到了同样的问题。

我认为，在你的绑定中，你正在竞标一个 IP，使用`htonl(INADDRY_ANY)`as `s_addr`。

不确定这是否有助于您的事业，但它似乎解决了我的问题。

# ehcache - EhCache 的更新 (timeToLive) 政策如何运作？

> ID：10164223
> 
> 赞同：0
> 
> 时间：2012-04-15T17:11:34.793
> 
> 标签：ehcache

当我设置 timeToLiveSeconds="100" 意味着 EhCache 引擎将重置所有缓存或仅重置存活 100 秒的元素？

我已经阅读了 EhCache 的文档，它往往是第一种方法，顺便说一下，我对此并不完全确定：

> timeToLiveSeconds 这是一个可选属性。
> 
> 合法值是介于 0 和 Integer.MAX_VALUE 之间的整数。
> 
> 它是元素自创建以来应该存在的秒数。Created 意味着使用 Cache.put 方法插入到缓存中。
> 
> 0有一个特殊的含义，就是不检查Element的存活时间，即它会永远存活。
> 
> 默认值为 0。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T07:54:54.443

**它只会**重置元素。签出源代码。getExpirationTime() 方法属于 Element 类。

[http://grepcode.com/file/repo1.maven.org/maven2/net.sf.ehcache/ehcache-core/2.5.0/net/sf/ehcache/Element.java#Element.getExpirationTime%28%29](http://grepcode.com/file/repo1.maven.org/maven2/net.sf.ehcache/ehcache-core/2.5.0/net/sf/ehcache/Element.java#Element.getExpirationTime%28%29)

# ruby-on-rails - 在方法中使用关系回调时出错

> ID：10164225
> 
> 赞同：0
> 
> 时间：2012-04-15T17:11:55.813
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我想通过关联对与另一个模型（：查询）相关的模型属性（：测试）进行只读访问`has_many`。

当我创建和关联一个新的:query 时，我可以获得关联的:test 对象来保存，但是我不能在“before_create”方法中使用该关联的:test 属性。

根据我在[API 文档](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)中阅读的内容，我应该能够使用关联方法 ( `@test = @query.test.whatever`) 来使用“whatever”属性，但是当我尝试运行该代码时出现以下错误`private method 'test' called for nil:NilClass`：

:query 与关系中的 :test`belongs_to`相关...

我试过 @test = @query.test.build 在我的方法中实例化测试对象，但这也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T17:20:58.977

您只是遇到了名称冲突。Ruby 中的每个对象都有其私有方法`test`。

# c# - 这些 javascript 包含定义是否有区别

> ID：10164230
> 
> 赞同：2
> 
> 时间：2012-04-15T17:12:22.937
> 
> 标签：c#, javascript, asp.net-mvc

两者都包含相同的文件。两者都有效，但是否有任何优势偏向于另一个？

```
<script type="text/javascript" src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")"></script> 

<script type="text/javascript" src="~/Scripts/jquery.validate.unobtrusive.min.js"></script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T15:25:59.387

在第一种情况下，Url.Content 将相对路径转换为应用程序绝对路径

在第二种情况下，字符串被认为是文字，输出的链接将包含 ~/. 在大多数情况下，这不起作用，因为它会在当前目录下查找名为 ~ 的文件夹。

但是在 asp.net mvc 4 中，剃刀视图引擎会看到 ~/ 并自动为您执行 Url.Content。

[http://www.davidhayden.me/blog/asp.net-mvc-4-the-new-tilde-slash-feature-in-razor-2](http://www.davidhayden.me/blog/asp.net-mvc-4-the-new-tilde-slash-feature-in-razor-2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T17:23:02.640

我相信第一个工作量很少，因为编译器会找到`@Url.Content`并调用该函数。

最终结果是一样的，但我认为第一步还有 2-3 步。不过，所有这些都将在 [毫纳] 秒内发生。

# performance - 稀疏矩阵乘法的特例

> ID：10164231
> 
> 赞同：2
> 
> 时间：2012-04-15T17:12:24.597
> 
> 标签：performance, algorithm, matrix, sparse-matrix, matrix-multiplication

我正在尝试提出快速算法来查找![洛杉矶](../Images/ce9566a14555c39b108f8f01f9ddfc8e.png)操作结果，其中

*   L - 是实数对称`n x n`矩阵。
*   A - 是稀疏`n x m`矩阵，`m < n`。每行有一个且只有一个非零元素，它等于1。还保证每一列最多有两个非零元素。

我想出了一种算法，但我觉得应该有比这更快的算法。

让我们将 A 的每一列表示为具有非零元素的行号对。如果一列只有一个非零元素，则其行号列出两次。例如对于以下矩阵

![稀疏矩阵示例](../Images/9c6ac1c6715f0fa9d671a80884059f30.png)

这种表示将是

`column 0: [0, 2]; column 1: [1, 3]; column 2: [4, 4]`

或者我们可以将其列为单个数组：`A = [0, 2, 1, 3, 4, 4];`现在，![L' = 洛杉矶](../Images/89d3d6c2484193bc01a4b2a703096f57.png)可以计算为：

```
for (i = 0; i < A.length; i += 2):
  if A[i] != A[i + 1]:
     # sum of two column vectors, i/2-th column of L'
     L'[i/2] = L[A[i]] + L[A[i + 1]] 
  else:
     L'[i/2] = L[A[i]] 
```

为了计算![L''=AtL'](../Images/ff1031ca14be307c5c00e20800b1f57c.png)，我们再做一次：

```
for (i = 0; i < A.length; i += 2):
  if A[i] != A[i + 1]:
    # sum of two row vectors, i/2-th row of L''
    L''[i/2] = L'[A[i]] + L'[A[i + 1]]
  else:
    L''[i/2] = L'[A[i]] 
```

这种方法的时间复杂度是 O(m *n + m* n)，空间复杂度（得到最终![洛杉矶](../Images/ce9566a14555c39b108f8f01f9ddfc8e.png)结果）是 O(n *n)。我想知道是否有可能*在空间和/或性能方面将其提高到 O(m m)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T18:10:35.160

第二个循环最多组合 2m 行 L'，因此如果 m 远小于 n，则将有几行 L' 从未使用过。

避免计算和存储这些未使用条目的一种方法是将您的第一个循环更改为一个函数，并且仅在需要时计算 L' 的各个元素。

```
def L'(row,col):
  i=col*2
  if A[i] != A[i + 1]:
    # sum of two column vectors, i/2-th column of L'
    return L[row][A[i]] + L[row][A[i + 1]] 
  else:
    return L[row][A[i]]

for (i = 0; i < A.length; i += 2):
  if A[i] != A[i + 1]:
    for (k=0;k<m;k++):
      L''[i/2][k] = L'(A[i],k) + L'(A[i + 1],k)
  else:
    for (k=0;k<m;k++):
      L''[i/2][k] = L'(A[i],k) 
```

这应该有空间和复杂度 O(m*m)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T18:30:31.643

操作`Transpose(A) * L`如下：

对于 A 的每一列，我们看到：

```
column 1 has `1` in row 1 and 3
column 2 has `1` in row 2 and 4
column 3 has `1` in row 5 
```

输出矩阵`B = Transpose(A) * L`有三行，它们等于：

```
Row(B, 1) = Row(A, 1) + Row(A, 3)
Row(B, 2) = Row(A, 2) + Row(A, 4)
Row(B, 3) = Row(A, 5) 
```

如果我们相乘`C = B * A`：

```
Column(C, 1) = Column(B, 1) + Column(B, 3)
Column(C, 2) = Column(B, 2) + Column(B, 4)
Column(C, 3) = Column(B, 5) 
```

如果您以算法方式完成此操作，您应该会实现与 Peter de Rivaz 所建议的非常相似的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T20:44:13.963

您的算法的时间复杂度是 O(n^2)，而不是 O(m*n)。L 的行和列的长度为 n，A 数组的长度为 2n。

如果 a[k] 是 A 的第 k 行有 1 的列，那么你可以写：

```
A[k,i] = δ(a[k],i) 
```

乘积 P = A^T*L*A 为：

```
P[i,j] = Σ(k,l) A^T[i,k]*L[k,l]*A[l,j]
       = Σ(k,l) A[k,i]*L[k,l]*A[l,j]
       = Σ(k,l) δ(a[k],i)*L[k,l]*δ(a[l],j) 
```

如果我们反过来看看L的元素发生了什么，我们看到L[k,l]被添加到P[a[k],a[l]]中，很容易得到O(m^ 2) 空间复杂度使用 O(n^2) 时间复杂度。

因为 a[k] 是为所有 k=0..n-1 定义的，所以我们知道 L 的每个元素都必须出现在乘积中的某个位置。因为 L 中有 O(n^2) 个不同的元素，所以你不能做得比 O(n^2) 时间复杂度更好。

# javascript - 这种链接在 JavaScript 中是否可行？

> ID：10164235
> 
> 赞同：0
> 
> 时间：2012-04-15T17:12:49.807
> 
> 标签：javascript, chaining

我正在开发一个类似于[elFinder](http://elfinder.org/)的文件管理器框架。我当前的代码工作正常，但现在我想让它看起来更好并添加链接（我不确定它是链接模式还是装饰模式）。

这是我想做的一个示例：

```
function UI() {}

UI.prototype.folders = function(){
    return [];
}

UI.prototype.folders.prototype.getSelectedFolder = function(){
   return {};
} 
```

调用`UI.folders()`应该返回一个文件夹对象数组。所以如果你打电话`UI.folders()`，你会得到类似的东西：

```
[
    Object { name="folder1", selected=false }, 
    Object { name="folder2", selected=false }, 
    Object { name="folder3", selected=true }
] 
```

调用`UI.folders().getSelectedFolder()`将过滤结果`UI.folders()`并返回：

```
Object { name="folder3", selected=true } 
```

这可能吗？在这种情况下说“链接”还是“装饰图案”是否正确？
如果不是 - 还有另一种更合适的方法吗？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T17:35:41.130

您问题中的代码不能反映正确的实现，但是要回答您的直接问题，是的，这...

```
UI.folders().getSelectedFolder() 
```

...将是方法链接的一个示例。

* * *

装饰器模式是不同的。如果您有一组方法，并且每个方法都应始终首先调用某个公共函数，则可以创建一个装饰器，该装饰器将返回一个函数，该函数首先调用公共函数，然后是实际的函数......

```
function foo() {
    console.log('I\'m foo, and I\'m first, and I was given these args:', arguments);
}

function decorateWithFoo(decorated) {
    return function () {
        foo.apply(this, arguments);
        decorated.apply(this, arguments);
    };
} 
```

* * *

所以你可以`decorateWithFoo`用来创建一个总是`foo`首先调用的函数......

```
 // create and decorate bar()
var bar = function(a,b) {
    console.log('I\'m bar, and I was called after "foo", and was given args:', a, b);
};
bar = decorateWithFoo(bar);

bar(123, 456); // this will first call `foo()`, then (the original) `bar()`. 
```

* * *

```
 // create and decorate baz()
var baz = function(a,b) {
    console.log('I\'m baz, and I was called after "foo", and was given args:', a, b);
};
baz = decorateWithFoo(baz);

baz(123, 456); // this will first call `foo()`, then (the original) `baz()`. 
```

一些语言内置了用于创建装饰器的语法。JavaScript 目前没有。

* * *

如果您发现自己以不同的方式使用装饰器，您可以创建另一个函数来设置初始装饰器功能......

```
function generateDecorator(decorator) {
    return function (decorated) {
        return function () {
            decorator.apply(this, arguments);
            decorated.apply(this, arguments);
        };
    };
} 
```

所以我们的原版`decoreateWithFoo`可以这样设置......

```
function foo() {
    console.log('I\'m foo, and I\'m first, and I was given these args:', arguments);
}

var decorateWithFoo = generateDecorator(foo); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T17:30:34.110

为了使其正常工作，您需要使您的文件夹方法成为一个函数，该函数返回一个从数组继承的对象。：

```
UI.prototype.folders = function(){
    // must return an object that inherits from an array
    // that has the additional methods on it you want like getSelectedFolder()
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T18:17:23.430

有几种不同的方法可以解决这个问题。主要目标是，当您调用一个函数时，您会得到一个对象/函数，它是具有不同属性的相同类型的对象。我不是原型使用的粉丝，所以我会这样做（这是解决它的一种方法）：

```
var FolderList = function ()
{
    var _folders = [];
    folders.pop({ name: "folder1", selected: false });
    folders.pop({ name: "folder2", selected: true });
    folders.pop({ name: "folder3", selected: false });

    // prevent other programers from changing _folders
    // which would break this, so just use a function
    this.folders = function ()
    {
        return _folders;
    }

    this.selectedFolders = function ()
    {
        var tmpFolders = [];
        for (var folderIndex = 0; 
             folderIndex < this._folders.length; 
             folderIndex++)
        {
            if (this._folders[folderIndex].selected)
            {
                tmpFolders.pop(_folders[folderIndex]);
            }
        }
        _folders = tmpFolders;
        return this;
    }

    this.addFolder = function (folder)
    {
        _folders.pop(folder);
        return this;
    }
};

var folderList = new FolderList();
folderList.selectedFolders()
          .addFolder({ name: "folder1", selected: false })
          .addFolder({ name: "folder3", selected: true })
          .selectedFolders();

// array of 2 objects, folder2 and folder3
var arrayOfSelectedFolder = folderList.folders(); 
```

# javascript - 在提交之前多次使用表单

> ID：10164236
> 
> 赞同：3
> 
> 时间：2012-04-15T17:13:02.833
> 
> 标签：javascript, jquery, django, forms, javascript-databinding

我是 JavaScript 新手，并试图找出执行以下操作的规范方法。

我有一个带有一些复选框和选择器的表单。假设复选框是音乐风格，选择器是人名。

我希望用户能够为多人选择音乐风格，然后提交包含所有数据的表单。

例如，用户可能首先勾选古典、爵士、摇滚和流行并选择“乔”，然后选择爵士、流行、乡村和电子乐并选择“简”。所以“提交人”和“提交表格”必须有两个不同的按钮。

我想：

1.  在表单下方填写名称列表及其选择的样式，以获取反馈
2.  允许用户随心所欲地使用表单，然后在最后提交所有数据

我觉得使用 jquery 和 JSON 是完美的，但我不确定使用什么搜索术语来弄清楚如何做到这一点。

如果重要，表单将由 Python 中的 Django 视图处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T17:24:44.697

您可以通过将 AJAX 用于提交人来实现此目的。你的工作流程应该是这样的：

1.  用户选择 Joe 和相应的音乐风格。
2.  用户点击“提交人”。[`jquery ajax()`](http://api.jquery.com/jQuery.ajax/)在此事件中，将人名 (Joe) 和所选音乐风格编码到 JSON 对象中，并通过 AJAX ( ) 请求将其传递给您的后端脚本。
3.  服务器端脚本执行它需要的任何处理。当它完成时，您的 AJAX 调用的成功处理程序将被调用。此时，您可能可以删除“Joe”，以便用户知道提交成功并且不再为 Joe 提交。
4.  为您表格中的所有其他人清洗、冲洗、重复。

PS - 当您通过 AJAX 将信息传递到后端时，您不必将其编码为 JSON。您可以将其作为标准 POST 请求发送。要将 Javascript 对象编码为 JSON，请使用[`JSON.stringify()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/stringify)

以上是这样做的一种方法，但是它不会像您在问题中提出的那样工作（继续收集数据 - 立即提交），要以这种方式工作，每次用户点击“提交人员”时，将数据添加到一个 Javascript 对象，但不要提交它。提交的数据将继续建立在一个 JS 对象中。

最后，当用户点击“提交表单”时，将数据字符串化并提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T21:45:35.533

使用 django form-wizard 怎么样.. 就够了吗？[https://docs.djangoproject.com/en/dev/ref/contrib/formtools/form-wizard/](https://docs.djangoproject.com/en/dev/ref/contrib/formtools/form-wizard/)

# html - 旋转后运动未按预期工作

> ID：10164241
> 
> 赞同：0
> 
> 时间：2012-04-15T17:13:31.163
> 
> 标签：html, canvas, translate

我有一个画布，可以在其中处理图像、移动、旋转和缩放。在我尝试结合所有转换之前，一切正常。例如，我根据用户鼠标移动的差异来移动图像，这没关系，但是如果我首先将图像旋转到 180 度，那么图像移动相对于鼠标移动是反转的。我该如何解决？

```
 ctx.clearRect(0, 0, 320, 580);
        ctx.save();
        ctx.translate(canvas.width / 2, canvas.height / 2);
        ctx.scale(scale, scale);
        ctx.rotate(toRad(angle));
        ctx.translate(-(canvas.width / 2), -(canvas.height / 2));
        ctx.drawImage(image, tx, ty, image.width, image.height);
        ctx.restore(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T23:51:10.117

如果可能，需要发布更多代码，但我相信问题与您的翻译有关。这是一个类似的例子，虽然移动不依赖于鼠标。

[现场演示](http://jsfiddle.net/loktar/v86rC/)

```
 // save the context
    ctx.save();
    // translate it to the objects x and y, basically your taking the canvas and moving it to each object.
    ctx.translate(box.x, box.y);
    // now rotate it
    ctx.rotate(box.angle);
    // -5 is half of the box width and height 0,0 is the boxes location, im drawing it at half the width and height to set the rotation origin to the center of the box.
    ctx.fillRect(-5,-5, 10,10); 
    // now restore
    ctx.restore(); 
```

您`tx`和`ty`我假设来自鼠标坐标，因为您已经旋转了画布`tx`并且`ty`现在“旋转”了。

# ruby - Rubinius：如何以官方方式生成枚举器？

> ID：10164243
> 
> 赞同：3
> 
> 时间：2012-04-15T17:13:48.187
> 
> 标签：ruby, rubinius

我有这个简单的代码来生成一个惰性数组：

```
lazy_arr = Enumerator.new { |y|
    i = 1
    loop {
        y << i
        i+=1
    }
}
p lazy_arr.take(5) 
```

在官方 Ruby 1.9.3 中，输出是`[1,2,3,4,5]`，这就是我想要的。

但是在 Rubinius 中，它给出了错误并告诉我找不到 Enumerator 常量。

所以我查了一下，发现 Enumerator 定义在`Enumerable`module 而不是`kernel`，当它生成时，它需要括号中的几个参数： [http ://rubydoc.info/github/evanphx/rubinius/master/Enumerable/Enumerator](http://rubydoc.info/github/evanphx/rubinius/master/Enumerable/Enumerator)

我试图更改`Enumerator.new`为`Enumerable::Enumerator.new`, or `include Enumerable`, 都不起作用，因为它需要更多参数。

如何在 Rubinius 中执行上述示例？有什么办法可以让代码在官方和 Rubinius 中都能正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T20:48:46.743

您在 1.8 模式下使用 Rubinius，它在全局命名空间中没有 Enumerator。请在 1.9 模式下使用 Rubinius，然后示例运行良好。您可以通过在启动 Rubinius 时传递 -X19 或设置 RBXOPT=-X19 来使用 1.9。

也可以在编译期间使用 configure 将 1.9 模式设为默认模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T20:10:47.097

听起来像 Rubinius 中的错误/缺失课程。在 github 上打开一个问题，它将被添加。或者深入挖掘并发送拉取请求！

# c# - 自动法。无需特定注入即可解析基类属性

> ID：10164244
> 
> 赞同：0
> 
> 时间：2012-04-15T17:14:10.383
> 
> 标签：c#, dependencies, inversion-of-control, autofac, code-injection

我正在寻找以下可能的解决方案。

我有一个基类，它具有我目前使用属性注入来满足的依赖项。

```
public class BaseClass {
    IService SomeService { get; set; }
} 
```

我有多个从这个基类继承的类。

```
public class DerivedClass : BaseClass, IDerivedClass {

} 
```

我使用以下注入。

```
builder.RegisterType<DerivedClass>().As<IDerivedClass>().OnActivated(e => e.Instance.SomeService = e.Context.Resolve<IService>()); 
```

我为大约 12 个扩展基类的其他类执行此操作。有没有办法让任何扩展 BaseClass 的类在不为每个注册设置激活事件的情况下获得我的 IService 注册？它像这样工作正常，但只想清理注册。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T17:23:00.253

只需使用构造函数注入。为您的类创建带有参数的构造函数，例如

```
public DerivedClass(IServiceOne service1, IService2 service2)
{
this._service1 = service1;
this._service2 = service2;

} 
```

并让 autofac 自动完成他的工作，比如

```
builder.RegisterType<T>(); 
```

# flash - 制作相互连接的菜单链接

> ID：10164247
> 
> 赞同：0
> 
> 时间：2012-04-15T17:14:27.583
> 
> 标签：flash, actionscript, menu, hyperlink, connect

我有一堆菜单窗口放在单独的框架上（例如，主菜单在第 1 帧，选项菜单在第 2 帧，章节菜单在第 3 帧，字符菜单在第 4 帧等）。在每个菜单上都有一堆文本链接（电影剪辑实例），单击时会转到另一个菜单页面。其中一些相同的链接（相同的实例）在多个页面上重复，因为它们执行相同的功能。例如，单击“backToMain”实例将返回到第 1 帧，即主菜单，无论单击哪个页面。

有谁知道我如何构建这个？到目前为止，我已经尝试为每个链接添加侦听器，但是由于许多链接位于除第 1 帧之外的不同帧上，因此我无法向它们添加侦听器，直到我告诉 actionscript 翻转到该帧，我没有不想做。我想在开始时一次性向所有链接全局添加侦听器：

```
var linksArray:Array = [newStory, continueStory, options, characters, backToMain, backToOptions, ... etc];

for each (var link:MovieClip in linksArray) {
link.addEventListener(MouseEvent.CLICK, onClick);
}

function onClick(e:MouseEvent):void
            {
                if (e.target.name == "newStoryLink") {

                    delegate.beginStory();

                } else if (e.target.name == "continueStory") {

                    // do something else
                } else if (e.target.name == "chapters") {

                    // do something else
                } else if (e.target.name == "options") {

                    // do something else
                } 
```

上面的代码不起作用，因为如前所述，我无法将侦听器添加到其他帧上存在的实例。该代码基本上告诉 AS 在单击任何链接时要做什么，无论我在哪个框架上或单击该链接的哪个实例。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T19:22:32.980

这就是我对上述评论的意思。我刚刚在一个空的 Flash 文件中尝试了以下内容：

*   第一帧：空关键帧/一些内容
*   第 10 帧：带有名为“someButton”的按钮的关键帧

*   框架1：以下代码：

    ```
     import flash.events.MouseEvent;

            stage.addEventListener(MouseEvent.CLICK, onClick);

            function onClick(e:MouseEvent):void {

                if (e.target.name == "someButton")
                    trace("Button clicked");

            } 
    ```

而已。如果我单击第 10 帧上的按钮，则会出现该消息。

这是可行的，因为 Flash 使用冒泡事件模型，这意味着显示对象（例如按钮）上的大多数（任何？）事件也会传递给它们的父级，以及它们的父级等。所以最终，`CLICK`来自按钮的事件到达阶段，并由`onClick`事件处理程序处理。在那里，我们检查事件*源自*( `Event.target`) 的对象是否`name`等于`someButton`。

在我放置 的地方`trace`，您只需放置单击菜单项时的逻辑。这是您正在寻找的功能吗？

请注意，您不需要摆弄,等`stage`属性。只需使用上面的代码作为起点。`buttonMode``mouseChildren`

# c# - 无法获取页面的 HTML

> ID：10164259
> 
> 赞同：1
> 
> 时间：2012-04-15T17:15:46.440
> 
> 标签：c#, .net, exception-handling, httpwebrequest, web-scraping

我想为以下页面使用 HTTPWEBREQUEST 获取 HTML：

[http://inkdispatch.com/brother](http://inkdispatch.com/brother)

目前我正在使用：

```
 public static string getHTML(string url)
    {
        string responseData = "";
        try
        {
            //    System.Threading.Thread.Sleep(1000 * 1);
            HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
            request.Accept = "application/x-ms-application, image/jpeg, application/xaml+xml, image/gif, image/pjpeg, application/x-ms-xbap, application/vnd.ms-excel, application/vnd.ms-powerpoint, application/msword, */*";
            request.UserAgent = "Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E)";
            request.Timeout = 60000;
            request.AllowAutoRedirect = false;
            request.Method = "GET";
            request.Referer = "inkdispatch.com";
            request.CookieContainer = yummycookies;
            request.KeepAlive = true;

            HttpWebResponse response = (HttpWebResponse)request.GetResponse();
            if (response.StatusCode == HttpStatusCode.OK)
            {
                Stream responseStream = response.GetResponseStream();
                StreamReader myStreamReader = new StreamReader(responseStream);
                responseData = myStreamReader.ReadToEnd();
            }
            foreach (Cookie cook in response.Cookies)
            {
                yummycookies.Add(cook);
            }
            response.Close();
        }
        catch (Exception e)
        {
            responseData = "An error occurred: " + e.Message;
        }

        return responseData;

    } 
```

但我没有看到任何我得到的响应，没有错误只是说，永久移动，当我在浏览器中放置相同的链接时它可以工作。该链接附有一个令牌，但我确实从主页获得了它，仍然是同样的问题任何帮助。

> 更新

我刚刚设置：

```
 request.AllowAutoRedirect = true; 
```

但我得到错误：

```
 Too many automatic redirections were attempted.
   at System.Net.HttpWebRequest.GetResponse()
   at inkdispatchcomScraper.Program.getHTML(String url) 
```

我打开了提琴手，显示它一次又一次地点击链接：

```
 #   Result  Protocol    Host    URL Body    Caching Content-Type    Process Comments    Custom  
72  301 HTTP    inkdispatch.com /brother?zenid=00810c6a184e63149cdca848c7f02871 0   no-store, no-cache, must-revalidate, post-check=0, pre-check=0  Expires: Thu, 19 Nov 1981 08:52:00 GMT  text/html   inkdispatchcomscraper.vshost:4612           
73  301 HTTP    inkdispatch.com /brother?zenid=32cf6d38541a90658d39785b6cd64fbc 0   no-store, no-cache, must-revalidate, post-check=0, pre-check=0  Expires: Thu, 19 Nov 1981 08:52:00 GMT  text/html   inkdispatchcomscraper.vshost:4612           
74  301 HTTP    inkdispatch.com /brother?zenid=70d0d5eaa10175d74933ba00d47876f8 0   no-store, no-cache, must-revalidate, post-check=0, pre-check=0  Expires: Thu, 19 Nov 1981 08:52:00 GMT  text/html   inkdispatchcomscraper.vshost:4612           
75  301 HTTP    inkdispatch.com /brother?zenid=fa45c256a07a9450274269cfa4a4e64a 0   no-store, no-cache, must-revalidate, post-check=0, pre-check=0  Expires: Thu, 19 Nov 1981 08:52:00 GMT  text/html   inkdispatchcomscraper.vshost:4612           
76  301 HTTP    inkdispatch.com /brother?zenid=1fb7677a7e6ae0ca32a154ebcc42e043 0   no-store, no-cache, must-revalidate, post-check=0, pre-check=0  Expires: Thu, 19 Nov 1981 08:52:00 GMT  text/html   inkdispatchcomscraper.vshost:4612           
77  301 HTTP    inkdispatch.com /brother?zenid=39923f8100276b1c0fa5ccfb1f8d222c 0   no-store, no-cache, must-revalidate, post-check=0, pre-check=0  Expires: Thu, 19 Nov 1981 08:52:00 GMT  text/html   inkdispatchcomscraper.vshost:4612           
78  301 HTTP    inkdispatch.com /brother?zenid=fef228719b375ac012c4755793a0027a 0   no-store, no-cache, must-revalidate, post-check=0, pre-check=0  Expires: Thu, 19 Nov 1981 08:52:00 GMT  text/html   inkdispatchcomscraper.vshost:4612           
79  301 HTTP    inkdispatch.com /brother?zenid=5c2babf5e6b9b0834f605734441ba208 0   no-store, no-cache, must-revalidate, post-check=0, pre-check=0  Expires: Thu, 19 Nov 1981 08:52:00 GMT  text/html   inkdispatchcomscraper.vshost:4612           
80  301 HTTP    inkdispatch.com /brother?zenid=711bdefa3ca7cccebf63b9b8a3734be1 0   no-store, no-cache, must-revalidate, post-check=0, pre-check=0  Expires: Thu, 19 Nov 1981 08:52:00 GMT  text/html   inkdispatchcomscraper.vshost:4612           
81  301 HTTP    inkdispatch.com /brother?zenid=c55d1b6166994be1436c9473a1519abe 0   no-store, no-cache, must-revalidate, post-check=0, pre-check=0  Expires: Thu, 19 Nov 1981 08:52:00 GMT  text/html   inkdispatchcomscraper.vshost:4612           
83  301 HTTP    inkdispatch.com /brother?zenid=cc66424548f23c3c64b2e0054289283f 0   no-store, no-cache, must-revalidate, post-check=0, pre-check=0  Expires: Thu, 19 Nov 1981 08:52:00 GMT  text/html   inkdispatchcomscraper.vshost:4612           
84  301 HTTP    inkdispatch.com /brother?zenid=6f05f06093cd345d10ca729117994ac0 0   no-store, no-cache, must-revalidate, post-check=0, pre-check=0  Expires: Thu, 19 Nov 1981 08:52:00 GMT  text/html   inkdispatchcomscraper.vshost:4612           
85  301 HTTP    inkdispatch.com /brother?zenid=4a2ab4d3824c4850f544f28cd71bc1bb 0   no-store, no-cache, must-revalidate, post-check=0, pre-check=0  Expires: Thu, 19 Nov 1981 08:52:00 GMT  text/html   inkdispatchcomscraper.vshost:4612           
86  301 HTTP    inkdispatch.com /brother?zenid=6c9d0acd69fc22821014c7e3263da7b6 0   no-store, no-cache, must-revalidate, post-check=0, pre-check=0  Expires: Thu, 19 Nov 1981 08:52:00 GMT  text/html   inkdispatchcomscraper.vshost:4612           
87  301 HTTP    inkdispatch.com /brother?zenid=fff05b8df3a1488add36591a2687a830 0   no-store, no-cache, must-revalidate, post-check=0, pre-check=0  Expires: Thu, 19 Nov 1981 08:52:00 GMT  text/html   inkdispatchcomscraper.vshost:4612           
88  301 HTTP    inkdispatch.com /brother?zenid=b10facbe8bc9b9a355fe648649067f98 0   no-store, no-cache, must-revalidate, post-check=0, pre-check=0  Expires: Thu, 19 Nov 1981 08:52:00 GMT  text/html   inkdispatchcomscraper.vshost:4612           
89  301 HTTP    inkdispatch.com /brother?zenid=8b767c98491178e54d12b4e85ff02b2e 0   no-store, no-cache, must-revalidate, post-check=0, pre-check=0  Expires: Thu, 19 Nov 1981 08:52:00 GMT  text/html   inkdispatchcomscraper.vshost:4612           
90  301 HTTP    inkdispatch.com /brother?zenid=9f0b8cb119fee9a4e276bcae5f13772d 0   no-store, no-cache, must-revalidate, post-check=0, pre-check=0  Expires: Thu, 19 Nov 1981 08:52:00 GMT  text/html   inkdispatchcomscraper.vshost:4612           
91  301 HTTP    inkdispatch.com /brother?zenid=943076fabf058eb1316cfa86aadb1dec 0   no-store, no-cache, must-revalidate, post-check=0, pre-check=0  Expires: Thu, 19 Nov 1981 08:52:00 GMT  text/html   inkdispatchcomscraper.vshost:4612           
92  301 HTTP    inkdispatch.com /brother?zenid=8bd0335032a58b9c399706cd9c695901 0   no-store, no-cache, must-revalidate, post-check=0, pre-check=0  Expires: Thu, 19 Nov 1981 08:52:00 GMT  text/html   inkdispatchcomscraper.vshost:4612           
93  301 HTTP    inkdispatch.com /brother?zenid=a1ba5e21f0af2750d398484e063e8303 0   no-store, no-cache, must-revalidate, post-check=0, pre-check=0  Expires: Thu, 19 Nov 1981 08:52:00 GMT  text/html   inkdispatchcomscraper.vshost:4612           
94  301 HTTP    inkdispatch.com /brother?zenid=e704b2951b1d136c195fd02ad4abec93 0   no-store, no-cache, must-revalidate, post-check=0, pre-check=0  Expires: Thu, 19 Nov 1981 08:52:00 GMT  text/html   inkdispatchcomscraper.vshost:4612           
95  301 HTTP    inkdispatch.com /brother?zenid=6d606d0785f19c17ccb1868577a9d546 0   no-store, no-cache, must-revalidate, post-check=0, pre-check=0  Expires: Thu, 19 Nov 1981 08:52:00 GMT  text/html   inkdispatchcomscraper.vshost:4612 
```

> 另一个更新

我已经看到，当我在 IE 中打开它时，它使用重定向到 /brother 但在代码的情况下，它会得到另一个 ZENID ant 转发，并且这种情况一直在发生。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T17:17:09.893

放`request.AllowAutoRedirect = true;`

**编辑**

对于您的**第二个**问题，声明`yummycookies`如下。

```
public static string getHTML(string url)
{
   CookieContainer yummycookies = new CookieContainer();
   ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T20:00:56.043

当我尝试测试您的代码时，它失败了，但在另一个测试中我发现了以下错误“尝试了太多自动重定向”。

在更新代码并再次测试时，它在您提供的 url 上运行良好，html 正确获取。代码在这里。

```
public static string GetHtml2(string urlAddr)
{
    if (urlAddr == null || string.IsNullOrEmpty(urlAddr))
    {
        throw new ArgumentNullException("urlAddr");
    }
    else
    {
        string result;

        //1.Create the request object
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(urlAddr);
        //request.AllowAutoRedirect = true;
        //request.MaximumAutomaticRedirections = 200;
        request.Proxy = null;
        request.UseDefaultCredentials = true;

        //2.Add the container with the active
        CookieContainer cc = new CookieContainer();

        //3.Must assing a cookie container for the request to pull the cookies
        request.CookieContainer = cc;

        HttpWebResponse response = (HttpWebResponse)request.GetResponse();
        using (StreamReader sr = new StreamReader(response.GetResponseStream()))
        {
            result = sr.ReadToEnd();
            //Close and clean up the StreamReader
            sr.Close();
        }
        return result;
    }
} 
```

希望这会没事。

# c++ - 如何将未知大小的二维数组传递给函数

> ID：10164263
> 
> 赞同：18
> 
> 时间：2012-04-15T17:16:55.560
> 
> 标签：c++, function, pointers, matrix

我想制作一个类库，一个函数，它的参数是一个未知大小的矩阵，用户将用自己的大小创建自己的矩阵并将它传递给这个函数，对他的矩阵做一些这样的操作，将是功能

```
calculateDeterminantOfTheMatrix( int matrix[][])
{
   some Operations to do on matrix 
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-15T17:24:25.790

C 和 C++ 的内置组件不太支持多维数组。只有在编译时`N`知道维度时，才能传递-dimension 数组：`N-1`

```
calculateDeterminantOfTheMatrix( int matrix[][123]) 
```

但是，标准库提供的`std::vector`容器非常适用于多维数组：在您的情况下，传递`vector<vector<int> > &matrix`将是在 C++ 中处理任务的正确方法。

```
int calculateDeterminantOfTheMatrix(vector<vector<int> > &matrix) {
    int res = 0;
    for (int i = 0 ; i != matrix.size() ; i++)
        for(int j = 0 ; j != matrix[i].size() ; j++)
            res += matrix[i][j];
    return res;
} 
```

作为额外的好处，您不需要将矩阵的维度传递给函数：`matrix.size()`代表第一个维度，并`matrix[0].size()`代表第二个维度。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-02-26T16:48:34.373

C解决方案：

在 C 中，作为函数参数传递时，您不能省略数组大小（最左边的除外）。

你可以写： int a[]

但不能： int a[][]

例如： int a[][20]

这个约束在这里，因为编译器需要确定访问数组元素的正确偏移量。但是，您可以这样做：

```
void print_arbitrary_2D_array(void *arr, int y, int x)
{
    /* cast to 2D array type */
    double (*p_arr)[y][x] = (double (*)[y][x]) arr;

    int i, j;

    for (i = 0; i < y; ++i) {
        for (j = 0; j < x; ++j)
            printf(" %lf", (*p_arr)[i][j]);
        putchar('\n');
    }
}

double arr_1[4][3] = {
    { 3.3, 5.8, 2.3 },
    { 9.1, 3.2, 6.1 },
    { 1.2, 7.9, 9.4 },
    { 0.2, 9.5, 2.4 }
};
double arr_2[2][5] = {
    { 3.6, 1.4, 6.7, 0.1, 4.2 },
    { 8.4, 2.3, 5.9, 1.4, 8.3 }
};

print_arbitrary_2D_array(arr_1, 4, 3);
putchar('\n');
print_arbitrary_2D_array(arr_2, 2, 5); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T17:29:33.887

您可以采取多种方法。

1.  C 处事方式 -> 传入 a`int**`但此处要格外小心。这不是一个二维数组。您必须正确地为该指针分配内存，或者，您需要在编译时知道大小。（例如静态分配一个大小为 M * N 的数组，然后禁止任何更大的数组）。为了动态分配内存，您需要知道行数和列数。

2.  C ++方式->`#include <vector>`之后您可以简单地使用`vector<vector<int> > &matrix`（注意后面的空间，`<int>`除非您使用的是c ++ 11编译器。），它将分配一个基本上是二维数组的int向量向量。在这种情况下，将为您处理内存管理。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T11:17:03.230

我会为定义了列和行的矩阵编写一个简单的类包装器。

```
template <typename T>
class Mat {
  std::size_t _row;
  std::size_t _col;

  T *_mat_elem;
public:
  Mat(std::size_t r, std::size_t c)
   :  _row(r), _col(c), _mat_elem(new T[r*c] {}
  ~Mat() {/* remember to do delete [] here */}

  // element access, for example
  T& at(std::size_t r, std::size_t c)
  {
    return *(_mat_elem+r*_col+c);
  }
}; 
```

但实际上你是在重新发明轮子。那里有很好的矩阵处理库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-23T16:22:01.673

使用此方法声明一个指针数组，例如： `int *a[n];` 然后使用 for 循环为它们分配内存：

```
for( int i=0 ; i<n ; i++ )
        a[i] = new int[n]; 
```

现在像普通数组一样传递参数。例如： print_array(a,n); 而 print_array 函数看起来像

```
print_array(int **a,int n)//the prototype for the print_array
{
 //access the array using index such as
std:: cout<<a[1][1]<<endl;
} 
```

上述情况适用于 nxn 数组，如果需要 mxn 然后分配内存，如

```
for( int i=0 ; i<m ; i++ )
        a[i] = new int[n]; 
```

然后将 m,n 和传递给函数并在 for 循环中访问数组。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-26T10:06:09.230

到目前为止，在我发现的函数中使用二维数组的最佳方法是使用映射函数。如下例所示，我使用映射函数来打印二维数组

```
void Print2D(int x[],int ROWS,int COLS)
{
    for(int i=0;i<ROWS;i++)
{
    for(int j=0;j<COLS;j++)
    cout << x[i*COLS+j] << ' ';
    cout << endl;

}
} 
```

这是如何在 main 中使用它

```
int main(){

    int x[3][3];
    Print2D(&x[0],3,3);

} 
```

这里 &x[0] 是二维数组第一行的起始地址或更准确地说是二维数组的起始地址

# saxparser - SAX 解析器中 startelement() 方法的参数指的是什么

> ID：10164265
> 
> 赞同：3
> 
> 时间：2012-04-15T17:17:04.110
> 
> 标签：saxparser

```
public void startElement(String uri, String localName, String qName,
            Attributes attributes) 
```

任何人都可以举一个简单的例子来说明 localname 与 qName 的不同之处以及 uri 字符串到底是什么？是的，在有人问我之前我确实在网上检查过，但没有人愿意提及差异，因为一些示例使用 qName 而其他示例使用 localname，这对我来说真的很困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T18:57:18.803

好的，我在这里找到了答案[http://www.saxproject.org/namespaces.html](http://www.saxproject.org/namespaces.html)

这里[localname和qname有什么区别？](https://stackoverflow.com/questions/7157355/what-is-the-difference-between-localname-and-qname)

# c - fwrite() 和文件损坏

> ID：10164267
> 
> 赞同：-3
> 
> 时间：2012-04-15T17:17:45.770
> 
> 标签：c, fopen, fwrite, fflush

我正在尝试将 wchar 数组写入 C 中的文件，但是存在某种损坏和不相关的数据，例如像这样的变量和路径

```
c.:.\.p.r.o.g.r.a.m. .f.i.l.e.s.\.m.i.c.r.o.s.o.f.t. .v.i.s.u.a.l. .s.t.u.d.i.o. 1.0...0.\.v.c.\.i.n.c.l.u.d.e.\.x.s.t.r.i.n.g..l.i.s.t...i.n.s.e.r.t 
```

与正确的数据一起写入文件（[示例](http://pastebin.com/Csz94p69)）我已经确认缓冲区以空值结尾并包含正确的数据。

这是我的代码：

```
 myfile = fopen("logs.txt","ab+");
        fseek(myfile,0,SEEK_END); 
        long int size = ftell(myfile);
        fseek(myfile,0,SEEK_SET);
        if (size == 0)
        {
            wchar_t bom_mark = 0xFFFE; 
            size_t written = fwrite(&bom_mark,sizeof(wchar_t),1,myfile); 
        }
// in another func
            while (true)
            {
            [..]
                unsigned char Temp[512];
                iBytesRcvd = recv(sclient_socket,(char*)&Temp,iSize,NULL);
                if(iBytesRcvd > 0 )
                {
                    WCHAR* unicode_recv = (WCHAR*)&Temp;
                    fwrite(unicode_recv,sizeof(WCHAR),wcslen(unicode_recv),myfile);
                    fflush(myfile);
                }
            [..]
            } 
```

这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T17:26:50.710

`recv()`不会以 null 终止`&Temp`，因此会`wcslen()`运行 . 实际写入的字节`recv()`。如果您只使用`iBytesReceived`作为字节计数`fwrite()`而不是使用`wcslen()`并希望接收到的数据是正确的空终止（即宽空终止），您将获得正确的结果：

```
fwrite(unicode_recv, 1, iBytesReceived, myfile); 
```

# android - 如何使用 android 意图上传到 Dropbox

> ID：10164270
> 
> 赞同：2
> 
> 时间：2012-04-15T17:18:07.557
> 
> 标签：android, android-intent, dropbox

我想通过从我的应用启动意图来将文件发送到已安装的 Dropbox 应用。我如何确定意图是什么。

例如，当我进入我的 Astro Files 并长按一个文件时，我会看到一个“发送”选项。按发送会向我显示包括 Dropbox 在内的应用程序列表。

如何从我的应用程序中获取相同的“共享”列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T21:46:26.110

假设用户在他们的手机上安装了应用程序，您可以找到能够“捕捉”广播的应用程序列表。 [（使用此方法...）](http://developer.android.com/reference/android/content/pm/PackageManager.html#queryBroadcastReceivers%28android.content.Intent,%20int%29) 之后，您可以尝试使用保管箱应用程序发送意图，或者决定不发送（因为，如果用户没有安装应用程序，您将收到系统抛出的异常)..

# sql - 如何在 nhibernate 中使用 Icriteria 包含多个 where 条件

> ID：10164271
> 
> 赞同：0
> 
> 时间：2012-04-15T17:18:26.757
> 
> 标签：sql, asp.net-mvc-3, nhibernate, hql, icriteria

我正在使用 nhibernate 在 MVC3 中开发一个应用程序我有两个表，我想在两者之间执行连接，并且我还想包含多个 where 条件。我发布了所有相关的表，以便清除要求：

```
First table is HobbyMaster:
HobbyId
HobbyName

Second Table is HobbyHome:
HobbyHomeId
HobbyHomeName

Third Table is HobbyDetail:
HobbyDetailId
HobbyId(Foreign Key)
HobbyHomeId(Foreign key)

Fourth Table is HobbyHomeAddress:
Id(primary key)
HobbyHomeId(Foreign key)
StateId(Foreign Key)
DistrictId(Foreign key)

Fifth Table is State:
stateid
statename

last Table is District:
districtid
districtname 
```

我想写一个这样的查询：

```
select * from HobbyHomeAddress hobadd,
              HobbyDetail hobdet 
 where hobdet.HobbyId=hobbyid 
   and hobadd.HobbyId=hobdet.HobbyId 
   and hobadd.StateId=stateid; 
```

我试过了，但它不工作，也给了我 NUll

```
 hobbyhomeaddress = session.CreateCriteria(typeof(HobbyHomeAddress))
               .CreateAlias("HobbyDetail", "HobbyDetail", NHibernate.SqlCommand.JoinType.InnerJoin)
               .Add(Expression.Eq("HobbyID", hobbyid))
               .Add(Restrictions.Eq("HobbyHomeAddress.HobbyHomeId", "HobbyDetail.HobbyHomeId"))
               .Add(Expression.Eq("ProvincialState.ProvincialStateID", stateid))
               .List<HobbyHomeAddress>(); 
```

我可以通过 ajax 获取 id，但我不明白如何触发以下查询请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T19:39:54.373

一个可能的问题：

```
.Add(Restrictions.Eq("HobbyHomeAddress.HobbyHomeId", "HobbyDetail.HobbyHomeId")) 
```

这部分连接（在 SQL 中）应该在您的休眠映射中，您不需要显式指定它。

# java - 如何按首选顺序设置 Jbutton？

> ID：10164273
> 
> 赞同：2
> 
> 时间：2012-04-15T17:18:51.943
> 
> 标签：java, swing, jbutton

我有一个由 30 个按钮组成的网格，我想让它从左到右然后向下，从右到左，再从左到右。基本上编号如下：

1 2 3 4 5 6 7 8 9 10

20 19 18 17 16 15 14 13 12 11

21 22 23 24 25 26 27 28 29 30

因此，如果我在按钮 10 上有一块并且我指示它向上移动 2 位，它将落在 12 而不是 19。

以下是我的代码：

```
//Creates the button using the loop, adds it into the panel and frame.
        JPanel panel = new JPanel();
        panel.setLayout(new GridLayout(3,10));
        JButton [] buttons = new JButton[30];
        for(int i=0;i<30;i++){
            buttons[i] = new JButton("label" + i);
            buttons[i].setBackground(Color.white);

        //Puts the player 1 piece on button 1,3,5,7,9 and player 2 piece on button 2,4,6,8,10
           if (i < 10) {
           if (i%2 == 0) {
             buttons[i].setIcon(piece1);
           } else {
             buttons[i].setIcon(piece2);
           }
        }
        panel.add(buttons[i]);
                    }

        frame.add(panel, BorderLayout.CENTER); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T17:43:49.150

例如，

```
 for (int i = 1; i <= buttons.length; i++) { // avoid magic numbers

     int btnNumber = (i > 10 && i <= 20) ? (31 - i) : i;

     System.out.printf("i = %d, btnNumber = %d%n", i, btnNumber);
     buttons[btnNumber - 1] = new JButton("label " + btnNumber);
     buttons[btnNumber - 1].setBackground(Color.white);
     panel.add(buttons[btnNumber - 1]);
  } 
```

或者逻辑部分可以写成，

```
 if (i > 10 && i <= 20) {
        btnNumber = 31 - i;
     } else {
        btnNumber = i;
     } 
```

但同样，您应该能够自己弄清楚这一点，或者至少向我们展示了一次尝试。

或更一般地说：

```
 int rows = 5;
  int cols = 10;
  int textNumber = 0;
  for (int i = 0; i < rows * cols; i++) {
     if ((i / cols ) % 2 == 0) {
        textNumber = i;
     } else {
        textNumber = ((i / cols) + 1) * cols - (i % cols) - 1;
     }
     textNumber++;
     System.out.printf("[%02d, %02d] ", i, textNumber);
     if ((i + 1) % cols == 0) {
        System.out.println();
     }
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T17:26:15.890

使用 netbeans 的 spring 布局来解决您的问题
，只需在设计选项卡中设计几个按钮，然后使用您想要的计数将它们复制到一个循环中。

# c++ - c99：内部名称的 63 个字符有意义吗？

> ID：10164277
> 
> 赞同：-4
> 
> 时间：2012-04-15T17:20:20.343
> 
> 标签：c++, c, variables, names, kr-c

> **可能重复：**
> [内部名称的至少前 31 或 63 个字符有意义？](https://stackoverflow.com/questions/10141422/at-least-the-first-31-or-63-characters-of-an-internal-name-are-significant)

这是书中的直接引述（K&R，第 2 版，第 35 页）：

> “至少内部名称的前 31 个字符是重要的。对于函数名称和外部变量，该数字可能小于 31，因为外部名称可能被语言无法控制的汇编程序和加载程序使用。对于外部名称, 标准只保证 6 个字符和一个大小写。”

并且在**c99 中对其内部名称没有长度限制，但只有前 63 个是有意义的。**

我的问题是为什么这些限制特别是**31**或**63**？为什么这个数字特别为什么不是**19,24**或任何其他数字？如果这是一个实施问题，将其**设为 31**或**63**是否有好处？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T17:21:24.747

因此长度可以是 2 的幂，甚至包括 NUL 终止。

# php - 在 CakePhp 上创建多列页面的最佳方法

> ID：10164278
> 
> 赞同：1
> 
> 时间：2012-04-15T17:20:24.497
> 
> 标签：php, css, cakephp

我想创建一个多列页面。我不确定我应该更喜欢哪种方式来适应 cakephp 的编码规则。

我应该在 view//index.ctp 还是 layouts/default.ctp 上创建列

如果 layouts/default.ctp 是合适的方式，我该如何获取其他内容？如您所知，有一行用于获取控制器的视图内容，例如`<?php echo $this->fetch('content'); ?>`如何获取其他内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T06:17:50.703

只需在其他地方声明一个块，例如在您的视图文件中，使用 start() 和 stop() 来定义一个块并使用 fetch() 输出它。例如 start('menu'); 然后调用 fetch('menu') 将显示开始和停止调用之间的内容。

读这个：

*   [http://book.cakephp.org/2.0/en/views.html#extending-views](http://book.cakephp.org/2.0/en/views.html#extending-views)
*   [http://book.cakephp.org/2.0/en/views.html#view-blocks](http://book.cakephp.org/2.0/en/views.html#view-blocks)
*   [http://book.cakephp.org/2.0/en/views.html#using-view-blocks](http://book.cakephp.org/2.0/en/views.html#using-view-blocks)
*   [http://book.cakephp.org/2.0/en/views.html#displaying-blocks](http://book.cakephp.org/2.0/en/views.html#displaying-blocks)

# wordpress - 服务器传输后 WordPermalink 不起作用

> ID：10164279
> 
> 赞同：2
> 
> 时间：2012-04-15T17:20:39.613
> 
> 标签：wordpress, .htaccess, permalinks

我已将我们的网站[http://www.pacificluxuryliving.com](http://www.pacificluxuryliving.com)从 powweb 转移到 godaddy。这是一个基于wordpress的网站。问题是漂亮的永久链接不起作用。它显示404错误。有趣的是，如果我添加新帖子或新页面，则永久链接有效。但是所有旧的永久链接都不起作用。我可以编辑旧页面并更改永久链接（从编辑页面）。如果我将旧的永久链接更改为新的，那么它也可以工作。我禁用了漂亮的永久链接 + 删除了 .htaccess 文件。然后从 wp admin > settings > permalinks 启用漂亮的永久链接（它会自动恢复.htaccess）；尝试了许多其他方法，但没有任何效果。

谢谢，法哈​​德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T16:31:39.503

检查以下

*   你启用了 mod_rewrite 吗？
*   你有缓存插件吗？如果是，则禁用它们。
*   是否启用了 FollowSymLinks 选项？

还要发布你的 .htaccess 文件的内容和你想使用的漂亮的永久链接格式。

# database - 在 Google App Engine 中按键获取与过滤器获取

> ID：10164283
> 
> 赞同：0
> 
> 时间：2012-04-15T17:21:16.343
> 
> 标签：database, google-app-engine

我希望尽可能高效并妥善规划。由于在使用 Google App Engine 时读取和写入成本很重要，因此我希望确保将这些成本降至最低。我不理解数据存储中的“关键”概念。我想知道的是，考虑到我知道它是什么，通过键来获取实体是否比通过某种过滤器获取更有效？

假设我有一个名为 User 的模型，并且一个用户有一个 commentId 数组（列表）。现在我想得到这个用户的所有评论。我有两个选择：

1.  用户的commentId 数组是一个键数组，其中每个键是一个Comment 实体的键。因为我有所有的钥匙，我可以通过他们的钥匙来获取所有的评论。

2.  用户的commentId 数组是我自定义的标识符，在这种情况下，我们只是说它们是自动递增的常规整数，并且数据存储中的每个评论都有一个唯一的commentIntegerId。因此，现在如果我想获取所有评论，我会根据我的 id 数组中的所有 ID 的评论进行过滤获取。

哪种实现会更有效，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T18:14:56.880

1.  按键获取是从数据存储中获取实体的最快方式，因为它是最直接的操作，不需要通过索引查找。
2.  每次创建条目时（除非您指定 key_name），应用引擎都会生成一个唯一的（每个父实体）数字 id，您应该将其用作评论的 id。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T19:01:11.620

您应该根据使用模式设计一个 NoSql 数据库（= GAE 数据存储）：

如果您需要一次获取所有用户的评论并且永远不需要基于某些标准（例如查询它们）获得其中的一个或一些评论，那么就速度和成本而言，*最有效*的方法是将所有评论序列化为实体内的二进制 blob（或将其保存到 Blobstore）。

但我想情况并非如此，因为评论通常与用户和帖子相关联，对吧？在这种情况下，上述建议将不可行。

回答你的标题问题：`get`按键总是比`query`属性快，因为查询首先通过索引来满足属性条件，它在哪里获取键，然后`get`用这个键执行。

# javascript - 如何从电子邮件格式检查器代码中删除错误文本？

> ID：10164285
> 
> 赞同：1
> 
> 时间：2012-04-15T17:21:40.940
> 
> 标签：javascript, jquery

我一直在编写使用 javascript/jquery 验证表单的代码。以下是检查电子邮件格式的代码片段。问题是当我输入无效的电子邮件时，它会识别它，但是当我返回此字段并输入正确的电子邮件时，即使我使用了“其他”部分，错误文本仍然存在。在这种情况下如何删除错误文本？

```
if(e1.value!=''){
    var emailRegEx = /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i;
    if (document.signupForm.email1.value.search(emailRegEx) == -1) {
        $("#err_email1").html("Please enter valid email address.");
    }
    status=0;         
}
else{
    $("#err_email1").html("");
    status=1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T17:28:54.137

运行删除错误消息的代码的 else 块仅在电子邮件字段为空白时运行，这可能不是您想要的，请尝试下面的编辑。

```
if(e1.value!='')
{
    var emailRegEx = /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i;
    if (document.signupForm.email1.value.search(emailRegEx) == -1) {
        $("#err_email1").html("Please enter valid email address.");
        status=0;  
    }
    else
    {
        $("#err_email1").html("");
        status=1;
    }
} 
```

# sql - 如何从功能依赖中获取最小密钥？

> ID：10164289
> 
> 赞同：4
> 
> 时间：2012-04-15T17:22:09.280
> 
> 标签：sql, database, normalization, relation

我需要一些帮助和指导。

我有以下关系：`R = {A, B, C, D, E, F}`和函数依赖集

```
F = {
  {AB -> C};
  {A -> D};
  {D -> AE};
  {E -> F};
}

```

R 的主键是什么？

如果我应用推理规则，我会得到这些额外的函数依赖项：

```
D -> A
D -> E
D -> F

D -> AEF

A -> E
A -> F
A -> DEF 
```

我该如何继续？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T17:52:32.290

有一个众所周知的算法可以做到这一点。我不记得了，但练习似乎很简单，不用它。

我认为这都是关于传递性的：

```
CurrentKey = {A, B, C, D, E, F} 
```

你知道D决定E，E决定F。因此，D通过传递性决定F。由于 F 不能确定任何内容，我们可以将其删除，并且由于 E 可以从 D 中获得，我们也可以将其删除：

```
CurrentKey = {A, B, C, D} 
```

由于 AB 确定 C 并且 C 无法确定任何我们知道它不能成为密钥的内容，因此我们将其删除：

```
CurrentKey = {A, B, D} 
```

最后我们知道 A 决定了 D，所以我们可以从键中删除后者：

```
CurrentKey = {A, B} 
```

如果一旦你有了这个可能的键，你就可以重新创建所有的功能依赖，它就是一个可能的键。

PS：如果您碰巧有该算法，请发布它，因为我很高兴重新学习:)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-06-08T10:37:46.330

算法：密钥计算（调用 x = ∅）

```
procedure key(x;A;F)
foreach  ! B 2 F do
if   x and B 2 x and B ̸2  then
return; /* x not minimal */
fi
od
if x+ = A then
print x; /* found a minimal key x */
else
X   any element of A  x+;
key(x [ fXg;A;F);
foreach  ! X 2 F do
key(x [ ;A;F);
od
fi 
```

# android - Android 单元测试失败，因为我从 org.opencv.highgui.VideoCapture 扩展

> ID：10164293
> 
> 赞同：0
> 
> 时间：2012-04-15T17:22:31.643
> 
> 标签：android, unit-testing, opencv, extends

我想测试一个从 org.opencv.highgui.VideoCapture 扩展的类

```
public class FilterCamera extends VideoCapture { .. } 
```

..在我的主项目中，创建FilterCamera实例没有问题：

```
FilterCamera filterCamera = new FilterCamera(..); 
```

但是当我在我的测试项目中尝试它时，我总是得到：

```
java.lang.NoClassDefFoundError: valkyrie.filter.FilterCamera
at valkyrie.filter.test.FilterCameraTest.testGetFilterList(FilterCameraTest.java:33)
at java.lang.reflect.Method.invokeNative(Native Method)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:169)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:154)
at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:529)
at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1584) 
```

当我测试同一包中的其他类或删除“扩展 VideoCapture”时，我没有收到任何错误

任何想法？

# wpf - 如何在 WPF 样式中定位不同类型的控件？

> ID：10164299
> 
> 赞同：1
> 
> 时间：2012-04-15T17:23:10.790
> 
> 标签：wpf, xaml, gridsplitter

我想为`GridSplitter`水平和垂直的人设置不同的背景。这是因为我有一个线性渐变，我需要根据网格拆分器的对齐方式将其旋转 90 度。

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Style TargetType="{x:Type GridSplitter}">
        <Setter Property="Background" Value="Red" /> <!-- How to get this red applied to only Vertical for instance? -->
    </Style>
</ResourceDictionary> 
```

所以问题是：如何分别针对垂直拆分器和水平拆分器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T17:26:26.773

用于`Style.Triggers`有条件地应用设置器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T17:35:54.527

好的，看起来我明白了：

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Style TargetType="{x:Type GridSplitter}">
        <Style.Triggers>
            <Trigger Property="VerticalAlignment" Value="Stretch">
                <Setter Property="Background" Value="#F7F7F7" />
            </Trigger>

            <Trigger Property="HorizontalAlignment" Value="Stretch">
                <Setter Property="Background" Value="red" />
            </Trigger>
        </Style.Triggers>
    </Style>
</ResourceDictionary> 
```

# c++ - 递归解析 va_list 中的参数可以吗？

> ID：10164300
> 
> 赞同：5
> 
> 时间：2012-04-15T17:23:24.923
> 
> 标签：c++, variadic-functions

假设我想通过让函数的每次调用读取下一个参数来创建一个递归解析可变参数列表的函数？将 va_list 交给下一个函数后，我不打算在调用函数中继续使用 va_list。下面的代码可以吗：

```
void VarArgRecursive( va_list args ) {
    int nextArg = va_arg(args, int);
    if( nextArg != -1 ) {
        printf("Next arg %d\n", nextArg);
        VarArgRecursive(args);
    }
}

void VarArgFunc( int firstArg, ... ) {
    va_list args;
    va_start(args, firstArg);
    VarArgRecursive(args);
    va_end(args);
}

int main (int argc, char * const argv[]) {

    VarArgFunc(20, 12, 13, -1);

    return 0;
} 
```

代码在我的系统上编译，输出如预期：

```
Next arg 12
Next arg 13 
```

那么，这种做法可以吗？查了一下列表，发现将va_list交给下一个函数后，调用函数中的va_list的内容是未定义的。这对我的使用无关紧要，因为在将 va_list 交给下一个（实际上，相同的）函数后，我不会继续使用它。我还检查了这个页面：

[http://c-faq.com/varargs/handoff.html](http://c-faq.com/varargs/handoff.html)

...这表明我将 va_list 移交给下一个函数的方式是可以的。它没有说的是，在读取一个 arg 之后是否可以将 va_list 交给另一个函数，并期望被调用的函数读取下一个 arg。如果这个问题有 c++ 特定的答案，那也没关系，因为它将在 c++ 程序中使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T18:05:23.617

您可以多次传递它，但您不能多次“使用” va_list。使用时，va_list 可能会被修改，并且再次使用它是 C++ 规范中未定义的行为。

如果您想多次使用它，请在使用之前调用 va_copy 克隆 va_list，然后传递副本。

但是，在您的情况下，您正在做的事情是可以接受的。当您尝试将 va_list*从开头*传递给另一个函数时，就会出现问题。

# php - Foreach PHP 错误

> ID：10164302
> 
> 赞同：1
> 
> 时间：2012-04-15T17:23:38.237
> 
> 标签：php, foreach

我在我的 PHP 文件中收到以下 foreach 错误，我不知道如何修复它。有没有人有任何想法？

当我加载页面时，我得到了这个：

```
Warning: Invalid argument supplied for foreach() in /home/mysite/public_html/merge/class/global_functions.php on line 61

Warning: Invalid argument supplied for foreach() in /home/mysite/public_html/merge/class/global_functions.php on line 89 
```

我的 /class/global_functions.php 的第 61 和 89 行如下：

```
Here is my code from line 61 to line 98:

    foreach($GLOBALS['userpermbit'] as $v)
    {
        if(strstr($v['perm'],'|'.$pageperm_id[0]['id'].'|'))
            return true;
    }

    //if they dont have perms and we're not externally including functions return false
    if ($GLOBALS['external'] != true) return false; return true;

}

//FUNCTION: quick perm check using perm info from the onload perm check 
function stealthPermCheck($req)
{
    #if theyre an admin give them perms
    if(@in_array($GLOBALS['user'][0]['id'], $GLOBALS['superAdmins']))
            return true;    

    if(!is_numeric($req))
    {
        #if the req is numeric we need to match a title, not a permid. So try to do that
        foreach($GLOBALS['userpermbit'] as $v)
        {
            if(stristr($v['title'],$req))
                return true;
        }
    }else{
        #check if they have perms numerically if so return true
        foreach($GLOBALS['userpermbit'] as $v)
        {
            if(strstr($v['perm'],'|'.$req.'|'))
                return true;
        }
    }

    #if none of this returned true they dont have perms, return false
    return false;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T17:40:22.763

[`foreach`](http://php.net/foreach)仅当变量为 an[`array`](http://php.net/array)或 an时才有效[`object`](http://php.net/object)。

如果您提供其他内容，则会看到您看到的错误：

```
Warning: Invalid argument supplied for foreach() in ... 
```

要停止该错误，请确保您传递给的变量`foreach`是 an`array`或 an `object`。

邪恶的 php coderz 以这种方式处理它，如果他们希望它通常是一个数组但因为生命太短而懒得检查任何东西：

```
foreach ((array) @$prunzels as $do_not_care)
{
} 
```

我强烈推荐它，因为`$GLOBALS`无论如何你都在使用，这让我相信你想要升级 PHP 邪恶。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T17:30:00.157

将第 69 行的代码更改为：& 在 89 上执行相同操作

$GLOBALS['userpermbit'] ：这可能是空白的，并且不会被 foreach 视为数组。

```
$u_per_arr = $GLOBALS['userpermbit'];
if(!is_array($u_per_arr)) {
 $u_per_arr = array();
}

foreach($u_per_arr as $v) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T17:26:39.113

`$GLOBALS['userpermbit']`未设置或不是数组。您需要检查它的初始化位置，或者它出了什么问题。试着给我们更多的背景。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T17:39:21.277

错误说，错误类型的变量已传递给[`foreach()`](http://php.net/manual/en/control-structures.foreach.php)构造。错误发生在第 89 行。

该`foreach()`构造期望第一个参数是一个数组。您`$userpermbit`在第 89 行用作`foreach()`构造参数的变量似乎不是数组类型。

在您的代码中搜索任何出现`$userpermbit`并找出它的设置位置。更正它以设置`$userpermbit`为数组。

# c# - 使用 Walker 别名方法的加权随机选择

> ID：10164303
> 
> 赞同：4
> 
> 时间：2012-04-15T17:23:42.013
> 
> 标签：c#, .net, f#, probability

我一直在寻找这种算法
***（该算法将从元素列表中随机选择，其中每个元素具有不同的被挑选概率（权重））***
，并且在我做了一个 C# 之后，只发现了 python 和 c 实现，有点不同（但是我认为更简单）我想我应该分享它，我还需要一个**F# 实施**，如果有人能做到，请发布答案

```
using System;
using System.Collections.Generic;
using System.Linq;

namespace ChuckNorris
{
    class Program
    {
        static void Main(string[] args)
        {
            var oo = new Dictionary<string, int>
                         {
                             {"A",7},
                             {"B",1},
                             {"C",9},
                             {"D",8},
                             {"E",11},
                         };

            var rnd = new Random();
            var pick = rnd.Next(oo.Values.Sum());

            var sum = 0;
            var res = "";

            foreach (var o in oo)
            {
                sum += o.Value;
                if(sum >= pick)
                {
                    res = o.Key;
                    break;
                }
            }

            Console.WriteLine("result is "+  res);
        }
    }
} 
```

**如果有人可以在 F# 中重新制作它，请发布您的代码**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T17:57:50.870

这是 F# 中的类似代码：

```
let rng = new System.Random()
let d = [| "A", 3
           "B", 2
           "C", 3 |]
let sums = Seq.scan (+) 0 (dict d).Values |> Seq.skip 1 |> Seq.toArray 
let pick = rng.Next(sums.[sums.Length-1])
let res = fst d.[sums |> Seq.findIndex ((<) pick)] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-15T18:07:02.800

```
open System

let oo = dict [ "A", 7;
                "B", 1;
                "C", 9;
                "D", 8;
                "E", 11 ]

let rnd = Random()
let pick = oo.Values |> Seq.sum |> rnd.Next

let res = oo |> Seq.scan (fun (_, s) (KeyValue(k, v)) -> k, s + v) ("", 0)
             |> Seq.tryPick (fun (k, s) -> if s >= pick 
                                           then printfn "Result is %s" k; Some k 
                                           else None) 
```

# javascript - 使用 JQuery 获取 DIV 的高度及其内容

> ID：10164305
> 
> 赞同：0
> 
> 时间：2012-04-15T17:24:28.070
> 
> 标签：javascript, jquery, html, height

我有一个包含几个元素的 div：

```
<div class="menuItem designMenu" id="dMenu">
  <ul class="menuList menu">
    <li class="menuHeader">Design</li>
    <li class="projectHeader">Mother</li>
    <li class="projectBody">Some text here</li>
    <li class="more">More</li>
  </ul>
</div> 
```

我需要获取可以向上设置动画的 dMenu 项目的高度，包括里面的所有内容。我的 Javascript 目前：

```
var designHeight = $("#dMenu").height(); 
```

什么都不返回。

我已经尝试过`offsetHeight`,`scrollHeight`和 Google 出现的所有其他内容。我在正文的末尾运行 jQuery，在文档就绪函数中。

获得动画高度而不是手动进行动画的原因是：a：我想了解如何和 b：我还不知道 div 中有多少项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T18:10:50.447

浮动内的`li`s吗？`ul`如果是这样，并且父级没有`overflow: hidden`父级折叠，因此没有高度。尝试（如果可能）添加 `overflow: hidden`到父元素，或在 CSS 中硬编码高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T10:53:17.003

我正在使用 scrollHeight 来获得我想要的东西。令人尴尬的是，我还注意到在加载 JQuery 之前我正在摆弄我正在加载我的 JS 的东西。很惭愧，我没有发现这一点。

# c++ - 使用 LARGE_INTEGER 给我返回错误 error C2679: '=' binary no operator found which take a right-hand operand

> ID：10164310
> 
> 赞同：0
> 
> 时间：2012-04-15T17:24:51.687
> 
> 标签：c++

我有以下代码：

```
QueryPerformanceCounter(&timeStart);
winMain::render(); //do stuff
QueryPerformanceCounter(&timeEnd);
numCounts = ( timeEnd.QuadPart - timeStart.QuadPart); 
```

所有 3 个变量都被声明为 LARGE_INTEGER，代码应该可以工作，因为我遵循书本示例，但我得到：

错误 C2679: '=' binary no operator found 它采用 LONGLONG 类型的右手操作数它可能是 '_LARGE_INTEGER &_LARGE_INTEGER::operator =(const _LARGE_INTEGER &)' 1> durante laricerca di corrispondenza con l'elenco di argomenti' (LARGE_INTEGER, LONGLONG)'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T17:35:32.490

您正在尝试将 LONGLONG 分配给 LARGE_INTEGER。不存在这样的任务。也许您打算分配给 numCounts.QuadPart。

# node.js - Node.js + express.js + passport.js ：在服务器重启之间保持身份验证

> ID：10164312
> 
> 赞同：75
> 
> 时间：2012-04-15T17:24:52.580
> 
> 标签：node.js, express

我使用 passport.js 来处理我的 nodejs + express.js 应用程序上的身份验证。我设置了一个 LocalStrategy 来从 mongodb 获取用户

我的问题是，**当我重新启动节点服务器时，用户必须重新进行身份验证**。这是一个问题，因为我正在积极开发它并且不想在每次重启时都登录......（+我使用节点主管）

这是我的应用程序设置：

```
app.configure(function(){
    app.use('/static', express.static(__dirname + '/static'));
    app.use(express.bodyParser());
    app.use(express.methodOverride());
    app.use(express.cookieParser());
    app.use(express.session({secret:'something'}));
    app.use(passport.initialize());
    app.use(passport.session());
    app.use(app.router);
}); 
```

和会话序列化设置：

```
passport.serializeUser(function(user, done) {
    done(null, user.email);
});

passport.deserializeUser(function(email, done) {
    User.findOne({email:email}, function(err, user) {
        done(err, user);
    });
}); 
```

我尝试了使用 connect-mongodb 在博客上给出的解决方案（删除了链接，因为它不再存在）但没有成功

```
app.use(express.session({
    secret:'something else',
    cookie: {maxAge: 60000 * 60 * 24 * 30}, // 30 days
        store: MongoDBStore({
        db: mongoose.connection.db
    })
})); 
```

**编辑**附加问题：只应建立一个连接（使用一个连接有限的 mongohq 免费服务）

**EDIT 2**解决方案（作为一个版本，因为我的声誉很低，现在无法回答我的问题

这是我最终找到的解决方案，使用猫鼬发起的连接

```
app.use(express.session({
    secret:'awesome unicorns',
    maxAge: new Date(Date.now() + 3600000),
    store: new MongoStore(
        {db:mongoose.connection.db},
        function(err){
            console.log(err || 'connect-mongodb setup ok');
        })
})); 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-04-16T14:15:34.480

[**有一个名为connect-mongo**](https://github.com/kcbanner/connect-mongo)的开源软件，它可以完全满足您的需求 - 将会话数据保存在 mongodb 中

*使用示例（重用`mongoose`打开的连接）：*

```
var session = require('express-session');
var MongoStore = require('connect-mongo')(session);
var mongoose = require('mongoose');
mongoose.connect('mongodb://localhost/sess');
app.use(express.session({
    secret:'secret',
    maxAge: new Date(Date.now() + 3600000),
    store: new MongoStore(
    // Following lines of code doesn't work
    // with the connect-mongo version 1.2.1(2016-06-20).
    //    {db:mongoose.connection.db},
    //    function(err){
    //        console.log(err || 'connect-mongodb setup ok');
    //   }
    {mongooseConnection:mongoose.connection}
    )        
})); 
```

你可以在这里阅读更多关于它的信息：[https ://github.com/kcbanner/connect-mongo](https://github.com/kcbanner/connect-mongo)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-15T21:33:22.930

我像这样使用connect-mongo：

```
var MongoStore = require('connect-mongo');

var sess_conf = {
  db: {
    db: mydb,
    host: localhost,
    collection: 'usersessions' // optional, default: sessions
  },
  secret: 'ioudrhgowiehgio'
};

 app.use(express.session({
    secret: sess_conf.secret,
    maxAge: new Date(Date.now() + 3600000),
    store: new MongoStore(sess_conf.db)
  }));

[...]

// Initialize Passport!  Also use passport.session() middleware, to support
  // persistent login sessions (recommended).
  app.use(passport.initialize());
  app.use(passport.session()); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-15T17:39:53.927

这是因为您使用 MemoryStore（默认）进行会话。查看 memory.js（Connect 框架的一部分）中的这段代码：

```
var MemoryStore = module.exports = function MemoryStore() {
  this.sessions = {};
}; 
```

以及 session.js (Express) 中的这个片段

```
function session(options){
    /* some code */
    , store = options.store || new MemoryStore
    /* some code */
} 
```

现在你应该明白每次服务器重启都会重置 MemoryStore。为了保留数据，您必须使用其他会话存储。您甚至可以自己编写（应该不会太难），尽管 Redis（参见[这个库](https://github.com/visionmedia/connect-redis)）可能是一个不错的选择（Express 很好地支持它）。

**// 编辑**

根据[Connect 文档](http://www.senchalabs.org/connect/middleware-session.html)，如果您实现`get`,`set`和`destroy`方法就足够了。以下代码应该可以工作：

```
customStore = {
    get : function(sid, callback) {
        // custom code, for example calling MongoDb
    },
    set : function(sid, session, callback) {
        // custom code
    },
    destroy : function(sid, callback) {
        // custom code
    }
}    

app.use(express.session({
    store: customStore
})); 
```

您只需要实现调用 MongoDb（或任何其他 Db，尽管我仍然建议使用像 Redis 这样的非永久性 Db）来存储会话数据。还要阅读其他实现的源代码以了解这个想法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-09-22T13:59:48.170

这对于有经验的节点用户来说可能是显而易见的，但它让我印象深刻：

您需要配置节点会话 - 例如

```
app.use(session({secret: "this_is_secret", store: ...})); 
```

***在***初始化护照会话之前 - 例如

```
app.use(passport.initialize());
app.use(passport.session()); 
```

如果您首先调用 passport.session() 它将不起作用（并且它不会警告您）。我认为问题在于序列化/反序列化用户功能和浪费时间。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-07T18:48:07.100

我正在使用猫鼬，我尝试了上面答案中提供的代码，但它对我不起作用。当我这样做时，我得到了这个错误：

```
Error: db object already connecting, open cannot be called multiple times 
```

但是，这对我有用：

```
app.use(express.session({
    secret:'secret',
    maxAge: new Date(Date.now() + 3600000),
    store: new MongoStore({mongoose_connection:mongoose.connection})
})) 
```

注意：如果由于某种原因没有 MongoStore，则需要执行以下操作：

```
npm install connect-mongo --save 
```

然后：

```
var MongoStore = require('connect-mongo')(express) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-05-28T20:20:48.880

我最终做了什么：

```
var expressSession = require('express-session');
var redisClient = require('redis').createClient();
var RedisStore = require('connect-redis')(expressSession);
...
app.use(expressSession({
    resave: true,
    saveUninitialized: true,
    key: config.session.key,
    secret: config.session.secret,
    store: new RedisStore({
        client: redisClient,
        host: config.db.host,
        port: config.db.port,
        prefix: 'my-app_',
        disableTTL: true
    })
})); 
```

为我工作。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-07-29T12:50:49.800

您需要更改用于会话的商店。当您的应用程序停止时，默认的“MemoryStore”不会继续存储会话。查看 github 上的 express-session 以了解更多关于 mongo 的其他商店。（不记得名字了）

# virtual-machine - 通过java代码访问VMware

> ID：10164315
> 
> 赞同：0
> 
> 时间：2012-04-15T17:25:11.360
> 
> 标签：virtual-machine, vmware-workstation

有没有办法通过java代码在VMware工作站中打开虚拟机（.vmx）文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T17:51:28.653

如果您想编辑 .vmx 文件，那么答案是否定的。目前没有可用于 VMware Workstation 的 API，可让您以编程方式更改 vmx 文件中的值。

**编辑：**

如果可以在命令行调用 VMPlayer 并且可以将 agrument vmx 文件传递​​给它，那么可以。使用 Process 对象通过 java 运行命令。

# c++ - Qt 应用程序中的奇怪错误

> ID：10164321
> 
> 赞同：0
> 
> 时间：2012-04-15T17:25:47.663
> 
> 标签：c++, qt, qgraphicsview, qgraphicsitem

在我的应用程序中，我重新实现`QGraphicsView`了检查 a `mouseReleaseEvent()`，然后告诉鼠标所在位置的项目来处理事件。

我的`QGraphicsItem`视图由另外两个组成`QGraphicsItems`，我检查两个中的哪一个被单击（或者更确切地说是释放按钮），并处理相应的事件。

在我的 Widget 的构造函数中，我将其中一个项目设置为默认选中，使用的方法与项目检测到发布时使用的方法相同。

调试的时候，发现对于`LabelItem`, select 从构造函数中调用没有问题（并且在我第一次启动应用程序时结果很清楚）。但是，当我单击这些项目时，应用程序将终止。我看到我正在进入选择功能，但没有离开它。所以问题就在这里。

这很奇怪，因为 select 函数只是一个单行设置器。

```
void LabelItem::select()
{
    selected = true;
} 
```

这是`mouseReleaseEvent`;

```
void LayerView::mouseReleaseEvent(QMouseEvent *event)
{
    LayerItem *l;

    if(event->button() == Qt::LeftButton)
    {           
        l = (LayerItem *) itemAt(event->pos());

        if(l->inLabel(event->pos()))     
        {                                 //No problem upto this point, if label is clicked on
            l->setSelection(true);        //in setSelection, I call select() or unselect() of LabelItem, 
                                          //which is a child of LayerItem, and the problem is there.
                                          //In the constructor for my main widget, I use setSelection
                                          //for the bottom most LayerItem, and have no issues.
            emit selected(l->getId());
        }
            else if(l->inCheckBox(event->pos()))
        {
            bool t = l->toggleCheckState();
            emit toggled(l->getId(), t);
        }
   }
} 
```

当我在函数中注释掉该行时，我没有错误。我还没有为另一个`QGraphicsItem`CheckBoxItem 进行调试，但应用程序也终止了它的事件。我认为这个问题可能是相关的，所以我现在专注于`select`。

我完全不知道是什么原因导致了这种情况以及为什么会发生这种情况。根据我过去的经验，我很确定这是我愚蠢地没有想到的简单事情，但我不知道是什么。

帮助真的很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T00:52:45.903

如果`LabelItem`位于 顶部`LayerItem`，`itemAt`则很可能会返回 ，`LabelItem`因为它是鼠标下方的最顶部项目。除非`LabelItem`设置为不接受任何带有 的鼠标按钮`l->setAcceptedMouseButtons(0)`。

尝试使用[`qgraphicsitem_cast`](http://qt-project.org/doc/qt-4.8/qgraphicsitem.html#qgraphicsitem_cast)来测试项目的类型。每个派生类都必须重新定义[`QGraphicsItem::type()`](http://qt-project.org/doc/qt-4.8/qgraphicsitem.html#type)以返回一个不同的值，以便转换函数能够识别类型。

您还可以通过重新定义它们的方法来处理项目本身的点击[`QGraphicsItem::mouseReleaseEvent()`](http://qt-project.org/doc/qt-4.8/qgraphicsitem.html#mouseReleaseEvent)，这将消除对邪恶演员的需要，但您必须删除该函数`LayerView::mouseReleaseEvent()`或至少调用基类实现`QGraphicsView::mouseReleaseEvent()`，以允许项目接收事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T19:01:55.180

我见过这些奇怪的行为：主要是二进制不兼容——c++ 端看起来是正确的，而崩溃是没有意义的。正如您所说：在您的代码中，“选定”变量不能成为原因。您是否可能已经更改了声明并忘记了重新编译所有链接对象。只需清理并重新编译所有目标文件。在 99% 的情况下为我工作。

# asp.net - Python：通过 .aspx 站点的登录页面时出现问题

> ID：10164322
> 
> 赞同：3
> 
> 时间：2012-04-15T17:25:55.907
> 
> 标签：asp.net, python, urllib2, login-script, httplib

问题：我搜索了几个网站/博客/等以找到解决方案，但没有找到我想要的。简而言之，问题是我想抓取一个站点-但要访问该站点-我必须通过登录页面。

我做了什么：我确实设法使用 urllib2 和 httplib 打开页面，但即使在登录后（没有显示错误），浏览器中显示的登录页面重定向也不会发生。我的代码与此处显示的代码没有太大区别：[如何使用 Python 登录网页并检索 cookie 以供以后使用？](https://stackoverflow.com/questions/189555/how-to-use-python-to-login-to-a-webpage-and-retrieve-cookies-for-later-usage); 除了我没有使用 Cookies。

我在找什么？我不完全确定除了“用户名”和“密码”字段之外我还需要寻找哪些字段。我想让脚本做的是 1）成功登录到 .aspx 站点并显示某种登录成功的消息 2）登录后重定向到另一个页面，以便我刮掉数据从网站。3) 如何收集任何网站的 POST/GET 字段，以便我知道我正在传递/调用正确的参数？

任何帮助/帮助/建议将不胜感激。

# bash - 使用 bash 自动回答 django sync for Graphite install 的提示

> ID：10164323
> 
> 赞同：2
> 
> 时间：2012-04-15T17:25:56.353
> 
> 标签：bash, ubuntu, chef-infra

我正在使用厨师在 ubuntu 上自动安装石墨。我需要使用 bash 或任何其他方式自动化 python manage.py syncdb。

```
ubuntu@ip-xxx-xxx-xxx:/opt/graphite/webapp/graphite$ sudo python manage.py syncdb
Creating tables ...
Creating table account_profile
Creating table account_variable
Creating table account_view
Creating table account_window
Creating table account_mygraph
Creating table dashboard_dashboard_owners
Creating table dashboard_dashboard
Creating table events_event
Creating table auth_permission
Creating table auth_group_permissions
Creating table auth_group
Creating table auth_user_user_permissions
Creating table auth_user_groups
Creating table auth_user
Creating table auth_message
Creating table django_session
Creating table django_admin_log
Creating table django_content_type
Creating table tagging_tag
Creating table tagging_taggeditem

You just installed Django's auth system, which means you don't have any superusers defined.
Would you like to create one now? (yes/no): yes
Username (Leave blank to use 'root'): admin
E-mail address: test@gmail.com
Password: 
Password (again): 
Superuser created successfully.
Installing custom SQL ...
Installing indexes ...
No fixtures found. 
```

我需要使用以下内容自动执行以下提示

```
Would you like to create one now? (yes/no): yes
Username (Leave blank to use 'root'): admin
E-mail address: test@gmail.com
Password: test101
Password (again): test101 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-16T15:25:50.677

由于我遇到了同样的问题并使用 expect 解决了它，我想我可以分享我编写的 expect 脚本：

```
set timeout -1
set program [ lindex $argv 0 ]
eval spawn $program [ lrange $argv 1 end ]
expect {
    "Would you like to create one now" {
            send "yes\r"
            expect "Username"
            send "admin\r"
            expect "E-mail"
            send "test@gmail.com\r"
            expect "Password"
            send "admin\r"
            expect "Password"
            send "admin\r"
            exp_continue
     } "Migrated" {
            expect eof
     }
} 
```

请记住自定义默认管理员和密码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T18:56:23.683

你可以试试[期望](http://linux.die.net/man/1/expect)。除了 sftp 之外，我从未将它与其他任何东西一起使用过，但它应该适用于任何交互式应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T16:15:01.500

如果您需要解决“输入”问题并希望使用结构自动创建管理员，请考虑将`--noinput`标志传递给**syncdb**并**加载**已创建用户数据的固定装置。

看看这里：[django fabric syncdb](https://stackoverflow.com/questions/2331750/django-fabric-syncdb)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T21:30:59.297

会简单地将数据作为标准输入传输到流程工作吗？

```
printf "%s\n" yes admin test@example.com test101 test101 | sudo python ... 
```

或者

```
sudo sh -c 'printf "%s\n" yes admin test@example.com test101 test101 | python ...' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-06T20:12:03.413

我刚找到这个，但我想说**no**而不是**yes**。所以这是一个基于 unicoletti 示例的最小期望脚本。

```
set timeout -1                                                                                                                                                          
spawn "./your_django_script.sh"                                                                                                                                     
expect {                                                                                                                                                                
    "Would you like to create one now" {                                                                                                                                
            send "no\r"                                                                                                                                                 
            exp_continue                                                                                                                                                
     }                                                                                                                                                                  
} 
```

# html - 如何水平放置div而不溢出到新行？

> ID：10164336
> 
> 赞同：5
> 
> 时间：2012-04-15T17:27:00.110
> 
> 标签：html, css

我有一个左浮动 div 用作侧边栏（红色）。在它旁边，还有另一个 div 存储页面内容（绿色）。内容 div 内的元素保持浮动（蓝色）。

当浏览器宽度太小而无法容纳它们时，我希望能够水平滚动框；例如，如果有很多盒子。相反，内容 div 移动到侧边栏 div 下方，我正在滚动整个页面。

这是浏览器窗口足够宽时的页面布局： ![页面布局](../Images/88fafed6cf7761cebe37794dae92c4ca.png)

这是HTML：

```
<div id="container">
  <div id="sidebar">Sidebar</div>
  <div id="content">
    <p class="box">Box 1</p>
    <p class="box">Box 2</p>
    <p class="box">Box 3</p>
  </div>
  <div style="clear: both;"></div>
</div> 
```

这是CSS：

```
* {
    margin: 0px;
    padding: 0px;
}

#container {
    background: yellow;
}

#sidebar {
    float: left;
    background: red;
}

#content {
    float: left;
    white-space: nowrap;
    background: green;
}

.box {
    width: 200px;
    height: 250px;
    background: blue;
    margin: 10px;
    float: left;
} 
```

请帮助我理解我做错了什么。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T17:52:30.313

您只需要使用 CSS 属性来包装您的内容`overflow-x: scroll;`。

* ***重要提示**：这是一项 CSS3 功能，某些浏览器可能不支持`overflox-x`。因此，我强烈建议您阅读以下内容：http: [//net.tutsplus.com/tutorials/html-css-techniques/html5-and-css3-without-guilt/](http://net.tutsplus.com/tutorials/html-css-techniques/html5-and-css3-without-guilt/)。

**预览**：http: [//jsfiddle.net/WXFJU/](http://jsfiddle.net/WXFJU/)

**HTML**

```
<div id="container">
  <div id="sidebar">Sidebar</div>
  <div class="overflow-x">
      <div id="content">
        <p class="box">Box 1</p>
        <p class="box">Box 2</p>
        <p class="box">Box 3</p>
      </div>
  </div>
  <div style="clear: both;"></div>
</div>​​​​​ 
```

**CSS**

```
* {
    margin: 0px;
    padding: 0px;
}

#container {
    width: 100%;
    background: yellow;
}

#sidebar {
    float: left;
    background: red;
}

#content {
    float: left;
    white-space: nowrap;
    background: green;
}

.box {
    width: 200px;
    height: 250px;
    background: blue;
    margin: 10px;
    float: left;
}

.overflow-x {
    overflow-x: scroll;
    display: block;
} 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T17:39:55.653

您也需要设置宽度`container`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T17:43:17.770

您的 content-div 还需要有一个宽度。

```
#content {
    width: 1000px;
} 
```

# jquery - 如何使用每篇博文中的 id 创建锚链接？

> ID：10164337
> 
> 赞同：0
> 
> 时间：2012-04-15T17:27:01.257
> 
> 标签：jquery, loops, each

我在我认为是一个简单的问题上遇到了一些麻烦。

我想为一系列博客文章自动创建锚链接 - 我一直在尝试使用**each()**命令循环遍历父 div 中的子项，但我无法让它正常工作，我现在很困惑，我不知道自己在做什么。((@_@))

博客内容的结构如下：

```
<div id="content">
 <div class="list-journal-entry-wrapper">
  <div class="post-text">
    <div id="item101" class="journal-entry">...</div>
   </div><div class="post-text">
    <div id="item102" class="journal-entry">...</div>
   </div><div class="post-text">
    <div id="item103" class="journal-entry">...</div>
   </div>
  </div>
 </div>
</div> 
```

我想要做的是使用`id="item101"`每个`.journal-entry`帖子的唯一项目编号（）来创建一个锚链接列表，如下所示：

```
<div id="news-links">
  <a href="#item101">Post 101</a><br/>
  <a href="#item102">Post 102</a><br/>
  <a href="#item103">Post 103</a><br/>
</div> 
```

我很难找到`id="xxxxx"`每个帖子的：

`id`一旦我有了那个id，用这个值写出锚链接应该很简单`href`

`<a href="#xxxxx">Post xxxxx</a>`

我真的很感激一个例子，这样我就可以理解**each()**命令。

还是有更好的方法来做到这一点？

* * *

**解决了！**多亏了*adeneo*和*theCodeParadox*的示例，我设法在此过程中学到了一些东西，并从两种解决方案中学到了一些东西——为了帮助他人，这是我最终完成的解决方案，用于我的特定应用程序：

[http://jsfiddle.net/mDSWE/3/](http://jsfiddle.net/mDSWE/3/)

请注意，实际 HTML 中还有其他 div，最终的 jQuery 例程查找文章标题`h2.title`以用作链接文本，然后使用该函数找到它用于锚链接`parents()`的第一个包装 div 的 id 属性。`id="item12345"``href`

```
$('h2.title a').each(function() {
   var el = $(this);
    var id = el.parents('div.journal-entry:first').attr('id');
   var insert = '<a href="#' + id + '">' + el.text() + '</a></br>';
   $('#news-anchors').append(insert);
}); 
```

工作得很好，所以感谢您抽出时间来帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T17:35:41.090

```
var newsLinks = '<div id="news-links">';

$(".journal-entry").each(function(index, item) {
    newsLinks += '<a href="#'+item.id+'">Post '+item.id.replace('item', '')+'</a><br/>';
});

newsLinks += '</div>'; 
```

[小提琴](http://jsfiddle.net/adeneo/XEFmq/)

也可以这样做：

```
var newsLinks = '<div id="news-links">';

$.each($(".journal-entry"), function() {
    newsLinks += '<a href="#'+this.id+'">Post '+this.id.replace('item', '')+'</a><br/>';
});

newsLinks += '</div>'; 
```

[小提琴](http://jsfiddle.net/adeneo/XEFmq/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T17:51:37.977

```
$(".journal-entry").each(function(index, value) {
  $('#news-links').append('<a href="#'+this.id+'">Post '+ this.id.replace('item', '')+'</a>');
}); 
```

# concurrency - Erlang进程消息抑制

> ID：10164338
> 
> 赞同：0
> 
> 时间：2012-04-15T17:27:10.637
> 
> 标签：concurrency, erlang, message

我想产生一些将响应他们收到的消息的进程。这很简单。但是，我也希望有一个能够阻止另一个进程的输出的进程。

在另一种语言中，我可能会设置一个标志并在发送消息之前检查该标志的状态。但是由于 Erlang 没有可变变量，我该如何实现呢？

我当然可以在 a 中添加一个模式`receive`来监视抑制消息。我只是不知道下一步该做什么。

我真的不喜欢为此使用 ETS 表的想法，因为这破坏了一个很好的分布式模型。同样，我不太关心并发问题，但我想以最合适的方式设计它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T19:00:35.573

每个回显服务器都可以有自己的状态，指示它当前是否处于静音状态。其他进程可以使用静音/取消静音消息切换该状态。在响应消息之前，回显服务器将检查状态并采取适当的行动。

例如：

```
1> {ok, Pid} = echo:start_link().
{ok,<0.99.0>}
2> echo:echo(Pid, "this message will be echoed.").
#Ref<0.0.0.443>
3> echo:echo(Pid, "as will this message..").
#Ref<0.0.0.447>
4> echo:mute(Pid).
ok
5> echo:echo(Pid, "this message will not.").
#Ref<0.0.0.457>
6> echo:unmute(Pid).
ok
7> echo:echo(Pid, "but this one will..").
#Ref<0.0.0.461>
8> flush().
Shell got {#Ref<0.0.0.443>,"this message will be echoed."}
Shell got {#Ref<0.0.0.447>,"as will this message.."}
Shell got {#Ref<0.0.0.461>,"but this one will.."}
ok
9> echo:stop(Pid).
ok 
```

代码：

```
-module(echo).

-behaviour(gen_server).

%% API
-export([start_link/0,
     echo/2,
     mute/1,
     unmute/1,
     stop/1]).

%% gen_server callbacks
-export([init/1, handle_call/3, handle_cast/2, handle_info/2,
     terminate/2, code_change/3]).

-define(SERVER, ?MODULE). 

-record(state, {mute=false}).

%%%===================================================================
%%% API
%%%===================================================================

start_link() ->
    gen_server:start_link(?MODULE, [], []).

echo(Pid, Msg) ->
    Ref = make_ref(),
    gen_server:cast(Pid, {echo, self(), Ref, Msg}),
    Ref.

mute(Pid) ->
    gen_server:cast(Pid, mute).

unmute(Pid) ->
    gen_server:cast(Pid, unmute).

stop(Pid) ->
    gen_server:cast(Pid, stop).

%%%===================================================================
%%% gen_server callbacks
%%%===================================================================

init([]) ->
    {ok, #state{}}.

handle_call(_Request, _From, State) ->
    Reply = ok,
    {reply, Reply, State}.

handle_cast({echo, From, Tag, Msg}, #state{mute=false} = State) ->
    From ! {Tag, Msg},
    {noreply, State};
handle_cast({echo, _From, _Tag, _Msg}, #state{mute=true} = State) ->
    {noreply, State};
handle_cast(mute, State) ->
    {noreply, State#state{mute=true}};
handle_cast(unmute, State) ->
    {noreply, State#state{mute=false}};
handle_cast(stop, State) ->
    {stop, normal, State};
handle_cast(_Msg, State) ->
    {noreply, State}.

handle_info(_Info, State) ->
    {noreply, State}.

terminate(_Reason, _State) ->
    ok.

code_change(_OldVsn, State, _Extra) ->
    {ok, State}. 
```

# c++ - 数据压缩器需要什么样的数学？

> ID：10164339
> 
> 赞同：0
> 
> 时间：2012-04-15T17:27:12.200
> 
> 标签：c++, math, compression

编写数据压缩器 (C++) 需要哪些数学知识？是否需要任何特定的微积分分支？这些是如何实施的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T17:31:49.273

你应该阅读Thomas M. Cover 和 Joy A. Thomas 的[Elements of Information Theory](http://www.elementsofinformationtheory.com/)。这在受资助的理论基础上回答了您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T17:29:16.357

我会说主要是[*信息论*](http://en.wikipedia.org/wiki/Information_theory)和[*统计学*](http://en.wikipedia.org/wiki/Statistics)。

当然，基本的数学和逻辑知识是必需的，但这对于一般的编程算法来说是正确的。

# c# - 如何将 Finalize 与托管资源一起使用？

> ID：10164340
> 
> 赞同：1
> 
> 时间：2012-04-15T17:27:28.583
> 
> 标签：c#, clr, finalizer, clr4.0

**在B**类的最后一个实例最终确定之前，我并不是 100% 清楚如何将**A**类的实例定义为存在。

 **或者换句话说，我希望所有**B**都在**B最终确定中的****A**中调用 close&dispose 方法......并且在**A**本身最终确定*之前发生这种情况。*

 *****场景：

A. 我有一个非托管资源的托管包装器。打个比方，我们称 A 为文件系统

B. 引用 A 的托管资源，这些资源又通过 A 包装器请求了非托管资源。对于一个类比，我们将 B 称为一个文件。

附加请求 --> 我希望 using 语法能很好地发挥作用。即显式调用 using dispose 不应释放非托管资源。该对象将存在于对象池中。它应该只在它离开对象池时被释放。

```
class SomeClass() : IDisposable{

    public SomeClass(){}

    public ~SomeClass(){
       // dispose of unmanaged here?
    }

    // Dispose(bool disposing) executes in two distinct scenarios.
    // If disposing equals true, the method has been called directly
    // or indirectly by a user's code. Managed and unmanaged resources
    // can be disposed.
    // If disposing equals false, the method has been called by the
    // runtime from inside the finalizer and you should not reference
    // other objects. Only unmanaged resources can be disposed.
    public void Dispose(bool disposing) {
        if (disposing) {
            // dispose managed
        } else {
            // dispose unmanaged?
        }
    }

    public void Dispose() {
        Dispose(true);
        //GC.SuppressFinalize(this);
    } 
```

}

参考：

[1][为什么 Finalize 方法不允许覆盖](https://stackoverflow.com/questions/2587006/why-finalize-method-not-allowed-to-override)

[2] CLR 通过 C Sharp 第三版。通道。21\. 关键终结器对象。特别是第 537 页“使用托管资源完成”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T17:32:17.483

您通常无法控制最终确定顺序。[不过，您可以使用CriticalFinalizerObject](http://msdn.microsoft.com/en-us/library/system.runtime.constrainedexecution.criticalfinalizerobject.aspx)控制两阶段顺序。还要查看 SafeHandle 基础架构以及 FileStream 是如何做到的。

如果这还不够，您可以通过从静态类成员（例如列表或字典）创建对象引用来任意控制生命周期。只有当您释放这些引用时，才会发生最终确定。因此，您将创建一个对 A 的引用，一旦您注意到对 B 的 GCHandle 已变得无效，您就会清除该引用。*******

# c++ - 跨平台 C++ 文件系统观察者

> ID：10164341
> 
> 赞同：4
> 
> 时间：2012-04-15T17:27:47.220
> 
> 标签：c++, filesystems, cross-platform, filesystemwatcher

我正在寻找一个跨平台的文件系统观察器，类似于 .NET 中的[FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)类。因为它是用于守护程序/服务的，所以我不热衷于 Qt 的[QFileSystemWatcher](http://harmattan-dev.nokia.com/docs/library/html/qt4/qfilesystemwatcher.html)。我真的很想避免它，因为我不想依赖 Qt，因为我的程序将成为一个守护进程。

我还看到了将此类课程包含在 Boost 中的[提案](http://lists.boost.org/Archives/boost/2010/04/165719.php)，但据我所知，此类课程尚未包含在内。

是否有跨平台 C++ 文件系统观察程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T17:31:25.350

Qt分为[模块](http://doc.qt.nokia.com/4.7-snapshot/modules.html)，所以使用这个特性并不意味着你必须使用GUI库。

QFileSystemWatcher 在[QtCore](http://doc.qt.nokia.com/4.7-snapshot/qtcore.html)中，它没有 GUI 功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T23:59:28.887

我没有使用过这个（我来这个问题寻找替代品），但[http://code.google.com/p/simplefilewatcher](http://code.google.com/p/simplefilewatcher)似乎是一个不错的选择。它目前没有维护，但相关的 API 可能相当稳定。如果我使用这个库，我会尽量记住更新这个答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-27T12:16:08.333

作为替代方案，还有“Entropia File System Watcher”

[https://bitbucket.org/SpartanJ/efsw](https://bitbucket.org/SpartanJ/efsw)是 simple-file-watcher 的一个分支。

> efsw 目前支持以下平台：
> 
> Linux 通过 inotify
> 
> 通过 I/O 完成端口的 Windows
> 
> Mac OS X 通过 FSEvents 或 kqueue
> 
> FreeBSD/BSD 通过 kqueue
> 
> 独立于操作系统的通用观察程序（轮询磁盘以获取目录快照并定期比较它们）
> 
> 如果任何后端由于任何原因无法启动，它将回退到独立于操作系统的实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-15T03:24:28.503

[为了完整起见，Poco 的DirectoryWatcher](http://pocoproject.org/docs/Poco.DirectoryWatcher.html)也值得一提。

# java - Java Servlet 返回远程端口 0？

> ID：10164342
> 
> 赞同：0
> 
> 时间：2012-04-15T17:27:57.357
> 
> 标签：java, android, networking, servlets, tcp

我正在使用部署在 Google AppEngine 上的 servlet 来响应客户端的远程端口号。HttpServletRequest.getRemoteAddr() 工作正常，但 getRemotePort() 返回 0？

端口 0 无效。我尝试过其他 IP 服务，它们告诉我正常的端口号（即 55046 或其他），但每次从浏览器或 Java 代码访问时，我的 servlet 都会返回 0。

我的最终目标是能够在查找收件人的地址和外部端口位置时告诉连接发起者，以便 TCP 打孔技术能够正常工作。

这是什么原因？如何获得实际的端口号（如果可能）？NAT 路由器不使用代理端口吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T20:42:28.603

我不确定为什么 getRemotePort 会返回 0，但是为了您的最终目标，知道客户端端口是无用的。为每个连接重新分配客户端端口。事实上，如果第一个连接使用 55046，则客户端端口的全部意义在于新连接使用不同且未使用的客户端端口号。

这使得配置防火墙策略漏洞的信息毫无用处。您将不需要客户端端口。您需要的是服务器端口、服务器地址以及可选的客户端地址（如果您只想允许从该客户端地址进行访问）。

# xml - 如何从 XML 中读取重复节点

> ID：10164344
> 
> 赞同：0
> 
> 时间：2012-04-15T17:28:34.713
> 
> 标签：xml, xml-parsing, saxparser

正如您在下面的 xml 中看到的那样，有两个重复的字段或节点称为条件（一个在`<current_conditions>`，另一个在`<forecast_conditions>`. 所以每当我使用该`startelement`方法读取条件时，我总是得到最后一个，但我想从第一个读取仅节点）。

```
<current_conditions>
<condition data="Mostly Cloudy"/>
<temp_f data="86"/>
<temp_c data="30"/>
<humidity data="Humidity: 25%"/>
<icon data="/ig/images/weather/mostly_cloudy.gif"/>
<wind_condition data="Wind: SE at 7 mph"/>
</current_conditions>

<forecast_conditions>
<day_of_week data="Sun"/>
<low data="73"/>
<high data="97"/>
<icon data="/ig/images/weather/mostly_sunny.gif"/>
<condition data="Mostly Sunny"/> 
```

我可以这样做。我正在使用 SAX 解析器来解析文档，这是我正在使用的处理程序的代码

```
@Override
public void startElement(String uri, String localName, String qName,
        Attributes attributes) throws SAXException {
   if (localName.equals("condition")) {
     String data=attributes.getValue("data");
}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T13:41:43.920

找不到一个，所以不得不以艰难的方式去做......通过修改肯提供的链接自己编写了逻辑......

# facebook - Facebook iframe 出现在我的 Joomla 文章中间

> ID：10164350
> 
> 赞同：1
> 
> 时间：2012-04-15T17:28:56.460
> 
> 标签：facebook, joomla

Facebook iframe 出现在我的 Joomla 文章中间。我想让它消失，并尝试了我能想到的几乎所有东西。请帮忙！文章链接是[http://blowingrocknews.com/community-life/general-news/2658-tis-the-season-forgetting-your-teeth-knocked-out.html](http://blowingrocknews.com/community-life/general-news/2658-tis-the-season-forgetting-your-teeth-knocked-out.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T20:26:45.963

您可能应该删除旧的 FBML 样式的 Facebook 评论，而改用社交插件，例如[https://developers.facebook.com/docs/reference/plugins/comments/](https://developers.facebook.com/docs/reference/plugins/comments/)

# python - Python：在 Windows 主机内运行进程

> ID：10164351
> 
> 赞同：0
> 
> 时间：2012-04-15T17:29:12.323
> 
> 标签：python, windows, wmi

我需要使用 python 从 linux 主机在 windows 主机内运行一个进程。我看到了 WMI python 库，但似乎只能在 Windows 主机上工作，而不是 linux，我该怎么办？我需要像 PSEXEC 这样的东西，但它只适用于 Windows。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T19:45:49.827

由于您无法在 Windows 主机上安装任何东西，它是否安装了 openoffice 或 libreoffice？然后，您可以使用与其捆绑的 Python 解释器创建一个 Python 脚本，该脚本侦听 xmlrpc 并完成工作，远程控制该脚本。

如果 Windows 端没有安装 Python，并且你的远程主机是 Linux，这里有这个秘诀：http: [//code.activestate.com/recipes/577945-execute-remote-commands-on-windows-like- psexec/](http://code.activestate.com/recipes/577945-execute-remote-commands-on-windows-like-psexec/) 它确实依赖于 windows - 因为它导入`win32wnet`- 根据我的经验，这些 windows 特定模块将在安装在 Linux 机器上的[Wine](http://www.winehq.org/)配置上的 Windows python 中运行良好。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-15T17:32:19.853

一个简单的解决方案是[在 windows 机器上运行 SSH 服务器](https://serverfault.com/questions/8411/what-is-a-good-ssh-server-to-use-on-windows)并在客户端使用[paramiko 库](http://www.lag.net/paramiko/)。

# silverlight - WP7 DatePicker、TimePicker 数据绑定

> ID：10164352
> 
> 赞同：1
> 
> 时间：2012-04-15T17:29:12.400
> 
> 标签：silverlight, xaml, datetime, data-binding, windows-phone-7.1

我正在构建一个需要显示和接受来自我的模型（从数据库中检索）的日期的应用程序。该模型公开了一个名为 EntryTime 的属性：

```
 private DateTime entryTime;

[Column]
public DateTime EntryTime
{
    get { return entryTime;  }
    set
    {
        if (entryTime != value)
        {
            this.NotifyPropertyChanging("EntryTime");
            entryTime = value;
            this.NotifyPropertyChanged("EntryTime");
        }
    }
} 
```

我的页面上有一个 DatePicker 和一个 TimePicker，并希望将它们都绑定到 EntryTime。我尝试通过绑定值来绑定它们，但这不起作用：

```
 <toolkit:DatePicker HorizontalAlignment="Left" Margin="151,6,0,0" x:Name="dateCurrent" VerticalAlignment="Top" Width="175" Value="{Binding CurrentEntry.EntryDate}" />
    <toolkit:TimePicker HorizontalAlignment="Left" Margin="313,6,0,0" Name="timeCurrent" VerticalAlignment="Top" Value="{Binding CurrentEntry.EntryDate}" Width="137" /> 
```

我对 Silverlight 比较陌生，所以我不确定我能做些什么来将时间选择器绑定到 EntryDate 的时间，将 DatePicker 绑定到 EntryDate 的日期。

感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T11:26:51.957

我有同样的问题。尝试将 DatePicker 绑定到**DateTime？**不是**日期时间**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T18:28:17.233

绑定应该有效。如果您能详细说明您遇到的具体问题，那就太好了。我确实注意到您丢失的一件事是绑定上的“TwoWay”模式：

```
 <toolkit:DatePicker HorizontalAlignment="Left" 
              Margin="151,6,0,0" 
              x:Name="dateCurrent" 
              VerticalAlignment="Top"  
              Width="175" 
              Value="{Binding CurrentEntry.EntryDate, Mode=TwoWay}" />

    <toolkit:TimePicker 
              HorizontalAlignment="Left" 
              Margin="313,6,0,0" 
              Name="timeCurrent" 
              VerticalAlignment="Top" 
              Value="{Binding CurrentEntry.EntryDate, Mode=TwoWay}" Width="137" /> 
```

# mysql - 设计带有列的表需要以四种不同的语言存储

> ID：10164354
> 
> 赞同：1
> 
> 时间：2012-04-15T17:29:21.080
> 
> 标签：mysql, database, database-design

在我的 My-SQL 数据库中，我有一个文章表（列 article_id、article_name 和 highlight（需要在这个问题中讨论））。这个名为“Highlight”的列定义了一篇文章的亮点。我需要以不同的语言存储此列。

1）一种方法是..我将在同一张表中取四列。说Hightlight_en、Highlight_german、Highlight_french等等。

2）其他方式是我将为每种语言创建不同的突出显示表。

请根据良好的数据库设计建议我应该采用哪种方式。也欢迎您的想法。

还有一件事..我是否需要在 java 中做一些额外的事情来存储多语言数据（任何 UTF-8 设置）。请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T17:32:28.087

我建议不要使用您描述的任何一种方法。相反，创建一个`highlight`包含 3 列的表：

```
CREATE TABLE highlight 
(
  article_id INT NOT NULL,
  language VARCHAR(),
  highlight_text VARCHAR() CHARACTER SET utf8,
  PRIMARY KEY (article_id, language),
  FOREIGN KEY (article_id) REFERENCES articles (article_id)
) 
```

每行链接到一篇文章`article_id`，并包含一个语言版本和相关文本。这使您可以根据需要添加尽可能多的语言，并且如果文章缺少一种语言并不重要 - 它根本不会出现在表格中。如果有必要，它还允许您在每篇文章中使用完全不同的语言集。

然后值看起来像：

```
2  en  The English text for article 2
2  dr  The French text for article 2
2  de  The German text for article 2
3  en  The English text for article 3
3  dr  The French text for article 3
3  de  The German text for article 3
3  sw  Oh wait, article 3 also needed Swahili text! 
```

# c# - 如何获取 LinkedList 中的第 n 个元素 ?

> ID：10164355
> 
> 赞同：29
> 
> 时间：2012-04-15T17:29:30.080
> 
> 标签：c#, .net, data-structures, linked-list

如何获取 LinkedList 实例的第 n 个元素？是否有内置方式，或者我可能需要介绍自己的实现？例如扩展方法？

谢谢

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-15T17:32:07.650

[`ElementAt`](http://msdn.microsoft.com/en-us/library/bb299233.aspx)扩展方法会做到这一点：

```
// This is 0-based of course
var value = linkedList.ElementAt(n); 
```

不要忘记这是一个 O(n) 操作，因为`LinkedList<T>`它没有提供任何更有效的按索引访问项目的方法。如果您需要定期执行此操作，则建议您不应该从使用链表开始。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-15T17:31:58.597

您可以使用 ElementAt() 可枚举的扩展方法。LinkedList 本身不支持随机访问的原因是因为它对数据结构来说是一种相当低效的操作。如果您要经常这样做，您应该考虑使用更合适的数据结构。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-15T17:32:15.480

您可以使用 LINQ 来执行此操作，如`list.ElementAt(n)`or `list.Skip(n - 1).First()`，但如果您发现自己对链表进行索引访问，则您可能做错了（链表不能有效地支持此操作）。也许另一种数据结构会更合适？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-02-10T07:31:13.707

我需要获取列表的第二个元素（根据第二个更新第一个项目的值）

假设您正在采取必要的步骤来确保您确实有两个项目，您可以简单地执行此操作：

```
list.First.Next.Value 
```

# java - Java中的系统日期格式

> ID：10164362
> 
> 赞同：1
> 
> 时间：2012-04-15T17:30:20.910
> 
> 标签：java, jsp, datetime, date, formatting

我编写了一个获取系统日期的程序。

```
<%@page import="java.util.*,java.text.*"%>

<html>
<body>
<p>&nbsp;</p>
<div align="center">
<center>
 <table border="0" cellpadding="0" cellspacing
    ="0" width="460" bgcolor="#EEFFCA">

<tr>
 <td width="100%"><font size="6" color
 ="#008000">&nbsp;Date Example</font></td>

</tr>
<tr>
 <td width="100%"><b>&nbsp;Current Date 
 and time is:&nbsp; <font color="#FF0000">

 <%
 DateFormat formatter = new SimpleDateFormat("DD-MON-YY");
 String date = formatter.format(new java.util.Date());
 %>
<%=date%>
</font></b></td>
</tr>
</table>
</center>
</div>
</body>
< /html> 
```

我收到一个错误。请让我知道如何将系统日期转换为 dd-MMM-YY 格式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T17:32:55.917

特殊字符模式用于指定日期的格式。这个例子演示了一些字符。有关完整列表，请参阅 SimpleDateFormat 类的 javadoc 文档。

注意：此示例使用默认语言环境（在作者的情况下为 Locale.ENGLISH）格式化日期。如果示例在不同的语言环境中运行，则文本（例如，月份名称）将不同。

```
Format formatter;

// The year
formatter = new SimpleDateFormat("yy");    // 02
formatter = new SimpleDateFormat("yyyy");  // 2002

// The month
formatter = new SimpleDateFormat("M");     // 1
formatter = new SimpleDateFormat("MM");    // 01
formatter = new SimpleDateFormat("MMM");   // Jan
formatter = new SimpleDateFormat("MMMM");  // January

// The day
formatter = new SimpleDateFormat("d");     // 9
formatter = new SimpleDateFormat("dd");    // 09

// The day in week
formatter = new SimpleDateFormat("E");     // Wed
formatter = new SimpleDateFormat("EEEE");  // Wednesday

// Get today's date
Date date = new Date(); 
```

一些例子：

```
formatter = new SimpleDateFormat("MM/dd/yy");
String s = formatter.format(date);
// 01/09/02

formatter = new SimpleDateFormat("dd-MMM-yy");
s = formatter.format(date);
// 29-Jan-02

// Examples with date and time; see also
// Formatting the Time Using a Custom Format
formatter = new SimpleDateFormat("yyyy.MM.dd.HH.mm.ss");
s = formatter.format(date);
// 2002.01.29.08.36.33

formatter = new SimpleDateFormat("E, dd MMM yyyy HH:mm:ss Z");
s = formatter.format(date);
// Tue, 09 Jan 2002 22:14:02 -0500 
```

# c - 在 C 中使用 mmap 读取二进制文件时出现段错误

> ID：10164364
> 
> 赞同：4
> 
> 时间：2012-04-15T17:30:35.053
> 
> 标签：c, binaryfiles, mmap

我试图在 C 中使用 mmap 只是为了看看它是如何工作的。目前我正在尝试使用 mmap 逐字节读取二进制文件。我的代码是这样的：

```
#include <unistd.h>
#include <sys/types.h>
#include <sys/mman.h>
#include <stdio.h>
#include <stdlib.h>
#include <fcntl.h>    

int main(int argc, char *argv[]) {
    int fd;
    char *data;

    for ( int i = 1; i<argc; i++)
    {

        if(strcmp(argv[i],"-i")==0)
            fd = open(argv[i+1],O_RDONLY);
    }

    data = mmap(NULL, 4000, PROT_READ, MAP_SHARED, fd, 8000);
    int i = 0;
    notation = data [i];
    // ......

} 
```

当我尝试 notation = data[0] 并且我得到一个 segfault 时，就会出现我的问题。我确信二进制文件中的第一个字节也是一个字符。我的 for 循环在编译时检查是否有 -i 标志，如果有下一个参数应该是文件名。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T17:40:07.823

看来 mmap 失败了，因为偏移量不是页面大小的倍数。您可以使用 perror 对此进行测试，并查看问题是无效参数。如果你写：

```
data = mmap(NULL, 4000, PROT_READ, MAP_SHARED, fd, 8000);
perror("Error"); 
```

至少在我的 OS X 上会打印以下错误：

错误：参数无效

将偏移量从 8000 更改为 4096 或 8192 有效。6144 没有，所以在这个平台上它必须是 4096 的倍数。顺便，

```
printf("%d\n",getpagesize()); 
```

打印 4096。对于 mmap，您应该将偏移量向下舍入到最接近的倍数，并在访问该区域时将余数添加到 i。当然，从该函数获取特定平台的页面大小。它可能在您已经声明的 unistd.h 中定义。

以下是如何正确处理偏移量并处理可能出现的错误。它打印位置 8000 处的字节：

```
int offset = 8000;
int pageoffset = offset % getpagesize();

data = mmap(NULL, 4000 + pageoffset, PROT_READ, MAP_SHARED, fd, offset - pageoffset);
if ( data == MAP_FAILED ) {
    perror ( "mmap" );
    exit ( EXIT_FAILURE );
}
i = 0;
printf("%c\n",data [i + pageoffset]); 
```

# wcf - HTTP 错误 404.0 - 尝试在本地访问 wcf 时未找到

> ID：10164369
> 
> 赞同：1
> 
> 时间：2012-04-15T17:31:10.223
> 
> 标签：wcf, localhost, http-status-code-404

我得到这个

HTTP 错误 404.0 - 未找到 您要查找的资源已被删除、名称已更改或暂时不可用。

尝试从我的浏览器访问服务时。这是我的配置。

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.serviceModel>

        <services>
            <!-- Note: the service name must match the configuration name for the service implementation. -->
            <service name="WcfServiceLibrary.Service1" behaviorConfiguration="MyServiceTypeBehaviors" >
                <!-- Add the following endpoint.  -->
                <!-- Note: your service must have an http base address to add this endpoint. -->
                <endpoint contract="WcfServiceLibrary.Service1" binding="basicHttpBinding" address="http://localhost/service1" />
                <endpoint contract="IMetadataExchange" binding="mexHttpBinding" address="http://localhost/service1/mex" />
            </service>
        </services>

        <behaviors>
            <serviceBehaviors>
                <behavior name="MyServiceTypeBehaviors" >
                    <!-- Add the following element to your service behavior configuration. -->
                    <serviceMetadata httpGetEnabled="true" httpGetUrl="http://localhost/service1" />
                </behavior>
            </serviceBehaviors>
        </behaviors>

    </system.serviceModel>

</configuration> 
```

当我在 Web 浏览器中键入[http://localhost/service1](http://localhost/service1)时，我得到 404。但是如果我删除下面的 app.config 并在后面的代码中简单地执行此操作

```
string serviceUrl = "http://localhost/service1";
 Uri uri = new Uri(serviceUrl);
 host = new ServiceHost(typeof(Service1), uri);
host.Open(); 
```

一切正常...有什么想法吗？看起来很简单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T20:46:27.317

我认为您缺少服务下的主机元素：

```
<service name="WcfServiceLibrary2.Service1">
    <host>
        <baseAddresses>
            <add baseAddress = "http://localhost/service1" />
        </baseAddresses>
    </host>
    <endpoint address ="" binding="wsHttpBinding" contract="WcfServiceLibrary2.IService1">
        <identity>
            <dns value="localhost"/>
        </identity>
    </endpoint>
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
</service> 
```

那么服务主机不需要URL。

```
 static void Main(string[] args)
    {
        var host = new ServiceHost(typeof(Service1));
        host.Open();

        Console.WriteLine("Host running");
        Console.ReadLine();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T14:53:57.273

您可以在浏览器中显示[http://localhost/service1?Wsdl](http://localhost/service1?Wsdl)但 mex 仅适用于添加服务引用或 WCFTestClient (C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE)，因为您将获得 HTTP Bad Request 错误来自浏览器发出 HTTP GET 请求，其中消息的内容在 HTTP 标头中，并且正文为空。

这正是 WCF mexHttpBinding 所抱怨的。

# c# - 姓氏“未处理 IndexOutOfRangeException”

> ID：10164383
> 
> 赞同：1
> 
> 时间：2012-04-15T17:32:18.627
> 
> 标签：c#, indexoutofboundsexception, unhandled

“IndexOutOfRangeException 未处理”

```
string ebtocosname;
ebtocosname = webBrowser2.Document.GetElementById("Fullname").GetAttribute("value");
var NAMES = ebtocosname.Split();

 webBrowser1.Document.GetElementById("FirstName").SetAttribute("value", NAMES[0]);

 webBrowser1.Document.GetElementById("LastName").SetAttribute("value", NAMES[1]);     // This line here shows that IndexOutofRangeException was unhandled 
```

“Fullname”的值只有一个名字。因此，它应该只在“FirstName”中写入 NAMES[0]，而在“LastName”中留空。

但是但是但是它停止了，它表明代码的最后一行是“IndexOutOfRangeException 未处理”

而且，只有当“Fullname”的值上有两个名字时，它才能正常工作。

我怎样才能使它以这样的方式工作，即使“全名”的值中没有 NAMES[1]，它也不会停止？

我要做的是通过将“全名”的值拆分为“名字”和“姓氏”来转移它的值。但有时“全名”的值不包含姓氏......然后我的程序停止并说“IndexOutOfRangeException 未处理”

请帮我！我怎样才能使这项工作，当变量 NAMES[1] 在“全名”中不存在时，我写了很多 IF 语句来处理这种情况，但它仍然显示“”IndexOutOfRangeException 未处理“

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T17:35:59.287

只需检查您的拆分是否产生了矿石或两个值：

```
if(NAMES.Length == 2)
   webBrowser1.Document.GetElementById("LastName").SetAttribute("value", NAMES[1]); 
```

当然，这假设您没有其他问题，例如：

*   用户没有输入任何输入
*   用户输入了两个以上的名字
*   用户输入了一些不可接受的字符

等等

您应该更仔细地计划您的输入验证，以捕捉任何其他奇怪的行为。

# ios4 - iCloud 备份问题是否会出现在 iOS SDK 版本较低的应用程序中？

> ID：10164385
> 
> 赞同：0
> 
> 时间：2012-04-15T17:32:21.793
> 
> 标签：ios4, icloud, ios5

我使用 Xcode 4.0.2 和 iOS 4 SDK 开发了我的应用程序。目前我在文档目录中存储了大量文档和文件。

从 iOS5 开始，存储在 Document 目录中的文件和文档在与 iTunes 同步时会自动移动到 iCloud。

我的问题是它是否会影响使用 iOS4 或 iOS3 等 SDK 构建的 iOS 应用程序。我们是否需要添加额外的代码来禁用较低版本中的备份选项，例如 iOS 5.1 iCloud 禁用功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:05:00.673

是的，您需要一些额外的代码来防止这种备份，请参考以下链接： [iOS 5.0.1：如何验证文件夹是否标记为 iCloud 的“不备份”？](https://stackoverflow.com/questions/8117284/ios-5-0-1-how-to-verify-that-the-folder-is-marked-as-do-not-back-up-for-iclo)

# ajax - 如何重构 Django 站点以使其可以扩展

> ID：10164392
> 
> 赞同：2
> 
> 时间：2012-04-15T17:33:23.680
> 
> 标签：ajax, django, scalability, load-balancing

根据以下 Stack Overflow 问题：[Django 是否可以扩展？](https://stackoverflow.com/questions/886221/does-django-scale)Django 非常适合预计每天/每月有数千名用户的网络应用程序，但是要实现这一点，您必须有正确的设计。

现在我的情况如下：

我刚刚加入一家初创公司，担任技术主管/首席开发人员，虽然我有 3 年的 Django 经验，但我从未将它用作大型应用程序。我参与的最新大型应用程序使用了 Zope，并依靠 SQL Server 来处理缓存等（我认为这是可怕的做法）。鉴于这家初创公司成立 6 个月后现在只有大约 20,000 名用户，而且他们在雇佣我的同时还雇佣了一名营销专家，我可以预期（或至少希望预期）一个增长机会. 许多现有的 Django 代码需要重构；即使用静态html表单而不是ModelForm等。

我的问题是：当我重构这个应用程序时，我应该遵循哪些设计模式才能正确完成它，以便我们可以扩展到每月 100,000 到 500,000 个用户？我应该注意哪些问题？在模型设计方面，什么是可扩展模型设计？在数据库支持方面，什么样的数据库设置可以帮助我实现这种可扩展性？在负载均衡方面，什么样的架构适合负载均衡？

我假设使用开箱即用的 Django，不会实现这一点，而且我不想发现自己处于需要聘请可扩展性专家的情况......我也想知道有哪些负载我可以用来测量当前性能/可扩展性的测试技术/工具？我才和他们在一起几天，所以我还不确定 prod 环境，所以如果我觉得我需要更改 prod 环境，有什么好的选择（云解决方案），合适但负担得起吗？

编辑：他们似乎也在使用 Ajax，这让我很担心。假设我无法说服他们改变这一点，那么有哪些好的 Ajax 技术库（我知道 django-dajax/dajaxice）可以使用并且仍然具有可扩展性。

谢谢，

山姆

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T22:54:23.990

不幸的是，您的问题没有很多细节。谷歌搜索将产生大量关于扩展 django 的信息。

[http://www.morethanseven.net/2011/06/30/Django-performance-1-measuring-performance.html](http://www.morethanseven.net/2011/06/30/Django-performance-1-measuring-performance.html)

此链接提供了大约 5 种不同的方法来衡量不同的性能指标。由于我无法告诉您有关如何扩展您的应用程序的具体细节，因此这里有一些适用于任何网站的通用原则。

1.  确保静态媒体由您的 Web 服务器提供，而不是由 django
2.  确保你描述了一切 EXPLAIN 是至关重要的。
3.  尽可能缓存所有内容。内存快如闪电，django 使其易于实现。
4.  请注意模板中的 django ORM 陷阱。使用 django-debug 工具栏确保在迭代结果集时不会无意中进行多个查询。
5.  对于数据库，请确保您的数据已标准化。
6.  最好使用 CDN 并确保您的 Web 服务器和 DB 服务器位于不同的机器上。

不要过早优化！！Django 可以开箱即用地处理很多。我不会担心 ajax 或模型表单或任何东西，除非您发现它们是您发展网站的特定瓶颈。我相信与性能同样重要的是确保您的网站是模块化的、受版本控制且易于移动。这将有助于开发，当您变得足够大时，您可以立即启动新机器。

# html - 仅将边框图像用于底部边框？我们的 CSS 似乎是在整个 div 中复制图像

> ID：10164393
> 
> 赞同：16
> 
> 时间：2012-04-15T17:33:49.197
> 
> 标签：html, css

我们只想将图像用于 DIV 的底部。然而，我们的 CSS 以某种方式在 DIV 的主体上复制了图像，而不是将其放置在底部。

我们做错了什么？

我们只需要支持移动Safari。

示例：http: [//jsfiddle.net/ZwnF8/](http://jsfiddle.net/ZwnF8/)

代码：

```
<div></div>​

div { background:gray; 
      width:100px;
      height:100px;
      margin-left:20px;
      -webkit-border-image:url(http://www.panabee.com/images/dumpling/footer_list.png) 0 0 8 0 round
     }​ 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2015-05-20T08:46:03.900

**方法1：**将`0`宽度设置为全部（除`border-bottom`）：

```
border-image:url("http://lorempixel.com/g/400/100/?example.jpg");
border-top:0;
border-left:0;
border-right:0;
// btw, you can use "one-line" command>   border-width: 0 0 3px 0; 
```

**方法2：**使用style.css，创建 **`::AFTER`**伪元素：

```
.yourDiv::after { 
    content:"";
    height:20px; 
    width:100%; /* or i.e: 500px */
    background:url("http://lorempixel.com/g/400/100/?example.jpg");
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-20T20:51:13.200

您已将其定义为“圆形”重复： [http ://www.w3schools.com/cssref/css3_pr_border-image-repeat.asp](http://www.w3schools.com/cssref/css3_pr_border-image-repeat.asp)

以下是定义每个单独属性的方法：

```
div { background:gray; 
      width:100px;
      height:100px;
      margin-left:20px;
      -webkit-border-image:url(http://www.panabee.com/images/dumpling/footer_list.png);
      -webkit-border-image-width: 0 0 8px 0;
      -webkit-border-image-repeat: stretch;
      border-image: url(http://www.panabee.com/images/dumpling/footer_list.png);
      border-image-width: 0 0 8px 0;
      border-image-repeat: stretch;
     }
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-15T17:41:41.863

尝试使用 -webkit-border-bottom-image 。不要忘记包括非 webkit 浏览器。这是一个有用的链接：[http ://css-tricks.com/understanding-border-image/](http://css-tricks.com/understanding-border-image/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-01T05:35:18.713

我不知道 safari mobile 但我在小提琴上杀死了你的 css 的边界部分并将它放在你的 div 下方：

```
<div></div><img src="http://www.panabee.com/images/dumpling/footer_list.png" style="height:20px;width:100px;margin-left:20px;"/> 
```

它做了你想要的。Safari手机不支持这样的东西吗？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-02-20T11:42:29.003

看看这个[jsfiddle.net/ocewa9sm/](https://jsfiddle.net/ocewa9sm/)

```
#borderimg {
 background: #dfdfdf;
 padding: 15px;
 position: relative;}

#borderimg:after {  
 content: "";
 border-bottom: 16px solid transparent;
 width: 100%;
 position: absolute;
 left: 0;
 bottom: -16px;

 -webkit-border-image: url(http://www.panabee.com/images/dumpling/footer_list.png); 
 -o-border-image: url(http://www.panabee.com/images/dumpling/footer_list.png);
 border-image: url(http://www.panabee.com/images/dumpling/footer_list.png) ;

 border-image-slice: 8;
 border-image-width: 8px;
 border-image-outset: 0;
 border-image-repeat: stretch;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-11-12T08:12:42.570

这用于将边框图像放在 div 的底部

```
 <html>
        <head>
           <style>
           .target{
        height:100px;
        width:100px;
        border-image: url(Images/line.png) 0 0 5 0;
        border-top: 0px;
        border-left: 0px;
        border-right: 0px;
        border-bottom:8px;
        } 
       </style>
       </head>
       <body>
         <div class="target">

         </div>
         </body>
        </html> 
```

# python - 发布到 Facebook 个人资料墙 + Facebook.py + Python + App Engine

> ID：10164394
> 
> 赞同：2
> 
> 时间：2012-04-15T17:33:51.760
> 
> 标签：python, google-app-engine, facebook-graph-api

我已经尝试了类似问题等的一些建议。这些都没有帮助我的情况。

我在具有 Python 解决方案的 Google App Engine 中使用根据 Apache 许可证获得许可的 Facebook.py。

我已经使用我的有效访问令牌创建了 GraphAPI 对象。它显示在 App Engine 日志中：

```
Graph >>> facebook.GraphAPI object at 0x64cc19e10b2ceb90 
```

因此，创建 GraphAPI 对象后，

```
graph.put_object('Valid Facebook User ID', "feed", 
message="Hello world", link="http://example.com") 
```

这是抛出错误日志，如下所示：

```
HTTP Error 400: Bad Request: 
Traceback (most recent call last):
  File "/base/python_runtime/python_lib/versions/1/google/appengine/ext/webapp/_webapp25.py", line 701, in __call__
    handler.get(*groups)
  File "/base/data/home/apps/s~/development.358229427391780612/handler/profile_handlers.py", line 401, in get
    graph.put_object(self.user.user_id, "feed", message="Hello world", link="http://example.com")
  File "/base/data/home/apps/s~/development.358229427391780612/facebook.py", line 129, in put_object
    return self.request(parent_object + "/" + connection_name, post_args=data)
  File "/base/data/home/apps/s~/development.358229427391780612/facebook.py", line 181, in request
    file = urllib2.urlopen(graphUrl, post_data)
  File "/base/python_runtime/python_dist/lib/python2.5/urllib2.py", line 124, in urlopen
    return _opener.open(url, data)
  File "/base/python_runtime/python_dist/lib/python2.5/urllib2.py", line 387, in open
    response = meth(req, response)
  File "/base/python_runtime/python_dist/lib/python2.5/urllib2.py", line 498, in http_response
    'http', request, response, code, msg, hdrs)
  File "/base/python_runtime/python_dist/lib/python2.5/urllib2.py", line 425, in error
    return self._call_chain(*args)
  File "/base/python_runtime/python_dist/lib/python2.5/urllib2.py", line 360, in _call_chain
    result = func(*args)
  File "/base/python_runtime/python_dist/lib/python2.5/urllib2.py", line 506, in http_error_default
    raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)
HTTPError: HTTP Error 400: Bad Request 
```

最初，我将大量附加数据作为附件（链接、描述等）。但是，在减少附件元素之后，它仍然会抛出相同的错误。而且，我正在使用 put_wall_post 的方法。有些人建议改用 put_object。

尝试在论坛中搜索了很多，但仍然无法解决一些建议的问题。

知道主要问题是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T06:24:32.133

我已经自己解决了发布的问题。对于那些仍在尝试解决此问题并且可能会遇到相同可能错误的人，让我分享解决方案。

如前所述，我不知道也不知道我们向用户请求的权限仅授予基本访问信息。

由于 facebook.py 的原始解决方案：

```
if response.get("error"):
           raise GraphAPIError(response["error"]["type"],
                              response["error"]["message"]) 
```

引发自定义异常总是不好的，因为它不能反映真正的异常，从而使调试变得更加困难。提供的原始自定义异常引发了以下异常：

```
HTTP Error 400: Bad Request 
```

这通常与错误的 URL 形式等有关。

因此，怀疑这一点，我将异常更改为：

```
if response.get("error"):
    raise 
```

这样，它将引发它捕获的实际异常：

```
HTTP Error 403: Forbidden 
```

通过遇到真正的异常，我很快怀疑是授权问题还是 Facebook 用户权限问题。所以，要解决这个问题，：

```
FB.login(function(response) {
    // handle the response
}, {scope: 'publish_actions'}); 
```

在这里，应该解决引发 HTTP 错误 403：禁止的异常的问题。干杯！

# iphone - 将 Facebook 添加到应用 Xcode

> ID：10164396
> 
> 赞同：0
> 
> 时间：2012-04-15T17:34:15.787
> 
> 标签：iphone, ios, facebook, twitter, fbconnect

我只是希望用户能够将他们的分数发布到 Facebook 墙上。类似于他的 twitter 框架。我已经研究了 FBConnect，但这比我希望应用程序做的要多。我希望它可以简单地发布分数。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T18:26:37.853

即使您只想将分数发布到 Facebook 墙上，您也必须遵守 Facebook 规则。为了保护用户的隐私，Facebook 希望您注册您的应用并要求用户登录并授权您的应用与其帐户进行交互。

实际上，我认为 FBConnect 是实现目标的最简单方法。否则，您可以创建自己的类来管理任何单个必需的步骤，但您仍然必须要求您的用户登录并授权交互。

不幸的是，恐怕没有任何解决方法可以简化...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-13T12:16:12.793

我建议遵循 Facebook 规则，但此代码有效：

```
- (IBAction)buttonPostMessageFacebook:(id)sender {
    NSString *stringFacebookKey = [[NSUserDefaults standardUserDefaults] stringForKey:@"key_Facebook"];

    if ([stringFacebookKey isEqual:@"1"]) {
        NSString *postText = [NSString stringWithFormat:@"I just posted a message to Facebook with an image named ''socialsharing-facebook-image.jpeg'' !"];
        UIImage *postImage = [UIImage imageNamed:@"socialsharing-facebook-image.jpeg"];

    SLComposeViewController *composeController = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];

    [composeController addURL: [NSURL URLWithString:@"http://www.montronik.com"]];
    [composeController setInitialText:postText];
    [composeController addImage:postImage];

    [self presentViewController:composeController animated:YES completion:nil];
}; 
```

# ruby-on-rails - 如何通过关联获取has_many的所有项目

> ID：10164397
> 
> 赞同：0
> 
> 时间：2012-04-15T17:34:24.280
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我有一个帖子模型，它通过标签有很多标签。比方说：

```
@posts = Post.followed_by(@user) 
```

我想获取@posts 的所有标签。

我可以这样做：

```
@posts.each do |post|
  @tags << post.tags
end 
```

我怎样才能以更有效的方式做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T17:43:02.397

试试这个：

```
Tag.joins(:taggings).where(taggings: {post_id: @posts.map(&:id)}) 
```

如果`@posts`是关系（不是数组），您可以简化查询：

```
Tag.joins(:taggings).where(taggings: {post_id: @posts}) 
```

# ruby - Ruby:: call_user_func_array() 的模拟

> ID：10164398
> 
> 赞同：0
> 
> 时间：2012-04-15T17:34:35.873
> 
> 标签：ruby

Ruby 中有 call_user_func_array() 模拟吗？以及如何从包含类名的字符串创建类。我发现只有“eval”...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T18:14:06.820

如果要调用动态方法名称，请使用`send`：

```
user.send("method_#{i}") 
```

这，如果`i = 1`将调用`method_1`on`user`对象。

`Ruby`使用术语“一个对象向另一个对象发送消息”而不是“调用方法/函数”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T20:27:32.103

使用 Array a 提供的参数调用*str*给出的函数*：*

```
obj.send str, *a 
```

*你怀疑eval*是正确的。Ruby 中几乎总是有更好的方法。要使用字符串检索类对象，请使用：

```
Kernel.const_get str 
```

因此，例如：

```
> class A; end
> Kernel.const_get('A').class
 => Class 
> Kernel.const_get('A').new
=> #<A:0x100360ac8> 
```

我应该补充一点，在 Ruby 中通常不需要基于包含其常量名称的字符串来查找类。在 Ruby 中，类是真实的对象，因此可以直接将它们存储在集合中，将它们分配给常量和变量等，最后调用类方法例如`#new`：

```
(some expression).new 
```

# c# - 为什么不能显式实现的成员不能公开？

> ID：10164399
> 
> 赞同：0
> 
> 时间：2012-04-15T17:34:40.160
> 
> 标签：c#, oop

> **可能重复：**
> [为什么接口的显式实现不能公开？](https://stackoverflow.com/questions/1253266/why-explicit-implementation-of-a-interface-can-not-be-public)

[我读了这个问题](https://stackoverflow.com/questions/10163384/why-cant-i-expose-an-implemented-interface-method)。直接从问题

```
interface IRepository<T>
{
    void AddString();
}

interface IStringRepo : IRepository<string>
{
    List<string> GetStrings();
}

public class BLL : IStringRepo
{
    public List<string> FilterStrings()
    {
        return new List<string>() { "Hello", "World" };
    }

    public List<string> IStringRepo.GetStrings()
    {
        throw new NotImplementedException();
    }

    public void IRepository<string>.AddString()
    {
        throw new NotImplementedException();
    }
} 
```

**为什么公开明确引用的成员是一个`Error`？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T17:39:58.117

> 为什么将显式引用的成员公开是一个错误

这是设计使然，想象一下迫使开发人员显式实现接口的最流行的原因之一：*成员名称歧义*，因此您有一个现有的类已经公开了具有某些名称的公共成员，并且您不能更改现有的类 API，因为它被其他系统使用，所以您不能更改接口 API（成员名称/签名），并且类和接口都定义了具有相同名称的成员，因此为`public`接口成员提供访问修饰符没有意义，因为成员具有已经在类中声明了相同的名称。

MSDN，[13.4.1 显式接口成员实现](http://msdn.microsoft.com/en-us/library/aa664591%28v=vs.71%29.aspx)

> 在方法调用、属性访问或索引器访问中，无法通过其完全限定名称访问显式接口成员实现。显式接口成员实现只能通过接口实例访问，并且在这种情况下仅通过其成员名称引用。
> 
> 显式接口成员实现包含访问修饰符是编译时错误，包含修饰符 abstract、virtual、override 或 static 是编译时错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T17:48:47.833

因为它们不公开，所以这是一种冲突

您必须`choice`以任何一种方式实现 - 显式或隐式。

如果是明确的，通常
**是因为实施者希望强制您仅通过接口访问它，并且以某种方式对**公众隐藏它（简化） - 因此它不是公开的。

简而言之，这是显式实现的目的之一。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-15T17:39:44.817

没有*任何理由这样*做`public`，因为通过与它签订合同，您*别无选择*，然后像公众一样实施其所有成员。

但是为什么要报错呢？

原因很简单，根据定义，所有接口成员都是公共的。

[接口](http://msdn.microsoft.com/en-us/library/ms173156.aspx)

> 接口由方法、属性、事件、索引器或这四种成员类型的任意组合组成。接口不能包含常量、字段、运算符、实例构造函数、析构函数或类型。它不能包含静态成员。接口成员是自动公开的，它们不能包含任何访问修饰符。

# google-app-engine - 无法查询列表 GAE JDO 中的子字段

> ID：10164400
> 
> 赞同：0
> 
> 时间：2012-04-15T17:34:43.900
> 
> 标签：google-app-engine, google-cloud-datastore, jdoql

我见过很多例子，但似乎没有一个适合我的问题。我在 GAE (Java) 中使用 JDO。我没有收到任何错误消息。当我知道应该有结果时，我只是没有得到结果，否则结果与 dispatchId 的空列表匹配对象。任何帮助将不胜感激！

这是我的相关课程代码：

```
public class Department {

  @PrimaryKey
  @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
  private Long id;

...  

  // a list of codes that a department might be identified by
  @Persistent
  private List<String> dispatchId; 

} 
```

我正在尝试查找其 dispatchId List 包含特定 dispatchId 代码的部门。我的 Java servlet 代码是：

```
String dispatchId = "1353000"; // may contain letters and/or numbers
Query q = pm.newQuery(Department.class, ":dispatchId.contains(dispatchId)");
@SuppressWarnings("unchecked")
List<Department> depts = (List<Department>) q.execute(dispatchId); 
```

在 GAE 数据存储查看器（在 GAE 上直播）中，我的测试部门的 dispatchId 字段如下所示（以防万一）：

[u'1353000', u'0566940', u'0566936', u'1368496']

再次感谢您的任何意见...约翰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T23:59:24.100

您好，您还在寻找答案吗？

这是一个解决方案：

```
String dispatchId = "someId";
Query query = pm.newQuery(Department.class);
query.setFilter("dispatchId == '"+ dispatchId + "'");
List<Department> depts = (List<Department>) query.execute(); 
```

在这里，您需要一个单引号将参数括起来。

# iphone - 在objective-c中如何使用属性的实际例子？

> ID：10164401
> 
> 赞同：2
> 
> 时间：2012-04-15T17:35:11.957
> 
> 标签：iphone, objective-c, ios, cocoa-touch, properties

我很难理解如何理解将属性设置为变量和对象的实际用途。我尝试阅读许多教程和苹果文档，但我仍然无法理解为什么我们应该使用属性以及为什么我们需要合成属性？考虑到我们声明

```
@property(nonatomic,retain) NSString *str; 
```

为什么我们需要声明一个属性。据我了解，我们可以`str`通过您的课程访问字符串对象。但是为什么我们需要在这里创建一个属性呢？

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T17:41:42.220

属性通常用于从类外部访问实例变量。

例如，如果你有一个指向你的类的指针，你可以像这样获取/设置属性

```
someObject.str = @"some string"; 
```

您还必须对`@synthesize`属性，通常是这样的：

```
@synthesize str = _str; 
```

在该片段中，`_str`是属性设置和获取的实例变量。

这些属性本质上只是创建访问器（setter/getter）的快捷方式。

例如，使用您的属性的 setter 看起来像这样：

```
- (void)setStr:(NSString *)str {
    if(str != _str) {
        [_str release];
        _str = [str retain];
    }
} 
```

吸气剂看起来像这样：

```
- (NSString *)str {
    return _str;
} 
```

通过创建属性，会自动为您创建前两个代码块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T17:40:18.023

属性是一个公共接口，它使**其他**对象能够在声明变量的对象内检查和设置变量的值。

您可以通过编写获取和设置变量值的显式方法来实现相同的目的。

请注意，当您深入了解它时，Objective-C 中的属性/合成对实际上是编译器使用定义明确的模式为您构建这些方法的简写。

因此在objective-c

```
@property(nonatomic,retain) NSString *str;
....
synthesize str;
... 
```

最终创建了两个方法，定义为：

```
void setStr:(NSString*) value;
NSString* str; 
```

还有那个文字

```
Object.str = @"Hello world";
NSString* value = Object.str; 
```

分别转换成：

```
[Object setStr:@"Hello world"];
NSString* value = [Object str]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T09:37:06.533

属性的使用是 Obj-C 为程序员提供的一种工具。

您可以编写带有或不带有属性的程序。

您可以将属性与`@synthesize`编译器指令结合使用。

属性声明指示编译器声明 getter/setter 方法对。您必须手动编写 setter 和 getter。此属性声明允许您使用点符号来访问实例变量。编译器会将点表示法转换为适当的 getter/setter 方法。

您可以使用该`@synthesize`指令告诉编译器为 getter/setter 方法生成代码。

使用属性，您必须编写更少的代码，并且可以使用点表示法。另一种方式，不使用属性，您必须编写 getter/setter 方法，并且不允许使用点表示法。

但是你可以用任何一种方式编写程序。因此，由您决定使用属性并合成它们。

# javascript - 在不更改地址栏的情况下跳转到内部链接？

> ID：10164411
> 
> 赞同：1
> 
> 时间：2012-04-15T17:36:15.130
> 
> 标签：javascript, html

通常人们要求更改地址栏而不刷新，我想要相反：我想跳转到页面中的锚点，例如有

```
<a name="foo"> 
```

然后实现与用户按下相同的功能

```
<a href="#foo"> 
```

无需更改地址栏。这纯粹是装饰性的，但这意味着像“完成后再次设置 window.location”这样的建议将无济于事，因为中间更改仍然很明显（地址栏会闪烁，这正是我想要的避免）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T17:43:17.570

有DOM功能[`element.scrollIntoView()`](https://developer.mozilla.org/en/DOM/element.scrollIntoView)。出于您的目的，这将像这样工作：

```
var target = document.getElementById('foo');
target.scrollIntoView(); 
```

您还应该删除`<a name="foo">`链接，并将它们替换为任何具有 id 的元素。例如：

```
<h1><a name="heading"></a>Heading</h1>

<h1 id="heading">Heading</h1> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T17:38:01.860

看看，jquery ScrollTo 插件，[http: //demos.flesler.com/jquery/scrollTo/](http://demos.flesler.com/jquery/scrollTo/)

# javascript - 正则表达式？：性能

> ID：10164413
> 
> 赞同：0
> 
> 时间：2012-04-15T17:36:33.617
> 
> 标签：javascript, regex

`/(everything|cool)/gi`这个正则表达式：和这个：有什么区别`/(?:everything|cool)/gi`？

我问这个是因为我有一个*我自己无法编写*的正则表达式* 并且正如您在下面看到的那样，`?:`该正则表达式中有很多内容。我读过某处`?:`对性能不好的地方，所以我想删除它。我可以删除它还是它对任何事情都很重要？

*`(?:(?=(?:(?:\\.|"(?:\\.|[^"\\])*"|[^\\'"])*'(?:\\.|"(?:\\.|[^"'\\])*"|[^\\'])*')*(?:\\.|"(?:\\.|[^"\\])*"|[^\\'])*$)(?=(?:(?:\\.|'(?:\\.|[^'\\])*'|[^\\'"])*"(?:\\.|'(?:\\.|[^'"\\])*'|[^\\"])*")*(?:\\.|'(?:\\.|[^'\\])*'|[^\\"])*$)(?:\\.|[^\\'"]))+`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T17:39:18.333

`(?:...)`很好。当*捕获*组，尤其是对它们的反向引用时，您会开始看到性能下降。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-15T17:39:22.660

如果没有`?:`，则会创建对匹配组的引用。
使用 a `?:`，该组被匹配，但未被捕获。

这是两种方法的基准：http: [//jsperf.com/regex-capture-vs-non-capture](http://jsperf.com/regex-capture-vs-non-capture)

通过查看条形图，可以说未捕获的组更快。但是，如果您查看底部，则可以忽略差异，因为这两种方法都已经非常快了。

删除或添加`?:`到现有解决方案可能会破坏代码，因此我建议在没有引起任何问题时不要编辑 RegExp。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-15T17:41:10.083

你应该听说过`(foo)`比 慢`(?:foo)`。这是因为第一个是*捕获组*，第二个*是非捕获组*。第二个要做的工作更少（它不需要记住匹配的文本），所以它应该更快。

# mysql - 在codeigniter中，我需要以这样的方式使用`count`

> ID：10164416
> 
> 赞同：2
> 
> 时间：2012-04-15T17:37:21.470
> 
> 标签：mysql, codeigniter

我需要一个查询来获取某些事件的数量。换句话说，我需要一个 CodeIgniter 方法，这样查询会产生如下内容：

```
SELECT COUNT( * ) AS total FROM comments WHERE `level`= 4 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T17:49:36.033

```
$this->db->select('count(*)');
$this->db->from('comments');
$this->db->where('level','4');
$query = $this->db->get();
echo $query->num_rows(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-08T08:46:50.230

```
 $this->db->select('count(*) as total');  
    $this->db->from('comments');
    $this->db->where('level', 4);
    $sql   = $this->db->return_query();
    /*debug*/ 
    /*echo 'sql:: '.$sql;*/
    $query = $this->db->get(); 
    $arr   = $query->row_array(); 
    $total = $arr['total']; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-15T17:45:33.840

```
$query = $this->db->query("SELECT COUNT(*) AS total FROM comments WHERE `level`= 4");
echo $query->result_array(); 
```

**或者**

```
$this->db->query("SELECT COUNT(*) AS total FROM comments");
$this->db->where("`level`= 4"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-15T18:08:17.253

我想你会喜欢这样的：

```
$count = $this->db->where("level","4")->count_all_results("comments"); 
```

[http://codeigniter.com/user_guide/database/active_record.html](http://codeigniter.com/user_guide/database/active_record.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-15T17:42:22.057

你总是可以使用

```
$this->db->query('SELECT COUNT( * ) AS total FROM comments WHERE `level`= 4'); 
```

# ios - iOS，如何使用 NSArray 确定 plist 中字符串列表中的字长

> ID：10164421
> 
> 赞同：1
> 
> 时间：2012-04-15T17:37:52.720
> 
> 标签：ios

我有一个包含数千个字符串的 plist。

```
<plist version="1.0">
 <array>
 <string>Hello</string>
 <string>Guitar</string>    
 <string>Geronimo</string>
  ......
 </array>
</plist> 
```

如您所见，每个字符串都有一定的长度。
我正在将单词加载到 NSMutableArray 中：

```
NSMutableArray *theList = [[NSMutableArray alloc] initWithContentsOfFile: [[NSBundle mainBundle] pathForResource:@"myplist" ofType:@"plist"]]; 
```

我现在想遍历 theList 中的所有字符串并确定每个单词的长度，以便我可以根据字符串长度对它们进行分类。

这个环境的新手 - 我尝试了几种变体，但可能没有使用正确的语法。我如何用目标 c 做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T17:42:56.983

首先，你不需要一个可变数组；一个`NSArray`就好了。

```
for (NSString *string in theList)
{
    NSUInteger length = string.length;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T17:41:05.337

```
for (NSString *str in theList) {
    unsigned int lengthOfStr = [str length]; 
} 
```

# c++ - 使用 Qt 的两个按钮和一个标签之间的基本交互

> ID：10164422
> 
> 赞同：1
> 
> 时间：2012-04-15T17:37:57.033
> 
> 标签：c++, qt

我是 Qt 编程的新手，我对下面的代码有一些问题。我想用一个标签创建一个简单的两按钮应用程序。一个按钮用于正增量一，另一个按钮用于减一。单击加号或减号按钮后，标签应更新。但它不起作用。任何想法为什么代码不起作用？我收到元素函数 void 的编译器错误。但是错误消息相当不具体。

我检查了互联网（密集的谷歌搜索以及在 stackoverflow 上）的解决方案，但我找不到解决方案。我非常感谢任何直接帮助或与其他网站/链接的链接。如果我应该改写问题或添加更多信息，请告诉我。谢谢你的时间。斯特凡

```
#include "widget.h"

int counter = 0;

Widget::Widget(QWidget *parent) :
QWidget(parent)
{
    setFixedSize(200, 120);

    QPushButton *Plus = new QPushButton(tr("+"), this);
    Plus -> setGeometry(62, 40, 75, 30);
    Plus -> setFont(QFont("Times", 10, QFont::Bold));

    QPushButton *Minus = new QPushButton(tr("-"), this);
    Minus -> setGeometry(62, 40, 75, 30);
    Minus -> setFont(QFont("Times", 10, QFont::Bold));

    QLabel *MyLabel = new QLabel();
    MyLabel ->setAlignment(Qt::AlignCenter);
    MyLabel ->setGeometry(62, 40, 75, 30);
    MyLabel ->setNum(counter);

    QVBoxLayout *layout = new QVBoxLayout;
    layout ->addWidget(MyLabel);
    layout ->addWidget(Plus);
    layout ->addWidget(Minus);
    setLayout(layout);

    connect(Plus, SIGNAL(clicked()), this, SLOT(myClickPlus()));
    connect(Minus, SIGNAL(clicked()), this, SLOT(myClickMinus()));
}

void Widget::myClickPlus(){
    counter ++;
    qDebug("Das ist der Plus-Button");
    MyLabel -> setNum(counter);
}

void Widget::myClickMinus()
{
    counter --;
    qDebug("Das ist der Minus-Button");
    MyLabel ->setNum(counter);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T17:59:29.147

您在 Widget 的构造函数中创建的 MyLabel 是一个局部变量。您在 myClickPlus 和 myClickMinus 成员函数中使用的 MyLabel 是一个成员变量。所以它们是完全不同的实例。

如果您的代码可以编译，那么 Widget 构造函数中的这种更改可能会解决问题：

```
QLabel *MyLabel = new QLabel(); // create local QLabel 
```

-->

```
MyLabel = new QLabel();  // create member QLabel 
```

# gwt - 使用 MySQL 创建 Google Doc 以制作简历模板

> ID：10164423
> 
> 赞同：1
> 
> 时间：2012-04-15T17:38:00.423
> 
> 标签：gwt, google-docs, google-docs-api

我有兴趣创建一种查询数据库然后将该数据导出到 Google Doc 的方法。Google Doc 必须预先格式化/格式化为行业标准。

我的看法：每个员工都是相同的（除了一些小例外），这取决于他们在工作中的时间和他们在当前职位上的时间。设置了这些标准后，就可以使用专门的选项来注释他们的专业和/或额外的职责。所有工作信息和专业工作都是公司范围内的，并且能够进行预先格式化的描述。然后将基于所选标准的数据输出到 Google Docs 进行修订和优化。输出将是员工在公司时间的基本模板，就像简历一样。

我应该怎么做？谷歌文档中是否已经内置了允许这样做的选项？

# macos - Emacs：（几乎）每天在 Mac OS X 上随机崩溃大约 2-3 次

> ID：10164425
> 
> 赞同：8
> 
> 时间：2012-04-15T17:38:17.820
> 
> 标签：macos, emacs

我在 Mac OS X 上是一个快乐的 Emacs 用户已经快一年了。问题是我多次遇到几乎随机的 Emacs 崩溃。我的设置是：

Mac OS X 上的 GNU Emacs 24.0.95.1 (x86_64-apple-darwin, NS apple-appkit-1038.36) [从[http://emacsformacosx.com/builds](http://emacsformacosx.com/builds)安装为 Emacs-pretest-24.0.95-universal-10.6.8 ] 10.7.3\. （之所以使用 Emacs 24 是因为 Gnus 的最新特性）。

主要问题当然是我无法追踪 Emacs 崩溃的原因。有时当我在 org 模式下捕获一个新事件时它会崩溃，今天当我通过拖放向 Gnus 中打开的电子邮件添加附件时它会崩溃——我经常执行这两项任务都没有问题。我发现的唯一提示是[http://www.quora.com/How-can-I-find-the-cause-of-an-Emacs-crash-on-OS-X](http://www.quora.com/How-can-I-find-the-cause-of-an-Emacs-crash-on-OS-X)所以看来我并不孤单。

假设 Emacs 崩溃了，我重新打开了它。如果我在 Finder 中双击一个文件（要在 Emacs 中打开），该文件不会打开。我宁愿得到一个缓冲区，显示我在之前某个时间点加载的文件。如果我再次在 Finder 中双击该文件，它就会被打开。我必须为我想打开的每个新文件执行此操作。简单的解决方案是崩溃后我打开 Emacs，正常关闭它，然后再次打开它。然后它运行良好——直到下一次崩溃:-)

我知道这太模糊了，无法问（？），但我想知道这是否是我的设置特定的问题，特定于 Mac 或 Emacs 24。所以如果有人遇到类似的崩溃，它会很高兴知道。两个 linux 人告诉我，他们大约每个月都会遇到一次崩溃，所以我想还有改进的余地:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T01:08:32.637

我有同样的问题，我可以通过删除所有关于 Emacs的[首选项文件来解决它。](http://www.macobserver.com/tmo/article/mac_os_x_corrupt_preference_files)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T15:04:19.520

如果它崩溃，则问题不在您的配置中。问题可能是由您的配置*触发*的，但问题肯定出在 Emacs 本身。所以请报告它，`M-x report-emacs-bug`以便我们尝试修复它。

# php - 如何解析 HTML 以使用 Jquery 在页面上查找 youtube 或 Vimeo 视频

> ID：10164429
> 
> 赞同：2
> 
> 时间：2012-04-15T17:38:45.677
> 
> 标签：php, jquery

如何使用 Jquery、javascript 或 php 从页面中选择 YouTube 或 Vimeo 视频？

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T17:42:21.643

您可以使用[此问题和答案中讨论的选择器](https://stackoverflow.com/q/8205584/437226)。使用`src^="..."`将让您选择其源属性以某些内容开头的 iframe。

对于 YouTube，您将使用：

```
$('iframe[src^="http://youtube.com/embed/"]') 
```

对于 Vimeo：

```
$('iframe[src^="http://player.vimeo.com/video"]') 
```

# jquery - wordpress 的 jQuery IE 错误：行：3 错误：语法错误，无法识别的表达式：nth- of-type

> ID：10164436
> 
> 赞同：0
> 
> 时间：2012-04-15T17:39:28.510
> 
> 标签：jquery, wordpress, internet-explorer, debugging

我在 wordpress 中建立了一个儿童主题。我正在使用 jQuery 来隐藏和显示子菜单。除 IE 外，所有浏览器都运行良好。在 IE 中，我的 jQuery 都不适用于子菜单。当我尝试调试时，我得到了这个错误。

行：3 错误：语法错误，无法识别的表达式：nth-​​of-type

该错误出现在 wordpress 使用的内置 jQuery 库中。我在自己的 Jquery 中使用了第 n 个类型的选择器，但即使我删除了它们，问题仍然存在。这是我用来控制子菜单的 jQuery

```
if ($("body").hasClass('taxonomy-colordesign')){
$("#hybrid-categories-5 h4").toggleClass("tabDown");//pulls the background image in the tab
$("#hybrid-categories-5 h4").siblings('.dots').toggleClass('active');//activates the little square next to it
$("#hybrid-categories-5 h4").next("ul.xoxo.categories").toggleClass("openTab");//opens up the ul that contains the list of options
$(".menu-main-menu-container li:nth-of-type(3) a").addClass("current");
} 

else if ($("body").hasClass('taxonomy-colorart')){
$("#hybrid-categories-12 h4").toggleClass("tabDown");
$("#hybrid-categories-12 h4").siblings('.dots').toggleClass('active');
$("#hybrid-categories-12 h4").next("ul.xoxo.categories").toggleClass("openTab");
$(" #hybrid-categories-9, #hybrid-categories-3, #hybrid-categories-5").hide();
$(".menu-main-menu-container li:nth-of-type(2) a").addClass("current");

}

else if ($("body").hasClass('taxonomy-mediadesign')){
$("#hybrid-categories-3 h4").toggleClass("tabDown");
$("#hybrid-categories-3 h4").siblings('.dots').toggleClass('active');
$("#hybrid-categories-3 h4").next("ul.xoxo.categories").toggleClass("openTab");
$(".menu-main-menu-container li:nth-of-type(3) a").addClass("current");

} 
```

如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T17:42:51.473

因为第 n 个类型不是有效的 jquery 选择器..

例如。

`$(".menu-main-menu-container li:nth-of-type(2) a").addClass("current");`无效改成

```
 $(".menu-main-menu-container li:eq(2) a").addClass("current"); 
```

您可以参考[http://api.jquery.com/nth-child-selector/](http://api.jquery.com/nth-child-selector/)或[http://api.jquery.com/eq/](http://api.jquery.com/eq/)获取文档

# html - 如何在从 yaml 加载的文本中插入换行符？

> ID：10164437
> 
> 赞同：0
> 
> 时间：2012-04-15T17:39:28.930
> 
> 标签：html, ruby-on-rails, ruby, ruby-on-rails-3, yaml

我正在使用 Ruby v.1.8.7 和 Rails v.3.1.3 创建网站，并从 yml 文件加载页面上的文本。我在标签中有文本，`<h3>`但我希望将第三句放在单独的行上，而不必在 html 中进行显式检查。

例如，我有：

```
<h3><%= Settings.text_from_yml %></h3> 
```

在我看来， text_from_yaml 看起来像：

`This is the first sentence. This is the second. And lastly, the third.`

在 yml 文件中。有没有办法可以在 yml 文件中的字符串中放置一个换行符，以保证第三句将在自己的行上？我试过放在`<br />`第三行之前，但它只输出文本“ `<br /> And lastly, the third.`”

我也试过做

```
<h3><%= Settings.text_from_yml.html_safe %></h3> 
```

但这并没有达到我想要的效果。有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T17:40:53.140

```
<h3><%= raw Settings.text_from_yml %></h3> 
```

# java - 身份服务器的 WSO2 源代码 (wso2is-3.2.3-src.zip) 总是构建错误

> ID：10164438
> 
> 赞同：0
> 
> 时间：2012-04-15T17:39:41.743
> 
> 标签：java

我们从 wso2 网站下载了身份服务器的源代码 (wso2is-3.2.3-src.zip)。解压后发现它的版本是 wso2is-3.2.0-src。

我们花了两个多星期的时间在网上参考了很多资料，并尝试用足够的带宽来构建它。首先我们使用ant、maven 2和jdk jdk1.6.0_25。然后我们发现wso2is-3.2.0-src/products/pom.xml漏掉了一个结束标签“/”，我们更正了。然后我们发现我们必须基于一个错误使用斯里兰卡科伦坡时区。我们经常会耗尽内存，所以我们不得不使用 "export MAVEN_OPTS="-Xmx1280m -XX:PermSize=512m -XX:MaxPermSize=512m"-XX:ReservedCodeCacheSize=512m" "ulimit -n 65536" 我们摆脱了运行- 内存不足错误。我们仍然未能构建它。

后来我们发现这个weblink[是一个链接](http://docs.wso2.org/display/identity/Installing+Apache+Maven+for+Identity+Server+on+Linux)。看来我们必须使用 maven 3.0.4。设置好所有环境变量后，我们进入目录 wso2is-3.2.0-src/ 并输入 mvn clean install

我们最终还是遇到了一堆以下错误。我们怀疑源代码是否错误。有没有人成功构建过 wso2is-3.2.3-src.zip 的源代码？我们应该如何构建它？

```
[ERROR]     Non-resolvable parent POM: Failure to find org.wso2.carbon:deployment-synchronizer-feature:pom:3.2.0 in http://repo.maven.apache.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced and 'parent.relativePath' points at wrong local POM @ line 22, column 13 -> [Help 2]
[ERROR]   
[ERROR]   The project org.wso2.carbon:org.wso2.carbon.deployment.synchronizer.server.feature:3.2.0 (/root/Desktop/wso2is-3.2.0-src/features/deployment-synchronizer/org.wso2.carbon.deployment.synchronizer.server.feature/3.2.0/pom.xml) has 1 error
[ERROR]     Non-resolvable parent POM: Failure to find org.wso2.carbon:deployment-synchronizer-feature:pom:3.2.0 in http://repo.maven.apache.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced and 'parent.relativePath' points at wrong local POM @ line 22, column 13 -> [Help 2]
[ERROR]   
[ERROR]   The project org.wso2.carbon:org.wso2.carbon.deployment.synchronizer.ui.feature:3.2.0 (/root/Desktop/wso2is-3.2.0-src/features/deployment-synchronizer/org.wso2.carbon.deployment.synchronizer.ui.feature/3.2.0/pom.xml) has 1 error
[ERROR]     Non-resolvable parent POM: Failure to find org.wso2.carbon:deployment-synchronizer-feature:pom:3.2.0 in http://repo.maven.apache.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced and 'parent.relativePath' points at wrong local POM @ line 22, column 13 -> [Help 2]
[ERROR]   
[ERROR]   The project org.wso2.carbon:org.wso2.carbon.ec2.client.feature:3.2.0 (/root/Desktop/wso2is-3.2.0-src/features/ec2-client/org.wso2.carbon.ec2.client.feature/3.2.0/pom.xml) has 1 error
[ERROR]     Non-resolvable parent POM: Could not find artifact org.wso2.carbon:ec2-client-feature:pom:3.2.0 in central [a link](http://repo.maven.apache.org/maven2) and 'parent.relativePath' points at wrong local POM @ line 22, column 13 -> [Help 2]
[ERROR]   
[ERROR]   The project org.wso2.carbon:org.wso2.carbon.esb.mediation.feature:3.2.0 (/root/Desktop/wso2is-3.2.0-src/features/esb-mediation/org.wso2.carbon.esb.mediation.feature/3.2.0/pom.xml) has 1 error
[ERROR]     Non-resolvable parent POM: Could not find artifact org.wso2.carbon:esb-mediation-feature:pom:3.2.0 in central (http://repo.maven.apache.org/maven2) and 'parent.relativePath' points at wrong local POM @ line 21, column 13 -> [Help 2]
[ERROR]   
[ERROR]   The project org.wso2.carbon:org.wso2.carbon.esb.mediation.server.feature:3.2.0 (/root/Desktop/wso2is-3.2.0-src/features/esb-mediation/org.wso2.carbon.esb.mediation.server.feature/3.2.0/pom.xml) has 1 error
[ERROR]     Non-resolvable parent POM: Failure to find org.wso2.carbon:esb-mediation-feature:pom:3.2.0 in http://repo.maven.apache.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced and 'parent.relativePath' points at wrong local POM @ line 21, column 13 -> [Help 2]
[ERROR]   
[ERROR]   The project org.wso2.carbon:org.wso2.carbon.esb.mediation.ui.feature:3.2.0 (/root/Desktop/wso2is-3.2.0-src/features/esb-mediation/org.wso2.carbon.esb.mediation.ui.feature/3.2.0/pom.xml) has 1 error
[ERROR]     Non-resolvable parent POM: Failure to find org.wso2.carbon:esb-mediation-feature:pom:3.2.0 in http://repo.maven.apache.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of central has elapsed or updates are forced and 'parent.relativePath' points at wrong local POM @ line 21, column 13 -> [Help 2]
[ERROR]   
[ERROR]   The project org.wso2.carbon:carbon-parent:3.2.0 (/root/Desktop/wso2is-3.2.0-src/core/pom.xml) has 1 error
[ERROR]     'modules.module[41]' specifies duplicate child module org.wso2.carbon.bootstrap/3.2.0 @ line 1055, column 25
[ERROR]   
[ERROR]   The project org.wso2.carbon:org.wso2.carbon.registry.indexing.ui:3.2.0 (/root/Desktop/wso2is-3.2.0-src/components/registry/org.wso2.carbon.registry.indexing.ui/3.2.0/pom.xml) has 1 error
[ERROR]     'pluginRepositories.pluginRepository.id' must be unique: wso2-maven2-repository -> http://dist.wso2.org/maven2 vs http://dist.wso2.org/snapshots/maven2 @ line 68, column 17
[ERROR]   
[ERROR]   The project org.wso2.carbon:carbon-features:3.2.0 (/root/Desktop/wso2is-3.2.0-src/features/pom.xml) has 2 errors
[ERROR]     'modules.module[14]' specifies duplicate child module axis2-repo-mgt @ line 553, column 25
[ERROR]     'modules.module[18]' specifies duplicate child module module-mgt @ line 557, column 25
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] [a link](http://cwiki.apache.org/confluence/display/MAVEN/ProjectBuildingException)
[ERROR] [Help 2] [a link](http://cwiki.apache.org/confluence/display/MAVEN)/UnresolvableModelException 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T09:26:48.750

[根据 Source Distribution Guide [1]](http://docs.wso2.org/display/identity/Installing+Identity+Server+on+Linux+from+Source+Distributio)在 Linux 上安装 Identity Server可能会有所帮助。 [http://docs.wso2.org/display/identity/Installing+Identity+Server+on+Linux+from+Source+Distribution](http://docs.wso2.org/display/identity/Installing+Identity+Server+on+Linux+from+Source+Distribution)

如果你进入 /wso2is-3.2.0-src/patch-releases/ 文件夹，你会发现 3.2.1、3.2.2 和 3.2.3 的单独目录例如，如果你想构建 3.2.1，找到3.2.1补丁发布pom.xml和（`mvn clean install`来自/wso2is-3.2.0-src/patch-releases/3.2.1/目录），然后分别构建以下模块。

```
 <module>dependencies</module>
    <module>orbit</module>
    <module>service-stubs</module>
    <module>core</module>
    <module>components</module>
    <module>features</module>
    <module>samples</module>
    <module>products</module> 
```

请注意，3.2.0 分支需要使用 maven2 构建。

仅供参考：要构建当前的[主干](https://svn.wso2.org/repos/wso2/carbon/)，请使用 maven3。

# internet-explorer - 有没有办法在 Firefox 的 IE 选项卡中访问 IE 开发人员工具？

> ID：10164450
> 
> 赞同：2
> 
> 时间：2012-04-15T17:40:44.807
> 
> 标签：internet-explorer, firefox-addon, ie-developer-tools

当我在 Firefox 上使用 IE Tab 时，我不能使用 Firebug 或 Web Developer 之类的东西，因为我在技术上使用的是 IE。我尝试使用 F12，即开发人员工具的 IE 键盘快捷键，但这似乎不起作用。有谁知道如何在 IE Tab/Firefox 上访问 IE 开发人员工具，或者至少让某种 Javascript 调试器在 IE Tab 上工作？

# drupal - 创建引用它的节点时，规则会向节点作者发送电子邮件吗？

> ID：10164452
> 
> 赞同：1
> 
> 时间：2012-04-15T17:40:53.593
> 
> 标签：drupal, reference, notifications, drupal-rules

我正在使用节点引用模块在我的节点上创建一个链接，允许用户添加一个引用该节点的页面。这个新创建的节点同样有它自己的链接，允许另一个页面引用这个新创建的节点。等等等等。

如何创建一个规则，将电子邮件通知发送给它的父节点作者和链上的每个人？

还是有更好的方法来不使用规则？

我愿意提出任何想法。

# algorithm - 如何解决共享同一中心的垂直椭圆系统？

> ID：10164455
> 
> 赞同：0
> 
> 时间：2012-04-15T17:41:10.147
> 
> 标签：algorithm, intersection, ellipse

我正在编写的程序需要找到两个椭圆的交点，两个椭圆都是垂直的并且共享同一个中心。我只需要四个中的第一个解决方案。

我可以用来解决这个问题的值是每个椭圆的垂直和水平分量的半径，或者如果您使用椭圆的标准方程，则为“a”和“b”值。我以前解决过圆锥非线性系统，但我不知道如何将代数思想转化为算法。

这似乎相对简单，但我完全被卡住了。抱歉，如果这是一个愚蠢的问题，但我仍然希望得到答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T18:10:41.693

假设您以椭圆中心位于原点的方式移动坐标系。然后你的两个椭圆都可以用一个规范方程来描述：

![椭圆 1](../Images/75f17f037c26223ec48f49e6a6eeb216.png)

![椭圆 2](../Images/be6eeae7db97d7cdef56b66cfd3a32b0.png)

其中*a [1]* , *b [1]* , *a [2]* , *b [2]*是椭圆的各自参数。

剩下的唯一一件事就是求解这个方程组。例如，[Wolfram|Alpha](http://www.wolframalpha.com/input/?i=x%5E2+%2F+a%5E2+%2B+y%5E2+%2F+b%5E2+%3D+1%2C+x%5E2+%2F+c%5E2+%2B+y%5E2+%2F+d%5E2+%3D+1)可以为您完成（这里我用*c*代替*a [2]*和*d*代替*b [2]*）。

假设您的椭圆很重要，一对可能的解决方案是：

![在此处输入图像描述](../Images/8d14e3706fb1e30ab85b16c2d161576f.png)

![在此处输入图像描述](../Images/8134ecd83fb8274e000a5768db87d4a7.png)

还有其他对，它们在根之前有不同的 +/- 符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T18:07:21.797

为你的两对 (a,b)取椭圆方程，`(x/a)^2 + (y/b)^2 = 1`将 y^2 向右分解，并使左侧相等：

```
(x*b1/a1)^2 - b1^2 = y^2   (1)
(x*b2/a2)^2 - b2^2 = y^2 
```

这简化为：

```
(x*b1/a1)^2 - b1^2 = (x*b2/a2)^2 - b2^2 
```

x 的二次方程，最多可以给出两个实数解 (x1,x2)。插入 x1 的椭圆方程 (1) 将为您提供两个 y 值（我们将它们命名为 y1、y2）。您的解决方案是：

```
(x1, y1)
(x1, y2)
(x2, y1)
(x2, y2) 
```

当然，交点可以少一些，但是很容易确定，因为有些二次方程会有复杂的解。

# objective-c - NSURLConnection sendAsynchronousRequest：在 https 上长时间运行

> ID：10164456
> 
> 赞同：0
> 
> 时间：2012-04-15T17:41:17.763
> 
> 标签：objective-c, ios, https, nsurlconnection, nsurlrequest

我现在正在尝试将某些服务器 API 调用从 http 切换到 https，但我遇到了一个我无法向自己解释的问题。

从 http 切换到 https 后，我发现我的异步请求需要整整 60 秒才能完成，尽管服务器已经处理了请求。

没有抛出错误，没有发生超时或类似的事情，似乎只需要整整 60 秒才能注意到请求已完成。然后，在 60 秒后，它就完成了它应该做的事情。

这就是我正在做的事情：

```
NSString *theBody = @"param1=value1&param2=value2";
NSData *bodyData = [theBody dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
NSURL *url = [NSURL URLWithString:@"https://my.api.server.com/call"];
NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] initWithURL:url] autorelease];

[request setValue:@"My User-Agent" forHTTPHeaderField:@"User-Agent"];
// Tested this one, too. Yes, I did set to utf8 encoding when trying this
// [request setValue:@"application/x-www-form-urlencoded charset=utf-8" forHTTPHeaderField:@"Content-Type"];
[request setHTTPMethod:@"POST"];
[request setHTTPBody:bodyData];
// testing only
// [request setTimeoutInterval:15];

[NSURLConnection sendAsynchronousRequest:request 
                                   queue:[NSOperationQueue mainQueue]
                       completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
                           NSLog(@"Finished!");
                       }]; 
```

日志消息在 60 秒后被抛出。在输出日志消息之前刷新相应的数据时，我可以看到一切都已经发生了——我可以正确拉取刷新的数据。

我已经认为是我的服务器花了很长时间才响应，但我已经尝试使用 Ruby 作为快速测试运行相同的请求并且它工作正常。

有谁知道这里会发生什么？

提前致谢

阿恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T16:33:19.403

实际上，这似乎是一个服务器问题。我通过设置修复它

```
keepalive_timeout 0 
```

在我的 nginx 的配置文件中。

# ruby-on-rails - 如何在 rails 中获取保存的值？

> ID：10164457
> 
> 赞同：0
> 
> 时间：2012-04-15T17:41:27.187
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, validation

好的，我有一个名为 Tire 的模型，我无法更新某些保留名称的名称字段

```
class Tire < ActiveRecord::Base

  RESERVED_TIRES = ['Michelin', 'Good Year', 'Firestone']

  before_update :reserved_tires

  def reserved_tires
    if RESERVED_TIRES.include?(self.name)
      self.errors.add(:base, "Cant be changed")
      false
    end
  end
end 
```

而且我需要不允许用户更新任何字段，因为当前名称在保留字中……这适用于除用户更新名称之外的所有字段。

例如，用户更新到“Michelinnnn”，然后它允许更新，因为 self.name 是“Michelinnnn”，而不是保存在数据库中的“Michelin”。关于如何解决这个问题的任何想法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T17:52:54.630

**如果您的意思是如果更改之前的**名称被保留，则您不想允许任何更改，那么您可以将旧名称访问为**`name_was`**.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T17:52:19.807

所以问题是与保留名称相似但不相同的字符串？“michelinnnn”示例将通过使用正则表达式而不是精确字符串匹配来捕获：

```
RESERVED_TIRES = [/michelin/i, /good\s*year/i, /firestone/i]
...
if RESERVED_TIRES.find{|r| self.name =~ r} 
```

内置的 Rails 函数是[validates_exclusion_of](http://ar.rubyonrails.org/classes/ActiveRecord/Validations/ClassMethods.html#M000089)，但我不知道它是否可以处理（数组）正则表达式。

但是，这只会捕获某些类型的相似名称。 [计算字符串相似度有更通用的方法](https://stackoverflow.com/questions/9822078/ruby-compare-two-strings-similarity-percentage)，但是对于这类问题没有无懈可击的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T17:57:48.953

首先，您可能想要使用验证而不是您的`before_update`：

```
class Tire < ActiveRecord::Base
  RESERVED_TIRES = ['Michelin', 'Good Year', 'Firestone']
  validate :reserved_tires, :unless => :new_record?

private

  def reserved_tires
    if RESERVED_TIRES.include?(self.name)
      self.errors.add(:base, "Cant be changed")
    end
  end
end 
```

跳过对新记录的`:unless => :new_record?`验证，因此您将能够创建它们，但将阻止更改。

然后添加另一个验证来捕捉他们试图更改名称：

```
validate :cant_change_reserved_name, :if => :name_changed?
#...
def cant_change_reserved_name
  if RESERVED_TIRES.include?(self.name_was)
    self.errors.add(:name, "You cannot change a reserved name.")
  end
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-15T17:57:53.977

这应该可以解决问题：

```
name_allowed = RESERVED_TIRES.inject(true) { |is_allowed, tire_name|
  is_allowed &&= !self.name.include?(tire_name)
}
unless name_allowed
  # add error
end 
```

# php - 在 PHP 的报告页面上格式化并显示电话号码

> ID：10164460
> 
> 赞同：2
> 
> 时间：2012-04-15T17:41:32.280
> 
> 标签：php, phone-number

我有一个名为的数据库字段`customer_phone`，它在输入时存储。它现在从数据库中显示在报告页面上，如下所示：

```
print  "Phone: $customer_phone<br>"; 
```

我想从数据库字段中获取数据，去掉任何多余的字符（如果有的话）只是数字（例如：`xxx-xxx-xxxx`to `xxxxxxxxxx`），然后以这种格式显示在页面上：

```
(xxx) xxx-xxxx 
```

我找到了执行此操作的函数脚本，但无法让它们工作。

我需要从数据库字段中获取数据，重新格式化并将其显示在页面上。

我是 PHP 新手，如果有任何帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-15T17:54:36.383

```
function format_telephone($phone_number)
{
    $cleaned = preg_replace('/[^[:digit:]]/', '', $phone_number);
    preg_match('/(\d{3})(\d{3})(\d{4})/', $cleaned, $matches);
    return "({$matches[1]}) {$matches[2]}-{$matches[3]}";
} 
```

有一个功能可以按照你的要求做，这样称呼它

```
<?php echo format_telephone($customer_phone); ?> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-15T17:49:29.507

```
$phone_number= preg_replace('/[^0-9]+/', '', $phone_number); //Strip all non number characters
echo preg_replace("/([0-9]{3})([0-9]{3})([0-9]{4})/", "($1) $2-$3", $phone_number) //Re Format it 
```

# python - 变量的有效更新

> ID：10164463
> 
> 赞同：0
> 
> 时间：2012-04-15T17:41:43.313
> 
> 标签：python, input

我正在记录来自串行连接的输入。

目前，我一直在使用输入通过更新运行的基本类`self.min & self.max`

但也许有更有效的方法来做到这一点？

也许是双端队列？这会带来效率效益吗？也许不需要上课？

* * *

我用过的一个例子：

```
class RangeFinder(object):

    def __init__(self, _mem=3) :
        self._mem = deque(maxlen=_mem)
        self.absmax = -10**10
        self.absmin = 10**10
        self.relmax = None
        self.relmin = None

    def read(self, _data) :
        if _data != None:
            self._mem.append(_data)
            if len(self._mem) == self._mem.maxlen :       
                self.relmax = max(self._mem)
                self.absmax = max(self.absmax, self.relmax)      
                self.relmin = min(self._mem)    
                self.absmin = min(self.absmin, self.relmin) 
```

另一个想法：

```
class MinMax(deque):

    def __init__(self):
        deque.__init__(self, [ 10**10, -10**10 ], maxlen=2)

    def read(self, _data):
        if _data < self[0]:
            self.popleft()
            self.appendleft(_data)
        if _data > self[1]:
            self.pop()
            self.append(_data) 
```

输入是一个转换为 int 的字符串。我最近才开始使用串行连接作为生成器，因此存在一些差异。

然后使用最小值和最大值来计算用于读取二进制数据的激光强度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T18:25:29.267

当您输入数据时，我会在这里进行二等分以保持顺序。这样最小/最大值的查找将是 O(1)，并且负载将继续插入 (O(nlogn))。另外我认为您在这里不需要一个类，您可以安全地只实现功能（如果问题如您所描述的那样）。

```
>>> import random
>>> import bisect
>>> data = []
>>> input_data = random.sample(range(1000),100) 
>>> #Substitute this with your serial input data
>>> for i in input_data:
...     bisect.insort(data, i)
>>> min = data[0]
>>> max = data[-1] 
```

# java - 在 JTable 中删除图像之间的空间

> ID：10164466
> 
> 赞同：0
> 
> 时间：2012-04-15T17:42:06.227
> 
> 标签：java, swing, jtable, graphics2d, tablecellrenderer

在下图中，您可以看到一个`JTable`有两列的 a。

**更新
**这些列是隐藏的。所选行后面的红色为
背景色红色，仅用于演示目的**。**

每行有两张图片。

第一张图片是一个看起来像复选框的 png 图像。随后是
一张png图像，上面写着朋友的名字。

图像应该看起来像一个图像，但有一个空间。

是否可以删除此空间？
图片没有空间

也许使用`JTable`.
在那种情况下，其他摇摆“列表”可以做到这一点。

创建表的代码

```
 jTableSpriidFriends = new JTable();
        jTableSpriidFriends.setRowMargin(0);
        jTableSpriidFriends.setIntercellSpacing(new Dimension(0, 0));
        jTableSpriidFriends.setShowHorizontalLines(false);
        jTableSpriidFriends.setShowVerticalLines(false);
        jTableSpriidFriends.setShowGrid(false);
        m_adapterSpriidFriends = new AbstractTableModelJTableSpriidFriends();
        rendererSpriidFriends = new CellRendererJtableSpriidFriends();
        jTableSpriidFriends.setModel(m_adapterSpriidFriends);
        jTableSpriidFriends.setDefaultRenderer(ImageIcon.class,
rendererSpriidFriends );
        jTableSpriidFriends.setRowSelectionAllowed(true);
        jTableSpriidFriends.addMouseListener(this);
        jTableSpriidFriends.getSelectionModel().addListSelectionListener(this);
        jTableSpriidFriends.setTableHeader(null);

        scrollPaneSpriidFriends = new JScrollPane();
        scrollPaneSpriidFriends.setBounds(11, 55, 176, 264);
        panelSpriid.add(scrollPaneSpriidFriends);
        scrollPaneSpriidFriends.setViewportView(jTableSpriidFriends);

    for (int i=0; i<m_adapterSpriidFriends.getColumnCount(); i++) {
        TableColumn column = jTableSpriidFriends.getColumnModel().getColumn(i);
        if (i==0) column.setPreferredWidth(50);
        if (i==1) column.setPreferredWidth(120);

    } 
```

这里是 DefaultTableCellRenderer

```
case 0:// type

    if(friend.selected){
       image = new ImageIcon(getClass().getResource
       ("/resources/friendlist/checkbox_checked.png")).getImage();
       this.setIcon( new ImageIcon(image));
    }else{
       image = new ImageIcon(getClass().getResource("/resources
       /friendlist/checkbox_unchecked.png")).getImage();
       this.setIcon( new ImageIcon(image));
    }

    break;
case 1:// files

    BufferedImage old = null;
    try {

         if(friend.deviceType.equals(Consts.DEVICE_TYPE_DEVICE))
        old = ImageIO.read(getClass().getResource
        ("/resources/friendlist/row_with_device.png"));
          else
        old = ImageIO.read(getClass().getResource
        ("/resources/friendlist/row_with_pc.png"));

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

      int w = old.getWidth();
      int h = old.getHeight();
      BufferedImage img = new BufferedImage(w, h, BufferedImage.TYPE_INT_ARGB);

      Graphics2D g2d = img.createGraphics();
      g2d.drawImage(old, 0, 0, null);
      g2d.setPaint(Color.WHITE);
      //g2d.setFont(new Font("Serif", Font.BOLD, 20));

      String s = friend.name;
      FontMetrics fm = g2d.getFontMetrics();
      int x = 10 ;
      int y = 20;
      g2d.drawString(s, x, y);
      g2d.dispose();

    this.setIcon( new ImageIcon(img));
    break;              
} 
```

![enter image description here](../Images/97ff492faa3298761b57e0648b134d3e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T22:19:27.240

The default cell renderer extends JLabel, and uses itself as component to display the cell. A JLabel has icon and text with a gap in between. Maybe that is the cause:

```
table.setDefaultRenderer(Object.class, new DefaultTableCellRenderer() {

    @Override
    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
        Component comp = super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);
        if (comp instanceof JLabel) {
            JLabel label = (JLabel)comp;
            label.setIconTextGap(0);
        }
        return comp;
    }

}); 
```

* * *

***Alternatively:***

```
table.setDefaultRenderer(ImageIcon.class, new DefaultTableCellRenderer() {
    {
        setIconTextGap(0);
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T22:53:19.660

Maybe you can just use a JList with custom renderer. The renderer would then take the spriid friend objects and construct appropriate labels using a simple JPanel with GridLayout.

# c++ - 简单的多线程帮助？C++、WaitForSingleObject 和同步

> ID：10164469
> 
> 赞同：0
> 
> 时间：2012-04-15T17:42:23.083
> 
> 标签：c++, multithreading, visual-studio-2010, synchronization

因此，我正在尝试制作一个简单的多线程程序来验证 Collat​​z 猜想的大量数字并返回已验证数字的总数。每个线程（总共 4 个）执行一个数字间隔，并在数字达到 1 时更新“已验证”变量。我也在计时整个过程（与单线程计算进行比较）

我遇到的问题是，当我在程序结束时打印出“已验证”的 int 时，从来没有任何一致性，所以我猜要么线程正在相互写入，要么主线程之前完成其他人，因此打印一个不完整的数字。我还假设如果主线程在其他线程之前完成，clock() 计算也将关闭。那么，如何停止主线程继续运行，直到其他线程完成（从而使其等待更新的验证计数并完成准确的时间测量）？这就是我认为 WaitForSingleObject 所做的，但我猜它只是停止主线程退出，仍然允许它计算它的其他函数。

这是我第一次尝试任何多线程，我认为我不太了解同步和 WaitForSingleObject 命令的工作原理。到目前为止，这是我的主要功能中的内容：

***编辑：这是我更新的 Main 函数和 Collat​​z 函数。我对其进行了修改，以便每个线程都访问一个单独的变量以避免同步问题，但问题仍然存在。当我打印出“已验证”时，没有一致的值 ****

***再次编辑：好的，所以我删除了每个 Mladen Janković 的“线程”int，并使用一个简单的计数器将不同的间隔分配给创建的线程。“已验证”现在有一个一致、正确的值。但是，当有 1,000,000 个数字时，我仍然无法让程序真正完成。测试它 100,000 甚至 10,000 可以完美地工作，但是当我将它增加到 1,000,000 个数字时，程序会无限期地运行（小时）而没有实际返回值。我猜它会卡在一个特定的值上（例如 Martin James 指出的 750831）。我尝试用 int 代替 long int，但似乎仍然存在溢出问题。有什么建议么？并感谢您的巨大帮助。***

***最后编辑：好的，所以我只是使用 long long 而不是 int，现在程序可以完美运行。感谢大家的帮助！***

```
void main() 
{
    clock_t start;
    clock_t finish;
    unsigned int thread = 0;

    start = clock();

    HANDLE h1 = (HANDLE)_beginthreadex(NULL, 0, collatz_thread, NULL, 0, NULL);

    HANDLE h2 = (HANDLE)_beginthreadex(NULL, 0, collatz_thread, NULL, 0, NULL);

    HANDLE h3 = (HANDLE)_beginthreadex(NULL, 0, collatz_thread, NULL, 0, NULL);

    for (int i = 750001 ; i <= 1000000 ; i++) { collatz(i, 4); }

    WaitForSingleObject( h1, INFINITE );
    WaitForSingleObject( h2, INFINITE );
    WaitForSingleObject( h3, INFINITE );

    finish = clock() - start;
    double time = finish / (double) CLOCKS_PER_SEC;

    validated = v1 + v2 + v3 + v4;
    cout << validated << " numbers validated." << endl;
    cout << endl << time << " seconds." << endl;
}

unsigned _stdcall collatz_thread (void* n)
{   
    selection++; // selects a different interval each time collatz_thread is called

    switch (selection) {
    case 1:
        for (int i = 1 ; i <= 250000; i++)      { collatz(i, 1); }
        break;
    case 2:
        for (int i = 250001 ; i <= 500000; i++)  { collatz(i, 2); }
        break;
    case 3:
        for (int i = 500001 ; i <= 750000; i++)  { collatz(i, 3); }
        break;
    }
    return 0;
}

int collatz (int n, int thread)
{
    int original = n;

    while (n != 1) {
    if (n%2 == 0)
        n = (n/2);
    else
        n = (3*n + 1);
    }

    if (n == 1) {
    switch (thread) {
        case 1:
            v1++;
            break;
        case 2:
            v2++;
            break;
        case 3:
            v3++;
            break;
        case 4:
            v4++;
            break;
    }
    return n;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T17:51:35.157

`validated`如果它是共享变量，您需要同步访问。最简单的方法是当你想增加它时使用`InterlockedIncrement`函数而不是标准运算符。`++`另一种方法是在访问共享变量时使用某种同步对象，如自旋锁或互斥锁，但如果您只需要同步增量操作，那就太过分了。

如果您需要更多详细信息，请提供`collatz`功能代码。

正如“usr”所建议的那样，为了获得更好的性能，您可以为每个线程使用单独的变量，然后在主线程中将它们相加。在这种情况下，您应该以这样的方式填充这些变量，以便它们不共享相同的缓存行以避免[错误共享](http://en.wikipedia.org/wiki/False_sharing)。

您没有提供`collatz_thread`函数，这可能是导致结果不一致的另一个原因。原因是您将*指针*传递给变量 ( `&thread`)，该变量存储在创建新线程的调用之间更改的线程 #，因此根据操作系统调度程序的状态，新线程可能没有机会启动，而`thread`变量已经更改为另一个值，因此您将有多个线程执行同一组数据，而其他组可能会被跳过。由于行为取决于线程调度程序的当前状态，它几乎是不可预测的。

解决方案是将`thread`变量转换为，`void*`而不是传递其地址，然后在`collatz_thread`函数中将其转换回`int`：

`HANDLE h1 = (HANDLE)_beginthreadex(NULL, 0, collatz_thread, (void*)thread, 0, NULL);`

正如马丁建议的那样，你可能有整数溢出，但它不应该导致不一致的结果，只是错误的结果，但仍然是一致的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T18:13:14.630

试着看看这个：

[来自 MSDN 的信号量和线程说明](http://msdn.microsoft.com/en-us/library/ms811896)

这可能是您在网上可以找到的最好的文档。

现在，关于您的代码，我认为它运行得不是很好，这就是原因：WaitForSingleObject - 基本上意味着您尝试在 h1 信号量（或 h2 或 h3）上执行 -1，如果您不能这样做-1（即信号量为0）然后等待无限时间。WaitForSimgleObject 实际上应该在您的线程例程中调用，而不是在您的主程序中。

此外，在您的线程对象中，一旦您完成了对共享变量的处理，您需要释放信号量，以便其他线程可以获得对该特定信号量的锁定。

试着看看我给你的链接上的例子，我相信你会让它工作得很快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T04:08:39.510

我对此进行了尝试，并得到了一些很好的结果，太好了 :(( 某处出了点问题，但我没有看到它。我没有得到几个小时的运行时间，即使 n 从 1 到10,000,000，（千万）：

```
8 tests,
8 tasks,
counting to 1000000,
using 14 threads:
Validated: 1000000 in 670ms
Validated: 1000000 in 671ms
Validated: 1000000 in 624ms
Validated: 1000000 in 656ms
Validated: 1000000 in 655ms
Validated: 1000000 in 655ms
Validated: 1000000 in 640ms
Validated: 1000000 in 686ms
Average time: 657ms
Total validated: 8000000

8 tests,
8 tasks,
counting to 10000000,
using 14 threads:
Validated: 10000000 in 8081ms
Validated: 10000000 in 7441ms
Validated: 10000000 in 7784ms
Validated: 10000000 in 7598ms
Validated: 10000000 in 7956ms
Validated: 10000000 in 7534ms
Validated: 10000000 in 7816ms
Validated: 10000000 in 7769ms
Average time: 7747ms
Total validated: 80000000 
```

请注意，虽然它说 14 个线程，但这是针对整个池的。一个线程总是在等待其他任务完成时用完，因此实际上只有 13 个线程可用于运行验证。出于某种原因，这是最佳选择。

好的，我的 i7 在所有 4/8 内核上都是完全正常的，但是我看不到运行时间缩短到几秒钟，因为我有更多内核并且已经将工作分给了所有内核:(

这是我用的。这与您的操作方式有些不同，因为我有大部分工具/代码。首先是 Visual C++。有两个班。每次运行都由一个“PoolTest”类管理，该类将几个“TestTask”实例提交到一个线程池，一个用于要验证的完整整数范围的每个段。您会注意到您的代码已复制/粘贴到 TestTask 类中。我强调了 TestTask 在 PoolTest 代码中的组装位置。'PoolTest' 类然后等待所有 'TestTask' 实例完成的事件 - 它可以这样做，因为 TestTask 在完成时回调到 PoolTest 'taskComplete' 方法。此方法访问一个线程安全计数器，该计数器在提交 TestTasks 时向上计数，并由 '

我重复使用的这段代码使事情变得有点复杂，因为它可以多次重复运行以获得平均时间，因此可以多次发出完整的 TestTasks 集。

当最后一个 TestTask 倒计时到零时，它会发出 Event 信号，然后 PoolTest 将再次运行，向 GUI 发出整个测试运行完成的信号（不必费心列出 GUI 的东西'因为不相关）。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading;

namespace WindowsFormsApplication1
{

public class TestTask: Task{
public int validated;
public int fromVal, toVal;
public int ticks;

    long collatz(long n)
    {
        while (n != 1)
        {
            if (n % 2 == 0)
                n = (n / 2);
            else
                n = (3 * n + 1);
        }
        return (n);
    }

    public override void run(){
        int index;
        int localTo = toVal;
        int localFrom = fromVal;
        int localVal = 0;
        for (index = localFrom; index < localTo; index++)
        {  // if not disproved, inc the stack 'validated'
            if (1 == collatz(index + 1)) localVal++;
        }
        validated = localVal; // put stack result into instance field,
    }
    public TestTask(int paramx, EventHandler OnDone)
        : base(paramx, OnDone){}
};

/* a task that submits testTask instances.
*/
public class PoolTest:Task{
    int FnumTasks;
    int FnumTests;
    int Fcount;
    int FtestCount;
    int taskCount;
    int startTicks;
    int endTicks;
    int totalTicks;
    EventHandler FonTaskComplete;
    AutoResetEvent  testCompleteEvent;
    public int average;
    public int testTicks;
    public int Vone;
    public int Vtot;
    public TestTask thisTestTask;

    public PoolTest(int testsNum, int tasks, int count, EventHandler taskDone,
        EventHandler testDone)
        : base(0, testDone)
    {
        FnumTests=testsNum;
        FtestCount=testsNum;
        FnumTasks=tasks;
        Fcount=count;
        Vtot = 0;
        Vone = 0;
        totalTicks = 0;
        FonTaskComplete=taskDone; // call after each test to report ticks
        testCompleteEvent= new AutoResetEvent(false);
    }
    void submitAtest(){  // queue up numTasks testTask instances
        taskCount=FnumTasks;
        startTicks = System.Environment.TickCount;

//*********************THIS IS WHERE THE RANGES AND TASKS ARE ASSEMBLED

        int startNum = 0;   // here, start at 0 and build up the ranges
        int countIncrement=Fcount/FnumTasks;  // calc. range size
        int endNum=startNum+countIncrement;   // and so init. start/end  
        TestTask newTask;
        for (int i = 1; i < FnumTasks; i++) // one less than requested
        {
            newTask=new TestTask(0, taskComplete);
            newTask.fromVal=startNum;   // load in the start/end for the loop
            newTask.toVal = endNum;
            myPool.submit(newTask);     // off it goes, see you later
            startNum = endNum;          // now move range up for  
            endNum += countIncrement;     // next TestTask
        }
        // treat last range separately to cover div rounding when
        // calculating 'countIncrement'
        newTask = new TestTask(0, taskComplete); // do last one
        newTask.fromVal = startNum;
        newTask.toVal = Fcount;
        myPool.submit(newTask);   // send off the last one
    }

//*****************************************************************

    public override void run(){
        submitAtest(); //start off the first run of testTasks
        testCompleteEvent.WaitOne();
    }
    void taskComplete(object sender, EventArgs e){  // called when a testTask
        bool finishedTasks;                         // instance is complete
         lock (this)
        {
            thisTestTask = (TestTask)sender;
            taskCount--;                            // another one down
            Vone += thisTestTask.validated;         // Vone - total for one run
            Vtot += thisTestTask.validated;         // total for all runs
            finishedTasks = (taskCount == 0);       // this run all done yet?
            if (finishedTasks)
            {
                endTicks = System.Environment.TickCount; // yes, so calc. elapsed time
                testTicks=endTicks-startTicks;
                thisTestTask.ticks = testTicks;
                totalTicks=totalTicks+testTicks;
                if (0!=--FtestCount) {                   // done all the test runs?
                    thisTestTask.validated = Vone;       // use this field to return run total
                    FonTaskComplete(thisTestTask, null); // and signal result of test
                    Vone = 0;
                    submitAtest();                      // no, so send off another load
                }
                else{
                        average=totalTicks/FnumTests;     // done all test runs!
                        testCompleteEvent.Set();          // signal all runs completed
                    };
            }
        }
    }
};
} 
```

# c - 自定义语言的标准 C 库支持

> ID：10164470
> 
> 赞同：0
> 
> 时间：2012-04-15T17:42:25.217
> 
> 标签：c, compiler-construction, standard-library

我正在开发自定义语言，一切正常，但我停止添加对标准函数的支持，如 getchar()、fopen() 等。我的想法之一是解析可视 .lib 文件，但这是一项艰巨的任务（例如，由于缺乏规范）。你有其他想法吗？它是如何用像 D 这样的语言制作的？

编辑：我想要实现的是能够使用系统功能（例如打开文件，使用套接字），但无需从头开始编写。我需要一些方法来访问已经编写好的库/dll。

最简单的解决方案是加载例如 C 标准库并调用这些函数（之前设置堆栈），但我需要有一些方法来获取此代码（组装）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T22:30:26.943

通常，您会创建自己的对您的语言有意义的标准库，而不是使用 C 标准库。您为什么要编写自己的语言，并且不应该将其纳入标准库的设计中？

一般来说，为了与 C 库兼容，我发现最常见的方法是用不同的语言重新表达库的接口。Python 为此提供了[ctypes](http://docs.python.org/library/ctypes.html)模块。在 .NET 中，您将使用 P/Invokes。这会在您翻译界面时带来一些手动工作和出错的机会，但它比自动化过程更简单、更强大。

此外，.NET 的设计使得 .NET 库可以从 .NET 中的任何语言实现访问，只要库和语言设计正确。特定语言可能有自己的需求，由它们自己的标准库来满足，但是控制台 i/o 之类的东西都在一个地方，不需要每种语言都重新发明。

# jquery - 使用 on() 将事件处理程序附加到将动态创建的元素

> ID：10164472
> 
> 赞同：0
> 
> 时间：2012-04-15T17:42:35.203
> 
> 标签：jquery

我在使用 on() 时遇到问题，因为 live() 已被弃用。

这似乎不起作用：

```
$('body').on("click", ".myButton", console.log("clicked")); 
```

当我刷新页面时，即使我没有点击任何东西，控制台也会立即显示“点击”，但当我实际点击它时不会触发。

此外，将其应用于按钮所在的 DIV 似乎更高效，而不是 BODY 的巨大范围。这是真的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T17:45:08.340

```
$(function(){
    $('body').on("click", ".myButton",function(){
       alert("clicked");
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T17:44:34.513

您看到的奇怪行为是因为您实际上是`console.log`在那条线上打电话给自己。您应该将其包装在一个函数中。

```
function () { console.log('clicked'); } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-15T17:45:32.350

```
$('body').on("click", ".myButton", function() {
     console.log("clicked")
}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-15T17:55:00.167

您问题的第一部分已被其他答案充分回答。您正在调用您的`console.log()`函数，而不是传递对稍后可以调用的函数的引用。

**要回答其他人尚未解决的问题的第二部分：**

是的，将事件处理程序的范围限定为按钮的更接近的祖先而不是使用`$('body')`.

您应该选择尽可能靠近按钮的按钮的祖先，但在安装事件处理程序时静态存在（而不是稍后动态销毁/创建）。

`.live()`不赞成使用的一个主要原因`.on()`是`.live()`将其所有事件处理程序放在`document`对象上，并且在繁忙的页面中，对象上可能有很多委托的事件处理程序`document`。当这种情况发生时，单个事件会一直冒泡到`document`对象，然后每个单个事件都必须与一长串可能的委托事件处理程序进行比较。由于这通常意味着运行选择器操作而不是`eventTarget`，因此这确实会变得很慢。

另一方面，如果您选择了一个更接近所需事件目标的祖先对象，那么来自更小的对象列表中的更小的事件列表会流经这个特定的委托事件处理程序，并且整个事件系统可以执行得更好.

为了获得大量事件/对象的最佳性能，委托事件处理程序应尽可能靠近目标对象应用。

# ios - 在没有 for 循环的 scheduleLocalNotifications 数组中查找 UILocalNotification？

> ID：10164473
> 
> 赞同：4
> 
> 时间：2012-04-15T17:42:41.243
> 
> 标签：ios, uilocalnotification

目前，我正在遍历所有计划的本地通知，以根据 userInfo 字典对象中的值查找“匹配”。当我设置了 30 多个本地通知时，这似乎非常慢。有没有办法在不遍历数组的情况下访问单个本地通知？

这是我所拥有的：

```
NSArray *notificationArray = [[UIApplication sharedApplication]     scheduledLocalNotifications];
UILocalNotification *row = nil;
for (row in notificationArray) {
            NSDictionary *userInfo = row.userInfo;
            NSString *identifier = [userInfo valueForKey:@"movieTitle"];
            NSDate *currentAlarmDateTime = row.fireDate;
if([identifier isEqualToString:myLookUpName]) {
 NSLog(@"Found a match!");
}
} 
```

这是我想要的：

```
NSArray *notificationArray = [[UIApplication sharedApplication]     scheduledLocalNotifications];
UILocalNotification *row = " The row in notificationArray where [userInfo valueForKey:@"movieTitle"]=myLookUpName" ; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-15T19:00:34.200

您可能可以为此使用谓词，但我尚未对其进行测试：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"userInfo.movieTitle = %@", myLookUpName]; 
```

然后使用该谓词过滤数组并获取第一个元素：

```
UILocalNotification *row = [[notificationArray filteredArrayUsingPredicate:predicate]objectAtIndex:0]; 
```

同样，这是未经测试的，可能无法正常工作。

**编辑**

如果这不起作用，您可以使用测试块：

```
UILocalNotification *row = [[notificationArray objectsAtIndexes:[notificationArray indexesOfObjectsPassingTest:^(id obj, NSUInteger idx, BOOL *stop){
    return [[[obj userInfo]valueForKey:@"movieTitle"] isEqualToString:myLookUpName];
}]]objectAtIndex:0]; 
```

# apache - 基于特定条件的 URL 重写规则

> ID：10164476
> 
> 赞同：1
> 
> 时间：2012-04-15T17:43:01.233
> 
> 标签：apache, wordpress, .htaccess, mod-rewrite, url-rewriting

我正在根据我的 .htaccess 文件中的某些条件应用 URL 重写规则，但由于我对使用 Apache .htacces 进行 URL 重写的知识接近零水平而受到打击。这是我的用例

我的 WordPress 应用程序中几乎没有插件，并且那些使用某些 CSS 和 JavaScript 的插件，我只希望这些 URL 应该从 CDN 服务器提供，由于某些问题，我不能使用简单的重写来重写 URL整个应用程序，因为那东西正在破坏我的应用程序功能。

```
http://www.mydomain.com/wp-content/plugins/pluginA/abc.css
http://www.mydomain.com/wp-content/plugins/pluginA/abc.js 
```

我希望当 CSS 和 JS 来自这个插件（插件 A）或我想要重写其 URL 的任何其他插件时，URL 应该被重写为

```
http://www.cdn.mydomain.com/wp-content/plugins/pluginA/abc.css
http://www.cdn.mydomain.com/wp-content/plugins/pluginA/abc.js 
```

我不确定如何进行这种基于条件的 URL 重写，任何建议都会很有帮助

**编辑** 这是我当前在根目录中的 .htaccess 文件

```
<IfModule mod_rewrite.c>
Options +FollowSymLinks
RewriteEngine On
RewriteBase /wordpress/
RewriteCond %{QUERY_STRING} (\<|%3C).*script.*(\>|%3E) [NC,OR]
RewriteCond %{QUERY_STRING} GLOBALS(=|\[|\%[0-9A-Z]{0,2}) [OR]
RewriteCond %{QUERY_STRING} _REQUEST(=|\[|\%[0-9A-Z]{0,2})
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /wordpress/index.php [L]
</IfModule> 
```

我根据建议在文件夹`.htaccess`下创建了一个新文件，并带有以下条目`wp-content``Michael`

```
RewriteEngine On
<IfModule mod_rewrite.c>
RewriteBase  /wordpress/
RewriteCond %{REQUEST_FILENAME} ^.+\.(css|js)$
RewriteRule wp-content/plugins/(nivo-slider-light|Usernoise|lightbox-plus|wp-content-slideshow|content-slide)/(.+)$ http:/cdn.cloudfront.net/wp-content/plugins/$1/$2 [L,R=302,QSA]
</IfModule> 
```

但似乎这对于上述插件仍然不起作用，所有 css 和 js 文件都使用来自 localhost 而不是来自我的 CDN 服务器的 URL 提供服务。我什至从我的根目录的 .htaccess 文件中注释掉了这些行

```
 RewriteCond %{QUERY_STRING} (\<|%3C).*script.*(\>|%3E) [NC,OR]
 RewriteCond %{QUERY_STRING} GLOBALS(=|\[|\%[0-9A-Z]{0,2}) [OR]
 RewriteCond %{QUERY_STRING} _REQUEST(=|\[|\%[0-9A-Z]{0,2}) 
```

但这也没有对 URL 进行任何更改

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T17:51:14.130

这可以放在根目录内的 .htaccess 中。任何你想重写的插件都可以放在`()`.`|`

```
RewriteEngine On
# Rewrite pluginA plugin X, and pluginZ to the CDN. Add add more with |
RewriteRule wp-content/plugins/(pluginA|pluginX|pluginZ)/(.+)$ http:/www.cdn.mydomain.com/wp-content/plugins/$1/$2 [L,R=301,QSA] 
```

注意：上面重写了所有的插件文件。如果它应该只是 css 和 js 文件，请使用

```
RewriteCond %{REQUEST_FILENAME} \.(css|js)$
RewriteRule wp-content/plugins/(pluginA|pluginX|pluginZ)/(.+)$ http:/www.cdn.mydomain.com/wp-content/plugins/$1/$2 [L,R=301,QSA] 
```

# ios - obj-c 中的属性

> ID：10164480
> 
> 赞同：1
> 
> 时间：2012-04-15T17:43:25.563
> 
> 标签：ios, cocoa-touch, properties

我已经阅读了有关属性的内容，并且在每个教程中它看起来都是这样的：

```
@interface SomeClass : NSObject{

     NSString* SomeString;
}

@property (strong, nonatomic) NSString* SomeString; 
```

但即使在行 NSString* String; 时一切正常 在类参数中丢失。

为什么要写？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T17:54:18.103

在 objetive-c 2.0 中，@property 和 @synthesize 命令**将自动**为您创建实例变量（如果您还没有这样做）。这是一种捷径。

当您`NSString* SomeString;`从“类参数”（iVars）中删除时，您的应用程序行为不会改变，因为编译器会自动将实例变量添加到您的头文件中。

更新 1：感谢 Jenox 的信息，我更正了我的答案。

# git - Jenkins 构建失败，因为无法克隆 git repo

> ID：10164481
> 
> 赞同：1
> 
> 时间：2012-04-15T17:43:33.467
> 
> 标签：git, jenkins, jenkins-plugins

我正在为 Rails 3.2 应用程序设置 Jenkins。我添加了 Github 插件并为服务器上的本地“jenkins”用户设置了密钥。我可以从服务器上的命令行 git clone 就好了，所以我知道这些键是有效的。当我构建时，它无法克隆 repo ..

```
 Started by user anonymous
Building in workspace /var/lib/jenkins/jobs/meeteor/workspace
Checkout:workspace / /var/lib/jenkins/jobs/meeteor/workspace - hudson.remoting.LocalChannel@59a683e6
Using strategy: Default
Cloning the remote Git repository
Cloning repository origin
ERROR: Error cloning remote repo 'origin' : Could not clone git://github.com/meeteor/webapp.git/
hudson.plugins.git.GitException: Could not clone git://github.com/meeteor/webapp.git/
    at hudson.plugins.git.GitAPI.clone(GitAPI.java:245)
    at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:1117)
    at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:1059)
    at hudson.FilePath.act(FilePath.java:832)
    at hudson.FilePath.act(FilePath.java:814)
    at hudson.plugins.git.GitSCM.checkout(GitSCM.java:1059)
    at hudson.model.AbstractProject.checkout(AbstractProject.java:1218)
    at hudson.model.AbstractBuild$AbstractRunner.checkout(AbstractBuild.java:581)
    at hudson.model.AbstractBuild$AbstractRunner.run(AbstractBuild.java:470)
    at hudson.model.Run.run(Run.java:1421)
    at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
    at hudson.model.ResourceController.execute(ResourceController.java:88)
    at hudson.model.Executor.run(Executor.java:238)
Caused by: hudson.plugins.git.GitException: Command "git clone --progress -o origin git://github.com/meeteor/webapp.git/ /var/lib/jenkins/jobs/meeteor/workspace" returned status code 128:
stdout: Cloning into /var/lib/jenkins/jobs/meeteor/workspace...

stderr: fatal: The remote end hung up unexpectedly

    at hudson.plugins.git.GitAPI.launchCommandIn(GitAPI.java:779)
    at hudson.plugins.git.GitAPI.access$000(GitAPI.java:38)
    at hudson.plugins.git.GitAPI$1.invoke(GitAPI.java:241)
    at hudson.plugins.git.GitAPI$1.invoke(GitAPI.java:221)
    at hudson.FilePath.act(FilePath.java:832)
    at hudson.FilePath.act(FilePath.java:814)
    at hudson.plugins.git.GitAPI.clone(GitAPI.java:221)
    ... 12 more
Trying next repository
ERROR: Could not clone repository
FATAL: Could not clone
hudson.plugins.git.GitException: Could not clone
    at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:1129)
    at hudson.plugins.git.GitSCM$2.invoke(GitSCM.java:1059)
    at hudson.FilePath.act(FilePath.java:832)
    at hudson.FilePath.act(FilePath.java:814)
    at hudson.plugins.git.GitSCM.checkout(GitSCM.java:1059)
    at hudson.model.AbstractProject.checkout(AbstractProject.java:1218)
    at hudson.model.AbstractBuild$AbstractRunner.checkout(AbstractBuild.java:581)
    at hudson.model.AbstractBuild$AbstractRunner.run(AbstractBuild.java:470)
    at hudson.model.Run.run(Run.java:1421)
    at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
    at hudson.model.ResourceController.execute(ResourceController.java:88)
    at hudson.model.Executor.run(Executor.java:238) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-04T09:03:54.890

错误似乎是：主机密钥验证失败。您应该以 Jenkins 用户身份登录到您的 Jenkins 主机并运行：

> ssh git@github.com

然后对有关主机密钥的提示回答“是”。或者，您可以将“StrictHostKeyChecking no”添加到 ~jenkins/.ssh/config。

# java - ImageIO 异常

> ID：10164483
> 
> 赞同：2
> 
> 时间：2012-04-15T17:44:16.463
> 
> 标签：java, javax.imageio

我收到以下错误：

```
javax.imageio.IIOException: Can't read input file!
Resource not found: C:\icon.gif
at javax.imageio.ImageIO.read(ImageIO.java:1301)
at connector.SystemTrayCreator.createImage(SystemTrayCreator.java:98)
at connector.SystemTrayCreator.create(SystemTrayCreator.java:36)
at connector.Start.main(Start.java:14)
Exception in thread "main" java.lang.IllegalArgumentException: creating TrayIcon with     null Image
at java.awt.TrayIcon.<init>(TrayIcon.java:168)
at connector.SystemTrayCreator.create(SystemTrayCreator.java:36)
at connector.Start.main(Start.java:14)
Java Result: 1 
```

从以下代码中：

```
final TrayIcon trayIcon = 
            new TrayIcon(createImage("C:\\icon.gif", "Tray icon")); 
```

和

```
protected static Image createImage(String path, String description) {
    Image image = null;

    try {
        File f = new File(path);
        image = ImageIO.read(f);
    } catch (Exception e) {
        e.printStackTrace();
    }

    if (image == null) {
        Debugger.showMessage("Resource not found: " + path);
        return null;
    } else {
        return (new ImageIcon(image, description)).getImage();
    }
} 
```

我很确定路径是正确的。此外，名称匹配。

有谁知道出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T17:57:03.153

你的代码看起来不错。我目前想到两件事作为理论上可能的问题：

1.  文件权限问题。也许将文件放在驱动器根目录以外的其他地方并明确检查其权限。您可以`canRead()`直接从您的代码中调用——就是`ImageIO.read`这样。它必须返回`true`。

2.  `path`在你的论点结束时可能会有一些空格。用来`trim()`消除这种可能性。

# email - 关于cfmail

> ID：10164484
> 
> 赞同：1
> 
> 时间：2012-04-15T17:44:19.510
> 
> 标签：email, coldfusion, cfmail, commonspot

我正在使用commonspot，而且我是新手。我编写了一个代码，用于使用 cfmail 将页面推荐给朋友。但它不起作用，你能告诉我我必须做什么吗？

我的refer.cfm 页面

```
<title>E-Mail this page to your friend</title> 
```

`<cfoutput>`

```
<cfform method="post" name="Emailform" action="sendmail.cfm"> 
<table border="0" cellspacing="0" cellpadding="4" width="90%" id="ContactMe">
<tr> 
<td width="30%"><div align="right">Your Name:</div></td> 
<td width="70%"><input type="text" name="name" size="30" /></td> 
```

```
<tr> 
<td><div align="right">Friend Email:</div></td> 
<td><input type="text" name="email" size="30" /></td> 
```

```
 <tr> 
<td>&nbsp;</td> 
<td> 
<input type="submit" id="submit" name="submit" value="Submit" /> 
<input type="reset" name="reset" value="Reset" /> 
</td>
</table></cfform></cfoutput> 
```

我的 sendmail.cfm 文件：

```
<cfoutput>
<cfmail to="#email#"
from="do-not-reply@balah balah.com"
subject="#form.name# has referred you a page"
type="html">
Dear #form.name#
blah blah
</cfmail>
<p>Your E-Mail has been sent.</p>
</cfoutput> 
```

我做错什么了吗？还是我错过了什么？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T20:46:16.790

如果 cfmail 调用实际上具有“do-not-reply@balah balah.com”的发件人地址，那么由于电子邮件地址中的空格，它将出错。如果没有，那么您将需要弄清楚发生了什么错误。使用以下内容包装您的代码：

```
<cftry>
<!--- cfmail code here --->
<cfcatch><cfdump var="#cfcatch#" /><cfabort /></cfcatch>
</cftry> 
```

从您的问题和评论中，我不确定浏览器是否输出“不错”的错误，或者您是否有自定义错误消息，但无论哪种方式，这个 try/catch 都应该解决。

# html - 使用 Ruby Mechanize 解析结构不佳的 HTML 文档

> ID：10164494
> 
> 赞同：2
> 
> 时间：2012-04-15T17:46:05.750
> 
> 标签：html, ruby, screen-scraping, mechanize

我必须使用 Ruby mechanize 解析结构不佳的 HTML 文档。页面中有 2 个表单，但很少有提交类型的按钮不属于任何表单元素，因此我无法单击这些按钮。

有两个下拉菜单，它们都在不同的 s 中，并且提交按钮在这些表单之外，我必须从这些 DD 中选择值并单击此按钮，我无法单击此按钮。

有什么帮助吗？？

感谢所有答案...这是示例 HTML

```
<form action='abc/abc.asp'>
<select name='state'>
<option value='1'>1</option>
<option value='2'>2</option>
<option value='3'>3</option>
</select>
</form>

<select name='options'>
<option value='1'>1</option>
<option value='2'>2</option>
</select>

<input name="submit" type="submit" value="View Results"> 
```

看，第二个下拉菜单和按钮在任何形式之外，我想从第二个 DDL 中选择值并点击“查看结果”按钮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T21:52:04.387

你可以试试这个，它应该与单击按钮的结果相同：

```
form['submit'] = 'View Results'
form.submit 
```

# java - 如何内联而不是作为附件提供 MS Office 文档？

> ID：10164496
> 
> 赞同：0
> 
> 时间：2012-04-15T17:46:09.500
> 
> 标签：java, servlets, ms-office, mime-types

我想内联提供 MS 文档，而不是通过附件提供它作为下载。我根据文档类型定义了应用程序 mime 类型，但客户端仍然尝试下载它。这是我的代码：

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    InputStream is = null;
    String fileName = "file.docx";

    try {
        java.io.File file = new java.io.File("C:/"+fileName);

        BufferedInputStream in = new BufferedInputStream(new FileInputStream(file));
        byte[] bytes = new byte[in.available()];
        in.read(bytes);
        in.close();

        response.setContentType("application/vnd.openxmlformats-officedocument.wordprocessingml.document");
        response.addHeader("Content-Disposition", "inline;filename=\"" + fileName + "\"");

        response.getOutputStream().write(bytes);

    } catch (Exception e) {
        e.printStackTrace();
    }

} 
```

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T18:11:22.493

不可能在页面内呈现原始 MS 文档，除非有一些客户端插件允许这样做（类似于 Flash 为视频和游戏提供的插件）。我不知道这样的插件。您可能需要将文档转换为 HTML，然后将其写回客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T18:54:46.403

至少 Internet Explorer 允许用户[覆盖配置](https://stackoverflow.com/questions/773385/files-served-with-content-disposition-inline-still-sometimes-prompt-for-downloa)。您使用哪些浏览器进行测试？

您写入输出流的数据可能不完整，因为`in.available()`可能小于文件大小。来自 InputStream 的 JavaDoc

> 返回可以从此输入流中读取（或跳过）的字节数的估计值，而不会被下一次调用此输入流的方法阻塞。

如果要读取整个块，请使用文件对象中的文件大小。告诉客户文件的大小也是一个好主意。

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    InputStream is = null;
    String fileName = "file.docx";
    BufferedInputStream in = null;

    try {
        java.io.File file = new java.io.File("C:/"+fileName);
        // not the best way
        int length = (int)file.length();

        in = new BufferedInputStream(new FileInputStream(file));
        // may allocate a huge ammout of memory
        byte[] bytes = new byte[length];
        in.read(bytes);
        in.close();
        in = null;

        response.setContentType("application/vnd.openxmlformats-officedocument.wordprocessingml.document");
        response.addHeader("Content-Disposition", String.format("inline; filename=\"%s\" ; size=\"%d\"", fileName, length));

        response.getOutputStream().write(bytes);
        response.getOutputStream().flush();

    } catch (Exception e) {
        e.printStackTrace();
        throw new ServletException(e);
    } finally { 
       if (in != null) {
          try {
             in.close();
          } catch (IOException e) {
              e.printStackTrace();
              // ignore 
          }
       }
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T18:33:36.480

我认为有一种方法可以使用`object`HTML 标签将 MS-Word 或 Excel 文档嵌入到 HTML 页面中，但我不知道即使在 Windows 上，不同浏览器之间的可移植性如何。此外，您可能必须使用 HTML 框架才能将其限制在页面上的某个区域。

如果这不是你想要的，你可以使用一些库自己转换它，或者使用像[Scribd](http://www.scribd.com/developers)或[Slideshare](http://www.slideshare.net/developers)这样的 API ，它允许你上传文档 - 也是 MS 格式 - 并取回一个可嵌入的片段。尽管那时您的数据由他们的服务托管。

# iphone - 使用自动调整大小导致我的项目错误地向左移动 20 像素

> ID：10164498
> 
> 赞同：2
> 
> 时间：2012-04-15T17:46:28.050
> 
> 标签：iphone, interface-builder, autorotate

我正在设计一个带有自定义单元格布局的表格。为了进行自定义单元格布局，我添加了一个空的 nib 文件，然后添加了一个表格视图单元格，然后根据我的需要设计了所有内容。`loadNibNamed`之后，我使用函数内部在表格视图中加载我的自定义笔尖`cellForRowAtIndexPath`......一切都很好，自定义表格正是我想要的。

现在我想启用旋转，所以当用户旋转设备时，设计也会旋转。我的自定义单元格由标签和图像组成，因此处理视图旋转的最简单方法是使用**Interface Builder的****Autosizing**属性。这就是问题所在：当我为自定义单元格中的元素选择适当的自动调整大小组合时，运行时的最终结果将向左移动 20 个像素。所以旋转有效，但一切都被错误地转移了。这是我的问题的视觉解释：

 **我像这样选择自动调整大小：

![在此处输入图像描述](../Images/838f214fbdb349d41081273504db9850.png)

结果与我放置标签（本周）的位置相同，如下所示：

![在此处输入图像描述](../Images/8c8eb9e419a674822ef2c5422e64f44c.png)

现在我为我的标签选择适当的自动调整大小：

![在此处输入图像描述](../Images/999d11f559d6faffeebcc6fa9e3854fa.png)

但结果错误地向左移动了 20 个像素，如下所示：

![在此处输入图像描述](../Images/37039fdfe0e83a7bfa5881203cd8c8cb.png)

您可以看到标签“本周”不在 DisclosureIndicator 的顶部，如上图所示。错误的移动出现在所有设备方向上，而不仅仅是纵向。我做错了什么？Autosizing 不应该保留我的对象在视图上的原始大小和位置吗？**

# java - 添加依赖项会破坏 Maven 项目

> ID：10164500
> 
> 赞同：0
> 
> 时间：2012-04-15T17:46:51.120
> 
> 标签：java, maven-2, hbase

当我将 org.apache.hbase 作为依赖项添加到我的项目时，它会导致另一个依赖项的构建失败

> [错误] 以下工件的依赖关系解析期间发生错误：
> 
> com.sun.jersey:jersey-core:1.4
> 
> 原因：无法获取依赖信息：无法读取工件“com.sun.jersey:jersey-core:jar”的元数据文件：找不到父项目：com.sun.jersey:jersey-project 项目：null:jersey -core:bundle:null 项目 null:jersey-core:bundle:null
> 
> com.sun.jersey:jersey-core:jar:1.4

我确信这两个人有某种共同的父母。我该如何解决这个问题，更广泛地说，我以后如何检查这个错误？

编辑：

另一个依赖使用 jersey-core:1.7; 有没有办法可以同时使用这两个版本？我可以强制 hbase 工件使用较新的 (1.7) 版本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T14:49:44.600

也许将此镜像添加到 settings.xml (/etc/maven2) 文件可以解决问题：

```
<mirror>
    <id>glassfish-mirror</id>
    <name>glassfish mirror</name>
    <url>http://maven.nuxeo.org/nexus/content/repositories/public-releases</url>
    <mirrorOf>glassfish-repository</mirrorOf>
</mirror> 
```

# jquery - 使用 jquery.validate.js 和 jquery.form.js 提交 Ajax 表单？

> ID：10164503
> 
> 赞同：3
> 
> 时间：2012-04-15T17:47:24.413
> 
> 标签：jquery, ajax, jquery-validate, form-submit

我正在尝试`servlet`通过将两种不同的javascript代码混合在一起来将我的html表单数据提交给a：

```
<script type="text/javascript">
        $(document).ready(function() {
            $("#form1").validate({
                rules: {
                    name: "required",
                    email: {
                        required: true,
                        email: true
                    },
                    url: {
                        url: true
                    },
                    comment: {
                        required: true
                    }
                },
                messages: {
                    comment: "Please Enter Your Message."
                },
                submitHandler:function(login_form){
                    $(login_form).ajaxSubmit({
                        target: '#msg-box',
                        success: function() {
                            $('#form1').slideUp('slow', function(){
                                $(".show_hide").show();
                            });
                        }
                    });
                }
            });
        });
    </script> 
```

第二个是（来自[本](http://wowjava.wordpress.com/2010/10/22/ajax-login-validation-for-jsp/)教程）：

```
<script type="text/javascript">
$(document).ready(function(){
    $("#login_frm").submit(function(){

         //remove previous class and add new "myinfo" class
        $("#msgbox").removeClass().addClass('myinfo').text('Validating Your Login ').fadeIn(1000);

        this.timer = setTimeout(function () {
            $.ajax({
                url: 'check.jsp',
                data: 'un='+ $('#login_id').val() +'&pw=' + $('#password').val(),
                type: 'post',
                success: function(msg){
                    if(msg != 'ERROR') // Message Sent, check and redirect
                    {               // and direct to the success page

                        $("#msgbox").html('Login Verified, Logging in.....').addClass('myinfo').fadeTo(900,1,
                          function()
                          {
                             //redirect to secure page
                             document.location='login.jsp?user='+msg;
                          });

                    }
                    else
                    {
                        $("#msgbox").fadeTo(200,0.1,function() //start fading the messagebox
                        {
                          //add message and change the class of the box and start fading
                          $(this).html('Sorry, Wrong Combination Of Username And Password.').removeClass().addClass('myerror').fadeTo(900,1);
                        });

                    }
                }

            });
        }, 200);
        return false;
    });     

});

  </script> 
```

我不是 javascript 或 JQuery 忍者，任何人都请帮我将这些代码组合在一起。
有一件事是肯定我必须对`submitHandler`代码进行很多更改，但我正在尝试但没有成功。

PS：任何关于 jsp-jquery-ajax 表单验证和提交的更好想法都非常欢迎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:42:09.043

您的`$.ajax`和`$().ajaxSubmit`可以组合，因为它们通常采用相同的选项。

我会重构 $.ajax 以使其成为 ajaxSubmit 的一部分。您可以摆脱 $.ajax 的`data:`b/c，由 ajaxSubmit 处理。的`success: function()`都是一样的。

对于您`setTimeout()`，`removeClass()`您可以使用：`beforeSubmit:`与 $.ajax 相同`beforeSend:`

# ruby-on-rails-3 - 仅活动管理员显示时间和 default_actions 的文本对齐

> ID：10164505
> 
> 赞同：3
> 
> 时间：2012-04-15T17:47:50.997
> 
> 标签：ruby-on-rails-3, activeadmin

嗨，我正在使用 ruby​​ 1.9.3 和 rails 3.2 中的活动管理员我有两个问题

1）我只是想知道是否可以更改活动管理员中默认操作的对齐方式（查看、编辑、销毁）我正在尝试这个但不工作也许我缺少我尝试搜索谷歌但我找不到正确答案的元素

```
.action{
  text-align: right;
} 
```

( 2000 年 1 月 1 日 02:02）我只想显示我的索引的时间是

```
index do 
    column "Guest Name", :name
    column "Service Type", :service
    column "Booked Date", :date
    column "Time Start", :timeStart
    column "Time End",:timeEnd
    column "Number of guest", :numGuest
    default_actions
  end 
```

我想这样做，但显然它不会起作用

```
column "Time Start", :timeStart.strftime('%H:%M:%S:%p') 
```

非常感谢您的帮助提前感谢您为所有人提供更多权力

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T19:04:25.323

不确定您的第一个问题，但要显示时间，请使用如下块：

```
column "Time Start" do |record|
  record.timeStart.strftime('%H:%M:%S:%p')
end 
```

# java - 使用 ImageIO.read 将图像添加到 myPanel

> ID：10164506
> 
> 赞同：0
> 
> 时间：2012-04-15T17:47:55.827
> 
> 标签：java, jar, jpanel, drawimage, javax.imageio

首先我使用了 JLabel 和 ImageIcon。它工作得很好。但是，当我将它导出到 JAR 时，图像没有显示出来。
所以，然后我创建了自己的 ImagePanel 并使用 drawImage 方法来显示它。但它终止并抛出一个

> 线程“主”java.lang.IllegalArgumentException 中的异常：输入 == null！

好吧，我的代码如下..

开始菜单

```
public class startMenu extends JFrame{
  ...
  URL imgUrl = getClass().getResource("images/contacts.png");

  public startMenu(){
    ...
    ImagePanel imgPanel = new ImagePanel(imgUrl);
  }

} 
```

图像面板

```
public class ImagePanel extends JPanel{

    private Image image;
    private URL imgUrl;

 public ImagePanel(URL url){
        this.imgUrl= url;

        try{    
            image = ImageIO.read(imgUrl);
        } 
        catch (IOException e) {
            System.out.println("no such file");
        }
    }

 @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        if(image!=null){
             g.drawImage(image, 10, 12, 128, 128, this);
        }
        else{
            g.drawImage(image, 0, 0, this);
        }
    }

    @Override
    public Dimension getPreferredSize() {
       return new Dimension(150,150);
    }
} 
```

如果我将 ImageIcon 与 imageUrl 一起使用。它显示相同的错误消息。

```
 URL imgUrl = getClass().getResource("images/contacts.png");
    private ImageIcon adBook = new ImageIcon(imgUrl);
    private JLabel mainImg = new JLabel(adBook); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T15:42:22.180

问题是图像的位置。我总是将图像直接保存在“src”和“bin”所在的目录中。"but getClass().getResource("...")" 返回 bin 的路径。所以我只需要将图像文件夹移动到“src”中，它就会自动将该目录的副本复制到“bin”中。问题解决了。

```
URL imgUrl = getClass().getResource("images/contacts.png"); 
```

返回-->`Q:\workspace\project name\bin\images\contacts.png`

# java - 让用户在 Android 上输入按钮的名称

> ID：10164507
> 
> 赞同：0
> 
> 时间：2012-04-15T17:48:05.633
> 
> 标签：java, android, xml

带有我想要更改的按钮的主要活动。它应该导入用户从其他活动中放入 EditText 的内容：

```
@Override
protected void onResume() {
    super.onResume();

    class1.setText(this.getButtonText());
}

public String getButtonText()
{
    SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
    String buttonText = prefs.getString("ButtonText", "Default Button Test");
    return buttonText;
} 
```

带有编辑文本的 Activity 和一个将用户带回主页的按钮。我尝试使用共享首选项，但不知道该怎么做？：

```
 Button class1;

 @Override
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.editclass1); 

        SettingButtons();
        class1.setOnClickListener(this);

 }

private void SettingButtons() {
    // TODO Auto-generated method stub
    class1 = (Button) findViewById(R.id.edittoclass1);
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch(v.getId()){
    case R.id.edittoclass1:
        startActivity(new Intent("com.clayton.calendar.TOCLASS"));
    break;

    }
}

protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
    Editor editor = prefs.edit();
    editor.putString("ButtonText",  // This is not working
            ((TextView)findViewById(R.id.edittoclass1)).getText().toString());
    editor.commit();
    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T17:53:56.630

创建一个包含 EditText 的新活动。当用户长按源活动中的按钮时，将他们带到这个新活动。在新活动的 onPause 中，将 EditText 的文本保存到共享首选项中的值。然后，在源活动的 onResume 中，从共享首选项中获取值并将按钮文本值设置为此值。

这是编辑按钮文本活动的 onPause 所需的一些代码示例：

```
@Override
protected void onPause() {
    super.onPause();

    SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
    Editor editor = prefs.edit();
    editor.putString("ButtonText", ((TextView)findViewById(R.id.buttonText)).getText().toString());
    editor.commit();
} 
```

这是您在源/原始活动中需要的代码示例：

```
@Override
protected void onResume() {
    super.onResume();

    button.setText(this.getButtonText()); 
}

public String getButtonText()
{
    SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
    String buttonText = prefs.getString("ButtonText", "Default button text");
    return buttonText;
} 
```

# vb.net - 捕捉视频的“简单”方式

> ID：10164509
> 
> 赞同：3
> 
> 时间：2012-04-15T17:48:41.943
> 
> 标签：vb.net, winforms, video, webcam

我一直在尝试使用 DirectShow，但它让我感到头疼，我在这里的问题没有得到回答，所以我想也许我应该采用不同的方法。（[DirectShow VB.net 无法更改录制格式](https://stackoverflow.com/questions/10143161/directshow-vb-net-cant-change-recording-format)）。<- 在哪里“有效”时，我无法以我想要的格式获得它，而且我也不太了解它，所以我显然想沿着我能理解的路线走下去。

我已经用谷歌搜索了，直到我的手指生硬，试图想出一种在我的 vb.net 应用程序中录制视频的简单方法，它不必花哨，只需一个带有开始记录、停止记录按钮的预览，就是这样.

任何朝着正确方向的推动都将不胜感激。

谢谢

汤姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T03:33:39.547

看看这个[CodeProject](http://www.codeproject.com/Articles/125478/Versatile-WebCam-C-library)项目。多亏了 CLR，C# 中的任何东西都可以在 VB.NET 中使用。

![WinForms 网络摄像头](../Images/6931926ccbc53893b949667034e52daf.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T03:26:31.727

查看 MSDN 上使用 VB.NET 捕获视频数据的示例项目：http: [//code.msdn.microsoft.com/How-To-Create-Webcam-bbdcc90f](http://code.msdn.microsoft.com/How-To-Create-Webcam-bbdcc90f)

这个想法是使用 avicap32.dll 作为外部系统调用来获取。

# facebook - Facebook 评论框显示警告：URL 在 7-8 小时内无法访问

> ID：10164511
> 
> 赞同：1
> 
> 时间：2012-04-15T17:48:48.230
> 
> 标签：facebook, comments

我有一个博客，上面有一个 FB 评论框。当我发布博客时，我看到评论框显示警告“http://story.pxd.co.kr/512 无法访问”7-8 小时。（7-8 小时后，此警告信息会自动消失！）

你知道为什么需要这么长时间吗？

# ios - Microsoft Surface 与 iPhone 配对

> ID：10164512
> 
> 赞同：1
> 
> 时间：2012-04-15T17:49:10.203
> 
> 标签：ios, iphone, pixelsense

我能够拿到新的三星 SUR40 Microsoft Surface 设备。我目前正在做概念验证

我的症结在于能够将我的 iPhone 与 Surface 配对。我想要做的是将 iPhone 放在屏幕上并让表面识别设备。我当时的想法是使用从 iPhone 应用程序生成的身份标签并将 iPhone 正面朝下放置。但由于表面的红外摄像头能力，它在手机上什么也看不到。我以前见过它（[失忆症剃刀鱼](http://thenextweb.com/gadgets/2011/01/27/stunning-amnesia-connect-fuses-microsoft-surface-with-your-iphone/)）。只是想知道是否有人对如何做到这一点有任何想法？

也许使用 WiFi 扫描的组合也可能有效。任何建议将不胜感激。我想让它保持简单，因为用户只是让我们的应用程序在手机上运行，​​而不是仅仅在表面上拍打它，不想让配对过于复杂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T15:31:54.427

我在这里解释了一种使用蓝牙的方法：[识别通过蓝牙与 PixelSense 配对的移动设备](https://stackoverflow.com/questions/2381548/identifying-mobile-devices-paired-via-bluetooth-with-a-microsoft-surface/2382824#2382824)

很大程度上取决于您是否拥有设备和网络。如果您可以控制设备，那么您可以在每个设备上放置一个表面标签，并将标签值放入手机的应用程序中。将所有设备连接到同一子网有助于通信，但如果您只需要处理运行应用程序的任何随机电话，它就会变得更加复杂。

至于 Razorfish 是如何做到的，我不确定，但他们不使用我描述的蓝牙方法。我认为他们使用类似于 Bump 应用程序的东西，其中运行您的应用程序的设备将注册服务并跟踪加速度计数据。当 Surface 检测到手机（通过标签或仅通过形状）时，它可以“询问”每个连接的客户端是否是刚刚放下的那个。他们也可以使用接近传感器来提供帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T20:37:06.767

您可以查看[Microsoft® Surface® 蓝牙连接代码示例 - SDK 2.0 ，也可以在](http://code.msdn.microsoft.com/windowsdesktop/Surface-Bluetooth-Connect-dbe7e0e8)[Surface 应用程序设计和开发论坛](http://social.msdn.microsoft.com/Forums/en/surfaceappdevelopment/threads)上发布有关 microsoft Surface 的问题

# objective-c - 核心数据托管对象中的计算

> ID：10164513
> 
> 赞同：2
> 
> 时间：2012-04-15T17:49:21.463
> 
> 标签：objective-c, ios, core-data, data-modeling, nsfetchrequest

我通过**子类化 Core Data Managed Objects**对公司的财务数据进行了建模（请参阅下面的数据模型屏幕截图）。

对于每家公司 IBCompany（仅部分显示），都有 1:n 个**财务周期**( **IBestPeriod** )，由其年份和周期编号定义（例如 2012/1）。每个财务期间有 1:n**财务数据**项，例如*收入*，存储在**IBEstPeriod的属性***类型*中，每个财务数据项由多个值组成，这些值存储在**IBConsHistory**中，如*curr*、*ma1*、*ma2*等） ，例如 100、105、107。

 ******** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T02:41:49.987

如果这个新值将基于现有数据，您应该根据需要计算它。这样做的主要原因是避免创建依赖项。也就是说，如果您存储此计算值，则每次使用此新值所基于的任何值时都必须重新计算它。*******

# mysql - MySql：如何从具有重复字段的行的表中更新单行出现？

> ID：10164514
> 
> 赞同：2
> 
> 时间：2012-04-15T17:49:25.540
> 
> 标签：mysql, duplicates

我有一个（700 多行）表格，格式如下：

```
id | session | win
------------------
 1     1122     1
 2     1122     1
 3     1122     1
 4     4559     1
 5     4559     1
 6     4559     1
 7     4559     1
 8     4559     1 
```

要么`win`要么。`1`_ `0`而且`session`不是唯一的。

我想更新具有相同 的行组`session`，并将其所有`win`字段设置`0`为 1 除外。

目标：

```
id | session | win
------------------
 1     1122     1
 2     1122     0
 3     1122     0
 4     4559     1
 5     4559     0
 6     4559     0
 7     4559     0
 8     4559     0 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T17:54:32.147

几种方法将它们全部设置为 0，然后将每个会话的最小值更新为 1。

```
Update table set win = 0
update table set win = 1 where ID in (Select min(ID) from table group by session) 
```

或多合一

```
Update table set win=0 where ID not in (Select MIN(ID) from table group by session) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T18:03:56.340

考虑到 MySQL 执行更新的可怕语法，我能想到的唯一方法是：

```
update t set win = 0
where id not in (
    select id from (
        select min(id) id from t
        group by session
    ) s
); 
```

也可以加入而不是 group by，但我认为在这种情况下 group by 会更快。

# delphi - Indy TCP 通信和换行

> ID：10164517
> 
> 赞同：2
> 
> 时间：2012-04-15T17:49:35.270
> 
> 标签：delphi, encryption, indy

我有一个错误让我很困惑。以下代码将一行从 TidTCPClient 发送到 TidTCPServer。第一次执行时，它运行良好。它第二次执行，之后每次都在每个字符串的开头添加一个换行符。我错过了什么？（我知道它以一种奇怪的方式做到了，但完整代码中需要客户列表）

```
 procedure TClientForm.ButtonSendStringClick(Sender: TObject);
    var
      I: integer;
      List: TList;
    begin
      List := ClientList.LockList;
      try
       for I := 0 to (List.Count- 1) do
        begin
          TidTCPClient(List[I]).IOHandler.WriteLn('Hello'+'|x|');
        end;
      finally
       ClientList.UnlockList;
      end;
      Edit1.Text := '';
    end;

    procedure TClientForm.IdTCPServer1Execute(AContext: TIdContext);
    var
    LLine: string;
    begin
    LLine := Acontext.Connection.IOHandler.ReadLn('|x|');
    OutputDebugString(PChar(LLine));
    end; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T15:25:50.847

`WriteLn()`将 CRLF 附加到您传递给它的字符串的末尾，但`ReadLn()`在遇到您指定的终止符字符串时停止读取。所以你正在发送`'Hello|x|#13#10'`，但你只是在阅读`'Hello|x|'`，留`#13#10`在套接字缓冲区中以供下一次读取。

要解决您的问题，您有两种选择：

1) 如果您想在 中继续使用自定义终止符`ReadLn()`，请更改`WriteLn()`为`Write()`不再发送隐式 CRLF。您的通话无需更改`ReadLn()`。

```
Write('Hello|x|');
LLine := ReadLn('|x|'); 
```

2) 完全停止使用自定义终结器。仅将您的主字符串传递给`WriteLn()`它并让它附加一个 CRLF，然后不要将任何终止符传递给它，`ReadLn()`因为它的默认终止符是 LF（包括对 CRLF 的处理）。

```
WriteLn('Hello');
LLine := ReadLn(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T18:05:14.027

我在您的客户端代码中发现了一个潜在问题，`ClientList.unlocklist`应该在您的循环之外执行：

```
procedure TClientForm.ButtonSendStringClick(Sender: TObject);
var
  I: integer;
  List      : TList; 
begin     
  List := ClientList.LockList;
  try
   for I := 0 to (List.Count- 1) do
    begin
      ShowMessage('Text to encrypt is ' + Edit1.Text);
      TidTCPClient(List[I]).IOHandler.WriteLn((Encrypt(Edit1.Text,'Pass')+'|x|'));      
    end;
  finally
   ClientList.UnlockList;
  end;
  Edit1.Text := '';
end; 
```

不要在服务器的执行事件中使用 showmessage，因为这不是您必须使用`synchronize`或使用其他日志记录方法的主 GUI 线程。另一个潜在的问题是，您的加密字符串可能包含回车字符甚至空字符 (#0)，在这种情况下`Readln`，您的服务器的方法将无法读取整个加密字符串，因此无法解密。解决此问题的一种方法是使用`base64 encoding`.

**编辑**

问题在于您使用的是 '|x|' 终止符与 ReadLn 结合使用。由于您从客户端使用 writeln，因此您可以执行此操作

```
procedure TClientForm.IdTCPServer1Execute(AContext: TIdContext);
var
 LLine: string;
begin
 LLine := Acontext.Connection.IOHandler.ReadLn;
 OutputDebugString(PChar(LLine));
end; 
```

如果您想使用终结器，请不要使用`writeln`and`readln`

# php - Paypal - 使用 PHP 重定向？

> ID：10164520
> 
> 赞同：0
> 
> 时间：2012-04-15T17:50:27.493
> 
> 标签：php, html, paypal

我试图将我的买家重定向到一个页面：`http://url.com`但是，当交易成功时，它只会将他们重定向到贝宝页面。我曾尝试使用“在客户完成结账时将其带到此 URL”选项，但这无济于事。我还尝试添加：

`<input type="hidden" name="return" value="http://url.com">`

但这不起作用。我试图避免使用自动返回 URL 选项，因为我希望有多个按钮可以返回到唯一的 URL。任何人都可以给我一些关于如何做到这一点的指示或例子吗？

**我正在使用“*立即购买”*按钮**

这是我的完整代码：

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="return" value="http://url.com">
<input type="hidden" name="hosted_button_id" value="63ZZBGJ8ZMLAL">
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_buynow_SM.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T17:59:23.640

PayPal 允许您通过他们的系统发送您自己的变量（用户购买了什么、他的会员号等），当他们将用户返回到您的页面时（在我看来，您应该通过他们提供的设置来定义）他们将这些参数连同它们自己的参数一起转发，您可以使用它们将用户重定向到您想要的任何页面（在这种情况下，返回 URL 将指向用户永远不会看到的脚本），或者动态输出不同的版本同一页的。查看 PayPal 文档以了解如何传递变量。

[PayPal 的文档](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_Appx_websitestandard_htmlvariables)建议您使用：

```
<input type="hidden" name="custom" value="whatever you want to pass through"> 
```

你可以使用：

```
<input type="hidden" name="return" value="http://url.com?your_variable=whatever%20you%20want"> 
```

另请注意，交易详情不会传递到退货页面。而是将它们传递给 notify_url，您可以在其中指定一个收集和处理交易详细信息的页面。此页面永远不会显示给买家。您必须定义一个 notify_url，如果您想自动响应交易详情，例如不同类型的会员资格，取决于付款金额，或在付款完成后激活会员资格。如果您不指定 notify_url，您所能做的就是感谢您的用户。

# opencv - 为 Visual C++ 2010 express Windows 7 x 64 安装 Open CV 2.3.1

> ID：10164521
> 
> 赞同：0
> 
> 时间：2012-04-15T17:50:58.910
> 
> 标签：opencv

这是我到目前为止所做的

*   下载 Open CV 2.3.1、visual C++ 和 Cmake。
*   我将所有 Open CV 文件提取到 open cv 并创建了一个构建文件夹。
*   启动 Cmake 并配置 Open CV，
*   只有在我留下 QT、IPP 和 TBB“OPEN”的框后，我才能生成 OpenCV.lib 文件。
*   我还在环境变量中添加了“C:\opencv\build\x86\vc10\bin”。
*   使用 Visual C++，我首先打开了打开的 cv lib 文件——它成功地完成了——然后我编译了它。

这就是输出不得不说的，

> 112>链接：致命错误LNK1104：无法打开文件'....\lib\Debugopencv_highgui231d.lib' 113>-----跳过构建：项目：安装，配置：调试Win32 ------ 113>未选择为此解决方案配置构建的项目 ========== 构建：1 成功，109 失败，14 最新，3 跳过 ==========>

我真的不知道我做错了什么。我也是 Visual C++ 的新手。>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T17:57:54.590

您无需编译 OpenCV 即可使用它。

如果您下载`OpenCV-2.3.1-win-superpack.exe`，它具有适用于 Visual Studio 2010 32 位和 64 位的预构建二进制文件和 lib 文件。`/build/`在您安装 OpenCV 的文件夹中的子目录中查找

# java - cxf-codegen-plugin 不生成源

> ID：10164522
> 
> 赞同：18
> 
> 时间：2012-04-15T17:50:59.033
> 
> 标签：java, maven, cxf, wsdl2java

我正在尝试让*cxf-codegen-plugin*从我的 wsdl 文件中生成源代码。当调用 wsdl2java 手册时，会生成所需的类，但是当使用**mvn generate-sources**时没有任何反应，并且我收到消息“项目不需要目标”。直接调用插件没有帮助。

我的 poms 的摘录如下：

```
<plugin>
    <groupId>org.apache.cxf</groupId>
    <artifactId>cxf-codegen-plugin</artifactId>
    <version>2.5.2</version>
    <executions>
        <execution>
            <id>generate-sources</id>
            <phase>generate-sources</phase>
            <configuration>
                <sourceRoot>${project.build.directory}/generated/cxf</sourceRoot>
                <wsdlOptions>
                    <wsdlOption>
                        <wsdl>${basedir}/src/main/MyServiceInterface.wsdl</wsdl>
                    </wsdlOption>
                </wsdlOptions>
            </configuration>
            <goals>
                <goal>wsdl2java</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-15T18:12:27.723

这看起来很像我（成功）在我的一个项目中配置该插件的方式；我希望这能奏效。（我相信你可以省略`<sourceRoot>`; 的默认设置就是你所说的那个。）

我唯一能想到的是，如果您将该插件配置放在非活动的 Maven 配置文件中，或者（更有可能）放在`<pluginManagement>`部分而不是直接`<plugins>`部分中；pluginManagement 部分覆盖插件配置的各个方面，但实际上并未启用它们以供使用。（但是它确实会影响显式使用；我知道您不想这样做。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T15:39:59.327

至少在我的情况下，我认为它没有生成源代码，但实际上是。问题是文件夹 target/generated/cxf 被 Eclipse 指定为源文件夹，我没有手动执行。所以源代码位于我项目的顶部，在包结构中，而不是在下面的文件夹结构中，这是我一直在寻找和期待的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-26T13:05:38.183

在我的情况下，只要我有旧的目标目录（在 中定义`<sourceRoot>/path/to/target</sourceRoot>`）就不会生成任何东西。只有在手动删除目标文件夹后，插件才真正开始生成源。

# codeigniter - 连接数据库 CodeIgniter

> ID：10164527
> 
> 赞同：0
> 
> 时间：2012-04-15T17:51:35.220
> 
> 标签：codeigniter, codeigniter-datamapper

我需要为许多数据库连接 database.php 中的主要连接，这没有问题

但另一个连接必须在模型中

我用这个类

```
<?php
class user_model extends CI_Model {

        public function test()
        {
        $specific['hostname'] = "localhost";
        $specific['username'] = "root";
        $specific['password'] = "";
        $specific['database'] = "ci_forsyria";
        $specific['dbdriver'] = "mysql";
        $specific['dbprefix'] = "";
        $specific['pconnect'] = FALSE;
        $specific['db_debug'] = TRUE;
        $specific['cache_on'] = FALSE;
        $specific['cachedir'] = "";
        $specific['char_set'] = "utf8";
        $specific['dbcollat'] = "utf8_general_ci";

        $this->load->database($specific);

        //get data using datamapper
        $o = new db_user();
        $array = array();
        $o->where($array)->get();
        echo $num_rows = $o->result_count();
        }
}
?> 
```

但连接不工作它仍然与主数据库连接

**错误号：1146 表“countries.ci_users”不存在**

***注意：我不会使用 database.php 文件中的另一个连接，因为我有超过 100 个连接***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T18:03:44.460

我相信 CI 会认为您已经有一个可用的连接并且它不使用您指定的参数。

`$this->db->close();`在连接新配置之前尝试通过键入关闭默认连接。

否则，您应该通过将第二个参数设置为 TRUE ，返回具有[手册](http://codeigniter.com/user_guide/database/connecting.html)中指定的新配置的数据库对象的新实例。您应该能够使用返回的对象：

```
$specific_db =  $this->load->database($specific, TRUE); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T18:32:20.770

对于您对 Repox 的评论，您肯定是用错了。他的最后一个解决方案必须有效，我自己不断使用它。你能展示一个对象的“new db_user()”是什么，你可以使用通用数据库吗？

**注意：**在这里留下结束标签，它是一个模型：

> 对于仅包含 PHP 代码的文件，从不允许使用结束标记 ("?>")。PHP 不需要它，并且省略它可以防止意外地将尾随空格注入响应中。

举个例子，它应该从国家表中返回 30 个值。

```
<?php
class user_model extends CI_Model {
    public function test()
    {
    $specific['hostname'] = "localhost";
    $specific['username'] = "root";
    $specific['password'] = "";
    $specific['database'] = "ci_forsyria";
    $specific['dbdriver'] = "mysql";
    $specific['dbprefix'] = "";
    $specific['pconnect'] = FALSE;
    $specific['db_debug'] = TRUE;
    $specific['cache_on'] = FALSE;
    $specific['cachedir'] = "";
    $specific['char_set'] = "utf8";
    $specific['dbcollat'] = "utf8_general_ci";

    $specific_db = $this->load->database($specific, TRUE);

    $example_query = $specific_db->query('SELECT * FROM countries LIMIT 0,30')->result();

    return var_dump($example_query);
    }
} 
```

# xml - 一个xml和几个xsl（几个视图）

> ID：10164530
> 
> 赞同：0
> 
> 时间：2012-04-15T17:52:00.680
> 
> 标签：xml, xslt

我给你一些上下文来解释我的问题：

我有一个 xml 文件和一个 xsl 文件，如下所示：

数据.xml：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<?xml-stylesheet type="text/xsl" href="overview.xsl"?>
<catalog>
  <cd>
    <title>Empire Burlesque</title>
    <artist>Bob Dylan</artist>
    <country>USA</country>
    <company>Columbia</company>
    <price>10.90</price>
    <year>1985</year>
  </cd>
 </catalog> 
```

和overview.xsl：

```
<?xml version="1.0" encoding="ISO-8859-1"?>

<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="/">
  <html>
  <body>
  <h2>My CD Collection</h2>
  <table border="1">
    <tr bgcolor="#9acd32">
      <th>Title</th>
      <th>Artist</th>
    </tr>

    <xsl:for-each select="catalog/cd">
    <tr>
      <td><xsl:value-of select="title"/></td>
      <td><xsl:value-of select="artist"/></td>
    </tr>
    </xsl:for-each>
 </table>
</body>
</html>
</xsl:template>

</xsl:stylesheet> 
```

当我在 Firefox 中打开 data.xml 时，一切都很好，并且可以按我的意愿工作。现在，我想要我的 CD 目录有 2 个视图。一个视图是“概述”，一个是“扩展”，这意味着，我需要 2 个不同的 xsl。

我试过这个：

视图1.xml：

```
<?xml-stylesheet type="text/xsl" href="overview.xsl"?>
<xml-file href="data.xml" /> 
```

视图2.xml：

```
<?xml-stylesheet type="text/xsl" href="extended.xsl"?>
<xml-file href="data.xml" /> 
```

我删除了这一行：

```
<?xml-stylesheet type="text/xsl" href="overview.xsl"?> 
```

来自数据.xml

我希望能够在阅读 view1.xml 时使用 overview.xsl 阅读我的 CD 目录，并在阅读 view2.xml 时阅读相同的 CD 目录但使用extended.xsl 的格式。

但它只是部分起作用。不知何故，我的overview.xsl 再也找不到节点了。我获得了一个标题为 ab html table 但其中没有数据的网页。我想，我需要改变：

```
<xsl:for-each select="catalog/cd"> 
```

到别的东西。你有什么主意吗？

作为信息，我试图在不使用 javascript 加载另一个 xsl 文件的情况下执行此操作。

谢谢你的帮助。朱丽叶

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T21:48:06.247

我不知道你`<xml-file>`从哪里得到这个想法：对我来说这是一个新的想法。但是您可以通过在样式表中处理它来使其工作：

```
<xsl:template match="xml-file">
  <xsl:apply-templates select="document(@href)/catalog"/>
</xsl:template> 
```

请注意 match="/" 模板现在匹配任一文档的根，这很容易导致无限递归。

如果事情变得更复杂，您需要做的替代方法是编写客户端 Javascript 来调用转换，而不是使用 xml-stylesheet 处理指令。

# java - 使用序列化是个好主意吗？

> ID：10164536
> 
> 赞同：3
> 
> 时间：2012-04-15T17:52:52.310
> 
> 标签：java, xml, serialization, xml-serialization, jvm

序列化存在一些风险，包括不兼容的更改。如果在被序列化的类中发生不兼容的更改，那么即使使用 static final long serialVersionUID 字段，我们也无法对其进行反序列化。

那么，序列化的替代方案是什么？XML ? 如果有任何选择，那么在现实世界的项目中是否有任何使用序列化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T17:58:49.883

当然还有 Java 序列化的替代方案：XML（如您所述）；JSON；protobuf；您愿意使用的其他任何东西。

所有这些都将面临一些不兼容更改的风险。我看不出其他方法有什么神奇之处。如果向对象添加新属性，则必须处理“鸭子类型”。如果您删除一个必需的属性，所有方法都会出现问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T23:32:36.300

您似乎将序列化与数据格式混淆了-最好将它们分开。

广义上，有三种序列化：

1.  **自动化的、全面的、低级的**——这很有用，因为它可以作为服务提供并且使用起来几乎不需要任何努力。但是，就其本质而言，它与语言/程序中使用的内部格式密切相关——如果发生变化，那么反序列化将是“困难的”。典型的例子是java和python提供的“原生”序列化；它对于程序状态的短期快照很有用。

2.  **自动化的、受限的、中等级别的**——通常用于通信/互操作。这将不支持一种语言的所有功能，可能只允许保存简单的数据结构。如果这足够了，那么它是一个有用的中间地带，因为它可以自动化，但独立于语言的内部格式（但不一定独立于程序的细节）。典型的例子包括协议缓冲区、thrift 和 json 库（*不是*json 本身，它是一种数据格式......）；显然，这对于通信和临时数据存储很有用。

3.  **“手工编码”，高级**- 这需要更多的工作，并且可能会节省更少的信息，但旨在以独立于程序（或语言）中使用的内部格式的方式提取“重要部分”。示例包括 docbook 或打开文档（jaxb 在默认情况下提供对 close-to-(1) 的支持相当不错，但在允许 close-to-(3) 时要小心）；这对于长期数据归档很有用，并且通常与“官方”规范相关联。

与上述不同的是用于对序列化数据进行编码的数据格式。我相信您可以在 xml 中实现上述所有内容；json 倾向于在 (2) 处使用。

anyway, to answer the question - (1) has the problems you note. if (2) is sufficient, then it is a simple solution (but still suffers from some of the problems of (1) if data structures within the program change); otherwise you need to do the extra work implied by (3).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T17:57:13.147

答案取决于你的目标。如果您在 Java 进程之间发送数据，则默认的 Java 序列化机制可能会正常工作。

然而，对于存储数据，尤其是人们可能想要查看或编辑的数据，Java 序列化机制不太适合。

当需要人类可读/可编辑的输出时，我非常喜欢有许多很棒的基于 XML 的 java 序列化库。

两个很棒的是：[XStream](http://xstream.codehaus.org/)和[JAXB](http://jaxb.java.net/)

# ios - UITapGestureRecognizer 取消了 UITableViewController 中的 didSelectRowAtIndexPath

> ID：10164537
> 
> 赞同：0
> 
> 时间：2012-04-15T17:52:54.050
> 
> 标签：ios, cocoa-touch

我已经子类`UITableViewCell`化并在类中添加了一个`UITapGestureRecognizer`（它会触发一个名为 的方法`animateCell`）到`contentView`.

我正在尝试做的事情：当用户点击一个单元格时，`animateCell`它会被调用（这有效），但我也想`didSelectRowAtIndexPath`被调用，以便我可以将选定的对象从表的源数组添加到另一个数组中。

我注意到的是`UITapGestureRecognizer`取消`didSelectRowAtIndexPath`。有什么办法可以同时拥有两者吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T18:03:51.913

这有点骇人听闻，但是您可以尝试在`UITableViewCell`子类中创建一个属性，该属性将指针返回到您的`UITableViewController`. 然后从您的手势识别器中，您可以执行以下操作：

```
NSIndexPath *indexPath = [self.tableViewController.tableView indexPathForCell:self];
[self.tableViewController tableView:self.tableViewController.tableView didSelectRowAtIndexPath:indexPath]; 
```

# jquery - 使用 jQuery 在页面后加载广告

> ID：10164539
> 
> 赞同：0
> 
> 时间：2012-04-15T17:53:10.853
> 
> 标签：jquery, ads

这只是一个问题，有没有办法在页面之后加载广告..？像媒体火一样的东西

例如[http://www.mediafire.com/?ohd522ats0qjb8d](http://www.mediafire.com/?ohd522ats0qjb8d)

我尝试用 jquery 做一些技巧但不起作用:(我的广告代码看起来像这样

```
<!-- BEGIN SMOWTION TAG - 728x90 - DO NOT MODIFY -->
<script type="text/javascript" defer="defer"><!--
smowtion_size = "728x90";
smowtion_section = "87as8d48aas";
//-->
</script>
<script type="text/javascript"
src="http://ads.smowtion.com/ad.js?s=87as8d48aas&z=728x90">
</script>
<!-- END SMOWTION TAG - 728x90 - DO NOT MODIFY --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T18:00:01.703

这可能违反了某人的 TOS，但你可能会这样做：

```
$(function() {
    $.getScript('http://ads.smowtion.com/ad.js?s=87as8d48aas&z=728x90', function() {
       smowtion_size = "728x90";
       smowtion_section = "87as8d48aas";
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T18:02:55.753

假设你想把你的 add 放在一个 id=add 的 div 中

```
$(function(){
   $('#add').append('<script type="text/javascript" defer="defer">
                       smowtion_size = "728x90";
                       smowtion_section = "87as8d48aas";
                    </script>
                    <script type="text/javascript" src="http://ads.smowtion.com/ad.js?s=87as8d48aas&z=728x90"></script>
                     ');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T17:57:55.350

你能检查萤火虫控制台是否有任何错误吗？这可能是没有出现的原因之一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T17:59:31.250

```
$(document).ready(function() {
      $.getScript('http://ads.smowtion.com/ad.js?s=87as8d48aas&z=728x90', function() {
          smowtion_size = "728x90";
          smowtion_section = "87as8d48aas";
      });
}); 
```

# django - 通过单击链接更改布尔字段

> ID：10164541
> 
> 赞同：0
> 
> 时间：2012-04-15T17:53:39.523
> 
> 标签：django, django-templates

我使用图像来表示布尔字段的状态（如 openeye.png、closeeye.png）。如果我单击图像，状态正在改变，页面必须用另一个图像刷新。有一些视图使用了这个。有一个代码：

**模板 - 这可能是 moviegrid.html、movielist.html 等**

```
{% if movi.seen %}    {# movi.seen is a boolean field #}
    <div id="seen">
        <a href="{% url views.changeseen movi.tmdb_id %}">
             <img src="{{ STATIC_URL }}seen.gif">
        </a>
    </div>
{% else %}
    <div id="seen">
        <a href="{% url views.changeseen movi.tmdb_id %}">
             <img src="{{ STATIC_URL }}not_seen.gif" >
        </a>
    </div>
{% endif %} 
```

**views.changeseen**

```
def changeseen(request, id):
    mov=Movi.objects.get(tmdb_id=id)
    mov.seen=not mov.seen
    mov.save()
    return redirect('??????') 
```

问题：如何从 回到父页面`changeseen`？如果有更优雅的方式来改变布尔值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T18:32:00.363

如果您想要优雅，您可以将`changeseen`视图称为 AJAX`GET`请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T18:32:43.547

虽然您*可以*使用 HTTP 引荐来源网址（在 HTTP 引荐来源网址字段中，可通过 访问`req.META['HTTP_REFERER']`），但不能保证这将被设置甚至有效。我建议您在 URL 中将有关当前页面的一些信息传递给 changeeen：

```
{% if movi.seen %}    {# movi.seen is a boolean field #}
<div id="seen">
    <a href="{% url views.changeseen movi.tmdb_id %}?return_to={{ request.get_full_path }}">
    <img src="{{ STATIC_URL }}seen.gif">
    </a>
</div>
{% else %}
<div id="seen">
    <a href="{% url views.changeseen movi.tmdb_id %}?return_to={{ request.get_full_path }}">
    <img src="{{ STATIC_URL }}not_seen.gif" >
    </a>
</div>
{% endif %} 
```

您应该在实际将用户重定向到它之前验证 return_to，如果它似乎没有意义（例如重定向到注销 URL，甚至是异地），那么您应该将它们重定向到默认位置，例如主要电影页。

# dart - 如何在同一个类中导入 dart:html 和 dart:io？

> ID：10164542
> 
> 赞同：7
> 
> 时间：2012-04-15T17:53:44.553
> 
> 标签：dart

下面的代码“看起来正确”，它编译，但不运行，失败并显示控制台消息：

> 无法加载 Dart 脚本 dart:io
> 加载资源失败

如果我注释掉`#import('dart:io');`, 我相信是错误的，我会收到一个编译错误，但它会启动，直到我按下按钮，我会收到运行时错误：

> 内部错误：'http://127.0.0.1:3030/home/david/dart/samples/htmlIO/htmlIO.dart'：错误：第 13 行 pos 26：未加载类型 'HttpClient'
> var connection = new HttpClient() .get('www.google.com', 80, '/');

......这是预期的。

所以我的问题是：如何在同一个类中导入 dart:html 和 dart:io？

```
#import('dart:html');
#import('dart:io');

class htmlIO {

  ButtonElement _aButton;

  htmlIO() {
  }

  void handlePress(Event e) {
    var connection = new HttpClient().get('www.google.com', 80, '/');
    write('made it');
  }

  void run() {
    _aButton = document.query("#aButton");
    _aButton.on.click.add(handlePress);
    write("Hello World!");
  }

  void write(String message) {
    // the HTML library defines a global "document" variable
    document.query('#status').innerHTML = message;
  }
}

void main() {
  new htmlIO().run();
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-15T19:51:19.327

`dart:html`是客户端库，而是`dart:io`服务器端库。 `dart:html`使用浏览器的功能，但`dart:io`使用受浏览器安全限制的功能（如文件系统访问等）。

也许是时候到了，您可以`dart:html`在服务器上使用“模拟”浏览器，这可能对单元测试等有用，但您还不能这样做。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-21T20:41:53.223

简短的回答，你不能。正如 Chris 所提到的，dart:io 库仅适用于服务器库。

我看到您正在尝试连接到 HTML 应用程序中的 HTTP 服务。您应该查看 HttpRequest 库。这是示例的链接： http: [//c.dart-examples.com/api/dart-html/interface/eventtarget/httprequest/asynchronous](http://c.dart-examples.com/api/dart-html/interface/eventtarget/httprequest/asynchronous)

```
import 'dart:html';
import 'dart:convert';

void onSuccess(ProgressEvent event, HttpRequest request) {
  print(event.loaded); // 0
  print(request.statusText); // ok
  print(request.responseText); // "(resource text)"
}

/**
 * test.txt file must be of the same origin
 * Or the response header must contain "Access-Control-Allow-Origin: [*|origin]"
 */
void main() {
  String url = "test.txt";  
  HttpRequest request = new HttpRequest();
  request.open("GET", url, async : true);
  request.onLoadEnd.listen((ProgressEvent e) => onSuccess(e, request));
  request.send();
} 
```

有一个统一来自 dart:html 的 HttpRequest 和来自 dart:io 的 HttpClient 的请求，参见[http://code.google.com/p/dart/issues/detail?id=2677](http://code.google.com/p/dart/issues/detail?id=2677)

# c - 粒子群优化 - 更新粒子位置

> ID：10164545
> 
> 赞同：0
> 
> 时间：2012-04-15T17:54:19.553
> 
> 标签：c

我在粒子定位中实施 PSO。我有随机位置的粒子。我需要优化这些粒子。我无法理解 PSO 中的目标函数以及如何通过这些 eqns 找到位置。

```
Vid (k) =wVid (k − 1) + c1r1id (k)(Xpbestid − Xid ) + c2r2id (k)(Xgbestd − Xid ) 
Xid (k) =Xid (k − 1) + Vid (k) 
```

因为这些函数将粒子位置作为单个值给出，而我有一个坐标 (x,y)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T19:37:07.397

首先，你不是在任何地方问问题——你真的想知道什么？

我可以做出有根据的猜测，但如果那是错误的，那我就浪费了我的时间......

如果您向我们展示的内容是正确的，那么正如您所说，这些函数使用单个值作为位置。这意味着单个值实际上是向量，因此 3 维中的 k={kx, ky, kz} 和 n 维中的 k={k1, k2, ..., kn}。'1' 是所有维度都等于 1 的单位向量。

要**了解**您需要阅读线性代数和矢量分析的函数。

# java - hashcode() 的正确实现

> ID：10164546
> 
> 赞同：0
> 
> 时间：2012-04-15T17:54:20.183
> 
> 标签：java

我有一个 pojo ，其中我自己定义了 hashcode 方法，即..

```
 public int hashCode()
     {       
     return name.hashCode()+job.hashCode()+salary;       

 } 
```

但由于我使用的是 eclipse IDE，它还提供了我自动生成的哈希码，即..

```
 @Override
public int hashCode() {
    final int prime = 31;
    int result = 1;
    result = prime * result + ((job == null) ? 0 : job.hashCode());
    result = prime * result + ((name == null) ? 0 : name.hashCode());
    result = prime * result + salary;
    return result;
} 
```

现在我的问题是两者之间有什么区别，哪一种更好..！我完整的pojo是...

```
enter codepackage CollectionsPrac; 
```

公共类员工{

```
 String name,job;
 int salary;

 public Employee(String n , String j, int t )
 {
     this.name= n;
     this.job=j;
     this.salary= t;         
 }

 @Override
public int hashCode() {
    final int prime = 31;
    int result = 1;
    result = prime * result + ((job == null) ? 0 : job.hashCode());
    result = prime * result + ((name == null) ? 0 : name.hashCode());
    result = prime * result + salary;
    return result;
}

 /*@Override
public boolean equals(Object obj) {
    if (this == obj)
        return true;
    if (obj == null)
        return false;
    if (getClass() != obj.getClass())
        return false;
    Employee other = (Employee) obj;
    if (job == null) {
        if (other.job != null)
            return false;
    } else if (!job.equals(other.job))
        return false;
    if (name == null) {
        if (other.name != null)
            return false;
    } else if (!name.equals(other.name))
        return false;
    if (salary != other.salary)
        return false;
    return true;
}
 */

/* @Override
 public int hashCode()
     {       
     return name.hashCode()+job.hashCode()+salary;       

 }*/

 @Override
    public boolean equals(Object obj) {  
     if (this == obj)  
    {  
        return true;   
    }  
    // make sure o can be cast to this class  
    if (obj == null || obj.getClass() != getClass())  
    {  
        // cannot cast  
        return false;  
    }           

     Employee e = (Employee) obj;   
     return this.name.equals(e.name)&&this.job.equals(e.job)&&this.salary==e.salary;
 }

 @Override
 public String toString() {
        return name+"\t" +"\t"+  job +"\t"+ salary;
    } 
```

} 这里

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T17:59:28.950

当涉及到 POJO 中的小变化时， Eclipse-generate`hashCode()`更加敏感。例如，如果您相互切换`job`和`name`值，您`hashCode()`将返回相同的值（加法是可交换的），而花哨的 Eclipse 版本将返回完全不同的值：

```
System.out.println(new Employee("John", "Blacksmith", 100).hashCode());
System.out.println(new Employee("Blacksmith", "John", 100).hashCode());

//your version of hashCode() produces identical result:
376076563
376076563

//Eclipse version:
-1520263300
926019626 
```

# 也可以看看

*   [为什么 Java 的 String 中的 hashCode() 使用 31 作为乘数？](https://stackoverflow.com/questions/299304)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T18:09:02.583

最重要的区别是您的实现将抛出`NullPointerException`if`job`或`name`is `null`。

此外，eclipse 生成的方法会导致更不规则的哈希码，这在理论上意味着哈希表退化和性能不佳的可能性较低，但实际上这可能无关紧要，因为`java.util.HashMap`之前使用辅助哈希函数来打乱哈希码使用它。

# c# - 数据表到 Excel 互操作 VS 其他方法；另存为/打开所需的弹出窗口

> ID：10164548
> 
> 赞同：1
> 
> 时间：2012-04-15T17:54:23.937
> 
> 标签：c#, excel, datatable, office-interop, export-to-excel

我已经实现了以下似乎工作正常的方法，但是它将文件保存到预定义的位置，而不是我希望它为用户提供一个选项，就像任何常规下载弹出窗口一样：打开，保存，另存为。任何的想法？

* * *

为了克服“在进行 OLE 调用之前必须将当前线程设置为单线程单元 (STA) 模式”异常，必须实现线程，请参阅编辑！

编辑：

1)

```
 using System.Threading; 
```

2)

```
[STAThread]
private static void ExportToExcel(DataTable dt)
{
    Thread t = new Thread(SaveIt);
    t.SetApartmentState(ApartmentState.STA);
    t.Start(dt);
} 
```

3)

```
static void SaveIt(Object dt)
{
    DataTable table = (DataTable)dt;
    System.Windows.Forms.SaveFileDialog sfd = new System.Windows.Forms.SaveFileDialog();

    if (sfd.ShowDialog() == System.Windows.Forms.DialogResult.OK)
        SaveName = sfd.FileName;
    else
        SaveName = "ResourceProfile";
    workbook.SaveAs(.....
} 
```

编辑结束。

```
private static void ExportToExcel(DataTable dt)
{
    Microsoft.Office.Interop.Excel.ApplicationClass excel = new Microsoft.Office.Interop.Excel.ApplicationClass();
    Microsoft.Office.Interop.Excel.Workbook workbook = excel.Application.Workbooks.Add(true);

    int iCol = 0;
    foreach (DataColumn c in dt.Columns)
    {
        iCol++;
        excel.Cells[1, iCol] = c.ColumnName;
    }

    int iRow = 0;
    foreach (DataRow r in dt.Rows)
    {
        iRow++;

        // add each row's cell data...
        iCol = 0;
        foreach (DataColumn c in dt.Columns)
        {
             iCol++;
             excel.Cells[iRow + 1, iCol] = r[c.ColumnName];
        }
    }

    object missing = System.Reflection.Missing.Value;

    DateTime CurrentDate = DateTime.Now;          

    String CurDate = CurrentDate.ToShortDateString().Replace("/",".");

    workbook.SaveAs("ResourceProfile-" + CurDate + ".xls", Microsoft.Office.Interop.Excel.XlFileFormat.xlXMLSpreadsheet, missing, missing, false, false, Microsoft.Office.Interop.Excel.XlSaveAsAccessMode.xlNoChange, missing, missing, missing, missing, missing);

    excel.Visible = true;
    Microsoft.Office.Interop.Excel.Worksheet worksheet = (Microsoft.Office.Interop.Excel.Worksheet)excel.ActiveSheet;
    ((Microsoft.Office.Interop.Excel._Worksheet)worksheet).Activate();

    ((Microsoft.Office.Interop.Excel._Application)excel).Quit();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T18:12:36.673

只需将[SaveFileDialog](http://msdn.microsoft.com/en-us/library/sfezx97z.aspx)添加到您的应用程序，并从用户那里获取文件名：

```
String SaveName;

if saveFileDialog1.ShowDialog  = DialogResult.OK 
{
  SaveName := saveFileDialog1.FileName;
  workBook.SaveAs(SaveName, ...);
} 
```

您可以通过设置`SaveFileDialog`. 您甚至可以在他们接受或修改`SaveDialog.FileName`之前将其设置为您在上面创建的默认名称。`ShowDialog`

您也可以使用`excel.Application.get_FileDialog`- 这是一个示例：

```
Microsoft.Office.Core.FileDialog fd = 
  excel.Application.get_FileDialog(Microsoft.Office.Core.MsoFileDialogType.msoFileDialogSaveAs);

fd.AllowMultiSelect = true; 
fd.Filters.Clear(); 
fd.Filters.Add("Excel Files", "*.xls;*.xlw", missing); 
fd.Filters.Add("All Files", "*.*", missing); 

if (fd.Show() != 0)
{
  fd.Execute();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T15:36:40.103

如果您要处理大量记录（可以说超过 20000 条或更多），那么执行“foreach”循环的方式将花费大量时间。

我建议使用 EPPlus lib。

以下是直接将数据表放入excel的方法：

```
worksheet.Cells["A1"].LoadFromDataTable(dtForExcel, true); 
```

我已经对其进行了测试，它只需要大约 2 秒。

**我不明白为什么 MS 没有在“Microsoft.Office.Interop.Excel”中提供这样的便利？**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-22T12:06:44.460

使用下面提到的代码在 aspx 中显示 saveAs 对话框。

```
 var excel = new Microsoft.Office.Interop.Excel.Application();
        var workbook = excel.Workbooks.Add(true);
        // to add a sheet to workbook
        AddExcelSheet(dataTable1, workbook, "Sheet Name");

        string spreadsheetName = "DefaultFilename";
        excel.DisplayAlerts = false;
        Dialog saveAsDialog = excel.Dialogs[XlBuiltInDialog.xlDialogSaveAs];

        // to show dialog box with default filename
        saveAsDialog.Show(spreadsheetName);

        workbook.Close(true);
        excel.Quit();
        System.Runtime.InteropServices.Marshal.ReleaseComObject(excel); 
```

# ruby - 如何点击使用 Selenium Ruby 获取的所有链接

> ID：10164549
> 
> 赞同：3
> 
> 时间：2012-04-15T17:54:25.187
> 
> 标签：ruby, selenium, click, selenium-webdriver

我写了以下几行来点击获取页面中的所有链接，但它只点击一个链接并卡在那里点击，我使用了 Selenium Web Driver API：

```
require 'rubygems'
require 'selenium-webdriver'

driver = Selenium::WebDriver.for :firefox
driver.get " http://www.testfire.net "
for i in 1..100
    link = driver.find_element(:tag_name, "a")
    link.click
end 
```

告诉我如何跳过单击的链接并转到下一个链接，或者可以将范围设置为 1 到直到它到达`</html>`标签处的 html 页面末尾。我想它会像`eofpage = drive.find_element(:tag_name, "/html")`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T18:42:19.827

看起来有一个 driver.find_elements 方法：

```
require 'rubygems'
require 'selenium-webdriver'

driver = Selenium::WebDriver.for :firefox
driver.get " http://www.testfire.net "

driver.find_elements(:tag_name, "a").each {|link| link.click } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T11:07:10.977

我们可以使用下面的代码来查找页面中的所有链接并使用新标签打开。

```
require 'rubygems'
require 'selenium-webdriver'

driver = Selenium::WebDriver.for :chrome
@driver.get "http://thiyagarajan.wordpress.com/"
  link = @driver.find_elements(:tag_name, "a")
  link.each do |a|
    a = @driver.execute_script("var d=document,a=d.createElement('a');a.target='_blank';a.href=arguments[0];a.innerHTML='.';d.body.appendChild(a);return a", a)
    a.click
  end 
```

# php - SQL 语句给我一个错误？

> ID：10164552
> 
> 赞同：0
> 
> 时间：2012-04-15T17:54:41.507
> 
> 标签：php, mysql, sql, pdo, mysqli

我下面的代码（必须与 sql 语句（UPDATE 查询语句）有关，基本上当我进入浏览器并使用我知道数据库中存在的密钥访问脚本时，我收到以下错误：

```
[15/04/2012 18:33:57] - exception 'PDOException' with message 'SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '' for key 'user_activation_key'' in C:\wamp\www\user-verify.php:53
Stack trace:
#0 C:\wamp\www\user-verify.php(53): PDOStatement->execute(Array)
#1 {main} 
```

这是我的代码：，不确定它对重复条目说了什么，因为 user_activation_key 列是唯一的，是的，我正在使用 InnoDB 和外键来进行数据完整性。

```
// check if key is set and alphanumeric and equals 40 chars long
// we use sha1 so it will always be 40 chars long.
if(isset($_GET['key']) && ctype_alnum($_GET['key']) && strlen($_GET['key']) == 40){
    $key = trim($_GET['key']);
}

// if key isset
if(isset($key)){

try {
        // connect to database
        $dbh = sql_con();

        // if key is of valid length and type we need to update the `user_activation_key` in the `users_status` table to NULL
        // and update the `user_status`in the `users` table to 1 (tinyint)(active) based on the condition that the 
        // activation key can be found in the users_status.user_activation_key column and user_uid match in both users_status and users table
        $stmt = $dbh->prepare("
                            UPDATE
                                users
                            JOIN
                                users_status
                            ON
                                users_status.user_activation_key = ?
                            SET
                                users.user_status = 1,
                                users_status.user_activation_key = NULL
                            WHERE
                                users_status.user_uid = users.user_uid");

        // execute query
        $stmt->execute(array($key));

        if ( $stmt->rowCount() > 0 ) {

            echo 'account now activated';
            exit;

        } else {
            echo 'could not activate account at this time';
            exit;
        }

    // close database connection
    $dbh = null;

} // if any errors found log them and display friendly message
catch (PDOException $e) {
    ExceptionErrorHandler($e);
    require_once($footer_inc);
    exit;
}

} else {

// else key not valid or set
echo '<h1>Invalid Activation Link</h1>';

$SiteErrorMessages =
"Oops! Your account could not be activated. Please recheck the link in your email.
The activation link appears to be invalid.<br /><br />
If the problem persists please request a new one <a href='/member/resend-activation-email'>here</a>.";

SiteErrorMessages();

include($footer_inc);
exit;

} 
```

不知道为什么我会收到这个错误，有人知道它的确切含义吗？

即使键存在于`users_status`表中，它也不会执行更新。如果我输入了一个无效的密钥，它说**此时无法激活帐户，这**是它应该做的，但是当密钥有效时它应该更新但它输出上面的错误。

**更新：**

这是这两个表的数据库设计。

```
CREATE TABLE `users` (
  `user_uid` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT 'users unique id',
  `user_status` tinyint(1) unsigned NOT NULL COMMENT '0 = verify | 1 = active |  2 =  suspended | 3 = delete | 4 = spam |',
  `user_login` varchar(15) NOT NULL COMMENT 'users login username',
  `user_pass` char(152) NOT NULL,
  `user_email` varchar(255) NOT NULL COMMENT 'users email',
  `user_registered` datetime NOT NULL DEFAULT '0000-00-00 00:00:00' COMMENT 'user registration date',
  `user_display_name` varchar(60) NOT NULL COMMENT 'users display name (first & last name)',
  `user_failed_logins` tinyint(1) unsigned NOT NULL DEFAULT '0' COMMENT 'failed login attempts',
  PRIMARY KEY (`user_uid`),
  UNIQUE KEY `user_login` (`user_login`),
  UNIQUE KEY `user_email` (`user_email`),
  KEY `user_pass` (`user_pass`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COMMENT=Users Table';

CREATE TABLE `users_status` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT COMMENT 'auto generated id',
  `user_uid` int(10) unsigned NOT NULL,
  `user_activation_key` char(40) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `user_uid` (`user_uid`),
  UNIQUE KEY `user_activation_key` (`user_activation_key`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COMMENT='user status table, when a user registers they must first activate there account';

ALTER TABLE `users_status`
  ADD CONSTRAINT `FK_user_status` FOREIGN KEY (`user_uid`) REFERENCES `users` (`user_uid`) ON DELETE CASCADE ON UPDATE CASCADE; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T17:56:36.930

在您的查询中，您设置`users_status.user_activation_key`为 `NULL`，我很确定，它有一个 `UNIQUE`索引，并且`NULL`表中必须已经存在值。

这就是您收到该错误的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T17:59:05.790

您正在传递一个`NULL`值，`user_status.user_activiation_key`并且该字段似乎是主键，并且不能是`NULL`重复键（存在键），因此这将违反`Integrity constraint violation`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T10:54:19.513

在敲了我几次头之后我已经解决了，问题是即使你 user_activation_key 是唯一的并且有一个索引我没有设置列以允许 NULL 值因此错误。

我对其进行了更改，因此它仍然是唯一的并且具有索引但允许 NULL 值并且它可以工作。

# javascript - HTML - 样式化表单按钮

> ID：10164555
> 
> 赞同：5
> 
> 时间：2012-04-15T17:55:31.027
> 
> 标签：javascript, html, css, button, styles

我正在尝试为我的表单设置提交按钮的样式。我正在查看“按钮”标签，并添加了我的 CSS 样式，但按钮的默认样式仍然很糟糕。

这是我到目前为止所拥有的：

```
<button name="visit_return_button" id="visit_return_button" type="submit" class="visit_return_button">
Increase
</button> 
```

我的 css 样式有效，但我的边框和背景颜色也很糟糕。我也在研究 JavaScript，但我不喜欢并非所有浏览器都激活 JS 的想法。

下面是按钮的图像，顶部是它的样子，底部是它假设的样子：

![在此处输入图像描述](../Images/b0e42e3e585b9e7d9fc6a3d0604bb739.png)

这是我的CSS：

```
#visit_return_button{
    width:90px;
    height:30px;
    position:absolute;
    background-image: url(image/build_button.png);
    background-repeat: no-repeat;
    /*font-family: Tahoma, Geneva, sans-serif;*/
    font-size: 14px;
    font-weight: normal;
    color: #FFF;
    text-align: center;
    /*margin: auto;*/
    padding-top: 10px;
    margin-top:-20px;
} 
```

将不胜感激任何帮助，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T18:10:56.563

要么尝试隐藏`border`类似`border:0;`内容并调整背景以满足您的需要，要么不使用背景图像并尝试使用纯 css 来完成，`border-radius`这似乎是一个更好的主意。见[http://jsfiddle.net/qVkRs/1/](http://jsfiddle.net/qVkRs/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T18:18:23.403

首先，您要为按钮创建全局样式，否则您必须将这些样式应用于每个按钮 id，这将是很多重复的 css。然后将您的背景样式更改为如下所示。之后，您可以调整其余部分以使其看起来正确。

```
input[type="button"], input[type="submit"], button
{
     background: none;
     background-image: url(image/build_button.png);
     background-position: center center;
     background-repeat: no-repeat;
     border: 0px;
     /* add the rest of your attributes here */
} 
```

这会将这些样式应用于整个站点的所有按钮。如果您需要对特定按钮应用其他样式或覆盖上述某些样式，则使用 id 并将其放在上述代码下方。还要去掉按钮标签上的 class="" 属性，你不需要它，而且据我们所见，它没有被使用。希望这可以帮助。祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T18:25:09.937

我认为您正在尝试删除边框。这可以通过以下方式完成：

```
border:none; 
```

我冒昧地整理了这里的原始 CSS：

```
#visit_return_button{
    width:90px;
    height:30px;
    font:14px Tahoma, Geneva, sans-serif;
    background:url(image/build_button.png) no-repeat;
    color:#fff;
    text-align:center;
    border:none; /* removal of border */
} 
```

此外，如果这是一种形式，最好使用：

```
<input type="button" value="Increase"/> 
```

用于按钮；和：

```
<input type="submit" value="Increase"/> 
```

专门用于提交按钮。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T18:27:40.957

只需隐藏按钮的边框并设置背景颜色

```
background:#ffffff url('your_image.png'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-15T18:29:43.817

这是我的解决方案；我已经用所有主流浏览器测试过，即使没有背景图片，它也能正常工作。除了 IE8 不做圆角。

[http://jsfiddle.net/uSphG/3/](http://jsfiddle.net/uSphG/3/)

我添加了一些样式属性，以防万一。某些功能在不同的浏览器上有不同的默认值。

```
button::-moz-focus-inner {
 padding: 0 !important;
 border: none !important;
}

#visit_return_button{
 display:inline-block;
 width:90px;
 padding:0; margin:0; outline:0;
 background:#9B8C47;
 background-image: url(image/build_button.png);
 background-repeat: no-repeat;
 /*font-family: Tahoma, Geneva, sans-serif;*/
 border:1px solid #866517;
 -moz-border-radius:0.4em;
 border-radius:0.4em;
 font-size: 14px; line-height:24px;
 font-weight: normal;
 color: #FFF;
 text-align: center;
 /*margin: auto;*/
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-16T08:57:20.863

您可以通过 CSS3 Border-Radius 属性轻松制作按钮：-

**CSS**

```
 #visit_return_button{
    background-color:#9C8C42;
    border: 2px solid #91782c;
    color: #FFF;
    text-align: center;
    -webkit-border-radius: 4px;
    -moz-border-radius: 4px;
    border-radius: 4px;
    padding: 10px;
    } 
```

**HTML**

```
<button id="visit_return_button" type="submit">Increase</button> 
```

演示：- [http://jsfiddle.net/VY8xs/3/](http://jsfiddle.net/VY8xs/3/)

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-04-15T18:09:14.523

库通常是跨多种浏览器类型一致地设置按钮样式的良好解决方案。查看[jQuery 按钮](http://jqueryui.com/demos/button/)，[YUI 按钮](http://yuilibrary.com/yui/docs/button/cssbutton.html)，还有很多[其他](http://www.webresourcesdepot.com/category/design/buttons/)的。

# java - 无法将 A 类转换为 B 类

> ID：10164558
> 
> 赞同：3
> 
> 时间：2012-04-15T17:56:00.240
> 
> 标签：java, oop

`level`从实例访问字段的正确方法是`Minotaur`什么？得到错误`for (int i =0 ; i < ((Monster) this).level ; i++)`是`Cannot cast from Player to Monster`。

```
package player;

import monsters.*;

public class Player extends GameCharacter {

      public void performAttackOn(GameCharacter who){

    if (who instanceof Monster ){

        for (int i =0 ; i < ((Monster) this).level ; i++) { // << 

                 }

    public static  class Minotaur extends Monster{ // << nested class which is being created and there is need to access it's level

        public Minotaur () {

              type = "Minotaur";

        }
    }

} 
```

* * *

```
package monsters;

public class Monster extends GameCharacter{

    public int level = 1;
} 
```

* * *

```
package monsters;

public abstract class GameCharacter{

public static  class Minotaur extends Monster{

        public Minotaur(){
            type = "Minotaur";
             hitPoints = 30;
             weapon = new Weapon.Sword();

        }
    }
} 
```

* * *

`Minotaur`应该在继承自的某些方法中扩展`monsters.GameCharacter`和`monsters.Monster`覆盖`Player.player``monsters.GameCharacter`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T17:58:59.420

让`GameCharacter`接口定义一个`getLevel()`方法，`Monster`两者`Player`都实现。

```
public interface GameCharacter
{
  public int getLevel( );
} 
```

一旦你这样做了，你就利用了[多态性](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)，甚至不需要强制转换。

* * *

另外，您真的是要强制转换`this`为 type`Player`的类型`Monster`吗？或者你的意思是：

```
public void performAttackOn(GameCharacter who)
{
    for (int i =0 ; i < who.getLevel( ) ; i++)
    {
      // do stuff...
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T17:59:47.560

在您定义的层次结构中， a`Player`永远不可能是 a `Monster`，所以演员是不可能的。

根据上面的检查，我相信您遇到问题的行应该参考`who`而不是`this`：

```
for(int i = 0; i < ((Monster)who).level; i++) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T18:00:34.090

这很容易。你检查是否`who`是一个Monter，但如果是，你施法`this`到Moster并`this`指代你目前是女巫的对象，这意味着一些玩家。替换这个

`((Monster) this).level`

有了这个

`((Monster) who).level`

并且错误应该消失。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T17:59:28.683

编辑：现在我明白了，你不能对类的字段进行继承。你应该有一个通用的方法

```
pubic int level(); 
```

在你的`GameCharacter`. 然后，您可以选择是定义`level`为两个不同的子类字段（不推荐）还是只保留`GameCharacter`一个级别字段。

这里：`((Monster) this).level`你正在转换`this`实例，它是一个`Player`to `Monster`。这就是你得到错误的原因。

也许你的意思是：

```
if (who instanceof Monster ){
  for (int i =0 ; i < ((Monster) who).level ; i++) { // << 

  }
} 
```

# mongodb - 是否建议在用户详细信息集合中使用 USER_NAME 作为 object_id？

> ID：10164563
> 
> 赞同：0
> 
> 时间：2012-04-15T17:57:13.170
> 
> 标签：mongodb

我是 MongoDB 的新手，并为用户详细信息集合设计模式。是否建议在用户详细信息集合中使用 USER_NAME 作为 object_id？它的优点和缺点是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T21:22:30.357

唯一的数据库限制是 _id 必须是唯一的。你可以使用任何你喜欢的东西。

唯一需要考虑的就是对用户的引用。如果您有很多很多行，您最终可能会持有对用户文档的引用。使用 objectid 而不是用户名可能是有益的。objectid 是 12 个字节。

山姆

# java - 如何从java中的类中调用另一个类

> ID：10164565
> 
> 赞同：1
> 
> 时间：2012-04-15T17:57:18.107
> 
> 标签：java, class

我正在尝试调用位于同一目录中并已编译的另一个类。当我调用其他类时，我不断收到未找到的错误符号。任何人都可以看看我的代码，看看我做错了什么。

这是代码：

```
import java.io.*;
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;
import java.util.*;

public class NameGameFrame extends JFrame
{
    public static String name;
    static JTextField textfield = new JTextField(20);
    static JTextArea  textarea = new JTextArea(30,30);

    public static void main( String[] args)
    {

        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setTitle("Name Game");
        frame.setLocation(500,400);
        frame.setSize(800,800);

        JPanel panel = new JPanel(new GridBagLayout());
        GridBagConstraints c = new GridBagConstraints();

        JLabel label = new JLabel("Enter the Name or Partial Name to search:");
        c.gridx = 0;
        c.gridy = 0;
        c.insets = new Insets(2,2,2,2);

        panel.add(label,c);

        c.gridx = 0;
        c.gridy = 1;
        panel.add(textarea,c);

        JButton button = new JButton("Search");
        c.gridx = 1;
        c.gridy = 1;
        panel.add(button,c);

        c.gridx = 1;
        c.gridy = 0;
        panel.add(textfield,c);

        frame.getContentPane().add(panel, BorderLayout.NORTH);
        frame.pack();
        frame.setVisible(true);

        button.addActionListener(new ActionListener()
        {
            public void actionPerformed(ActionEvent ae)
            {
                name = textfield.getText();
                java.io.File file = new java.io.File("namesdata.txt");
                try
                {
                    Scanner input = new Scanner(file);
                    num = input.nextLine();
                    while (input.hasNext())
                    {
                        NameRecord(name); 
                    }
                }
                catch(FileNotFoundException e)
                {
                    System.err.format("File does not exist\n");
                }
                textarea.setText(fields[0]);
            }
        });

    }
} 
```

NameRecord 是我正在调用的另一个类的名称。我还需要在我调用的第二个文件类的标题中添加一些内容吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T17:59:05.953

你不能叫一个班级。您可以调用方法和构造函数。

你的说法`NameRecord(name);`是胡说八道。我想你想调用构造函数：

```
NameRecord record = new NameRecord(name); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T18:00:09.023

您需要对`NameRecord`要调用其方法的类中的实例的引用。我没有看到一个。我错过了吗？如果没有，请添加一个。

我不相信这是合法的Java：

```
while (input.hasNext())
{
    NameRecord(name); 
} 
```

`new`正如我看到 Martijn 指出的那样，您需要调用构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-09T10:36:26.297

代替这个

```
 while (input.hasNext())
                {
                    NameRecord(name); 
                } 
```

您必须创建该类的对象

```
 while (input.hasNext())
                {
                    NameRecord record = new NameRecord(name); 
                } 
```

# javascript - 服务器端 Ruby 进程和客户端 Javascript 之间的通信

> ID：10164575
> 
> 赞同：1
> 
> 时间：2012-04-15T17:58:04.833
> 
> 标签：javascript, ruby, ajax, asynchronous, background-process

语境

*   我有一个应用程序可以对 Ruby 中的文本进行耗时的处理。
*   当用户提交文本时，会派生一个后台进程来处理该文本。
*   这个过程不断输出文本的新部分，因为它们已被处理。
*   同时，用户被重定向到将输出处理后的文本的页面。

我的问题是：给定 PID，客户端的 Javascript 如何与服务器上运行的进程通信？那可能吗？我是否需要将每个后台进程包装在其自己的 servlet 中，该 servlet 在其自己的端口上运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T18:02:00.127

它无法访问进程空间。您需要一个 HTTP 接口来执行此操作。您可以使用长轮询来执行此操作。服务器可以定期输出文本，客户端脚本可以长时间轮询它。

在此处查看长轮询示例： [如何实现基本的“长轮询”？](https://stackoverflow.com/questions/333664/simple-long-polling-example-code/333884#333884)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T18:02:34.313

考虑使用 websocket。在我的 Zend 应用程序中，我编写了一个将数据包发送到 JS 的代理脚本。另一种方法是让 setTimeout 每隔 x 秒询问一次 http 服务器，如果进程已经完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T18:05:01.457

最简单的方法是使用[Pusher](http://pusher.com/)或[PubNub](http://www.pubnub.com/)或类似方法，因此您可以将代码推送到包含 PID 的频道，并且客户端可以订阅相同的频道。这样您就不需要设置 HTTP 应用程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-17T04:52:16.373

这是我最终使用的策略：

*   创建一个小的 Sinatra servlet 来管理不同的作业。
*   收到的每个作业请求都分配有一个作业 ID，并在分离的分叉进程中启动。
*   分叉的进程使用用作堆栈的数组设置 DRb 服务。
*   然后它在将作业 ID 与 DRb URI 相关联的 servlet 上执行“GET”请求。
*   随着进程在后台继续执行，它会将元素添加到堆栈中。
*   可以轮询主线程以返回堆栈中的下一个元素。
    *   在 servlet 中建立与远程数组的连接，并从堆栈中移动一个元素。
    *   轮询一直持续到堆栈上没有更多元素要添加并且没有更多元素要返回给客户端为止。
*   当堆栈为空时，进程终止。

有什么想法吗？

# jquery - 将新事件发布到后端控制器

> ID：10164577
> 
> 赞同：0
> 
> 时间：2012-04-15T17:58:26.417
> 
> 标签：jquery, spring-mvc, fullcalendar, freemarker

我正在尝试将 JQuery Full Calendar 与 Spring MVC 一起使用。

我做了一个这样的[演示](http://arshaw.com/js/fullcalendar-1.5.3/demos/selectable.html)。

目标：输入事件后，我需要将更新日历的数据发送到控制器进行处理。

问题：我已成功将我初始化的日历重新发送到控制器。但是，在我输入我的事件后，我无法将更新的日历数据发送到控制器来处理它。

自由标记：

```
<script type="text/javascript">
    var calendar;
    var calendarData;        

    function doAjax() {
        var test = JSON.stringify(calendarData, censor(calendarData));
          var x=$('#calendar').value;
        $.ajax(
        {
            url:"[@spring.url '/vacation/setVacation'/]",
            type: "POST",
            data :x ,
            dataType: "json",
            contentType: "application/json"
        });
    }

    $(document).ready(function() {
        var date = new Date();
        var d = date.getDate();
        var m = date.getMonth();
        var y = date.getFullYear();
        $.getJSON('[@spring.url '/vacation/getVacation'/]', function (data) {
            calendar = $('#calendar').fullCalendar({
                header: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'month,agendaWeek,agendaDay'
                },
                selectable: true,
                selectHelper: true,
                select: function(start, end, allDay) {
                    var title = prompt('Event Title:');
                    if (title) {
                        calendar.fullCalendar('renderEvent',
                        {
                            title: title,
                            start: start,
                            end: end,
                            allDay: allDay
                        },
                                true // make the event "stick"
                                );
                    }
                    calendar.fullCalendar('unselect');
                },
                editable: true,
                events:data
            });
            calendarData = data;
        });
    });   

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T00:36:39.947

为了实现我所需要的，我做了一个解决方法。解决方法是基于构建一个 json 对象并将其发送到控制器。如果用户在日历中输入新事件，我会将这些事件附加到以前保存的旧事件中。

注意：我发现 Stringify 更改了此处提到并解决的日期：[JSON Stringify changes time of date because of UTC](https://stackoverflow.com/questions/1486476/javascript-json-strigify-changes-time-of-date-because-of-utc)

自由标记：

```
<script type="text/javascript">
    var resourceVacation;

    function censor(censor) {
        return (function() {
            var i = 0;
            return function(key, value) {
                if (i !== 0 && typeof(censor) === 'object' && typeof(value) == 'object' && censor == value)
                    return '[Circular]';                   

                ++i; // so we know we aren't using the original object anymore

                return value;
            }
        })(censor);
    }

    function doAjax() {

        $.each(resourceVacation, function(index) {
            var tmpDate = resourceVacation[index].start;
            tmpDate.setHours(tmpDate.getHours() - tmpDate.getTimezoneOffset() / 60);
            resourceVacation[index].start=tmpDate;

        });
//        var arrays = [
//            {"id":111,"title":"event1","start":"2012-04-15T22:00:00.000Z","url":"http://yahoo.com/"}
//        ];
//        var objects = {"id":111,"title":"event2","start":"2012-04-16T22:00:00.000Z","url":"http://yahoo2.com/"};
//
//        arrays.push(objects);
        var test = JSON.stringify(resourceVacation, censor(resourceVacation));
        var x = test;
        $.ajax(
        {
            url:"[@spring.url '/vacation/saveResourceVacation'/]",
            type: "POST",
            data :x ,
            dataType: "json",
            contentType: "application/json"
        });
    }

    $(document).ready(function() {

        var date = new Date();
        var d = date.getDate();
        var m = date.getMonth();
        var y = date.getFullYear();
        $.getJSON('[@spring.url '/vacation/loadResourceVacation'/]', function (data) {
            var calendar = $('#calendar').fullCalendar({
                header: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'month,agendaWeek,agendaDay'
                },
                selectable: true,
                selectHelper: true,
                select:
                        function(start, end, allDay) {
                            var title = prompt('Event Title:');

                            if (title) {
                                start.setHours(start.getHours() - start.getTimezoneOffset() / 60);
//                                var dat=$.fullCalendar.formatDate( start, "yyyy/MM/dd")

                                var newVacation= {id:133,title:'title',start:start,url: 'title'};
                                resourceVacation.push(newVacation);
                                calendar.fullCalendar('renderEvent',
                                {
                                    title: title,
                                    start: start,
                                    end: end,
                                    allDay: allDay
                                },
                                        true // make the event "stick"
                                        );
                            }
                            calendar.fullCalendar('unselect');
                        },

                editable: true,
                events:data
            });
            resourceVacation = data;
        });
    });

</script> 
```

控制器：

```
 @RequestMapping(value = "/vacation/loadResourceVacation", method = RequestMethod.GET)
        public
        @ResponseBody
        String loadResourceVacation(HttpServletResponse response) throws Exception {

            //Here I build my vacationFormBean
            List<VacationFormBean> vacationFormBeanList= buildVacationFormBean();
            // Convert to JSON string.
            String json = new Gson().toJson(vacationFormBeanList);

            // Write JSON string.
            response.setContentType("application/json");
            response.setCharacterEncoding("UTF-8");       

        return json;
    }

    @RequestMapping(value = "/vacation/saveResourceVacation", method = RequestMethod.POST)
    public
    @ResponseBody
    void saveResourceVacation(@RequestBody String jsonString, Principal principal) throws Exception {
        List<String> resourceVacations = extractVacationDatesFromJsonObject(jsonString);

    } 
```

VacationFormBean：

```
public class VacationFormBean {
    int id; // (With Setter & Getter)
    String title; // (With Setter & Getter)
    String start;  // (With Setter & Getter)
    String url; // (With Setter & Getter)
} 
```

# iphone - 配置 UIImagePickerController 的帧大小

> ID：10164581
> 
> 赞同：7
> 
> 时间：2012-04-15T17:59:03.570
> 
> 标签：iphone, objective-c, ios, xcode, camera

是否可以更改 UIImagePickerController 的可显示帧大小？我想显示相机视图，但不是在整个屏幕上，而是在 100x100 的边界框中显示。

这是我的 viewDidAppear：

```
- (void) viewDidAppear:(BOOL)animated {

UIImagePickerController *picker = [[UIImagePickerController alloc] init];
picker.sourceType = UIImagePickerControllerSourceTypeCamera;
picker.showsCameraControls = NO;
picker.cameraDevice = UIImagePickerControllerCameraDeviceFront;
picker.cameraViewTransform = CGAffineTransformScale(picker.cameraViewTransform, CAMERA_TRANSFORM_X, CAMERA_TRANSFORM_Y);

[self presentModalViewController:picker animated:YES];  

[super viewDidAppear:YES];
 } 
```

我在任何地方都找不到这样做的方法……没有人使用它吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-16T08:01:05.517

我对上一篇文章中的代码进行了试验，并注释掉了最终的比例变换（（使其成为全尺寸的那个），最后我得到了一个可爱的微型相机 imagePicker 漂浮在我的屏幕中间，所以它确实有效! 我使用的确切代码，包括缩放/淡入过渡，是 -

```
UIImagePickerController *imagePickerController = [[UIImagePickerController alloc] init];

imagePickerController.delegate = self;
imagePickerController.mediaTypes = [NSArray arrayWithObjects:(NSString *)kUTTypeImage, nil];
imagePickerController.sourceType = UIImagePickerControllerSourceTypeCamera;
imagePickerController.cameraCaptureMode = UIImagePickerControllerCameraCaptureModePhoto;

UIView *controllerView = imagePickerController.view;

controllerView.alpha = 0.0;
controllerView.transform = CGAffineTransformMakeScale(0.5, 0.5);

[[[[UIApplication sharedApplication] delegate] window] addSubview:controllerView];

[UIView animateWithDuration:0.3
                  delay:0.0
                options:UIViewAnimationOptionCurveLinear
             animations:^{
                 controllerView.alpha = 1.0;
             }
             completion:nil
 ];

[imagePickerController release]; 
```

我相信您可以对其进行更多自定义，更改相机视图的大小和位置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-06T01:59:11.967

如果你想在 UIImagePickerController 的顶部显示一个覆盖，比如在我的例子中，同时在你的覆盖上的一些 UI 组件（比如顶部栏和底栏），请使用以下代码。这是基于上面 SomaMan 的回答（谢谢），主要区别是将 UIImagePickerController 的视图显示为当前控制器的子视图，而不是作为主应用程序窗口的子视图。将此代码放入 viewDidLoad() 中：

```
// Overlay view with custom camera controls and a top bar and a bottom bar
self.overlay = [[CameraOverlayView alloc] initWithFrame:self.view.bounds];
[self setOverlayViewModel];

self.imagePicker = [[UIImagePickerController alloc] init];
self.imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;
self.imagePicker.cameraCaptureMode = UIImagePickerControllerCameraCaptureModePhoto;
self.imagePicker.cameraFlashMode = UIImagePickerControllerCameraFlashModeOff;
self.imagePicker.showsCameraControls = NO;
self.imagePicker.navigationBarHidden = YES;
self.imagePicker.toolbarHidden = YES;
self.imagePicker.delegate = self;

UIView *imagePickerView = self.imagePicker.view;

if ([[UIScreen mainScreen] bounds].size.height == 568.0f) {
    // iPhone 5, 16:9 ratio, need to "zoom in" in order to fill the screen since there is extra space between top and bottom bars on a taller screen
    self.imagePicker.cameraViewTransform = CGAffineTransformScale(self.imagePicker.cameraViewTransform, 1.5, 1.5); // change 1.5 to suit your needs
}
CGRect cameraViewFrame = CGRectMake(0, self.overlay.topBarHeight, 
                                    self.view.bounds.size.width, 
                                    self.view.bounds.size.height - self.overlay.topBarHeight - self.overlay.bottomBarHeight);
imagePickerView.frame = cameraViewFrame;

// keep this order so that the overlay view is on top of the "live camera feed" view
[self.view addSubview:imagePickerView];
[self.view addSubview:self.overlay]; 
```

提示：在执行 cameraViewTransform 时，如果您希望用户最终获得与他们通过转换后的选择器视图看到的图像相同的图像，请确保在选择器为您捕获的结果照片上应用相同的转换：P

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T18:23:09.367

我有时会直接添加 ImagePicker 的视图，尽管我从未尝试过更改其最终尺寸，但它确实“放大”到屏幕中，这表明它可能以不同的尺寸显示它（代码直接从其中一个我的项目，所以可能不是所有相关的） -

```
UIImagePickerController *imagePickerController = [[UIImagePickerController alloc] init];

imagePickerController.delegate = self;
imagePickerController.mediaTypes = [NSArray arrayWithObjects:(NSString *)kUTTypeImage, nil];
imagePickerController.sourceType = UIImagePickerControllerSourceTypeCamera;
imagePickerController.cameraCaptureMode = UIImagePickerControllerCameraCaptureModePhoto;

UIView *controllerView = imagePickerController.view;

controllerView.alpha = 0.0;
controllerView.transform = CGAffineTransformMakeScale(0.5, 0.5);

[[[[UIApplication sharedApplication] delegate] window] addSubview:controllerView];

[UIView animateWithDuration:0.3
                      delay:0.0
                    options:UIViewAnimationOptionCurveLinear
                 animations:^{
                     controllerView.transform = CGAffineTransformMakeScale(1.0, 1.0);
                     controllerView.alpha = 1.0;
                 }
                 completion:nil
 ];

[imagePickerController release]; 
```

有兴趣看看你是否得到任何结果。

# android - 在图像上写文字的最佳方法？

> ID：10164590
> 
> 赞同：1
> 
> 时间：2012-04-15T17:59:35.130
> 
> 标签：android, imageview, android-canvas

我想拍一张小日历图像并在上面写上日期和月份。这将在列表视图中多次显示，因此我正在寻找最佳方法。

下面的效果很好，有没有更好的方法：

```
ImageView image = (ImageView) findViewById(R.id.imageView2);
try {
    // Load the png image into a bitmap
    Bitmap mBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.calendar_empty);
    // Have to copy the bitmap so it is mutable
    mBitmap = mBitmap.copy(Bitmap.Config.ARGB_8888, true);
    // Create a canvas from the bitmap to draw on
    Canvas canvas = new Canvas(mBitmap);
    Paint paint = new Paint();
    paint.setColor(Color.BLACK);
    paint.setTextSize(12);
    paint.setAntiAlias(true);
    canvas.drawText("Sept", 11, 26, paint);
    paint.setTextSize(18);
    canvas.drawText("29", 14, 42, paint);
    // Display the results on the screen
    image.setImageDrawable(new BitmapDrawable(this.getResources(), mBitmap));
} catch (Exception e) {
    e.printStackTrace ();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T18:04:51.187

为什么不直接使用 ImageView，并在其上放置一个 TextView 作为标题的叠加层，在启用此功能的布局容器内 - 例如，RelativeLayout 或 FrameLayout？

我有几个项目是用这种方式在图像上写标题的，这种方法没有问题。

# c - 你将如何有效地实现tail？

> ID：10164597
> 
> 赞同：17
> 
> 时间：2012-04-15T18:00:13.653
> 
> 标签：c, linux, unix, tail

在 *NIX 中实现 tail 的有效方法是什么？我想出了（写）两个简单的解决方案，都使用一种循环缓冲区将行加载到循环结构中（数组|双向链接循环列表-为了好玩）。我在busybox中看到了部分较旧的实现，据我所知，他们使用 fseek 来查找EOF，然后“向后”读取内容。那里有什么更清洁、更快的东西吗？我在面试时被问到这个问题，提问者看起来并不满意。先感谢您。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-15T18:10:58.207

我认为没有与“在向前读取数据时保留最新的 N 行”或“从末尾开始并向后直到您读取第 N 行”不同的解决方案。

关键是您将根据上下文使用一个或另一个。

当tail访问随机访问文件时，或者当数据小到可以放入内存时，“走到尽头并向后退”更好。在这种情况下，运行时间被最小化，因为您扫描了必须输出的数据（因此，它是“最佳的”）

当尾部由管道馈送或数据很大时，您的解决方案（保留 N 个最新行）会更好。在这种情况下，其他解决方案会浪费太多内存，因此不实用，并且在源比 tail 慢的情况下（很可能）扫描所有文件并不重要。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-15T18:03:11.780

从文件末尾向后读取，直到`N`读取换行符或到达文件开头。

然后打印刚刚阅读的内容。

我认为这里不需要任何花哨的数据结构。

如果您有兴趣[，这里是tail的源代码。](http://git.savannah.gnu.org/cgit/coreutils.git/tree/src/tail.c)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-06-27T05:36:26.630

首先用于`fseek`查找文件结尾，然后减去 512 并减去`fseek`该偏移量，然后从那里向前读取到结尾。计算换行符的数量，因为如果换行符太少，您将不得不使用减去的偏移量 1024 来做同样的事情**……**但在 99% 的情况下，512 就足够了。

这**（1）**避免了向前读取整个文件，**（2）**这可能比从末尾向后读取更有效的原因是向前读取通常更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-27T05:22:04.160

/`*This example implements the option n of tail command.*/`

```
#define _FILE_OFFSET_BITS 64
#include <stdio.h>
#include <stdlib.h>
#include <fcntl.h>
#include <errno.h>
#include <unistd.h>
#include <getopt.h>

#define BUFF_SIZE 4096

FILE *openFile(const char *filePath)
{
  FILE *file;
  file= fopen(filePath, "r");
  if(file == NULL)
  {
    fprintf(stderr,"Error opening file: %s\n",filePath);
    exit(errno);
  }
  return(file);
}

void printLine(FILE *file, off_t startline)
{
  int fd;
  fd= fileno(file);
  int nread;
  char buffer[BUFF_SIZE];
  lseek(fd,(startline + 1),SEEK_SET);
  while((nread= read(fd,buffer,BUFF_SIZE)) > 0)
  {
    write(STDOUT_FILENO, buffer, nread);
  }
}

void walkFile(FILE *file, long nlines)
{
  off_t fposition;
  fseek(file,0,SEEK_END);
  fposition= ftell(file);
  off_t index= fposition;
  off_t end= fposition;
  long countlines= 0;
  char cbyte;

  for(index; index >= 0; index --)
  {
    cbyte= fgetc(file);
    if (cbyte == '\n' && (end - index) > 1)
    {
      countlines ++;
      if(countlines == nlines)
      {
    break;
      }
     }
    fposition--;
    fseek(file,fposition,SEEK_SET);
  }
  printLine(file, fposition);
  fclose(file);
}

int main(int argc, char *argv[])
{
  FILE *file;
  file= openFile(argv[2]);
  walkFile(file, atol(argv[1]));
  return 0;
}

/*Note: take in mind that i not wrote code to parse input options and arguments, neither code to check if the lines number argument is really a number.*/ 
```

# tbb - 关于 TBB 线程本地存储

> ID：10164598
> 
> 赞同：2
> 
> 时间：2012-04-15T18:00:19.533
> 
> 标签：tbb, thread-local-storage

我很难理解 TBB 的特定可枚举线程。我写了这个小代码来测试 TLS

```
#include <iostream>
#include <vector>

#include "tbb/task_scheduler_init.h"
#include "tbb/enumerable_thread_specific.h"
#include "tbb/task.h"

typedef tbb::enumerable_thread_specific< std::vector<int> > TLS;

class Child: public tbb::task {
private:
  int start;
  int limit;
  TLS* local_tls;
public:
  Child( int s_, int l_, TLS* t_):start(s_),limit(l_),local_tls(t_){}
  virtual ~Child(){ 
    local_tls=0;
  }
  tbb::task* execute(){
   TLS::reference local_vector = local_tls->local();
   for(int i=start; i<limit;++i){
   local_vector.push_back( i );
   }
  }
  return 0;
 }
};

class Cont: public tbb::task {
private:
  TLS global_tls;
public:
  Cont(){}
  virtual ~Cont(){}
  TLS* GetTls(void) { return &global_tls; }
  tbb::task* execute(){
    TLS::const_iterator it( global_tls.begin() );
    const TLS::const_iterator end( global_tls.end() );
    std::cout << "ETS.SIZE: " << global_tls.size() << std::endl;
    while( it != end ) {
      std::cout << "*ITSIZE: " << (*it).size() << "\n";
      for( unsigned int j(0); j < (*it).size(); ++j ) {
        std::cout << (*it)[j] << " " << std::endl;
      }  
      ++it;
    }
    return 0;
  }
};

class Root: public tbb::task {
private:
public:
  Root(){}
  virtual ~Root(){}
  tbb::task* execute(){
    tbb::task_list l;
    Cont& c = *new ( allocate_continuation() ) Cont();
    l.push_back( (*new ( c.allocate_child() ) Child(0,10,c.GetTls()) ) );
    l.push_back( (*new ( c.allocate_child() ) Child(11,21,c.GetTls()) ) );
    c.set_ref_count( 2 );
    c.spawn( l );
    return 0;
  }
};

int main(void) {
  Root& r = *new(tbb::task::allocate_root()) Root( );
  tbb::task::spawn_root_and_wait( r ); 
  return 0;
} 
```

但输出很尴尬。有时是：

```
ETS.SIZE: 2
*ITSIZE: 10
0 1 2 3 4 5 6 7 8 9 
*ITSIZE: 10
11 12 13 14 15 16 17 18 19 20 
```

有时是：

```
ETS.SIZE: 1
*ITSIZE: 20
0 1 2 3 4 5 6 7 8 9 11 12 13 14 15 16 17 18 19 20 
```

为什么会发生这种变化？此外，在 TBB 论坛中，我读到有时 TLS 不包含所有预期值，但其原因显然是关于父任务和子任务的关系。不过也不是太明白。

有什么帮助吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T10:16:11.223

您看到的“尴尬”输出差异与`enumerable_thread_specific`. 这只是由于`Child`任务由两个不同的线程（在案例 1 中）或同一个线程（在案例 2 中）执行。

# model-view-controller - 如何获取包含方案的 AppHarbor 应用程序 URL？

> ID：10164602
> 
> 赞同：0
> 
> 时间：2012-04-15T18:00:36.973
> 
> 标签：model-view-controller, appharbor

我正在尝试根据以下文章检索应用程序的 URL：http: [//support.appharbor.com/kb/getting-started/workaround-for-generating-absolute-urls-without-port-number](http://support.appharbor.com/kb/getting-started/workaround-for-generating-absolute-urls-without-port-number)

但是...该示例使用 HTTP 作为方案。为了尝试找到 HTTPS，我尝试使用 Request.Url.Scheme，它总是返回“http”。如何构建包括方案在内的应用程序的真实 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T22:13:02.620

AppHarbor 应用程序服务器始终看到 http，因为 SSL 在负载平衡器处终止。您可以使用`X-Forwarded-Proto`标头检查 SSL。[详细信息](http://support.appharbor.com/kb/tips-and-tricks/ssl-and-certificates)和示例[RequireHttpsAttribute](https://gist.github.com/915869)。或者，您可以使用[此模块](https://gist.github.com/2025391)来隐藏 AppHarbor 负载均衡器的复杂性。

# memory - 硬件保留内存 - Windows 7 32 位（训练营）

> ID：10164604
> 
> 赞同：2
> 
> 时间：2012-04-15T18:00:46.220
> 
> 标签：memory, windows-7, hardware, bootcamp

我一直在研究这个问题大约一个星期，但正式找不到解决方案。我通过训练营在我的 MacBook Pro 2011 年初 13 英寸上安装了 Windows 7，并且在硬件储备下有 1880 MB 的 RAM。在系统信息下，它显示 4.00GB 内存可用（2.16GB 可用）。我想知道是否无论如何我可以释放或释放一些内存？

我已经阅读了很多关于进入 msconfig 并确保未勾选最大内存并且已经未勾选的建议。另外，有人提到升级到64位版本的Windows 7，但我看到其他人尝试过，没有成功。

让我知道您是否需要任何其他信息，例如来自 CPU-Z 的信息。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:18:48.400

我发现了几种可能性：

- 个人经验：尝试 64 位。虽然它可能不起作用，但绝对值得一试。32 位 Windows 限制了可用 RAM 的数量。虽然这并不能完全解释您的问题，但我很想听听结果（也建议[在这里](http://forums.macrumors.com/showthread.php?t=1230627)、[这里](http://www.qa.downappz.com/questions/mac-install-win7-via-boot-camp-only-2-of-4gb-ram-is-usable.html)和[这里](http://www.tomshardware.com/forum/page-265106_30_50.html)）。

-[不正确的内存配置](https://superuser.com/questions/56157/why-is-all-my-extra-ram-marked-as-hardware-reserved-in-windows-7)

- 尽管您说它不起作用，但它似乎仍然是解决某些人问题的有效方法（[来源](http://forums.macrumors.com/showthread.php?t=1316116)）：

`Start>msconfig in the search box>Go to the Boot tab>Untick 'maximum memory' box`

这些建议是否能解决您的问题？

# java - Proguard - 对程序类成员的未解决引用

> ID：10164606
> 
> 赞同：6
> 
> 时间：2012-04-15T18:00:51.973
> 
> 标签：java, android, proguard

我试图混淆我的 android 应用程序但是我收到以下错误：

```
[2012-04-15 19:55:51 - TmtAndroid] Proguard returned with error code 1\. See console
[2012-04-15 19:55:51 - TmtAndroid] Warning: proguard.ant.ClassPathElement: can't find referenced method 'org.apache.tools.ant.Project getProject()' in class proguard.ant.ClassPathElement
[2012-04-15 19:55:51 - TmtAndroid] Warning: proguard.ant.ClassPathElement: can't find referenced method 'boolean isReference()' in class proguard.ant.ClassPathElement
[2012-04-15 19:55:51 - TmtAndroid] Warning: proguard.ant.ClassPathElement: can't find referenced method 'java.lang.Object getCheckedRef(java.lang.Class,java.lang.String)' in class proguard.ant.ClassPathElement
[2012-04-15 19:55:51 - TmtAndroid] Warning: proguard.ant.ClassPathElement: can't find referenced method 'java.lang.String[] list()' in class proguard.ant.ClassPathElement
[2012-04-15 19:55:51 - TmtAndroid] Warning: proguard.ant.ClassPathElement: can't find referenced method 'void setLocation(java.io.File)' in class proguard.ant.ClassPathElement
[2012-04-15 19:55:51 - TmtAndroid] Warning: proguard.ant.ClassSpecificationElement: can't find referenced method 'boolean isReference()' in class proguard.ant.ClassSpecificationElement
[2012-04-15 19:55:51 - TmtAndroid] Warning: proguard.ant.ClassSpecificationElement: can't find referenced method 'java.lang.Object getCheckedRef(java.lang.Class,java.lang.String)' in class proguard.ant.ClassSpecificationElement
[2012-04-15 19:55:51 - TmtAndroid] Warning: proguard.ant.ConfigurationElement: can't find referenced method 'boolean isReference()' in class proguard.ant.ConfigurationElement
[2012-04-15 19:55:51 - TmtAndroid] Warning: proguard.ant.ConfigurationElement: can't find referenced method 'java.lang.Object getCheckedRef(java.lang.Class,java.lang.String)' in class proguard.ant.ConfigurationElement
[2012-04-15 19:55:51 - TmtAndroid] Warning: proguard.ant.ConfigurationTask: can't find referenced method 'org.apache.tools.ant.Project getProject()' in class proguard.ant.ConfigurationTask
[2012-04-15 19:55:51 - TmtAndroid] Warning: proguard.ant.FilterElement: can't find referenced method 'boolean isReference()' in class proguard.ant.FilterElement
[2012-04-15 19:55:51 - TmtAndroid] Warning: proguard.ant.FilterElement: can't find referenced method 'java.lang.Object getCheckedRef(java.lang.Class,java.lang.String)' in class proguard.ant.FilterElement
[2012-04-15 19:55:51 - TmtAndroid] Warning: proguard.ant.KeepSpecificationElement: can't find referenced method 'boolean isReference()' in class proguard.ant.KeepSpecificationElement
[2012-04-15 19:55:51 - TmtAndroid] Warning: proguard.ant.KeepSpecificationElement: can't find referenced method 'java.lang.Object getCheckedRef(java.lang.Class,java.lang.String)' in class proguard.ant.KeepSpecificationElement
[2012-04-15 19:55:51 - TmtAndroid] Warning: proguard.ant.MemberSpecificationElement: can't find referenced method 'boolean isReference()' in class proguard.ant.MemberSpecificationElement
[2012-04-15 19:55:51 - TmtAndroid] Warning: proguard.ant.MemberSpecificationElement: can't find referenced method 'java.lang.Object getCheckedRef(java.lang.Class,java.lang.String)' in class proguard.ant.MemberSpecificationElement
[2012-04-15 19:55:51 - TmtAndroid] Warning: proguard.ant.ProGuardTask: can't find referenced method 'org.apache.tools.ant.Project getProject()' in class proguard.ant.ProGuardTask
[2012-04-15 19:55:51 - TmtAndroid]       You should check if you need to specify additional program jars.
[2012-04-15 19:55:51 - TmtAndroid] Warning: there were 17 unresolved references to program class members.
[2012-04-15 19:55:51 - TmtAndroid]          Your input classes appear to be inconsistent.
[2012-04-15 19:55:51 - TmtAndroid]          You may need to recompile them and try again.
[2012-04-15 19:55:51 - TmtAndroid]          Alternatively, you may have to specify the option 
[2012-04-15 19:55:51 - TmtAndroid]          '-dontskipnonpubliclibraryclassmembers'.
[2012-04-15 19:55:51 - TmtAndroid] java.io.IOException: Please correct the above warnings first.
[2012-04-15 19:55:51 - TmtAndroid]  at proguard.Initializer.execute(Initializer.java:321)
[2012-04-15 19:55:51 - TmtAndroid]  at proguard.ProGuard.initialize(ProGuard.java:211)
[2012-04-15 19:55:51 - TmtAndroid]  at proguard.ProGuard.execute(ProGuard.java:86)
[2012-04-15 19:55:51 - TmtAndroid]  at proguard.ProGuard.main(ProGuard.java:492) 
```

当我添加

```
-dontwarn proguard.ant.** 
```

到proguard.cfg，apk被导出，但在手机上安装后，它崩溃了，所以这不是这种情况下的解决方案......

我应该怎么做才能解决这些警告？这是我第一次与proguard互动...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T20:25:06.487

我在使用[Proguard](http://proguard.sourceforge.net/)时的一般方法是从一个非常小的`.pro`文件开始，所有内容都打开，然后开始关闭各种混淆/优化/收缩选项，直到生成的 jar 正确运行。

所以我建议浏览[Proguard 示例页面](http://proguard.sourceforge.net/index.html#manual/examples.html)`-keep`并尝试`dontXXX`他们建议的各种选项。

此外，您的应用程序（或 Android 框架）是否使用*本机方法*、*序列化*、*反射*、*回调方法*、*注释*等...？示例文档提供了您需要传递给[Proguard](http://proguard.sourceforge.net/)的设置，以确保 Proguard 的字节码操作不会破坏这些功能。

例如，我对 Android 平台不是很熟悉，但我相信它使用某种类型的 XML 框架，告诉它如何加载/使用您定义的 Java 类。如果是这种情况，并且您让 Proguard 混淆了类或包名称，那么 XML 框架将无法再找到这些类。

# python - 如何在 Python 中有效地计算超大数据集的基数？

> ID：10164608
> 
> 赞同：16
> 
> 时间：2012-04-15T18:01:13.740
> 
> 标签：python, optimization, memcached, set, cardinality

我一直在处理一些非常大的数据集，通常是数十亿个元素，它们都维护在[memcached](http://memcached.org/)云中并定期转储到文件中，对于我的一项任务，我正在尝试计算基数这一套。

在某些情况下，每个项目都包含一个 IP 和一些其他属性来识别一个人，并以 base64 编码，项目大小为 20 字节。通过删除某些字段来减小项目的大小是不可能的。

这是将我的数据集模拟为内存版本的东西（感谢[this post](https://stackoverflow.com/q/785058/1332690) for string generation）：

```
import base64, os

dataset_size = 10000000000 # that's 10 billion, be careful if you run it !
big_dataset = [base64.b64encode(os.urandom(10)) for i in range(dataset_size)] 
```

我的第一种方法是使用这样的哈希集：

```
uniques = set(big_dataset)
print "Cardinality: %d" % len(uniques) 
```

虽然这在理论上适用于小型数据集，但您可以猜到有一个小问题：

*   我不能对我的数据的唯一性做出任何假设。我可以拥有 50% 的数据集是唯一的，或者我也可以拥有 100%。这是以固定的时间间隔动态生成的，并且取决于很多因素（例如一天中的时间）
*   数据集大小为 100 亿。以 base 64 编码的每个项目是 20 个字节，乘以 100 亿是平均几百个千兆字节。不幸的是，我无法访问具有那么多 RAM 的机器！

我已经完成了我的功课，最多只能找到一些研究论文或一些不起眼的图书馆，但这样做的部分目标是了解什么方法有效以及为什么有效。

所以我打电话给你们 Python 用户，你们知道有什么算法可以帮助我有效地估计基数吗？复杂性是指我不太关心运行时间复杂性，但我更关注空间复杂性。如果它极大地提高了性能，我不介意牺牲一点准确性（所以我不一定需要知道唯一性的确切数量，即使这是理想的，但可能不是一种可行的方法）。我会说最多 5% 是可以接受的。我正在为这个项目寻找专门的 Python 内容。

感谢您的任何帮助，您可以提供 ！

正如一些人所指出的，我可以使用 Hadoop/MR，但是对于这个特定的项目，我们不想走 MR 方式，而是想探索算法在单台机器上有效地做到这一点，因为这可以应用于其他几个不同的项目。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-15T20:03:04.917

我建议使用 Hash Sketches，即（Super）Log Log 草图或 Hyper Log Sketches。

您可以检查并可能使用和改进我制作的简单 python 实现： [https ://github.com/goncalvesnelson/Log-Log-Sketch](https://github.com/goncalvesnelson/Log-Log-Sketch)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T20:12:47.110

我建议您尝试使用布隆过滤器。即使有如此大量的数据，您也可以在适度的系统要求下实现极低的错误率。鉴于您将使用（大致）最佳 k=ln(2)*(bloom filter size in bits)/(10billions)，您可以计算您的bloom filter size in bits as -((10billions)*ln(desired false positive率))/ln(2)^2。

例如，使用少于 2gigs 的内存，您可以获得 0.1% 的错误率。所有这一切的一个非常快速且极其简单的实现是[http://mike.axiak.net/python-bloom-filter/docs/html/](http://mike.axiak.net/python-bloom-filter/docs/html/)

# php - 使用 Jquery 的随机配色方案

> ID：10164609
> 
> 赞同：1
> 
> 时间：2012-04-15T18:01:18.483
> 
> 标签：php, jquery

我正在创建一个网站，该网站需要使用主基色和多个关联的重音模拟颜色随机设置不同元素的样式。例如，用户获得一个色轮来选择基色，然后基于该输入，jquery 将应用基于该输入颜色的配色方案。用jquery这可能吗？如果需要，我很乐意用 php 来实现它。

如果您需要更好地说明我正在尝试实现的图像，请参阅[this](http://colorschemedesigner.com/#5561Tw0w0w0w0)。自动创建配色方案的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T19:03:22.990

我认为您基本上是在询问有关如何构建互补色的“API”或较低级别的描述，就像那些配色方案网站所说明的那样。对于您的应用程序，首先我会在这里（例如）查看操作 RGB 十六进制字符串： [http](http://www.phpied.com/rgb-color-parser-in-javascript/) ://www.phpied.com/rgb-color-parser-in-javascript/ 。然后在这里计算补色背后的理论/数学： [http](http://www.webmaster-forums.net/web-design-and-graphics/color-theory-calculating-complementary-colors) ://www.webmaster-forums.net/web-design-and-graphics/color-theory-calculating-complementary-colors 。

# ios - 在 iOS 应用中使用 AdMob

> ID：10164610
> 
> 赞同：0
> 
> 时间：2012-04-15T18:01:29.590
> 
> 标签：ios, xcode, ios5, admob

我正在尝试在我的 iOS 应用程序中使用 adMob，但我无法构建项目，因为我收到了您可以在屏幕截图中看到的错误。

![构建错误](../Images/bf9ef42c6a84b833662291d4a77aff58.png) 它似乎是由 admob SDK 中带有“.a”扩展名的文件引起的。我相信它是一个图书馆或类似的东西。我该如何解决？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T18:47:23.030

您需要在项目中添加一些框架。

1.  在 Xcode 中点击项目
2.  点击目标
3.  单击构建阶段
4.  单击将二进制文件与库链接
5.  点击加号
6.  将 SystemConfiguration.framework、MessageUI.framework、AudioToolbox.framework 添加到您的项目中

# windows-phone-7 - 如何查看屏幕的其余部分并添加更多文本

> ID：10164611
> 
> 赞同：1
> 
> 时间：2012-04-15T18:01:35.393
> 
> 标签：windows-phone-7, xaml, scrollviewer

告诉我如何在我的 xaml 中看到屏幕的其余部分？我添加了高度为 2000 像素的文本块，如何查看其余部分？而且，发生了什么，当我在内容部分添加滚动查看器并且我的文本块自动转到左上角时？而且，在我的 xaml 中，我看到了文本居中的位置，它看起来不错，但在模拟器中，文本是单行的。如何修复它？

```
<phone:PhoneApplicationPage 
    x:Class="Excercises.Weider_s_six"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"
    SupportedOrientations="Portrait" Orientation="Portrait"
    mc:Ignorable="d" d:DesignHeight="768" d:DesignWidth="480"
    shell:SystemTray.IsVisible="True">

    <!--LayoutRoot is the root grid where all page content is placed-->
    <Grid x:Name="LayoutRoot" Background="#FF1FB0DB">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!--TitlePanel contains the name of the application and page title-->
        <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,28">
            <TextBlock x:Name="PageTitle" Text="Weider's six" Margin="9,-7,0,0" Style="{StaticResource PhoneTextTitle1Style}" FontSize="64" />
        </StackPanel>

        <!--ContentPanel - place additional content here-->
        <ScrollViewer>
        <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
                <TextBlock Height="2000" HorizontalAlignment="Left" Margin="0,6,0,0" Name="TextBlock1" Text="Weider 6 pack Training is a perfect exercise for flat stomach.
    This easy training programme has many advantages.
    It's perfect for beginners and for experts – exercises are easy and begin with the basic level, so every beginner can use them but they get more complicated pretty fast so advanced sportsmen can also be interested in them.
    It helps not only carve your muscles but also burn fat – during the exercise you not only use your abdominal rectus but you also move your legs and arms. It is also because W6 puts pressure on the number of repetitions. It carves your muscles but also burns fat. You can train W6 for about 40 minutes without taking any breaks – you use up all glycogen in blood and start burning the fat.
    It is easy – it is a really easy training set which you can train almost anywhere. All you need is flat ground.
    It gives excellent results – if you want to have a flat stomach W6 is designed just for you. You can see the first effects after just a week and after a whole series it is really impressive.
    How to do Weider 6

    Starting Position

    Lay flat on the ground, hands along the body.
    1 – exercise 1

    Lift your right leg and bend your knee to right angle angle
    Lift your upper torso to contract abdominal muscles and hold the lifted knee with your hands.
    Hold still for 3 seconds.
    Return to the starting position.
    Repeat the exercise with the other leg
    2 – exercise 2

    Lift both legs and bend your knees to right angle
    Lift your upper torso to contract abdominal muscles and hold both knees
    Hold still for 3 seconds

    Return to the starting position" VerticalAlignment="Top" Width="450" />
        </Grid>
        </ScrollViewer>
    </Grid>

    <!--Sample code showing usage of ApplicationBar-->
    <!--<phone:PhoneApplicationPage.ApplicationBar>
        <shell:ApplicationBar IsVisible="True" IsMenuEnabled="True">
            <shell:ApplicationBarIconButton IconUri="/Images/appbar_button1.png" Text="Button 1"/>
            <shell:ApplicationBarIconButton IconUri="/Images/appbar_button2.png" Text="Button 2"/>
            <shell:ApplicationBar.MenuItems>
                <shell:ApplicationBarMenuItem Text="MenuItem 1"/>
                <shell:ApplicationBarMenuItem Text="MenuItem 2"/>
            </shell:ApplicationBar.MenuItems>
        </shell:ApplicationBar>
    </phone:PhoneApplicationPage.ApplicationBar>-->

</phone:PhoneApplicationPage> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T18:15:55.587

**确保将 ScrollViewer*放在*ContentPanel 的网格中，而不是在它周围。**

*编辑：这里是您需要更改代码的地方*

```
 <!--ContentPanel - place additional content here-->
    <ScrollViewer>
    <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0"> 
```

您的代码应该是：

```
 <!--ContentPanel - place additional content here-->
    <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
    <ScrollViewer> 
```

**下面的示例显示了它应该如何工作**

您是否可能将滚动查看器放在错误的网格中？我刚试过这个，它给了我一个滚动的文本块。

有几件事要确保。

*   您的 ScrollViewer 应该位于通常命名为“ContentPanel”的网格中。
*   您将需要指定它应该如何处理溢出文本。这是通过`TextWrapping`属性完成的。

```
<phone:PhoneApplicationPage 
    x:Class="StackoWPF.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d" d:DesignWidth="480" d:DesignHeight="768"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"
    SupportedOrientations="Portrait" Orientation="Portrait"
    shell:SystemTray.IsVisible="True">

    <!--LayoutRoot is the root grid where all page content is placed-->
    <Grid x:Name="LayoutRoot" Background="Transparent">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!--TitlePanel contains the name of the application and page title-->
        <StackPanel x:Name="TitlePanel" Grid.Row="0" Margin="12,17,0,28">
            <TextBlock x:Name="ApplicationTitle" Text="MY APPLICATION" Style="{StaticResource PhoneTextNormalStyle}"/>
            <TextBlock x:Name="PageTitle" Text="page name" Margin="9,-7,0,0" Style="{StaticResource PhoneTextTitle1Style}"/>
        </StackPanel>

        <!--ContentPanel - place additional content here-->
        <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
            <ScrollViewer>
                <TextBlock Height="2000" TextWrapping="Wrap">
                    <TextBlock.Text>
                        One two three four five six seven eight nine ten eleven 
                        One two three four five six seven eight nine ten eleven 
                        One two three four five six seven eight nine ten eleven 
                        One two three four five six seven eight nine ten eleven 
                        One two three four five six seven eight nine ten eleven 
                        One two three four five six seven eight nine ten eleven 
                        One two three four five six seven eight nine ten eleven 
                        One two three four five six seven eight nine ten eleven 
                        One two three four five six seven eight nine ten eleven 
                        One two three four five six seven eight nine ten eleven 
                        One two three four five six seven eight nine ten eleven 
                        One two three four five six seven eight nine ten eleven 
                        One two three four five six seven eight nine ten eleven 
                        One two three four five six seven eight nine ten eleven 
                        One two three four five six seven eight nine ten eleven 
                        One two three four five six seven eight nine ten eleven 
                        One two three four five six seven eight nine ten eleven 
                        One two three four five six seven eight nine ten eleven 
                        One two three four five six seven eight nine ten eleven 
                        One two three four five six seven eight nine ten eleven 
                        One two three four five six seven eight nine ten eleven 
                        One two three four five six seven eight nine ten eleven 
                        One two three four five six seven eight nine ten eleven 
                        One two three four five six seven eight nine ten eleven 
                        One two three four five six seven eight nine ten eleven 
                        One two three four five six seven eight nine ten eleven 
                        One two three four five six seven eight nine ten eleven 
                    </TextBlock.Text>
                </TextBlock>
            </ScrollViewer>
        </Grid>
    </Grid>

    <!--Sample code showing usage of ApplicationBar-->
    <!--<phone:PhoneApplicationPage.ApplicationBar>
        <shell:ApplicationBar IsVisible="True" IsMenuEnabled="True">
            <shell:ApplicationBarIconButton IconUri="/Images/appbar_button1.png" Text="Button 1"/>
            <shell:ApplicationBarIconButton IconUri="/Images/appbar_button2.png" Text="Button 2"/>
            <shell:ApplicationBar.MenuItems>
                <shell:ApplicationBarMenuItem Text="MenuItem 1"/>
                <shell:ApplicationBarMenuItem Text="MenuItem 2"/>
            </shell:ApplicationBar.MenuItems>
        </shell:ApplicationBar>
    </phone:PhoneApplicationPage.ApplicationBar>-->

</phone:PhoneApplicationPage> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T06:35:48.270

Robaticus 已经回答了大部分问题。但是，如果你想在你的文本块中换行和格式化（你似乎需要），请参考[这个](https://stackoverflow.com/questions/10165439/how-to-see-the-rest-of-screen-visual-studio-phone/10222749#10222749)。

你发布了一个类似的问题，我已经回答了。

# php - PHP 脚本在 Firefox 中运行良好，但在其他浏览器中似乎无限循环

> ID：10164616
> 
> 赞同：-2
> 
> 时间：2012-04-15T18:02:45.897
> 
> 标签：php, python, firefox, google-chrome, infinite-loop

我的网站上有一个使用 jquery ajax 函数调用的 PHP 脚本。基本上，用户在我的网站上按下一个按钮，它会向这个 PHP 脚本发送一个 ajax 调用，然后使用 proc_open 在我的服务器上调用一个 python 脚本。当我在 Firefox 中测试它时，这一切都很好，但是当我在其他浏览器（chrome、safari、mobile safari）中测试它时，脚本无限循环。我还尝试直接调用 PHP 脚本（通过将 url 粘贴到浏览器中）来检查它是否在我的 jquery 中存在无限循环，并且我得到相同的结果（在 ff 中运行良好，但在所有其他浏览器中运行无限循环）。据我了解，PHP 代码在服务器端执行，然后将输出发送到客户端浏览器，所以我无法弄清楚为什么脚本只在 firefox 中运行。

这是我的php代码：

```
<?php
require('../include/constants.php');
session_start();
if(!isset($_SESSION['logged_in'])||!$_SESSION['logged_in'])
{
    header('location:../login.php');
}
$link = mysql_connect(DB_SERVER,DB_USER,DB_PASSWORD);
mysql_select_db(DB_NAME);
$q = "SELECT `cupiduser`,`cupidpass` FROM `users` WHERE `email`='".$_SESSION['email']."' LIMIT 1;";
$result = mysql_query($q);
$row = mysql_fetch_assoc($result);
$minage = $_GET['min'];
$maxage = $_GET['max'];
$descriptorspec = array(
   0 => array("pipe", "r"),  // stdin is a pipe that the child will read from
   1 => array("pipe", "w"),  // stdout is a pipe that the child will write to
   2 => array("pipe", "w") // stderr is a file to write to
);
$cmd = 'python ~/data/users/demo2.py "'.$row['cupiduser'].'" "'.$row['cupidpass'].'" "'.$minage.'" "'.$maxage.'"';
$proc = proc_open($cmd, $descriptorspec, $pipes);
if(is_resource($proc))
{
    fclose($pipes[0]);
    $count = fread($pipes[1], 512);
    fclose($pipes[1]);
    fclose($pipes[2]);
    $exit = proc_close($proc);
}
echo trim($count);
ob_end_flush();
ob_flush();
flush();
ob_start();
?> 
```

python 代码只是运行一些计算，然后在最后返回一个这样的数字：

```
print str(count) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T18:40:07.253

看起来您在发送`location`标头后忘记退出脚本。见下文。

```
<?php
require('../include/constants.php');
session_start();
if(!isset($_SESSION['logged_in'])||!$_SESSION['logged_in'])
{
    header('location:../login.php');
    die(); // Exit script
} 
```

***注意：**这可能是也可能不是循环的根本原因，但这**是****必须**在您的代码中解决的问题。*

## 为什么我需要手动退出我的脚本？

该`header()`调用*仅*向浏览器发送一小段文本。但是，PHP 不知道`header('location:...')`和`header('foo:...')`...之间的区别，它只知道发送给`header()`函数的文本需要发送给浏览器。浏览器可能会立即切断与服务器的连接，也可能不会——这完全取决于它们。因此，如果您不希望在调用之后调用*任何*代码`header('location:...')`（应该始终如此，因为依靠浏览器来保持连接处于活动状态是不可靠的），那么您应该调用`die()`or `exit()`（它们是相同的事情）发送`location`标头后立即。

### 例子

```
<?php
header("location: http://www.example.com/");
die(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T18:06:22.377

我敢打赌，问题出在 header() 函数下。尝试在没有这行代码的情况下运行脚本。

# node.js - 使用 Node.js 和 ExtJS 构建企业级基于网格的单页应用程序？

> ID：10164618
> 
> 赞同：4
> 
> 时间：2012-04-15T18:03:09.640
> 
> 标签：node.js, extjs, smartgwt, singlepage

虽然标题表明我想在问题中塞入尽可能多的流行语，但我实际上是认真的；）

我正在探索构建具有大量网格并且需要像桌面应用程序一样快速的企业应用程序的选项。虽然运营转型将是一个大问题（或者更确切地说是并发编辑，OT 是解决相关问题的一种可能方法），但该应用程序不太可能拥有大量并发用户（从 50 个开始，可能永远不会超过几百）。

虽然 SmartGWT 似乎解决了我们面临的许多问题，但构建应用程序的团队非常小（可能有两个开发人员和一个技术项目经理）。Node.js 似乎很有吸引力，因为两个开发人员都可以在后端和前端工作。

在这种情况下，我有几个问题：

Node.js 适合这种应用吗？听取人们的意见以及他们对 Node.js 和此类应用程序的体验会非常有趣。

有没有人将它与 ExtJS/SmartGWT 一起使用？你对这些如何与 Node 一起工作有什么经验？

我敢肯定，要找到有经验的 Node.js 开发人员是不可能的，而寻找 Java 专家则是一项相对微不足道的工作。有哪些其他语言可以轻松过渡到 Node.js 的经验？

我知道这是一个相当广泛的问题，请多多包涵。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T10:15:12.763

通常使用以下方法解决：node.js+socket.io+backbone.js

但你真的应该查一下： http: [//meteor.com/](http://meteor.com/)和[http://www.firebase.com/](http://www.firebase.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T12:55:13.847

你应该选择你已经知道的技术。

（其余的是恕我直言）

我是 Node.js 和 Java 的粉丝。但是，如果您选择 Node.js，您最好拥有一支才华横溢的团队。虽然它更容易上手，但从长远来看，它也更容易真正搞砸自己。

*   框架没有明确的赢家（Express 是最接近的）
*   移动目标。图书馆一直在变化。
*   Javascript 中的重构是一个 PITA
*   处理数据库事务相当困难（如果你需要事务）
*   很容易意外编写非常危险的代码（错过“var”，您将遇到全局变量问题）。
*   对于所有回调，通过代码进行跟踪/调试可能相当困难。
*   阅读其他人的代码（为什么优秀的团队很重要）

仅仅因为客户端代码恰好具有与前端相同的语法并没有像您想象的那样帮助您。事实上，当我使用 node.js 时，我经常会遇到烦人的认知失调，因为我对可用的（库）或我正在查看的客户端或服务器代码感到困惑。

Java 在服务器端有一些巨大的优势。

*   既定选择：Spring MVC 或 JAX-RS
*   重构很容易
*   由于语言、静态类型和交叉引用 IDE 的一致性，阅读 Java 代码很容易。

您对寻找 Java 开发人员而不是 Javascript 开发人员的担忧正变得越来越少。除了有才华的人是/应该是语言不可知论者。

至于 EXTJS 或 GWT，我都不会使用。Backbone + JQuery + Twitter bootstrap 就足够了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-07T09:40:23.353

我目前正在使用与您的问题*完全相同的设置。*我正在使用 Sencha 的 Ext4 和 nodejs 构建具有大量网格的大型单页应用程序。我们在大部分 UI 工作中使用 sencha 架构师，我们的数据库使用 PostgreSQL。这种设置有许多优点和缺点。

好处：

*   没有html！这是所有人最大的优势。HTML 很烦人。如果你只使用 ext 组件，你很少需要接触 html。我们要做的最多的就是稍微修改一下css。言语无法恰当地描述这有多棒。我们成功地消除了编写冗长、不一致的 xml 派生的需要。
*   它使我们中的许多人成为更好的 javascript 程序员。这很重要，原因之一无论您做什么，**都无法摆脱 javascript ，如果您正在构建任何类型的 Web 应用程序，您将不得不编写大量的 javascript。**你不妨拥抱它，而不是试图掩饰它。通过隐藏或掩饰它，您只会使问题更加复杂。如果您学会编写更好、更高效的 javascript，最终只会让事情变得更好。
*   数据库库自动输出为json！多么酷啊？无论如何，它都会变成json并通过rest api读取。为什么不让它自动给你你要使用的东西？这来自 Postgres。Postgres 本身几乎不支持 json，这会自动为您完成。
*   该项目的全部内容仅用两种语言 pl/pgsql 和 javascript 编写。我们目前正在考虑用 pl/v8（v8 到 postgresql 的端口）替换 pl/pgsql，我几乎可以在不阅读文档的情况下进行编程。这有多棒？

缺点：

*   不过，Nodejs 并不全是有趣的游戏。也许只有我一个人，但是在我能够基本使用它之前，我需要很长时间才能通读一个 npm 模块。
*   你必须真正掌握 javascript 才能使用 Nodejs。说真的，Nodejs 不适合初学者。我并不是说初学者应该远离它，我只是说当你学会如何在其中做任何有用的事情时，你将不再是初学者。如果您打算编写任何有用的东西，请准备好深入学习 javascript。
*   Sencha 并不是完全免费的。显然这取决于你用它做什么，但它是我们唯一需要付费的软件。
*   发展并不像看起来那么快。为表格编写完整的 CRUD、显示网格、刷新网格添加按钮等仍然非常耗时。基本上，拥有非常好的 UI 组件实际上让我们放慢了速度。现在我们必须拥有面板和模式窗口以及真正的窗口框架所拥有的所有东西。在使用煎茶之前，事情要简单得多。一切功能有限，因此编程速度更快。显然，这样做会更好看，但谁能说我们真的需要所有这些东西呢？

就性能而言，它已经足够快了。我无法真正给出比较，但目前还没有性能问题。

# python - python和excel之间的python com

> ID：10164621
> 
> 赞同：2
> 
> 时间：2012-04-15T18:03:16.897
> 
> 标签：python, excel, com

我正在尝试学习一些 python，我希望 python 使用 win32 模块与 excel 交互。我在 wiki [here](http://www.pha.com.au/kb/index.php/Python_COM_Examples)上在线找到了一个基本示例。

但是它不会起作用。这是我得到的错误。

```
Traceback (most recent call last):
  File "C:/Users/Greg/Desktop/python programming/excel2.py", line 8, in <module>
    sheet.Range("A2").Value = str(Application.SIFilter(None, c.siObjectFilter))
NameError: name 'Application' is not defined 
```

我的问题是那条线到底是做什么的，为什么我会出错？

**sheet.Range("A2").Value = str(Application.SIFilter(None, c.siObjectFilter))**

```
import win32com.client
from win32com.client import constants as c

excel = win32com.client.Dispatch("Excel.Application")
book = excel.Workbooks.Add()
sheet = book.Worksheets(1)
sheet.Range("A1").Value = "Hello World!"
sheet.Range("A2").Value = str(Application.SIFilter(None, c.siObjectFilter))
book.SaveAs("c:\simple_example.xls")

sheet = None
book = None
excel.Quit()
excel = None 
```

谢谢对不起，如果我是超级菜鸟......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T18:43:31.693

您链接到的代码看起来像是直接从[这个博客](http://www.softimageblog.com/archives/11)中提取的。从它的声音来看，您并没有尝试与[Softimage](http://usa.autodesk.com/adsk/servlet/pc/index?id=13571168&siteID=123112)集成。你会想把那条线去掉。

此外，如果您使用 Excel 2007 或更高版本，您希望写入`xlsx`文件，因为这`Excel.Application`就是将为您创建的内容。

这是使用这些更改修改的相同示例代码。

```
import win32com.client

excel = win32com.client.Dispatch("Excel.Application")
book = excel.Workbooks.Add()
sheet = book.Worksheets(1)
sheet.Range("A1").Value = "Hello World!"
book.SaveAs("c:\simple_example.xlsx") # or .xls depending on version

sheet = None
book = None
excel.Quit()
excel = None 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T18:44:31.847

在这一行：

```
sheet.Range("A2").Value = str(Application.SIFilter(None, c.siObjectFilter)) 
```

你正试图变成`Application.SIFilter(None, c.siObjectFilter)`一个字符串。您没有定义名为 的对象`Application`。我没有运行代码，但我认为如果您编写`excel.SIFilter(None, c.siObjectFilter)`. 如果你只是想学习，写点别的，你会得到一个excel文件。

# java - 为什么这个错误：找不到类'oauth.signpost.http.HttpParameters

> ID：10164622
> 
> 赞同：0
> 
> 时间：2012-04-15T18:03:19.713
> 
> 标签：java, android, oauth-2.0, signpost

过去一天我一直在努力为我的 android 应用程序实现 OAuth。我遇到了一个又一个问题。我只想签署一个请求，将其发送到 Web 服务并得到响应（我相信这是两条腿的方法）。

我已经下载了路标：

-signpost-core-1.2.1.2

-signpost-commonshttp4-1.2.1.2

我已将 jar 添加到我的库构建路径中。

**是否有特定的地方我需要放置这些 jar 文件才能使它们工作？**

我遇到最大麻烦的部分是生成签名并最终签署请求。HttpParemeters 不断出现错误。

**有没有办法让我以编程方式生成 baseString ？**

有人可以指导我使用一个有效的两条腿 Oauth android 特定示例吗？

我的代码如下：

```
public void excecuteSigning(String targetURL){
        String SOAP_ACTION = "http://amebatv.com/api/authDevice";
        System.setProperty("http.keepAlive", "false");      
        HttpURLConnection _request = null;  
        DefaultHttpClient httpclient = null;

    try{ 

        CONSUMER_SECRET  = app_pref.getString("consumerSecret", "");
        CONSUMER_KEY = app_pref.getString("consumerKey", "");   
        String oaut_token = app_pref.getString("accessToken", "");
        String tokenSecret = app_pref.getString("tokenSecret", "");
        String deviceId = deviceInfo.getSerial();

        CommonsHttpOAuthConsumer  consumer = new CommonsHttpOAuthConsumer (CONSUMER_KEY,CONSUMER_SECRET);
        consumer.setTokenWithSecret(oaut_token, tokenSecret); 

        //HttpRequest request;
        HttpParameters requestParameters = new HttpParameters();
        requestParameters.put("file", "vacation.jpg");
        requestParameters.put(OAuth.OAUTH_CONSUMER_KEY, "dpf43f3p2l4k3l03");
        requestParameters.put(OAuth.OAUTH_NONCE, "kllo9940pd9333jh");
        requestParameters.put(OAuth.OAUTH_SIGNATURE_METHOD, "HMAC-SHA1");
        requestParameters.put(OAuth.OAUTH_TIMESTAMP, "1191242096");
        requestParameters.put(OAuth.OAUTH_TOKEN, "nnch734d00sl2jdk");
        requestParameters.put(OAuth.OAUTH_VERSION, "1.0");
        requestParameters.put("size", "original");

        HttpPost request = new HttpPost(targetURL);
        SignatureBaseString baseString = new SignatureBaseString((HttpRequest) request, requestParameters);

        String base = baseString.generate();
        System.out.println(":"+base);

        System.out.println(computeHmac(base,"kd94hf93k423kf44&pfkkdhi9sl3r4s00"));

       httpclient = new DefaultHttpClient();

        ContentProducer cp = new ContentProducer() {
            public void writeTo(OutputStream outstream) throws IOException {
                Writer writer = new OutputStreamWriter(outstream, "UTF-8");
                writeXml(writer);
            }
        };

       HttpParameters params = new HttpParameters();
       HttpEntity entity = new EntityTemplate(cp);
       HttpPost request = new HttpPost(targetURL);         

       request.addHeader("Authorization",AUTH_HEADER);
       request.addHeader("Content-Type", "text/xml; charset=utf-8");
       //request.addHeader("Content-Length",""+soapXML.getBytes().length);
       request.addHeader("SOAPAction",SOAP_ACTION);
       request.setEntity(entity);

        // sign the request
        consumer.sign(request);
        // send the request
        //request.connect();
        HttpResponse response = httpclient.execute(request);

        //get response               
        //StringBuffer response = new StringBuffer();
        InputStream instream = null;    
        BufferedReader br = null;        
         try{            
             int respcode = response.getStatusLine().getStatusCode();
             Log.i("Server Response", ""+respcode);

             //get XML from InputStream
            if(respcode>= 200){ 
                instream =  response.getEntity().getContent();                  
                client.buildDoc(instream);      
            }
            else{
                Log.i("Server Response", ""+respcode);
                //instream = request.getErrorStream();
                }

        }catch(Exception e){
            Log.i("SPLASH","Unable to create connection stream");
            e.printStackTrace();
        }
         finally {      
          if(instream != null) {
            Log.i("SPLASH","Disconnecting stream");
            instream.close();
          }
         }
             */
    }
    catch(Exception e){
        Log.i("SPLASH","Unable to create connection");
        e.printStackTrace();
    }finally {      
          if(httpclient != null) {
            Log.i("SPLASH","Disconnecting");
            httpclient.getConnectionManager().shutdown();
          }
    }
}

/*
 * Method:computeHmac()
 * @params: String, String
 * return: String 
 */
public String computeHmac(String baseString, String key)
                                throws NoSuchAlgorithmException, 
                                InvalidKeyException, 
                                IllegalStateException, 
                                UnsupportedEncodingException
    {

        Mac mac = Mac.getInstance("HmacSHA1");
        SecretKeySpec secret = new SecretKeySpec(key.getBytes(), mac.getAlgorithm());
        mac.init(secret);
        byte[] digest = mac.doFinal(baseString.getBytes());
        return Base64.encodeToString(digest,Base64.URL_SAFE);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T19:05:17.200

我从来没有使用过路标，所以我无法帮助你。我只能分享一些我为做 oauth dance 而编写的代码。我使用 scribe，它适用于 1.0 和 2.0 oauth 规范。我的 web 服务需要通过 webbrowser 进行身份验证，使用 webview 可以正常工作。下面的代码可能无法编译，但它来自一个工作（但仍在开发中）的应用程序。由于我仍在学习android，欢迎所有评论和更正。

整个过程从我用于与 web 服务通信的活动开始，它只包含最初隐藏的 webview。Init 方法是一切开始的地方：

```
 import java.net.HttpURLConnection;
    import java.net.MalformedURLException;
    import java.net.URL;

    import org.scribe.builder.ServiceBuilder;
    import org.scribe.builder.api.DefaultApi10a;
    import org.scribe.model.OAuthRequest;
    import org.scribe.model.Response;
    import org.scribe.model.Token;
    import org.scribe.model.Verb;
    import org.scribe.model.Verifier;
    import org.scribe.oauth.OAuthService;

    import android.app.Activity;
    import android.content.Intent;
    import android.net.Uri;
    import android.os.AsyncTask;
    import android.os.Bundle;
    import android.os.Handler;
    import android.os.Message;
    import android.util.Log;
    import android.view.View;
    import android.webkit.WebView;
    import android.webkit.WebViewClient;

    public class FCEHttpHelper {
        public static final String LOG_TAG = FCEHttpHelper.class.getSimpleName(); 

      //api_key/oauth_key
      //string that is given to you by webservice provider to uniquely identify your app
        final static String APIKEY = "xxxxxx"; 

      //oauth_secret
      //also given to you by service provider
        final static String APISECRET = "yyyyyyy";

      //callback sent to webview after authorization
      //some services allow you to set it up manually, ie. Quizlet
        final static String CALLBACK = "oauth://flashcardexchange";

      //scribe classes
        Token token;
        OAuthService serviceBuilder;

        static class GetUrl extends AsyncTask<String, Integer, String> {
            public Token t;
            public OAuthService serviceBuilder;
            public Activity act;
            public Handler handler;

            protected String doInBackground(String... urls) {           
                String resp = "";

                if (t != null) {
                    OAuthRequest req = new OAuthRequest(Verb.GET, urls[0]);
                    serviceBuilder.signRequest(t, req);
                    Response response = req.send();
                    resp = response.getBody();
                }
                else {
                    URL url = null;
                    try {
                        url = new URL(urls[0]);
                    } catch (MalformedURLException e) {
                        Log.d(LOG_TAG, e.getMessage());
                    }

                    HttpURLConnection urlConnect = null;
                    try {
                        urlConnect = (HttpURLConnection) url.openConnection();
                        resp = StringUtils.convertStreamToString(urlConnect
                                .getInputStream());

                    } catch (Exception e) {
                        Log.d("RESP", "URL ex", e);
                    } finally {
                        if (urlConnect != null)
                            urlConnect.disconnect();
                    }
                }
                return resp;
            }

            protected void onProgressUpdate(Integer... progress) {
            }

            protected void onPostExecute(String result) {
                //Log.i(LOG_TAG, result);
                Intent data = new Intent();
                Bundle extras = new Bundle();
                extras.putString("RESULT", result);
                data.putExtras(extras);
                act.setResult(Activity.RESULT_OK, data);
                act.finish();
            }
        }

        @Override
        public void Destroy() {
        }

        @Override
        public void Init(final Activity act, final WebView webView, boolean oauthRequired, final Handler handler) {
            Intent intent = act.getIntent();
            final String surl = intent.getStringExtra(INTENT_URL);

            if ( !oauthRequired ) {
                GetUrl gurl = new GetUrl();
                gurl.t = null;
                gurl.serviceBuilder = null;
                gurl.act = act;
                gurl.handler = handler;
                gurl.execute(surl);         
                return;
            }

            // get saved token from database, if it does not exists then web authentication is required

            // set up service and get request token as seen on scribe website
            // https://github.com/fernandezpablo85/scribe-java/wiki/Getting-Started
            serviceBuilder = new ServiceBuilder()
                    .provider(new DefaultApi10a() {

              /// example is for flashcardexchange oauth

                        @Override
                        public String getRequestTokenEndpoint() {
                            return "https://secure.flashcardexchange.com/oauth_request_token";
                        }

                        @Override
                        public String getAccessTokenEndpoint() {
                            return "https://secure.flashcardexchange.com/oauth_access_token";
                        }

                        @Override
                        public String getAuthorizationUrl(
                                org.scribe.model.Token requestToken) {
                            return "https://secure.flashcardexchange.com/oauth_login"
                                    + "?oauth_token=" + requestToken.getToken();
                        }
                    }).apiKey(APIKEY).apiSecret(APISECRET).callback(CALLBACK)
                    .debug()
                    .build();

            if (token == null) {

                Message msg = new Message();
                msg.what=1;
                handler.sendMessage(msg);

                webView.setVisibility(View.VISIBLE);

                final Token requestToken = serviceBuilder.getRequestToken();
                final String authURL = serviceBuilder
                        .getAuthorizationUrl(requestToken);

                // attach WebViewClient to intercept the callback url
                webView.setWebViewClient(new WebViewClient() {

                    @Override
                    public boolean shouldOverrideUrlLoading(WebView view, String url) {

                        // check for our custom callback protocol
                        // otherwise use default behavior
                        if (url.startsWith("oauth")) {
                            // authorization complete hide webview for now.
                            webView.setVisibility(View.GONE);

                            Uri uri = Uri.parse(url);
                            String verifier = uri
                                    .getQueryParameter("oauth_verifier");
                            Verifier v = new Verifier(verifier);

                            // save this token for practical use.
                            Token accessToken = serviceBuilder.getAccessToken(
                                    requestToken, v);

                            // host oauth detected from callback
                            // oauth://flashcardexchange
                            if (uri.getHost().equals("flashcardexchange")) {

                                // save accessToken to database to use it later

                                webView.setVisibility(View.GONE);

                                Message msg = new Message();
                                msg.what=2;
                                handler.sendMessage(msg);

                                GetUrl gurl = new GetUrl();
                                gurl.t = accessToken;
                                gurl.act = act;
                                gurl.handler = handler;
                                gurl.serviceBuilder = serviceBuilder;
                                gurl.execute(surl);                         
                            }

                            return true;
                        }

                        return super.shouldOverrideUrlLoading(view, url);
                    }
                });

                // send user to authentication page
                webView.loadUrl(authURL);
            } else {
                webView.setVisibility(View.GONE);

                GetUrl gurl = new GetUrl();
                gurl.t = token;
                gurl.serviceBuilder = serviceBuilder;
                gurl.act = act;
                gurl.handler = handler;
                gurl.execute(surl);
            }       
        }   
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T19:38:26.727

库需要位于 libs 文件夹中（带有 s！），然后它们会自动添加到项目的构建路径中。

# at-job - 回声“命令” | 现在 - 命令的输出在哪里

> ID：10164625
> 
> 赞同：1
> 
> 时间：2012-04-15T18:03:49.063
> 
> 标签：at-job

我有一个代码可以做到这一点。命令是一个 perl 脚本。我在任何地方都看不到它的输出。是否有我可以检查的 at 命令日志。在是一个相当普遍的词，所以我在谷歌上得到了无关紧要的点击。Man at 没有提供任何信息。感谢您的任何回答

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T18:18:06.920

您可以尝试将输出重定向到文件以便于访问：

```
echo "pwd >> /home/user/file.log" | at now 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T11:48:40.863

标准输出去用户邮件（根？）

小心指挥 | at now --- 产生：命令的输出转到“at”程序，邮件可能会显示错误

回声“命令” | at now --- 产生：“at”程序将执行“command”，stdout 将很好地显示在邮件中

# android - Android - Horizo ntalScrollView - 获得焦点视图（或它的索引）

> ID：10164629
> 
> 赞同：4
> 
> 时间：2012-04-15T18:04:09.600
> 
> 标签：android, android-layout, android-scrollview, android-scroll

我有一个`HorizontalScrollView`包含 a `LinearLayout`，它又包含几个`FrameLayout`s。每个都`FrameLayout`包含一个`Fragment`. 现在我正在尝试获取视图，即`FrameLayout`当前可见或在`HorizontalScrollView`. 一旦我获得焦点视图，我就可以在`LinearLayout`.

我尝试了以下方法，但没有任何效果：

*   Horizo​​ntalScrollView.findFocus() - 返回 null
*   LinearLayout.findFocus() - 返回 null
*   LinearLayout.getFocusedChild() - 返回 null
*   `FrameLayout`FrameLayout.hasFocus() - 为所有s返回 false

`LinearLayout`我还可以通过根据每个孩子的当前 X 位置进行计算来尝试找出哪个孩子有焦点。但是，调用`getX()`每个孩子总是返回“0.0”。

有谁知道如何使视图成为焦点（或者更好的是它在 中的索引`LinearLayout`）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T10:44:23.320

使用这个问题的答案：[android-how-to-check-if-a-view-inside-of-scrollview-is-visible](https://stackoverflow.com/questions/4628800/android-how-to-check-if-a-view-inside-of-scrollview-is-visible)我想出了以下解决方案：

```
Rect scrollBounds = new Rect();
MyHorizontalScrollView.getDrawingRect(scrollBounds);
Rect childBounds = new Rect();      
for (int i = 0; i < MyLinearLayout.getChildCount(); i++) {
    MyLinearLayout.getChildAt(i).getHitRect(childBounds);
    if(scrollBounds.contains(childBounds)) {
        IndexOfVisibleChild = i;
        return;
    }
} 
```

# windows-8 - 使用win8模拟器在Win7上开发Win8应用？

> ID：10164631
> 
> 赞同：2
> 
> 时间：2012-04-15T18:04:30.027
> 
> 标签：windows-8, microsoft-metro, simulator

我在我的 win7 机器上安装了 VS 11 Ultimate，但我没有 Metro 风格的模板。我只能在win8机器上吗？

我想为win8开发Metro应用程序，有什么方法可以使用win8模拟器（就像你有android一样，所以你不需要设备，你可以使用模拟器进行开发）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T20:46:21.190

没有这样的选择。您需要使用 Win8 开发 Metro 应用程序。如有必要，您可以在虚拟机中执行此操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T20:51:05.957

尝试使用 Scott Hanselman[在此处](http://www.hanselman.com/blog/HowToGuideToInstallingAndBootingWindows8ConsumerPreviewOffAVHDVirtualHardDisk.aspx)推荐的 VHD ，这样您就可以直接在硬件上运行它，而不会丢失 Windows 7 安装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T17:08:57.333

您不能在 Windows 7 机器上开发针对 Windows 8 新功能的应用程序。VS 2012 在 Windows 7 中运行良好，但适用于除 Metro 风格之外的所有应用类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-18T23:44:13.360

无论您想如何运行它们，您一开始都无法开发 Metro 应用程序，因为您的 Win7 机器上没有可用于编译的 WinRT API。Microsoft 没有计划在未来支持该选项。

作为参考，Win8 模拟器只是与本地计算机的自定义远程桌面连接，因此无论如何它都没有帮助。

# ios - NSManagedObject NSNumber 属性将布尔值转换为整数？

> ID：10164635
> 
> 赞同：1
> 
> 时间：2012-04-15T18:05:05.190
> 
> 标签：ios, core-data, nsnumber

我遇到了一个 NSManagedObject 子类的问题，其中值设置为布尔值，但原始类型似乎总是一个整数。

这是描述问题的场景：

如果我有一种方法可以检查 NSNumber 的原始类型，如下所示：

```
- (BOOL) numberIsBool:(NSNumber*)numberToCheck {

   const char *primitiveType = [numberToCheck objCType];

   return (strcmp(primitiveType, @encode(BOOL)) == 0 );
 } 
```

我执行以下代码：

```
NSNumber *num = [NSNumber numberWithBool:YES];

BOOL isBool = [self numberIsBool:num]; 
```

正如预期的那样，primitiveType 将是“c”并且 isBool 将是 YES。

但是，如果我采用 NSManagedObject 子类：

```
@interface MyClass : NSManagedObject

@property (nonatomic, retain) NSNumber *myBoolValue;
...
@end 
```

其中 myBoolValue 设置为模型中的 Boolean 类型，我执行以下代码：

```
MyClass *myClass = ... (create from NSManagedObjectContext)

myClass.myBoolValue = [NSNumber numberWithBool:YES];

BOOL isBool = [self numberIsBool:num]; 
```

原始类型将设置为“i”，isBool 将设置为 NO

谁能向我解释这个原因或我如何让 myBoolValue 属性尊重它设置的原始类型？

编辑：所以我想要完成的事情没有混淆 - 我不是试图将 NSNumber 转换为布尔值。我已经知道如何使用 `[myBoolValue boolValue]`.

编辑#2 - 更多说明：如果我询问 NSManagedObject 的属性。当属性是 NSNumber 并且它的值是 1 或 0 时，如果它打算是一个布尔值，我需要采用不同的代码路径，而不是它打算是一个整数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T18:32:44.480

Core Data 将 BOOL 存储为 NSNFCNumber。要将其视为 BOOL，您可以使用此转换 `BOOL myBool = [[NSString stringWithFormat@"%@", (NSInteger)[myManagedObject valueForKey:@"myAttribute"]]intValue] == 1;`

在 Apple 论坛上找到了解决方案

[https://discussions.apple.com/thread/2169600?start=0&tstart=0](https://discussions.apple.com/thread/2169600?start=0&tstart=0)

# 编辑

在您`numberIsBool`应该将您的 originalType 与**NSCFBoolean**进行比较，因为这是存储在核心数据中的 BOOL 类型

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T02:10:49.127

感谢@Nikita 找到的帖子，我意识到这是 NSManagedObject 的一个缺点，所以我想出了一个解决问题的方法：

```
- (BOOL) property:(NSString*)propertyName ofObjectIsBoolean:(NSObject*)object {
     BOOL isBoolean = NO;

     if ([object respondsToSelector:@selector(entity)]) {

         NSEntityDescription *description = [object entity];

         NSDictionary *attributes = [description attributesByName];

         NSAttributeDescription *attributeDescription = [attributes objectForKey:propertyName];

         NSAttributeType attributeType = [attributeDescription attributeType];

         isBoolean = (attributeType == NSBooleanAttributeType);
      else {

         const char *primitiveType = [numberToCheck objCType];

         isBoolean = (strcmp(primitiveType, @encode(BOOL)) == 0 );
      }

      return isBoolean;
} 
```

# semantic-web - 在 OWL 中声明一个空类

> ID：10164641
> 
> 赞同：2
> 
> 时间：2012-04-15T18:05:27.607
> 
> 标签：semantic-web, owl, protege

OWL 是否允许本体只包含一个空类？类必须包含一些个体吗？做

```
<owl:Class rdf:ID="Human"/> 
```

意思是“人类”是一个空类？

如果一个本体包含一个空类，是否可以在另一个扩展它的本体中定义个体？

类似地，可以声明一个个体而不是本体中任何类的成员吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T20:03:52.510

是的，您可以声明一个空类。

是的，您可以在不同的本体中声明此类的个体。

这两种情况都是完全正常的。本体的思想是它们可以共享，即一方定义类和属性，然后其他方可以通过实际实例化类并使用属性来描述它们来使用它*。*

每个人都隐含地是`owl:Thing`该类的成员。因此，最接近声明没有班级的个人的方法是使其成为以下成员`owl:Thing`：

```
<owl:Thing rdf:ID="MyThing"/> 
```

# matlab - MATLAB 实时视频

> ID：10164644
> 
> 赞同：0
> 
> 时间：2012-04-15T18:06:51.040
> 
> 标签：matlab, matlab-deployment

我有用于拍摄实时视频的代码，并且我有在图像上绘制两条线的代码，所以我想将这两个代码组合在一起，当一个对象出现在线上时，颜色会发生变化。我该怎么做呢？

下面是两个 MATLAB 程序。

拍摄现场视频的代码：

```
clear;

dev_info = imaqhwinfo('winvideo',1);
celldisp(dev_info.SupportedFormats);
vid1 = videoinput('winvideo',1);

%out = imaqhwinfo(vid)

%This is for triggering:

num_frames=5;

triggerconfig(vid1, 'Manual')
set(vid1,'FramesPerTrigger',num_frames)

start(vid1);
trigger(vid1)

frame = getsnapshot(vid1);
image(frame);

%Here it will acquire five frames.

%Now move the data acquired to the workspace.
[data1 time1] = getdata(vid1,num_frames);

kk=length(time1);
elapsed_time = time1(kk) - time1(1);

%frame = getsnapshot(vid1);   %This is to get a single frame.

%imaqmontage(data1)

%cleaning

delete(vid1);
clear vid1;

aviobj = avifile('example.avi')
for i=1:kk
    F=data1(:,:,:,i);
    aviobj = addframe(aviobj,F);
end
aviobj = close(aviobj);

%Then we can see the whole video clip.
mov = aviread('example.avi');
movie(mov)
%................

%Also, we can directly play the video from the video file.
mplay('example.avi'); 
```

在图像上绘制两条线的代码：

```
im = imread('image.jpg');
imshow(im);
hold on;
line([27,1523],[1753,1753]);
line([7,1531],[1395,1395]);
hold off; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T12:18:37.633

查找 Simulink 演示**viptrackpeople**。您可以尝试将视频源块从“多媒体文件”更改为阻止“来自视频设备的图像”，然后使用您的 MATLAB 处理代码添加一个块。我没有视频设备，因此无法验证这种方法。

# android - 如何合并两个 android 应用程序，每个应用程序在合并应用程序的单独选项卡上运行

> ID：10164645
> 
> 赞同：-3
> 
> 时间：2012-04-15T18:06:56.537
> 
> 标签：android, android-manifest, android-ui, android-xml

我有两个 android 项目，我想将这 2 个应用程序合并为 1 个应用程序，并且我希望它们每个都在合并应用程序的不同选项卡中运行。

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T18:28:50.773

来自 developer.android.com：“每个 Android 应用程序都在自己的进程中运行，并拥有自己的 Dalvik 虚拟机实例。”

您不能在同一个应用程序中运行两个单独的应用程序。这就是他们一开始就分开的原因。

但是，您可以让应用程序相互通信并在两者之间传递数据。但是，一次只能显示一个应用程序（尽管它可以显示来自另一个应用程序的信息）。

# asp.net - 格式化的 .net Web 服务（用于 .asmx 解决方案）

> ID：10164650
> 
> 赞同：1
> 
> 时间：2012-04-15T18:07:30.407
> 
> 标签：asp.net, sql-server, xml, web-services, asmx

我已经搜索过了，但实际上我找不到`.asmx`解决方案的确切答案。如何创建格式如下所示的 .Net Web 服务？它还将与数据库连接。

```
<Books>
    <Book BookID="1" BookName="BookName1" Page="100"/>
    <Book BookID="2" BookName="BookName1" Page="200"/>
    <Book BookID="3" BookName="BookName1" Page="300"/>
</Books> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T18:45:27.367

我从您的帖子中得知您正在使用 WCF。（我建议切换到 MVC 或“Web API”，因为这会使这种事情变得容易得多。）不过，使用 WCF，您可以在操作合同中将主体样式设置为“裸”：

```
[OperationContract]
[WebGet(ResponseFormat=WebMessageFormat.Xml, BodyStyle=WebMessageBodyStyle.Bare)]
Books GetBooks(); 
```

我想你已经有这样的实体设置：

```
[DataContract]
public class Book
{
    [DataMember]
    public int BookID { get; set; }
    [DataMember]
    public String BookName { get; set; }
    [DataMember]
    public int Page { get; set; }
} 
```

使用该契约应该会导致服务按照您在数据契约中定义的指定返回 XML，而无需使用 soap 包装器。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-15T20:00:30.923

您可以使用`WCF`with`BasicHttpBinding`来模拟`.asmx`Web 服务。

您可以使用 ：

```
[WebMethod] 
public XmlDocument YourMethod() 
{  
} 
```

你可以看看这个链接：

[http://blogs.msdn.com/b/mpowell/archive/2004/05/12/130637.aspx](http://blogs.msdn.com/b/mpowell/archive/2004/05/12/130637.aspx)

# c# - 交换 Web 服务错误 - 远程服务器返回错误 405 方法不允许

> ID：10164651
> 
> 赞同：9
> 
> 时间：2012-04-15T18:07:39.477
> 
> 标签：c#, exchangewebservices

我正在尝试通过交换网络服务发送邮件。我查看了msdn并找到了一些帮助。每次我尝试运行此代码时，我都会收到上述错误:(我几乎在任何地方都尝试阅读...

```
ExchangeService service = new ExchangeService(ExchangeVersion.Exchange2010);

service.Credentials = new WebCredentials("My user name", "my pass");

System.Net.ServicePointManager.ServerCertificateValidationCallback =
        ((sender, certificate, chain, sslPolicyErrors) => true);

service.Url = new Uri("my web service url.WSDL");
    EmailMessage appointment = new EmailMessage(service);

appointment.Subject = "Test by me";
appointment.Body = "DateTime.Now";
appointment.ToRecipients.Add("xxxxxxx@gmail.com");

appointment.SendAnd

SaveCopy(); 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-16T06:46:40.447

在设置服务的 url 时，实际上应该使用 asmx，而不是 wsdl 链接。

```
service.Url = new Uri("https://server/EWS/Exchange.asmx"); 
```

那应该使它起作用。

# regex - 为什么这个正则表达式不贪心？

> ID：10164653
> 
> 赞同：2
> 
> 时间：2012-04-15T18:08:23.463
> 
> 标签：regex, perl, regex-greedy

[这是Perl 正则表达式匹配 IP 地址](https://stackoverflow.com/questions/10161963/perl-regular-expression-to-match-an-ip-address)的后续内容。我想展示如何正确解决问题，但遇到了意想不到的行为。

```
use 5.010;
use strictures;
use Data::Munge qw(list2re);
use Regexp::IPv6 qw($IPv6_re);
use Regexp::Common qw(net);

our $port_re = list2re 0..65535;

sub ip_port_from_netloc {
    my ($sentence) = @_;
    return $sentence =~ /
        (                   # capture either
          (?<= \[ )
            $IPv6_re        #  IPv6 address without brackets
          (?=  \] )
        |                   # or
            $RE{net}{IPv4}  #  IPv4 address
        )
        :                   # colon sep. host from port
        ($port_re)          #   capture port
    /msx;
}

my ($ip, $port);
($ip, $port) = ip_port_from_netloc 'The netloc is 216.108.225.236:60099';
say $ip;
($ip, $port) = ip_port_from_netloc 'The netloc is [fe80::226:5eff:fe1e:dfbe]:60099';
say $ip; 
```

第二场比赛失败。[`use re 'debugcolor'`](http://perldoc.perl.org/re.html)显示在 IPv6 地址中`:($port_re)`已经匹配。`:5`这让我感到惊讶，因为我没有用`?`. 我希望它会吞噬所有内容，直到`]`，然后才匹配分隔冒号以及之后的内容。

为什么会发生这种情况，补救措施是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T18:44:42.337

`*`只有当你的一个原子可以选择它可以匹配多少（即，如果你使用、或）时`+`，贪婪才会发挥作用。这不是贪婪的问题。`?``{n,m}`

问题是正则表达式只会匹配一个 IPv6 地址，如果它紧随其后的是“ `]`”和“ `:`”。这不可能发生。

您可以使用两个不同的匹配项，也可以使用如下内容：

```
my $port_re = list2re 0..65535;
my $IPv4_re = $RE{net}{IPv4};

sub ip_port_from_netloc {
    my ($sentence) = @_;
    return if $sentence !~ /
        (?: \[ ( $IPv6_re ) \]
        |      ( $IPv4_re )
        )
        : ($port_re)
    /msx;

    return ($1 // $2, $3);
} 
```

* * *

也许这有点清洁？

```
my $port_re = list2re 0..65535;
my $IPv4_re = $RE{net}{IPv4};

sub ip_port_from_netloc {
    my ($sentence) = @_;
    return if $sentence !~ /
        (?: \[ (?<addr> $IPv6_re ) \]
        |      (?<addr> $IPv4_re )
        )
        : (?<port> $port_re )
    /msx;

    return ( $+{addr}, $+{port} );
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T18:41:26.237

零宽度断言不会被消耗，因此文字右括号仍然存在以匹配跟随第一个捕获组。此调整似乎有效：

```
/
    \[?(                   # capture either
      (?<= \[ )
        $IPv6_re        #  IPv6 address without brackets
      (?=  \] )
    |                   # or
        (?<! \[ )
        $RE{net}{IPv4}  #  IPv4 address
        (?! \] )
    )\]?
    :                   # colon sep. host from port
    ($port_re)          #   capture port
/msx; 
```

# scala - 使用传递给隐式参数的显式值作为新的隐式值

> ID：10164655
> 
> 赞同：3
> 
> 时间：2012-04-15T18:08:36.347
> 
> 标签：scala, implicit

考虑这个案例类：

```
case class IntPrinter(implicit val i: Int) {
  def print()(implicit i: Int) = println(i)
} 
```

我可以实例化它为隐式参数显式传递一个值，如下所示：

```
val p = IntPrinter()(9) 
```

我在 IRC 中被告知，从现在开始，显式传递的值将在被调用时隐式传递给 print，但事实并非如此：

```
p.print()
 error: could not find implicit value for parameter i: Int 
```

我做错了什么还是我误解了/得到了不正确的信息？有什么办法可以做到这一点？

* * *

**编辑：**事实上，如果我`p._`这样导入，它会按预期工作：

```
import p._
p.print() 
```

这确实打印`9`。

这是正确的行为吗？使用`import`听起来像坏主意吗？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T18:36:49.230

我不确定我是否理解。为什么你需要隐含在这里？看起来你可以很容易地做到这一点：

```
scala> case class IntPrinter(i: Int) { def print() = println(i) }
defined class IntPrinter

scala> val p = IntPrinter(9)
p: IntPrinter = IntPrinter(9)

scala> p.print()
9 
```

或者，如果你真的有使用`IntPrinter`隐式：

```
scala> case class IntPrinter(implicit val i: Int) { def print() = println(i) }
defined class IntPrinter

scala> val p = IntPrinter()(9)
p: IntPrinter = IntPrinter(9)

scala> p.print()
9 
```

基本上，在这种情况下，您无需指定它是隐式的两次；当你第一次声明它时，它成为`i`类的成员，所以你可以在类的其余部分继续引用它——就像你可以使用类的任何其他数据成员一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T18:44:55.847

确实，这是正确的行为。`implicit`值仅在当前范围内搜索，并且`print`在外部调用`IntPrinter`意味着它不在类范围内（显然）以及我必须这样做的原因`import`。

做我想做的正确方法：

```
case class IntPrinter(implicit val i: Int) {
  def print()(implicit i: Int) = println(i)
  def printProxy() = print()
} 
```

然后调用`p.printProxy`的行为就像我希望它的行为一样（因为`printProxy`在`IntPrinter`'s 范围内。）

# java - 快速排序算法抛出 StackOverflowException

> ID：10164656
> 
> 赞同：2
> 
> 时间：2012-04-15T18:08:54.350
> 
> 标签：java, algorithm

对于家庭作业，我必须编写一个 QuickSort 算法的实现，并使用它以某种随机顺序对包含 100k 个数字的列表进行排序。

在作业的第一部分，我必须使用数组的第一项作为枢轴元素。这确实返回了一个排序列表。但是，对于作业的第二部分，我必须使用最后一项作为枢轴，这会导致 StackOverflowException。当我在 8 条记录的较小集合中尝试它时，它确实可以正常工作。我一直在查看我的代码，但我不知道我在哪里犯了错误。任何帮助将不胜感激。我的代码如下：

```
public class QuickSort {

    private QuickSortStrategyEnum quickSortStrategy;

    public QuickSort(QuickSortStrategyEnum quickSortStrategy) {

        this.quickSortStrategy = quickSortStrategy;
    }

    public List<Integer> sortIntegerArray(List<Integer> arrayList, int left, int right) {

        if ( left >= right ) {
            return arrayList;
        }

        int i = partition(arrayList, left, right);

        if (i <= right) {

            int pivotNew = partition(arrayList, i, right);
            int pivotIndex = arrayList.indexOf(pivotNew);

            arrayList = sortIntegerArray(arrayList, left , pivotIndex - 1);
            arrayList = sortIntegerArray(arrayList, pivotIndex + 1, right);
        }

        return arrayList;
    }

    private int partition(List<Integer> arrayList, int left, int right) {

        int pivot = getPivot(arrayList, left, right);
        int i = left + 1;

        for (int j = i; j <= right; j++) {

            if (arrayList.get(j) < pivot) {

                Collections.swap(arrayList, j, i);
                i++;
            }
        }

        Collections.swap(arrayList, left, i - 1);
        return i;
    }

    private int getPivot(List<Integer> arrayList, int left, int right) {

        int pivot = 0;

        switch (quickSortStrategy) {

            case FIRST:
            pivot = arrayList.get(left);
            break;

            case LAST:
            pivot = arrayList.get(right);
            break;
        }
        return pivot;
    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T18:12:14.363

提示：如果 会发生什么`right == left + 1`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T19:25:13.907

除了 David Harkness 指出的事实之外，分区逻辑也存在问题。试试这个：（删除大卫哈克尼斯指出的东西后）

```
private int partition(List<Integer> arrayList, int left, int right) {

    int pivot = getPivot(arrayList, left, right);
    int i = left - 1; 

    for (int j = left; j < right; j++) {
        if (arrayList.get(j) <= pivot) {
            i++;
            Collections.swap(arrayList, j, i);
        }
    }

    Collections.swap(arrayList, i+1, right);
    return i+1;
} 
```

它适用于枢轴是最后一个元素的情况。不适用于第一个元素。

**阅读，理解纸上的工作，干活，编写伪代码，然后向 Eclipse 打个招呼。**不要急于实施。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T19:06:15.473

这两行看起来很可疑：

```
int pivotNew = partition(arrayList, i, right);
int pivotIndex = arrayList.indexOf(pivotNew); 
```

查看`partition`返回的内容并将其与您如何使用其结果进行比较。

# mercurial - 在 BitBucket 上为许多用户和补丁使用 Mercurial 补丁队列存储库

> ID：10164664
> 
> 赞同：3
> 
> 时间：2012-04-15T18:09:23.987
> 
> 标签：mercurial, tortoisehg, bitbucket

很抱歉这个多部分的问题，但我很难理解将 Mercurial Patch Queue 与 BitBucket 一起使用的预期方法，而 Google 并没有多大帮助。我希望描述一些 MQ 概念的一个答案将同时涵盖许多问题。我已阅读[http://ches.nausicaamedia.com/articles/technogeekery/using-mercurial-queues-and-bitbucket-org](http://ches.nausicaamedia.com/articles/technogeekery/using-mercurial-queues-and-bitbucket-org)，但它似乎已过时且不完整。我的总体计划是允许大量用户提交大量更改，而不必将它们提交到分支。这些补丁代表玩家对游戏进行的可选修改，以增强和扩展游戏。我希望用户能够挑选任意补丁或一组补丁来玩和查看。当我对 hg 的工作原理有了深入的了解后，我打算编写一些 PHP 脚本或一些东西来将一个分支和一组选定的补丁程序拉到一个工作区中，以便玩家能够运行 HTML5 代码进行审查。

我*已经*能够：

1.  [在 SourceForge http://sourceforge.net/p/iotabuildit/wiki/Home](http://sourceforge.net/p/iotabuildit/wiki/Home)上创建一个存储库，我最初认为我会在其中托管所有内容。
2.  将我的所有代码提交到 SourceForge 存储库。
3.  考虑到我的要求，意识到 BitBucket 可能是一个更好的地方来托管这个（感谢[推荐的 DVCS 托管许多独立补丁的机制](https://stackoverflow.com/questions/10139746/recommended-dvcs-mechanism-for-hosting-many-independent-patches/10141802#comment13037751_10141802)）。
4.  将我的代码直接从 SourceForge 的 Mercurial 存储库导入 BitBucket [http://bitbucket.org/bluemonkmn/iotabuildit/](http://bitbucket.org/bluemonkmn/iotabuildit/)
5.  将 BitBucket URI 添加到 TortoiseHg，这样我就可以将同一个本地存储库与任一在线存储库一起使用。
6.  在 TortoiseHg 中启用 mq
7.  Q将更改提交到我的本地存储库的补丁队列中。
8.  [在 BitBucket http://bitbucket.org/bluemonkmn/iotabuilditmq/](http://bitbucket.org/bluemonkmn/iotabuilditmq/)上创建一个补丁队列存储库。
9.  将补丁队列存储库克隆到本地存储库
10.  将补丁文件从原始本地存储库复制到补丁队列存储库（尽管我想知道是否有更好的方法来做到这一点）。
11.  在进行推送之前，通过打开 --mq 开关将补丁推送到 BitBucket 补丁队列存储库。
12.  请参阅 BitBucket 中列出的补丁程序。
13.  克隆 BitBucket 补丁队列存储库的新副本并查看本地存储库中可用的补丁（以及树的其余部分）。

我*无法*弄清楚或有疑问的事情是：

1.  我是否需要在本地同时保留主存储库和补丁存储库？
    *   我可以/应该将补丁存储库与 SourceForge 一起使用吗？（如果可以，我可能会放弃 BitBucket。）
    *   SourceForge 是否支持 mq？（SourceForge 会不会像我在 BitBucket 上看到的那样给我一个包含补丁的克隆存储库？）
    *   我可以/应该将原始存储库与 BitBucket 补丁存储库一起使用吗？（如果可以，我可能会放弃 SourceForge 的存储库。）
    *   在处理用于补丁的代码时是否需要使用一个存储库，而在处理打算正式提交的代码时是否需要使用另一个存储库？
2.  *将补丁*推送到在线存储库 的最佳方式是什么？
    *   我是否在本地补丁存储库上执行 QCommit 或 QNew，然后使用 --mq 开关推送？
    *   在我的过程中的某个时刻，我向补丁存储库提交了一个系列和一个 .diff 文件，这似乎有点不对劲。这是否玷污了我对 mq 和 BitBucket 应该如何工作的看法？
    *   我是否应该将 .diff 文件提交到 BitBucket 或 SourceForge 上的源代码控制？（在某些情况下，QCommit 似乎想要提交 .hgignore、series 和 .diff 文件）
    *   克隆后，用户是否应该能够在补丁存储库中看到挂起的已应用和/或未应用的补丁？
3.  有没有办法在本地*或*远程存储库中提取可用补丁而不克隆它？
    *   一旦我在本地存储库中删除了一个补丁，我就无法弄清楚如何在不重新克隆它的情况下从远程存储库取回它，我也无法弄清楚如何提交对补丁的删除。
    *   如果不手动复制补丁文件，我无法将补丁从我的原始存储库传输到补丁存储库。
4.  我是否很快就会遇到一个问题，即我无法从队列中挑选出一些补丁，而在同一个队列中没有其他补丁之前？我担心有些玩家会忽略在单独的分支/队列/任何东西上制作补丁，这将使它们与来自同一（甚至可能是另一个）用户的不相关更改保持一致。处理该潜在问题的任何建议也值得赞赏。
5.  是否可以（允许）任意用户提交补丁，而无需显式添加每个 BitBucket 用户以拥有补丁存储库的权限？
6.  让所有（可能是数百个？）用户共享补丁队列存储库是否明智和合理？这将是理想的（而不是让每个用户创建自己的补丁存储库，如果这甚至可能的话），因为我不希望这对用户来说很复杂，并且考虑到我在理解 Mercurial 和 BitBucket 方面所花费的时间，我担心任何并发症都会关闭很多用户/玩家。

你可能会说，我有点迷茫，不知道要问什么问题。我怀疑答案比这些问题更简单，但在不知道问题的情况下，很难提出正确的问题。希望描述补丁队列存储库性质的一个答案将为我清除所有这些。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-30T13:30:55.687

回顾我的旧问题，我认为我对 DVCS 的理解被我对 CVCS 的熟悉程度所掩盖。最后，我只是允许其他 SourceForge 用户托管他们自己的存储库克隆并发布到他们的存储库的链接（请参阅[http://sourceforge.net/p/iotabuildit/wiki/reviews/](http://sourceforge.net/p/iotabuildit/wiki/reviews/)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T17:17:29.800

恐怕，随着 SF 的一堆克隆，你走上了“远非理想”的道路，走向了“无人管理的混乱”里程碑

*   Yon 可以将 MQ-queues 与 Bitbucket 一起使用（请参阅[mercurial-crew-mq](https://bitbucket.org/nicdumz/mercurial-crew-mq/overview) repo 或[hgsubversion-layout-hacks](https://bitbucket.org/boomfish/hgsubversion-layout-hacks/overview) repo），无需额外的 repo，仅在 dir 中`.hg`用于补丁
*   我看不出有任何理由将补丁存储在自己的仓库中（变更集几乎不可读 - 差异的差异，补丁历史的价值接近于零）
*   通过一个存储库中的补丁，您可以轻松交换和更新补丁
*   `qclone | push --mq`在 vanilla 代码之上提供补丁的双向交换
*   [MQCollab](http://mercurial.selenic.com/wiki/MqCollabExtension)扩展可以为贡献者提供围绕*一些补丁*的小组工作和 P2P 通信

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T23:12:41.100

我想我找到了问题 #3 的第二个项目符号的答案：

1.  确保补丁位于源（本地）存储库的已应用队列中。
2.  现在我可以从 TortoiseHg Workbench 的“导出”上下文菜单中选择“复制补丁”。
3.  然后我可以切换到另一个本地存储库并从“存储库”菜单中选择“导入...”。
4.  点击“从剪贴板导入”
5.  在可应用补丁的目标下拉列表中，选择“补丁”。
6.  点击导入

现在来自其他本地存储库的补丁出现（未应用）在本地存储库中，并且可以轻松应用。

除非我自己找到所有其他问题的答案，否则我可能不会接受这个（我自己的）答案。我希望有人可以帮助我解决其他问题。

# liferay-6 - Liferay 6：在我的情况下可以修改 Liferay Friendly URL

> ID：10164665
> 
> 赞同：1
> 
> 时间：2012-04-15T18:09:30.857
> 
> 标签：liferay-6

我正在使用liferay 6.1

我在 liferay-portet.xml 文件中添加了这个

```
<friendly-url-mapper-class>com.liferay.portal.kernel.portlet.DefaultFriendlyURLMapper</friendly-url-mapper-class>
<friendly-url-mapping>Gasd</friendly-url-mapping>
<friendly-url-routes>com/test/friendlier-friendly-url-routes.xml</friendly-url-routes> 
```

**根据上下文根（或 Portlet 名称），这是我更友好的 url-routes.xml**

```
<routes>
<route>
    <pattern>/satportlet</pattern>
</route>
</routes> 
```

但是当我执行提交操作时，该 Portlet 的 URL 仍然是这样的

```
http://localhost:8086/web/guest/home/-/Gasd/satportlet?p_auth=EFAy7VSA&p_p_lifecycle=1&_satportlet_WAR_SatPractportlet_javax.portlet.action=addBook 
```

无论如何，这可以改进。

我对 Liferay 非常陌生，请给我建议，我已经准备好按照您的说法进行更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T10:55:07.147

是的，它可以改进。

例如，在 JSP 中呈现 URL，要在 portlet 中查看用户：

```
<portlet:renderURL windowState="maximized" var="myURL">
    <portlet:param name="resourcePrimKey" value="<%=user.getUserId() %>" />
    <portlet:param name="jspPage" value="/html/viewMyUser.jsp" />
</portlet:renderURL> 
```

您可以在友好的 URL 路由中拥有友好的 URL 路由，如下所示：

```
<route>                                   
    <pattern>/satportlet/{resourcePrimKey:\d+}/view</pattern>  
    <!-- \d+ is the place-holder for the userID, i.e. 5 in the friendly URL below -->
    <implicit-parameter name="p_p_lifecycle">0</implicit-parameter>
    <!-- Implicit parameters are not shown in the route pattern, here 0,1 etc are the phases of the portlet 0=render, 1=action etc -->
    <implicit-parameter name="p_p_state">maximized</implicit-parameter>
    <implicit-parameter name="jspPage">/html/viewMyUser.jsp</implicit-parameter>
</route> 
```

所以生成的友好 URL 将是：

```
http://localhost:8086/web/guest/home/-/Gasd/satportlet/5/view 
```

在您查看生成的 URL 的情况下，您可以使用类似这样的 <route> 元素（如果给出了您在 JSP 中使用的 <portlet:actionURL> 或 <portlet:renderURL> 我认为这对构建 <route> 元素）。**我不确定**这是否完全正确，但它会是这样的：

```
<route>
    <pattern>/satportlet/{p_auth}/{[p_p_id]_javax.portlet.action:\d+}</pattern>  
    <implicit-parameter name="p_p_lifecycle">1</implicit-parameter>
</route> 
```

所以**我猜（我再次不确定）**使用上面的配置它应该生成友好的 URL：

```
http://localhost:8086/web/guest/home/-/Gasd/satportlet/EFAy7VSA/addBook 
```

您还可以查看 liferay 的源代码和 *-friendly-url-routes.xml 文件以获得更好的理解。

希望这至少可以为您提供有关友好 URL 如何在 liferay 中工作的线索。

# iphone - 由于 didEnterBackground，IOS 应用程序挂起然后在启动时崩溃

> ID：10164666
> 
> 赞同：0
> 
> 时间：2012-04-15T18:09:44.437
> 
> 标签：iphone, objective-c, ios, xcode

我有一个应用程序，当用户关闭应用程序时，我需要在其中存档信息。自然，我在`applidcationDidEnterBackground`. 此外，我在`applidcationDidEnterBackground`. 奇怪的是，如果您关闭应用程序然后立即锁定手机，等待几秒钟，然后返回应用程序，则会发生以下两种情况之一： 1\. 没有任何信息被存档（如果您关闭应用程序正常）或 2\. 应用程序在启动画面中挂起，直到崩溃。

锁定手机并不是使上述情况发生的唯一方法，它以前发生过，但我一直无法确定何时发生。锁定它是一个始终如一的例子。

需要明确的是，我不完全确定是否`didEnterBackground`是导致此问题的原因，但这是我最好的猜测。我一直在寻找一段时间，但找不到解决此错误的方法，如果有人知道可能发生的情况，我将不胜感激上。

太感谢了，

# haskell - 为什么 Haskell 这么大？

> ID：10164667
> 
> 赞同：6
> 
> 时间：2012-04-15T18:10:00.700
> 
> 标签：haskell, syntax

我是 Haskell 的新手，到目前为止非常喜欢它。让我印象深刻的一件事是它看起来很大，有许多语法结构和库，它们为几乎所有东西定义了函数。例如，Data.Map 定义了近 100 个函数。Data.Set 还定义了许多函数，Data.List 也是如此，它也提供了许多与 Data.Set 相同的功能。

对于为什么会这样，我有初学者的看法（为所有常见模式提供功能，减少噪音），但我很想听听一些老手对该主题的看法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T18:28:10.940

我会说 Haskell 语言的大小介于中间（比 Lisp 大，比 C++ 小）。尽管由于所有语法糖都有明确定义的翻译到 Haskell Core（它有大约 7 个元素），但它有点难以区分库和语言。

库确实包含很多小函数，这主要是因为 Haskell 程序员发现了不断出现的模式，然后将它们放入代码中。作为一名学习者，我经常有一种感觉“应该有一个函数来做到这一点”，然后发现确实有。你学习它们的方式与编写它们的方式相同：自己编写函数，然后几天后在某个库的文档中找到它。

# android - 尽管“singleTop”，Android仍会在顶部创建新的Activity

> ID：10164669
> 
> 赞同：5
> 
> 时间：2012-04-15T18:10:11.943
> 
> 标签：android, android-activity

我有一个活动

```
 android:launchMode="singleTop" 
```

我如何操作 Intent 以便在 Top 上创建新的 Activity。因为在特殊情况下我需要一个新的活动。

还是不可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T18:46:15.767

我会删除`singleTop`清单中的标志，而是将其作为标志添加到您需要它们的意图中，使用：

```
intent.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP); 
```

然后在不需要使用的情况下`singleTop`，不要设置这个标志。

# c# - 按用户访问权限过滤数据

> ID：10164677
> 
> 赞同：0
> 
> 时间：2012-04-15T18:11:02.993
> 
> 标签：c#, asp.net-mvc-3, entity-framework-4

我正在使用实体（链接到 Postgres，但不确定该部分是否相关）在 MVC3 中编写一个站点。

用户是多个“联盟”的一部分，并针对其中一个联盟创建“事件”。

将有其他用户可以访问该联赛，当他们查看事件列表时，我需要该列表仅显示他们有权访问的“联赛”中的那些“事件”。

现在有很多方法可以实现这一点，但我正在寻找最优雅和被广泛接受的“正确方法”。

目前，用户 -> 联赛关系与其余数据保存在同一位置，因此我可以毫无问题地按联赛进行过滤。我的问题是我不确定是否应该访问 HttpContext 以获取存储库层中的 userId 来执行过滤。

如果我不执行上述操作，我正在考虑使用 RoleMembership 功能并制作联赛、角色，然后有内置功能可以做到这一点。

问题是，在 MVC3/Entity 中按用户访问过滤结果数据的最佳做法是什么？

博客/教程链接是首选，但也可以接受完整的答案...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T18:55:59.170

我绝对不认为存储库应该调用 HttpContext 对象。我建议遵循此应用程序的依赖注入模式。在这个场景中，有三个接口——一个是数据访问接口（repository）；一个是数据访问接口（*repository*）；*另一个是为您的视图（视图模型*）提供过滤数据的提供者；第三个是角色信息的提供者（*角色提供者*）。

因此，存储库是独立的；角色提供者对 HttpContext 有依赖关系（我从你的问题中收集到）；并且视图模型依赖于存储库和角色提供者。我要强调的是，您编写了您计划使用的任何 HttpContext 方法的依赖包装，以便于测试。

在 MSDN 上有一个相当广泛的关于依赖注入和 MVC 的教程：http: [//msdn.microsoft.com/en-us/gg618491](http://msdn.microsoft.com/en-us/gg618491)

为了显示：

```
public interface ILeagueRepository 
{
    IEnumerable<League> All;
}

public interface ILeaguesProvider
{
    IEnumerable<League> GetUserLeagues(string Username);
}

public class LeaguesProvider : ILeaguesProvider
{
    public LeaguesProvider(ILeagueRepository repository)
    {
         // ...
    }
    public IEnumerable<League> GetUserLeages(string Username)
    {
        return _repository.All.Where(league=>league.User == Username);
    }
}

public ActionResult LeaguesController
{
    public LeaguesController(ILeaguesProvider providerDependency, IRoleProvider roleDependency)
    {
        IEnumerable<League> leagues = providerDependency.GetUserLeagues(roleDependency.GetCurrentUser());
    }
} 
```

# android - 更改字体后 TextView 换行文本

> ID：10164680
> 
> 赞同：5
> 
> 时间：2012-04-15T18:11:40.320
> 
> 标签：android, textview

我有这个问题：

![在此处输入图像描述](../Images/2ba2285d6d41f53f540d113a0ef0ea44.png) ![在此处输入图像描述](../Images/ddec7ba859297a74c8a162c5bb6feee0.png)

好吧，文章中的文字是 ClickableSpan，点击时会改变颜色和字体。由于 BOLD 有点宽，所以行尾的一些文本会移出屏幕。尽管可以将其横向滚动，但我仍然希望将剪切或隐藏的单词移至下一行。

这可能吗？我已经尝试过`invalidate()`，再次重置 textview 宽度，但没有任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T06:42:28.717

从用户体验的角度来看，在单击链接时重排文本并不是一个好主意。所以你应该考虑只改变文本的颜色而不是字体。

如果您仍想继续执行此操作，可以在 textview 上调用，`requestLayout()`然后调用。`invalidate()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T06:56:57.763

可能有一些锻炼可以解决您的问题。

在您的 : 上尝试以下任一属性`TextView`：

*   `android:layout_weight=1`
*   `android:width="0dip"`
*   `android:ellipsize="none"`
*   `android:scrollHorizontally="false"`

对于您的滚动视图，您可以尝试：

```
<ScrollView android:id="@+id/SCROLL_VIEW"  
android:layout_height="fill_parent"   
android:layout_width="fill_parent">  

<TextView   
   android:id="@+id/TEXT_VIEW"   
   android:layout_height="wrap_content"   
   android:layout_width="wrap_content"   
   android:text="Here goes your text" />  
</ScrollView> 
```

现在在 TextView 参数中，尝试添加上述属性之一。由于您在更改字体后需要换行，因此我不确定哪个属性适合您的需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T10:42:19.203

如果您在`TextView`内部使用，请将with in标签`Layout`硬编码并使用您的标签。`layout_width``dip``Layout``layout_weight=1``TextView`

**注意：**只有当您的应用程序可以在纵向模式下使用时，才能实现上述过程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T12:28:13.160

您可以尝试的另一件事是致电`textView.requestLayout()`

# asp.net - 编辑 asp.net razor chtml 文件需要重新编译吗？

> ID：10164681
> 
> 赞同：4
> 
> 时间：2012-04-15T18:11:49.733
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2

我想在我的生产 MVC 网站中“实时”编辑 Razor 视图文件 *.chtml 文件，并且想知道它是否需要我重新编译我的 webapp 还是会导致 IIS Apppool 重新启动。我在我的本地机器上尝试过，似乎我可以在不需要重新编译的情况下进行编辑，但需要明确的答案或确认这一点的文档。

我也尝试在 webforms 中使用 *.aspx 文件，看来我可以编辑 aspx 文件而无需重新编译，只要 *.designer 文件不更改，即我不添加/删除任何 runat=server aspx 文件上的控件，我只能编辑纯 HTML 标记。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T18:36:52.397

不，它不需要编译。但是，在构建应用程序以编译视图时，有一个选项。

# java - 从抽象类访问

> ID：10164682
> 
> 赞同：-2
> 
> 时间：2012-04-15T18:12:04.993
> 
> 标签：java

```
public abstract class Password  {
private String password;
private final static String ENCRYPTION_METHOD;

static  {
ENCRYPTION_METHOD = "CLEAR TEXT";
    }

public Password(String password)    {
    password = password;

}

public String getPassword() {
    return password;
}

public boolean matches (String aString) {
    if (aString.equals(password))   {
        return true;    }

        else    {
            return false;   }
        }

public String toString()    {
    return password;
}

public static String getEncryptionMethod()  {
    return ENCRYPTION_METHOD;
}

abstract String decrypt(); 
```

## }

```
 public class EncryptedPassword extends Password   {
private final static String ENCRYPTION_METHOD;

static  {
ENCRYPTION_METHOD = "PERMUTATION";
    }

public EncryptedPassword(String password)   {
    super(password);
}

public boolean matches (String aString) {
    if  (aString.equals("True"))    {
            return true;    }

            else    {
            return false;   }
                }

public String toString()    {
    return "Password: " + super.toString();
}

public String decrypt() {

    return password;
}

public static String getEncryptionMethod()  {
    return ENCRYPTION_METHOD;
} 
```

}

嗨，我想知道你们是否知道我如何在我的 EncryptedPassword 类中返回我的密码，但仍然保持它具体并保持我的密码类抽象。有没有什么基本的方法。另外，对于糟糕的格式感到抱歉..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T18:22:16.167

您可以将方法更改为：

```
public String decrypt() {
    return getPassword();
} 
```

`password`或者，您可以将字段的访问修饰符从 更改`private`为`protected`。

# javascript - Ajax 调用后尝试重新加载 Javascript

> ID：10164690
> 
> 赞同：0
> 
> 时间：2012-04-15T18:12:55.030
> 
> 标签：javascript, jquery

我已经实现了一个 jquery 插件评级小部件。在我进行 ajax 调用以获取数据之前，它工作得很好。我需要插件来添加新元素。

我试图将脚本封装在一个函数中，并在成功时再次调用该函数，但没有运气。

如果没有成功，我也无法调用该函数，所以这是我的主要问题。

我如何将它变成一个函数并在页面加载和 ajax 调用时调用它。正如您在下面看到的，我尝试将其包围。

```
function RatingWidget(e) {
    //    jQuery.noConflict();
    $(document).ready(function() {

        //we bind only to the rateit controls within the products div
        //$('#products .rateit').bind('rated reset', function (e) {
        $(".rateit").bind('over', function(event, value) {
            $(this).attr('title', value);
        });
        $(" .rateit").bind('rated reset', function(e) {

            var ri = $(this);
            // var msg = ri.next();
            // var msg = ri.next('div .ratemsg');
            var msg = $(this).parents().nextAll("div.ratemsg:first")

            //if the use pressed reset, it will get value: 0 (to be compatible with the HTML range control), we could check if e.type == 'reset', and then set the value to  null .
            var value = ri.rateit('value');
            //var productID = ri.data('productid'); // if the product id was in some hidden field: ri.closest('li').find('input[name="productid"]').val()
            var ratingid = ri.data('ratingid');
            //   var ratingtest = ri.data('ratingtest');
            var currentTime = new Date()
            var month = currentTime.getMonth() + 1
            var day = currentTime.getDate()
            var year = currentTime.getFullYear()
            var dateoftweet = (month + "/" + day + "/" + year)
            //  var dateoftweetparse = Date.parse(dateoftweet);
            var hours = currentTime.getHours()
            var minutes = currentTime.getMinutes()
            if (minutes < 10) {
                minutes = "0" + minutes
            }
            var timeoftweet = (hours + ":" + minutes + " ")
            //  var timeoftweetparse = Date.parse(timeoftweet);

            //maybe we want to disable voting?
            ri.rateit('readonly', true);

            $.ajax({
                url: '/Home/GetRating',
                //your server side script
                data: {
                    id: ratingid,
                    value: value,
                    tweetday: dateoftweet,
                    tweettime: timeoftweet
                },
                //our data
                type: 'POST',
                success: function(data) {
                    //$('#ratemsg').html(data);
                    msg.html("<B>The TweetId is " + ratingid + " the vote value is " + value + " " + dateoftweet + "  " + timeoftweet + "</b>");
                },
                error: function(jxhr, msg, err) {
                    //  $('#response').append('<li style="color:red">' + msg + '</li>');
                    msg.html(data);
                }
            });
        });

    });
}​​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-13T19:03:05.863

当您在此处阅读文档时：( [http://api.jquery.com/Ajax_Events/](http://api.jquery.com/Ajax_Events/) )

每次调用 ajax 事件时，它都会触发一个名为“ajaxComplete”的全局事件处理程序

所以我要做的是使用“.on”函数来监听那个事件并执行我想要运行的任何代码。

我将在下面举一个例子：

```
$(".date").mask("9999/99/99 99:99:99");
$(".expiredate").mask("99/9999");
$(".phone").mask("(999) 999-9999");

$(document).on("ajaxComplete",function(){
    $(".date").mask("9999/99/99 99:99:99");
    $(".expiredate").mask("99/9999");
    $(".phone").mask("(999) 999-9999");
}); 
```

在我的示例中，我只是在某些字段上运行了一些掩码，以确保它们在 AJAX 调用后仍然正确运行。由于我希望在 AJAX 调用和关闭时都进行这些调用，因此我将代码更改为更高效，因此我不必将上面的代码编写两次。

```
$(document).on("ready ajaxComplete",function(){
    $(".date").mask("9999/99/99 99:99:99");
    $(".expiredate").mask("99/9999");
    $(".phone").mask("(999) 999-9999");
}); 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T18:26:19.750

`ready()`一旦 DOM 被加载，该事件就会被触发；从[文档](http://api.jquery.com/ready/)：

> 指定当 DOM 完全加载时要执行的函数。

一旦完成 AJAX 调用，而不是让你的`RatingWidget()`函数重新绑定`ready`事件，你应该让它绑定元素，例如

```
function RatingWidget() {
      $(".rateit").bind( ... )
}
$(document).ready(RatingWidget); 
```

正如@adeneo 提到的，使用 jQuery 的`on()`方法（[此处](http://api.jquery.com/on/)的文档）允许您锁定与选择器匹配的事件，而不管事件绑定时存在哪些元素，因此如果您添加与选择器匹配的新元素，事件将为它们触发好。这将为您省去确定何时需要重新绑定事件的麻烦，因为您的元素已被替换。例如，您可以调用一次，而不必再担心：

```
$(".rateit").on("over", function() { ... } ) 
```

由于`on`工作方式与 不同`bind`，这可能会带来性能损失，但这取决于您更换元素的频率、有多少元素等——它可能只是性能提升。

# meteor - 流星模板，哪里来的？

> ID：10164696
> 
> 赞同：5
> 
> 时间：2012-04-15T18:14:38.533
> 
> 标签：meteor

我一直在研究 Meteor 的 todos 示例。

[http://www.meteor.com/examples/todos](http://www.meteor.com/examples/todos)

我隐约了解如何使用示例中的模板。但是这是在哪里声明的？我试过查看 Meteor 用来查找它的软件包。我也搜索过谷歌，但是模板系统太多了。

哪里是了解 Template 以及它如何与 Meteor 一起使用的最佳地点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T19:40:44.203

看看模板中的智能包`packages/templating`。它定义了`Template`全局。

然后，它会扫描`.html`您项目中的所有文件。对于每个`<template>`标签，它将模板的主体编译成一个函数，该函数返回 HTML 并将该函数存储为 Template 上的一个属性。稍后，您的 JS 代码将附加辅助函数作为模板函数的属性（如`Template.my_template.my_helper`）。

目前，每个模板元素都被解释为 Handlebars。那将会改变。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T18:33:06.183

Handlebars 是目前唯一的模板系统。模板在[http://docs.meteor.com/#templates](http://docs.meteor.com/#templates)中有详细解释。

> 今天，为 Meteor 打包的唯一模板系统是 Handlebars。

# c++ - 涉及转换函数的棘手情况？

> ID：10164699
> 
> 赞同：0
> 
> 时间：2012-04-15T18:15:24.287
> 
> 标签：c++, class, object, data-conversion

我遇到了这种情况，我觉得很棘手。我有 2 节课：time12 和 time24，它们分别维持 12 小时和 24 小时的时间。它们都应该具有单独的转换函数来处理到另一种类型的转换。但是如果我先声明时间12，那么转换函数原型中的“time24”将是未定义的，因为time24类将在后面声明。那我现在该怎么办？我什至不能只在里面声明它并在第二堂课之后定义它。那么现在怎么办？

```
class time12
{
 operator time24()  //time24 is undefined at this stage
 {

 }
};

class time24
{

}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T18:21:26.420

您可以在不使用 C++ 定义的情况下声明该类：

```
class time24;

class time12
{
 operator time24()  //time24 is undefined at this stage
 {

 }
};

class time24
{

}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T10:37:15.580

通常在 c++ 中你有 2 种类型的文件，.h 和 .cpp。您的 .h 文件是您的声明，而 .cpp 是您的定义。

例子：

转换时间.h：

```
#ifndef CONVTIME_H_ //this is to prevent repeated definition of convtime.h
#define CONVTIME_H_

class time24; //for the operator in class12

class time12
{
public:
    time12(int); //constructor
    operator time24();
private:
    //list your private functions and members here
}

class time24
{
public:
    time24(int); //constructor
private:
    //list your private functions and members here
}

#endif //CONVTIME_H_ 
```

转换时间.cpp：

```
#include "convtime.h"

//constructor for time12
time12::time12(int n)
{
    //your code
}

//operator() overload definition for time12
time24 time12::operator()
{
    //your code
}

//constructor for time24
time24::time24(int n)
{
    //your code
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T18:24:15.263

您没有指定语言 - 如果您正在处理动态类型语言，例如 Python，则没有这样的问题 - 其他类型只需要在执行时知道，当调用转换方法时 - 而不是在 parse ( compile) time - 所以下面的代码是有效的：

```
class Time12(Time):
   def toTime24(self):
       return Time24(self._value)

class Time24(Time):
   def toTime12(self):
       return Time12(self._value) 
```

在调用“toTime24”方法时，全局名称“Time24”被定义为正确的类。

在 C++ 中 - 您可以声明一个与函数原型非常相似的类存根 - 只需执行以下操作：

```
class time24;

class time12
{ ... }

class time24
{ ... } 
```

不确定这在其他静态类型语言中是如何工作的。

# google-chrome - Chrome 扩展程序：后台查看页面，如邮件检查器

> ID：10164706
> 
> 赞同：1
> 
> 时间：2012-04-15T18:16:17.600
> 
> 标签：google-chrome, google-chrome-extension, background, navigation

我一直在寻找 2 天如何制作 chrome 扩展程序，它通过后台页面导航到远程页面（例如“http://hotmail.com”）并使用事件调度程序去某个地方，检查邮件，检查论坛上的帖子等..

我查看了谷歌邮件检查器扩展，我看到扩展只是使用 XMLHttpRequest() 并评估结果。但结果是一个准备好的 xml 文档，其中仅包含诸如“邮件：”“主题”“日期：”“3”等信息。因此，在任何情况下，它都不会评估 html 页面，调度事件并转到另一个页面..

所以我想知道是否有可能，我尝试通过 document.createElement() 和 document.body.appendChild() 包含 iframe，但我收到一条错误消息：“拒绝显示文档，因为 X-Frame-Options 禁止显示。 " 而我将 "permissions": [ " *://* /*" ] 放在清单文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T14:11:09.433

[`X-Frame-Options`](http://en.wikipedia.org/wiki/Clickjacking#X-Frame-Options)是服务器发送的 HTTP 标头，用于指定页面是否应显示在 iframe 中。Chrome 旨在遵守 X-Frame-Options 的限制，扩展程序无法放松此限制。

也许您可以使用跨域 Ajax 请求来获取信息。这只会为您获取页面的原始代码，因此如果页面中有 iframe 或使用脚本动态构建自身，它就没有那么有用了。但是，我怀疑大多数邮件服务都有一个可以抓取的“简单 HTML”视图（假设您正在构建一个邮件检查器）。

请参阅相关问题[克服“X-Frame-Options 禁止显示”](https://stackoverflow.com/questions/6666423/overcoming-display-forbidden-by-x-frame-options)。

# c++ - 无法将 this-> 指针传递给子对象

> ID：10164707
> 
> 赞同：1
> 
> 时间：2012-04-15T18:16:22.000
> 
> 标签：c++, compiler-errors

我知道`this`已经是一个指针，但我想了解究竟`this`是什么。它是地址还是 * 类型的指针？

如果我要将它存储到一个变量中，我将如何定义该变量？

让我们以此为例

```
class Adult
{
private:
 Child child;

public:
 Adult(){
  child = new Child(this);
  //to have something to hold onto and get back to the upper level of the hierarchy.
 }
};

class Child
{
private:
 Adult* my_adult;

public:
 Child();
 Child(Adult &hand){
  my_adult = hand;
 }
} 
```

好的，所以我遇到问题的地方是`my_adult = hand;` 当我尝试构建项目时它输出的代码行，如果后面还有更多，我会感到非常震惊。

```
sys/chin.cpp:19:14: error: cannot convert ‘Adult’ to ‘Adult*’ in assignment 
```

那么，当作为与访问成员相反的数据类型处理时，这是如何工作的呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T18:18:41.657

`my_adult`是指针，`hand`不是，纯粹而简单。

您要么需要：

```
class Child
{
private:
 Adult my_adult; //no pointer

public:
 Child();
 Child(Adult &hand){
  my_adult = hand;
 }
}; 
```

或者

```
class Child
{
private:
 Adult* my_adult;

public:
 Child();
 Child(Adult* hand){ //pointer parameter
  my_adult = hand;
 }
}; 
```

你的第一个例子也是非法的：

```
child = new Child(this); 
```

不应该编译，因为 child 是一个对象，而不是一个指针。

```
child = Child(this); 
```

将是正确的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T18:19:34.730

地址和 * 类型指针是一回事。更改您的 Child 构造函数以使用`Adult*`并使用初始化语法进行初始化，而不是`=`：

```
Child(Adult* hand): my_adult(hand) { } 
```

一旦你有了那个指针，你的 Child 类中的代码就可以`my_adult->Whatever()`根据需要调用。您需要知道，这种方法只有在`Adult`对象总是比`Child`对象更长寿时才是安全的。例如，如果一个订单被删除，那么所有的订单项目也会被删除，因此您不必担心订单项目使用了指向其订单的无效指针。如果这不是您系统中的情况，那么您需要担心的问题比指针语法更大。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T18:19:49.533

这里的问题是，它`my_adult`是一个*指针*，但却`hand`是一个*引用*。`my_adult=&hand`例如，会起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T18:20:13.777

您正在尝试将对象分配给指针。不起作用。此外，儿童必须在成人之前定义。否则，必须将 Adult 定义为 Child 作为指针（和前向声明）。

# meteor - Meteor 是否可以使用 Mongo 以外的数据源？

> ID：10164709
> 
> 赞同：7
> 
> 时间：2012-04-15T18:16:45.370
> 
> 标签：meteor

我可以将 Mongo 以外的数据源与 Meteor 一起使用吗？如果是这样，我在哪里可以找到一个例子？我专门寻找 MySQL、Memcache 和/或 Redis 支持。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T18:34:17.260

目前，您必须构建一个“驱动程序”以将任何其他数据源附加到 Meteor。

也就是说，他们已经定义了一个“DDP”协议，但如果它被记录在案，我还没有在网上看到它。

如果您查看 local_collection_driver 的现有代码，您可能会了解如何执行此操作：

*   [https://github.com/meteor/meteor/blob/master/packages/mongo-livedata/local_collection_driver.js](https://github.com/meteor/meteor/blob/master/packages/mongo-livedata/local_collection_driver.js)

*   [https://github.com/meteor/meteor/blob/master/packages/mongo-livedata/mongo_driver.js](https://github.com/meteor/meteor/blob/master/packages/mongo-livedata/mongo_driver.js)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T19:06:38.573

除了 DDP 还有 Meteor-SQL ：[https://github.com/drorm/meteor-sql](https://github.com/drorm/meteor-sql)

这使您可以使用流星很好地连接到 mysql 数据库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T03:39:40.363

这是一个用python编写的DDP客户端：[Python DDP](https://github.com/meteor/meteor/blob/master/examples/unfinished/python-ddp-client/ddp-client.py)

我将在接下来的几个小时内使用它。

喝啤酒时，我听说 DDP 的规范正在制定中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-09T00:36:06.540

Redis 支持正在开发中，但已经支持字符串和哈希：[https ://groups.google.com/forum/#!topic/meteor-core/Jl5Jt739wdA](https://groups.google.com/forum/#!topic/meteor-core/Jl5Jt739wdA)

# android - 让 adb 让三星 Galaxy Nexus 工作

> ID：10164711
> 
> 赞同：5
> 
> 时间：2012-04-15T18:17:01.313
> 
> 标签：android, adb, galaxy-nexus

我正在尝试在我全新的 Galaxy Nexus 上调试我的应用程序。
我做了以下事情：

驱动程序：安装了 Galaxy 驱动程序安装了 Galaxy Nexus 驱动程序（可以在设备管理器中看到，Galaxy 在“其他设备”下，Galaxy Nexus 在“便携式设备”下。）

我还在手机上进入设置->开发人员选项并打开USB调试。我还在我的应用程序清单中添加了 debug-mod 选项。

现在我已经在我的命令提示符中导航到目录.. ...\Android\android.sdk\platform-tools\ 我现在尝试执行命令

亚行设备。

结果是：“附加设备列表”

然后是一个空行。

我做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-13T19:08:20.923

我遇到了同样的问题，我为使其工作而采取的步骤如下：

1.  断开手机与 PC 的连接。
2.  卸载现有驱动程序（“添加或删除程序”中的“SAMSUNG USB Drivers for Mobile Phones”）。
3.  重启电脑。
4.  下载并安装驱动程序：http: [//www.samsung.com/us/support/owners/product/SCH-I515MSAVZW](http://www.samsung.com/us/support/owners/product/SCH-I515MSAVZW)（手册和下载选项卡，软件）
5.  在手机设置中打开 USB 调试。
6.  将手机连接到电脑。

您应该会看到它安装正确，并且在设备管理器中您需要看到 Android Phone -> SAMSUNG Android ADB Interface。如果您没有看到，则说明驱动程序未正确安装或手机未正确连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T11:57:41.700

您可以从这里下载官方 OEM USB 驱动程序：

[http://www.samsung.com/us/support/owners/product/SCH-I515MSAVZW](http://www.samsung.com/us/support/owners/product/SCH-I515MSAVZW)

Android 开发者网站上 OEM USB 驱动程序页面的链接会将您带到这里。安装它，一切正常！

希望能帮助到你。

# android - /data/data 总是可写的吗？

> ID：10164713
> 
> 赞同：0
> 
> 时间：2012-04-15T18:17:33.900
> 
> 标签：android, root

我正在为有根的 Android 设备编写一个应用程序。该应用程序需要将文件复制到 /data/data。

假设此分区将始终以 R/W 方式挂载是否安全，或者应用程序是否应该仔细检查挂载选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T18:22:24.990

路径 /data/data 位于内部存储中，因此永远不应卸载。

但有一件事，使用提供的方法，例如`Context.getFilesDir()`获取您的应用程序可以写入的目录的正确路径。不要假设您可以写入，`/data/data/some/directory`因为内部存储具有与之关联的权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T18:20:46.697

包含此类文件夹的内部存储器应始终可写入。但是，对于带有这些文件夹的 SD 卡，我们无法保证，因为该卡可以随时卸载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T18:20:54.380

/data/data 在有根设备上始终处于 R/W 状态。不过，我会在您的应用程序中进行根检查，以确保您不会遇到错误。

# c++ - 实现访问者模式，同时允许不同的返回类型的函数

> ID：10164714
> 
> 赞同：16
> 
> 时间：2012-04-15T18:17:47.960
> 
> 标签：c++, design-patterns, visitor-pattern

我正在尝试为具有不同返回类型（字符串、有符号整数、无符号整数等）的方法的对象结构实现访问者模式。

现在，在对象层次结构中，我添加了一个带有以下签名的 Accept 方法（使用 C++）：

```
void Accept(Visitor *); 
```

我无法弄清楚如何使用相同的接口（带有 void return type ），同时允许我的具体方法具有不同的返回类型。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-15T18:31:35.437

类型层次结构中的`Accept`方法只是一个调度程序，没有返回类型。如果您想要的是产生值的*访问，最简单的方法是将其添加为访问者状态的一部分：*

```
struct times2 : visitor {
   double value;
   times2() : value() {}
   void operator()( int x ) { value = x * 2; }
   void operator()( double x ) { value = x * 2; }
};

object o;
times2 v;
o.accept( v );
std::cout << "Result is " << v.value << std::endl; 
```

再说一次，访问者的具体细节会随着你的实现而变化，但想法是你可以将结果存储在访问者中而不是*返回*它。

# php - 使用 jquery 加载页面部分后运行 php 的问题

> ID：10164716
> 
> 赞同：0
> 
> 时间：2012-04-15T18:18:07.593
> 
> 标签：php, jquery, load

我遇到了一个问题，即我在外部 php 脚本中声明的变量没有显示在稍后通过 jquery 加载的页面的一部分中。

简化代码：

索引.php：

```
<?php
require_once "init.php";
?>
//the rest of the page is added here. 
```

初始化文件

```
<?php
$test = 'foo';
?> 
```

主页.php

```
<?php
echo $test;
?> 
```

单击 div 时，jquery 将使用 .load 将 'home.php' 添加到页面中。

问题是 $test var 没有显示，因为页面上没有使用 'home.php' 运行 'init.php'。有什么办法可以解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T18:21:25.537

我想唯一的解决方案是在 home.php 中包含 init.php

否则变量将是未定义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T18:25:00.887

当 Jquery 请求 home.php 文件 $test 时不再定义，因为 index.php 代码已经完成运行并将结果发送到客户端。 如果您希望在页面运行后将变量存储在服务器上，您可能需要查看[Sessions 。](http://www.tizag.com/phpT/phpsessions.php)

# asp.net - FluentSecurity 是否取代了 Asp.Net 会员提供者，或者它应该与它互补/一起工作？

> ID：10164717
> 
> 赞同：4
> 
> 时间：2012-04-15T18:18:08.947
> 
> 标签：asp.net, asp.net-membership, asp.net-mvc-4, asp.net-roles, fluent-security

我在一个 Asp.Net MVC4 站点上工作，我想创建一个由 Redis 提供支持的成员资格。因为我需要用户权限是动态的 - 用户可以在管理仪表板中创建新角色 - 我正在考虑按照这个 SO 问题[ASP.NET MVC3 Role and Permission Management -> With运行时权限分配](https://stackoverflow.com/questions/7286379/asp-net-mvc3-role-and-permission-management-with-runtime-permission-assignmen/7286718#7286718)。

所以，我的问题是：FluentSecurity 是取代 Asp.Net 会员系统（或基于会员提供者模式的自定义系统）还是要增强它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T18:57:38.667

Fluent Security 不进行身份验证，而只是授权。

它通过将内置的 Authorize 属性替换为它自己的属性来增强它。因此，它使用附加到线程的身份，并且该身份可以由 ASP.NET 成员资格提供程序、NT 身份验证、WIF 或您想要使用的任何其他方式放置在那里。

# jquery - 用 ! 切换功能 在jQuery中

> ID：10164718
> 
> 赞同：2
> 
> 时间：2012-04-15T18:18:11.357
> 
> 标签：jquery

我正在阅读某人的主干应用程序的源代码，并试图找出这个切换功能。我了解切换的基本原理是它只是在设置之间来回切换。在下面的示例中，它在模型上设置了收藏夹（表明它是否是收藏夹，我假设）。我也理解`!`（意思是不）的使用。但是，我不明白这个函数是如何工作的逻辑。

```
 toggle: function() {
      this.save({favorite: !this.get("favorite")});
    }, 
```

特别是，我不明白

```
!this.get("favorite") 
```

不是`this.get("favorite")`返回一个字符串，即“最喜欢的”吗？还是 this.get("favorite") 返回布尔属性？

有人可以用简单的英语解释一下这个函数的逻辑是如何在每次被调用时工作的，在两种状态之间切换。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T18:20:14.593

！是否定的。

该函数可能返回一个布尔值，然后将其结果反转。

所以在这种情况下，它会`favorite`在真假之间切换

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-15T18:21:16.427

JavaScript`!`运算符否定布尔结果：

```
!true == false
!false == true 
```

读 ！作为“不”。

因此，发布的代码片段设置`favorite`为与当前设置的相反。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T19:00:34.643

**用 '!' 说明从字符串转换为布尔值的 Javascript 代码 和 '！！'**

```
<script type="text/javascript">

var myobject = {
    getmystring : function(){
      return "enceladus";
    },
    getmyboolean : function(key){
      return true;
    },
    toggle: function() {
          document.write(this.getmystring());  //enceladus
          document.write(!this.getmystring()); //false
          document.write(!!this.getmystring()); //true
          document.write(this.getmyboolean()); //true
          document.write(!this.getmyboolean()); //false
          document.write(!!this.getmyboolean()); //true
    }
}
myobject.toggle();
</script> 
```

造成您混淆的概念是“javascript coercion”。这 ！将字符串强制转换为布尔值。关键字“this”指的是对象 myobject。this.getmystring("favorite") 返回一个字符串。!this.getmystring("favorite") 将字符串 'enceladus' 强制转换为布尔值。填充的字符串变为真，因此相反的是假。double bang 将其反转两次，回到原来的状态，这是正确的。

由于“类型强制”，Javascript 为您提供了很多可吊死自己的绳索，由于过度热心的 javascript 解释器将诸如 1.4E10 之类的东西转换为十进制 1.4，因此错误一直出现。任何东西都可以转换为任何东西，而 javascript 因这种反直觉的类型强制而受到批评。观看这个简短的视频，他以 1/3 的方式回顾了 javascript 类型强制的所有疯狂：[https ://www.destroyallsoftware.com/talks/wat](https://www.destroyallsoftware.com/talks/wat)

# windows - 在 R 中查找 windows 用户名

> ID：10164719
> 
> 赞同：39
> 
> 时间：2012-04-15T18:18:20.347
> 
> 标签：windows, r

有没有办法在 R 会话中获取当前的 Windows 用户名或 Windows 主页？

谢谢。
（对不起，如果我错过了什么，但我找不到任何东西）

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-04-15T18:32:47.290

你可以做

```
Sys.getenv("USERNAME")
Sys.getenv("HOME") 
```

如果你只是输入

```
Sys.getenv() 
```

您将看到所有可用的环境变量。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-04-16T13:40:35.517

我更喜欢这个

```
Sys.info()[["user"]] 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-15T18:26:09.263

如果您知道如何在系统控制台上执行此操作，答案通常是：

```
system("...that_string...") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-03-29T23:53:13.187

如果您正在寻找当前用户主目录的路径，请尝试：

```
> dirname("~")
[1] "C:/Users/username 
```

# javascript - 使用 API（带有两个 jQuery 版本和跨域的页面）

> ID：10164721
> 
> 赞同：2
> 
> 时间：2012-04-15T18:18:31.703
> 
> 标签：javascript, jquery, api, cross-domain

我还不是经验丰富的开发人员，所以如果我听起来太笨拙或不够清晰，请原谅我。我会尽量说清楚。如果您的见解缺少某些信息，请告诉我，我会尽快跟进。

所以，

我工作的公司有两种运行不同 jQuery 版本（1.2 和 1.4）的页面。此外，我们通过一些不同的域运行该站点，例如：company.com、support.company.com、contact.company.com。

company.com 在 jQuery 1.4 中运行（我们只能使用“$”访问 jQuery），另一个在 1.2 中运行（其中 jQuery 是“$j”或“jQuery”）。

我们有一个 API，它可以从产品中检索很多信息，比如价格、图片、描述等。我们可以在 jQuery 1.4 版本的页面上调用这个 API。其他域我们无法通过此 API 获取任何信息。

我们只能在这里处理 javascript 和 jquery 代码以使其工作。我们无权访问后端。

所以我的问题是：我应该用什么方法来使 API 在页面上的两种环境中工作？我可以覆盖最旧的版本吗？这是一个跨域问题吗？我在这里寻找什么思路来解决这个问题？

我真的希望我很清楚。如果没有，请告诉我，我会尽力澄清。:)

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T18:38:18.643

据我所知，jQuery 在加载两次时会覆盖自身，因为它们都使用相同的`$`变量。[有一种方法可以让一个人四处走动](http://web.enavu.com/daily-tip/using-multiple-versions-of-jquery-on-the-same-page/)并分配到另一个命名空间，而另一个保持原样。

我认为 jQuery 确实与旧 API 有一些向后兼容性。只需尝试检查您网站的 API 以验证这些方法是否仍然存在。最近有些方法已被弃用。否则，您只需要使用最新的 jQuery 重新构建您的 API。但这不应该那么难，基本方法没有太大变化。您甚至可以使用最新的方法（那些在 1.4 之前尚不存在的方法）获得改进的性能

并告诉高级管理层，他们应该考虑比创建两个 API 更好的策略。不将 API 规划为可维护和可扩展的影响开始显现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T18:45:28.263

尝试：

```
<!-- load and register jQuery 1.2 -->
<script src='jquery-1.2.js'></script>
<script>
    var jq12 = jQuery.noConflict();
</script>

<!-- load and register jQuery 1.4 -->
<script src='jquery-1.4.js'></script>
<script>
    var jq14 = jQuery.noConflict();
</script> 
```

当您需要使用`jq12`or`jq14`而不是使用`$`or的 jQuery 调用时`jQuery`。

```
jq12('element').click(function() {
    // Do things
})

jq14('element').click(function() {
    // Do things
}) 
```

# mysql - 任何改进 MySQL 查询的技巧？

> ID：10164722
> 
> 赞同：1
> 
> 时间：2012-04-15T18:18:38.160
> 
> 标签：mysql, performance, indexing, query-optimization

我有一个 500K 行的表，如下所示：[http ://d.pr/njFJ](http://d.pr/njFJ)

![在此处输入图像描述](../Images/8c1e5d3a2d9b8f71d749bcfdc51084a0.png)

像这样的查询有时通常需要超过 2 秒：

```
SELECT * 
FROM `alerts` 
WHERE `a_timestamp` > '2012-04-15' AND `a_timestamp` <= '2012-04-16'  
   AND a_company_id IN(64,65,69,70,71,72,73,74,75,76,83,86,106,108,109,116,148) ORDER BY a_id DESC 
```

这是解释查询：[http ://d.pr/z20b](http://d.pr/z20b)

![在此处输入图像描述](../Images/285d776ea5aeb3aeeb66f01c16995440.png)

有人可以指出我做错了什么吗？也许我错过了一些东西。这么小的桌子要花那么多时间吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T18:46:57.513

正如 KingFisher 提到的，去掉该`IN`子句（这通常是查询性能的瓶颈）并将其替换为 a `JOIN`，但不要使用临时表，这就是你的做法：

```
SELECT alerts.* FROM (
    (SELECT 64 AS id) UNION (SELECT 65) UNION (SELECT 69) UNION (SELECT 70)
    UNION (SELECT 71) UNION (SELECT 72) UNION (SELECT 73) UNION ...
) AS ids
INNER JOIN alerts ON (ids.id = alerts.a_company_id)
WHERE alerts.a_timestamp > '2012-04-15' AND alerts.a_timestamp <= '2012-04-16'
ORDER BY ids.id DESC 
```

并确保您在`a_company_id`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T14:51:44.953

尝试在 (a_company_id, a_timestamp) 上创建索引...与 type_ts_company 索引相反的顺序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T18:36:02.700

尽量去掉`IN`子句。它会扫描整个表中的每个值， `IN clause`从而导致性能下降。

您可以使用临时表来存储 id，并在临时表中使用 JOIN 和 id 而不是 using`in`子句，

# windows - Windows 注册表，如何添加您的本机程序以进行启动执行？

> ID：10164724
> 
> 赞同：0
> 
> 时间：2012-04-15T18:18:42.653
> 
> 标签：windows, registry, native, ntdll

我已经为 Windows 完成了本机程序。

（其中，我已经编译`#pragma comment(linker, "/SUBSYSTEM:NATIVE"`））。

我想将我的程序添加到自动执行列表中，我该怎么做？

我的确切问题是：

1）。我怎么能在 Windows 注册表中做到这一点（我已经用谷歌搜索了 BootExecute/SetupExecute 表，但安装程序是空的，并且 BootExecute 只有：*autocheck autochk **）。所以我对空表感到困惑（原因，如果它是空的，那么 Windows 中另一个自动执行程序在哪里，ntdll.dll 会加载哪个？）

2）。可执行程序的版本是否重要：*对于 32/64 位系统*？

我把它放在*%windir%\system32*中，但也有*%windir%\WOW64*文件夹。

我应该在注册表中突出显示这个细节，还是 Windows 从两个文件夹中加载每个驱动程序，然后在 taskmgr 中简单地将它们突出显示为***32**或 64 位程序？

3）。有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T02:42:02.527

1）您需要将其放置到 BootExecute 注册表值。这是一个多字符串值，您需要保留已经存在的任何字符串（通常只有“autocheck autochk *”），并且只需附加您的程序名称而不带扩展名。

2）您应该为 32 位操作系统编译 32 位二进制文​​件，为 64 位操作系统编译 64 位二进制文​​件。二进制文件应放入 %windir%\system32

3）据我所知，这是唯一的方法

PS - 例如安装任何具有 Boot Defrag 功能的文件系统或注册表碎片整理程序，启用它，并查看它如何修改 BootExecute。

# xcode - 未安装 Mac 应用程序包标识

> ID：10164727
> 
> 赞同：0
> 
> 时间：2012-04-15T18:19:08.783
> 
> 标签：xcode, app-store, osx-lion

我有一个尝试提交到 App Store 的 Mac 应用程序。当我尝试提交应用程序时，我收到了所附屏幕截图中显示的错误。我从这台确切的 Mac 创建了证书请求，并使用 3rd Party Mac App 证书在这台 Mac 上存档了该应用程序。这一切都很顺利。但是当我去提交应用程序时，我无法通过选择代码签名身份，因为它说这个 Mac 上没有安装包身份。我不确定这是怎么可能的，因为我从这台 Mac 生成了所有证书并验证它们都已安装且有效。我之前已经提交了这个 Mac 应用程序，没有问题。有没有其他人看过这个？我正在使用 XCode 4.3.2。

![代码签名身份错误](../Images/415970bf56b459160987d990e8b11300.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T20:52:27.147

本周早些时候出现了同样的错误。问题在于创建分发配置文件。即使证书门户中的“安装程序”和“App Store”选项是复选框，请确保仅选中两者之一并生成您需要的配置文件。选中“App Store”选项而不是同时选中两者并重新生成配置文件为我们解决了这个问题。

# javascript - 日期选择器在 Jquery UI / Jquery Easy UI 中选择特定范围的日期

> ID：10164728
> 
> 赞同：1
> 
> 时间：2012-04-15T18:19:09.717
> 
> 标签：javascript, jquery, jquery-ui, jquery-easyui

我目前正在使用 jquery easy ui 日期选择器。这是 [文档](http://www.jeasyui.com/documentation/index.php#)，只有几个选项，因此您只需一分钟即可查看。这很好，但我**需要选择从明天开始到 30 天内的日期范围**

例如，如果今天是 16/4/2012，那么范围应该是**17/4/2012 到 16/5/2012**，我发现很难开始，因为我不知道如何使用 jquery 获取当前日期和设置范围，在我阅读该文档后禁用可选项目。

谢谢你。

另外，如果 jquery easyui 不是一个好的选择，有什么建议吗？我也在使用 jquery ui。如果使用其中任何一个回答，将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T18:41:59.000

内置的[jQuery UI Datepicker](http://jqueryui.com/demos/datepicker/)具有您可以设置的选项`minDate`。`maxDate`

```
<input id="test" type="text" /> 
```

以下是根据您的要求进行设置的方法：

```
$('#test').datepicker({
    minDate: '+1d', // Minimum date of 1 day from now (tomorrow)
    maxDate: '+30d' // Maximum date of 30 days from now (or '+1m' for 1 month)
}); 
```

这将只允许选择`minDate`和之间的天数`maxDate`；所有其他人将被禁用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T18:45:14.713

使用 jQuery UI，您可以使用`minDate`and`maxDate`语法。`+1`和`+30`将分别是明天和 30 天内的日期。

相应地设置`options`。

```
$(function() {
    $( "#datepicker" ).datepicker({
        minDate: +1,
        maxDate: +30
    });
});​ 
```

您可以[在此处查看一个工作示例](http://jsfiddle.net/8vQmq/)。

# qt - QtCreator：包含子项目的外观（.pri）

> ID：10164729
> 
> 赞同：2
> 
> 时间：2012-04-15T18:19:28.060
> 
> 标签：qt, qt-creator

我在 QtCreator 中有两个项目，它们都在另一个目录中包含两个 .pri 文件：

```
[common]
    * common.pri
    * database.pri
    * ...
[projects]
    [project1]
        * project1.pro
        * ...
    [project2]
        * project2.pro
        * ... 
```

让我们专注于一个 .pro 文件。它包含两个包括：

```
COMMONPATH = ../../common

# INCLUDE COMMON FILES
!include($${COMMONPATH}/common.pri) {
    error(Failed to include common/common.pri)
}

# INCLUDE DATABASE FILES
!include($${COMMONPATH}/database.pri) {
    error(Failed to include common/database.pri)
} 
```

保存我的 .pro 文件后，QtCreator 没有注意到项目管理器中的两个 .pri 文件。

一段时间后（我不记得我做了什么）**QtCreator 显示了两个 .pri 文件之一**，如屏幕截图所示：

![专案经理](../Images/b9cc832a805d70e5a555936ff5572760.png)

我现在卡住了，因为我不知道**为什么 QtCreator 不显示第二个 .pri 文件**的方式与显示第一个文件的方式相同，也不知道为什么它只在一段时间后才显示第一个文件......

我试图用它的值替换 $${COMMONPATH} 变量，删除错误处理，多次重新启动 QtCreator，多次从菜单运行 qmake，...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T10:45:28.560

好吧，这很奇怪。我刚刚弄清楚为什么项目管理器不显示第二个包含的 .pri 文件：

该文件包含一个`error(...)`语句，该语句本身包含一个`'`字符，该字符由 正确解释`qmake`，但由项目经理错误解释！后者显然解释`'`为字符串附件令牌或类似的东西。

来自 common/database.pri：

```
!include(<anotherPriFile>) {
    error(Can't find file for inclusion!)
} 
```

正确版本（已删除`'`）：

```
!include(<anotherPriFile>) {
    error(Cannot find file for inclusion!)
} 
```

我正在使用这个 QtCreator 版本：

```
Qt Creator 2.1.0 based on Qt 4.7.2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T21:14:46.477

Qt Creator 使用另一个扩展名为 的项目配置文件`.pro.user`，将其移至其他位置，然后再次尝试打开该项目。

# c# - 如何加快我的 A* 寻路？

> ID：10164733
> 
> 赞同：-1
> 
> 时间：2012-04-15T18:19:35.773
> 
> 标签：c#, windows-phone-7, xna, path-finding

当没有障碍物移动或从障碍物的顶部移动到障碍物的侧面时，我的寻路工作正常，但是当它需要找到从障碍物顶部到底部的路径时，它太慢了。

我相当确定这是我对每个循环进行排序或通过封闭集循环的方式，但我不确定如何避免这种情况，因为 Windows phone 7 上没有 SortedLists

```
//This Vivid Destination means it doesn't have to find the exact location 
//which is helpful as it is continuous environment  
Rectangle vividDestination = new Rectangle((int)character.destination.X - 10, (int)character.destination.Y - 10, 20, 20);

while (!vividDestination.Contains(Maths.vectorToPoint(OpenNodes[0].position)))
{
    Node Current = OpenNodes[0];
    OpenNodes.RemoveAt(0);
    ClosedNodes.Add(Current);
    Current.calculateNeightbours();

    foreach (Node neighbour in Current.neighbours)
    {
        neighbour.parents = Current.parents + 1;
        //The cost of the node is the amount of parent nodes + the distance to destination
        neighbour.cost = calculateCost(neighbour.position, character.destination, neighbour.parents);

        for (int i = 0; i < OpenNodes.Count; i++)
        {
            //Round Vector rounds the floats in the Vector to the nearest integer
            if (Maths.roundVector(OpenNodes[i].position) == Maths.roundVector(neighbour.position) && OpenNodes[i].parents < neighbour.parents)
            {
                break;
            }
            else
            {
                OpenNodes.RemoveAt(i);
                OpenNodes.Add(neighbour);
                i--;
                break;
            }
        }

        bool closedNode = false;
        for (int i = 0; i < ClosedNodes.Count; i++)
        {
            if (Maths.roundVector(ClosedNodes[i].position) == Maths.roundVector(neighbour.position))
            {
                closedNode = true;
                break;
            }
        }

        if (!closedNode)
        {
            OpenNodes.Add(neighbour);
        }
    }

    OpenNodes = OpenNodes.OrderBy(item => item.cost).ToList();
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-15T18:36:26.967

你正在做的事情非常低效。列表的排序需要 n*log(n) 时间，并且您为图中的每个顶点对列表进行一次排序。这导致算法需要 V^2*log(V) 时间，其中 V 是顶点数。如果您只是保留一个未排序的列表，那么您可以通过遍历所有项目并保持迄今为止最低的项目的计数来提取线性时间的最小值。在这种情况下，时间变为 V^2。这只是一个微小的改进。当然，如果您使用适当的优先级队列（例如基于二[叉堆的队列](http://en.wikipedia.org/wiki/Binary_heap)) 那么算法将运行得更快，因为那时操作只花费 log(n)。编写自己的二进制堆并不太难，如果平台本身不支持二进制堆，我强烈建议您这样做。在这种情况下，插入和找到最小值只需要 log(n) 时间，从而产生 E log V 时间（其中 E 是边数，在平面图中与 V 成正比）。

# ruby-on-rails - Facebook 照片：相册中的孤儿照片和照片

> ID：10164734
> 
> 赞同：0
> 
> 时间：2012-04-15T18:19:43.650
> 
> 标签：ruby-on-rails, facebook, facebook-graph-api, mongodb

我正在开发一个应用程序（Rails 3.2，Mongoid），它从用户那里获取所有（我的意思是“很多”）照片。首先，我们获取相册 ( `<userid>/albums`)，然后，对于每个相册，我们拍摄其中的照片 ( `<albumid>/photos`)，然后是用户照片 ( `<userid>/photos`)。然后我们对每张照片进行一些操作，并将它们保存到数据库中。

现在，作为安全网，对于每张“孤儿”照片，我会检查该照片是否已经存在，以避免重复。当前检查是通过`exists`查询在数据库上完成的。但是，它会进行大量的数据库查询，这是不可接受的。我尝试在服务器端进行，使用数组来跟踪照片，但速度较慢（`Array#select`如果我的记忆正确，我会使用）。

所以，有两个问题：1/这个“安全网”有用吗，还是我可以理所当然地认为孤儿照片不能重复？我想是的，但我认为检查是有原因的。2/如果我必须检查以确保数据库中没有重复项，我应该如何做才能提高效率？

**编辑**

好的，看起来确实可以重复，所以问题 1/ 已解决。现在大约 2：是否可以从检索到的照片字段中“猜测”它是否属于相册，即使没有类似的字段`album_id`？如“如果照片不是来自`user`并且`user`被标记”-> orphan ？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T19:24:45.677

**是的你可以 ：-）**

来自文档：[照片 FQL 表](https://developers.facebook.com/docs/reference/fql/photo/)

对于 ID 为 XXXXXX 的给定照片：

```
select owner,album_object_id from photo where object_id=XXXXXX 
```

如果你没有得到任何东西，那意味着你查询了一张不在你的照片中的照片

`access token`到达（查询其他人的照片）。

您需要`user_photos`访问用户照片或`friends_photos`访问用户朋友照片之一的权限。

否则，您应该拥有该照片的相册 ID`album_object_id`

确保在 Graph API Explorer 中单击**Get Access Token**按钮并`user_photos`在测试查询时检查权限。

附言

我已经在各种照片上对此进行了测试，以确保所有测试都回来了`positive` **:-)**

在 Graph API Explorer 中进行测试的链接：

```
https://developers.facebook.com/tools/explorer/?method=GET&path=fql%3Fq%3Dselect%20owner%2Calbum_object_id%20from%20photo%20where%20object_id%3DXXXXXXXX 
```

（不要忘记用照片ID更改XXXXXXXX）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T19:23:34.323

好的 - 我们会弄脏手并尝试找到孤儿照片的相册。

> **免责声明**，这些方法可能会受到 Facebook 可能未公布的更改的影响。
> IE - 我们将利用在 Graph API 中毫无意义的 URI 结构。Facebook 可能会更改这些 URI，但保持 API 不变，因此无需提醒开发人员任何更改。

如果您对 进行图形 API 调用`/me/PHOTO_ID`，您将收到类似于以下内容的响应：

```
{
  "id": "101...", 
  "from": {
    "name": "Lix", 
    "id": "101..."
  }, 
  "name": "Carrot cake chocolate cake.", 
  "picture": "https://fbcdn-photos...jpg", 
  ...
  "link": "https://www.facebook.com/photo.php?fbid=101...&set=a.105...&type=1", 
  ...
} 
```

所以我已经剥离了这个回复，以便我们可以具体讨论该`link`属性。如您所见，它不是与 API 有任何关系的链接，它是一种指向Facebook 内图像的*永久链接。*如果你导航到那个 URL，你会得到[类似这样](https://www.facebook.com/photo.php?fbid=376995716728&set=a.376995711728.190761.20531316728&type=3)的东西。经典（无灯箱风格）照片视图。

让我们更仔细地看一下`link`参数，这次用一个真实的例子 -

`https://www.facebook.com/photo.php?fbid=376995716728&set=a.376995711728.190761.20531316728&type=3`

我们可以看到它有 3 个参数：

1.  `fbid`
2.  `set`
3.  `type`

听起来很荒谬（而且非常荒谬:)，`fbid`参数实际上是 photo_id。参数的`set`格式为`a.{NUM}.{NUM}.{NUM}`. 后面的第一批数字`a.`是那张照片的album_id。

现在您看到了该方法，您可以看出它随时容易更改。Facebook 一直在向他们的 UI 推送更新，而无需通过 90 天的重大更改来发布它..yadda..yadda..yadda...它只是他们用于网站内部导航的 URL。所以，小心...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T19:09:21.110

不确定您的问题中有多少涉及检测相同图像。如果这确实是您要解决的问题的一部分，那么一种蛮力方法可能是：

```
Examine image dimensions and filesize.  If no other image has these same properties(height, width, filesize), then the image cannot be a duplicate.  

If two images may be duplicates, perform pixel-by-pixel digital subtraction.  If result is zero, then images are duplicates. 
```

根据您的数据集，这可能是“不太难实现”+“不太占用处理器”+“将始终返回准确结果”的良好组合

存在许多其他更优雅的方法。一些讨论可以在这里看到：
[图像比较 - 快速算法](https://stackoverflow.com/questions/843972/image-comparison-fast-algorithm/844113#844113)
和这里：
[在不同分辨率下检测图像相等性](https://stackoverflow.com/questions/1705790/detecting-image-equality-at-different-resolutions)

如果您正在讨论的问题更多的是“我如何确定给定图像的原始 PATH 或 FILE_LOCATION，那么我想您必须在导入每张照片时知道其来源。

# java - spring mvc 使用 json 而不是 ${variable}

> ID：10164736
> 
> 赞同：0
> 
> 时间：2012-04-15T18:20:04.087
> 
> 标签：java, ajax, spring-mvc

基本上，我目前有一个正在处理的 MVC 项目，我可以使用以下类将值从服务器传递到客户端......

```
package org.assessme.com;

import java.text.DateFormat;
import java.util.Date;
import java.util.Locale;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;

@Controller
public class UserManagementController {

private static final Logger logger = LoggerFactory.getLogger(HomeController.class);

    /**
     * Simply selects the home view to render by returning its name.
     */
    @RequestMapping(value = "/userManagement", method = RequestMethod.GET)
    public Object home(Locale locale, Model model) {
        logger.info("User management view controller loaded...");

        Date date = new Date();
        DateFormat dateFormat = DateFormat.getDateTimeInstance(DateFormat.LONG, DateFormat.LONG, locale);

        String formattedDate = dateFormat.format(date);

        model.addAttribute("serverTime", formattedDate );
        return "userManagement";
    }
} 
```

然后可以使用符号访问它...

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ page session="false" %>
<html>
<head>
    <title>Home</title>
</head>
<body>
<h1>
    Hello world!  
</h1>

<P>  The time on the server is ${serverTime}. </P>
</body>
</html> 
```

我的问题是，我将如何更改这个项目，以便我可以使用 JSON 作为 Ajax 请求，所以说用户点击了一个按钮......

```
function userManage(){
    $('div.mainBody').load('userManagement');
} 
```

我希望 userManagement 返回视图 userManagement （就像现在一样），而且还返回用户的 json 响应。

任何人都可以给我任何建议吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T19:07:03.947

在[这篇文章](http://blog.springsource.com/2010/01/25/ajax-simplifications-in-spring-3-0/)中，作者解释了如何使用 Spring 来实现这一点。

在你的控制器中，你应该有类似下面的东西来返回一个 JSON。

```
@RequestMapping(value="/availability", method=RequestMethod.GET)
public @ResponseBody AvailabilityStatus getAvailability(@RequestParam String name) {
    for (Account a : accounts.values()) {
        if (a.getName().equals(name)) {
            return AvailabilityStatus.notAvailable(name);
        }
    }
    return AvailabilityStatus.available();
} 
```

在您看来，您应该使用 JQuery 编写请求。

```
$(document).ready(function() {
    // check name availability on focus lost
    $('#name').blur(function() {
        checkAvailability();
    });
});

function checkAvailability() {
    $.getJSON("account/availability", { name: $('#name').val() }, function(availability) {
        if (availability.available) {
            fieldValidated("name", { valid : true });
        } else {
            fieldValidated("name", { valid : false,
                message : $('#name').val() + " is not available, try " + availability.suggestions });
        }
    });
} 
```

编辑：您还应该检查[这个 answear](https://stackoverflow.com/a/4204825/1334930)。如果您将 Jackson jar 添加到您的库中，Spring 将开始将您的 POJOS 解析为 JSON。

# ruby - 使用 JRUBY 处理多个 JSON 请求

> ID：10164737
> 
> 赞同：2
> 
> 时间：2012-04-15T18:20:09.680
> 
> 标签：ruby, jruby

我有一个执行此操作的脚本：

```
require 'rubygems'
require 'rest-client'
require 'json'

url = foo
request = bar

response = RestClient.post(url,request, :content_type => :json, :accept => :json) 
```

我正在尝试测试我正在使用的 API 的可靠性，并希望同时向它发送四个请求。我一直在尝试使用四个终端窗口来做到这一点。但这有点棘手 - 所以必须有更好的方法来做到这一点。

这可以通过线程来完成吗？如果有怎么办？并且是线程最好的方法。并非所有请求都是相同的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T18:23:53.673

有了[threach](https://github.com/billdueber/threach)，你可以写

```
requests.threach.map {|req| ... } 
```

它应该按预期工作。

# android - 获取没有数组名称的 JSONArray？

> ID：10164741
> 
> 赞同：75
> 
> 时间：2012-04-15T18:20:37.140
> 
> 标签：android, arrays, json

我是 JSON 新手，正在尝试本教程： http: [//p-xr.com/android-tutorial-how-to-parse-read-json-data-into-a-android-listview/#comments](http://p-xr.com/android-tutorial-how-to-parse-read-json-data-into-a-android-listview/#comments)

我是 JSON、C 语言、Java 和 Android 的新手，但我正在学习。本教程使用我所谓的命名数组，但我将在我的 android 项目中使用的所有 JSON 都将使用没有命名数组的简单表行。我正在使用的 JSON 示例和教程中的地震 json 示例如下。

本教程遍历地震数组并使用以下代码转换为 JAVA hashmap 列表：

```
JSONArray  earthquakes = json.getJSONArray("earthquakes");
    for(int i=0;i<earthquakes.length();i++){                        
        HashMap<String, String> map = new HashMap<String, String>();    
        JSONObject e = earthquakes.getJSONObject(i);

        map.put("id",  String.valueOf(i));
        map.put("name", "Earthquake name:" + e.getString("eqid"));
        map.put("magnitude", "Magnitude: " +  e.getString("magnitude"));
        mylist.add(map);            
} 
```

`json.getJSONArray("")`我的问题是，如果我的 JSON 如下所示，我该如何使用？我可以转换其余的代码，我只需要知道如何使用`getJSONArray("strJsonArrayName")`如果我没有`strJsonArrayName`.

我的 JSON（未命名数组）

```
[
  {
    "cnt":1,
    "name":"American",
    "pk":7
  },
  {
    "cnt":2,
    "name":"Celebrities",
    "pk":3
  },
  {
    "cnt":1,
    "name":"Female",
    "pk":2
  },
  {
    "cnt":1,
    "name":"Language",
    "pk":8
  },
  {
    "cnt":1,
    "name":"Male",
    "pk":1
  },
  {
    "cnt":1,
    "name":"Region",
    "pk":9
  }
] 
```

教程的 JSON（命名数组）

```
{
  "earthquakes":[
    {
      "eqid":"c0001xgp",
      "magnitude":8.8,
      "lng":142.369,
      "src":"us",
      "datetime":"2011-03-11 04:46:23",
      "depth":24.4,
      "lat":38.322
    },
    {
      "eqid":"c000905e",
      "magnitude":8.6,
      "lng":93.0632,
      "src":"us",
      "datetime":"2012-04-11 06:38:37",
      "depth":22.9,
      "lat":2.311
    },
    {
      "eqid":"2007hear",
      "magnitude":8.4,
      "lng":101.3815,
      "src":"us",
      "datetime":"2007-09-12 09:10:26",
      "depth":30,
      "lat":-4.5172
    },
    {
      "eqid":"c00090da",
      "magnitude":8.2,
      "lng":92.4522,
      "src":"us",
      "datetime":"2012-04-11 08:43:09",
      "depth":16.4,
      "lat":0.7731
    },
    {
      "eqid":"2007aqbk",
      "magnitude":8,
      "lng":156.9567,
      "src":"us",
      "datetime":"2007-04-01 18:39:56",
      "depth":10,
      "lat":-8.4528
    },
    {
      "eqid":"2007hec6",
      "magnitude":7.8,
      "lng":100.9638,
      "src":"us",
      "datetime":"2007-09-12 21:49:01",
      "depth":10,
      "lat":-2.5265
    },
    {
      "eqid":"a00043nx",
      "magnitude":7.7,
      "lng":100.1139,
      "src":"us",
      "datetime":"2010-10-25 12:42:22",
      "depth":20.6,
      "lat":-3.4841
    },
    {
      "eqid":"2010utc5",
      "magnitude":7.7,
      "lng":97.1315,
      "src":"us",
      "datetime":"2010-04-06 20:15:02",
      "depth":31,
      "lat":2.3602
    },
    {
      "eqid":"2009mebz",
      "magnitude":7.6,
      "lng":99.9606,
      "src":"us",
      "datetime":"2009-09-30 08:16:09",
      "depth":80,
      "lat":-0.7889
    },
    {
      "eqid":"2009kdb2",
      "magnitude":7.6,
      "lng":92.9226,
      "src":"us",
      "datetime":"2009-08-10 17:55:39",
      "depth":33.1,
      "lat":14.0129
    }
  ]
} 
```

在本教程中，根据 @MДΓΓ БДLL 和 @Cody Caughlan 的回答，我能够将 JSONFunctions.getJSONFromURL 重新格式化为 JSONArray 而不是 JSONObject。这是我修改后的工作代码，谢谢！

```
public class JSONfunctions {
public static JSONArray getJSONfromURL(String url){
    InputStream is = null;
    String result = "";
    JSONArray jArray = null;

            HttpClient httpclient = new DefaultHttpClient();
            HttpGet httpget = new HttpGet(url);
            HttpResponse response = httpclient.execute(httpget);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();

            BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
            }
            is.close();
            result=sb.toString();

        jArray = new JSONArray(result);            
    return jArray;
}
} 
```

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2012-04-15T18:25:14.650

您根本不需要调用`json.getJSONArray()`，因为您正在使用的 JSON 已经*是*一个数组。所以，不要构造 ; 的实例`JSONObject`。使用`JSONArray`. 这应该足够了：

```
// ...
JSONArray json = new JSONArray(result);
// ...

for(int i=0;i<json.length();i++){                        
    HashMap<String, String> map = new HashMap<String, String>();    
    JSONObject e = json.getJSONObject(i);

    map.put("id",  String.valueOf(i));
    map.put("name", "Earthquake name:" + e.getString("eqid"));
    map.put("magnitude", "Magnitude: " +  e.getString("magnitude"));
    mylist.add(map);            
} 
```

您不能使用与教程中完全相同的方法，因为您正在处理的 JSON 需要`JSONArray`在根目录中解析为 a，而不是`JSONObject`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-15T18:24:05.930

`JSONArray`有一个构造函数，它接受一个`String`源（假定是一个数组）。

所以像这样

```
JSONArray array = new JSONArray(yourJSONArrayAsString); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-15T10:39:46.370

我假设一个命名的 JSONArray 是一个 JSONObject，并从服务器访问数据以填充一个 Android GridView。值得我的方法是：

```
private String[] fillTable( JSONObject jsonObject ) {
   String[] dummyData = new String[] {"1", "2", "3", "4", "5", "6", "7","1", "2", "3", "4", "5", "6", "7","1", "2", "3", "4", "5", "6", "7", };
  if( jsonObject != null ) {
      ArrayList<String> data = new ArrayList<String>();
      try {
          // jsonArray looks like { "everything" : [{}, {},] }
          JSONArray jsonArray = jsonObject.getJSONArray( "everything" );
          int number = jsonArray.length(); //How many rows have got from the database?
          Log.i( Constants.INFORMATION, "Number of ows returned:  " + Integer.toString( number ) );
                  // Array elements look like this
          //{"success":1,"error":0,"name":"English One","owner":"Tutor","description":"Initial Alert","posted":"2013-08-09 15:35:40"}
          for( int element = 0; element < number; element++ ) { //visit each element
             JSONObject jsonObject_local = jsonArray.getJSONObject( element );
             //  Overkill on the error/success checking
             Log.e("JSON SUCCESS", Integer.toString( jsonObject_local.getInt(Constants.KEY_SUCCESS) ) );
             Log.e("JSON ERROR", Integer.toString( jsonObject_local.getInt(Constants.KEY_ERROR) ) );
                if ( jsonObject_local.getInt( Constants.KEY_SUCCESS) == Constants.JSON_SUCCESS ) {
                   String name = jsonObject_local.getString( Constants.KEY_NAME );
                   data.add( name );
                   String owner = jsonObject_local.getString( Constants.KEY_OWNER );
                   data.add( owner );
                   String description = jsonObject_local.getString( Constants.KEY_DESCRIPTION );
                   Log.i( "DESCRIPTION", description );
                   data.add( description ); 
                   String date = jsonObject_local.getString( Constants.KEY_DATE );
                   data.add( date );
                }
                else {
                    for( int i = 0; i < 4; i++ ) {
                        data.add( "ERROR" );
                    }
                }
          }
  }  //JSON object is null
  catch ( JSONException jsone) {
      Log.e( "JSON EXCEPTION", jsone.getMessage() );
  }
      dummyData = data.toArray( dummyData );
  }
  return dummyData; 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-02T15:14:25.137

这是19API lvl下的解决方案：

*   首先。制作一个 Gson 对象。-->`Gson gson = new Gson();`

*   第二步是使用 StringRequest（而不是 JsonObjectRequest）将您的 jsonObj 作为字符串

*   获取 JsonArray 的最后一步...

`YoursObjArray[] yoursObjArray = gson.fromJson(response, YoursObjArray[].class);`

# php - 如何从推文中删除所有内容，但使用 php 删除纯文本？

> ID：10164752
> 
> 赞同：2
> 
> 时间：2012-04-15T18:22:03.917
> 
> 标签：php, regex, twitter, plaintext, tweets

我正在尝试从推文中删除 url、提及、主题标签，以仅获取实际文本，而不是：

`Hello this is a test @someone #tag1 #tag2 http://bit.ly/123`

它只是：

`Hello this is a test`

我相信我必须使用某种正则表达式，但我对此很糟糕，有人能指出我正确的方向吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T18:40:19.397

preg_replace() 将完成这项工作

```
$str = "Hello this is a test @someone #tag1 #tag2 http://bit.ly/123";
$str = preg_replace('/#([\w-]+)/i', '', $str); // @someone
$str = preg_replace('/@([\w-]+)/i', '', $str); // #tag
$str = preg_replace('/(http|https|ftp|ftps)\:\/\/[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,3}(\/\S*)?/', '', $str); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-15T18:42:04.737

以下是如何在三个正则表达式中执行此操作（您可能可以将所有三个合并为一个，但我们不要去那里！）

```
$str = preg_replace('/(^|\b)@\S*($|\b)/', '', $str); // remove @someone
$str = preg_replace('/(^|\b)#\S*($|\b)/', '', $str); // remove hashtags

// taken from http://daringfireball.net/2010/07/improved_regex_for_matching_urls
$urlRegex = '~(?i)\b((?:[a-z][\w-]+:(?:/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:\'".,<>?«»“”‘’]))~';
$str = preg_replace($urlRegex, '', $str); // remove urls 
```

# plist - plist 和资源文件夹丢失

> ID：10164753
> 
> 赞同：0
> 
> 时间：2012-04-15T18:22:13.793
> 
> 标签：plist

我想将我的应用程序的一些基本数据存储在 .plist 文件中；许多教程建议使用以下命令创建一个新的 plist 文件：ADD -> NEW FILE 并将其存储在 Resources 文件夹中。我的应用程序中没有资源文件....我可以在哪里存储它？非常感谢，朱塞佩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T09:50:44.403

我可以将文件放在项目中我想要的任何位置！代码将通过搜索 pat 找到它 :)

# android - 强制关闭应用程序

> ID：10164755
> 
> 赞同：-1
> 
> 时间：2012-04-15T18:22:20.340
> 
> 标签：android, json, jsp, android-layout

当我单击登录按钮时，我的应用程序强制关闭...为什么会这样？？？解决方案是什么？

我的 Login_Menu 活动如下：-

```
package com.campuspro.start;

import java.util.ArrayList;
import java.util.List;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.HttpClient;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicNameValuePair;
import org.apache.http.util.EntityUtils;
import org.json.JSONException;
import org.json.JSONObject;

 import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class Login_Menu extends Activity {

EditText usname;
EditText pass;
TextView tv;
HttpClient client;
HttpPost post;
@Override
protected void onCreate(Bundle savedInstanceState) {
// TODO Auto-generated method stub
super.onCreate(savedInstanceState);
setContentView(R.layout.login_lay);
 tv=(TextView) findViewById(R.id.login_stat_tv);
 usname=(EditText)findViewById(R.id.uname);
 pass=(EditText)findViewById(R.id.pass);
Button login=(Button)findViewById(R.id.login_but);
Button cancel=(Button)findViewById(R.id.cancel_but);

client = new DefaultHttpClient();
String url="http://10.0.2.2:7001/proj/login.jsp";
post = new HttpPost(url);
login.setOnClickListener(new View.OnClickListener() {

    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        new login().execute("");
    }
});

cancel.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
        // TODO Auto-generated method stub
        usname.getText().clear();
        pass.getText().clear();
    }
});

 }

 private class login extends AsyncTask<String, Void, JSONObject>{
 ProgressDialog dialog = ProgressDialog.show(Login_Menu.this, "", "Authenticating,    Please wait...");

  @Override
  protected JSONObject doInBackground(String... params) {
    // TODO Auto-generated method stub
    Log.i("thread", "Doing Something...");
   //authentication operation
try{

    List<NameValuePair> pairs = new ArrayList<NameValuePair>();   
    pairs.add(new BasicNameValuePair("username",usname.getText().toString()));   
    pairs.add(new BasicNameValuePair("password",pass.getText().toString()));   
    post.setEntity(new UrlEncodedFormEntity(pairs));   
    HttpResponse response = client.execute(post);
    int status=response.getStatusLine().getStatusCode();

    if(status == 200)
    {
        HttpEntity e=response.getEntity();
        String data=EntityUtils.toString(e);
        JSONObject last=new JSONObject(data);
        return last;

    }

}

 catch(Exception e)
 {
     e.printStackTrace();   

 }

    return null;
 }

 protected void onPreExecute(){
    //dialog.dismiss();
    Log.i("thread", "Started...");
    dialog.show();
 }
 protected void onPostExecute(JSONObject result){
    Log.i("thread", "Done...");
    String name;
    try {
        name = result.getString("status");

    if(dialog!=null)
    dialog.dismiss();
    if(name.equalsIgnoreCase("yes")){
        tv.setText("user found");
        Intent myIntent=new Intent("com.campuspro.start.MYMENU");
        startActivity(myIntent);

    }else{

    tv.setText("No User Found, please try again!");
    }
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
  }

}} 
```

我的 login.jsp 页面如下...

```
 <%@page contentType="text/html; charset=UTF-8"%>
 <%@page import="org.json.simple.JSONObject"%>
 <%@page import="java.util.*,java.sql.*"%>

 <%!

 Connection con;
 PreparedStatement ps;
 ResultSet rs;
 String x,y;

 %>

 <%
 Class.forName("oracle.jdbc.driver.OracleDriver");
 con=DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:orcl","pro","pro");
 x=request.getParameter("username");
 y=request.getParameter("password");

 ps=con.prepareStatement("select * from login_stud where uname=? and pass=?");
 ps.setString(1,x);
 ps.setString(2,y);
 rs=ps.executeQuery();

JSONObject obj=new JSONObject();
if(rs.next())
{
obj.put("status","yes");
out.print(obj);

}
else
{
obj.put("status","no");
out.print(obj);
}
out.flush();
 %> 
```

这是我的原木猫....

```
 04-15 23:42:06.449: I/thread(276): Started...
 04-15 23:42:06.460: I/thread(276): Doing Something...
 04-15 23:42:07.950: D/dalvikvm(276): GC_FOR_MALLOC freed 3284 objects / 170544 bytes   in 156ms
 04-15 23:42:10.469: I/thread(276): Done...
 04-15 23:42:10.469: D/AndroidRuntime(276): Shutting down VM
 04-15 23:42:10.469: W/dalvikvm(276): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
 04-15 23:42:10.509: E/AndroidRuntime(276): FATAL EXCEPTION: main
 04-15 23:42:10.509: E/AndroidRuntime(276): java.lang.NullPointerException
 04-15 23:42:10.509: E/AndroidRuntime(276):     at    com.campuspro.start.Login_Menu$login.onPostExecute(Login_Menu.java:117)
 04-15 23:42:10.509: E/AndroidRuntime(276):     at      com.campuspro.start.Login_Menu$login.onPostExecute(Login_Menu.java:1)
 04-15 23:42:10.509: E/AndroidRuntime(276):     at android.os.AsyncTask.finish(AsyncTask.java:417)
 04-15 23:42:10.509: E/AndroidRuntime(276):     at android.os.AsyncTask.access$300(AsyncTask.java:127)
 04-15 23:42:10.509: E/AndroidRuntime(276):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
 04-15 23:42:10.509: E/AndroidRuntime(276):     at android.os.Handler.dispatchMessage(Handler.java:99)
  04-15 23:42:10.509: E/AndroidRuntime(276):    at android.os.Looper.loop(Looper.java:123)
 04-15 23:42:10.509: E/AndroidRuntime(276):     at android.app.ActivityThread.main(ActivityThread.java:4627)
 04-15 23:42:10.509: E/AndroidRuntime(276):     at java.lang.reflect.Method.invokeNative(Native Method)
 04-15 23:42:10.509: E/AndroidRuntime(276):     at java.lang.reflect.Method.invoke(Method.java:521)
 04-15 23:42:10.509: E/AndroidRuntime(276):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
 04-15 23:42:10.509: E/AndroidRuntime(276):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
 04-15 23:42:10.509: E/AndroidRuntime(276):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T18:25:38.273

这是根本原因：

```
Intent myIntent=new Intent("com.campuspro.start.MYMENU");
startActivity(myIntent); 
```

它应该是这样的：

```
Intent myIntent=new Intent(Login_Menu.this, MYMENU.class);
startActivity(myIntent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:43:59.293

该应用程序被强制关闭，因为 Android 清单文件中未提及 MYMENU 活动。

启动意图时没有这样的错误。

在 androidmanifest.xml 中声明活动的过程是：

```
<activity
        android:name=".ActivityName"
        android:label="@string/app_name"
         >
        <intent-filter>
            <action android:name="com.campuspro.start.ACTIVITYNAME" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

谢谢你

# mysql - 我可以从 mysql.user 表中删除过时的条目吗？

> ID：10164756
> 
> 赞同：1
> 
> 时间：2012-04-15T18:22:23.857
> 
> 标签：mysql

我做了一堆 GRANTS 尝试从远程主机获得连接。所以我做了 ：

```
GRANT ALL PRIVILEGES ON *.* TO 'prog'@'foobar-dev.foobar.com' WITH GRANT OPTION; 
```

但是，“foobar-dev”不再存在。还有一堆其他不存在的主机的其他条目..

我做了以下 REVOKE，希望 mysql.user 中的条目会消失：

```
REVOKE ALL PRIVILEGES, GRANT OPTION FROM 'prog'@'foobar-dev.foobar.com'. 
```

这会将 mysql.user 中的所有列设置为“n”，用于 'prog'@'foobar-dev.foobar.com'，但删除该行不是更好（更清洁）吗？我没有删除该行，因为这可能会“破坏某些东西”并违反我不太熟悉的系统表的引用完整性。但是，每次在 mysql.user 上选择以检查权限时，我都必须看到虚假条目，这有点让人分心。我一直认为系统表应该反映现实，而不是过去的长篇大论。

那么，mysql.user 是否“独立存在”以便删除其中的行对其他表没有副作用？维护这张桌子的正确方法是什么？

这会破坏什么吗？

```
delete from mysql.user where Host = 'foobar-dev.foobar.com' and User = 'prog'; 
```

蒂亚！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T18:57:00.297

应该没事。在删除用户可用之前，撤销权限然后从 mysql.user 中删除曾经是建议的方法。如果您使用的是最新版本的 mysql，将来可以使用它`drop user 'prog'@'foobar-dev.foobar.com';`来撤销权限并从用户表中删除。见[http://dev.mysql.com/doc/refman/5.0/en/drop-user.html](http://dev.mysql.com/doc/refman/5.0/en/drop-user.html)

# regex - PostgreSQL 正则表达式来验证电子邮件地址

> ID：10164758
> 
> 赞同：9
> 
> 时间：2012-04-15T18:22:32.530
> 
> 标签：regex, postgresql

```
CREATE OR REPLACE FUNCTION addUploader(INTEGER, TEXT, TEXT) RETURNS TEXT AS $$

DECLARE

  u_id ALIAS FOR $1 ;
  username ALIAS FOR $2;
  email ALIAS FOR $3; 

BEGIN 

  IF email NOT LIKE '^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+[.][A-Za-z]+$' THEN

    RAISE EXCEPTION 'Wrong E-mail format %', email
        USING HINT = 'Please check your E-mail format.';

  END IF ; 

  INSERT INTO uploader VALUES(u_id,username,email);

  IF NOT FOUND THEN
    RETURN 'Error';
  END IF;
  RETURN 'Successfully added' ; 

EXCEPTION WHEN unique_violation THEN
  RAISE NOTICE 'This ID already exists. Specify another one.' ; 
  RETURN 'Error' ; 

END ; $$ LANGUAGE 'plpgsql' ; 

SELECT addUploader(25,'test','steven@gmail.com'); 
```

此正则表达式不接受正确的电子邮件地址。它应该接受 steven@gmail.com。它也拒绝任何其他字符串。

stevengmailcom - 被拒绝

一切都被拒绝。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-15T18:36:33.457

您不要在 PostgreSQL 中将 LIKE 与正则表达式一起使用，而是使用[`~`、`~*`、`!~`和`!~*`](http://www.postgresql.org/docs/current/interactive/functions-matching.html#FUNCTIONS-POSIX-REGEXP)运算符：

> `~`
> 匹配正则表达式，区分大小写
> 
> `~*`
> 匹配正则表达式，不区分大小写
> 
> `!~`
> 不匹配正则表达式，区分大小写
> 
> `!~*`
> 不匹配正则表达式，不区分大小写

所以你的测试应该看起来更像这样：

```
IF email !~ '^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+[.][A-Za-z]+$' THEN 
```

您可能还想为电子邮件地址寻找更好的正则表达式，“a+b@c.com”是一个有效的电子邮件地址，但您的正则表达式不喜欢它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-15T20:27:59.013

验证电子邮件地址充满了危险。创建一个拒绝接受有效电子邮件地址的正则表达式比创建一个只拒绝无效电子邮件地址的正则表达式要容易得多。这是符合 RFC822 的[perl 正则表达式](http://www.ex-parrot.com/pdw/Mail-RFC822-Address.html)：

我的建议是接受任何东西，然后使用电子邮件验证它是否有效。如果您必须进行验证，请使用该页面上列出的 perl 模块和 pl/perl。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T18:36:02.833

我认为您想要一个[波浪号运算符](http://www.postgresql.org/docs/8.3/static/functions-matching.html#FUNCTIONS-POSIX-TABLE)而不是`like`.

`like`具有仅由通配符组成的不同语法（例如，它使用`%`而不是`.*`），并且它们必须匹配整个字符串，因此锚点不能与.`^`和. 我个人认为它更像是文件通配符而不是实际的模式匹配。`$``like`

波浪号运算符为您提供更类似于 egrep、sed 和 awk 的健壮的正则表达式语法。

# php - 按数字顺序返回包含数字的 varchars

> ID：10164759
> 
> 赞同：0
> 
> 时间：2012-04-15T18:22:47.380
> 
> 标签：php, mysql

我有一个表，其中包含带有数字的 varchars，例如“03-011A”或“03.011A”或“03-011”或“03.011”等......但是，数字顺序的标准方法似乎无效，它们仍然返回无序，我已经检查了解决方案，但可惜，我没有找到治愈方法。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T18:28:51.487

你不应该在你的数据库中有这种不一致的地方。选择一种格式并坚持下去。

但是，您可以在语句或其他某种正则表达式操作中使用 ie NumericOnly() ( [http://venerableagents.wordpress.com/2011/01/29/mysql-numeric-functions/](http://venerableagents.wordpress.com/2011/01/29/mysql-numeric-functions/) )`ORDER BY`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T18:30:00.053

尝试使用以下顺序设置“数字字段”：SELECT * FROM table WHERE field=test **ORDER BY number_field ASC**

否则，您可以尝试通过 PHP（带数组）订购。

# cordova - PhoneGap cordova 外部主机问题

> ID：10164761
> 
> 赞同：1
> 
> 时间：2012-04-15T18:23:09.530
> 
> 标签：cordova, extjs

我尝试在 Phonegap (cordova) 上运行我的应用程序，但我收到有关外部主机问题的错误：

```
CordovaOne[14528:2103] ERROR whitelist rejection: url ..... 
```

但是即使我更新了“ **Cordova.plist** ”，这个问题也会出现，

也许我在某处错误的地方更新。

“Cordova.plist”在“CordovaOne/Resources/Cordova.plist”中。

不知道我在这里做错了什么。

谢谢大家的建议！

PS：PhoneGap 1.5.0版

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T19:19:28.997

Are you getting this error when attempting to access a URL? If so you need to whitelist domains. Simply add a new value to the `ExternalHosts` array in Cordova.plist. This new value should be `<string>*</string>` which is a catch-all for all domains.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-15T18:26:54.730

那是错误的。您必须从项目中编辑 plist，而不是“cordova”-文件。名称是“ **PhoneGap.plist** ”。

# c++ - 将 ptr 显式转换为“ptr to a ptr”

> ID：10164764
> 
> 赞同：7
> 
> 时间：2012-04-15T18:23:27.297
> 
> 标签：c++, pointers, casting

我在一次采访中遇到了这个代码。

```
int main()
{
    int **p;
    p = (int **) new int(7);
    cout<<*p; 
    return 0;
} 
```

我期待在 *p 出现一些运行时错误。但是当我运行代码时，它成功执行并输出“0x7”。有人可以解释一下这是如何工作的。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T18:40:02.110

除非给你一些额外的限制，否则正确的答案是*以上都不是。*基本上，代码正在分配一个`int`并解释该内存，就好像它是一个`int*`（通过一个`reinterpret_cast`）。第一个问题是，作为 a `reinterpret_cast`，结果在一般情况下是*未指定*的，并且如果 的大小`int`小于`int*`（认为是 64 位架构）的大小，则结果是*未定义的行为*，因为您正在读取超出分配的大小`new`称呼。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-15T18:27:20.130

您创建一个新的 int 并将其初始化为值 7。

```
int *x = new int(7); 
```

您比将其转换为指针（例如内存地址 7 或 0x07）

```
int **p = (int**) new int(7); 
```

然后你用 cout 显示这个地址。

```
*p is equal to (int*)7 
```

它是一个值为 7 的指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T18:30:52.160

```
new int(7); 
```

`int`为其值为 is的 an 分配内存`7`并返回指向它的指针。

```
int **p = (int **) new int(7); 
```

告诉编译器将该内存解释为`int**`.

```
cout << *p; 
```

告诉编译器在地址`*p`处是一个`int *`并且输出它的值。值为`0x07`。（它将 int`7`视为地址）。额外的取消引用会导致崩溃（准确地说，是未定义的行为）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T18:37:25.267

```
int main()
{
    int **p;                  // declare pointer to pointer called p
    p = (int **) new int(7);  // new allocates integer initialized to value of 7 and returns a pointer.  Cast the pointer to a point to pointer.  p now represents a pointer to a pointer with contents of 0x7\.  If you called **p you would get the contents at address 0x7.
    cout << *p; // dereference p, this yields a pointer, which is an int of value 0x7.
} 
```

这个问题很可能是为了测试您对指针的了解，但似乎不太实用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T05:33:57.720

```
int main()
{
    int **p = (int **) new int(7);
    cout << *p;
} 
```

因此，`new int(7)`分配`sizeof(int)`内存字节并返回指向它的指针。假设内存恰好位于地址 X。然后 X 被强制转换`(int**)`并存储在`p`.

`*p`取消引用`int**`，这意味着它将`int`地址处的值 7 解释`X`为`int*`.

*   如果`sizeof(int*)`大于`sizeof(int)`，则作为 an`int*`读取将超出分配的缓冲区`new`- 无论数据类型和任何重新解释如何，总是未定义的行为。

*   如果大小相同，CPU 将尝试读取包含整数 7 的内存`int*`- 这通常会产生 value `int*(7)`，但查看标准 5.2.10.5：

> 整数类型或枚举类型的值可以显式转换为指针。* [脚注：转换值为 0 的整数常量表达式 (expr.const) 始终会生成空指针 (conv.ptr)，但会转换发生的其他表达式具有零值不需要产生空指针。--- end foonote] 转换为足够大小的整数（如果实现中存在这样的整数）并返回相同指针类型的指针将具有其原始值；指针和整数之间的映射是由实现定义的。

因此，整数值保证转换为某个指针值 - 没有未定义的 - 但该值是实现定义的。尽管如此，作为一个可逆操作， 7 极*有可能*`int`产生一个`int*`值为 7 的值——这解释了观察到的输出“7”的行为。

*   如果指针大小小于`int`大小，它将读取`int`值的一部分并将其解释为指针。根据字节顺序，切片可能是 0 或 7 甚至是其他值，但同样，`int`它必须可转换为将显示的某个指针值。

# objective-c - 当应用程序处于非活动状态时在 iOS 中没有报亭时在后台下载文件

> ID：10164781
> 
> 赞同：2
> 
> 时间：2012-04-15T18:25:25.760
> 
> 标签：objective-c, ios, xcode, push-notification

我有以下问题。每周星期五都会发布一个包含内容的列表。iOS 应用程序应在该星期五的特定时间检查此列表并在后台处理数据。此外，如果应用程序在后台。我不能使用普通的推送通知，因为如果列表中的内容与某些本地设置匹配，用户应该会收到本地通知。报亭不是一个选项，因为该应用程序与杂志无关，而且我没有订阅。如果没有服务器端基础架构，是否有任何选项可以做到这一点？提前致谢。亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T19:49:46.880

据我从您的问题中了解到，即使应用程序在后台，您也希望每周运行一次您的应用程序。我对这个主题进行了很多研究（保持应用程序在后台运行），但预计使用 Vo-IP、播放音频和位置服务的应用程序会被 Apple 拒绝。但是，如果您只想在后台下载数据（而不是厌倦 UI），您可以使用[NSURLConnection或](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html)[ASIHTTPReques](http://allseeing-i.com/ASIHTTPRequest/)之类的第三方轻松地在后台处理它们。我再重复一次，这种类型的存活时间（据我所知）大约十分钟，但你不能在后台触发预定的计时器（NSTimer）或其他东西。

# mysql - 全文：这个查询很慢

> ID：10164783
> 
> 赞同：1
> 
> 时间：2012-04-15T18:25:29.847
> 
> 标签：mysql, full-text-search

我正在使用此查询，但不幸的是它运行缓慢：

```
SELECT *,
    (MATCH(`title`) AGAINST ('$word' IN BOOLEAN MODE) * 2
    + MATCH(`content`) AGAINST ('$word' IN BOOLEAN MODE) * 2
    + MATCH(`url`) AGAINST ('$word' IN BOOLEAN MODE) * 1.1
    + MATCH(`desc`) AGAINST ('$word' IN BOOLEAN MODE) * 1.2) * `like`
    AS score
FROM `data`
WHERE MATCH(`content`,`desc`,`title`,`url`) AGAINST ('$word' IN BOOLEAN MODE)
ORDER BY `score` DESC LIMIT 1000 
```

数据库的结果是15000。这意味着将做15000条记录，但查询大约需要25秒的时间。我正在使用 PDO。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T18:54:09.970

您将需要 FULLTEXT 索引，否则 DBMS 每次都需要搜索整个表。这确实会减慢记录的插入速度。请注意，4 列的全文搜索总是相对较慢。

```
CREATE FULLTEXT INDEX indexTitle ON `data` (title)
CREATE FULLTEXT INDEX indexContent ON `data` (content)
CREATE FULLTEXT INDEX indexURL ON `data` (url)
CREATE FULLTEXT INDEX indexDesc ON `data` (desc)
CREATE FULLTEXT INDEX combinedIndex ON `data` (content, desc, title, url) 
```

# scala - 声明一个接受未知案例类作为参数的方法，以便在 Scala 的模式匹配中使用它

> ID：10164787
> 
> 赞同：2
> 
> 时间：2012-04-15T18:26:09.753
> 
> 标签：scala, methods, pattern-matching, arguments, case-class

想象一个抽象类 A，它有一组案例类。我们不知道有多少集合类，甚至不知道这些案例类的名称。

```
abstract class A(field: String)
//Example of a case class that extends A
case class B(f: String) extends A(f) 
```

现在我有这个：

```
a match {
    case B(f) => println("f")
} 
```

我想通过参数将案例类类型传递给方法。我想要这个的原因是因为我将在一个文件中配置一组规则。我想加载这些规则并使用模式匹配这些规则提供的一些信息。我想做这样的事情：

```
def printer (a: A, B: A) = {
   a match{
       case B(f) => println("f")
   }
} 
```

这可能吗？

如果不是那么容易，我可以在模式匹配中使用抽象类吗？如果我可以简单地使用抽象类，那将是完美的，因为它具有所有案例类的主要结构。

编辑：

忘了提到案例类可以有不同的参数，所以最好使用基于类 A 的东西（因为我只能用字段进行模式匹配）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T19:09:33.187

不像你试过。但是如果你使用*Manifest*作为上下文绑定，你可以让它工作：

```
scala> trait Foo
defined trait Foo

scala> case class Bar(baz: String) extends Foo
defined class Bar

scala> def boo[A <: Foo : Manifest](foo: Foo) =
     |   if (foo.getClass isAssignableFrom manifest[A].erasure) "foo" else "boo"
boo: [A <: Foo](foo: Foo)(implicit evidence$1: Manifest[A])java.lang.String

scala> boo[Foo](Bar(""))
res0: java.lang.String = boo

scala> boo[Bar](Bar(""))
res1: java.lang.String = foo 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T19:45:25.597

您可以从案例类的伴随对象中提取`unapply`方法并使用它：

```
scala> :paste
// Entering paste mode (ctrl-D to finish)

abstract class A(field: String)
case class B(f: String) extends A(f)
case class C(f: String) extends A(f)
case class E(f: String, f1: Int) extends A(f)
case class F(f: String, f1: Int) extends A(f)

class Unapplyer[T: Manifest, R](f: T => Option[R]) {
  def unapply(a: Any): Option[R] = {
    if (manifest[T].erasure.isInstance(a)) f(a.asInstanceOf[T]) else None
  }
}

def printer[T: Manifest, R](a: A, b: T => Option[R]) {
  val P = new Unapplyer(b)
  a match {
    case P((f, f1)) => println(f + " - " + f1)
    case P(f) => println(f)
    case _ => println("oops")
  }
}

// Exiting paste mode, now interpreting.

defined class A
defined class B
defined class C
defined class E
defined class F
defined class Unapplyer
printer: [T, R](a: A, b: (T) => Option[R])(implicit evidence$2: Manifest[T])Unit

scala> printer(B("test"), B.unapply _ )
test

scala> printer(B("test"), C.unapply _ )
oops

scala> printer(E("test", 1), E.unapply _ )
test - 1

scala> printer(E("test", 1), F.unapply _ )
oops

scala> printer(E("test", 1), B.unapply _ )
oops 
```

**UPD：**添加了可变数量和类型的参数的用法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T23:47:10.923

我不明白为什么要将类型传递给方法。当您使用模式匹配时，无论如何都要检查类型。那为什么要传入呢？你可以写

```
abstract class A(field: String)
case class B(f: String) extends A(f)
case class C(i: Int) extends A(i.toString)

def printer (a: A) = {
   a match{
       case B(f) => println(f)
       case C(i) => println(i)
   }
} 
```

# php - the_content之后的wordpress自定义字段输出

> ID：10164789
> 
> 赞同：1
> 
> 时间：2012-04-15T18:26:17.727
> 
> 标签：php, wordpress

我想要做的是在 the_content 之后和插件之前输出一个自定义字段内容（这是一个带有动态链接的按钮，它被插入到每个帖子的自定义字段的值中）。

这是自定义字段的代码：

```
<div class="button">
  <a href="<?php echo get_post_meta($post->ID, 'Button', true); ?>">
    <img src="<?php echo get_template_directory_uri() . '/images/button.png'; ?>" alt="link" />
  </a>
</div> 
```

在 wordpress codex 上，我还找到了如何将过滤器应用于 the_content 以获得类似于我想要的内容的示例。这是代码：

```
add_filter( 'the_content', 'my_the_content_filter', 20 );
function my_the_content_filter( $content ) {
if ( is_single() )
    // Add image to the beginning of each page
    $content = sprintf(
        '<img class="post-icon" src="%s/images/post_icon.png" alt="Post icon" title=""/>%s',
        get_bloginfo( 'stylesheet_directory' ),
        $content
    );
// Returns the content.
return $content;
} 
```

问题是我不知道 PHP，我不知道我应该如何编辑上面的代码以应用于我的特定情况。

我对其进行了一些修改，并设法列出了按钮，但仅在 the_content 之前并且没有启用自定义字段的 PHP。

```
add_filter( 'the_content', 'my_the_content_filter', 20 );
function my_the_content_filter( $content ) {

if ( is_single() )
    // Add button to the end of each page
    $content = sprintf(
        '<img class="button-link" src="%s/images/button.png" alt="Link" title=""/>%s',
        get_bloginfo( 'stylesheet_directory' ),
        $content
    );
// Returns the content.
return $content;
} 
```

你可以在这里看到输出：[http](http://digitalmediaboard.com/?p=6583) ://digitalmediaboard.com/?p=6583 （它是右上角的“show-me”按钮）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T18:59:38.077

```
$content .= sprintf(...); // will add the button right after content. 
```

在你的例子中

```
// Add button to the end of each page
$content = sprintf(
    '<img class="button-link" src="%s/images/button.png" alt="Link" title=""/>%s',
    get_bloginfo( 'stylesheet_directory' ),
    $content
); 
```

将其更改为

```
$lnk=get_bloginfo( 'stylesheet_directory' );
$content .= '<img class="button-link" src=$lnk."/images/button.png" alt="Link" title=""/>'; 
```

在内容之后添加新内容/按钮。您还需要`css`为该按钮添加一些样式，以便根据您在内容内/之后的需要放置。

我认为您可以轻松地编辑`index.php`并可以在内容之后立即添加您随问题提供的代码。

**更新：**

```
add_filter( 'the_content', 'my_the_content_filter', 20 );
function my_the_content_filter( $content ) {
    if ( is_single() )
    {
        global $post;
        $imgLnk=get_bloginfo( 'stylesheet_directory' );
        $pgLnk=get_post_meta($post->ID, 'Button', true);
        $content .= '<a href="'.$pgLnk.'"><img class="button-link" src=$lnk."/images/button.png" alt="Link" title=""/></a>';
    }
    return $content;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T09:19:57.160

只是对上面的代码稍作修改。之前的“img”属性在 Safari 上输出“找不到图像”图标（问号）。我只是用 'span' 替换了 'img' 并将图像添加为 CSS 中的背景。

```
add_filter( 'the_content', 'my_the_content_filter', 0 );
function my_the_content_filter( $content ) {
    if ( is_single() )
    {
        global $post;
        $pgLnk=get_post_meta($post->ID, 'Button', true);
        $content .= '<div id="button-link"><a href="'.$pgLnk.'" target="_blank"><span class="button-link"></span></a></div>';
    }
    return $content;
} 
```

# html - 跨浏览器可调整大小的按钮故障

> ID：10164793
> 
> 赞同：-2
> 
> 时间：2012-04-15T18:27:14.440
> 
> 标签：html, css, cross-browser

[http://jsfiddle.net/KKL5G/](http://jsfiddle.net/KKL5G/)

请查看上面的 html 和 css 按钮。

在这些浏览器上，用于显示按钮右侧部分的跨度向下移动 1px。在 Firefox 上按预期正常工作。

Windows：IE8、Opera、Safari Mac：FF、Safari、Opera、Chrome

更新 1] 即使在 Firefox 11.0 窗口中随机更改窗口高度时，也可以看到该错误。

要重现它，请转到上面提到的 jsfiddle 链接并尝试调整结果框架的大小。您可能会看到跨度闪烁... [编辑 2：实际上，当我注意到按钮的右侧，之前我认为它在 Firefox 中运行良好。]

我还尝试了一个全内联元素示例。 [http://jsfiddle.net/sbWCD/](http://jsfiddle.net/sbWCD/)

PS 这个简单的图像只是一些更复杂设计的占位符，我不是在寻找 CSS3 解决方案..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T19:52:56.543

Your code is way too complicated for what you want to achieve. Here's a cleaned up version [http://jsfiddle.net/KKL5G/4/](http://jsfiddle.net/KKL5G/4/) It should work cross-browser.

Using `border-radius`, it's easy to make boxes with rounded corners and there is no need for a background-image.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T03:23:34.267

嗯，我调整了的垂直填充，使总高度达到 32px，并将 span.l 上的 line-height 更改为 33px，在带有 span 的示例中，它现在似乎在 firefox 和 safari 中工作。

[http://jsfiddle.net/sbWCD/3/](http://jsfiddle.net/sbWCD/3/)

工作，但仍然不知道是什么导致了问题。

# linq - 使用 Linq 构建处理 String.Empty 的搜索查询

> ID：10164797
> 
> 赞同：1
> 
> 时间：2012-04-15T18:27:45.137
> 
> 标签：linq, linq-to-entities

我试图构建一个简单的搜索 LINQ 语句。当字符串被传递到 WHERE 时，空字符串会导致错误的结果。

```
tmp = (from p in tmp
       where
           p.Customer.custEmail.Contains(filter.Email) &&
           p.Customer.custLastName.Contains(filter.LastName) &&
           p.orderID == id
       select p).ToList();
} 
```

如果 filter.LastName 为空，则查询仍会尝试查找“”，这会导致 NO RECORDS。

不用写一堆

```
if (!String.IsNullOrWhiteSpace(filter.LastName)) 
```

对于每个过滤器项目，有没有办法**在 LINQ 命令**中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T18:33:00.013

您可以为此编写扩展方法：

```
public static bool ContainsIfNotNullOrWhiteSpace(this string source, string searched)
{
    return string.IsNullOrWhiteSpace(searched) ?
           false :
           source.Contains(searched);
} 
```

然后您可以在查询表达式中使用它：

```
from p in tmp
where
    p.Customer.custEmail.ContainsIfNotNullOrWhiteSpace(filter.Email) &&
    p.Customer.custLastName.ContainsIfNotNullOrWhiteSpace(filter.LastName) &&
    p.orderID == id
select p 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T18:33:24.017

只需将检查添加到 where 子句：

```
from p in tmp
where
    (!String.IsNullOrWhiteSpace(filter.Email) && 
     p.Customer.custEmail.Contains(filter.Email)) &&
    (!String.IsNullOrWhiteSpace(filter.LastName) &&
     p.Customer.custLastName.Contains(filter.LastName)) &&
    p.orderID == id
select p 
```

# dynamic - 后记缩放

> ID：10164799
> 
> 赞同：3
> 
> 时间：2012-04-15T18:27:52.927
> 
> 标签：dynamic, gnuplot, postscript

嗨，这有点远，但我很好奇它是否可以完成。我正在使用 gnuplot 创建一个图形并作为后记输出，有没有一种方法可以使图形动态化，以便在您放大轴刻度上的数字时。即缩小你看到0、1、2、3、4、5。放大到一个部分看到1.1、1.2、1.2、1.3、1.4、1.5。干杯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T20:54:06.163

否 - 尽管 postscript 文件实际上是一个成熟语言的程序，但它在渲染时没有缩放级别的信息。

一些 postscript 实现可能有一种方法让 postscript 程序实际知道光栅分辨率也在渲染 - 如果这是真的，理论上是可能的，但它不是微不足道的。非平凡的如：在 postscript 本身中需要大量编码，包括动态生成标签的文本 - 通常 postscript 文件中的文本在 postscript 文件本身的生成时被“硬编码”到位。它当然不仅仅是文件前面的快速破解

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-12T13:16:55.170

PostScript 图形状态具有当前变换矩阵。一切都乘以这个矩阵。在绘制图形之前执行 PostScript 命令`scale`有效地更改当前变换矩阵元素以缩放输出。您的开发工具是否提供任何方法来嵌入原始 PostScript 代码？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-10T06:17:32.220

PostScript 是一种编程语言，您可以在其中使用 if else 语句来控制逻辑。因此，根据当前的比例，您可以计算出您可以绘制其他东西。如果您自己做这可能是可能的，但需要您需要提出的逻辑（这称为编程;-)）

# android - 未遵守 WebView 规范。显示地址栏

> ID：10164801
> 
> 赞同：0
> 
> 时间：2012-04-15T18:28:02.223
> 
> 标签：android, android-webview

[WebView“不包括完全开发的网络浏览器的任何功能，例如导航控件或地址栏”](http://developer.android.com/guide/webapps/webview.html)

但是当我使用这段代码时：

```
WebView webview = new WebView(); 
webview.loadUrl( "http://example.com"); 
```

它包括一个地址栏。

我也很好奇为什么互联网上到处都有关于如何在 WebView 中隐藏地址栏的帖子，而在我看来，默认情况下 WebView 活动确实隐藏了地址栏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T18:39:41.180

请参阅方法 shouldOverrideUrlLoading 方法定义：

[http://developer.android.com/reference/android/webkit/WebViewClient.html#shouldOverrideUrlLoading%28android.webkit.WebView,%20java.lang.String%29](http://developer.android.com/reference/android/webkit/WebViewClient.html#shouldOverrideUrlLoading%28android.webkit.WebView,%20java.lang.String%29)

这清楚地解释了，如果未提供 WebViewClient，默认情况下 WebView 将要求 Activity Manager 为 url 选择正确的处理程序，即浏览器。

# unity-container - Unity 错误：给定的程序集名称或代码库无效

> ID：10164803
> 
> 赞同：4
> 
> 时间：2012-04-15T18:28:07.523
> 
> 标签：unity-container, mstest

我正在使用微软统一框架工作并收到此错误：

```
********** 4/15/2012 9:46:08 AM **********
Inner Exception Type: System.IO.FileLoadException
Inner Exception: The given assembly name or codebase was invalid. (Exception from HRESULT: 0x80131047)
Inner Source: mscorlib
Inner Stack Trace: 
   at System.RuntimeTypeHandle.GetTypeByName(String name, Boolean throwOnError, Boolean ignoreCase, Boolean reflectionOnly, StackCrawlMarkHandle stackMark, Boolean loadTypeFromPartialName, ObjectHandleOnStack type)
   at System.RuntimeTypeHandle.GetTypeByName(String name, Boolean throwOnError, Boolean ignoreCase, Boolean reflectionOnly, StackCrawlMark& stackMark, Boolean loadTypeFromPartialName)
   at System.RuntimeType.GetType(String typeName, Boolean throwOnError, Boolean ignoreCase, Boolean reflectionOnly, StackCrawlMark& stackMark)
   at System.Type.GetType(String typeName)
   at Microsoft.Practices.Unity.Configuration.ConfigurationHelpers.TypeResolverImpl.SearchAssemblies(String typeNameOrAlias)
   at Microsoft.Practices.Unity.Configuration.ConfigurationHelpers.TypeResolverImpl.ResolveTypeThroughSearch(String typeNameOrAlias)
   at Microsoft.Practices.Unity.Configuration.ConfigurationHelpers.TypeResolverImpl.ResolveTypeInternal(String typeNameOrAlias)
   at Microsoft.Practices.Unity.Configuration.ConfigurationHelpers.TypeResolverImpl.ResolveType(String typeNameOrAlias, Boolean throwIfResolveFails)
   at Microsoft.Practices.Unity.Configuration.SectionExtensionElement.GetExtensionObjectType()
   at Microsoft.Practices.Unity.Configuration.SectionExtensionElement.DeserializeElement(XmlReader reader, Boolean serializeCollectionKey)
   at Microsoft.Practices.Unity.Configuration.ConfigurationHelpers.DeserializableConfigurationElement.Deserialize(XmlReader reader)
   at Microsoft.Practices.Unity.Configuration.ConfigurationHelpers.ConfigurationElementExtensions.ReadUnwrappedElement[TElementType](ConfigurationElement baseElement, XmlReader reader, DeserializableConfigurationElementCollectionBase`1 elementCollection)
   at Microsoft.Practices.Unity.Configuration.UnityConfigurationSection.DeserializeSectionExtension(XmlReader reader)
   at Microsoft.Practices.Unity.Configuration.UnityConfigurationSection.<.cctor>b__5(UnityConfigurationSection s, XmlReader xr)
   at Microsoft.Practices.Unity.Configuration.ConfigurationHelpers.UnknownElementHandlerMap`1.ProcessElement(TContainingElement parentElement, String elementName, XmlReader reader)
   at Microsoft.Practices.Unity.Configuration.UnityConfigurationSection.OnDeserializeUnrecognizedElement(String elementName, XmlReader reader)
   at System.Configuration.ConfigurationElement.DeserializeElement(XmlReader reader, Boolean serializeCollectionKey)
   at System.Configuration.ConfigurationSection.DeserializeSection(XmlReader reader)
   at Microsoft.Practices.Unity.Configuration.UnityConfigurationSection.DeserializeSection(XmlReader reader)
   at System.Configuration.RuntimeConfigurationRecord.RuntimeConfigurationFactory.CreateSectionImpl(RuntimeConfigurationRecord configRecord, FactoryRecord factoryRecord, SectionRecord sectionRecord, Object parentConfig, ConfigXmlReader reader)
   at System.Configuration.RuntimeConfigurationRecord.RuntimeConfigurationFactory.CreateSectionWithRestrictedPermissions(RuntimeConfigurationRecord configRecord, FactoryRecord factoryRecord, SectionRecord sectionRecord, Object parentConfig, ConfigXmlReader reader)
   at System.Configuration.RuntimeConfigurationRecord.CreateSection(Boolean inputIsTrusted, FactoryRecord factoryRecord, SectionRecord sectionRecord, Object parentConfig, ConfigXmlReader reader)
   at System.Configuration.BaseConfigurationRecord.CallCreateSection(Boolean inputIsTrusted, FactoryRecord factoryRecord, SectionRecord sectionRecord, Object parentConfig, ConfigXmlReader reader, String filename, Int32 line)
Exception Type: System.Configuration.ConfigurationErrorsException
Exception: An error occurred creating the configuration section handler for unity: The given assembly name or codebase was invalid. (Exception from HRESULT: 0x80131047) (C:\Calico\CDT\Dev\CalicoEnergy\EIS.Application.ManinboundedContext.Tests.Integration\bin\Debug\TestResults\Cameron_CAMERON-ENVYPC 2012-04-15 09_46_06\Out\EIS.Application.ManinboundedContext.Tests.Integration.dll.config line 15)
Source: UnityContainer().LoadConfiguration()
Stack Trace: 
   at System.Configuration.BaseConfigurationRecord.EvaluateOne(String[] keys, SectionInput input, Boolean isTrusted, FactoryRecord factoryRecord, SectionRecord sectionRecord, Object parentResult)
   at System.Configuration.BaseConfigurationRecord.Evaluate(FactoryRecord factoryRecord, SectionRecord sectionRecord, Object parentResult, Boolean getLkg, Boolean getRuntimeObject, Object& result, Object& resultRuntimeObject)
   at System.Configuration.BaseConfigurationRecord.GetSectionRecursive(String configKey, Boolean getLkg, Boolean checkPermission, Boolean getRuntimeObject, Boolean requestIsHere, Object& result, Object& resultRuntimeObject)
   at System.Configuration.BaseConfigurationRecord.GetSectionRecursive(String configKey, Boolean getLkg, Boolean checkPermission, Boolean getRuntimeObject, Boolean requestIsHere, Object& result, Object& resultRuntimeObject)
   at System.Configuration.BaseConfigurationRecord.GetSectionRecursive(String configKey, Boolean getLkg, Boolean checkPermission, Boolean getRuntimeObject, Boolean requestIsHere, Object& result, Object& resultRuntimeObject)
   at System.Configuration.BaseConfigurationRecord.GetSection(String configKey)
   at System.Configuration.ClientConfigurationSystem.System.Configuration.Internal.IInternalConfigSystem.GetSection(String sectionName)
   at System.Configuration.ConfigurationManager.GetSection(String sectionName)
   at Microsoft.Practices.Unity.Configuration.UnityContainerExtensions.LoadConfiguration(IUnityContainer container)
   at EIS.Application.ManinboundedContext.Tests.Integration.DemandResponesAppServiceIntegrationTests.InitializeTesting(TestContext context) in C:\Calico\CDT\Dev\CalicoEnergy\EIS.Application.ManinboundedContext.Tests.Integration\DemandResponesAppServiceIntegrationTests.cs:line 48 
```

我知道我错过了一个集会。如何确定我缺少什么程序集？我正在运行 mstest 项目。我尝试了程序集绑定查看器，但没有结果。我已将所有程序集的引用添加到我的测试项目中。我该如何解决这个问题？Unity 不会告诉我缺少什么程序集。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T21:07:20.897

我无法让 fuslogvw 向我展示缺少哪些组件。

但

通过在我的测试项目的 bin\debug 目录和 mstest 创建的目录之间进行比较来进行比较，以使用 (\TestResults\My Machine Name 2012-04-23 09_22_24\Out) 执行测试，我能够识别缺少的程序集。

我不知道 mstest 正在构建一个新目录并且没有选择一些被注入的类型。一旦我发现 MSTest 正在创建自己的目录，我就能够通过差异来找到问题。

供参考。缺少的是企业库类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T01:14:35.923

在尝试查找请求的程序集时，使用 SDK 中的 fuslogvw.exe 找出绑定器正在查找的位置。请参阅[http://blogs.msdn.com/b/suzcook/archive/2003/05/29/57120.aspx](http://blogs.msdn.com/b/suzcook/archive/2003/05/29/57120.aspx)和[http://www.neovolve.com/post/2010/05/28/Resolving-assembly-bind -failures-on-a-server.aspx](http://www.neovolve.com/post/2010/05/28/Resolving-assembly-bind-failures-on-a-server.aspx)获取一些信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T07:26:26.000

请确保您已在 web.config 文件所在的项目中添加了缺少的 assebply 的 asseblly 引用。

我错过了这个。我已经在使用 Unity 解析类的项目中添加了这些程序集引用，但错过了将其添加到配置文件所在的父项目中。这解决了我的问题。

# ios - NSString drawInRect: 并在 iOS 上投下阴影

> ID：10164808
> 
> 赞同：1
> 
> 时间：2012-04-15T18:28:18.900
> 
> 标签：ios, opengl-es, core-graphics

我正在使用`[NSString drawInRect:]`将文本绘制到纹理上，并且在添加阴影之前一切正常。它们看起来正确，但经常被我正在绘制的矩形剪裁。

问题是`[NSString sizeWithFont:]`不知道阴影，因为它们是通过`CGContextSetShadowWithColor(...)`.

这是我正在使用的代码（去除绒毛）：

```
CGSize dim = [theString sizeWithFont:uifont];

...

CGContextSetRGBFillColor(context, 1.0f, 1.0f, 1.0f, 1.0f);
CGContextTranslateCTM(context, 0.0f, dim.height);
CGContextScaleCTM(context, 1.0f, -1.0f);
CGContextSetShadowWithColor(context, CGSizeMake(dropOffset.x, dropOffset.y), dropBlur, dropColorRef);

...

[theString drawInRect:dim withFont:uifont lineBreakMode:UILineBreakModeWordWrap alignment:align]; 
```

我已经尝试扩展`dim`以考虑阴影和模糊，这主要是可行的，但有时扩展的矩形会导致线条被完全不同的包裹，因为添加了额外的空间。

有没有比我使用的更好的方法来找到绘制（或绘制字符串）所需的纹理/矩形的大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T18:36:43.770

您只需要跟踪两个不同的矩形。

1.  将包含您传递给的文本的矩形`-[NSString drawInRect:]`。打电话给这个`stringBounds`。
2.  包含阴影的扩展/偏移矩形。打电话给这个`shadowBounds`。

使您的纹理大小为`shadowBounds`.

绘制文本时，您需要翻译`shadowBounds.origin - stringBounds.origin`. （或者可能反过来——这完全取决于你做什么，按什么顺序。当你得到它时你会知道的。）

然后做`[theString drawInRect:stringBounds ...]`。

# fonts - TCPDF - 如何将字体添加到 pdf

> ID：10164809
> 
> 赞同：6
> 
> 时间：2012-04-15T18:28:30.243
> 
> 标签：fonts, tcpdf

在使用 TCPDF 生成 pdf 文件时，我试图将字体嵌入到我的 pdf 文件中。我已经在手册中阅读过它，并且已经在谷歌上搜索了几个小时。

我用了那个方法：

```
$fontname = $pdf->addTTFfont('/fonts/aller.ttf', '', '', 32); 
```

之后，我的 tcpdf 字体目录中有 3 个文件：aller.php、aller.z 和 aller.ctg.z 我将字体设置为：

```
$pdf->SetFont('aller', '', 20, '', true) 
```

不幸的是，我的 pdf 文件中出现了点，并且错误消息显示“无法提取嵌入的字体 'AAAAAD+Aller,Bold'。某些字符可能无法正确显示或打印。”

我正在使用 Windows，所以我不能使用 ttf2atm.exe 并按照一些教程中的建议调用 php -q makefont.php。

我在 SO 中找到了一个问题[链接](https://stackoverflow.com/questions/8861260/specific-fonts-in-tcpdf-pdf)，但没有解决方案。

有人知道如何将全新的字体添加到 tcpdf pdf 文件吗？我想添加 Aller 字体（您可以从[这里](http://pl.fonts2u.com/aller.czcionka?ptext=Konkurencje:&size=&submit=Wy%C5%9Blij)下载- 只需单击“pobieraj”链接即可。

帮助将不胜感激。

卡雷格。

**问题已解决 - 不幸的是，我试图嵌入的字体已损坏 - 任何其他使用 $pdf->addTTFfont() 方法都可以正常工作。**

# ruby-on-rails - 使用非 id 列查询数据库

> ID：10164812
> 
> 赞同：0
> 
> 时间：2012-04-15T18:29:42.843
> 
> 标签：ruby-on-rails

我有我认为的非标准模型结构（我知道它很糟糕，但它是必要的）。鉴于以下迁移：

> ```
> create_table :MODELS, :primary_key => :MOD_ID do |t|
>   t.integer :MOD_ID
>   t.integer :MOD_MFA_ID
>   t.integer :MOD_CDS_ID
>   t.integer :MOD_PCON_START
>   t.integer :MOD_PCON_END
>   t.integer :MOD_PC
>   t.integer :MOD_CV
>   t.integer :MOD_AXL
>   t.binary :MOD_PC_CTM
>   t.binary :MOD_CV_CTM
> 
>   t.timestamps 
> ```

`MOD_MFA_ID`对应于与另一个表/模型 ( `manufacturers`)的关联。我想根据制造商的品牌列检索模型。

```
 def getmanufacturer 
    @manufacturer = Manufacturers.find(params[:manufacturer])

    respond_to do |format|
      format.html # show.html.erb
      format.xml  { render :xml => @manufacturer }
    end
  end 
```

我不知道如何修改我的控制器和路由来处理这个用例。我想使用这种或 URL 查询应用程序：`/models?manufacturer=audi&&model=a6`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T18:45:23.547

所以说你想要一个像这样的网址：

/制造/奥迪/型号/a6

在您的路线文件中执行以下操作：

```
resources manufactures do
  resources models
end 
```

对于您想要切换主键的模型

制造商型号：

```
set_primary_key :manufacturer_name #what ever you want used instead of ID 
```

为您的 MODEL 模型做同样的事情

```
set_primary_key :MOD_Name 
```

然后在您的控制器中，您可以执行以下操作：

```
Manufacturer.find(params[:manufaturer_id]).models.find(params[:id]) 
```

如果不想切换主键，也可以做find_by：

```
Manufacturer.find_by_manufacturer_name("Audi").models.find_by_model_name("a6") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T18:55:22.483

如果您有迁移并正在创建一个新数据库，那么您应该创建一个标准数据库。我了解您是否连接到无法设计的数据库。我也会使用小写的字段名称。

如果你想让 MFA_BRAND 成为主键，那么你可以在你的类中设置主键。假设您希望 MFA_ID 作为主键，那么您可以将其添加到您的类中：

```
class Model < ActiveRecord::Base
  set_primary_key "MFA_ID"
end 
```

这将更改 find 和 to_param 方法以使用您的主键字段。

但是，假设您不想更改主键，但有时想通过 MFA_BRAND 进行搜索，那么您将希望将 MFA_BRAND 值作为 CGI 参数传递。首先将路线设置为

```
resources :models do
  collection do
    get :getmanufacturer
  end
end 
```

当您需要路径助手时，请以这种方式调用它：

```
getmanufacturer_models_path(:manufacturer => "Acme") 
```

网址将是

```
/models/getmanufacturer?manufacturer=Acme 
```

# mysql - MySQL用户权限问题

> ID：10164814
> 
> 赞同：1
> 
> 时间：2012-04-15T18:29:50.747
> 
> 标签：mysql, database, security, permissions

我面临用户访问控制的问题。更清楚地说，我创建的 mysql 用户可以访问其他表，而不是我授予的访问权限。假设我以 root 身份登录到 mysql 并且有很多数据库，并且在数据库“test”中，有很多表，其中一个是“news”。我想创建一个用户，该用户只能访问“test.news”中的“select”值。这是它的样子：

```
mysql> grant select on test.news to 'new_user2'@'localhost' identified by 'XXXXXXX';
Query OK, 0 rows affected (0.00 sec) 
```

刷新特权：`flush privileges;`

现在，注销，我以 new_user2 身份登录：

```
/opt/lampp/bin/./mysql -u new_user2 -p 
```

并希望在那里查看数据库：

```
mysql> show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| test               |
+--------------------+
2 rows in set (0.00 sec) 
```

这很好，从某种意义上说，“root”帐户中有其他数据库对 new_user2 不可见。然后，我想查看测试中的表格。所以-

```
use test;
show tables; 
```

这对我来说是第一次震惊。我看到了“测试”数据库中的所有表，这是我没想到的。我只想看到“新闻”表。或者，所有被授予访问数据库中一个表的权限的用户实际上都可以查看所有表是否正常？

第二个震惊，我用于`select *`另一个表-“用户”，它本质上是“测试”中的另一个表，我可以看到用户表中的所有内容。

那么，当我创建“new_user2”并仅授予访问 test.news 的权限时，它如何访问 test.user？`select * from news`工作正常。。

我真的限制了对“test”数据库中所有其他表的访问吗？如果没有，我该怎么做？

好的。好像这还不够，我实际上可以删除由“root”创建的表..

```
mysql> drop table member;
Query OK, 0 rows affected (0.42 sec) 
```

这些是 'new_user2'@'localhost' 在 root 登录时的授权...

```
mysql> SHOW GRANTS FOR 'new_user2'@'localhost';
+------------------------------------------------------------------------------------------------------------------+
| Grants for new_user2@localhost                                                                                   |
+------------------------------------------------------------------------------------------------------------------+
| GRANT USAGE ON *.* TO 'new_user2'@'localhost' IDENTIFIED BY PASSWORD '*XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' |
| GRANT SELECT ON `test`.`news` TO 'new_user2'@'localhost'                                                         |
+------------------------------------------------------------------------------------------------------------------+
2 rows in set (0.00 sec) 
```

我觉得，我在这里缺少一些基本的东西。请帮帮我。太感谢了。

# c++ - C++ - 编译错误

> ID：10164818
> 
> 赞同：0
> 
> 时间：2012-04-15T18:30:05.457
> 
> 标签：c++, compiler-errors

我正在实现一个向量，由于某种原因，我的头文件一直说这个错误：

```
error C2590: 'CopyValues' : only a constructor can have a base/member initializer list
             see reference to class template instantiation 'Vector<T>' being compiled
error C2533: 'Vector<T>' : constructors not allowed a return type
error C2760: syntax error : expected '{' not ';'
error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
error C2039: 'GetNewCapacity' : is not a member of 'Vector<T>' 
```

这是我的标题：

```
template <class T>
class Vector
{
public:
    typedef T* Iterator; 

    Vector(HeapAllocator* allocator);
    Vector(HeapAllocator* allocator, size_t size);
    ~Vector();

    size_t capacity();
    size_t size();
    bool empty();
    void clear();

    Iterator insert(Iterator position, const T& value);
    void insert(Iterator position,size_t n, const T& value);
    void insert(Iterator position,Iterator first, Iterator last);

    void erase();

    void resize(size_t numElements);

    void push_back(const T& item);
    void pop_back();

private:
    void CopyValues(Iterator pBegin, Iterator pEnd, Iterator pTarget):      // when I comment out this method, it compiles fine, why?
    size_t GetNewCapacity(size_t currentCapacity);

    T* mBegin;
    T* mEnd;
    T* mCapacity;
    HeapAllocator* mAllocator;

}; 
```

我盲目地盯着代码，但我找不到任何语法错误。这是什么原因造成的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T18:34:27.523

将此行末尾的 : 替换为 ;

```
void CopyValues(Iterator pBegin, Iterator pEnd, Iterator pTarget): 
```

# java - Ant 包含外部 .jar

> ID：10164822
> 
> 赞同：7
> 
> 时间：2012-04-15T18:31:02.143
> 
> 标签：java, ant, jar, build.xml

我想将外部 jar 包含到我的 java 项目中。我正在使用蚂蚁。外部 .jar 在文件夹 lib 中。我的 build.xml 看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<project>
    <path id="classpath">
        <fileset dir="lib" includes="**/*.jar"/>
    </path>

    <target name="clean">
        <delete dir="build"/>
    </target>

    <target name="compile">
        <mkdir dir="build"/>
        <javac srcdir="src" destdir="build" classpathref="classpath" />
    </target>

    <target name="jar">
        <mkdir dir="trash"/>
        <jar destfile="trash/test.jar" basedir="build">
            <zipgroupfileset dir="lib" includes="**/*.jar"/>
            <manifest>
                <attribute name="Main-Class" value="com.Test"/>
            </manifest>
        </jar>
    </target>

    <target name="run">
        <java jar="trash/test.jar" fork="true"/>
    </target>
</project> 
```

但它不起作用。当我想从外部 .jar 导入某些内容时，命令后出现错误`ant compile`：package com.something does not exist.. 我应该编辑什么才能使其正常工作？

确切的错误：

```
 Compiling 23 source files to xy/build
  xy/src/com/Test.java:5: package com.thoughtworks.xstream does not exist
  import com.thoughtworks.xstream.*;
  ^
  1 error 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T18:37:14.527

您应该尝试不使用包含属性：

```
<fileset dir="lib" /> 
```

在 jar 部分中，您包含如下类：

```
<zipgroupfileset includes="*.jar" dir="lib"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T06:16:45.540

您不能将外部库放入 jar 中并期望类加载器使用这些 jar。不幸的是，这不受支持。

有一个 jar 之类的 ant 任务[可以](http://one-jar.sourceforge.net/index.php?page=build-tools&file=ant)帮助您创建一个 jar 文件，其中包含您需要的所有内容。

这一点来自[一个罐子的背景信息](http://one-jar.sourceforge.net/index.php?page=introduction&file=background)：

> 不幸的是，这是行不通的。Java Launcher$AppClassLoader 不知道如何使用这种 Class-Path 从 Jar 中的 Jar 中加载类。尝试使用 jar:file:jarname.jar!/commons-logging.jar 也会导致死胡同。这种方法只有在您将支持的 Jar 文件安装（即分散）到安装 jarname.jar 文件的目录中时才有效。
> 
> 另一种方法是解压缩所有依赖的 Jar 文件并将它们重新打包到 jarname.jar 文件中。这种方法往往脆弱且缓慢，并且可能会遇到重复资源问题。

其他选择：

*   [jarjar](https://code.google.com/p/jarjar/) : Jar Jar Links 是一个实用程序，可以轻松重新打包 Java 库并将它们嵌入到您自己的发行版中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T04:01:33.240

我还使用 ant 在我的 JAR 中包含许多依赖项 JAR。我的编译任务如下所示。也许类似的东西对你有用。

```
<target name="compile" depends="init">
   <javac srcdir="${src}" destdir="${build}" includeantruntime="false">
    <classpath>
      <pathelement path="${classpath}" />
      <fileset dir="${deps}">
         <include name="**/*.jar"/>
      </fileset>
    </classpath>
  </javac>
  <copy todir="${build}">
    <fileset dir="${src}" excludes="**/*.java"/>
  </copy>
</target> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T07:07:22.897

有时你可以直接使用 jar 内容，只需解压缩

```
 <unzip src="/Developer-Java/mysql-connector-java/mysql-connector-java-5.1.22-bin.jar" dest="${build_dir}" /> 
```

# iphone - 等效于 CCLayer 的 -viewDidAppear？

> ID：10164826
> 
> 赞同：0
> 
> 时间：2012-04-15T18:31:36.217
> 
> 标签：iphone, ios, cocos2d-iphone, uikit

**问题：**
在 iPhone 的 cocos2d 领域，什么相当于 UIKit 的 CCLayer 的 -viewDidAppear 回调？

*如果不存在等价物（*就像文档中的情况一样*），您推荐的了解 CCLayer 何时呈现的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T00:55:37.207

有这两种方法非常相似

```
- (void)onEnter;
- (void)onEnterTransitionDidFinish; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T03:52:34.553

好吧，通常在创建 CCLayer 并向其添加 sprite 时会渲染 CCLayer。你应该在游戏开始之前做这一切。然后，您可以移动图层并为其对象设置动画，而无需担心“何时”完成渲染（通常）。

场景是另一回事。场景是设置图层并创建它们、加载图像、精灵等，这可能需要一些时间。为此，您有几个选择。一种有效的选择是 the `onEnter`and`onExit`系列方法。然而，另一个非常好的方法是简单地拥有一个中间场景，例如您加载的大部分是空的、精简的加载 CCScene，然后该场景加载您尝试加载的大场景。执行此操作时，您将在添加新内存之前释放旧内存。

这实际上取决于您尝试使用等效的 viewDidAppear 来完成什么。

# jquery - 我可以将这两个 jQuery on() 事件与 toggle() 合并吗？

> ID：10164829
> 
> 赞同：2
> 
> 时间：2012-04-15T18:32:08.447
> 
> 标签：jquery, toggleclass

必须有一种方法可以在一个 toggleClass() 中执行这些操作：

```
$('div').on("mouseenter", ".myButton", function(){
        $(this).addClass('rollOver');
    });
$('div').on("mouseleave", ".myButton", function(){
        $(this).removeClass('rollOver');
    }); 
```

...但它在 on() 中，因为 myButton 是动态创建的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T18:35:11.333

```
$('div').on("mouseleave mouseenter", ".myButton", function (e){
  $(this).toggleClass('rollOver', e.type == "mouseenter");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T18:38:10.757

```
 $('div').on("mouseenter mouseleave", ".myButton", function(){
        $(this).toggleClass('rollOver');
    }); 
```

# java - 使用埃拉托色尼筛法检查素数

> ID：10164833
> 
> 赞同：-4
> 
> 时间：2012-04-15T18:32:39.403
> 
> 标签：java, algorithm

考虑以下问题：“在给定的整数范围内，有多少个数字的数字和和平方和都是质数？”

我正在查看[codereview](http://codereview.stackexchange.com)，[在这里](https://codereview.stackexchange.com/questions/8319/puzzle-sum-of-the-digits-is-prime-or-not)我发现了一个有趣的问题并试图解决它。

因此可以`prime numbers`以一种普通的方式进行检查，即使用`for`循环 from `2`to`i`并检查可分性。

有趣的事情就[在这里](https://codereview.stackexchange.com/a/8339/12649)。`BlueRaja - Danny Pflughoeft`建议一个技巧：“由于您只需要筛选到要测试素数的数字的平方根，因此您只需要将筛选器从 3 运行到* `sqrt(⌈log10(B)⌉*81)`”。

我有一个关于实施的问题`Sieve of Eratosthenes`。
的大小是多少`boolean array`，其中包含要处理筛子的数字。？有人可以写代码或任何提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T18:48:58.860

下面是使用 Java 实现埃拉托色尼筛法的示例：[链接](http://introcs.cs.princeton.edu/java/14array/PrimeSieve.java.html)。

对于您的问题的第二部分，请参阅[此](https://codereview.stackexchange.com/questions/8319/puzzle-sum-of-the-digits-is-prime-or-not)链接：

> "一个n位数的最大平方和是n*9*9 = n*81。一个数B的位数是⌈log10(B)⌉。既然你只需要筛分到您要测试素数的数字的平方根，您只需要将筛子从 3 运行到 sqrt(⌈log10(B)⌉*81)。即使 B = 10 亿，这意味着您需要筛分的最大值到 28 岁。”

# html - @font-face 的悬停区域错误？

> ID：10164839
> 
> 赞同：0
> 
> 时间：2012-04-15T18:33:08.677
> 
> 标签：html, css, hover, font-face

我的电话簿网络应用程序出现问题。访问此演示，您将了解：

[http://what-the-fun.com/lab/](http://what-the-fun.com/lab/)

悬停区域延伸到每个按钮的顶部，这意味着您无法轻松单击位于另一个按钮上方的按钮。关闭“icon”类上的字体系列（“EntypoRegular”），看看我认为是什么导致了问题。

我怎么解决这个问题？任何建议表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T18:37:35.010

添加`overflow:hidden`到`.icon`应该修复它。

# java - 关于 hashcode() 和 equals()

> ID：10164840
> 
> 赞同：-1
> 
> 时间：2012-04-15T18:33:09.880
> 
> 标签：java, hashcode

我有一个 POJO，其中包含我已覆盖`hashcode()`的`equals()`方法，但我的查询是，如果我进行`hashcode()`方法注释，那么在集合中，当我存储用户定义的对象时，可以在 hashmap 中说它会有什么影响......另一件事是，如果我将 equals 方法作为注释，那么它会有什么影响 如果我尝试输入重复记录，它是否会存储重复记录两次！

```
public class Employee {

 String name,job;
 int salary;

 public Employee(String n , String j, int t )
 {
     this.name= n;
     this.job=j;
     this.salary= t;         
 }

/* @Override
public int hashCode() {
    final int prime = 31;
    int result = 1;
    result = prime * result + ((job == null) ? 0 : job.hashCode());
    result = prime * result + ((name == null) ? 0 : name.hashCode());
    result = prime * result + salary;
    return result;
}*/

 /*@Override
public boolean equals(Object obj) {
    if (this == obj)
        return true;
    if (obj == null)
        return false;
    if (getClass() != obj.getClass())
        return false;
    Employee other = (Employee) obj;
    if (job == null) {
        if (other.job != null)
            return false;
    } else if (!job.equals(other.job))
        return false;
    if (name == null) {
        if (other.name != null)
            return false;
    } else if (!name.equals(other.name))
        return false;
    if (salary != other.salary)
        return false;
    return true;
}
 */

 @Override
 public int hashCode()
     {       
     return name.hashCode()+job.hashCode()+salary;       

 }

 @Override
    public boolean equals(Object obj) {  
     if (this == obj)  
    {  
        return true;   
    }  
    // make sure o can be cast to this class  
    if (obj == null || obj.getClass() != getClass())  
    {  
        // cannot cast  
        return false;  
    }           

     Employee e = (Employee) obj;   
     return this.name.equals(e.name)&&this.job.equals(e.job)&&this.salary==e.salary;
 }

 @Override
 public String toString() {
        return name+"\t" +"\t"+  job +"\t"+ salary;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T18:58:07.057

无论您做什么或不注释掉，*同一个对象*（按地址）都不能两次添加到集合中。（对于`equals()`和的任何合理定义`hashCode()`）。

当您有两个对象`o1`并且`o2`“意味着”相同的事物（具有相同的数据）时：

如果您注释掉`hashCode()`，您（几乎总是）将能够将两者添加到相同的`HashSet`，即使`equals()`说这两个对象是相同的（或作为相同的键`HashMap`）。这是因为所有基于哈希的数据结构都先按哈希码比较对象，然后按`equals()`.

如果您在`equals()`没有注释的情况下将其注释掉`hashCode()`，则所有集合都会表现得好像对象不相等。这是因为即使是基于哈希的比较也会在检查`equals()`后检查`hashCode()`，因为即使在正确实现`hashCode()`和时也会发生哈希冲突`equals()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T18:35:47.043

一旦您注释掉某些内容，它就不会被编译，并且不会对您程序的其余部分产生任何影响。

此外，不覆盖该`Object.equals()`方法意味着`equals()`仅当两个对象是同一个实例时才会返回 true。例如：

```
int[] data = data; //data to create object
mObject o1 = new mObject(data); //new object from data
mObject o2 = new mObject(data); //another object from the same data
System.out.println(o1.equals(o2)); //prints false even though o1 and o2 contain the same information. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T18:38:43.717

如果您省略`equals`，它将使用该`Object.equals`方法，该方法`true`仅在两个对象是同一个实例的情况下。

因此，不会添加重复的*对象*，但如果通过不同的对象实例添加相同的数据，则可能会添加重复的*记录。*

# iphone - 使用 MKstorekit 的自动更新应用内？

> ID：10164841
> 
> 赞同：0
> 
> 时间：2012-04-15T18:33:12.730
> 
> 标签：iphone

我在 Iphone 中有一个应用程序，我正在尝试使用 MKstorekit4.3 实现 Autorenewable 订阅。我注意到那里有一些服务器代码。是否可以在不使用服务器组件的情况下使用它。因此，通过将自己的服务器设置为 nil 并将访问权限设置为 nil。任何人都可以帮助我使用确切的机制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T17:04:46.880

是的——您不需要使用自己的服务器；如果您不提供自己的验证 URL，MKStoreKit 将直接使用 Apple 服务器上的验证 URL。但不推荐，出于安全原因。

# ios - 创建用于在 iOS 设备上共享的交互式页面（视频、照片）

> ID：10164848
> 
> 赞同：0
> 
> 时间：2012-04-15T18:33:40.107
> 
> 标签：ios, xcode

我正在使用情节提要构建一个 iOS 应用程序。我创建了一个页面，用户可以在其中创建一个页面，然后将其发布在 DropBox 上并在所有应用程序用户之间共享。此页面允许您添加照片、视频（尚未）和文本视图（启用滚动）。直到知道用户何时按下上传按钮，才会截取并上传屏幕截图，然后从表格视图中查看。但显然它只是一个图像，所以你不能滚动文本字段来查看所有内容，如果我想添加视频支持，它将无法播放。我尝试在互联网上进行研究，但我有点困惑。我是否必须单独保存所有组件（UITextField ...），并将它们放在同一个 DropBox 文件夹中，然后将它们全部放回一起？你有什么建议？有办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T23:38:26.097

当然，您必须单独保存数据……您的程序怎么知道如何创建视图？我推荐 JSON 或 XML。不要问如何构建它，这是一个不同的问题，你应该考虑自己。

# c# - 按层访问而不是按组件访问

> ID：10164849
> 
> 赞同：0
> 
> 时间：2012-04-15T18:34:00.347
> 
> 标签：c#, model-view-controller, dependency-injection, inversion-of-control

我有一个跨层传输的业务层对象，Widget。我希望它在不同的层中公开一组不同的属性。以下是编译器读取注释时的样子：

```
//bl.dll

public abstract class Widget
{
    //repo only
    internal virtual Ppty_A {get;set;} //internal to implementation assembly of repo

    //repo and service only
    internal virtual Ppty_B {get;set;} //internal to implementation assemblies of repo/svc

    //everyone inlcuding presentation
    public virtual Ppty_C {get;set;} 
}
public interface IWidgetService
{ ... }    }
public interface IWidgetRepo
{ ... }
public class SimpleWidgetService : IWidgetService
{ ... }

//dal.dll
using bl;
public WidgetRepo
{ ... }

//presentation.dll
using bl;
public WidgetController
{
    public WidgetController(IWidgetService ...)
    ...
} 
```

我的想法是这样做（我还没有测试过，它只解决了一半的问题）：

```
//bl.dll
public abstract class Widget
{
    //repo only simply can't be defined in the abstraction -- can't see you => no contract

    //repo and service only has to be public?
    public virtual Ppty_B {get;set;}

    //at least public is public...
    public virtual Ppty_C {get;set;} 
}

//dal.dll
using bl;
public SQLWidget : Widget //Or actually DALBLWidget -- see below?
{ 
    //repo only
    internal ...
    internal ...

    //the rest
    ...
} 
```

我应该只创建另一个抽象小部件（有一个 DAL-BL 小部件和一个 BL-UI 小部件）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T19:29:20.000

您可以让 Widget 类实现对应于每一层的不同接口。

```
public class Widget : IDataLayerWidget, IBusinessLayerWidget
{
 // Properties
}

public interface IDataLayerWidget
{
   // Properties visible to the DataLayer
}

public interface IBusinessLayerWidget
{
   // Properties visible to the BusinessLayer
} 
```

在您的 DataLayer 中，您将使用`IDataLayerWidget`和 在您的业务层中使用`IBusinessLayerWidget`.

# ios - 存储但不将 NSManagedObject 保存到 CoreData？

> ID：10164850
> 
> 赞同：6
> 
> 时间：2012-04-15T18:34:16.367
> 
> 标签：ios, objective-c, core-data, nsmanagedobject, nsmanagedobjectcontext

我在我的应用程序中有一个简短的设置过程，我创建了一个 NSManagedObject 来存储个人的姓名和其他详细信息，但是在此设置期间，我不想保存对象，直到用户在结束时按下“完成”设置（以防他们出于任何原因取消设置）。

那么是否可以在不实际将其保存到CoreData中的情况下将持有我的信息的对象保持一小段时间直到设置过程结束？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-15T18:46:26.470

你也可以使用

```
NSEntityDescription *ed = [NSEntityDescription entityForName:@"YourManagedObject" inManagedObjectContext:managedObjectContext];
YourManagedObject *obj = [[[YourManagedObject alloc] initWithEntity:ed insertIntoManagedObjectContext:nil] autorelease]; 
```

创建托管对象而不将其插入到您的上下文中。您可以稍后通过调用`[managedObjectContext insertObject:obj];`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T18:38:30.430

当您处理 CoreData 时，所有添加/修改/删除操作都发生在 NSManagedObjectContext 中 - 但更改不会持久保存到磁盘，直到您对该上下文调用“保存”。

所以答案是肯定的——这是你应该已经得到的行为。如果您正在添加或修改 NSManagedObjects 的属性，这些更改将保存在上下文的内存中，但在您实际调用“保存”之前不会保存到磁盘。

# sql - 如何在 PHP 中相对简单的 CRUD 模型中构建表结构？

> ID：10164854
> 
> 赞同：0
> 
> 时间：2012-04-15T18:35:02.880
> 
> 标签：sql, database-design, model, crud

我使用简单的 php MVC 框架和简单的 CRUD 模型。

任何方法都可以添加到模型中，所以我可以使用`join`sql-logic 添加复杂的方法，但我想只尝试 CRUD 方法，而不需要连接。

因此，例如，我想添加将照片添加到用户个人资料的功能。

我建议 2 (+1) = 3 种变化：

**1** . 将照片的 ID 保存在用户表中：

`User`型号和`users`表格：

> 编号 | 登录 | 电子邮件 | 照片 |
> 
> *   photos 是一组照片的 ID。

`Photo`型号和`photos`表格：

> 编号 | 源代码
> 
> *   在 photos 表中我们只保留图片的 id 和 src，不知道它是谁的图片

**2.**在照片表中保存用户的ID（作为照片所在用户的ID）

型号`User`及`users`表：

> 编号 | 登录 | 电子邮件
> 
> *   此表中没有有关照片的信息

型号`Photo`及`photos`表：

> 编号 | 源代码 | 用户身份
> 
> *   保留拥有这张照片的用户信息，如果用户有 3 张照片，则此表中将有 3 条记录

**3.** 3表方式：

桌子`users`

> 编号 | 登录 | 电子邮件（* 此表中没有有关照片的信息）

桌子`photos`

> 编号 | src (* 没有关于谁的照片的信息)

桌子`user-photo`

> 编号 | 用户 ID | photo_id (* 照片关系表)

我认为，第二种方式更简单，因为我们不应该解析 SQL 数组，它只是简单的 CRUD 操作。

但是第一种方法更快吗？第一种方式，当我们要获取用户信息时，我们知道照片的id，并通过-主键从`photos`表中获取照片。`id`但是在第二种方式中，我们从`photos`表中获取照片`user_id`- 不是主键，所以它应该更慢。

你有什么建议吗？对于这样的问题，绝对有另一种解决方案吗？

PS对不起，解释混乱，我有一段时间没有用英语提问，所以欢迎您纠正我的英语不好;）

**更新：**我添加了第三个变体。它是最好的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T00:17:30.953

好吧，您似乎已经知道，不要使用第一个选项，它不能很好地与 SQL 配合使用。

在选项 2 和 3 之间，请考虑以下事项：

*   如果每张图片仅与单个用户相关，则选项 2 就足够了。选项 3 只是增加了不必要的复杂性。

*   如果每张图片可以与多个用户相关，那么您必须使用选项 3。

因此，据我所知，您正在寻找选项 2。

# jquery - 在同一页面上的两个不同文章标签上使用相同的 jquery

> ID：10164859
> 
> 赞同：-2
> 
> 时间：2012-04-15T18:35:15.837
> 
> 标签：jquery, html

我在同一页面上的两个不同文章标签上使用 Jquery 文件。这是两个不同的文章标签，

第一篇文章标签，

```
 <article id="popupAbout" class="popupAbout"> <a id="popupAboutClose"><img src="../original/images/close.png" width="50" alt="" /></a>
  <h1>Maps of Arizona</h1>
  <div id="container">
    <div id="photo-wrapper">
        <img class="image" id="image1" src="images/Wet.jpg"  height="450px" width="800px" alt="image 1"/>
        <img class="image" id="image2" src="images/Dens.jpg" height="450px" width="800px" alt="image 2"  />
        <img class="image" id="image3" src="images/Slope.jpg" height="450px" width="800px" alt="image 3"  />

        <!-- 
        <div id="transition-container"> This effect is not needed for this demo         
        </div>
        -->

        <img id="previous-btn" src="images/left_arrow.png" alt="Previous Button" />
        <img id="next-btn" src="images/right_arrow.png" alt="Next Button" />
    </div>
  </div>  
</article> 
```

第二条标签，

```
 <article id="popupProjects" class="popupProjects"> <a id="popupProjectsClose"><img src="../original/images/close.png" width="50" alt="" /></a>
  <h1>Maps of Four States</h1>
  <div id="container">
    <div id="photo-wrapper">
        <img class="image" id="image1" src="images/3843_T_av6_4states.jpg"  height="450px" width="800px" alt="image 1"/>
        <img class="image" id="image2" src="images/4.jpg" height="450px" width="800px" alt="image 2"  />
        <img class="image" id="image3" src="images/beach6.jpg" height="450px" width="800px" alt="image 3"  />

        <!-- 
        <div id="transition-container"> This effect is not needed for this demo         
        </div>
        -->

        <img id="previous-btn" src="images/left_arrow.png" alt="Previous Button" />
        <img id="next-btn" src="images/right_arrow.png" alt="Next Button" />
    </div>
  </div>
</article> 
```

如您所见，标签内容几乎相同。我在两者上都使用相同的[Fade.js。](http://jsfiddle.net/smaran/PgRfq/)第一个工作正常，但第二个，我只能看到按钮和图像容器，它是空的。

帮助！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T18:39:24.730

问题可能是由于您正在重用 ID。所有 id 必须是唯一的，但您多次使用相同的（例如 next-btn）。

将您的 jQuery 更改为按类而不是 id 选择，并确保两篇文章都包含相同的类。

# matlab - Matlab - 分水岭提取线 - 丢失的信息

> ID：10164861
> 
> 赞同：5
> 
> 时间：2012-04-15T18:35:41.717
> 
> 标签：matlab, image-processing, watershed

![在此处输入图像描述](../Images/0b622c6e880b4402a75bd015ceb43fba.png)

我有如下的静脉图像。我使用分水岭算法来提取静脉的骨架。

我的代码：（K是原始图像）。

```
level = graythresh(K);
BW = im2bw(K,level);
D = bwdist(~BW);
DL = watershed(D);
bgm = DL == 0;
imshow(bgm); 
```

结果是：

![在此处输入图像描述](../Images/2b4c120046b1da6d9825ed952bc64ed9.png)

正如你所看到的，很多信息都丢失了。有人可以帮帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T03:28:12.460

看起来光线有些不均匀。这可以使用某些形态学操作来纠正。基本思想是计算仅代表不均匀照明的图像并将其减去，或除以它（这也增强了对比度）。因为我们只想找到光照，所以使用足够大的结构元素很重要，这样操作会检查更多的全局属性而不是局部属性。

```
%# Load image and convert to [0,1].
A = im2double(imread('http://i.stack.imgur.com/TQp1i.png'));
%# Any large (relative to objects) structuring element will do.
%# Try sizes up to about half of the image size.
se = strel('square',32);
%# Removes uneven lighting and enhances contrast.
B = imdivide(A,imclose(A,se));
%# Otsu's method works well now.
C = B > graythresh(B);
D = bwdist(~C);
DL = watershed(D);
imshow(DL==0); 
```

这是`C`（左）、加`DL==0`（中）及其在原始图像上的叠加：

![按收盘分](../Images/3a9ef1ba78c8846bb8fd5b35dd24cdf3.png) ![大津的方法](../Images/be04642dcabcf6882afb893335b450fd.png) ![分割叠加](../Images/74bece540b55a1d61e6ed812c2efe82b.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T21:56:03.247

是的，您可能需要降低阈值（低于 Otsu 的方法给您的阈值）。如果降低阈值时边缘图有噪声，则应在降低阈值之前应用二维高斯平滑滤波器。这会稍微移动边缘，但也会清除噪音，所以这是一个折衷方案。

二维高斯可以应用做类似的事情

```
w=gausswin(N,Alpha)  % you'll have to play with N and alpha
K = imfilter(K,w,'same','symmetric'); % something like these options 
```

在应用算法的其余部分之前。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T22:07:57.890

您正在丢失信息，因为当您应用 时`im2bw`，您基本上是将`uint8`像素亮度从`intmin('uint8')==0`到取值`intmax('uint8')==255`的图像转换为二进制图像（仅`logical`使用值）。这会导致您观察到的信息丢失。如果显示图像`BW`，您将看到其所有`K`值大于阈值的元素都`level`变为 1，而低于阈值的元素变为 0。

# javascript - 如果 jqgrid 大于视口，如何在 android 中访问它

> ID：10164864
> 
> 赞同：1
> 
> 时间：2012-04-15T18:35:48.920
> 
> 标签：javascript, jquery, android, mobile, jqgrid

环境

```
 <meta name = "viewport" content = "width = device-width"/> 
```

用于允许用户在不缩放的情况下使用 jqgrid。

如果 jqgrid 的宽度或高度大于视口，则在 Android 中无法访问其外部的 jqgrid 行和列。没有滚动条。向上或向下点击将被忽略。

如何使视口外的零件可访问？应该为 jqgrid 或其他想法在 javascript 中实现 tap() 事件处理程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T18:37:48.010

尝试为容器设置溢出。（在样式表上，您必须设置**溢出：自动；** ...）

如果 Container-Content 大于 Container，则会自动激活 Scrolling。

# visual-studio - 在 Visual Studio & resharper 中创建自定义模板

> ID：10164865
> 
> 赞同：1
> 
> 时间：2012-04-15T18:36:02.300
> 
> 标签：visual-studio, visual-studio-2010, templates, resharper, resharper-6.0

我想为 c# 文件、单元测试类、.aspx.cs 等创建自定义模板，以便在创建后包含所有文件的公共项目，例如文件头。我正在使用 Visual Studio 2010 和 resharper 6。创建这些文件的最简单方法是什么，是否可以轻松地与开发人员团队共享它们？感谢任何关于我如何实现这一目标的帮助或信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T18:52:19.957

您应该从`ReSharper | Templates Explorer`. 然后选择文件模板选项卡。ReSharper 附带了一些默认模板。您可以检查它们，看看如何编写自己的。这是[文档](http://www.jetbrains.com/resharper/features/code_templates.html#File_Templates)，并且有一个有用示例的[问题](https://stackoverflow.com/questions/186970/what-resharper-4-live-templates-for-c-sharp-do-you-use)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T18:41:37.523

Visual Studio 模板的创建非常简单——您可以将它们分发给您的同事，以便在他们计算机上的相同位置进行设置（或者甚至创建一个安装程序，如果您想让事情变得更简单）。

请参阅MSDN 上的[创建项目和项模板](http://msdn.microsoft.com/en-us/library/s365byhx.aspx)以及[Visual Studio 模板简介](http://msdn.microsoft.com/en-us/library/ms247121.aspx)。

> ### 模板的内容
> 
> 所有项目和项模板，无论是与 Visual Studio 一起安装还是由您创建，都使用相同的原理并具有相似的内容。所有模板都包含以下项目：
> 
> 使用模板时要创建的文件。这包括源代码文件、嵌入式资源、项目文件等。
> 
> 一个 .vstemplate 文件。此文件包含的元数据为 Visual Studio 提供在“新建项目”和“添加新项目”对话框中显示模板以及从模板创建项目或项目所需的信息。有关 .vstemplate 文件的详细信息，请参阅 Visual Studio 模板元数据文件。
> 
> 当这些文件被压缩成 .zip 文件并放入正确的文件夹时，Visual Studio 会自动将它们显示在“新项目”和“添加新项”对话框的“我的模板”部分中。有关模板文件夹的更多信息，请参阅如何：查找和组织项目和项模板。

# visual-c++ - 如何在 Assembler 中反转 XOR 操作？

> ID：10164868
> 
> 赞同：0
> 
> 时间：2012-04-15T18:36:12.153
> 
> 标签：visual-c++, assembly, encryption

我目前正在尝试编写一个解密例程，加密例程中的步骤之一是：

```
xor eax,edx  // xors eax(current character) and edx (the key) 
```

显然我会知道关键所以有什么想法可以扭转这个操作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T18:38:33.463

XOR 是它自己的逆。（按位：与 0 进行异或不会改变一点。与 1 进行异或会翻转它，再做一次会将它翻转回来。）

只需将“加密”值和密钥再次异或：

```
encrypted = plain XOR key
encrypted XOR key = (plain XOR key) XOR key
encrypted XOR key = plain XOR (key XOR key)
encrypted XOR key = plain XOR (000...0)
encrypted XOR key = plain 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T04:09:59.730

它可能有助于可视化 XOR 的行为。如果仅在其中一个操作数中设置了位，则 XOR 操作仅设置位。如果两者都设置，则结果为 0。这是“排他性”，否则它的行为类似于 OR：

```
source : 0011
key    : 0101
xor-ed : 0110 
```

因此，如果您再次使用 edx 中的相同密钥对 eax（现在包含加密值）进行异或运算，您将获得原始来源：

```
crypted: 0110
key    : 0101
xor-ed : 0011 
```

# c# - 实体框架外键空保持为实体输入

> ID：10164871
> 
> 赞同：1
> 
> 时间：2012-04-15T18:36:27.850
> 
> 标签：c#, asp.net-mvc, entity-framework, entity-framework-4

我有 2 节课，如下所示。

```
public class Quest
{
    public int ID{ get;set; } 

    public string Objective
    {
        get;
        set;
    }

    public DateTime StartDate
    {
        get;
        set;
    }

    public string Story
    {
        get;
        set;
    }

    public virtual QuestLocation Location
    {
        get;
        set;
    }
}
    public class QuestLocation
{
    public DateTime CreateDate
    {
        get;
        set;
    }

    public int ID
    {
        get;
        set;
    }

    public double Latitude
    {
        get;
        set;
    }

    public double Longitude
    {
        get;
        set;
    }

    public virtual Quest Quest
    {
        get;
        set;
    }

} 
```

我创建了一个新的 Quest 实例，然后我设置了 Quest 的 location 属性，只需创建一个 QuestLocation 类的新实例。

```
 Question q = new Question();
   q.StartDate = DateTime.Now;
   q.Objective = "foo";
   q.Location = new QuestLocation(){ CreateDate = DateTime.Now, Latitude = 10 , Longitude = 10 };

   And add newly created Quest into Database :
   DataContext.Quests.Add(q);
   DataContext.SaveChanges(); 
```

当我查看我的数据库时，到目前为止我已经初始化的每个对象都被创建了。然而，QuestLocation 的外键“Quest_ID”仍然为 NULL。我怎么能想出这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T18:43:08.573

您必须在 questlocation 对象上设置 quest_id。在数据库中将外键字段 (quest_id) 设置为非空也是一个很好的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T18:46:03.360

```
Question q = new Question();
QuestionLocation qL = new QuestLocation(){ CreateDate = DateTime.Now, Latitude = 10 , Longitude = 10 };
q.StartDate = DateTime.Now;
q.Objective = "foo";
q.Location = qL;

//And add newly created Quest into Database :
DataContext.QuestLocations.Add(qL);
DataContext.SaveChanges();

DataContext.Quests.Add(q);
DataContext.SaveChanges(); 
```

# c++ - 如何使用变量的值在我的代码中执行操作？

> ID：10164878
> 
> 赞同：0
> 
> 时间：2012-04-15T18:37:10.650
> 
> 标签：c++, html-parsing

我正在尝试为 C++ 分配解析 HTML 文件。作业是演示堆栈；我们应该在每次点击标签时推送到堆栈，然后在找到相应的结束标签时弹出。

老师显然希望我们硬编码一组标签来检测，比如：

```
// Declare some stacks
Stack html;
Stack div;
...

// When you find an open tag, push to the corresponding stack
if (tagcontents == "html") { html.push(); }
if (tagcontents == "div") { div.push(); }
...

// When you find a close tag, push to the corresponding stack
if (tagcontents == "/html") { html.pop(); }
if (tagcontents == "/div") { div.pop(); }
... 
```

这样做的明显缺点是，如果我想支持[HTML 中可用的所有标签](http://www.w3schools.com/tags/default.asp)，我可以期望进行大量冗余编码。老师显然希望我们只选择可用标签的一小部分，然后去掉那些，但我认为这很**蹩脚**。由于我很懒（而且我坚信所有程序员都应该如此），我正在尝试提出一个动态解决方案。

这个想法是，每当我遇到一个新标签时，为它创建一个堆栈。这将允许我的程序支持任何标签，无论其有效性如何。不过，我遇到了一个有趣的理论问题，我什至不知道该怎么称呼它来研究它。也就是说，我需要使用变量的 VALUE 作为我实际代码的一部分。IE：

```
if (no stack exists named "HTML") { create a stack named "HTML" } 
```

简单来说，我怎么能：

```
tag = "html";
Stack tag;  // make a stack named HTML? 
```

还是有其他方法可以做到这一点？任何帮助将不胜感激。如果我无法弄清楚这一点，我可能会像退出者一样使用 switch/case 语句。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T18:53:03.393

这是一个例子：

```
#include <stdio.h>
#include <map>
#include <string>
#include <list>
#include <iostream>

typedef std::list<std::string> stack;
typedef std::map<std::string, stack> stack_map;

stack_map my_stacks;

stack& getStack(const std::string& stack_name) {
   stack_map::iterator it = my_stacks.find(stack_name);
   if( it != my_stacks.end() ) {
      return it->second;
   } else {
      my_stacks[stack_name] = stack();
      return my_stacks[stack_name];
   }
}

...
stack& div_stack = getStack("div");

// and use that for example
div_stack.push_back("some info");
div_stack.push_back("some more info ... ");
div_stack.push_back("s  even more ... ");

..... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T18:43:06.550

在`std::map<std::string, Stack>`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T18:43:50.747

使用地图/无序地图：

`std::map <std:string, Stack> myStacks;`

然后你可以做

`myMastacks[tagcontents].push()`

如果密钥尚不存在，这将为密钥初始化一个新堆栈。

在标签的末尾，去掉斜线，检查它是否在地图上，然后就可以了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-15T18:44:59.480

我会做不同的事情，更简单，所有标签只有一个堆栈（我认为这是非常合理的，除非你的老师真的指示你使用几个堆栈）：声明一堆字符串。一个字符串代表一个标签。您可以为此使用 STL 堆栈：

`stack<string> my_tags;`

`my_tags.push("div")`将“div”推入堆栈。 `string tag = my_tags.top();`将查询堆栈的顶部，并`my_tags.pop()`从堆栈中弹出顶部项目。很容易 ：-）

同样，如果您真的不需要练习几个堆栈，但要检查您在 html 解析中的位置，这个解决方案是很好的。

# c++ - 检查来自文件的传入数据类型

> ID：10164884
> 
> 赞同：0
> 
> 时间：2012-04-15T18:37:42.373
> 
> 标签：c++, int, fstream

我正在从一个看起来类似于以下内容的 .txt 文件中读取内容：

```
int string string string
int string string
int string string string string string 
```

每个之后的`string`类型数量`int`是未知的。每行代表一组新的值，每组都需要放入自己的数组值或其他值（不知道我是否用词正确，但我希望你能理解我的意思）。

有没有我可以执行的检查，看看来自文件的传入数据是否是`int`这样，如果这是真的，并且可以告诉我的程序它是一组新数据？

我试过了

```
int check
if(check = file1.peek()){//start new group assignment} 
```

但这似乎不起作用。`int`一旦我发现它是被读取的下一个数据类型，我需要能够使用该值。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T18:42:13.143

有几种方法可以做到这一点，但是我建议您的组可能位于不同的行上，并且行内的空格分隔组内的项目是否正确？

所以我会读取文件，一次一行，然后在空格上分割每一行。

让我知道上述是否适合，然后我们可以解释如何去做。

好的，您可以使用*getline*：

```
while (cin.good()) // reading from standard input until EOF
{
    String line_str;
    getline(cin, line_str); // get next line from standard input
    istringstream line(line_str); // put line into string stream

    if (line.good()) // read from string stream until EOF
    {
        int x;
        line >> x; // read an integer from string stream

        while (line.good()) // read from string stream until EOF
        {
            string s;
            line >> s; // read strings from string stream
            /// process s
        }
    }
} 
```

# java - 使用正则表达式在某些字符和转义序列之间拆分字符串

> ID：10164893
> 
> 赞同：0
> 
> 时间：2012-04-15T18:39:09.610
> 
> 标签：java, regex, expression

我只想在为这个例子构建一个正则表达式公式时寻求一些帮助：

```
Brgy. Captain : Kgg. Constancia M. Reyes\nKagawad : Kgg. Henry A. Artisen\n             Kgg. Juliana S. Santos\n                Kgg. Sonia C. Alzona\n              Kgg. Fernandito L. Perez\n              Kgg. Ismael V. Capunitan\n              Kgg. Gregoria R. Sanchez\n              Kgg. Nerisa Maristañes 
```

我在 Ecplise IDE 中使用 Java。我只想获取所有议员的姓名，然后忽略所有前面和后面的字符。这就是我想要得到的：

*   公斤。康斯坦西亚·M·雷耶斯
*   公斤。康斯坦西亚·M·雷耶斯
*   公斤。朱莉安娜·S·桑托斯
*   公斤。索尼娅·C·阿尔佐纳
*   公斤。费尔南迪托·L·佩雷斯
*   公斤。伊斯梅尔诉卡普坦
*   公斤。格雷戈里亚·R·桑切斯
*   公斤。内丽莎·玛丽斯塔涅斯

首先这可能吗？

我尝试使用这个正则表达式，因为我有一个谷歌浏览器应用程序，然后可以测试一个正则表达式公式但未能匹配它：`(Brgy. Captain :).\\n+(Kagawad :).\\n+`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T18:55:03.633

如果它总是`Kgg`，那么这应该工作：

```
(Kgg.*?)(?=\\n) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T19:25:29.307

Justin Pihony 提供的答案与所有​​给定的议员姓名匹配，但最后一个。也许您试图删除所有匹配的内容而不是保留。

```
(\\n.*?)(?=Kgg) 
```

这个是相反的。它匹配之间的一切。但要使其正常工作，您必须在列表的开头添加另一个 \n。

对于 Eclipse，我可以向您推荐以下插件，用于非常快速地测试正则表达式： http: [//myregexp.com/eclipsePlugin.html](http://myregexp.com/eclipsePlugin.html)

对于正则表达式的基本理解：[http ://www.regular-expressions.info/reference.html](http://www.regular-expressions.info/reference.html)

高温高压

# android - 在向后兼容的代码中有这么多不推荐使用的方法可以吗？

> ID：10164896
> 
> 赞同：7
> 
> 时间：2012-04-15T18:39:30.150
> 
> 标签：android, warnings, deprecated, backwards-compatibility

我正在编写一个针对 API 级别 15 的 Android 应用程序，但我也想保持与旧 API 级别（min-sdk 7）的向后兼容性。

我将通过设置根据当前 API 级别决定使用哪些代码的条件来实现这一点（如下所示）。我想这是一个很好的方法，我只是想问一下有这么多不推荐使用的方法（比如`display.getWidth()`）是否可以，因为 API 级别 8 和 15 之间有很多变化。如果是这样，如果它很好地使用`@SuppressWarning("deprecation")`in这个案例？

例如对于 API 级别 <= 8 和 >= 9 使用多个 APK 不是更好吗？（即使[developer.android.com](http://developer.android.com/guide/market/publishing/multiple-apks.html)不推荐它。

```
 Display display = ((WindowManager) getContext().getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();
    Point screenSize = new Point();

    // calculate the width
    float width;
    if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB_MR2) {
      display.getSize(screenSize);
      width = screenSize.x;
    } else {
      width = display.getWidth();
    } 
```

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-15T19:02:45.163

你必须问自己几个问题：

*   对于将执行此代码的 API 级别，它是否已弃用？
*   如果是这样，是否建议或提供替代方案？

在您的情况下，`getWidth()`不推荐使用 using [`getSize(Point)`](http://developer.android.com/reference/android/view/Display.html#getSize%28android.graphics.Point%29)，这需要 API 级别 13。因此，在 API 级别 13 之前，您所拥有的只是`getWidth()`，当时并未弃用。保留这些已弃用的方法的原因主要是考虑到向后兼容性（同时避免破坏每个依赖它的应用程序）。

所以回答你的问题，是的，在这种情况下这很好，是的，它很好地使用`@SuppressWarning("deprecation")`.

# sql - 获取所有可能的列组合

> ID：10164897
> 
> 赞同：0
> 
> 时间：2012-04-15T18:39:31.323
> 
> 标签：sql, sql-server, sql-server-2008

如果我有一个刚刚返回的记录集：

`SELECT * FROM USERS`

```
 Name | Gender |   Company
    Bob  |  male  |  Abc Inc.
    Bob  |  male  |  Xyz Inc.
    Bob  |  male  |    NULL 
```

我希望它返回这个：

```
 Name | Gender |   Company
    NULL |  NULL  |    NULL
    NULL |  NULL  |    Abc Inc.
    NULL |  male  |    NULL
    NULL |  male  |    Abc Inc.
    NULL |  NULL  |    Xyz Inc.
    NULL |  male  |    Xyz Inc.
    Bob  |  NULL  |    NULL
    Bob  |  NULL  |    Abc Inc.
    Bob  |  male  |    NULL
    Bob  |  male  |    Abc Inc.
    Bob  |  NULL  |    Xyz Inc.
    Bob  |  male  |    Xyz Inc. 
```

它是如何实现的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T18:47:21.487

```
select Name, Gender, Company
from T
group by Name, Gender, Company with cube 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T18:56:16.777

```
SELECT DISTINCT NAME, GENDER, COMPANY FROM TABLE
GROUP BY NAME, GENDER, COMPANY WITH CUBE 
```

# c++ - C++ char 数组范围

> ID：10164903
> 
> 赞同：1
> 
> 时间：2012-04-15T18:40:11.853
> 
> 标签：c++, arrays, scope, stack, char

```
char* pArray = nullptr;
{
    char buffer[64];
    sprintf_s(buffer,"Time: 123456");
    pArray = buffer;

}
cout<<pArray<<endl; 
```

即使缓冲区已被释放回堆栈，也会显示“时间：123456”。这里发生了什么？这安全吗？不安全？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T18:43:09.090

这是**未定义的行为**。内存可能没有被清除。

您的打印声明有效，这纯粹是运气。当一个对象超出范围或被删除时，内存被标记为已释放而不是实际擦除。程序可以回收并覆盖它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T18:46:21.743

您不再使用内存，但数据仍然存在。

除非您知道自己在做什么，否则您不应该这样做。

您可以使用这样的技巧将一些参数传递给函数，但这非常不安全。

# c++ - 使用指针在单链表上工作

> ID：10164904
> 
> 赞同：0
> 
> 时间：2012-04-15T18:40:14.337
> 
> 标签：c++

这是一个家庭作业问题。该程序构建成功，但无法运行。它刚刚停止。我试图使用“结构”来制作一个列表。我不知道我的“插入”函数有什么问题。这是我第一次来这里，希望我能得到一些建议。

```
//============================================================================
// Name        : test2.cpp
// Author      : yan zeng
// Version     :
// Copyright   : Your copyright notice
// Description : Hello World in C++, Ansi-style
//============================================================================

#include <iostream>
#include <stdio.h>
#include <stdlib.h>
#define TRUE 1
#define FALSE 0
typedef int BOOLEAN;
using namespace std;

struct Node {
    int value;
    struct Node *next;
};

void insert(int x, struct Node **pL);

void insert(int x, struct Node **pL){

    if (*pL == NULL) {
        struct Node **pL = (struct Node **) malloc(10 * sizeof(int *));

        (**pL).value = x;
        (*pL)->next = NULL;

    }

    else
        insert(x, &((*pL)->next));

}

int main (int argc, char **argv)
{

    // insert code here...

    //    make a list by declaring a pointer to a node

    struct Node *NodePointer = NULL;

    for (int i=3; i<20; i+=2) {
        insert(i,&NodePointer);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T19:17:02.430

There is quite a few issues in this code, the use of a debugger will definitely help here.

Your program "just stops" because it crashes at

```
(**pL).value = x; 
```

I am not sure if this code was provided to you as homework to fix, or if the empty function was provided to you, and you need to fill it out. Either way, that line is wrong.

Also, as others mentioned, you are using `malloc` in a C++ program when you should be using `new`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T18:44:06.047

我能给你的最好建议是学习如何使用调试器。其他建议：不要`malloc/free`在 C++ 中使用，使用`new/delete`.

# jasper-reports - JasperReport - TextElement 中的条件

> ID：10164906
> 
> 赞同：0
> 
> 时间：2012-04-15T18:40:37.550
> 
> 标签：jasper-reports, conditional-statements

我是 JasperReports 的新手。当某些变量设置为“3”时，我想获得斜体文本。

这是我的代码：

```
<textElement>

    <font size="9" pdfFontName="Helvetica" pdfEncoding="Cp1250" isPdfEmbedded="true"
    isItalic=<![CDATA[$F{variable}==3 ? "true" : "false"]]> />

</textElement> 
```

我究竟做错了什么？

我也尝试过制作条件样式，但无论我放在哪里，我都会收到错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T10:43:14.680

您不能`isItalic`在表达式的帮助下使用属性（以及许多其他属性）的设置值。

在您的情况下，您应该使用*`conditional style`*.

样本：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport ..>
    <style name="customStyle">
        <conditionalStyle>
            <conditionExpression><![CDATA[$F{variable} == 3]]></conditionExpression>
            <style isItalic="true"/>
        </conditionalStyle>
    </style>
    ...
    <detail>
        <band height="20" splitType="Stretch">
            <textField>
                <reportElement style="customStyle" mode="Opaque" x="100" y="0" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{value}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
</jasperReport> 
```

# c - C 编程中的错误“不应忽略的 void 值”

> ID：10164907
> 
> 赞同：-1
> 
> 时间：2012-04-15T18:40:55.973
> 
> 标签：c

这是我的代码的一部分：

```
Type* compileExpression2(void) {
    Type* type1;
    Type* type2;
    type1 = compileTerm();
    type2 = compileExpression3();
}

Type* compileExpression3(void) {
    Type* type1;
    return type1;
}

Type* compileTerm(void) {
    // TODO: check type of Term2
    Type* type;
    type = compileFactor();
    compileTerm2();
    return type;
} 
```

我使用 Code::Blocks 来构建它，它返回了这个错误：

> void 值没有被忽略，因为它应该被忽略

在线：

```
type2 = compileExpression3(); 
```

请告诉我为什么。

* * *

非常感谢您的所有回答。我发现了我的问题。

在我的包含文件中，compileExpression3 已被声明为“void compileExpression3(void);”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T18:43:42.880

通过消除，它可能会`compileTerm`返回`void`。

### 编辑

您添加`compileTerm`但现在`compileFactor`丢失了。

# validation - 如何在 Symfony2 (ImageValidator) 中验证文件上传？

> ID：10164908
> 
> 赞同：1
> 
> 时间：2012-04-15T18:41:03.737
> 
> 标签：validation, symfony, symfony-forms

我目前正在开发一个使用最新版本 Symfony2 的应用程序。我在验证包含文件上传字段的表单时遇到了一些问题。

我的表单代码看起来像这样（缩短）：

```
use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;
use Symfony\Component\Validator\Constraints\MinLength;
use Symfony\Component\Validator\Constraints\Collection;

    class EventEditForm extends AbstractType
    {
        public function buildForm(FormBuilder $builder, array $options)
        {
            $builder->add("name", "text", array("required" => true));
            //....
            $builder->add("image", "file", array("property_path" => false, "required" => false));
        }

        public function getDefaultOptions(array $options)
        {
           $collectionConstraint = new \Symfony\Component\Validator\Constraints\Collection(array(
                'image' => new \Symfony\Component\Validator\Constraints\Image()
                ));

            $options["validation_constraint"] = $collectionConstraint;
            return $options;
        }

        public function getName()
        {
            return 'editeventform';
        }
    } 
```

正如您在此处看到的，我想确保上传的文件是图像。我使用这样的表格：

```
$form = $this->createForm(new \Trancefans\AdminBundle\Form\EventEditForm(), $event); 
```

但是在运行此代码时，我收到以下错误：

> 数组或 Traversable 和 ArrayAccess 类型的预期参数，给定对象

我真的不知道我的错在哪里。我完全按照文档中的描述做了。有人可以帮助我吗？:-)

顺便说一句：图像不由事件实体表示，但表单的每个其他字段都是。我使用教义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:40:25.290

`Symfony\Component\Validator\Constraints\CollectionValidator`要求它验证的数据是一个数组或实现 ArrayAccess 和 Traversable 的对象。

确保 $event 实例的类定义实现`ArrayAccess`和 Traversable 以便在`CollectionValidator::validate()`调用时可以访问您的值以相应地验证它们。

# java - javax.naming.NamingException：查找失败

> ID：10164909
> 
> 赞同：1
> 
> 时间：2012-04-15T18:41:10.040
> 
> 标签：java, exception, ejb, jndi, naming

从昨天晚上开始我就在尝试这个，我们正在集成两个不同的构建，但仍然无法让所有会话 bean 查找工作。ProjectBeanRemote 位于 project.beans 包中。使用“java:global/JavaFinalProjectS-ejb ...”的查找正在使用一些 bean，但有些没有被查找。使用的持久性单元是 EclipseLink，名称是 JavaFinalProjectS-ejbPU。两种查找方式都引发了命名异常。

```
 public class ControlServlet extends HttpServlet {

/**
 * Processes requests for both HTTP
 * <code>GET</code> and
 * <code>POST</code> methods.
 *
 * @param request servlet request
 * @param response servlet response
 * @throws ServletException if a servlet-specific error occurs
 * @throws IOException if an I/O error occurs
 */
protected void processRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    response.setContentType("text/html;charset=UTF-8");
    PrintWriter out = response.getWriter();
    try {
        /*
         * TODO output your page here. You may use following sample code.
         */
        HttpSession sessObj=request.getSession();
        if(null==sessObj.getAttribute("proBeaSesObj"))
        {
            InitialContext initContObj=new InitialContext();
            Object initObj=initContObj.lookup("java:global/JavaFinalProjectS-ejb/ProjectBean");
            ProjectBeanRemote proBeaObj=(ProjectBeanRemote)
                    initContObj.lookup(ProjectBeanRemote.class.getName());
            sessObj.setAttribute("proBeaSesObj", proBeaObj);
            this.sendRequestForward(proBeaObj, request, response, out,sessObj);
        }
        else
        {
            ProjectBeanRemote proBeaObj=(ProjectBeanRemote)sessObj.getAttribute("proBeaSesObj");
            this.sendRequestForward(proBeaObj, request, response, out,sessObj);
        }
    }
    catch(Exception g)
    {
        g.printStackTrace();
    }
    finally {            
        out.close();
    }
} 
```

这是堆栈跟踪

```
 SEVERE: javax.naming.NamingException: Lookup failed for 'java:global/JavaFinalProjectS-ejb/ProjectBean' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl, java.naming.factory.url.pkgs=com.sun.enterprise.naming} [Root exception is javax.naming.NameNotFoundException: ProjectBean not found]
at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:518)
at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:455)
at javax.naming.InitialContext.lookup(InitialContext.java:411)
at javax.naming.InitialContext.lookup(InitialContext.java:411)
at project.servlets.ControlServlet.processRequest(ControlServlet.java:47)
at project.servlets.ControlServlet.doPost(ControlServlet.java:96)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:754)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1539)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:98)
at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:91)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:162)
at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:330)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:174)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:828)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:725)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1019)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:722)
             Caused by: javax.naming.NameNotFoundException: ProjectBean not found
at com.sun.enterprise.naming.impl.TransientContext.doLookup(TransientContext.java:248)
at com.sun.enterprise.naming.impl.TransientContext.lookup(TransientContext.java:215)
at com.sun.enterprise.naming.impl.TransientContext.lookup(TransientContext.java:219)
at com.sun.enterprise.naming.impl.TransientContext.lookup(TransientContext.java:219)
at com.sun.enterprise.naming.impl.SerialContextProviderImpl.lookup(SerialContextProviderImpl.java:77)
at com.sun.enterprise.naming.impl.LocalSerialContextProviderImpl.lookup(LocalSerialContextProviderImpl.java:119)
at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:505)
... 32 more

SEVERE:     at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:518)
SEVERE:     at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:455)
SEVERE:     at javax.naming.InitialContext.lookup(InitialContext.java:411)
SEVERE:     at javax.naming.InitialContext.lookup(InitialContext.java:411)
SEVERE:     at project.servlets.ControlServlet.processRequest(ControlServlet.java:47)
SEVERE:     at project.servlets.ControlServlet.doPost(ControlServlet.java:96)
SEVERE:     at javax.servlet.http.HttpServlet.service(HttpServlet.java:754)
SEVERE:     at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
SEVERE:     at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1539)
SEVERE:     at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
SEVERE:     at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
SEVERE:     at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
SEVERE:     at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
SEVERE:     at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:98)
SEVERE:     at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:91)
SEVERE:     at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:162)
SEVERE:     at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:330)
SEVERE:     at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
SEVERE:     at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:174)
SEVERE:     at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:828)
SEVERE:     at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:725)
SEVERE:     at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1019)
SEVERE:     at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
SEVERE:     at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
SEVERE:     at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
SEVERE:     at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
SEVERE:     at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
SEVERE:     at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
SEVERE:     at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
SEVERE:     at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
SEVERE:     at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
SEVERE:     at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
SEVERE:     at java.lang.Thread.run(Thread.java:722)
SEVERE: Caused by: javax.naming.NameNotFoundException: ProjectBean not found
SEVERE:     at com.sun.enterprise.naming.impl.TransientContext.doLookup(TransientContext.java:248)
SEVERE:     at com.sun.enterprise.naming.impl.TransientContext.lookup(TransientContext.java:215)
SEVERE:     at com.sun.enterprise.naming.impl.TransientContext.lookup(TransientContext.java:219)
SEVERE:     at com.sun.enterprise.naming.impl.TransientContext.lookup(TransientContext.java:219)
SEVERE:     at com.sun.enterprise.naming.impl.SerialContextProviderImpl.lookup(SerialContextProviderImpl.java:77)
SEVERE:     at com.sun.enterprise.naming.impl.LocalSerialContextProviderImpl.lookup(LocalSerialContextProviderImpl.java:119)
SEVERE:     at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:505)
SEVERE:     ... 32 more 
```

欢迎任何帮助，已经尝试了很多查找方法，但仍然无法全部正常工作。

# c - 运行时深奥的 C 程序行为 - 代码未按顺序运行

> ID：10164911
> 
> 赞同：-4
> 
> 时间：2012-04-15T18:41:33.460
> 
> 标签：c, while-loop, printf

我正在制作一个带有注册登录系统的服务器聊天应用程序。在运行客户端代码时：我首先选择注册，然后在成功注册后，客户端代码提示我登录。然后我登录，它工作正常。我已经在客户端代码中的 if else 块中实现了这两件事。在此之后，我正在做一些事情，我遇到了我的 C 生活中最有吸引力的错误之一。这是我的源代码，我在其中标记了错误区域（在`main`函数末尾），并且还提到了那里的问题（问题的代码定义很容易）。
我还在代码之后发布了输出。

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <errno.h>
#include <string.h>
#include <netdb.h>
#include <sys/types.h>
#include <netinet/in.h>
#include <sys/socket.h>
#include <arpa/inet.h>
#include <time.h>
#define PORT "1618" //the port client will be connecting to
#define MAXDATASIZE 100 // max number of bytes we can get at once

static const int BUFFER_SIZE = 16*1024;
//get sockaddr ,IPv4 or IPv6:

void *get_in_addr(struct sockaddr *sa)
{
    if(sa->sa_family ==AF_INET) {
        return &(((struct sockaddr_in*)sa)->sin_addr);
    }

    return &(((struct sockaddr_in6*)sa)->sin6_addr);
}
int registerYourself(int sockfd)
{   
    printf("2\n");
    char username[50], password[50],registerStatus[2];
    int return_value,choice;
    printf("You have chosen to register yourself\n");
    printf("Please enter a username and password\n");
    printf("Username:");
    scanf("%s",username);
    //printf("You entered %s\n",username);
    send(sockfd,username,sizeof(username),0); // sending username
    printf("\nPassword:");
    scanf("%s",password);    //sending password
    //printf("-- %s\n",password);
    send(sockfd,password,sizeof(password),0);           //sending password
    recv(sockfd,registerStatus,sizeof(registerStatus),0);//receiving from server that register is successful or not
    if(strcmp(registerStatus,"1")==0) //If register successful then promoting for log-in
        {
        printf("Registration successfull\n Please Log in\n");
        return_value=login(sockfd);
        return return_value;
        }
    else if(strcmp(registerStatus,"0")==0)// Asking user what to do
        {
        printf("Username already taken...Please try again with other username...\nPress:\t 1 to try again\n\t2 to quit");
        scanf("%d",&choice);
        switch(choice)
            {
            case 1:
                  send(sockfd,"1", 2, 0);
                registerYourself(sockfd);
                break;
            case 2:
                send(sockfd,"0",2,0);
                return 0;
            }           
        }
}

int login(int sockfd)
{   
    printf("3\n");
    char username[50],password[50],login_status[2];
    int choice;
    printf("You have chosen to login yourself\n");
    printf("Please enter a username and password\n");
    printf("Username:");
    scanf("%s",username);
//  printf("-- %s\n",username);
    send(sockfd,username,sizeof(username),0);
    send(sockfd,username,sizeof(username),0);//send username
    printf("\nPassword:");
    scanf("%s",password);
    //printf("-- %s\n",password);
    send(sockfd,password,sizeof(password),0);//send password
    recv(sockfd,login_status,sizeof(login_status),0); // //receiving from server that login is successful or not
    if(strcmp(login_status,"1")==0)
        {
        printf("login successfully 1\n");
        //while(1);// doing other job here
        return 1;
        }
        else if(strcmp(login_status,"0")==0)
        {
        printf("Wrong Username And/Or Password\nPress:\n__1)__To Enter Again  |  __2)__To Quit");
        scanf("%d",&choice);
        switch(choice)
            {
            case 1:
                send(sockfd,"1", 2, 0);// sending that user want to login again
                login(sockfd);
                break;
            case 2:
                send(sockfd,"0",2,0);// sending that user want to stop
                return 0;
            //TODO default case 
            }
        }
        //break;//case 2 ends
}

int main(int argc, char *argv[])
{
    char fname[50], s[INET6_ADDRSTRLEN], buf[MAXDATASIZE], username[50], password[50], registerStatus[2], login_status[2];
    int sockfd, numbytes,fp,i,rv, choice,iflogin=0;

    struct addrinfo hints, *servinfo, *p;

    if(argc != 2) 
        {
            fprintf(stderr,"usage: client hostname\n");
            exit(1);
        }

        memset(&hints, 0, sizeof hints);
        hints.ai_family = AF_UNSPEC;
        hints.ai_socktype = SOCK_STREAM;

        if((rv = getaddrinfo(argv[1], PORT, &hints, &servinfo)) != 0) 
        {
            fprintf(stderr,"getaddrinfo: %s\n",gai_strerror(rv));
            return 1;
        }

        //lopp through all the results and connect to the first we can
        for(p = servinfo; p != NULL; p = p->ai_next) 
        {
            if((sockfd = socket(p->ai_family, p->ai_socktype, p->ai_protocol)) == -1){
                perror("client: socket");
                continue;
            }

            if(connect(sockfd, p->ai_addr, p->ai_addrlen) == -1)
            {
                close(sockfd);
                perror("client: connect");
                continue;
            }
            break;
        }

        if(p ==NULL) 
        {
            fprintf(stderr,"client: failed to connect\n");
            return 2;
        }

        inet_ntop(p->ai_family, get_in_addr((struct sockaddr *)p->ai_addr), s, sizeof s);
        printf("client : connecting to %s\n", s);

        freeaddrinfo(servinfo); // all done with this structure

**//////////////////////////       Here problem /////////////////////////**Code is continuous just to show you that problem is here.

//////////////////////////       Here problem /////////////////////////
//////////////////////////       Here problem /////////////////////////
//////////////////////////       Here problem /////////////////////////

        printf("\n----------------Menu-------------------------\n1.Register\n2.Log in\n");
        scanf("%d",&i); //here i am asking user whether to register or login and while running i choose to register 
        int status_value;   

            if(i==1)// I am going to enter in this loop
                {
                    send(sockfd,"1", 2, 0);//sending server that user want to register - work fine
                    printf("1\n");//work fine
                    status_value = registerYourself(sockfd);//this function ask me to register ang return 1 for success which is happening when I am running this code as:
                    if(status_value == 1)
                    {
                        printf("Logged in successful inside case 1\n"); // this prints
                        iflogin = 1;
                        printf("HERE 1-----------------\n");//this prints
                        printf("HERE 1-----------------\n");//this prints
                    }
                    else    //not get in this -obvious
                    {
                        printf("Bye!!!");   
                        printf("HERE 1!!!!!!!!!!!!!\n");        
                    }
                }
            if(i==2)// also dont go in this loop - obvious
            {
                printf("Inside case 2");
                send(sockfd,"2", 2, 0); //sending server that user want to login
                //status_value = login(sockfd);
                if(status_value == 1)
                    {
                    printf("Logged in successful inside case 2\n");
                    iflogin = 1;
                    }
                else    {
                    printf("Bye!!!");           
                    }

            }

        //fflush(stdout);
        //fflush(stdin);
        //fflush(stderr);

        // now some mytic thing is happening. this is not get printed and programmed get blocked [dont get stopped] just get blocked
        //if I commented the last while(1) [in the end] loop then everything works fine
        //if I commented the last while(1) and uncomment the sleep(5) statement t'outside here get printed after 5 seconds means after the sleep statement'
        //I have also tried to flush - but this shit is not flushing
        //pls tell me what is happening
        printf("Outside here");
        printf("Outside here");
        printf("Outside here");
        //sleep(5);
        if(iflogin==1)
        {
            printf("Logged in");
        }
        else
        {
            printf("Final Bye");
        }
        while(1); //doing other job
        close(sockfd);

        return 0;
} 
```

![输出 - 显示代码的阻塞状态最终使用 while(1) 运行，如问题中所述](../Images/d0701eb37d3ff6672ae15db995e506b0.png) 输出 - 显示代码的阻塞状态最终使用 while(1) 运行，如问题中所述

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T18:46:09.800

该行不打印，因为`printf()`如果标准输出是终端，则标准输出默认为行缓冲（否则为块缓冲）。尝试：

```
printf("Outside here\n"); 
```

或添加

```
fflush(stdout); 
```

在`printf()`声明之后。（编辑）但是，`fflush(stdout)`不能保证工作，因为允许实现将部分行删除到标准输出（部分意味着不终止`\n`）。为了安全（便携）方面，始终使用 . 终止写入标准输出的行`\n`。见 C99 7.19.2 第 2 段：

> 文本流是组成行的有序字符序列，每行由零个或多个字符加上一个终止换行符组成。最后一行是否需要终止换行符是实现定义的。[...]

# java - java 3D渲染距离

> ID：10164921
> 
> 赞同：0
> 
> 时间：2012-04-15T18:43:08.527
> 
> 标签：java, java-3d

我最近开始使用 java 3D 进行游戏开发。我目前正在做一个任务，一个非常具体的简单赛车游戏。

您在此屏幕截图中看到的只是一个框，我为其赋予了道路纹理，以及另一个代表汽车的框（稍后将由外部模型替换）

这是另一个不同角度的截图。如您所见，我无法渲染整条道路，我一直在寻找渲染整条路径，但不知何故，java3d 引擎不想渲染整条道路它在某个时候停止渲染。

我能做些什么来克服这个，我想渲染整个距离，所以，整条路都是可见的。

帮助将不胜感激。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T18:48:34.120

我也没有看到任何屏幕，但您可能正在寻找`View.setBackClipDistance(double distance)`，它设置了对象开始消失的距离。

# windows - Windows 批处理程序检查传递的参数值

> ID：10164923
> 
> 赞同：0
> 
> 时间：2012-04-15T18:43:17.810
> 
> 标签：windows, batch-file

我正在尝试使用 Windows 批处理命令。没有得到预期的结果。

我将 4 个 args 传递给一个批处理文件，在批处理文件中我正在检查第 4 个 arg 值是否为“1”

这里是代码片段。

```
IF %%4=="1" (
echo "Error Level is zero"
echo 'Creating web Ears...'
set cd=%CD%
echo "Current Directory: " %cd%
) 
```

即使在传递了确切的值 1 之后，if 条件也不会评估为真。有人可以识别错误吗？

mybat.bat x 5 c 1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T18:51:46.127

发现两个错误：

*   只用百分之一
*   去掉 1 左右的双引号

```
IF %4==1 (  
echo "Error Level is zero"  
echo 'Creating web Ears...'  
set cd=%CD%  
echo "Current Directory: " %cd%  
) 
```

在 Win7 64bit 上通过命令提示符测试

# makefile - 代码生成和规则扩展

> ID：10164924
> 
> 赞同：1
> 
> 时间：2012-04-15T18:43:22.387
> 
> 标签：makefile, code-generation

假设我有一个 make 规则：

```
.PHONY:gen
gen: auto.template
        generate-sources auto.template 
```

这会创建一堆文件，例如`auto1.src`,`auto2.src`等等`auto3.src`。

`*.src`如果我现在有从文件构建目标的规则，如下所示：

```
$(patsubst %.src,%.target,$(wildcard *.src)): %.target: %.src
        build $< > $@ 
```

如何告诉 make 先执行`gen`规则，然后扩展第二个规则模板的先决条件？欢迎使用 GNU 扩展。

*注意*：我想将其保留在*一次* `make`调用中；一个简单的解决方案是将第二条规则放在辅助规则中并在处理后`Makefile.secondrun`调用。但我想知道是否有更好的选择。`$(MAKE) -f Makefile.secondrun``gen`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T20:41:33.153

建立 Beta 的答案，这是在 GNU make 中使用*makefile 重新制作的方法，这与递归 make 不同。*相反，它使用主 makefile 中的规则更新包含的 makefile，然后*重新启动*原始 make 实例。这就是`*.d`通常生成和使用依赖文件的方式。

```
# Get the list of auto-generated sources.  If this file doesn't exist, or if it is older 
# than auto.template, it will get built using the rule defined below, according to the 
# standard behavior of GNU make.  If autosrcs.mk is rebuilt, GNU make will automatically 
# restart itself after autosrcs.mk is updated.

include autosrcs.mk

# Once we have the list of auto-generated sources, getting the list of targets to build 
# from them is a simple pattern substitution.

TARGETS=$(patsubst %.src,%.target,$(AUTO_SRCS))

all: $(TARGETS)

# Rule describing how to build autosrcs.mk.  This generates the sources, then computes 
# the list of autogenerated sources and writes that to autosrcs.mk in the form of a 
# make variable.  Note that we use *shell* constructs to get the list of sources, not
# make constructs like $(wildcard), which could be expanded at the wrong time relative
# to when the source files are actually created.

autosrcs.mk: auto.template
        ./generate-sources auto.template
        echo "AUTO_SRCS=`echo *.src`" > autosrcs.mk

# How to build *.target files from *.src files.

%.target: %.src
        @echo 'build $< > $@' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T19:23:13.720

简短的回答：你不能。Make 在执行任何规则之前确定它必须执行的所有规则。

更长的答案：也许你可以。正如您所说，您可以显式地使用递归 Make，或者通过构建一个您的 makefile 将使用的文件`include`（我在看着您，Jack Kelly）来偷偷摸摸地使用。或者，如果您能以某种方式获得`gen`将要构建的文件列表，您可以围绕它编写规则。或者，您可以像这样大步向前：

```
%.target: %.src
        build $< > $@

%.src: gen; 
```

# ios - 哪些是支持开发的iOS版本

> ID：10164926
> 
> 赞同：0
> 
> 时间：2012-04-15T18:43:27.733
> 
> 标签：ios, xcode

我在谷歌上搜索了很多，如果支持 iOS 4.xxx，我找不到任何地方

我有 XCode 4.3.1，在方案中我只有 iOS 设备/iPhone 5.1 模拟器/iPad 5.1 模拟器。

是否仍支持 iOS 4.xxx 进行开发？还是只支持 iOS 5.x？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T18:54:42.497

除了 Irene 提到的，您可以在 Preferences->Downloads 下检查以确保您已安装了模拟器和库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T18:48:22.677

它受支持，但您需要注意您使用的 API。这篇名为“ [SDK 和部署目标](http://www.clarkcox.com/blog/2009/06/23/sdks-and-deployment-targets/)”的文章对我帮助很大，因此请阅读它，如果您需要更多信息，请告诉我们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T01:00:15.510

当然可以，在 Xcode 首选项中转到下载选项卡，在这里您可以下载 iOS 4 模拟器以及 4.0 调试支持。

![在此处输入图像描述](../Images/6a6244a35fa29107cc2bc681d2e5de2a.png)

# emacs - Emacs 禁用 *Messages* 缓冲区

> ID：10164929
> 
> 赞同：22
> 
> 时间：2012-04-15T18:43:40.287
> 
> 标签：emacs

有没有办法禁用*消息*缓冲区？我知道我可以杀死它，但它又出现了。我知道我可以在不通过*Messages*的情况下滚动缓冲区，但是有没有办法可以禁用它的创建？

谢谢你。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-04-29T13:08:05.390

根据上面的答案，将其放在您的 .emacs 中以完全禁用*消息*

```
;; Forces the messages to 0, and kills the *Messages* buffer - thus disabling it on startup.
(setq-default message-log-max nil)
(kill-buffer "*Messages*") 
```

另外，如果您像我一样，这就是您从缓冲区中打开新文件时删除出现的*Completions*缓冲区的方法。

```
;; Disabled *Completions*
(add-hook 'minibuffer-exit-hook 
      '(lambda ()
         (let ((buffer "*Completions*"))
           (and (get-buffer buffer)
            (kill-buffer buffer))))) 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-04-15T21:59:42.870

您可以自定义变量`message-log-max`并给出`nil`禁用日志记录的值：

```
Maximum number of lines to keep in the message log buffer.
If nil, disable message logging.  If t, log messages but don't truncate
the buffer when it becomes large. 
```

我尝试杀死`*Messages*`缓冲区，产生消息（显示在迷你缓冲区上），但没有出现新的消息缓冲区。

# python - xlwt 无法解析公式中的 IF 语句

> ID：10164933
> 
> 赞同：0
> 
> 时间：2012-04-15T18:43:57.670
> 
> 标签：python, xlwt

我正在尝试通过构建字符串将公式写入一系列单元格。例如，如果 G 列中的相应单元格中包含单词“monkey”，我想在单元格中显示单词“true”。

```
for rowi in range(totalRows):
    thisRow = str(rowi)
    functionString = r'IF(ISNUMBER(SEARCH("monkey",G'+thisRow+')),("true") 
```

这将产生字符串 "IF(ISNUMBER(SEARCH("monkey",G1)),("true")" - 如果我将它传递给 xlwt.Formula...

```
 ws.write(rowi+1, 0, xlwt.Formula(functionString)) 
```

我收到这个错误...

```
File "C:\Python27\Lib\site-packages\xlwt\ExcelFormula.py", line 22, in __init__
    raise ExcelFormulaParser.FormulaParseException, "can't parse formula " + s
xlwt.ExcelFormulaParser.FormulaParseException: can't parse formula IF(ISNUMBER(SEARCH("bitmap",G2)),("true") 
```

是否可以将这种类型的功能与 xlwt 一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T21:10:36.463

忽略您输入的不可能，`monkey`而`G1`错误消息提到`bitmap`和`G2`...

我建议您启动 Excel，选择一个单元格，键入`=`并粘贴您的公式……会发生什么？在公开之前始终建议进行此检查，即使您的互联网连接中断也可以使用。

笔记：

(1) 周围的括号`"true"`是多余 的

(2) 更简单：`ISNUMBER(SEARCH("bitmap",G2))`

(3) 您是否真的希望用户打开生成的 XLS 文件并在 G 列中输入文本？

# android - Android在谷歌地图上添加延迟的地理点

> ID：10164936
> 
> 赞同：2
> 
> 时间：2012-04-15T18:44:12.603
> 
> 标签：android, android-mapview

我想做的是在 google mapView 上添加 GeoPoints。这就是我的代码现在的样子：

```
 public ArrayList getLocations() {
        ArrayList<OverlayItem> locations = new ArrayList<OverlayItem>();
        /* open SQLite database aanmaken als deze al dan niet bestaat */ 

    SQLiteDatabase myDB = openOrCreateDatabase(DATABASE_NAME, Context.MODE_PRIVATE, null); 
    SharedPreferences preferences = getSharedPreferences("data", 0);
    String route_id = String.valueOf( preferences.getInt("route_id", 0));

    String[] resultColumns = new String[] { "_id", "route_id","naam", "lng", "lat" };
    String whereClause = "route_id=?";
    String[] whereArgs = new String[] {route_id};

        Cursor cursor = myDB.query(DATABASE_TABLE_LOCATIES, resultColumns, whereClause,
                whereArgs, null, null, null, null);

        cursor.moveToFirst();
        do {
            String naam = cursor.getString(2);
            Double lat = cursor.getDouble(4);
            Double lon = cursor.getDouble(3);
            GeoPoint point = new GeoPoint((int) (lat * 1E6),(int) (lon * 1E6));
            locations.add(new OverlayItem(point, naam,naam));
        } while (cursor.moveToNext());

   return locations;
    }

public void onCreate(Bundle savedInstanceState) {
  InterestingLocations funPlaces = new InterestingLocations(marker);
  mapView.getOverlays().add(getLocations);
} 
```

这段代码将我所有的指针一次放在 mapView 上。将每个指针放在地图上时，我想稍微延迟一下。我怎么能这样做？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T13:31:10.320

首先定义全局变量，

```
private Timer myTimer; 
```

添加这个内部`onCreate()`方法：

```
myTimer = new Timer();
    myTimer.schedule(new TimerTask() {
        @Override
        public void run() {
            TimerMethod();
        }

    }, 0, 1000);

} 
```

并在类中添加此函数：

```
private void TimerMethod()
{
    this.runOnUiThread(Timer_Tick);
} 
```

并将其定义为全局变量：

```
private Runnable Timer_Tick = new Runnable() {
public void run() {

    //here is your job, instead of writing this [mapView.getOverlays().add(getLocations);]

    //you have to create a loop for the list returned by getLocations() to add them in the timer one by one
}
}; 
```

# ios - UITableView 异步图像加载快门通过多个图像

> ID：10164937
> 
> 赞同：0
> 
> 时间：2012-04-15T18:44:17.297
> 
> 标签：ios, uitableview, uiimageview, grand-central-dispatch

我正在将图像异步加载到 UITableView (GCD) 上，并且看到了一种奇怪的行为，即单元格将“关闭”多个图像，然后再设置一个。这很难用语言来描述，所以我做了一个屏幕录像，你会看到对于一个给定的单元格，多个图像会在它固定在一个之前移动。

[http://www.youtube.com/watch?v=PKuqng81QX4](http://www.youtube.com/watch?v=PKuqng81QX4)

我正在使用队列（从 REST 端点）获取图像，然后使用主队列在单元格中设置图像。这是代码片段：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath

// ..after getting the cell:

    dispatch_queue_t imageQ = dispatch_queue_create("imageQ", NULL);
    dispatch_async(imageQ, ^{
        NSString *galleryTinyImageUrl = someFunctionToGetThumbnailUrl;
        NSData *imageData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:galleryTinyImageUrl]];
        dispatch_async(dispatch_get_main_queue(), ^{
            cell.imageView.image = [UIImage imageWithData:imageData];
            [tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationNone];
        });
    });
    dispatch_release(imageQ); 
```

这在短时间内被多次调用（即用户在桌子上轻弹，触发这些单元图像加载中的 30 个触发）的事实引起了我的担忧，是否所有异步线程都“安全地”“着陆”到它们的位置重新应该。我看到的行为（在视频中）似乎证实了我在这里做错了什么。我将不胜感激您可能提出的任何具体或广泛的方法建议。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T18:50:36.560

听起来您没有正确实现单元格的重用。确保在重新使用单元格时，通过`[tableView dequeueReusableCellWithIdentifier:blah]`将单元格图像设置为，`nil`直到新图像已完全下载并准备好显示。

此外，在重用单元格时，请取消对其图像的潜在运行请求，以防止先前单元格的图像加载速度较慢，从而覆盖真实的图像。

# c - 为什么 malloc 似乎没有创建新变量？

> ID：10164940
> 
> 赞同：2
> 
> 时间：2012-04-15T18:44:46.093
> 
> 标签：c, malloc

真是愚蠢的问题。这是我的示例代码：

```
#include <stdio.h>
#include <stdlib.h>

typedef struct sample {
  int a;
  int b;
} SAMPLE_T;

int main() {
  int i, max = 4;
  for (i = 0; i < max; i++)
  {
     SAMPLE_T * newsamp = (SAMPLE_T *)malloc(sizeof(SAMPLE_T));
     printf("addr: %x\n", &newsamp);
  }
} 
```

每次我通过循环时，我都试图“创建”一个新变量，我认为这可以解决问题，因为`malloc`会在堆上创建一个新变量。但是，我好像搞砸了什么。这是输出：

```
addr: bfc29c4
addr: bfc29c4
addr: bfc29c4
addr: bfc29c4 
```

我不明白如何`malloc`工作吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-15T18:46:47.890

newsamp 的地址没有变化，这并不奇怪。尝试：

```
 printf("addr: %x\n", newsamp) 
```

此外，即使这显然只是一个玩具程序，您也应该在循环终止之前释放内存。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-15T18:46:16.320

那是因为您正在打印指针的地址`newsamp`(!!!!)，它是`main`. 它总是一样的。

您想打印指针本身：

```
printf("addr: %x\n", newsamp); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T18:47:02.310

它应该是`printf("addr: %x\n", newsamp);`

你不应该这样做`&newsamp`，因为那是指针的地址，而不是它指向的地址。

# jquery - jQueryUI Drag：确保鼠标位于对象的中心

> ID：10164941
> 
> 赞同：2
> 
> 时间：2012-04-15T18:44:46.437
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable

我正在构建一个图形界面，允许用户将外部点拖到图形上。
然后，我在放置时获得鼠标位置，并在那里向图中添加一个点。

但是，这些点的直径为 35px，因此可以通过角落抓住点。当这种情况发生时，在图表上绘制的点与用户期望的点明显不同。

我无法想象这是唯一一次出现这种情况，有没有一种简单的方法可以确保物体的中心点被吸毒？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-15T18:54:32.343

事实证明，这很容易，只需要写出问题来找到合适的词来搜索答案：

```
 $('.to_drop').draggable({ 
      cursor: 'move',
      cursorAt: { top: 17, left: 17 },
     }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-28T06:38:01.993

你可以试试这个：

```
start: function(event, ui){
    $(this).draggable('instance').offset.click = {
        left: Math.floor(ui.helper.width() / 2),
        top: Math.floor(ui.helper.height() / 2)
    }; 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T18:52:10.443

您可以设置某种居中的拖动手柄（请参阅[http://jqueryui.com/demos/draggable/#handle](http://jqueryui.com/demos/draggable/#handle)）

# wcf - Entity Framework 4.1：如何使用每次调用生命周期数据上下文？

> ID：10164949
> 
> 赞同：1
> 
> 时间：2012-04-15T18:45:25.103
> 
> 标签：wcf, entity-framework, concurrency, datacontext

根据这篇[文章](https://stackoverflow.com/questions/10160152/entitty-framework-life-of-datacontext)，我每次调用都使用一个数据上下文，所以在我的 WCF 服务的每个方法中，我使用一个*using 块*来创建一个新的数据上下文。

但我对以这种方式工作的形式有些怀疑。

例如，我使用存储库中的方法 getAllCLients() 来获取数据库的所有客户端，然后服务向调用该方法的客户端发送包含所有客户端的列表。然后用户修改其中一些的信息，例如三个。修改客户端也许我可以添加到具有修改客户端的列表中。

当我想更新这三个客户端时，我可以调用一个方法 updateClients() 来接收修改后的客户端列表。我如何为每个方法使用一个新的数据上下文，在 updateCients() 中获取一个没有实体的新数据上下文，所以我认为我必须遵循以下步骤：

1.- 创建一个新的数据上下文，其中包含我要更新的客户端。所以我需要为此指定条件。这是一个额外的操作（我之前使用 getAllClients() 方法获取客户端），所以我需要再次获取客户端。

2.- 抛出 DBSet 的客户端集合（我使用 EF 4.1）并更改信息。这让我也去抛出我从客户端应用程序收到的列表。所以我必须去扔两张单子。这需要资源。

3.- 保存更改。无论如何，这都是必需的，因此不需要更多的工作。

有什么方法可以轻松完成第 2 步？在 dataContext 中存在一些方法来将值从我修改的客户端传递到数据上下文中的客户端？我使用 POCO 实体，也许它存在一种简单的方法来做到这一点。

另一个问题是关于并发的。如果我使用允许 EF 的悲观并发来控制并发（例如，带有时间戳字段），最好为每个客户端调用 updateClient() 还是更好地传递所有客户端的列表？我的意思是，如果我使用列表作为参数，如果一个客户端存在并发问题，例如第二个，第一个客户端将正确更新，但第二个不会，第三个也不会。我如何通知用户某些客户端存在问题？

继续，我想知道当我有一个短暂的数据上下文时进行更新的最佳方式。

谢谢。戴姆洛克。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-15T19:23:12.313

该服务是断开连接的场景，因此当您的客户端传回修改后的记录时，您只需将它们处理为已修改。您不需要为此从数据库加载所有记录。

```
public void SaveClients(List<Client> modifiedClients)
{
    using (var context = new Context())
    {
        modifiedClients.ForEach(c => 
           {
               context.Entry(c).State = EntityState.Modified;
           });
        context.SaveChanges(); 
    }
} 
```

如果您使用的是每次调用服务并且每个服务操作都需要上下文，您可以将上下文实例移动到服务构造函数，因为服务实例将只存在于服务器单个服务调用 = 您不需要`using`每次调用。如果您这样做，请不要忘记`IDisposable`在您的服务上实施以处理上下文。

> 另一个问题是关于并发的。如果我使用允许 EF 的悲观并发控制并发（例如，带有时间戳字段），最好为每个客户端调用 updateClient() 还是更好地传递所有客户端的列表？

EF 不支持开箱即用的悲观并发。使用时间戳是乐观并发，因为它允许其他人使用记录。悲观并发是其他客户端无法选择锁定记录进行更新的应用程序逻辑。

每个记录都解决了并发问题，但这种情况下的问题是事务。每次调用都会`SaveChanges`导致事务用于处理数据库中的所有更改。因此，如果您修改的任何记录不是最新的，您将获得并发异常并且整个事务被回滚 = 没有记录被更新。

您仍然可以通过将修改记录列表传递给服务来解决该问题（减少客户端和服务之间的往返是最佳实践），但您可以通过调用每条记录来单独处理每条`SaveChanges`记录。无论如何，这应该非常仔细地考虑，因为每次调用`SaveChanges`都像单独的工作单元 - 这真的是你想要的吗？

顺便提一句。最好的做法是让你的服务无状态。你应该避免在服务调用之间维护数据，这个例子真的不需要它。

# matlab - 如何通过改变线条的颜色来检测物体

> ID：10164952
> 
> 赞同：0
> 
> 时间：2012-04-15T18:45:29.013
> 
> 标签：matlab

我有以下代码用于在图片中绘制两条线。

我怎样才能把这些台词放在现场；如果这些线上有任何物体，我应该怎么做才能改变线的颜色“只是为了简单地警告这些线上有物体？”

```
im=imread('tas.jpg');

imshow(im);

hold on;

line([27,1523],[1753,1753]);

line([7,1531],[1395,1395]);

hold off; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T22:22:30.980

我同意@Chris A. 关于不清楚的问题，但是如果您唯一想要的是能够在未来的语句中为这个非常静态的代码更改这些行的颜色，您可以执行以下操作：

```
im = imread('tas.jpg');

imshow(im);

hold on;

h1 = line( [27,1523] , [1753,1753] );  % h1 is now handle for this line
h2 = line( [7,1531]  , [1395,1395] );  % h2 is now handle for this second line

hold off; 
```

为了将第一行的颜色更改为红色，将第二行的颜色更改为绿色，您可以：

```
set( h1, 'Color', 'r');
set( h2, 'Color', 'g'); 
```

# eclipse - Eclipse Helios 中集成 Maven 失败

> ID：10164954
> 
> 赞同：0
> 
> 时间：2012-04-15T18:45:42.543
> 
> 标签：eclipse, maven, helios

我尝试通过单击 eclipse 市场将 maven 集成到我的 eclipse helios 中。

但是当它变成安装软件时，我有这个错误：

```
 An error occurred while collecting items to be installed
    session context was:(profile=epp.package.jee,
    phase=org.eclipse.equinox.internal.p2.engine.phases.Collect, operand=,
    action=).
    Comparison method violates its general contract!
    Comparison method violates its general contract! 
```

请问这个怎么解决！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-15T19:21:02.657

嗨，我假设您在安装了 Eclipse 使用的 Java 7 JRE/JDK 的机器上运行 Eclipse Helios。有一个已知的 Bug 会导致这种行为，因为集成排序算法的 Java Contract 已更改。

当您安装（或使用已安装的）Java 6 JRE/JDK 来运行 Eclipse 时，这应该可以解决问题。

为了确保 Eclipse 使用了正确的 Java 安装`eclipse.ini`，请在 Eclipse 安装文件夹中编辑并在开头添加以下两行：

```
-vm
c:\<path-to-java-6>\bin\javaw.exe 
```

之后，一切都应该按预期工作。在较新的 Indigo 版本中，此问题已得到修复。

# jquery - jQuery 验证和 ajaxForm 需要点击两次提交按钮

> ID：10164960
> 
> 赞同：1
> 
> 时间：2012-04-15T18:46:25.937
> 
> 标签：jquery, jquery-validate

> **可能重复：**
> [提交按钮需要点击两次才能提交表单](https://stackoverflow.com/questions/10170321/submit-button-needs-to-be-clicked-twice-to-submit-form)

我的代码中有以下 jquery 函数。我必须单击“提交”按钮两次才能使表单提交工作。我可以使用 ajaxSubmit 函数，然后一切正常，但 jquery 的问题是提交按钮的值本身没有作为帖子的一部分传递

我`isset($_POST['submit'])`检查了我所有的子页面并使用`ajaxSubmit`，这个标准从未设置过

```
 $("#bulkeditshowForm").validate({
                submitHandler: function(form) {
                $('#bulkeditshowForm').ajaxSubmit({ 
                    // target identifies the element(s) to update with the server response 
                    target: '#bulkeditResult', 
                    beforeSubmit: function(){

                    },
                    success: function() { 

                                 }
                       }); 
```

如何使用 ajaxSubmit 函数并通过表单提交“提交”按钮值？？？我需要在提交表单时设置提交变量..ajaxForm 执行此操作，但我需要单击提交按钮两次...ajaxSubmit 是解决方案，但它没有设置提交变量本身！！！

请帮忙！！！

# java - 带有分隔符的自定义 ListView 变得疯狂

> ID：10164962
> 
> 赞同：0
> 
> 时间：2012-04-15T18:46:31.550
> 
> 标签：java, android, android-listview, android-view

我正在尝试实现一个自定义 ListView ，其中包含分隔符。这是代码：

单标题：

```
public class SingleTitle {
    String mTitle;
    int[] mInterval;

    public SingleTitle(String title, int[] interval) {
        mTitle = title;
        mInterval = interval;
    }

    public String getTitle() {
        return mTitle;
    }

    public int[] getInterval() {
        return mInterval;
    }
} 
```

标题类别：

```
public class TitleCategory {
String mTitle;

public TitleCategory(String title) {
    mTitle = title;
}

public String getTitle() {
    return mTitle;
}
} 
```

list_category_divider.xml：

```
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical">

<include
    android:id="@+id/list_item_section_text"
    layout="@android:layout/preference_category" />

</ LinearLayout > 
```

返回列表的方法：

```
 public static List<Object> getStructuredTitles(Context context) {
    List<Object> list = new ArrayList<Object>();
    String[] mTitles = getCategoriesTitles(context);
    String[] mParts = getPartsTitles(context);

    list.add(new TitleCategory(mParts[0]));
    list.add(new SingleTitle(mTitles[0], CATEGORIES_INTERVALS[0]));
    list.add(new TitleCategory(mParts[1]));
    list.add(new SingleTitle(mTitles[1], CATEGORIES_INTERVALS[1]));
    list.add(new SingleTitle(mTitles[2], CATEGORIES_INTERVALS[2]));
    list.add(new SingleTitle(mTitles[3], CATEGORIES_INTERVALS[3]));
    list.add(new SingleTitle(mTitles[4], CATEGORIES_INTERVALS[4]));
    list.add(new TitleCategory(mParts[2]));
    list.add(new SingleTitle(mTitles[5], CATEGORIES_INTERVALS[5]));
    list.add(new SingleTitle(mTitles[6], CATEGORIES_INTERVALS[6]));
    list.add(new SingleTitle(mTitles[7], CATEGORIES_INTERVALS[7]));
    list.add(new SingleTitle(mTitles[8], CATEGORIES_INTERVALS[8]));
    list.add(new SingleTitle(mTitles[9], CATEGORIES_INTERVALS[9]));
    list.add(new SingleTitle(mTitles[10], CATEGORIES_INTERVALS[10]));
    list.add(new TitleCategory(mParts[3]));
    list.add(new SingleTitle(mTitles[11], CATEGORIES_INTERVALS[11]));

    return list;
} 
```

我的自定义适配器：

```
 public class TitlesAdapter extends BaseAdapter {
private Context context;
private List<Object> entries;

public TitlesAdapter(Context context, List<Object> entries) {
    this.context = context;
    this.entries = entries;
}

@Override
public int getCount() {
    return entries.size();
}

@Override
public Object getItem(int position) {
    return entries.get(position);
}

@Override
public long getItemId(int position) {
    return position;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    Object entry = entries.get(position);
    boolean isCategory = (entry instanceof TitleCategory);

    if (convertView == null) {
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = inflater.inflate(isCategory ? R.layout.list_category_divider : R.layout.list_items_simple, null);
    }

    if (isCategory) {
        TitleCategory tc = (TitleCategory)entry;
        convertView.setClickable(false);

        Log.d("DBG", "Entry: " + position + " | " + tc.getTitle());
        TextView tv = (TextView) convertView.findViewById(android.R.id.simple_list_item_2);
        if (tv != null) tv.setText(tc.getTitle());
    } else {
        SingleTitle tc = (SingleTitle)entry;

        Log.d("DBG", "Entry: " + position + " | " + tc.getTitle());
        TextView tv = (TextView) convertView.findViewById(android.R.id.text1);
        if (tv != null) 
            tv.setText(tc.getTitle());
    }
    return convertView;

}

public List<Object> getList() {
    return entries;
}

public void setList(List<Object> newentries) {
    entries = newentries;
    notifyDataSetChanged();
}

} 
```

**我的问题：** 该应用程序最初可以很好地绘制列表，但是当我上下滚动列表时，它会弄乱条目。但是在 logcat 中生成的输出是正确的，但是 Android 把列表弄乱了。任何的想法？

更新： ![正确一个](../Images/e803459d8d747816ecd61fac19b5bb2b.png) ![错了一个](../Images/bf1214f885bb9f2afb1441fa05e7da85.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T18:56:32.087

尝试实施[`getViewTypeCount()`](http://developer.android.com/reference/android/widget/Adapter.html#getViewTypeCount%28%29)。在您的情况下，它应该返回 2。

```
@Override
public int getViewTypeCount() {
    return 2;
} 
```

如果没有实现该方法，Android 可能会对单个视图类型做出一些假设。

还覆盖`getItemViewType(int position)`以使其返回`0`或`1`基于列表中的索引是“类别”还是“标题”。

```
@Override 
public int getItemViewType(int position) {
     ...
} 
```

# linux - pcap 的替代品 (Linux)

> ID：10164963
> 
> 赞同：4
> 
> 时间：2012-04-15T18:46:32.070
> 
> 标签：linux, statistics, pcap, libpcap

在 Linux 路由器上，我编写了一个 C 程序，它使用 pcap 来获取 IP 标头和数据包的长度。通过这种方式，我能够收集统计数据并根据 IP 测量带宽。挺整洁的。:-)

现在流量和用户数量都在增长，旧程序开始挣扎。也就是说，路由器难以应对大量的数据包。在“黄金时段”总共每秒超过 50000 个数据包。

该程序本身非常优化。我不想炫耀，但我相信它可以做到最好。它读取 IP 标头和数据包长度。然后它将 IP 转换为索引（只是一个简单的减法），并将数据包的长度存储（累加）在一个数组中。它时不时地（实际上是一个 SIGALRM）将数组存储在 MySQL 数据库中。

我的问题是：有没有其他方法可以利用以太网设备来获得比 pcap 更“便宜”的比特流？

我当然可以修改以太网驱动程序以包含单个 IP 统计信息收集，但这似乎有点过头了。

基本上，我的程序是繁忙的 eth0 上的“tcpdump”，最终会杀死我的路由器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T12:51:52.063

你考虑过[`PF_RING`](http://www.ntop.org/products/pf_ring/)吗？`pcap`由于[零拷贝](http://en.wikipedia.org/wiki/Zero-copy)机制，它仍然是类似的世界，但在类固醇上：

![在此处输入图像描述](../Images/e0dd8cf3bfafa485666486fcb5248f69.png)

如您所见，有一个内核模块提供将低级数据包复制到`PF_RING`缓冲区中，并且有允许访问此缓冲区的用户区部分。

> **谁需要PF_RING？**
> 
> 基本上每个必须每秒处理许多数据包的人。术语“许多”会根据您用于流量分析的硬件而有所不同。它的范围从 1.2GHz ARM 上的 80k pkt/sec 到低端 2.5GHz Xeon 上的 14M pkt/sec 及以上。PF_RING 不仅使您能够更快地捕获数据包，它还可以更有效地捕获数据包，从而保留 CPU 周期......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-29T05:26:04.140

我强烈推荐你使用 PF_RING ZC。它可以在 /userland/examples_zc 下找到。它是 pf_ring 的一部分。

您可以通过 pf_ring zc 以线速处理和捕获数十 Gbps 的流量。

# java - 我为我的第一个简单网络应用程序验证用户感到不知所措。我正在使用 JSF2.0 + Tomcat

> ID：10164964
> 
> 赞同：1
> 
> 时间：2012-04-15T18:46:33.483
> 
> 标签：java, jsf, authentication, tomcat, login

我意识到有无数关于身份验证的问题。此刻，所有这些都让我不知所措。他们似乎对我想做的事情有点矫枉过正。

我将 JSF 2.0 与 Tomcat 一起使用。

我想创建一种允许登录/身份验证的“Hello World”应用程序。我希望用户能够通过一个简单的表单登录并提交一些文本。后续登录将仅显示他们提交的最新文本并允许提交其他文本。

最终的网站不会如此琐碎或课程，但我想奠定登录/身份验证的基础，因为这看起来将是我最大的障碍。

作为第一次可能是 hacky 运行，我创建了自己的基本身份验证。这将解决我的基本问题......为什么我做错了/不安全？

注册后，我将用户 ID 和密码存储在数据库中。我将使用某种散列算法来存储密码，但我还没有决定使用什么。登录后，我会查找从客户端提交的用户 ID/密码的匹配项。如果匹配，我将 userId 存储在会话范围的托管 bean 中，并且用户正在访问他们的数据（暂时只是一个字符串）。

基于我一直在阅读的所有复杂的东西，这样做对我来说似乎太容易了。为什么我的方法不好？我还需要学习如何在登录/注册表单中使用 HTTPS，对吗？

我知道我没有给你太多的工作。抱歉，问题表述不当。我正在努力在这个主题上站稳脚跟，以及寻求一个不会过度杀戮的解决方案的方向。即我不想使用Spring。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T20:31:53.650

这是一个很大的答案。但简而言之，您需要执行以下操作：

首先，对于基于基本表单的身份验证，请查看此[示例](http://docs.oracle.com/cd/E19798-01/821-1841/bncby/index.html)

但是您需要有某种方法从 LDAP 目录或数据库或其他服务中检索 web.xml 中的角色。

因此，您需要配置一个领域以从[此处提到的数据库（在您的情况下）访问角色](http://tomcat.apache.org/tomcat-7.0-doc/realm-howto.html)

最后，如果你想使用 SSL，你需要配置这里提到[的](http://tomcat.apache.org/tomcat-7.0-doc/ssl-howto.html)

另一个示例[链接](http://technology-for-human.blogspot.com/2011/09/tomcat-using-realm-to-protect-access-to.html)。如果您仍然需要一些清晰的信息，请获取 Core JavaServer Faces 书籍的副本并参考第 12 章。

# java - 如何在java中使用RandomAccessFile从文件中读取“长”字节数

> ID：10164965
> 
> 赞同：0
> 
> 时间：2012-04-15T18:46:33.910
> 
> 标签：java, file, random-access

我正在尝试从文件中的某个点读取某个文件的某个字节数。

`RandomAccessFile randomAccessFile = new RandomAccessFile(_file, "r"); randomAccessFile.seek(_offSet);
randomAccessFile.read(buffer, 0, _size);`

其中 _offSet 和 _size 类型为“long”。

问题是，读取方法只需要“int”。我通过使用“seek”克服了偏移问题，如何克服要读取的字节数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T18:55:22.790

尝试一次读取超过 2 GB 没有任何优势（除了简单性）您可以使用多个调用读取超过 2 GB 的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T00:47:59.550

你会把它们读到哪里？无论如何，您不能声明一个那么大的数组。你的问题不存在。

# xamarin.ios - 单点触控示例 GLCameraRippleSample 中缺少 CVOpenGLESTextureCache

> ID：10164967
> 
> 赞同：1
> 
> 时间：2012-04-15T18:46:40.483
> 
> 标签：xamarin.ios

我已经下载了单点样本 GLCameraRipple

但是当我尝试编译它时，CVOpenGLESTextureCache 和 GLKViewDrawEventArgs 中出现错误：

找不到类型或命名空间 CVOpenGLESTextureCache。

GLCameraRipperViewController.Update() 被标记为覆盖但不适合覆盖的方法。

由于示例未打包到 github 上的下载文件中，我不得不复制并粘贴所有代码！！！可能是我做错了什么，但一切似乎都很好（但事实并非如此！！）

谢谢大家！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T01:47:43.853

此代码仅在即将推出的 MonoTouch 5.4 中可用，您可以从 MonoDevelop 的 Alpha 通道中获得预览。

# opengl-es - stb_image 在 iPhone 上不起作用

> ID：10164971
> 
> 赞同：0
> 
> 时间：2012-04-15T18:46:53.410
> 
> 标签：opengl-es

我已经在一些桌面（PC）项目中使用了 stb_image 并且效果很好，但是现在我正在尝试使用它来加载一些标签以将它们与 OpenGL ES 一起使用，但我不能。这是我使用的代码：

```
void TextureManager::LoadFontTexture(const char *filename,int rows,int columns)
{
    glGenTextures(1,&textures[texNum]);
    texNum++;
    glBindTexture(GL_TEXTURE_2D,textures[texNum-1]);
    int x,y,n;
    GLenum format;
    unsigned char *data=stbi_load(filename,&x,&y,&n,0);
    if (data==NULL)
    {
        NSLog(@"Data loaded incorrectly");
        NSLog(@"Failure reason:%s",stbi_failure_reason());
    }
    else {
        NSLog(@"Width:%d height:%d",x,y);
    }
    if (n==3)
    {
        format=GL_RGB;
    }
    else if (n==4)
    {
        format=GL_RGBA;
    }  
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);

    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);

    glTexImage2D(GL_TEXTURE_2D,0,n,x,y,0,format,GL_UNSIGNED_BYTE,data);
} 
```

此代码在桌面上运行良好，但是当我尝试使用此图像对某些内容进行纹理化时，我得到一个黑色方块。宽度和高度值是正确的，并且总是 (n==4) if 被调用（图像有一个 alpha 通道，所以这是正确的）。我不知道出了什么问题。我也尝试用 format=GL_BGRA 更改 format=GL_RGBA 但它不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T19:36:23.513

glTexImage2D 调用应如下所示：

```
glTexImage2D(GL_TEXTURE_2D,0,format,x,y,0,format,GL_UNSIGNED_BYTE,data); 
```

3 或 4 不是 OpenGL ES 中 internalformat 的有效值。请参阅此处的文档：[http ://www.khronos.org/opengles/sdk/docs/man/xhtml/glTexImage2D.xml](http://www.khronos.org/opengles/sdk/docs/man/xhtml/glTexImage2D.xml)

**编辑：这里有更多信息如何检测 OpenGL 错误：**

要检测此类错误，请使用 glGetError 函数。它会告诉哪个函数失败了。例如 - 创建以下宏：

```
#define GL_CHECK(x) do {
    x;
    GLenum glerr = glGetError();
    if (glerr != GL_NO_ERROR) {
        NSLog(@"OpenGL error: %d, file: %s, line: %d", glerr, __FILE__, __LINE__);
    }
} while (0) 
```

然后在每个 OpenGL 函数中使用它，如下所示：

```
GL_CHECK( glTexImage2D(GL_TEXTURE_2D,0,n,x,y,0,format,GL_UNSIGNED_BYTE,data) ); 
```

这将立即让您知道错误在哪里，包括文件名和行号。当然，在发布应用程序时禁用检查。只需使用不同的宏：

```
#define GL_CHECK(x) x; 
```

# wpf - stackpanel 触发器和情节提要

> ID：10164972
> 
> 赞同：1
> 
> 时间：2012-04-15T18:46:56.500
> 
> 标签：wpf, xaml, layout, storyboard, expander

在为扩展器内容设置堆栈面板触发器时，我开始了故事板动画，但是如何以相同的方式反向使用故事板动画？

```
<BeginStoryboard>
<Storyboard>
<DoubleAnimation From="0" To="1.2" Duration="0:0:0.45" Storyboard.TargetName="content" Storyboard.TargetProperty="(FrameworkElement.LayoutTransform).(ScaleTransform.ScaleX)"/>
</Storyboard>
</BeginStoryboard> 
```

这会慢慢滑出扩展器的内容，但它会像原来的扩展器一样弹回？我想设置它，所以它也会慢慢地回来和出去？

例如，如果我在 DoubleAnimation 上添加/使用：

```
AutoReverse="True" 
```

当我单击扩展器时，它会打开然后关闭，而不是单击时打开，单击时关闭？所以不确定如何实现我的目标。

编辑：

```
 <StackPanel Orientation="Horizontal" >
            <StackPanel.Triggers>
                <EventTrigger RoutedEvent="Expander.Expanded" SourceName="expander1">
                    <EventTrigger.Actions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation From="0" To="1.2" Duration="0:0:0.45" Storyboard.TargetName="content" Storyboard.TargetProperty="(FrameworkElement.LayoutTransform).(ScaleTransform.ScaleX)"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger.Actions>
                </EventTrigger>
            </StackPanel.Triggers>
            <Expander ExpandDirection="Right" Name="expander1" OpacityMask="#6C806969" Background="#FF807171">
                <Expander.Header>
                    <TextBlock Text="  FORUMS" Foreground="#FFFCB798" FontSize="41" FontStretch="UltraExpanded">                      
                <TextBlock.LayoutTransform>
                    <RotateTransform Angle="90"></RotateTransform>
                </TextBlock.LayoutTransform>
                        </TextBlock>
                </Expander.Header> 
                <Grid x:Name="content" Background="#FF807171" Width="378">
                    <Grid.LayoutTransform>
                        <ScaleTransform ScaleX="0" ScaleY="1"/>
                    </Grid.LayoutTransform>
                </Grid>
            </Expander> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T23:46:33.037

你需要两个`Storyboards`。

一个是**滑出，**另一个是**滑入**。

在您的`Expander`控制范围内，您将需要一个`ToggleButton`. `ToggleButton`为时`Checked`，触发**滑出**动画，为 时`Unchecked`，触发**滑入**动画。

**更新**

我个人更喜欢在控件的样式中做这种类型的动画，所以你不需要复制代码，它们可以很容易地共享。

我在这里所做的是，我`Expander`根据其默认样式创建了一个新样式。

在样式内部，我将其设置`ExpandSite`为 always`Visible`并删除了将`ExpandSite` `Visible`when`IsExpanded`设置为的代码`True`。我还创建了两个故事板来处理**滑出**和**滑入**动画。

在**滑出**动画（即`ExpandAnimation`）中，我在开始时将`Visibility`of设置`ExpandSite`为`Visible`，然后为其设置动画`ScaleX`；在动画**幻灯片**（即`CollapseAnimation`）中，我`ScaleX`首先为其设置动画并将其设置在`Visibility`最后`Collapsed`。

我附上了完整的代码供您参考。

```
<Window xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity" xmlns:ei="http://schemas.microsoft.com/expression/2010/interactions"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="d"
    x:Class="animationtest.MainWindow"
    x:Name="Window"
    Title="MainWindow"
    Width="640" Height="480">
    <Window.Resources>
        <Style x:Key="ExpanderRightHeaderStyle" TargetType="{x:Type ToggleButton}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ToggleButton}">
                        <Border Padding="{TemplateBinding Padding}">
                            <Grid Background="Transparent" SnapsToDevicePixels="False">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="19"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>
                                <Grid>
                                    <Grid.LayoutTransform>
                                        <TransformGroup>
                                            <TransformGroup.Children>
                                                <TransformCollection>
                                                    <RotateTransform Angle="-90"/>
                                                </TransformCollection>
                                            </TransformGroup.Children>
                                        </TransformGroup>
                                    </Grid.LayoutTransform>
                                    <Ellipse x:Name="circle" HorizontalAlignment="Center" Height="19" Stroke="DarkGray" VerticalAlignment="Center" Width="19"/>
                                    <Path x:Name="arrow" Data="M 1,1.5 L 4.5,5 L 8,1.5" HorizontalAlignment="Center" SnapsToDevicePixels="false" Stroke="#666" StrokeThickness="2" VerticalAlignment="Center"/>
                                </Grid>
                                <ContentPresenter HorizontalAlignment="Center" Margin="0,4,0,0" Grid.Row="1" RecognizesAccessKey="True" SnapsToDevicePixels="True" VerticalAlignment="Top"/>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="true">
                                <Setter Property="Data" TargetName="arrow" Value="M 1,4.5  L 4.5,1  L 8,4.5"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="true">
                                <Setter Property="Stroke" TargetName="circle" Value="#FF3C7FB1"/>
                                <Setter Property="Stroke" TargetName="arrow" Value="#222"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="true">
                                <Setter Property="Stroke" TargetName="circle" Value="#FF526C7B"/>
                                <Setter Property="StrokeThickness" TargetName="circle" Value="1.5"/>
                                <Setter Property="Stroke" TargetName="arrow" Value="#FF003366"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="ExpanderUpHeaderStyle" TargetType="{x:Type ToggleButton}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ToggleButton}">
                        <Border Padding="{TemplateBinding Padding}">
                            <Grid Background="Transparent" SnapsToDevicePixels="False">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="19"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid>
                                    <Grid.LayoutTransform>
                                        <TransformGroup>
                                            <TransformGroup.Children>
                                                <TransformCollection>
                                                    <RotateTransform Angle="180"/>
                                                </TransformCollection>
                                            </TransformGroup.Children>
                                        </TransformGroup>
                                    </Grid.LayoutTransform>
                                    <Ellipse x:Name="circle" HorizontalAlignment="Center" Height="19" Stroke="DarkGray" VerticalAlignment="Center" Width="19"/>
                                    <Path x:Name="arrow" Data="M 1,1.5 L 4.5,5 L 8,1.5" HorizontalAlignment="Center" SnapsToDevicePixels="false" Stroke="#666" StrokeThickness="2" VerticalAlignment="Center"/>
                                </Grid>
                                <ContentPresenter Grid.Column="1" HorizontalAlignment="Left" Margin="4,0,0,0" RecognizesAccessKey="True" SnapsToDevicePixels="True" VerticalAlignment="Center"/>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="true">
                                <Setter Property="Data" TargetName="arrow" Value="M 1,4.5  L 4.5,1  L 8,4.5"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="true">
                                <Setter Property="Stroke" TargetName="circle" Value="#FF3C7FB1"/>
                                <Setter Property="Stroke" TargetName="arrow" Value="#222"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="true">
                                <Setter Property="Stroke" TargetName="circle" Value="#FF526C7B"/>
                                <Setter Property="StrokeThickness" TargetName="circle" Value="1.5"/>
                                <Setter Property="Stroke" TargetName="arrow" Value="#FF003366"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="ExpanderLeftHeaderStyle" TargetType="{x:Type ToggleButton}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ToggleButton}">
                        <Border Padding="{TemplateBinding Padding}">
                            <Grid Background="Transparent" SnapsToDevicePixels="False">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="19"/>
                                    <RowDefinition Height="*"/>
                                </Grid.RowDefinitions>
                                <Grid>
                                    <Grid.LayoutTransform>
                                        <TransformGroup>
                                            <TransformGroup.Children>
                                                <TransformCollection>
                                                    <RotateTransform Angle="90"/>
                                                </TransformCollection>
                                            </TransformGroup.Children>
                                        </TransformGroup>
                                    </Grid.LayoutTransform>
                                    <Ellipse x:Name="circle" HorizontalAlignment="Center" Height="19" Stroke="DarkGray" VerticalAlignment="Center" Width="19"/>
                                    <Path x:Name="arrow" Data="M 1,1.5 L 4.5,5 L 8,1.5" HorizontalAlignment="Center" SnapsToDevicePixels="false" Stroke="#666" StrokeThickness="2" VerticalAlignment="Center"/>
                                </Grid>
                                <ContentPresenter HorizontalAlignment="Center" Margin="0,4,0,0" Grid.Row="1" RecognizesAccessKey="True" SnapsToDevicePixels="True" VerticalAlignment="Top"/>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="true">
                                <Setter Property="Data" TargetName="arrow" Value="M 1,4.5  L 4.5,1  L 8,4.5"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="true">
                                <Setter Property="Stroke" TargetName="circle" Value="#FF3C7FB1"/>
                                <Setter Property="Stroke" TargetName="arrow" Value="#222"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="true">
                                <Setter Property="Stroke" TargetName="circle" Value="#FF526C7B"/>
                                <Setter Property="StrokeThickness" TargetName="circle" Value="1.5"/>
                                <Setter Property="Stroke" TargetName="arrow" Value="#FF003366"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="ExpanderHeaderFocusVisual">
            <Setter Property="Control.Template">
                <Setter.Value>
                    <ControlTemplate>
                        <Border>
                            <Rectangle Margin="0" SnapsToDevicePixels="true" Stroke="Black" StrokeThickness="1" StrokeDashArray="1 2"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="ExpanderDownHeaderStyle" TargetType="{x:Type ToggleButton}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ToggleButton}">
                        <Border Padding="{TemplateBinding Padding}">
                            <Grid Background="Transparent" SnapsToDevicePixels="False">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="19"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Ellipse x:Name="circle" HorizontalAlignment="Center" Height="19" Stroke="DarkGray" VerticalAlignment="Center" Width="19"/>
                                <Path x:Name="arrow" Data="M 1,1.5 L 4.5,5 L 8,1.5" HorizontalAlignment="Center" SnapsToDevicePixels="false" Stroke="#666" StrokeThickness="2" VerticalAlignment="Center"/>
                                <ContentPresenter Grid.Column="1" HorizontalAlignment="Left" Margin="4,0,0,0" RecognizesAccessKey="True" SnapsToDevicePixels="True" VerticalAlignment="Center"/>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="true">
                                <Setter Property="Data" TargetName="arrow" Value="M 1,4.5  L 4.5,1  L 8,4.5"/>
                            </Trigger>
                            <Trigger Property="IsMouseOver" Value="true">
                                <Setter Property="Stroke" TargetName="circle" Value="#FF3C7FB1"/>
                                <Setter Property="Stroke" TargetName="arrow" Value="#222"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="true">
                                <Setter Property="Stroke" TargetName="circle" Value="#FF526C7B"/>
                                <Setter Property="StrokeThickness" TargetName="circle" Value="1.5"/>
                                <Setter Property="Stroke" TargetName="arrow" Value="#FF003366"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="ExpanderStyle1" TargetType="{x:Type Expander}">
            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
            <Setter Property="VerticalContentAlignment" Value="Stretch"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Expander}">
                        <ControlTemplate.Resources>
                            <Storyboard x:Key="ExpandAnimation">
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleX)" Storyboard.TargetName="ExpandSite">
                                    <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
                                    <EasingDoubleKeyFrame KeyTime="0:0:0.4" Value="1"/>
                                </DoubleAnimationUsingKeyFrames>
                                <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="ExpandSite">
                                    <DiscreteObjectKeyFrame KeyTime="0" Value="{x:Static Visibility.Visible}"/>
                                </ObjectAnimationUsingKeyFrames>
                            </Storyboard>
                            <Storyboard x:Key="CollapseAnimation">
                                <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleX)" Storyboard.TargetName="ExpandSite">
                                    <EasingDoubleKeyFrame KeyTime="0" Value="1"/>
                                    <EasingDoubleKeyFrame KeyTime="0:0:0.4" Value="0"/>
                                </DoubleAnimationUsingKeyFrames>
                                <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="ExpandSite">
                                    <DiscreteObjectKeyFrame KeyTime="0:0:0.4" Value="{x:Static Visibility.Collapsed}"/>
                                </ObjectAnimationUsingKeyFrames>
                            </Storyboard>
                        </ControlTemplate.Resources>
                        <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" CornerRadius="3" SnapsToDevicePixels="true">
                            <DockPanel>
                                <ToggleButton x:Name="HeaderSite" ContentTemplate="{TemplateBinding HeaderTemplate}" ContentTemplateSelector="{TemplateBinding HeaderTemplateSelector}" Content="{TemplateBinding Header}" DockPanel.Dock="Top" Foreground="{TemplateBinding Foreground}" FontWeight="{TemplateBinding FontWeight}" FocusVisualStyle="{StaticResource ExpanderHeaderFocusVisual}" FontStyle="{TemplateBinding FontStyle}" FontStretch="{TemplateBinding FontStretch}" FontSize="{TemplateBinding FontSize}" FontFamily="{TemplateBinding FontFamily}" HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}" IsChecked="{Binding IsExpanded, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}" Margin="1" MinWidth="0" MinHeight="0" Padding="{TemplateBinding Padding}" Style="{StaticResource ExpanderDownHeaderStyle}" VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"/>
                                <ContentPresenter x:Name="ExpandSite" DockPanel.Dock="Bottom" Focusable="false" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" RenderTransformOrigin="0,0.5">
                                    <ContentPresenter.RenderTransform>
                                        <TransformGroup>
                                            <ScaleTransform ScaleX="0"/>
                                            <SkewTransform/>
                                            <RotateTransform/>
                                            <TranslateTransform/>
                                        </TransformGroup>
                                    </ContentPresenter.RenderTransform>
                                </ContentPresenter>
                            </DockPanel>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsExpanded" Value="True">
                                <Trigger.EnterActions>
                                    <BeginStoryboard
                            x:Name="ExpandAnimation_BeginStoryboard" Storyboard="{StaticResource ExpandAnimation}"/>
                                </Trigger.EnterActions>
                                <Trigger.ExitActions>
                                    <BeginStoryboard
                            x:Name="CollapseAnimation_BeginStoryboard" Storyboard="{StaticResource CollapseAnimation}"/>
                                </Trigger.ExitActions>
                            </Trigger>
                            <Trigger Property="ExpandDirection" Value="Right">
                                <Setter Property="DockPanel.Dock" TargetName="ExpandSite" Value="Right"/>
                                <Setter Property="DockPanel.Dock" TargetName="HeaderSite" Value="Left"/>
                                <Setter Property="Style" TargetName="HeaderSite" Value="{StaticResource ExpanderRightHeaderStyle}"/>
                            </Trigger>
                            <Trigger Property="ExpandDirection" Value="Up">
                                <Setter Property="DockPanel.Dock" TargetName="ExpandSite" Value="Top"/>
                                <Setter Property="DockPanel.Dock" TargetName="HeaderSite" Value="Bottom"/>
                                <Setter Property="Style" TargetName="HeaderSite" Value="{StaticResource ExpanderUpHeaderStyle}"/>
                            </Trigger>
                            <Trigger Property="ExpandDirection" Value="Left">
                                <Setter Property="DockPanel.Dock" TargetName="ExpandSite" Value="Left"/>
                                <Setter Property="DockPanel.Dock" TargetName="HeaderSite" Value="Right"/>
                                <Setter Property="Style" TargetName="HeaderSite" Value="{StaticResource ExpanderLeftHeaderStyle}"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="false">
                                <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid x:Name="LayoutRoot" Background="White">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition />
        </Grid.ColumnDefinitions>
        <Expander Header="Expander" ExpandDirection="Right" Style="{DynamicResource ExpanderStyle1}" IsExpanded="True">
            <Expander.HeaderTemplate>
                <DataTemplate>
                    <TextBlock Text="  TEST" Foreground="#FFFCB798" FontSize="41" FontStretch="UltraExpanded">                       
                        <TextBlock.LayoutTransform> 
                            <RotateTransform Angle="90"/> 
                        </TextBlock.LayoutTransform> 
                    </TextBlock>
                </DataTemplate>
            </Expander.HeaderTemplate>
            <StackPanel OpacityMask="#6C806969" Background="#FF807171">
                <TextBox TextWrapping="Wrap" Text="TextBlock" Margin="12" Width="240"/>
                <TextBox TextWrapping="Wrap" Text="TextBlock" Margin="12" Width="240"/>
                <Button Content="Button" Width="80" Margin="12"/>
            </StackPanel>
        </Expander>
    </Grid>
</Window> 
```

希望这可以帮助！

# java - 条件 OR 运算符（||）的短路行为

> ID：10164975
> 
> 赞同：17
> 
> 时间：2012-04-15T18:47:20.090
> 
> 标签：java, operators

条件运算符 && 和 ||
[根据http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op2.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op2.html)短路，这意味着有时不需要评估第二个操作数。

**有人可以提供一个示例，其中条件或（||）运算符将被短路吗？**

使用条件 AND(&&) 运算符的短路行为非常简单，如下所示：

if(false && (1 > 0)) 那么第二个操作数：(1 >0) 不需要评估，但似乎无法找到/想到条件或的示例。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-15T18:49:17.050

当第一个操作数为真时，or 运算符短路。所以，

```
String foo = null;
if (true || foo.equals("")) {
    // ...
} 
```

不抛出`NullPointerException`.

正如@prajeesh 在评论中正确指出的那样，在实际代码中使用短路的方式是为了防止`NullPointerException`在处理可能返回 null 的 API 时出现。因此，例如，如果有一个`readStringFromConsole`方法返回当前可用的字符串，或者如果用户没有输入任何内容，则返回 null，我们可以编写

```
String username = readStringFromConsole();
while (username == null || username.length() == 0) {
    // No NullPointerException on the while clause because the length() call
    // will only be made if username is not null

    System.out.println("Please enter a non-blank name");
    username = readStringFromConsole();
}

// Now do something useful with username, which is non-null and of nonzero length 
```

附带说明一下，只要用户不键入任何内容，返回用户输入的 API 就应该返回空字符串，并且不应返回 null。返回 null 是一种表示“没有可用的东西”的方式，而返回空字符串是一种表示“用户没有键入任何内容”的方式，因此是首选。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-15T18:51:03.650

```
if (true || comparison) 
```

永远不会评估比较，因为它的结果是不相关的（因为第一个参数已经是真的）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T18:49:12.060

```
if(true || (0 > 1)) 
```

第一个陈述是正确的，因此没有必要评估第二个陈述。

# c# - 最低要求的版本管理

> ID：10164979
> 
> 赞同：0
> 
> 时间：2012-04-15T18:48:33.647
> 
> 标签：c#, assemblies, version

我有 3 个程序集 - 其中 2 个应用程序和 1 个类库（两个应用程序都使用类库）。

一个应用程序是“客户端”，它使用由另一个应用程序创建的数据文件。但是，我想检查客户端是否可以使用数据文件（例如，如果数据文件不使用来自新版本客户端和/或类库的内容）。

我以为我可以只使用客户端应用程序的版本，但版本信息必须由“创建者”应用程序创建。

编辑：我认为这个问题很清楚，即使我没有写一个。

那么，我应该如何保存打开和使用数据文件所需的客户端应用程序和类库的版本？

这个版本需要可以从编辑应用程序中访问 - 但是我想避免手动输入它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T18:54:51.987

不，我建议检查*数据文件版本*，而**不是** 创建该数据文件的*程序集版本。*原因很简单，该程序集可以更改它的版本，不是因为数据文件格式（比如说）发生了变化，而是因为一些错误修复，但数据文件保持不变。

简而言之：

在数据文件的生成过程中，在标题/清单中写入`data-file version`信息，并根据*该*信息为您的导入器/转换器/无论是什么选择正确的版本。

# c++ - 带有 g++ 的不需要的警告消息

> ID：10164987
> 
> 赞同：2
> 
> 时间：2012-04-15T18:49:18.343
> 
> 标签：c++, ruby, g++, warnings, ruby-c-extension

我正在尝试为 Ruby 编写一个 c++ 扩展。除了主文件，我还有一个文件`extconf.rb`：

```
require "mkmf"
$libs += " -lstdc++ "
create_makefile("file_name") 
```

并且，在完成之后`ruby extconf.rb`，当我尝试`g++`通过键入来编译它时`make`，我收到警告：

```
cc1plus: warning: command line option "-Wdeclaration-after-statement" is valid for C/ObjC but not for C++ 
```

我读到它没有害处，但是有没有办法避免这个警告？这里有一个人有同样的问题[，](http://bytes.com/topic/c/answers/819144-c-warning)但找不到解决方案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-15T19:10:52.367

在你的试试这个`extconf.rb`：

```
$warnflags.gsub!('-Wdeclaration-after-statement', '') if $warnflags 
```

`if $warnflags`是必需的，因为`mkmf`在 Ruby 1.9.3 中进行了更改；没有它，`undefined method `gsub!' for nil:NilClass`如果您尝试在 Ruby 1.9.2 上构建，您将得到。但是，您不应该在 1.9.2 中收到 c++ 警告：Ruby 使用的默认警告在 1.9.3 中已更改，并且已添加这些警告。

**更新：**

这可能更好：

```
CONFIG['warnflags'].gsub!('-Wdeclaration-after-statement', '') 
```

`$warnflags`从中填充，但这不需要`if $warnflags`for < 1.9.3。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-15T18:50:41.400

编辑`Makefile`运行后创建的结果并从那里`create_makefile`删除。`-Wdeclaration-after-statement`

# ruby - 具有文本和图像的 Ruby Parse PDF 文件

> ID：10164991
> 
> 赞同：3
> 
> 时间：2012-04-15T18:49:51.053
> 
> 标签：ruby, pdf

我有一个包含**文本**和**图像**内容的 pdf 文件。我需要解析它。有没有什么红宝石可以有用？我试过[pdf-reader](https://github.com/yob/pdf-reader) ruby​​ gem，但没有解析图像:(

一种替代解决方案是将 pdf 提取为 html，然后解析 html 内容。是否有任何开源 pdf2html 转换器可以**同时**处理文本和图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T08:36:27.227

pdf-reader 可以提取图像，但是没有像 PDF::Reader::Page#text() 这样的好帮手，所以它非常手动。

查看 extract_images.rd 示例 @ [1]。

[1] [https://github.com/yob/pdf-reader/blob/master/examples/extract_images.rb](https://github.com/yob/pdf-reader/blob/master/examples/extract_images.rb)

# windows-phone-7 - ListBoxItem 绝对位置，Windows Phone 7

> ID：10164992
> 
> 赞同：3
> 
> 时间：2012-04-15T18:49:51.570
> 
> 标签：windows-phone-7, listbox, listboxitem

如何根据整个 ListBox 和可见的 ScrollViewer 区域获取 ListBoxItem 的绝对（X，Y）位置（它的左上角）？WP7下好像没有TranslatePoint()。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T17:47:06.647

找到了方法。

```
var selectedItem = listBox.ItemContainerGenerator.ContainerFromItem(listBox.SelectedItem) as ListBoxItem;
var transformToVisual = selectedItem.TransformToVisual(listBox);
var transform = transformToVisual.Transform(new Point(0, 0)); 
```

# css - 带有模块和健全范围的 CSS 预处理器？

> ID：10164995
> 
> 赞同：5
> 
> 时间：2012-04-15T18:50:22.993
> 
> 标签：css, sass, less

是否有替代[SASS](http://sass-lang.com/)或[LESS](http://lesscss.org/)的方法来实现模块和健全的全局范围？

例如，当我在 SASS（或 LESS 等效项）中执行此操作时：

```
@import "foo.scss" 
```

...它将所有混合、变量等从导入的文件推送到全局范围，可能会覆盖或与加载或定义的混合/变量发生冲突。我认为这是一团糟。

我想要更模块化的东西。想象一下`foo.scss`有一个 mixin `bar`：

```
@mixin bar {
    // ...
} 
```

要使用这个 mixin，我会相对于“foo”命名空间来调用它。更多或像这样：

```
@import "foo.scss"

.bar {
    @include foo.bar;
} 
```

换句话说： a 不会像`from foo import *`Python 中的`@import foo`那样工作，而是真正像`import foo`.

所以。是否有一个 CSS 预处理器关心这样的命名空间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T09:20:14.190

在 LESS 中，您可以在导入另一个的文件中定义您的命名空间。

foo.less：

```
.bar() {
    // …
} 
```

main.less:

```
.namespace {
    @import "foo";
}
// To use .bar-Mixin prefix namespace:
body {
    .namespace .bar();
    // .bar(); would throw an error
} 
```

不了解 SASS/SCSS。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-16T13:50:14.943

我在 Sass 中命名我的模块并立即执行 mixins：

```
@mixin MyAwesomeModule() {

    $fontColor: red;
    $bgColor: green;

    .someDiv {
        color: $fontColor;
        background: $bgColor;
    }

}
@include MyAwesomeModule(); 
```

# c++ - 使用 CImage 时避免强制转换

> ID：10164996
> 
> 赞同：0
> 
> 时间：2012-04-15T18:50:25.917
> 
> 标签：c++, casting

最近我看到一些人告诉其他人，如果他们需要施法，他们就做错了。我在 C++ 中有这段代码

```
byte* pixel = (byte*)image->GetBits(); 
```

在这里我转换为 a`byte*`因为 GetBits() 返回 a `void*`。那我怎么办

*   有`pixel`一个字节*没有强制转换
*   使用`void*`（我以前从未使用过这种类型）

为了澄清，然后我继续使用`pixel`与此类似的方法。

```
*(pixel) += 20;
*(pixel + 1) += 20;
*(pixel + 2) += 20; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T18:53:36.487

在您的情况下，强制转换是合理的，但在 C++ 中，更好的强制转换方法是使用 C++ 风格的强制转换之一，因此您可以在此处使用`static_cast`：

```
byte* pixels = static_cast<byte*>(image->GetBits()); 
```

要了解各种 C++ 风格的演员表，以及在哪里使用，请阅读以下主题：

*   [什么时候应该使用 static_cast、dynamic_cast、const_cast 和 reinterpret_cast？](https://stackoverflow.com/questions/332030/when-should-static-cast-dynamic-cast-and-reinterpret-cast-be-used)
*   [常规演员与 static_cast 与 dynamic_cast](https://stackoverflow.com/questions/28002/regular-cast-vs-static-cast-vs-dynamic-cast)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-15T18:56:04.557

根据`void *`定义，不使用强制转换是不可能的，因为 a`void *`不能被取消引用/递增/无论如何。它只是意味着“这里有一个指向一些数据的指针，我不知道是什么样的”。

`GetBits()`返回 a`void *`因为访问数据的最佳方式取决于图像的类型（特别是颜色深度）和您想要做的详细说明；自然，您必须将其转换为某些东西才能对此类数据执行某些操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-15T18:53:45.633

你的问题很清楚。强制转换并不总是意味着你做错了什么，但它是一种代码味道。

在您的特定情况下，代码气味正在返回一个`void *`. 为什么需要一个返回的函数`void *`？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-15T20:15:02.377

您实际上并没有在任何地方提出问题，所以让我评论一下何时转换为 a 以外的其他东西`byte*`，因为您的情况可能很危险：如果返回的指针被转换为指向 2 字节类型的指针，则 4-字节类型等，并且指向的值未针对该大小的类型正确对齐，则可能会发生数据未对齐错误，这在某些架构上只会完全杀死您的进程。因为`byte*`强制转换是安全的，因为它指向最小对齐的类型，*即*，它总是正确对齐。