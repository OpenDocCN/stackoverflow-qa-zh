# StackOverflow 问答 11010000-11010999

# image - 我们可以在 android table 上使用 6146 x 1536 px 的图像吗

> ID：11010007
> 
> 赞同：0
> 
> 时间：2012-06-13T07:22:13.840
> 
> 标签：image, android

我在 android 平板电脑上开发游戏我使用平台 3.2 Api 级别 13，我必须在每个屏幕上以 png 格式使用背景图像 6146 x 1536，但问题是我在加载应用程序时出现内存问题。我们可以使用这个尺寸的图像或任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T07:41:29.267

似乎一个简单的解决方案是“不要那样做”。

根据图像的用途，您应该将其分解为合理大小的图块（当您始终以特定大小和分辨率显示图像并希望滚动时）或创建同一图像的多个不同缩放，并且也将它们分解为图块（以支持放大和缩小以及滚动）。仅将您当前需要的图块加载到内存等中。

如果图像在任何时候都没有缩放或滚动，那么您应该有一个更接近您在 android 设备上可能期望的屏幕尺寸的图像。

# silverlight - Silverlight WebClient 和 HTTP 状态代码

> ID：11010009
> 
> 赞同：4
> 
> 时间：2012-06-13T07:22:19.230
> 
> 标签：silverlight, webclient, httprequest

我正在使用 HSS Interlink 在我的应用程序中上传下载文件。我面临的问题是我的下载处理程序正在返回 HTTPStatusCodes，如 500,404 等，但问题是当我摆弄请求时，它正确显示了我真正想要返回的 500 状态代码，但在 Silverlight 客户端中，当我检查 HttpWebResponse.Status在例外我得到 404 .. 我在 msdn 上进一步调查了这个并发现了一个非常奇怪的评论：

> 为 HTTP 和 HTTPS 方案返回的唯一状态代码值是 OK 和 NotFound。

[http://msdn.microsoft.com/en-us/library/system.net.httpstatuscode%28v=vs.95%29.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpstatuscode%28v=vs.95%29.aspx)

有没有人可以对此有所了解？这是否意味着 silverlight webClient 只能有 OK 和 NotFound 状态作为响应？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T08:00:58.480

找到了答案.. silverlight 需要注册 url 方案才能处理传入的 httpstatus 代码。

```
bool httpResult = WebRequest.RegisterPrefix("http://", WebRequestCreator.ClientHttp);
bool httpsResult = WebRequest.RegisterPrefix("https://", WebRequestCreator.ClientHttp); 
```

我确信这不是 RegisterPrefix 的唯一用途。我希望其他人帮助我了解它的潜在用途是什么..

**编辑：**

silverlight 提供在两种模式下与 http 堆栈一起工作。一种是默认使用的 browserStack。所有 cookie 和 auth 标头都由浏览器处理，但它不会发送任何状态代码返回给 silverlight 客户端。

另一方面，ClientHttp 堆栈为您提供了获取状态代码和其他异常详细信息，但它要求您自己管理所有内容，包括 cookie、标头等。

问候。

# linux - wget 的 strace 给出了奇怪的套接字调用

> ID：11010018
> 
> 赞同：2
> 
> 时间：2012-06-13T07:23:17.827
> 
> 标签：linux, sockets, ubuntu, wget, strace

“strace wget grooveshark.com”以错误的字符串长度停止奇怪的套接字调用，我必须按 Ctrl+C 来终止。

```
write(2, "Connecting to grooveshark.com (g"..., 67Connecting to grooveshark.com (grooveshark.com)|8.20.213.76|:80... ) = 67
socket(PF_INET, SOCK_STREAM, IPPROTO_IP) = 3
connect(3, {sa_family=AF_INET, sin_port=htons(80), sin_addr=inet_addr("8.20.213.76")}, 16) = 0
write(2, "connected.\n", 11connected.
)            = 11
select(4, NULL, [3], NULL, {900, 0})    = 1 (out [3], left {899, 999993})
write(3, "GET / HTTP/1.1\r\nUser-Agent: Wget"..., 115) = 115
write(2, "HTTP request sent, awaiting resp"..., 40HTTP request sent, awaiting response... ) = 40 [[ Check this line ]]
select(4, [3], NULL, NULL, {900, 0} ^C 
```

write(2, "HTTP request sent, awaiting resp"..., 40HTTP request sent, awaiting response...) = 40

应该

write(2, "HTTP 请求已发送，等待响应...", 40 ) = 40

但是 strace wget google.com 给出了

```
write(3, "GET / HTTP/1.1\r\nUser-Agent: Wget"..., 116) = 116
write(2, "HTTP request sent, awaiting resp"..., 40) = 40
select(4, [3], NULL, NULL, {900, 0})    = 1 (in [3], left {899, 932611}) 
```

并正确终止。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T07:30:27.393

您看到 wget 的输出与 strace 的输出混合在一起。使用 -o 选项`strace`将跟踪存储在文件中，这样就不会发生这种情况。

> write(2, "HTTP request sent, awaiting resp"..., 40HTTP request sent, awaiting response...) = 40

wget 中的这个 write 调用将消息打印到 stderr，在它返回之前，它的输出会在终端中看到，介于 40 和右括号之间

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T07:28:40.130

默认情况下`strace`在*stderr*上输出，这通常是您的终端窗口。因此，由 给出的跟踪`strace`与被跟踪程序的输出混合在一起。

您可以运行`strace -o /tmp/wget.tr wget http://grooveshark.com/`以获取文件中的跟踪`/tmp/wget.tr`（您可以同时`tail -f /tmp/wget.tr`在另一个终端中运行以查看内部）。

我建议仔细阅读[man strace](http://linux.die.net/man/1/strace)的输出。

# objective-c - 如何将 3d 不可变数组转换为可变数组？

> ID：11010024
> 
> 赞同：0
> 
> 时间：2012-06-13T07:24:06.687
> 
> 标签：objective-c, arrays, deep-copy

似乎当我使用 mutableCopy 时，数组的第一个维度保持可变，但数组中的所有数组都变得不可变。

我当前的代码似乎没有效果，并且尝试编辑数组会导致 NSInvalidArgumentException。

该代码应该对输入（3d 数组）进行深层复制，然后确保它是可变的。

```
-(NSMutableArray*) copyMutable :(NSMutableArray*) input{
NSMutableArray* copyInput = [[input mutableCopy] autorelease];
NSMutableArray* copy = 
[[[NSMutableArray alloc] initWithArray:copyInput   copyItems:YES] autorelease];
NSMutableArray* copylayer;
NSMutableArray* copylayertwo;

arraycount=0;
arraycountTwo=0;
arraycountThree=0;
NSMutableArray* inputCopy = [[[NSMutableArray alloc] init]autorelease];
for (int a=0; a<[inputCopy count]; a++){
    copylayer=[[[copy objectAtIndex:arraycount] mutableCopy]autorelease];
    [copy replaceObjectAtIndex:arraycount withObject:copylayer];
     for (int b=0; b<[inputCopy count]; b++){
         copylayertwo = [[copy objectAtIndex:arraycount] objectAtIndex:arraycountTwo];
         [[copy objectAtIndex:arraycount] replaceObjectAtIndex:arraycountTwo withObject:copylayertwo];

         arraycountTwo++;
     }
    arraycount++;
}
return copy; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T07:38:35.473

对不起，我的错......似乎我错过了一些代码。应该是 copylayertwo = [[[copy objectAtIndex:arraycount] objectAtIndex:arraycountTwo] mutableCopy] autorelease;

此外，似乎我为循环长度输入了错误的变量并重置了计数器。

我应该停止熬夜...

# android - 回溯停止：在 gdb android c 项目期间，前一帧与此帧相同（损坏的堆栈？）

> ID：11010027
> 
> 赞同：2
> 
> 时间：2012-06-13T07:24:31.063
> 
> 标签：android, linux, android-ndk, gdb, gdbserver

我通过ndk构建了一个项目，但不幸的是，当它在android模拟器中运行时，它会崩溃并出现以下提示：

```
[1] + Stopped (signal)        ./secfs secfs-client /data/fuse_dir /data/pwrite/test_11 
```

然后，我按照[教程](http://jiggawatt.org/badc0de/android/index.html)调试我的项目，但它来到了程序集文件。而且我理解汇编文件并不容易。所以，我开始使用核心转储。但是，当系统生成核心文件并且我尝试使用 gdb 读取核心文件时，它会提示以下内容并且 gdb 似乎无法使用它：

```
 Core was generated by `./secfs secfs-client /data/fuse_dir /data/pwrite/test_11'.
Program terminated with signal 11, Segmentation fault.
#0  0x4001e7f0 in ?? ()
(gdb) bt
#0  0x4001e7f0 in ?? ()
#1  0x4001fdfa in ?? ()
Backtrace stopped: previous frame identical to this frame (corrupt stack?) 
```

最后，我不知道下一步该做什么，有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T07:55:42.937

使用（蛮力）力量。在您的代码中放置日志语句并查看它停止的位置。通过这种方式，您将了解导致 SEGFAULT 的代码部分是什么。运行应用程序几次，看看最后一条日志语句是什么。不要假设紧跟最后一条日志语句的代码是有问题的代码。有时某些日志语句不会出现在日志中。我认为这是因为文本的内部缓冲。这就是为什么您应该多次运行代码的原因。

# macos - TextMate 拒绝在 Lion 中启动

> ID：11010031
> 
> 赞同：0
> 
> 时间：2012-06-13T07:24:40.243
> 
> 标签：macos, osx-lion, textmate, launching

我发现[这篇文章](http://thelucid.com/2011/11/24/textmate-refusing-to-launch-in-lion/)很有用而且很重要，所以如果有人在更新到 OSX lion 后运行 textmate 时遇到问题，请执行以下操作...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T07:24:40.540

***[来自 http://thelucid.com/2011/11/24/textmate-refusing-to-launch-in-lion/]：***

有时在 OSX Lion 下，TextMate 拒绝启动。我发现简单地删除它的 pid 文件似乎可以让事情再次正常运行，只需打开终端并输入：

```
rm ~/Library/Application\ Support/TextMate/TextMate.pid 
```

# windows - 如何递归遍历文件夹并确定文件夹大小？

> ID：11010035
> 
> 赞同：2
> 
> 时间：2012-06-13T07:24:49.547
> 
> 标签：windows, powershell, directory, powershell-2.0

我在“ [Windows PowerShell Tip of the Week](http://technet.microsoft.com/en-us/library/ff730945.aspx) ”中提供了一个稍微修改过的脚本版本。这个想法是确定文件夹及其子文件夹的大小：

```
$startFolder = "C:\Temp\"

$colItems = (Get-ChildItem $startFolder | Measure-Object | Select-Object -ExpandProperty count)
"$startFolder -- " + "{0:N2}" -f ($colItems.sum / 1MB) + " MB"

$colItems = (Get-ChildItem $startFolder -recurse | Where-Object {$_.PSIsContainer -eq $True} | Sort-Object)
foreach ($i in $colItems)
    {
        $subFolderItems = (Get-ChildItem $i.FullName | Measure-Object -property length -sum)
        $i.FullName + " -- " + "{0:N2}" -f ($subFolderItems.sum / 1MB) + " MB"
    } 
```

该脚本运行良好，但对于某些文件夹，我收到一条错误消息：

```
Measure-Object : Property "length" cannot be found in any object(s) input.
At line:10 char:70
+         $subFolderItems = (Get-ChildItem $i.FullName | Measure-Object <<<<  -property length -sum)
    + CategoryInfo          : InvalidArgument: (:) [Measure-Object], PSArgumentException
    + FullyQualifiedErrorId : GenericMeasurePropertyNotFound,Microsoft.PowerShell.Commands.MeasureObjectCommand 
```

此错误的原因是什么以及如何改进脚本以克服？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T08:59:37.463

您可以将`-ErrorAction`参数用于`Measure-Object`：

```
$subFolderItems = (Get-ChildItem $i.FullName | Measure-Object -property length -sum -ErrorAction SilentlyContinue) 
```

或其`-ea`带有数值的别名，非常适合在交互式实验中快速添加它：

```
$subFolderItems = (Get-ChildItem $i.FullName | Measure-Object -property length -sum -ea 0) 
```

不过，在我看来，Technet 上的脚本是非常糟糕的 PowerShell 代码。

作为一个非常快速和肮脏（和缓慢）的解决方案，您还可以使用以下单线：

```
# Find folders
Get-ChildItem -Recurse | Where-Object { $_.PSIsContainer } |
# Find cumulative size of the directories and put it into nice objects
ForEach-Object {
    New-Object PSObject -Property @{
        Path = $_.FullName
        Size = [Math]::Round((Get-ChildItem -Recurse $_.FullName | Measure-Object Length -Sum -ErrorAction SilentlyContinue).Sum / 1MB, 2)
    }
} |
# Exclude empty directories
Where-Object { $_.Size -gt 0 } |
# Format nicely
Format-Table -AutoSize 
```

或者实际上是单线：

```
gci -r|?{$_.PSIsContainer}|%{New-Object PSObject -p @{Path=$_.FullName;Size=[Math]::Round((gci -r $_.FullName|measure Length -s -ea 0).Sum/1MB,2)}}|?{$_.Size}|ft -a 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-13T08:42:22.393

我在 Windows 7 上运行它，它可以工作（剪切和粘贴你的代码）。也许您的路径中有一个“名字不好”的文件？

# c# - 如何在库实现中冒泡/处理 C# 异常

> ID：11010036
> 
> 赞同：3
> 
> 时间：2012-06-13T07:24:57.520
> 
> 标签：c#, .net, exception

从库中冒泡异常的最佳方法是什么？当我实现一个接口时，用与我的实现细节有关的异常来调试调用方是好还是坏的做法？我有以下实现，其中每个实现错误都隐藏在调用方之外。在我看来，它是实现关注点分离的最干净的方式。但是我到处都读到你需要冒泡未触及的异常。

```
public class OneException : Exception
{
    public OneException()
    {
    }

    public OneException(string message): base(message)
    {
    }

    public OneException(string message, Exception innerException)
      : base(message, innerException)
    {
    }
} 
```

我的库实现：

```
public class MyLib : IMyLib
{
    public int Divide(int a, int b)
    {
        try
        {
            if (b == 1) throw new OneException();
            return a / b;
        }
        catch (OneException e)
        {
            throw new ApplicationException("Please do not divide by 1", e);
        }
        catch (Exception e) // divide by zero and others
        {
            throw new ApplicationException("Oops", e);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T07:49:07.913

为了与[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)保持一致，您应该注意您的库应该做的事情（如果可能的话）。否则，你应该让调用者处理它。

在您的示例中，您正确地抛出了一个被零除的异常。处理这不是您的图书馆的责任（除非您将其宣传为“安全”的划分方法）。该错误是由不正确的客户端输入引起的，因此应该由客户端来处理它。

但是，您的 OneException 将是一个不寻常的异常抛出。为什么客户端不能除以一？它当然不会造成任何伤害。这大概是一个人为的示例，但除非确实存在无法在内部解决的问题，否则您不应抛出异常。如果有人想除以一，为什么不允许他们这样做？

良好的异常处理将通知客户其输入和/或系统故障的问题，而不是您的逻辑错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T19:00:54.883

选择正确的异常冒泡策略取决于两个主要因素：

1.  您想尽可能多地向调用者提供有关异常上下文的详细信息吗？
2.  你想对调用者隐藏敏感的异常数据吗？

如果您想提供有关异常上下文的更多详细信息，将异常包装到一些更具体的异常中是一个不错的策略。这里最明显的例子是**业务异常**。

如果要对异常隐藏敏感数据，可以考虑替换异常。这种方法通常用于服务中，当调用方不受信任时。

**注意：**你不应该“吞下”异常，除非它不是正常程序流程的一部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T07:36:59.090

作为一般规则，只处理那些*您可以处理*的异常。

在您的库实现中，您捕获不同的异常`OneException`并将`Exception`其重新抛出为`ApplicationException`. 我认为这是一种不好的做法，因为您完全**隐藏**了原始错误的含义。

`ApplicationException`如果唯一冒泡的异常是泛型而没有给出原因的**线索**，那么使用您的库 Divide() 方法的客户端代码应该如何知道究竟发生了什么？

你在这里所做的是抛出一个异常，在同一个方法中捕获它并重新抛出一个**不同**的异常。

让异常冒泡到客户端代码，以便客户端可以**自己决定**它想如何处理它 - 或者**是否完全**处理。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T07:37:31.523

这取决于。如果您想处理异常并由于某些业务规则引发自定义异常，请确保处理异常并记录它或引发新的自定义异常，就像在您的示例代码中一样，您正在为`divide by 1`.

另一个例子可能是，如果您在表中输入数据并且您的获取主键约束异常，您可以捕获异常并根据您的库规范引发您自己的自定义异常，或者您可以保留异常原样，以在调用代码中处理。

如果您要维护内部错误/异常日志，则在库中处理异常可能会有所帮助。您可以记录异常，然后将其抛出，以便它可以冒泡到调用代码。**但是恕我直言，如果您既没有记录也没有引发自定义异常，最好保持异常不变，以便可以在调用代码中处理它**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-13T07:39:20.823

尝试记录异常，这始终是一个好习惯。通过这种方式，客户实际上会知道出了什么问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-13T07:39:58.043

问自己这些问题：

*   作为开发人员，您希望消费者（调用者）了解您的库的哪些信息？

*   作为消费者，如果发生错误，你想要什么？

如果标准 .Net 的异常不足以达到目的，您应该只开始公开您自己的异常类型。这方面的一个示例是与 COM 相关的错误 - 您可能希望为特定的错误条件创建自定义异常，以避免抛出嵌入了特殊数字的 COMException。

我会说`OneException`在你的例子中是浪费时间 - 为什么作为标准异常抛出，捕获然后包装和重新抛出？为什么不一`ApplicationException`开始就扔一个？这接近于使用异常来控制程序流，这是一种反模式。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-13T07:46:26.310

系统涵盖了这两种例外情况。对于 b = 1 的情况，使用 ArgumentOurOfRange 异常，对于 b = 0 的情况，使用 DivideByZeroException。因此，对于您非常简单的示例库，无需创建额外的异常（这不是一个好习惯）。立即抛出异常是需求问题。在大多数情况下（良好做法），您会抛出可由调用者使用 try/catch(/finally) 处理的异常。

# actionscript-3 - AS3 TypeError: 错误 #1007: 在非构造函数上尝试实例化

> ID：11010041
> 
> 赞同：7
> 
> 时间：2012-06-13T07:25:24.527
> 
> 标签：actionscript-3, static, typeerror

出于某种原因，我无法让它工作（严重简化的代码失败）：

```
package com.domain {
    public class SomeClass {
        private static var helper:Helper = new Helper();
    }
}

class Helper {
} 
```

它编译，但在第一次访问时抛出`SomeClass`：

```
TypeError: Error #1007: Instantiation attempted on a non-constructor.
    at com.domain::SomeClass$cinit()
    ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-07T07:30:04.567

*非构造函数*错误是编译器说“你已经为一个我还没有见过的类调用了构造函数”的尴尬方式；如果它更聪明一点，它可以在抱怨之前检查文件（编译单元）的内部类...... mehhh

看到您已授予静态变量`private`访问权限，显然您打算仅在内部使用实例`SomeClass`（*假设；可以作为返回值传递*）。

以下解决方案将静态 var 的创建推迟到初始化内部类时，即在`Helper.cinit()`调用（可能是隐式的）时，而不是`SomeClass.cinit()`在`Helper` *尚不存在*时：

```
package com.domain {
    public class SomeClass {

        public function doSomething(param:*):void {
            // ... use Helper.INSTANCE
        }

    }
}

class Helper {
    public static const INSTANCE:Helper = new Helper();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T09:35:49.097

我认为它不能在同一个文件中与 Helper 和 SomeClass 一起使用。初始化 SomeClass 时，Helper 类尚未初始化，因此无法创建 Helper 对象。

将 Helper 移动到单独的文件应该可以解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-19T17:55:23.653

+1 达伦。另一种选择是将`Helper`类移动到文件的顶部

```
class Helper {
}

package com.domain {
    public class SomeClass {
        private static var helper:Helper = new Helper();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T08:00:41.447

您需要生成一个构造函数并在类中声明您的变量，而不是函数：

```
package com.domain { 
    public class SomeClass { 
        private static var helper:Helper 
        public function SomeClass() {
           helper = new Helper(); 
        }
    } 
} 

class Helper { 
} 
```

# c# - 反射未从中提取值：具有属性的密封类，该属性是另一个密封类的对象。

> ID：11010044
> 
> 赞同：1
> 
> 时间：2012-06-13T07:25:40.053
> 
> 标签：c#, reflection, sealed

我正在使用 object.GetType().GetProperty(string propertyName) 通过反射反复评估属性。

如果 obj 是密封类但具有作为普通公共类对象的属性，这可以正常工作。但是，如果此属性包含一个密封的类对象，它不会通过 GetProperty() 方法返回任何属性。

尝试通过 Prpty1 --> Prpty2--> Prpty3 从基类对象递归迭代。param.Properties 包含 Prpty1、Prpty2、Prpty3 的字符串数组。我无法获得 Prpty2，它以 Null 的形式出现。使用下面编写的方法进行此访问。

示例代码如下：

```
//Methods below are used to extract value from Object (basically BaseClass Object)

 private string EvaluateObject(object obj, MappedParameter param)
    {
        object evaluatedObj = obj;
        foreach (string s in param.Properties)
        {
            evaluatedObj = EvalProperty(evaluatedObj, s);
        }
        return (evaluatedObj == obj ? null : evaluatedObj.ToString());
    }

    private object EvalProperty(object obj, string propertyName)
    {
        System.Reflection.PropertyInfo propInfo = obj.GetType().GetProperty(propertyName);
        if (propInfo == null)
            throw new Exception("Invalid Property token");
        object propertyValue = propInfo.GetValue(obj, null);
        return propertyValue;
    }

//Below classes are Data Wrappers

 namespace TryClassLibrary
 {
 public class BaseClass
 {
    private NestedClass _Data = new NestedClass();    

    public NestedClass Prpty1
    {
        set { _Data = value; }
        get { return _Data; }
    }
}
}

 namespace TryClassLibrary
{
public sealed class NestedClass
{
    public int Id { get; set; }

    public NestedNestedClass Prpty2 = new NestedNestedClass();
}

public sealed class NestedNestedClass
{
    private string _Message;

    public NestedNestedClass()
    {
        Prpty3 = "Test value";
    }

    public string Prpty3
    {
        set
        {
            _Message = value;
        }
        get { return _Message; }
    }
}
} 
```

请有人帮我找到访问 Prpty2、Prpty3 的方法，或者它是使用反射的一些现有限制。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T07:33:31.000

啊，问题很简单：`Prpty2` **不是属性**：而是字段：

```
public NestedNestedClass Prpty2 = new NestedNestedClass(); 
```

应该：

```
private readonly NestedNestedClass prpty2 = new NestedNestedClass();
public NestedNestedClass Prpty2 { get { return prpty2; } } 
```

（或类似的）

然后一切正常：

```
object obj = new BaseClass();
obj = obj.GetType().GetProperty("Prpty1").GetValue(obj, null);
obj = obj.GetType().GetProperty("Prpty2").GetValue(obj, null);
obj = obj.GetType().GetProperty("Prpty3").GetValue(obj, null);
string s = obj.ToString(); // "Test value" 
```

有关信息，如果您正在做很多这样的事情 - 也许看看[FastMember](http://nuget.org/packages/FastMember)；它更方便，并且经过大量优化，因此无需支付反射税。

# php - 如何在 Cakephp 中实现继承

> ID：11010046
> 
> 赞同：2
> 
> 时间：2012-06-13T07:25:46.163
> 
> 标签：php, oop, cakephp, inheritance, cakephp-2.1

我想实现继承，因为我按照[这篇文章](http://bakery.cakephp.org/articles/santino83/2011/02/19/behavior_for_model_inheritance_the_missing_feature)我没有得到数据库设计，我只能创建模型如下，我在模型/行为下创建了文件 InheritBehavior.php 和文章中一样。那么如何为这些模型设计数据库来支持继承

```
class Animal extends AppModel{
    var $name='Animal';
}

App::import('Model', 'Animal');
class Mammal extends Animal{
public $actsAs = array( 'Inherit' ); 
}   var $name= 'Mammal';

}

App::import('Model', 'Animal');
class Insect extends Animal{
    var $name='Insect';
}   

Animal: id, age
Mammal: id, no_of_legs ('age' is common)
Insect: id, no_of_wings ('age' is common) 
```

什么是数据库设计（**多表继承**）。

**对这种类型使用继承而不是关联（使用 hasOne 和 belongsTo）是个好主意吗？ cakephp 会很好地支持吗？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T17:35:26.117

**Sort answer:** no, it is not a good idea.

In OOP it is recommended to always prefer composition over inheritance.

* * *

You are doing it wrong.

In OOP there is something we call [Liskov substitution principle](https://en.wikipedia.org/wiki/Liskov_substitution_principle) (for *dumb down* version: [image](http://www.globalnerdy.com/wordpress/wp-content/uploads/2009/07/liskov_substitution_principle_small.jpg)). This means, that you should not remove or fundamentally change functionality, when sub-classing.

Also, using animals as OOP example always ends up horribly. Classify following: whale(no legs), bat(has wings), lice(no wings). I guess you see the problem.

And one other thing. As CakePHP user you might not be aware of it, but in PHP5 we have define variables as either `private`, `public` or `protected`. Instead of PHP4-style `var`.

# java - 在 rmi 中放置 c3p0 配置和 getConnection 方法的位置

> ID：11010047
> 
> 赞同：1
> 
> 时间：2012-06-13T07:25:52.173
> 
> 标签：java, rmi, c3p0

我正在制作一个基于 rmi 的客户端服务器应用程序。

在服务器端，它由一个运行 rmi（用于绑定注册表）的 java 文件和所有必需的接口组成，这些接口调用其他类，用于各种基于服务器的操作（包括与数据库的连接）。

现在的疑问是

"*我应该将用于配置**ComboPoolDataSource 实例**和**getConnection()**方法*的代码放在哪里，以便在我运行 java rmi 文件时可以完成配置，并且我可以从任何其他 java 文件调用**.getConnection() 。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T22:09:43.230

您可以将它放在执行绑定的启动类中，或者放在单例类中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T13:39:52.573

首先...创建代码以在包含静态方法或变量的类中启动连接，如下所示..

```
 private static ComboPooledDataSource cpds = new ComboPooledDataSource();
        public static void MakePool()
        {
               try 
               {
                 cpds=new ComboPooledDataSource();
                 cpds.setDriverClass("com.mysql.jdbc.Driver");
                 cpds.setJdbcUrl("jdbc:mysql://localhost:3306/att_db");
                 cpds.setUser("root");
                 cpds.setPassword("dragon");
                 cpds.setMaxPoolSize(MaxPoolSize);
                 cpds.setMinPoolSize(MinPoolSize);
                 cpds.setAcquireIncrement(Accomodation);
             } 
             catch (PropertyVetoException ex) 
             {
                 //handle exception...not important.....
              }

}
public static Connection getConnection()
{
           return cpds.getConnection();
} 
```

一旦你完成创建另一个用于服务器操作的类......

并从池中获取连接...

```
 try{

               con=DatabasePool.getConnection();
               // DatabasePool is the name of the Class made earlier....
               .
               .
               .
               .  // Server operations as u wanted.....
               .
               .
             }
             catch(SQL EXCEPTION HERE)
             {
                  .....
             }
             finally
             {     
               if(con!=null)
               {
                      con.close();      
               }
             } 
```

# ruby-on-rails - Rails 3 中的嵌套资源错误

> ID：11010055
> 
> 赞同：0
> 
> 时间：2012-06-13T07:26:50.897
> 
> 标签：ruby-on-rails

我的路线.rb

```
resources :post do
      resources :answers do
        resources :anscomments
      end
    end 
```

楷模

**post.rb**

```
has_many :answers 
```

**答案.rb**

```
belongs_to :post
has_many :anscomments 
```

**anscomment.rb**

```
belongs_to :answer 
```

控制器

**answers_controller.rb**

```
class AnswersController < ApplicationController
  def create
    @post = Post.find(params[:post_id])
    @answer = @post.answers.create(params[:answer])
    redirect_to post_path(@post)
  end
end 
```

**anscomments_controller.rb**

```
class AnscommentsController < ApplicationController
  def create
    @answer = Answer.find(params[:answer_id])
    @anscomment = @answer.anscomments.create(params[:anscomment])
    redirect_to post_path(@answer)
  end
end 
```

意见

**查看/发布/show.html.erb**

```
<table align=center width="60%" bordercolor="black">

    <tr>
        <td align="center">
            <h2>
                <%=@post.title%> 
            </h2>
        </td>
    </tr>
    <tr>
        <td align="center">
            <h3><%=@post.body%></h3>
        </td>
    </tr>
    <tr>
        <td align="center">
            This Post comes under:<%=@post.tag%>
        </td>
    </tr>

</table>
<br />
<h2 align="center">Answers</h2>
<div align="center">
    <% @post.answers.each do |answer| %>
    <table width="50%" border="1">
        <tr>
            <td align="center">
                <%= answer.body %>
            </td>
        </tr>

        <div align="center">
            <% @answer.anscomments.each do |anscomment| %>
            <table width="40%" %>
                <tr>
                    <td>
                        <%= anscomment.body %>
                    </td>
                </tr>
            </table>
            <%end%>
        </div>
        <div align="center">
            <%= form_for([@answer,@answer.anscomments.build]) do |f| %>
            <table>
                <tr>
                    <td><%= f.text_area :body %></td>
                </tr>
                <tr>
                    <td><%= f.submit "Submit Comment" %></td>
                </tr>
            </table>
            <%end%>
        </div>

    </table>
    <% end %>
</div>
<br />
<h2 align="center">Your Answer</h2>
<div align="center">
    <%= form_for([@post, @post.answers.build]) do |f| %>
    <table>
        <tr>
            <td><%= f.text_area :body %></td>
        </tr>
        <tr>
            <td><%= f.submit "Post Your Answer" %></td>
        </tr>
    </table>
    <% end %>
</div> 
```

当我尝试单击单个帖子时，我收到一个错误，例如----“nil:NilClass 的未定义方法`anscomments'”

请找到解决方案......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T07:40:36.113

尝试使用`answer.anything`而不是`@answer.anything`in`post/show.html.erb`

```
<%= answer.body %> 
```

是正确的，

```
<% @answer.anscomments.each do |anscomment| %> 
```

错误，@answer 未初始化 (nil)

# javascript - 有没有办法将 javascript 文件加载到页面的一个文件中以优化网站速度？

> ID：11010057
> 
> 赞同：0
> 
> 时间：2012-06-13T07:27:09.640
> 
> 标签：javascript, css, optimization, minify

我目前正在开发一个网站。每个功能都运行良好。但是，我使用了很多工具来帮助我的网站更加可用，这些工​​具提供了更多的 javascript 和 css 文件负载，因此我的网站性能变得很差。

我在网上搜索并找到了一些关于如何缩小这些脚本和 css 文件的链接。但是，我想通过将这些文件加载​​到一个文件中并将其加载到页面中来加快速度。因此，有没有办法做这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T07:32:46.697

我觉得这有点含糊，因为我们不知道您网站的结构；是否有任何服务器端技术；页面的标记和内容，或者 JS 文件的数量和大小（及其包含的功能）。您是否通过**YSlow**运行您的网站：http : [//developer.yahoo.com/yslow/](http://developer.yahoo.com/yslow/)

这些链接也可能有帮助：

[http://developer.yahoo.com/performance/rules.html](http://developer.yahoo.com/performance/rules.html)

[http://robertnyman.com/2010/01/19/tools-for-concatenating-and-minifying-css-and-javascript-files-in-different-development-environments/](http://robertnyman.com/2010/01/19/tools-for-concatenating-and-minifying-css-and-javascript-files-in-different-development-environments/)

# c# - 当应用程序关闭时，我可以检测到后台线程何时被应用程序杀死？

> ID：11010058
> 
> 赞同：12
> 
> 时间：2012-06-13T07:27:14.430
> 
> 标签：c#, multithreading, threadabortexception, isbackground

我在 C# 中使用一个线程，我将 IsBackground 属性设置为 true。线程在循环中运行一些代码，直到应用程序关闭。当应用程序关闭时，线程也停止执行（因为我设置了 IsBackground = true）。

应用程序如何杀死线程？似乎它不会通过调用 abort 来做到这一点，因为我没有得到 ThreadAbortException。它发生在幕后吗？我想在我的 finally 循环块中做一些回滚。

我知道我可以自己在线程上调用 abort，但我想知道应用程序如何关闭我的后台线程，以及我是否可以从线程内部对其做出反应。我知道我可以订阅 Application.ApplicationExit 事件，但我在服务和 winform 中都运行此代码，我更喜欢在循环中捕获异常，以便能够在 finally 语句中回滚。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T08:16:42.763

> 似乎它没有通过调用 abort 来做到这一点，因为我没有得到 ThreadAbortException

确实如此，CLR 有两种方法可以中止线程。“正常”方式，通过 Thread.Abort() 调用，线程可以看到 ThreadAbortException。但也有粗鲁的中止，以同样的方式工作。但是减去 TAE 并且没有 finally 块执行。你无法观察它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T08:01:50.120

当`thread`操作系统将处理器分配给`thread`. 当 Started 线程第一次收到处理器并成为 Running 线程时，该线程`ThreadStart delegate`将执行其 ，它指定线程在其生命周期中将执行的操作。当程序创建一个新线程时，程序将线程指定为`ThreadStart delegate`线程构造函数的参数。

正在运行的线程在其终止时进入`Stopped (or Dead)`状态。`ThreadStart delegate`在您的情况下，您的主线程已终止。因此，您的`ThreadStart delegate`对象不会保留在内存中。当没有对线程对象的引用时，垃圾收集器可以从内存中删除线程对象。

# android - 对 List 中的 TextView 执行 onClick

> ID：11010061
> 
> 赞同：0
> 
> 时间：2012-06-13T07:27:37.910
> 
> 标签：android, textview, quickaction

我有一个带有 TextViews 的列表，当用户单击按钮时，我在相应的 TextView 上执行 performClick()（以触发 QuickAction），但我得到的视图为空，有谁知道这是为什么，以及如何修复这？

这就是我创建 TextView 的方式

```
//The holder of a store, which contains a TextView
public List<Store> stores = new ArrayList<Store>();

// Create TextView and QuickAction within loop in method createStores();
FrameLayout.LayoutParams lp = new FrameLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
lp.leftMargin = Math.round(location[0]);
lp.topMargin = Math.round(location[1]);
lp.gravity = Gravity.TOP | Gravity.LEFT;

TextView tv = new TextView(getContext());
tv.setTag(s);
tv.setLayoutParams(lp);
tv.setText(s.name);

final QuickAction quickAction = new QuickAction(getContext(), QuickAction.VERTICAL);
ActionItem nextItem = new ActionItem(s.ID, s.name, null, s.ID);
quickAction.addActionItem(nextItem);

tv.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
        quickAction.show(v, null);  
    }
});

s.textview = tv; 
```

然后，我有一个搜索方法，我从 stores List 中找到一家商店，并希望通过 performClick() 方法模拟点击。调用了 OnClickListener，但是由于 TextView 为空，所以放错了 QuickAction

```
// Then from another function
s.textview.performClick(); 
```

==== 更新 ===== 我解决了我自己的问题，谢谢大家的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T14:22:52.343

我解决了这个问题：问题是我在视图尚未准备好时执行了 performClick。所以我添加了这样的延迟来解决它：

```
s.textview.postDelayed(new Runnable() {
                                public void run() {
                                    s.textview.performClick();
                                }
                            }, 300); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T12:53:56.610

```
*tvlike.setTag(""+groupPosition);
            tvlike.setOnClickListener(new OnClickListener() {
                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub

                    int position=Integer.parseInt(v.getTag().toString());*
                //...........use this position and get your data 
```

# java - 无法打开 JNLP 客户端

> ID：11010066
> 
> 赞同：5
> 
> 时间：2012-06-13T07:27:54.867
> 
> 标签：java, jnlp, java-web-start

我试图打开一个 JNLP 客户端，但每次抛出异常都会失败。

```
#### Java Web Start Error:
#### Unsigned application requesting unrestricted access to system
Unsigned resource:URL/beans/molecule.jar 
```

昨天它工作正常，但今天早上它要求 Java 更新，我做到了。之后我面临这个问题。

请告诉我我能做些什么来处理这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T22:08:41.363

**解决此问题的新页面已发布在 java.com [http://java.com/en/download/help/clearcache_upgrade.xml](http://java.com/en/download/help/clearcache_upgrade.xml)**

-公爵

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T01:56:20.693

尝试清除您的 Java 缓存。说明： [http ://www.java.com/en/download/help/plugin_cache.xml](http://www.java.com/en/download/help/plugin_cache.xml)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T12:48:35.957

从错误消息来看，您似乎有一个未签名的 jar。您可以尝试[签名](http://docs.oracle.com/javase/1.3/docs/tooldocs/win32/jarsigner.html)并重试。

# javascript - 如何保存 Asp：在客户端生成的图像元素

> ID：11010068
> 
> 赞同：2
> 
> 时间：2012-06-13T07:27:55.117
> 
> 标签：javascript, jquery, asp.net, base64, client-side

我正在使用 JQuery 插件（[ScriptCam](http://www.scriptcam.com/)）以允许用户从网络摄像头拍摄快照。

这是我的带有 JS 代码的按钮：

```
<asp:Button ID="btnTakeSnapshot" runat="server" Text="Take SS" OnClientClick="base64_toimage(); return false;" /> 
```

JS代码：

```
function base64_toimage() {  
    document.getElementById('<%= imgBinary.ClientID %>').src = "data:image/png;base64," + $.scriptcam.getFrameAsBase64();  
    document.getElementById('<%= txtImgBinary.ClientID %>').value = $.scriptcam.getFrameAsBase64();  
}; 
```

用户单击后，快照将绑定到此`Asp:Image`元素：

```
<asp:Image ID="imgBinary" runat="server" Width="160" Height="120" /> 
```

而且我还将二进制代码写入此`Asp:TextBox`：

```
<asp:TextBox ID="txtImgBinary" TextMode="MultiLine" runat="server"></asp:TextBox> 
```

在这里，我想做的是在用户拍摄快照并单击最后一个“保存”按钮后，我会将二进制代码从`txtImgBinary.Text`值保存到我`image column`的 SQL Server 中。我也这样做了，一切都很好。

但是在我将数据库中的二进制值绑定到另一个页面之后，它就不起作用了。这是我的做法：

```
imgUserPhoto.Attributes.Add("src", "data:image/png;base64," + binaryCodeFromDB); 
```

我也尝试在`PictureBox`element in 中使用相同的二进制代码`Winforms`，但我得到了那个`Argument Exception: Parameter is not valid`错误。

从昨天开始，我一直在尝试这样做。

所以我想我保存二进制数据的方式可能有问题。因为我将文本框用作空杯子，所以二进制代码可能正在发生变化，同时我复制到文本框并稍后再复制。

此外，我以这种方式保存的图像具有与另一个工作组件的图像二进制数据不同的二进制数据。

`src`所以我想知道在我将其属性与 JS绑定后，有没有办法将此图像保存到服务器？如果我可以保存此图像，我将使用 temp.jpg 图像，然后我将生成它的二进制代码。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:42:50.243

我没有弄错以错误方式保存代码的可能性。

通常，我将`base64`数组克隆到文本框，然后将文本框中的值复制到我的图像列。

很遗憾我没有意识到`byte64`数组**与**数组不同`byte[]`。

所以在我保存这个值之前，我做了这个小对话：

```
byte[] bytes = Convert.FromBase64String(txtImgBinary.Text); 
```

然后我将此`bytes`数组存储在我的数据库中。现在它工作正常。

* * *

对于那些感兴趣的人，下面是我稍后使用这个值的方式：

（对于`Asp:Image`元素）

```
Image1.Attributes.Add("src", "data:image/png;base64," + Convert.ToBase64String(bytesValueFromDB)); 
```

（对于`Winforms PictureBox`元素）

```
MemoryStream stream = new MemoryStream(bytesValueFromDB);
System.Drawing.Image tempImage = System.Drawing.Image.FromStream(stream);
string FName = System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().Location) + @"\tempImage.jpg";
tempImage.Save(FName);
imageFileName = FName;
ctlPictureBox.ImageLocation = System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().Location) + @"\tempImage.jpg"; 
```

# java - Ubuntu 中的 java.lang.UnsatisfiedLinkError

> ID：11010070
> 
> 赞同：2
> 
> 时间：2012-06-13T07:27:57.513
> 
> 标签：java, java-native-interface

我已经看到很多人在 SO 中发布了这个问题。我浏览了这些帖子并尝试了建议的方法，但不幸的是无法帮助我解决问题。

这是我的问题：

```
public class runme {
  static {
    System.loadLibrary("example");
  }

  public static void main(String argv[]) {
    System.out.println(example.fact(4));

  }
} 
```

错误：

```
anu@anu-desktop:~/Desktop/swigtest/new$ java runme
Exception in thread "main" java.lang.UnsatisfiedLinkError: no example in java.library.path
    at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1681)
    at java.lang.Runtime.loadLibrary0(Runtime.java:840)
    at java.lang.System.loadLibrary(System.java:1047)
    at runme.<clinit>(runme.java:5)
    Could not find the main class: runme. Program will exit. 
```

*示例库与runme.java*位于同一路径中。为什么我会收到这个错误？我正在使用 Ubuntu 操作系统。

非常感谢任何能帮助我解决这个问题的帮助。

编辑：

我已[在此处附加我的文件](https://docs.google.com/open?id=0B-2RQZcQbc7NSzdGZVN3QU1kZlU)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T07:56:59.917

尝试像这样运行您的程序：

```
$> java -Djava.library.path=/path/to/my/libs runme 
```

`/path/to/my/libs`应将何处更改为您真正拥有`.so`文件的位置。

* * *

**编辑**

我安装`openjdk-6-jdk`在我的虚拟 Ubuntu 机器上以查看包含文件的位置。

试试这个来得到你的`libexample.so`：

```
$> gcc -fPIC -g -c -Wall example_wrap.c -I/usr/lib/jvm/java-6-openjdk/include -I/usr/lib/jvm/java-6-openjdk/include/linux
$> gcc -shared -o libexample.so example_wrap.o 
```

然后检查文件是否已创建...

现在你只需要打电话

```
$> java runme 
```

如果文件在工作目录中，则`-Djava.library.path`不需要。`.so`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T07:36:36.473

您必须设置`java.library.path`属性以包含库的路径。或者将其复制到路径中已经存在的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T07:36:47.453

尽管[文档](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#loadLibrary%28java.lang.String%29)说*库名称映射到实际系统库的方式是系统相关*的，但根据我的经验`loadLibrary`，相对路径指的是*工作*目录（之后它会检查所有其他定义的和系统相关的路径） .

如果不确定工作目录，请检查`System.getProperty("user.dir")`返回的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T07:42:48.110

我在 Ubuntu 上遇到了这个问题并使用 bat 文件解决了它

```
export LD_LIBRARY_PATH=$PWD/lib/linux32
./fiji-linux 
```

需要设置的对象是LD_LIBRARY_PATH，我把它设置为本地目录，加上/lib/linux32。下一行运行我的程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T12:49:15.967

您需要将共享库的路径添加/附加到 LD_LIBRARY_PATH 中，例如：

```
LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/path_to_folder_where_your_shared_library_is 
```

# intellij-idea - 有没有办法修改 IntelliJ 的“Select In”对话框？

> ID：11010072
> 
> 赞同：2
> 
> 时间：2012-06-13T07:28:08.410
> 
> 标签：intellij-idea

IntelliJ IDEA 中有一个“Select in”对话框，由`Alt+F1`. 它非常有用，它看起来像这样： ![在屏幕截图中选择](../Images/80aa8c67a6c5c2c49bc961860e6a99e8.png)

有什么办法可以更改其中的快捷方式吗？例如，如果我想通过按来启动“在资源管理器中显示”`6`怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T07:50:28.617

还没有，请为YouTrack[中的未解决问题投票。](http://youtrack.jetbrains.com/issue/IDEA-83989)

# layout - 如何使以下 div 出现在 2 列 div 布局下

> ID：11010075
> 
> 赞同：0
> 
> 时间：2012-06-13T07:28:21.220
> 
> 标签：layout, html

下面，我希望 div A 作为它的内部 div 与它下面的其他 div 的两列布局。然而，由于图像太高，下面的 div 最终会在它旁边。如何使 div B 和 C 出现在图像下方？

```
<div id='A' style='position:relative'>
    <div id='A1' style='width:50%;float:left;'><img src="http://maps.googleapis.com/maps/api/staticmap?maptype=roadmap&sensor=false&size=100x100&markers=color:blue|label:A|51.535908,-0.066271&" /></div>
    <div id='A2' style='width:50%;float:left;'>Chelsea Branch<br/>Branch</div> 
</div>
<div id='B'>
    <b>Description:</b> <br />
    This is a location.
</div><br/>
<div id='C'>
    <b>Address:</b><br />
    123 Fake Stree<br />Chelsea<br />London<br />XH28 5JH<br />United Kingdom<br />
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T07:33:22.890

在 A1 和 A2 之后添加“清除”。

```
<div id='A' style='position:relative'>
    <div id='A1' style='width:50%;float:left;'><img src="http://maps.googleapis.com/maps/api/staticmap?maptype=roadmap&sensor=false&size=100x100&markers=color:blue|label:A|51.535908,-0.066271&" /></div>
    <div id='A2' style='width:50%;float:left;'>Chelsea Branch<br/>Branch</div> 
    <div style="clear:both"></div>
</div>
<div id='B'>
    <b>Description:</b> <br />
    This is a location.
</div><br/>
<div id='C'>
    <b>Address:</b><br />
    123 Fake Stree<br />Chelsea<br />London<br />XH28 5JH<br />United Kingdom<br />
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T07:37:45.157

您希望`<div id="A">`包含其后代元素，即使它们是浮动的。

出于某种原因，这被称为“clearfix”，有几种不同的方法可以做到：

*   [http://www.yuiblog.com/blog/2010/09/27/clearfix-reloaded-overflowhidden-demystified/](http://www.yuiblog.com/blog/2010/09/27/clearfix-reloaded-overflowhidden-demystified/)
*   [http://perishablepress.com/new-clearfix-hack/](http://perishablepress.com/new-clearfix-hack/)
*   [http://nicolasgallagher.com/micro-clearfix-hack/](http://nicolasgallagher.com/micro-clearfix-hack/)

还有一些关于这个主题的其他 Stack Overflow 问题，例如

*   [我可以使用哪些“clearfix”方法？](https://stackoverflow.com/questions/211383/which-method-of-clearfix-is-best)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T07:38:06.993

这将做到：

```
#a2 { clear: right; } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T07:39:07.710

演示：http: [//jsfiddle.net/MXLSn/](http://jsfiddle.net/MXLSn/)

将`clearfix`类添加到`<div id='A' style='position:relative' class="clearfix">`

将这些类复制到 CSS 文件中

```
.clearfix:before, .clearfix:after { content: ""; display: table; }
.clearfix:after { clear: both; }
.clearfix { zoom: 1; } 
```

您可以`clearfix`对任何包含浮动元素的容器使用类。

# android - Android模拟器没有显示我所有的应用程序

> ID：11010076
> 
> 赞同：0
> 
> 时间：2012-06-13T07:28:27.427
> 
> 标签：android, emulation

我在 Eclipse 中有 3 个项目，但我不明白为什么 Android 模拟器没有显示第三个应用程序。

当我运行它时，我在**控制台窗口中看到以下内容：**

```
Android Launch!
adb is running normally.
Performing kokas.exercise.xml.ReadingXMLActivity activity launch
Automatic Target Mode: launching new emulator with compatible AVD 'AVD2.33'
Launching a new emulator with Virtual Device 'AVD2.33'
New emulator found: emulator-5554
Waiting for HOME ('android.process.acore') to be launched... 
```

* * *

**XML清单：**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="kokas.exercise.xml"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="10" />
<uses-permission android:name="android.permission.INTERNET"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".ReadingXMLActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

还有什么要检查的吗？我的机器运行的是 Windows 7 64 位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T07:46:38.277

如果我遇到过这样的问题，我会在我的项目上执行 adb uninstall 并重新安装它。

尝试这个

```
adb uninstall kokas.exercise.xml.ReadingXMLActivity 
```

然后通过eclipse重新安装应用程序。

另外，您是否肯定模拟器的版本更新或等于应用程序正在使用的版本？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T07:35:36.673

根据您的日志，您的应用程序仍未成功启动..

```
Waiting for HOME ('android.process.acore') to be launched 
```

如果您的应用程序包名称在运行过程中退出，您可以在“设备”选项卡下的 DDMS 中确认这一点？.....

如在此[链接中](http://developer.android.com/guide/developing/debugging/ddms.html)

如果可能的话，把它放在清单中

在应用程序标签 android:debuggable="true"

# sql - SQL 将用序号装饰重复组的每个成员

> ID：11010077
> 
> 赞同：0
> 
> 时间：2012-06-13T07:28:38.043
> 
> 标签：sql, group-by, repeat, having-clause

我想用序号装饰表中每个重复组的每个成员。因此对于：

```
id    fk    scheme    code
1     23    2         1234
2     23    2         6666
3     23    2         9876
4     24    2         3421
5     24    5         erty
6     24    7         wert
7     25    2         3490
8     25    2         2389
9     25    5         erfg 
```

我会在我的结果中看到

```
23|2|1  1234
23|2|2  6666
23|2|3  9876
24|2|1  3421
24|5|1  erty
24|7|1  wert
25|2|1  3490
25|2|2  2389
25|5|1  erfg 
```

因此 fk 与 scheme 结合构成​​一个重复组。我知道我在重复组中最多只有 5 个，但我的测试查询只允许 3 个。连续的行号不能作为装饰，它必须是 1 或 2 或 3，因为它们用于缓存查找。

这是我使用 H2 Db SQL 语法提出的 SQL：

```
SELECT "identifier", "code" FROM (
SELECT CASE WHEN s1."code" IS NOT NULL AND s2."code" IS NULL AND s3."code" IS NULL 
THEN s1."ident"||'|1' 
WHEN s1."code" IS NOT NULL AND s2."code" IS NOT NULL AND s3."code" IS NULL
THEN s2."ident"||'|2' 
WHEN  s1."code" IS NOT NULL AND s2."code" IS NOT NULL AND s3."code" IS NOT NULL
THEN s3."ident"||'|3' END AS "identifier", s1."code"
FROM (select "ii"."fk", "ii"."scheme", "ii"."fk"||'|'||"ii"."scheme" AS "ident", "code"
from "inidentifier" "ii" group by "fk", "scheme", "code") s1 
LEFT OUTER JOIN
(select "ii"."fk", "ii"."scheme", "ii"."fk"||'|'||"ii"."scheme" AS "ident", "code" 
from "inidentifier" "ii" group by "fk", "scheme", "code") s2 ON s1."ident" = s2."ident"
AND s1."code" < s2."code"
LEFT OUTER JOIN
(select "ii"."fk", "ii"."scheme", "ii"."fk"||'|'||"ii"."scheme" AS "ident", "code"
from "inidentifier" "ii" group by "fk", "scheme", "code") s3 ON  s1."ident" = s2."ident"
AND s2."ident" = s3."ident" AND s1."code" < s2."code" AND s2."code" < s3."code"
ORDER BY "identifier", s1."code") "cache"
WHERE "cache"."identifier" IS NOT NULL 
```

我遇到的问题是它不会产生任何最后带有 |3 的结果，在上面的示例数据中应该有 1。它以 23|2|2 9876 和 23|2|2 6666 结束。也许不同的方法？

先感谢您

大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T07:43:30.867

如果任何 DBMS 都可以，那么自然的方法是`row_number()`：

```
select  *
,       row_number() over (partition by fk, scheme order by id) as rn
from    YourTable 
```

这将为组中的每一行返回一个序号`(fk, scheme)`。

# mysql - MySQL：具有最少日期的唯一行

> ID：11010086
> 
> 赞同：0
> 
> 时间：2012-06-13T07:29:04.157
> 
> 标签：mysql, sql, filter

想象一下我有下表：

```
NAME DATE OTHER_CONTANT

'A' '2012-06-05' 'baz'
'A' '2012-06-04' 'bar'
'B' '2012-06-05' 'foo'
'C' '2012-06-05' 'bla'
'C' '2012-06-04' 'blah'
'C' '2012-06-06' 'bleh' 
```

现在我想过滤此表以仅包含具有唯一名称和最早日期的行：

```
'A' '2012-06-04' 'bar'
'B' '2012-06-05' 'foo'
'C' '2012-06-04' 'blah' 
```

我正在考虑使用 GROUP BY 语句，但是使用 GROUP BY 我只能得到一列作为结果，我想得到整行。有关如何进行此过滤的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T07:46:54.460

您可以使用以下内容：

```
select m.name, m.date, m.other_constant 
  from mytable m
  join (select name, min(date) min_date from mytable group by name) n
    on m.name = n.name and m.date = n.min_date 
```

另请参阅[SQLfiddle](http://sqlfiddle.com/#!2/fcb1d/3/0)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T07:37:41.743

以下 SQL 创建所有不同名称的列表。然后对于每个名称，它会查找具有最新日期的条目。

```
select  *
from    (
        select  distinct name
        from    YourTable
        ) names
join    YourTable yt1
on      yt1.name = names.name
        and yt1.date =
        (
        select  date
        from    YourTable yt2
        where   yt2.name = yt1.name
        order by
                date
        limit   1
        ) 
```

[使用 beny23 的 SQL Fiddle 的实时示例。](http://sqlfiddle.com/#!2/b3396/2/0)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T07:34:39.483

两个查询都可以完美运行。

```
SELECT * 
FROM   MyTable a 
       INNER JOIN (SELECT name, 
                          Min(date) AS date 
                   FROM   MyTable 
                   GROUP  BY name) b 
               ON a.name = b.name 
                  AND a.date = b.date 
```

或者

```
SELECT a.* 
FROM   mytable a 
       LEFT JOIN mytable b 
              ON a.name = b.name
                 AND a.date > b.date 
WHERE  b.name IS NULL 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T07:42:17.783

```
select *
from (
   select name, min(date) as mindate, other_contact
   from table_name group by name
   ) as x
   inner join table_name as f 
   on f.name = x.name and f.date= x.mindate; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-13T08:06:24.397

```
SELECT
    a.name,
    a.date,
    b.other_contant
FROM
    (
        SELECT
            name,
            MIN(date) AS date,
        FROM
            yourtable
        GROUP BY 
            name
    ) a
INNER JOIN
    yourtable b ON a.name = b.name AND a.date = b.date 
```

# facebook - Facebook: Like Button v/s Wall Post Like

> ID：11010087
> 
> 赞同：0
> 
> 时间：2012-06-13T07:29:04.727
> 
> 标签：facebook, facebook-like

我刚刚浏览了这个不错的[Like 按钮文档](https://developers.facebook.com/docs/reference/plugins/like/)。

据我了解，赞按钮用于网站，当用户单击网站上的赞按钮时，用户朋友的新闻提要中会出现一个故事，并带有返回您网站的链接。

这个“赞”按钮与“墙贴”中的“赞”按钮是否相同。我的意思是每当一个活动被发布到用户墙时，它也有默认的“喜欢”按钮和评论按钮。这两个喜欢一样吗？

另外，如果我希望我的应用程序找出哪个用户在墙上的帖子上点击了类似，可以做到吗？如果问题不恰当或不正确，请纠正我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:51:26.933

当用户点击“Like”时，会在他和 fb 图上的被点赞对象之间创建一条边，而不管该操作是在哪里进行的。

应用程序与此过程无关，用户喜欢墙上的帖子，为什么会“连接应用程序和墙上的帖子”？

查看可用于返回的[Like fql 表](http://developers.facebook.com/docs/reference/fql/like/)`the IDs of users who like a given object (video, note, link, photo, or album)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T09:16:45.343

请参阅 facebook 文档中的 FAQ'S 以获得赞按钮，以了解哪个用户单击了“赞”按钮。

[http://developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)

> “赞”按钮有哪些可用的分析？

如果您访问 facebook.com/insights 并注册您的域，您可以查看您的域每天的点赞数以及点击点赞按钮的人口统计数据。

# java - 是否有正则表达式方法可以用另一组字符替换一组字符（如 shell tr 命令）？

> ID：11010090
> 
> 赞同：8
> 
> 时间：2012-06-13T07:29:17.503
> 
> 标签：java, regex, replace

shell[`tr`](http://linux.about.com/library/cmd/blcmdl1_tr.htm)命令支持用另一组字符替换一组字符。例如，`echo hello | tr [a-z] [A-Z]`将翻译`hello`为`HELLO`.

但是，在 java 中，我必须单独替换每个字符，如下所示

```
"10 Dogs Are Racing"
    .replaceAll ("0", "０")
    .replaceAll ("1", "１")
    .replaceAll ("2", "２")
    // ...
    .replaceAll ("9", "９")
    .replaceAll ("A", "Ａ")
    // ...
; 
```

[apache-commons-lang](http://commons.apache.org/lang/api-release/index.html)库提供了一种方便的方法[`replaceChars`](http://commons.apache.org/lang/api-release/org/apache/commons/lang3/StringUtils.html)来进行这种替换。

```
// half-width to full-width
System.out.println
(
    org.apache.commons.lang.StringUtils.replaceChars
    (
        "10 Dogs Are Racing",
        "0123456789ABCDEFEGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",
        "０１２３４５６７８９ＡＢＣＤＥＦＥＧＨＩＪＫＬＭＮＯＰＱＲＳＴＵＶＷＸＹＺａｂｃｄｅｆｇｈｉｊｋｌｍｎｏｐｑｒｓｔｕｖｗｘｙｚ"
    )
);
// Result:
// １０ Ｄｏｇｓ Ａｒｅ Ｒａｃｉｎｇ 
```

但是正如你所看到的，有时 searchChars/replaceChars 太长（也太无聊了，如果你想的话，请在里面找到一个重复的字符），并且可以用一个简单的正则表达式`[0-9A-Za-z]`/来表示`[０-９Ａ-Ｚａ-ｚ]`。有没有正则表达式的方法来实现这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T09:41:43.003

# 不。

*（一些额外的字符，这样我就可以发布我原本简洁的答案）*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-13T11:00:21.667

虽然没有直接的方法可以做到这一点，但构建自己的实用函数以与之结合使用`replaceChars`相对简单。下面的版本接受简单的字符类，没有`[`or `]`; 它不做类否定 ( `[^a-z]`)。

对于您的用例，您可以执行以下操作：

```
StringUtils.replaceChars(str, charRange("0-9A-Za-z"), charRange("０-９Ａ-Ｚａ-ｚ")) 
```

代码：

```
public static String charRange(String str) {
    StringBuilder ret = new StringBuilder();
    char ch;
    for(int index = 0; index < str.length(); index++) {
        ch = str.charAt(index);
        if(ch == '\\') {
            if(index + 1 >= str.length()) {
                throw new PatternSyntaxException(
                    "Malformed escape sequence.", str, index
                );
            }
            // special case for escape character, consume next char:
            index++;
            ch = str.charAt(index);
        }
        if(index + 1 >= str.length() || str.charAt(index + 1) != '-') {
            // this was a single char, or the last char in the string
            ret.append(ch);
        } else {
            if(index + 2 >= str.length()) {
                throw new PatternSyntaxException(
                    "Malformed character range.", str, index + 1
                );
            }
            // this char was the beginning of a range
            for(char r = ch; r <= str.charAt(index + 2); r++) {
                ret.append(r);
            }
            index = index + 2;
        }
    }
    return ret.toString();
} 
```

产生：

```
0-9A-Za-z : 0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz
０-９Ａ-Ｚａ-ｚ : ０１２３４５６７８９ＡＢＣＤＥＦＧＨＩＪＫＬＭＮＯＰＱＲＳＴＵＶＷＸＹＺａｂｃｄｅｆｇｈｉｊｋｌｍｎｏｐｑｒｓｔｕｖｗｘｙｚ 
```

# powershell - 如何在函数中传递“类型”参数？

> ID：11010091
> 
> 赞同：2
> 
> 时间：2012-06-13T07:29:22.157
> 
> 标签：powershell

我有两段代码：

```
# code 1:
[type]$t1 = [switch] 
# all is ok, code works as expected

#code 2:
function test ([type]$t2) {  }
test -t2 [switch]
# here we get error. can't convert from string to system.type 
```

我知道，我可以写：`test -t2 "System.Management.Automation.SwitchParameter"`，但它很丑！！为什么我可以将 [switch] 设置为 [type] 变量，但不能将其传递给函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T07:45:08.457

PowerShell 允许您使用强制转换创建类型：

```
PS> [type]"switch"

IsPublic IsSerial Name                                     BaseType
-------- -------- ----                                     --------
True     False    SwitchParameter                          System.ValueType 
```

您实际上正在做的是传递括号中的类型名称：

```
PS> [type]"[switch]"
Cannot convert the "[switch]" value of type "System.String" to type "System.Type". 
```

所以你只需要传递类型的名称：

```
test -t2 switch 
```

或者

```
test -t2 ([switch].fullname) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T07:40:49.277

你可以这样做：

```
test -t2 "switch" 
```

或者您可以使用 code1 中的示例并传入`$t1`自身：

```
function test ([type]$t2) {  }
[type]$t1 = [switch] 
test -t2 $t1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T14:40:05.727

将测试函数的参数包装为表达式，它将返回类型：

```
function test ([type]$t2) {  }
test -t2 ([switch]) 
```

# postgresql - 从日期中提取日期时的案例陈述

> ID：11010094
> 
> 赞同：0
> 
> 时间：2012-06-13T07:29:32.563
> 
> 标签：postgresql, case, to-char

我有这个代码来选择 2012 年 4 月 23 日的日期。它应该返回字母“A”，而是返回字母“G”。

```
SELECT
case to_char(

(select pp.datestart
from adempiere.pp_order pp
where pp.datestart = '2012-04-23'
limit 1)

, 'day')
when 'monday'
then 'A'
when 'tuesday'
then 'B'
when 'wednesday'
then 'C'
when 'thursday'
then 'D'
when 'friday'
then 'E'
when 'saturday'
then 'F'
else 'G'
end as test 
```

我已经选择了使用日期本身

```
to_char(
(select pp.datestart
from adempiere.pp_order pp
where pp.datestart = '2012-04-23'
limit 1)
, 'day') as Day 
```

并将日期显示为“星期一”

我的案例陈述有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T07:44:44.220

我会使用 EXTRACT 来避免语言设置问题：

```
SELECT
    CASE EXTRACT(DOW FROM pp.datestart)
        when 1  then 'A'
        when 2  then 'B'
        when 3  then 'C'
        when 4  then 'D'
        when 5  then 'E'
        when 6  then 'F'
        else 'G'
    END as test
FROM 
    adempiere.pp_order pp
WHERE 
    pp.datestart = '2012-04-23'
LIMIT 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T07:37:38.600

`to_char(date, 'day')`返回字符串空白填充到 9 个字符：[reference](http://www.postgresql.org/docs/current/static/functions-formatting.html)。

# c# - Binder vs DynamicMetaObject & DynamicMetaObject 缓存

> ID：11010097
> 
> 赞同：3
> 
> 时间：2012-06-13T07:29:52.230
> 
> 标签：c#, caching, dynamic, dynamic-language-runtime

**使用 DLR 开发新语言时，动态绑定逻辑应该放在哪里？**

据我所知，有两个可能的地方可以实现后期绑定。一个在活页夹中，另一个在 DynamicMetaObject 子类中。

我当前的实现仅使用活页夹来识别操作类型、携带一些自定义数据并在回退方法中抛出异常。实际绑定在 DynamicMetaObject 中完成。

有没有关于 DLR 世界的发展方向的建议？

**何时创建 DynamicMetaObject？**

每次`IDynamicMetaObjectProvider`需要绑定时，我看到的每一次执行都会创建 DynamicMetaObject 子类的新实例并返回它。这对我来说似乎有点奇怪。例如，我用我的语言对 Int32 进行了包装，当我执行如下操作时：

```
1+1
1+1 
```

创建了 6 个新的 DynamicMetaObjects - 每个操作数一个，每个结果一个。在我的例子中，只有一个具有相同值的 int 实例（在此示例中，只有一个值 1 的 int 包装器实例），因此拥有 4 个 DynamicMetaObject 实例似乎不正确。

有没有办法`DynamicMetaObject`总是对同一个实例使用相同的？我尝试创建一次 DynamicMetaObject 然后在`GetMetaObject`方法中返回相同的实例，但我得到的只是一个错误`An IDynamicMetaObjectProvider created invalid DynamicMetaObject instance.`

另外，DynamicMetaObject 构造函数中的 BindingRestriction 参数在创建子类时似乎没有效果（我希望 DLR 会根据绑定限制缓存 DynamicMetaObject 的实例）。例如，有没有办法缓存 MO（或者，理想情况下用于类型）？

# c# - 在 Windows C#/C++ 中存储通用的可修改（由所有本地用户）应用程序设置

> ID：11010098
> 
> 赞同：2
> 
> 时间：2012-06-13T07:30:06.880
> 
> 标签：c#, c++, windows, settings

在 Windows 中存储常用应用程序设置的最佳方式是什么，所有本地 PC 用户都可以修改这些设置。

我需要存储一个带有设置的文件，但其他用户（= 来自 pc 的本地用户，而不是外部用户）也应该能够修改这些。

您可以将项目写入：

*   注册表
*   c:\TEMP 文件夹（或只是另一个文件夹）
*   网络管道（太复杂）
*   Environment.SpecialFolder.CommonApplicationData
*   隔离存储 (?)
*   ETC...

我一直在查看 Environment.SpecialFolder.CommonApplicationData 但其他用户只能在此文件夹中读取而不能写入。

现在推荐/最佳方式来存储所有本地用户可修改的通用应用程序设置。（仍应支持 Windows XP。）

是否有人对存储和全局应用程序设置及其（缺点）优势有完整的概述？

提前致谢！

# xml - 根据优先级选择 XML 节点

> ID：11010099
> 
> 赞同：1
> 
> 时间：2012-06-13T07:30:12.627
> 
> 标签：xml, xslt

我有以下需要使用 XSLT 解析的 XML，

```
<PERSONS>
    <PERSON>
        <TYPE>F</TYPE>
        <NAME>ABC</NAME>
    </PERSON>
    <PERSON>
        <TYPE>A</TYPE>
        <NAME>XYA</NAME>
    </PERSON>
    <PERSON>
        <TYPE>S</TYPE>
        <NAME>AFF</NAME>
    </PERSON>
    <PERSON>
        <TYPE>B</TYPE>
        <NAME>HHH</NAME>
    </PERSON>
</PERSONS> 
```

在上面的 XML 中，PERSON 类型可以按任何顺序出现，我需要如下输出，

```
<SELECTED>
    <NAME>TEXT</NAME>
</SELECTED> 
```

规则是我们需要根据以下优先级显示名称，A、F、S。

如果类型 A 不存在，则检查类型 F 并在存在时显示名称，否则显示类型 S 名称。

也有可能 B 和 C 等其他类型会出现在输入 XML 中，但我们需要忽略这些类型，只有 A、F 和 S 优先。

在此先感谢，威尔逊。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T12:36:22.610

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:param name="pOrder" select="'AFS'"/>

 <xsl:template match="/*">
  <xsl:for-each select="PERSON[contains($pOrder, TYPE)]">
    <xsl:sort select="string-length(substring-before($pOrder, TYPE))" data-type="number"/>

    <xsl:if test="position() = 1">
            <SELECTED>
                <xsl:copy-of select="NAME"/>
            </SELECTED>
    </xsl:if>
  </xsl:for-each>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<PERSONS>
    <PERSON>
        <TYPE>F</TYPE>
        <NAME>ABC</NAME>
    </PERSON>
    <PERSON>
        <TYPE>A</TYPE>
        <NAME>XYA</NAME>
    </PERSON>
    <PERSON>
        <TYPE>S</TYPE>
        <NAME>AFF</NAME>
    </PERSON>
    <PERSON>
        <TYPE>B</TYPE>
        <NAME>HHH</NAME>
    </PERSON>
</PERSONS> 
```

**产生想要的正确结果**：

```
<SELECTED>
   <NAME>XYA</NAME>
</SELECTED> 
```

**如果`$pOrder`参数更改为，例如**：

```
 <xsl:param name="pOrder" select="'SAF'"/> 
```

**然后再次产生所需的正确结果：**

```
<SELECTED>
   <NAME>AFF</NAME>
</SELECTED> 
```

**说明**：

`Type`使用按优先级类型字符串排序的字符串值与开头的接近程度排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T08:35:24.237

假设您`TYPE`是按字母顺序排序的，您可以使用

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:template match="PERSONS">
        <xsl:for-each select="PERSON">
            <xsl:sort select="TYPE" order="ascending" />
            <xsl:if test="position() = 1">
                <SELECTED>
                    <NAME>
                        <xsl:value-of select="./NAME" />
                    </NAME>
                </SELECTED>
            </xsl:if>
        </xsl:for-each>
    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T08:25:12.837

您的订单似乎是按字母顺序排列的，但由于您没有这么说，我假设这不是一个可靠的预期。

这个怎么样？

[http://www.xmlplayground.com/cMOOBF](http://www.xmlplayground.com/cMOOBF)

如果 IS 的顺序确实可靠地按字母顺序排列，那么最好先对节点进行排序，而不是像我一样使用复杂的谓词。

# html - facebook likebox 哪个代码更好

> ID：11010100
> 
> 赞同：6
> 
> 时间：2012-06-13T07:30:23.890
> 
> 标签：html, facebook-like, xfbml

我正在将 Facebook LikeBox 插件放在我正在处理的网页上。它建立在 HTML & CSS & JavaScript 之上。

我想知道哪种代码最适合使用，因为有三个选项……例如，加载时间更短。HTML5 或 XFBML 或 IFRAME？如果有人可以，我将不胜感激请向我推荐您的建议。谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T07:49:02.760

如果您使用的是 HTML5 或 XFBML 版本，则必须加载 Facebook 的 JavaScript SDK——这会计算您页面的加载时间，因为它是直接嵌入到您的代码中的外部脚本资源。（虽然通常加载是异步完成的，所以它不会减慢页面其余部分的加载速度，也不会延迟*加载*事件。）

另一方面，iframe 版本“自行加载”，可以这么说。只有 iframe 元素的代码在您的页面中，加载它的实际内容被浏览器视为加载完全不相关的页面。因此，加载 iframe 文档需要多长时间（如果 Facebook 暂时“关闭”或变慢），它不会影响您自己的页面，它会以任何方式*加载*事件。

尽管有这些事实，我通常会选择 HTML5 或 XFBML 版本——不是基于所描述的因素，而是因为我觉得我对它们有更多的“控制”（例如不立即激活它们，但也许仅在稍后与页面进行某些用户交互时才对其进行解析）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-13T07:45:10.243

他们使用 JavaScript 来解析 XFBML/HTML5 并将它们转换为 iframe。
因此，如果您只是展示插件，它们中的任何一个都可以工作，但 HTML5 和 XFBML 为您提供了更多选择。
例如，iframe 版本的 Like Button 不提供显示“发送”按钮的选项，但 HTML5 和 XFBML 提供。
HTML5/XFBML 版本让您有机会设置回调函数。

因此，如果您需要或想要自定义，HTML5 和 XFBML 会更好。
使用 HTML5 或 XFBML 完全取决于您。
当您使用 HTML5 编码您的网站并希望您的标记是合法的时，HTML5 版本会很好。

# java - 这些错误是什么意思？(GWT,GAE,Java,JIQL)

> ID：11010104
> 
> 赞同：0
> 
> 时间：2012-06-13T07:30:29.297
> 
> 标签：java, google-app-engine, gwt

我正在使用 Jiql 连接到 GAE 上的数据存储，但是当我尝试打开数据库连接并执行查询时，出现以下错误。

问题是，是因为缺少 EntityNotFoundException 类还是因为缺少数据存储中的实体之一？由于我对此完全陌生，有人可以解释错误输出吗？

 ````
Starting Jetty on port 8888
   [WARN] Exception while dispatching incoming RPC call
com.google.gwt.user.server.rpc.UnexpectedException: Service method 'public abstract void com.baytex.zoopreel.client.services.StartupService.startSession()' threw an unexpected exception: java.lang.NoClassDefFoundError: com/google/appengine/api/datastore/EntityNotFoundException
    at com.google.gwt.user.server.rpc.RPC.encodeResponseForFailure(RPC.java:385)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:588)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:208)
    at com.google.gwt.user.server.rpc.RemoteServiceServlet.processPost(RemoteServiceServlet.java:248)
    at com.google.gwt.user.server.rpc.AbstractRemoteServiceServlet.doPost(AbstractRemoteServiceServlet.java:62)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1097)
    at com.baytex.zoopreel.server.EncodingFilter.doFilter(EncodingFilter.java:28)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1088)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:360)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:729)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.handler.RequestLogHandler.handle(RequestLogHandler.java:49)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:324)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:505)
    at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:843)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:647)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:211)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:380)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:395)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:488)
Caused by: java.lang.NoClassDefFoundError: com/google/appengine/api/datastore/EntityNotFoundException
    at org.jiql.jdbc.jiqlConnection.<init>(jiqlConnection.java:59)
    at org.jiql.jdbc.Driver.connect(Driver.java:89)
    at com.baytex.server.db.connector.PMF.get(PMF.java:31)
    at com.baytex.zoopreel.server.StartupServiceImpl.startSession(StartupServiceImpl.java:211)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.google.gwt.user.server.rpc.RPC.invokeAndEncodeResponse(RPC.java:569)
    ... 25 more
Caused by: java.lang.ClassNotFoundException: com.google.appengine.api.datastore.EntityNotFoundException
    at java.lang.ClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at org.mortbay.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:352)
    at org.mortbay.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:337)
    ... 34 more
[ERROR] 500 - POST /zoopreelgwt/startup (localhost) 57 bytes 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:09:30.827

[这](http://dev.vaadin.com/ticket/4596)很可能是您问题的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T07:40:26.330

```
Service method 'public abstract void 

com.baytex.zoopreel.client.services.StartupService.startSession()'

threw an unexpected exception: java.lang.NoClassDefFoundError 
```

似乎是一个不错的起点，除此之外...如果您需要更好的帮助，请提供更多信息`

# search - 哪些搜索引擎有全功能的 API？

> ID：11010106
> 
> 赞同：4
> 
> 时间：2012-06-13T07:30:36.137
> 
> 标签：search, google-api, bing-api

通过 API 对主要引擎以编程方式运行搜索查询似乎非常困难。

*   显然，令人惊讶的是，谷歌没有用于搜索的通用 API。他们有一个“自定义搜索引擎”，旨在将谷歌驱动的搜索框添加到给定站点，并仅返回来自几个域的结果。他们的[注册页面](http://www.google.com/cse/manage/create)要求输入网站进行搜索。我尝试在此处输入“ *.google.com/* ”和一些变体，但这并没有在我关心的一些晦涩的术语上给我相同的结果（特别是当网络搜索给我结果时没有命中）。
*   必应搜索确实有一个[API](https://datamarket.azure.com/dataset/8818f55e-2fe5-4ce3-a617-0b8ba8419f65)，但与他们的网络结果不同，该 API 不报告点击总数。获取结果总数是我的应用程序的一项要求。
*   DuckDuckGo 有一个[API](http://duckduckgo.com/api.html)，但它似乎没有查询与网络搜索相同的数据库。
*   Blekko 有一个[API](http://help.blekko.com/index.php/does-blekko-have-an-api/)，但它的速率限制为 1 个请求/秒。我没有尝试过询问他们的定价结构是什么。
*   我没试过雅虎。

请注意，我很高兴并愿意为此付费，但我仍然找不到服务。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T21:40:54.880

blekko API 每秒最多可以免费查询 1 个查询。根据您所做的事情，您可能会发现我们允许您做您在其他地方无法做的事情。有关详细信息，请参阅[http://help.blekko.com/index.php/advanced-search-features/](http://help.blekko.com/index.php/advanced-search-features/)。联系 apiauth@blekko.com 获取 API Auth 密钥和文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T20:54:30.987

经过更多的研究和实验，我可以说：

*   Yahoo Boss Search API 效果最好。对于一般的网络搜索，他们从第一次通话开始收取 0.80 美元/1000 次通话费用。API 返回 JSON，包括结果总数。它似乎与网站具有相同的覆盖范围，并且易于使用，但它们需要使用 OAuth 签名的请求（不需要令牌，只需签名）；有一些示例 Ruby 代码可以解决问题，并且可以适应使用 OAuth gem。每个请求都限制为最大值。50 个结果，并带有分页标志，可通过单独的查询检索更多结果（每个查询都计费）。
*   一旦您通过设置屏幕（只需在要搜索的站点中填写 google.com），Google 自定义搜索 API 就有一个仪表板设置，允许切换“常规”网络搜索和自定义站点。该 API 还返回 JSON，只需要请求中的 API 密钥（无需令牌或签名）并返回最多 10 个结果，但也返回结果总数。100 次免费调用后，5000 次 API 调用收费 5 美元。也许最令人沮丧的是，自定义搜索 API 似乎使用了不同的数据库，并且不会在网络上返回相同的结果。许多在网络上获得成功的查询在 API 上都是空白的。
*   Bing API 真的不值得麻烦。我认为 Yahoo 也在后端使用 Bing，但 Yahoo 界面更易于使用且更完整，文档也更好。Bing 的 API 文档是可下载的 Word 文档 (!!!)，即使他们的搜索产品现在是 Azure 云的一部分。他们的网站导航是最模糊的。

**更新：** Blekko 的 Greg Lindahl 亲自回复使用并邀请我们开会。他们非常乐于分享他们的一些数据，还给了我们一个 API 密钥。这是另一个不错的选择，尤其是对于专业数据集，正如我们的案例所需要的那样。

# android - 如何在android运行时设置dp中按钮的宽度？

> ID：11010111
> 
> 赞同：3
> 
> 时间：2012-06-13T07:30:58.477
> 
> 标签：android, button

我有一个安卓应用程序。其中有很多按钮，但这些按钮是在运行时创建的。如果我设置宽度`button.setwidth(300)`，它会将宽度设置为 300px。我希望在 dp 中设置宽度。有什么办法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-13T07:39:09.997

您必须使用`TypedValue.applyDimension`来获取 dp 的像素数。这是一个例子：

```
DisplayMetrics dm = getResources().getDisplayMetrics();
float dpInPx = TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DP, 300, dm); 
```

这将以编程方式给出 300dp 的像素值。

干杯

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T07:41:04.560

Android 没有在 dp 中设置按钮尺寸的单独方法。你必须：

```
//Find screen density scale factor
final float scale = getContext().getResources().getDisplayMetrics().density;
myButton.setWidth((int)(100 * scale));
myButton.setHeight((int)(50 * scale)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T07:39:16.140

没有 setWidth(300dp)。解决方法是获取显示尺寸，并相应地调整 300px 变量。

我必须说，可能有更好的方法来创建一个漂亮的布局。您是否尝试过使用嵌套的线性布局和布局权重？

# linux - 在procmail中打印出变量

> ID：11010112
> 
> 赞同：1
> 
> 时间：2012-06-13T07:31:00.183
> 
> 标签：linux, sed, awk, procmail

我有一个 procmail 配方来过滤传入的邮件，如下所示：

```
 :0
    *^Subject:.*(test)
    * ? egrep -is -f /root/Procmail/whitelist.txt

    {

    :0 fwb
    | formail -I ""

    :0
    myfolder/
    } 
```

上面的配方功能是过滤掉电子邮件的正文内容并将该邮件转发到我的文件夹。问题是我有一个变量要放在体内。

```
FROM_=`formail -c -x"From " \
     | expand | sed -e 's/^[ ]*//g' -e 's/[ ]*$//g' \
     | awk '{ print $1 }'`

    SUBJ_=`formail -c -x"Subject:" \
     | expand \
     | sed -e 's/  */ /g' \
     | sed -e 's/^[ ]*//g' -e 's/[ ]*$//g'` 
```

此电子邮件正文（连同变量）应转发到 myfolder。

我尝试像这样回显变量，但仍然没有用。

```
:0 fwb
 echo "${SUBJ_}"
 echo "{FROM_}" 
```

我的食谱有问题吗？有人能帮帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T07:22:59.770

您需要通过管道进入 shell 脚本。在您的情况下，没有前缀的操作将保存到名为“echo”的文件夹中。

您还缺少`${FROM_}`变量上的美元符号。

```
:0 fwb
| ( echo "${SUBJ_}";  echo "${FROM_}" ) 
```

你的作业可能会被优化很多。管道`sed`连接`sed`或`awk`很少需要；如果`sed`不能处理你想要的，那就让`awk`一切去做吧。

```
FROM_=`formail -c -x"From " \
 | expand \
 | awk '{ gsub (/^[ ]*|[ ]*$/,""); print $1 }'`

SUBJ_=`formail -c -x"Subject:" \
 | expand \
 | sed -e 's/  */ /g' -e 's/^[ ]*//g' -e 's/[ ]*$//g'` 
```

（不知道为什么你也需要`expand`在那里，但我把它留了以防万一。）

# javascript - 节点和mongodb的错误

> ID：11010114
> 
> 赞同：1
> 
> 时间：2012-06-13T07:31:07.097
> 
> 标签：javascript, macos, node.js, mongodb

当我启动我的 JS 文件时，出现以下错误：

```
Charon:modules Modius$ node testfile.js 

node.js:201
        throw e; // process.nextTick error, or 'error' event on first tick
              ^
ReferenceError: define is not defined
    at Object.<anonymous> (/Applications/MAMP/htdocs/spacebattles/server/modules/testfile.js:11:1)
    at Module._compile (module.js:441:26)
    at Object..js (module.js:459:10)
    at Module.load (module.js:348:31)
    at Function._load (module.js:308:12)
    at Array.0 (module.js:479:10)
    at EventEmitter._tickCallback (node.js:192:40)
Charon:modules Modius$ 
```

这里是js文件

```
define(['./db_user'], function (db_user) {

    var db_user = document.createElement("db_user.js");
    var tranfer = {
        login: "test" ,
        email: "holishitumsonst.com",
        password: "123nu"
    };
    db_user.insert(transfer);

}); 
```

感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T07:34:24.710

看到您使用它的方式，您似乎正在尝试使用[Require.js](http://requirejs.org/)。

Node.js 不是客户端代码。你不需要 Require.js，已经`require`有。

使用示例：

```
// Loads the mongodb-client module in the "mongo" variable
var mongo = require('mongodb-client'); 
```

此外，没有`document`可用的，您不在浏览器中，也没有 DOM。如果你想要一个，你可以使用[jsdom](https://github.com/tmpvar/jsdom)，但我认为这不是你想要的。

总结一下：不要以为你在浏览器中。你不是。没有`document`，没有`window`，不需要自定义加载，你可以在服务器环境中编程。

我强烈建议您阅读[Node Beginner](http://www.nodebeginner.org/)。

> 本文档的目的是让您开始使用 Node.js 开发应用程序，并在此过程中教您需要了解的有关“高级”JavaScript 的所有知识。它远远超出了典型的“Hello World”教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T08:11:37.263

我想你可能误解了节点的概念。就像 Florian 所说，node.js 是“唯一”没有浏览器的 V8 引擎。这意味着您没有文档（根本没有 DOM）。

要开始使用 node.js，我建议您查看 O'Reilly 的[Up and running with node.js](http://ofps.oreilly.com/titles/9781449398583/)。那里也解释了模块化系统。

为了将 MongoDB 与 node 一起使用，您必须使用通过 npm 安装的包，如 mongoose 或 mongolian。两者都在我上面提到的书中进行了解释。

# codeigniter - Codeigniter 中的路由配置

> ID：11010117
> 
> 赞同：0
> 
> 时间：2012-06-13T07:31:09.570
> 
> 标签：codeigniter, routes

我正在 codeigniter 中构建一个应用程序，并且在一些路由问题中运行。我希望如果有人输入这个网址：www.mywebsite.com/request-information，应该调用一个名为“myform”的控制器。

我正在这样配置路由文件：

$route['request-information']='leadform';

但这不适用于连字符，可能是由于正则表达式干扰。

请指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T07:45:41.440

我在该行中看不到任何可以加载的内容`myform`。

你有没有尝试过

```
$route['request-information']='myform'; 
```

或者

```
$route['request\-information']='myform'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T08:30:15.843

这条线来自我的一个项目，工作得很好：

```
$route['unlock-account/(:num)/(:any)'] = 'auths/unlock_account/$1/$2'; 
```

确保你的错误不是来自其他地方。错误消息是什么，它会将您路由到哪里？

# sql - 将表的行与单独的值一起插入到 postgresql 中的另一个表中

> ID：11010119
> 
> 赞同：0
> 
> 时间：2012-06-13T07:31:19.927
> 
> 标签：sql, postgresql, jdbc, insert

我有两张桌子 - table1 和 table2

table1 有`14 columns`，table2 有`15 columns`. 两个表`first 14 columns`中的 相同且顺序相同。我想将 table1 的某些行复制到 table2 中，并将时间戳插入第 15 列。如何为此编写查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T07:35:27.377

```
INSERT INTO t2(c1,c2,c3)
SELECT c1,c2, NOW() FROM t1; 
```

您可以使用 *，但这是未来问题的秘诀：当您更改其中一个表中的列定义时，查询将失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T07:34:18.080

```
insert into table2
select *, current_timestamp
from table1
where table1.some_column = 'whatever' -- etc 
```

虽然很方便，但这很脆弱。命名所有列更清晰，更好：

```
insert into table2 (col1, col2, col3, ..., col15, col16)
select col1, col2, col3, ...,  col15, current_timestamp
from table1
where table1.coln = 'whatever' -- etc 
```

# facebook - Facebook like 不指向正确的网址

> ID：11010122
> 
> 赞同：0
> 
> 时间：2012-06-13T07:31:35.993
> 
> 标签：facebook, url, facebook-like

我尝试在我的根域上添加类似 facebook 的按钮，该按钮将喜欢到网站上的其他页面。但每次我点击喜欢按钮时，它总是喜欢根域。我哪里错了？

这是like按钮的代码：

```
<fb:like action='like' colorscheme='light' expr:href='http://www.kliniksantai.com/2012/06/7-ciri-ciri-pria-tidak-dewasa.html' font='arial' layout='standard' send='true' show_faces='false'/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T07:33:59.220

使用更新版本：

`<div class="fb-like" data-href="http://www.kliniksantai.com/2012/06/7-ciri-ciri-pria-tidak-dewasa.html" data-send="true" data-width="450" data-show-faces="false"></div>`

不要忘记包含[这里](https://developers.facebook.com/docs/reference/plugins/like/)解释的 JS SDK 。

# c# - “静态类导入”实际上是 C# 未来功能的宣布或暗示吗？

> ID：11010125
> 
> 赞同：6
> 
> 时间：2012-06-13T07:31:51.317
> 
> 标签：c#, static-import

从[这个编辑](http://en.wikipedia.org/w/index.php?title=C_Sharp_%28programming_language%29&diff=490179471&oldid=489980512)开始，关于 C# 的[Wikipedia 文章](http://en.wikipedia.org/wiki/C_Sharp_%28programming_language%29)提到“静态类导入”作为 C# 的未来功能，以及“编译器即服务（“Roslyn”）”。

编译器团队的成员是否真的宣布或暗示了此功能，或者这只是疯狂的猜测？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T07:43:40.873

[Eric Lippert 发表了一篇关于此功能的帖子，](http://blogs.msdn.com/b/ericlippert/archive/2009/06/22/why-doesn-t-c-implement-top-level-methods.aspx)但他没有承诺实施。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T10:01:51.567

在[Eric Lippert 的文章中，这很可能是 this 的来源](http://blogs.msdn.com/b/ericlippert/archive/2009/06/22/why-doesn-t-c-implement-top-level-methods.aspx)，他正在讨论使用 C# 作为脚本语言。而且，Roslyn CTP 包括 C# 交互窗口和 C# 脚本引擎。

C# Interactive 使用稍微不同的 C# 版本。例如，您并不总是需要分号，您可以拥有顶级方法和顶级语句。您还可以使用静态类导入：

```
> using System.Math;
> Abs(-5)
5 
```

正因为如此，我认为静态类导入（以及我提到的其他“脚本”功能）不会包含在 C# 的正常版本中，但您将能够在 C# 脚本中使用它们。

# android - android libgdx mobclix 没有显示

> ID：11010127
> 
> 赞同：0
> 
> 时间：2012-06-13T07:32:03.963
> 
> 标签：android, libgdx, mobclix

请帮我弄清楚为什么看不到广告。试图在模拟器和真实设备上运行。来自下面链接的日志文件，虽然它似乎没什么用

[https://docs.google.com/open?id=0B6aJ6H5VNJ4XSlNGem84T3EyV1E](https://docs.google.com/open?id=0B6aJ6H5VNJ4XSlNGem84T3EyV1E)

```
public class GameActivity extends AndroidApplication {

    @Override
    public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

      Mobclix.onCreate(this);
      RelativeLayout layout = new RelativeLayout(this);

      requestWindowFeature(Window.FEATURE_NO_TITLE);
      getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
                      WindowManager.LayoutParams.FLAG_FULLSCREEN);
      getWindow().clearFlags(WindowManager.LayoutParams.FLAG_FORCE_NOT_FULLSCREEN);

      View gameView = initializeForView(new GraphicsView(), false);
      MobclixAdView adView = new MobclixMMABannerXLAdView(this);
      adView.getAd();
      adView.setRefreshTime(30000);

      RelativeLayout.LayoutParams adParams = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
      adParams.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);
      adParams.addRule(RelativeLayout.CENTER_HORIZONTAL);

      layout.addView(gameView);
      layout.addView(adView, adParams);
      setContentView(layout);

    }

     @Override
    protected void onPause() {
        super.onPause();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T05:18:31.080

您是否将*Mobclix.jar*包含在您的*libs*文件夹中？如果是，则横幅尚不可用。这是由于信号的随机可用性。如果没有信号，它将显示为问号。user1385802 是对的，应该检查您的支持票。有可能。

有关详细信息，请参阅[http://support.mobclix.com/attachments/token/lvbgrqsfpjgvgxb/?name=Detailed+Start+Guide+for+Android.pdf 。](http://support.mobclix.com/attachments/token/lvbgrqsfpjgvgxb/?name=Detailed+Start+Guide+for+Android.pdf)（“5\. 故障排除”，第 15 页）

# curl - curl 仅在使用 scp 时返回“失败的书写体”

> ID：11010130
> 
> 赞同：1
> 
> 时间：2012-06-13T07:32:11.800
> 
> 标签：curl, libcurl, scp

我正在尝试使用 curl 实现一些文件传输协议。FTP、SFTP、HTTP 工作得很好。但是在我使用 curl 的自定义程序中，使用 SCP 的文件传输失败了

```
Failed writing body (65 != 16384) 
```

而有时

```
Failed writing body (0 != 16384) 
```

但是，当我使用 curl 二进制文件本身时，相同的文件会正常下载。

```
curl scp://harsha:password@10.10.10.10/home/harsha/abcd.txt 
```

谷歌搜索帮助我进入了[这个](http://www.linux.org.za/Lists-Archives/glug-tech-0609/msg00025.html)页面，他说文件写入函数没有写入它读取的所有字节。所以我测试了它，确实发现它是真的。

但是如何解决问题并确保正确写入所有字节。

顺便说一句，我正在使用**fwrite**。

谢谢。

# asp.net-mvc-3 - 在 IIS 7.0 中发布 MVC 3.0 站点

> ID：11010131
> 
> 赞同：0
> 
> 时间：2012-06-13T07:32:13.290
> 
> 标签：asp.net-mvc-3, entity-framework, iis, publish

我用 MVC 3.0 编写网站，它使用 EntityFrame 工作 4.0，在控制器层我有这个：

```
 public ViewResult Index()
    {
     return View(_DatabaseSMSEntities.People.ToList());
    } 
```

在视图层中，我使用了 Telerik Grid：

```
<% Html.Telerik().Grid<ProjectWebsite.Models.People>(Model)
                    .Name("People")
                    .Columns(columns =>
                    {
                        columns.Bound(o => o.PersonID).Format(
                         "<a href='../WebPage/PersonSMSPage.aspx?personID=" + "{0}" + @"' <br/>runat=""server"">" +
                         "<img src='../../Content/themes/base/images/RegisterSMS.png' <br/>alt='{0}' />"<br/>
                        );                                           

                    })
                    .RowAction(row =>
                    {
                        if (row.Index == 0)
                        { row.DetailRow.Expanded = false; }
                    })                   
                     .Render();%> 
```

我在 IIS 7.0 中发布了它。但它不起作用。

```
<connectionStrings>
    <add name="ApplicationServices" connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true" providerName="System.Data.SqlClient" />
    <add name="DatabaseSMSEntities" connectionString="metadata=res://*/Models.ModelDatabaseSMS.csdl|res://*/Models.ModelDatabaseSMS.ssdl|res://*/Models.ModelDatabaseSMS.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\DatabaseSMS.mdf;Integrated Security=True;MultipleActiveResultSets=True&quot;" providerName="System.Data.EntityClient" />
    <add name="cn1" connectionString="data source=~/ErrorsLog/Errors.db" />
  </connectionStrings> 
```

首先，我将它发布在 D:\Pardis 中，但出现错误：

```
 CREATE DATABASE permission denied in database 'master'.
    An attempt to attach an auto-named database for file D:\Pardis\App_Data\DatabaseSMS.mdf failed. A database with the same name
exists, or specified file cannot be opened, or it is located on UNC share.
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Data.SqlClient.SqlException: CREATE DATABASE permission denied in database 'master'.
An attempt to attach an auto-named database for file D:\Pardis\App_Data\DatabaseSMS.mdf failed. A database with the same name exists, or specified file cannot be opened, or it is located on UNC share.

Source Error: 

Line 20:         public ViewResult Index()
Line 21:         {
Line 22:             return View(_DatabaseSMSEntities.People.ToList());
Line 23:         }
Line 24: 
```

然后，我将其发布在 Inetup 中，但出现错误。我在用户列表中没有 ASPNET 用户来设置安全性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T02:50:24.883

可能有两个问题

1.  您忘记复制数据库文件（如果您使用的是 sql server compact）
2.  您正在通过代码创建一个新数据库。您不应该在部署环境中创建数据库。如果您正在使用，这可能会发生

    System.Data.Entity.Database.SetInitializer（*一些策略*）

# ruby-on-rails-3 - 如何创建范围以选择最多用户使用的记录

> ID：11010132
> 
> 赞同：0
> 
> 时间：2012-06-13T07:32:23.500
> 
> 标签：ruby-on-rails-3, select, scope

我想选择最多用户使用的资源。

模型：

```
class Resource < ActiveRecord::Base
  has_many :users, :through => :kits
  has_many :kits

class User < ActiveRecord::Base
  has_many :resources, :through => :kits
  has_many :kits, :dependent => :destroy

class Kit < ActiveRecord::Base

  belongs_to :resource
  belongs_to :user 
```

我想创建一个范围来选择那些 resource.users.count > 3 的资源

我怎样才能在 Rails 中做到这一点？

谢谢

我正在接近但仍有一些问题：

```
scope :most, group('resources.id, resources.title, resources.url, resources.description, resources.author, resources.price, resources.created_at, resources.updated_at').joins(:users).having("count(user_id) > ?",5) 
```

我必须包含资源的所有字段，因为 Postgresql 给出如下错误：

```
ActiveRecord::StatementInvalid: PG::Error: ERROR:  column "resources.category_id" must appear in the GROUP BY clause or be used in an aggregate function 
```

必须有一种方法可以包含所有字段，而不必输入每个字段

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:58:31.370

这将起作用，尽管效率有点低：

在 Resource 类中，创建一个遍历每个资源的类方法，并将每个拥有超过“num”个用户的资源附加到一个数组中。

```
def self.more_than_x_users(num)
  resource_list = []
  Resource.all.each |res|
    if res.users.count > num
      resource_list << res
    end
  end
  return resource_list
end 
```

另一种方法是使用`find`带有 :select 和 :group 的方法，如本文中所建议的那样，[但是](https://stackoverflow.com/questions/499767/counting-and-grouping-at-the-same-time)您仍然需要将返回的外键转换为对象。我会保持简单并采用上述解决方案。

**编辑**：
在尝试了一些事情之后，我认为这可能会对您有所帮助：
在您的`Kit`班级中添加一个范围，如下所示：

```
scope :most_used, group(:resource_id).having("count(user_id) > 3") 
```

如果由于我的字段错误而这不起作用，请考虑如何在 SQL 语句中执行此操作，并尝试通过链接类似于我的命令来复制我给您的内容。如果您仍然卡住，请粘贴您的 SQL 语句，我会为您将其转换为范围。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T14:41:18.120

这应该有效：

```
class Resource < ActiveRecord::Base
  def popular_resources
    joins(:users).where("users.count > '3'")
  end 
```

# azure-storage - 下载文件 blob：代理错误（请求被 HTTP 过滤器拒绝。请联系您的 Forefront TMG 管理员。）

> ID：11010141
> 
> 赞同：0
> 
> 时间：2012-06-13T07:33:16.190
> 
> 标签：azure-storage, azure-blob-storage

0

大家好，

我遇到了一个奇怪的问题。我正在使用以下代码从 Azure blob 存储下载文件：

```
CloudBlobContainer container = AzureAccountManagement.currentBlobClient.GetContainerReference(containerName);
        CloudBlob blob = container.GetBlobReference(blobName);

        BlobRequestOptions options = new BlobRequestOptions();
        options.Timeout = new TimeSpan(0, TiMEOUT, 0);

        try
        {
            blob.DownloadToFile(localPath, blob.Name), options);
        } 
```

在上面的 AzureAccountManagement 中，我配置了正确的连接字符串。

使用上面的代码，当我下载扩展名为 .mdb 的文件时，我会得到如下异常：

* * *

Microsoft.WindowsAzure.StorageClient.StorageServerException 被捕获

消息=代理错误（请求被 HTTP 过滤器拒绝。请联系您的 Forefront TMG 管理员。）

内部异常：

“远程服务器返回错误：(502) Bad Gateway。”

* * *

其他尝试：

1.  当我尝试下载其他文件（.xml/html/txt）时，代码成功下载了它们。

2.  我使用 Azure 存储资源管理器下载它们，.mdb 文件 --failed 并出现同样的错误；其他文件类型，成功。

3.  我在其他机器上测试，实际上和我的机器配置相同，它成功下载了.mdb文件和其他文件类型。

所以我认为我的机器存在一些 HTTP 过滤器或安全问题，但我不知道如何解决。大家有遇到过类似的问题吗？如果是，我希望从你那里得到解决方案。

我的工作机器是 Windows 7/64-bit/VS 2010 SP1/Azure SDK 1.6。如果信息有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T22:24:42.423

看来您在防火墙内。

这个错误

> 该请求被 HTTP 过滤器拒绝。请联系您的 Forefront TMG 管理员。)
> 
> 内部异常：
> 
> “远程服务器返回错误：(502) Bad Gateway。”

实际上是从您的防火墙提供服务的——在这种情况下是 TMG 这意味着请求被阻止离开防火墙，因此永远不会到达 blob 存储端点。

与您的网络管理员聊天，看看他们是否可以通过防火墙跟踪流量。他们可能必须翻转开关才能允许此流量通过。

# c#-4.0 - Process.GetProcesses 返回所有登录用户的进程？

> ID：11010146
> 
> 赞同：5
> 
> 时间：2012-06-13T07:33:34.990
> 
> 标签：c#-4.0, process

在允许多个用户同时登录到一台机器的windows环境中，当我们调用时`Process.GetProcesses()`，它是返回进行此调用的已登录用户的进程还是返回所有已登录用户的进程。我查看了 MSDN 页面，但找不到此信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T08:06:16.730

该函数返回本地计算机上运行的所有进程资源。
你可以在 MSDN 上看到它（我也在我的电脑上查看它..）

> 返回值
> 
> 类型：`System.Diagnostics.Process[]`
> Process 类型的数组，表示**本地计算机上运行的所有进程资源。**

如果您对获取特定用户的流程感兴趣，请查看以下代码 - [http://www.codeproject.com/Articles/14828/How-To-Get-Process-Owner-ID-and-Current-User-SID](http://www.codeproject.com/Articles/14828/How-To-Get-Process-Owner-ID-and-Current-User-SID)

# 3d - 2 个不同的 3D 网格之间的非刚性变换

> ID：11010147
> 
> 赞同：1
> 
> 时间：2012-06-13T07:33:40.597
> 
> 标签：3d, transformation, mesh, head

我正在寻找一种最佳方法来匹配 2 个不同网格的顶点。密度不同，大小可能还有其他一些原因。

2 个网格代表一个人头，因此解剖学差异可能很多。

问题是最小化。也许最小化平均距离或能量。

我可以在网上找到一些在 2D 图像中注册兴趣点的方法，但在 3D 中没有。

有人对非刚性转换有想法吗？

我正在特别努力在另一个网格中找到每个网格的顶点的每个双顶点。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T07:40:15.727

我不确定下面的论文是否适用于不同的点数，但您可以查看以下论文

深度扫描非刚性配准的全球通信优化 Hao Li, Robert W. Sumner, Mark Pauly

# reporting-services - 如何更改 Microsoft SQL Server Reporting Services 日期日历的第一个工作日？

> ID：11010149
> 
> 赞同：1
> 
> 时间：2012-06-13T07:33:48.390
> 
> 标签：reporting-services, sql-server-2008-r2, ssrs-2008

我想更改 Microsoft SQL Server Reporting Service 2008 R2 日期日历中的第一天。

此问题在 SSRS 2005 中发现，不应出现在 SSRS 2008 R2 中。

现在，工作日从周日到周六开始。我想从星期六到星期五更改它。

请查看当月的日历：2012 年 6 月。

现在日期日历采用以下方式：周日 - 周六

小号 | 中号 | T | W | T | F | 小号

我想要以下方式：周六 - 周五

小号 | 小号 | 中号 | T | W | T | F

我检查了 Microsoft 网站的解决方案，这是 Micorosf SQL Server Reporting 2005 中的问题。

请帮我解决这个问题。

非常感谢和问候

西坎德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T07:41:40.607

检查此链接以更改第一天。它可能无法回答您的问题，但可能会有所帮助[@@DATEFIRST](http://msdn.microsoft.com/en-us/library/ms187766%28v=sql.105%29.aspx)。

`SET DATEFIRST 5`只会为该会话更改它。此外，如果重新启动服务器/服务，您可能会丢失更改。`SET DATEFIRST`您可以通过使用内部报告来解决此问题。

# c# - 在 Metro 应用程序中查找 Windows 的原始安装日期

> ID：11010150
> 
> 赞同：1
> 
> 时间：2012-06-13T07:33:54.897
> 
> 标签：c#, microsoft-metro

我想在我的 Metro 应用程序中获取 Windows 的原始安装日期。哪位专家能给我这个问题的答案？非常感谢。

# python - 使用 Cython 扩展模块分发共享库和一些 C 代码

> ID：11010151
> 
> 赞同：34
> 
> 时间：2012-06-13T07:33:58.000
> 
> 标签：python, cython, distutils

我正在尝试从大型 C++ 共享库 (libbig.so) 中获取一些函数，并通过 Cython 将它们公开给 Python。为此，我有一个小的 C++ 文件 (small.cpp)，它为我需要的共享库中的功能提供了一个精简的包装器，以一种易于通过 Cython (pysmall.pyx) 调用的方式。

libbig.so -> small.cpp，small.h -> libsmall.so -> pysmall.pyx -> pysmall.cpp -> pysmall.so

我可以在自己的电脑上构建和运行这个扩展模块：我只是将small.cpp编译成libsmall.so，然后在setup.py的Extension对象中说“libraries=['small']”来构建扩展模块pysmall 。所以。

我现在正在尝试分发此扩展模块，并且很难找到描述 setup.py 分发 Cython 模块以及 C 源代码和共享库的最佳实践的资源。我已通读“[安装 Python 模块](http://docs.python.org/install/index.html)”、“[分发 Python 模块](http://docs.python.org/distutils/index.html)”和“[分发 Cython 模块](http://docs.cython.org/src/userguide/source_files_and_compilation.html#distributing-cython-modules)”。我了解如何自行分发扩展模块。我不太确定分发扩展模块的依赖项的最佳方式。

Cython 文档表明您应该包含生成的 .cpp 文件以及 .pyx 文件，以防 Cython 不存在，但它没有提供代码来演示如何最好地处理每种情况。它也没有提到如何分发 Cython 模块所依赖的共享库。

我正在挖掘来自 pandas、lxml、pyzmq、h5py 等的 setup.py 脚本，并且发生了相当多的无关工作。如果有人有可能加速此过程的指针或示例代码，我当然会很感激！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-28T10:05:59.293

1) 分发 libbig.so

这是python无法帮助您解决的问题。你的目标是谁？如果是 linux，你能要求他们用他们的包管理器安装它吗？如果 libbig 不是通过包管理器分发的，或者它不是 linux 并且您的目标是多个体系结构，那么您可能必须分发 libbig 源代码。

2) Cython/setuptools。

坦率地说，我认为只要求人们拥有 Cython 是最简单的。这样，代码只有一个基本事实版本，您不必担心代码`.pyx`和`.cpp`代码之间的不一致。最简单的方法是使用`setuptools`而不是`distutils`. 这样，您可以使用：

```
setup('mypackage',
    ...
    install_requires=['cython']) 
```

总的来说，您的`setup.py`脚本将类似于：

```
# setup.py

from setuptools import setup, Extension
from Cython.Distutils import build_ext

pysmall = Extension('pysmall',
    sources = ['pysmall.pyx', 'small.cpp'],
    include_dirs = ['include/'])

setup(name='mypackage',
      packages=['yourpurepythonpackage'],
      install_requires=['cython==0.17'],
      ext_modules=[pysmall],
      cmdclass = {'build_ext': build_ext}) 
```

如果您不喜欢需要 cython 的想法，您可以执行以下操作：

```
# setup.py

import warnings
try:
    from Cython.Distutils import build_ext
    from setuptools import setup, Extension
    HAVE_CYTHON = True
except ImportError as e:
    HAVE_CYTHON = False
    warnings.warn(e.message)
    from distutils.core import setup, Extension
    from distutils.command import build_ext

pysmall = Extension('pysmall',
    sources = ['pysmall.pyx', 'small.cpp'],
    include_dirs = ['include/'])

configuration = {'name': 'mypackage',
      'packages': ['yourpurepythonpackage'],
      'install_requires': ['cython==0.17'],
      'ext_modules': [pysmall],
      'cmdclass': {'build_ext': build_ext}}

if not HAVE_CYTHON:
    pysmall.sources[0] = 'pysmall.cpp'
    configuration.pop('install_requires')

setup(**configuration) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-11-02T10:41:48.443

这是我的棘手解决方案。这个想法是“隐藏”`cython`它的存在，直到它被要求安装。这可以通过惰性评估来实现。这是一个例子：

```
from setuptools import setup, Extension

class lazy_cythonize(list):
    def __init__(self, callback):
        self._list, self.callback = None, callback
    def c_list(self):
        if self._list is None: self._list = self.callback()
        return self._list
    def __iter__(self):
        for e in self.c_list(): yield e
    def __getitem__(self, ii): return self.c_list()[ii]
    def __len__(self): return len(self.c_list())

def extensions():
    from Cython.Build import cythonize
    ext = Extension('native_ext_name', ['your/src/*.pyx'])
    return cythonize([ext])

configuration = {
    'name': 'mypackage',
    'packages': ['yourpurepythonpackage'],
    'install_requires': ['cython==0.17'],
    'ext_modules': lazy_cythonize(extensions)
}

setup(**configuration) 
```

lazy_cythonize 是一个虚假列表，仅当有人尝试访问它时才会生成其内部元素。
需要时，此类导入`Cython.Build`并生成扩展列表。这样可以避免将`*.c`文件保留在项目中，从而在构建模块时需要安装 cython。

相当棘手，但实际上它正在工作。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-06-10T16:49:16.860

我已经推送了[setuptools 288](https://bitbucket.org/pypa/setuptools/issue/288/cannot-specify-cython-under-setup_requires)的修复程序，计划作为 setuptools 18.0 发布。[此更改日志条目](https://bitbucket.org/pypa/setuptools/src/4249669040239bff20196b17ccd4d73870d37343/CHANGES.txt#cl-10)描述了应与该构建一起使用的技术。[Beta 版本](https://bitbucket.org/pypa/setuptools/downloads/setuptools-18.0b1.zip)可用于测试。

# apache - IE 接收某些文件的 HTTP 1.0 响应

> ID：11010153
> 
> 赞同：0
> 
> 时间：2012-06-13T07:34:09.710
> 
> 标签：apache, http-headers, http-1.1, http-1.0

我已经包含了一个音频和视频播放器（带有 Flash 后备的 html5），它适用于除 IE 之外的所有浏览器。

在寻找问题时，我发现服务器发送“HTTP/1.0 200 OK”和“Connection:close”标头（并且没有 Content-Length），但仅在 IE 中且仅针对某些文件（包括 .swf、.mp3 和.mp4)。

我已将以下内容添加到 .htaccess 以禁用这些文件的 gzip：

```
<IfModule mod_env.c>
  SetEnvIfNoCase Request_URI "\.(?:mp3|mp4)$" no-gzip dont-vary
</IfModule> 
```

我对 apache 配置没有经验，也不知道为什么应该为某些请求使用不同的 http 版本。

以下是发送标头：

```
GET /test.mp3 HTTP/1.1
Accept  */*
User-Agent  Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0)
Accept-Encoding gzip, deflate
Host    ------
Connection  Keep-Alive 
```

和响应头：

```
HTTP/1.0 200 OK
Date    Wed, 13 Jun 2012 07:38:17 GMT
Server  Apache/2.2.22 (Unix) mod_fcgid/2.3.6 mod_ssl/2.2.22 OpenSSL/0.9.8g
Last-Modified   Mon, 04 Jun 2012 13:15:25 GMT
ETag    "1bc12b-596969-4c1a553b51540"
Accept-Ranges   bytes
Connection  close
Content-Type    audio/mpeg 
```

**更新：**我刚刚发现初始页面请求（PHP，文本/html）响应也是 HTTP/1.0，但不是所有后续的 ajax 请求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T15:51:04.567

问题在于 apache 中的旧配置选项从未从默认配置中删除：

[http://blogs.msdn.com/b/ieinternals/archive/2011/03/26/https-and-connection-close-is-your-apache-modssl-server-configuration-set-to-slow.aspx](http://blogs.msdn.com/b/ieinternals/archive/2011/03/26/https-and-connection-close-is-your-apache-modssl-server-configuration-set-to-slow.aspx)

# java - Jersey Restful 服务 - 无法连接到服务器

> ID：11010157
> 
> 赞同：0
> 
> 时间：2012-06-13T07:34:20.970
> 
> 标签：java, web-services, rest, jakarta-ee

我正在学习用 Jersey 实现宁静的网络服务。我总是收到“POST

```
http://localhost:8080/rest/welcome/post 
```

返回了 404 Not Found 的响应状态” - 我的代码有什么问题？服务器端的上下文根是 rest，我在类级别有 @Path 欢迎，在方法级别有 @pPath post。

**客户**

```
public class WelcomeRestJsonClient {

    @Produces("application/json")
    @Consumes("text/plain")
    public void send() {
        MyObject myObject = new MyObject();

        ClientConfig clientConfig = new DefaultClientConfig();
        clientConfig.getClasses().add(com.restclient.MyJsonProvider.class);
        Client client = Client.create(clientConfig);
        WebResource webResource = client.resource("http://localhost:8080/rest/welcome/post");
        ClientResponse response = webResource.type(MediaType.APPLICATION_JSON).post(ClientResponse.class, myObject);
        System.out.println("success");
    }
} 
```

**服务器**

```
@Path("/welcome")
public class WelcomeRestJson {

    @POST
    @Path("/post")
    @Produces("text/plain")
    @Consumes("application/json")

    public String processPostData(MyObject myObject) {
        System.out.println("Inside processPostData");
        return "success";
    }
 } 
```

我是否因为不正确的 JsonProvider 配置而面临这个问题？在客户端，我使用 MyJsonProvider 扩展 JacksonJaxbJsonProvider 将 MyObject 转换为 Json。我在服务器端的代码只接受 MyObject。我是否也需要一些代码来连接服务器端的 Json 提供程序？

这是我的 web.xml

```
<servlet>
    <servlet-name>Jersey REST Service</servlet-name>
        <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <param-value>com.rest</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Jersey REST Service</servlet-name>
    <url-pattern>/rest/*</url-pattern>
</servlet-mapping>

<welcome-file-list>
    <welcome-file>index.html</welcome-file>
</welcome-file-list> 
```

我可以访问rest index.html。我在日志文件中看到以下内容。信息：找到根资源类：com.rest.WelcomeRestJson 类我删除了路径中的“/”。还是一样的404错误。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T22:06:33.790

将 Jersey Servlet 添加到 后`web.xml`，不带参数的 get 开始工作。但是帖子仍然失败。将以下初始化参数添加到 Jersey Servlet 并替换 Jersey Servlet 映射`/rest/*`以`/*`解决问题。

```
<init-param>
        <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
        <param-value>true</param-value>
</init-param> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T08:01:44.353

*   不要在路径（`@Path("/welcome")`）注释中使用斜杠（/），而不是写`@Path("welcome")`和`@Path("post")`。

*   我建议您不要使用服务名称`post`，因为 i 可能是保留关键字。而不是后期使用`@Path("test")`或其他东西。

*   使用 firefox 插件[Poster](https://addons.mozilla.org/en-US/firefox/addon/poster/)测试您的服务状态，以验证服务端是否一切正常。这是 404 错误，它与 json 错误无关，只是您的服务在`http://localhost:8080/rest/welcome/post`. 它与代码无关，与配置有关。

*   你能达到`http://localhost:8080/rest/`吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T13:57:26.057

1）您似乎没有注册您的资源。您依赖 Jersey 的自动扫描功能吗？它可能无法在某些环境中正常工作。首选方式是使用`javax.ws.rs.core.Application`类，因为它是标准的 JAX-RS 方式。

2) 您还需要注册您的提供商。首选方式是使用`javax.ws.rs.core.Application`类，因为它是标准的 JAX-RS 方式。

2.1）无论如何，不​​注册提供者不是得到404的原因。实际上我不记得你会得到什么错误代码，可能是500。

3）强烈建议：检查码头日志。它打印了很多包含所有注册资源和提供者（包括默认和自定义）列表的信息。

# visual-c++ - 将 GNU asm 调用转换为 VC++

> ID：11010162
> 
> 赞同：5
> 
> 时间：2012-06-13T07:34:54.850
> 
> 标签：visual-c++, assembly

我一直在将 linux 应用程序移植到 windows 平台。

这是linux代码，

```
 __asm__ __volatile__ ("lock; cmpxchgl %1, %2"
                      : "=a" (prev)
                      : "q" (new_value), "m" (*ptr), "0" (old_value)
                     : "memory"); 
```

我尝试使用 _asm volatile，但在 Visual Studio 2012 中出现错误提示“'操作码'中的内联汇编语法错误；找到'数据类型'”。

我需要一些 Windows 等效代码。请提供任何信息/建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:26:42.080

一般来说，我更喜欢外部汇编模块而不是内联汇编——它更便携（是的，便携和汇编在同一个句子中使用）。[nasm](http://www.nasm.us/)和[yasm](http://yasm.tortall.net/)等汇编程序可用于多个平台，并且可以生成多种目标文件格式。

外部汇编模块不适用于像您的代码这样对性能至关重要的单行代码 - 考虑使用编译器内在函数而不是内联汇编。您可能想查看[便携式比较和交换](https://stackoverflow.com/questions/1158374/portable-compare-and-swap-atomic-operations-c-c-library)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T14:08:22.850

我认为这里的主要问题是 Visual Studio 使用英特尔风格的内联汇编语言，而你没有使用它。

看看这个：http: [//msdn.microsoft.com/en-us/library/4ks26t93%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/4ks26t93%28v=vs.80%29.aspx)

关于 volatile 说明符和重新排序，即使使用 o2 优化，我还没有看到 VS 2010 或 2012 重新排序 __asm 块。

问候，安迪

# windows - 如何在 Windows 中暂停/恢复进程？

> ID：11010165
> 
> 赞同：86
> 
> 时间：2012-06-13T07:35:07.727
> 
> 标签：windows, process, signals

在 Unix 中，我们可以暂时暂停进程执行并使用信号`SIGSTOP`和`SIGCONT`. 如何在不编程的情况下挂起 Windows 中的单线程进程？

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2012-06-13T07:59:04.200

您不能从命令行执行此操作，您必须编写一些代码（我假设您不只是在寻找实用程序，否则超级用户可能是一个更好的地方）。我还假设您的应用程序具有执行此操作所需的所有权限（示例没有任何错误检查）。

## 艰辛的道路

首先获取给定进程的所有线程，然后调用该`SuspendThread`函数来停止每个线程（并`ResumeThread`恢复）。它可以工作，但某些应用程序可能会崩溃或挂起，因为线程可能在任何时候停止并且挂起/恢复的顺序是不可预测的（例如，这可能会导致死锁）。对于单线程应用程序，这可能不是问题。

```
void suspend(DWORD processId)
{
    HANDLE hThreadSnapshot = CreateToolhelp32Snapshot(TH32CS_SNAPTHREAD, 0);

    THREADENTRY32 threadEntry; 
    threadEntry.dwSize = sizeof(THREADENTRY32);

    Thread32First(hThreadSnapshot, &threadEntry);

    do
    {
        if (threadEntry.th32OwnerProcessID == processId)
        {
            HANDLE hThread = OpenThread(THREAD_ALL_ACCESS, FALSE,
                threadEntry.th32ThreadID);

            SuspendThread(hThread);
            CloseHandle(hThread);
        }
    } while (Thread32Next(hThreadSnapshot, &threadEntry));

    CloseHandle(hThreadSnapshot);
} 
```

请注意，这个功能过于幼稚，要恢复线程，您应该跳过暂停的线程，并且由于暂停/恢复顺序很容易导致死锁。对于单线程应用程序，它很冗长，但它可以工作。

## 无证方式

从 Windows XP 开始有，`NtSuspendProcess`但它*没有记录*。阅读[这篇文章](http://forum.sysinternals.com/suspend-a-process_topic17442_page2.html)以获取代码示例（未记录函数的参考：news://comp.os.ms-windows.programmer.win32）。

```
typedef LONG (NTAPI *NtSuspendProcess)(IN HANDLE ProcessHandle);

void suspend(DWORD processId)
{
    HANDLE processHandle = OpenProcess(PROCESS_ALL_ACCESS, FALSE, processId));

    NtSuspendProcess pfnNtSuspendProcess = (NtSuspendProcess)GetProcAddress(
        GetModuleHandle("ntdll"), "NtSuspendProcess");

    pfnNtSuspendProcess(processHandle);
    CloseHandle(processHandle);
} 
```

## “调试器”方式

暂停程序通常是调试器所做的，您可以使用该[`DebugActiveProcess`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679295%28v=vs.85%29.aspx)功能。它将暂停进程执行（所有线程都在一起）。要恢复，您可以使用`DebugActiveProcessStop`.

这个函数让你停止一个进程（给定它的进程 ID），语法非常简单：只需传递你想要停止的进程的 ID et-voila。如果您要创建一个命令行应用程序，您需要保持其实例运行以保持进程暂停（或者它将被终止）。有关详细信息，请参阅 MSDN 上的*备注*部分。

```
void suspend(DWORD processId)
{
    DebugActiveProcess(processId);
} 
```

## 从命令行

正如我所说，Windows 命令行没有任何实用程序可以执行此操作，但您可以从 PowerShell 调用 Windows API 函数。首先安装[Invoke-WindowsApi](https://www.leeholmes.com/blog/2007/10/02/managing-ini-files-with-powershell/)脚本，然后你可以这样写：

```
Invoke-WindowsApi "kernel32" ([bool]) "DebugActiveProcess" @([int]) @(process_id_here) 
```

当然，如果您经常需要它，您可以`alias`为此制作一个。

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2014-02-08T17:46:46.697

无需任何外部工具，您可以在 Windows 7、8 或 10 上简单地完成此操作，方法是打开资源监视器并在 CPU 或概览选项卡上右键单击进程并选择*暂停进程*。资源监视器可以从任务管理器的性能选项卡中启动。

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2012-06-13T07:59:43.270

我使用来自 SysInternals (procexp.exe) 的（一个非常古老的）进程浏览器。它是标准任务管理器的替代品/补充品，您可以从那里暂停一个进程。

编辑：微软已经收购了 SysInternals，网址：[procExp.exe](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)

除此之外，您可以将进程优先级设置为低，这样它就不会妨碍其他进程，但这不会暂停进程。

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2013-11-21T06:20:00.673

[套件中的PsSuspend](https://docs.microsoft.com/en-us/sysinternals/downloads/pssuspend)命令行实用程序`SysInternals`。它通过其 id 暂停/恢复进程。

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2013-04-12T11:11:17.713

好吧，Process Explorer 有一个挂起选项。您可以在进程列中右键单击一个进程，然后选择挂起。一旦您准备好再次恢复它，请右键单击，这次选择恢复。Process Explorer 可以从这里获得：

[http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx](http://technet.microsoft.com/en-us/sysinternals/bb896653.aspx)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2019-06-21T13:56:28.797

[正如 Vadzim](https://docs.microsoft.com/en-us/sysinternals/downloads/pssuspend)所提到的，[PsSuspend](https://stackoverflow.com/users/603516/vadzim)甚至可以通过名称暂停/恢复进程，而不仅仅是通过 pid。

我在 OneDrive 进程的简单切换脚本中同时使用 PsSuspend 和[PsList](https://docs.microsoft.com/en-us/sysinternals/downloads/pslist)（PsTools 套件中的另一个工具）：如果我需要更多带宽，我会暂停 OneDrive 同步，然后通过发出相同的迷你脚本来恢复进程：

```
PsList -d onedrive|find/i "suspend" && PsSuspend -r onedrive || PsSuspend onedrive 
```

[套件中的PsSuspend](https://docs.microsoft.com/en-us/sysinternals/downloads/pssuspend)命令行实用程序`SysInternals`。它通过其 id 暂停/恢复进程。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-11T03:41:58.870

```
#pragma comment(lib,"ntdll.lib")
EXTERN_C NTSTATUS NTAPI NtSuspendProcess(IN HANDLE ProcessHandle);

void SuspendSelf(){
    NtSuspendProcess(GetCurrentProcess());
} 
```

ntdll 包含导出的函数 NtSuspendProcess，将句柄传递给进程以完成此操作。

# hadoop - 修复 HBase 表（过渡中的未分配区域）

> ID：11010167
> 
> 赞同：14
> 
> 时间：2012-06-13T07:35:14.257
> 
> 标签：hadoop, hbase, cloudera

我在修复故障表时有点卡住（在 Hbase 0.92.1-cdh4.0.0、Hadoop 2.0.0-cdh4.0.0 上）

有一个未完成的过渡区域：

```
Region    State
bf2025f4bc154914b5942af4e72ea063 counter_traces,1329773878.35_766a0b4df75e4381a686fbc07db9e333,1339425291230.bf2025f4bc154914b5942af4e72ea063\. state=OFFLINE, ts=Tue Jun 12 11:43:53 CEST 2012 (0s ago), server=null 
```

当我跑步时`sudo -u hbase hbase hbck -repair`，我得到了这个：

```
Number of empty REGIONINFO_QUALIFIER rows in .META.: 0
ERROR: Region { meta => counter_traces,1329773878.35_766a0b4df75e4381a686fbc07db9e333,1339425291230.bf2025f4bc154914b5942af4e72ea063., hdfs => hdfs://hbase001:8020/hbase/counter_traces/bf2025f4bc154914b5942af4e72ea063, deployed =>  } not deployed on any region server.
Trying to fix unassigned region...
12/06/12 11:44:40 INFO util.HBaseFsckRepair: Region still in transition, waiting for it to become assigned: {NAME => 'counter_traces,1329773878.35_766a0b4df75e4381a686fbc07db9e333,1339425291230.bf2025f4bc154914b5942af4e72ea063.', STARTKEY => '1329773878.35_766a0b4df75e4381a686fbc07db9e333', ENDKEY => '1329793347.58_163865765c0a11e184ab003048f0e77e', ENCODED => bf2025f4bc154914b5942af4e72ea063,} 
```

它只是循环。

如果我不这样做`-repair`，我会得到这个：

```
Number of empty REGIONINFO_QUALIFIER rows in .META.: 0
ERROR: Region { meta => counter_traces,1329773878.35_766a0b4df75e4381a686fbc07db9e333,1339425291230.bf2025f4bc154914b5942af4e72ea063., hdfs => hdfs://hbase001:8020/hbase/counter_traces/bf2025f4bc154914b5942af4e72ea063, deployed =>  } not deployed on any region server.
ERROR: Region { meta => counter_traces,1329816776.95_95b5561f3c1e496598421359a19ac665,1339425297099.ee1fd808d954c9adc9ed95ec2f29d119., hdfs => hdfs://hbase001:8020/hbase/counter_traces/ee1fd808d954c9adc9ed95ec2f29d119, deployed =>  } not deployed on any region server.
12/06/12 11:45:59 DEBUG util.HBaseFsck: There are 134 region info entries
ERROR: There is a hole in the region chain between 1329773878.35_766a0b4df75e4381a686fbc07db9e333 and 1329793347.58_163865765c0a11e184ab003048f0e77e.  You need to create a new .regioninfo and region dir in hdfs to plug the hole.
ERROR: There is a hole in the region chain between 1329816776.95_95b5561f3c1e496598421359a19ac665 and 1329847231.75_b3c50776778b43e088dd7ed865e11331\.  You need to create a new .regioninfo and region dir in hdfs to plug the hole.
ERROR: Found inconsistency in table counter_traces 
```

我之前跑过`-repair`几次，很有帮助。但这一次，不再。

好的，所以这表明要进行手动干预来解决这个问题。有人可以指出我如何做到这一点的正确方向吗？食谱、网页、示例，任何东西都会有所帮助。

谢谢，马里奥

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-03T17:34:18.633

马里奥，

因此，一个区域卡在转换中的原因之一是，当它跨区域服务器移动时，它没有从源区域服务器分配，但从未分配给另一个区域服务器。一种对我总是有效的修复方法是通过以下方式从 hbase shell 中强制分配它：-

```
assign regionName 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-02-23T08:08:58.767

我试图对区域进行强制分配，但这对我不起作用。我尝试了以下并且它有效：

脚步：

*   从 hbase shell 禁用表
*   使用以下命令运行 hbck 以修复问题

    `sudo -u hbase hbase hbck -repair`

*   从 hbase shell 启用表

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-24T07:56:19.927

如果您的 HBase 版本足够新，您也可以尝试使用 hbck -repairHoles 而不是 -repair。在最近的“修复漏洞”问题上，这对我有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-21T18:18:07.857

首先，您应该检查您的 hdfs 中是否有该特定区域的文件。

如果有，您应该单独使用 hbck -fixHdfsHoles -fixMeta 直到修复。（可能需要几次尝试）。

如果正在转换的区域没有这样的文件（它应该在 /hbase/data/// 下），那么 HBase 认为该目录中应该有该区域的有效 HFile 并且无法修复它正常的修复命令。

您应该在此处执行最新响应之一中的内容，并在您的 hdfs 中创建一个有效的 HFile ：

[http://comments.gmane.org/gmane.comp.java.hadoop.hbase.user/31308](http://comments.gmane.org/gmane.comp.java.hadoop.hbase.user/31308)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-08T10:41:41.970

我有同样的问题

*   通过 Ambari 启动所有服务时，HDFS 进入了安全模式，并且很长时间没有回来。
*   其他服务没有启动，因为 HFDS 处于安全模式的时间更长。我手动从安全模式中删除了 HDFS 并尝试启动服务，看起来这损坏了一些影响 hbase 的 HDFS 文件。
*   扫描现有表返回“未知表错误”
*   创建新命名空间返回以下错误：

> create_namespace 'tst1' 错误：java.io.IOException：表命名空间管理器未完全初始化，稍后再试

“hbase hbck -修复”

返回“错误：和之间的区域链中有一个洞。您需要在 hdfs 中创建一个新的 .regioninfo 和区域目录来堵住这个洞”。

运行“hbase hbck -repairHoles”解决了这个问题。我也可以扫描以前存储的数据。

*注意： - hbase hbck 命令应该从 hbase 用户运行*

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-26T13:24:49.383

我有同样的问题。一个区域被卡住了`Region still in transition, waiting for it to become assigned:`。所有`-repair`选项都不起作用，因为所有选项都要求分配所有区域。

我不得不从 hdfs 中删除该区域。 `hdfs$ hdfs dfs -rm -r /hbase/data/default/<table>/<region>`

删除该区域后，所有`-repair`选项都有效，但由于 Zookeeper 缓存，报告该区域仍在转换中。

作为[如何获取 HBASE 中处于 FAILED_OPEN 状态的区域？](https://stackoverflow.com/questions/42539479/how-to-get-the-region-in-hbase-which-is-struck-in-failed-open-state)我从 zookeeper 中删除了转换缓存，重新启动了 HBASE master，一切正常

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-10T02:32:57.523

就我而言，我忘记更改从另一个集群复制的区域数据的所有者。

然后我尝试做`hbase hbck -repair`但得到`INFO util.HBaseFsckRepair: Region still in transition, waiting for it to become assigned` 然后出现错误`Unable to complete check or repair the region, failed to move out of transition within timeout 120000ms`

我发现`hbase:meta`已经有地区信息。

扫描表时，你会得到这样的错误

```
ERROR: No server address listed in hbase:meta for region X 
```

然后尝试`hbase hbck -fixAssignments`，但仍然像以前一样失败。

然后我检查表区域数据，发现只有这个表的自己和组是

```
drwxr-xr-x   - hdfs  hbase 
```

但其他像这样

`drwxr-xr-x - hbase hbase`

因此，将自己和组更改为其他人后，问题就解决了。现在您将成功扫描表。

# java - 从 html 文件中解析图像 url

> ID：11010171
> 
> 赞同：1
> 
> 时间：2012-06-13T07:35:40.423
> 
> 标签：java, android, html, image, parsing

我想搜索一个 html 文件，然后获取该页面上图像的 url。然后应将此 url 保存为字符串 - 仅此而已。问题是我真的不知道如何开始。

我的应用程序当然知道图像所在页面的 url。作为一个例子，让我们以这个网址为例：

* * *

在此页面上，我需要大图像的 url 作为字符串。当我查看源代码时，我可以找到该 url，但我不知道如何编码 - 这是我需要的 url：

* * *

（仅限引号内的文字）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T07:37:37.693

使用[JSoup](http://jsoup.org/cookbook/input/parse-body-fragment)。它是一个 HTML 解析器，允许您使用 css 选择器（如 jQuery）访问 DOM 元素。

```
// Parse your HTML:
// 1\. From string:
Document doc = JSoup.parse(htmlAsString);

// 2\. Or from an URL:
Document doc = JSoup.connect("http://my.awesome.site.com/").get();

// Then select images inside it:
Elements images = doc.select("img");

// Then iterate
for (Element el : images) {
    String imageUrl = el.attr("src");

    // TODO: Do something with the URL
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T07:37:07.800

看看[jsoup](http://jsoup.org/) HTML解析器。SO上有一个相关答案解释了jsoup的基本用法 - [https://stackoverflow.com/a/5318771/1321873](https://stackoverflow.com/a/5318771/1321873)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T13:07:18.390

好的，这完成了工作:)我现在正在获取图片网址：

```
public class jSoupEx {

    private static final String elements = null;

    public static void main(String args[]){

        try {
            Document doc = Jsoup.connect("http://***/index.php/Datei:***.jpg").get();
            Element image = doc.select("img").first();
            String url = image.absUrl("src");
            System.out.println(url);

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
} 
```

}

# android - android中的HttpTransportSE调用方法发生错误

> ID：11010174
> 
> 赞同：0
> 
> 时间：2012-06-13T07:35:54.197
> 
> 标签：android, web-services, wsdl, ksoap2

我正在制作一个调用 Zend（php 框架）中制作的 wsdl webservice 的示例，并且我正在使用 ksoap api（jar 文件）并且出现此错误

`org.xmlpull.v1.XmlPullParserException: expected: START_TAG {http://schemas.xmlsoap.org/soap/envelope/}Envelope (position:START_TAG <definitions name='Ccc_Core_Model_Api_Server' targetNamespace='http://gsmadmin.com/zendtest/api'>@2:385 in java.io.InputStreamReader@40539078)`

我阅读了与此错误相关的所有 stackoverflow 问题，但我无法解决此错误。

这个错误的真正解决方案是什么？

请帮我。

我的 wsdl xml 文件是：

```
<?xml version="1.0"?>              
<definitions xmlns="http://schemas.xmlsoap.org/wsdl/" xmlns:tns="http://gsmadmin.com/zendtest/api" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap-enc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" name="Ccc_Core_Model_Api_Server" targetNamespace="http://gsmadmin.com/zendtest/api"> 
<types>             
<xsd:schema targetNamespace="http://gsmadmin.com/zendtest/api"/>  
</types>    
<portType name="Ccc_Core_Model_Api_ServerPort">  
<operation name="addition">  
<documentation> This method is used for addition of two numbers</documentation>
<input message="tns:additionIn"/>
<output message="tns:additionOut"/>
</operation> 
<operation name="substraction">   
<documentation> This method is used for substraction of two numbers</documentation> 
<input message="tns:substractionIn"/>
<output message="tns:substractionOut"/>  
</operation>    
<operation name="multiple">  
<documentation>This method is used for multiple of two numbers</documentation>   
<input message="tns:multipleIn"/> 
<output message="tns:multipleOut"/>  
</operation> 
<operation name="division">   
<documentation>This method is used for division of two numbers</documentation>
<input message="tns:divisionIn"/> 
<output message="tns:divisionOut"/> 
</operation>   
</portType>  
<binding name="Ccc_Core_Model_Api_ServerBinding" type="tns:Ccc_Core_Model_Api_ServerPort">  
<soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http"/>
<operation name="addition">  
<soap:operation soapAction="http://gsmadmin.com/zendtest/api#addition"/>
<input>
<soap:body use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://gsmadmin.com/zendtest/api"/> 
</input> 
<output> 
<soap:body use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://gsmadmin.com/zendtest/api"/>  
</output>  
</operation>   
<operation name="substraction">  
<soap:operation soapAction="http://gsmadmin.com/zendtest/api#substraction"/> 
<input>   
<soap:body use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://gsmadmin.com/zendtest/api"/>
</input>  
<output>   
<soap:body use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://gsmadmin.com/zendtest/api"/>  
</output>
</operation>  
<operation name="multiple"> 
<soap:operation soapAction="http://gsmadmin.com/zendtest/api#multiple"/>  
<input>    
<soap:body use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://gsmadmin.com/zendtest/api"/>
</input>   
<output>  
<soap:body use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://gsmadmin.com/zendtest/api"/>
</output>
</operation>   
<operation name="division">
<soap:operation soapAction="http://gsmadmin.com/zendtest/api#division"/>    
<input>  
<soap:body use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://gsmadmin.com/zendtest/api"/>   
</input>
<output>   
<soap:body use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="http://gsmadmin.com/zendtest/api"/> 
</output>  
</operation>  
</binding>  
<service name="Ccc_Core_Model_Api_ServerService">  
<port name="Ccc_Core_Model_Api_ServerPort" binding="tns:Ccc_Core_Model_Api_ServerBinding">  
<soap:address location="http://gsmadmin.com/zendtest/api"/>  
</port>  
</service>   
<message name="additionIn">   
<part name="param1" type="xsd:int"/>   
<part name="param2" type="xsd:int"/>  
</message> 
<message name="additionOut">  
<part name="return" type="xsd:float"/>  
</message>   
<message name="substractionIn"> 
<part name="param1" type="xsd:int"/> 
<part name="param2" type="xsd:int"/>
</message>    
<message name="substractionOut">   
<part name="return" type="xsd:float"/>     
</message>     
<message name="multipleIn">     
<part name="param1" type="xsd:int"/>      
<part name="param2" type="xsd:int"/>
</message> 
<message name="multipleOut">   
<part name="return" type="xsd:float"/>    
</message>   
<message name="divisionIn">    
<part name="param1" type="xsd:float"/>  
<part name="param2" type="xsd:float"/> 
</message>    
<message name="divisionOut"> 
<part name="return" type="xsd:float"/>  
</message>
</definitions> 
```

异常堆栈跟踪：

```
06-14 15:45:49.527: D/AndroidRuntime(2055): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
06-14 15:45:49.527: D/AndroidRuntime(2055): CheckJNI is ON
06-14 15:45:50.587: D/AndroidRuntime(2055): Calling main entry com.android.commands.pm.Pm
06-14 15:45:50.637: D/AndroidRuntime(2055): Shutting down VM
06-14 15:45:50.657: D/dalvikvm(2055): GC_CONCURRENT freed 101K, 71% free 297K/1024K, external 0K/0K, paused 1ms+1ms
06-14 15:45:50.657: I/AndroidRuntime(2055): NOTE: attach of thread 'Binder Thread #3' failed
06-14 15:45:50.669: D/jdwp(2055): Got wake-up signal, bailing out of select
06-14 15:45:50.677: D/dalvikvm(2055): Debugger has detached; object registry had 1 entries
06-14 15:45:51.247: D/AndroidRuntime(2065): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
06-14 15:45:51.247: D/AndroidRuntime(2065): CheckJNI is ON
06-14 15:45:52.147: D/AndroidRuntime(2065): Calling main entry com.android.commands.am.Am
06-14 15:45:52.197: I/ActivityManager(61): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.phpwebservice/.PhpwebservicedemoActivity } from pid 2065
06-14 15:45:52.267: D/AndroidRuntime(2065): Shutting down VM
06-14 15:45:52.317: D/dalvikvm(2065): GC_CONCURRENT freed 103K, 69% free 319K/1024K, external 0K/0K, paused 2ms+1ms
06-14 15:45:52.389: V/Adapter(1868): URL = http://gsmadmin.com/zendtest/api?wsdl
06-14 15:45:52.389: D/jdwp(2065): Got wake-up signal, bailing out of select
06-14 15:45:52.389: D/dalvikvm(2065): Debugger has detached; object registry had 1 entries
06-14 15:45:52.447: V/Adapter(1868): NAMESPACE = http://gsmadmin.com/zendtest/api
06-14 15:45:52.447: V/Adapter(1868): METHOD_NAME = addition
06-14 15:45:52.447: V/Adapter(1868): SOAP_ACTION = http://gsmadmin.com/zendtest/api#addition
06-14 15:45:52.447: V/Adapter(1868): request = addition{param1=10; param2=2; }
06-14 15:45:52.487: V/Adapter(1868): param1 = 10  param2 = 2
06-14 15:45:53.737: W/System.err(1868): org.xmlpull.v1.XmlPullParserException: expected: START_TAG {http://schemas.xmlsoap.org/soap/envelope/}Envelope (position:START_TAG <definitions name='Ccc_Core_Model_Api_Server' targetNamespace='http://gsmadmin.com/zendtest/api'>@2:385 in java.io.InputStreamReader@40541998) 
06-14 15:45:53.757: W/System.err(1868):     at org.kxml2.io.KXmlParser.exception(KXmlParser.java:273)
06-14 15:45:53.757: W/System.err(1868):     at org.kxml2.io.KXmlParser.require(KXmlParser.java:1424)
06-14 15:45:53.757: W/System.err(1868):     at org.ksoap2.SoapEnvelope.parse(SoapEnvelope.java:127)
06-14 15:45:53.766: W/System.err(1868):     at org.ksoap2.transport.Transport.parseResponse(Transport.java:63)
06-14 15:45:53.766: W/System.err(1868):     at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:100)
06-14 15:45:53.766: W/System.err(1868):     at com.phpwebservice.Adapter.addition(Adapter.java:59)
06-14 15:45:53.777: W/System.err(1868):     at com.phpwebservice.PhpwebservicedemoActivity.onCreate(PhpwebservicedemoActivity.java:53)
06-14 15:45:53.777: W/System.err(1868):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-14 15:45:53.787: W/System.err(1868):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
06-14 15:45:53.787: W/System.err(1868):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
06-14 15:45:53.787: W/System.err(1868):     at android.app.ActivityThread.access$1500(ActivityThread.java:117)
06-14 15:45:53.787: W/System.err(1868):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
06-14 15:45:53.809: W/System.err(1868):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-14 15:45:53.809: W/System.err(1868):     at android.os.Looper.loop(Looper.java:123)
06-14 15:45:53.809: W/System.err(1868):     at android.app.ActivityThread.main(ActivityThread.java:3683)
06-14 15:45:53.809: W/System.err(1868):     at java.lang.reflect.Method.invokeNative(Native Method)
06-14 15:45:53.817: W/System.err(1868):     at java.lang.reflect.Method.invoke(Method.java:507)
06-14 15:45:53.817: W/System.err(1868):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-14 15:45:53.817: W/System.err(1868):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-14 15:45:53.817: W/System.err(1868):     at dalvik.system.NativeStart.main(Native Method)
06-14 15:45:53.817: V/log_tag(1868): total addition = 0.0
06-14 15:45:54.069: I/ActivityManager(61): Displayed com.phpwebservice/.PhpwebservicedemoActivity: +1s835ms
06-14 15:45:59.297: D/dalvikvm(126): GC_EXPLICIT freed 4K, 50% free 3003K/5895K, external 5903K/7371K, paused 63ms 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T07:43:42.957

xml 中有一个错误，从您发布的内容来看，我认为没有开始标签。如果您发布更多堆栈跟踪，则可能更容易看出问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T09:19:29.407

呜……

终于经过3天的尝试，我得到了解决方案，

问题出在 URL 中，

URL 是**“http://gsmadmin.com/zendtest/api?wsdl”**

现在我将其更改为***“http://gsmadmin.com/zendtest/api”***

但我不知道为什么需要从 url 中删除 ?wsdl，因为在以前的项目中，我最后使用了带有 ?wsdl 的 URL（它是在 java - JAX-WS-RI 中制作的），但最近如果我使用带有?wsdl 然后它给了我错误，

两种 web 服务都是用不同的技术制作的，一种是用 JAVA 制作的，另一种是用 zend（php 框架）制作的，所以可能结构不同，

但终于放松了……

谢谢.......

# php - Wordpress：如果 the_category != "category2"

> ID：11010175
> 
> 赞同：1
> 
> 时间：2012-06-13T07:36:03.210
> 
> 标签：php, wordpress, categories

快速 Wordpress 问题。是否可以检查特定类别，而不是显示它？我试过了，但我的类别仍在回显（没有错误）。

```
 <?php if (the_category() != "NAMEOFMYCATEGORY") { the_category(' | '); } ?> 
```

还是我需要使用新功能？

澄清一下：我想隐藏 1 个特定类别，这样它就不会出现。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T19:27:35.537

这应该有效：

```
<?php
foreach (get_the_category() as $category) {
    if ( $category->name !== 'FORBIDDEN CATEGORY NAME' ) {
        echo '<a href="' . get_category_link($category->term_id) . '">' .$category->name . '</a><br />'; //Markup as you see fit
    } 
```

这个名字是大写敏感的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-20T15:34:50.657

为什么不使用 codex 版本？

```
if (is_home()) {query_posts('cat=-1,-2,-3'); }  // excludes categories 1 2 3 
```

你还记得 in_category() 吗？

```
if (have_posts() && (!in_category('3')) {

//do domething;

} else // do different loop 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T07:48:53.203

我认为你需要做这样的事情，如果我的问题正确:)

```
foreach((get_the_category()) as $category) {
   if($category->cat_name = 'mycheckcatname')
   {
   DO THIS
   }
   else
   {
   Do THAT
   }
} 
```

**新编辑**——

或者这就是你正在寻找的其他东西——

```
<?php if (is_category('Category A')) : ?>
<p>This is the text to describe category A</p>
<?php elseif (is_category('Category B')) : ?>
<p>This is the text to describe category B</p>
<?php else : ?>
<p>This is some generic text to describe all other category pages, 
I could be left blank</p>
<?php endif; ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-27T18:32:55.487

```
<?php 
    $categories =  get_categories('');
    $excluded_categories = array('Sem Categoria','Uncategorized');

    foreach  ($categories as $category) {
        if(in_array( $category->cat_name, $excluded_categories)){
            continue;
        }
        echo $category->name;
    }                                     
?> 
```

# .net - 如何在 wpf 画布上绘制自由手形（随机）和文本打印

> ID：11010177
> 
> 赞同：3
> 
> 时间：2012-06-13T07:36:05.320
> 
> 标签：.net, wpf, canvas, drawing, inkcanvas

我正在开发一个油漆应用程序。我正在使用 Canvas 控件作为白板。

我想在 WPF 画布中使用 InkCanvas 类的功能，这意味着我想在 Canvas 上绘制一个徒手形状。我怎样才能做到这一点 ？我也想另存为 *.JPG

第二个问题是像我们在 MS Paint 中那样绘制字体？我可以在其中集成 FontDialogBox 吗？如果是，如何？

感谢您 ！！！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-13T08:56:10.713

这是一个在画布上绘制线条以及如何添加 textBlock 对象的简单示例。

例子：

```
 <StackPanel>
      <Canvas MouseLeftButtonDown="myCanvas_MouseLeftButtonDown" MouseMove="myCanvas_MouseMove"
x:Name="inkCanvas" Width="400" Height="200"> </Canvas>
      <Button Height="20" Width="30" x:Name="AddTextBtn" Click="AddTextBtn_Click">AddText</Button>
    </StackPanel> 
```

代码背后：

```
private Point _startPoint;
private Polyline _line;

private void myCanvas_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
{
  _startPoint = e.GetPosition(myCanvas);
  _line = new Polyline();
  _line.Stroke = new SolidColorBrush(Colors.Black);
  _line.StrokeThickness = 2.0;

  myCanvas.Children.Add(_line);
}

private void myCanvas_MouseMove(object sender, MouseEventArgs e)
{
  if (e.LeftButton == MouseButtonState.Pressed)
  {
    Point currentPoint = e.GetPosition(myCanvas);
    if (_startPoint != currentPoint)
    {
        _line.Points.Add(currentPoint);
    }
  } 
}

private void AddTextBtn_Click(object sender, RoutedEventArgs e)
{
  // Show Font Dialog Box

  TextBlock tb = new TextBlock();
  tb.FontFamily = new FontFamily("Arial");
  tb.FontSize = 14;
  tb.Text = "SampleText";

  // Set position on canvas:
  Canvas.SetTop(tb,100);
  Canvas.SetLeft(tb, 50);

  myCanvas.Children.Add(tb);
} 
```

但是没有纯 WPF 字体选择器。您可以使用 WinForms 中的那个，也可以看看周围有很多纯 Xaml 实现。例如[链接](http://blogs.msdn.com/b/text/archive/2006/11/01/sample-font-chooser.aspx)

另存为 jpg：使用 RenderTargetBitmap 或 CroppedBitmap；[请参阅 SO 上的链接](https://stackoverflow.com/questions/6750581/using-rendertargetbitmap-to-save-a-portion-of-the-displayed-images)

# android - 如何将 HSQL（基于文件）与我的 android 应用程序连接？

> ID：11010178
> 
> 赞同：3
> 
> 时间：2012-06-13T07:36:08.867
> 
> 标签：android, database, hsqldb

您好，我在将我的 android 应用程序连接到 HSQLDB 时遇到问题。

第一个问题：

我应该使用 HSQLDB 的特定 android jar 还是可以使用任何 HSQL jar？

第二个问题：

如果我可以使用提供的罐子。我怎样才能使连接正常工作，我应该在 Class.forName("") 中放置什么，因为我在使用时遇到 ClassNotFoundException 错误：Class.forName("org.hsqldb.jdbc.JDBCDriver") 或 Class.forName ("org.hsqldb.jdbc.JDBCDriver").newInstance() ？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-02T15:22:54.310

我已经能够在 Android 4.1 中建立与 HSqlDB 的连接。

任何希望在 Eclipse 中执行此操作的人，请确保您的库中有 hsqldb.jar 并确保它已导出。所有这些都在 Eclipse 中的 Project > Java Build Path 中。

我能够建立连接，并且它创建了一组新的数据库文件。我正在使用基于文件的数据库。具体来说，我正在为 Ouya 构建一个 LibGDX 游戏，但它应该适用于任何 android 项目。运行 Hsql 的代码与 Android 项目在一个完全不同的项目中，因此我需要将它作为两者的库，并将其从 Android 项目中导出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-21T05:44:21.340

这已经很多年了，但我想我找到了问题所在。您需要确保拥有为适合您的 Android 目标版本的 jdk 编译的 hsqldb.jar。就我而言，我需要下载 hsqldb-2.6.0-jdk6.jar。在我发布此内容时，Android 11 (30) 仅支持 jdk 8。hsqldb.jar 的当前“最新”发布版本 (2.6) 为 11。

# javascript - sinon.match 出现未定义，缺少正确的文件？

> ID：11010179
> 
> 赞同：0
> 
> 时间：2012-06-13T07:36:13.147
> 
> 标签：javascript, testing, sinon

我试图使用`sinon.match`，但注意到[来自 sinon 网站的下载链接](http://sinonjs.org/releases/sinon-1.3.4.js)似乎没有`match`。

[http://jsfiddle.net/GccH5/](http://jsfiddle.net/GccH5/)

然后我尝试`match`从[GitHub repo](https://github.com/cjohansen/Sinon.JS)中包含 lib ：

[http://jsfiddle.net/GccH5/1/](http://jsfiddle.net/GccH5/1/)

然后它抱怨：`Uncaught TypeError: Object #<Object> has no method 'typeOf'`.

我尝试使用 GitHub 的 sinon：

[http://jsfiddle.net/GccH5/2/](http://jsfiddle.net/GccH5/2/)

但是现在，看来我自己需要包括间谍、存根等？例如，我怎样才能将所有内容编译成 1 个缩小文件？或者推荐的使用sinon的方法是什么？我认为它可能是通过 node/npm/require ......但我没有在工作中使用它们...... :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T00:33:32.433

[似乎](https://groups.google.com/forum/?fromgroups#!topic/sinonjs/gB49z4RkvKI)该文档意外地提前发布了下一个版本。您可以从这里下载预览版本[http://sinonjs.org/releases/sinon-next.js](http://sinonjs.org/releases/sinon-next.js)或者如果您使用的是节点，您可以[从 github 下载主源](https://github.com/cjohansen/Sinon.JS/downloads)并将其复制到您的 node_modules 文件夹中。

我有一个相当大的测试套件，我都在上面测试过，但还没有出现任何问题。

# c# - 人脸、情感和语音识别

> ID：11010180
> 
> 赞同：6
> 
> 时间：2012-06-13T07:36:18.413
> 
> 标签：c#, .net, voice-recognition, face-recognition

我正在寻找一种好的人脸、情感和语音识别方法`C#`。对于人脸识别，我很早就使用 Emgu CV，它不准确，并且在弱光条件下性能非常低。我还需要找到用户的情绪。不管是悲伤还是快乐。但我发现 Emgu CV 并不容易。

同样对于语音识别，我还没有找到任何解决方案，我找到了语音识别，但这不是我需要的。

我不想使用任何在线 API。任何人都可以建议我使用任何 SDK 或算法来实现面部、情感和语音识别吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T09:03:07.380

# 人脸识别

*   [在这里](http://facta.junis.ni.ac.rs/eae/fu2k71/9caleanu.pdf)，您可以查看介绍性 pdf，特别是查看参考资料以获取更多详细信息。
*   [在这里](http://www.shervinemami.co.cc/faceRecognition.html)，您可以找到一个很好的教程和演示程序，其中包含免费的源代码，用于从网络摄像头（也在 OpenCV 中）实时执行人脸检测和人脸识别。
*   特征脸和[人脸识别](http://en.wikipedia.org/wiki/Eigenface)[主页](http://www.face-rec.org/)。
*   您可以下载[CSU 人脸识别评估系统 5.1 版](http://www.cs.colostate.edu/evalfacerec/algorithms5.php)。
*   一些关于[人脸检测](http://ycode.org/index.php?option=com_content&view=article&id=7:face-detection-intro-chapter-1&catid=3:java&Itemid=7)的文章。
*   来自代码项目：[实时多人脸检测和识别](http://www.codeproject.com/Articles/239849/Multiple-face-detection-and-recognition-in-real-ti)-[具有皮肤和运动分析的人脸检测 C++ 库](http://www.codeproject.com/Articles/21110/Face-Detection-C-Library-with-Skin-and-Motion-Anal)- [C# 中的人脸检测](http://www.codeproject.com/Articles/39060/Face-Detection-in-C)-[使用 OpenCV 进行人脸和眼睛检测](http://www.codeproject.com/Articles/23191/Face-and-Eyes-Detection-Using-OpenCV)。

# 语音识别

只需看看[System.Speech.Recognition 命名空间](http://msdn.microsoft.com/en-us/library/system.speech.recognition.aspx)（看看[这个](https://stackoverflow.com/a/227217/995246)和[这个](https://stackoverflow.com/a/350542/995246)答案）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T07:53:14.753

看来你需要 Kinect。 [http://www.microsoft.com/en-us/kinectforwindows/develop/](http://www.microsoft.com/en-us/kinectforwindows/develop/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-08T20:47:14.557

我知道这个问题很老了，虽然我想为它做出贡献，因为我也在研究类似的应用程序

对于面部、情感和语音识别，现在有很多可用的，在下面找到一些选项

1）使用OpenCV进行人脸检测和识别：http: [//ahmedopeyemi.com/main/face-detection-and-recognition-in-c-using-emgucv-3-0-opencv-wrapper-part-1/](http://ahmedopeyemi.com/main/face-detection-and-recognition-in-c-using-emgucv-3-0-opencv-wrapper-part-1/)

优点：开源所以基本上是免费的。您可以修改代码以满足您的需要。支持多个平台。

缺点：准确度可以忍受，但不是很好。这可以通过根据您的需要修改库来解决。

2）人脸检测与情感识别：试试微软认知服务API

亲：非常准确。它包括许多其他服务，例如 NLP、Speech to Text、Text to Speech、计算机视觉、RT 语言翻译等。准确性很高，因为服务托管在云上，并且正在针对每个数据输入进行培训。

缺点：付费解决方案。有点贵。您必须分别为每项服务付费。

3）语音识别：Google Voice API Pro：类似于MS认知服务。噪声的准确性更好。缺点：付费。可能不适合一次性销售的商业产品

4）语音识别和NLP：wit.ai/api.ai Pro：免费使用。可以使用来自其他公共应用程序的数据。准确性很好。骗子：我没找到

尝试更多链接，如下所示。可能有点帮助。

基于 MS Face API 的安全系统 [https://www.hackster.io/peejster/facial-recognition-security-system-c6ca6c](https://www.hackster.io/peejster/facial-recognition-security-system-c6ca6c)

# magento - 将自动生成的密码发送给特定组用户

> ID：11010185
> 
> 赞同：0
> 
> 时间：2012-06-13T07:36:47.257
> 
> 标签：magento

我创建了一个`customer group`命名`corporate users`并将批量电子邮件上传到该组。现在我需要将自动生成的密码发送给`corporate users`用户组下的所有用户。该用户组的 ID 为“4”。

到目前为止，我尝试使用[http://www.magentocommerce.com/boards/viewthread/67065/](http://www.magentocommerce.com/boards/viewthread/67065/)

但是这个对我不起作用。有没有人经历过这些问题。

任何解决方案都非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T11:56:16.537

如果这不能直接起作用，那应该是一个开始。

```
<?php
ini_set('display_errors',true);
include 'app/Mage.php';
Mage::setIsDeveloperMode(true);

Mage::app();

$coll = Mage::getResourceModel('customer/customer_collection');
// or $coll = Mage::getModel('customer/customer')->getCollection();
/* @var $coll Mage_Customer_Model_Resource_Customer_Collection */
/* or Mage_Customer_Model_Entity_Customer_Collection < CE1.6 */
$coll->addFieldToFilter('group_id',4);

/*
 * Use the SPL IteratorAggregate implementation of Magento collections.
 * @var $customer Mage_Customer_Model_Customer
 * @see Mage_Adminhtml_CustomerController->saveAction()
 */
foreach ($coll as $customer) {
    $customer->setForceConfirmed(true);
    $sendPassToEmail = true;
    $customer->setPassword($customer->generatePassword());
    $customer->save();
    $customer->sendNewAccountEmail('registered', '', $customer->getStoreId());
} 
```

# ios - 使用以编程方式创建的自定义 UITableViewController 管理 UITableView

> ID：11010187
> 
> 赞同：4
> 
> 时间：2012-06-13T07:36:51.057
> 
> 标签：ios, uitableview, ios5, iboutlet

我在 iOS5 上使用 XCODE 4.2。

我创建了一个 UITableViewController 自定义，称为选择器。这是课堂内容：

```
NSMutableArray *_nameCollection;
NSMutableArray *_imageCollection; 
```

每个有 2 个元素。效果很好。如果我以编程方式创建 UITableview，它会正确显示数据。

在视图中，我声明了类（内部`(void)viewDidLoad`）：

```
self.Picker = [[Picker alloc] initWithStyle:UITableViewStylePlain];
_Picker.delegate = self;
PickerTableViewIB = _Picker.tableView;   // Try to link using a IBOutlet 
```

PickerTableViewIB 是来自 Tableview 的 Outlet，使用 Interface Builder 在子视图中创建。

什么不见​​了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T00:52:14.887

您是否也在设置数据源？表格视图需要它来获取要填充的数据。否则`cellForRow`将不会调用该方法，并且不会填充您的单元格。

```
_Picker.dataSource = self; 
```

在设置数据源之后调用也是一个好主意`[self.Picker reloadData];`。

# jquery - 使用jquery进行更改后jquery命令不刷新

> ID：11010188
> 
> 赞同：1
> 
> 时间：2012-06-13T07:36:53.817
> 
> 标签：jquery, html

我已经制作了一个购物车并且购物车有删除项目按钮，但是 jQuery 无法从购物车中删除项目。我在这里缺少一些基本的东西吗？

我已经`remove1`为删除按钮图像上课并使用以下 jQuery ......即使我没有收到警报。

HTML：

```
<img src='remove.gif' class='remove1'> 
```

JS：

```
$(".remove1").click(function(){
    alert("hii");
    $(this).parent().remove();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T07:40:29.997

```
$(document).ready(function(){
 $("body").delegate('.remove1','click',function(){
              alert("hii");
              $(this).parent().remove();
              });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T07:45:17.197

如果您正在动态添加按钮，请尝试以下操作（需要更新版本的 jQuery）：

```
$(document).on("click",".remove1", function(){
    alert("hii");
    $(this).parent().remove();
}); 
```

否则，您将需要使用委托。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T07:59:54.760

试试这个

```
$(".remove1").live('click', function(){
    alert("hii");
    $(this).parent().remove();
}); 
```

# .net - 发生 TimeoutException 时从 Silverlight 检索 WCF 请求的参数

> ID：11010203
> 
> 赞同：0
> 
> 时间：2012-06-13T07:38:03.930
> 
> 标签：.net, wcf, silverlight, silverlight-4.0, timeoutexception

我有一个 Silverlight 项目调用 WCF 服务。服务方法 GetData 有一个参数 dataID，通过 GetDataAsync 调用，并由具有函数 BeginGetData 和 EndGetData 的自动创建的类处理。在某些情况下，调用会在 EndGetData 中引发 TimeoutException（这很好，它自己调用某些第三方服务的 WCF 服务，有时它们可​​能已关闭或有问题，所以我不想增加超时值）。

我想做的是能够使用发送到 GetDataAsync 的 dataID 采取行动（例如安排对 GetData 的新调用或向用户显示适当的错误消息，指示哪些数据流失败）。如何才能做到这一点？如果我在 EndGetData 中设置断点，则 IAsyncResult 类型的结果参数将是一个 System.ServiceModel.Channels.ServiceChannel.SendAsyncResult 对象，该对象具有 RPC 属性，我可以在调试时找到该参数，但该类不可用代码，因为它被声明为 Friend。

这是可能的还是有人对如何以另一种方式实现我想要的行为有想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:05:58.117

而是实现应该由 Visual Studio 自动生成的 Completed EventHandler。您还可以使用自己的 userState 值调用。

```
void GetData(int dataID)
{
  client.GetDataCompleted += GetDataCompleted;
  client.GetDataAsync(dataID, dataID); //the 2nd param being the userState object
}

void GetDataCompleted(object sender, GetDataCompletedEventArgs e)
{
  var dataId = (int)e.UserState;
} 
```

如果发生错误，EventArgs 也将包含异常：

```
if (e.Error != null)
  throw e.Error; 
```

避免更改/使用自动生成的方法。

# sql - 如何获取属于 Rooms SQL 的 Roomattributes 描述

> ID：11010204
> 
> 赞同：3
> 
> 时间：2012-06-13T07:38:05.007
> 
> 标签：sql, sql-server-2008

我有 3 个表是我的 SQL 数据库：

```
First Table: Room: ID <pk>, Roomname
Second Table: RoomRelationsship: ID<pk>, Room_ID <fk>, Roomattributes_ID<fk>
Third Table: Roomattributes: ID<pk>, Attributename 
```

我如何获得属于房间的房间属性。我需要一个 SQL 查询。

先感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T07:42:16.437

```
SELECT Room.ID, Room.Roomname, Roomattributes.Attributename 
FROM Room 
INNER JOIN RoomRelationsship ON RoomRelationsship.Room_ID = Room.ID
INNER JOIN Roomattributes ON RoomRelationsship.Roomattributes_ID = Roomattributes.ID 
```

# java - 无法实例化活动 ComponentInfo：InstantiationException

> ID：11010210
> 
> 赞同：1
> 
> 时间：2012-06-13T07:38:29.327
> 
> 标签：java, android

我收到以下错误。请帮我解决它。

```
06-13 13:08:00.214: E/AndroidRuntime(549): FATAL EXCEPTION: main
06-13 13:08:00.214: E/AndroidRuntime(549): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.redial/com.redial.PopupDialogActivity}: java.lang.InstantiationException: com.redial.PopupDialogActivity
06-13 13:08:00.214: E/AndroidRuntime(549):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
06-13 13:08:00.214: E/AndroidRuntime(549):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
06-13 13:08:00.214: E/AndroidRuntime(549):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
06-13 13:08:00.214: E/AndroidRuntime(549):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
06-13 13:08:00.214: E/AndroidRuntime(549):  at android.os.Handler.dispatchMessage(Handler.java:99)
06-13 13:08:00.214: E/AndroidRuntime(549):  at android.os.Looper.loop(Looper.java:123)
06-13 13:08:00.214: E/AndroidRuntime(549):  at android.app.ActivityThread.main(ActivityThread.java:3683)
06-13 13:08:00.214: E/AndroidRuntime(549):  at java.lang.reflect.Method.invokeNative(Native Method)
06-13 13:08:00.214: E/AndroidRuntime(549):  at java.lang.reflect.Method.invoke(Method.java:507)
06-13 13:08:00.214: E/AndroidRuntime(549):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-13 13:08:00.214: E/AndroidRuntime(549):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-13 13:08:00.214: E/AndroidRuntime(549):  at dalvik.system.NativeStart.main(Native Method)
06-13 13:08:00.214: E/AndroidRuntime(549): Caused by: java.lang.InstantiationException: com.redial.PopupDialogActivity
06-13 13:08:00.214: E/AndroidRuntime(549):  at java.lang.Class.newInstanceImpl(Native Method)
06-13 13:08:00.214: E/AndroidRuntime(549):  at java.lang.Class.newInstance(Class.java:1409)
06-13 13:08:00.214: E/AndroidRuntime(549):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
06-13 13:08:00.214: E/AndroidRuntime(549):  at android.app.ActivityThread.performLaunchActivity(ActivityThread. 
```

# javascript - 连接两个 Ajax 请求

> ID：11010211
> 
> 赞同：0
> 
> 时间：2012-06-13T07:38:31.580
> 
> 标签：javascript, ajax, function, callback, facebook-javascript-sdk

我还是 JS 的新手：我在连接两个 ajax 请求时遇到了麻烦。第一个很简单：

向 fb 询问用户 ID：

```
 FB.api('/me', function(user) {
          if (user) {
          }
        }); 
```

在自定义 fb 对象上发布自定义 facebook 操作：

```
 function myfunction()
  {
      FB.api(
        '/me/fb:myaction',
        'post',
        { myobject: '/object/<%=@obj.id%>' },
        function(response) {
           if (!response || response.error) {
              console.log('Error occured');
           } else {
              console.log('FB POST was successful! Action ID: ' + response.id);
              $.ajax({
                type: "POST",
                url: "/record_action",
                data: { facebook_id: "John", item_id: "<%= @candidate.id %>" },
                dataType: 'json',
                success: function(data) {
                      console.log(data);
                   }
              }).done(function( msg ) {
                console.log(msg);
              });
           }
        });
  } 
```

如何保存 user.facebook_id 并将其传递给 myfunction() 的调用。当我尝试类似的事情时：

```
 FB.api('/me', function(user) {
          if (user) {
          myvar = user.facebook_id
          }
        }); 
```

并尝试将 myvar 传递给 myfunction 调用它不起作用。我敢肯定这是非常微不足道的。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T07:59:57.703

更好的答案是使用闭包（可能是第一个查询的成功函数）来捕获这个答案，并在该闭包内完成其余的工作。

不太有效（但在您学习时可能更实用）是将数据放在两个调用之间的全局变量中。但是，JavaScript 中的全局变量存在无数问题，如果您不打算完全控制页面上运行的所有脚本，就应该像瘟疫一样避免这些问题。

# iphone - TBXML“找不到类方法 tbXMLWithURL”

> ID：11010213
> 
> 赞同：0
> 
> 时间：2012-06-13T07:38:36.680
> 
> 标签：iphone, ios, xcode, macos, tbxml

我尝试使用 TBXML 并收到此错误

> TBXML“找不到类方法+tbXMLWithURL”

我尝试如示例

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{

    TBXML * tbxml = [[TBXML tbxmlWithURL:[NSURL URLWithString:@"http://www.w3schools.com/XML/note.xml"]] retain];    

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T07:52:51.533

您的代码和错误中有两个不同的内容：

> TBXML“找不到类方法 + **tbXMLWithURL ”**

在您的代码中：

> TBXML * tbxml = [[TBXML **tbxmlWithURL** :[NSURL URLWithString:@"http://www.w3schools.com/XML/note.xml"]] 保留];

从 TBXML [api](http://www.tbxml.co.uk/TBXML/API.html)：

> `- (id)initWithURL:(NSURL*)aURL`实例化一个 TBXML 对象，然后下载并解析给定 URL 的 XML 文件。以下代码实例化一个 TBXML 对象并解析来自 w3schools.com 的 note.xml 文件。

我认为你想要什么：

```
TBXML *tbxml = [[TBXML alloc] initWithURL:[NSURL URLWithString:@"http://www.w3schools.com/XML/note.xml"]]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T07:54:30.127

我对 TBXML 不是很熟悉，但简单浏览一下该站点，我不会：

```
TBXML* tbxml = [[TBXML alloc] initWithURL:[NSURL URLWithString:@"http://www.w3schools.com/XML/note.xml"]]; 
```

会更好？

# c# - 用自定义处理程序替换 wix 默认欢迎的单击事件

> ID：11010216
> 
> 赞同：2
> 
> 时间：2012-06-13T07:38:54.973
> 
> 标签：c#, installation, wix

在 wix 中：我想将我的安装程序欢迎页面的操作替换为 SpecialDlg 而不是 LicenseAgreementDlg。但使用此代码：

```
<Publish Dialog="WelcomeDlg" Control="Next" Event="NewDialog" Value="SpecialDlg" >NOT Installed</Publish> 
```

但是这一行不会替换 ControlEvent 表中的元组，而是创建新的元组而不是替换。问题是：Next 按钮的旧动作没有被新动作取代。:(

![在此处输入图像描述](../Images/86518891924ff96be2995e9db122b3d9.png)

感谢专家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T11:53:28.423

按钮单击处理在您使用[UIRef](http://wix.sourceforge.net/manual-wix2/wix_xsd_uiref.htm)元素引用的 UI 序列中定义。

[您可以从wix 源](http://wix.codeplex.com/SourceControl/list/changesets?branch=wix36)复制该 UI 序列，根据自己的需要对其进行修改，然后更新`UIRef`元素以指向您自己的自定义 UI 序列。

有关更多详细信息，请参阅我关于[插入](https://stackoverflow.com/questions/1810910/how-to-display-a-non-blocking-warning-for-the-operating-system-in-wix)类似情况的警告对话框的问题/答案（虽然有点复杂，因为我只想在某个条件为真时才插入它）。

# java - 使用低延迟协议的推送机制

> ID：11010217
> 
> 赞同：0
> 
> 时间：2012-06-13T07:39:06.477
> 
> 标签：java, jakarta-ee, networking, protocols, real-time

我是一名 Java EE 开发人员。

我想问是否有人可以向我推荐可以处理大量连续信息的低延迟网络协议。

我正在尝试在两台机器之间实现推送机制，这些机器具有从机器 A 传输到机器 B 的数据负载。

任何建议都会更受欢迎（关于协议和/或推送机制）

我说的是实时系统。

推送将从服务器到客户端（1 到多个）。

我想补充一点，每个传输的数据包都很小。但是有大量的数据包必须以非常低的延迟连续传输。

更多要求： 1\. 客户端设备不在同一个网络中。（所以我猜 UDP 在这里不相关）我正在关注华尔街类型的延迟。如果我丢失了一个数据包，则无需重新发送它，因为它可能不再相关。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T07:58:14.813

为此，您需要套接字连接，就像聊天服务器一样。

我为此目的使用了 XMPP 服务器，在整个项目生命周期中都与服务器建立了单个套接字连接。服务器发送节和客户端解析它并执行相应的操作。
它在自定义推送通知方面非常成功，

您可以创建自己的服务器而不是使用 XMPP 服务器，但如果数以百万计，您应该使用 XMPP 服务器。它最适合实时通知。

如果您想要自己的套接字服务器然后创建一个套接字服务器和所需的客户端以连接到该服务器。您必须自己管理服务器上的所有连接。当您想发送数据时，请使用该连接发送/接收数据。

使用套接字的一个好处是客户端不需要使用相同的语言。

一个好的起点可能是 [http://biese.wordpress.com/2009/06/14/how-to-create-a-simple-java-socket-thread-server/](http://biese.wordpress.com/2009/06/14/how-to-create-a-simple-java-socket-thread-server/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T17:09:37.230

这不是一个容易回答的问题，因为延迟有很多部分。如果您构建发布-订阅方法，您应该查看多播协议或 UDP。

你有什么要求？这些设备是否在同一个平面网络上，您会跨越边界（防火墙、交换机、路由器）吗？所有这些小事都是大局的一部分。

一旦进入 UDP 和多播，您将需要处理数据包丢失、数据包重传、消息排序、消息完成以及许多其他需要处理的事情。这就是为什么大多数人购买像 Tibco 这样的产品和其他一些消息总线技术来处理这个问题。

如果您正在寻找华尔街类型的延迟，那么您将进入专用路由器/固件的范围。

您也没有真正定义延迟的含义。我收集了您对网络延迟的看法，它受到光速（对不起，这是法律！）在距离上的限制。

延迟也可以是您的代码响应某些事件的时间。

编辑1：

IP 组播是您最好的选择，因为它被很好地理解并且可以跨局域网路由，前提是您有一个体面的网络基础设施。

我看到一个开源项目[JGroups](http://www.jgroups.org/)看起来有一些东西。您可能还想查看 Actors [Remote Actors](http://doc.akka.io/docs/akka/1.3.1/java/remote-actors.html)，我对这两个项目都没有任何经验，因此您的里程可能会有所不同。

对于商业软件，我会考虑 Tibco。我不确定他们的产品包装了，但他们曾经有 Tib Rendezvous (Tib RV) 和一个较旧的产品（不记得我头顶上的名字），我用过两者来处理市场数据.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T15:34:54.300

关于 TIBCO RV，它使用 UDP 协议，但可以通过所谓的路由器守护程序跨越网络边界，因此这也是可能的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T15:59:05.547

这个问题通常使用某种[消息队列](http://en.wikipedia.org/wiki/Message_queue)来解决。

在 Java 世界中，有一个用于消息队列的标准 API，称为[JMS](http://www.oracle.com/technetwork/java/index-jsp-142945.html)，并且有许多实现可供选择，包括商业和开源的。我的公司最近决定开始使用[RabbitMQ](http://www.rabbitmq.com/)，因为它似乎是我们调查的实现中最灵活和最健壮的。[HornetQ](http://www.jboss.org/hornetq)以在众所周知的 JMS 实现中速度最快而著称。

还有一些不是 JMS 实现的消息队列；通常，它们更多地关注性能，而不是鲁棒性等特性。有趣的例子包括[OpenDDS](http://www.opendds.org/)和[ZeroMQ](http://www.zeromq.org/)。

我建议你看看HornetQ。我认为它应该非常接近您的需求。

编辑：我刚刚看到您的评论，您不想使用第三方实施，而是自己实施。那将是一个坏主意。不要那样做。使用良好的第三方实现。

# java - 使用JPA持久化时是否需要设置实体类的所有字段？

> ID：11010224
> 
> 赞同：1
> 
> 时间：2012-06-13T07:39:18.137
> 
> 标签：java, jpa, insert, nullpointerexception, persist

我正在尝试插入一个有 3 列的表。这个表的主键是许多表的外键，有很多一对多和多对多的关系。在尝试插入时，我设置了所有这些列，但还有一些其他的设置我不使用的方法。当我对这个类执行 em.persist 时，它会抛出 nullpointerexception。知道为什么要这样做吗？我还必须设置其他班级成员吗？

实体类如下

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package objectRelationalMapping;

import java.io.Serializable;
import java.util.List;
import javax.persistence.*;
import javax.validation.constraints.NotNull;
import javax.validation.constraints.Size;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlTransient;

/**
 *
 * @author jai
 */
@Entity
@Table(name = "entitymain")
@XmlRootElement
@NamedQueries({
    @NamedQuery(name = "Entitymain.findAll", query = "SELECT e FROM Entitymain e"),
    @NamedQuery(name = "Entitymain.findByUuid", query = "SELECT e FROM Entitymain e WHERE e.uuid = :uuid"),
    @NamedQuery(name = "Entitymain.findByEntityname", query = "SELECT e FROM Entitymain e WHERE e.entityname = :entityname")})
public class Entitymain implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @Basic(optional = false)
    @NotNull
    @Column(name = "uuid")
    private Integer uuid;

    @Size(max = 100)
    @Column(name = "entityname")
    private String entityname;

    @JoinTable(name = "successor", joinColumns = {
        @JoinColumn(name = "emmo_id", referencedColumnName = "uuid")}, inverseJoinColumns = {
        @JoinColumn(name = "successor_id", referencedColumnName = "uuid")})
    @ManyToMany
    private List<Entitymain> entitymainList;

    @ManyToMany(mappedBy = "entitymainList")
    private List<Entitymain> entitymainList1;

    @JoinTable(name = "predecessor", joinColumns = {
        @JoinColumn(name = "emmo_id", referencedColumnName = "uuid")}, inverseJoinColumns = {
        @JoinColumn(name = "predecessor_id", referencedColumnName = "uuid")})
    @ManyToMany
    private List<Entitymain> entitymainList2;

    @ManyToMany(mappedBy = "entitymainList2")
    private List<Entitymain> entitymainList3;

    @JoinTable(name = "operation", joinColumns = {
        @JoinColumn(name = "emmo_id", referencedColumnName = "uuid")}, inverseJoinColumns = {
        @JoinColumn(name = "operator_id", referencedColumnName = "operator_id")})
    @ManyToMany
    private List<Operators> operatorsList;

    @JoinTable(name = "nodes", joinColumns = {
        @JoinColumn(name = "emmo_id", referencedColumnName = "uuid")}, inverseJoinColumns = {
        @JoinColumn(name = "node_id", referencedColumnName = "uuid")})
    @ManyToMany
    private List<Entitymain> entitymainList4;

    @ManyToMany(mappedBy = "entitymainList4")
    private List<Entitymain> entitymainList5;

    @JoinTable(name = "entitytype", joinColumns = {
        @JoinColumn(name = "uuid", referencedColumnName = "uuid")}, inverseJoinColumns = {
        @JoinColumn(name = "oid", referencedColumnName = "uuid")})
    @ManyToMany
    private List<Entitymain> entitymainList6;

    @ManyToMany(mappedBy = "entitymainList6")
    private List<Entitymain> entitymainList7;

    @JoinColumn(name = "entity_kid", referencedColumnName = "entity_kid")
    @ManyToOne
    private EntityKind entityKid;

    @OneToOne(cascade = CascadeType.ALL, mappedBy = "entitymain")
    private Association association;

    @OneToMany(cascade = CascadeType.ALL, mappedBy = "targetId")
    private List<Association> associationList;

    @OneToMany(cascade = CascadeType.ALL, mappedBy = "sourceId")
    private List<Association> associationList1;

    @OneToMany(cascade = CascadeType.ALL, mappedBy = "entitymain")
    private List<Features> featuresList;

    @OneToMany(cascade = CascadeType.ALL, mappedBy = "lmpId")
    private List<Connector> connectorList;

    @OneToMany(cascade = CascadeType.ALL, mappedBy = "entitymain")
    private List<Attributes> attributesList;

    @OneToMany(cascade = CascadeType.ALL, mappedBy = "entitymain1")
    private List<Attributes> attributesList1;

    public Entitymain() {
    }

    public Entitymain(Integer uuid) {
        this.uuid = uuid;
    }

    public Integer getUuid() {
        return uuid;
    }

    public void setUuid(Integer uuid) {
        this.uuid = uuid;
    }

    public String getEntityname() {
        return entityname;
    }

    public void setEntityname(String entityname) {
        this.entityname = entityname;
    }

    @XmlTransient
    public List<Entitymain> getEntitymainList() {
        return entitymainList;
    }

    public void setEntitymainList(List<Entitymain> entitymainList) {
        this.entitymainList = entitymainList;
    }

    @XmlTransient
    public List<Entitymain> getEntitymainList1() {
        return entitymainList1;
    }

    public void setEntitymainList1(List<Entitymain> entitymainList1) {
        this.entitymainList1 = entitymainList1;
    }

    @XmlTransient
    public List<Entitymain> getEntitymainList2() {
        return entitymainList2;
    }

    public void setEntitymainList2(List<Entitymain> entitymainList2) {
        this.entitymainList2 = entitymainList2;
    }

    @XmlTransient
    public List<Entitymain> getEntitymainList3() {
        return entitymainList3;
    }

    public void setEntitymainList3(List<Entitymain> entitymainList3) {
        this.entitymainList3 = entitymainList3;
    }

    @XmlTransient
    public List<Operators> getOperatorsList() {
        return operatorsList;
    }

    public void setOperatorsList(List<Operators> operatorsList) {
        this.operatorsList = operatorsList;
    }

    @XmlTransient
    public List<Entitymain> getEntitymainList4() {
        return entitymainList4;
    }

    public void setEntitymainList4(List<Entitymain> entitymainList4) {
        this.entitymainList4 = entitymainList4;
    }

    @XmlTransient
    public List<Entitymain> getEntitymainList5() {
        return entitymainList5;
    }

    public void setEntitymainList5(List<Entitymain> entitymainList5) {
        this.entitymainList5 = entitymainList5;
    }

    @XmlTransient
    public List<Entitymain> getEntitymainList6() {
        return entitymainList6;
    }

    public void setEntitymainList6(List<Entitymain> entitymainList6) {
        this.entitymainList6 = entitymainList6;
    }

    @XmlTransient
    public List<Entitymain> getEntitymainList7() {
        return entitymainList7;
    }

    public void setEntitymainList7(List<Entitymain> entitymainList7) {
        this.entitymainList7 = entitymainList7;
    }

    public EntityKind getEntityKid() {
        return entityKid;
    }

    public void setEntityKid(EntityKind entityKid) {
        this.entityKid = entityKid;
    }

    public Association getAssociation() {
        return association;
    }

    public void setAssociation(Association association) {
        this.association = association;
    }

    @XmlTransient
    public List<Association> getAssociationList() {
        return associationList;
    }

    public void setAssociationList(List<Association> associationList) {
        this.associationList = associationList;
    }

    @XmlTransient
    public List<Association> getAssociationList1() {
        return associationList1;
    }

    public void setAssociationList1(List<Association> associationList1) {
        this.associationList1 = associationList1;
    }

    @XmlTransient
    public List<Features> getFeaturesList() {
        return featuresList;
    }

    public void setFeaturesList(List<Features> featuresList) {
        this.featuresList = featuresList;
    }

    @XmlTransient
    public List<Connector> getConnectorList() {
        return connectorList;
    }

    public void setConnectorList(List<Connector> connectorList) {
        this.connectorList = connectorList;
    }

    @XmlTransient
    public List<Attributes> getAttributesList() {
        return attributesList;
    }

    public void setAttributesList(List<Attributes> attributesList) {
        this.attributesList = attributesList;
    }

    @XmlTransient
    public List<Attributes> getAttributesList1() {
        return attributesList1;
    }

    public void setAttributesList1(List<Attributes> attributesList1) {
        this.attributesList1 = attributesList1;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (uuid != null ? uuid.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof Entitymain)) {
            return false;
        }
        Entitymain other = (Entitymain) object;
        if ((this.uuid == null && other.uuid != null) || (this.uuid != null && !this.uuid.equals(other.uuid))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "objectRelationalMapping.Entitymain[ uuid=" + uuid + " ]";
    }

} 
```

为了持久化，我在一个函数中执行此操作。我为每个对象创建了对象，并且没有编译错误。这些变量也正在设置中。

公共类 MapOntology {

```
@PersistenceContext(unitName = "mmdb-ejbPU")
private EntityManager em;

Entitymain entitymain = new Entitymain();
EntityKind entitykind = new EntityKind();
EntityKindFacade ekf;

public void persistOntology(EntityOntologyBeans objOntology) {

    //Integer uuid = new Integer(objEntityOntologyBeans.getUuid().getUuid());                
   // entitykind.setEntityKid(ekf.getkindId(objOntology.getEntitykind()));
   // em.flush();
    entitymain.setUuid(1);
    entitykind.setEntityKid(2);

    entitymain.setEntityname(objOntology.getEntityname());
    entitymain.setEntityKid(entitykind);

   em.getTransaction().begin();

    em.persist(entitymain);
    em.getTransaction().commit();

} 
```

它在上述函数的最后一行给出空指针异常。请帮忙

堆栈跟踪如下

```
WARNING: EJB5184:A system exception occurred during an invocation on EJB InsertTransaction, method: public java.lang.String transactions.InsertTransaction.insertOntology()
WARNING: javax.ejb.EJBException
    at com.sun.ejb.containers.BaseContainer.processSystemException(BaseContainer.java:5215)
    at com.sun.ejb.containers.BaseContainer.completeNewTx(BaseContainer.java:5113)
    at com.sun.ejb.containers.BaseContainer.postInvokeTx(BaseContainer.java:4901)
    at com.sun.ejb.containers.BaseContainer.postInvoke(BaseContainer.java:2045)
    at com.sun.ejb.containers.BaseContainer.postInvoke(BaseContainer.java:1994)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:222)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandlerDelegate.invoke(EJBLocalObjectInvocationHandlerDelegate.java:88)
    at $Proxy445.insertOntology(Unknown Source)
    at transactions.__EJB31_Generated__InsertTransaction__Intf____Bean__.insertOntology(Unknown Source)
    at servlet.NewServlet.processRequest(NewServlet.java:63)
    at servlet.NewServlet.doPost(NewServlet.java:101)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:688)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.NullPointerException
    at mappingProcess.MapOntology.persistOntology(MapOntology.java:69)
    at transactions.InsertTransaction.insertOntology(InsertTransaction.java:49)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.glassfish.ejb.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1052)
    at org.glassfish.ejb.security.application.EJBSecurityManager.invoke(EJBSecurityManager.java:1124)
    at com.sun.ejb.containers.BaseContainer.invokeBeanMethod(BaseContainer.java:5388)
    at com.sun.ejb.EjbInvocation.invokeBeanMethod(EjbInvocation.java:619)
    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:571)
    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.doAround(SystemInterceptorProxy.java:162)
    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.aroundInvoke(SystemInterceptorProxy.java:144)
    at sun.reflect.GeneratedMethodAccessor159.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:861)
    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    at com.sun.ejb.containers.interceptors.InterceptorManager.intercept(InterceptorManager.java:370)
    at com.sun.ejb.containers.BaseContainer.__intercept(BaseContainer.java:5360)
    at com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:5348)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:214)
    ... 31 more

SEVERE: javax.ejb.EJBException
    at com.sun.ejb.containers.BaseContainer.processSystemException(BaseContainer.java:5215)
    at com.sun.ejb.containers.BaseContainer.completeNewTx(BaseContainer.java:5113)
    at com.sun.ejb.containers.BaseContainer.postInvokeTx(BaseContainer.java:4901)
    at com.sun.ejb.containers.BaseContainer.postInvoke(BaseContainer.java:2045)
    at com.sun.ejb.containers.BaseContainer.postInvoke(BaseContainer.java:1994)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:222)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandlerDelegate.invoke(EJBLocalObjectInvocationHandlerDelegate.java:88)
    at $Proxy445.insertOntology(Unknown Source)
    at transactions.__EJB31_Generated__InsertTransaction__Intf____Bean__.insertOntology(Unknown Source)
    at servlet.NewServlet.processRequest(NewServlet.java:63)
    at servlet.NewServlet.doPost(NewServlet.java:101)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:688)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.NullPointerException
    at mappingProcess.MapOntology.persistOntology(MapOntology.java:69)
    at transactions.InsertTransaction.insertOntology(InsertTransaction.java:49)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.glassfish.ejb.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1052)
    at org.glassfish.ejb.security.application.EJBSecurityManager.invoke(EJBSecurityManager.java:1124)
    at com.sun.ejb.containers.BaseContainer.invokeBeanMethod(BaseContainer.java:5388)
    at com.sun.ejb.EjbInvocation.invokeBeanMethod(EjbInvocation.java:619)
    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:571)
    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.doAround(SystemInterceptorProxy.java:162)
    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.aroundInvoke(SystemInterceptorProxy.java:144)
    at sun.reflect.GeneratedMethodAccessor159.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:861)
    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    at com.sun.ejb.containers.interceptors.InterceptorManager.intercept(InterceptorManager.java:370)
    at com.sun.ejb.containers.BaseContainer.__intercept(BaseContainer.java:5360)
    at com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:5348)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:214)
    ... 31 more

SEVERE:     at com.sun.ejb.containers.BaseContainer.processSystemException(BaseContainer.java:5215)
SEVERE:     at com.sun.ejb.containers.BaseContainer.completeNewTx(BaseContainer.java:5113)
SEVERE:     at com.sun.ejb.containers.BaseContainer.postInvokeTx(BaseContainer.java:4901)
SEVERE:     at com.sun.ejb.containers.BaseContainer.postInvoke(BaseContainer.java:2045)
SEVERE:     at com.sun.ejb.containers.BaseContainer.postInvoke(BaseContainer.java:1994)
SEVERE:     at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:222)
SEVERE:     at com.sun.ejb.containers.EJBLocalObjectInvocationHandlerDelegate.invoke(EJBLocalObjectInvocationHandlerDelegate.java:88)
SEVERE:     at $Proxy445.insertOntology(Unknown Source)
SEVERE:     at transactions.__EJB31_Generated__InsertTransaction__Intf____Bean__.insertOntology(Unknown Source)
SEVERE:     at servlet.NewServlet.processRequest(NewServlet.java:63)
SEVERE:     at servlet.NewServlet.doPost(NewServlet.java:101)
SEVERE:     at javax.servlet.http.HttpServlet.service(HttpServlet.java:688)
SEVERE:     at javax.servlet.http.HttpServlet.service(HttpServlet.java:770)
SEVERE:     at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1542)
SEVERE:     at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
SEVERE:     at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
SEVERE:     at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
SEVERE:     at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
SEVERE:     at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
SEVERE:     at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
SEVERE:     at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
SEVERE:     at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
SEVERE:     at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
SEVERE:     at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
SEVERE:     at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
SEVERE:     at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
SEVERE:     at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
SEVERE:     at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
SEVERE:     at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
SEVERE:     at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
SEVERE:     at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
SEVERE:     at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
SEVERE:     at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
SEVERE:     at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
SEVERE:     at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
SEVERE:     at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
SEVERE:     at java.lang.Thread.run(Thread.java:722)
SEVERE: Caused by: java.lang.NullPointerException
SEVERE:     at mappingProcess.MapOntology.persistOntology(MapOntology.java:69)
SEVERE:     at transactions.InsertTransaction.insertOntology(InsertTransaction.java:49)
SEVERE:     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
SEVERE:     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
SEVERE:     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
SEVERE:     at java.lang.reflect.Method.invoke(Method.java:601)
SEVERE:     at org.glassfish.ejb.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1052)
SEVERE:     at org.glassfish.ejb.security.application.EJBSecurityManager.invoke(EJBSecurityManager.java:1124)
SEVERE:     at com.sun.ejb.containers.BaseContainer.invokeBeanMethod(BaseContainer.java:5388)
SEVERE:     at com.sun.ejb.EjbInvocation.invokeBeanMethod(EjbInvocation.java:619)
SEVERE:     at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
SEVERE:     at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:571)
SEVERE:     at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.doAround(SystemInterceptorProxy.java:162)
SEVERE:     at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.aroundInvoke(SystemInterceptorProxy.java:144)
SEVERE:     at sun.reflect.GeneratedMethodAccessor159.invoke(Unknown Source)
SEVERE:     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
SEVERE:     at java.lang.reflect.Method.invoke(Method.java:601)
SEVERE:     at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:861)
SEVERE:     at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
SEVERE:     at com.sun.ejb.containers.interceptors.InterceptorManager.intercept(InterceptorManager.java:370)
SEVERE:     at com.sun.ejb.containers.BaseContainer.__intercept(BaseContainer.java:5360)
SEVERE:     at com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:5348)
SEVERE:     at com.sun.ejb.containers.EJB 
```

LocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:214) 严重：... 31 更多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T07:56:01.400

通常，您必须调用数据库中所有不可为空的列的设置器。如果一列可以为空，则无需为其设置值。这和预期的一样。如果您错过了调用不可为空的数据库字段的设置器，您会看到不同的异常。NPE 可能由于您的代码中的错误而被抛出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T14:08:27.433

您只能在托管类上使用注入，例如 SessionBeans。您需要使用 Persistence、JNDI 查找或使用 SessionBean 来初始化 EntityManager。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T08:57:52.360

您正在使用`@PersistenceContext`注释注入您的 EntityManager。只有当您的客户端类`MapOntology`本身由容器管理时，才能执行此操作。

注释它`@Stateless`应该可以解决问题。

请参阅此[答案](https://stackoverflow.com/a/9447039/870122)以获取更多参考。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T20:03:08.450

我终于发现了。NEP 的原因是 entitymanager em 没有被初始化。要初始化它，您必须在声明包含 entitymanager 的类对象之前编写 @EJB 注释。它会停止给出 NEP 错误，并且不需要设置所有成员属性实体类只需确保设置为非空的列被赋予值（正确）。然后您可以将它们持久化并插入到数据库中。

# facebook - facebook 网站应用程序未在时间轴上为所有用户发布阅读活动

> ID：11010227
> 
> 赞同：0
> 
> 时间：2012-06-13T07:39:26.913
> 
> 标签：facebook, facebook-opengraph

我为我的网站 www.heyngine.com 创建了一个 facebook 网站开放图形应用程序。读取操作已提交并由 facebook 批准。当我从我的个人 facebook 帐户或我的网站 facebook 帐户使用它时，它工作得很好。当我尝试从 2-3 个其他 Facebook 帐户中使用它时，活动未在我的时间线上发布，也无法在活动日志下查看。

请注意，我的个人 fb 帐户未链接到任何应用程序角色（管理员、开发人员等）。

这是指向我的应用程序（网站）的链接：http: [//www.facebook.com/connect/uiserver.php?app_id=330267687026774&method=permissions.request&redirect_uri=http%3A%2F%2Fwww.heyngine.com%2Findex。 PHP％3Foption％3Dcom_content％26view％3Darticle％26id％3D1761099％253A --- 2 ---％26catid％3D133％253Awwwethnosgr％26Itemid％3D499％26fb_action_ids％3D382549068460477％26fb_action_types％3Dnews.reads％26fb_source％3Daggregation％26fb_aggregation_id％3D288381481237582＆RESPONSE_TYPE =token&display=page&auth_referral=1](http://www.facebook.com/connect/uiserver.php?app_id=330267687026774&method=permissions.request&redirect_uri=http%3A%2F%2Fwww.heyngine.com%2Findex.php%3Foption%3Dcom_content%26view%3Darticle%26id%3D1761099%253A---2---%26catid%3D133%253Awwwethnosgr%26Itemid%3D499%26fb_action_ids%3D382549068460477%26fb_action_types%3Dnews.reads%26fb_source%3Daggregation%26fb_aggregation_id%3D288381481237582&response_type=token&display=page&auth_referral=1)

请建议克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:06:02.300

您没有要求[publish_actions](https://developers.facebook.com/docs/authentication/permissions/#extended_perms)扩展权限。您需要此权限才能在时间轴或超集[publish_stream上发布操作](https://developers.facebook.com/docs/authentication/permissions/#extended_perms)

这就是为什么它没有在时间轴上发布。您可以在 firebug->net 选项卡中查看错误消息

> /**/ FB._callbacks.__gcb2({"error":{"message":"(#200) 需要扩展权限：publish_actions","type":"OAuthException","code":200}});

时间线截图 ![在此处输入图像描述](../Images/0ddd5342eec6bd6115cb973ca07f21b7.png)

# java - 是否有一种解决方法可以让 DateAxis 从一周的第一天开始绘制刻度？

> ID：11010228
> 
> 赞同：2
> 
> 时间：2012-06-13T07:39:37.610
> 
> 标签：java, jfreechart

当我创建一个需要带有周周期的轴的图表时，我遇到了这个问题。

当我设置 with 的刻度单位时`DateAxis`，`new DateTickUnit(DateTickUnitType.Day, 7)`它每 7 天显示一次刻度线。但是，刻度线的日期并非从一周的第一天开始。您可以在屏幕截图中观察此行为。

青色线`05-01 w18(May. 1, Week 18)`在刻度线下方`w18(Week 18)`，这是因为刻度线的日期`w18`实际上是 5 月 2 日，也就是星期三。

这使得图表看起来不正确，因为人们倾向于认为每个刻度都应该是一周的开始。

检查源代码后，我发现`DateAxis`一周不支持这种行为（反正没有周类型）。

我不能创建另一个`DateTickUnitType`，因为私有构造函数和`correctTickDateForPosition()`方法`DateAxis`也是私有的。我试图覆盖`nextStandardDate()`但没有得到满意的结果。

我怎样才能让`DateAxis`总是从一周的第一天开始画刻度线？

* * *

这是屏幕截图和示例代码

![带有 DateAxis 在周期间的图表](../Images/825da120013f03f84f51a6d0575bf50f.png)

需要 JFreeChart/JCommon

```
public class Main extends ApplicationFrame {

  public Main (String title) throws ParseException {
    super(title);
    JPanel chartPanel = createDemoPanel();
    chartPanel.setPreferredSize(new java.awt.Dimension(800, 600));
    setContentPane(chartPanel);
  }

  private static JFreeChart createChart(XYDataset dataset) {
    JFreeChart chart = ChartFactory.createXYLineChart("Week period in DateAxis", "X", "Y", 
        dataset, PlotOrientation.VERTICAL, true, true, false);

    DateAxis x = new DateAxis("X");
    x.setTickUnit(new DateTickUnit(DateTickUnitType.MONTH, 1, new SimpleDateFormat("MMM.")));

    DateAxis y = new DateAxis("Y");
    y.setTickUnit(new DateTickUnit(DateTickUnitType.DAY, 7, new SimpleDateFormat("MM-dd 'W'w.")));

    XYPlot plot = chart.getXYPlot();
    plot.setDomainAxis(x);
    plot.setRangeAxis(y);
    plot.setDomainGridlinesVisible(true);
    plot.setRangeGridlinesVisible(true);
    XYLineAndShapeRenderer renderer = (XYLineAndShapeRenderer) plot.getRenderer();
    renderer.setBaseShapesVisible(true);
    renderer.setBaseItemLabelGenerator(new StandardXYItemLabelGenerator("{2}", 
        new SimpleDateFormat("MMM."), new SimpleDateFormat("MM-dd 'w'w")));
    renderer.setBaseItemLabelsVisible(true);
    return chart;
  }

  private static XYDataset createDataset() throws ParseException {
    SimpleDateFormat df = new SimpleDateFormat("yyyy/MM/dd");

    String[] allDate = new String[]{
        "2012/03/27", "2012/04/03", "2012/04/10", 
        "2012/04/17", "2012/04/24", "2012/05/01"};

    String dateY1 = "2012/01/15";
    String dateY2 = "2012/02/15";
    String dateY3 = "2012/03/15";
    String dateY4 = "2012/04/15";
    String dateY5 = "2012/05/15";
    String dateY6 = "2012/06/15";

    XYSeriesCollection dataset = new XYSeriesCollection();
    for (String date : allDate) {
      XYSeries series = new XYSeries(date);

      series.add(df.parse(dateY1).getTime(), df.parse(date).getTime());
      series.add(df.parse(dateY2).getTime(), df.parse(date).getTime());
      series.add(df.parse(dateY3).getTime(), df.parse(date).getTime());
      series.add(df.parse(dateY4).getTime(), df.parse(date).getTime());
      series.add(df.parse(dateY5).getTime(), df.parse(date).getTime());
      series.add(df.parse(dateY6).getTime(), df.parse(date).getTime());
      dataset.addSeries(series);
    }
    return dataset;
  }

  public static JPanel createDemoPanel() throws ParseException {
    JFreeChart chart = createChart(createDataset());
    return new ChartPanel(chart);
  }

  public static void main(String[] args) throws ParseException {
    Main demo = new Main("Test");
    demo.pack();
    RefineryUtilities.centerFrameOnScreen(demo);
    demo.setVisible(true);
  }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T16:07:14.377

这是我`DateAxis`支持的周期间的版本（仅限）。

```
public static class WeeklyDateAxis extends DateAxis {

  private static final long serialVersionUID = 1L;
  private Locale locale;

  public WeeklyDateAxis(String label, TimeZone zone, Locale locale) {
    super(label, zone, locale);
    this.locale = locale;
  }

  @Override
  protected Date previousStandardDate(Date date, DateTickUnit unit) {
    Calendar cal = Calendar.getInstance(getTimeZone(), locale);
    cal.setTime(date);
    resetFieldBelowDay(cal);

    cal.set(Calendar.DAY_OF_WEEK, cal.getFirstDayOfWeek());
    return cal.getTime();
  }

  @Override
  protected Date nextStandardDate(Date date, DateTickUnit unit) {
    Date previous = previousStandardDate(date, unit);
    Calendar cal = Calendar.getInstance(getTimeZone(), locale);
    cal.setTime(previous);
    resetFieldBelowDay(cal);

    cal.add(Calendar.WEEK_OF_YEAR, 1);
    return cal.getTime();
  }

  private void resetFieldBelowDay(Calendar cal) {
    cal.clear(Calendar.MILLISECOND);
    cal.clear(Calendar.SECOND);
    cal.clear(Calendar.MINUTE);
    cal.set(Calendar.HOUR_OF_DAY, 0);
  }
} 
```

## 解释 ：

计算刻度时`DateAxis`，它将通过调用从最低值开始

```
nextStandardDate(getMinimumDate(), unit); 
```

, 哪里`getMinimumDate()`是图表的边缘值。然后它将继续使用日期的最后一个刻度作为输入来计算下一个日期，直到它达到最高可用日期。

所以我将时间设置为 中的一周的第一天`previousStandardDate()`，然后每次计算下一个刻度时，我都会在 的结果中添加一周`previousStandardDate()`。

该`resetFieldBelowDay()`部分只是为了消除一些可能导致线剂量与刻度线不一致的噪声数据。

这是我用来验证结果的另一个数据集，您可以简单地用我提供的示例代码替换它。

```
private static XYDataset createDataset() throws ParseException {
  SimpleDateFormat df = new SimpleDateFormat("yyyy/MM/dd");

  String[][] allDate = new String[][] {
      {"2012/03/25", "2012/03/29", "2012/03/28", "2012/03/27", "2012/03/27", "2012/03/27"},
      {"2012/04/01", "2012/04/02", "2012/04/06", "2012/04/06", "2012/04/06", "2012/04/06"},
      {"2012/04/11", "2012/04/12", "2012/04/08", "2012/04/10", "2012/04/10", "2012/04/10"},
      {"2012/04/15", "2012/04/14", "2012/04/15", "2012/04/18", "2012/04/19", "2012/04/19"},
      {"2012/05/01", "2012/05/02", "2012/05/08", "2012/05/04", "2012/05/04", "2012/05/04"},
      {"2012/05/12", "2012/05/12", "2012/05/18", "2012/05/14", "2012/05/14", "2012/05/14"},
      {"2012/05/22", "2012/05/22", "2012/05/28", "2012/05/28", "2012/05/28", "2012/05/30"},
  };

  String dateY1 = "2012/01/15";
  String dateY2 = "2012/02/15";
  String dateY3 = "2012/03/15";
  String dateY4 = "2012/04/15";
  String dateY5 = "2012/05/15";
  String dateY6 = "2012/06/15";

  XYSeriesCollection dataset = new XYSeriesCollection();
  for (String[] dateOfOneSeries : allDate) {
    XYSeries series = new XYSeries(dateOfOneSeries[0]);

    series.add(df.parse(dateY1).getTime(), df.parse(dateOfOneSeries[0]).getTime());
    series.add(df.parse(dateY2).getTime(), df.parse(dateOfOneSeries[1]).getTime());
    series.add(df.parse(dateY3).getTime(), df.parse(dateOfOneSeries[2]).getTime());
    series.add(df.parse(dateY4).getTime(), df.parse(dateOfOneSeries[3]).getTime());
    series.add(df.parse(dateY5).getTime(), df.parse(dateOfOneSeries[4]).getTime());
    series.add(df.parse(dateY6).getTime(), df.parse(dateOfOneSeries[5]).getTime());
    dataset.addSeries(series);
  }
  return dataset;
} 
```

## 结果 ：

![结果](../Images/a304ce387e283e5129da040e5c447ceb.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T13:59:18.077

通过覆盖我设法调整刻度线`previousStandardDate`的`DateAxis`星期几。

在您的示例中，数据显示为星期二，因此在每周第一天下方的代码中`Calendar`设置为星期二，这将数据线与刻度线对齐。

```
DateAxis y = new DateAxis("Y") {
  @Override
  protected Date previousStandardDate(Date date, DateTickUnit unit) {
    Date prevDate = super.previousStandardDate(date, unit);

    Calendar calendar = Calendar.getInstance();
    calendar.setTime(prevDate);

    int showDayOfWeek = Calendar.TUESDAY;
    calendar.setFirstDayOfWeek(showDayOfWeek);
    if (showDayOfWeek != calendar.get(Calendar.DAY_OF_WEEK)) {
      calendar.set(Calendar.DAY_OF_WEEK, showDayOfWeek);
    }

    return calendar.getTime();
  }
}; 
```

**[编辑：]**我刚刚意识到您实际上并不想对齐刻度线，而是在一周的实际第一天显示它们。解决方案是

```
DateAxis y = new DateAxis("Y") {    
  @Override
  protected Date previousStandardDate(Date date, DateTickUnit unit) {
    Date prevDate = super.previousStandardDate(date, unit);

    Calendar calendar = Calendar.getInstance(TimeZone.getDefault());
    calendar.setTime(prevDate);

    int firstDayOfWeek = calendar.getFirstDayOfWeek();
    if (firstDayOfWeek != calendar.get(Calendar.DAY_OF_WEEK)) {
      calendar.set(Calendar.DAY_OF_WEEK, firstDayOfWeek);
    }

    return calendar.getTime();
  }
}; 
```

# backbone.js - 取消绑定 jquery 中的事件

> ID：11010231
> 
> 赞同：1
> 
> 时间：2012-06-13T07:39:47.880
> 
> 标签：backbone.js, event-handling, jquery

> **可能重复：**
> [Backbone.js 视图无法正确解除绑定事件](https://stackoverflow.com/questions/6831362/backbone-js-view-cant-unbind-events-properly)

我有一个名为 Item 的 div，带有一个用于 touchend 的事件侦听器，因为 swipe.js 也用于我的指示器。现在**div#Item**里面有孩子，问题是如果我在**div#item**上监听 touchend ，它很难点击或点击**div#item**的孩子。我试图解开它，但没有运气。我正在使用主干，所以这是我的代码：

```
event: {
  "touchend #item" : "CheckIndex"
},

CheckIndex : function(e){
  e.stopPropagation();
  var _a = this.swipe.index+1;
  $("#item).unbind('touchend');
}, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T07:47:09.937

这就是我解决它的方法。

```
CheckIndex : function(e){
  e.stopPropagation();
  var _a = this.swipe.index+1;
  this.$el.unbind('touchend'); //instead of $("#item").unbind('touchend');
}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T07:54:22.483

是错字吗？您错过了项目的结束双引号

```
$("#item).unbind('touchend'); 
```

应该

```
$("#item").unbind('touchend'); 
```

# javascript - 如何在 Rails 中使用引导模式进行弹出注册？

> ID：11010232
> 
> 赞同：0
> 
> 时间：2012-06-13T07:39:50.180
> 
> 标签：javascript, ruby-on-rails, ajax, twitter-bootstrap, modal-dialog

我花了很多时间尝试使用 Devise gem 来实现这一点，但决定用另一种方式来实现——编写我自己的控制器。

我想要那个，如果注册或登录时出现错误，模态不会隐藏。

我想我应该渲染js，所以需要使用Ajax，我不知道。

我的简单控制器（我需要编辑它们，那里有错误）：

```
 def new
    @user = User.new
   end

   def create
     @user = User.new(params[:user])
  if @user.save
    redirect_to @user
   else
  render :js => "('#sign_up').modal('show');"//or something else I don't know
   end
  end 
```

和我的 application.html.erb 中的代码（我应该把它放在 new.js.erb 哪里？）：

```
 <%= link_to  "Sign_up", '#sign_up', { 'data-toggle' => 'modal', 'data-target' => "#sign_up"}%>

    <div id="sign_up" class="modal hide fade in" style="display: none;">
   <%= render :template => "users/new" %>
  </div> 
```

我收到错误：

```
 undefined method `model_name' for NilClass:Class 
```

提取的源代码（第 5 行附近）：

```
 3: <div class="row">
      4:   <div class="span6 offset3">
      5:     <%= form_for(@user) do |f| %>
..... 
```

**编辑：**

当我将@user 放入家庭控制器时（我的 root_path）

```
 class StaticPagesController < ApplicationController 
    def home
      @user = User.new 
    end    
 end 
```

这一切都奏效了，但它好吗？我想留在页面上，我点击注册。这个怎么做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T11:39:08.377

我没有尝试过，但我认为这对您尝试做的事情非常重要。

[https://github.com/plataformatec/devise/wiki/How-To:-Display-a-custom-sign_in-form-anywhere-in-your-app](https://github.com/plataformatec/devise/wiki/How-To:-Display-a-custom-sign_in-form-anywhere-in-your-app)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T07:53:31.300

我以类似的方式使用了模态，我在模态上渲染了页面，它对我有用

```
 <a data-toggle="modal" href="#myModal" class="myclass">Enquiry</a>
    <div class="modal hide fade" id="myModal">
        <div class="modal-header">
             <a class="close" data-dismiss="modal">×</a>
             <h3>Enquiry form</h3>
        </div>
        <%=render :template => "users/new"%> 
    </div> 
```

# javascript - Firefox 在通过 javascript 加载时不加载非安全脚本

> ID：11010235
> 
> 赞同：2
> 
> 时间：2012-06-13T07:39:55.230
> 
> 标签：javascript, http, https, cross-domain

[我在https://www.mysecure.com/page](https://www.mysecure.com/page)上有一个安全页面。

我想通过 javascript 动态加载[http://www.mydomain.com/myfile.js 。](http://www.mydomain.com/myfile.js)我们使用与谷歌分析相同的代码，只是我们总是通过 http 加载。

这适用于除 Firefox 之外的所有浏览器。任何想法为什么？

# jquery - ASP.NET MVC 3 jQuery 不显眼验证 - 字段错误重置

> ID：11010237
> 
> 赞同：0
> 
> 时间：2012-06-13T07:40:04.353
> 
> 标签：jquery, jquery-ui

我注意到在我正在处理的一个表单中，例如一个“数字”类型的文本框和另一个“jquery UI datepicker”类型的文本框，当提交表单并且这些字段中没有值时，会出现一个红色边框，放置这两个字段处于错误状态。

我更改了值并从这些字段中移除焦点，这些字段仍然显示红色边框，但是，当我再次提交时，它可以工作。

其他字段的行为如下，如果某个字段处于错误状态，我添加一些数据，退出该字段，红色边框被移除。

任何想法？谢谢

# javascript - 用 jquery 只读

> ID：11010239
> 
> 赞同：9
> 
> 时间：2012-06-13T07:40:15.297
> 
> 标签：javascript, jquery, html

我正在尝试将只读添加到所有输入，然后单击删除只读以使其适用于打字。所有输入部分的只读集都有效，但单击时删除无效，请帮忙。

我的代码：

```
<script language="javascript">
$(document).ready(function()
{
$('#secureFields :input').attr('readonly', true);

    $('.readonly').click(
    function()
    {
        if ($('.readonly').attr("readonly") == true)
        {
            $('.readonly').val('');
            $('.readonly').removeAttr("readonly");
        }           
    }); 
});
</script> 
```

html是这样的：

```
 <table class='table' id='secureFields'  >
        <tr>
            <td width=200>First Name:</td>
            <td><input readonly='readonly'  type='text'  name='firstname' size=30 class='required'/></td>
        </tr>
        <tr> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-13T07:48:31.297

你的意思是：

```
$("input").click(function() {
  if ( $(this).is('[readonly]') ) {
     $(this).removeAttr("readonly");
  } 
}); 
```

参见：[jsFiddle](http://jsfiddle.net/5gDtt/5/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T07:56:37.723

```
<html>

 <table class='table' id='secureFields'>
    <tr>
        <td width=200>First Name:</td>
        <td><input type='text'  name='firstname' size=30 class='required'/></td>
    </tr>
</table>

   <button id="btnEnableInputs" type="button">Enable!</button>     

</html>

$(document).ready(function() {

$("#secureFields :input").each(function() {
   $(this).attr("readonly", true);
});

$("#btnEnableInputs").click(function() {
     $("#secureFields :input").each(function() {
          $(this).attr("readonly", false);
     });
 });
}); 
```

[http://jsfiddle.net/hfK8f/](http://jsfiddle.net/hfK8f/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-13T07:44:40.273

您指定的课程是“必需的”，所以`$('.readonly').attr("readonly") == true`应该是 `$('.required').attr("readonly") == true`，依此类推

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-13T07:50:38.773

重要提示：不要写`language="javascript"`但是`type="text/javascript"`

您必须选择只读的输入`attribute`，而不是`class`只读的。

因此，请执行以下操作：

```
$('input[readonly]').click( 
```

代替

```
$('.readonly').click( 
```

然后你只需要一行：

```
$(this).removeProp("readonly"); 
```

这是正确的代码：

```
$('input[readonly]').click(function(){
     $(this).removeProp("readonly");           
}); 
```

查看**[Examplefiddle](http://jsfiddle.net/aWbTE/1/)**

仅供参考：脚本不会被您停止`readonly`，他们可以简单地设置字段的值......

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-13T07:45:20.607

试试这个：

```
$('input').click(function() {
   $(this).prop('readonly', false)
}); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-13T07:48:40.450

试试这个

```
$(document).ready(function () {
    $('#secureFields :input').attr('readonly', true);
    $('input[readonly]').click(
        function (event) {
        if ($(event.currentTarget).attr("readonly") == "readonly") {
            $(event.currentTarget).removeAttr("readonly");
            $(event.currentTarget).val("");
        }
    });
}); 
```

这会在单击的输入上更改只读属性，希望对您有所帮助

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-06-13T08:05:16.417

```
comment the script part/**/ to check  readonly  mode

<body> 
<table class='table' id='secureFields'  >
        <tr>
            <td width=200>First Name:</td>
            <td><input readonly="readonly"  type='text'  name='firstname' size=30 class='required'/></td>
        </tr>
       </table>

</body>

<script type="text/javascript">
  $(document).ready(function()
{
$('#secureFields:input').attr('readonly', true);
$('.required').val('');

    $('.required').focus(
    function()
    {
        if ($('.required').attr("readonly") == true)
        {

            $('.required').removeAttr("readonly");
        }           
    }); 
});  
</script> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-13T07:54:53.507

也许您只想：

```
$('#secureFields :input').click(function() {
    $('input[readonly]').val('').removeAttr('readonly');        
}); 
```

由于 HTML 中没有`readonly`CSS 选择器，因此您的脚本在引用 后什么都不做`.readonly`，我必须对您正在尝试做的事情做出假设。以上操作将使所有只读字段变为非只读字段，并在单击任何输入时清除当前值。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-06-13T07:59:19.487

为了防止自动完成，您可以在输入标签或表单标签中添加 autocomplete="off"（如果同时设置，则输入值优先，因此您可以对单个标签使用 autocomplete="on"。

无论如何， .selector 选择具有特定类的元素，而不是属性。你可以：

使用属性选择器选择： input[readonly] 选择存在只读属性的输入，或 input[readonly="readonly"] 选择属性设置为自身的输入（首选第一个）。

事实上，您不需要只选择具有属性集的输入，您可以编写以下内容以在单击后立即删除只读属性：

```
$('input').click(function(){
  $(this).removeAttr('readonly')
} 
```

不过，您可能一直都想要 <input autocomplete="off" ...> 。

# ios - 如何使 UIScrollView 忽略单次触摸？

> ID：11010240
> 
> 赞同：3
> 
> 时间：2012-06-13T07:40:19.107
> 
> 标签：ios, uiscrollview, uiresponder

我有一个`UIScrollView`里面另一个`UIScrollView`。外部滚动视图处理分页，内部滚动视图处理缩放（它是一个支持缩放的图片库）。我需要内部滚动视图来忽略单个触摸，以便它们转到外部滚动视图。

这可以使用 来完成`[innerScrollView setUserInteractionEnabled:NO]`，但这显然也会关闭内部滚动视图上的捏合和平移手势。有没有办法让内部缩放视图处理捏合和平移手势并将所有其他事件转发到响应者链上？

PS。我总是可以带着一些代表团黑客来解决这个问题。我想知道是否有一种简单的方法可以使用常规响应链使其工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T08:53:54.703

我发现：单击事件最终会`touchesBegan:withEvent:`进入内部滚动视图内的内容视图。此内容视图未实现该方法，默认`UIView`实现将事件向上传递到响应者链。这里我们有内部滚动视图，它*确实*实现了`touchesBegan:withEvent:`. 这个实现吞下了单次点击，响应者链上没有任何东西。有帮助的是子类`UIScrollView`化并手动将修饰发送到响应者链：

```
- (void) touchesBegan: (NSSet*) touches withEvent: (UIEvent*) event
{
    [[self nextResponder] touchesBegan:touches withEvent:event];
} 
```

当然，至少`touchesEnded:withEvent:`这样转发也是好的。这可以满足我的一切需求。内部滚动视图可以处理缩放和平移，外部滚动视图接收单击事件。我什至可以放大然后平移到右侧，以便转到下一页。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T08:37:39.990

在 iOS 5 上，UIScrollViews 公开它们的`panGestureRecognizer`和`pinchGestureRecognizer`.

所以，如果你不需要支持旧的 iOS 版本，你可以试试`innerScrollView.panGestureRecognizer.minimumNumberOfTouches = 2`.

**编辑：这不起作用；scrollView 仍然吞下触摸。我将把它留在这里以供进一步参考。**

如果您根本不希望内部滚动视图处理平移，您可能（我没有尝试过）只需删除它的 panGestureRecognizer。

# c++ - C++ 将 const char* 复制到 char*

> ID：11010245
> 
> 赞同：3
> 
> 时间：2012-06-13T07:40:27.503
> 
> 标签：c++, char, strncpy

我有一个功能

```
ClassA::FuncA(const char *filePath) 
```

并希望将此 const char string* 复制到 char*！

我的解决方案：

```
char *argv[2];
int length = strlen(filePath);
argv[1] = new char(length +1);
strncpy(argv[1], filePath, length); 
```

在此之后，我在 argv[1] 中有所需的字符，还有其他一些未定义的字符！

文件路径：

> “C：\ Users \ Usera \parameter.xmlþîþÎþÎþÎþÎþÎþÎþÎþÎþÎþ”

这里有什么问题？带strlen的长度OK！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-13T07:43:32.833

像这样：

```
argv[1] = new char[length +1](); // () to value-initialize the array 
```

你的版本：

```
argv[1] = new char(length +1); 
```

仅分配一个`char`并将其值初始化为`length+1`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T07:55:40.510

您的代码中有两个问题：

*   您需要在复制后将长度加 1 以复制空字符（因为 strlen 仅返回不带空字符的字符数；请参阅[此处](http://www.cplusplus.com/reference/clibrary/cstring/strlen/)的更多信息）。所以将代码更改为：

    strncpy(argv[1], 文件路径, 长度 + 1);

*   您需要修复数组的初始化方式，因为您只初始化一个字符（我们假设您希望复制完整的字符串）。所以：

    argv[1] = 新字符[长度 + 1]();

笔记：

*   请在发布时也发布用于打印数据的代码，因为在很多情况下，此类问题取决于您调用打印数据的方式。
*   最后，您可能会考虑仅使用一个固定大小的数组，该数组已初始化为最大路径。对于以下[帖子中的 Windows 结帐中的最大路径大小](https://superuser.com/a/14887)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T08:21:38.953

问题是您使用的是`strncpy`，而不是`strcpy`. 而且您使用它的方式，它不会复制终止的`\0`.

在实践中，因为`strncpy`可能会留下一个没有`\0`终止符的字符串，所以最好避免它。在您的情况下，`strcpy`单独使用就可以了，因为您刚刚分配了足够大的缓冲区。在更一般的情况下，您可能必须使用`strlen`, 以确保您拥有的字符串适合目标缓冲区（不要忘记将 1 添加到结果中，对于`\0`）。

如果这种情况经常发生，您可能想要编写自己的版本`strncpy`，它可以工作（即保证终止`\0`，并且不会复制或写入不必要的字符）。就像是：

```
void
stringCopy( char* dest, int maxLength, char const* source )
{
    assert( maxLength > 0 );
    char* end = dest + maxLength - 1;
    while ( dest != end && *source != '\0' ) {
        *dest = *source;
        ++ dest;
        ++ source;
    }
    *dest = '\0';
} 
```

（这个函数实际上存在，`strcpy_s`在 C 2011 中的名称下，但它没有被广泛实现；微软有它，但我在其他地方没有看到它。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T07:45:23.377

`strncpy()`复制不超过`length`字符。`\0`在这样做时，不会复制终止。

# crystal-reports - 如何在 cyrtal 报告中显示单个报告

> ID：11010266
> 
> 赞同：0
> 
> 时间：2012-06-13T07:41:47.653
> 
> 标签：crystal-reports, reporting, crystal-reports-2010

我是使用水晶报告的新手。我已经尝试创建一个报告，但它看起来不像我想要的。我想要创建的是每个员工的个人报告，其中显示他们的姓名、年龄、出生日期、地址等信息。但是，水晶报告将在单个文档中显示每个员工的所有报告。有什么方法可以让每个员工的信息显示在一个文档中，就像如果我想查看他们的报告可以使用箭头导航到下一个员工信息一样？

顺便说一句，我使用 Microsoft SQL R2 为我的报告获取数据。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T05:53:35.353

嗨，这个问题还不清楚..据我所知，我建议..如果您在单个文档中设计一名员工的水晶报告并将存储过程附加到该报告中，您的问题就解决了..您将获得每个员工的详细信息。如果我正确理解您的问题，请订购这是答案，如果不是，请重复问题并进行更改，我可以理解谢谢

# ruby-on-rails - 加载页面时与 ws://localhost:9292/faye 的连接中断

> ID：11010272
> 
> 赞同：1
> 
> 时间：2012-06-13T07:42:33.963
> 
> 标签：ruby-on-rails, node.js, firefox, comet, faye

在 Firefox 的 Firebug 客户端我看到错误

```
The connection to ws://localhost:9292/faye was interrupted while the page was loading 
```

这是我的 application.js 文件：

```
$(function() {
    var faye = new Faye.Client('http://localhost:9292/faye');
    alert("connected.");
    faye.subscribe("/game/poker", function(data) {
        eval(data);
    });
}); 
```

这是我的 erb.js 文件：

```
<%= broadcast "/game/poker" do %>
<% @allowed && @user_hand && @game.table.size == 5 && @game.hasler == @game.user.name ? cc = @game.combo_cards(@user_hand) : cc = [1, 2, 3, 4, 5] %>
$("#table").empty().append("<div class='player-cards'>" + "<%= escape_javascript render :partial => "table_cards", :locals => {:cards => @game.table, :combo_cards => cc} %>" + "</div");
$("#deck-size").empty().append("<div class='deck-size'>" + <%= escape_javascript "#{@game.deck.size}" %> +"</div>");
$("#<%= @game.user.name %>_action").empty().append("<%= escape_javascript "#{@game.user.actions.last}" %>");
$("#<%= @game.bot.name %>_action").empty().append("<%= escape_javascript "#{@game.bot.actions.last}" %>");

<% unless @allowed && (@game.bot.moved && @game.user.moved) || @pfold == true %>
    $("#deal").hide();
<% end %>
<% if @game.to_call != 0 %>
    $("#check").hide();
    $("#call").show();
<% else %>
    $("#call").hide();
    $("#check").show();
<% end %>
<% unless !@pfold && !@allowed %>
    $("#fold").hide();
    $("#bet").hide();
    $("#small2").hide();
    $("#small4").hide();
    $("#small8").hide();
    $("#all_in").hide();
<% end %>
<% end %> 
```

问题是广播块内的任何东西都不起作用。浏览器响应只是空的。广播方式和 railscast 一样：

```
def broadcast(channel, &block)
    @action = {:channel => channel, :data => capture(&block)}
    @uri = URI.parse("http://localhost:9292/faye")
    Net::HTTP.post_form(@uri, :action => @action.to_json)
    puts "DEBUG::broadcasting channel"
end 
```

我做错了什么？请尽你所能提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T21:29:44.890

根据您的代码，我假设您不使用 websocket。在你的 application.js 上试试这个，这可能会奏效。让我知道

```
$(function() {
    var faye = new Faye.Client('http://localhost:9292/faye');
    alert("connected.");
    faye.subscribe("/game/poker", function(data) {
       eval(data);
    });

    faye.disable('websocket');

}); 
```

# java - Java JIT - 死代码消除的范围？

> ID：11010276
> 
> 赞同：2
> 
> 时间：2012-06-13T07:42:50.550
> 
> 标签：java, jit

我想知道 Java JIT 编译的使用。我的理解是它应该尝试编译出“死代码”。我想知道的是什么被归类为死代码。

例如 - 假设我将一个名为 debug 的运行时属性设置为 false。如果我的程序有一些代码来获取该属性，然后基于它执行方法，我想知道什么会被归类为死代码。

```
public static final boolean DEBUG

static {
    DEBUG = System.getProperties().containsKey("debug.enabled");
}

public static void logDebug(String msg) {
    if (DEBUG) {
        System.out.println("My Debug Message");
    }
}

public static void main(String args) {
    // 1) Check if DEBUG is true and log if 
    // it is.
    //
    if (DEBUG) {
        System.out.println("My Debug Message");
    }

    // 2) Call a method to perform logging, let it check
    // DEBUG
    //
    logDebug("My Second Debug Message");

} 
```

在 main 中，第一个 if 块检查 DEBUG。因为它是错误的，我假设 JIT 会意识到这个块永远不会执行，所以会将它编译为死代码。

我想知道，如果方法 logDebug 也会发生同样的情况 - JVM 是否仍会每次都进入该方法，或者它会理解该方法中没有发生任何事情并因此对其进行优化？

也许我对 JIT 工作原理的理解是完全错误的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T08:20:24.827

JIT 并不总是完全消除死代码。

相反，它所做的是优化不太可能出现的情况，因此它的成本几乎为零。这是因为 CPU 可以通过分支执行代码的推测执行，如果不采用该分支，则只有名义成本。即使只在某些时候采用分支（即它必须选择一个分支作为可能采用的分支），它也会这样做

如果由于某种原因这种变化，代码仍然会正确运行，如果相对较慢的话。JIT 可以检测到它所做的优化假设已经改变并重新优化代码。`-XX:+PrintCompilation`你可以看到它转储了它之前编译的方法并重新编译它。

简而言之，它使死代码几乎没有成本。

# ruby-on-rails - 如何允许在 ruby on rails 中裁剪和定位照片？

> ID：11010277
> 
> 赞同：1
> 
> 时间：2012-06-13T07:42:55.167
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2, carrierwave

因此，在用户个人资料上，我将有横幅空间，他们可以将照片上传到。我希望横幅内的空间充满照片。并非每个用户都擅长在 Photoshop 等中创建横幅，因此我想通过允许他们按比例调整照片大小并将其向左、向右、向上或向下放置，直到照片在横幅中展示了他们想要的方式。

但是，我想要一些限制，以阻止用户上传在横幅内看起来不太好的非常小的照片。我已经查看了似乎允许这样做的 google+，所以我想要做的一个完美的例子是 facebook 使用他们的时间线横幅照片上传选项做什么。

我目前在我的应用程序中使用carrierwave 进行所有照片处理。

任何让我开始的建议/解决方案将不胜感激。

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:04:13.580

您将需要某种客户端编辑器来制作横幅。我主要使用 Jquery UI 插件 ( [JqueryUI](http://jqueryui.com/home) )，它可以帮助您使用一些不错的方法。您可以轻松添加一些可拖动、调整大小或位置的功能。

用户完成横幅后，您可以将整个横幅上传到后端。对于 rails 中照片的存储和配置，我推荐使用 gem 'paperclip' ( [Paperclip](https://github.com/thoughtbot/paperclip) )。上传图片时，您可以在回形针中设置最小或最大尺寸。

# asp.net - 用于在同一个表中插入一行的输出参数

> ID：11010279
> 
> 赞同：2
> 
> 时间：2012-06-13T07:43:02.050
> 
> 标签：asp.net, sql-server, vb.net, sql-server-2008, ado.net

感谢您的帮助伙计们

我正在开发一个基于 Asp.net 的项目，我的要求是使用 MaterialType+ProductID 和 - 4digit 随机数的组合生成一个 PARTNO

注意：ProductID 是主键，也设置为输出参数

例如，如果材料类型为 500，生成的产品 ID 为 55，随机未生成 5434，则零件编号变为 555-5434

现在我的问题是如何将 partno 存储在同一张表中，我有点像那样尝试

```
 Connection.Open()
        Dim trn As SqlClient.SqlTransaction
        trn = Connection.BeginTransaction
        Using trn

            Dim sqlcode As New SqlParameter("@ProductID", Products.ProductID)
            sqlcode.Direction = ParameterDirection.InputOutput                 
            Using Command As New SqlCommand("Product_Write", Connection, trn)

                Command.CommandType = CommandType.StoredProcedure
                Command.Parameters.Add(sqlcode)                     Command.Parameters.AddWithValue("@MaterialType", Materialtype.MaterialTypeCode)
                Command.Parameters.AddWithValue("@CategoryID", category.CategoryId)
                Command.Parameters.AddWithValue("@ProductName", Products.ProductName)
                Command.Parameters.AddWithValue("@ProductDescription", Products.ProductDescription)
                Command.Parameters.AddWithValue("@ProductActive", Products.ProductActive)
                Command.Parameters.AddWithValue("@ProductImage", Products.ProductImage)
                Command.Parameters.AddWithValue("@PartNo", 0)

                Command.ExecuteNonQuery()
                Products.ProductID = CInt(sqlcode.Value)
                'Insert the part no 

                Dim random As New Random()
                Dim value As Integer = random.Next(9999)
                Dim PartNo As String = CType((Materialtype.MaterialTypeCode + Products.ProductID).ToString + "-" + value.ToString, String)

                'Dont know what to do 

                trn.Commit()

                Connection.Close()
            End Using
        End Using
    End Using
    Return Products
End Function

ALTER PROCEDURE [dbo].[Product_Write]
@ProductID bigint OUTPUT,
@MaterialType int,
@CategoryID bigint,
@ProductName VARCHAR(MAX),
@ProductDescription VARCHAR(MAX),
@ProductActive Bit,
@ProductImage VARCHAR(MAX),
@PartNo VARCHAR(30)
AS
IF (@ProductID=0)
BEGIN
INSERT INTO T_Product(
MaterialType,
CategoryID,
ProductName,
ProductDescription,
ProductActive,
ProductImage,
PartNo)
VALUES(
@MaterialType,
@CategoryID,
@ProductName,
@ProductDescription,
@ProductActive,
@ProductImage,
@PartNo)

SET @ProductID=SCOPE_IDENTITY()
END 
ELSE
 UPDATE T_Product SET
      MaterialType=@MaterialType,
      CategoryID=@CategoryID,
      ProductName=@ProductName,
      ProductDescription=@ProductDescription,
      ProductActive=@ProductActive,
      ProductImage=@ProductImage,
      PartNo=@PartNo
WHERE ProductID=@ProductID
                Please help me out 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:02:48.323

如果您可以更新存储过程，您将需要一些类似的东西

```
declare @id int
set @id = SCOPE_IDENTITY()
UPDATE <Table> Set PartNo = MaterialType + convert(varchar(max),@id) + convert(varchar(4),CEILING(9999*RAND())) Where ID = @id 
```

# android - 如何使用 Jquery mobile 将数据从一个页面发送到另一个页面？

> ID：11010292
> 
> 赞同：0
> 
> 时间：2012-06-13T07:43:51.693
> 
> 标签：android, jquery-mobile, jquery

> **可能重复：**
> [如何在 jQM 页面之间存储变量？](https://stackoverflow.com/questions/10739051/how-to-store-variable-beetween-jqm-pages)

我是 jquery mobile 的新手，对将数据发送到另一个页面有点困惑。在我的 html 文件中，它由 listview 组成。当我单击列表时，它需要重定向到另一个页面，同时我想将该列表中的数据发送到第二页。其实我的代码是..

民意调查.html

```
 <body>
    <section id="pollsscreen" data-role="page">
        <header data-role="header" > 
            <h1> Video </h1>
            <a href="index.html" data-role="button" data-icon="back" data-direction="reverse" data-transition="slide"> Back </a>
        </header>
        <div data-role="content">
            <ul id="pollslist" data-role="listview" data-theme="e" >
            </ul>
        </div>
    </section>
</body> 
```

Polls.js（我的 javascript 文件）

```
 var addPollsList = function addPollsList() {
     $("#pollslist").prepend("<li><a href='pollsdetails.html'>What is your name?</a></li>");
     $("#pollslist").prepend("<li><a href='pollsdetails.html'>Give review of new movie..</a></li>");  
     $("#pollslist").listview("refresh");      
} 
```

pollsdetails.html

```
 <section id="pollsdetailspage" data-role="page">
        <header data-role="header">   
            <h1> Polls </h1>
            <a href="polls.html" data-role="button" data-icon="back" data-direction="reverse" data-transition="slide"> Back </a>             
        </header> 
        <div data-role="content" class="pollsdetailsscreen">
            <p>Polls details page</p>
        </div>
    </section>    
</body> 
```

根据代码，一切正常。当我单击列表时，它会重定向到**“pollsdetails.html”**文件。但是在这里我不知道如何将数据发送到该 html 页面，我想将该数据设置为

pollsdetails.html 页面中的标记。谁能帮我这个.......

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:47:28.540

您可以为此使用全局变量..

在 Polls.js 中

```
var addPollsList = function addPollsList() {
 $("#pollslist").prepend('<li><a href="#" onclick="test('+Ur_data+')">What is your name?</a></li>');
 $("#pollslist").prepend('<li><a href="#" onclick="test2('+Ur_data+')">Give review of new movie..</a></li>');  
 $("#pollslist").listview("refresh"); 
```

}

```
function test1(data){
    // set urs global variable here
    global_variable = data;
     $.mobile.changePage( "pollsdetails.html");
}

function test2(data){
    // set urs global variable  2 here
    global_variable_2 = data;
     $.mobile.changePage( "pollsdetails.html");
} 
```

在 pollsdetails.js 中，您可以访问`global_variable`和`global_variable_2`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T15:19:22.150

我会选择 Localstorage

```
var userReview = {
                "Name":"Bob",
                "Review":"Awesome party movie!!",
                "MovieTitle":"Project X"
               };

            //Store the object in local storage
            localStorage.setItem('UserReview',JSON.stringify(userReview)); 
```

然后，当您导航到不同的页面时，您可以随时调用 localstorage 来获取信息。

```
var userReview = JSON.parse(localStorage.getItem("UserReview"));
var userName = userReview.Name;
var review = userReview.Review;
var movieTitle = userReview.MovieTitle; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T15:04:00.317

如果您尝试将简单的名称-值对传递到下一页，则可以使用查询字符串参数。

```
var addPollsList = function addPollsList() {
     $("#pollslist").prepend("<li><a href='pollsdetails.html?myparam=value1'>What is your name?</a></li>");
     $("#pollslist").prepend("<li><a href='pollsdetails.html?myparam=value2'>Give review of new movie..</a></li>");  
     $("#pollslist").listview("refresh");      
} 
```

# version-control - Mercurial：如何使每个版本分支

> ID：11010293
> 
> 赞同：1
> 
> 时间：2012-06-13T07:43:55.010
> 
> 标签：version-control, mercurial, branching-and-merging

当我们发布新版本时，我需要创建一个时间点分支。

所以我有所有开发的默认分支，以及每次向服务器发布新版本时的 V1、V2 等分支。

所以如果我有默认的开发分支。V1 在 Live 服务器上。V2 在测试服务器上。

如何处理以下情况：

*   V1发现了一个bug，需要在V1、V2、default中去改吗？

*   V2 在某个时间点制作并进入测试服务器，在默认情况下继续开发具有多个功能。在对 V2 进行一些测试后，该功能还没有完成，默认情况下的一些变更集应该合并回 V2 - 但不是所有的变更集？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T08:20:02.253

通常的方法是定位引入错误的变更集（在 V1 的分支点之前），并将修复作为该变更集的子项提交。这将引入一个新的头，然后您可以将其合并到您想要修复的分支中，在本例中为 V1、V2 和默认值。

这种方法称为“<a href="https://www.mercurial-scm.org/wiki/DaggyFixes" rel="nofollow noreferrer">daggy fixs”。

`graft`或者，您也可以在一个分支上修复它（例如，默认），然后使用命令将其挑选到其他分支上。但这不是很好，因为变更集将出现三次，如果您再次将其中两个分支合并在一起，可能会导致合并问题。

# boost - Boost线程无法正常睡眠，我错过了什么吗？

> ID：11010296
> 
> 赞同：0
> 
> 时间：2012-06-13T07:44:21.333
> 
> 标签：boost, real-time, boost-thread, thread-sleep

考虑以下示例，在 windows 7 icore7 笔记本电脑（VC++2010）和 ubuntu 64bit 12.04 lte gcc 4.6.3

```
#include <iostream>
#include <boost/date_time/posix_time/posix_time.hpp>
#include <boost/thread/thread.hpp>
typedef boost::posix_time::ptime Time;
typedef boost::posix_time::time_duration TimeDuration;
int main()
{
    Time t1;
    Time t2;
    TimeDuration dt;
    boost::posix_time::microseconds tosleep=boost::posix_time::microseconds(100);
    for(int i=0;i<10;i++){

        t1=boost::posix_time::microsec_clock::local_time();
        //std::cout <<i << std::endl; // on win7 without this all outputs are 0
        boost::this_thread::sleep( tosleep );

        t2=boost::posix_time::microsec_clock::local_time();

        dt = t2 - t1;
        long long msec = dt.total_microseconds();
        std::cout << msec << std::endl;
    }
    return 0;
} 
```

我原以为我的线程会持续休眠 100 微秒，但输出有点奇怪：

```
=========== AND OUTPUT ==================
arm2arm@cudastartub:~$ g++ -O3 sleepme.cpp -lboost_thread
arm2arm@cudastartub:~$ ./a.out
726
346
312
311
513
327
394
311
306
445 
```

boost有一些开销吗？对于微秒很重要的实时系统，我需要什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:52:23.397

On Windows one can't Sleep() less than 1 ms, so your sleep(tosleep) call is equivalent to sleep(0). (See also [this link](https://stackoverflow.com/questions/85122/sleep-less-than-one-millisecond))

Of course, `std::cout <<i << std::endl` would take some time...

# vba - Excel VBA Selection.replace 不替换所有内容

> ID：11010302
> 
> 赞同：2
> 
> 时间：2012-06-13T07:44:53.783
> 
> 标签：vba, excel

基本上我想做的是用VBA代码模仿替换按钮。我使用以下代码：

```
Private Sub CommandButton1_Click()
    Blad1.Activate
    Blad1.Cells.Select
    Selection.Replace What:=".", Replacement:=",", LookAt:=xlPart, _
        SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, _
        ReplaceFormat:=False
End Sub 
```

这会替换所有点，但在某些情况下，它会用空格而不是逗号替换点。为什么是这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T08:48:16.083

试试这个

```
Sub Sample()
    Dim oRange As Range, aCell As Range, bCell As Range
    Dim ws As Worksheet
    Dim ExitLoop As Boolean
    Dim SearchString As String, FoundAt As String
    On Error GoTo Err
    Set ws = Blad1
    Set oRange = ws.Cells

    oRange.NumberFormat = "@"

    SearchString = "."
    Set aCell = oRange.Find(What:=SearchString, LookIn:=xlValues, _
                LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
                MatchCase:=False, SearchFormat:=False)
    If Not aCell Is Nothing Then
        Set bCell = aCell
        Do While InStr(1, aCell.Formula, ".") > 0
            aCell.Formula = Replace(aCell.Formula, ".", ",")
        Loop
        Do While ExitLoop = False
            Set aCell = oRange.FindNext(After:=aCell)

            If Not aCell Is Nothing Then
                If aCell.Address = bCell.Address Then Exit Do
                Do While InStr(1, aCell.Formula, ".") > 0
                    aCell.Formula = Replace(aCell.Formula, ".", ",")
                Loop
            Else
                ExitLoop = True
            End If
        Loop
    End If
    Exit Sub
Err:
    MsgBox Err.Description
End Sub 
```

# c++ - 如何使用 libfacerec Opencv 库获取相似度百分比

> ID：11010303
> 
> 赞同：3
> 
> 时间：2012-06-13T07:44:58.633
> 
> 标签：c++, opencv, percentage, face-recognition

这可能是一个简单的问题，但我有点困惑，所以希望有人能正确指导我。

我正在使用 openCV libfacerec 的人脸识别库，它给出了很好的结果，但我需要估计相似度的百分比。如果我使用未知图像作为输入，那么它仍然会根据最后的距离值预测该人是否存在于系统中

```
 if(dist < minDist) {
        minDist = dist;
        minClass = _labels[sampleIdx];
    } 
```

我需要定义一些阈值，然后根据该阈值针对某个百分比或距离值验证/无效用户图片，有没有人知道如何使用 libfacerec 库来做到这一点，因为在这个库中没有公共变量可以查看距离或百分比价值？否则我是否需要在库中为它编写代码，因为据我了解它不包含此功能？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T17:25:47.140

请确保您正在使用最新版本！libfacerec 的最新版本允许您获得预测和预测的置信度值。您可以在此处查看方法的签名：

*   [https://github.com/bytefish/libfacerec/blob/master/include/facerec.hpp](https://github.com/bytefish/libfacerec/blob/master/include/facerec.hpp)

它显示在我随库提供的演示应用程序中，请参阅：

*   [https://github.com/bytefish/libfacerec/blob/master/samples/facerec_demo.cpp](https://github.com/bytefish/libfacerec/blob/master/samples/facerec_demo.cpp)

就像调用一样简单：

```
FaceRecognizer::predict(InputArray src, int &label, double &confidence); 
```

在计算模型上。因此，在您的应用程序中，您只需编写：

```
Mat testSample; // of course this is set somewhere in your application
int predictedLabel = -1;
double confidence = 0.0;
model.predict(testSample, predictedLabel, confidence); 
```

然后你有预测标签中的预测标签和这个预测的置信度值。

其次，这可能更适合您的问题，您现在可以设置一个阈值，低于该阈值的输入图像被视为未知。您可以在模型的构造函数中设置阈值，也可以使用 setter/getter 方法：

*   [https://github.com/bytefish/libfacerec/blob/master/include/facerec.hpp](https://github.com/bytefish/libfacerec/blob/master/include/facerec.hpp)（见createEigenFaceRecognizer、createFisherFaceRecognizer、createLBPHFaceRecognizer）

它也显示在我与库一起提供的演示应用程序中：

*   [https://github.com/bytefish/libfacerec/blob/master/samples/facerec_demo.cpp](https://github.com/bytefish/libfacerec/blob/master/samples/facerec_demo.cpp)

# php - 在php中从任何语言编码为utf

> ID：11010306
> 
> 赞同：0
> 
> 时间：2012-06-13T07:45:02.300
> 
> 标签：php

我从不同语言的 csv 字符插入..

我将此应用于每组字符：

```
 private function process_elements($element){
       utf8_encode($element);
      return $element;
} 
```

问题是当他们进入数据库时​​，他们是这样的：

```
???????? ?? ???????????? ????? ??????? ??? ???????... 
```

当我从数据库中检索它们时，我也得到了这个。

这发生在希腊语中。但是，当我检索希腊页面（通过报废）时，他们在 utf 编码的页面上。字符如下所示：

```
Î”ÎµÏ‚ webcam Î´Ï‰Î¼Î¬Ï„Î¹Î± | Gr.ImLive.com 
```

没关系，因为当我使用 utf8_encode 函数时，它们在屏幕上看起来很正常..

但是当数据从 csv 中取出并放入数据库时​​，我得到了那些问号..

有没有办法将任何语言编码为 utf.. 为什么从 csv 和 utf8 编码的网页中检索数据会产生如此大的差异.. 它们看起来一样.. 我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T07:46:50.003

请看看这个

它会帮助你

[在 Web 应用程序中从前到后处理 Unicode](http://kunststube.net/frontback/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T07:57:11.703

这不是关于“语言”，而是关于*编码*。文本被编码为位和字节。任何一个字节都等于任何其他字节。如果你只有一个字节，你就无法知道它代表什么编码。你可以*猜到*，但这并不准确。您必须通过阅读随附的元数据来*了解*某些文本的编码方式。这可能是文档、`<meta>`标签或 HTTP 标头。然后您需要处理该编码中的文本。

`utf8_encode`实际上*将*文本**从 ISO-8859-1**转换为 UTF-8。它不会简单地将*任何东西*编码为 UTF-8，因为它也没有办法确定编码的东西。如果您的文本已经是 UTF-8 编码的或者不是 ISO-8859-1 编码的，那么您只是在混淆文本（就像您一样）。

# html - Webkit 浏览器中未继承的圆角

> ID：11010309
> 
> 赞同：1
> 
> 时间：2012-06-13T07:45:09.937
> 
> 标签：html, css, webkit

我正在开发某种在线 indesign 编辑器，但遇到了以下问题。我在我的页面上放置了一个绝对位置的 div，并且在那个 div 中我放置了一个图像，也是一个绝对位置，因为我希望能够在 div 内拖动图像。我在 div 上设置了边框半径，但图像不继承该半径。

当我删除 div 和图像上的 position:absolute 属性时，边框半径被接受。但我需要它们绝对定位。

你可以在[jsFiddle上找到一个例子](http://jsfiddle.net/hTVFR/)

正如您所看到的，它在 Firefox 上正确，但在 chrome 和 safari 上却没有。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T07:51:45.057

 ~~~~## [dablet.com 上的演示](http://dabblet.com/gist/2922617)~~ 

`border-radius`不是因为`position: absolute;`on继承的`img`

**CSS：**

```
.pageelement {
    top:136.583px;
    left:-7.087px;
    height:288.142px;
    width:574.417px;
    position: absolute;
}

.pageelement img {
    width:785.923px;
    height:506.41px;
    left:-192.047px;
    top:-217.37px;
    position: absolute;
}

.pageelement,
.pageelement img {
    -webkit-border-radius: 0px 12px 12px 0px;
            border-radius: 0px 12px 12px 0px;
} 
```

~~PS。如果您不[支持 Firefox 3.6](http://caniuse.com/#search=border-radius) ，则不再 需要`-moz-`前缀`border-radius`~~

根据这个已回答的[问题](https://stackoverflow.com/questions/8705249/css-border-radius-not-trimming-image-on-webkit)，这种行为是一个错误：

> “Webkit 无法处理子孙+的边界半径裁剪。就是这么糟糕。如果你想要边框裁剪，它必须直接在放置图像的 div 上，而不是深入到层次结构中。”</p>

唯一的方法是将图像设置为`background-image`元素的a`border-radius`并使用`background-position`. 通过来自 css-tricks 讨论[线程的](http://css-tricks.com/forums/discussion/comment/45242)[Chris Coyier](http://css-tricks.com/forums/discussion/comment/45242#Comment_45242)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T09:24:40.740

您好，您可以通过 在您的类**.pageelement img中定义****z-index**属性来获得您想要的结果

 **我希望这能帮到您........

**HTML**

```
<div class="pageelement">
   <img src="http://placehold.it/350x150">
</div> 
```

**CSS**

```
.pageelement {
    top:136.583px;
    left:-7.087px;
    height: 288px;
    width: 593px;
    position:absolute;
    overflow: hidden;
    -webkit-border-radius: 0px 12px 12px 0px;
    -moz-border-radius: 0px 12px 12px 0px;
    border-radius: 0px 12px 12px 0px;
    border:5px solid red;
}
.pageelement img {
    width:785.923px;
    height:506.41px;
    left:-192.047px;
    top:-217.37px;
    position:absolute;
    z-index:-10;

} 
```

看演示：- [http://jsfiddle.net/hTVFR/21/](http://jsfiddle.net/hTVFR/21/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T08:16:13.183

```
.pageelement {
    top:136.583px;
    left:-7.087px;
    height:288.142px;
    width:574.417px;
    overflow: hidden;
    position: relative;
}
.pageelement img {
    width:785.923px;
    height:506.41px;
    left:-192.047px;
    top:-217.37px;
    position: absolute;
}

.pageelement, .pageelement img {
    -webkit-border-radius: 0px 12px 12px 0px;
    -moz-border-radius: 0px 12px 12px 0px;
    border-radius: 0px 12px 12px 0px;        
} 
```

​不幸的是pageelement的位置绝对是你麻烦的原因。删除它应该使这项工作！

[http://jsfiddle.net/hTVFR/3/](http://jsfiddle.net/hTVFR/3/)**~~

# wso2 - 将 carbon studio 项目迁移到 2.0.0

> ID：11010311
> 
> 赞同：0
> 
> 时间：2012-06-13T07:45:10.460
> 
> 标签：wso2

我在 Eclipse/Carbon Studio 1.0.14 中有几个 cApp 项目。是否有一种“简单”的方法可以将这些迁移到 Developer Studio 2.0.0。如果是这样，除了重新创建所有人工制品和新的 cApp 项目之外，最好的方法是什么。同样在卸载 1.0.14 并安装 2.0.0 后，我的 cApp 项目不再被识别为 cApp 项目。

谢谢并恭祝安康，

丹尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T11:14:19.547

目前，除了使用新的 Developer Studio 2.0.0 重新创建项目之外，没有其他方法可以迁移。

我们正计划实施一个迁移应用程序，允许用户将 1.xx 应用程序转换为 2.0.0 兼容版本。但我们无法提供该工具何时发布的任何可靠时间表。

谢谢并恭祝安康，

哈沙娜

# wix - WiX 3.6 - 一个完整的 WiX 3.6 多实例安装程序？

> ID：11010313
> 
> 赞同：4
> 
> 时间：2012-06-13T07:45:18.567
> 
> 标签：wix, wix3.6

某处是否有完整的 WiX 3.6 多实例安装程序？

我猜我只是不明白 WiX 3.6。我已经阅读了三天，试图构建一个 WiX 3.6 的工作示例，该示例将允许在单台机器上安装应用程序的多个实例。

是否有如何使用 WiX 3.6 执行此操作的功能示例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T21:13:27.107

这是我几年前写的一些信息……从那时起，[WiX: A Developers Guide to Windows Installer XML](https://rads.stackoverflow.com/amzn/click/com/1849513724)已经发布，对于初学者来说也是一个很好的资源。不过我自己也没觉得那么好。我仍然建议阅读[Windows Installer 权威指南](https://rads.stackoverflow.com/amzn/click/com/1590592972)作为起点。Windows Installer 和 WiX 不是你几天就能学会的东西，它需要几个月的时间。

* * *

去拿一份[Windows Installer 权威指南](https://rads.stackoverflow.com/amzn/click/com/1590592972)。我已经数不清有多少次我把它推荐给那些陷入概念并且正在努力理解 Windows Installer 如何工作的人。确保您也获取了[Windows Installer SDK](http://www.microsoft.com/downloadS/details.aspx?familyid=6A35AC14-2626-4846-BB51-DDCE49D6FFB6&displaylang=en)。

掌握 Windows Installer 是您学习的第一阶段，一旦深入了解，您将了解[InstallShield](http://www.installshield.com/)的工作原理（或视情况而定。）。Wise、InstallShield 等试图保护您免受底层概念的影响，并有自己的诡计/黑客来绕过 Windows Installer 的限制。

第二阶段（如果您认真了解 Windows Installer）正在学习[WiX](http://wix.sf.net/)（[WiX 教程](http://www.tramontana.co.hu/wix/)还不错，虽然它有点过时并且针对 WiX 2.0 而不是 3.x）并加入[wix-users邮寄名单](http://n2.nabble.com/wix-users-f687560.html)。在你读完上面提到的书之前不要加入用户列表，你会在你的头脑中得到很好的。那些不了解 Windows Installer 概念的人提出的问题在很大程度上会被忽略，但是那些做过功课的人会发现它是一个很好的资源。

本书未涵盖的内容是 Vista，Robert Flamings 关于[了解 UAC 和 Vista](http://blogs.msdn.com/rflaming/archive/tags/UAC+in+MSI/default.aspx)的博客文章（在 Vista 处于 beta 阶段时编写）是您可以找到的关于该主题的最佳信息。

Windows Installer 和 WiX 团队真正擅长的一件事是使文档（帮助文件）保持最新。每当我进行设置时，我通常会在一台显示器上打开**Wix.chm**和**Msi45.chm ;)**

除了文档，来自 WiX 和 Windows Installer 团队的人们的博客非常适合学习新技巧等。这里列出的太多了，但是一旦你知道了术语，你会发现它们中的大多数都会出现在谷歌搜索结果中。

[当 setup 不仅仅是 xcopy 时](http://blogs.msdn.com/robmen/)，也可以去看看 Rob Mensching 的旧博客。那里的文章可能让我相信，从长远来看，深入学习底层的 Windows Installer 概念会有所收获。它有:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T06:52:42.813

前段时间我发表了[一篇关于这个主题的博客文章。](http://ysdevlog.blogspot.com/2011/08/revisited-multiple-instance.html)您可以从那里使用示例作为起点。花一些时间玩它以足够深入地理解它。请注意，这不仅与 WiX 有关，还与作为底层技术的 Windows Installer 有关。

# android - 从 android play 下载时，我的应用程序不支持华为媒体垫 (hws7300w)

> ID：11010316
> 
> 赞同：2
> 
> 时间：2012-06-13T07:45:25.770
> 
> 标签：android, android-manifest, google-play

对于其中一位用户无法从 Android Play 下载应用程序并将消息显示为“不支持设备”。

清单文件中的应用程序设置：

```
<manifest 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:versionCode="10" 
    android:versionName="1.7" 
    package="com.companyname.appname"
    android:installLocation="auto">

    <uses-sdk 
        android:minSdkVersion="8" 
        android:targetSdkVersion="8"/>

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" /> 
    <uses-permission android:name="android.permission.CALL_PHONE" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.CAMERA"/>
    <uses-permission android:name="android.permission.VIBRATE"/>
    <uses-permission android:name="android.permission.FLASHLIGHT"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

    <uses-feature android:name="android.hardware.camera"/> 
```

Android Play 中的应用程序设置：

```
API level: 8-16+
Supported screens: small-xlarge
OpenGL textures: all

Screen layouts: SMALL NORMAL LARGE XLARGE
Required device features
android.hardware.camera
android.hardware.location
android.hardware.location.gps
android.hardware.screen.landscape
android.hardware.screen.portrait
android.hardware.telephony
android.hardware.touchscreen
android.hardware.wifi 
```

用户正在尝试使用 OS v2.2 及其屏幕尺寸“800 x 1280 像素，7.0 英寸（~216 ppi 像素密度）”从设备“华为媒体垫（hws7300w）”下载如果我在 android 中检查设备可用性列表玩。此设备存在于不受支持的列表中![检查这个](../Images/c7ddb497fb5fc9bc4a9c5947816ecb91.png)

谁能让我知道清单中的更改以支持此设备/平板电脑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T11:40:45.277

检查这个问题：

[为什么 Google Play 商店说我的 Android 应用与我自己的设备不兼容？](https://stackoverflow.com/questions/10475954/why-does-the-google-play-store-say-my-android-app-is-incompatible-with-my-own-de)

对于这个问题，它包含很多很好的答案。对我来说，此错误消息的问题是 CAMERA 权限：[https](https://stackoverflow.com/a/11243627/372838) ://stackoverflow.com/a/11243627/372838并且由于可以通过 INTENT 启动相机，因此您不一定需要此权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T07:53:47.897

编辑：对不起，你是对的！我发现这个[常见问题解答](http://www.huaweidevice.com/worldwide/faq.do?method=getFaqInfo&questionId=7568)建议允许安装非市场应用程序。我在常见问题解答中还发现，它似乎默认不支持电话，如此[处](http://www.huaweidevice.com/worldwide/faq.do?method=getFaqInfo&questionId=7564)所述。所以它可能是阻止安装的电话服务，而不是凸轮。

如果您的应用可以在没有 Telephony 的情况下工作，您可以使用 required=false 添加[使用功能。](http://developer.android.com/guide/topics/manifest/uses-feature-element.html)

# c# - 在 Windows 7 中使用 C# 运行 Selenium 测试期间出现“IEDriverServer 不存在”错误

> ID：11010317
> 
> 赞同：27
> 
> 时间：2012-06-13T07:45:30.243
> 
> 标签：c#, internet-explorer, windows-7, selenium-webdriver, selenium-rc

我正在使用带有 C# 的 WebDriver 开发自动化框架。它在 Firefox 上运行良好，但在 IE 上不行。

我收到以下错误：

> IEDriverServer.exe 不存在-文件 c:\users\administrator\documents\visual studio 2010\projects\TestProject1\TestProject1\bin\Debug\IEDriverServer.exe 不存在。驱动程序可以在[http://code.google.com/p/selenium/downloads/list下载](http://code.google.com/p/selenium/downloads/list)

我正在使用 IE 9 和 Windows 7。

```
IWebDriver driver = new InternetExplorerDriver();
driver.Navigate().GoToUrl("http://www.google.co.uk");
IWebElement queryBox = driver.FindElement(By.Name("q"));
queryBox.SendKeys("The Automated Tester");
queryBox.SendKeys(Keys.ArrowDown);
queryBox.Submit(); 
```

另请参阅![这个截图](../Images/106ef793f1cb64ef8a1f2a69de9a8a05.png)。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-06T18:53:06.573

IEDriverServer.exe（以及 ChromeDriver.exe）可以从以下位置下载：

[http://selenium-release.storage.googleapis.com/index.html](http://selenium-release.storage.googleapis.com/index.html)。

要使这些与您的 Selenium 测试一起使用，请将 .exe 包含在您的测试项目中，并将其属性设置为“始终复制”。

注意：您必须调整“添加文件”对话框以显示 .exe 文件。

这样做将解决错误。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-22T10:52:51.297

这是一个简单的 C# 示例，说明如何`InternetExplorerDriver`使用 IEDriverServer.exe 进行调用。

根据您的需要进行重构。

**注意：**使用`driver.Quit()`它可确保 IEDriverServer.exe 进程在测试完成后关闭。

```
using Microsoft.VisualStudio.TestTools.UnitTesting;
using OpenQA.Selenium.IE;

namespace SeleniumTest
{
    [TestClass]
    public class IEDriverTest
    {
        private const string URL = "http://url";
        private const string IE_DRIVER_PATH = @"C:\PathTo\IEDriverServer.exe";

        [TestMethod]
        public void Test()
        {
            var options = new InternetExplorerOptions()
            {
                InitialBrowserUrl = URL,
                IntroduceInstabilityByIgnoringProtectedModeSettings = true
            };
            var driver = new InternetExplorerDriver(IE_DRIVER_PATH, options);
            driver.Navigate();
            driver.Close(); // closes browser
            driver.Quit(); // closes IEDriverServer process
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-06-13T13:56:49.233

Per Jim Evans（在 IEDriverServer 上工作）

> .NET 绑定不扫描可执行文件的 %PATH% 环境变量。这意味着*仅*对于 .NET 绑定，IEDriverServer.exe 应该位于与 .NET 绑定程序集相同的目录中，或者您必须在 InternetExplorerDriver 类的构造函数中指定可以找到它的目录。
> 
> 未能执行其中一项操作（或在 InternetExplorerOptions 类中设置 UseInternalServer 属性）将导致 .NET IE 驱动程序实现引发异常。这完全是设计使然，因为我们希望人们开始使用独立的 IEDriverServer.exe，并且在未来的版本中将删除使用“内部”或“旧”版本服务器的能力。

[https://groups.google.com/forum/?fromgroups#!topic/webdriver/EvTyEPYchxE](https://groups.google.com/forum/?fromgroups#!topic/webdriver/EvTyEPYchxE)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T08:54:50.073

如果您使用 Visual Studio 和 C#，我已经更新了 NareshScaler nuget 包以自动安装 IEDriverServer、ChromeDriver 等，这意味着您可以更快地启动和运行。

[http://nuget.org/packages/NareshScaler](http://nuget.org/packages/NareshScaler)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-27T09:50:11.567

使用 java 与 IE 一起运行的 WebDriver 的代码。我相信这个概念可能对您使用 C# 有所帮助：

```
DesiredCapabilities capabilities = DesiredCapabilities.internetExplorer();
capabilities.setCapability(InternetExplorerDriver.INTRODUCE_FLAKINESS_BY_IGNORING_SECURITY_DOMAINS, true);      
File file = new File("C:\\Program Files\\Internet Explorer\\iexplore.exe");
System.setProperty("webdriver.ie.driver", file.getAbsolutePath());
driver = new InternetExplorerDriver(capabilities); 
```

如果上面的代码不起作用，请使用以下代码而不是“File file = new File("C:\Program Files\Internet Explorer\iexplore.exe");”：

```
File file = new File("F:\\Ripon\\IEDriverServer_Win32_2.25.2\\IEDriverServer.exe"); 
```

[注意：IEDriverServer 和 Windows（32 位或 64 位）的版本可能因人而异]

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-02-26T16:00:17.707

仅提供路径，直到 Internetexplorer.exe 所在的文件夹。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using OpenQA.Selenium;
using OpenQA.Selenium.Firefox;
using OpenQA.Selenium.IE;
using System.IO;

namespace Automation
  {
    class To_Run_IE
     {
        static void Main(string[] args)
        {
         //Keep Internetexplorer.exe in "D:\Automation\32\Internetexplorer.exe"
          IWebDriver driver = new InternetExplorerDriver(@"D:\Automation\32\"); \\Give path till the exe folder
         //IWebDriver driver = new Firefoxdriver()
       driver.Navigate().GoToUrl("http://www.google.com/");
       driver.Manage().Window.Maximize();         
       IWebElement query = driver.FindElement(By.Name("q"));
       query.SendKeys("Cheese");        
       query.Submit();         
       System.Console.WriteLine("Page title is: " + driver.Title);
       driver.Quit();
    }
} } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-13T08:19:21.023

```
 public IWebDriver IEWebDriver()
    {
        var options = new InternetExplorerOptions();
        options.IntroduceInstabilityByIgnoringProtectedModeSettings = true;
        webDriver = new   InternetExplorerDriver(ConfigurationSettings.AppSettings["IDEServerPath"].ToString(), options);//Path of ur IE WebDriver,Here I stored it in a AppConfig File
        return webDriver;
   } 
```

# java - 寻找自动压力测试框架

> ID：11010318
> 
> 赞同：0
> 
> 时间：2012-06-13T07:45:33.340
> 
> 标签：java, tomcat, jmeter, stress-testing

我有一个部署在 tomcat 容器上的应用程序。我正在运行 jmeter 负载（带有 HttpRequests 的 x 线程）。然后我正在查看 TPS、延迟、cpu 和内存（通过 jmx）。

我正在寻找一种自动的方式来完成这一切，并且可能会更好。任何好的参考资料、博客、文章，也许是一些 github 资源

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:49:35.833

You'd really need to be more specific about what you would like to automate, running the test, analyzing the results, monitoring your AUT or?

That said, you could try this: [https://github.com/oliverlloyd/jmeter-ec2](https://github.com/oliverlloyd/jmeter-ec2). This will automate test execution using remote hosts which can be useful to some people in some scenarios.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T08:37:06.610

嗯，你到底在寻找什么？我正在使用 JProfiler，它对我来说非常有效。我从我的应用程序中记录了测量数据，我可以在运行中和之后进行分析。但我不确定这是否是你需要的。“自动压力测试”。也许您可以在运行 JProfiler 的同时运行一堆 Selenium 测试？您会使用商业工具还是更喜欢“免费”（对不起这个词）工具？

反正玩得开心:)

戴夫

# php - CURL 返回数据处理

> ID：11010324
> 
> 赞同：0
> 
> 时间：2012-06-13T07:45:45.287
> 
> 标签：php, curl, google-plus

我编写了一个 PHP 函数来获取 URL 的加数

```
function makeApiCall($destinationUrl, $stringOfParams){
  $curl = curl_init();
  echo $destinationUrl.$stringOfParams."<br>";
  curl_setopt($curl, CURLOPT_URL, $destinationUrl.$stringOfParams);
  curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
  $result = curl_exec($curl);
  curl_close($curl);
  echo $result;
 } 
```

在输入`https://plusone.google.com/u/0/_/+1/fastbutton`目标 URL 并输入正确的参数字符串时，我收到的结果`$result`是 HTML。问题是我想使用 PHP 来获取计数而不是使用 JavaScript。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:00:01.997

使用[`preg_match`](http://php.net/preg_match)，您可以实现它。

假设您正在调用这样的网址：

```
https://plusone.google.com/_/+1/fastbutton?bsv=pr&url=http://www.google.com 
```

您正在寻找：

```
<div id="aggregateCount" class="t1">118k</div> 
```

或者

```
<div id="aggregateCount" class="t1">12</div> 
```

所以你可以执行：

```
preg_match('/\<div id=\"aggregateCount\" class=\"t1\"\>\>?([0-9]*k?)\<\/div\>/i', $result, $matches); 
```

并且`$matches`将是：

```
Array
(
    [0] => <div id="aggregateCount" class="t1">118k</div>
    [1] => 118k
) 
```

**编辑：**

运行示例后，似乎谷歌在使用 curl 时返回了不同的数字，例如 on `http://www.google.com`，它返回：

```
<div id="aggregateCount" class="t1">>9999</div> 
```

所以我更新了正则表达式来处理`>`.

# android - 什么是最好的？android中的JavaCV（OpenCV）或FaceDetector？

> ID：11010325
> 
> 赞同：1
> 
> 时间：2012-06-13T07:45:48.797
> 
> 标签：android, opencv, face-detection, javacv

我将在我的 android 应用程序中实现人脸识别。哪个最好用，JavaCV 还是 FaceDetector？请给我推荐一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T07:54:12.323

FaceDetector 可能正在使用更快的 C++ 实现。出于这个原因，我建议使用 FaceDetector 并限制您的应用程序大小。包含 JavaCV Jar 将增加应用程序的大小，这将减少人们下载它的可能性，而更有可能卸载它以释放手机空间。

如果 FaceDetector 不能正常工作，请使用 JavaCV。FaceDetector 仅使用眼睛来检测人脸，因此它不会检测个人资料或双眼不可见的人脸。

FaceDetector 注意：[图像的宽度必须均匀。](http://developer.android.com/reference/android/media/FaceDetector.html#FaceDetector%28int,%20int,%20int%29)

# rules - 如何在 AD FS 2.0 声明规则中提取应用程序返回 URL 和其他自定义参数？

> ID：11010327
> 
> 赞同：0
> 
> 时间：2012-06-13T07:46:00.787
> 
> 标签：rules, optional-parameters, adfs2.0, claims

这可能是关于 AD FS 2.0 声明规则设计的一个非常基本的问题，我还没有找到答案（新手）。我可能遗漏了一些非常基本的东西，但是这里有。

我正在公司内部署一个联盟。公司用户将能够浏览到 Web 应用程序 A、B、C 等。每个应用程序都有自己的子域 URL，例如 app-a.company.org、app-b.company.org 等。当应用程序重定向到其受信任的 STS 登录页面 我希望将返回 URL 传递给 STS。在 STS 声明规则中，我想提取返回 URL 并执行数据库查找，例如对于当前用户和 URL 为“app-a.company.org”的应用程序，我想要用户在该应用程序中拥有的所有角色（例如管理员、超级用户、购买者等等）。

我的问题是：

1.  如何将返回 URL 传递给 STS？
2.  如何编写索赔规则？（我知道如何进行数据库查找并发布结果，但我不知道如何在声明规则中检索返回 URL 或任何其他自定义参数）。

干杯，

莱纳斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T10:04:34.533

现在我知道更多了，我将回答我自己的问题。大多数情况下，这个问题似乎是对术语的混淆。

我的印象是我需要为 STS 中的所有应用程序创建一个全局规则。不是这种情况。相反，可以为单独的应用程序编写规则（这些应用程序在 AD FS 术语中称为依赖方信任，即信任任何声明 STS 问题的实体）。STS 与应用程序之间的关系是 1:1。

在我的情况下，我需要应用程序域作为唯一标识符，因为我需要稍后查询数据库（也称为属性存储）以获取更多属性。由于可以编写特定于应用程序的规则，并且 STS 和应用程序之间的关系是 1:1，因此我只是创建了一个硬编码域名的规则。

所以回答我上面编号的问题：

1.  由于依赖方信任关系是两者之间的永久连接，因此无需将其传递给 STS。
2.  硬编码一个简单的无条件发布（或添加）声明规则，即`=> issue(type = "http://myclaims/appdomain", value = "app-a.company.org")`

# scala - Scalaz 和 REPL

> ID：11010331
> 
> 赞同：0
> 
> 时间：2012-06-13T07:46:16.030
> 
> 标签：scala, read-eval-print-loop, scalaz

我已成功将 scalaz 添加到 scala repl (2.9.1) 并尝试了一些没有问题的基本示例，例如： `List(10, 20, 30) <*> (List(1, 2, 3) map ((_: Int) * (_: Int)).curried)`

或者

`List(10, 20, 30) |@| List(1, 2, 3) apply (_ * _)`

但是，map 的别名，即 °，如本示例所示 [http://scalaz.github.com/scalaz/scalaz-2.9.1-6.0.4/doc.sxr/scalaz/example/ExampleApplicative.scala.html #23569](http://scalaz.github.com/scalaz/scalaz-2.9.1-6.0.4/doc.sxr/scalaz/example/ExampleApplicative.scala.html#23569)

不被认可，我得到了一个

`error: value ° is not a member of List[Int]`

也许我使用了错误的字符？上面示例中的复制粘贴会吞噬特殊字符...

任何指导将不胜感激！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T08:09:37.220

# java - 无法在基于 Java 的 Web 服务或 Eclipse 中包含 Java 库（.jar）

> ID：11010336
> 
> 赞同：0
> 
> 时间：2012-06-13T07:46:39.030
> 
> 标签：java, mysql, eclipse, jdbc, mysql-connector

我是基于 Java 的 Web 服务的新手。我能够在 Java 中创建 Web 服务。我使用与 MySQL 的 ODBC 连接建立了连接。我想使用 JDBC 连接建立连接。

为此，我在 Eclipse 的项目中包含了 jar 文件 ( `mysqlconnector.jar`) 。`Build Path`

问题是它`ClassNotFoundException`在我使用该 jar 文件的类的行处抛出一个。

```
String URL = "jdbc:mysql://localhost:3306/dbName";
        String USER = "root";
        String PASSWORD = "abc@123";
        String DRIVER = "com.mysql.jdbc.Driver";// driver from the jar file
Class.forName(DRIVER);//gives exception here
con = DriverManager.getConnection(URL, USER, PASSWORD);//return null here 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T07:49:17.167

需要的API在运行时也需要，放入`WEB-INF/lib`

# php - 从 linux 主文件夹访问文件

> ID：11010343
> 
> 赞同：0
> 
> 时间：2012-06-13T07:46:56.927
> 
> 标签：php, linux

我的图像位于 linux 主目录中。我必须访问这些图像并向用户展示。

当我试图在 css 文件中包含这样的位置时

```
background: url('/home/images/imagename.jpg'); 
```

它正在查找 htdocs /usr/local/apache/htdocs/home/images/imagename.jpg。

而且，我也尝试从主文件夹加载 xml 它也在做同样的事情

```
$test = file_get_contents ( '/home/test/test.xml' ); 
```

请建议我如何实现这一目标。

因为我在主目录中有不同的文件夹，其中包含图像和 xml 文件。我编写了逻辑来显示来自不同文件夹的图像，但我无法从家里访问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T07:54:14.853

尝试这个

```
$file = file_get_contents('./imagename.jpg', FILE_USE_INCLUDE_PATH); 
```

在您的 php.ini 文件中进行此设置

```
include_path=".:/home/images" 
```

或者在运行时使用这个函数

```
set_include_path()  for same 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T07:53:12.883

在 CSS 文件中，路径来自“URL_ROOT”，类似于：[http://www.myurl.tld/](http://www.myurl.tld/)

路径来自“ `file_get_contents`file_system”，但 Apache 无权访问“HOME”。

您必须将要显示给用户的 IMAGES/XML 放在 Apache 可访问和可读的目录中；像“htDocs”：`/var/www/`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T07:53:55.713

对于`file_get_contents`;

如果你在你的 php.ini 中设置`open_basedir`或（或作为apache 配置中的指令）设置为或（无论你使用哪个），那么这应该会有所帮助。`include_path``php_flag``/home/images``/home/test/`

此外，您可能需要授予`www-data`or`apache`用户权限。

对于 CSS 声明，您只能访问域根目录之上的文件。

# java - 套接字只接受一个客户端

> ID：11010348
> 
> 赞同：2
> 
> 时间：2012-06-13T07:47:12.923
> 
> 标签：java, sockets, tcp, server

我在java中创建了一个接受客户端连接的服务器。但我只能连接一个客户端

```
class Server extends Thread{

    private void startServer() {

     try{
        ss=new ServerSocket(3000);
        s=ss.accept();
        DataRead d1=new DataRead();        
        d1.t.start();

         }catch(Exception er){
             er.printStackTrace();
         }
        }                                        
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T07:57:49.143

你只接受一个套接字。在你的`jButton1ActionPerformed`你有

```
s=ss.accept(); 
```

但这只会在您单击 jButton1 按钮时调用**一次。**`accept()`如果您想让多个客户端能够连接，您需要继续调用。

另外，请记住，每次调用`accept()`都会阻塞，直到客户端连接，然后返回一个**新**的套接字，代表该连接。因此，如果您想支持多个客户端，则不应将您的`Socket`作为全局变量，而应将其包含在`DataRead`类的构造函数中，因此每个读取器都在唯一的套接字/连接/客户端上运行。

# c++ - 在 stl 容器中释放 opencv 图像？

> ID：11010349
> 
> 赞同：0
> 
> 时间：2012-06-13T07:47:13.127
> 
> 标签：c++, opencv

我在释放存储在 stl 容器中的 opencv 图像时遇到问题。我正在开发一个系统来保存相机的最后几帧。我需要一个容器来存储图像。但是当我尝试使用迭代器访问图像并释放它们时，事情就出错了。像这样。

```
deque<IplImage> ImageQue;
IplImage * temp=cvCreateImage(cvSize(30, 30), 8, 3);
ImageQue.push_back(*temp);
deque<IplImage>::iterator it=ImageQue.begin();
//temp and temp2 pointing different mem 
IplImage * temp2=&*it;
//this goes wrong. execption at memory location.
cvReleaseImage(&temp2); 
```

如果我试试这个。

```
IplImage * try1=cvCreateImage(cvSize(30, 30), 8, 3);
//try1 and try2 are pointing the same mem.
IplImage * try2=&*try1;
//things alright here.
cvReleaseImage(&try2); 
```

我认为问题就在这里。双端队列::迭代器它=ImageQue.begin(); IplImage * temp2=&*it;

对此有任何想法吗？或建议我是否想在 stl 容器中发布图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T08:04:18.483

看起来你正在混合和匹配你的指针间接。不这样做可能是个好主意：

```
deque<IplImage> ImageQue; 
IplImage * temp=cvCreateImage(cvSize(30, 30), 8, 3); 
ImageQue.push_back(*temp); 
```

您可能应该使用指针容器（而不是使用前导大写作为实例名称）：

```
deque<IplImage*> imageQueue; 
imageQueue.push_backcvCreateImage(cvSize(30, 30), 8, 3));
// ...
auto itr = imageQueue.begin();
IplImage* temp = *itr;
cvReleaseImage(&temp); 
```

那类的东西。更重要的是，也许......如果你要像那样销毁你的图像，你应该先把它们从容器中取出，因为你可能不想要一个悬空指针队列。

```
IplImage* temp  = imageQueue.front();
imageQueue.pop_front();
cvReleaseImage(&temp); 
```

您还可以考虑使用某种智能指针（它会在 IplImage 生命周期结束时自动释放）... OpenCV 的最新版本是否包含用于此类事情的不错的 C++ api，还是我弄错了？A`std::shared_ptr`也可以工作，给定一个合适的自定义删除器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T07:55:59.380

我不认为 C 接口`IplImage`喜欢按值复制，就像您尝试做的那样。[如果你想使用以值语义操作的 C ++](http://opencv.itseez.com/modules/core/doc/basic_structures.html#mat)容器，你应该`IplImage*`使用不必担心释放）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T08:04:41.583

您可以使用 C++11 中的 std::shared_ptr 或 C++03 中的 Boost 等效项。

您可以将对象的 shared_ptr 存储在 stl 容器中，但您需要指定删除器（默认为 operator delete）。

您可以在 shared_ptr 的构造函数中分配指针的删除器。在你的情况下 cvReleaseImage 函数。

来自[Boost 文档](http://www.boost.org/doc/libs/1_49_0/libs/smart_ptr/shared_ptr.htm#Synopsis)：

> 模板 shared_ptr(Y * p, D d); 模板 shared_ptr(Y * p, D d, A a);
> 
> ```
> Requirements: p must be convertible to T *. D must be CopyConstructible. 
>               The copy constructor and destructor of D must not
>               throw. The expression d(p) must be well-formed, must not invoke
>               undefined behavior, and must not throw exceptions. A must be an
>               allocator, as described in section 20.1.5 (Allocator requirements) of
>               the C++ Standard.
> 
> Effects: Constructs a shared_ptr that owns the pointer p and the deleter d. 
>          The second constructor allocates memory using a copy of a.
> 
> Postconditions: use_count() == 1 && get() == p.
> 
> Throws: std::bad_alloc, or an implementation-defined 
>         exception when a resource other than memory could not be obtained.
> 
> Exception safety: If an exception is thrown, d(p) is called.
> 
> Notes: When the the time comes to delete the object pointed to by p, 
>        the stored copy of d is invoked with the stored copy of p as an
>        argument. 
> ```
> 
> [自定义释放器允许工厂函数返回 shared_ptr 以将用户与其内存分配策略隔离开来。由于释放器不是类型的一部分，因此更改分配策略不会破坏源代码或二进制兼容性，并且不需要客户端重新编译。例如，当将 shared_ptr 返回给静态分配的对象时，“no-op”释放器很有用，而其他变体允许将 shared_ptr 用作另一个智能指针的包装器，从而简化互操作性。
> 
> 对自定义解除分配器的支持不会带来显着的开销。其他 shared_ptr 功能仍然需要保留一个释放器。
> 
> D的拷贝构造函数不抛出的要求来自于传值。如果复制构造函数抛出，则指针泄漏。删除要求需要通过 (const) 引用。
> 
> 引用传递的主要问题在于它与右值的交互。const 引用仍可能导致复制，并且需要 const operator()。非常量引用根本不会绑定到右值。这个问题的一个很好的解决方案是 N1377/N1385 中提出的右值参考。]

# android - 如何在服务中实现onresume方法

> ID：11010352
> 
> 赞同：1
> 
> 时间：2012-06-13T07:47:20.053
> 
> 标签：android, android-service, nfc

我在我的活动中做 NFC 工作。在我的活动的 onResume 方法中，活动等待另一个 NFC 设备靠近以进行交互。我想通过服务来实现这一点。我希望我的服务等待 ACTION_NDEF_DISCOVERED 标签，当标签到来时，获取将从另一台设备发送的信息并将其发送到我的活动。

谢谢你的帮助..祝你有美好的一天

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:33:01.273

只有活动（在前台运行）才能接收 NFC 意图并通过 NFC 进行通信。服务没有这种能力。

# android - 如何在android中查看表格列表

> ID：11010355
> 
> 赞同：2
> 
> 时间：2012-06-13T07:47:36.230
> 
> 标签：android, sqlite

[在这里，我附上了一张 SQLite 数据库结构的图像。](http://i.stack.imgur.com/IXrKx.png) 当我从 ADB shell 打开表列表时，它只显示 2 个表，但有 59 个表。

```
sqlite> .tables
.tables
android_metadata 
```

如何从 ADB shell 中查看 Android SQLite 中的表列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T16:32:43.490

我在我的 Windows 7 平台上使用了 2 个独立程序；SQLite 数据库浏览器 2.0 b1 和 sqlitestudio。如果你使用 eclipse 你并添加插件 SQLLIteManager，com.questoid.sqlitemanager_1.0.0.jar。

希望这可以帮助。

# api - 是否有任何可用的流量 API 可以为我提供实时数据以及过去的数据（几个月）？

> ID：11010358
> 
> 赞同：1
> 
> 时间：2012-06-13T07:48:01.200
> 
> 标签：api, traffic

我知道 mapquest 交通 API [http://platform.beta.mapquest.com/traffic/](http://platform.beta.mapquest.com/traffic/)，bing - [http://msdn.microsoft.com/en-us/library/hh441730](http://msdn.microsoft.com/en-us/library/hh441730)但它们都没有提供实时数据. 请提出任何类型的帮助将不胜感激

# android - 两个不同的 AsyncTasks 同时执行

> ID：11010359
> 
> 赞同：4
> 
> 时间：2012-06-13T07:48:11.973
> 
> 标签：android, android-asynctask

我有两个完全不同的实现`AsyncTask`，比如说`AT1`和`AT2`。

`AT1`先执行，再`AT2`执行。`AT1`通过每 500 毫秒轮询一次该数据，等待`doInBackground`直到`AT2`完成其任务。但这永远不会发生。

所以我基本上想要的是这个： ![在此处输入图像描述](../Images/3a211e7fac8c6de450b55c0dba90a872.png)

但似乎发生的事情是： ![在此处输入图像描述](../Images/76fbd94438b54f418a21e6c64e412635.png)
除了`AT1`从未完成，`AT2`也从未开始。

有没有办法可以强制这两个`AsyncTask`s 在两个单独的线程上执行，或者有另一种解决方案吗？

不可能先启动`AT2`然后再执行`AT1`。

**编辑**
澄清：`AT1`当用户打开特定屏幕时执行，并且需要根据位置下载该屏幕的数据。`AT2`在位置更改时执行，当发生这种情况时，会进行一些无法在 UI 线程上完成的计算。

when`AT2`从未执行过，`AT1`没有位置可以下载数据，所以需要等待`AT2`完成。当`AT2` *已经*执行时，位置数据已经存在，`AT1`无需等待。

此外，这个问题发生在 ICS 中，而不是在 Android 2.3 中，就像[这个答案](https://stackoverflow.com/questions/4068984/running-multiple-asynctasks-at-the-same-time-not-possible)所暗示的那样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T08:08:50.667

当我发布这个问题时，[这个问题](https://stackoverflow.com/questions/4068984/running-multiple-asynctasks-at-the-same-time-not-possible)出现在该`Related`部分中。它建议使用`executeOnExecutor`，我已经实现了如下：

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
    new SetLocationAsyncTask().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, location);
} else {
    new SetLocationAsyncTask().execute(location);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T07:53:38.503

如果一个等待另一个，那么拥有两个异步任务有什么意义？如果你想这样做，为什么不让第一个开始第二个并将“完成”的东西放在第二个任务中呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T07:56:11.400

听起来您可能需要重新考虑您的逻辑 - 如果您正在启动一个线程，然后需要等待另一个线程完成某些工作，为什么不让第一个线程完成这项工作呢？

如果您确实需要 2 个 AsyncTask，请让第一个收集所需的任何数据，并且在第一个完成之前不要启动第二个 - 在文档中阅读有关 onPostExecute 的信息。

# mysql - 返回查询中每个 ID 的第一个

> ID：11010373
> 
> 赞同：2
> 
> 时间：2012-06-13T07:49:13.493
> 
> 标签：mysql, sql

我有一个结构如下的表：

![架构图](../Images/989c7dd93e1f3d46ebed7de89637bfbb.png)

我正在尝试为每个玩家选择最新的让分盘，因此按日期和 playerId 排序。

考虑以下查询：

```
SELECT h.id, h.playerId, h.amount, h.date
FROM hancicap h
WHERE h.date < '2012-06-11'
ORDER BY h.playerId ASC, h.date DESC 
```

这会产生如下结果：

![示例数据](../Images/87a9bd0e8216697d4bd477ec3dcecf95.png)

*（带下划线的行是我要返回的行）*

我的第一个想法是添加一个`GROUP BY h.playerId`，但这会导致错误的值。我完全被困住了，不胜感激所有的建议和想法！

*不确定我应该给线程命名什么。使名称更正确的编辑会很棒。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T07:53:04.060

您可以使用子查询过滤掉最新的行：

```
select  *
from    players p1
where   p1.id =
        (
        select  id
        from    players p2
        where   p2.playerId = p1.playerId
        order by
                date desc
        limit   1
        ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T08:14:44.677

如果在键上定义连接（已经有索引），连接总是更快。

```
SELECT a.* 
FROM   hancicap a 
       LEFT JOIN hancicap b 
              ON a.playerId = b.playerId 
                 AND a.date < b.date 
                 AND ( a.date < '2012-06-11' 
                        OR b.date < '2012-06-11' ) 
WHERE  b.playerId IS NULL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T07:56:51.530

```
SELECT h.id, h.playerId, h.handicap, h.date
FROM handicap h
WHERE h.date < '2012-06-11'
    and h.date = (SELECT max(h2.date) FROM handicap h2
                    WHERE h2.date < '2012-06-11' and h.playerId = h2.playerId) 
```

我的测试数据是：

```
id          playerId    handicap    date
----------- ----------- ----------- ----------
1           1           2           2012-06-05
2           1           3           2012-06-07
3           1           1           2012-06-08
4           1           12          2012-06-13
5           2           1           2012-06-09
6           2           4           2012-06-01
7           2           5           2012-06-10

(7 row(s) affected)

id          playerId    handicap    date
----------- ----------- ----------- ----------
7           2           5           2012-06-10
3           1           1           2012-06-08

(2 row(s) affected) 
```

# android - 在 Android 手机上存储本地数据，然后使用 Google 电子表格上传

> ID：11010375
> 
> 赞同：1
> 
> 时间：2012-06-13T07:49:29.677
> 
> 标签：android, spreadsheet, gdata

我正在为并不总是存在 3g 访问的农村开发一个 android 应用程序。该应用程序将基于 Google 电子表格。应该这样，如果没有互联网访问，输入的新数据将存储在本地文件中，当有互联网连接时，它将自动与在线文件同步。正确进行此操作的方法是什么？我可以存储本地 excel 文件或类似文件，然后将该文件与在线 google 电子表格同步吗？它们甚至兼容吗？

很抱歉有很多问题，但任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T07:56:05.040

在 Android 上存储结构化数据的常用方法是使用 sqlite 数据库。保存您的数据，然后使用 API 将其复制到 Google 电子表格。如果你想变得花哨，你可以编写一个同步适配器，让操作系统为你安排它。不过，如果连接不可靠，不确定它的效果如何。

MyTracks 是一个做类似事情的开源，您可以将其用作参考：[http ://code.google.com/p/mytracks/](http://code.google.com/p/mytracks/)

# opencart - 在 opencart 的仪表板中显示产品查看报告

> ID：11010378
> 
> 赞同：0
> 
> 时间：2012-06-13T07:49:47.587
> 
> 标签：opencart

我想在仪表板本身中显示产品查看报告。现在 Report->Products->Viewed 下的报告 ID

如何显示它？我尝试将代码从 admin->controller->report->product_viewed.php 复制到 admin->controller->common->home.php

并将代码从 admin->view->report->product_viewed.tpl 复制到 admin->common->home.tpl

我在 home.tpl 中添加了这样的代码

```
<div class="content">
      <table class="list">
        <thead>
          <tr>
            <td class="left"><?php echo $column_name; ?></td>
            <td class="left"><?php echo $column_model; ?></td>
            <td class="right"><?php echo $column_viewed; ?></td>
            <td class="right"><?php echo $column_percent; ?></td>
          </tr>
        </thead>
        <tbody>
          <?php if ($products) { ?>
          <?php foreach ($products as $product) { ?>
          <tr>
            <td class="left"><?php echo $product['name']; ?></td>
            <td class="left"><?php echo $product['model']; ?></td>
            <td class="right"><?php echo $product['viewed']; ?></td>
            <td class="right"><?php echo $product['percent']; ?></td>
          </tr>
          <?php } ?>
          <?php } else { ?>
          <tr>
            <td class="center" colspan="4"><?php echo $text_no_results; ?></td>
          </tr>
          <?php } ?>
        </tbody>
      </table>
      </div> 
```

在我的管理面板->仪表板中，我收到这样的错误

注意：未定义变量：第 95 行 /Applications/MAMP/htdocs/opencart/admin/view/template/common/home.tpl 中的产品注意：未定义变量：/Applications/MAMP/htdocs/opencart/admin/view/template 中的 column_name /common/home.tpl 在第 88 行 注意：未定义变量：column_model 在 /Applications/MAMP/htdocs/opencart/admin/view/template/common/home.tpl 在第 89 行 注意：未定义变量：column_viewed 在 /Applications/MAMP /htdocs/opencart/admin/view/template/common/home.tpl 在第 90 行 注意：未定义的变量：column_percent 在 /Applications/MAMP/htdocs/opencart/admin/view/template/common/home.tpl 在第 91 行

请帮我解决这个问题？我应该在哪里声明这个“产品”？![这是我得到的错误](../Images/63a970a71a729139d92d511f146b7323.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T22:37:47.630

在我看来，所查看的产品没有任何结果，而您几乎完美地完成了这一过渡。

您可以使用 admin>language>english>common>home.php 中的适当字段更新语言文件，也可以像这样更改 tpl

```
<div class="content">
  <table class="list">
    <thead>
      <tr>
        <td class="left">Product Name:</td>
        <td class="left">Model:</td>
        <td class="right">Viewed:</td>
        <td class="right">Percent:</td> 
```

# jquery - 在控制器中获取 json 答案

> ID：11010379
> 
> 赞同：2
> 
> 时间：2012-06-13T07:49:48.457
> 
> 标签：jquery, symfony

我正在修改网页中的实体（Symfony 没有什么不寻常的:)）。我目前有一个应该修改的实体。我使用[Jeditable](http://www.appelsiini.net/projects/jeditable)进行该版本，而不是在版本之后立即修改实体，而是将修改后的元素存储在 json 中，当用户确认他的修改时（通过模态对话框确认操作），我将该 JSON 发送到我的控制器。

那就是事情变得更糟的时候^^

我检查了我的 json 数组是否包含正确的信息。但是当我在控制器中拦截请求时，它似乎不包含我想要的内容。这是我的控制器：

```
public function postorganisationAction(){
    $modifFields = array();
    $content = $this->get("request")->getContent();
    $this->get('logger')->info('request123456 ');
    if (!empty($content))
    {
        $modifFields = json_decode($content, true);
        $repository = $this->getDoctrine()
               ->getEntityManager()
               ->getRepository('MyBundle:Organisation');
        $organisation = $repository->findById($modifFields["id"]);
        $organisation->setFromArray($modifFields);

        $em = $this->getDoctrine()->getEntityManager();

        $em->persist($organisation);

        $em->flush();
    }

} 
```

setFromArray 函数获取一个包含元素的数组，例如`"name" => "newname"`.

当我尝试记录请求、内容或`$modifFields["id"]`（如我所说，我检查 JSON 中的 id 在 jquery 中是否正确）时，日志不会出现。

有人知道我做错了什么吗？

编辑：

经过一些修改（感谢 ManseUK），我能够：
- 让 jQuery 函数发送 JSON 字符串而不是数组（`JSON.stringify(oModifFields);`）
- 解决问题： 我有一个转换错误`$organisation`，然后我变成了一个对象所需类型

就是这样^^

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T10:22:44.970

Symfony2 有一些有用的类用于序列化和反序列化实体。

这是如何进行的：

1.  定义一种将实体规范化为数组的方法，数组的每一对键/值都将是 json 字符串中的键/值；
2.  导入一个序列化程序，它将您的数组（规范化的实体）转换为 json 字符串、XML 文档或您想要的任何内容。

对于第一个操作（规范化你的实体），Symfony2 内置了两种可能性：

*   在你的实体上实现 Symfony\Component\Serializer\Normalizer\NormalizableInterface。您将必须填写两种方法，它们会将您希望在 json 中看到的属性规范化或非规范化到数组；
*   创建你自己的 Normalizer 类，它将实现 Symfony\Component\Serializer\Normalizer\NormalizerInterface

在控制器（或您将定义的服务中）中，您将执行以下操作来对您的实体进行编码：

```
$serializer = new Symfony\Component\Serializer\Serializer(
       array(
          new Symfony\Component\Serializer\Normalizer\CustomNormalizer(), //if you implement NormalizableInterface
          new YourOwnCustomNormalizer() //if you created your own custom normalizers
       ), 
       array(
          'json' => new Symfony\Component\Serializer\Encoder\JsonEncoder()
       )
    );
$json = $serializer->serialize($yourEntity, 'json');
return new Response($json); 
```

并从 json 字符串中检索实体：

```
$jsonString = $content = $this->get("request")->get('yourString'); //please, check how you retrieve data from your request
$serializer = new Symfony\Component\Serializer\Serializer(
       array(
          new Symfony\Component\Serializer\Normalizer\CustomNormalizer(), //if you implement NormalizableInterface
          new YourOwnCustomNormalizer() //if you created your own custom normalizers
       ), 
       array(
          'json' => new Symfony\Component\Serializer\Encoder\JsonEncoder()
       )
    );
$entity = $serializer->deserialize($jsonString, '\namespace\to\your\entity', 'json'); 
```

# .net - 在 DLR 脚本主机上执行脚本时，如何获取运行时上下文？

> ID：11010383
> 
> 赞同：0
> 
> 时间：2012-06-13T07:50:21.050
> 
> 标签：.net, ironpython, ironruby, dynamic-language-runtime

目前我正在做一个案例研究，将 IronRuby 集成到我们的一个核心产品中。脚本的执行只能以同步方式执行，因此我计划在每个线程中执行脚本。

但另外我需要对脚本执行进行更多控制，尤其是。我需要一种方法来暂停脚本并在稍后的时间点恢复它。我想我需要存储一个堆栈帧，包括。脚本暂停时的所有变量，我称之为“运行时上下文”。唉，我没有找到以所需方式“监视”脚本执行的方法。（我通过动态对象使用对宿主语言的回调进行了检查，但这种技术不提供所需的上下文。）

有没有人知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:40:35.260

您可能会使用 DLR 的跟踪 API，该 API 通常用于实现调试器，但没有很好的文档记录。您基本上只是将脚本“分解”到调试器中，然后再继续执行。[这里](http://devhawk.net/2009/07/08/microsoft-scripting-debugging/)有一些信息，但有点过时了。

或者（可能更安全，取决于您的脚本正在做什么），您的脚本可以在定义的点返回给主机。在 Python 中，我会使用生成器；我不确定 Ruby，但即使让主机提供脚本可以调用的 yield() 函数也应该足够了。

# objective-c - 比较：选项：如何在数字之前对符号进行排序？

> ID：11010384
> 
> 赞同：0
> 
> 时间：2012-06-13T07:50:28.627
> 
> 标签：objective-c, cocoa

我目前正在使用此比较选项对字符串列表进行排序：

```
 [self compare:aString options:NSNumericSearch|NSCaseInsensitiveSearch]; 
```

但是，数字在符号之前：

```
99
[Hello
Hello 
```

有没有办法在数字之前对符号进行排序？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:01:07.130

并非所有符号都出现在 ASCII 表中的数字之前，这就是您注意到`'['`. 假设`self`在您的示例中是`NSArray`，您将需要使用该[`sortedArrayUsingComparator:`](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/instm/NSArray/sortedArrayUsingComparator%3a)方法并实现自定义排序器。（除此之外的其他类`NSArray`也将具有此方法。）

```
NSComparator sortBlock = ^(id string1, id string2)
{
    // Fill this in
};

NSArray* sortedArray = [originalArray sortedArrayUsingComparator:sortBlock]; 
```

查看Apple 开发者网站上的[Blocks 入门。](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/Blocks/Articles/bxGettingStarted.html)

# android - 在 Android 中使用 Intent 在活动中传递 android 位图数据

> ID：11010386
> 
> 赞同：78
> 
> 时间：2012-06-13T07:50:34.677
> 
> 标签：android, android-intent, bitmap

我有一个名为 Activity1 的 Bitmap 变量`bmp`，我想将位图发送到 Activity2

以下是我用来传递它的代码。

```
Intent in1 = new Intent(this, Activity2.class);
in1.putExtra("image",bmp);
startActivity(in1); 
```

在 Activity2 我尝试使用以下代码访问位图

```
Bundle ex = getIntent().getExtras();
Bitmap bmp2 = ex.getParceable("image");
ImageView result = (ImageView)findViewById(R.Id.imageView1);
result.setImageBitmap(bmp); 
```

应用程序无异常运行，但未给出预期结果

* * *

## 回答 #1

> 赞同：217
> 
> 时间：2012-06-13T08:03:24.773

在将其添加到意图、发送出去和解码之前，将其转换为字节数组。

```
//Convert to byte array
ByteArrayOutputStream stream = new ByteArrayOutputStream();
bmp.compress(Bitmap.CompressFormat.PNG, 100, stream);
byte[] byteArray = stream.toByteArray();

Intent in1 = new Intent(this, Activity2.class);
in1.putExtra("image",byteArray); 
```

然后在活动 2 中：

```
byte[] byteArray = getIntent().getByteArrayExtra("image");
Bitmap bmp = BitmapFactory.decodeByteArray(byteArray, 0, byteArray.length); 
```

* * *

**编辑**

认为我应该用最佳实践更新它：

在您的第一个活动中，您应该将位图保存到磁盘，然后在下一个活动中加载它。确保在第一个活动中回收您的位图，以便为垃圾收集做好准备：

活动一：

```
try {
    //Write file
    String filename = "bitmap.png";
    FileOutputStream stream = this.openFileOutput(filename, Context.MODE_PRIVATE);
    bmp.compress(Bitmap.CompressFormat.PNG, 100, stream);

    //Cleanup
    stream.close();
    bmp.recycle();

    //Pop intent
    Intent in1 = new Intent(this, Activity2.class);
    in1.putExtra("image", filename);
    startActivity(in1);
} catch (Exception e) {
    e.printStackTrace();
} 
```

在活动 2 中，加载位图：

```
Bitmap bmp = null;
String filename = getIntent().getStringExtra("image");
try {
    FileInputStream is = this.openFileInput(filename);
    bmp = BitmapFactory.decodeStream(is);
    is.close();
} catch (Exception e) {
    e.printStackTrace();
} 
```

干杯!

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-05-21T06:39:41.903

有时，位图可能太大而无法编码和解码，或者在意图中作为字节数组传递。这可能会导致 OOM 或糟糕的 UI 体验。

我建议考虑将位图放入新活动（使用它的那个）的静态变量中，当您不再需要它时，该变量将谨慎地为空（在 onDestroy 中，但仅当“isChangingConfigurations”返回 false 时）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-11-21T07:30:04.997

简单地说，我们可以只传递 Bitmap 的 Uri 而不是传递 Bitmap 对象。如果 Bitmap 对象很大，则会导致内存问题。

第一活动。

```
intent.putExtra("uri", Uri); 
```

从 SecondActivity 我们得到位图。

```
Bitmap bitmap = MediaStore.Images.Media.getBitmap(this.getContentResolver(),Uri.parse(uri)); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-02-17T13:12:26.900

通过 Intent 将 Bitmap 发送到另一个活动的 Kotlin 代码：

1- 在第一个活动中：

```
 val i = Intent(this@Act1, Act2::class.java)
           var bStream  =  ByteArrayOutputStream()
            bitmap.compress(Bitmap.CompressFormat.PNG, 50, bStream)
            val byteArray = bStream.toByteArray()
            i.putExtra("image", byteArray )
            startActivity(i) 
```

2- 在活动二中（读取位图图像）：

```
 var bitmap : Bitmap? =null
    if (intent.hasExtra("image")){
      //convert to bitmap          
        val byteArray = intent.getByteArrayExtra("image")
        bitmap = BitmapFactory.decodeByteArray(byteArray, 0, byteArray.size)
    } 
```

3-如果您需要将其设置为视图的背景，例如 ConstraintLayout 或...：

```
 if (bitmap != null) {
     //Convert bitmap to BitmapDrawable
     var bitmapDrawable = BitmapDrawable( resources , bitmap)
      root_constraintLayout.backgroundDrawable = bitmapDrawable
   } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-10T09:41:00.547

我们也可以在不通过意图传递数据的情况下解决这个问题。只需将图像存储在内存中，在下一个 Activity 中只需从该位置加载图像，这也可以避免应用程序因传递大量位图数据而崩溃。注意：您甚至不需要将位置路径传递给意图，记住路径并使用它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-13T23:57:30.060

我还想为那些希望这样做的人发布一个最佳实践答案（但可能会问错问题）。

与其传递位图（我假设您是从网络上下载的，否则，您已经有了对它的文件引用），我建议使用诸如[Universal Image Loader](https://github.com/nostra13/Android-Universal-Image-Loader)之类的图像加载器将图像下载到 ImageView 中。您可以对其进行配置，然后将图像缓存到磁盘：

```
 DisplayImageOptions defaultOptions = new DisplayImageOptions.Builder()
                .cacheInMemory(true)
                .cacheOnDisk(true)
                .considerExifParams(true)
                .bitmapConfig(Bitmap.Config.RGB_565)
                .build();
        ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(getApplicationContext())
                .defaultDisplayImageOptions(defaultOptions)
                .build();

        ImageLoader.getInstance().init(config); 
```

现在，只需在您的意图中传递图像 URL 并使用 UIL 加载图像。例如，在您新创建的活动中，图像将立即加载，因为它是从缓存中加载的 - 即使您的图像 URL 自下载后已过期。

* * *

## 回答 #7

> 赞同：-7
> 
> 时间：2012-06-13T08:03:51.893

```
Bundle b = new Bundle();
b.putSerializable("Image", Bitmap);
mIntent.putExtras(b);
startActivity(mIntent); 
```

# hadoop - 如何将作业所需的库部署到所有数据节点？

> ID：11010389
> 
> 赞同：1
> 
> 时间：2012-06-13T07:50:43.087
> 
> 标签：hadoop, mapreduce

我正在运行一个需要大约 300mb 第三方库的 mapreduce 作业。为了避免在运行作业时将库复制到数据节点的成本。我想知道是否有一种方法/工具可以在作业开始之前将这些库预部署到所有数据节点。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T09:36:33.510

您可以将其部署到 Hadoop 的分布式缓存中。Pere Ferrera Bertran[很好地解释了这一点](http://www.datasalt.com/2011/05/handling-dependencies-and-configuration-in-java-hadoop-projects-efficiently/)

# java - 在java中合并地图

> ID：11010392
> 
> 赞同：1
> 
> 时间：2012-06-13T07:51:00.933
> 
> 标签：java, merge, maps

我想做的很简单。我想合并两张地图。说

```
map1={(1,"one"),(2,"two"),(3,"three");
map2={(1,"onetoo"),(4,"four")}; 
```

如果我遵循这个->

```
map3.putall(map1);
map3.putall(map2); 
```

那么 1 的值也是一个，但是当我反向操作时，它是一个。无论如何我可以改变它吗？我的意思是java覆盖并只放置一个键的最新值。即，如果 onetoo 在一个之后添加（在它们各自的映射中），那么无论 putall 调用 map3 的顺序如何，该值仍然是 onetoo。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T07:55:53.853

没有办法做到这一点，除非您存储添加值的实际时间。

说`map1={(1,("one", 15:15)), (2, ("two", 15:16))}`

然后，您可以添加所有 map1，然后仅在密钥不存在或存在但具有较早时间戳的情况下迭代 map2 添加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T07:58:34.197

这就是地图的工作方式，它们使用您设置为键的对象的哈希码作为在地图条目中识别其自身的一种方式，并且您可以看到它必须是唯一的。

因此，您必须指定另一个键，因为整数值 1 的哈希码为 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T10:04:05.440

好吧，如果您的程序按您的意愿运行，那么预测以下输出

```
 map3.get(1); 
```

你永远无法知道它是“One”还是“Onetoo”。

为了防止任何此类问题，Java 中的 Map 被设计为仅包含唯一键。

所以，如果你写

```
map3.putall(map1); 
```

1 的值为“一”。但只要你写

```
map3.putall(map2); 
```

1 的值被重置并变为“onetoo”。反转时会发生反转。可能的解决方案可能是。

1.  将您的键放入地图中，以使它们（键）唯一地标识一个对象。因此，无论将来何时合并地图，键中都不会发生冲突（就重复性而言）。

2.  If you can't do it, then a possible solution could be to get all keys of every map and check for duplicity and change the duplicate keys in such a way that you can retrieve your objects without hassle.

# javascript - 在 Chrome 扩展程序中获取当前页面 URL

> ID：11010396
> 
> 赞同：5
> 
> 时间：2012-06-13T07:51:36.353
> 
> 标签：javascript, google-chrome, google-chrome-extension

我想从我的`default_popup`页面获取当前页面的 URL，如下所示：

```
chrome.tabs.query({active:true},function(tab){
    url = tab.url;
}); 
```

我已经在文件中注册了这个`popup.html`页面。`manifest.json`但是我收到错误消息：

> 未捕获的类型错误：无法调用未定义的方法“查询”

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T10:46:48.793

其实错误

```
Uncaught Type Error: Cannot call method 'query' of undefined 
```

是因为我单独运行 popup.html 页面（与扩展程序分开）意味着我在浏览器中明确打开 popup.html 页面以查找错误但我忘记了 popup.html 如果它是扩展程序页面和我的扩展程序可以使用 chrome api没有显示 url，因为我使用的是 tab.url 而不是 tab[0].url 所以[汤姆](https://stackoverflow.com/users/1313206/tom)建议正确回答。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T08:11:53.857

回调参数应指定如下所示的函数：

```
function(array of Tab result){...} 
```

也许你应该这样写

```
url = tab[0].url; 
```

# java - 使用枚举时在 Java 中找不到类错误

> ID：11010397
> 
> 赞同：0
> 
> 时间：2012-06-13T07:51:41.423
> 
> 标签：java, classnotfoundexception

我有以下代码：

```
enum CarEnum {
   BMW("BMW"), TOYOTA("Toyota"), FORD("Ford");
   String name;
   CarEnum(String s) {
      name = s;
   }
}
class Cars {
   static CarEnum a;
   public static void main(String[] args) {
      System.out.println(a.BMW.name + " " + a.FORD.name);
   }
} 
```

它在一个名为 Cars.java 的文件中

当我尝试运行它时，我收到以下错误：

```
java.lang.NoClassDefFoundError: Car
Caused by: java.lang.ClassNotFoundException: Car
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
Exception in thread "main" 
```

为什么说找不到类 Car？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T08:00:08.347

1/您的代码正在运行我立即复制/粘贴它

2 /您在异常中提到了一个`Car`类，但代码中不存在

3/ 你确定要启动好的类主方法吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T07:59:16.257

试试这样：

```
public class Cars {
   enum CarEnum {
       BMW("BMW"), TOYOTA("Toyota"), FORD("Ford");
       String name;
       CarEnum(String s) {
          name = s;
       }
   }
   static CarEnum a = CarEnum.BMW;
   public static void main(String[] args) {
      //you never initialized your a so you can print
      System.out.println(a.name);
      //or to check all your Enums Names
      System.out.println(CarEnum.BMW.name + " " + CarEnum.Ford.name);
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T08:16:05.967

请重新检查文件名。因为错误引用`Car`在代码中不可用。尝试将文件重命名为`Cars.java`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T08:12:33.450

唯一的问题是，当您运行代码时，您给出的是命令`java Car`而不是`java Cars`.

# jquery - jQuery 手风琴在 Ajax 中失败

> ID：11010398
> 
> 赞同：1
> 
> 时间：2012-06-13T07:51:42.653
> 
> 标签：jquery, ajax, json, accordion

我在我的应用程序中使用 JSON、Ajax 和 jQuery。在我的 html 中，我有以下标签：

```
<div id="tab"></div> 
```

Ajax 脚本如下（简化，仅显示必要的代码）：

```
function checkVal() {
    if (AJAX.readyState == 4 && AJAX.status == 200) {
        var json = JSON.parse(AJAX.responseText);
        var item = json.Item;
        txt = "<div#tab>";

        for (i = 0; i < item.length; i++) {
            txt = txt + "<h3>" + item[i].ItemId + "</h3>";
            txt = txt + "<p>" + item[i].ItemName;
            txt = txt + "<br>" + item[i].Price + "</p>";
        }
        jQuery('div#tab').html(txt + "</div>");
    }
} 
```

jQuery代码如下：

```
jQuery('div#tab').accordion({collapsible:true}); 
```

我发现手风琴不起作用，即使数据显示正确。我还发现`jQuery('div#tab').draggable()`虽然手风琴失败了，但它仍然有效。

有人可以解释这种奇怪的行为吗？还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T07:57:36.087

我认为就您发布的内容而言，您的 for 循环存在问题，不应该是这样的：

```
var txt = "";
for(i=0;i<item.length;i++) {
    txt+="<h3>"+item[i].ItemId+"</h3>";
    txt+= "<div><p>" +item[i].ItemName;
    txt+= "<br>" +item[i].Price+ "</p></div>";
}
jQuery('div#tab').html(txt); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T08:07:14.623

在`jQuery('div#tab').html(txt);`循环中，您每次都会覆盖 div。你应该在循环之后做

根据您的编辑：

```
txt=""
    for{...}
$('#tab').html(txt) 
```

因此，当 html 代码中已经存在时，从 txt 中删除“div”标签

# wordpress - 如何更改 CPT 的管理员 Wordpress 帖子列表模板？

> ID：11010401
> 
> 赞同：0
> 
> 时间：2012-06-13T07:51:51.297
> 
> 标签：wordpress, templates, custom-post-type

我正在尝试更改添加到 wordpress 的自定义帖子的后端帖子列表模板。为清楚起见，下图显示了我所说的“发布列表模板”的含义：

[![图片]](../Images/bdb7aa0ef4544ff07c45638ffc62f392.png)](https://i.imgur.com/Pleon.png)

常规帖子列表模板显示“标题”、“作者”、“类别”、“标签”、“语言”和“日期”字段。但是，我的自定义帖子具有额外的功能和其他我想添加到此模板的自定义字段，但我找不到该方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T07:58:03.823

那么你想添加什么？很可能您必须深入研究 Wordpress 代码才能更改它。我从来没有见过这种功能的插件。你还想补充什么？

您需要查看的代码是“/wp-admin/edit.php”。这是一个相当长且相当复杂的文件。祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T06:44:28.770

找到了答案！
“manage__posts_columns”过滤器可用于修改显示的列。
“manage_posts_custom_column”操作可用于修改这些列的内容。
添加自定义列的代码示例：

```
function change_columns( $cols ) {
  $cols = array(
    'cb'       => '<input type="checkbox" />',
    'title'      => __( 'Title',      'trans' ),
    'vin'      => __( 'Vin #',      'trans' ),
    'make' => __( 'Make', 'trans' ),
    'model'     => __( 'Model', 'trans' ),
    'year'     => __( 'Year', 'trans' ),
    'color'     => __( 'Color', 'trans' ),
    'thumbnail'     => __( 'Image', 'trans' ),
  );
  return $cols;
}
add_filter( "manage_tek_car_post_posts_columns", "change_columns" ); 
```

将内容添加到这些列的代码示例：

```
function custom_columns( $column, $post_id ) {
  switch ( $column ) {
    case "vin":
      $colvin = get_post_meta( $post_id, 'vin', true);
      echo $colvin;
      break;
    case "make":
      $colmake = get_post_meta( $post_id, 'carmake', true);
      echo $colmake;
      break;
    case "model":
      $colmodel = get_post_meta( $post_id, 'carmodel', true);
      echo $colmodel;
      break;
    case "year":
      $colyear = get_post_meta( $post_id, 'caryear', true);
      echo $colyear;
      break;
    case "color":
      $colcolor = get_post_meta( $post_id, 'excolor', true);
      echo $colcolor;
      break;
  }
}

add_action( "manage_posts_custom_column", "custom_columns", 10, 2 ); 
```

来源：http: [//yoast.com/custom-post-type-snippets/](http://yoast.com/custom-post-type-snippets/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T08:05:55.990

我刚刚在下面添加了类似的内容`wp-admin/includes/class-wp-list-table.php`

```
<table class="wp-list-table <?php echo implode( ' ', $this->get_table_classes() ); ?>" cellspacing="0">
<thead>
<tr>
SWapnesh
</tr> 
```

并且所有内容都在页面上正确`wp-admin/edit.php`显示（代码在我的 wordpress 中的第 775 行附近）

# iphone - 如何在作为 IBoutlet 添加到视图的表视图中显示数据？

> ID：11010407
> 
> 赞同：-1
> 
> 时间：2012-06-13T07:52:18.000
> 
> 标签：iphone, uitableview

我创建了一个表格视图插座，并将一个表格视图拖到我的 view.outlet 连接到表格视图。现在我无法在表格视图中显示任何数据。如何做到这一点....只想访问表格视图。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T07:58:01.267

要在表格中显示数据，您必须实现[UITableViewDataSource](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html)和[UITableViewDelegate](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html)协议。您可以查看有关该内容的任何教程（例如[this](http://www.icodeblog.com/2008/08/08/iphone-programming-tutorial-populating-uitableview-with-an-nsarray/)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T07:59:17.817

您必须实现 tableview 数据源和委托方法。请记住，您的类应该是 tableview 的委托和数据源。我的意思是连接插座后，您必须为 tableview 提供数据源和委托。此链接可以帮助您：

[http://www.icodeblog.com/2009/05/24/custom-uitableviewcell-using-interface-builder/](http://www.icodeblog.com/2009/05/24/custom-uitableviewcell-using-interface-builder/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T08:03:31.077

为了在表中显示数据，您需要实现 tableview 数据源方法。参考这个链接： [UITableViewDataSource 协议参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html)

并将 UITableView 数据源属性设置为您的控制器。如果你想对 tableview 执行一些操作，那么你需要实现它的委托方法：参考这个链接：

[UITableViewDelegate 协议参考](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableViewDelegate_Protocol/Reference/Reference.html)

# php - 用于特定事件的 ajaxStart 和 ajaxStop

> ID：11010410
> 
> 赞同：2
> 
> 时间：2012-06-13T07:52:27.633
> 
> 标签：php, jquery, ajax

如何`ajaxStart`使用以下方法为特定事件绑定函数：

```
$(document).ajaxStart(function () {
  alert("started");
});
$(document).ajaxStop(function () {
  alert("Ended");
}); 
```

尝试了此代码，但它会在自动完成启动时运行。

场景必须是这样的：每当我提交表单时，都会调用该函数。但是当我只是通过 ajax 使用自动完成来获取值时，`ajaxStart`不`ajaxStop`应该被调用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T07:58:51.343

> 但是当我只是通过 ajax 使用自动完成来获取值时，不应该调用 ajaxStart 和 ajaxStop。

您可以创建一个布尔变量来跟踪用户是否正在键入，例如：

```
<script>
var isTyping = false;

// inside your autocomplete handler set isTyping to true

$(document).ajaxStart(function(){
    if (! isTyping) alert("started");
});
$(document).ajaxStop(function(){
    if (! isTyping) alert("Ended");
});

</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T07:58:51.623

如果您使用主要功能和它的子功能，那就更好了。

```
$.ajax({
 url: 'url_to_page'
 beforeSend: function(req){ //Before the request is taking off},
 error: function(req){ //If there were a error},
 success: function(req){ //When it all was done}
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T07:54:41.717

```
 $.ajax({
      url :'your url',
      data: {
           //data to send if any
      },
      type: 'POST',
      success:function(msg){
           //eqv to ajaxstop if OK
      },
      beforeSend:function(){
           //before ajax starts
      },
      error:function(){
           //failure in ajax
      }
 }); 
```

# iphone - ImportError：没有名为 zope.interface 的模块

> ID：11010412
> 
> 赞同：12
> 
> 时间：2012-06-13T07:52:35.770
> 
> 标签：iphone, python, ios

我正在尝试使用[http://www.raywenderlich.com/3932/how-to-create-a-socket-based-iphone-app-and-server为 iphone 运行服务器](http://www.raywenderlich.com/3932/how-to-create-a-socket-based-iphone-app-and-server)

我的机器是 mac 10.6.8 Python 版本：2.7.3 我对 python 没有任何了解。我另外安装了 Twisted-12.1.0 但我仍然收到此错误。

回溯（最后一次调用）：文件“chatserver.py”，第 1 行，来自 twisted.internet.protocol 导入协议，工厂文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/ site-packages/twisted/internet/protocol.py"，第 15 行，从 zope.interface 导入实现 ImportError：没有名为 zope.interface 的模块

后来我下载了 zope.app.wsgi-3.15.0 4 但我不知道如何使用它。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-10-21T14:41:34.540

问题是`__init__.py`zope 目录下不存在文件，因此不会扫描该目录以进行导入。

`__init__.py`在 zope 目录下创建一个空白文件就可以了。

我通过执行以下命令浏览到 zope 目录解决了 UNIX 中的这个错误：

```
$touch __init__.py 
```

我可以确认这也适用于 zope 接口的 virtualenv pip 安装

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-04T10:42:00.683

这是一个[解决方案](http://anibalpacheco.com/?p=51)

它说通过 pip 安装 zope 模块会破坏您的 zope 安装，因为 pip 将其安装在原始 zope 模块目录以外的另一个目录中。

从链接

> 使用 pip 安装 zope 模块后，例如 z3c.password 您的 zope 安装会损坏。
> 
> 这是因为 pip 已经将模块安装在 /usr/local/lib/python2.6/dist-packages/zope 并且原始模块 zope.interface 在 /usr/share/pyshared/zope/interface/ 并且在以下情况下具有较小的相关性输入。

对我有用的是（也在链接中给出）：

```
cd /usr/local/lib/python2.7/dist-packages/zope 
sudo ln -s /usr/share/pyshared/zope/interface/ 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-13T11:15:34.087

在我的脑海中，您可以为此使用easy_install。

您将需要 python-setuptools 然后您应该能够使用

```
easy_install zope.interface 
```

如果我没记错的话，应该将 twisted 作为 OS X python 安装的一部分进行安装。为 Mac OS X 安装 zope.interface 做一个快速的谷歌。由于 twisted 是一个如此广泛使用的库，所以那里有很多信息。

# c# - 需要对此 XML 结构的 LINQ 选择查询的想法

> ID：11010414
> 
> 赞同：0
> 
> 时间：2012-06-13T07:52:41.780
> 
> 标签：c#, linq-to-xml

我正在开发一个自定义搜索控件并根据下面的示例 XML 设置其配置。因此，如果用户在他的 ASPX 页面中使用我的控件并在他的页面中声明一个属性为：

```
<ccl:Search control id='searchtextbox' PageName='Master' /> 
```

然后我需要考虑**Pagename name='Master'**并设置在此提到的所有属性。同样对于 PageName='SearchResults'

```
<configuration>
 <Pagename name='Master'>
   <Key id='DefaultText'>Search</Key>
   <Key id='SearchBoxCss'>btn</Key>
   <Key id='ButtonText'>Search</Key>
   <Key id='AutocompleteEnabled'>true</Key>
   <Key id='EnableFilterDropNames'>false</Key>
   <Key id='FilterDropNames'>All Areas;Articles</Key>       
 </Pagename>
 <Pagename name='SearchResults'>
   <Key id='DefaultText'>Search</Key>
   <Key id='SearchBoxCss'>btn</Key>
   <Key id='ButtonText'>Search</Key>
   <Key id='AutocompleteEnabled'>false</Key>
   <Key id='EnableFilterDropNames'>false</Key>
   <Key id='FilterDropNames'>All Areas;Articles;Products</Key>                            
 </Pagename>
</configuration> 
```

您能否建议根据**Master**或**SearchResults选择必要的****LINQ代码**

 ****我试过的：

```
var ch = from elem in doc.Descendants("Pagename")
                   where elem.Attribute(XName.Get("name")).Value == "Master"
                   select new
                   {
                       Children = elem.Descendants("Key").Attributes()
                   }; 
```

这只会返回属性列表，而不是必要的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T08:12:14.960

```
var ch = doc.Descendants("PageName")
            .Where(p => (string)p.Attribute("name") == "Master")
            .Elements("Key")
            .Select(k => new
                         {
                             Id = (string)k.Attribute("id"),
                             Value = k.Value
                         }
            ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T08:02:29.733

你可以试试：

```
elem.Descendants("PageName").
            Where(element => element.Attribute("Name").Value == "Master").First().
            Descendants().Select(element => element.Value); 
```

含义-> 获取名称为“Master”的第一个子节点，然后取其所有子节点的值****

# uikeyboard - uikeyboard 在导航顶部留下黑色部分

> ID：11010416
> 
> 赞同：0
> 
> 时间：2012-06-13T07:52:43.920
> 
> 标签：uikeyboard, ios5.1, uinavigationcontroller

我在 ipad 上有一个表格，最后有很多文本字段和一个按钮。当它处于活动状态时，键盘下方有一些字段。为了使键盘后面的隐藏 texfield 可见，我正在使用以下代码。

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
[self animateTextField:textField up:YES];
}

- (void)textFieldDidEndEditing:(UITextField *)textField
{
_scrollView.frame=CGRectMake(0, 0, 1024, 655);
[self animateTextField:textField up:NO];
}

- (void) animateTextField: (UITextField*) textField up: (BOOL) up
{
CGPoint temp = [textField.superview convertPoint:textField.frame.origin toView:nil];
UIInterfaceOrientation orientation =
[[UIApplication sharedApplication] statusBarOrientation];
if (orientation == UIInterfaceOrientationPortrait)
{
    // NSLog(@"portrait");
    if(up)
    {
        int moveUpValue = temp.y+textField.frame.size.height;
        animatedDis = 264-(1024-moveUpValue-5);
    }
}
else if(orientation == UIInterfaceOrientationPortraitUpsideDown)
{
    if(up)
    {
        int moveUpValue = 1004-temp.y+textField.frame.size.height;
        animatedDis = 264-(1004-moveUpValue-5);
    }
}
else if(orientation == UIInterfaceOrientationLandscapeLeft)
{
    if(up)
    {
        int moveUpValue = temp.x+textField.frame.size.height;
        animatedDis = 352-(768-moveUpValue-5);
    }
}
else
{
    if(up)
    {
        int moveUpValue = 768-temp.x+textField.frame.size.height;
        animatedDis = 352-(768-moveUpValue-5);
        _scrollView.frame = CGRectMake(0, 0, 1024, 655-240);
    }

}
if(animatedDis>0)
{
    const int movementDistance = animatedDis;
    const float movementDuration = 0.3f;
    int movement = (up ? -movementDistance : movementDistance);
    [UIView beginAnimations: nil context: nil];
    [UIView setAnimationBeginsFromCurrentState: YES];
    [UIView setAnimationDuration: movementDuration];
    if (orientation == UIInterfaceOrientationPortrait)
    {
        self.view.frame = CGRectOffset(self.view.frame, 0, movement);
    }
    else if(orientation == UIInterfaceOrientationPortraitUpsideDown)
    {
        self.view.frame = CGRectOffset(self.view.frame, 0, movement);
    }
    else if(orientation == UIInterfaceOrientationLandscapeLeft)
    {
        self.view.frame = CGRectOffset(self.view.frame, 0, movement);
    }
    else
    {
        self.view.frame = CGRectOffset(self.view.frame, 0, movement);
    }
    [UIView commitAnimations];
}
} 
```

我也在使用滚动视图。我的问题是，当键盘处于活动状态并且我按下按钮时，它会将我带到下一个屏幕。现在，如果我向后导航，则键盘处于活动状态并设置了先前的动画。现在，如果我隐藏键盘，整个视图会向下滚动，并在顶部留下黑色部分。如何处理这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T11:35:51.703

好的。经过大量研究，我找到了一个简单的方法。这是通知的使用。在我的 viewDidLoad 中，我添加了这两个键盘通知。

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWasShown:) name: UIKeyboardDidShowNotification object:nil];

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillBeHidden:) name:UIKeyboardWillHideNotification object:nil]; 
```

这些是 2 个选择器方法：

```
-(void)keyboardWasShown:(NSNotification *)aNotification
{

if (displayKeyboard==YES) {
    return;
}
NSDictionary* info = [aNotification userInfo];
NSValue* aValue = [info objectForKey:UIKeyboardBoundsUserInfoKey];
//NSValue* aValue = [info objectForKey:UIKeyboardFrameBeginUserInfoKey];
CGSize keyboardSize = [aValue CGRectValue].size;

NSLog(@"kbw====%fkbh====%f",keyboardSize.width,keyboardSize.height);

offset = _scrollView.contentOffset;

CGRect viewFrame = _scrollView.frame;

NSLog(@"svw====%fsvh===%f",viewFrame.size.width,viewFrame.size.height);
viewFrame.size.height -= keyboardSize.height-49;
NSLog(@"new view hgt =====%f",viewFrame.size.height);
_scrollView.frame = viewFrame;

CGRect textFieldRect = [activeField frame];
textFieldRect.origin.y += 10;
[_scrollView scrollRectToVisible: textFieldRect animated:YES];
displayKeyboard = YES;
}
-(void)keyboardWillBeHidden:(NSNotification *)aNotification
{

if (!displayKeyboard) {
    return; 
}

_scrollView.frame = CGRectMake(0, 0, 1024, 655);
_scrollView.contentOffset =offset;
displayKeyboard = NO;
}

-(BOOL) textFieldShouldBeginEditing:(UITextField*)textField {
activeField = textField;
return YES;
} 
```

displayKeyboard、offset 和 activeField 在 .h 文件中声明。

还要记得删除 viewDidDisappear:animated 中的通知

尽管此方法与前面所述的方法完全不同，但当 uikeyboard 处于活动状态时，在类之间导航时，此方法不会在顶部留下黑色部分。

我还注意到，如果我使用不推荐使用的`UIKeyboardBoundsUserInfoKey`方法来获得正确的键盘宽度和高度（我只在横向模式下工作）。而当我使用时`UIKeyboardFrameBeginUserInfoKey`，宽度和高度值被互换了。我仍在努力解决这个问题。

此外，当键盘出现时，它的上方附加了一个 49px 的固定空间。我假设那是我的标签栏高度，因此减去了 49。

# ios - 带有活动内容的页面卷曲

> ID：11010422
> 
> 赞同：0
> 
> 时间：2012-06-13T07:53:08.490
> 
> 标签：ios, ios4, viewflipper, page-curl, flipboard

我有一个杂志应用程序。在其中，我实现了用于页面卷曲的 AFK Page Flipper。但现在我不知道如何创建活动内容。我的意思是，例如，当我在页面上有图像时，我想点击它并在模型视图中变大。就像在 Flipboard 应用程序中一样。有任何想法吗？谢谢回复！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:11:15.190

我明白了... Flipboard 的页面打开是滑动而不是点击。所以我想显示我点击的图像。当我想翻页时，我sipe...

# javascript - Knockout.js 和复选框的双向绑定

> ID：11010424
> 
> 赞同：0
> 
> 时间：2012-06-13T07:53:10.167
> 
> 标签：javascript, knockout.js

首先：我是淘汰 js 的新手，并试图围绕淘汰/mvvm 的思维方式来思考，所以如果我的问题被证明是微不足道的，请原谅我。

我所拥有的是以下情况：我有一个淘汰视图模型，其中包含一个 observableArray 所选票证对象。该数组表示更大票证集合的用户定义选择/子集。整套票都列在一个 jqgrid 表中，每一行都有一个复选框，应该告诉您是否选择了每张票。这意味着只要“selectedTickets”数组发生变化，就需要更新复选框的值。除此之外，我还希望用户能够单击每个复选框，以便从选择中添加/删除票证。这似乎是一个相当可接受的功能，对吧？

但是，我确实很难看到如何使用淘汰赛“检查”绑定来实现这一点。我的第一个想法是在名为“isSelected”的视图模型对象上使用计算/依赖的可观察对象，这将反映 selectedTickets 数组中的变化，并根据票证是否在 selectedTickets 数组中返回真或假。这里的第一个问题是我需要将一个参数传递给计算的 observable，说明它应该查找哪个票证 ID，并且据我所知，它只适用于可写的计算 observable。然而，获取复选框的状态似乎不像是一个写操作，所以已经开始闻起来了。下一个问题是绑定需要是双向的，因为我希望用户能够更改每个复选框的状态并相应地更新 selectedTickets 数组。这是一个不同的操作，因为它实际上会删除/添加票到 selectedTickets 数组。这将再次触发计算的 observable 尝试设置复选框的状态。如果我尝试这样做，似乎这两个用例最终可能会像无限循环一样结束。通过仅使用复选框的选中绑定，我还没有找到组合这两个用例的好方法。

我当然可以手动对复选框进行事件处理，方法是将侦听器连接到复选框上的更改事件和剔除视图模型中的 selectedTickets 数组，但我希望通过剔除绑定可以更加自动化。

希望有一些淘汰赛高手可以指导我走上一条好路，因为我觉得我已经偏离了这条路。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T10:05:07.897

在使用knockout.js时，你需要停止做事半途而废——如果你有一个item列表，数据属于viewmodel（不仅仅是select items），只有外观是由view定义的。

因此，我推荐一个可观察`items`的 type数组`Item`，它具有一个属性`isSelected`——然后可以通过计算的 observable 访问选定的项目：

```
var Item = function(name) {
    this.name = ko.observable(name);
    this.isSelected = ko.observable(false);
};

var ViewModel = function() {
    var self = this;

    self.items = ko.observableArray([
        new Item('Foo'), new Item('Bar'), new Item('Foo Bar')
    ]);

    self.selectedItems = ko.computed(function() {
        return ko.utils.arrayFilter(self.items(), function(item) {
            return item.isSelected();
        });
    });
}; 
```

[http://jsfiddle.net/htZfX/](http://jsfiddle.net/htZfX/)

# maven-3 - 在 Maven 3 下，surefire 的 forkMode 是否“从不”与 cobertura 一起使用？

> ID：11010428
> 
> 赞同：1
> 
> 时间：2012-06-13T07:53:21.687
> 
> 标签：maven-3, cobertura, maven-surefire-plugin

从 maven 2 切换到 maven 3 后，我发现 cobertura 报告的测试覆盖率为 0%。我已经提出了关于使用哪些版本的 cobertura 和 surefire 的问题：[哪些版本的 cobertura 和 surefire 插件在 maven3 下一起工作？](https://stackoverflow.com/questions/10992522/what-versions-of-cobertura-and-surefire-plugins-work-together-under-maven3)

但是，我对问题进行了更深入的调查，发现配置片段不起作用：

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>${surefire.plugin.version}</version>
            <configuration>
                <forkMode>never</forkMode>
                <redirectTestOutputToFile>true</redirectTestOutputToFile>
                <argLine>-Xmx512m -XX:MaxPermSize=256m</argLine>
            </configuration>
        </plugin> 
```

将 forkMode 从更改`never`为`once`测试覆盖率后开始生成。所以，问题不在于插件版本不兼容本身，而是cobertura在maven 3下对surefire的各种fork模式支持的问题。

所以，我的问题是，它是一个错误，还是 cobertura 插件是这样设计的，它不适用于一些`forkMode=never`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:18:18.117

Cobertura 旨在在 JVM 退出时输出覆盖结果。

`<forkMode>never</forkMode>`指示 Maven 不要派生一个 JVM 来运行测试，而是重新使用当前的 JVM。

在这种情况下，可能直到 Maven 执行完成后才会输出覆盖结果。

在 Maven 2 中，我不是 100% 确定的，但我认为 cobertura 插件使用的分叉生命周期（邪恶）是如何工作的，导致分叉生命周期的 JVM 分叉，或者类加载器卸载有效地产生了相同的结果。

因此，在我看来，这是 Maven 2 的一个错误，覆盖范围恰好可以使用`<forkMode>never</forkMode>`。

*注意：* `<forkMode>never</forkMode>`被认为是非常危险的，因为系统属性不是每个类加载器的范围，以及其他问题。`<forkMode>once</forkMode>`通常是最好的选择（除非您有滥用内存的测试 - 某些版本的 JUnit 将所有测试类实例保留在内存中，直到在运行结束时报告，所以如果每个测试类都持有重物，GC 将无法在测试运行结束之前清除它们。在这种情况下，将需要 perclass/always forkMode）

# axapta - 将 .NET 中的 Dynamics 枚举传递给 BusinessConnector 调用

> ID：11010429
> 
> 赞同：1
> 
> 时间：2012-06-13T07:53:24.807
> 
> 标签：axapta, microsoft-dynamics, business-connector

我试图了解如何访问动态枚举以便能够将它们传递给 BusinessConnector 调用。例如，您可以调用以下命令：

```
pobj = (AxaptaObject)ax.CreateAxaptaObject("PurchFormLetter", [ENUM]); 
```

但是，我不知道如何传入 [ENUM] 的正确值。在 X++ 中，枚举是 DocumentStatus::PurchaseOrder，但我似乎无法从任何地方访问它。任何人都可以帮助找出如何传递价值吗？

不幸的是，传入枚举的数值不起作用（在这种情况下，我需要的值是 2）。它返回“函数 PurchQuantity::construct 已被错误使用”的 XPPException。

```
AxaptaObject pobj = (AxaptaObject)ax.CreateAxaptaObject("PurchFormLetter", 2); 
```

如果有人可以请提供帮助，将不胜感激。

问候，史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:41:37.510

[其他人](http://objectmix.com/axapta/793443-using-axaptas-base-enums-vbulletin-net-through-business-connector.html)也有同样的问题。他们通过创建[一个](http://rusgon.blogspot.dk/2007/12/integration-ax-with-side-applications.html)`enum proxy`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T00:28:12.190

好的，这适用于遇到此问题的其他所有人：

如果您想在不使用 X++ 的情况下完全从 .NET 访问枚举值：

```
string enumName = "DocumentStatus", enumValue = "PurchaseOrder";
object enumObj = (int)axa.CallStaticClassMethod("Global", "enumName2Id", enumName);
AxaptaObject dict = (AxaptaObject)axa.CreateAxaptaObject("DictEnum", enumObj);
object res = dict.Call("symbol2Value", enumValue); 
```

如果需要重用，上面可以很容易地变成一个函数。

尽管如此，执行以下操作仍无效：

```
AxaptaObject pur = (AxaptaObject)axa.CreateAxaptaObject("PurchFormLetter", res); 
```

但是，您可以这样做：

```
AxaptaObject pur = (AxaptaObject)axa.CallStaticClassMethod("PurchFormLetter", "construct", res); 
```

这将允许您传入枚举的整数值（在本例中为变量“res”）。然后，您可以使用此对象过帐采购订单。

希望这可以帮助某人。

问候，史蒂夫

# wcf - WCF 意外崩溃，方法不允许

> ID：11010433
> 
> 赞同：0
> 
> 时间：2012-06-13T07:53:45.370
> 
> 标签：wcf, c#-4.0

我有像这样的合同的 WCF 网络服务

```
[OperationContract]
void UpdateEncounterStatus(int BookingID, string BookingStatus); 
```

并在课堂上

```
 [WebInvoke(Method = "POST",
ResponseFormat = WebMessageFormat.Json,
UriTemplate = "UpdateEncounterStatus/{BookingID}/{BookingStatus}")]
        public void UpdateEncounterStatus(int BookingID, string BookingStatus) 
```

但是当调用它时，我得到

合同“IPMA”中的“UpdateEncounterStatus”操作有一个名为“BookingID”的路径变量，它没有“字符串”类型。UriTemplate 路径段的变量必须具有“字符串”类型。

当将参数更改为字符串时，我得到了

方法不允许任何想法如何解决

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T10:23:57.270

您只能将字符串类型用于`UriTemplate`. 在您的示例`BookingID`中`integer`，它出现在路线中，因此无法正常工作。如果你转向`BookingID`查询字符串，它们就会起作用。

有关更多详细信息，请参阅此[线程](https://stackoverflow.com/questions/545988/can-i-pass-non-string-to-wcf-restful-service-using-uritemplate)。

# python-3.x - 使用 python3 和 mod_wsgi（没有 Django）的裸骨 Web 表单示例？

> ID：11010437
> 
> 赞同：3
> 
> 时间：2012-06-13T07:54:06.267
> 
> 标签：python-3.x, mod-wsgi, wsgi

我有一个 apache + mod_wsgi + python3.1 设置。（普通，没有 Django 或其他框架。）我可以编写输出 HTML 的应用程序，但我似乎无法让基本的 Web 表单 + POST 解析器工作，所以我也可以处理输入。我在网上找到了一些使用 python2 多年的示例，还有几页描述了使用 python3 的“您应该注意的问题”，这些问题使 python2 示例过时（python3 新的编码问题的长列表等）

会有人碰巧有python3代码（“def application（environ，start_response）：...”），它会放置一个带有几个简短菜单的小型UTF-8 Web表单，当您提交（POST）它时，会将那些将 UTF-8 菜单选择转换为 python3 字符串？一个 python3 脚本，可以正确处理关于告诉它从请求中读取正确的字节数的问题，不会将 UTF-8 用于非 ASCII 字符，不使用不推荐使用的函数等，可以使用作为试图使用 mod_wsgi + python3 进行输入和输出的人的基本模板？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T07:40:07.390

```
from urllib.parse import parse_qsl

def application(environ, start_response):
    try:
        path = environ['PATH_INFO']
    except KeyError:
        path = environ['REQUEST_URI'].decode('utf-8').split('=', 1)[1]
    method = environ['REQUEST_METHOD']
    get = dict(parse_qsl(environ['QUERY_STRING'], keep_blank_values=True))
    post = dict(parse_qsl(environ['wsgi.input'].read().decode('utf-8')))

    if path == '/my_form':
        start_response('200 OK', [('Content-Type', 'text/html; charset=utf-8')])
        yield '''\
<form action="" method="POST">
    <label for="name">What is your name?</label>
    <input type="text" name="name"/>
    <input type="submit"/>
</form>'''.encode('utf-8')
        if method == 'POST' and 'name' in post:
            yield "<p>Hello, {}!</p>".format(post['name']).encode('utf-8')
    else:
        start_response('404 Not Found', [('Content-Type', 'text/html')])
        yield "<h1>404 Not Found</h1>".encode('utf-8') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T13:20:49.610

您可能不需要任何框架，但我鼓励您尝试[Bottle](http://bottlepy.org/)。它不需要任何安装，您只需将*bottle.py*文件放入您的项目文件夹即可。
是的，它适用于 Python 3！

```
import bottle
from bottle import get, post, request

@get('/my_form')
def show_form():
    return '''\
<form action="" method="POST">
    <label for="name">What is your name?</label>
    <input type="text" name="name"/>
    <input type="submit"/>
</form>'''

@post('/my_form')
def show_name():
    return "Hello, {}!".format(request.POST.name)

application=bottle.default_app()       # run in a WSGI server
#bottle.run(host='localhost', port=8080) # run in a local test server 
```

# android - AutoCompleteTextView 在适配器更改时隐藏和显示下拉菜单

> ID：11010442
> 
> 赞同：4
> 
> 时间：2012-06-13T07:54:14.993
> 
> 标签：android

我有一个 AutoCompleteTextView，它通过 AsyncTask 从 API 获取建议。在 onPostExecute 我创建一个新适配器，将其设置为 AutoCompleteTextView 并将数据集更改通知给适配器。

在 TextWatcher 中，我执行 AsyncTask。

一切正常，除了每次更改适配器时都会关闭并显示下拉列表。

即使数据发生变化，如何保持下拉菜单打开？

```
searchText.addTextChangedListener(new TextWatcher() {
        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {
            // TODO Auto-generated method stub

        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub

        }

        @Override
        public void afterTextChanged(Editable s) {
            if (s.length() > 0) {
                searchPlacesTask.cancel(true);
                searchPlacesTask = new SearchPlacesTask();
                searchPlacesTask.execute(s.toString().replace(" ", "-"));
            } else {
                searchPlacesTask.cancel(true);
                searchPlacesTask = new SearchPlacesTask();
                searchPlacesTask.execute();
            }
        }
    });

private class SearchPlacesTask extends AsyncTask<String, Void, PlacesAPIResult> {

    @Override
    protected PlacesAPIResult doInBackground(String... params) {
        PlacesAPIResult result = new PlacesAPIResult();

        if (params.length > 0) {
            places = PlacesAPIRestMethod.placeAutocomplete(params[0], currentLocation.getLatitude(), currentLocation.getLongitude(), 
                    500, null, result);
        } else {
            places = PlacesAPIRestMethod.placeSearch(currentLocation.getLatitude(), currentLocation.getLongitude(), 0, true, result);
        }

        return result;
    }

    @Override
    protected void onPostExecute(PlacesAPIResult result) {
        if (result.getResult() == PlacesAPIResult.OK) {
            adapter = new PlaceAdapter(ChooseLocationActivity.this, R.layout.locationrow, places);
            searchText.setAdapter(adapter);
            adapter.notifyDataSetChanged();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-10T16:31:19.120

在适配器中实现 Filterable，并添加此代码。

```
public class ListAdapter extends ArrayAdapter<String> implements Filterable{

    private List<String> listResult;

    ...
    @Override
    public Filter getFilter() {
        Filter filter = new Filter() {

            @Override
            protected FilterResults performFiltering(CharSequence constraint) {
                FilterResults filterResults = new FilterResults();
                if (constraint != null) {
                    // Assign the data to the FilterResults
                    filterResults.values = listResult;
                    filterResults.count = listResult.size();
                    }
                return filterResults;
                }

            @Override
            protected void publishResults(CharSequence constraint, FilterResults results) {
                if (results != null && results.count > 0) {
                    notifyDataSetChanged();
                }
                else {
                    notifyDataSetInvalidated();
                }
            }};
        return filter;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T03:27:04.263

我有同样的问题并以这种方式处理：

1.  `ArrayAdapter`创建了一个扩展并实现`TextWatcher`向其传递空数据集合的外部类。
2.  以与您类似的方式启动工作线程。
3.  实现`getFilter()`的方法。那里没有做任何重要的事情。只是一个存根`notifyDatachanged()`。
4.  更新了适配器的数据`onProgressUpdate`。也应该在`onPostExecute`. 我的问题就在这里。起初我完全清除了旧数据，然后才添加了新数据。这导致了项目下拉列表的“隐藏和显示”效果。然后我改变了清除旧数据的方式 - 我逐项删除旧数据并逐项添加新数据。这解决了不想要的效果。

在您的情况下，我建议将`PlaceAdapter`适配器的构造和设置移出`onPostExecute`并执行以下操作：

```
@Override
    protected void onPostExecute(PlacesAPIResult result) {
        if (result.getResult() == PlacesAPIResult.OK) {
            //TODO: iterate adapter's data and remove every item
            //TODO: iterate `places` collection and add each item to adapter's data
            adapter.notifyDataSetChanged();
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-19T16:33:52.527

`AutoCompleteTextView.setAdapter()`方法接受继承`ListAdapter`和`Filterable`接口的类的实例。 `Filterable`界面是您问题的关键。

当您在其中键入文本时，`AutoCompleteTextView`它使用`Filter`从`Filterable.getFilter()`方法返回的文本来过滤下拉列表中的项目。

如果您`PlaceAdapter`从那里继承，`ArrayAdapter`您应该注意到`ArrayAdapter`已经实现了`Filterable`接口和`getFilter()`方法返回`ArrayFilter`，`performFiltering(CharSequence prefix)`方法中获取当前项`ArrayAdapter`，将它们转换为小写字符串，`item.toString().toLowerCase()`并仅过滤其中以 开头的单词`prefix.toString().toLowerCase()`。

接下来我注意到如果`Filter.performFiltering()`方法返回然后下拉列表被隐藏`FilterResults`。`FilterResults.count == 0`

因此，如果您没有`ArrayAdapter.getFilter()`使用执行您的自定义过滤器覆盖方法，`SearchPlacesTask`那么您最终会隐藏下拉列表，因为`Filter.performFiltering()`返回零结果并显示何时`SearchPlacesTask.onPostExecute()`分配新适配器和调用`notifyDataSetChanged()`。

最好的选择是不要在`AsyncTask`内部使用和调用您的 API 方法`Filter.performFiltering()`：

```
public class PlacesAdapter extends ArrayAdapter<String> {
    private final List<Place> items = new ArrayList<Place>();

    // other code
    // ...

    @Override
    public Filter getFilter() {
        return new Filter() {

            @Override
            protected FilterResults performFiltering(CharSequence constraint) {
                FilterResults filterResults = new FilterResults();
                String query = constraint != null ? constraint.toString() : "";
                List<Place> places;
                PlacesAPIResult result = new PlacesAPIResult();
                if (query.isEmpty()) {
                    places = PlacesAPIRestMethod
                        .placeSearch(currentLocation.getLatitude(), 
                            currentLocation.getLongitude(), 0, true, result);

                } else {
                    places = PlacesAPIRestMethod.placeAutocomplete(query, 
                        currentLocation.getLatitude(), currentLocation.getLongitude(), 
                        500, null, result);
                }
                if (result.getResult() == PlacesAPIResult.OK) {
                    filterResults.values = places;
                    filterResults.count = places.size();
                }
                return filterResults;
            }

            @Override
            protected void publishResults(CharSequence constraint, FilterResults results) {
                List<Place> places = (List<Place>) results.values;
                if (places != null) {
                    items.clear();
                    items.addAll(places);
                    notifyDataSetChanged();
                }
                else {
                    notifyDataSetInvalidated();
                }
            }
        };
    }
} 
```

如果您被迫使用，`AsyncTask`那么您可以像同步执行`SearchPlacesTask`一样等待任务完成并从方法返回结果。`Filter.performFiltering()``new SearchPlacesTask().execute(query).get()``Filter.performFiltering()`

`Filter.performFiltering()`方法在工作线程中调用，因此您不必担心 API 方法的异步执行。

`Filter.publishResults()`方法在 UI 线程中调用，这是您应该更新适配器并调用`notifyDataSetChanged()`.

`AutoCompleteTextView`当用户更快地更改文本然后加载新结果并取消以前的请求时管理重复请求，因此`Filterable`在您的适配器中实现是正确使用的唯一正确方法`AutoCompleteTextView`。

# ubuntu - 关闭项目时 Eclipse 崩溃

> ID：11010444
> 
> 赞同：0
> 
> 时间：2012-06-13T07:54:17.320
> 
> 标签：ubuntu, eclipse-indigo

我在 ubuntu 11.10 中使用 eclipse indigo

我的Java是

```
java version "1.6.0_06" Java(TM) SE Runtime Environment (build
1.6.0_06-b02) Java HotSpot(TM) 64-Bit Server VM (build 10.0-b22, mixed mode) 
```

我在我的 Eclipse 中打开了两个项目，当我尝试关闭这些项目中的任何一个时它崩溃了。每当发生崩溃时，我的主文件夹中有一个 hs_err_pidXXXX[X].log 文件，大小约为 100k。

我应该如何调试和解决这个问题？我找不到任何重复的线程。

我已将 hs_err_pid21233.log 复制到[此处的 Google 文档链接](https://docs.google.com/document/d/1JxowBeh-Y0WcqPFFZe9x8eswnrRiWP0bQfvBDgKN68c/edit?pli=1 "关联")

我尝试了@spektom 的建议。现在 eclipse 崩溃了，[这里附加了一个不同的错误](https://docs.google.com/document/d/1qj2GOnak-TrRIjAa97PouvQZFTco4JWH0gzFHIJgyK0/edit?pli=1 "附在这里")

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:18:16.063

我总是通过“谷歌搜索”来查找有问题的帧代码（在您的情况下是：[libjvm.so+0x1f125a]）。这可能会将您带到 Eclipse 或 Java 中的现有错误报告，其中包含有关变通方法的有用注释以及修复错误的版本信息。

对于您的具体问题，我找到了这些页面：

[https://groups.google.com/forum/?fromgroups#!topic/linux.debian.bugs.dist/0IGmtBE8nuQ](https://groups.google.com/forum/?fromgroups#!topic/linux.debian.bugs.dist/0IGmtBE8nuQ)

[https://bugs.launchpad.net/ubuntu/+source/openjdk-6/+bug/206620](https://bugs.launchpad.net/ubuntu/+source/openjdk-6/+bug/206620)

**解决方法**：[https ://bugs.launchpad.net/ubuntu/+source/eclipse/+bug/174759](https://bugs.launchpad.net/ubuntu/+source/eclipse/+bug/174759)

请继续尝试它们是否适合您！

# python - Python lxml cssselect第n次匹配

> ID：11010445
> 
> 赞同：0
> 
> 时间：2012-06-13T07:54:19.177
> 
> 标签：python, css-selectors, lxml

假设我有一些类似于此的 html：

```
<div id="content">
  <span class="green">something</span>
  <span class="blue">something</span>
  <span class="red">something</span>
  <span class="green">something</span>
  <span class="yellow">something</span>
</div> 
```

使用 cssselect 获取第二个元素的最佳方法是什么？我总是可以这样做`cssselect('span.green')`，然后从结果中选择第二个元素，但是在一个包含数百个元素的大页面中，我想它会慢得多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:03:25.287

虽然这不是您问题的答案，但这是我这样做的方式：

使用 XPath 而不是 cssselect：

```
>>> from lxml.etree import tostring
>>> from lxml.html.soupparser import fromstring
>>> x = tostring('<div id="content"><span class="green">something</span><span class="blue">something</span><span class="red">something</span><span class="green">something</span><span class="yellow">something</span></div>')
>>> x.xpath('//span[@class="green"][2]')
[<Element span at b6df71ac>]
>>> x.xpath('//span[@class="green"][2]')[0]
<Element span at b6df71ac>
>>> tostring(x.xpath('//span[@class="green"][2]')[0])
'<span class="green">something</span>' 
```

或者，如果您更喜欢 Python 中的元素列表：

```
>>> x.xpath('//span[@class="green"]')
[<Element span at b6df71ac>, <Element span at b6df720c>]
>>> tostring(x.xpath('//span[@class="green"]')[1])
'<span class="green">something</span>' 
```

# php - 通过 DQL 获取没有分组的用户

> ID：11010448
> 
> 赞同：-1
> 
> 时间：2012-06-13T07:54:33.390
> 
> 标签：php, sql, symfony, doctrine-orm

我有两个模型：具有多对多关系的用户和组。所以我需要选择所有没有分组的用户。我必须通过 DQL 来实现。

好的，还有更多信息。我在 symfony 2 中使用奏鸣曲管理包工作。在我的列表视图中，我想显示与组没有关系的用户。例如：当管理员在管理面板中创建用户时，他为该用户选择了组。但是当用户从前端注册时，该用户没有任何组。所以，我想看到所有这些没有组的用户。在管理类的奏鸣曲管理包中，我可以继承 createQuery 方法，在那里我可以编写自己的 DQL 查询。举个例子：

```
public function createQuery($context = 'list')
{
    $query = parent::createQuery($context);
    $query->andWhere('o.admin = TRUE');
    $query->orderBy('o.loginDate', 'DESC');

    return $query;
} 
```

因此，就我而言，我想选择没有组的用户，如下所示：

```
public function createQuery($context = 'list')
{
    $query = parent::createQuery($context);
    $query->addSelect('g');
    $query->leftJoin('o.groupList', 'g');

    // here I need some DQL which chose users without groups

    return $query;
} 
```

那么，现在有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:46:02.533

如果您与用户有关系，例如组属性是 ArrayCollection，那么您可以简单地让用户 where count(u.groups) = 0 或类似的东西？

# sql - 获取 SQL Server 中某个字符前后的所有内容

> ID：11010453
> 
> 赞同：68
> 
> 时间：2012-06-13T07:55:13.447
> 
> 标签：sql, sql-server

我的数据库中有以下条目：

```
images/test.jpg 
```

我想修剪条目，所以我得到：`test`

`/`所以基本上，我想要之前和之后的一切`.`

我该如何解决？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2014-05-31T08:20:56.973

使用以下功能

```
left(@test, charindex('/', @test) - 1) 
```

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2012-06-13T08:01:24.007

如果您想使用 SQL 将其从表中删除，请查看以下对您有帮助的函数：[`SUBSTRING`](http://msdn.microsoft.com/en-us/library/ms187748.aspx)和[`CHARINDEX`](http://msdn.microsoft.com/en-us/library/ms186323.aspx). 您可以使用它们来修剪您的条目。

可能的查询将如下所示（`col`包含图像目录的列的名称在哪里：

```
SELECT SUBSTRING(col, LEN(SUBSTRING(col, 0, LEN(col) - CHARINDEX ('/', col))) + 1, 
    LEN(col) - LEN(SUBSTRING(col, 0, LEN(col) - CHARINDEX ('/', col))) - LEN(SUBSTRING(
    col, CHARINDEX ('.', col), LEN(col)))); 
```

有点丑陋的野兽。它还取决于“dir/name.ext”的标准格式。

**编辑：**
这个（灵感来自[praveen](https://stackoverflow.com/users/1134928)）更通用，处理不同长度的扩展：

```
SELECT SUBSTRING(col, LEN(LEFT(col, CHARINDEX ('/', col))) + 1, LEN(col) - LEN(LEFT(col, 
    CHARINDEX ('/', col))) - LEN(RIGHT(col, LEN(col) - CHARINDEX ('.', col))) - 1); 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2017-01-04T13:13:57.767

前

```
SELECT SUBSTRING(ParentBGBU,0,CHARINDEX('/',ParentBGBU,0)) FROM dbo.tblHCMMaster; 
```

后

```
SELECT SUBSTRING(ParentBGBU,CHARINDEX('-',ParentBGBU)+1,LEN(ParentBGBU)) FROM dbo.tblHCMMaster 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2019-01-08T11:33:24.990

----选择/之前的字符，包括/

```
select SUBSTRING ('abcde/wxyz',0,CHARINDEX('/','abcde/wxyz')+1) 
```

--选择/之后的字符，包括/

```
select SUBSTRING('abcde/wxyz',CHARINDEX('/','abcde/wxyz'),LEN('abcde/wxyz')) 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-06-13T08:38:04.717

```
 declare @T table
  (
  Col varchar(20)
  )

  insert into @T 
  Select 'images/test1.jpg'
  union all
  Select 'images/test2.png'
  union all
  Select 'images/test3.jpg'
  union all
  Select 'images/test4.jpeg'
  union all
  Select 'images/test5.jpeg'

 Select substring( LEFT(Col,charindex('.',Col)-1),charindex('/',Col)+1,len(LEFT(Col,charindex('.',Col)-1))-1 )
from @T 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-09-03T07:58:38.760

我做了一个更通用的方法：

所以 ：

```
DECLARE @a NVARCHAR(MAX)='images/test.jpg';

 --Touch here
DECLARE @keysValueToSearch NVARCHAR(4000) = '/'
DECLARE @untilThisCharAppears NVARCHAR(4000) = '.'
DECLARE @keysValueToSearchPattern NVARCHAR(4000) = '%' + @keysValueToSearch + '%'

 --Nothing to touch here     
SELECT SUBSTRING(
           @a,
           PATINDEX(@keysValueToSearchPattern, @a) + LEN(@keysValueToSearch),
           CHARINDEX(
               @untilThisCharAppears,
               @a,
               PATINDEX(@keysValueToSearchPattern, @a) + LEN(@keysValueToSearch)
           ) -(PATINDEX(@keysValueToSearchPattern, @a) + LEN(@keysValueToSearch))
       ) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-04-28T14:18:53.970

我只是在我的一份报告中做到了这一点，而且非常简单。

试试这个：

```
=MID(Fields!.Value,8,4) 
```

注意：这对我有用，因为我试图获得的值是一个常数，不确定你想要获得的值也是一个常数。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-08-20T05:38:07.687

SELECT SUBSTRING('ravi1234@gmail.com',1,(CHARINDEX('@','ravi1234@gmail.com')-1)) 之前，RIGHT('ravi123@gmail.com',(CHARINDEX('@' ,'ravi123@gmail.com')+1)) 之后

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-07-26T04:17:43.897

我知道这已经有一段时间了..但这是一个想法

```
declare @test varchar(25) = 'images/test.jpg'

select
 @test as column_name
 , parsename(replace(@test,'/','.'),1) as jpg
 ,parsename(replace(@test,'/','.'),2) as test
  ,parsename(replace(@test,'/','.'),3) as images 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-08-20T11:21:15.817

下面的查询为您提供“-”前的数据前 W12345A-4S

```
SELECT SUBSTRING(Column_Name,0, CHARINDEX('-',Column_Name))  as 'new_name'
from [abc]. 
```

输出 - W12345A

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-04-19T18:50:07.413

我发现[Royi Namir](https://stackoverflow.com/users/859154/royi-namir)的答案很有用，但对其进行了扩展以将其创建为一个函数。我将变量重命名为对我有意义的变量，但如果需要，您可以很容易地将它们翻译回来。

此外，Royi 的答案中的代码已经处理了正在搜索的字符不存在的情况（它从字符串的开头开始），但我还想处理正在搜索的字符不存在的情况。

在这种情况下，它以类似的方式从搜索的起始字符开始并将其余字符返回到字符串的末尾。

```
CREATE FUNCTION [dbo].[getValueBetweenTwoStrings](@inputString 
NVARCHAR(4000), @stringToSearchFrom NVARCHAR(4000), @stringToSearchTo 
NVARCHAR(4000))
RETURNS NVARCHAR(4000)
AS
BEGIN      
DECLARE @retVal NVARCHAR(4000)
DECLARE @stringToSearchFromSearchPattern NVARCHAR(4000) = '%' + 
@stringToSearchFrom + '%'

SELECT @retVal = SUBSTRING (
       @inputString,
       PATINDEX(@stringToSearchFromSearchPattern, @inputString) + LEN(@stringToSearchFrom),
       (CASE
            CHARINDEX(
                @stringToSearchTo,
                @inputString,
                PATINDEX(@stringToSearchFromSearchPattern, @inputString) + LEN(@stringToSearchFrom))
        WHEN
            0
        THEN
            LEN(@inputString) + 1
        ELSE
            CHARINDEX(
                @stringToSearchTo,
                @inputString,
                PATINDEX(@stringToSearchFromSearchPattern, @inputString) + LEN(@stringToSearchFrom))
        END) - (PATINDEX(@stringToSearchFromSearchPattern, @inputString) + LEN(@stringToSearchFrom))
   )
RETURN @retVal
END 
```

用法：

```
SELECT dbo.getValueBetweenTwoStrings('images/test.jpg','/','.') AS MyResult 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-04-03T13:08:59.020

你可以试试这个：

```
Declare @test varchar(100)='images/test.jpg'
Select REPLACE(RIGHT(@test,charindex('/',reverse(@test))-1),'.jpg','') 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-11-07T15:49:20.483

受到[Josien](https://stackoverflow.com/users/249353/josien)工作的启发，我想知道是否可以简化。

这也行吗？矮得多：

```
SELECT SUBSTRING(col, CHARINDEX ('/', col) + 1, CHARINDEX ('.', col) - CHARINDEX ('/', col) - 1); 
```

（由于我公司 SQL 服务器的正确问题，我现在无法测试，这本身就是一个问题）

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-02-04T10:56:45.853

> 只需尝试使用 LEFT ,RIGHT ,CHARINDEX

```
select 
LEFT((RIGHT(a.name,((CHARINDEX('/', name))+1))),((CHARINDEX('.', (RIGHT(a.name, 
                     ((CHARINDEX('/', name))+1)))))-1)) splitstring,
a.name      
from 
   (select 'images/test.jpg' as name)a 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-05-26T08:05:35.107

我得到了一些无效的长度错误。所以我做了这个功能，这不应该给任何长度问题。此外，当您没有找到搜索到的文本时，它将返回 NULL。

```
CREATE FUNCTION [FN].[SearchTextGetBetweenStartAndStop](@string varchar(max),@SearchStringToStart varchar(max),@SearchStringToStop varchar(max))

RETURNS varchar(max)

BEGIN

    SET @string =    CASE 
                         WHEN CHARINDEX(@SearchStringToStart,@string) = 0
                           OR CHARINDEX(@SearchStringToStop,RIGHT(@string,LEN(@string) - CHARINDEX(@SearchStringToStart,@string) + 1 - LEN(@SearchStringToStart))) = 0
                         THEN NULL
                         ELSE SUBSTRING(@string
                                       ,CHARINDEX(@SearchStringToStart,@string) + LEN(@SearchStringToStart) + 1
                                       ,(CHARINDEX(@SearchStringToStop,RIGHT(@string,LEN(@string) - CHARINDEX(@SearchStringToStart,@string) + 1 - LEN(@SearchStringToStart)))-2)     
                                       )
                     END

    RETURN @string

END 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-02-12T05:54:36.000

如果 Input= pg102a-wlc01s.png.intel.com 并且输出应该是 pg102a-wlc01s

我们可以使用以下查询：

select Substring(pc.name,0,charindex('.',pc.name,0)),pc.name from tbl_name pc

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2022-02-14T18:41:14.230

```
declare @searchStart nvarchar(100) = 'search ';
declare @searchEnd nvarchar(100) = ' ';
declare @string nvarchar(4000) = 'This is a string to search (hello) in this text ';

declare @startIndex int = CHARINDEX(@searchStart, @string,0) + LEN(@searchStart);
declare @endIndex int = CHARINDEX(@searchEnd, @string, @startIndex + 1);
declare @length int = @endIndex - @startIndex;
declare @sub nvarchar(4000) = SUBSTRING(@string, @startIndex, @length)

select @startIndex, @endIndex, @length, @sub 
```

这比这个答案中专门回答问题的单行字更清晰一些，但不是以一种有利于所有读者的通用方式。这也可以很容易地变成一个函数，只需稍作修改。

# delphi - 在Delphi中，传递给方法时是否按顺序评估参数？

> ID：11010456
> 
> 赞同：14
> 
> 时间：2012-06-13T07:55:25.080
> 
> 标签：delphi

在 Delphi 中定义了调用过程之前计算参数的顺序吗？

IOW，如果我有这个丑陋的代码（在遗留应用程序中找到类似的东西）......

```
function A(var err: integer): integer;
begin
  err := 42;
  Result := 17;
end;

Test(A(err), err); 
```

... Test 是否保证接收参数 (17, 42) 或者它也可以是 (17, undefined)？

* * *

编辑：

尽管 David 的示例使用 32 位和 64 位编译器返回了不同的结果，但这（幸运的是）不会影响我的旧代码，因为 Test(A(err), err) 只在寄存器中存储了一个 'err'*的地址*并且它编译器是在调用 A(err) 之前还是之后执行此操作并不重要。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-13T08:11:46.070

Delphi中参数求值的顺序没有定义。

作为一个有趣的演示，以下程序具有不同的输出，具体取决于您针对的是 32 位还是 64 位代码：

```
program ParameterEvaluationOrder;

{$APPTYPE CONSOLE}

uses
  SysUtils;

function SideEffect(A: Integer): Integer;
begin
  Writeln(A);
  Result := A;
end;

procedure Test(A, B: Integer);
begin
end;

begin
  Test(SideEffect(1), SideEffect(2));
  Readln;
end. 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-13T08:06:45.893

**编辑：** 似乎编译器可能违反帮助中描述的行为：

从[调用约定](http://docwiki.embarcadero.com/RADStudio/en/Procedures_and_Functions#Calling_Conventions)帮助主题（强调我的）：

> register 和 pascal 约定从左到右传递参数；也就是说，最左边的参数首先被**评估**和传递，最右边的参数最后被评估和传递。

# html - 如何在不更改字体大小的情况下更改字形高度？

> ID：11010457
> 
> 赞同：15
> 
> 时间：2012-06-13T07:55:29.170
> 
> 标签：html, css, fonts, glyph

## 问题

对于与图标元素相邻的文本元素，字形高度与图标高度不对齐。文本元素由 CSS 设置样式，`font-size: 20px;`并且所有实例的宽度都一致。

**这是一个插图：**

![字体问题](../Images/a0136b80f6f2fc457adb1bf840d16b50.png)

对于上述情况，文本应与图标具有相同的高度。

## 动机

找到一种方法使字母更高一点以占用可用的垂直空间，同时保持`font-size`原样。怎么做？

## 我尝试了什么？

增加`font-size`一点，但得出的结论是，如果我不能增加字母高度，我将不得不妥协一个更小的图标，因此问题。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-13T08:19:50.400

**您可以**使用 css3 属性来做到这一点`Scale`：（[**dabblet.com 上的演示**](http://dabblet.com/gist/2922712)）
![在此处输入图像描述](../Images/979cbd39e105467502cf75e85ba8abf9.png)

**HTML 标记：**

```
<span class="lower">lower size</span>
<span>normal size</span>
<span class="taller">taller size</span> 
```

**CSS：**

```
span {
    font-size: 20px;
    display: inline-block;
}

span.lower{ transform: scaleY(0.9); }
span.taller { transform: scaleY(1.1); } 
```

**此外，**您可以尝试`vertical-align`在您的情况下为图像设置各种值： `sub`, `super`, `bottom`, `top`, `middle`. 这可能有助于从另一个角度解决您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T08:00:18.837

尝试添加`line-height: 20px;`它只会增加行间距。它应该可以帮助您匹配元素高度。

并考虑您的日历图标和文本，添加`vertical-align: middle;`到图像中。

演示：http: [//jsfiddle.net/rBpKL/3/](http://jsfiddle.net/rBpKL/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T08:13:07.437

不，你不能在不增加字体大小或改变字体的情况下使字母更高。原则上，您可以减小字母间距，这样就可以在不增加文本宽度的情况下增加字体大小。这通常是一个坏主意，因为它往往会使字体看起来更糟，而且通常不太清晰。

在上下文（代码或 URL）中显示真正的问题可能有助于找到解决方案。

# reportviewer - 在从 reportviewer 转换的 PDF 中显示选中的复选框

> ID：11010461
> 
> 赞同：3
> 
> 时间：2012-06-13T07:55:44.253
> 
> 标签：reportviewer, rdlc

我正在使用此行在报表查看器中显示复选框：

```
=IIf( Fields!Field1.Value, Chr(254), Chr(168)) 
```

`Checked`但是当我将它转换为 PDF 时，PDF中没有显示的复选框。

有人解决了吗？

我使用`Wingdings`字体是因为安装应用程序后不支持其他字体，例如 Wingdings2。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-16T13:24:02.803

显然这是一个常见问题，并在下一个版本中得到修复。

也许您可以使用 √（Unicode Hex 中的 221A）作为解决方法。

来源：[https ://connect.microsoft.com/SQLServer/feedback/details/431057/ssrs-2008-sp1-ctp-pdf-export-of-wingdings-characters-above-char-127-fails](https://connect.microsoft.com/SQLServer/feedback/details/431057/ssrs-2008-sp1-ctp-pdf-export-of-wingdings-characters-above-char-127-fails)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-07T07:58:16.247

我正在使用这段代码从 RDLC 呈现为 PDF。

```
var bytes = reportViewer.LocalReport.Render(
            _reportRenderFormat, _deviceInfo, out mimeType, out encoding, out filenameExtension,
            out streamids, out warnings); 
```

获得显示的复选框的可靠方法是转到文本框中的占位符属性并选择`HTML- Interpret HTML tags as styles`.

然后，对于`checked`复选框使用这个`Expression`：

```
="<font face=""Wingdings 2"" color=""green"">" & Chr(81) &"</font>" & "some other text" 
```

为了`unchecked`使用这个`expression`

```
="<font face=""Wingdings 2"" color=""red"">" & Chr(163) &"</font>" & "some other text" 
```

[![占位符属性](../Images/72972c6b73897c8c5bb5472a0b53c09f.png)](https://i.stack.imgur.com/J9mA4.png)

# php - Python mysqldb 数据

> ID：11010468
> 
> 赞同：0
> 
> 时间：2012-06-13T07:56:04.620
> 
> 标签：php, python, mysql-python

我有一个将这些值保存到数据库的 php 表单：

*   ID
*   rand（随机生成的字符串）
*   x_val
*   y_val

我在使用 mysqldb 的 python 程序中从数据库中调用这些值：

```
import MySQLdb

db = MySQLdb.connect("localhost","root","","test" )

cursor = db.cursor()

sql = "SELECT id,rand,x_val,y_val  FROM  table"
 try:
cursor.execute(sql)
results = cursor.fetchall()
results =  {}
for row in results:
  results[row[1]] = [row[0], row[2], row[3]]
  rand = row[1]
  x_val = row[2]
  y_val = row[3]

except:
 print "Error: unable to fecth data"

db.close() 
```

更新：它给出了错误 - >错误：无法感染数据

在这篇文章中（如您所见），我希望 rand（即 row[1]）作为行的标识符。但是，我无法找到如何将其用作标识符的方法，因为 rand = row[1] 在 sql 变量之后被调用。在这个例子中，我使用了一个静态的 '63kfjf' rand 值，这只是为了向你展示它的工作原理。有办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:12:10.900

从数据库中选择数据后，您可以创建一个以“rand”值为键的字典：

像这样的东西：

```
dicResults =  {}
for row in results:
    dicResults[row[1]] = [row[0], row[2], row[3]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T08:47:10.843

我认为您正在尝试随机选择一行？如果这是正确的，这将起作用。

1.  将 rand 更改为自动递增的整数。

2.  从表中选择 MAX(rand)；确定最高的“随机”值。

3.  生成一个介于 0 和 MAX(rand) 之间的随机值

4.  SELECT * FROM table WHERE rand = $randomGeneratedValue;

# tridion - 更新关键字元数据时出现 XML 验证错误

> ID：11010470
> 
> 赞同：2
> 
> 时间：2012-06-13T07:56:08.613
> 
> 标签：tridion

继我之前关于创建地址簿的问题（非常感谢彼得！）之后，我有一个小型的一次性控制台应用程序可以做到这一点并且工作得很好 - 但此外我正在尝试使用项目更新关键字的元数据创建的通讯簿的 ID。

稍微缩短的片段...

```
StaticAddressBook ab = new StaticAddressBook();
ab.Title = title;
ab.Key = key;
ab.Save();

// id is a correct Keyword TCM ID
Keyword k = tdse.GetObject(id, EnumOpenMode.OpenModeEdit);
if (k != null)
{
    k.MetadataFields["addressbookid"].value[0] = ab.Id.ItemId;
    k.Save(true);
} 
```

我在 Save() 上不断收到以下错误：

> XML 验证错误。原因：命名空间“uuid:2065d525-a365-4b45-b68e-bf45f0fba188”中的元素“元数据”在命名空间“uuid:2065d525-a365-4b45-b68e-bf45f0fba188”中有无效的子元素“addressbookid”。预期的可能元素列表：命名空间“uuid:2065d525-a365-4b45-b68e-bf45f0fba188”中的“contact_us_email”

但我知道关键字分配了正确的元数据，（这就是我不费心检查的原因！）。从当前有问题的关键字中缩短 Tridion XML：

```
<tcm:Keyword>
   <tcm:Data>
      <tcm:MetadataSchemaxlink:type="simple"xlink:title="IP.Location.Metadata" xlink:href="tcm:49-2142-8" />
      <tcm:Metadata>
         <Metadata xmlns="uuid:2065d525-a365-4b45-b68e-bf45f0fba188">
            <email>...</email>
            <addressbookid>3</addressbookid>
            <contact_us_email>...</contact_us_email>
            <request_a_sample_email>...</request_a_sample_email>
            <webinar_feedback_email>....</webinar_feedback_email>
         </Metadata>
      </tcm:Metadata>
      <tcm:IsRoot>true</tcm:IsRoot>
   </tcm:Data>
</tcm:Keyword> 
```

我是否错过了一些不能以这种方式更新关键字元数据的内容？

我想我可以查看核心服务来更新关键字，但在这个应用程序中做所有事情似乎是有意义的。

**更新**

奇怪的是，订单在这里很关键！以下代码有效：

```
ItemFields fields = k.MetadataFields;

System.Diagnostics.Debug.WriteLine(fields.Count);

string email = fields[1].value[1];
string contact = fields[3].value[1];
string request = fields[4].value[1];
string webinar = fields[5].value[1];

fields[1].value[1] = email;
fields[2].value[1] = ab.Id.ItemId;
fields[3].value[1] = contact;
fields[4].value[1] = request;
fields[5].value[1] = webinar;

k.Save(true); 
```

在获取/设置值时被基于非 0 的索引捕获，并且必须按顺序重新分配现有字段。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T08:18:53.277

自从创建该组件以来，模式中字段的顺序似乎发生了变化。至少 Schema 期望`contact_us_email`在您当前拥有的位置`addressbookid`。

可能还有其他更改，因此我会在运行工具之前验证架构中字段的顺序并确保组件匹配。

# tomcat - 运行 Struts2 helloWorld 教程时的小故障 [TOMCAT]

> ID：11010475
> 
> 赞同：1
> 
> 时间：2012-06-13T07:56:31.343
> 
> 标签：tomcat, struts2

我正在尝试在我的 eclipse indigo 中运行 struts2 的 helloworld 教程。当我启动我的 tomcat 服务器时，我在控制台窗口中收到以下消息。突出显示的位是我无法理解的位。

```
Jun 13, 2012 1:12:28 PM org.apache.catalina.core.AprLifecycleListener init  

**INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files\Java\jre7\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:\Windows\System32;**

**Jun 13, 2012 1:12:28 PM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:StrutsExample1' did not find a matching property.**

Jun 13, 2012 1:12:28 PM org.apache.coyote.AbstractProtocol init

INFO: Initializing ProtocolHandler ["http-bio-8080"]

Jun 13, 2012 1:12:28 PM org.apache.coyote.AbstractProtocol init

INFO: Initializing ProtocolHandler ["ajp-bio-8009"]

Jun 13, 2012 1:12:28 PM org.apache.catalina.startup.Catalina load

INFO: Initialization processed in 735 ms

Jun 13, 2012 1:12:28 PM org.apache.catalina.core.StandardService startInternal

INFO: Starting service Catalina

Jun 13, 2012 1:12:28 PM org.apache.catalina.core.StandardEngine startInternal

INFO: Starting Servlet Engine: Apache Tomcat/7.0.27

Jun 13, 2012 1:12:31 PM org.apache.coyote.AbstractProtocol start

INFO: Starting ProtocolHandler ["http-bio-8080"]

Jun 13, 2012 1:12:31 PM org.apache.coyote.AbstractProtocol start

INFO: Starting ProtocolHandler ["ajp-bio-8009"]

Jun 13, 2012 1:12:31 PM org.apache.catalina.startup.Catalina start

INFO: Server startup in 2586 ms 
```

当我通过键入在浏览器上打开 tomcat 时`http://localhost:8080`，会显示错误消息**HTTP Status 404 - /**。我无法理解问题的根本原因。我使用windows7 64位。是因为我的系统和用户变量没有正确定义吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T10:38:13.197

你的 tomcat 已经在运行了。

在这里查看我的答案[https://stackoverflow.com/a/10972634/1085285](https://stackoverflow.com/a/10972634/1085285)

但是您没有访问您的应用程序。为了运行您的应用程序。你必须给这样的东西的网址

```
http://localhost:8080/MyWebApp  where MyWebApp is the name you have given to your project 
```

请参阅此问题和答案以获取信息消息， [我应该在生产中使用什么 tomcat 本机库？](https://stackoverflow.com/q/2231163/1085285)

# c# - CameraCaptureDialog 因“发生未知错误”而失败

> ID：11010476
> 
> 赞同：2
> 
> 时间：2012-06-13T07:56:34.710
> 
> 标签：c#, windows-mobile, compact-framework

我正在开发一个用 C# 编写的 Windows Mobile 6.1 应用程序。我最近添加了拍照功能。该设备是Intermec CN50。如果我打开我的应用程序并直接转到拍照位，则此代码可以正常工作。但是，如果我浏览其他几个屏幕，然后打开照片位，它会失败并显示非常有用的消息“发生未知错误”。我可以看到异常中没有其他有用的信息。代码在这一行失败：

```
cameraResult = cameraDialog.ShowDialog(); 
```

这是堆栈跟踪：

```
at Microsoft.WindowsMobile.Forms.CameraCaptureDialog.LaunchCameraCaptureDialog(IntPtr ptrStruct)
at Microsoft.WindowsMobile.Forms.CameraCaptureDialog.ShowDialog()
at MicronetMobileUi.Controls.Camera.ShowDialog(Form owner, String& fileName)
at MicronetMobileUi.FieldService.JobImagesForm.LoadCameraScreen()
at MicronetMobileUi.FieldService.JobImagesForm.footerToolbar_ItemEntered(Object sender, EventArgs e)
at Resco.Controls.CommonControls.ToolbarControl.OnItemEntered()
at Resco.Controls.CommonControls.ToolbarControl.MouseClickUp(MouseEventArgs e)
at Resco.Controls.CommonControls.ToolbarControl.OnMouseUp(MouseEventArgs e)
at System.Windows.Forms.Control.WnProc(WM wm, Int32 wParam, Int32 lParam)
at System.Windows.Forms.ContainerControl.WnProc(WM wm, Int32 wParam, Int32 lParam)
at System.Windows.Forms.Control._InternalWnProc(WM wm, Int32 wParam, Int32 lParam)
at Microsoft.AGL.Forms.EVL.EnterMainLoop(IntPtr hwnMain)
at System.Windows.Forms.Application.Run(Form fm)
at MicronetMobileUi.ApplicationManager.StartApp()
at MicronetMobileUi.Program.Main() 
```

这是代码：

```
var path = Path.GetDirectoryName(Assembly.GetExecutingAssembly().GetName().CodeBase);
var fileName = "temp.jpg";  
var pathAndFileName = Path.Combine(path, fileName);

var cameraDialog = new CameraCaptureDialog();
cameraDialog.Owner = this;
cameraDialog.InitialDirectory = path;
cameraDialog.DefaultFileName = fileName;
cameraDialog.Mode = CameraCaptureMode.Still;
cameraDialog.StillQuality = CameraCaptureStillQuality.Low;
cameraDialog.VideoTimeLimit = new TimeSpan(0, 0, 0);
cameraDialog.VideoTypes = CameraCaptureVideoTypes.Messaging;
cameraDialog.Resolution = new Size(640, 480); 

// open camera dialog to take a photo
DialogResult cameraResult;
try
{
    cameraResult = cameraDialog.ShowDialog();
}
catch (Exception ex)
{
    MessageBox.Show("Grrrr!!");
}       
finally
{
    cameraDialog.Dispose();
    cameraDialog = null;
}

if (cameraResult != DialogResult.OK)
    return; // no photo was taken

// save photo using this value: pathAndFileName ... 
```

我想这与内存不足有关，但我真的不知道。到目前为止，我已经尝试过：

1）在应用程序第一次启动时 Instatiating CameraCaptureDialog 以便它可以获得一些内存。

2) Instatiating CameraCaptureDialog 并在应用程序首次启动时调用 ShowDialog()。

3) 在实例化 CameraCaptureDialog 之前关闭我与本地 SQL CE 数据库的连接（这是在论坛上建议的）。

4）在实例化之前运行 GC.Collect() （是的，我知道这通常不是一个好主意）。

5) 将 cameraDialog.Resolution 减少到 320 x 240。

没有任何效果。我花了很长时间将这个功能添加到我的应用程序中，现在我发现它有时只真正起作用。Windows Mobile 可能非常烦人。帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:50:29.813

虽然不在 CN50 上，但我在不同的 Intermec 设备上遇到了类似的问题。事实证明，由于条码扫描器/解码器和摄像头共享一个共同的基础设施，因此不能同时访问它们。

尝试注释掉或模拟你的条形码对象，看看你是否可以在导航你的应用程序后使用相机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-20T19:04:51.070

这是打破的原因是因为这条线

`cameraDialog.Resolution = new Size(640, 480);`

不要设置相机不支持的分辨率 - 当您执行 ShowDialog() 时它将失败

可以通过运行图片和视频应用程序 > 菜单 > 选项 > 分辨率下拉菜单找到支持的分辨率。

如果您设置其中一种分辨率，它可以正常工作。（我在 CN51 上测试并使用 112x160）。

-- 设备支持的分辨率是某处的某些注册表设置，并且因设备而异。如果您的代码假设在多个设备上运行，那么处理此问题的最佳方法是不设置分辨率（它将使用最后使用的任何内容或被视为设备的默认值）。

如果您希望图像始终保持一定大小；不要设置分辨率->拍照->然后将图像后处理成更小的东西。使用类似这样[的一些重新调整大小的示例](https://stackoverflow.com/questions/669137/resize-images-in-windows-mobile)

希望这对将来的某人有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T06:28:37.697

我想我已经找到了某种答案。

1) 我添加了代码来关闭与本地 SQL CE 数据库的全局连接。这是在论坛上提出的。

2) 我还按照 tcarvin 的建议添加了代码来处理我的条形码对象。但是，我仍然偶尔会遇到错误。

3）然后我注意到只有在我使用连接到 Visual Studio 的设备进行调试时才会出现错误。如果我以普通用户使用它的方式使用它，那么它似乎没问题。无论如何，我当然希望如此...

更新

现在该应用程序已部署给客户，似乎问题仍在发生。此外，有时他们能够加载相机屏幕并拍照，但 Windows 会显示一条消息，说“错误无法加载文件”或类似的东西。如果他们重新启动应用程序然后它可以工作，但我不能指望他们每次想拍照时都这样做。我会看看Intermec是否可以提供帮助...

进一步更新：

这发生在前一段时间，所以我对我现在找到的解决方案有点模糊。我实际上已经离开了那份工作，现在不能看代码。最后，我从 Intermec 那里得到了一个组件（我认为是一个 DLL），它解决了这个问题。

# html - 使 Div A 与流体 Div B 的高度相同

> ID：11010478
> 
> 赞同：1
> 
> 时间：2012-06-13T07:56:37.270
> 
> 标签：html, css, fluid-layout

我有点卡在某事上……我正试图达到与流体`#right`相同的高度`#left`。`#right`我该怎么做呢？

```
 #container {
    width: 960px;
    margin: 0 auto;
}

#left {
    background: #ccc;
    float: left;
    padding: 10px;
    width: 160px;
}

#right {
    background: #ccc;
    float: right;
    padding: 10px;
    width: 750px;
} 
```

-

```
<div id="container">
    <div id="left">
        test
    </div>

    <div id="right">
        test
    </div>
</div> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:08:34.333

您可以通过应用模拟 100% 高度的背景图像来做到这一点`#left`：

**HTML**

```
<div id="container">
    <div id="left">
        test
    </div>

    <div id="right">
        test<br />test
    </div>​
</div> 
```

**CSS**

```
#container {
    width: 960px;
    margin: 0 auto;
    background: url(http://www.dummyimage.com/180x1/ccc/ccc.png) repeat-y;
    overflow:hidden;
}

#left {
    background: #ccc;
    float: left;
    padding: 10px;
    width: 160px;
    height: 100%;
}

#right {
    background: #ccc;
    float: right;
    padding: 10px;
    width: 750px;
    height; 100%;
}​ 
```

**现场演示**： http: [//jsfiddle.net/TqKMW/](http://jsfiddle.net/TqKMW/)
**有关此技巧的更多信息**：[http ://www.alistapart.com/articles/fauxcolumns/](http://www.alistapart.com/articles/fauxcolumns/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T16:24:37.683

只需添加`padding-bottom:10000px;margin-bottom:-10000px;`到每一列和`overflow:hidden;`包装器（[示例](http://jsfiddle.net/jtkzZ/)）：

```
<div id="container">
    <div id="left">
        test<br>test
    </div>

    <div id="right">
        test
    </div>
</div> 
```

```
#container {
    width: 960px;
    margin: 0 auto;
    overflow:hidden;
}

#left {
    background: #ccc;
    float: left;
    padding: 10px;
    width: 160px;
    padding-bottom:10000px; /* Taller than tallest possible column */
    margin-bottom:-10000px; /* Negative version of #left{padding-bottom} */
}

#right {
    background: #ccc;
    float: right;
    padding: 10px;
    width: 750px;
    padding-bottom:10000px; /* Same as #left{padding-bottom} */
    margin-bottom:-10000px; /* Negative version of #left{padding-bottom} */
} 
```

***注意：**这可能不适用于某些较旧的浏览器，因此请务必检查以确保它在您需要支持的浏览器中有效。*

# c# - 隐藏父类的实现细节

> ID：11010481
> 
> 赞同：4
> 
> 时间：2012-06-13T07:56:53.247
> 
> 标签：c#, oop

假设我正在设计一个可以拾取各种工具并使用它们的机器人。我将创建一个具有 Pickup 方法的 Robot 类来选择我想使用的工具。对于每个工具，我都会为它创建一个类，比如具有 Cut 方法的 Knife 类。现在在 Robot 上调用 Pickup 方法后，我想告诉我的机器人切割。所以对于 OOP 概念我必须告诉机器人，而不是刀？Cut 方法在 Knife 上，那么我该如何调用它呢？我必须在 Robot 上实现某种方式`UseToolCurrentlyHeld()`来将我的命令传播到 Knife。或者我只是直接使用这个直接调用刀（我的机器人拿着）：`myrobot.ToolCurrentlyInHand.Cut()`

我觉得父方法必须拥有一切来处理它们包含的类，这很奇怪。现在我有重复的方法，就像 Knife 一样`Cut()`，现在 Robot 必须`UseCutOnKnife()`只在 Knife 上调用`Cut()`，因为好的 OOP 实践是将 Knife 抽象出来，让它感觉就像订购 Robot 而不必担心像 Knife 这样的内部信息。

另一个问题，如果我创作一首音乐，我会创建`Music`一个包含许多`Measure`类来存储音符信息的类。在一个 Measure 中可以有许多`Note`类，其中 Note 类将包含信息，例如，该音符在该小节中的位置，或者该音符播放多长时间。现在我想在小节 45 上添加一个音符，放在小节的中间。要创建 Measure，我必须先调用`CreateMeasure(45)`Music，然后再调用`CreateNote(0.5f)`Measure？创建的方法是这样在父级上的吗？如果现在我想将该注释更改为度量上的 0.25，那么负责更改注释的方法是`Note`类本身还是`Measure`类？或者我必须实现在最顶层更改注释的方法`Music`？

这是我的课程概述：

```
class Music
{
     List<Measure> measures = new List<Measure>();

     //methods...
}

class Measure
{
     int measureNumber;
     List<Note> notes = new List<Note>();

     //methods...
}

class Note
{
     float positionInMeasure; //from 0 to 1
} 
```

就像现在音乐课是我现在必须通过音乐发布所有内容的最重要的事情？并链接方法最终调用最里面的类？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T08:04:15.537

你需要的是一个所有工具都实现的通用接口。

例如：

```
interface ITool {
    void Use();
} 
```

现在刀可以实现该接口：

```
class Knife : ITool {
    public void Use() {
        //do the cutting logic
    }
} 
```

现在您将通过机器人上的 ITool 界面使用该工具，不知道它是什么工具：

```
class Robot {
    private ITool currentTool = null;

    public void Pickup(ITool tool)
    {
        currentTool = tool;
    }

    public void UseTool() {
        currentTool.Use();
    }
} 
```

你可以像这样调用 Pickup：

```
 Robot robot = new Robot();
 robot.Pickup(new Knife());
 robot.UseTool(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T08:02:06.957

相反，我建议采用不同的方法。拥有`Knife`和机器人可以选择的所有其他对象都继承自具有`Item`方法的泛型类`Use`（也可以是接口）：

```
interface Item
{
    void Use();
}

class Knife : Item
{
    public void Use()
    {
        // cut action
    }
} 
```

现在，每个实现的类`Item`都将有自己的`Use`方法实现，用于其特定的操作。

然后`Robot`持有一个泛型并在不知道它实际上是什么的情况下`Item`调用它：`Use`

```
class Robot
{
     public Item CurrentItem { get; private set; }

     public void PickUpItem(Item i)
     {
         CurrentItem = i;
     }

     public void UseItem()
     {
         CurrentItem.Use(); // will call Use generically on whatever item you're holding
     }         
} 
```

...

```
Robot r = new Robot();
r.PickUpItem(new Knife());
r.UseItem(); // uses knife

r.PickUpItem(new Hammer());
r.UseItem(); // uses hammer 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T08:03:39.577

基本上我建议您使用方法创建`Robot`类`Pickup(Tool tool)`。 `Tool`是从中继承具体工具类的接口。

看看 Petar Ivanov 的回答。他详细解释了我的意思。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T14:08:07.670

对于问题的机器人部分，每个人都给了你一个很好的答案。

对于音乐部分，我不确定我会那样做。特别是，我不会将 Measure 的位置保留在 Measure 本身内，Note 及其位置也是如此。我不太喜欢的另一件事是您的位置似乎总是绝对值，这在修改现有音乐时无济于事。也许我在这里遗漏了一些东西，但是当你执行 CreateMeasure(45) 并且你的音乐中已经有 90 个小节时会发生什么？您必须更新以下所有措施。对于音符位置，我想您使用浮点数是为了能够表示一种“绝对”位置，即何时演奏音符，而不仅仅是它在另一个音符之后出现的事实。我认为我' d 更喜欢引入持续时间属性和暂停类。最后，我不会将方法从 Note 传播到 Music，但我会将属性公开，正如你所说，我会将方法链接起来最终调用最里面的类。最后，我的课程看起来与这些课程相似：

```
public class Music
{
     public List<Measure> measures = new List<Measure>();

     public Measure AddMeasure() 
     {
         Measure newM = new Measure();
         measures.Add(newM);
         return newM;
     }
     public Measure CreateMeasure(int pos) 
     {
         Measure newM = new Measure();
         measures.Insert(pos, newM);
         return newM;
     }
     public Measure CreateMeasureAfter(Measure aMeasure) 
     {
         Measure newM = new Measure();
         int idx = measures.IndexOf(aMeasure);
         measures.Insert(idx + 1, newM);
         return newM;
     }
     public Measure CreateMeasureBefore(Measure aMeasure) 
     {
         Measure newM = new Measure();
         int idx = measures.IndexOf(aMeasure);
         measures.Insert(idx, newM);
         return newM;
     }

     //methods...
}

public class Measure
{
     public List<ANote> notes = new List<ANote>();
     public void AddANote(ANote aNote) 
     {
         notes.Add(aNote);
     }
     public void AddANote(int pos, ANote aNote) 
     {
         notes.Insert(pos, aNote);
     }
     public void AddANoteAfter(ANote aNote, ANote newNote) 
     {
         int idx = notes.IndexOf(aNote);
         notes.Insert(idx + 1, newNote);
     }
     public void AddANoteBefore(ANote aNote, ANote newNote) 
     {
         int idx = notes.IndexOf(aNote);
         notes.Insert(idx, newNote);
     }
     //methods...
}

public abstract class ANote
{
    public int duration;  // something like 4 for a quarter note/pause and so on
    // your stuff
}

public class Note : aNote
{
     float frequency; //or whatever else define a note
    // your stuff
}

public class Pause: aNote
{
    // your stuff
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-13T08:10:28.143

对于机器人示例，在 C# 中，我将从以下内容开始：

```
public class Robot
{
    private IList<Tool> tools = new List<Tool>();

    public void PickUpTool(Tool newTool)
    {
        // you might check here if he already has the tool being added
        tools.Add(newTool);
    }

    public void DropTool(Tool oldTool)
    {
        // you should check here if he's holding the tool he's being told to drop
        tools.Remove(newTool);
    }

    public void UseTool(Tool toolToUse)
    {
        // you might check here if he's holding the tool,
        // or automatically add the tool if he's not holding it, etc.
        toolToUse.Use();
    }
}

public interface Tool
{
    void Use();
}

public class Knife : Tool
{
    public void Use()
    {
        // do some cutting
    }
}

public class Hammer : Tool
{
    public void Use()
    {
        // do some hammering
    }
} 
```

所以`Robot`只需要知道它有工具，但它不一定关心它们是什么，它绝对不关心它们如何操作。它只是通过标准接口使用它们。这些工具可以包含额外的方法和数据，只是在这个例子中没有。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-13T08:01:55.160

我认为`Action<>`可以提供帮助，这里有一些关于它的有用信息[Action 和 Func](http://simpleprogrammer.com/2010/09/24/explaining-what-action-and-func-are/)它帮助我理解`Action`，`Func`所以总的来说这是一篇很棒的帖子。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-13T08:10:06.383

这取决于焦点是什么，告诉机器人使用某事，或告诉机器人做某事，或者两者兼而有之，如下所示：

```
public abstract class Task
{
    public abstract void Perform(Robot theRobot);
}

public class Cut : Task
{
    public string What { get; private set; }

    public Cut(string what)
    {
       What = what;
    }

    public override void Perform(Robot theRobot)
    {
        var knife = theRobot.ToolBeingHeld as Knife;
        if (knife == null) throw new InvalidOperationException("Must be holding a Knife.");
        knife.Use(theRobot);
        Console.WriteLine("to cut {0}.", What);
    }
}

public class Stab : Task
{
    public override void Perform(Robot theRobot)
    {
         var knife = theRobot.ToolBeingHeld as Knife;
         if (knife == null) throw new InvalidOperationException("Must be holding a Knife.");

         knife.Use(theRobot);
         Console.WriteLine("to stab.");
    }
}

public class Bore : Task
{
    public override void Perform(Robot theRobot)
    {
         var drill = theRobot.ToolBeingHeld as Drill;
         if (drill == null) throw new InvalidOperationException("Must be holding a Drill.");

         drill.Use(theRobot);
         Console.WriteLine("to bore a hole.");
    }
}

public abstract class Tool
{
    public abstract void Use(Robot theRobot);
    public abstract void PickUp(Robot theRobot);
    public abstract void PutDown(Robot theRobot);
}

public class Knife : Tool
{
    public Knife(string kind)
    {
        Kind = kind;
    }

    public string Kind { get; private set; }

    public override void Use(Robot theRobot)
    {
       Console.Write("{0} used a {1} knife ", theRobot.Name, Kind);
    }

    public override void PickUp(Robot theRobot)
    {
       Console.WriteLine("{0} wielded a {1} knife.", theRobot.Name, Kind);
    }

    public override void PutDown(Robot theRobot)
    {
       Console.WriteLine("{0} put down a {1} knife.", theRobot.Name, Kind);
    }
}

public class Drill : Tool
{    
    public override void Use(Robot theRobot)
    {
       Console.Write("{0} used a drill ", theRobot.Name);
    }

    public override void PickUp(Robot theRobot)
    {
       Console.WriteLine("{0} picked up a drill.", theRobot.Name);
    }

    public override void PutDown(Robot theRobot)
    {
       Console.WriteLine("{0} put down a drill.", theRobot.Name);
    }
}

public class Robot
{
    public Robot(string name)
    {
        Name = name;
    }

    public string Name { get; private set; }

    public Tool ToolBeingHeld { get; private set; }

    public void PickUp(Tool tool)
    {
        if (ToolBeingHeld != null) ToolBeingHeld.PutDown(this);

        ToolBeingHeld = tool;

        ToolBeingHeld.PickUp(this);
    }

    public void PutDown()
    {
        if (ToolBeingHeld != null) ToolBeingHeld.PutDown(this);
        ToolBeingHeld = null;
    }

    public void Perform(Task task)
    {
        task.Perform(this);
    }
} 
```

用法：

```
var robot = new Robot("Fred the Robot");
robot.PickUp(new Knife("butcher")); // output is "Fred the Robot wielded a butcher knife."

robot.Perform(new Cut("a leg")); // output is "Fred the Robot used a butcher knife to cut a leg."

robot.Perform(new Stab()); // output is "Fred the Robot used a butcher knife to stab."

try { robot.Perform(new Bore()); } // InvalidOperationException: Must be holding a drill.
catch(InvalidOperationException) {}

robot.PutDown(); // output is "Fred the Robot put down a butcher knife." 
```

# windows-phone-7 - 如何使用 GPS Latlon 启动 Bing Map

> ID：11010488
> 
> 赞同：0
> 
> 时间：2012-06-13T07:57:26.023
> 
> 标签：windows-phone-7

对于谷歌地图，我可以使用此代码通过浏览器获取地图：http://maps.google.com/map? q= 纬度，经度。

对于 Bing 地图，如何做到这一点？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T19:11:08.420

您可以使用`BingMapsTask`启动带有指定中心点（或搜索参数）的 bing 地图应用程序 - [MSDN 上有一篇操作指南文章](http://msdn.microsoft.com/en-us/library/hh394026%28v=vs.92%29)，尽管代码很简单：

```
BingMapsTask bingMapsTask = new BingMapsTask();

//Omit the Center property to use the user's current location.
bingMapsTask.Center = new GeoCoordinate(52.1, 1.2); // Substitute for your lat/long
bingMapsTask.Show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T12:32:06.153

启动 Bing 地图后，我转到共享选项卡以获取指向当前视图的完整链接，它给出了以下信息：

> [http://www.bing.com/maps/?v=2&cp=52.211442563609495~0.12835717468262953&lvl=14&dir=0&sty=r&eo=0&form=LMLTCC](http://www.bing.com/maps/?v=2&cp=52.211442563609495~0.12835717468262953&lvl=14&dir=0&sty=r&eo=0&form=LMLTCC)

cp 是中心点，后跟 lat~long

lvl 是缩放级别

sty 是样式（r=road，b=bird's eye，h=aerial，等等）

不太确定其他参数，但将它们排除在外似乎仍然有效：

> [http://www.bing.com/maps/?cp=52.211442563609495~0.12835717468262953&lvl=14&sty=r](http://www.bing.com/maps/?cp=52.211442563609495~0.12835717468262953&lvl=14&sty=r)

# html - 如何将文本区域的标签对齐到顶部？

> ID：11010491
> 
> 赞同：31
> 
> 时间：2012-06-13T07:57:35.400
> 
> 标签：html, css, forms, layout

我确实有一个表格数据，如下所示：

```
<td>
    <label for="title">Title : </label>
    <textarea rows="5" id="title" name="title"></textarea>
</td> 
```

标签的默认位置在底部。如何将标签与文本区域的顶部对齐？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-06-13T07:59:24.053

使用以下 CSS：

```
​textarea { vertical-align: top; }​ 
```

*   [jsFiddle 演示](http://jsfiddle.net/aMLFE/)
*   [`vertical-align`在 MDN 上](https://developer.mozilla.org/en/CSS/vertical-align)：

    > vertical-align CSS 属性指定内联或表格单元格元素的垂直对齐方式。

*   [什么是垂直对齐？关于 CSS 技巧](http://css-tricks.com/what-is-vertical-align/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T08:07:21.720

@Bazmegakapa 很好的答案！我们也可以这样做

```
label{display:block; float:left;}​ 
```

小提琴演示：http: [//jsfiddle.net/kaMqg/1/](http://jsfiddle.net/kaMqg/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-17T13:52:13.010

使用 br 标签。

```
<td>
    <label for="title">Title : </label>
    <br>
    <textarea rows="5" id="title" name="title"></textarea>
</td> 
```

# asp.net-mvc-3 - Ajax.BeginForm 检查请求是否被重定向

> ID：11010501
> 
> 赞同：4
> 
> 时间：2012-06-13T07:58:18.860
> 
> 标签：asp.net-mvc-3, asp.net-ajax, ajax.beginform, asp.net-mvc-ajax

如何确定异步请求表单ajax表单是否被重定向？在我的情况下，如果用户的会话关闭，请求将被重定向到登录页面。

我试图检查 OnComplete、OnSuccess 和 OnBegin 事件的参数（不调用 OnFailure）但没有人帮忙。

目前，在会话关闭的情况下，我将整个登录页面嵌入到当前页面的 div 中。

我看到如何避免这种情况的唯一方法是这样的代码：

```
function onSuccessPost(a,b,c) {
   if (a.indexOf("<!DOCTYPE html>") == 0) {
      window.location = window.location;
   }
   // ...
} 
```

但是这个解决方案似乎有点难看。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:53:08.640

```
public ActionResult PossibleRedirectAction(bool isRedirect = false)
{
    ViewBag.IsRedirect = isRedirect;
} 
```

并将此代码置于您要重定向的操作中：

```
RedirectToAction("PossibleRedirectAction", new {isRedirect = true}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T08:56:16.963

~~不要从通过 AJAX 调用的控制器操作重定向。您可以使用 JSON：~~

 ~~```
public ActionResult Foo()
{
    var url = Url.Action("Bar", "Baz");
    return Json(new { location = url }, JsonRequestBehavior.AllowGet);
} 
```~~ 

现在在您的 AJAX 成功回调中：

```
success: function(result) {
    window.location.href = result.location;
} 
```

~~显然，如果您打算在 AJAX 请求后始终从客户端重定向，这将完全消除 AJAX 的任何好处。只需使用标准链接调用控制器操作 => 在这种情况下使用 AJAX 毫无意义。~~

* * *

更新：

似乎您正在尝试做的是在表单身份验证 cookie 过期时拦截到登录页面的重定向。Phil Haack 写了一篇博客： http: [//haacked.com/archive/2011/10/04/prevent-forms-authentication-login-page-redirect-when-you-donrsquot-want.aspx](http://haacked.com/archive/2011/10/04/prevent-forms-authentication-login-page-redirect-when-you-donrsquot-want.aspx)

在本文中，他说明了如何防止表单身份验证模块自动将您重定向到登录页面，而是发送一个 401 状态代码，该代码可能被您的 AJAX 请求拦截并在客户端上执行重定向。

# c# - BehaviourSubject 和 CombineLatest - 奇怪的行为

> ID：11010503
> 
> 赞同：1
> 
> 时间：2012-06-13T07:58:26.413
> 
> 标签：c#, system.reactive

给定以下代码。

```
EventLoopScheduler scheduler = new EventLoopScheduler(ts => new Thread(ts));

BehaviorSubject<int> subject = new BehaviorSubject<int>(0);

subject
    .ObserveOn(scheduler)
    .CombineLatest(Observable.Interval(TimeSpan.FromSeconds(1), scheduler), (x, y) => x)                        
    .Subscribe(x => Debug.WriteLine(x));

subject.OnNext(1); 
```

为什么要打印？

```
0
1
0
1
0
1
... 
```

代替：

```
0
1
1
1
1
1
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:27:47.380

首先你的输出看起来很奇怪。我会说他们两个。我猜输出应该是：

```
1
1
1
1
1 
```

**没有** `0`。这是因为第一个间隔值将在 1 秒内产生 - 绝对是在你调用之后`subject.OnNext(1);`

另一件事`BehaviourSubject<int>`是英国版的[BehaviorSubject(Of T)](http://msdn.microsoft.com/en-us/library/hh229802%28v=vs.103%29.aspx)吗？:) 如果您有自己的`BehaviourSubject`实现，请用它扩展您的问题。

# sql-server-2005 - 如何在 SQL Server 2005 中进行更新插入（更新或插入）

> ID：11010511
> 
> 赞同：63
> 
> 时间：2012-06-13T07:59:18.143
> 
> 标签：sql-server-2005

我有一个表，我在其中为员工插入行，但是下次当我想插入行时，我不想再次为该员工插入数据，只想用所需的列进行更新，如果它退出，则创建新行

我们如何在 SQL Server 2005 中做到这一点？

我正在使用jsp

我的查询是

```
String sql="insert into table1(id,name,itemname,itemcatName,itemQty)values('val1','val2','val3','val4','val5')"; 
```

如果是第一次，则将其插入数据库，否则如果存在则更新它

怎么做？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-06-13T08:02:14.087

尝试检查是否存在：

```
IF NOT EXISTS (SELECT * FROM dbo.Employee WHERE ID = @SomeID)

    INSERT INTO dbo.Employee(Col1, ..., ColN)
    VALUES(Val1, .., ValN)

ELSE

    UPDATE dbo.Employee
    SET Col1 = Val1, Col2 = Val2, ...., ColN = ValN
    WHERE ID = @SomeID 
```

您可以轻松地将其包装到一个存储过程中，然后从外部调用该存储过程（例如，从 C# 之类的编程语言或您正在使用的任何语言）。

**更新：**您可以将整个语句写在一个长字符串中（可行-但不是很有用）-或者您可以将其包装到存储过程中：

```
CREATE PROCEDURE dbo.InsertOrUpdateEmployee
       @ID INT,
       @Name VARCHAR(50),
       @ItemName VARCHAR(50),  
       @ItemCatName VARCHAR(50),
       @ItemQty DECIMAL(15,2)
AS BEGIN
    IF NOT EXISTS (SELECT * FROM dbo.Table1 WHERE ID = @ID)
       INSERT INTO dbo.Table1(ID, Name, ItemName, ItemCatName, ItemQty)
       VALUES(@ID, @Name, @ItemName, @ItemCatName, @ItemQty)
    ELSE
       UPDATE dbo.Table1
       SET Name = @Name,
           ItemName = @ItemName,
           ItemCatName = @ItemCatName,
           ItemQty = @ItemQty
       WHERE ID = @ID
END 
```

然后只需从您的 ADO.NET 代码中调用该存储过程

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2013-03-13T21:25:35.867

您可以使用`@@ROWCOUNT`检查是否应插入或更新行：

```
update table1 
set name = 'val2', itemname = 'val3', itemcatName = 'val4', itemQty = 'val5'
where id = 'val1'
if @@ROWCOUNT = 0
insert into table1(id, name, itemname, itemcatName, itemQty)
values('val1', 'val2', 'val3', 'val4', 'val5') 
```

在这种情况下，如果更新失败，将插入新行

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-01-16T17:49:57.920

您可以检查该行是否存在，然后插入或更新，但这保证您将执行两个 SQL 操作，而不是一个：

1.  检查行是否存在
2.  插入或更新行

更好的解决方案是始终先更新，如果没有更新任何行，则执行 INSERT，如下所示：

```
update table1 
set name = 'val2', itemname = 'val3', itemcatName = 'val4', itemQty = 'val5'
where id = 'val1'

if @@ROWCOUNT = 0
  insert into table1(id, name, itemname, itemcatName, itemQty)
  values('val1', 'val2', 'val3', 'val4', 'val5') 
```

这将需要一个 SQL 操作或两个 SQL 操作，具体取决于该行是否已存在。

但是，如果性能确实是一个问题，那么您需要确定这些操作是否更有可能是 INSERT 或 UPDATE。如果更新更常见，请执行上述操作。如果 INSERT 更常见，您可以反过来执行此操作，但您必须添加错误处理。

```
BEGIN TRY
  insert into table1(id, name, itemname, itemcatName, itemQty)
  values('val1', 'val2', 'val3', 'val4', 'val5')
END TRY
BEGIN CATCH
  update table1 
  set name = 'val2', itemname = 'val3', itemcatName = 'val4', itemQty = 'val5'
  where id = 'val1'
END CATCH 
```

要真正确定是否需要执行 UPDATE 或 INSERT，您必须在单个 TRANSACTION 中执行两个操作。理论上，在第一个 UPDATE 或 INSERT（甚至是 EXISTS 检查）之后，但在下一个 INSERT/UPDATE 语句之前，数据库可能已经更改，导致第二个语句无论如何都会失败。这是极其罕见的，交易的开销可能不值得。

或者，您可以使用称为 MERGE 的单个 SQL 操作来执行 INSERT 或 UPDATE，但这对于这一单行操作来说也可能是多余的。

考虑阅读有关[SQL 事务语句](https://www.google.com/?#q=sql%20transaction%20statement)、[竞争条件](https://www.google.com/?#q=race%20condition)、[SQL MERGE 语句](https://www.google.com/?#q=SQL%20merge%20statement)的内容。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2019-04-24T14:08:22.390

这是 Michael J. Swart 关于此事的一篇有用文章，其中涵盖了`UPSERT`在 SQL Server 中实现的不同模式和反模式：
[https ://michaeljswart.com/2017/07/sql-server-upsert-patterns-and-antipatterns/](https://michaeljswart.com/2017/07/sql-server-upsert-patterns-and-antipatterns/)

它解决了相关的并发问题（主键违规、死锁）——此处提供的所有答案都被视为文章中的反模式（使用触发器的@Bridge 解决方案除外，此处未涉及）。

以下是文章的摘录，其中包含作者首选的解决方案：

在带有锁提示的可序列化事务中：

```
CREATE PROCEDURE s_AccountDetails_Upsert ( @Email nvarchar(4000), @Etc nvarchar(max) )
AS 
  SET TRANSACTION ISOLATION LEVEL SERIALIZABLE;
  BEGIN TRAN

    IF EXISTS ( SELECT * FROM dbo.AccountDetails WITH (UPDLOCK) WHERE Email = @Email )

      UPDATE dbo.AccountDetails
         SET Etc = @Etc
       WHERE Email = @Email;

    ELSE 

      INSERT dbo.AccountDetails ( Email, Etc )
      VALUES ( @Email, @Etc );

  COMMIT 
```

在stackoverflow上也有相关问题的答案：[Insert Update stored proc on SQL Server](https://stackoverflow.com/questions/13540/insert-update-stored-proc-on-sql-server/193876#193876)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-13T08:21:44.873

您可以使用`INSTEAD OF INSERT`表上的触发器来执行此操作，该触发器检查行的存在，然后根据它是否已经存在进行更新/插入。在 MSDN 上有一个如何为 SQL Server 2000+ 执行此操作的[示例](http://msdn.microsoft.com/en-us/library/aa175158%28v=sql.80%29.aspx)：

```
CREATE TRIGGER IO_Trig_INS_Employee ON Employee
INSTEAD OF INSERT
AS
BEGIN
SET NOCOUNT ON
-- Check for duplicate Person. If no duplicate, do an insert.
IF (NOT EXISTS (SELECT P.SSN
      FROM Person P, inserted I
      WHERE P.SSN = I.SSN))
   INSERT INTO Person
      SELECT SSN,Name,Address,Birthdate
      FROM inserted
ELSE
-- Log attempt to insert duplicate Person row in PersonDuplicates table.
   INSERT INTO PersonDuplicates
      SELECT SSN,Name,Address,Birthdate,SUSER_SNAME(),GETDATE()
      FROM inserted
-- Check for duplicate Employee. If no duplicate, do an insert.
IF (NOT EXISTS (SELECT E.SSN
      FROM EmployeeTable E, inserted
      WHERE E.SSN = inserted.SSN))
   INSERT INTO EmployeeTable
      SELECT EmployeeID,SSN, Department, Salary
      FROM inserted
ELSE
--If duplicate, change to UPDATE so that there will not
--be a duplicate key violation error.
   UPDATE EmployeeTable
      SET EmployeeID = I.EmployeeID,
          Department = I.Department,
          Salary = I.Salary
   FROM EmployeeTable E, inserted I
   WHERE E.SSN = I.SSN
END 
```

# ios - 无法在设备上启动应用程序

> ID：11010523
> 
> 赞同：14
> 
> 时间：2012-06-13T08:00:03.293
> 
> 标签：ios, xcode

当我尝试从 Xcode 启动我的应用程序到设备时，我收到此错误：

```
error: failed to launch '/Users/Luca/Library/Developer/Xcode/DerivedData/myapp-bmsyknqfiyjuechenbmjnbfmpnsn/Build/Products/Debug-iphoneos/myapp.app/myapp' -- No such file or directory (/Users/Luca/Library/Developer/Xcode/DerivedData/myapp-bmsyknqfiyjuechenbmjnbfmpnsn/Build/Products/Debug-iphoneos/myapp.app/myapp) 
```

我正在为我的 iPhone 使用 Xcode 4.3.2 和 iOS 5.1。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-21T19:50:45.253

1.  断开您的设备。
2.  从您的设备中删除该应用程序。
3.  完全退出 Xcode。
4.  转到 ~/Library/Developer/Xcode/DerivedData 并查看那里的文件夹 ($ ls)。
5.  找到前面有应用程序名称的那个并删除文件夹（$ rm -rf）。
6.  重新打开 Xcode。
7.  连接您的设备。
8.  构建并运行应用程序 (cmd + R)。
9.  繁荣。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-06-13T08:05:50.667

清理您的应用程序文件夹并重建它

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-06-13T08:02:25.577

清理、退出 XCode、重新启动 XCode 和重新编译帮助我解决了一个相同的问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-15T13:48:53.627

我在 iPhone 4 上编译 Cocos2D 项目时也遇到了这个问题。那是在遵循了 Jeff Grimes 建议的所有步骤之后，但无济于事。一切都很好，所以我有点难过。

失败是由`UIRequiredDeviceCapabilities`for `accelerometer`from `YES`to的变化引起的`NO`（因为应用程序没有使用加速度计，我决定放弃这个要求）。我把它改回来了，一切都很好 - 再次编译。

顺便说一句 - 我认为将键的值更改为`NO`意味着不需要加速度计。这是错误的 - 这会破坏编译器，因为它会检查以确保设备没有加速度计，这对于大多数设备来说当然返回 true。因此，如果您不需要加速度计支持，您只需要完全删除该行。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-14T09:12:07.667

当我尝试在 iOS 版本低于 Target->Summary->Deployment Target 中设置的部署目标的设备上运行我的应用程序时遇到了这个问题。部署目标设置为 6.0 ，我的设备安装了 iOS 5.1 。将部署目标更改为 5.1 为我修复了它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-28T07:50:16.183

对我来说重新启动 Xcode，在大多数情况下清理 DerivedData 和重新启动设备是不够的，直到我发现 iTunes 也在运行，并且在退出 iTunes 后一切正常！

所以我现在的步骤很简单：

1.  退出 Xcode。
2.  如果 iTunes 正在运行，请退出 iTunes。
3.  重新打开项目。

它无需清洁和设备重启即可工作。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-11-18T11:09:50.873

我也有同样的问题。就我而言，我刚刚将 iPhone 从 iOS 6.1 升级到了 iOS 7.0.4。我可以将 Xcode 5 中的应用程序安装到设备上，但无法启动。我在断开连接、删除应用程序、删除文件夹和重新启动 Xcode 方面做了很多上述建议。它仍然无法工作，直到我重新启动 iPhone。重新启动 iPhone 后，我重复上述操作，现在它可以工作了。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-12-21T22:54:26.217

我只是想再添加一个提示以防止这种情况发生：

在您点击 xCode 的停止调试按钮之前，请勿分离您的物理设备。这实际上是我遇到“无法启动”问题后最常见的情况。在我的情况下，80% 的问题是由这个引起的......只是在调试过程中不小心分离了设备......

记住。:P

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-13T10:14:19.843

有时它有助于断开设备并重新插入

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-08-12T09:33:07.790

我也遇到过这个问题。我尝试了上面列出的选项。

但在我的情况下，问题是设备的 iOS 版本为 6.0，并且构建目标设置为 6.1。模拟器的版本是 iOS 6.1，所以它在模拟器上运行，但在手机上安装失败。

更改构建目标版本后，它在设备上执行并安装

愿这会有所帮助...

——阿维纳什

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-09-02T22:26:35.290

我能够解决这个问题的唯一方法是硬启动我的 iPhone（按住电源和菜单按钮直到它关闭）并重新启动 Xcode。

# c++ - 对于带有单个接受器的线程 boost::asio 服务器，我们是否需要每个线程多个 io_service

> ID：11010530
> 
> 赞同：9
> 
> 时间：2012-06-13T08:00:45.760
> 
> 标签：c++, sockets, boost, boost-asio, boost-thread

我在`boost::asio`. 我有一些非常基本的问题。

我是否需要有一个不同的`io_service`，并且`socket`在一个不同的`thread`但一个单一的下不同`acceptor`，以在线程服务器中处理客户端？

我相信我必须为新客户使用不同的套接字。但是如果所有线程都使用相同的线程，`io_service`它会是并行的吗？

我在 asio 部分浏览了[http://en.highscore.de/cpp/boost/index.html](http://en.highscore.de/cpp/boost/index.html)，它说我需要在不同的线程中有不同的 io_services 来实现并行化。

如果我计划创建一个 Server 类，该类在`new TCPsession`每次出现新客户端时创建一个，`acceptor.async_accept`
并且`TCPSession`ctor 创建一个`io_service`和一个`thread`并`io_service.run()`在其自己的线程中运行它会是一个好的设计吗？

然而，在这个设计中，我将在哪里加入所有这些线程？我是否需要另一个`io_service`for`main`以便它在获得新 Client 之前不会终止？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-13T08:37:17.280

在单个`io_service`线程中运行可以为项目中的所有 asio 对象提供服务。在这样的设计中，I/O 仍然是“并行的”，因为它是非阻塞的、异步的；但由于`io_service::run()`在一个线程中运行，所有的完成处理程序都将被一个接一个地串行调用。

要在多个 CPU 上扩展网络模块，您可以使用以下两种方法之一：thread-per-core、io_service-per-core - 请参阅[HTTPServer2 和 HTTPServer3 示例](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_asio/examples.html)。

无论如何，在我看来，创建一个线程或`io_service`每个线程`TCPSession`似乎是不必要的开销 - 想想你有数千个线程的情况`TCPSession`......

# android - 如何实现小部件开关？

> ID：11010533
> 
> 赞同：0
> 
> 时间：2012-06-13T08:00:54.367
> 
> 标签：android, switch-statement

我正在寻找小部件[Switch](http://developer.android.com/reference/android/widget/Switch.html)。不是 switch 语句或 switch 活动等。

网上有非常少见的教程。

我的问题是 xml 中的图形布局看不到开关。

我的 xml

```
<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_margin="10dp" >

    <TextView
        android:id="@+id/text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="推送通知"
        android:textColor="#ffffff"
        android:textSize="20dp" />

    <TextView
        android:id="@+id/status"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/text"
        android:layout_marginTop="5dp"
        android:textColor="#ffffff"
        android:textSize="15dp" />

    <Switch
        android:id="@+id/switch"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:textOff="关"
        android:textOn="开" />
</RelativeLayout> 
```

错误发生在那里。

错误

`Missing styles. Is the correct theme chosen for this layout?` `Use the Theme combo box above the layout to choose a different layout, or fix the theme style references.`

`NOTE: This project contains resource errors, so aapt did not succeed, which can cause rendering failures. Fix resource problems first.`

`Failed to find style 'switchStyle' in current theme` `java.lang.NullPointerException` `Exception details are logged in Window > Show View > Error Log`

我不知道该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T14:00:49.153

你的 AndroidManifest.xml 应该有

```
 <uses-sdk
    android:minSdkVersion="14"
    android:targetSdkVersion="16" /> 
```

因为 Switch 小部件仅支持 14 及以上 API 级别..

给你一个简单的例子..

```
main.xml
<GridLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

            <Switch
                android:id="@+id/bluetooth"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="32dip"
                android:text="Bluetooth"
                />

</GridLayout>

ur .java

package time.pass;

import android.os.Bundle;
import android.app.Activity;
import android.widget.CompoundButton;
import android.widget.Switch;
import android.widget.Toast;

public class TimePass extends Activity implements CompoundButton.OnCheckedChangeListener {
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_time_pass );

    Switch s = (Switch) findViewById(R.id.bluetooth);
    if (s != null) {
        s.setOnCheckedChangeListener(this);
    }
}

@Override
public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
   Toast.makeText(this, "Bluetooth is " + (isChecked ? "on" : "off"),
           Toast.LENGTH_SHORT).show();
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-25T14:34:11.427

您可以使用 android.support.v7.widget.SwitchCompat 来实现向后兼容性。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-06-27T10:26:50.170

使用您的 xml 文件的主题作为`Theme.DeviceDefault`

# ruby-on-rails - 在 Rails 初始化程序中访问 ENV[variable_set_from_passenger]

> ID：11010537
> 
> 赞同：2
> 
> 时间：2012-06-13T08:01:17.130
> 
> 标签：ruby-on-rails, environment-variables, passenger

我正在使用 nginx/passenger 运行 rails。有没有办法将环境变量从 nginx/passenger 传递到 rails 应用程序，以便 rails 初始化程序可以访问它（当应用程序启动时）。

通过使用`passenger_set_cgi_param MYVAR MYVALUE;`，我可以通过`request.env["MYVAR"]`.

我需要在初始化程序中访问它。为此，我如何在 nginx/passenger 中设置它？我猜想在初始化程序中读取 env var 可以通过`ENV["MYVAR"]`?

使用 unicorn 或其他一些 Web 服务器会使事情变得更容易吗？

# c# - 读/写 Cookie

> ID：11010542
> 
> 赞同：9
> 
> 时间：2012-06-13T08:01:44.860
> 
> 标签：c#, asp.net, cookies

我今天加入了这个网站，希望有人能向我解释我在 ASP.NET 中使用 cookie 的问题。如果我的问题太基本，我仍在学习，但我在谷歌上找不到答案。我找到的每个答案都显示了我已经拥有的代码。

我正在尝试创建和读取 cookie，我已将此代码放入我的应用程序构造函数中。这就是我尝试初始化我的cookie并将其添加到浏览器的方式。

全局.asax.cs

```
 public MyApplication()
    {
        myCookie = new HttpCookie("UserSettings");
        myCookie.Value = "nl";
        myCookie.Expires = DateTime.Now.AddDays(1d);
        Response.Cookies.Add(myCookie);
    } 
```

HomeController.cs 中的一个方法（尝试读取 cookie）

```
 public void setLang(string lang)
    {
        HttpCookie myCookie = Request.Cookies["UserSettings"];
        myCookie.Value = lang;
        //rest of method 
```

我在 Response.Cookies.Add(myCookie); 处收到错误消息 [HttpException (0x80004005): 响应在此上下文中不可用。]

我的想法是我可能忘记了导入命名空间或其他东西，但我似乎没有做任何事情来解决这个错误，有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-13T08:39:36.050

您不能使用 Global.asax 构造函数将 cookie 添加到响应，因为 Global.asax 构造函数在应用程序开始处理 HTTP 请求之前被调用。

将代码从 Global.asax 构造函数移动到`Application_BeginRequest`方法：

```
public void Application_BeginRequest()
{
    myCookie = new HttpCookie("UserSettings");
    myCookie.Value = "nl";
    myCookie.Expires = DateTime.Now.AddDays(1d);
    Response.Cookies.Add(myCookie);
} 
```

Global.asax 有许多不同的事件被触发，你只是选错了。

*   `Application_Init`: 当应用程序第一次初始化时触发。
*   `Application_Start`：在应用程序第一次启动时触发。
*   `Session_Start`：在用户会话开始时第一次触发。
*   `Application_BeginRequest`：每次有新请求进入时触发。
*   `Application_EndRequest`: 请求结束时触发。
*   `Application_AuthenticateRequest`：表示请求已准备好进行身份验证。
*   `Application_Error`：当应用程序中发生未处理的错误时触发。
*   `Session_End`：当单个用户会话结束或超时时触发。
*   `Application_End`：当应用程序结束或超时时触发（通常用于应用程序清理逻辑）。

（来自[http://en.wikipedia.org/wiki/Global.asax](http://en.wikipedia.org/wiki/Global.asax)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-31T09:59:56.220

cookie 是存储在客户端计算机上的一小段信息。此文件位于客户端计算机上。它用于在客户端计算机上存储用户偏好信息，如用户名、密码、城市和电话号码等。在使用 cookie 之前，我们需要导入名为 Systen.Web.HttpCookie 的命名空间。

Cookie 的类型？Persist Cookie - 一个 cookie 没有过期时间，称为 Persist Cookie

```
Non-Persist Cookie - A cookie has expired time Which is called as Non-Persist Cookie 
```

如何创建一个cookie？

借助 Response 对象或 HttpCookie 在 Asp.Net 中创建 cookie 真的很容易

```
 HttpCookie userInfo = new HttpCookie("userInfo");
    userInfo["UserName"] = "Jishan siddique";
    userInfo["UserColor"] = "Black";
    userInfo.Expires.Add(new TimeSpan(0, 1, 0));
    Response.Cookies.Add(userInfo); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-31T10:32:29.080

**Cookie的共同属性：**

```
1.Domain => Which is used to associate cookies to domain.

2.Secure  => We can enable secure cookie to set true(HTTPs).

3.Value    => We can manipulate individual cookie.

4.Values  => We can manipulate cookies with key/value pair.

5.Expires => Which is used to set expire date for the cookies. 
```

**曲奇的优点：**

```
1.Its clear text so user can able to read it.

2.We can store user preference information on the client machine.

3.Its easy way to maintain.

4.Fast accessing. 
```

**Cookie 的缺点**

```
1.If user clear cookie information we can't get it back.

2.No security.

3.Each request will have cookie information with page. 
```

**如何清除cookie信息？**

1.我们可以从cookie文件夹中清除客户端机器上的cookie信息

2.设置cookie对象的过期时间 userInfo.Expires = DateTime.Now.AddHours(1); 它将清除一小时持续时间的cookie

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-02-04T03:12:19.480

您可以在 .Net 中使用预定义的命名空间。像这样：

```
System.Web.HttpContext.Current.Response.addCookie(cookieobject); 
```

# android - opengl glTranslatef() 概念

> ID：11010549
> 
> 赞同：1
> 
> 时间：2012-06-13T08:02:15.007
> 
> 标签：android, opengl-es

我是 OpenGL ES 的新手。我正在研究 android 中的 opengles 教程，其中使用了 glTranslatef() 进行形状移动。我的问题很简单。首先告诉我这个功能是否用于缩放目的，如果我没记错的话，通过使用 -z 值，对象进入屏幕深处。其次，如果我绘制了一个正方形，然后使用函数 glTranslatef(0,0,-3) 并再次绘制一个新正方形。这个函数调用会影响之前绘制的正方形吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T09:50:04.403

是的 glTranslatef() 函数是通过更改 -z 值来实现缩放效果的一种方法，尽管如果使用正交视图可能看不到效果。*在调用 glTranslatef()之后*绘制的所有对象都会被转换，前提是矩阵模式是 GL_MODELVIEW 或 GL_PROJECTION。因此，在您的示例中，除非您重新绘制它，否则不应影响先前绘制的正方形。

# html - 如何设置相邻且位于单独 div 中的两个表的高度？

> ID：11010555
> 
> 赞同：0
> 
> 时间：2012-06-13T08:02:28.777
> 
> 标签：html

我在第一个表的 tr(table row) 的两个相邻 divs.height 中有 2 个表与第二个表的不匹配。我希望两个表的 tr（表行）的高度应该相同。那么如何根据左表的 tr（表行）的高度设置/调整第二个（右）表的 tr（表行）的高度？请帮助..它应该在不同的分辨率下工作..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:07:11.917

使用 jQuery：

```
$tableheight2 = $('#table2').height();
$tableheight = $('#table1').height();

if($tableheight >= $tableheight2)
{

$('#table2').height(($tableheight);

}else{

$('#table1').height($tableheight2);

} 
```

用 tr 制作：

```
$trheight = 0;

/* loop all tr in function */
$('#table1 tr').each(function() {

  /* replace $strheight with tr height when smaller */ 
  if($(this).height()>$strheight){
    $strheight=$(this).height();
  }
}

/* loop all tr and replace the height with $strheight */
$('#table1 tr').each(function() {
   $(this).height($strheight);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T08:13:05.757

或者使用 css，到一个固定的高度：

```
<style>
    table tr {
        height: 50px;
    }
</style> 
```

# clojure - proxy 和 reify 有什么区别？

> ID：11010558
> 
> 赞同：15
> 
> 时间：2012-06-13T08:02:46.327
> 
> 标签：clojure

proxy 和 reify 有什么区别？我有一些示例代码：

```
(.listFiles (java.io.File. ".")
  (proxy
    [java.io.FileFilter] []
    (accept [f]
      (.isDirectory f))))

(.listFiles (java.io.File. ".")
  (reify
    java.io.FileFilter
    (accept [this f]
      (.isDirectory f)))) 
```

结果是一样的，当使用代理或reify时，哪个更好？

**更新：**

我发现了一些东西：

*   proxy 不需要`this`as 第一个参数。
*   代理支持超类。
*   代理支持参数。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-13T08:25:15.750

来自[Clojure.org 的数据类型概述](http://clojure.org/datatypes)：

> 的方法体`reify`是词法闭包，可以引用周围的局部作用域。`reify`不同之处`proxy`在于：
> 
> *   仅支持协议或接口，不支持具体的超类。
> *   方法体是结果类的真实方法，而不是外部 fns。
> *   在实例上调用方法是直接的，而不是使用映射查找。
> *   不支持方法映射中方法的动态交换。
> 
> 结果是`proxy`在构造和调用方面都比 更好的性能。比在其约束条件不禁止的所有情况下都`reify`更可取。`proxy`

来源：[http ://clojure.org/datatypes](http://clojure.org/datatypes)

# c# - InitialValue 属性的 ASP.Net RequiredFieldValidator 错误？

> ID：11010562
> 
> 赞同：2
> 
> 时间：2012-06-13T08:03:02.620
> 
> 标签：c#, asp.net, validation

我刚刚发现了这种奇怪的行为，这是一个错误还是我错过了什么？

```
<asp:TextBox runat="server" Text="" ID="txtSomething" />
<asp:RequiredFieldValidator 
    ErrorMessage="errormessage" 
    ControlToValidate="txtSomething"
    runat="server"
    Text="(*) Required"
    SetFocusOnError="true"
    EnableClientScript="true"/> 
```

使用这个简单的代码，验证可以正常工作，即使我写了一个充满空格的字符串

但是，如果我添加这样的`InitialValue`属性：

```
<asp:TextBox runat="server" Text="lol" ID="txtSomething" />
<asp:RequiredFieldValidator 
    ErrorMessage="errormessage" 
    ControlToValidate="txtSomething"
    runat="server"
    Text="(*) Required"
    SetFocusOnError="true"
    EnableClientScript="true"
    InitialValue="lol"/> 
```

注意我添加了**InitialValue="lol"**和**Text="lol"**

现在，如果我删除文本**大声笑**验证将被忽略

为什么？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T08:05:28.390

仔细看MSDN描述：

> 使用此属性指定输入控件的初始值。
> 
> 仅当关联输入控件的值在失去焦点时与此 InitialValue 匹配时，验证才会失败。

我认为它不言自明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-07T05:33:50.013

如果您使用 Visual Studio，您可以看到“解决方案资源管理器/参考/系统”。

双击搜索，可以看到“RequiredFieldValidator是一个类，InitialValue是一个变量”

* * *

### 您可以进行四种测试。

编号 TextBox InitialValue Ignored
1 lol lol Yes
2 lol "" No
3 "" lol No
4 "" "" Yes

* * *

因为您使用 InitialValue 来比较 TextBox 的值。

# jquery-ui - Jquerymobile ajax响应元素不接受css

> ID：11010563
> 
> 赞同：1
> 
> 时间：2012-06-13T08:03:17.450
> 
> 标签：jquery-ui, jquery, jquery-mobile

我正在尝试在我的虚拟应用程序中实现国家/地区搜索。最初在主页上，我使用列表视图并且它显示正确。但是相同的列表视图，如果我使用 ajax 显示，列表视图内容正在显示，但 css 不适用于此。

请点击下面的链接查看虚拟应用程序：http: [//questoons.com/vkwave/sof/ajaxrequest/](http://questoons.com/vkwave/sof/ajaxrequest/)

在虚拟应用程序中，最初列表视图显示正确，但是当单击“调用 Ajax 并填充国家列表”时，我使用 ajax 发送整个列表数据，如下所示：

```
<ul data-role="listview" data-filter="true" data-filter-placeholder="Search Country/Group..." data-filter-theme="d" data-theme="d" data-divider-theme="b">
                    <li data-role="list-divider">A</li>
                    <li data-icon="false"><a href="#"  >Afghanistan</a></li>
                    <li data-icon="false"><a href="#"  >Argentina</a></li>
                    <li data-icon="false"><a href="#"  >Australia</a></li>
                    <li data-icon="false"><a href="#"  >Austria</a></li>
                    <li data-role="list-divider">B</li>
                    <li data-icon="false"><a href="#"  >Bahamas, The</a></li>
                    <li data-icon="false"><a href="#"  >Bahrain</a></li>
                </ul> 
```

但在 ajax 响应列表中未应用 css。请指导我哪里错了。

我正在使用普通的 jquery ajax。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T08:23:23.870

在第一次加载你的 Html 是：

```
<ul data-divider-theme="b" data-theme="d" data-filter-theme="d" data-filter-placeholder="Search Country/Group..." data-filter="true" data-role="listview"
    class="ui-listview">
    <li data-role="list-divider" role="heading" class="ui-li ui-li-divider ui-bar-b">
        A
    </li>
    <li data-icon="false" data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="div" data-iconpos="right" data-theme="d"
        class="ui-btn ui-btn-icon-right ui-li ui-btn-up-d">
        <div class="ui-btn-inner ui-li">
            <div class="ui-btn-text">
                <a href="#" class="ui-link-inherit">Afghanistan</a></div>
        </div>
    </li>
</ul> 
```

ul、li 和其他 html 元素有一些类。但是在 ajax 响应中你错过了这个类。将 css 类添加到您的 ajax 响应中。

例如 ：

```
<ul class="ui-listview" ...
    <li class="ui-btn ui-btn-icon-right ui-li ui-btn-up-d" ... 
```

# proxy - 使用 x++ 配置代理

> ID：11010564
> 
> 赞同：2
> 
> 时间：2012-06-13T08:03:18.983
> 
> 标签：proxy, x++, axapta, dynamics-ax-2012

我的企业中有代理，我想测试代码 X++ 以连接互联网并发送电子邮件。

我不知道我可以做些什么来在动态 ax 中配置代理，或者我可以将哪些行代码 X++ 添加到我的方法中：

```
void SendMail()
{

    System.Net.Mail.MailMessage             mailMessage;
    System.Net.Mail.Attachment              attachment;
    System.Net.Mail.AttachmentCollection    attachementCollection;
    System.Net.Mail.SmtpClient              smtpClient;
    System.Net.Mail.MailAddress             mailAddressFrom;
    System.Net.Mail.MailAddress             mailAddressTo;
    str                                     Body;
    str                                     Subject;
    str                                     SMTPServer;
    str                                     FileName;
    str                                     psw;
    str                                     login;

    System.Net.Mail.SmtpDeliveryMethod      stmpDeliveryMethod;

    System.Net.WebProxy                     proxy;

    ProxyIPAddress                          proxyIPAddress;
    ProxyPortNum                            proxyPortNum;

    System.Net.Sockets.Socket               socket;

    System.Net.NetworkCredential            cred;
    ;

    login ="mylogin@gmail.com";
    psw="mypassword";

    mailAddressFrom = new System.Net.Mail.MailAddress("mylogin@gmail.com","");
    mailAddressTo = new System.Net.Mail.MailAddress("mylogin@gmail.com","");
    Body = "<B>Body of the email</B>";
    Subject = "Subject line for the email";
    //SMTPServer = SysEmailParameters::find(false).SMTPRelayServerName;

    mailMessage = new System.Net.Mail.MailMessage(mailAddressFrom, mailAddressTo);
    mailmessage.set_Subject(Subject);
    mailmessage.set_Body(Body);

    cred = new System.Net.NetworkCredential(login, psw);

    smtpClient = new System.Net.Mail.SmtpClient("smtp.gmail.com", 587);
    smtpClient.set_EnableSsl(true);

    stmpDeliveryMethod = ClrInterop::parseClrEnum('System.Net.Mail.SmtpDeliveryMethod', 'SpecifiedPickupDirectory');
    smtpClient.set_DeliveryMethod( stmpDeliveryMethod);
    //smtpClient.DeliveryMethod()= System.net.mail.SmtpDeliveryMethod.Network);
    smtpClient.set_UseDefaultCredentials(false);
    smtpClient.set_Timeout(20000);

    smtpClient.set_Credentials(cred); //.Credentials = cred;

    proxy=new System.Net.WebProxy();

    print 'On va envoyer! remarque : next msg est : "sa marche" ';

    smtpClient.Send(mailMessage);

    print 'sa marche';

    //////////////////////////////////////////
    CodeAccessPermission::revertAssert();

} 
```

* * *

例如，我在 Firefox 或 Internet Explorer 中配置代理参数以连接互联网！我指定 ip 192.168.66.33 和端口 1234 ！而在动力学斧头上我做不到！

在 c# 中 w 编辑 web.config ：

我们将其添加到应用程序的 web.config 文件中。

在动力学斧中，我们可以改变什么？！！

请求：

例如，我在 Firefox 或 Internet Explorer 中配置代理参数以连接互联网！我指定 ip 192.168.66.33 和端口 1234 ！而在动力学斧头上我做不到！

在 c# 中 w 编辑 web.config ：

我们将其添加到应用程序的 web.config 文件中。

```
<system.net>

<defaultProxy>

<proxy proxyaddress="YourProxyIpAddress"/>

</defaultProxy>

</system.net> 
```

在动力学斧中，我们可以改变什么？！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T15:29:40.433

您发布的链接（firewall-config）是允许外部访问aos服务器，与您的问题无关。

我自己没有测试过（我没有要测试的代理），但是您是否尝试过在客户端 bin 目录中的 ax32.exe.config 中添加配置部分（或者如果您的代码在服务器上执行，则服务器 bin目录）？

# javascript - 在鼠标悬停时突出显示 DOM 元素，就像检查一样

> ID：11010569
> 
> 赞同：16
> 
> 时间：2012-06-13T08:03:37.673
> 
> 标签：javascript, html, dom, bookmarklet, highlight

我们有一个书签，用户单击一个按钮，需要像 highligther 这样的检查。我们希望这是跨浏览器。

为此，我们需要在鼠标移动期间检测 DOM 元素，一旦我们有了这个元素，我们就需要用 CSS 突出显示。

我们在通过鼠标移动检测 DOM 元素时遇到问题，您能指导我们如何完成吗？

一旦我们有了这个 DOM 元素，在用户单击时我们需要提取 XPath。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-13T08:06:06.690

您可以勾`mousemove`上`document`或`document.body`，然后使用`target`事件对象的属性找出鼠标所在的最顶层元素。然后将 CSS 应用到它可能最容易通过添加一个类来完成。

但我想知道[`:hover`](http://www.w3.org/TR/CSS2/selector.html#x32)伪类是否可以为你省点麻烦……

如果不使用`:hover`，这里有一个例子：

```
(function() {
  var prev;

  if (document.body.addEventListener) {
    document.body.addEventListener('mouseover', handler, false);
  }
  else if (document.body.attachEvent) {
    document.body.attachEvent('mouseover', function(e) {
      return handler(e || window.event);
    });
  }
  else {
    document.body.onmouseover = handler;
  }

  function handler(event) {
    if (event.target === document.body ||
        (prev && prev === event.target)) {
      return;
    }
    if (prev) {
      prev.className = prev.className.replace(/\bhighlight\b/, '');
      prev = undefined;
    }
    if (event.target) {
      prev = event.target;
      prev.className += " highlight";
    }
  }

})(); 
```

[现场复制](http://jsbin.com/uwiyuj)| [来源](http://jsbin.com/uwiyuj/edit)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-13T08:07:57.100

在 jquery 的帮助下，你可以做这样的事情

```
$('*').hover(
    function(e){
        $(this).css('border', '1px solid black');
        e.preventDefault();
        e.stopPropagation();
        return false;
    },function(e){
        $(this).css('border', 'none');
        e.preventDefault();
        e.stopPropagation();
        return false;
    }
); 
```

使用书签中的此代码，您可以加载任何代码

```
javascript:function loadScript(src){f=document.createElement('script');if(f){f.setAttribute("type","text/javascript");f.setAttribute("src",src);document.getElementsByTagName("head")[0].appendChild(f);}};loadScript("yourscripturl"); 
```

# vim - 如何跳转到以 NERDTree 中给定字符开头的第一个文件

> ID：11010575
> 
> 赞同：3
> 
> 时间：2012-06-13T08:04:08.277
> 
> 标签：vim, nerdtree

假设我在 Vim 的 NERDTree 中有以下目录结构：

```
/some/folder/
|-apples.txt
|-bananas.txt
|- ...
|-mandarins.txt
|-mangos.txt
|- ...
|-strawberry.txt
`-watermelon.txt 
```

我的光标在顶层目录上，我想跳到`mandarins.txt`. 如何通过尽可能少的击键来实现这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T08:07:43.873

NERDTree 窗口包含一个特殊的缓冲区，带有`filetype=nerdtree`.
在此窗口/缓冲区中，NERDTree 重新映射您的键。
您仍然可以使用`/pattern`to 搜索模式。
点击`Enter`文件名，将打开它。

* * *

您可以键入`/mand`，然后按`Enter`两次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T07:55:40.110

我并不完全喜欢搜索的解决方案，因为它突出显示了您在所有打开的窗口中的搜索，而且我认为“跳跃”应该可以用更少的击键来实现。

因此，感谢[kev](https://stackoverflow.com/users/348785/kev)和[epsilonhable](https://stackoverflow.com/users/630160/epsilonhalbe)的输入，我编写了一个简单的文件类型插件，将以下脚本放入`~/.vim/ftplugin/nerdtree.vim`：

```
" Quick jump to first item starting with X
function! s:NERDJump(search, backwards)
    if a:backwards
        :silent! :exe '?\c\(|\|`\)\(\~\|+\|-\)'.a:search
    else
        :silent! :exe '/\c\(|\|`\)\(\~\|+\|-\)'.a:search
    end 
endfunction
command! -nargs=* NERDJump call s:NERDJump(<f-args>)

" Search forwards
nmap <buffer> na :NERDJump a 0<CR>
nmap <buffer> nb :NERDJump b 0<CR>
nmap <buffer> nc :NERDJump c 0<CR>
nmap <buffer> nd :NERDJump d 0<CR>
nmap <buffer> ne :NERDJump e 0<CR>
nmap <buffer> nf :NERDJump f 0<CR>
nmap <buffer> ng :NERDJump g 0<CR>
nmap <buffer> nh :NERDJump h 0<CR>
nmap <buffer> ni :NERDJump i 0<CR>
nmap <buffer> nj :NERDJump j 0<CR>
nmap <buffer> nk :NERDJump k 0<CR>
nmap <buffer> nl :NERDJump l 0<CR>
nmap <buffer> nm :NERDJump m 0<CR>
nmap <buffer> nn :NERDJump n 0<CR>
nmap <buffer> no :NERDJump o 0<CR>
nmap <buffer> np :NERDJump p 0<CR>
nmap <buffer> nq :NERDJump q 0<CR>
nmap <buffer> nr :NERDJump r 0<CR>
nmap <buffer> ns :NERDJump s 0<CR>
nmap <buffer> nt :NERDJump t 0<CR>
nmap <buffer> nu :NERDJump u 0<CR>
nmap <buffer> nv :NERDJump v 0<CR>
nmap <buffer> nw :NERDJump w 0<CR>
nmap <buffer> nx :NERDJump x 0<CR>
nmap <buffer> ny :NERDJump y 0<CR>
nmap <buffer> nz :NERDJump z 0<CR>

" Search backwards
nmap <buffer> Na :NERDJump a 1<CR>
nmap <buffer> Nb :NERDJump b 1<CR>
nmap <buffer> Nc :NERDJump c 1<CR>
nmap <buffer> Nd :NERDJump d 1<CR>
nmap <buffer> Ne :NERDJump e 1<CR>
nmap <buffer> Nf :NERDJump f 1<CR>
nmap <buffer> Ng :NERDJump g 1<CR>
nmap <buffer> Nh :NERDJump h 1<CR>
nmap <buffer> Ni :NERDJump i 1<CR>
nmap <buffer> Nj :NERDJump j 1<CR>
nmap <buffer> Nk :NERDJump k 1<CR>
nmap <buffer> Nl :NERDJump l 1<CR>
nmap <buffer> Nm :NERDJump m 1<CR>
nmap <buffer> Nn :NERDJump n 1<CR>
nmap <buffer> No :NERDJump o 1<CR>
nmap <buffer> Np :NERDJump p 1<CR>
nmap <buffer> Nq :NERDJump q 1<CR>
nmap <buffer> Nr :NERDJump r 1<CR>
nmap <buffer> Ns :NERDJump s 1<CR>
nmap <buffer> Nt :NERDJump t 1<CR>
nmap <buffer> Nu :NERDJump u 1<CR>
nmap <buffer> Nv :NERDJump v 1<CR>
nmap <buffer> Nw :NERDJump w 1<CR>
nmap <buffer> Nx :NERDJump x 1<CR>
nmap <buffer> Ny :NERDJump y 1<CR>
nmap <buffer> Nz :NERDJump z 1<CR> 
```

`mandarins.txt`现在我可以按跳到`nm`。

# php - PHP MySQLi 对象声明和检索

> ID：11010576
> 
> 赞同：1
> 
> 时间：2012-06-13T08:04:09.657
> 
> 标签：php, oop, mysqli, this

我有几个模型类处理数据库层，并且在如何以 OO 方式将数据库连接传递给查询时出现逻辑错误。Class1 是一个 db_connect，我在 class2 查询方法的构造函数中调用它：

```
class db {
    public $host = 'localhost';
    public $username = 'root';
    public $password = '';
    public $database = 'molecule';
    public $mysqli = '';

   function __construct() {
        $mysqli = new mysqli($this->host, $this->username, $this->password, $this->database);
            if (mysqli_connect_errno()) {
                printf("Database Connection failed: %s\n", mysqli_connect_error());
                exit();
            }
        return $mysqli;
    }   
}

class nodeModel {
    public $node;
    public $node_name;
    public $node_link;
    public $node_comment;
    public $mysqli;

    function __construct() {
        $mysqli = new db;
        return $mysqli;
    }

    public $insert;
    public $insert_id;
    function insertNode($node_name, $node_link, $node_comment) {
            $this->insert = $insert;
            $this->insert = $mysqli->prepare("INSERT INTO node(node_name, name_link, node_comment) VALUES (?, ?, ?)");
            $this->insert->bind_param("sss", $this->node_name, $this->node_link, $this->node_comment);
            if($this->insert->execute()) {
                $this->insert_id = $mysqli->insert_id;
            } 
            return $this->insert_id;
            print_r($this->insert_id);
            $this->insert->close();
        }} 
```

但是我收到 $insert 的未定义变量错误。

我用以下内容调用该层：

```
include 'node_model.php';
$dbTest = new nodeModel;
$node_name = 'My Node Title';
$node_link = 'My Node Link';
$node_comment = 'My Node Comment. This one should be longer so I will write more stuff';
$dbTest->insertNode($node_name, $node_link, $node_comment); 
```

我与查询类的构造函数连接的方式似乎正在工作，但不确定我需要在范围内将哪个变量附加到准备/绑定/执行语句？

而且我知道我应该使用 PDO 或其他 ORMy 类型的工具。我会的，但这更多的是关于一些基本的 OO 获取/设置/检索最佳实践......感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:51:21.887

您的代码存在一些主要问题...

**1.**将您的模型类属性设为私有，并创建 setter 和 getter 方法来设置或检索属性的值。你的方法 insertNode 也是错误的。

```
class nodeModel {
    private $node;
    private $nodeName;
    private $nodeLink;
    private $nodeComment;
    private $mysqli;

    function __construct() {
        $this->mysqli = new db;
    }

    public function getNodeName() {
        return $this->nodeName;
    }

    public function getNodeLink() {
        return $this->nodeLink;
    }

    public function getNodeComment() {
        return $this->nodeComment;
    }

    public function setNodeName($value) {
        $this->nodeName = $value;
    }

    public function setNodeLink($value) {
        $this->nodeLink = $value;
    }

    public function setNodeComment($value) {
        $this->nodeComment = $value;
    }

    function insertNode() {
        $this->insert = $this->mysqli->prepare("INSERT INTO node(node_name, node_link, node_comment) VALUES (?, ?, ?)");
        $this->insert->bind_param($this->node_name, $this->node_link, $this->node_comment);
        if($this->insert->execute()) {
            $this->insert_id = $this->mysqli->insert_id;
        }
        $this->insert->close();

        print_r($this->insert_id);

        return $this->insert_id;
    }}

} 
```

**2.**在课堂`db`上，当您创建连接时，将其存储到`$this->mysqli`中，而不仅仅是`$mysqli`.

```
function __construct() {
    $this->mysqli = new mysqli($this->host, $this->username, $this->password, $this->database);
        if (mysqli_connect_errno()) {
            printf("Database Connection failed: %s\n", mysqli_connect_error());
            exit();
        }
    return $this->mysqli;
} 
```

**3.**在您的第三个代码中，您只创建了一个传递给方法的变量，`insertNode`但在此方法中您对传递的变量不做任何事情 - 您希望设置类属性但**它们没有**......因此这样做：

```
include 'node_model.php';
$dbTest = new nodeModel;
$dbTest->setNodeName('My Node Title');
$dbTest->setNodeLink('My Node Link');
$dbTest->setNodeComment('My Node Comment. This one should be longer so I will write more stuff');
$dbTest->insertNode(); 
```

**希望这可以帮助...**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-13T08:40:35.217

> 但是我收到 $insert 的未定义变量错误。

那是因为你的函数的第一行是

```
$this->insert = $insert;
$this->insert = $mysqli->prepare("INSERT INTO node(node_name, name_link, node_comment) VALUES (?, ?, ?)"); 
```

$insert 不在您的参数列表中，因此第一行会导致错误。然后在您的第二行中，无论如何您都会覆盖该变量。

*在 return 语句之后*还有两行代码，它们当然永远不会执行。

也许是时候睡一觉了？:)

# php - getdate 在同一范围内调用另一种方式

> ID：11010589
> 
> 赞同：-1
> 
> 时间：2012-06-13T08:04:48.800
> 
> 标签：php

使用getdate函数将今天分配给今天。但是为什么今天的年份分配给年份。它的返回日期也知道吗？

```
 $today = getdate();
    $year=$today['year'];
    $mounth=$today['mon']; 
```

在这里我不清楚为什么今天是年度呼唤

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:13:05.703

对我来说很难抽象出你的问题。我会尽力去理解它。

变量 $today 由您分配。你可以对此有任何意义。但是 getdate() 函数返回的是当前时间的完整日期集。

检查 PHP 手册中给出的功能说明

> 返回一个关联数组，其中包含时间戳的日期信息，如果没有给出时间戳，则返回当前本地时间。

在此处查看完整的手册和用法。

[http://php.net/manual/en/function.getdate.php](http://php.net/manual/en/function.getdate.php)

它可能会帮助您很好地理解该功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T08:16:26.453

那是因为当您分配给`$today`函数时`getdate()`，`$today`将是一个值数组

所以 year 也被分配在那个数组中。

```
Array
(
    [seconds] => 1
    [minutes] => 15
    [hours] => 11
    [mday] => 13
    [wday] => 3
    [mon] => 6
    [year] => 2012
    [yday] => 164
    [weekday] => Wednesday
    [month] => June
    [0] => 1339575301
) 
```

# gwt - xtk_edge 准备好使用了吗？

> ID：11010590
> 
> 赞同：2
> 
> 时间：2012-06-13T08:04:54.773
> 
> 标签：gwt, xtk

`xtk_edge`版本可以使用了吗？我发现与以前的版本相比，api 发生了重大变化。对于像我这样的最终用户来说，“边缘”这个词意味着什么，他们必须确定这个版本是否可以融入我的项目中？

我应该继续使用旧版本吗？由于某种原因 api.gotoxtk.com 无法正常工作。所以我无法查找新的 api 签名。

你会考虑创建一个博客来发布这样的主要版本说明吗？

谢谢你，史莱克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T13:52:24.117

是的，最近有一些 API 更改在我们看来使 XTK 更易于使用。

为了避免破坏现有项目，我们决定暂时跳过这些版本。

目前有三个重要文件：

[http://get.goxtk.com/xtk.js](http://get.goxtk.com/xtk.js) - 最新的稳定 XTK 版本，目前链接到 xtk_release4.js

[http://get.goxtk.com/xtk_release4.js](http://get.goxtk.com/xtk_release4.js) - 使用旧 API 的 XTK 第 4 版

[http://get.goxtk.com/xtk_edge.js](http://get.goxtk.com/xtk_edge.js) - 当前使用新 API 的 XTK 大师

对于新的开发，应该使用**xtk_edge.js**来连接新的 API。此版本也很**稳定，可以立即使用**。

为了以后不破坏现有旧代码的安全，建议使用 xtk_release4.js 而不是 xtk.js，因为我们将来会将 xtk.js 链接切换到新的 API。

在 7 月 12 日或 8 月 12 日，我们将在执行新版本时将 xtk.js 切换到新 API。

**当前的 API 文档在这里：[http ://api.goxtk.com/renderer3D.html](http://api.goxtk.com/renderer3D.html)**

# python - 如何在python中一个一个地处理文件

> ID：11010591
> 
> 赞同：0
> 
> 时间：2012-06-13T08:05:00.797
> 
> 标签：python

我在一个文件夹里有很多很多文件，我想一个接一个地处理，我需要一个全局字典来记录用户标识符和流量，但是如果我的代码是这样的，当第二个或第三个文件是处理后，最后一个文件的 user_dict 将丢失。

因为如果第二个文件中的用户 id 与第一个文件中的用户 id 相同，那么如果应该分配相同的 flowcount 而不是一个新的，我怎样才能让一个字典在一个一个打开文件时保持增长？

```
 for line in fd.readlines():
    obj = json.loads(line)
    user = obj["host_dst"]["addr"] + '_' + str(obj["host_dst"]["port"])
    if user not in user_dict:
       user_dict[user] = []
    user_dict[user].append(obj["params"]["flowcount"]) 
```

由于每个文件都很大，我把它们都合并成一个文件，然后运行脚本处理，电脑过一会就会杀掉进程，我只好一个一个处理

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T08:20:57.207

您可以在 python 脚本中打开多个文件，并使用 for 循环来处理每个文件

```
for filename in os.listdir(folderpath):
    filepath = os.path.join(folderpath, filename)
    fd = open(filepath, 'r')

    # here is your code
    for line in fd.readlines():
        .... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T08:14:09.230

你可以随时声明

```
global user_dict 
```

在你的代码中......但这是最好的方法吗？也许你应该使用一个类：

```
class FileProcessor(object):
    def __init__(self):
        self.user_dict = dict()

    def process_file(file_name):
        ....
        self.user_dict[]... 
```

接着：

```
processor = FileProcessor()
for file in files:
    processor.process_file(file) 
```

# java - 会话 cookie 不会由客户端在带有 JRE 1.7 的 Windows 中使用 URLConnection 发回

> ID：11010592
> 
> 赞同：2
> 
> 时间：2012-06-13T08:05:01.197
> 
> 标签：java, windows, session-cookies, java-web-start, urlconnection

我们有一个使用 Java Web Start 部署的应用程序。它使用 URLConnection 与 servlet 通信，并通过 Cookies (JSESSIONID) 管理会话。它适用于 Java 1.5 和 1.6。在**Windows**中使用 Java 1.7它不再起作用：cookie JSESSIONID 不会发送回服务器（我使用 apache 轴的 HTTPMonitor 看到了这一点）。怎么了？

从 linux 机器使用 Java Web Start 启动相同的应用程序按预期工作。

版本是：JRE 1.7.0_04 和 Java Web Start 10.4.0.22_04

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-21T16:39:23.730

我们对我们的应用程序在从 Eclipse 启动时运行良好但在通过 Web Start 运行时无法与我们经过身份验证的 REST 端点通信的事实感到非常沮丧，因为 JSESSIONID 根据问题中描述的问题丢失。我们正在运行 Java 1.7。

经过多次远程调试，我们发现无论是有意还是无意（我只能找到很少的文档，例如这里的单行：http: [//docs.oracle.com/javase/tutorial/networking/cookies/cookiehandler.html](http://docs.oracle.com/javase/tutorial/networking/cookies/cookiehandler.html) )，Java Web Start 应用程序设置了一个默认的 CookieHandler，通常是 的一个实例`com.sun.deploy.net.cookie.DeployCookieSelector`，但不管它是什么，这都会弄乱 JSESSIONID cookie 处理。将默认 cookie 处理程序重置为 null `java.net.CookieHandler.setDefault(null)`，瞧，传出的 HTTP 请求保留了 JSESSIONID cookie！

顺便说一句，Windows 和 Linux 都表现出这种行为。

# c# - 如何首先在实体框架代码中创建相同的两个表之间的一对多和一对多关系？

> ID：11010594
> 
> 赞同：2
> 
> 时间：2012-06-13T08:05:02.057
> 
> 标签：c#, entity-framework-4.1, ef-code-first

我正在努力映射以下模型：

```
[Table("ColumnRules")]
public class ColumnRuleEntity
{
    [Required]
    public virtual ColumnEntity ParentColumn { get; set; }

    public virtual IList<ColumnEntity> DependentColumns { get; set; }
} 
```

我将以下代码添加到 On Model 创建覆盖：

```
modelBuilder.Entity<ColumnRuleEntity>().HasMany(r => r.DependentColumns)
.WithMany().Map(mc => mc.ToTable("ColumnRuleDependentColumns")
.MapLeftKey("ColumnRuleId").MapRightKey("ColumnId")); 
```

我正在尝试使用 ParentColumn 属性创建 OneToMany 关系，并使用 DependentColumns 属性创建 ManyToMany 关系。

我偶然发现的问题是，仅此代码就会为生成的链接表中的数据生成多个级联删除路径。（删除 Column 将删除 ColumnRules，这将删除链接表中的条目，但同时删除应该触发删除链接表中相同条目的 Column）。

我想到的一个解决方案是创建另一个实体，该实体将代表链接表中的一个条目，并仅在删除 ColumnRule 实体而不是在删除 Column 实体时级联删除它；但我认为这有点麻烦。有没有其他方法可以做到这一点？

# c# - 通过 IsAssignableFrom 使用标识的 RemoveAll 谓词

> ID：11010596
> 
> 赞同：0
> 
> 时间：2012-06-13T08:05:08.710
> 
> 标签：c#, generic-list, removeall, reflection

我实现了一个扩展方法`List<T>`。在那个扩展方法中，有一个谓词我无法表达我想要谓词做什么。我制定了一套测试来阐述我的意图。 `IsAssignableFrom`不知何故无法识别接口或子类 - 或者（更有可能）我用错了。该测试`ShouldRemove_All`不会删除任何内容。该测试`ShouldRemove_RA_AND_RAA`仅删除 RA。第三次测试通过。

这是代码 - 我需要如何调整扩展方法才能通过所有测试？

代码确实可以编译并且可以执行——它所需要的只是一个带有 NUnit 的项目。

```
using System;
using System.Collections.Generic;
using NUnit.Framework;
using System.Text;

namespace SystemTools
{

    public static class ListExtension
    {
        public static int RemoveAllOfType<T>(this List<T> list, Type removeable)
        {
            Predicate<T> match = (x) =>
            {
                return x.GetType().IsAssignableFrom(removeable);
            };
            return list.RemoveAll(match);
        }
    }

    [TestFixture]
    class ListExtension_Test
    {
        private interface IRoot { }
        private class Child_RA : IRoot { }
        private class Child_RB : IRoot { }
        private class Child_RAA : Child_RA { }

        List<IRoot> scenario;
        int sumofelements, RA, RB, RAA;

        private String DebugString(List<IRoot> list)
        {
            StringBuilder ret = new StringBuilder(list.Count * 10);
            ret.Append("Remaining: '");
            Boolean atleastone = false;
            foreach (var item in list)
            {
                if (atleastone) ret.Append(", ");
                ret.Append(item.GetType().Name);
                atleastone = true;
            }
            ret.Append("'");
            return ret.ToString();
        }

        [SetUp]
        public void SetUp()
        {
            RB = 1; RA = 2; RAA = 3;
            sumofelements = RB + RA + RAA;
            scenario = new List<IRoot>();
            for (int i = 1; i <= RB; i++) scenario.Add(new Child_RB());
            for (int i = 1; i <= RA; i++) scenario.Add(new Child_RA());
            for (int i = 1; i <= RAA; i++) scenario.Add(new Child_RAA());
        }

        [Test]
        public void ShouldRemove_All()
        {
            scenario.RemoveAllOfType(typeof(IRoot));
            int remaining = 0;
            Assert.AreEqual(remaining, scenario.Count, DebugString(scenario));
        }

        [Test]
        public void ShouldRemove_RB()
        {
            scenario.RemoveAllOfType(typeof(Child_RB));
            int remaining = sumofelements - RB;
            Assert.AreEqual(remaining, scenario.Count, DebugString(scenario));
        }

        [Test]
        public void ShouldRemove_RA_AND_RAA()
        {
            scenario.RemoveAllOfType(typeof(Child_RA));
            int remaining = sumofelements - (RA + RAA);
            Assert.AreEqual(remaining, scenario.Count, DebugString(scenario));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:49:03.480

```
return removeable.IsAssignableFrom(x.GetType()); 
```

# scala - 举重 | 未解决的依赖关系：org.lifty#lifty;1.7.4：未找到

> ID：11010597
> 
> 赞同：1
> 
> 时间：2012-06-13T08:05:14.043
> 
> 标签：scala, lifty

我正在尝试添加插件/build.sbt：

```
resolvers += Resolver.url("sbt-plugin-releases",
  new URL("http://scalasbt.artifactoryonline.com/scalasbt/sbt-plugin-releases/"))(Resolver.ivyStylePatterns)

addSbtPlugin("org.lifty" % "lifty" % "1.7.4") 
```

然后我得到：

```
Exception: unresolved dependency: org.lifty#lifty;1.7.4: not found 
```

任何想法如何解决它？

我正在按照[http://lifty.github.com/Installing+The+Plugin.html上所说的那样做](http://lifty.github.com/Installing+The+Plugin.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T13:30:58.877

Lifty 尚未（尚未）发布 sbt-0.11.3 二进制文件。（您可以通过访问[http://scalasbt.artifactoryonline.com/scalasbt/sbt-plugin-releases](http://scalasbt.artifactoryonline.com/scalasbt/sbt-plugin-releases)看到这一点）。

幸运的是，sbt-0.11.2 插件与 sbt-0.11.3 二进制兼容。不幸的是，从 0.11.3 使用 0.11.2 插件的语法[有点奇怪](https://groups.google.com/forum/#!msg/simple-build-tool/6QyKHMczG3I/JhGevpkyLS0J)：

```
libraryDependencies += 
  Defaults.sbtPluginExtra( 
    "org.lifty" % "lifty" % "1.7.4", 
    "0.11.2", 
    "2.9.1" 
  ) 
```

虽然另一种选择是使用 sbt-0.11.2，但[scala-tools.org 的关闭](https://web.archive.org/web/20160603075055/http://blog.goodstuff.im/the-transition-of-scala-tools-org)使这有点问题。您必须使用[0.11.3-2 启动器](https://groups.google.com/forum/#!msg/simple-build-tool/3sE6DxS9t6E/45uMF_WmzPUJ)，指定`sbt.version=0.11.2`in`project/build.properties`并将[Sonatype](https://oss.sonatype.org/content/groups/scala-tools/%20or%20https://oss.sonatype.org/content/repositories/snapshots)存储库添加为解析器。

# mysql - min(column) 没有返回其他列的正确数据

> ID：11010599
> 
> 赞同：2
> 
> 时间：2012-06-13T08:05:24.903
> 
> 标签：mysql, min

以下是我所拥有的

```
+++++++++++++++++++++++++++
id + myDate       + name
+++++++++++++++++++++++++++
'A'+ '2012-06-05' + 'baz'
'A'+ '2012-06-04' + 'bar'
'B'+ '2012-06-05' + 'foo'
'C'+ '2012-06-05' + 'bla'
'C'+ '2012-06-04' + 'blah'
'C'+ '2012-06-06' + 'bleh'
+++++++++++++++++++++++++++ 
```

我正在使用的查询是

```
SELECT id, min(myDate) as Date, name 
FROM myTable
GROUP BY id; 
```

我得到如下输出

```
+++++++++++++++++++++++++++
id + myDate       + name
+++++++++++++++++++++++++++
'A'+ '2012-06-04' + 'baz'
'B'+ '2012-06-05' + 'foo'
'C'+ '2012-06-04' + 'bla'
+++++++++++++++++++++++++++ 
```

* * *

我的问题是当查询给我正确的日期时，为什么列的数据`name`是*baz*而不是*bar*因为`name`日期`2012-06-04`是*bar*。

[演示](http://sqlfiddle.com/#!2/e6e98/1)来测试数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T08:26:41.790

你抢

1.  身份证，
2.  该 ID 的最低日期，以及
3.  *任何*与之相关的名称。

其他（正常）数据库甚至不允许此查询。**他们会强迫您对name**使用聚合函数，或者也将 name 添加到**name**`group by`中。MySQL 会选择一个随机值，这就是你的问题。

为了解决这个问题，您的查询将变得稍微复杂一些：

```
select
  t.id, 
  t.mydate,
  t.name
from
  myTable t
where
  t.mydate = 
    (select 
      min(td.mydate) 
    from 
      myTable td 
    where 
      td.id = t.id) 
```

或者：

```
select
  t.id, 
  t.mydate as date,
  t.name
from
  myTable t
  inner join 
    (select 
      td.id
      min(td.mydate) as date
    from 
      myTable td 
    group by 
      td.id) tx on tx.id = t.id and tx.date = t.mydate 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T08:23:15.403

正如 DevArt 所指出的，您必须使用不同的查询：

```
SELECT m.* from myTable m join
(select id, min(myDate) md from myTable group by id) mm
on m.id=mm.id and m.myDate=md 
```

您现有的查询没有在 name 列上指定约束，这就是您没有得到预期结果的原因。如果您没有像以前那样指定任何内容，则`Group by`仅使用类似的函数或随机创建一个可以从中获取值的集合。`min`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T08:29:57.037

对于您的具体问题，您只需将 MIN 函数应用于连接字段：

```
SELECT id, min(CONCAT(myDate,' ++ ',name)) as date_name 
FROM myTable
GROUP BY id; 
```

并在您的服务器端脚本中处理它

* * *

您正在使用 GROPU BY。这意味着结果中的每一行代表一**组**值。其中一个值是组名（分组依据的字段的值）。其余的是该组中的任意值。
例如下表：

```
F1   |   F2
1         aa
1         bb
1         cc
2         gg
2         hh 
```

如果您按 F1 分组：`SELECT F1,F2 from T GROUP BY F1` 您将得到两行：

```
1    and one value from (aa,bb,cc)
2    and one value from (gg,hh) 
```

如果你想要一个确定性的结果集，你需要告诉软件将什么算法应用于该组。比如几个：

1.  最小
2.  最大限度
3.  数数
4.  和

等等等等

在您的情况下，您没有将确定性算法应用于该`name`领域，因此您从集合中获得了“随机”结果。

# c# - 使用 Rx，当我的订阅方法运行时，如何忽略所有最新值

> ID：11010602
> 
> 赞同：35
> 
> 时间：2012-06-13T08:05:49.093
> 
> 标签：c#, system.reactive

使用[Reactive Extensions](http://msdn.microsoft.com/en-us/data/gg577609.aspx)，我想忽略来自我的事件流的消息，这些消息在我的`Subscribe`方法运行时发生。即有时我处理一条消息比消息之间的时间要长，所以我想删除我没有时间处理的消息。

但是，当我的`Subscribe`方法完成时，如果确实有任何消息通过，我想处理最后一个。所以我总是处理最新的消息。

所以，如果我有一些代码可以：

```
messages.OnNext(100);
messages.OnNext(1);
messages.OnNext(2); 
```

如果我们假设“100”需要很长时间来处理。然后我希望在“100”完成时处理“2”。'1' 应该被忽略，因为它在 '100' 仍在处理时被 '2' 取代。

这是我想要使用后台任务的结果示例`Latest()`

```
var messages = Observable.Interval(TimeSpan.FromMilliseconds(100));

Task.Factory.StartNew(() =>
{
    foreach(var n in messages.Latest())
    {
        Thread.Sleep(TimeSpan.FromMilliseconds(250));
        Console.WriteLine(n);
    }
}); 
```

但是，Latest() 是一个阻塞调用，我不希望有一个线程等待像这样的下一个值（消息之间有时会有很长的间隙）。

`BroadcastBlock`我还可以通过使用来自[TPL Dataflow](http://msdn.microsoft.com/en-us/devlabs/gg585582.aspx)的方法获得我想要的结果，如下所示：

```
var buffer = new BroadcastBlock<long>(n => n);
Observable.Interval(TimeSpan.FromMilliseconds(100)).Subscribe(n => buffer.Post(n));

buffer.AsObservable()
    .Subscribe(n =>
    {
        Thread.Sleep(TimeSpan.FromMilliseconds(250));
        Console.WriteLine(n);
    }); 
```

但这感觉应该可以直接在 Rx 中实现。最好的方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T05:53:24.930

这是一种类似于 Dave 的方法，但使用`Sample`了它（这比缓冲区更合适）。我在 Dave 的答案中添加了一种类似的扩展方法。

扩展：

```
public static IDisposable SubscribeWithoutOverlap<T>(this IObservable<T> source, Action<T> action)
{
    var sampler = new Subject<Unit>();

    var sub = source.
        Sample(sampler).
        ObserveOn(Scheduler.ThreadPool).
        Subscribe(l =>
        {
            action(l);
            sampler.OnNext(Unit.Default);
        });

    // start sampling when we have a first value
    source.Take(1).Subscribe(_ => sampler.OnNext(Unit.Default));

    return sub;
} 
```

请注意，它更简单，并且没有触发“空”缓冲区。发送到动作的第一个元素实际上来自流本身。

用法很简单：

```
messages.SubscribeWithoutOverlap(n =>
{
    Console.WriteLine("start: " + n);
    Thread.Sleep(500);
    Console.WriteLine("end: " + n);
});

messages.Subscribe(x => Console.WriteLine("source: " + x)); // for testing 
```

和结果：

```
source: 0
start: 0
source: 1
source: 2
source: 3
source: 4
source: 5
end: 0
start: 5
source: 6
source: 7
source: 8
source: 9
source: 10
end: 5
start: 10
source: 11
source: 12
source: 13
source: 14
source: 15
end: 10 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-19T18:47:28.123

我已经写了一篇关于此的博客文章，其中使用了一个使用 CAS 而不是锁并避免递归的解决方案。代码如下，但你可以在这里找到完整的解释：[http ://www.zerobugbuild.com/?p=192](http://www.zerobugbuild.com/?p=192)

```
public static IObservable<TSource> ObserveLatestOn<TSource>(
    this IObservable<TSource> source,
    IScheduler scheduler)
{
    return Observable.Create<TSource>(observer =>
    {
        Notification<TSource> pendingNotification = null;
        var cancelable = new MultipleAssignmentDisposable();

        var sourceSubscription = source.Materialize()
            .Subscribe(notification =>
            {
                var previousNotification = Interlocked.Exchange(
                    ref pendingNotification, notification);

                if (previousNotification != null) return;

                cancelable.Disposable = scheduler.Schedule(() =>
                    {
                        var notificationToSend = Interlocked.Exchange(
                            ref pendingNotification, null);
                        notificationToSend.Accept(observer);
                    });
            });
            return new CompositeDisposable(sourceSubscription, cancelable);
    });
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-08T10:12:11.647

使用 Observable.Switch 的示例。当您完成任务但队列中没有任何内容时，它也会处理这种情况。

```
using System.Reactive.Linq;
using System.Reactive.Subjects;
using System.Reactive.Concurrency;
using System.Reactive.Disposables;

namespace System.Reactive
{
    public static class RXX
    {
        public static IDisposable SubscribeWithoutOverlap<T>
        ( this IObservable<T> source
        , Action<T> action
        , IScheduler scheduler = null)
        {
            var sampler = new Subject<Unit>();
            scheduler = scheduler ?? Scheduler.Default;
            var p = source.Publish();
            var connection = p.Connect();

            var subscription = sampler.Select(x=>p.Take(1))
                .Switch()
                .ObserveOn(scheduler)
                .Subscribe(l =>
                {
                    action(l);
                    sampler.OnNext(Unit.Default);
                });

            sampler.OnNext(Unit.Default);

            return new CompositeDisposable(connection, subscription);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-18T09:24:39.703

感谢 Lee Campbell（[Intro To Rx](http://www.introtorx.com/)成名），我现在有了一个使用这种扩展方法的可行解决方案：

```
public static IObservable<T> ObserveLatestOn<T>(this IObservable<T> source, IScheduler scheduler)
{
    return Observable.Create<T>(observer =>
    {
        Notification<T> outsideNotification = null;
        var gate = new object();
        bool active = false;
        var cancelable = new MultipleAssignmentDisposable();
        var disposable = source.Materialize().Subscribe(thisNotification =>
        {
            bool alreadyActive;
            lock (gate)
            {
                alreadyActive = active;
                active = true;
                outsideNotification = thisNotification;
            }

            if (!alreadyActive)
            {
                cancelable.Disposable = scheduler.Schedule(self =>
                {
                    Notification<T> localNotification = null;
                    lock (gate)
                    {
                        localNotification = outsideNotification;
                        outsideNotification = null;
                    }
                    localNotification.Accept(observer);
                    bool hasPendingNotification = false;
                    lock (gate)
                    {
                        hasPendingNotification = active = (outsideNotification != null);
                    }
                    if (hasPendingNotification)
                    {
                        self();
                    }
                });
            }
        });
        return new CompositeDisposable(disposable, cancelable);
    });
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-13T23:00:48.530

这是使用“just” Rx 的尝试。定时器和订阅者通过观察线程池保持独立，我使用了一个主题来提供完成任务的反馈。

我认为这不是一个简单的解决方案，但我希望它可以为您提供改进的想法。

```
messages.
    Buffer(() => feedback).
    Select(l => l.LastOrDefault()).
    ObserveOn(Scheduler.ThreadPool).
    Subscribe(n =>
    {
        Thread.Sleep(TimeSpan.FromMilliseconds(250));
        Console.WriteLine(n);
        feedback.OnNext(Unit.Default);
    });

feedback.OnNext(Unit.Default); 
```

有一个小问题——缓冲区在空时首先关闭，因此它会生成默认值。您可能可以通过在第一条消息后进行反馈来解决它。

* * *

这是一个扩展功能：

```
public static IDisposable SubscribeWithoutOverlap<T>(this IObservable<T> source, Action<T> action)
{
    var feedback = new Subject<Unit>();

    var sub = source.
        Buffer(() => feedback).
        ObserveOn(Scheduler.ThreadPool).
        Subscribe(l =>
        {
            action(l.LastOrDefault());
            feedback.OnNext(Unit.Default);
        });

    feedback.OnNext(Unit.Default);

    return sub;
} 
```

和用法：

```
 messages.SubscribeWithoutOverlap(n =>
    {
        Thread.Sleep(1000);
        Console.WriteLine(n);
    }); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-14T20:24:45.137

这是一个`Task`基于取消语义的实现，它不使用主题。如果需要，调用 dispose 允许订阅的操作取消处理。

```
 public static IDisposable SampleSubscribe<T>(this IObservable<T> observable, Action<T, CancellationToken> action)
    {
        var cancellation = new CancellationDisposable();
        var token = cancellation.Token;
        Task task = null;

        return new CompositeDisposable(
            cancellation,
            observable.Subscribe(value =>
            {
                if (task == null || task.IsCompleted)
                    task = Task.Factory.StartNew(() => action(value, token), token);
            })
        );
    } 
```

这是一个简单的测试：

```
Observable.Interval(TimeSpan.FromMilliseconds(150))
                      .SampleSubscribe((v, ct) =>
                      {   
                          //cbeck for cancellation, do work
                          for (int i = 0; i < 10 && !ct.IsCancellationRequested; i++)
                              Thread.Sleep(100);

                          Console.WriteLine(v);
                      }); 
```

输出：

```
0
7
14
21
28
35 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-09T15:50:56.053

使用 Rx 2.0 RC，您可以`Chunkify`用来获取列表的 IEnumerable，每个列表都包含自上次 MoveNext 以来观察到的内容。

然后，您可以使用`ToObservable`将其转换回 IObservable 并且只注意每个非空列表中的最后一个条目。

```
var messages = Observable.Interval(TimeSpan.FromMilliseconds(100));

messages.Chunkify()
        .ToObservable(Scheduler.TaskPool)
        .Where(list => list.Any())
        .Select(list => list.Last())
        .Subscribe(n =>
        {
          Thread.Sleep(TimeSpan.FromMilliseconds(250));
          Console.WriteLine(n);
        }); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-10-15T12:03:36.117

刚刚完成（并且已经完全修改）我自己的问题解决方案，我计划在生产中使用它。

除非调度程序使用当前线程，否则从源调用`OnNext`, `OnCompleted`,`OnError`应该立即返回；如果观察者正忙于处理先前的通知，他们将进入一个具有可指定最大大小的队列，只要处理了先前的通知，就会从那里收到通知。如果队列已满，则丢弃最近的项目。因此，最大队列大小为 0 会忽略观察者忙碌时进入的所有项目；大小为 1 将始终让观察最新项目；一个大小，以`int.MaxValue`保持消费者忙碌，直到赶上生产者。

如果调度器支持长时间运行（即给你一个你自己的线程），我会安排一个循环来通知观察者；否则我使用递归调度。

这是代码。任何意见表示赞赏。

```
partial class MoreObservables
{
    /// <summary>
    /// Avoids backpressure by enqueuing items when the <paramref name="source"/> produces them more rapidly than the observer can process.
    /// </summary>
    /// <param name="source">The source sequence.</param>
    /// <param name="maxQueueSize">Maximum queue size. If the queue gets full, less recent items are discarded from the queue.</param>
    /// <param name="scheduler">Optional, default: <see cref="Scheduler.Default"/>: <see cref="IScheduler"/> on which to observe notifications.</param>
    /// <exception cref="ArgumentNullException"><paramref name="source"/> is null.</exception>
    /// <exception cref="ArgumentOutOfRangeException"><paramref name="maxQueueSize"/> is negative.</exception>
    /// <remarks>
    /// A <paramref name="maxQueueSize"/> of 0 observes items only if the subscriber is ready.
    /// A <paramref name="maxQueueSize"/> of 1 guarantees to observe the last item in the sequence, if any.
    /// To observe the whole source sequence, specify <see cref="int.MaxValue"/>.
    /// </remarks>
    public static IObservable<TSource> Latest<TSource>(this IObservable<TSource> source, int maxQueueSize, IScheduler scheduler = null)
    {
        if (source == null) throw new ArgumentNullException(nameof(source));
        if (maxQueueSize < 0) throw new ArgumentOutOfRangeException(nameof(maxQueueSize));
        if (scheduler == null) scheduler = Scheduler.Default;

        return Observable.Create<TSource>(observer => LatestImpl<TSource>.Subscribe(source, maxQueueSize, scheduler, observer));
    }

    private static class LatestImpl<TSource>
    {
        public static IDisposable Subscribe(IObservable<TSource> source, int maxQueueSize, IScheduler scheduler, IObserver<TSource> observer)
        {
            if (observer == null) throw new ArgumentNullException(nameof(observer));

            var longrunningScheduler = scheduler.AsLongRunning();
            if (longrunningScheduler != null)
                return new LoopSubscription(source, maxQueueSize, longrunningScheduler, observer);

            return new RecursiveSubscription(source, maxQueueSize, scheduler, observer);
        }

        #region Subscriptions

        /// <summary>
        /// Represents a subscription to <see cref="Latest{TSource}(IObservable{TSource}, int, IScheduler)"/> which notifies in a loop.
        /// </summary>
        private sealed class LoopSubscription : IDisposable
        {
            private enum State
            {
                Idle, // nothing to notify
                Head, // next notification is in _head
                Queue, // next notifications are in _queue, followed by _completion
                Disposed, // disposed
            }

            private readonly SingleAssignmentDisposable _subscription = new SingleAssignmentDisposable();
            private readonly IObserver<TSource> _observer;
            private State _state;
            private TSource _head; // item in front of the queue
            private IQueue _queue; // queued items
            private Notification<TSource> _completion; // completion notification

            public LoopSubscription(IObservable<TSource> source, int maxQueueSize, ISchedulerLongRunning scheduler, IObserver<TSource> observer)
            {
                _observer = observer;
                _queue = Queue.Create(maxQueueSize);
                scheduler.ScheduleLongRunning(_ => Loop());
                _subscription.Disposable = source.Subscribe(
                    OnNext,
                    error => OnCompletion(Notification.CreateOnError<TSource>(error)),
                    () => OnCompletion(Notification.CreateOnCompleted<TSource>()));
            }

            private void OnNext(TSource value)
            {
                lock (_subscription)
                {
                    switch (_state)
                    {
                        case State.Idle:
                            _head = value;
                            _state = State.Head;
                            Monitor.Pulse(_subscription);
                            break;
                        case State.Head:
                        case State.Queue:
                            if (_completion != null) return;
                            try { _queue.Enqueue(value); }
                            catch (Exception error) // probably OutOfMemoryException
                            {
                                _completion = Notification.CreateOnError<TSource>(error);
                                _subscription.Dispose();
                            }
                            break;
                    }
                }
            }

            private void OnCompletion(Notification<TSource> completion)
            {
                lock (_subscription)
                {
                    switch (_state)
                    {
                        case State.Idle:
                            _completion = completion;
                            _state = State.Queue;
                            Monitor.Pulse(_subscription);
                            _subscription.Dispose();
                            break;
                        case State.Head:
                        case State.Queue:
                            if (_completion != null) return;
                            _completion = completion;
                            _subscription.Dispose();
                            break;
                    }
                }
            }

            public void Dispose()
            {
                lock (_subscription)
                {
                    if (_state == State.Disposed) return;

                    _head = default(TSource);
                    _queue = null;
                    _completion = null;
                    _state = State.Disposed;
                    Monitor.Pulse(_subscription);
                    _subscription.Dispose();
                }
            }

            private void Loop()
            {
                try
                {
                    while (true) // overall loop for all notifications
                    {
                        // next notification to emit
                        Notification<TSource> completion;
                        TSource next; // iff completion == null

                        lock (_subscription)
                        {
                            while (true)
                            {
                                while (_state == State.Idle)
                                    Monitor.Wait(_subscription);

                                if (_state == State.Head)
                                {
                                    completion = null;
                                    next = _head;
                                    _head = default(TSource);
                                    _state = State.Queue;
                                    break;
                                }
                                if (_state == State.Queue)
                                {
                                    if (!_queue.IsEmpty)
                                    {
                                        completion = null;
                                        next = _queue.Dequeue(); // assumption: this never throws
                                        break;
                                    }
                                    if (_completion != null)
                                    {
                                        completion = _completion;
                                        next = default(TSource);
                                        break;
                                    }
                                    _state = State.Idle;
                                    continue;
                                }
                                Debug.Assert(_state == State.Disposed);
                                return;
                            }
                        }

                        if (completion != null)
                        {
                            completion.Accept(_observer);
                            return;
                        }
                        _observer.OnNext(next);
                    }
                }
                finally { Dispose(); }
            }
        }

        /// <summary>
        /// Represents a subscription to <see cref="Latest{TSource}(IObservable{TSource}, int, IScheduler)"/> which notifies recursively.
        /// </summary>
        private sealed class RecursiveSubscription : IDisposable
        {
            private enum State
            {
                Idle, // nothing to notify
                Scheduled, // emitter scheduled or executing
                Disposed, // disposed
            }

            private readonly SingleAssignmentDisposable _subscription = new SingleAssignmentDisposable();
            private readonly MultipleAssignmentDisposable _emitter = new MultipleAssignmentDisposable(); // scheduled emit action
            private readonly IScheduler _scheduler;
            private readonly IObserver<TSource> _observer;
            private State _state;
            private IQueue _queue; // queued items
            private Notification<TSource> _completion; // completion notification

            public RecursiveSubscription(IObservable<TSource> source, int maxQueueSize, IScheduler scheduler, IObserver<TSource> observer)
            {
                _scheduler = scheduler;
                _observer = observer;
                _queue = Queue.Create(maxQueueSize);
                _subscription.Disposable = source.Subscribe(
                    OnNext,
                    error => OnCompletion(Notification.CreateOnError<TSource>(error)),
                    () => OnCompletion(Notification.CreateOnCompleted<TSource>()));
            }

            private void OnNext(TSource value)
            {
                lock (_subscription)
                {
                    switch (_state)
                    {
                        case State.Idle:
                            _emitter.Disposable = _scheduler.Schedule(value, EmitNext);
                            _state = State.Scheduled;
                            break;
                        case State.Scheduled:
                            if (_completion != null) return;
                            try { _queue.Enqueue(value); }
                            catch (Exception error) // probably OutOfMemoryException
                            {
                                _completion = Notification.CreateOnError<TSource>(error);
                                _subscription.Dispose();
                            }
                            break;
                    }
                }
            }

            private void OnCompletion(Notification<TSource> completion)
            {
                lock (_subscription)
                {
                    switch (_state)
                    {
                        case State.Idle:
                            _completion = completion;
                            _emitter.Disposable = _scheduler.Schedule(() => EmitCompletion(completion));
                            _state = State.Scheduled;
                            _subscription.Dispose();
                            break;
                        case State.Scheduled:
                            if (_completion != null) return;
                            _completion = completion;
                            _subscription.Dispose();
                            break;
                    }
                }
            }

            public void Dispose()
            {
                lock (_subscription)
                {
                    if (_state == State.Disposed) return;

                    _emitter.Dispose();
                    _queue = null;
                    _completion = null;
                    _state = State.Disposed;
                    _subscription.Dispose();
                }
            }

            private void EmitNext(TSource value, Action<TSource> self)
            {
                try { _observer.OnNext(value); }
                catch { Dispose(); return; }

                lock (_subscription)
                {
                    if (_state == State.Disposed) return;
                    Debug.Assert(_state == State.Scheduled);
                    if (!_queue.IsEmpty)
                        self(_queue.Dequeue());
                    else if (_completion != null)
                        _emitter.Disposable = _scheduler.Schedule(() => EmitCompletion(_completion));
                    else
                        _state = State.Idle;
                }
            }

            private void EmitCompletion(Notification<TSource> completion)
            {
                try { completion.Accept(_observer); }
                finally { Dispose(); }
            }
        }

        #endregion

        #region IQueue

        /// <summary>
        /// FIFO queue that discards least recent items if size limit is reached.
        /// </summary>
        private interface IQueue
        {
            bool IsEmpty { get; }
            void Enqueue(TSource item);
            TSource Dequeue();
        }

        /// <summary>
        /// <see cref="IQueue"/> implementations.
        /// </summary>
        private static class Queue
        {
            public static IQueue Create(int maxSize)
            {
                switch (maxSize)
                {
                    case 0: return Zero.Instance;
                    case 1: return new One();
                    default: return new Many(maxSize);
                }
            }

            private sealed class Zero : IQueue
            {
                // ReSharper disable once StaticMemberInGenericType
                public static Zero Instance { get; } = new Zero();
                private Zero() { }

                public bool IsEmpty => true;
                public void Enqueue(TSource item) { }
                public TSource Dequeue() { throw new InvalidOperationException(); }
            }

            private sealed class One : IQueue
            {
                private TSource _item;

                public bool IsEmpty { get; private set; } = true;

                public void Enqueue(TSource item)
                {
                    _item = item;
                    IsEmpty = false;
                }

                public TSource Dequeue()
                {
                    if (IsEmpty) throw new InvalidOperationException();

                    var item = _item;
                    _item = default(TSource);
                    IsEmpty = true;
                    return item;
                }
            }

            private sealed class Many : IQueue
            {
                private readonly int _maxSize, _initialSize;
                private int _deq, _enq; // indices of deque and enqueu positions
                private TSource[] _buffer;

                public Many(int maxSize)
                {
                    if (maxSize < 2) throw new ArgumentOutOfRangeException(nameof(maxSize));

                    _maxSize = maxSize;
                    if (maxSize == int.MaxValue)
                        _initialSize = 4;
                    else
                    {
                        // choose an initial size that won't get us too close to maxSize when doubling
                        _initialSize = maxSize;
                        while (_initialSize >= 7)
                            _initialSize = (_initialSize + 1) / 2;
                    }
                }

                public bool IsEmpty { get; private set; } = true;

                public void Enqueue(TSource item)
                {
                    if (IsEmpty)
                    {
                        if (_buffer == null) _buffer = new TSource[_initialSize];
                        _buffer[0] = item;
                        _deq = 0;
                        _enq = 1;
                        IsEmpty = false;
                        return;
                    }
                    if (_deq == _enq) // full
                    {
                        if (_buffer.Length == _maxSize) // overwrite least recent
                        {
                            _buffer[_enq] = item;
                            if (++_enq == _buffer.Length) _enq = 0;
                            _deq = _enq;
                            return;
                        }

                        // increse buffer size
                        var newSize = _buffer.Length >= _maxSize / 2 ? _maxSize : 2 * _buffer.Length;
                        var newBuffer = new TSource[newSize];
                        var count = _buffer.Length - _deq;
                        Array.Copy(_buffer, _deq, newBuffer, 0, count);
                        Array.Copy(_buffer, 0, newBuffer, count, _deq);
                        _deq = 0;
                        _enq = _buffer.Length;
                        _buffer = newBuffer;
                    }
                    _buffer[_enq] = item;
                    if (++_enq == _buffer.Length) _enq = 0;
                }

                public TSource Dequeue()
                {
                    if (IsEmpty) throw new InvalidOperationException();

                    var result = ReadAndClear(ref _buffer[_deq]);
                    if (++_deq == _buffer.Length) _deq = 0;
                    if (_deq == _enq)
                    {
                        IsEmpty = true;
                        if (_buffer.Length > _initialSize) _buffer = null;
                    }
                    return result;
                }

                private static TSource ReadAndClear(ref TSource item)
                {
                    var result = item;
                    item = default(TSource);
                    return result;
                }
            }
        }

        #endregion
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-09-13T06:34:01.487

又一个解决方案。

这并不漂亮，因为它混合了`Task`和`Observable`，所以它不是真正可测试的`ReactiveTest`（虽然老实说，我不确定如何实现一个“慢”订阅者`ReactiveTest`）。

```
public static IObservable<T> ShedLoad<T>(this IObservable<T> source)
{
    return Observable.Create<T>(observer =>
    {
        Task task = Task.FromResult(0);
        return source.Subscribe(t =>
        {
            if(task.IsCompleted)
                task = Task.Run(() => observer.OnNext(t));
            else
                Debug.WriteLine("Skip, task not finished");
        }, observer.OnError, observer.OnCompleted);
    });
} 
```

我猜那里可能存在比赛条件，但在我看来，如果我们正处于因为速度太快而放弃某些东西的阶段，我不介意放弃太多或太少。哦，每个`OnNext`都（可能）在不同的线程上被调用（我想我可以`Synchronize`在 的背面放一个`Create`）。

我承认我无法让[Materialize](https://stackoverflow.com/a/16638233)扩展正常工作（我将它连接到 a`FromEventPattern(MouseMove)`然后故意缓慢订阅订阅，奇怪的是它会让突发事件通过，而不是一次一个）

# wordpress - add_menu_page 中的重复标签

> ID：11010605
> 
> 赞同：2
> 
> 时间：2012-06-13T08:05:54.077
> 
> 标签：wordpress, duplicates, customization, admin

我为主题定制创建了一个功能。

```
function create_theme_option() {

        add_menu_page(  'Manage Options', //Page Title 

                        'Theme Option', //WP Administrator Menu Title

                        'manage_options', //

                        'theme-options', //Link to a page to your Administration Area

                        'deploy_theme_options', //Function Name

                        get_template_directory_uri() . '/Plugins/Background Changer/images/icons/icon.png',//Menu Icon 

                        99);

        add_submenu_page("theme-options", "Theme Settings", "Theme Settings", 1, "theme-settings", "theme_settings");

        add_submenu_page("theme-options", "Manage Header", "Manage Header", 1, "manage-header", "manage_header");

        add_submenu_page("theme-options", "Social Media", "Social Media Links", 1, "social-media", "social_media");

        add_submenu_page("theme-options", "Catalog Manager", "Catalog Manager", 1, "catalog-manager", "catalog_manager");

    } 
```

但我注意到在标签“主题选项”之后，旁边出现了另一个文本作为“主题选项”。检查下面的图片：

![http://leojarina.info/stock-data/images/screenshot.jpg](../Images/e9cc1561b0279a96f4d58c1024ac86b3.png)

我怎样才能解决这个问题？请帮忙！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T07:29:32.053

@Basharat 非常接近。这是我在插件中使用的一种更简洁的方式：

```
add_menu_page(
    '',                     // No need to have this
    'My Plugin',            // Menu Label
    'manage_options',
    'my_plugin_settings',   // (*) Shared slug
    'your_function',
    plugins_url('myplugin/images/icon.png'),
    81
);

add_submenu_page(
    'my_plugin_settings',   // (*) Shared slug
    'My Plugin Settings',   // Subpage Title
    'Settings',             // Submenu Label
    'manage_options',
    'my_plugin_settings',   // (*) Shared slug
    'your_function'
); 
```

**资料来源：**咖啡，反复试验；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T09:50:15.117

要解决此问题，您可以使用 remove_submenu_page， [http:](http://codex.wordpress.org/Function_Reference/remove_submenu_page) //codex.wordpress.org/Function_Reference/remove_submenu_page 。

例子：

remove_submenu_page ('my-menu-slug','my-menu-slug')

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T09:27:39.020

请使用下方删除子菜单中菜单的重复条目。

```
 ```
<?php 
/* Add top level menu */
add_menu_page(
    'MyTheme', 
    'MyTheme Menu Label',
    'edit_themes', 
    'theme_admin',        // menu slug
    'functions.php',        // function
    get_bloginfo('template_directory') .'/img/favicon.png',
    31
);

/* remove duplicate menu hack */
add_submenu_page(
    'theme_admin',        // parent slug, same as above menu slug
    '',        // empty page title
    '',        // empty menu title
    'edit_themes',        // same capability as above
    'theme_admin',        // same menu slug as parent slug
    'functions.php',        // same function as above
}
?> 
``` 
这不是太干净，但是隐藏重复子菜单的唯一方法。**参考：**
[https ://wordpress.stackexchange.com/questions/52675/how-to-remove-duplicate-link-from-add-menu-page](https://wordpress.stackexchange.com/questions/52675/how-to-remove-duplicate-link-from-add-menu-page)

            回答 #4

赞同：0

时间：2012-06-13T08:12:12.373

我认为你应该检查不应该是 99 的能力参数

[http://codex.wordpress.org/Function_Reference/add_menu_page](http://codex.wordpress.org/Function_Reference/add_menu_page)

            回答 #5

赞同：0

时间：2015-04-19T15:19:37.263

我发现的唯一工作方法是将`add_menu_page`$capabilties 设置为未知，因此类似于`'unknown'`，这将隐藏页面或子菜单，但菜单仍将显示在左侧。

```

# ios - 在应用程序和网站上销售内容

> ID：11010610
> 
> 赞同：2
> 
> 时间：2012-06-13T08:05:58.187
> 
> 标签：ios, app-store, in-app-purchase

我们有一个在应用内销售内容（电子书）的应用和应用内购买。该应用程序适用于 API 和网站。书籍也可以通过网站购买。目前，我们没有在应用程序和网站之间同步购买/书籍。

在下一次更新中，我们希望创建一个用户表单，其中包含网站的登录名和密码，并在网站和应用程序之间同步购买的内容。因此，通过网站进行的所有购买都将在应用程序中可用，反之亦然，如果在应用程序内购买书籍，它们在网站上可用。为此，我们将更改网站和应用程序中的价格以使其相同。

问题是 - 这个方案是否与 Apple 规则相矛盾，他们是否允许在 AppStore 中进行此类更新？应用程序不会在短时间内被屏蔽吗？

提前感谢您的答案和想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T10:43:47.547

我们也在应用商店销售电子书，我们的应用销售应用内商品，我们也有一个网站我们在苹果文档中进行了很多研究，我们发现这样做没有矛盾。所以我们的推理是这样的

我们将有两种类型的用户：

*   没有网站帐户的用户
*   拥有网站帐户的用户

对于没有网站账户的用户，他们将像以前一样继续正常购买书籍，他们通常会使用应用内购买书籍，只有作为应用内添加到网站的书籍才会在此处可用（我们达到应用内限制为 10K 应用内商品，所以现在我们有超过 20K 的商品未注册为应用内。这些商品不会显示在应用程序的商店页面中）

对于拥有网站帐户的用户，他们可以使用应用内购买书籍，也可以从网络浏览器（在我们的应用程序之外）购买书籍，他们将使用他们的普通签证卡并继续购买

当拥有帐户的用户登录我们的应用程序时，他的所有付费书籍（从我们网站购买的书籍）都将在他的应用程序中免费提供。这不会违反苹果的规则，因为这些项目是免费的。

当用户使用应用内购买书籍时，如果他已注册，我们会将这本书同步到他的网站帐户，他将能够从我们的网站阅读这本书。用户一登录，我们就会将他图书馆中的所有项目发送到网站进行同步。如果用户注销，我们会隐藏他使用他的帐户从网站购买的所有物品。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T08:50:00.533

那么我从你的问题中了解到的是。

您需要跨所有域（例如 iOS、Web 等）同步您的用户数据。

这是你需要做的。

*   更改适合您需求的 iOS 应用程序的结构。在您的情况下，使用来自相同来源和用户登录的同步数据。
*   更新您当前的应用程序并将其提交给 Apple 进行审核。
*   等待它被审核并重新发布为您当前应用程序的新版本。

据我所知，您想要实现的目标并不矛盾。由于您使用自己的系统销售自己的产品，因此您想做这样的事情是很正常的。

# objective-c - 是否可以在 iPhone 拨出电话之前获取事件？

> ID：11010622
> 
> 赞同：1
> 
> 时间：2012-06-13T08:06:42.810
> 
> 标签：objective-c, iphone, events, phone-call

是否可以像在 Android 中一样在 iPhone 中拨出电话之前获取事件？我想要做的是在用户完成拨号后和拨出电话之前获取一个事件，以便在某些情况下弹出消息或呼叫用户执行某些操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:33:06.977

从 iOS 4 到 iOS 9，您可以为此目的使用[蜂窝呼叫状态](https://developer.apple.com/documentation/coretelephony/ctcall/cellular_call_states)

CTCallStateDialing

用户发起呼叫时，连接建立之前的呼叫状态。

CTCallStateIncoming

建立连接之前的通话状态，即有来电但用户尚未接听。

CTCallStateConnected

当所有相关方的呼叫完全建立时的呼叫状态。

CTCallStateDisconnected

呼叫终止时的呼叫状态。请参考此链接： [我们可以在 iphone 中有来电和去电时触发事件吗？](https://stackoverflow.com/questions/6798426/can-we-fire-an-event-when-ever-there-is-incoming-and-outgoing-call-in-iphone)

* * *

从 iOS 10 开始，您应该使用[CXCall](https://developer.apple.com/documentation/callkit/cxcall)。

# apache-flex - 找到弹性图形对象的边界？

> ID：11010624
> 
> 赞同：0
> 
> 时间：2012-06-13T08:06:52.510
> 
> 标签：apache-flex, actionscript, drawing, graphic, boundary

我有一组使用 flex 图形对象创建的形状。我需要画线连接它们，为此我需要找到这些形状的边界。我只想要内容区域，而不是透明部分。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:17:41.160

尝试将颜色设置为透明 (0x00000000) 并将 findColor 设置为 false 的[BitmapData.getColorBoundRect() 。](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#getColorBoundsRect%28%29)

# xamarin.ios - Monotouch / Monodroid 到桌面应用程序

> ID：11010625
> 
> 赞同：0
> 
> 时间：2012-06-13T08:06:54.020
> 
> 标签：xamarin.ios, desktop-application, xamarin.android

我目前正在使用 Monotouch（和 Monodroid）开发移动应用程序，我试图找到一种方法将我的应用程序导出为 MAC OSX destop 应用程序/软件和 Windows 应用程序/软件。

有谁知道怎么做？我可以构建一个兼容的 windows .exe 应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:20:00.380

您不能直接将 MonoTouch 和 Mono 用于桌面应用程序的 Android 项目。如果您将逻辑代码与用户界面一分开，您可以创建桌面项目（适用于 Windows、Mac 和 Linux）并使用该逻辑代码。MonoTouch 和 Mono for Android 使用 .Net 框架 (Mono) 程序集的子集（[http://docs.xamarin.com/ios/about/assemblies](http://docs.xamarin.com/ios/about/assemblies "MonoTouch 组件")和[http://docs.xamarin.com/android/about/assemblies](http://docs.xamarin.com/android/about/assemblies "适用于 Android 程序集的 Mono")） ，因此使用这些程序集编写的代码可用于使用 Mono for Mac、Mono for Linux、Mono for Windows 和 .Net 框架本身创建应用程序。

# java - 我什么时候应该覆盖 Equals 函数？

> ID：11010626
> 
> 赞同：21
> 
> 时间：2012-06-13T08:06:54.467
> 
> 标签：java

> **可能重复：**
> [Java：总是覆盖等于？](https://stackoverflow.com/questions/1549553/java-always-override-equals)

`equals`我应该为我创建的任何类覆盖函数吗？

即使对于只包含一些非常简单的属性的非常简单的类， 我需要它的每个属性都相等吗**？**

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-13T08:08:29.970

> ***我应该为我创建的任何类覆盖 equals 函数吗？***

当（且仅当）对象“表示某些数据”时覆盖`equals`，即如果它对诸如`Person`、`Car`或`RecipieIngredient`（这些通常以集合等结尾）之类的东西建模。不要为其他类型的类覆盖 equals，例如`LoginServlet`or `DatabaseUtil`。

`hashCode`请记住在您覆盖时始终覆盖`equals`。

> （一个自然的后续问题：）***如果我不覆盖 equals 和 hashCode 会发生什么？***

任何两个对象都将被视为*不相等*，除非它们是完全相同的对象。

> ***[...] 我需要它的每一个属性都相等吗？***

通常**是**的。这取决于*您*如何定义平等概念。请注意，对于引用类型，您可以在实现自己的时重用/委托给(和)*的*对象实现。`equals``hashCode`

**相关问题：**

*   [为什么我们需要在 java 中覆盖 equals 和 hashcode 以及为什么我们不能使用 Object 类实现](https://stackoverflow.com/questions/3028699/why-we-need-to-override-equals-and-hashcode-in-java-and-why-cannot-we-use-object)
*   [为什么我需要覆盖 Java 中的 equals 和 hashCode 方法？](https://stackoverflow.com/questions/2265503/why-do-i-need-to-override-the-equals-and-hashcode-method-in-java)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-13T08:14:49.907

`equals()`只有当你有理由这样做时，你才应该覆盖。[如此处](http://www.artima.com/lejava/articles/equality.html)所述，`equals()`为非最终类或可变类编写适当的方法非常困难。

如果您的应用程序需要某种不同于“相同对象”的相等概念，那么请务必继续。只需阅读上述参考资料即可了解所涉及的内容。但作为例行公事？当然不。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T09:29:07.033

好吧，如果您在现实生活中考虑它，则更容易理解覆盖 equals() 的概念。

仅当两个对象需要在逻辑上相等时才应覆盖 Equals 方法。此外，如果您担心在程序中的某个地方可能会重新创建对象，那么您必须覆盖 equals()。

**一个很好的例子是java中的String对象。**

```
 String string1= new String("hello");

   String string2= "hello"; 
```

他们是平等的吗？……是的，他们绝对是……但从逻辑上讲。您只能检查它们的相等性，因为 Java 已经覆盖了 String equals() 方法。

众所周知，类实际上是其对象的模板。所以让我们考虑一下，有一个员工类，它实际上决定了公司中的员工可以拥有哪些属性，而公司中的实际员工是这个类的对象。因此，通常，员工的属性可能如下。

1.员工姓名

2.员工证

3.出生日期。. . ... . . . . .

因此，在这种情况下，您应该只在 equals 方法中检查员工 ID 是否相等。但是，是的，如果您的对象缺少这种不同的属性，那么您应该继续检查几乎所有的值，以避免让您的程序认为两个不同的人相等。

# sql-server - 从一个表而不是另一个表中获取记录

> ID：11010630
> 
> 赞同：2
> 
> 时间：2012-06-13T08:07:12.423
> 
> 标签：sql-server, ms-access

我有一个名为 Price 的表，由几个字段组成，其中两个是*ProductId*和*PriceType*。有些产品同时具有 Wholesale price`(PriceType = W)`和 Retail price `(PriceType = R)`，即它们有两条具有相同产品 ID 的记录。

我想向用户显示那些没有零售价的产品（即只有一条记录 W 的产品）。

我应该如何编写查询来执行此操作？

我用过类似的东西

```
Select * from Products 
INNER JOIN Prices ON Products.Id = Prices.ProductId 
WHERE ProductId NOT IN 
  (SELECT ProductId FROM Prices WHERE PriceType="R") 
```

但这执行得很慢。我已经检查并验证了花费很长时间的部分确实是 NOT IN 子句。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T08:18:53.173

```
SELECT * 
FROM Products 
INNER JOIN Prices 
        ON Products.Id = Prices.ProductId 
       AND Prices.PriceType = 'W' 
```

这将在加入时过滤掉价格，因此您永远不会`PriceType='R'`加入任何记录。

要过滤掉那些根本没有“R”的记录，您可以使用以下查询，它会删除 where 子句中的子选择

```
SELECT 
    Products.ProductId
FROM 
    Products 
    INNER JOIN Prices A
        ON Products.ProductId = A.ProductId 
        AND A.PriceType = 'W'
    LEFT JOIN Prices B
        ON A.ProductId = B.ProductId 
        AND B.PriceType <> A.PriceType    
WHERE
    A.PriceType = 'W'
    AND B.PriceId is null 
```

为确保此操作尽可能快地运行，请确保将索引添加到包含 ProductId 和 PriceType 列的价格表

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T08:25:01.020

我认为您正在寻找`Left Excluding JOIN`，检查[SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

```
SELECT <select_list> 
FROM Table_A A
LEFT JOIN Table_B B
ON A.Key = B.Key
WHERE B.Key IS NULL 
```

所以你的查询应该是：

```
Select * from Products 
Left JOIN Prices ON Products.Id = Prices.ProductId 
Prices.ProductId IS NULL 
AND
Prices.PriceType = 'W' 
```

我还没测。。

希望这有助于实施..

# c# - nhibernate 在 where 子句中将 smallint 强制转换为 int

> ID：11010632
> 
> 赞同：3
> 
> 时间：2012-06-13T08:07:13.883
> 
> 标签：c#, sql, nhibernate

```
var calls = _session.Query<CallTable>()
                    .Where(x => x.Rated == (short)0)
                    .ToList();

This sql is being generated:
select <....>
from   [CallTable] cdrcalltmp0_
where  cdrcalltmp0_.ClientId = 526 /* @p0 */
       and cast(cdrcalltmp0_.Rated as INT) = 0 /* @p1 */ 
```

额定值是数据库中的一个 smallint。为什么要将 smallint 转换为 int 以便与 short 进行比较？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:18:48.820

`SmallInt`并且`Short`是不同的数据类型（即使它们相似，SQL 处理器在收到数据时也无法知道这一点。）由于 SQL Server 没有`Short`数据类型，因此它可能会将其转换为整数。[这](http://comments.gmane.org/gmane.comp.windows.dotnet.nhibernate.devel/1737)似乎支持了这个假设。

这可能是通过 c# 从 SQL 查询的短数据类型的默认行为。如果有帮助，请查看如何修复类似问题的示例：[nhibernate fluent bool to smallint mapping](https://stackoverflow.com/questions/3044310/nhibernate-fluent-bool-to-smallint-mapping)。否则，您可能需要更改连接设置才能执行此操作。

# session - EntityManager.getReference 是否总是在会话中返回相同的实例？

> ID：11010634
> 
> 赞同：4
> 
> 时间：2012-06-13T08:07:20.253
> 
> 标签：session, object, jpa, reference, entitymanager

我的问题涉及 EntityManager.getReference。鉴于我在一个 JPA 会话中，我能否确定对于同一个实体和同一个主键对 EntityManager.getReference 的两次调用，我总是得到同一个 java 对象实例？对于两个不同的会话，我怀疑会获得两个不同的 java 对象实例——真的是这样吗？

我有兴趣了解一般规则，而不是任何特定实现的工作原理。它是否由规范定义？（我自己无法找到它）。

```
Person p1 = EntityManager.getReference(Person.class, 1L);
Person p2 = EntityManager.getReference(Person.class, 1L);

if (p1 == p2) {
  System.out.println("SAME");
} else {
  System.out.println("DIFF");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T08:53:31.077

是的，这是 JPA 的基本保证——在持久性上下文（即会话）范围内，*托管*`EntityManager`实体的对象身份与其数据库身份匹配：

 *> **7.1 持久性上下文**
> 
> 持久性上下文是一组托管实体实例，其中任何持久性实体身份都有一个唯一的实体实例。

并`getReference()`返回一个托管实例：

> **3.2.8 托管实例**
> 
> ...
> 
> contains() 方法可用于确定是否在当前持久性上下文中管理实体实例。
> 
> contains 方法返回 true：
> 
> *   如果实体已从数据库中检索或已由 getReference 返回，并且尚未删除或分离。
> *   如果实体实例是新的，并且已在实体上调用了持久方法或已将持久操作级联到它。

此外，这种保证意味着在持久化上下文的范围内，无论您如何获得它（通过`find()`、`getReference()`、`merge()`、 查询或关系遍历），您都将获得相同 id 的相同实体实例。

例如，如果您从`getReference()`与该实体的所有进一步工作中获得代理，将通过该代理进行：

```
Person p1 = EntityManager.getReference(Person.class, 1L); 
Person p2 = EntityManager.find(Person.class, 1L); 
assertSame(p1, p2); 
```

**也可以看看：**

*   [JSR 317：JavaTM 持久性 2.0](http://jcp.org/en/jsr/detail?id=317)*

# css - 从右到左（rtl）英文单词在html中显示

> ID：11010635
> 
> 赞同：2
> 
> 时间：2012-06-13T08:07:21.773
> 
> 标签：css, right-to-left

问题是这样的，

```
<p>Hi world</p> 
```

长期运输：

```
Hi world 
```

右转：

```
world Hi 
```

我无法让这个 RTL 显示没有使用 css。

我现在尝试了这些 CSS 属性。

```
direction: rtl;
unicode-bidi: embed || normal; //same effect, nothing changes.
unicode-bidi: bidi-override; //each letter comes from r-t-l. Like: dlrow iH
text-align: right; 
```

反正有没有`world Hi`使用css形成文本。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T10:16:20.467

不，这是不可能的，方向性并不意味着用于这样的操作。

该`direction`属性及其对应的 HTML`dir`属性设置了方向中性文本的方向性。即使空格等中性字符介入，它也不会影响具有强固有方向性的字符串。该值`bidi-override`意味着它所说的，它只是强制一个单一的写入方向。

你也需要处理这些词，因为 CSS 没有可以在这里使用的伪元素，你需要使用真正的元素，比如

```
<p><span class=w>Hi</span> <span class=w>world</span></p> 
```

然后，您可以对整个元素和单个单词使用不同的方向性设置：

```
span { unicode-bidi: embed;}
p { unicode-bidi: bidi-override; direction: rtl;  text-align: left; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T08:12:14.317

我一直以为阅读方向是在html开始标签中设置的，像这样：

```
<html dir="rtl"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T08:15:38.780

我认为使用“rtl”你会得到如下输出：“dlrow iH”

由于您无法在 CSS 中检测到单独的单词，因此我建议您使用 JavaScript 来解决此问题：

```
var string = "Hi world";
var array = string.split(" ");
var reversed = array.reverse();
reversed
-> ["world", "Hi"] 
```

# xslt - 在 xslt 中重复使用 document() 时的性能

> ID：11010638
> 
> 赞同：5
> 
> 时间：2012-06-13T08:07:31.140
> 
> 标签：xslt

像这样在整个 xslt 文件中调用同一个文档是否可以接受：

```
<xsl:value-of select="document('doc.xml')/root/bar/foo1" />
<xsl:value-of select="document('doc.xml')/root/bar/foo2" />
<xsl:value-of select="document('doc.xml')/root/bar/foo3" /> 
```

...？

我可以想象缓存避免了一次又一次地读取文件产生的开销。

或者我应该将 doc.xm 存储在一个变量中并使用该变量进行查询？

在这种情况下，我将不得不使用像 xsle 这样的库，因为我使用的是 xslt1。

或者有没有其他解决方案？

注意：XPath 的某些部分应该是动态的，例如：

```
<xsl:value-of select="document('doc.xml')/root/*[name()=$lang]/foo3" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T10:59:36.423

XSLT 处理器需要确保如果您使用相同的 URL 调用 document() 两次，返回的节点在 count(document('a.xml')|document('a'xml')) = 1 的意义上是相同的. 不缓存文档很难满足这个要求，所以我认为你可以合理地确定每个文档只会被提取和解析一次。但是，将它放在全局变量中永远不会造成任何伤害。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T08:46:41.573

就我个人而言，当我使用它时，为了方便起见，我总是把它放在一个变量中，或者得到我需要的值，只是为了让它更容易阅读。使用我上次使用的 MSXSL，我可以将它放在节点树中并以这种方式访问​​它。

我无法想象 XSL 处理器不会以某种方式缓存同一个文件，但我怀疑它对于所有处理器都是不同的，而且它似乎没有被写下来。

如果我想知道我正在使用的处理器，我只需复制并粘贴一个大文档并将其计时作为测试，这不会花很长时间，这是确保您的系统的唯一方法。

# windows-8 - 在 Metro 应用程序中旋转文本块

> ID：11010639
> 
> 赞同：0
> 
> 时间：2012-06-13T08:07:38.437
> 
> 标签：windows-8, rotation, microsoft-metro

我写了一个应用程序（在 Windows 8 cr，vs2011 中），并在其中旋转了一个文本块。现在在同一应用程序中的 Windows 8 rc 和 vs 2012 中，旋转不起作用。

```
textblock.ManipulationMode = (lastTB.ManipulationMode & ~ManipulationModes.System) | ManipulationModes.Rotate | ManipulationModes.RotateInertia;
textblock.ManipulationDelta += lastTB_ManipulationDelta; 
```

该事件不起作用。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T11:25:55.933

这可能是因为在 Release Preview 中操作事件发生了一些变化。本文档详细介绍了 API 中的更改：[将您的 Windows 8 Consumer Preview 应用程序迁移到 Windows 8 Release Preview](http://go.microsoft.com/fwlink/?LinkId=251943 "将您的 Windows 8 Consumer Preview 应用程序迁移到 Windows 8 Release Preview")

具体来说，事件现在使用度数而不是弧度。所以也许你可能不得不改变你的代码来反映这一点？

# xcode - 向服务器发送数据时出错

> ID：11010640
> 
> 赞同：1
> 
> 时间：2012-06-13T08:07:41.400
> 
> 标签：xcode, ios5, apple-push-notifications

**嗨，我正在为 APNS 构建我的 Xcode 项目，我在将 deviceToken 发送到本地服务器（XAMPP）时遇到了问题，这里是代码：**

```
-(void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken{
NSLog(@"devicetoken= %@",deviceToken);
NSString *string =[NSString stringWithFormat:@"%@",deviceToken];
string=[string substringWithRange:NSMakeRange(1, string.length-2)];
string=[string stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

  NSString *url=[NSString stringWithFormat:@"http://localhost/addtoken.php?devictoken=%@",string];
NSURLRequest *request=[NSURLRequest requestWithURL:[NSURL URLWithString:url]];
[NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue currentQueue] completionHandler:^(NSURLResponse *urlResponse, NSData *data, NSError *error) {
    if (error){
        NSLog(@"error %@",error);
    }
}
 ]; 
```

}

此错误写入控制台错误 Error Domain=NSURLErrorDomain Code=-1004 “无法连接到服务器。

**我在我的设备上运行我的应用程序，我在浏览器中运行带有处理数据的链接，服务器保存了它！你能帮我弄清楚为什么会出现这个错误吗？提前致谢**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:37:50.967

使用您的计算机的 IP 地址而不是 localhost。当您使用 localhost 时，您假设请求和连接是在本地进行的，在您的情况下，它是在 iPhone 和服务器之间（它们都有不同的 ip）

# android - Android 应用内计费：自定义 sku 购买给出“错误 - 未找到项目”

> ID：11010642
> 
> 赞同：2
> 
> 时间：2012-06-13T08:07:50.560
> 
> 标签：android, in-app-purchase, in-app-billing

我正在尝试使用我自己的 sku/产品 ID“upgrade_to_premium”测试应用内计费。正如我在这里看到的推荐，我使用的是地下城示例应用程序。我在 Dungeons.java 的 CatalogEntry[] 数组中添加了一个“new CatalogEntry("upgrade_to_premium", R.string.upgrade_to_premium, Managed.MANAGED)”。在 Const.java 中，DEBUG 设置为 TRUE。

我已将发布签名的 .apk 上传到我的开发者控制台并激活它，并使用 adb 将相同的 .apk 安装到我的设备上。

我在开发控制台中输入了一个同名的应用内产品，并发布了它。

我不是使用我的开发者帐户登录我的手机，而是使用在我的开发者控制台注册的测试 Google 帐户。此帐户有关联的信用卡信息；我可以用它购买音乐。

我的设备正在运行 Gingerbread，并带有最新的 Google Play 升级。

在我的手机上启动新安装的应用程序后，我在 LogCat 中观察到预期的 RestoreTransactions 调用，但它返回 RESULT_DEVELOPER_ERROR。（不是一个好的开始？我想不是，但是*记录了五个不同的*此错误的可能原因不适用于此处，谁知道有多少未记录的。）然后我尝试购买我的自定义 sku upgrade_to_premium，但我收到一个标题为“错误”的警报对话框，并显示消息“未找到项目”，两次接连，就在它通常会显示带有 VISA 信息的市场（播放）UI 的时间。有趣的是，在尝试包含无效（即未发布）包名称的市场 URL 时，我观察到类似的错误。我上传的未发布草稿是否找不到？没有找到我的自定义 sku？从模糊的错误消息中很难分辨。有人有任何线索吗？谢谢。

这是 LogCat 输出：

```
06-13 00:08:31.858: D/Finsky(589): [1] 5.onFinished: Installation state replication    succeeded.
06-13 00:08:43.729: I/ActivityManager(109): Starting: Intent {  act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000  cmp=com.augmentedmind.dungeons/.Dungeons } from pid 196
6-13 00:08:43.795: I/ActivityManager(109): Start proc com.augmentedmind.dungeons for activity com.augmentedmind.dungeons/.Dungeons: pid=1247 uid=10054 gids={}
06-13 00:08:44.198: D/BillingService(1247): CheckBillingSupported
06-13 00:08:44.198: I/BillingService(1247): binding to Market billing service
06-13 00:08:44.213: D/BillingService(1247): CheckBillingSupported
06-13 00:08:44.213: I/BillingService(1247): binding to Market billing service
06-13 00:08:44.221: D/BillingService(1247): Billing service connected
06-13 00:08:44.225: D/BillingService(1247): CheckBillingSupported
06-13 00:08:44.237: D/Finsky(589): [26] MarketBillingService.getPreferredAccount:  com.augmentedmind.dungeons: Account from first account.
06-13 00:08:44.241: I/BillingService(1247): CheckBillingSupported response code: RESULT_OK
06-13 00:08:44.241: I/Dungeons(1247): supported: true
06-13 00:08:44.241: D/BillingService(1247): RestoreTransactions
06-13 00:08:44.245: D/Finsky(589): [8] MarketBillingService.getPreferredAccount: com.augmentedmind.dungeons: Account from first account.
06-13 00:08:44.249: D/Finsky(589): [8] MarketBillingService.getPreferredAccount: com.augmentedmind.dungeons: Account from first account.
06-13 00:08:44.260: I/ElegantRequestDirector(589): I/O exception (org.apache.http.NoHttpResponseException) caught when processing request: The target server failed to respond
06-13 00:08:44.260: E/BillingService(1247): restoreTransactions received RESULT_OK
06-13 00:08:44.260: D/BillingService(1247): request id: 2247584787757221561
06-13 00:08:44.260: I/ElegantRequestDirector(589): Retrying request
06-13 00:08:44.268: D/BillingService(1247): request id: -1
06-13 00:08:44.268: D/BillingService(1247): CheckBillingSupported
06-13 00:08:44.272: D/Finsky(589): [7] MarketBillingService.getPreferredAccount: com.augmentedmind.dungeons: Account from first account.
06-13 00:08:44.272: I/BillingService(1247): CheckBillingSupported response code: RESULT_OK
06-13 00:08:44.272: I/Dungeons(1247): supported: true
06-13 00:08:44.272: D/BillingService(1247): request id: -1
06-13 00:08:44.346: I/ActivityManager(109): Displayed com.augmentedmind.dungeons/.Dungeons: +556ms
06-13 00:08:44.729: D/Finsky(589): [1] MarketBillingService.sendResponseCode: Sending response RESULT_DEVELOPER_ERROR for request 2247584787757221561 to com.augmentedmind.dungeons.
06-13 00:08:44.741: I/BillingService(1247): handleCommand() action: com.android.vending.billing.RESPONSE_CODE
06-13 00:08:44.741: D/BillingService(1247): RestoreTransactions: RESULT_DEVELOPER_ERROR
06-13 00:08:44.741: D/Dungeons(1247): RestoreTransactions error: RESULT_DEVELOPER_ERROR
06-13 00:09:28.049: D/Dungeons(1247): buying: Upgrade app to premium sku: upgrade_to_premium
06-13 00:09:28.053: D/BillingService(1247): RequestPurchase
06-13 00:09:28.092: D/Finsky(589): [26] MarketBillingService.getPreferredAccount: com.augmentedmind.dungeons: Account from first account.
06-13 00:09:28.096: D/Finsky(589): [26] MarketBillingService.getPreferredAccount: com.augmentedmind.dungeons: Account from first account.
06-13 00:09:28.100: I/ActivityManager(109): Starting: Intent { act=android.intent.action.VIEW cmp=com.android.vending/com.google.android.finsky.activities.IabActivity (has extras) } from pid -1
06-13 00:09:28.104: D/BillingService(1247): request id: 137676918944123250
06-13 00:09:28.104: D/BillingService(1247): RequestPurchase
06-13 00:09:28.108: D/Finsky(589): [27] MarketBillingService.getPreferredAccount: com.augmentedmind.dungeons: Account from first account.
06-13 00:09:28.112: D/Finsky(589): [27] MarketBillingService.getPreferredAccount: com.augmentedmind.dungeons: Account from first account.
06-13 00:09:28.112: I/ActivityManager(109): Starting: Intent { act=android.intent.action.VIEW cmp=com.android.vending/com.google.android.finsky.activities.IabActivity (has extras) } from pid -1
06-13 00:09:28.116: D/BillingService(1247): request id: 5138873787070031749
06-13 00:09:28.174: D/Finsky(589): [1] SelfUpdateScheduler.checkForSelfUpdate: Skipping self-update. Local Version [8011019] >= Server Version [0]
06-13 00:09:28.381: I/ActivityManager(109): Displayed com.android.vending/com.google.android.finsky.activities.IabActivity: +262ms
06-13 00:09:28.413: E/Volley(589): [13] BasicNetwork.performRequest: Unexpected response code 500 for https://android.clients.google.com/fdfe/details?doc=subs:com.augmentedmind.dungeons:upgrade_to_premium
06-13 00:09:41.670: W/InputManagerService(109): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@40796830
06-13 00:09:41.737: D/Finsky(589): [1] SelfUpdateScheduler.checkForSelfUpdate: Skipping self-update. Local Version [8011019] >= Server Version [0] 
```

大约在这个时候，我在设备屏幕上弹出一个对话框，标题为“错误”，并显示消息“未找到项目”，两次。就在它通常会显示带有 VISA 信息的市场 (Play) UI 的时候。

```
06-13 00:09:41.881: D/Finsky(589): [1] MarketBillingService.sendResponseCode: Sending response RESULT_ERROR for request 5138873787070031749 to com.augmentedmind.dungeons.
06-13 00:09:41.889: I/BillingService(1247): handleCommand() action: com.android.vending.billing.RESPONSE_CODE
06-13 00:09:41.889: D/BillingService(1247): RequestPurchase: RESULT_ERROR
06-13 00:09:41.893: D/Finsky(589): [1] PendingNotificationsService.setMarketAlarm: Setting alarm for account=tester.android30@gmail.com, duration=120000
06-13 00:09:41.940: I/ActivityManager(109): Displayed com.android.vending/com.google.android.finsky.activities.IabActivity: +271ms
06-13 00:09:41.991: E/Volley(589): [14] BasicNetwork.performRequest: Unexpected response code 500 for https://android.clients.google.com/fdfe/details?doc=inapp:com.augmentedmind.dungeons:upgrade_to_premium
06-13 00:09:45.600: W/InputManagerService(109): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@407daea0
06-13 00:09:45.682: D/Finsky(589): [1] MarketBillingService.sendResponseCode: Sending response RESULT_ERROR for request 137676918944123250 to com.augmentedmind.dungeons.
06-13 00:09:45.690: D/Finsky(589): [1] PendingNotificationsService.setMarketAlarm: Setting alarm for account=tester.android30@gmail.com, duration=120000
06-13 00:09:45.698: I/BillingService(1247): handleCommand() action:       com.android.vending.billing.RESPONSE_CODE
06-13 00:09:45.698: D/BillingService(1247): RequestPurchase: RESULT_ERROR
06-13 00:09:45.698: D/Dungeons(1247): upgrade_to_premium: RESULT_ERROR
06-13 00:09:45.698: I/Dungeons(1247): purchase failed 
```

PS 我在某处读到“可能需要等待一个小时左右才能激活它”，但我真诚地希望未发布的草稿上传不是这种情况！为什么这种用户永远看不到的上传会受到延迟？...我开始认为这是真的，因为通过重复上传/删除/重新上传这个*未发布的草稿应用程序*，我刚刚达到了上传配额。就像掌握应用内计费一样痛苦，我不需要那种额外的烦恼。不好，谷歌。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-13T08:17:31.793

您必须发布产品（而不是应用程序）才能使其正常工作。是的，您需要稍等片刻。大概是当您的 APK 状态被复制到所有 Google Play 服务器时。大约一年前它曾经可以立即工作，但现在不再是这种情况了。但是，您不需要上传和测试*同一个 APK*，只需要版本和签名匹配。因此，当您开始开发新版本时，只需在清单中添加版本，导出并上传签名的 APK。在您开发和测试时让它坐在那里。然后在发布时将其替换为您的最终二进制文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T08:17:24.760

`base64EncodedPublicKey`在 Security 类的变量中设置您的公钥。

并使用签名的 apk 在应用计费中进行测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T20:45:29.337

您应该注意到演示 Dungeons.java 中显示了一些非常具有误导性的错误和对话框：

--

如果您收到“错误：此版本的应用程序未配置为市场计费”。

您必须将*RELEASE* apk 安装到您的 android *DEVICE*而不是模拟器上，这意味着：

*   导出您的 APK 并对其进行签名

*   删除您设备上任何以前安装的应用程序（甚至是调试/开发人员版本！）

*   将 APK 侧加载到您的设备，安装并运行它。

*   这也意味着调试您发布的应用程序可能会在没有附加调试器的情况下进行。如果您的调试器已连接，请告诉我如何操作！

如果您收到“错误：找不到项目”，则很有可能没有任何问题。

Dungeons.java 实际上有一个错误。让我解释：

```
/**
 * Called when a button is pressed.
 */
@Override
public void onClick(View v) {
    if (v == mBuyButton) {
        if (Consts.DEBUG) {
            Log.d(TAG, "buying: " + mItemName + " sku: " + mSku);
        }

        if (mManagedType != Managed.SUBSCRIPTION &&
                 // ** The following line is bug when returns !true which is false, and then makes the if statement false
                !mBillingService.requestPurchase(mSku, Consts.ITEM_TYPE_INAPP, mPayloadContents)) { 
            showDialog(DIALOG_BILLING_NOT_SUPPORTED_ID);

            // ** Which then ends up running this else if, meaning it will try to purchase a subscription
        } else if (!mBillingService.requestPurchase(mSku, Consts.ITEM_TYPE_SUBSCRIPTION, mPayloadContents)) {
            // Note: mManagedType == Managed.SUBSCRIPTION
            showDialog(DIALOG_SUBSCRIPTIONS_NOT_SUPPORTED_ID);
        }
    } else if (v == mEditPayloadButton) {
        showPayloadEditDialog();
    } else if (v == mEditSubscriptionsButton) {
        editSubscriptions();
    }
} 
```

而是应该这样写：

```
/**
 * Called when a button is pressed.
 */
@Override
public void onClick(View v) {
    if (v == mBuyButton) {
        if (Consts.DEBUG) {
            Log.d(TAG, "buying: " + mItemName + " sku: " + mSku);
        }

        // We need this statement to evaluate to true on a Non-Subscription such as a Managed or Unmanaged Purchase
        if (mManagedType != Managed.SUBSCRIPTION) { 

                // If the following errors out, show an error dialog.  However, it should not make the previous if statement false
                if( !mBillingService.requestPurchase(mSku, Consts.ITEM_TYPE_INAPP, mPayloadContents)) { 
                    showDialog(DIALOG_BILLING_NOT_SUPPORTED_ID);
                }

        } 

         // This if statement gets run accidentally without the bug fix, thus trying to buy your "SKU" as a "subscription", which is totally wrong!
        else if (!mBillingService.requestPurchase(mSku, Consts.ITEM_TYPE_SUBSCRIPTION, mPayloadContents)) { 
            // Note: mManagedType == Managed.SUBSCRIPTION
            showDialog(DIALOG_SUBSCRIPTIONS_NOT_SUPPORTED_ID);
        }
    } else if (v == mEditPayloadButton) {
        showPayloadEditDialog();
    } else if (v == mEditSubscriptionsButton) {
        editSubscriptions();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-12T10:26:21.237

试试这个：

将您的应用导出为 APK 文件。将 APK 上传到 Google Play。将相同的 APK 侧载到您的测试设备。等待一个小时左右，让 Google Play 更新其服务器。测试已安装的 APK。

# python - OpenCV 2.4.0 的 python 绑定中的 ORB

> ID：11010644
> 
> 赞同：1
> 
> 时间：2012-06-13T08:07:56.460
> 
> 标签：python, opencv

ORB 特征检测器是否已移植到 OpenCV 2.4.0 的 python 绑定？如果是这样，我该如何使用它？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T05:59:34.797

There is a sample script called "feature_homography.py" that uses ORB features. You can checkout the samples directory.

```
svn co http://code.opencv.org/svn/opencv/tags/2.4.1/opencv/samples 
```

From the sample:

```
detector = cv2.FastFeatureDetector(16, True)
detector = cv2.GridAdaptedFeatureDetector(detector)
extractor = cv2.DescriptorExtractor_create('ORB') 
```

# python - ImportError：无法导入设置“settings.py”（它在 sys.path 上吗？）：没有名为 py 的模块

> ID：11010646
> 
> 赞同：1
> 
> 时间：2012-06-13T08:08:07.320
> 
> 标签：python, django, geodjango

Shis 是我在尝试使用以下命令从 django.contrib.gis.db 导入模型时遇到的错误

```
from django.contrib.gis.db import models 
```

我想这样做来定义地理模型。我收到下面提到的错误。

伙计们请帮帮我。

```
from django.contrib.gis.db import models
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.7/dist-packages/django/contrib/gis/db/models/__init__.py", line 2, in <module>
    from django.db.models import *
  File "/usr/local/lib/python2.7/dist-packages/django/db/__init__.py", line 11, in <module>
    if DEFAULT_DB_ALIAS not in settings.DATABASES:
  File "/usr/local/lib/python2.7/dist-packages/django/utils/functional.py", line 184, in inner
    self._setup()
  File "/usr/local/lib/python2.7/dist-packages/django/conf/__init__.py", line 42, in _setup
    self._wrapped = Settings(settings_module)
  File "/usr/local/lib/python2.7/dist-packages/django/conf/__init__.py", line 95, in __init__
    raise ImportError("Could not import settings '%s' (Is it on sys.path?): %s" % (self.SETTINGS_MODULE, e))
ImportError: Could not import settings 'settings.py' (Is it on sys.path?): No module named py 
```

这是我在终端中获得的完整回溯。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-13T08:09:29.240

你正在做的地方`import settings.py`而不是`import settings`.

# c# - 从 Windows 网络检索网络用户名

> ID：11010649
> 
> 赞同：0
> 
> 时间：2012-06-13T08:08:28.030
> 
> 标签：c#, asp.net, .net, iis-7, windows-authentication

请原谅我对这篇文章的天真，因为我习惯于在 LAMP 环境而不是 Microsoft .NET 环境中进行开发，所以我在这里有点不适应。

我正在 Windows 网络上开发单页 Intranet。用户通过 Active Directory windows 2008 服务器进行身份验证。我希望我的 Intranet 页面能够无缝地收集经过身份验证的用户的网络用户名，而无需再次输入凭据。我已经能够获得用户名，但只有在浏览器强制第二次登录之后。

我正在运行 IIS 7 并对其进行了配置，以便：

```
Anonymous User is disabled
Integrated Windows Authentication is enabled 
```

我的 web.config 文件包含以下文本：

```
<identity impersonate="false"/>
<authentication mode="Windows"/>
<authorization>
  <deny users="?"/>
</authorization> 
```

我的 C# 代码如下：

```
public partial class AuthUser : System.Web.UI.Page {

  protected void Page_Init( object sender, EventArgs e ) {

    Response.Write(User.Identity.Name);

  } 
} 
```

所以我的问题是：

如何实施无缝身份验证，无需第二次身份验证即可收集登录用户的网络用户名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:56:04.610

只有在 IE 中才能使用 Active Directory 自动登录，将站点添加到受信任的站点（您已这样做），并更改 IE >> Internet 选项 >>（选择受信任的站点）>> 自定义级别中的设置：

```
User Authentication >> Logon >> Automatic logon with current user name and password. 
```

# php - 合并 PDF 后丢失图层设置

> ID：11010653
> 
> 赞同：2
> 
> 时间：2012-06-13T08:08:49.670
> 
> 标签：php, pdf, merge, layer, ocg

这里有一些将 PDF 与图层合并的工具吗？

尝试使用 pdftk、fpdf/fpdi、Gswin32c 将 PDF 与图层合并。在任何情况下，输出 PDF 都是没有图层的简单 PDF。

谢谢。

**编辑。**我正在寻找适合在 PHP 项目中使用它的工具（PHP 类或可执行文件，例如 pdftk）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:49:25.117

如果您指的是可选内容（ISO3200-1:2008 第 8.11 节）：AFAIK 没有免费的。不过，有一个未维护的 pdfTeX 分支对此提供了基本支持。

你可以试试 Adob​​e Acrobat 或 InDesign。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T08:42:00.310

我认为需要有关您的环境的更多信息，但如果您使用的是 .NET，我使用了[PDFsharp](http://pdfsharp.com/PDFsharp/)（一个开源库）来合并多个 pdf 文档并获得良好的结果。

# box-api - Box V2 API - 使用 XML 格式创建文件夹

> ID：11010657
> 
> 赞同：2
> 
> 时间：2012-06-13T08:08:59.263
> 
> 标签：box-api

我正在尝试使用 Box API 编写 C# 应用程序，但我无法使用 v2 API 创建文件夹。.NET 本身不支持 JSON，因此我试图将请求发送到

`https://upload.box.com/api/2.0/folders/{0}.xml`

（这样响应将是 XML 格式的，并且易于从 C# 解析）。

问题是，我不确定如何格式化 POST 请求正文，因为 v2 文档没有说明此信息。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T18:45:37.163

要在 JSON 中创建文件夹，您将 POST /folders/{folder id} 正文为

```
{
    "name": "the new folder's name"
} 
```

XML 版本本质上是相同的，除了你用`<body>`大括号而不是花括号来包装所有内容，即

```
<body>
    <name>something</name>
</body> 
```

（作为旁注，.xml 扩展名似乎存在错误。现在您可以通过附加 ?response_type=xml 来获取 XML）

# php - 在类似页面中加载 HTML 文件时，我们可以防止额外加载 JS 和 CSS 文件吗？

> ID：11010660
> 
> 赞同：2
> 
> 时间：2012-06-13T08:09:14.463
> 
> 标签：php, html

我们能否防止在包含类似 CSS 和 JS 文件的页面中额外加载 CSS 和 JS 文件。例如 index.html 文件有一个 CSS 和 JS 文件，而 index1.html 也有 CSS 和 JS 相同的文件。因此，如果 index.html 文件已在浏览器中加载，则在加载 index1.html 时不需要加载 CSS 和 JS 页面，即我们可以在加载 index2.html 文件的情况下重用之前加载的 CSS 和 JS 文件。

所有常见的 jquery 和相关的 js 脚本、图像、css 都应该只加载一次。换句话说，登录页面加载和后续页面每次都加载常见的东西。有什么办法可以解决 HTML 页面中的这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T08:11:58.497

这已经发生了......这是一个**缓存**问题。您应该正确设置*缓存过期时间*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T08:13:27.263

这些文件已经使用相同的 JS 和 CSS，大多数浏览器都使用自己的缓存系统。您只需要在两个文件中包含相同的 JS 和 CSS 路径就可以了。

如果没有包含它们，则不能使用任何 javascript 或样式表。

# django - Django Crispy Forms - 布局 Div

> ID：11010662
> 
> 赞同：2
> 
> 时间：2012-06-13T08:09:25.627
> 
> 标签：django, forms, helper, django-crispy-forms

我正在从 DB 模型创建一个酥脆的表格。

我想将模型中的所有字段都放在我的 div 助手中......有没有办法做到这一点，这样我就不需要写下每一个......比如：

```
self.helper.layout = Layout(
   Div('field1', 'field2', 'field3', ...), 
   ...
) 
```

我试过

```
Div('*') 
```

和类似的事情，但它没有奏效。

有什么建议么？

谢谢！

罗恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T11:20:59.087

我在文档中发现了一些东西...

我认为它的解决方案... :)

> render_un提到_fields = False 默认情况下，django-crispy-forms 会渲染指定的布局（如果它严格存在），这意味着它只渲染布局提及的内容，除非您的表单定义了 Meta.fields 和 Meta.exclude，在这种情况下它会使用它们。如果您想在布局中呈现未提及的字段，例如，如果您担心忘记提及它们，则必须将此属性设置为 True。它默认为假。

# objective-c - 使用 FBDialog 上传 UIImage

> ID：11010663
> 
> 赞同：0
> 
> 时间：2012-06-13T08:09:26.843
> 
> 标签：objective-c, ios, facebook, facebook-ios-sdk

我想使用`FBDialog`来自 Facebook SDK 的，但它似乎只需要一个 URL 来发布图像。有没有什么方法可以`UIImage`使用 上传到 Facebook，`FBDialog` 而无需在发布之前将图像上传到另一台服务器？

我目前正在使用它`UIImage`在 facebook 上发布：

```
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               @"A caption", @"caption",
                               nil];
[_facebook requestWithMethodName:@"photos.upload" andParams:params andHttpMethod:@"POST" andDelegate:nil]; 
```

它工作得很好，但我需要`FBDialog`. 有什么办法可以用 做同样的事情`FBDialog`吗？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T08:14:55.127

不，要发布`UIImage`您不能直接附加它。这里有两种方法：

1.  太上传到服务器，然后将 URL/请求/查询带到该服务器
2.  （更实用的方法）上传到你的 Facebook 用户的相册，然后发布那张图片

有关更深入的教程，请查看此链接：

[官方 Facebook iOS 教程](https://developers.facebook.com/docs/mobile/ios/build/)

[这是一个类似的问题，有一个很好的答案，提供了分步教程](https://stackoverflow.com/questions/6637514/facebook-ios-sdk-trouble-posting-photo-using-uiimage)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-01T06:12:27.120

从 Facebook iOS SDK v3.13+ 开始，您可以`presentShareDialogWithPhotoParams`直接从设备上传图像。请参见下面的示例代码：

```
FBShareDialogPhotoParams *photoParams = [FBShareDialogPhotoParams new];
UIImage *screenshot = //image you want to share.
photoParams.photos = @[screenshot];
[FBDialogs presentShareDialogWithPhotoParams:photoParams
                                 clientState:nil
                                     handler:^(FBAppCall *call, NSDictionary *results, NSError *error) {

                                     }]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T08:27:29.813

```
- (void) feedDialogButtonClicked {
NSMutableDictionary *params = 
    [NSMutableDictionary dictionaryWithObjectsAndKeys:
        @"Testing Feed Dialog", @"name",
        @"Feed Dialogs are Awesome.", @"caption",
        @"Check out how to use Facebook Dialogs.", @"description",
        @"http://www.example.com/", @"link",
        @"http://fbrell.com/f8.jpg", @"picture",
        nil];  
[facebook dialog:@"feed"
        andParams:params
      andDelegate:self]; 
```

}

来自 Rohan 发布的官方 Facebook iOS 教程

# jquery - 我需要遍历并存储锚标签的 id

> ID：11010670
> 
> 赞同：0
> 
> 时间：2012-06-13T08:09:43.000
> 
> 标签：jquery, find, parent, traversal, closest

好的，我一直在尝试获取特定链接的 id，但 attr('id') 一直返回未定义。

这是html的结构：

```
<hr />

<span>The Huffs</span><br />

            <img src="images/thumbnails/websitethumbs/graphicdesign/logos/th_2.jpg" height="120"><br />

            <span>the huff family<span><br />

            <span>$10.99<span><a id="btn_2" class="btn hidden" href="cart.php?add=2"> add</a><br />

            <form method="post">

                <select class="sizeSelect" id="size_2">

                <option value="0">Select Size</option><option value="7x5">7x5</option><option value="16x12">16x12</option><option value="10x10">10x10</option></select>

                <span> + $<span class="shipping" id="shipping_2"></span> shipping</span>

            </form>

<hr /> 
```

我想从#size_2 遍历到ID 为#btn_2 的a 标记，我需要获取该ID 并将其保存到变量中。

我一直在使用以下 jquery 代码：

```
 $('.sizeSelect').change(function(size) {
     sizeId = $(this).attr('id');
     addBtn = $(sizeId).parent().closest('.btn').attr('id');
     ... 
```

所以我想添加 btn 以返回“btn_2”，但它只返回“未定义”。我也尝试过 prev() 而不是最接近的...好吧，我尝试了很多东西。几个小时后，我真的很感激一些见解:)

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:15:22.450

你的意思是这样的：

```
$('.sizeSelect').change(function() {
  var sizeId = $(this).attr("id").split("_")[1]; // gets 2 from size_2
  //since id's are unique
  var addBtn = "btn_"+sizeId; //anchor id  
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T08:16:11.490

看看这段代码：

```
sizeId = $(this).attr('id');
addBtn = $(sizeId).parent().closest('.btn').attr('id'); 
```

在您的情况下， ID`.sizeSelect`是`size_2`，所以

```
sizeId == 'size_2'; 
```

所以你正在做的实际上是

```
addBtn = $('size_2') 
```

它应该是

```
addBtn = $('#size_2') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T08:33:11.343

您必须从

```
addBtn = $(sizeId).parent().closest('.btn').attr('id'); 
```

到

```
addBtn = $('#'+sizeId).parent().siblings('.btn').attr('id'); 
```

# c# - 如何在循环中调用 JavaScript 函数

> ID：11010674
> 
> 赞同：0
> 
> 时间：2012-06-13T08:10:20.120
> 
> 标签：c#, javascript, asp.net

我想多次调用 JavaScript 函数。我
在脚本 中尝试过

```
 function changeIt(strgr , idx) {
    //SomeCode
    return;  
 } 
```

在 C# 中

```
 protected void btn_Click(object sender, EventArgs e)  
 {  
      string strgr = 001;
      for(int i=0; i<3; i++)  
      {  
          base.RunScriptBottom("changeIt(" + strgr + "," + i + ");");  
      }
 } 
```

但它只调用一次脚本函数。我能做什么。
带着敬意

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:19:41.170

检查[ClientScriptManager.RegisterStartupScript](http://msdn.microsoft.com/en-us/library/system.web.ui.clientscriptmanager.registerstartupscript.aspx)

顺便说一句，您可以编写一个 js 函数来循环并从服务器端调用一次..

```
 function changeAll(strgr , from, to) {

   for(int i = from, i< to; i++)
      changeIt(strgr ,i);
 } 
```

服务器端：

```
protected void btn_Click(object sender, EventArgs e)  
 {  
      string strgr = 001;

          base.RunScriptBottom("changeAll(" + strgr + ",0,3);");  

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T09:43:32.390

您应该添加一个客户端事件来执行此操作

```
<asp:Button Text="text" runat="server" OnClientClick="loop()" />
<script type="text/javascript">
    function loop() {
        var strgr = 001;
        for(var i=0; i<3; i++)  
        {  
            changeIt(strgr + "," + i );  
        }
    }
</script> 
```

# javascript - 间歇性 Javascript 动画冲突

> ID：11010677
> 
> 赞同：0
> 
> 时间：2012-06-13T08:10:28.217
> 
> 标签：javascript, jquery, animation

我遇到了一些 Javascript 的问题 - 请在此处查看我的网站和代码 - [http://bit.ly/M1YCV7](http://bit.ly/M1YCV7)。

页面打开，中间有一个徽标和导航菜单。当您单击导航链接时，徽标会向上移动，并且页面内容框应出现在其下方。该动画非常适合除第一个链接（在本例中为 ABOUT）之外的所有链接，它有时仅触发徽标动画并隐藏内容。

我能做些什么来确保它同时完成所有事情吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:29:23.713

contentslider 库在 init 上需要一个 id 为“pagination-settings”的元素，当它找不到时，它会崩溃并抛出异常。不过，不知道为什么图书馆的其余部分仍然有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T08:28:21.947

尝试在 onload 事件而不是 onready 上午餐你的脚本。我认为问题源于在页面完全加载之前运行代码。一般来说，这种类型的脚本（涉及 jquery 动画）必须等待页面加载完成，然后启动动画。事件更好，您可以在页面加载完成之前显示等待。

# android - Android 重新排序项目列表概念

> ID：11010679
> 
> 赞同：0
> 
> 时间：2012-06-13T08:11:21.087
> 
> 标签：android, android-ui

我必须实现一些必须重新排序的项目列表。

我的第一个想法是拖放行为 - 用户长按某个项目并将其向下或向上拖动以更改其位置。但是有一个问题——从 Android 3.x 开始就实现了拖放

您有其他用户友好的想法来设计这种重新排序列表吗？你是用什么方法实现的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:13:08.077

如果我的列表不长，我会在 compareTo of Collections 的帮助下更改我的适配器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T09:15:30.337

尝试实现用户将从上下文菜单中选择的排序顺序

# ios - 我可以通过从图层的 animationForKey: 返回 CAAnimationGroup 来重用它吗？

> ID：11010680
> 
> 赞同：2
> 
> 时间：2012-06-13T08:11:23.833
> 
> 标签：ios, core-animation

我正在尝试做类似的事情：

```
<Create a CAAnimationGroup aGroup with removedOnCompletion = NO ...>
[aLayer addAnimation:aGroup forKey:@"someKey"]; 
```

于是动画组播放...

然后我想检索相同的动画组而不重新创建它并将其重新添加到图层以便它重播。就像是：

```
CAAnimationGroup* theOldGroup = (CAAnimationGroup*)[aLayer animationForKey:@"someKey"];
[aLayer addAnimation:theOldGroup forKey:@"someKey"]; 
```

但是，aGroup 的地址与我从 animationForKey 得到的地址不同。并尝试将其速度设置为 1 或对其执行任何操作会使应用程序崩溃（又名 BAD_ACCESS）

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T08:19:29.500

不，您不能按照您在问题中描述的方式重复使用它们。

* * *

的[文档`animationForKey:`](http://developer.apple.com/library/ios/#DOCUMENTATION/GraphicsImaging/Reference/CALayer_class/Introduction/Introduction.html)说你不能这样做（在**讨论**中）：

> ## 动画键：
> 
> 返回添加到具有指定标识符的接收器的动画。
> 
> `- (CAAnimation *)animationForKey:(NSString *)key`
> 
> **参数**
> 
> *key*
> 一个字符串，它指定动画的标识符。
> 
> **返回值**
> 
> 与标识符匹配的动画对象，或者`nil`如果不存在此类动画。
> 
> **讨论**
> 
> 尝试修改返回对象的任何属性将导致未定义的行为。

# mysql - 适用于 Windows Phone 的 Visual Studio Express 中的 MySQL

> ID：11010681
> 
> 赞同：0
> 
> 时间：2012-06-13T08:11:24.727
> 
> 标签：mysql, windows-phone

有什么方法可以在 Windows 手机应用程序开发中使用 MySQL 数据库？可以使用哪些数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:17:24.953

[对于移动开发，像SQL Server compact](http://blogs.msdn.com/b/sqlservercompact/)或 SQLite 这样的嵌入式数据库会更合适。在移动设备内维护数据库服务器不是一个好主意，即使它是可能的。

# python - python - 如何在python字符串中始终将负零格式化为正零？

> ID：11010683
> 
> 赞同：33
> 
> 时间：2012-06-13T08:11:37.850
> 
> 标签：python

我有以下格式化字符串：

```
'%.2f' % n 
```

如果`n`是负零（`-0`等`-0.000`），则输出为`-0.00`。

如何使输出始终`0.00`为负零和正零值`n`？

（实现这一点相当简单，但我找不到我称之为简洁的pythonic方式。理想情况下，有一个我不知道的字符串格式化选项。）

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-06-13T08:18:35.803

加零：

```
>>> a = -0.0
>>> a + 0
0.0 
```

您可以格式化：

```
>>> '{0:.3f}'.format(a + 0)
'0.000' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-04-13T16:59:01.160

一个非常密切相关的问题是 -0.00001 也被格式化为“-0.00”。这可能同样令人困惑。上面的答案不会解决这个问题（除了 user278064，它需要一个锚定的正则表达式）。

这很难看，但这是我能为这种情况做的最好的事情：

```
import re
re.sub (r"^-(0\.?0*)$", r"\1", "%.2f" % number) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T08:24:20.410

最直接的方法是在您的格式中特殊化零：

```
>>> a = -0.0
>>> '%.2f' % ( a if a != 0 else abs(a) )
0.0 
```

但是，请注意该`str.format`方法比`%`替换更受欢迎 - 在这种情况下（以及在大多数简单情况下）的语法几乎相同：

```
>>> '{:.2f}'.format(a if a != 0 else abs(a)) 
```

另请注意，更简洁的`a or abs(a)`似乎并不 - 即使`bool(a)`是`False`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T08:17:19.747

```
import re
re.sub("[-+](0\.0+)", r"\1", number) 
```

例如：

```
re.sub("[-+](0\.0+)", r"\1", "-0.0000") // "0.0000"
re.sub("[-+](0\.0+)", r"\1", "+0.0000") // "0.0000" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-13T08:19:47.390

```
>>> x= '{0:.2f}'.format(abs(n) if n==0 else n)
>>> print(x) 
0.00 
```

条件原因`if`：

```
>>> -0.0000==0
True
>>> 0.000==0
True
>>> 0.0==0
True 
```

# javascript - 在highchart中动态更改xAxis Tick Label的日期时间格式

> ID：11010691
> 
> 赞同：1
> 
> 时间：2012-06-13T08:12:08.937
> 
> 标签：javascript, highcharts

我需要根据用户的选择更改 X 轴刻度标签`MM/dd/yyyy HH:mm:ss`的日期时间格式。 我怎样才能使用javascript实现这一点？`MM/dd/yyyy`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T08:42:40.680

得到了解决方案，只需使用以下代码（ASP.NET）使 tickInterval 动态

```
tickInterval : <%=IsHourly?1:24 %> * 3600 * 1000, 
```

使用相同的逻辑来更改工具提示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T08:18:48.067

```
xAxis : {
            type : 'datetime',
            gridLineWidth : 1,
            gridLineColor : '#F2F2F2',
            lineColor : '#FF0000',
            tickInterval : 3600 * 1000,
            dateTimeLabelFormats : {
                second : '%H:%M',
                minute : '%H:%M',
                hour : '%H:%M',
                day : '%e',
                week : '%e',
                month : '%e',
                year : '%e'
            }
        }, 
```

请参阅**dateTimeLabelFormats**选项，您可以使用它来更改您的 x 轴刻度标签。

如果您需要更清楚，请告诉我。！

**编辑 ：**

更多 API 参考可以[在](http://www.highcharts.com/ref/#xAxis--dateTimeLabelFormats)Highcharts 的网站上找到。

## [演示](http://jsfiddle.net/gh/get/jquery/1.7.1/highslide-software/highcharts.com/tree/master/samples/highcharts/xaxis/datetimelabelformats/)

**编辑2：**好的，如果您需要动态更改它首先保存您需要的格式，`String`基于任何计算。
诸如此类的东西`var labelFormat = '%H:%M'`。
然后在您渲染图表时，将`dateTimeLabelFormats`其与其他必需选项一起放入以下内容。

```
dateTimeLabelFormats : { labelFormat } 
```

然后调用`redraw()`方法，就完成了。

**请注意：**我没有测试过这段代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-17T16:24:15.753

我知道我为时已晚，但是如果您正在寻找纯 JavaScript 实现，这可能会起作用：

```
tooltip:{formatter:function(){
            const selectedFormat = document.getElementById("dateFormat").value;
            const finalDate = Highcharts.dateFormat(selectedFormat, this.x);
            return finalDate;
        }
} 
```

[http://jsfiddle.net/527moaLs/](http://jsfiddle.net/527moaLs/)

我想你可以自己找到解决方案的其余部分

# javascript - Javascript：在正则表达式字符串中找到测试单个字符

> ID：11010696
> 
> 赞同：0
> 
> 时间：2012-06-13T08:12:16.553
> 
> 标签：javascript, regex

我一开始就承认我不喜欢并且并不真正理解正则表达式。我想检查单个字符`ch`是否是一组可接受的字符之一。我认为这应该有效，但它没有：

```
if (/aCcehIikmNnOoprSstxYy/.test(ch)) { 
```

我究竟做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T08:13:31.443

您需要将字符集包含在 [ ] 中：

```
if (/[aCcehIikmNnOoprSstxYy]/.test(ch)) { 
```

没有它，您将尝试匹配整个字符串“aCcehIikmNnOoprSstxYy”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T08:21:42.673

我认为这可以在没有正则表达式的情况下解决：

```
var characters = "aCcehIikmNnOoprSstxYy";
var allowed    = characters.indexOf("C") != -1;

if (allowed) {
  // do something here
} 
```

如果字符不在字符串中，则 String.indexOf() 返回 -1，否则返回正数。

# php - php链接到带有奇怪字符的系统文件名

> ID：11010697
> 
> 赞同：1
> 
> 时间：2012-06-13T08:12:17.483
> 
> 标签：php, special-characters, filenames, urlencode

我正在尝试在操作系统文件系统中显示具有奇怪字符的图像。我认为操作系统是 CentOS Linux。我不确定操作系统文件名有什么字符编码，或者“ö”是否总是在文件名中以相同的方式编码。至少该文件夹中包含“ö”的文件在下面的代码中在 src 中转换为 %F6，但浏览器找不到该文件。我发现无法浏览到服务器上的这些 ö 文件。

```
$content = '';
$images = scandir("gallery/test");
foreach( $images as $im )
{
        $im_rurl = rawurlencode($im);
        if ( is_dir("gallery/$im") ) continue;
        $content .= "<img src='gallery/test/$im_rurl' />";
}
echo $content; 
```

你能帮我从浏览器访问这些文件吗？

# c - c 套接字服务器响应

> ID：11010700
> 
> 赞同：1
> 
> 时间：2012-06-13T08:12:22.520
> 
> 标签：c, sockets, fork

这是我的带有 fork 的套接字服务器：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <sys/types.h>
#include <netdb.h>

void do_child(int sock);

int main(int argc, char *argv[]){
    if(argc != 2){
        perror("./server <numero porta>\n");
        exit(1);
    }
    pid_t pid;
    int DescrittoreServer, DescrittoreClient, LunghezzaClient;
    int NumPorta = atoi(argv[1]);
    struct sockaddr_in serv_addr, cli_addr; /* indirizzo del server e del client */
    char Buffer[1024] = {};
    DescrittoreServer = socket(AF_INET, SOCK_STREAM, 0);
    if(DescrittoreServer < 0){
        perror("Errore: creazione socket\n");
        exit(1);
    }
    bzero((char *) &serv_addr, sizeof(serv_addr)); /* bzero scrive dei null bytes dove specificato per la lunghezza specificata */
    serv_addr.sin_family = AF_INET; /* la famiglia dei protocolli */
    serv_addr.sin_port = htons(NumPorta); /* porta */
    serv_addr.sin_addr.s_addr = INADDR_ANY; /* dato che è un server bisogna associargli l'indirizzo della macchina su cui sta girando */

    if(bind(DescrittoreServer, (struct sockaddr *) &serv_addr, sizeof(serv_addr)) < 0){
        perror("Errore di bind\n");
        close(DescrittoreServer);
        exit(1);
    }
    listen(DescrittoreServer, 5);
    LunghezzaClient = sizeof(cli_addr);
    while(1){
        DescrittoreClient = accept(DescrittoreServer, (struct sockaddr *) &cli_addr, &LunghezzaClient);
        if(DescrittoreClient < 0){
            perror("Errore: non è possibile stabilire la connessione\n");
            close(DescrittoreServer);
            close(DescrittoreClient);
            exit(1);
        }
        pid = fork();
        if(pid < 0){
            perror("Fork error");
            close(DescrittoreServer);
            close(DescrittoreClient);
            exit(1);
        }
        if(pid == 0){
            close(DescrittoreServer);
            do_child(DescrittoreClient);
            exit(0);
        }
        else{
            close(DescrittoreClient);
        }
    }
}

void do_child(int sock){
    int n;
    char Buffer[1024] = {};
    n=read(sock, Buffer, 255);
    if(n < 0){
        perror("Errore nella lettura dalla socket\n");
        exit(1);
    }
    recv(sock, Buffer, sizeof(Buffer), 0);
    printf("Dati ricevuti: %s\n", Buffer);
    strcpy(Buffer, "Dati ricevuti correttamente!");
    send(sock, Buffer, strlen(Buffer)+1, 0);
} 
```

没有分叉服务器和客户端可以完美地工作，但是在我介绍了分叉之后，我从他们那里得到了一个奇怪的行为。
让我们试着解释一下：**没有**
分叉的 行为：客户端发送消息“Ciao sono il client”，服务器给出响应“Dati ricevuti correttamente”。**fork的** 行为：直到我在客户端上按“CTRL-C”（我在 Ubuntu 上）之前什么都不会发生。在我按下 CTRL-C 后，服务器打印来自客户端的消息。 我不明白为什么消息共享不是“按需”，而是仅在我停止客户端或服务器时才 :(

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:22:57.460

在写入之前，您的`do_child()`代码`read`首先来自套接字（然后再`recv`一次），而您的父代码根本不包含套接字写入代码（至少您提供的代码段没有）所以您的`do_child()`函数可能会阻塞而您读取了未发送的数据？？？****

# jquery - jQuery UI Draggable：不恢复到原始位置

> ID：11010701
> 
> 赞同：0
> 
> 时间：2012-06-13T08:12:23.597
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable

我已经在我的网页上启用了拖放表格行（下面的代码）。不幸的是，当我使用`{ revert: invalid }`该行时，它会返回到其原始位置，但有轻微的偏移。它看起来向下和向右大约 5px。当我克隆整个表格行时，这似乎很奇怪。任何人都可以提供任何理由吗？

```
function setupDragDrop(source, target) {
    source.draggable({
        revert: 'invalid',
        opacity: 0.9,
        cursor: 'move',
        helper: function(event) {
            var target = $(event.target).closest('tr');
            var target_children = target.children();

            var clone = target.clone();

            clone.children().width(function(i,val) {
                return target_children.eq(i).width();
            });

            return $('<div class="configbox drag-row"><table class="lanes"></table></div>')
                .find('table').append(clone).end();
        },
        start : function() {
            //this.style.display="none";
        },
        stop: function() {
            //this.style.display="";
        },
        appendTo: 'body'
    });

    target.droppable({
        drop: function(event, ui) {
            $(this).parent().append(ui.draggable);
        },
        accept: source.selector
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:49:06.440

作为一种解决方法，我更改了还原函数以更改原始起始位置以解释奇怪的偏移量，如下所示：

```
revert: function (event, ui) {
    //overwrite original position
    $(this).data("draggable").originalPosition = {
        top: $(this).data("draggable").originalPosition.top - 9,
        left: $(this).data("draggable").originalPosition.left - 9
    };
    return !event;
}, 
```

# c# - 使用 Webclient 的 SharePoint 身份验证

> ID：11010702
> 
> 赞同：2
> 
> 时间：2012-06-13T08:12:28.607
> 
> 标签：c#, sharepoint, webclient

我是 C# 和 .NET 的新手，目前正在为一家相当大的公司开发断链工具。应用程序的要点是检查 Intranet SharePoint 站点。

几周前，我做了一个概念证明。我使用 WebRequest 来获取当前页面的状态并使用

```
 httpReq.Credentials = System.Net.CredentialCache.DefaultNetworkCredentials; 
```

如今，我必须使用 WebClient 进行连接，并且以同样的方式它不再起作用。

我也试过

```
Credentials = System.Net.CredentialCache.DefaultNetworkCredentials, 
```

和

```
Credentials = new System.Net.NetworkCredential(username,password, "domain"), 
```

以及

```
webclient.UseDefaultCredentials = true; 
```

为什么它不适用于网络客户端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:14:17.353

你的证书有效吗？无论如何，添加：

```
ServicePointManager.ServerCertificateValidationCallback = delegate { return true; } 
```

# c# - 如何在 C# 中实现 this[ref object].get

> ID：11010705
> 
> 赞同：2
> 
> 时间：2012-06-13T08:12:30.970
> 
> 标签：c#, com-interop

我必须实现需要这样的属性的 COM 接口：

```
public int this[ref object Key]
{
    get { throw new NotImplementedException(); }
} 
```

此代码由 MSVS 2010 智能生成，无法编译：`ref and out are not valid in this context`

当我使用 Resharper 生成默认实现时，它会生成以下代码：

```
int IMyInterface.get_Item(ref object Key)
{        
} 
```

但是当我编译编译器认为：`'MyClass' does not implement interface member 'IMyInterface.this[ref object].get'`

我该如何解决？

# c# - 在 MySQL 中加密和解密 MD5

> ID：11010707
> 
> 赞同：2
> 
> 时间：2012-06-13T08:12:34.587
> 
> 标签：c#, mysql, md5

我可以使用下面的代码插入一行。

```
USE pmdb;
INSERT INTO md5_tbl (md5_val, username, password) VALUES(MD5('abcdef'), 'usna', MD5('Aa123456')); 
```

当我使用用户名字段选择行时，如何解密或解码密码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T08:16:50.787

首先，MD5 是一种散列算法 = 不可能解密（暴力攻击除外，但是......）

其次，不要使用 MD5 来散列密码，它根本不安全。相反，**至少**使用SHA 系列 + 称为“盐渍”的技术。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-13T08:16:53.027

MD5不能解密，

您应该在数据库中搜索输入密码的 MD5 值进行比较。

```
SELECT * FROM md5_tbl WHERE password = MD5('password') AND username = 'username' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-13T08:14:55.493

MD5 的想法是您不再解密它。而是加密用户提供的密码并将其与存储在表中的值进行比较。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-13T08:17:52.387

哈希不能反转。它不是“加密”。我建议您在[这里](http://www.phpbb.com/kb/article/difference-between-encryption-and-hashing/)查看散列和加密之间区别的解释。

也就是说，我想您正在尝试在登录时检查用户的密码。使用哈希的方式是：

1.  用户输入的哈希密码。

2.  从数据库中检索散列密码。

3.  比较散列（逐字节）——如果它们匹配，则密码是正确的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-13T08:15:06.983

你不能。MD5 不是加密算法，而是散列算法。

您所做的是对新输入的密码进行哈希处理，并将其与存储在数据库中的哈希值进行比较：

```
select *
from md5_tbl
where username = ?username and password = md5(?password) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-13T08:15:17.250

彩虹桌？;-)

MD5 是一种单向散列算法。它不能被“解密”。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-06-13T08:15:50.467

```
select * from md5_tbl where username = 'username' AND password = MD5('password') 
```

不要忘记清理输入以防止 SQL 注入攻击。

如果你想反转MD5，你不能这样做。如果您想加密和解密某些东西，请查看 RSA。

# parsing - Antlr 如何创建代币

> ID：11010711
> 
> 赞同：0
> 
> 时间：2012-06-13T08:12:48.660
> 
> 标签：parsing, antlr

我有以下语法，我想了解为什么输入“a”不匹配。如果删除 parser_a，则输入被接受。此外，如果我删除词法分析器规则 A 中的“b”，它也可以工作。
如果您能解释我的行为，我将不胜感激。

```
grammar SmallTest;
options {
  language = Java;
}
@header {
  package test;
}
@lexer::header {
  package test;
}
start 
    : A EOF;
parser_a 
    : 'a' ;
A 
    : 'a' | 'b' ; 
```

这是我的 Java 代码。另外，如果我发布用于测试语法的代码会有帮助吗？

```
package test;
public class SmallTest {
    public static void main(String[] args) throws RecognitionException {
        CharStream stream = new ANTLRStringStream("a");
        SmallTestLexer lexer = new SmallTestLexer(stream);
        CommonTokenStream tokenStream = new CommonTokenStream(lexer);
        SmallTestParser parser = new SmallTestParser(tokenStream);
        parser.start();
        System.out.println("done");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:36:29.843

这`A : 'a' | 'b'`是 lex 规则，它将用标记 'A' 替换所有 'a' 和 'b'

该规则`parser_a : 'a' ;`将永远不会起作用

你应该写的是

```
start 
    : parser_a EOF;
parser_a 
    : A ;
A 
    : 'a' | 'b' ; 
```

或者干脆

```
start 
    : A EOF;
A 
    : 'a' | 'b' ; 
```

取决于你想做更多的事情。

所以一般的想法是首先对所有内容进行标记，然后在解析器规则中使用标记。上面的语法结合了词法和解析器规则——也许这就是让你感到困惑的地方。

# .net - .net 相当于 visualvm

> ID：11010714
> 
> 赞同：1
> 
> 时间：2012-06-13T08:13:05.743
> 
> 标签：.net, out-of-memory, visualvm

我目前正在利用业余时间在 VB.NET 中开发一个应用程序，并且刚刚收到 [OutOfMemoryException](http://msdn.microsoft.com/en-us/library/system.outofmemoryexception.aspx)。

由于我目前在工作中使用 Java，因此我经常使用[VisualVM](http://visualvm.java.net/)来诊断任何线程/内存问题。

所以我现在想知道，是否存在与 VisualVM 等效的 .NET 或 Visual Studio 2010？理想的免费工具。

刚刚注意到与此类似的线程：

[DotNET 上是否有任何等效的 JVisualVM](https://stackoverflow.com/questions/3217344/is-there-any-equivalent-of-jvisualvm-on-dotnet)

但这并没有给我答案。

提前致谢，

安德斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T08:34:04.757

**不免费**

.NET 内存分析器： http: [//memprofiler.com/](http://memprofiler.com/)

JetBrains dotTrace： http: [//www.jetbrains.com/profiler/download/index.html](http://www.jetbrains.com/profiler/download/index.html)

RedGate ANTS 内存分析器：[http ://www.red-gate.com/products/dotnet-development/ants-memory-profiler/](http://www.red-gate.com/products/dotnet-development/ants-memory-profiler/)

SciTech 内存分析器：[http ://www.scitech.se/](http://www.scitech.se/)

**自由**

MS CLR 探查器：http: [//www.microsoft.com/en-us/download/details.aspx?id=16273](http://www.microsoft.com/en-us/download/details.aspx?id=16273)

我建议您尝试一下，找出最适合您的方法。但就我个人而言，我使用过 RedGate ANTS Profiler，它非常适合我的需求。

# c# - 如何使用 EF 4.x DbContext 生成器获取属性更改通知

> ID：11010718
> 
> 赞同：13
> 
> 时间：2012-06-13T08:13:08.030
> 
> 标签：c#, .net, entity-framework, inotifypropertychanged

我正在使用 Entity Framework 4.3，因此我使用 DbContext Generator 来创建上下文和实体类。

使用默认的 EF 4 代码生成器模板，实体类实现 INotifyPropertyChanged，并且还在属性设置器中添加`Changing`和`Changed`部分方法。

当我使用 EF 4.x DbContext 生成器时，如下图所示，实体类要轻得多，并且不包含任何跟踪属性更改的方法。

![在此处输入图像描述](../Images/41deb1869a4b5247c4eb2fb7fd4168d7.png)

这是一个例子：

```
//------------------------------------------------------------------------------
// <auto-generated>
//    This code was generated from a template.
//
//    Manual changes to this file may cause unexpected behavior in your application.
//    Manual changes to this file will be overwritten if the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

using System;
using System.Collections.Generic;

namespace SomeNamespace
{
    public partial class SomeTable
    {
        public SomeTable()
        {
            this.Children = new HashSet<Child>();
        }

        public long parent_id { get; set; }
        public long id { get; set; }
        public string filename { get; set; }
        public byte[] file_blob { get; set; }

        public virtual Parent Parent { get; set; }
        public virtual ICollection<Child> Children { get; set; }
    }
} 
```

我一定错过了一个重要的难题，但我的搜索没有结果。所以我的问题是：如何使用 EF 4.3 生成包含属性更改通知的类型？

**编辑**

我完全同意@derape 的回答；`.tt`但我很好奇为什么当 EF 4 默认代码生成模板*已经*有钩子时我需要更改文件。我的意思是当绑定到 WPF 时`DependencyProperty`呢？如果没有 INotifyPropertyChanged，命令对一堆对象中的一堆属性所做的更改将不会反映在 UI 中。我错过了什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-30T07:57:04.650

我最近偶然发现了这个问题，我编辑了我的 Entity.tt 以实现以下更改，这是一个快速补丁，但效果很好..

**将以下内容添加到 CodeStringGenerator 类**

```
public string EntityClassOpening(EntityType entity)
{
    return string.Format(
        CultureInfo.InvariantCulture,
        "{0} {1}partial class {2}{3} : {4}",
        Accessibility.ForType(entity),
        _code.SpaceAfter(_code.AbstractOption(entity)),
        _code.Escape(entity),
        _code.StringBefore(" : ", _typeMapper.GetTypeName(entity.BaseType)),
        "INotifyPropertyChanged");
}

public string Property(EdmProperty edmProperty)
{
    return string.Format(
        CultureInfo.InvariantCulture,
        "{0} {1} {2} {{ {3}{6} {4}{5} }}",
        Accessibility.ForProperty(edmProperty),
        _typeMapper.GetTypeName(edmProperty.TypeUsage),
        _code.Escape(edmProperty),
        _code.SpaceAfter(Accessibility.ForGetter(edmProperty)),
        _code.SpaceAfter(Accessibility.ForSetter(edmProperty)),
        "set { _"+_code.Escape(edmProperty).ToLower()+" = value; OnPropertyChanged(\""+_code.Escape(edmProperty)+"\");}",
        "get { return _"+_code.Escape(edmProperty).ToLower()+"; }");

}
public string Private(EdmProperty edmProperty) {
    return string.Format(
        CultureInfo.InvariantCulture,
        "{0} {1} _{2};",
        "private",
        _typeMapper.GetTypeName(edmProperty.TypeUsage),
        _code.Escape(edmProperty).ToLower());

} 
```

**将以下内容添加到生成器**

```
using System.ComponentModel;
<#=codeStringGenerator.EntityClassOpening(entity)#>
{
<#
var propertiesWithDefaultValues = typeMapper.GetPropertiesWithDefaultValues(entity);
var collectionNavigationProperties = typeMapper.GetCollectionNavigationProperties(entity);
var complexProperties = typeMapper.GetComplexProperties(entity);
#>

public event PropertyChangedEventHandler PropertyChanged;
protected virtual void OnPropertyChanged(string propertyName)
{
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
} 
```

**再往下一点**

```
foreach (var edmProperty in simpleProperties)
{
#>
<#=codeStringGenerator.Private(edmProperty)#>
    <#=codeStringGenerator.Property(edmProperty)#>
<#
}

foreach(var complexProperty in complexProperties)
{
#>
<#=codeStringGenerator.Private(complexProperty)#>
    <#=codeStringGenerator.Property(complexProperty)#>
<#
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-05-24T07:40:23.260

我在 Anders 的答案上创建了一个变体，但有以下区别：

*   对 Entity.tt 文件的更改更少
*   为 INotifyPropertyChanged 实现使用基类（便于引入其他常用功能）
*   生成的模型类中的代码布局更清晰

所以我的步骤是：

**为您的模型类创建一个基类以扩展：**

```
public abstract class BaseModel : INotifyPropertyChanged
{
    protected bool SetProperty<T>(ref T storage, T value, [CallerMemberName] String propertyName = null)
    {
        if (object.Equals(storage, value)) return false;

        storage = value;
        this.OnPropertyChanged(propertyName);
        return true;
    }

    public event PropertyChangedEventHandler PropertyChanged;
    protected virtual void OnPropertyChanged(string propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

*感谢 Juan Pable Gomez 提出的改进建议！我喜欢你的改进，即使其他评论者没有:)*

**将 Entity.tt 文件中的 EntityClassOpening 方法更新为以下内容：**

```
public string EntityClassOpening(EntityType entity)
{
    return string.Format(
        CultureInfo.InvariantCulture,
        "{0} {1}partial class {2}{3}",
        Accessibility.ForType(entity),
        _code.SpaceAfter(_code.AbstractOption(entity)),
        _code.Escape(entity),
        _code.StringBefore(" : ", string.IsNullOrEmpty(_typeMapper.GetTypeName(entity.BaseType)) ? "BaseModel" : _typeMapper.GetTypeName(entity.BaseType)));
} 
```

**找到这一行：**

```
<#=Accessibility.ForType(complex)#> partial class <#=code.Escape(complex)#> 
```

**并将其更新为：**

```
<#=Accessibility.ForType(complex)#> partial class <#=code.Escape(complex)#> : BaseModel 
```

*谢谢马诺洛！*

**将 Entity.tt 文件中的 Property 方法更新为以下内容：**

```
public string Property(EdmProperty edmProperty)
{
    return string.Format(
        CultureInfo.InvariantCulture,
        "private {1} {3};\r\n"+
        "\t{0} {1} {2} \r\n" +
        "\t{{ \r\n" +
            "\t\t{4}get {{ return {3}; }} \r\n" +
            "\t\t{5}set {{ SetProperty(ref {3}, value); }} \r\n" + 
        "\t}}\r\n",
        Accessibility.ForProperty(edmProperty),
        _typeMapper.GetTypeName(edmProperty.TypeUsage),
        _code.Escape(edmProperty),
        "_" + Char.ToLowerInvariant(_code.Escape(edmProperty)[0]) + _code.Escape(edmProperty).Substring(1),
        _code.SpaceAfter(Accessibility.ForGetter(edmProperty)),
        _code.SpaceAfter(Accessibility.ForSetter(edmProperty)));
} 
```

**你完成了！现在您的模型类将如下所示：**

```
public partial class User : BaseModel
{
    private int _id;
    public int Id 
    { 
        get { return _id; } 
        set { SetProperty(ref _id,value);}
    }

    private string _name;
    public string Name 
    { 
        get { return _name; } 
        set { SetProperty(ref _name , value); }
    } 
```

如果您可以看到其他改进，请随时（尝试）编辑此解决方案。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-12-21T14:15:14.707

我试图编辑**Brian Hinchey 解决方案**但 EDIT 被拒绝。然后我在这里发布我对它的添加。

此解决方案利用**CallerMemberName Attribute**为每个属性 Setter 生成较少的代码。

**注意：**我使用的是 EF 6.1，它运行良好。

BaseClass 现在看起来像这样。

```
public abstract class BaseModel : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    protected bool SetProperty<T>(ref T storage, T value, [CallerMemberName] String propertyName = null)
    {
        if (object.Equals(storage, value)) return false;

        storage = value;
        this.OnPropertyChanged(propertyName);
        return true;
    }

    protected void OnPropertyChanged([CallerMemberName] string propertyName = null)
    {
        var eventHandler = this.PropertyChanged;
        if (eventHandler != null)
        {
            eventHandler(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

**更新 Entity.tt 中的 EntityClassOpening 方法与 Brian 的完全一样：**

```
public string EntityClassOpening(EntityType entity)
{
    return string.Format(
        CultureInfo.InvariantCulture,
        "{0} {1}partial class {2}{3}",
        Accessibility.ForType(entity),
        _code.SpaceAfter(_code.AbstractOption(entity)),
        _code.Escape(entity),
        _code.StringBefore(" : ", string.IsNullOrEmpty(_typeMapper.GetTypeName(entity.BaseType)) ? "BaseModel" : _typeMapper.GetTypeName(entity.BaseType)));
} 
```

正如布莱恩所说的记住改变：

```
<#=Accessibility.ForType(complex)#> partial class <#=code.Escape(complex)#>
FOR 
<#=Accessibility.ForType(complex)#> partial class <#=code.Escape(complex)#> : BaseModel 
```

我的最后一个更改是针对**Property 方法**

```
public string Property(EdmProperty edmProperty)
{
    return string.Format(
        CultureInfo.InvariantCulture,
        "private {1} {3};\r\n"+
        "\t{0} {1} {2} \r\n" +
        "\t{{ \r\n" +
            "\t\t{4}get {{ return {3}; }} \r\n" +
            "\t\t{5}set {{ SetProperty(ref {3}, value); }} \r\n" + 
        "\t}}\r\n",
        Accessibility.ForProperty(edmProperty),
        _typeMapper.GetTypeName(edmProperty.TypeUsage),
        _code.Escape(edmProperty),
        "_" + Char.ToLowerInvariant(_code.Escape(edmProperty)[0]) + _code.Escape(edmProperty).Substring(1),
        _code.SpaceAfter(Accessibility.ForGetter(edmProperty)),
        _code.SpaceAfter(Accessibility.ForSetter(edmProperty)));
} 
```

最后是这个类的样子：

```
public partial class User : BaseModel
{
    private int _id;
    public int Id 
    { 
        get { return _id; } 
        set { SetProperty(ref _id , value);} 
    }

    private string _name;
    public string Name 
    { 
        get { return _name; } 
        set { SetProperty(ref _name , value);}
    } 
} 
```

这使得生成的类更轻。

最近我正在使用**PropertyChanged.Fody**库，但由于未知原因（至少对我而言）它有时无法正常工作。这就是我来到这里的原因。这个解决方案（布莱恩的解决方案）每次都有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T03:52:02.723

上面安德斯的解决方案有效，但是我在此过程中发现了一些问题：

在第 1 步中“将以下内容添加到 CodeStringGenerator 类”中，只能添加“public string Private(...”函数，因为其他两个已经存在。因此，您需要找到它们并替换这两个函数不要添加它们，否则会出错。要准确找到需要放置它们的位置，请搜索“public class CodeStringGenerator”，然后查找其下方的函数。

在第 2 步“将以下内容添加到生成器”中，您只需添加“使用 System.ComponentModel”行，以及来自（包括）“公共事件 PropertyChangedEventHandler...”的行。同样，其他行已经存在，您会在 .tt 文件的顶部附近找到它们。

在第 3 步“再往下一点”中，这两个“foreach”循环也已经存在，因此必须替换它们而不是添加它们。最终，每个 foreach 循环只添加一行，分别在每个循环中添加“<#=codeStringGenerator.Private(edmProperty)#>”和“<#=codeStringGenerator.Private(complexProperty)#>”。

另外，不要替换错误的循环，在您需要替换的循环之上还有两个额外的循环，它们都循环通过相同的对象...确保替换正确的循环:-)

我想我会提到这一点，因为作为 MVVM / EF 新手（曾经使用 NHibernate），我必须进行这些调整才能使其正常工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-05T13:24:39.537

我创建了以下与 EF 6.1.2 一起使用，但测试相当有限，因此使用风险自负。

```
<#@ template language="C#" debug="false" hostspecific="true"#>
<#@ include file="EF6.Utility.CS.ttinclude"#><#@ 
 output extension=".cs"#><#

const string inputFile = @"Model.edmx";
var textTransform = DynamicTextTransformation.Create(this);
var code = new CodeGenerationTools(this);
var ef = new MetadataTools(this);
var typeMapper = new TypeMapper(code, ef, textTransform.Errors);
var fileManager = EntityFrameworkTemplateFileManager.Create(this);
var itemCollection = new EdmMetadataLoader(textTransform.Host, textTransform.Errors).CreateEdmItemCollection(inputFile);
var codeStringGenerator = new CodeStringGenerator(code, typeMapper, ef);

if (!typeMapper.VerifyCaseInsensitiveTypeUniqueness(typeMapper.GetAllGlobalItems(itemCollection), inputFile))
{
    return string.Empty;
}

WriteHeader(codeStringGenerator, fileManager);

foreach (var entity in typeMapper.GetItemsToGenerate<EntityType>(itemCollection))
{
    fileManager.StartNewFile(entity.Name + ".cs");
    BeginNamespace(code);
#>
<#=codeStringGenerator.UsingDirectives(inHeader: false)#>
<#=codeStringGenerator.EntityClassOpening(entity)#>
{
<#
    var propertiesWithDefaultValues = typeMapper.GetPropertiesWithDefaultValues(entity);
    var collectionNavigationProperties = typeMapper.GetCollectionNavigationProperties(entity);
    var complexProperties = typeMapper.GetComplexProperties(entity);

    if (propertiesWithDefaultValues.Any() || collectionNavigationProperties.Any() || complexProperties.Any())
    {
#>
    [System.Diagnostics.CodeAnalysis.SuppressMessage("Microsoft.Usage", "CA2214:DoNotCallOverridableMethodsInConstructors")]
    public <#=code.Escape(entity)#>()
    {
<#
        foreach (var edmProperty in propertiesWithDefaultValues)
        {
#>
        this.<#=code.Escape(edmProperty)#> = <#=typeMapper.CreateLiteral(edmProperty.DefaultValue)#>;
<#
        }

        foreach (var navigationProperty in collectionNavigationProperties)
        {
#>
        this.<#=code.Escape(navigationProperty)#> = new HashSet<<#=typeMapper.GetTypeName(navigationProperty.ToEndMember.GetEntityType())#>>();
<#
        }

        foreach (var complexProperty in complexProperties)
        {
#>
        this.<#=code.Escape(complexProperty)#> = new <#=typeMapper.GetTypeName(complexProperty.TypeUsage)#>();
<#
        }
#>
    }

<#
    }

    var simpleProperties = typeMapper.GetSimpleProperties(entity);
    if (simpleProperties.Any())
    {
        foreach (var edmProperty in simpleProperties)
        {
#>
    <#=codeStringGenerator.Property(edmProperty)#>
<#
        }
    }

    if (complexProperties.Any())
    {
#>

<#
        foreach(var complexProperty in complexProperties)
        {
#>
    <#=codeStringGenerator.Property(complexProperty)#>
<#
        }
    }

    var navigationProperties = typeMapper.GetNavigationProperties(entity);
    if (navigationProperties.Any())
    {
#>

<#
        foreach (var navigationProperty in navigationProperties)
        {
            if (navigationProperty.ToEndMember.RelationshipMultiplicity == RelationshipMultiplicity.Many)
            {
#>
    [System.Diagnostics.CodeAnalysis.SuppressMessage("Microsoft.Usage", "CA2227:CollectionPropertiesShouldBeReadOnly")]
<#
            }
#>
    <#=codeStringGenerator.NavigationProperty(navigationProperty)#>
<#
        }
    }
#>

    #region INotifyPropertyChanged Members
    public event PropertyChangedEventHandler PropertyChanged;

    protected void OnPropertyChanged(string propertyName)
    {
        OnPropertyChanged(new PropertyChangedEventArgs(propertyName));
    }

    protected virtual void OnPropertyChanged(PropertyChangedEventArgs e)
    {
        WhenPropertyChanged(e);

        if (PropertyChanged != null)
        {
            PropertyChanged(this, e);
        }
    }

    partial void WhenPropertyChanged(PropertyChangedEventArgs e);
    #endregion
}
<#
    EndNamespace(code);
}

foreach (var complex in typeMapper.GetItemsToGenerate<ComplexType>(itemCollection))
{
    fileManager.StartNewFile(complex.Name + ".cs");
    BeginNamespace(code);
#>
<#=codeStringGenerator.UsingDirectives(inHeader: false, includeCollections: false)#>
<#=Accessibility.ForType(complex)#> partial class <#=code.Escape(complex)#>
{
<#
    var complexProperties = typeMapper.GetComplexProperties(complex);
    var propertiesWithDefaultValues = typeMapper.GetPropertiesWithDefaultValues(complex);

    if (propertiesWithDefaultValues.Any() || complexProperties.Any())
    {
#>
    public <#=code.Escape(complex)#>()
    {
<#
        foreach (var edmProperty in propertiesWithDefaultValues)
        {
#>
        this.<#=code.Escape(edmProperty)#> = <#=typeMapper.CreateLiteral(edmProperty.DefaultValue)#>;
<#
        }

        foreach (var complexProperty in complexProperties)
        {
#>
        this.<#=code.Escape(complexProperty)#> = new <#=typeMapper.GetTypeName(complexProperty.TypeUsage)#>();
<#
        }
#>
    }

<#
    }

    var simpleProperties = typeMapper.GetSimpleProperties(complex);
    if (simpleProperties.Any())
    {
        foreach(var edmProperty in simpleProperties)
        {
#>
    <#=codeStringGenerator.Property(edmProperty)#>
<#
        }
    }

    if (complexProperties.Any())
    {
#>

<#
        foreach(var edmProperty in complexProperties)
        {
#>
    <#=codeStringGenerator.Property(edmProperty)#>
<#
        }
    }
#>
}
<#
    EndNamespace(code);
}

foreach (var enumType in typeMapper.GetEnumItemsToGenerate(itemCollection))
{
    fileManager.StartNewFile(enumType.Name + ".cs");
    BeginNamespace(code);
#>
<#=codeStringGenerator.UsingDirectives(inHeader: false, includeCollections: false)#>
<#
    if (typeMapper.EnumIsFlags(enumType))
    {
#>
[Flags]
<#
    }
#>
<#=codeStringGenerator.EnumOpening(enumType)#>
{
<#
    var foundOne = false;

    foreach (MetadataItem member in typeMapper.GetEnumMembers(enumType))
    {
        foundOne = true;
#>
    <#=code.Escape(typeMapper.GetEnumMemberName(member))#> = <#=typeMapper.GetEnumMemberValue(member)#>,
<#
    }

    if (foundOne)
    {
        this.GenerationEnvironment.Remove(this.GenerationEnvironment.Length - 3, 1);
    }
#>
}
<#
    EndNamespace(code);
}

fileManager.Process();

#>
<#+

public void WriteHeader(CodeStringGenerator codeStringGenerator, EntityFrameworkTemplateFileManager fileManager)
{
    fileManager.StartHeader();
#>
//------------------------------------------------------------------------------
// <auto-generated>
// <#=CodeGenerationTools.GetResourceString("Template_GeneratedCodeCommentLine1")#>
//
// <#=CodeGenerationTools.GetResourceString("Template_GeneratedCodeCommentLine2")#>
// <#=CodeGenerationTools.GetResourceString("Template_GeneratedCodeCommentLine3")#>
// </auto-generated>
//------------------------------------------------------------------------------
<#=codeStringGenerator.UsingDirectives(inHeader: true)#>
<#+
    fileManager.EndBlock();
}

public void BeginNamespace(CodeGenerationTools code)
{
    var codeNamespace = code.VsNamespaceSuggestion();
    if (!String.IsNullOrEmpty(codeNamespace))
    {
#>
namespace <#=code.EscapeNamespace(codeNamespace)#>
{
<#+
        PushIndent("    ");
    }
}

public void EndNamespace(CodeGenerationTools code)
{
    if (!String.IsNullOrEmpty(code.VsNamespaceSuggestion()))
    {
        PopIndent();
#>
}
<#+
    }
}

public const string TemplateId = "CSharp_DbContext_Types_EF6";

public class CodeStringGenerator
{
    private readonly CodeGenerationTools _code;
    private readonly TypeMapper _typeMapper;
    private readonly MetadataTools _ef;

    public CodeStringGenerator(CodeGenerationTools code, TypeMapper typeMapper, MetadataTools ef)
    {
        ArgumentNotNull(code, "code");
        ArgumentNotNull(typeMapper, "typeMapper");
        ArgumentNotNull(ef, "ef");

        _code = code;
        _typeMapper = typeMapper;
        _ef = ef;
    }

    public string Property(EdmProperty edmProperty)
    {
        StringBuilder propertyCode = new StringBuilder();
        propertyCode.AppendFormat("private {0} _{1};",_typeMapper.GetTypeName(edmProperty.TypeUsage), _code.Escape(edmProperty));
        propertyCode.AppendFormat(
            CultureInfo.InvariantCulture,
            "{0} {1} {2} {{ {3}get{{ return _{2};}} {4}set{{if(_{2} != value){{_{2} = value; OnPropertyChanged(\"{2}\");}}}}}}",
            Accessibility.ForProperty(edmProperty),
            _typeMapper.GetTypeName(edmProperty.TypeUsage),
            _code.Escape(edmProperty),
            _code.SpaceAfter(Accessibility.ForGetter(edmProperty)),
            _code.SpaceAfter(Accessibility.ForSetter(edmProperty)));

        return propertyCode.ToString();
    }

    public string NavigationProperty(NavigationProperty navProp)
    {
        var endType = _typeMapper.GetTypeName(navProp.ToEndMember.GetEntityType());
        return string.Format(
            CultureInfo.InvariantCulture,
            "{0} {1} {2} {{ {3}get; {4}set; }}",
            AccessibilityAndVirtual(Accessibility.ForNavigationProperty(navProp)),
            navProp.ToEndMember.RelationshipMultiplicity == RelationshipMultiplicity.Many ? ("ICollection<" + endType + ">") : endType,
            _code.Escape(navProp),
            _code.SpaceAfter(Accessibility.ForGetter(navProp)),
            _code.SpaceAfter(Accessibility.ForSetter(navProp)));
    }

    public string AccessibilityAndVirtual(string accessibility)
    {
        return accessibility + (accessibility != "private" ? " virtual" : "");
    }

    public string EntityClassOpening(EntityType entity)
    {
        return string.Format(
            CultureInfo.InvariantCulture,
            "{0} {1}partial class {2} : INotifyPropertyChanged{3}",
            Accessibility.ForType(entity),
            _code.SpaceAfter(_code.AbstractOption(entity)),
            _code.Escape(entity),
            _code.StringBefore(", ", _typeMapper.GetTypeName(entity.BaseType)));
    }

    public string EnumOpening(SimpleType enumType)
    {
        return string.Format(
            CultureInfo.InvariantCulture,
            "{0} enum {1} : {2}",
            Accessibility.ForType(enumType),
            _code.Escape(enumType),
            _code.Escape(_typeMapper.UnderlyingClrType(enumType)));
        }

    public void WriteFunctionParameters(EdmFunction edmFunction, Action<string, string, string, string> writeParameter)
    {
        var parameters = FunctionImportParameter.Create(edmFunction.Parameters, _code, _ef);
        foreach (var parameter in parameters.Where(p => p.NeedsLocalVariable))
        {
            var isNotNull = parameter.IsNullableOfT ? parameter.FunctionParameterName + ".HasValue" : parameter.FunctionParameterName + " != null";
            var notNullInit = "new ObjectParameter(\"" + parameter.EsqlParameterName + "\", " + parameter.FunctionParameterName + ")";
            var nullInit = "new ObjectParameter(\"" + parameter.EsqlParameterName + "\", typeof(" + TypeMapper.FixNamespaces(parameter.RawClrTypeName) + "))";
            writeParameter(parameter.LocalVariableName, isNotNull, notNullInit, nullInit);
        }
    }

    public string ComposableFunctionMethod(EdmFunction edmFunction, string modelNamespace)
    {
        var parameters = _typeMapper.GetParameters(edmFunction);

        return string.Format(
            CultureInfo.InvariantCulture,
            "{0} IQueryable<{1}> {2}({3})",
            AccessibilityAndVirtual(Accessibility.ForMethod(edmFunction)),
            _typeMapper.GetTypeName(_typeMapper.GetReturnType(edmFunction), modelNamespace),
            _code.Escape(edmFunction),
            string.Join(", ", parameters.Select(p => TypeMapper.FixNamespaces(p.FunctionParameterType) + " " + p.FunctionParameterName).ToArray()));
    }

    public string ComposableCreateQuery(EdmFunction edmFunction, string modelNamespace)
    {
        var parameters = _typeMapper.GetParameters(edmFunction);

        return string.Format(
            CultureInfo.InvariantCulture,
            "return ((IObjectContextAdapter)this).ObjectContext.CreateQuery<{0}>(\"[{1}].[{2}]({3})\"{4});",
            _typeMapper.GetTypeName(_typeMapper.GetReturnType(edmFunction), modelNamespace),
            edmFunction.NamespaceName,
            edmFunction.Name,
            string.Join(", ", parameters.Select(p => "@" + p.EsqlParameterName).ToArray()),
            _code.StringBefore(", ", string.Join(", ", parameters.Select(p => p.ExecuteParameterName).ToArray())));
    }

    public string FunctionMethod(EdmFunction edmFunction, string modelNamespace, bool includeMergeOption)
    {
        var parameters = _typeMapper.GetParameters(edmFunction);
        var returnType = _typeMapper.GetReturnType(edmFunction);

        var paramList = String.Join(", ", parameters.Select(p => TypeMapper.FixNamespaces(p.FunctionParameterType) + " " + p.FunctionParameterName).ToArray());
        if (includeMergeOption)
        {
            paramList = _code.StringAfter(paramList, ", ") + "MergeOption mergeOption";
        }

        return string.Format(
            CultureInfo.InvariantCulture,
            "{0} {1} {2}({3})",
            AccessibilityAndVirtual(Accessibility.ForMethod(edmFunction)),
            returnType == null ? "int" : "ObjectResult<" + _typeMapper.GetTypeName(returnType, modelNamespace) + ">",
            _code.Escape(edmFunction),
            paramList);
    }

    public string ExecuteFunction(EdmFunction edmFunction, string modelNamespace, bool includeMergeOption)
    {
        var parameters = _typeMapper.GetParameters(edmFunction);
        var returnType = _typeMapper.GetReturnType(edmFunction);

        var callParams = _code.StringBefore(", ", String.Join(", ", parameters.Select(p => p.ExecuteParameterName).ToArray()));
        if (includeMergeOption)
        {
            callParams = ", mergeOption" + callParams;
        }

        return string.Format(
            CultureInfo.InvariantCulture,
            "return ((IObjectContextAdapter)this).ObjectContext.ExecuteFunction{0}(\"{1}\"{2});",
            returnType == null ? "" : "<" + _typeMapper.GetTypeName(returnType, modelNamespace) + ">",
            edmFunction.Name,
            callParams);
    }

    public string DbSet(EntitySet entitySet)
    {
        return string.Format(
            CultureInfo.InvariantCulture,
            "{0} virtual DbSet<{1}> {2} {{ get; set; }}",
            Accessibility.ForReadOnlyProperty(entitySet),
            _typeMapper.GetTypeName(entitySet.ElementType),
            _code.Escape(entitySet));
    }

    public string UsingDirectives(bool inHeader, bool includeCollections = true)
    {
        return inHeader == string.IsNullOrEmpty(_code.VsNamespaceSuggestion())
            ? string.Format(
                CultureInfo.InvariantCulture,
                "{0}using System;" + Environment.NewLine + 
                "using System.ComponentModel;{1}" +
                "{2}",
                inHeader ? Environment.NewLine : "",
                includeCollections ? (Environment.NewLine + "using System.Collections.Generic;") : "",
                inHeader ? "" : Environment.NewLine)
            : "";
    }
}

public class TypeMapper
{
    private const string ExternalTypeNameAttributeName = @"http://schemas.microsoft.com/ado/2006/04/codegeneration:ExternalTypeName";

    private readonly System.Collections.IList _errors;
    private readonly CodeGenerationTools _code;
    private readonly MetadataTools _ef;

    public TypeMapper(CodeGenerationTools code, MetadataTools ef, System.Collections.IList errors)
    {
        ArgumentNotNull(code, "code");
        ArgumentNotNull(ef, "ef");
        ArgumentNotNull(errors, "errors");

        _code = code;
        _ef = ef;
        _errors = errors;
    }

    public static string FixNamespaces(string typeName)
    {
        return typeName.Replace("System.Data.Spatial.", "System.Data.Entity.Spatial.");
    }

    public string GetTypeName(TypeUsage typeUsage)
    {
        return typeUsage == null ? null : GetTypeName(typeUsage.EdmType, _ef.IsNullable(typeUsage), modelNamespace: null);
    }

    public string GetTypeName(EdmType edmType)
    {
        return GetTypeName(edmType, isNullable: null, modelNamespace: null);
    }

    public string GetTypeName(TypeUsage typeUsage, string modelNamespace)
    {
        return typeUsage == null ? null : GetTypeName(typeUsage.EdmType, _ef.IsNullable(typeUsage), modelNamespace);
    }

    public string GetTypeName(EdmType edmType, string modelNamespace)
    {
        return GetTypeName(edmType, isNullable: null, modelNamespace: modelNamespace);
    }

    public string GetTypeName(EdmType edmType, bool? isNullable, string modelNamespace)
    {
        if (edmType == null)
        {
            return null;
        }

        var collectionType = edmType as CollectionType;
        if (collectionType != null)
        {
            return String.Format(CultureInfo.InvariantCulture, "ICollection<{0}>", GetTypeName(collectionType.TypeUsage, modelNamespace));
        }

        var typeName = _code.Escape(edmType.MetadataProperties
                                .Where(p => p.Name == ExternalTypeNameAttributeName)
                                .Select(p => (string)p.Value)
                                .FirstOrDefault())
            ?? (modelNamespace != null && edmType.NamespaceName != modelNamespace ?
                _code.CreateFullName(_code.EscapeNamespace(edmType.NamespaceName), _code.Escape(edmType)) :
                _code.Escape(edmType));

        if (edmType is StructuralType)
        {
            return typeName;
        }

        if (edmType is SimpleType)
        {
            var clrType = UnderlyingClrType(edmType);
            if (!IsEnumType(edmType))
            {
                typeName = _code.Escape(clrType);
            }

            typeName = FixNamespaces(typeName);

            return clrType.IsValueType && isNullable == true ?
                String.Format(CultureInfo.InvariantCulture, "Nullable<{0}>", typeName) :
                typeName;
        }

        throw new ArgumentException("edmType");
    }

    public Type UnderlyingClrType(EdmType edmType)
    {
        ArgumentNotNull(edmType, "edmType");

        var primitiveType = edmType as PrimitiveType;
        if (primitiveType != null)
        {
            return primitiveType.ClrEquivalentType;
        }

        if (IsEnumType(edmType))
        {
            return GetEnumUnderlyingType(edmType).ClrEquivalentType;
        }

        return typeof(object);
    }

    public object GetEnumMemberValue(MetadataItem enumMember)
    {
        ArgumentNotNull(enumMember, "enumMember");

        var valueProperty = enumMember.GetType().GetProperty("Value");
        return valueProperty == null ? null : valueProperty.GetValue(enumMember, null);
    }

    public string GetEnumMemberName(MetadataItem enumMember)
    {
        ArgumentNotNull(enumMember, "enumMember");

        var nameProperty = enumMember.GetType().GetProperty("Name");
        return nameProperty == null ? null : (string)nameProperty.GetValue(enumMember, null);
    }

    public System.Collections.IEnumerable GetEnumMembers(EdmType enumType)
    {
        ArgumentNotNull(enumType, "enumType");

        var membersProperty = enumType.GetType().GetProperty("Members");
        return membersProperty != null 
            ? (System.Collections.IEnumerable)membersProperty.GetValue(enumType, null)
            : Enumerable.Empty<MetadataItem>();
    }

    public bool EnumIsFlags(EdmType enumType)
    {
        ArgumentNotNull(enumType, "enumType");

        var isFlagsProperty = enumType.GetType().GetProperty("IsFlags");
        return isFlagsProperty != null && (bool)isFlagsProperty.GetValue(enumType, null);
    }

    public bool IsEnumType(GlobalItem edmType)
    {
        ArgumentNotNull(edmType, "edmType");

        return edmType.GetType().Name == "EnumType";
    }

    public PrimitiveType GetEnumUnderlyingType(EdmType enumType)
    {
        ArgumentNotNull(enumType, "enumType");

        return (PrimitiveType)enumType.GetType().GetProperty("UnderlyingType").GetValue(enumType, null);
    }

    public string CreateLiteral(object value)
    {
        if (value == null || value.GetType() != typeof(TimeSpan))
        {
            return _code.CreateLiteral(value);
        }

        return string.Format(CultureInfo.InvariantCulture, "new TimeSpan({0})", ((TimeSpan)value).Ticks);
    }

    public bool VerifyCaseInsensitiveTypeUniqueness(IEnumerable<string> types, string sourceFile)
    {
        ArgumentNotNull(types, "types");
        ArgumentNotNull(sourceFile, "sourceFile");

        var hash = new HashSet<string>(StringComparer.InvariantCultureIgnoreCase);
        if (types.Any(item => !hash.Add(item)))
        {
            _errors.Add(
                new CompilerError(sourceFile, -1, -1, "6023",
                    String.Format(CultureInfo.CurrentCulture, CodeGenerationTools.GetResourceString("Template_CaseInsensitiveTypeConflict"))));
            return false;
        }
        return true;
    }

    public IEnumerable<SimpleType> GetEnumItemsToGenerate(IEnumerable<GlobalItem> itemCollection)
    {
        return GetItemsToGenerate<SimpleType>(itemCollection)
            .Where(e => IsEnumType(e));
    }

    public IEnumerable<T> GetItemsToGenerate<T>(IEnumerable<GlobalItem> itemCollection) where T: EdmType
    {
        return itemCollection
            .OfType<T>()
            .Where(i => !i.MetadataProperties.Any(p => p.Name == ExternalTypeNameAttributeName))
            .OrderBy(i => i.Name);
    }

    public IEnumerable<string> GetAllGlobalItems(IEnumerable<GlobalItem> itemCollection)
    {
        return itemCollection
            .Where(i => i is EntityType || i is ComplexType || i is EntityContainer || IsEnumType(i))
            .Select(g => GetGlobalItemName(g));
    }

    public string GetGlobalItemName(GlobalItem item)
    {
        if (item is EdmType)
        {
            return ((EdmType)item).Name;
        }
        else
        {
            return ((EntityContainer)item).Name;
        }
    }

    public IEnumerable<EdmProperty> GetSimpleProperties(EntityType type)
    {
        return type.Properties.Where(p => p.TypeUsage.EdmType is SimpleType && p.DeclaringType == type);
    }

    public IEnumerable<EdmProperty> GetSimpleProperties(ComplexType type)
    {
        return type.Properties.Where(p => p.TypeUsage.EdmType is SimpleType && p.DeclaringType == type);
    }

    public IEnumerable<EdmProperty> GetComplexProperties(EntityType type)
    {
        return type.Properties.Where(p => p.TypeUsage.EdmType is ComplexType && p.DeclaringType == type);
    }

    public IEnumerable<EdmProperty> GetComplexProperties(ComplexType type)
    {
        return type.Properties.Where(p => p.TypeUsage.EdmType is ComplexType && p.DeclaringType == type);
    }

    public IEnumerable<EdmProperty> GetPropertiesWithDefaultValues(EntityType type)
    {
        return type.Properties.Where(p => p.TypeUsage.EdmType is SimpleType && p.DeclaringType == type && p.DefaultValue != null);
    }

    public IEnumerable<EdmProperty> GetPropertiesWithDefaultValues(ComplexType type)
    {
        return type.Properties.Where(p => p.TypeUsage.EdmType is SimpleType && p.DeclaringType == type && p.DefaultValue != null);
    }

    public IEnumerable<NavigationProperty> GetNavigationProperties(EntityType type)
    {
        return type.NavigationProperties.Where(np => np.DeclaringType == type);
    }

    public IEnumerable<NavigationProperty> GetCollectionNavigationProperties(EntityType type)
    {
        return type.NavigationProperties.Where(np => np.DeclaringType == type && np.ToEndMember.RelationshipMultiplicity == RelationshipMultiplicity.Many);
    }

    public FunctionParameter GetReturnParameter(EdmFunction edmFunction)
    {
        ArgumentNotNull(edmFunction, "edmFunction");

        var returnParamsProperty = edmFunction.GetType().GetProperty("ReturnParameters");
        return returnParamsProperty == null
            ? edmFunction.ReturnParameter
            : ((IEnumerable<FunctionParameter>)returnParamsProperty.GetValue(edmFunction, null)).FirstOrDefault();
    }

    public bool IsComposable(EdmFunction edmFunction)
    {
        ArgumentNotNull(edmFunction, "edmFunction");

        var isComposableProperty = edmFunction.GetType().GetProperty("IsComposableAttribute");
        return isComposableProperty != null && (bool)isComposableProperty.GetValue(edmFunction, null);
    }

    public IEnumerable<FunctionImportParameter> GetParameters(EdmFunction edmFunction)
    {
        return FunctionImportParameter.Create(edmFunction.Parameters, _code, _ef);
    }

    public TypeUsage GetReturnType(EdmFunction edmFunction)
    {
        var returnParam = GetReturnParameter(edmFunction);
        return returnParam == null ? null : _ef.GetElementType(returnParam.TypeUsage);
    }

    public bool GenerateMergeOptionFunction(EdmFunction edmFunction, bool includeMergeOption)
    {
        var returnType = GetReturnType(edmFunction);
        return !includeMergeOption && returnType != null && returnType.EdmType.BuiltInTypeKind == BuiltInTypeKind.EntityType;
    }
}

public static void ArgumentNotNull<T>(T arg, string name) where T : class
{
    if (arg == null)
    {
        throw new ArgumentNullException(name);
    }
}
#> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-13T08:30:56.880

好吧，这取决于您要做什么。如果您只想实现自定义属性/方法，则可以使用部分类的功能。如果您想更改实体设计器中属性的设置器/获取器，则必须调整 dbContext 生成器模板文件。这是一个 T4 模板。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-23T19:39:37.480

我使用 Visual Basic 并倾向于享受重构遗留和非分层架构。

所以，我已经解决了如何使用上面的答案但在实体框架 6.1.3 和 .net 4.6.1 中执行此操作。

我是根据其他人给出的答案翻译的，所以我只能将今晚所做的重新发现和翻译归功于我。

这个项目非常小，它是winforms，我想要数据绑定而不是手动更新控件。我不想通过添加更多分离来增加更多复杂性，因为这里没有足够的好处。这足以证明这一点:)。

我希望它可以帮助其他 VB 编码器。

**基类：**

```
Imports System.ComponentModel
Imports System.Runtime.CompilerServices

Public MustInherit Class BaseModel
    Implements INotifyPropertyChanged
    Protected Function SetProperty(Of T)(ByRef storage As T, value As T, <CallerMemberName> Optional propertyName As String = Nothing) As Boolean
        If Equals(storage, value) Then Return False
        storage = value
        OnPropertyChanged(propertyName)
        Return True
    End Function

    Public Event PropertyChanged As PropertyChangedEventHandler Implements INotifyPropertyChanged.PropertyChanged

    Protected Overridable Sub OnPropertyChanged(propertyName As String)
        RaiseEvent PropertyChanged(Me, New PropertyChangedEventArgs(propertyName))
    End Sub
End Class 
```

**VB TT 文件中不存在公共字符串属性（确保它是 ModelName.tt 而不是 ModelName.Context.tt）。**请注意可空比较的条件使用。如果你没有这个，你就不会让事情火起来！

```
Public Function AnyProperty(accessibility As String, type As String, name As String, getterAccessibility As String, setterAccessibility As String, defaultValue As String)
            Dim CompareLine = if(type.contains("Null"), $"if Not Nullable.Equals({name}, value) ", $"if {name} <> value ")
            Return String.Format( _
                CultureInfo.InvariantCulture, _
                "{6}    Private _{0} As {1}{2}{6}" & _
                "    {3} Property {0} As {1}{6}" & _
                "        {4}Get{6}" & _
                "            Return _{0}{6}" & _
                "        End Get{6}" & _
                "        {5}Set(ByVal value As {1}){6}" & _
                "             {7} then  SetProperty(_{0}, value){6}" & _
                "        End Set{6}" & _
                "    End Property",  _
                name, _
                type, _
                defaultValue, _
                accessibility, _
                getterAccessibility, _
                setterAccessibility, _
                Environment.NewLine,
                CompareLine)
 End Function 
```

**EntityClassOpening**

```
Public Function EntityClassOpening(entity As EntityType) As String
        Return String.Format( _
            CultureInfo.InvariantCulture, _
            "Partial {0} {1}Class {2}{3}", _
            Accessibility.ForType(entity), _
            _code.SpaceAfter(_code.MustInheritOption(entity)), _
            _code.Escape(entity), _
            _code.StringBefore(Environment.Newline & " Inherits ", If(String.IsNullOrEmpty(_typeMapper.GetTypeName(entity.BaseType)), "BaseModel", _typeMapper.GetTypeName(entity.BaseType))))
  End Function 
```

如果我发现有什么重要的补充，我会这样做。

请注意我的用例：轻量级 VB 项目，没有理由引入 MVVM/MVC 和存储库层，但有充分的理由想要数据绑定而不是烦人的条件更新与控件之间 - 其中许多具有类型为 Object 的 EditValue ( Devexpress winforms 控件）。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-04-22T06:17:26.697

如果在直接绑定到数据模型类时需要属性更改通知，则应继续使用 ObjectContext。

轻量级 DBContext 类适用于 MVVM 或 MVVMC 等模式，您的视图模型实现属性更改通知，而您的 UI 仅绑定到视图模型的属性。在这些模式中，您永远不会绑定到数据模型类。

# php - 图片未显示在媒体库中

> ID：11010725
> 
> 赞同：0
> 
> 时间：2012-06-13T08:13:49.253
> 
> 标签：php, wordpress, media

我遇到了与此线程中描述的相同的问题：[Wordpress - Images not displayed in the Media Library](https://stackoverflow.com/questions/8438193/wordpress-images-not-showing-up-in-the-media-library)。唯一的问题是，该线程中描述的解决方案对我不起作用。

我已经尝试过 CHMOD 所有文件，包括“上传”和其下的文件夹/文件。

任何其他建议如何解决这个问题？

编辑：我能够在媒体库中设置图像，但不能在自定义字段和特色图像下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:17:07.263

试一试，使用带有完整 URL 的 Web 浏览器访问该文件。如果您可以使用网络浏览器打开，则没有权限或 CHMOD 问题。这是为了确认许可。

# javascript - 如何从 zend 控制器 indexAction 调用 javascript 函数？

> ID：11010729
> 
> 赞同：0
> 
> 时间：2012-06-13T08:14:11.290
> 
> 标签：javascript, jquery, zend-controller-router

我想从 zend 控制器 indexAction 调用一个 javascript 函数。我的控制器看起来像这样..

// mycontroller.php

```
 public function indexAction(){
         $role = 'admin';
         $id = 23;
      // here i want to call the javascript function 
       /// like myjsfun(role, id);
       } 
```

控制器的 viwefile 是 //index.phtml

```
 here is my javascript function

   <script type='text/javascript'>

   function myjsfun(role, id){
    // code for this function
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:42:07.893

//mycontroller.php

```
$role = 'admin';
$id = 23;

$this->view->role = $role;
$this->view->id = $id; 
```

//index.phtml

```
<script type='text/javascript'>

    function myjsfun(role, id){
        // code for this function
    }

    //actual call:
    myjsfun(<?php echo Zend_Json::encode($this->role) ?>, <?php echo Zend_Json::encode($this->id) ?>);
</script> 
```

# android - Android 9 补丁可绘制对象

> ID：11010731
> 
> 赞同：1
> 
> 时间：2012-06-13T08:14:19.933
> 
> 标签：android, png, nine-patch

一个简单的小问题：是否必须为不同的屏幕分辨率以 4 种不同的尺寸创建 9 个补丁可绘制对象并放置在 [drawables] 中 - ldpi | mdpi | 高清晰度电视 | xhdpi 还是仅一张图像并放置在drawables文件夹中？最好的做法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T08:17:01.477

您不必*以*多种尺寸创建它，但如果这样做可能会更好看，具体取决于图像和您使用它的方式。

增益 9 补丁让您主要处于某些（可能是均匀的）区域的“拉伸”。未拉伸区域仍将受益于多个分辨率版本，就像它们不在 9-patch 中时一样，例如，如果您只有低分辨率 9-patch，它的“细节”区域可能看起来令人不快地缩放在高分辨率屏幕上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T08:17:07.327

基本上不，但是如果您的图像包含无法由**9patch**本身维护的复杂形状，那么您必须创建单独的图像。

# c# - 如何在 C# 应用程序中切换主线程

> ID：11010735
> 
> 赞同：-1
> 
> 时间：2012-06-13T08:14:44.040
> 
> 标签：c#, winforms

如何分离线程？

我首先使用实例运行LoginForm.cs，所以，我在应用程序中的第一个线程是LoginForm.cs文件，但我不想再运行LoginForm.cs的线程，登录成功后，我希望我的应用程序运行主线程MainInterface.cs，意思是，首先Thread运行LoginForm.cs，然后在LoginForm.cs上停止Thread，登录更正后，线程运行在MainInterface.cs中。

我跟着下面的代码，但 LoginForm.cs 仍然是一个主线程：

**主界面.cs**

```
using System;

public class MainInterface : Form
{
   private static MainInterface Current;

   private MainInterface ()
   {
      if ( LoginForm.Instance != null )
         LoginForm.Instance.Close ();
   }

   public static MainInterface Instance
   {
      get 
      {
         if (Current == null)
         {
            Current = new MainInterface ();
         }
         return Current;
      }
   }
 } 
```

**登录表单.cs**

```
using System;

public class LoginForm: Form
{
   private static LoginForm Current;

   private LoginForm ()
   {

      if ( MainInterface.Instance != null )
         MainInterface.Instance.Close ();
   }

   public static LoginForm Instance
   {
      get 
      {
         if (Current == null)
         {
            Current = new LoginForm ();
         }
         return Current;
      }
   }
} 
```

**程序.cs**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Windows.Forms;

namespace Myapp
{
   static class Program
   {
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main()
        {

            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            LoginForm.Instance.ShowDialog ();

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:40:49.533

**程序.cs**

```
using (Login login = new Login())
        { 
            login.ShowDialog(); //Close this form after login is correct in login form button_click
        }
        if (isValiduser == true) //Static variable created in application to check user
        {           
             Application.Run(new MainInterface());

        } 
```

**登录表单**点击事件

```
 private void btnLogin_Click(object sender, EventArgs e)
            {
              if(isValiduser == true)
               {
                  this.Close();
               }
             else
               {
                  //else part code
               }
            } 
```

# javascript - 在子窗口中从父窗口运行 JS 函数？

> ID：11010743
> 
> 赞同：2
> 
> 时间：2012-06-13T08:15:13.470
> 
> 标签：javascript, jquery

想在子窗口中从父窗口运行javascript函数

**例子**

我不得不说不同的`site1.com`网站`site2.com`

我想从`site1.com`打开 URL 的新窗口`site2.com`

```
new_window = window.open("site2.com/index.php", "window2"); 
```

然后我想`test()`在这个 new_window 上运行一个 js 函数。

```
// Where site2.com/index.php 
<html>
    ......
</html>
<script>
   function test(){
    // some code here
   }
</script> 
```

**概括**

想要打开新窗口（子窗口）并从父窗口运行一些 JS 函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T08:42:02.177

您可以使用[跨文档消息传递](http://caniuse.com/#feat=x-doc-messaging)来规避同源策略，如下所示。

父窗口 ( `site1.com`)：

```
var site2 = window.open("http://site2.com");
site2.postMessage("test", "http://site2.com"); 
```

子窗口 ( `site2.com`)：

```
function test() {
    // some code here
}

window.addEventListener("message", function (event) {
    if (event.origin === "http://site1.com") {
        var funct = window[event.data];
        if (typeof funct === "function")
            funct();
    }
}, false); 
```

这是一个简单的例子。您可以使其更复杂，以允许回调、返回值等，但这需要一篇博文进行全面解释。

`window.postMessage`您可以在[Mozilla Developer Network](https://developer.mozilla.org/en/DOM/window.postMessage "window.postMessage - MDN")上阅读更多信息。

但是请注意，以下示例在 Internet Explorer 中不起作用（显然）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T08:23:45.463

你不能，如果出于安全原因，它不在同一个域中，你必须从子窗口运行你的函数。

# php - 根据 id 搜索将值从数据库设置到文本框

> ID：11010746
> 
> 赞同：0
> 
> 时间：2012-06-13T08:15:36.023
> 
> 标签：php, javascript, mysql

请帮我解决这个案子。我在下面有一个代码：

```
<script>
    function getXMLHTTP() {
        var xmlhttp = false;    
        try{
            xmlhttp=new XMLHttpRequest();
        }
        catch(e)
        {
            try{
                xmlhttp= new ActiveXObject("Microsoft.XMLHTTP");
            catch(e){
                try{
                    xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");
                catch(e1){
                    xmlhttp=false;
                }
            }
        }
        return xmlhttp;
    }

    function getCity(url, id1) {
        var req = getXMLHTTP(url);
        if (req) {
            req.onreadystatechange = function() {
                if (req.readyState == 4) {
                    // only if "OK"
                    if (req.status == 200) {
                        document.getElementById(id1).value=req.responseText;    
                        // document.getElementById(id2).value=req.responseText;
                    } else {
                        alert("There was a problem while using XMLHTTP:\n" + req.statusText);
                    }
                }
            }
            req.open("GET", url, true);
            req.send(null);
        }
    }
</script>

<?php       
    echo "
        <tbody>
            <tr>
                <td class='td'><input type='text' size='6' name='kode_barang" ."' maxlength='6' onchange='javascript:this.value=this.value.toUpperCase();' onkeyup='getCity(\"search.php?kode_barang=\"+this.value, \"nama_barang"  . "\",\"harga_barang"  . "\");' id='kode_barang'></td>
                <td class='td'><input type='text' size='22' name='nama_barang"  . "' id='nama_barang" . "' readonly tabindex='1'></td>
                <td class='td'><input type='text' size='22' name='harga_barang"  . "' id='harga_barang" . "' tabindex='1'></td>
        </tbody>
    ";
?> 
```

search.php 文件：

```
include_once('config.php');

if (isset($_GET['kode_barang']))
{
    $qry = "SELECT nama_barang, harga_barang FROM t_barang WHERE kode_barang = '" . $_GET['kode_barang'] . "'";
    $sql = mysql_query($qry);

    $ary = mysql_fetch_array($sql);

    echo $ary['nama_barang'];
    echo $ary['harga_barang'];
} 
```

这是关于如何根据 kode_barang 输入找到 nama_barang 和 harga_barang。例如，如果我在文本框 kode_barang 中输入 kode_barang，那么在 text_box nama_barang 和 harga_barang 将自动设置数据库中的信息。

我已经尝试过这段代码，但它在 1 个文本框 nama_barang 中设置了 2 个信息（nama_barang 和 harga_barang）。应该在每个文本框中设置。

所以，我的问题是：如何将信息 nama_barang 和 harga_barang 从数据库设置到每个文本框？

感谢您的帮助。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:52:27.093

将您的 getCity() 函数替换为以下函数

```
 function getCity(url, id1, id2) {    
        var req = getXMLHTTP(url);
            if (req) {    
            req.onreadystatechange = function() {    
                if (req.readyState == 4) {    
                    // only if "OK"    
                    if (req.status == 200) {
            var res = JSON.parse(req.responseText);    
                        document.getElementById(id1).value=res.nama_barang;      
                        document.getElementById(id2).value=res.harga_barang;    
                    } else {    
                        alert("There was a problem while using XMLHTTP:\n" + req.statusText);    
                    }    
                }    
            }

            req.open("GET", url, true);    
            req.send(null);    
        }    
 } 
```

并替换 search.php 中的部分代码

从

```
$ary = mysql_fetch_array($sql);

echo $ary['nama_barang'];
echo $ary['harga_barang']; 
```

至

```
$ary = mysql_fetch_array($sql);

echo json_encode($ary); 
```

> 问题是，您在 getCity() 函数中缺少第二个文本框的 ID。

## **更新发送默认值**

替换以下部分

```
if (isset($_GET['kode_barang']))
{
    $qry = "SELECT nama_barang, harga_barang FROM t_barang WHERE kode_barang = '" . $_GET['kode_barang'] . "'";
    $sql = mysql_query($qry);

    $ary = mysql_fetch_array($sql);

    echo $ary['nama_barang'];
    echo $ary['harga_barang'];
} 
```

和

```
if (isset($_GET['kode_barang']))
{
    $qry = "SELECT nama_barang, harga_barang FROM t_barang WHERE kode_barang = '" . $_GET['kode_barang'] . "'";
    $sql = mysql_query($qry);

    if (mysql_num_rows($sql) > 0)
    {
      $ary = mysql_fetch_array($sql);

      echo json_encode($ary);
    }
    else
    {
       echo json_encode(array("nama_barang" => "", "harga_barang" => ""));
    } 
} 
```

***无论如何，这不是最佳实践，因为它会为每个 keyup 事件发出数据库请求。但可以帮你解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T08:24:01.977

从以下位置更改 php 文件：

```
echo $ary['nama_barang'];
echo $ary['harga_barang']; 
```

至

```
echo json_encode($ary); 
```

并从

```
document.getElementById(id1).value=req.responseText;    
document.getElementById(id2).value=req.responseText; 
```

至

```
var response = JSON.parse(responseText);
document.getElementById(id1).value=response.nama_barang;    
document.getElementById(id2).value=response.harga_barang; 
```

# mysql - 不支持 MySQL 集群引擎

> ID：11010748
> 
> 赞同：0
> 
> 时间：2012-06-13T08:15:49.077
> 
> 标签：mysql

我有一个关于 MySQL 集群的问题。我通过安装

“apt-get install mysql-server-cluster”集群在 3 台 Ubuntu 10.04 机器上。一切正常。它们是相连的，一个是管理节点，另外两个服务器充当存储节点。现在我有一个大问题。ndbcluster 引擎在引擎列表中显示为引擎，但不受支持。如何启用 ndbcluster 引擎？

提前非常感谢。

BR，克里斯托夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T19:48:37.557

The first recommendation I'd make is to use the latest version of MySQL Cluster 7.2 from [http://dev.mysql.com/downloads/cluster/](http://dev.mysql.com/downloads/cluster/)

The other thing is to check that in the my.cnf file that you use for your mysqld process that you include the line...

ndbcluster

... under the "[mysqld]" tag.

You can tell if the mysqld process has then connected to the cluster by running "ndb_mgm -e show". If things still aren't going well then try following the instructions from this [blog on running MySQL Cluster over multiple Linux hosts](http://www.clusterdb.com/mysql-cluster/deploying-mysql-cluster-over-multiple-hosts/).

Regards, Andrew.

# jquery - 同位素可点击元素：增加高度以匹配内容

> ID：11010750
> 
> 赞同：2
> 
> 时间：2012-06-13T08:15:55.170
> 
> 标签：jquery, jquery-isotope

我有一个带有可点击元素的标准同位素视图。通过单击一个元素，它将变得更大。大元素的高度在 CSS 文件中定义，但我需要可变高度，具体取决于 DIV 的内容（内容为文本）；不幸的是，使用*min-height* css-property 而不是*height*不起作用，高度始终是定义的 min-height，即使内容更多。对此有何看法？

这是我的javascript代码：

```
<script>
jQuery(function() {
    var jQuerycontainer = jQuery('#container');
         jQuerycontainer.addClass('clickable');
   // add the class large to the first element
     jQuerycontainer.find('.views-row-1').each(function() {
         jQuery(this).addClass('large');
     });
     jQuerycontainer.isotope({
        itemSelector: '.element',
        masonry: {
            columnWidth: 230
        },
        masonryHorizontal: {
            rowHeight: 230
        }
    });
    var jQueryoptionSets = jQuery('#options .option-set'),
        jQueryoptionLinks = jQueryoptionSets.find('a');
    jQueryoptionLinks.click(function() {
        var jQuerythis = jQuery(this);
        // don't proceed if already selected
        if (jQuerythis.hasClass('selected')) {
            return false;
        }
        var jQueryoptionSet = jQuerythis.parents('.option-set');
        jQueryoptionSet.find('.selected').removeClass('selected');
        jQuerythis.addClass('selected');
        // make option object dynamically, i.e. { filter: '.my-filter-class' }
        var options = {},
            key = jQueryoptionSet.attr('data-option-key'),
            value = jQuerythis.attr('data-option-value');
        // parse 'false' as false boolean
        value = value === 'false' ? false : value;
        options[key] = value;
        if (key === 'layoutMode' && typeof changeLayoutMode === 'function') {
            // changes in layout modes need extra logic
            changeLayoutMode(jQuerythis, options);
        } else {
            // otherwise, apply new options
            jQuerycontainer.isotope(options);
        }
        return false;
    });
    // change size of clicked element
    jQuerycontainer.delegate('.element', 'click', function() {
       // first remove all large classes
      jQuerycontainer.find('.large').each(function(){
        jQuery(this).toggleClass('large');
      });   
        // then we can toggle large on the selected item
        jQuery(this).toggleClass('large');
        jQuerycontainer.isotope('reLayout');
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T10:26:33.657

通常，如果您将宽度设置为网格并将高度设置为自动，则同位素项目的高度只会增加，具体取决于它们的内容和内容的样式；在这里看到[这个小提琴](http://jsfiddle.net/ub3UD/3/)。希望有帮助...

# jquery - JQuery：从子元素获取数据

> ID：11010753
> 
> 赞同：2
> 
> 时间：2012-06-13T08:16:02.503
> 
> 标签：jquery

标记：

```
<ul>
<li><a href="#" class="item-list" data-id="1">Link 1</a></li>
<li><a href="#" class="item-list" data-id="2">Link 2</a></li>
<li><a href="#" class="item-list" data-id="3">Link 3</a></li>
</ul> 
```

在 JQuery 中，我会选择链接 1，它应该能够获取链接 1 的数据 ID。我试过了

```
$('.item-list').click(function(){
 var link = $(this);
 alert($(this).data('id'));
}); 
```

它没有任何结果。

哦。该列表在页面加载后生成。我正在查询数据库以获取列表。此外，列表也可以根据用户过滤 dB 的方式进行更改。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T08:19:18.523

如果列表是在页面加载后生成的，则`.click`绑定可能不起作用。也许你可以试试`.live`，像这样：

```
$('.item-list').live('click', function(){
   var link = $(this);
   alert($(this).data('id'));
}); 
```

**编辑：**

从 jQuery 1.7 开始，我似乎总是忘记 :)`.live()`已被弃用。你应该`.on()`像这样使用：

```
 $("body").on("click",".item-list",function(){
    var link = $(this);
    alert($(this).data('id'));
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T08:19:30.040

使用 .on 因为 live 已被弃用，并将您的代码放入其中`document.ready()`

```
$(function(){  //short form of document.ready        
    $("body").on("click",".item-list",function(){
        var link = $(this);
        alert($(this).data('id'));
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T08:21:39.193

```
$('ul').on('click', '.item-list', function() {
  var link = $(this);
  alert(link.attr('data-id'));
}); 
```

看看这是否有效

# java - 如何从 OSGi 运行时环境中按类名字符串加载类？

> ID：11010763
> 
> 赞同：6
> 
> 时间：2012-06-13T08:16:33.520
> 
> 标签：java, osgi

我正在制作一个捆绑包以插入 OSGi 以为用户提供功能：

```
Usercase: User input the classname string and click "list" button, the corresponding class will be decompiled and show the text on GUI for user. 
```

所以这是我的问题：我只有我的包的类加载器，我怎样才能获得 OSGi 容器类加载器，我可以从整个 OSGi 容器中按名称加载类？（我希望当 OSGi 启动时，它会将所有包和所有类加载到内存中，如果 OSGi 容器类加载器确实存在并且能够加载任何类，则它可以加载）

任何人都知道如何做这项工作？示例代码受到高度赞赏。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-13T11:55:14.990

我可以看到两种可能对您有所帮助的情况。

## 任何可见的类

您可以添加如下语句

```
DynamicImport-Package: * 
```

到您的清单，然后尝试使用

```
Class.forName("com.company.class"); 
```

## 所有类，导出与否

如果你真的需要找到每个可用的类，我不确定你为什么想要这个，但你可以尝试询问每个包是否“知道”给定的类。由于在这种情况下，您最终可能会得到多个具有相同名称的类，因此由您来选择正确的类。

你可以做类似的事情

```
private List<Class<?>> findClass(BundleContext context, String name) {
    List<Class<?>> result = new ArrayList<Class<?>>();
    for (Bundle b : context.getBundles()) {
        try {
            Class<?> c = b.loadClass(name);
            result.add(c);
        } catch (ClassNotFoundException e) {
            // No problem, this bundle doesn't have the class
        }
    }
    return result;
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-13T14:27:23.983

OSGi 中没有确定的方法仅通过其完全限定的类名来命名一个类。原因是两个包可以以不同的方式定义相同的类名。例如，如果包 A 需要一个 lib v1.0 并且包 B 需要版本 2.0 中的相同库，这很重要。

如果您也知道捆绑包，则可以命名一个类。所以你可以从 (Bundle bundle, String fqClassname) 解析一个类

您可以使用 BundleContext 来实现这一点。从捆绑包上下文中，您可以列出捆绑包，并且可以为每个捆绑包加载一个类。

当然，您也可以简单地遍历所有这些类加载器并尝试按名称查找类。问题在于它不必是唯一的。因为您可以在您的情况下打印可能没问题的警告。

因此，您需要的关键 API 方法是： Bundle[] BundleContext.getBundles() 类 Bundle.loadClass()

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-13T10:29:07.573

我不完全确定您要做什么，但假设您正在构建一个工具，该工具需要在安装在 OSGi 框架中时对所有应用程序包进行某种形式的处理，您可能需要考虑 OSGi 扩展器模式

*   [OSGi 扩展器模型，作者 Peter Kriens](http://blog.osgi.org/2007/02/osgi-extender-model.html)
*   [OSGi 4.2：扩展器模式和 BundleTracker，作者 Kai Tödter](http://www.toedter.com/blog/?p=236)
*   [具有自动 Servlet 注册的扩展器模式，作者 Peter Kriens](http://www.aqute.biz/Snippets/Extender)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T08:19:53.843

我想你的包清单中有一个导入指令来获取你需要的包。如果这样做了，那么你正在寻找的所有类都应该是你的类加载器的一部分，并且按名称加载一个类应该可以工作。

那么，您确定在您的捆绑包中的 META-INF/MANIFEST.MF 中有类似的内容：

```
Import-Package: foo.bar.com; 
```

# jsf-2 - a4j:commandButton 在回调中传递值

> ID：11010764
> 
> 赞同：2
> 
> 时间：2012-06-13T08:16:34.910
> 
> 标签：jsf-2, richfaces

我正在使用 JSF 2 和 RichFaces。我可以将一些值从 bean 传递给 a4j:commandButton 中的 oncomplete 函数吗？例如一些计数器（int）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T10:54:34.340

你可以在那里使用EL。它是根据每个请求进行评估的。

```
<a4j:commandButton ... oncomplete="someFunction(#{bean.someIntProperty})" /> 
```

请注意，此功能特定于 RichFaces 组件。标准 JSF 组件（和 PrimeFaces）将仅在每个视图构建时评估它们。

# android - 如何在不同的活动中使用具有相同功能的相同复选框

> ID：11010766
> 
> 赞同：1
> 
> 时间：2012-06-13T08:16:50.277
> 
> 标签：android, checkbox, sharedpreferences

我的 LoginActivity 中有“rememberLogin”复选框字段。我还有一个设置活动，其中我有 rememberLogin 复选框。我希望当我选中 LoginActivity 的复选框时，还应该选中“设置”复选框，反之亦然。请提出任何有用的解决方案。谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:21:59.453

在您的设置中，如果还没有，您应该根据您的目标 SDK 级别使用[PreferenceActivity](http://developer.android.com/reference/android/preference/PreferenceActivity.html)或[PreferenceFragment 。](http://developer.android.com/reference/android/preference/PreferenceFragment.html)

然后，当您第一次显示登录页面时，请阅读[SharedPreferences](http://developer.android.com/guide/topics/data/data-storage.html#pref)以获取“记住登录”首选项的值。然后，使用[OnCheckedChangeListener](http://developer.android.com/reference/android/widget/CompoundButton.OnCheckedChangeListener.html)使用复选框的值更新首选项。

# jquery - 悬停拇指CSS上的中心图像

> ID：11010779
> 
> 赞同：0
> 
> 时间：2012-06-13T08:17:42.710
> 
> 标签：jquery, css, html, thumbnails, center

当我将鼠标悬停在拇指上时，我想让图像在屏幕中央弹出。我有多个拇指，我都希望它们在屏幕中央显示一个 div（包括文本和图像），独立于屏幕分辨率等。

```
<a href="#thumb"><img src="img/thump_5.png" width="150px" border="0" /><span><b>some info and image 1</b><br><img src="img/5.png" width="510" height="335" /></span></a>
<br>
<a href="#thumb"><img src="img/thump_2.png" width="150px" border="0" /><span><b>some info and image 2</b><br><img src="img/2.png" width="510" height="335" /></span></a>
<br>
<a href="#thumb"><img src="img/thump_3.png" width="150px" border="0" /><span><b>some info and image 3</b><br><img src="img/3.png" width="510" height="335" /></span></a> 
<br>
<a href="#thumb"><img src="img/thump_4.png" width="150px" border="0" /><span><b>some info and image 4</b><br><img src="img/4.png" width="510" height="335" /></span></a>
<br>
<a href="#thumb"><img src="img/thump_1.png" width="150px" border="0" /><span><b>some info and image 5</b><br><img src="img/1.png" width="510" height="335" /></span></a> 
```

我碰到了这个问题：[Using jQuery to center a DIV on the screen](https://stackoverflow.com/questions/210717/using-jquery-to-center-a-div-on-the-screen)

但我不知道如何在我的 html 代码中实现这一点。任何人都可以帮助我使用 css / jquery 让它工作。问候，

马蒂斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T08:54:42.297

这可能正是您正在寻找的：

*   [http://jmar.github.com/jquery-hoverZoom/](http://jmar.github.com/jquery-hoverZoom/)

这些并不完全将 div 置于屏幕中间，但它们看起来也不错；）

*   [http://cssglobe.com/lab/tooltip/02/](http://cssglobe.com/lab/tooltip/02/)
*   [http://james.padolsey.com/demos/imgPreview/full/](http://james.padolsey.com/demos/imgPreview/full/)
*   [http://home.comcast.net/~littlemoe85/thumbhover/index.html](http://home.comcast.net/~littlemoe85/thumbhover/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T08:49:10.367

没有任何代码很难给你一个全面的答案，但在 css 术语中，当你定义了一个 div`width`和`height`一些具体值的属性（not `auto`）然后 do `position:relative; margin: auto;`，那么 div 应该在它的父级中居中。如果您想要更广泛的答案，请尝试一下您已有的内容。

# java - 如何在 Java Web 应用程序中使用 Celery

> ID：11010780
> 
> 赞同：0
> 
> 时间：2012-06-13T08:17:48.467
> 
> 标签：java, struts2, celery

Ours 是在 Struts2 框架上使用 Hibernate 3.5 ORM 开发的 Java Web 应用程序。我们想异步运行一些任务（计划的和非计划的）。在谷歌搜索中，我找到了 Celery Library，这是一个异步任务队列/作业队列，专注于实时操作并支持调度。

我可以在我们现有的 java 项目中使用这个库吗？我是否需要为此库添加任何其他依赖项。请为此建议我一个解决方案。

我们希望为我们的项目异步执行的任务包括发送电子邮件、从收集的数据生成 csv 文件等，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T15:15:59.193

我们将 celery 与 C#/.Net 应用程序结合使用。Celery 对通过 HTTP 接受任务和查询任务状态有很好的支持，这就是我们使用的。有关更多信息，请参阅 Celery HTTP 网关示例应用程序：

[https://github.com/celery/celery/tree/master/examples/celery_http_gateway](https://github.com/celery/celery/tree/master/examples/celery_http_gateway)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T09:10:36.780

不知道芹菜是什么。它不是 Python 库吗？

在 Java 中，有多种方法可以组织您的计划作业：

*   石英
*   @预定
*   春季批次

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T09:08:36.387

我为此使用 Spring Services。

```
@Service
public class MyAsynchronousService {

    @Scheduled(cron = "0 0 6 * * *")
    public void runDailyAtSixAClock() {
        ...
    }

} 
```

在使用 Struts2 和 Hibernate 时，Spring 与 DI 一样运行良好。只需使用 struts2-spring-plugin。

# java - 提高核心 Java 生产力的前 3 个库是什么？

> ID：11010782
> 
> 赞同：2
> 
> 时间：2012-06-13T08:17:58.963
> 
> 标签：java

与其他语言相比，Java 有时非常“健谈”，并且一些核心库被许多程序员认为是繁琐的。在过去的几年里，一个巨大的小型图书馆动物园已经发展起来，它们试图“修复”这些方面的一个方面，例如 Joda Time、guava-libraries、lambdaj

使用核心 Java 时可以提高生产力的前三个库是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T08:28:37.570

我可以肯定地提到

1.  [番石榴](https://code.google.com/p/guava-libraries/)
2.  [Guice](http://code.google.com/p/google-guice/) - 依赖注入器
3.  [ICU4J](http://site.icu-project.org/) - 除非您的所有用户都住在同一个地方
4.  [Mockito](http://code.google.com/p/mockito/) - 模拟框架

# symfony - 无法在 SonataAdminBundle 中加载类型“过滤器”

> ID：11010783
> 
> 赞同：0
> 
> 时间：2012-06-13T08:17:59.727
> 
> 标签：symfony, symfony-sonata

我最近做了一个供应商/更新，现在我的奏鸣曲管理员因以下错误而崩溃：

```
Symfony\Component\Form\Exception\FormException: Could not load type "filter" (uncaught exception) at /home/herman/WORK/bloomnet/sf/gaudeamus/vendor/symfony/src/Symfony/Component/Form/FormFactory.php line 383 
```

奏鸣曲管理员之外的正常 CRUD 操作可以正常工作。奏鸣曲仪表板也可以。问题是当我尝试显示文章列表或创建新文章时。创建时，错误有点不同：

```
Could not load type "s4fd8521531280" 
```

其中 type 是一个随机字符串，来自 FormFactory.php 中的同一行 (383)

在出现错误之前，我安装了 IvoryCKEditorBundle，但是当我在内核中禁用这个包时，错误仍然存​​在

我的配置文件：routing.yml

```
articles:
    resource: "@AcmeGaudeamusBundle/Controller/"
    type:     annotation
    prefix:   /    

admin:
    resource: '@SonataAdminBundle/Resources/config/routing/sonata_admin.xml'
    prefix: /admin

_sonata_admin:
    resource: .
    type: sonata_admin
    prefix: /admin 
```

配置.yml

```
imports:
    - { resource: parameters.ini }
    - { resource: security.yml }

framework:
    #esi:             ~
    #translator:      { fallback: %locale% }
    secret:          %secret%
    charset:         UTF-8
    router:          { resource: "%kernel.root_dir%/config/routing.yml" }
    form:            true
    csrf_protection: true
    validation:      { enable_annotations: true }
    templating:      { engines: ['twig'] } #assets_version: SomeVersionScheme
    session:
        default_locale: %locale%
        auto_start:     true

# Twig Configuration
twig:
    debug:            %kernel.debug%
    strict_variables: %kernel.debug%

# Assetic Configuration
assetic:
    debug:          %kernel.debug%
    use_controller: false
    # java: /usr/bin/java
    filters:
        cssrewrite: ~
        # closure:
        #     jar: %kernel.root_dir%/java/compiler.jar
        # yui_css:
        #     jar: %kernel.root_dir%/java/yuicompressor-2.4.2.jar

# Doctrine Configuration
doctrine:
    dbal:
        driver:   %database_driver%
        host:     %database_host%
        port:     %database_port%
        dbname:   %database_name%
        user:     %database_user%
        password: %database_password%
        charset:  UTF8

    orm:
        auto_generate_proxy_classes: %kernel.debug%
        auto_mapping: true

# Swiftmailer Configuration
swiftmailer:
    transport: %mailer_transport%
    host:      %mailer_host%
    username:  %mailer_user%
    password:  %mailer_password%

jms_security_extra:
    secure_controllers:  true
    secure_all_services: false

services:
    admin.article:
        class: Acme\GaudeamusBundle\Admin\ArticleAdmin
        tags: 
            - { name: sonata.admin, manager_type: orm, group: Articles, label: Articles }
        arguments: [null, Acme\GaudeamusBundle\Entity\Article, SonataAdminBundle:CRUD]

    admin.menu:
        class: Acme\GaudeamusBundle\Admin\MenuAdmin
        tags: 
            - { name: sonata.admin, manager_type: orm, group: Menu, label: Menu }
        arguments: [null, Acme\GaudeamusBundle\Entity\Menu, SonataAdminBundle:CRUD]

# app/config/config.yml
sonata_block:
    default_contexts: [cms]
    blocks:
        sonata.admin.block.admin_list:
            contexts:   [admin]

        #sonata.admin_doctrine_orm.block.audit:
        #    contexts:   [admin]

        sonata.block.service.text:
        sonata.block.service.action:
        sonata.block.service.rss:

        # Some specific block from the SonataMediaBundle
        #sonata.media.block.media:
        #sonata.media.block.gallery:
        #sonata.media.block.feature_media: 
```

安全性.yml：

```
security:
    encoders:
        Symfony\Component\Security\Core\User\User: plaintext

    role_hierarchy:
        ROLE_ADMIN:       ROLE_USER
        ROLE_SUPER_ADMIN: [ROLE_USER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH]

    providers:
        in_memory:
            users:
                user:  { password: userpass, roles: [ 'ROLE_USER' ] }
                admin: { password: adminpass, roles: [ 'ROLE_ADMIN' ] }

    firewalls:
        dev:
            pattern:  ^/(_(profiler|wdt)|css|images|js)/
            security: false

        login:
            pattern:  ^/demo/secured/login$
            security: false

        secured_area:
            pattern:    ^/demo/secured/
            form_login:
                check_path: /demo/secured/login_check
                login_path: /demo/secured/login
            logout:
                path:   /demo/secured/logout
                target: /demo/
            #anonymous: ~
            #http_basic:
            #    realm: "Secured Demo Area"

    access_control:
        #- { path: ^/login, roles: IS_AUTHENTICATED_ANONYMOUSLY, requires_channel: https }
        #- { path: ^/_internal, roles: IS_AUTHENTICATED_ANONYMOUSLY, ip: 127.0.0.1 } 
```

文章Admin.php

```
<?php
namespace Acme\GaudeamusBundle\Admin;

use Sonata\AdminBundle\Admin\Admin;
use Sonata\AdminBundle\Form\FormMapper;
use Sonata\AdminBundle\Datagrid\DatagridMapper;
use Sonata\AdminBundle\Datagrid\ListMapper;
use Sonata\AdminBundle\Show\ShowMapper;
//use Sonata\AdminBundle\Validator\ErrorElement;

class ArticleAdmin extends Admin
{
    public function configureShowFields(ShowMapper $showMapper)
    {
        $showMapper
            ->add('title')
            ->add('intro')
            ->add('content')
            ->add('active')
            ->add('meta_title')
            ->add('meta_desc')
            ->add('meta_keywors')
            ->add('contact')
            ->add('menu')
        ;
    }

    public function configureFormFields(FormMapper $formMapper)
    {
        $formMapper
            ->with('General')
                ->add('title')
                ->add('intro')
                ->add('content')
                ->add('active')
                ->add('meta_title')
                ->add('meta_desc')
                ->add('contact')
                ->add('menu', NULL, 
                        array('empty_value' => 'Wybierz pozycję menu', 'required'  => false )
                )
            ->end()
        ;
    }

    public function configureListFields(ListMapper $listMapper)
    {
        $listMapper
            ->addIdentifier('title')
            ->add('intro')
            ->add('active')
            ->add('meta_title')
            ->add('meta_desc')
            ->add('contact')
            ->add('menu')
            ->add('_action', 'actions', array(
                'actions' => array(
                    'edit' => array(),
                )
            ))
        ;
    }

    public function configureDatagridFilters(DatagridMapper $datagridMapper)
    {
        $datagridMapper
            ->add('title')
            ->add('intro')
            ->add('active')
            ->add('meta_title')
            ->add('meta_desc')
            ->add('contact')
            ->add('menu')
        ;
    }
} 
```

部门：

```
[symfony]
    git=http://github.com/symfony/symfony.git
    version=v2.0.14

[twig]
    git=http://github.com/fabpot/Twig.git
    version=v1.7.0

[monolog]
    git=http://github.com/Seldaek/monolog.git
    version=1.0.2

[doctrine-common]
    git=http://github.com/doctrine/common.git
    version=2.1.4

[doctrine-dbal]
    git=http://github.com/doctrine/dbal.git
    version=2.1.6

[doctrine]
    git=http://github.com/doctrine/doctrine2.git
    version=2.1.6

[swiftmailer]
    git=http://github.com/swiftmailer/swiftmailer.git
    version=v4.1.7

[assetic]
    git=http://github.com/kriswallsmith/assetic.git
    version=v1.0.3

[twig-extensions]
    git=http://github.com/fabpot/Twig-extensions.git

[metadata]
    git=http://github.com/schmittjoh/metadata.git
    version=1.0.0

[SensioFrameworkExtraBundle]
    git=http://github.com/sensio/SensioFrameworkExtraBundle.git
    target=/bundles/Sensio/Bundle/FrameworkExtraBundle
    version=origin/2.0

[JMSSecurityExtraBundle]
    git=http://github.com/schmittjoh/JMSSecurityExtraBundle.git
    target=/bundles/JMS/SecurityExtraBundle
    version=origin/1.0.x

[SensioDistributionBundle]
    git=http://github.com/sensio/SensioDistributionBundle.git
    target=/bundles/Sensio/Bundle/DistributionBundle
    version=origin/2.0

[SensioGeneratorBundle]
    git=http://github.com/sensio/SensioGeneratorBundle.git
    target=/bundles/Sensio/Bundle/GeneratorBundle
    version=origin/2.0

[AsseticBundle]
    git=http://github.com/symfony/AsseticBundle.git
    target=/bundles/Symfony/Bundle/AsseticBundle
    version=v1.0.1

[SonataAdminBundle]
    git=git://github.com/sonata-project/SonataAdminBundle.git
    target=/bundles/Sonata/AdminBundle
    version=origin/2.0

[SonataDoctrineORMAdminBundle]
    git=http://github.com/sonata-project/SonataDoctrineORMAdminBundle.git
    target=/bundles/Sonata/DoctrineORMAdminBundle
    version=origin/master

[SonataCacheBundle]
    git=http://github.com/sonata-project/SonataCacheBundle.git
    target=/bundles/Sonata/CacheBundle
    version=origin/2.0

[SonataBlockBundle]
    git=http://github.com/sonata-project/SonataBlockBundle.git
    target=/bundles/Sonata/BlockBundle
    version=origin/2.0

[SonatajQueryBundle]
    git=http://github.com/sonata-project/SonatajQueryBundle.git
    target=/bundles/Sonata/jQueryBundle

[KnpMenu]
    git=https://github.com/KnpLabs/KnpMenu.git

[KnpMenuBundle]
    git=https://github.com/KnpLabs/KnpMenuBundle.git
    target=bundles/Knp/Bundle/MenuBundle

[Exporter]
    git=http://github.com/sonata-project/exporter.git
    target=/exporter

[IvoryCKEditorBundle]
    git=http://github.com/egeloen/IvoryCKEditorBundle.git
    target=/bundles/Ivory/CKEditorBundle 
```

有人有什么想法吗？

谢谢！

我找到了解决方案。并非所有供应商都来自 2.0 分支。我对 deps 进行了更改并重新安装了供应商。

```
[symfony]
    git=http://github.com/symfony/symfony.git
    version=origin/2.0

[twig]
    git=http://github.com/fabpot/Twig.git
    version=v1.7.0

[monolog]
    git=http://github.com/Seldaek/monolog.git
    version=1.0.2

[doctrine-common]
    git=http://github.com/doctrine/common.git
    version=2.1.4

[doctrine-dbal]
    git=http://github.com/doctrine/dbal.git
    version=2.1.6

[doctrine]
    git=http://github.com/doctrine/doctrine2.git
    version=2.1.6

[swiftmailer]
    git=http://github.com/swiftmailer/swiftmailer.git
    version=v4.1.7

[assetic]
    git=http://github.com/kriswallsmith/assetic.git
    version=v1.0.3

[twig-extensions]
    git=http://github.com/fabpot/Twig-extensions.git

[metadata]
    git=http://github.com/schmittjoh/metadata.git
    version=1.0.0

[SensioFrameworkExtraBundle]
    git=http://github.com/sensio/SensioFrameworkExtraBundle.git
    target=/bundles/Sensio/Bundle/FrameworkExtraBundle
    version=origin/2.0

[JMSSecurityExtraBundle]
    git=http://github.com/schmittjoh/JMSSecurityExtraBundle.git
    target=/bundles/JMS/SecurityExtraBundle
    version=origin/1.0.x

[SensioDistributionBundle]
    git=http://github.com/sensio/SensioDistributionBundle.git
    target=/bundles/Sensio/Bundle/DistributionBundle
    version=origin/2.0

[SensioGeneratorBundle]
    git=http://github.com/sensio/SensioGeneratorBundle.git
    target=/bundles/Sensio/Bundle/GeneratorBundle
    version=origin/2.0

[AsseticBundle]
    git=http://github.com/symfony/AsseticBundle.git
    target=/bundles/Symfony/Bundle/AsseticBundle
    version=v1.0.1

[SonataAdminBundle]
    git=git://github.com/sonata-project/SonataAdminBundle.git
    target=/bundles/Sonata/AdminBundle
    version=origin/2.0

[SonataDoctrineORMAdminBundle]
    git=http://github.com/sonata-project/SonataDoctrineORMAdminBundle.git
    target=/bundles/Sonata/DoctrineORMAdminBundle
    version=origin/2.0

[SonataCacheBundle]
    git=http://github.com/sonata-project/SonataCacheBundle.git
    target=/bundles/Sonata/CacheBundle
    version=origin/2.0

[SonataBlockBundle]
    git=http://github.com/sonata-project/SonataBlockBundle.git
    target=/bundles/Sonata/BlockBundle
    version=origin/2.0

[SonatajQueryBundle]
    git=http://github.com/sonata-project/SonatajQueryBundle.git
    target=/bundles/Sonata/jQueryBundle

[KnpMenu]
    git=https://github.com/KnpLabs/KnpMenu.git

[KnpMenuBundle]
    git=https://github.com/KnpLabs/KnpMenuBundle.git
    target=bundles/Knp/Bundle/MenuBundle

[Exporter]
    git=http://github.com/sonata-project/exporter.git
    target=/exporter

[IvoryCKEditorBundle]
   git=http://github.com/egeloen/IvoryCKEditorBundle.git
   target=/bundles/Ivory/CKEditorBundle 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T08:24:52.990

这是一个解决方案： [https ://github.com/sonata-project/SonataAdminBundle/issues/831](https://github.com/sonata-project/SonataAdminBundle/issues/831)

您需要使用分支 2.0

# php - 错误“无法将多个命令插入到准备好的语句中”

> ID：11010784
> 
> 赞同：3
> 
> 时间：2012-06-13T08:18:04.390
> 
> 标签：php, postgresql, pdo, postgresql-8.4

在 CentOS 6.2 上使用 PHP 5.3.3、PostgreSQL 8.4.11、pgbouncer 1.3.4（在`session`模式下）我正在尝试执行几个 SQL 命令并通过 PHP 脚本获取结果。

当我将命令从脚本复制到*psql*提示符时，它们可以完美运行并返回 12 行：

![在此处输入图像描述](../Images/7692a2624a16a11e5982401e05a8df20.png)

但是当我从脚本运行时，我得到了错误：

```
SQLSTATE[42601]: Syntax error: 7 ERROR: cannot insert multiple commands into a prepared statement 
```

请问有什么帮助吗？

下面是我失败的 PHP 代码，我尝试过使用`$db->query()`而不是`$db->prepare/execute`：

```
try {
        $options = array(PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION);
        $db = new PDO(sprintf('pgsql:host=%s port=%u; dbname=%s',
                DBHOST, DBPORT, DBNAME), DBUSER, DBPASS, $options);

        $sth = $db->prepare("
            start transaction;
            create temporary table temp_ids (id varchar not null) on commit drop;
            insert into temp_ids (id)
                    select id
                    from pref_money
                    where yw = to_char(current_timestamp - interval '1 week', 'IYYY-IW')
                    order by money
                    desc limit 10;

            create temporary table temp_rids (rid integer not null) on commit drop;
            insert into temp_rids (rid)
                    select rid
                    from pref_cards
                    where stamp > now() - interval '1 day' and
                    id in (select id from temp_ids) and
                    bid = 'Мизер' and
                    trix > 0;

            SELECT r.rid, r.cards, to_char(r.stamp, 'DD.MM.YYYY HH24:MI') as day,
                    c.bid, c.trix, c.pos, c.money, c.last_ip, c.quit,
                    u.id, u.first_name, u.avatar, u.female, u.city, u.vip > CURRENT_DATE as vip
                    FROM pref_rounds r, pref_cards c, pref_users u
                    WHERE u.id = c.id and
                        r.rid = c.rid and
                        r.rid in (select rid from temp_rids)
                    order by rid, pos;
            commit;
        ");
        $sth->execute();
        while ($row = $sth->fetch(PDO::FETCH_ASSOC)) {
              # stuff a JSON object
        }
} catch (Exception $e) {
        exit('Database problem: ' . $e->getMessage());
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T08:42:00.540

试试这个，开始一个事务并拆分你的查询，因为你没有从用户输入中插入值，所以不需要准备查询，也因为你不期望任何结果，但最后一个 exec 很好。在最后一个上，您可以使用 query()。如果发生异常，您可以回滚更改。

```
<?php 
try {
    $options = array(PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION);
    $db = new PDO(sprintf('pgsql:host=%s port=%u; dbname=%s',
    DBHOST, DBPORT, DBNAME), DBUSER, DBPASS, $options);
    //Transaction
    $db->beginTransaction();

    $db->exec("create temporary table temp_ids (id varchar not null) on commit drop;");

    $db->exec("insert into temp_ids (id)
                    select id
                    from pref_money
                    where yw = to_char(current_timestamp - interval '1 week', 'IYYY-IW')
                    order by money
                    desc limit 10;");

    $db->exec("create temporary table temp_rids (rid integer not null) on commit drop;");

    $db->exec("insert into temp_rids (rid)
                    select rid
                    from pref_cards
                    where stamp > now() - interval '1 day' and
                    id in (select id from temp_ids) and
                    bid = 'Мизер' and
                    trix > 0;");
    //Commit changes before doing your select
    $db->commit();

    $sth = $db->query("SELECT r.rid, r.cards, to_char(r.stamp, 'DD.MM.YYYY HH24:MI') as day,
                    c.bid, c.trix, c.pos, c.money, c.last_ip, c.quit,
                    u.id, u.first_name, u.avatar, u.female, u.city, u.vip > CURRENT_DATE as vip
                    FROM pref_rounds r, pref_cards c, pref_users u
                    WHERE u.id = c.id and
                        r.rid = c.rid and
                        r.rid in (select rid from temp_rids)
                    order by rid, pos;");

    while ($row = $sth->fetch(PDO::FETCH_ASSOC)) {
        # stuff a JSON object
    }
} catch (Exception $e) {
    //Transaction rollback
    $db->rollback();
    exit('Database problem: ' . $e->getMessage());
}

?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T13:33:45.383

我在邮件列表上有一个提示可以摆脱临时工。表，它对我有用：

```
select r.rid, r.cards, to_char(r.stamp, 'DD.MM.YYYY HH24:MI') as day,
    c.bid, c.trix, c.pos, c.money, c.last_ip, c.quit,
    u.id, u.first_name, u.avatar, u.female, u.city, u.vip > CURRENT_DATE as vip
    from pref_rounds r, pref_cards c, pref_users u
    where u.id = c.id and
    r.rid = c.rid and
    r.rid in (
        select rid
            from pref_cards
            where stamp > CURRENT_TIMESTAMP - interval '1 day' and
            id in (
                select id
                    from pref_money
                    where yw = to_char(CURRENT_TIMESTAMP - interval '1 week', 'IYYY-IW')
                    order by money
                    desc limit 10) and
                   bid = 'Misere' and
                   trix > 0
    )
    order by r.rid, c.pos 
```

# linux - 尽管有足够的内存，但不能使用“tail -f”

> ID：11010787
> 
> 赞同：0
> 
> 时间：2012-06-13T08:18:15.570
> 
> 标签：linux, memory, ubuntu, tail

我遇到了“tail -f”的问题，我无法在我的 ubuntu 机器上启动它。消息是“没有记忆”（尾巴：kann *** nicht beobachten：Auf dem Gerät ist kein Speicherplatz mehr verfügbar）。

没有设备的使用率超过 4%，我也尝试删除日志文件并开始一个新的。任何想法可能导致问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:21:46.733

没有更多的内存问题不是由于文件系统占用。

您可以启动`free`以验证您拥有的可用内存量，并启动`top`以查看谁在吃掉您所有的内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T08:03:42.890

好的，我找到了适用于我的机器的解决方案。它只需要一点“sudo”来运行该命令。日志文件属于我的 linuxuser，我得到了所有许可，但显然这还不够......

# java - 课堂设计建议

> ID：11010788
> 
> 赞同：2
> 
> 时间：2012-06-13T08:18:19.063
> 
> 标签：java, design-patterns

我有一个设计问题

我需要创建方法 doSomething，当 doSomething 被调用到 case A 时，它的签名与调用 case B 时不同。

```
doSomething(param1, param2) When called from A
doSomething(param3, param4) When called from B 
```

最初我想创建一个接口并在案例 A 和案例 B 中实现它

（ps。我实际上需要几个这样的方法来解决同样的问题

```
doSomething1(T) When called from A
doSomething1(X) When called from B

doSomething2(E) When called from A
doSomething2(N) When called from B 
```

ETC...）

你能推荐一个首选的设计吗？

* * *

编辑：改变的问题希望它更清楚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T09:07:59.117

您可以使用带有策略设计模式的 Java 泛型来克服这个问题：

假设您有两个“案例”Case1 和 Case2，我们将为每个案例“处理程序”调用具有 doSomething() 方法的类。

首先，我们将有一个定义处理程序的接口：

```
public interface Handler<TYPE1, TYPE2, TYPE3>{

    void doSomething(TYPE1, TYPE2, TYPE3);

    void doSomethingElse(TYPE3);

} 
```

您的处理程序如下：

```
public class Case1Handler implements Handler<Case1Type1, Case1Type2, Case1Type3>{

    public void doSomething(Case1Type1 t1, Case1Type2 t2, Case1Type3 t3){
        // do case 1 business
    }

    public void doSomethingElse(Case1Type3 t3){
        // do case 1 business
    }

} 
```

并且您将对 Case2 进行类似的实现。

现在，您仍然在为 doSomething() 和 doSomethingElse() 编写相同的业务两次，策略模式将在这里为您提供帮助。

基本上，您对不同类型的对象执行相同的业务。您可以将这些差异移至另一个类（策略）并将此策略注入到 Handler 的**一个**实现中。

```
public class HandlerImpl<TYPE1, TYPE2, TYPE3> implements Handler<TYPE1, TYPE2, TYPE3>{

    private Strategy<TYPE1, TYPE2, TYPE3> strategy;

    public HandlerImpl(Strategy<TYPE1, TYPE2, TYPE3> strategy){
        this.strategy = strategy;
    }

    public void doSomething(TYPE1 t1, TYPE2 t2, TYPE3 t3){
        // do your business using "strategy"
    }

    public void doSomethingElse(TYPE3 t3){
        // do your business using "strategy"
    }

} 
```

这可能看起来有点矫枉过正，但绝对不是。这使您的代码更清晰，更改（添加新案例，更改业务）将更容易实现:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T08:25:48.600

所以，你有一个方法可以处理某种类型的数据，但是当从一个类或另一个类调用时，数据看起来有点不同。

如果这不正确并且您的数据完全不同且不相关，您可能真的想要执行几种方法。

如果数据相似，我建议创建一个包含数据的对象，如下所示：

```
public class MyData {
    public MyData(A, B, C){ /* Do your thing */ }
    public MyData(D, E, F){ /* Do your other thing */ } 
```

然后让您尝试实现的接口将 MyData 对象作为参数

```
doSomething(MyData data); 
```

这就是我可能会对你解释的内容做的事情，但如果这不起作用，请随时给我们反馈！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T08:44:17.367

```
doSomething1(T) When called from A
doSomething1(X) When called from B 
```

如果 doSomething() 在这两种方法中执行相同的操作，那么您可以将方法实现为 doSometing(S)，其中 S 是由 T 和 X 实现的接口。

如果 T 和 X 非常不同，那么您可能希望拥有分别提供 doSomething(T) 和 doSomething(X) 的单独类 DoerT 和 DoerX。

# php - php函数创建上传图像的拇指

> ID：11010789
> 
> 赞同：0
> 
> 时间：2012-06-13T08:18:31.077
> 
> 标签：php

我创建了一个函数来上传具有随机名称的图像并且它工作正常。

```
function f_upload($file_name, $path)
{
    $ext=end(explode('.', $file_name['name']));

    $f_name=rand().time().'.'.$ext;

    if(move_uploaded_file($file_name['tmp_name'], $path.$f_name))
    {
        return $f_name; 
    }
    else
    {
        return false;
    }
} 
```

现在我想要的是在同一目录上创建一个宽度为 75px 的相同图像的拇指，但名称以`t_imagename`

我尝试了这个功能，但它给出了错误。

```
function f_upload_gallary($file_name, $path)
{
    $ext=end(explode('.', $file_name['name']));

    $f_name=rand().time().'.'.$ext;

    if(move_uploaded_file($file_name['tmp_name'], $path.$f_name))
    {

            $src=$path.$f_name;
            $desired_width=75;
            $dest=$path;
            $source_image = imagecreatefromjpeg($src);
            $width = imagesx($source_image);
            $height = imagesy($source_image);

            $desired_height = floor($height*($desired_width/$width));
            $virtual_image = imagecreatetruecolor($desired_width,$desired_height);
            imagecopyresized($virtual_image,$source_image,0,0,0,0,$desired_width,$desired_height,$width,$height);
            imagejpeg($virtual_image,$dest);

        return $f_name; 

    }
    else
    {
        return false;
    }
} 
```

此功能不起作用。

我只想在同一个文件夹上创建一个 75 的拇指，名称以**t_开头**

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:23:08.030

您没有指定目标图像的文件名。替换这一行，

```
$dest = $path; 
```

有了这个：

```
$dest = $path.'t_'.$f_name; 
```

# php - 使用 htmlspecialchars_decode 和 preg_replace 解码特殊标签之间的字符串

> ID：11010793
> 
> 赞同：1
> 
> 时间：2012-06-13T08:18:44.920
> 
> 标签：php, html, string, replace, special-characters

我正在尝试用`htmlspecialchars_decode`and解码两个特殊标签之间的字符串`preg_replace`，例如我的原始字符串是这样的：

```
other strings...[link]&lt;a href=&quot;http://example.com&quot; target=&quot;_blank&quot;&gt;example&lt;/a&gt;[/link]other strings... 
```

我需要将所有内容转换`[link][/link]`为 html 原始代码。测试了这个：

```
 $str = preg_replace("/[link](.*)[\/link]/eisU", "htmlspecialchars_decode('$1')", $str); 
```

没用！我也搜索了谷歌，但没用！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T08:23:31.373

您必须转义方括号，否则`[link]`将解释为包含字母的字符集`l, i, n, k`。

`preg_quote()`如果您不确定要逃避什么，您应该使用：

```
preg_replace('/' . preg_quote('[link]', '/') . '(.*?)' . preg_quote('[/link]', '/') . '/eisU', ... 
```

这也可以：

```
/\[link\](.*)\[\/link\]/eisU 
```

# mule - Mule - Web 服务消费者端安全性

> ID：11010797
> 
> 赞同：0
> 
> 时间：2012-06-13T08:18:54.553
> 
> 标签：mule

通过 Mule，我将调用 Web 服务。为此存在什么样的安全机制。我参考了 mulesoft.org，但我只能从创建基于 Web 服务的应用程序的角度找到安全参考。

我将使用 JSON 调用 Restfull WS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:59:02.770

您可以创建自己的云连接器来使用 API，这很容易做到，它为您提供 OAuth 1.0 和 2.0 的 OOTB 支持

这里有一些有用的链接开始： http: [//www.mulesoft.org/documentation/display/DEVKIT/Your+First+Cloud+Connector](http://www.mulesoft.org/documentation/display/DEVKIT/Your+First+Cloud+Connector) http://www.mulesoft.org/documentation/display/DEVKIT/Authorizing+your +连接器+with+OAuth+2.0

# sql - SQL Null 值和非 Null 值

> ID：11010798
> 
> 赞同：-2
> 
> 时间：2012-06-13T08:18:55.040
> 
> 标签：sql

我有一个看起来像这样的表：

```
ID (pk,int)
Col1 (nvarchar)
Col2 (nvarchar)
Col3 (nvarchar) 
```

在所有列（ID 除外）中，一些值为 NULL。

我想做一个如下所示的查询：

```
SELECT * FROM Table 
WHERE (Col1=<parameter> AND Col1 IS NULL)
 +    (Col2=<parameter> AND Col2 IS NULL)
etc. 
```

我需要为 NULL 且等于参数的值

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T08:22:19.570

您的问题，特别是“我需要为 NULL 且等于参数的值”这一位，没有任何意义。where 子句：

```
Col1 = <parameter> AND Col1 IS NULL 
```

永远*不会*是真的，因为一列要么是 NULL*要么*是什么。不能同时是两者。

如果你的意思是你想要等于参数*OR* NULL 的值，你应该使用：

```
Col1 = <parameter> OR Col1 IS NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T08:22:07.907

在您的陈述中替换为`AND`。`OR``WHERE`

```
WHERE (Col1=<parameter> OR Col1 IS NULL)
ANd   (Col2=<parameter> OR Col2 IS NULL) 
```

# c# - TreeView 功能取消选中所有其他节点

> ID：11010802
> 
> 赞同：1
> 
> 时间：2012-06-13T08:19:02.350
> 
> 标签：c#, .net, winforms, treeview

这是我要实现的功能：

1.  像往常一样通过单击鼠标检查树节点，用户可以多选。

2.  当用户按住 Ctrl+ 鼠标时，我希望选中鼠标单击的树节点，而未选中所有其他节点。

我有一个版本，但它并不优雅：

有什么建议么？

如果要测试代码，请将 TreeViewAdv 和 TreeNodeAdv 替换为普通的 TreeView 和 TreeNode。

```
using Syncfusion.Windows.Forms.Tools;

namespace treeviewtest
{
    public partial class Form1 : Form
    {
        TreeNodeAdv CurrentNode = null;
        public Form1()
        {
            InitializeComponent();
        }

        private void treeViewAdv1_AfterCheck(object sender, Syncfusion.Windows.Forms.Tools.TreeNodeAdvEventArgs e)
        {
            TreeViewAdv tree = sender as TreeViewAdv;
            if (Control.ModifierKeys == Keys.Control 
                  && e.Action!= TreeViewAdvAction.Unknown)
            {

                foreach (TreeNodeAdv node in tree.Nodes)
                {
                    if (node.CheckState == CheckState.Checked && node != CurrentNode)
                        node.Checked = false;

                    foreach (TreeNodeAdv n in node.WalkTree())
                    {
                        if (n.CheckState == CheckState.Checked && n != CurrentNode)
                            n.Checked = false;
                    }
                }
            }
            CurrentNode = null;
        }

        private void treeViewAdv1_BeforeCheck(object sender, TreeNodeAdvBeforeCheckEventArgs e)
        {
            if (Control.ModifierKeys == Keys.Control && CurrentNode == null)
            {
                CurrentNode = e.Node;
                if (e.NewCheckState == CheckState.Unchecked)
                {
                    TreeViewAdv tree = sender as TreeViewAdv;
                    foreach (TreeNodeAdv node in tree.Nodes)
                    {
                        if (node.CheckState == CheckState.Checked && node != CurrentNode)
                            node.Checked = false;

                        foreach (TreeNodeAdv n in node.WalkTree())
                        {
                            if (n.CheckState == CheckState.Checked && n != CurrentNode)
                                n.Checked = false;
                        }   
                    }
                    e.Cancel = true;
                }
            }
        }
    }

    public static class externtree
    {
        public static IEnumerable<TreeNodeAdv> WalkTree(this TreeNodeAdv node)
        {
            if (node == null)
                yield break;

            // return itself first
            yield return node;

            // return children
            if (node.HasChildren)
            {
                foreach (TreeNodeAdv cNode in node.Nodes)
                    foreach (TreeNodeAdv iNode in cNode.WalkTree())
                        yield return iNode;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T08:31:29.853

通过继承和递归使其优雅：

```
using System;
using System.Windows.Forms;

class MyTreeView : TreeView {
    protected override void OnAfterCheck(TreeViewEventArgs e) {
        if (checking) return;
        checking = true;
        if (e.Node.Checked && (Control.ModifierKeys & Keys.Control) == Keys.Control) {
            uncheckNodes(this.Nodes, e.Node);
        }
        checking = false;
        base.OnAfterCheck(e);
    }

    private void uncheckNodes(TreeNodeCollection nodes, TreeNode except) {
        foreach (TreeNode node in nodes) {
            if (node != except) node.Checked = false;
            uncheckNodes(node.Nodes, except);
        }
    }
    private bool checking;
} 
```

# asp.net - 图像旋转透明度不存在

> ID：11010803
> 
> 赞同：1
> 
> 时间：2012-06-13T08:19:02.570
> 
> 标签：asp.net, opennetcf

我正在使用 OPENNET CF DLL 旋转透明的图像 (PNG)。但旋转后图像的透明度不会持续存在。

我怎样才能保持透明度或我能做的任何一种或其他方式？

# java - JPA 实体默认构造函数

> ID：11010806
> 
> 赞同：0
> 
> 时间：2012-06-13T08:19:08.950
> 
> 标签：java, jpa

在 JPA 实体类中，使用默认构造函数或参数构造函数有什么用。我已经阅读了很多关于这方面的文章。但这些都没有给出详细的解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T08:25:00.093

这样实体管理器就可以创建一个实体，然后通过设置器初始化字段。

例如这里：

```
MeEntity entity = em.find(MyEntity.class, id); 
```

也可以在这里查看：[Java 默认构造函数](https://stackoverflow.com/questions/4488716/java-default-constructor)

# iis-7 - 由于为该应用程序池服务的进程中的一系列故障，应用程序池“DefaultAppPool”被自动禁用

> ID：11010807
> 
> 赞同：20
> 
> 时间：2012-06-13T08:19:15.297
> 
> 标签：iis-7

```
Log Name:      System
Source:        Microsoft-Windows-WAS
Date:          13.06.2012 08:34:45
Event ID:      5002
Task Category: None
Level:         Error
Keywords:      Classic
User:          N/A
Computer:      WIN-QU022VN756J
Description:
Application pool 'DefaultAppPool' is being automatically disabled due to a series of failures in the process(es) serving that application pool. 
```

请提供此问题的近似解决方案。我会很感激这个建议

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2016-04-26T15:59:31.260

IIS 带有一个称为快速故障保护的功能。默认情况下，如果池中的工作人员在 5 分钟内崩溃 5 次，则应用程序池被配置为禁用。

可以通过右键单击应用程序池进入高级设置并修改“快速故障保护”属性来修改此设置的阈值。但是，此事件表明您的应用程序中可能存在需要解决的严重问题。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-10-31T11:39:15.300

我对这个问题很紧张，最后我得到了解决。

请确保应用程序池的高级设置中的以下选项正确。

应用程序池>默认应用程序池>右键单击并选择高级设置。

然后检查“启用 32 位应用程序”选项是否设置为“False”。它应该是假的

我通过上述更改解决了。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-10-31T10:18:13.600

我在安装 URL 重写模块时遇到了这个错误，安装正确的 URL 重写模块来解决这个问题。要验证 URL 重写模块检查事件日志的此错误原因。

1.  windows日志>>系统>>单击最近的错误，在错误详细信息中它将显示“应用程序池'DefaultAppPool（或YourApplicationpool）'由于为该应用程序池服务的进程中的一系列故障而被自动禁用。”
2.  Windows 日志>> 应用程序>> 单击最近的错误，在错误详细信息中将显示“模块 DLL 'C:\Windows\system32\inetsrv\rewrite.dll' 加载失败。数据是错误。”

我希望这能帮到您。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-29T15:52:06.123

这是注册表权限问题。这应该会有所帮助：http: [//support.microsoft.com/kb/885654](http://support.microsoft.com/kb/885654)

您可能还需要将 NT AUTHORITY\NETWORK SERVICE（或 NT AUTHORITY\SYSTEM 或应用程序池使用的帐户）的读/写权限添加到 c:\Windows\TEMP。请参阅[http://social.technet.microsoft.com/Forums/en-US/winservergen/thread/176e9b6d-7b1b-4667-b55e-330bec133f37/](http://social.technet.microsoft.com/Forums/en-US/winservergen/thread/176e9b6d-7b1b-4667-b55e-330bec133f37/)

# android - 如何在 Facebook Android 应用程序上创建多用户访问帐户。？

> ID：11010810
> 
> 赞同：1
> 
> 时间：2012-06-13T08:19:19.673
> 
> 标签：android, facebook, multiple-accounts

我已经为 Facebook 集成创建了一个 Android 应用程序与单用户登录。现在我想在同一个应用程序中多用户登录。我怎样才能做到这一点。请使用任何 android 代码或可用链接提供一些建议。提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T08:32:37.810

如果设备安装了 facebook 应用程序 (katana)，则facebook android SDK 会尝试使用[SSO 。](http://developers.facebook.com/docs/mobile/android/build/#enablesso)
如果使用 SSO，那么您将无法这样做，该`authorize`方法将始终使用 katana 中的登录用户，因此您必须要求用户在主 facebook 应用程序中手动注销。

您可以做的是在`authorize`没有 sso 的情况下调用，如下所述：[如何禁用 Facebook 单点登录 for android - Facebook-android-sdk](https://stackoverflow.com/questions/4521013/how-to-disable-facebook-single-sign-on-for-android-facebook-android-sdk)。

# iphone - 设备上的神秘 tableView 没有保留在代码中

> ID：11010819
> 
> 赞同：1
> 
> 时间：2012-06-13T08:19:59.527
> 
> 标签：iphone, objective-c, ios

我的 RootViewController 有两个问题，它是这样定义的：

`@interface RootViewController : UIViewController`

注意：我已经在我的 RootViewController.m 中从 UITableViewDelegate 声明了以下方法，但它们被注释了。首先它是 UITableViewController，但后来我将其更改为 UIViewController。

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView;
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section;
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath; 
```

我如何唤醒我的应用程序：

```
- (void)applicationDidFinishLaunching:(UIApplication *)application {

    RootViewController *rootVC = [[RootViewController alloc] init];
    navigationController = [[UINavigationController alloc] initWithRootViewController:rootVC];
    navigationController.navigationBarHidden = YES;

    [rootVC release];

    [window addSubview:[navigationController view]];
    [window makeKeyAndVisible];
} 
```

注释结束；

*   当我尝试构建应用程序时，他崩溃并出现以下错误

    `2012-06-13 10:34:23.595 Astrobox[540:707] -[RootViewController tableView:numberOfRowsInSection:]: unrecognized selector sent to instance 0x151820`

    `2012-06-13 10:34:23.609 Astrobox[540:707] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[RootViewController tableView:numberOfRowsInSection:]: unrecognized selector sent to instance 0x151820'`

*   如果我取消注释 UITableViewDelegate 中的方法，它在设备上运行，iOS 5.1.1 (92206)，但我`RootViewController`看起来像`UITableViewController`- 屏幕上从上到下的分隔符，因为它的性质 tableView 反弹是启用的，我可以在这里轻松解决我的问题使用以下代码，但我不接受这是优雅的解决方案。

    ```
    self.tableView.separatorStyle = UITableViewCellSeparatorStyleNone;
    self.tableView.bounces = NO; 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:55:44.600

检查 Rootviewcontroller 的 nib 文件。它可以连接到 tableview 控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T08:31:19.970

不要将 UITableViewController 更改为 UIViewController.. 并编写

```
RootViewController *rootVC = [[RootViewController alloc] initwithnibname:@"YourXib/Nib name"]; 
```

代替

```
RootViewController *rootVC = [[RootViewController alloc] init]; 
```

那应该可以解决您的问题。还要检查tableview的委托和数据源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T09:05:46.583

首先请不要设置表视图委托和数据源，并检查您的视图是否正确加载。之后在视图中设置以下代码确实加载了..

```
tableView.delegate = self;
tableView.datasource = self;
and implement the < UITableViewDelegate , UITableViewDataSource > in your .h file.
and implement all the 4 methods what ever you have mentioned above and don't call it explicitly.
these are the delegate method they will call itself. 
```

# django - Django Crispy 表单中的静态文件

> ID：11010822
> 
> 赞同：0
> 
> 时间：2012-06-13T08:20:04.057
> 
> 标签：django, django-forms, twitter-bootstrap

我正在使用 Django Crispy Forms 并打算将其与 Twitter-bootstrap 结合起来，并且已经安装了脆皮表单。我一直在使用[http://django-crispy-forms.readthedocs.org/en/d-0/install.html#uni-form-static-files](http://django-crispy-forms.readthedocs.org/en/d-0/install.html#uni-form-static-files)。

我的问题是我需要在我的 HTML 代码中包含统一格式的文件，如果是这样，我似乎找不到要包含的文件。

我该怎么办？需要一些指导...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:11:15.420

你说你想使用 Bootstrap。制服是一种替代品。所以你根本不需要使用这些文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T09:26:29.707

如果您想包含制服而不是 Bootstrap，您需要做的是

```
python manage.py collectstatic 
```

这将收集所有静态文件并存储在 uni-form 文件夹中。因为安装了crispy-forms 后，您可能不知道静态文件在哪里。

# core-data - 从 keypath 恢复 NSEntityDescription

> ID：11010827
> 
> 赞同：1
> 
> 时间：2012-06-13T08:20:42.973
> 
> 标签：core-data

假设我有核心数据实体 A 和 B，其中 B 通过属性 a 指向 A。

给定 B 的 NSEntityDescription 和 A 的给定属性的关键路径（例如 @"a.name"），有没有办法恢复 A 的 NSEntityDescription？

谢谢，

蒂姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:39:56.357

我通过自己解析关键路径设法做到了这一点：

```
 // Split the path to the section name up
    NSArray *keyNameParts = [sectionNameKeyPath componentsSeparatedByString:@"."];

    // Follow this back to the Entity description for the Section Entity
    for (int idx = 0; idx < keyNameParts.count - 1; idx++) {
        NSDictionary *relationships = entityDescription.relationshipsByName;
        NSString *partName = [keyNameParts objectAtIndex:idx];
        NSRelationshipDescription *relationshipDescription = [relationships objectForKey:partName];
        if (!relationshipDescription)
        {
            [NSException raise:@"Relationship not found for keypath"
                        format:@"Entity '%@' does not point to a relationshop for '%@' in keypath '@'.", entityName, partName, sectionNameKeyPath];
        }
        entityDescription = relationshipDescription.entity;
    } 
```

如果有更直接的方法，我很想知道。

# datagridview - Npgsql 和分页数据网格视图

> ID：11010828
> 
> 赞同：0
> 
> 时间：2012-06-13T08:20:44.163
> 
> 标签：datagridview, npgsql

我已经设法在 Visual Basic 2010 上的 npgsql 中成功地执行 SQL 命令，但现在我很难弄清楚如何进行分页数据网格视图。

有没有人有一个非常简单的 Visual Studio (visual basic 2010) 示例，在表单上使用简单的 datagridview，使用 npgsql 链接到大型数据表？

假设有一个名为 users 的表，其中包含几个字段和数百万行。

我知道通常你不想让用户滚动数百万行，并且应该提供过滤，但我希望能够显示一个 datagridview（在我可以处理的表单上带有过滤选项）并且如果用户向下滚动，只加载需要的记录。

我的问题只是不知道从哪里开始，我看过 MS 示例，但它们不使用 npgsql，我不知道 npgsql 在这方面是如何工作的。

因此，使用 npgsql 的分页数据网格视图的一个简单示例将是一个巨大的帮助 - 一旦我知道 npgsql 等中的基本命令，我可以扩展它/更改它以满足要求。

它只是一个学习实验 - 我不喜欢将所有行加载到内存中的 datagridview 的想法 - 它不可扩展......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T05:05:35.297

没关系 - 想通了。

没注意到

Npgsql.NpgsqlDataAdapter()

这使得使用 MS 示例成为可能，并根据个人需要更改其余信息。

# c++ - 基于通用 char[] 的存储并避免与严格混叠相关的 UB

> ID：11010830
> 
> 赞同：11
> 
> 时间：2012-06-13T08:20:48.960
> 
> 标签：c++, c++11, undefined-behavior, strict-aliasing, type-punning

我正在尝试构建一个类模板，它将一堆类型打包在一个适当大的 char 数组中，并允许将数据作为单独的正确类型引用进行访问。现在，根据标准，这可能会导致违反严格别名，从而导致未定义的行为，因为我们正在`char[]`通过与其不兼容的对象访问数据。具体来说，标准规定：

> 如果程序尝试通过非下列类型之一的泛左值访问对象的存储值，则行为未定义：
> 
> *   对象的动态类型，
> *   对象的动态类型的 cv 限定版本，
> *   与对象的动态类型类似（如 4.4 中定义）的类型，
> *   与对象的动态类型相对应的有符号或无符号类型，
> *   对应于对象动态类型的 cv 限定版本的有符号或无符号类型，
> *   **聚合或联合类型，在其元素或非静态数据成员中包括上述类型之一（递归地包括子聚合或包含联合的元素或非静态数据成员），**
> *   一个类型，它是对象的动态类型的（可能是 cv 限定的）基类类型，
> *   一个`char`或`unsigned char`类型。

鉴于突出显示的要点的措辞，我提出了以下`alias_cast`想法：

```
#include <iostream>
#include <type_traits>

template <typename T>
T alias_cast(void *p) {
    typedef typename std::remove_reference<T>::type BaseType;
    union UT {
        BaseType t;
    };
    return reinterpret_cast<UT*>(p)->t;
}

template <typename T, typename U>
class Data {
    union {
        long align_;
        char data_[sizeof(T) + sizeof(U)];
    };
public:
    Data(T t = T(), U u = U()) { first() = t; second() = u; }
    T& first() { return alias_cast<T&>(data_); }
    U& second() { return alias_cast<U&>(data_ + sizeof(T)); }
};

int main() {
    Data<int, unsigned short> test;
    test.first() = 0xdead;
    test.second() = 0xbeef;
    std::cout << test.first() << ", " << test.second() << "\n";
    return 0;
} 
```

*（上面的测试代码，尤其是`Data`class只是一个简单的想法演示，所以请不要指出我应该如何使用`std::pair`or `std::tuple`。`alias_cast`模板还应该扩展为处理 cv 限定类型，它只能是安全的在满足对齐要求时使用，但我希望这个片段足以证明这个想法。）*

这个技巧消除了 g++ 的警告（使用 编译时`g++ -std=c++11 -Wall -Wextra -O2 -fstrict-aliasing -Wstrict-aliasing`），并且代码可以工作，但这真的是告诉编译器跳过基于严格别名的优化的有效方法吗？

如果它无效，那么如何在不违反别名规则的情况下实现这样的基于 char 数组的通用存储类？

编辑：用这样`alias_cast`的简单替换`reinterpret_cast`：

```
T& first() { return reinterpret_cast<T&>(*(data_ + 0)); }
U& second() { return reinterpret_cast<U&>(*(data_ + sizeof(T))); } 
```

使用 g++ 编译时会产生以下警告：

> aliastest-so-1.cpp：在 'T& Data::first() 的实例化中 [with T = int; U = short unsigned int]': aliastest-so-1.cpp:28:16:
> 这里需要 aliastest-so-1.cpp:21:58: 警告：取消引用类型双关指针将破坏严格别名规则 [-严格锯齿]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T20:02:49.320

如果你想坚持严格的一致性，使用联合几乎不是一个好主意，他们在阅读活动成员时有严格的规则（并且只有这个）。尽管必须说实现喜欢使用联合作为可靠行为的挂钩，但也许这就是您所追求的。如果是这种情况，我会听从 Mike Acton 的意见，他写[了一篇关于别名规则的好（而且很长）的文章](http://cellperformance.beyond3d.com/articles/2006/06/understanding-strict-aliasing.html)，他确实评论了通过联合进行强制转换。

据我所知，这是您应该如何处理 char 类型的数组作为存储：

```
// char or unsigned char are both acceptable
alignas(alignof(T)) unsigned char storage[sizeof(T)];
::new (&storage) T;
T* p = static_cast<T*>(static_cast<void*>(&storage)); 
```

这被定义为工作的原因是`T` *这里*对象的动态类型。当新的表达式创建`T`对象时，存储被重用，该操作隐式地结束了对象的生命周期`storage`（这就像`unsigned char`一个*普通*的类型一样发生）。

您仍然可以使用 eg`storage[0]`来读取对象的字节，因为这是通过类型的 glvalue 读取对象值，这是`unsigned char`列出的显式异常之一。另一方面，如果`storage`是不同但仍然微不足道的元素类型，您仍然可以使上述代码段工作，但无法做到`storage[0]`.

使片段有意义的最后一块是指针转换。请注意，这`reinterpret_cast`不适*用于*一般情况。`T`考虑到标准布局（对齐也有额外的限制），它可能是有效的，但如果是这种情况，那么 using`reinterpret_cast`将等同于`static_cast`ing via`void`就像我做的那样。首先直接使用该表单更有意义，特别是考虑到在通用上下文中经常使用存储。在任何情况下，相互转换`void`是标准转换之一（具有明确定义的含义），您想要`static_cast`这些。

如果您完全担心指针转换（我认为这是最薄弱的环节，而不是关于存储重用的论点），那么另一种选择是

```
T* p = ::new (&storage) T; 
```

如果您想跟踪它，这会在存储中花费一个额外的指针。

我衷心推荐使用`std::aligned_storage`.

# asp.net-mvc-3 - 使用 asp.net mvc 淘汰或 BackBone/Ember？

> ID：11010831
> 
> 赞同：1
> 
> 时间：2012-06-13T08:20:56.747
> 
> 标签：asp.net-mvc-3, backbone.js, knockout.js, ember.js

我们正在评估将客户端 JavaScript 框架用于具有服务器端技术 asp.net mvc3 的社交网络应用程序。请告诉我们选择淘汰赛（使用asp.net mvc）而不是ember.js或backbone.js的具体优势是什么（如果有的话）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T09:27:16.557

我对这些 javascript 框架没有任何经验，但我知道 knockout.js 将包含在 Asp.net MVC 的未来版本中。您可以在网站上找到更多信息：[http ://www.asp.net/single-page-application](http://www.asp.net/single-page-application)

# batch-file - 如何并行运行多个 DOS 命令？

> ID：11010834
> 
> 赞同：119
> 
> 时间：2012-06-13T08:21:02.363
> 
> 标签：batch-file, cmd

如何运行多个dos命令？

我有一个`for`循环，它运行服务器检测以检测哪个服务器工作并且速度很快。而且因为有更多的服务器，我不希望按顺序运行所有服务器检测，而是并行运行。

* * *

## 回答 #1

> 赞同：214
> 
> 时间：2012-06-13T08:44:28.053

您可以像这样并行执行命令`start`：

```
start "" ping myserver
start "" nslookup myserver
start "" morecommands 
```

它们都将在自己的命令提示符下启动，并允许您从一个批处理文件同时运行多个命令。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-13T08:29:04.120

我建议你看看“[如何从另一个 bat 文件在后台运行一个 bat 文件？](https://stackoverflow.com/questions/649634/how-do-i-run-a-bat-file-in-the-background-from-another-bat-file) ”

[此外，在“并行执行 shell 进程](https://stackoverflow.com/questions/672719/parallel-execution-of-shell-processes)”问题页面中给出[了](https://stackoverflow.com/a/676668/889576)很好的答案（使用`start`命令）；

但我的建议是使用*PowerShell*。我相信它会完全满足您的需求。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-04-04T14:59:10.673

如果您有多个参数，请使用如下语法。我有一个 bat 文件，其脚本如下：

```
start "dummyTitle" [/options] D:\path\ProgramName.exe Param1 Param2 Param3 
start "dummyTitle" [/options] D:\path\ProgramName.exe Param4 Param5 Param6 
```

这将打开多个控制台。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-07T11:52:02.173

您可以与命令并行执行`start`命令，例如：

```
start "" ping google.com 
```

但是要在没有新窗口的情况下执行，请使用该[`/b`](https://www.computerhope.com/starthlp.htm)选项，例如：

```
start /b ping google.com -t
start /b ping example.com -t 
```

> 此外，该`-t`选项使 ping 重复无限次。

# html - Internet Explorer 9 中的 wmode="opaque"

> ID：11010837
> 
> 赞同：0
> 
> 时间：2012-06-13T08:21:23.773
> 
> 标签：html, internet-explorer-9, flash

Flash 对象的 wmode="opaque" 在 chrome 中工作，但在 IE9 中不工作。当我打开对话窗口时，flash 视频继续显示并且没有变暗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:38:24.017

我应该为 Internet Explorer 9 编写这个：

```
<object id="XwebcamXobjectX" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"... >
<param name="wmode" value="opaque" />
...
</object> 
```

代替：

```
<object id="XwebcamXobjectX" wmode="opaque" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"...
...
</object> 
```

# c++ - 在 Windows 中使用 C/C++ 通过 USB 向打印机发送命令

> ID：11010838
> 
> 赞同：0
> 
> 时间：2012-06-13T08:21:29.463
> 
> 标签：c++, c, windows, usb, thermal-printer

我有一台打印机（Sewoo T320）。我想通过 USB 发送命令。我找到了一本显示一些命令的手册。我如何使用它们并在 Windows 中使用 C/C++ 打印一些东西。

[PDF手册](https://rvs.selfip.com/pub/%D0%A0%D0%B0%D0%B7%D0%BD%D0%BE%D0%B5/TorgovoeOborudovanie/Printers/LUKHAN/LK-T32/SEWOO%20LK-T320%20MANUAL%28__%29.pdf)：

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:40:40.600

安装打印机时，需要创建虚拟串行（或其他端口）端口接口。

然后你可以使用[CreateFile](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx)打开它并按照手册向它写入数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T08:24:44.537

如果您谈论发送打印机控制代码/转义序列，那么您可能希望为打印机使用通用的纯文本驱动程序，然后您可以根据需要将 asci 发送到打印机。

# android - 重复使用相同的对话框实例

> ID：11010844
> 
> 赞同：3
> 
> 时间：2012-06-13T08:21:46.480
> 
> 标签：android, memory, interface

我看到很多线程都有这个标题，但没有人真正谈论对话框的“重用”：讨论只是选择如何组织代码以在同一个地方制造对话框，但具有不同的上下文。

所以，我想知道：创建几个单例对话框，然后只更改它们的样式和内容视图是一种好习惯吗？

它比每次调用新对话框更好吗？（速度，内存消耗）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T08:25:04.123

永远不要使用任何需要引用 Activity 的**Context的***Singleton*和/或*Static*。否则会导致严重的内存泄漏。最好的方法是在您的活动类中使用对话框，而不管您想要的数量是多少，因为此类对话框消耗的内存将在您的活动被销毁时释放。

# java - 在 Android 应用程序中解析 Json

> ID：11010851
> 
> 赞同：-1
> 
> 时间：2012-06-13T08:22:40.670
> 
> 标签：java, android, json

我在解析大 Json 文件时需要帮助：

```
{"status":{"code":200,"text":"OK"},"content":[{"proposalId":"12536","providerId":"1","supervisorName":null,"supervisorEmail":"lolbroek_13@hotmail.com","hostInstitution":"qsd","hostCountry":"qsd","hostCity":"QSD","hostTypeId":"1","title":"qsd","status":"available","numberStudents":null,"description":"qsd","categoryId":"34","startDate":null,"endDate":null,"submitDate":null,"expectedWorkload":null,"purpose":null,"workOrganisationId":"1","function":null,"audienceId":"1","preConditions":"","certificationGranted":null,"deliverables":null,"expenses":null,"revenue":null,"vacancies":null,"uploadImg":"http:\/\/193.136.60.238\/\/MUTW2012\/core\/img\/internship.png"},
{"proposalId":"12537","providerId":"1","supervisorName":null,"supervisorEmail":"lolbroek_13@hotmail.com","hostInstitution":"qsd","hostCountry":"qsd","hostCity":"QSD","hostTypeId":"1","title":"qsd","status":"available","numberStudents":null,"description":"qsd","categoryId":"34","startDate":null,"endDate":null,"submitDate":null,"expectedWorkload":null,"purpose":null,"workOrganisationId":"1","function":null,"audienceId":"1","preConditions":"","certificationGranted":null,"deliverables":null,"expenses":null,"revenue":null,"vacancies":null,"uploadImg":"http:\/\/193.136.60.238\/\/MUTW2012\/core\/img\/internship.png"},
{"proposalId":"12538","providerId":"1","supervisorName":null,"supervisorEmail":"lolbroek_13@hotmail.com","hostInstitution":"qsd","hostCountry":"qsd","hostCity":"QSD","hostTypeId":"1","title":"qsd","status":"available","numberStudents":null,"description":"qsd","categoryId":"34","startDate":null,"endDate":null,"submitDate":null,"expectedWorkload":null,"purpose":null,"workOrganisationId":"1","function":null,"audienceId":"1","preConditions":"","certificationGranted":null,"deliverables":null,"expenses":null,"revenue":null,"vacancies":null,"uploadImg":"http:\/\/193.136.60.238\/\/MUTW2012\/core\/img\/internship.png"},
{"proposalId":"12539","providerId":"1","supervisorName":null,"supervisorEmail":"lolbroek_13@hotmail.com","hostInstitution":"qsd","hostCountry":"qsd","hostCity":"QSD","hostTypeId":"1","title":"qsd","status":"available","numberStudents":null,"description":"qsd","categoryId":"34","startDate":null,"endDate":null,"submitDate":null,"expectedWorkload":null,"purpose":null,"workOrganisationId":"1","function":null,"audienceId":"1","preConditions":"","certificationGranted":null,"deliverables":null,"expenses":null,"revenue":null,"vacancies":null,"uploadImg":"http:\/\/193.136.60.238\/\/MUTW2012\/core\/img\/internship.png"},
................[etc] 
```

我需要获取内容中的所有标题和proposalIds。我试着让它像这样：

```
public ArrayList<String> GetUserProposals(String UserId){
        String actionname = sitename+"accounts/"+UserId+"/proposals";
        try {
           jObject = this.sendData(actionname);//change later
          // return result;
           JSONArray ja = jObject.getJSONArray("content");
           for (int i = 0; i < ja.length(); i++) {
                Log.i("MyDebug", "value----" + ja.getJSONObject(i).getString("title"));
           }
        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        ArrayList<String> returnValue = null;
        return returnValue;

    } 
```

但是`JSONArray`是空的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:27:44.597

你应该尝试切换`jObject = this.sendData(actionname);`到'jObject = new JSONObject(this.sendData(actionname));`

你必须初始化 JSON 对象，你不是......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T08:37:49.337

我的 JSON 字符串是

```
{
"result": "success",
"countryCodeList": [
{
"countryName": "World Wide",
"countryCode": "00"
},
{
"countryName": "Korea, Republic of",
"countryCode": "kr"
},
{
"countryName": "United States",
"countryCode": "us"
},
{
"countryName": "Japan",
"countryCode": "jp"
},
{
"countryName": "China",
"countryCode": "cn"
},
{
"countryName": "India",
"countryCode": "in"
}
]
} 
```

我这样解析

```
 JSONObject json = new JSONObject(jsonstring);

        status = json.getString("result");

        if (status.equalsIgnoreCase("success")) {

            JSONArray nameArray = json.names();
            JSONArray valArray = json.toJSONArray(nameArray);

            JSONArray valArray1 = valArray.getJSONArray(1);

            valArray1.toString().replace("[", "");
            valArray1.toString().replace("]", "");

            int len = valArray1.length();

            for (int i = 0; i < valArray1.length(); i++) {

                Country country = new Country();
                JSONObject arr = valArray1.getJSONObject(i);

                country.setCountryCode(arr.getString("countryCode"));
                country.setCountryName(arr.getString("countryName"));
                arrCountries.add(country);
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T09:02:26.430

这将帮助你伙计..在解析 JSON 时会有 json 数组 [] 和 json 对象 {}

```
 DefaultHttpClient httpclient = new DefaultHttpClient(
            new BasicHttpParams());
    HttpPost httppost = new HttpPost(
            "Your Json URL");

    httppost.setHeader("Content-type", "application/json");

    InputStream inputStream = null;
    String result = null;
    HttpResponse response = null;
    try {
        response = httpclient.execute(httppost);

        HttpEntity entity = response.getEntity();

        inputStream = entity.getContent();
        BufferedReader reader = null;

        reader = new BufferedReader(new InputStreamReader(inputStream,
                "UTF-8"), 8);

        StringBuilder sb = new StringBuilder();

        String line = null;
        try {
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        result = sb.toString();
        int k = 0;

        JSONObject jObject = null;

        jObject = new JSONObject(result);

        String aJsonString = jObject.getString("results");
        String name = aJsonString;

        JSONArray jArray = null;

        jArray = jObject.getJSONArray("results");

        JSONObject oneObject = null;
        oneObject = jArray.getJSONObject(0);

        JSONArray jArray1 = null;
        jArray1 = oneObject.getJSONArray("address_components");//keyword

        JSONObject oneObject1 = null;
        oneObject1 = jArray1.getJSONObject(1);

        String oneObjectsItem1 = oneObject1.getString("long_name");//keyword
        City = oneObjectsItem1;

    }

    catch (IOException e) {
        int x = 0;
    }
    return City; 
```

# powershell - 如何使用 Powershell 控制 Azure VM

> ID：11010852
> 
> 赞同：3
> 
> 时间：2012-06-13T08:22:51.303
> 
> 标签：powershell, azure, virtual-machine

您好，我正在尝试像 Amazon EC2 一样自动化 AZURE VM 管理。有没有办法像 Amazon EC2 API 一样从 Powershell 管理 AZURE VM？我无法轻松找到 API 文档或如何操作。提前致谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T08:31:08.513

[Windows Azure 管理 Cmdlet](http://msdn.microsoft.com/en-us/library/windowsazure/jj152841)列出了许多 AzureVM cmdlet。

*   Add-AzureDataDisk ：将新数据磁盘添加到虚拟机对象。
*   Add-AzureProvisioningConfig ：将预配配置添加到 Windows Azure 虚拟机。
*   Add-AzureEndpoint ：将新端点添加到 Windows Azure 虚拟机

*   Export-AzureVM ：将 Windows Azure 虚拟机状态导出到文件。

.....还有更多

这些不能满足您的需要吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T08:33:22.917

Windows Azure 有一个基于 REST 的 API，用于几乎所有内容，包括[管理 API](http://msdn.microsoft.com/en-us/library/windowsazure/ee460799.aspx)。此外，该 API 具有一组相应的[Windows Azure PowerShell cmdlet](http://wappowershell.codeplex.com/documentation)，您可以调用它们，这实际上让您可以通过 PowerShell 自动执行整个部署。

最新版本 2.2.2 能够保留订阅设置，无需重复订阅 ID 和证书指纹等参数。[技术传播者 Michael Washam 在此处](http://michaelwasham.com/2012/03/12/windows-azure-powershell-cmdlets-2-2-2-release/)发布了有关 v2.2.2 的博客。

# php - 将“1 小时 19 分钟”变为“1 小时 19 分钟”

> ID：11010854
> 
> 赞同：0
> 
> 时间：2012-06-13T08:22:51.633
> 
> 标签：php, replace

我有包含电影运行时间的字符串：

```
1 h 19 min 
```

现在我希望它看起来像这样：

```
1h 19m 
```

我知道这实际上应该很容易，但我只是找不到解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-13T08:27:12.053

```
$str = str_replace(array(' h', ' min'), array('h', 'm'), $str); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-13T08:25:32.720

```
$runtime="1 h 19 min";
$runtime=str_replace(" h","h",$runtime);
$runtime=str_replace(" min","m",$runtime); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-13T08:25:24.043

您可以使用正则表达式删除数字和非数字之间的所有空格：

```
$str = preg_replace('/(?<=\d) *(?=\D)/', '', $str); 
```

[**看到它在行动**](http://ideone.com/7xtYx)。

**更新：**不幸的是，这不会将“min”变成“m”，我实际上并没有注意到这是需要的。

鉴于此，`str_replace`具有诸如[bsdnoobz 之](https://stackoverflow.com/a/11010917/50079)类的数组的解决方案确实是唯一明智的方法。但只是为了好玩：

```
$str = preg_replace('/(?<=\d) *(\D)\S*/', '$1', $str); 
```

[**看到它在行动**](http://ideone.com/d5uIL)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T08:27:13.170

最简单的方法

`$runtime = "1 h 19 min";`

 `$runtime = str_replace(" h", "h", $runtime);` 

`$runtime = str_replace(" min", "min", $runtime);`

# ios - Apple 如何使用 UIKit 中的隐藏图标

> ID：11010855
> 
> 赞同：0
> 
> 时间：2012-06-13T08:22:53.570
> 
> 标签：ios, uikit, icons, app-store

GitHub 上有一个项目（[UIKit-Artwork-Extractor](https://github.com/0xced/UIKit-Artwork-Extractor/)）从 UIKit 中提取图像。在您的应用程序中使用这些图像时，Apple 会采取什么措施。例如，我计划在未成功发送消息时使用感叹号图标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T08:33:25.313

我认为从 UIKit 中提取图标或在图形编辑器中创建完全相同的图标之间没有区别。在[iOS Human Interface Guidelines](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/IconsImages/IconsImages.html#//apple_ref/doc/uid/TP40006556-CH14-SW1)指南中写道：

> 避免在您的作品中使用 iOS 界面元素。您不希望用户将您的图标或图像与 iOS UI 混淆。

但是，如果您想使用例如操作按钮图像或后退按钮图像，我认为如果它完全符合用户的期望，那是完全可以的。

希望能帮助到你

# asp.net - 通过 asp.net 中的一系列 Web 服务调用获取数据时，如何向用户显示进度？

> ID：11010857
> 
> 赞同：0
> 
> 时间：2012-06-13T08:22:59.313
> 
> 标签：asp.net, web-services, .net-3.5

我有一个 asp.net 控件（.net 3.5），它对 web 服务进行一系列调用以从数据库中获取数据，然后将其放入 gridviews 中。由于每个数据库查询需要几秒钟的时间，我会在一系列调用中而不是一次性完成，否则它会超时。

在返回所有数据之前，该页面似乎不会呈现。我如何在每次调用时向用户显示进度，以让他们确信某些事情正在实际发生？

网格包含财务数据。用户选择月份和年份，然后按下一个按钮，启动这个 web 服务调用序列。所以这通常发生在回发中（尽管页面最初呈现的是当前月份和年份的数据，如果有的话）。

我遇到过[UpdatePanel](http://msdn.microsoft.com/en-us/library/bb386573%28VS.90%29.aspx)。这会使每个表格在填充数据时呈现吗？

编辑：这是我到目前为止使用 Sunny 的建议所做的尝试

.ascx 文件

```
<asp:UpdateProgress ID="UpdateProgress1" AssociatedUpdatePanelID="UpdatePanel1" runat="server">
    <ProgressTemplate>
      UpdatePanel1 updating...
    </ProgressTemplate>
    </asp:UpdateProgress>
<asp:UpdateProgress ID="UpdateProgress2" AssociatedUpdatePanelID="UpdatePanel2" runat="server">
    <ProgressTemplate>
      UpdatePanel2 updating...
    </ProgressTemplate>
    </asp:UpdateProgress>

<asp:Label runat="server" ID="lblOB"></asp:Label><asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <contenttemplate>
<h3><asp:Label runat="server" ID="lblT1"></asp:Label></h3>
<asp:GridView runat="server" id="gridT1">
</asp:GridView>

    </contenttemplate>
</asp:UpdatePanel>
<asp:UpdatePanel ID="UpdatePanel2" runat="server">
    <contenttemplate>
<h3><asp:Label runat="server" ID="lblT2"></asp:Label></h3>
<asp:GridView runat="server" id="gridT2">
<Columns>
    </Columns>
    </asp:GridView>
    </contenttemplate>
</asp:UpdatePanel> 
```

.ascx.vb 文件：

```
 (Pseudo code)
 Call webservice for table 1
 gridT1.datasource = table 1 data from webserivce
 gridT1.DataBind()
 lblT1.text = heading

 Call webservice for table 2
 gridT2.datasource = tabld 2 data from webserivce
 gridT2.DataBind()
 lblT12text = heading 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:29:00.510

使用可以在这里使用 Ajax 加载器或 UpdateProgress Ajax 控件。

# javascript - jstree select_node.jstree没有触发

> ID：11010866
> 
> 赞同：0
> 
> 时间：2012-06-13T08:24:08.077
> 
> 标签：javascript, jquery, jstree

我正在使用 jstree 并且 select_node.jstree 不会触发，这是代码

```
$(document).ready(function () {

//$("#MySplitter").splitter();
setupSplitter();

$("#divJsTreeDemo").jstree({
    "themes": {
        "theme": "default",
        "dots": false,
        "icons": false
    },
    "plugins": [
            "core", "themes", "json_data", "ui", "types"
    ],
    "types": {
        // I set both options to -2, as I do not need depth and children count checking
        // Those two checks may slow jstree a lot, so use only when needed
        "max_depth": -2,
        "max_children": -2,
        // I want only `drive` nodes to be root nodes 
        // This will prevent moving or creating any other type as a root node
        "valid_children": ["drive"],
        "types": {
            // The default type
            "default": {
                // I want this type to have no children (so only leaf nodes)
                // In my case - those are files
                "valid_children": "none",
                // If we specify an icon for the default type it WILL OVERRIDE the theme icons
                "icon": {
                    "image": "../../Repository/Images/file.png"
                }
            },
            // The `folder` type
            "folder": {
                // can have files and other folders inside of it, but NOT `drive` nodes
                "valid_children": ["default", "folder"],
                "icon": {
                    "image": "../../Repository/Images/folder.png"
                }
            }
        }
    },
    "json_data": {
        "ajax": {
            "type": "POST",
            "url": "GetTreeNodes",
            "data": function (n) {

                var myJSONText = JSON.stringify({ id: n.attr ? n.attr("id").replace("node", "") : 0 }, replacer);

                return { id: n.attr ? n.attr("id").replace("node", "") : 0 };

            },
            "success": function (data) {

                $(".folder-file-container").remove();

                RenderFileFolder(data);

            }
        }
        //            "data": {
        //                // `data` can also be an object
        //                "data": {
        //                    "title": "The node title",
        //                    // omit when not needed
        //                    "attr": {},
        //                    // if `icon` contains a slash / it is treated as a file, used for background
        //                    // otherwise - it is added as a class to the <ins> node
        //                    "icon": "../../Repository/Images/pdf.png"
        //                },
        //                // the `metadata` property will be saved using the jQuery `data` function on the `li` node
        //            }
    }

}).bind("select_node.jstree", function (e, data) { 

    alert(data.rslt.obj.data("id")); 

});

}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T14:08:51.503

试试这个：

```
 .bind("select_node.jstree", function (e, data) {
        var a = $.jstree._focused().get_selected();
        alert(a);
    } 
```

（取自[jstree 选择节点](https://stackoverflow.com/questions/2674841/jstree-select-node)）。

# android - 为什么在独立服务中工作时不会在 Gingerbread 上调用 onProgressUpdate()？

> ID：11010867
> 
> 赞同：0
> 
> 时间：2012-06-13T08:24:13.033
> 
> 标签：android, android-asynctask, android-service, android-4.0-ice-cream-sandwich, android-2.3-gingerbread

有点复杂的情况——

*   服务被打包为一个单独的 APK，在清单中只包含它；
*   Service 接受传入的请求并使用 MessageHandler 处理它们；
*   在一种情况下，处理程序会生成一个 AsyncTask，如下所示：

    ```
    private class XHandler implements MessageHandler {

        @Override
        public void handleMessage(Message incoming) {

            Bundle b = incoming.getData();

            ...            
            new XAsyncTask(...).execute();
        }
    } 
    ```

*   教科书式的简单异步任务报告进度

*   ...在 ICS 中，但不在 Gingerbread 中。

它是什么 - 一个错误？

AsyncTask 文档说“onProgressUpdate(Progress...)，在调用 publishProgress(Progress...) 后在 UI 线程上调用。” 但是，没有用于独立服务的 UI 线程之类的东西，是吗？

服务文档说“服务在托管它的应用程序的主线程中运行，b 默认” - 这是否构成 UI 线程？

**更新 2012/07/10：**将 android:targetSdkVersion="10" 更改为 android:targetSdkVersion="15" 在 ICS 上运行应用程序时会产生相同的效果。到目前为止，唯一有效的组合是在 API 15 上运行的 targetSdkVersion="10"。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:49:07.483

我认为您关于 main/ui 线程的问题在此页面上得到了很好的解释：[线程](http://developer.android.com/guide/topics/fundamentals/processes-and-threads.html#Threads)

> 当应用程序启动时，系统会为应用程序创建一个执行线程，称为“main”。这个线程非常重要，因为它负责将事件分派给适当的用户界面小部件，包括绘图事件。它也是您的应用程序与 Android UI 工具包中的组件（来自 android.widget 和 android.view 包的组件）交互的线程。因此，主线程有时也称为 UI 线程。

不确定如何帮助您完成 AsyncTask。你想做什么？您的服务是如何实施的？AsyncTask 完成后你想做什么？

你为什么不使用[IntentService](http://developer.android.com/reference/android/app/IntentService.html)？

# asp.net - VB.net 文本框返回 hit(enter) 事件

> ID：11010868
> 
> 赞同：0
> 
> 时间：2012-06-13T08:24:14.393
> 
> 标签：asp.net, vb.net

如何在 TextBox 上捕获返回命中（输入）？

以下不起作用。我不断收到错误“找不到 KeyPress 事件”。

```
Private Sub TextBox_KeyPress(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyPressEventArgs) Handles TextBox.KeyPress
        If TextBox.Text Is Nothing Then Return
        If TextBox.Text.Length = 6 And Asc(e.KeyChar) = 13 Then
            ' Do something here
        End If

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T08:31:58.993

尝试删除文本框并重新输入代码

```
If TextBox.Text Is Nothing Then Return
    If TextBox.Text.Length = 6 And Asc(e.KeyChar) = 13 Then
        ' Do something here
    End If 
```

因为这应该可以工作 - 您很可能对文本框名称或按键声明代码搞砸了。

我刚刚在一个新的文本框中检查了该代码，它运行良好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T08:42:43.427

以下代码确实有效：

```
Private Sub TextBox_KeyPress(ByVal KeyAscii As Integer)

        If TextBox.Text Is Nothing Then Return
        If TextBox.Text.Length = 6 And KeyAscii = 13 Then
            ' Do something here
        End If

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-29T04:36:33.873

```
Private Sub TextBox1_KeyPress(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyPressEventArgs) Handles TextBox1.KeyPress
    If e.KeyChar = Convert.ToChar(13) Then
        If TextBox1.Text.Trim <> Nothing Then
            'Do Something here
        End If
    End If 
```

# javascript - 创建单独的 js 文件以包含

> ID：11010873
> 
> 赞同：0
> 
> 时间：2012-06-13T08:24:35.637
> 
> 标签：javascript, external-js

我有一个 html 文件，其中当前包含我的所有 javascript 代码。我想制作一个单独的 .js 文件，将所有 javascript 代码放入其中并将其包含在我的 .html 文件中。我试过这样做，还删除了 .js 文件中的开始/结束标签并将这一行放在 .html 文件中 -

```
<script type='text/javascript' src="myfile.js"></script> 
```

但是，这是行不通的。关于有什么问题的任何想法？提前致谢。

- - - - - - - - - - -编辑 - - - - - - - - - - - - - - -

```
<html>  

<title>Process Details</title>  

<head>  
<script type="text/javascript" src="https://www.google.com/jsapi"></script>  
<script type="text/javascript" src="myfile.js">  
</script>  

<style type="text/css">  
  body { font-size: 80%; font-family: 'Lucida Grande', Verdana, Arial, Sans-Serif; }  
  ul#tabs { list-style-type: none; margin: 30px 0 0 0; padding: 0 0 0.3em 0; }  
  ul#tabs li { display: inline; }  
  ul#tabs li a { color: #42454a; background-color: #dedbde; border: 1px solid #c9c3ba; border-bottom: none; padding: 0.3em; text-decoration: none; }  
  ul#tabs li a:hover { background-color: #f1f0ee; }  
  ul#tabs li a.selected { color: #000; background-color: #f1f0ee; font-weight: bold; padding: 0.7em 0.3em 0.38em 0.3em; }  
  div.tabContent { border: 1px solid #c9c3ba; padding: 0.5em; background-color: #f1f0ee; }  
  div.tabContent.hide { display: none; }  
  .heading { font-size:110%; font-family:'Century Schoolbook'; color: maroon; }  
  .data { font-size:110%; font-family:'Century Schoolbook'; color:black; }  
</style>  

</head>  

<body onload="init()">
<center>
<font face='Calibri' size='3' color='Blue'>PID : </font>
<select id='list' onchange="refreshData()">
</select>
<form>
<input type="button" id="Refresh" onclick="refreshPage()" value="Refresh Data"/>
</form>
</center>

<ul id="tabs">
<li><a href="#memory">Memory</a></li>
<li><a href="#thread">Thread</a></li>
<li><a href="#summary">Summary</a></li>
</ul>
<div class="tabContent" id="memory">
<table id="graphtab" align="center">

<tr>
<td id="heap" align="center"></td>
<td id="nonheap" align="center"></td>
</tr>
<tr>
<td id="resident" align="center"></td>
<td id="pagefaults" align="center"></td>
</tr>

</table>
</div>
<div class="tabContent" id="thread">
<table id="threadtab" align="center">

<tr>
<td id="cpuusage" align="center"></td>
<td id="count" align="center"></td>
</tr>
<tr>
<td id="threadlist" align="center"></td>
<td id="threaddets" align="center"></td>
</tr>

</table>
</div>
<div class="tabContent" id="summary">
</div>
<a href="client.html">Home Page</a>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:49:32.700

使用`http`协议而不是`https`. **在Chrome** 中使用 https 会引发 GET 异常，*但在* **Firefox**中不会。

你`<title>`应该在`<head>`标签内。

# cookies - IE/Firefox 中的 Cookie 字符编码

> ID：11010875
> 
> 赞同：2
> 
> 时间：2012-06-13T08:24:38.873
> 
> 标签：cookies, encoding, character-encoding, cross-browser

我在我的 ajax 响应中添加了一个 cookie。cookie 包含一些 unicode 字符（例如`تست`）。
但是，当我想在 Firefox 和 IE 中向用户显示 cookie 内容时，它会显示`ØªØ³Øª`)。
我可以做些什么来在 Firefox 和 IE 中获取正确的字符吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-07-16T08:48:34.437

在cookie中保存一些id，并通过这个id提取数据（从数组、数据库、文件中）

# java - JPA 和 PostgreSQL：如何使用 NamedNativeQuery Annotation 调用存储过程

> ID：11010879
> 
> 赞同：1
> 
> 时间：2012-06-13T08:24:53.490
> 
> 标签：java, spring, jpa, stored-procedures

使用 Postgresql 8.1、Spring 3.0、Hibernate 3.6。我有一个调用存储过程的方法，该过程无需使用注释即可工作，本质上是

```
 ....
         return (Integer) getJpaTemplate().execute(new JpaCallback() {

            public Object doInJpa(EntityManager em) {                   
                // Query query = em.createNamedQuery("checkZone");
                Query query = em.createNativeQuery("select zoneArea from zoneArea(:pId, :zId)");
                query.setParameter("pId", p.getId());
                query.setParameter("zId", z.getId());

                try {
                    return query.getSingleResult(); // Integer expected
                } catch (NoResultException e) {
                    return 0;
                }
            }
        });
    .... 
```

我如何使用注释来做到这一点，这是我的尝试，但不起作用。

```
@NamedNativeQueries({
@NamedNativeQuery(
    name = "checkZone",
    query = "select zoneArea from zoneArea(:pId, :zId)",
    hints = {
        @QueryHint(name = "org.hibernate.callable", value = "true")
    },
    resultSetMapping = "scalar",
    resultClass = Integer.class)})
@SqlResultSetMapping(name="scalar",columns=@ColumnResult(name="result"))
@Entity 
```

这是例外

```
Caused by: org.postgresql.util.PSQLException: This statement does not declare an OUT parameter.  Use { ?= call ... } to declare one.
at org.postgresql.jdbc2.AbstractJdbc2Statement.registerOutParameter(AbstractJdbc2Statement.java:1849)
at org.postgresql.jdbc3.AbstractJdbc3Statement.registerOutParameter(AbstractJdbc3Statement.java:1513)
at org.hibernate.dialect.PostgreSQLDialect.registerResultSetOutParameter(PostgreSQLDialect.java:335)
at org.hibernate.loader.Loader.prepareQueryStatement(Loader.java:1713)
at org.hibernate.loader.Loader.doQuery(Loader.java:801) 
```

我有工作代码，但想用注释来工作，任何想法都值得赞赏。

# iphone - UIWEBVIEW +内容适合webview的框架

> ID：11010880
> 
> 赞同：1
> 
> 时间：2012-06-13T08:24:53.800
> 
> 标签：iphone, uiwebview

我在我的项目中使用 UIwebview。webview 中的内容是从 html 数据中填充的通过执行以下代码，如下所示：

```
[webView loadHTMLString:[NSString stringWithFormat:@"<html><body><font face=\"Arial\" size=\"3\"</font>%@</body></html>",[[[dict_Response objectForKey:@"objects"]objectAtIndex:0]objectForKey:@"detaildescription"]] baseURL:[NSURL URLWithString:@"http://newsletter.nobelbiocare.com/"]]; 
```

现在我正在设置 webview 的框架：-

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
 if(appDel.ori_appDel == UIInterfaceOrientationPortraitUpsideDown || appDel.ori_appDel == UIInterfaceOrientationPortrait)
        {
webView.frame=CGRectMake(30,150,710,450);
}else{
webView.frame=CGRectMake(30,150,930,450);
}
return yes;
} 
```

现在发生的事情是在横向模式下，内容以正确的方式显示。但是当我移动到纵向模式时，它会自动显示水平滚动。我不想在水平模式下滚动 webview..请帮助我..如何解决这个问题.

我使用过 sizetofit 和 autoresizing|autofixing。但它也没有解决请帮帮我..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T08:56:34.813

@shweta

尝试在 webViewDidFinishLoad 中更新您的 webview：这将对您有所帮助。并尝试在 html 而不是 web 视图框架中设置大小。

```
- (void)webViewDidFinishLoad:(UIWebView *)webview {
    CGRect oldBounds = [[self webview] bounds];
    //in the document you can use your string ... ans set the height
    CGFloat height = [[webview stringByEvaluatingJavaScriptFromString:@"document.height"] floatValue];
    [webview setBounds:CGRectMake(oldBounds.origin.x, oldBounds.origin.y, oldBounds.size.width, height)];
} 
```

主要关心的是方法。

```
[webview stringByEvaluatingJavaScriptFromString:@"document.height"] 
```

通过使用 javascript。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T08:53:48.780

代替

`sizetofit`和`autoresizing|autofixing`

写

`webview.scalePageToFit=TRUE`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T08:41:33.290

用这个：

```
 [webView loadHTMLString:[NSString stringWithFormat:@"<html><div style='font-family: arial,helvetica;font-size: 14px;'>%@</div></html>",[[[dict_Response objectForKey:@"objects"]objectAtIndex:0]objectForKey:@"detaildescription"]] baseURL:[NSURL URLWithString:@"http://newsletter.nobelbiocare.com/"]]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T08:53:54.520

试试这些
1\. 将格式说明符放在正文标记之间作为`</font>%@</body></html>`.
2.尝试在此重新加载网页视图

```
- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation {
    //Reload your web view here
} 
```

# graph - 如何学习 Tarjan 算法？

> ID：11010881
> 
> 赞同：15
> 
> 时间：2012-06-13T08:24:55.533
> 
> 标签：graph, depth-first-search, tarjans-algorithm

我已经尝试从 Wikipedia 学习 Tarjan 的算法 3 个小时了，但我就是无法理解它。:(

[http://en.wikipedia.org/wiki/Tarjan's_strongly_connected_components_algorithm#cite_note-1](http://en.wikipedia.org/wiki/Tarjan%27s_strongly_connected_components_algorithm)

为什么它是 DFS 树的子树？（实际上 DFS 产生了一片森林？o_O）为什么`v.lowlink=v.index`暗示那`v`是一个根？

有人可以向我解释一下/给出这个算法背后的直觉或动机吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-13T14:03:06.167

这个想法是：在遍历树时，每次搜索分支并回溯时，都要检查是否遇到了树中“上”节点的边。

*   如果您没有 ( `if (v.lowlink = v.index)`)，那么您刚刚完成了一个 SCC - 它由当前节点和堆栈上的所有节点组成。这正是 DFS 树的子树，除了 SCC 中已经完成的节点。

*   如果这样做，则将此信息传播到“上”节点（`v.lowlink := min(v.lowlink, w.lowlink)`），因为与 DFS 树中的路径相结合，边缘会创建“向上”路径。

DFS 产生一片森林，但您总是一次只考虑一棵树。一个 SCC 总是包含在一个 DFS 树中，否则（作为一个 SCC）在两个（所有）树之间会有一条双向路径 - 这是一个矛盾。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-25T21:46:17.800

只是添加到 pjotr 的答案： v.lowlink 基本上是您在树中找到的最上面节点的索引。请记住，在这种情况下，最高意味着最低，因为您在向下走时会不断增加索引。现在在处理完所有的继任者之后，基本上有三种情况：

1.  v.lowlink < v.index：这表明你找到了一个后沿。请注意，我们不仅找到了任何后沿，而且还找到了指向当前节点“上方”的节点的后沿。这就是 v.lowlink < v.index 的含义。

2.  v.lowlink = v.index：在这种情况下，我们所知道的是，没有后边指向当前节点之上的任何东西。该节点可能有一个后沿（这意味着您的一个后继节点 w 具有一个低链接，使得 w.lowlink = v.lowlink = v.index）。也可能是在当前节点下方有一个后边缘引用了某个东西，这意味着当前节点下方有一个已经打印出来的强连接组件。但是，当前节点也绝对是强连接组件的根。

3.  v.lowlink > v.index：这实际上是不可能的。为了完整起见，我只是列出它。;)

希望能帮助到你！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-17T05:55:28.377

关于 Tarjan 算法的一些直觉：

*   在 DFS 期间，当我们遇到来自顶点 v 的后边时，我们更新它的最低可达祖先，即我们更新 low[v] 的值

*   现在当一个顶点的所有出边都处理完毕，即我们即将退出对顶点v的DFS调用时，我们检查low[v]的值，是否low[v] == v（解释如下）。如果不是，这意味着 v 不是 SCC 的根，我们现在将好处赋予 v 的父级，即 parent[v] 的最低可达祖先现在更改为 low[v]。

这听起来很合乎逻辑，好像虽然从 parent[v] 到 v 的祖先没有直接的后沿，但是有一条路径（v 的后沿 + 到 v 的边）仍然可以通过它 parent[v] 到达v 的祖先。因此我们在这里也更新了 low[parent[v]]。因此，我们将继续更新这条链，并且所有 v 的 low[v] 将继续更新，直到我们到达祖先（通过回溯）。对于这个祖先，low[v] 将等于 v。因此这将作为 SCC 的根。

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-10T05:30:55.457

# 掌握桥梁和发音算法的途径

*   观看[此](https://www.youtube.com/watch?v=aZXi1unBdJA)视频，获得一种很棒的感觉，即您已经非常了解该算法。

*   [从这里](https://www.geeksforgeeks.org/bridge-in-a-graph/)和[这里](https://www.geeksforgeeks.org/articulation-points-or-cut-vertices-in-a-graph/)练习算法。
*   练习题来掌握它：
    *   [A. 裁剪图](https://codeforces.com/problemset/problem/193/A)
    *   [EC_P - 关键边缘](https://www.spoj.com/problems/EC_P/)
    *   [SUBMERGE - 淹没岛屿](https://www.spoj.com/problems/SUBMERGE/)
    *   [POLQUERY - 警方查询](https://www.spoj.com/problems/POLQUERY/)

# php - 是否可以在不使用任何 php 的情况下仅使用 jquery 上传图像

> ID：11010885
> 
> 赞同：0
> 
> 时间：2012-06-13T08:25:03.647
> 
> 标签：php, javascript, jquery, ajax

我正在尝试使用 Ajax/jquery 上传图像而不刷新，也没有在后端使用任何 php。我搜索了很多，但都在后端使用 php，我的要求是不要使用 php。

[http://www.9lessons.info/2011/08/ajax-image-upload-without-refreshing.html](http://www.9lessons.info/2011/08/ajax-image-upload-without-refreshing.html)

[http://dondedeportes.es/uploader-previewer/](http://dondedeportes.es/uploader-previewer/)

如果没有 php 是不可能的。请给我一些替代方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T08:25:47.833

不，如果没有某种后端来处理上传，就不可能上传图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T08:29:21.250

如果没有服务器端处理，您无法将图像*上传到服务器。*

如果您的目标只是在页面中显示图像，*而不是*将其上传到服务器（可能作为预览），则可以通过[File API](http://www.w3.org/TR/FileAPI/)和[`data:`URI](http://en.wikipedia.org/wiki/Data_URI_scheme)的组合在较新的浏览器上实现。File API 让您可以在*客户端*访问用户识别的文件，包括读取其内容的能力；URI 允许您使用该图像文件中的数据将`data:`图像放在页面上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T08:29:34.683

你使用什么样的服务器？如果它支持 Webdav，您可以使用[Javascript Webdav-Client](http://debris.demon.nl/projects/davclient.js/doc/README.html)。但是为此，必须配置服务器。

# android - Android：删除某些类的 Sherlock 操作栏项目

> ID：11010896
> 
> 赞同：3
> 
> 时间：2012-06-13T08:25:38.763
> 
> 标签：android, contextmenu, share, actionbarsherlock

我正在使用 Sherlock 操作栏在操作栏中显示几个图标，例如共享、信息等。

问题是我想删除某些活动/片段的按钮之一（共享），但我做不到。

我的活动 (StartActivity) 扩展自 InfoActivity，它是实现`onCreateOptionsMenu`.

我试图覆盖该`onCreateOptionsMenu`方法并执行一个`clear()`但它不起作用：

```
@Override
    public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
        super.onCreateOptionsMenu(menu, inflater);
    } 
```

关于如何做到这一点的任何想法？

提前非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T08:36:42.930

找到有问题的菜单项并禁用或隐藏它。像这样的东西，`onCreateOptionsMenu()`或者`onPrepareOptionsMenu()`如果你想让它动态：

```
menu.findItem(R.id.menu_share).setVisible(false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T09:15:08.117

我最终所做的是创建不同的类：一个将菜单中的共享按钮作为按钮，一个没有，只是使适当的活动从适当的类扩展。

比如StartActivity，我不希望它有分享功能，所以我把它从一个没有分享按钮的Activity扩展出来。

感谢@NikolayElenkov 的帮助！

# php - 如何使用 php 从 mysql 查询中提取表名？

> ID：11010901
> 
> 赞同：3
> 
> 时间：2012-06-13T08:25:51.127
> 
> 标签：php, mysql, regex

我想用 php 检测 mysql 查询中的所有表。我看到了适用于普通查询的 mysql_field_table() 函数。但是当您为表使用替代名称（**table_name AS new_name**）时，它返回替代名称而不是真实名称，我如何通过正则表达式修复它。但现在我的问题是这样的高级查询：

```
SELECT mail_id, mail_date, mail_from, mail_to, mail_subject, (
            (
            SELECT COUNT(*)
            FROM `sys_messagecenter_qmails`
            WHERE qmail_mail_id = mail_id
            ) + (
            SELECT COUNT(*)
            FROM `sys_messagecenter_rels`
            WHERE rel_mail_id = mail_id
            )
            ) AS email_total, (
            SELECT COUNT(*)
            FROM `sys_messagecenter_rels`
            WHERE rel_mail_id = mail_id
            ) AS email_sent, (
            SELECT COUNT(*)
            FROM `sys_messagecenter_rels`
            INNER JOIN `sys_email_receives` ON receive_reply_to = rel_sent_id
            WHERE rel_mail_id = mail_id
            ) AS email_reply FROM `sys_messagecenter_emails` WHERE mail_draft='No' 
ORDER BY mail_id ASC LIMIT 0,10 
```

现在我想我需要一些正则表达式来检测查询中的所有真实表名。或任何其他完美的解决方案。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T09:19:47.450

抱歉...这里有一个提取它的解决方案（如果您的查询在`$query`）

```
if(preg_match_all('/((FROM|JOIN) `(.*)`)/', $query, $matches)) {
    $tables = array_unique($matches[3]);
    print_r($tables);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-20T12:16:49.187

我还需要从查询中提取表名。然后我编写自己的脚本，该脚本几乎适用于每个基本查询。

```
$tables = array();
$sql ="SELECT m.`id` FROM my_table m INNER JOIN mytable_2 m2 ON(m.`id` = m2.`m_id`) ";

    $query_structure = explode( ' ', strtolower( preg_replace('!\s+!', ' ', $sql) ) );

    $searches_from = array_keys( $query_structure , 'from');
    $searches_join = array_keys( $query_structure , 'join');
    $searches_update = array_keys( $query_structure , 'update');
    $searches_into = array_keys( $query_structure , 'into');
    $searches = array_merge($searches_join , $searches_from , $searches_update , $searches_into );
    foreach($searches as $search ){
        if(isset($query_structure[$search+1])){
            $tables[] = trim( $query_structure[$search+1] , '` ');
        }
    }
    print_r($tables); 
```

希望这会有所帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-12-19T05:43:30.410

我使用下面的代码（a 是 var_dump 等效项）：

```
/**
 * Only works if the table names and database names don't have a space or a dot in them.
 */

$queries = [
    "select * from my_table",
    "select * from `my_table`",
    "select * from my_db.my_table",
    "select * from my_db.`my_table`",
    "select id from my_table where x=2",
    "select id from my_table mt inner join other_table ot on ot.my_table_id=mt.id where mt.x=2",
    "SELECT mail_id, mail_date, mail_from, mail_to, mail_subject, (
            (
            SELECT COUNT(*)
            FROM `sys_messagecenter_qmails`
            WHERE qmail_mail_id = mail_id
            ) + (
            SELECT COUNT(*)
            FROM `sys_messagecenter_rels`
            WHERE rel_mail_id = mail_id
            )
            ) AS email_total, (
            SELECT COUNT(*)
            FROM `sys_messagecenter_rels`
            WHERE rel_mail_id = mail_id
            ) AS email_sent, (
            SELECT COUNT(*)
            FROM `sys_messagecenter_rels`
            INNER JOIN `sys_email_receives` ON receive_reply_to = rel_sent_id
            WHERE rel_mail_id = mail_id
            ) AS email_reply FROM `sys_messagecenter_emails` WHERE mail_draft='No' 
ORDER BY mail_id ASC LIMIT 0,10 ",
      "select count(*) as count from (
select 
user_id,
permission_group_id,
concat(uhpg.user_id, '. ', u.pseudo) as user_id_plus,
concat(uhpg.permission_group_id, '. ', pg.name) as permission_group_id_plus
from lud_user_has_permission_group uhpg
inner join lud_user u on uhpg.user_id=u.id
inner join lud_permission_group pg on uhpg.permission_group_id=pg.id
) as ttt",
];

$tables = [];

foreach ($queries as $query) {
    a($query);
    if (preg_match_all('!((FROM|JOIN)\s([\S]+))!i', $query, $matches)) {
        $tables = array_unique($matches[3]);
        array_walk($tables, function (&$v) {
            $p = explode('.', $v, 2);
            $v = array_pop($p);
            $v = trim($v, '`');
        });
        $tables = array_filter($tables, function ($v) {
            return ('(' !== $v);
        });
        a($tables);
    }
} 
```

这给出了以下输出：

```
string(22) "select * from my_table"

array(1) {
  [0] => string(8) "my_table"
}

string(24) "select * from `my_table`"

array(1) {
  [0] => string(8) "my_table"
}

string(28) "select * from my_db.my_table"

array(1) {
  [0] => string(8) "my_table"
}

string(30) "select * from my_db.`my_table`"

array(1) {
  [0] => string(8) "my_table"
}

string(33) "select id from my_table where x=2"

array(1) {
  [0] => string(8) "my_table"
}

string(89) "select id from my_table mt inner join other_table ot on ot.my_table_id=mt.id where mt.x=2"

array(2) {
  [0] => string(8) "my_table"
  [1] => string(11) "other_table"
}

string(810) "SELECT mail_id, mail_date, mail_from, mail_to, mail_subject, (
            (
            SELECT COUNT(*)
            FROM `sys_messagecenter_qmails`
            WHERE qmail_mail_id = mail_id
            ) + (
            SELECT COUNT(*)
            FROM `sys_messagecenter_rels`
            WHERE rel_mail_id = mail_id
            )
            ) AS email_total, (
            SELECT COUNT(*)
            FROM `sys_messagecenter_rels`
            WHERE rel_mail_id = mail_id
            ) AS email_sent, (
            SELECT COUNT(*)
            FROM `sys_messagecenter_rels`
            INNER JOIN `sys_email_receives` ON receive_reply_to = rel_sent_id
            WHERE rel_mail_id = mail_id
            ) AS email_reply FROM `sys_messagecenter_emails` WHERE mail_draft='No' 
ORDER BY mail_id ASC LIMIT 0,10 "

array(4) {
  [0] => string(24) "sys_messagecenter_qmails"
  [1] => string(22) "sys_messagecenter_rels"
  [4] => string(18) "sys_email_receives"
  [5] => string(24) "sys_messagecenter_emails"
}

string(360) "select count(*) as count from (
select 
user_id,
permission_group_id,
concat(uhpg.user_id, '. ', u.pseudo) as user_id_plus,
concat(uhpg.permission_group_id, '. ', pg.name) as permission_group_id_plus
from lud_user_has_permission_group uhpg
inner join lud_user u on uhpg.user_id=u.id
inner join lud_permission_group pg on uhpg.permission_group_id=pg.id
) as ttt"

array(3) {
  [1] => string(29) "lud_user_has_permission_group"
  [2] => string(8) "lud_user"
  [3] => string(20) "lud_permission_group"
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-20T08:24:43.417

这不是最优雅的解决方案，但已经通过了我迄今为止运行的所有测试：

```
function get_table_name($query) {

    $query = trim(str_replace(PHP_EOL, ' ', $query));

    $table = '';

    if(strtolower(substr($query, 0, 12)) == 'create table') {
        $start = stripos($query, 'CREATE TABLE') + 12;
        $end = strpos($query, '(');
        $length = $end - $start;
        $table = substr($query, $start, $length);
    }
    elseif(strtolower(substr($query, 0, 6)) == 'update') {
        $end = stripos($query, 'SET');
        $table = substr($query, 6, $end);
    }
    elseif(strtolower(substr($query, 0, 11)) == 'alter table') {
        $parts = explode(' ', $query);
        $table = $parts[2];
    }
    elseif(strtolower(substr($query, 0, 11)) == 'insert into') {
        $parts = explode(' ', $query);
        $table = $parts[2];
    }
    elseif(strtolower(substr($query, 0, 12)) == 'create index') {
        $parts = explode(' ', $query);
        $table = $parts[4];
    }
    elseif(strtolower(substr($query, 0, 6)) == 'select') {
        $parts = explode(' ', $query);
        foreach($parts as $i => $part) {
            if(trim(strtolower($part)) == 'from') {
                $table = $parts[$i + 1];
                break;
            }
        }
    }
    elseif(strtolower(substr($query, 0, 29)) == 'create unique clustered index') {
        $parts = explode(' ', $query);
        $table = $parts[6];
    }
    elseif(strtolower(substr($query, 0, 22)) == 'create clustered index') {
        $parts = explode(' ', $query);
        $table = $parts[5];
    }
    elseif(strtolower(substr($query, 0, 15)) == 'exec sp_columns') {
        $parts = explode(' ', $query);
        $table = str_replace("'", '', $parts[2]);
    }
    elseif(strtolower(substr($query, 0, 11)) == 'delete from') {
        $parts = explode(' ', $query);
        $table = str_replace("'", '', $parts[2]);
    }

    return trim(str_replace(['`', '[', ']'], ['', '', ''], $table));

} 
```

# asp.net-mvc - 如何使用隐式本地化为 MvcSiteMapProvider 命名 resx 文件

> ID：11010902
> 
> 赞同：1
> 
> 时间：2012-06-13T08:26:04.803
> 
> 标签：asp.net-mvc, localization, sitemap, globalization, mvcsitemapprovider

我正在使用 MvcSiteMapProvider 并且我想本地化菜单条目。所以我在我的节点中添加了 resourceKey 属性，如下所示：

```
<mvcSiteMapNode  resourceKey="Home"  title="Home"  area ="" controller="Home" action="Index"/> 
```

我在 App_GlobalResources 文件夹的根目录下为每种语言创建了资源文件，我将它们命名为 Mvc.sitemap.resx、Mvc.sitemap.nl.resx 等。当然，站点地图中引用的所有键都是在资源中定义的文件。

我的站点地图名为 Mvc.sitemap，位于项目根目录的 SiteMap 文件夹中。

但是这两个名字都不起作用。构建站点地图时该`title`属性为空/空，因此不会出现该节点。

我还尝试使用名为 Web.sitemap.resx 的资源文件。

编辑：

我已经`enableLocalization="true"`在 web.config 和 Mvc.sitemap 中设置了。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T09:27:42.983

这个[线程](https://stackoverflow.com/questions/4005630/how-to-use-implicit-localization-with-mvcsitemap)可以帮助你。如果您不使用最新位，则必须确保已`enableLocalization="true"`在[配置中设置。](http://mvcsitemap.codeplex.com/wikipage?title=Registering%20the%20provider&referringTitle=Home)

# git - 基本的本地 Git 工作流程

> ID：11010903
> 
> 赞同：0
> 
> 时间：2012-06-13T08:26:13.427
> 
> 标签：git, workflow, local

我的本地 Git 工作流程应该如何？

我正在使用它来开发一些将在本地服务器上运行的软件。我还想将此服务器用作 git repo 主机。

到目前为止，我已经使用 --bare 在服务器上初始化了一个新的 repo，并将我当前的代码推送到它。

**如何将该代码签出到服务器上的目录（即/var/www/）？**

我认为我应该创建一个开发分支，然后在我的开发机器上使用 git pull 来创建它，然后在我接近完成一组特定功能时从开发分支创建一个发布分支。然后，此发布分支将与主（实时/生产）分支合并 - 按照[此处](http://nvie.com/posts/a-successful-git-branching-model/)描述的工作流程。

我的主要问题（上图）是：**如何将代码从裸 git 存储库签出到服务器上的实时目录？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:29:41.870

> 如何将该代码签出到服务器上的目录（即/var/www/）？

例如

```
cd /var/www && git clone /path/to/repo . 
```

> 如何从我的裸 git repo 签出代码到我服务器上的实时目录？

```
cd /var/www && git pull 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T08:40:48.873

我建议您在托管您的实时站点的服务器上也设置一个裸仓库。

要开始工作，您将那个裸仓库克隆到本地开发机器

`localhost:~# git clone you@yourlivehost:/path/to/bare /path/to/local/dev`

在该仓库中，您可以完成所有开发/提交/分支/合并的工作，完成后，您将推送到裸仓库。

您可以手动登录到您的实时服务器并将更改从裸仓库拉到您的实时服务中，或者让 post-update-hook 为您完成这项工作。

手动（第一次）：

```
localhost:~# ssh you@yourlivehost
yourlivehost:~# cd /path/to/live/server
yourlivehost:/path/to/live/server# git clone /path/to/bare . 
```

手动（其他时间）：

```
localhost:~# ssh you@yourlivehost
yourlivehost:~# cd /path/to/live/server
yourlivehost:/path/to/live/server# git pull 
```

这假设您一直在 master 上工作。如果您遵循更复杂的分支策略（如您提供的链接中所述 - 顺便说一句，这与我喜欢使用的策略相同）您必须确保在推送之前将所有所需的更改从分支开发合并到 master从本地开发主机到裸仓库。

要让钩子自动为您执行此操作，请编辑文件`/path/to/bare/hooks/post-update`并填写类似的内容

```
cd /var/www
git pull origin 
```

确保该文件是可执行的，并且您用于运行 repo 的用户对 webserver-directory 具有写入权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T08:31:05.430

试试这个：

```
git clone file:///path/to/your/bare-repo 
```

或主机之间的这个：

```
git clone user@host:/path/to/your/bare-repo 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-13T08:33:52.743

我将我的 GIT 存储库的内容硬链接到我的实时安装。

查看我的要点： [https ://gist.github.com/2652879](https://gist.github.com/2652879)

*在我更新了所有 repos 之后*，我在我的 htdocs 目录中执行了这个。这样，我在实时安装中始终拥有存储库的内容，可以在实时安装中进行更改，当它们很好时，无需任何工作即可提交它们。

这与以前的 anserws 相比有一个很好的优势，即我在实时安装中没有直接的 repo，而只有其中的文件。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-13T08:39:42.777

看[gitolite](https://github.com/sitaramc/gitolite)！这是在本地或通过密钥访问的远程机器上组织自己的 git 服务器的便捷方法。因此，将来当您需要将某人添加到您的存储库之一时，这将不是问题。

# python - python从数组中获取差异

> ID：11010904
> 
> 赞同：1
> 
> 时间：2012-06-13T08:26:19.880
> 
> 标签：python

我有以下两个数组，我试图查看 invalid_id_arr 中的元素是否存在于 valid_id_arr 如果它不存在，那么我将形成 diff 数组。但是从下面的代码中，我在 diff 数组中看到以下内容`['id123', 'id124', 'id125', 'id126', 'id789', 'id666']`，我希望输出`["id789","id666"]`是我在这里做错了什么

```
tag_file= {}
tag_file['invalid_id_arr']=["id123-3431","id124-4341","id125-4341","id126-1w","id789-123","id666"] 
tag_file['valid_id_arr']=["id123-12345","id124-1122","id125-13232","id126-12332","id1new","idagain"] 
diff = [ele.split('-')[0] for ele in tag_file['invalid_id_arr'] if str(ele.split('-')[0]) not in tag_file['valid_id_arr']] 
```

电流输出：

```
 ['id123', 'id124', 'id125', 'id126', 'id789', 'id666'] 
```

预期输出：

```
 ["id789","id666"] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T08:33:18.277

使用集合更有效，但您的主要问题是您没有删除 valid_id_arr 中的后半部分元素。

```
invalid_id_arr=["id123-3431","id124-4341","id125-4341","id126-1w","id789-123","id666"] 
valid_id_arr=["id123-12345","id124-1122","id125-13232","id126-12332","id1new","idagain"]
valid_id_set = set(ele.split('-')[0] for ele in valid_id_arr)
diff = [ele for ele in invalid_id_arr if ele.split('-')[0] not in valid_id_set]
print diff 
```

输出：

```
['id789-123', 'id666'] 
```

[http://ideone.com/Q9JBw](http://ideone.com/Q9JBw)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T08:35:58.977

尝试`sets`：

```
invalid_id_arr = ["id123-3431","id124-4341","id125-4341","id126-1w","id789-123","id666"] 
valid_id_arr = ["id123-12345","id124-1122","id125-13232","id126-12332","id1new","idagain"] 

set_invalid = set(x.split('-')[0] for x in invalid_id_arr)
print set_invalid.difference(x.split('-')[0] for x in valid_id_arr) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T08:39:58.657

```
 >>> a = ["id123-3431","id124-4341","id125-4341","id126-1w","id789-123","id666"]
    >>> b = ["id123-12345","id124-1122","id125-13232","id126-12332","id1new","idagain"]
    >>> c = (s.split('-')[0] for s in b)
    >>> [ele.split('-')[0] for ele in a if str(ele.split('-')[0]) not in c]

        ['id789', 'id666']
    >>> 
```

# perl - 获取 delta 的基准对象方法

> ID：11010906
> 
> 赞同：2
> 
> 时间：2012-06-13T08:26:24.503
> 
> 标签：perl, benchmarking, accessor

我正在用[Benchmark](http://perldoc.perl.org/Benchmark.html)计时 web 服务的执行时间。

```
use strict; use warnings;
use feature qw(say);
use Benchmark qw(:hireswallclock);

my $t0 = Benchmark->new;
1 for (1..10000000); # webservice request goes here
my $t1 = Benchmark->new;
my $td = timediff($t1, $t0);
say 'Code took ' . timestr($td); 
```

这说：

> 代码耗时 0.433091 秒（0.42 usr + 0.00 sys = 0.42 CPU）

由于我想知道 web 服务对不同输入值的反应速度有多快，这将进入一个循环。我只想将 delta ( `0.433091`) 保存在一个数组中，以便稍后计算平均值。

Perldoc 说`timediff`：

> 返回两个 Benchmark 时间之间的差异，作为适合传递给 timestr() 的 Benchmark 对象。

所以我在想一定有更多的方法，不是吗？

我想了两种方法来获得这个数字：

1.  使用正则表达式：

    ```
    timestr($td) =~ m/([\d\.]+) /;
    say $1; 
    ```

2.  直接访问它：

    ```
    use Data::Dumper;
    print Dumper $td; 
    ```

    这产生：

    ```
    $VAR1 = bless( [
                     '0.433090925216675',
                     '0.422',
                     '0',
                     0,
                     0,
                     0
                   ], 'Benchmark' ); 
    ```

    所以我可以：

    ```
    say $td->[0]; 
    ```

第一种方法似乎很简单，但我不喜欢它。

第二种方法似乎很不安全。直接访问对象数据从来都不是一个好主意。当然必须有一个访问器方法。

你有什么建议？有谁知道这个`Benchmark`对象的访问器？或者我应该这样做吗？你会用哪种方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:28:42.027

一般来说，避免查看对象的私密部分是正确的。

该类实际上提供了一个获取该数字的访问器：

```
say $td->real; 
```

# mercurial - 你如何检查一个 mercurial repo 是否处于干净状态？

> ID：11010909
> 
> 赞同：9
> 
> 时间：2012-06-13T08:26:34.747
> 
> 标签：mercurial, dvcs

作为用户，我通常`hg st`用来检查 repo 的状态，并验证它是否处于干净状态，没有修改过的文件。

在这里，我想以编程方式执行此操作。我知道我也可以使用`hg st`它，但是输出对于计算机程序的消耗来说并不理想。有没有更好的方法来检查 mercurial repo 是否处于干净状态？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-13T10:04:14.577

If you issue the `hg identify --id` command, it will suffix the ID with a `+` character when the repository has modified files. (Note: this flag does not report untracked files.)

If you grep the output of this command for the `+` character, you can use the exit status to determine whether there are modifications or no:

```
$ hg init
$ hg identify --id | grep --quiet + ; echo $?
1
$ touch a
$ hg identify --id | grep --quiet + ; echo $?
1
$ hg add a
$ hg identify --id | grep --quiet + ; echo $?
0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T19:04:02.863

你应该使用`hg summary`：

```
$ hg init
$ echo blablabla > test.txt
$ hg summary
parent: -1:000000000000 tip (empty repository)
branch: default
commit: 1 unknown (clean)
update: (current) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T22:11:20.640

大多数主要的编程语言都有您可以访问的 HG API。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-07T10:55:11.737

此答案可能对搜索此主题的其他人有用：

我同意上面的@Steve\ Kayes 评论，这`hg status`是一个很好的程序化消费命令。

这是一个如何在 bash 脚本中使用它的示例：

```
#!/bin/bash

set -e

cd /path/to/hg-repo

repo_status=`hg status | wc -l`
if [ $repo_status -ne 0 ]; then
    echo "Repo is not clean"
else
    echo "Repo is clean"
fi 
```

# java - 大缓冲区导致 Android 内存不足

> ID：11010915
> 
> 赞同：0
> 
> 时间：2012-06-13T08:26:53.793
> 
> 标签：java, android, optimization, memory-leaks, bitmap

我在这个问题上被困了 3 天。我得到了一个 Dicom 文件，我需要使用缓冲阅读器对其进行解析，该阅读器从文档的标题和图像的原始数据返回一些信息。之后，我在 raw 上应用 LUT 将字节转换为灰度，然后将其放入`Bitmap.create`. 它非常适合小图像，但现在，我必须加载 13Mo 图像，不仅需要很长时间才能打开它（大约 20 秒），而且在应用 LUT int 位图方法时，Android 会抛出关于 Bitmap 的错误`29052480-byte external allocation too large for this process.` `java.lang.OutOfMemoryError: bitmap size exceeds VM budget`。我知道有很多关于这个错误的线索，但就我而言，它有点原始，因为我只想打开一个图像（所以它不是关于堆叠很多位图）。我可以给你看一些代码：

刷新Bmp：

```
private void refreshBmp(int windowWidth, int windowCentre) {
    int[] colorArray = process.transformBuffer(myDicomObject.getRawData(),
            myDicomObject.isInverted(), windowWidth, windowCentre,
            myDicomObject.getnBits());

    Bitmap bmp = Bitmap.createBitmap(colorArray,
            myDicomObject.getColumns(), myDicomObject.getRows(),
            Bitmap.Config.ARGB_8888);
    dicomImageView.setImageBitmap(bmp);
} 
```

这叫我的LUT：

```
public int[] transformBuffer(int[] rawData, boolean inverted,
        int windowWidth, int windowCenter, int nBits) {
    System.gc();

    int min = windowCenter - (windowWidth/2);       
    int max = windowCenter + (windowWidth/2);       
    int intGrayscale = (int) Math.pow(2, nBits);    
    int intDivisionFactor = nBits-8;                

    double dmin = (double) min;                     
    double dmax = (double) max;                     
    double doubleGrayScale = (double) intGrayscale; 

    int rawDataLength = rawData.length;             

    int[] resultBuffer = new int[rawDataLength];    
    lutBuffer = new int[intGrayscale];              

    if(inverted){

        for(int i = 0 ; i < min ; i++){
            lutBuffer[i] = 255;
        }

        for(int i = min ; i < max ; i++){
            double value = doubleGrayScale * ((i - dmin + 1) / (dmax - dmin + 1));
            lutBuffer[i] = (int) (doubleGrayScale - value) >> intDivisionFactor;
        }

        for(int i = max ; i < intGrayscale ; i++){
            lutBuffer[i] = 0;
        }

    }else{
        for(int i = 0 ; i < min ; i++){
            lutBuffer[i] = 0;
        }

        for(int i = min ; i < max ; i++){
            double value = ((i - dmin + 1) / (dmax - dmin + 1));
            lutBuffer[i] = (int) (value) << intDivisionFactor;
        }

        for(int i = max ; i < intGrayscale ; i++){
            lutBuffer[i] = 255;
        }
    }

    for(int i = 0 ; i < rawDataLength ; i++){
        int colorValue = lutBuffer[rawData[i]];
        resultBuffer[i] = Color.argb(255, colorValue, colorValue, colorValue);
    }

    System.out.println(resultBuffer.length);
    return resultBuffer;
} 
```

希望有人知道一种节省内存分配的方法，特别是 LUT 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:36:55.813

`rawData`如果您不再需要它，您应该尝试直接修改它。像这样的东西：

```
public void transformBuffer(int[] rawData, boolean inverted,
        int windowWidth, int windowCenter, int nBits) {
/*
change rowData instead resultBuffer
*/
}

public void methodThatCallsTransformBuffer(...) {
    transformBuffer(data, inverted, ...);
    //now data is transformed
} 
```

此外，代替使用`lutBuffer`，您可以计算`colorValue`每个像素。这会有点慢，但你会节省一些内存：

```
int colorValue = 0;
if (inverted) {
   if (rawData[i] < min) {
      colorValue = 255;
   } else {
      if (rawData[i] < max) {
         double value = doubleGrayScale * ((i - dmin + 1) / (dmax - dmin + 1));
         colorValue  = (int) (doubleGrayScale - value) >> intDivisionFactor;         
      }
   }
} else {
   if (rawData[i] >= min && rowData[i] < max) {
      double value = doubleGrayScale * ((i - dmin + 1) / (dmax - dmin + 1));
      colorValue  = (int) (doubleGrayScale - value) >> intDivisionFactor;      
   } else if (rowData[i] > max) {
      colorValue = 255;
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T06:59:01.153

当我最终找到解决方案时，我决定回答自己。使用这些大位图数据避免此错误的唯一方法 `OutOfMemory`是后期分箱（我不确定它是否是实际名称）。它包括获取每个交替的像素。您可以通过读取一个像素、跳过一个像素、读取另一个像素、跳过一个像素并继续执行此操作直到到达行尾，然后跳过一行并继续此过程直到数据缓冲区的末尾。

我希望它可以帮助别人。

# ruby-on-rails - Internet Explorer未清除Rails javascript资产缓存

> ID：11010918
> 
> 赞同：0
> 
> 时间：2012-06-13T08:27:12.107
> 
> 标签：ruby-on-rails, asset-pipeline, sprockets, http-caching

我们正在为 JavaScript 使用 Rails 资产管道。application-xyz.js (xyz = 摘要) 被缓存并且似乎没有被 IE (版本 8) 清除，即使我重新编译所有资产并重新部署到生产环境。即使删除历史记录和临时 Internet 文件也无济于事。

是否有任何指令/标题可以使 IE 清除缓存版本并始终获取页面的最新版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:44:50.257

我在标题页中使用元标记。

```
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="expires" /> 
```

相关信息：[http ://www.w3schools.com/tags/att_meta_http_equiv.asp](http://www.w3schools.com/tags/att_meta_http_equiv.asp)

我希望它有所帮助。

# php - 带分隔符的数字的正则表达式

> ID：11010922
> 
> 赞同：-2
> 
> 时间：2012-06-13T08:27:22.900
> 
> 标签：php

我想知道如何创建一个正则表达式来匹配 php 中的模式 3,231 或 3,231,201 ？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:31:58.903

```
/([0-9,]+k?)/ 
```

上面的正则表达式将匹配数字，逗号，最后带有可选的“k”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T08:37:56.123

模式可能如下所示：

```
/([0-9]+)(,[0-9]{3})*/ 
```

这将允许类似：

```
123
123,123
123,123,123
1,123
123456 
```

但不是：

```
123,
123,1
123,12
123,1234 
```

您可以修改行为，例如通过更改`{3}`为`+`或`{1,4}`（1 到 4）或`{3,}`（3 或更多）来允许逗号后的更多/更少数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T08:34:22.513

嗯，这很容易；

```
/^[0-9,]+$/ 
```

这适用于（例如）`1231,1231,1312,12312`

# android - 如何从联系人的 id 显示联系人的照片？

> ID：11010928
> 
> 赞同：1
> 
> 时间：2012-06-13T08:28:02.227
> 
> 标签：android, imageview, contacts, photo

此代码（在我的**CustomAdapter**类中）仅显示基于谁向我发送文本消息的联系人 ID，并将它们放入 ArrayList，然后显示列表。

我`holder.photo`在每个联系人 ID 旁边都调用了一个 ImageView。**我将如何在 ImageView 中显示联系人的照片？**

```
 String folder = "content://sms/inbox/";
        Uri mSmsQueryUri = Uri.parse(folder);
        messages = new ArrayList<String>();
        contactID = new ArrayList<String>();
        SMS = new ArrayList<String>();

        try {
            c = context.getContentResolver().query(mSmsQueryUri,
                    new String[] { "_id", "address", "date", "body" },
                    null, null, null);
            if (c == null) {
                Log.i(TAG, "cursor is null. uri: " + mSmsQueryUri);
            }

        } catch (Exception e) {
            //Log.e(TAG, e.getMessage());
        } finally {
            c.close();
        }
            c.moveToFirst();
            while (c.moveToNext()) {

                phoneNumber = c.getString(0);
                contactID.add(phoneNumber);
            }
        holder.photo.?????
        //contact will cycle through all names and display each in a listview.
        holder.contact.setText(contactID.get(position); 
```

目前，我的列表视图显示：

*   android_icon-----John Doe
*   android_icon-----简·史密斯
*   android_icon-----富巴尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-22T05:21:59.440

尝试这个..

```
public void getContacts(ContentResolver cr) {
    Cursor phones = cr.query(
            ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, null,
            null, null);
    while (phones.moveToNext()) {
        String name = phones
                .getString(phones
                        .getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
        String contactId = phones
                .getString(phones
                        .getColumnIndex(ContactsContract.CommonDataKinds.Phone.CONTACT_ID));

       Bitmap bitmap = loadContactPhoto(
                getContentResolver(), Long.valueOf(contactId))
       }
    phones.close(); 
```

获取位图图像

```
public static Bitmap loadContactPhoto(ContentResolver cr, long id) {
    Uri uri = ContentUris.withAppendedId(
            ContactsContract.Contacts.CONTENT_URI, id);
    InputStream input = ContactsContract.Contacts
            .openContactPhotoInputStream(cr, uri);
    if (input == null) {
        return null;
    }
    return BitmapFactory.decodeStream(input);
} 
```

# c# - 如何使用 c# 代码重新启动（重新启动）vps？

> ID：11010932
> 
> 赞同：1
> 
> 时间：2012-06-13T08:28:15.540
> 
> 标签：c#, asp.net, vmware, reset, vps

我想为可以在该服务器内重新启动（重新启动）所有 vps 或其中一个的服务器编写一些代码！
`VPS = VIRTUAL PRIVATE SERVER`
我对此有一些疑问：

1.  我怎样才能用 C# 代码编写这些代码来完成这项工作？以及如何识别服务器内的每个 vps？

2.  我应该在哪里运行这些代码？在该服务器或其他地方形成一个 vps？（想使用 VMware 访问服务器内的所有 vps）

非常感谢查看和帮助
堆栈始终是我的爱

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:37:18.763

取自[这个](https://stackoverflow.com/questions/102567/how-to-shutdown-the-computer-from-c-sharp)SO question

```
Process.Start("shutdown","/s /t 0"); 
```

（仅适用于 Windows 机器）

现在，将它与在每个 VPS 上运行的 WCF 服务结合起来 - 您将必须编写一个管理控制台（例如，稍后将在您的计算机上使用），该控制台将知道（或具有要添加的功能）已知的 VPS 服务器（例如，它的 IP 地址），并允许您在远程 VPS 上调用此功能

这样，您将在每个 VPS 上运行一个允许您重新启动的服务，同时拥有一个管理控制台从远程计算机向您的所有或部分服务器发送关闭指令

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T08:42:57.040

结合 process.Start 解决方案从 Shai 开始，您可以使用[psshutdown](http://technet.microsoft.com/en-us/sysinternals/bb897541.aspx)。

它确实要求这些框是域加入的，来自文档：

> ...如果您指定通配符 (\*)，该命令将在当前域中的所有计算机上运行

# php - Jquery mobile - 具有多列的列表视图

> ID：11010934
> 
> 赞同：3
> 
> 时间：2012-06-13T08:28:21.460
> 
> 标签：php, jquery-mobile

我必须在列表视图中显示 3 列。我试着在里面放桌子，`<li><table></table></li>`但看起来不太好。有没有办法在列表视图中显示 3 列？

我尝试了 ui-grid-b 3 列。但是 CSS 问题... [jsfiddle.net/9ZBAS/1](http://jsfiddle.net/9ZBAS/1) 我试过了，如果我使用 href，我可以看到列重叠，如果不使用 href 但没有 href，我无法获得下一个图标按钮。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T08:40:06.767

试试这个

```
<li >
  <div class="ui-grid-b">
    <div class="ui-block-a">Block A</div>
    <div class="ui-block-b">Block B</div>
    <div class="ui-block-c">Block C</div>
 </div>

 </li> 
```

检查此链接；； [http://jquerymobile.com/test/docs/content/content-grids.html](http://jquerymobile.com/test/docs/content/content-grids.html)

* * *

已编辑

* * *

检查这个 [http://jsfiddle.net/9ZBAS/47/](http://jsfiddle.net/9ZBAS/47/)

* * *

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T11:40:05.833

使用表格替代网格布局。这在 jQM 中没有很好的记录

*   [http://jquerymobile.com/demos/1.1.0/docs/content/content-html.html](http://jquerymobile.com/demos/1.1.0/docs/content/content-html.html)

HTML：

```
<table summary="This table lists all the JetBlue flights.">
    <caption>
        Travel Itinerary
    </caption>
    <thead>
        <tr>
            <th scope="col">Flight:</th>
            <th scope="col">From:</th>
            <th scope="col">To:</th>
        </tr>
    </thead>
    <tfoot>
        <tr>
            <td colspan="5">Total: 3 flights</td>
        </tr>
    </tfoot>
    <tbody>
        <tr>
            <th scope="row">JetBlue 983</th>
            <td>Boston (BOS)</td>
            <td>New York (JFK)</td>
        </tr>
        <tr>
            <th scope="row">JetBlue 354</th>
            <td>San Francisco (SFO)</td>
            <td>Los Angeles (LAX)</td>
        </tr>
        <tr>
            <th scope="row">JetBlue 465</th>
            <td>New York (JFK)</td>
            <td>Portland (PDX)</td>
        </tr>
    </tbody>
</table> 
```

CSS：

```
<style type="text/css"> 
    table { width:100%; }
    table caption { text-align:left;  }
    table thead th { text-align:left; border-bottom-width:1px; border-top-width:1px; }
    table th, td { text-align:left; padding:6px;} 
</style> 
```

看法：

![在此处输入图像描述](../Images/f4be8d2a9f2cf197273b0d1ab68f300c.png)

有关的：

*   [jQuery 移动表](https://stackoverflow.com/questions/5723036/jquery-mobile-table)

# java - 什么会占用更多内存

> ID：11010936
> 
> 赞同：1
> 
> 时间：2012-06-13T08:28:24.940
> 
> 标签：java, string, stringbuffer

我正在努力提高我的应用程序的性能。我对以下哪个会使用更多内存感到困惑：这里 sb 是`StringBuffer`

```
String strWithLink = sb.toString();
clickHereTextview.setText(
     Html.fromHtml(strWithLink.substring(0,strWithLink.indexOf("+")))); 
```

或者

```
clickHereTextview.setText(
     Html.fromHtml(sb.toString().substring(0,sb.toString().indexOf("+")))); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T08:32:18.500

在*记忆*方面，一个表达式如

```
sb.toString().indexOf("+") 
```

几乎没有影响，因为字符串将在评估后立即被垃圾收集。（为了避免临时内存使用，我建议这样做

```
sb.indexOf("+") 
```

相反。）

但是，[**当**](http://nflath.com/2009/07/the-dangers-of-stringsubstring/)您使用`String.substring`. 上次我检查了`substring`基本上返回原始字符串的*视图*，所以原始字符串仍然驻留在内存中。

解决方法是做

```
String strWithLink = sb.toString();
... new String(strWithLink.substring(0,strWithLink.indexOf("+"))) ...
    ^^^^^^^^^^ 
```

从原始（可能很大）字符串中分离想要的字符串。同样适用于`String.split`此处讨论的内容：

*   [Java String.split 内存泄漏？](https://stackoverflow.com/questions/6056389/java-string-split-memory-leak)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T08:31:22.667

第二种会使用更多内存，因为每次调用`StringBuilder#toString()`都会创建一个新的 String 实例。

[http://www.docjar.com/html/api/java/lang/StringBuilder.java.html](http://www.docjar.com/html/api/java/lang/StringBuilder.java.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-13T08:33:59.297

# 分析

如果我们查看[StringBuilder 的 OpenJDK 源代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/StringBuilder.java#StringBuilder.toString%28%29)：

```
public String toString() {
    // Create a copy, don't share the array
    return new String(value, 0, count);
} 
```

我们看到，它实例化了一个全新的 String 对象。它将与调用 sb.toString() 的次数一样多的新实例放入字符串池中。

# 结果

使用`String strWithLink = sb.toString();`，重用它将从池中检索相同的 String 实例，而不是新的实例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-13T08:31:14.447

创建新对象总是占用更多内存。但是，在您的情况下，差异似乎微不足道。

此外，在您的情况下，您正在创建一个占用堆空间的局部变量。

每当在您的方法中的多个位置有引用时，最好使用它 `String strWithLink = sb.toString();`，因为您可以在`strWithLink`任何地方使用相同的。否则，如果只有一个引用，`sb.toString();`直接使用总是更好。

* * *

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-13T08:33:46.893

检查其他人的答案，第二个确实需要更多的内存，但这听起来像是您过度优化了。保持代码清晰易读应该是首要任务。如果可读性会受到影响，我建议你不要太担心这种微小的优化。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-13T08:36:43.557

你做的工作越少，通常效率就越高。在这种情况下，您根本不需要调用 toString

```
clickHereTextview.setText(Html.fromHtml(sb.substring(0, sb.indexOf("+")))); 
```

# python - 我需要做一些类似 OkCupids 的东西来计算 python/web2py 中的匹配百分比

> ID：11010938
> 
> 赞同：0
> 
> 时间：2012-06-13T08:28:27.287
> 
> 标签：python, web2py

我想做类似的东西，但要简单得多。我正在使用 web2py 和 python。

例如：我为两个人制作了两个个人资料。对于每一部，我希望他们能够选择他们喜欢的 10 部电影。之后，它比较电影并输出相似度百分比。

再一次，像 OkCupid 如何让你回答问题，然后将你的答案与其他人进行比较，并告诉你你的答案与他们的答案有多匹配。

我是初学者，需要帮助。如果不是至少要研究和学习什么。但是一个粗俗的通用示例会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T08:56:03.623

我见过的对该领域最好的介绍是Toby Segaran 的[Programming Collective Intelligence](http://shop.oreilly.com/product/9780596529321.do)。介绍性章节中有一节关于“寻找相似用户”的内容完全符合您的预期，甚至在 Python 中也是如此。

如果您想使用推荐系统（*用户喜欢这十部电影，她可能还喜欢哪些其他电影？*），那么您可能想尝试[python-recsys 库](http://ocelma.net/software/python-recsys/build/html/index.html)，它有一个使用[movielens 数据集](http://www.movielens.org/login)的示例。

最后，欢迎来到 SO 并建议最好地参与这个社区：尝试返回与特定代码相关的问题，类似于：“我有这样那样的编码问题。这就是我尝试过的，你能帮我把它移远一点吗？”

# java - Android：当 url 包含 http 时，在设置 WebViewCore 之前不支持 removeMessages(int what = 107)

> ID：11010939
> 
> 赞同：5
> 
> 时间：2012-06-13T08:28:30.067
> 
> 标签：java, android, exception, view, web

我写了一个简单的程序，它实际上将网页加载到 Web 视图中。

URL 包含 http:// 并且 web 视图工作得很好，除了它仍然通过这个烦人的 107 错误，大多数人说这是因为你的 url 不包含 http 标头。

我搜索了整个网络，找不到像我这样的案例

```
06-13 09:12:25.259: W/webcore(656): java.lang.Throwable: EventHub.removeMessages(int what = 107) is not supported before the WebViewCore is set up.
06-13 09:12:25.259: W/webcore(656):     at android.webkit.WebViewCore$EventHub.removeMessages(WebViewCore.java:1683)
06-13 09:12:25.259: W/webcore(656):     at android.webkit.WebViewCore$EventHub.access$7900(WebViewCore.java:926)
06-13 09:12:25.259: W/webcore(656):     at android.webkit.WebViewCore.removeMessages(WebViewCore.java:1795)
06-13 09:12:25.259: W/webcore(656):     at android.webkit.WebView.sendOurVisibleRect(WebView.java:2917)
06-13 09:12:25.259: W/webcore(656):     at android.webkit.ZoomManager.setZoomScale(ZoomManager.java:593)
06-13 09:12:25.259: W/webcore(656):     at android.webkit.ZoomManager.access$1700(ZoomManager.java:49)
06-13 09:12:25.259: W/webcore(656):     at android.webkit.ZoomManager$PostScale.run(ZoomManager.java:984)
06-13 09:12:25.259: W/webcore(656):     at android.os.Handler.handleCallback(Handler.java:605)
06-13 09:12:25.259: W/webcore(656):     at android.os.Handler.dispatchMessage(Handler.java:92)
06-13 09:12:25.259: W/webcore(656):     at android.os.Looper.loop(Looper.java:137)
06-13 09:12:25.259: W/webcore(656):     at android.app.ActivityThread.main(ActivityThread.java:4424)
06-13 09:12:25.259: W/webcore(656):     at java.lang.reflect.Method.invokeNative(Native Method)
06-13 09:12:25.259: W/webcore(656):     at java.lang.reflect.Method.invoke(Method.java:511)
06-13 09:12:25.259: W/webcore(656):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-13 09:12:25.259: W/webcore(656):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-13 09:12:25.259: W/webcore(656):     at dalvik.system.NativeStart.main(Native Method) 
```

我的 XML 看起来像：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/navBar"
        android:layout_width="fill_parent"
        android:layout_height="40dp"
        android:orientation="vertical" >
    </LinearLayout>

    <WebView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/webView"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="6.40" >
    </WebView>
</LinearLayout> 
```

我的java代码看起来像：

```
import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Context;
import android.graphics.Bitmap;
import android.os.Bundle;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.LinearLayout;

public class MobileWebView extends Activity{
private WebView myWebView;
final Context context = this;   //set the context to be itself
ProgressDialog progressDialog;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.web_view);  //set view
    //set the webview
    myWebView = (WebView) findViewById(R.id.webView);
    myWebView.getSettings().setJavaScriptEnabled(true);

    //setup and load the progress bar
    progressDialog = new ProgressDialog(context);
    progressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
    progressDialog.setMessage("Loading. Please wait...");

    myWebView.setWebViewClient(new MyWebViewClient(){
        @Override
        public void onPageFinished(WebView view, final String url) {
            progressDialog.dismiss();

        }
        @Override
        public void onPageStarted(WebView view, String url, Bitmap favicon) {
            //make sure dialog is showing
            if(! progressDialog.isShowing()){
                progressDialog.show();
            }
        }
    });

    //get the site url passed from main activity
    String urlName = this.getIntent().getExtras().getString("site");
    System.out.println(urlName);
    myWebView.loadUrl(urlName);

    SetupNavBar();
}

private void SetupNavBar(){
    //set nav bar
    LinearLayout ll = (LinearLayout)findViewById(R.id.navBar);

    NavigationBar nb = new NavigationBar(this);
    nb.setLeftBarButton("Back");
    nb.setBarTitle("Online Doctor");
    NavigationBar.NavigationBarListener nbl = new NavigationBar.NavigationBarListener() {

        @Override
        public void OnNavigationButtonClick(int which) {
            //if left button
            if(which == 0){
                finish();
            }
        }
    };

    nb.setNavigationBarListener(nbl);

    ll.addView(nb);
}

//override the override loading method for the webview client
private class MyWebViewClient extends WebViewClient {

    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        if(url.startsWith("http")){
            progressDialog.show();
            view.loadUrl(url);
            return true;
        } else {
            return false;
        }
    }
}

} 
```

在我的主要课程中，我在以下情况下调用它：

```
final Context context = this;   //set the context to be itself
private void setup(){
    //assign buttons
    Button login = (Button)findViewById(R.id.loginButton);
    Button register = (Button)findViewById(R.id.registerButton);

    //setup onclick for each button
    bindButtonWithVisitWebsite(login, "https://onlinedoctor.lloydspharmacy.com/login");
    bindButtonWithVisitWebsite(register,"https://onlinedoctor.lloydspharmacy.com/register");
}

private void bindButtonWithVisitWebsite(Button b, final String urlName){
    b.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            Bundle bundle = new Bundle();
            bundle.putString("site",urlName);
            Intent intent = new Intent(context, MobileWebView.class);
            intent.putExtras(bundle);
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T10:30:09.883

```
WebSettings settings = webView.getSettings();
settings.setPluginState(PluginState.ON); 
```

这在 ICS 中对我有用。

# c# - UI 自动化：如何更改水平滚动条 AutomationElement 的值

> ID：11010940
> 
> 赞同：1
> 
> 时间：2012-06-13T08:28:30.513
> 
> 标签：c#, visual-studio-2010, user-interface, automation, scrollbar

我正在尝试将水平滚动条的值从 -1 更改为 -2。我可以访问它..但接下来我必须更改它的值..

`AutomationElement _sideBar = _ClickButtonElement.FindFirst(TreeScope.Descendants, new PropertyCondition(AutomationElement.ClassNameProperty, "WindowsForms10.SCROLLBAR.app.0.378734a"));`

_clickButtonElement 是滚动条父窗口的 AutomationElement。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T09:08:53.367

滚动条通常支持[RangeValuePattern](http://msdn.microsoft.com/en-us/library/system.windows.automation.rangevaluepattern.aspx)。使用类似的东西：

```
RangeValuePattern range = scrollbar.GetCurrentPattern(RangeValuePattern.Pattern) as RangeValuePattern;
range.SetValue(50); // Set to half way point 
```

请注意，无论内部值如何，通常滚动条都被标准化为 0..100。因此，如果滚动条内部使用值 -5 到 5，则滚动条的中间点 0 实际上将通过 RangeValuePattern 暴露为 50。

您可能希望使用[Inspect 工具](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318521(v=vs.85).aspx)来确保您获得了正确的元素，并且它也支持这种模式。在编写任何代码之前，您还可以使用 Inspect 通过其 UI 调用 RangeValue.SetValue()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T06:22:02.833

```
AutomationElement aeForm = AutomationElement.FromHandle(windowPtr);

AutomationElementCollection buttonCollection = aeForm.FindAll(TreeScope.Descendants, new PropertyCondition(AutomationElement.ControlTypeProperty, ControlType.ScrollBar));          

AutomationElement aeButton = buttonCollection[1];

RangeValuePattern rcpattern = (RangeValuePattern)aeButton.GetCurrentPattern(RangeValuePattern.Pattern);
rcpattern.SetValue(50.00); 
```

# html - 水平 ul 菜单在 IE 中无法正确显示 - 被压扁

> ID：11010941
> 
> 赞同：1
> 
> 时间：2012-06-13T08:28:30.797
> 
> 标签：html, css, internet-explorer-8

我在尝试查看屏幕截图时遇到水平 UL 菜单问题...

在 Chrome 中它工作得很好：
![在此处输入图像描述](../Images/8896047424545fd8c20665a49ecfed2e.png)

在 IE-8 中，它看起来像这样：
![在此处输入图像描述](../Images/f0d0bf0382d9de5dd90f241a8cd72d51.png)

这是我的代码：

```
<div class="navbar-top">
    <ul class="horizontal-menu">                    
        <li><a href="google"> Google </a> </li>
        <li><a href="google"> Google </a> </li>
        <li><a href="google"> Google </a> </li>
        <li><a href="google"> Google </a> </li>
        <li><a href="google"> Google </a> </li>
    </ul>           

</div> 
```

和CSS：

```
.horizontal-menu {
    width: 440px;
}

.horizontal-menu li {
    display: inline;
    list-style-type: none;
    padding-left: 40px;
} 
```

有什么线索吗？

现在真的让我感到困惑：p欢呼

缺口

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:43:25.423

```
.horizontal-menu { white-space: nowrap } 
```

将强制`li`-elements 保持在一行中。

如果您想以这种方式使用填充，这应该可以修复意外的换行符。

```
* { margin:0; padding: 0 } 
```

可以修复几个浏览器不一致的问题。或者集成一个[CSS 重置](http://meyerweb.com/eric/tools/css/reset/)

* * *

要在所有浏览器中居中导航，您可以从中删除宽度`.horizontal-menu`并将其设置`display: inline`并通过以下方式将其居中`margin: 0 auto`：

```
.horizontal-menu {
    display: inline;
    margin: 0 auto;
} 
```

解释：
margin: **0** auto; >> top/bottom margin
margin: 0 **auto** ; >> 左/右页边距。

# oop - Autofac：是否可以将生命周期范围传递给另一个构建器？

> ID：11010942
> 
> 赞同：2
> 
> 时间：2012-06-13T08:28:33.647
> 
> 标签：oop, autofac

**问题：**

我正在用 Ui、ServiceLayer、BizLayer 和 DataLayer 构建一个四层系统。根据良好实践，ServiceLayer 对 Ui 隐藏了 BizLayer 和 DataLayer，当然 ServiceLayer 不知道 Ui 层是什么。

我的实现是单个 .NET 应用程序，每一层都在自己的程序集中。我在我的 MVC3 Ui 层中使用 Autofac.MVC3 来执行 Web 请求中使用的所有解析类。我还在我的 ServiceLayer 中包含标准 Autofac，以便它可以处理我的应用程序中所有其他层的注册。在系统启动时，我调用一个方法来向 Autofac 注册所有类型。这样做：

1.  通过调用 ServiceLayer 中的模块来注册较低级别。它使用标准 NuGet Autofac 包处理自身和所有其他程序集的注册。
2.  然后 Ui 层使用 NuGet Autofac.MVC 包注册各种控制器和 IActionInvoker 用于 Action Method 注入。

我的 DataLayer 中的 UnitOfWork 类当前已在 InstancePerLifetimeScope 中注册，因为它是由使用普通 Autofac 的 ServiceLayer 注册的，并且对 InstancePerHttpRequest 一无所知。[但是我在这里](https://stackoverflow.com/a/10901484/1434764)读到我应该使用 InstancePerHttpRequest 范围。

**问题：**

我的问题是，我可以传递一个生命周期范围，即 MVC 层可以将 InstancePerHttpRequest 传递到服务层以在需要的地方使用吗？[Alex Meyer-Gleaves 在下面这篇文章](https://stackoverflow.com/a/10039037/1434764)的评论中似乎暗示这是可能的：

> 也可以将您自己的 ILifetimeScopeProvider 实现传递给 AutofacDependencyResolver，以便您可以控制在 ASP.NET 运行时之外的生命周期范围的创建

然而，他建议的方式似乎是 MVC 特定的，因为 ILifetimeScopeProvider 是 MVC 扩展类。任何人都可以提出另一种方式或者 InstancePerLifetimeScope 可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T10:35:34.663

InstancePerHttpRequestScope 实际上是 InstantPerLifetimeScope 的一个变体。第一个仅适用于请求。如果你想在后台线程上执行一些东西，它将不可用。

像你一样，我在 as.net mvc 和多个应用层中使用 autofac。对于需要拥有生命周期范围的情况，我会绕过 Container 本身。我有一个执行任务的后台队列。每个任务几乎都需要有自己的范围并在事务中执行。Queue 有一个 IContainer 实例（它是一个单例），对于每个任务，它都会开始一个新的范围并执行该任务。

为了在这种情况下工作，数据库访问和所有设置都设置为 INstancePerLifetimeScope，当我在控制器中使用它们时我没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T13:29:33.417

在 MikeSW、Cecil Philips 和 Travis Illig（谢谢大家）的帮助下，我走上了正轨。我阅读了各种帖子，尤其是 Alex Meyer-Gleaves 在[这里](https://groups.google.com/forum/#!topic/autofac/MnJUAMGSb1I/discussion)的帖子，似乎 InstancePerLifetimeScope 在由 Autofac.MVC 包解决时被视为 InstancePerHttpRequest，在某些限制内（阅读 Alex 的帖子了解这些限制）。亚历克斯的评论是：

> 使用 InstancePerHttpRequest 可确保在运行时从正确的生命周期范围解析服务。在 MVC 的情况下，这始终是特殊的 HTTP 请求生命周期范围。

这意味着我可以安全地将整个 htpp 请求需要单个实例的任何内容注册为 InstancePerLifetimeScope，只要我没有子范围的项目，它就可以正常工作。这很好，我可以使用它。

# ruby-on-rails - 更改 Bootstrap 模式的设计

> ID：11010947
> 
> 赞同：0
> 
> 时间：2012-06-13T08:29:04.433
> 
> 标签：ruby-on-rails, ajax, twitter-bootstrap, modal-dialog

我发现这个链接[Link to another page using Twitter Bootstrap jquery modal in rails](https://stackoverflow.com/questions/10318949/link-to-another-page-using-twitter-bootstrap-jquery-modal-in-rails)这完全是我需要的——注册和其他使用 Bootstrap modal 和 Devise 的页面。

我做了这些步骤，但它没有弹出，而是将我重定向到另一个页面并显示不正确的页面。

它的行为真的很奇怪，它打开了 NOT MINE 表单。

_new.html.erb

```
<div class="modal hide fade in" id="sign_up">

<%= form_for resource, :as => resource_name, :url => registration_path(resource_name),do |f| %>
  <%= devise_error_messages! %>
....
 <% end %> 
```

创建 new.js.erb：

```
 $("#main").before("<%= escape_javascript(render "new", :formats => [:html]) %>");
      $("#sign_up").modal(); 
```

和 link_to ：

```
 <%= link_to "Sign up", new_user_registration_path, :remote => true %> 
```

在 application.html.erb 中：

```
 <%= stylesheet_link_tag    "application", media: "all" %>
   <%= javascript_include_tag 'http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js' %>
    <%= csrf_meta_tags %> 
```

**已编辑。** 在我的日志中： 由 Devise::RegistrationsController#new 处理为 JS 渲染 devise/registrations/new.js.erb (15.6ms) Completed 500 Internal Server Error in 31ms

```
 ActionView::Template::Error (Missing partial devise/new with {:locale=>[:en], :f
       ormats=>[:js, :html], :handlers=>[:erb, :builder, :coffee, :rabl]}. Searched in:

     * "D:/print_it_green/app/views"
    * "C:/Ruby192/lib/ruby/gems/1.9.1/gems/devise-2.1.0/app/views"
       ):
        1: $("#sign_up").before("<%= escape_javascript(render "devise/new", :formats
       => [:html]) %>");
         2: $("#sign_up").modal();
      app/views/devise/registrations/new.js.erb:1:in `_app_views_devise_registration
       s_new_js_erb___312569811_25856784' 
```

问题出在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T07:31:09.310

在**new.js.erb 中**，您尝试在名为`#main`.

向您调用它的页面添加一个空`<div>`标签，它应该可以工作。`id=main`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T14:41:09.553

你的文件在哪个文件夹？如果您打算使用设计，那么您可以使用`rails generate devise:views`自定义视图。然后将您的`new`部分和`new`js 文件放入该文件夹中。

如果需要，您也可以[配置控制器](https://github.com/plataformatec/devise#configuring-controllers)，但如果您创建视图，则 Devise 应自动指向上述命令创建的 Devise 文件夹。

在您的 jQuery 中，您将放置`render "devise/registrations/new"`而不只是`"new"`.

# python - App Engine 上的 Django 与 webapp2

> ID：11010953
> 
> 赞同：11
> 
> 时间：2012-06-13T08:29:34.580
> 
> 标签：python, django, google-app-engine, python-2.7, webapp2

我想知道您对这两个 Web 框架（Django 和 webapp2）中哪个更适合在 App Engine 平台上使用的看法，为什么？

请不要说两者完全不同，因为 Django 更完整。两者都是您可以在 App Engine 中使用的“网络框架”。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-13T17:51:00.673

在 Django 和 webapp2 之间进行选择实际上取决于您使用它的目的。在您的问题中，您没有给出任何决策参数，因此无法判断哪个“更好”。将它们都描述为“Web 框架”表明您没有对它们进行太多研究。

Webapp2 本质上是一个请求处理程序。它将 HTTP 请求定向到您编写的处理程序。它也非常小。

Django 有一个请求处理程序。它还有一个模板引擎。它还有一个表单处理器。它还有一个 ORM，您可以选择使用或不使用。请注意，您可以在 CloudSQL 上使用 ORM，但如果您想在 HRD 上使用 ORM，则需要使用 Django-nonrel。它还有一个你可以使用的插件库，但它们只有在你使用 Django ORM 时才能工作。它还有一堆 3rd 方库，这也需要 Django ORM。

如果您考虑到可移植性，那么 Django ORM 会很有帮助。

你必须比较你实际需要的东西来做出决定。

# vb.net - 删除选择 Flexgrid 或更改 co

> ID：11010954
> 
> 赞同：1
> 
> 时间：2012-06-13T08:29:34.800
> 
> 标签：vb.net

我有一个我被迫使用的 flexgrid。事情是，当我添加新项目时，最后一行会被高亮显示。我想禁用我已经尝试过但不起作用的选择。

```
 with flexgrid1

   .rowsel = .row
   .colsel = .col

   end with 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:13:20.943

你试过这个吗？

```
grid.rowsel = -1 
```

# jquery-templates - “JavaScript 微模板”和 mustache.js/handlebars.js 有什么区别？

> ID：11010958
> 
> 赞同：1
> 
> 时间：2012-06-13T08:29:40.937
> 
> 标签：jquery-templates, handlebars.js

首先，我再次为这样一个新手问题道歉，如果这已在其他地方得到回答。

模板引擎太多了，真不知道怎么选！我认真研究[了这个](https://stackoverflow.com/questions/552934/what-javascript-templating-engine-do-you-recommend)，但还是一头雾水。

我主要想知道mustache.js/handlebars.js的优点？与[JavaScript 微模板相比](http://ejohn.org/blog/javascript-micro-templating/)

请举例说明，万分感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T15:28:36.497

对于一个相当全面的比较，请参阅

[http://engineering.linkedin.com/frontend/client-side-template-throwdown-mustache-handlebars-dustjs-and-more](http://engineering.linkedin.com/frontend/client-side-templating-throwdown-mustache-handlebars-dustjs-and-more)

它包括许多考虑因素和良好的“现场”方法。

此外，它来自LinkedIn，因此您可以相信它非常全面。

**编辑：**

唯一真正的遗漏是来自 Twitter 的 Hogan，可能是因为它曾经（现在仍然是）一个新来的孩子。[http://twitter.github.com/hogan.js/](http://twitter.github.com/hogan.js/)）就像基于 Mustache 的 Handlebars。功能介于 Mustache 和 Handlebars 之间。性能 5/5。

我在客户端和服务器端都使用 Hogan，一旦你掌握了它，使用它真的很棒。

hth

# c# - 在 Windows Azure Web 角色上从 Excel 读取的指南

> ID：11010962
> 
> 赞同：0
> 
> 时间：2012-06-13T08:29:58.253
> 
> 标签：c#, excel, azure, azure-configuration

我的要求是让用户上传 CSV 或 Excel 文件，以便在 Windows Azure 上运行的 Web 应用程序上进行导入。字段映射要求也有关联的 Excel 列。我的环境是 C#、ASP.NET、SQL Server 2010。

我有一个使用 Microsoft Access Database Engine 2010 的解决方案（[链接](http://www.microsoft.com/en-us/download/details.aspx?id=13255)）。我有理由相信这不会在 Windows Azure 上运行，因为安装程序正在将注册表项放在我的计算机上 + Azure 上可能存在安全限制。

关于在 Windows Azure 上什么是合适的解决方案的任何指南/帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:11:54.333

就像 David 在他的回答中已经解释的那样，您应该使用启动任务在您的 Web 角色上安装 Microsoft Access 数据库引擎。

但是，如果您认为此安装程序可能需要管理员权限（由于注册表更改），则需要在启动任务中指定此权限。启动任务允许您将 elevationContext 设置为**提升**以管理员身份运行您的启动任务。您可能需要它来成功安装此软件包。

参考：http: [//msdn.microsoft.com/en-us/library/windowsazure/jj129545.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/jj129545.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T08:41:04.943

通过启动脚本，您可以修改注册表并运行 MSI（只要它们完全自动化，无需用户输入）。请记住，Windows Azure Web 和辅助角色本质上是 Windows Server 2008 SP2 或 R2，加上从启动脚本或 RoleEntryPoint 实现（包括`OnStart()`和`Start()`）调用的脚手架代码。

有关启动脚本的更多信息，请参见[此处](http://msdn.microsoft.com/en-us/library/windowsazure/gg456327.aspx)。

# touch - 如何在 Sencha touch 中的面板之间移动

> ID：11010963
> 
> 赞同：0
> 
> 时间：2012-06-13T08:30:00.633
> 
> 标签：touch, extjs

在面板之间移动时出现以下错误

```
[WARN][Ext.Component#constructor] Registering a component with a id (`logOutButton`) which has already been used. Please ensure the existing component has been destroyed (`Ext.Component#destroy()`. 
```

我可以返回上一个屏幕，但如果没有出现上述错误，就无法再次前进。

为了解决这个问题，我尝试使用下面的代码，但它不起作用。谁能帮我吗？

```
var loginView = Ext.getCmp('login');
    if(!loginView){
       Ext.getCmp('loginTest2').destroy(); 
      loginView = Ext.create('com.view.Login');
  }

  Ext.Viewport.setActiveItem('login'); 
```

我也试过：

```
if(Ext.getCmp('login')){
     Ext.Viewport.setActiveItem('Login');
  }else{

    Ext.Viewport.setActiveItem(Ext.create('com.view.Login'));
  } 
```

这些都不起作用，并导致相同的错误和空白屏幕。我正在使用 Sencha Touch 2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T12:02:28.673

我们可以简单地使用以下行从一个面板导航到另一个面板..

```
Ext.Viewport.animateActiveItem({ xtype: "cat" }, { type: "slide", direction: "up" }); 
```

这里，xtype是我们可以为我们想要显示的面板定义的，像这样...，

```
Ext.define('BeLocal.view.LeftCurveList', {
       extend: 'Ext.Panel',

       **xtype: 'cat',**

       config: {

       items: [
               {
               xtype: 'toolbar',
               docked: 'top',
               width: '100%',
               padding:0,
               title: 'BeLocal Places',
               items:[{
                      xtype: 'button',
                      ui: 'back',
                      text: 'Back',
                      ]
               },

            ]
       }
       }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T13:05:38.077

为避免此错误，请勿将 id 用于按钮或任何其他项目，而不是使用 id 对按钮使用操作配置或使用项目 id 。使用 itemId 销毁组件只需使用此`

```
Ext.ComponentQuery.query('list[action=diaryselectlist]')[0].destroy(); 
```

在它上面只是破坏了一个我给他行动而不是id的列表，你可以给itemId而不是在这个..希望你会喜欢这个

# ios - iOS 5，等待定位

> ID：11010964
> 
> 赞同：1
> 
> 时间：2012-06-13T08:30:01.077
> 
> 标签：ios, cllocationmanager

我有这种方法来定位用户，然后根据他所在的国家/地区更改一些数字：

```
- (void) localizing {
locationManager = [[CLLocationManager alloc] init];
locationManager.delegate = self;
[locationManager startUpdatingLocation];
locationManager.desiredAccuracy = kCLLocationAccuracyThreeKilometers;
DbOperations *dbOp = [[DbOperations alloc] init];
geoCoder = [[CLGeocoder alloc] init];
[self.geoCoder reverseGeocodeLocation: locationManager.location completionHandler: 
 ^(NSArray *placemarks, NSError *error) {

     //Get nearby address
     CLPlacemark *placemark = [placemarks objectAtIndex:0];

     //String to hold address
     countryCode = [placemark.addressDictionary valueForKey:@"CountryCode"];
     country = [placemark.addressDictionary valueForKey:@"Country"];
     NSString *s2 = NSLocalizedString(@"You're currently in %@", nil);
     lblLocation.text = [NSString stringWithFormat:s2, self.country];
     [dbOp UsefulNumbers:self.countryCode];
     NSUserDefaults *loc = [NSUserDefaults standardUserDefaults];
     [loc setObject:country forKey:@"Country"];
     [loc setObject:countryCode forKey:@"CountryCode"];
     [loc synchronize];

 }];
[locationManager stopUpdatingLocation];
NSUserDefaults *loc = [NSUserDefaults standardUserDefaults];
if ([loc objectForKey:@"Country"] == NULL) {
    btnUno.enabled = NO;
    btnDue.enabled = NO;
    btnTre.enabled = NO;
    lblLocation.text = NSLocalizedString(@"Unable to locate you", nil);
} 

} 
```

该方法由“viewDidLoad”方法调用，但我第一次运行应用程序时无法定位。如果我打开地图，让它得到修复，然后打开我的应用程序，一切都很好。我想也许我没有给应用程序足够的时间来获得 GPS 定位，或者我只是做错了。

有什么建议么？

编辑：修改了代码，还没有工作。

```
- (id) init {
self = [super init];
if (self != nil) {
    self.locationManager = [[CLLocationManager alloc] init];
    self.locationManager.delegate = self;
}
return self;
}

- (void) viewDidLoad {
locationManager.desiredAccuracy = kCLLocationAccuracyThreeKilometers;
[locationManager startUpdatingLocation];
[super viewDidLoad];
}

- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {

DbOperations *dbOp = [[DbOperations alloc] init];
geoCoder = [[CLGeocoder alloc] init];
[self.geoCoder reverseGeocodeLocation: locationManager.location completionHandler: 
 ^(NSArray *placemarks, NSError *error) {

     //Get nearby address
     CLPlacemark *placemark = [placemarks objectAtIndex:0];

     //String to hold address
     countryCode = [placemark.addressDictionary valueForKey:@"CountryCode"];
     country = [placemark.addressDictionary valueForKey:@"Country"];
     NSString *s2 = NSLocalizedString(@"You're currently in %@", nil);
     lblLocation.text = [NSString stringWithFormat:s2, self.country];
     [dbOp UsefulNumbers:self.countryCode];
     NSUserDefaults *loc = [NSUserDefaults standardUserDefaults];
     [loc setObject:country forKey:@"Country"];
     [loc setObject:countryCode forKey:@"CountryCode"];
     [loc synchronize];
     NSLog(@"Country: %@", country);

 }];
NSUserDefaults *loc = [NSUserDefaults standardUserDefaults];
if ([loc objectForKey:@"Country"] == NULL) {
    btnUno.enabled = NO;
    btnDue.enabled = NO;
    btnTre.enabled = NO;
    lblLocation.text = NSLocalizedString(@"unable to locate", nil);
} 

} 
```

方法 locationManager:didUpdateToLocation:fromLocation 不会被调用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T08:51:34.723

You should put your code for reverse geocoding in the delegate method for CLLocationManager:

`– locationManager:didUpdateToLocation:fromLocation:`

Your current setup is trying to reverse geocode a location before an update has been dispatched from the location manager.

Consider setting up your `CLLocationManager` in your init method and then waiting for the delegate to be called before attempting to reverse geocode anything.

# jquery - jQuery 仅在起始页上显示背景图像

> ID：11010965
> 
> 赞同：0
> 
> 时间：2012-06-13T08:30:03.660
> 
> 标签：jquery

如何显示全屏，仅在起始页上调整背景图像的大小。我在背景中有一个 div，它延伸到整个背景，在 window.load 上调整大小。除非当前页面是起始页，否则如何隐藏此 div？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T08:36:22.947

CSS：

```
.pageBg {
   display: none;
   position: absolute;
   // set background and other properties
} 
```

html:

```
<body>
<div class="pageBg">
</div>
<div>
Page content
</div> 
```

javascript:

```
$(function() {
   if(isStartPage()) {
      $(".pageBg").show();
   }
}); 
```

# visual-studio - WindowsInstaller 项目中的 PostBuildEvent 返回错误代码“1”

> ID：11010966
> 
> 赞同：2
> 
> 时间：2012-06-13T08:30:05.057
> 
> 标签：visual-studio, visual-studio-2008, windows-installer, post-build-event

我有一个 Windows Installer (VS 2008) 项目，我想创建一个非常简单的构建后事件，它只打开目标文件夹，并选择安装程序。

所以我在 PostBuildEvent 字段中输入了以下内容：

> explorer.exe /select, $(BuiltOutputPath)

问题是我收到以下错误：

> 错误：错误 de 'PostBuildEvent' con el código de error '1' 'Error no especificado'

翻译为：

> 错误：“PostBuildEvent”错误，错误代码为“1”“未指定错误”

问题是，文件夹打开，安装程序被选中，但它一直给我错误。

那么，我做错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-03T11:14:18.650

它适用于“开始”：

> 启动 explorer.exe /select, $(BuiltOutputPath)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T04:58:24.203

只需更改`"BuiltOuputPath"`设置项目输出的确切路径，例如：

> **"$(E:\INFO BANK\Info 银行项目\Setup2\Debug)"**

我相信错误会消失..祝你好运

# c# - 如何在 C# 中编组指向数组的指针

> ID：11010969
> 
> 赞同：3
> 
> 时间：2012-06-13T08:30:22.557
> 
> 标签：c#, interop, marshalling, .net

我有带有 int** 参数的 c++ 方法，它是指向 int 数组的指针。

如何将其编组为 C#？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-13T09:09:06.170

你可以尝试从这个方法签名中获得灵感：

```
void MyMethod([MarshalAs(UnmanagedType.LPArray, SizeConst=10)] int[] ar); 
```

（数组长度为 10）

# java - 如何提取 RestEasy 的 JacksonProvider 用于解析 .json 文件的 ObjectMapper？

> ID：11010970
> 
> 赞同：0
> 
> 时间：2012-06-13T08:30:28.963
> 
> 标签：java, json, spring, jackson, resteasy

在我的 RestEasy（带有 Spring）应用程序中，我扩展了 RestEasyJacksonProvider（由 RestEasy 提供），以自定义 ObjectMapper 的配置，如下所示

```
 public class JacksonProvider extends ResteasyJacksonProvider{

    public JacksonProvider(){
        super();
        ObjectMapper mapper = locateMapper(Object.class, MediaType.APPLICATION_JSON_TYPE);

        mapper.configure(SerializationConfig.Feature.WRITE_DATES_AS_TIMESTAMPS, false);

        mapper.getDeserializationConfig().addHandler(new DeserializationProblemHandler() {
            @Override
            public boolean handleUnknownProperty(DeserializationContext ctxt, JsonDeserializer<?> deserializer, Object beanOrClass, String propertyName) throws IOException, JsonProcessingException {
                logger.warn(String.format("Could not deserialize property with name '%s' on object of type '%s'", propertyName, beanOrClass.getClass().getName()));
                return true;
            }
        });

    }
} 
```

该应用程序具有读取 json 数据以及导入 .json 文件的方法的服务。

在读取 json 数据时，我在 @Consumes 中指定了 applicaion/json，JacksonProvider 负责将其解析为对象。我想在读取 .json 文件时使用相同的 JacksonProvider，以便在导入时也应用我的自定义映射器属性。像这样的东西：

```
Object dto = jacksonProvider.readFrom(Object.class, Object.class, null, MediaType.APPLICATION_JSON_TYPE , null , new FileInputStream("input.json")); 
```

但是，当我这样做时，我得到一个异常，下面的堆栈跟踪

```
 JSONImportTest
com.test.JSONImportTest
unmarshal(com.test.JSONImportTest)
java.lang.ExceptionInInitializerError

    at com.test.JSONImportTest.unmarshal(JSONImportTest.java:19)

    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)

    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)

    at java.lang.reflect.Method.invoke(Unknown Source)

    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)

    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)

    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)

    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)

    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)

    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)

    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)

    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)

    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)

    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)

    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)

    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)

    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)

    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)

    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)

    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)

    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)

    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)

    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)

Caused by: java.lang.RuntimeException: java.lang.ClassNotFoundException: com.sun.ws.rs.ext.RuntimeDelegateImpl

    at javax.ws.rs.ext.RuntimeDelegate.findDelegate(RuntimeDelegate.java:134)

    at javax.ws.rs.ext.RuntimeDelegate.getInstance(RuntimeDelegate.java:96)

    at javax.ws.rs.core.MediaType.<clinit>(MediaType.java:46)

    ... 24 more

Caused by: java.lang.ClassNotFoundException: com.sun.ws.rs.ext.RuntimeDelegateImpl

    at java.net.URLClassLoader$1.run(Unknown Source)

    at java.net.URLClassLoader$1.run(Unknown Source)

    at java.security.AccessController.doPrivileged(Native Method)

    at java.net.URLClassLoader.findClass(Unknown Source)

    at java.lang.ClassLoader.loadClass(Unknown Source)

    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)

    at java.lang.ClassLoader.loadClass(Unknown Source)

    at java.lang.Class.forName0(Native Method)

    at java.lang.Class.forName(Unknown Source)

    at javax.ws.rs.ext.FactoryFinder.newInstance(FactoryFinder.java:77)

    at javax.ws.rs.ext.FactoryFinder.find(FactoryFinder.java:201)

    at javax.ws.rs.ext.RuntimeDelegate.findDelegate(RuntimeDelegate.java:113)

    ... 26 more 
```

有没有办法使用 JacksonProvider 在 resteasy 上下文之外解析 json？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T11:00:25.203

好的，我自己回答。基本上有两种选择：

1/ 使用从自定义提供程序获取 ObjectMapper

```
ObjectMapper mapper = jacksonProvider.locateMapper(Object.class, MediaType.APPLICATION_JSON_TYPE) 
```

然后使用这个映射器读取 json

```
mapper.readValue(new File("src/test/resources/input.json"), Object.class); 
```

2/ 创建一个自定义 ObjectMapper（如提到的[这里](https://stackoverflow.com/questions/3591291/spring-jackson-and-customization-e-g-customdeserializer)）并使用该映射器从 JacksonProvider 以及读取 .json 文件时读取 json。

我选择了第一个选项。

# apache-flex - 移动标注按钮后的下拉菜单

> ID：11010974
> 
> 赞同：0
> 
> 时间：2012-06-13T08:30:50.040
> 
> 标签：apache-flex, actionscript, drop-down-menu, adobe, callout

Flex Actionscript 问题。

我有一个在屏幕上移动的标注按钮。当我打开下拉列表（通过单击）时，它会停留在屏幕上的相同位置（只有箭头在移动）。它不跟随标注按钮的位置

我希望此下拉菜单在移动时跟随标注按钮的位置（就像在移动时再次单击按钮时一样）。

我试图发送一个 MouseEvent.CLICK。这没用。还尝试打开，然后再次关闭下拉菜单，使用 actionscript 唱 closeDropDown() 和 openDropDown()。没变。

谢谢

示例代码（从 creationComplete 调用 init()）：

```
 creationComplete="init();">
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>
<fx:Script>
    <![CDATA[
        import flash.events.MouseEvent;

        import mx.events.DropdownEvent;

        private function init():void {
            var minuteTimer:Timer = new Timer(1*1000);
            minuteTimer.addEventListener(TimerEvent.TIMER, updateCalloutPosition);
            // starts the timer ticking
            minuteTimer.start();                
        }

        private function updateCalloutPosition(event:Event):void {
            myButton.closeDropDown();
            myButton.x = this.width * Math.random();
            myButton.y = this.height * Math.random();
//              myButton.openDropDown();
            myButton.dispatchEvent(new MouseEvent(MouseEvent.CLICK));
        }

        protected function myButton_clickHandler(event:MouseEvent):void
        {
            if (myButton.isPopUp) {
                myButton.closeDropDown();
            }
            else {
                myButton.openDropDown();
            }
        }

    ]]>
</fx:Script>
<s:CalloutButton id="myButton" click="myButton_clickHandler(event)">
</s:CalloutButton> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T11:21:18.490

我尝试了一些解决方法，但 openDuration 和 closeDuration 不适用于 DropDownList 如果可以实现，那么下面的代码可能会对您有所帮助。希望下面的代码可以帮助你。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600"
               creationComplete="init()">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
        <s:ArrayCollection id="ac">
            <fx:String>AK</fx:String>
            <fx:String>AL</fx:String>
            <fx:String>AR</fx:String>
        </s:ArrayCollection>
    </fx:Declarations>
    <fx:Style>
        @namespace s "library://ns.adobe.com/flex/spark";
        @namespace mx "library://ns.adobe.com/flex/halo";

        s|DropDownList {
            openDuration: 0;
            closeDuration: 0;
        }
    </fx:Style>
    <fx:Script>
        <![CDATA[
            import flash.events.MouseEvent;

            import spark.components.supportClasses.DropDownListBase;
            import spark.components.supportClasses.TextBase;
            import spark.events.DropDownEvent;
            import spark.skins.spark.DropDownListSkin;
            import spark.utils.LabelUtil;

            private var storeVisible:Boolean = false;

            private function init():void {
                var minuteTimer:Timer = new Timer(1*1000);
                minuteTimer.addEventListener(TimerEvent.TIMER, updateCalloutPosition);
                minuteTimer.start();                
            }

            private function updateCalloutPosition(event:Event = null):void {
                myButton.x = this.width * Math.random();
                myButton.y = this.height * Math.random();
                if(myButton.isDropDownOpen)
                {
                    myButton.closeDropDown(false);
                    storeVisible = true;
                }
            }

            private function updateComp():void
            {
                if(storeVisible)
                {
                    myButton.openDropDown();
                    storeVisible = false;
                }
            }

        ]]>
    </fx:Script>

    <s:DropDownList id="myButton"  selectedIndex="0" dataProvider="{ac}" updateComplete="updateComp()"/> 
</s:Application> 
```

# postgresql - 跟踪数据库更改的脚本

> ID：11010975
> 
> 赞同：0
> 
> 时间：2012-06-13T08:30:55.383
> 
> 标签：postgresql

我需要跟踪 postgresql 数据库中数据的任何更改。数据库或任何脚本中是否有任何选项可以查看这些数据和 DML。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:47:40.237

对不起 - 我不知道。但我确实有一些不同的建议：

*   为涉及更新、删除、插入、更改表等的查询记录 /all/ 查询和 grep。警告：如果有大量查询并且日志与数据和/或 WAL 位于相同的 RAID 上，则可能会导致性能问题。不确定是否容易制作一些 100% 确定捕获所有修改语句的正则表达式。可能很难捕获回滚等。要记录所有内容，请将其添加到配置文件中：`log_min_duration_statement = 0`. 看看其他 log_* 配置变量也很正常。

*   规则/触发方法（正如其他用户所暗示的那样） - 我相信它涉及为每个表编写规则 - 但它当然是可行的（如果你有很多的话，应该可以通过一些外部脚本创建规则表）。您还可以了解一下 slony 的工作原理 - slony 是一个基于触发器的复制系统，应该可以使用它来捕获数据库中的所有更改。

*   对数据库的所有更改最终都在 WAL 文件中，也许理论上可以从 WAL 中提取一些东西，但我怀疑这不切实际，除非你已经是一个熟练的 postgres 黑客......如果你是一个熟练的postgres 黑客，你可能一开始就不会问这个问题 ;-) （最终，WAL 可用于查看数据的变化率以及当天更新次数多于其他情况的时间等。它们也可用于从二进制备份复制和前滚）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T08:36:18.010

您可以在代码中管理它（手动添加日志）或查看此页面以获取信息/规则示例以自动记录事物

[http://www.postgresql.org/docs/current/static/rules-views.html](http://www.postgresql.org/docs/current/static/rules-views.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T04:54:21.610

在 postgresql.conf 中设置 log_statement='all' 之间，您还可以使用 tablelog 来捕获旧数据。

# html - Z-index 不起作用。弹出窗口隐藏在图层下

> ID：11010981
> 
> 赞同：2
> 
> 时间：2012-06-13T08:31:14.690
> 
> 标签：html, css, popup, z-index

我正在帮助维护这个网站[http://www.groupme.my/national/](http://www.groupme.my/national/)

对于某些选项列表很长的交易，当您单击“立即购买”按钮时，选项列表弹出窗口将被以下交易部分覆盖。例如，单击此交易“[55% off] Korean Style Handbag...”的“立即购买”按钮。

请注意，并非每笔交易都带有选项。如果没有选项，点击“立即购买”将直接带您进入购物车。

我试图放入 z-index，但它似乎没有做任何事情。

请帮助检查我们如何解决此问题。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T08:37:10.040

似乎是问题所在`z-index: 0`；`content-wrapper-top`尝试删除它。

**编辑后添加评论：**我`z-index`在生成 CSS（行：713）中找到了这个：

```
.content-pane-index {
    float: left;
    width: 737px;
    position: relative;
    z-index: 0;<------------------------ HERE
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-13T08:37:27.173

如果我正确理解您的担忧，则淡入的元素的底边位于下方项目的后面，对吗？

如果这是问题所在，那么 z-index 不会对您有所帮助，因为淡入的东西正在附加到 div 上（并且它正在上方），但它将位于位于 div 的后面page *在淡入淡出的那个被附加到的那个之后，所以，淡入淡出的 div 将在下一个之后，无论如何。

处理这个问题的最简单方法是以相反的顺序绘制它们，以便 div 在上升时向 zTOP 移动，或者换句话说，将它们的 z 顺序设置为与绘制方式相反的顺序，所以如果你有 10 个项目，第一个的 zIndex 将为 10，下一个的 zIndex 为 9，依此类推。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T08:56:56.813

Dr.Dredel 很好地解释了这个问题，但如果你不想对 HTML 进行任何重新排序，我有一个解决方法，也许会有点愚蠢，但我认为它应该可以工作，**我会给你想法**，我不知道没有任何代码来测试任何代码:)

首先，你的 z-index 不能有那么大的数字，比如 1000 然后 50000！使用较小的单位，如 5 10 15 等，如果你先这样做，我的代码将起作用，我使用了页面上必须的最大数字。

我将使用 jQuery，作为立即购买按钮，在显示弹出代码后添加此代码：

```
$(this).parent().parent().parent().parent().parent().parent().css("z-index","999"); 
```

此代码意味着如果buynow`a`标签和标签的父级的父级，则查找父级`a`，因此对于具有`content-pane-index`类名的div并添加`z-index`最大。

您也许也可以使用此代码：

```
$(this).parents(".content-pane-index").css("z-index","999"); 
```

对于关闭按钮，您需要恢复之前添加的 z-index，因此在关闭弹出代码后也要添加此代码：

```
$(this).parent().parent().parent().parent().parent().parent().parent().css("z-index","0"); 
```

或者

```
$(this).parents(".content-pane-index").css("z-index","0"); 
```

我希望你至少有一个想法:)

我的代码可能需要修复，例如添加或删除一种`.parent()`方法，或者更改与`.parents()`.

我喜欢解决方法：P

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-19T09:03:15.963

如果您想`z-index`从弹出 CSS 中显示弹出删除，例如。我`z-index: 1000`在其他 css 中使用

但我正在使用其他 CSS 进行弹出，所以进入弹出 CSS 并找到`z-index`并删除它。

# antlr2 - antlr 2 规则歧义

> ID：11010985
> 
> 赞同：0
> 
> 时间：2012-06-13T08:31:21.447
> 
> 标签：antlr2

```
 DECIMAL_LITERAL : ('0' | '1'..'9' ('0'..'9')*) (INTEGER_TYPE_SUFFIX)? ;

   FLOATING_POINT_LITERAL

   :   ('0'..'9')+ 

       (
           DOT ('0'..'9')* (EXPONENT)? (FLOAT_TYPE_SUFFIX)?
       |   EXPONENT (FLOAT_TYPE_SUFFIX)?
       |   FLOAT_TYPE_SUFFIX
       )
       |   DOT ('0'..'9')+ (EXPONENT)? (FLOAT_TYPE_SUFFIX)?
   ; 
```

DECIMAL_LITERAL 匹配 c 语言中的 int 字面量，FLOATING_POINT_LITERAL 匹配 c 语言中的 float 字面量。但是当词法分析器遇到 float 时，例如 3.44，3 将匹配规则 DECIMAL_LITERAL。

我该怎么做才能让它识别浮点文字？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T19:27:02.760

您将规则组合成一个词法分析器规则，然后根据您是否看到来更改类型`DOT`。这应该给你一个想法，虽然它不完全等同于你上面写的。

```
DECIMAL_LITERAL 
:   ('0'..'9')+ 
   (
       DOT { _ttype = FLOATING_POINT_LITERAL; } ('0'..'9')* (EXPONENT)? (FLOAT_TYPE_SUFFIX)?
   |   EXPONENT (FLOAT_TYPE_SUFFIX)?
   |   FLOAT_TYPE_SUFFIX
   )
   |   DOT { _ttype = FLOATING_POINT_LITERAL; } ('0'..'9')+ (EXPONENT)? (FLOAT_TYPE_SUFFIX)?
; 
```

有关更完整的示例，请参阅我在[http://www.antlr3.org/grammar/cgram/上的 C 语法](http://www.antlr3.org/grammar/cgram/)

# ruby-on-rails - 在 Rails 中使用嵌套表单 - 如何使显示页面根据用户想要的呈现数量以表格格式显示每个新条目？

> ID：11010987
> 
> 赞同：0
> 
> 时间：2012-06-13T08:31:23.690
> 
> 标签：ruby-on-rails, database-design, nested-forms

我有一个正在使用 Rails 3.2 构建的婴儿礼物注册表。有一个注册模型和一个嵌套在注册模型下的当前模型。除显示页面外，一切都 100% 正常工作。

当用户创建注册表时，他/她可以通过添加礼物标签添加礼物（他/她想要多少），但问题出在显示页面中，它只显示第一个礼物，因为我也想要它。其余部分以纯非格式化文本显示。

请问有什么帮助吗？我希望它以表格格式显示。

这是我的代码：这是注册表单：

```
<%= nested_form_for(@registry) do |f| %>
<% if @registry.errors.any? %>
<div id="error_explanation">
<h2><%= pluralize(@registry.errors.count, "error") %> prohibited this registry from    
being saved:</h2>

  <ul>
  <% @registry.errors.full_messages.each do |msg| %>
    <li><%= msg %></li>
  <% end %>
  </ul>
</div>
<% end %>

<%= f.label :due_date %><br />
<%= f.date_select :due_date, :rows => 5 %>

<%= f.label :theme %><br />
<%= f.text_field :theme, :class => 'field2' %>

<div class="field1">
<%= f.label :gender %><br />
<%= f.text_field :gender %>
</div>

<div class="field1">
<%= f.fields_for :presents do |builder| %>
<%= render 'present_fields', f: builder %>
<% end %>
</div>

<%= link_to_add_fields "Add Presents", f, :presents %>

<div class="actions">
<%= f.submit %>
</div>
<% end %> 
```

礼物字段：

```
<div class="field1">
<table>
<tr> 
<td> <%= f.label :type, "Present Type" %> </td>
<td> <%= f.text_field :type, :class => 'field2' %> </td>
<td> <%= f.label :Quantity, "Quantity" %> </td>
<td> <%= f.number_field :quantity, :class => 'field3' %> </td>
<td> <%= f.label :color, "Color" %> </td>
<td> <%= f.text_field :color, :class => 'field2' %> </td>
<td> <%= f.label :brand, "Brand" %> </td>
<td> <%= f.text_field :brand, :class => 'field2' %> </td>
<td> <%= f.link_to_remove "Remove this present" %></td>
</tr>
</table>
</div> 
```

显示页面：<% provide(:title, 'My Party and Present Whishes') %> <%= notice %>

```
<p> Baby & Party Details: </p></br>
<li><p> Due date: </p> <%= @registry.due_date %></li></br>
<li><p> Party Theme: </p><%= @registry.theme %></li></br>
<li><p> Gender: </p><%= @registry.gender %></li></br>

<p> Presents Registry: </p></br>
<li>

<% @registry.presents.each do |registry| %>

<%= registry.type %>
<%= registry.quantity %>
<%= registry.color %>
<%= registry.brand %>

</li>

<% end %>

</br>
</br>
<%= link_to 'Edit', edit_registry_path(@registry) %>
<%= link_to 'Back', registries_path %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:52:17.953

```
<li>

<% @registry.presents.each do |registry| %> 
```

这些线不应该倒置吗？

```
<% @registry.presents.each do |registry| %>
<li> 
```

# android - 我的标签栏在更大的屏幕上看起来更小，不知道为什么

> ID：11010989
> 
> 赞同：0
> 
> 时间：2012-06-13T08:31:34.070
> 
> 标签：android, android-layout, android-screen

我正在尝试让自定义标签栏在不同的屏幕上工作，只是看到了一件奇怪的事情。

试用两款 HTC 手机，Legend 和新款 One X。

选项卡布局在其自己的文件 (tab_indicator.xml) 中，如下所示：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="0dp"
android:layout_height="50dp"
android:layout_weight="1"
android:layout_marginBottom="0dp"
android:orientation="vertical"

android:background="@drawable/tab_indicator"
android:padding="3dp">

<ImageView android:id="@+id/icon"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:src="@drawable/icon"

/> 

<TextView android:id="@+id/title"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textSize="11dp"
    android:layout_alignParentBottom="true" 
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="0dp"
    style="?android:attr/tabWidgetStyle"
/> 
```

现在，我的问题是“layout_height”！

在图例上，这很好用，在文本显示之前，我的图标下方会出现一些空格。

然而，在 One X 上，条形实际上看起来*更小*，并且文本与图标发生冲突，即高度似乎很小！

我本来期望相反，因为 One x 上的屏幕要大得多...

如果有人有任何想法，我将不胜感激。

# macos - 为什么我的 nginx 服务无法在我的 mac 上停止？

> ID：11010991
> 
> 赞同：1
> 
> 时间：2012-06-13T08:31:48.387
> 
> 标签：macos, nginx

我使用自制软件在我的 mac lion 上安装了 nginx。当我输入命令时：

```
nginx -s stop 
```

该服务将在一秒钟内再次启动。我怎样才能阻止它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T17:47:32.783

如果您安装了`LaunchAgent`，我相信如果它没有运行，它将使服务保持活力。

[请参阅 launchd.plist 手册页](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man5/launchd.plist.5.html)

您可以尝试运行 `launchctl stop org.nginx.nginx`或删除

```
<key>KeeyAlive</key>
<true/> 
```

来自 plist ( `~/Library/LaunchAgents/org.nginx.nginx.plist`)的位

**更新**

看起来停止守护进程的唯一方法是`unload`使用 LaunchAgent：

```
launchctl unload ~/Library/LaunchAgents/org.nginx.nginx.plist 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-08T02:43:20.837

```
/usr/local/opt/nginx/bin/nginx -g daemon off 
```

# xpath - 如何存储 xpath 的内容/值？

> ID：11010992
> 
> 赞同：4
> 
> 时间：2012-06-13T08:31:49.220
> 
> 标签：xpath, selenium-ide

假设 xpath 如下：

```
xpath : //div[@id='cslGridViewPanelControl']/div/div[2]/div/table/tbody/tr/td[2]/table/tbody/tr/td/table/tbody/tr/td/div

Last div element contains 'Displaying 1 to 30 of 145300'.
I need to store 'Displaying 1 to 30 of 145300' in some variable by using selenium tool. 
```

我试过了

```
command    target           value 
 store      xpath           variable1
 echo      ${variable1} 
```

它显示为变量 1：xpath。但我需要变量 1：“显示 145300 的 1 到 30”。谁能帮帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T08:53:49.437

```
Try storeText ( locator, variableName )
Then use it ${variableName} 
```

有关 storeText，请参阅[Selenium 文档](http://release.seleniumhq.org/selenium-core/0.8.0/reference.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-16T08:49:53.777

saga 告诉你如何存储那个字符串，因为你只需要存储 145300，下面的代码会帮助你

```
store   |  Displaying 1 to 30 of 145300  |  string
store   | 1 |  delimiter
store   | javascript{storedVars['string'].split('of')[storedVars['delimiter']]}  |  result
echo    | ${result} 
```

# php - 使用 SolrPhpClient UI 将值“AND”/“OR”动态传递给 Solr

> ID：11010996
> 
> 赞同：0
> 
> 时间：2012-06-13T08:32:00.060
> 
> 标签：php, search, solr, jetty

我正在为 Solr 使用 SolrPhpClient UI。在这里，我将用户搜索输入配置为适当的输入，例如“prod_path:(mens sports puma sneaker shoes)&q.op=AND”，这在 Solr 应用程序的情况下可以正常工作，但是当我使用 SolrPhpClient 时这个输入不能正常工作用户界面。我的意思是，它对 AND 和 OR 给出相同的结果。在 SolrPhpClient UI 的情况下，我想动态传递值 'AND'/'OR'。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T09:23:12.027

我像这样传递了选项（AND/OR）`$results = $solr->search($searchterm, 0, $limit,$option);`，其中 Search 是 Apache_Solr_Service 类的函数。在搜索功能中，我将选项值分配给 params 数组，例如`$params['q.op'] = $option;`. 我得到的结果取决于 AND/OR 选项。

# jquery - 显示隐藏一个 div 单击另一个 div 并通过单击外部任意位置将其关闭

> ID：11010997
> 
> 赞同：0
> 
> 时间：2012-06-13T08:32:07.097
> 
> 标签：jquery, panel, selector

我有这个html：

```
<div class="trigger">
    My button
</div>

<div class="panel">
    <span class="close-btn"></span>
        My panel
</div> 
```

和这个jQuery：

```
$(".trigger").click(function() {
$('.panel').fadeIn("fast");
$(this).toggleClass('isOpen');
});

$(".close-btn").click(function() {
$('.panel').fadeToggle("fast");
$('.trigger').removeClass('isOpen');
});

$('.panel').hover(function() {
mouse_is_inside = true;
}, function() {
mouse_is_inside = false;
});

$("body").mouseup(function() {
if (!mouse_is_inside) $('.panel').fadeOut("fast");
$('.trigger').removeClass('isOpen');
});

if ($(".trigger").hasClass('isOpen')) {
$('.panel').fadeOut("fast");
}​ 
```

我想做的是：

1.  打开面板，然后，
2.  通过单击页面中的任意位置但在面板本身中关闭它，
3.  在面板内的关闭按钮上，
4.  在打开它的 div 上。

但我无法让它工作，因为当面板打开时，div“触发器”会因为允许我单击页面中任意位置的功能而感到困惑并不断打开和关闭面板。

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T12:29:00.873

这可能不是一个漂亮的解决方案：

```
$(".trigger").click(function() {
    $('.panel').fadeIn("fast");
});

$(".close-btn, .panel").click(function(e) {
    e.preventDefault();
    $('.panel').fadeOut("fast");
});

$(document).on('click', function(e) {
    if (!(e.target.className == 'trigger' || e.target.className == 'panel' || e.target.className == 'close-btn')) {
        $('.panel').fadeOut("fast");
    }
}); 
```

小提琴：[小提琴](http://jsfiddle.net/Kavh4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T12:52:12.313

这就是我在 http://www.360kayak.org 中实现的方式[：http](http://www.360kayak.org) : [//pastebin.com/UVvELYES](http://pastebin.com/UVvELYES)

我希望它可以成为一种灵感。

解决方案是，在我的动画之前`event.stopPropagation();`调用 是slideUp/slideDown，而不是淡入淡出，但即使淡入淡出它也应该工作。`stop()``animate()`

这部分管理“点击外部关闭”。

```
$('html').click( function(event) {
        var formWrapper = $("#block-user-login-form-wrapper");
        if (formWrapper != null && formWrapper.position() != null && formWrapper.position().top == 0) {
          $("#block-user-login-form-wrapper").stop().animate({
            top: "-128px"
          }, null, null, function() {
            $("#signin-button").addClass("enabled");
          });
          event.stopPropagation();
        }
      }); 
```

这可以防止在单击时向上滑动表单

```
 $("#block-user-login-form").click( function(event) {
    event.stopPropagation();
  }); 
```