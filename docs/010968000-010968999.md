# StackOverflow 问答 10968000-10968999

# java - JavaFX HTMLEditor - 插入图像功能

> ID：10968000
> 
> 赞同：6
> 
> 时间：2012-06-10T10:38:36.120
> 
> 标签：java, html, image, wysiwyg, javafx-2

我正在使用 JavaFX 集成的 HTMLEditor。它具有的所有功能都很好，但我还需要在 HTML 文本中插入图像的功能。你知道一些我可以使用的来源吗？或者其他一些可以在 JavaFX 中使用并且具有此功能的 HTML (WYSIWYG) 编辑器？我可以自己将这个功能编程到现有的 JavaFX HTMLEditor 中，但我更愿意在开始做某事之前先问一下 :)

非常感谢您的回答；）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T07:04:52.657

我建议只自定义现有的 JavaFX HTMLEditor，如果它可以完成您需要的大多数事情，除了添加图像并且它的外观和感觉对您来说基本上没问题。

我创建了一个[代码示例](https://gist.github.com/2514709)来帮助完成一些 JavaFX HTMLEditor 自定义任务。

对于非常基本的 html 编辑器，您可以使用的另一个选项是[contenteditable](http://html5doctor.com/the-contenteditable-attribute/)设置为 true 的 WebView。虽然我还没有用图像尝试过 - 也许它会正常工作。

如果上述选项对您不起作用，则有大量基于 javascript 的编辑器可供选择。

# javascript - 设置父位置的目的是什么？

> ID：10968003
> 
> 赞同：0
> 
> 时间：2012-06-10T10:39:07.353
> 
> 标签：javascript, html

我在页面中嵌入了一个 iframe。为什么我们需要从 iframe 设置 perent 位置 Href，有什么原因吗？

```
self.parent.location.href = blah blah blah; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T10:41:29.800

这通常是一种破帧技术。

通常是这样的：

```
if(self != top)top.location.href=someUrl; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T17:06:45.140

由于可以在页面正文中放置 iframe 标记，因此您可以使用它`top`来操作主窗口。看：

**主页**

```
<!--This is the main page-->
<html>
    <head>
        <script>
        alert(window.top.location.href);//The main page's URL
        alert(window.self.location.href);//The main page's URL
        alert(window.top.location.href);//The main page's URL
        </script>
    </head>
    <body>
        <iframe src="myFrame.html"></iframe>
    </body>
</html> 
```

**myFrame.html**

```
<html>
    <head>
        <script>
        alert(window.location.href);//"myFrame.html"
        alert(window.self.location.href);//"myFrame.html"
        alert(window.top.location.href);//The main page's URL
        </script>
    </head>
    <body>
    </body>
</html> 
```

# c# - 使用 .net 配置 mq websphere 7

> ID：10968005
> 
> 赞同：1
> 
> 时间：2012-06-10T10:39:18.197
> 
> 标签：c#, .net, websphere, ibm-mq

我正在尝试使用 c# 连接到远程队列。我尝试了很多方法来连接到远程队列，但它总是失败并出现常见错误，例如：`MQRC_CHANNEL_CONFIG_ERROR`或`MQRC_HOST_NOT_AVAILABLE`.

我正在做的是这样的：

```
 string channel = "QM_TEST.SVRCONN"; 
        string hostname = "<serverIp>"; 
        string queueName = "QM_TEST"; 
        string port = 1414; 

        props.Add(MQC.HOST_NAME_PROPERTY, hostname); 
        props.Add(MQC.CHANNEL_PROPERTY, channel); 
        props.Add(MQC.PORT_PROPERTY, port ); 
        props.Add(MQC.TRANSPORT_PROPERTY, MQC.TRANSPORT_MQSERIES_MANAGED); 

        MQQueueManager mqQueue = new MQQueueManager(queueName, props); 
```

我试过改变这个，但都失败了。

我认为我的问题是服务器配置..您能否指出如何配置服务器并使用 .net 连接到它的完整指南？

我的问题是使用 .net 连接到远程服务器而不是本地服务器。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-17T08:05:17.647

问题是客户端和服务器之间的 CCSID 不同。

[http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0/index.jsp?topic=%2Fcom.ibm.mq.csqzaf.doc%2Fcs12480_.htm](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0/index.jsp?topic=%2Fcom.ibm.mq.csqzaf.doc%2Fcs12480_.htm)

在客户端我不得不把

```
Environment.SetEnvironmentVariable("MQCCSID", "437"); 
```

这就是为什么我得到：

```
MQRC_CHANNEL_CONFIG_ERROR 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T12:24:43.423

我猜问题（或至少*是一个*问题）在这里：

```
MQQueue mqQueue = new MQQueueManager(queueName, props); 
```

这应该是

```
queueManager = new MQQueueManager(queueManagerName, properties); 
```

如果您已将 WebSphere MQ 客户端安装到默认位置，则以下目录下有许多示例程序：

```
C:\Program Files (x86)\IBM\WebSphere MQ\tools\dotnet\samples\cs\base\ 
```

那里有许多用于各种任务的示例程序。如果您安装了最新的 V7.1 客户端，那么您将看到以下程序：

```
SimpleAsyncPut
SimpleClientAutoReconnectGet
SimpleClientAutoReconnectPut
SimpleGet
SimpleMessageProperties
SimplePublish
SimplePut
SimpleReadAhead
SimpleSharingConversation
SimpleSubscribe
SimpleXAGet
SimpleXAPut 
```

还有 WCF 和 XMS 示例。

[如果您需要客户端代码，请在此处](https://stackoverflow.com/questions/10957612/what-is-the-latest-websphere-mq-client-version/10957643#10957643)查看我对另一个 SO 问题的回复以获取链接。

**更新：**

这是正常的诊断过程。

1.  如果 WMQ 组件是通过从其他地方重新定位库或类来安装的，请使用供应商提供的完整客户端媒体执行安装。这包括故障排除实用程序，例如 trace、dspmqver 等。它还解决了任何库或类不匹配问题。
2.  使用预编译的客户端程序来测试连接。,`amqsputc`和程序需要[这里描述](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r1/topic/com.ibm.mq.doc/cs12280_.htm)`amqsgetc`的环境变量。[SupportPac MA01](http://ibm.co/SupptPacMA01)的 Q 程序是单独下载的，但其优点是不需要任何环境变量、CCDT 文件或其他依赖项。`amqsbcgc``MQSERVER`
3.  如果示例程序失败，请检查 QMgr 的错误日志以`[WMQ install]/qmgrs/[QMgr name]/errors/AMQERR01.LOG`获取消息。还要检查 FDC 文件和`[WMQ install]/errors`.
4.  [如果 QMgr 端没有错误，请在使用此处](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r1/topic/com.ibm.mq.msc.doc/xms_ctrouble_trace_net.html)和[此处](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r1/topic/com.ibm.mq.doc/cs12880_.htm)所述的客户端跟踪时再次尝试连接。

大多数客户端问题都可以通过安装 IBM 提供的完整 WMQ 客户端来解决。（相反，这意味着大多数人是通过抓取 DLL 或 JAR 文件进行安装的。）如果问题仍然存在，QMgr 和客户端上的错误日志检查通常会揭示根本原因。如果这些不起作用，那么跟踪通常会诊断出剩余的问题。

**更新 2：根据**[MQSeries.net 上发布](http://www.mqseries.net/phpBB2/viewtopic.php?p=332547#332547)
的错误消息，通道具有安全出口集。安全出口是通道在启动通道时调用的外部代码。如果无法访问出口的代码或文档，就无法知道出口期望或做什么。如果出口是内部编写的，您需要与程序员交谈以确定它需要什么。如果出口是商业产品，那么您将需要获取它的文档。

或者，更改通道以使其`SCYEXIT`为空白以禁用退出。

MQSeries.net 上发布的数据如下：

```
MQ9575: DCE Security: failed to get the user's login name.

EXPLANATION:

System call 192.168.50.55 to get the login name of the user running WebSphere
MQ client application process 5 failed with error value -1\. This occurred in
security exit function create_cred. The exit will now attempt to open channel
using the DCE default login context.
ACTION:
If you wish to run using the DCE default login context take no action. If you
wish to run using the user's login name as the DCE security exit principal
examine the documentation for the operating system on which you are running MQ
clients and reconfigure the operating system as necessary to allow the
192.168.50.55 call to succeed. 
```

请注意，它表明调用在安全出口中失败。

# iphone - 无法从 C++ 文件 (Cocos2D/Box2d) 访问对象属性

> ID：10968007
> 
> 赞同：0
> 
> 时间：2012-06-10T10:39:32.630
> 
> 标签：iphone, ios, xcode, cocos2d-iphone, box2d

我正在使用 Box2d 实现一个 Contact Listener，它是一个 C++ .mm 文件。

每当两个气泡碰撞时，我想知道以便执行某些操作。这是我的代码：

```
void ContactListener::BeginContact(b2Contact* contact)
{

    b2Body* bodyA = contact->GetFixtureA()->GetBody();
    b2Body* bodyB = contact->GetFixtureB()->GetBody();
    if (bodyA->GetUserData() != NULL && bodyB->GetUserData() != NULL)
    {
        BubbleSprite* bNodeA = (BubbleSprite*)bodyA->GetUserData();
        BubbleSprite* bNodeB = (BubbleSprite*)bodyB->GetUserData();

        BOOL oneIsBeingTouched;
        if(bNodeA.isDrag == YES || bNodeB.isDrag == YES) oneIsBeingTouched = YES;
... 
```

BubbleSprite 有`property BOOL isDrag`指示它们当前是否被用户拖动。我得到的问题是：

```
 Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 
'-[CCSprite isDrag]: unrecognized selector sent to instance 0x1ed504a0' 
```

BubbleSprite 是 CCSprite 的子类。isDrag 在其文件中正确声明和合成。有人对发生的事情有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T11:46:44.210

我建议使用吸气剂，像这样创建你的财产。

```
@property (nonatomic, assign, getter=isDrag) BOOL dragging; 
```

当然，`@synthesize`它。现在您可以使用`-setDragging:`和`[bNodeA isDrag]`。没什么大不了的，但应该使代码更容易理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T11:02:36.207

尝试使用

```
 if (bNodeA.drag == YES) ... 
```

或者

```
if ([bNodeA isDrag] == YES) ... 
```

# c# - 如何从 asp.net 访问纯 html 表格的单元格内容

> ID：10968008
> 
> 赞同：3
> 
> 时间：2012-06-10T10:39:57.803
> 
> 标签：c#, jquery, asp.net

我有一张桌子：

```
<table id="trTable" runat="server" clientidmode="Static">
        <thead>
            <tr>
                <th style="display:none">
                    ID
                </th>
                <th style="width: 112px">
                    Item
                </th>
                <th style="width: 40px; text-align: left">
                    Price
                </th>
                <th style="width: 24px; text-align: center">
                </th>
                <th style="width: 26px; text-align: center">
                    Qty
                </th>
                <th style="width: 24px; text-align: center">
                </th>
                <th style="width: 40px; text-align: right">
                    Total
                </th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table> 
```

并使用 jQuery 向其中添加新行：

```
var newRow = $("<tr> <td class='drinkID' style='display:none'>" + drinkID + "</td> <td class='drinkName'>" + dName + "</td>  <td class='drinkPrice'>" + dPrice + "</td>  <td style='text-align:center'><input id='Button' type='button' value='<' class='minusButton' /> </td>  <td class='drinkQty'>1</td>  <td style='text-align:center'><input id='Button' type='button' value='>' class=\"plusButton\" /></td>  <td class='drinkTotal'>" + dPrice + "</td>  </tr>"); 
```

如何使用 asp.net 访问单元格的内容？

我在用：

```
foreach (HtmlTableRow row in trTable.Rows)
        {
            Response.Write("RowDetails:" + row.Cells[1].InnerHtml);
        } 
```

但是 response.write 只是输出：

```
RowDetails: Item 
```

为什么它没有获取单元格内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T10:48:51.957

您在客户端的 html 结构页面上更改的内容不会发送回服务器，并且服务器对此一无所知。

换句话说，页面上的内容并没有完全回到服务器上。

为了解决这个问题，您可以同时进行两次编辑，一次在用户看到的内容上，一次在隐藏的输入上隐藏，以将更改发回服务器并在服务器端重新创建表。

希望这能制造场景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T03:10:18.637

您还可以使用 Microsoft Ajax 在行中启用部分呈现。这将执行相同的回发效果，但只会将受影响的内容发送到客户端。

# android - 基于动态输入的Android i18N

> ID：10968010
> 
> 赞同：0
> 
> 时间：2012-06-10T10:40:21.597
> 
> 标签：android, localization

我想根据用户定义的语言而不是设备语言来本地化我的 android 应用程序。我怎样才能做到这一点？

# c# - 使用 Sharp Develop 使用 Mysql 作为嵌入式应用程序数据库

> ID：10968012
> 
> 赞同：0
> 
> 时间：2012-06-10T10:40:24.200
> 
> 标签：c#, mysql, sharpdevelop

是否可以在不安装服务器的情况下将 Mysql 用作本地应用程序的 SQLlite、Firebird（单个数据库文件）？

我需要一个数据库来存储我的应用程序的数据。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T10:56:21.327

似乎有一个选项适合您：[libmysqld](http://dev.mysql.com/doc/refman/5.1/en/libmysqld.html)。

> 嵌入式 MySQL 服务器库可以在客户端应用程序中运行功能齐全的 MySQL 服务器。

它是用 C/C++ 编写的，因此您应该能够在您的 C# 应用程序中使用它。

顺便说一句：为什么不使用 Firebird 的 SQLite？它们似乎更适合您的要求。

# vbscript - 使用 VBScript 访问网络摄像头或麦克风

> ID：10968014
> 
> 赞同：1
> 
> 时间：2012-06-10T10:40:46.167
> 
> 标签：vbscript

是否可以使用 Visual Basic Sc​​ripting 访问麦克风或网络摄像头？我尝试在谷歌上搜索，但没有找到好的答案。

我只需要问是否有任何简单的方法可以实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T08:07:51.883

如果产品提供了可以通过 VBScript 加载的 COM 对象，则可以这样做，否则不能。如果也可以通过这种方式控制摄像头，则可以使用 IP 地址查看某些网络摄像头，理论上您可以使用 VBScript 加载此页面并与之交互。但是，您最好使用更适合此类工作的语言，例如 Ruby。

# iphone - 如何深度复制多维 NSMutableArray 及其内容？

> ID：10968021
> 
> 赞同：1
> 
> 时间：2012-06-10T10:41:48.800
> 
> 标签：iphone, objective-c, arrays, deep-copy

我目前有一个需要深度复制的三维 NSMutableArray。但是，以下代码似乎导致它及其内容变得不可变，因为当我尝试从中删除任何对象时它会导致 NSInvalidArgumentException。

```
NSMutableArray* copy = [[[NSMutableArray alloc] initWithArray:input copyItems:YES] autorelease]; 
```

如何在不导致数组不可变的情况下进行深度复制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T10:50:57.757

从清单来看，

> 不可变类的复制实现通常返回相同的对象——因为它是不可变的，所以不需要“真正的”副本。但是您不必担心这一点。

以上来自[http://lists.apple.com/archives/cocoa-dev/2008/May/msg00172.html](http://lists.apple.com/archives/cocoa-dev/2008/May/msg00172.html)

因此，请确保在添加`input`数组之前，将该输入数组转换为可变副本，然后调用该方法。

### 代码：

```
NSMutableArray* mutableInput = [input mutableCopy];
NSMutableArray* copy = [[[NSMutableArray alloc] initWithArray:mutableInput copyItems:YES]autorelease]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T14:38:33.500

使用 NSCoding

在 .h 文件中 @interface 类名：NSObject

在 .m 文件中

*   (id)copyWithZone:(NSZone *)zone { }

# php - 遍历 JSON 对象内的数组

> ID：10968022
> 
> 赞同：2
> 
> 时间：2012-06-10T10:41:54.620
> 
> 标签：php, arrays, json

这是我试图迭代的以下 JSON 结构

```
{
   "AS":{
      "Query":"vi",
      "FullResults":1,
      "Results":[
         {
            "Type":"AS",
            "Suggests":[
               {
                  "Txt":"videos",
                  "Type":"AS",
                  "Sk":""
               },
               {
                  "Txt":"vipjatt",
                  "Type":"AS",
                  "Sk":"AS1"
               },
               {
                  "Txt":"vit",
                  "Type":"AS",
                  "Sk":"AS2"
               },
               {
                  "Txt":"vijaya bank",
                  "Type":"AS",
                  "Sk":"AS3"
               },
               {
                  "Txt":"videocon d2h",
                  "Type":"AS",
                  "Sk":"AS4"
               },
               {
                  "Txt":"visarev",
                  "Type":"AS",
                  "Sk":"AS5"
               },
               {
                  "Txt":"vijaya karnataka",
                  "Type":"AS",
                  "Sk":"AS6"
               },
               {
                  "Txt":"video songs",
                  "Type":"AS",
                  "Sk":"AS7"
               }
            ]
         }
      ]
   }
} 
```

这是我用来迭代它并尝试访问“Txt”属性的代码

```
$data = $info->get($url);
$content = json_decode($data);
$i = 0;
foreach($content->AS->Results as $item) {
$each = $item->Suggests[$i]->Txt;
    $i++;
    echo $each;
} 
```

但我只能访问“Txt”属性的第一次出现。我的代码有什么问题？为什么它打印“Txt”属性的每一个外观？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T10:45:58.377

您正在迭代`AS->Results`项目，其中恰好有一个。您想直接遍历`Suggests`数组：

```
foreach ($content->AS->Results[0]->Suggests as $item) {
    echo $item->Txt;
} 
```

`Results`我不知道数组中是否可能有多个项目。也许您需要先对它们进行迭代以挑选出正确的`Suggests`项目进行迭代。

# c# - 为什么缓冲区是空的？

> ID：10968024
> 
> 赞同：0
> 
> 时间：2012-06-10T10:42:02.813
> 
> 标签：c#, serial-communication

我正在尝试检查一些在 GSM 调制解调器上运行的 AT 命令的值。在尝试检查命令的输出是否包含某些值时，我陷入了困境。

使用以下代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO.Ports;
using System.IO;
using System.Timers;

namespace SerialTest
{
    public class Program
    {

        public static void Main(string[] args)
        {
            string buff="0";
            string ok = "OK";

            SerialPort p = new SerialPort("COM28");
            p.DataReceived += new SerialDataReceivedEventHandler(p_DataReceived);
            p.Open();
            string line = "1";
            p.Write("AT" + "\r");
            buff = p.ReadExisting();
            Console.WriteLine("buff: \"{0}\"\nok: \"{1}\"", buff, ok);
            p.Write("AT+CMGF=1"+ "\r" );
            buff = p.ReadExisting();
            Console.WriteLine("buff: \"{0}\"\nok: \"{1}\"", buff, ok);
            do
            {
                p.Write("AT+CMGL=\"REC UNREAD\" " + "\r");
                buff = p.ReadExisting(); 
                Console.WriteLine("buff: \"{0}\"\nok: \"{1}\"", buff, ok);
                /*if (buff.Contains(ok))
                    Console.WriteLine("Everything is OK");
                else
                    Console.WriteLine("NOK");*/
                line = Console.ReadLine();
            } while (line != "quit");
            p.Close();
        }

        public static void p_DataReceived(object sender, SerialDataReceivedEventArgs e)
        {

            Console.WriteLine((sender as SerialPort).ReadExisting());
        }
    }
} 
```

我得到这个输出：

![在此处输入图像描述](../Images/35e3e525b03b016682ec11635801e09e.png)

为什么有时buff为空，稍后显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T10:56:33.847

有这样的呼吁`ReadExisting()`是多余的。您不应该在 main 方法中读取串行端口输出，让事件处理程序为您完成工作。此外，您应该将在事件处理程序中读取的内容附加到`buff`变量中，以便在检查缓冲区时可以接收到所有数据。

试试这个：

```
public class Program
{
    public static void Main(string[] args)
    {
        ModemReader r = new ModemReader();
        r.StartReading();
    }
    class ModemReader{
        string buff="";
        public void StartReading()
        {
            string ok = "OK";
            SerialPort p = new SerialPort("COM28");
            p.DataReceived += new SerialDataReceivedEventHandler(p_DataReceived);
            p.Open();
            string line = "1";
            p.Write("AT" + "\r");
            Console.WriteLine("buff: \"{0}\"\nok: \"{1}\"", buff, ok);
            p.Write("AT+CMGF=1"+ "\r" );
            Console.WriteLine("buff: \"{0}\"\nok: \"{1}\"", buff, ok);
            do
            {
                // Clear the buffer here
                buff = "";  

                p.Write("AT+CMGL=\"REC UNREAD\" " + "\r");
                Console.WriteLine("buff: \"{0}\"\nok: \"{1}\"", buff, ok);
                if (buff.Contains(ok))
                    Console.WriteLine("Everything is OK");
                else
                    Console.WriteLine("NOK");
                line = Console.ReadLine();
            } while (line != "quit");
            p.Close();
        }
        public void p_DataReceived(object sender, SerialDataReceivedEventArgs e)
        {
            string s = (sender as SerialPort).ReadExisting();
            buff += s;
            Console.WriteLine(s);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T10:48:29.093

您只能使用一次端口数据。因为您在处理程序中使用它，所以当您尝试将其放入缓冲区时它不再存在。

# android - 保存画布后，图片不可用

> ID：10968027
> 
> 赞同：0
> 
> 时间：2012-06-10T10:42:11.643
> 
> 标签：android, canvas

我正在尝试将画布的状态保存到我的 SD 卡或手机图库中，这对我来说并不重要。我在下面有这些代码，当点击屏幕时，文件保存在 SD 卡中，但作为无法识别的文件，如感叹号警告标记图片不可用

代码：

```
package your.save.namespace; 
import android.app.Activity; 
import android.os.Bundle; 
import java.io.FileOutputStream; 
import android.content.Context; 
import android.graphics.Bitmap; 
import android.graphics.Canvas; 
import android.graphics.Color; 
import android.graphics.Paint; 
import android.util.Log; 
import android.view.KeyEvent; 
import android.view.MotionEvent;
import android.view.View; 
import android.widget.Toast;
public class testSaveView extends Activity 
{ 
        SomeView sv = null; 
    /** Called when the activity is first created. */ 
    @Override 
    public void onCreate(Bundle savedInstanceState) 
    { 
        super.onCreate(savedInstanceState); 
        sv = new SomeView(this); 
        setContentView( sv ); 
    } 
    @Override 
    public boolean onTouchEvent(MotionEvent event) 
    {
     int type=event.getAction();
     Log.i(null,"GOOOD");
     if(type==MotionEvent.ACTION_DOWN)
        { 

                        if ( sv != null ) 
                        { 
                              Log.i(null,"GOOOD");
                                saveView( sv ); 
                                return true; 

                        } 
                        Log.i(null,"GOOOD");
        }
     return true;
     }
    private void saveView( View view ) 
    { 
         Log.i(null,"GOOOD");
         Log.i(null,"hii"+view.getWidth()+"hello"+view.getHeight ());
       Bitmap  b = Bitmap.createBitmap( view.getWidth(), view.getHeight (), Bitmap.Config.ARGB_8888); 
       Canvas c = new Canvas( b ); 
       view.draw( c ); 
       FileOutputStream fos = null; 
       try { 
                fos = new FileOutputStream( "/sdcard/some_view_image_" + System.currentTimeMillis() + ".png" ); 
                Toast.makeText( null, "Saved", Toast.LENGTH_LONG).show();
                Log.i(null,"GOOOD");

                if ( fos != null ) 
                { 
                    Log.i(null,"GOOOD!!!!!!!");

                        b.compress(Bitmap.CompressFormat.PNG, 100, fos ); 
                        fos.close(); 
                } 
                setWallpaper( b ); 
            } catch( Exception e ) 
                        { 
                        Log.e("testSaveView", "Exception: " + e.toString() ); 
                        } 
    } 
class SomeView extends View 
{ 
        public SomeView( Context context ) 
        { 
          super( context ); 
        } 
        public void onDraw( Canvas canvas ) 
        { 
                canvas.drawARGB(0x80, 0xff, 0, 0 ); 
                Paint paint = new Paint(); 
                paint.setColor(Color.BLUE); 
                paint.setTextSize( 48 ); 
                canvas.drawText("...Some view...", 10, canvas.getHeight() / 2, 
paint); 
        } 
} 
} 
```

也许问题出在清单上：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="your.save.namespace"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
           <activity android:name=".testSaveView" 
                  android:label="@string/app_name"> 
            <intent-filter> 
                <action android:name="android.intent.action.MAIN" /> 
                <category 
android:name="android.intent.category.LAUNCHER" /> 
            </intent-filter> 
        </activity> 
    </application> 
    <uses-sdk android:minSdkVersion="3" /> 
<uses-permission android:name="android.permission.SET_WALLPAPER"></uses-permission> 
</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T13:09:37.433

```
<uses-sdk > repeat 2 times 3 & 10 remove any 1 
```

要访问 SD 卡，您需要使用权限

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# emacs - 在 org 模式下，如何从（主）.org 文件中包含其他 .org 文件？

> ID：10968034
> 
> 赞同：18
> 
> 时间：2012-06-10T10:43:32.753
> 
> 标签：emacs, org-mode

我想将一些自定义代码放在一个单独的文件中，稍后从其他文件中包含它。例如，文件`config.org`只有一行`#+MATHJAX: align:"left" mathml:t`。如何将它包含在另一个 .org 文件`abc.org`中，以便净效果与我`#+MATHJAX`直接在 abc.org 中编写该行完全相同？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-10T14:10:48.997

使用`#+setupfile: /path/to/config.org` [记录在这里](http://orgmode.org/manual/In_002dbuffer-settings.html#In_002dbuffer-settings)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-10T12:50:36.783

该`#+INCLUDE`指令可以[包含另一个带有导出选项的文件](http://orgmode.org/manual/Include-files.html)（但它不会影响封闭文件的配置，因为它仅用于导出目的）。像这样使用它：

```
#+INCLUDE: "/path/to/config.org" 
```

# sql - 是否可以在 Select * 中使用小写或大写

> ID：10968036
> 
> 赞同：3
> 
> 时间：2012-06-10T10:43:41.787
> 
> 标签：sql, sql-server, oracle, select, sqlite

我正在做一个基本的查询

```
Select Lower(column-name) from table 
```

现在，如果我想在多个列上使用小写字母，我需要做一个

```
Select Lower(col1), Lower(col2) from table 
```

我想知道是否可以在所有列上执行小写函数应用程序。

就像是

```
Select Lower(*) from table 
```

这不是一个有效的声明，当我尝试使用 sqlite3 时，我猜其他供应商也一样。有没有人能够通过不同的方法做到这一点。也许是 PL/SQL 或 T-SQL。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T10:48:16.340

不，不可能一次获取所有小写的列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T13:48:51.247

我同意，如果不提及每一列，就无法做到这一点。但是由于您的消费应用程序可能无论如何都必须遍历所有列和行，我建议无论如何这是转换这些数据的正确位置......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T07:11:29.203

虽然不可能使用内置的 sql 结构来实现这一点，但一个小的 sql 脚本应该可以解决这个目的。请考虑下面给出的脚本：

```
declare @number_of_columns int
declare @counter int
declare @query nvarchar(max)
declare @column_name nvarchar(max)
set @query = 'select '
set @counter = 1
select @number_of_columns = count(ordinal_position) from information_schema.columns where table_name = '<your table name>'
while(@counter <= @number_of_columns) 
begin
select @column_name = column_name from information_schema.columns
where table_name = '<your table name>' and ordinal_position = @counter
if(@counter < @number_of_columns)
    begin
        Set @query = @query + 'lower(' + (@column_name) + '),'
    end
else
    begin
        Set @query = @query + 'lower(' + (@column_name) + ')'
    end 
set @counter = @counter + 1
end
set @query = @query + ' from <your table name>'
select @query
EXEC sp_executesql @query = @query 
```

虽然，上述脚本不适用于 'ntext' 数据类型，因为它需要显式转换为 varchar 才能应用 'lower' 函数，而且对于 'int'、'datetime' 等数据类型可能不需要该脚本。因此，通过对列的数据类型应用附加条件来修改脚本。

# ruby-on-rails - 将移动引导链接移动到右侧

> ID：10968038
> 
> 赞同：2
> 
> 时间：2012-06-10T10:44:44.417
> 
> 标签：ruby-on-rails, twitter-bootstrap

默认情况下，移动容器下拉列表中的链接位于左侧（如下所示）：

![在此处输入图像描述](../Images/356540a6173443731c3f77241f114780.png)

有没有办法让他们出现在右边而不是左边？我尝试使用`text-align:right;`但它没有显示干净：

![在此处输入图像描述](../Images/076d9163d98b2f9e3c7c3bc528d7db6e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T11:46:48.813

例如，您可以创建自己的类`.align-right`并将其添加到`.nav-collapse`容器中以使链接向右对齐。这样，您的更改不会影响依赖于引导样式表上该类的其他元素。尝试这个：

```
.nav-collapse.align-right {
    text-align:right;
} 
```

然后你可以这样做：

```
<div class="nav-collapse align-right"> ..links.. </div> 
```

您的链接将被放置在右侧。

演示：http: [//jsfiddle.net/PWFSX/](http://jsfiddle.net/PWFSX/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-09T19:58:19.137

从引导文档： http: [//getbootstrap.com/components/#navbar](http://getbootstrap.com/components/#navbar)

你必须使用这些类“navbar-form navbar-left

我是这样使用它们的：

```
<div class="container">
 <div class="navbar-header">
   <button type="button" class="navbar-toggle" data-  toggle="collapse" data-target=".navbar-collapse">
     <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="span10"></span>
    </button>
    <%= link_to 'Home', root_path, class: 'navbar-brand' %>
   </div>
   <div class="collapse navbar-collapse">
    <ul class="nav navbar-nav">
     <%= render 'layouts/navigation_links' %>
    </ul>
    <ul class='nav navbar-nav navbar-right'>
      <% if user_signed_in? %>
        <li><%= link_to 'Sign out', destroy_user_session_path, :method => :delete %></li>
      <% else %>
        <li><%= link_to 'Sing in', new_user_session_path %>     </li>
       <% end %>
     </ul>
   </div>
   </div> 
```

# postgresql - Postgresql：从文件中插入列的值

> ID：10968039
> 
> 赞同：18
> 
> 时间：2012-06-10T10:44:45.213
> 
> 标签：postgresql, file-io

例如，有一个名为“testtable”的表，它具有以下列：testint (integer) 和 testtext (varchar(30))。

我想做的几乎是这样的：

```
INSERT INTO testtable VALUES(15, CONTENT_OF_FILE('file')); 
```

在阅读 postgresql 文档时，我只能找到 COPY TO/FROM 命令，但该命令适用于表，而不是单个列。

那么，我该怎么办？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-02T14:08:11.937

如果此 SQL 代码是从您的编程语言动态执行的，请使用该语言的方法来读取文件，并执行普通的 INSERT 语句。

但是，如果此 SQL 代码旨在通过`psql`命令行工具执行，则可以使用以下构造：

```
\设置内容`猫文件`
INSERT INTO testtable VALUES(15, :'content');

```

请注意，此语法特定于`psql`并使用`cat`shell 命令。

PostgreSQL手册中有详细解释：

*   [psql / SQL 插值](http://www.postgresql.org/docs/9.2/static/app-psql.html#APP-PSQL-INTERPOLATION)
*   [psql / 元命令](http://www.postgresql.org/docs/9.2/static/app-psql.html#APP-PSQL-META-COMMANDS)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T10:55:59.873

如果我正确理解您的问题，您可以将单个字符串读入临时表并将其用于插入：

```
DROP SCHEMA str CASCADE;
CREATE SCHEMA str;

SET search_path='str';

CREATE TABLE strings
    ( string_id INTEGER PRIMARY KEY
    , the_string varchar
    );
CREATE TEMP TABLE string_only
    ( the_string varchar
    );

COPY string_only(the_string)
FROM '/tmp/string'
    ;   

INSERT INTO strings(string_id,the_string)
SELECT 5, t.the_string
FROM string_only t
    ;   

SELECT * FROM strings; 
```

结果：

```
NOTICE:  drop cascades to table str.strings
DROP SCHEMA
CREATE SCHEMA
SET
NOTICE:  CREATE TABLE / PRIMARY KEY will create implicit index "strings_pkey" for table "strings"
CREATE TABLE
CREATE TABLE
COPY 1
INSERT 0 1
 string_id |     the_string      
-----------+---------------------
         5 | this is the content
(1 row) 
```

请注意，当服务器看到文件系统时，服务器“看到”该文件。从这个角度来看，“当前目录”可能是 $PG_DATA，但您不应假设任何内容，并指定完整的路径名，**该路径名应该可由服务器访问和读取**。这就是为什么我使用'/tmp'，这是不安全的（但一个很好的集合点;-)

# tomcat - apache tomcat permgem

> ID：10968046
> 
> 赞同：0
> 
> 时间：2012-06-10T10:45:26.700
> 
> 标签：tomcat, grails

我修改了 catalina.bat rem JAVA_OPTS "-XX:MaxPermSize=5024M"。但我仍然得到烫发宝石。我正在使用 grails，但作为战争文件部署到 tomcat。我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T14:57:24.807

在 Windows 批处理文件中，`rem`行首表示注释。您需要删除该行才能对批处理文件产生任何影响。尝试使用 jconsole 确认正在应用您的设置。如果在将 perm gen 设置为 5Gb（这也[假设您正在运行 64 位 jvm ）后内存不足，您应该](https://stackoverflow.com/questions/1434779/maximum-java-heap-size-of-a-32-bit-jvm-on-a-64-bit-os)[从这里开始查看](https://stackoverflow.com/questions/88235/how-to-deal-with-java-lang-outofmemoryerror-permgen-space-error)许多其他问题之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T15:41:32.147

应该使用 SET 而不是 rem。REM 可以忽略。它们只是评论。

# c# - 如何像 Windows 应用程序中的人一样以编程方式在网页上冲浪？

> ID：10968048
> 
> 赞同：1
> 
> 时间：2012-06-10T10:45:35.373
> 
> 标签：c#, screen-scraping, web-crawler

我需要使用 C# 窗口应用程序（上面带有浏览器工具）在网页上冲浪，并为我的数据挖掘项目收集信息。我需要一个工具来帮助我调用诸如单击之类的事件并使用 jQuery 或 css 选择器（如语法）来引用对象以读取它们并保存在数据库中。

我尝试使用 watin，但这只是为了测试我自己的 Web 应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T11:06:39.477

我们有时使用[Selenium](http://seleniumhq.org/)进行网页抓取。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T11:07:55.230

您可能想尝试 Selenium ......

我们将其用于自动化回归测试

[http://seleniumhq.org/](http://seleniumhq.org/)

# c++ - 编译phash程序时的问题

> ID：10968049
> 
> 赞同：1
> 
> 时间：2012-06-10T10:45:36.270
> 
> 标签：c++, compilation, undefined-reference, phash

这是一些（可能）非常简单的问题：我正在尝试将感知散列库 pHash 与 Ubuntu 11.10 一起使用。我已经安装了ffmpeg，顺便说一句，这就是我所做的：

```
sudo apt-get install libphash0
sudo apt-get install libphash0-dev 
```

然后尝试编译这个程序：

```
#include <iostream>

#include <pHash.h>

using namespace std;

int main()
{
    ulong64 myhash=0;

    ph_dct_imagehash("test.jpg", myhash);
    cout<<myhash<<endl;
} 
```

编译时，它只是打印出来：

```
undefined reference to `ph_dct_imagehash' 
```

有什么建议吗？我应该怎么办？提前致谢！

马泰奥·蒙蒂

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T11:02:19.557

你没有链接到图书馆。标题包含库内容的定义。实际实现在库本身中。您可以静态或动态链接到它。

如果您使用的是 make，请将您的库路径添加到 makefile 并重新编译：

```
LIBS = -L/path/to/your/lib -lyourlib 
```

如果库安装在系统中，它可能位于已知路径之一。（/usr/lib/ 或 ...）。所以尝试添加：

```
LIBS = -lyourlib 
```

**注意：** make system 解释`-lname`为`<path>/libname.so`. 并非总是如此，但几乎就是这样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T11:03:13.057

你肯定忘了链接 pHash 库，所以链接器找不到这个函数。

尝试添加`-l pHash`到您的 GCC 命令行（或更新您的 makefile）。如果它不起作用，也许您还需要使用指定库路径（*.a 文件的位置）`-L "/usr/lib/"`

# jquery-mobile - PhoneGap 下载插件

> ID：10968051
> 
> 赞同：0
> 
> 时间：2012-06-10T10:46:01.830
> 
> 标签：jquery-mobile, cordova, phonegap-plugins

这是我的 phonegap 和 jquery 应用程序的下载器插件。这个插件正在工作，但我想将那个**固定 URL**（“http://farm9.staticflickr.com/8010/7293758472_823d2eef5c_z.jpg”）更改为**当前 URL** ..（我想从当前网址下载 jpg).thanx

**下载器.java**

```
package com.phonegap.plugins.downloader;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.URL;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.util.Log;

import com.phonegap.api.Plugin;
import com.phonegap.api.PluginResult;

public class Downloader extends Plugin {

@Override
public PluginResult execute(String action, JSONArray args, String callbackId) {

    if (!action.equals("downloadFile")) 
        return new PluginResult(PluginResult.Status.INVALID_ACTION);

    try {

        String fileUrl = args.getString(0);
        JSONObject params = args.getJSONObject(1);

        String fileName = params.has("fileName") ? 
                params.getString("fileName"):
                fileUrl.substring(fileUrl.lastIndexOf("/")+1);

        String dirName = params.has("dirName") ?
                params.getString("dirName"):
                "sdcard/PhotoBunch";

        Boolean overwrite = params.has("overwrite") ? params.getBoolean("overwrite") : false;

        return this.downloadUrl(fileUrl, dirName, fileName, overwrite, callbackId);

    } catch (JSONException e) {

        e.printStackTrace();
        return new PluginResult(PluginResult.Status.JSON_EXCEPTION, e.getMessage());

    } catch (InterruptedException e) {
        e.printStackTrace();
        return new PluginResult(PluginResult.Status.ERROR, e.getMessage());
    }

}

private PluginResult downloadUrl(String fileUrl, String dirName, String fileName, Boolean overwrite, String callbackId) throws InterruptedException, JSONException {

    try {

        Log.d("PhoneGapLog", "Downloading "+fileUrl + " into " + dirName + "/" + fileName);

        File dir = new File(dirName);
        if (!dir.exists()) {
            Log.d("PhoneGapLog", "directory " + dirName + " created");
            dir.mkdirs();
        }

        File file = new File(dirName, fileName);

        if (!overwrite && file.exists()) {
            Log.d("DownloaderPlugin", "File already exist");

            JSONObject obj = new JSONObject();
            obj.put("status", 1);
            obj.put("total", 0);
            obj.put("file", fileName);
            obj.put("progress", 100);

            return new PluginResult(PluginResult.Status.OK, obj);
        }

        URL url = new URL(fileUrl);
        HttpURLConnection ucon = (HttpURLConnection) url.openConnection();
        ucon.setRequestMethod("GET");
        ucon.setDoOutput(true);
        ucon.connect();

        Log.d("PhoneGapLog", "Download start");

        InputStream is = ucon.getInputStream();
        byte[] buffer = new byte[1024];
        int readed = 0, 
            progress = 0,
            totalReaded = 0,
            fileSize = ucon.getContentLength();

        FileOutputStream fos = new FileOutputStream(file);

        while ((readed = is.read(buffer)) > 0) {

            fos.write(buffer, 0, readed);
            totalReaded += readed;

            int newProgress = (int) (totalReaded*100/fileSize);             
            if (newProgress != progress)
             progress = informProgress(fileSize, newProgress, fileName, callbackId);

        }

        fos.close();

        Log.d("PhoneGapLog", "Download finished");

        JSONObject obj = new JSONObject();
        obj.put("status", 1);
        obj.put("total", fileSize);
        obj.put("file", fileName);
        obj.put("progress", progress);

        return new PluginResult(PluginResult.Status.OK, obj);

    }
    catch (FileNotFoundException e) {
        Log.d("PhoneGapLog", "File Not Found: " + e);
        return new PluginResult(PluginResult.Status.ERROR, 404);
    }
    catch (IOException e) {
        Log.d("PhoneGapLog", "Error: " + e);
        return new PluginResult(PluginResult.Status.ERROR, e.getMessage());
    }

}

private int informProgress(int fileSize, int progress, String fileName, String callbackId) throws InterruptedException, JSONException {

    JSONObject obj = new JSONObject();
    obj.put("status", 0);
    obj.put("total", fileSize);
    obj.put("file", fileName);
    obj.put("progress", progress);

    PluginResult res = new PluginResult(PluginResult.Status.OK, obj);
    res.setKeepCallback(true);
    success(res, callbackId);

    //Give a chance for the progress to be sent to javascript
    Thread.sleep(100);

    return progress; 
} } 
```

**下载器.js**

```
function Downloader() {}

Downloader.prototype.downloadFile = function(fileUrl, params, win, fail) {

//Make params hash optional.
if (!fail) win = params;
PhoneGap.exec(win, fail, "Downloader", "downloadFile", [fileUrl, params]);
};

PhoneGap.addConstructor(function() {
PhoneGap.addPlugin("downloader", new Downloader());
PluginManager.addService("Downloader",        "com.phonegap.plugins.downloader.Downloader");
}); 
```

***onClick="下载()"***

```
function download() {   
window.plugins.downloader.downloadFile("http://farm9.staticflickr.com/8010/7293758472_823d2eef5c_z.jpg", {overwrite: true}, 

      function(res) {
        alert(JSON.stringify(result));
    }, function(error) {
        alert(error);
    }
); } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T05:40:03.773

currentURL ：它是您从服务器下载的文件的文件名/完整路径

例子 ：

```
onclick="download(myfile.zip)"

function download(fileName) {   
window.plugins.downloader.downloadFile(currentUrl, {overwrite: true}, 

function(res) {
alert(JSON.stringify(result));}, 
function(error) {
alert(error);
}
); } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T22:42:55.557

你想做这样的事情：

```
onclick="download(this.src)"

function download(currentUrl) {   
window.plugins.downloader.downloadFile(currentUrl, {overwrite: true}, 

  function(res) {
    alert(JSON.stringify(result));
}, function(error) {
    alert(error);
}
); } 
```

# scala - 使用 Scalaz 在 Scala 中进行验证的异步计算

> ID：10968057
> 
> 赞同：7
> 
> 时间：2012-06-10T10:47:27.457
> 
> 标签：scala, playframework-2.0, scalaz

在编写一个完全异步的库来访问远程服务（使用 Play2.0）时，我正在使用`Promise`并`Validation`创建非阻塞调用，该调用具有一次显示失败和有效结果的类型。

`Promise`来自 Play2-scala，其中`Validation`来自 scalaz。

所以这里是此类函数的示例类型

*   F ：：`A => Promise[Validation[E, B]]`
*   G ：：`B => Promise[Validation[E, C]]`

到目前为止，很好，现在如果我想编写它们，我可以简单地使用`Promise`呈现 a的事实`flatMap`，所以我可以用一个理解来完成

```
for (
   x <- f(a);
   y <- g(b)
) yield y 
```

好的，我在这里解决了我的问题，因为我没有`Validation`在理解范围内重用结果。所以如果我想重用`x`in `g`，我可以这样做

```
for (
   x <- f(a); // x is a Validation
   y <- x.fold(
      fail => Promise.pure(x),
      ok => g(ok)
   )
) yield y 
```

很公平，但是这种样板会一遍又一遍地污染我的代码。这里的问题是我有一种像`M[N[_]]`.

在这个阶段，f°编程中是否有任何结构可以通过轻松跳过secong级别来使用这种结构：

```
for (
   x <- f(a); //x is a B
   y <- g(b) 
) yield y 
```

现在，下面是我如何实现类似的东西。

我创建了一种 Monadic 结构，将两个层次合二为一，让我们说用两种方法`ValidationPromised`对类型进行拉皮条：`Promise`

```
def /~> [EE >: E, B](f: Validation[E, A] => ValidationPromised[EE, B]): ValidationPromised[EE, B] = 
    promised flatMap { valid => 
        f(valid).promised
    }

def /~~>[EE >: E, B](f: A => ValidationPromised[EE, B]): ValidationPromised[EE, B] = 
    promised flatMap { valid => 
        valid.fold (
            bad => Promise.pure(KO(bad)),
            good => f(good).promised
        )
    } 
```

这让我可以做这样的事情

```
 endPoint.service /~~>                                   //get the service
      (svc =>                                                 //the service
        svc.start /~~> (st =>                                 //get the starting elt
          svc.create(None) /~~>                               //svc creates a new elt
          (newE =>                                            //the created one
            newEntry.link(st, newE) /~~>                      //link start and the new
            (lnk => Promise.pure(OK((st, lnk, newE))))        //returns a triple => hackish 
          ) 
        )
      ) 
```

正如我们所看到`/~~>`的，它非常类似于`flatMap`但跳过了一个级别。问题在于冗长（这就是为什么 Scala 中存在“for-comprehension”而 Haskell 中存在“do”的原因）。

另一点，我也有`/~>`，`map`但在第二级（而不是 Valid 类型 -*第三*级）

所以我的第二个问题是前一个问题的推论......我是否正在通过这种结构来实现可持续的解决方案？

*抱歉这么久*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T16:09:21.343

您在这里寻找的概念是[monad 转换](http://en.wikibooks.org/wiki/Haskell/Monad_transformers)器。简而言之，monad 转换器通过允许您“堆叠”它们来补偿[不组成的 monad。](http://blog.tmorris.net/monads-do-not-compose/)

您没有提到您正在使用的 Scalaz 版本，但是如果您查看[scalaz-seven 分支](https://github.com/scalaz/scalaz/tree/scalaz-seven)，您会发现[ValidationT](https://github.com/scalaz/scalaz/blob/scalaz-seven/core/src/main/scala/scalaz/ValidationT.scala)。这可用于将 any 包装`F[Validation[E, A]]`到 a`ValidationT[F, E, A]`中，在您的情况下`F = Promise`。如果您更改`f`并`g`返回`ValidationT`，那么您可以将您的代码保留为

```
for {
  x ← f(a)
  y ← g(b)
} yield y 
```

这会给你`ValidationT[Promise, E, B]`一个结果。

# objective-c - 免费与封装

> ID：10968059
> 
> 赞同：0
> 
> 时间：2012-06-10T10:47:40.847
> 
> 标签：objective-c, memory-management, malloc, free

在编程中，Kernighan & Ritchie 引入了一条一般规则，即您已为“malloc”分配的所有空间调用“空闲”。

所以下面的代码是正确的：

```
- (UIImage*) convertImage:(UIImage*)sourceImage {
   unsigned char *rawData = malloc(requiredSpace);
   ...
   ...
   free(rawData);
   return imageRef;
} 
```

但是，您也可以在函数中进行封装。所以从函数返回后，内存会自动释放。所以理论上免费在上面的例子中并不是绝对需要的。它是否正确？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T10:52:27.477

绝对没有。

这`free`是必要的，因为内存只会为静态分配的变量释放。如果您使用`malloc`（以及`calloc`或`realloc`），您将动态分配不会被释放的内存，除非您显式调用`free`.

例如：

```
-(void)method {

    char a[10];
    char *b = (char*) malloc(10*sizeof(char));

} 
```

`a`将在作用域结束时被销毁（至少，将被标记为空闲内存，这样你就不能再依赖它的内容了），同时`b`保留在内存中直到程序结束。如果您丢失了指向该内存地址的指针（可能分配另一个值`b`或简单地结束函数而不返回`b`），您将无法再释放内存，这将导致内存泄漏。

# jquery - 查询移动网络应用

> ID：10968063
> 
> 赞同：0
> 
> 时间：2012-06-10T10:48:20.000
> 
> 标签：jquery, web-applications, web

我使用 jquery mobile 为移动设备编写了一个非常简单的网站。我的问题是，我如何将它变成一个网络应用程序，以便当用户将其保存到主屏幕时它作为应用程序打开而不是通过 safari 打开？

谢谢乌里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T11:02:44.683

您将需要使用类似 Cordova（以前称为 PhoneGap）[http://incubator.apache.org/cordova/](http://incubator.apache.org/cordova/)

# typo3 - 排版更改菜单参数

> ID：10968068
> 
> 赞同：0
> 
> 时间：2012-06-10T10:48:37.027
> 
> 标签：typo3, typoscript

我想生成一个由参数“菜单”更改的菜单。所有菜单项都具有相同的 pid，因此设置了参数**overrideId**。

所以问题是，活动状态没有改变，因为我没有改变页面。[您可以通过innovisions.artec-berlin.de](http://innovisions.artec-berlin.de)查看当前脚本的运行情况。这是左侧的菜单。出于某种原因，打字稿在 4.5.2 LTS 中运行良好，但在 4.6.3 中却不行。有什么建议或想法吗？

```
lib.menu_main {
  # Level 1
  1 = TMENU
  1.noBlur = 1
  1.overrideId = 95
  1.expAll = 1
  1.wrap = <ul id="outer">|</ul>
  1.NO = 1
  1.NO.additionalParams.stdWrap.override.insertData = 1
  1.NO.additionalParams.stdWrap.override = &menu={field:uid}
  1.NO.ATagBeforeWrap = 1
  1.NO.insertData = 1
  1.NO.linkWrap = <img src="fileadmin/templates/images/arrow_menu.gif" alt="Arrow" title="Arrow" />
  1.NO.wrapItemAndSub.insertData = 1
  1.NO.wrapItemAndSub = <li id="x1 menu_{field:uid}" class="first>|</li> |*| <li id="xx1 menu_{field:uid}">|</li> |*| <li id="xxx1 menu_{field:uid}" class="last">|</li>
  1.NO.ATagTitle.field = subtitle // title

  1.ACT = 1
  1.ACT.additionalParams.stdWrap.override.insertData = 1
  1.ACT.additionalParams.stdWrap.override = &menu={field:uid}
  1.ACT.ATagBeforeWrap = 1
  1.ACT.linkWrap = <img src="fileadmin/templates/images/arrow_menu.gif" alt="Arrow" title="Arrow" />
  1.ACT.wrapItemAndSub.insertData = 1
  1.ACT.wrapItemAndSub = <li id="x2 menu_{field:uid}" class="first_active">|</li> |*| <li id="xx2 menu_{field:uid}" class="active">|</li> |*| <li id="xxx2 menu_{field:uid}" class="last">|</li>
  1.ACT.ATagTitle.field = subtitle // title

  1.CUR = 1
  1.CUR.additionalParams.stdWrap.override.insertData = 1
  1.CUR.additionalParams.stdWrap.override = &menu={field:uid}
  1.CUR.ATagBeforeWrap = 1
  1.CUR.linkWrap = <img src="fileadmin/templates/images/arrow_menu.gif" alt="Arrow" title="Arrow" />  
  1.CUR.wrapItemAndSub.insertData = 1
  1.CUR.wrapItemAndSub = <li id="x3 menu_{field:uid}" class="first_active">|</li> |*| <li id="xx3 menu_{field:uid}" class="active">|</li> |*| <li id="xxx3 menu_{field:uid}" class="last_active">|</li>
  1.CUR.ATagTitle.field = subtitle // title

  # Level 2
  2 = TMENU
  2.noBlur = 1
  2.overrideId = 95
  2.expAll = 1
  2.wrap = <ul id="inner">|</ul>

  2.NO = 1
  2.NO.additionalParams.stdWrap.override.insertData = 1
  2.NO.additionalParams.stdWrap.override = &menu={field:uid}
  2.NO.wrapItemAndSub.insertData = 1
  2.NO.wrapItemAndSub = <li id="1 menu_{field:uid}" class="first">|</li> |*| <li id="11 menu_{field:uid}">|</li> |*| <li  id="111 menu_{field:uid}" class="last">|</li>  
  2.NO.ATagTitle.field = subtitle // title

  2.ACT = 1
  2.ACT.additionalParams.stdWrap.override.insertData = 1
  2.ACT.additionalParams.stdWrap.override = &menu={field:uid}
  2.ACT.wrapItemAndSub.insertData = 1
  2.ACT.wrapItemAndSub = <li id="2 menu_{register:count_HMENU_MENUOBJ}" class="first">|</li> |*| <li id="22 menu_{field:uid}" class="active">|</li> |*| <li  id="222 menu_{field:uid}" class="last">|</li>
  2.ACT.ATagTitle.field = subtitle // title

  2.CUR = 1
  2.CUR.additionalParams.stdWrap.override.insertData = 1
  2.CUR.additionalParams.stdWrap.override = &menu={field:uid}
  2.CUR.wrapItemAndSub.insertData = 1
  2.CUR.wrapItemAndSub = <li id="3 menu_{field:uid}" class="first">|</li> |*| <li id="33 menu_{field:uid}" class="active">|</li> |*| <li  id="333 menu_{field:uid}" class="last">|</li>
  2.CUR.ATagTitle.field = subtitle // title
} 
```

# sql - 任何类别或子类别中的顶级品牌列表

> ID：10968073
> 
> 赞同：2
> 
> 时间：2012-06-10T10:49:14.320
> 
> 标签：sql, sql-server-2008, tsql

我正在使用 SQL Server 2008，我迫切需要 sql 查询或存储过程来显示任何类别或子类别中的顶级品牌。例如，如果我通过 IdCategory=2，结果集应该通过对 idCategory=2 及其子类别和子子类别执行产品计数来显示电子产品中的顶级品牌。如果我通过 IdCategory=38，结果应该显示手机和移动设备以及手机中的顶级品牌。我希望我能够清除我的要求。

这是我数据库中的表。

**类别**

```
IdCategory    CategoryName              ParentCategoryId
---------------------------------------------------------
1             Appliances                Null
2             Electronics               Null
38            Phones & Mobile Devices   2
39            Cameras & Photography     2
115           Mobile Phones             38
121           Digital Cameras           39 
```

**品牌**

```
IdBrand       BrandName 
------------------------
1             Nokia
2             Samsung
3             Canon 
```

下表打破了类别和品牌表之间的多对多关系

**分类品牌**

```
IdCategoriesBrand    IdCategory   IdBrand
-----------------------------------------
1                    2            1
2                    38           1
3                    115          1
4                    2            2
5                    38           2
6                    115          2 
```

**产品**

```
IdProduct     Product Name       IdCategory    IdBrand
---------------------------------------------------------
1             AAAA               115           1
2             BBBB               115           2
3             CCCC               121           3
4             DDDD               115           1
5             EEEE               121           3 
```

关于产品表的假设

*   产品只能添加到第三级子类别中（例如手机、数码相机）

这是创建表的脚本

```
CREATE TABLE [dbo].[Categories](
    [IdCategory] [bigint]  NOT NULL,
    [CategoryName] [nvarchar](50) NULL,  
    [ParentCategoryId] [bigint] NULL
    CONSTRAINT [PK_Categories_IdCategory] PRIMARY KEY CLUSTERED (   [IdCategory] ASC )
) ON [PRIMARY]

GO

CREATE TABLE [dbo].[Brands](
    [IdBrand] [bigint]  NOT NULL,
    [BrandName] [nvarchar](50) NULL
    CONSTRAINT [PK_Brands_IdBrand] PRIMARY KEY CLUSTERED (  [IdBrand] ASC )
) ON [PRIMARY]

GO

CREATE TABLE [dbo].[CategoriesBrands](
    [IdCategoriesBrand] [bigint]  NOT NULL,
    [IdCategory] [bigint] NULL,
    [IdBrand] [bigint] NULL,
    CONSTRAINT [PK_CategoriesBrands] PRIMARY KEY CLUSTERED (    [IdCategoriesBrand] ASC )
) ON [PRIMARY]

GO

ALTER TABLE [dbo].[CategoriesBrands]  WITH CHECK ADD  CONSTRAINT [FK_CategoriesBrands_Brands] FOREIGN KEY([IdBrand])
REFERENCES [dbo].[Brands] ([IdBrand])
GO

ALTER TABLE [dbo].[CategoriesBrands] CHECK CONSTRAINT [FK_CategoriesBrands_Brands]
GO

ALTER TABLE [dbo].[CategoriesBrands]  WITH CHECK ADD  CONSTRAINT [FK_CategoriesBrands_Categories] FOREIGN KEY([IdCategory])
REFERENCES [dbo].[Categories] ([IdCategory])
GO

ALTER TABLE [dbo].[CategoriesBrands] CHECK CONSTRAINT [FK_CategoriesBrands_Categories]
GO

CREATE TABLE [dbo].[Products](
    [IdProduct] [bigint]  NOT NULL,
    [ProductName] [nvarchar](200) NULL,
    [IdCategory] [bigint] NULL,
    [IdBrand] [bigint] NULL 
    CONSTRAINT [PK_Products_IdProduct] PRIMARY KEY CLUSTERED (  [IdProduct] ASC )
) ON [PRIMARY]

GO

ALTER TABLE [dbo].[Products]  WITH CHECK ADD  CONSTRAINT [FK_Products_Brands] FOREIGN KEY([IdBrand])
REFERENCES [dbo].[Brands] ([IdBrand])
GO

ALTER TABLE [dbo].[Products] CHECK CONSTRAINT [FK_Products_Brands]
GO

ALTER TABLE [dbo].[Products]  WITH CHECK ADD  CONSTRAINT [FK_Products_Categories] FOREIGN KEY([IdCategory])
REFERENCES [dbo].[Categories] ([IdCategory])
GO

ALTER TABLE [dbo].[Products] CHECK CONSTRAINT [FK_Products_Categories]
GO 
```

以下是在表中插入一些示例数据的脚本

```
INSERT INTO Categories (IdCategory, CategoryName, ParentCategoryId) VALUES(1, 'Appliances', NULL)
INSERT INTO Categories (IdCategory, CategoryName, ParentCategoryId) VALUES(2, 'Electronics', NULL)
INSERT INTO Categories (IdCategory, CategoryName, ParentCategoryId) VALUES(38, 'Phones & Mobile Devices', 2)
INSERT INTO Categories (IdCategory, CategoryName, ParentCategoryId) VALUES(39, 'Cameras & Photography', 2)
INSERT INTO Categories (IdCategory, CategoryName, ParentCategoryId) VALUES(115, 'Mobile Phones', 38)
INSERT INTO Categories (IdCategory, CategoryName, ParentCategoryId) VALUES(121, 'Digital Cameras', 39)

INSERT INTO Brands (IdBrand, BrandName) VALUES(1, 'Nokia')
INSERT INTO Brands (IdBrand, BrandName) VALUES(2, 'Samsung')
INSERT INTO Brands (IdBrand, BrandName) VALUES(3, 'Canon')

INSERT INTO CategoriesBrands (IdCategoriesBrand, IdCategory, IdBrand) VALUES(1, 2, 1)
INSERT INTO CategoriesBrands (IdCategoriesBrand, IdCategory, IdBrand) VALUES(2, 38, 1)
INSERT INTO CategoriesBrands (IdCategoriesBrand, IdCategory, IdBrand) VALUES(3, 115, 1)
INSERT INTO CategoriesBrands (IdCategoriesBrand, IdCategory, IdBrand) VALUES(4, 2, 2)
INSERT INTO CategoriesBrands (IdCategoriesBrand, IdCategory, IdBrand) VALUES(5, 38, 2)
INSERT INTO CategoriesBrands (IdCategoriesBrand, IdCategory, IdBrand) VALUES(6, 115, 2)

INSERT INTO Products (IdProduct, ProductName, IdCategory, IdBrand) VALUES(1, 'AAAA', 115, 1)
INSERT INTO Products (IdProduct, ProductName, IdCategory, IdBrand) VALUES(2, 'BBBB', 115, 2)
INSERT INTO Products (IdProduct, ProductName, IdCategory, IdBrand) VALUES(3, 'CCCC', 121, 3)
INSERT INTO Products (IdProduct, ProductName, IdCategory, IdBrand) VALUES(4, 'DDDD', 115, 1)
INSERT INTO Products (IdProduct, ProductName, IdCategory, IdBrand) VALUES(5, 'EEEE', 121, 3) 
```

到目前为止，我已经尝试过这个，它给了我前 5 个没有类别的品牌

```
SELECT TOP 5
    b1.IdBrand, 
    ISNULL(b1.BrandName, '') AS BrandName, 
    count(p.IdProduct) AS 'ProductsCount'
FROM Brands b1
LEFT OUTER JOIN Products p
ON b1.IdBrand = p.IdBrand 
GROUP BY b1.IdBrand, b1.BrandName 
ORDER BY ProductsCount DESC 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T13:30:38.057

这是我解决这个问题的尝试：

*   首先获取所有类别，从根目录开始（使用递归 CTE）
*   按 categoryId 计算品牌排名
*   对于每个类别，显示前 5 个品牌

我还制作了一个 SQLFiddle，您可以在其中使用查询：[http ://sqlfiddle.com/#!3/8593b/12](http://sqlfiddle.com/#!3/8593b/12)

这是代码：

```
declare @IdCategory bigint

set @IdCategory = 2

declare @selectedCategories
  table (IdCategory bigint primary key)

-- Use a recursive CTE to determine all
-- Categories that derive from current
-- Category
;with SelectedCategories as (
  select @IdCategory as IdCategory
  union all
  select c.IdCategory 
    from Categories c
    join SelectedCategories sc
      on sc.IdCategory = c.ParentCategoryId
)
-- Save Selected Categories
-- in a memory table
insert @selectedCategories (IdCategory)
select IdCategory from SelectedCategories

-- use another CTE to select the 
-- Brands in the Selected Categories
-- and compute their Category rank
-- using the RANK()
;with BrandsPerCategory as (
  select 
    c.IdCategory,
    cc.CategoryName,
    b.BrandName,
    rank() over (
      partition by c.IdCategory
      order by count(p.IdProduct) desc
    ) as BrandRank
  from @selectedCategories c
  join Categories cc
    on c.IdCategory = cc.IdCategory
  join CategoriesBrands cb
    on cb.IdCategory = c.IdCategory
  join Brands b
    on cb.IdBrand = b.IdBrand
  join Products p
    on p.IdBrand = b.IdBrand
  group by 
    c.IdCategory,
    cc.CategoryName,
    b.BrandName
)
select * 
from BrandsPerCategory
where BrandRank < 5
order by IdCategory, BrandRank 
```

**编辑：**

如果您想要所有选定类别（根+子类别）的顶级品牌，而不是上面示例中的每个类别，那么您可以使用以下查询（以及[这个](http://sqlfiddle.com/#!3/8593b/14)SqlFiddle）：

```
declare @IdCategory bigint

set @IdCategory = 2

-- Use a recursive CTE to determine all
-- Categories that derive from current
-- Category
;with SelectedCategories as (
  select @IdCategory as IdCategory
  union all
  select c.IdCategory 
    from Categories c
    join SelectedCategories sc
      on sc.IdCategory = c.ParentCategoryId
)
select top 5
  b.IdBrand, 
  b.BrandName,
  count(p.IdProduct) AS 'ProductsCount'
from SelectedCategories c
join Categories cc
  on c.IdCategory = cc.IdCategory
join CategoriesBrands cb
  on cb.IdCategory = c.IdCategory
join Brands b
  on cb.IdBrand = b.IdBrand
join Products p
  on p.IdBrand = b.IdBrand
GROUP BY b.IdBrand, b.BrandName 
ORDER BY ProductsCount DESC 
```

**编辑2：（** *不将产品数量与相应类别品牌记录的数量相乘的解决方案）*：

SQLFiddle：[http ://sqlfiddle.com/#!3/26d60/8](http://sqlfiddle.com/#!3/26d60/8)

代码：

```
;with SelectedCategories as (
  select @IdCategory as IdCategory
  union all
  select c.IdCategory 
    from Categories c
    join SelectedCategories sc
      on sc.IdCategory = c.ParentCategoryId
)
select top 5
  b.IdBrand, 
  b.BrandName,
  count(p.IdProduct) AS 'ProductsCount'
from Brands b
join Products p
  on p.IdBrand = b.IdBrand
where b.IdBrand in (
  select cb.IdBrand
  from SelectedCategories c
  join CategoriesBrands cb
    on cb.IdCategory = c.IdCategory
 )
GROUP BY b.IdBrand, b.BrandName 
ORDER BY ProductsCount DESC 
```

# c++ - 调用 WriteConsole 时包含 stdio 会导致错误

> ID：10968074
> 
> 赞同：3
> 
> 时间：2012-06-10T10:49:33.937
> 
> 标签：c++, winapi, console, mingw

```
#include <stdio.h>
#include <windows.h>

using namespace std;

int main() {
  char s[] = "Hello\n";
  HANDLE stdout = GetStdHandle(STD_OUTPUT_HANDLE);
  unsigned long cChars;
  WriteConsole(stdout, s, lstrlen(s), &cChars, NULL);
} 
```

结果：`error: declaration of '_iob' as array of references`

但是当我注释掉时`stdio.h`，它可以编译。这里有什么问题？

编译器是 MinGW。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T10:58:10.073

根据平台，stdout 可能是一个宏，所以最好不要使用该名称。代替

```
HANDLE stdout = ... 
```

和

```
HANDLE out = ... 
```

进而

```
WriteConsole(out, ... 
```

stdout 在 stdio.h 中定义，这就是为什么它仅在包含此文件时才会失败。但为了安全起见，切勿将该名称用于任何自定义变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T11:25:13.700

标准输出已由系统定义..尝试将其更改为 _stdout 或其他

# php - GET 方法导致错误

> ID：10968075
> 
> 赞同：1
> 
> 时间：2012-06-10T10:50:12.203
> 
> 标签：php, get, ashx

对不起标题，但我不确定如何称呼它。

我已注册到 ssm 服务，该服务可以使用 php 脚本发送自动短信。该脚本基本上使用所有 sms 参数（发件人名称，..）构建一个 xml 字符串。

然后它使用它来发送它：

```
$sms_host = "api.inforu.co.il"; // Application server's URL;  
    $sms_port = 80; // Application server's PORT; 

    ////.... generating query 
    $sms_path = "/SendMessageXml.ashx"; // Application server's PATH; 
    $fp = fsockopen($sms_host, $sms_port, $errno, $errstr, 30); // Opens a socket to the Application server
    if (!$fp){ // Verifies that the socket has been opened and sending the message; 
        echo "$errstr ($errno)<br />\n"; 
        echo "no error";
    } else  {
        $out = "GET $sms_path?$query HTTP/1.1\r\n";
        $out .= "Host: $sms_host\r\n";
        $out .= "Connection: Close\r\n\r\n";

        fwrite($fp, $out);
        while (!feof($fp)){ 
            echo fgets($fp, 128); 
        } 
        fclose($fp); 
```

如果我粘贴这个查询很好

```
$url = "http://api.inforu.co.il/SendMessageXml.ashx?" . $query; 
```

直接在浏览器中，然后发送短信。

所以问题是我遇到了一个错误

“/”应用程序中的服务器错误。

```
The resource cannot be found.

Description: HTTP 404\. The resource you are looking for (or one of its dependencies) could have been removed, had its name changed, or is temporarily unavailable.  Please review the following URL and make sure that it is spelled correctly. 

Requested URL: /SendMessageXml.ashx 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T14:07:14.600

你必须[urlencode()](http://php.net/urlencode)你的`$query`，如果你把它粘贴到浏览器，浏览器会为你编码，但是当你处理一个套接字时，你必须自己做。

# python - 用于制作包含染色体信息的基本文件的 Python 脚本

> ID：10968077
> 
> 赞同：1
> 
> 时间：2012-06-10T10:50:33.957
> 
> 标签：python, loops, python-2.6, genetics

我正在尝试制作一些用于遗传分析的 .bed 文件。我是python初学者。我要制作的文件应该是 3 列，制表符分隔，第一列始终相同（染色体编号），第二列和第三列窗口大小为 200，从零开始，到染色体末端结束。例如：

```
chr20 0 200
chr20 200 400
chr20 400 600
chr20 600 800
... 
```

我有染色体的大小，所以目前我想说'而第 2 列 <（铬的大小）打印线。我有一个脚本的骨架，但由于我缺乏经验，它不能很好地工作。这是我到目前为止所拥有的：

```
output = open('/homw/genotyping/wholegenome/Chr20.bed', 'rw') 

column2 = 0
column1 = 0
while column2 < 55268282:
    for line in output:
        column1 = column1 + 0
        column2 = column2 + 100

        print output >> "chr20" + '\t' + str(column1) + '\t' + str(column2) 
```

如果有人可以修复这个简单的脚本，使其按照我描述的方式运行，或者编写一个更好的解决方案，那将不胜感激。我考虑制作一个脚本，可以输出 20 条染色体和 chrX 的所有文件，但由于我需要指定染色体的大小，我认为我必须分别处理每个文件。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T10:57:50.213

这个怎么样：

```
step = 200 # change values by this amount
with open('Chr20.bed', 'w') as outfp:
   for val in range(0, 1000, step):  #increment by step, max value 1000
      outfp.write('{0}\t{1:d}\t{2:d}\n'.format('chr20', val, val+step)) 
```

根据要求提供制表符分隔的输出

```
chr20   0   200
chr20   200 400
chr20   400 600
chr20   600 800
chr20   800 1000 
```

**注意**: using`with`将在您完成或遇到异常时自动为您关闭文件。

如果您好奇，这将提供有关[.format()函数的更多信息。](http://docs.python.org/library/string.html#format-string-syntax)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T10:56:41.533

我建议您使用该`numpy.savetxt`函数将数据保存到文本文件中：

```
windows = range(0, 55268282, 200)
numpy.savetxt('Chr20.bed', numpy.transpose((windows[:-1], windows[1:])), fmt=('chr20\t%d\t%d')) 
```

# python - 当文件中存在文本时，python fabric.contrib.files.contains 返回 False

> ID：10968079
> 
> 赞同：0
> 
> 时间：2012-06-10T10:50:38.097
> 
> 标签：python, fabric

我的代码如下所示：

```
 run("""echo "%s:x:" """ % (username))
    if not contains('/etc/passwd', '%s:x:' % (username)):
        run("useradd --shell /bin/bash --create-home %s" % (username), pty=True) 
```

在第一次运行时，它可以正常工作并创建用户，但在第二次运行时，我收到用户已经存在的错误。

```
 [root@vbox1] out: tom:x:
    [root@vbox1] run: useradd --shell /bin/bash --create-home tom
    [root@vbox1] out: useradd: user 'tom' already exists 
```

我尝试用 \ 转义：，但得到相同的结果。我有什么明显的遗漏吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T18:53:53.060

只是想完整地回答我自己的问题。这是一个版本问题，并记录在最新版本中。

从文档：

> 在 1.0 版更改: 交换文件名和文本参数的顺序以与此模块中的其他函数保持一致。

# ruby-on-rails - Pandastream heroku 错误

> ID：10968080
> 
> 赞同：0
> 
> 时间：2012-06-10T10:50:56.523
> 
> 标签：ruby-on-rails, heroku, pandastream

我已关注 Heroku 上的 pandastream 设置文档，可在此处获取[https://devcenter.heroku.com/articles/pandastream](https://devcenter.heroku.com/articles/pandastream)

但是在使用`heroku run console`和执行时`Panda::Profile.all`我得到

```
irb(main):001:0> Panda::Profile.all
NoMethodError: undefined method `connection' for nil:NilClass
    from /app/vendor/bundle/ruby/1.9.1/gems/panda-1.5.0/lib/panda/modules/cloud_connection.rb:4:in `connection'
    from /app/vendor/bundle/ruby/1.9.1/gems/panda-1.5.0/lib/panda/modules/finders.rb:19:in `find_object_by_path'
    from /app/vendor/bundle/ruby/1.9.1/gems/panda-1.5.0/lib/panda/modules/finders.rb:23:in `find_by_path'
    from /app/vendor/bundle/ruby/1.9.1/gems/panda-1.5.0/lib/panda/modules/finders.rb:44:in `all'
    from (irb):1
    from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.2/lib/rails/commands/console.rb:47:in `start'
    from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.2/lib/rails/commands/console.rb:8:in `start'
    from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.2/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

在本地测试它可以很好地达到预期的结果。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T18:56:37.130

一些健全性检查

1.  `config/initializers/panda.rb`您是否按照初始化程序指南中的说明创建了文件？

2.  运行`heroku addons:open pandastream`并验证您的 S3 存储桶和凭证。错误的凭证很可能会导致`connection error`您在堆栈跟踪中看到的那样

3.  尝试更新到最新版本的`typhoeus`&`panda`看看是否有帮助

希望能帮助到你。如果这些都没有帮助，请不要忘记回帖。

# php - 用户可以从 URL 触发 javascript: 函数吗？

> ID：10968081
> 
> 赞同：2
> 
> 时间：2012-06-10T10:50:56.500
> 
> 标签：php, javascript

我有一个调用 javascript:del_release_comment(10,12); 的函数；如果用户有该特定评论，则从页面中获取。

我想知道其他用户是否可以从 URL 栏或以其他方式触发此功能来删除不是他们的评论。

10 是 news_id，12 是 comment_news_id，即对该特定新闻的评论的 id。

删除是通过 AJAX 调用一个 PHP 脚本来完成的，该脚本确实删除了这两个参数。如果可以手动调用 javascript 函数，我将不得不重新执行删除评论的小 PHP 脚本。此外，是否可以直接在 URL 中按名称调用该特定 PHP 脚本？它使用 _POST 变量，而不是 GET。

谢谢。

删除评论的代码：

```
$query_del_comment = "DELETE from myl_news_comments WHERE comment_id='".mysql_real_escape_string($_POST['comment_news_id'])."' AND news_id='".mysql_real_escape_string($_POST['news_id'])."'";
$result_del_comment = mysql_query($query_del_comment) or die('Query failed: ' . mysql_error()); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T10:52:35.330

客户端可以使用各种技术（包括调用您的 JavaScript 函数，或手动构建它）执行他们喜欢的任何 HTTP 请求。

您必须在服务器上执行身份验证/授权，以确保删除某些内容的请求来自授权删除该内容的人。

# php - 如何生成反映 MySQL 表的 FORM？

> ID：10968083
> 
> 赞同：0
> 
> 时间：2012-06-10T10:51:36.197
> 
> 标签：php, mysql

我想基于 MySQL 表字段生成 HTML 表单。生成的输入应该反映 MySQL 列的类型，例如 VARCHAR = text、TEXT = textarea、ENUM = checkbox、SET = radio 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-13T18:00:06.963

这是一个两步的问题。

1.  首先你需要分析数据库表。您可以使用[`SHOW COLUMNS`](http://dev.mysql.com/doc/refman/5.0/en/show-columns.html).
2.  您需要根据检索到的信息生成表单。

生成表单可以像迭代从`SHOW COLUMNS`查询接收的数组并沿着迭代构建 HTML 一样简单，或者使用现有的表单生成库，例如[Zend_Form](http://framework.zend.com/manual/1.12/en/zend.form.html)或[Dora](https://github.com/gajus/dora)。

根据您的需要，存在用于反映和操作整个数据库的现有软件，例如[phpMyAdmin](http://www.phpmyadmin.net/home_page/index.php)。此外，一些框架提供了以 CRUD 操作的形式反映整个模型（即数据库表）的方法，例如[Symfony Forms](http://symfony.com/doc/current/book/forms.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T10:56:57.880

我认为这种 Lib 不可用但是您可以通过在数据库中创建一个包含有关表单的详细信息的表并检索它并动态生成 HTML 代码来做到这一点

# performance - 分布式局部聚类系数算法（MapReduce/Hadoop）

> ID：10968084
> 
> 赞同：19
> 
> 时间：2012-06-10T10:51:57.813
> 
> 标签：performance, algorithm, graph, hadoop, mapreduce

我已经实现了基于 MapReduce 范式的[局部聚类系数算法](http://en.wikipedia.org/wiki/Clustering_coefficient#Local_clustering_coefficient)。但是，对于较大的数据集或特定的数据集（节点的平均程度较高），我遇到了严重的麻烦。我试图调整我的 hadoop 平台和代码，但是结果并不令人满意（至少可以这么说）。不，我已将注意力转向实际更改/改进算法。以下是我当前的算法（伪代码）

```
foreach(Node in Graph) {
  //Job1
  /* Transform edge-based input dataset to node-based dataset */

  //Job2
  map() {
   emit(this.Node, this.Node.neighbours) //emit myself data to all my neighbours
   emit(this.Node, this.Node) //emit myself to myself
  }

  reduce() {
    NodeNeighbourhood nodeNeighbourhood;
    while(values.hasNext) {
      if(myself)
        this.nodeNeighbourhood.setCentralNode(values.next) //store myself data
      else
        this.nodeNeighbourhood.addNeighbour(values.next)  //store neighbour data
    }

    emit(null, this.nodeNeighbourhood)
  }

  //Job3
  map() {
    float lcc = calculateLocalCC(this.nodeNeighbourhood)
    emit(0, lcc) //emit all lcc to specific key, combiners are used
  }

  reduce() {
    float combinedLCC;
    int numberOfNodes;
    while(values.hasNext) {
      combinedLCC += values.next;
    }

    emit(null, combinedLCC/numberOfNodes); // store graph average local clustering coefficient
  }
} 
```

关于代码的更多细节。对于有向图，邻居数据仅限于节点 ID 和 OUT 边目标 ID（以减小数据大小），对于无向图，其也限制为节点 ID 和边目标 ID。排序和合并缓冲区增加到 1.5 Gb，合并流 80。

可以清楚的看出Job2是整个算法的实际问题。它会生成大量需要排序/复制/合并的数据。这基本上会扼杀我对某些数据集的算法性能。有人可以指导我如何改进算法（我正在考虑创建一个迭代 Job2 [“处理”在每次迭代中只有 N 个节点中的 M 个节点，直到每个节点都被“处理”]，但我现在已经放弃了这个想法） . 在我看来，应该减少 Job2 映射输出，以避免代价高昂的排序/合并过程，这会降低性能。

我还为 Giraph 平台实现了相同的算法（3 个作业，相同的“通信”模式，还有“Job2”问题）。然而 Giraph 是一个内存平台，相同“有问题的”数据集的算法会导致 OutOfMemoryException。

对于任何评论、评论、指南，我将不胜感激。

* * *

**更新**

我将“彻底”改变算法。我发现这篇文章[Counting Triangles](http://www.vertica.com/2011/09/21/counting-triangles/)。

代码实现后，我将在这里发表我的意见和更详细的代码（如果这种方法成功的话）。

* * *

**更新_2**

最后，我已经结束了“修改”NodeIterator++ 算法以满足我的需要（雅虎论文可通过文章中的链接获得）。不幸的是，尽管我可以看到性能有所提高，但最终结果并不像我希望的那样好。我得出的结论是，我可用的集群太小，无法使 LCC 计算对这些特定数据集可行。所以问题仍然存在，或者更确切地说，它正在演变。有谁知道一种有效的分布式/顺序算法来计算可用资源有限的 LCC 或三角形？（我绝不是说 NodeIterator++ 算法不好，我只是说我可用的资源是不够的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-04T21:44:54.960

在“用于大规模图形算法的 MPI 中的 MapReduce”一文中，作者很好地描述了三角形计数的 MapReduce 实现。该论文可在此处获得：[http](http://www.sciencedirect.com/science/article/pii/S0167819111000172) ://www.sciencedirect.com/science/article/pii/S0167819111000172但您可能需要一个帐户才能访问该论文。（我在一个为订阅付费的大学系统上，所以我永远不知道我只能访问什么，因为他们已经付费了。）作者可能在个人网站上发布了论文草稿。

还有另一种计算三角形的方法——除非你的图形相当密集，否则效率可能会低得多。首先，构造图的邻接矩阵 A。然后计算 A^3（您可以很容易地并行进行矩阵乘法）。然后，将 A^3 的 (i,i) 个条目相加并将答案除以 6。这将为您提供三角形的数量，因为 A^k 的 i,j 条目计算从 i 步行的长度 k 的数量到 j 并且由于我们只查看长度为 3 的步行，任何从 i 开始并在 3 步后在 i 结束的步行都是三角形......多算了 6 倍。这主要是效率较低，因为矩阵的大小如果您的图是稀疏的，那么与边缘列表的大小相比将会非常大。

# javascript - 在视图中从 textarea 加载内容

> ID：10968085
> 
> 赞同：2
> 
> 时间：2012-06-10T10:52:03.167
> 
> 标签：javascript, html, textarea, blogs

我正在建立一个类似博客的投资组合。我希望仅在查看帖子时才加载帖子的内容。为此，我尝试同时将 HTML 代码存储在 textarea 中，并在查看帖子时将其放置在 div 中。这工作正常，但由于某种原因，当放置在 div 中时，内容不会被识别为 HTML。

谁能告诉我为什么？

你可以在这里找到测试页：[http ://www.raapwerk.nl/login/portfolio](http://www.raapwerk.nl/login/portfolio)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T13:07:37.187

A`textarea`包含文本，没有 HTML，因此当您复制内容时，它将是您正在复制的纯文本。您使用 a 有什么具体原因`textarea`吗？

否则，您可以将其更改为 a`div`并且它将起作用，请参阅[此更新到您的小提琴](http://jsfiddle.net/sXLcu/1/)

* * *

**编辑**

更简单的方法，它在显示之前不加载内容：只需获取`value`textarea 的而不是`innerHtml`，请参阅[this fiddle](http://jsfiddle.net/sXLcu/5/)

# javascript - 如何禁用浏览器关闭按钮

> ID：10968087
> 
> 赞同：1
> 
> 时间：2012-06-10T10:52:27.590
> 
> 标签：javascript, jquery

有没有办法禁用浏览器关闭按钮，它会在投票后打开。喜欢使用 JavaScript 或 jquery 的 firefox？我创建了一个使用 C# 的自动打开浏览器，它会在每天上午 10 点打开我的 Intranet 网页，我希望所有观众在离开我的页面之前对我的投票进行投票..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T10:53:48.467

不会。网页绝对不可能阻止用户关闭或以其他方式离开它。

不道德的人希望能够向访问其网站的每个人显示一个不可关闭的旋转广告窗口。

# php - PHP中的服务器端级联下拉菜单

> ID：10968095
> 
> 赞同：0
> 
> 时间：2012-06-10T10:54:23.627
> 
> 标签：php, mysql, html, variables, drop-down-menu

由于我在第一个下拉列表中只有一个值，因此我试图在 PHP 中创建一个级联下拉列表，以填充页面加载时的第二个下拉列表。

我的数据库有一个名为“nights”的表，其字段名为：“city”、“name”和“day”。

为了填充我正在使用的第一个盒子`SELECT DISTINCT cities from nights`等，效果很好。

要填写第二个框，我需要一些类似的东西`SELECT name WHERE city = $city`- 我的问题是我不确定如何设置`$city`（作为`<select>`标签的名称）。我无法使用`$_POST['city']`，因为此时表格尚未发送。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T11:15:27.133

如果您希望这是动态的（即在用户更改下拉列表之后），您将必须使用 javascript 来首先查询 PHP 页面（可能使用[jQuery get](http://api.jquery.com/jQuery.get/)）然后相应地调整下拉列表。网上有很多这方面的教程。

如果您只想填充初始页面数据，您可以从查询中选择第一个城市并将选项设置为选中，然后在下一个查询中使用该城市。

就像是：

```
$first = True;
while($row = mysql_fetch_array($result))
{
    echo "<option" . (($first) ? " selected" : "") . ">" . $row['city'] . "</option>";
    if($first) 
    {
        $first = !$first;
        $city = $row['city'];
    }
}
//now do stuff with with $city 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T11:34:03.827

```
<?    
$CITIES = query_result("SELECT DISTINCT cities FROM nights;");
if (isset($_POST["city"])) {
  $NAMES = query_result("SELECT name FROM nights WHERE city = '{$_POST[city]}'");
  if (isset($_POST["day"]) 
    $DAYS = query_result("SELECT day FROM nights WHERE city='{$_POST[city]}'".
                         " AND name = '{$_POST[name]}'");
  else
    $DAYS = array();
} else
  $NAMES = array();  

/* now output the <select> markup for $CITIES, $NAMES and $DAYS */
?> 
```

注意：你必须自己定义`query_result`函数（我只是用它来简化代码）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T11:03:17.830

您可以为此使用 AJAX。

在更改事件时调用 javascript-ajax 函数，该函数调用 php 脚本，这使您成为第二个下拉菜单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T13:30:09.740

您将需要使用 ajax 从 php 脚本加载选项。这是一个如何使用 jquery 和 ajax 执行此操作的示例： [Autopopulate Select Dropdown Box Using jQuery](http://www.codingcereal.com/2009/09/autopopulate-select-dropdown-box-using-jquery/)

# ruby-on-rails - Heroku Cedar 上的 Resque 不起作用

> ID：10968098
> 
> 赞同：0
> 
> 时间：2012-06-10T10:55:00.400
> 
> 标签：ruby-on-rails, ruby, heroku, redis, resque

几天来我一直试图弄清楚问题出在哪里，但没有运气，我正在使用 Unicorn 在 Heroku Cedar 上运行 Rails 3.1.3，并使用 Resque 1.20 进行后台作业。

添加了 Redis 附加组件并设置了 REDISTOGO_URL，我将 resque.rb 初始化程序设置为

```
require 'resque'
Resque.after_fork = Proc.new { ActiveRecord::Base.establish_connection }

uri = URI.parse(ENV["REDISTOGO_URL"])
REDIS = Redis.new(:host => uri.host, :port => uri.port, :password => uri.password)
Resque.redis = REDIS 
```

我也试过

```
Resque.redis = Redis.connect(:url => ENV['REDISTOGO_URL']) 
```

还有这个，来自官方 RedisToGo 网站

```
ENV["REDISTOGO_URL"] ||= "redis://username:password@host:1234/"

uri = URI.parse(ENV["REDISTOGO_URL"])
Resque.redis = Redis.new(:host => uri.host, :port => uri.port, :password => uri.password,     :thread_safe => true) 
```

Heroku工人为：

```
bundle exec rake resque:work QUEUE='*' 
```

在本地和 Heroku 控制台中一切正常；但是当我尝试从 Rails 排队时

```
Resque.enqueue(EmailQueue, id) 
```

我明白了

```
NoMethodError (undefined method `sadd' for nil:NilClass): 
```

请任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T00:18:13.403

想通了，因为我在独角兽；我必须如下设置 config/unicorn.rb 才能连接或 Redis。

```
after_fork do |server, worker|
 # Replace with MongoDB or whatever
  if defined?(ActiveRecord::Base)
     ActiveRecord::Base.establish_connection
     Rails.logger.info('Connected to ActiveRecord')
  end

# If you are using Redis but not Resque, change this
 if defined?(Resque)
    Resque.redis = ENV['REDISTOGO_URL']
    Rails.logger.info('Connected to Redis')
 end
end 
```

希望这对其他人有帮助。

# c# - Youtube .NET 数据 API：仅检索 videoID？

> ID：10968099
> 
> 赞同：0
> 
> 时间：2012-06-10T10:55:20.700
> 
> 标签：c#, optimization, youtube, youtube-api, youtube.net-api

我正在使用 youtube 的 .NET API 来检索视频源，代码如下：

```
 String[] ids;
        YouTubeRequestSettings settings = new YouTubeRequestSettings("My App Name", "My App Key");
        YouTubeRequest request = new YouTubeRequest(settings);
        Uri uri =
        new Uri("http://gdata.youtube.com/feeds/api/users/nptelhrd/uploads?max-results=50");//Change "GoogleDevelopers" to "default"
        Google.GData.Client.Feed<Video> videoFeed = request.Get<Video>(uri);
        ids = new String[videoFeed.TotalResults];

        int count = 0;
        for (int i = 0; i < 50; i++)
            ids[i] = videoFeed.Entries.ElementAt(i).VideoId;
        for (int i = 50; i < ids.Length-50; i+=50)
        {

            Uri uri2 =
   new Uri("http://gdata.youtube.com/feeds/api/users/nptelhrd/uploads?max-results=50&start-index=" + i.ToString());//Change "GoogleDevelopers" to "default"
            Google.GData.Client.Feed<Video> videoFeed2 = request.Get<Video>(uri);
            for (int j = 0; j < 50; j++)
            {
                ids[i+j] = videoFeed2.Entries.ElementAt(j).VideoId;
                count++;
            }
        } 
```

上面的代码返回用户“nptelhrd”上传的每个视频的所有信息（标题、描述、观看次数、评分……等）。此特定用户上传了 6950 个视频。

上面的代码在 512Kbps 连接上执行需要 15 分钟，因为它检索每个视频的所有信息，速度非常慢，浪费了大量服务器资源。不能修改上面的代码，让它只检索videoId吗？如何仅检索所有视频的 videoId？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T05:59:11.070

由于 .NET YOUTUBE API 目前的限制，不可能只检索 VIDEOID。

# java - ASM 和 Javassist 之间的*生成代码*的速度是否存在差异？

> ID：10968100
> 
> 赞同：4
> 
> 时间：2012-06-10T10:55:23.967
> 
> 标签：java, javassist

我正在考虑为 Java 项目生成/修改运行时字节码。

两个重要且仍在维护的 API 是 ASM 和 Javassist。

ASM 生成代码的速度最快，而且可能是最强大的。但它的用户友好性也远不如 Javassist。

就我而言，我想预先执行字节码操作，以便在应用程序设置阶段结束时完成。所以操作/生成的速度并不重要。关键是生成代码的速度，因为它将成为*实时*桌面游戏的一部分，而不是典型的网络应用程序，网络延迟完全隐藏了反射成本。

所以我的问题是，Javassist 是否在字节码中引入了一些不必要的开销，而在使用 ASM 时不会出现这些开销？或者，换一种说法，与使用 Javassist 相比，在 ASM 级别工作是否会为我提供*生成代码的速度提升？*

[编辑] 我对这两种工具的最新版本很感兴趣，最感兴趣的是看看是否有人在同一个问题上尝试过它们，并看到生成的类的速度有任何显着差异。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T12:11:08.743

我认为不可能对此提供简单的客观答案。这将（我想）取决于相应工具的版本、您生成的代码的性质以及（最重要的是）您是否正在使用相应的工具以及它们是否可以使用。

您应该考虑的另一件事是，沿着字节码操作路线走下去是否可能会给您带来足够的性能优势，以弥补增加的软件开发和维护痛苦。（除了你自己，任何人都无法回答......）

无论如何，我的建议是，如果您已经尝试过“纯 Java”方法并发现它提供了不可接受的性能，则只走这条路。

# java - && 和 || 之间的混淆 在java中

> ID：10968104
> 
> 赞同：-2
> 
> 时间：2012-06-10T10:56:20.253
> 
> 标签：java

```
 import javax.swing.JOptionPane;

    public class Insurance {

    final static String INPUT_GENDER = "Please enter your gender: (Male or Female)";
    final static String MALE = "male";
    final static String FEMALE = "female";
    static String gender;
    public static void main(String args[])
    {
        do
        {
            gender = JOptionPane.showInputDialog(INPUT_GENDER).toLowerCase();
            System.out.println(gender);
        }
        while(!gender.equals(MALE) && !gender.equals(FEMALE));  
    }
} 
```

上面这段代码是一个修订分配的开始，但是我遇到了一些我不明白的东西。要求用户输入他们的性别，如“男性”或“女性”，只有当输入满足这些输入之一时，程序才应该继续。这是通过将输入与 MALE 和 FEMALE 的最终字符串进行比较来完成的。

我不明白为什么它只能在 while 语句中使用 && 起作用。我预计它需要||，因为如果输入匹配两个性别字符串中的任何一个，我们希望它继续。我知道 && 只有在两个参数都为真时才允许代码继续。

TL;博士

```
 while(!gender.equals(MALE) && !gender.equals(FEMALE));  //This works
    while(!gender.equals(MALE) || !gender.equals(FEMALE));  //This does not work
    while(gender.equals(MALE)  ||  gender.equals(FEMALE));  //This does not work 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-10T10:58:11.483

*   `&&`是逻辑`and`运算符

*   `||`是逻辑`or`运算符

使用[De Morgan](http://en.wikipedia.org/wiki/De_Morgan%27s_laws)，以下内容：

```
while(!gender.equals(MALE) && !gender.equals(FEMALE)) 
```

可以翻译成：

```
while(!(gender.equals(MALE) || gender.equals(FEMALE))) 
```

（注意额外的括号和`!`它们之前的位置）。

上述两者都意味着`gender`既不是`MALE`或`FEMALE`。

您的其他代码：

```
while(!gender.equals(MALE) || !gender.equals(FEMALE)) 
```

上面的意思是 - `gender`is not `MALE` *or* `gender` is not `FEMALE`。

```
while(gender.equals(MALE)  ||  gender.equals(FEMALE)); 
```

同样，上面的意思是 - `gender`is`MALE` *或* `gender`is `FEMALE`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T11:00:56.560

英文：“当不是 FEMALE 或 MALE，再做一次”然后在 Java 中`do{...}while(!(FEMALE || MALE));` ，!(A||B) 等于 !A && !B

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T11:03:48.400

`&&`是 Java 的逻辑*AND*运算符
`||`是 Java 的逻辑*OR*运算符

例如：

```
boolean a = true;
boolean b = false;
boolean c = a && b;   // c is false
boolean d = a || c;   // d is true 
```

此外，`!`是 Java 的逻辑`NOT`运算符。它用于否定布尔表达式：

```
boolean p = true;
boolean q = !p;   // q is false 
```

还值得注意的是，这`x && y`将产生与 相同的逻辑值`!(!x || !y)`。
类似地，`x || y`可以改写为`!(!x && !y)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T11:14:11.467

在您的循环中，如果输入的性别不是nor `do-while`，您希望提示用户重新输入他/她的性别。`MALE``FEMALE`

因此，while 条件是，如果**两者都** `gender.equals(MALE)`返回`gender.equals(FEMALE)`false **，那么**您将重新提示用户，即循环将迭代。

这意味着如果**not** of`gender.equals(MALE)`和**not** of`gender.equals(FEMALE)` **两者**都为真，那么您的循环应该迭代。

因此，

`while(!(gender.equals(MALE)) && !(gender.equals(FEMALE)))`

# jquery - ajax响应后弹出窗口不起作用

> ID：10968108
> 
> 赞同：1
> 
> 时间：2012-06-10T10:56:55.557
> 
> 标签：jquery

我正在使用 jquery popup ，但是从 ajax 加载后它不起作用

**popup.js**介于_

```
 $(document).ready(function() {
    $('a.poplight[href^=#]').click(function() {
     // code here
     }
    }); 
```

我必须使用委托吗？
是不是因为文件准备好而出问题了？

**注意：**
我试图删除准备好的文档并使用它

```
 $(document).delegate("a.poplight[href^=#]",'click',function(e){
// code here
} 
```

但它不起作用

有什么帮助吗？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T10:57:49.370

你可以试试这个

(jQuery >= 1.7)

```
$(document).on('click',"a.poplight[href^=#]",function(e){
// code here
}); 
```

或者

```
$('a.poplight[href^=#]').live(function() {
     // code here
}); 
```

或者

```
$('body').delegate('a.poplight[href^=#]', 'click', function() {
     // code here
}); 
```

# ruby-on-rails - 从 Engine 类访问 url_helper

> ID：10968111
> 
> 赞同：5
> 
> 时间：2012-06-10T10:57:47.860
> 
> 标签：ruby-on-rails, class, rails-engines, urlhelper

我尝试从 Module 类内部访问 URL 帮助程序。这是我的代码：

```
module Station
  class Plugins

    @@plugins = [] unless defined?(@@plugins) && @@plugins.class == Array

    class << self

      def all
        return @@plugins.sort_by { |p| p[:weight] }
      end

      def register(plugin = {})
        raise "plugin must be a Hash (ie.: `register(:foo => 'bar')`)" unless plugin.class == Hash
        raise "plugin must contain :name (ie.: `register(:name => 'my_plugin')`)" unless plugin[:name].present?
        plugin[:weight] = 1 unless plugin[:weight].present?
        plugin[:href] = eval("#{plugin[:name].downcase.pluralize}_url") unless plugin[:href].present?

        @@plugins.push(plugin) unless @@plugins.include?(plugin)
      end
    end
    # include default plugins: 
    Station::Plugins.register(:name => "Pages", :weight => -1)
  end
end 
```

当我运行我的服务器时，我得到了这个错误：

```
undefined local variable or method `pages_url' for Station::Plugins:Class 
```

我读了很多关于“如何从类中调用 url 助手”的内容，但我找到的解决方案都没有为我工作。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-10T11:13:52.200

首先，您不清楚的是，您尝试访问的 url 助手是来自添加引擎的父应用程序，还是来自该引擎包含的另一个引擎。

如果来自父应用程序，那么您只需要：

```
main_app.pages_url 
```

因此，您需要相应地编辑您的代码。请注意，“main_app”部分不是父应用程序的名称，而是字面意思的“main_app”。

如果您尝试访问包含在此引擎中的引擎的 url 帮助程序，则需要像访问父应用程序中的任何引擎一样访问它。IE：

您的 gemspec 文件应包括：

```
s.add_dependency('my_engine', path: "~/path/to/my_engine") 
```

routes.rb 应包括：

```
mount MyEngine::Engine => "/my_engine", as: "any_name_for_my_engine" 
```

然后使用以下代码在您的代码中访问它：

```
any_name_for_my_engine.pages_url 
```

希望这可以帮助。

**编辑：** 将引擎的 application.rb 文件更改为如下所示，以便您可以继承所有父应用程序的 ApplicationController 变量和路由：

```
class Station::ApplicationController < ApplicationController
end 
```

您可能想阅读[Rails Guide on Engines](http://edgeguides.rubyonrails.org/engines.html)以获得有关如何使这些协同工作的更详细说明。再次询问您是否仍有问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-10T15:17:16.367

对我有用的是将助手包含在特定的类中：

```
include ENGINE_NAME::Engine.routes.url_helpers
include Rails.application.routes.url_helpers 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-30T12:24:06.147

这对我有用，是在阅读 ActionPack 的代码时发现的。

> 包含跨不同引擎的所有已安装助手和`main_app`应用程序的助手。如果您想访问其他引擎的路线，您可以将其包含在您的课程中。

```
include ActionDispatch::Routing::RouteSet::MountedHelpers 
```

# javascript - 谷歌浏览器中的 Webgl 着色器编译错误

> ID：10968118
> 
> 赞同：0
> 
> 时间：2012-06-10T10:58:36.723
> 
> 标签：javascript, google-chrome, webgl, three.js

我正在使用本教程学习three.js：http: [//demo.bkcore.com/threejs/webgl_tron_glow_seq.html](http://demo.bkcore.com/threejs/webgl_tron_glow_seq.html)。本教程本身工作正常，但我自己的代码，基于它失败，错误如下：

```
ERROR: 0:26: 'nuniform' : syntax error  Three.js:325
precision highp float;
#define MAX_DIR_LIGHTS 0
...
uniform vec3 cameraPosition;
uniform sampler2D tDiffuse;nuniform sampler2D tGlow;nvarying vec2 vUv;nvoid main() {nvec4 texel = texture2D( tDiffuse, vUv );nvec4 glow = texture2D( tGlow, vUv );ngl_FragColor = texel + vec4(0.5, 0.75, 1.0, 1.0) * glow * 2.0;n} 

ERROR: 0:62: 'nvoid' : syntax error  Three.js:325
precision highp float;
#define VERTEX_TEXTURES
...
varying vec2 vUv;nvoid main() {nvUv = vec2( uv.x, 1.0 - uv.y );ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );n} 
```

等等

看起来浏览器（谷歌浏览器）没有正确解析带有编码在其中的着色器的字符串。来自三个.js 源（缩小版）的代码中出现错误。

一看，代码就ok了。

我只是错过了一些东西，但我不知道到底是什么。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T11:02:22.057

在我看来，那里有“\n”会导致问题。看起来 \ 已被删除，但 n 被保留了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T17:34:50.093

您发布的内容肯定看起来不对。

第 5 行有“nuniform”，这不是有效的 GLSL。

看起来您使用的任何缩小器都有错误。如果您的着色器在`<script>`标签中，您可能需要修复缩小器以仅缩小没有“类型”或有`type="javascript"`或`type="text/javascript"`因为其他任何东西都不是 JavaScript 并且不应该被缩小的脚本。

# database - NOSQL 数据库对这些过滤器有好处吗？

> ID：10968120
> 
> 赞同：0
> 
> 时间：2012-06-10T10:58:42.833
> 
> 标签：database, nosql

我需要两个“列表”，例如：

```
A
(date - price)
01-01-2012   100
02-01-2012   200
03-01-2012   300
04-01-2012   150

B
(date - price)
01-01-2012   10.5
02-01-2012   20.4
04-01-2012   25.3
05-01-2012   21.6 
```

如您所见，两个带有日期和价格的简单列表。不，我想了解是否可以将 NOsql 数据库用于这种过滤器：

我需要获取两个列表的所有价格（以及相应的日期），前提是它们存在（在两个列表中）。结果应该是：

```
date A(price) B(price)
01-01-2012 - 100 - 10.5
02-01-2012 - 200 - 20.4
04-01-2012 - 150 - 25.3 
```

我可以用 nosql 数据库来做吗？这些过滤器是好的还是不推荐用于这种类型的数据库？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T15:11:51.520

这篇文章可以满足您的需求 [http://tebros.com/2011/07/using-mongodb-mapreduce-to-join-2-collections/](http://tebros.com/2011/07/using-mongodb-mapreduce-to-join-2-collections/)。

# html - Twitter-Bootstrap 输入内联宽度（名字、中间名和姓氏）

> ID：10968127
> 
> 赞同：6
> 
> 时间：2012-06-10T11:00:25.160
> 
> 标签：html, css, forms, twitter-bootstrap

关于 Twitter-Bootstrap 输入宽度/CSS 类，我已经有一段时间摸不着头脑了。我有一个包含客户地址信息的表格。我想制作“姓名”（名字、中间名和姓氏）和内联表单/行，其中三个输入导致其余输入的宽度相等（使用`class="input-xxlarge"`）。

当我在每个输入上使用“input-*”（例如“input-small”）时，它们要么太宽，要么太窄（总共）。

```
<div class="control-group">
    <label class="control-label" for="FirstName">Name</label>
    <div class="controls">
        <input class="input-small" id="FirstName" name="FirstName" placeholder="First name" type="text" value="" />
        <input class="input-small" id="MiddleName" name="MiddleName" placeholder="Middle name" type="text" value="" />
        <input class="input-small" id="LastName" name="LastName" placeholder="Last name" type="text" value="" />
    </div>
</div> 
```

[http://jsfiddle.net/RXGKN/](http://jsfiddle.net/RXGKN/)

设置百分比宽度（内联）也不是解决方案。有没有人能够做到这一点，所以左侧和右侧都适合“完美”的其余输入（包括响应式）？

有没有办法定义一个等于“input-xxlarge”宽度的“行”，并在“控制组”>“控件”中的每个输入上使用 spanX（例如 span4）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-10T13:32:48.870

```
<div class="control-group">
  <label class="control-label" for="FirstName">Name</label>
    <div class="controls row-fluid">
        <div class="span2 row"><input class="span12" id="FirstName" name="FirstName" placeholder="Firstname" type="text" value="" /></div>
        <div class="span2 row"><input class="span12" id="MiddleName" name="MiddleName" placeholder="Middlename" type="text" value="" /></div>
        <div class="span2 row"><input class="span12" id="LastName" name="LastName" placeholder="Lastname" type="text" value="" /></div>
        <p class="help-block span12 row" style="color: red;">How do I make these 3 input's (together) equal width of the "Adresse" input.</p>
    </div>
</div>
<div class="control-group">
  <label class="control-label" for="AddressLine1">Adresse</label>
  <div class="controls row-fluid">
    <div class="span6 row"><input class="span12" id="AddressLine1" name="AddressLine1" placeholder="AddressLine1" type="text" value="" /></div>
  </div>
</div> 
```

[http://jsfiddle.net/baptme/RXGKN/2/](http://jsfiddle.net/baptme/RXGKN/2/)

# html - 数据属性可以以数字开头吗？（例如 data-1234=""）

> ID：10968129
> 
> 赞同：3
> 
> 时间：2012-06-10T11:00:43.847
> 
> 标签：html, custom-data-attribute

我知道标识符的值不能以数字或连字符开头，但数据属性可以吗？如果是这样，有什么理由不使用`data--=""`（不是我会，只是好奇地说）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T11:09:01.603

[见定义](http://www.whatwg.org/specs/web-apps/current-work/multipage/elements.html#attr-data-%2a)

> 自定义数据属性是无命名空间中的属性，其名称以字符串“data-”开头，连字符后至少有一个字符，与 XML 兼容，并且不包含 U+0041 到 U+005A 范围内的字符（拉丁文大写字母 A 到拉丁文大写字母 Z）。

原因是 XML 兼容性。当然还有 javascript 的兼容性，因为这`var 1234`是不可能的。

# ruby-on-rails - 用于 Rails::Paths::Root 的 application.rb paths.app.views 未定义方法“app”

> ID：10968131
> 
> 赞同：3
> 
> 时间：2012-06-10T11:00:58.823
> 
> 标签：ruby-on-rails, devise

使用设计 2.1.0

我不得不覆盖设计注册控制器。在此过程中，我不得不移动我的设计视图目录以与新控制器相对应。我的 config/applications.rb 文件中有这段代码

```
 paths.app.views << "app/views/devise" 
```

当我尝试使用以下命令启动服务器时，它会引发错误`rails s`：

```
 ...config/application.rb:65:in `<class:Application>': undefined method `app' for #<Rails::Paths::Root:0x00000103537740> (NoMethodError) 
```

我对rails比较陌生。但我知道某处有一个根类没有定义应用程序。我得到了这个建议，`paths.app.views`在堆栈中使用它。

这是完整的应用程序.rb

```
require File.expand_path('../boot', __FILE__)

require 'rails/all'

if defined?(Bundler)
  # If you precompile assets before deploying to production, use this line
  Bundler.require(*Rails.groups(:assets => %w(development test)))
  # If you want your assets lazily compiled in production, use this line
  # Bundler.require(:default, :assets, Rails.env)
end

module Growle
  class Application < Rails::Application
    # Settings in config/environments/* take precedence over those specified here.
    # Application configuration should go into files in config/initializers
    # -- all .rb files in that directory are automatically loaded.

    # Custom directories with classes and modules you want to be autoloadable.
    # config.autoload_paths += %W(#{config.root}/extras)

    # Only load the plugins named here, in the order given (default is alphabetical).
    # :all can be used as a placeholder for all plugins not explicitly named.
    # config.plugins = [ :exception_notification, :ssl_requirement, :all ]

    # Activate observers that should always be running.
    # config.active_record.observers = :cacher, :garbage_collector, :forum_observer

    # Set Time.zone default to the specified zone and make Active Record auto-convert to this zone.
    # Run "rake -D time" for a list of tasks for finding time zone names. Default is UTC.
    # config.time_zone = 'Central Time (US & Canada)'

    # The default locale is :en and all translations from config/locales/*.rb,yml are auto loaded.
    # config.i18n.load_path += Dir[Rails.root.join('my', 'locales', '*.{rb,yml}').to_s]
    # config.i18n.default_locale = :de

    # Configure the default encoding used in templates for Ruby 1.9.
    config.encoding = "utf-8"

    # Configure sensitive parameters which will be filtered from the log file.
    config.filter_parameters += [:password, :password_confirmation]

    #don't generate RSpec tests for views and helper
    config.generators do |g|
      g.view_specs false
      g.helper_specs false
    end

    # Use SQL instead of Active Record's schema dumper when creating the database.
    # This is necessary if your schema can't be completely dumped by the schema dumper,
    # like if you have constraints or database-specific column types
    # config.active_record.schema_format = :sql

    # Enforce whitelist mode for mass assignment.
    # This will create an empty whitelist of attributes available for mass-assignment for all models
    # in your app. As such, your models will need to explicitly whitelist or blacklist accessible
    # parameters by using an attr_accessible or attr_protected declaration.
    config.active_record.whitelist_attributes = true

    # Enable the asset pipeline
    config.assets.enabled = true

    # Version of your assets, change this if you want to expire all your assets
    config.assets.version = '1.0'

    paths.app.views << "app/views/devise"
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T14:50:02.520

通过阅读您的最后一条评论，听起来您想要[view_paths=](http://apidock.com/rails/AbstractController/ViewPaths/ClassMethods/view_paths%3D)或[prepend_view_path](http://apidock.com/rails/v3.2.1/AbstractController/ViewPaths/ClassMethods/prepend_view_path)。

这些可以在控制器的类级别设置。

If that isn't what you are looking for, consider reading [Override devise registrations controller](https://stackoverflow.com/questions/3546289/override-devise-registrations-controller) for information.

# asp.net-mvc - 获取库项目中的动作、控制器和区域名称

> ID：10968135
> 
> 赞同：0
> 
> 时间：2012-06-10T11:01:23.493
> 
> 标签：asp.net-mvc, asp.net-mvc-3, dll

我有一个 MVC3 项目和一个 Library(.dll) 项目包含我的一些代码，所以我需要在库项目中获取区域、控制器和动作名称，我在 MVC 项目中使用以下行：

```
string areaName = (string)Request.RequestContext.RouteData.DataTokens["area"] ?? "Root";
string controllerName = (string)Request.RequestContext.RouteData.Values["controller"];
string actionName = (string)Request.RequestContext.RouteData.Values["action"]; 
```

但是在库项目中，我没有任何访问`Request`对象的权限，或者当我添加`using System.Web.Mvc;`

```
public static void GetNames(){

  //string areaName = (string)Request.RequestContext.RouteData.DataTokens["area"] ?? "Root";
  //string controllerName = (string)Request.RequestContext.RouteData.Values["controller"];
  //string actionName = (string)Request.RequestContext.RouteData.Values["action"];

} 
```

那么，我怎样才能在图书馆项目中获得这个名字呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T11:03:00.197

最好的方法是将它们作为参数传递，而不是让类库获取它们，因为通过这种方式，您将类库与 Web 应用程序强耦合。

但是，如果您坚持要获得它们，您将不得不使用`HttpContext.Current`我不推荐的：

```
var context = new HttpContextWrapper(HttpContext.Current);
var rd = context.Request.RequestContext.RouteData;
string controller = rd.GetRequiredString("controller");
string action = rd.GetRequiredString("action"); 
```

# wpf - WPF 访问快捷方式位置

> ID：10968144
> 
> 赞同：0
> 
> 时间：2012-06-10T11:02:39.810
> 
> 标签：wpf, windows, shortcuts

我有一个从快捷方式运行的 WPF 应用程序。无论如何我可以从 WPF 应用程序中访问快捷方式的目录位置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T11:24:08.100

据我了解，你不能这样做。

单击快捷方式时，Windows 会读取目标可执行文件的路径并执行它，就像您直接单击 .exe 文件时一样（当然在快捷方式中指定了附加参数）。您的 WPF 应用程序不知道它是通过直接单击、命令行还是快捷方式启动的；因此无法获取快捷方式所在的文件夹。

如果您的问题是指 .exe 位置，而不是在其他答案中使用反射。

希望这有帮助:)

**编辑**：

我用来获取它的一个技巧是将快捷方式属性中的“开始于”字段设置为包含快捷方式的文件夹，然后通过

```
Directory.GetCurrentDirectory(); 
```

虽然它根本不可靠，因为许多因素往往会改变当前工作文件夹的值，您需要为您使用的每个快捷方式设置它:)

# java - 错误 java.lang.reflect.InvocationTargetException

> ID：10968145
> 
> 赞同：1
> 
> 时间：2012-06-10T11:02:40.963
> 
> 标签：java, animation, web

我刚刚开始学习Java。我已经弄清楚如何编译我的程序并运行它。我的最终目标是在 Java 上为 web 创建一些动画。

您可以在下面找到我的 HTML 代码示例。Java 示例

```
<Body>
This is my page<br>
Below you see an applet<br>

<Applet Code="HelloWorldApp.class" width=200 Height=100>
</Applet>

</Applet>
</Body>
</Html> 
```

这是我的 HelloWorldApp.java 的代码

```
class HelloWorldApp {
    public static void main(String[] args) {
        System.out.println("Hello World!"); // Display the string.
    }
} 
```

请访问我的网页以查看我所有工作的结果。- [http://web.ics.purdue.edu/~vstadnyt/java/](http://web.ics.purdue.edu/~vstadnyt/java/) 不幸的是，它不起作用。我花了很多时间寻找答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T11:05:29.550

您的 HelloWorldApp 不是小程序类。要使其成为applet 类，它需要扩展Applet 或JApplet。

试试[这个](http://docs.oracle.com/javase/tutorial/deployment/applet/subclass.html)教程。

# java - 如何拖放文件以复制到目录中？

> ID：10968146
> 
> 赞同：-1
> 
> 时间：2012-06-10T11:02:41.013
> 
> 标签：java, file, file-io, drag-and-drop, awt

我有这个标签：

```
//---- label5 ----
label5.setText("Drag and drop your texture\npack in the box *.zip files");
label5.setIcon(new ImageIcon(
    "E:\\Chituri\\MBMLauncherJava\\src\\resursele\\dasdasdasd.png")); 
```

但我想做这样的事情：

```
//---- label5 ----
label5.setText("Drag and drop your texture\npack in the box *.zip files");
label5.setIcon(new ImageIcon(
    "E:\\Chituri\\MBMLauncherJava\\src\\resursele\\dasdasdasd.png"));
// drag files in the label > 
// automatically move files in particular folder (E:\\Chituri) 
```

我怎么能做到这一点？

我试试这个...

```
label5.setTransferHandler(transfer);
label5.addMouseListener(new MouseAdapter(){
                public void mousePressed(MouseEvent e){
                    JLabel texturidrag = (JLabel)e.getSource();
                    TransferHandler handle = texturidrag.getTransferHandler();
                    handle.exportAsDrag(texturidrag, e, TransferHandler.COPY);
                }
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T11:28:42.077

尝试阅读[这篇](https://stackoverflow.com/questions/1204580/swing-application-drag-drop-to-the-desktop-folder)文章，特别是回答和实现`processFiles`过滤输入文件和只处理图像的方法，如果你发现图像只是`ImageIcon`你想要的。

# android - 如何禁用gsm连接

> ID：10968149
> 
> 赞同：0
> 
> 时间：2012-06-10T11:03:01.797
> 
> 标签：android, gsm, cellular-network, cellid

我正在为 Android 编写一个应用程序，在这个阶段，我需要一位经验丰富的程序员的帮助（我只是一个初学者）。编写了一个程序来显示当前使用的基站（CellID 和 LAC），并显示相邻基站的列表。现在来了下一个问题 - 如何禁用手机以接收来自特定基站的信号，例如，是否可以禁用给定 CellID 的 gsm 连接？这个类和方法有没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T11:09:25.600

我不是安卓程序员，但 100% 确定你不能有选择地控制你的 GSM 无线电来使用/禁用特定的 BTS。

GSM 收音机有自己的固件，不公开这样的功能。

您可以列出范围内可用的 BTS 并根据运营商 ID aka [MCC-MNC](http://en.wikipedia.org/wiki/Mobile_Network_Code)进行选择，

然后 GSM 无线电将主要绑定到所选运营商的 BTS，或者它将使用漫游 BTS（本地或国际）。

# php - .load() 不会为未缓存的图像触发 - jquery

> ID：10968152
> 
> 赞同：3
> 
> 时间：2012-06-10T11:03:24.900
> 
> 标签：php, javascript, jquery, ajax, jquery-load

在 safari 和 opera 中，.load 的回调函数不会等待未缓存的图像完全加载。使用缓存的图像，它工作得非常好。

代码有点复杂，我尽量简化...

所以，我的js是这样的：

```
 $('#chatwindow_' + thread_id).load('/chat.php?thread_id=' + thread_id, function(){

            $('#chatwindow_' + thread_id).children('.chat_messagebox').load('/messages.php?sel=chat&latest_messages=10&thread_id=' + thread_id, function(){

//THIS IS BEING EXECUTED BEFORE THE IMAGES ARE FULLY LOADED, 
//BUT I EXPECT IT TO BE EXEC AFTER THE IMAGES ARE LOADED

                $(this).scrollTo('max',0);
                $('#chatwindow_' + thread_id).find('.messages_newcontent').focus();
        });

    }); 
```

messages.php?sel=聊天：

```
<? include(gen_path("/messages_messagelist.php")); ?> 
```

messages_messagelist.php：

```
while($x < $x_total){
load_attachments("message_".$message_row['id'], $max_width_of_att_field)
} 
```

最后是函数的重要片段：

```
return "<img src='/upload/attachments/".$attachments_row['id']."' width='160' class='download_file info_nextsibling' id='downloadfillabeobj_".$attachments_row['id']."'>" 
```

就是这样 - 如果这个最终的 < img > 没有被缓存，它会在调用初始 .load 回调函数后完全加载 - 关于如何等待所有未缓存图像的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T16:41:42.470

在此处查看 David DeSandro 的`imagesLoaded` [**jQuery 插件**](https://github.com/desandro/imagesloaded/)。

从文档：

> “你不能对缓存的图像执行 .load()”

# java - 如何在 kabeja 上处理此错误？

> ID：10968155
> 
> 赞同：1
> 
> 时间：2012-06-10T11:04:01.663
> 
> 标签：java, image, package, dxf, kabeja

我需要从给定的 DXF 文件生成 SVG。我尝试使用 kabeja 包将其存档。这是他们在网页上提供的代码。

```
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import org.xml.sax.ContentHandler;

import org.kabeja.dxf.DXFDocument;
import org.kabeja.parser.DXFParseException;
import org.kabeja.parser.Parser;
import org.kabeja.parser.ParserBuilder;
import org.kabeja.svg.SVGGenerator;
import org.kabeja.xml.SAXGenerator;
 public class MyClass{
   public MyClass(){
        ...
 }
public void parseFile(String sourceFile) {

Parser parser = ParserBuilder.createDefaultParser();

try {
 parser.parse(new FileInputStream(sourceFile));

 DXFDocument doc = parser.getDocument();

     //the SVG will be emitted as SAX-Events
     //see org.xml.sax.ContentHandler for more information 

     ContentHandler myhandler = new ContentHandlerImpl();

     //the output - create first a SAXGenerator (SVG here)
 SAXGenerator generator = new SVGGenerator();

 //setup properties
 generator.setProperties(new HashMap());

 //start the output
 generator.generate(doc,myhandler);

} catch (DXFParseException e) {
     e.printStackTrace();
} catch (IOException ioe) {
     ioe.printStackTrace();
}
}
} 
```

Hear 是 kabeja 开发组在[sourceforge 网站](http://kabeja.sourceforge.net/docs/devel/embedding.html)上提供的代码。但是在上面的代码中，我注意到他们的新包中缺少一些类。例如

```
 ContentHandler myhandler = new ContentHandlerImpl(); 
```

在这一行中，它创建了 contentHandlerImpl 对象，但使用新的 kabeja 包它没有该类。因此，它不会生成 SVG 文件。那么有人可以解释我如何使用这个包来归档我的目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T11:08:24.300

尝试阅读从 kabeja 论坛中[找不到的符号 ContentHandlerImpl](http://sourceforge.net/projects/kabeja/forums/forum/510352/topic/3040654)

# objective-c - 如何在 OS X 中布局这些视图？

> ID：10968156
> 
> 赞同：0
> 
> 时间：2012-06-10T11:04:14.500
> 
> 标签：objective-c, macos, autoresizingmask, autolayout

考虑 3 个视图`header`，`body`并`footer`具有以下限制：

*   `header`必须显示在顶部并具有固定高度
*   `footer`必须显示在底部并具有固定高度
*   `body`必须填充页眉和页脚之间的空间

是否可以使用自动调整大小的蒙版来布局这些视图？如何？

如果没有，是否可以使用自动布局来布局这些视图？如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T11:10:19.533

如果它的工作方式与 UIKit 相同：

*   页眉和页脚都有 4 个固定的边距，固定的高度，但灵活的宽度 : `UIViewAutoresizingFlexibleWidth`。在 IB 中，4 个边距打开（点亮），水平箭头（宽度）打开（点亮），但垂直箭头（高度）关闭（未点亮）。
*   body 有所有 4 个固定边距，但灵活的宽度和高度 : `UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight`. 在 IB 中，4 个边距打开（点亮），两个箭头也都打开。

# jquery - facebook使用灯箱自动调整大小以全屏查看图像

> ID：10968158
> 
> 赞同：1
> 
> 时间：2012-06-10T11:04:21.907
> 
> 标签：jquery, facebook, tabs, lightbox, autogrow

嗨，我有一个显示优惠的 Facebook 选项卡。这些优惠使用带有核心 joomla 灯箱的 ari 图像滑块来全屏查看图像。我正在使用 facebook 自动调整大小功能来摆脱滚动条，它在 Firefox 中运行良好。在所有其他浏览器中，当我单击要在灯箱中全屏查看的提议时，在所有其他浏览器互联网中探索 chrome 和 safari 时，画布的高度开始增长，图像不断向下移动。似乎当图像打开时，facebook autoresize 功能只会不断增加高度并且图像会移动。这是我的代码：

```
<div id="fb-root"></div>
<script src="https://connect.facebook.net/en_US/all.js"></script>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId : 'APP ID', //Your facebook APP here
      cookie : true, // enable cookies to allow the server to access the //session

    });
     FB.Canvas.setAutoGrow();
  }

  window.onload = function() {
    FB.Canvas.setAutoGrow(91);
  }
</script> 
```

此问题仅在其他浏览器中不会出现在 firefox 中。任何想法发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T12:03:32.567

这是错误的：

```
window.onload = function() {
   FB.Canvas.setAutoGrow(91);
} 
```

当 window.load 被触发时，FB 还不能访问。

这些线路应该在通话`FB.Canvas.setAutoGrow();`后而不是立即。`FB.init`

# javascript - jquery中的事件绑定问题

> ID：10968165
> 
> 赞同：2
> 
> 时间：2012-06-10T11:05:29.413
> 
> 标签：javascript, jquery

```
 <div id="parent">
    <div id="children">
    </div>
  </div> 
```

如果我们用相同的事件绑定父母和孩子，比如：

```
 $("#parent").live({ mouseenter : Infocus , mouseleave : Outfocus });
     $("#children").live({ mouseenter : Infocus , mouseleave : Outfocus }); 
```

现在我的问题是当我将鼠标移到孩子身上时，父母也被突出显示，有人可以告诉我这里发生了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T11:07:30.800

您必须`stopPropagation()`用于防止事件跟踪。

```
function Infocus(e) {
  e.stopPropagation();
  // your code
}

function Outfocus(e) {
  e.stopPropagation();
  // your code
} 
```

阅读**[.stopPropagation()](http://api.jquery.com/event.stopPropagation/)**

你可以这样做：（可能不满意）

```
$("#parent").live({
    mouseenter: Infocus,
    mouseleave: Outfocus
});
$("#children").live({
    mouseenter: Infocus,
    mouseleave: Outfocus
});

function Infocus(e) {
    if(this.id == 'parent') {
        $(this).css('background', 'yellow');
    } else if(this.id == 'children') {
        $(this).css('background', 'green');
        $(this).parent().trigger('mouseleave')
    }
}

function Outfocus(e) {
    if(this.id == 'parent') {
        $(this).css('background', 'transparent');
    } else if(this.id == 'children') {
        $(this).css('background', 'transparent');
        $(this).parent().trigger('mouseenter')
    }
} 
```

**[演示](http://jsfiddle.net/uMbfL/6/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T11:24:20.440

即使另一个答案在某种意义上是准确的。我认为你的问题是另一个问题。我认为您正在做的是突出显示`mouseenter`和删除突出显示，`mouseleave`但实际发生的情况有所不同。

`#parent`搬家时你永远不会离开`#children`。在图像中，如果您将鼠标从左`(1)`向右移动，`(5)`则会触发以下事件：

```
 +-----------------------------------+
                |#parent                            |
                |                                   |
                |                                   |
                |          +-------------+          |
                |          |#children    |          |
                |          |             |          |
          (1)   |    (2)   |     (3)     |   (4)    |   (5)
                |          |             |          |
                |          |             |          |
                |          +-------------+          |
                |                                   |
                |                                   |
                |                                   |
                +-----------------------------------+ 
```

1.  没有。
2.  `#parent.mouseenter`
3.  `#children.mouseenter`
4.  `#children.mouseleave`
5.  `#parent.mouseleave`

如果是这种情况，那么您需要修改突出显示逻辑。

# objective-c - 推送 Qualcomm Vuforia 视图控制器，无法导入头文件

> ID：10968175
> 
> 赞同：1
> 
> 时间：2012-06-10T11:07:58.273
> 
> 标签：objective-c, ios, augmented-reality, qcar-sdk

我将 UIViewController 作为 rootViewController 推送到 UINavigationController 上，当触摸按钮时，我想推送 Vuforia ImageTarget 的示例视图控制器。

为此，我需要在 UIViewController 的 IBAction 方法中分配/初始化 Vuforia 的视图控制器，但我无法导入“QCARutils.h”和“ARParentViewController.h”，我似乎遇到了很多完全不相关的错误。

我得到的第一个错误是在 Matrices.h 中：“未知类型名称‘命名空间’”

我假设这是一些图书馆链接问题，我只是无法终生找出它是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T13:29:50.023

将 .m 文件重命名为 .mm 文件。QCAR 是 C++，.mm 扩展名告诉 Xcode 将此文件编译为 Objective C++。

# hibernate - Hibernate : FetchMode.JOIN 中的重复

> ID：10968179
> 
> 赞同：3
> 
> 时间：2012-06-10T11:08:28.763
> 
> 标签：hibernate, criteria, hibernate-criteria

我有一个 dept 表和一个 emp 表。dept 表与 emp 表 wrt 的 deptId 是一对多的关系。

当我尝试这段代码时：

```
session.createCriteria(Dept.class).setFetchMode("empMap", FetchMode.JOIN)
       .list(); 
```

这是我的控制台中为休眠生成的 sql 查询生成的输出：

```
select this_.DEPT_ID as DEPT1_1_1_, this_.DEPT_NAME as DEPT2_1_1_, 
empmap2_.DEPT_ID as DEPT3_3_, empmap2_.EMP_ID as EMP1_3_, 
empmap2_.EMP_ID as formula0_3_, empmap2_.EMP_ID as EMP1_0_0_, 
empmap2_.EMP_NAME as EMP2_0_0_, empmap2_.DEPT_ID as DEPT3_0_0_, 
empmap2_.AGE as AGE0_0_, empmap2_.SEX as SEX0_0_ 
from dept this_, emp empmap2_ 
where this_.DEPT_ID=empmap2_.DEPT_ID(+) 
```

在生成的休眠查询中，我可以清楚地看到 emp 表的列中存在重复。但我不希望出现这些重复。那么如何避免hibernate生成的查询中的重复呢？

请告知如何删除这些重复。

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T19:38:27.417

有一些解决方法：

1.  您可以将您的项目添加到`HashSet`或`LinkedHashSet`- 这将删除重复项或
2.  您可以尝试使用不同的获取模式。[有关此处](http://www.mkyong.com/hibernate/hibernate-fetching-strategies-examples/)获取模式的详细信息，请参阅此链接- 我使用`SUBSELECT`.

# php - 使用两列连接两个 SQL 表

> ID：10968180
> 
> 赞同：1
> 
> 时间：2012-06-10T11:08:29.970
> 
> 标签：php, mysql, sql, join

**问题：**

我正在尝试将评分表（betyg_essays）中两列中的id“翻译”为另一个表（betyg_users）中这些用户的真实姓名。

**评分表 (betyg_essays) 如下所示：**

![在此处输入图像描述](../Images/32bc78e31e0d4d2769249fcfaae04dc9.png)

**用户表 (betyg_users) 如下所示：**

![在此处输入图像描述](../Images/fb42d104f3727ab3ae1b3081836ca38b.png)

**PHP代码（到目前为止）：**

```
$query = 'SELECT * FROM betyg_essays JOIN betyg_users ON betyg_essays.Examiner = betyg_users.UID'; 
```

检查员/主管列 (betyg_essays) 对应于 UID 列 (betyg_users)。

**所需的输出应该是（使用名字/姓氏列）：**

1.  考官：约翰霍普金斯。主管：迈克·贝克。
2.  考官：约翰霍普金斯。主管：迈克·贝克。

**非工作 SQL 查询：**

```
$query = "SELECT 
            (u1.Firstname + ' ' + u1.Lastname) AS Examiner, 
            (u2.Firstname + ' ' + u2.Lastname) AS Supervisor
        FROM betyg_essays grade
            INNER JOIN betyg_users u1 ON grade.Examiner = u1.UID
            INNER JOIN betyg_users u2 ON grade.Supervisor = u2.UID"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T11:13:48.953

```
SELECT
CONCAT(u1.FirstName, ' ', u1.LastName) AS Examiner,
CONCAT(u2.FirstName, ' ', u2.LastName) AS Supervisor
FROM betyg_essays e
INNER JOIN betyg_users u1 ON e.Examiner = u1.UID
INNER JOIN betyg_users u2 ON e.Supervisor = u2.UID 
```

我没有尝试代码，您可能需要进行一些调整。

更新：修复了id

```
INNER JOIN betyg_users u2 ON e.Supervisor = u2.UID 
```

更新2：

我已将 + 更改为 CONCAT 函数。显然，MySQL 处理字符串的方式与 SQL Server 不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T11:15:49.267

在这里，您需要加入 user_table 两次，第一次获取考官用户名，第二次获取主管用户名

```
SELECT (g1.FirstName + ' ' + g1.LastName) AS Examiner,' , (g2.FirstName + ' ' + g2.LastName) AS Supervisor
FROM grading_table grade
INNER JOIN user_table g1 ON grade.examiner = g1.uid
INNER JOIN user_table g2 ON grade.supervisor = g2.uid 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-10T11:48:00.340

**最终解决方案：**

```
$query = "SELECT 
            CONCAT (u1.Firstname, ' ', u1.Lastname) AS Examiner, 
            CONCAT (u2.Firstname, ' ', u2.Lastname) AS Supervisor
        FROM betyg_essays grade
            INNER JOIN betyg_users u1 ON grade.Examiner = u1.UID
            INNER JOIN betyg_users u2 ON grade.Supervisor = u2.UID"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-10T11:15:41.000

试试这个

```
SELECT CONCAT(betyg_users.`Firstname`," ",betyg_users.`Lastname`) AS `examiner_name`,
CONCAT(betyg_users.`Firstname`," ",betyg_users.`Lastname`) AS `superviser_name`
FROM `betyg_essays`
INNER JOIN `betyg_users` ON betyg_essays.`Examiner` = betyg_users.`UID` 
INNER JOIN `betyg_users` ON betyg_essays.`Supervisor` = betyg_users.`UID`; 
```

# c++ - Windows 套接字错误 10013

> ID：10968182
> 
> 赞同：0
> 
> 时间：2012-06-10T11:08:37.293
> 
> 标签：c++, windows, sockets, icmp

这是程序的代码，它应该发送一个简单的“ping”。我知道我可以使用`IcmpSendEcho2()`函数，但我决定这样做：

```
struct ICMPh
{
unsigned char typ;
unsigned char kod;
unsigned short suma_spr;
unsigned short id;
unsigned short seq;
};
unsigned short CalcChecksum (char *pBuffer, int nLen)
 { 
  ////Checksum for ICMP is calculated in the same way as for IP header
  //This code was taken from: http://www.netfor2.com/ipsum.htm

  unsigned short nWord;
  unsigned int nSum = 0;
  int i;

  for (i = 0; i < nLen; i = i + 2)
  {
      nWord =((pBuffer [i] << 8)& 0xFF00) + (pBuffer [i + 1] & 0xFF);
      nSum = nSum + (unsigned int)nWord;  
  }

 while (nSum >> 16)
  {
      nSum = (nSum & 0xFFFF) + (nSum >> 16);
  }

  //One's complement the result
  nSum = ~nSum;

  return ((unsigned short) nSum);
 }
int _tmain(int argc, _TCHAR* argv[])
{
WSADATA wsaData;
if(WSAStartup(MAKEWORD(2,2),&wsaData)==SOCKET_ERROR)
{
    cout<<"ERROR at startup:\n";
    cout<<WSAGetLastError()<<"\n";
    system("pause");
    WSACleanup();
    return -1;
}
SOCKET soc;
int seq=0;

soc=socket(AF_INET,SOCK_RAW,IPPROTO_ICMP);
if(soc==INVALID_SOCKET)
{
    cout<<"ERROR: INVALID SOCKET\n";
    cout<<WSAGetLastError()<<"\n";
    system("pause");
    WSACleanup();
    return -1;
}
char* addres=new char;
cin>>addres;

SOCKADDR_IN adr;
adr.sin_addr.S_un.S_addr=inet_addr(addres);
adr.sin_family=AF_INET;
adr.sin_port=rand();

ICMPh icmp;
icmp.kod=0;
icmp.seq=htons(seq++);
icmp.typ=8;
icmp.suma_spr=0;
icmp.id=htons(rand());

int size=32;
char *buffer;

buffer=new char[sizeof(ICMPh)+size];
memcpy_s(buffer,sizeof(ICMPh),&icmp,sizeof(ICMPh));
memset(buffer+sizeof(ICMPh),'x',size);

icmp.suma_spr=htons(CalcChecksum(buffer,sizeof(ICMPh)+size));

memcpy_s(buffer,sizeof(ICMPh),&icmp,sizeof(ICMPh));

if(sendto(soc,buffer,sizeof(ICMPh)+size,0,(SOCKADDR*)&adr,sizeof(SOCKADDR_IN))==SOCKET_ERROR)
{
    cout<<"FAIL at 'sendto':\n";
    cout<<WSAGetLastError()<<"\n";
    system("pause");
    WSACleanup();
    delete []buffer;
    return -1;
}
else
    cout<<"FINE";
WSACleanup();
system("pause");
delete []buffer;
return 0;
} 
```

这就是问题所在。一切正常，直到它`sendto()`发挥作用。我收到一个 10013 错误代码表单`WSAGetLastError()`，这意味着`WSAEACCES Permission denied`
我以管理员权限启动了这个应用程序，所以我不知道为什么我不能使用这个套接字配置发送数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T00:19:03.840

对于`sendto()`,`WSAEACCES`与用户权限无关。`socket()`如果您没有足够的权限来使用 RAW 套接字， 则会收到错误消息。[阅读文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740148.aspx)。当`sendto()`报告时`WSAEACCES`，这意味着您的`sockaddr_in`结构没有正确填写。我在您的代码中看到三个与此相关的错误：

1）您没有`sockaddr_in`在使用它之前将其归零。这样做很重要。

2) 您正在分配一个 1 字符的缓冲区来接收来自用户的目标地址。对于 IPv4 地址（包括空终止符），缓冲区需要为 16 个字符。所以你有一个缓冲区溢出。

`htons()`3）分配`sin_port`字段时您没有调用。

# php - 即使登录不正确，PHP 脚本也会登录

> ID：10968186
> 
> 赞同：0
> 
> 时间：2012-06-10T11:09:13.750
> 
> 标签：php, mysql, login

我制作了一个运行良好的登录脚本，除了即使用户名和密码不正确它也会登录。

这是代码：

```
<?php
//SQL ENTRY
$username_db = "root";
$password_db = "";
$host = "127.0.0.1";
$db = "teach_login";

//Requested
$usern = $_POST['username'];
$pw = $_POST['password'];

//Make it safe
$usern = htmlspecialchars($usern);
$pw = htmlspecialchars($pw);
$pwmd5 = md5($pw);

//SQL SETTINGS  
$db_handle = mysql_connect($host, $username_db, $password_db);
$db_open = mysql_select_db($db, $db_handle);
echo $db_open."<br />";
if ($db_open){
    $SQL = "SELECT `username` FROM userpassword WHERE (username = '$usern' && password = '$pwmd5') ";
    $result = mysql_query($SQL);
    echo $result."<br />";;
    if ($result >= 1){
        $SQL_name = "SELECT * FROM `userpassword` WHERE (username = '$usern') ";
        $result_new = mysql_query($SQL_name);
        while($row = mysql_fetch_assoc($result_new)){
            $name = $row['full_name'];
            echo $name;
            echo "<br />";
            echo $row['password']."<br>";
            $SQL = "UPDATE `userpassword` SET `logged_in`=[1] WHERE `username` = '$usern' ";
            $result = mysql_query($SQL);
            if ($result > 0){
                mysql_close($db_handle);
            }else{
                echo "Data Not written";
            }
        }
        /*echo $result_new."<br />";            
        echo $result_name_array."<br />";
        $name = $result_name_array[1];
        echo $name."<br />";
        session_start();
        $_SESSION['login_name'] = $name;
        $_SESSION['login'] = 1;
        mysql_close($db_handle);
        //header ("location: teach_home.php");
        */
    }else{

        echo "Cannot Login";
        //header ("location: teach_login.php");
        mysql_close($db_handle);
    }

}else {
    echo ('DATABASE NOT FOUND');
    mysql_close($db_handle);
}
?> 
```

输出是这个 SQL ENTRY：

```
1<br>
Resource id #4<br>
Salik Sadruddin<br>
14918756cc99b9e6ce69f4c943680efc<br>
Data Not written<br> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T11:24:33.240

这就是缺陷所在：

```
$result = mysql_query($SQL);
if ($result >= 1){
    // …
} 
```

的返回值[`mysql_query`](http://php.net/mysql_query)不是所选行数，而是：

> 对于 SELECT、SHOW、DESCRIBE、EXPLAIN 和其他返回结果集`mysql_query()`的语句，成功时返回资源，错误时返回 FALSE。

在您的情况下，查询可能会成功，但不会选择任何记录，但是`mysql_query`会返回满足表达式的资源`$result >= 1`。

要解决此问题，请使用[`mysql_num_rows`](http://php.net/mysql_num_rows)获取选定行数：

```
if ($result && mysql_num_rows($result) === 1){
    // …
} 
```

还可以考虑使用[MySQLi](http://php.net/book.mysqli)或[PDO_MYSQL](http://php.net/ref.pdo-mysql)代替标准 MySQL 扩展。您还应该阅读有关[SQL 注入](https://www.owasp.org/index.php/SQL_Injection)的信息，因为您当前的代码很容易受到攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T11:24:10.437

***对于更新，如果 UPDATE 语句成功 $result 会给你 0。对于插入它会给你 1***

```
$SQL = "UPDATE `userpassword` SET `logged_in`=[1] WHERE `username` = '$usern' ";
        $result = mysql_query($SQL);
        if ($result == 0){
            echo "Data Updated";
            mysql_close($db_handle);
        }else{
            echo "Data Not written";
        } 
```

# c++ - shared_ptr 和 weak_ptr 之间缺少相等性

> ID：10968189
> 
> 赞同：11
> 
> 时间：2012-06-10T11:10:03.657
> 
> 标签：c++, c++11, shared-ptr

虽然我确实理解为什么没有`operator==`for `shared_ptr`and `unique_ptr`，但我想知道为什么没有 for `shared_ptr`and `weak_ptr`。特别是因为您可以`weak_ptr`通过对`shared_ptr`. 我会假设 99% 的时间都是你想要的`lhs.get() == rhs.get()`。我现在将继续并将其引入我的代码中，除非有人可以给我一个很好的理由，为什么不应该做这样的事情。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-10T11:22:03.697

`weak_ptr`没有`get()`方法，因为您需要显式锁定`weak_ptr`才能访问底层指针。明确这一点是一个深思熟虑的设计决定。如果转换是隐式的，那么很容易编写不安全的代码，如果`shared_ptr`对象的最后一个要被销毁，而从 中获得的底层指针`weak_ptr`仍在检查中。

[这个提升页面](http://www.boost.org/libs/smart_ptr/weak_ptr.htm "提升文档")很好地描述了陷阱以及为什么`weak_ptr`界面如此有限。

如果您需要进行快速比较，那么您可以执行`shared == weak.lock()`. 如果比较是真的，那么你知道它`weak`必须仍然有效，因为你持有一个单独`shared_ptr`的对象。如果比较返回 false，则没有这样的保证。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-10T11:16:29.710

因为它是有代价的。

A`weak_ptr`就像一个观察者，而不是一个真正的指针。要使用它进行任何工作，您首先需要`shared_ptr`使用它的`lock()`方法从中获取 a 。

这具有获得所有权的效果，但它与复制常规`shared_ptr`（计数增量等）一样昂贵，所以它不是微不足道的。

因此，如果不提供`==`，您将被迫退后一步并实际检查您是否真的需要这个。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-07-30T09:44:28.253

正如其他答案所指出的那样，简单地比较底层指针是危险的。例如，考虑以下场景：一个对象的弱引用 A 存在，该对象随后被删除，因此弱引用过期。然后，在由所述删除释放的内存中分配另一个对象，该对象具有相同的地址。现在底层指针是相同的，即使弱指针最初指向不同的对象！

正如其他答案所建议的那样，一种方法是比较`shared == weak.lock()`. 由于如果弱指针过期`lock()`将返回`nullptr`（而不是一些虚假指针），因此他的工作是识别它们是否相等（只要`shared != nullptr`）。但是，这样做有两个问题：

*   当弱指针过期时它停止工作，在这种情况下比较会改变；过期后，只有在`shared == nullptr`. 这在比较必须保持稳定的情况下可能很危险，例如将其用作`unordered_map`or中的键时`unordered_set`。
*   `lock()`是一项相对昂贵的操作。

幸运的是，有一种更好的方法可以做到这一点。两者`weak_ptr`和`shared_ptr`还存储一个指向所谓的*控制块*的指针，它存储引用计数并且只要对原始对象的引用仍然存在，它就会超过原始对象。要检查它们是否引用同一个对象，我们需要做的就是比较控制块指针。这可以通过以下`owner_before`方法完成：

```
template<class T>
bool owner_equals(std::shared_ptr<T> &lhs, std::weak_ptr<T> &rhs) {
    return !lhs.owner_before(rhs) && !rhs.owner_before(lhs);
} 
```

如果您想知道它们是否（曾经）引用了同一个对象，这种方法甚至可以用于比较两个`std::weak_ptr`s，因为控制块将（至少）与所有弱引用一样长。

请记住，如果您使用 的别名功能，这可能不会产生预期的结果`std::shared_ptr`，该功能允许您`std::shared_ptr`使用相同的控制块创建两个实例，但存储不同的指针。

# javascript - 看似简单的 javascript 字符串构建

> ID：10968193
> 
> 赞同：2
> 
> 时间：2012-06-10T11:10:39.620
> 
> 标签：javascript, jquery, string, string-concatenation

我认为这真的很简单，但我只是为此浪费了一个上午！

```
var insert = '<div class="main_content_half_panel_circle" id="circle_' + c + '"></div><script type="text/javascript">$("#circle_' + c + '").live("click", function(){ $(".main_content_half_panel_info_wrap").animate("left", ' + c_x + ', 400, "easeOutQuint") });</script>'; 
```

在萤火虫中，我不断收到“未终止的字符串文字”-我尝试了一百种不同语法的变体，例如-

```
'$(".main_content_half_panel_info_wrap").animate({"left": ' + c_x + '}, 400, "easeOutQuint") });</script>' 
```

...从头开始重建字符串，将其重建为没有转义字符且不包含变量的直接代码块，然后重新插入'+ c +'等。什么都没有。我是不是代码盲了？

非常感谢任何帮助！

页面位于：

[http://www.helicopterfir.com/dev](http://www.helicopterfir.com/dev)

斯科特

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T11:15:39.070

当您`</script>`在脚本块中包含字符串时，浏览器认为脚本块在那里结束。脚本标签在其中的代码之前被简单地解析，所以在那个阶段浏览器不知道它在一个字符串中。

在结束标记的中间拆分字符串：

```
...</scr' + 'ipt>... 
```

# java - 在计算日期时依赖毫秒是否安全？

> ID：10968194
> 
> 赞同：2
> 
> 时间：2012-06-10T11:10:47.127
> 
> 标签：java, api, date

在 java 中，您可以调用 Date 对象的 getTime() 方法来表示自 1970 年 1 月 1 日 00:00:00 GMT 以来的毫秒数。这种表示在其他编程语言 API 中是否通用？

例如，如果我让使用不同编程语言的 API 的人给我当前日期和时间（以毫秒为单位），我是否可以安全地假设如果我计算这个值，我最终会得到相同的日期和时间在服务器端使用java。

我问的原因是因为我正在通过 http 构建一个公共 API，我希望客户端为我提供一个我需要在服务器端处理的时间戳。我的问题实际上是自 1970 年 1 月 1 日 00:00:00 GMT 以来以毫秒的形式请求日期表示是否安全，而不是像 yyyy-MM-dd'T'HH:mm 这样的完整字符串表示： SS.SSS'Z

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T11:17:46.427

不，毫秒时间戳远非通用。我建议您使用标准字符串格式（例如[RFC 3339](http://www.ietf.org/rfc/rfc3339.txt)）在同一台计算机上的计算机或语言运行时之间交换时间。另请参阅[维基百科：系统时间](http://en.wikipedia.org/wiki/System_time)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T11:24:51.450

您通常不能假设每个数字时间戳都使用 1970 年 1 月 1 日作为基线。但这并不重要，因为您*可以*将您的 API 指定为*需要*这种形式的时间戳。调整基线和/或将数字时间戳缩放到您需要的形式是一件小事。

所以看看替代品：

*   数字时间戳在消息中占用的空间略少，转换更容易和更便宜。但是，存在有人通过使用错误的缩放和/或基线来错误地实现您的规范的风险。

*   标准（例如 ISO）文本格式使用（略微）更多空间并且稍微难以转换，但存在标准解析器/非解析器实现。（仍然存在有人会使用您的规范不允许的变体的风险。）

*   非标准的文本格式不是一个好主意，因为格式中可能存在错误实现和歧义。（例如 3 个字母的时区不明确）

*   文本格式更易于人类阅读；例如用于调试目的。

但总而言之，我认为如果您使用数字或（基于标准的）文本格式并不重要，**只要**您明确指定所需的格式及其含义即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T11:18:01.550

您可以依赖该日期格式，因为 Java 也只能从操作系统获取该日期。您使用哪种编程语言并不重要。有关更详细的说明，请参阅Wikipedia 中的[unix time](http://en.wikipedia.org/wiki/Unix_time)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T11:19:16.287

我将参考 OAuth，而不是直接回答。根据[OAuth 1.0 规范](http://oauth.net/core/1.0/#nonce)：

> 除非服务提供商另有规定，否则时间戳以自 1970 年 1 月 1 日 00:00:00 GMT 起**的秒数表示。**

所以，如果你真的不需要毫秒粒度，那就做别人做的事情。

# c# - XML TO linq 获取元素列表到 ArrayList

> ID：10968195
> 
> 赞同：0
> 
> 时间：2012-06-10T11:10:52.117
> 
> 标签：c#, xml, linq

我有这个 XML 文件设置，我如何（使用 LINQ）将（StartItem）列表返回给 ArrayList

## 并返回（PriceItem）到另一个 ArrayList

```
<Settings>
    <ConSetting SettingID="1">
         <Company CompanyID="1" CompanyName="CA" Code="*100#" Pin="11111" MobileName="M1">
            <StartItems StartID="1"> 094</StartItems>
            <StartItems StartID="2"> 095</StartItems>
            <StartItems StartID="4"> 097</StartItems>
            <StartItems StartID="5"> 098</StartItems>
        </Company>
        <Company CompanyID="2" CompanyName="CB" Code="*200#" Pin="22222" MobileName="M2">
            <StartItems StartID="1"> 099</StartItems>
            <StartItems StartID="2"> 093</StartItems>
            <StartItems StartID="3"> 091</StartItems>
            <StartItems StartID="4"> 092</StartItems>

        </Company>
    </ConSetting>
    <Price SettingID ="2" CompanyName="CA" >
             <Company CompanyID="1">
            <PriceItem P="40"> 50</PriceItem>
            <PriceItem P="90"> 100</PriceItem>
            <PriceItem P="200"> 225</PriceItem>

        </Company>
        <Company CompanyID="2" CompanyName="CB" >
            <PriceItem P="40"> 60</PriceItem>
            <PriceItem P="90"> 110</PriceItem>
            <PriceItem P="200"> 235</PriceItem>

        </Company>
    </Price>

</Settings> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T13:55:01.813

XDocument 在您的情况下很容易使用：

```
var doc = XDocument.Load("settings.xml");
var result = from items in doc.Descendants("StartItems")
             where items.Parent.Attribute("CompanyID").Value == "1"
             select new StartItem() 
             {
                 StartID = items.Attribute("StartID").Value,
                 Value = items.Value
             };
var Company1List = new ArrayList();

foreach(var item in result)
{
    Company1List.Add(item);
}

public class StartItem
{
    public string StartID { get; set; }
    public string Value { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T11:13:52.030

您可能想查看 .NET 中的 XmlReader 类

它应该能够轻松解析此 XML，然后您可以从节点中选择某些项目到您想要的任何列表中。

[http://msdn.microsoft.com/en-us/library/system.xml.xmlreader.aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmlreader.aspx)

看看这个问题和答案

[在 C# 中使用 XmlReader 读取 Xml](https://stackoverflow.com/questions/2441673/reading-xml-with-xmlreader-in-c-sharp)

# c# - 一种更优雅的方式来编写评估具有不同优先级的多个输入的决策代码？

> ID：10968197
> 
> 赞同：13
> 
> 时间：2012-06-10T11:11:17.940
> 
> 标签：c#, design-patterns, if-statement

我正在为游戏编写一些决策 AI，并且我想出了以下代码。

```
if(pushedLeft && leftFree && leftExists)
    GoLeft();
else if(pushedRight && rightFree && rightExists)
    GoRight();
else if(leftFree && leftExists)
    GoLeft();
else if(rightFree && rightExists)
    GoRight();
else if(pushedLeft && leftExists)
    GoLeft();
else if(pushedRight && rightExists)
    GoRight();
else if(leftExists)
    GoLeft();
else if(rightExists)
    GoRight();
// else do nothing... 
```

这是一个相当长的`if`语句流，具有类似的条件！

请注意，它使这个很好的模式：

```
L1 L2 L3  -> L
R1 R2 R3  -> R
   L2 L3  -> L
   R2 R3  -> R
L1    L3  -> L
R1    R3  -> R
      L3  -> L
      R3  -> R
(nothing) -> 0 
```

这段代码的目的是根据一些传入的状态信息来决定对象应该向左还是向右（或根本不）移动。每条信息都有不同的优先级。我可以将它写在这样的有序列表中：

```
Highest Priority
----------------
Don't ever move into an invalid space
Prefer to move into an unoccupied space
Prefer to move in the push direction
Prefer to move left
----------------
Lowest Priority 
```

很明显，添加额外的信息输入来做出这个决定将使条件的数量增加一倍。并且将这些输入的潜在值的数量加倍（例如：允许上/下/左/右）也将使条件句的数量加倍。（所以这是 n×m ^(2 个)条件，对吧？）

所以我的问题是：

**有没有一种很好的、​​令人满意的、优雅的编码方式？**

我认为必须有一个很好的“n×m”方式来做到这一点（编辑：我最初在这里有“n+m”，但这似乎是不可能的，因为有 n×m 输入条件）。适用于我的代码和一般问题的东西？

最好是与上面的条件版本一样好或更好的东西。理想情况下避免堆分配的东西 - 对于在游戏开发场景中使用很重要（尽管如果需要，这些总是可以通过缓存等进行优化）。

还有：这个问题是否有任何“Googleable 条款”？我怀疑这不是一个罕见的问题 - 但我不知道它的名称。

* * *

**更新：**感谢[Superpig 的回答](https://stackoverflow.com/a/10968740/165500)，一个想法是计算各种选项的分数。像这样的东西：

```
int nothingScore = 1 << 4;
int leftScore = (1 << 1) + (pushedLeft ? 1 << 2 : 0) + (leftFree ? 1 << 3 : 0) + (leftExists ? 1 << 5 : 0);
int rightScore = (pushedRight ? 1 << 2 : 0) + (rightFree ? 1 << 3 : 0) + (rightExists ? 1 << 5 : 0); 
```

肯定有更好的方法来编写评分代码（以及其他评分方法）。然后仍然是计算分数后选择做什么的问题。而且，当然，可能有更好的方法完全不涉及评分。

* * *

**更新 2：**我在[这里发布并接受了我自己的答案（因为](https://stackoverflow.com/a/10974326/165500)*Superpig*的不是一个完整的解决方案，到目前为止，甚至没有其他答案在正确的轨道上）。我没有对各种输出进行评分，而是选择了一种使用位域的选项消除方法。这允许仅使用单个整数作为内存来做出决定。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T12:34:53.337

这本质上是一个分类问题；您想要决策树（或行为树）之类的东西。您正在尝试为情况（有效性、自由度、推动方向等）获取一堆离散输入，并将结果分类为“上、下、左或右”。

我怀疑，如果您希望长链 if 语句具有更好或相同的性能 - 至少在指令数/完成的比较次数方面 - 那么您将*不得不*以您在那里进行的方式进行比较。计算所有方向的分数然后检查最大值，或递归地将移动列表划分为首选和非首选等方法，最终都会比纯粹的比较序列做更多的工作。

我认为你*可以*建立一个查找表。你有 4 位指示方向是否有效，4 位指示方向是否被占用，2 位指示推送方向，总共 10 位 - 所以这是 1024 种不同的情况，每种情况下的行为可以是仅用 2 位（因此，1 字节）描述 - 使总表大小为 1024 字节。

单个条目将是这样的结构：

```
union DecisionSituation
{
    unsigned short Index;
    struct
    {       
        bool ValidLeft : 1;
        bool ValidRight : 1;
        bool ValidUp : 1;
        bool ValidDown : 1;
        bool OccupiedLeft : 1;
        bool OccupiedRight : 1;
        bool OccupiedUp : 1;
        bool OccupiedDown : 1;
        Direction PushDirection : 2; 
    } Flags;
} 
```

您可以通过填写该结构中的标志来描述您的情况，然后读取“索引”值以获取查找表索引。

**编辑：**另外，关于你的评分功能，因为你正在做严格的位模式，我认为你可以跳过所有的三元运算符：

```
int leftScore = (leftExists << 4) | (leftFree << 3) | (pushedLeft << 2) | 1;
int rightScore = (rightExists << 4) | (rightFree << 3) | (pushedRight << 2) | 0;

// Find the highest scoring direction here

// If none of the scores are at least (1 << 4) it means none of them existed
if(highest score < (1 << 4)) return nothing;

// otherwise just return the highest scoring direction 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T03:51:19.060

最重要的是让声明输入内容及其相对优先级的代码简单、简短且优雅。这是编写该代码的一种方法：

```
PreferencedDecisionMaker pdm = new PreferencedDecisionMaker();
pdm.Push(false, leftExists, rightExists, upExists, downExists);
pdm.Push(0);
pdm.Push(false, leftFree,   rightFree,   upFree,   downFree  );
pdm.Push(false, pushedLeft, pushedRight, pushedUp, pushedDown);
pdm.Push(1);
switch(pdm.Decision)
{
    case 1: GoLeft();  break;
    case 2: GoRight(); break;
    case 3: GoUp();    break;
    case 4: GoDown();  break;
} 
```

这里的输入基本上以表格格式声明。每个输入的优先级由行的顺序定义。每列对应一个可能的输出。

**这段代码的“复杂度”是 n×m。**

（虽然我使用缩进让它看起来像一个表格，但更复杂的输入条件不允许每一行整齐地存在于一行上。这没关系：重要的是只有 n×m声明。能够在条件很短的情况下使它看起来像一张桌子只是一个不错的奖励。）

不太重要的是做出决定的实际幕后代码（`PreferencedDecisionMaker`类型）。有几种方法可以根据优先级计算最佳输出决策。Superpig建议评分，这很好。但我最终选择了一种使用位域的选项消除方法。我已经在下面发布了我的代码。

使用位域的一大优势是不需要为数组分配堆内存。唯一的缺点是它仅限于 32 个选项。

以下代码尚未经过彻底测试。而且我还没有填写所有 32 个版本的`Push`方法。它使用可变结构，这是“顽皮的” - 将其转换为不可变结构应该很简单。或者你可以把它变成一个类——但是你会失去避免堆分配的好处。

```
struct PreferencedDecisionMaker
{
    private uint availableOptionsBits;

    private static readonly int[] MultiplyDeBruijnBitPosition = {
        0, 1, 28, 2, 29, 14, 24, 3, 30, 22, 20, 15, 25, 17, 4, 8, 
        31, 27, 13, 23, 21, 19, 16, 7, 26, 12, 18, 6, 11, 5, 10, 9
    };

    public int Decision
    {
        get
        {
            uint v = availableOptionsBits;

            // Find position of lowest set bit in constant time
            // http://stackoverflow.com/a/757266/165500
            return MultiplyDeBruijnBitPosition[((uint)((v & -v) * 0x077CB531U)) >> 27];
        }
    }

    private void InternalPush(uint preference)
    {
        if(availableOptionsBits == 0)
            availableOptionsBits = preference;
        else
        {
            uint combinedBits = availableOptionsBits & preference;
            if(combinedBits != 0)
                availableOptionsBits = combinedBits;
        }
    }

    public void Push(int option)
    {
        if(option < 0 || option >= 32) throw new ArgumentOutOfRangeException("Option must be between 0 and 31");
        InternalPush(1u << option);
    }

    // ... etc ...
    public void Push(bool p0, bool p1, bool p2, bool p3, bool p4) { InternalPush((p0?1u:0u) | ((p1?1u:0u)<<1) | ((p2?1u:0u)<<2) | ((p3?1u:0u)<<3) | ((p4?1u:0u)<<4)); }
    // ... etc ...
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-10T11:30:49.790

当你有一堆`if`语句时，通常可以使用多态性结合[状态](http://www.dofactory.com/Patterns/PatternState.aspx)模式来重构它们：

作为介绍，请观看 Misko Hevery 的以下视频（你会喜欢的）

[http://www.youtube.com/watch?v=4F72VULWFvc&feature=player_embedded#](http://www.youtube.com/watch?v=4F72VULWFvc&feature=player_embedded#)！

这是演示文稿的摘要：

大多数 if 可以被多态性（子类化）替换

这是可取的，因为：

*   没有 ifs 的函数比 ifs 更容易阅读
*   没有 if 的函数更容易测试
*   ifs 的相关分支最终在同一个子类中

使用多态性（子类）

*   如果您正在检查对象应根据其状态表现不同
*   如果您必须在多个地方检查相同的 if 条件

使用如果

*   边界检查原始对象 (>,<, ==, !=)
*   ... 其他用途，但今天我们专注于避免 if

多态解决方案通常更好，因为

*   无需原始源代码即可添加新行为
*   每个操作/关注点都分隔在一个单独的文件中
*   易于测试/理解

**编辑**

乍一看，使用具有多态性的状态模式，解决方案看起来会更复杂，因为这意味着您将需要比以前更多的类，但是权衡要好得多，只要您开始为这种代码编写测试，您会发现它更容易测试，更容易阅读和理解，因此更容易维护和扩展（现在你刚刚发布了关于向右或向左移动，但想象一下，如果你以后需要上下移动，如果你这样做了现在不重构您的代码，添加新功能将是一个真正的 PITA）

你会有类似的东西：

```
// represents the current position
class MyClass
{
  public int X;
  public int Y;
}
abstract class NodeMoving
{
   abstract void Move();
   abstract bool IsValid(MyClass myclass);
}
abstract class NodeMovingLeft : NodeMoving
{
   override void Move()
   {
      // add code to move left
      if(this.IsValid(MyClass myclass))
      {
         // move
      }
   }
}
abstract class NodeMovingRight : NodeMoving
{
   override void Move()
   {
      // add code to move right
      if(this.IsValid(MyClass myclass))
      {
         // move
      }
   }
}
// and then start modeling the different states
class RightFree : NodeMovingRight
{
   override bool IsValid(MyClass myclass)
   {
      // add condition to validate if the right is free
   }
}
// combining conditions
class PushedLeft : NodeMovingLeft
{
   override bool IsValid(MyClass myclass)
   {
      // code to determine if it has been pushed to the left
   }
}
class LeftFree : PushedLeft
{
   override bool IsValid(MyClass myclass)
   {
      // get condition to indicate if the left is free
      var currentCondition = GetCondition();
      // combining the conditions
      return currentCondition && base.IsValid(myClass);
   }
} 
```

您将需要添加所需的属性以计算条件并执行移动

值得注意的是这些方法有多小（是的，您将拥有比以前更多的方法），但它们可以很容易地单独测试

**编辑 2 - 添加优先级**

现在我们有一个简单的状态机，我们需要评估优先级，一种方法（我想听听改进它的方法）是使用优先级队列：

[http://www.codeproject.com/Articles/13295/A-Priority-Queue-in-C](http://www.codeproject.com/Articles/13295/A-Priority-Queue-in-C)

它看起来像：

```
 // you could place the priorities in a service to reuse it
    var priorities = new HashSet<NodeMoving>();

    priorities.Add(new RightExists());
    priorities.Add(new PushedLeft());

    var currentPosition = new MyClass { X = 1, Y = 2 };

    foreach (var priority in priorities)
    {
        if (priority.IsValid(currentPosition))
        {
            priority.Move();
            break;
        }
    }

    // output is: RightExists

    // now changing the priority order
    foreach (var priority in priorities.Reverse())
    {
        if (priority.IsValid(currentPosition))
        {
            priority.Move();
            break;
        }
    }

    // output is: PushedLeft 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-10T11:44:34.147

使用[状态](http://sourcemaking.com/design_patterns/state/c%2523)模式。绘制一个状态图，其中包含所有不同的状态以及它们之间允许的转换。当您编写代码时，每个节点都有一个状态子类。每个状态节点/类将决定输入并使驱动器适当地转换到下​​一个允许的状态。我认为您无法避免您提到的多个州。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-10T12:06:29.697

这行不通：

```
if(!leftExists) {
    if(rightExists) {
        GoRight();
    } else {
        // Panic!
    }
} else if(!rightExists) {
    GoLeft();
} else if(rightFree || leftFree && !(rightFree && leftFree)) {
    if(rightFree) {
        GoRight();   
    } else {
        GoLeft();
    }
} else if(pushedRight) {
    // Assumption: pushedLeft and pushedRight cannot both be true?
    GoRight();
} else {
    // PushedLeft == true, or we just prefer to move left by default
    GoLeft();
} 
```

现在，它是相似数量的代码，但不同之处在于我们已经消除了常见的条件，因此添加额外的条件不再影响每个分支 - 只需将其插入所需的优先级。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-10T16:29:10.950

我会坚持修改您的解决方案。

你有没有想过把 GoLeft 变成一个函数，它也返回 left 是否存在？除非它是一个复杂的函数，并且你经常调用它并且测试表明它需要优化，否则我会这样做。

如果你这样做，那么这将变成以下内容。这基本上就是你正在做的事情，但更容易阅读。

我敢肯定我会对此投反对票，因为它不是面向对象且不使用命令模式，但它确实回答了问题，并且易于阅读；）对于更复杂的问题，我会考虑使用这些答案，但对于这个特定问题，我会坚持一个简单的答案。

```
if(pushedLeft && leftFree && GoLeft())    ;
else if(pushedRight && rightFree && GoRight())    ;
else if(leftFree && GoLeft())    ;
else if(rightFree && GoRight())    ;
else if(pushedLeft && GoLeft())    ;
else if(pushedRight && GoRight())    ;
else if(GoLeft())    ;
else if(GoRight())    ;
// else do nothing... 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-10T11:57:29.387

为了解决这个问题，我建议采取以下措施：

1.  决定 if 语句中组合的哪些语句更重
2.  解开 if 语句，导致嵌套 if 语句，如

    ```
    if (moveRight) 
    {
        if (pushedleft)
        {
            /// ...
        }
    } 
    ```

3.  当你有这个时，开始将所有条件逻辑打包到方法中，例如 HandleMoveRight

4.  完成此操作后，您可以开始提取类，以命令模式结束。

现在您在添加额外功能时不再有任何问题，而且复杂性是平的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-10T12:08:03.910

我认为状态模式是@john2lob 推荐的正确方法。您还需要某种决策树方法来确定事件“推送”/“自由”/“存在”的动作的下一个转换。顺便说一句：“免费”和“存在”有什么区别？

# mysql - 以下 SQL zoo 查询显然是错误的

> ID：10968200
> 
> 赞同：0
> 
> 时间：2012-06-10T11:11:58.323
> 
> 标签：mysql

我对此页面[http://sqlzoo.net/3.htm](http://sqlzoo.net/3.htm)上的以下练习查询有疑问：

4d。按演员表大小的顺序列出 1978 年的电影。

我正在尝试进行查询：

```
SELECT DISTINCT(m1.title), COUNT(c1.actorid)
FROM ((movie AS m1 JOIN casting AS c1 ON m1.id=c1.movieid) JOIN actor AS a1 ON a1.id=c1.actorid)
WHERE m1.yr=1978
GROUP BY m1.title
ORDER BY COUNT(c1.actorid) DESC 
```

但它没有给出正确的答案，我不知道为什么。我错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T11:19:17.317

这应该这样做：

```
select m.title, count(c.actorid)
from movie m
  join casting c on c.movieid = m.id
where m.yr = 1978
group by m.title
order by 2 desc 
```

由于您不需要来自参与者的任何信息，因此您不需要在联接中包含该表。

顺便说一句：您对 distinct 的使用表明了两个误解：

1.  `distinct`不是**函数**。它总是对结果的*所有*列进行操作
2.  当你做 a 时`group by`，不需要也不同（因为 group by 已经只返回分组列的不同值）

# c - 调试内存损坏

> ID：10968202
> 
> 赞同：7
> 
> 时间：2012-06-10T11:12:19.160
> 
> 标签：c, visual-studio-2010, visual-c++, memory-management, memory-leaks

早些时候我在 C (visual studio) 中遇到了动态内存的问题。我有一个或多或少的工作程序在释放其中一个缓冲区时引发了运行时错误。这是一个明显的内存损坏，程序写在缓冲区的末尾。

我的问题是，追踪起来非常耗时。损坏后错误被抛出，我不得不手动调试整个运行以查找何时覆盖缓冲区结束。

是否有任何工具\方法可以帮助追踪此问题？如果程序会立即崩溃，我会更快地发现问题......

问题的一个例子：

```
int *pNum = malloc(10 * sizeof(int));

//                 ||
//                 \/    
for(int i = 0; i < 13; i++)
{
pNum[i] = 3;
}

// error....
free(pNum); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T18:14:55.473

我为此使用“数据断点”。在您的情况下，当程序崩溃时，它可能首先会这样抱怨：

> 00397848 处的堆块在 0039789C 处修改，请求大小为 4c

然后，再次启动程序，并在 address 处设置数据断点`0039789C`。当代码写入该地址时，执行将停止。我经常在这一点上立即发现错误。

如果您的程序重复分配和释放内存，并且它恰好位于这个确切的地址，只需禁用释放：

```
_CrtSetDbgFlag(_CrtSetDbgFlag(_CRTDBG_REPORT_FLAG) | _CRTDBG_DELAY_FREE_MEM_DF); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T04:59:31.200

我使用[pageheap](http://support.microsoft.com/kb/264471 "页堆")。这是一个来自 Microsoft 的工具，它改变了分配器的工作方式。使用 pageheap 时，当您调用 malloc 时，分配会向上舍入到最近的页面（内存块），并在其后放置一个设置为 no-read/no-write 的附加虚拟内存页面。您分配的动态内存是对齐的，以便缓冲区的末尾正好在虚拟页面之前的页面末尾之前。这样，如果您越过缓冲区的边缘，通常是一个字节，调试器就可以轻松捕获它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-10T12:18:33.457

> 是否有任何工具\方法可以帮助追踪此问题？

是的，这正是静态代码分析器试图定位的错误类型。例如`splint`/`PC-Lint`

以下是此类工具的列表： [http ://en.wikipedia.org/wiki/List_of_tools_for_static_code_analysis](http://en.wikipedia.org/wiki/List_of_tools_for_static_code_analysis)

**编辑：**在您的代码片段上尝试夹板时，我收到以下警告：

> main.c:9:2：可能的越界存储：pnum[i]

大概这个警告会帮助你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T08:08:49.153

我们的[CheckPointer](http://www.semanticdesigns.com/Products/MemorySafety)工具可以帮助查找内存管理错误。它适用于 GCC 3/4 和微软的 C 方言。

许多动态检查器仅捕获对象*外部*的访问，并且仅在对象是堆分配的情况下才捕获。CheckPointer 将*在*堆分配的对象中发现内存访问错误；无论字段类型如何，访问结构中字段的末尾都是非法的；大多数动态检查器无法检测到此类错误。它还将找到本地人边缘的访问权限。

# c# - 如何调用异步方法？

> ID：10968205
> 
> 赞同：0
> 
> 时间：2012-06-10T11:13:05.680
> 
> 标签：c#, windows-8, microsoft-metro, async-await

我正在尝试做一个简单的应用程序来获取 Windows 8 中的当前位置，但我找不到 await 关键字的正确语法。

错误说： 错误 1 ​​'await' 运算符只能在异步方法中使用。考虑使用“异步”修饰符标记此方法并将其返回类型更改为“任务”。

代码如下：

```
public MainPage()
        {
            this.InitializeComponent();

            TextBlock txt = new TextBlock();           
            var location = await InitializeLocationServices();
            txt.Text = location;

            Grid.SetRow(txt, 0);
            Grid.SetColumn(txt, 1);
            //InitializeLocationServices();
        }

        /// <summary>
        /// Invoked when this page is about to be displayed in a Frame.
        /// </summary>
        /// <param name="e">Event data that describes how this page was reached.  The Parameter
        /// property is typically used to configure the page.</param>
        protected override void OnNavigatedTo(NavigationEventArgs e)
        {
        }

        private async Task<string> InitializeLocationServices()
        {
            //Initialize geolocator object
            Geolocator geoLocator = new Geolocator();
            if (null != geoLocator)
                try
                {
                    //Try resolve the current location
                    var position = await geoLocator.GetGeopositionAsync();
                    if (null != position)
                    {
                        string city = position.CivicAddress.City;
                        string country = position.CivicAddress.Country;
                        string state = position.CivicAddress.State;
                        string zip = position.CivicAddress.PostalCode;
                        string msg = "I am located in " + country;
                        if (city.Length > 0)
                            msg += ", city of " + city;
                        if (state.Length > 0)
                            msg += ", " + state;
                        if (zip.Length > 0)
                            msg += " near zip code " + zip;
                        return msg;
                    }
                    return string.Empty;
                }
                catch (Exception)
                {
                    //Nothing to do - no GPS signal or some timeout occured.n .
                    return string.Empty;
                }
            return string.Empty;
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T11:52:31.923

所以它不起作用，因为你在构造函数中调用它。

我对 Win8 不熟悉，但从 OnNavigatedTo 的描述中可以看出“/// 属性通常用于配置页面”。

它可能是一个很好的初始化候选者。让我们试着把它移到那里：

```
protected async override void OnNavigatedTo(NavigationEventArgs e)
{

   TextBlock txt = new TextBlock();           
   var location = await InitializeLocationServices();
   txt.Text = location;

   Grid.SetRow(txt, 0);
   Grid.SetColumn(txt, 1);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T11:21:37.190

记住你的函数返回`Task<string>`了，那么你怎么会返回`string`两次呢？

```
return string.Empty; 
```

旁注。我无法理解这张支票

```
Geolocator geoLocator = new Geolocator();
        if (null != geoLocator) 
```

# azure - 一种通过 Azure API 了解 Blob 对象是否存在的方法

> ID：10968208
> 
> 赞同：0
> 
> 时间：2012-06-10T11:13:51.833
> 
> 标签：azure, azure-storage, azure-blob-storage

有没有办法在不获取整个 blob 对象列表的情况下知道容器内是否存在 blob 文件？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T11:23:02.017

如果您知道 blob 的地址，Azure SDK 的提示是首先构建 a `CloudBlockBlob`（或 a `CloudPageBlob`），然后调用`FetchAttributes`. `StorageClientException`如果找不到该 blob，此调用将抛出 a 。

从[`CloudBlobClient.GetBlockBlobReference`](http://msdn.microsoft.com/en-us/library/ee872383)文档中：

> FetchAttributes 方法执行 HEAD 请求以填充 blob 的属性和元数据，因此是确定 blob 是否存在的轻量级选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-04T13:11:08.063

从 Windows Azure 存储客户端库 2.0 开始，blob 包含方法 Exists()，例如：`blob.Exists()`

也是如此`BlobContainer`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T14:43:23.020

这是我正在使用的代码

```
 public static bool Exists(this CloudBlob blob)
    {
        try
        {   
            blob.FetchAttributes();
            return true;
        }
        catch (StorageClientException e)
        {
            if (e.ErrorCode == StorageErrorCode.ResourceNotFound)
            {
                return false;
            }
            else
            {
                throw;
            }
        }
    } 
```

# macros - DrRacket 中的 While 循环宏

> ID：10968212
> 
> 赞同：4
> 
> 时间：2012-06-10T11:14:07.660
> 
> 标签：macros, scheme, racket

我正在尝试在 DrRacket 中为 while 循环创建一个宏。这是我写的：

```
(require mzlib/defmacro)

(define-macro my-while
  (lambda (condition  body)
    (list 'local (list (list 'define (list 'while-loop)
                             (list 'if condition
                                   (list body (list 'while-loop))
                                   '(void))))
          '(while-loop))))

(define x 0)

(my-while (< x 10)
          (begin              
            (display x)
            (newline)
            (set! x (+ x 1)))) 
```

这个程序的输出是：

```
0
1
2
3
4
5
6
7
8
9
error:  procedure application: expected procedure, given: #<void>; arguments were: #<void> 
```

有人可以帮我弄这个吗？为什么这个宏不直接终止并返回 void。似乎当**条件**不成立时，系统会尝试将 void 作为参数应用到某个过程。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-10T14:15:03.683

哎哟：

1.  使用这种`while`循环风格会鼓励过度使用命令式编程。
2.  使用`define-macro`会创建不卫生的宏，这在 Scheme 中是一场噩梦。

虽然我不鼓励编写命令式循环宏，但供您参考，这里是`define-macro`同一宏的非版本：

```
(define-syntax-rule (my-while condition body ...)
  (let loop ()
    (when condition
      body ...
      (loop)))) 
```

它使用`syntax-rules`，它创建了卫生的宏，并且比你所拥有的更容易阅读。

* * *

现在，对于您的问题的实际答案，首先，让我们以更易读的方式写出您的原始宏：

```
(define-macro my-while
  (lambda (condition body)
    `(local ((define (while-loop)
               (if ,condition
                   (,body (while-loop))
                   (void))))
       (while-loop)))) 
```

一旦你用这种方式写出来，你就可以看到真正的问题在哪里：在该`(,body (while-loop))`行中，而应该是`(begin ,body (while-loop))`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T14:27:25.760

while 的另一个版本使用 do 循环：

```
(define-syntax while
  (syntax-rules ()
    ((while pred? stmt ...)
      (do () ((not pred?))
        stmt ...)))) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T21:29:59.013

当一个普通的旧函数可以使用时，为什么要使用宏？

```
;; fun-while : (-> Boolean) (-> Any) -> Void
(define (fun-while condition body)
  (when (condition)
    (body)
    (fun-while condition body)) 
```

当然，这需要您传入可以调用的可重复操作（这就是为什么`condition`和`body`在 的主体中被括号包围`fun-while`），因此如果您想要更漂亮的语法，您确实需要一个宏。但是一旦你有一个具有所需行为的函数，在这种情况下加一些糖是微不足道的：

```
(define-syntax-rule (my-while condition body ...)
   (fun-while (lambda () condition)
              (lambda () body ...))) 
```

现在，正如已经说过的，这鼓励了命令式风格，这是不受欢迎的。而不是突变，而是尝试使状态显式：

```
;; pure-while : forall State.
;;    (State -> Boolean)   ; the "condition" that inspects the state
;;    (State -> State)     ; the "body" that moves from one state to the next
;;    ->   ; curried
;;    State                ; the current state
;; -> State                ; produces the ending state
(define ((pure-while condition make-next) current-state)
   (if (condition current-state)
       (pure-while condition make-next (make-next current-state))
       current-state)) 
```

你会注意到前两个参数现在是函数 from `State`to something，并且应用到 2 个参数的结果也是一个函数 from `State -> State`。这是一个反复出现的模式，作为 Haskeller，我称之为“状态单子”。不过，将糖放在这个概念之上的讨论有点超出了这个对话的范围，所以我就停在那里。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-25T17:18:17.513

因为已经有一段时间了：

`while`Racket 6.0的宏

```
#lang racket

(define-syntax while
  (syntax-rules ()
    ((_ pred? stmt ...)
     (do () ((not pred?))
      stmt ...)))) 
```

# codeigniter - 同一文件夹中的多个框架的 Codeigniter 会话问题

> ID：10968216
> 
> 赞同：1
> 
> 时间：2012-06-10T11:14:39.207
> 
> 标签：codeigniter, session, frameworks

我有一个小问题。

我在我的文件夹中安装了 codeigniter，在同一文件夹 ( )`/folder/`的另一个地图中安装了另一个 codeigniter 。`/folder/new_codeigniter/`

当我登录`/folder/`框架并重新加载页面时`/folder/new_codeigniter/`，我将从`/folder/`框架中注销（它们都在同一个数据库上工作）。

有谁知道这个的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T11:42:09.290

确保 $config['sess_cookie_name'] 和 $config['sess_table_name'] 在每个应用程序上都不同。

另外 - 使用 $config['cookie_prefix'] 来避免冲突。

最后，您可能需要使用 $config['cookie_domain'] 来解决问题。

# sql-server - 升级到 SQL Server 2012 后，Tomcat 无法使用 jdbc 打开数据库

> ID：10968219
> 
> 赞同：0
> 
> 时间：2012-06-10T11:15:11.747
> 
> 标签：sql-server, jdbc, sql-server-2008-r2, tomcat7

当它是 SQL Server 2008 R2 时，我成功连接到我的数据库。但是升级到 SQL Server 2012 后，我的 java 代码中出现以下错误我使用的应用程序服务器是 Tomcat7

错误如下：

```
Jun 10, 2012 1:56:10 PM org.apache.naming.NamingContext lookup
WARNING: Unexpected exception resolving reference
com.microsoft.sqlserver.jdbc.SQLServerException: Cannot open database "MyDB" requested by the login. The login failed.
    at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(SQLServerException.java:197)
    at com.microsoft.sqlserver.jdbc.TDSTokenHandler.onEOF(tdsparser.java:246)
    at com.microsoft.sqlserver.jdbc.TDSParser.parse(tdsparser.java:83) 
```

context.xml 中的连接字符串是

```
<Resource name="jdbc/theDB" type="javax.sql.DataSource" auth="Container"
            factory="org.apache.tomcat.jdbc.pool.DataSourceFactory"
            driverClassName="com.microsoft.sqlserver.jdbc.SQLServerDriver" initialSize="30"
            maxActive="100"
        url="jdbc:sqlserver://localhost:1433;databaseName=MyDB;integratedSecurity=true"
            /> 
```

以下在 web.xml 中

```
<resource-ref>
<description>My Database</description>
<res-ref-name>jdbc/theDB</res-ref-name>
<res-type>javax.sql.DataSource</res-type>
<res-auth>Container</res-auth>
</resource-ref> 
```

我可以通过在 Eclipse 中打开数据连接来成功连接到数据库，事实上，生成的连接字符串与我在上面重现的 context.xml 中的 url 相同。

有人有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T12:45:57.367

确保运行应用程序服务器的用户对数据库具有足够的权限。

# .net - 运行同步 TCP 的并发线程

> ID：10968220
> 
> 赞同：0
> 
> 时间：2012-06-10T11:15:26.873
> 
> 标签：.net, concurrency, tcp

我正在运行很久以前用 WinForm 编写的旧性能测试客户端。

我们有许多设备使用与服务器的同步 TCP 连接。性能测试旨在通过​​激活模拟单个设备的 dll 来模拟多个此类设备同时工作的工作。

到目前为止它工作正常，但是现在当我增加并发线程的数量（到 150）时，我意识到应用程序不能产生这么多线程。

在阅读[了这个](https://stackoverflow.com/questions/6023264/high-performance-tcp-server-in-c-sharp)和[这个](http://bytes.com/topic/c-sharp/answers/760091-max-tcp-client-connections)之后，我了解到性能应用程序的工作方式（每个线程的连接）是错误的，它应该是异步的。但现在有办法改变我正在调用的 dll。

有什么办法可以在当前条件下使用更多线程，即保持 TCP 同步？

# java - Amazon EC2 服务器 TCP 套接字连接

> ID：10968230
> 
> 赞同：4
> 
> 时间：2012-06-10T11:17:15.790
> 
> 标签：java, networking, network-programming, amazon-ec2

我使用 Eclipse 开发了一个 Java 服务器，它接受来自 android 客户端的 TCP 套接字连接，执行一些计算，并使用这个套接字将结果返回给 android 手机。我在 Wi-Fi 上尝试过。

我现在想将 Java 服务器迁移到云端——基本上是亚马逊 EC2。这可能吗？我只是使用一个简单的 tcp 套接字连接。我检查过，找不到一个例子，但遇到了“弹性豆茎”。任何帮助表示赞赏，可能是带有此类示例的链接或教程。

我可以将我的 java 项目转换为 .war 并使用它，还是可以在云上安装 eclipse 并像在本地一样运行它？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-12T12:08:02.250

这绝对是可能的。而且您不必将您的项目转换为 .war，除非您愿意。你所要做的就是：

*   选择您要使用的 Amazon 映像 (AMI) - Amazon Linux 是一个不错的起点，但还有很多其他选项，包括 Ubuntu 和 Windows。

*   设置安全组 - 您需要为服务器的端口号设置传入规则。从 Amazon 基于 Web 的控制台很容易做到这一点。

*   启动一台机器并将其分配给您创建的安全组。同样，这很容易从亚马逊网络控制台完成。

机器启动后，登录（Linux 使用 ssh 或 Windows 使用远程桌面）并安装服务器。

需要记住的几件事：

*   由于您现在在公共服务器上运行，因此您的服务器迟早会受到攻击。每个人都会受到攻击。如果您打开的只是您的单个应用程序端口，请确保它是安全的。

*   亚马逊服务器具有私有和公共 IP。您的客户端应用程序将连接到公共 IP。

*   服务器可能会出现故障，新服务器会获得新的公共 IP！你需要为此做好准备。要么使客户端中的 IP 可配置，要么查看 Amazon Elastic IP 或动态 DNS 之类的东西。

# javascript - 如何不更改网页 URL？

> ID：10968235
> 
> 赞同：1
> 
> 时间：2012-06-10T11:17:51.000
> 
> 标签：javascript, jquery, jquery-mobile

我需要使用 jQuery mobile 设置相对于当前页面 url 的按钮的 href 值。

所以我天真地写了以下代码：

```
var path = window.location;
path = path.replace( "shop","edit" );
$("#btnEdit").setAttr( "href", path ); 
```

页面的 url 是*http://mysite/shop/1*并且按钮的 href 应该设置为*http://mysite/edit/1*。

当此代码插入到我的“pageinit”处理程序的顶部时，我看到浏览器（firefox 和 chrome）位置栏中的 url 更改为*http://mysite/shop/shop*并且页面显然已重新加载，所以我得到一个 404 错误，因为它必须在 /shop/ 之后有一个数字，并且它的值应该是 1。

即使我将其注释掉，重新启动 Web 服务器，浏览器也会在其 url 位置字段中自动将*http://mysite/shop/1*替换为*http://mysite/shop/shop 。*？！

我必须评论这些说明，重新启动服务器以及避免此 url 替换的任何内容。

到底是怎么回事 ？如何在没有这种讨厌的副作用的情况下获取页面位置 url 并设置我的按钮 href 值？

* * *

**编辑1：**

1.  我确实应该使用**.attr**或**.prop**而不是不存在的 .setAttr 。
2.  url 更改仅在 chrome 和 firefox 中显示，而不在 iPad、Android 或 IE9 中显示。*运行chrome调试工具，在matches.call( document.documentElement, "[test!='']:sizzle" );*指令处好像有jQuery抛出的DOMException . 我不知道这意味着什么以及为什么它会导致使用不同的 url 重新加载页面。

* * *

**编辑2：**

1.  我使用 fapws 作为 Web 服务器，使用 mako 作为模板。在我擦除了 mako 生成的缓存 python 文件后，url 更改消失了。？！
2.  按照建议，我应该使用**.attr**和**window.location.href**。这有效，并且按钮的 href 属性设置为正确的值。
3.  尽管它仍然无法正常工作。我现在看到了一种新的意外和不良行为。单击按钮时，位置栏中的 url 更改为*http://mysite/edit/1*，它执行商店页面的 pageinit (?!)，然后加载编辑页面而不执行其 pageinit 事件。

* * *

**解决方案：**

在 html 文件中，我用默认的 href 值定义了这个按钮，没有什么特别的：

```
<a href="#" data-role="button" data-icon="pencil" id="btnEdit"> Edit </a> 
```

在脚本文件中，更准确地说是在 $(document).on('pageinit',...) 的处理程序中，我现在有了这段代码，它设置 href 值，但也将 rel="external" 属性添加到按钮.

```
var path = window.location.href;
path = path.replace( "shop","edit" );
$("#btnEdit").attr( "href", path ).attr( "rel", "external" ); 
```

页面不再自动重新加载，并且加载的奇怪行为已被删除。这是因为 jQuery Mobile 中 <a> 标记的默认行为是使用 ajax 加载目标页面，而不是使用正常的完整页面加载。属性 rel="external" 禁用此行为，然后引用的页面正常完全加载。此行为在[此处](http://jquerymobile.com/demos/1.1.0/docs/pages/page-scripting.html)的 jQM 文档中进行了描述。

*注意*：尽管许多答案具体有助于帮助我解决这个问题，但我检查了 Mad Man Moon 的答案，因为他非常有帮助并且得分较少。如果可以检查多个答案，我会做到的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T11:20:10.220

使用[`attr`](http://api.jquery.com/attr/)代替`setAttr` *（除非您不使用自定义函数或某些框架/库）*

```
$("#btnEdit").attr( "href", path ); 
```

至于 URL 自动更改，请查看您是否在`.htaccess`文件中设置了 URL 重写，或者是否有可能更改其他文件中的 URL。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T12:14:56.580

> 即使我**将其**注释掉，重新启动 Web 服务器，浏览器也会在其 url 位置字段中自动将 ~/shop/1 替换为 ~/shop/shop。？！
> 
> 我必须评论这些说明，重新启动服务器以及避免此 url 替换的任何内容。

1.  我有点困惑。您要评论的“它”是什么？
2.  即使您的替换是针对您对 window.location 的变量引用执行的，它也应该将“shop”替换为“edit”，因此重定向应该是“mysite/edit/1”（除非 js 正则表达式引擎正在处理1 作为捕获指数？）
3.  根据您的 RESTful 样式 URL，我怀疑您正在使用某种服务器端 MVC 框架。如果是这样，重定向很可能是服务器端问题，与替换无关。
4.  最后，不要设置 path = window.location，而是将其设置为**window.location.href**。window.location 是包含 URI 属性（href、搜索、哈希等）的**对象。**window.location.href 是完整 URL 的字符串属性。

编辑：我决定自己做一个小测试，并确认问题在于您正在设置 path = window.location。设置**path = window.location.href**并且您的代码将起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T11:24:22.103

试试这个

```
var path = window.location;
path = path.replace( "shop","edit" );
$("#btnEdit").prop( "href", path ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-10T11:47:24.027

您的问题是它`path`充当 的别名`window.location`，因此`path.replace()`它`window.location.replace()`会触发重定向。

解决方案：`.toString()`在末尾添加`window.location`以获取字符串值而不是对象。`var path = window.location.toString()`

# java - 使用梳状滤波器检测基频

> ID：10968240
> 
> 赞同：1
> 
> 时间：2012-06-10T11:18:59.773
> 
> 标签：java, audio

我需要使用梳状滤波器/变换来检测 java 中 wav 文件的基频。我还需要实现 ZCR，但这很容易。

现在我有这个：

```
 int best = 0, best_step = 0;
            for (int step = 3; step < 400; ++step) {
                int sum = 0;
                for (i = 1; i < 10 && i * step < spectrum.length; ++i) {
                    for (int di = 0; di < i; ++di) {
                        sum += spectrum[i * step + di] / i;
                    }
                }

                sum *= 100;
                comb.add(sum);
            }
            int sum = 0;

            for (i = 0; i < comb.size(); ++i) {
                sum = comb.get(i); // 3 * comb[i] - comb[i-1] - comb[i+1];
                 System.out.println(i + " - " + sum);
                 if (sum > best) {
                    best_step = i;
                    best = sum;
                }
            } 
```

我的问题是这段代码检测到了错误的频率。;(我已经搜索了算法/实现（任何语言），但没有找到任何东西。

注意，我不能使用自相关等。它必须是梳状过滤。

**编辑：**我的代码的更多解释：

我加载一个 wav 文件并将帧放入数组帧。然后我在它上面做 fft 并有一个复杂的数组（名为 widmo）（处理复数的简单结构）。

现在我将复数的 abs 放入数组谱中：

```
double[] spectrum = new double[widmo.length];

            for (i = 0; i + 1 < widmo.length; ++i) {
                spectrum[i] = widmo[i].abs();
            }

            ArrayList<Integer> comb = new ArrayList<Integer>();
            int best = 0, best_step = 0;
            for (int step = 3; step < 400; ++step) {
                int sum = 0;
                for (i = 1; i < 10 && i * step < spectrum.length; ++i) {
                    for (int di = 0; di < i; ++di) {
                        sum += spectrum[i * step + di] / i;
                    }
                }

                // sum /= step + 100; // ta linijka pozwala usunÄ…Ä‡ sporo
                // niespodziewanych skokĂłw czÄ™stotliwoĹ›ci

                sum *= 100;
                comb.add(sum);
            }
            int sum = 0;

            for (i = 0; i < comb.size(); ++i) {
                sum = comb.get(i); // 3 * comb[i] - comb[i-1] - comb[i+1];
                // ctx.fillRect(i, canvas.height, 1, -sum);
                System.out.println(i + " - " + sum);
                // tmp.add(new freqTime(sum,));
                if (sum > best) {
                    best_step = i;
                    best = sum;
                }
            }
            System.out.println();
            System.out.println(best_step);
            System.out.println(4 * 44100);
            System.out.println((frames.length / numChanels));
            System.out.println(best_step * 44100
                    / (frames.length / numChanels)); 
```

最后一个`println`应该显示我的基频，但它没有。

我从我的朋友那里得到了这个 javascript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T18:34:22.257

我想通了（我认为：P）。最后 println 给出基本频率 :)。也许有人会需要它甚至改进它:)

```
ArrayList<double[]> okna = new ArrayList<>();
            ArrayList<freqTime> lista = new ArrayList<freqTime>();

            int po2 = (int) Math.pow(2,
                    Integer.parseInt((String) potega2Input.getText()));

            po2 /= 2;
            double[] triangles = new double[po2];
            double maxWykres = 0;
            int licznik = 0;
            int licznik2 = 0;
            int T = frames.length;

            boolean wykresFlaga = false;

            for (int k = 0; k < T; k += po2) {

                licznik = 0;
                licznik2 = 0;
                double[] tmp = new double[po2];

                Complex[] zespolone = new Complex[po2];

                for (int i = k; i < k + po2; i++) {

                    if (i < T) {
                        tmp[licznik] = frames[i];
                        zespolone[licznik] = new Complex(frames[i], 0);
                        licznik2 = licznik;
                    } else {
                        tmp[licznik] = frames[licznik2];
                        zespolone[licznik] = zespolone[licznik2];

                    }
                    licznik++;
                }

                okna.add(tmp);

                FFT fft = new FFT();

                zespolone = fft.fft(zespolone);

                double maxF = 0;
                double maxFI = 0;

                double maxH = findMaxComp(zespolone);
                double[] doWykresu = new double[zespolone.length];
                for (int a = 2; a < 100; a++) {

                    for (int i = 0; i < po2; i++) {
                        doWykresu[i] = zespolone[i].abs();
                        triangles[i] =  Math.abs(i % (2 * a) - a)
                                * (maxH) / a;

                        // triangles[i] = Math.abs(i % (2 * a) - a) * (maxH)
                        // / a;

                    }

                    double sumT = 0;
                    for (int i = 0; i < po2 / 2; i++) {

                        sumT += triangles[i] * doWykresu[i];
                    }

                    if (sumT > maxF) {
                        maxF = sumT;
                        maxFI = a;
                    }

                }
                //
                // maxFI /= 2;
                //
                if (wykresFlaga == false) {
                    maxWykres = maxH;
                }
                for (int i = 0; i < po2; i++) {
                    doWykresu[i] = zespolone[i].abs();
                    triangles[i] =  Math.abs(i % (2 * maxFI) - maxFI)
                            * (maxWykres) / maxFI;

                }
                if (wykresFlaga == false) {
                    System.out.println("Max w widmie: " + maxWykres);
                    new Wykres(doWykresu, 1, triangles);
                    wykresFlaga = true;
                }
                // System.out.println((2 * 44100 / po2) * maxFI);
                System.out.println((float) (44100 / (float) po2)
                        * 2*(float) maxFI + " Znalzione a: " + maxFI);

                lista.add(new freqTime(
                        (int) ((float) (44100 / (float) po2) *2* (float) maxFI),
                        (double) ((double) po2 / 44100)));

                /*
                 * System.out.println((44100 / po2) * maxFI + " " + maxFI +
                 * " " + maxFI / 44100 + " " + 44100 / (maxFI / po2 * 44100)
                 * + " " + 44100 * maxFI / T);
                 */
                // System.out.println(zespolone[(int) maxFI/2].abs());
            } 
```

# c# - WPF子窗口未打开windowstate正常

> ID：10968247
> 
> 赞同：-1
> 
> 时间：2012-06-10T11:20:31.747
> 
> 标签：c#, wpf, window, system-tray

我有一个 WPF 程序，我希望大部分时间都将其最小化到系统托盘..

但是，当它最小化到系统托盘时，收到消息时打开的子窗口不会在正常窗口状态下打开，而是在系统托盘中最小化打开。

我努力了

```
msgWindow.WindowState = System.Windows.WindowState.Normal;
msgWindow.Show(); 
```

但这不起作用..我可以通过这样做来解决它

```
this.WindowState = System.Windows.WindowState.Normal;
msgWindow.Show(); 
```

但是我不希望每次弹出消息时都打开主窗口..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T12:40:05.890

请试试这个它会帮助你。

```
Window2 win2 = new Window2();//here i established the child window named as Window2
win2.Show(); 
```

上面的代码同时显示两个窗口（主窗口和子窗口）。

```
 Window2 win2 = new Window2();//here i established the child window named as Window2
 win2.Show();
 this.Close(); 
```

上面的代码只显示子窗口。

# arrays - 查找数字数组中两个最近元素之间的距离

> ID：10968248
> 
> 赞同：0
> 
> 时间：2012-06-10T11:20:55.147
> 
> 标签：arrays

com论坛，

我正在尝试在下面用 C++ 编译这个算法。请问有什么想法吗？

```
// Find the distance between the two closest elements in an array of numbers.
// Minimum Distance
// dmin = infinity;
// for i = (i to n - 2) do
// for j = i + 1 to n - 1 do
// temp = A[i] - A[j]
// if temp < dmin;
// dmin = temp;
// return dmin; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T11:27:22.803

我建议您不要使用该算法（`O(n^2)`），而是对数字进行排序，然后进行线性扫描（`O(nlogn)`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T12:31:49.060

是的，phant0m 是正确的，但是排序算法本身会使用循环。

排序算法通常以它们的效率来判断。在这种情况下，效率是指算法效率随着输入大小的增长而变大，并且通常基于要排序的元素数量。大多数使用的算法的算法效率为 O(n^2) 或 O(n*log(n))。(http://www.cprogramming.com/tutorial/computersciencetheory/sortcomp.html)

除非数组已经排序，或者您以后需要排序版本，或者您的数组可能变得非常大，否则您最好“咬紧牙关”并坚持原来的方法。

# java - 按键部分工作

> ID：10968249
> 
> 赞同：0
> 
> 时间：2012-06-10T11:21:03.857
> 
> 标签：java, c++, keypress

我一直在尝试做某种自动点击器，并在 java 中有以下代码：

```
import java.awt.event.*;
import java.awt.*;

class keyStroke {
    public void Execute() throws AWTException {
        int n = 0;
        while(n < 100){
            Robot r = new Robot();
            r.delay(1000);
            r.keyPress(KeyEvent.VK_1);
            r.keyRelease(KeyEvent.VK_1);
            ++n;
        }
    }
} 
```

单击键 1 可以正常工作，但是在某些游戏中不起作用。

它看起来只在聊天框上工作并访问它（输入键），但除此之外，没有其他工作（如使用技能或移动）。

然后，我决定也尝试使用 C++，使用以下代码

```
#include <iostream>
#include <windows.h>
#include <cstdlib>
using namespace std;

void SendKey (char Vk){
    char VkKey = VkKeyScan(Vk);
    keybd_event(VkKey, 0, 0, 0); 
    keybd_event(VkKey, 0, KEYEVENTF_KEYUP, 0);
}

int main(){
    while(true){
        SendKey('1');
        Sleep(1000);
    }
} 
```

同样的事情也会发生。

你在做什么错？如果按键不适用于这种情况，我必须找到其他东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T12:01:19.137

我从经验中知道某些游戏输入不使用基于事件的结构。如果按键被按下，有些游戏每帧只检查一次。这意味着您在那一刻按下该键的机会为零。

诸如罗技键盘脚本工具之类的脚本实用程序面临着类似的问题，这有助于在按下和发布之间设置延迟。

另外：聊天窗口通常必须使用输入事件，因为如果每帧只注册一次按键，则几乎不可能打字。

# ruby-on-rails - 如何跨页面加载缓存查询？

> ID：10968255
> 
> 赞同：0
> 
> 时间：2012-06-10T11:22:38.223
> 
> 标签：ruby-on-rails

在 Rails 3.2 应用程序中，我在 application_controller.rb 中定义了许多查询。查询返回的数据将很少更改。

查看日志，这些查询似乎在每次页面加载时运行。

如何缓存这些数组，以减少刷新频率，有助于增加页面加载时间。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T11:25:37.080

通过使用 Memcached 或 Redis 之类的东西？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T00:09:11.440

有几种方法。最简单的是，您可以跨请求将查询缓存在某些实例变量中，如下所示：

```
@variable ||= Model.query 
```

这将使它们免于在每个请求上加载。但是，如果它是非常复杂的东西，您可能会考虑将其放入 Redis 中（这对于这样的事情非常有用）。

通常你不想做这样的事情。如果您经常做这样的事情，您可能需要重新考虑应用程序的架构。

# cakephp-2.0 - CakePhp 刷新页面

> ID：10968258
> 
> 赞同：3
> 
> 时间：2012-06-10T11:23:09.280
> 
> 标签：cakephp-2.0

我在 Cakephp 中遇到以下问题：我制作了一个 CMS 来用 CakePhp 编辑网站的内容。现在，当我更改表单中的内容并单击“保存”时，他再次显示表单更改之前的数据。在数据库中，一切都保存得很好，如果我刷新页面，他也会显示正确的数据。

我知道我可以呈现一个新页面或重定向到另一个页面，但我喜欢只使用 setFlash 显示一条消息，仅此而已。有人可以帮我吗？

提前致谢

亚伦

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-12T11:49:58.547

更新：检查下面的 Justin T. 解决方案。

您可以重定向到同一页面：

设置您的闪信：

```
$this->setFlash('blablablabla'); 
```

和

```
return $this->redirect($this->here); //cake 1.3 
```

或者

```
return $this->redirect($this->request->here); // cake 2.x 
```

或者

```
return $this->redirect(['controller' => 'MyController', 'action' => 'methodOfController']); // cake3.X 
```

重定向。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T08:57:07.650

使用[新方法 flash()](http://book.cakephp.org/2.0/en/controllers.html#Controller%3a%3aflash)您可以设置消息**并**以相同的方法重定向。

*这是我所知道的最优雅的方式*，它是这样的：

```
<?php
public function post() {
   // process content here...

   // redirects the user immediately with a nice message
   $this->flash('Your post has been updated, thanks', 'index');

} 
```

希望这可以帮助 ！

# c++ - Ubuntu上的QT程序

> ID：10968263
> 
> 赞同：-3
> 
> 时间：2012-06-10T11:24:15.273
> 
> 标签：c++, qt, ubuntu

我在 Windows XP 上制作了一个 qt 程序，它运行良好。现在，当我尝试在 Ubuntu 10.10 上运行该程序时，它给了我错误“不支持”。我已经包含了所有必需的 QT 库和使程序可移植所需的 .dll 文件都存在于程序的文件夹中，但它没有用。我使用的是 QT 4.7。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T11:49:52.143

您必须在 linux 下使用 QT Creator 重新编译它。如果它应该是可移植的，请注意 32 位和 64 位。QT 通常是跨平台的，但您的 Windows 可执行文件不是。

# objective-c - 在调试器中观察 NSString 长度

> ID：10968271
> 
> 赞同：6
> 
> 时间：2012-06-10T11:25:03.263
> 
> 标签：objective-c, xcode, debugging

我有一个名为 的 NSString 变量`myText`。如何`[myText length]`在 xcode 调试器中观看？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T11:34:46.677

您可以使用调试器控制台来评估 Xcode 中对象的属性，调试器输出视图实际上也用作输入。

![示例输出](../Images/719313703b5bc57f7f246caa6fad7e12.png)

显然首先你必须打一个断点......

它实际上适用于 GDB 和 LLDB，您必须在输出控制台中输入：

```
print (int)[myText length] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T11:54:49.217

除了@aleroot 的解决方案，您还可以使用调试器的变量视图。您可以右键单击视图并选择“添加表达式”并输入您想要监控的任何内容。相比@aleroot 的解决方案有点麻烦，但是这种方法的优点是下次遇到相同的断点时会自动再次显示。

![在此处输入图像描述](../Images/dd4cca6643a69c586d84cc7cf502ec00.png)

# java - 在文本文件中查找数据？

> ID：10968275
> 
> 赞同：0
> 
> 时间：2012-06-10T11:25:14.200
> 
> 标签：java

我想要某种包含文本的文件，有点像这样：

```
John.file: 
Name= John
Age = 333 
```

在我的程序中，我想以某种方式用这些数据创建一个 Person，有点像：

```
Person p = new Person(John.file); 
```

在文件中查找数据以便我可以添加诸如“333”到 Person p 的年龄变量的一些好的替代方法是什么？除非有其他选择，否则我正在考虑尝试 regex api！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T11:38:35.440

您可以使用作为 JDK 一部分的属性文件功能来完成您想要做的事情。有关更多信息，请参阅[文档](http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html)。

```
Properties properties = new Properties();
try {
    properties.load(new FileInputStream("/my/path/John.properties"));
} catch (IOException e) {
    ...
}
System.out.println(properties.getProperty("Name")); // Prints John 
```

为了完整起见，这里是 /my/path/John.properties 的内容。

```
Name=John
Age=333 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T11:29:41.733

绝对为此使用 XML。您可以使用[JAXB](http://www.oracle.com/technetwork/articles/javase/index-140168.html)将 XML 反序列化为 Java 类。对于像您描述的那样的简单类，这将是一件小事。XML 看起来像：

```
<Person>
<Name>John</Name>
<Age>333</Age>
</Person> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-10T11:34:00.840

XML、[JSON](http://json.org/java/)、自定义属性文件或您自己的解析器，可能基于[Knuth-Morris-Pratt](http://en.wikipedia.org/wiki/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm)？

# locking - 是否可以在没有竞争条件的情况下在 writelocked 和 readlocked 状态之间切换 pthread_rwlock？

> ID：10968278
> 
> 赞同：2
> 
> 时间：2012-06-10T11:26:22.600
> 
> 标签：locking, pthreads

如果我有一个线程首先操作数据结构并因此在其上有一个 pthread 写锁，我是否可以让该线程将锁更改为读锁状态而不会出现可能允许另一个线程在某个时间点获取写锁的竞争条件开关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T20:55:28.803

不幸的是，据我所知，pthreads 标准不允许在`pthread_rwlock_t`. 一些 pthreads 实现可能允许扩展，让您在不释放锁的情况下从持有写入器锁转换为持有读取器锁，但这超出了 pthreads 的 SuS / POSIX 规范的范围。而且我不相信最常见的情况，Linux/glibc pthreads 实现允许这种操作。

所以你的问题的简短回答是“不”。您需要在 pthread_mutex_t/pthread_cond_t 之上实现自己的读取器/写入器锁才能获得所需的行为。

# javascript - 登录控制错误

> ID：10968279
> 
> 赞同：3
> 
> 时间：2012-06-10T11:26:51.673
> 
> 标签：javascript, jquery, asp.net, asp.net-membership, login-control

当我将登录控件添加到页面时，出现以下错误。你能帮帮我吗？

> “WebForms UnobtrusiveValidationMode 需要 'jquery' 的 ScriptResourceMapping。请添加一个名为 jquery（区分大小写）的 ScriptResourceMapping。”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T01:42:30.047

**WebForms UnobtrusiveValidationMode 需要 'jquery' 的 ScriptResourceMapping。请添加一个名为 jquery（区分大小写）的 ScriptResourceMapping。**

当您在联系登录页面时收到此类错误时，请执行以下步骤：

1.转到“web.config”。

1.  `<add key="ValidationSettings:UnobtrusiveValidationMode" value="WebForms"/>` 在 web.config 中找到此代码。

2.  将 value="WebForms" 更改为 value="none"。

3.  现在您打开它会打开的 login.aspx 文件。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-22T15:26:10.850

附带说明：如果您使用 Visual Studio 并在从空站点启动时遇到此问题，则您的配置文件可能没有这些行。然后，您必须添加`<appSettings>`元素并将线条放在标签内。例子：

```
<appSettings>
    <add key="ValidationSettings:UnobtrusiveValidationMode" value="None" />
</appSettings> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-10T11:29:47.653

你需要在你的项目中有 jQuery 并且在 Global.asax 中有这样的东西来正确注册 jQuery：

```
 ScriptManager.ScriptResourceMapping.AddDefinition("jquery", new ScriptResourceDefinition {
            Path = "~/scripts/jquery-1.4.1.min.js",
            DebugPath = "~/scripts/jquery-1.4.1.js",
            CdnPath = "http://ajax.microsoft.com/ajax/jQuery/jquery-1.4.1.min.js",
            CdnDebugPath = "http://ajax.microsoft.com/ajax/jQuery/jquery-1.4.1.js"
        }); 
```

用您正在使用的版本替换 jQuery 的版本。您还可以通过删除以下行在 web.config 中禁用此新功能：

```
<add key="ValidationSettings:UnobtrusiveValidationMode" value="WebForms" /> 
```

[http://connect.microsoft.com/VisualStudio/feedback/details/735928/in-asp-net-web-application-visual-basic-the-requiredfieldvalidator-doest-work](http://connect.microsoft.com/VisualStudio/feedback/details/735928/in-asp-net-web-application-visual-basic-the-requiredfieldvalidator-doest-work)

**编辑：**

从下面的评论中，如果 ValidationSettings:UnobtrusiveValidationMode 设置为`WebForms`而不是删除它，您可以将值更改`None`为如下所示：

```
<add key="ValidationSettings:UnobtrusiveValidationMode" value="None"/> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-09T18:38:14.243

为了澄清，如果其他人有这个问题，我必须添加以下内容

```
<appSettings>
    <add key="ValidationSettings:UnobtrusiveValidationMode" value="None" />
</appSettings> 
```

在配置标签内，但在 system.web 标签之外（之前）。我正在使用 VS 2012 for Web (Express)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-26T12:48:24.713

或者你可以安装 Nuget 包

> AspNet.ScriptManager.jQuery

# c++ - String.at() 返回时髦的数字

> ID：10968291
> 
> 赞同：1
> 
> 时间：2012-06-10T11:29:26.953
> 
> 标签：c++

当我试图运行这段代码时，我遇到了一些我无法查明原因的故障。前两个“cout”行显示数字 7 和 3，但是，最后一个“cout”行通常显示 50-60 之间的数字（在我运行它的那一刻，我得到 55 和 51，这似乎以某种方式关联位与我试图阅读的数字）。据我从谷歌搜索和手头的书籍中可以看出，这应该是有效的，但显然我缺少一些东西。感谢您的时间。

```
#include <iostream>
#include <string>
using namespace std;

int main()
{
    string text = "73";
    int one=0, two=0;

    cout << text.at(0) << endl;
    cout << text.at(1) << endl;
    one = text.at(0);
    two = text.at(1);
    cout << one << endl << two << endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T11:36:04.597

程序正常运行：`text.at()`返回 a `char`，您将其隐式转换为`int`. 然后打印该 int 的值，分别为“7”的 55 和“3”的 51（看[这里](http://www.asciitable.com/)）。

# django - 如何使用动态 CSS 渲染模板？

> ID：10968295
> 
> 赞同：7
> 
> 时间：2012-06-10T11:30:05.550
> 
> 标签：django, django-templates, dynamic-css

我想在视图中创建一个动态 CSS 文件，然后渲染一个加载该 CSS 文件的模板。根据赋予视图的参数，每次调用视图时，CSS 可能在某些位置具有不同的值。我该怎么做呢？（我应该补充一点，我没有用 Python/Django 编写文件的经验。）

这是我认为它应该如何工作的简化示例：

```
# urls.py
urlpatterns = patterns('',
    (r'^myview/(?P<color>[0-9a-f]{6})/$', create_css_file),
)

# views.py
def create_css_file(request, color):
    raw = "@charset 'UTF-8';\n\n"
    raw += "body {\n"
    raw += "  color: #" + color + ";\n"
    raw += "}\n\n"

    f = open('mydynamic.css', 'r+')
    f.write(raw)

    return render_to_response('mytemplate.html', locals())

# mytemplate.html
{% extends "base.html" %}
{% block head %}
    <link rel="stylesheet" media="screen" href="{{ f.name }}" />
{% endblock %} 
```

出于某种原因，这不起作用，尽管在生成的 HTML 页面的源代码中，看起来 CSS 文件已正确加载。`f`偶数正确到达模板，因为当我将行更改为时我可以看到它的`<link>...`内容

```
<link rel="stylesheet" media="screen" href="{{ f }}" /> 
```

（`f`而不是`f.name`）。但是 HTML 是在没有所需颜色设置的情况下呈现的。谁能告诉我这是为什么？

我怀疑一些路径问题，我玩弄了很多不同的路径，但无济于事。

请不要建议我准备几个硬编码的 CSS 文件（正如我在类似问题的答案中发现的那样），因为会有数百种可能性。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-10T15:43:16.007

如果您绝对需要，您可以动态创建一个 css 文件。

您可以在 urls.py 中创建一个条目。您可以将 url 命名为任何您想要的名称，这对于外界来说可能看起来像一个静态的 .css 文件，但会动态创建。

```
(r'^(?P<color>[0-9a-f]{6})/dynamic.css$', dynamic_css)

def dynamic_css(request, color):
   """
   Create a css file based on a color criteria,
   or any other complicated calculations necessary
   """
   # do custom element positionting.
   return render_to_response('dynamic.css', {'color': color})

# dynamic.css    
body {
  background-color: {{ color }}
} 
```

没有理由为此编写 css 文件。现在你可以只包括

`<link rel="styleshee" type="text/css" href="/purple/dymamic.css" />`

在您的模板中。

如前所述，这不应仅用于更改一种颜色。这可以在您的模板中完成。如果您必须做这样的事情，那么实现缓存可能是一个好主意，因为每次请求页面时它都必须动态生成可能是性能开销的 .css。这更像是一个示例，表明您可以根据需要命名 urls.py 条目。并以您想要的任何方式将它们包含在 html 中，即。如果您需要动态创建的自定义 javascript 文件，您可以在 urls.py 中创建一个条目，然后创建一个生成 .js 文件的视图。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T11:39:19.687

视图.py：

```
def create_css_file(request, color):
    f = color
    return render_to_response('mytemplate.html', locals()) 
```

模板：

```
<body style = "color:{{f}}!important;"> 
```

不要动态创建 css 文件，这是不必要的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T17:06:30.763

我接受了@CatPlusPlus 的建议：在视图中计算必要的值并向模板传递一个`raw`包含整个 CSS 的非常长的字符串 ( )。在模板中，我像这样包含它：

```
<style media="screen">{{ raw|safe }}</style> 
```

感谢大家的努力！

# javascript - 如何使用javascript在jsp页面中获取第n个href链接

> ID：10968297
> 
> 赞同：0
> 
> 时间：2012-06-10T11:30:21.163
> 
> 标签：javascript, href

在我的 jsp 页面中有近 10 个 href 链接，但我需要使用 javascript 获得第 6 个链接。任何人都可以发布代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T11:32:19.880

尝试类似：

```
var hrefs = document.getElementsByTagName('a');
var sixth = hrefs[5]; 
```

[`getElementsByTagName()`这里的文档](https://developer.mozilla.org/en/DOM/document.getElementsByTagName)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T11:34:25.247

或者简单地说[`links`](http://www.w3.org/TR/DOM-Level-2-HTML/html.html#ID-7068919)：

```
var sixth = document.links[5]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T11:32:21.070

```
var links = document.getElementsByTagName('a');
var sixth = links[5]; 
```

更多探索：

*   [DOM2 核心](http://www.w3.org/TR/DOM-Level-2-Core/)
*   [DOM2 HTML](http://www.w3.org/TR/DOM-Level-2-HTML/)
*   [DOM3 核心](http://www.w3.org/TR/DOM-Level-3-Core/)
*   [HTML5 Web 应用程序 API](http://www.w3.org/TR/html5/webappapis.html#webappapis)

* * *

尽管对于这个特定的用例来说这有点过头了，但如果你要编写大量的 DOM 操作代码，你可能会考虑一个很好的库，比如[jQuery](http://jquery.com)、[YUI](http://developer.yahoo.com/yui/)、[Closure](http://code.google.com/closure/library)或[其他几个](http://en.wikipedia.org/wiki/List_of_JavaScript_libraries)库中的任何一个。它们消除了许多浏览器差异，提供了许多有用的实用程序功能等。

# multithreading - Web 应用程序、jsp 和多线程

> ID：10968299
> 
> 赞同：1
> 
> 时间：2012-06-10T11:30:30.103
> 
> 标签：multithreading, jsp, web-applications, multi-user

我目前正在使用 Apache Tomcat 作为网络服务器在 Java EE 中构建一个新的网络应用程序。我在工作中使用 jsps 和 servlet。

我的问题是：

我有一个非常标准的业务逻辑。没有一个是同步的，在任何给定时间只会运行我的网络应用程序逻辑的一个线程吗？

由于使所有功能“同步”会导致巨大的开销，是否有任何替代方案？

如果我的项目中有一个静态方法。这使事情变得非常简单，例如：

```
 for (int i=0;i<10000;i++ ) {
           counter++;
       } 
```

如果该方法不是线程安全的，那么这种方法在多用户应用程序中的行为是什么？是出乎意料的行为吗？！

再次以简单的方式：

如果我的意思是构建一个多用户 Web 应用程序，我应该“同步”我项目中的所有内容吗？如果不是全部，我应该同步什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T11:56:48.983

> 在任何给定时间，我的网络应用程序逻辑只会运行一个线程吗？

不，servlet 容器将只为每个 servlet 创建一个实例，并`doService()`从多个线程调用该 servlet 的方法。默认情况下，在 Tomcat 中，您可以预期多达 200 个线程同时调用您的 servlet。

如果 servlet 是单线程的，那么您的应用程序将会非常缓慢，请参阅[`SingleThreadModel`](http://docs.oracle.com/javaee/6/api/javax/servlet/SingleThreadModel.html)- 出于某种原因已弃用。

> 使所有功能“同步”会产生巨大的开销，有什么替代方法吗？

有 - 你的代码应该是线程安全的或更好的 - 无状态的。请注意，如果您的 servlet 没有任何状态（如可变字段 - 不寻常），则可以由多个线程安全地访问它。这同样适用于几乎所有对象。

在带有`for`循环的示例代码中 - 如果`counter`是局部变量，则此代码是线程安全的。如果是字段，则不安全。每个线程都有一个局部变量的本地副本，而访问同一对象的所有线程同时访问相同的字段（并且需要同步）。

> 我应该同步什么？

可变的、全局的、共享的状态。例如，在您的示例代码中，如果`counter`是一个字段并且是从多个线程修改的，则递增它必须是同步的（考虑`AtomicInteger`）。

# symfony - symfony2 中具有多个实体的独特蛞蝓

> ID：10968300
> 
> 赞同：0
> 
> 时间：2012-06-10T11:30:36.700
> 
> 标签：symfony, slug

我有一个小型 symfony2 应用程序，用户可以在其中创建页面。每个页面都应该可以通过路由 /{user_slug}/{page_slug} 访问。我有实体用户和页面，我对这两个实体都使用了 sluggable 行为。为了找到正确的页面，user_slug 和 page_slug 的组合必须是唯一的。

检查 user_slug 和 page_slug 的组合是否唯一的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T11:43:25.060

在你的存储库中试试这个：

```
public function findByUsernameAndSlug($username, $slug)
{
    $em = $this->getEntityManager();
    $query = $em->createQuery("
        SELECT g
        FROM Acme\PagesBundle\Entity\Page p
        JOIN p.owner u
        WHERE u.username = :username
        AND p.slug = :slug
    ")
            ->setParameter('username', $username)
            ->setParameter('slug', $slug);

    foreach ($query->getResult() as $goal) {
        return $goal;
    }

    return null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T11:44:22.963

在将实体保留在服务层中之前，请检查给定的用户和页面 slug 组合是否唯一，如果没有修改页面 slug（附加`-2`或类似的东西）或抛出异常：

```
public function persistPage(Page $page) {
    $userSlug = $page->getUser()->getSlug();
    $pageSlug = $page->getSlug();

    if ($this->pagesRepository->findOneBySlugs($userSlug, $pageSlug) != null) {
        // given combination already exists
        throw new NonUniqueNameException(..);
        // or modify the slug
        $page->setSlug($page->getSlug() . '-2');
        return $this->persistPage($page);
    }

    return $this->em->persist($page);
}

// PagesRepository::findOneBySlugs($userSlug, $pageSlug)
public function findOneBySlugs($userSlug, $pageSlug) {
    $query = $this->em->createQueryBuilder('p')
            ->addSelect('u')
            ->join('p.user', 'u')
            ->where('p.slug = :pageSlug')
            ->where('u.slug = :userSlug;)
            ->getQuery();

    $query->setParameters(combine('userSlug', 'pageSlug'));

    return $query->getSingleResult();
} 
```

# asp.net - 从 xml 文件绑定下拉列表

> ID：10968301
> 
> 赞同：0
> 
> 时间：2012-06-10T11:30:37.367
> 
> 标签：asp.net, drop-down-menu

我在绑定 xml 文件中的数据下拉列表时遇到问题。xml 文件看起来像这样；

```
<agricultural>
<file>
  <text>Acreage_Cotton_Planted</text>
  <value>ACRECOTP Index</value>
</file>
<file>
  <text>Acreage_Corn_Planted</text>
  <value>ACRECRNP Index</value>
</file>
<file>
  <text>Acreage_Soybean_Planted</text>
  <value>ACRESOYP Index</value>
</file>
<file>
  <text>Acreage_Wheat_Planted</text>
  <value>ACREWHTP Index</value>
</file>
</agricultural> 
```

我正在使用此代码从 xml 返回列表

```
Public Shared Function GetAgDataList(nodestring As String) As List(Of ListItem)
    Dim doc As New XmlDocument()
    'Load XML from the file into XmlDocument object
    doc.Load("~\DataFiles\dataXML.xml") 'this needs to be changed to the server path
    Dim root As XmlNode = doc.DocumentElement
    'Select all nodes with the tag paramter indicated by the nodestring variable
    Dim nodeList As XmlNodeList = root.SelectNodes(nodestring)
    Return (From node As XmlNode In nodeList Let text = node.Attributes.GetNamedItem("text").Value.ToString() Let val = node.Attributes.GetNamedItem("value").Value.ToString() Select New ListItem(text, val)).ToList()
End Function 
```

下拉列表控件不应该只显示文本吗？因为我的下拉列表显示连接在一起的文本和值。例如，Acreage_Corn_PlantedARECCRNP 索引。我只想显示文本 Acreage_Corn_Planted。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-10T11:45:54.790

您可以使用以下代码：我使用了 LINQ to Entity，它适用于 ASP.NET 3.5 或更高版本：

```
 using System.Xml.Linq;
public class Item {
    public string Text { get; set; }
    public string Value { get; set; }
}

public class MyPage : Page { 
    XDocument xdoc = XDocument.Load("MyXmlFile.xml");
        var listOfItems = new List<Item>();
        foreach (XElement item in xdoc.Element("agricultural").Elements("file")) {
            listOfItems.Add(new Item() { Text = item.Element("text").Value, Value = item.Element("value").Value });
        }
            myDrp.DataTextField = "Text";
            myDrp.DataValueField = "Value";
            myDrp.DataSource = listOfItems;
            myDrp.DataBind();
} 
```

# android - 警报管理器触发太多次

> ID：10968303
> 
> 赞同：0
> 
> 时间：2012-06-10T11:31:10.877
> 
> 标签：android

我对 Android 中的警报管理器有疑问。我有以下代码片段来设置每周（一次）应该触发的警报。

```
 // Add the time and set when the notification will be triggered
    Calendar setCalendar = item.getDate();
    calendar.set(Calendar.MINUTE,setCalendar.get(Calendar.MINUTE)+10080);

   //Create a new alarm intent
   Intent alarmIntent = new Intent(ApplicationUtils.getApplicationContext(), AlarmReceiver.class);

   PendingIntent sender = PendingIntent.getBroadcast(ApplicationUtils.getApplicationContext(), requestCode, alarmIntent, PendingIntent.FLAG_UPDATE_CURRENT);

        // Get the AlarmManager service
        AlarmManager alarmManager = (AlarmManager) context.getSystemService(context.ALARM_SERVICE);
        alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), AlarmManager.ELAPSED_REALTIME, sender); 
```

我必须关注问题。当一周改变时，通知就会出现并且它们永远不会停止。有人知道如何设置日历以便每周触发一次警报吗？

谢谢，阿克德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T11:36:13.633

你的第三个参数`setRepeating`不正确。它应该是重复警报之间的间隔（以毫秒为单位）。

一周将是： 1000 * 60 * 60 * 24 * 7 。

[http://developer.android.com/reference/android/app/AlarmManager.html#setRepeating(int](http://developer.android.com/reference/android/app/AlarmManager.html#setRepeating(int) , long, long, android.app.PendingIntent)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T11:45:11.367

查看对您有帮助的代码。

```
 Intent intent_for_every_second = new Intent(Activity.this, Notifier.class);
 pendingIntent_for_every_second = PendingIntent.getBroadcast(Activity.this, 0,    intent_for_every_second,0);
 AlarmManager alarmManager_for_every_second = (AlarmManager) getSystemService(ALARM_SERVICE);
  alarmManager_for_every_second.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP, 1000, 1000,pendingIntent_for_every_second); 
```

# .net - Linq 字符串比较错误

> ID：10968306
> 
> 赞同：1
> 
> 时间：2012-06-10T11:31:28.257
> 
> 标签：.net, linq-to-sql

设想：

```
 const string srchFormatter = "{0} {1} {2}";

 var result = from c in db.ContactsDumps1s
                     where string.Format(srchFormatter, c.FirstName, c.MiddleName, c.LastName).Contains(txtSearch.Text.Trim())
                     select new { c.FirstName, c.MiddleName, c.LastName }; 
```

错误：

> 方法 'System.String Format(System.String, System.Object, System.Object, System.Object)' 不支持对 SQL 的转换。
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.NotSupportedException：方法“System.String Format(System.String, System.Object, System.Object, System.Object)”不支持对 SQL 的转换。

任何人都可以让我知道为什么我无法以这种方式搜索以及此搜索的任何替代方法吗？

这是我计划实现的目标：

```
select FirstName, MiddleName, LastName 
from ContactsDumps1 
where FirstName+MiddleName+LastName like '%Search_String%' 
```

通过使用 LINQ。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T11:43:29.667

似乎您正在执行 LINQ-to-SQL 查询，因为您的数据库上下文与数据库连接相关联。在执行此操作时，您正在向数据库发出查询。考虑一下您正在构建的查询：

```
from c in db.ContactsDumps1s
                     where string.Format(srchFormatter, c.FirstName, c.MiddleName, c.LastName).Contains(txtSearch.Text.Trim())
                     select new { c.FirstName, c.MiddleName, c.LastName }; 
```

这可能转化为类似：

```
SELECT FN, MN, LN
FROM ContactsDumps1s
WHERE 'FN FN FN' Contains SomeTextValue 
```

这真的翻译得不好。我认为您正在尝试做的是 LIKE - where `FirstName Starts With SomeTextValue`。

所以你可能想尝试：

```
 from c in db.ContactsDumps1s
    where c.FirstName.StartsWith(txtSearch.Text.Trim()) ||
          c.MiddleName.StartsWith(txtSearch.Text.Trim()) ||
          c.LastName.StartsWith(txtSearch.Text.Trim())
    select new { c.FirstName, c.MiddleName, c.LastName }; 
```

我可能不明白你到底想做什么，但希望这会有所帮助。如果我遗漏了什么，请告诉我，我会澄清我的答案。

**更新**：我更新了我建议的 LINQ 语句以在 txtSearch 中搜索 FirstName、MiddleName 或 LastName 的文本。

**更新＃2**：我注意到您更新的问题以及您想要做什么。这是一种可能对您有用的方法：

```
from c in db.ContactsDumps1s
where (c.FirstName + " " + c.MiddleName + " " + c.LastName).StartsWith(txtSearch.Text.Trim())
select new { c.FirstName, c.MiddleName, c.LastName }; 
```

使用 LINQPad，我做了类似的事情，从中生成的 SQL 是：

```
SELECT [t0].[FirstName], [t0].[MiddleName], [t0].[LastName]
FROM [SalesLT].[Customer] AS [t0]
WHERE (([t0].[FirstName] + @p0) + ([t0].[MiddleName] + @p0) + [t0].[LastName]) LIKE @p1 
```

这大致转化为您想要做的事情。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T11:56:42.913

如果您在任何字段中查找包含 txtSearch.Text 的行，则可以使用类似的内容

```
var result = from c in db.ContactsDumps1s
where c.FirstName.Contains(txtSearch.Text.Trim()) ||
c.MiddleName.Contains(txtSearch.Text.Trim()) || 
c.LastName.Contains(txtSearch.Text.Trim())
select new { c.FirstName, c.MiddleName, c.LastName }; 
```

这是将 db.ContactsDumps1s 与所有三个字段相结合的代码。小心它很慢。

```
var result = (from c in db.ContactsDumps1s
    select new { c.FirstName, c.MiddleName, c.LastName, 
    Combined = c.FirstName + c.LastName + c.MiddleName})
    .Where(u => u.Combined.Contains(txtSearch.Text.Trim())).ToArray(); 
```

第一个选项对我来说更适合网站搜索。第二个选项将要求用户知道所有 3 个字段才能找到某人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T12:05:21.567

为什么不？

```
var result = from c in db.ContactsDumps1s
             where (c.FirstName + " " + c.MiddleName + " " + c.LastName)
                 .Contains(txtSearch.Text.Trim())
             select new { c.FirstName, c.MiddleName, c.LastName }; 
```

# c++ - 如何从.so文件导入python模块？

> ID：10968309
> 
> 赞同：41
> 
> 时间：2012-06-10T11:32:20.903
> 
> 标签：c++, python, boost-python

```
[me@hostname python]$ cat hello_world.cc
#include <string>
#include <Python.h>
#include <boost/python.hpp>

namespace {
  std::string greet() { return "Helloworld"; }
}

using namespace boost::python;

BOOST_PYTHON_MODULE(hello_world)
{
  def("greet",greet);
}

[me@hostnmae python]$ g++ -c -fPIC hello_world.cc -I/path/to/boost/headers -I/path/to/python/headers -o hello_world.o
[me@hostname python]$ g++ -shared -Wl,-soname,libhello_world.so -o libhello_world.so  hello_world.o
[me@hostname python]$ python
Python 2.7.1 (r271:86832, Jan 10 2011, 09:46:57)
[GCC 3.4.5 20051201 (Red Hat 3.4.5-2)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import sys
>>> sys.path.append('.')
>>> import hello_world
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named hello_world
>>> 
```

我创建了如上所示的 .so 文件，但我无法在 python 中导入。我错过了什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-20T04:42:29.723

获取“hello_world.so”文件并制作名为“hello_world.py”的新python文件（在同一目录中）。把下面的代码放进去...

```
def __bootstrap__():
   global __bootstrap__, __loader__, __file__
   import sys, pkg_resources, imp
   __file__ = pkg_resources.resource_filename(__name__,'hello_world.so')
   __loader__ = None; del __bootstrap__, __loader__
   imp.load_dynamic(__name__,__file__)
__bootstrap__() 
```

现在您可以将此 hello_world 导入为：

```
>>> import hello_world 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-06-10T11:36:57.273

它必须被调用`hello_world.so`，而不是`libhello_world.so`。

# c++ - boost::thread 错误“不允许成员函数重新声明”

> ID：10968311
> 
> 赞同：1
> 
> 时间：2012-06-10T11:32:23.493
> 
> 标签：c++, boost-thread

我有这个`boost::thread`我无法解决的问题。

我有一个`classX.h`文件：

```
#include <boost/thread/thread.hpp>
class classX{

    ...
    void startWork(void);
    void doWork(void);
    ...

} 
```

然后是一个`.cpp`文件：

```
...
void classX::startWork(){
boost::thread(&doWork);
}
void classX::doWork(){
...
} 
```

我无法编译，我得到了错误（在我做的那一行`boost::thread(&doWork)`）：

```
error C2761: 'void plsa_mt_2::doWork(void)' : member function redeclaration not allowed 
```

此错误与线程创建有关还是与其他问题有关？我能做些什么来解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T11:56:23.303

由于`classX::doWork()`是 的成员函数`classX`，因此您不能在`(&classX::doWork)`不提供指向 的指针的情况下调用成员函数指针`classX`。

实现这一点的 Boostiest 方法是使用 Boost Bind 创建一个带有成员函数指针和指向 classX 的指针的可调用函子，如下所示：

```
void classX::startWork() {
boost::thread t(boost::bind(&classX::doWork, this)); // be careful, the boost::thread will be destroyed when this function returns
} 
```

如果不需要访问的实例属性，您也可以创建`doWork()`一个静态成员函数或全局函数：`doWork()``classX`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T11:48:47.850

首先，获取指向成员函数的指针的正确语法是

```
&classX::doWork 
```

但是我认为您可能没有显示产生错误的确切代码，因为`&doWork`VS 中的典型错误是

```
error C2276: '&' : illegal operation on bound member function expression 
```

# ruby-on-rails - a/b 为 mongoid 测试 gem？

> ID：10968313
> 
> 赞同：3
> 
> 时间：2012-06-10T11:32:32.287
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongoid, ab-testing

是否存在任何支持 mongoid 的 gem a/b 测试？

我见过[分裂](https://github.com/andrew/split)，但我不知道是否支持 mongoid。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T12:16:52.030

[Vanity](http://vanity.labnotes.org/ "虚荣")支持 MongoDB（和 Redis）。这是一个优秀的框架，易于设置和使用，并且有漂亮的图表。

# javascript - 提交表单后停留在同一页面上

> ID：10968314
> 
> 赞同：0
> 
> 时间：2012-06-10T11:32:40.223
> 
> 标签：javascript, ajax

我试图在不重定向页面的情况下将数据提交到数据库。这段代码有错误吗？

```
$('#saving').on('click', function() { 
        var fname = $('#fname').val(); 
        var lname = $('#lname').val(); 
        var company = $('#company').val(); 
        var mnum = $('#mnum').val(); 
        var dataString = 'fname=' +fname + '&lname=' + lname + '&company=' + company + '&mnum=' + mnum; 
        $.ajax({ 
            type: "POST", 
            url: "submit.php", 
            data: dataString, 
            success: function() { 
                alert(''); 
                $('#dialog-message').dialog('open'); 
            } 
        }); 
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T11:34:57.807

我想你想要[`preventDefault`](http://api.jquery.com/event.preventDefault/)：

```
function(event) {
    // ... ajax ...
    event.preventDefault();
} 
```

该文档指出：

> 如果调用该方法，则不会触发事件的默认动作。

# c++ - 减去包含重复元素的向量

> ID：10968319
> 
> 赞同：2
> 
> 时间：2012-06-10T11:32:49.433
> 
> 标签：c++, vector, duplicates, set-intersection

是否有任何优雅的方法来减去`std::vector`包含重复元素的 s？

* * *

例子：

```
v1 = { 3, 1, 2, 1, 2, 2 }
v2 = { 2, 4, 3, 3, 3 }
result1 = ??( v1, v2 )
result2 = ??( v2, v1 ) 
```

我希望结果是：

```
result1 = { 1, 1 }
result2 = { 4 } 
```

* * *

我目前（而且非常慢）的解决方案：

```
1) sort v1 and v2
2) use std::unique_copy to v1_uniq, v2_uniq
3) intersect the new vectors with std::set_intersection
4) iterate over v1 and v2 and remove all elements, that are in the intersection 3) 
```

我的另一个想法是：

```
1) sort v1 and v2
2) iterate over v1 and v2 and remove duplicates in parallel 
```

但这有点容易出错，对我来说看起来并不优雅。

还有其他想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T11:39:38.977

您可以将[std::copy_if](http://en.cppreference.com/w/cpp/algorithm/copy)与检查元素是否在第二个向量中的一元谓词一起使用。或者，如果您没有 C++11 支持，请使用[std::remove_copy_if](http://en.cppreference.com/w/cpp/algorithm/remove_copy)并适当更改谓词的逻辑。

对于一元谓词：

```
struct Foo {

  Foo(const std::vector& v) : v_(v) {}
  bool operator() (int i) const {
    // return true if i is in v_
  }
  const std::vector<int>& v_;

}; 
```

可以这样实例化：

```
Foo f(v2); 
```

您可以修改函子以保留参考向量的排序版本，具有唯一条目以允许进行二进制搜索，但总体思路是相同的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T11:55:13.903

我有一个相当简单的算法，复杂度为 O(n²)。但是，使用排序（O（n log n））可以更快。这里是：

```
substract s from v
    for all elements of v
        for all elements of s
            if element i-th of v == element j-th of s
                then remove it from v and break the loop on s 
```

使用其他结构，也许它会更快。例如，如果元素是共享的，您可以分离与 s 共享的 v 的所有元素，复杂度为 O(n)。

# tcl - 创建一个像标签一样的 Tk Tcl 条目

> ID：10968320
> 
> 赞同：0
> 
> 时间：2012-06-10T11:33:07.500
> 
> 标签：tcl, tk

我想创建可以选择其中的文本进行复制/粘贴的标签。为此，我尝试使用只读条目。但我似乎无法初始化其中的文本值。标签是在循环内生成的，标签的数量及其内容是未知的。生成标签的代码是：

```
proc test_labels {} {
    toplevel .labels
    # Main Frame
    frame       .labels.main_frame -relief "groove" -bd 2
    pack        .labels.main_frame

    set r 1

    foreach t [list banana apple grapes orange lemon peach] {
        set lbl  [label .labels.main_frame.lbl_$r   -text "fruit $r:"]
        set lbl2 [label .labels.main_frame.val_$r -text $t]

        grid $lbl  -row $r -column 1 -sticky nse
        grid $lbl2 -row $r -column 2 -sticky nsw

        incr r
    }
    set ok_btn [button .labels.main_frame.ok_b -text "OK" -command {prop_menu_ok_button}]
    grid $ok_btn -row [expr $r+2] -column 1 -columnspan 2 -sticky nsew

    grab release .
    grab set .labels
    center_the_toplevel .labels
    bind .labels <Key-Return> {test_labels_ok_button}
} 
```

它创建了休耕窗口：

![在此处输入图像描述](../Images/e4e59960aedd51ce46f25f25b1a16e6f.png)

然后我尝试用以下行替换该`set lbl2 [label .labels.main_frame.val_$r -text $t]`行：

```
eval "set text_val_$r $t"
eval "set lbl2 [entry .labels.main_frame.val_$r -relief flat -state readonly -textvar text_val_$r]" 
```

但这只会创建空行：

![在此处输入图像描述](../Images/924f7be2dd6319b0b1cb75c83187b0d8.png)

如何将默认值放入条目小部件？

与问题[如何使 Tk 标签中的文本可选择？](https://stackoverflow.com/questions/10967056/how-to-make-the-text-in-a-tk-label-selectable/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T12:08:20.577

这些行几乎肯定不是您想要的！（如果你使用`eval`，你应该*总是*问它是否真的有必要；从 8.5 开始，可能的答案是“没必要”。）

```
eval "set text_val_$r $t"
eval "set lbl2 [entry   .labels.main_frame.val_$r -relief flat -state readonly -textvar \$\{text_var_$r\}]" 
```

除了使用之外，关键问题`eval`是该`-textvariable`选项采用变量的*名称*。让我们通过使用数组来保存值来解决这个问题：

```
set text_val($r) $t
set lbl2 [entry .labels.main_frame.val_$r -relief flat -state readonly \
        -textvariable text_val($r)] 
```

另外，请注意`text_val`数组需要是全局的（或者在命名空间中，如果在将名称提供给`-textvariable`选项时完全限定名称）。这是因为它是从任何程序范围之外的地方访问的。

当然，事实证明，如果我们保持值不变，那么我们可以完全避免使用变量，而只需手动插入值。

```
set lbl2 [entry .labels.main_frame.val_$r -relief flat]
$lbl2 insert 0 $t
$lbl2 configure -state readonly 
```

如果您从不更改该值，那将可以正常工作。

# c - 为什么 sizeof(type) 是指针的大小，而不是类型本身的大小？

> ID：10968326
> 
> 赞同：3
> 
> 时间：2012-06-10T11:34:31.703
> 
> 标签：c, sizeof

在这段代码中，为什么是`sizeof(x)`指针的大小，而不是类型的大小`x`？

```
typedef struct {
  ...
} x;

void foo() {
  x *x = malloc(sizeof(x));
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T11:48:19.807

因为 C 说：

> （C99，6.2.1p7）“任何其他标识符的范围都在其声明符完成后开始。”

因此，在您的示例中，对象的范围从以下内容`x`开始`x *x`：

```
x *x = /* scope of object x starts here */
       malloc(sizeof(x)); 
```

`x`为了说服自己，在对象声明之后放置另一个类型的对象声明`x`：你会得到一个编译错误：

```
void foo(void)
{
    x *x = malloc(sizeof(x));  // OK
    x *a;   // Error, x is now the name of an object
} 
```

否则，正如 Shahbaz 在另一个答案的评论中所指出的那样，这仍然不是正确使用`malloc`. 你应该`malloc`这样调用：

```
T *a = malloc(sizeof *a); 
```

并不是

```
T *a = malloc(sizeof a); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-10T11:34:32.547

这是因为`sizeof(x)`使用了 的最内层定义`x`，即指针。为避免此问题，请不要为类型和变量使用相同的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T11:57:55.177

不给不同的东西起不同的名字是个坏主意（不仅在编程中）：

我亲爱的注释者已经提到了行为观察者的学术原因。

为了给出明确的建议，命名不同的事物（这里：变量类型和变量实例）：

```
typedef struct {
  ...
} X;

void foo() {
  X *x = malloc(sizeof(X));
} 
```

编写此示例的更灵活的方法是（正如 Shahbaz 的评论中已经提到的）：

```
typedef struct {
  ...
} X;

void foo() {
  X *x = malloc(sizeof(*x));
} 
```

后一个示例允许您在`x`不更改执行分配的代码的情况下更改类型。

这种方法的缺点是您可以在`x`没有编译器通知的情况下从使用对数组的引用和 verse vica （作为类型 for ）切换，并破坏您的代码这样做。

# mysql - 子查询返回多行问题

> ID：10968334
> 
> 赞同：0
> 
> 时间：2012-06-10T11:35:22.267
> 
> 标签：mysql

再次使用我的小型数据库练习有关 mysql 的问题：

我得到的表格如下：

```
Songs       Link        Tags
=======     =====       =======
Sid          Sid        Tid
Songname     Tid        Tagname 
```

现在我要做的是，一旦我通过输入一些标签查询（或搜索）一首歌曲，以显示该歌曲必须有多少标签才能创建匹配百分比。

感谢令人敬畏的stackoverflow社区，我得到了查询

```
SELECT s.Sid, s.Songname
FROM Songs s
JOIN Link l ON ( l.Sid = s.Sid )
JOIN Tags t ON ( t.Tid = s.Tid )
WHERE t.Tagname IN ( 'X', 'Y' )
GROUP BY s.Sid, s.Songname
HAVING COUNT(1) = 2 
```

搜索与这两个标签完全匹配的歌曲。
假设现在你有这首歌 A，它有标签 G、X、Y 和 Z。
查询找到这首歌是因为它有 X 和 Y。然而这首歌得到了另外 2 首歌曲，因此我想（使用 php）创建一个匹配百分比，显示这首歌曲的 50%。

我对 php 部分没有任何问题，但我无法找出一个查询来获取与这些标签匹配的所有歌曲以及它们在一个结果集中的标签总数。

干杯!

## 编辑1：

* * *

我注意到大多数答案都显示了我已经尝试过的内容。所以我再做一个更深入的例子：
假设你有以下 4 首歌曲：

A 带有标签 A、B、X 和 Y
B 带有标签 A、B、C、D、E、X、Y
C 带有标签 A , B, C, D, F, X
D 带有标签 X 和 Y

现在输入了用于搜索带有标签 X 和 Y 的歌曲的查询。我想要以下输出：

```
TotalNumberOfTags:    Song:
4                      A
7                      B
2                      D 
```

C 没有 X 和 Y，所以他摔倒了。

## 编辑2：

* * *

为了说明我想使用查询

```
SELECT COUNT(t.Tagname) FROM FROM Songs s 
JOIN Link l ON ( l.Sid = s.Sid ) 
JOIN Tags t ON ( t.Tid = s.Tid ) 
WHERE s.Songname="A" 
```

在由上述查询引起的整个返回的歌曲名集上，在一个查询中使用 ORDER BY COUNT(t.Tagname) ASC 在集合上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T18:39:09.360

我找到的答案是一种解决方法，但它有效。我创建一个像这样的临时表

```
CREATE TEMPORARY TABLE numberoftags ( songname VARCHAR(50) NOT NULL, numberoftags INT); 
```

我填写了我在问题中显示的 2 个单独的查询。
然后用一个简单的查询

```
SELECT * FROM numberoftags ORDER BY numberoftags DESC 
```

我收到所有歌曲及其标签总数，我一一显示。在我关闭 php 中的连接后，这个临时表会自动被删除，所以不用担心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T12:13:01.643

我认为您还可以通过使用类似...的方式计算每组（即每首歌曲）中的记录数来获得计数

```
SELECT s.Sid, s.Songname, COUNT(t.Tagname)
FROM Songs s
JOIN Link l ON ( l.Sid = s.Sid )
JOIN Tags t ON ( t.Tid = s.Tid ) AND t.Tagname IN ( 'X', 'Y' )
GROUP BY s.Sid, s.Songname; 
```

此外，发送带有标记名的单个字符串然后使用 Find_In_Set 可能更容易

```
SELECT s.Sid, s.Songname, COUNT(t.Tagname)
FROM Songs s
JOIN Link l ON ( l.Sid = s.Sid )
JOIN Tags t ON ( t.Tid = s.Tid ) AND FIND_IN_SET(t.Tagname,"G,X,Y,Z")>0
GROUP BY s.Sid, s.Songname; 
```

我显然不明白，因为我认为搜索中使用的标记名列表是动态元素。我相信您可以使用内部查询来获取与您的搜索条件匹配的歌曲（例如“X”、“Y”），然后对歌曲使用外部查询来获取每个人的标签计数

```
select COUNT(to.Tagname), so.Songname FROM FROM Songs so 
JOIN Link lo ON ( lo.Sid = so.Sid ) 
JOIN Tags to ON ( to.Tid = so.Tid ) 
WHERE so.SongName in
   ( SELECT si.SongName
      FROM Songs si
      JOIN Link li ON ( li.Sid = si.Sid )
      JOIN Tags ti ON ( ti.Tid = si.Tid )
      WHERE ti.Tagname IN ( 'X', 'Y' )
      GROUP BY si.Sid, si.Songname
      HAVING COUNT(1) = 2
   )
order by COUNT(to.Tagname); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T12:14:07.223

删除 HAVING 子句 - 不要认为它是必需的。添加`COUNT(l.Sid) AS MatchedTags`在 SELECT 语句中。

```
SELECT s.Sid, s.Songname, COUNT(l.Sid) AS MatchedTags
FROM Songs s
JOIN Link l ON ( l.Sid = s.Sid )
JOIN Tags t ON ( t.Tid = s.Tid )
WHERE t.Tagname IN ( 'X', 'Y' )
GROUP BY s.Sid, s.Songname
HAVING COUNT(1) = 2 
```

另外 - 这取决于个人意见，但作为一般规则，我将多对多关系中的“链接”表命名为所涉及的 2 个表名的组合。例如，您将有 Song、Tag 和中间表 SongTag。

并尽可能避免使用首字母缩略词！每个表中的主键列只能称为Id，而SongTag表（或Link表）将有SongId和TagId，而不是sid和tid。

如果`HAVING COUNT(1) = 2`需要，将 (1) 更改为实际引用列名以便于阅读。

坏习惯，但这只是我个人的看法。

我的查询最终看起来像这样：（有 2 首歌曲和 5 个标签）。

```
SELECT 
    s.Id, 
    s.Name,
    COUNT(st.Id) AS MatchedTags
FROM 
    SongTag st
        INNER JOIN Song s ON st.SongId = s.Id
        INNER JOIN Tag t ON st.TagId = t.Id
WHERE 
    t.Name IN ('Tag2', 'Tag3', 'Tag4', 'Tag5')
GROUP BY
    s.Id,
    s.Name 
```

# java - 如何使用 JSF 扩展库作为 OSGI 包

> ID：10968335
> 
> 赞同：5
> 
> 时间：2012-06-10T11:35:27.703
> 
> 标签：java, jsf, primefaces, osgi, pom.xml

我想在 JSF 应用程序中使用 Primefaces 库作为 osgi 包。我用 JSF 页面创建了 WAB 包。我还将 promefaces.jar 部署为 OSGI 包。我在 primefaces.jar 中看到 MANIFEST 文件正在导出包以对其他包可见。问题是如何在 WAB 包中使用 primefaces 标签？我确定我需要将配置添加到 POM.xml 文件中，但我不知道该怎么做。

我通过将 .jar 文件放入 WEB-INF/lib 目录成功测试了将 primefaces.jar 包含到 WAB 中，但我想将 Primefaces 用作 OSGI 资源而不是 WEB-INF/lib 目录中的 jar 资源。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T07:16:25.350

WAB 捆绑包也是 OSGi 捆绑包吗？如果是，您只需在 WAB 包的清单文件中导入您需要的包。通过在 Import-Package: 条目下列出这些包来包含它们。这应该使它们对整个 WAB 包可见。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T14:45:58.633

您必须将标签声明复制并粘贴到`primefaces-p.taglib.xml`文件中，并查看本[教程](http://simonmartinelli.blogspot.com/2009/09/create-custom-jsf-facelet-component.html)如何创建自定义标签。

# wpf - 如何检查一行是否有奇数？

> ID：10968338
> 
> 赞同：2
> 
> 时间：2012-06-10T11:36:15.590
> 
> 标签：wpf, xaml, multidatatrigger

我正在尝试使用 XAML 为奇数行设置不同的颜色。

有问题的数据网格有 3 种不同类型的数据，我想用不同的颜色着色，而简单地更改 AlternatingRowBackground 是行不通的。

我打算使用类似的东西

```
<MultiDataTrigger>
    <MultiDataTrigger.Conditions>
         <Condition Binding="{Binding Type}" Value="0"/>                         
         <Condition Binding="{Binding IsSelected, RelativeSource={RelativeSource Self}}" Value="False"/> 
         <Condition Binding="{Binding IsOddRow, RelativeSource={RelativeSource Self}}" Value="False"/>
    </MultiDataTrigger.Conditions>      
    <Setter Property="Background" Value="#FFDFE6ED"/>                   
</MultiDataTrigger> 
```

似乎没有这样的属性`IsOddRow`。我应该检查什么属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T12:24:08.393

您可以设置`AlternationCount`上`DataGrid`然后绑定到祖先的`DataGridRows`附加属性`ItemsControl.AlternationIndex`。如果值为“1”，则您有一个奇数行号。

```
<DataGrid ItemsSource="{Binding ...}"
          AlternationCount="2">
    <DataGrid.CellStyle>
        <Style TargetType="DataGridCell">
            <Style.Triggers>
                <MultiDataTrigger>
                    <MultiDataTrigger.Conditions>
                        <Condition Binding="{Binding Type}" Value="0"/>
                        <Condition Binding="{Binding RelativeSource={RelativeSource Self},
                                                     Path=IsSelected}"
                                   Value="False"/>
                        <Condition Binding="{Binding RelativeSource={RelativeSource AncestorType={x:Type DataGridRow}},
                                                     Path=(ItemsControl.AlternationIndex)}"
                                   Value="1"/>
                    </MultiDataTrigger.Conditions>
                    <Setter Property="Background" Value="#FFDFE6ED"/>
                </MultiDataTrigger>
                <!-- ... -->
            </Style.Triggers>
        </Style>
    </DataGrid.CellStyle>
    <!-- ... -->
</DataGrid> 
```

*请注意，当绑定到附加属性时，您必须在附加属性周围加上括号。`Path=(ItemsControl.AlternationIndex)`会工作，但`Path=ItemsControl.AlternationIndex`不会。*

* * *

**更新**您还可以通过附加行为
创建属性。`IsOddRow`在您订阅的行为中`LoadingRow`。在事件处理程序中，您获取已加载行的索引并检查它是否为奇数。然后将结果存储在一个名为的附加属性`IsOddRow`中，您可以绑定到该属性。

要开始行为，请添加`behaviors:DataGridBehavior.ObserveOddRow="True"`到`DataGrid`

```
<DataGrid ItemsSource="{Binding ...}"
          behaviors:DataGridBehavior.ObserveOddRow="True">
    <DataGrid.RowStyle>
        <Style TargetType="DataGridRow">
            <Style.Triggers>
                <MultiDataTrigger>
                    <MultiDataTrigger.Conditions>
                        <Condition Binding="{Binding Type}" Value="0"/>
                        <Condition Binding="{Binding Path=IsSelected,
                                                     RelativeSource={RelativeSource Self}}" Value="False"/>
                        <Condition Binding="{Binding Path=(behaviors:DataGridBehavior.IsOddRow),
                                                     RelativeSource={RelativeSource Self}}" Value="False"/>
                    </MultiDataTrigger.Conditions>
                    <Setter Property="Background" Value="#FFDFE6ED"/>
                </MultiDataTrigger>
            </Style.Triggers>
        </Style>
    </DataGrid.RowStyle>
</DataGrid> 
```

*数据网格行为*

```
public class DataGridBehavior
{
    #region ObserveOddRow

    public static readonly DependencyProperty ObserveOddRowProperty =
        DependencyProperty.RegisterAttached("ObserveOddRow",
                                            typeof(bool),
                                            typeof(DataGridBehavior),
                                            new UIPropertyMetadata(false, OnObserveOddRowChanged));
    [AttachedPropertyBrowsableForType(typeof(DataGrid))]
    public static bool GetObserveOddRow(DataGrid dataGrid)
    {
        return (bool)dataGrid.GetValue(ObserveOddRowProperty);
    }
    public static void SetObserveOddRow(DataGrid dataGrid, bool value)
    {
        dataGrid.SetValue(ObserveOddRowProperty, value);
    }

    private static void OnObserveOddRowChanged(DependencyObject target, DependencyPropertyChangedEventArgs e)
    {
        DataGrid dataGrid = target as DataGrid;
        dataGrid.LoadingRow += (object sender, DataGridRowEventArgs e2) =>
        {
            DataGridRow dataGridRow = e2.Row;
            bool isOddRow = dataGridRow.GetIndex() % 2 != 0;
            SetIsOddRow(dataGridRow, isOddRow);
        };
    }

    #endregion // ObserveOddRow

    #region IsOddRow

    public static DependencyProperty IsOddRowProperty =
        DependencyProperty.RegisterAttached("IsOddRow",
                                            typeof(bool),
                                            typeof(DataGridBehavior),
                                            new PropertyMetadata(false));
    [AttachedPropertyBrowsableForType(typeof(DataGridRow))]
    public static bool GetIsOddRow(DataGridRow dataGridCell)
    {
        return (bool)dataGridCell.GetValue(IsOddRowProperty);
    }
    public static void SetIsOddRow(DataGridRow dataGridCell, bool value)
    {
        dataGridCell.SetValue(IsOddRowProperty, value);
    }

    #endregion // IsOddRow
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T12:18:50.627

我不确定您使用的是哪种网格/行类型，所以我不能给您确切的属性名称，但是，绑定到行的索引（行号）并使用[值转换器](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)（返回 true）来检查是否行是奇数或偶数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-22T15:29:12.227

几乎每个答案都使用`AlternationCount="2"`，但我发现它有点太局限了。在我这边，我使用类似的东西`AlternationCount="{ Binding MainData.ProjColl.Count}"`来对我的行进行编号直到结束（注意它从 0 开始！）。

在这种情况下，我需要@Danny Varod 提到的值转换器。

我使用转换器来交替行的颜色（几乎回答了这个问题）

```
public class IsEvenConverter : IValueConverter
{
    public object Convert(object value, Type targetType,
        object parameter, CultureInfo culture)
    {
        bool res = false;
        int? val = value as int?;
        if (null != val)
            res = (0 == (val % 2));
        return res;
    }     
    ...
} 
```

和调用 XAML

```
<UserControl ...
<UserControl.Resources>
    ...
    <vm_nmspc:IsEvenConverter x:Key="IsEven"/>
    <Style TargetType="DataGridRow">
        <Setter Property="Width" Value="Auto"/>
        <Setter Property="Background" Value="LightGray"/>

        <!--Converter will be used below-->

        <Style.Triggers>
            ...
            <Setter Property="Background" Value="LightGray"/
            <DataTrigger Binding="{Binding  RelativeSource={RelativeSource Self},
                                            Path=(ItemsControl.AlternationIndex),
                                            Converter={StaticResource ResourceKey=IsEven}}" Value="true">
                <Setter Property="Background" Value="Lavender"/>
            </DataTrigger>
            <Trigger Property="IsMouseOver" Value="True" >
                <Setter Property="Background" Value="LightGreen"/>
            </Trigger>
        </Style.Triggers>
    </Style>
</UserControl.Resources>

<Grid>
    <DataGrid ItemsSource="{Binding MainData.ProjColl}" AutoGenerateColumns="False" 
    AlternationCount="{ Binding MainData.ProjColl.Count}" >
    ...
    <DataGridTextColumn Header="Project Name" .... 

    </DataGrid>
</Grid>
</UserControl> 
```

和一些离散的截图

[![在此处输入图像描述](../Images/882c4a2c32bcab11e313a55ae8df5cfa.png)](https://i.stack.imgur.com/Oqr9G.png) [![在此处输入图像描述](../Images/05a5ab4770d9247c5189c38bdcd3af75.png)](https://i.stack.imgur.com/L0ld6.png)

同一代码的另一部分： [在 WPF DataGrid 上显示行号的简单方法](https://stackoverflow.com/questions/4661998)

# asp.net-mvc-3 - Entity Framework 4 和 MVC 3 - 继承和加载派生实体

> ID：10968341
> 
> 赞同：1
> 
> 时间：2012-06-10T11:36:36.170
> 
> 标签：asp.net-mvc-3, inheritance, entity-framework-4

我的几乎所有实体都有一些通用属性（CreatedBy、CreatedOn、UpdatedBy、UpdateOn）。我决定拥有一个具有这些属性的 BaseEntity，然后让我的所有其他实体都继承自该实体。

例如：

BaseEntity --> 问题

BaseEntity --> 回答

现在如何从我的模型容器中加载问题？

没有`db.Questions`或不再`db.Answers`有。只是`db.BaseEntities`。

具体来说，我想按他们的主题加载所有问题 - 所以通常我会说`db.Questions.Where(q => q.Subject.Id.Equals(subjectId))`。

我现在该怎么做？

非常感谢，皮特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T12:25:39.880

不要为此使用基类。

您最终会得到一个实体集，并且必须使用 typeof(X)。

最糟糕的是，这可能会破坏其他实体的未来继承，特别是如果有些是每个类型的表，有些是每个层次结构的表，有些是两者的混合。

相反，使用部分类来定义具有方面属性（CreatedBy、CreatedOn、UpdatedBy、UpdatedOn）的公共接口。

编辑：基础实体还需要一个表，其中包含所有实体的 PK。这将导致表过大，并可能导致查询和插入期间的性能下降。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T12:25:53.307

首先，您可以使用多种类型的继承映射策略来配置数据库

*   [每个层次结构表 (TPH)](http://weblogs.asp.net/manavi/archive/2010/12/24/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-1-table-per-hierarchy-tph.aspx) - 这是默认使用的，因此目前您在数据库中只有一个表
*   [每个类型的表 (TPT)](http://weblogs.asp.net/manavi/archive/2010/12/28/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-2-table-per-type-tpt.aspx)
*   [每个混凝土类型的表 (TPC)](http://weblogs.asp.net/manavi/archive/2011/01/03/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-3-table-per-concrete-type-tpc-and-choosing-strategy-guidelines.aspx)

您还可以将具体类型集添加到 DbContext

```
public class MyDbContext : DbContext
{
     public DbSet<Question> Questions { get; set; }
     public DbSet<Answer> Answers { get; set; }
} 
```

最重要的是 - 我更喜欢组合而不是继承。这感觉更自然

```
public class HistoryRecord
{
    public User CreatedBy { get; set; }
    public User UpdatedBy { get; set; }
    public DateTime CreatedOn { get; set; }
    public DateTime UpdatedOn { get; set; }
} 
```

并将其用作问题、答案等中的复杂类型

```
public class Question
{
     public HistoryRecord HistoryRecord { get; set; }
} 
```

# assembly - ARM 汇编程序：奇数或偶数

> ID：10968345
> 
> 赞同：-3
> 
> 时间：2012-06-10T11:36:50.183
> 
> 标签：assembly, arm

我已经搜索了一段时间，但我没有看到任何类似的东西。我知道您是否有一个数字（即它将在​​ R1 中），您实现该数字是奇数还是偶数的方式是检查寻找 0 或 1 的最后一个字节。我如何在 ARM 代码中编写它？我认为你必须将数字与“1”或类似的东西进行比较，但我不知道如何正确地做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T14:13:28.903

我想你正在寻找`TST`指导。尝试以下操作：

```
TST R1, #1
; at this point the Z flag will be set if R1 AND 1 is zero, i.e. if R1 is even,
; so you could do something like the following:
BEQ number_is_even
BNE number_is_odd 
```

# java - android上传图片到服务器

> ID：10968350
> 
> 赞同：1
> 
> 时间：2012-06-10T11:38:24.007
> 
> 标签：java, android, android-image

我正在尝试将从手机摄像头拍摄的图像上传到服务器。由于我是在 android 中上传图像的新手，因此我对此知之甚少。在谷歌搜索后，我在互联网上遵循了一个教程，它确实可以作为一个单独的应用程序工作，但是当我在我的应用程序中使用同一个类时，它不再工作了。我的 logcat 中出现错误（我将在本文末尾发布）。我不知道这个错误是什么意思，我该如何解决这个问题。请帮助我如何使这项工作？

这是我的相机活动代码

```
public class Camera extends Activity {
ImageView ivUserImage;
Button bUpload;
Intent i;
int CameraResult = 0;
Bitmap bmp;
FileUpload fu;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.camera);

    ivUserImage = (ImageView)findViewById(R.id.ivUserImage);
    bUpload = (Button)findViewById(R.id.bUpload);
    openCamera();
}

private void openCamera() {
    i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
    startActivityForResult(i, CameraResult);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    super.onActivityResult(requestCode, resultCode, data);
    if(resultCode == RESULT_OK) {
        Bundle extras = data.getExtras();
        //Log.e("Image: ", data.toString());
        bmp = (Bitmap) extras.get("data");
        ivUserImage.setImageBitmap(bmp);

        bUpload.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                //Toast.makeText(getApplicationContext(), bmp.toString(), Toast.LENGTH_SHORT).show();
                fu = new FileUpload(bmp.toString());
            }
        });
    }
}

} 
```

这是我的 FileUpload 类

```
public class FileUpload extends Activity {
TextView tv;
Button b;
int serverResponseCode = 0;
ProgressDialog dialog = null;

public FileUpload(final String bmp) {
    dialog = ProgressDialog.show(FileUpload.this, "", "Uploading file...", true);
    new Thread(new Runnable() {
           public void run() {
                runOnUiThread(new Runnable() {
                       public void run() {
                           tv.setText("uploading started.....");
                       }
                   });
            int response= uploadFile(bmp);
            //Log.e("Response: ", response);
            System.out.println("RES : " + response);
           }
         }).start();
}

public int uploadFile(String sourceFileUri) {
    String upLoadServerUri = "http://www.example.info/androidfileupload/index.php";
    String fileName = sourceFileUri;

    HttpURLConnection conn = null;
    DataOutputStream dos = null;
    String lineEnd = "\r\n";
    String twoHyphens = "--";
    String boundary = "*****";
    int bytesRead, bytesAvailable, bufferSize;
    byte[] buffer;
    int maxBufferSize = 1 * 1024 * 1024;
    File sourceFile = new File(sourceFileUri);
    if (!sourceFile.isFile()) {
     Log.e("uploadFile", "Source File Does not exist");
     return 0;
    }

    try { // open a URL connection to the Servlet
     FileInputStream fileInputStream = new FileInputStream(sourceFile);
     URL url = new URL(upLoadServerUri);
     conn = (HttpURLConnection) url.openConnection(); // Open a HTTP  connection to  the URL
     conn.setDoInput(true); // Allow Inputs
     conn.setDoOutput(true); // Allow Outputs
     conn.setUseCaches(false); // Don't use a Cached Copy
     conn.setRequestMethod("POST");
     conn.setRequestProperty("Connection", "Keep-Alive");
     conn.setRequestProperty("ENCTYPE", "multipart/form-data");
     conn.setRequestProperty("Content-Type", "multipart/form-data;boundary=" + boundary);
     conn.setRequestProperty("uploaded_file", fileName);
     dos = new DataOutputStream(conn.getOutputStream());

     dos.writeBytes(twoHyphens + boundary + lineEnd);
     dos.writeBytes("Content-Disposition: form-data; name=\"uploaded_file\";filename=\""+ fileName + "\"" + lineEnd);
     dos.writeBytes(lineEnd);

     bytesAvailable = fileInputStream.available(); // create a buffer of  maximum size

     bufferSize = Math.min(bytesAvailable, maxBufferSize);
     buffer = new byte[bufferSize];

     // read file and write it into form...
     bytesRead = fileInputStream.read(buffer, 0, bufferSize);  

     while (bytesRead > 0) {
       dos.write(buffer, 0, bufferSize);
       bytesAvailable = fileInputStream.available();
       bufferSize = Math.min(bytesAvailable, maxBufferSize);
       bytesRead = fileInputStream.read(buffer, 0, bufferSize);
      }

     // send multipart form data necesssary after file data...
     dos.writeBytes(lineEnd);
     dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

     // Responses from the server (code and message)
     serverResponseCode = conn.getResponseCode();
     String serverResponseMessage = conn.getResponseMessage();

     Log.i("uploadFile", "HTTP Response is : " + serverResponseMessage + ": " + serverResponseCode);
     if(serverResponseCode == 200){
         runOnUiThread(new Runnable() {
              public void run() {
                  tv.setText("File Upload Completed.");
                  Toast.makeText(FileUpload.this, "File Upload Complete.", Toast.LENGTH_SHORT).show();
                  }
              });
         }    

         //close the streams //
         fileInputStream.close();
         dos.flush();
         dos.close();

    } catch (MalformedURLException ex) {
        dialog.dismiss();
        ex.printStackTrace();
        Toast.makeText(FileUpload.this, "MalformedURLException", Toast.LENGTH_SHORT).show();
    Log.e("Upload file to server", "error: " + ex.getMessage(), ex);
} catch (Exception e) {
    dialog.dismiss();
    e.printStackTrace();
    Toast.makeText(FileUpload.this, "Exception : " + e.getMessage(), Toast.LENGTH_SHORT).show();
    Log.e("Upload file to server Exception", "Exception : " + e.getMessage(), e);
}
dialog.dismiss();
return serverResponseCode; 
```

} }

这是我在 logcat 中得到的

```
06-10 14:26:55.320: W/IInputConnectionWrapper(23770): showStatusIcon on inactive InputConnection
06-10 14:27:03.765: D/AndroidRuntime(23770): Shutting down VM
06-10 14:27:03.765: W/dalvikvm(23770): threadid=1: thread exiting with uncaught exception (group=0x4001e578)
06-10 14:27:03.775: E/AndroidRuntime(23770): FATAL EXCEPTION: main
06-10 14:27:03.775: E/AndroidRuntime(23770): java.lang.IllegalStateException: System services not available to Activities before onCreate()
06-10 14:27:03.775: E/AndroidRuntime(23770):    at android.app.Activity.getSystemService(Activity.java:3562)
06-10 14:27:03.775: E/AndroidRuntime(23770):    at android.app.Dialog.<init>(Dialog.java:141)
06-10 14:27:03.775: E/AndroidRuntime(23770):    at android.app.AlertDialog.<init>(AlertDialog.java:63)
06-10 14:27:03.775: E/AndroidRuntime(23770):    at android.app.ProgressDialog.<init>(ProgressDialog.java:80)
06-10 14:27:03.775: E/AndroidRuntime(23770):    at android.app.ProgressDialog.<init>(ProgressDialog.java:76)
06-10 14:27:03.775: E/AndroidRuntime(23770):    at android.app.ProgressDialog.show(ProgressDialog.java:101)
06-10 14:27:03.775: E/AndroidRuntime(23770):    at android.app.ProgressDialog.show(ProgressDialog.java:90)
06-10 14:27:03.775: E/AndroidRuntime(23770):    at com.zafar.login.FileUpload.<init>(FileUpload.java:25)
06-10 14:27:03.775: E/AndroidRuntime(23770):    at com.zafar.login.Camera$1.onClick(Camera.java:52)
06-10 14:27:03.775: E/AndroidRuntime(23770):    at android.view.View.performClick(View.java:2538)
06-10 14:27:03.775: E/AndroidRuntime(23770):    at android.view.View$PerformClick.run(View.java:9152)
06-10 14:27:03.775: E/AndroidRuntime(23770):    at android.os.Handler.handleCallback(Handler.java:587)
06-10 14:27:03.775: E/AndroidRuntime(23770):    at android.os.Handler.dispatchMessage(Handler.java:92)
06-10 14:27:03.775: E/AndroidRuntime(23770):    at android.os.Looper.loop(Looper.java:130)
06-10 14:27:03.775: E/AndroidRuntime(23770):    at android.app.ActivityThread.main(ActivityThread.java:3691)
06-10 14:27:03.775: E/AndroidRuntime(23770):    at java.lang.reflect.Method.invokeNative(Native Method)
06-10 14:27:03.775: E/AndroidRuntime(23770):    at java.lang.reflect.Method.invoke(Method.java:507)
06-10 14:27:03.775: E/AndroidRuntime(23770):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
06-10 14:27:03.775: E/AndroidRuntime(23770):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
06-10 14:27:03.775: E/AndroidRuntime(23770):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T11:54:12.663

您`Object FileUpload`使用`new`. 在Android中，建议将Activity设计成一个独立的模块，由Android创建。如果您想与其他活动通信，则应使用 Intent 来执行此操作。

```
fu = new FileUpload(bmp.toString()); // here make error. 
```

在 android 中，不可能创建另一个活动的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T11:56:00.920

我建议您创建一个 FTP 服务器并使用 ftp 上传您的文件。以下代码是一种从 FTP 服务器获取文件的方法。自定义它以进行上传：

```
public static boolean getFile(String serverName, String userName,
        String password, String serverFilePath, String localFilePath)
        throws Exception {

    FTPClient ftp = new FTPClient();

    try {
        // ftp.setCopyStreamListener();

        ftp.connect(serverName);
        int reply = ftp.getReplyCode();

        if (!FTPReply.isPositiveCompletion(reply)) {
            ftp.disconnect();
            return false;
        }
    } catch (IOException e) {
        if (ftp.isConnected()) {
            try {
                ftp.disconnect();
            } catch (IOException f) {
                throw e;
            }
        }
        throw e;
    } catch (Exception e) {
        throw e;
    }

    try {
        // String filePath = "system/mswin.98/SETUP0.WAV";
        if (!ftp.login(userName, password)) {
            ftp.logout();
        }
        // if (binaryTransfer)
        ftp.setFileType(FTPClient.BINARY_FILE_TYPE);
        // ftp.enterLocalPassiveMode();
        ftp.enterLocalActiveMode();

        OutputStream output;

        if (checkAndCreateDirectories(localFilePath)) {
            output = new FileOutputStream(localFilePath);
            ftp.retrieveFile(serverFilePath, output);
            output.close();
        }

        ftp.noop(); // check that control connection is working OK
        ftp.logout();
        return true;

    } catch (FTPConnectionClosedException e) {
        throw e;
    } catch (IOException e) {
        throw e;
    } catch (Exception e) {
        throw e;
    } finally {
        if (ftp.isConnected()) {
            try {
                ftp.disconnect();
            } catch (IOException f) {
                throw f;
            }
        }

    }

} 
```

# glassfish - 嵌入 Glassfish v2.1.1

> ID：10968351
> 
> 赞同：1
> 
> 时间：2012-06-10T11:38:27.533
> 
> 标签：glassfish

我有一个在服务器上的 Glassfish v2.1.1 上运行的应用程序，我希望生成它的可移植（阅读：无需安装）版本。我不想移动到另一个容器（Glassfish 3、Tomcat 等），因为它会引入新的问题和错误。我更喜欢坚持使用同一个容器。

我已经开始拆解 Glassfish 发行版，那里有一些路径参考暗示需要安装。有没有人成功地生成了基于 v2.1.1 的便携式 Glassfish？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-15T06:09:00.137

嵌入 GlassFish 并将应用程序部署到嵌入式 GlassFish 的基本示例：

这些示例可以在您的 CLASSPATH 中使用以下任一 jar 运行：

完整配置文件 uber jar：http: [//download.java.net/maven/glassfish/org/glassfish/extras/glassfish-embedded-all/3.1/glassfish-embedded-all-3.1.jar](http://download.java.net/maven/glassfish/org/glassfish/extras/glassfish-embedded-all/3.1/glassfish-embedded-all-3.1.jar) 网络配置文件 uber jar：[http:// /download.java.net/maven/glassfish/org/glassfish/extras/glassfish-embedded-web/3.1/glassfish-embedded-web-3.1.jar](http://download.java.net/maven/glassfish/org/glassfish/extras/glassfish-embedded-web/3.1/glassfish-embedded-web-3.1.jar) 安装了 GlassFish 的 shell jar：$GF_INSTALLATION/lib/embedded/glassfish-embedded-静态shell.jar

一旦您拥有上述任何一个 jar 文件，只需执行以下操作，GlassFish 就可以嵌入到您的应用程序中：

```
import org.glassfish.embeddable.*;

/** Create and start GlassFish */
GlassFish glassfish = GlassFishRuntime.bootstrap().newGlassFish();
glassfish.start(); 
```

假设您希望在嵌入 GlassFish 时启动 8080 Web 容器端口，那么您必须这样做：

```
import org.glassfish.embeddable.*;

/** Create and start GlassFish which listens at 8080 http port */
GlassFishProperties gfProps = new GlassFishProperties();
gfProps.setPort("http-listener", 8080); // refer JavaDocs for the details of this API.

GlassFish glassfish = GlassFishRuntime.bootstrap().newGlassFish(gfProps);
glassfish.start(); 
```

嵌入并运行 GlassFish 后，您可能希望使用以下代码部署预构建的 Java EE 存档：

```
import org.glassfish.embeddable.*;

// Obtain the deployer from the glassfish which is embedded via the piece of code     above.
Deployer deployer = glassfish.getDeployer();

// syntax of deployment params are same as how they are passed to 'asadmin deploy'  command.
deployer.deploy(new File("simple.war"), "--contextroot=test", "--name=test", "--force=true");

// if you have no deployment params to pass, then simply do this:
deployer.deploy(new File("simple.war")); 
```

如果您的存档不是预先构建的，而是它的组件分散在多个目录中，那么您可能会对使用分散的存档 API 感兴趣：

```
import org.glassfish.embeddable.*;
import org.glassfish.embeddable.archive.*;

Deployer deployer = glassfish.getDeployer();

// Create a scattered web application.
ScatteredArchive archive = new ScatteredArchive("testapp", ScatteredArchive.Type.WAR);
// target/classes directory contains my complied servlets
archive.addClassPath(new File("target", "classes"));
// resources/sun-web.xml is my WEB-INF/sun-web.xml
archive.addMetadata(new File("resources", "sun-web.xml"));
// resources/MyLogFactory is my META-INF/services/org.apache.commons.logging.LogFactory
archive.addMetadata(new File("resources", "MyLogFactory"), "META-     INF/services/org.apache.commons.logging.LogFactory");

deployer.deploy(archive.toURI()) 
```

同样，分散的企业应用程序（EAR 类型）可以这样部署：

```
import org.glassfish.embeddable.*;
import org.glassfish.embeddable.archive.*;

Deployer deployer = glassfish.getDeployer();

// Create a scattered web application.
ScatteredArchive webmodule = new ScatteredArchive("testweb",       ScatteredArchive.Type.WAR);
// target/classes directory contains my complied servlets
webmodule.addClassPath(new File("target", "classes"));
// resources/sun-web.xml is my WEB-INF/sun-web.xml
webmodule.addMetadata(new File("resources", "sun-web.xml"));

// Create a scattered enterprise archive.
ScatteredEnterpriseArchive archive = new ScatteredEnterpriseArchive("testapp");
// src/application.xml is my META-INF/application.xml
archive.addMetadata(new File("src", "application.xml"));
// Add scattered web module to the scattered enterprise archive.
// src/application.xml references Web module as "scattered.war". Hence specify the name          while adding the archive.
archive.addArchive(webmodule.toURI(), "scattered.war");
// lib/mylibrary.jar is a library JAR file.
archive.addArchive(new File("lib", "mylibrary.jar"));
// target/ejbclasses contain my compiled EJB module.
// src/application.xml references EJB module as "ejb.jar". Hence specify the name while      adding the archive.
archive.addArchive(new File("target", "ejbclasses"), "ejb.jar");

deployer.deploy(archive.toURI()) 
```

最后，在您的应用程序快要结束时，您想停止/处理您的嵌入式 GlassFish：

```
import org.glassfish.embeddable.*;

/** Stop GlassFish */
glassfish.stop(); // you can start it again.

/** Dispose GlassFish */
glassfish.dispose(); // you can not start it again. But you can embed a fresh glassfish     with GlassFishRuntime.bootstrap().newGlassFish() 
```

# gwt - GWT Designer - 没有打开编辑器，没有显示编译按钮

> ID：10968356
> 
> 赞同：1
> 
> 时间：2012-06-10T11:38:55.447
> 
> 标签：gwt

我安装了以下

> GWT Designer 2.5.0.r37x201202061331 com.google.gdt.eclipse.designer.feature.feature.group Google, Inc.
> 
> GWT Designer 核心 2.5.0.r37x201202052353 com.google.gdt.eclipse.designer.hosted.feature.feature.group Google, Inc.
> 
> GWT Designer Editor 2.5.0.r37x201202061313 com.google.gdt.eclipse.designer.editor.feature.feature.group Google, Inc.
> 
> GWT Designer GPE 2.5.0.r37x201201030222 com.google.gdt.eclipse.designer.gpe.feature.feature.group Google, Inc.

我可以使用 GWT 向导来设置 GWT 项目，但是，当我打开一个 ui.xml 文件时，我只得到一个 XML 编辑器（没有设计器）。此外，任何地方都没有 GWT 编译按钮。我尝试右键单击该项目，但那里没有 Google 菜单或工具栏中的任何按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T12:27:27.977

首先，如果不添加，您是否有设计器插件。如果你有插件然后关闭你的 web xml 文件的第一个标签。它将打开设计师。要编译，请点击项目转到 google 选项，然后转到 gwt 编译选项来编译您的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T14:23:00.963

如果您已正确安装 GPE 插件。

*   右键单击ui文件
*   打开用
*   WindowBuilder 编辑器

两个选项卡位于左按钮角。单击设计。

# php - 在 PHP 中提取 ZIP 文件的子文件夹

> ID：10968359
> 
> 赞同：3
> 
> 时间：2012-06-10T11:39:02.133
> 
> 标签：php, zip, unzip

我正在使用 php 脚本来解压缩 ZIP 文件。但是此脚本仅解压缩一级目录而不提取该文件的子目录脚本：

```
$zip = new ZipArchive;
if ($zip->open('test.zip') === TRUE) {
    $zip->extractTo('/my/destination/dir/');
    $zip->close();
    echo 'ok';
} else {
    echo 'failed';
} 
```

例如：如果 test.zip 包含 2 个文件夹：folder1\file.png、folder2\folder3\file3.png

解压此 ZIP 文件后，我只看到文件夹 1*.* 和文件夹 2*.*，但没有子目录文件夹 3。

我该如何改进它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T11:44:47.700

我认为这本 PHP 手册会对您有所帮助 [http://php.net/manual/en/ref.zip.php](http://php.net/manual/en/ref.zip.php)

```
<?php
$file = "2537c61ef7f47fc3ae919da08bcc1911.zip";
$dir = getcwd();
function Unzip($dir, $file, $destiny="")
{
    $dir .= DIRECTORY_SEPARATOR;
    $path_file = $dir . $file;
    $zip = zip_open($path_file);
    $_tmp = array();
    $count=0;
    if ($zip)
    {
        while ($zip_entry = zip_read($zip))
        {
            $_tmp[$count]["filename"] = zip_entry_name($zip_entry);
            $_tmp[$count]["stored_filename"] = zip_entry_name($zip_entry);
            $_tmp[$count]["size"] = zip_entry_filesize($zip_entry);
            $_tmp[$count]["compressed_size"] = zip_entry_compressedsize($zip_entry);
            $_tmp[$count]["mtime"] = "";
            $_tmp[$count]["comment"] = "";
            $_tmp[$count]["folder"] = dirname(zip_entry_name($zip_entry));
            $_tmp[$count]["index"] = $count;
            $_tmp[$count]["status"] = "ok";
            $_tmp[$count]["method"] = zip_entry_compressionmethod($zip_entry);

            if (zip_entry_open($zip, $zip_entry, "r"))
            {
                $buf = zip_entry_read($zip_entry, zip_entry_filesize($zip_entry));
                if($destiny)
                {
                    $path_file = str_replace("/",DIRECTORY_SEPARATOR, $destiny . zip_entry_name($zip_entry));
                }
                else
                {
                    $path_file = str_replace("/",DIRECTORY_SEPARATOR, $dir . zip_entry_name($zip_entry));
                }
                $new_dir = dirname($path_file);

                // Create Recursive Directory (if not exist)  
                if (!file_exists($new_dir)) {
                  mkdir($new_dir, 0700);
                }

                $fp = fopen($dir . zip_entry_name($zip_entry), "w");
                fwrite($fp, $buf);
                fclose($fp);

                zip_entry_close($zip_entry);
            }
            echo "\n</pre>";
            $count++;
        }

        zip_close($zip);
    }
}
Unzip($dir,$file);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-08T15:14:39.413

此脚本递归地提取 zip 文件中的所有文件。这会将它们提取到当前目录中。

```
 <?php
    set_time_limit(0);

    echo "HI<br><br>";
    //----------------
    //UNZIP a zip file
    //----------------

    $zipfilename = "site.zip";

    //----------------

    function unzip($file){

        $zip=zip_open(realpath(".")."/".$file);
        if(!$zip) {return("Unable to proccess file '{$file}'");}

        $e='';

        while($zip_entry=zip_read($zip)) {
           $zdir=dirname(zip_entry_name($zip_entry));
           $zname=zip_entry_name($zip_entry);

           if(!zip_entry_open($zip,$zip_entry,"r")) {$e.="Unable to proccess file '{$zname}'";continue;}
           if(!is_dir($zdir)) mkdirr($zdir,0777);

           #print "{$zdir} | {$zname} \n";

           $zip_fs=zip_entry_filesize($zip_entry);
           if(empty($zip_fs)) continue;

           $zz=zip_entry_read($zip_entry,$zip_fs);

           $z=fopen($zname,"w");
           fwrite($z,$zz);
           fclose($z);
           zip_entry_close($zip_entry);

        }
        zip_close($zip);

        return($e);
    }

    function mkdirr($pn,$mode=null) {

      if(is_dir($pn)||empty($pn)) return true;
      $pn=str_replace(array('/', ''),DIRECTORY_SEPARATOR,$pn);

      if(is_file($pn)) {trigger_error('mkdirr() File exists', E_USER_WARNING);return false;}

      $next_pathname=substr($pn,0,strrpos($pn,DIRECTORY_SEPARATOR));
      if(mkdirr($next_pathname,$mode)) {if(!file_exists($pn)) {return mkdir($pn,$mode);} }
      return false;
    }

    unzip($zipfilename);

    ?> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-04-06T13:11:11.667

试试这个简单的方法：

```
system('unzip my_zip_file.zip'); 
```

# onclick - Aptana 显示警告“输入专有属性 onclick”

> ID：10968367
> 
> 赞同：3
> 
> 时间：2012-06-10T11:40:17.620
> 
> 标签：onclick, aptana

在 Aptana Studio 中输入代码行时，例如

> `<input id="send" type="button" value="Send" onclick="calculate()" />`

Aptana 显示警告：“输入专有属性 onclick”。

我想知道这是否是一个错误。前几天也有类似的问题： [https](https://jira.appcelerator.org/browse/APSTUD-4873) ://jira.appcelerator.org/browse/APSTUD-4873叫
“'button专有属性onclick'是无效警告”

版本：Aptana Studio 3，内部版本：3.1.3.201205292243

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T00:41:49.040

是的，它包含在 JIRA 票证中，并在 Aptana Studio 3.2 的最新夜间版本中得到解决。

# asp.net - 如何在 asp.net 应用程序中捕获未处理的异常？

> ID：10968370
> 
> 赞同：4
> 
> 时间：2012-06-10T11:40:43.297
> 
> 标签：asp.net, .net

在 .NET 考试中，我遇到了这个问题。

您可以使用以下哪项来捕获应用程序中未处理的异常？

*   服务器错误
*   Page_Error
*   应用程序错误
*   Response_Error
*   OnError 事件

我知道它的 Application_Error，但我想知道其他的是什么。通过一些谷歌搜索，我发现 OnError 可用于捕获任何错误。我仍然不确定。你能告诉我捕捉未处理异常的其他方法吗

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-10T12:03:02.930

捕获未知错误的正确点是`Application_Error`.

避免捕获页面上的OnError，让系统将其转移到Application_Error，因为您已经失去了对页面的控制，那么如果不将其转移到某个错误页面，您还能做什么呢？- 如果您尝试重新加载它，您会遇到可能导致堆栈溢出的闭环问题。

根据我的经验，当我尝试使用页面处理错误时遇到问题，`OnError`并且只有在我必须释放一些全局内存时才使用它，或者如果页面上发生错误则类似的情况。

总结一下，尝试在 try/catch 块中捕获所有错误，并向您的用户发送消息/或只是处理此问题，但让全局捕获器记录并修复未知错误。未知错误会让你失去对程序的真正控制，实际上你不知道该怎么做，因为你没有预测它 - 所以记录它并在下次修复它

有关错误的更多详细信息： [如何在我的 ASP.NET 应用程序中创建一个“通用错误”页面，以便它处理在提供该页面本身时触发的错误？](https://stackoverflow.com/questions/10751363/how-do-i-make-a-generic-error-page-in-my-asp-net-application-so-that-it-handle/10751939#10751939)

# java - 灵活的jni项目

> ID：10968371
> 
> 赞同：3
> 
> 时间：2012-06-10T11:41:02.363
> 
> 标签：java, c++, java-native-interface

似乎与 jni 一起工作将成为我几个月的日常工作。有没有一些工具可以简化处理混合 Java + C++ 项目的过程？

是否可以重新生成胶水 *.h 文件并自动重建本机库？或者我应该为 maven、ant、gradle、anything_else 写一些脚本？有没有经验？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T11:45:58.497

查看[JavaCPP](http://code.google.com/p/javacpp/)！我还在该页面上列出了其他解决方案......还有[Jace](http://code.google.com/p/jace/)在尝试从 C++ 中使用 Java 时很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T13:26:40.777

您可以使用[SWIG](http://swig.org)自动生成胶水代码并使用 make 目标来重建本机库。您也可以将 ANT 的 c++ 任务用于相同目的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T10:30:33.527

你问的是经历。所以我的经验是，你应该从精心设计的需求、行为和对象生命周期开始。这应该会产生一个成熟的界面，在未来几乎不会改变。效果是您将需要很少更改胶水头文件，简单的一次 javah 就足够了。我知道这一切听起来都不是很敏捷，但是 JNI 只不过是一个快速的开发环境。

每天更改两次界面，添加和删除方法以及更改签名“只是为了看看它是否有帮助”是一条通往地狱的必经之路。在内存管理方面，您正在连接两个截然不同的世界，JVM 很容易感到紧张。线程安全又提升了一个层次。上面提到的辅助解决方案，虽然它们无疑是一个聪明的软件，但可能会让您错误地认为 JNI 很简单。然后 JVM 开始突然给你异常，你的对象将开始随机未初始化，等等......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-10T11:57:48.967

几个月前，我遇到了同样的问题。看来Java/C++互操作刚刚复苏，你是先驱者之一。

如果您只是使用 Java 中的 C++ 对象，那么[JNA](https://github.com/twall/jna)可能是更好的解决方案。

如果您使用 C++ 中的 Java，我还没有遇到成熟的库。尽管功能相当完整，但**JNI 是一个 C api**（有意地，如果您阅读设计原理）。如果您要为其编写大量代码，我认为围绕它编写一个将裸露的`jobject`, `jnienv`, `jclass`... 句柄包装到显式资源中的 C++ 框架是值得的。

当 C++ 和 Java 必须使用回调等进行合作时，真正的问题就出现了......如果这是你的意图，请系好安全带......

# c++ - C++比较，结果如何？

> ID：10968375
> 
> 赞同：1
> 
> 时间：2012-06-10T11:43:01.367
> 
> 标签：c++

有简单的代码

```
int a( int *p0 ) {
        int p;
        if( p0 ) return p0 > &p;
        return a(&p);
}

int main() {
        puts( a(0) ? "y" : "n" );
} 
```

结果会是什么？方法`a`会被调用多少次？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T11:47:56.530

`>`如果指针不属于同一数组，则未指定比较指针 using 。

所以没有实际的答案，尽管您可以假设堆栈是否增长`if( p0 ) return p0 > &p;`为真，否则为假。

# joomla - k2 组件将其图像存储在数据库中的什么位置？

> ID：10968380
> 
> 赞同：10
> 
> 时间：2012-06-10T11:43:27.527
> 
> 标签：joomla, components, joomla-k2

我想检索/查询 joomla k2 组件存储的图像（在图像选项卡下）。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-20T09:32:34.950

要显示 K2 项目图像，您可以使用它

```
echo "media/k2/items/cache/".md5("Image".K2 ITEM ID HERE)."_XL.jpg"; 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-06-10T17:11:30.597

**它根本不存储在数据库中。**

他们在实际的 K2 项目 ID 上使用 md5 哈希，这就是他们重命名图像并将其保存在文件夹中的方式`media/k2/items/cache/`。

K2项目被拉起的任何地方，他们使用`JFile::exists`（用于检查路径集中是否存在文件）与路径

```
URL-ROOT."media/k2/items/cache/".md5("image" . K2 ITEM ID HERE)."_XL.jpg" 
```

如果文件在那里，它会显示图像。

此外，这`_XL.jpg`将根据图像设置在页面上显示的大小而变化，无论是缩略图、大号还是 XL 号等。

我知道这不是您想听到的，但他们就是这样做的:) 希望对人有所帮助！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-10T10:25:54.040

尽管您得到了答案，但分享信息可能会有所帮助：

如果在 K2 模板（Html 覆盖）中工作，则可以使用以下内容访问通过 K2 图像选项卡添加的图像。

```
$this->item->image 
```

或者

```
$this->item->imageXLarge (size you want) 
```

你得到相对网址：**/media/k2/items/cache/29642a1d30cebf98734fb424b2b1316b_L.jpg**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-17T02:29:30.237

您可以在 media/k2/items/src/ 目录中找到原件。此外，@David 是正确的，需要“图像”作为 k2 项目 ID 的前缀。

# actionscript-3 - 设置打印作业名称

> ID：10968382
> 
> 赞同：1
> 
> 时间：2012-06-10T11:43:52.480
> 
> 标签：actionscript-3, flash

打印 MovieClip 时是否可以设置[PrintJob的名称？](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/printing/PrintJob.html)目前，PrintJob 仅称为“Flash”，当我尝试将其保存为 PDF 时，它被命名为“Flash.pdf”。

# html - 使用 HTML 标签防止 gzip

> ID：10968386
> 
> 赞同：1
> 
> 时间：2012-06-10T11:44:32.097
> 
> 标签：html, gzip, meta-tags

我有一个直接的 HTML 页面，我想将其用于诊断检查，所以我想在每次引用它时重新加载它并加载字符串。强制重新加载相对容易，但我无法阻止 gzip 编码。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
     <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
     <META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">
     <META HTTP-EQUIV="PRAGMA" CONTENT="NO-CACHE">
     <META HTTP-EQUIV="Content-Encoding" CONTENT="text/html text/plain *;q=0"> 
```

我强烈希望使用 HTML 来执行此操作，而不是使用服务器端解决方法。

谢谢。

PS：如果 NO-CACHE 不起作用，您可以通过在 URL 上附加一些内容来轻松强制重新加载。我用

```
 var time=new Date().getTime();
 URL=URL+"?time="+time; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T11:46:24.713

Gzip 编码由服务器处理。无法通过更改文档来防止它。

# java - java中的版本不匹配

> ID：10968389
> 
> 赞同：0
> 
> 时间：2012-06-10T11:44:38.107
> 
> 标签：java, netbeans, version

我正在从事一个基于 cloudsim3.0 项目的大学项目。我使用的是 jdk 7，而 cloudsim 使用的是 jdk 1.3。所以我必须改变一切：泛型、`for-each`循环等等。我从 NetBeans 收到的一些错误是：

*   -source1.3 不支持泛型（使用 -source7 或更高版本...）
*   -source1.3 不支持开关中的字符串（使用 -source7 或更高版本...）...

如何将 jdk 版本从 1.3 更改为 7？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T12:15:03.963

通常，您要非常小心地使用比您部署的更高版本的 Java 进行开发。Netbeans 使用的 JDK 中的 java 编译器不支持将 Java 7 源代码编译为 1.3 字节码，因此您需要使用另一个编译器。

我花了一些时间来研究这个针对 Java 1.4 的问题，您可以直接在 Eclipse 中使用 Eclipse 编译器，也可以作为 ecj（这是命令行中的 javac 替换），它可以在 ant 内部使用，或者您可以使用主动将字节码转换为早期版本的 Retroweaver。

您可能会考虑硬着头皮将 Java 1.3 用于您的项目，因为如果您的代码因任何原因不起作用，它会从您需要调查的内容中​​删除所有这些神奇的子弹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T12:15:28.523

你的问题有点困惑，但如果你问如何为 JDK 1.3 编译 Java 7 源代码，这最有意义。

答案是你不能。这些构造（泛型、for-each 循环、字符串开关）都需要更现代的目标平台。

理论上，您有两种可能的解决方案：

*   从您的代码中删除所有 Java 5、6、7-isms 并使用`-source 1.3 -target 1.3`. （或者下载并安装旧的 Java 1.3 JDK。）

*   使用 Java 7 JVM 运行 CloudSim3.0 代码。它应该可以工作，除非它依赖于已修复的旧错误。

# php - 确定哪个字段导致 Doctrine 重新查询数据库

> ID：10968390
> 
> 赞同：5
> 
> 时间：2012-06-10T11:44:40.710
> 
> 标签：php, orm, doctrine, doctrine-1.2

我在几个 Web 应用程序项目中使用 Doctrine 和 Symfony。

我已经优化了这些项目中的许多查询，以仅从数据库中选择所需的字段。但是随着时间的推移，已经添加了新功能，并且 - 在某些情况下 - 代码中使用了额外的字段，导致 Doctrine 惰性加载器重新查询数据库并将某些页面上的查询数量从 3 增加到 100+

所以我需要更新原始查询以包含所有必填字段。但是，Doctrine 似乎没有一种简单的方法来记录哪个字段导致发出附加查询 - 因此筛选代码以查找不在原始查询中的字段的使用情况成为一项艰巨的工作。

当 getter 访问尚未水合的字段时，有没有办法让 Doctrine 记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T05:49:16.677

我没有遇到过这个问题，只是看了 Doctrine_Record 类。您是否尝试向 _get() 方法添加一些调试输出？我认为这部分是您应该寻找解决方案的地方：

```
 if (array_key_exists($fieldName, $this->_data)) {
        // check if the value is the Doctrine_Null object located in self::$_null)
        if ($this->_data[$fieldName] === self::$_null && $load) {
            $this->load();
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T20:16:51.013

只需打开 SQL 日志记录，您就可以从别名中推断出有罪的人。关于如何在 Doctrine 1.2 中做到这一点，请参阅这篇[文章](http://adeslade.co.uk/post/logging-queries-in-doctrine-1-2)。

*基本上*：创建一个扩展 Doctrine_EventListener 的类：

```
class QueryDebuggerListener extends Doctrine_EventListener
{
    protected $queries;

    public function preStmtExecute(Doctrine_Event $event)
    {   
        $query = $event->getQuery();
        $params = $event->getParams();

        //the below makes some naive assumptions about the queries being logged
        while (sizeof($params) > 0) {
            $param = array_shift($params); 

            if (!is_numeric($param)) {
                $param = sprintf("'%s'", $param);
            }   

            $query = substr_replace($query, $param, strpos($query, '?'), 1); 
        }   

        $this->queries[] = $query;
    }

    public function getQueries()
    {   
        return $this->queries;
    }
} 
```

并添加事件监听器：

```
$c = Doctrine_Manager::connection($conn);
$queryDbg = new QueryDebuggerListener();
$c->addListener($queryDbg); 
```

# installation - Inno Setup，从 cd rom 慢

> ID：10968393
> 
> 赞同：4
> 
> 时间：2012-06-10T11:45:10.803
> 
> 标签：installation, windows-installer, inno-setup

我正在使用 Inno Setup Compiler 5.4.3。创建安装应用程序

我的应用程序具有以下结构：

*   应用程序
*   数据

其中 data 是我保存所有应用程序相关文件（jpg 图像）的文件夹。该应用程序将从 cd-rom 分发。使用向导创建安装后，我得到了一个大小为 300Mb 的文件。

问题是系统从 cd 打开它需要 2-3 分钟。我猜这是因为文件大小。没有安装程序的任何响应，时间太长了。

这种情况有一些简单的解决方案吗？我不需要压缩文件，如果我可以使安装程序结构看起来与应用程序结构相同（而不是只有一个文件......），我会很好。任何可以使其执行得更快的解决方案都会很好。

谢谢， 韦德兰

更新：这是我的文件设置的样子：

```
[Files]
Source: "C:\data\palacabencic\bin\PalacaBencic.exe"; DestDir: "{app}"; Flags: ignoreversion
Source: "{src}C:\data\palacabencic\bin\data\*"; DestDir: "{app}\data"; Flags: external 
```

如果我尝试将 {src} 和外部：

```
Source: "{src}C:\data\palacabencic\bin\data\*"; DestDir: "{app}\data"; Flags: external 
```

它不会在安装程序文件夹中添加数据文件夹，它只会创建安装文件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T13:26:58.127

您的问题是资源管理器在启动之前尝试在安装可执行文件上查找/验证代码签名证书。由于文件很大，它会在尝试运行之前至少读取整个文件一次。这与[Inno KB 文章](http://www.jrsoftware.org/iskb.php?wrongicon)中记录的导致图标不显示的问题相同。

对此的解决方案是使用`external`数据文件上的标志（如[TLama](https://stackoverflow.com/a/10968484/588306)建议的那样），或使用磁盘跨越将设置拆分为主设置和数据文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T12:01:04.927

在您的部分记录中指定`external`标志。[`[Files]`](http://www.jrsoftware.org/ishelp/topic_filessection.htm)注意：

> 当指定外部标志时，Source 必须是分发媒体或用户系统上现有文件（或通配符）的完整路径名（例如“{src}\license.ini”）。

这样的事情应该防止将文件包含到输出设置文件中：

```
[Files]
Source: "{src}\Image.jpg"; DestDir: "{app}"; Flags: external 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T21:15:25.660

当您使用该`external`标志时，您是在告诉 Inno 复制用户系统上已经可用的未压缩文件（在您的情况下，在 CD 上）。并`{src}`指定相对于 setup.exe 本身的路径。

```
[Files]
Source: "C:\data\palacabencic\bin\PalacaBencic.exe"; DestDir: "{app}"; Flags: ignoreversion
Source: "{src}\data\*"; DestDir: "{app}\data"; Flags: external 
```

编译的输出将只是安装程序，但是在您将其和数据文件复制到 CD 之后，它会在您运行安装程序时将两者复制到最终安装路径。

# xcode - Xcode 4.3.2 和 iOS 5.1.1 + 越狱：应用程序安装但启动时崩溃

> ID：10968396
> 
> 赞同：3
> 
> 时间：2012-06-10T11:45:35.823
> 
> 标签：xcode, crash, xcode4.3, jailbreak

我没有 Apple 79 欧元/年帐户。在 iOS 5.0 和 Xcode 4.2.1 中，我更改了 SDKSettings.plist ecc ... 并且它可以工作。在 iOS 5.1.1 和 Xcode 4.3.2 中不，我已经更改了设置 ecc 但不起作用，应用程序安装在设备上但在启动时崩溃...如何在设备上运行我的应用程序而不会崩溃？谢谢，对不起我的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T21:22:23.977

我之前在越狱设备上遇到过这个问题。根据确切的问题，您有一些解决方案。首先，如果您没有使用有效的代码签名身份，您可以安装应用同步以允许未签名的代码在您的设备上运行。第二个选项是实际获取有效的代码签名身份以及配置文件，以便您可以正确运行应用程序。这涉及为开发人员计划付费，因此这可能不是最佳选择。

最后是越狱设备的一个非常常见的问题。即您将收到诸如“未能获取进程 xxxxx 的任务”之类的错误。越狱设备往往会发生这种情况。这是因为 Xcode 注意到您没有使用报告错误日志所需的配置文件。您所要做的就是在设备上再次启动应用程序，一切都应该正常工作。

这只是 Xcode 由于缺少配置文件而无法完全启动您的应用程序，因此会导致崩溃。如果这些解决方案都不能解决您的问题，请发布您遇到的问题的更详细说明。

# php - vmware 安装后 Wamp 停止工作。

> ID：10968398
> 
> 赞同：0
> 
> 时间：2012-06-10T11:45:49.823
> 
> 标签：php, wamp, vmware, wampserver

我的 wamp 在 2 个虚拟主机上运行良好。但是安装 vmaware wamp 服务器后无法启动。关于这个问题的任何想法？或者我怎么能弄清楚是什么让 wamp 没有启动，它是否将它的错误日志存储在某个地方？

我正在使用寡妇7。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T12:19:26.233

WMWare 可能使用与 WAMP 相同的端口。我记得 Skype 这样做导致 APACHE 无法启动其端口上的服务器。

您可以使用本教程尝试更改 vSphere 端口的默认值 80：http: //kb.vmware.com/selfservice/microsites/search.do?language=en_US&cmd=displayKC&externalId= [1021199](http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&cmd=displayKC&externalId=1021199)

LE：可能还有其他一些使用 80 端口的 WMWare 组件。尝试关闭所有 WMWare 组件并启动 WAMP。如果它有效，那么 WMWare 正在使用 80 端口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T15:36:41.893

Most probably the 2 fight over the same port (80). Also, *Skype* might cause *WAMP* to fail at starting and to display "304" errors for every GET request on the server.

Change *WAMP*'s listening port from `\wamp\bin\apache\apache2.2.8\conf`. Locate `httpd.conf`, open it with a text editor and search for listening. Change to whatever port you consider.

# ios - 如果图标有圆角，我的应用程序会被拒绝吗？

> ID：10968402
> 
> 赞同：6
> 
> 时间：2012-06-10T11:46:24.150
> 
> 标签：ios

[指南](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html)指定我“*应该提供一个具有 90° 角的图像（避免裁剪图标的角很重要——iOS 在应用圆角掩码时会为你做到这一点）”*

我看到很多应用程序不遵守此建议。**Apple 根据应用图标的圆角拒绝我的应用的风险有多大？**

[![带圆角的应用程序图标](../Images/6ee0bab677b9f8c396e02755adb71b67.png)](http://golfbravo.net/audiopad)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T11:58:37.250

我以前做过，没有被拒绝。只需确保您的图标角与 iOS 应用的角正确对齐。（如果他们不这样做可能看起来很奇怪）只要您手动设置角落的事实对用户来说并不明显，您应该没问题。

# git - 将我的叉子与别人的叉子合并

> ID：10968406
> 
> 赞同：2
> 
> 时间：2012-06-10T11:46:41.407
> 
> 标签：git, github

我在 Github 上分叉了一个 repo，另一个人也分叉了
我想将其他人的分支合并到我的分支
我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T12:17:09.667

我想你有以下 Github 存储库：

*   [http://www.github.com/mainuser/mainrepo.git](http://www.github.com/mainuser/mainrepo.git)（原始项目）
*   [http://www.github.com/you/yourfork.git](http://www.github.com/you/yourfork.git)（你的叉子）
*   [http://www.github.com/other/anotherfork.git](http://www.github.com/other/anotherfork.git)（另一个分叉）

如果你在你的 fork 上工作，你有一个你自己的 fork 的本地克隆：

```
git clone git@github.com:you/yourfork.git 
```

为了使用原始项目（和另一个分支），您必须添加相应的遥控器：

```
git remote add upstream http://www.github.com/mainuser/mainrepo.git
git remote add fork http://www.github.com/other/anotherfork.git 
```

使用这些遥控器，您可以通过获取远程信息：

```
git fetch upstream
git fetch fork 
```

最后，您可以将作品与您的作品合并：

```
git merge fork/branch_you_want_to_merge 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T11:49:15.243

你的意思可能`branch`不是叉子。

```
git checkout your-branch
git merge other-guys-branch 
```

# python - web2py 如何注销用户

> ID：10968411
> 
> 赞同：3
> 
> 时间：2012-06-10T11:47:03.567
> 
> 标签：python, login, web2py, logout

我刚刚开始研究 web2py，该方法中的很多东西都是 nwe，例如使用视图的默认值等。我花了很多时间试图弄清楚如何让人们登录并最终放入

```
@auth.requires_login() 
```

在控制器方法的开始。这神奇地显示了一个注册表单，之后新用户登录了。我不确定我是否完全了解幕后发生的事情，但一步一步来。

但是，我想提供一个注销按钮，但不知道如何实现。显然我需要以某种方式调用默认注销。所以我需要在提交表单/按钮中添加一个 url 并大概创建一个控制器来匹配 url，但是注销的方法会是什么样子？

在用户方法中是暴露语句，但不知道它们的含义或如何使用它们。所有这些点都让我感到困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T14:22:52.443

> 我花了很多时间试图弄清楚如何让人们登录

你读过这本书的[这一部分吗？](http://web2py.com/books/default/chapter/29/9#Authentication)它解释了`@auth.requires_login()`默认`user()`函数的使用和如何工作以公开登录功能（以及如何在需要时专门为登录创建单独的操作）。在脚手架应用程序中，default.py 控制器包含以下`user()`函数以公开所有 Auth 操作：

```
def user():
    return dict(form=auth()) 
```

在像“/myapp/default/user/[action]”这样的 URL 中，请求的 Auth 操作（即 URL 的最后一个元素）将在 request.args[0] 中可用。当上述函数调用`auth()`时，Auth`__call__()`方法会从 request.args[0] 中读取动作，然后调用相应的 Auth 方法。如果 URL 是“/myapp/default/user/login”，`auth()`最终将调用该`auth.login()`方法，该方法将返回（并处理）登录表单。`auth.login()`如果您想创建自己的自定义登录操作，也可以直接调用。

同样，URL“/myapp/default/user/logout”最终会调用该`auth.logout()`方法，该方法将注销用户。所以，如果你想启用注销，只需生成一个指向注销 URL 的链接——最好的方法是使用该`URL()`功能：

```
A('Logout', _href=URL('default', 'user', args='logout')) 
```

请注意，在脚手架应用程序中，layout.html 视图用于`auth.navbar()`在页面的右上角插入 Auth 导航栏——当用户登录时，该导航栏会自动包含一个与上述类似的“注销”链接。

# animation - D3.js - 尝试使用持续时间循环动画

> ID：10968415
> 
> 赞同：1
> 
> 时间：2012-06-10T11:47:56.157
> 
> 标签：animation, d3.js

我正在研究一些很棒的 D3 教程 + 我对给定片段的修改，我有一些相当简单（我认为）的问题。

我想在我的代码中循环两个函数多次。但我不能。你能看出我的问题在哪里吗？

这是无需循环即可工作的代码：

```
<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript" src="d3.v2.js"></script>
</head>
<body>
    <div id="viz" style="height:80px; width:80px;"></div>
    <script type="text/javascript">

    var sampleSVG = d3.select("#viz")
        .append("svg")
        .attr("width", 300)
        .attr("height", 300);   

    sampleSVG.append("circle")
        .style("stroke", "gray")
        .style("fill", "white")
        .attr("r", 40)
        .attr("cx", 50)
        .attr("cy", 50)
        .on("mouseover", function(){d3.select(this).style("fill", "aliceblue");})
        .on("mouseout", function(){d3.select(this).style("fill", "white");})
        .on("mousedown", animateFirstStep);

    function animateFirstStep(){
         d3.select(this)
             .transition()           
            .delay(0)           
            .duration(1000)
            .attr("cx", 50)
            .attr("cy", 50)
            .attr("r", 10)
            .style("fill", "green")
            .each("end", animateSecondStep);
    };

    var newColor = function(d) {
                return 'rgb(' + Math.floor(255 * Math.random()) +
                   ', ' + Math.floor(255 * Math.random()) +
                   ', ' + Math.floor(255 * Math.random()) + ')';
                }

    function animateSecondStep(){
        d3.select(this)
          .transition()
            .duration(1000)
            .attr("r", 40)
            .style("fill", newColor)
            .each("end", animThirdStep)
        };   

    function animThirdStep() {
        d3.select(this)
            .transition()
            .duration(1000)
            .attr("r", 25)
            .style("fill", newColor);
    }

    </script>
</body>
</html> 
```

这就是我尝试循环的方式（函数 animateFirstStep）：

```
 function animateFirstStep(){
         var i=0;
        d3.select(this)
             .transition()           
            .delay(0)           
            .duration(1000)
            .attr("cx", 50)
            .attr("cy", 50)
            .attr("r", 10)
            .style("fill", "green")
            .each("end", function(i) {
                while(i < 5) {
                    animateSecondStep;
                    animThirdStep;
                    i++;
                }
            });           
    }; 
```

有什么建议么？（朋友建议由于函数调用和动画执行持续时间之间的时间差异而无法正常工作-但我不知道如何解决）

干杯。

# jquery - ajax 调用 keyup()

> ID：10968419
> 
> 赞同：1
> 
> 时间：2012-06-10T11:48:08.813
> 
> 标签：jquery, ajax, keyup

我有一个问题：如果有人在字段中输入，这应该使所有其他用户的文本字段为只读，并显示类似“有人正在输入”的消息。

```
<div id="msg"></div>
<input type="text" name="field" id="field" />

$("#field").keyup(function (){
    var isTyping = $('#field').val();
    var data = 'result=' + isTyping;
    var msg = $('#msg');
    $.ajax({
        type: 'POST',
        url: "includes/control.php",
        data: data,
        cache: false,
        success: function(){  
           msg.html(html);
        }
    });
}); 
```

这是 control.php：

```
if($_POST['result']){
    echo "someone is typing";
} 
```

这对 click() 方法很有效，但对 keyup() 无效。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T11:51:42.080

奇怪的是，每当用户键入但更改时，您都会发送 ajax 请求：

```
success: function(){  
    msg.html(html);
} 
```

至

```
success: function(html){  
    msg.html(html);
} 
```

因为你`html`没有被定义为ajax响应。

# php - 电影放映时间的数据库设计

> ID：10968421
> 
> 赞同：0
> 
> 时间：2012-06-10T11:48:21.263
> 
> 标签：php, mysql, database, algorithm

我在数据库中有电影和电影院的放映时间表，我需要选择编辑下周的放映时间而不发布它。最好的解决方案是什么？创建另一个表？

我的数据库： ![在此处输入图像描述](../Images/38f296f17260ce8ed88b96e86a779f4c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T11:59:57.007

**如果你想保存旧值**（更新之前），最好使用另一个表，但**如果你不想这样做并且不需要存储旧值**，最好使用标志“已发布”（表中的新列），并且当任何人更新值时，将“已发布”标志设置为零，然后管理员应检查它以将“已发布”标志设置为“1”。在用户页面中仅显示已发布=1 的记录。

# sql-server-2005 - 获取具有最大值的列的行

> ID：10968422
> 
> 赞同：0
> 
> 时间：2012-06-10T11:48:38.787
> 
> 标签：sql-server-2005

我有下表：

```
TNO : can be duplicate
CNo : can be duplicate 
```

我需要根据表 A 中的 CNo 选择最大 Tno，其中 a.RNO=B.RNO

**表 A**

```
Tno  Rno  name   desc
100  200  adam   aadddddd
100  200  adam   aadddddd
101  201  king   aasdfdsf 
```

**表 B**

```
Cno  Rno  
101  200 
```

请各位大神指点一下最好的方法。

我尝试了以下但没有太大成功

你好，

请按要求查看示例数据：所以查询应该

```
Actual Data :

Rowum   cno     Tno     Rno  
1   24908   24047   22021
1   24909   22424   22022
1   20438   22426   22023 
```

**所需数据**：它应该显示针对 Cno 的最大 tno

```
Rowum   cno     Tno     Rno  
1   24908   24047   22021    
1   20438   22426   22023 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T12:03:24.907

一种方法是使用`CTE`and`ROW_NUMBER`函数：

```
WITH CTE AS(
    SELECT RowNum =
       ROW_NUMBER()OVER(PARTITION BY A.Rno ORDER BY Tno DESC)
    , A.Tno,  A.Rno,  name,   [desc]
    FROM TableA A INNER JOIN TableB B ON A.RNO=B.RNO
)
SELECT * FROM CTE
WHERE RowNum = 1 
```

# xml - 在 Windows Phone 中将图钉绑定到 Bing 地图

> ID：10968424
> 
> 赞同：0
> 
> 时间：2012-06-10T11:48:52.820
> 
> 标签：xml, windows-phone-7

所以我在这里需要一些帮助——一些关于如何做的教程。

我正在尝试为我的应用创建位置页面

我需要知道如何将两个 xml 节点绑定到一个图钉列表中，然后当用户单击它们时，它会将值带到另一个页面。

我可以填充 XML 和地图。以下是我目前如何获得站点。

```
 void client_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        if (e.Error == null)
        {
            if (e.Result != null)
            {
                XDocument doc = XDocument.Parse(e.Result);
                XNamespace ns = "http://schemas.datacontract.org/2004/07/BusExpress.ClassLibrary";
                var locations = (from n in doc.Descendants(ns + "ArrayOfStop")
                                  select new RootContainer
                                  {

                                      Location = (from s in n.Elements(ns + "Stop")
                                               select new Location
                                               {
                                                 latitude = s.Element(ns + "lat").Value,
                                                 longitude = s.Element(ns + "long").Value,

                                               }).ToList()
                                  }).Single();

              //  listBusStops.ItemsSource = locations.Location;

                // Do something with the list of Route Names in routeNames 
            }
        }
    } 
```

如何从一个 xml 提要中将其转换为多个图钉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T01:42:59.000

**更新：** 添加了更多代码，以及工作演示和完整源代码的链接。

注意：[通过我的博客提供源代码演示](http://www.frazell.net/random/StackOverflow/PushPin_Sample.zip)。

您可以构建一个数据模板来表示图钉应如何在地图上显示。

如：

```
<phone:PhoneApplicationPage.Resources>
    <DataTemplate x:Key="PinItemTemplate">
        <my:Pushpin Location="{Binding Location}" 
                    MouseLeftButtonUp="Pushpin_MouseLeftButtonUp_1"
                    Content="{Binding Id}">
        </my:Pushpin>
    </DataTemplate>
</phone:PhoneApplicationPage.Resources> 
```

然后，您可以将您的 bing 地图绑定到引用数据模板的此集合。

```
 <my:Map Margin="10,10,0,0"
                Name="map1"
                Center="39.95245, -75.163526"
                ZoomLevel="11"
                HorizontalAlignment="Stretch"
                VerticalAlignment="Stretch">
            <my:MapItemsControl x:Name="MapPins"
            ItemsSource="{Binding Pins}"
            ItemTemplate="{StaticResource PinItemTemplate}"
            />
        </my:Map> 
```

然后，您可以正常绑定此视图模型。

```
 //Load map pins
        MapViewModel view = new MapViewModel();
        view.Load();
        this.DataContext = view; 
```

要在单击时处理 pin，您应该能够执行以下操作：

```
private void Pushpin_MouseLeftButtonUp_1(object sender, MouseButtonEventArgs e)
{
Pushpin pin = (Pushpin)sender;
MessageBox.Show(pin.Content.ToString());
} 
```

# objective-c - FXLabel 因 UILabel 错误而崩溃

> ID：10968425
> 
> 赞同：0
> 
> 时间：2012-06-10T11:48:58.857
> 
> 标签：objective-c, ios, interface-builder, subclass

我正在尝试在我的项目中设置 FXLabel [https://github.com/nicklockwood/FXLabel](https://github.com/nicklockwood/FXLabel)，但我收到一个我无法解释的错误。我正在使用 Interface Builder 来管理属性。

.h 文件

```
@property (nonatomic) IBOutlet FXLabel *titleLabel; 
```

.m 文件

```
self.titleLabel.shadowColor = [UIColor colorWithWhite:1.0f alpha:0.8f];
self.titleLabel.shadowOffset = CGSizeMake(1.0f, 2.0f);
self.titleLabel.shadowBlur = 1.0f;
self.titleLabel.innerShadowColor = [UIColor colorWithWhite:0.0f alpha:0.8f];
self.titleLabel.innerShadowOffset = CGSizeMake(1.0f, 2.0f); 
```

.xbi 文件

![在此处输入图像描述](../Images/78777b5193b400d0f51afdc7a3b411a9.png) ![在此处输入图像描述](../Images/6ac41406db9256e5bfeac082c0cddc8e.png)

尝试编译和运行时，此行会抛出错误

```
self.titleLabel.innerShadowColor = [UIColor colorWithWhite:0.0f alpha:0.8f]; 
```

**错误**看起来像这样：

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', 
reason: '-[UILabel setInnerShadowColor:]: unrecognized selector sent to 
instance 0x6e56180' 
```

我猜想编译器以某种方式认为它是 UILabel 而不是 FXLabel （它显然是）。我找不到解决方法，任何想法可能是什么问题或我可以尝试什么？

在此先感谢塞巴斯蒂安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T07:24:38.533

Clean & Build + Restarting XCode 解决了这个问题。

# java - Netbeans：Java防止清理项目时删除文件夹

> ID：10968428
> 
> 赞同：0
> 
> 时间：2012-06-10T11:49:22.210
> 
> 标签：java, jsf, netbeans, file-upload, build-process

我正在使用**Netbeans**创建一个 JSF 应用程序，并且我有一个名为 Snap 和 Files 的下载文件夹，它分别存储客户端上传的 Snaps 和文件，但是当我清理项目时，整个构建文件夹被删除，所以我的文件。有什么方法可以防止它删除某些文件夹或任何替代方法。（我不想将它保存在任何静态路径上。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T13:14:04.430

您可以也不应该将上传的文件存储在扩展的 WAR 文件夹中。它们在真实的生产环境中也会丢失，因为在运行时添加的文件不包含在原始 WAR 中。

您应该将它们存储在部署文件夹*之外*的固定路径上。有几种方法可以配置 webapp 以使用它，并将服务器配置为通过虚拟路径从文件夹中提供文件。另请参阅此答案以获取详细说明和示例：[上传的图像仅在刷新页面后可用](https://stackoverflow.com/questions/8885201/uploaded-image-only-available-after-refreshing-the-page/8889096#8889096)

# git - 重写未发表的历史有什么坏处？

> ID：10968429
> 
> 赞同：1
> 
> 时间：2012-06-10T11:49:26.427
> 
> 标签：git, dvcs, bazaar

我想知道在开发过程中“失去历史”的缺点是什么。一个著名的例子当然是`git rebase -i`/ `git merge --squash`，但这里也[描述了](http://fourkitchens.com/blog/2009/04/20/alternatives-rebasing-bazaar)“我想在将我的更改提交到主线之前清理我的提交历史记录”。

我可以看到导出补丁并将它们应用到另一个分支会丢失分支的“历史”，但是为什么该分支及其提交历史在合并后会有用呢？

有人可以详细说明为什么这些技术被认为是“肮脏的”吗？只要更改可以应用于主分支，为什么最初提交更改的顺序很重要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T16:37:18.743

考虑一下：

```
* (master) Merge feature-branch into master
|\
| * (feature-branch) Fix a comment typo
| * Add comments
| * Add feature task 3
| * Consolidate feature tasks 1 and 2
| * Add feature task 2
| * Forgot a semi-colon
| * Add feature task 1
|/
* Older commit on master 
```

与这个：

```
* (master, feature-branch) Add feature
* Older commit on master 
```

第一个是 into 的 (--no-ff) 合并，`feature-branch`底部`master`是 on 的 squash/ `feature-branch`rebase `master`。第一个非常详细，这将使回归测试更加集中，但如果您有很多功能分支，则会变得混乱。如果您有很多功能，第二个更容易阅读，但会丢失分支定义。您自己的方法将取决于项目的规模、团队的规模等。

就个人而言，我*会使用其他人关心这个提交*的经验法则。下游没有人关心例如我在评论中修正了一个错字。`rebase -i`在我推送之前，我通常将第一个示例变成这样的内容（使用）：

```
* (master) Merge feature-branch into master
|\
| * (feature-branch) Add feature task 3
| * Add feature task 2
| * Add feature task 1
|/
* Older commit on master 
```

分支历史的相关位仍然很明显，其余的都被压扁了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T16:25:25.363

如果您对自己的历史没有任何用处，那就没有缺点了。事实上，许多开发人员在单独的分支 ( `feature/1234`) 中创建新功能，然后他们没有合并，而是将其变基/压缩到`develop`-branch 并删除功能分支。原因是，通常，如果你实现了一个特性，你通常不会对以后的每一个实现步骤感兴趣，而是对整个特性感兴趣。但是，您应该避免压缩提交，因为它们没有任何共同之处，只是为了保存提交。有很多提交也没有缺点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T16:26:35.040

除了管理生产质量的代码之外，您还可以将 git 视为整个产品的全局无限延展性撤消。“未发表的历史”可以包括拼写错误、没有成功的实验、您所做的不相关的小修复，因为您当时在那里并且可能稍后会分裂，等等。我从来不理解对撤消皱眉的心态。

将您的重写与您重写的内容进行比较。如果新版本更好地满足您的需求，那就更好了。如果原始版本中的某些内容满足新版本不满足的需求，那么这是一个缺点。特别是对于保留在您自己的存储库中的未发布内容，您可以随意处理其中的内容。

# parsing - ANTLR char词汇错误

> ID：10968431
> 
> 赞同：4
> 
> 时间：2012-06-10T11:49:52.623
> 
> 标签：parsing, unicode, antlr

我试图在 ANTLR 中使用 UNICODE 语法，但这总是会导致错误（语法片段）：

```
grammar Expression;

options {
  charVocabulary='\u000'..'\uFFFE';
}

parse
  :  exp EOF
;

exp
  : 'a'
 ; 
```

它总是以：`'\uFFFE' not expected ';'`. 如何编写正确的 UNICODE 语法——正确的`charVocabulary`定义是什么？

我正在使用 ANTLR 3.2，但在新版本中也会导致相同的错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T13:24:50.130

`charVocabulary`是一个 ANTLR v2 选项，在 ANTLR v3 语法中不可用。从 ANTLR v3 语法生成的所有词法分析器都接受范围内的字符`\u0000..\uFFFF`（确保在创建[ANTLRInputStream](http://www.antlr.org/api/Java/classorg_1_1antlr_1_1runtime_1_1_a_n_t_l_r_input_stream.html)时使用正确的编码！）。

使用 ANTLRWorks 时，您可以通过定义`Any`匹配任何字符的规则来看到这一点：

```
Any : . ; 
```

你会看到下图显示在 ANTLRWorks 的下半部分：

![在此处输入图像描述](../Images/f748515cd34ae5dae03f1b04ee20604d.png)

# objective-c - 在类中的 ARC 中使用 @autoreleasepool

> ID：10968432
> 
> 赞同：1
> 
> 时间：2012-06-10T11:50:36.323
> 
> 标签：objective-c, automatic-ref-counting

我已经了解@autoreleasepool 的工作原理，我拥有支持 ARC 的最新版本的 xcode。所以我可以使用它，但我无法理解它在类中是如何工作的。
假设我有这个界面：

```
@interface AppDelegate : NSObject <NSApplicationDelegate>
{
@private
    NSMutableDictionary* dictionary;
} 
```

我在 init 方法中分配和初始化字典：

```
- (id) init
{
    self= [super init];
    if(self)
    {
        dictionary=[[NSMutableDictionary alloc]init];
    }
    return self;
} 
```

在 dealloc 方法中，我无法将发布消息发送到字典，因为我在 ARC 下。所以当我通常分配内存时，我会这样做：

```
@autoreleasepool
{
    NSMutableDictionary* dict=[[NSMutableDictionary alloc]init];
    < use it>
} 
```

PS：请原谅语法错误，我是直接写的，没有编译。
但是在课堂上，我应该把“@autoreleasepool”块放在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T12:04:16.100

你可以`@autoreleasepool`在任何代码段周围放置一个块，但是你真的不应该做我认为你正在做的事情。

与允许 ARC 为您添加保留和释放调用相比，自动释放效率要低得多，而且它可能不安全。Autorelease 将所有对象放入“池”中，然后当您超出范围和/或决定转储池时，它会“耗尽”池并且对象的保留计数减一。

简短的回答：`@autorelease`除非 Apple 在文档或模板中另有说明（例如，main.m 中会有一个`@autoreleasepool`），否则完全忽略这些块。

这意味着您的对象可能会在您真正想要它们之前被释放。`@autoreleasepool`当您有一个非常紧凑的代码循环要实例化然后丢弃大量对象时，块更有用。例如，一个 for 循环处理一个巨大的数据库并分配字符串对象，然后使用这些字符串对象来填充您创建的类的实例的属性。在这种情况下，当您在 for 循环中时，ARC 可能无法可靠地释放这些对象，您可能需要创建一个自动释放池。

但是，ARC 在紧密循环中不做正确的事情并不常见。它实际上更像是一个非 ARC 概念，您可以在其中使用 an`NSAutoreleasePool`并手动将其耗尽。

# css - Matt Haughey 的博客如何在每个帖子标题中插入玫瑰花结？

> ID：10968434
> 
> 赞同：0
> 
> 时间：2012-06-10T11:51:00.657
> 
> 标签：css, firebug

抱歉，这太基础了，但我是初学者。

Matt Haughey 的博客[A Whole Lotta Nothing](http://a.wholelottanothing.org/)将玫瑰花结插入到每个帖子标题下，作为其帖子模板的一部分。

*   我如何使用 Firebug 在他的 CSS 中找到这些玫瑰花结的来源？我试过检查 entry-header 元素，但我没有看到任何似乎与玫瑰花结有关的东西。
*   我猜这些玫瑰花结是 unicode 字符是对的，还是有其他东西在起作用？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T12:07:27.440

您浏览器中的开发者工具就是您的朋友。在我的 Safari 中使用“Inspect Element”（也可在 Firefox 中使用），我很快发现在他们`theme-journal.css`文件的第 121 行中，他们有这种添加玫瑰花结的样式：

```
.entry-header {
    font-size: 2.4em;
    line-height: 1.3;
    margin: 0 20px 10px;
    background: url(theme-journal_black/date-header-bg.gif) no-repeat 50% bottom;
    padding: 0 0 20px 0;
    text-align: center;
} 
```

按照@jacktheripper 的建议使用`h1:after`是一个更优雅的想法，但与旧浏览器不兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T11:57:01.713

您可以使用 ::after 选择器在所有 h1 元素之后添加内容

CSS

```
h1:after {
    content: url("imagesource.jpg");
    display: block;
}​ 
```

看这个活生生的[例子](https://jsfiddle.net/74nzV/1/)

但是，有问题的站点将其用作背景图像。您可以通过使用元素检查器并查看其属性来发现这一点。请参阅随附的屏幕截图

[![](../Images/d407999e25f104e9f342f6ec21d494c9.png)](https://i.stack.imgur.com/Y5dWc.png)

其性质如下：

```
background: url(theme-journal_black/date-header-bg.gif) no-repeat 50% bottom; 
```

# iphone - 更新应用程序时出现代码签名错误

> ID：10968435
> 
> 赞同：1
> 
> 时间：2012-06-10T11:51:26.940
> 
> 标签：iphone, ios, xcode, app-store

我想在 app sotre 中更新我的应用程序....我再次下载了分发证书和分发配置文件并尝试使用它进行构建..但它给了我错误

代码签名错误：身份“iPhone Distribution: Mobilesoft LLC”与默认钥匙串中的任何有效证书/私钥对都不匹配。

在提交时，我自己创建了证书。我想问我是否再次创建它然后用新证书构建如果我用新创建的证书更新它会影响什么。

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T12:06:39.777

创建一个新证书，并使用这个新证书和以前的捆绑标识符创建新的配置文件。它会正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T12:59:57.493

您可能不再拥有私钥。如果找不到，您可以撤销并重新创建您的分发证书和配置文件。这不会影响当前在应用商店中的应用。

# javascript - 如何从缓存中获取图像、css、js（http状态为200（缓存）而不是304）

> ID：10968436
> 
> 赞同：3
> 
> 时间：2012-06-10T11:51:27.330
> 
> 标签：javascript

我有引用大量 JS、图像文件的网页。第二次加载页面时，304 请求会发送到服务器。我想获得缓存对象的 http 200（缓存）状态而不是 304。

我正在使用 asp.net 4、iis 7。

设置 Expiry 标头不起作用，它仍然发送 304 请求。我想要http状态200（缓存）。

请让我知道是否有任何技术。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T12:01:16.500

您已经说过设置到期时间没有帮助，但是如果您设置了正确的标题，它就会有帮助。

这是一个很好的例子：谷歌的图书馆托管。如果您要求库的*完全限定*版本（例如，jQuery 1.7.2，而不是 jQuery 1.*或 jQuery 1.7.*），以下是 Google 发回的（相关）标头：

```
日期：格林威治标准时间 2012 年 6 月 7 日星期四 14:43:04
缓存控制：公共，最大年龄=31536000
过期：格林威治标准时间 2013 年 6 月 7 日星期五 14:43:04
```

（`Date`实际上并不相关，我只是将其包含在内，以便您知道上面的标头是何时生成的。）正如您所见，`Cache-Control`已经明确设置了 a `max-age`of a year ，并且`Expires`标头还指定了一年的到期日期现在。随后（一年内）访问同一个完全合格的库甚至不会导致`If-Modified-Since`对服务器的请求，因为浏览器知道缓存的副本是新鲜的。

RFC 2616 中对 HTTP 1.1 中缓存的[描述应该会有所帮助。](http://www.w3.org/Protocols/rfc2616/rfc2616-sec13.html)

# python - 什么是 Google Appengine Ndb GQL 查询最大限制？

> ID：10968439
> 
> 赞同：5
> 
> 时间：2012-06-10T11:51:59.663
> 
> 标签：python, google-app-engine, gql, app-engine-ndb

我正在四处寻找答案，我可以从 Google AppEngine 上的 Ndb 上的 GQL 查询中获得的最大结果限制是多少。我正在使用带有游标的实现，但如果我一次检索它们会快得多。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-11T02:42:53.100

这取决于很多事情，例如实体的大小和需要在索引中查找的值的数量，因此最好针对您的特定应用程序对其进行基准测试。另请注意，如果您发现在晴天加载所有项目需要 10 秒，这可能意味着您的一小部分查询将由于数据存储性能的自然变化而超时，有时您的应用程序会当数据存储有糟糕的一天（它发生）时，总是会超时。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-10T14:39:09.380

基本上，您不再有每个查询 1000 个实体的旧限制，但请考虑使用合理的限制，因为您可能会遇到超时错误，并且最好批量获取它们，这样用户就不会在加载期间等待。

# svg - SVG 视图框和在 y 轴上滚动

> ID：10968441
> 
> 赞同：2
> 
> 时间：2012-06-10T11:52:43.303
> 
> 标签：svg, viewbox

我有一个巨大的 svg 3200*1800。我只想显示该图像的一部分，例如 400*1000，确保宽度是主要属性并具有高度的滚动条，但是当我设置视图框时，它会增加宽度以显示添加的高度。

```
 viewBox="900 550 400 1000" 
```

他们是阻止这种情况发生的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T05:38:27.487

我计算出你需要增加相对于视图框的高度，例如我最终得到了这样的结果：

```
width="1400"
height="4000"
viewBox="966 555 350 1000" 
```

与我以前的相比：

```
width="350"
height="1000"
viewBox="966 555 350 1000" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-29T22:23:50.293

您只需将 'preserveAspectRatio' 与 'viewBox' 属性一起设置为“none”，您的问题就解决了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-01T06:51:05.647

这个答案建立在Shane的答案（不适合可变窗口大小）的基础上......

让宽度占优势的溢出：

1.  让“视图框”定义要显示的图形部分（任何**已知**的纵横比）
2.  让 svg 元素具有默认宽度和高度（100%）
3.  使用javascript，每次调整窗口大小时动态设置svg元素的高度

下面的代码适用于我的[学习项目](https://subversion.assembla.com/svn/freshcode_public/learn/svg/src/main/webapp/render/index.jsp)，而不是生产代码。

在头部元素中：

```
<script type="application/javascript">
    var svgRatio = ${viewboxRatio}; // ratio must be known

    // From http://stackoverflow.com/a/13651455
    if(window.attachEvent) {
        window.attachEvent('onresize', resizeSvg);
    }
    else if(window.addEventListener) {
        window.addEventListener('resize', resizeSvg, true);
    }
    else {
        //The browser does not support Javascript event binding
    }

    function resizeSvg() {
        var height = window.innerWidth * svgRatio;
        var svg  = document.getElementsByTagName('svg')[0];
        svg.setAttribute("height", height.toString());
    }
</script> 
```

在身体的末端：

```
<script type="application/javascript">
    resizeSvg();
</script> 
```

# c++ - 在 QTableView 中用鼠标右键选择

> ID：10968442
> 
> 赞同：2
> 
> 时间：2012-06-10T11:53:09.590
> 
> 标签：c++, qt, select, drag-and-drop, right-click

我有一个具有以下选择设置的表格视图：

```
setSelectionBehavior(QAbstractItemView::SelectRows);
setSelectionMode(QAbstractItemView::ExtendedSelection); 
```

这样我可以通过单击并悬停鼠标左键来选择几行。

然而，这种行为与拖放冲突，这就是我们在 Windows 资源管理器中看到的例子。

我想让用户用鼠标右键选择行，**然后**用鼠标左键拖放它们（就像在 Total Commander 中一样）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T11:56:18.037

如果您还没有，请将您正在使用的任何内置表格视图（可能`QTableView`）子类化，然后重新实现`mousePressEvent(QMouseEvent* event)`和`mouseReleaseEvent(QMouseEvent* event)`修改当前选择。

# android - 永恒的广播接收器

> ID：10968443
> 
> 赞同：1
> 
> 时间：2012-06-10T11:53:58.157
> 
> 标签：android

我正在编码的应用程序有问题。
每次广播时，我都需要接收 ACTION_SCREEN_ON、ACTION_SCREEN_OFF 和 ACTION_USER_PRESENT 意图，因此我的应用程序当然会留在后台。目前我的应用程序是由设置活动和服务制作的。ScreenReceiver 是获取 ACTION_SCREEN_* 意图的 BroadcastReceiver，而 UnlockReceiver 获取 ACTION_USER_PRESENT 意图。服务注册和注销接收者：

```
public class MainService extends Service {
    ScreenReceiver screenReceiver = null;
    UnlockReceiver unlockReceiver = null;

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    @Override
    public void onStart(Intent intent, int startId) {
        doStart();
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        doStart();

        return START_STICKY;
    }

    public void doStart() {
        if(screenReceiver != null && unlockReceiver != null)
            return;

        IntentFilter filter;

        if(screenReceiver == null) {
            filter = new IntentFilter();
            filter.addAction(Intent.ACTION_SCREEN_ON);
            filter.addAction(Intent.ACTION_SCREEN_OFF);

            screenReceiver = new ScreenReceiver();
            registerReceiver(screenReceiver, filter);
        }

        if(unlockReceiver == null) {
            filter = new IntentFilter();
            filter.addAction(Intent.ACTION_USER_PRESENT);

            unlockReceiver = new UnlockReceiver();
            registerReceiver(unlockReceiver, filter);
        }
    }

    @Override
    public void onDestroy() {
        if(screenReceiver != null)
            unregisterReceiver(screenReceiver);

        if(unlockReceiver != null)
            unregisterReceiver(unlockReceiver);
    }
} 
```

但有时 Android 会终止我的服务以释放一些 RAM，然后重新启动它。杀死和重生之间的时间通常在 5 秒左右，但有时这足以错过一些意图，从而给我的应用程序的用户带来问题。这些意图只能通过 registerReceiver 注册，所以我无法在清单中注册它们。我怎么能听那些意图而不被杀死或错过一些？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T12:00:08.127

> 我怎么能听那些意图而不被杀死或错过一些？

你没有。您重写您的应用程序以不使用这些广播或在丢失广播的情况下更具弹性。毕竟，不仅仅是“Android杀死我的服务以释放一些RAM然后重新启动它”，而是任务管理器之类的东西可以摆脱你的服务。

# matlab - Matlab中另一个函数中一个函数的访问变量

> ID：10968445
> 
> 赞同：1
> 
> 时间：2012-06-10T11:54:16.667
> 
> 标签：matlab, global-variables, matlab-figure

我想在 matlab GUI 中的另一个函数中访问一个函数中变量的值。例如

```
 % --- Executes on button press in browseCoverHide.
function browseCoverHide_Callback(hObject, eventdata, handles)
  % hObject    handle to browseCoverHide (see GCBO)
  % eventdata  reserved - to be defined in a future version of MATLAB
  % handles    structure with handles and user data (see GUIDATA)
[File,Path] = uigetfile('*.png','Select Image');
path = strcat(Path,File);
global covImg
covImg = imread(path);
axes(handles.axes1);
imshow(covImg);

     % --- Executes on button press in browseSecImg.
function browseSecImg_Callback(hObject, eventdata, handles)
  % hObject    handle to browseSecImg (see GCBO)
  % eventdata  reserved - to be defined in a future version of MATLAB
  % handles    structure with handles and user data (see GUIDATA)
global covImg
axes(handles.axes3);
imshow(covImg); 
```

在这里我想从中访问，`CovImg`但它不起作用。`function browseSecImg_Callback``function browseCoverHide_Callback`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T12:16:10.083

您不必使用全局变量。`handles`您可以使用变量传输数据，这是 的标准方法`GUIDE`。

```
% --- Executes on button press in browseCoverHide.
function browseCoverHide_Callback(hObject, eventdata, handles)
  % hObject    handle to browseCoverHide (see GCBO)
  % eventdata  reserved - to be defined in a future version of MATLAB
  % handles    structure with handles and user data (see GUIDATA)
[File,Path] = uigetfile('*.png','Select Image');
path = strcat(Path,File);
handles.covImg = imread(path);
axes(handles.axes1);
imshow(handles.covImg);
guidata(hObject,handles);

     % --- Executes on button press in browseSecImg.
function browseSecImg_Callback(hObject, eventdata, handles)
  % hObject    handle to browseSecImg (see GCBO)
  % eventdata  reserved - to be defined in a future version of MATLAB
  % handles    structure with handles and user data (see GUIDATA)
axes(handles.axes3);
imshow(handles.covImg); 
```

# linq - t4 模板 linq 问题

> ID：10968451
> 
> 赞同：2
> 
> 时间：2012-06-10T11:55:35.207
> 
> 标签：linq, templates, t4

如何在 T4 模板中使用 Linq

这是我的软件环境资料vs2012 .net 4.0版

这是 t4 模板：

```
<#@ templatedebug="true" hostSpecific="true" #> 
<#@ output extension=".cs" #> 
<#@ Assembly Name="System.Core.dll" #> 
<#@ import namespace="System" #> 
<#@ import namespace="System.Linq" #> 
```

当我调用 engine.ProcessTemplate(inputTemplate, host) 时，它会返回 `ErrorGeneratingOutput`. 这是为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-15T13:11:11.220

我知道的老问题，但我刚刚发现了同样的事情。

当你引用`System.Core`时，不要包括`.dll`：

```
<#@ assembly name="System.Core" #> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-11T00:14:43.760

您需要在 Visual Studio 的错误窗口中查看错误以查看更多信息。

您也可以右键单击 .tt 文件并说调试模板。

# javascript - .data() 没有按预期工作

> ID：10968452
> 
> 赞同：2
> 
> 时间：2012-06-10T11:55:54.753
> 
> 标签：javascript, jquery, html, css, attr

我有一个代码

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Untitled Document</title>
<script src="jquery.js"></script><script>
$(function(){
$(".classy").data("read","hi");//Not working .working is$("div").attr("data-read","hi");

});</script>
<style>
.classy[data-read='hello']{background:#000;}.classy[data-read='hi']{background:#fff;}</style>
</head>

<body>
<div class="classy" data-read="hello">a</div>
</body>
</html> 
```

发生的情况是，当文档准备好时，.classy 的数据读取属性变为 hi。我有一个 css 样式设计，但是当我使用方法来操作数据读取属性时它`.classy[data-read='hi']`不起作用。当我使用方法时它起作用操纵数据读取。为什么？`.data()``.attr()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T12:13:11.180

你误解了`data-xxx`它的用途。它用于填充 HTML 标记内的数据，以后可以使用 jQuery 通过使用`.data()`.

例子：

```
​console.log($('.classy').data('read'));​​​​​​​​​

$(".classy").data("read","hi");

​console.log($('.classy').data('read'));​​​​​​​​​ 
```

输出：

```
hello
hi 
```

稍后更改该数据时，它不会再更改`data-xxx`元素的属性；这也使它成为条件 CSS 处理的糟糕候选者。

您应该使用`.addClass()`,`.toggleClass()`并`.removeClass()`与 CSS 类选择器结合使用以使其工作。

# linker - 链接器如何工作

> ID：10968463
> 
> 赞同：1
> 
> 时间：2012-06-10T11:57:53.367
> 
> 标签：linker, executable, exe, portable-executable

我需要了解链接器是如何工作的，以及链接器如何制作一个包含所有不同部分和段的 .exe。更准确地说，我希望至少能够使用十六进制编辑器制作一个包含以下代码的 .exe。

```
int main()
{
} 
```

请建议我一些必要的阅读。我有 John Levine 的 Linkers & Loaders。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T03:01:57.053

Ian Lance Taylor 编写了一个新的 ELF 链接器，名为`gold`. 他在一系列[博客文章](http://www.airs.com/blog/archives/38)中描述了链接器执行的一般任务。

这与 PE 链接器的功能在细节上有所不同，但总体思路都是相同的（与“链接器和加载器”中的相同）。

> 我想至少能够制作一个包含以下代码的.exe，我的双手使用十六进制编辑器

我不确定在这种情况下你为什么想要一个链接器。阅读[PE 文件格式的描述](http://msdn.microsoft.com/en-us/library/windows/hardware/gg463119.aspx)，构造必要的头文件，写一个`.text`包含 的小节`xor %eax,%eax; ret`，设置该节的入口点，...，利润？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T13:22:35.793

（静态）链接器如何工作：获取所有必要的目标文件（模块），合并/组合/展平地址，以便模块间调用可能且正确，构建它们以满足可执行格式要求，并可能进行链接时间优化。

要创建可执行文件（请注意，这里我不是指任何特定格式），您必须知道可执行文件格式，通常由标题和部分以及任何所需的启动代码组成（编译器通常已经将其作为目标文件提供，预编译）。对于 PE (.exe) 文件，[MSDN](http://msdn.microsoft.com/en-us/magazine/cc301805.aspx)有很好的解释。

# html - 由于 Addthis 脚本导致的页面宽度错误

> ID：10968468
> 
> 赞同：2
> 
> 时间：2012-06-10T11:58:56.083
> 
> 标签：html, css, addthis

由于 AddThis 代码，具有 AddThis 代码的页面非常宽。结果，出现一个水平滚动条。

删除代码或将页面方向更改为 LTR 可以修复所有问题，并且页面宽度恢复正常。

如前所述，出现问题是因为我使用的是 RTL 方向（html dir="rtl"），当我尝试将 Addthis 代码放入具有 LTR 方向的 div 中时，它没有帮助。

如何摆脱水平滚动条并使用 RTL 方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T13:25:06.247

`AddThis`html中有一些span会自动添加到页面中。其中一些跨度使用“ `.at_a11y`” css-class，其中有一个`left`属性是水平滚动的主要原因。

```
.at_a11y {
position: absolute!important;
left: -10000px!important;
top: auto!important;
width: 1px!important;
height: 1px!important;
overflow: hidden!important;
} 
```

**解决方案：**您可以在自己的 css 文件中定义自己的 ' `.at_a11y`' css 类，并将`left`属性覆盖为正常值。这会导致上面的css属性失效，然后水平滚动消失！

```
.at_a11y
{
    left: auto !important;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T23:35:27.780

我有同样的问题，我在你的问题中找到了解决方法！！！

RTL LTR 是重点，idid 是为身体设置的内部 div 制作 CSS 样式。

```
 <body>
        <div class="wrraper">
       -- the cod for the addthis some where in the page... --
        </div>
    </body> 
```

当在 css 中时，.wrraper 是 LTR 的位置，RTL 是 exem： http: [//www.visualtext.co.il](http://www.visualtext.co.il)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-28T12:06:23.333

put`html{ overflow-x:hidden; }`会解决这个问题

# mvvm - 共享视图模型 MVVM 的正确方法？

> ID：10968469
> 
> 赞同：1
> 
> 时间：2012-06-10T11:59:12.117
> 
> 标签：mvvm, silverlight-5.0, mvvm-toolkit

我有合同视图。这将从我的仪表板上的 2 个单独的图块中显示。一种用于基本负载，一种用于峰值负载。

显示基本负载剪辑时，标题将是基本负载剪辑定义，当从仪表板上的峰值负载图块显示时，它将是峰值负载剪辑定义

同样，ViewModel 将需要根据用户单击的图块获取 Baseload 或 Peak load 剪辑

我知道我可以做到这一点的一种方法是制作 2 个单独的副本，但这似乎完全错误，因为它会复制视图。

在视图模型大小上，我正在考虑创建 2 个单独的视图模型并从 ClipDefinitionViewModel 继承它们。然后，两个新的视图模型类将知道要从数据服务获取的剪辑类型

有没有更好的办法？

我正在使用简单的 MVVM 工具包

保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T09:51:45.273

一个类，两个具有不同属性的对象。

具有在`Title`构造 VM 时设置的属性（传递给构造函数或显式设置）。

同样，`LoadSource`属性可以定义 VM 应在何处查找其定义。

# java - 使用 servlet 从池中获取与数据库的连接时出错

> ID：10968470
> 
> 赞同：0
> 
> 时间：2012-06-10T11:59:13.013
> 
> 标签：java, servlets, database-connection, connection-pooling

好吧，我有一个非常尴尬的情况。我有一个工作的数据库管理器类，当我在它的桌面版本（Swing GUI）上运行它时，它可以工作，但是，当我在 servlet 上运行相同的类时，我得到一个奇怪的错误，它无法获得联系。我正在使用数据库池进行优化。

所以错误看起来如下：

```
Error in Database Connection: Error getting connection to database - java.sql.SQLException: No suitable driver found for jdbc:sqlserver://isd.ktu.lt:1433;DatabaseName=LN2012_bakDB2 
```

包含所涉及方法的类如下所示：

```
 package Core;

import DataTypes.Parameters;
import Interfaces.OutputInterface;
import java.sql.*;
import java.util.logging.Level;
import java.util.logging.Logger;
import org.apache.commons.dbcp.ConnectionFactory;
import org.apache.commons.dbcp.DriverManagerConnectionFactory;
import org.apache.commons.dbcp.PoolableConnectionFactory;
import org.apache.commons.dbcp.PoolingDriver;
import org.apache.commons.pool.impl.GenericObjectPool;

/**
 *
 * @author arturas
 */
public class DatabaseConnection {

    String specificError = "Error in Database Connection: ";
    OutputInterface gui = null;
    boolean allowOutput = true;
    GenericObjectPool connectionPool;
    ConnectionFactory connectionFactory;
    PoolableConnectionFactory poolableConnectionFactory;
    PoolingDriver driver;
    Connection con = null;

    public DatabaseConnection(Parameters params) {                

        // parameters and the output                
        this.gui = params.getGui();

        // activate database pool
        connectionPool = new GenericObjectPool(null);
        connectionFactory = new DriverManagerConnectionFactory(params.getDbAdr(), params.getDbUser(), params.getDbPass());
        poolableConnectionFactory = new PoolableConnectionFactory(connectionFactory, connectionPool, null, null, false, true);
        driver = new PoolingDriver();
        driver.registerPool("GenTreeDatabase", connectionPool);        
    }

    public void openConn() {
        if (allowOutput) gui.print("Getting connection to database");
        try {
            con = DriverManager.getConnection("jdbc:apache:commons:dbcp:GenTreeDatabase");
            if (con != null) {
                if (allowOutput) gui.print("Connection to database was successful");
            }
        } catch (SQLException ex) {
            gui.err(specificError + "Error getting connection to database - " + ex);
        }
    }

    public void closeConn() {
        try {
            con.close();
            if (allowOutput) {
                gui.print("Connection to database closed successfully");
            }
        } catch (SQLException ex) {
            gui.err(specificError + ex);
        }
    } 
```

调用 openConn 方法中的 try 时出现错误。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T12:04:10.747

您收到此错误是因为您的类路径中没有驱动程序。可能在您的桌面应用程序中有。您需要将驱动程序`.jar`文件放入 servlet 容器的全局类路径或应用程序类路径中，它应该可以工作。

我更喜欢将驱动程序的 jar 添加到服务器全局类路径中，因为可以有多个应用程序将使用同一个`.jar`文件来加载驱动程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T12:44:33.390

确保这一点

1）您应该确保 .jar 库与您正在使用的 RDMS 兼容
2）您在 netbeans 中包含用于连接的 .jar

```
projectproperties-->libraries 
```

3）将.jar复制到
`C:\Program Files\Apache Software Foundation\Apache Tomcat 6.0.26\lib`
，这很重要

如果您的位置没有驱动程序，则找不到错误，但没有合适的，所以我认为版本必须不兼容，所以您使用的是什么版本的 sql server...

# android - 如果互联网连接丢失，请关闭应用程序

> ID：10968473
> 
> 赞同：0
> 
> 时间：2012-06-10T11:59:27.470
> 
> 标签：android

我想不断检查互联网连接并在连接丢失时关闭应用程序并显示警告消息。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T12:24:04.843

```
close the app 
```

不要试图终止该进程及其不推荐的关闭应用程序的方式。对所有活动调用 finish() 或调用 moveTaskToBack(true)。

**解决方案给你。**

您需要注册并处理 BroadCastReceiver`android.net.conn.CONNECTIVITY_CHANGE`

**步骤1**

在清单中包含以下权限

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

**第2步**

让 Android 知道哪个类将注册广播接收器。

```
<receiver android:name="ConnectivityReceiver_package_name.ConnectivityReceiver">
   <intent-filter>
      <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
   </intent-filter>
</receiver> 
```

**第 3 步**

将您的逻辑用于各种网络状态。

```
public class ConnectivityReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {

     String action = intent.getAction();

    boolean noConnectivity = intent.getBooleanExtra(ConnectivityManager.EXTRA_NO_CONNECTIVITY,false);

     if(noConnectivity){

         //Show Warning Message
         //Close Application the way i suggested
     }

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T12:11:03.527

通过电话后台服务（例如 AlermManager 服务）检查 Internet 连接，如果未找到连接，则关闭应用程序。

谢谢。

# php - 为什么我的页面会导致重定向循环？

> ID：10968475
> 
> 赞同：0
> 
> 时间：2012-06-10T11:59:46.047
> 
> 标签：php, regex

我有一系列命令检查 url 是否看起来像

```
http://localhost/questions/32/new-question-from-peter 
```

如果最后一部分丢失，我会重定向到这个。我确实允许最后一个片段。
但是，我想为它添加一个可能性

```
http://localhost/questions/32/new-question-from-peter?page= <int> 
```

这是我的代码

```
if($question){
    $url = $_SERVER['REQUEST_URI'];
    $dashed = $question->dashed_title;
    $pattern = '/^\/questions\/[0-9]+\/'.$dashed.'(\/#[0-9]+)?$/i';

    if (!preg_match($pattern, $url)){
    // redirect_301 is a function that I wrote
        redirect_301('http://'.$_SERVER['HTTP_HOST'].'/questions/'.$question->id.'/'.$dashed);
    }
} 
```

目前它工作正常，并将始终重定向到正确的路径。但它不会让我追加

```
?page=<int>. 
```

所以我认为模式应该是

```
$pattern = '/^\/questions\/[0-9]+\/'.$dashed.'((\/#[0-9]+)|(?[\w\d&=]+))?$/i'; 
```

但这会导致重定向循环，我无法弄清楚原因。你能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T12:08:12.300

从原始模式中删除结尾`$`，因为那是字符串的结尾，所以如果有查询字符串，它将不匹配。

# iphone - 以编程方式定义的 uiwebview 不可见

> ID：10968477
> 
> 赞同：0
> 
> 时间：2012-06-10T12:00:01.617
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我正在以编程方式定义一个 uiwebview，它的委托和请求已完成，但仍然不可见！为什么？谢谢

//在 IB 上定义的 webviewSocial 上做一些加载，然后将其设置为 nil 以便之后对其进行初始化。

```
self.webViewSocial = nil;

self.webViewSocial = [[UIWebView alloc] initWithFrame:CGRectMake(0, 44, 320, 389)];
self.webViewSocial.autoresizingMask=(UIViewAutoresizingFlexibleHeight | 
                                       UIViewAutoresizingFlexibleWidth);
[self.webViewSocial setDelegate:self];
[self.vistaSocial addSubview:self.webViewSocial]; 
```

如果我设置了一个新的 webview 它可以工作，但问题似乎是在 IB 上设置了 webviewsocial 并且在此编码之后不再可见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T12:10:54.443

一些一般注意事项：

*   确保`self.vistaSocial`不为零
*   确保将`self.vistaSocial`其添加到`self.view`

也不要释放 webView 然后重新初始化它只需更改现有 webView 的属性例如，如果您想更改现有 webView 的框架并将其移动到新的超级视图，您将执行以下操作

```
self.webViewSocial = CGRectMake(0, 44, 320, 389);
[self.vistaSocial addSubview:self.webViewSocial]; 
```

你不需要释放它并重新初始化一个新的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T13:20:32.700

我建议将`webViewSocial`其作为 IB 对象删除，因为您实际上将其设为 nil 然后以编程方式重新初始化它，这是多余的。

如果清除浏览器历史记录是最终目标，请尝试以下操作：

```
[webViewSocial stringByEvaluatingJavaScriptFromString:@"document.body.innerHTML = \"\";"]; 
```

# vtk - vtkLookupTable 用不透明度指定颜色

> ID：10968478
> 
> 赞同：1
> 
> 时间：2012-06-10T12:00:02.057
> 
> 标签：vtk, lookup-tables

我正在尝试使用 vtkLookupTable 为我的网格设置颜色。我从 vtkColorTransferFunction 开始，它工作得很好，只是它不能让我为各种颜色设置不透明度。vtkLookupTable 提供了这个机会，但我无法让它工作。

我的 vtkPolyData 设置了标量值，用于确定它们将获得的颜色。总共 7 个值，使用标量 0 到 6 设置。

我的 vtkLookupTable 看起来像这样：

```
vtkLookupTable lut = new vtkLookupTable();
    lut.SetNumberOfColors(7);
    double opacity = 0.3;
    lut.SetTableValue(0, 0, 0, 1, opacity);
    lut.SetTableValue(1, 0, 1.0, 0, opacity);
    lut.SetTableValue(2, 0.6, 1.0, 0.0, opacity);
    lut.SetTableValue(3, 1.0, 1.0, 0.0, 0.7);
    lut.SetTableValue(4, 1.0, 0.8, 0.0, opacity);
    lut.SetTableValue(5, 1.0, 0.4, 0.0, opacity);
    lut.SetTableValue(6, 1.0, 0.0, 0.0, 1); 
```

如果我使用具有相同值（只是没有不透明度）的 vtkColorTransferFunction，它就可以工作。有人知道为什么这不起作用吗？我应该一样吗？

感谢帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T00:16:29.650

从您的伪代码中，可能缺少两行。

```
 lut.SetTableRange(0.0,6.0)
     lut.Build() 
```

你会调用这些函数吗？

如果不是这个问题，那么可能是因为您使用的 polydatamapper。你可以为你的问题提交一个完整的管道吗？

作为指导，需要调用以下代码以允许将标量值添加到映射器并正确可视化。

```
 mapper.SetLookupTable(lut)
    mapper.SetScalarVisibility(1)
    mapper.SetScalarRange(0.0,6.0) 
```

# cocos2d-iphone - Cocos2D 在每个刻度中记录“[Action update]. override me”

> ID：10968488
> 
> 赞同：1
> 
> 时间：2012-06-10T12:01:24.130
> 
> 标签：cocos2d-iphone

这是一个问题吗？我相信警告： `[Action update]. override me` 来自我自己的操作直接调用 [myAction update] 。我没有这样做。

我可以注释掉日志警告吗？这给我一种肮脏的感觉。但一切似乎都很好......

这是在 Cocos2D 1.1 和 2.0rc2 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T12:21:17.093

您可能创建了一个继承自 CCAction 的类。CCAction 中的一些代码将调用“更新”方法。所以 1）要么你没有在你的类中提供“更新”方法，要么 2）在你的类的更新方法中你正在调用 [超级更新]。如果你*真的*在更新周期中无事可做，只需在你的类中放置一个空过程。

```
-(void) update:(ccTime) dt{
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-25T21:39:32.507

尝试使用`[CCEaseOut actionWithDuration:xxx]`

# python - pymongo 连接池和客户端请求

> ID：10968489
> 
> 赞同：16
> 
> 时间：2012-06-10T12:01:37.953
> 
> 标签：python, pymongo

我知道`pymongo`是线程安全的并且有一个内置的连接池。

在我正在开发的 Web 应用程序中，我正在为每个请求创建一个新的连接实例。

我的理解是，由于`pymongo`管理连接池，因此在每个请求上创建新连接并不是错误的方法，因为在请求结束时，连接实例将被回收并在后续请求中可用。

我在这里是正确的，还是应该只创建一个实例来跨多个请求使用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-13T06:01:35.500

“错误的方法”取决于您的应用程序的体系结构。由于 pymongo 是线程安全的和自动连接池，实际使用单个共享连接或多个连接将“起作用”。但结果将取决于您期望的行为。文档对这两种情况都有评论。

如果您的应用程序是线程化的，则从文档中，每个访问连接的线程都将获得自己的套接字。因此，无论您是创建一个共享连接，还是请求一个新连接，都取决于您的请求是否是线程化的。

使用 gevent 时，每个 greenlet 可以有一个套接字。这意味着您不必每个请求都有一个真正的线程。请求可以是异步的，并且仍然获得自己的套接字。

简而言之：

*   如果您的 webapp 请求是线程化的，那么您访问新连接的方式并不重要。结果将是相同的（每个线程的套接字）
*   如果您的 web 应用程序是通过 gevent 异步的，那么您访问新连接的方式并不重要。结果将是相同的。（每个绿灯的插座）
*   如果您的 webapp 是异步的，但不是通过 gevent，那么您必须考虑关于[最佳建议工作流程](http://api.mongodb.org/python/current/faq.html#does-pymongo-support-asynchronous-frameworks-like-gevent-tornado-or-twisted)的注释。

# javascript - contenteditable 属性的问题

> ID：10968490
> 
> 赞同：2
> 
> 时间：2012-06-10T12:01:39.860
> 
> 标签：javascript, jquery, html

我`contenteditable`在每个带有类的 div 上添加属性`.edit`：

```
$(document).ready(function() {
    $(".edit").attr("contenteditable", "true");
}); 
```

现在，在此之后，当我单击我无法编辑的那个，但是当我`div`超过它时，它会显示，但随后并不起作用。`contenteditable="true"``rightclick``div``cursor to edit``spacebar``arrow keys`

在我的代码中，还应用了其他东西`div with class edit`，`draggable`还有`resizable`很多其他事件`mouseenter`，`mouseleave`等等。我知道我的问题不包含足够的信息，但我发布它是希望有人已经面临这个问题并且有解决方案。谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T16:48:17.210

尝试这个：

```
$(document).ready(function() {
    $(".edit").prop("contentEditable", "true"); // Note the capital E
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-30T04:30:38.980

试试下面的代码，

```
 $(".edit").attr("contenteditable", "true").foucs(); 
```

# sql - 如何从一系列数字中检查任何缺失的数字？

> ID：10968493
> 
> 赞同：27
> 
> 时间：2012-06-10T12:01:58.590
> 
> 标签：sql, oracle, plsql, gaps-and-islands

我正在做一个为大学创建录取系统的项目；这些技术是 Java 和 Oracle。

在其中一张表中，存储了预先生成的序列号。稍后，根据这些序列号，将输入申请人的表格数据。我的要求是，当输入过程完成后，我必须生成一个 Lot wise 报告。如果在馈送预先生成的序列号期间，任何序列号都丢失了。

例如，在表格中，序列号为 7001、7002、7004、7005、7006、7010。从上述序列中可以清楚地看出，从 7001 到 7010，缺少的数字是 7003、7007、7008 和 7009

Oracle 中是否有任何可用的 DBMS 功能来找出这些数字，或者如果任何存储过程可以满足我的目的，那么请提出一个算法。

我可以在 Java 中找到一些技术，但为了速度，我想在 Oracle 中找到解决方案。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-06-10T13:29:52.620

无需对 9 进行硬编码的解决方案：

```
select min_a - 1 + level
     from ( select min(a) min_a
                 , max(a) max_a
              from test1
          )
  connect by level <= max_a - min_a + 1
    minus
   select a
     from test1 
```

* * *

结果：

```
MIN_A-1+LEVEL
-------------
         7003
         7007
         7008
         7009

4 rows selected. 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-08-28T12:04:28.430

试试这个：

```
SELECT t1.SequenceNumber + 1 AS "From",
       MIN(t2.SequenceNumber) - 1 AS "To"
FROM MyTable t1
JOIN MyTable t2 ON t1.SequenceNumber < t2.SequenceNumber 
GROUP BY t1.SequenceNumber
HAVING t1.SequenceNumber + 1 < MIN(t2.SequenceNumber) 
```

以下是序列 7001、7002、7004、7005、7006、7010 的结果：

```
From  To
7003  7003
7007  7009 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-10T14:35:09.347

这适用于 postgres >= 8.4。通过对 CTE 语法稍作修改，它也可以用于 oracle 和 microsoft。

```
-- EXPLAIN ANALYZE
WITH missing AS (
    WITH RECURSIVE fullhouse AS (
        SELECT MIN(num)+1 as num
        FROM numbers n0
        UNION ALL SELECT 1+ fh0.num AS num
        FROM fullhouse fh0
        WHERE EXISTS (
                SELECT * FROM numbers ex
                WHERE ex.num > fh0.num
                )
        )
        SELECT * FROM fullhouse fh1
        EXCEPT ( SELECT num FROM numbers nx)
        )
SELECT * FROM missing; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-11-14T16:50:24.753

这是一个解决方案：

*   依赖于 Oracle 的 LAG 功能
*   不需要完整序列的知识（但因此不检测是否遗漏了序列中的第一个或最后一个数字）
*   列出缺少的数字列表周围的值
*   将缺失的数字列表列为连续组（可能便于报告）
*   由于 listagg 限制，非常大的缺失数字列表不幸失败

SQL：

```
WITH MentionedValues /*this would just be your actual table, only defined here to provide data for this example */
        AS (SELECT *
              FROM (    SELECT LEVEL + 7000 seqnum
                          FROM DUAL
                    CONNECT BY LEVEL <= 10000)
             WHERE seqnum NOT IN (7003,7007,7008,7009)--omit those four per example
                                       ),
     Ranges /*identifies all ranges between adjacent rows*/
        AS (SELECT seqnum AS seqnum_curr,
                   LAG (seqnum, 1) OVER (ORDER BY seqnum) AS seqnum_prev,
                   seqnum - (LAG (seqnum, 1) OVER (ORDER BY seqnum)) AS diff
              FROM MentionedValues)
SELECT Ranges.*,
       (    SELECT LISTAGG (Ranges.seqnum_prev + LEVEL, ',') WITHIN GROUP (ORDER BY 1)
              FROM DUAL
        CONNECT BY LEVEL < Ranges.diff) "MissingValues" /*count from lower seqnum+1 up to lower_seqnum+(diff-1)*/
  FROM Ranges
 WHERE diff != 1 /*ignore when diff=1 because that means the numers are sequential without skipping any*/
; 
```

输出：

```
SEQNUM_CURR SEQNUM_PREV DIFF MissingValues
7004        7002        2    "7003" 
7010        7006        4    "7007,7008,7009" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-10T12:47:37.000

为您的方案获得答案的一种简单方法是：

```
create table test1 ( a number(9,0));

insert into test1 values (7001);
insert into test1 values (7002);
insert into test1 values (7004);
insert into test1 values (7005);
insert into test1 values (7006);
insert into test1 values (7010);
commit;

select n.n from (select ROWNUM + 7001 as n from dual connect by level <= 9) n 
   left join test1 t on n.n = t.a where t.a is null; 
```

选择将为您提供示例中的答案。这只有在您事先知道您的数字在哪个范围内并且范围不应该太大时才有意义。第一个数字必须是`ROWNUM`零件中的偏移量，序列的长度是`connect by`零件中级别的限制。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-10T13:12:29.940

我会`connect by level`像[Stefan 所做](https://stackoverflow.com/a/10968824/458741)的那样建议，但是，您不能在此语句中使用子查询，这意味着它并不适合您，因为您需要知道序列的最大值和最小值是什么.

我建议使用[管道表函数](http://www.akadia.com/services/ora_pipe_functions.html)可能是生成连接所需的数字的最佳方式。为了使其工作，您需要数据库中的一个对象将值返回到：

```
create or replace type t_num_array as table of number; 
```

然后是函数：

```
create or replace function generate_serial_nos return t_num_array pipelined is

   l_first number;
   l_last number;

begin

   select min(serial_no), max_serial_no)
     into l_first, l_last 
     from my_table
          ;

   for i in l_first .. l_last loop
      pipe row(i);
   end loop;

   return;

end generate_serial_nos;
/ 
```

使用此函数，以下将返回一个序列号列表，介于最小值和最大值之间。

```
select * from table(generate_serial_nos); 
```

这意味着您查找缺少哪些序列号的查询变为：

```
select serial_no
  from ( select * 
           from table(generate_serial_nos) 
                ) generator 
  left outer join my_table actual
    on generator.column_value = actual.serial_no
 where actual.serial_no is null 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-10T13:39:59.480

这有效，但选择了第一个序列（起始值），因为它没有前任。在 SQL Server 中测试，但应该在 Oracle 中工作

```
SELECT
    s.sequence  FROM seqs s
WHERE
    s.sequence - (SELECT sequence FROM seqs WHERE sequence = s.sequence-1) IS NULL 
```

这是一个测试结果

```
 Table
  -------------
  7000
  7001
  7004
  7005
  7007
  7008

  Result
  ----------
  7000
  7004
  7007 
```

要获得未分配的序列，只需执行`value[i] - 1`i 大于第一行的位置，例如`(7004 - 1 = 7003 and 7007 - 1 = 7006)`哪些是可用序列

我认为您可以改进这个简单的查询

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-10-28T20:51:41.017

```
 SELECT ROWNUM "Missing_Numbers" FROM dual CONNECT BY LEVEL <= (SELECT MAX(a) FROM test1)
 MINUS
 SELECT a FROM test1 ; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-12-21T17:38:01.583

改进的查询是：

```
SELECT ROWNUM "Missing_Numbers" FROM dual CONNECT BY LEVEL <= (SELECT MAX(a) FROM test1)
 MINUS
SELECT ROWNUM "Missing_Numbers" FROM dual CONNECT BY LEVEL < (SELECT Min(a) FROM test1)
 MINUS
SELECT a FROM test1; 
```

**注意**：a 是我们发现缺失值的列。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-01-31T10:34:59.123

尝试使用子查询：

```
SELECT A.EMPNO + 1 AS MissingEmpNo
FROM tblEmpMaster AS A
WHERE A.EMPNO + 1 NOT IN (SELECT EMPNO FROM tblEmpMaster) 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2016-08-23T07:40:54.903

```
 select    A.ID + 1 As ID
From [Missing] As A
Where A.ID + 1 Not IN (Select ID from [Missing])
And A.ID < n

Data: ID
1
2
5
7
Result: ID
3
4
6 
```

# c++ - c++ set ordered iterating - 迭代的结果是否按标准排序？

> ID：10968494
> 
> 赞同：2
> 
> 时间：2012-06-10T12:02:02.510
> 
> 标签：c++, stl

我可以依赖以下假设（换句话说：它是否有标准保证？）：

*   `set<T>::begin()`将指向集合中的最小元素？
*   迭代集合，（从`set<T>::begin()`until `set<T>::end()`）将按递增顺序给出元素？
*   并且只是为了确定：这些属性是否适用于键`map`？

我的意思是`set`和`map`从`STL`。

PS我知道邻接`operator<()`并定义自己的比较器。请向我保证关于这方面的标准是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T12:03:31.260

顺序取决于比较使用的仿函数（map 上的第三个模板参数，集合上的第二个参数）。默认值为`std::less<T>`，它为集合/映射提供升序，是的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-10T12:03:49.477

是的，您可以根据定义依赖它，具体取决于元素的（键）`bool operator<`或作为模板参数传递给集合（映射）的比较函子。因此，排序将根据使用的比较器从小到大。

在 C++11 标准 §23.2.4 中，处理关联容器的要求：

> 每个关联容器都在 Key 和一个排序关系 Compare 上参数化，该排序关系对 Key 的元素产生严格的弱排序 (25.4)。此外，map 和 multimap 将任意类型 T 与 Key 相关联。Compare 类型的对象称为容器的比较对象。

然后，在同一部分：

> 关联容器的迭代器的基本属性是它们以键的非降序遍历容器，其中非降序由用于构造它们的比较定义。对于任何两个可解引用的迭代器 i 和 j 使得从 i 到 j 的距离为正，value_comp(*j, *i) == false

`value_comp`比较函数在哪里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T12:06:43.673

简短的回答：是的。

更长的答案： std::set 和 std::map 都采用第二个模板化参数 - 一个用于比较元素的二进制谓词。默认情况下，这是 std::less - 一个实现单个布尔函数的类 - 它本身是根据运算符 < 定义的。

除非您在实例化 stl 模板时另外指定，否则 operator < 将定义键的顺序。注意 如果您使用未定义（部分）顺序的布尔谓词，可能会发生奇怪的事情。:)

# android - 在 Android 选项卡上使用 Eclipse IDE？

> ID：10968496
> 
> 赞同：1
> 
> 时间：2012-06-10T12:02:17.890
> 
> 标签：android, eclipse

有没有办法在 Android 选项卡上使用 Eclipse IDE？我的意思是，在 Android 上开发任何应用程序（JAVA、PHP、C 等），而不是在任何其他操作系统上开发 Android 应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T12:03:56.520

Eclipse 本身不能在 Android 上运行。

我所知道的在 Android 本身上运行的唯一适用于 Android 的 IDE 是 AIDE：[https ://play.google.com/store/apps/details?id=com.aide.ui&hl=en](https://play.google.com/store/apps/details?id=com.aide.ui&hl=en)

# php - 匹配电子邮件的正则表达式

> ID：10968499
> 
> 赞同：0
> 
> 时间：2012-06-10T12:02:44.753
> 
> 标签：php, javascript, regex

我被困在特定问题上，我有用户名字段，其中只有字母数字和 . - 和 _ 是允许的，并且应该始终以字母开头

以下是接受的示例

```
someone@mydomain.com
something1234@mydomain.com
someething.something@mydomain.com
something-something@mydomain.com
something_something@mydomain.com
something_1234@mydomain.com 
something.123@mydomain.com
something-456@mydomain.com 
```

到目前为止我所做的是

```
[a-zA-Z0-9]+[._-]{1,1}[a-zA-Z0-9]+@mydomain.com 
```

这符合我的所有要求，除了它不匹配的问题

```
someone@mydomain.com
someont123@mydomain.com 
```

但它甚至匹配

```
someone_someone_something@mydomain.com 
```

这不是必需的，我真的不知道如何解决我尝试过的一件事是

```
[a-zA-Z0-9]+[._-]{0}[a-zA-Z0-9]+@mydomain.com 
```

但这也没有解决我的问题，现在它接受了一切

```
something+455@mydomain.com 
```

这不是必需的，请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T12:14:31.657

如果要使`-`or`.`可选，则必须在此处将`{1,1}`(quantifier: once) 替换为`?`(quantifier: one or none)：

```
 [a-zA-Z0-9]+[._-]?[a-zA-Z0-9]+@mydomain.com 
```

这个正则表达式也匹配没有分隔符的较短地址的原因`-._`是您没有断言整个字符串，而只是它的一部分。使用开始`^`和结束`$`锚点：

```
 ^[a-zA-Z0-9]+[._-]?[a-zA-Z0-9]+@mydomain\.com$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T12:35:57.657

这就是为什么我们有[`filter_var($email, FILTER_VALIDATE_EMAIL)`](http://php.net/manual/en/function.filter-var.php).

如果电子邮件地址有效，那么您只需检查它是否以 . 结尾`@domain.com`。这可以用[`strrpos($email, '@domain.com')`](http://php.net/manual/en/function.strrpos.php).

# iphone - 服务器到客户端的消息传递可以依赖 APNS 吗？

> ID：10968501
> 
> 赞同：8
> 
> 时间：2012-06-10T12:03:03.380
> 
> 标签：iphone, objective-c, ios, push-notification, apple-push-notifications

我正在开发一个消息传递应用程序，我对如何将数据从服务器发送到客户端感到两难。

我正在使用集中式服务器设计，客户端用于`NSURLConnection`向服务器发送消息，服务器不保留和管理打开的套接字，也无法为其中一个客户端发送消息。因此客户端使用计时器并每 2 秒查询一次服务器以查看是否有新数据在等待它们。

这种方法的问题是每 2 秒轮询一次服务器似乎会很快耗尽电池电量，所以我想也许不是客户端轮询服务器，而是**使用 APNS***，所以当服务器有一些**新的信息**** 给客户端时，服务器将向客户端发送**推送通知** *** **，然后客户端将从服务器获取数据。

*** 使用 APNS** - 如果客户端允许，客户端当然可以禁用此选项。因此，每次应用程序进入前台时，我都会检查是否允许推送，如果没有，我将返回轮询方法。

** **新信息**可以是从短信到服务器管理员消息的任何内容。（并且有很多管理员消息......）
例如，在我的应用程序中，用户可以看到他们的朋友状态（在线/离线），所以如果 user1 和 user2 是朋友，并且 user2 只是将他的状态从在线更改为离线，然后服务器需要将此新信息（管理消息 = user2_offline）发送给 user1。

*******服务器发送** **的推送通知**是空的（没有数据/声音），它只是客户端获取新信息的触发器，所以如果向客户端发送推送并且客户端应用程序关闭，他不会注意任何事情。（如果应用程序正在运行，那么它将从服务器获取新信息）**

 ****这种方法是否适用于需要大量推送通知使用的大型消息传递应用程序？**

更清楚地说，我的主要担忧是：
1\. APNS 是否足够可靠，我可以将其用作我的核心服务器到客户端消息传递机制？
2\. Apple 是否会批准每天从我的服务器发送的数千或数十万条推送通知？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-16T05:21:58.097

> APNS 是否足够可靠，我可以将其用作我的核心服务器到客户端消息传递机制？

**没有**。为了完整起见，让我重复一下原因。

1.  苹果自己否认可靠性阅读[编程指南](https://developer.apple.com/library/content/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/APNSOverview.html#//apple_ref/doc/uid/TP40008194-CH8-SW1)
2.  此外，APNS 有一个 QoS 组件，它可能会以实时为代价提高可靠性（例如，我可以要求 APNS 在 4 周内随时发送通知，如果设备无法访问，则重试），这在您的情况下没有用.
3.  根据您的要求，如果您发送静默推送（没有用户可见消息的推送），则不能作为高优先级推送发送，这会进一步降低可靠性。这是一个相关的报价

    > “静默通知并不是为了让你的应用在后台保持清醒，也不是为了高优先级更新。APNs 将静默通知视为低优先级，如果总数过多，可能会完全限制它们的传递。实际限制是动态的，可以根据条件变化，但尽量不要每小时发送超过几个通知。”

> Apple 是否会每天批准来自我的服务器的数千或数十万条推送通知？

一般来说，APNS 在负载方面不会有任何问题，但它有节流，它们可能会限制你的通知，见上面的第 3 点

恕我直言，你应该看看 XMPP，因为这个协议只是像你一样设计用例，并且它们在所有平台上都有广泛的社区支持。我建议您查看类似[https://github.com/robbiehanson/XMPPFramework](https://github.com/robbiehanson/XMPPFramework)的内容，并在您的后端设置一个 XMPP 服务器，该服务器将处理消息传递和状态消息以及管理消息。

如果你已经评估过 XMPP 并且不想使用它，我建议你需要在 iOS App 中构建一个智能系统，它根据 App State 采用不同的策略，比如下面，你可以有下面的策略

1.  基于实时套接字的方法 -> 建立永久套接字连接并尽可能保持数据同步（这是当您的应用程序运行到前台或后台时）
2.  您谈到的轮询系统，可以在调用您的应用程序进行后台获取/位置更新等时使用。
3.  当您的服务器检测到设备没有活动套接字并且很长时间没有轮询时，将 APNS 与用户可见消息传递 + 自定义数据一起使用

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-10T13:06:39.767

我在这个领域工作了一段时间，根据我的经验，我认为你解决问题的方法将无济于事。首先请允许我强调一些关于 APN 特征的重要事实：

1.  APN 不可靠，它们不能 100% 保证到达客户端。
2.  根据 Apple 的文档，APN 是**尽最大努力**，所以很多时候它们可能无法达到。
3.  APN 不会在其中保存数据，因此即使它们到达您的客户端应用程序，它们内部也不会为应用程序保存任何数据。
4.  APNs 只是通知用户发生了与您的应用程序相关的事情，而那里的消息（出现在 APN 的警报框中的文本）由 iOS 处理，而不是您的应用程序。这就是为什么使用 iOS 4 的设备显示 APN 的方式与使用 iOS 5 的设备不同，这是操作系统的工作而不是您的应用程序。
5.  通知到来时出现在您的应用程序图标上的徽章值是您的服务器的责任，而不是设备操作系统的责任。换句话说，当 APN 到达设备时，它应该为您的应用程序提供新的通知计数值。操作系统不会为此做任何事情。

话虽如此，我想解释一下这些应用程序通常是如何设计的。首先，它不是由 URL 连接完成的，并且客户端不会每隔一段时间检查服务器。通常您有一个客户端/服务器架构，其中您的客户端是设备上的应用程序，而服务器是驻留在服务器机器上的真实服务器程序。服务器可以是 Microsoft（例如使用 C#）或 MAC（使用 Objective C）。服务器有一个数据库，它在其中存储信息。一些重要信息（与您的问题相关）是 APN 计数值、您要传递的消息、客户端的在线或离线状态。

当一个客户端喜欢向另一个客户端发送一些东西时，或者当服务器想要向一个客户端（或所有客户端）发送一些东西时，会对接收客户端进行检查以查看他是在线还是离线。如果他在线，则直接发送消息，并且通常在 TCP 套接字上进行通信。如果用户离线，则服务器将存储需要发送给客户端的消息，增加 APN Count 值，向该接收者发送 APN。当该收件人在线时，服务器会注意到（因为建立了连接和握手），因此将从数据库中获取所有未传递的消息并将它们发送给他......

这是一个漫长的过程，我希望我能够向您解释一下。在所有情况下，我都不认为你的方式是实用的或使你能够从事真正的工作。**

# java - 从服务器 http 请求中执行 mongo map-reduce 的推荐方法是什么？

> ID：10968503
> 
> 赞同：1
> 
> 时间：2012-06-10T12:03:24.657
> 
> 标签：java, mongodb, mapreduce

我使用的是 REPLACE 输出类型，这意味着 MR 结果存储在集合中。

两个 http 请求在不同的线程中同时进行 MR - 这意味着我不能使用相同的输出集合名称，因此每个请求都会有一个集合，这可能会导致创建许多 MR 结果集合。

你如何处理这种情况？你如何限制并发请求的数量？如果查询重复，您是否保留 MR 结果集合？

简而言之，我很想知道其他人如何管理这些 MR 集合（如果有的话）。

我正在使用 mongo java 驱动程序（2.7.3）和 Restlet（2.0.10）

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:07:52.133

好吧，如果要多次使用结果，那么为每个 map-reduce 查询创建一个唯一的集合并在需要答案时从该集合中检索答案是有意义的。

在服务器中设置一个指示 MR 正在运行的标志可能会使您免于同时执行 MR 收集。如果 MR 作业是一项消耗资源的作业，最好将 MR 的结果保存在某个地方并在需要时检索它。

# wpf - wpf动画不适用于Windows窗体

> ID：10968508
> 
> 赞同：0
> 
> 时间：2012-06-10T12:03:39.640
> 
> 标签：wpf, c#-4.0, opencv, emgucv

我目前正在研究结合 emgu cv（作为图像处理）和 wpf（2D/3D 重建）的项目。

该项目首先是在 Windows 窗体中构建的，直到我发现如果我想构建 2D/3D 对象，我必须使用 WPF 控件（例如视口 3D），它将覆盖在图像帧/捕获的顶部......

因此，我使用 usercontrol 以 Windows 形式托管 WPF 控件，并且代码成功运行... [http://i.imgur.com/F9O7i.png](http://i.imgur.com/F9O7i.png)

但是，当我尝试制作一个简单的动画（例如矩形背景颜色变成另一种颜色等）时，它不起作用..

知道如何解决这个问题吗？ [http://i.imgur.com/2ZCph.png](http://i.imgur.com/2ZCph.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T13:01:31.723

```
<Window
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
x:Class="WpfApplication1.MainWindow"
x:Name="Window"
Title="MainWindow"
Width="640" Height="480">
<Window.Resources>
    <Storyboard x:Key="simple_animation">
        <ColorAnimationUsingKeyFrames Storyboard.TargetProperty="(Shape.Fill).(SolidColorBrush.Color)" Storyboard.TargetName="rectangle">
            <EasingColorKeyFrame KeyTime="0" Value="#FF21AB49"/>
            <EasingColorKeyFrame KeyTime="0:0:0.3" Value="#FFAB4721"/>
            <EasingColorKeyFrame KeyTime="0:0:0.7" Value="#FF21AB49"/>
        </ColorAnimationUsingKeyFrames>
    </Storyboard>
</Window.Resources>
<Window.Triggers>
    <EventTrigger RoutedEvent="FrameworkElement.Loaded">
        <BeginStoryboard Storyboard="{StaticResource simple_animation}"/>
    </EventTrigger>
</Window.Triggers>
<Grid Margin="0,12,0,0">
    <Rectangle x:Name="rectangle" Fill="#FF21AB49" Margin="136,93,92,157" Stroke="Black"/>
</Grid> 
```

上面的简单动画代码。首先，您必须创建 Storyboard 来制作动画，然后只有您可以制作想要制作动画的动画。请尝试上面的代码，它将对您有所帮助。

# php - 电子邮件中忽略换行符

> ID：10968512
> 
> 赞同：0
> 
> 时间：2012-06-10T12:04:08.807
> 
> 标签：php

我正在建立一个电子邮件，只是一个简单的文本。电子邮件的一部分来自 CSV 文件，我希望`\n`在每个条目后都有一个换行符。由于某种原因，这被忽略了。我将逗号替换如下。

```
 $orderDetails = str_replace(',', '\n\n', $orderDetails); 
```

然后将其添加到电子邮件中

```
$email_body = "Hello Joe Bloggs, \n\n Below are the order details \n\n".$orderDetails; 
```

由于某种原因，收到的电子邮件会打印`\n\n`而不是实际换行。所以电子邮件实际上看起来像

```
 Hello Joe blogs 

  Below are the order details

  item 1\n\nitem 2\n\nitem 3\n\n 
```

为什么是这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T12:06:08.510

您应该在以下内容中使用双引号`str_replace()`：

```
$orderDetails = str_replace(',', "\n\n", $orderDetails); 
```

在双引号内，PHP 将解释`\n`为特殊字符。请参阅[PHP 字符串](http://php.net/manual/en/language.types.string.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T12:08:54.100

使用`\r\n`和双引号。

```
$orderDetails = str_replace(',', "\r\n", $orderDetails); 
```

# mysql - 本地 Sql express 2 方式同步到远程服务器

> ID：10968515
> 
> 赞同：1
> 
> 时间：2012-06-10T12:04:13.367
> 
> 标签：mysql, database, synchronization, sql-server-express

我有一个带有本地 sqlexpress 数据库的本机 Windows 应用程序（软件）。我需要将每个本地安装（数量为 5000）的数据带到中央服务器，即 mysql。1./我认为我无法在每个本地安装的路由器上进行端口转发等，因此想知道完成同步的最佳方法是什么。2./ 在中央服务器上，我应该改用 ms sql。在中央级别坚持使用 ms sql 是否有令人信服的理由？

问候拉夫兹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T12:12:21.930

> 在中央服务器上，我应该改用 ms sql

是的，不是免费版本。

然后，您可以使用某种复制。

> 在中央级别坚持使用 ms sql 是否有令人信服的理由？

你一定是在开玩笑。阅读文档。SQL Server 在非免费版本中有一些非常好的特性——例如复制。上次我们尝试设置这个（笔记本电脑，是很久以前）我们在 sql 服务器之间进行事务复制，它就像一个魅力。

或者，您可以坐下来开始写作。有一个与 db 无关的同步框架可用，或者您可以完全自己动手——这两种方法都是有效的。但是你应该首先检查你能做什么。

检查[http://msdn.microsoft.com/en-us/library/cc645993.aspx#Replication](http://msdn.microsoft.com/en-us/library/cc645993.aspx#Replication)

您可以使用事务复制并将 expres 版本用作中央主数据库的订阅者。

# javascript - 当 JavaScript 将 disabled 属性更改为 false 时，Commandbutton 不会调用操作

> ID：10968517
> 
> 赞同：1
> 
> 时间：2012-06-10T12:04:19.713
> 
> 标签：javascript, jsf, jsf-2, primefaces

我在 JSF + PrimeFaces 中构建了 Web 应用程序。在 web 表单中，我将 primefaces 的命令按钮的禁用属性设置为 true。在对表单输入字段执行自定义客户端验证后加载表单时，我根据表单上的用户输入将命令按钮的禁用属性设置为 false 或 true。 *注意：如果所有验证都通过按钮启用，但同时如果用户编辑某些输入并且验证失败，那么按钮再次被禁用。*

```
<p:commandButton id="saveButton" value="Save" actionListener="#{some method of bean}" 
update="component to update" disabled="true" /> 
```

但是按钮不能正常工作，我的意思是没有提交表单。

但是，如果按钮的 disabled 属性在开始时未设置为 true，即使在自定义验证期间，它也会被 javascript 禁用/启用（如上所述）它可以正常工作。

我无法理解这个表单提交离子如何依赖于命令按钮的禁用属性的初始值，即使我是通过 javascript 设置它。

这是浏览器源代码中显示的 HTML 代码：

如果属性 disabled 设置为 true：

```
<button id="saveButton" 
class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" 
type="submit" 
onclick="PrimeFaces.ab({formId:'createAccessPrivilegeForm',source:'saveButton',process:'@all',update:'centerPanel leftNavigationForm:leftNavigationTabView'});return false;" 
name="saveButton" 
role="button" 
aria-disabled="false"> 
```

如果 disabled 属性设置为 false：

```
<button id="saveButton" 
class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only ui-state-disabled" 
disabled="disabled" 
type="submit" 
onclick="PrimeFaces.ab({formId:'createRoleForm',source:'saveButton',process:'@all',update:'centerPanel leftNavigationForm:leftNavigationTabView'});return false;" 
name="saveButton" 
role="button" 
aria-disabled="true"> 
```

帮我处理这种情况。我希望命令按钮最初只被禁用，它只有在验证通过后才会被禁用，我希望它能够提交表单。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T13:18:32.350

您需要在 JSF 端更改 disabled 属性，而不是在 JavaScript 端。disabled 属性即在 JSF 中处理表单提交的过程中根据 JSF 组件树状态重新评估。在客户端手动编辑 HTML DOM 树不会以任何方式自动更改服务器端的 JSF 组件树。

您需要用合理的 JSF 方法替换您的 JavaScript 方法以启用/禁用按钮。这是一个基于复选框的基本示例：

```
<h:selectBooleanCheckbox value="#{bean.checked}">
    <p:ajax update="button" />
</h:selectBooleanCheckbox>
<p:commandButton id="button" ... disabled="#{bean.checked}" /> 
```

# asana - 在 Asana 中是否有用于删除或移除任务的端点？

> ID：10968518
> 
> 赞同：0
> 
> 时间：2012-06-10T12:04:35.890
> 
> 标签：asana

我似乎在 Asana API 中找不到删除/删除任务端点。

[http://developers.asana.com/documentation/#tasks](http://developers.asana.com/documentation/#tasks)

开发人员是否可以使用此功能？如果是这样，我该如何删除任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T17:34:23.737

（我在 Asana 工作）

尚不支持此功能。我们确实打算在不久的将来某个时候添加此功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-28T12:05:35.817

现在有一个删除任务的终点：[https ://developers.asana.com/docs/delete-a-task](https://developers.asana.com/docs/delete-a-task)

# erlang - 将 XML 解析为 Erlang 记录列表

> ID：10968519
> 
> 赞同：1
> 
> 时间：2012-06-10T12:04:38.457
> 
> 标签：erlang, xml-parsing

我是 Erlang 的新手，正在尝试将 XML 文档解析为记录。我尝试了各种方法（xmerl_scan/xpath），但因为我不知道从哪里开始而被画到角落里。

我已经阅读了有关该主题的三本书，并花了几个小时在谷歌上搜索该主题，但我认为我一定遗漏了一些明显的东西。

*必须*有一种简单的方法来使用某种模式匹配访问每个节点并生成匹配列表。

这是输入...

```
<Sports>
<Sport> SportId="1" SportName="Cricket"> 
<League LeagueId="1" LeagueName="Test Match"> 
<Meeting MeetingId="1" MeetingName="Test Match"/> 
</League> 
<League LeagueId="2" LeagueName="One Day International"> 
<Meeting MeetingId="1" MeetingName="One Day International Match""/> 
<Meeting MeetingId="2" MeetingName="One Day International Series"/> 
</League>
<League LeagueId="3" LeagueName="T20 World Cup"> 
<Meeting MeetingId="1" MeetingName="T20 World Cup Futures"/> 
</League> 
</Sport> 
<Sport SportId="7" SportName="Golf"> 
<League LeagueId="1" LeagueName="PGA Tour"> 
<Meeting MeetingId="1" MeetingName="St Jude Classic"/> 
<Meeting MeetingId="2" MeetingName="US Open"/> 
</League> 
<League LeagueId="22" LeagueName="European Tour"> 
<Meeting MeetingId="100" MeetingName="Nordea Masters"/> 
<Meeting MeetingId="101" MeetingName="Nordea Masters Tournament HH"/> 
<Meeting MeetingId="102" MeetingName="Nordea Masters Top Aussie"/> 
<Meeting MeetingId="107" MeetingName="Nordea Masters Handicap"/> 
<Meeting MeetingId="110" MeetingName="Nordea Masters R1 3 Balls"/> 
</League> 
<League LeagueId="34" LeagueName="Ryder Cup"> 
<Meeting MeetingId="1" MeetingName="Ryder Cup 2012"/> 
</League> 
</Sport> 
</Sports> 
```

这是所需的输出...

```
[{SportId,SportName,LeagueId,LeagueName,MeetingId,MeetingName}] 
```

不一定需要一个固定的答案，但只要朝着正确的方向推动就会很有用，所以我可以自己做一些进一步的研究。

我使用 mochiweb_html:parse 在特定节点中搜索特定信息，但在上述实例中，我需要从多个节点中提取信息。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T17:25:27.893

你有没有调查[过erlsom](https://github.com/willemdj/erlsom)？

IMO 比 xmerl 更易于使用。使用 erlsom，您可以从 XSD 模式生成记录定义。记录定义映射来自模式的类型（加上一些额外的信息）。使用记录模式匹配很简单。您可以在[此处](http://erlsom.sourceforge.net/erlsom.htm)找到更多信息。

# java - 排除 JAXB 中的字段

> ID：10968522
> 
> 赞同：47
> 
> 时间：2012-06-10T12:05:09.167
> 
> 标签：java, xml, jaxb, java-ee-6

我有 2 节课：

```
@XmlRootElement
public class A {

    private Long id;
    private B b;

    // setters and getters
} 
```

和

```
@XmlRootElement
public class B {

    private Long id;
    private String field1;
    private String field2;

    // setters and getters
} 
```

默认情况下，如果我将类的实例转换`A`为 XML，我将拥有它的所有字段 ( `id`) 和引用的`B`类字段 ( `id`, `field1`, `field2`)，如下所示：

```
<a>
    <id>2</id>
    <b>
        <id>5</id>
        <field1>test1</field1>
        <field2>test3</field2>
    </b>
</a> 
```

是否可以修改引用类的**哪些**`B`字段包含在类的 XML 中`A`？例如我想说当我转换`A`类的实例时，我只想`id`从`B`类中获取（没有`field1`和`field2`字段），所以我想得到：

```
<a>
    <id>2</id>
    <b>
        <id>5</id>
    </b>
</a> 
```

我不想永久注释`B`类（使用`@XMLTransient`or `@XMLElement`）来实现它，因为在某些情况下我想按`B`原样导出整个类（使用和`id`。） 我只是不想导出所有这些字段时该类引用自.`field1``field2`
`B``A`

这甚至可以用 JAX-B 实现吗？

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-06-10T12:09:16.190

您可以使用注释`@XmlTransient`来忽略字段。将此注释放在字段本身或其 getter 上。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-06-10T13:19:12.783

你可以[`@XmlTransient`](https://docs.oracle.com/javase/8/docs/api/javax/xml/bind/annotation/XmlTransient.html)在球场上使用。此外，默认 JAXB 绑定可以在全局范围内或根据需要通过使用[自定义绑定声明](http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/2.0/tutorial/doc/JAXBUsing4.html)逐个进行覆盖。

查看Baeldung 网站上的[JAXB 指南以获取更多示例。](http://www.baeldung.com/jaxb)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-06-10T17:16:16.880

好的，我想出了一些 hacky 解决方案：

```
@XmlRootElement
public class A {

    private Long id;
    private B b;

    // setters and getters
} 
```

我为 REST 用例提供了一个额外的 getter，所以它就像：

```
@XMLTransient
public B getB() {
    return b;
}

@XMLElement(name="b")
public Long getBForREST() {
    return b.getId();
} 
```

它导致以下结构：

```
<a>
    <id>2</id>
    <b>5</b>
</a> 
```

它与我的目标结构并不完全相同，它对我有用。

我不喜欢这个解决方案——`@XMLExclude({"field1", "field2"})`在我看来，一个或类似的东西会更干净。

尽管如此 - 现在，它可以工作；这很丑陋，但它有效。

# c - 动态数组混淆

> ID：10968525
> 
> 赞同：4
> 
> 时间：2012-06-10T12:05:32.680
> 
> 标签：c, malloc, dynamic-arrays

我只是稍微复习一下我的 C 概念，因为我对某些行为感到困惑。考虑以下代码片段：

```
#include<stdio.h>
#include<stdlib.h>

int main (){

    int * arr;
    arr= malloc(3*sizeof(*arr));
    arr[0]=1;
    arr[1]=2;
    arr[2]=3;
    arr[3]=4;
    printf("value is %d \n", arr[3]);

return 0;

} 
```

问题是程序运行正常！据我了解，我为 3 个整数的数组分配内存。所以基本上当我尝试输入一个值时`arr[3]` 应该有一个`segmentation fault`，因为没有为它分配内存。但它工作正常并打印值 4。要么这是一些奇怪的行为，要么我真的需要修改基本的 C。如果有人能提供一些解释，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-10T12:07:19.697

从技术上讲，它是**未定义的行为**，这意味着任何事情都可能发生，不一定是分段错误。
只是您的程序不是有效程序，您不应编写无效程序并期望它们具有有效/无效的行为。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-10T12:07:49.447

您随时可能遇到分段错误，这次您“幸运”了。这是**未定义**的行为，因此您可能会在其他时候遇到段错误。

C**不做**任何边界检查，所以尽管 Java 会抱怨，但 C 很乐意做任何你要求它做的事情，即使对程序自身不利。

这既是它的主要优势之一，也是它的弱点。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-10T12:07:22.210

您的程序有[未定义的行为](http://en.wikipedia.org/wiki/Undefined_behavior)。这并不意味着它可以保证段错误。失败可能以其他方式表现出来（或根本不表现出来）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-10T12:58:27.283

这是基于我对内存分配方式的理解的猜测（可能是错误的 - 如果是，请投反对票！）：

的地址`arr[3]`位于您的应用有权写入的内存页面中。我认为 4KB 是常见的页面大小。该`malloc`调用导致 1 个页面被映射到您的应用程序，您只使用其中的第一个`3*sizeof(*arr)`字节，因此`arr[2]`您的应用程序有权写入，但`malloc`尚未发布。如果您要执行另一个`malloc`，返回的地址将大于`arr`并且可能等于`arr[3]`.

# php - 在 Codeigniter 中转义 SQL 查询

> ID：10968527
> 
> 赞同：12
> 
> 时间：2012-06-10T12:05:48.857
> 
> 标签：php, mysql, codeigniter, activerecord

我正在使用 CodeIgniter 将一些数据插入到 MySQL 表中。因为我正在使用`INSERT IGNORE INTO`并且不想编辑活动记录类来启用此功能，所以我手动生成 SQL 查询。

```
$this->db->query("INSERT IGNORE INTO my_table(lat, lng, date, type)
                        VALUES ('" . $data['lat'] . "', '" . $data['lng'] . "', '" . $data['date'] . "', '" . $data['type'] . "')"); 
```

**问题：**当字符串中`$data['type']`包含单引号时查询失败。我怎样才能使这些需要转义的字符自动转义，就像使用活动记录时一样？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-10T12:14:00.417

另一种方法是使用自动转义所有值的查询绑定：

```
$sql = "INSERT IGNORE INTO my_table(lat, lng, date, type) VALUES (?,?,?,?);"; 
$this->db->query($sql, array($data['lat'], $data['lng'], $data['date'], $data['type'])); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-10T12:08:02.553

使用**$this->db->e​​scape();** 它会自动转义字符串

> 此函数确定数据类型，以便它只能转义字符串数据。它还会自动在数据周围添加单引号，因此您不必：

```
$this->db->query("INSERT IGNORE INTO my_table(lat, lng, date, type)
VALUES ('" . $this->db->escape($data['lat']) . "', '" . $this->db->escape($data['lng']) . "', '" . $this->db->escape($data['date']$this->db->escape . "', '" . $this->db->escape($data['type']) . "')"); 
```

这是参考[点击这里](http://ellislab.com/codeigniter/user-guide/database/queries.html)

# gnuplot - 可以从文件中获取“设置标题”的字符串吗？

> ID：10968529
> 
> 赞同：3
> 
> 时间：2012-06-10T12:05:57.113
> 
> 标签：gnuplot

我将 Gnuplot 与脚本和数据文件一起使用。

在我的脚本中有一个命令；

设置标题“废话标题在这里”

是否可以从数据文件中获取该字符串？例如，这样我就可以使用包含许多数据文件的单个脚本，因为数据文件将包含绘图的标题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T15:24:57.353

我不确定这在纯 gnuplot 中是否容易做到，但这里有一个使用包装 bash 脚本的解决方案。`plotscript.sh data.dat`您可以通过在命令行调用来使用该脚本。

```
#!/bin/bash

my_title=$(head -n 1 $1 | sed 's/^# \(.*\)/\1/')

echo "set terminal postscript enhanced color
set output 'plot.eps'

set title '$my_title'
plot '$1' u 1:2" | gnuplot 
```

要使脚本可用，请将代码放入文本文件并`chmod +x`在其上运行。如果您告诉我标题的格式，我可以尝试定制脚本以匹配它。此脚本假定标题是这种格式的数据文件的第一行：

```
# mytitle

1 4
2 5
3 2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T15:23:00.883

您可以使用反向替换...例如

```
set title "`head -1 datafile.dat`" 
```

但是，这并不能完全得到您想要的，因为反向替换是在字符串操作之前完成的（您不能将数据文件名指定为字符串）。但是，宏在反向替换之前被扩展。

我的测试数据文件看起来像：

```
"this is the title"
10 20
20 30
30 40 
```

我的测试脚本看起来像：

```
DATAFILE="datafile.dat"
set macro
TI='`head -1 '.DATAFILE.'`'  #macro: Single quotes are important here to prevent expansion of backtics.
set title @TI
plot DATAFILE u 1:2 title columnhead(1) 
```

请注意，如果您的标题在数据文件中没有用双引号括起来，则需要添加它们以使生成的`set title`命令有效。（您可以将它们添加到宏或数据文件中）

# java - JPA - 使用 mappedBy 属性定义拥有实体的区别

> ID：10968536
> 
> 赞同：9
> 
> 时间：2012-06-10T12:06:53.580
> 
> 标签：java, hibernate, jpa, persistence, jpql

以下两个声明到底有什么区别

B是拥有方

```
@Entity
class A {
   @Id int id;

   @OneToOne
   B b;
}

@Entity
class B {
   @Id int id;

   @OneToOne(mappedBy="b")
   A a;
} 
```

A是拥有方

```
@Entity
class A {
   @Id int id;

   @OneToOne(mappedBy="a")
   B b;
}

@Entity
class B {
   @Id int id;

   @OneToOne
   A a;
} 
```

在“普通 SQL”中考虑这一点，我认为这与拥有两个表相同，每个表都有另一个表的外键。我不明白的是，指定哪个实体是拥有方的效果是什么，即使用“mappedBy”属性。这实际上实现了什么，因为我不相信普通 SQL 中存在等价物。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-10T12:59:45.503

[JPA 2.0 规范](http://download.oracle.com/otndocs/jcp/persistence-2.0-fr-eval-oth-JSpec/)第2.9 节写道：

> 关系可以是双向的或单向的。双向关系既有拥有方，也有反向（非拥有）方。单向关系只有拥有方。关系的拥有方决定数据库中关系的更新，如 3.2.4 节所述。
> 
> 以下规则适用于双向关系：
> 
> *   双向关系的反面必须通过使用 、 或 注释的元素来引用其 拥有 方`mappedBy` 。 元素指定作为关系所有者的实体中的属性或字段。`OneToOne``OneToMany``ManyToMany``mappedBy`
> *   一对多/多对一双向关系的多方必须是拥有方，因此`mappedBy`无法在`ManyToOne`注释上指定元素。
> *   对于一对一的双向关系，拥有方对应于包含相应外键的一方。
> *   对于多对多双向关系，任何一方都可能是拥有方。

第 3.2.4 节的相关部分是：

> 持久实体的状态在事务提交时同步到数据库。这种同步涉及将任何对持久实体及其关系的更新写入数据库，如上所述。

和

> 托管实体之间的双向关系将基于关系拥有方持有的引用进行持久化。开发人员有责任在内存引用发生变化时保持拥有侧的内存引用和反向侧的引用保持一致。在单向一对一和一对多关系的情况下，开发人员有责任确保遵守关系的语义。
> 
> > *尤其重要的是要确保对关系反向方的更改会导致拥有方进行适当的更新，以确保更改同步到数据库时不会丢失。*

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-10T13:05:18.233

正如其他人指出的那样，您在示例中哪一方是拥有方是错误的。对于拥有方，我们的意思是从 OO 角度拥有关系，实际上，如果使用 rdbm 作为持久性提供程序，通常最终会与在 db 中生成或将生成的关系相反。

在正常情况下，OO 模型非常清楚哪些方是拥有方。例如，订单有 OrderLines。如果我们删除一个订单，所有的订单行都应该被删除。如果我们删除 OrderLine，则 Order 可能仍然具有存在权。因此，订单是拥有方。

对于一个更具体和优秀的例子，关于哪一方是拥有方的影响，我参考@JB Nizet 的回答。

根据[JPA 2.0 规范](http://download.oracle.com/otndocs/jcp/persistence-2.0-fr-eval-oth-JSpec/)的第 2.9 节：

> 对于一对一的双向关系，拥有方对应于包含相应外键的一方。

但在同一部分中，我们也有：

> 此外，本规范还要求支持以下可选映射策略：[..] 单向和双向一对一关系、双向多对一/一对多关系和单向多向关系的映射通过连接表映射的一对一关系。

在同一部分继续往下一点：

> 可以指定额外的映射注释（例如，列和表映射注释）来覆盖或进一步细化第 2.10 节中描述的默认映射和映射策略。一些实现利用它来允许双向 OneToOne 的 FK 位于目标表中。

要阅读一些关于解决该场景的一些策略，请参阅：[一个几乎很好的解释](http://en.wikibooks.org/wiki/Java_Persistence/OneToOne#Target_Foreign_Keys.2C_Primary_Key_Join_Columns.2C_Cascade_Primary_Keys)

我还没有检查，但我确实希望并相信 2.1 会删除第一个引号。由于实际的数据库结构应该尽可能少地限制我们如何将数据建模为实体。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-10T12:25:44.717

在第一个示例中，`A`表格将有 2 列，并且`id`表格将有 1 列。这使得拥有方。`b_id``B``id``A`

在第二个例子`B`中是拥有方。`B`有两列，`id`并且`a_id`. `A`将有一列，`id`.

这就是区别:-)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-10T12:41:01.867

拥有方是 JPA 认为知道关联是否存在的一方。假设您使用第一个示例。拥有方是没有 mappedBy 属性的一方。因此，拥有方是 A，而不是 B。

这意味着如果您在数据库中有一个 A 和一个 B，并且您这样做了

```
A a = em.find(A.class, aId);
B b = em.find(B.class, bId);
a.setB(b); 
```

JPA 将保存关联（即它将 B 的 ID 存储在表 A 的连接列中）。

但如果你这样做

```
A a = em.find(A.class, aId);
B b = em.find(B.class, bId);
b.setA(a); 
```

数据库中什么都不会改变，因为您修改了反面并忘记修改拥有方。

# git - 匿名本地 git 存储库？

> ID：10968537
> 
> 赞同：7
> 
> 时间：2012-06-10T12:07:00.420
> 
> 标签：git, anonymity

我有一个本地 git 存储库，我已经做了很多工作，其中有一些我想保留的提交。不幸的是，虽然代码可以合理地重用，但我在很早的提交中包含了一些敏感数据（数据库名称/用户/密码）。我想更改整个历史记录以匿名敏感数据，同时保留一般历史记录结构。这可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T12:25:02.203

我认为这会有所帮助：

*   [删除敏感数据](https://help.github.com/articles/remove-sensitive-data)
*   [改写历史](http://git-scm.com/book/en/Git-Tools-Rewriting-History#The-Nuclear-Option%3a-filter-branch)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T12:25:52.020

从存储库中删除它们，然后提交。然后，您需要压缩从添加文件到删除文件时的所有提交。[您可以在这里](http://gitready.com/advanced/2009/02/10/squashing-commits-with-rebase.html)看到一个很好的解释，简而言之建议使用`git rebase -i`.

# javascript - 获取按月排序的 Spotify 用户收听历史记录？

> ID：10968538
> 
> 赞同：0
> 
> 时间：2012-06-10T12:07:08.217
> 
> 标签：javascript, arduino, processing, spotify

libspotify 是否允许以与 facebook 中显示的方式相同的方式获取用户的收听历史记录？例如。2012 年 5 月热门曲目。如何？如果没有，如果用户进行身份验证，是否有一种解决方法可以从用户的 Facebook 帐户中提取这些数据？我想在使用 arduino 的有形界面中使用它。非常感谢！

ps 我遇到了这个 js 代码，但我不确定它是否提供每个月的热门曲目：[https ://gist.github.com/1792366](https://gist.github.com/1792366)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T18:39:19.110

Spotify 目前不存储/公开任何收听历史记录。但是，可以使用 Facebook API 检索发送到 Facebook 的数据。

# html - div没有高度

> ID：10968540
> 
> 赞同：0
> 
> 时间：2012-06-10T12:07:15.050
> 
> 标签：html, css

我有 3 个带有类 stackContainer 的 div：

```
.stackContainer {
    position: relative;
} 
```

因为有很多 div，我希望它们彼此重叠，这很有效：

```
.stackItem {
    position: absolute;
} 
```

只有 3 个 stackContainer 不应该彼此重叠。我认为这只是一个小的CSS东西。

[http://jsfiddle.net/vPtYD/](http://jsfiddle.net/vPtYD/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T12:34:45.197

这是你想要达到的目标吗？ [http://jsfiddle.net/Vfqsr/](http://jsfiddle.net/Vfqsr/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T12:13:43.443

如果`stackContainer`div 中的所有内容都是绝对定位的，那么这些 div 不知道它们应该有多高，因为带有 的元素`position:absolute`被从正常的文本流中取出。

所以最好的办法是弄清楚每个 div 的最大内容是什么，并将`height`stackContainers 的属性显式设置为这些值。

或者，给他们至少一个非绝对定位的子元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T12:13:46.780

给出`stackContainer`宽度和高度：

```
.stackContainer {
    position: relative;
    width: 128px;
    height: 128px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T12:15:41.330

您可以在 .stackContainer 上放置高度

```
.stackContainer {
    height:200px;
}

.stackItem {
    position:absolute;
} 
```

# python - 用于 Python 的高级 IMAP 库

> ID：10968541
> 
> 赞同：4
> 
> 时间：2012-06-10T12:07:16.013
> 
> 标签：python, imap

是否有适用于 Python 的高级 IMAP 库？

*高级*我的意思是，我不想要一个可以发出基本 IMAP 命令的库（比如 Python 自己的*imaplib*）。我想要的是关心大多数 IMAP 细节的库，它为我提供了一个更通用的接口，其中包含文件夹/邮箱和消息的对象。此外，如果它透明地支持断开连接的操作模式（离线模式），那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-10T17:24:53.783

我知道我在这里讨论迟到了，但[IMAPClient](http://imapclient.freshfoo.com/)看起来可能是您正在寻找的。它比 imaplib 更高级（并且建立在 imaplib 之上）。我自己刚刚开始将它用于一个项目，所以还没有经验，但看起来不错。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-10-09T12:51:17.703

您可以使用 imap_tools 包： [https ://pypi.org/project/imap-tools/](https://pypi.org/project/imap-tools/)

特征：

*   解析的电子邮件属性
*   用于搜索电子邮件的查询生成器
*   处理文件夹中的电子邮件（复制、删除、标记、移动、附加）
*   使用邮箱文件夹（列表、设置、获取、创建、存在、重命名、删除、状态）
*   无依赖

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T07:42:19.797

IMAP 已经是相当高级的了，它为您提供了一个与邮箱、消息和电子邮件所有内容的接口。您可能想结帐：http: [//verpa.wordpress.com/2010/01/23/python-gmail-imap-part-1/](http://verpa.wordpress.com/2010/01/23/python-gmail-imap-part-1/) [http://sourceforge.net/projects/libgmail/](http://sourceforge.net/projects/libgmail/)

这进一步简化了 Gmail 的 IMAP 交互。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T05:20:17.887

回答您的问题：您要寻找的东西在野外 AFAIK 中不存在。

除此之外，您是否考虑过从 Python 调用 context.io？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-21T13:07:07.253

这是一种不回答。我不知道一个好的基于 python 的解决方案。但是，任何寻找这种东西的人都可能会在这里找到自己，所以我希望这个答案可能会导致创建一个好的 python 解决方案。

[在编写了大约 150 行 python 代码之后，我的解决方案是通过imapfilter](https://github.com/lefcha/imapfilter)的发现，阅读了比我过去 20 年任何时候都需要的更多的 IMAP RFC，并且几乎让它工作。它是用我以前从未使用过的 lua 编写的，但在几个小时内我就有了一个只有 20 行长的工作脚本。

不难想象为什么你想要 python 的全部功能而不仅仅是 imapfilter 给你的东西，但是 imapfilter 可能会做你需要的，它确实为想象一个高级 python 库应该做什么提供了一个相当不错的起点看起来像。

# javascript - Jquery - 在与此相同的容器类 div 中选择 div？

> ID：10968545
> 
> 赞同：0
> 
> 时间：2012-06-10T12:07:39.827
> 
> 标签：javascript, jquery, ajax, jquery-selectors

我在 foreach 循环中循环浏览数据。在每个循环中，容器类包含以下内容：

```
foreach($resultarray AS $value){
        $filename = substr($value['img_file_name'],9);
        $cat_id = $value['cat_id'];
        echo '<article class="post">';
        echo '<div class="post_title">' . $value['post_title'] . '</div>';
        echo '<div class="post_info">' . 
        'Category: ' . $cat_name = get_cat_name($cat_id) .'<br />'. 
        'Year: ' . $value['post_year'] .'<br />'. 
        $value['post_desc'] .'<br />'. 
        '</div>';
        echo '<div class="link-to-post"><a href="#">Click to view</a></div>';
        echo '<a href="#" class="linktopost"><img class="post-thumb" src="img/thumb_/'.$filename.'" alt="MJbox Michael Jackson memorabilia thumbnail" /></a>';
        echo '<a href="#" class="linktopost"><img class="cover-img" src="img/post-bg-1.png" alt="test" /></a>';
        echo '<form name="form"><input type="text" class="postid" value="'.$value['post_id'].'" /></form>';
        echo '</article>';

    } 
```

当单击“lintopost”链接/图像时，我使用 Jquery 使以下 div 可见。

```
<div id="main-post">
        <div id="gotpostid">some text</div>
</div> 
```

目前我正在使用 collowing Jquery 来处理#main-post div 何时出现以及何时获取该帖子的数据以放入 div 中。

```
$(".cover-img").click(function(){
        $("#main-post").fadeIn(1000);
        $.post("inc/fullpost.php", {postid: $('.postid').val()},
            function(output){
                $("#gotpostid").html(output).show();
            }).fail(function(x,y,z){ 
                $("#gotpostid").html(x + "<br />" + y + "<br />" + z)
            });

}); 
```

我目前遇到的问题是输入“postid”的值没有被正确选择。我如何选择它，以便它从**这个**输入字段中获取值，而不仅仅是从它遇到的第一个 .postid 中获取值，这使得每次迭代的 id 都相同。

我希望我能很好地解释自己。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T12:15:35.753

1) 我建议您`.on('click', function() {`在要在标记上添加新元素时使用。

2）点击图像使用`.find()`并`.parent()`获得准确的输入后。

# coffeescript - 在 CoffeeScript 中查找范围

> ID：10968546
> 
> 赞同：10
> 
> 时间：2012-06-10T12:07:42.760
> 
> 标签：coffeescript

我了解如何在 CoffeeScript 中定义数组范围

```
lng[1..10] 
```

但是，如果我有

```
data = 10 
```

找出 10 是否在 1 和 11 范围内的最佳方法是什么？

```
if data is between(1..11)
  return true 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-10T12:20:10.183

没有“between”关键字，但您可以使用普通的数组范围：

```
if data in [1..11]
    alert 'yay' 
```

但这有点矫枉过正，所以在简单的情况下，我建议进行正常比较：

```
if 1 <= data <= 11
    alert 'yay' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T21:54:25.313

如果你不介意污染原生原型，你可以`between`给对象添加一个方法`Number`：

```
Number::between = (min, max) -> 
  min <= this <= max

if 10.between(1, 11)
  alert 'yay' 
```

虽然我个人不会使用它。`if 1 <= something <= 11`比较直接，大家都会明白的。`between`相反，如果您想知道它的作用（或者您必须猜测），则必须查找该方法，我认为它不会增加太多。

# php - PHP 中的 MySQL 查询

> ID：10968552
> 
> 赞同：1
> 
> 时间：2012-06-10T12:08:13.830
> 
> 标签：php, mysql, json

这是我在 MySQL 中的实际查询：

```
 SELECT sndprefix, COUNT(*) FROM `inbox` WHERE
 (
 sndprefix='22' OR 
 sndprefix='23' OR 
 sndprefix='32' OR 
 sndprefix='33' OR 
 sndprefix='34' OR 
 sndprefix='42' OR 
 sndprefix='43'
 ) 
 GROUP BY sndprefix; 
```

我得到了正确的响应，例如：

```
 sndprefix  COUNT(*)
 22     3
 23     5
 32     1
 33     1
 43     1 
```

我的问题是在浏览器中显示此查询并被解析为 json 格式的 PHP 代码是什么。

提前致谢。

抱歉，如果我之前没有发布代码，我试图让自己熟悉 stackoverlow 的 UI，找到编辑选项..

这是我到目前为止尝试过的代码：

```
 <?php
 $query="SELECT sndprefix, COUNT(*) FROM `inbox` WHERE
 (
 sndprefix='22' OR 
 sndprefix='23' OR 
 sndprefix='32' OR 
 sndprefix='33' OR 
 sndprefix='34' OR 
 sndprefix='42' OR 
 sndprefix='43'
 ) 
 GROUP BY sndprefix;";

 $result = mysql_query($query);
while($sunget = mysql_fetch_array($result)){
    foreach($sunget AS $key => $value) { $conget[$key] = stripslashes($value); }
 echo "". nl2br( $sunget['sndprefix']) ."";
 }
 ?> 
```

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-10T16:05:13.437

好吧..看起来问题已更新。

你做错了..在多个层面上。我想糟糕的教程是有问题的。

*   **查询**

    您应该阅读有关`WHERE`子句的更多信息，以及如何使用它。[这个页面](http://dev.mysql.com/doc/refman/5.5/en/range-optimization.html)将提供一些基本信息，但你应该找到一些关于 MySQL 的书（并且只关于 MySQL，不包括 PHP）。

    这将使查询更易于阅读：

    ```
    SELECT 
        sndprefix AS prefix, 
        COUNT(*) AS count 
    FROM inbox 
    WHERE sndprefix IN ('22', '23', '32', '33', '34', '42', '43') 
    GROUP BY sndprefix; 
    ```

    此外，您可能想了解MySQL 中的[JOIN](http://dev.mysql.com/doc/refman/5.0/en/range-optimization.html)语句，因为我有一种感觉，这个特定前缀列表有一些共同点。

    而且由于前缀是重复的，因此最好将它们放在单独的表中。至少从[标准化](http://en.wikipedia.org/wiki/Third_normal_form)的角度来看。

*   **在 PHP 中查询数据库**

    您不应该使用古老的`mysql_*`函数编写新代码。它们不再维护，社区已经开始[弃用过程](http://news.php.net/php.internals/53799)，现在甚至在手册中添加了警告：（见[红框](http://uk.php.net/manual/en/function.mysql-query.php)）。

    相反，您应该了解[准备好的语句](http://goo.gl/vn8zQ)并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)。如果你不能决定，[这篇文章](http://goo.gl/3gqF9)将有助于选择。如果你想学习，[这里有一个相当不错的 PDO 相关教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

    让我们假设您已经使用 PDO 与数据库交互（我只是更喜欢它而不是 MySQLi）。

    ```
    $connection = new PDO(
                      'mysql:host=localhost;dbname=my_magc_db;charset=UTF-8', 
                      'username', 'password');
    $connection->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $connection->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
    // the connection has been established, and object configured

    $sql = 'SELECT 
                sndprefix AS prefix, 
                COUNT(*) AS count 
            FROM inbox 
            WHERE sndprefix IN ('22', '23', '32', '33', '34', '42', '43') 
            GROUP BY sndprefix';

    $statement = $connection->query( $sql );
    // no need to prepare the statement this time, because values are predefined
    // if values '22', '23', etc. depend on user input, code would be different

    $data = $statement->fetchAll(PDO::FETCH_ASSOC);
    // now $data contains all the values.
    // you van use var_dump($data) to "look inside" variable 
    ```

*   **制作 JSON**

    由于`$data`已经是一个包含所有值的数组，您可以简单地编写它
    [`echo json_encode( $data );`](http://uk.php.net/manual/en/function.json-encode.php)来生成 JSON。

*   **制作输出**

    既然你已经有了数组，你可以写：

    ```
    foreach ( $data as $row ) {
        echo $row['prefix'], ' ', $row['count'], PHP_EOL, '<br>';
    } 
    ```

    任何问题 ？

# jquery - jQuery.each(函数(索引, 值){}); 什么是价值？

> ID：10968555
> 
> 赞同：8
> 
> 时间：2012-06-10T12:08:33.940
> 
> 标签：jquery

我正在从一本名为[Head First jQuery 的书中学习 jQuery](http://www.headfirstlabs.com/books/hfjquery/ "头部优先 jQuery")。这本书很容易学习。关键是，有一个`.each()`函数（包含在我从 扫描的图像中），它有一个 function() 参数。function() 参数是`index`和`value`。索引在页面上有说明，但是值呢？而且，由于它是一个匿名函数（不能重用），它如何接受任何参数？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-11T08:35:00.277

jQuery中有两种`each`方法。一种是循环遍历包含许多匹配项的 jQuery 对象。例如，假设我们要查找页面上的所有段落：

```
$("p").each(function(){
    // Do something with each paragraph
}); 
```

其次，有一个更通用 `each`的迭代对象或数组：

```
var names = ["Jonathan", "Sampson"];
$.each(names, function(){
    // Do something with each name
}); 
```

当 jQuery 循环遍历这些示例中的元素时，它会记录当前正在处理的对象。当它执行我们的匿名函数时，它传入两个参数——我们所在的当前值（索引）和那个对象（值）。

```
var names = ["Jonathan", "Sampson"];
$.each(names, function(index, value){
    alert( value + " is " + index );
}); 
```

输出“Jonathan is 0”和“Sampson is 1”，因为我们使用的是从零开始的索引。

但是我们的原生 jQuery 对象呢？

```
$("p").each(function(index, value){
    alert( value.textContent ); // The text from within the paragraph
}); 
```

在这种情况下，`value`是一个实际的对象，所以如果我们愿意，我们可以访问类似或的`HTMLParagraphElement`属性：`textContent``innerText`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T12:49:33.740

您称为 value 的第二个参数是每个函数当前处理的集合的**值。**

对于您的第二个问题 - 可以重用匿名函数，仅仅因为它们没有名称并不意味着它们不能有参数或被执行。请参见以下示例：

```
function execute_fn(fn) {
  fn(1,2);
}

execute_fn(function(a,b) { ... }); 
```

# java - Java：在超类方法签名中返回子类

> ID：10968557
> 
> 赞同：31
> 
> 时间：2012-06-10T12:08:58.467
> 
> 标签：java, interface, subclass, superclass

我正在解决一个问题，其中有几个 的实现`Foo`，伴随着几个`FooBuilder`'s。虽然`Foo`'s 共享几个需要设置的公共变量，但它们也有不同的变量，需要它们各自`FooBuilder`来实现某些特定的功能。为简洁起见，我想让`FooBuilder`'s setter 使用方法链接，例如：

```
public abstract class FooBuilder {
  ...

  public FooBuilder setA(int A) {
    this.A = A;
    return this;
  }

  ...
} 
```

和

```
public class FooImplBuilder extends FooBuilder{
  ...
  public FooImplBuilder setB(int B) {
    this.B = B;
    return this;
  }
  public FooImplBuilder setC(int C) {
    this.C = C;
    return this;
  }
  ...
} 
```

依此类推，有几种不同的`FooBuilder`实现。这在技术上可以满足我的所有需求，但是，这种方法在执行方法链接时对方法调用的顺序很敏感。以下有方法未定义的编译错误：

```
someFoo.setA(a).setB(b)... 
```

要求开发人员考虑链中方法调用的顺序。为了避免这种情况，我想让 setter 以`FooBuilder`某种方式返回实际的实现子类。但是，我不确定如何执行此操作。最好的方法是什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-10T13:40:58.053

这是一个很好的问题，也是一个真正的问题。

正如 Jochen 的回答中提到的，在 Java 中处理它的最简单方法可能涉及使用泛型。

[在这篇关于Using Inheritance with Fluent Interfaces](http://egalluzzo.blogspot.com/2010/06/using-inheritance-with-fluent.html)的博客文章中有一个很好的讨论和一个合理的解决方案，它将泛型与`getThis()`构建器子类中覆盖的方法的定义相结合，以解决始终返回正确类的构建器的问题。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-03-01T19:05:01.680

找到[这个出色的答案](https://stackoverflow.com/a/3603485)后，我现在分享它。

```
public class SuperClass<I extends SuperClass>
{
    @SuppressWarnings( "unchecked" ) // If you're annoyed by Lint.
    public I doStuff( Object withThings )
    {
        // Do stuff with things.
        return (I)this ; // Will always cast to the subclass. Causes the Lint warning.
    }
}

public class ImplementationOne
extends SuperClass<ImplementationOne>
{} // doStuff() will return an instance of ImplementationOne

public class ImplementationTwo
extends SuperClass<ImplementationTwo>
{} // doStuff() will return an instance of ImplementationTwo 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-10T12:18:54.707

泛型可能是这里的方法。

如果你声明 setA() 像这样（伪代码）

```
<T> T setA(int a) 
```

编译器应该能够找出真正的类型，如果不能，你可以在代码中给出提示，比如

```
obj.<RealFoo>setA(42) 
```

# python - python re.sub 带有要查找的单词列表

> ID：10968558
> 
> 赞同：6
> 
> 时间：2012-06-10T12:09:00.977
> 
> 标签：python, regex, list

我对 RE 不太熟悉，但我正在尝试遍历一个列表并使用`re.sub`它从保存在变量中的一大块文本中取出多个项目`first_word`。

我`re.sub`先删除标签，这很好用，但接下来我想删除`exclusionList`变量中的所有字符串，但我不知道该怎么做。

感谢您的帮助，这是引发异常的代码。

```
exclusionList = ['+','of','<ET>f.','to','the','<L>L.</L>']

for a in range(0, len(exclusionList)):
      first_word = re.sub(exclusionList[a], '',first_word) 
```

例外：

```
first_word = re.sub(exclusionList[a], '',first_word)
    File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/re.py", line 151, in sub
return _compile(pattern, flags).sub(repl, string, count)
    File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/re.py", line 245, in _compile
raise error, v # invalid expression error: nothing to repeat 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-10T12:17:36.963

加号是正则表达式中的运算符，意思是“前面的一个或多个重复”。例如，`x+`表示 的一个或多个重复`x`。如果要查找和替换实际`+`标志，则需要像这样对其进行转义：`re.sub('\+', '', string)`. 因此，更改您的 excludeList 中的第一个条目。

您还可以消除 for 循环，如下所示：

```
exclusions = '|'.join(exclusionList)
first_word = re.sub(exclusions, '', first_word) 
```

管道符号`|`表示正则表达式中的析取，因此`x|y|z`匹配 x 或 y 或 z。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T12:24:25.797

您的程序的基本形式是正确的，所以我怀疑您遇到的任何问题都与您使用的正则表达式有关。'+' 本身是一个无效的正则表达式，您需要使用 '\' 对其进行转义。

从使用角度来看，Python 允许您指定字符串不应该进行任何反斜杠转义，这样您就不必在您的正则表达式中乱扔“\\”，而您的意思是“\”。其语法是一个前导的“r”，如 中`r'\+'`，您应该用它替换 excludeList 中的第一项。

如果您要提取单词“to”、“the”等，那么您还需要确保提取的是整个单词，并且不要意外提取“tooth”中的“to”或“the “ 其他”。添加“\b”以指定单词边界以防止这种情况：`r'\bto\b'`和`r'\bthe\b'`.

最后，`for a in range(0, len(exclusionList)):`通过迭代列表本身更简单地编写：`for exclusion in exclusionList:`.

# c# - asp.net mvc4 razor 将视图模型传递给助手

> ID：10968560
> 
> 赞同：0
> 
> 时间：2012-06-10T12:09:03.260
> 
> 标签：c#, asp.net, html-helper, asp.net-mvc-4

我想将视图模型传递给我的 html 助手/我已经尝试过

```
 public static string GenerateFullTable(this HtmlHelper helper, IEnumerable<CarsViewModel> model)
        { 
```

但我不知道会是哪个型号。

是否有可能制作得到不同视图模型的通用助手？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T12:13:12.640

是的，它被称为泛型。

[http://msdn.microsoft.com/en-us/library/ms379564(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms379564(v=vs.80).aspx)

**编辑：**

这是一个例子...

```
public static string GenerateFullTable<T>(this HtmlHelper helper, IEnumerable<T> model)
{
    ...
} 
```

您可以进一步将 T 限制为特定类型或继承特定接口，可能是这样的：

```
public static string GenerateFullTable<T>(this HtmlHelper helper, IEnumerable<T> model) where T : MyModelsInterface
{

} 
```

但这取决于您的需求。希望这可以帮助 ;）

# javascript - 在javascript中从构造函数创建编号对象

> ID：10968562
> 
> 赞同：1
> 
> 时间：2012-06-10T12:09:16.303
> 
> 标签：javascript, oop

我有一个制作正方形的构造函数。

我希望我的代码使用循环从这个构造函数自动创建正方形，并将它们命名为 square1、square2、square3 等。

例如。

```
for (n=1; n < x; n++){
var square(n) = new Square();
} 
```

这可能吗？

如果是这样，我如何以及如何在循环中引用它们 - 比如 square(n)？

我是编程新手，oop 和 javascript 很抱歉，如果这真的是 ovb。提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T12:11:14.333

这就是数组的用途：

```
var squares = new Array();
for (var n = 1; n < x; n++) {
    squares.push( new Square() );
} 
```

现在您可以使用从零开始的索引来访问它们：

```
squares[0].someMethod(); // etc.. 
```

遍历该数组中的所有正方形：

```
for (var i = 0; i < squares.length; i++) {
    squares[i].someMethod();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T12:11:42.320

这是一个非常讨厌的想法。为此目的使用数组：

```
var squares = [];
for (var n = 1; n < x; n++) {
    squares.push(new Square());
} 
```

无论如何，如果你真的想这样做：

```
window['square' + n] = new Square(); 
```

这将创建全局变量。没有干净的、`eval`更少的方法来创建这样的本地人。

# c# - 无法以编程方式检查或取消选中 DataGridViewCheckBoxColumn 单元格

> ID：10968564
> 
> 赞同：2
> 
> 时间：2012-06-10T12:10:26.923
> 
> 标签：c#, datagridview, checkbox

我正在尝试通过此代码更改 DataGridViewCheckBoxColumn 的项目

```
 foreach (DataGridViewRow dgvUser in UsersGrid.Rows)
        {
          dgvUser.Cells["ChkSelect"].Value = true;
        } 
```

复选框的值发生了变化，但 UI 上的复选框保持未选中状态。

怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:20:40.677

然后您需要更新 Datagridview 并刷新。

DataGrid_ABC.Update(); 为了更新gridview中的更改

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-29T12:57:24.813

这里的问题是它们的`DataGridViewCheckboxCell`行为与其他细胞不同。出于某种原因，用于确定应如何绘制复选框（选中或未选中）的属性不是`Value`但`FormattedValue`

不过我的感觉是，值设置器已在 DataGridViewCheckBoxCell 中被覆盖以正确运行。因此，如果您在 a 上调​​用它，`DataGridViewCell`则使用的是**基础**（这不会影响 FormattedValue），而如果您投射单元格，则应该可以工作：

```
((DataGridViewCheckBoxCell)  dgvUser.Cells["ChkSelect"]).Value = true; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-25T00:00:08.883

当我尝试清除同一行中的其他复选框列（在 CellValueChanged 方法中执行）时，我遇到了这个确切的问题。为了解决我的问题，我需要以下代码：

```
private void dgv_CellContentClick(object sender, DataGridViewCellEventArgs e)
{
    // filter for valid DataGridViewCheckBoxCell columns, if desired
    dgv.CommitEdit(DataGridViewDataErrorContexts.Commit);
} 
```

# c++ - 从文件 C++ 中的特定位置读取

> ID：10968565
> 
> 赞同：5
> 
> 时间：2012-06-10T12:10:34.880
> 
> 标签：c++, file, printing, offset

我有一个 C++ 程序，它需要返回出现特定单词的行。例如，如果我的文件如下所示：

```
the cow jumped over
the moon with the
green cheese in his mouth 
```

我需要打印带有“with”的行。程序得到的只是文件开头的偏移量（在本例中为 24，因为“with”是文件开头的 24 个字符）。

如何打印整行“the moon with the”，仅使用偏移量？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T15:21:21.737

您可以通过单独读取每一行并记录读取前后的文件位置来做到这一点。然后只是简单的检查一下单词的偏移量是否落在该行的范围内。

```
#include <iostream>
#include <fstream>
#include <string>

std::string LineFromOffset(
    const std::string &filename,
    std::istream::pos_type targetIndex)
{
    std::ifstream input(filename);

    //  Save the start position of the first line. Should be zero of course.
    std::istream::pos_type  lineStartIndex = input.tellg();

    while(false == input.eof())
    {
        std::string   line;

        std::getline(input, line);

        //  Get the end position of the line
        std::istream::pos_type  lineEndIndex = input.tellg();

        //  If the index of the word we're looking for in the bounds of the
        //  line, return it
        if(targetIndex >= lineStartIndex && targetIndex < lineEndIndex)
        {
            return line;
        }

        // The end of this line is the start of the next one. Set it
        lineStartIndex = lineEndIndex;
    }

    //  Need a better way to indicate failure
    return "";
}

void PrintLineTest()
{
    std::string str = LineFromOffset("test.txt", 24);

    std::cout << str;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T17:21:31.307

一个好的解决方案是从头开始读取文件直到所需位置（@Chet Simpson 回答）。如果您想要优化（例如非常大的文件，位于中间某处，典型的行相当短），您可以向后读取文件。但是，这仅适用于以二进制模式打开的文件（类 unix 平台上的任何文件；`ios_base::binary`在 Windows 上使用参数打开文件）。

算法如下：

*   返回文件中的几个字节
*   读取几个字节
*   如果那里有行尾，剩下的就很容易了
*   否则，重复

代码（在 Windows 上测试）：

```
std::string GetSurroundingLine(std::istream& f, std::istream::pos_type start_pos)
{
    std::istream::pos_type prev_pos = start_pos;
    std::istream::pos_type pos;
    char buffer[40]; // typical line length, so typical iteration count is 1
    std::istream::pos_type size = sizeof(buffer);

    // Look for the beginning of the line that includes the given position
    while (true)
    {
        // Move back 40 bytes from prev_pos
        if (prev_pos < size)
            pos = 0;
        else
            pos = prev_pos - size;
        f.seekg(pos);

        // Read 40 bytes
        f.read(buffer, prev_pos - pos);
        if (!f)
            throw;

        // Look for a newline byte, which terminates previous line
        int eol_pos;
        for (eol_pos = sizeof(buffer) - 1; eol_pos >= 0; --eol_pos)
            if (buffer[eol_pos] == '\n')
                break;

        // If found newline or got to beginning of file - done looking
        if (eol_pos >= 0 || pos == (std::istream::pos_type)0)
        {
            pos += eol_pos + 1;
            break;
        }
    }

    // Position the read pointer
    f.seekg(pos);

    // Read the line
    std::string s;
    std::getline(f, s, '\n');

    return s;
} 
```

编辑：在类似 Windows 的平台上，行尾由 标记`\r\n`，因为您必须使用二进制模式，所以输出字符串将包含额外字符`\r`（除非文件末尾没有行尾)，你可以扔掉。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T12:12:51.667

每个操作都有功能

`fopen`- 打开文件

`fseek`- 将文件搜索到所需的偏移量

`fread`- 读取你想要的字节数

`fclose`- 关闭文件

# ios - 在 init 中加载 NSArray 时访问错误

> ID：10968567
> 
> 赞同：0
> 
> 时间：2012-06-10T12:10:47.997
> 
> 标签：ios, nsarray, init

我有一门课，叫`Letter`. 在 Letter 的 init 方法中，我试图加载一个字符串数组，以便该类的其他方法可以使用它们。

然后我基于`Letter`类实例化一个对象。我期待`init`调用加载数组，但得到一个`EXC_BAD_ACCESS`错误。

字母.h

```
@interface Letter : NSObject
{
    NSArray *consonants;
}

-(BOOL)typeOfLetter:(NSString *)_letter; 
```

字母.m

```
#import "Letter.h"

@implementation Letter

- (id)init {
    self = [super init];
    if (self) {
        consonants = [NSArray arrayWithObjects:@"B",@"C",@"D",@"F",@"G",@"Ğ",@"H",@"J",@"K",@"L",@"M",@"N",@"P",@"R",@"S",@"Ş",@"T","@U",@"V",@"Y",@"Z",@"b",@"c",@"d",@"f",@"g",@"ğ",@"h",@"j",@"k",@"l",@"m",@"n",@"p",@"r",@"s",@"ş",@"t",@"u",@"v",@"z",nil];        
    }
    return self;
} 
```

视图控制器.m

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    BOOL retValue;

    Letter *letter = [[Letter alloc] init];
    retValue = [letter typeOfLetter:@"a"];

} 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T12:17:33.723

您忘记`@`在其中一个字符串之前添加 a 在您的数组中，您有这个字符`"@U"`，您必须将其更改为`@"U"`

# java - 算法：爆炸列表（子集）

> ID：10968573
> 
> 赞同：2
> 
> 时间：2012-06-10T12:11:29.417
> 
> 标签：java, algorithm, loops, subset

我想要这个算法的帮助。

我有一个这样的文本文件：

```
input1
input2
etc... 
```

每个 inputX 都有一个元素子集，例如：

```
input1 -> {input1_1, input1_2, ...}
input2 -> {input2_1, input2_2, input_2_3, ...}
inputX -> {inputX_1, inputX_2, inputX_3, ...} 
```

我必须在以下位置制作类似的东西：

```
input1_1
input2_1
--------

input1_2
input2_1
--------

input1_1
input2_2
--------

input1_2
input2_2
--------

input1_1
input2_3
--------

input1_2
input2_3
-------- 
```

你能给我推荐一些算法吗？我所能想到的只是一个while/for循环，但我不知道如何正确设置它。

非常感谢，皮尔保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T12:23:36.473

如果您知道有多少个列表，则可以使用嵌套循环：

```
for (int i = 0 ; i != input1.size() ; i++)
    for (int j = 0 ; j != input2.size() ; j++)
        for (int k = 0 ; k != input3.size() ; k++) {
            String[] data = new String[] {
                input1.get(i), input2.get(j), input3.get(k)
            };
            Process(data);
        } 
```

如果您不知道有多少列表，则需要递归解决方案：

```
void processCombinations(int[] pos, int n, ArrayList<ArrayList<String> > inputs, String[] soFar) {
    if (n == pos.length) {
        Process(soFar);
        return;
    }
    ArrayList<String> input = inputs.get(n);
    for (pos[n] = 0 ; pos[n] != input.size() ; pos[n]++) {
        soFar[n] = input.get(pos[n]);
        processCombinations(pos, n+1, input, soFar);
    }
} 
```

# android - Android：下载图片并保存在 SD 中。在写入完成之前尝试打开文件时出错

> ID：10968577
> 
> 赞同：0
> 
> 时间：2012-06-10T12:12:14.527
> 
> 标签：android, webview, file-exists

我正在尝试从互联网下载图像列表并将其保存到后台的 SD 卡中`AsyncTask`，这很好。

另一方面，在主代码中，我会检查 SD 卡上是否存在图像。如果存在，则在本地加载图像，如果不存在则加载 URL 图像。

文件镜像存在但写入未完成时出现问题。在这种情况下，webview 会加载一个白页。

我试过这个，但问题是我不知道文件大小，并且图像大小不同。

```
if(file.exists() && file.length() > 18000){
    //Load SD file
}
else{
    //Load url
} 
```

有没有办法知道文件写入是否完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T12:47:02.893

就在这里。

尝试这个

```
final int giveUpTimeout = 5;
new Timer().schedule( new TimerTask() {
           public void run() {
              try{
                  int cc = giveUpTimeout;
                  while ( cc > 0 ) {
                      sleep(1000);   // wait 1 sec
                      cc --;
                      if ( file.exists() && file.lenght()>0 ) {
                           ... 
                          // LOAD sd FILE    
                          return ; // should exit
                          }
                      }
                  //  your else           
                  ... LOAD URL
                  }
              catch ( Exception e) { e.printStackTrace(); }
          }
      },
      0); 
```

比雅恩 =]

# heroku - ssh：连接到主机 heroku.com 端口 22：连接超时

> ID：10968591
> 
> 赞同：5
> 
> 时间：2012-06-10T12:13:47.670
> 
> 标签：heroku, connection, connect, out, timed

我正在开发 Ubuntu 11.10 我的 git-repo 本地分支是最新的

然后我在终端中编写了以下命令：heroku create --stack cedar，它说：
注意：在 6 月 20 日星期三，我们的默认堆栈将更改为 Cedar。[http://bit.ly/Lh0rM5](http://bit.ly/Lh0rM5)

创建 radiant-wind-7413... 完成，堆栈是雪松
[http://radiant-wind-7413.herokuapp.com/](http://radiant-wind-7413.herokuapp.com/) | git@heroku.com:radiant-wind-7413.git
Git 远程 heroku 添加

到目前为止一切都很好，然后我在终端中输入了以下内容：

```
git push heroku master 
```

并出现以下错误： **ssh: connect to host heroku.com port 22: Connection timed out
fatal: The remote end unexpectedly hang up**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-28T09:25:25.093

很可能是某种防火墙问题或您的网络管理员阻止了您网络中的传出端口 22。

您可以使用简单的脚本通过以下方式查看您与 Heroku 的连接：

`$ ssh -vvv git@heroku.com`

如果您看到连接超时，那么您可能需要请求您的管理员解除对端口 22 的阻塞。或者，也可以按照我在[使用端口 443 连接到 heroku 中的回答通过](https://stackoverflow.com/questions/14877088/connecting-to-heroku-using-port-443/19536371#19536371)**隧道访问 Heroku**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-11T17:40:15.053

我的钥匙也有类似的问题。好的，这就是我所做的。

检查您的钥匙的状态

```
heroku keys 
```

它向您显示添加到 heroku 的键列表。您始终可以生成新密钥并将它们添加到 heroku。

```
ssh-keygen -t rsa 
```

生成新密钥。

`heroku keys:add`

将密钥添加到heroku。在添加之前，它列出了您可以添加的可用密钥。输入选项，您的密钥将添加到 heroku。

[这篇文章](https://devcenter.heroku.com/articles/keys)可能会有所帮助。如果这不起作用，那么 ssh 应该有一些问题。尝试做一个 ssh localhost 并查看 ssh 是否正常工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T12:01:05.797

今天 Heroku 使用 git 而不是 ssh。ssh 的默认端口是 22，看起来您的网络不允许到端口 22 的出站连接。也许这是您的网络管理员可以更改的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T12:11:24.900

执行以下步骤。

```
ssh-keygen -t rsa
heroku keys:add
heroku keys  # lists keys 
```

# sql-server - Microsoft SQL 数据同步代理：服务器和数据库

> ID：10968592
> 
> 赞同：0
> 
> 时间：2012-06-10T12:13:50.390
> 
> 标签：sql-server, sync, agent

我正在努力使用 Microsoft SQL 数据同步代理，我需要设置 Windows Azure 平台。在 ms sql 数据同步代理预览中，“Ping 同步服务”成功执行。我的 Windows 防火墙允许通过端口 1433 进入。

问题是，当我想“注册”时：首先，我不确定我输入了正确的“服务器”和“数据库”名称。第二，我不确定我应该使用“SQL”还是“Windows”身份验证第三，如何确保客户端同步代理对数据库具有适当的权限？

在许多其他试验中，我最好的猜测是：服务器“.\SQLEXPRESS”数据库“SiteSqlServer”

但我仍然收到以下 2 条错误消息：

1) 无法连接到数据库。请检查服务帐户是否具有连接、凭据和连接权限。服务器：“XXX\SQLEXPRESS”。数据库：“SiteSqlServer”。

2) 连接失败。请检查数据库凭据以及 Microsoft SQL 数据同步 Windows 服务登录帐户的权限，以使用指定凭据连接到数据库。其他失败原因：必须在 SQL 数据同步门户上添加 Windows Azure SQL 数据库。SQL 数据同步不支持低于 SQL Server 2005 SP2 的 SQL Server 数据库。

我正在使用：dotnetnuke CMS 系统和 Microsoft webmatrix。

任何关于如何从这里开始的想法都受到热烈欢迎！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T17:00:59.700

您似乎正在尝试将 SQL Azure 与不受支持且未经测试的 SQL Express 同步。这就是为什么当您按照上述方式尝试时会收到该错误。根据我的经验，使用 SQL Express 和 SQL DataSync 存在问题，并且 SQL Express 未在下面列出：

[http://msdn.microsoft.com/en-us/library/windowsazure/hh456371.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh456371.aspx)

互联网上有几篇文章，其中一些人继续攻击系统以使用 SQL Express 的某些版本，所以如果你想进一步尝试，你是你自己的。我找到的一篇文章在[这里](http://jtabadero.wordpress.com/2012/02/17/sql-azure-data-sync-service-sql-express-and-sql-express-2012-localdb/)：

# android - AsyncTaskcrash 上的进度条

> ID：10968601
> 
> 赞同：0
> 
> 时间：2012-06-10T12:15:04.183
> 
> 标签：android, android-asynctask, android-progressbar

我有 AsyncTask 扩展类我想显示进度对话框，所以我使用以下代码

```
 class EncounterBackgroundWorker extends AsyncTask<Void, Void, Void> {

      ProgressDialog connectionProgressDialog;
      @Override
      protected void onPreExecute() {

          connectionProgressDialog = new ProgressDialog(null);
          connectionProgressDialog.setCancelable(false);
          connectionProgressDialog.setCanceledOnTouchOutside(false);
          connectionProgressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
          connectionProgressDialog.setMessage("Uploading Leads...");
          connectionProgressDialog.show();
      }
} 
```

调用它

```
public class ChemoUnit  extends Fragment {

    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

         View view = inflater.inflate(
                    R.layout.chemounit,
                    container,
                    false);

        //Intialize the record Grid
         LinearLayout formLayout = (LinearLayout)view.findViewById(R.id.ChemoUnitGrid);
        formLayout.removeAllViews();

        MainGrid = new ListView(getActivity().getApplicationContext());              
        MainGrid.setVisibility(ListView.VISIBLE);
         LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(
                 LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);
         params.gravity = Gravity.RIGHT;
         MainGrid.setLayoutParams(params);

         //1\. set the header 

         ViewGroup header = (ViewGroup)inflater.inflate(R.layout.chemounitgridheader, MainGrid, false);
         MainGrid.addHeaderView(header, null, false);

         //2\. Call the web Service 

         new EncounterBackgroundWorker( getActivity()).execute();

         MainGrid.setAdapter(new Encounteradapter(view.getContext(), null));
        // Finally add it 

         formLayout.addView(MainGrid);

         // Return the Result 
        return inflater.inflate(R.layout.chemounit, container, false);
    }

} 
```

但它总是崩溃，我不知道如何初始化进度并将上下文添加到 i1t，给这个日志

```
06-10 14:49:48.665: D/dalvikvm(10728): GC_CONCURRENT freed 143K, 4% free 6768K/6983K, paused 3ms+4ms
06-10 14:49:51.465: D/dalvikvm(10728): GC_FOR_ALLOC freed 46K, 4% free 6824K/7047K, paused 39ms
06-10 14:49:51.465: I/dalvikvm-heap(10728): Grow heap (frag case) to 7.223MB for 513744-byte allocation
06-10 14:49:51.505: D/dalvikvm(10728): GC_FOR_ALLOC freed <1K, 4% free 7326K/7559K, paused 25ms
06-10 14:49:51.535: I/System.out(10728): Chemo Unit
06-10 14:49:51.540: I/System.out(10728): Next Appointement
06-10 14:49:51.545: I/System.out(10728): Change Booking
06-10 14:49:51.545: I/System.out(10728): Booking
06-10 14:49:51.550: D/dalvikvm(10728): GC_CONCURRENT freed 3K, 3% free 7353K/7559K, paused 2ms+4ms
06-10 14:49:51.555: I/System.out(10728): Chemo Unit
06-10 14:49:51.555: I/System.out(10728): Next Appointement
06-10 14:49:51.560: I/System.out(10728): Change Booking
06-10 14:49:51.565: I/System.out(10728): Booking
06-10 14:49:51.565: I/System.out(10728): Chemo Unit
06-10 14:49:51.570: I/System.out(10728): Next Appointement
06-10 14:49:51.570: I/System.out(10728): Change Booking
06-10 14:49:51.570: I/System.out(10728): Booking
06-10 14:49:51.575: I/System.out(10728): Chemo Unit
06-10 14:49:51.575: I/System.out(10728): Next Appointement
06-10 14:49:51.585: I/System.out(10728): Change Booking
06-10 14:49:51.590: I/System.out(10728): Booking
06-10 14:49:51.590: I/System.out(10728): Chemo Unit
06-10 14:49:51.595: I/System.out(10728): Next Appointement
06-10 14:49:51.595: I/System.out(10728): Change Booking
06-10 14:49:51.600: I/System.out(10728): Booking
06-10 14:49:55.410: D/CLIPBOARD(10728): Hide Clipboard dialog at Starting input: finished by someone else... !
06-10 14:50:00.075: I/System.out(10728): Chemo Unit
06-10 14:50:00.080: I/System.out(10728): Next Appointement
06-10 14:50:00.085: I/System.out(10728): Change Booking
06-10 14:50:00.090: I/System.out(10728): Booking
06-10 14:50:00.090: I/System.out(10728): Chemo Unit
06-10 14:50:00.090: I/System.out(10728): Next Appointement
06-10 14:50:00.095: I/System.out(10728): Change Booking
06-10 14:50:00.095: I/System.out(10728): Booking
06-10 14:50:00.100: I/System.out(10728): Chemo Unit
06-10 14:50:00.100: I/System.out(10728): Next Appointement
06-10 14:50:00.105: I/System.out(10728): Change Booking
06-10 14:50:00.105: I/System.out(10728): Booking
06-10 14:50:00.105: I/System.out(10728): Chemo Unit
06-10 14:50:00.105: I/System.out(10728): Next Appointement
06-10 14:50:00.105: I/System.out(10728): Change Booking
06-10 14:50:00.110: I/System.out(10728): Booking
06-10 14:50:01.995: I/System.out(10728): Chemo Unit
06-10 14:50:01.995: I/System.out(10728): Next Appointement
06-10 14:50:01.995: I/System.out(10728): Change Booking
06-10 14:50:02.005: I/System.out(10728): Booking
06-10 14:50:02.010: I/System.out(10728): Chemo Unit
06-10 14:50:02.010: I/System.out(10728): Next Appointement
06-10 14:50:02.010: I/System.out(10728): Change Booking
06-10 14:50:02.010: I/System.out(10728): Booking
06-10 14:50:02.015: I/System.out(10728): Chemo Unit
06-10 14:50:02.015: I/System.out(10728): Next Appointement
06-10 14:50:02.015: I/System.out(10728): Change Booking
06-10 14:50:02.015: I/System.out(10728): Booking
06-10 14:50:02.020: I/System.out(10728): Chemo Unit
06-10 14:50:02.020: I/System.out(10728): Next Appointement
06-10 14:50:02.020: I/System.out(10728): Change Booking
06-10 14:50:02.020: I/System.out(10728): Booking
06-10 14:50:02.050: D/AndroidRuntime(10728): Shutting down VM
06-10 14:50:02.050: W/dalvikvm(10728): threadid=1: thread exiting with uncaught exception (group=0x401b4760)
06-10 14:50:02.050: E/AndroidRuntime(10728): FATAL EXCEPTION: main
06-10 14:50:02.050: E/AndroidRuntime(10728): java.lang.NullPointerException
06-10 14:50:02.050: E/AndroidRuntime(10728):    at android.app.AlertDialog.resolveDialogTheme(AlertDialog.java:120)
06-10 14:50:02.050: E/AndroidRuntime(10728):    at android.app.AlertDialog.<init>(AlertDialog.java:80)
06-10 14:50:02.050: E/AndroidRuntime(10728):    at android.app.ProgressDialog.<init>(ProgressDialog.java:76)
06-10 14:50:02.050: E/AndroidRuntime(10728):    at com.appnetics.EncounterBackgroundWorker.onPreExecute(EncounterBackgroundWorker.java:45)
06-10 14:50:02.050: E/AndroidRuntime(10728):    at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:549)
06-10 14:50:02.050: E/AndroidRuntime(10728):    at android.os.AsyncTask.execute(AsyncTask.java:499)
06-10 14:50:02.050: E/AndroidRuntime(10728):    at com.appnetics.ChemoUnit.onCreateView(ChemoUnit.java:63)
06-10 14:50:02.050: E/AndroidRuntime(10728):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:870)
06-10 14:50:02.050: E/AndroidRuntime(10728):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1080)
06-10 14:50:02.050: E/AndroidRuntime(10728):    at android.support.v4.app.BackStackRecord.run(BackStackRecord.java:622)
06-10 14:50:02.050: E/AndroidRuntime(10728):    at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1416)
06-10 14:50:02.050: E/AndroidRuntime(10728):    at android.support.v4.app.FragmentManagerImpl$1.run(FragmentManager.java:420)
06-10 14:50:02.050: E/AndroidRuntime(10728):    at android.os.Handler.handleCallback(Handler.java:587)
06-10 14:50:02.050: E/AndroidRuntime(10728):    at android.os.Handler.dispatchMessage(Handler.java:92)
06-10 14:50:02.050: E/AndroidRuntime(10728):    at android.os.Looper.loop(Looper.java:132)
06-10 14:50:02.050: E/AndroidRuntime(10728):    at android.app.ActivityThread.main(ActivityThread.java:4123)
06-10 14:50:02.050: E/AndroidRuntime(10728):    at java.lang.reflect.Method.invokeNative(Native Method)
06-10 14:50:02.050: E/AndroidRuntime(10728):    at java.lang.reflect.Method.invoke(Method.java:491)
06-10 14:50:02.050: E/AndroidRuntime(10728):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
06-10 14:50:02.050: E/AndroidRuntime(10728):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
06-10 14:50:02.050: E/AndroidRuntime(10728):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T12:20:53.403

您不要从您的活动课程中发送任何参考。您发送以传递上下文。

这是解决方案。请检查一下。

```
 class  EncounterBackgroundWorker extends AsyncTask<Void, Void, Void> {
     private Context context;
   public EncounterBackgroundWorker(Context Context)
   {
     this.context=context;
    }

  ProgressDialog connectionProgressDialog;
  @Override
  protected void onPreExecute() {

      connectionProgressDialog = new ProgressDialog(context);
      connectionProgressDialog.setCancelable(false);
      connectionProgressDialog.setCanceledOnTouchOutside(false);
      connectionProgressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
      connectionProgressDialog.setMessage("Uploading Leads...");
      connectionProgressDialog.show();
  } 
```

}

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T12:31:09.783

您必须将 Context 对象传递给 ProgressTask。

改变这个

```
connectionProgressDialog = new ProgressDialog(null); 
```

到

```
connectionProgressDialog = new ProgressDialog(context); 
```

> 现在下一个问题是我将如何获得上下文。

更改您的代码以包含上下文参数构造函数。

```
class EncounterBackgroundWorker extends AsyncTask<Void, Void, Void> {

      private ProgressDialog connectionProgressDialog;
      private Context context;

      public EncounterBackgroundWorker(Context context){
         this.context=context;
      }

      @Override
      protected void onPreExecute() {

          connectionProgressDialog = new ProgressDialog(context);
          connectionProgressDialog.setCancelable(false);
          connectionProgressDialog.setCanceledOnTouchOutside(false);
          connectionProgressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
          connectionProgressDialog.setMessage("Uploading Leads...");
          connectionProgressDialog.show();
      }
} 
```

更改您的呼叫代码

从

```
new EncounterBackgroundWorker().execute(); 
```

到

```
new EncounterBackgroundWorker(getActivity()).execute(); 
```

# windows-phone-7 - 为什么会出现这个错误？“无效的 XAML”

> ID：10968603
> 
> 赞同：0
> 
> 时间：2012-06-10T12:15:10.420
> 
> 标签：windows-phone-7, xaml, expression-blend

```
 <toolkit:GestureListener   DragDelta="taskitem_DragDelta" DragCompleted="taskitem_DragCompleted"/> 
```

上面的代码总是在 Blend4 中显示错误，“无效 XAML”
，但在 VS2010 for WP 中从未显示错误。
该应用程序可以像魅力一样运行。

为什么会发生此错误以及如何解决？这只是一个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T22:00:11.670

Silverlight Toolkit 不能很好地与 Expression Blend 相处。我认为工具包中的手势事件处理程序存在一些程序集版本问题，但除非他们更新它，否则您无能为力。我解决这个问题的方法是在我进行布局工作时折叠具有工具包项的控件，然后再次启用它们。或者使用 VS 中的设计器对其进行编辑

# javascript - jquery 每个循环中的每个循环

> ID：10968605
> 
> 赞同：0
> 
> 时间：2012-06-10T12:15:20.363
> 
> 标签：javascript, jquery, html

我有一些用作容器的 div，我想遍历它们，然后遍历其中的项目。

所以不是`$('.stackContainer .stackItem').each(`这样的：

```
// setup stacks
$('.stackContainer').each(function(containerIndex) {
    //console.log($(this));
    console.log(containerIndex);

    $(this).('.stackItem').each(function(itemIndex) {
        console.log(itemIndex);     
    }
}); 
```

只有这样才能工作。这怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T12:19:12.380

尝试

```
$('.stackContainer').each(function(containerIndex) {
    //console.log($(this));
    console.log(containerIndex);

    $(this).find('.stackItem').each(function(itemIndex) {
        console.log(itemIndex);     
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T12:18:46.763

尝试`find()`方法：

```
$('.stackContainer').each(function(containerIndex) {
    //console.log($(this));
    console.log(containerIndex);

    $(this).find('.stackItem').each(function(itemIndex) {
        console.log(itemIndex);     
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T12:34:05.267

正如其他答案所表明的那样，有很多方法可以做到这一点。这是一种解决方案：http: [//jsfiddle.net/cezHH/3/](http://jsfiddle.net/cezHH/3/)

```
$(".stackContainer").each(function(stackIndex) {
    $(this).children().css('class', '.stackItem').each(function(itemIndex) {
        $(this).html($(this).html() + "=>" + itemIndex);
    });
});​ 
```

或者，如果您只想按照它们在页面上出现的顺序遍历所有`.stackItem`div，并且您实际上并不关心父`.stackContainer`div，那么您可以这样做`$('.stackItem').each(function(index) { ... });`

嵌套循环遍历`.stackItem`div 的原因是，如果您希望`itemIndex`每次切换父容器时变量都重置为零。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T13:08:36.600

附带说明一下，出于性能原因，如果集合可能是任何大小，则应避免使用 jQuery 的 each()：

[http://net.tutsplus.com/tutorials/javascript-ajax/10-ways-to-instantly-increase-your-jquery-performance/](http://net.tutsplus.com/tutorials/javascript-ajax/10-ways-to-instantly-increase-your-jquery-performance/)

[http://jsperf.com/jquery-each-vs-for-loop](http://jsperf.com/jquery-each-vs-for-loop)

# xpath - XPath 忽略跨度

> ID：10968612
> 
> 赞同：3
> 
> 时间：2012-06-10T12:15:47.910
> 
> 标签：xpath

我有一个 HTML，其中包含一些标签，如下所示：

```
<div id="SNT">text1</div>
<div id="SNT">text2</div>
<div id="SNT">textbase1<span style='color: #EFFFFF'>text3</span></div>
<div id="SNT">textbase2<span style='color: #EFFFFF'>text4</span></div> 
```

如何使用 XPath 获取**所有**标签中`text`包含的所有 s ，而忽略字段？`<div>``span`

IE：

```
text1  
text2  
textbase1text3  
textbase2text4 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T13:15:33.793

**你可以简单地使用：**

```
//div/text() 
```

或者

```
div/text() 
```

* * *

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T14:45:07.060

**这不能用单个 XPath 1.0 表达式指定。**

**您需要首先选择所有相关`div`元素：**

```
//div[@id='SNT'] 
```

**然后为每个选定的节点获取其字符串节点**：

```
string(.) 
```

**在 XPath 2.0 中，这可以用一个表达式来指定**：

```
//div[@id='SNT]/string(.) 
```

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:template match="div[@id='SNT']">
     <xsl:copy-of select="string()"/>
========    
 </xsl:template>
</xsl:stylesheet> 
```

**当此 XSLT 1.0 转换应用于以下 XML 文档（提供的 XML 片段，包装在单个顶部元素中）时：**

```
<t>
    <div id="SNT">text1</div>
    <div id="SNT">text2</div>
    <div id="SNT">textbase1<span style='color: #EFFFFF'>text3</span></div>
    <div id="SNT">textbase2<span style='color: #EFFFFF'>text4</span></div>
</t> 
```

相关`div`元素被选择（匹配）并由唯一指定的模板处理，其中`string(.)`XPath 表达式被评估，其结果被复制到输出：

```
 text1
========    

    text2
========    

    textbase1text3
========    

    textbase2text4
======== 
```

**对于 XPath 2.0 表达式**：

```
<xsl:stylesheet version="2.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text"/>

 <xsl:template match="/">
     <xsl:copy-of select="//div[@id='SNT']/string(.)"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此 XSLT 2.0 转换应用于同一个 XML 文档（上图）时，将评估 XPath 2.0 表达式并将结果（四个字符串）复制到输出**：

```
text1 text2 textbase1text3 textbase2text4 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-16T08:34:21.890

这是一个链接[The lxml.etree Tutorial](https://lxml.de/tutorial.html)，并搜索`Using XPath to find text`
例如：

```
from lxml import etree 
html = """
<span class='demo'>
Hi, 
<span>Tom</span>
</span>

tree = etree.HTML(html)
node = tree.xpath('//span[@class="demo"]')[0]
print(node.xpath('string()') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T13:36:41.693

如果 HTML 文件中没有其他内容，只有`<div>`通常的 HTML 根元素中的 s，则以下样式表足以提取文本：

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:output method="text"/>

</xsl:stylesheet> 
```

如果您只想要`<div>`s，并且只需要那些特定的 ID，请使用以下代码 - 它还确保换行符与您的示例中的一样：

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:output method="text"/>

<xsl:template match="//div[@id='SNT']">
    <xsl:copy-of select="node()|text()"/><xsl:text>&#xA;</xsl:text>
</xsl:template>

</xsl:stylesheet> 
```

# javascript - 在 Google 地图上添加多个带有标题和位置的标记，并在点击时更改图像

> ID：10968613
> 
> 赞同：0
> 
> 时间：2012-06-10T12:16:00.120
> 
> 标签：javascript, google-maps, google-maps-markers

这就是我所拥有的。当我取消注释 setMarkers 函数时，它根本不起作用。我有 75 个标记要添加不同的标题和位置，所以我需要一种有效的方法来做到这一点。此外，每个标记都是可点击的并播放音频文件：

```
<html>
<head>
<title>BIKE BOX ARCHIVE</title>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script src="http://mm1.ellieirons.com/sm2.js"></script>// javascript to play audio
<script>
var map;
var brooklyn = new google.maps.LatLng( 40.710431,-73.968432); //pos. map centers to

function initialize() {
 //

  var stylez = [
   // styling the google map

  {
    featureType: "water",
    stylers: [
      { visibility: "on" },
      { saturation: 89 },
      { hue: "#00c3ff" },
      {lightness: -50}
    ]
  },

  {
    featureType: "administrative.neighborhood",
    elementType: "labels",
    stylers: [
      { visibility: "off" }
    ]
  },

  {
    featureType: "road.highway",
    stylers: [
      { visibility: "on" },
      { hue: "#00b2ff" }
    ]
  },

    {
    featureType: "road.arterial",
    stylers: [
      { visibility: "on" },
      { hue: "#00b2ff" },
      { saturation: 62 },
      {lightness: 30}

    ]
  },

  {
    featureType: "road.local",
    stylers: [
      { visibility: "on" },
      { hue: "#00b2ff" },
      { saturation: 62 },
      {lightness: -10}

    ]
  },
    {
    featureType: "poi",
    stylers: [
     { visibility: "on" },
      { hue: "#00fff7" },
      {lightness: 50}

    ]
  },

    {
    featureType: "poi.park",
    stylers: [
     { visibility: "on" },
      { hue: "#00fff7" },
      {lightness: 0}

    ]
  },

    {
      featureType: "landscape",
      elementType: "geometry",
      stylers: [
       { visibility: "on" },
      { saturation: 59 },
      { hue: "#00cbff" }
      ]
    }
  ];

  var mapOptions = {
    zoom:14,
    center: brooklyn,
    mapTypeControlOptions: {
       mapTypeIds: [google.maps.MapTypeId.ROADMAP, 'bestfromgoogle']
    },
    panControl: false,
    zoomControl: true,
    zoomControlOptions: {
      style: google.maps.ZoomControlStyle.SMALL
    }
     };

  map = new google.maps.Map(document.getElementById("map_canvas"),
      mapOptions);

      var bikeLayer = new google.maps.BicyclingLayer();
bikeLayer.setMap(map);// adds a layer for the bike routes

  var styledMapOptions = {
      name: "Bike Box"
  }

  var jayzMapType = new google.maps.StyledMapType(
      stylez, styledMapOptions);

  map.mapTypes.set('bestfromgoogle', jayzMapType);
  map.setMapTypeId('bestfromgoogle');

setMarkers(map, bikers);

  var bikers = [
        ['Devotion Gallery', 40.710431,-73.948432, 4],

        ];

function setMarkers(map, locations) {   
 var newimage = 'biker_click.png';
//var image = 'biker.png';

  var image = new google.maps.MarkerImage('biker.png');

for (var i = 0; i < locations.length; i++) {
         var marker = new google.maps.Marker({
            icon: image,
             position: new google.maps.LatLng(biker[i][1], biker[i][2]),
            title: biker[i][0],
            zIndex: biker[i][3]
         });

}
google.maps.event.addListener(marker[i], 'click', function() {
 marker(i).setIcon(newimage),
  sm2.play('http://mm1.ellieirons.com/wp-content/uploads/2012/03/beeps_bubbles.mp3');
});

google.maps.event.addListener(marker[i], 'mouseout', function() {
 marker1.setIcon(image)
});
*/
 google.maps.event.addListener(map, 'center_changed', function() {
          // 3 seconds after the center of the map has changed, pan back to the
          // marker.
          window.setTimeout(function() {
            map.panTo(brooklyn);
          }, 2000);
        });

}

</script>
<link href="BIKEMAP.css" rel="stylesheet" type="text/css">
<style type="text/css">
#bodyContent {
    font-size: 10px;
    font-weight: normal;
    color: #000;
}
</style>
</head>
<body onLoad="initialize()">
 <div id="map_canvas" style="width: 1000px; height: 600px;"> </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T00:46:25.720

你到处都有 JavaScript 错误。下面列出：

*   剩下的评论片段`*/`（第 170 行）
*   `initialize()`功能未正确关闭（第 181 行）
*   `bikers`在第 138 行调用 setMarkers 后声明数组（在调用 setMarkers 之前移动数组）
*   setMarkers 函数，你参考`biker`，这应该是`locations`

建议您修复所有基本的 JS 错误，并在再次发布之前使用 Chrome 开发工具进行故障排除。

# java - Transactional(readOnly=false) 仅在从 Servlet 调用时起作用

> ID：10968614
> 
> 赞同：1
> 
> 时间：2012-06-10T12:16:04.620
> 
> 标签：java, spring, transactions

我正在尝试创建一个通过 JPA 操作数据库的 bean。这些方法都正确地用 @Transactional(readOnly = false) 注释 - 直到现在这是由来自 Servlet 的调用处理的，并且一切正常。

现在我想在它的 init 方法中做一些数据库操作：

```
@Component
public class MyBean {

    @PostConstruct
    @Transactional(readOnly = false)
    public void init() {
        MyEntity myEntity = ...;
        ...
        em.persist(myEntity);
    } 
```

（案例被简化）。像这样我收到异常“没有会话或会话已关闭”。显然，事务只有在 Servlet 中的请求运行时才正确启动，而不是从实际的 bean 运行。即使从 bean 本身运行，我如何才能实现这一点？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T13:34:21.367

AFAIK，Spring 不使用 bean 周围的事务代理来调用 PostConstruct 方法（顺便说一句，大多数时候它不是 bean 的外部接口的一部分）。

尝试从另一个 bean（MyBean 被注入的地方）调用 的`init()`方法`MyBean`，甚至从`ServletContextListener`.

# python - Python 正则表达式：反向引用

> ID：10968617
> 
> 赞同：0
> 
> 时间：2012-06-10T12:16:34.723
> 
> 标签：python, regex, lookahead, backreference, negative-lookahead

这是 Python 2.5 代码（`fox`用链接替换单词`<a href="/fox">fox</a>`，它避免了链接内的替换）：

```
import re

content="""
<div>
    <p>The quick brown <a href='http://en.wikipedia.org/wiki/Fox'>fox</a> jumped over the lazy Dog</p>
    <p>The <a href='http://en.wikipedia.org/wiki/Dog'>dog</a>, who was, in reality, not so lazy, gave chase to the fox.</p>
    <p>See &quot;Dog chase Fox&quot; image for reference:</p>
    <img src='dog_chasing_fox.jpg' title='Dog chasing fox'/>
</div>
"""

p=re.compile(r'(?!((<.*?)|(<a.*?)))(fox)(?!(([^<>]*?)>)|([^>]*?</a>))',re.IGNORECASE|re.MULTILINE)
print p.findall(content)

for match in p.finditer(content):
  print match.groups()

output=p.sub(r'<a href="/fox">\3</a>',content)
print output 
```

输出是：

```
[('', '', '', 'fox', '', '.', ''), ('', '', '', 'Fox', '', '', '')]
('', '', None, 'fox', '', '.', '')
('', '', None, 'Fox', None, None, None)

Traceback (most recent call last):
  File "C:/example.py", line 18, in <module>
    output=p.sub(r'<a href="fox">\3</a>',content)
  File "C:\Python25\lib\re.py", line 274, in filter
    return sre_parse.expand_template(template, match)
  File "C:\Python25\lib\sre_parse.py", line 793, in expand_template
    raise error, "unmatched group"
error: unmatched group 
```

1.  我不确定为什么反向引用`\3`不起作用。

2.  `(?!((<.*?)|(<a.*?)))(fox)(?!(([^<>]*?)>)|([^>]*?</a>))`作品见[http://regexr.com?3170 亿](http://regexr.com?317bn)，令人惊讶。第一个负前瞻`(?!((<.*?)|(<a.*?)))`让我感到困惑。在我看来，它不应该工作。取它找到的第一个匹配项，`fox`在 中`gave chase to the fox.</p>`，有一个`<a href='http://en.wikipedia.org/wiki/Dog'>dog</a>`where 匹配项`((<.*?)|(<a.*?))`，作为否定的前瞻，它应该返回一个 FALSE。我不确定我是否清楚地表达了自己。

非常感谢！

（注：我讨厌使用 BeautifulSoup。我喜欢编写自己的正则表达式。我知道这里很多人会说正则表达式不适用于 HTML 处理等等。但这是一个小程序，所以我更喜欢正则表达式而不是 BeautifulSoup）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T13:03:03.030

如果您不喜欢 beautifulsoup，请尝试以下其他 (X)HTML 解析器之一：

```
html5lib
elementree
lxml 
```

如果您曾经计划或需要解析 HTML（或变体），那么值得学习这些工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T12:41:46.700

我不知道为什么你的表达不起作用，我唯一注意到的是一开始的前瞻组，这对我来说没有多大意义。这个似乎运作良好：

```
import re

content="""fox
    <a>fox</a> fox <p fox> and <tag fox bar> 
    <a>small <b>fox</b> and</a>
fox"""

rr = """
(fox)
(?! [^<>]*>)
(?!
    (.(?!<a))*
    </a
)
"""

p = re.compile(rr, re.IGNORECASE | re.MULTILINE | re.VERBOSE)
print p.sub(r'((\g<1>))', content) 
```

# google-maps - 在任何类型的地图上突出显示街道

> ID：10968618
> 
> 赞同：1
> 
> 时间：2012-06-10T12:16:50.283
> 
> 标签：google-maps, maps, bing-maps, openstreetmap, yahoo-maps

我的问题是我想从头到尾突出整条街。例如，如果我输入 Av。在谷歌地图中的法国巴黎蒙田，我希望整条街道都被突出显示。谷歌地图似乎不支持这个选项，我必须实现算法来使用折线标记街道。但是，我不确定是否有一种简单的方法可以获取有关街道外观的信息，因为街道可能是弯曲的，所以这是一个问题。

是否可以通过将街道名称传递给 API 来获取易于使用的信息来从头到尾突出显示街道？我使用的地图不必是谷歌地图，它们可以是雅虎、OpenStreetMap 上的必应。

目标实际上是这样的：

![在此处输入图像描述](../Images/a9ca939041dc0fd2a3407f0261435266.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T09:15:36.387

据我所知，没有一个常见的 Web 地图 API 提供此功能。想到了两种可能的方法，尽管没有一种方法简单或可靠：

a.) 从 OpenStreetMap 下载您希望能够在应用程序中突出显示的所有道路数据的本地集。然后，当您的用户输入他们正在搜索的街道名称时，搜索 OSM 数据并从相关坐标点构建一条折线并将其绘制在地图上。这种方法的问题在于它需要您托管和维护一组完整的道路数据，并且还需要实施适当的解析算法来处理街道名称的拼写错误等。您可能经常会发现道路名称出现在 Google 地图上例如，它们的拼写与 OSM 中的拼写不同。

b.) 使用路径服务计算从街道一端到另一端的路径，然后绘制一条沿着路径点的折线。例如，使用 Bing Maps Routes API ( [http://msdn.microsoft.com/en-us/library/ff701717.aspx](http://msdn.microsoft.com/en-us/library/ff701717.aspx) )，您可以在相关道路两端的两个十字路口之间绘制一条路线 - 例如“Av . Montaigne & Rond-point des Champs-Élysées”到“Av. Montaigne & Place de L'Alma”。然后，您可以从路线点绘制一条折线，如下所示：

![在 Bing 地图中突出显示街道](../Images/399165fa1156e21e4fe96809b140dbb1.png)

这种方法有两个问题：首先，您需要知道街道在任一端相交的道路名称（或其他识别相关街道末端的方式），其次，在两者之间选择的路线这两个十字路口可能实际上并不沿着街道本身（例如，如果街道是单向的，而您尝试计算另一方向的路线）。

# javascript - JavaScript Json.stringify 替换器将值转换为字符串

> ID：10968622
> 
> 赞同：1
> 
> 时间：2012-06-10T12:17:23.077
> 
> 标签：javascript, datetime, json

我正在使用带有替换器（第二个参数）的 javascript JSON.stringify 函数以某种方式格式化日期值：

```
var s = JSON.stringify(data, function (key, value) {
            if (key === "") return value;
            if (jQuery.type(value) === "date") return "Date(" + value.getTime() + ")";
            return value;
        }); 
```

我的对象“数据”中有有效的日期时间值。但是，当使用此值执行替换函数时，日期时间值会自动转换为字符串，因此 jQuery.type(value) = "string" 而不是 "date" 了。

在调用 stringify 之前，我可以简单地替换值对象中的所有日期时间值，但我不想修改原始数据。

这是替换函数的行为方式还是 IE 的一个奇怪特性（我使用的是 IE9）？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T12:23:19.740

尝试

```
Date.prototype.toJSON = function() {
     return "Date(" + this.getTime() + ")";
}; 
```

没有更换器。

# jquery - 使用 jQuery UI 删除后的元素位置问题

> ID：10968624
> 
> 赞同：1
> 
> 时间：2012-06-10T12:17:36.230
> 
> 标签：jquery, jquery-ui

我有两个 HTML div 元素，一个来源一个命运；每个里面都有画布元素。我希望能够使用 jQuery UI 将这些画布之一从源 div 拖放到命运 div 中。

问题是一旦画布被丢弃，它在命运 div 中的新位置并不像预期的那样，我无法纠正这一点。

这是我正在处理的代码：http: [//jsfiddle.net/Mf6zJ/1/](http://jsfiddle.net/Mf6zJ/1/)

关于如何纠正这个问题的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T12:36:37.870

Jquery droppable 工作正常。`drop`事件处理程序能够将画布附加到`destiny`. 因为，draggable 为画布添加了一些样式，所以画布看起来像是在`destiny`div 之外。

在这里，一种快速轻松地解决此问题的方法。

```
$("#destiny").droppable({
    accept: "#source > canvas",
    drop: function(event, ui) {
        ui.draggable.appendTo($(this)).removeAttr('style');
    }
}); 
```

这是[小提琴](http://jsfiddle.net/Mf6zJ/3/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T12:32:06.290

您试图使用 droppable 方法的回调函数附加可拖动画布。这不是必要的，因为下降已经发生了。

**示例**：http: [//jsfiddle.net/Mf6zJ/2/](http://jsfiddle.net/Mf6zJ/2/)

**来源**：http: [//jqueryui.com/demos/droppable/](http://jqueryui.com/demos/droppable/)

希望这能解决你的问题

# clojure - AWS：Beanstalk：防火墙的正确方法

> ID：10968626
> 
> 赞同：1
> 
> 时间：2012-06-10T12:17:38.560
> 
> 标签：clojure, amazon-web-services, firewall, amazon-elastic-beanstalk

## 问题

为 AWS Beanstalk 实例设置防火墙的正确方法是什么？

## 语境

对我来说防火墙很重要，因为我计划提供一个本地 Clojure repl/swank 实例。

现在，ssh-ed 进入 beanstalk 实例，“sudo iptables --list”看起来像：

```
Chain INPUT (policy ACCEPT)
target     prot opt source               destination         

Chain FORWARD (policy ACCEPT)
target     prot opt source               destination         

Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination 
```

现在，当我查看 EC2 控制台（位于 aws.amazon.com）时，它显示在其他级别，只有端口 22 和 80 是开放的。

因此，我的问题是：什么是适合我的防火墙层？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T13:14:09.927

EC2 安全组设置是配置哪些端口对世界开放和哪些不开放的正确位置。但请记住，必须公开允许通过端口 80 的 HTTP 流量才能使应用程序运行状况检查正常工作。

此处概述了有关此主题的更多信息：

*   [Amazon Web Services：安全流程概述文档。](http://d36cz9buwru1tt.cloudfront.net/pdf/AWS_Security_Whitepaper.pdf)
*   [适用于 Elastic Beanstalk 的 Amazon EC2 安全组](http://cloud-computing.learningtree.com/2011/10/31/amazon-ec2-security-groups-for-elastic-beanstalk/)
*   [了解 Amazon EC2 安全组和防火墙](http://cloud-computing.learningtree.com/2010/09/24/understanding-amazon-ec2-security-groups-and-firewalls/)

# jquery - Cakephp 中的 Jquery

> ID：10968628
> 
> 赞同：-1
> 
> 时间：2012-06-10T12:17:50.593
> 
> 标签：jquery, cakephp

我们如何在 php 中使用 jquery？

我正在使用一个外部 javascript 文件，我在 default.ctp 文件中提到了这一点。它在我的本地主机上工作，但不在主服务器上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T12:23:18.960

尝试`link`：

```
<?php
    $javascript->link('jquery/jquery.min', false);
    $javascript->link('jquery/page_specific/specific_view', false);
?> 
```

# javascript - 如何每五个单词用一个新行分解一个 javascript 字符串？

> ID：10968632
> 
> 赞同：4
> 
> 时间：2012-06-10T12:18:23.187
> 
> 标签：javascript

我有一个不寻常的要求。给定如下字符串：

```
var a = "This is a sentance that has many words. I would like to split this to a few lines" 
```

我需要每五个单词插入一个“\n”。字符串 a 可以包含任意数量的字母数字字符。

有人可以给我一个想法，我该怎么做？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-10T12:32:09.847

```
a.split(/((?:\w+ ){5})/g).filter(Boolean).join("\n");
/*
    This is a sentance that 
    has many words. 
    I would like to split 
    this to a few lines
*/ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-10T12:28:23.687

想法首先出现在我的脑海中

```
 var a = "This is a sentance that has many words. I would like to split this to a few lines";
a=a.split(" ");var str='';
for(var i=0;i<a.length;i++)
{
if((i+1)%5==0)str+='\n';
str+=" "+a[i];}
alert(str); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-10T12:30:51.363

您可以将字符串拆分为几个单词并将它们连接在一起，同时每 5 个单词添加一个“\n”：

```
function insertLines (a) {
    var a_split = a.split(" ");
    var res = "";
    for(var i = 0; i < a_split.length; i++) {
        res += a_split[i] + " ";
        if ((i+1) % 5 === 0)
            res += "\n";
    }
    return res;
}

//call it like this
var new_txt = insertLines("This is a sentance that has many words. I would like to split this to a few lines"); 
```

请注意 html 代码中的“\n”（例如在“div”或“p”标签中）对网站的访问者是不可见的。在这种情况下，您需要使用“<br/>”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-10T12:29:26.463

尝试：

```
var a = "This is a sentance that has many words. I would like to split this to a few lines"
var b="";
var c=0;
for(var i=0;i<a.length;i++) {
    b+=a[i];
    if(a[i]==" ") {
        c++;
        if(c==5) {
            b+="\n";
            c=0;
        }
    }
}
alert(b); 
```

# scala - Scala：应用 enumeratee 后获取原始 iteratee（播放文档中的示例无法编译）

> ID：10968637
> 
> 赞同：0
> 
> 时间：2012-06-10T12:18:57.573
> 
> 标签：scala, playframework, playframework-2.0, enumerator, iterate

我想将 enumeratee 应用于 iteratee，然后取回原始的 iteratee，这样我就可以应用更多的东西。播放文档中有一个示例，它使用 Iteratee[Int,Int] 来总结其输入（http://www.playframework.org/documentation/2.0.1/Enumeratees）。然后他们使用 Enumeratee[String,Int] 允许像“3”和“6”这样的字符串作为输入。示例如下：

```
val sum:Iteratee[Int,Int] = Iteratee.fold[Int,Int](0){ (s,e) => s + e }

//create am Enumeratee using the map method on Enumeratee
val toInt: Enumeratee[String,Int] = Enumeratee.map[String]{ s => s.toInt } 

val adaptedIteratee: Iteratee[String,Iteratee[Int,Int]] = toInt(sum)

// pushing some strings
val afterPushingStrings: Iteratee[String,Iteratee[Int,Int]] = {
  Enumerator("1","2","3","4") >>> adaptedIteratee
}

val originalIteratee: Iteratee[Int,Int] = flatten(afterPushingString.run)

val moreInts: Iteratee[Int,Int] = Enumerator(5,6,7) >>> originalIteratee

moreInts.run.onRedeem(sum => println(sum) ) // eventually prints 28 
```

但这不会编译，因为 Enumerator.>>> 将另一个 Enumerator 作为参数 - 而不是 iteratee。我尝试使用 |>> 代替：

```
val sum: Iteratee[Int, Int] = Iteratee.fold[Int, Int](0) { (s, e) => s + e }

//create am Enumeratee using the map method on Enumeratee
val toInt: Enumeratee[String, Int] = Enumeratee.map[String] { s => s.toInt }

val adaptedIteratee: Iteratee[String, Iteratee[Int, Int]] = toInt(sum)

// pushing some strings
val afterPushingStrings: Iteratee[String, Iteratee[Int, Int]] = {
  Iteratee.flatten(Enumerator("1", "2", "3", "4") |>> adaptedIteratee)
}

val originalIteratee: Iteratee[Int, Int] = Iteratee.flatten(afterPushingStrings.run)

val moreInts: Iteratee[Int, Int] = Iteratee.flatten(Enumerator(5, 6, 7) |>> originalIteratee)

moreInts.run.onRedeem(sum => println("Sum="+sum)) // eventually prints 28 
```

但是这个例子打印的不是“28”而是“10”。它似乎只考虑添加到适应迭代的部分。

使用枚举对象时如何取回原始迭代对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T12:41:43.207

如果您使用的是 2.0 版本，那么这是在以后的版本中修复的错误。Enumeratee 用于发送它收到的 EOF，这就是错误。

# sql-server-2008 - SQL Server 查询中的计数方法

> ID：10968638
> 
> 赞同：0
> 
> 时间：2012-06-10T12:19:10.683
> 
> 标签：sql-server-2008

大家好……我有一个数据库，其中包含以下内容： 链接到 Employee 表的 Division 表。组表，即课程类别，链接到课程表。这些表通过 Curses_Employee 表链接在一起。到目前为止，我设法提出了一个查询，该查询为我提供了在每个组/类别中参加特定课程的用户数量，如下面的输出表：部门名称| courseName|参加者总数

这是我对上述方案的查询：

```
SELECT     dbo.groups.GroupName, dbo.Divisions.DivisionName, dbo.courses.CourseName, COUNT(dbo.employee_courses.courseId) AS [Total Number of Participants]
FROM         dbo.employee AS employee_1 INNER JOIN
                      dbo.Divisions ON employee_1.DivisionCode = dbo.Divisions.SapCode INNER JOIN
                      dbo.employee_courses ON employee_1.Username = dbo.employee_courses.employeeId INNER JOIN
                      dbo.courses ON dbo.employee_courses.courseId = dbo.courses.CourseID INNER JOIN
                      dbo.groups ON dbo.courses.GroupID = dbo.groups.ID
WHERE     (dbo.courses.GroupID = 2)
GROUP BY dbo.courses.CourseID, dbo.courses.CourseName, dbo.Divisions.DivisionName, dbo.groups.GroupName 
```

现在我想添加两列每个部门的员工总数以及下表所示的百分比：groupName | 部门名称| courseName|参与者总数|员工总数|%

我尝试了这个查询，但它给了我一个错误：

```
SELECT     dbo.groups.GroupName, dbo.Divisions.DivisionName, dbo.courses.CourseName, COUNT(dbo.employee_courses.courseId) AS [Total Number of Participants],
                          (SELECT     COUNT(Name) AS Expr1
                            FROM          dbo.employee
                            WHERE      (DivisionCode = employee_1.DivisionCode)
                            GROUP BY DivisionCode) AS [Total Number of Employee]
FROM         dbo.employee AS employee_1 INNER JOIN
                      dbo.Divisions ON employee_1.DivisionCode = dbo.Divisions.SapCode INNER JOIN
                      dbo.employee_courses ON employee_1.Username = dbo.employee_courses.employeeId INNER JOIN
                      dbo.courses ON dbo.employee_courses.courseId = dbo.courses.CourseID INNER JOIN
                      dbo.groups ON dbo.courses.GroupID = dbo.groups.ID
WHERE     (dbo.courses.GroupID = 2)
GROUP BY dbo.courses.CourseID, dbo.courses.CourseName, dbo.Divisions.DivisionName, dbo.groups.GroupName 
```

错误信息：

> 列“dbo.employee.DivisionCode”在选择列表中无效，因为它既不包含在聚合函数中，也不包含在 GROUP BY 子句中。

# objective-c - UIViewControllers 问题

> ID：10968643
> 
> 赞同：2
> 
> 时间：2012-06-10T12:19:45.720
> 
> 标签：objective-c, ios, uiviewcontroller

您好，感谢您的帮助。在 Xcode4 中使用 ViewControllers 时，我遇到了一个非常奇怪的问题。首先我不得不说我没有使用故事板，我更喜欢以编程方式创建任何 UI 元素。所以我设置了一个 UIButton，我希望它在按下时将我带到一个新的视图控制器。这是我用于按钮的代码：

```
-(void)settingsAndExportHandle:(UIButton *)buttonSender {
SettingsViewController* settingView = [[SettingsViewController alloc] initWithNibName:@"SettingsViewController" bundle:nil];
settingView.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
[self presentModalViewController:settingView animated:YES]; 
```

}

此按钮在 RootViewController 的 viewDidLoad 方法中初始化和分配。当我按下按钮时，我想切换到另一个视图控制器（在本例中为 SettingsViewController）。

奇怪的是，当我按下按钮时，翻转控制器的动画效果很好，但是当它完成时，我获得了与 RootViewControllers 上完全相同的东西（相同的自定义视图、相同的按钮、所有相同的东西！）。问题是：我错过了什么？我不得不说我使用 ARC（自动引用计数），所以我不能释放或解除分配我在 RootViewController 上创建的视图和按钮。

任何帮助将不胜感激。谢谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T12:42:41.493

推送和模态呈现视图控制器不会*释放*呈现它们的视图控制器。它只是将额外的视图控制器添加到堆栈中。您需要实现一个回调方法，以便当用户点击按钮返回根视图控制器时，您的设置视图控制器让根视图控制器知道将要发生的事情，以便您可以调用您编写的方法将界面重置回您需要的任何状态。您也许也可以使用`viewWillAppear:`，但这有点乱。

*但是*，根据 Apple 人机界面指南，用户希望当他们推送视图控制器或以模态方式呈现它时，他们所在的视图控制器将保存状态，并与他们回来时离开时的状态完全相同。在导航控制器上下文中未保留状态时，这令人不安和烦人。当它以模态呈现时**尤其**令人讨厌。

想一想——用户在一个假设的邮件应用程序中。他们开始输入电子邮件并设置字体大小和颜色。他们点击添加附件按钮，该按钮会弹出一个模态视图控制器，允许他们选择图片。他们选择图片并且模式视图被关闭，并且在您的实现中，邮件撰写界面将重置并且电子邮件内容将消失，或者至少选择的字体大小和颜色将恢复为默认值。这可不是什么好的体验。

# android - 如何在 AndEngine 中反转 AnimatedSprite 的动画？

> ID：10968646
> 
> 赞同：2
> 
> 时间：2012-06-10T12:20:20.627
> 
> 标签：android, animation, sprite, andengine

我有一个`AnimatedSprite`在它完成动画后我想反转它的动画。我想一直这样做。反向动画完成后，我想播放原始动画。这可能很容易，但我是 Android 和 AndEngine 的新手。

```
mFlower1Sprite = new AnimatedSprite(20, 800, this.mFlower1);
mFlower1Sprite.setScale((float) 1.5);

mFlower1Sprite.animate(500,  0, new IAnimationListener () {
    public void onAnimationEnd(final AnimatedSprite pAnimatedSprite) {
            // reverse animation
    }
});

mScene.attachChild(mFlower1Sprite);
return mScene; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T17:43:14.447

使用[动画](http://srcrr.com/android/AndEngine/GLES1/final/reference/org/andengine/entity/sprite/AnimatedSprite.html#animate%28long%5B%5D,%20int%5B%5D,%20int,%20org.andengine.entity.sprite.AnimatedSprite.IAnimationListener%29)方法：

```
public AnimatedSprite animate (long[] pFrameDurations, int[] pFrames, 
    int pLoopCount, AnimatedSprite.IAnimationListener pAnimationListener) 
```

动画细节帧。

参数：

`pFrameDurations` 必须与 pFrames 具有相同的长度。

`pFrames` 要设置动画的帧的索引。

只需以相反的顺序列出索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T23:50:07.830

我自己在 atm 使用精灵，我遇到了这个 jQuery 插件。一探究竟。 [http://spritely.net/](http://spritely.net/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-12T14:08:04.037

我不知道有任何支持反转 AnimatedSprite 的帧，尽管它可能是一个有用的功能，所以我很想知道我是否错了。

您最好的选择可能是创建另一个帧反转的精灵表，并为该表创建另一个 AnimatedSprite 实例。然后在你的 Activity 中定义一个或两个私有 IAnimationListener（而不是在你调用 .animate() 时动态地），它们在每个动画结束时交替分离和附加两个精灵。

# asp.net - Windows Azure 表存储查询错误 - 请求输入之一无效

> ID：10968654
> 
> 赞同：1
> 
> 时间：2012-06-10T12:21:20.703
> 
> 标签：asp.net, azure, azure-storage, azure-table-storage

我正在尝试查询表存储，但出现以下错误：

> <?xml version="1.0" encoding="utf-8" Standalone="yes"?>
> 
> <error xmlns="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata">
> 
> <code>无效输入</code>
> 
> <message xml:lang="en-US">其中一个请求输入无效。</message>
> 
> </错误>

我使用的代码如下：

```
public IEnumerable<ShoppingItemEntity> Get(string shoppingRowKey) {

    var ctx = getTableServiceContext();
    var shoppingItems = ctx.CreateQuery<ShoppingItemEntity>(
        Constants.TABLE_STORAGE_SHOPPING_ITEM_TABLE_NAME
    ).Where(x => x.PartitionKey == string.Empty && x.ShoppingId == shoppingRowKey).AsTableServiceQuery();

    return shoppingItems.ToList();
}

private TableServiceContext getTableServiceContext() {

    var account = CloudStorageAccount.Parse(ConfigurationManager.AppSettings["DataConnectionString"]);
    return account.CreateCloudTableClient().GetDataServiceContext();
} 
```

这里奇怪的是，如果我在没有 where 子句的情况下运行查询，我不会收到任何错误：

```
public IEnumerable<ShoppingItemEntity> Get(string shoppingRowKey) {

    var ctx = getTableServiceContext();
    var shoppingItems = ctx.CreateQuery<ShoppingItemEntity>(
        Constants.TABLE_STORAGE_SHOPPING_ITEM_TABLE_NAME
    ).AsTableServiceQuery();

    return shoppingItems.ToList();
} 
```

你认为这里的问题是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T17:24:04.923

[这里](http://blogs.breeze.net/scotts/2011/01/25/WindowsAzureTableStorageWoesOneOfTheRequestInputsIsNotValid.aspx)有文章，[这里](http://blogs.msdn.com/b/cesardelatorre/archive/2011/03/12/typical-issue-one-of-the-request-inputs-is-not-valid-when-working-with-the-wa-development-storage.aspx)展示了你在 Azure 表存储方面的类似体验。在处理 Azure 开发存储时，您确实需要通过插入一些虚拟实体来“说服”表服务提供商您知道自己在做什么。

我相信你肯定喜欢这篇文章[Azure 表存储，真是让人头疼](http://deeperdesign.wordpress.com/2010/03/10/azure-table-storage-what-a-pain-in-the-ass/)。

# scheme - Wescheme 中的方案代码条件错误

> ID：10968655
> 
> 赞同：3
> 
> 时间：2012-06-10T12:21:22.470
> 
> 标签：scheme, racket, wescheme

虽然以下代码在 DrRacket 环境下运行良好，但在 WeScheme 中会产生以下错误：

```
Inside a cond branch, I expect to see a question and an answer, but I see more than two things here.
at: line 15, column 4, in <definitions> 
```

我该如何解决？实际代码可在[http://www.wescheme.org/view?publicId=gutsy-buddy-woken-smoke-wrest](http://www.wescheme.org/view?publicId=gutsy-buddy-woken-smoke-wrest)

```
(define (insert l n e)
  (if (= 0 n)
      (cons e l)
      (cons (car l) 
          (insert (cdr l) (- n 1) e))))

(define (seq start end)
  (if (= start end)
      (list end)
      (cons start (seq (+ start 1) end))))

(define (permute l) 
  (cond 
    [(null? l) '(())]
    [else (define (silly1 p)
            (define (silly2 n) (insert p n (car l)))
            (map silly2 (seq 0 (length p))))
            (apply append (map silly1 (permute (cdr l))))])) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T15:52:15.527

另一种选择是重构代码，提取内部定义（这似乎是 WeScheme 的一个问题）并传递缺少的参数，如下所示：

```
(define (insert l n e)
  (if (= 0 n)
      (cons e l)
      (cons (car l) 
            (insert (cdr l) (- n 1) e))))

(define (seq start end)
  (if (= start end)
      (list end)
      (cons start (seq (+ start 1) end))))

(define (permute l) 
  (cond 
    [(null? l) '(())]
    [else (apply append (map (lambda (p) (silly1 p l))
                             (permute (cdr l))))]))

(define (silly1 p l)
  (map (lambda (n) (silly2 n p l))
       (seq 0 (length p))))

(define (silly2 n p l)
  (insert p n (car l))) 
```

以上几乎适用于我能想到的任何方案实现，它是非常基本的标准方案代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T12:59:45.027

用于`local`教学语言的内部定义。

如果您在此处和邮件列表中都发布您的问题，请记得写信给您。如果有人在这里回答，邮件列表上的人没有理由花时间在那里回答。

```
(define (insert l n e)
  (if (= 0 n)
      (cons e l)
      (cons (car l) 
            (insert (cdr l) (- n 1) e))))

(define (seq start end)
  (if (= start end)
      (list end)
      (cons start (seq (+ start 1) end))))

(define (permute2 l) 
  (cond 
    [(null? l) '(())]
    [else 
     (local [(define (silly1 p)
               (local [(define (silly2 n) (insert p n (car l)))]
                 (map silly2 (seq 0 (length p)))))]
       (apply append (map silly1 (permute2 (cdr l)))))]))

(permute2 '(3 2 1)) 
```

# javascript - 更改输入的“默认”值的颜色

> ID：10968656
> 
> 赞同：0
> 
> 时间：2012-06-10T12:22:01.673
> 
> 标签：javascript

我有这个代码->

```
var searchexampletxt = '<?php echo JText::_('SEARCH_EXAMPLE'); ?>';
Window.onDomReady(function(){

$('BLA_BLA').addEvent('focus',function(){
    if(this.value=='<?php echo JText::_('SEARCH_EXAMPLE');?>')
    {
    this.value="";
        }
    });

$('BLA_BLA').addEvent('blur',function(){
    if(this.value=='')
    {
    this.value="<?php echo JText::_('SEARCH_EXAMPLE');?>";
        }
    }); 

}); 
```

有人可以帮我吗，我怎样才能使“SEARCH_EXAMPLE”文本（默认显示在输入框中）例如颜色#CCCCCC，但我在输入框中写的文本例如是#333333？

谢谢干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T12:35:19.160

使用`this.style.color="red"`或使用十六进制代码`this.style.color="#FF0000"`。

因此，对于您的示例：

1.  `this.value="";`添加后`this.style.color="#CCCCCC";`

2.  `this.value="<?php echo JText::_('SEARCH_EXAMPLE');?>"`添加后`this.style.color="#333333";`

# android - 位图分割

> ID：10968658
> 
> 赞同：2
> 
> 时间：2012-06-10T12:22:23.807
> 
> 标签：android, bitmap

当试图将位图保存到包裹时，我得到了这个

```
java.lang.RuntimeException: Tried to marshall a Parcel that contained Binder objects.
at android.os.Parcel.marshall(Native Method) 
```

有谁知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T10:01:32.250

位图已经被android打包了

[http://developer.android.com/reference/android/graphics/Bitmap.html#writeToParcel(android.os.Parcel](http://developer.android.com/reference/android/graphics/Bitmap.html#writeToParcel(android.os.Parcel)

另请参阅此问题： [How To: Parcel a bitmap in Android](https://stackoverflow.com/questions/7326365/how-to-parcel-a-bitmap-in-android)

# python - 试图实现非阻塞 python udp 多个端口得到奇怪的异常

> ID：10968659
> 
> 赞同：2
> 
> 时间：2012-06-10T12:22:34.423
> 
> 标签：python, sockets, udp, nonblocking

我正在尝试实现一个监听多个端口的非阻塞 python udp 服务器。

[我在这个Stackover 帖子](https://stackoverflow.com/questions/5308080/python-socket-accept-nonblocking)中找到了一些代码，并对其进行了修改以监听多个套接字，到目前为止，一切都很好。

我的代码如下。

```
#!/usr/bin/python

import select
import socket

ports_list=[7777,7778]

def make_socket(number):
  sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
  sock.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
  sock.bind(('', number))
  sock.listen(5)
  return sock

read_list= map(lambda x: make_socket(x), ports_list)

print(read_list)

print "Listening on port %s" % ports_list

while True:
    readable, writable, errored = select.select(read_list, [], [])
    for s in readable:
        if s in read_list:
            client_socket, address = s.accept()
            read_list.append(client_socket)
            print "Connection from", address
        else:
            data = s.recv(1024)
            if data:
                s.send(data)
            else:
                s.close()
                read_list.remove(s) 
```

我通过在另一个控制台中运行 netcat 来测试它

```
$ netcat localhost 7778
dsa 
```

但它很糟糕，就像这样：

```
/udp_non_blocking_listener.py
[<socket._socketobject object at 0xb72804fc>, <socket._socketobject object at 0xb7280534>]
Listening on port [7777, 7778]
Connection from ('127.0.0.1', 41237)
Traceback (most recent call last):
  File "./udp_non_blocking_listener.py", line 27, in <module>
    client_socket, address = s.accept()
  File "/usr/lib/python2.7/socket.py", line 202, in accept
    sock, addr = self._sock.accept()
socket.error: [Errno 22] Invalid argument 
```

我刚刚开始使用 python 非阻塞 API，做这样的事情的惯用方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T12:48:27.913

您将未接受的套接字与已接受的套接字不匹配。

您的固定代码（带`notAccepted`套接字的介绍列表）：

```
#!/usr/bin/python

import select
import socket

ports_list=[7777,7778]

def make_socket(number):
  sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
  sock.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
  sock.bind(('', number))
  sock.listen(5)
  return sock

read_list= map(lambda x: make_socket(x), ports_list)

print(read_list)

print "Listening on port %s" % ports_list

notAccepted = read_list[:]

while True:
    readable, writable, errored = select.select(read_list, [], [])
    for s in readable:
        if s in notAccepted:
            client_socket, address = s.accept()
            read_list.append(client_socket)
            print "Connection from", address, client_socket
        else:
            data = s.recv(1024)
            if data:
                s.send(data)
            else:
                s.close()
                read_list.remove(s) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-01T11:13:54.517

上面没有关于 Python 示例的 UDP。SOCK_STREAM 用于 TCP。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-21T21:35:28.063

就像接受（）一样。

对于UDP，你没有“连接”，所以没有accept()。

使用 sendto() 和 recvfrom() 和 SOCK_DATAGRAM。

除了应用程序可以应用和/或嵌入有效负载中的任何上下文之外，一个UDP数据报与来自同一主机的下一个数据报之间的协议没有任何关系。不保证来自同一主机和同一源/目标地址/端口元组的多个数据报与同一客户端应用程序相关。它是完全无连接的，因此任何状态都必须完全由应用程序和有效负载的内容来管理。

# c# - Geolocation.CivicAddress.City 返回空的 win8 Metro 应用程序

> ID：10968660
> 
> 赞同：4
> 
> 时间：2012-06-10T12:22:35.970
> 
> 标签：c#, location, windows-8, microsoft-metro

我想创建一个简单的应用程序，向我显示当前应用程序所在的城市。当我尝试粘贴下面的代码时，城市返回空，国家=US返回，但我住在比利时。

根据此[链接](http://forums.silverlight.net/t/250331.aspx/1?Windows%208%20Consumer%20Preview%20and%20Visual%20Studio%2011%20Beta%20Quick%20tip%20using%20location%20services%20Part%208%2011%20 "关联") 它说：位置服务提供对位置功能的访问，例如小区三角测量、WiFi（通过 IP 地址）和 GPS。许多现代设备也支持以前面提到的某种方式解析位置，应用程序必须处理位置服务无法解析位置或用户从控制面板禁用位置服务的情况。

我的笔记本电脑没有GPS，但是有了IP，它应该知道城市和国家。

![在此处输入图像描述](../Images/c8ec71d637afac679a82f866eee9ce3d.png)

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using Windows.Foundation;
using Windows.Foundation.Collections;
using Windows.UI.Xaml;
using Windows.UI.Xaml.Controls;
using Windows.UI.Xaml.Controls.Primitives;
using Windows.UI.Xaml.Data;
using Windows.UI.Xaml.Input;
using Windows.UI.Xaml.Media;
using Windows.UI.Xaml.Navigation;
using Windows.Devices.Geolocation;
using System.Threading.Tasks;

// The Blank Page item template is documented at http://go.microsoft.com/fwlink/?LinkId=234238

namespace AlarmPro
{
    /// <summary>
    /// An empty page that can be used on its own or navigated to within a Frame.
    /// </summary>
    public sealed partial class MainPage : Page
    {

        public MainPage()
        {
            this.InitializeComponent();

            //InitializeLocationServices();
        }

        /// <summary>
        /// Invoked when this page is about to be displayed in a Frame.
        /// </summary>
        /// <param name="e">Event data that describes how this page was reached.  The Parameter
        /// property is typically used to configure the page.</param>
        protected async override void OnNavigatedTo(NavigationEventArgs e)
        {
            TextBlock txt = new TextBlock();
            var location = await InitializeLocationServices();
            txt.Text = location;

            Grid.SetRow(txt, 0);
            Grid.SetColumn(txt, 1);

        }

        private async Task<string> InitializeLocationServices()
        {
            //Initialize geolocator object
            Geolocator geoLocator = new Geolocator();
            try
            {
                //Try resolve the current location
                var position = await geoLocator.GetGeopositionAsync();
                if (position !=null)
                {
                    string city = position.CivicAddress.City;
                    string country = position.CivicAddress.Country;
                    string state = position.CivicAddress.State;
                    string zip = position.CivicAddress.PostalCode;
                    string msg = "I am located in " + country;
                    if (city.Length > 0)
                        msg += ", city of " + city;
                    if (state.Length > 0)
                        msg += ", " + state;
                    if (zip.Length > 0)
                        msg += " near zip code " + zip;
                    return msg;
                }
                return string.Empty;
            }
            catch (Exception)
            {
                //Nothing to do - no GPS signal or some timeout occured.n .
                return string.Empty;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T13:46:08.640

可以肯定的是，您需要等待 Geolocator 实际获得位置。

天真的方法是继续尝试一段时间循环，看看是否有新的更新。

您可能希望附加到 PositionChanged 事件处理程序并等待它告诉您有新的更新。

这是直接来自源代码的一些信息和代码示例。

[http://msdn.microsoft.com/en-us/library/windows/apps/br225534.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/br225534.aspx)

我确实相信那里还有一些准确性（DesiredAccuracy 属性）设置，也许这​​也有助于使其更加具体。

# php - 从 PHP 运行 at 没有输出

> ID：10968661
> 
> 赞同：17
> 
> 时间：2012-06-10T12:22:49.463
> 
> 标签：php, exec

当我使用Unix 系统命令添加任务时，我一直在`exec()`努力，试图从中捕获输出。`at`我的问题是从我的脚本运行时它没有输出，但是从终端运行它*并且*PHP 以交互模式打印出几行。

我要执行的命令是这样的：

```
echo exec("echo 'php -f /path/to/file.php foo=1' | at now + 1 minutes", $result); 
```

`var_dump()`给`string(0) ""`,`print_r()`吐 出来`Array ()`. 我尝试过使用`shell_exec()`, 其中输出，但是在网页上下文中运行时会出现`NULL`以下输出：`hi`

```
echo exec("echo 'hi'"); 
```

这也输出了东西：

```
echo exec("atq"); 
```

但是，一旦我使用`at`，什么都不会输出。如何获得以下输出：

```
exec("echo 'php -f /path/to/file.php foo=1' | at now + 1 minutes", $result); 
```

因为目前它在 PHP 通过 Apache 以“正常”方式运行时不输出任何内容，但是在终端以及 PHP 的交互式控制台中运行该命令给了我类似的预期结果：

```
php > echo exec("echo 'php -f /path/to/file.php foo=1' | at now + 1 minutes", $result);
warning: commands will be executed using /bin/sh
job 1219 at Sun Jun 10 12:43:00 2012 
```

`safe_mode`已关闭，并且我无法弄清楚为什么`at`在执行`atq`或任何其他推荐`exec()`给我输出时使用管道输入的 echo 语句没有得到任何输出。我已经搜索并阅读[了这个问题](https://stackoverflow.com/questions/2414647/calling-php-from-php-through-exec-gives-no-result)，但无济于事。

如果使用带有的第二个参数，我如何才能`exec()`将输出返回`at`到字符串或数组`exec()`？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-10T13:43:11.080

### 工作，一条线解决方案

我没想到会这么简单。所需要做的就是通过将`2>&1`要执行的命令放在末尾来将 stderr 重新路由到 stdout。现在任何输出`at`都打印到标准输出，因此被捕获`exec()`：

```
echo exec("echo 'php -f /path/to/file.php foo=1' | at now + 1 minutes 2>&1", $result); 
```

* * *

### 我的旧解决方案：

我试图保持一个/两行解决方案，但是最终唯一有效的方法是使用`proc_open()` **因为`at`日志到 stderr，它`exec()`不会读取！**我要感谢@Tourniquet 指出这一点，但他已经删除了他的答案。去引用：

> 据我所知，在输出到 stderr 时，exec 没有捕获到。我对此不是很自信，但考虑使用 [http://php.net/manual/en/function.proc-open.php](http://php.net/manual/en/function.proc-open.php)，它允许您将 stderr 引导到它自己的管道。

这实际上是正确的做事方式。我的解决方案（因为我只想要标准错误）是这样做的：

```
// Open process to run `at` command
$process = proc_open("echo 'php -f /path/to/file.php foo=1' | at now + 1 minutes", array(2 => array("pipe", "w")), $pipes);

// Get stuff from stderr, because `at` prints out there for some odd reason
if(is_resource($process)) {
    $output = stream_get_contents($pipes[2], 100);
    fclose($pipes[2]);

    $return_value = proc_close($process);
} 
```

`$output`现在包含`at`打印到 stderr 的任何内容（应该真正进入 stdout，因为它不是错误），并且`$return_value`包含`0`成功。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-06-07T13:43:27.553

这里有一个更复杂的**proc_open**解决方案。我正在写这个答案，因为在我的情况下，*'2>&1'*解决方法不起作用。

```
function runCommand($bin, $command = '', $force = true)
{
    $stream = null;
    $bin .= $force ? ' 2>&1' : '';

    $descriptorSpec = array
    (
        0 => array('pipe', 'r'),
        1 => array('pipe', 'w')
    );

    $process = proc_open($bin, $descriptorSpec, $pipes);

    if (is_resource($process))
    {
        fwrite($pipes[0], $command);
        fclose($pipes[0]);

        $stream = stream_get_contents($pipes[1]);
        fclose($pipes[1]);

        proc_close($process);
    }

    return $stream;
} 
```

使用示例：

```
// getting the mime type of a supplied file
echo runCommand('file -bi ' . escapeshellarg($file)); 
```

**使用命令**参数的另一个示例：

```
// executing php code on the fly
echo runCommand('/usr/bin/php', '<?php echo "hello world!"; ?>'); 
```

另一个使用**force**参数的示例（这对于将在执行过程中更改输出的命令很有用）：

```
// converting an mp3 to a wav file
echo runCommand('lame --decode ' . escapeshellarg($source) . ' ' . escapeshellarg($dest), '', true); 
```

我希望这会有所帮助**:-)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T12:50:06.927

尝试创建一个最小（非）工作示例。分解一切，一次只测试一件事。

这是您的 bash 中的一个错误：

```
hpek@melda:~/temp$ echo 'php -f /path/to/file.php foo=1' | at now + 1 minutes
at: pluralization is wrong
job 22 at Sun Jun 10 14:48:00 2012
hpek@melda:~/temp$ 
```

`minute`改为og `minutes`。

我的输出`at`是通过邮件发送给我的！

# sql - sqlite 数据从一个数据库到另一个数据库

> ID：10968670
> 
> 赞同：1
> 
> 时间：2012-06-10T12:24:12.703
> 
> 标签：sql, database, sqlite

我有 2 个 sqlite 数据库，我正在尝试将数据从一个数据库插入到另一个数据库。例如，“db-1.sqlite”有一个表 '1table' 有 2 列（'name'、'state'）。此外，“db-2.sqlite”有一个表 '2table' 有 2 列（'name'、'url'）。两个表都包含一个“名称”值列表，这些值彼此最常见但随机化，因此每行的 id 不匹配。

我想将“url”列的值插入到 db-1 的表中，但我想确保每个 url 值都指向其对应的“名称”值。

到目前为止，我已经这样做了：

```
> sqlite3 db-1.sqlite
sqlite> alter table 1table add column url;
sqlite> attach database 'db-2.sqlite' as db2; 
```

现在，我不确定的部分：

```
sqlite> insert into 1table(url) select db2.2table.url from db2.2table where 1table.name==db2.2table.name 
```

如果你看看我上面写的，你可以知道我想要完成什么，但这是不正确的。如果我能在这件事上得到任何帮助，我将不胜感激！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T12:41:52.103

SQL 中的相等比较运算符是`=`，不是`==`。

另外，我怀疑您应该更新 1table，而不是插入其中。

最后，您的表名以数字开头，因此您需要对它们进行转义。

此 SQL 应该更好地工作：

```
update `1table` 
set url = (select db2.`2table`.url 
           from db2.`2table` 
           where `1table`.name = db2.`2table`.name); 
```

# java - Android上两个应用程序之间的套接字通信

> ID：10968671
> 
> 赞同：4
> 
> 时间：2012-06-10T12:24:18.150
> 
> 标签：java, android, sockets, chat

我的 Android 应用程序遇到了很大的问题，我想向您寻求帮助。

我目前正在使用套接字编写 Android Clietn-Server 应用程序。我在 Internet 上找到了很多教程，并从中为我的项目创建了基础知识。但是，所有教程都仅用于发送一条消息，仅此而已。我需要发送更多，所以我一直在尝试修改它。

这是负责服务器和客户端的代码片段。其余的暂时不重要。

**服务器：**

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        serverStatus = (TextView) findViewById(R.id.server_status);
        recivedMsg = (TextView)findViewById(R.id.rec_msg);

        SERVERIP = getLocalIpAddress();

        Thread fst = new Thread(new ServerThread());
        fst.start();
    }

    public class ServerThread implements Runnable {

        public void run() {
            try {
                if (SERVERIP != null) {
                    handler.post(new Runnable() {
                        @Override
                        public void run() {
                            serverStatus.setText("Listening on IP: " + SERVERIP);
                        }
                    });
                    serverSocket = new ServerSocket(SERVERPORT);
                    while (true) {
                        // listen for incoming clients
                        Socket client = serverSocket.accept();
                        handler.post(new Runnable() {
                            @Override
                            public void run() {
                                serverStatus.setText("Connected." + System.getProperty("line.separator"));
                            }
                        });

                        try {
                            line = null;
                            while (connected) {
                                BufferedReader in = new BufferedReader(new InputStreamReader(client.getInputStream()));
                                if((line = in.readLine())!=null)
                                {
                                    Log.d("ServerActivity", line);
                                    handler.post(new Runnable() {
                                        @Override
                                        public void run() {
                                            if(recivedMsg.equals("CLOSE"))
                                            {
                                                recivedMsg.append("CLOSE socket");
                                                connected = false;
                                            }
                                            else
                                            {
                                                recivedMsg.append("MSG: " + line + System.getProperty("line.separator"));
                                            }
                                            // do whatever you want to the front end
                                            // this is where you can be creative
                                        }
                                    });
                                }
                                else
                                {
                                    recivedMsg.append("empty" + System.getProperty("line.separator"));
                                }
                            }
                            break;
                        } catch (Exception e) {
                            handler.post(new Runnable() {
                                @Override
                                public void run() {
                                    serverStatus.setText("Oops. Connection interrupted. Please reconnect your phones.");
                                }
                            });
                            e.printStackTrace();
                        }
                    }
                } else {
                    handler.post(new Runnable() {
                        @Override
                        public void run() {
                            serverStatus.setText("Couldn't detect internet connection.");
                        }
                    });
                }
            } catch (Exception e) {
                handler.post(new Runnable() {
                    @Override
                    public void run() {
                        serverStatus.setText("Error");
                    }
                });
                e.printStackTrace();
            }
        }
    } 
```

**客户**

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        serverIp = (EditText) findViewById(R.id.server_ip);
        connectPhones = (Button) findViewById(R.id.connect_phones);

        sendField = (EditText) findViewById(R.id.send_field);
        sendMsg = (Button) findViewById(R.id.msg_send);

        connectPhones.setOnClickListener(connectListener);
        sendMsg.setOnClickListener(sendMessage);
    }

    @Override
    protected void onStop() {
         super.onStop();
         try {
                 BufferedWriter out = new BufferedWriter(new OutputStreamWriter(s.getOutputStream()));
                 //send output msg
                 String outMsg = "CLOSE"; 
                 out.write(outMsg);
                 out.flush();
                 // make sure you close the socket upon exiting
                 s.close();
         } catch (IOException e) {
                 e.printStackTrace();
         }
    }

    private OnClickListener connectListener = new OnClickListener() {

        @Override
        public void onClick(View v) {
            serverIpAddress = serverIp.getText().toString();
            runTcpConnection();
            sendMessageToServer("Msg");
        }
    };

    private OnClickListener sendMessage = new OnClickListener() {

        @Override
        public void onClick(View v) {
            sendMessageToServer(sendField.getText().toString());
        }
    };

    private void runTcpConnection() {
        try {
            s = new Socket(serverIpAddress, SERVERPORT);
            BufferedWriter out = new BufferedWriter(new OutputStreamWriter(s.getOutputStream()));
            //send output msg
            String outMsg = "TCP connecting to " + SERVERPORT + System.getProperty("line.separator"); 
            out.write(outMsg);
            out.flush();
            Log.i("TcpClient", "sent: " + outMsg);
            SystemClock.sleep(10);
            s.close();
        } catch (UnknownHostException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    };

    public void sendMessageToServer(String str) {
        try {
                    s = new Socket(serverIpAddress, SERVERPORT);
                    BufferedWriter out = new BufferedWriter(new OutputStreamWriter(s.getOutputStream()));
                    //send output msg
                    String outMsg = str + System.getProperty("line.separator"); 
                    out.write(outMsg);
                    out.flush();
                    Log.i("TcpClient", "sent: " + outMsg);
                    s.close();
                } catch (UnknownHostException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                    Log.d("", "hello222");
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                    Log.d("", "hello4333");
                }

            } 
```

现在设备连接正确。此外，他们正在发送第一个连接消息（那些在 中`OnClickListener connectListener`）。**问题是当我尝试使用`sendMessageToServer`它发送另一条消息时是不可能的。这些消息仅在客户端活动被破坏后显示。**

非常有趣的是，没有`SystemClock.sleep(10);`听者的`runTcpConnection()`行为很奇怪。只有“已连接”。显示在服务器上。

有人可以告诉我我必须做什么才能正常发送消息吗？

**编辑：** 这是我发现的东西：

*   如果我在连接中发送的消息比所有消息都为空（null）并且在第二个连接错误显示后 - 请重新连接手机
*   如果我在连接中发送更多没有 s.close 行的消息，`sendMessageToServer`则只有一条消息通过。之后不显示错误。
*   消息形式`runTcpConnection`总是显示（除非在此函数中没有 SystemClock.sleep(10)）

希望它可以帮助某人诊断我的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T16:00:36.153

如我所见，每当用户单击按钮发送时，您都会创建一个新套接字，对吗？
我建议您只在用户单击连接时初始化一次，然后在发送单击事件中使用它（因为这是 TCP，如果您创建新的套接字实例，您将断开与服务器的连接）因此，您应该在*sendMessageToServer*
中删除***这些行***：

 *```
s = new Socket(serverIpAddress, SERVERPORT);
s.close(); 
```

*和runTcpConnection*中的这一行

 *```
s.close(); 
```

每当您不想与服务器通信时，套接字应该关闭（onstop 是一个示例，或者当更改活动时......）
您也应该只创建一个 BufferedWriter 实例。
希望这有帮助。**

# c# - 当我按下一个键时，webBrowser1_PreviewKeyDown 会运行几次

> ID：10968672
> 
> 赞同：0
> 
> 时间：2012-06-10T12:24:18.740
> 
> 标签：c#

```
private void webBrowser1_PreviewKeyDown(object sender, PreviewKeyDownEventArgs e)
        {
          if (click_counter > 0)
              {
                  click_counter = 0;
                  return;
                }                
            if (e.KeyCode == Keys.S)
                {

                    searchButton.PerformClick();
                }
        } 
```

我将此代码添加到具有 webbrowser 对象的表单源代码中。问题是当我单击字母“S”时弹出 3 次消息框。

我怎样才能摆脱这个问题？

谢谢 已编辑：根据推荐删除 MessageBox.Show！

已解决：我通过解决方法解决了它。不过，我不能称其为真正的解决方案。我所做的是在开始时添加一个 if 条件来控制点击次数。欢迎任何更好的解决方案！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T12:34:16.850

不要在事件处理程序*中*使用 MessageBox，它会产生一个消息循环，这会极大地干扰事件的正常流程。尤其是由于 Windows 通知而引发并由消息循环调度程序传递的类型，例如 PreviewKeyDown。

使用 Debug.Print() 在输出窗口中显示诊断。当然不要忘记调试器断点。

# apache - 将除少数人之外的所有人重定向到 index.html 或 http://www.example.com

> ID：10968677
> 
> 赞同：0
> 
> 时间：2012-06-10T12:24:53.030
> 
> 标签：apache, .htaccess, redirect, ip

我很快将要建立一个新网站，但是当我这样做时，我想建立一个 index.html，这样每个人都可以看到它，但是如果他们尝试访问另一个文件 abc.html，例如，他们会被重定向回来到 index.html 或[http://www.example.com](http://www.example.com)

不，我希望能够查看任何文件，所以我想知道检查 IP 以及是否允许查看 IP，让他们查看任何文件，如果它们不在列表中，请将它们发送到 index.html 或[http:/ /www.example.com](http://www.example.com)

我想我会使用 .htaccess 来做这样的事情，但不确定要输入什么。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T12:29:57.073

```
# Redirect everyone but for me
RewriteEngine On
RewriteBase /
RewriteCond %{REMOTE_HOST} !^127\.0\.0\.1
RewriteRule .* http://www.example.com [R=302,L] 
```

那行得通吗，我会将IP更改为我的IP而不是127.0.0.1？

还是会像我在 example.com 上工作那样导致循环？

# c++ - char* 的“查找”等效函数

> ID：10968680
> 
> 赞同：0
> 
> 时间：2012-06-10T12:25:33.027
> 
> 标签：c++

我有下一个代码：

```
char * word = "?www?eee"; 
```

我想看看有多少'？我有 。我知道“查找”函数适用于字符串，而不适用于 char*。char* 是否有等价物？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T12:29:18.077

您可以使用`std::count`：

```
std::size_t result = std::count(word, word + strlen(word), '?'); 
```

如果你需要一个`find`函数用于其他目的，有`std::find`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T12:28:31.257

您可以[`std::count`](http://en.cppreference.com/w/cpp/algorithm/count)用作：

```
size_t howMany = std::count(word, 
                            word + strlen(word), 
                            '?'); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-10T12:31:04.013

您也可以实现自己的`find()-function`：

```
int find_char(char *str, char c) {
    int count = 0;
    for(int i = 0; str[i] != '\0'; i++) {
        if(str[i] == c) {
            count ++;
        }
    }
    return count;
} 
```

# php - 在终端中查看 php 脚本执行

> ID：10968691
> 
> 赞同：0
> 
> 时间：2012-06-10T12:28:15.560
> 
> 标签：php, shell, connection, execution

我正在编写一个可能需要半天时间的脚本，因为它从一个网站的大约 14000 个网页中获取数据。

要确定它是否取得进展，有没有办法观察它的执行情况，即使用 mac os shell 到每个抓取页面的传出连接？

如果有任何帮助，我正在使用 curl 获取页面内容。

非常感谢！查尔斯

编辑该脚本是用 php 编写的，并从 localhost 执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T12:36:28.010

在编写自定义脚本时，将某种状态输出到标准输出非常有帮助。

这可以使用`printf` [http://www.php.net/manual/en/function.sprintf.php以统一的方式完成](http://www.php.net/manual/en/function.sprintf.php)

您记录到标准输出的内容取决于您需要查看的信息。也许对于 curl 请求，我会记录 Url、响应代码，也许是开始时间和结束时间。这完全取决于您，只需确保您可以验证它的状态/进度。

```
printf('%40s | %5s', 'URL', 'Status Code');
printf('%40s | %5s', $the_url, $status_code); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T12:42:42.270

如果您通过 Web 浏览器运行它，则在 PHP 完成执行之前不会看到输出。但是，`file_put_contents()`可以将数据附加到您可以查看的日志文件中。

示例代码行是：`file_put_contents("file name.txt", "\nWebsite abc was successfully scraped", FILE_APPEND);`. 您必须具有 FILE_APPEND 标志，否则 PHP 每次都会覆盖该文件。

[php.net 参考](http://php.net/manual/en/function.file-put-contents.php)

# delphi - 从字符串 delphi 打开资源管理器

> ID：10968695
> 
> 赞同：1
> 
> 时间：2012-06-10T12:28:39.833
> 
> 标签：delphi

我正在尝试使用从用户那里获得的目录从 Delphi 中打开 Windows 资源管理器。此目录保存为字符串。当我使用以下代码时，它不会接受它。我必须亲自输入。

```
sDir : string;

procedure OpenDirectoryClick(Sender: TObject);
begin
 ShellExecute(Handle,nil,sDir,nil,nil,sw_Show);
end; 
```

上面的代码不起作用

```
sDir : string;

procedure OpenDirectoryClick(Sender: TObject);
begin
 ShellExecute(Handle,nil,'C:\Windows',nil,nil,sw_Show);
end; 
```

上面的代码确实有效

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T12:40:41.383

第三个参数应该被转换成 PChar，所以请试试这个：

```
ShellExecute(Handle,nil,PChar(sDir),nil,nil,sw_Show); 
```

希望这可以帮助 ：）

顺便说一句：不要指望默认的 Windows API 行为并将第二个参数指定为“open”，而不是 nil，以防万一；）

# node.js - 不用编译就可以用 CoffeeScript 编写 ExpressJS/Node 应用程序吗？像服务器的连接资产

> ID：10968696
> 
> 赞同：2
> 
> 时间：2012-06-10T12:28:55.550
> 
> 标签：node.js, coffeescript, express

我可以[`connect-assets`](https://github.com/TrevorBurnham/connect-assets)在不编译的情况下编写 CoffeeScript 和 Stylus (CSS) 文件，其余的工作由它完成。服务器端也可以吗？我可以编写我的启动“CoffeeScript”服务器，例如：

```
coffee server.coffee 
```

但我认为它不知道如何直接解释 CoffeeScript 文件。是否可以使用纯 CoffeeScript？否则，您的工作流程和文件夹结构如何？我不想把`coffee`s 和`js`s 混在一起

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T18:02:53.690

将您的应用程序重写为`application.coffee`，然后将其写入您的`app.js`：

```
require('coffee-script');
module.exports = require('./application.coffee'); 
```

然后`node app.js`将运行您的服务器。当然，您必须安装咖啡脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T14:18:54.097

您可以按照您描述的方式启动服务器。不需要编译它。

```
coffee app.coffee 
```

# amazon-simpledb - AWS SimpleDB - 如何创建偏移量以解决默认结果限制 100

> ID：10968698
> 
> 赞同：1
> 
> 时间：2012-06-10T12:29:11.420
> 
> 标签：amazon-simpledb

AWS SimpleDB 的默认结果限制为 100，我正在尝试从我的数据库中获取最后 20 条记录。他们的在线帮助指出：“count(*) 和 select 返回的下一个标记是可以互换的，只要 where 和 order by 子句匹配即可。例如，如果您想返回前 10,000 项之后的 200 项（类似于偏移量） )，您可以使用 10,000 的限制子句执行计数，并使用下一个标记通过 select 返回接下来的 200 个项目。”

所以我试图弄清楚如何执行这两个操作。我首先计算记录数（在我的示例中约为 160），然后从中减去 20 以创建偏移量。但 AWS 仍在返回前 100 条记录。我认为“//++”之间的代码在创建偏移量时不正确。

```
 //++ AWS has display limit of 100 so create offset by starting from count - 20 
        NSString *sdbAppOffset = [NSString stringWithFormat:@"select count(*) from %@ limit %i",sdbAppUse,iDbaseRecordCountOffset];

        SimpleDBSelectRequest *selectOffsetRequest = [[SimpleDBSelectRequest alloc] initWithSelectExpression:sdbAppOffset];
        selectOffsetRequest.consistentRead = YES;

        SimpleDBSelectResponse *selectOffSetResponse = [sdbClient select:selectOffsetRequest];
        //NSLog(@"sdbAppUse count %i",[selectOffSetResponse.items count]);

        //++ 

        NSString *sdbAppUseString = [NSString stringWithFormat:@"select * from %@",sdbAppUse];

        SimpleDBSelectRequest *selectRequest = [[SimpleDBSelectRequest alloc] initWithSelectExpression:sdbAppUseString];
        selectRequest.consistentRead = YES;

        SimpleDBSelectResponse *selectResponse = [sdbClient select:selectRequest];
        NSLog(@"sdbAppUse count %i",[selectResponse.items count]);

        for (int x = 0; x < [selectResponse.items count]; x++) { 

            SimpleDBItem *registerUser = [selectResponse.items objectAtIndex:x];

            for (SimpleDBAttribute *attribute in registerUser.attributes) {
                NSLog(@"trackUsage registerUser |%@|, name |%@|, value |%@|",registerUser.name, attribute.name, attribute.value);

            }
        } 
```

# javascript - 使用非数字键删除数组元素

> ID：10968702
> 
> 赞同：1
> 
> 时间：2012-06-10T12:29:43.787
> 
> 标签：javascript

我有一个对象数组，其中键是 md5 字符串，值是对象 [0315778255cca8d2f773642ad1d3678f] = {a:12,b:34}。我需要根据它们的键删除数组元素，我尝试了拼接但失败了，因为我认为键是非数字的。我也尝试过按位置拼接，但失败了，甚至删除了元素，但我们都知道它并不理想。

我可以将我的实现从数组更改为对象，但我想这或多或少也会有相同的问题。

欢迎任何想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T12:31:16.890

`splice`确实是关于数组索引（因为数组的数字属性被称为），而不是其他属性。

要从对象（包括数组）中删除属性，请使用[`delete`](http://ecma-international.org/ecma-262/5.1/#sec-11.4.1)：

```
delete theArray['0315778255cca8d2f773642ad1d3678f']; 
```

尽管它与其他语言中的“删除”相似，但`delete`在 JavaScript 中与内存管理（直接）无关；它所做的只是从对象中删除一个属性（完全；它不只是将属性的值设置为`undefined`或其他东西）。

旁注：如果您*只*使用非数字属性，您可能根本不需要数组。使用 JavaScript 类型的唯一原因`Array`是，如果您需要特殊处理，它会提供名称全为数字的属性、魔法`length`（仅与数字属性有关）以及来自的东西`Array.prototype` ——它们都与其他、非索引属性。

* * *

在下面回复您的评论：

> 删除在元素位置留下未定义。我需要完全摆脱它

不，`delete`完全删除该属性。它不会离开`undefined`它的位置。您可能会认为它确实如此，因为每当您尝试从不存在的对象中检索属性时，您都会返回`undefined`. 例如：

```
var obj = {};            // Object with no "foo" property at all
var x = obj.foo;
console.log("x = " + x); // "x = undefined" 
```

`hasOwnProperty`您可以使用or证明该属性确实被删除`in`：

```
var obj = {};
console.log('foo' in obj);              // "false"
console.log(obj.hasOwnProperty('foo')); // "false" 
```

`in`将检查对象及其原型链；`hasOwnProperty`只检查对象本身。

回到`delete`：

```
var obj = {};
console.log(obj.hasOwnProperty('foo')); // "false"
obj.foo = "bar";
console.log(obj.hasOwnProperty('foo')); // "true"
delete obj.foo;
console.log(obj.hasOwnProperty('foo')); // "false"
obj.foo = "bar";
console.log(obj.hasOwnProperty('foo')); // "true"
delete obj['foo'];
console.log(obj.hasOwnProperty('foo')); // "false" 
```

[实例](http://jsbin.com/abiler)| [来源](http://jsbin.com/abiler/edit)

请注意，如果是有效标识符，则两者`delete obj.foo;`都`delete obj['foo'];`有效`foo`。但是对于名称不是有效标识符的属性（例如您的 md5 总和），您必须使用带括号的形式和上面显示的字符串（`delete theArray['0315778255cca8d2f773642ad1d3678f'];`）。

# jquery - json 和 jquery 提取@string

> ID：10968703
> 
> 赞同：0
> 
> 时间：2012-06-10T12:29:47.230
> 
> 标签：jquery, json

> **可能重复：**
> [访问带有奇怪字符的 Json 字段](https://stackoverflow.com/questions/1710103/accessing-json-fields-with-weird-characters)
> [解析带有 @ 符号的 JSON](https://stackoverflow.com/questions/6932745/parsing-json-w-symbol-in-it)

大家好，这是我第一次来这里，对我的英语感到抱歉，所以我从 json 结果中提取字符串时遇到问题，字符串看起来像这样@string。这是结果格式的示例

```
"RateInfo": {
            "@priceBreakdown": "true",
            "@promo": "false",
            "@rateChange": "false",
            "ChargeableRateInfo": {
                "@averageBaseRate": "93.33",
                "@averageRate": "93.33",
                "@commissionableUsdTotal": "93.33",
                "@currencyCode": "USD",
                "@maxNightlyRate": "93.33",
                "@nightlyRateTotal": "93.33",
                "@surchargeTotal": "16.33",
                "@total": "109.66",
                "NightlyRatesPerRoom": { 
```

我需要拿出一个@total。请有任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T12:34:50.150

假设您已经将 JSON 字符串解析为 JavaScript 对象，例如：

```
var obj = JSON.parse(jsonString); 
```

然后您可以像平常一样简单地访问该`@total`属性：

```
var total = obj.RateInfo.ChargeableRateInfo["@total"]; 
```

请注意，您必须使用方括号来访问该`@total`属性，因为该`@`字符在 JavaScript 标识符中是无效的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-10T12:44:18.170

为什么不将 XML 作为 XML 发送，而不是将其转换为 JSON？

```
<RateInfo priceBreakdown="true" promo="false" rateChange="false">
     <ChargeableRateInfo averageBaseRate="93.33" averageRate="93.33"
              commissionableUsdTotal="93.33" currencyCode="USD"
              maxNightlyRate="93.33"  nightlyRateTotal="93.33"
              surchargeTotal="16.33" total="109.66">
         <NightlyRatesPerRoom>
               ...
         </NightlyRatesPerRoom>
    </ChargeableRateInfo>
</RateInfo> 
```

# java - JAVA - 简单的 GET 请求，使用 SSL 证书和 HTTPS

> ID：10968708
> 
> 赞同：5
> 
> 时间：2012-06-10T12:30:09.897
> 
> 标签：java, ssl, https, request, certificate

我有一个扩展名为“.pfx”的文件和该证书的密码。

我需要做的是向 web 服务发送一个简单的 GET 请求并读取响应正文。

我需要实现一个类似的方法：

```
String getHttpResponse(String url, String certificateFile, String passwordToCertificate){
    ...
} 
```

我还尝试使用 openssl 将证书转换为“无密码”格式：

```
Convert a PKCS#12 file (.pfx .p12) containing a private key and certificates to PEM:
openssl pkcs12 -in keyStore.pfx -out keyStore.pem -nodes 
```

所以 my 方法的替代实现可能是：

```
String getHttpResponse(String url, String certificateFile){
    ...
} 
```

我真的很感谢你的帮助，我花了半天的时间在谷歌上搜索它，但我还没有找到一个可以帮助我的例子，似乎我在理解 SSL 和其他东西的一些基本假设方面遇到了问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-11T15:08:16.240

我终于找到了一个很好的解决方案（无需创建自定义 SSL 上下文）：

```
String getHttpResponseWithSSL(String url) throws Exception {
    //default truststore parameters
    System.setProperty("javax.net.ssl.trustStore", "/usr/lib/jvm/java-6-openjdk/jre/lib/securitycacerts");
    System.setProperty("javax.net.ssl.trustStorePassword", "changeit");
    System.setProperty("javax.net.ssl.trustStoreType", "JKS");

    //my certificate and password
    System.setProperty("javax.net.ssl.keyStore", "mycert.pfx");
    System.setProperty("javax.net.ssl.keyStorePassword", "mypass");
    System.setProperty("javax.net.ssl.keyStoreType", "PKCS12");

    HttpClient httpclient = new HttpClient();

    GetMethod method = new GetMethod();
    method.setPath(url);

    int statusCode = httpclient.executeMethod(method);
    System.out.println("Status: " + statusCode);

    method.releaseConnection();

    return method.getResponseBodyAsString();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T13:21:56.150

这个问题应该有你的答案：

[HTTPClient-1.4.2：自定义 SSL 上下文示例所需的说明](https://stackoverflow.com/questions/7201154/httpclient-1-4-2-explanation-needed-for-custom-ssl-context-example)

您需要使用 httpclient 创建请求，然后使用密钥管理器。

# clojure - 跷跷板按钮绑定WindowBuilder

> ID：10968710
> 
> 赞同：3
> 
> 时间：2012-06-10T12:30:22.577
> 
> 标签：clojure, windowbuilder, seesaw

目前我正在使用一个带有在 WindowBuilder 中设计的表单的应用程序。该表单包含一个我想在 Clojure/seesaw 中使用的按钮。所以我的问题是：如何在 Clojure 中使用 Java 中定义的按钮？

亲切的问候，米切尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T14:31:41.007

如果您遵循[WindowBuilder 示例](https://github.com/daveray/seesaw/blob/develop/examples/window-builder/src/window_builder/core.clj)，您可以使用`seesaw.core/select`找到按钮，然后`seesaw.core/listen`照常使用。例如，如果您有一个`"foo"`在表单中命名的按钮，并且*在*您调用该`identify`函数之后：

```
(listen (select my-window-builder-form [:#foo]) 
  :action (fn [e] ... you're code ...)) 
```

# html - 图像而不是单选按钮

> ID：10968713
> 
> 赞同：2
> 
> 时间：2012-06-10T12:31:04.783
> 
> 标签：html, css, forms, webforms

我一直在尝试自定义我的单选按钮，为此我想知道如何简单地在单选按钮的选中和未选中事件上添加图像，它应该对所有浏览器都是通用的，我尝试了各种功能，但都给出了结果，但有一定的缺陷我要做的就是将所有 raio 按钮转换为指定的 css 请让我知道如何仅使用 css 方法来完成它（我已经使用 jquery 完成了它，但是它需要一个 eash 单选按钮的标签和始终保持浮动向左）

请帮助谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T12:39:32.400

为此使用 CSS：

```
input[type="radio"] {
    display:inline-block;
    height:20px;
    text-indent:-9999px;
    width:20px;
}

input[type="radio"], .notchecked {
    background:url("notchecked.png") 0 0 no-repeat;
}

input[type="radio"]:checked, .checked {
    background:url("checked.png") 0 0 no-repeat;
} 
```

如果您希望旧版浏览器使用它，可以使用 jquery 添加：

```
$("input[type=radio]").on("change", function(){
    if($(this).is(":checked")) {
        $(this).addClass("checked");
    }
    else {
        $(this).removeClass("checked");
    }
});
$("input[type=radio]:checked").addClass("checked"); 
```

和html：

```
<input type="radio" class="notchecked" value="true" /> 
```

# jquery - jQuery“点击”文本框。如何添加 Tab 键支持？

> ID：10968717
> 
> 赞同：0
> 
> 时间：2012-06-10T12:31:45.787
> 
> 标签：jquery

```
$("#textbox").one("click", function () {

}); 
```

如何添加对 tab 键的支持？如果用户在前一个文本框上然后单击 tab 键并最终出现在#textbox 上，则应该运行该函数，以及用户决定单击而不是使用 tab 键的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T12:39:00.990

我认为您正在寻找`focus`活动：

```
$("#textbox").one("focus", function () {
    // Fires when the textbox gets focus, whether via the
    // mouse or the keyboard (e.g., tab)
}); 
```

您确定只希望在*第*一次聚焦控件时调用它吗？（你用过[`one`](http://api.jquery.com/one)。）不是以后的时间？如果您希望它每次都发生，请使用[`on`](http://api.jquery.com/on)而不是`one`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T12:39:03.393

您可以绑定到`focus`事件而不是`click`事件：

```
$("#textbox").one("focus", function () {
    //Do stuff
}); 
```

[来自 MDN](https://developer.mozilla.org/en/XUL_Tutorial/Focus_and_Selection)：

> 焦点事件用于在将焦点赋予元素时做出响应。

和

> 用户可以通过用鼠标单击元素或按 TAB 键来更改焦点。按下 TAB 键时，下一个元素将获得焦点。要后退，可以按下 Shift 键和 Tab 键。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T12:39:14.070

您可以使用`focus`事件，它同时支持`tab`和`click`事件：

```
$("#textbox").one("focus", function () {

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T12:40:35.343

你会做什么..由关键代码决定？

```
$("#textbox").one("keydown",function(ev){
  var c=ev.KeyCode||ev.which;
  if(c==9){
    ev.preventDefault();
    //something...
  }
}); 
```

# php - 查询为空错误

> ID：10968719
> 
> 赞同：0
> 
> 时间：2012-06-10T12:31:55.317
> 
> 标签：php, mysql

如果我提交在错误行中生成的以下 SQL 表明它运行良好，但在 PHP 中它告诉我“查询为空”。

知道为什么吗？

例如生成的字符串如下：

`update LOTS set packageID = "" where packageID ='AS0610'`

如果我按照我所说的那样手动提交此查询，则没有错误。我试过用“”代替“”，但似乎并没有解决问题。

```
<?

$delID = stripslashes($_COOKIE['delID']);
$delType = $_COOKIE['delType'];
$conn=mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");
echo $conn;

if($delType=="packageID"){
    $sqlLots = 'update LOTS set packageID = "" where packageID ='.$delID;

    echo $sqlLots;

    //returns "Quer was empty" on below line.
    $result = mysql_query($sqlLOTS) or die(mysql_error());

    $sqlLOTS = 'delete from PACKAGES where '.$delType.' = '.$delID;

}else{
    $sqlLOTS = 'delete from LOTS where '.$delType.' = '.$delID;
}

$result = mysql_query($sqlLOTS); //or die(mysql_error());
echo "<html>";
echo "<script>";
echo "window.location = 'http://www.redIR.info/manage/index.php'";
echo "</script>";
echo "</html>"; 

echo 'a'.$result;

     ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T12:41:17.330

您正在使用 2 个变量 - `$sqlLOTS` 和 `$sqlLots`.

您应该使用 1 个变量名称，并在创建查询的整个过程中使用它。

此外，我会在您的 if 语句开始之前定义您决定使用的变量。

我还会考虑使用带有准备好的语句的[PDO](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T12:37:25.657

`$sqlLOTS`您在运行查询时正在使用：

```
$result = mysql_query($sqlLOTS) 
```

但是，您正在设置`$sqlLots`：

```
$sqlLots = 'update LOTS set packageID = "" where packageID ='.$delID; 
```

变量名区分大小写，因此您有两个单独的变量，并且`$sqlLOTS`在运行查询时确实为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T12:36:43.807

变量名区分大小写：

```
$result = mysql_query($sqlLOTS) or die(mysql_error()); 
```

您正在初始化具有不同名称的变量并使用不同的变量作为 mysql_query() 参数。您需要使用 $sqlLots。

或者在此行中将 $sqlLots 更改为 $sqlLOTS：

```
$sqlLots = 'update LOTS set packageID = "" where packageID ='.$delID; 
```

# php - 多墙发布网站脚本。出现不显示粉丝页面列表的错误

> ID：10968723
> 
> 赞同：0
> 
> 时间：2012-06-10T12:32:14.097
> 
> 标签：php, facebook, facebook-php-sdk, facebook-access-token, facebook-app-requests

```
$queries = array(
    array('method' => 'GET', 'relative_url' => '/'.$user),
    array('method' => 'GET', 'relative_url' => '/'.$user.'/pages'),
    array('method' => 'GET', 'relative_url' => '/'.$user.'/groups'),
    array('method' => 'GET', 'relative_url' => '/'.$user.'/friends'),
    );

// POST your queries to the batch endpoint on the graph.
try{
    $batchResponse = $facebook->api('?batch='.json_encode($queries), 'POST');
}catch(Exception $o){
    error_log($o);
}

//Return values are indexed in order of the original array, content is in ['body'] as a JSON
//string. Decode for use as a PHP array.
$user_info  = json_decode($batchResponse[0]['body'], TRUE);
$pages      = json_decode($batchResponse[1]['body'], TRUE);
$groups     = json_decode($batchResponse[2]['body'], TRUE);
$friends_list= json_decode($batchResponse[3]['body'], TRUE); 
```

我怀疑这个数组`/'.$user.'/pages'`是错误的。我在这方面遇到了很多麻烦。可能是一个简单的错误。

```
array('method' => 'GET', 'relative_url' => '/'.$user.'/pages'), 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T15:07:04.627

尝试使用**$user_profile[id]**，同时确保您具有显示此用户信息所需的权限。

```
$user = $facebook->getUser();
$access_token = $_SESSION['fb_APPID_access_token'];
if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');

  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }
} 
```

# jsf-2 - JSF SelectOneMenu 中的 ENTITY 对象不起作用

> ID：10968724
> 
> 赞同：1
> 
> 时间：2012-06-10T12:32:44.813
> 
> 标签：jsf-2, facelets, icefaces-2

我想从 SelectOneMenu 获取实体的实例，以便我可以将实体变量分配给其他方法。但它指向空值。

# xhtml代码

```
<h:selectOneMenu value="#{statusReport.projectDetID}" converter="ObjectStringConv" onchange="#{statusReport.retrieveReport()}" >
                <f:selectItems value="#{statusReport.listOfProjectDetail}"
                    var="projectDetail" itemLabel="#{projectDetail.project}              #{projectDetail.startDate}   -    #{projectDetail.endDate}"
                    itemValue="#{projectDetail}" noSelectionValue="Select the Saved Project"/>
            </h:selectOneMenu> 
```

状态报告 bean

```
public class StatusReport implements Serializable {

    private ProjectDetail projectDetID;

    private List<ProjectDetail> listOfProjectDetail;

    public List<ProjectDetail> getListOfProjectDetail() {
        listOfProjectDetail = projectDetailFacade.findAll();
        return listOfProjectDetail;
    }

    public void setListOfProjectDetail(List<ProjectDetail> listOfProjectDetail) {
        this.listOfProjectDetail = listOfProjectDetail;
    }
    public ProjectDetail getProjectDetID() {
        return projectDetID;
    }

    public void setProjectDetID(ProjectDetail projectDetID) {
        this.projectDetID = projectDetID;
    }

    public void retrieveReport(){

        System.out.println(" Processing .....");
        if ( projectDetID == null )
        {
            System.out.println("The object from Select null");
        }
        else
        {
        System.out.println("The object from Select menu" + projectDetID.toString());
        }

        System.out.println("Generated Data:Completed");

}} 
```

ProjectDetail 实体 Bean

```
package com.jira.entity;

import java.io.Serializable;
import javax.persistence.*;

import java.util.Date;
import java.util.List;

/**
 * The persistent class for the PROJECT_DETAIL database table.
 * 
 */
@Entity
@Table(name="PROJECT_DETAIL",schema="weeklyrep")

public class ProjectDetail implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy=GenerationType.SEQUENCE, generator="projectdetail_seq")
    @SequenceGenerator(name="projectdetail_seq",schema="weeklyrep",sequenceName="projectdetail_seq", allocationSize=1)
    @Column(name="PDETAIL_ID")
    private long pdetailId;

    private Boolean completed;

    @Temporal( TemporalType.DATE)
    @Column(name="END_DATE")
    private Date endDate;

    private Long project;

    @Temporal( TemporalType.DATE)
    @Column(name="START_DATE")
    private Date startDate;

    //bi-directional many-to-one association to MajorEvent
    @OneToMany(mappedBy="projectDetail",cascade=CascadeType.ALL)
    private List<MajorEvent> majorEvents;
    //bi-directional one-to-one association to ExecSummary
    @OneToOne(mappedBy="projectDetailExec",cascade=CascadeType.ALL)
    private ExecSummary execSummary;
    public ProjectDetail() {
    }

    public long getPdetailId() {
        return this.pdetailId;
    }

    public void setPdetailId(Long pdetailId) {
        this.pdetailId = pdetailId;
    }

    public Boolean getCompleted() {
        return this.completed;
    }

    public void setCompleted(Boolean completed) {
        this.completed = completed;
    }

    public Date getEndDate() {
        return this.endDate;
    }

    public void setEndDate(Date endDate) {
        this.endDate = endDate;
    }

    public long getProject() {
        return this.project;
    }

    public void setProject(long project) {
        this.project = project;
    }

    public Date getStartDate() {
        return this.startDate;
    }

    public void setStartDate(Date startDate) {
        this.startDate = startDate;
    }

    public List<MajorEvent> getMajorEvents() {
        return this.majorEvents;
    }

    public void setMajorEvents(List<MajorEvent> majorEvents) {
        this.majorEvents = majorEvents;
    }

    public ExecSummary getExecSummary() {
        return execSummary;
    }

    public void setExecSummary(ExecSummary execSummary) {
        this.execSummary = execSummary;
    }

} 
```

转换器

我不知道它是否需要转换器，但是我不知道如何编码。

```
package com.weeklyreport.converters;

import javax.faces.component.UIComponent;
import javax.faces.context.FacesContext;
import javax.faces.convert.Converter;
import javax.faces.convert.FacesConverter;

import com.jira.entity.ProjectDetail;

@FacesConverter(value="ObjectStringConv")
public class ObjectStringConv implements Converter {

    @Override
    public Object getAsObject(FacesContext context, UIComponent component, String svalue) {
        System.out.print("String version of object is:" + svalue);
        return "test";
    }

    @Override
    public String getAsString(FacesContext context, UIComponent component, Object ovalue) {

            return ovalue.toString();
        }

    } 
```

请帮我解决这个问题。有没有办法像这样获取实体对象的实例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T13:40:16.507

`ProjectDetail`您的转换器需要以这种方式编写，以便它可以`String`在`ProjectDetail`. 通常实体有一个`id`. 您需要将其用作`String`值。这是一个没有任何琐碎检查（如 null 和 instanceof）的启动示例：

```
@Override
public String getAsString(FacesContext context, UIComponent component, Object value) {
    // Convert ProjectDetail to its unique String representation.
    ProjectDetail projectDetail = (ProjectDetail) value;
    String idAsString = String.valueOf(projectDetail.getId())
    return idAsString;
}

@Override
public Object getAsObject(FacesContext context, UIComponent component, String value) {
    // Convert unique String representation of ProjectDetail back to ProjectDetail object.
    Long id = Long.valueOf(value);
    ProjectDetail projectDetail = someProjectDetailService.find(id);
    return projectDetail;
} 
```

请注意，在 JSF 转换器（和验证器）中使用 EJB 需要一些技巧。另请参阅[如何在 @FacesConverter 中注入 @EJB、@PersistenceContext、@Inject、@Autowired 等？](https://stackoverflow.com/questions/7665673/jsf2-can-i-use-ejb-to-inject-a-service-into-a-facesconverter)

# c# - 如何记录提交表单的链接点击？

> ID：10968725
> 
> 赞同：2
> 
> 时间：2012-06-10T12:32:52.850
> 
> 标签：c#, javascript, jquery, asp.net, events

我想跟踪用户活动（日志数据）。我在页面上有几个链接通过特定方式提交表单。问题是：

我找不到合适的方法来处理点击事件并以简单的方式将日志插入数据库。

**我的代码：**

```
HtmlGenericControl a = new HtmlGenericControl("a");
a.Attributes["onclick"] = "$('#" + frm.ClientID + "').submit();";
a.InnerText = "site " + dt_list.ElementAtOrDefault(0).Field<string>("pro_name").TrimEnd();
inner_li_1.Controls.Add(a); 
```

* * *

现在我想处理提交链接的点击事件？！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T12:50:37.843

这太多了，它的工作原理如何，我在某些情况下使用它，我无法以其他方式使用它。

javascript调用，我先调用日志，然后继续提交。当我点击时，我还显示了一条等待消息，事件发生得太快了，用户不明白这是在等待什么。我还注意避免使用简单的 javascript 对操作进行双重记录。`onclick`我在事件中调用此函数。

```
var confirmSubmited = false;
function SubmitWithLog(me)
{
    // to avoid many clicks...
    if(confirmSubmited)
      return false;

    confirmSubmited=true;

    jQuery.ajax({
        url: "/LogAction.ashx",
        type: "GET",
        timeout: 3000,
        async: true, // you can try and async:false - maybe is better for you
        data: action=4, // here you send the log informations
        cache: false,
        success: function(html) {
            jQuery("#FormID").submit();
        },
        error: function(responseText, textStatus, XMLHttpRequest) {                 
            jQuery("#FormID").submit();
        }
    });

    return false;
} 
```

处理程序是

```
public class LogAction : IHttpHandler
{
    public void ProcessRequest(HttpContext context)
    {
                // log here what you wish

                // end up with no content
        context.Response.TrySkipIisCustomErrors = true;
        context.Response.Status = "204 No Content";
        context.Response.StatusCode = 204;          
    }
} 
```

**我想明确**一点，这不是记录用户操作的好方法，但是当你不能这样做时，它是一种方法。我只使用它，当用户提交并离开我的站点并转到另一个站点时，我使用它来编写此操作。

在所有其他情况下，我在 url 中使用 ether 作为引用，ether 在后面生成登录代码，ether 我在 html 页面中包含一个空图像，使日志如下所示：[ASP server stats for html pages](https://stackoverflow.com/questions/9786125/asp-server-stats-for-html-pages/9786345#9786345)

我尝试调用ajax，并以正确的方式进行提交，但失败了，ajax 被提交停止。下一种方法是使用超时，调用 ajax，并将超时设置为 500 毫秒以进行提交，但我避免了超时，因为我已经完成了 ajax 调用花费不到 100 毫秒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T14:12:08.030

@Aristos - 为什么在继续事件之前等待记录日志的 Ajax 调用返回来对用户体验产生负面影响（单击、提交等...）？！？日志记录是应用程序的非关键部分，用户体验不会根据其结果而改变。这是一个“发送并忘记”类型的例程。触发 Ajax 请求，将成功和失败例程留空，并在紧跟 $.ajax(); 之后的行执行提交。称呼。

所以，给你一些伪代码......

```
function handleClick(e) {
    handleLoggingOnClick("something happened here");

    myForm.submit();
}

function handleLoggingOnClick(message) {
    $.ajax({url:"logging.do", data:"message="+message});  
} 
```

# html - 如何垂直对齐到具有定义宽度/高度的 div 内容的中心？

> ID：10968726
> 
> 赞同：110
> 
> 时间：2012-06-10T12:33:03.830
> 
> 标签：html, css, vertical-alignment

在定义的宽度/高度中垂直居中任何内容的正确方法是什么`div`。

在[示例](http://jsfiddle.net/Sha6m/)中，有两个高度不同的内容，使用 class 垂直居中的最佳方法是什么`.content`。（它适用于每个浏览器，没有解决方案`table-cell`）

有一些解决方案，但想知道其他想法，一个是使用`position:absolute; top:0; bottom: 0;`and `margin auto`。

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2012-06-10T12:40:34.647

我对此进行了一些研究，发现您有四个选择：

## 版本 1：显示为表格单元格的父 div

如果你不介意`display:table-cell`在你的父 div 上使用，你可以使用以下选项：

```
.area{
    height: 100px;
    width: 100px;
    background: red;
    margin:10px;
    text-align: center;
    display:table-cell;
    vertical-align:middle;
}​ 
```

[现场演示](http://jsfiddle.net/Sha6m/8/)

* * *

## 版本 2：带有显示块和内容显示表格单元的父 div

```
.area{
    height: 100px;
    width: 100px;
    background: red;
    margin:10px;
    text-align: center;
    display:block;
}

.content {
    height: 100px;
    width: 100px;
    display:table-cell;
    vertical-align:middle;    
}​ 
```

[现场演示](http://jsfiddle.net/Sha6m/17/)

* * *

## 版本 3：父 div 浮动和内容 div 作为显示表格单元格

```
.area{
    background: red;
    margin:10px;
    text-align: center;
    display:block;
    float: left;
}

.content {
    display:table-cell;
    vertical-align:middle;
    height: 100px;
    width: 100px;
}​ 
```

[现场演示](http://jsfiddle.net/Sha6m/16/)

* * *

## 版本 4：父 div 位置相对于内容位置绝对

我在这个版本中遇到的唯一问题是，您似乎必须为每个特定的实现创建 css。这样做的原因是内容 div 需要具有您的文本将填充的设置高度，并且margin-top 将被计算出来。这个问题可以在演示中看到。您可以通过更改内容 div 的高度 % 并将其乘以 -.5 来获得您的 margin-top 值，手动使其适用于每个场景。

```
.area{
    position:relative; 
    display:block;
    height:100px;
    width:100px;
    border:1px solid black;
    background:red;
    margin:10px;
}

.content { 
    position:absolute;
    top:50%; 
    height:50%; 
    width:100px;
    margin-top:-25%;
    text-align:center;
}​ 
```

[现场演示](http://jsfiddle.net/Sha6m/22/)

* * *

## 回答 #2

> 赞同：83
> 
> 时间：2017-12-28T13:41:10.653

这也可以`display: flex`只使用几行代码来完成。这是一个例子：

```
.container {
  width: 100px;
  height: 100px;
  display: flex;
  align-items: center;
} 
```

[现场演示](https://jsfiddle.net/s1cnpxcm/)

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2016-06-26T21:40:24.620

我在这篇[文章中找到了这个解决方案](http://zerosixthree.se/vertical-align-anything-with-just-3-lines-of-css/)

```
.parent-element {
  -webkit-transform-style: preserve-3d;
  -moz-transform-style: preserve-3d;
  transform-style: preserve-3d;
}

.element {
  position: relative;
  top: 50%;
  transform: translateY(-50%);
} 
```

如果元素的高度不固定，它就像一个魅力。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-12T20:51:28.157

将 div 的内容垂直居中的简单技巧是将行高设置为与高度相同：

```
<div>this is some line of text!</div>
div {
width: 400px
height: 50px;
line-height: 50px;
} 
```

但这仅适用于一行文本！

最好的方法是使用 div 作为容器和一个带有值的跨度：

```
.cont {
  width: 100px;
  height: 30px;
  display: table;
}

.val {
  display: table-cell;
  vertical-align: middle;
}

    <div class="cont">
      <span class="val">CZECH REPUBLIC, 24532 PRAGUE, Sesame Street 123</span>
    </div> 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2021-01-18T12:07:53.740

我会说添加一个带有句点的段落，并像这样设置它的样式：

```
<p class="center">.</p>

<style>
.center {font-size: 0px; margin-bottom: anyPercentage%;}
</style> 
```

您可能需要玩弄百分比才能正确

* * *

## 回答 #6

> 赞同：-8
> 
> 时间：2014-05-29T18:34:23.087

边距：all_four_margin

通过为 all_four_margin 提供 50% 将元素放置在中心

`style="margin: 50%"`

您也可以将其应用于以下

边距：右上左下

边距：右上和左下

边距：上&下右&左

通过给出适当的 % 我们可以在任何我们想要的地方获得元素。

# c# - 检查 XNA 中精灵的边框？

> ID：10968728
> 
> 赞同：0
> 
> 时间：2012-06-10T12:33:12.210
> 
> 标签：c#, xna, xna-4.0

我正在尝试使用 Window.ClientBounds.Width 来检查精灵是否在窗口边框内。我想在 Game1.cs 之外的另一个类中使用它。假设我有一个 Car.cs 类，并且在该类中我想有一个自己的 Update 方法来检查它是否在窗口的边界内，但是我不能使用 Window.ClientBounds.Width 这个！？我还测试了创建一个静态 int gameBorder = Window.ClientBounds.Width; 在 Game1.cs 中并以这种方式达到值，但这也不起作用？！帮助是preciated！谢谢！

对于免费的 XNA 问题，有没有比 stackowerflow 更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T19:02:25.397

在构建 Car 类时，我将传递对应该作为汽车一部分的 Game 或应该在其上显示的 GraphicsDevice 的引用。

```
class Car
{
   // Keep a reference to the game inside the car class.
   Game game;

   public Car (Game game)
   { 
      this.game = game;
   }

   public void Update(.....
   { 
       // You can access the client bounds here.
       // the best thing about this method is that
       // if the bounds ever changes, you don't have
       // to notify the car, it always has the correct
       // values.
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T15:29:55.857

没有必要去做所有的工作，浪费所有的记忆。

XNA 有一个非常精确和特定的测试对象位置的方法。

您可以简单地传入 GraphicsDeviceManager graphics.PreferredBackBufferWidth 和 Height 方法来获取窗口的宽度和高度。

从那里，您可以根据对象是否在这些位置的矩形内来了解对象是否在游戏窗口中可见。

因此，假设您将后台缓冲区的宽度和高度设置为 640x480。

然后您只需检查纹理的边界是否在该矩形内。

所以，这是你的功能：

```
public void CheckIfWithinWindow(int width, int height)
{
    Rectangle wndRect = new Rectangle(0, 0, width, height);
    Rectangle carRect = new Rectangle(carPos.X, carPos.Y, carTexture.Width, carTexture.Height);

    if (wndRect.Intersects(carRect))
    {
         //carTexture is within currently visible window bounds!
    }
    else
    {
         //carTexture is NOT within currently visible window bounds!
    }
} 
```

然后你可以像这样在你的起始 XNA 类中从你的更新方法调用这个函数。

```
public void Update(GameTime gameTime)
{
     myCar.CheckIfWithinWindow(graphics.PreferredBackBufferWidth, graphics.PreferredBackBufferHeight);
} 
```

希望有帮助。玩得开心。

# android - 设计具有多个 ImageButtons 和 Buttons 的布局

> ID：10968730
> 
> 赞同：0
> 
> 时间：2012-06-10T12:33:37.310
> 
> 标签：android, android-layout

我必须制作如下图所示的布局（3 x 3 网格中的每个块都是一个 ImageButton，每个 ImageButton 在底部都有文本和一个小图像）：-

[![布局](../Images/1ed653238fde68dc05b5a6c4aa230449.png)](https://i.stack.imgur.com/4u6KF.png)

我想我可以使用 TableLayout，但问题是我想将所有组件都放在一个屏幕上，而不需要任何额外的滚动。当我使用 LinearLayout 时，imageButtons 相互重叠，我该如何避免呢？

我希望 ImageButtons 填满屏幕的宽度，但 match_parent 没有帮助。我应该修复 ImageButtons 的大小吗？但我希望布局适用于所有屏幕，而不是仅适用于一个屏幕。

如果我在 TableLayout 中也包含按钮（作为单独的行），那么它们的大小为 ImageButton，wrap_content 无效。而且我不知道如何将它们放在中心。

请提出一些建议。还有其他布局建议吗？我没有使用 GridLayout，因为该应用程序适用于 GingerBread（Android API 10）。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T12:44:38.250

我会使用： - 线性布局，方向：垂直 - 作为外部布局 - 线性布局，方向：水平 - 对于每一行。将其中 3 个“项目”中的任何一个的布局权重设置为 33。

每个项目包括：图像按钮，文本和图像 - 线性布局，方向：垂直，以及文本和图像：再次，线性布局，方向：水平。

图像按钮：将宽度设置为 fill_parent。您可以相应地匹配高度。

# ruby-on-rails - 如果前一个元素存在，则添加间隔文本

> ID：10968732
> 
> 赞同：0
> 
> 时间：2012-06-10T12:33:47.050
> 
> 标签：ruby-on-rails, ruby-on-rails-3

使用 Rails 3。这是一个前端设计问题。

目标：

```
Contact | Email | URL 
```

显示.html.erb：

```
<% if !@shop.contact.blank? %>
  <%= @shop.contact %>
<% end %>
<% if !@shop.email.blank? %>
  <%= @shop.email %>
<% end %>
<% if !@shop.url.blank? %>
  <%= link_to @shop.url, @shop.url, :target => "_blank" %>
<% end %> 
```

`|`仅当前后元素具有值时，如何输入？在当前阶段，如果没有值，则不输出任何内容。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T12:37:43.533

```
<% url = link_to(@shop.url, @shop.url, :target => "_blank") if @shop.url.present? %>
<%= [@shop.contact, @shop.email, url].select(&:present?).join(" | ") %> 
```

这将创建一个包含所有元素的数组，选择那些具有值的元素（`present?`与 相反`blank?`），然后通过在它们之间放置一个管道来连接剩余数组的每个元素。

也就是说，如果您有更复杂的逻辑，您可能应该创建一个辅助方法。ERB 模板不是复杂逻辑的好地方。以上是可以接受的。

# java - 为什么递增 Java int 最终会导致负数？

> ID：10968733
> 
> 赞同：4
> 
> 时间：2012-06-10T12:33:47.553
> 
> 标签：java

我试图检查不同的输入并在java中创建无限循环，我发现一旦`int`超过最大限制它就会变成负数`-2147482958`。我只是在无限循环中增加 int ......

### 代码：

```
public static void infiniteLoop(){
        for(int i=0;i>-1;i++){
            i = i + 1000;
            System.out.println(i);
        }
    } 
```

最后一个 to 值被打印出来是，

```
2147483337
-2147482958 
```

现在，为什么它会变成负数？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-10T12:35:20.353

> 为什么会变成负数？

因为这是在 Java 中指定在`int`计算溢出时发生的事情。

[JLS 15.18.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.18.2)

> *“如果整数加法溢出，则结果是数学和的低位，以某种足够大的二进制补码格式表示。如果发生溢出，则结果的符号与两个操作数值的数学和。”*

* * *

（这并没有明确说溢出总是给出一个负数。它并不总是。但是如果你应用这个规则，它确实解释了为什么递增`Integer.MAX_VALUE`给`+1`你`Integer.MIN_VALUE`......）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-10T12:48:12.447

根据文档：

int 数据类型是一个 32 位有符号二进制补码整数。它的最小值为 -2,147,483,648 (0x80000000)，最大值为 2,147,483,647 (0x7FFFFFFF)（含）

因此，当您将整数的最大值加一时：

0x7FFFFFFF + 0x00000001 = 0x80000000 (-2,147,483,648)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-10T12:37:28.603

因为当 int 的值达到[Integer.MAX_VALUE](http://java.sun.com/javase/6/docs/api/java/lang/Integer.html#MAX_VALUE)时，增加它会导致**溢出**并因此环绕到[Integer.MIN_VALUE](http://java.sun.com/javase/6/docs/api/java/lang/Integer.html#MIN_VALUE)。

要使用更大的整数，请使用具有**64 位的****long**代替。

 *** * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-10T12:36:36.850

因为`int`范围从 -2,147,483,648 到 2,147,483,647。因此，一旦达到上限，它就会溢出并从负数开始。

请参阅[文档](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)：

*int 数据类型是一个 32 位有符号二进制补码整数。它的最小值为-2,147,483,648，最大值为2,147,483,647（含）***

# macos - 无法使用 cvLoadImage() 加载图像；

> ID：10968736
> 
> 赞同：0
> 
> 时间：2012-06-10T12:34:21.187
> 
> 标签：macos, qt, opencv

我正在研究 Qt 和 osX。我加载图像的代码是：

...

```
IplImage* image = cvLoadImage("Users/myName/Desktop/img1.png",1);
cvNamedWindow("Example", CV_WINDOW_AUTOSIZE);
cvShowImage("Example", image); 
```

...

有什么问题吗？（我尝试过 jpg 和其他格式）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:17:36.487

确保您的图像存在。您可能希望在加载图像后添加一些错误检查，以查看这是否确实是您的问题所在。

```
IplImage* image = cvLoadImage("Users/myName/Desktop/img1.png",1); 
if(image == NULL)
    printf("image not loaded \n")
else
    printf("Loaded image size %dx%d \n",image->width(),image->height()); 
```

还可以`cvWaitKey(0)`在显示图像后添加。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-11T04:04:47.140

尝试另一个绝对目录，例如“C:/Image/abc.jpg”。确定图片的类型是正确的jpg、jpeg、...如果还是不能解决你的问题，试试最新版的opencv。希望这有帮助。

# c++ - Lua/C++/luabind/与其他lua行为脚本交互的成员函数延迟执行

> ID：10968746
> 
> 赞同：1
> 
> 时间：2012-06-10T12:36:02.427
> 
> 标签：c++, lua, luabind

我有一个带有主循环的游戏 - 在每个循环上，我都调用游戏中的每个 NPC ->ProcessAI() 来执行任何动作。这是一个服务器，因此不会像客户端游戏那样在每一帧上都执行对 ProcessAI 的调用！它也是单线程的。

现在我想使用 luabind 用 lua 扩展 C++ 代码库（也许，即使有提升开销）。所以我将我的 NPC 类的一些功能暴露给 LUA。

例如，我想创建演员脚本 - 具有更复杂行为的老板战斗 - 每当在我的 c++ ProcessAI 函数中发生事件时 - 我会将其委托给特定 NPC 的相应 lua 脚本。

我想象在我的 boss.lua 脚本中我会有这样的东西

```
 function OnEngageCombat(NPC)
 NPC:say ("Some taunts...")
 ScheduleEvent(CastEvilSpell,/*time*/2000,/*numExecutions*/1,)
 end

 function CastEvilSpell(NPC)
 NPC:CastSpell("someSpell")
 end 
```

但是-我不知道该怎么做-我认为 ScheduleEvent 应该是导出到 Lua 的一些 C++ 函数-但是保持 NPC（老板）的对象引用并在该脚本中调用函数的最佳方法是什么大约 2 秒后？

此外，随着这种延迟执行——我希望 NPC 可以相互交互——我目前的想法是为每个特殊的 NPC 设置一个演员行为脚本。

现在我想象的是在两个 NPC 之间发起对话，例如

```
function DoGossip(NPC)
// check if NPC1 is close to NPC2
if NPC:DistanceToNpc("SomeGuy") < 10 then
 StartConversation1()
end

function StartConversation1(NPC)
NPC:Say("Hello ...")
// wait a moment now trigger NPC2 to reply
????
end 
```

基本上 - 我如何从 lua scriptA 中调用一个函数，该函数存在于 lua scriptB 中，它是 NPC2 的行为脚本。什么是好的设计？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T17:35:07.917

如果您使用 LuaBind，您可以设置一个全局可编写脚本的对象，该对象引用您公开给脚本的游戏引擎的包装类。

因此，无论何时设置 lua 引擎，都可以注册一个希望所有脚本都可以访问的全局变量，就像在 C++ 代码中这样：

```
luabind::globals(m_pLuaState)["Game"] = m_pGameWrapperClass; 
```

然后，在您的脚本中，您可以简单地引用 Game 对象来获得游戏特定的功能，如下所示：

```
Game:ScheduleEvent(...) 
```

您的 C++ 游戏包装类将只实现您将与 LuaBind 绑定的 ScheduleEvent 函数。您可以根据需要在该对象上添加/注册尽可能多的游戏特定功能。

要进入你的问题 2，你可以简单地在你的 Game 类上注册一个名为 FindNPC() 的函数，它接受一个字符串参数或 id 或其他可以在你的引擎中查找 npc 的东西，并返回对它的引用。您可能希望围绕 npc 对象编写一个包装类，该类公开 npc-y 功能，就像您对 Game 类所做的那样，FindNPC() 将返回代表 NPC 的用户数据，并公开任何必要的功能使用它，或者让它在游戏本身中做一些事情。

# php - jQuery级联下拉问题

> ID：10968748
> 
> 赞同：0
> 
> 时间：2012-06-10T12:36:25.490
> 
> 标签：php, jquery, html, drop-down-menu

我已经在这里得到了一些帮助，但不幸的是，我仍在为级联下拉菜单而苦苦挣扎。我需要根据上面的一个框`<select>`的选择来更新下面的内容。`#city``<select>`

我的代码中是否有任何明显的错误？

HTML/jQuery:

```
<select name="club" class="dropdown" id="club">
<script>

$('#city').change(function(){
    var $club = $('#club');
    $club.find('option:not([value="default"])').remove(); //Remove previous items
    $.getJSON('getClubs.php', {city:$(this).val()}, function(clubs){
        $.each(clubs, function(index, city){
            $club.append('<option value="'+row[0]+'">'+row[1]+'</option>');
        });
    });
});

</script>
</select> 
```

PHP (getClubs.php):

```
<?php

date_default_timezone_set('Europe/London');

$day = date("l");
$time = date("G");

if ($time >= 21) {
    $day = date('l', strtotime($day .' +1 day'));
    }

$city = $_POST['city'];

if ($day == Monday) {
    $query = "SELECT name FROM nights WHERE city = '$city' ORDER BY FIELD(day, 'MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY', 'SATURDAY', 'SUNDAY')";
    }

else if ($day == Tuesday) {
    $query = "SELECT name FROM nights WHERE city = '$city' ORDER BY FIELD(day, 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY', 'SATURDAY', 'SUNDAY', 'MONDAY')";
    }

else if ($day == Wednesday) {
    $query = "SELECT name FROM nights WHERE city = '$city' ORDER BY FIELD(day, 'WEDNESDAY', 'THURSDAY', 'FRIDAY', 'SATURDAY', 'SUNDAY', 'MONDAY', 'TUESDAY')";
    }

else if ($day == Thursday) {
    $query = "SELECT name FROM nights WHERE city = '$city' ORDER BY FIELD(day, 'THURSDAY', 'FRIDAY', 'SATURDAY', 'SUNDAY', 'MONDAY', 'TUESDAY', 'WEDNESDAY')";
    }

else if ($day == Friday) {
    $query = "SELECT name FROM nights WHERE city = '$city' ORDER BY FIELD(day, 'FRIDAY', 'SATURDAY', 'SUNDAY', 'MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY')";
    }

else if ($day == Saturday) {
    $query = "SELECT name FROM nights WHERE city = '$city' ORDER BY FIELD(day, 'SATURDAY', 'SUNDAY', 'MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY')";
    }

else if ($day == Sunday) {
    $query = "SELECT name FROM nights WHERE city = '$city' ORDER BY FIELD(day, 'SUNDAY', 'MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY', 'SATURDAY')";
    }

    $result = mysql_query($query);
    $items = array();

    if($result && mysql_num_rows($result) > 0) { 
        while ($row = mysql_fetch_array($result)) { 
            $items[] = array( $row[0], $row[1] );
            }         
    } 

    mysql_close(); 
    // convert into JSON format and print
    echo json_encode($items);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T07:28:53.500

我认为这些将是您的代码的问题：

```
 1\.  Take look the html code?
      <select name="club" class="dropdown" id="club">
      </script>

     Question:
      Why you have to trigger this $("#city") neither to use  of $('.dropdown') or $('#club')  itself. Is that be posible to trigger the option ? I think its not .

     try:

           $('.dropdown').change(function(){
              var $club = $('#club');
             $club.find('option:not([value="default"])').remove(); //Remove previous items
                $.getJSON('getClubs.php', {city:$(this).val()}, function(clubs){
               $.each(clubs, function(index, city){
            $club.append('<option value="'+row[0]+'">'+row[1]+'</option>');
        });
     });
        });

  2\. Where is the variable $row coming from? 
```

# objective-c - 在 Objective C 中写入文件

> ID：10968750
> 
> 赞同：0
> 
> 时间：2012-06-10T12:36:34.290
> 
> 标签：objective-c

我只是想在Objective C中写入一个.txt文件。这是代码：

```
BOOL success = [str writeToFile:@"tmp/cool.txt" atomically:YES encoding:NSUTF8StringEncoding error:&error];

    if(success)
    {
        NSLog(@"done writing!");
    }
    else
    {
        NSLog(@"writing failed: %@", [error localizedDescription]);
    } 
```

此代码的输出是“文件夹cool.txt 不存在”。我不明白这一点，因为“.txt”会认为它是文件。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T12:50:59.080

我为你写了一个演示，假设你使用 iOS。

```
NSString *path = [NSHomeDirectory() stringByAppendingPathComponent:@"tmp"]; //get tmp path
NSString *filePath = [path stringByAppendingPathComponent:@"cool.txt"];

NSString *str = @"hello world";
NSError *error;
[str writeToFile:filePath atomically:YES encoding:NSUTF8StringEncoding error:&error];

NSString *str1 = [NSString stringWithContentsOfFile:filePath encoding:NSUTF8StringEncoding error:&error];
NSLog(@"%@", str1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T12:53:13.977

假设您使用 iOS 作为平台...

1.  您需要首先获取应用程序的文档目录，以便您可以写入该目录（您可以使用库或临时目录，但最常见的是文档目录）

2.  您必须确保文档目录下存在“tmp”目录。

# delphi - 从 TImage32（Graphics32 库）中删除垃圾 DFM 数据

> ID：10968762
> 
> 赞同：5
> 
> 时间：2012-06-10T12:38:23.143
> 
> 标签：delphi, graphics32

我有一个从 TImage32 派生的控件：

```
TChromaDisplay = class(TImage32) 
```

一切都很好，除了当我将 TChromaDisplay 放在表单上时，生成的 DFM 文件很大（300KB 而不是 <1KB），因为我在 Bitmap.Data 字段中保存了垃圾数据（它只是一个灰色图像）。每次我将控件放在表单上时，都会创建位图图像并用灰色填充。我不想将图像（垃圾）的内容保存到 DFM 文件，因为它会使 EXE 变大，但我不知道如何。

可能我需要在 TChromaDisplay.Create 的某个地方写下我的 TChromaDisplay 中没有保存/存储任何图像数据。但我不知道在哪里/如何做。

```
 object Display: TChromaDisplay
    Left = 0
    Top = 0
    Width = 1465
    Height = 246
    Bitmap.Data = {
      C0000000C0000000EBEBEBFFEBEBEBFFEBEBEBFFEBEBEBFFEBEBEBFFEBEBEBFF
      EBEBEBFFEBEBEBFFEBEBEBFFEBEBEBFFEBEBEBFFEBEBEBFFEBEBEBFFEBEBEBFF
      EBEBEBFFEBEBEBFFEBEBEBFFEBEBEBFFEBEBEBFFEBEBEBFFEBEBEBFFEBEBEBFF
      etc
      etc
      etc 
```

我在 Create 中尝试过，但无济于事：

```
Bitmap.Width := 1;
Bitmap.Height:= 1; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T16:13:38.967

这不是“垃圾”。它是一个图像（无论是您分配的图像还是控件在其构造函数中创建的图像）。它是位于位置 的位图`0`，`0`宽度和高度为 `1465`, `246`。

这`BitmapData`是位图中的数据（像素等），编码为十六进制字符串，因此它将进入文本 dfm。

解决方案是弄清楚位图是如何分配的。它是：

*   在组件的构造函数中（默认图像？）
*   在您的表单上（您已在 IDE 中分配了一个图像）
*   它没有从之前分配的 DFM 中删除。

第一个要求您仔细检查组件的源代码以找出它被分配的位置。您可以检查位图属性在内部调用的内容（例如，`FBitmap`或`FImage`），然后搜索它获得分配图像的位置（、、、、`LoadFromFile`等等`LoadFromStream`）。`LoadFromResource``Assign`

第二和第三：备份你的dfm以防万一。从表单中删除组件。注释掉与之相关的任何代码，以便您的单元编译。右键单击它，然后选择`View as Text`。搜索`TChromaDisplay`（或只是`TChroma`），并删除您在 dfm 中找到的所有相关内容。右键单击并`View as Form`选择 ，然后构建您的项目。回到 dfm 并确保所有的痕迹`TChroma`仍然消失。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T16:56:37.780

***更新：***

`GR32_Dsgn_Bitmap.pas`查看`TImage32.Bitmap`属性的设计时图像对话框，`Clear`那里的按钮使用将`Bitmap.Delete`位图大小设置为 0x0 的过程。因此，您可以尝试在保存表单流之前调用它来清除位图：

```
type
  TChromaDisplay = class(TImage32)
  protected
    procedure WriteState(Writer: TWriter); override;
  end;

implementation

procedure TChromaDisplay.WriteState(Writer: TWriter);
begin
  Bitmap.Delete;
  inherited;
end; 
```

但是它仍然没有解释为什么当你在表单上放置一个控件时你有一个位图数据。您还可以`Bitmap.Delete`在继承部分完成后（当`Bitmap`已经实例化时）在您的控件构造函数中调用 。

***仍然未经测试，因为我无法模拟您的问题。***

# javascript - 使用 Javascript 从弹出窗口中删除地址栏

> ID：10968763
> 
> 赞同：8
> 
> 时间：2012-06-10T12:38:33.473
> 
> 标签：javascript, jquery, asp.net, asp.net-mvc

是否适用于使用 javascript ex 从弹出窗口中删除地址栏：

```
 window.open(url, 'liveMatches', 'width=720,height=800,toolbar=0,location=0, directories=0, status=0, menubar=0'); 
```

请指教，

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-10T12:42:42.223

使用 jquery ui ( [http://jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/) )

也许

```
window.open(url,'liveMatches','directories=no,titlebar=no,toolbar=no,location=no,status=no,menubar=no,scrollbars=no,resizable=no,width=720,height=800'); 
```

**实际上**

您无法在现代浏览器中删除地址栏。那是一种安全措施。用户必须始终知道他们在哪个页面上。地址栏还让用户知道该页面上的安全类型（HTTP 或 HTTPS）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-10T12:47:32.087

理论上，是的。但是，与 Javascript 中的所有内容一样，不能保证任何给定的浏览器都会支持它，也不保证跨浏览器的实现是一致的。

[此链接](https://developer.mozilla.org/en/DOM/window.open)以及[此链接](http://msdn.microsoft.com/en-us/library/ie/ms536651%28v=vs.85%29.aspx)指示该`location`选项应控制是否显示位置/地址栏。它还应该具有相对良好的跨浏览器支持。

# c# - 将xml文件加载到内存中

> ID：10968764
> 
> 赞同：2
> 
> 时间：2012-06-10T12:38:46.827
> 
> 标签：c#, xml

我需要在内存中加载一个 xml 文件，以便我可以从不同的表单多次访问它。xml 格式如下：

```
 <Slides>
    <Slide>
      <Name>Name 1</Name>
      <Value>Value 1</Value>
      <Type>Type 1</Type>
    </Slide>
    <Slide>
      <Name>Name 2</Name>
      <Value>Value 2</Value>
      <Type>Type 2</Type>
    </Slide>
  </Slides> 
```

我不想使用数据库来存储变量。有没有其他方法可以将数据存储在内存中？现在我为每张幻灯片和流式阅读器使用一个 txt 文件，我确信这不是最好的选择。

编辑：我添加了这段代码，但我每次都可以得到幻灯片而无需再次读取 xml 文件吗？

```
 var slides = from s in XElement.Load("slides.xml").Elements("Slide")
                      select s;
        foreach (var slide in slides)
        {
            //code
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T12:44:50.897

您应该使用 XDocument 加载方法：http: [//msdn.microsoft.com/en-us/library/bb343181.aspx](http://msdn.microsoft.com/en-us/library/bb343181.aspx)

我认为使用 XDocument 比使用 XmlDocument 更好……但这取决于您的要求……

XDocument 比 XmlDocument 更优化内存，我认为它们都易于使用（用于从 xml 获取值）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T12:40:05.137

请参阅[XmlDocument](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)类。Load() 方法可以满足您的需求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T13:24:43.123

首先您必须将xml文件保存在您的项目文件或硬盘中。然后只有您可以在后面的代码中加载xml文件。您可以动态创建[xml文件](https://stackoverflow.com/questions/10705461/need-an-approach-to-generate-xml-dynamically/10958521#10958521)。它会好得多。

```
using System.Xml;

    XmlDocument myxml = new XmlDocument();
    myxml.Load("D:/sample.xml");//Load you xml file from you disk what you want to load
    string element_1 = myxml.GetElementsByTagName("Name")[0].InnerText;
    string element_2 = myxml.GetElementsByTagName("Value")[0].InnerText; 
    string element_3 = myxml.GetElementsByTagName("Value")[0].InnerText;
    string element_4 = myxml.GetElementsByTagName("Name")[1].InnerText;
    string element_5 = myxml.GetElementsByTagName("Value")[1].InnerText; 
    string element_6 = myxml.GetElementsByTagName("Value")[1].InnerText; 
```

试试这个程序，它会帮助你。

# mysql - MySQL选择其他表中没有匹配列的行

> ID：10968767
> 
> 赞同：36
> 
> 时间：2012-06-10T12:39:09.383
> 
> 标签：mysql, join, duplicates, unique

到目前为止，我似乎无法弄清楚这一点。我正在尝试连接两个表，并且只选择表 A 中在表 B 中没有匹配列的行。例如，假设我们有一个 users 表和一个 sent 表。

`users`表具有以下列：`id, username`
`sent`表具有以下列：`id, username`

我想选择表`users`中`username`不存在的所有行`sent`。因此，如果`tom`是 in`users`和 in，`sent`他将不会被选中。如果他在`users`但没有在，`sent`他将被选中。我试过这个，但它根本没有用：

```
SELECT pooltest.name,senttest.sentname 
FROM pooltest,senttest 
WHERE pooltest.name != senttest.sentname 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-06-10T12:47:25.810

通常，您会使用`NOT EXISTS`这种类型的查询

```
SELECT p.Name
FROM   pooltest p
WHERE  NOT EXISTS (SELECT s.Name
                   FROM   senttest s
                   WHERE  s.Name = p.Name) 
```

另一种方法是使用 a`LEFT OUTER JOIN`并检查`NULL`

```
SELECT p.Name
FROM   pooltest p
       LEFT OUTER JOIN senttest s ON s.Name = p.Name
WHERE  s.Name IS NULL 
```

*请注意，您使用的隐式连接语法被认为是过时的，应替换为显式连接。*

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-06-10T12:52:59.617

试试这个 SQL：

```
SELECT users.username
FROM  users
LEFT JOIN sent ON sent.username = users.username
WHERE sent.username IS NULL; 
```

我认为更好的方法是：

```
SELECT users.username
FROM  users
LEFT JOIN sent ON sent.id = users.id
WHERE sent.id IS NULL; 
```

由于两个 id 字段都将被编入索引（我会认为是主键），因此该查询将比我建议的第一个查询更好地优化。

但是，您可能会发现我的第一个建议对您更好，这取决于您对应用程序的要求。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2015-08-11T10:34:47.747

也许这个可以帮助你....

我也有同样的问题，但使用这个查询解决了

```
INSERT INTO tbl1 (id,name) SELECT id,name from tbl2 where (name) not in(select name from tbl1); 
```

希望这个能解决你的问题

# android - 部分选项菜单在 HTC One X 上隐藏

> ID：10968776
> 
> 赞同：1
> 
> 时间：2012-06-10T12:40:15.673
> 
> 标签：android, menu, htc-android

我正在开发一个天气应用程序，但在使用某些智能手机显示选项菜单时出现问题。我想显示一个包含 3 个选项的菜单，但在 HTC one X 上，只显示 2 个选项。

问题是屏幕底部的黑条隐藏了我菜单的第三个选项。

这是问题的截图：（我们应该看到“Recharger”、“Voir cette image”和最后一个选项：“Autres cartes”）

![在此处输入图像描述](../Images/fdbd1361ce81081f974b928987cccc20.png)

编码 ：

```
 public boolean onCreateOptionsMenu(Menu menu) {
    menu.add(0,100,0,m_res.getStringArray(R.array.menu_reload)[Commons.currentLanguage]).setIcon(R.drawable.reload); 
    menu.add(0,101,0,m_res.getStringArray(R.array.menu_view_single)[Commons.currentLanguage]).setIcon(R.drawable.see); 
    if(m_model.getUrl2().size() !=0)
        menu.add(0,102,0,m_res.getStringArray(R.array.menu_more)[Commons.currentLanguage]).setIcon(R.drawable.more); 
    SubMenu moreMaps = menu.addSubMenu(0,103,0,m_res.getStringArray(R.array.menu_others_maps)[Commons.currentLanguage]).setIcon(R.drawable.france); 
    if(m_time == 1)
    {
        for(int iBoucle = 0 ; iBoucle < m_model.getNames1().size() ; iBoucle++)
            moreMaps.add(1,iBoucle,1,m_model.getNames1().get(iBoucle));
    }
    else
    {
        for(int iBoucle = 0 ; iBoucle < m_model.getNames2().size() ; iBoucle++)
            moreMaps.add(1,iBoucle,1,m_model.getNames2().get(iBoucle));
    }
    onContextItemSelected(moreMaps.getItem());
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case 100:
        if(Commons.getNetworkState() || Commons.getWifiState())
        {
            eraseData();
            loadingData();
        }
        else
            Commons.getConnectivityErrorMessage(m_Context);
        return true;
    case 101:
        Intent sia  = new Intent(m_Context, SingleImageActivity.class);
        sia.putExtra("url", correctURL(m_urlImages.get(m_step)));
        sia.putExtra("choiceNumber", -1);
        if(m_textIsHour)
        {
            if(m_time == 1)
                sia.putExtra("title", m_model.getNames1().get(m_mode)+" - "+m_model.getHours1().get(m_step)+"h");
            else
                sia.putExtra("title", m_model.getNames2().get(m_mode)+" - "+m_model.getHours2().get(m_step)+"h");
        }
        startActivity(sia);
        break;
    case 102:
        if(Commons.getNetworkState() || Commons.getWifiState())
        {
            Intent modelSubList = new Intent(m_Context, ModelViewActivity.class);
            modelSubList.putExtra("model",m_modelNumber);
            modelSubList.putExtra("mode",m_mode);
            if(m_time == 1)
                modelSubList.putExtra("time",2);

            else
                modelSubList.putExtra("time",1);
            startActivity(modelSubList);
            finish();
        }
        else
        {                   
            Commons.getConnectivityErrorMessage(m_Context);
        }
        break;
    case 103:
        break;
    default:
        if(Commons.getNetworkState() || Commons.getWifiState())
        {
            Intent otherMapsIntent  = new Intent(m_Context, ModelViewActivity.class);
            otherMapsIntent.putExtra("model",m_modelNumber);
            otherMapsIntent.putExtra("mode",item.getItemId());
            otherMapsIntent.putExtra("time",m_time);
            startActivity(otherMapsIntent);
            finish();
            return true;
        }
        else
        {                   
            Commons.getConnectivityErrorMessage(m_Context);
            return false;
        }

    }

    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T00:11:58.657

此代码显示了我在这里拥有的美国和欧洲 One X 手机上的三个菜单选项： [https ://github.com/lnanek/Misc/tree/master/OneXFullscreenMenuTest](https://github.com/lnanek/Misc/tree/master/OneXFullscreenMenuTest)

你可以在你的设备上试试吗？如果它不起作用，那么我们知道它是您设备上的软件。如果它确实有效，那么它可能是您的代码中的某些内容。

你能发布更多关于你的情况吗？我对如何打开全屏和 AndroidManifest.xml 的代码（例如 uses-sdk 行和主题设置）特别感兴趣。

我在您发布的代码中没有看到任何错误，但是您可以注释掉这一行以快速检查吗？
if(m_model.getUrl2().size() !=0)

如果该检查没有通过，那么应该只有两个菜单项，而不是三个。因此，将其注释掉将是一种快速检查（当然，或者在调试器中查看是否调用了所有三个添加）。

请注意，onCreateOptionsMenu 仅在 Activity 实例第一次显示选项菜单时调用，而不是每次调用的 onPrepareOptionsMenu。因此，如果第一次没有添加第三个菜单选项，那么它永远不会。

# javascript - $("*") 例外？

> ID：10968780
> 
> 赞同：-3
> 
> 时间：2012-06-10T12:40:30.560
> 
> 标签：javascript, jquery

很久以前，一个朋友给我做了这个：

```
$(".rnd1").click(function(){
    $("*").click(function (event) {
        event.stopPropagation();
        $(this).fadeOut();
    });

    $('#random-button').hide();
    $('#recover-button').show();
}); 
```

现在我想保护一些元素（如body和#recover-button）不淡出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T12:43:09.693

您可以使用该[`not`](http://api.jquery.com/not/)方法来减少匹配的元素集：

```
$("*").not("#recover-button, body").click(function (event) {

}); 
```

您也可以使用`:not`选择器，但如 jQuery 文档中所述：

> .not() 方法最终将为您提供比将复杂的选择器或变量推入 :not() 选择器过滤器更易读的选择。在大多数情况下，这是一个更好的选择。

附带说明一下，通用选择器的使用通常是不受欢迎的。你真的想选择 DOM 中的每一个元素吗？这不是很有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T12:42:53.317

试试这个并取消选择 html 元素

```
$(".rnd1").click(function(){
    $("*:not('body'):not('#recover_button'):not(html)").click(function (event) {
      event.stopPropagation();
      $(this).fadeOut();
    });
    $('#random-button').hide();
    $('#recover-button').show();
  }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-10T13:04:28.100

为避免通用选择器问题，您可以使用[`$(...).on`](http://api.jquery.com/on/)委托事件：

```
$(body).on('click', "*:not(body, #recover_button)", function() {

}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T13:08:54.557

在其他人的答案（当然是正确的）之下，不要忘记您的“特殊元素”应该涵盖更多，以免使整个文档变得可隐藏。

因此，您还需要为`html`元素的父节点设置例外，您也不想隐藏这些节点。只有这样才能防止用户无法隐藏它们。

# ruby - ：符号和符号之间的区别：？

> ID：10968783
> 
> 赞同：1
> 
> 时间：2012-06-10T12:40:39.680
> 
> 标签：ruby

只是通过一个教程，并在我看到的某个地方思考

```
first_name: 
```

还有一个地方

```
:first_name 
```

这是正确的吗？有什么区别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T12:52:32.167

:first_name 是一个符号，而 first_name: 是新 Ruby 1.9.2 语法中的哈希键。

然后将哈希键转换为符号：

```
>> a = { foo: 10 , bar: 20 }
=> {:foo=>10, :bar=>20} 
```

和写法一样：

```
>> a = { :foo => 10, :bar => 20 }
=> {:foo=>10, :bar=>20} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-10T12:48:38.507

Ruby 1.9.2 中更改了哈希语法以更接近 json。

所以：

```
{ :foo => "bar" } 
```

是相同的：

```
{ foo: "bar" } 
```

在所有其他情况下，冒号必须排在第一位。

# jquery - qtips：如何通过点击功能禁用页面上的所有工具提示？

> ID：10968785
> 
> 赞同：0
> 
> 时间：2012-06-10T12:40:42.353
> 
> 标签：jquery, function, click, tooltip, qtip

我编写了以下脚本来隐藏我页面上的所有 qtip 工具提示，并使用 jquery cookie 插件设置 cookie。除了隐藏/禁用自页面加载以来悬停的工具提示之外，一切都运行良好。

```
<script type="text/javascript">
$(document).ready(function(){
    $("#hide_tips").click( function() {
        $.cookie('qtip_hidden', true, { path: '/', expires: 10 });
        $('.qtip').qtip('disable');
    });
});
</script> 
```

如何让它与页面上的所有工具提示一起使用？

谢谢，

缺口

**我正在使用的 qTip 脚本示例**

```
$('.tooltip[title]').qtip({
position: {
    my: 'top left', 
    at: 'bottom center'
},
style: {
    classes: 'ui-tooltip-rounded ui-tooltip-light'
},
show: {
    effect: function() { $(this).fadeIn(500); } 
},
hide: {
    effect: function() { $(this).fadeOut(500); } 
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T13:06:47.910

尝试这个：

```
var MyQtips = $('.tooltip[title]').qtip({
position: {
    my: 'top left', 
    at: 'bottom center'
},
style: {
    classes: 'ui-tooltip-rounded ui-tooltip-light'
},
show: {
    effect: function() { $(this).fadeIn(500); } 
},
hide: {
    effect: function() { $(this).fadeOut(500); } 
}
}); 
```

接着：

```
$(document).ready(function(){
    $("#hide_tips").click( function() {
        $.cookie('qtip_hidden', true, { path: '/', expires: 10 });
        $(MyQtips).qtip('disable'); //change
    });
}); 
```

# android - 我可以在 GINGERBREAD 或 ECLAIR 中使用 MODE_IN_COMMUNICATION 模式吗？

> ID：10968787
> 
> 赞同：2
> 
> 时间：2012-06-10T12:40:53.697
> 
> 标签：android, android-audiomanager

我想检测是否有`VoIP`呼叫已建立，我正在使用此代码

```
AudioManager Audio =  (AudioManager) getSystemService(Context.AUDIO_SERVICE); 
int mode = Audio.getMode(); 
```

[如 Android|Developers http://developer.android.com/reference/android/media/AudioManager.html#MODE_IN_COMMUNICATION](http://developer.android.com/reference/android/media/AudioManager.html#MODE_IN_COMMUNICATION)中所述，此代码在 API 级别 11 及更高版本上运行良好

有什么方法可以检测`MODE_IN_COMMUNICATION`旧 API 中的模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-14T08:30:39.177

是的，有任何方法可以检测旧 API 中的 MODE_IN_COMMUNICATION 模式。看看这个基于 SIP 的 VoIP [http://developer.android.com/about/versions/android-2.3.html](http://developer.android.com/about/versions/android-2.3.html) [http://developer.android.com/guide/topics/connectivity/sip.html](http://developer.android.com/guide/topics/connectivity/sip.html) 希望这会有所帮助。

# iphone - 如何从 iOS 应用程序执行 URL 请求？

> ID：10968794
> 
> 赞同：2
> 
> 时间：2012-06-10T12:42:24.350
> 
> 标签：iphone, objective-c, cocoa-touch, url

我想向服务器发送以下请求。服务器已经知道如何处理它，但是我该如何发送呢？

```
http://www.********.com/ajax.php?script=logoutUser&username=**** 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-10T12:43:32.417

对于同步请求，您将执行以下操作：

```
NSURL *url = [NSURL URLWithString:@"http://www.********.com/ajax.php?script=logoutUser&username=****"];
NSURLRequest *request = [NSURLRequest requestWithURL:url];

NSURLResponse *response;
NSError *error;
//send it synchronous
NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
// check for an error. If there is a network error, you should handle it here.
if(!error)
{
    //log response
    NSLog(@"Response from server = %@", responseString);
} 
```

**更新**：做一个异步请求请参考这个[例子](https://gist.github.com/106457)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T21:07:23.787

你可以做：

```
NSString *resp = [NSString stringWithContentsOfURL:url usedEncoding:enc error: &error]; 
```

# java - 上传安卓手机拍摄的图片

> ID：10968805
> 
> 赞同：0
> 
> 时间：2012-06-10T12:44:30.263
> 
> 标签：java, android

我正在制作一个应用程序，它将上传从 android 手机拍摄的图像。在我当前的代码中，我的 if 条件之一变为 true，即返回 0，因此我的函数停止工作，并且它也不会将图像上传到服务器。

这是我的代码

```
public class Camera extends Activity {
ImageView ivUserImage;
Button bUpload;
Intent i;
int CameraResult = 0;
Bitmap bmp;

int serverResponseCode = 0;
ProgressDialog dialog = null;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.camera);

    ivUserImage = (ImageView)findViewById(R.id.ivUserImage);
    bUpload = (Button)findViewById(R.id.bUpload);
    openCamera();
}

private void openCamera() {
    i = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
    startActivityForResult(i, CameraResult);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    super.onActivityResult(requestCode, resultCode, data);

    if(resultCode == RESULT_OK) {
        Bundle extras = data.getExtras();
        //Log.e("Image: ", data.toString());
        bmp = (Bitmap) extras.get("data");
        ivUserImage.setImageBitmap(bmp);

        bUpload.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                dialog = ProgressDialog.show(Camera.this, "", "Uploading file...", true);
                 new Thread(new Runnable() {
                        public void run() {
                             runOnUiThread(new Runnable() {
                                public void run() {
                                    //tv.setText("uploading started.....");
                                    Toast.makeText(getBaseContext(), "File is uploading...", Toast.LENGTH_LONG).show();
                                }
                             });
                         int response= uploadFile(bmp.toString());
                         //Log.e("Response: ", response);
                         System.out.println("RES : " + response);
                        }
                      }).start();
                }
        });
    }
}

public int uploadFile(String sourceFileUri) {

    String upLoadServerUri = "http://www.example.info/androidfileupload/index.php";
    String fileName = sourceFileUri;
    //Toast.makeText(getApplicationContext(), sourceFileUri, Toast.LENGTH_LONG).show();
    HttpURLConnection conn = null;
    DataOutputStream dos = null;
    String lineEnd = "\r\n";
    String twoHyphens = "--";
    String boundary = "*****";
    int bytesRead, bytesAvailable, bufferSize;
    byte[] buffer;
    int maxBufferSize = 1 * 1024 * 1024;

    File sourceFile = new File(sourceFileUri);
    if (!sourceFile.isFile()) {
        Log.e("uploadFile", "Source File Does not exist");
        return 0;
    }

    try { 
        // open a URL connection to the Servlet
        FileInputStream fileInputStream = new FileInputStream(sourceFile);
        URL url = new URL(upLoadServerUri);
        conn = (HttpURLConnection) url.openConnection(); // Open a HTTP  connection to  the URL
        conn.setDoInput(true); // Allow Inputs
        conn.setDoOutput(true); // Allow Outputs
        conn.setUseCaches(false); // Don't use a Cached Copy
        conn.setRequestMethod("POST");
        conn.setRequestProperty("Connection", "Keep-Alive");
        conn.setRequestProperty("ENCTYPE", "multipart/form-data");
        conn.setRequestProperty("Content-Type", "multipart/form-data;boundary=" + boundary);
        conn.setRequestProperty("uploaded_file", fileName);
        dos = new DataOutputStream(conn.getOutputStream());

        dos.writeBytes(twoHyphens + boundary + lineEnd);
        dos.writeBytes("Content-Disposition: form-data; name=\"uploaded_file\";filename=\""+ fileName + "\"" + lineEnd);
        dos.writeBytes(lineEnd);

        bytesAvailable = fileInputStream.available(); // create a buffer of  maximum size

        bufferSize = Math.min(bytesAvailable, maxBufferSize);
        buffer = new byte[bufferSize];

         // read file and write it into form...
        bytesRead = fileInputStream.read(buffer, 0, bufferSize);  

        while (bytesRead > 0) {
             dos.write(buffer, 0, bufferSize);
             bytesAvailable = fileInputStream.available();
             bufferSize = Math.min(bytesAvailable, maxBufferSize);
             bytesRead = fileInputStream.read(buffer, 0, bufferSize);
        }

        // send multipart form data necesssary after file data...
        dos.writeBytes(lineEnd);
        dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);

        // Responses from the server (code and message)
        serverResponseCode = conn.getResponseCode();
        String serverResponseMessage = conn.getResponseMessage();

        Log.i("uploadFile", "HTTP Response is : " + serverResponseMessage + ": " + serverResponseCode);
        if(serverResponseCode == 200){
            runOnUiThread(new Runnable() {
                 public void run() {
                     //tv.setText("File Upload Completed.");
                     Toast.makeText(Camera.this, "File Upload Complete.", Toast.LENGTH_SHORT).show();
                 }
            });
        }    

        //close the streams //
        fileInputStream.close();
        dos.flush();
        dos.close();

    } catch (MalformedURLException ex) {
        dialog.dismiss();
        ex.printStackTrace();
        Toast.makeText(Camera.this, "MalformedURLException", Toast.LENGTH_SHORT).show();
        Log.e("Upload file to server", "error: " + ex.getMessage(), ex);
    } catch (Exception e) {
        dialog.dismiss();
        e.printStackTrace();
        Toast.makeText(Camera.this, "Exception : " + e.getMessage(), Toast.LENGTH_SHORT).show();
        Log.e("Upload file to server Exception", "Exception : " + e.getMessage(), e);
    }

    dialog.dismiss();
    return serverResponseCode;
}

} 
```

在我的 uploadFile() 方法中，此条件变为 true `if (!sourceFile.isFile()) { Log.e("uploadFile", "Source File Does not exist"); return 0; }`。

从相机拍摄的上传图像如何解决这个问题？

**更新**

这是我的日志猫

```
06-10 16:30:08.595: D/CLIPBOARD(27966): Hide Clipboard dialog at Starting input: finished by someone else... !
06-10 16:30:10.305: D/PhoneWindow(27966): couldn't save which view has focus because the focused view com.android.internal.policy.impl.PhoneWindow$DecorView@4053eca0 has no id.
06-10 16:30:10.980: D/CLIPBOARD(27966): Hide Clipboard dialog at Starting input: finished by someone else... !
06-10 16:30:11.015: W/IInputConnectionWrapper(27966): showStatusIcon on inactive InputConnection
06-10 16:32:18.005: D/PhoneWindow(27966): couldn't save which view has focus because the focused view com.android.internal.policy.impl.PhoneWindow$DecorView@4053eca0 has no id.
06-10 16:32:38.890: D/dalvikvm(27966): GC_EXTERNAL_ALLOC freed 101K, 46% free 3097K/5639K, external 879K/1025K, paused 37ms
06-10 16:37:19.145: D/PhoneWindow(27966): couldn't save which view has focus because the focused view com.android.internal.policy.impl.PhoneWindow$DecorView@4053eca0 has no id.
06-10 16:39:01.805: E/uploadFile(27966): Source File Does not exist
06-10 16:39:01.805: I/System.out(27966): RES : 0
06-10 16:39:09.185: D/PhoneWindow(27966): couldn't save which view has focus because the focused view com.android.internal.policy.impl.PhoneWindow$DecorView@4053eca0 has no id.
06-10 16:39:09.475: D/CLIPBOARD(27966): Hide Clipboard dialog at Starting input: finished by someone else... ! 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T13:19:35.917

您通过此行发送位图字符串

int response=uploadFile(bmp.toString());

在这里您发送位图字符串。不要发送图像的路径。所以这个 (!sourceFile.isFile()) 行没有找到任何文件路径。

我认为这会造成问题。

你调试你的代码，帮助你找到问题。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T12:53:16.000

> 从相机拍摄的上传图像如何解决这个问题？

关注 Snippet 将对您有所帮助。

```
public void UploadImage(Bitmap bm) throws Exception {
        try {
            ByteArrayOutputStream bos = new ByteArrayOutputStream();
            bm.compress(CompressFormat.JPEG, 75, bos);
            byte[] data = bos.toByteArray();
            HttpClient httpClient = new DefaultHttpClient();
            HttpPost postRequest = new HttpPost(
                    "http://www.example.info/androidfileupload/index.php");
            ByteArrayBody bab = new ByteArrayBody(data, "forest.jpg");

            MultipartEntity reqEntity = new MultipartEntity(
                    HttpMultipartMode.BROWSER_COMPATIBLE);
            reqEntity.addPart("uploaded", bab);
            reqEntity.addPart("photoCaption", new StringBody("sfsdfsdf"));
            postRequest.setEntity(reqEntity);
            HttpResponse response = httpClient.execute(postRequest);
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    response.getEntity().getContent(), "UTF-8"));
            String sResponse;
            StringBuilder s = new StringBuilder();

            while ((sResponse = reader.readLine()) != null) {
                s = s.append(sResponse);
            }
            System.out.println("Response: " + s);
        } catch (Exception e) {
            // handle exception here
            Log.e(e.getClass().getName(), e.getMessage());
        }
    } 
```

# iphone - 显示别名游戏中心回合制游戏

> ID：10968811
> 
> 赞同：1
> 
> 时间：2012-06-10T12:45:10.957
> 
> 标签：iphone, objective-c, ios, xcode

我正在制作一个回合制游戏，我希望在游戏视图中显示您正在玩的用户名。

显示您自己的用户名，我可以使用

```
[[GKLocalPlayer localPlayer] alias]; 
```

我想知道是否有像这样的简单代码来查看连接的玩家别名，这是一个回合制游戏所以我相信没有恒定的连接，并且必须在轮到她的时候发送名称？还是这种想法不正确？

希望有人可以帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T15:33:47.243

不幸的是，我认为没有任何简单的代码可以做到这一点。我遇到了同样的问题。

我解决它的方法是使用以下代码片段：

```
GKTurnBasedParticipant *otherParticipant;
for (GKTurnBasedParticipant *participant in match.participants) {
    if (NO == [participant.playerID isEqualToString:[GKLocalPlayer localPlayer].playerID]) {
        otherParticipant = participant;
    }
}

if (nil != otherParticipant && nil != otherParticipant.playerID) {
    [GKPlayer loadPlayersForIdentifiers:@[ otherParticipant.playerID ]
                  withCompletionHandler:^(NSArray *players, NSError *error) {
                      // Here, `players` is an array of `GKPlayer`s. You can
                      // access the `displayName` or `alias` property here.
                  }];
} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-16T22:16:09.420

我做了一个类扩展。

GKTurnBasedMatchExtensions.h

```
@interface GKTurnBasedMatch (GKTurnBasedMatchExtensions)
@property(nonatomic, readonly) GKTurnBasedParticipant* opponent;
@end 
```

GKTurnBasedMatchExtensions.c

```
#import "GKTurnBasedMatchExtensions.h" 

@implementation GKTurnBasedMatch (GKTurnBasedMatchExtensions)
-(GKTurnBasedParticipant*)opponent
{
  GKTurnBasedParticipant *firstPlayer = self.participants[0];
  return ([firstPlayer.playerID isEqualToString:GKLocalPlayer.localPlayer.playerID]) ? self.participants[1] : self.participants[0];
}
@end 
```

然后我可以这样做：

```
#import "GKTurnBasedMatchExtensions.h"

match.opponent.player.alias 
```

# iphone - 在 iphone 的 Sqlite 数据库管理器中存储长描述

> ID：10968814
> 
> 赞同：0
> 
> 时间：2012-06-10T12:45:49.667
> 
> 标签：iphone, sqlite

我想像这个数据一样在 iphone 的 sqlite 数据库管理器中存储长描述。

“金庙：金庙，俗称 Sri Harmandir Sahib 或 Sri Darbar Sahib，是锡克教的圣地。沐浴在典型的金色色调中，在环绕它的 Amrit Sarovar 的宁静水域中闪耀，swarn mandir （金庙）是一个内化其游客的心灵景观的地方，无论是什么宗教或信仰，作为最宏伟的礼拜堂之一。在镶满珠宝的平台上是 Adi Grantha 或锡克教徒的神圣经文，其中"

我试图将其作为描述（VARCHAR（5000）），但是当我执行查询时，它显示的是带有点（....）的半文本，就像 [http://i.stack.imgur.com/gyMqi.png](http://i.stack.imgur.com/gyMqi.png)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T13:03:55.477

肯定表明`...`全文存在于数据库中。它还表明“Sqlite 数据库浏览器”[截断超过一定长度](http://sqlitebrowser.svn.sourceforge.net/viewvc/sqlitebrowser/trunk/src/preferences.cpp?revision=69&view=markup)：

```
m_textWidthMarkSize = s.value("prefs/sqleditor/textWidthMarkSpinBox", 60).toInt(); 
```

有没有办法更改设置？

**编辑**

您可以使用以下查询验证文本是否已完全保存（替换`theTable`为正确的表名）：

```
select length(description) from theTable; 
```

# c - 随机猜谜游戏（整数） - 输入字符串时出现错误

> ID：10968817
> 
> 赞同：2
> 
> 时间：2012-06-10T12:46:44.630
> 
> 标签：c, string, random, numbers

我正在制作一个典型的猜谜游戏来学习 C，这是我人生中的第一次，我注意到了一个错误。如果你输入一个整数，你会得到`Guess a higher value`or`Guess a lower value`并且效果很好。但是如果你输入一个字符串，它会变得疯狂并打印出很多字符串说`Guess a higher value`.

1.  我现在要做的是检查用户是否输入了一个字符串，它会告诉用户类似`Enter a number, not text`. 我该怎么做呢？

2.  您有什么可以在此代码中改进的地方吗？

    ```
    #include <stdio.h>
    #include <stdlib.h>
    #include <time.h>
    int main () {

        int secret, answer;

        srand((unsigned)time(NULL));

        secret = rand() % 10 + 1;

        do {
            printf ("Guess a number between 1 and 10");
            scanf ("%d",&answer);
            if (secret<answer) puts ("Guess a higher value");
            else if (secret>answer) puts ("Guess a lower value");
        } while (secret!=answer);

        puts ("Congratz!");
        return 0;
    } 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T12:54:13.060

您忽略了 的返回值`scanf`，它将告诉您转换是否顺利。`scanf`将返回分配的项目数，因此如果它返回 1，您就知道`answer`已分配给一个数字。如果它返回 0，你就知道出了点问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T12:54:01.677

> 我现在要做的是检查用户是否输入了一个字符串，它会告诉用户输入一个数字，而不是文本。我该怎么做呢？

`scanf`进行格式化输入。您可能还想查看高级格式说明符`scanf`- 例如忽略输入的部分，指定用于读取字符串的缓冲区大小，仅指定要读取的特定字符集等。如果您想验证输入，您可能最好使用从控制台读取一行`fgets`，然后解析该行。

> 您有什么可以在此代码中改进的地方吗？

您可能想要改进随机数生成算法。阅读 C 常见问题解答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T12:55:11.717

检查 的返回值`scanf`。它将返回成功匹配和分配的项目数。在这种情况下，如果您输入一个字符串，那么它将不会被匹配和分配，但是该字符串会留在输入缓冲区中，并且`scanf`尝试在每次迭代中读取它并且失败，因此出现了问题。

您可以将代码更改为：

```
int main () {

    int secret, answer;

    srand((unsigned)time(NULL));

    secret = rand() % 10 + 1;

    do {
        printf ("Guess a number between 1 and 10");
        if (scanf ("%d",&answer) != 1)
        {
         printf ("\nPlease enter an integer\n\n");
         scanf ("%*s");
         continue;
        }
        if (secret<answer) puts ("Guess a higher value");
        else if (secret>answer) puts ("Guess a lower value");
    } while (secret!=answer);

    puts ("Congratz!");
    return 0;
} 
```

注意里面的`if`行`scanf ("%*s");`是做的。在 中`%*s`是`*`输入抑制指示器，这表明`%s`将读取一个字符串（代表 ），但`*`表明尽管将从输入中读取该字符串，但它将被丢弃。这样做是为了简单地丢弃先前输入的字符串，而`scanf ("%d",&answer)`. 如果您不丢弃缓冲区中的字符串，它将保留，并且每次迭代`scanf ("%d",&answer)`都将无法匹配任何整数，因为它将遇到输入缓冲区中的剩余字符串。

另一方面，您可以读取一个字符串并将该字符串转换为整数。

如下所示：

```
int main () {

    int secret, answer;
    char buff[128];

    srand((unsigned)time(NULL));

    secret = rand() % 10 + 1;
    do {
        printf ("Guess a number between 1 and 10");
        scanf ("%s",buff);
        if ((answer = atoi (buff)) == 0)
        {
          printf ("\nPlease enter an integer\n\n");
          continue;
        }
        if (secret<answer) puts ("Guess a higher value");
        else if (secret>answer) puts ("Guess a lower value");
    } while (secret!=answer);

    puts ("Congratz!");
    return 0;
} 
```

`atoi ()`将字符串转换为整数（以 10 为基数）。如果包含整数的字符不包含有效数字，它将返回`0`。检查它，我们可以检测用户是否正确输入。另外因为您的应用程序需要输入 1 和 10 之间的整数，因此不包括 0，因此可以将 0 视为无效。为了更好地控制检测无效整数格式以及字符串中错误的位置，请使用`strtol ()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-10T14:26:55.500

您可能想要创建一个函数来检查输入是否为数字。喜欢：

```
int isNumeric( char *str){
   while(*str)
   {
     if (!isdigit(*str))
         return 0;
     str++;
   }
   return 1;
}

int main(){
   char guess[3];
   int iGuess;
   do {
      printf("Guess a number between 1 and 10");
      gets(guess);
      if (!isNumeric(guess)){
        printf("Invalid input");
        continue;
      }
      iGuess = atoi(guess);
     if (iGuess<secret)
           printf("Higher");
     else if (iGuess>secret)
           printf("Lower");
   } while (secret!=iGuess);
   printf("Congrats");
   return 0;
} 
```

您需要包含 ctype.h 和 string.h

# javascript - jquery在左右部分滑动大表

> ID：10968833
> 
> 赞同：0
> 
> 时间：2012-06-10T12:48:54.607
> 
> 标签：javascript, jquery, slider, right-to-left

我必须在网页上显示一个包含许多列的表格。这些列基本上是一周中的几天，因此一次只需要显示 7 列（总共四个星期）。

我已经设置了一个窗口，将溢出设置为隐藏，它显示前 7 天，并设法让表格向左滚动 7 天，但是表格不会再滚动到此。如果我向后滚动，则表格向后滚动太远，表格完全消失在右侧。

我对 jQuery 很陌生，并意识到我可能应该使用 position() 或 offset() 函数。我确信这是一段简单的代码，尽管我在谷歌上搜索的时间没有发现任何涵盖这个问题的东西。

有谁知道那里有什么像样的教程可以帮助我入门？谢谢

它只是有一个 500 像素的容器 div，溢出设置为隐藏，连续 2000 像素的单独 div。当用户单击上一个或下一个按钮时，内部 div 将根据位置滚动正负 500px。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T13:48:31.510

试试这个：

```
$('.next').click(function(event){
    if($('.table').css('left') != '-1500px') {
    $(this).prop('disabled', true)    
        $('.table').animate({left:'-=500px'}, 500, function() {
              $('.next').prop('disabled', false)    
        });
}
});

$('.prev').click(function(event){
    if($('.table').css('left') != '0px') {
    $(this).prop('disabled', true)   
        $('.table').animate({left:'+=500px'}, 500, function() {
              $('.prev').prop('disabled', false)    
        });
}
}); 
```

[http://jsfiddle.net/ZSFFS/27/](http://jsfiddle.net/ZSFFS/27/)

# c - 谁能推荐一个调试 C 程序的好程序？

> ID：10968837
> 
> 赞同：0
> 
> 时间：2012-06-10T12:49:25.863
> 
> 标签：c, debugging

我需要调试一个包含 posix 线程、套接字编程（udp 客户端、服务器）的 C 程序。我使用 ubuntu 12.04 和 IDE/SDK、Qt Creator 2.4.1 和 Netbeans IDE 7.1.2。我知道他们使用 gdb 进行调试。

当我开始调试我的程序时，程序在 5 分钟左右后停止运行，并且 Qt Creator 或 Netbeans 都没有输出任何错误或警告，尽管我使用调试功能并且我的程序假设侦听 UDP 端口。

我对我的所有代码行都使用了 printf，我可以看到我的程序按预期工作并监听 UDP 端口并等待。我无法弄清楚为什么它会无缘无故地停止，而且由于我使用的 IDE 没有显示任何调试错误、警告，我想不出任何理由。

我想知道是否有人可以建议我一个在运行时监视所有/某些变量和线程的调试程序。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T13:03:03.210

一个古老但可靠的工具是[ddd](http://www.gnu.org/software/ddd/)，它基本上是 gdb GUI 包装器。虽然，我通常直接使用 Emacs 进行调试，但 ddd 是您可以在几乎所有 *nix 平台上运行的工具。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T12:56:31.373

`gdb`不太舒服，但总是可用。

要对不同类型进行运行时分析，尤其是检查内存访问，`Valgrind`（[请参阅此处的文档](http://valgrind.org/docs/manual/)）可能是首选工具。

**更新**：我指的是 *IX 系统。对于 Windows`gbd`也适用于`cygwin`环境。Nativly 有 VC Express，它是免费的，包括 IDE 和调试器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-10T13:06:31.213

我不太确定您的应用程序使用什么调试器。我在 Linux 上知道的唯一调试器是 gdb。它连同 printf 语句就是我所需要的。

gdb 很简单，虽然不像@alk 所说的“太舒服”，但似乎无处不在。

还有 Eclipse，它也是一个很好的开发和调试平台。

# ios - 寻找插入式图像调整大小/裁剪视图控制器

> ID：10968845
> 
> 赞同：3
> 
> 时间：2012-06-10T12:50:19.310
> 
> 标签：ios, ipad

我正在寻找可以轻松用于调整/裁剪 UIImage 提供的第三方视图控制器。我在上传之前使用它来编辑个人资料头像。

Aviary 的照片编辑器很棒（[https://github.com/AviaryInc/Mobile-Feather-SDK-for-iOS](https://github.com/AviaryInc/Mobile-Feather-SDK-for-iOS)），但它有一个 28MB 的 libAviarySDK.a 文件，这没有意义，因为它还包含一个 AviarySDKResources。捆绑文件。

谁能推荐一些好的替代品？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T12:58:06.200

[https://github.com/ardalahmet/SSPhotoCropperViewController](https://github.com/ardalahmet/SSPhotoCropperViewController)

[https://github.com/mattgemmell/MGImageUtilities](https://github.com/mattgemmell/MGImageUtilities)

# java - 摆动工人延迟

> ID：10968846
> 
> 赞同：2
> 
> 时间：2012-06-10T12:50:22.170
> 
> 标签：java, swing, swingworker

我有一个按钮单击事件，该事件将触发一个摆动工作线程，该线程作为回报触发另一个线程进行长时间计算，包括写入文件。然后读取这个文件来绘制一些图形。但是，如果我不在两者之间添加延迟，则绘图部分永远不会发生..（它说文件未找到，尽管文件在那里..在不增加延迟的情况下解决这个问题的更好方法是什么..

```
 private void buttonFragmentActionPerformed(java.awt.event.ActionEvent evt) {                                               
    try
    {
        ESIPlusFragmenterWorker epfw = new ESIPlusFragmenterWorker(10, sdfFile, cidSpectrum);
        epfw.execute();

        Thread.sleep(1000);

        holder.molTable1.drawMolViewPanel(currDir+sep+"esiFragments"+sep+"esiFrag.sdf");
    }
    catch (Exception e)
    {
        e.printStackTrace();
    }
} 
```

摇摆工人

```
public class ESIPlusFragmenterWorker extends SwingWorker<Void, Void>{

int mzppm_;
String SDF_;
String spectrum_;
Double mion_;
MolTable holder_;

ESIPlusFragmenterWorker(int mzppm, String SDF, String spectrum)
{
    mzppm_ = mzppm;
    SDF_ = SDF;
    spectrum_ = spectrum;
}

@Override
protected Void doInBackground() {
    try
    {
    Molecule mol;
    MolImporter importer = new MolImporter(SDF_);
    ExecutorService te = Executors.newFixedThreadPool(1);
    while ((mol  = importer.read()) != null) 
    {
     Runnable epf = new ESIPlusFragmenter(mol, spectrum_, mzppm_);
     Thread t = new Thread(epf);
     te.execute(epf);
    }
    importer.close();
    te.awaitTermination(10, TimeUnit.MINUTES);
    }
    catch (Exception e)
    {
      //  
    }
    finally
    {
        return null;
    }
}

@Override
protected void done() {
    try {
        //
    } catch (Exception e) {
        //e.printStackTrace();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T12:52:45.540

永远，永远，永远不要调用`Thread.sleep(...)`EDT，因为这会让你的整个 GUI 进入睡眠状态。而且，如果你估计错了，后台进程比你的睡眠延迟时间长怎么办？

一种可能的解决方案是将 PropertyChangeListener 添加到 SwingWorker 并侦听 SwingWorker.StateValue 的“状态”属性为 SwingWorker.StateValue.DONE，然后进行绘图。

例如

```
private void buttonFragmentActionPerformed(java.awt.event.ActionEvent evt) {
  try {
     ESIPlusFragmenterWorker epfw = new ESIPlusFragmenterWorker(10,
           sdfFile, cidSpectrum);
     epfw.addPropertyChangeListener(new PropertyChangeListener() {

        @Override
        public void propertyChange(PropertyChangeEvent pcEvt) {
           if ("state".equals(pcEvt.getPropertyName())) {
              if (pcEvt.getNewValue().equals(SwingWorker.StateValue.DONE)) {
                 holder.molTable1.drawMolViewPanel(currDir + sep
                       + "esiFragments" + sep + "esiFrag.sdf");
              }
           }
        }
     });
     epfw.execute(); 
```

因此，它所做的就是等待 SwingWorker 完成其业务，然后再调用侦听器内部的代码。

另一种选择是在 SwingWorker 的方法中调用 holder.molTable1.drawMolViewPanel `done()`，这也可以，但是通过使用 PropertyChangeListener 进行上述操作，SwingWorker 不必了解在监听器（而不是使用 SwingWorker 的`done()`方法），这可能允许更松散的耦合。

# android - 在游戏中以不同的方式显示分数

> ID：10968849
> 
> 赞同：0
> 
> 时间：2012-06-10T12:50:38.157
> 
> 标签：android

我正在制作一个游戏，并希望以这样的方式显示分数，如果我的分数为 0 并增加 10，那么分数应该从 0 到 10 的所有数字递增。达到新分数后，它应该停下来，至少停顿一下。

如果分数再次增加 10，记分牌应该从 10 增加到 20，然后再次停止。

我曾尝试使用处理程序，但无法以任何方式让它们暂停或停止。

本[视频](http://www.youtube.com/watch?v=NdZ8YupmEmA&feature=fvwrel)中的示例演示了我要完成的工作。如果您查看右上角的记分牌，您会看到分数不断增加。如果上述链接不起作用，这是网址：[http ://www.youtube.com/watch?v=NdZ8YupmEmA&feature=fvwrel](http://www.youtube.com/watch?v=NdZ8YupmEmA&feature=fvwrel)

这是我的 Runnable 增加分数的代码。

```
final Handler mHandler=new Handler();
    mRunnable=new Runnable() {

        public void run() {
            String s = null;
                   ++i;
                   s= new Integer(i).toString();    
                   tv.setText(s);
                   mHandler.postDelayed(mRunnable,1000);       

                }

        /*protected void onStop() {
            mHandler.removeCallbacks(mRunnable);
        }*/
    };

    mHandler.postDelayed(mRunnable,1000); 
```

我特别需要的是如何让代码停止计数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T12:58:51.737

您可以简单地打印 2 个端点之间的所有数字。说：

```
int counter = 0;
while(counter%10 != 0)
{
textView.setText(counter.toString());
counter++;
} 
```

然后再次继续循环，这次只是从 11 开始，而不是 0。

我不确定它是否会如您所愿，就像在您的 Temple Run 示例中一样。我想加一点`sleep()`，但是昨天有人建议我不要`sleep()`在 Android 开发中使用方法。

编辑：

好的。[本教程](http://www.tutorialforandroid.com/2009/01/using-handler-in-android.html)似乎很容易处理。您可以使用`Handler`（正如您可能猜到的那样）将相同的逻辑应用于您的分数显示机制。

# php - 我在哪里可以获得 Zend 的亚马逊 API 密钥？

> ID：10968852
> 
> 赞同：1
> 
> 时间：2012-06-10T12:51:26.047
> 
> 标签：php, zend-framework, amazon-web-services

在 Zend 框架中我从哪里获得`Amazon API Key`和`Amazon Secret Key`使用？Amazon S3 中的密钥在那里有效吗？

事实上，我很困惑在哪里注册。

可以给我注册链接吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T12:59:36.270

您可以在此处注册您的 AWS 账户：[https ://aws-portal.amazon.com/gp/aws/developer/registration/index.html](https://aws-portal.amazon.com/gp/aws/developer/registration/index.html)

之后，您需要访问凭证，您可以在 AWS[安全凭证页面](https://aws-portal.amazon.com/gp/aws/developer/account?ie=UTF8&action=access-key)上获得该凭证。去那里，登录（如果需要）并查看“访问密钥”选项卡。将*访问密钥 ID (Amazon API Key)*和*秘密访问密钥 (Amazon Secret Key)*复制到您的 Zend 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T12:59:18.783

对于初学者，请查看[亚马逊服务补丁](http://framework.zend.com/issues/browse/ZF-12046)的 ZF 问题跟踪器，如果需要，您可以注册[亚马逊会员密钥](https://affiliate-program.amazon.com/gp/advertising/api/detail/main.html)

# java - JFrame 中的两个 JPanel，另一个下的一个

> ID：10968853
> 
> 赞同：3
> 
> 时间：2012-06-10T12:51:30.557
> 
> 标签：java, swing, awt, jpanel, layout-manager

我的框架中有两个面板，我想将它们设置在另一个之下，第一个应该有 9/10*screen frame 的大小，第二个应该是 1/10。

我已经尝试过使用 GridLayout（2 行和 1 列），但我无法设置它们的特定大小。

我该怎么做？

* * *

好的，也许我会写一些我的代码：

我正在写游戏 - 吃豆人，在第一个面板中有一个完整的游戏，在这一秒内我想显示玩家信息（如分数、姓名等）。首先我想设置在 80% 的屏幕上，并且20% 第二。

更重要的是，我的框架应该可以调整大小并且全部包含在内，例如当框架大小发生变化时，我必须更改面板的大小（保持 80% 到 20%）。所以我写了这个 InitComponents()。

```
package pacman;

import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.GridLayout;
import java.awt.Toolkit;
import javax.imageio.ImageIO;
import javax.swing.JFrame;
import java.awt.Image;
import java.awt.event.ComponentAdapter;
import java.awt.event.ComponentEvent;

public class Pacman extends JFrame implements items
{
   Image image;
public Pacman()

{    
    initComponents();
    try {           
      image = ImageIO.read( Pac.class.getResourceAsStream("/img/Pac02.gif"));         
    } catch (Exception e) {
        System.out.println("Blad prz otwieraniu " + e);
        System.exit(0);
       }

    int screen_width = Toolkit.getDefaultToolkit().getScreenSize().width;
    int screen_height = Toolkit.getDefaultToolkit().getScreenSize().height;      
    this.setLocation(screen_width/3, screen_height/3); 

    this.setLayout(new BorderLayout());
    this.getContentPane().add(panel, BorderLayout.CENTER);
    this.getContentPane().add(panel2, BorderLayout.PAGE_END);

    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    this.setIconImage(image);

setTitle("..::Pacman::..");
setDefaultCloseOperation(EXIT_ON_CLOSE);
this.setPreferredSize(new Dimension(416,438));
this.pack();
setLocationRelativeTo(null);

setVisible(true);
}
private void initComponents() {
  setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

  this.addComponentListener(new ComponentAdapter() {
      @Override
  public void componentResized(ComponentEvent e) {

        int width = e.getComponent().getSize().width;
           int height = e.getComponent().getSize().height;
            panel.setSize(width, height*8/10) ;
           panel2.setSize(width, height*2/10);

}
});

} 

public static void main(String[] args) {  
  EventQueue.invokeLater(new Runnable() {  

      @Override  
      public void run() {  
         new Pacman();
      }  
  });  
}  

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T13:17:28.040

如果您想要不同大小的组件，则 GridLayout 是错误的布局。正如[javadoc](http://docs.oracle.com/javase/6/docs/api/java/awt/GridLayout.html)所说：

> 容器被分成大小相等的矩形，每个矩形中放置一个组件。

如果您只有`JPanel`s，您可能需要考虑`JSplitPane`- 请参阅[javadoc](http://docs.oracle.com/javase/6/docs/api/javax/swing/JSplitPane.html)或[tutorial](http://docs.oracle.com/javase/tutorial/uiswing/components/splitpane.html)。

编辑：根据您的编辑/代码，JSplitPane 看起来确实像您的问题的解决方案。然后，您可以使用创建后设置分隔线位置`setDividerLocation(double)`- 请参阅[javadoc](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JSplitPane.html#setDividerLocation%28double%29) - 例如

```
JSplitPane split = new JSplitPane(JSplitPane.VERTICAL);
split.setTopComponent(topPanel);
split.setBottomComponent(bottomPanel);
split.setDividerLocation(0.8); 
```

或者，由于在不知道您对 GUI 的意图的情况下很难建议布局，您应该考虑查看[Visual Guide](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html) to layouts。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T14:17:45.487

看看这个输出：

![GRIDBAGLAYOUT示例](../Images/f5d67e6d0700af2540c9243de1a62e36.png)

这里是代码，`GridLayout`当你需要调整大小时，你不应该使用`columns/rows`，在这种情况下`GridBagLayout`可以救援。

```
import java.awt.*;
import javax.swing.*;
// http://stackoverflow.com/questions/10968853/two-jpanels-in-jframe-one-under-other
public class GridBagLayoutExample
{
    private void displayGUI()
    {
        JFrame frame = new JFrame("GridBagLayout Example");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel contentPane = new JPanel();
        contentPane.setLayout(new GridBagLayout());

        GridBagConstraints gbc = new GridBagConstraints();
        gbc.anchor = GridBagConstraints.FIRST_LINE_START;
        gbc.fill = GridBagConstraints.BOTH;
        gbc.gridx = 0;
        gbc.gridy = 0;
        gbc.weightx = 1.0;
        gbc.weighty = 0.9;

        JPanel topPanel = new JPanel();
        topPanel.setOpaque(true);
        topPanel.setBackground(Color.WHITE);
        contentPane.add(topPanel, gbc);

        gbc.weighty = 0.1;
        gbc.gridy = 1;

        JPanel bottomPanel = new JPanel();
        bottomPanel.setOpaque(true);    
        bottomPanel.setBackground(Color.BLUE);
        contentPane.add(bottomPanel, gbc);

        frame.setContentPane(contentPane);
        frame.setSize(200, 300);
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new GridBagLayoutExample().displayGUI();
            }           
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T12:58:21.660

看看，假设你的意思是一个`Jpanel`重叠另一个！

[http://docs.oracle.com/javase/tutorial/uiswing/components/layeredpane.html](http://docs.oracle.com/javase/tutorial/uiswing/components/layeredpane.html)

干杯！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-10T13:08:31.220

您可以使用边框布局

[http://docs.oracle.com/javase/tutorial/uiswing/layout/border.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/border.html)

将较大的面板设置为 CENTER，将较小的面板设置为 PAGE_END。设置较大面板的大小，较小的面板将使用剩余的空间。

# php - PHP file_get_contents，在include之前对包含的文件执行PHP

> ID：10968855
> 
> 赞同：1
> 
> 时间：2012-06-10T12:51:39.627
> 
> 标签：php, html, file-get-contents

目前我使用 file_get_contents 命令来包含文件的 html。现在我向它添加了 PHP，它导致了一个问题。PHP 被读取为 html，因此未执行。如何通过执行 PHP 检索文件内容？

哦，我需要一个字符串中的内容。所以我相信在这种情况下包含不起作用，对吧？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-10T12:55:03.007

```
ob_start();
include 'file_to_include.php';
$contents = ob_get_clean(); 
```

包含文件的内容（正在执行 PHP）在`$contents`.

# android - Android , Widget, Change Screen , 方法调用

> ID：10968860
> 
> 赞同：0
> 
> 时间：2012-06-10T12:52:22.300
> 
> 标签：android, widget

当我将应用程序小部件从一个屏幕拖到下一个屏幕时，将调用哪个方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T13:19:05.713

`AppWidgetProvider`如果用户选择在主屏幕上移动或调整其大小，则不会调用任何方法。

请注意，并非所有主屏幕都具有“将应用小部件从一个屏幕拖动到下一个屏幕”的概念。

# c# - 将一个表中一个列的最大值插入到另一个表中

> ID：10968869
> 
> 赞同：0
> 
> 时间：2012-06-10T12:53:37.847
> 
> 标签：c#, sql, ms-access-2007

我正在使用新的注册用户更新数据库。然后他们将获得一个用户 ID。我想在另一个表中更新位置时使用该数字。但我不知道用户 ID 是什么。（它是自动增量数字）所以我想我会更新第一个表。然后选择最大用户 id 并将该 id 作为位置用户 id 插入另一个表中，但我无法让它工作。

这是代码。

```
String StrSQL = "INSERT INTO Fastelejer (Fornavn,Efternavn) VALUES ('" + fornavn + "','" +      
Efternavn +  "')";
OleDbCommand InsertCommand = new OleDbCommand(StrSQL, conn);
InsertCommand.ExecuteNonQuery(); 
StrSQL = "INSERT INTO Bådpladser (Fastelejerid) SELECT MAX (Fastelejerid) FROM    
StrSQL = "INSERT INTO Bådpladser (Fastelejerid) SELECT MAX (Fastelejerid)FROM
Fastelejer WHERE Pladsnummer = " + Pladsnummer; 
```

pladsnummer 代表其位置的输入。所以注册应该把用户ID放到选择的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T12:59:03.697

在 MS Access 中，“自动增量”通常称为“身份”。您可以使用特殊`@@IDENTITY`变量来检索最后插入的标识列的 ID。知道新 ID 后，您可以将其作为参数添加到第二次插入中，例如：

```
command.CommandText = "INSERT Table1 (...) values (...); SELECT @@IDENTITY";
var identity = (int) command.ExecuteScalar();
command.CommandText = "INSERT Table2 (user_id, ...) VALUES (@user_id, ...)";
command.Parameters.AddWithValue("@user_id", identity);
command.ExecuteNonQuery(); 
```

# c# - 将 VirtualDirectory 序列化为 json

> ID：10968871
> 
> 赞同：0
> 
> 时间：2012-06-10T12:53:58.183
> 
> 标签：c#, json, serialization

我正在尝试将虚拟目录序列化为 json，但我得到一个 ArgumentException：由于分层目录而超出了 RecursionLimit。是否可以将序列化程序限制在一级左右？此处的堆栈跟踪：http: //pastebin.com/raw.php?i= [nByECbCs](http://pastebin.com/raw.php?i=nByECbCs)

```
var directory = HostingEnvironment.VirtualPathProvider.GetDirectory(path);
return Json(directory, JsonRequestBehavior.AllowGet); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T13:05:01.387

JSON 序列化程序不支持递归对象，您不能限制到给定级别。我建议您仅将所需的信息提取到视图模型中，然后 JSON 序列化此特定模型，而不是使用`VirtualDirectory`包含大量属性和方法的类。

# clojure - Clojure：核心：将加载文件分为两个步骤

> ID：10968874
> 
> 赞同：2
> 
> 时间：2012-06-10T12:54:13.813
> 
> 标签：clojure

## 问题

是否可以将加载文件分为两个步骤：

```
(1) compile and
(2) load ? 
```

## 语境

我正在将热代码重新加载到*远程*机器上。我不想将源代码发送到机器上，然后让机器加载文件。相反，我想将 *.class 文件传送到机器上，并让机器重新加载带有 *.class 的命名空间

因此，我想要一种方法：

```
(1) transform *.clj files to *.class files that can be hot-reloaded 
```

和

```
(2) I need to be able to call remove-ns on them later (when they have to be replaced) 
```

## 编辑

我也很高兴使用 (require :reload ... ) -- 再次，只要我可以提供一个 *.class 文件而不是我的 *.clj 文件。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T16:29:35.783

简短的回答：

1.  在本地机器上，使用[compile](http://clojure.github.com/clojure/clojure.core-api.html#clojure.core/compile)将您的 clojure 源代码编译成 .class 文件。
2.  将这些上传到您的远程服务器。
3.  使用[require](http://clojure.github.com/clojure/clojure.core-api.html#clojure.core/require)来（重新）加载命名空间。

在您的源代码中，您应该依赖`require`or `load-file`，特别是出于这个原因。在运行时，您无法确定命名空间是否来自源文件、已编译的二进制文件。

# python - 扭曲的传递证书到 ssl 处理程序

> ID：10968878
> 
> 赞同：1
> 
> 时间：2012-06-10T12:55:05.207
> 
> 标签：python, openssl, twisted, ssl-certificate, twisted.internet

我正在设计一个 ssl 服务器，我在其中使用 ssl 的twisted，它需要客户端证书身份验证才能继续程序，当我验证客户端的 ssl 证书时，它返回 True，但我想在客户端证书，以便我可以在处理程序类中获取该特定客户端的设置，您能帮帮我吗？

```
from OpenSSL import SSL
from twisted.internet import ssl, reactor
from twisted.internet.protocol import Factory, Protocol
from twisted.web import server, resource, static, twcgi

class Handler(Protocol):
    def dataReceived(self, data):
        self.transport.write(data)

    def connectionMade(self):
        self.transport.write('hello world')

def verifyCallback(connection, x509, errnum, errdepth, ok):
    global client_username
    if not ok:
        return False
    else:           
        return True

if __name__ == '__main__':

    #setting up ssl json server
    factory = Factory()
    factory.protocol = Handler
    myContextFactory = ssl.DefaultOpenSSLContextFactory('server.key', 'server.crt',SSL.TLSv1_METHOD)
    ctx = myContextFactory.getContext()
    ctx.load_verify_locations("ca.crt")
    ctx.set_verify(SSL.VERIFY_PEER | SSL.VERIFY_FAIL_IF_NO_PEER_CERT,verifyCallback)
    reactor.listenSSL(8080, factory,myContextFactory)
    reactor.run() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T17:31:07.093

调用或其他协议方法（仅`transport.getPeerCertificate`在您收到一些数据之后）**。**`Protocol.dataReceived`

# c# - C# 中的图像裁剪和调整 ImageMagick 与 GDI+ 的对比

> ID：10968882
> 
> 赞同：3
> 
> 时间：2012-06-10T12:55:36.263
> 
> 标签：c#, .net, imagemagick, gdi+

我有一个网络应用程序，用户可以在其中上传图片以创建他们的画廊。几年前，当我编写应用程序时，我选择了[ImageMagick](http://en.wikipedia.org/wiki/ImageMagick)，并且我使用 ImageMagick 完成了所有的裁剪和调整大小。

现在我正在从头开始重写应用程序，**我将 ImageMagick 替换为原生[GDI+](http://en.wikipedia.org/wiki/Graphics_Device_Interface#Windows_XP)**操作，但是我对 GDI+ 了解得越多，我就越害怕自己做出了错误的选择。

我到处读到 GDI+ 是用于桌面的，不应该在服务器应用程序上使用。我不知道细节，但我想这是为了内存消耗，实际上我可以看到**GDI+ 使用更多的内存**来对**同一图像执行****相同的操作**（裁剪和调整大小）而不是 ImageMagick（老实说**GDI+ 是更快**）。

 ****我相信 GDI+、ImageMagick 或任何其他库对于这些基本操作应该或多或少相同，并且我喜欢使用本机 GDI+ 的想法，相信任何与[.NET](http://en.wikipedia.org/wiki/.NET_Framework)一起发布的 MS至少应该没问题。

什么是正确的方法/工具？

这是我用来裁剪的代码：

```
internal Image Crop(Image image, Rectangle r)
{
    Bitmap bmpCrop;
    using (Bitmap bmpImage = new Bitmap(image))
    {
        bmpCrop = bmpImage.Clone(r, bmpImage.PixelFormat);
        bmpImage.Dispose();
    }
    return (Image)(bmpCrop);
} 
```

这是我用来调整大小的代码：

```
internal Image ResizeTo(Image sourceImage, int width, int height)
{
    System.Drawing.Image newImage = new Bitmap(width, height);
    using (Graphics gr = Graphics.FromImage(newImage))
    {
        gr.SmoothingMode = SmoothingMode.AntiAlias;
        gr.InterpolationMode = InterpolationMode.HighQualityBicubic;
        gr.PixelOffsetMode = PixelOffsetMode.HighQuality;
        gr.DrawImage(sourceImage, new Rectangle(0, 0, width, height));
        gr.Dispose();
    }
    return newImage;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T02:20:58.917

你能链接到人们说 GDI+ 不应该在服务器上使用的地方吗？也许他们知道一些我不知道的事情。

我知道一些关于 GDI+ 如何工作的事情，但对 ImageMagick 一无所知。我确实发生在描述 ImageMagick 架构的页面上：[http ://www.imagemagick.org/script/architecture.php](http://www.imagemagick.org/script/architecture.php)

似乎 ImageMagick 将在内部将图像转换为具有 4 个通道和特定位深度（通常为每个通道 16 位）的未压缩格式，并使用未压缩数据进行工作，这些数据可能在内存中或磁盘上，具体取决于大小。'identify -version' 会告诉你你的位深度是多少。我的印象是，实际上 ImageMagick 通常会在内部使用 64 位 RGBA 缓冲区，除非您使用将使用 32 位 RGBA 的 Q8 版本。它也可以使用多个线程，但我怀疑这会很重要，除非你正在处理非常大的图像。（如果您正在处理非常大的图像，ImageMagick 无疑是赢家。）

GDI+ 位图对象将始终将未压缩的数据存储在内存中，并且通常默认为 32 位 RGBA。那和 32 位 RGB 可能是最有效的格式。GDI+ 是一个绘图库，它不是为大图像设计的，但至少 Bitmap 对象不会保存像素数据和图像元数据的内存以外的任何资源（与流行的看法相反，它们不包含 HBITMAP对象）。

所以他们看起来和我很相似。对于您的用例，我不能说一个明显优于另一个。如果您使用 imagemagick，您可能应该使用 Q8 构建来提高速度和内存，除非额外的精度对您很重要。

看起来如果您唯一的操作是加载、保存、缩放和裁剪，那么您应该能够在以后轻松替换实现。

除非您需要使用元文件，否则您可能应该在内部使用位图对象而不是图像。然后，您不必在 Crop 函数中创建中间位图对象。该中间对象可能是您观察到的一些额外内存消耗的原因。如果您从外部来源获取 Image 对象，我建议您尝试将它们转换为 Bitmap 并在这不起作用时创建一个新的 Bitmap。

此外，“using”语句会自动调用 Dispose，因此无需显式调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T12:58:40.443

我自己写了一些东西：

```
public void ResizeImageAndRatio(string origFileLocation, string newFileLocation, string origFileName, string newFileName, int newWidth, int newHeight, bool resizeIfWider)
{
    System.Drawing.Image initImage = System.Drawing.Image.FromFile(origFileLocation + origFileName);
    int templateWidth = newWidth;
    int templateHeight = newHeight;
    double templateRate = double.Parse(templateWidth.ToString()) / templateHeight;
    double initRate = double.Parse(initImage.Width.ToString()) / initImage.Height;
    if (templateRate == initRate)
    {
        System.Drawing.Image templateImage = new System.Drawing.Bitmap(templateWidth, templateHeight);
        System.Drawing.Graphics templateG = System.Drawing.Graphics.FromImage(templateImage);
        templateG.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.High;
        templateG.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.HighQuality;
        templateG.Clear(Color.White);
        templateG.DrawImage(initImage, new System.Drawing.Rectangle(0, 0, templateWidth, templateHeight), new System.Drawing.Rectangle(0, 0, initImage.Width, initImage.Height), System.Drawing.GraphicsUnit.Pixel);
        templateImage.Save(newFileLocation + newFileName, System.Drawing.Imaging.ImageFormat.Jpeg);
    }
    else
    {
        System.Drawing.Image pickedImage = null;
        System.Drawing.Graphics pickedG = null;

        Rectangle fromR = new Rectangle(0, 0, 0, 0);
        Rectangle toR = new Rectangle(0, 0, 0, 0);

        if (templateRate > initRate)
        {
            pickedImage = new System.Drawing.Bitmap(initImage.Width, int.Parse(Math.Floor(initImage.Width / templateRate).ToString()));
            pickedG = System.Drawing.Graphics.FromImage(pickedImage);

            fromR.X = 0;
            fromR.Y = int.Parse(Math.Floor((initImage.Height - initImage.Width / templateRate) / 2).ToString());
            fromR.Width = initImage.Width;
            fromR.Height = int.Parse(Math.Floor(initImage.Width / templateRate).ToString());

            toR.X = 0;
            toR.Y = 0;
            toR.Width = initImage.Width;
            toR.Height = int.Parse(Math.Floor(initImage.Width / templateRate).ToString());
        }
        else
        {
            pickedImage = new System.Drawing.Bitmap(int.Parse(Math.Floor(initImage.Height * templateRate).ToString()), initImage.Height);
            pickedG = System.Drawing.Graphics.FromImage(pickedImage);

            fromR.X = int.Parse(Math.Floor((initImage.Width - initImage.Height * templateRate) / 2).ToString());
            fromR.Y = 0;
            fromR.Width = int.Parse(Math.Floor(initImage.Height * templateRate).ToString());
            fromR.Height = initImage.Height;

            toR.X = 0;
            toR.Y = 0;
            toR.Width = int.Parse(Math.Floor(initImage.Height * templateRate).ToString());
            toR.Height = initImage.Height;
        }

        pickedG.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.HighQualityBicubic;
        pickedG.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.HighQuality;

        pickedG.DrawImage(initImage, toR, fromR, System.Drawing.GraphicsUnit.Pixel);

        System.Drawing.Image templateImage = new System.Drawing.Bitmap(templateWidth, templateHeight);
        System.Drawing.Graphics templateG = System.Drawing.Graphics.FromImage(templateImage);
        templateG.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.High;
        templateG.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.HighQuality;
        templateG.Clear(Color.White);
        templateG.DrawImage(pickedImage, new System.Drawing.Rectangle(0, 0, templateWidth, templateHeight), new System.Drawing.Rectangle(0, 0, pickedImage.Width, pickedImage.Height), System.Drawing.GraphicsUnit.Pixel);
        templateImage.Save(newFileLocation + newFileName, System.Drawing.Imaging.ImageFormat.Jpeg);

        templateG.Dispose();
        templateImage.Dispose();

        pickedG.Dispose();
        pickedImage.Dispose();
    }
    initImage.Dispose();
} 
```****

# php - Windows Azure 重写规则导致 HTTP 错误 500

> ID：10968884
> 
> 赞同：0
> 
> 时间：2012-06-10T12:56:13.080
> 
> 标签：php, windows, codeigniter, azure

我已经为此工作了几个小时。我正在尝试将 Codeigniter 框架放入 Windows Azure 网站。PHP 工作得很好，但是我似乎无法让这个重写规则正常工作。这是我的`web.config`文件。

```
<?xml version="1.0"?>

    <configuration>
      <system.webServer>
        <rewrite>
          <rules>
            <rule name="Rule" stopProcessing="true">
              <match url="^(.*)$" ignoreCase="false" />
              <conditions>
                <add input="{REQUEST_FILENAME}" matchType="IsFile" ignoreCase="false" negate="true" />
                <add input="{REQUEST_FILENAME}" matchType="IsDirectory" ignoreCase="false" negate="true" />
                <add input="{URL}" pattern="^/favicon.ico$" ignoreCase="false" negate="true" />
              </conditions>
              <action type="Rewrite" url="index.php/{R:1}" appendQueryString="true" />
            </rule>
          </rules>
        </rewrite>
      </system.webServer>
    </configuration> 
```

当我将文件上传到 Windows Azure 网站并运行页面时，`index.php`它返回 a`HTTP Error 500 (Internal Server Error): An unexpected condition was encountered while the server was attempting to fulfill the request`此时我不知道该怎么做，我需要对 Windows Azure 做些什么吗？我来自 Apache 背景，Windows IIS 对我来说是新的。任何信息对我都有帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T17:57:07.650

根据您提供的信息，因为**我来自 Apache 背景，Windows IIS 对我来说是新的**，我确信您的问题与支持 URL 重写的 IIS 配置有关。（如果您已经在 Azure VM 中安装并配置了 URLRewrite，请告诉我，我将删除此答案）

默认情况下，在 Windows Azure 中，IIS 没有安装 URLRewrite 模块，因此它无法执行任何配置的 URL ReWrite 设置，并且将返回 500 错误。

您是否启用了对 Azure VM 的 RDP 访问，以便您可以远程访问并查找应用程序事件日志中记录的可能异常？如果您 RDP 到您的 Azure VM 并查找应用程序事件日志，您将看到一个错误，说明 URL 重写模块不可用。

首先，您需要创建一个启动任务以在您的 Azure 中安装 URLRewrite 模块。要了解有关 Windows Azure 启动任务的更多信息，请访问此[链接](http://blogs.msdn.com/b/avkashchauhan/archive/2011/03/17/using-startup-task-in-windows-azure-detailed-summary.aspx)。

这是有关如何在 Windows Azure 中启用 URL 重写的[链接。](http://msdn.microsoft.com/en-us/library/windowsazure/dd573358.aspx)（如果这是您的错误，我可以编写有关如何让 URLRewrite 在 Windows Azure 上工作的详细信息）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T09:30:57.163

我只是将 ubuntu 上的 Apache 移动到 Azure 网站上的 IIS。根据下面的 url，重写模块似乎已经启用。我还使用 Web Platform Installer 在我的 Windows 7 上设置类似的环境（IIS express 7.5），web.config 也可以完美运行。

“...URL 重写模块始终在云中启用并可用。但是，您需要安装它才能在本地开发环境中使用它...”

[http://msdn.microsoft.com/en-us/library/windowsazure/dd573358.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/dd573358.aspx)

您的 web.config 看起来不错，这与我的非常相似 - 删除 url 中的 index.php。

请启用错误消息以从 IIS 输出详细信息，这将帮助您识别问题。我使用这些技巧来找出 IIS 如何查找我的文件。它是 , , 和下面的部分：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>

    <system.webServer>

        <httpErrors errorMode="Detailed" />
        <asp scriptErrorSentToBrowser="true"/>

        <rewrite>
        <rules>
            <rule name="RuleRemoveIndex" stopProcessing="true">
                <match url="^(.*)$" ignoreCase="false" />
                <conditions>
                    <add input="{REQUEST_FILENAME}" matchType="IsFile" ignoreCase="false" negate="true" />
                    <add input="{REQUEST_FILENAME}" matchType="IsDirectory" ignoreCase="false" negate="true" />
                </conditions>
                <action type="Rewrite" url="index.php/{R:1}" appendQueryString="true"/>
            </rule>
        </rules>
        </rewrite>

    </system.webServer>

    <system.web>
        <customErrors mode="Off"/>
        <compilation debug="true"/>
    </system.web>

</configuration> 
```

另外，请记得检查config.php中的base_url是否正确！

希望它有帮助！

# android - Android 生命周期：是否应该在启动期间调用 onResume()？

> ID：10968888
> 
> 赞同：4
> 
> 时间：2012-06-10T12:57:09.000
> 
> 标签：android, android-lifecycle

我正在尝试**Android Application Development for Dummies**的一个示例，这是一个简单的应用程序，可以切换手机的响铃模式。代码如下。

```
public class SilentModeToggleActivity extends Activity {

  private AudioManager mAudioManager;
  private boolean mPhoneIsSilent;

  @Override public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    mAudioManager = (AudioManager) getSystemService(AUDIO_SERVICE);
    checkIfPhoneIsSilent();
    setButtonClickListener();
  }

  @Override public void onResume() {
    super.onResume();
    checkIfPhoneIsSilent();
    toggleUi();
  }

  private void checkIfPhoneIsSilent() {
    int ringerMode = mAudioManager.getRingerMode();
    if (ringerMode == AudioManager.RINGER_MODE_SILENT) {
      mPhoneIsSilent = true;
    } else {
      mPhoneIsSilent = false;
    }
  }

  private void setButtonClickListener() {
    Button toggleButton = (Button) findViewById(R.id.toggleButton);
    toggleButton.setOnClickListener(new View.OnClickListener() {
      public void onClick(View v) {
        if (mPhoneIsSilent) {
          mAudioManager.setRingerMode(AudioManager.RINGER_MODE_NORMAL);
          mPhoneIsSilent = false;
        } else {
          mAudioManager.setRingerMode(AudioManager.RINGER_MODE_SILENT);
          mPhoneIsSilent = true;
        }
        toggleUi();
      }
    });
  }

  private void toggleUi() {
    ImageView imageView = (ImageView) findViewById(R.id.phone_icon);
    Drawable newPhoneImage;
    if (mPhoneIsSilent) {
      newPhoneImage = getResources().getDrawable(R.drawable.phone_silent);
    } else {
      newPhoneImage = getResources().getDrawable(R.drawable.phone_on);
    }
    imageView.setImageDrawable(newPhoneImage);
  }
} 
```

我的问题是因为我只覆盖`onCreate()`（默认显示“正常”模式图像）并且，如果我在应用程序外部将手机模式更改为静音（在我检查当前状态并更新） `onResume()`，预计图像会变为“静音” `onResume()`UI），但为什么即使我**杀死**进程然后将手机模式更改为静音，它仍然显示正确的图像？

我希望应用程序重新加载并显示默认图像，这是正常的。不是正确但令人困惑的无声图像。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T13:05:55.180

`onResume()`每当活动重新获得前台输入时调用。这包括：

*   当它在其他事物具有前景（例如，设置）后返回屏幕时，以及

*   在此过程中首次创建它时（包括任何所需的新进程，因为您从 DDMS 中杀死了旧进程）

因此，您的代码将在任何一种情况下检查振铃模式的状态，并在任何一种情况下都使用正确的图像。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-10T13:06:49.800

onResume 不仅限于在活动暂停后调用，它会在活动到达活动堆栈*顶部时调用。*这包括它在创建后第一次显示。

[开发人员](http://developer.android.com/guide/topics/fundamentals/activities.html#Lifecycle)文档非常详细地介绍了活动生命周期的工作原理，包括描述实际调用每个生命周期回调的时间的流程图和表格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-08T00:28:19.843

onResume 在启动时被调用。请参阅[此处](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)的活动生命周期文档。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T08:25:52.450

我认为您会发现 Android 开发人员文档的最新更新将阐明您的答案。onResume() 将在您的活动第一次开始时调用，将活动带到前台，或将手机带出锁定屏幕。

[Android 活动文档](http://developer.android.com/reference/android/app/Activity.html)

# ruby-on-rails - Ruby：方法的钩子

> ID：10968891
> 
> 赞同：-1
> 
> 时间：2012-06-10T12:58:17.197
> 
> 标签：ruby-on-rails, ruby, gem

我想找到一个 gem 或者编写一个为方法实现钩子的代码。

```
class A
  include SomeModule
  before_hook :meth, lambda { puts 'bla' }

  def meth
    puts 'meth'
  end
end

# A.new.meth => "bla\nmeth\n" 
```

我正在使用 Rails，我知道回调和过滤器，但是

*   `meth`不是动作
*   我不想改变我的方法调用方式

请帮帮我...

**更新**

我找到了一个用于自动化此代码的 gem：

```
 include ActiveSupport::Callbacks
  define_callbacks :meth_callback

  set_callback :meth_callback, :before do |object|
    # my code
  end

  def meth_with_callback
    run_callbacks(:meth_callback) { meth }
  end

  alias_method_chain :meth, :callback 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T13:04:47.640

您可以使用[ActiveModel::Callbacks](http://api.rubyonrails.org/classes/ActiveModel/Callbacks.html)

```
define_model_callbacks :create

def create
  run_callbacks :create do
    # do your thing here
  end
end 
```

你甚至可以编写一个小辅助方法来隐藏这一`run_callbacks`行。它可能看起来像这样：

```
hooked_method :create do
  # do your thing here
end 
```

# c++ - 调试器什么时候会撒谎？

> ID：10968903
> 
> 赞同：0
> 
> 时间：2012-06-10T12:59:47.710
> 
> 标签：c++, visual-studio-2010, debugging

因此，在处理一个真正的巫毒错误一周后（已解决，但当然，通过`#include`在相关位置添加一个）我意识到一个人不应该总是信任调试器，如果某些事情没有意义，很好old`printf()`可能对你有用。据我所知，如果代码在发布模式下编译，调试器可能会“撒谎”。我最近了解到，如果一个类有一个`#ifdef`，类似

```
struct MyStruct
{
    char a;
#ifdef USE_ME
    double c;
#else
    int c;
#endif
}; 
```

并且`USE_ME`未在结构定义可见的标头中定义，而是在其他地方定义，调试器会感到困惑，因为它不知道 c 是什么类型并且会“撒谎”，即使我们处于调试模式。我的问题是：谁能给出调试器何时撒谎的其他情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-10T13:13:34.850

调试器通常不会说谎（除非它有问题）。它准确地告诉您程序中发生了什么。您的问题是程序中发生的事情与您*认为*程序中发生的事情不同 - 或者与您在源代码中编写的不同。

当编译器优化您的代码时（例如，当您构建发布版本时），它会以多种方式转换代码，这意味着操作将被重新排序或完全删除。

当您进行调试时，调试器会尽力将正在发生的事情与源代码中编写的内容相关联，但它不能完美地做到这一点，因为编译器可能选择了完全不同的方式来实现相同的目标。因此，您经常会看到在调试器中根本看不到变量（它们已被优化），或者它们具有意外的值，或者您会看到调试器似乎在不同的源代码行之间随机跳转。

所以调试器不会说谎。它只是告诉你一个与你预期不同的事实。它告诉您程序中实际发生的事情的真相——而不是源代码中所写内容的“真相”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T13:22:15.003

谎言的典型示例发生在内存损坏（堆栈或堆损坏）以及一般与内存相关的问题（例如悬空引用）。

这是调用**未定义行为**的结果之一，即使调试器的行为在这种情况下也是未定义的，因为调试器正在使用无效的编译代码工作。

调试器擅长帮助解决格式良好的程序中的逻辑问题，并且可以帮助发现格式错误的程序中的一些错误（例如 null 取消引用）；但并非所有类型的格式错误的程序都可以被有效地调试。当然，在多线程程序（等等）中事情变得更加棘手，因为观察程序的事实改变了它的行为......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T13:19:52.597

调试器可能存在两种情况：

1.  您正在调试缺少/不正确的符号（包括您的符号和操作系统的符号）。
2.  你的身材不好。也许一些陈旧的 .OBJ 被链接，而不是首先被重建。这有时会发生在大型项目/解决方案上，特别是如果您使用“老式”指定项目依赖项的方式而不是 VS2010 的官方方式。

# sip - samplecsipsimple sip

> ID：10968905
> 
> 赞同：0
> 
> 时间：2012-06-10T13:00:08.187
> 
> 标签：sip, pjsip

我正在查看 csipsimple 应用程序 - 使用 sip 调用、寄存器。我还发现 samplecsipsimple 使用 csipsimple 作为库将 sip 客户端注册到 sip 服务器。我想如何使用 csipsimple 作为库在 wifi 上创建出站呼叫和入站呼叫？

需要一些帮助。欣赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T15:12:55.097

由于 CSipSimple 使用 pjsua 包装器，您应该看一下[simple-pjsua](http://www.pjsip.org/pjsip/docs/html/page__pjsip__sample__simple__pjsuaua__c.htm)程序。而且由于 Java 中没有回调机制，因此您将无法使用回调（例如 on_call_state）。所以你需要做的是扩展**Callback**类并覆盖它的**所有**方法。查看代码是如何完成的。

# c# - C# 获取 IEnumerable 类型并在列表中使用它

> ID：10968910
> 
> 赞同：-3
> 
> 时间：2012-06-10T13:00:41.357
> 
> 标签：c#, ienumerable, asp.net-mvc-4

我有`IEnumerable<object> Value`。我可以获取模型类型然后声明相同类型的列表吗？

例如我得到了 IEnumerable 然后想声明`List<cars> lst = new List<cars>`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T13:40:52.950

不会。模板类型是在编译时确定的。但是，您可以尝试将其声明为

```
List<dynamic> list = new List<dynamic>(value); 
```

您不会获得真正的类型安全，但您可以在不使用反射的情况下访问表单中的属性：

```
foreach(dynamic d in list)  // assuming the list is a list of cars
{
    This car is a <%= d.Model %>.
} 
```

# php - PHP 粘性表单

> ID：10968911
> 
> 赞同：2
> 
> 时间：2012-06-10T13:00:41.683
> 
> 标签：php, html

当我在数字 1 和数字 2 中输入数值，然后按“添加”。它不显示总附加值。请在下面查看我的编码。并建议我，问题是什么，可以做什么。

```
<html>
<head>
<title>Simple Calculator</title>
<?php
    if(isset($_POST['submitted'])){
        if(is_numeric($_POST['number1']) && is_numeric($_POST['number2'])){
        $add = ($_POST['number1'] + $_POST['number2']);
            echo "Add: ".$_POST['number1']."+".$_POST['number2']."=";
            }
        }

?>
<script type="text/javascript">

</script>
</head>

<body>
<h1>Simple Calculator</h1>
<form action="simple_calculator.php" method="post">
<p>Number 1: <input type="text" name="number1" size="20" value="<?php if(isset($_POST['number1'])) echo $_POST['number1'];?>"/></p>
<p>Number 2: <input type="text" name="number2" size="20" value="<?php if(isset($_POST['number2'])) echo $_POST['number2'];?>"/></p>

          <input type="button" name="add" value="Add" />
          <input type="button" name="minus" value="Minus" />
          <input type="button" name="multiply" value="Multiply" />
          <input type="button" name="divide" value="Divide" />
          <input type="reset" name="rest" value="Reset" />
          <input type="hidden" name="submitted" value="TRUE" />

</form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T13:05:17.753

1.  您将结果数据回显到 中`<head>`，因此不会显示。
2.  你忘了回声`$add`。
3.  你`<input>`的 s 是 type`button`而不是`submit`，所以表单不会被提交到服务器。
4.  因为您将先前输入的值回显到表单中，所以`<input type="reset">`可能不会做您想要/期望它做的事情。我认为最好将其作为另一个`submit`.
5.  由于此表单仅影响下一页显示的内容，并且不会对服务器进行永久更改，因此您应该使用该`GET`方法而不是`POST`.

试试这个：

```
<html>
  <head>
    <title>Simple Calculator</title>
    <script type="text/javascript"></script>
  </head>
  <body>
    <h1>Simple Calculator</h1>
    <form action="simple_calculator.php" method="get">
      <p>Number 1: <input type="text" name="number1" size="20" value="<?php if (isset($_GET['number1']) && !isset($_GET['reset'])) echo $_GET['number1'];?>"/></p>
      <p>Number 2: <input type="text" name="number2" size="20" value="<?php if (isset($_GET['number2']) && !isset($_GET['reset'])) echo $_GET['number2'];?>"/></p>
      <input type="submit" name="add" value="Add" />
      <input type="submit" name="minus" value="Minus" />
      <input type="submit" name="multiply" value="Multiply" />
      <input type="submit" name="divide" value="Divide" />
      <input type="submit" name="reset" value="Reset" />
      <input type="hidden" name="submitted" value="1" />
    </form>
    <?php

        if (isset($_GET['submitted']) && !isset($_GET['reset'])) {

            echo "<div>";

            if (is_numeric($_GET['number1']) && is_numeric($_GET['number2'])) {

                if (isset($_GET['add'])) {

                    $result = $_GET['number1'] + $_GET['number2'];
                    echo "Add: ".$_GET['number1']." + ".$_GET['number2']." = ".$result;

                } else if (isset($_GET['minus'])) {

                    $result = $_GET['number1'] - $_GET['number2'];
                    echo "Minus: ".$_GET['number1']." - ".$_GET['number2']." = ".$result;

                } else if (isset($_GET['multiply'])) {

                    $result = $_GET['number1'] * $_GET['number2'];
                    echo "Multiply: ".$_GET['number1']." * ".$_GET['number2']." = ".$result;

                } else if (isset($_GET['divide'])) {

                    $result = $_GET['number1'] / $_GET['number2'];
                    echo "Divide: ".$_GET['number1']." / ".$_GET['number2']." = ".$result;

                }

            } else {

                echo "Invalid input";

            }

            echo "</div>";

        }

    ?>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T14:05:48.930

如果你改变这个，DaveRandom 的解决方案可以正常工作

```
action="simple_calculator.php" 
```

经过

```
action="<?php echo $_SERVER['PHP_SELF'] ?>" 
```

# node.js - Node.js 文件备份脚本

> ID：10968913
> 
> 赞同：0
> 
> 时间：2012-06-10T13:01:05.147
> 
> 标签：node.js

有谁知道在开发目录上定期运行备份的 node.js 脚本？（出于安全原因，我想运行它的服务器不允许二进制文件。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T14:16:20.977

您可以使用[node-cron](https://github.com/ncb000gt/node-cron)并使用 fs 模块自己复制目录。

# c# - 基于处理器类型在 C# 应用程序中运行可变线程

> ID：10968914
> 
> 赞同：1
> 
> 时间：2012-06-10T13:01:08.767
> 
> 标签：c#, windows, multithreading, processor

我正在用 C# 编写一个 Windows 应用程序，它本质上是一个多线程的应用程序。但我正在修复中，因为这个应用程序可以在 Celeron/P-IV 系统上运行到 Core i7 系统上。因此，我无法决定如何确定为此应用程序生成的线程数。

有没有办法确定我可以根据用于利用 CPU 的最大功率以及使我的应用程序不滞后/减慢/冻结的处理器产生多少线程？您使用任何一种通用公式吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T13:17:01.443

我会考虑使用`ThreadPool`. 据我所知，.NET 框架自己管理线程的最佳数量（[http://msdn.microsoft.com/en-us/library/0ka9477y.aspx](http://msdn.microsoft.com/en-us/library/0ka9477y.aspx)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T13:08:00.970

`Environment.ProcessorCount`就是你要找的。

对于您问题的第二部分，最好的方法是测试不同数量的线程。这完全取决于您的线程到底在做什么，它们是否花费大量时间阻塞，或者它们可能正在共享公共系统资源，相互访问缓存行，无论如何，所以您不能真正给出这种类型的通用公式事物。这完全取决于您的特定线程行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T13:16:31.977

要获得您可以使用的逻辑处理器的数量`System.Environment.ProcessorCount`，但是它将与启用超线程的系统上的实际处理器/内核计数不同。要获得更准确的信息，您需要使用 WMI 元数据`Win32_ComputerSystem.NumberOfProcessors`和`Win32_ComputerSystem.NumberOfLogicalProcessors`.

但是，我建议让系统负责调度并使用高级多线程子系统之一，例如[Tasks](http://msdn.microsoft.com/en-us/library/system.threading.tasks.aspx)或[ThreadPool](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.aspx)

# javascript - javascript通过脚本标签定义范围？

> ID：10968917
> 
> 赞同：20
> 
> 时间：2012-06-10T13:01:49.720
> 
> 标签：javascript

从来没有遇到过这个问题，也不知道为什么。唯一的解释是范围问题。

在同一页面中，我有 JS 的 2 个部分：

```
...
 <script type="text/javascript">
    go();
  </script>

  <script type="text/javascript">
    function go()
    { alert('');  }
  </script>
... 
```

这将显示一个错误：*go is not defined*

**在哪里**

```
...
     <script type="text/javascript">
        go();

        function go()
        { alert('');  }
      </script>
    ... 
```

正在工作（显然）。

标签是否`<script>`创建了 JS 的范围？帮助 ？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-10T13:05:18.153

这不是范围问题。如果您在一个脚本元素中定义了一个函数（在全局范围内），那么您可以在另一个脚本元素中使用它。

但是，脚本元素在遇到时会被解析和执行。

提升不适用于脚本元素。在较早的脚本元素的初始运行期间，稍后脚本元素中定义的函数将不可用。

您要么需要交换脚本元素的顺序，要么将函数调用延迟到定义它的脚本运行之后（例如，通过将其附加到`onload`事件处理程序）。

```
<script>
    function go() {
        alert('');  
    }
</script>
<script>
    go();
</script> 
```

或者

```
<script>
    window.addEventListener("load", function () { 
        go();
    }, false);
</script>
<script>
    function go() {
        alert('');  
    }
</script> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-10T13:05:41.670

html 解析器在移动到下一个元素之前停止执行您的脚本。因此，直到第一个脚本元素被执行，下一个脚本元素才会被执行。

这相当于：

```
<script>
document.getElementById("hello") //null because the html parser hasn't met the div yet.
</script>
<div id="hello"></div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-15T02:03:24.773

作为明显错误的另一个原因是如果第一个脚本块有语法错误并被全部拒绝，但第二个块继续运行并错过了它的伙伴代码。

# forms - 在非对象上调用成员函数 bind()

> ID：10968918
> 
> 赞同：0
> 
> 时间：2012-06-10T13:01:50.643
> 
> 标签：forms, symfony1, symfony-1.4, symfony-forms

我的 action.class.php

```
 if ($this->getRequest()->getMethod() == sfRequest::GET) {
                 $this->formShoppingList = new ShoppingListForm(array(
                        'shoppinglist' => $items,
                            ), array('shoppinglist_id' => $list_id));
}

    if ($request->isMethod('post')) {
        $this->formShoppingList->bind($request->getParameter('shoppinglist'));
     print_r($this->fromShoppingList;
    } 
```

我的库/ShoppingListForm.php：

```
<?php

class ShoppingListForm extends BaseForm {

public function configure() {
    $shoppinglist_id = $this->getOption('shoppinglist_id');

    $this->setWidgets(array(
        'shoppinglist' => new sfWidgetFormTextarea(array(), array('rows' => '10', 'cols' => '35')),
        'action_id' => new sfWidgetFormInputHidden(array()),
        'list_id' => new sfWidgetFormInputHidden(array(),array('value' => $shoppinglist_id)),
    ));

    $this->widgetSchema->setLabels(array(
        'shoppinglist' => '',
    ));

    $this->setValidators(array(
        'shoppinglist' => new sfValidatorString(array('max_length' => 5000), array(
            'required' => 'ShoppingList is empty.'

        )),

        'action_id' => new sfValidatorString(array('required' => false)),
        'list_id' => new sfValidatorString(array('required' => false))

    ));

    $this->widgetSchema->setNameFormat('shoppinglist[%s]');

    gfFormHelper::addRequiredToLabel($this);
}

}

?> 
```

当我提交表单时，出现错误：

> 致命错误：在...中的非对象上调用成员函数 bind()
> 
> 坦帕数据：shoppinglist%5Bshoppinglist%5D=liste+15%0D%0A shoppinglist%5Baction_id%5D=1 shoppinglist%5Blist_id%5D=15

为什么？解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T15:50:24.947

仅当请求为 GET 时才创建表单，仅当请求为 POST 时才绑定它。有你的问题：如果它是一个帖子，表单还没有被实例化，因此 $this->formShoppingList 是空的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T15:51:36.787

您需要在它`ShoppingListForm`之前创建一个实例`bind`：

```
if ($request->isMethod('post'))
{
   // Create instance of ShoppingListForm here
    $this->formShoppingList = new ShoppingListForm();
    $this->formShoppingList->bind($request->getParameter('shoppinglist'));
    if ($this->formShoppingList->isValid())
    {
    // do something with the submitted data
    }
} 
```

# r - 导出包的 unicode 字符

> ID：10968920
> 
> 赞同：1
> 
> 时间：2012-06-10T13:02:21.807
> 
> 标签：r, unicode

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T13:19:28.913

The default when exporting locale of R are set to "C" I guess. Your locale maybe different. Perhaps you can use Sys.setlocale in your package?

# jquery - 从 ASP.NET 中的母版页或默认页链接到 jquery 脚本文件

> ID：10968921
> 
> 赞同：1
> 
> 时间：2012-06-10T13:02:27.117
> 
> 标签：jquery, asp.net, jquery-ui

我在 asp.net web 表单中使用 jquery ui 我已经加载了库并且一切正常，但我只能通过将脚本放在母版页或默认页面的 head 部分来运行脚本。我似乎无法链接到外部脚本文件并从中运行脚本。

我在我的母版页的头部有这个：

```
 <script src="Scripts/jquery-1.4.1.min.js" type="text/javascript"></script>
  <script src="Scripts/js/jquery-ui-1.8.13.custom.min.js" type="text/javascript"> </script>
  <script src="Scripts/myscript.js" type="text/javascript"></script> <!--this does not load -->
  <link href="~/Styles/Site.css" rel="stylesheet" type="text/css" />
  <link href="Scripts/css/jquery-ui-1.8.13.custom.css" rel="stylesheet" type="text/css"   /> 
```

我尝试了各种方法，但似乎不起作用

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T13:35:16.267

由于母版页的相对位置，无法找到您的脚本。

尝试

```
 <script src='<%= ResolveUrl("~/Scripts/js/jquery-ui-1.8.13.custom.min.js")%>' type="text/javascript"></script> 
```

# c# - 将文本块动态添加到网格

> ID：10968922
> 
> 赞同：6
> 
> 时间：2012-06-10T13:02:29.270
> 
> 标签：c#, xaml, windows-runtime, windows-store-apps, winrt-xaml

我的网格有 2 行 2 列，我想动态地将一个文本块添加到第一行第二列。

这是我的代码，它不会引发异常，但不会显示任何内容

```
<Grid HorizontalAlignment="Left" Height="768" VerticalAlignment="Top" Width="1366">
        <Grid.RowDefinitions>
            <RowDefinition Height="150"/>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <ColumnDefinition Width="250"/>
        </Grid.ColumnDefinitions>
    </Grid>

protected async override void OnNavigatedTo(NavigationEventArgs e)
        {
            TextBlock txt = new TextBlock();
            txt.Width = 200;
            txt.Height = 100;
            txt.Foreground = new SolidColorBrush(Colors.Yellow);

            var location = await InitializeLocationServices();
            txt.Text = location;

            Grid.SetRow(txt, 0);
            Grid.SetColumn(txt, 1);

        } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-10T15:29:47.063

您永远不会将 TextBlock 添加到网格中。您应该命名您的网格（例如 x:Name="myGrid"）并在某个时候调用 myGrid.Children.Add(txt)。

# php - Google+ API 电子邮件范围

> ID：10968923
> 
> 赞同：0
> 
> 时间：2012-06-10T13:02:44.043
> 
> 标签：php, google-plus

根据 google+[文档](https://developers.google.com/+/api/oauth)，只有一个范围是[https://www.googleapis.com/auth/plus.me](https://www.googleapis.com/auth/plus.me)，但此范围不包含用户的电子邮件地址。如何使用 google+ API 获取用户的电子邮件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T19:07:32.910

为了获取用户的电子邮件地址，您必须将以下范围添加到您的访问请求中：`https://www.googleapis.com/auth/userinfo.email`

# asp.net - 实体框架/数据库设计 - 更新数据但保持与以前数据的链接

> ID：10968924
> 
> 赞同：1
> 
> 时间：2012-06-10T13:02:46.567
> 
> 标签：asp.net, database, entity-framework, database-design, entity-framework-4

我通过一个实际示例学习了 ASP.Net 和 Entity Framework 4。为了试验这一点，我使用了`User`发送设备的示例`Repair`。他们在线创建一个帐户，添加一组`Details`（地址、电话、传真等），然后`RMA`在线创建退货表格 ( )。

我正在努力解决的概念是分配`Details`给`Returns`. A`Return`有一组`Details`，一个用于联系、交付和计费。这些可以是`Detail`表的外键，如下所示。

问题是，如果在线`User`编辑他们的，`Details`它将更新`Details`. `Return`这不是期望的行为。`Return`应该使用`Details`创建时可用的。

问题是，如何让实体框架创建一个新`Detail`对象，而不是更新现有对象。也就是说，如果用户`Detail`使用新的邮政编码更新 23，`Detail`则不会更改 23，而是`Detail`创建一个新的（即 45）。`Detail`23 被从 中删除`User`，新的`Detail`45 被添加到`User`. 虽然现有的`RMA`using `Detail`23 不受影响，但这意味着如果您查询，`RMA`您将获得在创建时提供的详细信息。

如果在阅读这个问题时，您认为这个概念是有缺陷的，而是应该以不同的方式设计数据库（即将`Detail`数据复制到表中的列`RMA`，或以复合键的形式添加到`Detail`表中以创建修订历史）。我也很高兴听到这些明智的话。

![RMA系统的ERD](../Images/887b08cc9a33d94d43cb668ebe49948e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T23:30:09.290

如果您有基本 CRUD 范围之外的复杂数据编辑规则，那么实体框架基本上有两种选择。

1.  放弃简单的数据绑定，将您的特殊处理构建到位于 GUI 和数据层 (EF) 之间的业务规则层中。

2.  放弃精简 EF 层的简单性，将您的特殊数据处理规则放入存储过程中，然后将 EF 模型中的 CRUD 过程设置为您定义的存储过程。

无论哪种方式，您都在做出妥协，因为没有 ORM、EF 或其他方式可以同时适应“无代码”数据绑定和非平凡的 CRUD 处理。选择最适合您的项目和偏好的方法。有些人不能没有数据绑定，有些人不能忍受它。有些人喜欢存储过程，而另一些人则讨厌它们。

# c++ - const & 与常规 & 之间的 C++ 差异

> ID：10968927
> 
> 赞同：-3
> 
> 时间：2012-06-10T13:03:05.757
> 
> 标签：c++, reference, constants

> **可能重复：**
> [对函数参数使用“const”](https://stackoverflow.com/questions/117293/use-of-const-for-function-parameters)

我是 C++ 的新手，来自 java 编程，所以 C++ 中的引用怪异使用对我来说是不自然的。我不是一个新的程序员，所以我很感激关于这个主题的一个严肃而深刻的答案，而不是一个肤浅的“何时使用”的答案。

我想知道它们之间有什么区别

```
const A& p; 
```

和

```
A& p; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T13:08:43.650

`const A& p`是对类型常量对象的引用`A`。

`A& p`是对类型的（非常量）对象的引用`A`。

# c# - 分析 .NET 4.5 版本的 System.Xml DLL 时抛出 Mono.Cecil 异常，为什么？

> ID：10968929
> 
> 赞同：5
> 
> 时间：2012-06-10T13:03:28.393
> 
> 标签：c#, async-await, mono.cecil

我正在使用 Mono.Cecil 0.9.5.3，在安装 VS2012 RC（导致 .NET 4.0 System.XML.DLL 被其 .NET 4.5 对应物替换）之后，我在一些迭代的代码中得到了 System.ArugmentException每个方法的自定义属性。原因似乎是在某些情况下，`AsyncStateMachine`属性的 ctor 参数（应该是 Type）为空。

以下代码重现了它：

```
string path = Assembly.Load("System.Xml, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089").Location;

AssemblyDefinition systemXmlAssembly = AssemblyDefinition.ReadAssembly(path);

var query =

    from ModuleDefinition module in systemXmlAssembly.Modules
    from TypeDefinition td in module.Types
    from MethodDefinition method in td.Methods
    from CustomAttribute att in method.CustomAttributes
    where method.Name == "System.Xml.IDtdParser.ParseInternalDtdAsync" &&
            att.AttributeType.Name == "AsyncStateMachineAttribute"
    select att;

CustomAttribute attribute = query.Single();

var args = attribute.ConstructorArguments; // <---- this line throws an ArgumentException 
```

异常是从

```
Mono.Cecil.ModuleDefinition.CheckFullName(string fullName = "") 
```

我的问题是 - 这是 Mono.Cecil 还是 System.Xml.DLL 中的错误？规范是否允许“空”类型作为 ctor 参数出现？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-10T14:15:34.180

对我来说，这看起来像是 Cecil 中的一个错误，从某种意义上说，Cecil 应该阅读它而不会崩溃。

[您可以在https://github.com/jbevain/cecil](https://github.com/jbevain/cecil)提交错误并在某处上传 4.5 System.XML.dll 吗？然后我会看看，并报告它是实际的 Cecil 问题，还是 System.XML 中错误编码的自定义属性。

**更新**：

这确实是塞西尔的问题。它现在已在 master 中修复。在发布新的 nuget 包之前，您必须自己构建 Cecil。谢谢！

# php - 从几个非常不同的 SQL 表中排序数据

> ID：10968933
> 
> 赞同：-1
> 
> 时间：2012-06-10T13:04:35.800
> 
> 标签：php, jquery, mysql, ajax

我需要从几个不同的 SQL 表中回显和排序数据。我不能使用 UNION，因为所有表都非常不同（有 6 个）。我已经按时间戳对每个单独的表进行了排序，但需要按时间戳对它们进行排序，因此所有表中的最新事件位于回显的顶部。

是否有简单的 php 解决方案或 AJAX 或 jquery 解决方案？

这是我当前的代码：

```
<?php
$result = mysql_query("
SELECT * FROM news 
UNION ALL
SELECT * FROM feature ORDER BY timestamp DESC LIMIT 2
")or die(mysql_error());

while($row = mysql_fetch_array($result)){echo'News: <a     href="index.html">'.$row['title'].'</a><br>' ;}

?>
<?php
$result = mysql_query("
SELECT * FROM members WHERE artist='Y'
ORDER BY timestamp DESC LIMIT 2
")or die(mysql_error());

while($row = mysql_fetch_array($result)){echo'New Artist: <a href="artists/artist.php?    artist='.$row['artistname'].'">'.$row['artistname'].'</a><br>' ;}

?>
<?php
$result = mysql_query("
SELECT  * FROM gigs 
 ORDER BY timestamp DESC LIMIT 2
")or die(mysql_error());

while($row = mysql_fetch_array($result)){echo'New Gig: <a href="artists/gigs.php?     artist='.$row['artistname'].'">'.$row['gigname'].' + '.$row['artistname'].'</a><br>' ;}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T13:07:57.857

您可以`.sort()`在返回的时间戳上使用 PHP 执行一个函数 -

> 此函数对数组进行排序。此功能完成后，元素将从低到高排列。

[http://php.net/manual/en/function.sort.php](http://php.net/manual/en/function.sort.php)

将所有数据收集在一起，逐个查询并将它们推送到一个奇异数组中，然后执行排序和反向或更好[的 Darhazer 的建议](https://stackoverflow.com/questions/10968933/order-data-from-several-very-different-sql-tables#comment14323483_10968957)，并使用`.rsort()`（反向排序）以（反向）顺序操作您的数据。

# xml - 为什么 Qt 在加载 XML 文件时会丢失我的薄空间 unicode 字符？

> ID：10968940
> 
> 赞同：5
> 
> 时间：2012-06-10T13:05:31.643
> 
> 标签：xml, qt, unicode

我有一个 XML 文档，其中一部分包含以下内容：

```
<math display='block'><mtext>&#x2009;</mtext></math> 
```

如果将其加载到 Qt（特别是我发现此问题的 Qt MathML 小部件）中，则 QDomDocument 对象会丢失 unicode 细空格字符（U+2009）。这个 Python 示例代码演示了这个问题：

```
from PyQt4.QtXml import *

d = QDomDocument()
d.setContent("<math display='block'><mtext>&#x2009;</mtext></math>")
print repr(unicode(d.toString())) 
```

这段代码的输出是：

```
u'<math display="block">\n <mtext/>\n</math>\n' 
```

在细空格后插入一个额外的非空格字符会阻止细空格丢失。

这是我的错误，XML 特性，还是 Qt 有错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-10T16:59:24.770

来自[QDomDocument 的文档](http://qt-project.org/doc/qt-4.8/qdomdocument.html)：

> 仅由空格组成的文本节点将被剥离并且不会出现在 QDomDocument 中。如果不需要这种行为，可以使用允许提供 QXmlReader 的 setContent() 重载。

所以这样你就不会丢失只有空格的数据（例如在 C++ 中）：

```
QXmlSimpleReader reader;
QXmlInputSource source;
QDomDocument dom;

source.setData(QString("<mtext>&#x2009;</mtext>"));
dom.setContent(&source, &reader); 
```

# api - 将 URL 内容直接下载到字符串 (VB6) 中而不保存到磁盘

> ID：10968946
> 
> 赞同：3
> 
> 时间：2012-06-10T13:06:35.367
> 
> 标签：api, winapi, vba, vb6, wininet

基本上，我想将特定 URL 的内容（基本上，只是字符串形式的 HTML 代码）下载到我的 VB6 字符串变量中。但是，有一些条件。

我知道 URLDownloadToFile 函数 - 但是，这需要您将下载的文件/HTML 保存到磁盘上的文件位置，然后才能将其读入字符串变量，这对我来说不是一个选项，我不想这样做.

另一件事是，如果我需要使用外部库，它必须已经从 XP 及更高版本的所有 Windows 版本中提供，我不能使用我需要运送、打包和分发的控件或库，即使它是免费的，这不是一个选项，我不想这样做。因此，我不能使用 MSINET.OCX（Internet 传输）控件的 .OpenURL() 函数（它只是将内容返回到字符串中），因为它不随 Windows 提供。

有没有办法可以使用 Windows API、URLMON 或其他预加载到 Windows 中或随 Windows 一起提供的东西，或者完全在 VB6 (SP6) 中做到这一点？

如果是这样，我将不胜感激，因为即使经过一小时的谷歌搜索，我发现的唯一示例是对 URLDownloadToFile 的引用（需要在将啤酒放入字符串之前保存在磁盘上）和 MsInet.OpenURL （需要我发布和分发 MSINET.OCX，我不能也不想这样做）。

当然必须有一种优雅的方式才能做到这一点？我可以在 VB.NET 中毫无问题地做到这一点，但显然没有 VB6 中的 .NET 框架的奢华——有什么想法吗？

**更新：**

我发现了这个：[http](http://www.freevbcode.com/ShowCode.asp?ID=1252) ://www.freevbcode.com/ShowCode.asp?ID=1252 但是它说显示的函数可能不会返回整个页面，并链接到 Microsoft 错误报告或解释这一点的 kb 文章。另外，我知道这是基于 wininet.dll - 我想知道 WinInet.dll 与哪些版本的 Windows 一起打包？Windows XP 及更高版本？它是否与 Windows 7 和/或 Windows 8 一起提供？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-10T14:34:30.850

这就是我几年前使用 VB6 的方式：

```
Private Function GetHTMLSource(ByVal sURL As String) As String
Dim xmlHttp As Object
    Set xmlHttp = CreateObject("MSXML2.XmlHttp")
    xmlHttp.Open "GET", sURL, False
    xmlHttp.send
    GetHTMLSource = xmlHttp.responseText
    Set xmlHttp = Nothing
End Function 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-10T16:39:00.710

一种替代方法是使用 Internet Explorer。

```
Dim ex As InternetExplorer
Dim hd As HTMLDocument
Dim s As String

Set ex = New InternetExplorer

With ex
    .Navigate "http://donttrack.us/"
    .Visible = 1
    Set hd = .Document
    s = hd.body.innerText ' assuming you just want the text
    's = hd.body.innerHTML ' if you want the HTML
End With 
```

*编辑*：要使上述早期绑定起作用，您需要设置对“Microsoft Internet 控件”和“Microsoft HTML 对象库”（工具 > 参考）的引用。您也可以使用后期绑定，但老实说，我忘记了正确的类名是什么；也许聪明的人会编辑这个答案:-)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-11T15:48:41.947

如果您想使用纯 VB 而不使用 IE 来执行此操作，那么您可以利用 VB UserControl 的一个很少使用的功能 - 异步属性。

创建一个新的 UserControl，并将其命名为 UrlDownloader。将 InvisibleAtRuntime 属性设置为 True。向其中添加以下代码：

```
Option Explicit

Private Const m_ksProp_Data         As String = "Data"

Private m_bAsync                    As Boolean
Private m_sURL                      As String

Public Event AsyncReadProgress(ByRef the_abytData() As Byte)
Public Event AsyncReadComplete(ByRef the_abytData() As Byte)

Public Property Let Async(ByVal the_bValue As Boolean)
    m_bAsync = the_bValue
End Property

Public Property Get Async() As Boolean
    Async = m_bAsync
End Property

Public Property Let URL(ByVal the_sValue As String)
    m_sURL = the_sValue
End Property

Public Property Get URL() As String
    URL = m_sURL
End Property

Public Sub Download()

    UserControl.AsyncRead m_sURL, vbAsyncTypeByteArray, m_ksProp_Data, IIf(m_bAsync, 0&, vbAsyncReadSynchronousDownload)

End Sub

Private Sub UserControl_AsyncReadComplete(AsyncProp As AsyncProperty)

    If AsyncProp.PropertyName = m_ksProp_Data Then
        RaiseEvent AsyncReadComplete(AsyncProp.Value)
    End If

End Sub

Private Sub UserControl_AsyncReadProgress(AsyncProp As AsyncProperty)

    If AsyncProp.PropertyName = m_ksProp_Data Then
        Select Case AsyncProp.StatusCode
        Case vbAsyncStatusCodeBeginDownloadData, vbAsyncStatusCodeDownloadingData, vbAsyncStatusCodeEndDownloadData
            RaiseEvent AsyncReadProgress(AsyncProp.Value)
        End Select
    End If

End Sub 
```

要使用此控件，请将其粘贴在表单上并使用以下代码：

```
Option Explicit

Private Sub Command1_Click()

    XDownload1.Async = False
    XDownload1.URL = "http://www.google.co.uk"
    XDownload1.Download

End Sub

Private Sub XDownload1_AsyncReadProgress(the_abytData() As Byte)

    Debug.Print StrConv(the_abytData(), vbUnicode)

End Sub 
```

可以说，您可以根据自己的喜好对其进行自定义。它可以告诉（使用 AyncProp 对象）文件是否被缓存，以及其他有用的信息。它甚至有一个特殊模式，您可以在其中下载 GIF、JPG 和 BMP 文件并将它们作为 StdPicture 对象返回！

# c# - 将带有“params”修饰符的 C# 方法转换为 Java

> ID：10968947
> 
> 赞同：2
> 
> 时间：2012-06-10T13:06:39.517
> 
> 标签：c#, java, arrays, parameters, multidimensional-array

我有一个 C# 方法，它对二维数组使用“params”修饰符。

```
/// <summary>
///   Combine vectors horizontally.
/// </summary>
/// 
public static T[] Concatenate<T>(params T[][] vectors)
{
    int size = 0;
    for (int i = 0; i < vectors.Length; i++)
        size += vectors[i].Length;

    T[] r = new T[size];

    int c = 0;
    for (int i = 0; i < vectors.Length; i++)
        for (int j = 0; j < vectors[i].Length; j++)
            r[c++] = vectors[i][j];

    return r;
} 
```

我像这样将它转换为Java：

```
{
    int size = 0;
    for (int i = 0; i < vectors.length; i++)
    {
        size += vectors[i].;
    }

    T[] r =(T[]) Array.newInstance(vectors[0][0].getClass(), size);

    int c = 0;
    for (int i = 0; i < vectors.length; i++)
    {
        for (int j = 0; j < vectors[i].length; j++)
        {
                r[c++] = vectors[i][j];
        }
    }

    return r;
} 
```

但这似乎是错误的。解决方案不起作用。请有人告诉我正确的方法。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T13:52:41.877

在 Java 中，您使用`...`而不是，如此[处](https://stackoverflow.com/questions/4211099/how-does-the-java-array-argument-declaration-syntax-work)`params`所述

所以你像这样声明你的方法（注意丢失一个[]）：

```
public static T[] Concatenate<T>(T[]...vectors) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T13:55:37.460

几个建议：

*   只是避免一起使用数组和泛型。多亏了type earasure，他们在一起玩得不好。（你在 CLR 上没有这个问题。）

*   更喜欢现有的解决方案。番石榴[`Iterables.concat`](http://guava-libraries.googlecode.com/svn/tags/release02/javadoc/com/google/common/collect/Iterables.html#concat%28java.lang.Iterable...%29)似乎符合这里的要求。

# android - Wi-Fi Direct 和“普通”Wi-Fi - 不同的 MAC？

> ID：10968951
> 
> 赞同：8
> 
> 时间：2012-06-10T13:07:09.907
> 
> 标签：android, wifi, wifi-direct, wifip2p

我目前正在尝试通过 Wi-Fi Direct 连接两部知道对方 MAC 地址的手机，但偶然发现了以下问题：我收到的 MAC 地址

```
 WifiManager wifiMan = (WifiManager) this
            .getSystemService(Context.WIFI_SERVICE);
    WifiInfo wifiInf = wifiMan.getConnectionInfo();
    MAC_ADDRESS = wifiInf.getMacAddress(); 
```

`WifiP2pManager`与我在发现和请求对等点时收到的略有不同。示例：`a0:xx:xx:...`变成`a2:xx:xx....` 有谁知道为什么？我没有找到任何方法来获取“Wi-Fi Direct MAC 地址”，因为我认为 MAC 地址应该是唯一的，并且它是处理两者（普通 Wi-Fi 和 P2P/Direct）的同一个 Wi-Fi 模块. 这很奇怪..我该怎么办？对于我拥有的两台设备（Galaxy Nexus），始终只有前两个字符的 MAC 地址不同——我应该简单地丢弃它们吗？遇到问题（仅 MAC 地址第一部分不同的两个设备）的概率是否太高？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-01T17:26:27.623

在我的项目中，我一直在寻找这个。我的要求是在使用 WiFi Direct 形成的 adhoc P2p 网络中唯一标识设备。每个设备下次靠近时应识别其朋友设备。我需要我自己的 WiFi（直接）MAC 和我朋友的来创建这个朋友区创建的密钥。

**我的研究：**设计的方式是有一个唯一的通用 ID 和一个本地 ID。**原因：**通用 ID 只能用于连接到基础架构模式网络。本地 ID 可用于“ad-hoc”模式网络（设备到设备）。在这种 ad-hoc 模式下，单个设备可能同时属于多个 ad-hoc 组。

1.  因此，为了支持这种并发操作，P2p 设备支持多个 MAC 实体，可能在不同的通道上。
2.  对于每个会话，持久组可以为每个会话使用不同的通道和设备 MAC。
3.  P2P 设备在发现和协商期间使用其全局 MAC 地址作为设备 ID，并为组内的所有帧使用临时本地 MAC 地址。[从这里了解](http://www.thinktube.com/tech/android/wifi-direct)

但是，没有直接的方法来获取自己的 WiFi P2p MAC 地址。[问题 53437：安卓](https://code.google.com/p/android/issues/detail?id=53437)。

在这个问题讨论中，来自谷歌的项目成员建议这是可能的，只是没有记录在案

> **解决方案：**使用意图过滤器`WifiP2pManager.WIFI_P2P_THIS_DEVICE_CHANGED_ACTION`和意图中的额外内容`WifiP2pManager.EXTRA_WIFI_P2P_DEVICE`

这就是我在项目中使用它的方式：

```
@Override
public void onReceive(Context context, Intent intent) {
....
....
String action = intent.getAction();

if (WifiP2pManager.WIFI_P2P_THIS_DEVICE_CHANGED_ACTION
            .equals(action)) {

        WifiP2pDevice device = (WifiP2pDevice) intent
                .getParcelableExtra(WifiP2pManager.EXTRA_WIFI_P2P_DEVICE);

        String myMac = device.deviceAddress;

        Log.d(TAG, "Device WiFi P2p MAC Address: " + myMac);

/* Saving WiFi P2p MAC in SharedPref */

        sharedPref = context.getSharedPreferences(context.getString(R.string.sp_file_name), Context.MODE_PRIVATE);
        String MY_MAC_ADDRESS = sharedPref.getString(context.getString(R.string.sp_field_my_mac), null);

        if (MY_MAC_ADDRESS == null || MY_MAC_ADDRESS != myMac) {
            SharedPreferences.Editor editor = sharedPref.edit();
            editor.putString(context.getString(R.string.sp_field_my_mac), myMac);
            editor.commit();
        } 
```

希望这对某人有帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T13:11:09.853

在维基百科上阅读[MAC 地址](http://en.wikipedia.org/wiki/MAC_address)。

> > 地址可以是普遍管理的地址，也可以是本地管理的地址。
> > 
> > 通过设置地址最高有效字节的第二低位来区分通用管理地址和本地管理地址。该位也称为 U/L 位，是 Universal/Local 的缩写，用于标识地址的管理方式。如果该位为 0，则该地址是通用管理的。如果为 1，则地址是本地管理的。

![MAC 48 地址](../Images/92213ffc8d18da8232ae14d68c35e85a.png)

由于 Wi-Fi Direct 只是 MAC 之上的另一个堆栈，因此您还应该检查该位对它的含义。我发现一些[邮件讨论](http://permalink.gmane.org/gmane.linux.kernel.wireless.general/100047)对此有所了解。显然下面的引用来自 WFA 规范。

> > P2P 设备应分配一个 P2P 接口地址，对应于 IEEE Std 802.11-2007 [1](https://i.stack.imgur.com/QzuhR.png) §7.1.3.3.1 中描述的格式，用于与 P2P 组所有者或 P2P 组内的客户端通信。**P2P 接口地址不需要是全球唯一的，可以在本地管理。P2P 接口地址可以与 P2P 设备地址相同，前提是满足本节中对 P2P 接口地址的要求。**

所以我相信这个问题的答案是，你不应该从中获取 MAC 地址`WifiManager`并将其用于`Wi-Fi P2P`连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T03:12:22.747

[iFixit 说](http://www.ifixit.com/Teardown/Samsung-Galaxy-Nexus-Teardown/7182/2)Galaxy Nexus 使用 BCM4330 作为其 MAC、基带和 PHY，所以如果你在 Broadcom 有任何朋友，你可以问他们。

可悲的是，数据表不公开。我能做的最好的就是把你链接到一个[框图](https://www.bluetooth.org/tpg/RefNotes/4330-PB10X-R1.pdf)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-01T13:18:53.807

我整晚都在努力寻找一种方法来检索 WiFi Direct mac 地址，因为我的要求是围绕它是可行的假设起草的。

这有点绕，您创建一个设备组并获取所有者和设备地址。

这是代码，

```
 final WifiP2pManager p2pManager = (WifiP2pManager) getSystemService(WIFI_P2P_SERVICE);
    final WifiP2pManager.Channel channel = p2pManager.initialize(this, getMainLooper(), null);

    p2pManager.createGroup(channel, new WifiP2pManager.ActionListener() {
        @Override
        public void onSuccess() {
            p2pManager.requestGroupInfo(channel, new WifiP2pManager.GroupInfoListener() {
                @Override
                public void onGroupInfoAvailable(WifiP2pGroup wifiP2pGroup) {
                    Log.i("", wifiP2pGroup.getOwner().deviceAddress);

                    // Following removal necessary to not have the manager busy for other stuff, subsequently
                    p2pManager.removeGroup(channel, new WifiP2pManager.ActionListener() {
                        @Override
                        public void onSuccess() {
                            Log.i("", "Removed");
                        }

                        @Override
                        public void onFailure(int i) {
                            Log.i("", "Failed " + i);
                        }
                    });
                }
            });
        }

        @Override
        public void onFailure(int i) {
            Log.i("", String.valueOf(i));
        }
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-03T14:56:34.723

忘记 Wifi 管理器。Wifi 直接地址不等于 MAC 地址。Wifi 直接地址用于 wifi 直接连接。你不能使用其他任何东西。

要将两台设备与 wifi direct 设备连接，您必须使用其中一台设备创建一个 WifiP2pGroup。使用您的另一台设备，您必须搜索 WifiP2pGroups，选择您的设备并连接。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-16T16:48:22.340

您可以使用以下代码获取 WiFi 直接地址：

```
public String getWFDMacAddress(){
try {
    List<NetworkInterface> interfaces = Collections.list(NetworkInterface.getNetworkInterfaces());
    for (NetworkInterface ntwInterface : interfaces) {

        if (ntwInterface.getName().equalsIgnoreCase("p2p0")) {
            byte[] byteMac = ntwInterface.getHardwareAddress();
            if (byteMac==null){
                return null;
            }
            StringBuilder strBuilder = new StringBuilder();
            for (int i=0; i<byteMac.length; i++) {
                strBuilder.append(String.format("%02X:", byteMac[i]));
            }

            if (strBuilder.length()>0){
                strBuilder.deleteCharAt(strBuilder.length()-1);
            }

            return strBuilder.toString();
        }

    }
} catch (Exception e) {
    Log.d(TAG, e.getMessage());
}
return null; 
```

}

# c# - WPF ComboBox 的空文本模板？

> ID：10968952
> 
> 赞同：0
> 
> 时间：2012-06-10T13:07:11.000
> 
> 标签：c#, .net, wpf

如何为 WPF 应用“空文本”模板`ComboBox`？

```
<ComboBox 
          ItemsSource="{Binding Messages}"
          DisplayMemberPath="CroppedMessage"
          Name="Messages"
          Width="150" Margin="0,4,4,4">
</ComboBox> 
```

我使用上面的代码来显示`ComboBox`带有一些消息的 a。现在，当应用程序启动时，默认情况下没有选择任何项目，如果是这样，我想在`ComboBox`. 我想我需要某种带有触发器的模板？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T13:44:39.610

尝试这个...

```
<ComboBox ItemsSource="{Binding Messages}"
          DisplayMemberPath="CroppedMessage"
          Name="Messages"
          Width="150"
          Margin="0,4,4,4"
          IsEditable="True"
          Text="select" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T14:23:22.913

尝试这个

```
<ComboBox ItemsSource="{Binding Messages}"
          DisplayMemberPath="CroppedMessage"
          Name="Messages"
          Width="150"
          Margin="0,4,4,4"
          IsEditable="True"
          IsReadOnly="True"
          Text="Select"/> 
```

# objective-c - NSXMLParser 如何区分不同的元素？

> ID：10968953
> 
> 赞同：0
> 
> 时间：2012-06-10T13:07:16.600
> 
> 标签：objective-c, nsxmlparser

我刚刚做了一个关于 NSXMLParser 的教程。我完全不知道 NSXMLParser 如何区分不同的元素。对我来说，这似乎是不确定的。

这是我的 XML

```
<?xml version="1.0" encoding="UTF-8"?>
<Prices>
<Price id="1">
<name>Rosie O'Gradas</name>
<Beer>4.50</Beer>
<Cider>4.50</Cider>
<Guinness>4</Guinness>
</Price>
</Prices> 
```

这是我的解析器

```
-(void) parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict {
if ([elementName isEqualToString:@"Prices"]) {
    app.listArray = [[NSMutableArray alloc] init];
    NSLog(@"The Prices Count");
}
else if ([elementName isEqualToString:@"Price"]) {
    thelist = [[List alloc] init];
    thelist.drinkID = [[attributeDict objectForKey:@"id"]integerValue];
}
}

-(void) parser:(NSXMLParser *)parser foundCharacters:(NSString *)string {
if (!currentElementValue) {
    currentElementValue = [[NSMutableString alloc]initWithString:string];

} else {
    [currentElementValue appendString:string];
}

 }

-(void) parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {
if ([elementName isEqualToString:@"Prices"]) {
    return;
}
if ([elementName isEqualToString:@"Price"]) {
    [app.listArray addObject:thelist];
    thelist = nil;

} else {
    [thelist setValue:currentElementValue forKey:elementName];
    currentElementValue = nil;
}
 } 
```

我确实注意到数据对象中的属性名称与解析器中的名称相同。所以我至少明白这一点。

我不知所措的是它在哪里为这些属性分配了价值。

所以一开始它初始化数据对象

```
 thelist = [[List alloc] init]; 
```

（List 是 Data 对象）但是它做了我不明白的第一件事

```
 thelist.drinkID = [[attributeDict objectForKey:@"id"]integerValue]; 
```

因为它在 if 语句中，所以不会在每次找到 id 属性时都被覆盖。还是“theList”声明创建了多个对象？

在找到的字符中，我真的不知道发生了什么。据我所知，foundCharaters 字符串是元素内的每一位文本。所以当前元素值实际上只是一束附加在一起的字符串（但我不能说因为某种原因我不能 NSLOG 它）。

从 didEndElement 部分开始，我想知道这是否是对代码的正确解释。

```
 if ([elementName isEqualToString:@"Price"]) {
    [app.listArray addObject:thelist];
    thelist = nil;
    } 
```

我知道，每次解析器命中元素 Price 时，app.list 数组对象（在另一个类中声明）都会将对象添加到它的“thelist”中。

但是这里有点我在早期方法中缺乏理解的地方生效

```
else {
    [thelist setValue:currentElementValue forKey:elementName];
    currentElementValue = nil;
} 
```

他们在这里做什么？据我所知，当前元素值只是 XML 文件中的一堆字符。它是如何组织的？使用元素名称？

还有一个问题（对不起，长度）为什么元素名称不区分大小写，我正在试验，我发现它不是。两种语言都区分大小写。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T13:43:34.660

如果我正确解释了您的问题，那只是了解运行良好的代码。

在您的 XML 中，您有 4 个子元素`Price`与`id=1`: `name`、`Beer`和.`Cider``Guinness`

该`foundCharacters`方法将找到这 4 个 xml 标记**内**的字符，即在and 、and**之间** 写入的字符等。在您的情况下，这是for的字符串，然后是 etc 的字符串。`<name>``</name>``<Beer>``</Beer>``Rosie O'Gradas``name``4.50``Beer`

找到字符后，该方法首先检查容器字符串是否存在，如果不存在，则创建一个`currentElementValue`. 如果确实存在，它会附加找到的字符。

逻辑上接下来会发生什么？它将命中`didEndElement`方法，在第一种情况下是 tag `</name>`。在这种情况下，它会将收集到的文本分配给`currentElementValue`键`@"name"`并将这个键值对放入列表中。该列表的类型是`List`，它是在其他地方定义的，但它似乎本质上是一个`NSDictionary`.

因为`currentElementValue`已经存储成功了，应该是销毁了，所以下次命中的时候检查它的存在`foundCharacters`就可以了。

清除？

# zend-framework - 使用 ZendFramework 构建应用程序

> ID：10968956
> 
> 赞同：0
> 
> 时间：2012-06-10T13:07:47.083
> 
> 标签：zend-framework

我是 ZendFramework 的新手。我正在使用 windowsXP 和 xampp。我正在尝试使用 ZendFramework 构建一个小型应用程序。但是我得到了以下错误。

```
Fatal error: Uncaught exception 'Zend_Db_Table_Exception' with message 'No adapter found for Users' in E:\xampp\php\ZendFramework\library\Zend\Db\Table\Abstract.php:755
Stack trace:
#0 E:\xampp\php\ZendFramework\library\Zend\Db\Table\Abstract.php(739): Zend_Db_Table_Abstract->_setupDatabaseAdapter()
#1 E:\xampp\php\ZendFramework\library\Zend\Db\Table\Abstract.php(268): Zend_Db_Table_Abstract->_setup()
#2 E:\xampp\php\ZendFramework\library\Zend\Db\Table.php(77): Zend_Db_Table_Abstract->__construct(Array)
#3 E:\xampp\htdocs\testproject\application\controllers\IndexController.php(7): Zend_Db_Table->__construct()
#4 E:\xampp\php\ZendFramework\library\Zend\Controller\Action.php(516): IndexController->indexAction()
#5 E:\xampp\php\ZendFramework\library\Zend\Controller\Dispatcher\Standard.php(295): Zend_Controller_Action->dispatch('indexAction')
#6 E:\xampp\php\ZendFramework\library\Zend\Controller\Front.php(954): Zend_Controller_Dispatcher_Standard->dispatch(Object(Zend_Controller_Request_Http), Object(Zend_Controller_Response_ in E:\xampp\php\ZendFramework\library\Zend\Db\Table\Abstract.php on line 755 
```

谁能说说解决办法？？

谢谢

```
[production]
phpSettings.display_startup_errors = 0
phpSettings.display_errors = 0
includePaths.library = APPLICATION_PATH "/../library"
bootstrap.path = APPLICATION_PATH "/Bootstrap.php"
bootstrap.class = "Bootstrap"
appnamespace = "Application"
resources.frontController.controllerDirectory = APPLICATION_PATH "/controllers"
resources.frontController.params.displayExceptions = 0

[staging : production]

[testing : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1

[development : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1
resources.frontController.params.displayExceptions = 1 
```

这些是 application.ini 文件的内容。

```
<?php

class IndexController extends Zend_Controller_Action
{
   public function indexAction()
   {
       $users = new Users();
       $data = $users->fetchAll($users->select());
       $this->view->data = $data;
   }
}

?> 
```

这些是 IndexController.php 文件的内容

@洛基福特

您的意思是 application.ini 文件应该如下所示？

```
 [production]
    phpSettings.display_startup_errors = 0
    phpSettings.display_errors = 0
    includePaths.library = APPLICATION_PATH "/../library"
    bootstrap.path = APPLICATION_PATH "/Bootstrap.php"
    bootstrap.class = "Bootstrap"
    appnamespace = "Application"
    resources.frontController.controllerDirectory = APPLICATION_PATH "/controllers"
    resources.frontController.params.displayExceptions = 0

    resources.db.adapter = "pdo_Mysql" //PDO is best option, other adapters are available.
    resources.db.params.username = "your_username"
    resources.db.params.password = "your_password"
    resources.db.params.dbname = "your_database_name"
    resources.db.isDefaultTableAdapter = true //this line is optional but recommended.

    [staging : production]

    [testing : production]
    phpSettings.display_startup_errors = 1
    phpSettings.display_errors = 1

    [development : production]
    phpSettings.display_startup_errors = 1
    phpSettings.display_errors = 1
    resources.frontController.params.displayExceptions = 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T06:18:07.877

假设您使用 mysql 将这些行添加到生产部分的 application.ini 中。

```
resources.db.adapter = "pdo_Mysql" //PDO is best option, other adapters are available.
resources.db.params.username = "your_username"
resources.db.params.password = "your_password"
resources.db.params.dbname = "your_database_name"
resources.db.isDefaultTableAdapter = true //this line is optional but recommended. 
```

# java - 在性能方面，Guava 库有多好？

> ID：10968958
> 
> 赞同：13
> 
> 时间：2012-06-10T13:07:58.967
> 
> 标签：java, performance, data-structures, big-o, guava

我浏览了[Google Guava](http://code.google.com/p/guava-libraries/)库，并在其中发现了许多好的、可用的数据结构。

如果其他人使用过它，那么您能否就它在处理大量数据集时的表现提供反馈？基本上我正在为其操作寻找 BigO 符号。

提前致谢

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-10T14:41:25.800

番石榴贡献者在这里。

嗯，有什么好说的？所有基于散列（和基于枚举）的集合在恒定时间内都具有单项操作，正如您所期望的那样。（`HashMultiset`, `LinkedHashMultiset`, `ConcurrentHashMultiset`, `HashBiMap`, `HashBasedTable`, `ImmutableSet`, `ImmutableMap`, `EnumMultiset`,`EnumBiMap`等都属于该类别。）所有基于树的/排序的集合都有其单项操作的对数时间，包括`TreeMultiset`,`ImmutableSortedMap`和`ImmutableSortedSet`.

在 multimaps 中，文档基本上告诉你`Map`值集合的实现，你可以从那里弄清楚。 `HashMultimap`is a `HashMap`to `HashSet`s, `LinkedHashMultimap`is a `LinkedHashMap`to `LinkedHashSet`s, `ArrayListMultimap`is a `HashMap`to `ArrayList`s, `LinkedListMultimap`is a `LinkedHashMap`to `LinkedList`s（性能方面，如果技术上不正确），`TreeMultimap`is a `TreeMap`to `TreeSet`s，`ImmutableSetMultimap`is an `ImmutableMap`to `ImmutableSet`s，`ImmutableListMultimap`is an `ImmutableMap`to `ImmutableList`s。

唯一不言自明的可能是`SortedMultiset`实现提供`subMultiset().size()`了及时的操作`O(log n)`，而仅使用 JDK 是无法做到的`TreeMap<E, Integer>`。

集合的所有视图（我们非常喜欢视图）都会在恒定时间内返回并具有您期望的渐近线。

你有什么更具体的担忧吗？

（总的来说，Guava 基本上是 Google 在生产中使用的核心库，我想这是强有力的证据，证明这些实用程序在重型环境中表现令人满意。此外，Guava 一直在改进，你会得到这些改进基本上是免费的。）

# javascript - hasOwnProperty 与 propertyIsEnumerable

> ID：10968962
> 
> 赞同：22
> 
> 时间：2012-06-10T13:08:01.073
> 
> 标签：javascript, prototype

`hasOwnProperty`谁能启发我，和有什么区别 `propertyIsEnumerable`：

```
function f(){
  this.a = 1;
  this.b = 2;
  this.c = function(){}
}
f.prototype = {
  d : 3,
  e : 4,
  g : function(){}
}

//creating the instance of an object:
var o = new f();

//And here I can't see difference.
//In my opinion they are doing the same thing
console.log("o.hasOwnProperty('a'):", o.hasOwnProperty('a')); //true
console.log("o.hasOwnProperty('b'):", o.hasOwnProperty('b')); //true
console.log("o.hasOwnProperty('c'):", o.hasOwnProperty('c')); //true
console.log("o.hasOwnProperty('d'):", o.hasOwnProperty('d')); //false
console.log("o.hasOwnProperty('e'):", o.hasOwnProperty('e')); //false
console.log("o.hasOwnProperty('g'):", o.hasOwnProperty('g')); //false

console.log("o.propertyIsEnumerable('a')", o.propertyIsEnumerable('a')); //true
console.log("o.propertyIsEnumerable('b')", o.propertyIsEnumerable('b')); //true
console.log("o.propertyIsEnumerable('c')", o.propertyIsEnumerable('c')); //true
console.log("o.propertyIsEnumerable('d')", o.propertyIsEnumerable('d')); //false
console.log("o.propertyIsEnumerable('e')", o.propertyIsEnumerable('e')); //false
console.log("o.propertyIsEnumerable('g')", o.propertyIsEnumerable('g')); //false
```

如我错了请纠正我

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-10T13:10:16.827

“propertyIsEnumerable”函数始终排除不会`true`为“hasOwnProperty”返回的属性。您没有做任何事情来使任何属性不可枚举，因此在您的测试中结果是相同的。

您可以使用“defineProperty”来定义**不可**枚举的属性；[请参阅 MDN 上的此参考资料](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/defineProperty)。

```
Object.defineProperty(obj, "hideMe", { value: null, enumerable: false }); 
```

这就像：

```
obj.hideMe = null; 
```

除了该属性不会出现在`for ... in`循环中，并且带有的测试`propertyIsEnumerable`将返回`false`。

整个主题都是关于旧浏览器中不可用的功能，如果这不明显的话。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-06-10T13:22:28.893

[`hasOwnProperty`](http://ecma-international.org/ecma-262/5.1/#sec-15.2.4.5)甚至会返回`true`不可枚举的“自己的”属性（如`length`在 an 中`Array`）。[`propertyIsEnumerable`](http://ecma-international.org/ecma-262/5.1/#sec-15.2.4.7)将`true`仅返回*可枚举*的“自己的”属性。（“可枚举”属性是显示在[`for..in`循环](http://ecma-international.org/ecma-262/5.1/#sec-12.6.4)等中的属性。）

例子：

```
var a = [];
console.log(a.hasOwnProperty('length'));       // "true"
console.log(a.propertyIsEnumerable('length')); // "false"
```

或者使用非数组对象：

```
var o = {};
Object.defineProperty(o, "foo", { enumerable: false });
console.log(o.hasOwnProperty('foo'));       // "true"
console.log(o.propertyIsEnumerable('foo')); // "false"
```

（当您使用 时`Object.defineProperty`，`enumerable`默认为`false`，但为了清楚起见，我在上面已经明确了。）

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-07-06T01:26:11.493

简单地说：

> `hasOwnProperty`当且仅当属性是对象的属性并且未被继承时才会返回 true。这个很简单。

和

> `propertyIsEnumerable`当且仅当`hasOwnProperty`返回 true 并且该属性是可枚举的时才会返回 true。`propertyIsEnumerable`测试之上的一项“附加要求”也是如此，如果是`hasOwnProperty`，名称`propertyIsEnumerable`会更准确`hasOwnPropertyAndIsEnumerable`。

演示：http: [//jsfiddle.net/aby3k/](http://jsfiddle.net/aby3k/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-10T13:10:43.963

不同之处在于 propertyIsEnumerable 仅在属性存在并且可以对属性执行 ForIn 时才返回 true，如果属性存在，hasOwnProperty 将返回 true，而不管 ForIn 是否支持

来自 MSDN：

> 如果 proName 存在于对象中并且可以使用 ForIn 循环枚举，则 propertyIsEnumerable 方法返回 true。如果对象没有指定名称的属性或指定的属性不可枚举，则 propertyIsEnumerable 方法返回 false。通常，预定义的属性是不可枚举的，而用户定义的属性始终是可枚举的。
> 
> 如果对象具有指定名称的属性，则 hasOwnProperty 方法返回 true，否则返回 false。该方法不检查该属性是否存在于对象的原型链中；该属性必须是对象本身的成员。

# java - Hibernate OneToOne 映射问题

> ID：10968969
> 
> 赞同：0
> 
> 时间：2012-06-10T13:08:47.880
> 
> 标签：java, hibernate, one-to-one

我有以下三个实体：

1.  财产
2.  属性_文档
3.  属性_用户

`Property`并`Property_Document`具有一对多的关系。
`Property`并且`Property_User`有一对一的关系。

在数据库级别，Property_User 具有外键“property_id”，返回到 Property 表。

我正在使用注释来定义实体之间的映射和关系。

属性.java

```
public class Property {
    //.....
    @OneToMany(cascade=CascadeType.ALL)
    @JoinColumn(name="property_id")
    private List<PropertyDocuments> docs;

    @OneToOne(cascade=CascadeType.ALL)
    private PropertyUser owner;
    //....
} 
```

属性用户.java

```
public class PropertyUser {
    @Id
    private int id;

    @column
    private String name;
    //......
} 
```

当它获取属性时，文档列表会成功获取，但是当它尝试获取用户信息时，它会显示在错误消息下方。

```
column: owner_id doesn't exist. 
```

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T13:13:41.510

您需要“属性”表中的一列来保存它引用的用户的 ID。由于您没有在映射中指定任何列，Hibernate 使用默认列名称，即 owner_id（属性名称后跟它引用的列名称）。如果你想使用另一个列名，你必须告诉 Hibernate：它不能神奇地猜到它：

```
@OneToOne(cascade=CascadeType.ALL)
@JoinColumn(name = "the_column_containing_the_id_of_the_referenced_user")
private PropertyUser owner; 
```

# python - 如何使用python从文本文件中的行中读取特定字符？

> ID：10968973
> 
> 赞同：0
> 
> 时间：2012-06-10T13:09:29.097
> 
> 标签：python, text, io, character

我有多个 .txt 文件，其中包含与此类似的多行：

```
[class1] 1:-28 9:-315 13:-354227 2:-36.247 17:-342 8:-34 14:-3825
[class2] 14:-31.8679 7:-32.3582 2:-32.4127 1:-32.7257 8:-32.9804 16:-33.2156 
```

我想知道如何读取`:`s 之前的数字并将它们存储在一个数组中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T13:13:15.687

```
>>> import re
>>> text = "[class1] 1:-28 9:-315 13:-354227 2:-36.247 17:-342 8:-34 14:-3825"
>>> map(int, re.findall(r'(\S+):\S+', text)) # You could also do map(float,...)
[1, 9, 13, 2, 17, 8, 14] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T13:19:19.637

或者不使用 RE，如果你确定文件的语法保持不变，你可以使用这个：

```
>>> arr
['[class1] 1:-28 9:-315 13:-354227 2:-36.247 17:-342 8:-34 14:-3825', '[class2] 14:-31.8679 7:-32.3582 2:-32.4127 1:-32.7257 8:-32.9804 16:-33.2156']
>>> newArr = [map(lambda y: int(y[:y.index(":")]),x.split(" ")[1:]) for x in arr]
>>> newArr
[[1, 9, 13, 2, 17, 8, 14], [14, 7, 2, 1, 8, 16]] 
```

* * *

**更新：**

如果您有多个文件，可能会做这样的事情（基于@jamylak 的我的解决方案的更清晰版本）：

```
[[[int(x.split(':')[0]) for x in line.split()[1:]] for line in open(fileName)] for fileName in fileNames] 
```

`fileNames`您正在谈论的文件数组在哪里

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-10T13:31:24.197

我会使用正则表达式，但这是一个没有的版本，比 @Thrustmaster 的解决方案 imo 更清晰。

```
>>> text = "[class1] 1:-28 9:-315 13:-354227 2:-36.247 17:-342 8:-34 14:-3825"
>>> [int(x.split(':')[0]) for x in text.split()[1:]]
[1, 9, 13, 2, 17, 8, 14] 
```

# c# - SQL 2 INNER JOINS 与 3 个表

> ID：10968978
> 
> 赞同：1
> 
> 时间：2012-06-10T13:10:11.670
> 
> 标签：c#, asp.net, sql, ms-access, inner-join

我有一个关于 SQL 查询的问题。我正在 ASP.NET Visual Studio 中构建一个原型网店。现在我正在寻找一种解决方案来查看我的产品。我在 MS Access 中建立了一个数据库，它由多个表组成。

对我的问题很重要的表格是：

*   产品
*   产品图片
*   照片

[下面你会看到表之间的关系](http://i.stack.imgur.com/GMbfT.png)

对我来说，获取三种数据类型很重要：产品标题、价格和图像。产品名称和价格在`Product`表中。图像在`Foto`表中。

因为一个产品可以有多个图片，所以它们之间存在 N - M 关系。所以我必须把它分开，我在`Productfoto`桌子上做了。

所以它们之间的联系是：

```
product.artikelnummer -> productfoto.artikelnummer 
productfoto.foto_id -> foto.foto_id 
```

然后我可以读取文件名（在数据库中`foto.bestandnaam`：）

我已经创建了第一个内部联接，并在 Access 中对其进行了测试，这可行：

```
SELECT titel, prijs, foto_id
FROM Product
INNER JOIN Productfoto
ON product.artikelnummer = productfoto.artikelnummer 
```

但我需要另一个`INNER JOIN`，我怎么能创造呢？我猜是这样的（这个会给我一个错误）

```
SELECT titel, prijs, bestandnaam
FROM Product 
(( INNER JOIN Productfoto ON product.artikelnummer = productfoto.artikkelnummer )
INNER JOIN foto ON productfoto.foto_id = foto.foto_id) 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T13:13:39.250

像这样的东西应该工作：

```
SELECT Product.titel, Product.prijs, Foto.bestandnaam FROM Product INNER JOIN
(Foto INNER JOIN Productfoto ON Foto.[foto_id] = Productfoto.[foto_id]) ON
Product.[artikelnummer] = Productfoto.[artikelnummer]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T15:46:53.633

**关于使用链接表的一件事**

ProductFoto 表确实允许 Product 和 Foto 之间的 NM 关系。这是你真正想要/需要的吗？换句话说，一张 Foto 可以属于多个产品吗？如果没有，请将 Product_Id 放在 Foto 表上。如果是这样，...

**...让我们讨论 JOIN。**

假设我们有两张桌子，A 和 B。

```
SELECT * FROM A, B 
```

将为您提供 A 行与 B 行的所有排列。我们可以通过添加一个`WHERE`子句来限制结果集，例如`WHERE A.a='lekker hoor!'`，或者更酷的方式`WHERE A.id=B.a_id`。这实际上开始看起来像一个`JOIN`结果！

让我们做一个适当的`JOIN`然后：

```
SELECT * FROM A JOIN B ON A.id=B.a_id 
```

`JOIN`s 实际上进来了`LEFT OUTER`，`RIGHT OUTER`并且`FULL INNER`或`FULL OUTER`加入了。

*   A `LEFT JOIN`（使用 of`OUTER`是可选的）将包含左（第一）表中的所有记录，即使右（第二）表中没有相应的记录。
*   A`RIGHT JOIN`显然以相同的方式工作，但镜像。
*   使用 a`FULL OUTER JOIN`两个表都是可选的（虽然不完全相同`SELECT * FROM A, B`！）。
*   A`FULL INNER`需要匹配两个表中的记录（这是默认设置）。

当你确实想做不止一个`JOIN`时，说

```
SELECT * FROM 
  A 
  JOIN B ON A.id=B.a_id
  JOIN C ON B.id=C.b_id 
```

你可以把 extra 想象`JOIN`成一个中间表的连接，由连接 A 和 B 形成，尤其是在混合一些`LEFT`/ `RIGHT`/ `INNER`/ `OUTER` `JOIN`s 时。

* * *

**至于你的问题，** 使用类似的东西

```
SELECT TOP (1) titel, prijs, bestandnaam
FROM 
( -- this bracket is MS Access specific (and awkward)
  Product 
  INNER JOIN Productfoto ON product.artikelnummer = productfoto.artikelnummer
) -- this one too
  INNER JOIN foto ON productfoto.foto_id = foto.foto_id 
```

*   要满足 MS Access，请在前两个表周围使用括号，请参阅[Ms-Access: Join 3 Tables](https://stackoverflow.com/questions/901935/ms-access-join-3-tables)
*   通常不需要括号（当你发现性感的子选择时，你会像这样使用它们，规则是：只有在别无选择的情况下才使用它们）。
*   因为您的 ProductFoto 表中有多个匹配项，所以您的结果中有多个匹配项。使用 TOP 1（或 LIMIT 1，取决于您的数据库）来“修复”这个问题。

Veel 成功，en doe jezelf een plezier en *switch to English*！

# python - 在 ModelForm 子类中制作禁用字段

> ID：10968984
> 
> 赞同：2
> 
> 时间：2012-06-10T13:11:02.277
> 
> 标签：python, django, forms

我的 Django 应用程序中有一个模型`Layout`，其中包含以下字段：

*   `meta_layout`-`ForeignKey`在模型上`MetaLayout`
*   `name`-`CharField`
*   `edited`-`DateTimeField`
*   `is_active`-`BooleanField`

我有两个使用这个模型的视图——一个被调用`NewLayout`，另一个被调用，`EditLayout`每个子类化标准`CreateView`和`UpdateView`相应的。在`EditLayout`视图中我想使用一些看起来与使用的表单相同的特殊表单`NewLayout`（这对于这个模型来说很简单`ModelForm`）但是`meta_layout`选择字段显示为**属性 disabled="disabled"**（ed 用户只能为每个布局选择 meta_layout 一次 -在创建它时）。好的，我可以在字段的`ModelForm`小部件`meta_layout`具有所需属性的地方创建自定义，但问题实际上是当在表单字段上设置此类属性时，它**不会发送任何带有请求的值**- 所以我的验证尝试检查该字段的值失败，并且选择元素不支持“只读”属性，这在这里会很好。

我发现了一些非常丑陋的黑客来解决这个问题：

```
#Here is my Form:
class LayoutEditForm(forms.ModelForm):

    meta_layout = forms.ModelChoiceField(
        queryset=MetaLayout.objects.all(),
        widget=forms.Select(attrs=dict(disabled='disabled')),
        empty_label=None,
        required=False) # if required=True validation will fail
                        # because value is not supplied in POST

    class Meta:
        fields = ('meta_layout', 'name', 'is_active')
        model = Layout

class EditLayout(UpdateView):

    ...

    # And one modified method from my View-class
    def get_form_kwargs(self):
        kwargs = super(EditLayout, self).get_form_kwargs()
        # actually POST parameters
        if kwargs.has_key('data'):
            # can't change QueryDict itself - it's immutable
            data = dict(self.request.POST.items())
            # emulate POST params from ModelChoiceField
            data['meta_layout'] = u'%d' % self.object.meta_layout.id
            kwargs['data'] = data
        return kwargs 
```

但我相信它是非 Django、非 Pythonic 的，而且做如此简单的事情根本不是一种好的编程风格。您能提出更好的解决方案吗？

编辑：
哦，我发现了不那么丑陋的解决方案：在我的表单类中添加了这个：

```
def clean_meta_layout(self):
    return self.instance.meta_layout 
```

但我仍然愿意接受建议） - 我可能错过了什么吗？

# flash - 将 Flash 项目移入 FDT 时，舞台上声明的对象未定义

> ID：10968987
> 
> 赞同：2
> 
> 时间：2012-06-10T13:11:24.073
> 
> 标签：flash, fdt

我有一个带有 FLA 文件和 20 到 30 个类文件的 Flash CS5 项目。我正在尝试从 Adob​​e IDE 迁移到 FDT，而无需过多地修改我的代码。我已从 Flash 导出 SWC 文件并将其添加到我的 lib 文件夹中，现在我可以访问 FLA 文件中定义的符号，但对舞台上创建的对象的所有引用都显示为未定义。

任何帮助或相关教程的指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:00:41.443

在任何使用 MXMLC（FDT、Flash Builder、IntelliJ ......）的 IDE 中，Flash Professional 中放置在舞台上的项目将无法访问（甚至确实存在）。这是因为 IDE（使用 MXMLC）创建了自己的阶段。

如果您想使用 Flash Professional 以便将项目拖放到它的舞台上，则需要创建一个假舞台。为此，请在 Flash Professional 的舞台上创建一个空的 Movieclip，将您的时间拖放到此movileclip 中，将其设置为导出到 SWC（给它一个类名，例如 MyStage，这样您就知道它是您的了）。将其导出为 .SWC 并链接到您的 FDT 项目后，创建它的一个实例并将其添加到 FDT 中的舞台。

您添加到此“假阶段”的项目将作为子项访问。所以你的语法看起来像这样：

```
 public class AnotherProject extends Sprite {
    public function AnotherProject(){
        myStage = new MyStage();
        addChild(myStage);
        myStage.item_I_dragged_insideOf.x = 100;
   }
} 
```

# c++ - OpenGL 简单模糊效果

> ID：10968988
> 
> 赞同：0
> 
> 时间：2012-06-10T13:11:28.927
> 
> 标签：c++, opengl

我正在尝试在太阳周围添加一些模糊效果，以使其具有发光效果。

我在这里使用的方法：

[http://nehe.gamedev.net/tutorial/radial_blur__rendering_to_a_texture/18004/](http://nehe.gamedev.net/tutorial/radial_blur__rendering_to_a_texture/18004/)

基本上，我绘制一个球体，它获取当前缓冲区并将其作为纹理抓取并重绘多次，每次都拉伸它。

当对象位于屏幕中央时，这非常有用。但是，我想让它抵消说，右上角。

这是我认为需要调整的主要部分：

```
glColor4f(1.0f, 1.0f, 1.0f, alpha);                 // Set The Alpha Value (Starts At 0.2)
            glTexCoord2f(0+spost,1-spost);                      // Texture Coordinate   ( 0, 1 )
            glVertex2f(0,0);                                    // First Vertex     (   0,   0 )

            glTexCoord2f(0+spost,0+spost);                      // Texture Coordinate   ( 0, 0 )
            glVertex2f(0,480);                                  // Second Vertex    (   0, 480 )

            glTexCoord2f(1-spost,0+spost);                      // Texture Coordinate   ( 1, 0 )
            glVertex2f(640,480);                                // Third Vertex     ( 640, 480 )

            glTexCoord2f(1-spost,1-spost);                      // Texture Coordinate   ( 1, 1 )
            glVertex2f(640,0); 
```

不过，对于我的生活，我不知道如何每次都偏移它，以使模糊的图像不会向右偏移。我知道正在捕获整个屏幕，但是在绘制纹理时必须有一种方法来抵消它.....

如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-10T15:03:57.007

对于您的问题，这可能不是一个直接的答案，但您不应该过多地关注通过固定管道的效果。NeHE 教程很好，但有点过时了。我建议您只浏览基础知识并将着色器合并到您的代码中。它们速度更快，可以让您更轻松地创建更复杂的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T14:42:09.120

一般来说，如果你想围绕一个点（sx，sy）进行缩放，你需要平移你的世界，使（sx，sy）在原点，进行缩放，然后反向平移，使（sx，sy）又回到了原来的位置。

# google-apps-script - 如何在Javascript中声明一个静态变量？

> ID：10968989
> 
> 赞同：-1
> 
> 时间：2012-06-10T13:12:24.617
> 
> 标签：google-apps-script, global-variables

如何声明一个变量可以通过函数全局更改其值？

```
var a = 0;
var b = 0;

function c() {a = 5};
function d() {b = 6};

function e() {console.log(a+b)};

c();
d();
e();  // I expect here: 11 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T13:22:31.860

那是你要的吗？搜索时可以找到很多示例。

```
 function count() {
        alert(count.num);
        count.num++;
    }

    // initialize count number
    count.num = 0;

    foo(); // alert 0
    foo(); // alert 1 
```

# visual-studio-2010 - 如何在Visual Studio上一键构建两个版本的.net框架

> ID：10968991
> 
> 赞同：0
> 
> 时间：2012-06-10T13:12:42.967
> 
> 标签：visual-studio-2010, build

以下是我想要的：

.Net Framework 有多个版本，例如 3.5 和 4.0。Visual Studio 上有没有办法单击构建按钮并获取两个构建的 .exe 或 .dll 文件？我知道 Visual Studio 中有“批量构建”可以同时构建多个 .exe，但我可以创建不同的构建配置。但是我无法为不同的 .Net Framework 版本分配不同的构建配置并同时获得构建结果。我错过了什么或者有什么解决方法吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T13:22:01.497

要做到这一点，您应该有一个在其中开发的主要项目。它的版本是 3.5

创建另一个项目并向其中添加第一个项目文件。构建解决方案后，您的代码有两个版本的编译。

要进行干净的工作，您可以使用 Post-Build 事件将输出文件复制到另一个目录。

问我是否有任何不清楚的地方

# image - wordpress 上的图片上传中缺少 Alt 和标题字段

> ID：10968993
> 
> 赞同：0
> 
> 时间：2012-06-10T13:13:32.790
> 
> 标签：image, wordpress, alt

最近我注意到，当我尝试将图像上传到 WordPress 中的某个帖子或页面时，标题、alt、描述、URL、图像大小……的所有字段都丢失了……

该网站是：WWW.lotem.net 如果有帮助的话。

任何想法如何发生以及如何解决？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T21:53:00.913

如果*最近*发生这种情况，可能是由您安装的新插件或主题引起的。

如果是这种情况，请禁用插件或交换主题，看看问题是否仍然存在。

如果仍然存在，请进行完整的故障排除： [http ://wordpress.org/support/topic/troubleshooting-wordpress-33-master-list](http://wordpress.org/support/topic/troubleshooting-wordpress-33-master-list)

# ascx - 解析aspx用户控件中的路径

> ID：10968998
> 
> 赞同：1
> 
> 时间：2012-06-10T13:14:05.320
> 
> 标签：ascx

我正在构建一个 asp.net 网站并希望创建一个用户控件，其中包含对不同目录中图形文件的引用。具体来说，我的目录结构如下所示：

c:\mywebsite\ c:\mywebsite\images\ c:\mywebsite\usercontrols

用户控件将在 c:\mywebsite\default.aspx 中使用

图片为 c:\mywebsite\images\logo.jpg 用户控件为 c:\mywebsite\usercontrols\mycontrol.ascx

如果在我的 ascx 文件中，我有：

```
<img src="../images/logo.jpg" /> 
```

然后这在 Visual Studio 2010 设计视图中呈现得很好，但不是在运行时，因为在运行时控件包含在 \default.aspx 中，并且相对于 \default.aspx 的路径与来自 \usercontrols\ 的相对路径不同我的控件.ascx。

我应该如何从 ascx 文件中引用图形，以便它在设计预览和运行时都能正确呈现？我还希望它在使用它的 default.aspx 的设计预览中正确呈现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T13:20:16.027

您可以使用`<asp:Image>...`控件并将图像路径用作来自 Web 根目录的相对路径

```
<asp:Image ImageUrl='~/Images/logo.jpg" runat="server" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T13:39:49.087

查看在浏览器中生成的 html 输出，找到您的用户控件放置的图像文件路径并在您的用户控件中更改路径