# StackOverflow 问答 12435000-12435999

# gcc - Linaro 编译速度

> ID：12435005
> 
> 赞同：2
> 
> 时间：2012-09-15T06:10:41.597
> 
> 标签：gcc, arm, cross-compiling

我正在开发在嵌入式 ARM 平台上运行的软件。在更新我们平台的过程中，我们正在从基于 OpenEmbedded 的系统切换到 Linaro。

在我的机器上，目前使用 OpenEmbedded 为我们构建的 32 位 gcc 4.6.4 交叉编译我们的 ARM 软件大约需要 9 分钟。对于新系统，我们现在当然正在尝试 Linaro 的 gcc 4.7 二进制文件 - 令人惊讶的结果是编译时间突然增加了两倍（18 分钟）。Linaro gcc 4.6 二进制文件有同样的问题，所以它不是 gcc 版本特定的。

使用 Linaro 的 crosstool-ng 创建编译器的调整版本（例如，尝试使配置选项尽可能接近）并没有加快速度。

我们旧的 gcc 编译器和 Linaro 的主要区别：

*   旧的使用softfp，Linaro hard并指定fpu
*   旧版本没有针对特定的 ARM 处理器/架构 (arm-none-linux-gnueabi)，Linaro 的 gcc (arm-linux-gnueabihf) 已`with-target=armv7-a`明确`with-tune=cortex-a9`设置

更改 gcc 中的配置选项，例如启用 ssp、thumb/arm 模式、使用 multilib、目标 CPU（cortex-a8 与 a9）不会产生改进。

一个简单的 test.cpp 的性能速度已经不同，它只有一个带有 a 的 main 函数`vector<int>`，所以它与链接无关，我怀疑 STL 头文件会造成这么大的差异。

我已经没有什么可以调整的想法了。有人有想法吗？

* * *

**EDIT4：**我还尝试了 Ubuntu 12.04（gcc 版本 4.6.3（Ubuntu/Linaro 4.6.3-1ubuntu5））的 arm 交叉编译器，它的编译时间与我的 4.6.4 版本相当。所以在 Linaro 的版本中似乎有一些特别的不同之处，我要么无法关闭，要么他们应用了一些特殊的补丁？

* * *

**EDIT3：** `-ftime-report`来自 Linaro gcc 4.7 的项目实际源文件：

```
Execution times (seconds)
 phase setup             :   0.00 ( 0%) usr   0.00 ( 0%) sys   0.02 ( 1%) wall    2076 kB ( 2%) ggc
 phase parsing           :   1.72 (74%) usr   0.34 (85%) sys   2.04 (75%) wall   66732 kB (79%) ggc
 phase lang. deferred    :   0.28 (12%) usr   0.04 (10%) sys   0.33 (12%) wall   10215 kB (12%) ggc
 phase cgraph            :   0.32 (14%) usr   0.02 ( 5%) sys   0.33 (12%) wall    5481 kB ( 6%) ggc
 phase generate          :   0.60 (26%) usr   0.06 (15%) sys   0.66 (24%) wall   15700 kB (19%) ggc
 |name lookup            :   0.28 (12%) usr   0.02 ( 5%) sys   0.24 ( 9%) wall    8058 kB (10%) ggc
 |overload resolution    :   0.32 (14%) usr   0.06 (15%) sys   0.36 (13%) wall   10042 kB (12%) ggc
 callgraph construction  :   0.06 ( 3%) usr   0.00 ( 0%) sys   0.02 ( 1%) wall     551 kB ( 1%) ggc
 callgraph optimization  :   0.02 ( 1%) usr   0.00 ( 0%) sys   0.01 ( 0%) wall     224 kB ( 0%) ggc
 varpool construction    :   0.00 ( 0%) usr   0.00 ( 0%) sys   0.01 ( 0%) wall      94 kB ( 0%) ggc
 df scan insns           :   0.06 ( 3%) usr   0.00 ( 0%) sys   0.02 ( 1%) wall       5 kB ( 0%) ggc
 df reg dead/unused notes:   0.00 ( 0%) usr   0.00 ( 0%) sys   0.01 ( 0%) wall      22 kB ( 0%) ggc
 alias analysis          :   0.00 ( 0%) usr   0.02 ( 5%) sys   0.00 ( 0%) wall      11 kB ( 0%) ggc
 preprocessing           :   0.08 ( 3%) usr   0.10 (25%) sys   0.29 (11%) wall    1069 kB ( 1%) ggc
 parser (global)         :   0.58 (25%) usr   0.08 (20%) sys   0.43 (16%) wall   25145 kB (30%) ggc
 parser struct body      :   0.28 (12%) usr   0.02 ( 5%) sys   0.34 (12%) wall   12400 kB (15%) ggc
 parser enumerator list  :   0.00 ( 0%) usr   0.00 ( 0%) sys   0.01 ( 0%) wall     121 kB ( 0%) ggc
 parser function body    :   0.14 ( 6%) usr   0.00 ( 0%) sys   0.15 ( 6%) wall    2435 kB ( 3%) ggc
 parser inl. func. body  :   0.10 ( 4%) usr   0.02 ( 5%) sys   0.18 ( 7%) wall    3682 kB ( 4%) ggc
 parser inl. meth. body  :   0.24 (10%) usr   0.02 ( 5%) sys   0.20 ( 7%) wall    5298 kB ( 6%) ggc
 template instantiation  :   0.58 (25%) usr   0.14 (35%) sys   0.75 (28%) wall   26588 kB (31%) ggc
 tree gimplify           :   0.02 ( 1%) usr   0.00 ( 0%) sys   0.03 ( 1%) wall     785 kB ( 1%) ggc
 tree CFG construction   :   0.00 ( 0%) usr   0.00 ( 0%) sys   0.01 ( 0%) wall     543 kB ( 1%) ggc
 tree SSA other          :   0.00 ( 0%) usr   0.00 ( 0%) sys   0.02 ( 1%) wall      32 kB ( 0%) ggc
 out of ssa              :   0.00 ( 0%) usr   0.00 ( 0%) sys   0.01 ( 0%) wall       0 kB ( 0%) ggc
 expand                  :   0.00 ( 0%) usr   0.00 ( 0%) sys   0.01 ( 0%) wall     438 kB ( 1%) ggc
 varconst                :   0.00 ( 0%) usr   0.00 ( 0%) sys   0.01 ( 0%) wall       6 kB ( 0%) ggc
 integrated RA           :   0.04 ( 2%) usr   0.00 ( 0%) sys   0.09 ( 3%) wall    1313 kB ( 2%) ggc
 reload                  :   0.06 ( 3%) usr   0.00 ( 0%) sys   0.02 ( 1%) wall      60 kB ( 0%) ggc
 thread pro- & epilogue  :   0.00 ( 0%) usr   0.00 ( 0%) sys   0.02 ( 1%) wall      92 kB ( 0%) ggc
 final                   :   0.02 ( 1%) usr   0.00 ( 0%) sys   0.02 ( 1%) wall       4 kB ( 0%) ggc
 rest of compilation     :   0.02 ( 1%) usr   0.00 ( 0%) sys   0.02 ( 1%) wall     133 kB ( 0%) ggc
 unaccounted todo        :   0.02 ( 1%) usr   0.00 ( 0%) sys   0.01 ( 0%) wall       0 kB ( 0%) ggc
 TOTAL                 :   2.32             0.40             2.72              84519 kB 
```

我的 gcc-4.6 也是如此：

```
Execution times (seconds)
 callgraph construction:   0.00 ( 0%) usr   0.00 ( 0%) sys   0.02 ( 1%) wall     527 kB ( 1%) ggc
 trivially dead code   :   0.00 ( 0%) usr   0.00 ( 0%) sys   0.01 ( 1%) wall       0 kB ( 0%) ggc
 df scan insns         :   0.02 ( 2%) usr   0.00 ( 0%) sys   0.01 ( 1%) wall       5 kB ( 0%) ggc
 df reg dead/unused notes:   0.00 ( 0%) usr   0.00 ( 0%) sys   0.01 ( 1%) wall      22 kB ( 0%) ggc
 preprocessing         :   0.08 ( 7%) usr   0.10 (26%) sys   0.14 ( 9%) wall    1016 kB ( 1%) ggc
 parser                :   0.68 (58%) usr   0.24 (63%) sys   0.83 (52%) wall   52215 kB (76%) ggc
 name lookup           :   0.28 (24%) usr   0.02 ( 5%) sys   0.41 (26%) wall   10211 kB (15%) ggc
 inline heuristics     :   0.00 ( 0%) usr   0.02 ( 5%) sys   0.00 ( 0%) wall       0 kB ( 0%) ggc
 tree gimplify         :   0.00 ( 0%) usr   0.00 ( 0%) sys   0.01 ( 1%) wall     637 kB ( 1%) ggc
 tree CFG construction :   0.02 ( 2%) usr   0.00 ( 0%) sys   0.00 ( 0%) wall     463 kB ( 1%) ggc
 expand                :   0.02 ( 2%) usr   0.00 ( 0%) sys   0.01 ( 1%) wall     426 kB ( 1%) ggc
 varconst              :   0.00 ( 0%) usr   0.00 ( 0%) sys   0.02 ( 1%) wall     132 kB ( 0%) ggc
 integrated RA         :   0.02 ( 2%) usr   0.00 ( 0%) sys   0.03 ( 2%) wall     304 kB ( 0%) ggc
 reload                :   0.00 ( 0%) usr   0.00 ( 0%) sys   0.01 ( 1%) wall      58 kB ( 0%) ggc
 machine dep reorg     :   0.02 ( 2%) usr   0.00 ( 0%) sys   0.00 ( 0%) wall       3 kB ( 0%) ggc
 final                 :   0.00 ( 0%) usr   0.00 ( 0%) sys   0.02 ( 1%) wall       4 kB ( 0%) ggc
 rest of compilation   :   0.02 ( 2%) usr   0.00 ( 0%) sys   0.01 ( 1%) wall     133 kB ( 0%) ggc
 unaccounted todo      :   0.02 ( 2%) usr   0.00 ( 0%) sys   0.03 ( 2%) wall       0 kB ( 0%) ggc
 TOTAL                 :   1.18             0.38             1.59              68315 kB 
```

* * *

**EDIT2：** Linaro gcc 4.6.3 的`-ftime-report`输出非常简单 test.cpp（包括 options `-fno-graphite-identity -fno-graphite`）：

```
Execution times (seconds)
 preprocessing         :   0.00 ( 0%) usr   0.02 (50%) sys   0.02 (10%) wall     121 kB ( 2%) ggc
 parser                :   0.10 (62%) usr   0.02 (50%) sys   0.11 (55%) wall    4022 kB (65%) ggc
 name lookup           :   0.02 (12%) usr   0.00 ( 0%) sys   0.04 (20%) wall     879 kB (14%) ggc
 tree gimplify         :   0.02 (13%) usr   0.00 ( 0%) sys   0.00 ( 0%) wall      20 kB ( 0%) ggc
 expand                :   0.00 ( 0%) usr   0.00 ( 0%) sys   0.01 ( 5%) wall      34 kB ( 1%) ggc
 integrated RA         :   0.02 (12%) usr   0.00 ( 0%) sys   0.01 ( 5%) wall      59 kB ( 1%) ggc
 TOTAL                 :   0.16             0.04             0.20               6207 kB 
```

对于与我的旧 gcc 4.6.4 相同的文件：

```
Execution times (seconds)
 preprocessing         :   0.02 (25%) usr   0.00 ( 0%) sys   0.02 (14%) wall     119 kB ( 2%) ggc
 parser                :   0.00 ( 0%) usr   0.04 (100%) sys   0.06 (43%) wall    4021 kB (65%) ggc
 name lookup           :   0.04 (50%) usr   0.00 ( 0%) sys   0.03 (21%) wall     879 kB (14%) ggc
 expand                :   0.02 (25%) usr   0.00 ( 0%) sys   0.01 ( 7%) wall      34 kB ( 1%) ggc
 unaccounted todo      :   0.00 ( 0%) usr   0.00 ( 0%) sys   0.01 ( 7%) wall       0 kB ( 0%) ggc
 TOTAL                 :   0.08             0.04             0.14               6204 kB 
```

使用两个编译器生成预处理文件没有产生显着差异（Linaro 的 gcc 的输出只是长了 3 行）。

* * *

**EDIT1：**旧版本的 gcc -v （路径缩短或删除（例如--sbindir）

```
# arm-none-linux-gnueabi-g++ -v
Using built-in specs.
COLLECT_GCC=..sysroots/i686-linux/usr/bin/arm-none-linux-gnueabi-g++
COLLECT_LTO_WRAPPER=../libexec/gcc/arm-none-linux-gnueabi/4.6.4/lto-wrapper
Target: arm-none-linux-gnueabi
Configured with: ..tmp/work/armv7a-none-linux-gnueabi/gcc-cross-4.6.3+svnr184847-r27/gcc-4_6-branch/configure --build=i686-linux --host=i686-linux --target=arm-none-linux-gnueabi  --with-gnu-ld --enable-shared --enable-languages=c,c++ --enable-threads=posix --disable-multilib --enable-c99 --enable-long-long --enable-symvers=gnu --enable-libstdcxx-pch --program-prefix=arm-none-linux-gnueabi- --without-local-prefix --enable-lto --enable-libssp --disable-bootstrap --disable-libgomp --disable-libmudflap --with-system-zlib --with-linker-hash-style=gnu --with-ppl=no --with-cloog=no --enable-cheaders=c_global --enable-languages=c,c++,fortran --disable-libunwind-exceptions --with-mpfr=..sysroots/i686-linux/usr --with-system-zlib --enable-__cxa_atexit
Thread model: posix
gcc version 4.6.4 20120303 (prerelease) (GCC) 
```

和 Linaro gcc -v

```
# arm-linux-gnueabihf-g++ -v
Using built-in specs.
COLLECT_GCC=..compiler/bin/arm-linux-gnueabihf-g++
COLLECT_LTO_WRAPPER=../libexec/gcc/arm-linux-gnueabihf/4.7.2/lto-wrapper
Target: arm-linux-gnueabihf
Configured with: .build/src/gcc-linaro-4.7-2012.08/configure --build=i686-build_pc-linux-gnu --host=i686-build_pc-linux-gnu --target=arm-linux-gnueabihf --enable-languages=c,c++,fortran --enable-multilib --with-arch=armv7-a --with-tune=cortex-a9 --with-fpu=vfpv3-d16 --with-float=hard --with-pkgversion='crosstool-NG linaro-1.13.1-2012.08-20120827 - Linaro GCC 2012.08' --with-bugurl=https://bugs.launchpad.net/gcc-linaro --enable-__cxa_atexit --enable-libmudflap --enable-libgomp --enable-libssp --with-gmp=.. --with-mpfr=.. --with-mpc=.. --with-ppl=.. --with-cloog=.. --with-libelf=.. --with-host-libstdcxx='-L.. -lpwl' --enable-threads=posix --disable-libstdcxx-pch --enable-linker-build-id --enable-gold --with-local-prefix=.. --enable-c99 --enable-long-long --with-mode=thumb
Thread model: posix
gcc version 4.7.2 20120731 (prerelease) (crosstool-NG linaro-1.13.1-2012.08-20120827 - Linaro GCC 2012.08) 
```

对于后者，我还调整了 --disable-multilib --disable-libmudflap --disable-libgomp --disable-multilib。

这是 Ubuntu 12.04 的 arm 编译器：

```
> arm-linux-gnueabihf-g++-4.6 -v
Using built-in specs.
COLLECT_GCC=arm-linux-gnueabihf-g++-4.6
COLLECT_LTO_WRAPPER=/usr/lib/gcc/arm-linux-gnueabihf/4.6/lto-wrapper
Target: arm-linux-gnueabihf
Configured with: ../src/configure -v --with-pkgversion='Ubuntu/Linaro 4.6.3-1ubuntu5'  --enable-languages=c,c++,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-4.6 --enable-shared --enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/arm-linux-gnueabihf/include/c++/4.6.3 --libdir=/usr/lib --enable-nls --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --enable-gnu-unique-object --enable-plugin --enable-objc-gc --enable-multilib --disable-sjlj-exceptions --with-arch=armv7-a --with-float=hard --with-fpu=vfpv3-d16 --with-mode=thumb --disable-werror --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=arm-linux-gnueabihf 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T06:15:37.070

您可以传递`-time`或传递`-ftime-report`给`gcc`编译器以找出`gcc`编译时间的原因和位置。

但是为什么编译时间对你来说如此重要呢？

您应该注意生成的可执行二进制文件的执行时间。

另外，向我们展示`-v`传递给您的选项的输出`gcc`

您可以将`-j`选项传递给您的`make`命令以使其并行工作（例如并行运行多个`gcc`）。您还可以降低优化级别，例如 from `-O3`to`-O2` 或`-O1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T00:13:18.373

好的 - 你 -ftime-report 测试清楚地表明“解析器”是罪魁祸首；我猜模板（一般而言）和 STL（特别是）是根本原因。

建议：

看看是否有任何方法可以在工具链中使用“预编译头文件”。如果可以，那可能会消除整个问题。

链接（不幸的是，我*不确定*哪个可能适用于您，也可能不适用于您）：

*   [为什么 C++ 编译需要这么长时间？](https://stackoverflow.com/questions/318398/why-does-c-compilation-take-so-long)

*   [http://gcc.gnu.org/onlinedocs/gcc-4.0.4/gcc/Precompiled-Headers.html](http://gcc.gnu.org/onlinedocs/gcc-4.0.4/gcc/Precompiled-Headers.html)

*   [http://clang.llvm.org/docs/UsersManual.html#precompiledheaders](http://clang.llvm.org/docs/UsersManual.html#precompiledheaders)

*   [在 GCC 中，可以从其他头文件中包含预编译的头文件吗？](https://stackoverflow.com/questions/9580058/in-gcc-can-precompiled-headers-be-included-from-other-headers)

*   [http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0472c/CIHJFBHC.html](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0472c/CIHJFBHC.html)

# actionscript-3 - Flex：使用循环更改文本值并根据每个更改的值制作图像？

> ID：12435010
> 
> 赞同：1
> 
> 时间：2012-09-15T06:11:53.187
> 
> 标签：actionscript-3, apache-flex, air, flash-builder

我想从循环中更改 taxt 值，每次更改时我都会从中获取图像。

我有两个数字步进器，其中另一个是起始编号，另一个是结束编号。我还有启动功能的按钮。

所以按下后它开始：

```
private function makeFrames():void
{

    for (var i:int = 0; i < endFrameNumber.value; i++) 
    {
        currentFrameNumber++;
        frameText.text = currentFrameNumber.toString();
        makeImage(currentFrameNumber);
    }

} 
```

然后我从文本中制作图像：

```
private function makeImage(value:int):void
{
    var projectFolderName:String = createFolder();

    bitmapData = new BitmapData(frameText.width,frameText.height, true, 0x00ffffff);
    bitmapData.draw(frameText,new Matrix());
    var bitmap : Bitmap = new Bitmap(bitmapData);
    var png:PNGEncoder = new PNGEncoder();
    var ba:ByteArray = png.encode(bitmapData);
    newImage = File.desktopDirectory.resolvePath(projectFolderName + "/" + "frame-number_" + value + ".png");
    fileStream = new FileStream();
    fileStream.open(newImage, FileMode.APPEND);
    fileStream.writeBytes(ba);
    fileStream.close();

} 
```

因此，首先我更改文本值，然后尝试捕获它。它使图像是的，但所有数字都是相同的。那么，当我在循环中运行“makeImage”并捕获开始和结束数字之间的所有图像时，如何让它改变文本值？

使用 Flash Builder 4.6 和 AIR。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T19:13:16.443

您应该阅读有关[Flex 组件生命周期](http://www.slideshare.net/mrinalwadhwa/custom-components-in-flex-4)的内容。

因此，有两种方法可以解决您的问题：

1.  使用 invalidateProperties -> commitProperties。
2.  在 Event.ENTER_FRAME 上添加EventListener

当然不能用`foreach`。在每个输入帧中，您应该：

1.  设置新文本
2.  使文本显示无效
3.  制作和保存图像

# android - 无法解决错误 - 视图需要 API 级别 14（当前最低为 8）：

> ID：12435011
> 
> 赞同：3
> 
> 时间：2012-09-15T06:11:57.767
> 
> 标签：android, android-layout, android-gridlayout

我的代码是 -

```
<GridLayout 
xmlns:android= "http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="center"
android:columnCount="4"
android:orientation="horizontal" >

<Button android:text="@string/btn7" />

<Button android:text="@string/btn8" />

<Button android:text="@string/btn9" />

<Button android:text="@string/btndiv" />

<Button android:text="@string/btn4" />

<Button android:text="@string/btn5" />

<Button android:text="@string/btn6" />

<Button android:text="@string/btnmul" />

<Button android:text="@string/btn1" />

<Button android:text="@string/btn2" />

<Button android:text="@string/btn3" />

<Button android:text="@string/btnmin" />

<Button android:text="@string/btn00" />

<Button android:text="@string/btn0" />

<Button android:text="@string/btndec" />

<Button android:text="@string/btnadd" />

<Button android:text="@string/btnsqrt" />

<Button android:text="@string/btncbrt" />

<Button android:text="@string/btnrec" />

<Button
android:layout_gravity="fill"
android:layout_rowSpan="2"
android:text="@string/btneql" />

<Button android:text="@string/btnpow" />

<Button android:text="@string/btnper" />

<Button android:text="@string/btnmod" />

</GridLayout> 
```

并且 Eclipse 在上述代码的第一行给了我错误...... **错误是 - “查看需要 API 级别 14（当前最小值为 8）：”**

请帮帮我..!! 我已经下载了 API 版本 14 (Android 4.0)，然后我也收到了这个错误！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-15T06:16:21.877

在您的清单中使用：

```
<uses-sdk minSdkVersion="14" /> 
```

但是，这意味着任何运行低于 14 的 android API 的设备将无法使用您的应用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-10T10:43:01.407

现在，您可以使用[v7 Android 支持库](http://developer.android.com/tools/support-library/features.html#v7)，它提供了与 API 级别 7+ 兼容的 GridLayout。

这样，您只需`android.support.v7.widget.GridLayout`在 XML 上使用 GridLayout 即可获得具有本机行为的向后兼容的 GridLayout。

看：

*   [官方文档](http://developer.android.com/tools/support-library/features.html#v7-gridlayout)
*   [一个相关的问题](https://stackoverflow.com/questions/19104914/android-support-v7-widget-gridlayout-can-not-instantiate)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-15T06:17:17.150

在 AndroidManifest.xml 中设置 android:minSdkVersion="14"

```
<uses-sdk android:minSdkVersion="14"/> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-16T08:01:19.407

如果您想使用 GridLayout 和 API 版本低于 14 的目标设备，您还可以尝试从 Android 支持库中反向移植的 GridLayout 库。有关详细信息，请参阅此问题的答案：[Android API 10 中的网格布局支持](https://stackoverflow.com/questions/10278358/grid-layout-support-in-android-api-10)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-23T08:56:39.787

Switch 需要 API 14，旧版本请使用 SwithCompat：

```
<android.support.v7.widget.SwitchCompat
android:id="@+id/switch_compat"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_alignParentRight="true"
android:checked="true"
android:textOff="OFF"
android:textOn="ON"
app:showText="false"
android:focusable="false"

witchCompat switchCompat = (SwitchCompat)convertView.findViewById(R.id.switch_compat);
switchCompat.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {
    @Override
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
        if (isChecked) {
            textView.setText("check");
        } else {
            textView.setText("unCheck");
        }
    }
}); 
```

希望对你有帮助

# android - Android应用程序中与文件名无关的sdcard文件访问方式

> ID：12435019
> 
> 赞同：0
> 
> 时间：2012-09-15T06:13:11.087
> 
> 标签：android, file

即使在用户手动更改文件名后，是否有任何方法可以访问特定文件？

举一个具体的例子，我的设备在“/mnt/sdcard/myfile.png”中有一个文件，我的应用程序现在通过指示文件的绝对路径来访问这个文件（即“/mny/sdcard/myfile.png” ）。但是，如果用户更改文件名，这将失败。我想通过文件名修改后不会改变的常量标识符来获取文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T06:19:32.453

不，我认为没有任何**唯一**的文件标识可用。就像在 DOS（磁盘操作系统）和 Windows 中一样，它们使用 FAT 和 NTFS 来了解每个项目的媒体（HDD）的唯一信息。

但我不认为你可以通过代码访问这种内部资源。所以没有其他方法可以访问没有文件名的文件。

您要求的另一种方法是（我相信您的文件不是太大）。

*   将文件的副本放在一个名为`backup`.
*   创建一个 Android 服务，它将每隔一段时间在原始位置查找您的文件。
*   对于定期间隔，您可以使用 AlarmManager 类。
*   如果服务未在原始位置找到文件（例如文件被删除或重命名），则此服务将从文件`backup`夹中复制文件并将其粘贴到原始文件夹中。

然而，这个逻辑应该是最后一个实现的选项，但好的部分是它 100% 满足您的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T06:24:14.503

尝试这个..

您可以从 sdcard 获取所有图像。

```
 Cursor cur = this.getContentResolver().query(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, null, null, null,null);  
        startManagingCursor(cur);  
        cur.moveToFirst();
        while (cur.moveToNext()) {
            String str = cur.getString(cur.getColumnIndex(MediaStore.Images.ImageColumns.BUCKET_DISPLAY_NAME));
            Log.e("#########",str);
        } 
```

# hadoop - 计算 1 个 MapReduce 中的多个键

> ID：12435027
> 
> 赞同：2
> 
> 时间：2012-09-15T06:15:01.137
> 
> 标签：hadoop, mapreduce

我目前有一个包含以下列的交易列表：

```
TradeID, SellerID, FishType, Price, Qty 
```

我正在寻找

1.  每个**SellerID的计数**
2.  每个**FishType**的**数量**

 **目前，我已经编写了一个输出 < **FishType** , **Qty** > 的映射器，以便总结每个**FishType的****Qty**。但是，要获得**SellerID**的计数，我是否必须编写一个单独的 mapreduce 任务？或者有没有办法让我在同一个 mapreduce 任务中这样做？

 ****我考虑过使用计数器，但是，在编码时我不知道记录中的卖家 ID，并且可能有太多无法使用计数器进行跟踪。在我看来，这也是对 Counter 功能的滥用。

请指教。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T13:24:06.533

显而易见的方法是有一个单独的 mapreduce 作业。

更棘手的方法是“重载”您的密钥。我猜`SellerID`，`FishType`都是字符串。当它是一个`SellerID`添加`"S:"`到字符串的前面，而for`FishType`添加`"F:"`到字符串的前面。

然后，当你到达 reducer 时，你会得到两种不同类型的`reduce`函数调用之一：它以 开头`"S:"`，在这种情况下它是 a `SellerID`，另一种是它以 开头`"F:"`，在这种情况下它是 a `FishType`。基于此观察，您在减速器中有单独的逻辑。

最后，您使用[MultipleOutputs](http://hadoop.apache.org/docs/stable/api/org/apache/hadoop/mapreduce/lib/output/MultipleOutputs.html)（注意`.mapred.`vs.`.mapreduce.`版本，它们不兼容）将结果写入两个不同的目录：一个 for`FishType`和一个 for `SellerID`。

* * *

您可能希望为此使用 Pig 或 Hive。******

# javascript - 使用 AJAX 加载的选项卡

> ID：12435031
> 
> 赞同：0
> 
> 时间：2012-09-15T06:15:13.463
> 
> 标签：javascript, jquery, html, ajax

我有这个页面，你可以在图片中看到。 ![我的页面](../Images/8edeee2013a4d4c2fa3b2f3a5ccf5191.png) 此页面包含三个选项卡。我希望这些选项卡可以与 AJAX 一起使用。因此，如果用户单击这些选项卡（而不是直接地址），我希望它们被打开。但是这些选项卡有表格，您可以看到备份表格。我希望当用户单击提交按钮时，如果发布数据成功，则页面返回此选项卡（例如备份选项卡）。由于使用 AJAX，它不像我想要的那样工作，也没有在响应 div 中显示任何内容。看来 submitSearchForm 功能根本不起作用！你能告诉我有什么问题吗？

**我的 HTML 是：**

```
<form name="backupForm" action="backup/" method="POST" id="backupSubmit">
   //my form fields are here
  <p><input type="submit" onclick="submitSearchForm('backupSubmit')"  value="دانلود"  id="sendButton" style="margin-bottom:10px; cursor:pointer;></p>
<div class="response" style="height: auto;></div> 
```

**我的 AJAX 功能：**

```
function submitSearchForm(id){
                event.preventDefault();
                var temp = $("#"+id).serialize();
                validateForm();
                jQuery.ajax({
                    type:"POST",
                    data:temp,
                    url:'/backup/',
                    success:function(data){
                        $(".response").slideDown(800).html(data);
                    }
                }); 
```

我在views.py中的代码：

```
def backup(request):
    if request.is_ajax():
        if request.method=='POST':
            variables = RequestContext(request,{})
            return render_to_response('backup.html',variables)
        else:
            return render_to_response('backup.html')
    else:
        return render_to_response("show.html", {
            'str': "bad Request! :(",
            }, context_instance=RequestContext(request))
backup = login_required(backup) 
```

编辑：我有一个名为 base.html 的页面。在此页面中，我创建了选项卡，当单击一个选项卡时，将调用该选项卡的 url。我所有的三个标签都有自己的页面。它们不在同一页面中。）

**base.html**

```
{% block extrahead %}
    <script type="text/javascript">
        $( document ).ready( function() {
            $( '#backup_list' ).click( function() {
                $('#firstRemove').remove();
                $( '#backup' ).html( 'waiting ...' ).load( '{% url backup %}');
            });
            $( '#restore_list' ).click( function() {
                $('#firstRemove').remove();
                $( '#restore' ).html( 'waiting ...' ).load( '{% urlrestore %}');
            });
            $( '#expert_question' ).click( function() {
                $('#firstRemove').remove();
                $( '#expertQuestion' ).html( 'waiting ...' ).load( '{% url expertQuestion %}');
            });
        });
        $( document ).ajaxStart( function() {
            $( '#loading' ).fadeIn(400);
        }).ajaxStop( function() {
                    $( '#loading' ).fadeOut(400);

                });
    </script> 
```

{% 端块 %}

```
 <div id="dRtabs">
            <ul class="tabber">
                <li><a id="backup_list" href="#backup">backup</a> </li>
                <li><a id="restore_list" href="#restore">restore</a> </li>
                <li><a id="expert_question" href="#expertQuestion">Expert Question</a> </li>
            </ul>
            <div class="clear"></div>
            <div id="backup" class="tabContent">
                <div id="firstRemove">
                    {% block mSettings_body %}{% endblock %}
                </div>
            </div>
            <div id="restore" class="tabContent">
                loading...
            </div>
            <div id="expertQuestion" class="tabContent">
                loading...
            </div>
        </div> 
```

如果我想在页面加载时默认加载第一个选项卡，我应该怎么做？
EDIT2：我在 jQuery.ajax 之前调用 validateForm 函数，在这个函数中我调用其他三个函数来检查表单验证，如下所示：

```
function validateForm()
    {      
        validateStartDate();
        validateEndDate();
        validateCheckbox();
    } 
```

我检查用户是否没有将这些字段留空。例如 validateStartDate() 是这样的：

```
function validateStartDate()
    {
        var x=document.forms["backupForm"]["startDate"].value;
        if (x==null || x=="")
        {
//            alert("Start date must be filled out");
//            or show a hidden label with this error
            return false;
        }
    } 
```

但它会发出警报，然后执行成功函数中的代码！我不知道为什么会这样，而我写代码强制它返回false。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T07:24:39.667

主要问题是您实际上并没有阻止表单提交，这是执行 AJAX 代码所必需的。`event.preventDefault()`仅当您将`event`对象传递给函数时才有效。

这将起作用：

```
$(function() {
  $('#sendButton').click(function(e) {
      e.preventDefault();
      var temp = $("#backupSubmit").serialize();
      $.ajax({
          type: "POST",
          data: temp,
          url: 'backup/',
          success: function(data) {
              $(".response").slideDown(800).html(temp);
              console.log(data);
          }
      });
  });
});​ 
```

jsFiddle：http: [//jsfiddle.net/G722S/5/](http://jsfiddle.net/G722S/5/)

在`success`函数中，您需要放置提交表单后应执行的所有代码。您的 html 应如下所示：

```
<a href="#" id="tab1" class="tab">Tab1</a>
<a href="#" id="tab2" class="tab">Tab2</a>
<a href="#" id="tab3" class="tab">Tab3</a>

<div class="content" id="page1">
   <!-- content that should show when you click tab1 -->
</div>

<div class="content" id="page2">
   <!-- content that should show when you click tab2 -->
</div>

<div class="content" id="page3">
   <!-- content that should show when you click tab3 -->
</div> 
```

然后对于你的 js，你想要类似的东西

```
$(function() {
 $('.tab').click(function(e) {
    e.preventDefault();
    the_id = $(this).attr("id").replace("tab","page");
    $('.content').hide();
    $('#'+the_id).show();
 });
});​ 
```

不要忘记这个CSS：

```
<style type="text/css">
  #page2, #page3 {display:none;}​
</style> 
```

工作小提琴：http: [//jsfiddle.net/5zbpp/3/](http://jsfiddle.net/5zbpp/3/)

> 如果我希望每当加载页面时，我应该怎么做，它默认加载第一个选项卡？

在 base.html 中，更改：

```
$( document ).ready( function() {
        $( '#backup_list' ).click( function() { 
```

对此：

```
$( document ).ready( function() {
    $( '#backup' ).html( 'waiting ...' ).load( '{% url backup %}');
    $( '#backup_list' ).click( function() { 
```

# php - 拖放 jQuery Ajax 上传

> ID：12435037
> 
> 赞同：0
> 
> 时间：2012-09-15T06:15:53.790
> 
> 标签：php, jquery, file-upload, drag-and-drop

我需要上传通过拖放添加的文件，为此我需要使用 jQUery 和 Ajax。我有一个表单，用户可以通过浏览按钮选择文件，但用户应该能够通过拖放添加文件。我不想使用插件。

用于拖放的 Javascript 有效，但我现在不知道如何实际上传文件（使用 FileReader 的东西？）。这是获取已删除文件的函数（已删除验证代码）。

```
function handleFileSelect(e) {
    e.stopPropagation();
    e.preventDefault();

    var files = e.dataTransfer.files;

    for(var i = 0, f; f = files[i]; i++) {
        //i display the file name and do validation here
    }
} 
```

我希望能够`.ajax`从这里使用 jQuery 上传文件。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T06:17:50.377

这是一个如何在客户端读取文件的教程：

[拖放](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

这是有关如何上传文件的示例。

[html5-文件上传-jquery-php](http://tutorialzine.com/2011/09/html5-file-upload-jquery-php/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T06:19:47.703

用于[`FormData`](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData)通过 ajax 上传文件。

```
var data = new FormData();  
...
data.append('file', files[i]);    
...
$.ajax({..., data: data, contentType: false, processData: false, type: 'POST', ...}); 
```

# php - 致命错误：未捕获的异常“com_exception”和消息“来源：未知 描述：未知”

> ID：12435043
> 
> 赞同：1
> 
> 时间：2012-09-15T06:17:47.640
> 
> 标签：php, exception-handling, activex

有人知道 PHP 中 COM 函数中的这个错误吗？：

```
Fatal error: Uncaught exception 'com_exception'
with message '<b>Source:</b> Unknown<br/><b>Description:</b> Unknown'
in C:\my\php\file\path.php
Stack trace:
#0 C:\my\php\file\path.php: com->init('pincode', NULL)
#1 {main}
thrown in C:\my\php\file\path.php on line 7 
```

我试图在我的 PHP 代码中调用 Activex 以使用它的方法。这是我的PHP代码：

```
<?PHP
$active = new COM("sswATL.crypto");
//------------------------

$pass = "pincode";

$ret = $active->init( $pass , $retVal);

if($retVal == 0){ 
   print "Login successfully";
}
elseif($retVal == 4){

   print "Token is not present";
} 
else
{
   $errMsg = "Login failed : "; 
   print $errMsg;
  }
?> 
```

我相信这`sswATL.crypto`在我的 PHP 中加载得很好，因为当我`init`使用错误的参数调用时，例如`init('pincode')`，我在这个方法中的参数数量上有错误。有任何想法吗？

# android - 如何在自定义 ListView (BaseAdapter) 上实现 AddTextChangedListener

> ID：12435045
> 
> 赞同：0
> 
> 时间：2012-09-15T06:17:51.297
> 
> 标签：android, filter, android-listview, baseadapter, custom-lists

在我的应用程序中，我创建了一个包含 textview、imageview 和按钮的自定义列表视图，并且我能够成功加载该列表中的 json 数据。现在我想实现一个文本观察器，这样我就可以对列表进行排序，并且只能查看那些被编辑文本过滤的项目。

CustomList 活动的代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    lv = (ListView)findViewById(R.id.listView1);
    et1 = (EditText)findViewById(R.id.editText1);
    inflator = getLayoutInflater();
    et1.addTextChangedListener(this);
    JsonParser jParser = new JsonParser();
    JSONObject json = jParser.getJSONfromUrl(url);
    try
    {
        JSONArray explore = json.getJSONArray("explore");
        for(int i=0; i<explore.length(); i++)
        {
            JSONObject exp = explore.getJSONObject(i);
            list.add(exp.getString("username"));
        }
    }
    catch(JSONException e)
    {
        e.printStackTrace();
    }

    srchadptr = new SearchAdapter(this, inflator, list);
    lv.setAdapter(srchadptr);
}

public void afterTextChanged(Editable s) {
    // TODO Auto-generated method stub

}

public void beforeTextChanged(CharSequence s, int start, int count,
        int after) {
    // TODO Auto-generated method stub

}

public void onTextChanged(CharSequence s, int start, int before, int count) {
    // TODO Auto-generated method stub
    srchadptr.getItem(start);
} 
```

SearchAdapter 类 (BaseAdapter) 的代码：

```
public class SearchAdapter extends BaseAdapter {

    Context context;
    LayoutInflater inflater;
    Button btn;
    View vw;
    ArrayList<String> list = new ArrayList<String>();

    public SearchAdapter(Context context,   LayoutInflater inflater, ArrayList<String> list) {
        // TODO Auto-generated constructor stub
        this.context = context;
        this.inflater = inflater;
        this.list = list;
    }

    /*public CharSequence filter(CharSequence cs) {
        return cs;
    }*/

    public int getCount() {
        // TODO Auto-generated method stub
        return list.size();
    }

    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    public View getView(final int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        vw = inflater.inflate(R.layout.list_items, null);
        ImageView img = (ImageView)vw.findViewById(R.id.imageView1);
        TextView tv = (TextView)vw.findViewById(R.id.textView1);
        btn = (Button)vw.findViewById(R.id.button1);
        tv.setText(String.valueOf(list.get(position)));
        btn.setText(String.valueOf(list.get(position)));
        btn.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                Toast.makeText(context, list.get(position), Toast.LENGTH_LONG).show();
            }
        });
        return vw;
    }
} 
```

请帮助我让我知道如何在这个 SearchAdapter 类上实现过滤器......

提前致谢...

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-15T06:48:47.113

您非常接近解决方案，请在您的 getView 方法中进行以下更改。

```
 public View getView(final int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
       View view = super.getView(position, convertView, parent);

            LinearLayout vwParentRow = (LinearLayout) view;

            final EditText yourtextview= ((EditText) vwParentRow.getChildAt(2));
            //let say your edittext is 2nd in the  listview
            yourtextview.addTextChangedListener(yourtextchangelistener);
           ..........

        return view ;
    } 
```

# ruby - 如何在 ruby 中将时区名称转换为短名称

> ID：12435047
> 
> 赞同：2
> 
> 时间：2012-09-15T06:18:24.550
> 
> 标签：ruby, timezone

有没有办法将“America/Los_Angeles”等时区转换为 ruby​​ 中的时区短名称“PDT”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T06:23:35.810

缩写通常是上下文相关的 - 因此“PDT”仅*在夏令时运行时*适用。

从[文档](http://ruby-doc.org/core-1.9.3/Time.html#method-i-strftime)来看，如果你格式化一个`Time`with`strftime`并使用一个格式字符串`%Z`，你应该得到时区缩写。

就我个人而言，我不喜欢使用缩写，因为它们模棱两可并且会引起很多混乱。（例如，我看到人们全年都在使用“PST”，例如，指的是“7/20/2012 9:00 PST”——一个没有意义的日期/时间。）不过那是另一回事 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-26T18:59:24.073

更明确的答案：

```
Time.now.in_time_zone("America/Los_Angeles").strftime('%Z') 
```

# iphone - Xcode 中 iOS 设备的库未找到错误

> ID：12435049
> 
> 赞同：5
> 
> 时间：2012-09-15T06:18:42.257
> 
> 标签：iphone, xcode

我正在尝试在设备上运行我的应用程序，但它为 iPhone 模拟器正常工作的设备提供错误。

```
ld: warning: directory not found for option '-L/Users/Documents/TEST/../CorePlotDemo/CorePlotDemo'
ld: warning: directory not found for option '-L/Users/TEST/../CorePlotDemo/CorePlotDemo'
ld: library not found for -lsqlite3.0
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

如何解决此错误，我也尝试使用 Library Search Path 但无法正常工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-15T06:28:50.820

添加库 libCorePlot-CocoaTouch.a

并在 build Setting -> Search Path -> Library Search Path -> $(inherited) "$(SRCROOT)/Libs/CorePlot" 中设置路径

这是 libCorePlot-CocoaTouch.a 的路径。

# android - 在 android 中获取 GCM 的发件人身份验证令牌

> ID：12435050
> 
> 赞同：1
> 
> 时间：2012-09-15T06:19:15.393
> 
> 标签：android, google-cloud-messaging

在开发者[网站](http://developer.android.com/guide/google/gcm/gcm.html)

凭证中有一个`Sender Auth Token`，但如何获得它？

请告诉我步骤，因为我不清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T06:34:44.783

如下面的文档中所写。

**发件人身份验证令牌：保存在第 3 方应用程序服务器上的 API 密钥，授予应用程序服务器对 Google 服务的授权访问权限。API 密钥包含在发送消息的 POST 请求的标头中。**

您可以从[这里获得 API KEY](https://code.google.com/apis/console)

[你可以在这里](http://developer.android.com/guide/google/gcm/gs.html)获得更多信息

**已编辑**

[DRUPAL中的GCM服务器端实现](http://groups.drupal.org/node/240273)

# google-chrome - 单击 X 按钮时最小化谷歌浏览器而不是关闭窗口

> ID：12435057
> 
> 赞同：6
> 
> 时间：2012-09-15T06:19:50.620
> 
> 标签：google-chrome

我想让 Chrome 永远留在内存中而不是关闭。

是否有扩展/技巧/黑客将 Google Chrome 中的 X（关闭）按钮功能从关闭窗口更改为最小化窗口到任务栏？

# java - 这是定义一个新类还是新实例？

> ID：12435061
> 
> 赞同：1
> 
> 时间：2012-09-15T06:20:30.603
> 
> 标签：java

java新手。不清楚这段代码：

```
ParseQuery query = new ParseQuery("GameScore");
query.getInBackground("xWMyZ4YEGZ", new GetCallback() {
  public void done(ParseObject object, ParseException e) {
    if (e == null) {
      // object will be your game score
    } else {
      // something went wrong
    }
  }
}); 
```

使用`new GetCallback() {....}`，它是实例化 GetCallback 类的实例还是定义 Getcallback 类的子类或两者兼而有之？

这是 Java 在 C/Objective-C 和 Ruby 块中执行匿名函数的方式吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-15T06:24:39.150

它两者兼而有之。它声明了一个匿名内部类（您将在编译的输出中看到相应的 .class 文件）并创建它的一个新实例。

Java 没有办法*只*创建一个匿名函数（从 Java 7 开始）——这已经很接近了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T06:24:48.733

它是匿名类，实际上它既是创建类又是实例。[这里](http://www.cs.rit.edu/~tmh/courses/allJava/Anonymous.html)有一些细节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T06:26:50.777

这就是你正在做的事情：

*   您正在声明一个*匿名*内部类
*   你正在实例化它
*   最后，您将*覆盖*该`public void done(ParseObject object, ParseException e)`方法并提供您自己的定义。

当您想要使用对象的实例时，拥有这样一个匿名内部类的优势与它的有用性有关，该实例对类的实际功能进行某些调整，例如*重载方法*（*如您的情况*），而不必实际子类一个类。

# objective-c - 解决 id 类型的“No known instance method for selector”错误

> ID：12435065
> 
> 赞同：3
> 
> 时间：2012-09-15T06:21:05.687
> 
> 标签：objective-c, xcode

我的 iPhone 应用程序有一个登录视图控制器，可在需要登录时弹出。用户登录后，我有这个：

```
 if ([self.presentingViewController respondsToSelector:@selector(userDidLogin)]) {
        [((id)self.presentingViewController) userDidLogin];
    } else {
        [self.presentingViewController dismissModalViewControllerAnimated:YES];            
    } 
```

但是，编译器一直抱怨“选择器 userDidLogin 没有已知的实例方法”。然后我添加了一个名为`userDidLogin`登录视图控制器的实例方法，当然不是`self.presentingViewController`，然后构建成功。

这种解决方法对我来说是不合理的。它是 Xcode 中的错误还是预期的行为？是后者吗，原理是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T06:35:30.583

编译器需要知道`userDidLogin`选择器的返回类型，以便生成正确的代码：

*   如果消息返回结构，编译器可能需要生成对`objc_msgSend_stret`. （来源：[Greg Parker 的博客](http://sealiesoftware.com/blog/archive/2008/10/30/objc_explain_objc_msgSend_stret.html)。）
*   如果消息返回浮点数，编译器需要（在某些平台上）生成对`objc_msgSend_fpret`. （来源：[Greg Parker 的博客](http://sealiesoftware.com/blog/archive/2008/11/16/objc_explain_objc_msgSend_fpret.html)。）
*   否则，编译器需要生成对`objc_msgSend`.

选择`userDidLogin`器没有参数，但如果选择器确实有参数，编译器还需要知道声明的参数类型，以便正确传递参数。

此外，如果您使用 ARC，编译器需要知道选择器的返回类型和所有权注释，以便它可以在适当时生成返回值的释放。

处理这个问题的常用方法只是`#import`声明`userDidLogin`消息的类的头文件。只要编译器看到选择器在*某处*声明，它就不会抱怨将其发送到`id`.

# iphone - 禁用快速查看

> ID：12435066
> 
> 赞同：4
> 
> 时间：2012-09-15T06:21:06.480
> 
> 标签：iphone, ios, cocoa-touch, ipad

我采用了[此处](https://stackoverflow.com/questions/2774343/how-do-i-associate-file-types-with-an-iphone-application)描述的出色方法将文件类型与我的应用程序相关联。我的问题是，当文件附加到电子邮件并且用户触摸附件时，不是立即加载应用程序，而是用户获得文件内容的“快速浏览”，并且必须单击顶部的按钮右上角以便“打开”我的应用程序。

我想针对我的自定义扩展名（例如“*.CUS”）禁用快速查看，并且我希望电子邮件应用程序在“单击”附件时直接转到我的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T12:31:40.747

在使用 iOS 6 时，这似乎会导致 Cisco 的注册信封服务 (CRES) 出现问题。该服务会加密 secureoc.html 附件中的消息，该附件需要在 Safari 中打开并使用 Javascript 才能运行。现在 iOS 6 使用 quicklook 并且没有提供其他选项，这从本质上破坏了 iOS 6 设备上的 CRES 功能。我想提出一个简单的解决方案来解决这个问题。有没有人有建议的解决方案或解决方法？

# php - JavaScript 错误，即使我没有运行任何 jsp 文件

> ID：12435067
> 
> 赞同：0
> 
> 时间：2012-09-15T06:21:10.227
> 
> 标签：php, javascript, debugging, jsp, google-chrome

谷歌浏览器的控制台框显示以下错误：

```
Uncaught TypeError: Cannot call method 'insertBefore' of null 
```

我使用的文件是 .php、.js 和 .css。目前，我没有使用任何 JSP。

什么在调用`sf_main.jsp`文件？即使在我的头文件中，我也看不到任何 JSP 导入。

# ios - 如何通过一根手指触摸 mkmapview 来绘制一个徒手多边形？

> ID：12435070
> 
> 赞同：6
> 
> 时间：2012-09-15T06:21:25.770
> 
> 标签：ios, mkmapview

我想用一根手指在 Mkmapview 上绘制一个徒手多边形。我知道如何在 UIView 上绘制徒手多边形，并且知道如何调出 mkmapview。

我不知道我是否可以使用覆盖功能，因为我需要在手指移动时绘制多边形。我假设这涉及多点触控事件和drawRect，但是当我把它们放在一起时我无法让它工作。

如果有人可以提供帮助，请提前致谢。

# node.js - passport.js 本地策略 - 使用用户名登录，使用令牌验证以后的请求

> ID：12435075
> 
> 赞同：0
> 
> 时间：2012-09-15T06:23:23.740
> 
> 标签：node.js, passport.js

我在使用本地策略时遇到了 passport.js 问题。我有两个具体问题：

1.  对于最基本的情况，我没有获得持久会话来使用示例代码（见下文）。
2.  我想去无会话。对于最基本的情况，在登录时，我将传递为我提供会话令牌的用户名 + 密码，在常规请求中，我将使用此会话令牌与其他一些东西进行散列来进行身份验证。用护照轻松搞定吗？在这种情况下，护照似乎没有提供太多功能，而且我自己的解决方案更容易 - 只需使用标准检查登录/注销，然后使用一个中间件取消请求令牌以验证请求。容易俗气？

**问题1：**

使用库中的参考代码：

[https://github.com/jaredhanson/passport-local/blob/master/examples/login/app.js](https://github.com/jaredhanson/passport-local/blob/master/examples/login/app.js)

我执行了一系列命令来显示已注销与已登录：

A.查看/account，未登录

```
curl -v localhost:3000/account 
```

正如预期的那样，我重定向到 /login

```
<p>Moved Temporarily. Redirecting to <a href="http://localhost:9292/login">http://localhost:3000/login</a></p> 
```

B、登录

```
curl -v -d "username=bob&password=secret" http://127.0.0.1:3000/login 
```

同样如预期的那样，我重定向到 /

```
<p>Moved Temporarily. Redirecting to <a href="http://127.0.0.1:3000/">http://127.0.0.1:3000/</a></p> 
```

C.查看/account，登录

```
curl -v localhost:3000/account 
```

**我勒个去？？？**

```
<p>Moved Temporarily. Redirecting to <a href="http://localhost:9292/login">http://localhost:3000/login</a></p> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T15:30:52.843

在 1 的情况下，会话支持需要在您的服务器端配置 cookie 并由您的用户代理使用。通常这是一个浏览器，它将在每个请求中传输 cookie，服务器使用它们来恢复您的登录状态。

但是，您使用的 curl 命令不会传输 cookie，因此每个请求对服务器来说都是“新的”，这就是为什么您每次都会看到重定向登录的原因。我怀疑如果您在浏览器中尝试相同的请求，这将按预期工作。

至于 2，我需要更多细节来提出一个好的解决方案。如果您使用 HTML 和 Web 浏览器访问您的网站，您最终将需要像会话这样的东西。您可以每次都在查询参数中传输此信息，而不是在 cookie 中，但您最终会重建 Express/Connect 开箱即用的许多内容。

在任何情况下，如果您选择走这条路，Passport 会提供一个干净的接口来实现您自己的身份验证策略。您只需解析相关凭据的请求并在数据库中查找用户。

API 客户端是不同的，我建议看看 Passport 的 OAuth 支持，它提供了简单的方法来验证与特定客户端关联的访问令牌。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T03:07:35.487

问题不在于护照，该`curl`命令需要存储 cookie，因此`-c`应该`-b`使用参数来模拟浏览器行为。从 curl 联机帮助页：

`curl -b cookies.txt -c cookies.txt www.example.com`

该命令的作用是将 cookie 存储在 cookies.txt 中并发送从 cookies.txt 读取它们的 cookie - 这是 curl 模仿 netscape cookie-jar 文件格式进行写入和读取的方式。

至于你的问题本身，贾里德已经回答了！

# javascript - 如何使用 jquery 或 Javascript 将 div 内容替换为其他 div？

> ID：12435079
> 
> 赞同：0
> 
> 时间：2012-09-15T06:24:01.970
> 
> 标签：javascript, jquery-ui, asp.net-web-api

大家好，我有一些我在我的视图中动态附加到 div 的内容....我有三个针对不同方法的 ajax 调用....首先我在 div 中显示产品的所有图像....如果用户选择价格范围，产品将仅显示该价格范围，颜色相同..我想要的是当用户选择价格范围或颜色时，我想要这个带有所有图像的 div 应该用新图像替换怎么能我这样做任何人都可以在这里帮助我

```
 <script type="text/javascript">
     $(document).ready(function () {            
         $.getJSON("/api/ProductLayout", function (data) {                 
             $.each(data, function (idx, ele) {
                 $("#makeMeScrollable").append('ProdcutID'+'<span>' + ele.ProductID +
                                  '</span>ProductName<span>' + ele.ProductName + '</span>Price<span>' + ele.Price + '</span>');
                 $("<img/>").attr({ src: ele.ImageURL }).appendTo("#makeMeScrollable");
             });
             scrollablediv();
         });
     });
     function scrollablediv() {             
         $("div#makeMeScrollable").smoothDivScroll({
             mousewheelScrolling: true,
             manualContinuousScrolling: true,
             visibleHotSpotBackgrounds: "always",
             autoScrollingMode: "onstart"
         });
     }
</script>
<script type="text/javascript">
    $(function () {
        $("#slider-range").slider({
            range: true,
            min: 0,
            max: 500,
            values: [0,0],
            slide: function (event, ui) {
                $("#amount").val("$" + ui.values[0] + " - $" + ui.values[1]);
            },
            change: function (event, ui) {
                // when the user change the slider
            },
            stop: function (event, ui) {
                // when the user stopped changing the slider                    
                $.get("/api/ProductLayout", { firstPrice: ui.values[0], secondPrice: ui.values[1] }, function (data) {                        
                    $.each(data, function (idx, ele) {
                        $("#makeMeScrollable").append('<lable>ProdcutID:</label>' + '<span>' + ele.ProductID +
                                  '</span><br/><lable>ProductName:</label><span>' + ele.ProductName + '</span><br/><label>Price:</label><span>' + ele.Price + '</span>');
                        $("<img/>").attr({ src: ele.ImageURL }).appendTo("#makeMeScrollable");
                    });                        
                });
            }
        });
        $("#amount").val("$" + $("#slider-range").slider("values", 0) +
        " - $" + $("#slider-range").slider("values", 1));
    });
</script>
<script type="text/javascript">
    function getproductbycolor(colours) {
        alert(1);
        $.get("/api/ProductLayout", { color: colours }, function (data) {
            alert(data.toString());
            $.each(data, function (idx, ele) {
                $("#makeMeScrollable").append('<lable>ProdcutID:</label>' + '<span>' + ele.ProductID +
                                  '</span><br/><lable>ProductName:</label><span>' + ele.ProductName + '</span><br/><label>Price:</label><span>' + ele.Price + '</span><br/><label>Product Color:</label><span>'+ele.ProductColor+'</span>');
                $("<img/>").attr({ src: ele.ImageURL }).appendTo("#makeMeScrollable");
            });
        });
    }

</script> 
```

这是我的html

```
 <div id="makeMeScrollable" style="height: 400px; width: 400px;">

</div> 
```

我应该只将所有图像附加到上面的 div 替换以前的图像

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T06:58:26.717

正如 jaswant 所说，您可以使用 .empty() 方法，但不能使用 .empty().append() 这样做的是，它会在绑定新记录时清空数据，因此在您的 ajax 调用之前使用 .empty() 方法或json调用

```
 $("#makeMeScrollable").empty(); 
```

在您的 ajax 调用之前添加上述行

```
 <script type="text/javascript">
function getproductbycolor(colours) {
    alert(1);
   $("#makeMeScrollable").empty();
    $.get("/api/ProductLayout", { color: colours }, function (data) {
        alert(data.toString());
        $.each(data, function (idx, ele) {
            $("#makeMeScrollable").append('<lable>ProdcutID:</label>' + '<span>' + ele.ProductID +
                              '</span><br/><lable>ProductName:</label><span>' + ele.ProductName + '</span><br/><label>Price:</label><span>' + ele.Price + '</span><br/><label>Product Color:</label><span>'+ele.ProductColor+'</span>');
            $("<img/>").attr({ src: ele.ImageURL }).appendTo("#makeMeScrollable");
        });
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T06:32:48.417

试试这个，

```
$("#makeMeScrollable").html('ProdcutID<span>' + ele.ProductID +
  '</span>ProductName<span>' + ele.ProductName + '</span>Price<span>' + 
  ele.Price + '</span><img src="' + ele.ImageURL + '" />'); 
```

您始终可以使用`html()`代替`append()`来删除现有内容。

或者你可以在追加之前清空元素`.empty().append()`

**编辑**（评论后）

```
 var $div = $("#makeMeScrollable");
    $div.empty();
    $.each(data, function (idx, ele) {.append('ProdcutID' + '<span>' + ele.ProductID + '</span>ProductName<span>' + ele.ProductName + '</span>Price<span>' + ele.Price + '</span>');
        $("<img/>").attr({
            src: ele.ImageURL
        }).appendTo("#makeMeScrollable");
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T07:10:40.937

您应该在成功处理程序中将空作为第一个操作。由于调用是异步的，如果在进行 ajax 调用之前清除该区域，您将面临产品相互干扰的风险。

```
$(document).ready(function () {            
  $.getJSON("/api/ProductLayout").success(function (data) {
    clearProductDisplayArea();
    displayProductInfo(data);
    scrollablediv();
  });
});

function clearProductDisplayArea(){
  $("#makeMeScrollable").empty();
}

function displayProductInfo(data){
  $.each(data, function (idx, ele) {
    $("#makeMeScrollable").append('ProdcutID'+'<span>' + ele.ProductID +
       '</span>ProductName<span>' + ele.ProductName + '</span>Price<span>' + ele.Price + '</span>');
    $("<img/>").attr({ src: ele.ImageURL }).appendTo("#makeMeScrollable");
  });
} 
```

# c# - 将大 int（不是 BigInt 值）发送到 WCF 服务时出错

> ID：12435084
> 
> 赞同：1
> 
> 时间：2012-09-15T06:24:56.563
> 
> 标签：c#, wcf, sql-server-2008

我有这样的服务方法：

```
[OperationContract]
public void CreateIcd9(int icd9ID, string code, string description, string specialty)
{          
    var count = from icd in clogicEntities.ICD9
                where icd.ID == icd9ID
                select icd;

    if (count.Count() >= 1)
    {
        var icd9 = clogicEntities.ICD9.Where(icd => (icd.ID == icd9ID)).SingleOrDefault();
        if (icd9 != null)
        {
            icd9.CODE = code;
            icd9.DESCRIPTION = description;
            icd9.SPECIALTY = specialty;
        }
    }
    else
    {
         ICD9 icdNew =  new ICD9()
         {
             ID = icd9ID,
             CODE = code,
             DESCRIPTION = description,
             SPECIALTY = specialty
         };                

        // Insert Icd9
        clogicEntities.ICD9.AddObject(icdNew);
    }

    clogicEntities.SaveChanges();
} 
```

直到今天一切都很好，当我调用这个方法时我得到了一个异常，`icd9ID = 1992401733` 我得到了这个异常：

```
An error occurred while updating the entries. 
See the inner exception for details. ----> System.Data.SqlClient.SqlException: Cannot insert the value NULL into column 'ID', table '1224-CLOGIC.dbo.ICD9'; column does not allow nulls. INSERT fails.
The statement has been terminated 
```

我尝试重现此问题但没有运气，我想知道这是 MAX Int 问题：2147483647 - MAX Int 1992401733 - 我的价值请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T06:32:36.980

我发现我的问题是 EF 上的 ICD9 表，ID(pk) Identity(1,1) 但在 SQL ICD9 表上 - ID(pk) Identity = false 所以当

```
clogicEntities.ICD9.AddObject(icdNew); 
```

它只是将没有 ID 的 3 个值（代码、描述、专业）传递给 SQL。我将 0 int 值传递给服务的原因是我在更改参数后忘记了更新服务引用。

问候。

# node.js - 如何知道nodejs进程完成了？

> ID：12435086
> 
> 赞同：0
> 
> 时间：2012-09-15T06:25:51.503
> 
> 标签：node.js

嗨，有一些nodejs代码如下：

```
console.log("Start", new Date().getTime()); 
var fs = require('fs');
for (var i = 1; i < 10; i++) {
    fs.readFile("file1.zip",function(err, data) {
      if(err)
        console.log("read error: ", err);
      else {
            fs.writeFile(__dirname + "/file2.zip", data , function(err) {
                if(err) {
                    console.log("write error: ", err);
                }           
            }); 
      }
    });
};
console.log("Finished", new Date().getTime()); 
```

我想得到所有工作完成后的开始和结束时间，但第二个日志似乎为时过早

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T06:36:20.127

而不是`console.log("Finished", new Date().getTime());`你可能想尝试：

```
process.on('exit', function () {
  console.log("Finished", new Date().getTime());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T11:32:32.777

由于节点的异步行为，第二个日志函数被调用得太早。你必须把它放在最后一个回调中：

```
console.log("Start", new Date().getTime());
var fs = require('fs');
for (var i = 1; i < 10; i++) {
  fs.readFile("file1.zip",function(err, data) {
    if(err) {
      console.log("read error: ", err);
    } else {
      fs.writeFile(__dirname + "/file2.zip", data , function(err) {
        if(err) {
          console.log("write error: ", err);
        }
        // Put it here
        console.log("Finished", new Date().getTime());
      }); 
    }
  });
}; 
```

# rest - Ember 数据存储 PUT 请求

> ID：12435095
> 
> 赞同：2
> 
> 时间：2012-09-15T06:28:42.070
> 
> 标签：rest, datastore, ember-data

有没有办法在使用 ember 数据存储 REST 适配器发送的“放置”请求中包含“有很多”模型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T02:13:56.740

您可以通过在适配器上定义嵌入记录

```
Comment = DS.Model.extend({
  votes: DS.hasMany(Vote)
});

Adapter.map(Comment, {
  votes: { embedded: 'always' }
}); 
```

[https://github.com/emberjs/data/blob/master/packages/ember-data/tests/integration/embedded/embedded_dirtying_test.js#L53](https://github.com/emberjs/data/blob/master/packages/ember-data/tests/integration/embedded/embedded_dirtying_test.js#L53)

# layout - UI 不固定在 BlackBerry 的 VerticalFieldManager 中绘制背景？

> ID：12435096
> 
> 赞同：0
> 
> 时间：2012-09-15T06:28:45.020
> 
> 标签：layout, blackberry

我准备了一个屏幕，允许用户在其中创建帐户。如第一张图片所示，我使用图像（bg_BB.png 图像）作为`MainScreen`背景，之后我拍摄了另一个 VFM 并在该垂直字段管理器上绘制了白色背景（white_bg2.png）并在该 VFM 上添加了我的所有字段.

但是当键盘弹出时，问题就出现了。如第二张图片所示，所有字段都漂浮在背景上。

下面是我正在使用的代码：

```
Bitmap backGroundImage = Bitmap.getBitmapResource("bg_BB.png");
((VerticalFieldManager) getMainManager()).setBackground(BackgroundFactory.createBitmapBackground(backGroundImage));

final Bitmap tabBackGroundImage = Bitmap.getBitmapResource("white_bg2.png");

_mainVfm = new VerticalFieldManager(Field.USE_ALL_WIDTH) {

    protected void paint(Graphics graphics) {
        int y = CreateUserAccountScreen.this.getMainManager().getVerticalScroll();
        graphics.drawBitmap(0, y, 
                            tabBackGroundImage.getWidth(), 
                            tabBackGroundImage.getHeight(), 
                            tabBackGroundImage, 
                            0, 0 );

        super.paint( graphics );
    }
}; 
```

![在此处输入图像描述](../Images/7385dba11a3ff6ea4871277f20f09e9c.png) ![在此处输入图像描述](../Images/beb9eebabd8d6043c17707a7900ef39a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T18:29:52.383

**将您的代码替换为：**

```
Bitmap tabBackGroundImage = Bitmap.getBitmapResource("white_bg2.png");
VerticalFieldManager _mainVfm = new VerticalFieldManager(Manager.VERTICAL_SCROLL | 
          Manager.VERTICAL_SCROLLBAR|
          Manager.USE_ALL_WIDTH);
_mainVfm.setBorder( BorderFactory.createBitmapBorder(
               new XYEdges(12,12,12,12), tabBackGroundImage
       )
); 
```

确保您的边框图像具有白色背景。
我使用这种方法，效果很好。

# php - 如何在同一页面中设置 $get？

> ID：12435098
> 
> 赞同：0
> 
> 时间：2012-09-15T06:29:24.177
> 
> 标签：php

```
<a data-toggle="modal" href="msg_id=<?php echo $id; ?>#example" class="link_comment">Comment</a>

<div id="example" class="modal" style="display: none; ">
Your message ID is :
<?php
echo $msg_id = $_GET['msg_id'];
?>
</div> 
```

当我尝试将鼠标悬停到评论链接时，在状态 URL 中：我可以看到 msg_id 值。但是当我尝试单击评论链接（我使用 Jquery 模式）时，它无法显示链接的值。

所以我的问题是，如何才能使 msg_id 的值显示在 Jquery 模态中。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T07:50:20.270

由于您使用 jquery Modal 打开#example div，它不会重新加载页面，因此 $_GET 是空的。您可以通过至少 2 种方式实现您的目标：

1.  单击链接时，使用 Ajax 加载#example div 的内容。

    ```
    <a data-toggle="modal" href="<?php echo $id; ?>#example" class="link_comment">Comment</a>

    <script type='text/javascript'>
    $('.link_comment').click(function(e) {
    e.preventDefault();
    var id = $(this).attr('href');
    $.get('givemycomments.php?id='+id, function(data) {
      $('#example').html(data);
    });
    });
    </script> 
    ```

2.  使用 php.ini 渲染页面时加载所有可能的内容。例如，您将有 #example_1 、 #example_2 div。单击链接时，获取其 ID 的值，并使用正确的 div 触发 Modal。**编辑：**编写示例代码后，我意识到如果你有很多评论，加载它们可能会很重。

# c# - 为什么在 C# 中单击 winform 中的 datagridview 的单元格时会出现此异常？

> ID：12435101
> 
> 赞同：-3
> 
> 时间：2012-09-15T06:29:33.190
> 
> 标签：c#, vb.net, winforms, exception, code-conversion

我在 vb.net 中有一个我想在 C# 中使用的代码。代码是：

```
Dim cell As DataGridViewImageCell = CType(tempGrid.Rows(e.RowIndex).Cells(e.ColumnIndex), DataGridViewImageCell) 
```

我正在尝试获取相应的 C# 代码：

```
public void gridmouseclick(object sender, MouseEventArgs e)
    {
        int i;
        DataGridViewCell cell;

        for (i = 0; i <= 1 - 1; i++)
        {
            cell = (DataGridViewCell)grid[i].Rows[e.X].Cells[e.Y];   
            if (e.Button == MouseButtons.Left)
            {
                cell.Value = imglst.Images[1];
            }
            else if (e.Button == MouseButtons.Right)
            {
                cell.Value = imglst.Images[0];
            }
        }
    } 
```

`imglst`是的`ImageList`，所以现在当我单击网格单元格时出现异常，异常是：

```
Index was out of range. Must be non-negative and less than the size of the collection.
Parameter name: index 
```

我正在分配`gridmouseclick`这样的......

```
grid[i].CellMouseClick += new DataGridViewCellMouseEventHandler(this.gridmouseclick); 
```

我该如何摆脱这个异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T06:30:56.310

这是在 C# 中：

```
DataGridViewImageCell cell = (DataGridViewImageCell)tempGrid.Rows[e.RowIndex].Cells[e.ColumnIndex]; 
```

关键点：

1.  `CType(SourceObject, TargetType)`cast 写为`(TargetType)SourceObject`.
2.  索引`Object(index)`是用方括号写的`Object[index]`
3.  `Dim ObjectName as Type`声明写成`Type ObjectName`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T06:38:37.753

简单的

```
DataGridViewImageCell cell = 
(DataGridViewImageCell)tempGrid.Rows[e.RowIndex].Cells[e.ColumnIndex]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T07:29:23.950

请更改类型：

```
DataGridViewImageCell cell =  (DataGridViewImageCell)tempGrid.Rows[e.RowIndex].Cells[e.ColumnIndex]; 
```

# jquery - Jquery blur() 异常

> ID：12435103
> 
> 赞同：2
> 
> 时间：2012-09-15T06:30:13.287
> 
> 标签：jquery, ajax

假设我使用`blur()`事件验证了电子邮件 ID，我正在这样做：

```
$('#email').blur(function(){
    //make ajax call , check if duplicate email exist and if duplicate is there do :
    $('#email-error').html('duplicate email exisit');
}); 
```

但是，当我使用`blur()`并且如果我在输入框上，单击其他地方（发生模糊事件）并且如果我切换到另一个选项卡并再次返回到（浏览器的）选项卡，我的页面会冻结，有人可以给我一个替代方案，到这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T06:39:28.153

**[使用.change](http://api.jquery.com/change/)**函数代替模糊。更改事件在其值更改时发送到元素。无论数据是否已更改，每次文本框失去焦点时，您的**模糊事件**或**focusout 事件**都将不必要地触发 ajax 请求。

```
$('#email').change(function(){
   //make ajax call , check if duplicate email exist and if duplicate is there do :
   $('#email-error').html('duplicate email exisit');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T06:43:43.473

而不是像这样添加模糊

```
$('#email').focusout(function(){  
    $('#email-error').html('duplicate email exisit');
}); 
```

# c - 数组名作为变量

> ID：12435105
> 
> 赞同：2
> 
> 时间：2012-09-15T06:31:25.453
> 
> 标签：c, arrays, pointers

我正在查看 K&R，它说数组名称不是变量，它不能用于 a=pa 或 a++ 等结构。

这里不是`s`数组名吗？

```
 #include<stdio.h>
    main(){
        printf("%d", strlen("test"));
    }

    int strlen(char s[])
    {
        int n;
        for (n = 0; *s!= '\0';s++) // why is s++ valid even though it is declared as an array
            n++;
        return n;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T13:52:44.247

从[马口中](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)：

> ### 6.3.2.1 左值、数组和函数指示符
> 
> ...
> 3 除非它是运算`sizeof`符、运算符`_Alignof`或一元`&`运算符的操作数，或者是用于初始化数组的字符串文字，否则类型为 ''array of *type* '' 的表达式将转换为表达式类型 ''pointer to *type* '' 指向数组对象的初始元素并且不是左值。如果数组对象具有 `register`存储类，则行为未定义。

该表达式`"test"`是一个字符串字面量，其类型为“5 元素数组`char`”。当您`"test"`作为 的参数传递时`strlen`，根据上面的规则，实际传递的是一个指针，其值是 中第一个字符的地址`"test"`。

这让我们...

> ### 6.7.6.3 函数声明器（包括原型）
> 
> ...
> 7 将参数声明为“*类型*数组”应调整为“指向 *类型*的限定指针”，其中类型限定符（如果有）是`[`在数组类型派生的 and ] 中指定的那些. 如果关键字`static`也出现在数组类型派生的`[`and`]`中，那么对于函数的每次调用，对应的实际参数的值应提供对数组的第一个元素的访问，该数组的元素至少与大小指定的一样多表达。

所以在原型中`strlen`，`char s[]`等价于`char *s`；`s`被声明为指向 的指针`char`，而不是 的数组`char`。

与其他语言相比，C 对数组的处理有点巴洛克式的。这部分是由于 BCPL 和 B 遗产。如果您对原因感到好奇，可以阅读 dmr 的[The Development of the C Language](http://cm.bell-labs.com/who/dmr/chist.html)以获得一些见解。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-15T06:32:22.443

不，在这种情况下，它是指向 a 的指针`char`。您的函数声明**完全**等同于：

```
int strlen(char *s) 
```

正如您将看到的，实际上不可能将数组传递给函数：指向第一个元素的指针是实际传递的内容。

因此，因为`s`它实际上是一个指针而不是一个数组，所以您可以随意修改它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T06:34:36.540

不，`s`实际上是一个指针名称。声明`int strlen(char s[])`与`int strlen(char *s)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-15T06:58:48.847

当 Char s[]={...} 被声明时，地址被附加到 s，它永远不会改变（如常量指针），任何试图改变这个属性的东西都会变成非法操作，比如 s++。

但是在函数调用*int strlen(char s[])*中，数组作为指针传递。

# php - PHP & Ajax：在 AJAX 中将 time_zone 作为参数传递

> ID：12435106
> 
> 赞同：0
> 
> 时间：2012-09-15T06:31:27.803
> 
> 标签：php, ajax

我正在尝试在 Ajax 请求中传递时区参数

像

```
 alert(meeting_time);
        alert(meeting_timezone);
    $.ajax({ 
        type: "GET",  
        url: "http://webfaction/UI/user/joinmeeting.php",  
        data: "user_names="+ user_names + "&image=" +file+"&duration="+ duration +"&user_name="+ user_name + "&meeting_id=" + meeting_id + "&moderator_password=" + moderator_password +"&attendee_password=" + attendee_password +
        "&meeting_time=" + meeting_time + "&meeting_timezone=" + meeting_timezone + "&meeting_sms_no=" + meeting_sms_no + "&meeting_logout_url=" + meeting_logout_url +"&meeting_maxp=" + meeting_maxp +"&meeting_name=" + meeting_name ,
        success: function(json){  
               alert(json);
              $('#show_ajax').hide();
            if(!json.error) location.reload(true);

        }, 
```

现在我的问题是在ajax请求之前

```
alert(meeting_timezone);  is printing  `GMT +8.00` 
```

但在 joinmeeting.php 页面上

```
 $meeting_timezone = $_GET['meeting_timezone'];   

   print $meeting_timezone; 
```

上面的打印语句正在打印值`GMT 8.00`

（+ 符号未在此处打印）

请告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T06:37:19.230

这是使用 POST 和 GET 方法时的已知情况，您的 + 符号将转换为空格。通过 POST 或 GET 传递数据的正确方法是`encodeURIComponent`在 JavaScript 中使用。

例如，在您的情况下，请在发送之前执行此操作：

```
meeting_timezone = encodeURIComponent(meeting_timezone); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T06:40:47.117

如果你在 JavaScript 中编码你的 URL

```
encodeURIComponent(uri) 
```

像这样：

```
data: encodeURIComponent(("user_names="+ user_names + "&image=" +file+"&duration="+ duration +"&user_name="+ user_name + "&meeting_id=" + meeting_id + "&moderator_password=" + moderator_password +"&attendee_password=" + attendee_password +
        "&meeting_time=" + meeting_time + "&meeting_timezone=" + meeting_timezone + "&meeting_sms_no=" + meeting_sms_no + "&meeting_logout_url=" + meeting_logout_url +"&meeting_maxp=" + meeting_maxp +"&meeting_name=" + meeting_name ) 
```

也看看这个问题：

[如何在 Javascript 中对 URL 进行编码？](https://stackoverflow.com/questions/332872/how-to-encode-a-url-in-javascript)

可能有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T06:55:41.000

不要将`data:`参数指定为字符串，而是使用对象：

```
data: { user_names: user_names,
        image: file,
        ...
        meeting_timezone: meeting_timezone,
        ...
      } 
```

然后，jQuery 将负责将其正确转换为查询字符串。

# vb.net - Devart DotConnect for SQLite 4.2.77 升级难度与VB现有项目

> ID：12435107
> 
> 赞同：0
> 
> 时间：2012-09-15T06:31:30.833
> 
> 标签：vb.net, devart, dotconnect

我刚刚从以前的版本升级到 DotConnect for SQLite 4.2.77（对不起，不记得版本了）。在 VB Express 2010 中，我已经成功完成了帮助中描述的手动安装组件。但是，当我打开之前创建的项目时，在使用 DotConnect 代码的任何地方都会列出几十个错误，而且我无法比标题为“在加载设计器之前防止可能的数据丢失，必须解决以下错误”页面更进一步： ”。我还安装了 Visual Studio 2012 for Desktop Applications，我得到了类似的结果。关于如何解决问题的任何想法？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T10:32:14.397

我们已经在[http://forums.devart.com/viewtopic.php?t=24921](http://forums.devart.com/viewtopic.php?t=24921)回复了您。

# ruby-on-rails - 表加入导轨 2

> ID：12435113
> 
> 赞同：1
> 
> 时间：2012-09-15T06:32:52.770
> 
> 标签：ruby-on-rails, ruby-on-rails-2

我在 rails 2 工作，我有一个表用户和其他表 lms_users。在 lms_users 表中，来自 users 表的 id 作为外键出现。我想以这种方式加入两个表，所以我只得到那些条目不在 lms_users 中的用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-19T08:58:53.003

```
class User
  named_scope :not_in_lms_users, {
    :conditions => [ "users.id NOT IN (SELECT user_id FROM lms_users)" ]
  }
end 
```

或者

```
class User
  named_scope :not_in_lms_users, {
    :conditions => "lms_users.user_id IS NULL",
    :joins => "LEFT OUTER JOIN lms_users ON lms_users.user_id = users.id"
  }
end 
```

只是检查，但我认为第二个更有效。这应该工作：

```
User.not_in_lms_users 
```

# objective-c - xcode中奇怪的segue动画

> ID：12435114
> 
> 赞同：0
> 
> 时间：2012-09-15T06:32:54.730
> 
> 标签：objective-c, ios, xcode, uistoryboardsegue

好吧，伙计们，这正在杀死我。我的故事板上连续有 10 个“视图控制器”。所有十个都使用相同的 .h 和 .m 文件。每个都有一个连接到下一个的segue。所有的 segue 都有以下标识符：segueToNextPage。我用这种方法调用segue：

```
-(void)myMethod {
// other code 

[NSTimer scheduledTimerWithTimeInterval:4 target:(self) selector:@selector(nextPage) userInfo:(nil) repeats:NO];
}

-(void)nextPage {

    [self performSegueWithIdentifier: @"segueToNextPage" sender: self];
} 
```

在情节提要上，我将 segue 的过渡设置为交叉溶解。我还将情节提要上所有“视图控制器”的过渡样式设置为交叉溶解。segue 在调用时工作正常，除了它执行这个角到角的旋转/翻转动画，而不是像我预期的那样交叉溶解。

我做了一个只有两页的测试项目，以确保我不会失去理智，并且如果我使用此代码并将其连接到圆形矩形按钮，一切都会按预期工作：

```
-(IBAction)nextPage {

    [self performSegueWithIdentifier: @"segueToNextPage" sender: self];
} 
```

谁能抽出时间来解释为什么我的第一个示例没有按预期工作。这将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T10:30:46.480

我复制了你的代码，它似乎没有问题。我能想到的唯一问题是，通过在 StoryBoard 中多次定义“segueToNextPage”segue，您每次都可能覆盖其定义。您应该检查每个转换并确保其中一个未设置为“水平翻转”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T09:37:21.673

Im still not sure whats causing this to happen with those ten "view controllers" on the storyboard but making a new .h and .m with the exact same code in it then hooking those to ten new view controllers on the storyboard has fixed the issue. I was even able to copy and paste the contents of the original view controllers into the new ones. Still very strange but for now problem solved.

# javascript - 如何更改文本 使用 Jscript 吗？

> ID：12435118
> 
> 赞同：0
> 
> 时间：2012-09-15T06:33:19.853
> 
> 标签：javascript, asp.net-mvc-3

我正在开发 MVC 应用程序并使用剃刀语法。

在这个应用程序中，我提供评论功能。

我用

> 显示评论

段

```
<p id="ClassPara" class="ShowComments" onclick="chkToggle()">Show Comments</p> 
```

现在，当用户单击“显示评论”时，我切换了`Div`，在该 div 中显示评论。

现在，我想将段落的文本从“显示评论”更改为“隐藏评论”，当用户点击该段落时。

但我无法将文本更改为“隐藏评论”...它一直显示“显示评论”怎么做？

我的代码是....

```
<script src="../../Scripts/jquery.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $(".ShowComments").click(function () {
            $(".ParentBlock").slideToggle("slow");
            if ($('.ShowComments').text = "Show Comments"
            {
               $('.ShowComments').text('Hide');
            }
            else
            {
               $('.ShowComments').text('Show Comments');
            }
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T06:35:22.123

.text 不是属性而是方法

.text("显示评论") 或 .text("隐藏评论")

为了比较它的 .text() === "Show Comments"

更新了您的代码并修复了一些错误。

```
<script src="../../Scripts/jquery.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $(".ShowComments").click(function () {
            $(".ParentBlock").slideToggle("slow");
            if ($('.ShowComments').text() === "Show Comments")
            {
               $('.ShowComments').text('Hide');
            }
            else
            {
               $('.ShowComments').text('Show Comments');
            }
        });
    });
</script> 
```

您还在 if 条件中使用了赋值运算符而不是比较运算符。== 或 === 不是 =

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T06:50:58.597

您可以使用回调函数来执行`.text()`如下方法并简化代码。

```
$(document).ready(function() {
    $(".ShowComments").click(function() {

        $(".ParentBlock").slideToggle("slow");

        // here instead of .ShowComments you should use
        // this, where this refers to clicked element

        $(this).text(function(i, oldText) {
            return oldText == 'Show Comments' ? 'Hide' : 'Show Comments';
        });
    });
});​ 
```

# java - JAVA 链表问题

> ID：12435119
> 
> 赞同：-2
> 
> 时间：2012-09-15T06:34:01.833
> 
> 标签：java, linked-list

我在使用 java.util.LinkedList 时遇到问题。即使在将元素添加到列表后，我在列表上使用 poll() 时也会出现空指针异常。我没有使用线程或任何类似于线程的东西。
任何帮助表示赞赏。下面是从另一个类的 main 方法调用的 myMethod 代码：

```
 void myMethod(Node start, int startRow){
    LinkedList<Node> queue = new LinkedList<Node>();
    LinkedList<Integer> rowQueue = new LinkedList<Integer>();

    queue.addFirst(start);
    rowQueue.addFirst((Integer)startRow);
    System.out.println( rowQueue.size() );      

    while (queue.size()!=0){            
        Node n = queue.poll();
        int row = rowQueue.poll().intValue(); //This is the line 33 in the error!
            /*Some remaining code which uses variables n and row. The thread of control does not reach here */

    }
  } 
```

下面是输出：

```
Exception in thread "main" java.lang.NullPointerException
    at BFS.isConnected(LinkedListTest.java:33)
    at GraphsMain.main(GraphsMain.java:36)
1
ZERO 
```

我很困惑，因为打印语句在错误之后执行，而且显然我已经以相反的方式编写了它们。这是一个线程问题吗？我知道 LinkedLists 不同步，但这就是问题所在吗？我应该担心它只是为了一个简单的实现吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T06:42:43.333

假设您的*队列中有一些元素，而**rowQueue*中没有任何元素。然后您在 while 循环中的逻辑将按如下方式工作：

*   `Node n = queue.poll();`将从队列中获取第一个也是*唯一*的元素并存储在 n 变量中。

*   它会检查*rowQueue*的大小是否为零。如果是，它将打印一个零

*   但是，*您的问题出在此处*，它仍然会`poll()`再次尝试，这次获取 null 并调用`intValue()`返回的值，从而导致 NullPointerException

这样的问题在于您的代码中的以下逻辑：

```
 if(rowQueue.size() == 0){
            System.out.println("ZERO");
        }
        int row = rowQueue.poll().intValue(); 
```

在检查是否`rowQueue.size()`为 0 时，如果为真，则不仅应打印*零*，还应确保不执行`int row = rowQueue.poll().intValue();`. 所以你应该考虑打破循环或类似的东西。

所以你应该尝试这样的事情：

```
 if(rowQueue.size() == 0){
            System.out.println("ZERO");
            break; //This ensures that you come out of the loop
        }
        int row = rowQueue.poll().intValue(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T06:39:51.743

[`LinkedList<E>.poll()`](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedList.html#poll%28%29)返回链接列表中的对象，如果列表为空，则返回 null。当您尝试从中检索整数值时，您的列表很可能是空的，因为您没有将该调用放在列表大小的检查中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T06:46:24.693

你所缺少的只是一个`else`声明，你得到 a 的原因`NullPointerException`是因为里面有`ZERO`项目`rowQueue`（在第 33 行引用）。

[![清零](../Images/a47692bd9771a3360191ee62984b2ba1.png)](https://i.stack.imgur.com/Vx42e.png)
[（来源：[iforce.co.nz](http://iforce.co.nz/i/bnphs3ty.dvk.png)）]

```
 int row; //declare and (optional : initialize it to something)
    //only poll the linkedlist if there is something in it...
    if(rowQueue.size() == 0){
        System.out.println("ZERO");
    } else {
     row = rowQueue.poll().intValue();
    } 
```

# python - Django 查询集粒度

> ID：12435120
> 
> 赞同：0
> 
> 时间：2012-09-15T06:34:13.607
> 
> 标签：python, django

假设我有一张桌子，每人每天有一条记录，记录该人当天摄入的总卡路里。

现在假设 Tom 有 30 天的卡路里历史，而 Dani 在这张桌子上有 365 天的卡路里历史。

我如何在 Dani 的卡路里历史记录上运行 Django 查询集，获取卡路里读数，收集总共 30 条记录，彼此相隔 10 天，这样如果我为两个人运行相同的代码，我将得到两个他们 - 30 条记录，而不是 Tom 的 30 条记录和 Dani 的 365 条记录。

即：如果总记录数超过30，我需要粒度。如果超过30，我需要10天（或多或少）的粒度。

我希望我的解释是可以理解的。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-15T09:44:05.893

我会通过编写自定义 sql 来解决这个问题。对于 postgres 我可以做这样的事情

```
select * from
    (select row_number() over(order by id) as row_num, * 
    from calorie
    where user_id = 12345
    order by id) as q
where row_num % ((select count(*) 
          from calorie 
          where user_id = 12345)/30) = 0 
```

在这里，首先我查询了一个用户的整个查询并给他们 row_numbers

```
select row_number() over(order by id) as row_num, * 
        from calorie
        where user_id = 12345
        order by id 
```

然后我发现了行之间的距离：

```
((select count(*) 
          from calorie 
          where user_id = 12345)/30) 
```

这是 30 行，如果我得到的 30 行少，它会被零除。然后我得到了唯一可以被 row_distance 整除的行

```
row_num % row_distance = 0 
```

您也可以使用对我来说似乎更容易的采样。也适用于少于 30 的行号

```
select *
from calorie 
where user_id = 12345
order by random()
limit 30 
```

# nginx - 静态文件和反向代理的 Nginx 映射

> ID：12435124
> 
> 赞同：2
> 
> 时间：2012-09-15T06:35:05.497
> 
> 标签：nginx, reverse-proxy

我正在尝试，没有运气（得到 404s），让 nginx 为某个子目录下的请求提供静态文件，而所有其他请求都是反向代理的。例如，我希望对[http://example.com/project/static/index.html](http://example.com/project/static/index.html)和[http://example.com/project/static/subdir/file2.html](http://example.com/project/static/subdir/file2.html)的请求映射到 /var/www/example .com/htdocs/index.html 和 /var/www/example.com/htdocs/subdir/file2.html 分别。

所有其他请求都应该被反向代理。例如，[http](http://example.com/project/thisWillBeProxied.html) ://example.com/project/thisWillBeProxied.html和[http://example.com/project/subdir/soWillThis.html](http://example.com/project/subdir/soWillThis.html)

这是我的活动 nginx 配置文件

```
server {
    listen   8080;
    server_name  example.com;
    access_log  /var/www/example.com/log/nginx.access.log;
    error_log  /var/www/example.com/log/nginx_error.log debug;

    location / {
            proxy_pass         http://reverse-proxy-host/;
    }

    location ^~ /project/static/ {
            alias   /var/www/example.com/htdocs;
    }

    error_page   500 502 503 504  /50x.html;
    location = /50x.html {
            root   /var/www/nginx-default;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T13:55:33.510

[错误日志](http://nginx.org/r/error_log)有助于解释发生了什么。

你的配置：

```
location ^~ /project/static/ {
    alias   /var/www/example.com/htdocs;
} 
```

它完全符合您所写的。`/project/static/`它在您的 URI 中替换为文件路径`/var/www/example.com/htdocs`。因此，如果请求看起来像，`http://example.com/project/static/index.html`那么 nginx 将尝试打开`/var/www/example.com/htdocsindex.html`. 我假设您不想发球`/var/www/example.com/htdocsindex.html`，但您想发球，`/var/www/example.com/htdocs/index.html`那么您应该写：

```
location ^~ /project/static/ {
    alias   /var/www/example.com/htdocs/;
} 
```

[文档](http://nginx.org/r/alias)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:50:55.777

我将尝试使用它： [http ://wiki.nginx.org/HttpCoreModule#error_page](http://wiki.nginx.org/HttpCoreModule#error_page)

阅读“如果在重定向期间不需要更改 URI，则可以将错误页面的处理重定向到指定位置”

我不必以这种方式使用静态目录。:)

# excel - 使用vba将导入的图片保存在excel中

> ID：12435125
> 
> 赞同：3
> 
> 时间：2012-09-15T06:35:11.827
> 
> 标签：excel, vba

所以我有一个分配给命令按钮的宏。按下它会打开一个对话框供用户导入图片文件。然后它调整图像的大小并将其放在特定的单元格上。但是如果我移动原始图片文件的位置，图像在 Excel 中就会消失。有没有机会我可以将它保存在 excel 文件中，这样如果我移动原始文件位置就无关紧要了。

代码如下：

```
 Sub Add_Image()
    Application.ScreenUpdating = False
    Range("B18").Select
    'varible Picture1 is inserted down below - ***change both***
    Picture1 = Application.GetOpenFilename("Picture,*.JPG,Picture,*.JPEG,Picture,*.GIF,Picture,*.BMP")
    'edit "("Picture,*.*")" section to add or chanve visible file types
    On Error GoTo ErrMsg
    ActiveSheet.Pictures.Insert(Picture1).Select
    Selection.ShapeRange.LockAspectRatio = msoFalse
    Selection.ShapeRange.Height = 145
    Selection.ShapeRange.Width = 282
    Application.ScreenUpdating = True
    Exit Sub
ErrMsg:
    MsgBox ("Failed to load Image"), , "Error"
End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T07:15:51.440

`.Pictures.Insert`似乎没有提供对链接或嵌入的控制。

但是，您可以改用它

```
expression.AddPicture(Filename, LinkToFile, SaveWithDocument, Left, Top, Width, Height) 
```

* * *

```
Sub Add_Image()
    Dim pic As Object
    Dim rng As Range

    Application.ScreenUpdating = False
    Set rng = Range("B18")
    Set rng2 = Range("A1", rng.Offset(-1, -1))
    'varible Picture1 is inserted down below - ***change both***
    Picture1 = Application.GetOpenFilename( _
        "Picture,*.JPG,Picture,*.JPEG,Picture,*.GIF,Picture,*.BMP")
    'edit "("Picture,*.*")" section to add or chanve visible file types

    On Error GoTo ErrMsg
    With Range("A1", rng.Offset(-1, -1))
        Set pic = ActiveSheet.Shapes.AddPicture(Picture1, False, True, _
            .Width, .Height, 282, 145)
    End With
    With pic
        .LockAspectRatio = msoFalse
    End With
    Application.ScreenUpdating = True
Exit Sub
ErrMsg:
    MsgBox ("Failed to load Image"), , "Error"
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-04T06:14:50.263

另外，克里斯的答案是，我想保持下载图像的纵横比。问题是 AddPicture 方法同时要求宽度和高度的参数。有效的技巧是将这些值设置为“-1”，然后仅更改具有锁定纵横比的高度。

```
 Set picCell = cell.Offset(0, 1)

    Set pic = ActiveSheet.Shapes.AddPicture(fileString, False, True,_
          picCell.Left + 10, picCell.Top + 10, -1, -1)
    With pic
          .LockAspectRatio = msoTrue
          .Height = 200
    End With 
```

# android - Android+谷歌地图示例应用

> ID：12435133
> 
> 赞同：0
> 
> 时间：2012-09-15T06:35:56.417
> 
> 标签：android, google-maps

我是android的新手。我想制作在应用程序启动时显示地图的应用程序。我已经完成了所有[步骤](http://mobiforge.com/developing/story/using-google-maps-android)

我已经安装了 Google API 并在 eclipse 中完成了所有设置。但是在输出中它只是灰色网格并且也会出现错误`Couldn't get connection factory client` 问题可能与此重复： [Google Map not shown in android Emulator](https://stackoverflow.com/questions/9082229/google-map-not-showing-in-android-emulator)

但是使用JDK的解决方案。该人使用的是JDK 7而不是JDK6。如何从 Eclipse 菜单调整这个 JDK。

MainActivity.Menifest 文件是：

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

   <uses-library android:name="com.google.android.maps" />  

    <activity
        android:name=".MapsActivity"
        android:label="@string/title_activity_maps" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/> 
```

和 .xml 文件是：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

   <com.google.android.maps.MapView
       android:id="@+id/mapView"
       android:layout_width="fill_parent"
       android:layout_height="fill_parent"
       android:apiKey="0BRarfRYpv-UWoSHq9JDtd1QQPlgI4zR8rgu1RA"
       android:clickable="true"
       android:enabled="true" />

</RelativeLayout> 
```

.java 文件是：

```
package com.siliconinfo.googlemaps;

import android.os.Bundle;
//import android.view.Menu;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;

public class MapsActivity extends MapActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mainactivity);
    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }
} 
```

但它也没有在控制台上的屏幕警告上显示任何地图：-GoogleMaps 没有指定 android.test.InstrumentationTestRunner 仪器或没有在其 AndroidManifest.xml 中声明使用库 android.test.runner

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T11:42:57.347

有时它可能与 Api 密钥有关。再次尝试使用 MD5 生成 api 密钥。

调整jdk：

项目...属性...Java编译器----JDK合规性

你可以在那里改变

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T05:47:26.233

感谢您的回复。通过在 AVD 管理器中进行设置，我在模拟器中获得了 MAp 显示。通过将 API 级别设置为 13。它为我工作。感谢所有人帮助我尝试解决问题并在解决此问题时为我提供更多知识问题

# .net - 如何在网站中使用 Skype 进行用户登录

> ID：12435137
> 
> 赞同：1
> 
> 时间：2012-09-15T06:36:46.447
> 
> 标签：.net, authentication, oauth-2.0, skype

我们想使用 Skype 在我们的 ASP.NET 网站上对用户进行身份验证。

OAuth 协议允许应用程序的用户在不向应用程序提供凭据的情况下处理来自服务的数据。因为 Live、Linkedin、Facebook 等支持 Oauth。所以我们能够使用 Oauth 对用户进行身份验证。但是 Skype 不支持 OAuth。如何对 Skype 用户进行身份验证？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T10:38:59.880

Skype 不提供 OAuth API，因此不可能。

Skype API 是为他们的客户端软件的桌面和嵌入式集成而设计的，而不是为网络世界而设计的。你想要的是不符合微软商业利益的东西。他们为 OAuth 提供其他服务。

我建议你给微软 10 亿美元的小费，或者重新考虑你的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T20:20:52.417

Skype 现在提供 OAUTH 启动 Skypekit 4.x

# php - Mongodb / PHP如果不存在如何插入嵌套数组？

> ID：12435138
> 
> 赞同：2
> 
> 时间：2012-09-15T06:36:49.610
> 
> 标签：php, mongodb

我收藏的内容就是这种形式，

```
{ "_id" : ObjectId("50535036381ef82c08000002"),"source_references" : [
    {
            "_id" : ObjectId("50535036381ef82c08000001"),
            "name" : "abc",
            "key" : "123"
    }]
} 
```

现在，如果嵌套数组中不存在名称和键，我想在**“source_references”中插入另一个数组，否则不要插入。**这是我想要的结果，

```
{ "_id" : ObjectId("50535036381ef82c08000002"),"source_references" : [
    {
            "_id" : ObjectId("50535036381ef82c08000001"),
            "name" : "abc",
            "key" : "123"
    }
    {
            "_id" : ObjectId("50535036381ef82c08000003"),
            "name" : "reuters",
            "key" : "139215"
     }]
} 
```

这是我尝试过的：

```
$Update_tag = array('$addToSet' => array("source_references.$" => array("name" => "reuters", "key" => $r_id)));
$mycollection->update(array("_id" => $id), $Update_tag); 
```

但我无法在嵌套数组中插入另一个数组。此外，我只想在**source_references**中插入新数组时创建“_id”字段（在嵌套数组内） 。

我哪里错了？希望我对我的问题很清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T13:33:28.553

这很棘手，因为每个子文档都有唯一的键。因此，您不能使用 $elemMatch 来检查密钥/名称对是否已经存在。

如果您正在运行 mongodb 2.2，则可以使用聚合框架 $unwind 嵌套数组，然后 $match 键/名称对并仅在您的搜索返回空时插入新元素。

这是php代码：

```
<?php

// connect
$m = new Mongo('localhost:27017');

// select a database and collection
$db = $m->test;
$collection = $db->coll;

// sub-doc to insert if key/name pair doesn't exist
$doc = array('key'=>'12345', 'name' => 'abcde');

// aggregation command (can use $collection->aggregate for driver version 1.3.0+)
$cursor = $db->command(array('aggregate' => 'coll', 'pipeline' => array(
    array('$unwind'=>'$source_references'),
    array('$match' => array('source_references.name' => $doc['name'], 
                            'source_references.key' => $doc['key']))
)));

// if sub-doc doesn't exist, insert into main doc with this objectId
$objectId = '50535036381ef82c08000002';

if (count($cursor['result']) == 0) {
    // insert document with a new ObjectId (MongoId)
    $update_tag = array('$addToSet' => array("source_references" => array("_id" => new MongoId(), "name" => $doc['name'], "key" => $doc['key'])));
    $collection->update(array("_id" => new MongoId($objectId)), $update_tag);
} 

?> 
```

# excel - 如何循环直到特定的命名范围？

> ID：12435140
> 
> 赞同：3
> 
> 时间：2012-09-15T06:37:36.583
> 
> 标签：excel, vba

我想删除命名范围 rbTop 和 rbBottom 之间的所有行

```
Range("rbBottom").Value = ""
Range("rbTop").Select
Do While (Selection.Offset(1, 0).Value <> "")
Selection.Offset(1, 0).EntireRow.Delete
Loop 
```

这行得通，但我想要一个稍微短一点的方法

```
Range("rbTop").Select
Do While (Selection.Offset(1, 0).Name <> "rbBottom")  // how to write this line ?
Selection.Offset(1, 0).EntireRow.Delete
Loop 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T07:05:21.100

没有任何`Select`or 循环：

```
Sub Cull()
Dim rng1 As Range
Set rng1 = Range(Range("rbtop"), Range("rbbottom"))
If rng1.Rows.Count > 2 Then rng1.Offset(1, 0).Resize(rng1.Rows.Count - 2, 1).EntireRow.Delete
End Sub 
```

# cakephp - Cakephp 的语言翻译问题

> ID：12435143
> 
> 赞同：3
> 
> 时间：2012-09-15T06:38:16.127
> 
> 标签：cakephp, routing, cakephp-2.0, language-translation

我使用以下教程使用 cakePHP 2.0 开发了一个简单的语言翻译模块：

[http://nuts-and-bolts-of-cakephp.com/2008/11/28/cakephp-url-based-language-switching-for-i18n-and-l10n-internationalization-and-localization/](http://nuts-and-bolts-of-cakephp.com/2008/11/28/cakephp-url-based-language-switching-for-i18n-and-l10n-internationalization-and-localization/)

它工作正常如果我在 URL http://[SITe_URL]/posts/index 下运行

语言翻译链接正在转换为 http://[SITe_URL]/eng/posts/index http://[SITe_URL]/fre/posts/index

但是如果我通过下面的 URl http://[SITe_URL]/posts/edit/3

语言翻译链接正在转换为 http://[SITe_URL]/eng/posts/edit http://[SITe_URL]/fre/posts/edit

代替

http://[SITe_URL]/fre/posts/edit/3

我认为我在 route.php 中传递的 Rounting 原则存在问题

请向我发送您的建议以帮助我。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T18:53:11.270

我尝试通过在切换语言时在链接生成中添加额外参数来解决上述问题。

```
<?php 
    $param = null;
    if(isset($this->params['pass'][0]))
        $param = $this->params['pass'][0];
    echo $this->Html->link('English', array($param,'language'=>'eng'));
    echo ' | ';
    echo $this->Html->link('French', array($param,'language'=>'fre')); 
?> 
```

# symfony1 - 推进标准

> ID：12435144
> 
> 赞同：-1
> 
> 时间：2012-09-15T06:38:17.507
> 
> 标签：symfony1, criteria, propel

我正在尝试使用 Criteria 和 Propel 创建以下语句：

```
AND unix_timestamp(table.last_action) > unix_timestamp(table.last_action) -1800 
```

但我似乎无法正确处理

```
$kriterien->add(sfGuardUserProfilePeer::LAST_ACTION, 'unix_timestamp(table.last_action)-90', Criteria::GREATER_THEN); 
```

`sfGuardUserProfilePeer::LAST_ACTION`不是 unix_timestamp。我怎样才能改变它呢？我已经尝试简单地更改 in 的值，`LAST_ACTION`但`BasesGuardUserProfilePeer.php`它引发了错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T12:03:39.330

没有这样的常数`Criteria::GREATER_THEN`——也许你的意思是`Criteria::GREATER_THAN`？但是，如果您使用它，则第二个参数`add()`必须是字符串或整数值 - 尝试使用列名或 SQL 函数将不起作用。

相反，试试这个（显然你可能需要调整 - 我不确定你到底想要实现什么）：

```
$kriterien->add(
    sfGuardUserProfilePeer::LAST_ACTION,
    'unix_timestamp(sf_guard_user_profile.last_action) > 90',
    Criteria::CUSTOM
); 
```

最后，该`Criteria`方法已被弃用。你没有说你正在使用什么版本的 Propel（这个细节应该在你的问题中），但是使用最近的东西（1.5 或 1.6）并迁移到 Query 方法是一个好主意。

# sql - SQL的“IN”中的结果顺序不正确

> ID：12435148
> 
> 赞同：0
> 
> 时间：2012-09-15T06:39:23.060
> 
> 标签：sql, sql-server-2005, sql-order-by, sql-in

我需要帮助来订购我的 SQL Server 2005 结果集。我的查询是

```
Select RQuery from EPMaster where PName IN ('PFNAME','POName','PFSName'); 
```

显示的结果按**EPMaster表中存储的顺序排列**

在表**EPMaster中，** **PName**值的顺序为：

```
PFName -> 1
PFSName -> 2
POName -> 3 
```

1 最高，3 最低

我需要按使用`IN`. 这意味着结果应该是形式

```
PFName -> 1
POName -> 2
PFsName -> 3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T06:44:12.133

`Select`除非您指定子句，否则不保证*任何顺序。*`order by`

对于您的特定情况，您可以使用以下内容：

```
... order by (case when PName = 'PFSName' then 'ZZZZZ' else PName end ) asc 
```

但是您应该知道，这种查询可能会成为性能杀手。

如果您的查询是动态创建的，并且您无法控制给出可能性的顺序，但仍想规定行的顺序相同，您可能不得不求助于以不同的方式构建查询，例如使用：

```
select 1 as xyzzy, RQuery from EPMaster where PName = 'PFNAME'
union all
select 2 as xyzzy, RQuery from EPMaster where PName = 'POName'
union all
select 3 as xyzzy, RQuery from EPMaster where PName = 'PFSName'
order by 1 asc 
```

如果您的代码构建*此*查询而不是`in`版本，您*可以*保证行将按指定的顺序返回，因为`xyzzy`您添加（和排序依据）的列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T06:50:57.160

```
Select RQuery from EPMaster 
where PName IN ('PFNAME','POName','PFSName')
order by case when PName = 'PFName'  then 0
              when PName = 'POName'  then 1
              when PName = 'PFsName' then 2
              else 999
         end asc 
```

另一种常用的解决方案是将 OrderBy 列添加到 FK 查找表 (Pname)。

# wpf - 如何强制在 Windows Server 2003 上为 WPF 应用程序安装 Windows 7 主题

> ID：12435154
> 
> 赞同：1
> 
> 时间：2012-09-15T06:40:02.140
> 
> 标签：wpf

`enter code here`有什么方法可以让 WPF 应用程序看起来像是在 Windows 7 上运行，即使它是在 Windows Server 2003 上运行的？

我面临的问题是由于 Windows Server 2003 控件上的默认样式，很难看到它们上的文本内容。对于前 - 组合框

文本前景以黑色可见，突出显示的动画颜色为深蓝色，这使得文本内容几乎不可见。

我已尝试定义以下设置，但没有奏效

1.  编辑 App.Xaml 并将其更改为

2.  将引用的程序集 PresentationFramework.Aero 的 Copy Local 属性设置为 True。

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T13:41:15.923

WPF 默认附带以下主题集：Classic、Aero Normal、Luna Homestead、Luna Metaltallic、Luna Normal、Roayle Normal...。它允许 WPF 控件匹配特定主题的外观。

您可以通过将主题在其主题程序集中定义的资源加载到您的 App.Resources 中来强制 WPF 使用特定主题，以便您的控件将使用这些主题样式。

有关更多信息，请参阅这些链接：

*   [WPF 的 Windows 7 主题？](https://stackoverflow.com/questions/2075720/windows-7-theme-for-wpf)

*   [http://arbel.net/2006/11/03/forcing-wpf-to-use-a-specific-windows-theme/](http://arbel.net/2006/11/03/forcing-wpf-to-use-a-specific-windows-theme/)

如果您需要访问原始 WPF 主题设计，则可以从以下位置下载它们：

*   [http://archive.msdn.microsoft.com/Project/Download/FileDownload.aspx?ProjectName=wpfsamples&DownloadId=7812](http://archive.msdn.microsoft.com/Project/Download/FileDownload.aspx?ProjectName=wpfsamples&DownloadId=7812)

# ios - 反向地理编码类方法

> ID：12435155
> 
> 赞同：1
> 
> 时间：2012-09-15T06:40:13.777
> 
> 标签：ios, geocoding, grand-central-dispatch

由于异步执行`geocodeAddressString`块的事实，以下类方法显然返回空值。

可以通过 GCD 完成这项工作的最佳实践是什么？

```
+ (CLLocationCoordinate2D)reverseGeocoding:(NSString *)address
{
    CLLocationCoordinate2D  __block streetAddressCoordinates;

    CLGeocoder *streetAddressGeocoder = [[CLGeocoder alloc] init];

    [streetAddressGeocoder
        geocodeAddressString:address

        completionHandler:^(NSArray *placemarks, NSError *error)
        {
            if ([placemarks count] > 0 && error == nil)
            {
                CLPlacemark  *firstPlacemark;
                firstPlacemark = [placemarks objectAtIndex:0];
                streetAddressCoordinates = firstPlacemark.location.coordinate;
            }
            else if ([placemarks count] == 0 && error == nil){
                NSLog(@"Found no placemarks.");
            }
            else if (error != nil){ NSLog(@"An error occurred = %@", error);
            }
     }];

     return streetAddressCoordinates;
} 
```

# c - 在旋转的排序数组中查找枢轴点

> ID：12435163
> 
> 赞同：2
> 
> 时间：2012-09-15T06:41:13.037
> 
> 标签：c, arrays, search, pivot, sorted

首先让我说我是 C 新手，所以我的方法是基本的。我正在尝试检查排序数组的旋转点。例如 (1 2 4 5 9) 变为 (5 9 1 2 4)。我试图将数组“拆分”为两个子数组，并检查一个从 [0] 开始并增加一，从 [4] 开始并减少一。这是我到目前为止所拥有的：

```
#define size 5
int main(void)
{
int x, i, j, start, end;
int array1[size]= {4, 8, 0, 1, 3};
start = 0;
end = size -1;
while(start < end)
{
if (array1[start] < array1[end])
    start++;
    end--; 
```

我想我遇到的一些问题是我的方法是否良好（从外到内），或者我是否应该从中间开始并解决问题。另外，我将如何编码确定枢轴实际发生的位置。我在 SO 中看到了一些 C++ 的答案，但是我没有看到很多对 C 来说很清楚的答案，所以我想我会问。任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T07:05:14.347

这个问题解决起来相当琐碎。由于原始集合已排序，因此只需向前迭代，直到您命中的元素小于数组中的最终元素——这是原始的第一个元素，因此您知道它与开始的距离与*R (mod N)*一致其中*R*是旋转距离，*N*是`size`。

```
int last = array[size - 1];
int r;
for (r = 0; array[r] >= last; ++r) ;
int pivot = array[r];
/* pivot was the original array[0] */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-16T09:54:38.653

在 C 中查找枢轴元素的代码

```
int findPivot(int arr[], int low, int high)
{
   // base cases
   if (high < low)  return -1;
   if (high == low) return low;

   int mid = (low + high)/2;   /*low + (high - low)/2;*/
   if (mid < high && arr[mid] > arr[mid + 1])
     return mid;
   if (mid > low && arr[mid] < arr[mid - 1])
     return (mid-1);
   if (arr[low] >= arr[mid])
     return findPivot(arr, low, mid-1);
   else
     return findPivot(arr, mid + 1, high);
} 
```

当数组已经排序时返回-1，其余的事情像二分搜索一样

# java - 以下同步块的目的是什么？

> ID：12435164
> 
> 赞同：1
> 
> 时间：2012-09-15T06:41:21.400
> 
> 标签：java, synchronization, opencms

我在使用 OpenCMS 时遇到稳定性问题。当我进行线程转储时，许多线程（400）正在`synchronized (m_processingFiles)`以下代码中的块上等待：

```
public class CmsJspLoader ... {
...

private static Set m_processingFiles = Collections.synchronizedSet(new HashSet());

...
...
...
public String updateJsp(...) {
....

while (m_processingFiles.contains(jspVfsName)) {
    // wait a little bit until the first thread finishes
    try {
        synchronized (m_processingFiles) {
            m_processingFiles.wait(100);
        }
    } catch (InterruptedException e) {
        // ignore
    }
}
...
}
...
} 
```

该代码是 OpenCMS 的一部分。代码中没有`notify()`任何地方。显示的块内没有*状态*变化或读取共享变量。`sync`但是，有 400 个线程在等待，也就是说，`sync`最后一个线程要等待 40 秒！！！

我根本不明白它的目的。有什么我没看到的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T07:11:38.447

如果没有 notify 或 notifyAll 调用，这基本上就像 100 毫秒的睡眠。100 毫秒后，线程将重新唤醒并继续。假设在同步块中除了等待之外什么都没有，那么这只是一种奇怪的睡眠方式。同步块触发[内存屏障](http://www.infoq.com/articles/memory_barriers_jvm_concurrency)可能会导致其他一些影响。因此，可能存在一些微妙的线程安全问题。

在这里解释线程转储时要注意的一件事是 400 个线程阻塞等待进入同步块或等待等待？当一个线程进入等待状态时，它实际上会从同步块中释放锁，以便另一个线程可以进入它。当线程从等待中唤醒时，将重新获取锁。

如果线程转储说“等待监视器进入”之类的内容，则一个线程位于同步块中，而所有其他线程都在尝试进入。这表明您在这里有一个主要的并发问题。

但是，如果线程转储显示类似“in Object.wait()”的内容，则表示线程处于 100 毫秒等待中，并且其他线程可以自由进入同步块。在这种情况下，这意味着循环条件仍然是错误的，所以看看那边发生了什么，而不是等待线程发生了什么。

也就是说，如果可以在进程的另一端执行 notify / notifyAll 时，它将减少唤醒和检查线程是否仍应处于睡眠状态的延迟和成本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T07:15:18.907

代码中*必须*有某个地方线程添加`jspVfsName`到`m_processingFiles`，做更多的工作，然后`jspVfsName`从`m_processingFiles`. 如果不是这种情况，那么您的其他线程将`wait()`永远处于该`while`循环中。出于某种原因，实现者不希望任何其他线程`updateJsp`在其他处理正在进行时执行。

我建议您检查代码以了解`jspVfsName`实际情况，并找到可以在代码中添加/删除它的位置`m_processingFiles`。或许那时你也会明白为什么作者不想`updateJsp`在 while `jspVfsName`is in 中运行`m_processingFiles`。

一旦你发现，你可以检查那个“其他”代码，看看是否`jspVfsName`可以添加到`m_processingFiles`并且*从不删除*。如果是这样，那（自然）会导致活锁，这可以解释您的稳定性问题。

或者可能`updateJsp`是被非常频繁地调用，并且修改的“其他”代码`m_processingFiles`也被非常频繁地调用，以至于它导致了主要的并发瓶颈？您的应用程序是否有问题导致`updateJsp`被调用的频率比应有的频率高（可能是在每个请求上，而不是每次将新的 JSP 文件放在服务器上时）？

If `updateJsp` is running very frequently, but it's not caused by a problem with your app, you could try simply shorten the `wait()` period. That shouldn't hurt anything -- it will just make the waiting threads check whether `jspVfsName` is still in `m_processingFiles` more frequently. 100ms is a ***long, long*** time in CPU terms!

# fortran - 测量 Fortran 程序所用时间

> ID：12435169
> 
> 赞同：2
> 
> 时间：2012-09-15T06:41:59.467
> 
> 标签：fortran, timing

我最近开始学习 Fortran 以获得乐趣，我想知道是否有任何简单的方法来显示执行我的代码所花费的时间。这只是一个数到一百万的简单循环，我想看看需要多长时间才能做到这一点。

如果有帮助，这是我正在使用的代码：

```
program count
    implicit none
    integer :: i

    do i=0,1000000
        print*,i
    end do
end program count 
```

我在 Linux 上使用 gFortran 作为我的编译器。我使用 Geany 作为文本编辑器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T06:51:00.753

在 Fortran 90 或更高版本中，使用 SYSTEM_CLOCK 内部子例程：

```
call system_clock(beginning, rate)
result = do_computation()
call system_clock(end)
print *, "elapsed time: ", real(end - beginning) / real(rate) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-09-14T02:24:49.767

一个简单的方法是`call cpu_time(timeVariable)`.

样本：

```
program ElapsedTime
  implicit none

  integer :: i
  real :: startTime, stopTime

  call cpu_time(startTime)

  do i = 1, 1000000000
     if(mod(i,10000000)==0)then
        print *,"iter: ", i
     endif
  end do

  call cpu_time(stopTime)

  write(*, '(A, F8.6)') 'Elapsed time, s : ',  (stopTime - startTime)

end program 
```

# r - Bagplot函数错误

> ID：12435170
> 
> 赞同：2
> 
> 时间：2012-09-15T06:42:01.187
> 
> 标签：r

我在 aplpack 包中使用 bagplot 函数，并且经常收到此错误：

```
Error in chull(pg[, 1], pg[, 2]) : 
  NA/NaN/Inf in foreign function call (arg 2) 
```

这是发生这种情况的数据示例：

```
bagplot(c(-4.66, -2.62, -3.65 ,-3.07 ,-4.91, -4.56 ,-3.79, -3.10, -3.01), 
          c(2.14, -7.18, -0.15 , 2.67, -2.49, -0.89 , 0.96 , 0.59, -4.59)) 
```

任何人都可以帮忙吗？

# python - 使用 python 模块串行发送十六进制和 ascii 值

> ID：12435173
> 
> 赞同：-1
> 
> 时间：2012-09-15T06:42:49.963
> 
> 标签：python

我正在尝试向照明设备发送命令。

下面的命令在超术语中起作用。

```
\05387988c2g<CR> 
```

*   `\`是一个ASCII字符
*   `g<CR>`在每个命令的末尾
*   `g`是确认键，`<CR>`是回车

我尝试在下面的代码中使用 Python 的串行模块发送此命令，但它不起作用，因为它`\`是一个 ascii 字符，`g`并且`<CR>`是需要在命令末尾的字符串。

有人可以告诉我我必须发送什么命令。任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T06:51:58.447

它不是很清楚你希望发送什么......但假设我理解这可能会有所帮助。

使用 r"" 将所有内容视为文字（包括 \）...另外，您可能需要发送回车符 (\r)

```
conn.write(r'\05387988c2g')
conn.write('\r')#may or may not be needed or some other ending character 
```

# mysql - 根据某个字段值分组并在一行中获取结果

> ID：12435175
> 
> 赞同：2
> 
> 时间：2012-09-15T06:43:04.287
> 
> 标签：mysql

不久前，我接到了执行报告的任务。我面临的问题如下。我有一张桌子：

```
name      value   type
------------------------
100 Kasa  | 50000 |  B
100 Kasa  | 30000 |  A
 80 Kasa  |  500  |  A
 80 Kasa  |  50   |  B
200 Hello | 3000  |  A
645 Bye   | 1234  |  B 
```

我想要实现的是按*名称*分组，如果*类型*相同，则求和*值，如果**类型*不同，则将其写入另一个单元格。我只有两种类型。

 **我想得到结果

```
name       valueB    valueA   
--------------------------
100 Kasa  | 50000 |  30000
 80 Kasa  |   0   |   550
200 Hello |   0   |   3000
645 Bye   | 1234  |    0 
```

现在，我将它们分组在 php 中，这会使代码变得一团糟，现在我希望有人可以帮助我用 mysql 来做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T06:55:43.567

我认为您的预期输出（结果）是错误的
应该是：

```
NAME        VALUEB  VALUEA
--------------------------
100 Kasa    50000   30000
200 Hello   0       3000
645 Bye     1234    0
80 Kasa     50      500 
```

您可以`SUM`为此使用功能

带`CASE`声明：

```
SELECT name,
       SUM(CASE type WHEN 'B'THEN value ELSE 0 END) valueB,
       SUM(CASE type WHEN 'A' THEN value ELSE 0 END) valueA
FROM myTable
GROUP BY name; 
```

或`IF`声明：

```
SELECT name,
       SUM(IF (type = 'B' , value , 0 )) valueB,
       SUM(IF (type = 'A' , value , 0 )) valueA
FROM myTable
GROUP BY name; 
```

[*看到这个 SQLFiddle*](http://sqlfiddle.com/#!2/b320f/14)

如果您的预期输出是这样的（`NULL`而不是`0`）

```
SELECT name,
       GROUP_CONCAT(CASE type WHEN 'B'THEN value ELSE NULL END) valueB,
       GROUP_CONCAT(CASE type WHEN 'A' THEN value ELSE NULL END) valueA
FROM myTable
GROUP BY name; 
```

[*看到这个 SQLFiddle*](http://sqlfiddle.com/#!2/b320f/13)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T06:48:30.217

```
SELECT name, SUM(IF(type = 'A', value, 0)) valueA, SUM(IF(type = 'B', value, 0)) valueB
FROM mytable
GROUP BY name 
```**

# java - 在android的listview中加载本地xml数据

> ID：12435177
> 
> 赞同：1
> 
> 时间：2012-09-15T06:43:39.293
> 
> 标签：java, android

你能推荐一个简单的例子来在列表视图中加载本地 XML 数据吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T07:29:59.283

首先将您的 XML 文件放入原始文件夹，然后使用以下代码使用 Dom Parser 解析此 XML 文件。

```
public class XMLParsingDOMExample extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        /** Create a new layout to display the view */
        LinearLayout layout = new LinearLayout(this);
        layout.setOrientation(1);

        /** Create a new textview array to display the results */
        TextView id[];
        TextView imageurl[];

        try {

            InputStream is = res.openRawResource(R.raw.localxmlfileName);
            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            DocumentBuilder db = dbf.newDocumentBuilder();
            Document doc = db.parse(new InputSource(is));
            doc.getDocumentElement().normalize();

            NodeList nodeList = doc.getElementsByTagName("item");

            /** Assign textview array lenght by arraylist size */
            id = new TextView[nodeList.getLength()];
            imageurl = new TextView[nodeList.getLength()];

            for (int i = 0; i < nodeList.getLength(); i++) {

                Node node = nodeList.item(i);

                id[i] = new TextView(this);
                imageurl[i] = new TextView(this);

                Element fstElmnt = (Element) node;
                NodeList idList = fstElmnt.getElementsByTagName("item_id");
                Element idElement = (Element) idList.item(0);
                idList = idElement.getChildNodes();
                id[i].setText("id is = " + ((Node) idList.item(0)).getNodeValue());

                NodeList imageurlList = fstElmnt.getElementsByTagName("item_image");
                Element imageurlElement = (Element) imageurlList.item(0);
                imageurlList = imageurlElement.getChildNodes();
                imageurl[i].setText("imageurl is = " + ((Node) imageurlList.item(0)).getNodeValue());

                layout.addView(id[i]);
                layout.addView(imageurl[i]);
            }
        } catch (Exception e) {
            System.out.println("XML Pasing Excpetion = " + e);
        }

        /** Set the layout view to display */
        setContentView(layout); 
    }
} 
```

# windows - 如何使用 Windows Phone 7 连接蓝牙打印机？

> ID：12435182
> 
> 赞同：2
> 
> 时间：2012-09-15T06:44:21.867
> 
> 标签：windows, windows-phone-7, printing, bluetooth

目前我正在开发一个需要开发收款机模块的项目。

在那个项目中，收款人（人）去客户那里接受钱，因为他必须使用热敏打印机给收据，说明钱已经收了。

我正在为 Windows Phone 7 开发项目，我有一个支持蓝牙的打印机，而 Window Phone 7 也有一个蓝牙，但我不知道如何为此进行编程。

甚至蓝牙公司也没有为 Windows Phone 7 提供任何 SDK。我正在使用 Zebra MZ320 打印机。

谁能帮我？还是我必须在 Windows Mobile 6 上开发该应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T09:27:39.640

Windows Phone 7 目前不支持此功能 - 蓝牙支持仅限于音频配置文件。

此功能可能在 Windows Phone 8 中可用 - 下个月会有更多新闻（可能）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T11:45:30.560

目前 windows phone 7 蓝牙仅支持免提和车载音响套件。

可能他们会在 Windows Phone 8 中支持，但不确定所以最好选择 Windows Mobile 6 或 6.5。

这个链接有更多细节。

[http://www.publisharticle.in/KB/8B2DC4A3F3114/Bluetooth-issue-in-windows-Phone-7](http://www.publisharticle.in/KB/8B2DC4A3F3114/Bluetooth-issue-in-windows-Phone-7)

祝你好运

# emacs - Emacs gdb 没有运行

> ID：12435183
> 
> 赞同：4
> 
> 时间：2012-09-15T06:44:24.190
> 
> 标签：emacs, gdb

我在 emacs 中使用`M-x gdb`. 然后，当我执行时`b main`，我得到以下输出：

```
b main                                                                             
Breakpoint 1 at 0x100000d61: file hanoi.c, line 27\.                                
                        (gdb)                                                        
MI_HOOK_RESULT={HOOK_TYPE="breakpoint_create",bkpt={number="1",type="breakpoint",d\
  isp="keep",enabled="y",addr="0x0000000100000d61",func="main",file="hanoi.c",line="\
  27",shlib="/Users/rdp/Desktop/Hanoi-Moves_testcases/play",times="0"}},time={wallcl\
  ock="0.00104",user="0.00049",system="0.00027",start="1347691065.681152",end="13476\
  91065.682197"} 
```

当我尝试运行程序时，我得到以下输出：

```
r                                                                    |21  } 14Starting program: /Users/rdp/Desktop/Hanoi-Moves_testcases/play                   
                                            (gdb)                                    |24} 16time={wallclock="0.00009",user="0.00005",system="0.00004",start="1347691082.360725\|25 ",end="1347691082.360816"}                                                       (gdb)  n

The program is not being run. 
```

为什么我得到一个详细的输出，为什么我不能单步执行代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T17:23:18.083

Emacs 24 似乎破坏了 GUD（gdb 和其他调试器的接口）。IRC 频道上有一些关于它的争吵，一个人实际上声称它为他工作，但我也有非常奇怪的行为。谷歌搜索还揭示了以下（以及更多）：[gud-gdb emacs 24 not working](https://stackoverflow.com/questions/9676135/gud-gdb-emacs-24-not-working)

我会尝试做一个最小的测试用例失败并提交错误报告。

编辑：您可能想尝试`gud-gdb`代替`gdb`. 我不知道有什么区别，但它似乎对我有用。（没有全面测试。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-06T01:29:34.987

为了将来参考，我正在运行 10.7 和 emacs 24.3。xcode 4（该平台的最新版本）附带的 gdb 版本太旧，无法使用 gdb 模式。如果您从源代码获取最新的并构建它，使用 macports 获取其依赖项，（当时 gdb 的 macports 构建对我不起作用），gdb 模式可以工作，包括 gdb-many-windows，我强烈推荐.

编辑：另外，gud-gdb 显然是一种旧模式，所以它可能工作，但你“真的”想要 gdb 模式和 gdb-many-windows......

# python - python 3.2中的X模式

> ID：12435187
> 
> 赞同：-1
> 
> 时间：2012-09-15T06:45:21.853
> 
> 标签：python, python-3.2

我必须提示用户输入一个值 n >= 3，以便我的 python 3.2 程序可以打印一个 n 模式。

例如，n=4 ==> 模式：

```
x..x
.xx.
.xx.
x..x 
```

另一个例子，n=5 ==> 模式：

```
x...x
.x.x.
..x..
.x.x.
x...x 
```

请注意，x 在每一行之后彼此靠近。中排之后，彼此距离越来越远，最终到达各自的终点。

请帮我解决这个问题。我知道我必须使用分支和循环，但我无法弄清楚模式背后的逻辑。

我已经设法打印出一个 n 模式，但它看起来像这样：
示例 n=4 ==> 模式：

```
xx..  
xx..
xx..
xx.. 
```

我的代码如下所示：

```
 pattern_size = int(input("Please enter pattern size:"))
    while pattern_size < 3:
    print("Pattern size should be at least 3")
    pattern_size = int(input("Please enter pattern size:"))

    for level in range(1,pattern_size+1):
        for num in range(2):
            print("x", end="")

        num_dot = pattern_size - 2
        for num in range(num_dot):
            print(".", end="")

        print() 
```

有人可以建议我如何打印“。” 和“x”交替出现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T09:13:13.163

这是适用于 python2.7 的代码。这里的技巧是一个“x”总是向左移动，而另一个总是向右移动。

```
def pattern_writer(pattern_size):
    first_x = 0
    last_x = pattern_size - 1
    while first_x < pattern_size and last_x > -1:
        for t in range(pattern_size):
            if t == first_x or t == last_x:
                print "x",
            else:
                print ".",
        print "\n"
        first_x += 1
        last_x -= 1 
```

这是使用列表的另一种解决方案：

```
def pattern_writer2(pattern_size):
    for t in range(pattern_size):
        pattern = list("." * pattern_size)
        pattern[t] = "x"
        pattern[-(t+1)] = "x"
        print "".join(pattern) 
```

# mysql - mysql中的数据规范化

> ID：12435188
> 
> 赞同：1
> 
> 时间：2012-09-15T06:45:42.867
> 
> 标签：mysql, database-design, relational-database, normalization

我在mysql中有一个表：

```
user_item_text
    username, item, text 
```

我想将数据规范化为三个表：

```
users
    user_id, username

items
    item_id, item_name

text
    text_id, text_name 
```

我怎样才能使用现有的`user_item_text`表来创建所描述的三个表？大约有 800000 条记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T08:00:42.390

以下是如何处理一个表“用户”的示例：

```
create table users(
   user_id int not null auto_increment, 
   username varchar(50), 
   primary key(user_id), 
   index ind_user_username(username)
) engine = XXX;

insert into users(username) select distinct username from user_item_text

alter table user_item_text add user_id integer null

update user_item_text uit join users u on uit.username = u.username
set uit.user_id = u.user_id

alter table user_item_text drop column username 
```

也许您需要在运行最后一个之前添加以下步骤`update`：

1.  在字段上添加索引`user_item_text.username`以使更新运行更快
2.  唯一索引`users.username`而不是普通索引
3.  `user_item_index.user_id`应该有FK

希望能帮助到你。

附言。我没有测试查询。他们只是向您展示一般方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T07:49:41.457

创建表，然后将插入与选择结合使用。据我所知，可以使用表格进行插入。

例如：用户和主键是自增

```
 Insert into users (username) Select username from user_item_text 
```

[http://dev.mysql.com/doc/refman/5.1/de/insert-select.html](http://dev.mysql.com/doc/refman/5.1/de/insert-select.html)

# sql - Group by在我的 Sql (Oracle) 中不起作用

> ID：12435190
> 
> 赞同：3
> 
> 时间：2012-09-15T06:46:06.483
> 
> 标签：sql, group-by

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-15T06:49:42.550

这很可能是因为每个人都`DATE`携带的时间部分。要摆脱它，请使用 trunc 函数：

```
select trunc(reg_date), count(trunc(reg_date))
from reg 
where reg_date >= to_date('01-JAN-12', 'DD-MON-YY') 
group by trunc(reg_date) 
```

# sql - T-sql 数据透视函数

> ID：12435193
> 
> 赞同：3
> 
> 时间：2012-09-15T06:46:35.953
> 
> 标签：sql, sql-server, tsql, pivot, unpivot

我需要转换下表

```
quarter   cal_year  blue    green   yellow  red

DEC 2011        +31%    25-30%  22-24%  -21%

MAR 2012        +61%    50-60%  43-49%  -42% 
```

进入这个。有没有简单的方法来实现它？

```
Color   DEC     MAR     
blue    +31%    +61%    
green   25-30%  50-60%  
yellow  22-24%  43-49%  
red     -21%    -42% 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T12:57:52.840

虽然@Joro 的版本可以工作，但我会做的略有不同，因为在这种情况下不需要 CTE。

`PIVOT`您知道要转换的列的静态版本：

```
select col, [Mar], [Dec]
from 
(
  select quarter, val, col
  from yourtable
  unpivot
  (
    val
    for col in (blue, green, yellow, red)
  )u
) x
pivot
(
  max(val)
  for quarter in ([Mar], [Dec])
) p 
```

见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/7edf1/4)

在运行时确定列的动态版本：

```
DECLARE @colsPivot AS NVARCHAR(MAX),
    @colsUnpivot as NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @colsPivot = STUFF((SELECT distinct ',' + QUOTENAME(Quarter) 
                    from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

select @colsUnpivot = stuff((select ','+quotename(C.name)
         from sys.columns as C
         where C.object_id = object_id('yourtable') and
               C.name not in ('Quarter', 'cal_year')
         for xml path('')), 1, 1, '')

set @query 
  = 'select *
      from
      (
        select quarter, val, col
        from yourtable
        unpivot
        (
          val
          for col in ('+ @colsunpivot +')
        ) u
      ) x1
      pivot
      (
        max(val)
        for quarter in ('+ @colspivot +')
      ) p'

exec(@query) 
```

见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/7edf1/7)

如果你只有几列，那么你也可以用一个`CASE`语句和一个`UNION ALL`

```
select col,
  max(case when quarter = 'MAR' then val end) MAR,
  max(case when quarter = 'DEC' then val end) DEC
from
(
  select quarter, val, col
  from
  (
    select quarter, blue as val, 'blue' as col
    from yourtable
    union all
    select quarter, green as val, 'green' as col
    from yourtable
    union all
    select quarter, yellow as val, 'yellow' as col
    from yourtable
    union all
    select quarter, red as val, 'red' as col
    from yourtable
  ) u
) x
group by col 
```

见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/7edf1/11)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T11:40:43.347

这是执行此操作的一种方法：

```
DECLARE @SourceTable TABLE
(
    [Quarter] NVARCHAR(20),
    [cal_year] BIGINT,
    [blue] NVARCHAR(20),
    [green] NVARCHAR(20),
    [yellow] NVARCHAR(20),
    [red] NVARCHAR(20)
)

INSERT INTO @SourceTable ([Quarter],[cal_year],[blue],[green],[yellow],[red])
VALUES  ('DEC',2011,'+31%','25-30%','22-24%','-21%')
       ,('MAR',2012,'+61%','50-60%','43-49%','-42%')

;WITH CTE([Quarter],[Color],[Value]) AS
(
    SELECT [Quarter],[Color],[Value]
    FROM
        (
            SELECT [Quarter],[blue],[green],[yellow],[red]
            FROM @SourceTable
        ) data
    UNPIVOT
    (
         [Value] FOR [Color] IN ([blue],[green],[yellow],[red])
    )AS unpvt
)
SELECT *
FROM 
(
    SELECT Color,[Quarter],Value
    FROM CTE
)AS src
PIVOT
(
    MAX(Value) FOR [Quarter] IN ([MAR],[DEC] )

) AS pvtTbl 
```

但是让我们假设您有更多数据要比较：

```
CREATE TABLE #SourceTable
(
    [Quarter] NVARCHAR(20),
    [cal_year] BIGINT,
    [blue] NVARCHAR(20),
    [green] NVARCHAR(20),
    [yellow] NVARCHAR(20),
    [red] NVARCHAR(20)
)

INSERT INTO #SourceTable ([Quarter],[cal_year],[blue],[green],[yellow],[red])
VALUES   ('DEC',2011,'+31%','25-30%','22-24%','-21%')
        ,('JAN',2012,'+11%','10-20%','13-49%','-12%')
        ,('FEB',2012,'+31%','25-35%','12-14%','-11%')
        ,('MAR',2012,'+71%','10-45%','13-59%','-11%')
        ,('APR',2012,'+11%','15-15%','12-24%','-51%')
        ,('MAY',2012,'+11%','40-60%','13-39%','-43%')

DECLARE @DynamicSQLStatement NVARCHAR(MAX)

SET @DynamicSQLStatement=N';WITH CTE([Quarter],[Color],[Value]) AS
                         (
                             SELECT [Quarter],[Color],[Value]
                             FROM
                                 (
                                     SELECT [Quarter],[blue],[green],[yellow],[red]
                                     FROM #SourceTable
                                 ) data
                             UNPIVOT
                             (
                                    [Value] FOR [Color] IN ([blue],[green],[yellow],[red])
                             )AS unpvt
                         )
                         SELECT *
                         FROM 
                         (
                             SELECT Color,[Quarter],Value
                             FROM CTE
                         )AS src
                         PIVOT
                         (
                             MAX(Value) FOR [Quarter] IN ('+(SELECT SUBSTRING((SELECT '],[' + [Quarter] FROM #SourceTable FOR XML PATH('')),3,200)+']')+')
                         ) AS pvtTbl'

EXECUTE sp_executesql @DynamicSQLStatement

DROP TABLE #SourceTable 
```

请注意，如果您希望它与不同年份的相同月份一起工作，则应该优化最后一个示例。

# android - 如何计算 XML 的子节点？

> ID：12435195
> 
> 赞同：0
> 
> 时间：2012-09-15T06:46:53.957
> 
> 标签：android, xml, parsing

我有一个这样的 XML ...

```
<?xml version="1.0"  encoding="iso-8859-1"?>
<world>
  <country> 
      <name> France </name>  
      <city> Paris </city>
      <population> 3996 </population>
      <city> Lille </city>
      <state>NE</state>
      <zip> 000000 </zip>
   </country>
</world> 
```

在这里我们可以看到 Tag Country 有 6 个子节点。但是如何以编程方式计算它。您的帮助将不胜感激.. 提前致谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T07:04:15.667

使用下面的代码来计算 NodeList 的子节点，它将解决您的问题。

```
URL url = new URL("http://www.androidpeople.com/wp-content/uploads/2010/06/example.xml");
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
DocumentBuilder db = dbf.newDocumentBuilder();
Document doc = db.parse(new InputSource(url.openStream()));
doc.getDocumentElement().normalize();
NodeList nodeList = doc.getElementsByTagName("country");
int i=nodeList.getLength();
System.out.println("Total Child is:- " + i); 
```

有关使用 Dom Parser 进行 XML 解析的更多信息，请参见下面的链接。

[使用 DOM 解析器进行 XML 解析](http://www.androidpeople.com/android-xml-parsing-tutorial-%E2%80%93-using-domparser)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T06:57:41.437

要获取集合的大小：

```
nl.getLength() //n1 is the object of NodeList

public int getLength()

The number of nodes in the list. The range of valid child node indices is 0 to length-1 inclusive. 
```

并看看[NODELIST](http://docs.oracle.com/javase/1.4.2/docs/api/org/w3c/dom/NodeList.html)

# php - PDO 使用 FOR UPDATE 更新错误的顺序

> ID：12435200
> 
> 赞同：1
> 
> 时间：2012-09-15T06:48:02.230
> 
> 标签：php, mysql, transactions, pdo

我有一个简单的脚本，我想在使用以下代码更新“查找”表（增加“nDeger”行）后更新表“Isler”：

```
 $PDOvt = new PDO ('mysql:dbname=' . VTAD . ';host=localhost', VTKA, VTP);
        $PDOvt->setAttribute (PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

        try
        {
            $Q2 = "SELECT @GRUPID:=nDeger as grupId FROM Lookup WHERE cAlan = 'nGrupId' FOR UPDATE;";
            $Q3 = "UPDATE Lookup SET nDeger = nDeger + 1 WHERE cAlan = 'nGrupId';";
            $Q4 = "UPDATE Isler SET nGrupId = @GRUPID
        WHERE 
            konukID = :oturumKaydi
        AND 
            kID = :kid
        AND 
            nSiparisDurum = '-1' 
        AND 
            (durum = 4 OR durum = 5);";

            $PDOvt->beginTransaction ();

            $SMTP2 = $PDOvt->prepare ($Q2);

            $SMTP3 = $PDOvt->prepare ($Q3);

            $SMTP4 = $PDOvt->prepare ($Q4);

            $SMTP4->bindValue (':oturumKaydi', $this->oturum_kaydi, PDO::PARAM_STR);
            $SMTP4->bindValue (':kid', $this->kullanici_id, PDO::PARAM_INT);

            $SMTP2->execute ();
            $SMTP3->execute ();
            $SMTP4->execute ();

            $PDOvt->commit ();

            $GRUPID = $SMTP2->fetchAll (PDO::FETCH_CLASS);
            $_SESSION['iliskili_grup'] = $GRUPID[0]->grupId;
            $this->iliskili_grup = $GRUPID[0]->grupId; // not incremented value

            $PDOvt = null;
            $this->debuggrupid = $vt->get_var("SELECT nDeger FROM Lookup WHERE cAlan = 'nGrupId' FOR UPDATE;"); // incremented value;

        } catch (PDOException $e)
        {
            $PDOvt->rollBack ();
            echo "HATA!";
        } 
```

我添加了一个带有不同连接的最后一个查询来检查 nDeger 的最后一个值，它看起来增加了。

但似乎 mysql 在增加 Lookup 之前更新了“Isler”。我试图改变两个更新的位置，但没有任何改变。

# c# - Drupal登录和添加节点

> ID：12435202
> 
> 赞同：0
> 
> 时间：2012-09-15T06:48:23.360
> 
> 标签：c#, drupal

是否有可能使用 C# 登录 drupal CMS 并将节点添加到某个类别？怎么做？欢迎任何文档或示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T17:47:33.433

您可能需要使用其中一个服务模块。[服务](http://drupal.org/project/services)可能有更多的文档。

*   [RESTful Web 服务](http://drupal.org/project/restws)
*   [服务](http://drupal.org/project/services)

# android - 滚动视图中大量视图的内存管理？

> ID：12435207
> 
> 赞同：0
> 
> 时间：2012-09-15T06:48:53.037
> 
> 标签：android

我有一个场景，我正在编写一个 ScrollView，它旨在充当“无限滚动”，在用户向下滚动时动态地向自身添加更多视图以增加大小（就像向下滚动 Facebook 时间线一样）。添加的每个视图都是一个复杂的组件，其中包含一些 TextView、ImageView 等。

内存很快成为一个问题也就不足为奇了，尤其是当我们达到 50 多个元素范围时。不久之后，我就会遇到严重的 OutOfMemoryErrors。

在 iOS 上，我会简单地使用 UITableView，它通过删除不在屏幕上的视图并重用它们的容器来解决问题（例如，即使表格中有 100 多个视图，实际上你只会绘制少数几个视图）。

是否有一些类似的技术或其他好的解决方案可以在 Android 上完成此任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T06:54:15.803

是的，有一种高效使用列表视图的模式。[Romain Guy 在 2010 年完成的 Google IO 演示文稿](http://www.youtube.com/watch?v=wDBM6wVEO70)中关于该模式的精彩记录仍然有效。否则它也记录在各种地方 - 只是[谷歌“android持有者列表视图模式”](https://www.google.ca/search?q=android%20listview%20io%20presentation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-11T06:39:30.773

当列表有大量数据时，我们的应用程序很容易由于应用程序内存不足而崩溃（由于处理不当的行视图）。有两种方法可以有效地解决和管理列表内存

**1**使用`converView`

> convertView - 如果可能的话，要重用的旧视图。注意：在使用之前，您应该检查此视图是否为非空且类型合适。如果无法将此视图转换为显示正确的数据，则此方法可以创建一个新视图。

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
View view;
if(convertView == null) {
    view = this.inflator.inflate(android.R.layout.simple_list_item_1, parent, false);
}
else {
    view = convertView;
}
// remaining implementation
return view;
} 
```

[阅读更多](https://developer.android.com/reference/android/widget/Adapter.html)

**2**使用`RecyclerView`

> 一种灵活的视图，用于为大型数据集提供有限的窗口。

将 RecyclerView 添加到布局

```
//A RecyclerView with some commonly used attributes 
<android.support.v7.widget.RecyclerView
android:id="@+id/my_recycler_view"
android:scrollbars="vertical"
android:layout_width="match_parent"
android:layout_height="match_parent"/> 
```

将 RecyclerView 小部件添加到布局后，获取对象的句柄，将其连接到布局管理器，并为要显示的数据附加适配器：

```
public class MyActivity extends Activity {
private RecyclerView mRecyclerView;
private RecyclerView.Adapter mAdapter;
private RecyclerView.LayoutManager mLayoutManager;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.my_activity);
    mRecyclerView = (RecyclerView) findViewById(R.id.my_recycler_view);

    // use this setting to improve performance if you know that changes
    // in content do not change the layout size of the RecyclerView
    mRecyclerView.setHasFixedSize(true);

    // use a linear layout manager
    mLayoutManager = new LinearLayoutManager(this);
    mRecyclerView.setLayoutManager(mLayoutManager);

    // specify an adapter (see also next example)
    mAdapter = new MyAdapter(myDataset);
    mRecyclerView.setAdapter(mAdapter);
}
//... other code
} 
```

适配器提供对数据集中项目的访问，为项目创建视图，并在原始项目不再可见时将某些视图的内容替换为新的数据项目。以下代码示例显示了数据集的简单实现，该数据集由使用 TextView 小部件显示的字符串数组组成：

```
public class MyAdapter extends RecyclerView.Adapter<MyAdapter.ViewHolder> {
private String[] mDataset;

// Provide a reference to the views for each data item
// Complex data items may need more than one view per item, and
// you provide access to all the views for a data item in a view holder
public static class ViewHolder extends RecyclerView.ViewHolder {
    // each data item is just a string in this case
    public TextView mTextView;
    public ViewHolder(TextView v) {
        super(v);
        mTextView = v;
    }
}

// Provide a suitable constructor (depends on the kind of dataset)
public MyAdapter(String[] myDataset) {
    mDataset = myDataset;
}

// Create new views (invoked by the layout manager)
@Override
public MyAdapter.ViewHolder onCreateViewHolder(ViewGroup parent,
                                               int viewType) {
    // create a new view
    TextView v = (TextView) LayoutInflater.from(parent.getContext())
            .inflate(R.layout.my_text_view, parent, false);
    // set the view's size, margins, paddings and layout parameters
    ...
    ViewHolder vh = new ViewHolder(v);
    return vh;
}

// Replace the contents of a view (invoked by the layout manager)
@Override
public void onBindViewHolder(ViewHolder holder, int position) {
    // - get element from your dataset at this position
    // - replace the contents of the view with that element
    holder.mTextView.setText(mDataset[position]);

}

// Return the size of your dataset (invoked by the layout manager)
@Override
public int getItemCount() {
    return mDataset.length;
}
} 
```

[阅读更多](https://developer.android.com/training/material/lists-cards.html#CardView)

`Hope this will help one and all.`

# python - pip install -U 中的“-U”选项代表什么

> ID：12435209
> 
> 赞同：207
> 
> 时间：2012-09-15T06:48:54.953
> 
> 标签：python, command-line, pip

尽管有大量的谷歌搜索，但我找不到 pip 命令行选项/参数的任何文档。是什么`pip install -U`意思？有人有指向 pip 选项和参数列表的链接吗？

* * *

## 回答 #1

> 赞同：236
> 
> 时间：2012-09-15T06:50:25.240

键入`pip install -h`以列出帮助：

> -U, --upgrade 将所有软件包升级到最新的可用版本

因此，如果您已经*安装*了一个软件包，它将为您升级该软件包。如果没有 -U 开关，它会告诉你软件包已经安装并退出。

每个`pip`子命令都有自己的帮助列表。`pip -h`向您显示总体帮助，并`pip [subcommand] -h`为您提供该子命令的帮助，例如`install`.

您还可以[在线找到完整的参考文档](https://pip.pypa.io/en/stable/reference/)；[*General Options*部分](https://pip.pypa.io/en/stable/reference/pip/#general-options)涵盖了每个子命令可用的开关，`pip`而每个子命令都有一个单独的*Options*部分来涵盖子命令特定的开关；例如，请参见[*`pip install`选项*部分](https://pip.pypa.io/en/stable/reference/pip_install/#options)。

# windows-8 - 在 Windows 商店应用程序开发中使用 WebView 类

> ID：12435210
> 
> 赞同：0
> 
> 时间：2012-09-15T06:49:09.027
> 
> 标签：windows-8

我在 c# 中编写了以下代码，用于单击按钮以查看网页：

```
private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        ob = new WebView();
        Uri search=new Uri("http://www.google.com");

        ob.Navigate(search);
    } 
```

但是每当我单击按钮时，上述操作都没有执行，怎么了？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T18:50:55.077

我在这里看到的是您正在创建一个新的 webview，因此要么“**指定 webview 的高度和宽度**”，要么“**使用某些名称和特定的高度和宽度将 webview 控件添加到 xaml** ”。

# python - threading.Timer - 每“n”秒重复一次函数

> ID：12435211
> 
> 赞同：116
> 
> 时间：2012-09-15T06:49:12.460
> 
> 标签：python, multithreading, timer, python-multithreading

我想每 0.5 秒触发一次功能，并且能够启动和停止并重置计时器。我不太了解 Python 线程是如何工作的，并且在使用 Python 计时器时遇到了困难。

`RuntimeError: threads can only be started once`但是，当我执行`threading.timer.start()`两次时，我不断得到。有解决办法吗？我尝试`threading.timer.cancel()`在每次开始之前申请。

伪代码：

```
t=threading.timer(0.5,function)
while True:
    t.cancel()
    t.start() 
```

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2012-09-15T06:56:41.490

最好的方法是启动一次定时器线程。在您的计时器线程中，您将编写以下代码

```
class MyThread(Thread):
    def __init__(self, event):
        Thread.__init__(self)
        self.stopped = event

    def run(self):
        while not self.stopped.wait(0.5):
            print("my thread")
            # call a function 
```

在启动计时器的代码中，您可以随后`set`通过停止事件来停止计时器。

```
stopFlag = Event()
thread = MyThread(stopFlag)
thread.start()
# this will stop the timer
stopFlag.set() 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-05-03T22:40:03.147

来自[python 中 setInterval 的等效项](https://stackoverflow.com/q/5179467/4279)：

```
import threading

def setInterval(interval):
    def decorator(function):
        def wrapper(*args, **kwargs):
            stopped = threading.Event()

            def loop(): # executed in another thread
                while not stopped.wait(interval): # until stopped
                    function(*args, **kwargs)

            t = threading.Thread(target=loop)
            t.daemon = True # stop if the program exits
            t.start()
            return stopped
        return wrapper
    return decorator 
```

用法：

```
@setInterval(.5)
def function():
    "..."

stop = function() # start timer, the first call is in .5 seconds
stop.set() # stop the loop
stop = function() # start new timer
# ...
stop.set() 
```

或者这里[有相同的功能，但作为独立功能而不是装饰器](https://stackoverflow.com/a/22498708/4279)：

```
cancel_future_calls = call_repeatedly(60, print, "Hello, World")
# ...
cancel_future_calls() 
```

[这是不使用线程的方法](https://stackoverflow.com/a/14040516/4279)。

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2018-02-12T06:57:11.033

[对Hans Then 的回答](https://stackoverflow.com/a/12435256/8589122)稍作改进，我们可以将 Timer 函数子类化。以下成为我们**完整**的“重复计时器”代码，它可以用作 threading.Timer 的替代品，具有所有相同的参数：

```
from threading import Timer

class RepeatTimer(Timer):
    def run(self):
        while not self.finished.wait(self.interval):
            self.function(*self.args, **self.kwargs) 
```

使用示例：

```
def dummyfn(msg="foo"):
    print(msg)

timer = RepeatTimer(1, dummyfn)
timer.start()
time.sleep(5)
timer.cancel() 
```

产生以下输出：

```
foo
foo
foo
foo 
```

和

```
timer = RepeatTimer(1, dummyfn, args=("bar",))
timer.start()
time.sleep(5)
timer.cancel() 
```

生产

```
bar
bar
bar
bar 
```

* * *

## 回答 #4

> 赞同：33
> 
> 时间：2014-06-30T10:29:32.150

使用计时器线程-

```
from threading import Timer,Thread,Event

class perpetualTimer():

   def __init__(self,t,hFunction):
      self.t=t
      self.hFunction = hFunction
      self.thread = Timer(self.t,self.handle_function)

   def handle_function(self):
      self.hFunction()
      self.thread = Timer(self.t,self.handle_function)
      self.thread.start()

   def start(self):
      self.thread.start()

   def cancel(self):
      self.thread.cancel()

def printer():
    print 'ipsem lorem'

t = perpetualTimer(5,printer)
t.start() 
```

这可以通过`t.cancel()`

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2017-01-03T19:05:27.990

为了按照 OP 的要求使用 Timer 提供正确的答案，我将改进[swapnil jariwala 的答案](https://stackoverflow.com/questions/12435211/python-threading-timer-repeat-function-every-n-seconds/24488061#24488061)：

```
from threading import Timer

class InfiniteTimer():
    """A Timer class that does not stop, unless you want it to."""

    def __init__(self, seconds, target):
        self._should_continue = False
        self.is_running = False
        self.seconds = seconds
        self.target = target
        self.thread = None

    def _handle_target(self):
        self.is_running = True
        self.target()
        self.is_running = False
        self._start_timer()

    def _start_timer(self):
        if self._should_continue: # Code could have been running when cancel was called.
            self.thread = Timer(self.seconds, self._handle_target)
            self.thread.start()

    def start(self):
        if not self._should_continue and not self.is_running:
            self._should_continue = True
            self._start_timer()
        else:
            print("Timer already started or running, please wait if you're restarting.")

    def cancel(self):
        if self.thread is not None:
            self._should_continue = False # Just in case thread is running and cancel fails.
            self.thread.cancel()
        else:
            print("Timer never started or failed to initialize.")

def tick():
    print('ipsem lorem')

# Example Usage
t = InfiniteTimer(0.5, tick)
t.start() 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-08-09T09:40:17.880

我已经更改了 swapnil-jariwala 代码中的一些代码来制作一个小控制台时钟。

```
from threading import Timer, Thread, Event
from datetime import datetime

class PT():

    def __init__(self, t, hFunction):
        self.t = t
        self.hFunction = hFunction
        self.thread = Timer(self.t, self.handle_function)

    def handle_function(self):
        self.hFunction()
        self.thread = Timer(self.t, self.handle_function)
        self.thread.start()

    def start(self):
        self.thread.start()

def printer():
    tempo = datetime.today()
    h,m,s = tempo.hour, tempo.minute, tempo.second
    print(f"{h}:{m}:{s}")

t = PT(1, printer)
t.start() 
```

> 输出

```
>>> 11:39:11
11:39:12
11:39:13
11:39:14
11:39:15
11:39:16
... 
```

# 带有 tkinter 图形界面的计时器

此代码使用 tkinter 将时钟计时器放在一个小窗口中

```
from threading import Timer, Thread, Event
from datetime import datetime
import tkinter as tk

app = tk.Tk()
lab = tk.Label(app, text="Timer will start in a sec")
lab.pack()

class perpetualTimer():

    def __init__(self, t, hFunction):
        self.t = t
        self.hFunction = hFunction
        self.thread = Timer(self.t, self.handle_function)

    def handle_function(self):
        self.hFunction()
        self.thread = Timer(self.t, self.handle_function)
        self.thread.start()

    def start(self):
        self.thread.start()

    def cancel(self):
        self.thread.cancel()

def printer():
    tempo = datetime.today()
    clock = "{}:{}:{}".format(tempo.hour, tempo.minute, tempo.second)
    try:
        lab['text'] = clock
    except RuntimeError:
        exit()

t = perpetualTimer(1, printer)
t.start()
app.mainloop() 
```

# 抽认卡游戏的一个例子（有点）

```
from threading import Timer, Thread, Event
from datetime import datetime

class perpetualTimer():

    def __init__(self, t, hFunction):
        self.t = t
        self.hFunction = hFunction
        self.thread = Timer(self.t, self.handle_function)

    def handle_function(self):
        self.hFunction()
        self.thread = Timer(self.t, self.handle_function)
        self.thread.start()

    def start(self):
        self.thread.start()

    def cancel(self):
        self.thread.cancel()

x = datetime.today()
start = x.second

def printer():
    global questions, counter, start
    x = datetime.today()
    tempo = x.second
    if tempo - 3 > start:
        show_ans()
    #print("\n{}:{}:{}".format(tempo.hour, tempo.minute, tempo.second), end="")
    print()
    print("-" + questions[counter])
    counter += 1
    if counter == len(answers):
        counter = 0

def show_ans():
    global answers, c2
    print("It is {}".format(answers[c2]))
    c2 += 1
    if c2 == len(answers):
        c2 = 0

questions = ["What is the capital of Italy?",
             "What is the capital of France?",
             "What is the capital of England?",
             "What is the capital of Spain?"]

answers = "Rome", "Paris", "London", "Madrid"

counter = 0
c2 = 0
print("Get ready to answer")
t = perpetualTimer(3, printer)
t.start() 
```

输出：

```
Get ready to answer
>>> 
-What is the capital of Italy?
It is Rome

-What is the capital of France?
It is Paris

-What is the capital of England?
... 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-03-25T18:53:53.693

我必须为一个项目做这个。我最终做的是为该函数启动一个单独的线程

```
t = threading.Thread(target =heartbeat, args=(worker,))
t.start() 
```

****心跳是我的功能，工人是我的论据之一****

在我的心跳功能内部：

```
def heartbeat(worker):

    while True:
        time.sleep(5)
        #all of my code 
```

因此，当我启动线程时，该函数将反复等待 5 秒，运行我的所有代码，并无限期地执行此操作。如果要终止进程，只需终止线程。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-03-16T19:41:31.113

我喜欢 right2clicky 的回答，尤其是它不需要在每次计时器滴答时都拆除线程并创建一个新线程。此外，创建一个带有定期调用的计时器回调的类是一个简单的覆盖。这是我的正常用例：

```
class MyClass(RepeatTimer):
    def __init__(self, period):
        super().__init__(period, self.on_timer)

    def on_timer(self):
        print("Tick")

if __name__ == "__main__":
    mc = MyClass(1)
    mc.start()
    time.sleep(5)
    mc.cancel() 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-06-28T17:15:03.823

我已经实现了一个用作计时器的类。

如果有人需要，我将链接留在这里： [https ://github.com/ivanhalencp/python/tree/master/xTimer](https://github.com/ivanhalencp/python/tree/master/xTimer)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-07-02T14:51:42.050

这是使用函数而不是类的替代实现。受上述@Andrew Wilkins 的启发。

因为等待比睡眠更准确（它考虑了函数运行时）：

```
import threading

PING_ON = threading.Event()

def ping():
  while not PING_ON.wait(1):
    print("my thread %s" % str(threading.current_thread().ident))

t = threading.Thread(target=ping)
t.start()

sleep(5)
PING_ON.set() 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-10-11T17:59:31.163

除了使用线程的上述出色答案之外，如果您必须使用主线程或更喜欢异步方法 - 我在[aio_timers](https://pypi.org/project/aio-timers/) Timer 类周围包装了一个短类（以启用重复）

```
import asyncio
from aio_timers import Timer

class RepeatingAsyncTimer():
    def __init__(self, interval, cb, *args, **kwargs):
        self.interval = interval
        self.cb = cb
        self.args = args
        self.kwargs = kwargs
        self.aio_timer = None
        self.start_timer()

    def start_timer(self):
        self.aio_timer = Timer(delay=self.interval, 
                               callback=self.cb_wrapper, 
                               callback_args=self.args, 
                               callback_kwargs=self.kwargs
                              )

    def cb_wrapper(self, *args, **kwargs):
        self.cb(*args, **kwargs)
        self.start_timer()

from time import time
def cb(timer_name):
    print(timer_name, time())

print(f'clock starts at: {time()}')
timer_1 = RepeatingAsyncTimer(interval=5, cb=cb, timer_name='timer_1')
timer_2 = RepeatingAsyncTimer(interval=10, cb=cb, timer_name='timer_2') 
```

时钟开始于：16024388 **40** .9690785

计时器_ **1** 16024388 **45** .980087

计时器**_2** 16024388 **50** .9806316

计时器_ **1** 16024388 **50** .9808934

计时器_ **1** 16024388 **55** .9863033

timer_2 **16024388** **60** .9868324 _

计时器_ **1** 16024388 **60** .9876585

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-06-20T18:52:35.940

```
from threading import Timer
def TaskManager():
    #do stuff
    t = Timer( 1, TaskManager )
    t.start()

TaskManager() 
```

这是一个小样本，它将有助于更好地理解它是如何运行的。最后的函数 taskManager() 创建对其自身的延迟函数调用。

尝试更改“dalay”变量，您将能够看到差异

```
from threading import Timer, _sleep

# ------------------------------------------
DATA = []
dalay = 0.25 # sec
counter = 0
allow_run = True
FIFO = True

def taskManager():

    global counter, DATA, delay, allow_run
    counter += 1

    if len(DATA) > 0:
        if FIFO:
            print("["+str(counter)+"] new data: ["+str(DATA.pop(0))+"]")
        else:
            print("["+str(counter)+"] new data: ["+str(DATA.pop())+"]")

    else:
        print("["+str(counter)+"] no data")

    if allow_run:
        #delayed method/function call to it self
        t = Timer( dalay, taskManager )
        t.start()

    else:
        print(" END task-manager: disabled")

# ------------------------------------------
def main():

    DATA.append("data from main(): 0")
    _sleep(2)
    DATA.append("data from main(): 1")
    _sleep(2)

# ------------------------------------------
print(" START task-manager:")
taskManager()

_sleep(2)
DATA.append("first data")

_sleep(2)
DATA.append("second data")

print(" START main():")
main()
print(" END main():")

_sleep(2)
DATA.append("last data")

allow_run = False 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-07-25T05:06:59.370

我想出了另一个 SingleTon 类的解决方案。请告诉我是否有任何内存泄漏。

```
import time,threading

class Singleton:
  __instance = None
  sleepTime = 1
  executeThread = False

  def __init__(self):
     if Singleton.__instance != None:
        raise Exception("This class is a singleton!")
     else:
        Singleton.__instance = self

  @staticmethod
  def getInstance():
     if Singleton.__instance == None:
        Singleton()
     return Singleton.__instance

  def startThread(self):
     self.executeThread = True
     self.threadNew = threading.Thread(target=self.foo_target)
     self.threadNew.start()
     print('doing other things...')

  def stopThread(self):
     print("Killing Thread ")
     self.executeThread = False
     self.threadNew.join()
     print(self.threadNew)

  def foo(self):
     print("Hello in " + str(self.sleepTime) + " seconds")

  def foo_target(self):
     while self.executeThread:
        self.foo()
        print(self.threadNew)
        time.sleep(self.sleepTime)

        if not self.executeThread:
           break

sClass = Singleton()
sClass.startThread()
time.sleep(5)
sClass.getInstance().stopThread()

sClass.getInstance().sleepTime = 2
sClass.startThread() 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-09-22T10:34:16.797

这是连续运行定时器的示例代码。只需在耗尽时创建一个新计时器并调用相同的函数。不是最好的方法，但也可以这样做。

```
import threading
import time

class ContinousTimer():
    def __init__(self):
        self.timer = None

    def run(self, msg='abc'):
        print(msg)

        self.timer = threading.Timer(interval=2, function=self.run, args=(msg, ))
        self.timer.start()

if __name__ == "__main__":
    t = ContinousTimer()
    try:
        t.run(msg="Hello")
        while True:
            time.sleep(0.1)
    except KeyboardInterrupt:
        # Cancel Timer
        t.timer.cancel() 
```

# haskell - 使用 cabal 构建应用程序时 TTF_Quit 调用的段错误

> ID：12435212
> 
> 赞同：1
> 
> 时间：2012-09-15T06:49:26.017
> 
> 标签：haskell, segmentation-fault, sdl, cabal

我有一个奇怪的问题。我用 sdl 在 haskell 中创建了一个简单的应用程序，当它用 ghc 构建时没有问题，但是当它用 cabal 构建时，我在关闭我的应用程序后出现了段错误。我注意到，当 Graphics.UI.SDL.TTF.General.quit 调用被评论时，也没有问题。

我正在尝试使用 ghc 7.4.1 在 Ubuntu 12.04 上做这件事。这是我的阴谋集团文件：

```
Name:           simple app
Version:        0.0.0.1
Build-Type:     Simple
Cabal-Version:  >= 1.8
Executable invaders
  Main-is:         App.hs
  Build-Depends:   base > 3 && < 5,
                   mtl,
                   SDL,
                   SDL-image,
                   SDL-ttf 
```

这是我的应用程序（最多是来自 LasyFooHaskell 的第 8 课的[代码](https://github.com/snkkid/LazyFooHaskell)）

```
module App where

import Data.Word

import Control.Monad
import Control.Monad.State
import Control.Monad.Reader

import Graphics.UI.SDL
import Graphics.UI.SDL.Image

import Graphics.UI.SDL.TTF
import qualified Graphics.UI.SDL.TTF.General as TTFG

screenWidth = 640
screenHeight = 480
screenBpp = 32

data MessageDir = MessageDir {
     upMessage    :: Surface,
     downMessage  :: Surface,
     leftMessage  :: Surface,
     rightMessage :: Surface
}

data AppConfig = AppConfig {
     screen       :: Surface,
     background   :: Surface,
     messageDir   :: MessageDir
}

type AppState = StateT (Maybe Surface) IO
type AppEnv = ReaderT AppConfig AppState

runLoop :: AppConfig -> IO()
runLoop config = (evalStateT . runReaderT loop) config Nothing

loadImage :: String -> Maybe (Word8, Word8, Word8) -> IO Surface
loadImage filename colorKey = load filename >>= displayFormat >>= setColorKey' colorKey

setColorKey' Nothing s = return s
setColorKey' (Just (r, g, b)) surface = (mapRGB . surfaceGetPixelFormat) surface r g b >>= setColorKey surface [SrcColorKey] >> return surface

applySurface :: Int -> Int -> Surface -> Surface -> Maybe Rect -> IO Bool
applySurface x y src dst clip = blitSurface src clip dst offset
             where offset = Just Rect { rectX = x, rectY = y, rectW = 0, rectH = 0 }

initEnv :: IO AppConfig
initEnv = do
        screen <- setVideoMode screenWidth screenHeight screenBpp [SWSurface]
        setCaption "Press an Arrow Key" []

        background      <- loadImage "res/img/background.png" $ Just (0x00, 0xff, 0xff)
        font            <- openFont "res/lazy.ttf" 72

        upMessage       <- renderTextSolid font "Up was pressed" textColor
        downMessage     <- renderTextSolid font "Down was pressed" textColor
        leftMessage     <- renderTextSolid font "Left was pressed" textColor
        rightMessage    <- renderTextSolid font "Right was pressed" textColor

        applySurface 0 0 background screen Nothing

        let msgDir = MessageDir upMessage downMessage leftMessage rightMessage
        return $ AppConfig screen background msgDir
      where textColor = Color 0 0 0

loop :: AppEnv ()
loop = do

     quit <- whileEvents $ \event -> do
       case event of 
         (KeyDown (Keysym key _ _)) -> do
           mdir <- messageDir `liftM` ask
           case key of
             SDLK_UP    -> put $ Just $ upMessage mdir
             SDLK_DOWN  -> put $ Just $ downMessage mdir
             SDLK_LEFT  -> put $ Just $ leftMessage mdir
             SDLK_RIGHT -> put $ Just $ rightMessage mdir
             _          -> put Nothing
         _ -> return ()

     screen     <- screen `liftM` ask
     background <- background `liftM` ask
     msg        <- get

     case msg of
          Nothing       -> return ()
          Just message  -> do
               applySurface' 0 0 background screen Nothing
               applySurface' ((screenWidth - surfaceGetWidth message) `div` 2) ((screenHeight - surfaceGetHeight message) `div` 2) message screen Nothing
               put Nothing

     liftIO $ Graphics.UI.SDL.flip screen

     unless quit loop

  where applySurface' x y src dst clip = liftIO (applySurface x y src dst clip)

whileEvents :: MonadIO m => (Event -> m()) -> m Bool
whileEvents act = do
            event <- liftIO pollEvent
            case event of
                 Quit -> return True
                 NoEvent -> return False
                 _ -> do
                   act event
                   whileEvents act

main = withInit [InitEverything] $ do
     result <- TTFG.init
     if not result
        then putStr "Failed to init ttf\n"
        else do
             env <- initEnv
             runLoop env
             ttfWasInit <- TTFG.wasInit
             case ttfWasInit of
               True -> TTFG.quit
               False -> return () 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T09:04:23.350

我认为这在使用优化编译时显示了段错误。我试过了`-O0`，没有段错误，但`-O2`给出了段错误。

cabal 构建版本默认提供 segfault。这可能是因为 cabal 默认启用优化。

尝试构建

```
cabal configure --disable-optimization
cabal build 
```

# ruby-on-rails-3 - Rails 自动加载是如何工作的？

> ID：12435213
> 
> 赞同：1
> 
> 时间：2012-09-15T06:49:29.693
> 
> 标签：ruby-on-rails-3

是否有明确的指南或一些好的博客文章来了解自动加载在 Rails 3 中的工作原理？“找不到文件”和“未初始化的常量”错误是如此常见，**如此****令人**沮丧。

自动加载机制的哪些部分是“来自 Ruby”，什么是“来自 Rails”？它是怎么运行的？为什么当文件明确存在于正确位置时却找不到文件？如果它找到文件，为什么它会抱怨“未初始化的常量”？

还是只是我在使用 Rails 一年后表现不佳？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T06:55:13.697

它使用`Kernel#autoload`. 从里：

```
= Kernel#autoload

(from ~/.ri)
------------------------------------------------------------------------------
  autoload(module, filename)   -> nil

------------------------------------------------------------------------------

Registers filename to be loaded (using Kernel::require) the
first time that module (which may be a String or a symbol) is
accessed.

  autoload(:MyModule, "/usr/local/lib/modules/my_module.rb") 
```

关于您遇到的“找不到文件”错误的问题，您可以将特定示例的详细信息添加到您的问题中吗？这将使您更容易为您提供帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-05T20:01:41.383

IMO 在 Rails 中自动加载和重新加载的最佳资源是关于主题[http://guides.rubyonrails.org/autoloading_and_reloading_constants.html的 Rails 指南章节](http://guides.rubyonrails.org/autoloading_and_reloading_constants.html)

为了理解这个 Rails 机制是如何工作的，你需要确保你理解 Ruby 常量查找是如何工作的，以及在 Ruby 中加载代码的不同方式是什么。

这不是一个简单的话题，正如 Sinatra 的创建者 Konstantin Haase 的这篇详细博客文章中所解释的那样。[http://blog.rkh.im/code-reloading](http://blog.rkh.im/code-reloading)。

# jquery - 我如何让这个导航在 iphone 和 ipad 上工作，虽然它是响应式的

> ID：12435214
> 
> 赞同：0
> 
> 时间：2012-09-15T06:49:40.363
> 
> 标签：jquery, html, css, twitter-bootstrap, responsive-design

我不确定让这个导航在 ipad 和 iphone 上工作的标准引导方式是什么。如果我缩小页面，则会出现水平滚动，我认为这不是预期的效果。

```
<div id="navbar-example" class="navbar navbar-static span8" style="margin-top: 20px;">
<!-- navigation -->
<div class="navbar-inner">
    <div class="container" style="width: auto;">
        <a class="brand" href="#">Animal Types</a>
        <ul class="nav">
            <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Mammals <b class="caret"></b></a>
                <ul class="dropdown-menu">
                    <li><a href="#" onclick="return false" id="chimpanzee">Chimpanzee</a></li>
                    <li><a href="#" onclick="return false" id="lemur">Lemur</a></li>
                    <li><a href="#" onclick="return false" id="jaguar">Jaguar</a></li>
                </ul>
            </li>
            <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Reptiles <b class="caret"></b></a>
                <ul class="dropdown-menu">
                    <li><a href="#" onclick="return false" id="cobra">Cobra</a></li>
                    <li><a href="#" onclick="return false" id="eidechse">Eidechse</a></li>
                    <li><a href="#" onclick="return false" id="iguana">Iguana</a></li>
                </ul>
            </li>
        </ul>
        <ul class="nav">
            <li id="fat-menu" class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Rodents <b class="caret"></b></a>
                <ul class="dropdown-menu">
                    <li><a href="#" onclick="return false" id="chipmunk">Chipmunk</a></li>
                    <li><a href="#" onclick="return false" id="beaver">Beaver</a></li>
                    <li><a href="#" onclick="return false" id="hamster">Hamster</a></li>
                </ul>
            </li>
        </ul>
    </div>
</div>

<!-- content pages --> 
```

现场示例在这里：

[http://tonysilvestri.com/examples/twitterBootstrapDropdown/bootstrapDropdownExample.html#](http://tonysilvestri.com/examples/twitterBootstrapDropdown/bootstrapDropdownExample.html#)

底线：

我们如何使用 twitter bootstrap 为 iphone/ipad 开发子级菜单页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T07:31:34.707

要实现折叠响应式导航栏，请将导航栏内容包装在包含 div 的 div 中`.nav-collapse.collapse`，并添加导航栏切换按钮`.btn-navbar`.

尝试这个

```
<div id="navbar-example" class="navbar navbar-static span8" style="margin-top: 20px;">
<!-- navigation -->
<div class="navbar-inner">
    <div class="container" style="width: auto;">
        <a class="brand" href="#">Animal Types</a>

 <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>        

 <div class="nav-collapse">
        <ul class="nav">
            <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Mammals <b class="caret"></b></a>
                <ul class="dropdown-menu">
                    <li><a href="#" onclick="return false" id="chimpanzee">Chimpanzee</a></li>
                    <li><a href="#" onclick="return false" id="lemur">Lemur</a></li>
                    <li><a href="#" onclick="return false" id="jaguar">Jaguar</a></li>
                </ul>
            </li>
            <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Reptiles <b class="caret"></b></a>
                <ul class="dropdown-menu">
                    <li><a href="#" onclick="return false" id="cobra">Cobra</a></li>
                    <li><a href="#" onclick="return false" id="eidechse">Eidechse</a></li>
                    <li><a href="#" onclick="return false" id="iguana">Iguana</a></li>
                </ul>
            </li>
        </ul>
        <ul class="nav">
            <li id="fat-menu" class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Rodents <b class="caret"></b></a>
                <ul class="dropdown-menu">
                    <li><a href="#" onclick="return false" id="chipmunk">Chipmunk</a></li>
                    <li><a href="#" onclick="return false" id="beaver">Beaver</a></li>
                    <li><a href="#" onclick="return false" id="hamster">Hamster</a></li>
                </ul>
            </li>
        </ul>
  </div>        

    </div>
</div>
</div> 
```

# javascript - 在 html 中使用外部 javascript 进行数据验证

> ID：12435217
> 
> 赞同：-1
> 
> 时间：2012-09-15T06:50:12.707
> 
> 标签：javascript, html, validation, external

我正在尝试在 uni 项目的表单上进行基本数据验证。但是，我试图调用的 javascript 函数似乎根本没有被访问，我无法弄清楚原因。

这是我的 HTML：

```
<!DOCTYPE HTML>

<HTML>

<HEAD>

<meta http-equiv="Content-type" content="text/html;charset=UTF-8"> 

<TITLE>Make an Order</TITLE>

<link href="design/css/style.css" rel="stylesheet" type="text/css">
<script src="design/scripts/Validator.js" language="javascript" type="text/javascript"></script>

</HEAD>

<BODY>

<div id="container">

    <form id="guestbook" method="post" action="index.html" onsubmit="return Validator(this);">
        <fieldset>
            <legend>
                Personal information
            </legend>
            <label for=name>Name:</label>
            <input id=name name=name type=text placeholder="Your name" required autofocus><br />
            <label for=email>Email:             </label>
            <input id=email name=email type=text placeholder="Your email address" required><br />
            <label for=phnumber>Phone number:       </label>
            <input id=phnumber name=phnumber type=text placeholder="Your telephone number" required><br />
        </fieldset>

        <fieldset>
            <legend>
                Order details
            </legend>
            Choose whether you would like to order an image, video, or both:<br />
            <input id=image name=order_type type=checkbox value="Image"><label for=image>$100 Image:</label><br />
            <input id=video name=order_type type=checkbox value="Video"><label for=video>$95/frame Video:</label><br />
            <label for=url>URL of image to modify:  </label>
            <input id=url name=url type=text placeholder="URL of image" required><br />
        </fieldset>

        <fieldset>
            <legend>
                Credit card details
            </legend>
            <label for=ccnumber>Credit card number:</label>
            <input id=ccnumber name=ccnumber type=text placeholder="Your credit card number" required><br />
            <label for=bsbnumber>BSB number:</label>
            <input id=bsbnumber name=bsbnumber type=text placeholder="Your BSB number" required><br />
        </fieldset>

        <div class="buttons">
            <input type="submit" value="Submit" />
            <input type="reset" value="Reset" />
        </div>

    </form>

    <div id="footer">
        <p>website by etc</p>
    </div>

</div>

</BODY>

</HTML> 
```

这是我的外部 javascript 文件 Validator.js：

```
function Validator(theForm)
{
    var errorinit = "Error(s) detected. Please amend before continuing:\n";
    var error = errorinit;

    //check that at least one checkbox (to choose either image or video) has been selected
    var boxChecked = false;
    if (theForm.image.checked == true && theForm.video.checked == true)
    {
        boxChecked = true;
    }
    if (boxChecked == false)
    {
        error += " - You must select at least a video or an image.\n"
        break;
    }

    //check that numerical-only inputs have numbers (but allowing for habitual spaces or dashes) only
    var digits = "0123456789- ";
    var temp = null;
    for (var i = 0; i < theForm.phnumber.value.length; i++)
    {
        temp = theForm.phnumber.value.substring(i, i+1)

        if (digits.indexOf(temp) == -1 && theForm.phnumber.value != "")
        {
            error += " - Your phone number must be numerical only.\n";
            break;
        }
    }
    for (var i = 0; i < theForm.ccnumber.value.length; i++)
    {
        temp = theForm.ccnumber.value.substring(i, i+1)

        if (digits.indexOf(temp) == -1 && theForm.ccnumber.value != "")
        {
            error += " - Your credit card number must be numerical only.\n";
            break;
        }
    }
    for (var i = 0; i < theForm.bsbnumber.value.length; i++)
    {
        temp = theForm.bsbnumber.value.substring(i, i+1)

        if (digits.indexOf(temp) == -1 && theForm.bsbnumber.value != "")
        {
            error += " - Your bsb number must be numerical only.\n";
            break;
        }
    }

    //check that the email address contains an @ symbol
    if ((theForm.email.value.indexOf ('@',0) == -1 || theForm.email.value.indexOf ('.',0) == -1) && theForm.email.value != "")
    {
        error += " - Your email address is invalid.";
    }

    //check if there has been any error
    if (error != errorinit)
    {
        alert(error);
        return (false);
    } else {
        alert("no problems");
        return (true);
    }
} 
```

现在这是相当简单的代码，所以在检查和重新检查之后，我很难理解它为什么不起作用。正如您在 javascript 中看到的那样，我已将其设置为无论是否出现错误都会发出警报，但根本没有发出警报；我只是返回到 index.html 没有任何验证（除了“必填”字段）。

谁能指出这不起作用的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T06:58:06.867

这是您在代码中遇到的错误：

```
SyntaxError: unlabeled break must be inside loop or switch 
```

`break;`当您不在任何开关或循环中时，您正在使用下面的部分来打破它：

```
if (boxChecked == false)
{
    error += " - You must select at least a video or an image.\n"
    break;
} 
```

要解决此问题，请替换`break;`为`return false;`...

# php - Group by Query 在 Strict ONLY_FULL_GROUP_BY SQL 模式下不起作用

> ID：12435218
> 
> 赞同：1
> 
> 时间：2012-09-15T06:50:16.420
> 
> 标签：php, mysql, sql, pdo, mysql-error-1055

我有 group by 查询，在 PHP PDO 中运行良好，但是当我在 mysql ini 中添加“sql_mode = ONLY_FULL_GROUP_BY”时，相同的查询失败并出现错误

SQLSTATE[42000]：语法错误或访问冲突：1055 'db.table.t_date' 不在 GROUP BY 中

实际查询

```
SELECT 
    * 
FROM 
(
    SELECT 
        DATE_FORMAT(t_date, '%b') AS mon, 
        DATE_FORMAT(t_date, '%Y-%m') AS fy_date, 
        (SUM(val1) - SUM(val2)) AS net_val 
    FROM 
        TABLE 
    GROUP BY 
        YEAR(t_date), 
        MONTH(t_date) 
    ORDER BY 
        DATE_FORMAT(t_date, '%Y-%m') DESC 
    LIMIT 12
) AS tbl 
ORDER BY 
    fy_date 
```

有人可以告诉为什么上面的查询不起作用

```
sql_mode = ONLY_FULL_GROUP_BY 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T11:42:20.470

您需要将这两个`date_format`表达式都添加到 中，`group by`因为所有非聚合列都需要分组。

```
SELECT 
    DATE_FORMAT(t_date, '%b') AS mon, 
    DATE_FORMAT(t_date, '%Y-%m') AS fy_date, 
    (SUM(val1) - SUM(val2)) AS net_val 
FROM 
    TABLE 
GROUP BY 
    DATE_FORMAT(t_date, '%b'), 
    DATE_FORMAT(t_date, '%Y-%m') 
ORDER BY 
    DATE_FORMAT(t_date, '%Y-%m') DESC 
```

# html - 不包含文本

> ID：12435221
> 
> 赞同：0
> 
> 时间：2012-09-15T06:50:34.267
> 
> 标签：html, css, xhtml

我做了一个非常基本的布局。

[http://jsfiddle.net/kK7Rk/](http://jsfiddle.net/kK7Rk/)

HTML

```
<div id="container">
    <div id="logocontainer">
    </div>
    <div id="navigationcontainer">
    </div>
    <div id="textcontainer">
    </div>
    <div id="sidebarcontainer">
        TEXTTEXTEXTTEXTTEXTEXTTEXTTEXTEXTTEXTTEXTEXTTEXTTEXTEXT.
    </div>
</div>​ 
```

CSS

```
* {
margin:0;
padding:0;
}
#container {
margin:0px auto;
width:600px;
height:1000px;
background:red;
}
#logocontainer {
float:left;
width:50%;
height:15%;
background:green;
}
#navigationcontainer {
float:right;
width:50%;
height:15%;
background:orange;
}
#textcontainer {
margin:10px;
float:left;
width:70%;
height:83.2%;
background:purple;
}
#sidebarcontainer {
margin:10px;
float:right;
width:23.33%;
background:yellow;
}​ 
```

即使我为 div 设置了边距，里面的文本仍在其边界之外流动。

有人可以告诉我问题是什么吗？

谢谢，

老年鼠尾草。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T06:54:40.657

大多数浏览器不知道如何打断这么长的单词，你必须给它一点帮助。

添加`word-break:break-all;`到`#sidebarcontainer`. 这是有关[W3Schools](http://www.w3schools.com/cssref/css3_pr_word-break.asp)的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T06:55:22.823

问题是您的文本没有空格，因此无法换行。如果您添加它`overflow:hidden;`，`#sidebarcontainer`它将隐藏溢出并保留您的布局。

# iphone - 在实例方法objective-c中从类方法访问数据

> ID：12435232
> 
> 赞同：-2
> 
> 时间：2012-09-15T06:52:27.310
> 
> 标签：iphone, objective-c

在我的 .m 文件中，我声明了这个变量

```
static NSString* MyGlobalPassword; 
```

在 .m 文件中，我有一个类方法，我在另一个类中调用以获取 NSString

```
 + (NSString *) updateMessageString: (NSString *) msgString
{
    MyGlobalPassword = msgString;

    return MyGlobalPassword;
} 
```

我想在同一个类的实例方法中访问 MyGlobalPassword

```
 - (void) Access
    {
        NSLog(@"I've retrieved it %@", MyGlobalPassword);
    } 
```

当我尝试执行此操作时，Objective-C 会引发无法识别的选择器错误。它不想让我在实例方法中访问该变量。我怎么能强迫它呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T07:10:53.903

我怀疑您收到错误是因为您的静态变量未初始化。在 .h 文件中声明变量通常不是一个好主意，因为它们不能以这种方式包含在许多地方（无需额外的工作和头痛）。您可能希望像这样在标题中外部声明：

```
extern NSString* MyGlobalPassword; 
```

并像这样在你的 .m 中声明它：

```
NSString* MyGlobalPassword; 
```

此外，您通常不想制作这样的全局变量。要么你应该有一个被分配一次并在许多地方使用的单例类，要么你应该让它成为一个类成员。您也可以作弊并执行上述操作，但在 .m 文件中将其设为静态并添加类访问器以在任何地方获取它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T09:08:08.837

每当您在 .h 文件中声明变量时，该类都会将其作为其实例变量或属性。因此，它只能通过其对象访问。在 .m 文件中声明该变量“MyGlobalPassword”。现在，您可以在类方法以及实例方法中访问该“全局”变量。

# git - 从 GitHub 编辑文件，推送冲突？

> ID：12435234
> 
> 赞同：1
> 
> 时间：2012-09-15T06:53:04.977
> 
> 标签：git, github

这是我的场景：

在 GitHub 上创建并上传了一个项目。做了一些提交*（在 origin/master 之前`n`提交）*。通过网络浏览器查看 GitHub 上的存储库时，我发现了一个小错误，并且无法控制自己使用 GitHub 自己的代码编辑器修复它。

来到我的本地存储库后，我现在该怎么办？我既不想丢失来自 GitHub 编辑器的更改，也不想丢失我已经提交的更改。

*（我在该存储库（主）上有一个分支，我只是开发人员）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T08:20:52.313

你可以做一个简单的`git pull`，但我建议做一个`git pull --rebase`，因为这将避免必须有一个额外的合并提交加入两个开发历史，从而保持你的历史整洁。

这里有一些关于 rebase pull 的解释以及如何默认启用它们：http: [//blog.aplikacja.info/2010/11/git-pull-rebase-by-default/](http://blog.aplikacja.info/2010/11/git-pull-rebase-by-default/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T07:12:27.007

你需要做一个`git pull`，它从 Github 获取更改并合并两个头。

如果你看[这里](http://www.kernel.org/pub/software/scm/git/docs/git-pull.html)的第一张图，它解释了类似的情况。

# iphone - 如何设置 NSPredicate 以返回本地时区的日期？

> ID：12435236
> 
> 赞同：3
> 
> 时间：2012-09-15T06:53:22.397
> 
> 标签：iphone, objective-c, ios, xcode

我有一个谓词返回选定日期的事件，但它返回具有不同时区的日期。如何使谓词根据本地时区搜索日期？

```
NSTimeInterval time = floor([[NSDate date] timeIntervalSinceReferenceDate] / 86400.0) * 86400.0;
NSDate *start = [NSDate dateWithTimeIntervalSinceReferenceDate:time];

NSTimeInterval secondsInTwentyFourHours = (24 * 60 * 60);
NSDate *end = [start dateByAddingTimeInterval:secondsInTwentyFourHours];

// Create the predicate from the event store's instance method
NSPredicate *predicate = [store predicateForEventsWithStartDate:start endDate:end calendars:nil];
// Fetch all events that match the predicate
events = [store eventsMatchingPredicate:predicate]; 
```

# objective-c - 如何为 DetailViewController 提供导航控制器？

> ID：12435238
> 
> 赞同：0
> 
> 时间：2012-09-15T06:53:52.800
> 
> 标签：objective-c, ipad

我在 detailView (splitViewController) 控制器中添加了一个表视图。谁能告诉我如何使用这个表格视图来处理其他视图？它不和我一起工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T08:33:56.063

在您的 tableview didSelectRowAtIndexPath 方法中，您可以推送视图

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

        Otherview *otherview=[[Otherview alloc]initWithNibName:@"Otherview" bundle:nil];
        [self.navigationController pushViewController:otherview animated:YES];
         [otherview relese]
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T11:59:15.027

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

DetailViewController *dvController = [[DetailViewController alloc] initWithNibName:@"DetailView" bundle:[NSBundle mainBundle]];
[self.navigationController pushViewController:dvController animated:YES];
[dvController release];
dvController = nil;

} 
```

# android - 在android webview中实现CSS

> ID：12435239
> 
> 赞同：0
> 
> 时间：2012-09-15T06:53:59.517
> 
> 标签：android, css, webview

我正在尝试创建图书阅读器（EPUB），所以我想像普通图书一样在 2 页（水平）中显示图书页面，我创建了两个`webview`（运行时）并尝试维护它的内容。对于下一个和上一个，我只使用 webview

```
webViewRead.scrollBy(0, 0);
webViewRead.scrollTo(0, postion); 
```

但是我很难在下一个和上一个中保持所有 TOC。那么是否可以使用一个视图并使用 CSS 划分内容？

像：

```
webkit-column-count: 
moz-column-gap: 
webkit-column-gap: 
```

是面糊选项吗？我的 html 页面已经在 SDCARD 中，那么如何将新的 css 文件附加到这些 html 文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T07:01:04.373

使用 WebView.loadData 方法而不是 loadurl 或文件。

运行时从 html 文件生成或获取数据内容并在数据中添加 css 内容，然后在 webview 上加载此数据后......

我认为这样您就可以在现有的 html 文件数据中添加 css contet 并在 webview 中显示...

谢谢

# java - 未生成 Oauth 签名

> ID：12435244
> 
> 赞同：1
> 
> 时间：2012-09-15T06:54:43.030
> 
> 标签：java, android, oauth, flickr

我正在尝试生成 Oauth 签名，以便从我的 android 应用程序对 flickr.com 中的用户进行身份验证。

根据 flickr.com 上的文章，我必须发送签名请求才能获得签名。flickr.com 指南页面的超链接是：

[http://www.flickr.com/services/api/auth.oauth.html#request_token](http://www.flickr.com/services/api/auth.oauth.html#request_token)

根据帖子，我必须向 flickr 服务器发送这样的请求才能接收签名密钥：

```
http://www.flickr.com/services/oauth/request_token
?oauth_nonce=89601180
&oauth_timestamp=1305583298
&oauth_consumer_key=653e7a6ecc1d528c516cc8f92cf98611
&oauth_signature_method=HMAC-SHA1
&oauth_version=1.0
&oauth_callback=http%3A%2F%2Fwww.example.com 
```

我已经从我的应用程序以上述格式发送了一个请求，但我收到的只是一个错误，说**oauth_problem=parameter_absent&oauth_parameter_absent=oauth_signature**。

我的请求代码是：

```
HttpGet get = new HttpGet("http://www.flickr.com/services/oauth/request_token?oauth_nonce="+nonce+"&oauth_timestamp="+ts+"&oauth_consumer_key=****&oauth_signature_method=HMAC-SHA1&oauth_version=1.0"); 
```

实际上的问题是，我请求签名的 url 以错误的方式响应。它应该在哪里返回签名，它要求签名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:54:21.453

签名步骤是没有请求。您将到目前为止的 URI 转换为文档中所见的基本字符串（URL 对其部分进行编码等）。您使用 HMAC-SHA1 算法巫婆需要 2 个参数`key`和`data`. 使用基本字符串作为`data`和`key`

> 是 Consumer Secret 和 Token Secret 的连接值，用“&”分隔。

然后将您从算法（签名）返回的值附加到您的 URI

```
&oauth_signature={ALGORITHM_OUTPUT} 
```

然后，您可以使用这个新的 URI 请求令牌。

如果您认为这工作量太大，请查看一些 Java OAuth 库，例如[scribe-java](https://github.com/fernandezpablo85/scribe-java)。

# php - FFMPEG 与 PHP 不执行？

> ID：12435245
> 
> 赞同：1
> 
> 时间：2012-09-15T06:54:49.303
> 
> 标签：php, ffmpeg, thumbnails

在阅读了关于与 FFMPEG 和 PHP 相关的 SO 的大量问题后，我收集了一个小片段或其他什么，但它似乎没有做任何事情 - 甚至没有抛出错误。

我的PHP如下：

```
function get_video_thumbnail($file) {
    define('ALL_PLACE_WIDTH', 250);
    define('ALL_PLACE_HEIGHT', 200);

    $ffmpeg = "ffmpeg"; // where ffmpeg is
    $image_source_path = $file; // where the video is
    $image_cmd = " -r 1 -ss 00:00:10 -t 00:00:01 -s ".ALL_PLACE_WIDTH."x".ALL_PLACE_HEIGHT."   -f image2 "; // command
    $dest_image_path = "cdn/thumbnails"; // destination of thumbnail

    $str_command = $ffmpeg  ." -i " . $image_source_path . $image_cmd .$dest_image_path;     
    shell_exec($str_command);
} 
```

在根文件夹中有一个文件夹“ffmpeg”，里面有“ffmpeg.exe”、“ffplay.exe”和“pthreadGC2.dll”。所以我想知道，我有什么遗漏吗？我正在尝试从视频/mp4 文件生成缩略图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T08:40:21.340

cdn/thumbnails 是文件夹吗？如果是这样，您必须提供文件名。你只给了一个文件夹。因此它不起作用。由于您希望每秒一个 10 秒，因此您必须提供类似 cdn/thumbnails/images%03d.jpg 之类的内容作为输出。

所以你的命令看起来像这样：

ffmpeg -i inputfile -s widthxheight -f image2 文件夹/文件名%04d.jpg

转到命令行并首先键入命令。确保它在那里工作。然后它将在 php 中工作。

文件将被命名为 filename0000.jpg filename0001.jpg 等等。

# ruby-on-rails-3 - Sprockets > 如何为 Erb 评估/渲染指定绑定？

> ID：12435246
> 
> 赞同：2
> 
> 时间：2012-09-15T06:54:53.140
> 
> 标签：ruby-on-rails-3, sprockets, tilt

我花了很多时间研究 sprockets 和 tit 的源代码，试图弄清楚如何将变量/绑定传递给 Erb 评估上下文。这就是我想要做的事情：我需要提供一个 JS 文件，其内容会根据每个请求而改变。更改的部分取决于存储在数据库中的数据，因此需要通过 Rails 应用程序路由请求并需要传递变量/绑定。最重要的是，JS 文件使用`require`指令插入其他 JS 文件，因此需要使用 sprockets。

这是不起作用的代码段：

控制器文件：

```
def ever_changing_js
  @foobars = Foobar.all
  MyApp::Application.assets.instance_eval do
    def foobars
      @foobars
    end
  end

  render :text => MyApp::Application.assets.find_asset('ever_changing.js').to_s, :content_type => "application/javascript"
end 
```

ever_changed.js：

```
//= require file1.js
//= require file2.js

// Some code that uses @foobars 
```

我怎样才能完成这项工作？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T20:09:29.743

我正在努力完成与您相同的事情。我发现您的控制器代码片段存在一些问题。而不是做一个`instance_eval`on the `Sprockets::Environment`，你应该`class_eval`the `context_class`，如[`Sprockets::Context`文档](http://ruby-doc.org/gems/docs/s/sprockets-2.8.2/Sprockets/Context.html)中所示。

```
MyApp::Application.assets.context_class.class_eval do
  def foobars
    @foobars
  end
end 
```

然后`foobars`将可用于您的 ERb 模板。

作为旁注，你可以做

```
render js: MyApp::Application.assets.find_asset('ever_changing.js').to_s 
```

而不是自己设置内容类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T18:16:21.873

JavaScript 文件应该是完全静态的；Sprockets 并不意味着做你想做的事。

在每个请求的基础上更改的任何数据都应写入`<script>`您正在呈现的模板底部的标签。

*应用程序/资产/javascripts/user.js*

```
(function(exports) {
  function User(name) {
    this.name = name;
  }

  User.prototype.speak() {
    console.log(this.name + ' says, "Hello!"');
  };

  exports.User = User;
})(this); 
```

*应用程序/视图/用户/show.html.erb*

```
...

  <%= javascript_include_tag('user') %>
  <script>
    (function() {
      var user = new User(<%= @user.name %>);

      $('#speak-button').click(function() {
        user.speak();
      });
    })();
  </script>
</html> 
```

如果您可以围绕您的特定用例提供更多上下文，我可以举一个更具体的例子。

# c# - 如何在 MVC4 的 UserProfile 中创建自定义附加字段

> ID：12435252
> 
> 赞同：40
> 
> 时间：2012-09-15T06:55:54.930
> 
> 标签：c#, asp.net-mvc, entity-framework, asp.net-mvc-4, simplemembership

我遇到了新的 ASP MVC 4 特性，它附带了新的成员数据库模式和新的初始化。在 mvc 3 和旧版本中，开发人员能够使用 web.config 中的规范创建自定义用户配置文件字段，但现在我遇到了默认 mvc 4 项目中过滤器命名空间中的方法：

```
WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "UserName", autoCreateTables: true); 
```

和用户资料表：

```
[Table("UserProfile")]
    public class UserProfile
    {
        [Key]
        [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
        public int UserId { get; set; }
        public string UserName { get; set; }
    } 
```

但是 InitializeDatabaseConnection 方法只生成 UserName 和 UserId 我需要生成其他附加字段。

我在 EF codeFirst 方法方面有很好的经验，在这种情况下，我尝试编辑 UserProfile 类：

```
[Table("UserProfile")]
    public class UserProfile
    {
        [Key]
        [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
        public int UserId { get; set; }
        [Column]
        [Required]
        public string UserName { get; set; }
        [Column]
        [Required]
        public string FirstName { get; set; }
        [Column]
        [Required]
        public string LastName { get; set; }
    } 
```

但是当我重新生成数据库时，我没有看到任何更改，没有生成自定义数据库字段。请帮助我，如何创建自定义用户字段？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-09-17T14:28:05.113

从上面的答案详细说明

方法`WebSecurity.InitializeDatabaseConnection`帮助指出

> 如果要使用包含用户配置文件信息（用户名、电子邮件地址等）的数据库表，则指定成员资格系统用于连接到该信息的连接字符串和表名。如果您不想使用现有的用户配置文件表，您可以指定 InitializeDatabaseConnection() 方法应该自动创建用户配置文件表。（用户配置文件表的数据库必须已经存在。）

因此，如果我们想在`UserProfile`表中添加更多字段，我们只需要确保我们正在创建一个配置文件表并`InitializeDatabaseConnection`在表已经就位后运行该方法。

在 VS2012 的标准 MVC4.0 项目模板中，我注释掉了 Account 控制器

```
[Authorize]
//[InitializeSimpleMembership]
public class AccountController : Controller
{ 
```

并移至`InitializeDatabaseConnection`EF Code First Database Initializer

```
public class MyDatabaseInit: DropCreateDatabaseAlways<MyDatabaseContext>
{
    protected override void Seed(MyDatabaseContext context)
    {
        SeedMembership();
    }

    private void SeedMembership()
    {
        WebSecurity.InitializeDatabaseConnection("MyDatabaseContext",
            "UserProfile", "UserId", "UserName", autoCreateTables: true);
    } 
} 
```

确保`InitializeDatabaseConnection`一旦桌子已经就位就运行。

将该`UserProfile`类添加到我的 EF Code First 模型中

```
public class MyDatabaseContext : DbContext
{
    public DbSet<UserProfile> UserProfiles { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
    }
} 
```

`UserProfile`在表格中添加了额外的字段

```
[Table("UserProfile")]
public class UserProfile
{
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }
    public string UserName { get; set; }
    public string MobilePhone { get; set; }
} 
```

您现在需要做的就是在应用程序启动时设置数据库初始化策略，并在数据库上调用一个查询，以确保在调用任何授权/身份验证代码之前创建它。

```
protected void Application_Start()
{
   AreaRegistration.RegisterAllAreas();

   WebApiConfig.Register(GlobalConfiguration.Configuration);
   FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
   RouteConfig.RegisterRoutes(RouteTable.Routes);
   BundleConfig.RegisterBundles(BundleTable.Bundles);
   AuthConfig.RegisterAuth();

   Database.SetInitializer<MyDatabaseContext>(new MyDatabaseInit());
   new MyDatabaseContext().UserProfile.Find(1);
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-10-09T15:21:00.030

## 基于 IMLiviu 的回答和评论的非破坏性版本：

刚刚遇到这个问题，不得不从答案+评论（+反复试验）中*解开正确的方法，所以我想我会分享你可以剪切和粘贴的结果。*这是基于 IMLiviu 的回答，所以完全归功于他们。它会修改现有的`UserProfile`和`UserContext`类，因为它们看起来与 EF 直接兼容：

我很震惊地看到一个涉及完全删除数据库的建议，只是添加几个表，所以在阅读所有评论并创建原型之后，结果如下。

## 1 - 停止 Webmatrix 创建

停止成员表的标准 webmatrix 创建（注释掉 [InitializeSimpleMembership] 属性）。

```
[Authorize]
//[InitializeSimpleMembership]
public class AccountController : Controller 
```

## 2 - 创建迁移配置

创建一个迁移配置类，如下所示：

```
public class MigrationConfiguration : DbMigrationsConfiguration<UsersContext> 
{
    public MigrationConfiguration()
    {
        this.AutomaticMigrationsEnabled = true;  // This is important as it will fail in some environments (like Azure) by default
    }

    protected override void Seed(UsersContext context)
    {
        WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "UserName", autoCreateTables: true);
    }
} 
```

## 3 - 从 EF 创建中删除多元化

更改 AccountModel.cs 文件`UsersContext`类以删除复数选项（添加 OnModelCreating 事件）：

```
public class UsersContext : DbContext
{
    public UsersContext() : base("DefaultConnection")
    {
    }

    public DbSet<UserProfile> UserProfiles { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        base.OnModelCreating(modelBuilder);
        modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
    }
} 
```

## 4 - 向 UserProfile 添加新字段

将您需要的额外字段添加到 UserProfile：

```
[Table("UserProfile")]
public class UserProfile
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }
    public string UserName { get; set; }
    public string UserEmail { get; set; }  // <<<<<<<< E.G. THIS ADDED
} 
```

## 5 - 在应用启动时迁移表

现在，当应用程序启动时，您设置数据库初始化策略并通过读取触发它：

```
 protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        WebApiConfig.Register(GlobalConfiguration.Configuration);
        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);
        BundleConfig.RegisterBundles(BundleTable.Bundles);
        AuthConfig.RegisterAuth();

        Database.SetInitializer(new MigrateDatabaseToLatestVersion<UsersContext, MigrationConfiguration>());
        new UsersContext().UserProfiles.Find(1);
    } 
```

显然，您将需要添加各种 using 语句才能使这一切正常工作，但右键单击*解决*选项将为您做到这一点。

## 补充笔记：

如果您决定（像我一样）使用除用户以外的表格`UserProfile`，则需要更改几个条目以匹配。

*   在您的`SimpleMembershipInitializer`班级中，您需要引用新的表名和列名
*   在帐户控制器和各种登录和注册视图中，您需要引用您的新模型字段（如果名称已更改）
*   在`UsersContext`类中，您可以保留 Userprofile 类名，但您需要更改`Table`属性以匹配您的表名。
*   在`UserProfile`类中，您需要重命名字段以匹配您的新表字段名称。
*   在数据库中，您需要删除和之间的关系，`webpages_UsersInRoles`并`UserProfile`在新用户表和`webpages_UsersInRoles`/或旧的引用完整性检查之间添加关系，这将在运行时破坏您。（我强烈建议您删除现有`UserProfile`表并检查它是否没有重新创建。如果是您的代码中留下了一些东西）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-07T16:27:45.537

将新表添加到数据库并将其命名为 User_Details 或类似名称，在创建用户时，您可以检索用户的 ID 并将详细信息强制到新表中。这是一个简单的选择。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-16T20:35:57.640

查看 VS2012 或 VS2010 附带的 MVC4 互联网项目模板。在修改 userprofile 类的列之前，您需要确保未创建数据库。您可以在 POCO 类中添加更多属性，然后重新生成数据库。如果您在生成数据库后添加属性，请确保您正在使用 EF 迁移将这些新属性添加到数据库

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-12-14T19:46:01.453

当然，您可能知道您必须使您`RegisterModel`与`UserProfile Model`. 我喜欢做的是在初始化数据库之前使用迁移并将以下内容放入`Configuration.cs`文件中：

```
 protected override void Seed(UsersContext context)
    {

        WebSecurity.InitializeDatabaseConnection(
            "DefaultConnection",
            "UserProfile",
            "UserId",
            "UserName", autoCreateTables: true);

        if (!WebSecurity.UserExists("yardpenalty"))
            WebSecurity.CreateUserAndAccount(
                "yardpenalty",
                "password",
                new
                {
                    Email = "youremail@yahoo.com",
                    ImageUrl = "/Content/Avatars/yourname",
                    DateJoined = DateTime.Now
                },
                false);  
           //... rest of model.Builder stuff 
   } 
```

然后我使用`Packet Manager Console`这三个容易记住的命令：

1.  启用迁移
2.  添加迁移迁移名称
3.  Update-Database // 将从 Configuration.cs 播种

我同意[TrueBlueAussie](https://stackoverflow.com/users/201078/trueblueaussie)，并且会说 LazyInitialization 不再很有帮助，你真的不必再像以前那样称呼它了。无论如何，您所要做的就是在您的帐户控制器中更改注册操作以调用方法，如下所示：

```
 WebSecurity.CreateUserAndAccount(model.UserName, model.Password, propertyValues: new { model.Email, model.ImageUrl, model.DateJoined }); 
```

注意：MVC5 使用 OWIN

# windows-7-x64 - 将 PC 配置为 LAN 唤醒

> ID：12435253
> 
> 赞同：3
> 
> 时间：2012-09-15T06:56:02.520
> 
> 标签：windows-7-x64, lan, bios, wake-on-lan

我正在尝试将我的 Windows 7 PC 配置为在局域网（S4 和 S5）上唤醒，但它不起作用。我已遵循所有步骤。

1.  更改了我的网络适配器设置以唤醒魔术包
2.  在我的 Windows 防火墙上打开 UDP 端口 7
3.  端口将我的路由器在 UDP 端口 7 上转发到我的 PC
4.  配置 BIOS（我的主板 - Intel DH67BL）以在 LAN 上唤醒

我正在通过一个 android 应用程序（名称：wake on lan）发送魔术包。我在我的 PC 上使用了一个嗅探器实用程序来检查它是否正在接收魔法数据包。以下是数据包详细信息。我在这里有一个疑问，数据包详细信息显示 MAC 地址（如下所示）。但是，我的适配器的 MAC 地址不同。我在发送魔术包时设置了正确的 MAC 地址。应用程序在发送前是否更改了 MAC 地址？请帮忙！

```
 ---------------------------Wake-On-LAN Magic Packet---------------------------

Time received:
     09/15/12    12:13:34
UDP Header:
    |-Source IP :   157.56.106.184
    |-Destination IP    :   192.168.1.2
    |-Source Port   :   3544
    |-Destination Port  :   52146
    |-UDP Length    :   117
    |-UDP Checksum  :   675
MAC Address:
     FF FF 00 00 00 00
Raw Data (109 bytes):
     00 01 00 00 8C 37 59 92 1E 68 49 48 00 00 00 34
     4D 8A 27 66 D1 60 00 00 00 00 30 3A FF FE 80 00
     00 00 00 00 00 80 00 F2 27 62 C7 95 47 FE 80 00
     00 00 00 00 00 00 00 FF FF FF FF FF FE 86 00 64
     9D 00 00 00 00 00 00 3A 98 00 00 07 D0 03 04 40
     40 FF FF FF FF FF FF FF FF 00 00 00 00 20 01 00
     00 9D 38 6A B8 FF 00 00 00 00 20 01 00 
```

谢谢，沙拉特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T08:24:15.670

> 3) 端口将我的路由器在 UDP 端口 7 上转发到我的 PC

您需要将 UPD 7 和/或 UDP 9 转发到 LAN 广播地址，而不是您的 PC 的 IP 地址。

原因是你的电脑关机时没有分配IP地址，所以路由器在ARP表中没有与MAC地址<=> IP地址的绑定，无法转发数据包.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-11-11T03:13:55.173

原因：因为你没有将你的 MAC 绑定到你的本地 IP

解决方案：访问您的路由器，使用 MAC Bing（或类似功能）

注意：如果您在PC之前使用2个或更多路由器，您必须在所有路由器上进行Mac绑定和端口转发

# sharepoint - 调用 sharepoint 2010 webpart 方法

> ID：12435255
> 
> 赞同：-1
> 
> 时间：2012-09-15T06:56:20.977
> 
> 标签：sharepoint

我正在通过 Visual Studio 创建一个 SharePoint 网站，并创建了一个用户控件（ascx）。我在文件（axcs.cs）后面的用户控件代码上编写了一些方法。我如何通过 jquery ajax 调用这些方法，因为 ascx.cs 上的方法不能被 jquery ajax 直接调用？请你帮助我好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T08:45:15.983

实际上，您不能从 javascript (jquery/ajax) 调用控件的服务器方法。

但是，根据需要调用的逻辑，您可以选择。一方面，您可以创建一个 *.ashx 处理程序来处理来自您的 javascript 代码的请求并调用服务器端逻辑。

# vba - VBA Excel：如何检查值是否在选定的值范围内（或当前单元格）

> ID：12435258
> 
> 赞同：2
> 
> 时间：2012-09-15T06:56:49.330
> 
> 标签：vba, excel

我在一列单元格中有一组参考数据（它可能是一行，但无论如何）。

我想检查几个工作表，检查选定的值范围，如果当前单元格值在参考数据中，则将其用作粘贴到下一系列单元格的偏移量中的值，直到当前单元格更改为某个参考数据中的新值，此时应为新值和下一系列单元格重复粘贴过程。例如

```
Sub doStuff()
Dim RefRange As Range, queryRange As Range, checkCell As Rnage
String pasteDate As String

Set RefRange = Range("A1:A50")
Set queryRange = .Selected

For Each checkCell In queryRange
  If checkCell.Value IN RefRange <***here's where I don't know what to use ***>
     pasteData = checkCell.Value
     ' Advance to next item
     Next
  ElseIf checkCell.Value Not In queryRange <***here's where I don't know what to use ***>
     ActiveCell.Offset(0,+1).Value = pasteData
  End If
Next
End Sub 
```

我知道如何在 SQL 中执行此操作，VBA 中是否有类似的方法？

在 SQL 中：

```
Select a, b from table where c in ('foo', 'bar', 'baz') OR

Select a, b from table where c in (select e from some_other_table) 
```

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T11:03:47.943

我怀疑是否需要遍历所有数据，只需使用整个列中的公式并替换为结果值。像这样：

```
Sub Test()

    With ActiveSheet.UsedRange.Columns(3).Offset(1)
        .Formula = "=IF(ISERROR(MATCH(B2,A:A,0)),"""",B2)"
        .Value = .Value
    End With

End Sub 
```

上面的代码查看 B 列中的所有值以测试 A 列中的匹配。如果找到匹配项，则 B 列值显示在 c 列中。如果未找到匹配项，则会显示一个空白单元格，但您可以将其更改为您想要的任何内容。

![在此处输入图像描述](../Images/b14656a9bc823098bb333a8e19c1b7ac.png)

# node.js - express/jade中的条件语句

> ID：12435259
> 
> 赞同：3
> 
> 时间：2012-09-15T06:56:53.143
> 
> 标签：node.js, express, pug

我正在尝试在翡翠中使用嵌套条件语句，但不断收到语法错误。

以下作品：

```
if condition != true
  p Hello
  p Hello 
```

但是当我尝试添加嵌套条件时，它失败了：

```
if condition != true
  p Hello
  if other == true
    p Other
  p Final 
```

我试图获得相当于：

```
if (condition != true) {
  p Hello
  if (other == true) {
    p Other
  }
  p Final
} 
```

根据我的缩进，第二个 if 要么是直译，要么我得到关于 p Final 的错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T07:39:48.157

缩进很重要，

```
 if user.role == 'admin'
     p #{user.name} is an admin
    else
     p= user.name 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T08:43:24.553

找到了另一种方法：

```
- var content = ""
if other
  content = "Foo"

if condition
  p Hello
  #{content} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-30T21:23:57.847

这对你有用吗？

```
var sound = "";
if (animal === "pig") {
   sound = "OINK!";
} else if(animal === "cow") {
   sound = "MOOO!";
} 
```

# iphone - 如何更新和删除日历事件？

> ID：12435269
> 
> 赞同：1
> 
> 时间：2012-09-15T06:58:32.113
> 
> 标签：iphone, events, calendar

我正在使用 iPhone 日历事件做一个示例应用程序。我能够将日历事件从我的应用程序保存到 iPhone 原生日历。在保存时，我将保存的事件标识符保存到我的应用程序数据库中。现在我需要更新相同的事件或删除该事件。如何使用保存在我的数据库中的事件标识符。这是用于保存事件并将事件标识符保存到数据库中的代码。

```
ENTITYCMAPPIPHONE *appointmentCM;  
NSError *error;  

NSFetchRequest *fetchRequest = 
[managedObjectModel fetchRequestFromTemplateWithName:@"FetchForIphoneAppointment" substitutionVariables:nil];  

NSArray *fetchedObjects= [context executeFetchRequest:fetchRequest error:nil];

int fetchCount = [fetchedObjects count];   
if ([fetchedObjects count]>0) {   
    for (appointmentCM in fetchedObjects) {       
        NSLog(@"Appoint subject %@", appointmentCM.subject);
        NSLog(@"APP notes %@", appointmentCM.notes);

            appoint_ID = [appointmentCM.mobAppID intValue]; 

            NSDateFormatter *f = [[NSDateFormatter alloc] init];
            [f setDateFormat:@"yyyy-MM-dd HH:mm:ss"];  
            NSDate *date = [f dateFromString:@"2012-09-10 13:55:15"]; 

            NSCalendar *calendar = [NSCalendar currentCalendar];
            NSInteger units = NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit | NSWeekdayCalendarUnit;
            NSDateComponents *components = [calendar components:units fromDate:date];
            NSInteger year = [components year];
            NSInteger day = [components day];

            NSDateFormatter *weekDay = [[[NSDateFormatter alloc] init] autorelease];
            [weekDay setDateFormat:@"EEE"];

            NSDateFormatter *calMonth = [[[NSDateFormatter alloc] init] autorelease];
            [calMonth setDateFormat:@"MMMM"];

            EKEventStore *eventStore1 = [[EKEventStore alloc] init];

            EKEvent *event  = [EKEvent eventWithEventStore:eventStore1];  
            event.title = appointmentCM.subject;                 
            event.notes = appointmentCM.notes;                   
            event.startDate = date;
            event.endDate   = [[NSDate alloc] initWithTimeInterval:600         sinceDate:event.startDate];

            [event setCalendar:[eventStore1 defaultCalendarForNewEvents]];
            NSError *err;
            [eventStore1 saveEvent:event span:EKSpanThisEvent error:&err];       

            eventID = [[NSString alloc] initWithFormat:@"%@", event.eventIdentifier];  
            [self updateIphoneCalendarEventID];
        }

        if (![context save:&error]) {
            NSLog(@"Whoops, couldn't save: %@", [error localizedDescription]);

        }            
    }    
}       

-(void)updateIphoneCalendarEventID{  
NSError *error;  

NSDictionary *subs; 
subs = [NSDictionary
        dictionaryWithObjectsAndKeys:[NSNumber numberWithInt:appoint_ID], @"search_appID", nil];
NSFetchRequest *fetchRequestCheckNil = 
[managedObjectModel fetchRequestFromTemplateWithName:
 @"FetchEditIphoneCalendar" substitutionVariables:subs];

NSArray *fetchedObjects=[context executeFetchRequest:fetchRequestCheckNil error:nil];
if ([fetchedObjects count]>0) {
    for (ENTITYAPPOINTMENTS *appDetails
         in fetchedObjects) {                                    
        [self updateDBModelForAppointments:appDetails];              
    }     
}     
if (![context save:&error]) {
    NSLog(@"Whoops, couldn't save: %@", [error localizedDescription]);
} 

}       

-(void)updateDBModelForAppointments:(ENTITYAPPOINTMENTS *)contactDetails{ 
contactDetails.iphoneAppID = eventID;   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T10:25:34.593

```
 EKEventStore *eventStore = [[[EKEventStore alloc] init] autorelease];
    NSString *idenfier = nil;//.....;// Get identifier stored in your application database
    NSError *err = nil;
    EKEvent *ev = [eventStore eventWithIdentifier:idenfier];

        if(err){
            NSLog(@"Error: %@",[err localizedDescription]);
        }
        else
        {

            // manipulate event...
            ev.title     = @"new title";
            ev.location = @"new location";

            // or remove:
           [eventStore removeEvent:ev span:EKSpanFutureEvents commit:NO error:&err];
        } 
```

# android - 在 Android 应用程序中通过 VideoView 将正在播放的视频静音

> ID：12435275
> 
> 赞同：22
> 
> 时间：2012-09-15T06:59:07.730
> 
> 标签：android, video

我想在我的 Android 应用程序中通过 VideoView 静音正在播放的视频。我在 VideoView 类中找不到任何方法。知道怎么做吗？

我在 MediaPlayer 类中找到了一个方法“setVolume”，但是我找不到任何工作代码来通过 MediaPlayer 类播放视频。所以我相信我可以通过这种方法设置音量 0。

因此，我正在寻找任何工作代码来使用 MediaPlayer 类播放视频或如何使用 VideoView 类控制音量。

下面是使用我正在使用的 VideoView 播放视频的代码。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_video);

    VideoView videoView = (VideoView)this.findViewById(R.id.VVSimpleVideo);
    MediaController mc = new MediaController(this);
    mc.setAnchorView(videoView);
    mc.setMediaPlayer(videoView);
    videoView.setMediaController(mc);
    String _path = "/mnt/sdcard/Movies/video5.mp4";

    videoView.setVideoPath(_path);

    videoView.requestFocus();
    videoView.start();

} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-28T22:52:47.990

如果你想访问你必须调用的`MediaPlayer`a ，那么你可以调用函数将音量设置为 0。`VideoView``MediaPlayer.OnPreparedListener``MediaPlayer.OnCompletionListener``MediaPlayer.setVolume(0f, 0f);`

做这个：

```
@Override

public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.activity_video);

  VideoView videoView = (VideoView)this.findViewById(R.id.VVSimpleVideo);
  MediaController mc = new MediaController(this);
  mc.setAnchorView(videoView);
  mc.setMediaPlayer(videoView);
  videoView.setMediaController(mc);
  String _path = "/mnt/sdcard/Movies/video5.mp4";

  videoView.setVideoPath(_path);
  videoView.setOnPreparedListener(PreparedListener);

  videoView.requestFocus();

  //Dont start your video here
  //videoView.start();

}

MediaPlayer.OnPreparedListener PreparedListener = new MediaPlayer.OnPreparedListener(){

     @Override
     public void onPrepared(MediaPlayer m) {
         try {
                if (m.isPlaying()) {
                    m.stop();
                    m.release();
                    m = new MediaPlayer();
                }
                m.setVolume(0f, 0f);
                m.setLooping(false);
                m.start();
            } catch (Exception e) {
                e.printStackTrace();
            }    
     }
 }; 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-06-11T11:29:11.520

```
videoview.setOnPreparedListener(new OnPreparedListener() {

        @Override
        public void onPrepared(MediaPlayer mp) {

            mp.setVolume(0, 0);
        }
    }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-23T05:22:44.057

我已经使用 MediaPlayer 类完成了这项工作。我已经使用 MediaPlayer 类的 setVolume 函数将音量设置为 0。我也意识到不要使用 AudioManager 类，因为如果使用 AudioManager 将音量设置为 0，那么它会将 MediaPlayer 和 VideoView 的所有实例的音量设置为 0。但是，如果您将使用 MediaPlayer 的 setVolume() 方法，那么它只会静音该实例的音量。

使用 VideoView 将音量设置为 0 也很容易，因为 VideoView 是 MediaPlayer 类的包装器，只允许访问 MediaPlayer 的少数功能。另外我在一些博客上读到，虽然您可以使用 VideoView 实例引用 MediaPlayer 实例，但它非常复杂，不建议这样做。希望这对其他新读者如何尝试做类似的事情有所帮助。

# mysql - 加入时间戳范围

> ID：12435279
> 
> 赞同：1
> 
> 时间：2012-09-15T07:00:12.620
> 
> 标签：mysql, sql, join

我有两张桌子

```
raw_commits(sha,date,author) 
```

和

```
milestones(name,start,end) 
```

其中`milestones`表包含所有项目里程碑的时间戳范围。

我不确定如何`JOIN`实现以下目标：

对于每一个`raw_commits`，显示`raw_commits.sha, raw_commits.date, raw_commits.author, milestones.name`它是否有一个里程碑，显示`NULL`它是否“不属于”一个里程碑，如果提交“属于”多个，则显示每个里程碑的重复行`milestones`。

分类到`milestones`显然是通过使用`raw_commits.date`作为参考来完成的，即`raw_commits.date >= milestones.start AND raw_commits.date <= milestones.end`。

如何实现所描述的行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T07:06:55.377

```
SELECT
  raw_commits.sha,
  raw_commits.author
  raw_commits.date,
  milestones.name
FROM
  raw_commits
LEFT OUTER JOIN
  milestones
ON
  raw_commits.date BETWEEN milestones.start AND milestones.end 
```

# winforms - 如何在 VC++ Windows 窗体应用程序中静态链接 DLL 和 LIB？

> ID：12435282
> 
> 赞同：2
> 
> 时间：2012-09-15T07:00:43.033
> 
> 标签：winforms, visual-c++, static-libraries, static-linking, dynamic-linking

我能够在 VC++ 2008 中构建我的 Windows 窗体（32 位）项目。当我构建一个设置并尝试在另一个系统上运行它时，它给出了错误

> 应用程序无法启动，因为它的并排配置不正确。

我搜索了很多解决方案，然后尝试在 VC++ 2008 可再发行 x86 上安装确切版本。但问题还是一样。

我试图将项目的属性从动态链接更改为静态链接，但这会产生错误

> “/Mtd”和“/clr:pure”命令行参数不正确。

我在想是否有任何方法可以将 DLL 和 LIB 与应用程序本身结合起来？或者还有其他方法吗？

# maven - 在命令行上添加一个 maven（发行版）存储库

> ID：12435283
> 
> 赞同：18
> 
> 时间：2012-09-15T07:00:50.067
> 
> 标签：maven, command-line, continuous-integration, repository

我认为这应该是可能的，但我没有找到任何与之相关的东西，因为我发现的所有东西都与依赖存储库有关。

我想做的是定义 maven（例如部署或发布插件）推送工件的存储库。如何在命令行上定义它？我认为是`-Dsomething`

更新：当我仔细阅读詹金斯错误输出时，它提示使用：
`-DaltDeploymentRepository=id::layout::url`

使用它的格式是什么？什么是布局参数？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-15T10:14:22.180

最简单的事情是阅读[有关 maven-deploy-plugin 的文档，](http://maven.apache.org/plugins/maven-deploy-plugin/deploy-mojo.html)其中描述了格式：

```
mvn -DaltDeploymentRepository=repositoryId::default::http://WhatEverURL 
```

在 distributionManagement 中，您通常会给出以下内容：

```
 <distributionManagement>
    <repository>
      <id>internal.repo</id>
      <name>MyCo Internal Repository</name>
      <url>Host to Company Repository</url>
    </repository>
  </distributionManagement> 
```

如果您想在这种情况下使用不同的 URL，您需要提供：

```
mvn -DaltDeploymentRepository=internal.repo::default::http://WhatEverURL 
```

在这种情况下，默认值是*maven*[存储库布局](http://maven.apache.org/pom.html#Repository)的默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-11T19:27:52.170

在您的 pom.xml 中，您应该将 distributionManagement 配置添加到部署位置。

在以下示例中，我使用文件系统作为位置。

```
<project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd" xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
.........
   <distributionManagement>
       <repository>
         <id>internal.repo</id>
         <name>Internal repo</name>
         <url>file:///home/thara/testesb/in</url>
       </repository>
   </distributionManagement>
............
</project> 
```

**同样的事情可以通过以下命令完成：**

```
mvn deploy -DaltDeploymentRepository=internal.repo::default::file:///home/thara/testesb/in 
```

# sql - 一列中的逗号分隔值 - SQL SERVER

> ID：12435284
> 
> 赞同：12
> 
> 时间：2012-09-15T07:00:55.793
> 
> 标签：sql, sql-server

```
客户表
--------------
身份证名称
1 詹姆斯
2彼得

```

```
订单表
---------------
订单 ID 客户 ID
100 1
101 1
102 2

```

如何编写返回类似这样的查询

```
ID、姓名、订单列表
1，詹姆斯，“100,101”
2、彼得，“102”

```

在 Sybase 中，我有一个名为 LIST 的函数，我可以使用它，但我在 SQL SERVER 中找不到类似的函数

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-15T07:09:18.417

请试试：

```
select ID, [Name],
(select OrderID+',' from OrderTable where CustID=ID
group by OrderID for xml path('')) AS ListOfOrders
From CustomerTable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T07:30:58.960

创建一个用户定义的函数，如下所示

```
CREATE FUNCTION [dbo].[CommaSeperatedOrderIDs](@CustId INT) returns varchar(Max)
AS  
BEGIN   

DECLARE @CommaSeperatedValues VARCHAR(MAX)
SELECT @CommaSeperatedValues = COALESCE(@CommaSeperatedValues+',' , '') + OrderID
FROM OrderTable WHERE CustId = @CustId
RETURN @CommaSeperatedValues

END 
```

接着，

```
select ID, [Name], ([dbo].[CommaSeperatedOrderIDs](ID)) AS ListofOrders
From CustomerTable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T00:45:10.293

下面的链接给出了一个非常简单方便的解决方案。

[http://tejasnshah.wordpress.com/2009/02/28/sql-server-get-column-values-as-comma-seperated-list-using-xml-path-instead-of-udfs-using-sql-合并/](http://tejasnshah.wordpress.com/2009/02/28/sql-server-get-column-values-as-comma-seperated-list-using-xml-path-instead-of-udfs-using-sql-coalesce/)

写在该链接上的 SQL 查询在图像中......所以我无法在此处复制它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-22T14:37:55.033

*从 Sheikh Haris 的[链接](http://tejasnshah.wordpress.com/2009/02/28/sql-server-get-column-values-as-comma-seperated-list-using-xml-path-instead-of-udfs-using-sql-coalesce/)中添加完整的详细信息。*

鉴于此表：

![在此处输入图像描述](../Images/5fed1df76b020faf2f457f24995b308a.png)

要获得如下输出：

![在此处输入图像描述](../Images/9d2f8774dc0e05b073bf2bcb97aef1bc.png)

使用以下 SQL：

```
SELECT field1,
    Substring(convert(varchar(100),
    (
    SELECT (', ' + field2)
        FROM #test t2
        WHERE t1.field1 = t2.field1
        ORDER BY field1, field2
    FOR XML PATH( '' )
                    )), 3, 1000 )
FROM #test t1
GROUP BY field1 
```

*我向子字符串添加了一个转换函数，以便显示 WIDEMEMO 字段（SQL Server）*

# c# - 文件删除错误

> ID：12435287
> 
> 赞同：0
> 
> 时间：2012-09-15T07:01:18.430
> 
> 标签：c#, file, file-io

> **可能重复：**
> [该进程无法访问该文件，因为它正被另一个进程使用](https://stackoverflow.com/questions/877889/the-process-cannot-access-the-file-because-it-is-being-used-by-another-process)

我的应用程序中有一个 PDF 文件，我想删除该文件。当我尝试删除文件时，它会给出错误“该进程无法访问该文件，因为它正在被另一个进程使用。”

代码如下

```
if (File.Exists(sDownloadFile))
             File.Delete(sDownloadFile); 
```

我怎样才能删除这个文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T07:32:56.653

错误的原因有点简单。您打开了一个文件，但没有正确关闭它。该实例仍然存在于内存中。

写`.Close()`和`.Dispose()`释放内存的方法。

示例代码[来自这里](https://stackoverflow.com/a/321163/1495442)：

```
WebClient wc = new WebClient();
wc.DownloadFile("https://stackoverflow.com/Content/Img/stackoverflow-logo-250.png", "Foo.png");
FileStream fooStream;
using (fooStream = new FileStream("foo.png", FileMode.Open))
{
    // do stuff
}
File.Move("foo.png", "foo2.png"); 
```

# jquery - 无法让 Ajax 脚本适用于 PHP 登录页面

> ID：12435288
> 
> 赞同：0
> 
> 时间：2012-09-15T07:01:34.023
> 
> 标签：jquery, ajax

我在使用 Ajax 将数据发送到 Mysql 数据库而不刷新页面时遇到问题。

谁能指出我可能出错的地方？我放置了一个警报：`alert('it worked');`在 AJAX onsuccess 部分的脚本中看看发生了什么。它还返回“它有效”。

（为了便于参考，我删除了脚本的验证部分，但我确实拥有它。）

我还检查了从变量 dataString 返回的值：

```
email =a3&pass=a 
```

我不知道为什么它不将值发送到 PHP 页面。

```
//START THE FUNCTION FOR THE SUBMISSION OF THE LOGIN FORM VIA AJAX 

$('form[name=loginForm]').submit(function(e) { 
    e.preventDefault();

    var email = $("#email").val();
    var password = $("#pass").val();

    var dataString = 'email =' + email + '&pass=' + password;

    //the html below is just used to test the values that are derived from the dataStirng. 
    $('#showerror').html( dataString  );

    $.ajax({
        type: "POST",
        url: "cms/index.php?view=login",
        data: dataString,
        success: function() {
            alert('it worked');
            //document.newMessage.newMessageContent.value = "";
        }
    });     
});  
//END THE FUNCTION FOR THE SUBMISSION OF THE LOGIN FORM VIA AJAX 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T07:18:13.837

发送数据，如：

```
{'email': email, 'pass': password} 
```

***或者***

```
var dataString = 'email =' + email + '&pass=' + password;
                       ^--- remove this space 
```

所以它会

```
var dataString = 'email=' + email + '&pass=' + password; 
```

`Space`不允许在查询字符串中使用。[请参阅此处的标题***URL 编码***](http://en.wikipedia.org/wiki/Query_string)。

# wordpress - 如何在 wordpress 3.4.2 中更改主页标题？

> ID：12435289
> 
> 赞同：0
> 
> 时间：2012-09-15T07:01:34.467
> 
> 标签：wordpress, webpage, title

在 wordpress 3.4.2 中更改主页标题需要更新哪个文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T07:07:40.497

两种可能...

1.  您可以在管理员的“设置”面板中更改它
2.  您可以从主题根目录中的 header.php 更改它。

我会从数字 1 开始，因为大多数主题都会从“设置”面板更新。

# html - 在浏览器中按 CTRL- 时如何修复 3 个浮动元素破坏

> ID：12435290
> 
> 赞同：0
> 
> 时间：2012-09-15T07:01:44.243
> 
> 标签：html, css

我的 div #blue_team、.vs_img、#red_team 中有 3 个浮动元素，每次我尝试按 ctrl 时 - 它破坏了我的设计如何解决这个问题？

-------------------HTML代码：-------

```
 <!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Battle Game</title>
    <link rel="stylesheet" type="text/css" href="css/reset.css">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <script src="http://code.jquery.com/jquery-1.8.1.js"></script>
</head>
<body>
<div id="container">
    <div id="warriors">
        <form id="blue_team">
            <p>
                <label class="team">Green Team</label>
            </p>
            <p>
                <a href="#"><img src="resources/naruto.png" alt=""></a>
                <a href="#"><img src="resources/sasuke.png" alt=""></a>
                <a href="#"><img src="resources/sakura.png" alt=""></a>
            </p>
            <p>
                <label>Name:</label>
                    <input type="text" readonly="readonly">
                <label>Type:</label>
                    <input type="text" readonly="readonly">
            </p>
        </form>

            <img class="vs_img" src="resources/vs.png" alt="">

        <form id="red_team">
            <p>
                <label class="team">Red Team</label>
            </p>
            <p>
                <a href="#"><img src="resources/itachi.png" alt=""></a>
                <a href="#"><img src="resources/tobi.png" alt=""></a>
                <a href="#"><img src="resources/hidan.png" alt=""></a>
            </p>
            <p>
                <label>Name:</label>
                    <input type="text" readonly="readonly">
                <label>Type:</label>
                    <input type="text" readonly="readonly">
            </p>
        </form>
        <div class="clearfloats">
            <p>
                <input type="button" value="Start Battle">
            </p>
        </div>
    </div>
</div>
</body>
</html> 
```

-------------------CSS 代码：--------

```
 div#container {
    background-color:#151614;
    width:800px;
    margin:0 auto;
    padding-top:8px;
    padding-bottom:8px;
}
div#warriors {
    border:1px solid #ff3534;
    width:700px;
    margin:0 auto;
    padding:8px;
}
form {
    border:1px solid #ff3534;
    width:264px;
    height:190px;
}
form#blue_team {
    float:left;
    margin-right:8px;
    margin-bottom:8px;
}
.vs_img {
    border:1px solid #ff3534;
    width:150px;
    height:190px;
    float:left; 
    margin-right:8px;
}
form#red_team {
    float:left;
    margin-bottom:8px;
}
.clearfloats {
    clear:both;
    border:1px solid #ff3534;
}
.clearfloats p {
    margin-bottom:8px;
}
p {
    width:220px;
    margin:0 auto;
    margin-top:8px;
    text-align:center;
}
label {
    display:inline-block;
    width:55px;
    text-align:right;
    color:#ff3534;
}
.team {
    border:1px solid #ff3534;
    width:150px;
    padding:8px;
    text-align:center;
}
input[type=text] {
    width:110px;
    margin-bottom:8px;
}
input[type=button] {
    width:150px;
    cursor:pointer;
} 
```

按下 ctrl- 前的截图：

![在此处输入图像描述](../Images/a790073dfd1539220382dddacd00bc32.png)

后：

![在此处输入图像描述](../Images/a45c996268ff8685500d2b5e63073b94.png)

# android - 如何从 Android 中的 SimpleCursorAdpter 检索 Spinner 上的正确数据

> ID：12435291
> 
> 赞同：-1
> 
> 时间：2012-09-15T07:01:44.737
> 
> 标签：android

干草我使用 SimpleCursorAdapter 从实现微调器上的数据。它运行良好。还要获取我使用以下代码的数据：

```
Cursor cursor = (Cursor) (spncomapnayname.getSelectedItem()); 
if (cursor != null) { 
    companyselected = cc.getString(cc.getColumnIndex(db.COMPANY_NAME)); 
} 
```

它运行良好。但它是为了从微调器获取数据。但现在我想在微调器上设置特定数据，这些数据由用户插入以更新我们使用的普通 ArrayAdapter 微调器：

```
spinnername.setSelection(adapter1.getPosition(abc)); 
```

所以我想知道如何在微调器上设置数据库中的数据。

这是我的代码：

```
cursor = db.getProductName(); 
adapter1 = new SimpleCursorAdapter(this, android.R.layout.simple_spinner_item, cursor, new String[] { DB_Database.PRODUCT_NAME }, new int[] { android.R.id.text1 });
adapter1.setDropDownViewResource(android.R.layout.simple_dropdown_item_1line);
spnproduct.setAdapter(adapter1);

purchaseproduct = purchasebundle.getString("clickedpurchaseproductname");
if(!purchaseproduct.equals("null")|| !purchaseproduct.equals("")) {
    System.out.println("purchaseproduct" + purchaseproduct); 
    String mypurchaseproduct=purchaseproduct;
    ArrayAdapter myAdap = (ArrayAdapter) spnproduct.getAdapter(); 
    int spinnerPosition = myAdap.getPosition(mypurchaseproduct); // set the default according to value 
    spnproduct.setSelection(spinnerPosition);
} 
```

在这里我从 bundle 获取数据。我想检索 Spinner 上的数据。数据是从 SimpleCursorAdapter 填充的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T07:23:24.003

首先从光标中获取选定的值并存储到`mString`变量中，然后使用下面的代码将此选定的值显示到 Spinner 中。

```
if (!mString.equals("null") || !mString.equals("")) {
    String myString = mString; // the value you want the position for
    ArrayAdapter<String> myAdap = (ArrayAdapter<String>) mSpn1.getAdapter(); // cast to an ArrayAdapter
    int spinnerPosition = myAdap.getPosition(myString);
    // set the default according to value
    mSpn1.setSelection(spinnerPosition);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:57:56.163

你可以这样做：

```
Cursor c = (Cursor)parent.getItemAtPosition(pos);
int id = c.getInt(c.getColumnIndexOrThrow("columm_name")); 
```

或得到一个字符串

```
String name=c.getString(c.getColumnIndexOrThrow("columm_name")); 
```

# database - 我怎样才能创建这样的表？

> ID：12435292
> 
> 赞同：0
> 
> 时间：2012-09-15T07:02:01.877
> 
> 标签：database

我在训练期间，我的教练给了我一些数据库练习。

我必须制作**Project**、**Employee**、**Roles**和**Employee_Projects_Role**表。最后一个表包含从事具有指定角色的项目的员工的详细信息。

他给我的条件是：
1、一个员工可以做多个项目。
2\. 一个员工不能在同一个项目中担任不同的角色。

我制作了这些表格并插入了数据。在**角色中**，我有领导者、经理、开发者的角色。我制作了这些表格并输入了数据。

他检查了我的表格并说一个项目有超过 1 个领导和 1 个经理，所以我限制了列，就像一个项目中不会有相同的角色，但现在我不能在一个项目中输入 2 个开发人员到该映射表。

但是一个项目显然可以有 2 个开发人员。因此，如果您了解整个场景，那么我想问一下，是否可以限制一个特定的列，使其在一个项目中只有一个领导和经理？

我并没有真正进入数据库，但在分配给我一个项目工作之前，他只想复习我的基础知识。所以，我真的很困惑。

这些表的架构如下：

1.  具有以下字段的项目：project_pid - 主键，project_name

2.  具有以下字段的员工：employee_pid - 主键、employee_name、gender - M/F、salary、date_of_joining、is_active - Y/N

3.  具有以下字段的角色：
    role_pid - 主键，role_name -（团队成员或领导）

4.  Employee_Project_Role 具有以下字段：
    project_xid - 外键（引用表 Projects），employee_xid - 外键（引用表 Employee），role_xid - 外键（引用表 Roles）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T08:13:25.023

要实现这样的逻辑，您需要使用过程语言。我认为最简单的方法是定义触发器：

```
CREATE TRIGGER role_restrict
ON employee_project_role
FOR INSERT, UPDATE
AS
  BEGIN
      DECLARE @role VARCHAR(100)
      DECLARE @ldr_xid VARCHAR(100)

      SELECT @role_xid = (SELECT role_xid
                          FROM   inserted)

      SELECT @ldr_xid = (SELECT role_xid
                         FROM   roles
                         WHERE  role_name = "leader")

      IF @role = @ldr_xid
         AND (SELECT Count(*) AS cnt
              FROM   employee_project_role
              WHERE  project_xid = (SELECT project_xid
                                    FROM   inserted)
                     AND role_xid = @ldr_xid) > 1
        /* Cancel the insert, there is already a leader in a project.*/
        BEGIN
            ROLLBACK TRANSACTION
        END
  /* Otherwise we insert the record */
  END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T07:53:56.853

您需要取消“每个项目一个角色”的限制，而是创建 T-SQL 存储过程来插入和更新项目员工。

基本上你的表和关系不允许这种复杂的行为。您必须要么创建链接表（我们的经理不允许），要么将逻辑编码到 T-SQL 存储过程中。

T-SQL 程序将允许您执行以下逻辑：

//伪代码

```
IF newEmployeeToBeInserted.IsManager AND Project_table.ContainsManager
return errorCode
ELSE doInsert 
```

# jquery - 如何更改 jquery DataTables 插件的默认值

> ID：12435296
> 
> 赞同：1
> 
> 时间：2012-09-15T07:02:56.400
> 
> 标签：jquery, datatables

我正在尝试为我在项目中使用的数据表设置默认值。

我可以通过以下方式更改 dataTables 默认值：

```
$.extend($.fn.dataTable.defaults.oLanguage, {
    "sProcessing": "Loading..."
}); 
```

但是当我尝试更改插件值的默认值时，例如：

```
$.extend($.fn.dataTable.defaults.oColVis, {
    "buttonText": "Change columns"
}); 
```

它不起作用。

我试图找到插件使用的默认值，`$.fn.dataTableExt`但找不到任何东西。

编辑：为了确保我在我的问题中明确表示，我知道我可以在 dataTable 初始化中更改插件属性，正如[Nicola Peluchetti](https://stackoverflow.com/users/397861/nicola-peluchetti)指出的那样。

但是我在项目中的不同地方使用了 dataTable，我必须以这种方式在不同的地方重复代码。不是一个选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T13:03:52.810

要更改按钮文本的默认值，您应该这样做

```
$(document).ready( function () {
    $('#example').dataTable( {
        "sDom": 'C<"clear">lfrtip',
        "oColVis": {
            "buttonText": "Change columns"
        }
    } );
} ); 
```

如[本](http://datatables.net/release-datatables/extras/ColVis/text.html)例所示。所以基本上是在初始化时传递参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T18:19:24.913

我已经在 DataTables 论坛上发布了回复：http: [//datatables.net/forums/discussion/11888/how-to-set-defaults-for-a-plugin](http://datatables.net/forums/discussion/11888/how-to-set-defaults-for-a-plugin)。基本上你现在只需要改变 ColVis 源。

# json - 如何在 Flask 中“jsonify”一个列表？

> ID：12435297
> 
> 赞同：100
> 
> 时间：2012-09-15T07:03:05.407
> 
> 标签：json, flask

目前`Flask`在对列表进行 jsonifying 时会引发错误。

我知道可能存在安全原因[https://github.com/mitsuhiko/flask/issues/170](https://github.com/mitsuhiko/flask/issues/170)，但我仍然希望有一种方法可以返回如下 JSON 列表：

```
[
    {'a': 1, 'b': 2},
    {'a': 5, 'b': 10}
] 
```

代替

```
{ 'results': [
    {'a': 1, 'b': 2},
    {'a': 5, 'b': 10}
]} 
```

在响应`application/json`请求时。如何使用 Jsonify 在 Flask 中返回 JSON 列表？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-10-06T10:24:14.127

你不能，但无论如何你都可以这样做。我需要这个用于 jQuery-File-Upload

```
import json
# get this object
from flask import Response

#example data:

    js = [ { "name" : filename, "size" : st.st_size , 
        "url" : url_for('show', filename=filename)} ]
#then do this
    return Response(json.dumps(js),  mimetype='application/json') 
```

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2012-09-16T01:15:32.970

`jsonify`[出于安全原因](http://flask.pocoo.org/docs/1.0/security/#json-security)，阻止您在 Flask 0.10 及更低版本中执行此操作。

无论如何，只需`json.dumps`在 Python 标准库中使用即可。

[http://docs.python.org/library/json.html#json.dumps](http://docs.python.org/library/json.html#json.dumps)

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-09-15T08:29:58.117

这对我有用。您使用的是哪个版本的 Flask？

```
from flask import jsonify

...

@app.route('/test/json')
def test_json():
    list = [
            {'a': 1, 'b': 2},
            {'a': 5, 'b': 10}
           ]
    return jsonify(results = list) 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-01-25T19:09:46.100

Flask 的方法现在序列化了截至[本次提交](https://github.com/mitsuhiko/flask/commit/431db2874b242316051963d9bc4d5653b3647acc)`jsonify()`的顶级数组，可在 Flask 0.11 及更高版本中使用。

为方便起见，您可以传入 Python 列表：`jsonify([1,2,3])` 或传入一系列`args`：`jsonify(1,2,3)`

两者都将被序列化为 JSON 顶级数组：`[1,2,3]`

详细信息：http: [//flask.pocoo.org/docs/dev/api/#flask.json.jsonify](http://flask.pocoo.org/docs/dev/api/#flask.json.jsonify)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-10-31T17:17:02.337

解决了，不费吹灰之力。你可以偷懒用jsonify，只需要传入items=[your list]。

在这里查看解决方案

[https://github.com/mitsuhiko/flask/issues/510](https://github.com/mitsuhiko/flask/issues/510)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-03-12T14:15:39.877

**使用jsonify**可以轻松地对烧瓶中的列表进行jsonify，例如：

```
from flask import Flask,jsonify
app = Flask(__name__)

tasks = [
    {
        'id':1,
        'task':'this is first task'
    },
    {
        'id':2,
        'task':'this is another task'
    }
]

@app.route('/app-name/api/v0.1/tasks',methods=['GET'])
def get_tasks():
    return jsonify({'tasks':tasks})  #will return the json

if(__name__ == '__main__'):
    app.run(debug = True) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-07-06T06:04:21.310

如果您从字面上搜索在烧瓶中返回**JSON 列表**的方式，并且您完全确定您的变量是一个列表，那么简单的方法是（其中*bin*是 1 和 0 的列表）：

```
 return jsonify({'ans':bin}), 201 
```

最后，在您的客户端中，您将获得类似

{ “答案”： [ 0.0, 0.0, 1.0, 1.0, 0.0 ] }

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-01-07T14:42:15.330

josonify 工作..但如果你打算只传递一个没有“结果”键的数组，你可以使用 python 中的 json 库。以下转换对我有用..

```
 import json

 @app.route('/test/json')
 def test_json():
 list = [
        {'a': 1, 'b': 2},
        {'a': 5, 'b': 10}
       ]
 return json.dumps(list)) 
```

# python - 如何在 Python 中编写像 Mma 的 NestList 这样的函数

> ID：12435298
> 
> 赞同：2
> 
> 时间：2012-09-15T07:03:13.080
> 
> 标签：python, list, function, iterator

例如： NestList(f,x,3) ----> [x, f(x), f(f(x)), f(f(f(x)))]

[http://reference.wolfram.com/mathematica/ref/NestList.html](http://reference.wolfram.com/mathematica/ref/NestList.html)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T07:07:10.350

你可以把它写成一个生成器：

```
def nestList(f,x,c):
    for i in range(c):
        yield x
        x = f(x)
    yield x

import math
print list(nestList(math.cos, 1.0, 10)) 
```

或者，如果您希望将结果作为列表，您可以在循环中追加：

```
def nestList(f,x,c):
    result = [x]
    for i in range(c):
        x = f(x)
        result.append(x)
    return result

import math
print nestList(math.cos, 1.0, 10) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T08:54:09.547

```
def nest_list(f, x, i):
        if i == 0:
            return [x]
        return [x] + nest_list(f, f(x), i-1)

def nest_list(f, x, n):
    return [reduce(lambda x,y: f(x), range(i), x) for i in range(n+1)] 
```

I found another way did it!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T19:22:24.320

使用`functional`模块。它有一个名为 的函数`scanl`，它产生一个归约的每个阶段。然后，您可以减少`f`.

# sql - 从价格表中按商店和全球最低价格上涨

> ID：12435299
> 
> 赞同：0
> 
> 时间：2012-09-15T07:03:16.467
> 
> 标签：sql, sql-server

这就是我的价格表的样子

```
Product_id prod_upc    str_nbr  Price
prod110010 4122067755  12       1.22
prod110010 4122067755  21       2.88
prod110010 4122063030  21       3.88
prod110010 4122063030  12       2.88
prod110010 4122063031  12       2.88
prod110010 4122063031  21       4.88 
```

我有两个要求要解决

1.  为所有商店的所有产品获得最低价格的 UPC？根据上述数据，输出应该是

    ```
    prod110010  4122067755  12      1.22 
    ```

2.  为每家商店的所有产品获得最低价格的 upc ？根据上述数据，输出应该是

    ```
    prod110010  4122067755  12      1.22
    prod110010  4122067755  21      2.88 
    ```

我尝试了可能的内部查询，但没有任何效果，请在这里的任何 SQL 专家提供帮助。

我对特定商店的查询是：

```
SELECT DISTINCT t.product_id, t.prod_upc,t.str_nbr, t.MINVALUE 
  FROM ( SELECT dpc.product_id, hpd.prod_upc, str_nbr
              , MIN(hpd.curr_retl_prc) OVER 
                 (PARTITION BY dpc.product_id) MINVALUE 
           FROM prc_dta ) AS T 
```

对于全球：

```
SELECT DISTINCT t.product_id, t.prod_upc, t.str_nbr, t.MINVALUE 
  FROM ( SELECT dpc.product_id, hpd.prod_upc, hpd.str_nbr
              , MIN(hpd.curr_retl_prc) OVER 
                    (PARTITION BY dpc.product_id,hpd.str_nbr) MINVALUE 
           FROM prc_dta) AS T 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T07:26:53.223

```
This query to get min price upc row : 

    select top 1 Product_id,prod_upc,str_nbr,Price from tbl where prod_upc=(select top 1 min(prod_upc) from tb1 ) order by Price asc

This query get all row of min price of upc:

select Product_id,prod_upc,str_nbr,Price from tbl where prod_upc=(select top 1 min(prod_upc) from tb1 ) order by Price asc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T07:29:59.600

```
WITH ranked (Product_id, prod_upc, str_nbr, Price, pricerank)
AS ( SELECT Product_id, prod_upc, str_nbr, Price,
    ROW_NUMBER() OVER ( PARTITION BY str_nbr ORDER BY Price ) AS pricerank
    FROM tbl
   )
SELECT Product_id, prod_upc, str_nbr, Price FROM ranked WHERE pricerank = 1 
```

# sql-server - 如何使用 group by 子句显示员工姓名列

> ID：12435302
> 
> 赞同：0
> 
> 时间：2012-09-15T07:03:54.063
> 
> 标签：sql-server, group-by

您好，我有两张表**Employee**和**Department**。在员工中，我有 empid、firstName、salary、Department_ID，在部门中我有 deptid 和 deptname。我想显示每个部门的薪水最高的员工姓名。我完成了以下代码

```
select  MAX(E.Salary),D.Name from Employee as E JOIN Department As D
ON e.Department_ID = D.Department_ID
GROUP BY D.Name 
```

它仅来自部门表（我在这里没有包括 E.FirstName）。当我编写如下查询时

```
select E.FirstName MAX(E.Salary),D.Name from Employee as E JOIN Department As D
ON e.Department_ID = D.Department_ID
GROUP BY D.Name 
```

给出一个错误

> **E.FirstName** 不包含在聚合函数或 GROUP BY 子句中。

如何修改它以显示员工姓名？

当我也在 group by 子句中添加 E.FirstName 时，我得到了关注。

> ## 名字薪金部门名称
> 
> 贝克 1400.00 操作
> 
> 艾伦 5400.00 研究
> 
> 史密斯 1800.00 研究
> 
> 丹尼斯 4500.00 销售
> 
> 米希尔 7500.00 销售额
> 
> WARK 8000.00 销售额

我只想显示 Max 受薪员工及其部门和薪水。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T07:08:01.397

将 E.FirstName 添加到 GroupBy。Select 语句中的列必须在 GroupBy 或其他聚合中考虑。答案实际上在您收到的错误消息中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T07:21:07.810

```
select E.FirstName MAX(E.Salary),D.Name from Employee as E JOIN Department As D
ON E.Department_ID = D.Department_ID
GROUP BY D.Name,E.FirstName 
```

按照逻辑。这应该有效。如果仍然出现错误。请发布错误。否则发布输出。

# php - php - 处理和验证表单 - 正确的过程

> ID：12435304
> 
> 赞同：0
> 
> 时间：2012-09-15T07:04:23.490
> 
> 标签：php, forms, validation

在 PHP 中，我想使用保存在单独文件中的脚本来处理表单并验证它。如果有错误，我希望表单显示错误和原始值以供用户更改。目前验证脚本与表单在同一页面上，一切正常。但是，我希望它远离表单，并使用表单中的“操作”将表单变量发送到脚本。但是，如果我这样做了，我如何才能返回到带有错误消息和原始值的表单 - 我是否只是在脚本中使用 $_POST 和标题位置？或者有没有更好的方法。如果表单验证正常，我将转到单独的页面（使用标题）。

谁能帮我理解我应该尝试实现的过程/逻辑以及页面之间过去变量的函数（$_GET？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T07:09:22.160

如果您想跨多个页面跟踪变量，调查[会话](http://php.net/manual/en/features.sessions.php)可能是可行的。您可以将 $_GET 或 $_POST 中的变量分配给会话，并且可以跨页面访问它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T07:14:44.983

我认为您正在寻找的是一个名为 Model-View-Controller (MVC) 的框架。在您的情况下，您的表单是“视图”，处理数据的脚本是“控制器”，然后控制器可以选择向用户（视图）显示什么，这是带有错误消息的表单或带有成功消息的其他页面。但是 MVC 比这要复杂一些。如果您想学习 MVC，请阅读一些文章并选择使用 MVC 框架，例如 CakePHP、CodeIgniter、Zend 框架等。

如果您正在学习 PHP 的基础知识，您可能不想开始使用框架，在这种情况下，您可以执行以下操作（登录示例）：

**登录.php**

```
<?php
    $error = "";
    $username = "";
    $password = "";

    //POST method used. The user is trying to login
    if(isset($_POST))
    {
        $username = $_POST["username"];
        $password = $_POST["password"];

        //process login here
        //check database
        if($success == true)
        {
            header( 'Location: home.php' ) ;
        }
        else
        {
            include "login-view.php";
            $error = "Either username or password is incorrect.";
        }
    }
    else //GET method used. The user visits the login page
    {
        include "login-view.php";
    }
?> 
```

**登录-view.php**

```
<p><?php echo $error; ?></p>
<form method="post" action="login.php">
     <input type="text" name="username" value="<?php echo $username ?>" />
     <input type="password" name="password" />
     <input type="submit" value="send" />        
</form> 
```

**上面的代码是这样的：**

1）用户访问登录页面。login.php 将检测到所使用的方法是 GET——点击链接、打开书签或输入 URL 到地址栏。login.php 然后将包含包含表单的登录视图。

2）用户输入他的用户名和密码，然后单击提交按钮。login.php 将检测到请求是 POST，然后验证用户名和密码，并在必要时提供错误消息。如果有效，则重定向到主页，如果无效，则包括 login-view.php（表单），这次包含错误消息和之前输入的用户名。

# asp.net - 使用缓存时分配参数 totalRecords

> ID：12435311
> 
> 赞同：0
> 
> 时间：2012-09-15T07:05:56.590
> 
> 标签：asp.net, caching, asp.net-membership

我正在使用 asp.net **Sqlmembership.GetAll()**方法（分页重载）。现在我想添加一个**缓存层**来缓存结果，但是 GetAll 方法的**out 参数**存在问题，它返回记录总数。从缓存中检索数据时，如何为**totalRecords参数赋值？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T07:46:50.563

如果我的理解是正确的，这个小流程将帮助您实现目标

这是一个基本流程：

1.  当你想访问缓存的对象时，向缓存提供者询问
2.  如果对象不为空，则转换为正确的类型并从缓存中返回对象（在本例中为用户列表）。结束进程
3.  如果对象为空，则
    1.  从原始来源检索对象（使用`GetAll`方法）
    2.  将检索到的对象保存到缓存中
    3.  返回检索到的对象。结束进程

无论如何，我建议您使用自定义域类而不是`MembershipUser`类

这是一个基本示例：

```
 public IEnumerable<DomainUser> GetDomainUsers()
    {
        var context = HttpContext.Current;
        var cache = context.Cache;
        var domainUsers = cache["domainUsers"] as IEnumerable<DomainUser>;

        if (domainUsers == null)
        {
            domainUsers = Membership.GetAllUsers().OfType<MembershipUser>().Select(x => new DomainUser
                {
                    Email = x.Email,
                    Username = x.UserName
                });

            cache.Insert(
                "domainUsers", // cache key
                domainUsers, // object to cache
                null, // dependencies
                DateTime.Now.AddMinutes(30), // absoulute expiration
                Cache.NoSlidingExpiration, // slading expiration
                CacheItemPriority.High, // cache item priority
                null // callback called when the cache item is removed
            );

            context.Trace.Warn("Data retrieved from its original source");
        }
        else
        {
            context.Trace.Warn("Data retrieved from cache");

        }

        return domainUsers;
    } 
```

# ios5 - Spotify 播放列表网址

> ID：12435315
> 
> 赞同：1
> 
> 时间：2012-09-15T07:06:52.857
> 
> 标签：ios5, spotify, cocoalibspotify-2.0

我正在与 Spotify 合作。我有 Spotify 播放列表。现在的问题是如何从该播放列表中获取 url 以播放歌曲？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T08:37:15.617

`SPPlaylist`有一个`spotifyURL`属性，就像`SPTrack`（以及几乎所有其他元数据对象）一样。

# c - 不同程序中的相同数组

> ID：12435320
> 
> 赞同：1
> 
> 时间：2012-09-15T07:07:22.253
> 
> 标签：c, string, pointers

我真的是 C 的新手，目前我正在尝试从包含名称列表的文件中读取，并将其导入到数组中。当前数组是 char[][] 类型，因为它将包含更多信息而不仅仅是名称，但本质上我希望 team[0][0] 成为我读入的第一个名称，team[1][0] 到是第二个，等等。我很确定名称的实际导入是正确的，但是我在存储这些数组时遇到了问题。

```
FILE *teamfile;
teamfile = fopen(file, "r");
char line[MAXLENGTH+1];
int i = 0;
while( fgets(line, sizeof line, teamfile) != NULL )
{
    trim_line(line);
    strcpy(&team[i][NAME],line);
    i++;        
}
fclose(teamfile); 
```

从 main 函数调用它为`teams = teamlist(argv[1], team);` 但是当我尝试从程序中的其他地方引用数组时，例如`printf(&team[0][0])`它输出似乎是一个块中的所有名称......我做错了什么？

编辑：

```
static void trim_line(char line[])
{
    int i = 0;

//  LOOP UNTIL WE REACH THE END OF line
    while(line[i] != '\0')
    {

//  CHECK FOR CARRIAGE-RETURN OR NEWLINE
        if( line[i] == '\r' || line[i] == '\n' )
        {
            line[i] = '\0'; // overwrite with nul-byte
            break;          // leave the loop early
        }
        i = i+1;            // iterate through character array
    }
} 
```

感谢你目前的帮助！:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T07:27:30.160

如果`team`声明为`char team[NUM_OF_TEAMS][LENGHT_OF_NAME]`

那么它应该总是`strcpy(&team[i],line);`

提示：它`char array,`不是`string object`C 中的 ""

# c# - Volatile.Read / Volatile.Write 是否为“双”原子？

> ID：12435325
> 
> 赞同：8
> 
> 时间：2012-09-15T07:08:34.050
> 
> 标签：c#, .net-4.5

MSDN 指出

> long、ulong、double、decimal以及用户定义的类型，不保证是原子 *[的 5.5 变量引用的原子性](http://msdn.microsoft.com/en-us/library/aa691278%28VS.71%29.aspx)*

将[`Volatile.Write Method (Double%, Double)`](http://msdn.microsoft.com/en-us/library/gg712978)作为原子操作工作吗？如果是这样，如何保证？

`Volatile.Write(ref mydouble, value);`在一个线程和`Volatile.Read(ref mydouble)`另一个`mydouble`有`double`类型的线程中执行是否安全？

那是一般性问题。另一个问题 - 在这种特殊情况下我应该怎么做：

*   2 处理器 Xeon x64 服务器
*   Windows + MS .NET 4.5
*   来自不同线程的读/写双倍
*   最小延迟（需要最小，因为我正在编写 HFT 软件）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-15T07:30:09.140

不，Volatile 不是原子的，在 SMP（>1 处理器）系统中假设是不安全的。它在单处理器机器上是安全的。

除非您**真的**需要性能，否则您可能需要`Interlocked`或。`Interlocked.Exchange``Interlocked.Read`

# android - android中应用程序的最大后台运行时间是多少？

> ID：12435330
> 
> 赞同：-2
> 
> 时间：2012-09-15T07:09:06.367
> 
> 标签：android

我是 Android 开发的新手。我的应用程序需要在后台进程中工作。请回复我应用程序的最大后台运行时间是多少？如果我把应用程序放在后台。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T08:07:48.843

如果你需要运行长时间运行的后台任务，你应该考虑实现一个[Service](http://developer.android.com/guide/components/services.html)。

# delphi - JvDataSource 的 OnRecordChanged 事件不会触发

> ID：12435332
> 
> 赞同：3
> 
> 时间：2012-09-15T07:09:17.933
> 
> 标签：delphi, jvcl

`JvDataSource`有一个`OnRecordChanged`事件，顾名思义，只要当前记录发生更改，就应该触发该事件。但它根本不火。事实上，甚至`OnUpdateData`根本没有被解雇。`JVCL`我开始怀疑我的安装或`JvDataSource`组件确实有问题。即使是全新安装也不能解决上述问题。有没有人`JvDataSource`在他们的应用程序中使用？如果是的话，你有没有观察到这样的行为？

* * *

PS：在你问之前，我已经尝试了`DisableEventsOnLoading`, 和的所有组合`EventsEnabled`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T13:22:34.243

感谢[Sertac](https://stackoverflow.com/users/243614/sertac-akyuz)。这是我的一个误解。`OnRecordChanged`每当编辑记录时调用。

# sql-server - 在 MS SQLEXPRESS 中使用来自 master 的本地数据库

> ID：12435335
> 
> 赞同：1
> 
> 时间：2012-09-15T07:09:47.760
> 
> 标签：sql-server, vb.net, linq

我通过 Visual Basic 使用 SQLEXPRESS 创建了一个本地数据库。

我打算使用 LINQ 从应用程序连接到数据库。这是我最初连接到数据库的声明：

```
Dim db As New DataContext("Data Source=localhost\SQLEXPRESS; Initial Catalog=master; Integrated Security=True;") 
```

理想情况下，我的数据库将输入初始目录，但由于某种原因这给了我身份验证错误。现在该语句已执行，我的下一步是连接到我的特定数据库。但是，当我尝试连接这样的语句时：

```
Dim TestCommand = db.ExecuteCommand("Use MyDB.mdf") 
```

我收到数据库不存在的错误。

当我使用以下命令查询我的数据库时：

```
SELECT name FROM master.sys.databases 
```

返回值为 master、tempdb、model、msdb 和 C:USERS\MY NAME\DOCUMENTS\MyDB.mdf

我已经尝试了上面的“TestCommand”写出数据库的目录，但是在“C:”处出现错误。

所以，我的数据库存在，但是有人可以向我解释我应该用来“使用”我的数据库的语法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T15:10:31.197

您不应该以`use`这种方式使用该命令！您必须通过将其设置为初始目录来直接连接到应用程序的数据库。顺便说一句，如果您无权这样做，`use`命令也不会允许您这样做。所以你必须修复数据库的授权：在 Sql Server Management Studio 中为你的 windows 帐户创建一个登录名，并授予它对应用程序数据库的读/写访问权限。

# c# - 如何更改富文本框中部分文本的突出显示颜色？

> ID：12435340
> 
> 赞同：1
> 
> 时间：2012-09-15T07:10:24.377
> 
> 标签：c#, wpf, richtextbox, highlight

我是 WPF 的 RichTextBox 的新手。我想知道如何用特定颜色突出显示一行上的文本。

假设我有一个黄色背景的富文本框，并为其分配一个流文档。

```
richTextBox.Background = Brushes.LightYellow;
var mcFlowDoc = new FlowDocument();
var para = new Paragraph();
para.Inlines.Add(new Run("This is the first line.\n"));
para.Inlines.Add(new Run("This is the second line.\n"));
para.Inlines.Add(new Run("This is the third line."));
mcFlowDoc.Blocks.Add(para);
richTextBox.Document = mcFlowDoc; 
```

**接下来我需要做什么才能将第三行的突出显示颜色更改为红色？**我不是在谈论选择突出显示颜色，而是普通文本突出显示（如在写字板中）

如果有解决方案，我希望它在 C# 代码中，我想远离 XAML 编辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T12:46:18.750

```
 Run run = new Run("Red is the third line.\n");
    // run.Foreground = Brushes.Red;
    run.Background = Brushes.Red;
    para.Inlines.Add(run); 
```

# php - SELECT MAX(... 在 PHP/MYSQL 中不返回任何内容

> ID：12435342
> 
> 赞同：10
> 
> 时间：2012-09-15T07:10:51.880
> 
> 标签：php, mysql, max

这是表结构-

```
Table: test

+------+---------+
| PAGE | CONTENT |
+------+---------+
|  1   |   ABC   |
+------+---------+
|  2   |   DEF   |
+------+---------+
|  3   |   GHI   |
+------+---------+ 
```

`PAGE`是具有数据类型的 Primary `INT(11)`。它不会自动递增。CONTENT 是数据类型`TEXT`。

在 PHP 中我做 -

```
$result = mysql_query(SELECT MAX(PAGE) FROM test);
$row = mysql_fetch_array($result);
echo $row["PAGE"]; 
```

没有输出。完全没有。如果我做的事情就像`echo "Value : ".$row["PAGE"];`我所看到的那样`Value :`

查询`SELECT * FROM test`工作得很好。我在使用`MAX()`语法的地方错了吗？

我希望它返回迄今为止的最大值`PAGE`。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-15T07:15:11.777

这应该是代码。

```
$result = mysql_query("SELECT MAX(PAGE) AS max_page FROM test");
$row = mysql_fetch_array($result);
echo $row["max_page"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T07:15:27.010

你不应该在那个查询周围加上引号`mysql_query`吗？我不知道 PHP 会对这样一个语法不充分的语句做什么，我原以为它会给你一个错误。

在任何情况下，聚合函数的列名可能与其所使用的列名不同（从内存中，DB2 给它一个与函数相似的名称，like`max_page_`或其他名称）。您可能希望通过强制使用以下名称来确保它具有正确的列名：

```
$result = mysql_query("SELECT MAX(PAGE) AS MAXPAGE FROM TEST");
$row = mysql_fetch_array($result);
echo $row["MAXPAGE"]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-30T20:26:58.013

试试下面的代码

```
$result = mysqli_query($con,"SELECT max(page2_content_id) AS max_page from page2_content_data");
$row = mysqli_fetch_array($result);
echo $row["max_page"]; 
```

其中`$con=new mysqli($server,$user,$password,$db_name);`page2_content_data是我的表，*page2_content_id**是*列名

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-19T09:18:24.147

```
$connect = mysqli_connect("localhost", "root", "", "carBid") or die("not connected");

//connection to database
$sql2 = "SELECT max(mybid) FROM `bid`";

//simle select statement with max function
$result_set2 = mysqli_query($connect,$sql2);

//query a result fetch
if ($result_set2) {
    $rowB = mysqli_fetch_array($result_set2);
    //feching a result in array format
    echo $rowB['max(mybid)'];
    //accessing array by name of column with max() function of mysql
} else {
    echo 'No Current Bid';
}
mysqli_close($connect); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-11T07:49:08.810

我在我的代码中使用了类似的东西；

```
$maxscore_query = mysql_query("SELECT MAX(`score`) FROM `allscores` WHERE`level`='$levelcode'");

echo mysql_result($maxscore_query, 0); 
```

这里的区别是使用 WHERE 来选择一个组。

而且`mysql_result($maxscore_query, 0);`对我来说更容易管理。

# php - 如何修复 PHP 中关于 stdClass 的此错误

> ID：12435344
> 
> 赞同：0
> 
> 时间：2012-09-15T07:10:55.843
> 
> 标签：php, json

这是我的代码：

```
$array = array(
"Birds" => 
array(
'group' => 1,
"Bird" => array(

array('id' => 1, 'img' => "img1.png", 'title' => "kate"),
array('id' => 2, 'img2' => "img2.png", 'title' => "mary")
)) );

$json = json_encode($array);
echo json_decode($json); 
```

输出是：

```
//JSON OUTPUT {"Birds":{"group":1,"Bird":[{"id":1,"img":"img1.png","title":"cardinal"},{"id":2,"img2":"img2.png","title":"bluejay"}]}} 
```

类 stdClass 的对象无法转换为字符串

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T07:17:47.127

尝试

```
var_dump($json); 
```

这允许您打印出对象和其他非原始类型的详细信息。

回显用于字符串 - 您的 json 解码字符串将是类型的对象`stdClass`

见`var_dump` [http://php.net/manual/en/function.var-dump.php](http://php.net/manual/en/function.var-dump.php)

见`echo` [http://php.net/manual/en/function.echo.php](http://php.net/manual/en/function.echo.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T07:18:47.003

用于`var_dump`查看变量 echo 将您的变量转换为字符串，而它是对象。您也可以添加第二个参数来`json_decode($data, true)`获取数组而不是对象，因为我认为这就是您想要的，因为输入是数组。

关于对象转换为字符串，您可以阅读[__toString](http://php.net/manual/en/language.oop5.magic.php#object.tostring)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T07:22:49.103

您必须将 json_decode 的第二个参数作为 true 传递，有关这些参数的更多信息，请访问：http: [//php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

所以你`echo json_decode($json);`应该改为：

```
print_r(json_decode($json, true)); 
```

`echo`更改为，`print_r`因为输出是数组而不是字符串...

# mercurial - 为什么我不能用 go get 获取 gotour？

> ID：12435348
> 
> 赞同：2
> 
> 时间：2012-09-15T07:11:26.663
> 
> 标签：mercurial, go

所以我决定我要学[围棋](http://golang.org/)，于是我开始了[巡回演出](http://tour.golang.org/)。在该游览的[第 3 阶段](http://tour.golang.org/#3)，他们建议使用 go 来签出游览的副本并在本地运行，因此我通过推荐的[安装程序包](http://code.google.com/p/go/downloads/list?q=OpSys-Darwin)安装了 go for mac 。

然后我有了`go`可用的命令，所以我`go get code.google.com/p/go-tour/gotour`按照旅行中的建议运行。

它在游览中说“然后运行生成的 gotour 可执行文件”。找不到可执行文件。

的输出`go get`是这样的：

```
package code.google.com/p/go-tour/gotour: Get https://code.google.com/p/go-tour/source/checkout?repo=: EOF 
```

我知道 EOF 意味着文件结束，但我不确定这是否是错误消息。

我已经`hg`安装了：

```
$ hg --version
Mercurial Distributed SCM (version 2.3.1) 
```

我设置了我的`$GOPATH`（并且文件没有出现在那里）：

```
echo $GOPATH
/Users/alex/.golib 
```

运行`go env`返回：

```
GOROOT="/usr/local/go"
GOBIN=""
GOARCH="386"
GOCHAR="8"
GOOS="darwin"
GOEXE=""
GOHOSTARCH="386"
GOHOSTOS="darwin"
GOTOOLDIR="/usr/local/go/pkg/tool/darwin_386"
GOGCCFLAGS="-g -O2 -fPIC -m32 -pthread -fno-common"
CGO_ENABLED="1" 
```

如果有帮助，我会用[鱼](http://ridiculousfish.com/shell/)作为我的外壳。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T08:45:59.267

a `go get`(相反`go get -u`) 将获取、编译*和安装*你想要的 go 模块`$GOPATH`。
可执行文件`gotour`将在`$GOPATH/bin`.

因此，请确保您有自己`$GOPATH/bin`的道路。

执行时，您应该看到：

```
2012/09/15 10:43:57 Serving content from $GOPATH/src/code.google.com/p/go-tour
2012/09/15 10:43:57 Open your web browser and visit http://127.0.0.1:3999/ 
```

注意（个人偏好）：我会使用比`/Users/alex/.golib`:更明显的路径，`/Users/alex/go`
`GOPATH`不仅仅是为了获取一些库，而是为了开发你所有的 go 项目。

# java - 日志框架和 logback.xml

> ID：12435349
> 
> 赞同：1
> 
> 时间：2012-09-15T07:11:37.807
> 
> 标签：java, eclipse, logback

在使用 Java 和 com.alvazan.orm.api 库创建示例时，禁止使用“System.out.println”。

学习的第一个也是最简单的 Java 练习之一是“Hello World”，也使用“System.out.println”（...也称为日志记录，或在控制台中找到返回的请求数据？）使用 Eclipse 时，日志记录通过修改 logback.xml 文件（ctrl-shift-R 并输入 logback.xml）关闭

从那里;
`<logger name="com.alvazan.orm" level="WARN"/>`
是要添加到 logback.xml 文件以便只显示启动日志的行。

此外，
`2012-09-14 22:05:08,067 com.alvazan.test.FactorySingleton createFactory`
`INFO: CREATING FACTORY FOR TESTS`
`2012-09-14 22:05:08,809 com.impetus.annovention.ClasspathDiscoverer processFile`
`INFO: adding folder to scan=file:/C:/AAROOT/workareas/area1/playorm/eclipsegen/`
还使用了另外两个日志，例如....。

*   只是澄清所有信息都输入到 logback.xml 文件中？
*   是否有不同的文件可供使用（除了 logback.xml）？
*   或者是最终用户使用，例如“com.alvazan.test.FactorySingleton createFactory”；和“com.impetus.annovention.ClasspathDiscoverer processFile”？
*   结束这个问题，前面的文件路径是否必要？

谢谢你的时间，
瑞恩

* * *

为了回应布雷特和其他信息/问题，

您的根记录器是如何配置的？您只是为 com.alvazan.orm 设置了 WARN，因此如果您的根记录器是 INFO，那么将记录 com.alvazan.test INFO。

嘿布雷特，谢谢你的回复......

至于根记录器配置，我相信该值设置为“INFO”。
![logback.xml](../Images/2ecb163b49aeaa8664519a29c323f2fa.png)
话虽如此，我想将“INFO”设置为“WARN”，以防止使用“System.out.println”
同样在上一个问题中，我提到：

> 2012-09-14 22:05:08,067 com.alvazan.test.FactorySingleton createFactory
> 信息：为测试创建工厂
> 2012-09-14 22:05:08,809 com.impetus.annovention.ClasspathDiscoverer processFile
> 信息：将文件夹添加到扫描 = 文件:/C:/AAROOT/workareas/area1/playorm/eclipsegen/

com.alvazan.test.FactorySingleton 和 com.impetus.annovention.ClasspathDiscoverer（同一个库中的不同包）

在同一个库中找到不同的位置...
![图书馆](../Images/b826f9a47b2544124b2def904f340e11.png)

我是否需要为其他文件或 *package 执行 logback 过程，或者在同一个库中执行一次，应该就足够了吗？还是我要调整附加值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T07:16:13.003

您的根记录器是如何配置的？您只是为 com.alvazan.orm 设置了 WARN，因此如果您的根记录器是 INFO，那么将记录 com.alvazan.test INFO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T11:35:18.397

1.  你的第一句话……

> “在使用 Java 和 com.alvazan.orm.api 库创建示例时，禁止使用“System.out.println”。”

一般来说，没有人使用 System.out.println。Hibernate 没有，JBoss 没有，tomcat 没有。它们都使用日志框架，因此您可以配置生产中的每个日志，并且每个使用 tomcat 或 jboss 或 hibernate 的公司都可以对其进行不同的配置。如果这些程序使用 System.out.println，客户将无法控制，并且您的服务器将始终运行缓慢，因为您从不想要“所有”日志记录，并且无法关闭 System.out.println ！！！！！！他们总是在。log.info 可以关闭和打开。

有关配置 logback 的最完整答案可以在他们的文档中找到

[http://logback.qos.ch/manual/configuration.html](http://logback.qos.ch/manual/configuration.html)

> 只是澄清所有信息都输入到 logback.xml 文件中？

我不确定你这个问题是什么意思。logback.xml 是一个名为 logback 的日志库的配置，您可以在上面的链接中找到它。

```
Is there a diffrent file to use(other than logback.xml)? 
```

logback 有其他选项，比如 groovy 文件来配置它，但是 playOrm 只使用 logback.xml，尽管任何客户端都可以决定他们使用什么配置文件，因为 playOrm 丢弃了在交付给其他项目时签入的 logback.xml 文件。

```
Or is the end-user to use, for instance, "com.alvazan.test.FactorySingleton createFactory"; 
and "com.impetus.annovention.ClasspathDiscoverer processFile"? 
```

我对这个问题感到非常困惑。最终用户不应该使用 FactorySingleton（直接或间接地，并且该类甚至不在 jar 中，因为它在测试包中）。最终用户将仅间接使用 ClasspathDiscoverer……事实上，最终用户甚至不知道这些类。

```
Finalizing this question, is the file path for the preceeding necessary? 
```

您是否想问 logback.xml 中的文件路径是否必要？如果你想了解更多关于 logback 是如何工作的，你需要阅读大量的文档。基本上，您可以执行 com.alvazan level=WARN 之类的操作来打开 com.alvazan 中的任何类。*** * 警告级别（这是递归的，适用于子、孙等）。ROOT 记录器也始终在 logback.xml 中定义，并且是所有包中所有类的级别，除非被覆盖。

是的，playorm 中的根记录器设置为警告。

在您显示的图片的底部（您的图片已被截断，因此不在该图片中），有一个“源”选项卡，您可能希望单击它以更好地查看 xml，它会更好地与 logback 的文档匹配好。这是我打赌您正在查看的文件的链接。

[https://github.com/deanhiller/playorm/blob/486079cfefbd2b4b79e99652b24c146572663dda/input/javasrc/logback.xml](https://github.com/deanhiller/playorm/blob/486079cfefbd2b4b79e99652b24c146572663dda/input/javasrc/logback.xml)

根记录器明确设置为信息，如果需要，可以设置为警告。

所以你想要什么。您是否希望这两个日志语句消失并被关闭？您是否希望关闭除 WARN 之外的所有日志语句？

如果您想在所有软件库中关闭所有功能，只需将根记录器更改为“WARN”。如果您只想关闭 FactorySingleton，您可以添加此行

```
<logger name="com.alvazan.test.FactorySingleton" level=""WARN"/> 
```

如果您希望关闭所有 com.alvazan 日志记录，而不仅仅是关闭 com.alvazan.orm 中的所有内容，因为您还希望关闭 com.alvazan.test，但您希望所有其他库仍处于打开状态（但始终希望 WARN 开启你通常应该想要的），那么你可以改变这个

```
<logger name="com.alvazan.orm" level=""WARN"/> 
```

改为以下

```
<logger name="com.alvazan" level=""WARN"/> 
```

了解 logback 的最佳选择是阅读 logback 文档。

# sql - 需要在 SQL 中动态更改 where 子句

> ID：12435351
> 
> 赞同：-1
> 
> 时间：2012-09-15T07:12:24.197
> 
> 标签：sql, sql-server, dynamic-sql

这是我的`Query`：

如果我知道 BusinessUnitID 我必须传入 where 子句，如下所示的查询，

```
select * from tblHRIMS_EmployeeDetail 
where nvrResignedStatus='No' and nvrBusinessUnit= 'BSU-001' 
```

此查询的结果是：500 行

如果我不知道 BusinessUnitId 我不需要传入 where 子句，如下所示的查询，

```
select * from tblHRIMS_EmployeeDetail 
where nvrResignedStatus='No' 
```

此查询的结果是：1500 行

如何`Where`根据给定的输入动态更改子句。

注意：不需要`Stored Procedure`，我只需要查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T07:20:38.733

像这样：

```
SELECT * 
FROM tblHRIMS_EmployeeDetail 
WHERE nvrResignedStatus = 'No'
 AND (@nvrBusinessUnit IS NULL OR nvrBusinessUnit = @nvrBusinessUnit) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T07:19:45.380

```
create procedure sp-name
@nvrBusinessUnit varchar(50)
as
begin
   select * from tblHRIMS_EmployeeDetail 
   where nvrResignedStatus='No' and nvrBusinessUnit= @nvrBusinessUnit 
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T07:20:06.577

```
declare @BusinessUnit varchar(50)

select @BusinessUnit = null 
-- or
select @BusinessUnit = 'bsu-001'

select * from tblHRIMS_EmployeeDetail  
where nvrResignedStatus='No' and nvrBusinessUnit= isnull(@BusinessUnit,nvrBusinessUnit) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T07:20:15.990

如果您的查询在存储过程中，并且假设您有 @nvrBusinessUnit 变量，您可以执行以下操作：

```
select * from tblHRIMS_EmployeeDetail 
where nvrResignedStatus='No' and nvrBusinessUnit= isnull(@nvrBusinessUnit,nvrBusinessUnit) 
```

如果这是您直接从应用程序查询的内容，那么您可以在那里构建字符串。

# microsoft-metro - CurrentAppSimulator.RequestProductPurchaseAsync 购买模拟

> ID：12435356
> 
> 赞同：2
> 
> 时间：2012-09-15T07:13:08.477
> 
> 标签：microsoft-metro, windows-store

我正在尝试为我的 Windows 应用商店应用（Metro 应用）实施应用内购买。[我在这里](http://msdn.microsoft.com/en-us/library/windows/apps/hh694067.aspx#Y1100)指的是代码示例，但是当我触发该`RequestProductPurchaseAsync`方法时，没有任何反应。

当我说什么都没有发生时，它实际上意味着什么都没有。没有返回结果（结果应该是收据，因为我通过了`true`for `includeReceipt`）。此外，当我重新检查`ProductLicences[string].IsActive`标志时，它总是会返回错误。

我该如何正确测试呢？非常感谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-25T02:58:08.797

确保应用程序 LicenseInformation.IsTrial 为 false，否则将无法正常工作。应用内产品购买要求应用未处于试用状态。在已发布的应用程序中，用户会看到一条错误消息，指出您无法在试用许可下进行应用内产品购买。模拟器在测试期间不会在应用内购买模拟对话框中显示此警告。

您可以修改模拟的初始状态（请参阅示例以了解如何执行此操作）或在模拟运行期间调用 RequestAppPurchaseAsync(false) 以获得应用程序的完整许可证，然后尝试购买产品。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T14:49:37.567

我们遇到并解决了类似的问题。使用**CurrentAppSimulator**效果很好，但使用 CurrentApp 调出真正的购买 UI**却**没有。

在生产设置中**，await CurrentApp.RequestProductPurchaseAsync(string,bool)**似乎永远不会返回（更具体地说，它只在用户登录后返回一次——后续调用没有返回）。

此外，在我们尝试在我们的应用程序中调出购买 UI 后，**其他**使用购买 UI 的应用程序也遇到了同样的问题——UI 永远不会显示。

这是问题代码：

```
 private async void CommandInvokedHandler(IUICommand command)
    {
        switch (command.Label)
        {
            case "Continue":

                licenseInformation = CurrentApp.LicenseInformation;

                if (!licenseInformation.ProductLicenses[Notes.ProductName].IsActive)
                {
                    try
                    {
                        await CurrentApp.RequestProductPurchaseAsync(Notes.ProductName, false);
                        // The code never steps over
                    } 
```

上面代码的一个比较明显的问题是，调出应用内购买 UI 的请求是在模式对话框命令处理程序中发出的。请求挂起——永不返回。不太明显的部分是它还会阻止来自我们的应用程序和所有其他应用程序的所有后续请求（直到用户的会话重新启动）。

在将“try”块移出命令处理程序并确保没有模态 UI 调用与购买请求竞争后，购买工作没有问题。

**编辑：您应该重新启动（或重新登录）来测试它。一旦购买 UI 中断，它将在您重新启动或重新登录之前不会显示。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-19T23:48:54.483

有一个细微的差别需要遵循：在提出任何购买请求之前，`CurrentAppSimulator`需要先打电话才能购买任何东西。`CurrentAppSimulator.RequestAppPurchaseAsync`调用返回的操作完成后，就可以调用成功`CurrentAppSimulator.RequestProductPurchaseAsync`了（除非在xml中将LicenseInformation元素中的IsTrial值设置为false）。

# c# - 如何在无法访问原始项目的情况下删除项目？

> ID：12435358
> 
> 赞同：0
> 
> 时间：2012-09-15T07:13:08.470
> 
> 标签：c#, asp.net, visual-studio-2010

我们有一个基于 Web 的多部分应用程序。对于每个客户，我们必须删除其中的一部分。如何在 Visual Studio 中管理项目？安装程序时必须包含吗？感谢那些分享他知识的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T10:19:09.447

我在这里得到的是，您希望每当新成员访问您的应用程序时，他们必须获得基于角色的 UI，他们被分配。那么在这方面，基于[角色和成员资格](http://www.codeproject.com/Articles/342061/Understanding-ASP-NET-Roles-and-Membership-A-Begin)的文章可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T14:18:01.603

我刚刚意识到我想我明白你在这里问什么。我猜你有一个完整的解决方案，比如说三个文件：`Water.apsx`, `Air.aspx`, `Land.aspx`. 您所说的客户是例如“船先生”、“直升机先生”和“飞机先生”。

我的假设是您希望为所有类型（即三个 ASPX 文件）开发一个全面覆盖的解决方案，但仅根据以下时间表交付它们：

1.  船先生-> Water.aspx
2.  直升机先生 -> Air.aspx
3.  Mr. Airplane -> Air.aspx 和 Land.aspx （因为飞机可以在地面滑行）

如果假设不正确，请立即停止阅读！:)

否则：您可以部署基于角色的解决方案。您会为您网站的访问用户分配一个角色（或实际上是一组角色）。然后，您在整个注册解决方案中开发的每个页面都将由许多可见的角色标记。

当所述用户登录时，分配给该特定帐户的一组角色将构成一个访问权限表，可用于允许/阻止他查看某些页面。

几周前我问了一个非常相似的问题（假设我猜对了你的意图），这就是我得到[的答案。](https://stackoverflow.com/questions/11922364/authorization-in-asp-net-for-accessing-a-set-of-subdirectories-depending-on-logi)

# ios - 如何使用块替换普通委托

> ID：12435363
> 
> 赞同：1
> 
> 时间：2012-09-15T07:14:17.643
> 
> 标签：ios, delegates, block

一类：

在以下方法中，我使用块来替换普通委托。可以吗？方法中的块`didSelectRowAtIndexPath`，我用它来替换普通委托，但是如果它运行，我单击表格单元格并且代码崩溃。

```
typedef void (^Block)(NSString *id,NSString *cityName);
@interface WLCCityListViewController : WLCBaseSquareViewController <UITableViewDataSource,UITableViewDelegate>
{   
    Block _block;
    id<commonDelegate>delegate;
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil Block:(Block)block
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        _block=block;
    }
    return self;
}        

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    WLCMainViewCityListData *data=[[self citylists]objectAtIndex:[indexPath section]];
    //    [self.delegate seleteCityID:[[data.cityList objectAtIndex:indexPath.row]objectForKey:@"id"]  CityName:[[data.cityList objectAtIndex:indexPath.row]objectForKey:@"name"]];
    NSString *a1 =[[data.cityList objectAtIndex:indexPath.row]objectForKey:@"id"];

    NSString *a2 =[[data.cityList objectAtIndex:indexPath.row]objectForKey:@"name"];
    _block(a1,a2);    
} 
```

B类：

```
@interface WLCMainViewController : WLCBaseSquareViewController
{
}
@implementation WLCMainViewController

-(void)viewDidLoad {
    WLCCityListViewController *tableViewController = [[[WLCCityListViewController alloc]initWithNibName:@"WLCCityListViewController" bundle:nil Block:^(NSString *id, NSString *cityName) {
        self.cityID=id;
        WLCMainViewModel *model=(WLCMainViewModel *)self.mainviewModel;
        model.cityID=id;
        [model sendRequest];
        [self.view startWaiting];
    }] autorelease];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-22T09:35:39.373

您可以将块视为 OC 对象。
一般来说，如果你需要保留块，使用 Block_copy 来做，不要忘记 Block_release 。
您的代码的问题是该块在您调用它时会自动释放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T03:56:25.360

```
_block = block; 
```

这条线导致崩溃。你只是分配一个块但不保留它。不要使用保留，只使用复制。声明一个复制属性。

```
@property (nonatomic, copy) Block _block; 
```

并使用二传手。或者只是像这样更改您的代码。

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil Block:  (Block)block
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    //_block=block;
    _block = block? [[block copy] autorelease]: nil;
}
return self; 
```

}

# php - 在 WordPress 中不检索全部数据的情况下检查瞬态是否存在

> ID：12435364
> 
> 赞同：0
> 
> 时间：2012-09-15T07:14:24.757
> 
> 标签：php, wordpress

有没有办法在检索整个保存的数据之前检查瞬态是否存在？

根据此页面[http://codex.wordpress.org/Transients_API](http://codex.wordpress.org/Transients_API)，检查保存的瞬态值是否成功检索，使用以下代码：

```
if ( false === ( $value = get_transient( 'value' ) ) ) {
     // this code runs when there is no valid transient set
} 
```

但这是假设检索到的数据将在可用时使用。当数百个网页被 Transient API 缓存并且只需要检查缓存是否仍然存在时，检索所有数据是不切实际的。我不确定它如何影响速度和内存，但一般来说，尺寸越大，它会变得越慢并消耗更多的内存。

所以我想知道是否有一种简单的方法可以只检查它是否已保存或不喜欢该`empty()`功能。

感谢你的信息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-23T16:56:29.890

这仅检索到期时间。

```
$your_transient = 'your_transient';
$data_timeout = get_option('_transient_timeout_' . $your_transient);
if ($data_timeout < time())
    echo 'it is expired.';
else
    echo 'there is a transient'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T07:31:32.463

if(!get_transient('value')) 应该完成这项工作，它检查瞬态是否存在或已过期。

# ember.js - 如何将 Subview 用于具有关系的模型

> ID：12435367
> 
> 赞同：0
> 
> 时间：2012-09-15T07:14:55.053
> 
> 标签：ember.js

How to best display model in Ember like Day 每天都包含比赛列表。所以模型与其他模型有很多关系。

在 HTML 中，我想像这样显示它

```
- Day 1
-- Race 1
-- Race 2
- Day 2
-- Race 3
-- Race 4 
```

我很有趣如何组织控制器和视图？

顺便说一句，在 Ember doc 中有所有关系的例子会很棒：一对一，一对多，多对多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T03:28:09.733

我只会有一系列的日子，然后每天都有一系列的种族。如果您在实际加载数据源方面也需要帮助，请告诉我。但其中的主要部分是模板。

```
# models

Race = Ember.Object.extend({
    raceNumber: null
})

Day = Ember.Object.extend({
    dayNumber: null
    races: []
})

# controller
daysController = Ember.View.create({

  init: ->
    @loadDays()

  content: null

  loadDays: ->
    # load your days and your races here
    content = YOUR DATA GOES HERE
})

# view

DayView = Ember.View.extend({

    templateName: 'days'

    daysBinding: daysController.content

})

# template

script(type='text/x-handlebars', data-template-name='days')
  ul
    {{#each day in view.days}}
      li day.dayNumber
      li ul
            {{each race in day.races}}
              li race.raceNumber
            {{/each}}
     {{/each}} 
```

# jquery - 使用 JQuery 隐藏表中除两行 (tr) 之外的所有行

> ID：12435371
> 
> 赞同：0
> 
> 时间：2012-09-15T07:15:20.130
> 
> 标签：jquery, html-table, tablerow

我有一张这样的桌子：

```
<table class="tableclass">
  <tbody>
    <tr>
       <th>..</th>
       <th>..</th>
    </tr>
    <tr class="odd">
       <td>..<</td>
       <td>..<</td>
    </tr> 
    <tr class="even">
       <td>..<</td>
       <td>..<</td>
    </tr> 
    <tr class="odd current">
       <td>..<</td>
       <td>..<</td>
    </tr> 
  </tbody>
</table> 
```

有许多具有奇数或偶数类的 tr，它们可以在具有当前类的 tr 之前或之后。

我想隐藏下面除两行之外的所有行：

1.  具有“当前”类的行 (tr)

2.  具有 <th> 的行 (tr)

换句话说，我希望桌子变成

```
<table class="tableclass">
  <tbody>
    <tr>
       <th>..</th>
       <th>..</th>
    </tr>
    <tr class="odd current">
       <td>..<</td>
       <td>..<</td>
    </tr> 
  </tbody>
</table> 
```

我尝试使用

```
$("table.tableclass tr:not(.current)").hide(); 
```

但它隐藏了内部也有 th 的 tr 。

有 AND 运算符吗？就像是

```
$("table.tableclass tr:not(.current) AND tr:not(WITH NO CLASS)").hide(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T07:21:47.730

您需要将选择器的范围限定为仅隐藏奇/偶类而不是当前类。所以你快到了。

```
$("table.tableclass tr.odd:not(.current), table.tableclass tr.even:not(.current)").hide() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T07:19:11.337

像这样试试

```
$("table .odd,.even").hide() 
```

或者你可以单独隐藏

```
$(".odd").hide();
$(".even").hide(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T07:53:38.987

为什么不更改`<tr><th></th></tr>`并将其`<thead><th></th></thead>`移至`<tbody></tbody>`? 无论如何，它应该在那里。

# android - 多个对象可以与单个 imageview XML 相关联吗？

> ID：12435373
> 
> 赞同：-1
> 
> 时间：2012-09-15T07:15:22.517
> 
> 标签：android, android-layout

假设我为一个图像创建了一个[XML](http://en.wikipedia.org/wiki/XML)，相同的 id 可以用于在屏幕中创建图像的多个实例吗？

也就是说，假设我想在屏幕上创建 10 个球，我为一个球定义 XML 就足够了，然后可以重复使用它来创建 10 个球吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T08:13:34.730

您可以根据需要多次放大同一视图。唯一的问题是所有视图都具有相同的 ID，如果它们属于同一个父视图，那么您只能`findViewById()`在代码中访问第一个视图。在这种情况下，您可能希望使用 ListView。

# java - Java 第一小程序

> ID：12435376
> 
> 赞同：0
> 
> 时间：2012-09-15T07:15:27.050
> 
> 标签：java, methods, applet, main

```
import java.awt.*;
import java.applet.*;
public class sample extends Applet
{
    String chr;
    public void init()
    {
            setBackground(Color.black);
            setForeground(Color.white);
            chr="Inside init() ---->";
    }
    public void start()
    {
            chr+="Inside start() ---->";
    }
    public void paint(Graphics g)
    {
            chr+="Inside paint() ---->";
            g.drawString(chr,10,0);
    }
} 
```

** 这是我的第一个小程序，当我在编译器上运行它时……它显示错误……“找不到主要方法……声明为……”我不明白这个问题，因为我读过那个小程序不需要 main()。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T07:18:23.737

尝试这个。

```
public static void main(String[] args){
        sample x = new sample();
        x.init();
    } 
```

此外，应用程序也可以通过这样做来运行

```
sample x = new sample(); 
```

它只显示一个空白小程序。那是你想要做的吗？

我尝试在 Eclipse 中运行它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-15T07:19:56.713

一个简单的谷歌搜索显示了这一点

[http://www.cs.colostate.edu/helpdocs/JavaInDOS.html](http://www.cs.colostate.edu/helpdocs/JavaInDOS.html)

# java - 如何使用 Java 创建 .dst 刺绣文件

> ID：12435384
> 
> 赞同：6
> 
> 时间：2012-09-15T07:16:25.167
> 
> 标签：java, algorithm, image-processing, encoding, dst-embroidery

我想使用 Java 创建一个 .dst 刺绣文件。有没有可用的支持库？或者是否可以使用 Java 将任何类型的图像文件转换为 .dst 刺绣文件格式？

任何人都可以建议任何算法，编码 - 解码方法等吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T21:10:39.570

我是 Embroidermodder 开发格式的开发人员（theJollySin 提到的链接）。我没有任何 Java 代码，但我可以向您指出该格式的一些初步文档（[http://www.achatina.de/sewing/main/TECHNICL.HTM](http://www.achatina.de/sewing/main/TECHNICL.HTM)）。

你想在 DST 中创建什么？我可以帮助您解决运行 Java 代码时遇到的任何问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T19:48:04.953

你的问题的简短回答是，不。目前没有流行的库用于`.dst`使用 Java 生成刺绣文件。*我的猜测是，尝试将*其他文件类型转换为这些`.dst`格式时，您会有更多的运气。那里唯一的选择（据我所知）是 Corel Draw。

最后，我能想到**的最好的解决方案是使用**[Tajima Ambaasador 网站](http://ambassador.pulsemicro.com/)。你必须注册，但我相信他们的大部分设计/夏令时服务都是免费的。

（在网上搜索了一番后，我还找到[了这个网站](http://embroidermodder.sourceforge.net/)，它有更多免费软件，如果你正在寻找信息，它似乎是最好的起点。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-12-16T12:24:05.900

是的。我已经为python（pyembroidery）编写了这样一个库，并将其转码为java。它将适用于 Android 和 Oracle Java，并充分充实了大多数主要刺绣格式的读写。

[https://github.com/EmbroidePy/EmbroideryIO](https://github.com/EmbroidePy/EmbroideryIO)

作为并行项目的一部分，我还完成了大量工作，为关于该主题的 wiki 记录各种格式。位于：

[https://edutechwiki.unige.ch/en/Embroidery_format](https://edutechwiki.unige.ch/en/Embroidery_format)

其中还包含 DST 文件格式的所有已知技术细节：

[https://edutechwiki.unige.ch/en/Embroidery_format_DST](https://edutechwiki.unige.ch/en/Embroidery_format_DST)

* * *

至于问题的第二部分，刺绣文件是类似矢量的文件，它提供了要向刺绣机发出的一系列命令。您不能直接将基于光栅的图像文件转换为刺绣，因为像素信息不会直接转换为任何种类的刺绣机命令指令结构。

# javascript - 将日期时间转换为毫秒

> ID：12435403
> 
> 赞同：-1
> 
> 时间：2012-09-15T07:19:26.143
> 
> 标签：javascript, asp.net-mvc

我想将 ASP.NET MVC 中的日期时间变量转换为毫秒，例如像这样：

'1288323623006'

其中 '1288323623006' 在 javascript 中使用这种格式 'yyyy-MM-dd HH:mm:ss Z' 表示' 2010-10-29 07:10:23 -3.530'。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T10:24:21.987

在 javascript`getTime()`中返回自 1970/01/01 以来的毫秒数。

此链接是您的问题[DateTime to javascript date的答案](https://stackoverflow.com/questions/2404247/datetime-to-javascript-date)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-15T07:23:49.303

var d = new Date(你的日期); 然后您可以在 d 上应用所有日期功能，这应该会有所帮助。 [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)

您想将毫秒转换为日期还是将日期转换为毫秒？

# iphone - 在大图像分辨率上执行时出现 EXC_BAD_ACCESS 错误

> ID：12435404
> 
> 赞同：2
> 
> 时间：2012-09-15T07:19:44.023
> 
> 标签：iphone, objective-c, ios, xcode, recursion

我已经在图像上实现了一个递归函数，它调用它的相邻像素直到条件最终确定，我已经能够成功运行此代码，达到 200x200 图像分辨率，但是当图像大小增加时，它将`EXC_BAD_ACCESS`在以下堆栈行**___lldb_unnamed_function782$处因错误而崩溃$libicucore.A.dylib**。我检查了我的代码并且无法检测到任何错误，可能是由于递归回调函数太多。如果有人有任何想法，请告诉我。

这是我的递归代码：

```
 -(void)magicImageContext:(unsigned char*)data point:(CGPoint)point red:(unsigned char)red green:(unsigned char)green blue:(unsigned char)blue bytesPerPixel:(NSInteger)bytesPerPixel bytesPerRow:(NSInteger)bytesPerRow size:(long long int)size width:(NSInteger)width height:(NSInteger)height maskedData:(unsigned char*)masked_data{
for(int x = point.x-1; x<=point.x+1; x++){
    for(int y = point.y-1; y<=point.y+1; y++){
        if((x == point.x) && (y == point.y)) {
        }
        else if((x<0) || (y<0) || (x>=width) || (y>=height)){
        }
        else if([self checkPixelMarkedAtPoint:CGPointMake(x, y) data:masked_data]){
            int byteIndex = (bytesPerRow * y) + x* bytesPerPixel;
            CGFloat red2   = (data[byteIndex] );
            CGFloat green2 = (data[byteIndex + 1]);
            CGFloat blue2  = (data[byteIndex + 2]);
            if([self checkColorThresholdWithRed1:red green1:green blue1:blue red2:red2 green2:green2 blue2:blue2]){
                NSLog(@"x= %d, y= %d %d",x,y,byteIndex);
                //mark pixels on masked image
                [self changemaskedData:CGPointMake(x,y) data:masked_data];
                [self magicImageContext:data point:CGPointMake(x, y) red:red green:green blue:blue bytesPerPixel:bytesPerPixel bytesPerRow:bytesPerRow size:size width:width height:height maskedData:masked_data];                }
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T07:23:20.570

如果您在图像的所有像素上使用递归，那么输入大图像肯定会导致堆栈溢出。

考虑重写您的函数以使用显式堆栈和循环以避免递归。这也可以提高应用程序的性能，因为它避免了相对昂贵的函数调用。

# jquery - 如何使用 jQuery 选择器查找与给定 div 匹配的所有元素？

> ID：12435408
> 
> 赞同：1
> 
> 时间：2012-09-15T07:19:56.737
> 
> 标签：jquery, selector

我知道如何`id1`使用 jQuery:查找带有 id 的文档的所有元素`$("#id1")`。

有没有类似的方法来查找给定 div 中的所有元素 id `id1`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T07:21:44.673

如果您只想在 #test 内部找到 #id1，那么您可以使用以下命令：

```
$("#test #id1") 
```

或这个：

```
$("#test").find("#id1") 
```

这些在结构上是相同的。事实上，第一个最终在内部做与第二个基本相同的事情。

请记住，您只能在给定文档中出现任何 id 值，但有时您只想查找`#id1`它是否在`#test`其中，这将为您做到这一点。

如果你只想要#id1，那么你不需要绑定范围（因为只能有一个）所以你可以这样做，这也快得多：

```
$("#id1") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T07:22:11.727

假设您的测试 div 的 id 为“test”，

你可以做

```
$("#test #id1") 
```

或者

```
$('#test').find("#id1") 
```

但两者都没有真正意义，因为您必须在文档中**只有一个**具有给定 id 的元素。因此，假设您的文档是正确的，两者都等同于`$("#id1")`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T09:14:53.483

对于通过 id 选择元素，id 选择器的性能足够好，这`$('#id')`通常是您所需要的。但是，如果您已经有对`#test` `<div>`存储在变量中的引用，则可以为 jQuery 选择器[提供上下文](http://api.jquery.com/jQuery/#selector-context)，这将减少搜索完成的工作。

*请注意，这仅在您已经拥有对 的引用* 时才有用`#test`，否则您最终会进行两次搜索。

用法：

```
var $testDiv = $('#test');
// ...
var $id1Div = $('#id1', $testDiv) 
```

如链接中所述，它在计算上等同于执行以下操作：

```
$testDiv.find('#id1') 
```

由于 html ID 是唯一的，并且搜索是使用浏览器的 native 实现的`document.getElementById`，因此在这里提供上下文并不是特别有用。但对于其他选择器，它可能非常有用。

# javascript - 如何链接另一个网站以在新标签中单击

> ID：12435417
> 
> 赞同：-2
> 
> 时间：2012-09-15T07:20:42.847
> 
> 标签：javascript, html

我需要帮助链接另一个网站，只要我点击我的页面，该链接应该在一个新标签中打开，该标签应该每 24 小时工作一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T07:38:04.780

在所有**a**元素上添加**target="_blank" 。**

 **```
<a href="link" target="_blank">Click Here</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T07:26:15.563

我可以帮助你完成第一部分：

```
function open_link(evt) {
    window.open("http://your.site.com");
}
document.getElementsByTagName("body")[0].onclick = open_link; 
```

我无法帮助您处理每 24 小时一次的部分。也许其他一些可以？**

# sass - 浏览器中如何显示 SASS 错误消息？

> ID：12435423
> 
> 赞同：3
> 
> 时间：2012-09-15T07:21:36.233
> 
> 标签：sass

在 SASS 中，当出现错误时，它会在浏览器的页面顶部显示一条消息。它的一个样本在附加的图像中。

该文本不可选择。它不是图像。它不会出现在查看源代码中。它在 Firebug 中不可见。

该错误文本是如何呈现的？

![在此处输入图像描述](../Images/2a77d45a94d8d74b724fae7979af0f65.png)

**更新**

感谢@FluffyJack，我调查并发现在`body:before`包含语法错误的CSS文件中使用了a。Github 目前不合作，但我追踪了错误消息在 SASS 中的呈现位置，`vendor/sass/lib/sass/error.rb`其中包含：

```
body:before {
  white-space: pre;
  font-family: monospace;
  content: "#{header.gsub('"', '\"').gsub("\n", '\\A ')}"; }
END 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T07:25:53.797

我认为它使用的是内容属性。

就像是

```
html:before {
  content: "Syntax error..."
} 
```

检查CSS。

# java - Java -- 模式 -- Matcher.group()？

> ID：12435426
> 
> 赞同：1
> 
> 时间：2012-09-15T07:21:52.037
> 
> 标签：java, design-patterns, matcher

所以我有一个文档和一个指定的 n-gram 目标字符串。我正在尝试查找所有出现的目标字符串的索引。

```
final Pattern WORD_PATTERN = Pattern.compile("\\w+");
Matcher matcher = WORD_PATTERN.matcher("the lazy dog, jumps, the lazy dog."); 
```

所以字符串是“the lazy dog, jumps, the lazy dog”。

假设我的目标 n-gram 是“懒惰的”。我基本上按如下方式“迭代”整个字符串，将“n”个单词添加到链表 currentNGram。如果 currentNGram 中的所有单词都与目标 n-gram 匹配，我会保存索引。否则，我删除链表的第一个元素，并附加到输入字符串中的下一个单词（例如，检查文档中的下一个连续 n-gram）。

```
while (matcher.find()) {
    while (currentNGram.size() < lengthOfTargetNTuple) { 
        currentNGram.add(matcher.group().toLowerCase());
            System.out.println(currentNGram.getLast());
    }
} 
```

所以这一切都很好，但我的下一个问题是我必须再次“迭代”文档，并找到每个 n-gram 到最近的目标 n-gram 的距离。所以我采取完全相同的方法。除了这一次，当我重新初始化匹配器并按如下方式运行循环时，

```
 while (matcher.find()) {
        while (currentGram.size() < lengthOfTargetNTuple) {
            currentGram.add(matcher.group().toLowerCase());
                    System.out.println(currentGram.printLast()) // Psuedocode
        } 
```

它打印单词“the”7次而不是打印“the”“lazy”“dog”“jumps”等。但是，

```
while (matcher.find()) {
        while (currentGram.size() < lengthOfTargetNTuple) {
            currentGram.add(matcher.group().toLowerCase());
        }
        System.out.println(matcher.group()); // Prints words in order, correctly
} 
```

为什么是这样？为什么 matcher.group() 方法在第一个问题中以正确的顺序调用打印出的单词，而不是第二个问题？任何方向将不胜感激；我知道这是一个很长的帖子，对不起。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T07:37:48.663

首先，一些基础知识。让我们看看有什么[`Matcher.find`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#find%28%29)...

> 尝试查找与模式匹配的输入序列的下一个子序列。此方法在此匹配器区域的开头开始，或者，如果该方法的先前调用成功并且匹配器此后尚未重置，则从前一个匹配不匹配的第一个字符开始。

接下来我们一起来看看[`Matcher.group`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#group%28%29)

> 返回与前一个匹配项匹配的输入子序列。

* * *

现在我们了解了它们的工作原理，让我们看看下面的循环做了什么。

```
while (matcher.find()) {
    while (currentGram.size() < lengthOfTargetNTuple) {
        currentGram.add(matcher.group().toLowerCase());
                System.out.println(currentGram.printLast()) // Psuedocode
    }
} 
```

您`currentGram.printLast`每次通话都要打印几次`matcher.find`——准确地说，是`lengthOfTargetNTuple`多次。`currentGram.printLast`必须导致刚刚添加的内容 - `matcher.group().toLowerCase()`。因为我们只`matcher.find`为整个循环调用了一次，所以这个值不会改变。

```
while (matcher.find()) {
    while (currentGram.size() < lengthOfTargetNTuple) {
        currentGram.add(matcher.group().toLowerCase());
    }
    System.out.println(matcher.group()); // Prints words in order, correctly
} 
```

但是，在这里，您每次调用`matcher.group`只打印一次。`match.find`这意味着您只打印每个匹配的子序列*一次*，而不是`lengthOfTargetNTuple`多次。

# javascript - 防止随机操作在Javascript中两次返回相同的值

> ID：12435428
> 
> 赞同：1
> 
> 时间：2012-09-15T07:22:17.237
> 
> 标签：javascript, random

我对编码非常陌生，并且正在从事我的第一个 Javascript 项目。我正在尝试创建一个小的随机字符生成器，​​它从两个数组中随机选择一个设置和字符原型。我的问题是我不断重复，可能是由于列表很小。

```
<html>
<head>
<script type="text/javascript">

  var setting=new Array('Steampunk',
                        'Fuedal Japanese',
                        'Post Apocalyptic',
                        'Horror',
                        'Fantasy',
                        'Cyberpunk',
                        'Western',
                        'Pulp',
                        'Military',
                        'Space Opera',
                        'Medieval',
                        'Ancient',
                        'Mythological',
                        'Urban',
                        'Trans-Humanist',
                        'Renaissance',
                        'Dystopian',
                        'Retro Futuristic',
                        'Nordic',
                        'Colonial');  

  var Archetype=new Array('Ninja',
                          'Samurai',
                          'Viking',
                          'Cowboy',
                          'Rogue',
                          'Wizard',
                          'Wrestler / Luchador',
                          'Knight',
                          'Scientist',
                          'Gadgeteer',
                          'Druid',
                          'Performer',
                          'Pirate',
                          'Alien',
                          'Superhero / Villain',
                          'Robot',
                          'Soldier',
                          'Vampire',
                          'Werewolf',
                          'Bounty Hunter');

  function resetSettingAndArchetype()
  {
    var whichsetting = Math.floor(Math.random()*(setting.length));
    var whicharchetype = Math.floor(Math.random()*(Archetype.length)); 
```

如何让随机操作永远不会返回相同的值两次？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T07:27:15.137

您可以对数组进行洗牌（例如，使用[Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)），然后在洗牌后的数组上一个接一个地进行迭代。当你到达一个结束时，只需再次洗牌。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T09:48:28.447

I would create an additional index of the array that I could loop over to get references. This will create a constant random order of all elements in the array, that when having traversed all elements would reset to the first one and traverse again in the same order.

This method is compatible with a shuffled copy as well, such as is described in any other answer. And you can use a better shuffling algorithm, this one is naive. Since your arrays are so small however, the performance increase will be minimal. If you want to make a shuffled copy you won't need to map the index, you only need to create the copy when creating the object.

This code is not tested. I'm not sure about the interval of `Math.random`, but I'm assuming `0 < x < 1` here:

```
var RandomWalk = function(items) {
  var self = this;
  if (!items.length) {
    // throw some error
  }

  this.index = 0;
  this.index_map = (function(items) {
    var map = [], i = 0;
    while(map.length < items.length) {
      i = Math.floor(Math.random() * items.length);
      if (map.indexOf(i) === -1) {
        map.push(i);
      }
    }
    return map;
  })(items); // Note that this function is evaluated, index_map is not a function
  this.index_max = this.index_map.length - 1;
  this.next = function() {
    var r = self.index_map[self.index];
    if (self.index == self.index_max) {
      self.index = 0;
    } else {
      self.index += 1;
    }
    return r;
  }
  return this;
} 
```

Then you'd do something like this:

```
// define settings and archetype
var archetype_walk = new RandomWalk(archetype);
function resetSettingAndArchetype()
{
  ...
  var arch_index = archetype_walk.next(),
      arch = archetypes[arch_index]
  // arch is in ['Ninja', 'Samurai', 'Druid' ...] 
```

By the way, 'Archetype' might be a bad variable name. It looks like a function. I use 'archetype' here.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T08:39:44.373

您可以使用以下方法进行洗牌：

```
function shuffle(o){ //v1.0
    for(var j, x, i = o.length; i; j = parseInt(Math.random() * i), x = o[--i], o[i] = o[j], o[j] = x);
    return o;
};
shuffle(setting);
 shuffle(Archetype); 
```

[参考](http://dzone.com/snippets/array-shuffle-javascript)

# safari - Safari 扩展和下载链接

> ID：12435430
> 
> 赞同：1
> 
> 时间：2012-09-15T07:22:43.423
> 
> 标签：safari, safari-extension

我正在开发一个 safari 扩展。我在其中包含了一个启动脚本，但它不适用于下载链接。例如，如果我导航到 www.example.com/example.zip 脚本不会被调用。我想知道是否有可能让它与下载链接一起使用？

# android - 手机中的zigbee硬件

> ID：12435433
> 
> 赞同：2
> 
> 时间：2012-09-15T07:23:05.420
> 
> 标签：android, iphone, device-driver, mobile-phones, zigbee

手机是否需要有专用的 Zigbee 芯片才能成为 Zigbee 节点（协调器/路由器/端节点）？

如果是，那么，我想它也应该有一个驱动模块？

我不知道手机的确切硬件结构；在笔记本电脑中，我们有一个带有自己的天线和驱动程序的 wlan 卡；手机呢？有单独的 wifi、gps 和蓝牙芯片，每个芯片都有单独的驱动模块，并且都共享相同的天线？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T11:22:49.097

是的，即使几种无线技术（WIFI、蓝牙、ZigBee）可以在相同的 2.4 GHz 频率下工作，您仍然需要专门支持该技术的收发器（发射器和接收器芯片）。对于 ZigBee，您需要一个符合 IEEE-802.15.4 标准的收发器芯片。

在一部手机中包含一个 ZigBee 模块的想法非常有趣。但是，恐怕您不会找到[很多这样的手机](http://www.nfcworld.com/2012/02/26/313800/taztag-unveils-first-android-phone-with-nfc-and-zigbee/ "这个")。这种情况将来会改变吗？我没有任何线索。

你能给我们更多关于你的项目的信息吗？在这类项目中，您通常不需要将手机加入 ZigBee 网络。协调器可以连接到一台普通 PC，您可以通过 Web 应用程序提供对 ZigBee 网络的访问。从这个应用程序中，您可以提供网络中收集的所有数据，查看节点的状态，甚至发送命令。

另一种可能性，是在两种技术之间建立一个网桥，这样您就可以通过 USB、WIFI、蓝牙、Android 端口将 ZigBee 芯片插入您的手机……但在这种情况下，除非您找到最终产品，否则您将必须组装一些芯片并编写一些代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T22:43:34.450

此时，为了支持 ZigBee，硬件将需要单独的 IEEE 802.15.4 收发器芯片（802.15.4 是 ZigBee 使用的底层协议）。操作 ZigBee 最常用的频率是 WiFi 和蓝牙通用的 2.4GHz 频段，所以理论上一个芯片和天线可以提供统一的 WiFi + 蓝牙 + 802.15.4 ......但据我所知，没有任何内容市场（还）。然而，有统一的蓝牙+Wifi 芯片（例如 RaLink RT3592BC8）。GPS 始终使用单独的天线/芯片，因为它在不同的频段上运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-07T13:29:30.873

我在这里回答了类似的问题： [https ://stackoverflow.com/a/16985211/1752548](https://stackoverflow.com/a/16985211/1752548)

这是关于在 Android 设备中使用 SDIO Zigbee 卡。我还没有设法让它们工作，但它看起来很有希望。希望能帮助到你

# c# - 如何更正 MapHttpRoute

> ID：12435438
> 
> 赞同：1
> 
> 时间：2012-09-15T07:23:27.750
> 
> 标签：c#, asp.net-web-api, asp.net-routing

我需要使用符合此类 URI 的方法之一创建休息风格的 Web 服务。

> api/v1/{controller}/{device}/registrations/{id}

```
 public class DevicesController : ApiController
    {
        public void Get(string device, string id)
        {
        }
    } 
```

好像我错过了一些东西，关于如何处理这个的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T07:35:29.643

想通了，之前一定是做错了什么。这似乎工作正常。

```
routes.MapHttpRoute("PassApi",
"api/v1/{controller}/{device}/registrations/{id}",
new { controller = "Devices" }); 
```

# c# - HTMLAgilityPack - 从节点集合中选择节点 - 而不是 documentNode

> ID：12435441
> 
> 赞同：2
> 
> 时间：2012-09-15T07:24:00.353
> 
> 标签：c#, html-agility-pack

我的代码如下所示：

```
var matchTableHtml =
            loginPage.DocumentNode
            .SelectNodes("//table[@id='uc_refereeMatchProgram_dgMatchCategory1']
                          //tr[@class!='DataGridHeaderStyle']"); 
```

这将返回一个节点集合 - 正如预期的那样，所以没问题 - 但是！！！

```
var testing = matchTableHtml.Descendants()
            .Select(x => new Match()
                             {
                                 Row = x.SelectSingleNode("//td/a[position()=1]")
                                       .InnerText
                             }); 
```

这里“x”从 documentNode 而不是从“matchTableHtml.Descendants”集合返回节点。有谁知道为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T08:01:23.677

好的 - 解决方案非常简单......我不是从“当前节点”开始，但以 // 开头的 XPath 当然是相对于根节点的。

简单的解决方案 - 添加一个点 - 这表示我们从当前 ('//' ==> './/') 开始：

```
Row = x.SelectSingleNode(".//td/a[position()=1]")
                                   .InnerText 
```

# php - 为什么 $_REQUEST 变量被认为是不安全的？

> ID：12435448
> 
> 赞同：0
> 
> 时间：2012-09-15T07:25:34.170
> 
> 标签：php, security

> **可能重复：**
> [$_REQUEST 是否存在安全问题？](https://stackoverflow.com/questions/1149118/does-request-have-security-problem)

有人对此有可验证的引用吗？安全漏洞的环形交叉路口是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T07:35:57.937

这是一个小帖子，您可以阅读其中的原因：

[http://devlog.info/2010/02/04/why-php-request-array-is-dangerous/](http://devlog.info/2010/02/04/why-php-request-array-is-dangerous/)

从该页面：

> **问题：**为什么 $_REQUEST 不安全？
> 
> **回答：**因为它结合了 COOKIE 以及 GET 和 POST，并且 COOKIE 数据始终优先，从而为危险的“粘性”变量创造了可能性。

# spring - 使用 spring 3.0.0 和 tomcat 提供静态资源

> ID：12435450
> 
> 赞同：1
> 
> 时间：2012-09-15T07:25:47.700
> 
> 标签：spring, tomcat, spring-mvc, tomcat6, spring-webflow

我需要公开一些静态内容（wsdl 所需的 xsd 文件）。我不能使用 mvn:resources 因为它在 Spring 3.0.0 中不可用

我不知道静态内容应该去哪里。希望可以有人帮帮我。

在我的 web.xml 我有

```
 <servlet>
        <servlet-name>Resources</servlet-name>
        <servlet-class>org.springframework.web.servlet.ResourceServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>Resources</servlet-name>
        <url-pattern>/resources/*</url-pattern>
    </servlet-mapping> 
```

然后在 webapp 目录中，我添加了一个包含静态文件的资源目录。

```
% ls webapp 
index.jsp  META-INF  resources  WEB-INF 
```

有人可以告诉我静态内容应该去哪里。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T09:22:13.833

不要忘记这一点：

```
<!-- Allows for mapping the DispatcherServlet to "/" by forwarding static resource 
requests to the container's default Servlet -->
<mvc:default-servlet-handler/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T08:27:13.327

你写了

> 我不能使用 mvn:resources 因为它在 Spring 3.0.0 中不可用

~~这是完全错误的！~~

`mvn:resources`在版本~~3.0.0~~ 3.0.4的 Spring mvc 命名空间中可用

见xsd：[http ://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd](http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd)

# c# - 如何在 Windows 应用商店应用中显示消息？

> ID：12435457
> 
> 赞同：27
> 
> 时间：2012-09-15T07:26:32.363
> 
> 标签：c#, windows-8

如何使用 c# 在 windows 8 应用程序中显示消息框，例如在 windows phone 7 中调用 MessageBox.Show()？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-03-13T07:22:38.097

```
 MessageDialog msgDialog = new MessageDialog("Your message", "Your title");

   //OK Button
   UICommand okBtn = new UICommand("OK");
   okBtn.Invoked = OkBtnClick;
   msgDialog.Commands.Add(okBtn);

   //Cancel Button
   UICommand cancelBtn = new UICommand("Cancel");
   cancelBtn.Invoked = CancelBtnClick;
   msgDialog.Commands.Add(cancelBtn);

   //Show message
   msgDialog.ShowAsync(); 
```

你的回电

```
private void CancelBtnClick(IUICommand command)
{
}

private void OkBtnClick(IUICommand command)
{
} 
```

**PS您可以按照[本教程](http://diptimayapatra.wordpress.com/2012/09/05/message-dialog-in-windows-8-xaml-application-windows-store/)了解更多信息。**

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-09-15T07:28:50.483

[MessageDialog 类](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.popups.messagedialog.aspx)应该满足您的需要。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-07-27T14:48:54.897

我更简单的方法，对于确认类型的消息框：

```
 var dlg = new MessageDialog("Are you sure?");
  dlg.Commands.Add(new UICommand("Yes", null, "YES"));
  dlg.Commands.Add(new UICommand("No", null, "NO"));
  var op = await dlg.ShowAsync();
  if ((string)op.Id == "YES")
  {
    //Do something
  } 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-05-22T18:32:35.630

为了更简单的方法，只显示消息文本和确定按钮。使用`Windows.UI.Popups`命名空间。创建一个方法`messagebox()`，该方法应该是

```
using Windows.UI.Popups;
protected async void messageBox(string msg)
{
      var msgDlg = new Windows.UI.Popups.MessageDialog(msg);
      msgDlg.DefaultCommandIndex = 1;
      await msgDlg.ShowAsync();
} 
```

然后在您的代码中调用此方法，例如

```
messageBox("Unexpected error held"); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-07-29T16:03:26.583

补充花絮：

它出现在现代 Windows 应用程序中，在您的应用程序发出 Window.Current.Active() 调用之前不会显示 MessageDialog，这通常发生在应用程序类的 OnLaunched() 方法中。如果您尝试使用 MessageDialog 来显示启动异常之类的内容，请记住这一点。

我的测试表明 MessageDialog.ShowAsync() 实际上可能正在等待，但如果 Window.Current.Active() 尚未被调用，则不会显示对话框，因此从代码执行的角度来看，它看起来一切正常但没有对话框被陈列。

如果目标是在启动期间显示异常，我可以想到两个选项（可能还有更多）。

1.  捕获异常信息，然后等待显示，直到 Window.Current.Activate() 之后。如果异常是这样的，应用程序可以从中恢复并继续启动，这可以工作。例如，如果在恢复保存的状态信息时出现错误，应用程序可能希望向用户报告该错误，然后继续启动，就好像没有保存状态一样。

2.  如果情况是应用程序正在举手并打算终止，但想让用户知道发生了什么，那么另一种解决方案可能是拥有一个单独的专用代码块/方法，将新的干净框架插入 Windows .Current.Content，使用 Windows.Current.Activate() 激活它，然后调用 MessageDialog.ShowAsync()。我没有尝试过这种方法，所以我不确定是否还需要满足其他条件，比如可能将页面加载到框架中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-21T19:55:46.923

用于页面，如：

```
private async void AppBarButton_Click(object sender, RoutedEventArgs e)
{
    Windows.UI.Popups.MessageDialog a = new Windows.UI.Popups.MessageDialog("hello this is awth");
    await a.ShowAsync();
} 
```

# html - 我可以控制颜色/字体的 TextArea 控件

> ID：12435460
> 
> 赞同：0
> 
> 时间：2012-09-15T07:26:53.877
> 
> 标签：html, user-controls, textarea

我目前在页面上有一个 textarea 控件。用户将在控件中输入文本。控件的内容是定制代码。

我希望（从代码中）能够将格式（颜色/粗体/斜体/字体）应用于文本的不同部分——非常像 Visual Studio。

像 Visual Studio 和任何其他 IDE 一样，我不希望用户控制 textarea 的格式——我看到的大多数编辑器都提供了一个用户可以更改样式的控件。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T07:43:41.160

我猜你正在谈论一个文本区域的所见即所得编辑器。您应该尝试使用[TinyMCE](http://www.tinymce.com/)或[CKEditor](http://ckeditor.com/)。这些编辑器使用名为“contentEditable”的 html 属性。因此，通过将此属性设置为 true （例如`<p contentEditable="true"></p>`），他们可以使用内容可编辑的 javascript 方法对其进行编辑，当然提供了一个调用 javascript 的接口。[你可以在 WebMonkey 上](http://www.webmonkey.com/2008/07/make_any_content_editable_with_javascript/)阅读一些关于`contentEditable`和类似的属性。`designMode`

# jquery - 如何在div中加载外部html

> ID：12435463
> 
> 赞同：-1
> 
> 时间：2012-09-15T07:27:18.443
> 
> 标签：jquery

```
<div id="feeds"></div>
<script>
$("#feeds").load("test2.html");
</script> 
```

这是我的代码，请告诉我我做错了什么

问候桑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T07:29:22.687

添加一些

```
$(document).ready(function(){
    $("#feeds").load("test2.html");
}) 
```

# c++ - 合并排序算法建议

> ID：12435464
> 
> 赞同：2
> 
> 时间：2012-09-15T07:27:25.450
> 
> 标签：c++, algorithm, merge

我制作了一个使用合并排序算法对列表进行排序的程序。

问题是我认为它应该工作但它不工作，合并函数返回一个作为参数发送的数组。你能不能看看我写的代码，告诉我哪里出了问题，以及如何改进它。

谢谢

```
void merge_sort(int *niz, int low, int medium, int high) {

int *niz2 = new int[high-low];

int bottom = low;
int top = medium + 1;

for (int f1=low; f1<high-low; f1++) {
    if (low > medium) {
        niz2[f1] = niz[top++];
    }
    else if (top > high) {
        niz2[f1] = niz[bottom++];
    }
    else if (niz[bottom] < niz[top]) {
        niz2[f1] = niz[bottom++];
    }
    else {
        niz2[f1] = niz[top++];
    }
}
niz = niz2;
}

void merge(int *niz, int low, int high) {
if (low < high) {
    int medium = (high+low)/2;
    merge(niz, low, medium);
    merge(niz, medium+1, high);
    merge_sort(niz, low, medium, high);        
}
} 
```

程序的输出：

```
3 5 2 3 4 9 5 2 7 10 
3 5 2 3 4 9 5 2 7 10 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T07:31:26.410

您正在按值传递指针，因此您分配给`niz`内部函数的值在调用者函数中不可见。

您的签名应该是 `void merge(int niz[], int low, int medium, int high)`和 `void merge_sort(int niz[], int low, int high)`。

您在底部`merge`命名`merge_sort`了 ，那么您应该将内容从 复制回`niz2`，`niz`而不是`niz = niz2`。

**编辑 - ** 你也得到了`merge`错误的功能（你已经命名`merge_sort`）。如果说你用`low = 100`, `medium = 120`,调用函数`high = 140`。

然后`for (int f1=low; f1<high-low; f1++)`永远不会循环。

应该是`for (int f1=0; f1<high-low; f1++)`。上述错误的另一个后果是`SIGSGV`，因为您将访问，`niz2`超出范围（对于给定的示例）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-15T07:36:39.543

我认为这段代码有很多错误，但最大的错误是

```
niz = niz2; 
```

在这里，您试图将`niz2`数组复制回`niz`，但它没有这样做，它只是复制指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T07:37:34.583

我看到您正在尝试将内容分配`niz2`给`niz`via `niz = niz2;` 。这是不正确的，因为`niz`它是按值传递的指针，并且`niz2`是指向数组的本地指针。

如果你想复制`niz2`给`niz`你，要么需要一个循环`for (int i = low; i < high; i++) niz[i] = niz2[i]`，使用像 memcpy 这样的 api 函数来覆盖输入数组，或者如果你试图重定向`int* niz`指针以使用新创建的`niz2`数组，那么你需要将输入传递为一个指向指针的指针然后直接修改它，例如`merge_sort(int** niz, int low...)`并通过`merge_sort(&niz, 0, 20);`. 并不是说如果你修改输入指针指向一个新数组，你应该先删除旧的，例如`delete [] *niz; *niz = niz2;`

该语句通过参数列表中的临时指针`niz = niz2;`复制指向的地址。当您将指针传递给接收（例如）的函数时，您发送的指针将被复制到临时变量/指针中。Using告诉它它正在使用“指向和 int 的指针的地址”，而不仅仅是“int 的地址”。在这种情况下，您可以通过类似or的语句进行重定向。要从源头获取实际数据或数据，您可以使用.`niz2``niz``int*``foo(int* nPtr);``nPtr``foo(int** nPtr);``nPtr``*nPtr = &tmpInt``*nPtr = tmpPtr``int``tmpInt = **nPtr`

# sql - sql查询将一列拆分为两列

> ID：12435469
> 
> 赞同：0
> 
> 时间：2012-09-15T07:27:38.387
> 
> 标签：sql, sql-server-2005

我有一列作为项目名称，项目名称中的数据

```
1.1.1 chapter1
1.1.2 chapter2 
```

我想将该单列分为两列

```
Major   Minor
1.1     .1 chapter1
1.1     .2 chapter2 
```

我的项目名称列的数据类型是 nvarchar，我使用的是 sql 2005

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T07:42:00.540

像这样的东西

```
declare @x nvarchar(500) = '1.1.1 chapter1'

select substring(@x,1,charindex('.',@x,1+charindex('.',@x))-1) as Major,
       substring(@x,charindex('.',@x,1+charindex('.',@x)),len(@x)-charindex('.',@x,1+charindex('.',@x))) as Minor 
```

在您的查询中替换 @x ..

和它的小提琴：[http ://sqlfiddle.com/#!3/d41d8/4424/0](http://sqlfiddle.com/#!3/d41d8/4424/0)

更新为 . 在前面并证明错误

声明 @x nvarchar(500) = '1.1.1 第 1 章'

```
select @x,
   case when charindex('.',@x,1+charindex('.',@x)) <> 0 then substring(@x,1,charindex('.',@x,1+charindex('.',@x))-1)
        else 'Cannot be parsed'
   end,
   case when charindex('.',@x,1+charindex('.',@x)) <> 0 then substring(@x,charindex('.',@x,1+charindex('.',@x)),len(@x)-charindex('.',@x,1+charindex('.',@x))+1)
        else 'Cannot be parsed'
   end 
```

并且没有 . 在前

声明 @x nvarchar(500) = '1.1.1 第 1 章'

```
select @x,
   case when charindex('.',@x,1+charindex('.',@x)) <> 0 then substring(@x,1,charindex('.',@x,1+charindex('.',@x))-1)
        else 'Cannot be parsed'
   end,
   case when charindex('.',@x,1+charindex('.',@x)) <> 0 then substring(@x,1+charindex('.',@x,1+charindex('.',@x)),len(@x)-charindex('.',@x,1+charindex('.',@x)))
        else 'Cannot be parsed'
   end 
```

[http://sqlfiddle.com/#!3/d41d8/4430/0](http://sqlfiddle.com/#!3/d41d8/4430/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T07:55:11.013

```
select substring(ProjectName,1,charindex('.',ProjectName,charindex('.',@t)+1)) as Major 
```

# php - 当mysql命令行工作时，为什么PHP PDO会得到“SQLSTATE [42000] [1044]用户访问被拒绝”？

> ID：12435471
> 
> 赞同：6
> 
> 时间：2012-09-15T07:27:55.187
> 
> 标签：php, mysql, database, pdo, database-permissions

在过去的几个小时里，我一直用力将它撞在墙上，我的头都在流血。:(

正如标题所示，我创建了一个 MySQL 用户，可以从数据库服务器上的*mysql*命令提示符访问数据库。但是，当我尝试实例化一个新的 PDO 对象以使用同一用户访问数据库时，我得到：

```
SQLSTATE[42000] [1044] Access denied for user 'bob'@'localhost' to database 'my_database' 
```

这是我创建用户的方式：

```
GRANT SELECT, DELETE, EXECUTE, INSERT, UPDATE ON my_database.* TO 'bob'@'localhost' IDENTIFIED BY 'some_password'; 
```

这里可能有什么问题？！请有人给我一块骨头！（仅供参考，当我尝试创建一个新的 PDO 对象时会出现问题......我捕获了一个 PDOException ，这就是消息）。

我在授予后执行了 FLUSH PRIVILEGES，这是 SHOW GRANTS 的输出：

```
mysql> SHOW GRANTS FOR 'bob'@'localhost';
+------------------------------------------------------------------------------------------------------------+
| Grants for bob@localhost                                                                                   |
+------------------------------------------------------------------------------------------------------------+
| GRANT USAGE ON *.* TO 'bob'@'localhost' IDENTIFIED BY PASSWORD '.........................................' |
| GRANT SELECT, INSERT, UPDATE, DELETE, EXECUTE ON `my_database`.* TO 'bob'@'localhost'                      |
+------------------------------------------------------------------------------------------------------------+ 
```

这是这个用户的 mysql.db 的样子：

```
mysql> SELECT * FROM db WHERE User = 'bob'\G;
*************************** 1\. row ***************************
                 Host: localhost
                   Db: my_database
                 User: bob
          Select_priv: Y
          Insert_priv: Y
          Update_priv: Y
          Delete_priv: Y
          Create_priv: N
            Drop_priv: N
           Grant_priv: N
      References_priv: N
           Index_priv: N
           Alter_priv: N
Create_tmp_table_priv: N
     Lock_tables_priv: N
     Create_view_priv: N
       Show_view_priv: N
  Create_routine_priv: N
   Alter_routine_priv: N
         Execute_priv: Y
           Event_priv: N
         Trigger_priv: N 
```

如果重要的话，这是一个在 Ubuntu 12.04 LTS 上运行的四节点 MySQL 集群。

编辑：我发现只有当我尝试使用 Zend AMF 访问服务器时才会出现问题。任何想法为什么 PDO 不能与 Zend AMF 一起使用？我可能错过了 Zend AMF 设置中的某些内容吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-12T08:12:29.490

改用'bob'@'127.0.0.1'。如果 php 通过 127.0.0.1 访问它，它永远不会被称为“localhost”，因为本地 DNS 解析没有发生，并且 MySQL 将拒绝访问它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-01T18:39:45.207

对于未来的谷歌人，我刚才也遇到了同样的问题，我很确定密码是正确的。是的，密码确实是正确的，但问题是我如何生成密码以及如何将密码保存在配置文件中。

如果您使用像我这样的随机密码生成器，请确保您的密码中没有`$`美元符号。

如果您有`$`密码，请确保使用这样的单引号将密码保存在配置文件中

```
$pass = 'randomchars$morerandom'; 
```

但不是这样的双引号

```
$pass = "randomchars$morerandom"; 
```

# php - 警告：mysql_num_rows()：提供的参数不是有效的 MySQL

> ID：12435472
> 
> 赞同：-2
> 
> 时间：2012-09-15T07:28:47.917
> 
> 标签：php, mysql

我正在使用以下代码

```
 $rows = mysql_num_rows($query); 
```

我收到了这个错误：

> 警告：mysql_num_rows()：在第 355 行的 /home/....../public_html/test/basic.rar 文件夹/global.php 中提供的参数不是有效的 MySQL 结果资源

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T07:31:03.163

我假设这`$query`是您的实际*查询*（例如`select`字符串）。

您不将查询传递给`mysql_num_rows`，而是传递从*执行查询返回的**结果集*，例如：

 *```
$dbconn = mysql_connect ("pax_db_box", "pax", "never_you_mind");
mysql_select_db ("main_db", $dbconn);

$query = "SELECT balance FROM accounts where account_id = '42'";

$result_set = $mysql_query ($query, $dbconn);
$numrows = mysql_num_rows ($result_set); 
```

* * *

您可能还想`mysqli`在某个时候考虑使用较新的功能。*

# c# - 如何在 DataGridView 中添加状态栏/工具条控件

> ID：12435473
> 
> 赞同：-1
> 
> 时间：2012-09-15T07:28:48.347
> 
> 标签：c#, winforms, datagridview, statusbar

我想在 C# winform 的 DataGridView 底部添加一个状态栏，但是当我在其中添加状态栏时，它会与行重叠。

![在此处输入图像描述](../Images/7e2853a05a3e2bb69f3e091f33d97751.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T14:23:07.317

我引用了你的评论，你说

> 我状态栏，我想显示没有记录和当前行没有

您必须使用`bindingSource`控件并集成到，`bindingNavigator`以便您可以轻松显示*记录数和当前行*

只需点击链接[BindingNavigator.BindingSource](http://msdn.microsoft.com/en-us/library/system.windows.forms.bindingnavigator.bindingsource.aspx)

我希望这将有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T08:03:51.207

将 ProgressBar 左侧站点上的状态栏项目之一的 Spring-Property 设置为 true。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-16T07:04:30.853

在datagridview中我们可以添加控件，但是会重叠datagridview的行和列。我添加了状态栏，但它在行上重叠。通常没有办法直接在 datagridview 中添加状态栏或工具栏。但这是我们可以做的工作。

在表单上添加一个面板，将 datagridview 添加到面板中，然后在面板中添加状态栏（在 datagridview 之外）。然后将状态栏停靠为底部，并将 datagridview 停靠为填充。看起来您在 datagridview 中有一个状态栏。这将不再重叠 datagridview 行。

# windows-phone-7.1 - 如何在从Windows Phone中的文件中读取整行时创建字符行数组

> ID：12435475
> 
> 赞同：0
> 
> 时间：2012-09-15T07:28:58.897
> 
> 标签：windows-phone-7.1

```
fileReader = new StreamReader(new IsolatedStorageFileStream("textfiles\\easy.txt", FileMode.Open, filestorage));
var obj = App.Current as App;
var lines = fileReader.ReadToEnd();
obj.textfile = (string[])fileReader.ReadToEnd(); 
```

收到错误

> obj.textfile = (string[])fileReader.ReadToEnd() 中的“无法将字符串转换为字符串 []”；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T07:51:17.097

如果你想要一个字符串中的一组行，你可以这样做

```
var arrayOfLines = lines.split("\n"); 
```

# c# - 该文件解析为一个太长的路径。最大长度为 260 个字符

> ID：12435476
> 
> 赞同：4
> 
> 时间：2012-09-15T07:29:21.093
> 
> 标签：c#, .net, sql-server, windows

我在运行 Windows 7 的 Fujitsu 平板电脑上运行 C# .NET WPF 应用程序，访问安装在用户 AppData 文件夹中的 SQL Server CE 3.5 数据库。此应用程序可以在同类型的其他平板电脑上正常运行，也可以在普通笔记本电脑或台式电脑上正常运行。

当应用程序在一个特定的平板电脑上运行时，我收到错误：

```
The file resolves to a path that is too long. The maximum length is 260 characters 
[File name = c:\Users\tester\AppData\Roaming\Fourmative\AppDatabase\MyDatabase#1.sdf] 
```

现在，我已经阅读了有关 Windows 路径名称的限制以及最大长度为 260 个字符的信息。但是，如您所见，这条路径的长度只有 72 个字符。

此外，由于应用程序作为安装程序的一部分安装在用户的 AppData 文件夹中，因此我无法在任何一台用户计算机上真正控制此路径将准确指向的位置。

我认为这一定意味着实际路径实际上是以某种方式从显示的路径映射的？所以，我的问题是，如何从命令行中找到完整的实际路径（必须是 260 个字符的路径），以便确定如何真正解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T08:40:42.417

Windows 路径是无限的，但需要使用不同的语法。

来自[http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247(v=vs.85).aspx)：

> Windows API 有许多函数也有 Unicode 版本，以允许最大总路径长度为 32,767 个字符的扩展长度路径。这种类型的路径由用反斜杠分隔的组件组成，每个组件的最大长度为 GetVolumeInformation 函数的 lpMaximumComponentLength 参数中返回的值（该值通常为 255 个字符）。要指定扩展长度的路径，请使用“\?\”前缀。例如，“\?\D:\非常长的路径”。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-15T10:04:31.400

我不确定“MyDatabase#1.sdf”是一个有效的文件名。我怀疑 # 是一个有效的字符，它可能是问题的原因，不知何故......

# java - 如何快速序列化/反序列化复杂的java对象

> ID：12435491
> 
> 赞同：2
> 
> 时间：2012-09-15T07:31:08.333
> 
> 标签：java, xml, performance, serialization

我正在调试和修复一个复杂的应用程序，它适用于一个巨大的 Java 对象（~250M）。

我用另一个程序创建了这个对象。目前我使用 XStream 从硬盘加载和保存这个对象，但是解析它需要一分钟多的时间。它减慢了开发过程。

JAXB 更快吗？还有其他方法可以加载和保存这个巨大的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T07:50:18.460

我从未使用过 XStream，但根据他们的文档，它会生成 XML，对吗？您需要将这些对象存储在 XML 中吗？如果您只需要将对象存储到磁盘，那么您可以使用几种不同的方法：

*   java序列化/外部化
*   克里奥
*   谷歌原型
*   ...

也看这里：[高性能序列化：Java vs Google Protocol Buffers vs ...？](https://stackoverflow.com/questions/647779/high-performance-serialization-java-vs-google-protocol-buffers-vs)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T08:12:43.883

在这种情况下，我会序列化数据，使其更小更快。您可以将关键类外部化以进一步提高速度。这是我最近做的一些测试[Protobuf vs Thrift vs Java Serialization](http://vanillajava.blogspot.co.uk/2011/10/serialization-using-bytebuffer-and.html)它与 kovica 建议的基准相同，但最近在较新的硬件/软件上运行。

如果您需要更快，您可以使用内存映射数据。这很难使用，但你无法击败性能。如果数据已经在磁盘缓存中，您可以加载 250 MB 是几十毫秒。如果不是这样，您将受到驱动器速度的限制，例如，速度较慢的 40 MB/s 驱动器大约需要 8 秒。

我写的一个使用内存映射文件的库是[Java Chronicle](https://github.com/peter-lawrey/Java-Chronicle)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T08:05:59.207

我会向其他人推荐 Java 序列化。它可以利用重用堆中的对象（例如：String 的[intern()](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#intern%28%29)方法）而不是创建新对象（就像其他序列化程序通常所做的那样）。这减少了有效载荷的总量。

# python - 为什么通过导入运行模块时会发生名称错误，但从 Maya 中的脚本编辑器运行时不会发生名称错误

> ID：12435497
> 
> 赞同：-2
> 
> 时间：2012-09-15T07:31:46.353
> 
> 标签：python, maya, nameerror, autodesk

我所要做的就是向字典中添加更多项目，并在必要时使用第二个按钮填充！！！一切顺利，通过单击蓝色播放按钮从 Maya 脚本编辑器运行代码，但如果我导入此脚本 import funtest funtest.main()

窗口加载正常，但单击任一按钮时出现错误...所以请告诉我为什么它们在从脚本编辑器执行代码和通过导入执行另一个代码之间有区别..

它应该是一样的，或者我的逻辑有什么问题？

```
import maya.cmds as cmds
dic={}
print("dictionary is empty",dic)
def main():
    inst=btnUI()
    inst.create()

class btnUI(object):
    def __init__(self, winName="winTheWindow"):
        self.winTitle = "The Window"
        self.winName = winName

    def create(self):
        if cmds.window(self.winName, exists=True):
            cmds.deleteUI(self.winName)
        dic['item1']='item1value'
        dic['item2']='item2value'

        cmds.window(self.winName, title=self.winTitle)
        self.mainCol = cmds.columnLayout( adjustableColumn=True )
        self.btnA = cmds.button( label='Press Me - External Func',c='outsideFunc(dic)' )
        self.btnb = cmds.button( label='Populate more items',c='populateDic()' )
        cmds.showWindow( self.winName )
        cmds.window(self.winName, edit=True, widthHeight=[250,75])

def populateDic():
    dic['item3']='item3value'
    dic['item4']='item4value'
    dic['item5']='item5value'

def outsideFunc(dicItems):
    print("Outside function, called from inside a class function")
    print(dicItems)

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T10:50:09.223

这是因为您的`c`参数解析`cmds.button()`发生在另一个命名空间中。似乎有几种方法可以解决它，但我建议遵循更 Pythonic 的方法：

```
from functools import partial
self.btnA = cmds.button( label='Press Me - External Func',
                         c=partial(outsideFunc, dic))
self.btnb = cmds.button( label='Populate more items',c=populateDic) 
```

对于按钮 A，我[`partial`](http://docs.python.org/library/functools.html#functools.partial)用来帮助传递`dic`到`outsideFunc`，因此由 partial 生成的结果函数不需要任何参数（它已预先加载了`dic`参数）。

对于按钮 B，这是不必要的，因为它不需要任何参数。所以我们只是给它一个要调用的函数的名称。请注意缺少引号。Python 将在正确的命名空间中解决此问题，并按预期工作。

顺便说一句，这个页面似乎很有帮助，并讨论了命令回调：[http ://www.luma-pictures.com/tools/pymel/docs/1.0/ui.html](http://www.luma-pictures.com/tools/pymel/docs/1.0/ui.html)

更新：按钮将参数传递给它们的回调，因此您需要包装它：

```
from functools import partial
self.btnA = cmds.button( label='Press Me - External Func',
                         c=lambda arg: outsideFunc(dic))
self.btnb = cmds.button( label='Populate more items',c=lambda arg: populateDic()) 
```

这会创建几个匿名函数来丢弃参数（因为您不需要它）。

# mysql - 无法在我的本地 mysql 服务器中找到 ft_min_word_len 变量

> ID：12435498
> 
> 赞同：1
> 
> 时间：2012-09-15T07:31:59.990
> 
> 标签：mysql, server-variables

我试图编辑 MySQL 服务器变量 ft_min_word_len，但不幸的是，我在硬盘上找不到包含这些设置的文件位置，我在 MySQL 安装目录的 c:\windows 目录中查找文件 my.ini 和 my.cnf在 'C:\ProgramData\MySQL\MySQL Server 5.5\' server 5.5 和任何其他可能的位置。

我在 MySQL 安装目录 (c:\MySQL) 中只找到一个文件 my.ini，但该文件不包含此类设置。

我浏览了 phpmyadmin，我在“服务器变量和设置”部分找到了该变量，我还在 GLOBAL_VARIABLES 表下的 information_schema 中找到了这个变量。

但是我在我的 64 位 Windows 7 系统上的任何文件中都找不到它，并且我已经安装了 64 位特定的 MySQL

一件事我还注意到'C：\ ProgramData \ MySQL \ MySQL Server 5.5 \ data'中没有information_schema的文件，但对于其他数据库，里面有相应的文件。

希望有帮助的答案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T07:57:30.277

MySQL 配置文件通常在 Windows 上的 C:\Windows\my.ini 下和 Linux 上的 /etc/my.cnf 下找到

如果您没有将任何以下行放入文件中，然后您可以添加它，然后重新启动您的 mysql 服务器。

```
[mysqld]
ft_min_word_len = 3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T08:00:06.980

不必在设置文件中指定每个变量。当您不设置值时，MySQL 将使用硬编码的默认值。只需在文件中添加一个新行。

至于文件位置，它应该在基本目录中：

```
mysql> SELECT @@basedir;
+------------------------------------------+
| @@basedir                                |
+------------------------------------------+
| C:\Program Files\MySQL\MySQL Server 5.0\ |
+------------------------------------------+
1 row in set (0.00 sec) 
```

# android - 如果在外部函数中初始化 setImageViewResource 不起作用

> ID：12435499
> 
> 赞同：0
> 
> 时间：2012-09-15T07:32:09.960
> 
> 标签：android, widget, imageview

我正在构建一个主屏幕小部件，我的目标是在这个小部件中的 ImageView 上设置一个图像，并`setImageViewResource()`用于此目的。它工作得很好 -*意味着目标图像在执行后将`R.id.user_button`其图像资源更改`R.drawable.activity_notification``onStart()`*为- 如果我这样使用它：

```
public class UpdateWidgetService extends Service {
    public void onStart(Intent intent, int startId) {
        ... //Some code which is not really important
        RemoteViews remoteViews = new RemoteViews(this.getPackageName(),R.layout.widget_layout);
        remoteViews.setImageViewResource(R.id.user_button, R.drawable.activity_notification);
    }
} 
```

问题是我必须放入`setImageViewResource()`一个**外部函数**，当尝试构建类似下面的代码时它拒绝工作 -*意味着目标图像的图像资源在执行`R.id.user_button`后保持不变`onStart()`*。

```
public class UpdateWidgetService extends Service {
    public void onStart(Intent intent, int startId) {
        ... //Some code which is not really important
        changeImagePicture();
    }
    public void changeImagePicture() {
        RemoteViews remoteViews = new RemoteViews(this.getPackageName(),R.layout.widget_layout);
        remoteViews.setImageViewResource(R.id.user_button, R.drawable.activity_notification);
    }
} 
```

我想我是个菜鸟，在这里我想念一些非常简单且非常重要的东西。你能指出我的错误，这样我才能让我的代码最终工作;）谢谢 beaucoup！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T07:49:22.737

您需要使用 AppWidgetManager 类的 updateAppWidget 方法：

```
AppWidgetManager manager = AppWidgetManager.getInstance(context);
manager.updateAppWidget(thisWidget, remoteViews); 
```

祝你好运....

# javascript - 子类视图渲染后如何渲染超类视图？

> ID：12435501
> 
> 赞同：2
> 
> 时间：2012-09-15T07:32:19.873
> 
> 标签：javascript, oop, backbone.js, backbone-views

我不能调用超类的渲染

```
Super = Backbone.View.extend({

     render : function(){
          //super class code here   (unable to call)
          return this;
     }

}); 

Sub = Super.extend({

     render : function(){
          //sub class code here    (called)
          return this;
     }

});

var view = new Sub();
view.render(); 
```

我想先调用子类渲染，然后再调用超类渲染。在某些情况下，超类先渲染，然后子类渲染。

那么，是否可以根据用户要求在**不更改 Super 类** 和**不更改函数名称的情况**下编写调用超类渲染之前或之后调用超类渲染的子类渲染。

那么，我错过了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T09:29:10.833

我可能在这里遗漏了一些东西，但你可以在你的`Sub.render`函数中调用 Super 原型的 render 方法：

```
Super = Backbone.View.extend({
     render : function(){
          console.log('super render');
          return this;
     } 
});

Sub = Super.extend({
     render : function(){
          console.log('sub render');
          Super.prototype.render.call(this);
          return this;
     } 
});

var view = new Sub();
view.render(); 
```

还有一个小提琴[http://jsfiddle.net/WATqe/](http://jsfiddle.net/WATqe/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T07:52:08.580

另一种方法：

```
Super = Backbone.View.extend({

     render : function(){
          //super class code here   (unable to call)
          if (typeof this.postRender === "function") {
            this.postRender();
          }
          return this;
     }

}); 

Sub = Super.extend({

     postRender : function(){
          //sub class code here    (called)
          return this;
     }

});

var view = new Sub();
view.render(); 
```

view.render() 将在 super 上调用 render，如果 postRender 存在，则无论在哪里定义 postRender（super、sub、subsub 等），它都会调用 postRender。

**更新：如果你不能修改 super 那么你可以尝试：**

```
Sub = Super.extend({
    initialize : function () {
       if (this.render) {
           var render = this.render;
           this.render = function () {
               render.call(this);
               // sub class render code goes here
           };
       }
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T08:08:26.037

您可以根据需要构建生命周期

例如，

在超级

```
...
preRender_: function () {
    // maybe empty, for override
    ...
},
render_: function () {
    // do real render here
    ...
},
postRender_: function () {
    // maybe empty, for override
    ...
},
render: function () {
    preRender_();
    render_();
    postRender_();
} 
```

在子

```
// override preRender_, render_ or postRender_ as needed 
```

# windows - 根据屏幕形状或停靠状态自动更改 Windows 7 任务栏位置

> ID：12435503
> 
> 赞同：10
> 
> 时间：2012-09-15T07:32:48.803
> 
> 标签：windows, windows-7, vbscript, automation, taskbar

使用 VBScript 或任何其他编程语言是否可以实现以下操作：

*   检测屏幕形状 - 或计算机是否已对接
*   更改 Windows 任务栏位置

**我想要达到的目标：**

我的笔记本电脑有一个 14 英寸的宽屏：相当宽，但不是很高。我发现将 Windows 任务栏放在屏幕左侧最方便，因为我可以节省宽度但不能节省垂直空间。

然而，在办公室时，我的电脑放在一个扩展坞上，并连接到一个漂亮的大方形屏幕。在这里，我更喜欢将任务栏放在其默认位置，即底部。

当然，我知道如何在任务栏属性中手动切换两个任务栏位置。但是我每天都会这样做几次，这很烦人。我的问题是：我可以让任务栏位置自动更改吗？

例如，在启动（或从休眠状态唤醒）时，将运行一个脚本来检测：

*   屏幕形状是否高于 4:3？（或任何数字）
*   计算机是否停靠在扩展坞中？

如果是，将任务栏放在底部，否则放在左侧。

任何人都知道如何做到这一点，或者可以让我走上正轨吗？还是已经有一个实用程序可以做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T22:52:39.413

//正常扩充为什么这在别人的机器上不是一个好主意省略

脚本语言在这里可能不是一个好的选择，您需要一些[能够泵送消息的东西来收听 WM_DISPLAYCHANGE](http://msdn.microsoft.com/en-us/library/ms695534%28v=VS.85%29.aspx)。

当您收到消息时，您需要根据显示器的分辨率计算任务栏的所需方向。然后使用 RmShutdown 关闭 Windows 资源管理器。

//**未记录**的行为开始，可能随时中断

任务栏停靠边缘存储在字节 13 中（作为来自[APPBARDATA](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773184%28v=vs.85%29.aspx)的 ABE 值之一），位置存储在字节 25-40 中作为 win32 [RECT](http://msdn.microsoft.com/en-us/library/dd162897%28v=VS.85%29.aspx)。您可以在重新启动资源管理器之前修改设置。

//未记录的行为结束

示例代码（完整源码在[https://github.com/jiangsheng/Samples/tree/master/AppBarTest](https://github.com/jiangsheng/Samples/tree/master/AppBarTest)）：

```
//returns the process id and create time for the oldest explorer.exe 
RM_UNIQUE_PROCESS GetExplorerApplication()
{
    RM_UNIQUE_PROCESS  result={0};
    DWORD bytesReturned=0;
    DWORD processIdSize=4096;
    std::vector<DWORD> processIds;
    processIds.resize(1024);
    EnumProcesses(processIds.data(),processIdSize,&bytesReturned);
    while(bytesReturned==processIdSize)
    {
        processIdSize+=processIdSize;
        processIds.resize(processIdSize/4);
        EnumProcesses(processIds.data(),processIdSize,&bytesReturned);
    }

    std::for_each(processIds.begin(), processIds.end(), [&result] (DWORD processId) {
         HANDLE hProcess = OpenProcess(PROCESS_QUERY_INFORMATION|PROCESS_VM_READ,
                                   FALSE, processId);
         if (hProcess) {
            std::wstring imageName;
            imageName.resize(4096);
            if(GetProcessImageFileName (hProcess,(LPWSTR)imageName.data(),4096)>0)
            {
                if(wcscmp(L"explorer.exe",PathFindFileName(imageName.data()))==0)
                {
                    //this is assmuing the user is not running elevated and won't see explorer processes in other sessions
                    FILETIME ftCreate, ftExit, ftKernel, ftUser;
                    if (GetProcessTimes(hProcess, &ftCreate, &ftExit,&ftKernel, &ftUser))
                    {
                        if(result.dwProcessId==0)
                        {
                            result.dwProcessId=processId;
                            result.ProcessStartTime=ftCreate;
                        }
                        else if(CompareFileTime(&result.ProcessStartTime,&ftCreate)>0)
                        {
                            result.dwProcessId=processId;
                            result.ProcessStartTime=ftCreate;
                        }
                    }
                }
            }
            CloseHandle(hProcess);
         }
    });
    return result;
}
    //taskbar position calculating code omitted
    DWORD dwSession=0;
    WCHAR szSessionKey[CCH_RM_SESSION_KEY+1] = { 0 };
    DWORD dwError = RmStartSession(&dwSession, 0, szSessionKey);
    if (dwError == ERROR_SUCCESS) {
        RM_UNIQUE_PROCESS rgApplications[1]={GetExplorerApplication()};
        dwError=RmRegisterResources(
            dwSession,0,NULL,1,rgApplications,0,NULL);
        DWORD dwReason;
        UINT nProcInfoNeeded;
        UINT nProcInfo = 10;
        RM_PROCESS_INFO rgpi[10];
        dwError = RmGetList(dwSession, &nProcInfoNeeded,
                       &nProcInfo, rgpi, &dwReason);
        if(dwReason==RmRebootReasonNone)//now free to restart explorer
        {
            RmShutdown(dwSession,RmForceShutdown,NULL);//important, if we change the registry before shutting down explorer will override our change
            //using undocumented setting structure, could break any time
            //edge setting is stored at HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\StuckRects2!Settings
            HKEY hKey={0};
            DWORD result=0;
            result=::RegOpenKeyEx(HKEY_CURRENT_USER, _T("Software\\Microsoft\\Windows\\CurrentVersion\\Explorer\\StuckRects2"),
                    0, KEY_READ|KEY_WRITE, &hKey) ;
            if (result== ERROR_SUCCESS)
            {
                std::vector<BYTE> data;
                data.resize(256);
                TCHAR settingValue[]= _T("Settings");
                DWORD dwKeyDataType=0;
                DWORD dwDataBufSize=data.size();
                result=::RegQueryValueEx(hKey,settingValue, NULL, &dwKeyDataType,
                    (LPBYTE) data.data(), &dwDataBufSize);
                while(ERROR_MORE_DATA==result)
                {
                    data.resize(256+data.size());
                    dwDataBufSize=data.size();
                    result=::RegQueryValueEx(hKey,settingValue, NULL, &dwKeyDataType, 
                        (LPBYTE) data.data(), &dwDataBufSize);
                }
                data.resize(dwDataBufSize);
                if(result==ERROR_SUCCESS)
                {
                    switch ( dwKeyDataType )
                    {
                        case REG_BINARY:
                            if(data.size()==40)
                            {
                                BYTE taskbarPosition=data[12];
                                taskbarPosition=edge;
                                data[12]=taskbarPosition;
                                RECT* taskbarRect=(RECT*)&data[24];
                                CopyRect (taskbarRect,&abd.rc);
                                result=::RegSetValueEx(hKey,settingValue,0,REG_BINARY,(LPBYTE) data.data(), dwDataBufSize);
                            }
                            break;
                    }
                }
                ::RegCloseKey( hKey );
            }
            RmRestart (dwSession,0,NULL);
        }
    }
    RmEndSession(dwSession); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T00:49:02.063

您可以通过简单的批处理或脚本来执行此操作。设置注册表值以根据屏幕的当前分辨率定位任务栏（如果在停靠中它会更高），然后重新启动 explorer.exe。因此，例如在屏幕左侧设置任务栏的批处理将是（假设您在 d:\scripts 文件夹中有 bottom.reg 文件）

```
reg add d:\scripts\Bottom.reg
@echo off taskkill /f /IM explorer.exe
explorer.exe 
```

bottom.reg 的内容是

```
Windows Registry Editor Version 5.00

[HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\StuckRects2]
"Settings"=hex:28,00,00,00,ff,ff,ff,ff,02,00,00,00,03,00,00,00,3e,00,00,00,2e,\
  00,00,00,00,00,00,00,82,04,00,00,80,07,00,00,b0,04,00,00 
```

对于left.reg

```
Windows Registry Editor Version 5.00

[HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\StuckRects2]
"Settings"=hex:28,00,00,00,ff,ff,ff,ff,02,00,00,00,00,00,00,00,3e,00,00,00,2e,\
  00,00,00,00,00,00,00,00,00,00,00,3e,00,00,00,b0,04,00,00 
```

你会有一些闪烁，但因为当你启动 Windows 时你会这样做，我想这不会是一个问题。我在 Windows 7 上对此进行了测试。

编辑：制作了一个基于屏幕分辨率做同样事情的 vbscript

```
HKEY_CURRENT_USER = &H80000001
Set WshShell = CreateObject("WScript.Shell")
strComputer = "."
Set objWMIService = GetObject("winmgmts:\\" & strComputer & "\root\cimv2")
Set ObjRegistry = GetObject("winmgmts:{impersonationLevel=impersonate}!\\" & strComputer & "\root\default:StdRegProv")

'Get curr. user name
Set colItems = objWMIService.ExecQuery("Select * From Win32_ComputerSystem")
For Each objItem in colItems
  strCurrentUserName = objItem.UserName
Next

Set colItems = objWMIService.ExecQuery("Select * From Win32_DesktopMonitor where DeviceID = 'DesktopMonitor1'",,0) 
For Each objItem in colItems 
  intHorizontal = objItem.ScreenWidth 
  intVertical = objItem.ScreenHeight 
Next 

bottom = Array(&H28,&H00,&H00,&H00,&Hff,&Hff,&Hff,&Hff,&H02,&H00,&H00,&H00,&H03,&H00,&H00,&H00,&H3e,&H00,&H00,&H00,&H2e,&H00,&H00,&H00,&H00,&H00,&H00,&H00,&H82,&H04,&H00,&H00,&H80,&H07,&H00,&H00,&Hb0,&H04,&H00,&H00)
left_   = Array(&H28,&H00,&H00,&H00,&Hff,&Hff,&Hff,&Hff,&H02,&H00,&H00,&H00,&H00,&H00,&H00,&H00,&H3e,&H00,&H00,&H00,&H2e,&H00,&H00,&H00,&H00,&H00,&H00,&H00,&H00,&H00,&H00,&H00,&H3e,&H00,&H00,&H00,&Hb0,&H04,&H00,&H00)

if intHorizontal >= 1920 then
  regdata = bottom
else
  regdata = left_
end if

ObjRegistry.SetBinaryValue HKEY_CURRENT_USER, "Software\Microsoft\Windows\CurrentVersion\Explorer\StuckRects2\", "Settings", regdata

'Restart user shell
Set colProcessList = objWMIService.ExecQuery("Select * from Win32_Process Where Name = 'Explorer.exe'")
For Each objProcess in colProcessList
    colProperties = objProcess.GetOwner(strNameOfUser,strUserDomain)
  wscript.echo colProperties
    If strUserDomain & "\" & strNameOfUser = strCurrentUserName then
    wscript.echo "restarting"
        objProcess.Terminate()
    end if
Next 
```

# css - 4 个类中的 2 个的 CSS 选择器

> ID：12435504
> 
> 赞同：-1
> 
> 时间：2012-09-15T07:32:51.890
> 
> 标签：css

我有一个有 4 个类的元素。我想根据其中 2 个类进行选择，但我为它制定的 CSS 规则不适用于浏览器：

看起来像

```
.one.two {
   ...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T09:15:50.523

这是您想要的示例 HTML/CSS：

```
<!DOCTYPE>
<html>
    <head>
        <style>
            .c1.c2 {
                background-color: #FFBBBB;
            }
        </style>
    </head>
    <body>
        <div class="c1 c2 c3">c1 c2 c3</div>
        <div class="c2">c2</div>
        <div class="c1">c1</div>
        <div class="c1 c2">c1 c2</div>
    </body>
</html> 
```

它适用于 Internet Explorer 8、Firefox 15、Chrome 21

只有第一个和最后一个 div 会得到红色背景，因为只有它们有 c1 和 c2 类......

# xml - XML 验证是什么意思？

> ID：12435510
> 
> 赞同：1
> 
> 时间：2012-09-15T07:34:52.360
> 
> 标签：xml, xml-validation

请用幼稚的术语解释。

XML 验证实际上是什么意思？

“XML 数据的验证”、“XML 文档的验证”和“XML 模式的验证”是同一个意思吗？

XSD 文档如何帮助验证 XML 文档/数据/架构？

注意：有很多关于 XML 验证的文章。但是，这些都是令人费解的。讨论使用行话，因此难以理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T08:28:41.610

也许这个简单的解释会有所帮助：

XML 文档有不同级别的“正确性”。

首先是**良构**。如果文档符合为 XML 文件制定的句法规则，例如标签正确嵌套和闭合、遵循命名规则等，则该文档是格式良好的。

完全基于 XML 标准可以检查 XML 文档的格式是否正确。您无需了解有关 XML 文档中包含的数据及其结构的任何信息。

这就是**验证**的用武之地：

DTD（文档类型定义）或 XSD 指定了如何构建某种类型的 XML 文档的规则，例如，在哪些上下文中允许哪些标签，每个标签可能有哪些属性和值，以及标签之间是否可以交叉引用正确处理。

例如，如果您将标签定义为 ID 字段，则其值可能仅在 XML 文件中出现一次。

* * *

将此与编程语言进行比较：

在 Python 中，以下将是`SyntaxError`：

```
f("Hello)        # not "well-formed" 
```

以下在语法上是正确的，但仍然失败，因为函数*使用* 不正确：

```
def f(a):
    return a+1

f("Hello")       # "well-formed" but invalid (TypeError) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T08:17:36.087

*简单来说*，模式（例如 XSD、RelaxNG 等文档）定义了 XML 文档的语法。

处理器应该能够解析 XML 文件并检查它是否对模式中定义的语法有效。

模式通常指定（除其他外）元素的层次结构、属性类和属性值的数据类型。

w3schools 的介绍对 IMO 很有帮助：[http ://www.w3schools.com/schema/schema_intro.asp](http://www.w3schools.com/schema/schema_intro.asp)

虽然您可能想在某个时候查看 RelaxNG：[http ://relaxng.org/tutorial-20011203.html](http://relaxng.org/tutorial-20011203.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T18:23:31.977

模式是一组区分“有效”和“无效”文档的规则。针对特定模式验证文档是确定文档是否满足该模式中规则的过程。

# asp.net-mvc - jqgrid+淘汰赛

> ID：12435522
> 
> 赞同：2
> 
> 时间：2012-09-15T07:36:11.183
> 
> 标签：asp.net-mvc, jqgrid, knockout.js

我设法运行淘汰赛js。例如：http: [//jsfiddle.net/brux88/9fzG4/](http://jsfiddle.net/brux88/9fzG4/)。现在我想使用 jqGrid 复制同样的东西，但我无法实时运行计算。有人能帮我吗？我也尝试过不使用淘汰赛，但只使用 jqGrid 我不一样。示例：http: [//jsfiddle.net/brux88/yGJcy/](http://jsfiddle.net/brux88/yGJcy/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T08:35:31.263

为什么要重新发明轮子，有一个很好的淘汰赛网格叫做 KoGrid，去他们的页面，里面有很多例子和演示

[https://github.com/ericmbarnard/KoGrid](https://github.com/ericmbarnard/KoGrid)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T16:03:11.217

你可以尝试使用这个插件 [Knockout-jqGridBinding](https://github.com/CraigCav/Knockout-jqGridBinding)

# php - 在实施 OAuth 时如何知道用户已经登录？

> ID：12435532
> 
> 赞同：0
> 
> 时间：2012-09-15T07:38:40.307
> 
> 标签：php, twitter, oauth

我正在 PHP/CodeIgniter 中构建一个 twitter 应用程序，它成功获取了 [access_token]。目前，我没有向数据库写入任何内容，因为我仍在测试中。

但是，如果用户在较早的时间已经登录（意味着他们没有明确按下注销），您如何确定该用户只是返回？你需要在db中存储什么？因为将所有内容存储在 SESSION 中显然会导致用户每次关闭您的网站时都需要登录......只是想澄清一下！

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T14:54:42.800

当您调用 oauth/access_token 时，您会取回访问令牌（这是最后一个 oAuth 令牌 - 身份验证过程中有几个，但这是您用来拨打电话的那个）。

将此令牌和秘密保存在会话中，它应该“永远”持续。

当用户返回时，您可以使用“验证凭据”来验证令牌是否仍然有效[https://dev.twitter.com/docs/api/1.1/get/account/verify_credentials](https://dev.twitter.com/docs/api/1.1/get/account/verify_credentials)

# recursion - 递归较少的函数式编程？

> ID：12435537
> 
> 赞同：2
> 
> 时间：2012-09-15T07:39:57.227
> 
> 标签：recursion, f#

我目前在使用 F# 的函数式编程方面做得相当好。然而，当 F#/函数式编程社区中似乎有更好的习惯用法时，我倾向于使用递归进行大量编程。那么本着学习的精神，有没有更好/更惯用的方法来编写下面的函数而不用递归呢？

```
let rec convert line =
    if line.[0..1] = "  " then
        match convert line.[2..] with
        | (i, subline) -> (i+1, subline)
    else
        (0, line) 
```

结果如下：

```
> convert "asdf";;
val it : int * string = (0, "asdf")
> convert "  asdf";;
val it : int * string = (1, "asdf")
> convert "      asdf";;
val it : int * string = (3, "asdf") 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T09:16:39.303

递归是在函数式语言中编写循环的基本机制，因此如果您需要迭代字符（就像您在示例中所做的那样），那么递归就是您所需要的。

如果您想改进您的代码，那么您可能应该避免使用`line.[2..]`，因为这将是低效的（字符串不是为这种处理而设计的）。最好将字符串转换为列表，然后进行处理：

```
let convert (line:string) = 
  let rec loop acc line =
    match line with
    | ' '::' '::rest -> loop (acc + 1) rest
    | _ -> (acc, line)
  loop 0 (List.ofSeq line) 
```

您可以使用标准库中的各种函数以更短的方式实现这一点，但它们通常也是递归的（您只是看不到递归！），所以我认为使用类似`Seq.unfold`and`Seq.fold`的函数仍然是递归的（而且看起来很比你的代码更复杂）。

使用标准库的更简洁的方法是使用该`TrimLeft`方法（请参阅注释），或使用标准 F# 库函数，执行以下操作：

```
let convert (line:string) =
  // Count the number of spaces at the beginning
  let spaces = line |> Seq.takeWhile (fun c -> c = ' ') |> Seq.length
  // Divide by two - we want to count & skip two-spaces only
  let count = spaces / 2
  // Get substring starting after all removed two-spaces
  count, line.[(count * 2) ..] 
```

**编辑**关于字符串与列表处理的性能，问题是切片分配了一个新字符串（因为这是在.NET平台上表示字符串的方式），而切片列表只会更改引用。这是一个简单的测试：

```
let rec countList n s = 
  match s with 
  | x::xs -> countList (n + 1) xs
  | _ -> n

let rec countString n (s:string) =
  if s.Length = 0 then n
  else countString (n + 1) (s.[1 ..])

let l = [ for i in 1 .. 10000 -> 'x' ]
let s = new System.String('x', 10000)

#time 
for i in 0 .. 100 do countList 0 l |> ignore    // 0.002 sec (on my machine)
for i in 0 .. 100 do countString 0 s |> ignore  // 5.720 sec (on my machine) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T08:25:40.590

因为您以非统一的方式遍历字符串，所以递归解决方案在此示例中更合适。我将重写您的尾递归解决方案以提高可读性，如下所示：

```
let convert (line: string) =
    let rec loop i line =
        match line.[0..1] with
        | "  " -> loop (i+1) line.[2..]
        | _ -> i, line
    loop 0 line 
```

既然你问了，这是一个（奇怪的）非递归解决方案:)。

```
let convert (line: string) = 
    (0, line) |> Seq.unfold (fun (i, line) -> 
                                let subline = line.[2..]
                                match line.[0..1] with
                                | "  " -> Some((i+1, subline), (i+1, subline))
                                | _ -> None)
              |> Seq.fold (fun _ x -> x) (0, line) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T08:00:41.693

使用尾递归，可以写成

```
let rec convert_ acc line =
    if line.[0..1] <> "  " then
        (acc, line)
    else
        convert_ (acc + 1) line.[2..]
let convert = convert_ 0 
```

不过，仍在寻找非递归答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T21:24:34.623

这是编写函数的一种更快的方法——它显式地检查字符而不是使用字符串切片（正如 Tomas 所说，这很慢）；它也是尾递归的。最后，它使用 StringBuilder 来创建“过滤”字符串，一旦您的输入字符串达到合适的长度，它将提供更好的性能（尽管由于创建 StringBuilder 的开销，对于非常小的字符串来说它会有点慢）。

```
let convert' str =
    let strLen = String.length str
    let sb = System.Text.StringBuilder strLen

    let rec convertRec (count, idx) =
        match strLen - idx with
        | 0 ->
            count, sb.ToString ()

        | 1 ->
            // Append the last character in the string to the StringBuilder.
            sb.Append str.[idx] |> ignore
            convertRec (count, idx + 1)

        | _ ->
            if str.[idx] = ' ' && str.[idx + 1] = ' ' then
                convertRec (count + 1, idx + 2)
            else
                sb.Append str.[idx] |> ignore
                convertRec (count, idx + 1)

    // Call the internal, recursive implementation.
    convertRec (0, 0) 
```

# sql-server - 如何在 MS BI 中自定义插入查询？

> ID：12435539
> 
> 赞同：1
> 
> 时间：2012-09-15T07:40:28.413
> 
> 标签：sql-server, business-intelligence

我需要在集成服务项目中自定义插入查询。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T13:25:26.463

如果您需要为插入编写自己的 SQL，那么您可以使用执行 SQL 任务。

# c# - 如何使用 linq 对列表及其子项及其子项进行排序？

> ID：12435541
> 
> 赞同：4
> 
> 时间：2012-09-15T07:40:34.223
> 
> 标签：c#, linq

我有亲子关系，例如：

```
public class MyType {

    public IList<MyType> Children {get;set;}
    public int Order {get;set;}

} 
```

我想选择列表，以便每个级别都按顺序排列。

我可以轻松地为顶层做到这一点：

```
mylist.Children.OrderBy(x => x.Order) 
```

但是我该如何为每组孩子做呢？

最终结果将是列表或类型及其所有子项，并且所有子项（等等）都按 Order 正确排序。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T08:38:06.067

您可以通过添加一种方法来执行递归顺序，`MyType`如下所示：

```
public class MyType
{
    public IList<MyType> Childrens { get; set; }
    public int Order { get; set; }

    public void RecursiveOrder()
    {
        Childrens = Childrens.OrderBy(x => x.Order)
            .ToList();

        Childrens.ToList().ForEach(c => c.RecursiveOrder());
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T07:54:49.487

如果您使用 a`SortedList`作为基础子集合，则可以保持子排序。然后您可以公开该`Values`属性以获取值。`order`当您添加到列表时，只需按项目键入项目即可。

例如，

```
public class MyType
{
    public MyType(int order)
    {
        this.order = order;
    }

    private int order;
    private SortedList<int, MyType> children = new SortedList<int, MyType>();

    public int Order { get { return order; } }
    public IList<MyType> Children { get { return children.Values; } }

    public void AddChild(MyType child)
    {
        children.Add(child.order, child);
    }
} 
```

否则，您可能希望对列表进行递归排序。在这里使用 LINQ 是不合适的。充其量，LINQ 将允许您按排序顺序遍历子级，但它实际上不会对基础列表进行排序，除非您将列表实例替换为排序版本。如果底层列表有一个`Sort()`方法（泛型`List<T>`有），那么使用它。

```
private List<MyType> children;
public void EnsureSorted()
{
    children.Sort();
    foreach (var child in children)
        child.EnsureSorted();
} 
```

但是，从排序列表开始会容易得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T15:49:58.937

我同意 Jeff 的观点，最简单的答案是存储已排序的数据（如果这将成为您的主要访问模式）。但是假设你真的想用 Linq 做到这一点：

首先，如果你知道你只想要两个级别的排序，你可以这样做：

```
myList.Children.OrderBy(x => x.Order)
    .Select(c => c.Children.OrderBy(x => x.Order)) 
```

但是，如果您真正想要的是完全递归排序，一路向下怎么办？

```
delegate IEnumerable<MyType> RecursiveFunc(MyType data, RecursiveFunc self);
RecursiveFunc op = (data, func) => data.Children.OrderBy(x => x.Order)
    .Select(x => func(x, func));

IEnumerable<MyType> result = op(myList, op); 
```

只是写让我的大脑受伤，我还没有尝试运行它，所以祝你好运！它归结为将 linq 表达式（lambda）传递给自身，以递归地将自身应用到树中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T08:11:29.753

试试这个

```
mylist.Children.OrderBy(x => x.Order).ThenBy( x => x.order).ToList(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-15T16:02:08.473

如果最终结果只是一个子列表（而不是具有嵌套子的父列表），您可以使用`SelectMany`

```
IEnumerable<Child> result  = parents
    .SelectMany(p => p.Children)
    .OrderBy(child => child.Order); 
```

# android - 如何使用 Intent 构造函数？

> ID：12435542
> 
> 赞同：-2
> 
> 时间：2012-09-15T07:41:44.567
> 
> 标签：android, android-intent, android-activity, android-context

在android中，下面的代码有什么区别吗？

1.  新意图（这个，MyOtherActivity.class）；
2.  新意图（Context.this，MyOtherActivity.class）；
3.  新意图（getApplicationContext（），MyOtherActivity.class）；

请详细解释。示例代码也很感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T07:52:51.157

```
 1> new Intent(this, MyOtherActivity.class); here this means the context of your current   
    activity
  3> new Intent(getApplicationContext(), MyOtherActivity.class); here getApplicationContext() means the context of your application. 
```

# ios - cocos2d画板的小问题

> ID：12435543
> 
> 赞同：0
> 
> 时间：2012-09-15T07:41:53.400
> 
> 标签：ios, cocos2d-iphone

我正在尝试添加一个“白板”，以便人们可以在上面画线。

唯一的问题是，如果我画得非常快，它会将精灵间隔得很远，所以如果他们试图画字母或数字，它甚至都难以辨认。不同的精灵之间有很多空间。

这是我认为大部分绘图发生的方法。

```
-(void) update:(ccTime)delta
    {
        CCDirector* director = [CCDirector sharedDirector];
        CCRenderTexture* rtx = (CCRenderTexture*)[self getChildByTag:1];

        // explicitly don't clear the rendertexture
        [rtx begin];

        for (UITouch* touch in touches)
        {
            CGPoint touchLocation = [director convertToGL:[touch locationInView:director.openGLView]];
touchLocation = [rtx.sprite convertToNodeSpace:touchLocation];

        // because the rendertexture sprite is flipped along its Y axis the Y coordinate must be flipped:
        touchLocation.y = rtx.sprite.contentSize.height - touchLocation.y;

        CCSprite* sprite = [[CCSprite alloc] initWithFile:@"Cube_Ones.png"];
        sprite.position = touchLocation;
        sprite.scale = 0.1f;
        [self addChild:sprite];
        [placedSprites addObject:sprite];
    }

    [rtx end];
}

Maybe this is the cause?

[self scheduleUpdate]; 
```

我不完全确定如何减少更新之间的时间。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T08:07:45.327

问题只是用户可以在两个触摸事件之间将触摸位置（即他/她的手指）移动很远的距离。您可能会收到一个 100x100 的事件，而下一个手指已经在 300x300。你对此无能为力。

但是，您可以假设两个触摸位置之间的变化是线性移动。这意味着您可以简单地拆分任何两个相距超过 10 像素距离的触摸，并将它们拆分为 10 像素距离间隔。因此，您实际上会自己生成中间触摸位置。

如果这样做，最好限制两次触摸之间的最小距离，否则用户可能会在非常小的区域内绘制大量精灵，这不是您想要的。因此，如果新的触摸位置与前一个触摸位置相距 5 个像素，您只会绘制一个新的精灵。

# asp.net-mvc - 如何按需加载MVC视图中的记录

> ID：12435545
> 
> 赞同：1
> 
> 时间：2012-09-15T07:42:21.607
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我正在开发 MVC 应用程序并使用剃刀语法。

在这个应用程序中，我提供评论功能。

我添加了一个局部视图，它从数据库加载评论/记录。

**目前，一旦调用该视图，数据就会立即加载，我想避免这种情况。**

**我只在用户单击该视图上的按钮时才加载数据。**

这是按钮的代码。

```
<input type="button" value="Show" id="ShowId"  onclick="LoadData()"/> 
```

当用户单击按钮时，应执行以下代码。

```
 @foreach (var item in Model)
    {
        <div id="OwnerName">

         <span class="EmpName"> @Html.ActionLink(item.Owner.FullName, "Details", "EMployee", new { id = item.OwnerId }, new { @style = "color:#1A6690;" })</span>

           @Html.DisplayFor(ModelItem => item.CommentDateTime)

        </div>

        <p class="CommentP">
           @Html.DisplayFor(ModelItem => item.CommentText)
        </p>

        <br />

    } 
```

这该怎么做 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T11:20:49.633

以下是按需加载数据的具体示例：

*   [带有 ASP.NET MVC 的 JQuery AJAX](http://www.codeproject.com/Articles/41828/JQuery-AJAX-with-ASP-NET-MVC)
*   [在 jquery 和 ASP.Net MVC 中加载部分页面](http://miroprocessordev.blogspot.ca/2012/05/load-partial-page-in-jquery-and-aspnet.html)

遵循他们的逻辑并适应您的情况。

**更新**

Ajax 也将完成这项工作（查看评论）。*感谢网络开发者*

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T11:04:15.890

您想在用户单击按钮后从服务器加载评论吗？最简单的方法是使用 Jquery。创建将返回的操作`PartialViewResult`，然后使用 jquery 发出 ajax 请求。

# android - 活动轮换结束

> ID：12435548
> 
> 赞同：0
> 
> 时间：2012-09-15T07:43:03.783
> 
> 标签：android, android-activity, rotation

我的活动正在接近轮换。不知道为什么？

我还检查了这个问题： [Activity restart on rotation Android](https://stackoverflow.com/questions/456211/activity-restart-on-rotation-android) 但找不到解决方案。

这是我的 oncreate 函数：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.manage);

    //Defining and Getting Saved Preferences
    data=getSharedPreferences("cybapps", 0);
    dataeditor=data.edit();

    //To Delete all Preferences
    dataeditor.clear();
    dataeditor.commit();

   //Declaration 

    btn_delete=(Button)findViewById(R.id.btn_delete);
    btn_schedule=(Button)findViewById(R.id.btn_schedule);
    btn_deschedule=(Button)findViewById(R.id.btn_deschedule);
    profilelist=(ListView)findViewById(R.id.profilelist);
    am=(AudioManager)getSystemService(Context.AUDIO_SERVICE);
    status=(TextView)findViewById(R.id.status);
    random=new Random(); 

   btn_delete.setOnClickListener(this);
    btn_schedule.setOnClickListener(this);
    btn_deschedule.setOnClickListener(this);

  //Listout all profiles
    listout();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T07:45:40.113

这可能会帮助你

```
 if your android:targetSdkVersion="12" or less
android:configChanges="orientation|keyboardHidden">

if your  android:targetSdkVersion="13" or more
android:configChanges="orientation|keyboardHidden|screenSize"> 
```

# javascript - 使用 jQuery 进行文本框验证，拒绝数字

> ID：12435549
> 
> 赞同：-1
> 
> 时间：2012-09-15T07:43:06.653
> 
> 标签：javascript, jquery

在堆栈溢出的帮助下，我得到了下面的文本框验证代码

1.  它必须包含至少 3 个字符

2.  它必须包含至少一个元音

3.  它必须只包含字母

4.  仅当满足以上 3 个条件时，才必须启用提交按钮

    ```
    var $input = $('#myinput');
    var $error = $('.error');
    var $submit = $('#submit');
    var Filters = {
        min: {
            re: /.{3,}/,
            error: 'Must be at least 3 characters.'
        },
        char: {
            re: /[a-z]/i,
            error: 'Must be only letters.'
        },
        vowel: {
            re: /[aeiou]/i,
            error: 'Must have at least one vowel.'
        }
    };

        function test(value, filters) {
            var isValid = false;
            for (var i in filters) {
                isValid = filters[i].re.test(value);
                $error.hide();
                $submit.show();
                if (!isValid) {
                    $error.show().text(filters[i].error);
                    $submit.hide();
                    break;
                }
            }
            return isValid;
        }

        $input.on('keyup blur', function() {
            test(this.value, Filters);
        }); 
    ```

但是，它仍然接受数字.. 考虑输入是 aa99。它的启用按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T07:47:30.017

在我在你的最后一个问题中发布的演示`aa99`中没有验证尝试它[http://jsbin.com/ezatap/6/edit](http://jsbin.com/ezatap/6/edit)。

而不是`/[a-z]/i`使用`/^[a-z]+$/i`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T07:47:37.807

正如您使用 JavaScript 标记您的问题一样

这是一个纯 JavaScript 解决方案，这可能会对您有所帮助。

```
<input type="text" id="inputBox" onkeyup="CheckMe(this);" />
<input type="button" id="btn" disabled="disabled" />

<script type="text/javascript" language="javascript">
    var vowels = ['a', 'e', 'i', 'o', 'u'];
    function CheckMe(sender) {
        if (sender.value.length < 3) {
            document.getElementById('btn').disabled = true;
            return;
        }
        for (i = 0; i < sender.value.length; i++) {
            if (!isNaN(sender.value[i]) || vowels.indexOf(sender.value[i]) < 0) {
                document.getElementById('btn').disabled = true;
                return;
            }
        }
        document.getElementById('btn').disabled = false;
    }
</script> 
```

# jquery - jquery .submit() + 禁用输入文件

> ID：12435550
> 
> 赞同：1
> 
> 时间：2012-09-15T07:43:25.397
> 
> 标签：jquery, html

我有一个表单，一旦用户选择了一张照片，它就使用 .change() 和 .submit() 上传照片。在 submit() 开始避免同时多次上传之后，我现在尝试在输入文件上实现禁用。

HTML：

```
 <form action="includes/photos.php" id="joinPhotoUploadForm" enctype="multipart/form-data">
    <input type="file" name="file" id="file"><br>
  </form> 
```

查询：

```
$('input#file').change(function() {
    $('form#joinPhotoUploadForm').submit();
    $('input#file').prop('disabled', true);     // Prevent Multiple Files Uploads
  }
}); 
```

问题在于 IE 下只有 input#file 在 .submit() 开始第二次上传之前被禁用。

有没有办法防止在 .submit() 开始之前发生禁用？

还有另一种方法可以实现这一目标吗？还有什么我可以禁用的？我可以取消绑定 .change() 吗？注意：禁用稍后启用（在ajax返回成功后）。

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T07:46:45.247

如果文件输入被禁用，您需要阻止表单再次提交。第二个 eventListener 将为您执行此操作。

```
$('input#file').change(function() {
    $('form#joinPhotoUploadForm').submit();
    $('input#file').prop('disabled', true);     // Disable to Prevent Multiple Files Uploads
});

$("#joinPhotoUploadForm").submit(function(e) {
  if ($(this).find("#file").is(":disabled")) {
    e.preventDefault();
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-01T05:56:45.993

我喜欢这样做：`$('#myform').trigger( 'reset' );`

# c# - ObservableCollection 过滤器选择项

> ID：12435551
> 
> 赞同：2
> 
> 时间：2012-09-15T07:43:27.307
> 
> 标签：c#, .net, observablecollection, selectedindex

我有一个问题，我不知道如何解决。

我有一个可观察的集合，我在文本框中键入时过滤项目，问题是当我选择过滤的项目时，我得到错误的选择索引。

例如，在过滤实际选定的索引为 2 后，我有一个项目，但因为它在我键入时设置集合，如果剩下的唯一过滤项目是 1，它会将索引设置为 1。

那么如何选择正确的项目。就像在邮件应用程序中一样，让我的问题更容易理解

这是选择更改事件：

```
private void searchToDoItemsListBox_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    if (searchToDoItemsListBox.SelectedIndex == -1)
        return;
    NavigationService.Navigate(new Uri("/DetailsPage.xaml?selectedItemSearch=" + searchToDoItemsListBox.SelectedIndex, UriKind.Relative));
    searchToDoItemsListBox.SelectedIndex = -1;
} 
```

这是详细信息页面：

```
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
{
    if (NavigationContext.QueryString.TryGetValue("selectedItemSearch", out selectedIndexSearch))
    {
        int indexSearch = int.Parse(selectedIndexSearch);
        DataContext = App.ViewModel.AllToDoItems[indexSearch];
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:47:27.190

绑定到 SelectedItem

```
<ListBox SelectedItem="{Binding Selected, Mode=TwoWay}" ItemsSource="Binding={Items}">
</ListBox> 
```

你必须字段：

```
public ObservableCollection<ItemType> Items {get;set;} //setted while filtering, does it? 
```

和

```
private ItemType _selected;
public ItemType Selected
{
  get 
  {
    return _selected;
  }
  set 
  { 
     _selected = value;
     //here you can save the item. 
     //For example save the item id, and navigate to DetailsPage
  }
} 
```

然后，您可以从列表中获取项目：

```
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
    {
        if (NavigationContext.QueryString.TryGetValue("selectedItemSearch", out selectedIndexSearch))
        {
            int id = int.Parse(selectedIndexSearch);
            DataContext = GetById(id)
        }
    }

  public ItemType GetByIf(id) 
  {
    for(int i = 0; i < App.ViewModel.AllToDoItems.Count; i++)
    {
        if(App.ViewModel.AllToDoItems[i].Id == id) return App.ViewModel.AllToDoItems[i];
    }
    return null;
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T08:38:24.210

现在已经这样做了，我现在什么也得不到。它导航但没有显示。

```
if (NavigationContext.QueryString.TryGetValue("selectedItemSearch", out selectedIndexSearch))
        {
            //int indexSearch = int.Parse(selectedIndexSearch);
            //DataContext = App.ViewModel.AllToDoItems[indexSearch];

            int id = int.Parse(selectedIndexSearch);
            DataContext = GetById(id);
        }

public object GetById(int id)
{
    for(int i = 0; i < App.ViewModel.AllToDoItems.Count; i++)
    {
        if (App.ViewModel.AllToDoItems[i].ToDoItemId == id) 
        return App.ViewModel.AllToDoItems[i];
    }
    return null;
} 
```

AllToDoItems 如下所示，它是一个可观察的集合；这是在下面从数据库加载集合的 ViewModel 中。ToDoItem 是模型中的表名。

```
 // Specify the query for all to-do items in the database.
        var toDoItemsInDB = from ToDoItem todo in toDoDB.Items
                            select todo;

        // Query the database and load all to-do items.
        AllToDoItems = new ObservableCollection<ToDoItem>(toDoItemsInDB); 
```

模型如下所示：

```
 public Table<ToDoItem> Items;
    //public Table<ToDoFavCategory> Categories;
}

[Table]
public class ToDoItem : INotifyPropertyChanged, INotifyPropertyChanging
{

    // Define ID: private field, public property, and database column.
    private int _toDoItemId;

    [Column(IsPrimaryKey = true, IsDbGenerated = true, DbType = "INT NOT NULL Identity", CanBeNull = false, AutoSync = AutoSync.OnInsert)]
    public int ToDoItemId
    {
        get { return _toDoItemId; }
        set
        {
            if (_toDoItemId != value)
            {
                NotifyPropertyChanging("ToDoItemId");
                _toDoItemId = value;
                NotifyPropertyChanged("ToDoItemId");
            }
        }
    } 
```

也许更容易看一下我从 [http://msdn.microsoft.com/en-us/library/hh286405(v=vs.92).aspx构建它的链接](http://msdn.microsoft.com/en-us/library/hh286405(v=vs.92).aspx)

# php - PHP 5.4.7、Apache、win7、sqlite。错误信息：调用未定义的函数 sqlite_open()

> ID：12435554
> 
> 赞同：0
> 
> 时间：2012-09-15T07:44:00.513
> 
> 标签：php, apache, sqlite

我的环境：
PHP 5.4.7
Apache
win7
DB 是 sqlite。
我已经取消注释下面的脚本

```
extension=php_pdo_mysql.dll
extension=php_pdo_odbc.dll
extension=php_pdo_pgsql.dll
extension=php_pdo_sqlite.dll
extension=php_pgsql.dll
extension=php_sqlite3.dll 
```

但它仍然显示错误信息：调用未定义的函数 sqlite_open()。

下面是我的 php 测试代码。
任何人都可以帮助我吗？

```
<?php
phpinfo();
$db = sqlite_open('d:/testsqlite');
$rs = sqlite_query($db, 'select * from testtable');
print_r(sqlite_fetch_all($rs)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T07:50:58.773

您只取消了扩展的注释，它不能保证它会起作用

您可以： 通过执行`phpinfo()`函数或`php -i`在您`CLI`的 .

编辑1：

您有 sqlite3 版本，您需要像 [sqlite3::open()一样静态调用 sqlite 类方法](http://www.php.net/manual/en/sqlite3.open.php)

这是[查询示例](http://www.php.net/manual/en/sqlite3.query.php)。

而且你总是可以使用[PDO](http://php.net/manual/en/book.pdo.php)扩展。

```
$db = new PDO('sqlite:mysqlitedb.db'); 
```

[连接到 PDO](http://www.php.net/manual/en/pdo.connections.php)

# android-ndk - Android NDK 的不同操作系统版本的功能合规性

> ID：12435555
> 
> 赞同：1
> 
> 时间：2012-09-15T07:44:07.970
> 
> 标签：android-ndk, version-compatibility

NDK 功能是否依赖于操作系统？例如，如果我有 Gingerbread 2.3，我可以只使用 2.3 及以下版本的 NDK 功能，还是可以利用 NDK 提供的最新修复和功能？

我问的主要原因是因为 NDK 似乎与 SDK 完全不同，并且由于 C/C++ 的性质和操作系统的底层内部结构应该是跨版本兼容的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T19:16:22.783

不幸的是，它与 SDK 一样依赖于版本。NDK 的每个版本都捆绑了不断增长的平台列表。通常，ndk-build 根据**AndroidManifest.XML**中定义的*android:targetSdkVersion*选择平台。

# php - 将浮点数格式化为两位小数

> ID：12435556
> 
> 赞同：36
> 
> 时间：2012-09-15T07:44:20.257
> 
> 标签：php, string

我想格式化一个浮点值，我必须保留两位小数。

例如，如果我有一个价格为 的浮点数`5.2`，我希望它被格式化为`5.20`.

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-09-15T07:49:16.910

尝试[`number_format`](http://www.php.net/manual/en/function.number-format.php)：

```
echo number_format("5.2",2) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-15T07:46:51.250

你会想要使用`printf`or `sprintf`。您可以在[php 文档](http://php.net/manual/en/function.sprintf.php)中阅读更多相关信息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-15T07:51:36.757

如果您只是想确保以两位小数显示数字，您还可以使用[number_format](http://www.php.net/number_format)或（如果这是货币值）[money_format](http://www.php.net/manual/en/function.money-format.php)。

例如：`echo number_format('5.2', 2);`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-05T08:05:25.967

尝试这个：

```
number_format((float)$foo, 2, '.', ''); 
```

# html - 如何格式化我的电子邮件 php 邮件程序

> ID：12435557
> 
> 赞同：1
> 
> 时间：2012-09-15T07:44:23.740
> 
> 标签：html, phpmailer, php

当我发送带有 html 标签的电子邮件时。Gmail 也会显示标签。这是为什么？任何解决方案？如何根据我的代码为图片加粗文字彩色文字？这是我的电子邮件内容代码

```
 smtpmailer("$email", 'website@yahoo.com', '<html><body>website.lk Password recovery', 'Password recovery','Dear "'.$name."\"\n\nUse your new password to login and reset your password as you wish.\nTo reset password go to your \"My Account\" page and click \"Change my password\"\n\n"."Here is your new password:\n\n"."Password: "."$password"."\n\nBack to get bump: www.website.lk\n\nRegards,\n website.lk Admin\n</body></html>");

$reset_msg="Recovery completed. Check your e-mail !";       
}else{
$reset_msg="Error in sending email.Try again !";

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T07:53:35.883

通过包括以下标题

```
 $headers  = 'MIME-Version: 1.0' . "\r\n";
    $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

    $headers .= 'To: Mary <mary@example.com>, Kelly <kelly@example.com>' . "\r\n";
    $headers .= 'From: Birthday Reminder <birthday@example.com>' . "\r\n";
    $headers .= 'Cc: birthdayarchive@example.com' . "\r\n";
    $headers .= 'Bcc: birthdaycheck@example.com' . "\r\n";

    mail($to, $subject, $message, $headers); 
```

来源，

[http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

如果您使用的是 PHP Mailer，

```
$mail->MsgHTML($body);

$mail->AddAttachment("images/image1.gif");      
$mail->AddAttachment("images/image2.gif"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T08:00:25.590

如果您正在使用此功能：

```
function smtpmailer($to, $from, $from_name, $subject, $body) { 
    global $error;
    $mail = new PHPMailer();  // create a new object
    $mail->IsSMTP(); // enable SMTP
    $mail->SMTPDebug = 0;  // debugging: 1 = errors and messages, 2 = messages only
    $mail->SMTPAuth = true;  // authentication enabled
    $mail->SMTPSecure = 'ssl'; // secure transfer enabled REQUIRED for GMail
    $mail->Host = 'smtp.gmail.com';
    $mail->Port = 465; 
    $mail->Username = GUSER;  
    $mail->Password = GPWD;           
    $mail->SetFrom($from, $from_name);
    $mail->Subject = $subject;
    $mail->Body = $body;
    $mail->AddAddress($to);
    if(!$mail->Send()) {
        $error = 'Mail error: '.$mail->ErrorInfo; 
        return false;
    } else {
        $error = 'Message sent!';
        return true;
    }
} 
```

然后将`$mail->Body = $body;`代码行更改为：

```
$mail->MsgHTML($body); 
```

此更改将允许您通过 PHPMailer 发送 HTML 电子邮件，您还可以添加`$mail->CharSet = 'UTF-8';`以避免将来出现特殊字符问题...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-14T05:19:44.707

使用 $mail->IsHTML(ture); 如果在phpmailer ..

# regex - 如果路径是子目录或基本路径列表中的文件（具有全球路径），如何签入 perl

> ID：12435559
> 
> 赞同：1
> 
> 时间：2012-09-15T07:44:41.970
> 
> 标签：regex, perl, shell, path, glob

我需要一种最佳方式来匹配具有大量可能的基本路径（可能是许多目录级别）的路径。基本路径本身可能是有效的 shell 全局路径

例如

我需要匹配下面列表中的路径**/a/b-12/c/d/e/fg/hi/94.txt**：

1.  /a/b-*/e
2.  /x/y*
3.  /x/{a,b,s*}e
4.  /a/{a,b*,c}2/c/d
5.  /a/b*/c/e
6.  ...

这个列表很长，有 10Ks 这样的路径。一旦我们确定了可能的父路径，我可以通过 chdir/cd 到路径等来验证它们。

我希望在列表中进行正则表达式匹配，但我很难匹配 shell 全局路径。是否有 Perl 模块可以帮助我。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T09:03:48.237

您可能想`Text::Glob`从 CPAN 尝试。你不必使用`glob_to_regex`，我只是在玩它，但这匹配：

```
#!/usr/bin/env perl
use strict;
use warnings;
use Text::Glob qw(glob_to_regex);

my @arr = ('/a/b-12/c/d/e/fg/hi/94.txt');

my $regex = glob_to_regex('/a/{a,b*,c}2/c/d/e/fg/hi/94.txt');
print "REGEX: $regex\n";
if ($arr[0] =~ m/$regex/) {
  print "Matches\n";
} 
```

# c - 如何返回一个变量名并为c中返回的变量赋值

> ID：12435560
> 
> 赞同：1
> 
> 时间：2012-09-15T07:45:03.660
> 
> 标签：c, variables, return, assign

我想使用一个动态变量，其值在运行时会发生变化。

例如

```
char * aVar = "ABC";
char * bVar = "DEF";
char * cVar = "XYZ";

char *dVar = NULL;

dVar = foo1();

print dVar; 
```

`foo1`内部调用`foo2`，它应该返回变量名（如`"aVar"`，`"bVar"`或`"cVar"`）。`foo1`应该根据`foo2`返回值返回所述变量的值。

要获取变量名，我们可以使用（非标准）宏：

```
##define GET_VAR(varname) #varname; 
```

...但是我怎样才能获得命名变量的值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T07:51:43.983

这里的简单答案是这在 C 中是不可能的。

更长的答案是，这需要语言中的自省和动态特性，这通常只在 Python 等脚本语言中看到。即使在那里做这样的事情也不被鼓励。

我建议您重新考虑您正在尝试解决的问题，并检查是否可能没有更好的方法来解决它。也许使用数组、映射或哈希表可能是适合您的替代方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T07:55:06.190

C 不是动态语言——你不能真正做到这一点。为此，您最好使用某种数据结构，例如字典（键值存储，关联数组，无论您如何称呼它）。

好吧，除非……除非你有一个符合 POSIX 的系统并且你喜欢邪恶的动态加载。

```
#include <dlfcn.h>
#include <stdio.h>

int globalVarOne = 1;
int globalVarTwo = 2;
int globalVarThree = 3;

int getValueOfVariableNamed(const char *name)
{
    void *ptr = dlsym(RTLD_SELF, name);
    return *(int *)ptr;
}

int main()
{
    printf("globalVarOne = %d\n", getValueOfVariableNamed("globalVarOne"));
    // etc.
} 
```

印刷：

```
globalVarOne = 1 
```

请注意，这只适用于全局变量。

编辑：正如@oldrinb 指出的那样，如果你`void *ptr = GetProcAddress(GetModuleHandle(NULL), name);`用`void *ptr = dlsym(RTLD_SELF, name);`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T08:47:52.450

您不能直接在 C 中执行此操作。

但是，您可以执行以下操作：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

typedef struct Binding
{
  int* pIntVar;
  const char* IntVarName;
  struct Binding* pNext;
} Binding;

Binding* Bindings = NULL;

void BindVar(const char* IntVarName, int* pIntVar)
{
  Binding* b;
  if ((b = malloc(sizeof(Binding))) != NULL)
  {
    b->IntVarName = IntVarName;
    b->pIntVar = pIntVar;
    b->pNext = NULL;
    if (Bindings == NULL)
    {
      Bindings = b;
    }
    else
    {
      Binding* bs = Bindings;
      while (bs->pNext != NULL)
      {
        bs = bs->pNext;
      }
      bs->pNext = b;
    }
  }
  else
  {
    fprintf(stderr, "malloc() failed\n");
    exit(-1);
  }
}

int* GetVarPtr(const char* IntVarName)
{
  Binding* bs = Bindings;
  while (bs != NULL)
  {
    if (!strcmp(bs->IntVarName, IntVarName))
    {
      return bs->pIntVar;
    }
    bs = bs->pNext;
  }
  fprintf(stderr, "variable \"%s\" not bound yet!\n", IntVarName);
  exit(-1);
}

int main(void)
{
  int ABC = 111, DEF = 222, XYZ = 333;
  const char* varName = NULL;

  BindVar("ABC", &ABC);
  BindVar("DEF", &DEF);
  BindVar("XYZ", &XYZ);

  printf("variable \"%s\" = %d\n", "ABC", *GetVarPtr("ABC"));
  printf("variable \"%s\" = %d\n", "DEF", *GetVarPtr("DEF"));
  printf("variable \"%s\" = %d\n", "XYZ", *GetVarPtr("XYZ"));

  // Pick a variable randomly by name

  switch (rand() % 3)
  {
  case 0: varName = "ABC"; break;
  case 1: varName = "DEF"; break;
  case 2: varName = "XYZ"; break;
  }

  printf("variable \"%s\" (selected randomly) = %d\n", varName, *GetVarPtr(varName));

  return 0;
} 
```

输出（[ideone](http://ideone.com/o1Bld)）：

```
variable "ABC" = 111
variable "DEF" = 222
variable "XYZ" = 333
variable "DEF" (selected randomly) = 222 
```

由于`GetVarPtr()`返回一个指向变量的指针，你不仅可以获取变量的值，还可以设置它。

您甚至可以将指针隐藏在宏后面：

```
#define VARIABLE(NAME) (*GetVarPtr(NAME)) 
```

通过这种方式，您可以执行以下操作（[ideone](http://ideone.com/7Fhag)）：

```
VARIABLE("ABC") = 1;
VARIABLE("DEF") = 2;
VARIABLE("XYZ") = 3;

printf("variable \"%s\" = %d\n", "ABC", VARIABLE("ABC"));
printf("variable \"%s\" = %d\n", "DEF", VARIABLE("DEF"));
printf("variable \"%s\" = %d\n", "XYZ", VARIABLE("XYZ")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T07:48:48.867

您不能在运行时使用宏。

你应该使用一个数组。

# c# - 如何从字符串中获取文件名和格式并使用此名称和格式保存？

> ID：12435571
> 
> 赞同：-1
> 
> 时间：2012-09-15T07:48:14.797
> 
> 标签：c#

```
wc.DownloadFile(src.Value, @"d:\MyImages\" + images.ToString("D6")); 
```

`wc`是`WebClient`。

`src.Value`例如将包含`www.google.com\danny.jpg`. 我想把它保存在我的硬盘上`danny.jpg`。如果在`src.Value`那里，`www.google.com\moses.png`那么在我的硬盘上它将是`moses.png`。

要将其按原样保存`src.Value`，请使用文件名及其格式、png、jpg、gif 或任何格式。

变量图像不在`Form1`我每次保存时向上移动的级别，例如：

```
images++; 
```

因此，现在每次从我的硬盘上的链接中保存文件时，它将是 000000，然后是 000001，然后是 000002，等等。但是我想保存它们，因为它们出现在链接中的名称和格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T08:06:14.137

尝试使用`Uri.Segments`：

示例代码：

```
String fileToDL = @"http://stackoverflow.com/Content/Img/stackoverflow-logo-250.png";
Uri uri = new Uri(fileToDL );
var filename = uri.Segments.Last();
wc.DownloadFile(Path.Combine(@"d:\MyImages", filename), fileToDL); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T07:57:34.347

我们举一个简单的例子：

```
string str = "www.google.com/xyz/abc/danny.jpg";
string[] arr = str.Split('/');
string img = arr[arr.length-1];    
wc.DownloadFile(src.Value, @"d:\MyImages\" + img); 
```

`img`将为您提供要保存在硬盘上的文件名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T08:05:11.287

对我来说，很难理解你的问题是什么。因此，我将尝试回答到目前为止我所理解的内容。

我猜你在用正确的名称保存下载的图像时遇到了一些问题。

在您的示例中，您有某种`src`使用 property调用的控件或类`Value`。我假设在这种情况下`src.Value`会输出例如“www.google.com\moses.png”。您只需从此字符串中提取“moses.png”并将其存储在单独的变量中。

关于MSDN所说的`WebClient`应该没有问题。

请查看[MSDN - WebClient.DownloadFile Method (String, String)](http://msdn.microsoft.com/en-us/library/ez801hhe.aspx)以获取有关此方法和示例的更多信息。

我希望我能帮助你，但如果不能，请更好地描述你的问题:)

# jquery - 我如何使用 AJAX 在服务器上发布数据？

> ID：12435575
> 
> 赞同：-1
> 
> 时间：2012-09-15T07:49:03.157
> 
> 标签：jquery, ajax, html, cordova

我正在使用 HTML5。我想用 AJAX 调用 API。但是，执行此操作并不成功。请帮助我如何使用它。我想实现这个代码PhoneGap。如果有任何问题或最佳逻辑，请建议我...

```
<!DOCTYPE html>
<html>
<head>
<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.1.min.js"></script>
<script>
function loadXMLDoc()
{
alert("okey");
  $.ajax({
  type: 'GET',
  url:'http://www.internationalprom.com/mobile/ipa.php',
  data:{ft:'get',cat:'gallery',action:'top100'},
  success: onsuccess,
  error : onerror,

});
function onsuccess(data){
alert("success 1: "+ data );
// if got success then How i retrive Data from here?

}

function onerror(data){
alert("error 1 :"+data);
}

}
</script>
</head>

<body>

<h2>My CD Collection:</h2>
<div id="myDiv"></div>
<button type="button" onclick="loadXMLDoc()">Get my CD collection</button>

</body>
</html> 
```

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T08:13:16.013

我假设您知道服务器返回什么信息，但不知道格式。
服务器返回的数据是一个 JSON 字符串（JavaScript Object Notation）。
在互联网上有很多教程如何解析它，最简单的是，`eval(JSONstring)`但如果你搜索 Stackoverflow，你会发现关于 eval 调用[`When is JavaScript's eval() not evil?`](https://stackoverflow.com/q/197769/1087848)等的问题。这可能会让人知道它的推荐程度。希望这对你有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T08:15:37.677

如果你想发布数据，你需要使用 HTTP POST 而不是 HTTP GET 并且还`json.stringify()`像这样调用 JSON：

```
$.ajax({
    type: 'POST',
    url:'http://www.internationalprom.com/mobile/ipa.php',
    data: JSON.stringify({ft:'get',cat:'gallery',action:'top100'}),
    success: onsuccess,
    error : onerror
}); 
```

# php - php cookie 错误

> ID：12435580
> 
> 赞同：0
> 
> 时间：2012-09-15T07:49:42.657
> 
> 标签：php, cookies

```
<form action=userLogin.php method=post>
    <div id="login">
        <div id="submit" class="h">Log In</div>
        &nbsp;Email
        <br>
        &nbsp;<input id="email" name="email" type="email" required>
        <br>
        &nbsp;Password
        <br>
        &nbsp;<input name="pass" type="password" required=required><br>
        &nbsp;<a href="recover.php">Forgot your password</a><br>

        <div id="submit">
            <input type="checkbox">&nbsp;Remember&nbsp;&nbsp;
            <div id="h">
                <input type="submit" value="Log in"></div>
        </div>
    </div>
<?php
if (empty($_POST['pass']) == false) {
    $uname = $_POST['email'];

    $pass = $_POST['pass'];

    include("config.php");
    $query   = $mysqli->query("SELECT * FROM user WHERE email='$uname' AND password='$pass'");
    $numrows = mysqli_num_rows($query);
    while ($row = mysqli_fetch_array($query)) {

        if ($numrows == 0) {
            ?>
            <script>
                $(document).ready(function () {
                    $("#alert").fadeIn();
                });</script>
        <?php
        }
        else {
            $id = $row[id];
            setcookie('userId', $id);

        }
    }
}
?> 
```

这是我的代码，它获取用户数据并检查用户是否存在并在用户的浏览器上设置 cookie。当我检查 cookie 是否已设置时，我只能看到 phpMyAdmin cookie 而不是我的 userId cookie。您可以看到屏幕截图![在此处输入图像描述](../Images/8351230b189dc392b5012cbff07677f9.png)，浏览器卡住并自动关闭但是当我使用`setcookie('userId','$id');`cookie 编辑 setcookie 函数时，它的值是`%24id`[$ ID]。那么如何在变量 $row[id] 的值中设置 cookie 是我的电脑或服务器或我的代码的错误？当我在没有 qoutes 的情况下使用带有 $id 的 chrome 时，错误来了`This webpage is not available The webpage at localhost/mysite/mysite/userLogin.php might be temporarily down or it may have moved permanently to a new web address`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T07:58:06.283

cookie 必须与标头一起发送。

“setcookie() 定义了一个 cookie 与其余 HTTP 头一起发送。与其他头一样，cookie 必须在脚本的任何输出之前发送（这是协议限制）。这需要您调用此函数在任何输出之前，包括和标签以及任何空格。”

[http://php.net/manual/en/function.setcookie.php](http://php.net/manual/en/function.setcookie.php)

# php - PHP $_SERVER['REMOTE_ADDR'] 显示 IPv6

> ID：12435582
> 
> 赞同：10
> 
> 时间：2012-09-15T07:49:51.940
> 
> 标签：php, ipv6

我在 PHP 中遇到了 $_SERVER['REMOTE_ADDR'] 的问题，即使服务器使用的是 IPv4，它也会提供类似 IPv6 的值。

谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-15T09:17:52.820

然后服务器接受 IPv6 套接字上的连接。某些操作系统可以在 IPv6 套接字上同时执行 IPv4 和 IPv6。当这种情况发生时，IPv6 地址将看起来像`::ffff:192.0.2.123`，或者`::ffff:c000:027b`是相同的地址，但以十六进制编写。

如果您看到 IPv6 地址，`2a00:8640:1::224:36ff:feef:1d89`那么您的网络服务器确实*可以*通过 IPv6 访问 :-)

无论如何，要将所有内容转换回规范形式，您可以使用以下内容：

```
// Known prefix
$v4mapped_prefix_hex = '00000000000000000000ffff';
$v4mapped_prefix_bin = pack("H*", $v4mapped_prefix_hex);

// Or more readable when using PHP >= 5.4
# $v4mapped_prefix_bin = hex2bin($v4mapped_prefix_hex); 

// Parse
$addr = $_SERVER['REMOTE_ADDR'];
$addr_bin = inet_pton($addr);
if( $addr_bin === FALSE ) {
  // Unparsable? How did they connect?!?
  die('Invalid IP address');
}

// Check prefix
if( substr($addr_bin, 0, strlen($v4mapped_prefix_bin)) == $v4mapped_prefix_bin) {
  // Strip prefix
  $addr_bin = substr($addr_bin, strlen($v4mapped_prefix_bin));
}

// Convert back to printable address in canonical form
$addr = inet_ntop($addr_bin); 
```

使用此代码，当您输入以下内容之一时：

```
::ffff:192.000.002.123
::ffff:192.0.2.123
0000:0000:0000:0000:0000:ffff:c000:027b
::ffff:c000:027b
::ffff:c000:27b
192.000.002.123
192.0.2.123 
```

你总是得到规范的 IPv4 地址`192.0.2.123`作为输出。

当然，IPv6 地址会作为规范的 IPv6 地址返回：`2a00:8640:0001:0000:0224:36ff:feef:1d89`变为`2a00:8640:1::224:36ff:feef:1d89`等。

# blackberry - 黑莓中标签和编辑字段之间的间距

> ID：12435584
> 
> 赞同：-2
> 
> 时间：2012-09-15T07:50:12.000
> 
> 标签：blackberry, label, space, blackberry-editfield

嗨，我只有一个这样创建的 EditField 实例：

```
EditField editField = new EditField("Name", ""); 
```

但它显示标签“名称”和编辑字段（填写表格）之间没有空格。我想在它们之间定义一个特定的空间，但我想知道怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T08:26:14.447

像这样在“name”中给你想要多少空间作为“name”

```
EditField editField = new EditField("Name     : ", ""); 
```

# java - 为什么这个 XML DOM Parser 不能正确解析 rtept、name 和 cmt 标签？

> ID：12435587
> 
> 赞同：1
> 
> 时间：2012-09-15T07:50:27.303
> 
> 标签：java, android, xml, dom, xml-parsing

我现在完全被这个 DOM XML Parser 难住了。我得到了两个标签的错误信息，我无法弄清楚为什么这两个标签（名称和 cmt）保持相同的信息而不是正确的信息。

我使用的 XML 如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<gpx xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.topografix.com/GPX/1/1" xsi:schemaLocation="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd" version="1.1" creator="http://ridewithgps.com/">
  <metadata>
    <name>Home Test</name>
    <link href="http://ridewithgps.com/routes/1714475">
      <text>Home Test</text>
    </link>
    <time>2012-09-13T16:08:10Z</time>
  </metadata>
  <rte>
    <name>Home Test</name>
    <rtept lat="39.41333" lon="-77.4624">
      <name>Right</name>
      <cmt>Turn right onto Grouse Dr</cmt>
    </rtept>
    <rtept lat="39.41288" lon="-77.46297000000004">
      <name>Right</name>
      <cmt>Turn right onto Hunting Horn Ln</cmt>
    </rtept>
    <rtept lat="39.41431" lon="-77.46625">
      <name>Right</name>
      <cmt>Turn right onto Partridge Way</cmt>
    </rtept>
    <rtept lat="39.41431" lon="-77.46625">
      <name>Left</name>
      <cmt>Turn left onto Hunting Horn Ln</cmt>
    </rtept>
    <rtept lat="39.41288" lon="-77.46297000000004">
      <name>Left</name>
      <cmt>Turn left onto Grouse Dr</cmt>
    </rtept>
    <rtept lat="39.41333" lon="-77.4624">
      <name>Right</name>
      <cmt>Turn right onto Grouse Ct</cmt>
    </rtept>
  </rte>
</gpx> 
```

我整理的 XML Parser 如下：

```
 public void parseXMLFile(String fullpath) {
        String metadata_name = null;
        String metadata_link_href = null;
        String metadata_link_name = null;
        String metadata_time = null;
        String rte_name = null;
        Double point_lat = null;
        Double point_lon = null;
        Double last_lat = null;
        Double last_lon = null;
        String point_name = null;
        String point_cmt = null;
        Float distance_to = null;

        // File f = new File(fullpath);
        String fileContents = null;
        try {
            fileContents = readFileAsString(fullpath);

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        try {
            Document doc = (Document) loadXMLFromString(fileContents);
            doc.getDocumentElement().normalize();
            Element root = doc.getDocumentElement();
            Log.d("XML", "ROOTNODE:" + root.getNodeName());

            NodeList nodeList = doc.getElementsByTagName("metadata");

            Node nodee = nodeList.item(0);
            Log.d("XML", "NODELISTLENGTH1:" + 
                    nodee.getChildNodes().getLength());

            for (int i = 0; i < nodee.getChildNodes().getLength(); i++) {

                Node node = nodee.getChildNodes().item(i);
                if (node.getNodeName().equalsIgnoreCase("name")) {
                    metadata_name = node.getTextContent();

                } else if (node.getNodeName().equalsIgnoreCase("link")) {
                    NamedNodeMap attributes = node.getAttributes();
                    if (attributes.getNamedItem("href") != null) {
                        String href = attributes.getNamedItem("href")
                                .getNodeValue();
                        metadata_link_href = href;

                    }
                    metadata_link_name = node.getTextContent();
                    // Log.i("XML", "link node:" + node.getTextContent());
                } else if (node.getNodeName().equalsIgnoreCase("time")) {

                    metadata_time = node.getTextContent();
                }

            }

            // DO THE RTE NODES AFTER THIS
            NodeList nodeList2 = doc.getElementsByTagName("rte");

            Node nodee2 = nodeList2.item(0);
            Log.d("XML", "NODELISTLENGTH2:"
                    + nodee2.getChildNodes().getLength());

            for (int i = 0; i < nodee2.getChildNodes().getLength(); i++) {

                Node node = nodee2.getChildNodes().item(i);

                if (node.getNodeName().equalsIgnoreCase("name")) {

                    rte_name = node.getTextContent();

                } else if (node.getNodeName().equalsIgnoreCase("rtept")) {

                    NamedNodeMap attributes = node.getAttributes();
                    if (attributes.getNamedItem("lat") != null) {
                        // STORE THE LAST LAT FOR MEASURING DISTANCE BETWEEN
                        if (point_lat != null) {
                            last_lat = point_lat;
                        }
                        point_lat = Double.parseDouble(attributes.getNamedItem(
                                "lat").getNodeValue());

                    }
                    if (attributes.getNamedItem("lon") != null) {
                        // STORE THE LAST LON FOR MEASURING DISTANCE BETWEEN
                        if (point_lon != null) {
                            last_lon = point_lon;
                        }
                        point_lon = Double.parseDouble(attributes.getNamedItem(
                                "lon").getNodeValue());

                    }
                    NodeList rteptList = doc.getElementsByTagName("rtept");
//                  NodeList rteptList = node.getChildNodes();

                    Node nodee3 = rteptList.item(0);
                    Log.d("XML", "NODELISTLENGTH3:"
                            + nodee3.getChildNodes().getLength());
                    for (int i1 = 0; i1 < nodee3.getChildNodes().getLength(); i1++) {
                        Node rteptNode = nodee3.getChildNodes().item(i1);
                        if (rteptNode.getNodeName().equalsIgnoreCase("name")) {

                            point_name = rteptNode.getFirstChild().getNodeValue();

                        } else if (rteptNode.getNodeName().equalsIgnoreCase("cmt")) {

                            point_cmt = rteptNode.getFirstChild().getNodeValue();

                        }

                    }
                    // DO THE DATABASE STORAGE HERE
                    Log.i("XML", "name node:" + metadata_name);
                    Log.i("XML", "link node:" + metadata_link_name);
                    Log.i("XML", "link attribute [href]:" + metadata_link_href);
                    Log.i("XML", "time node:" + metadata_time);
                    Log.i("XML", "rte_name:" + rte_name);
                    Log.i("XML", "point_lat:" + point_lat.toString());
                    Log.i("XML", "point_lon:" + point_lon.toString());
                    Log.i("XML", "point_name:" + point_name);
                    Log.i("XML", "point_cmt:" + point_cmt);
                }

            }
        } catch (Exception e) {
            String estr = e.getStackTrace().toString();
            Log.d("XML", "XML Exception: " + e + ":" + estr);
        }
    } 
```

`

我看到输出是错误的......

```
09-15 03:37:20.963: D/XML(14951): NODELISTLENGTH3:5
09-15 03:37:20.963: I/XML(14951): name node:Home Test
09-15 03:37:20.963: I/XML(14951): link node:      Home Test    
09-15 03:37:20.963: I/XML(14951): link attribute [href]:http://ridewithgps.com/routes/1714475
09-15 03:37:20.963: I/XML(14951): time node:2012-09-13T16:08:10Z
09-15 03:37:20.963: I/XML(14951): rte_name:Home Test
09-15 03:37:20.963: I/XML(14951): point_lat:39.41288
09-15 03:37:20.963: I/XML(14951): point_lon:-77.46297000000004
09-15 03:37:20.963: I/XML(14951): point_name:Right
09-15 03:37:20.963: I/XML(14951): point_cmt:Turn right onto Grouse Dr
09-15 03:37:20.973: D/XML(14951): NODELISTLENGTH3:5
09-15 03:37:20.973: I/XML(14951): name node:Home Test
09-15 03:37:20.973: I/XML(14951): link node:      Home Test    
09-15 03:37:20.973: I/XML(14951): link attribute [href]:http://ridewithgps.com/routes/1714475
09-15 03:37:20.973: I/XML(14951): time node:2012-09-13T16:08:10Z
09-15 03:37:20.973: I/XML(14951): rte_name:Home Test
09-15 03:37:20.973: I/XML(14951): point_lat:39.41333
09-15 03:37:20.973: I/XML(14951): point_lon:-77.4624
09-15 03:37:20.973: I/XML(14951): point_name:Right
09-15 03:37:20.973: I/XML(14951): point_cmt:Turn right onto Grouse Dr 
```

为什么 point_name 总是“向右”而 point_cmt 总是“向右转到 Grouse Dr”？我该如何解决？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T08:13:59.117

尝试在您的代码中替换以下代码段。

```
 Node nodee3 = rteptList.item(0);
                    Log.d("XML", "NODELISTLENGTH3:"
                            + nodee3.getChildNodes().getLength());
                    for (int i1 = 0; i1 < nodee3.getChildNodes().getLength(); i1++) {
                        Node rteptNode = nodee3.getChildNodes().item(i1);
                        if (rteptNode.getNodeName().equalsIgnoreCase("name")) {

                            point_name = rteptNodenode.getTextContent();

                        } else if (rteptNode.getNodeName().equalsIgnoreCase("cmt")) {

                            point_cmt = rteptNodenode.getTextContent();

                        }

                    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T13:23:38.247

在你的代码中我看到

```
NodeList rteptList = doc.getElementsByTagName("rtept");
// NodeList rteptList = node.getChildNodes();

Node nodee3 = rteptList.item(0); 
```

您当前的代码仅获取第一个“rtept”节点并获取“名称”和“cmt”，因此仅使用第一个节点的值。

注释掉的行在正确的轨道上。您需要从当前节点获取子节点并在其中找到“rtept”节点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T01:08:33.740

我决定使用 JOOX 来完成它，因为代码更容易理解......

```
public void parseXMLFile(String fullpath) {
    String metadata_name = null;
    String metadata_link_href = null;
    String metadata_link_name = null;
    String metadata_time = null;
    String point_lat = null;
    String point_lon = null;
    String last_lat = null;
    String last_lon = null;
    String point_name = null;
    String point_cmt = null;
    String fileContents = null;

    try {
        fileContents = readFileAsString(fullpath);

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    try {
        Document doc = (Document) loadXMLFromString(fileContents);

        for (Match metadata : $(doc).find("metadata").each()) {
            Match c = metadata.children();
            for (int i = 0; i < c.size(); i++) {
                metadata_name = c.find("name").text();
                metadata_link_href = c.find("link").attr("href").toString();
                metadata_link_name = c.find("link").find("text").text();
                metadata_time = c.find("time").text();
            }
        }

        for (Match rte2 : $(doc).xpath("//rte").andSelf().each()) {
            rte2.children();
            for(Match rtetag : rte2.children().each()) {
                if(rtetag.tag().equalsIgnoreCase("name")) {
                    rtetag.text();
                }
                if(rtetag.tag().equalsIgnoreCase("rtept")) {
                    for(Match rtepttag : rtetag.children().andSelf().each()) {
                        if(rtepttag.tag().equals("name")) {
                            point_name = rtepttag.text();
                        }
                        if(rtepttag.tag().equals("cmt")) {
                            point_cmt = rtepttag.text();
                        }
                        if(rtepttag.tag().equals("rtept")) {
                            if(last_lon == null) {
                                last_lon = point_lon;
                            }
                            if(last_lat == null) {
                                last_lat = point_lat;
                            }
                            point_lat = rtepttag.attr("lat");
                            point_lon = rtepttag.attr("lon");

                            //done parsing? here's some log stuff to check
                             Log.d("XML", "META_NAME:" + metadata_name);
                             Log.d("XML", "META_LINK_HREF:" + metadata_link_href);
                             Log.d("XML", "META_LINK_NAME:" + metadata_link_name);
                             Log.d("XML", "META_TIME:" + metadata_time);
                             Log.d("XML", "POINT_NAME:" + point_name);
                             Log.d("XML","POINT_CMT:"+point_cmt);
                             Log.d("XML", "POINT_LAT:" + point_lat);
                             Log.d("XML", "POINT_LON:" + point_lon);

                        }
                    }
                }
            }
        }

    } catch (Exception e) {
        String estr = e.getStackTrace().toString();
        Log.d("XML", "XML Exception: " + e + ":" + estr);
    }
} 
```

# arrays - 未排序数组的二分查找

> ID：12435588
> 
> 赞同：-1
> 
> 时间：2012-09-15T07:50:29.267
> 
> 标签：arrays, search

我试图用谷歌搜索这个主题，但找不到任何令人满意的东西。问题是：我们能否将未排序数组的二分搜索应用到可以在 O(logN) 左右完成的搜索。

请有人为我指出这个问题的正确解决方案。PS：我有 80% 的把握这篇文章可能是重复的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T07:51:45.770

您不能对未排序的数组进行二进制搜索。就那么简单。单调递增或递减函数对于二分查找至关重要，因此您可以决定在哪一半继续查找。

# php - 在结果中间显示广告

> ID：12435589
> 
> 赞同：0
> 
> 时间：2012-09-15T07:50:42.343
> 
> 标签：php, search-engine

我目前在我的一个网站上使用[sphider](http://sphider.eu)，我的问题是如何将结果页面分成两部分以添加 200 像素的间隔来放置广告位。

代码：

```
 <?php 
extract($search_results);
?>

<?php if ($search_results['did_you_mean']){?>
    <div id="did_you_mean">
    <?php echo $sph_messages['DidYouMean'];?>: <a href="<?php print 'index.php?query='.quote_replace(addmarks($search_results['did_you_mean'])).'&search=1'?>"><?php print $search_results['did_you_mean_b']; ?></a>?
    </div>
<?php  }?>  

<?php if ($search_results['ignore_words']){?>
    <div id="common_report">
    <?php while ($thisword=each($ignore_words)) {
        $ignored .= " ".$thisword[1];
    }       
    $msg = str_replace ('%ignored_words', $ignored, $sph_messages["ignoredWords"]); 
    echo $msg; ?>
    </div>
<?php  }?>  

<?php if ($search_results['total_results']==0){?>
    <div id ="result_report">
        <?php 
        $msg = str_replace ('%query', $ent_query, $sph_messages["noMatch"]);
        echo $msg;
        ?>
    </div>
<?php  }?>  

<?php if ($total_results != 0 && $from <= $to){?>
    <div id ="result_report">
    <?php  
    $result = $sph_messages['Results'];
    $result = str_replace ('%from', $from, $result);
    $result = str_replace ('%to', $to, $result);
    $result = str_replace ('%all', $total_results, $result);
    $matchword = $sph_messages["matches"];
    if ($total_results== 1) {
        $matchword= $sph_messages["match"];
    } else {
        $matchword= $sph_messages["matches"];
    }

    $result = str_replace ('%matchword', $matchword, $result);   
    $result = str_replace ('%secs', $time, $result);
    echo $result;
    ?>
    </div>
<?php  }?>  

<?php if (isset($qry_results)) {
?>

<div id="results">

<!-- results listing -->

    <?php foreach ($qry_results as $_key => $_row){
        $last_domain = $domain_name;
        extract($_row);
        if ($show_query_scores == 0) {
            $weight = '';
        } else {
            $weight = "[$weight%]"; 
        }
        ?>
        <?php  if ($domain_name==$last_domain && $merge_site_results == 1 && $domain == "") {?>
        <div class="idented">
        <?php }?>
        <b><?php print $num?>.</b> <?php print $weight?>
        <a href="<?php print $url?>" class="title"> <?php print ($title?$title:$sph_messages['Untitled'])?></a><br/>
        <div class="description"><?php print $fulltxt?></div>
        <div class="url"><?php print $url2?> - <?php print $page_size?></div>
        <?php  if ($domain_name==$last_domain && $merge_site_results == 1 && $domain == "") {?>
            [ <a href="<?php print 'index.php?query='.quote_replace(addmarks($query)).'&search=1&results='.$results_per_page.'&domain='.$domain_name?>">More results from <?php print $domain_name?></a> ]
            </div class="idented">
        <?php }?>
        <br/>
    <?php  }?>
 </div>
<?php }?>

<!-- links to other result pages-->
<?php if (isset($other_pages)) {
    if ($adv==1) {
        $adv_qry = "&adv=1";
    }
    if ($type != "") {
        $type_qry = "&type=$type";
    }
?>
    <div id="other_pages">
    <?php print $sph_messages["Result page"]?>:
    <?php if ($start >1){?>
                <a href="<?php print 'index.php?query='.quote_replace(addmarks($query)).'&start='.$prev.'&search=1&results='.$results_per_page.$type_qry.$adv_qry.'&domain='.$domain?>"><?php print $sph_messages['Previous']?></a>
    <?php  }?>  

    <?php  foreach ($other_pages as $page_num) {
                if ($page_num !=$start){?>
                    <a href="<?php print 'index.php?query='.quote_replace(addmarks($query)).'&start='.$page_num.'&search=1&results='.$results_per_page.$type_qry.$adv_qry.'&domain='.$domain?>"><?php print $page_num?></a>
                <?php } else {?>    
                    <b><?php print $page_num?></b>
                <?php  }?>  
    <?php  }?>

    <?php if ($next <= $pages){?>   
            <a href="<?php print 'index.php?query='.quote_replace(addmarks($query)).'&start='.$next.'&search=1&results='.$results_per_page.$type_qry.$adv_qry.'&domain='.$domain?>"><?php print $sph_messages['Next']?></a>
    <?php  }?>  

    </div>

<?php }?>

<div class="divline">
</div> 
```

我也不知道有一个实时 PHP 代码编辑器，如果你知道，请评论和分享，以便我添加链接！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T08:31:06.327

假设 $from 和 $to 是结果编号，因此您将显示“Showing results 10 to 30 of 100”，例如：

```
<div id="results">

<!-- results listing -->

<?php $adbreak = ($to - $from) / 2;
    <?php foreach ($qry_results as $_key => $_row){
    <?php if ($adbreak == 0) { ?>
        <div id="results-adbreak">
            <img src="buy-a-car.jpg" alt="one careful owner!" />
        </div>
    <?php }
          $adbreak--;
     ?>

// rest of your code 
```

这将在结果页面的一半左右放置一个 div（给或取一个）。您显然可以将广告替换为您想要的任何内容。

添加类似的东西：

```
<?php $adbreak = ($to - $from) / 2;
<?php if ($adbreak < 5) $adbreak = -1; ?> 
```

如果结果列表太短，将确保它根本不显示。

如果你事先不知道 $to 和 $from，你仍然可以这样做，但你必须先从查询结果中计算出等值。

# .net - 跨线程操作无效；从我在进度条中使用的线程以外的线程访问的控件“listview1”

> ID：12435591
> 
> 赞同：0
> 
> 时间：2012-09-15T07:51:05.913
> 
> 标签：.net, vb.net, multithreading, vb.net-2010

我收到这个错误..

我正在尝试使用超过 1000 条记录处理数据库插入方法的进度条。我需要进度条在线程中加载完全相同的进程..

我得到了错误；跨线程操作无效；控件'listview1' 从创建它的线程以外的线程访问。

```
 Imports System.IO
Public Class Form1
    Private WithEvents DT As New DataTable
    Private Delegate Sub AsyncDelegate(ByVal value As Integer)
    Private ProgressUpdater As New AsyncDelegate(AddressOf UpdateProgress)
    Private DataLoader As AsyncDelegate
    Private DataLoaderIAsync As IAsyncResult
    Private UpdateIncrement As Integer

    Private Sub LoadListAttendance()
        Dim txtLine As String = ""
        ListView1.Items.Clear()
        If File.Exists(strFileNameAndPath) = True Then
            Dim objReader As New StreamReader(strFileNameAndPath)

            Do While objReader.Peek() <> -1
                Dim strLine As String = objReader.ReadLine()
                If Split(strLine, " ")(0) = "" Then MessageBox.Show("Invalid file.", SysMsg, MessageBoxButtons.OK) : Exit Sub
                ListView1.Items.Add(Split(strLine, " ")(0))
                ListView1.Items(ListView1.Items.Count - 1).SubItems.Add(Mid(Split(strLine, " ")(1), 1, 8))
                ListView1.Items(ListView1.Items.Count - 1).SubItems.Add(Mid(Split(strLine, " ")(1), 9, 4))
                ListView1.Items(ListView1.Items.Count - 1).SubItems.Add(Mid(Split(strLine, " ")(1), 13, 2))
            Loop
        End If
    End Sub

    Private Sub Button2_Click(sender As System.Object, e As System.EventArgs) Handles Button2.Click
        'Initialize the progress bar.

        'Run a scalar command to select the row count and set the progress maximum

        'Calculate a percentage for the Row Changed event.
        '  ie if total recs is 1,000,000 set the progress amount to 10% of that.
        '  *See DT_RowChanged

        UpdateIncrement = 100000

        'DeEnable any controls you may not want the user to touch until the 
        'load is complete.

        'Load the data Ascync
        DataLoader = New AsyncDelegate(AddressOf LoadData)
        DataLoaderIAsync = DataLoader.BeginInvoke(0, New AsyncCallback(AddressOf LoadData_Completed), Nothing)

    End Sub

    Private Sub LoadData()

        'Your Load data code.
        'This sample code loads 1,000,000 recs

        'Do not access any controls in the procedure
        If Not checkServer() = True Then frmServerSet.ShowDialog()
        For x As Integer = 0 To ListView1.Items.Count - 1
            'If RecExist_2("tbltxt", "date", ListView1.Items(x).SubItems(1).Text, "id", ListView1.Items(x).Text, False) = False Then
            sqlSTR = "insert into tbltxt (id,date,time,code) values"
            sqlSTR = sqlSTR & " ( '" & ListView1.Items(x).Text & "','" & ListView1.Items(x).SubItems(1).Text & "','" & ListView1.Items(x).SubItems(2).Text & "', '" & ListView1.Items(x).SubItems(3).Text & "')" ','" & t1 & "')"

            ExecuteSQLQuery(sqlSTR)

            'End If
        Next
        MsgBox("ok")
    End Sub

    Private Sub LoadData_Completed()

        'Async op has completed.
        'Call the endinvoke to the delegate and unlock the UI

        'Do not access any controls in this procedure

        DataLoader.EndInvoke(DataLoaderIAsync)

        Me.Invoke(New AsyncDelegate(AddressOf UnlockUI), New Object() {Nothing})

    End Sub

    Private Sub UnlockUI()
        'Do what you want to the UI Here.
        ProgressBar1.Visible = False

    End Sub

    Private Sub UpdateProgress(ByVal value As Integer)
        'Updates the progress bar from the thread it was
        'created on.
        If ProgressBar1.InvokeRequired Then
            ProgressBar1.Invoke(ProgressUpdater, New Object() {value})
        Else
            If value > ProgressBar1.Maximum Then value = ProgressBar1.Maximum
            ProgressBar1.Value = value
        End If

    End Sub

    Private Sub DT_RowChanged(ByVal sender As Object, ByVal e As System.Data.DataRowChangeEventArgs) Handles DT.RowChanged
        'Handle a row change
        'Do not access any controls from this procedure

        Static counter As Integer = 1

        'first make sure the row is being added
        If e.Action = DataRowAction.Add Then
            'next check for an increment.  In this case I have a hard coded
            '100,000 Which is 10% of the million records that I know I have.

            'Do not update the progress bar on every record

            If counter Mod UpdateIncrement = 0 Then
                UpdateProgress(counter)
            End If
            counter += 1
        End If

    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T08:05:07.040

LoadData 在后台线程上运行；您**无法**从此线程中与列表视图（甚至读取值）交谈。更常见。您将*在 UI 线程上从 UI*构建一些模型（我将有一些自定义类的列表，将每个值表示为属性），然后使该模型可用于工作线程。然后在后台线程中，您只能访问*与 UI 无关*的模型。

另外：不要连接值来生成 SQL。那就是自杀——这是一个明显的 SQL 注入风险。请改用无参数查询，或为您处理参数化的工具。

# php - 如何在类的私有函数中获取函数中变量的值？

> ID：12435596
> 
> 赞同：0
> 
> 时间：2012-09-15T07:51:43.367
> 
> 标签：php, class, function, variables

我有一个如下的 PHP 类

```
<?php
class Test{
  var $conf = array('a' => 1, 'b' => 2, c => 3);

  private function do_something(){
    // Do something Here
    function do_something_else(){
      // How to get the variable value for $conf ???? o.O
    }
  }
}
?> 
```

我想访问`$conf`函数内部`do_something_else()`。在上层函数中，我可以将其作为 访问`$this->conf`，但我想`$this`在内部函数中将不可用。访问该函数内的变量的最佳方法是什么？

我无法传递值，因为该函数将由 WordPress CMS 中的内置函数调用，因此此处不能选择传递参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T08:09:26.167

我相信你需要的是匿名函数，这里有一些解决方案。您可以在 PHP 5.3 中执行以下操作：

```
 class Test{
    var $conf = array('a' => 1, 'b' => 2, 'c' => 3);

    private function do_something(){
        // Do something Here
        $that = $this;
        $do_something_else = function() use($that) {
            echo $that->conf;
        };

        $do_something_else();   
    }
} 
```

或者`$this`直接在[匿名](http://php.net/manual/en/functions.anonymous.php)函数上使用，但仅限 PHP 5.4。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T08:11:24.933

为什么不保持简单

IE

```
<?php
class Test{
  private $conf;

  private function _construct()
  {
     $this->conf = array('a' => 1, 'b' => 2, c => 3);
  }
  private function do_something_else(){
      // How to get the variable value for $conf ???? o.O
      // NOW THIS BIT IS EASY $this->conf;
  }
  private function do_something(){
    // Do something Here

  }
}
?> 
```

# java - 有助于在 Android 中进行代码检查的工具

> ID：12435602
> 
> 赞同：4
> 
> 时间：2012-09-15T07:52:44.880
> 
> 标签：java, android, eclipse, eclipse-plugin

是否有任何好的工具或 Eclipse 插件可以扫描我的 Android 项目并识别可能的“内存泄漏”、“强制关闭”的易受攻击代码以及 Java 和/或 Android 的其他通用代码标准。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T07:52:44.880

一个很好的工具是 Eclipse + Android-SDK 中可用的“LINT”工具。

> [http://tools.android.com/tips/lint](http://tools.android.com/tips/lint)

另一个不错的发现是“FindBugs”，它可以定位 Java 错误并提出改进建议。

> ```
> http://findbugs.sourceforge.net/
> http://findbugs.cs.umd.edu/eclipse/ 
> ```

你有什么其他工具可以推荐吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T08:00:57.913

这不能回答问题，但确实提供了替代方案。

在我看来，Intellij IDEA 几乎在所有方面都比 Eclipse 好。它的代码检查器与 Android Lint 和 Findbugs 相结合非常强大。IDEA 发现、报告和可视化可能的错误、“代码异味”和重构建议的方式非常棒。我不知道有任何 IDE 也可以完成这项工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-16T05:44:15.500

除了[android-lint](/questions/tagged/android-lint "显示标记为“android-lint”的问题")，它已经在您的 ADT 安装中可用并发现 Android 特定问题，我推荐[Findbugs 和 CodePro Analytix](https://stackoverflow.com/questions/11720413/findbugs-vs-google-codepro-analytix-eclipse-plugins)用于标准 Java 代码检查。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-16T06:32:30.933

强制关闭只是代码中任何未捕获的异常，例如`NullPointerException`. 您可以通过将堆栈跟踪输出读取到 logcat 来调试这些问题。

对于内存分析，我建议您从观看[Android 应用程序的内存管理](http://youtu.be/_CruQY55HOk?hd=1)（Google I/O 2011 的一个会议）开始，并阅读配套的博客文章[Android 应用程序的内存分析](http://android-developers.blogspot.com/2011/03/memory-analysis-for-android.html)。他们为调试内存泄漏和其他问题的策略和工具提供了一些很好的建议。

# ruby-on-rails - 测试目录与 Rspec 一起存在

> ID：12435610
> 
> 赞同：17
> 
> 时间：2012-09-15T07:54:09.393
> 
> 标签：ruby-on-rails, ruby, testing, rspec

我正在测试`lib/pdf_helper.rb`。所以我创建`spec/lib`目录。`pdf_helper_spec.rb`然后我在`spec/lib`目录中创建一个文件。当我测试那个 pdf 文件夹应该在公共文件夹中时，这是我的代码

```
require 'spec_helper'
require 'pdf_helper'

    describe "Pdfhelpers" do
        it "Should be in public folder" do
        file = File.new ("#{Rails.root}/public/pdf")
        if File.exist?(file) == 'true'
            puts "Success"
        else
            puts"failed"
        end

    end
  end 
```

我对吗？？我是 RSpec 的新手。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-05-15T16:40:22.373

```
expect(File).not_to exist("#{Rails.root}/public/pdf") 
```

适用于文件和文件夹。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-02-03T03:39:05.860

路径名也被证明对于这类事情是相当可读的。

```
require 'pathname'

# ...

expect(Pathname.new('file.txt')).to exist
expect(Pathname.new('file.txt')).to be_file
expect(Pathname.new('dir')).to be_directory 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-15T07:59:51.957

如果您想知道文件是否为目录，则可以使用该`File.directory?`功能。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-06-23T15:31:29.567

我自己研究这个，这是我发现的：

```
File.directory?("#{Rails.root}/public/pdf").should be true 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-22T20:50:53.140

我更喜欢做这样的事情：

```
photo_path = photo.path
expect { File.open(photo_path) }.to_not raise_error(Errno::ENOENT)
photo.destroy!
expect { File.open(photo_path) }.to raise_error(Errno::ENOENT) 
```

这也适用于目录

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-31T06:25:09.730

```
 expect(File.directory?("#{Rails.root}/public/pdf")).to be true 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-21T12:47:27.400

将此匹配器定义放在适当的地方：

```
RSpec::Matchers.define :be_a_directory do
  match do |dir_path|
    Dir.exist?(dir_path)
  end
end 
```

之后，您将能够像这样使用它（例如）：

```
describe "#{Rails.root}/public/pdf" do
  subject { "#{Rails.root}/public/pdf" }
  it { is_expected.to  be_a_directory }
end 
```

# c# - 使用 Func 验证对象

> ID：12435611
> 
> 赞同：0
> 
> 时间：2012-09-15T07:54:15.323
> 
> 标签：c#, linq, validation, c#-4.0, lambda

我想写一个简单的验证方法，比如[FluentValidation](http://fluentvalidation.codeplex.com/)

我写了这个简单的代码：

```
public static class ExtensionMethods<T> where T : class 
{
    public static bool Validate(Func<T, bool> expression)
    {
        //What I should write?????
    }
} 
```

我不知道我应该在方法体中写什么以及如何使用它。

* * *

**编辑 1**：

我想为所有对象编写这样的代码：

```
ExtensionMethods<MyObject>.Validate(o=>o.ID == 1).AddMessage(.... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T08:08:40.660

首先，流畅接口的关键是你的方法——`Validate`在这种情况下——不返回布尔值，而是返回一个可以再次调用的对象。所以让我们说这里是T。此外，您并没有真正使用扩展方法语法，您只是定义了一个静态方法。在我们开始之前的最后一件事——你在你的类定义中设置了泛型参数 T，但这对于静态类来说是不正确的，因为它们永远不会用任何特定的泛型参数实例化。您需要将其添加到方法签名，而不是类签名：

因此，这是您进行这两项更改的方法：

```
public static class ExtensionMethods
{
    public static T Validate<T>(this T myObj, Func<T, bool> expression) 
         where T : class
    { 
    }
} 
```

现在，你想在那里做什么，你只需调用验证表达式。它是一个委托，因此您只需将其作为函数调用，将第一个参数 your 传递给它`MyObject`作为参数。如果它返回 false，我假设整个语句将引发异常：

```
public static T Validate(this T myObj, Func<T, bool> expression)
{
    if (expression(myObj))
    {
         return myObj; // Return the object for further processing.
    }
    else
    {
         throw new OhNoValidationFailedException("aaaaaaaaahhh!");
    }
} 
```

您现在可以像这样使用它：

```
MyObject myObject = new MyObject();
myObject.Validate(o => o.MyProperty == 7).Do().Something().Else(); 
```

# marklogic - Marklogic 错误计数和 Facet 结果 Xquery

> ID：12435620
> 
> 赞同：0
> 
> 时间：2012-09-15T07:56:22.397
> 
> 标签：marklogic

调用`search:search`不会返回预期的方面结果计数。下面是两个示例文件和我使用的代码。

Page1.xml

```
<pages xmlns="http://marklogic.com/docs">
  <page>
    <elementNode>data1</elementNode>
    <textNode>text1</textNode>
  </page>
  <page>
    <elementNode>data2</elementNode>
    <textNode>text2</textNode>
  </page>
  <page>
    <elementNode>data3</elementNode>
    <textNode>text3</textNode>
  </page>
  <page>
    <elementNode>data4</elementNode>
    <textNode>text4</textNode>
  </page>
</pages> 
```

Page2.xml

```
<pages xmlns="http://marklogic.com/docs">
  <page>
    <elementNode>data5</elementNode>
    <textNode>text5</textNode>
  </page>
  <page>
    <elementNode>data6</elementNode>
    <textNode>text6</textNode>
  </page>
  <page>
    <elementNode>data7</elementNode>
    <textNode>text7</textNode>
  </page>
  <page>
    <elementNode>data8</elementNode>
    <textNode>text8</textNode>
  </page>
</pages> 
```

我还创建了一个元素范围索引`<elementNode>`。**现在我用 searchText " text1** " 执行了 XQuery

```
xquery version "1.0-ml";
declare namespace html = "http://www.w3.org/1999/xhtml";
declare namespace ts= "http://marklogic.com/docs";

import module namespace search ="http://marklogic.com/appservices/search" at "/MarkLogic/appservices/search/search.xqy";

declare variable $options :=  
  <options xmlns="http://marklogic.com/appservices/search">
    <searchable-expression xmlns:ex="http://marklogic.com/docs">//ex:page</searchable-expression>
    <grammar>
      <starter strength="30" apply="grouping" delimiter=")">(</starter>
      <starter strength="40" apply="prefix" element="cts:not-query">NOT</starter>
      <joiner strength="10" apply="infix" element="cts:or-query" tokenize="word">OR</joiner>
      <joiner strength="20" apply="infix" element="cts:and-query" tokenize="word">AND</joiner>
      <joiner strength="50" apply="constraint">:</joiner>
    </grammar>
    <constraint name="elementNode">
      <range collation="http://marklogic.com/collation/" type="xs:string">
        <facet-option>limit=1000</facet-option>
        <element ns="http://marklogic.com/docs" name="elementNode"/>
        <searchable-expression xmlns:ex="http://marklogic.com/clover/docs-xml">//ex:elementNode</searchable-expression>
      </range>
    </constraint>
  </options>;

let $searchResult := search:search("text1", $options)
return $searchResult 
```

这产生了这个结果：

```
<search:response xmlns="" xmlns:search="http://marklogic.com/appservices/search">
  <search:result index="1" uri="Page1.xml" path="fn:doc(&quot;Page1.xml&quot;)/*:pages/*:page[1]">
    <search:snippet>
      <search:match path="fn:doc(&quot;Page1.xml&quot;)/*:pages/*:page[1]/*:textNode">
        <search:highlight>text1</search:highlight>
      </search:match>
    </search:snippet>
  </search:result>
  <search:facet name="elementNode">
    <search:facet-value name="data1" count="1">data1</search:facet-value>
    <search:facet-value name="data2" count="1">data2</search:facet-value>
    <search:facet-value name="data3" count="1">data3</search:facet-value>
    <search:facet-value name="data4" count="1">data4</search:facet-value>
  </search:facet>
</search:response> 
```

现在我在`facet-result`. 它应该只返回一个方面值，即来自**page1的****data1** ，因为只有**page1**具有所需的搜索表达式“ **text1** ”。而是给我整个文档中所有 textNode 值的结果。请帮助我 - 我们如何限制这一点？此外，计数给了我整个文档，但我想要的是页数匹配。******`facet-result`******

 ******* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T06:37:48.317

You use a searchable-expression, which causes search results to be portioned to those elements. Unfortunately that is not the case for facet counts, as mblakele explains. His suggestion of putting the page elements in their own document is one of two possible solutions here. The other one is defining the page element as fragment root. You can do so in the Admin interface of MarkLogic. You can find it among the database properties.

HTH!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T01:46:08.853

索引指向文档或片段，而不是元素。这类似于 RDBMS，其中索引指向行。您的示例 XML 和代码表明您将每个文档视为关系表。而是将文档视为行。

如果示例代码与实际应用程序相似，我可能会重构文档，以便每个“页面”元素都成为自己的文档。

此外，使用`http://marklogic.com/docs`. MarkLogic 可能决定在将来的某个版本中使用该名称空间，这可能会给您带来问题。选择一个您有合理期望控制的命名空间。******

# php - PHPdoc - 为 stdClass 的对象定义对象属性

> ID：12435623
> 
> 赞同：24
> 
> 时间：2012-09-15T07:57:07.357
> 
> 标签：php, phpdoc, code-documentation

我试图弄清楚是否可以使用 PHPdoc 来定义函数或对象方法返回的对象属性。

假设我有以下课程：

```
class SomeClass {
    public function staffDetails($id){

        $object = new stdClass();
        $object->type = "person";
        $object->name = "dave";
        $object->age = "46";        

        return $object;
    }
} 
```

现在，很容易定义输入参数。

```
 /**
 * Get Staff Member Details
 * 
 * @param   string  $id    staff id number
 * 
 * @return  object
 */

class SomeClass {
    public function staffDetails($id){
        $object = new stdClass();
        $object->type = "person";
        $object->name = "dave";
        $object->age = "46";        

        return $object;
    }
} 
```

问题是定义相关方法返回的输出对象（stdClass）的属性是否有类似的东西。这样另一个程序员就不必打开这个类并手动查看方法来查看返回对象返回了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-12-27T18:50:32.380

在这里是 4 年后，似乎仍然没有一种方法来注释您的问题中最初描述的 stdClass 对象的属性。

PSR-5 中提出了集合，但似乎已被否决：[https ://github.com/php-fig/fig-standards/blob/211063eed7f4d9b4514b728d7b1810d9b3379dd1/proposed/phpdoc.md#collections](https://github.com/php-fig/fig-standards/blob/211063eed7f4d9b4514b728d7b1810d9b3379dd1/proposed/phpdoc.md#collections)

似乎只有两个选项可用：

**选项1：**

创建一个代表您的数据对象的普通类并注释属性。

```
class MyData
{
    /**
     * This is the name attribute.
     * @var string
     */
    public $name;

    /**
     * This is the age attribute.
     * @var integer
     */
    public $age;
} 
```

**选项 2：**

[按照Gordon](https://stackoverflow.com/users/208809/gordon)的建议创建一个泛型`Struct`类型类并将其扩展为您的数据对象，使用[@property](https://phpdoc.org/docs/latest/references/phpdoc/tags/property.html)注释来定义可以使用和访问的泛型值。`__get``__set`

```
class Struct
{
    /**
     * Private internal struct attributes
     * @var array
     */
    private $attributes = [];

    /**
     * Set a value
     * @param string $key
     * @param mixed $value
     */
    public function __set($key, $value)
    {
        $this->attributes[$key] = $value;
    }

    /**
     * Get a value
     * @param string $key
     * @return mixed
     */
    public function __get($key)
    {
        return isset($this->attributes[$key]) ? $this->attributes[$key] : null;
    }

    /**
     * Check if a key is set
     * @param string $key
     * @return boolean
     */
    public function __isset($key)
    {
        return isset($this->attributes[$key]) ? true : false;
    }
} 
```

* * *

```
/**
 * @property string $name
 * @property integer $age
 */
class MyData extends Struct
{
    // Can optionally add data mutators or utility methods here
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-10-11T11:25:32.653

您只有两种方法来记录结果类的结构。

1.可以在评论文本中描述结构。例如：

```
class SomeClass 
{
    /**
     * Getting staff detail.
     * Result object has following structure:
     * <code>
     * $type - person type
     * $name - person name
     * $age - person age
     * </code>
     * @param string $id staff id number
     *
     * @return stdClass
     *
     */
    public function staffDetails($id){
        $object = new stdClass();
        $object->type = "person";
        $object->name = "dave";
        $object->age = "46";
        return $object;
    }
} 
```

2.可以创建一个继承stdClass的数据类型，它会有一个结果对象的注释。例如：

```
/**
 * @property string $type Person type
 * @property string $name Person name
 * @property integer $age Person age
 */
class DTO extends stdClass
{} 
```

并在您的其他课程中使用它

```
class SomeClass {

    /**
     * Getting staff detail.
     *
     * @param string $id staff id number
     *
     * @return DTO
     *
     */
    public function staffDetails($id){

        $object = new DTO();
        $object->type = "person";
        $object->name = "dave";
        $object->age = "46";

        return $object;
    }
} 
```

在我看来，这种方式比文本注释中的描述要好，因为它使代码更明显

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-01-29T00:56:12.623

如果您使用的是 PHP 7，则可以定义匿名类。

```
class SomeClass {
    public function staffDetails($id){
        $object = (new class() extends stdClass {
                public /** @var string  */ $type;
                public /** @var string  */ $name;
                public /** @var int     */ $age;
            });

        $object->type = "person";
        $object->name = "dave";
        $object->age  = 46;        

        return $object;
    }
} 
```

它适用于我的 IDE（在 NetBeans 中测试）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-17T23:16:32.937

例如`json_decode`，使用自己的类而不是使用自己的类更难`stdClass`，但在我的情况下，我只是创建了带有类定义的虚拟文件，实际上没有加载，我正在添加自己的类`@return`（适用于 vscode 上的 intelephense）。

PHPdocObjects.php

```
/**
 * class only for PHPdoc (do not include)
 */
class Member {
    /** @var string */
    public $type;
    /** @var string */
    public $name;
    /** @var string */
    public $age;
}

/**
 * Other format
 *
 * @property string $type;
 * @property string $name;
 * @property string $age;
 */
class MemberAlt {} 
```

SomeClass.php

```
 /**
 * Get Staff Member Details
 * 
 * @param   string  $id    staff id number
 * 
 * @return  Member  I'm in fact stdClass
 */

class SomeClass {
    public function staffDetails($id){
        $object = json_decode('{"type":"person","name":"dave","age":"46"}');
        return $object;
    }
} 
```

# php - 单击预览图像时显示 HTML 块？

> ID：12435625
> 
> 赞同：-1
> 
> 时间：2012-09-15T07:57:21.213
> 
> 标签：php, jquery, html

我想在单击预览图像时显示 HTML 块。为此，我使用了 jquery 图像库。它的工作方式类似于单击图像并显示完整图像，但我想显示 HTML 块而不是完整图像。

画廊的工作原理是这样的：

```
<a href="full.jpg"><img src="thum.png"></a> 
```

我想像这样使用它：

```
<a href="preview.html"><img src="preview.png"></a> 
```

可能是我在上面的代码中做错了。所以请大家建议我该怎么做。提前致谢。

我用这个jquery图片库[这个](http://gettopup.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T08:04:37.680

请使用 Jquery [load()](http://api.jquery.com/load/)

```
Example : $('#preview-page').load('preview.html'); 
```

现在根据您的意愿设计您的“预览页面”布局。祝你有美好的一天 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T08:06:50.750

看起来它需要你添加一些类。查看[示例](http://gettopup.com/examples)。这可能会给你一个更好的主意。不过，您确实应该在发布此内容之前进行更多研究，因为我很快就发现了。

# java - 在 Java EE 中实现全文搜索

> ID：12435628
> 
> 赞同：0
> 
> 时间：2012-09-15T07:57:43.990
> 
> 标签：java, lucene, elasticsearch

我正在制作一个需要全文搜索的应用程序，所以我找到了 Compass，但该项目不再维护并被 elasticsearch 取代。但是我不明白。我需要对自己的服务器进行请求（获取、放置）等然后解析 JSON 响应吗？没有像 Compass 中的注释吗？我不明白这是如何替代以及如何将它与 Java EE 一起使用。

还是有其他更好的项目可以使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T09:16:31.010

如今，Elasticsearch 是一个不错的选择，如果您喜欢 Compass，您一定会喜欢它。看看作者在这里给出的[这个](https://stackoverflow.com/questions/2271600/elasticsearch-sphinx-lucene-solr-xapian-which-fits-for-which-usage/2288211#2288211)答案，他解释了为什么他在 Compass 之后继续创建弹性搜索。事实上，elasticsearch 和 Solr 都让 Lucene 的使用变得非常容易，还为它添加了一些特性。你基本上有一个完整的搜索引擎服务器，它能够索引你的数据，然后你可以查询它以检索你索引的数据。

Elasticsearch 公开了 RESTful API 并且它是基于 JSON 的，但是如果您正在寻找 Compass 样式的注释，您可以查看[ElasticSearch 的对象搜索引擎映射器](https://github.com/aloiscochard/elasticsearch-osem/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T08:11:40.447

我会说尝试一下[lucene](http://lucene.apache.org/core/)或[solr](http://lucene.apache.org/solr/)。它创建了一个 DocumentFileSystem 以加快索引速度

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-25T05:46:51.677

我会推荐

1.  Elasticsearch，如果系统很大并且需要集群。
2.  Lucene 或 Solr，如果您想在低级别进行编码
3.  Hibernate 搜索，如果你使用 Hibernate 作为你的 ORM。

# javascript - 克隆具有 Twitter Bootstrap 弹出窗口的元素会在错误的位置产生弹出窗口

> ID：12435629
> 
> 赞同：2
> 
> 时间：2012-09-15T07:57:53.700
> 
> 标签：javascript, jquery, twitter-bootstrap, clone, popover

我在让 Bootstrap 弹出框与动态创建的元素一起工作时遇到了问题（但这是另一个问题）。

因此，作为一种解决方法，并且因为这些弹出框元素的内容本身并不是动态的，我决定创建一系列隐藏元素，这些元素在 HTML 加载时已经在 DOM 中。然后我计划使用 JQuery 的 clone() 克隆它们并将它们放在我需要的地方。

问题是，当新克隆的弹出框触发时，弹出框的位置错误。

HTML 看起来像这样

```
<div style="display: none">
    <span id="anid" class="popoverbottom label label-info" data-title="Title" data-content="Content">TAG</span>
</div> 
```

然后，我使用如下代码在 popoverbottom 类上注册 popover 事件：

```
$(".popoverbottom").popover( {placement : 'bottom',  trigger: 'hover', delay: { show: 500, hide: 100 }} ); 
```

然后我使用这样的 JQuery 代码克隆带有弹出框的元素：

```
e = $('#anid').clone(true);
e.attr('id','anewid'); 
```

然后我动态地 append() 新元素，它看起来很好。如果我将鼠标悬停在它上面，会触发一个弹出框，但它会出现在浏览器窗口的左上角 - 在左侧被截掉一半。

如果我使包含弹出框元素的 <div> 可见 - 即删除 display:none，则弹出框出现在原始的、非动态创建的 DOM 元素上，而不是新克隆的元素上。

这显然是因为在注册弹出框时，弹出框与原始元素绑定在一起。虽然 JQuery 的 .clone(true) 似乎复制了元素和关联的事件，但原始的弹出框位置没有更新。

有没有办法告诉弹出框它已被克隆并且需要将弹出框附加到新元素？

或者，我最好尝试让动态创建的弹出框在[这个 jsFiddle 片段](http://jsfiddle.net/KPeKS/4/)中工作。

*如上所述，我确实尝试过让这种动态方法发挥作用，但是遇到了多个弹出框会留在屏幕上并且在鼠标移开时不会隐藏的问题 - 但这是另一个问题*。

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T08:11:07.253

我认为问题在于，在您将所有克隆的弹出框节点添加到 DOM 之前，Bootstrap 会创建弹出框。您需要注册新添加的弹出框。在附加所有克隆节点之前，不要调用 $(".popoverbottom").popover() 。$.clone(true) 复制事件，但不附加函数。popover() 是一个函数，而不是一个事件。

# node.js - 如何在 Azure 上运行 node.js 服务器？

> ID：12435630
> 
> 赞同：1
> 
> 时间：2012-09-15T07:57:54.207
> 
> 标签：node.js, azure

我已按照本教程（[https://www.windowsazure.com/en-us/develop/nodejs/tutorials/create-a-website-(mac)/](https://www.windowsazure.com/en-us/develop/nodejs/tutorials/create-a-website-%28mac%29/)）进行操作，但没有收到回复期待我的节点服务器。

当我在本地运行节点时它可以工作，但一旦部署到 Azure，我就会收到此错误：

> iisnode 在处理请求时遇到错误。
> 
> HRESULT：0xb HTTP 状态：500 HTTP 原因：内部服务器错误

这是我的 server.js：

```
var http = require( "http" );

http.createServer(function ( req, res ) {
    res.writeHead( { "Content-Type": "text/plain"} );
    res.end( "Hello Azure!\n" );
} ).listen( process.env.port ); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T09:10:53.993

我自己尝试了与本教程完全相同的步骤，并且能够得到`Hello world`消息。这是我目前的部署：http: [//nodetestordinacc.azurewebsites.net/](http://nodetestordinacc.azurewebsites.net/)（注意，我将来可能会删除它）。

如果它全部在本地运行，那么您应该能够按照我在教程中所做的步骤并使其成功运行。

您可以验证步骤：

*   git init（我使用了 Github shell）
*   混帐添加。
*   git commit -m "初始提交"
*   git remote add azure [远程存储库的 URL]
*   git push 天蓝色大师

*[远程存储库*的URL]必须替换为教程开头提供的门户的 url：

![门户提供的 Git URL](../Images/4ac124937c34a0e36d0207d5115b8fce.png)

**更新：**

这是我使用的代码。请准确复制：

```
var http = require('http');
var port = process.env.port || 1337;
http.createServer(function(req, res){
    res.writeHead(200, {'Content-Type':'text/plain'});
    res.end('Hello World\n');
}).listen(port); 
```

# java - 如何在java中实现队列？越快越好

> ID：12435631
> 
> 赞同：-4
> 
> 时间：2012-09-15T07:57:58.263
> 
> 标签：java, performance

这是面试官提出的一个问题，在java中实现队列。基本上，这个队列只需要提供 Enqueue/Dequeue 操作。

执行速度更快的实现将获得更高的分数。假设每个方法将以相同的频率被调用。因此，每种方法都应该同样快。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T08:04:43.720

听起来他在寻找像[中断](http://code.google.com/p/disruptor/)库这样的环形缓冲区。

它可以比 ArrayBlockingQueue 快 10 倍。

我写了一个库，它不是那么快，但解决了一个不同的问题，即队列持久性。它也可以比 ArrayBlockingQueue 更快，但保留所有数据并且可以在进程之间共享。[Java编年史](https://github.com/peter-lawrey/Java-Chronicle)

* * *

“ 假设每个方法都以相同的频率被调用。” 如果这是真的，你只需要一个 1 的环形缓冲区。最简单的是 AtomicReference。注意：这是无锁和无 gc 的。

```
public class AtomicReferenceQueue<T> {
    private final AtomicReference<T> ringBufferOfOne = new AtomicReference<T>();

    /**
     * @return true if added.
     */
    public boolean add(T t) {
        return ringBufferOfOne.compareAndSet(null, t);
    }

    public void offer(T t) throws InterruptedException {
        while (!ringBufferOfOne.compareAndSet(null, t))
            if (Thread.interrupted())
                throw new InterruptedException();
    }

    public T poll() {
        return ringBufferOfOne.getAndSet(null);
    }

    public T take() throws InterruptedException {
        T t;
        while ((t = ringBufferOfOne.getAndSet(null)) == null)
            if (Thread.interrupted())
                throw new InterruptedException();
        return t;
    }
} 
```

事实上，在微秒级别上确保完全相同的频率是不可能的。如果入队频率几乎总是低于出队频率（而且你不介意烧掉一个 cpu ;），这个“环形缓冲区”会工作得最好

# c# - 在 C# 中对包含网格控件的列表框进行排序

> ID：12435634
> 
> 赞同：2
> 
> 时间：2012-09-15T07:58:40.440
> 
> 标签：c#, .net, wpf, xaml

我正在编写一个应用程序，该应用程序将显示几个 jpeg 的缩略图，并在其下方显示文件名。我想按文件名对这些进行排序。这些 jpeg 来自 zip 文件，我无法按排序顺序接收它们。我正在使用这样定义的列表框：

```
 <ListBox Name="listPanel1" ScrollViewer.HorizontalScrollBarVisibility="Disabled"  ScrollViewer.VerticalScrollBarVisibility="Auto" SelectionMode="Multiple" >
        <ListBox.ItemsPanel>
            <ItemsPanelTemplate>
                <WrapPanel Name="wrapPanel1" IsItemsHost="True" />
            </ItemsPanelTemplate>
        </ListBox.ItemsPanel>
        <TextBox Height="152" Name="tb_Messages" Width="244" />
    </ListBox> 
```

然后在代码中，我为 listPanel 中的每个缩略图添加了一个单独的网格控件。网格的第一行是图像，第二行是文件名。

```
 Grid grid = new Grid();
        ColumnDefinition col0 = new ColumnDefinition();
        RowDefinition row0 = new RowDefinition();
        RowDefinition row1 = new RowDefinition();
        col0.Width = new GridLength(140);
        row0.Height = new GridLength(140);
        grid.ColumnDefinitions.Add(col0);
        grid.RowDefinitions.Add(row0);
        grid.RowDefinitions.Add(row1);
        grid.Children.Add(thumbnailImage);
        grid.Children.Add(lb);
        Grid.SetRow(thumbnailImage, 0);
        Grid.SetColumn(thumbnailImage, 0);
        Grid.SetRow(fileName, 1);
        Grid.SetColumn(fileName, 0);
        listPanel1.Items.Add(grid); 
```

这种方法的好处之一是，当我选择图像时，图像和文件名都会突出显示。

如何根据文件名对列表框进行排序？

这是我的第一个 WPF 应用程序，所以我完全有可能以完全错误的方式处理这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T08:10:34.503

不要在代码中创建 UI！除非您正在创建用户控件。

1.  使用 a`ListBox`并将它的数据源绑定到表示图片的对象的集合

    ```
    <ListBox ItemSource="{Binding Pictures}"/> 
    ```

2.  在您的视图模型中，您将获得名称和其他属性，并且`Pictures`属性将返回排序集合（或过滤或其他）

    ```
    public IEnumerable<Picture> Pictures
    {
       get { return _picturesLoadedFromZip.OrderBy(whatever); }
    } 
    ```

3.  要显示缩略图和文件名，请使用[template](http://www.c-sharpcorner.com/resources/644/how-to-display-images-in-a-wpf-listbox.aspx)。

    ```
    <ListBoxItem Background="LightCoral" Foreground="Red" 
         FontFamily="Verdana" FontSize="12" FontWeight="Bold"> 
        <StackPanel Orientation="Horizontal"> 
          <Image Source="{Binding PathToFile}" Height="30"></Image>
          <TextBlock Text="{Binding FileName}"></TextBlock>
        </StackPanel>
    </ListBoxItem> 
    ```

您可以在[此处](http://www.progware.org/Blog/post/ListBoxes-with-DataBound-Images-in-WPF.aspx)或[此处](http://www.codeproject.com/Articles/18561/Custom-ListBox-Layout-in-WPF)找到更多相关信息。

# c# - SplitPage 文件中的虚拟数据

> ID：12435647
> 
> 赞同：0
> 
> 时间：2012-09-15T08:00:43.940
> 
> 标签：c#, visual-studio, microsoft-metro, visual-studio-2012

当我创建一个新的 Visual Studio Windows 8 商店项目 (C#) 时，如果我从 SplitPage 开始，我会得到虚拟数据，但是，如果我向项目添加新的 SplitPages，则不会有虚拟数据随之而来，如果我尝试主SplitPage（我创建实际项目时创建的那个）中的代码，我只会得到很多错误。

如何在“新添加的”SplitPages 中获取虚拟数据，而不仅仅是在主项目文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T02:09:35.203

您可以手动完成。您可以使用`ExampleDataSource`在任何示例中都可以找到的类。然后在 XAML 代码中，当您描述`CollectionViewSource`时，`Page.Resources`通常以如下方式绑定数据源：

```
 <CollectionViewSource
            x:Name="itemsViewSource"
            Source="{Binding YourDataSource}"/> 
```

在这里，您使用`Source`参数来指定绑定。现在使用参数`d:Source`。命名空间`d`用于描述事物，仅在设计器中使用（`d`我相信这就是它的原因）。

所以尝试将此参数添加到您的`CollectionViewSource`：

```
 d:Source="{Binding AllGroups, Source={d:DesignInstance Type=data:SampleDataSource, IsDesignTimeCreatable=True}}" 
```

假设它`SampleDataSource`具有属性`AllGroups`并且它是`ObservableCollection`，它应该可以工作。

希望我的回答能帮助任何处理 Win8 应用程序的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T23:01:16.997

微软员工的回答：这是不可能的。如果您将拆分页创建为新项目中的第一页，您只会获得虚拟数据。

# perl - Perl 中“has-a”和“is-a”关系中的内存使用和引用计数有什么区别？

> ID：12435648
> 
> 赞同：1
> 
> 时间：2012-09-15T08:00:47.937
> 
> 标签：perl, oop, perl-data-structures

我读了“Programming Perl”一书，在某些地方相当复杂。其中一个地方是第 12 章“对象”中的“实例析构函数”部分。本节说：

1.  Perl 中的对象在不再引用它们时会被销毁。
2.  `DESTROY`通过在其类中定义方法，有机会在对象将被回收之前捕获控制。
3.  尽管在 Perl 中很少需要析构函数，但某些对象可能有，例如，文件句柄或数据库连接，它们在内存系统之外。所以有必要专门去参加。
4.  Perl 不做分层破坏。

然后有一段我没看懂：

> **这仅适用于继承的类；**仅包含在当前对象中的对象（例如，较大散列中的一个值）将被自动释放和销毁。这就是为什么仅仅通过聚合（有时称为“has-a”关系）的容器通常比继承（“is-a”关系）更清晰和更清晰的原因之一。

我不明白这是什么意思。这是否意味着*不简单* *地包含在当前对象中的对象***不会****被** *自动释放和销毁*？

 ****我确实知道`DESTROY`在垃圾收集上调用的 a 是最近的，也是唯一的。`DESTROY`当实例没有引用时，不会调用其他覆盖的方法。但是，据我了解，当将实例的引用放置在另一个对象中时，会出现相同的行为。

有人会如此愉快地解释并**提供代码示例**吗？

* * *

**更新：**

实际上我正在寻找的是对**This only 适用于继承类的解释；**原来是这样的话：

*如果您有一个类的实例并且它有一个`DESTROY`方法，那么该方法将覆盖`DESTROY`父类的方法，但这不适用于对象，即`has-a`与相关对象的关系。它`DESTROY`不会被覆盖*

对不起，不清楚的问题，它会更适合英语语言和用法。谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T08:36:12.680

### 规则 1：Perl 中的对象在不再引用它们时被销毁。

```
{
  my $object = Class->new()
}
# there are no more references to $object
# (it is out of scope and can't be accessed by any means)
# Perl is free to garbage-collect it. 
```

### 规则 2：通过在其类中定义 DESTROY 方法，有机会在对象将要被回收之前捕获控制。

```
package Class;
sub new     { return bless({}, shift) }
sub DESTROY { print STDERR "The object is destroyed" }

####

{
  my $object = Class->new();
}
# before the object is garbage-collected, cleanup-operations should be manually performed
# like closing down connections, solving circular references
# any time, the object might print it's message. 
```

### 规则 4：Perl 不做分层破坏。

```
package AnotherClass;
use Class;
use parent 'Class';
sub DESTROY { print STDERR "subclass reporting dead" } 
```

现在 if`AnotherClass`将被实例化，只会 调用 的方法，`DESTROY`而**不是**的方法。这意味着没有分层破坏。这很明显，因为该方法会覆盖先前的条目。原来可以手动调用`AnotherClass`**`DESTROY``Class``DESTROY``DESTROY`**

 **使用父类和子类是一种 IS-A 关系：`AnotherClass`是一个`Class`.

如果我们有 YetAnotherClass：

```
package YetAnotherClass;
use Class;
sub new {return bless({member => Class->new()}, shift) }

{
   my $object = YetAnotherClass->new();
}
# $object goes out of scope (zero reference count) and will be destroyed.
# Therefore, the reference count of the "member" drops to zero
# The member will therefore be destroyed and print it's message. 
```

这是聚合的情况（`Class`是 的数据成员`YetAnotherClass`）和 HAS-A 关系。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T10:33:58.127

1.  在 has-a 关系中，对象通常*具有*对另一个对象的引用。因此，给定类`Van`， a 的实例`Van`具有*轮子*。当该实例被销毁时，perl（程序）将`Wheel`分别调用对象的析构函数，因为它们是两个不同的对象。

2.  在 is-a 关系中，`Van` *IS*的引用与所讨论`Vehicle`对象的引用相同。因此，它不像某些语言那样，逐步调用`DESTROY`所有继承*类*的层次结构，它只是`DESTROY`为每个受祝福的引用调用一次。

**注意：** #1 并非总是如此。例如[，inside-out 对象](http://search.cpan.org/perldoc?Object%3a%3aInsideOut)不*包含*对子类的引用，它们是受祝福的标量引用，其地址用作包中词法哈希的键。持久包的词法范围包含引用，而不是对象。但这只是为了使它在类清理和 is-a/has-a 关系之间没有直接关联。

仍然很清楚需要进行*单独*的销毁，即使 perl 不会自动获得这些 has-a 关系。

所以我认为理解这一点的关键是在has-a关系中，有一个*单独*的引用需要被销毁。Perl 要么在引用计数减少时自动执行此操作，要么您必须自己执行此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T08:21:59.213

has-a 关系是一个对象简单地存储另一种类型的对象的关系。就像一个对象可以存储一个数字或字符串一样，它也可以存储另一个对象。真的没有比这更复杂的了。

```
package MyClass;
sub new {
  my $class = shift;
  my $obj = bless {}, $class;
  $obj->{some_thing_else} = SomeOtherClass->new;
} 
```

is-a 关系是继承的另一个名称。

```
package SomeSubClass;
use parent 'SomeParentClass'; 
# older ways to do this are 'use base' and pushing on @ISA. 
```

这些概念与 Perl 相关，没有什么特别之处，但我在上面展示了 Perl 示例。

您的第一个示例只是一个标准的 Perl 类。你的第二个例子是一个有关系。您的代码都没有摘录继承示例（is-a）。

[顺便说一下，`bless`在你的方法中调用时`new`，你应该从 new 的第一个参数中获取类名（如上所示），否则，人们将无法从你的类继承而不覆盖`new`. 如果我调用`SomeSubClass->new`，并且 SomeSubClass 从 SomeParentClass 继承了新的，并且 SomeParentClass 做了你刚才所做的事情，那么我将获得 SomeParentClass 类的对象，而不是 SomeSubClass。（当然，也许你不希望你的类是可继承的，或者你希望 new 被覆盖，无论出于何种原因。）]

Perl 的对象系统非常简单，你可以用它做任何你想做的事情。但是社区正在转向一种叫做 Moose 的东西，这是一个 CPAN 模块，它提供了一个构建在上面的更复杂的对象系统。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-15T08:23:04.493

继承是'is-a'的关系，类/包具有的任何属性（带有' `has`'的驼鹿）或受祝福对象的哈希键（例如，假设对象被祝福成hashref）是`has-a`******

# file - 从服务器获取特定文件

> ID：12435649
> 
> 赞同：1
> 
> 时间：2012-09-15T08:00:50.517
> 
> 标签：file, bash, shell, terminal

使用终端和 Shell/Bash 命令是否可以从 Web 目录中检索特定文件？IE

目录：www.site.com/samples/

将所有以“.h”结尾的文件复制到一个文件夹中

该文件夹包含文本文件和其他无用的相关文件。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T08:13:41.603

```
cp -aiv /www.site.com/samples/*.h /somefolder/ 
```

[http://linux.die.net/man/1/cp](http://linux.die.net/man/1/cp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T08:23:32.707

您可以为此使用 wget，但如果没有指向该文件的链接。即它们存在，但它们没有被任何 html 页面引用，那么 bruteforce 是唯一的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T10:36:43.013

有多种方法可以递归实现： 1\. 使用 find

1.1 使用find -p创建目录创建递归文件夹不出错

```
cd path;
mkdir backup
find www.site.com/samples/ -type d -exec mkdir -p {} backup/{} \; 
```

1.2 查找特定文件并复制到备份文件夹 -p 以保持权限

```
find www.site.com/samples/ -name \*.h -exec   cp -p {} backup/{} \; 
```

1.  实际上很好地使用 tar 进行反向工作，即排除与文本文件相关的问题部分更符合此答案的特定文件：您可以添加任意数量的排除项

    ```
    tar --exclude=*.txt --exclude=*.filetype2 --exclude=*.filetype3 -cvzf site-backup.tar.gz www.site.com
    mv www.site.com www.site.com.1
    tar -xvzf site-backup.tar.gz 
    ```

# javascript - jQuery $.ajax 函数可以工作，但是像 $.get/$.getJSON 这样的速记函数不能——使用 jQuery 1.7.2 和 Grails 2.1 和 twitter bootstrap

> ID：12435654
> 
> 赞同：3
> 
> 时间：2012-09-15T08:01:14.047
> 
> 标签：javascript, jquery, grails, twitter-bootstrap, grails-2.0

我在这里的第一个问题。

有人对使用 ajax 请求的速记函数有任何问题吗？

这有效：

```
('#book').typeahead({
    source: function(typeahead, query){
        return $.ajax({
            url: "/book/autocompleteBooks",
            type: "GET",
            dataType: "JSON",
            data: {queryString: query},
            success: function(results){
                typeahead.process(results);
            }
        });
    },
    property: "title",
    onselect: onSelectBook
}); 
```

但是这两个都不起作用：

```
('#book').typeahead({
    source: function(typeahead, query){
        return $.get({
            url: "/book/autocompleteBooks",
            dataType: "JSON",
            data: {queryString: query},
            success: function(results){
                typeahead.process(results);
            }
        });
    },
    property: "title",
    onselect: onSelectBook
});

('#book').typeahead({
    source: function(typeahead, query){
        return $.getJSON({
            url: "/book/autocompleteBooks",
            data: {queryString: query},
            success: function(results){
                typeahead.process(results);
            }
        });
    },
    property : "title",
    onselect: onSelectBook
}); 
```

另一件事是替换`url`为`createLink`也不起作用。

```
url: "/book/autocompleteBooks"

url: "${createLink(controller: 'book', action: 'autocompleteBooks')}" 
```

我宁愿使用速记函数使代码更易于阅读，基本上是为了美观:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-15T08:15:03.033

的结构`$.get()`如下：

```
$.get(
  "/book/autocompleteBooks",     // url
  {queryString: query},          // data
  function(data) {               // success
    // code
  },
  'json'                         // dataType
); 
```

并且`$.getJSON()`是：

```
$.getJSON(
     "/book/autocompleteBooks",   // url
     {queryString: query},        // data
     function(results){           // success
       // code
     }
); 
```

阅读更多关于***[$.get()](http://api.jquery.com/jQuery.getJSON/)***和***[$.getJSON()](http://api.jquery.com/jQuery.getJSON/)***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T08:15:56.387

请阅读您尝试使用的两种速记方法的文档。他们不接受选项对象作为第一个参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T08:16:15.593

$.ajax() 方法的 $.get() id 简写。但实际上 $.get 的语法是这样的

> $.get('ajax/test.html', function(data) {
> $('.result').html(data);
> alert('加载已执行'); });

其中 $.ajax() 被称为

> $.ajax({
> url: url,
> 数据: 数据,
> 成功: 成功, dataType:dataType });

有关 $.get() 的更多信息，请参阅[http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

# javascript - 长文本的快速 JS 分页

> ID：12435661
> 
> 赞同：2
> 
> 时间：2012-09-15T08:02:35.017
> 
> 标签：javascript, jquery, pagination

我正在尝试使用 JavaScript 创建一个分页系统。

基本情况：我有一个数据库，里面有相当长的文本（故事章节，5000字以上）。我想在网站上显示这些章节......但不是一次显示整个文本，因为这几乎会破坏可读性，而是在页面中。我没有问题显示文本，而是让页面正确。

我一直在环顾四周，发现了一个 JQuery 代码，它完成了我想要它做的事情......但是这种方法有一个主要的警告。完成文本分页大约需要 10 秒，等待时间太长了。

代码的基本作用：它将文本分成单词（用空格分隔）。然后它尝试将一个接一个的单词添加到 innerHTML 中，检查文本现在是否大于它应该适合的容器。

每次它打破边界时，它都会恢复到前一个字符串并创建一个新页面。（通过将文本封装到一个跨度中，然后可以立即隐藏/显示）这可行，但是太慢了，因为它必须运行这些检查 5000 多次。

我尝试创建一个近似系统，它基本上采用字数，将其除以因子 0.5，检查缓冲区是否大于所需大小，并重复此过程，直到缓冲区“小于”所需大小第一次，从那个位置开始，它填充缓冲区，直到它满了。

但是，它似乎无法正常工作（双字，行，不完全完整，而且仍然太慢。）

这是我目前正在使用的代码，我将不胜感激任何修复和建议如何使它更容易，尤其是：更快。哦，并且：不，在服务器端分页不是一个选项，因为它应该适合可变的浏览器格式......在 1280x768 分辨率的全屏浏览器中，它的页面将少于在 1024x768 分辨率的小型浏览器中的页面。

```
function CreateChild(contentBox, Len, pageText, words) {
    var Child = document.createElement("span");
Child.innerHTML = pageText;
contentBox.appendChild(Child);
if(Len == 0) ++Len;
words.splice(0, Len);
    return words.length;
}

$(document).ready(function(){  
    var src = document.getElementById('Source');
    var contentBox = document.getElementById('content');
var inner = document.getElementById('inner');
    //get the text as an array of word-like things
    var words = src.innerHTML.replace(/ +/g, " ").split(' '), wCount = words.length;

    //start off with no page text
    var pageText = null, cHeight = contentBox.offsetHeight;

    while(words.length > 0) {
        var Found = false;
        pageText = words[0];    //Prevents constant checking for empty
        wCount *= 0.5;      //Searches, until the words fit in.
        for(var i = 1; i < wCount; ++i) pageText += ' ' + words[i];
        inner.innerHTML = pageText;
        Distance = inner.offsetHeight - cHeight;
        if(Distance < 40) {         //Less than two lines
            wCount = Math.floor(wCount);
            if(Distance < 0) {      //Already shorter than required. Fill.
                for(var i = wCount; i < words.length; ++i) {
                    //add the next word to the pageText
                    var betterPageText = pageText + ' ' + words[i];
                    inner.innerHTML = betterPageText;
                    //Checks, whether the new words makes the buffer too big.
                    if(inner.offsetHeight > cHeight) {
                        wCount = CreateChild(contentBox, i, pageText, words);
                        Found = true;
                        break;
                    } else {
                        //this longer text still fits
                        pageText = betterPageText;             
        }
        }
    } else {
        for(var i = wCount; i >= 0; --i) {
            //Removes the last word from the text
        var betterPageText = pageText.slice(0, pageText.length - words[i].length - 1);
        inner.innerHTML = betterPageText;

        //Is the text now short enough?
        if(inner.offsetHeight <= cHeight) {
            wCount = CreateChild(contentBox, i, pageText, words);
            Found = true;
            break;
        } else {
            pageText = betterPageText;             
        }
        }   
    }
    if(!Found) CreateChild(contentBox, i, pageText, words);
    }
}

//Creates the final block with the remaining text.  
Child = document.createElement("span");
Child.innerHTML = pageText;
contentBox.appendChild(Child);

//Removes the source and the temporary buffer, only the result remains.     
contentBox.removeChild(inner);
src.parentNode.removeChild(src);

    //The rest is the actual pagination code, but not the issue
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T12:16:33.037

我设法解决了我的问题，也感谢 Rich 的建议。我在做什么：首先，我从“源”获取文本（或者，我可以将整个文本直接写入 JS，效果是一样的）。

接下来，我将在任何临时缓冲区中获取对目标的引用，临时缓冲区位于目标缓冲区内，因此它将保留宽度信息。

之后，我将整个文本拆分为单词（标准正则表达式，用一个空格替换多个空格后）。在此之后，我创建了一些变量，用于缓冲函数结果，因此不必重复调用函数。

现在的主要区别是：我采用 20 个单词的块，检查当前块是否超出边界（同样，将结果缓冲在变量中，因此它们不会被多次调用，函数调用等于宝贵的微秒）。

一旦跨越边界（或达到字符总数），循环停止，并且（假设边界导致“停止”），每次运行将文本缩短一个单词，直到文本再次适合。

最后，新文本被添加到一个新的跨度元素中，该元素被添加到内容框（但变得不可见，我稍后会解释原因），我刚刚“使用”的单词从单词数组中删除，并且wCount 变量按字数递减。

冲洗并重复，直到呈现所有页面。您可以将“20”与任何其他值交换，脚本可以使用任意数字，但是请记住，数字太小会导致“添加段”中的运行次数过多，而数字太大会导致在“回溯段”中有很多运行。

至于不可见：如果跨度保持可见，迟早会导致滚动条出现，从而有效地缩小浏览器窗口的宽度。反过来，这将允许更少的单词适合，并且所有后续页面都将被扭曲（因为它们将与带有滚动条的窗口匹配，而“分页结果”将没有滚动条）。

以下是我使用的代码，希望对以后的人有所帮助。

```
var src = document.getElementById('Source');
var contentBox = document.getElementById('content');
var inner = document.getElementById('inner');
//get the text as an array of word-like things
var words = src.innerHTML.replace(/ +/g, " ").split(' ');

//start off with no page text
var cHeight = contentBox.offsetHeight, wCount = words.length;

while(wCount > 0) {
    var Len = 1, Overflow = false;
    var pageText = words[0];                        //Prevents the continued check on 'is pageText set'.
    while(!Overflow && Len < wCount) {              //Adds to the text, until the boundary is breached.
        //20 words per run, but never more than the total amount of words.
        for(var j = 0; j < 20 && Len < wCount; ++Len, ++j) pageText += ' ' + words[Len];
        inner.innerHTML = pageText;
        Overflow = (inner.offsetHeight > cHeight);  //Determines, whether the boundary has been crossed.
    }
    if(Overflow) {                                  //Will only be executed, if the boundary has been broken.
        for(--Len; Len >= 0; --Len) {               //Removes the last word of the text, until it fits again.
            var pageText = pageText.slice(0, -(words[Len].length + 1)); //Shortens the text in question.
            inner.innerHTML = pageText;

            //Checks, whether the text still is too long.
            if(inner.offsetHeight <= cHeight) break;//Breaks the loop
        }
    }
    var Child = document.createElement("span");
    Child.style.display = "none";                   //Prevents the sidebars from showing (and distorting the following pages)
            Child.innerHTML = pageText;
            contentBox.appendChild(Child);
            words.splice(0, Len);
            wCount -= Len;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T08:37:45.590

创建一个具有单页宽度的绝对定位容器。给它'auto'的高度。将容器放置在屏幕外的某个位置，例如左侧：-10000px，以便用户看不到它。将原始文本分成 20 个单词的块。（查找完成此操作的正则表达式。）一次将一个块附加到容器中的字符串，直到容器的高度达到单个页面的最大高度。一旦达到最大高度，容器中的字符串基本上就是一页文本。将容器中的字符串推送到一个名为“pages”的数组上。清空容器并通过再次附加 20 个单词的块开始创建第 2 页，从您在上一页中中断的位置继续遍历数组。继续这个过程，直到你到达 20 字数组的末尾，每当容器的字符串达到最大高度时，将每个新页面推送到页面数组中。您现在应该有一个页面数组，其中的每个项目都包含每个页面的文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-22T01:52:42.803

由于没有提前搜索，我使用 getClientRects ( [https://developer.mozilla.org/en-US/docs/Web/API/Element/getClientRects](https://developer.mozilla.org/en-US/docs/Web/API/Element/getClientRects) ) 制定了一个替代解决方案。如果有人对细节感兴趣，我会发布更多。

# c - 四元数“lookAt”函数

> ID：12435671
> 
> 赞同：9
> 
> 时间：2012-09-15T08:04:29.460
> 
> 标签：c, math, opengl, quaternions

我正在努力解决以下问题。我正在处理骨骼动画，我希望（即）玩家的头部跟随空间中的另一个对象。我的上轴是 +Z 我的前轴是 +Y，四元数的大小在 W。我尝试使用 gluLookAt 的台面代码并使用 3x3 矩阵转换为四元数，但它没有按预期工作所以我往另一个方向走……

到目前为止，我得到了以下代码“几乎”工作，至少玩家的头部正在向好的方向旋转（但是 X 角度似乎会影响 Y 旋转轴），但它是直视而不是跟随一个物体大约65度的地板：

```
qt LookRotation( v3 lookAt, v3 upDirection )
{
qt t;

v3 forward = lookAt;
v3 up = upDirection;

OrthoNormalize( &forward, &up );

v3 right = v3_cross( up, forward );

mat3 m = mat3_make( right.x, up.x, forward.x,
                    right.y, up.y, forward.y,
                    right.z, up.z, forward.z );

t.w = sqrtf( 1.0f +
             m.r[ 0 ].x +
             m.r[ 1 ].y +
             m.r[ 2 ].z ) * 0.5f;

float w4_recip = 1.0f / ( 4.0f * t.w );

t.x = ( m.r[ 2 ].y - m.r[ 1 ].z ) * w4_recip;

t.y = ( m.r[ 0 ].z - m.r[ 2 ].x ) * w4_recip;

t.z = ( m.r[ 1 ].x - m.r[ 0 ].y ) * w4_recip;

t = qt_normalize( t );

return t;
} 
```

…………

```
v3 v = v3_sub( vec4_to_v3( transform.world.r[ 3 ] /* The object XYZ location in the world */),
           skeleton->final_pose.location[ i ] /* i = The head joint location */ );

v = v3_normalize( v );

qt q = LookRotation( v,
        v3_make( 0.0f, 0.0f, 1.0f ) ); 
```

有人可以帮我解决这个问题吗...我对四元数有点陌生，真的不知道我在哪里搞砸了。经过相当多的研究，基本上我想做的是类似于 Unity API：[http ://docs.unity3d.com/Documentation/ScriptReference/Quaternion.LookRotation.html](http://docs.unity3d.com/Documentation/ScriptReference/Quaternion.LookRotation.html)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-07-15T12:52:07.423

我认为这个功能会做你需要的：

```
/// <summary>
/// Evaluates a rotation needed to be applied to an object positioned at sourcePoint to face destPoint
/// </summary>
/// <param name="sourcePoint">Coordinates of source point</param>
/// <param name="destPoint">Coordinates of destionation point</param>
/// <returns></returns>
public static Quaternion LookAt(Vector3 sourcePoint, Vector3 destPoint)
{
    Vector3 forwardVector = Vector3.Normalize(destPoint - sourcePoint);

    float dot = Vector3.Dot(Vector3.forward, forwardVector);

    if (Math.Abs(dot - (-1.0f)) < 0.000001f)
    {
        return new Quaternion(Vector3.up.x, Vector3.up.y, Vector3.up.z, 3.1415926535897932f);
    }
    if (Math.Abs(dot - (1.0f)) < 0.000001f)
    {
        return Quaternion.identity;
    }

    float rotAngle = (float)Math.Acos(dot);
    Vector3 rotAxis = Vector3.Cross(Vector3.forward, forwardVector);
    rotAxis = Vector3.Normalize(rotAxis);
    return CreateFromAxisAngle(rotAxis, rotAngle);
}

// just in case you need that function also
public static Quaternion CreateFromAxisAngle(Vector3 axis, float angle)
{
    float halfAngle = angle * .5f;
    float s = (float)System.Math.Sin(halfAngle);
    Quaternion q;
    q.x = axis.x * s;
    q.y = axis.y * s;
    q.z = axis.z * s;
    q.w = (float)System.Math.Cos(halfAngle);
    return q;
} 
```

这段代码来自这里： [https](https://gamedev.stackexchange.com/questions/15070/orienting-a-model-to-face-a-target) ://gamedev.stackexchange.com/questions/15070/orienting-a-model-to-face-a-target 我只是稍微修改它以适应我的情况，这是转换的实现。 LookAt 不使用 Unity3D。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-03-02T09:35:59.547

您无需使用`acos`and `axis angle`（这又会执行另外 2 个三角函数）从 2 个向量中获取四元数：

```
public static Quaternion LookAt(Vector3 sourcePoint, Vector3 destPoint)
{
    Vector3 forwardVector = Vector3.Normalize(destPoint - sourcePoint);

    Vector3 rotAxis = Vector3.Cross(Vector3.forward, forwardVector);
    float dot = Vector3.Dot(Vector3.forward, forwardVector);

    Quaternion q;
    q.x = rotAxis.x;
    q.y = rotAxis.y;
    q.z = rotAxis.z;
    q.w = dot+1;

    return q.normalize();
} 
```

dot+1 和后续标准化的原因是因为如果不这样做，您将获得双旋转的四元数。这两个步骤将有效地执行`slerp(identity, q, 0.5)`正确的四元数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-07-04T09:24:33.967

当前的两个答案对于边缘情况都有各种问题。由于其他原因，接受的答案也不正确，包括它为其中一种情况设置 w=pi 并且它没有做适当的规范。在环顾四周并测试了几个案例后，我还发现您需要前向和向上向量来进行此计算。所以不用多说，下面是我正在使用的代码：

```
Quaternion lookAt(const Vector3f& sourcePoint, const Vector3f& destPoint, const Vector3f& front, const Vector3f& up)
{
    Vector3f toVector = (destPoint - sourcePoint).normalized();

    //compute rotation axis
    Vector3f rotAxis = front.cross(toVector).normalized();
    if (rotAxis.squaredNorm() == 0)
        rotAxis = up;

    //find the angle around rotation axis
    float dot = VectorMath::front().dot(toVector);
    float ang = std::acosf(dot);

    //convert axis angle to quaternion
    return Eigen::AngleAxisf(rotAxis, ang);
} 
```

Bove 使用流行的 Eigen 库。如果您不想使用它，那么您可能需要以下替换`Eigen::AngleAxisf`：

```
//Angle-Axis to Quaternion
Quaternionr angleAxisf(const Vector3r& axis, float angle) {
    auto s = std::sinf(angle / 2);
    auto u = axis.normalized();
    return Quaternionr(std::cosf(angle / 2), u.x() * s, u.y() * s, u.z() * s);
} 
```

请注意，点积 0 或 1 或 -1 的特殊情况会自动处理，因为 normalized() 为 Eigen 库中的零向量返回 0。

在旁注中，对于您所有的转换担忧，[这](http://www.sedris.org/wg8home/Documents/WG80485.pdf)是一个很好的文档。

# python - 表单不提交值

> ID：12435672
> 
> 赞同：0
> 
> 时间：2012-09-15T08:04:32.030
> 
> 标签：python, django

我在 Django 中有一个 HTML 表单，但我没有使用 Django 表单类。

现在我想知道如何处理这个 html 表单？（方法是`POST`）

表单是由生成的，`xsl`但最终生成的表单是这样的：

```
<form method="POST" id="settingSubmit" action="/archive/agentUpdate/1">
    <input value="1" name="AgentID" datatype="Int">
    <input value=" agent 1" name="AgentName">
    <input value=" agent 1 Description" name="AgentDescription">
    <input value="submit" id="sendbutton" type="submit">
</form> 
```

和观点：

```
def agentUpdate(request,id):
    agentName = request.POST['AgentName']

    return render_to_response('archive/base.html',{
        'agentName':agentName
    },
        RequestContext(request, )) 
```

网址.py：

```
urlpatterns = patterns('archive.views',

    url(r'^agentUpdate/(?P<id>\w+)/$',
        'agentUpdate',
        name='agent_Update'),
) 
```

错误：

```
MultiValueDictKeyError at /archive/agentUpdate/2/

"Key 'AgentName' not found in <QueryDict: {}>" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T08:48:51.837

关于`MultiValueDictKeyError`你应该做

```
agentName = request.POST.get('AgentName') 
```

也将更好地检查这是否是一个`POST`请求

```
if request.POST:
    agentName = request.POST.get('AgentName') 
```

然后使用这些数据，您可以做任何您想做的事情 - 验证，将其保存到数据库，以任何其他方式处理。

也可以代替`render_to_response`您使用快捷方式`render`

```
return render(request, 'archive/base.html', {'agentName': agentName}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T05:27:56.987

通过添加到表单字段来修复表单的 HTML `type="hidden"`，否则它们将不会作为您请求的一部分提交。

您还应该添加[保护](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/)`{% csrf_token %}`所需的内容。这在所有请求上默认启用。[`CSRF`](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/)`POST`

```
<form method="POST" id="settingSubmit" action="/archive/agentUpdate/1">
    {% csrf_token %}
    <input value="1" type="hidden" name="AgentID" datatype="Int">
    <input value=" agent 1" type="hidden" name="AgentName">
    <input value=" agent 1 Description" type="hidden" name="AgentDescription">
    <input value="submit" id="sendbutton" type="submit">
</form> 
```

最后，在您看来：

```
from django.shortcuts import render

def agentUpdate(request,id):
    if request.method == 'POST':
        agentName = request.POST.get('AgentName')
        return render(request, 'archive/base.html', {'agentName':agentName}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T06:45:15.670

将 csrf 令牌添加到您的表单

```
<form method="POST" id="settingSubmit" action="/archive/agentUpdate/1">
    {% csrf_token %}
    <input value="1" type="hidden" name="AgentID" datatype="Int">
    <input value=" agent 1" type="hidden" name="AgentName">
    <input value=" agent 1 Description" type="hidden" name="AgentDescription">
    <input value="submit" id="sendbutton" type="submit">
</form> 
```

在views.py 中添加

从 django.shortcuts 导入 render_to_response

```
def agentUpdate(request,id):
    if request.method == 'POST':
        agentName = request.POST.get('AgentName')
        variables = RequestContext(request, {'agentName':agentName})
        return render_to_response('archive/base.html', variables) 
```

在 urls.py

```
urlpatterns = patterns('archive.views',

    (r'^agentUpdate/(\w*)\/?$','agentUpdate'),
) 
```

# java - 检查 TextView 文本是否被屏幕截断

> ID：12435675
> 
> 赞同：0
> 
> 时间：2012-09-15T08:04:44.637
> 
> 标签：java, android, gridview, overlap, overlapping

我有一个基于`GridView`.
它基本上是一个学校考试日历。当您单击其中一个单元格时，您可以看到有关测试的信息。在某些手机中，包含信息的 TextView 没有显示，或者因为日历占据了整个屏幕而部分显示。我决定如果`TextView`被切断，我想显示`AlertDialog`而不是在屏幕上显示信息。问题是，我不知道如何检查是否`TextView`被切断。
这里有两张图片告诉你我的意思：

这就是它的外观：

![这就是它应该看起来的样子](../Images/a08a53308b48a5483ab1c5280bda585a.png)

有时看起来就是这样：

![有时看起来就是这样](../Images/d12c8415a761cbe84e9afc550688ac87.png)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T08:30:28.170

您可以[在此处](https://stackoverflow.com/questions/5015094/determine-device-screen-category-small-normal-large-xlarge-using-code)了解什么是屏幕尺寸类别（小、中...） ，然后可以针对不同的屏幕尺寸有不同的行为。在您的情况下，您可以在中小型屏幕的情况下显示 AlertDialog。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T14:46:32.367

我自己找到了解决方案。我检查了的高度`GridView`和高度`TextView`。然后，

`if (gridViewHeight + textViewHeight >= containingLinearLayoutHeight)`

这意味着文本被切断。

# c# - 为我的 .net 项目设置和配置 subversion 存储库

> ID：12435676
> 
> 赞同：0
> 
> 时间：2012-09-15T08:04:44.920
> 
> 标签：c#, asp.net, svn, visual-studio-2008

我正在 Visual Studio 中开发一个 ASP.net 项目。当我是这里唯一的开发人员时，一切都很好，但我需要一些帮助来为我的项目做出贡献。

目前有 4 个开发者不在同一个地理位置。所以在文件更改并提交给我之后，在合并代码上浪费了很多精力和时间。所以我正在考虑创建这个项目的颠覆。我通过 Tortoise 与 SVN 合作过，但我还没有完成设置。请建议我一种设置SVN的方法。任何建议将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T08:38:40.623

您需要决定的第一件事是代码的托管空间。

*   如果您正在开发一个开源项目，那么您可以选择[code.google.com](http://code.google.com/hosting/)或任何其他提供商。如果您的项目是私有的，那么您可以使用任何私有存储库，例如[assembla](http://offers.assembla.com/free-subversion-hosting/)。如果你这样走，你会得到一个`checkout`url。您可以将您的项目提交到此 url。
*   如果您有自己的服务器来托管代码，请按照[本文](http://www.codinghorror.com/blog/2008/04/setting-up-subversion-on-windows.html)中提供的步骤进行操作。

# database - 在 codeigniter 中按需自动加载模型

> ID：12435677
> 
> 赞同：0
> 
> 时间：2012-09-15T08:04:46.727
> 
> 标签：database, codeigniter, model

我可以以某种方式省略第一行吗？即`$this->load->model('Model_name');`并在必要时自动加载它？

要加载模型，您将使用以下函数：

```
$this->load->model('Model_name'); 
```

加载后，您将使用与您的类同名的对象访问模型函数：

```
$this->Model_name->function(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T09:11:53.037

Codeiginiter 2.1 不支持延迟加载

有几个选项可供您使用

1.  在配置中使用“自动加载”。这将始终使模型在整个应用程序中可用。[请参阅此处了解更多信息](http://codeigniter.com/user_guide/general/autoloader.html)

2.  在控制器的 __construct() 中加载模型（如果它特定于该控制器）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T09:10:45.427

你不懂逻辑。

```
$this->load->model('Model_name') means you load it when it necessary. 
```

或者

如果您发现在整个应用程序中全局需要一个特定模型，您可以告诉 CodeIgniter 在系统初始化期间自动加载它。这是通过打开 application/config/autoload.php 文件并将模型添加到自动加载数组来完成的。

# iphone - iOS：录音文件格式

> ID：12435683
> 
> 赞同：13
> 
> 时间：2012-09-15T08:05:38.027
> 
> 标签：iphone, objective-c, ios, xcode, audio-recording

我正在实施录音。它适用于`caf`&`wave`格式。但问题是文件大小太大。

所以，任何人都可以帮助我录制在窗口中播放的格式的音频，文件大小很小。

我试过的代码如下：

```
 dirPaths = NSSearchPathForDirectoriesInDomains(
                                                    NSDocumentDirectory, NSUserDomainMask, YES);
    docsDir = [dirPaths objectAtIndex:0];
     NSString *soundFilePath = [docsDir
                                stringByAppendingPathComponent:@"sound.wave"];
     NSLog(@"%@",soundFilePath);
     NSURL *soundFileURL = [NSURL fileURLWithPath:soundFilePath];

     NSDictionary *recordSettings = [NSDictionary 
                         dictionaryWithObjectsAndKeys:
                                    [NSNumber numberWithInt:AVAudioQualityMin],
                                     AVEncoderAudioQualityKey,
                                     [NSNumber numberWithInt:16], 
                                     AVEncoderBitRateKey,
                                     [NSNumber numberWithInt: 2], 
                                     AVNumberOfChannelsKey,
                                     [NSNumber numberWithFloat:8000.0], AVSampleRateKey,
                                     [NSNumber numberWithInt:8], AVLinearPCMBitDepthKey,
                                     nil];

     NSError *error = nil;

     audioRecorder = [[AVAudioRecorder alloc]
                      initWithURL:soundFileURL
                      settings:recordSettings
                      error:&error];

     if (error)
     {
         NSLog(@"error: %@", [error localizedDescription]);

     } else {
        [audioRecorder prepareToRecord];
     } 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-02T22:00:52.037

我还尝试使用 AVAudioRecorder 以 AAC 编码格式录制音频，最好是在 .m4a 文件中。我很快就能够在核心音频文件 (.caf) 中获取录制到 AAC 的代码，但我无法让 AVAudioRecorder 正确格式化 .m4a。我正要使用较低级别的音频单元 API 重写我的应用程序中的录制代码，但我把它放在次要位置并添加到代码中以处理共享音频会话。设置完成后，我返回并尝试另存为 .m4a，它就可以正常工作。

这是一些示例代码：

```
NSArray *dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *docsDir = [dirPaths objectAtIndex:0];
NSURL *tmpFileUrl = [NSURL fileURLWithPath:[docsDir stringByAppendingPathComponent:@"tmp.m4a"]];
NSDictionary *recordSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                        [NSNumber numberWithInt: kAudioFormatMPEG4AAC], AVFormatIDKey,
                        [NSNumber numberWithFloat:16000.0], AVSampleRateKey,
                        [NSNumber numberWithInt: 1], AVNumberOfChannelsKey,
                        nil];
NSError *error = nil;
AVAudioRecorder *recorder = [[AVAudioRecorder alloc] initWithURL:tmpFileUrl settings:recordSettings error:&error];
[recorder prepareToRecord];

AVAudioSession *session = [AVAudioSession sharedInstance];
[session setCategory:AVAudioSessionCategoryRecord error:nil];
[session setActive:YES error:nil];

[recorder record]; 
```

然后结束我使用的录音：

```
[recorder stop];
AVAudioSession *session = [AVAudioSession sharedInstance];
int flags = AVAudioSessionSetActiveFlags_NotifyOthersOnDeactivation;
[session setActive:NO withFlags:flags error:nil]; 
```

然后可以随意使用“tmpFileUrl”处的文件。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-07-01T13:27:50.220

这是我对高质量和小文件大小的设置（平衡）：

```
NSDictionary *recordSettings = @{AVEncoderAudioQualityKey: @(AVAudioQualityMedium),
                                 AVFormatIDKey: @(kAudioFormatMPEG4AAC),
                                 AVEncoderBitRateKey: @(128000),
                                 AVNumberOfChannelsKey: @(1),
                                 AVSampleRateKey: @(44100)}; 
```

这为您提供了接近 cd 质量的单声道 AAC 音轨。您应该在文件后面附加 .m4a 以便在任何地方都可以阅读。所有其他参数都设置为设备默认值，这在大多数情况下是您希望发生的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T11:48:28.313

```
NSMutableDictionary *settings = [[NSMutableDictionary alloc] initWithCapacity:0];

[settings setValue :[NSNumber numberWithInt:kAudioFormatMPEG4AAC] forKey:AVFormatIDKey];
[settings setValue:[NSNumber numberWithFloat:8000.0] forKey:AVSampleRateKey]; 
[settings setValue:[NSNumber numberWithInt: 1] forKey:AVNumberOfChannelsKey];
[settings setValue :[NSNumber numberWithInt:8] forKey:AVLinearPCMBitDepthKey];
[settings setValue :[NSNumber numberWithBool:NO] forKey:AVLinearPCMIsBigEndianKey];
[settings setValue :[NSNumber numberWithBool:NO] forKey:AVLinearPCMIsFloatKey];

//Encoder

[settings setValue :[NSNumber numberWithInt:12000] forKey:AVEncoderBitRateKey];
[settings setValue :[NSNumber numberWithInt:8] forKey:AVEncoderBitDepthHintKey];
[settings setValue :[NSNumber numberWithInt:8] forKey:AVEncoderBitRatePerChannelKey];
[settings setValue :AVAudioQualityMin           forKey:AVEncoderAudioQualityKey]; 
```

# iphone - 在 Xcode 中设置联系表

> ID：12435686
> 
> 赞同：0
> 
> 时间：2012-09-15T08:05:59.503
> 
> 标签：iphone, ios, xcode

我对 Xcode 比较陌生，在我开始做更复杂的事情之前，我正在尝试设计和创建一个非常基本的应用程序——所以我一直在学习。

所以我已经把我的联系表单视图控制器全部设置好了，我想弄清楚如何拉出输入的数据，所以当用户点击提交时，它将全部发送到定义的电子邮件地址。我知道这需要一些我很满意的 php 服务器端，但这是导致问题的 Xcode 中的基本整理 - 分配操作/代码等。

大量的教程解释了如何从头开始创建一个表单，但是它将它实现到一个现有的项目中，这证明很棘手——我已经有了一个带有所需接口的视图控制器设置。

我的视图控制器的屏幕截图在这里： http: [//pixelproofdesign.co.uk/stackoverflow/View%20Controller%20Screenshot.png](http://pixelproofdesign.co.uk/stackoverflow/View%20Controller%20Screenshot.png)

您可以在此处找到项目文件：http: [//pixelproofdesign.co.uk/stackoverflow/Pixel%20Proof_NEW.zip](http://pixelproofdesign.co.uk/stackoverflow/Pixel%20Proof_NEW.zip)

任何帮助都将不胜感激 - 它正在驱使我转弯！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T08:59:47.953

将表单的每个文本字段连接到 .H 文件中的插座。然后，当用户点击“联系我们”按钮时，这将允许您获取文本属性。

@property (weak, nonatomic) IBOutlet UITextField *contactName; @property (weak, nonatomic) IBOutlet UITextField *contactEmail; @property (weak, nonatomic) IBOutlet UITextField *contactPhone; @property (weak, nonatomic) IBOutlet UITextField *contactDescription;

向该按钮添加一个操作并将文本字段连接到一个 NSString 中，例如

```
NSString *message = [NSString stringWithFormat:@"name=%@&email=%@&phone=%@&description=%@",
                     self.contactName.text,
                     self.contactEmail.text,
                     self.contactPhone.text,
                     self.contactDescription.text]; 
```

然后您可以将其作为 POST 发送，PHP 会将每个字段作为变量获取。另请参阅[通过 HTTP POST 发送表单数据](https://stackoverflow.com/questions/5486877/sending-form-data-via-http-post-objective-c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T08:21:57.527

当你完成收集数据建立一个 NSDictionary

```
id dict = @{@"formField1": formField1.stringValue; @"FormField2": formField2.stringValue}; 
```

=>您形成的结果字典编码，因此您可以将其放入html（[类别以获取postData](https://github.com/Daij-Djan/DDUtils/tree/master/model/NSDictionary+PostData%20%5Bios%20+%20osx%5D)

```
id data = [dict postData]; 
```

=> 然后使用 NSURLConnection 传输它

```
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"www.url.de"]];
[request setHTTPBody:data];
[request setHTTPMethod:@"POST"];
[request setValue:@"multipart/form-data, boundary=--------------BOUNDARY------------------" forHTTPHeaderField:@"Content-type"];

NSData *response = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil]; 
```

免责声明：我在这里内联写了这个，从未测试过错别字这是一种非常基本的方法，当它变得更复杂时，我会考虑使用框架......例如 AFNetwork

# azure - 部署的天蓝色应用程序在 RoleEnvironment.GetLocalResource 上引发 SEHException，但在本地工作正常

> ID：12435687
> 
> 赞同：0
> 
> 时间：2012-09-15T08:06:05.730
> 
> 标签：azure, azure-web-roles

我是天蓝色开发的新手。我有一个 azure 应用程序在本地运行良好，但在 azure 上部署时会抛出 SEHException。使用 Visual Studio 发布时，活动日志显示这两个实例都停留在回收中。我使用远程桌面连接到一个实例，并尝试使用该实例上的浏览器访问应用程序。

我收到以下异常。

```
Exception: System.Runtime.InteropServices.SEHException: External component has thrown an exception

StackTrace:
[SEHException (0x80004005): External component has thrown an exception.]
   RdGetLocalResource(UInt16* , _RD_RESOURCE** ) +0
   _LOCALRESOURCE.GetLocalResourceW(UInt16* name, _LOCALRESOURCE** ppout) +309
   Microsoft.WindowsAzure.ServiceRuntime.Internal.InteropRoleManager.GetLocalResource(String name, InteropLocalResource& ret) +57
   Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment.GetLocalResource(String localResourceName) +231
   MyApp.Web.Infrastructure.Services.AzureLocalStorageService.GetLocalResourceRootPath(String name) +27
   MyApp.Infrastructure.AzureStorageAccountFactory.Create() +117
   MyApp.IoCConfig.RegisterDependencies() +667
   MyApp.Web.MvcApplication.Application_Start() +260

[HttpException (0x80004005): External component has thrown an exception.]
   System.Web.HttpApplicationFactory.EnsureAppStartCalledForIntegratedMode(HttpContext context, HttpApplication app) +4058693
   System.Web.HttpApplication.RegisterEventSubscriptionsWithIIS(IntPtr appContext, HttpContext conext, MethodInfo[] handlers) +191
   System.Web.HttpApplication.InitSpecial(HttpApplicationState state, MethodInfo[] handlers, IntPtr appContext, HttpContext context) +352
   System.Web.HttpApplicationFactory.GetSpecialApplicationInstance(IntPtr appContext, HttpContext context) +407
   System.Web.Hosting.PipelineRuntime.InitializeApplication(IntPtr appContext) +375

[HttpException (0x80004005): External component has thrown an exception.]
   System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +11703936
   System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +141
   System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context) +4870757 
```

它表明 RoleEnvironment.GetLocalResource 导致错误。还有一个问题[，为什么我在调用 RoleEnvironment.GetConfigurationSettingValue("MYKEY") 时会收到 SEHException？](https://stackoverflow.com/questions/2957938/why-am-i-getting-sehexception-when-calling-roleenvironment-getconfigurationsetti)在 RoleEnvironment.GetConfigurationSettingValue 上得到相同的异常。但是错误出现在本地环境中。在这里，应用程序在本地环境中运行良好，但在 azure 上失败。可能是什么原因？

这是我的 ServiceDefinition 和 ServiceConfiguration.Cloud 文件

**服务定义.csdef**

```
<?xml version="1.0" encoding="utf-8"?>
<ServiceDefinition name="MyApp.Azure" xmlns="http://schemas.microsoft.com/ServiceHosting/2008/10/ServiceDefinition" schemaVersion="2012-05.1.7">
  <WebRole name="MyApp.Web" vmsize="ExtraSmall">
    <Sites>
      <Site name="Web">
        <Bindings>
          <Binding name="Endpoint1" endpointName="Endpoint1" />
        </Bindings>
      </Site>
    </Sites>
    <Endpoints>
      <InputEndpoint name="Endpoint1" protocol="http" port="80" />
    </Endpoints>
    <Imports>
      <Import moduleName="RemoteAccess" />
      <Import moduleName="RemoteForwarder" />
    </Imports>
    <ConfigurationSettings>
      <Setting name="StorageConnectionString" />
      <Setting name="MediaAccountName" />
      <Setting name="MediaAccountKey" />
    </ConfigurationSettings>
    <LocalResources>
      <LocalStorage name="UploadedVideosCache" cleanOnRoleRecycle="false" sizeInMB="10240" />
      <LocalStorage name="TraceFiles" cleanOnRoleRecycle="true" sizeInMB="50" />
    </LocalResources>
  </WebRole>
</ServiceDefinition> 
```

**服务配置.Cloud.cscfg**

```
<?xml version="1.0" encoding="utf-8"?>
<ServiceConfiguration serviceName="MyApp.Azure" xmlns="http://schemas.microsoft.com/ServiceHosting/2008/10/ServiceConfiguration" osFamily="2" osVersion="*" schemaVersion="2012-05.1.7">
  <Role name="MyApp.Web">
    <Instances count="2" />
    <ConfigurationSettings>
      <Setting name="StorageConnectionString" value="DefaultEndpointsProtocol=https;AccountName=[accountname];AccountKey=[primary account key]" />
      <Setting name="Microsoft.WindowsAzure.Plugins.RemoteAccess.Enabled" value="true" />
      <Setting name="Microsoft.WindowsAzure.Plugins.RemoteAccess.AccountUsername" value="[remoteusername]" />
      <Setting name="Microsoft.WindowsAzure.Plugins.RemoteAccess.AccountEncryptedPassword" value="[encryptedpassword]" />
      <Setting name="Microsoft.WindowsAzure.Plugins.RemoteAccess.AccountExpiration" value="2013-09-15T23:59:59.0000000+05:30" />
      <Setting name="Microsoft.WindowsAzure.Plugins.RemoteForwarder.Enabled" value="true" />
      <Setting name="MediaAccountName" value="[mediaservicesaccountname]" />
      <Setting name="MediaAccountKey" value="[mediaservicesaccountkey]" />
    </ConfigurationSettings>
    <Certificates>
      <Certificate name="Microsoft.WindowsAzure.Plugins.RemoteAccess.PasswordEncryption" thumbprint="[thumbprint]" thumbprintAlgorithm="sha1" />
    </Certificates>
  </Role>
</ServiceConfiguration> 
```

# hadoop - Hadoop版本布局错误

> ID：12435696
> 
> 赞同：1
> 
> 时间：2012-09-15T08:08:03.043
> 
> 标签：hadoop, hdfs

我在 Hadoop 集群中的一个或两个节点中遇到此错误，其余节点运行良好：

```
ERROR org.apache.hadoop.hdfs.server.datanode.DataNode: java.io.IOException:  
*********** Upgrade is not supported from this older version of storage to 
the current version. Please upgrade to Hadoop-0.14 or a later version and 
then upgrade to current version. Old layout version is 'too old' and latest 
layout version this software version can upgrade from is -7. 
```

知道如何在不丢失数据的情况下解决此问题吗？

# iphone - 阻止 UIAlertView 关闭

> ID：12435701
> 
> 赞同：3
> 
> 时间：2012-09-15T08:09:07.740
> 
> 标签：iphone, ios, xcode, uialertview

你能阻止 UIAlertView 解散吗？

我想根据按下的按钮来动画添加 UITextField，或者将其关闭。但是警报解除后我无法添加文本字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T08:28:22.683

您应该实现 UIAlertViewDelegate 方法：

```
- (void)alertView:(UIAlertView *)alertView willDismissWithButtonIndex:(NSInteger)buttonIndex 
```

并根据按钮索引，您可以执行自定义操作。

否则，您应该创建自己的 alertview 类或 UIAlertView 的子类。

如果您选择子类化，您可以覆盖该方法：

```
-(void)dismissWithClickedButtonIndex:(NSInteger)buttonIndex animated:(BOOL)animated 
```

避免在按下特定按钮时关闭 alertView

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T08:25:54.037

如果您只是想`UITextField`在`UIActionSheet`被解除后添加一个，那么添加一个方法，当 ActionSheet 被解除时，然后调用 TextField 的方法。

# linux - 排序 +4 命令在 Ubuntu 中引发错误

> ID：12435705
> 
> 赞同：0
> 
> 时间：2012-09-15T08:09:38.693
> 
> 标签：linux, unix, ubuntu

当我尝试运行以下命令时，它会引发错误。

```
ls -lr | egrep "txt$|tab$" | sort -rn+4 
```

错误信息：

```
sort: invalid option -- '+'
Try `sort --help' for more information. 
```

如何运行此命令？你能解释一下 sort +4 的功能是什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T08:29:07.873

该`+POS.COL` 语法在 2002 年被弃用。

要获得旧行为，请设置一个环境变量：`_POSIX2_VERSION=199209`，实际上任何不为空的值，小于 200112 都可以。

另请参阅[此页面](http://www.gnu.org/software/coreutils/manual/html_node/Standards-conformance.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T08:21:21.727

`sort`不接受`+4`，根据其手册页。如果要按第 4 列排序，请使用`-k4`.

顺便说一句，我不会使用`ls|grep`脚本，最好将`find`命令结合使用`xargs`：

```
find -name '*.txt' -o -name '*.tab' | ls -lh | sort -rnk4 
```

要`find`仅考虑当前目录，请指定`maxdepth`选项：

```
find . -maxdepth 1 -name '*.txt' -o -name '*.tab' 
```

# haskell - 如何将 Haskell 类型强制为更通用的类型

> ID：12435707
> 
> 赞同：3
> 
> 时间：2012-09-15T08:09:55.107
> 
> 标签：haskell, types, gtk2hs

我正在努力让以下代码通过 GHC：

```
getFirstChild :: (WidgetClass w1, WidgetClass w2) => w1 -> IO (Maybe w2)
getFirstChild parent = do
   -- check if parent is a container
   if parent `isA` gTypeContainer
      -- if parent is a container get the first child
      then do children <- containerGetChildren $! castToContainer parent
              return $! Just $! children !! 0
      else return Nothing 
```

尽管乍一看它看起来像是一个 Gtk2hs 问题，但它实际上是关于 Haskell 类型系统的。

当我尝试使用 GHC 编译此代码时，我收到以下错误消息：

```
Could not deduce (w2 ~ Widget)
from the context (WidgetClass w1, WidgetClass w2)
  bound by the type signature for
             getFirstChild :: (WidgetClass w1, WidgetClass w2) =>
                              w1 -> IO (Maybe w2)
  at HsFu\Gtk\Widget.hs:(6,4)-(12,28)
  `w2' is a rigid type variable bound by
       the type signature for
         getFirstChild :: (WidgetClass w1, WidgetClass w2) =>
                          w1 -> IO (Maybe w2)
       at HsFu\Gtk\Widget.hs:6:4
Expected type: [w2]
  Actual type: [Widget]
In the first argument of `(!!)', namely `children'
In the second argument of `($!)', namely `children !! 0' 
```

的类型`containerGetChildren`是：

```
containerGetChildren :: ContainerClass self => self -> IO [Widget] 
```

该`Widget`类型本身就是 的实例`WidgetClass`，所以我不明白为什么我不能`getFirstChild`指定函数的返回类型，因为`w2`它是 的实例`WidgetClass`。

有没有办法在 Haskell 中表达这一点而不使用类似的东西`unsafeCoerce` ？

TIA

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-15T08:21:30.863

不，没有办法。你的声明

```
getFirstChild :: (WidgetClass w1, WidgetClass w2) => w1 -> IO (Maybe w2) 
```

说你的函数可以返回*任何*w2，只要它在 WidgetClass 中，但这是一个谎言，因为它只返回 Widget。Haskell 不会让你这样误导程序员。

假设我正在导入你的模块并写

```
data MyWodget = ....
instance WidgetClass MyWodget where .... 
```

那么我可以合理地从您的类型签名中期望您的函数可以返回 a `Maybe MyWodget`，只要我将一些 MyWodget 放在另一个 MyWodget 中，但是因为您在定义中使用的函数只能与小部件一起使用，Haskell不能在 MyWodget 上使用它，而且我的代码既会进行类型检查，也不会进行类型检查。

您将无法*使用*unsafeCoerce 解决此问题，因为 MyWodget 根本不是 Widget；haskell 类型类允许您使用具有相同功能接口的真正不同的数据类型，因此您不能只是在那里强制。

你可以定义你自己的类

```
class FromWidget w where -- not a good name, I admit
    fromWidget :: Widget -> w 
```

然后您可以使用 fromWidget 将您的函数重写为更通用：

```
getFirstChild :: (WidgetClass w1, FromWidget w2) => w1 -> IO (Maybe w2) 
```

只要我做，我就可以在 MyWodget 上使用它

```
instance FromWidget MyWodget where .... 
```

但我非常怀疑是否有办法以这种方式制作 WidgetClass 中的所有内容。也许你可以制作你感兴趣的每一个 WidgetClass 东西，但也许你应该检查一下你是否真的只对 Widgets 感兴趣。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T08:22:04.337

根据您的功能类型，您的功能应该适用于任何`w1`和`w2`属于`WidgetClass`。但是您返回的是更具体的类型`Widget`。每当您有这种疑问时，请不要向函数提供类型并查看`ghci`推断的类型。`ghci`总是会推断出更一般的类型。

# android - 视频上的文字动画

> ID：12435713
> 
> 赞同：1
> 
> 时间：2012-09-15T08:10:45.873
> 
> 标签：android, animation, video, text, opengl-es

我们正在尝试创建文本动画，例如视频上的过渡和缩放。

我们无法获得平滑过渡，效果非常生涩。然后我们明白了亚像素渲染在 android 中是不可能的。我们能想到哪些替代方案？我们可以在 OpenGL 中解决这个问题吗？

好的......我想在我的问题中添加更多内容......我们实际上是在尝试在由本地播放器在表面视图上播放的视频之上实现文本动画。我们尝试使用 android Canvas API 来实现文本动画，以缩放、翻译等和绘制文本。这可行，但输出不是那么顺利。我们已经验证这不是性能问题。即使我们以超过 30fps 的速度刷新帧，也会看到抖动。

然后，我们尝试使用 android Views 来获取这些动画，并观察到打开硬件加速时动画非常流畅。但是，当硬件加速关闭时，即使是 android View 系统动画也无法提供高质量的缩放动画。这又不是性能问题，因为我们尝试将每一帧转储到位图中并在 PC 上检查每一帧。

因此，似乎在关闭硬件加速时用于在 Canvas 上绘制的 SKIA 图形库无法进行亚像素渲染或类似的东西。例如，当我运行慢比例动画（约 6 秒内约 0.15 的比例）时，比例更新在约 3 帧内发生 1 个像素。但是如果在硬件加速视图上运行相同的动画，每一帧都会更新一小部分像素，并且缩放动画看起来非常平滑。

我肯定可以在预览时使用视图动画。但我需要获取这些动画缓冲区并将它们与视频一起编码。在硬件加速开启的情况下，获取这些缓冲区的任何输入都会有所帮助。我尝试过绘图缓存，但这似乎是使用软件渲染管道而不是硬件绘制的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T10:53:58.900

平滑过渡和生涩的动画与子像素渲染无关。

问题听起来像是您没有正确计时渲染功能。不要使用间隔计时器来触发帧的渲染。您应该将渲染和动画放入您的程序事件循环空闲处理程序中，并测量渲染一帧所需的时间。然后在那个时候推进动画。

# c# - 使用 C# 在 Windows 8 应用程序中捕获相机

> ID：12435724
> 
> 赞同：3
> 
> 时间：2012-09-15T08:12:43.307
> 
> 标签：c#, windows-8

要通过单击按钮在 Windows 8 应用程序中使用网络摄像头拍照，我在 c# 中编写了以下代码：

```
 private async void camera_Click_1(object sender, RoutedEventArgs e)
    {
        cam = new CameraCaptureUI();
        await cam.CaptureFileAsync(CameraCaptureUIMode.Photo);
    } 
```

现在当我单击按钮时相机应用程序打开了，但它给了我一条消息：

```
This app needs permission to use your camera
you can change this in app's settings 
```

应该更改哪些应用程序的设置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T08:29:23.880

通过[使用清单设计器](http://msdn.microsoft.com/en-us/library/windows/apps/br230259.aspx)，您需要将以下[功能](http://msdn.microsoft.com/en-us/library/windows/apps/br230259.aspx#Capabilities)添加到您的`Package.appxmanifest`：

```
<Capabilities>
   <DeviceCapability Name="webcam" />
</Capabilities> 
```

注意：**网络摄像头**功能仅授予对**视频流**的访问权限。为了也授予对**音频流**的访问权限，还必须添加**麦克风功能。**

# c++ - 如何读取资源管理器文件夹地址？

> ID：12435729
> 
> 赞同：0
> 
> 时间：2012-09-15T08:13:00.077
> 
> 标签：c++, c, directory, explorer, antivirus

我使用 AVG，它最近检测到病毒。它以前有;）但这是我第一次注意到这一点。

当我进入包含病毒的文件夹时，AVG 立即自动检测到病毒，甚至无需我点击应用程序。因此，即使我什至没有单击（单击）它，它怎么可能知道病毒存在。

唯一可能的答案是它不断检查所有窗口的资源管理器文件夹位置并扫描文件夹中的所有文件。但是它如何查看我正在查看的文件夹？

请（如果可能的话）用一个 C 程序来解释 AVG 曾经做过的事情。

另外：如果有帮助，我会使用 Windows。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T08:25:21.040

当你打开一个文件夹时，会执行一堆文件系统操作（你可以使用类似的工具`FileMon`或者`ProcMon`看看这个）。您的 AV 软件监控文件访问。有多种方法可以进行这种监控，例如[过滤器驱动程序- 您可以在](http://msdn.microsoft.com/en-us/windows/hardware/gg462968.aspx)[http://www.codeproject.com/Articles/43586/File-System-Filter-Driver-Tutorial](http://www.codeproject.com/Articles/43586/File-System-Filter-Driver-Tutorial)找到一个很好的示例

所以当你打开文件夹时，杀毒软件注意到你打开了一个目录，查阅了它自己的数据，并通知你病毒。

我说“查阅自己的数据”，因为 AV 工具通常不会在访问文件时扫描文件——它们会在文件被写入时进行扫描，因为扫描标记为干净的文件没有意义t 自上次扫描后发生变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T08:25:13.787

[大多数病毒扫描程序都根据API 挂钩](http://en.wikipedia.org/wiki/Hooking)/过滤器的原理进行操作。每当 windows 需要处理命令时，例如打开文件夹、单击窗口、执行文件等，它都会生成一个 api 调用以及一些信息，例如单击的窗口坐标或表示文件的字符串。其他程序可以请求一个或多个这些函数的钩子，这些函数基本上是说“不要执行这个函数，先把它发给我，然后我可能会把它发回去”。这是有[多少病毒起作用](http://en.wikipedia.org/wiki/Rootkit)（例如，阻止您删除它们或复制您的击键），有多少游戏/应用程序起作用（键盘、操纵杆、拖放），以及恶意软件检测器和防火墙。

后一组挂钩命令，检查任何传入的命令以查看它们是否在级别上，然后允许它们恢复或阻止它们。在这个例子中，打开文件夹很可能触发了解析目录的系统调用，扫描器也解析了它（例如“实时保护”）。要查看所有可挂钩函数以及正在使用它们的函数，请在 Google 上搜索一个名为“[健全性检查](http://www.resplendence.com/sanity)”的免费程序（以前称为“rootkit 钩子分析器”）。大多数红色条目将来自 windows 防火墙或 avg，所以不要太担心你会发现什么。

# android - 在cygwin下使用带有android的LuaJIT预构建静态库时的链接器问题

> ID：12435735
> 
> 赞同：2
> 
> 时间：2012-09-15T08:13:43.493
> 
> 标签：android, android-ndk, makefile, lua, luajit

我想我昨天大部分时间都在努力解决这个问题，任何帮助都将不胜感激，让我非常高兴！即使是试图找到问题根源的下一步也是我目前所坚持的事情！

我有一个 Android 2.2 项目试图引用预构建的 LuaJIT 静态库，但 ndk-build 给了我这个错误：

```
test_android.cpp:25: undefined reference to `luaL_newstate' 
```

我将 LuaJIT 构建为 liblua.a，我已经将它放在我的 JNI 目录的根目录中，并带有相关的头文件。我有一个 Android.mk，如下所示：

```
LOCAL_PATH:= $(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE    := lua
LOCAL_SRC_FILES := liblua.a

include $(PREBUILT_STATIC_LIBRARY)

include $(CLEAR_VARS)

LOCAL_MODULE    := test
LOCAL_CFLAGS    := -Werror
LOCAL_SRC_FILES := test_android.cpp
LOCAL_LDLIBS    := -llog -lGLESv2

LOCAL_STATIC_LIBRARIES := lua
include $(BUILD_SHARED_LIBRARY) 
```

在 test_andrdoid.cpp 我有这个代码：

```
extern "C"
{
#include "lua.h"
#include "lauxlib.h"
#include "lualib.h"
}

void test()
{
    lua_State* lua = lua_open();
} 
```

这似乎是一个链接器错误，由于某种原因，静态库文件没有被正确引用。但是，对我来说，makefile 似乎是正确的。

任何帮助将不胜感激！

1.  首先：是否可以查看所有内容是如何链接在一起的，以及我的共享库模块是否真的可以访问静态库？

## 附加信息

这是我认为可能相关的额外信息！

### 建立图书馆

也许是静态库文件不正确？（有什么地方可以下载预建的来检查吗？）。我用这个脚本（[来自 LuaJIT 网站](http://luajit.org/install.html)）制作了它。我正在使用最新的稳定 LuaJIT，1.1.8

```
NDK=/cygdrive/c/android-ndk-r8b
NDKABI=8
NDKVER=$NDK/toolchains/arm-linux-androideabi-4.4.3
NDKP=$NDKVER/prebuilt/linux-x86/bin/arm-linux-androideabi-
NDKF="--sysroot $NDK/platforms/android-$NDKABI/arch-arm"
make linux HOST_CC="gcc -m32" CROSS=$NDKP TARGET_FLAGS="$NDKF" 
```

这可以很好地构建并在 /src/ 目录中创建一个 liblua.a。（我在上面运行了 nm，它列出了我期望的所有函数原型）。我不知道我还能做些什么来确保它真的是为 ARM 构建的吗？

NDKABI=8 表示我的目标是 Android 2.2

### 设置测试 Android 项目

我使用以下命令创建了一个全新的 2.2 android 项目：

```
android create project --target 3 --name test --path . --activity TestActivity --package com.test 
```

Target 3 映射到我系统上的 Android 2.2（使用`android list devices`）。我创建了 jni 文件夹并有一个 test_android.h 和 test_android.cpp。然后我使用 ndk-build 来构建它们——当我不尝试引用 LuaJIT 时它工作得很好。当我尝试使用 Lua 时，出现以下错误：

### 完整的错误信息

```
Cygwin         : Generating dependency file converter script
Compile++ thumb  : test <= test_android.cpp
In file included from jni/test_android.h:3:0, from jni/test_android.cpp:2:
    C:/android-ndk-r8b/platforms/android-8/arch-arm/usr/include/jni.h:592:13: note:
    the mangling of 'va_list' has changed in GCC 4.4
Prebuilt       : liblua.a <= jni/
StaticLibrary  : libstdc++.a
SharedLibrary  : libtest.so
obj/local/armeabi/objs/test/test_android.o: In function `test()':
C:\Users\Grrr\Documents\mycode\static_lib_test/jni/test_android.cpp:25: undefined reference to `luaL_newstate'
collect2: ld returned 1 exit status
/cygdrive/c/android-ndk-r8b/build/core/build-binary.mk:378: recipe for target `obj/local/armeabi/libtest.so' failed make: *** [obj/local/armeabi/libtest.so] Error 1 
```

我看到的大多数问题都是由于本地图书馆包括订单，因为我只有一个图书馆，这不应该是一个问题，并表明我已经设法得到了一些更根本的错误:)

# 更新

我已经构建了普通的 Lua 并将其添加为预构建的静态库，它工作正常。我怀疑它是如何构建 LuaJIT 的，但我不确定如何正确构建它，或者找到一个有效的预构建版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T18:07:28.397

这个链接很好，或者至少makefile是。问题是 LuaJIT 库不是为 ARM 构建的（我使用 objdump -a lualib.a 来检查这个）。我下载了最新的 LuaJIT，在 linux 下运行脚本，得到了一个 ARM 库。现在一切都很好地链接！

# dwolla - Dwolla 付款表单上的时间戳无效

> ID：12435748
> 
> 赞同：0
> 
> 时间：2012-09-15T08:16:25.567
> 
> 标签：dwolla

我的表格目前是这样的：

```
<form action="https://www.dwolla.com/payment/pay" method="POST" class="form-horizontal">
    <input type="hidden" name="_csrf" value="[redacted]">
    <input type="hidden" name="key" value="[redacted]">
    <input type="hidden" name="signature" value="[redacted]">
    <input type="hidden" name="timestamp" value="1347696587496">
    <input type="hidden" name="callback" value="http://127.0.0.1:3000/donate/dwolla">
    <input type="hidden" name="redirect" value="http://127.0.0.1:3000/credits">
    <input type="hidden" name="test" value="1">
    <input type="hidden" name="destinationId" value="812-726-7978">
    <input type="hidden" name="shipping" value="0.25">
    <input type="hidden" name="tax" value="0">
    <input type="hidden" name="name" value="donation credit">
    <input type="hidden" name="description" value="donation credit">
    <!-- amount input and submit button -->
</form> 
```

使用 node.js，我像这样创建我的签名（请注意，我不使用任何订单 ID）：

```
dwolla.signature.create = function(timestamp) {
  return crypto
    .createHmac('sha1', dwolla.secret)
    .update(dwolla.key)
    .update('&')
    .update(timestamp.getTime().toString())
    .update('&')
    .digest('hex')
}

var timestamp = new Date()
var signature = dwolla.signature.create(timestamp) 
```

现在，当我单击提交时，我会在以下地址收到回调：`http://127.0.0.1:3000/credits?error=failure&error_description=Invalid+timestamp.`这意味着至少我的密钥/秘密是有效的，我的签名也是有效的，但我的时间戳不是。

我的时间戳有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T01:05:46.960

Javascript 时间是毫秒而不是秒 -_-

# api - Paypal 隐式付款，无需在 paypal api c# asp.net 中重定向到 Paypal

> ID：12435753
> 
> 赞同：1
> 
> 时间：2012-09-15T08:17:48.900
> 
> 标签：api, paypal

我想使用 Paypal Api 在 paypal 中生成付款请求。我正在使用以下参考链接[https://www.x.com/developers/paypal/documentation-tools/api/pay-api-operation](https://www.x.com/developers/paypal/documentation-tools/api/pay-api-operation) 但他们没有解释如何在 c# 中使用该代码。我想给用户一个按钮，他将填写 oauth 密钥并将付款请求发送到商家帐户。

请建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T18:49:56.243

示例代码在这里

[https://www.x.com/developers/paypal/documentation-tools/paypal-code-samples](https://www.x.com/developers/paypal/documentation-tools/paypal-code-samples)

PayPal 为以下方法提供 Web Service API -

1) 网站支付专业版

2) 支付流网关

3) 贝宝快速结账

## 更新 - 2014 年 9 月 11 日

PayPal 现在提供[REST API](https://developer.paypal.com/webapps/developer/docs/api/)。

另外，示例代码移至[GitHub](http://paypal.github.io/sdk/sample-apps/)

# java - 如何更新 Jruby 使用的 java 版本？

> ID：12435754
> 
> 赞同：2
> 
> 时间：2012-09-15T08:18:38.497
> 
> 标签：java, ruby-on-rails, version, jruby, upgrade

我真的迷失在这些 Java 东西中。最新的[java 版本](http://www.oracle.com/technetwork/java/javase/downloads/index-jsp-138363.html)在 Oracle 网站上公布。

![在此处输入图像描述](../Images/0cc973330c21de0c26b341881498868d.png)

正如您从下一个屏幕截图中看到的那样，我当前的版本是：

![在此处输入图像描述](../Images/79e24455f0252c5fbc6f78519a4c64ce.png)

那么，为什么我的 Jruby 不使用这个版本，如何强制它使用我机器上安装的最新版本？

![在此处输入图像描述](../Images/1081b4f21188cb4ae66f4aa5f3679582.png)

我想使用最新版本的原因是我有一些[问题](https://stackoverflow.com/questions/12184111/jruby-on-rails-error-when-star-server-rails-s-command-is-used)

```
rails -s 
```

命令，我被告知的一件事是升级我的 Java 版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T08:06:14.393

尝试设置`JAVA_HOME`为您的 Java 目录的位置：

```
ubuntu@ubuntu:~$ export JAVA_HOME=/usr/lib/jvm/java-1.6.0-openjdk-amd64
ubuntu@ubuntu:~$ jruby -v 
jruby 1.7.0.preview2 (1.9.3p203) 2012-09-13 c35a3e1 on OpenJDK 64-Bit Server VM 1.6.0_24-b24 [linux-amd64]
ubuntu@ubuntu:~$ export JAVA_HOME=/usr/lib/jvm/java-1.7.0-openjdk-amd64
ubuntu@ubuntu:~$ jruby -v 
jruby 1.7.0.preview2 (1.9.3p203) 2012-09-13 c35a3e1 on OpenJDK 64-Bit Server VM 1.7.0_07-b30 [linux-amd64] 
```

# java - Android中的膨胀和腐蚀

> ID：12435756
> 
> 赞同：7
> 
> 时间：2012-09-15T08:19:24.877
> 
> 标签：java, android, opencv, image-processing, computer-vision

根据我的研究，膨胀和腐蚀可用于在图像二值化后弥合图像的间隙。

我不确定是否`cvSmooth`需要使用。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-18T11:18:50.367

Android 具有与记录的 C++/Python 几乎相同的功能，因此您需要做的就是找到它们属于哪个类，在本例中为**Imgproc**：

```
Imgproc.erode(mInput, mInput, Imgproc.getStructuringElement(Imgproc.MORPH_RECT, new Size(2,2)));        

Imgproc.dilate(mInput, mInput, Imgproc.getStructuringElement(Imgproc.MORPH_RECT, new Size(2, 2))); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-16T19:53:34.457

在 OpenCV 中确实有[腐蚀](http://docs.opencv.org/modules/imgproc/doc/filtering.html#erode)和[膨胀。](http://docs.opencv.org/modules/imgproc/doc/filtering.html#dilate)您正在寻找的“弥合差距”可能是所谓的闭合，即膨胀后腐蚀。可以使用对[morphologyEx 函数](http://docs.opencv.org/modules/imgproc/doc/filtering.html#morphologyEx)的一次调用来完成。它可能是一个“开口”，具体取决于您是要腐蚀白色部分还是黑色部分。

# wordpress - page.php 的内容不显示在 wordpress 中

> ID：12435757
> 
> 赞同：0
> 
> 时间：2012-09-15T08:19:41.950
> 
> 标签：wordpress

我已经在 localhost 上更新了我的网站并上传到服务器（000Webhost），然后 page.php（所有其他模板）的内容不再显示。但是它在本地主机上仍然可以正常工作。我认为服务器上的 Wordpress 出了点问题，所以我删除了数据库并重新创建它们，还重新安装了 Wordpress，然后上传了我的主题，但仍然无法正常工作。有谁知道发生了什么以及我在做什么？我的 page.php 很简单，如下所示，哦，标题是显示的，但不是内容。

```
<?php get_header(); ?>
<div id="content">
<h1 class="entry-title"><?php the_title(); ?></h1> 
<p>
 <?php the_content(); ?>
</p>
  <div style="clear:both;"></div>
</div>

<?php get_footer(); ?> 
```

这里是网站。

[http://ahi.webatu.com/?page_id=12](http://ahi.webatu.com/?page_id=12)

非常感谢您提前！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T09:06:53.830

您需要在 the_post() 范围内才能根据需要使用 the_content() 函数

```
<?php if( have_posts() ) : the_post(); ?>

<?php the_content(); ?>

<?php endif; ?> 
```

# java - 在java中解析html以提取信息

> ID：12435759
> 
> 赞同：0
> 
> 时间：2012-09-15T08:20:02.113
> 
> 标签：java, html-parsing

如果您让我知道是否有一个 java 类可以根据 XML 从 HTML 页面中提取信息，我将不胜感激？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T08:21:26.830

你可以使用[Jsoup](http://jsoup.org/)。我使用它并且非常适合解析html。这是来自 Jsoup 网站的示例：

示例 获取 Wikipedia 主页，将其解析为 DOM，然后从新闻部分中选择标题到元素列表中：

```
Document doc = Jsoup.connect("http://en.wikipedia.org/").get();
Elements newsHeadlines = doc.select("#mp-itn b a"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T08:22:53.880

就个人而言，我使用[Cobra](http://lobobrowser.org/cobra.jsp)。

它允许您将 HTML 视为 XML，从而创建 DOM。这允许您使用诸如 xPath 之类的工具

查看[Java HTML Parser](http://lobobrowser.org/cobra/java-html-parser.jsp)以获取示例

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-22T14:29:20.557

我使用了 HtmlUnit：

```
final HtmlPage page1 = webClient.getPage("https://jira/secure/Dashboard.jspa");
final HtmlForm form = page1.getFormByName("loginform");
final HtmlTextInput textField = form.getInputByName("os_username");
final HtmlPasswordInput pwd = form.getInputByName("os_password");
textField.setValueAttribute(jname);
pwd.setValueAttribute(jpasswd);
final HtmlPage page2 = (HtmlPage) form.getInputByValue("Login").click(); 
```

# c++ - 如果没有重复，则有效地将整数插入到不断增长的数组中

> ID：12435760
> 
> 赞同：0
> 
> 时间：2012-09-15T08:20:29.593
> 
> 标签：c++, algorithm

有一个数据结构就像一个不断增长的数组。当且仅当这些整数在此数据结构中没有重复时，未知数量的整数将被一一插入。

最初我认为 a`std::set`就足够了，它会随着新整数的进入而自动增长，并确保没有重复。

但是，随着集合变大，插入速度会下降。那么除了哈希之外还有其他想法来完成这项工作吗？

附言

我想知道任何技巧，例如对所有元素进行异或或构建稀疏表（就像 rmq 一样）会适用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T08:41:57.773

如果您愿意在问题上花费内存，2^32 位是 512MB，此时您可以只使用一个位字段，每个可能的整数一位。抛开 CPU 缓存影响，这给出了 O(1) 的插入和查找时间。

在不了解您的用例的更多信息的情况下，很难说这是值得使用内存还是几乎没有任何收益的巨大内存开销。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T08:41:49.723

该站点包括所有可能的容器并为每个操作布置它们的运行时间，所以这可能会很有用：

[http://en.cppreference.com/w/cpp/container](http://en.cppreference.com/w/cpp/container)

似乎建议的 unordered_set 是您最好的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T08:29:43.293

如果数字在某个范围内，那么您可以创建几个`std::set`作为存储桶。

编辑-根据您指定的范围，`std::set`,*应该*足够快。O(log n) 对于大多数目的来说已经足够快了，除非你做了一些测量并且发现它对你的情况来说很慢。

您也可以使用[鸽洞原则](http://en.wikipedia.org/wiki/Pigeonhole_principle)来`sets`拒绝任何可能的重复，（当集合变大时适用）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-15T08:35:58.763

You could try a `std::unordered_set`, which should be implemented as a hash table (well, I do not understand why you write "besides hash"; `std::set` normally is implemented as a balanced tree, which should be the reason for insufficient insertion performance).

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-16T22:31:23.263

对于最佳决策，甚至需要更多的要求。该建议基于以下约束：Alcott 32 位整数，大约有 10.000.000 个元素（即 2^32 中的任何 10m）

它是一个 BST（二叉搜索树），其中每个节点存储两个值，即连续区域的开始和结束。第一个元素存储区域开始的数字，第二个元素存储最后一个。这种安排允许大区域，希望你用很小的树高达到 10M 的限制，所以便宜的搜索。具有 10m 个元素的数据结构将占用每个节点 8 个字节，加上每个节点最多两个子节点的链接（2x4 字节）。这样就可以为所有 10M 元素制作 80M。当然，如果通常插入更多元素，您可以跟踪一次没有插入的元素。现在，如果您需要非常小心空间，并且在运行模拟和/或统计检查后发现有很多小区域（长度小于 32 位），您可能希望将节点类型更改为一个开始的数字该区域，

如果您不必对齐对位图的访问，例如，您只有只有 8 个元素的连续块，那么您的备忘录要求是节点为 4+1，子节点为 4+4 字节。希望这可以帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-15T14:23:48.537

位向量可用于检测重复项

# php - 从另一个条件块中获取变量

> ID：12435761
> 
> 赞同：0
> 
> 时间：2012-09-15T08:20:42.840
> 
> 标签：php, forms

我想从分配给文本框的值的条件 if 中获取一个变量：

```
<form action="" method="POST">
    <input type="text" name="name">
    <input type="submit" value="Click Here!" name="submit">
    <?php
        if (isset($_POST['submit'])) {
            $name = $_POST['name'];
            echo "<br /><input type=\"submit\" value=\"Show it!\" name=\"show\">";
        }

        if (isset($_POST['show'])) {
            echo $name; //i got "Notice: Undefined variable: name" here
        }
    ?>
</form> 
```

我想显示`$name`输入后的值：按下名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T08:26:58.710

这应该可以解决问题

```
 $name = "";

    if (isset($_POST['submit'])) {
        $name = $_POST['name'];
        echo "<br /><input type=\"submit\" value=\"Show it!\" name=\"show\">";
    }

    if (isset($_POST['show'])) {
        echo $name;
    } 
```

您的代码中的问题是范围`$name`仅限于第一个 if

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T08:34:32.520

您好，欢迎来到 stackoverflow，

如果您想分两步制作表单，则需要将“名称”值存储在中间表单中。

```
<form action="" method="POST">                                                                                             
    <input type="text" name="name">                                                                                        
    <input type="submit" value="Click Here!" name="submit">                                                                
    <?php
    if (isset($_POST['submit']))
    {
        $name = htmlentities($_POST['name']);
        echo "<input type=\"hidden\" value=\"{$name}\" name=\"name\">";
        echo "<br /><input type=\"submit\" value=\"Show it!\" name=\"show\">";
    }

    if (isset($_POST['show']))
    {
        $name = htmlentities($_POST['name']);
        echo $name;
    }
    ?>                                                                                                                     
</form> 
```

需要指出的几点：

*   在“隐藏”类型的字段中，您存储您的 $name
*   这样您就可以在第二步中恢复它
*   你还应该看看[htmlentities()](http://fr.php.net/manual/en/function.htmlentities.php)函数

希望这可以帮助！

# [在这里](http://temp.ocarina.fr/form.php)试试

# java - 无法让循环检查通过循环的一组值是否大于某个值

> ID：12435764
> 
> 赞同：0
> 
> 时间：2012-09-15T08:21:21.357
> 
> 标签：java, if-statement, for-loop, hashmap

我有一组存储在 Map/HashMap 中的值。然后我做了一个三重for循环来比较这些值。这些值以这种方式进行比较：首先获取 0-1 的值，然后将其与以 1-x [1-2, 1-3,...1-n] 开头的一组值进行比较。IF 且仅当（例如 0-1）的值大于 1-x 设置值中的所有其他值（例如：1-2、1-3、...1-n）时，IF-ELSE语句将触发一个事件。

下面的代码片段中给出了一个数据示例：

```
import java.util.HashMap;
import java.util.Map;

public class CompareSequence{

    public static void main(String[] args) 
    {
        Map<String, Integer> myMap = new HashMap<String, Integer>();
        myMap.put("0-1", 33);
        myMap.put("0-2", 29);
        myMap.put("0-3", 14);
        myMap.put("0-4", 8);
        myMap.put("1-2", 37);
        myMap.put("1-3", 45);
        myMap.put("1-4", 17);
        myMap.put("2-3", 1);
        myMap.put("2-4", 16);
        myMap.put("3-4", 18);

        for(int i = 0; i < 5; i++)
        {
            for(int j = i+1; j < 5; j++)
            {
                String testLine = i+"-"+j; 
                int itemA = myMap.get(testLine);

                for(int k = j+1; k < 5; k++)
                {
                    String newLine = j+"-"+k;
                    int itemB = myMap.get(newLine);

                    if(itemA > itemB)
                    {
                        //IF and ONLY all values of item A that is passed through is bigger than item B
                        //THEN trigger an event to group item B with A
                        System.out.println("Item A : " + itemA + " is bigger than item " 
                        +  newLine + " (" +itemB + ")"); // Printing out results to check the loop
                    }
                    else
                    {
                        System.out.println("Comparison failed: Item " + itemA + " is smaller than " + newLine + " (" + itemB + ")");
                    }
                }
            }       
        }                   
    }
}

Current Result:
Get main value for comparison: myMap.get(0-1) = 33

Get all values related to Key 1-x (set value) ..
myMap.get(1-2) = 37 // This value is bigger than myMap.get(0-1) = 33
myMap.get(1-3) = 45 // This value is bigger than myMap.get(0-1) = 33
myMap.get(1-4) = 17 // This value is smaller than myMap.get(0-1) = 33 
```

在给出的示例中，IF-ELSE 语句不应该让它通过，只有当所有都小于 33 时，才会触发事件。我应该对 IF-ELSE 语句做些什么不同的事情还是我的循环有问题？

```
Desired Result: 

If((myMap.get(0-1) > myMap.get(1-2)) && (myMap.get(0-1) > myMap.get(1-3)) && (myMap.get(0-1) > myMap.get(1-4))...(myMap.get(0-1) > myMap.get(1-n))
{
    //Trigger event to group all set values 1-x to value key 0-1
    //Then delete all set valued related to 1-x from list
} 
```

任何建议或帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T09:13:50.387

你可以尝试这样的事情：

```
for (int i = 0; i < 5; i++) {
    for (int j = i + 1; j < 5; j++) {
        String testLine = i + "-" + j;
        int itemA = myMap.get(testLine);

        boolean greaterThanAll = true;

        for (int k = j + 1; k < 5; k++) {
            String newLine = j + "-" + k;
            int itemB = myMap.get(newLine);

            if (itemA <= itemB) {
                System.out.println("Comparison failed: Item " + itemA + " is smaller than " + newLine + " (" + itemB + ")");
                greaterThanAll = false;
                break;
            } else {
                System.out.println("Item A : " + itemA + " is bigger than item "
                        + newLine + " (" + itemB + ")"); // Printing out results to check the loop
            }
        }
        if (greaterThanAll) {
            System.out.println(testLine + "=" + itemA + " is greater than all");
            //IF and ONLY all values of item A that is passed through is bigger than item B
            //THEN trigger an event to group item B with A
        }
    }
} 
```

# python - 装饰函数可以访问装饰器的变量吗

> ID：12435765
> 
> 赞同：12
> 
> 时间：2012-09-15T08:21:23.747
> 
> 标签：python

我试图了解装饰器是如何工作的，并且想知道装饰器是否可以访问装饰器的变量。例如，在下面的代码中，如何让 f1 可以访问 localVariable？这有可能吗，这甚至是一种很好的做事方式吗？

```
def funcDec(func):
    localVariable = "I'm a local string"
    def func2Return(*args):                                                                            
        print "Calling localVariable from decorator " + localVariable
        func(*args)                                      
        print "done with calling f1"
    return func2Return

@funcDec
def f1(x, y):
    print x + y
    print localVariable

f1(2, 3) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-15T10:16:37.170

由于 Python 的作用域规则，装饰函数通常无法访问装饰器中的任何变量。但是，由于函数可以具有分配给它们的任意属性，因此您*可以*在装饰器中执行以下操作以获得类似的效果（由于相同的范围规则）：

```
def funcDec(func):
    localVariable = "I'm a local string"

    def wrapped(*args):
        print("Calling localVariable from funcDec " + localVariable)
        func(*args)
        print("done with calling f1")

    wrapped.attrib = localVariable
    return wrapped

@funcDec
def f1(x, y):
    print(x + y)
    print('f1.attrib: {!r}'.format(f1.attrib))

f1(2, 3) 
```

这将产生以下输出：

```
Calling localVariable from funcDec I'm a local string
5
f1.attrib: "I'm a local string"
done with calling f1 
```

有人问这是否可以应用于类的方法：答案是“是”，但是您必须*通过*类本身或作为`self`参数传递的它的实例来引用该方法。这两种技术如下所示。使用`self`是更可取的，因为它使代码独立于它所在的类的名称。

```
class Test(object):
    @funcDec
    def f1(self):
        print('{}.f1() called'.format(self.__class__.__name__))
        print('self.f1.attrib: {!r}'.format(self.f1.attrib))  # Preferred.
        print('Test.f1.attrib: {!r}'.format(Test.f1.attrib))  # Also works.

print()
test = Test()
test.f1() 
```

输出：

```
Calling localVariable from funcDec I'm a local string
Test.f1() called
self.f1.attrib: "I'm a local string"
Test.f1.attrib: "I'm a local string"
done with calling f1 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-15T08:33:03.753

不，你不能。请参阅[上一个问题](https://stackoverflow.com/questions/12398884/python-confused-in-decorate-and-closure/12398950#12398950)。仅仅因为该函数是一个装饰器并不意味着它调用的函数对其变量具有特殊访问权限。如果你这样做：

```
def func():
    a = 2
    otherFunc() 
```

然后 otherFunc 无权访问该变量`a`。这就是它对所有函数调用的工作方式，也是它对装饰器的工作方式。

现在，您在装饰器中定义的包装函数（`func2Return`在您的示例中）*确实*可以访问变量，因为该函数在词法上与这些变量在同一范围内。所以你的线`print "Calling localVariable from decorator " + localVariable`会工作。您可以在某种程度上使用它来包装装饰函数，其行为取决于装饰器中的变量。但是实际被装饰的函数（`f1`在您的示例中）无权访问这些变量。

函数只能从函数定义实际所在的范围访问局部变量。函数不会从调用范围中获取变量。（这是一件好事。如果他们这样做了，那将是一团糟。）

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-15T08:42:24.150

我认为如果您记住装饰器会有所帮助

```
@deco
def f(...): ... 
```

只是语法糖

```
def f(...): ...
f = deco(f) 
```

而不是某种宏扩展。在 Python 中，变量的范围是静态确定的，因此对于全局（模块级）函数，既不作为参数传递也不分配给的变量将在全局命名空间中查找。

因此，您必须明确传递 func2Return() 的局部变量。更改`f1`to的签名`f1(x, y, localvariable=None)`并让包装函数`fun2Return`调用它

```
f1(*args, localvariable=localvariable) 
```

# html - 为什么 CSS 图像的行为不像 HTML 图像

> ID：12435781
> 
> 赞同：0
> 
> 时间：2012-09-15T08:23:05.177
> 
> 标签：html, css

为什么 CSS 中定义的图像（如背景、列表标记等）在浏览器中的行为方式与 HTML 图像不同？例如，它们不能被鼠标选中，你不能右键单击它们。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T08:26:22.587

图像通常在 CSS 中用于一件事，背景。这意味着它们与 HTML 图像的**用途**不同（将实际图像显示为内容的一部分）。

当图像是内容的一部分时，它可以被保存和复制等，因为它可能被读者认为是有趣的。然而，背景（或列表标记等）不太可能（除非读者是开发人员）引起读者足够的兴趣而想要复制它们。相反，重点是元素的实际内容（应用背景）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T08:27:02.000

我想这是浏览器供应商的一个问题，为什么他们只在处理`<img>`标签时才允许某些行为。

但是，您可以使用开发工具/Firebug/whatever 并且可以下载图像文件。

# asp.net - 如何动态地将字符串显示为超链接？

> ID：12435786
> 
> 赞同：0
> 
> 时间：2012-09-15T08:24:51.967
> 
> 标签：asp.net

让我们考虑一下我有一个逗号分隔的字符串。例如，“APL-1,APL-2,APL-3,APL-4”。

所以我想用超链接显示每个字符串，然后它应该重定向到其他页面。

注意：逗号分隔的字符串可能会有所不同（表示可能会增加或减少）

所以请指导我如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T08:39:30.707

您可以通过浏览逗号分隔字符串中的每个元素并使用此字符串创建链接来完成此操作。

```
string links = string.Empty;
string strInput = "pAPL-1,APL-2,APL-3,APL-4";
string []arrInput = strInput.Split(',');
foreach(string str in arrInput)
   links += @"<a href=""www.somesite.com/somepage.aspx?qs1=" + str + " >"+str+"</a><br />"; 
```

# c# - 表单数据未显示在第二页上

> ID：12435788
> 
> 赞同：0
> 
> 时间：2012-09-15T08:25:14.567
> 
> 标签：c#, asp.net, .net, forms, form-submit

这是页面的代码，表单的数据应该显示在文本框中，但它甚至没有指向该页面并停留在同一页面上..页面只是在单击提交时闪烁，没有其他反应..

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace PayrollSystem
{
    public partial class frmPersonalVerified : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            //Add your comments here
            txtVerifiedInfo.Text = Request["txtFirstName"] +
                "\n" + Request["txtLastName"] +
                "\n" + Request["txtPayRate"] +
                "\n" + Request["txtStartDate"] +
                "\n" + Request["txtEndDate"];
        }
    }
} 
```

下面是我在其他页面上的提交按钮代码，该页面有一个带有提交取消按钮的表单。为什么它不起作用？怎么了？请帮忙...

```
.
.
.

 <asp:Button ID="btnSubmit" runat="server" Text="Submit" 
            PostBackUrl="~/frmPersonalVerified.aspx" />
        &nbsp;&nbsp;
        <asp:Button ID="btnCancel" runat="server" Text="Cancel" 
             PostBackUrl="~/frmMain.aspx"/>

        </asp:Panel> 
```

我尝试将 PostBackUrl="~/frmPersonalVerified.aspx" 更改为 PostBackUrl="frmPersonalVerified.aspx" 但它没有用。怎么了？

我还在 frmPersonalVerified 页面的页面加载方法中添加了一个断点..它没有进入它..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T08:48:46.390

我认为你应该去提交按钮的 onclick 事件

```
 protected void btnSubmit_Click(object sender, EventArgs e)
 {

     Response.Redirect("~/frmPersonalVerified.aspx");

 } 
```

# c# - 使用 html 敏捷包解析表单操作和输入名称和值

> ID：12435791
> 
> 赞同：2
> 
> 时间：2012-09-15T08:25:36.240
> 
> 标签：c#, forms, html-agility-pack

我正在尝试使用以下 HTML 代码中的值解析表单操作值和输入名称：

```
 <form method="post" action="actionURL" autocomplete="" name="login_form" id="login_form" onsubmit="return hash2(this)">

            <input type="hidden" name=".tries" value="1">
            <input type="hidden" name=".src" value="ym">
            <input type="hidden" name=".md5" value="">
            <input type="hidden" name=".hash" value="">
            <input type="hidden" name=".js" value="">
            <input type="hidden" name=".last" value="">
            <input type="hidden" name="promo" value="">
            <input type="hidden" name=".intl" value="us">
            <input type="hidden" name=".lang" value="en">
            <input type="hidden" name=".bypass" value="">
            <input type="hidden" name=".partner" value="">
            <input type="hidden" name=".u" value="8013sg1858dp9">
            <input type="hidden" name=".v" value="0">
            <input type="hidden" name=".challenge" value="fUhehaaMq9c2lQjndCps_rNu1eSB">
            <input type="hidden" name=".yplus" value="">
            <input type="hidden" name=".emailCode" value="">
            <input type="hidden" name="pkg" value="">
            <input type="hidden" name="stepid" value="">
            <input type="hidden" name=".ev" value="">
            <input type="hidden" name="hasMsgr" value="0">
            <input type="hidden" name=".chkP" value="Y">
            <input type="hidden" name=".done" value="somevalue">
            <input type="hidden" name=".pd" value="ym_ver=0&c=&ivt=&sg=">
            <input type="hidden" name=".ws" id=".ws" value="0">
            <input type="hidden" name=".cp" id=".cp" value="0">     
            <input type="hidden" name="nr" value="0">

            <input type="hidden" name="pad" id="pad" value="5">
            <input type="hidden" name="aad" id="aad" value="5">

                            <div id='inputs'>

                <label for='username'>Yahoo! ID</label>
                                    <input name='login' id='username' maxlength='96' tabindex='1' value=''>

                    <p id='ex'>(e.g. test)</p>

                <label for='passwd'>Password</label>
                <input name='passwd' id='passwd' type='password' maxlength='64' tabindex='2'>

    <div id="captchaDiv"></div>
            </div>
<div id='fun'></div>

        <div id='persistency'>
            <input type='checkbox' name='.persistent' id='persistent' tabindex='4' value='y' >
            <p>
              <label for='persistent'>Keep me signed in</label>
              <br>
              <span id='uncheck'>(Uncheck if on a shared computer)</span>
            </p>
        </div>

    <div id='submit'>
        <button type='submit' id='.save' name='.save' class='secondaryCta' tabindex='5'>
          Sign In
        </button>           </div>
</form> 
```

上面的表格包含，直接子代和子代的子代中的输入类型。在此处使用示例时：[https](https://stackoverflow.com/a/9890022/1007447) ://stackoverflow.com/a/9890022/1007447 c# 上的代码跟踪找不到名称“form”的元素或后代。

如何获取表单操作和所有具有值的输入类型？（有时，我也需要跳过用户名密码部分）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T18:18:19.177

这已经在 Stack Overflow 上讨论过几次。

答案与您所指的问题相同。你所要做的：

```
HtmlNode.ElementsFlags.Remove("form");

var doc = ... //Load the document here

var nodes = doc.DocumentNode.SelectNodes("//form//input"); 
```

关键是上线

```
HtmlNode.ElementsFlags.Remove("form") 
```

以及为什么需要添加它的解释可以在以下页面中找到：

*   [FORM 对象没有子节点](http://htmlagilitypack.codeplex.com/discussions/247206)
*   [如何使用 HtmlAgilityPack 获取表单中的所有输入元素](https://stackoverflow.com/a/2388007/297114t)

# haskell - putStrLn 不打印到控制台

> ID：12435794
> 
> 赞同：5
> 
> 时间：2012-09-15T08:25:50.800
> 
> 标签：haskell, wxhaskell

我正在试验 wxHaskell。我无法在 ghci 下运行应用程序，所以我必须使用应用程序来测试它。我想用 println 调试来测试程序。但是，putStrLn 似乎在 GUI 中不起作用：

```
{-# LANGUAGE Haskell2010 #-}

module Main where

import Graphics.UI.WX

drawUI dc view = do 
  circle dc (point 10 10) 5 [penKind := PenSolid, color := red]
  putStrLn "painted"  

helloGui :: IO ()
helloGui = do
  f <- frame [
    text := "Example", 
    resizeable := False, 
    bgcolor := white,
    layout := space 400 300,
    on paint := drawUI]
    return ()

main :: IO ()
main = do
  putStrLn "Started"
  start helloGui 
```

如果我注释掉 start helloGui，一切都打印得很好。但是，如果我返回它，则不会打印任何内容，但会显示窗口。这里有什么问题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-15T08:52:20.607

这可能是输出缓冲；在程序退出之前不会写入输出。

要么显式刷新：

```
 putStrLn "Started"
  hFlush stdout 
```

或者开启行缓冲：

```
 hSetBuffering stdout LineBuffering -- or even NoBuffering
  putStrLn "Started" 
```

# c++ - 如何通过其他 .cpp 文件中的类变量编辑公共成员变量？

> ID：12435796
> 
> 赞同：0
> 
> 时间：2012-09-15T08:26:06.610
> 
> 标签：c++, class, member

我和我的朋友正在学习 C++，尽管我们已经能够在这个程序中解决所有遇到的问题（并且通过这样做学到了很多），但这个问题一直让我们绞尽脑汁。我们花费了无数个小时，不仅试图自己解决它，而且还查看了 Stackoverflow 的相关问题并进行了大量的谷歌搜索......最后我们决定我们只需要询问并希望你们中的一个人知道我们的问题是什么.

基本上我们正在尝试创建一个基于文本（仅限控制台）的 RPG，我们已经到了使用我们唯一的头文件中定义的类创建玩家统计信息的地步，该类有三个构造函数（使用函数重载当然）虽然我们能够无错误地运行游戏，但似乎我们无法以任何方式实际编辑类成员变量的值！

这是我们的课：

```
//File OverHeader.h

class PlayerStatistics
{
public:
    PlayerStatistics(int HitPoints, int MagickaPoints, int Fatigue, int Damage, int Defense, int Dodge, int Block, int SpellCastChance);
    PlayerStatistics(int Experience, int Level);
    PlayerStatistics();

    int HitPoints;
    int MagickaPoints;
    int Fatigue;
    int Damage;
    int Defense;

    // Chance Based System (Relies on Fatigue Level)
    int Dodge;
    int Block;
    int SpellCastChance;

    int Experience;
    int Level;
}; 
```

主要功能：

```
#include <iostream>
#include <string>
#include "OverHeader.h"

// MAIN FUNCTION DEFINITION
int main()
{
PlayerStatistics PlayerStats(20, 20, 20, 20, 20, 20, 20, 20);
PlayerStatistics PlayerStatsLevel(0, 1);

    //continued with code irrelevant to this question.
} 
```

问题是主函数中的行实际上并没有将类中的整数变量设置为这些值。在这两行之后，整数值应设置为（仅用于演示目的）：

```
int HitPoints == 20;
int MagickaPoints == 20;
int Fatigue == 20;
int Damage == 20;
int Defense == 20;
int Dodge == 20;
int Block == 20;
int SpellCostChance == 20;
int Experience == 0;
int Level == 1; 
```

但奇怪的是，输出这些整数中的任何一个都只会输出随机数（大概是内存地址当前值）。

这三个构造函数实际上在这里正确定义（尽管不在 Main.cpp 中）：

```
// PlayerCreation.cpp
PlayerStatistics::PlayerStatistics(int HitPoints, int MagickaPoints, int Fatigue, int Damage, int Defense, int Dodge, int Block, int SpellCastChance)
{

}

PlayerStatistics::PlayerStatistics(int Experience, int Level)
{

}

PlayerStatistics::PlayerStatistics()
{

} 
```

这就是我们的问题，我希望我描述得足够清楚，如果你能帮助我们实际编辑这些类成员变量的值，请告诉我！感谢所有帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T08:43:15.137

这会以两种不同的方式创建相同的类：

```
PlayerStatistics PlayerStats(20, 20, 20, 20, 20, 20, 20, 20);
PlayerStatistics PlayerStatsLevel(0, 1); 
```

第一个创建一个名为的变量，该变量`PlayerStats`使用第一个构造函数。第二个创建另一个`PlayerStatsLevel`使用第二个构造函数调用的变量。

现在，构造函数...

```
// PlayerCreation.cpp
PlayerStatistics::PlayerStatistics(int HitPoints, int MagickaPoints, int Fatigue, int Damage, int Defense, int Dodge, int Block, int SpellCastChance)
{

}

PlayerStatistics::PlayerStatistics(int Experience, int Level)
{

} 
```

这实际上并没有初始化类中的成员变量。您在构造函数中使用了相同的名称，但这实际上会让您感到悲痛，因为（举一个例子）`HitPoints`传递给构造函数的局部变量会覆盖类成员`HitPoints`。现在，如果你想引用你必须使用的类成员`this->HitPoints`。

所以，我重申，实际上没有任何东西被初始化。所以你的对象中有随机值。您需要这样做（我将采用较短的示例）：

```
// Using initializer list
PlayerStatistics::PlayerStatistics(int inExperience, int inLevel)
    : Experience(inExperience), Level(inLevel)
{    
}

// Or using conventional assignment
PlayerStatistics::PlayerStatistics(int inExperience, int inLevel)
{    
    Experience = inExperience;
    Level = inLevel;
} 
```

请注意，其他值未使用此构造函数初始化。这可能是有意的，或者您可能希望将它们全部设置为默认值。您需要明确地执行此操作。

现在，看起来您想要一个包含所有这些统计信息的单个实例。您可能想要做的是只使用一个构造函数 - 空构造函数`PlayerStatistics()`，并将所有内容初始化为“合理”的东西。然后定义函数以分块设置统计信息：

```
void PlayerStatistics::SetStats(int HitPoints, int MagickaPoints, int Fatigue, int Damage, int Defense, int Dodge, int Block, int SpellCastChance)
{
    this->HitPoints = HitPoints;
    this->MagickaPoints = MagickaPoints;
    // etc etc...
}

void PlayerStatistics::SetLevel(int Experience, int Level)
{
    this->Experience = Experience;
    this->Level = Level;
}

// If you want you can explicitly set the values to something in the constructor.
// It's probably good practice if you're new at this.
PlayerStatistics::PlayerStatistics()
{    
    SetStats(0, 0, 0, 0, 0, 0, 0, 0);
    SetLevel(0, 0);
} 
```

现在在你的主要：

```
PlayerStatistics player;
player.SetStats(20, 20, 20, 20, 20, 20, 20, 20);
player.SetLevel(0, 1); 
```

或者，如果这些是新玩家的默认设置，请在构造函数中执行，然后您就不需要记住了。

希望这能让你开始。玩得开心，永远不要害怕尝试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T08:30:52.933

这些构造函数*没有*正确定义：它们接受参数，但不对值做任何事情！试试这个：

```
PlayerStatistics::PlayerStatistics(int Experience, int Level)
:
  Experience(Experience),
  Level(Level)
{

} 
```

这大致相当于：

```
PlayerStatistics::PlayerStatistics(int Experience, int Level)
{
  this->Experience = Experience;
  this->Level = Level
} 
```

当然，您希望以相同的方式初始化其他字段，并将未指定的字段设置为其默认值，但您明白了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T08:31:08.420

你的构造函数没有设置值——构造函数可以有你喜欢的任何参数，并且这些参数不会仅仅因为它们碰巧具有相同的名称而被分配给数据成员。

你需要：

```
PlayerStatistics::PlayerStatistics(
    int HitPoints, int MagickaPoints, int Fatigue, 
    int Damage, int Defense, int Dodge, int Block, 
    int SpellCastChance) : 
        HitPoints(HitPoints), 
        MagickaPoints(MagickaPoints),
        ... etc ...
{

} 
```

（缩进它你喜欢的方式，我这样做是因为我的代码和你的代码之间的唯一区别似乎没有太大的区别，在右侧的滚动中是不可见的）。

`: HitPoints(HitPoints) ...`是一个“初始化列表”，它的意思是“用那个值初始化这个基类或数据成员”。在您的情况下，该值恰好与数据成员具有相同的名称，但这很好，编译器会从上下文中找出哪个是哪个。

# ruby-on-rails - Ruby on Rails 3 + Rspec + Capybara：检查响应状态

> ID：12435800
> 
> 赞同：4
> 
> 时间：2012-09-15T08:26:24.307
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rspec, capybara

我从 Webrat 迁移到 Capybara，现在我遇到了很多错误。例如在 webrat 我可以在集成测试中使用它：

```
response.should be_success 
```

但水豚表明：

```
Failure/Error: response.should be_success
     NoMethodError:
       undefined method `success?' for nil:NilClass 
```

有没有提供这种功能的方法？

**UPD**：我的规格：

```
require 'spec_helper'

describe "Admins" do
  before(:each) do
    @admin = FactoryGirl.create(:admin)

    visit '/'
    click_link "Login"
    fill_in "Email",  :with => @admin.email
    fill_in "Password", :with => 'qwerty'
    click_button "Sign in"
  end

  describe "Admin panel" do
    it "should have correct links" do
      click_link "User"
      response.should be_success
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-15T09:54:26.030

您正在混合控制器和请求规格。

在控制器规范中检查`response`，在请求规范中检查`page`内容，因为您只能访问 html。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-27T21:10:56.177

我找不到像`success?`方法这样的快捷方式的任何指示，但是如果您的驱动程序支持它，您可以执行以下操作：

```
visit(some_path)
page.status_code.should == 200 
```

这是不久前添加的，但似乎没有很好的记录。此外，一些司机根本不向水豚提供信息。特别提到了 Selenium - 如果您在使用 Selenium 驱动程序时尝试这样做，它会崩溃。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-30T11:42:06.257

这可能会帮助您：

```
expect(page).to have_http_status(200) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-16T22:44:52.133

请利用asset_exists？下一个要点中的功能

```
def asset_exists?(src)
  js_script = <<JSS
  xhr = new XMLHttpRequest();
  xhr.open('GET', '#{src}', true);
  xhr.send();
  JSS

  page.execute_script(js_script)
  status = page.evaluate_script('xhr.status') # get js variable value
  status == 200 || status == 302
end 
```

[https://gist.github.com/yovasx2/1c767114f2e003474a546c89ab4f90db](https://gist.github.com/yovasx2/1c767114f2e003474a546c89ab4f90db)了解更多详情

# python - 用 python 处理许多巨大的日志文件

> ID：12435806
> 
> 赞同：6
> 
> 时间：2012-09-15T08:27:20.463
> 
> 标签：python, logging

我正在使用一些 python 脚本来进行统计。日志的一种内容是这样的，我称之为 A 日志：每个 A 日志的格式为：

```
[2012-09-12 12:23:33] SOME_UNIQ_ID filesize 
```

我称之为 B 日志的另一个日志具有以下格式：

```
[2012-09-12 12:24:00] SOME_UNIQ_ID 
```

我需要计算A日志中有多少条记录也在B日志中，并获取具有相同记录ID的两条记录的时间间隔。我的实现是将B日志的所有时间和ID加载到地图中，然后迭代A 日志以检查它的 ID 是否存在于地图中。问题是它投射了太多内存，因为我在 B 日志中有近 1 亿条记录。有什么建议可以提高性能和内存使用率吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T08:40:01.257

您可以尝试根据“A”是否适合内存并顺序扫描“B”来反转查找。

否则，将日志文件加载到包含 (timestamp, uniq_id, rest_of_line) 的两个表 (log_a, log_b) 的 SQLite3 数据库中，然后在 上执行 SQL 连接`uniq_id`，并对结果执行您需要的任何处理。这将保持较低的内存开销，使 SQL 引擎能够进行连接，但当然需要有效地复制磁盘上的日志文件（但这在大多数系统上通常不是问题）

**例子**

```
import sqlite3
from datetime import datetime

db = sqlite3.connect(':memory:')

db.execute('create table log_a (timestamp, uniq_id, filesize)')
a = ['[2012-09-12 12:23:33] SOME_UNIQ_ID filesize']
for line in a:
    timestamp, uniq_id, filesize = line.rsplit(' ', 2)
    db.execute('insert into log_a values(?, ?, ?)', (timestamp, uniq_id, filesize))
db.commit()

db.execute('create table log_b (timestamp, uniq_id)')
b = ['[2012-09-12 13:23:33] SOME_UNIQ_ID']
for line in b:
    timestamp, uniq_id = line.rsplit(' ', 1)
    db.execute('insert into log_b values(?, ?)', (timestamp, uniq_id))
db.commit()

TIME_FORMAT = '[%Y-%m-%d %H:%M:%S]'
for matches in db.execute('select * from log_a join log_b using (uniq_id)'):
    log_a_ts = datetime.strptime(matches[0], TIME_FORMAT)
    log_b_ts = datetime.strptime(matches[3], TIME_FORMAT)
    print matches[1], 'has a difference of', abs(log_a_ts - log_b_ts)
    # 'SOME_UNIQ_ID has a difference of 1:00:00'
    # '1:00:00' == datetime.timedelta(0, 3600) 
```

注意：

*   sqlite3 上的`.connect`应该是文件名
*   `a``b`应该是你的文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T08:54:37.383

Try this:

*   Externally sort both the files
*   Read the A Logs file and save SOME_UNIQ_ID (A)
*   Read the B Logs file and save SOME_UNIQ_ID (B)
*   Compare the SOME_UNIQ_ID (B) with SOME_UNIQ_ID (A)
    *   If it is lesser, read B Logs file again
    *   If it is greater, read A Logs file again and compare with saved SOME_UNIQ_ID (B)
    *   If it is equal find the time gap

Assuming external sort works efficiently, you end up the process reading both files just once.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T07:43:13.830

由于瓶颈是时间戳的转换。我将此操作拆分为许多生成 A 日志和 B 日志的隔离机器。这些机器将字符串时间戳转换为纪元时间，而 CENTER 机器使用所有这些日志来计算我的结果现在几乎是原始方式的 1/20 时间。我在这里发布我的解决方案，感谢你们所有人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T09:50:06.797

我建议使用同时支持唯一 ID`datetime`和`uniqueidentifier`显示形式的数据库。它来自 Window，如果您使用 Windows 执行任务，您可以使用 Microsoft SQL 2008 R2 Express 版本（免费）。这两个表不会使用任何类型的键。

您可以使用MS SQL 的[bcp 实用程序](http://msdn.microsoft.com/en-us/library/ms162802%28v=sql.105%29.aspx)，这可能是从文本文件（或 [BULK INSERT](http://msdn.microsoft.com/en-us/library/ms188365%28v=sql.105%29.aspx)命令）插入数据的最快方法之一。

只有在插入所有记录后才能创建唯一标识符上的索引。否则，索引的存在会使插入操作变慢。那么内部连接在技术上应该尽可能快。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-15T08:43:50.860

首先，身份证的格式是什么？是全球唯一的吗？

我会选择这三个选项之一。

*   使用数据库
*   两组 id 的并集
*   Unix 工具

~~我假设您更喜欢第二种选择。仅从 A 和 B 加载 ID。假设 id 适合 32 位整数，则内存使用量将少于 1GB。然后加载相同id的日期时间并计算差距。~~第一个选项将是最好的要求。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-15T08:57:44.023

如果可以对唯一 ID 进行排序（例如按字母顺序或数字顺序），您可以批量比较。

假设该示例 ID 是数字，范围为 1 - 10^7。然后，您可以首先将前 10^6 个元素放在哈希表中，对第二个文件进行顺序扫描以查找匹配记录。

在pseudopython中，我没有测试过这个：

```
for i in xrange(0,9):
    for line in file1:
        time, id = line.split(']')
        id = int(id)
        if i * 10**6 < id < (i+1) * 10**6:
            hash_table[id] = time

    for line in file2:
        time, id = line.split(']') # needs a second split to get the id
        id = int(id)
        if id in hashtable:
            # compare timestamps 
```

如果 ID 不是数字，您可以使用字母键创建批次：

```
if id.startswith(a_letter_from_the_alphabet):
    hash_table[id] = time 
```

# javascript - Windows 8 应用程序（html 和 Javascript）：从图片库显示图像的替代方式（其他文件选择器）

> ID：12435808
> 
> 赞同：4
> 
> 时间：2012-09-15T08:27:41.197
> 
> 标签：javascript, html, windows-8, windows-runtime, winjs

我一直在尝试创建一种替代方法来获取和显示列表视图中的图像（我的意思是文件选择器除外），因为该应用程序已经花费了太多时间来加载和处理。事实证明，我一直错过了一个点..img 没有将绝对路径作为源（src）。

我使用的代码是：

```
var pictureLibrary = Windows.Storage.KnownFolders.picturesLibrary;
pictureLibrary.getFilesAsync(query).then(function (items) {....}; 
```

好吧，数据绑定是正确的，列表视图正在获取所有文件数据，包括文件路径。没问题。`base.js`尽管 Visual Studio 提示文件 ( ) 中关于使用图像标签的绝对路径的异常：

```
"0x80004004 - JavaScript runtime error: Operation aborted
If there is a handler for this exception, the program may be safely continued." 
```

那么，如果处理了异常，问题会解决吗？还是没有办法在 HTML 的 img 标记中显示图片库中的图像（在 listview 中也是如此）？

有没有其他方法可以从中获取图像`pictureLibrary`？还有一件事......什么会更好：使用文件选择器或直接使用文件数据加载它（即我在这里尝试的东西）。

说到javascript，我有点天真，所以请描述一下。如果我遗漏任何信息，请告诉我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T13:10:44.400

所以我的理解是 items 包含图片库中的图像。然后您可以通过以下方式显示它们：

```
for (var i = 0; i < items.length; i++) {
    var image = document.createElement("img");
    image.src = URL.createObjectURL(items[i]);
    container.appendChild(image); // container is where you want to append them
} 
```

我使用了以下[示例](http://msdn.microsoft.com/en-us/library/windows/apps/hh770876.aspx)。

# button - ButtonField 没有出现在 Horizo ntalFieldManager 中

> ID：12435812
> 
> 赞同：1
> 
> 时间：2012-09-15T08:28:42.030
> 
> 标签：button, blackberry, horizontalfieldmanager

我在 Blackberry 应用程序的 Horizo​​ntalFieldManager 中添加了一个 buttonField。我在添加 EditField 后添加了它。然而 buttonField 没有出现。下面是我的代码

```
HorizontalFieldManager hfm = new HorizontlFieldManager(); 
    BasicEditField edit = new BasicEditField("Label", "UP");
    ButtonField button = new ButtonField("Search");
    hfm.add(edit);
    hfm.add(button);
    add(hfm); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T11:29:34.283

这个答案不会解决你的问题，但重要的是要注意**你的代码绝对**没问题，而且没有任何问题。

`HorizontalFieldManager`类充满了 OS 5.0 中引入的错误，至于今天（最新版本是 7.x），RIM 没有表现出任何修复它的意图。

作为示例，这是BB Developer Issue Tracker 中[的一个错误问题，但仍未解决。](https://www.blackberry.com/jira/browse/JAVAAPI-1366)我不得不在我的最新项目中处理 hfm 并且还面临着我必须通过创建自己的经理来解决的问题，就像[Shashank 的回答](https://stackoverflow.com/a/12439551/813951)显示的那样。您可以找到更多关于在 SO 中创建自定义管理器的示例。[这里](http://www.blackberry.com/knowledgecenterpublic/livelink.exe/fetch/2000/348583/800332/800505/800508/How_To_-_Create_a_custom_layout_manager_for_a_screen.html?nodeid=800263&vernum=0)也涵盖了基础知识。

这是目前唯一的解决方案，因为 RIM 正在过渡到 BB 10 (C++)，并且他们正在转储 Java API，所以不要指望他们会很快修复它。即使它们是，它也不会被修复，而是在最新的操作系统版本上，这是无用的，因为 BB 设备很少升级。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T17:25:55.783

您需要设置编辑字段宽度和按钮宽度

```
protected void layout(int width,int height)
{
super.layout(Display.getWidth() * 3 /4  , getpreferedHeight());
super.setExtent(Display.getWidth() * 3/4    , getpreferedHeight());
} 
```

按钮使用

```
protected void layout(int width,int height)
{
super.layout(Display.getWidth() /4  , getpreferedHeight());
super.setExtent(Display.getWidth() /4   , getpreferedHeight());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T03:28:21.937

我认为[Shashank 基本上是在正确的轨道上](https://stackoverflow.com/a/12439551/119114)，但是对于如何更改`ButtonField`宽度的更完整示例，我[建议您查看此答案](https://stackoverflow.com/a/8167656/119114)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-15T08:50:36.847

将 VerticalFieldManager 替换为 HorizantalFieldManager

# ruby - Ruby 中的“==”总是值相等吗？

> ID：12435813
> 
> 赞同：6
> 
> 时间：2012-09-15T08:28:45.470
> 
> 标签：ruby, string-comparison, object-comparison

抱歉，如果重复（我没找到）

这只是为了确认 Ruby 的运算符`==`总是执行相等比较。IE

```
a == b 
```

将 a 的值与 b 的值进行比较，而不是像 Java 那样，它们是否指向内存中的同一个对象（对于后者，在 Ruby 中，您应该使用`a.object_id == b.object_id`）。

因此，在 Ruby 中将字符串值与 == 进行比较是安全的（而在 Java 中这样做并不安全）

谢谢

**编辑**：

问题在于任何 Ruby 对象的默认 == 行为，因为它可能误导 Java-C-C++ 程序员，假设 a==b 比较引用本身，而不是引用内容。

无论如何，您可以使用字符串查看此代码

```
one="hello"
two="he"
two << "llo"

if one == two
  puts "surprise: comparing values, not like in Java"
end

if not one.object_id == two.object_id
  puts "obvious: do this to compare references"
end 
```

**编辑 2**。

所以，在 Ruby 中，比较

```
a == b 
```

检查 a 和 b 的值

但是，任务

```
a = b 
```

不复制值，而是使 a 和 b 指向同一个对象！

继续前面的代码

```
puts one.object_id
puts two.object_id

puts " and now "

one = two

puts one.object_id
puts two.object_id 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T08:34:27.130

In Ruby, `==` can be overloaded, so it could do anything the designer of the class you're comparing wants it to do. In that respect, it's very similar to Java's `equals()` method.

The convention is for `==` to do value comparison, and most classes follow that convention, `String` included. So you're right, *using `==` for comparing strings will do the expected thing.*

The convention is for `equal?` to do reference comparison, so your test `a.object_id == b.object_id` could also be written `a.equal?(b)`. (The `equal?` method could be defined to do something nonstandard, but then again, so can `object_id`!)

(Side note: when you find yourself comparing strings in Ruby, you often should have been using symbols instead.)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T08:35:08.870

From [http://www.skorks.com/2009/09/ruby-equality-and-object-comparison/](http://www.skorks.com/2009/09/ruby-equality-and-object-comparison/).

**The code:**

```
class MyObject
end
object1 = MyObject.new
object2 = object1
object3 = MyObject.new

puts "Object 1 is == to object 2: #{object1 == object2}"
puts "Object 1 is eql? to object 2: #{object1.eql? object2}"
puts "Object 1 is equal? to object 2: #{object1.equal? object2}"
puts "Object 1 is == to object 3: #{object1 == object3}"
puts "Object 1 is eql? to object 3: #{object1.eql? object3}"
puts "Object 1 is equal? to object 3: #{object1.equal? object3}" 
```

**The output:**

```
Object 1 is == to object 2: true
Object 1 is eql? to object 2: true
Object 1 is equal? to object 2: true
Object 1 is == to object 3: false
Object 1 is eql? to object 3: false
Object 1 is equal? to object 3: false 
```

**Edit - Additional output:**

```
irb(main):001:0> class MyObject
irb(main):002:1> end
=> nil
irb(main):003:0> object1 = MyObject.new
=> #<MyObject:0x281bc08>
irb(main):006:0> object1.respond_to?( '=='.to_sym )
=> true
irb(main):007:0> object1.respond_to?( 'eql?'.to_sym )
=> true
irb(main):013:0> MyObject.superclass
=> Object 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T10:36:37.720

根据“Ruby 编程语言”（Flanagan & Matsumoto），第 4.6.7 节第 106 页

> == 是相等运算符。它根据左侧操作数的“相等”定义确定两个值是否相等。

在 3.8.3 第 74 页中：

> 每个对象都有一个对象标识符，一个 Fixnum，您可以使用 object_id 方法获得它。此方法返回的值在对象的生命周期内是常量且唯一的。

因此，这与 Java 正好相反（令我惊讶）。

# javascript - 包括用于 facebook 评论框的 JavaScript SDK

> ID：12435816
> 
> 赞同：1
> 
> 时间：2012-09-15T08:29:10.837
> 
> 标签：javascript, facebook, web-services, facebook-javascript-sdk, facebook-comments

我需要做什么包括 JavaScript SDK，以便我能够使用 facebook 代码进行评论框：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) return;
js = d.createElement(s); js.id = id;
js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=1xxxxx34xx26x0";
fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

和

```
<div class="fb-comments" data-href="http://example.com" data-num-posts="2" data-width="470"></div> 
```

我看了[**这个**](http://developers.facebook.com/docs/reference/javascript/)页面，但我真的不明白如何做到这一点。我在不支持 php 的 google appengine 上托管了我的网站。我想为我的网站实现一个评论框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T23:17:37.530

您将第一个 html 块放在`<body>`页面 html 中标记之后的行上。然后，您将第二个 html 块放在您希望评论插件出现在您的页面上的位置。

编辑：删除了断开的链接。

# php - 意外的 t_string，似乎找不到答案

> ID：12435818
> 
> 赞同：1
> 
> 时间：2012-09-15T08:29:13.723
> 
> 标签：php, mysql

我对 MySQL 查询有一个奇怪的问题......

这很奇怪，因为它似乎没有问题，但显然……

这是查询：

```
$lastmessage = execute_scalar(“SELECT message FROM messages WHERE nick = 'nick' ORDER BY date LIMIT 0,1”); 
```

我在同一行得到的错误是：

```
parse error: syntax error, unexpected t_string 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T08:34:11.880

# c# - 浮点运算歧义

> ID：12435831
> 
> 赞同：3
> 
> 时间：2012-09-15T08:31:27.677
> 
> 标签：c#, floating-point, floating, floating-point-precision

> **可能重复：**
> [为什么 C# 中的浮点运算不精确？](https://stackoverflow.com/questions/753948/why-is-floating-point-arithmetic-in-c-sharp-imprecise)

为什么浮点运算存在偏差？有什么具体原因吗？输出：160 139

```
static void Main()
        {
            float x = (float) 1.6;
            int y = (int)(x * 100);
            float a = (float) 1.4;
            int b = (int)(a * 100);
            Console.WriteLine(y);
            Console.WriteLine(b);
            Console.ReadKey();
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T12:20:38.660

任何分母不是 2 的幂的有理数在表示为二进制时将导致无限位数。这里有 8/5 和 7/5。因此，没有精确的二进制表示为浮点数（除非您有无限的内存）。

1.6 的精确二进制表示是 110011001100110011001100110011001100...
1.4 的精确二进制表示是 101100110011001100110011001100110011...
这两个值都有无限位数（1100 不断重复）。

浮点值的精度为 24 位。因此，任何值的二进制表示都将四舍五入为 24 位。如果将给定值四舍五入为 24 位，您将得到：
1.6：110011001100110011001101（十进制 13421773）-向上舍入
1.4：101100110011001100110011（十进制 11744051）-向下舍入

这两个值的指数均为 0（第一位是 2^0 = 1，第二位是 2^-1 = 0.5 等）。
由于 24 位值中的第一位是 2^23，您可以通过将 24 位值（13421773 和 11744051）除以 23 倍来计算精确的十进制值。
值为：1.60000002384185791015625 和 1.39999997615814208984375。

使用浮点类型时，您始终必须考虑它们的精度是有限的。可以精确写为十进制值的值在表示为二进制时可能会向上或向下舍入。转换为 int 不尊重这一点，因为它会截断给定的值。您应该始终使用 Math.Round 之类的东西。

如果您真的需要有理数的精确表示，则需要一种完全不同的方法。由于有理数是分数，因此您可以使用整数来表示它们。[这](http://www.codeproject.com/Articles/88980/Rational-Numbers-NET-4-0-Version-Rational-Computin)是一个如何实现这一目标的示例。
但是，你不能写 Rational x = (Rational)1.6 那么。您必须编写类似 Rational x = new Rational(8, 5) （或 new Rational(16, 10) 等）的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T08:36:32.010

This is due to the fact that floating point arithmetic is not precise. When you set `a` to 1.4, internally it may not be exactly 1.4, just as close as can be made with machine precision. If it is fractionally less than 1.4, then multiplying by 100 and casting to integer will take only the integer portion which in this case would be 139\. You will get far more technically precise answers but essentially this is what is happening.

In the case of your output for the 1.6 case, the floating point representation may actually be minutely larger than 1.6 and so when you multiply by 100, the total is slightly larger than 160 and so the integer cast gives you what you expect. The fact is that there is simply not enough precision available in a computer to store every real number exactly.

See this link for details of the conversion from floating point to integer types [http://msdn.microsoft.com/en-us/library/aa691289%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/aa691289%28v=vs.71%29.aspx) - it has its own section.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T15:29:32.463

浮点类型`float`（32 位）和`double`（64 位）具有有限的精度，并且更多的值在内部表示为二进制值。正如你不能在十进制系统中精确地表示 1/7（~ 0.1428571428571428...），在二进制系统中也不能精确地表示 1/10。

但是，您可以使用该`decimal`类型。它的精度仍然有限​​（但精度很高），但数字 a 在内部以十进制方式表示。因此，像 1/10 这样的值在内部表示完全像 0.1000000000000000000000000000。1/7 对`decimal`. 但至少你不会因为转换为二进制然后再转换为十进制而损失精度。

考虑使用`decimal`.

# ember.js - 如何将 Emberjs 的使用限制在我网站的几个页面上？

> ID：12435834
> 
> 赞同：1
> 
> 时间：2012-09-15T08:32:40.513
> 
> 标签：ember.js

我运行一个由 Django 服务的网站，几乎所有的逻辑都存在于服务器端。但是，我有一些以 AJAX 为中心的页面（例如评论页面），随着时间的推移，这些页面变得过于混乱，有多个嵌套的 AJAX 回调和繁重的 DOM 操作。

它太难维护了，所以我决定试试 Emberjs。

我想避免一些 JS 文件仅由需要它们的页面链接，因为我将所有 JS 压缩在一个我提供的缩小文件中。

如果我不需要，有没有办法不初始化 Emberjs？

例如，这里有一些 HTML：

```
<p>
  I don't need ember in this page!
</p>​ 
```

还有一些JS：

```
App = Ember.Application.create({
    rootElement: "hello"
});
Ctrl = Ember.ArrayController.create({
    content: [],
    init: function() {
        alert("Ember is initialized anyway.");
    }
});​ 
```

小提琴：http: [//jsfiddle.net/JYvSE/](http://jsfiddle.net/JYvSE/)

在`alert`我的控制器的`init`功能被执行。我可以把它放在我的 HTML 中：

```
<div id="ember-enabled"></div> 
```

然后在我的控制器中我可以这样做：

```
if($('#ember-enabled') === undefined) return; 
```

但这会让我省去控制器代码，而不是 Emberjs 初始化。

关于如何解决这个问题的任何建议？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T12:13:11.207

一种方法是使用像 minispade 或 require.js 这样的模块系统，并且只在您想要的页面上需要您的“主”ember 应用程序模块。主模块是`require`ember 应用程序和其他核心模块。

# c# - WF 4：ActivityAction 或 ActivityFunc 与子活动之间的区别

> ID：12435837
> 
> 赞同：2
> 
> 时间：2012-09-15T08:33:08.573
> 
> 标签：c#, .net, workflow-foundation-4, workflow-foundation

我是 Workflow 基金会的新手，想了解它的目的`ActivityAction`以及`ActivityFunc`它与拥有子活动的区别。

据我所知，子活动可能存在于某些组合中`NativeActivity`，并且必须由它安排。因此，子活动*可以*在其执行期间用作`NativeActivity`事件处理程序。因此，例如，这个 NativeActivity 可能会运行一些长时间运行的计算，并在它完成时安排它的子节点。

`ActivityAction`和`ActivityFunc`(func 返回结果而动作不) 存在相同的目的 - 在`NativeActivity`. 不同之处在于它们是强类型的，看起来更像是其父级声明的合同。

所以我得出结论，主要区别在于强类型和 ActivityFunc/Action 可以与子活动交换。我的理解是错误的还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T10:17:06.443

ActivityAction 和 ActivityFunc 的主要目的是您可以在您的活动和子活动之间共享数据。大多数时候你不需要，你可以安排一个子活动，它可以使用 InArguments 来获取数据。但是在某些情况下，例如 ParallelForEach，父级不能只填充一个变量，因为每个子级都是并行调度的。在这种情况下，您希望在安排子活动时传递数据。这就是 ActivityAction 的用武之地。

在大多数情况下，您不需要使用 ActivityAction 和 ActivityFunc。

# ruby - 修改实例变量的名称

> ID：12435838
> 
> 赞同：0
> 
> 时间：2012-09-15T08:33:38.870
> 
> 标签：ruby

假设我有@chicken，但我想通过计数循环将其重命名为@chicken1 和@chicken2。生成名称后，`"chicken#{@count}"`如何将输出转换为@chicken1 等名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T08:50:26.067

Ruby 有用于此类任务的方法[remove_instance_variable](http://apidock.com/ruby/Object/remove_instance_variable)

```
class A
  def initialize
    @chicken = 'chichen'
  end

  def rename
    count = 1
    instance_variable_set(:"@chicken#{count}", @chicken)
  end

  def remove
    remove_instance_variable(:@chicken)
  end
end

a = A.new

a.instance_variables #=> [:@chicken]

a.rename

a.instance_variables #=> [:@chicken, :@chicken1]

a.remove

a.instance_variables #=> [:@chicken1]

a.instance_variable_get("@chicken1") #=> "chicken" 
```

# c++ - 定向梯度直方图

> ID：12435846
> 
> 赞同：0
> 
> 时间：2012-09-15T08:35:11.397
> 
> 标签：c++, image-processing, opencv

对于一个项目，我正在编写一些代码来计算一些图像的 HoG，但我坚持这样一个事实，即我的方向仅在 0 ~ 90 度之间，同时使用 atan2 函数。我猜这个问题是由于 OpenCV 的 filter2D 功能而发生的，但我不确定这是不是这个原因，或者我做错了什么：

```
Vector<Vector<Mat_<float>>> HoG(Mat image) {
Mat img_x;
Mat img_y;
IplImage img = image;

Mat kern_x = (Mat_<char>(1, 3) << -1, 0, 1);
Mat kern_y = (Mat_<char>(3, 1) << -1, 0, 1);

filter2D(image, img_x, image.depth(), kern_x);
filter2D(image, img_y, image.depth(), kern_y);

Vector<Vector<Mat_<float>>> histograms;

for(int y = 0; y < image.rows - size; y += size) {
    Vector<Mat_<float>> temp_hist;
    for(int x = 0; x < image.cols - size; x += size) {
        float total_mag = 0;
        Mat hist = Mat::zeros(1, 8, CV_32FC1);
        for(int i = y; i < y + size; ++i) {
            for(int j = x; j < x + size; ++j) {
                float grad_x = (float)img_x.at<uchar>(i, j);
                float grad_y = (float)img_y.at<uchar>(i, j);
                double ori = myatan2(grad_x, grad_y);
                float mag = sqrt(pow(grad_x, 2) + pow(grad_y, 2));
                int bin = round(ori/45);
                hist.at<float>(0, (bin - 1 < 0 ? 7 : bin - 1)) += - (float)(ori - ((round(ori/45) - 1) * 45.0 + 22.5)) / 45.0f;
                hist.at<float>(0, bin) += -(float)(ori - ((round(ori/45) - 1) * 45.0 + 22.5)) / 45.0f;
                total_mag += mag;
            }
        }
        // Normalize the histogram
        for(int i = 0; i < 8; ++i) {
            hist.at<float>(0, i) = hist.at<float>(0, i) / total_mag;
        }
        temp_hist.push_back(hist);
    }
    histograms.push_back(temp_hist);
}

return histograms;
} 
```

如果您有任何其他技巧可以提高我的代码的速度或其他内容，当然也欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T09:45:43.187

我注意到这一点：

```
float grad_x = (float)img_x.at<uchar>(i, j);
float grad_y = (float)img_y.at<uchar>(i, j); 
```

您似乎正在使用`uchar`. 这不应该`char`吗？

# php - sscanf php multiple words echo

> ID：12435847
> 
> 赞同：0
> 
> 时间：2012-09-15T08:35:15.817
> 
> 标签：php, echo, scanf, words

I would like assistance to get an output of the string after `var:` instead of just the first word. Is this possible, and what is the basics to doing so. Thanks.

```
<?php
$string = "var:Kids Choice Awards iOS Application. change sql.";
sscanf($string,"var:%s",$var);
// show types and values
var_dump($var);
echo "$var";
?> 
```

//output----------

```
string 'Kids' (length=4)
Kids 
```

//end Output-------

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T08:55:30.940

您可以使用 "%[regex]" 格式

```
<?php

$string = "var:Kids Choice Awards iOS Application. change sql.";
sscanf($string,"var:%[^&]", $var);
// show types and values
var_dump($var);
echo "$var";
?> 
```

# iphone - How to cross fade between AVAudioPlayers

> ID：12435849
> 
> 赞同：5
> 
> 时间：2012-09-15T08:35:41.183
> 
> 标签：iphone, avaudioplayer, fade, volume

I want to use AVAudioPlayer and cross fade more than 2 mp3 files.

I have 5 mp3 files and 5 pages "myScrollView" with UIScrollView class and pagingEnabled = YES.

When user move page, I want to play each songs for each page with volume fade out for previous mp3 file and fade in for next mp3.

Please help this problem.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-22T18:45:55.820

这是一个非常古老的线程，但我只是寻找有关交叉淡入淡出问题的解决方案并找到了它。我是这样解决的：

```
-(void)crossFadePlayerOne:(AVAudioPlayer *)player1 andPlayerTwo:(AVAudioPlayer *)player2 withCompletion:(void(^)())completion{
    if([player1 volume] > 0){
        [player1 setVolume:[player1 volume] - 0.05];
        [player2 setVolume:[player2 volume] + 0.05];

        dispatch_after(dispatch_time(DISPATCH_TIME_NOW, 0.1 * NSEC_PER_SEC),dispatch_get_main_queue(),^{
            [self crossFadePlayerOne:player1 andPlayerTwo:player2 withCompletion:completion];
        });

    }else{
        if(completion){
            completion();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T17:05:56.217

这不是交叉衰落操作。但是，这可以通过使用 NSOperation 的新线程一次淡入/淡出一个，并且可以以任何顺序将淡入/淡出效果添加到线程中。

我发现了由 Andrew Mackenzie-Ross 于 2010 年 11 月 30 日创建的 Linear fade Object MXAudioPlayerFadeOperation。 [麦克罗斯网](http://mackross.net)。

MXAudioPlayerFadeOperation.h

```
#import <Foundation/Foundation.h>

@class AVAudioPlayer;
@interface MXAudioPlayerFadeOperation : NSOperation {
    AVAudioPlayer *_audioPlayer;
    NSTimeInterval _fadeDuration;
    NSTimeInterval _delay;
    float _finishVolume;
    BOOL _pauseAfterFade;
    BOOL _stopAfterFade;
    BOOL _playBeforeFade;
}

// The AVAudioPlayer that the volume fade will be applied to.
// Retained until the fade is completed.
// Must be set with init method.
@property (nonatomic, strong, readonly) AVAudioPlayer *audioPlayer;

// The duration of the volume fade.
// Default value is 1.0
@property (nonatomic, assign) NSTimeInterval fadeDuration;

// The delay before the volume fade begins.
// Default value is 0.0
@property (nonatomic, assign) NSTimeInterval delay;

// The volume that will be faded to.
// Default value is 0.0
@property (nonatomic, assign) float finishVolume;

// If YES, audio player will be sent a pause message when the fade has completed.
// Default value is NO, however, if finishVolume is 0.0, default is YES
@property (nonatomic, assign) BOOL pauseAfterFade;

// If YES, when the fade has completed the audio player will be sent a stop message.
// Default value is NO.
@property (nonatomic, assign) BOOL stopAfterFade;

// If YES, audio player will be sent a play message after the delay.
// Default value is YES.
@property (nonatomic, assign) BOOL playBeforeFade;

// Init Methods
- (id)initFadeWithAudioPlayer:(AVAudioPlayer*)player toVolume:(float)volume overDuration:(NSTimeInterval)duration withDelay:(NSTimeInterval)timeDelay;
- (id)initFadeWithAudioPlayer:(AVAudioPlayer*)player toVolume:(float)volume overDuration:(NSTimeInterval)duration;
- (id)initFadeWithAudioPlayer:(AVAudioPlayer*)player toVolume:(float)volume;
- (id)initFadeWithAudioPlayer:(AVAudioPlayer*)player;

@end 
```

MXAudioPlayerFadeOperation.m

```
#import "MXAudioPlayerFadeOperation.h"
#import <AVFoundation/AVFoundation.h>

#define SKVolumeChangesPerSecond 15

@interface MXAudioPlayerFadeOperation ()

- (void)beginFadeOperation;
- (void)finishFadeOperation;
@end

@implementation MXAudioPlayerFadeOperation
#pragma mark -
#pragma mark Properties
@synthesize audioPlayer = _audioPlayer;
@synthesize fadeDuration = _fadeDuration;
@synthesize finishVolume = _finishVolume;
@synthesize playBeforeFade = _playBeforeFade;
@synthesize pauseAfterFade = _pauseAfterFade;
@synthesize stopAfterFade = _stopAfterFade;
@synthesize delay = _delay;

#pragma mark -
#pragma mark Accessors
- (AVAudioPlayer *)audioPlayer {
    AVAudioPlayer *result;
    @synchronized(self) {
        result = _audioPlayer;
    }
    return result;
}

- (void)setAudioPlayer:(AVAudioPlayer *)anAudioPlayer {
    @synchronized(self) {
        if (_audioPlayer != anAudioPlayer) {
            _audioPlayer = nil;
            _audioPlayer = anAudioPlayer;
        }
    }
}

#pragma mark -
#pragma mark NSOperation
-(id) initFadeWithAudioPlayer:(AVAudioPlayer*)player toVolume:(float)volume overDuration:(NSTimeInterval)duration withDelay:(NSTimeInterval)timeDelay {
    if (self = [super init]) {
        self.audioPlayer = player;
        [player prepareToPlay];
        _fadeDuration = duration;
        _finishVolume = volume;
        _playBeforeFade = YES;
        _stopAfterFade = NO;
        _pauseAfterFade = (volume == 0.0) ? YES : NO;
        _delay = timeDelay;
    }
    return self;
}

- (id)initFadeWithAudioPlayer:(AVAudioPlayer*)player toVolume:(float)volume overDuration:(NSTimeInterval)duration {
    return [self initFadeWithAudioPlayer:player toVolume:volume overDuration:duration withDelay:0.0];
}

- (id)initFadeWithAudioPlayer:(AVAudioPlayer*)player toVolume:(float)volume {
    return [self initFadeWithAudioPlayer:player toVolume:volume overDuration:1.0];
}

- (id)initFadeWithAudioPlayer:(AVAudioPlayer*)player {
    return [self initFadeWithAudioPlayer:player toVolume:0.0];
}

- (id) init {
    NSLog(@"Failed to init class (%@) with AVAudioPlayer instance, use initFadeWithAudioPlayer:",[self class]);
    return nil;
}

- (void)main {
    @autoreleasepool {

        [NSThread sleepForTimeInterval:_delay];
        if ([self.audioPlayer isKindOfClass:[AVAudioPlayer class]]) {
            [self beginFadeOperation];
        }
        else {
            NSLog(@"AudioPlayerFadeOperation began with invalid AVAudioPlayer");
        }
    }

}

- (void)beginFadeOperation {
    if (![self.audioPlayer isPlaying] && _playBeforeFade) [self.audioPlayer play];

    if (_fadeDuration != 0.0) {

        NSTimeInterval sleepInterval = (1.0 / SKVolumeChangesPerSecond);
        NSTimeInterval startTime = [[NSDate date] timeIntervalSinceReferenceDate];
        NSTimeInterval now = startTime;

        float startVolume = [self.audioPlayer volume];

        while (now < (startTime + _fadeDuration)) {
            float ratioOfFadeCompleted = (now - startTime)/_fadeDuration;
            float volume = (_finishVolume * ratioOfFadeCompleted) + (startVolume * (1-ratioOfFadeCompleted));
            [self.audioPlayer setVolume:volume];
            [NSThread sleepForTimeInterval:sleepInterval];
            now = [[NSDate date] timeIntervalSinceReferenceDate];
        }

        [self.audioPlayer setVolume:_finishVolume];
        [self finishFadeOperation];
    }
    else {
        [self.audioPlayer setVolume:_finishVolume];
        [self finishFadeOperation];
    }
}

- (void)finishFadeOperation {
    if ([self.audioPlayer isPlaying] && _pauseAfterFade) [self.audioPlayer pause];
    if ([self.audioPlayer isPlaying] && _stopAfterFade) [self.audioPlayer stop];
}

@end 
```

带有使用 AudioManagerController 的示例

AudioManagerController.h

```
/*
 * Hedgewars-iOS, a Hedgewars port for iOS devices
 * Copyright (c) 2009-2011 Vittorio Giovara <vittorio.giovara@gmail.com>
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; version 2 of the License
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
 *
 * File created on 23/09/2011.
 */

#import <Foundation/Foundation.h>

@interface AudioManagerController : NSObject {

}

+(void) playBackgroundMusic;
+(void) pauseBackgroundMusic;
+(void) stopBackgroundMusic;

+(void) fadeInBackgroundMusic;
+(void) fadeOutBackgroundMusic;

+(void) playClickSound;
+(void) playBackSound;
+(void) playSelectSound;

+(void) releaseCache;

@end 
```

AudioManagerController.m

```
/*
 * Hedgewars-iOS, a Hedgewars port for iOS devices
 * Copyright (c) 2009-2011 Vittorio Giovara <vittorio.giovara@gmail.com>
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; version 2 of the License
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.
 *
 * File created on 23/09/2011.
 */

#import "AudioManagerController.h"
#import "AVFoundation/AVAudioPlayer.h"
#import <AudioToolbox/AudioToolbox.h>
#import "MXAudioPlayerFadeOperation.h"

static AVAudioPlayer *backgroundMusic = nil;
static SystemSoundID clickSound = -1;
static SystemSoundID backSound = -1;
static SystemSoundID selSound = -1;

static NSOperationQueue *audioFaderQueue = nil;
static MXAudioPlayerFadeOperation *fadeIn = nil;
static MXAudioPlayerFadeOperation *fadeOut = nil;

@implementation AudioManagerController

#pragma mark -
#pragma mark background music control
+(void) loadBackgroundMusic {
    NSString *musicString = [[NSBundle mainBundle] pathForResource:@"hwclassic" ofType:@"mp3"];
    backgroundMusic = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:musicString] error:nil];

    backgroundMusic.delegate = nil;
    backgroundMusic.volume = 0;
    backgroundMusic.numberOfLoops = -1;
    [backgroundMusic prepareToPlay];
}

+(void) playBackgroundMusic {
    if ([[[NSUserDefaults standardUserDefaults] objectForKey:@"music"] boolValue] == NO)
        return;

    if (backgroundMusic == nil)
        [AudioManagerController loadBackgroundMusic];

    backgroundMusic.volume = 0.45f;
    [backgroundMusic play];
}

+(void) pauseBackgroundMusic {
    [backgroundMusic pause];
}

+(void) stopBackgroundMusic {
    [backgroundMusic stop];
}

+(void) fadeOutBackgroundMusic {
    if (audioFaderQueue == nil)
        audioFaderQueue = [[NSOperationQueue alloc] init];
    if (backgroundMusic == nil)
        [AudioManagerController loadBackgroundMusic];
    if (fadeOut == nil)
        fadeOut = [[MXAudioPlayerFadeOperation alloc] initFadeWithAudioPlayer:backgroundMusic toVolume:0.0 overDuration:3.0];

    [audioFaderQueue addOperation:fadeOut];
}

+(void) fadeInBackgroundMusic {
    if (audioFaderQueue == nil)
        audioFaderQueue = [[NSOperationQueue alloc] init];
    if (backgroundMusic == nil)
        [AudioManagerController loadBackgroundMusic];
    if (fadeIn == nil)
        fadeIn = [[MXAudioPlayerFadeOperation alloc] initFadeWithAudioPlayer:backgroundMusic toVolume:0.45 overDuration:2.0];

    [audioFaderQueue addOperation:fadeIn];
}

#pragma mark -
#pragma mark sound effects control
+(SystemSoundID) loadSound:(NSString *)snd {
    // get the filename of the sound file:
    NSString *path = [NSString stringWithFormat:@"%@/%@",[[NSBundle mainBundle] resourcePath],snd];

    // declare a system sound id and get a URL for the sound file
    SystemSoundID soundID;
    NSURL *filePath = [NSURL fileURLWithPath:path isDirectory:NO];

    // use audio sevices to create and play the sound
    AudioServicesCreateSystemSoundID((CFURLRef)filePath, &soundID);
    return soundID;
}

+(void) playClickSound {
    if ([[[NSUserDefaults standardUserDefaults] objectForKey:@"sound"] boolValue] == NO)
        return;

    if (clickSound == -1)
        clickSound = [AudioManagerController loadSound:@"clickSound.wav"];

    AudioServicesPlaySystemSound(clickSound);
}

+(void) playBackSound {
    if ([[[NSUserDefaults standardUserDefaults] objectForKey:@"sound"] boolValue] == NO)
        return;

    if (backSound == -1)
        backSound = [AudioManagerController loadSound:@"backSound.wav"];

    AudioServicesPlaySystemSound(backSound);
}

+(void) playSelectSound {
    if ([[[NSUserDefaults standardUserDefaults] objectForKey:@"sound"] boolValue] == NO)
        return;

    if (selSound == -1)
        selSound = [AudioManagerController loadSound:@"selSound.wav"];

    AudioServicesPlaySystemSound(selSound);
}

#pragma mark -
#pragma mark memory management
+(void) releaseCache {
    [backgroundMusic stop];
    [backgroundMusic release], backgroundMusic = nil;
    [fadeOut release], fadeOut = nil;
    [fadeIn release], fadeIn = nil;
    [audioFaderQueue release], audioFaderQueue = nil;
    AudioServicesDisposeSystemSoundID(clickSound), clickSound = -1;
    AudioServicesDisposeSystemSoundID(backSound), backSound = -1;
    AudioServicesDisposeSystemSoundID(selSound), selSound = -1;
    MSG_MEMCLEAN();
}

@end 
```

参考：[对冲战争](http://code.google.com/p/hedgewars/source/browse/project_files/HedgewarsMobile/MXAudioPlayerFadeOperation.m?spec=svn6aeaba3ee584763c4b525a9c03e5eb4605063e41&r=6aeaba3ee584763c4b525a9c03e5eb4605063e41)

# jquery - Jquery 使 Div 成为可点击的表单区域

> ID：12435855
> 
> 赞同：0
> 
> 时间：2012-09-15T08:36:01.853
> 
> 标签：jquery, html, css, forms

表格：

```
 <form action="includes/photos.php" id="joinPhotoUploadForm" enctype="multipart/form-data">
    <input type="file" name="file" id="file"><br>
  </form> 
```

div：（假设 CSS 宽度：300px；和高度：300px；）

```
<div id="clickable"><div> 
```

是否可以使用 JQuery 使整个 DIV 区域仅成为表单元素并请求用户选择/浏览文件？

否则有没有办法用 CSS 做到这一点？注意：我尝试过使用 CSS，它可以在 Chrome 中使用，但仅适用于 FF 和 IE 的部分 DIV。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T08:45:44.290

根据您的问题和我所理解的检查我的实施

[http://jsfiddle.net/vBVkL/29/](http://jsfiddle.net/vBVkL/29/)

如果我误解了，请告诉我。

**更新：http :** [//jsfiddle.net/vBVkL/30/](http://jsfiddle.net/vBVkL/30/)

谢谢

# python - Using Sin-1 or inverse sin in python

> ID：12435856
> 
> 赞同：2
> 
> 时间：2012-09-15T08:36:08.217
> 
> 标签：python, math, python-3.x, trigonometry

Here is my code:

```
# point of intersection between opposite and hypotenuse

x,y  =    pygame.mouse.get_pos()

# using formula for length of line

lenline1 = (x-x)**2 + (300-y)**2
lenline2 = (x-700)**2 + (y-300)**2

opposite = math.sqrt(lenline1)

adjacent = math.sqrt(lenline2)

# Converting length of lines to angle

PQ = opposite/adjacent
k = math.sin(PQ)
j = math.asin(k)

print(j) 
```

I'm not getting the results I expected, although after messing around with it I got close but it wasn't quite right. Could someone please tell me what I'm doin wrong. I have two lines: opposite and adjacent And I wish to get the angle using the inverse of sin. What am I doing wrong. I'm only a beginner so don't give too detailed info. I can't imagine this is hard to do.

Thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T08:52:22.270

To find the angle between two lines, use the following relation:

```
cos(angle) = (l1 dot l2) / (|l1| |l2|) 
```

That is,

```
dotproduct = l1x * l2x + l1y * l2y
lenproduct = |l1| * |l2|
angle = acos(dotproduct / lenproduct) 
```

where l1x, l1y are the x,y components of the line l1.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T08:38:59.663

不要为`k`计算而烦恼，它没有意义。

```
j = math.asin(PQ) 
```

但是，这仅适用于直角三角形，您必须在正确的位置设置适当的边长。通常这不起作用，您需要使用[点积方法](http://en.wikipedia.org/wiki/Dot_product)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-04T17:40:32.953

看起来您正在尝试找到三角形 (700,300)、(x,300)、(x,y) 的角度。你让它变得比它需要的复杂得多。斜边的长度是`math.hypot((700-x),(300-y))`，角度是`math.atan2((700-x), (300-y))`。

# iphone - UIAlertView crash by adding clickedButtonAtIndex

> ID：12435860
> 
> 赞同：0
> 
> 时间：2012-09-15T08:36:36.527
> 
> 标签：iphone, crash, uitextfield, uialertview

I create a class to call UIAlertview show on my screen. I write the UIAlert function in another class. **Both these two classes are not my viewController class**.

I use this UIAlert, which is a UITextfield inside, to store texts into a plist file.

here is the class to call UIAlert:

```
#import "Story.h"

@implementation Story

...
+ (void)stage1
{
    AlertClass *pointer = [AlertClass new];
    [pointer doAlert];
} 
```

here is the class AlertClass.m file:

```
- (void)doAlert
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Title" message:@"Message" delegate:self cancelButtonTitle:@"Done" otherButtonTitles:nil];
    alert.alertViewStyle = UIAlertViewStylePlainTextInput;
    [alert show];

}
//this makes crash!
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{
    self.storyFlow.text = [alertView textFieldAtIndex:0].text;
} 
```

Before I add UIAlertViewDelegate in the .h and override the method "clickedButtonAtIndex", it works great. However, I need to store some data from the UITextfield inside the alert view. I get crash and don't know the message it responds as following.

Please help me to solve this problem. Thanks.

[crash pic] [https://dl.dropbox.com/u/47381923/crash.tiff](https://dl.dropbox.com/u/47381923/crash.tiff)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T09:26:03.753

对从警报视图返回的文本执行 NSLog 以查看是崩溃还是随后的“self.storyFlow.text =”导致它。也许 self.storyFlow 尚未创建（使用 alloc/init）

# asp.net - Asp.Net 与 SQL Server 和 Asp.net Linq 应用程序

> ID：12435861
> 
> 赞同：0
> 
> 时间：2012-09-15T08:36:42.457
> 
> 标签：asp.net, sql, linq, connection-string

我有一个使用 linq-to-sql 和 Sql Server Express 2008 的应用程序。当我在单独的 DAL 项目中使用 DBML 文件并将其引用到我的 Web 项目时，执行 Sql Server 显示此错误：

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）

但是当我在我的 web 项目中使用 DBML 时，调试没有任何问题。但在 Windows 7 64 位的 IIS 上，我得到：

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）

这两个错误的原因是否相同？连接字符串不正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T14:56:28.513

我怀疑在第一种情况下，您在 DAL 项目中而不是在您的 Web 项目（它所属的位置）中有连接字符串。确保将其复制到`web.config`您的 Web 项目中。

在第二种情况下，我认为托管 IIS 的机器尝试连接到您自己机器上的数据库。如果是这样，请检查异常：确保您的 SQL Express 实例配置为允许远程连接，启用 IP 协议（​​如果用于本地流量，则为命名管道），并且您的机器可以访问 IIS 机器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T10:22:22.593

我认为，您的连接字符串是错误的。

不用担心。

检查您的 dbml 的 Designer.cs 文件。您将在其中找到`'<YourDBMLFile>DataContext()`' 构造函数。

并更改您的连接字符串。确保你`connectionstring`是正确的。

# php - 如何在印地语中以 unicode 存储数据

> ID：12435867
> 
> 赞同：13
> 
> 时间：2012-09-15T08:38:01.350
> 
> 标签：php, mysql, unicode, hindi

我正在使用`PHP`和`MySQL`应用程序。

问题是：

1.  如何以`MySQL` `नवीन खेतिहर उपकरण।`可读格式或`à¤¨à¤¿à¤²à¥‡à¤¸ à¤° à¤ªà¥à¤¬`格式存储数据

2.  当用户在文本框中输入数据并点击提交时，我们会得到不同格式的数据。`MySQL`如果我们转换并以可读格式存储，我们需要做什么。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-15T08:46:36.927

选择 utf8 字符集和`utf8_general_ci`排序规则。

显然，字段（您要存储印地语文本）的排序规则应该是`utf8_general_ci`.

要更改表格字段，请运行

```
ALTER TABLE `<table_name>` CHANGE `<field_name>` `<field_name>` VARCHAR(100) 
CHARSET utf8 COLLATE utf8_general_ci DEFAULT '' NOT NULL; 
```

连接到数据库后，首先运行以下语句

```
mysql_set_charset('utf8'); 
```

例如：

```
//setting character set
mysql_set_charset('utf8');

//insert Hindi text
mysql_query("INSERT INTO ...."); 
```

检索数据

```
//setting character set
mysql_set_charset('utf8');

//select Hindi text
mysql_query("SELECT * FROM ...."); 
```

在浏览器上打印任何 unicode 文本（比如印地语文本）之前，您应该必须通过添加元标记来设置该页面的内容类型

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

例如：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Example Unicode</title>
</head>

<body>
<?php echo $hindiText; ?>
</body>
</html> 
```

**更新**：

`mysql_query("SET CHARACTER SET utf8") has changed to`mysql_set_charset('utf8'); 这是更改字符集的首选方法。不推荐使用 mysql_query() 来设置（如 SET NAMES utf8）。见[http://php.net/manual/en/function.mysql-set-charset.php](http://php.net/manual/en/function.mysql-set-charset.php) *

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-06T11:53:10.923

### 您只需要在表上运行以下命令。

```
ALTER TABLE <tablename> CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci; 
```

注意：您应该使用`utf8_general_ci`而不是`ut8_unicode_ci`，因为据说它更快。 [utf8_general_ci 和 utf8_unicode_ci 有什么区别](https://stackoverflow.com/questions/766809/whats-the-difference-between-utf8-general-ci-and-utf8-unicode-ci)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-09T08:16:16.390

无需使用字符集更改表。但你的数据库应该是 utf8_unicode_ci。

连接数据库时只需要添加这一行。" mysqli_set_charset($con, 'utf8')"

```
 $con = mysqli_connect(DB_HOST, DB_USER, DB_PASSWORD, DB_DATABASE);
    mysqli_set_charset($con, 'utf8');
    mysqli_query($con, $sql); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-27T13:36:47.580

将 COLLATE 转换为 utf8_general_ci 后，使用这一行 mysqli_set_charset($con, 'utf8'); 在您的查询下方的 $con 和 mysqli_query() 之间。

$con= mysqli_connect($host,$user,$pass,$db) or die('无法连接');

$sql="你的查询..";

mysqli_set_charset($con, 'utf8');

$result=mysqli_query($con,$sql);

# c# - Getting the CPU usage generates "Category does not exist" error

> ID：12435869
> 
> 赞同：6
> 
> 时间：2012-09-15T08:38:09.203
> 
> 标签：c#

I'm using the flowing code, but it says that category does not exist.

```
static PerformanceCounter cpuUsage;

public static void Main(string[] args)
{
    cpuUsage = new PerformanceCounter("Processor", "% Processor Time", "_Total");

    Console.WriteLine(cpuUsage.NextValue() + " %");
    Thread.Sleep(1000);
    Console.WriteLine(cpuUsage.NextValue() + " %");
    Console.Read();
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2016-01-05T15:34:56.570

下午好！

此问题的核心原因是注册表中指向性能计数器的指针看似随机损坏。这种情况很少发生，但最常发生在 Windows Server 2008 R2 上。

严格来说，默认情况下，“进程”和“处理器”类别应始终作为性能计数器存在。如果它们丢失，则可能还有许多其他计数器丢失。如果“处理器信息”计数器也已损坏，则先前的解决方案将无法解决问题。要最终解决此问题，您可以运行以下命令：

```
lodctr /R 
```

这将修复指向计数器的任何损坏的指针。要验证此解决方案，您可以转到服务器管理器 -> 监控 -> 性能监视器 -> 添加 ... 在此视图中，您可以查看所有当前注册的性能计数器。“处理器”和“进程”现在都应该可用。或者，您也可以运行以下命令来查看所有可用计数器的状态：

```
lodctr /Q 
```

附带说明，此命令应从管理控制台运行；否则此过程可能会失败并显示“错误代码：5（拒绝访问）”

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-16T04:26:06.507

利用

```
new PerformanceCounter("Processor Information", "% Processor Time", "_Total"); 
```

代替

```
new PerformanceCounter("Processor", "% Processor Time", "_Total"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-26T20:52:38.750

检查有问题的性能计数器是否已启用。我发现我们的一些服务器上禁用了一堆计数器。

这是一些 PowerShell 来查找禁用的计数器：

```
Get-ChildItem HKLM:\SYSTEM\CurrentControlSet\Services\*\Performance | 
    Where-Object { ($_ | Get-ItemProperty -Name 'Disable Performance Counters' -ea Ignore).'Disable Performance Counters' -eq 1 } 
```

这是我们用来重新启用所有禁用计数器的 PowerShell：

```
Get-ChildItem HKLM:\SYSTEM\CurrentControlSet\Services\*\Performance | 
    Where-Object { ($_ | Get-ItemProperty -Name 'Disable Performance Counters' -ea Ignore).'Disable Performance Counters' -in @(0,1) } | 
    Remove-ItemProperty -Name 'Disable Performance Counters' -Verbose -WhatIf 
```

我选择删除`Disable Performance Counters`键值而不是将其设置为`0`，因此`-in @(0,1)`上面的子句。

一些 ASP.NET 计数器的`Disable Performance Counters`值设置为`4`或`2`。我留下了那些。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-30T13:36:26.830

更具体一点，您可以检查您的事件查看器并查找 PerfLib 事件。

就我而言，它们被标记为错误。

然后，环顾四周后，我发现了上面解释的两个命令。就我而言，问题出在 perfOS 上。（您可以随时运行`lodctr /q:Perflib`以检查禁用的内容。

然后，运行： lodctr /e:perfOS （或更改 perfOS 以禁用任何服务）

那会做（至少它对我有用）

TLDR：以管理员`lodctr /q:perfOs`身份运行`lodctr /e:perfOS`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-15T09:56:10.130

使用此静态方法 ( [MSDN](http://msdn.microsoft.com/en-us/library/7a65ekyd.aspx) )：

```
PerformanceCounterCategory.GetCategories() 
```

检索在您的机器上注册的所有类别的数组。也许`Processor`已经本地化了。

有关检索所有计数器的代码，请参阅[此](https://stackoverflow.com/a/1305159/860585)SO 答案。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-15T08:47:05.400

它在我的最后工作正常。看图。

![](../Images/001699e3ec110dfce89ca0e0217b3b96.png)

# android - Android findViewByID 以编程方式

> ID：12435880
> 
> 赞同：1
> 
> 时间：2012-09-15T08:39:53.727
> 
> 标签：android, findviewbyid

我的布局文件中有 4 个按顺序编号的按钮。在我的代码中，我想在循环中获取与我们在循环中的位置相对应的广告，例如在循环中第二次我会得到 advert2。

任何人都可以帮忙。谢谢

```
Button advert1 = (Button) findViewById(R.id.advert1);
Button advert2 = (Button) findViewById(R.id.advert2);
Button advert3 = (Button) findViewById(R.id.advert3);
Button advert4 = (Button) findViewById(R.id.advert4); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T08:43:54.340

```
Button[] btnArr= new Button[4];

int[] arr = new int[4];

arr[0]=R.id.advert1;
arr[1]=R.id.advert2;
arr[2]=R.id.advert3;
arr[3]=R.id.advert4;

for(int i=0;i<4+i++)
{
   btnArr[i]=(Button) findViewById(arr[i]);
} 
```

# asp.net - RadGrid 合并标题

> ID：12435882
> 
> 赞同：0
> 
> 时间：2012-09-15T08:39:58.273
> 
> 标签：asp.net, ajax, telerik

我有一个四列的 RadGrid。姓名、联系电话、[编辑按钮]和[删除按钮]。我想为 [编辑按钮] 和 [删除按钮] 列设置单个标题“操作”。使 gridview 如下所示：

```
Name           Contact Number          Action
AAAA           9999999999          [Edit] [Delete]
BBBB           8888888888          [Edit] [Delete] 
```

有没有可能的方法来合并两个不同列的标题？我想要与上面给出的相同的外观。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T09:12:50.620

你可以用`TemplateField`

```
<rad:GridTemplateColumn HeaderText="Action">
   <ItemTemplate>
     <asp:LinkButton ID="Edit" CommandName="Edit" runat="server" Text="[Edit]" />
     <asp:LinkButton ID="Delete" CommandName="Delete" runat="server" Text="[Delete]" />
   </ItemTemplate>
</rad:GridTemplateColumn> 
```

# php - 使用 PHP 的 str_replace 函数替换 UTF-16 编码字符串中的低 ASCII 字符

> ID：12435885
> 
> 赞同：0
> 
> 时间：2012-09-15T08:40:28.150
> 
> 标签：php, character-encoding, str-replace, utf-16, well-formed

我有一些用于文本过滤的 PHP 代码。在过滤过程中，一些 ASCII 字符（例如与号 (&) 和波浪号 (~)）会临时转换为低位 ASCII 字符（例如十进制代码点 4 和 5）。就在生成最终过滤输出之前，转换被恢复。

```
$temp = str_replace(array('&', '~'), array("\x04", "\x05"), $input);
... some filtering code to work with $temp ...
$out = str_replace(array("\x04", "\x05"), array('&', '~'), $temp); 
```

这适用于使用 8 位代码单元（如 UTF-8 和 ISO 8859-1）的字符编码的输入文本。但我不确定以更大的代码单元编码的输入，例如 UTF-16 或 UTF-32。第一个转换步骤会破坏输入文本的格式吗？由于输入的某些预先存在的字符，在还原步骤期间是否会出现一些冲突？PHP 设置不会[重载](http://php.net/manual/en/mbstring.overload.php)多字节字符串函数。

任何人都可以发表评论吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T08:45:00.660

str_replace 工作正常，只要传递给它的所有字符串都采用相同的编码。它只是对数据进行二进制比较/替换，因此实际编码并不重要。

[这就是为什么此列表](http://php.net/manual/en/ref.mbstring.php)中没有 mb_str_replace 的原因。

# sql - SQL Server 存储过程中的错误处理

> ID：12435887
> 
> 赞同：0
> 
> 时间：2012-09-15T08:40:53.767
> 
> 标签：sql, sql-server

`SELECT`我在存储过程中有一个 T-SQL 查询，它使用来自另一个表的命令将数据插入到一个表中。问题是如果在将它插入另一个表时在选择表子句中发现重复条目​​，它会停止查询执行（我对此施加了主要的键约束）

我希望 SQL 跳过发生的错误（即不要抛出它并停止..继续执行）并继续插入下一行..

我知道有办法`TRANSACTION` `COMMIT` `ROLLBACK` `TRY` `CATCH`但如何使用它们？

我的 T-SQL：

```
Begin

    Set @SQL='Insert Into AxisReports
                Select *
                From ReportData L 
                Left Join ATM A On L.ATMID=A.ATM 
                Where L.ATMID=A.ATM AND L.IssuerNetwork < > ''0000'' '
    Exec(@SQL)

End 
```

源表可能包含超过 5 个 Lac 条目，编号非常小。的重复行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T13:36:16.307

我建议您重新设计代码，而不是干扰表的键，以便一开始就不允许重复的行进入您的目标表。
您可以将您的 INSERT SQL 更改为如下内容：

```
INSERT INTO AxisReports
SELECT x.ATMID FROM
    (SELECT * 
       FROM ReportData L 
  LEFT JOIN ATM A ON L.ATMID=A.ATM 
      WHERE L.ATMID=A.ATM) x
LEFT OUTER JOIN AxisReports y ON x.ATMID =  y.RepID
WHERE y.RepId IS NULL 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T13:05:33.987

尝试在查询中使用 Distinct 子句：

```
Begin

    Set @SQL='Insert Into AxisReports
                Select distinct *
                From ReportData L 
                Left Join ATM A On L.ATMID=A.ATM 
                Where L.ATMID=A.ATM AND L.IssuerNetwork < > ''0000'' '
    Exec(@SQL)

End 
```

请注意，仅当查询返回的所有列的值对于重复行都相同时，这才有效。

# java - JDO 包含过滤器给出非法参数异常

> ID：12435889
> 
> 赞同：1
> 
> 时间：2012-09-15T08:41:28.890
> 
> 标签：java, google-app-engine, jdo, datanucleus

我无法让 JDO 包含工作，但我无法在 google 上得到关于异常的很好解释。

这是代码：

```
Query q = pm.newQuery(SubjectEvent.class);
            q.setFilter(":param1.contains(publisherId) && publisherType == :param2");
            q.setOrdering("created desc");
            List<SubjectEvent> events = (List<SubjectEvent>) q.execute(subjectIds, type); 
```

其中 publisherId 和 publisherType 是字符串，而 subjectIds 是字符串的 ArrayList。

我越来越：

```
javax.jdo.JDOFatalUserException: Illegal argument
at org.datanucleus.api.jdo.NucleusJDOHelper.getJDOExceptionForNucleusException(NucleusJDOHelper.java:488)
at org.datanucleus.api.jdo.JDOQuery.execute(JDOQuery.java:275) 
```

# oauth - 使用 Google 的 oauth 使用授权码获取访问令牌时出错

> ID：12435897
> 
> 赞同：-1
> 
> 时间：2012-09-15T08:42:32.547
> 
> 标签：oauth, oauth-2.0

我正在尝试构建一个从用户的 Google 日历中获取事件的应用程序。一旦我获得了用户获得的授权码并被要求在另一个页面中输入，我尝试将其交换为 access_token。但是我在发送以检索令牌的发布请求中出现错误。

```
client_id=encodeURIComponent("id.apps.googleusercontent.com");
client_secret=encodeURIComponent("secret.apps.googleusercontent.com");
$.post("http://accounts.google.com/o/oauth2/token/code="+auth_code
                +"&client_id="+client_id+"&client_secret="+client_secret
                +"&redirect_uri=urn:ietf:wg:oauth:2.0:oob&grant_type=authorization_code",
        function(response){
            console.log('Response = '+ response);
        }
); 
```

有人可以告诉我发布请求中的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T02:08:28.257

您需要查看返回的响应以了解错误原因。这似乎是 jQuery 代码，因此您可以在 Chrome 开发人员工具（视图、开发人员、开发人员工具、网络）中的网络选项卡下查看 HTTP 响应。

也就是说，除非您在服务器端环境中使用 jQuery，否则您使用的是错误的 OAuth 流程。您应该使用隐式/javascript 流程，您不需要获取授权代码或交换它——您会立即获得在您的 URL 的哈希片段中返回的访问令牌：

**[OAuth2用户代理](https://developers.google.com/accounts/docs/OAuth2UserAgent)**

请用语言/环境/目标更多地澄清您的问题。

# layout - 标签的布局中立性

> ID：12435898
> 
> 赞同：1
> 
> 时间：2012-09-15T08:42:37.783
> 
> 标签：layout, html

我正在考虑使用`<span>`标签将一组任意元素组合在一起，但我不希望它对文档的结构产生任何视觉影响。

我想使用该标签稍后以某种方式使用 JavaScript 操作其中的元素集，例如检测鼠标是否进入或离开该区域等。

我的问题是是否存在跨度标签的存在会破坏文档流的情况，使其中的元素或它周围的元素的行为与不存在时不同。

当然，我知道 DOM 上存在一个额外的节点可能会破坏一些不期望跨度的 CSS 选择器，而且我也知道设置跨度的样式会导致布局发生变化（例如，如果我添加了边框我可能会导致元素换行到下一行等）。但除此之外，span 标签是中性的吗？如果不是，我应该如何确定在什么情况下不是？

提前致谢！

- 编辑 -

我倾向于忘记将块级元素放在像 span 这样的内联元素中是错误的，所以我不能使用 span 按照我的意图包装所有内容。

所以，如果我要分组的一个或多个元素是块级的，我应该使用 div 代替吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T17:21:21.940

该`<span>`元素被定义为内联（文本级）元素。否则，它在语义上是空的并且布局中立。

根据 HTML 语法，`<span>`元素不能包含块元素，例如`<div>`. 如果您违反了这一点，则没有关于浏览器不应该做什么的规范。当您可以使用该`<div>`元素时，使用它听起来毫无意义。它被定义为一个块元素，这意味着在默认情况下渲染它从新行开始，并且它之后的任何内容都在新行开始（但此行为不会生成空行）。否则，它在语义上是空的并且布局中立。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T10:39:36.500

直接来自[http://www.w3.org/wiki/HTML/Elements/span](http://www.w3.org/wiki/HTML/Elements/span)

> 元素本身没有任何意义，但与全局属性（例如类、语言或目录）一起使用时会很有用。它代表它的孩子。

# javascript - 使用 Objective-C 的 JavaScript 注入方法

> ID：12435899
> 
> 赞同：12
> 
> 时间：2012-09-15T08:43:07.690
> 
> 标签：javascript, iphone, objective-c, code-injection

我正在寻找将 JavaScript 注入 WebView（在 Cocoa 中）的不同方法。

我正在尝试将一些 javascript 注入到`<head>`已加载到 WebView 中的 HTML 文件的标记中。

以下方法对我不起作用。它似乎只适用于**没有嵌套括号**的非常简单的 JavaScript （根据我的测试）：

```
[webView stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"var script = document.createElement('script');"
                                                     "script.type = 'text/javascript';"
                                                     "script.text = \"some simple JavaScript"
                                                     "}\";"
                                                     "document.getElementsByTagName('head')[0].appendChild(script);"]]; 
```

还有其他方法可以使用更复杂的 JavaScript / jQuery 函数吗？

我尝试注入的完整代码如下：

```
function submitFormForTime(time){
    $(\".t_h\").each(function(i, obj) {
        if ($(this).text() != time) return;
        $(this).parent().find(\"form\").each(function(i, obj){
            obj.submit();
        });
    });
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-27T00:18:48.490

您不能使用 jQuery 添加`<script>`标签。这已经被问过很多次了。看：

*   [无法附加 <script> 元素](https://stackoverflow.com/questions/610995/jquery-cant-append-script-element)
*   [我可以通过 jQuery 创建脚本标签吗？](https://stackoverflow.com/questions/1199676/can-i-create-script-tag-by-jquery)

您可以使用浏览器内置功能来做到这一点，但是：

将函数分配给页面上的变量然后对其进行评估是否可行？就像是：

```
-(void)webViewDidFinishLoad:(UIWebView *)webView
{
    // add function to page:
    NSString * js = @"myFunction = function(){ return \"success!\"; }" ;
    [ webView stringByEvaluatingJavaScriptFromString:js ] ;

    // execute newly added function:
    NSString * result = [ webView stringByEvaluatingJavaScriptFromString:@"myFunction();"] ;
    NSLog(@"result=\"%@\"", result) ;
} 
```

**更新**显式示例：

您应该使用我上面的示例作为模板！

无论如何，这个过程有 2 个部分...... Javascript 部分和 Objective-C 部分。在 Javascript 级别，您正在执行以下操作：

```
// assign a function to the variable "someFunction":
var someFunction = function(){...};

// call the function in the variable "someFunction":
someFunction(); 
```

您也可以在不将函数分配给变量的情况下执行此操作，例如，如果您不关心将来引用该函数。在没有变量的情况下使用匿名函数如下所示：

```
( function(){...} )() ; 
```

即`var A = <the function>; A();`你正在做而不是做`(<the function>)();`

最后，如果您的匿名函数像您的一样接受参数，则模式如下所示：

```
( function(var0, ..., varN){...} )(arg0, ..., argN); 
```

使用它作为你的代码模板，你的 JS 最终如下：

```
( function(time) {
    $(\".t_h\").each(function(i, obj) 
    {
        if ($(this).text() != time)  return;

        $(this).parent().find(\"form\").each(function(i, obj) {
            obj.submit();
        });
    });
})( 123.456 ); 
```

所以，这就是您希望 web 视图执行的内容......这就是我们传递给 web 视图的代码。但是你必须在你的 Obj-C 程序中构建那个字符串，插入当前时间参数的“复杂性”（`123.456`在上面的代码中）。

它看起来像这样：

```
NSString * jsTemplate =
    @"( function(time) {"
    @"        $(\".t_h\").each(function(i, obj) {"
    @"            if ($(this).text() != time)  return;"
    @"            $(this).parent().find(\"form\").each(function(i, obj) {"
    @"                obj.submit();"
    @"            });"
    @"        });"
    @"    })( %g );" ;
NSString * js = [ NSString stringWithFormat:jsTemplate, 123.456 ] ;
NSString * result = [ webView stringByEvaluatingJavaScriptFromString:js ] ; 
```

我想我已经写够了：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T10:26:56.690

我会从 Web 视图中获取所有 HTML，然后注入代码并重新加载页面。它仍然不是一种正确的注射方法，但它可能会起作用。

```
NSString *htmlDataString = [webView stringByEvaluatingJavaScriptFromString: @"document.documentElement.outerHTML"];
// use nsstring methds to find the place for injecting
// inject avascript code
[webView loadHTMLString:htmlDataString baseURL:nil]; 
```

当然，您可能有来自您的请求的基本 URL，如果是这样，请替换该 nil。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T20:12:45.307

这个我没试过，但如果问题出在括号和代码的复杂性上，你可以尝试调用存储在包中的 JS 文件。也许它可以解决这个问题。例如：

```
NSData *fileData = [NSData dataWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@”submitFormForTime” ofType:@”js”]];

NSString *jsString = [[NSMutableString alloc] initWithData:fileData encoding:NSUTF8StringEncoding];

[webView stringByEvaluatingJavaScriptFromString:jsString]; 
```

也许设置编码类型有助于以正确的方式解析所有括号。

# sqlite - 如何在 sqlite 的视图中添加新列？

> ID：12435900
> 
> 赞同：5
> 
> 时间：2012-09-15T08:43:09.593
> 
> 标签：sqlite, view

我在 sqlite (table1) 中有这个数据库：

```
+-----+-------+-------+
| _id | name  | level |
+-----+-------+-------+
| 1   | Mike  | 3     |
| 2   | John  | 2     |
| 3   | Bob   | 2     |
| 4   | David | 1     |
| 5   | Tom   | 2     |
+-----+-------+-------+ 
```

我想创建一个包含 2 级所有元素的视图，然后添加一个新列，指示新表中行的顺序。也就是说，我想要这个结果：

```
+-------+------+
| index | name |
+-------+------+
| 1     | John |
| 2     | Bob  |
| 3     | Tom  |
+-------+------+ 
```

我努力了：

```
CREATE VIEW words AS SELECT _id as index, name FROM table1; 
```

但后来我得到：

```
+-------+------+
| index | name |
+-------+------+
| 2     | John |
| 3     | Bob  |
| 5     | Tom  |
+-------+------+ 
```

我想它应该是这样的：

```
CREATE VIEW words AS SELECT XXXX as index, name FROM table 1; 
```

我应该用什么代替**`XXXX`**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T10:12:10.917

当按 排序时`_id`，直到并包括这一行的行数与`_id`值小于或等于该行的行数相同`_id`：

```
CREATE VIEW words AS
  SELECT (SELECT COUNT(*)
          FROM table1 b
          WHERE level = 2
            AND b._id <= a._id) AS "index",
         name
  FROM table1 a
  WHERE level = 2; 
```

（计算本身实际上并不需要`ORDER BY _id`，因为当我们只计算它们时，行的顺序并不重要。）

请注意，`words`不保证排序；`ORDER BY "index"`如果需要，添加。

* * *

当然，这不是很有效。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-15T10:17:05.863

你有两个选择。首先，您可以简单地添加一个包含以下内容的新列：

```
ALTER TABLE {tableName} ADD COLUMN COLNew {type}; 
```

其次，更复杂的是，但实际上会将列放在您想要的位置，即重命名表：

```
ALTER TABLE {tableName} RENAME TO TempOldTable; 
```

然后使用缺少的列创建新表：

```
CREATE TABLE {tableName} (name TEXT, COLNew {type} DEFAULT {defaultValue}, qty INTEGER, rate REAL); 
```

并用旧数据填充它：

```
INSERT INTO {tableName} (name, qty, rate) SELECT name, qty, rate FROM TempOldTable; 
```

然后删除旧表：

```
DROP TABLE TempOldTable; 
```

我更喜欢第二个选项，因为它可以让您在需要时完全重命名所有内容。

# android - 上下文菜单未显示

> ID：12435904
> 
> 赞同：0
> 
> 时间：2012-09-15T08:43:44.683
> 
> 标签：android, android-contextmenu

这是我在 onCreate() 方法中的代码部分：

```
LayoutX = (LinearLayout) findViewById(R.id.LL_SomeName);
LayoutX.setClickable(true);
registerForContextMenu(LayoutX); 
```

这是其余的代码

创建上下文菜单

```
@Override
public void onCreateContextMenu(ContextMenu M, View V, ContextMenuInfo CMI) {
    super.onCreateContextMenu(M, V, CMI);
    M.setHeaderTitle("My Title Here");
    M.add(0, V.getId(), 0, "Menu 1");
    M.add(0, V.getId(), 0, "Menu 2");
} 
```

项目选择

```
@Override
public boolean onContextItemSelected(MenuItem Item) {
    Toast.makeText(getApplicationContext(), Item.getTitle(), Toast.LENGTH_LONG).show();
} 
```

上下文菜单根本不出现。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T08:47:51.730

这可能会帮助你

```
 @Override
public void onCreateContextMenu(ContextMenu menu, View v,ContextMenuInfo menuInfo) {
    // TODO Auto-generated method stub
        super.onCreateContextMenu(menu, v, menuInfo);
        menu.setHeaderTitle("Select one");
        menu.add(0, 1, 0, "Edit");
        menu.add(0, 2, 0, "Delete");
    }

   public boolean onContextItemSelected(MenuItem item) {
   // TODO Auto-generated method stub
    if(item.getItemId()==1){
      // edit option is selected
     } 
```

# php - 如何将 msg_id 传递给 jquery 模态形式？

> ID：12435909
> 
> 赞同：-1
> 
> 时间：2012-09-15T08:44:48.470
> 
> 标签：php, jquery

我有以下数据，我在其中显示来自数据库的数据。当我单击“评论”时，会出现一个对话框，我需要在 db 中以模态显示数据。但是为了从 db 获取数据，我需要模态形式的 msg_id。

```
<?php
$msg_id = $data['message_id'];
?>
<a data-toggle="modal" href="msg_id=<?php echo $msg_id; ?>#example" class="link_comment">Comment</a> 
```

所以在这里我想将 msg_id 传递给 jquery modal form，在那里我可以从 db 基于 msg_id 获取该特定消息的数据并将其显示在模态框中。

```
<div id="example" class="modal" style="display: none; ">
Your Message id : <?php echo $msg_id; ?>
</div> 
```

那么如何将 $msg_id 传递到 jquery 模态表单中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T09:02:02.513

php

```
<?php
$msg_id = 123; // testing mode
?> 
```

html

```
<a data-toggle="modal" href="msg_id=<?php echo $msg_id; ?>#example" class="link_comment">Comment</a>
<div id="example" class="modal" style="display: none; ">
    Your Message id : <span class="msg_id">?</span>
</div>
<script type="text/javascript">
    $('a.link_comment').click(function(event) {
        event.preventDefault();
        var a = $(this);
        var msg_id = 'fetched id'; // parse msg_id from a.attr('href')
        $('div.' + a.attr('data-toggle')).show().find('span.msg_id').text( msg_id );
    });
</script> 
```

# css - MSIE 专有过滤器如何四舍五入？

> ID：12435914
> 
> 赞同：1
> 
> 时间：2012-09-15T08:45:27.363
> 
> 标签：css

我试图在 IE 中重现径向渐变，元素上有背景色，径向不透明度，子元素有另一种颜色。但是元素是圆形的，半透明颜色超出了圆度。四舍五入是用饼图实现的.css，所以它是围绕这些东西的 vml。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-20T18:53:41.397

使用纯 VML 创建圆角元素以及渐变：

```
 <v:group>
   <v:rect style='width:120pt;height:80pt' fillcolor="red">
     <v:fill type="gradient" />
   </v:rect>
   <v:group>
    <v:rect style='width:120pt;height:80pt' fillcolor="red">
      <v:fill method="linear sigma" angle="-45" focus="100%" focusposition=".5,.5" focussize="0,0" type="gradientRadial" />
    </v:rect>
   </v:group>
 </vgroup> 
```

# jquery - Jquery：单击时菜单处于活动状态

> ID：12435916
> 
> 赞同：0
> 
> 时间：2012-09-15T08:45:50.030
> 
> 标签：jquery, css

我创建菜单：

```
<ul id="menu">
    <li>                
        <a href="#" onclick="load(1);return false;"> Team Install</a> 
    </li>
    <li>                
        <a href="#" onclick="load(2);return false;"> PC and Laptop Service</a>
    </li>
    <li>                
        <a href="#" onclick="load(3);return false;"> Web Design and Internet Services</a>
    </li>
    <li>                
        <a href="#" onclick="load(4);return false;"> Software and Database Dev.</a>
    </li>
 </ul>
 <div id="LoadMe"></div> 
```

这就是我在 jquery 中所做的：

```
<script type="text/javascript">

    $(document).ready(function () {
        $("#LoadMe").load('/Service2.html');
        $('#menu a[href="' + url + '"]').addClass('selectedcategoryServices');
    });

    function load(num) {
        $("#LoadMe").load('/Service' + num + '.html');
    }

</script> 
```

但是当我点击它时菜单没有`selectedcategoryServices`准备好，谁能告诉我我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T09:13:41.757

试试这个方法

```
$("a").click(function(){
     $("a.selectedcategoryServices").removeClass("selectedcategoryServices");
     $(this).addClass('selectedcategoryServices');

 }); 
```

检查这个[**演示**](http://jsfiddle.net/KJq7x/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T09:10:02.817

我添加了`href`属性的 url 并`onclick`从您的标记中删除。

```
<ul id="menu">
    <li>
        <a href="/Service1.html"> Team Install</a>
    </li>
    <li>
        <a href="/Service2.html"> PC and Laptop Service</a>
    </li>
    <li>
        <a href="/Service3.html"> Web Design and Internet Services</a>
    </li>
    <li>
        <a href="/Service4.html"> Software and Database Dev.</a>
    </li>
</ul>
<div id="LoadMe"></div> 
```

.

使用此标记，您可以使用它来实现您正在寻找的效果

```
$(document).ready(function () {
    $("#menu a").click("on", function(ev) {
        ev.preventDefault();

        load($(this).attr("href"));
    });
});

function load(url) {
    $("#LoadMe").load(url, function() {
        $("#menu").find("a[href=\"" + url + "\"]").addClass("selectedcategoryServices");
    });
} 
```

仅供参考：[不显眼的 Javascript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript) :)

# jpa - 如何将 solr 或 elasticsearch 与 JPA 集成？

> ID：12435922
> 
> 赞同：9
> 
> 时间：2012-09-15T08:46:20.937
> 
> 标签：jpa, solr, elasticsearch

elasticsearch 或 solr 如何与 JPA 集成，以便索引与数据保持同步？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T14:20:39.147

一种选择是在将 Hibernate 搜索连接到 Solr 时使用 Hibernate 和 Hibernate 搜索。
您可以在此处获得简要概述：[结合 Hibernate Search 和 Solr 的强大功能](http://anotherjavaday.blogspot.co.il/2012/01/combining-power-of-hibernate-search-and.html)
这需要一些工作，但不会太多（1-2 天的工作应该足够了）。
如果您需要更多详细信息，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T23:54:02.347

这里有几个选项可以让 Solr 和数据源保持同步：
[如何保持 Lucene 索引与 Mysql 数据库同步？](https://stackoverflow.com/questions/12084186/how-to-keep-lucene-index-synchronized-with-mysql-database)

春天（Roo）：
[http ://static.springsource.org/spring-roo/reference/html/base-solr.html](http://static.springsource.org/spring-roo/reference/html/base-solr.html)

# python - 检测串口设置

> ID：12435923
> 
> 赞同：4
> 
> 时间：2012-09-15T08:46:32.167
> 
> 标签：python, serial-port, communication

有时我突然需要通过串行端口连接到设备的控制台。问题是，我从不记得每个特定设备要使用哪些端口设置（波特率、数据位、停止位等），而且文档似乎永远不会在真正需要的时候到处乱放。

我编写了一个 Python 脚本，它使用一种简单的蛮力方法（即遍历所有可能的设置，发送一些测试输入并显示响应以供人类决定是否有意义），但是：

*   需要很长时间才能完成
*   并不总是有效（可能是端口重置/超时问题）
*   只是似乎不是这样做的正确方法:)

所以问题是：有人知道自动检测远程设备正在使用哪些端口设置的程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T11:23:26.510

尽管第 1 部分不能直接回答您的问题：

有些设备只包含自动检测（称为自动波特率）方法，这意味着：使用您当前的设置（9k6、115k2、..）向设备发送一个字符，设备很有可能会回答您的(!) 设置。我在 HP 交换机上看到了这一点。

第二种方法：尝试重新排序连接可能性。例如，另一端使用没有硬件握手的 9k6 的可能性很高，但它使用带有软件 Xon/Xoff 的 38k4 的可能性很小。

如果你把你的尝试分解成几个，“蛮力”方法会更有效率。

# sql - 仅当字符串长度大于 2 时才选择列

> ID：12435927
> 
> 赞同：2
> 
> 时间：2012-09-15T08:47:32.233
> 
> 标签：sql, tsql

可能会问类似的问题，但我找不到任何适合我需要的东西。

如何仅选择字符串长度大于 2 的列

这已经做了多少。

```
SELECT * FROM Table1

WHERE (Table1.ID = @ID) 
```

或者类似的东西

```
WHERE (Table1.ID = @ID) AND (LEN(*) > 2) 
```

感谢您的所有帮助

我有一个表，其中有 35 列和一个用户 ID 列，现在我只想从具有 > 2 个字符串的列中选择和显示信息。

我喜欢只选择具有> 2个字符串和用户定义的ID而不是整行的列！

我希望我说得通。

**桌子** ![在此处输入图像描述](../Images/3ac255c1a6f460b40d3a8f5999e32d81.png)

**期望的结果**

![在此处输入图像描述](../Images/328d5bfd7a6e3fab674c5366e62bc850.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T09:02:33.517

**巨型编辑**

虽然我同意@Joro 的方法，但我意识到有一种稍微冗长但更简单的方法。

我创建了您的表的副本并将其命名为“课程”，但我只在其中放置了 12 个课程，但您可以以相同的方式生成查询。

使用以下查询（使用[INFORMATION_SCHEMA.COLUMNS](http://msdn.microsoft.com/en-us/library/ms188348.aspx)）：

```
SELECT  'SELECT ID, ''' + COLUMN_NAME + ''' AS LessonName, 
        [' + COLUMN_NAME + '] AS Lesson ' +
+       'FROM Lesson WHERE ID = @ID AND LEN([' + COLUMN_NAME + ']) > 2 UNION' 

FROM    INFORMATION_SCHEMA.COLUMNS
WHERE   TABLE_NAME = 'Lesson'
AND DATA_TYPE = 'varchar' 
```

我生成一个如下所示的查询：

```
SELECT ID, 'Lesson 1' AS LessonName, [Lesson 1] AS Lesson  
FROM Lesson WHERE ID = @ID AND LEN([Lesson 1]) > 2 UNION
SELECT ID, 'Lesson 2' AS LessonName, [Lesson 2] AS Lesson  
FROM Lesson WHERE ID = @ID AND LEN([Lesson 2]) > 2 UNION
... (SQL omitted for brevity)
SELECT ID, 'Lesson 12' AS LessonName, [Lesson 12] AS Lesson  
FROM Lesson WHERE ID = @ID AND LEN([Lesson 12]) > 2 UNION 
```

删除最后一个 UNION 并通过将@ID 声明为 35 来运行查询给了我：

```
|| ID || LessonName || Lesson
|| 35 || Lesson 4   || Maths
|| 35 || Lesson 9   || ICT
|| 35 || Lesson 12  || English 
```

然后我想，好吧，我可能只是使用上面的技术来调整它......但后来我有了另一个 - 我们真正想要的列在 LessonName 列中，所以，我们可能只运行一个动态 SQL 查询这些列名在：

```
DECLARE @ColumnList VARCHAR(MAX)

SELECT @ColumnList = COALESCE(@ColumnList + ', ','') + '[' + Lessons.LessonName + ']'

FROM ( 
SELECT ID, 'Lesson 1' AS LessonName, [Lesson 1] AS Lesson  FROM Lesson WHERE ID = @ID AND LEN([Lesson 1]) > 2 UNION
SELECT ID, 'Lesson 2' AS LessonName, [Lesson 2] AS Lesson  FROM Lesson WHERE ID = @ID AND LEN([Lesson 2]) > 2 UNION
...
SELECT ID, 'Lesson 12' AS LessonName, [Lesson 12] AS Lesson  FROM Lesson WHERE ID = @ID AND LEN([Lesson 12]) > 2) 

AS Lessons 
```

这给了我结果`'[Lesson 4], [Lesson 9], [Lesson 12]'`

反过来，您可以执行以下操作：

```
DECLARE @QuerySQL NVARCHAR(MAX)

SET @QuerySql = 'SELECT ' + CAST(@ID AS VARCHAR) + ' AS ID, ' + @ColumnList + ' FROM Lesson WHERE ID = @ID'

--Query actually looks like: SELECT 35 AS ID, [Lesson 4], [Lesson 9], [Lesson 12] 
--                           FROM Lesson WHERE ID = 35  

DECLARE @ID INT --You will already have done this above anyway really
SET @ID = 35    

EXEC sp_executeSQL @QuerySql,N'@ID int', @ID 
```

返回：

```
|| ID || Lesson 4 || Lesson 9 || Lesson 12 
|| 35 || Maths    || ICT      || English 
```

使用数据透视函数的另一种方法 - 您可以轻松地生成此 sql 一次并将其保留在存储过程中。

因此，总而言之，您的用法如下所示：

```
DECLARE @ID INT
SET @ID = 35

DECLARE @ColumnList VARCHAR(MAX)

SELECT @ColumnList = COALESCE(@ColumnList + ', ','') + '[' + Lessons.LessonName + ']' 

FROM (  
SELECT ID, 'Lesson 1' AS LessonName, [Lesson 1] AS Lesson  FROM Lesson WHERE ID = @ID AND LEN([Lesson 1]) > 2 UNION 
SELECT ID, 'Lesson 2' AS LessonName, [Lesson 2] AS Lesson  FROM Lesson WHERE ID = @ID AND LEN([Lesson 2]) > 2 UNION 
... 
SELECT ID, 'Lesson 35' AS LessonName, [Lesson 35] AS Lesson  FROM Lesson WHERE ID = @ID AND LEN([Lesson 35]) > 2)  

AS Lessons --Remember you can generate this section quite simply using information_schema.columns
           --and you don't actually need the ID or Lesson columns - just the lesson names.

DECLARE @QuerySQL NVARCHAR(MAX) 

SET @QuerySql = 'SELECT ' + CAST(@ID AS VARCHAR) + ' AS ID, ' + @ColumnList + ' FROM Lesson WHERE ID = @ID'     

EXEC sp_executeSQL @QuerySql,N'@ID int', @ID 
```

这会给你你想要的答案。

请注意，在 GUI 级别旋转数据（通过 Excel Pivot 表或 DevExpress Pivot Grid 等第 3 方组件意味着您可以在第一个结果集 - UNION 查询的输出处停止）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-15T17:41:05.157

我还没有设法仅使用一个动态构建的 T-SQL 语句来做到这一点。为了获得期望的结果，您应该执行以下操作：

创建临时表来存储结果：

```
DECLARE @DynamicSQLStatement NVARCHAR(MAX)

CREATE TABLE #DataSource
(
     [Id] BIGINT 
    ,[SubjectName] NVARCHAR(100)
    ,[Lesson] NVARCHAR(100)
) 
```

使用特定数据初始化临时表：

```
SET @DynamicSQLStatement=N' INSERT INTO #DataSource ([Id],[SubjectName],[Lesson])
                            SELECT   [Id]
                                    ,[SubjectName]
                                    ,[Lesson]
                            FROM SourceTable
                            UNPIVOT 
                            (
                                [SubjectName] FOR [Lesson] IN ('+(SELECT SUBSTRING((SELECT '],[' + COLUMN_NAME FROM INFORMATION_SCHEMA.Columns  WHERE TABLE_NAME = 'SourceTable' AND COLUMN_NAME<>'ID' FOR XML PATH('')),3,300)+']')+')
                            ) as pvt
                            WHERE ID=35 AND LEN([SubjectName])>2'

EXECUTE sp_executesql @DynamicSQLStatement 
```

现在，我们有这些记录：

![在此处输入图像描述](../Images/eff59aa05d2f9ee74699e1480277d3b9.png)

请注意限制结果的“WHERE”子句。此外，“SourceTable”应替换为您的表的名称。我正在做的是在没有“Id”的情况下获取该表的所有列，但是您可以在没有 sp_exetuesql 的情况下执行此操作，只需写下所有列：

```
INSERT INTO #DataSource ([Id],[SubjectName],[Lesson])
SELECT   [Id]
        ,[SubjectName]
        ,[Lesson]
FROM SourceTable
UNPIVOT 
(
    [SubjectName] FOR [Lesson] IN ([Lesson 1],[Lesson 2],[Lesson 3],...,[Lesson n])
) as pvt
WHERE ID=35 AND LEN([SubjectName])>2' 
```

这是最后一个 - 以期望格式获取结果并删除临时表：

```
SET @DynamicSQLStatement=N' SELECT *
                            FROM #DataSource
                            PIVOT
                            (
                                MAX([SubjectName]) FOR [Lesson] IN ('+ (SELECT SUBSTRING((SELECT '],[' + Lesson FROM #DataSource FOR XML PATH('')),3,100)+']')+')
                            )AS ResultTable'

EXECUTE sp_executesql @DynamicSQLStatement

DROP TABLE #DataSource 
```

这是最终的结果：

![在此处输入图像描述](../Images/5ba2e5430d7c9f9f5c412ed5b2c38d93.png)

我希望这对你有意义。我真的很失望，我不能只用一个声明来做到这一点。如果有人可以，那将是非常有趣的技术。

如果我是你，我会从这个代码存储过程中使用参数创建列和用户 ID 中文本的最小长度。

# ruby-on-rails - 这些方法中哪一种是最“最佳 Rails 实践”？

> ID：12435930
> 
> 赞同：0
> 
> 时间：2012-09-15T08:48:15.427
> 
> 标签：ruby-on-rails

我现在有一个非常具体的困境。

给定以下模型：

```
class Message < ActiveRecord::Base
  attr_accessible :body, :sent_at

  belongs_to :subject
end

class Subject < ActiveRecord::Base
  attr_accessible :title

  has_many :messages
  belongs_to :last_message, :class_name => 'Message', :foreign_key => 'last_message_id'
end 
```

在一个视图中，我想遍历主题列表并显示： - 主题标题 - sent_at 主题的最后一条消息，如下所示：

```
<% @subjects.each do |subject| %>
  <%= subject.title %>
  <%= subject.last_message.sent_at %>
<% end %> 
```

问题是：**subject.last_message 有时可能为零。**在这种情况下，上面的代码会抛出异常。

那么：最好的解决方案是什么？我可以看到 3 种可能性，但老实说，我不知道哪些被认为是好的或坏的。

1）让视图拯救它

```
<%= subject.last_message.sent_at rescue '' %> 
```

2）做一个帮手

```
def last_message_sent_at(subject)
  return '' if subject.last_message.blank?
  subject.last_message.sent_at
end

<%= last_message_sent_at(subject) %> 
```

3）在主题模型上制作一种“代理”

```
class Subject < ...
  ...
  def last_message_sent_at
    return '' if last_message.blank?
    last_message.sent_at
  end
end

<%= subject.last_message_sent_at %> 
```

你会选择哪一个，为什么？或者还有其他我没有想到的方法？

/ 卡斯滕

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T08:50:30.603

使用`try`：

```
<%= subject.last_message.try(:sent_at) %> 
```

所以，如果`subject.last_message`是 nil，你将没有输出；否则，如果它不是 nil，它将调用`sent_at`on方法`subject.last_message`。

这就像您的＃2想法的方便形式

[文档](http://api.rubyonrails.org/classes/Object.html#method-i-try)

作为额外的想法，助手是一个糟糕的选择。理想情况下，您总是想要一个“接收器”（在 中`some_class.perform()`，`some_class`是“接收器”，即它“接收”消息“执行”）。除非我需要生成 HTML，否则我会避免使用 Helpers。所以，你的#3 确实有一个接收器，但由于 Rails 提供了`try`，你不需要自己动手。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T12:01:38.567

如果您有任何逻辑或操作要执行，最佳实践是将其移出您的视图（进入助手、演示者）。

由于您的问题是关于“如何在可能的 nil 实例上调用方法？”，那么`try`在这种情况下可能是最好的方法。因为，它已经存在并且您不需要任何额外`gem`的 s。

另一方面，您可以通过将`render @subjects`块内容放入并移动到部分中来改进代码`_subject`。Rails 将为您执行循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T08:59:30.347

在这种情况下，最简单的事情可能是简单地检查空值......

```
<% @subjects.each do |subject| %>
  <%= subject.title %>
  <%= subject.last_message.sent_at if subject.last_message %>
<% end %> 
```

或者

```
<% @subjects.each do |subject| %>
  <%= subject.title %>
  <%= subject.last_message && subject.last_message.sent_at %>
<% end %> 
```

# iphone - 弹出视图控制器时处理 RestKit 请求的正确方法是什么？

> ID：12435931
> 
> 赞同：0
> 
> 时间：2012-09-15T08:48:25.100
> 
> 标签：iphone, ios, restkit

我在导航控制器中有一个 HTTP 请求：

```
[[RKClient sharedClient] get:url delegate:self]; 
```

但是如果用户在请求仍在运行时按下后退按钮，应用程序就会崩溃：

```
*** -[UITableView retain]: message sent to deallocated instance 0xeab5600 
```

我在 viewWillUnload（和 viewDidUnload）中添加了以下代码来取消请求，但得到了同样的错误：

```
[[RKClient sharedClient].requestQueue cancelRequestsWithDelegate:self]; 
```

请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T03:52:26.063

我发现当从导航控制器弹出视图时，没有触发 viewDidUnload 和 viewWillUnload。所以我把cancelRequestsWithDelegate方法移到viewWillDisappear来解决问题。

# symfony - 来自官方文档的 Symfony2 用户注册表单示例

> ID：12435945
> 
> 赞同：2
> 
> 时间：2012-09-15T08:50:34.593
> 
> 标签：symfony, symfony-forms, symfony-2.1, user-registration

我想[这个示例中的](http://symfony.com/doc/current/cookbook/doctrine/registration_form.html)*Symfony2.x*中的简单用户注册表单有问题。特别是，我认为没有用户数据的设置。例如，从不使用类中的`setUser()`函数。`Registration`

我对吗？

如果答案是“是”，那么应该在哪里`setUser()`调用该函数？

如果答案是“否”，那么为什么要定义该函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T08:55:19.747

是的，使用了这个功能。Symfony 在需要设置注册对象的 $user 属性时使用它，例如在绑定表单时。你不需要“调用”它，它会在需要时被 Symfony 调用。

# anchor - 我该怎么做才能找到断开的链接？

> ID：12435947
> 
> 赞同：-5
> 
> 时间：2012-09-15T08:50:41.543
> 
> 标签：anchor, broken-links

我正在一个网站上工作，该网站的所有者在给定页面中发现了三个断开的链接（通过 IBM 的软件/工具）。我删除了两个断开的链接，但剩下一个断开的链接。我搜索了整个网页，但我找不到它。

我该怎么做才能找到该链接？

这是页面的代码：

```
<?php
session_start();
ob_start();
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Legal Aid Service Monitoring System</title>

<link href="css.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="js/jquery3.js"></script>
<script type="text/javascript" src="js/jquery4.js"></script>
<script type="text/javascript" src="js/jquery5.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    $("#login-form").validate({
        debug: false,
            rules: {

                email: {
                        required: true,
                        email: true
                    }
                },
            messages: {             
                email: "Please enter a valid email.",
                },
        });
});
  </script>
    <style type="text/css">
        label.error { width: 250px; color: red;}
    </style>
</head>
<body>
<?php
if($_POST['login'])
{
require_once("config.php");
if($_POST['user_type']=='admin')
{
    $user=mysql_real_escape_string($_POST['uname']);
    $password=md5($_POST['pwd']);
    $sql=mysql_query("select id from admin where username='$user' and password='$password'");
    $count=mysql_num_rows($sql);
    if($count>0)
    {
        $row=mysql_fetch_array($sql);
        $_SESSION['admin']=$row['id'];
        $date=date('d-m-y');
        $time_now=mktime(date('h')+0,date('i')+00,date('s'));
        $time=date('h:i:s',$time_now);
        $login=mysql_query("insert into user_login (user_id, login_date, login_time) values ('$_SESSION[admin]', '$date', '$time')");
        header('location: administrator');
    }
    else
    {
        ?>
        <script type="text/javascript"> alert('Incorrect Username and Password.');</script>
        <?php
    }
}
else if($_POST['user_type']=='advo')
{
    $user=mysql_real_escape_string($_POST['uname']);
    $password=md5($_POST['pwd']);
    $sql=mysql_query("select id, status from advocates where email='$user' and password='$password'");
    $count=mysql_num_rows($sql);
    $row=mysql_fetch_array($sql);
    if($count>0 and $row['status']=='1')
    {
        $_SESSION['advocate']=$row['id'];
        $date=date('d-m-y');
        $time_now=mktime(date('h')+0,date('i')+00,date('s'));
        $time=date('h:i:s',$time_now);
        $login=mysql_query("insert into advo_login (advo_id, login_date, login_time) values ('$_SESSION[advocate]', '$date', '$time')");
        header('location: advocate');
    }
    else
    {
        if($row['status']=='0')
        {
            ?>
            <script type="text/javascript">alert('Your account has been blocked by admin.');</script>
            <?php
        }
        else
        {
            ?>
            <script type="text/javascript">alert('Incorrect Username and Password.');</script>
            <?php
        }
    }
}
}
?>
<div class="main" id="main">
  <div id="headerbg">
    <div id="header"></div>
    </div>
    <div id="center">
        <div class="style1" id="centerright">
            <div id="centerup">
            <table width="514" border="0" align="center">
                <tr>
                    <td><h3>Welcome to Legal Aid Service Monitoring System</h3></td>
                </tr>
            </table>
            </div>
            <div id="centerdown">
                <div id="loginbg">
                <form id="login-form" name="login-form" method="post" action="">
                <table width="500" border="0" >
                <tr><td></td>
                <td height="30">
                <input type="radio" name="user_type" value="advo" checked="checked" />Advocate
                <input type="radio" name="user_type" value="admin" />Administrator
                </td>
                </tr>
                <tr>
                <td width="50"><span class="style5">Username:</span></td>
                <td width="236"><label>
                <input type="text" name="uname" class="required input" size="30" />
                </label></td>
                </tr>
                <tr>
                <td><span class="style5">Password:</span></td>
                <td><label>
                <input type="password" name="pwd" id="pwd" class="required input" size="30"/>
                </label></td>
                </tr>
                <tr>
                <td></td>
                <td><label>
                <input type="submit" class="style1loginbg" name="login" id="button" value="Login" />
                </label></td>
              </tr>
            </table>
          </form>
          </div>
        </div>       
      </div>
    </div>
  </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T09:43:20.097

如果您有 Firebug 或某种类似的控制台访问权限，您可以逐页运行此代码片段：

```
jQuery(function(){
  var getHost = function(url){
    url = String(url);
    if ( (url.substr(0,5) == 'http:') || (url.substr(0,6) == 'https:') ) {
      return url.split('/').slice(0,3).join('/');
    }
    else {
      return null;
    }
  }
  var host = getHost(window.location);
  jQuery('a').each(function(){
    var link = $(this), href = link.attr('href'), hst = getHost(href);
    if ( hst === host || hst === null ){
      jQuery.ajax({
        url: href,
        error: function(){
         link.css('border', '5px solid red');
        }
      });
    }
    else {
      link.css('border', '5px solid purple');
      window.open( link,'_blank');
    }
  });
}); 
```

它应该用红色边框突出显示任何无法通过 ajax 加载的内部链接，并用紫色突出显示任何外部链接*（此时它将尝试在新选项卡中打开外部链接以供您目视检查）*。显然，如果您的页面有很多外部链接，这可能会有点疯狂......

实际获得一些链接检查软件——搜索谷歌——并运行它会好得多……因为它应该以一种被称为“爬取网站”的方式运行。基本上，它会逐步浏览您的每个页面并返回发现的所有损坏链接的报告*（您必须确保软件支持 cookie，因为您提供的站点需要授权）*。

要注意的另一件事是，不仅仅是链接会导致软件触发“链接断开”错误。您可能会发现您的某些页面资源触发了 404... 即您应该检查所有图像、css 和 js 以确保它们加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-03T09:29:09.813

这个建议并没有解决问题，但我相信值得一提的是 WebDev 工具栏（[http://chrispederick.com/work/web-developer/](http://chrispederick.com/work/web-developer/)（firefox 插件）至少可以在这里提供*帮助*。

它可以显示网页中的所有链接，并突出显示所有锚点。这可以帮助开发人员“扫描”网站以查找不合适的链接。)

安装后，选择 INFORMATION » 并选择

*   显示锚点
*   显示页面信息
*   显示链接信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-09T11:40:05.163

您可以为此使用 phantomjs 或量角器之类的工具。可以在[https://github.com/ashittheone/broken-links-log](https://github.com/ashittheone/broken-links-log)上找到一种工作工具。此存储库可用于记录任何网站深度达 5 的所有断开链接。尽管在以后的版本中，深度预计将可定制

# php - JavaScript 和 PHP 在前瞻断言的惰性方面的差异

> ID：12435954
> 
> 赞同：3
> 
> 时间：2012-09-15T08:51:32.277
> 
> 标签：php, javascript, regex, lookahead

我发现 JavaScript 和 PHP 处理以下正则表达式的方式之间存在差异，我感到很困惑。

在 JavaScript 中，

```
'foobar'.replace(/(?=(bar))/     , '$1');
'foobar'.replace(/(?=(bar))?/    , '$1');
'foobar'.replace(/(?:(?=(bar)))?/, '$1'); 
```

结果分别为

```
foobarbar
foobar
foobar 
```

如这个[jsFiddle](http://jsfiddle.net/acheong87/qKb4b/)所示。

然而，在 PHP 中，

```
echo preg_replace('/(?=(bar))/', '$1', "foobar<br/>");
echo preg_replace('/(?=(bar))?/', '$1', "foobar<br/>");
echo preg_replace('/(?:(?=(bar)))?/', '$1', "foobar<br/>"); 
```

结果是，

```
foobarbar

Warning: preg_replace() [function.preg-replace]: Compilation failed: nothing to repeat at offset 9 in /homepages/26/d94605010/htdocs/lz/writecodeonline.com/php/index.php(201) : eval()'d code on line 2
foobarbar 
```

我不太担心这个警告。但似乎在 JavaScript 中，前瞻断言在某种程度上比在 PHP 中“更懒惰”。为什么有区别？这是其中一个引擎中的错误吗？理论上哪个更“正确”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T17:10:34.920

真正的区别其实很简单：

在 JavaScript 中，`replace` **只会替换第一个匹配项**，除非使用`/g`标志（全局）。
在 PHP 中，`preg_replace`替换所有匹配项。

第三种模式，`(?:(?=(bar)))?`，可以匹配每个位置的空字符串，并`"bar"`在*某些*位置捕获。没有`/g`标志，它只匹配一次，在字符串的开头。

如果您使用更明显的替换字符串（例如`[$1]`.

PHP 示例： http: [//ideone.com/8Mjg6](http://ideone.com/8Mjg6)
JavaScript 示例，无`/g`：http: [//jsfiddle.net/qKb4b/3/](http://jsfiddle.net/qKb4b/3/)
JavaScript 示例，带有：http `/g`: [//jsfiddle.net/qKb4b/2/](http://jsfiddle.net/qKb4b/2/)

我还要注意，[“懒惰”](https://stackoverflow.com/questions/3075130/difference-between-and-for-regex/3075532#3075532)是正则表达式中的一个不同概念，与这个问题无关。

# c - 使用 SOCK_RAW 时的套接字错误以及如何通过第 2 层通信接受多个客户端

> ID：12435958
> 
> 赞同：1
> 
> 时间：2012-09-15T08:52:10.573
> 
> 标签：c, network-programming

1.  soc = socket(AF_PACKET, SOCK_RAW, htons(ETH_P_ALL)); 在客户端，运行时，得到 == -1 错误

2.  如果accept函数只能与UDP和TCP更高的协议一起使用，如何接受多个客户端进行二层通信？

在哪里可以找到接受函数的代码，我想为第 2 层重写它。

**更新：** 尝试后 soc = socket(PF_PACKET, SOCK_RAW, htons(ETH_P_ALL)); 也 == -1 ，得到这个错误

服务器端和客户端都是同一台计算机，本地一个奇怪的是运行服务器端，它没有这个错误，但运行客户端程序出错

```
//#include "stdafx.h"

#include <stdlib.h>
#include <unistd.h>
#include <string.h>
#include <sys/ioctl.h>
#include <sys/socket.h>
#include <sys/time.h>
#include <sys/types.h> 
#include <arpa/inet.h>
#include <fcntl.h>
#include <netdb.h>
#include <netinet/in.h>
#include <arpa/nameser.h>
#include <resolv.h>
#include <net/if.h>
#include <netinet/if_ether.h>
#include <netpacket/packet.h>
#include <net/ethernet.h>
#include <netinet/ether.h>
//#include "sock.h"

#define MAX_MESSAGE          21000
#define FD_NUM 5
#define tcp_port                5009

//#pragma comment(lib, "ws2_32.lib")
//#include <winsock2.h>

char host_ip[16] = "127.0.0.1";

void task()
{
    struct sockaddr_in local;
    int opt;
    int soc;

    //soc = socket(AF_INET,SOCK_STREAM,0);
    soc = socket(AF_PACKET, SOCK_RAW, htons(ETH_P_ALL));
    if (soc==-1) {
        printf("socket error\n");
    }
    // determine ethernet number    
    /*
    struct ifreq ifr;
    size_t if_name_len=strlen(if_name);
    if (if_name_len<sizeof(ifr.ifr_name)) {
        memcpy(ifr.ifr_name,if_name,if_name_len);
        ifr.ifr_name[if_name_len]=0;
    } else {
        printf("interface name is too long");
    }
    if (ioctl(fd,SIOCGIFINDEX,&ifr)==-1) {
        printf("determine ethernet number error\n");
    }
    int ifindex=ifr.ifr_ifindex;
    */
    // mac address
    /*target address*/
    struct sockaddr_ll socket_address;

    /*buffer for ethernet frame*/
    void* buffer = (void*)malloc(ETH_FRAME_LEN);

    /*pointer to ethenet header*/
    unsigned char* etherhead = (unsigned char*)buffer;

    /*userdata in ethernet frame*/
    unsigned char* data = (unsigned char*)buffer + 14;

    /*another pointer to ethernet header*/
    struct ethhdr *eh = (struct ethhdr *)etherhead;

    int send_result = 0;

    /*our MAC address*/
    //10:78:d2:ad:90:cb
    //0x10,0x78,0xD2,0xAD,0x90,0xCB
    unsigned char src_mac[6] = {0x10,0x78,0xD2,0xAD,0x90,0xCB};

    /*other host MAC address*/
    unsigned char dest_mac[6] = {0x10,0x78,0xD2,0xAD,0x90,0xCB};

    /*prepare sockaddr_ll*/

    /*RAW communication*/
    socket_address.sll_family   = PF_PACKET;    
    /*we don't use a protocoll above ethernet layer
      ->just use anything here*/
    socket_address.sll_protocol = htons(ETH_P_IP);  

    /*index of the network device
    see full code later how to retrieve it*/
    socket_address.sll_ifindex  = 0;

    /*ARP hardware identifier is ethernet*/
    socket_address.sll_hatype   = ARPHRD_ETHER;

    /*target is another host*/
    socket_address.sll_pkttype  = PACKET_OTHERHOST;

    /*address length*/
    socket_address.sll_halen    = ETH_ALEN;     
    /*MAC - begin*/
    socket_address.sll_addr[0]  = 0x10;     
    socket_address.sll_addr[1]  = 0x78;     
    socket_address.sll_addr[2]  = 0xD2;
    socket_address.sll_addr[3]  = 0xAD;
    socket_address.sll_addr[4]  = 0x90;
    socket_address.sll_addr[5]  = 0xCB;
    /*MAC - end*/
    socket_address.sll_addr[6]  = 0x00;/*not used*/
    socket_address.sll_addr[7]  = 0x00;/*not used*/

    memcpy((void*)buffer, (void*)dest_mac, ETH_ALEN);
    memcpy((void*)(buffer+ETH_ALEN), (void*)src_mac, ETH_ALEN);
    eh->h_proto = 0x00;

    int j = 0;
    for (j = 46; --j; data[j] = (unsigned char)((int) (255.0*rand()/(RAND_MAX+1.0))));

    /*
    struct sockaddr_in server;
    int len = sizeof(server);
    server.sin_family=AF_INET;
    server.sin_port=htons(5008);
    server.sin_addr.s_addr=inet_addr(host_ip);

    int CONN_SOCK   = InitSocketTcp(tcp_port);
    if(connect(CONN_SOCK, (struct sockaddr*)&server, sizeof(server)) == -1)
    {
        printf("connection failed\n");
    }
    else
    {
            printf("connection ok!\n");
    }
    */
    while(1)
    {
        char buff[492] = "\0";
        printf("input: ");
        scanf("%s", buff);

        //send(CONN_SOCK,buff,strlen(buff),0);
        /*send the packet*/
        send_result = sendto(soc, buff, ETH_FRAME_LEN, 0, (struct sockaddr*)&socket_address, sizeof(socket_address));
        send_result == -1?printf("send error"):0;

        if(buff[0] == 'q')
        {
            //shutdown(CONN_SOCK, SD_SEND);
            //closesocket(CONN_SOCK);
            //WSACleanup();
            close(soc);
            exit(0);
        }
    }
}

int main()
{
    //for(int i=10; i!=0; --i)
        //pthread_create();
    task();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T09:54:12.360

Accept() 仅用于 TCP 或 UDP（实际上它的主要用途是在 tcp 中），因为它建立了一个连接。连接在 tcp 的情况下进行 3 次握手并交换序列号等信息，并且完全由套接字（端口加 IP 地址）标识

与此相反，您可以简单地使用在 udp 情况下通常使用的 sendto 和 receivefrom api，其中每个数据包可能遵循不同的路径到达目的地。在 udp 通信的情况下，您不需要接受。这同样可以扩展到链路层 (L2) 帧，即每一方都可以随意发送或接收，而无需先实际建立连接。

这应该使用 root 来完成

# java - 允许保存/加载列布局的 Java DB 网格组件

> ID：12435960
> 
> 赞同：0
> 
> 时间：2012-09-15T08:52:21.177
> 
> 标签：java, layout, dbgrid

您能否建议允许向/从文件保存或加载列布局（如序列、名称、宽度等）的数据库网格组件。

我也对允许使用标准库实现此功能的方法感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T13:59:46.693

Delphi 生态系统与 Java 有点不同。首先，Delphi 几乎是一个集成工具，因此那里的组件范围广泛且非常以数据为中心。Java 是一个更大的生态系统，它更专注于您可以从 GUI 读取和写入的数据结构。

话虽这么说，是的，那里有很多网格。在 Java 中，它是 Swing 中的 JTable 和 JavaFX2 中的 TableView（可以说是新的 Swing）。Swing 已经成熟并且有大量可用的表，但根据我的经验，编写自定义 JTable 并从那里开始工作会更容易。Java 教程将帮助您启动和运行。

*   JavaFX： [http ://docs.oracle.com/javafx/2/api/javafx/scene/control/TableView.html](http://docs.oracle.com/javafx/2/api/javafx/scene/control/TableView.html)

*   JTable：[http ://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html)

*   Java 教程[http://docs.oracle.com/javase/tutorial/](http://docs.oracle.com/javase/tutorial/)

这里的长短是您不需要提供的组件，但您可以自己构建一个（如果您精通，可能会在不到几个小时的时间内），如果您不熟练，可能会在几天内犯错误。

如果您真的在寻找更像德尔福的“开箱即用”解决方案，那么我推荐：[http ://www.jidesoft.com/products/grids.htm](http://www.jidesoft.com/products/grids.htm)

老实说，让 JTable 启动并滚动并构建 TableModel 是一项非常简单的任务。我建议您这样做，因为您需要在 Swing 中进行不同的思考。如果您愿意尝试支持较少的东西，JavaFX 2 肯定更灵活。至于您对列顺序等的评论……所有这些方法都支持这样做。在摇摆中，您可以查看 TableColumnModel。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-26T06:48:37.303

我还可以检查[Open Swing 框架](http://oswing.sourceforge.net/tutorial.html)

# javascript - Checkbox Styling with SelectAll Function

> ID：12435963
> 
> 赞同：0
> 
> 时间：2012-09-15T08:53:54.443
> 
> 标签：javascript, html, css

Was styling the checkboxes of my webpage with jquery using the tutorial [here](http://blogs.digitss.com/javascript/jquery-javascript/jquery-fancy-custom-radio-and-checkbox/#idc-cover)

But i realized that I could not do SelectAll checkbox that will select all the checkboxes in my list. It works in the backend (the checkboxes are selected) but it does not show in my page.

Added a demo to show my problem. May need to port to your system to test it out

[Demo](http://jsfiddle.net/hi888888/GjGc4/5/)

what can I add to the jQuery Custom Radio-buttons and Checkbox javascript file in the to achieve the select all checkbox function

Thank you!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T09:30:22.350

你可以试试这个 [FIDDLE](http://jsfiddle.net/GjGc4/9/)：

```
$(function () {
    var $chbxs = $('.checkbox');
    $('#sel_all_lbl').toggle(
        function() {
            $chbxs.css('background-position', '50% -50px');
            $('#checkboxall .truefalse').prop('checked', true);
        },
        function() {
            $chbxs.css('background-position', '50% 0px');
            $('#checkboxall .truefalse').prop('checked', false);
        }
    );
}); 
```

我做了什么？首先，在您的小提琴中，您需要更正一些语法错误，然后将插件代码添加到 DOM，然后将脚本添加到脚本面板，以便在 DOM 准备好时触发它们。（这都是关于 jsFiddle 的，所以你要了解它是如何工作的）

实际上，关于您的代码，您将点击处理程序 ( `.toggle()`) 附加到了复选框元素。但是点击事件不会触发它。脚本只是更改了复选框的属性，但没有点击。因此，您需要将这些处理程序附加到希望用户实际单击的元素上，即方形图标。（我加了一个`id="sel_all_lbl"`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T09:03:47.040

尝试在全选复选框上使用事件处理并从 javascript 中手动检查所有复选框。

# jquery - getting height of the dynamically loaded div

> ID：12435964
> 
> 赞同：-2
> 
> 时间：2012-09-15T08:54:02.520
> 
> 标签：jquery, ajax

i am facing some difficulty with getting the height of the dynamically loaded div image.. sometimes , it gives the correct height but sometimes it gives zero .. here is my code

```
$.ajax({
                        type: "POST",
                        url: "images.php",
                        data: dataStr,
                        cache: false,
                        async : false,
                        success: function(data)
                        {

                        $('.up').empty();
                        $(".up").html(data);
                        alert($(".loadimg").height());

                          }
                         }); 
```

here is what i am appending

```
echo '<div class="imagediv">
    <img src="default.jpg"  class="loadimg" />
        </div>  '; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T09:43:21.483

您可以像这样尝试 .delegate() ：

```
$(".up").delegate("img", "load", function() {
  alert($(".loadimg").height());
})

                $.ajax({
                type: "POST",
                url: "ajax.php",
                async:false,
                success: function(data)
                  {
                    $('.up').empty();
                    $(".up").html(data);
                  }
                 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T09:17:36.127

利用`$(".loadimg").load(function(){ alert($(".loadimg").height()); });`

尝试这个

```
 $.ajax({
                    type: "POST",
                    url: "images.php",
                    data: dataStr,
                    cache: false,
                    async : false,
                    success: function(data)
                    {
                        $('.up').empty();
                        $(".up").html(data);

                        $(".loadimg").load(function(){
                            alert($(".loadimg").height());
                        });
                      }
                     }); 
```

# linux - Sending Push Notification to a Windows phone from Linux Server

> ID：12435967
> 
> 赞同：0
> 
> 时间：2012-09-15T08:54:17.707
> 
> 标签：linux

Can we send a push notification to a windows phone from a linux server or is this bound to a windows server only?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T06:23:55.303

嗯，我得到了答案...

向订阅 URI 发布 http 帖子

**Java 代码：**

String toastMessage = "<?xml 版本=\"1.0\" 编码=\"utf-8\"?>" +

```
 "<wp:Notification xmlns:wp=\"WPNotification\">" +
     "<wp:Toast>" +
          "<wp:Text1> Welcome To Windows Push &lt;/wp:Text1>" +
     "</wp:Toast> " +
  "</wp:Notification>";

byte[] notificationMessage = toastMessage.getBytes();

url = new URL(subscriptionURI); //You must have the subscription URI provided by MPNS to client side.

HttpURLConnection connection = (HttpURLConnection) url.openConnection();
connection.setRequestMethod("POST");

connection.setDoOutput(true);
connection.setRequestProperty("ContentLength", String.valueOf(notificationMessage.length));
connection.setRequestProperty("ContentType", "text/xml");
connection.addRequestProperty("X-WindowsPhone-Target", "toast");
connection.addRequestProperty("X-NotificationClass", "2");

connection.connect();

DataOutputStream out = 
    new DataOutputStream(
        connection.getOutputStream());
out.write(notificationMessage, 0, notificationMessage.length);
out.close(); 
```

# python - Phenny IRC bot- disconnecting

> ID：12435968
> 
> 赞同：0
> 
> 时间：2012-09-15T08:54:36.777
> 
> 标签：python, irc

I am attempting to set up an IRC bot (phenny) and I have gotten as far as editing default.py to say:

```
nick = 'Willdudebot123'
host = irc.freenode.net
channels = ['#FunkyChicken']
owner = 'Willdude123' 
```

But when I run phenny.py, it connects to freenode, and then, after about 10 seconds, it drops out. Any ideas? By the way I am on Debian Linux.

# javascript - 如何打开一个子窗口，那个时候应该禁用父窗口

> ID：12435970
> 
> 赞同：0
> 
> 时间：2012-09-15T08:54:37.423
> 
> 标签：javascript, jquery, asp.net-mvc-3

我想显示一个子窗口，它将执行一些操作并将其设置为父窗口。子窗口打开的时间，父窗口应该被禁用。我试过这个返回子窗口，但父窗口在子窗口打开时仍处于工作模式......

```
<a href="AddChoice" onclick="var x = window.open('url',,'','hemenubar=yes,height= 300,       
width = 500,,scrollbars=no,dialog=yes,minimize=no,maximize=no, 
alwaystop=yes,copyhistory= no,resizable=yes,toolbar=no,directories=no
,location=no,menubar=no,status=no,left=0,top=0');return false;">
Change Dependent Question...</a>
//This link returns a child window 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T09:09:29.627

您应该使用模式对话框。有很多方法可以做到这一点。您可以使用一些现有的插件。

jquery： http: [//www.designlabelblog.com/2009/03/20-ways-to-create-javascript-modal.html](http://www.designlabelblog.com/2009/03/20-ways-to-create-javascript-modal.html)

YUI：http: [//yuilibrary.com/yui/docs/panel/panel-form.html](http://yuilibrary.com/yui/docs/panel/panel-form.html)

# php - 调试 PDO 连接和 PHP 输出

> ID：12435971
> 
> 赞同：1
> 
> 时间：2012-09-15T08:55:11.073
> 
> 标签：php, pdo

我正在尝试使用 PDO 连接到 mySQL。

如果我犯了一个明显的错误，请原谅我 - 我只是在学习......

```
 <?php

try {
    $db_conn = new PDO('mysql:host=localhost;dbname=testdatabase','test', 'testpass');  
} 
catch (PDOException $e) {
    echo 'Could not connect to database';
}

$stmt = $db_conn->query('SELECT * FROM PRODUCTS');

while ($row = $stmt->fetch() ) {
    echo '<pre>'; print_r($row); echo '<pre>';
}

?> 
```

浏览器的输出如下：

```
query('SELECT * FROM PRODUCTS'); while ($row = $stmt->fetch() ) { echo '
'; print_r($row); echo '
';
}

?> 
```

我做错了什么？？？为什么 PHP 不解析 PHP 脚本？

**更新：**

如果我创建一个新的 php 文件并运行 phpinfo(); 有用。

如果我将 phpinfo() 粘贴到上述代码的顶部，如下所示：

```
<?php

phpinfo();

echo '<h1>PDO TEST</h1>';

try {
    $db_conn = new PDO('mysql:host=localhost;dbname=testdatabase','test', 'testpass');  
} 
catch (PDOException $e) {
    echo 'Could not connect to database';
}

$stmt = $db_conn->query('SELECT * FROM Products');

while ($row = $stmt->fetch() ) {
    echo '<pre>'; print_r($row); echo '<pre>';
}

?> 
```

我得到以下输出：

```
PDO TEST'; try { $db_conn = new PDO('mysql:host=localhost;dbname=testdatabase','test', 'testpass');  } catch (PDOException $e) { echo 'Could not connect to database'; } $stmt = $db_conn->query('SELECT * FROM Products'); while ($row = $stmt->fetch() ) { echo '
'; print_r($row); echo '
';
}

?> 
```

更新：问题已解决......这是某种文件编码问题。当我将代码复制并粘贴到新文件中时，它可以完美运行。很奇怪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T09:07:06.593

打开 httpd.conf 文件并在里面添加这一行：

```
AddType application/x-httpd-php .php .phtml 
```

这使您的 PHP 脚本由 PHP 解释器执行。

```
Then restart apache server using /etc/init.d/apache2 or httpd restart 
```

# php - 使用 Drupal Form Api 更改复选框后的文本

> ID：12435975
> 
> 赞同：0
> 
> 时间：2012-09-15T08:55:38.420
> 
> 标签：php, drupal-7, drupal-forms

我得到了以下问题。客户希望复选框后的文本是指向其他页面的链接，因此...

我有以下代码：

```
$form['boxes_brands'] = array(
        '#type'=>'checkboxes',
        '#title'=>'<div id="title-container">Merken</div>',
        '#options'=>$brandArr,
        '#default_value'=>$_SESSION['filter_brands_cat'],           
    ); 
```

=> $brandArr 是一系列品牌。

我查看了 Drupal 的 Form Api，但没有找到执行此操作的选项。我可以更改 $brandArr 中的值，但当然这也会更改输入对象的值属性的值。

使用前缀和后缀选项也不会这样做，因为我也不想要标签中的复选框。

有没有一种干净的方法可以做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T15:28:00.973

如果您使用 UI 创建了表单，那么您应该能够在选项中指定类似的内容，并且链接将呈现为链接：

```
google|<a href="http://www.google.com">This is a link to google</a>
yahoo|<a href="http://www.yahoo.com">Yahoo</a>
bing|<a href="http://www.bing.com">Bing!</a> 
```

参见示例： ![选项标签作为链接](../Images/2c1fac937d2c210dbc5f082c97263452.png)

否则，您应该能够`$brandArr`相应地修改以在标签中创建链接。这样做不应该改变属性的值，因为它应该是一个`$value->$label`关联数组。您只需要更改`$label`not `$value`。

# iphone - Facebook SDK 3.0 授权后启动视图控制器

> ID：12435976
> 
> 赞同：0
> 
> 时间：2012-09-15T08:55:40.090
> 
> 标签：iphone, ios, xcode, facebook

有人可以给我指点吗？

我已经安装了 FacebookSDK 3.0 并且一直在构建一个简单的登录应用程序。

我有一个名为“LoginViewController”的 ViewController，带有一个您单击的按钮，它授权 Facebook 打开一个名为“MenuViewController”的 NavigationController

目前我通过 Modal Segue 将它们链接起来，我认为这是错误的，需要一些关于如何正确链接的建议？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T06:09:33.137

[在 Facebook开发人员](http://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/)上关注此文档。

它解释了如何处理登录和注销功能。一旦您从 Safari 登录，它就会返回到应用程序，并且您的方法将被调用，该方法由通知设置。

使用该方法并根据要求在您自己的应用程序中显示 nextViewController(MenuViewController) 。

# gridview - 在gridview超链接中使用window.open

> ID：12435977
> 
> 赞同：1
> 
> 时间：2012-09-15T08:55:48.017
> 
> 标签：gridview, hyperlink, window

我有一个gridview，其中有一个列并通过查询字符串打开一个页面。列代码在这里：

```
 <asp:HyperLinkField DataNavigateUrlFields="LCNumber" Target="_blank"
                     DataNavigateUrlFormatString="LCDocs.aspx?LCNumber={0}"
                     Text="View" >
     <ItemStyle Font-Names="Tahoma" Font-Size="8pt" />
 </asp:HyperLinkField> 
```

问题是当我单击视图时，它会打开新选项卡，而我必须打开一个具有自定义高度和宽度以及自定义位置的新窗口。这样做的解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T09:08:35.097

您可以使用`<a>`标签代替`<asp:hyperlink>`并替换您的超链接，如下所示。

```
<asp:TemplateField HeaderText="Name" SortExpression="PartnerName">
    <ItemTemplate>
        <a onclick="window.open('LCDocs.aspx?LCNumber=<# Eval("LCNumber")','','width=200,height=100')" id="alink" runat="server" > </a>
    </ItemTemplate>
</asp:TemplateField> 
```

如果你想改变`{0}`，你可以通过后面的代码来改变它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T08:56:05.190

这是我和我一起工作的代码：

```
<script  language="javascript" type="text/javascript" >
        function popUp(SERVIC_CODE) {
            strOpen = "CustomerStatmentDetails.aspx?SERVIC_CODE=" + SERVIC_CODE;
            window.open(strOpen, 'popWindow', 'toolbar=0,scrollbars=1,location=0,statusbar=1,menubar=0,resizable=1,width=350,height=500,left = 545,top = 200');
    }
    </script>   

<ItemTemplate>
                    <asp:LinkButton ID="LinkButton11" runat="server" CausesValidation="False" Text='<%# Eval("SERVIC_CODE") %>'  OnClientClick='<%# Eval("SERVIC_CODE","javascript: return popUp({0})") %>'  ></asp:LinkButton>
                </ItemTemplate> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-25T07:04:32.640

```
 <div>
    <asp:GridView ID="gvDemo" runat="server" AutoGenerateColumns="false">
        <Columns>
            <asp:BoundField DataField="Name" HeaderText="Name" />
            <asp:TemplateField HeaderText="">
                <ItemTemplate>
                    <a href="#" onclick='openWindow("<%# Eval("Code") %>");'>View Details</a>
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>
    </asp:GridView>
</div>
<script type="text/javascript">
    function openWindow(code) {
        window.open('page.aspx?Code=' + code, 'open_window', ' width=640, height=480, left=0, top=0');
    }
</script> 
```

# c# - ASP.NET 子域功能

> ID：12435980
> 
> 赞同：0
> 
> 时间：2012-09-15T08:56:59.740
> 
> 标签：c#, asp.net, web

我想使用 ASP.NET 开发子域功能，就像它在这里发生的情况一样，
当您注册时，
您创建一个用户名，说“ann”
，在“www.domainName.com”上注册时，
您将获得一个子域“www.安.域名.com"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T06:24:17.250

这种方法将解决问题

1.  首先，为您站点的 IP 地址建立一个通配符 DNS 域 (*)。这将允许 anystring.yourdomain.com 正确解析。
2.  将 IIS 配置为绑定到专用 IP 地址，但不依赖主机标头（主机标头为空）。这将导致绑定 IP 的所有 HTTP 请求都被定向到您的站点。
3.  有一个 HttpModule 来查看传入域（在 HttpContext 中），如果它无效则拒绝它。您可能会考虑设置 cookie 或票证或类似的东西，以避免需要为每个请求进行数据库查找以验证它。

# ruby-on-rails - rails truncate 方法添加特殊字符

> ID：12435983
> 
> 赞同：4
> 
> 时间：2012-09-15T08:57:39.887
> 
> 标签：ruby-on-rails, special-characters, truncate, sanitize

我有这个 html 文本：

```
<p> I'm a html &nbsp; text</p> 
```

为了在我的网页上显示它，我首先对其进行消毒并删除标签：

```
sanitize(best_practice.milestone.description, :tags=>[]) 
```

然后我显示确定，`&nbsp;`已删除。

但是，如果我决定像这样截断文本：

```
sanitize(best_practice.milestone.description, :tags=>[]).truncate(30) 
```

在我的`&nbsp;`网页上再次可见。所有特殊字符实际上都是可见的。

我该怎么做才能避免截断以使这些特殊字符可见？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-12T14:30:47.010

处理*清理*助手和截断可能很棘手。有很多不同的*清理*助手：h、CGI::escapeHTML、sanitize、strip_tags、html_safe 等。如果字符串在开始标签和结束标签之间或正好在中间被截断，则清理和截断不能很好地协同工作一个特殊的 HTML 字符。

以下语句似乎有效

```
sanitize(text, :tags=>[]).truncate(30, :separator => " ").html_safe 
```

诀窍是传递一个 :separator 选项以在自然中断处截断文本。

# python - 将相关资源与 TastyPie 相结合

> ID：12435992
> 
> 赞同：6
> 
> 时间：2012-09-15T09:01:16.080
> 
> 标签：python, django, tastypie

如何在 TastyPie 中组合多个资源？我想组合 3 个模型：用户、个人资料和帖子。

理想情况下，我希望配置文件嵌套在用户中。我想从 UserPostResource 公开用户和所有配置文件位置。我不知道从这里去哪里。

```
class UserResource(ModelResource):

    class Meta:
        queryset = User.objects.all()
        resource_name = 'user'
        fields = ['username','id','date_joined']

        #Improper Auth
        authorization = Authorization()

class UserProfileResource(ModelResource):

    class Meta:
        queryset = UserProfile.objects.all()
        resource_name = 'profile'

class UserPostResource(ModelResource):
    user = fields.ForeignKey(UserResource,'user', full=True)

    class Meta:
        queryset = UserPost.objects.all()
        resource_name = 'userpost'

        #Improper Auth
        authorization = Authorization() 
```

这是我的模型：

```
class UserProfile(models.Model):

    user = models.OneToOneField(User)

    website = models.CharField(max_length=50)
    description = models.CharField(max_length=255)
    full_name = models.CharField(max_length=50)

class UserPost(models.Model):
    user = models.ForeignKey(User)

    datetime = models.DateTimeField(auto_now_add=True)
    text = models.CharField(max_length=255, blank=True)
    location =  models.CharField(max_length=255, blank= True) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-15T09:22:03.473

Tastypie 字段（当资源是 a 时`ModelResource`）允许传入`attribute`kwarg，而 kwarg 又接受常规的 django 嵌套查找语法。

所以，首先这可能是有用的：

```
# in UserProfile model (adding related_name)
user = models.OneToOneField(User, related_name="profile") 
```

鉴于上述变化，以下内容：

```
from tastypie import fields

class UserResource(ModelResource):
    # ... 
    website = fields.CharField(attribute = 'profile__website' )
    description = fields.CharField(attribute = 'profile__description' )
    full_name = fields.CharField(attribute = 'profile__full_name' )
    # ... 
```

将`UserProfile`在`UserResource`.

现在，如果您想在 中公开位置列表（来自`UserPost`），`UserResource`则必须覆盖其中一种`Tastypie`方法。根据文档，一个好的候选者将是该[`dehydrate()`](http://django-tastypie.readthedocs.org/en/latest/resources.html#dehydrate)方法。

像这样的东西应该工作：

```
# in UserPost model (adding related_name)
user = models.ForeignKey(User, related_name="posts")

class UserResource(ModelResource):
    # ....
    def dehydrate(self, bundle):
        posts = bundle.obj.posts.all()
        bundle.data['locations'] = [post.location for post in posts]
        return bundle
    # ... 
```

# c# - 按计划自动更新 ASP.Net WebForm 上的图像

> ID：12435993
> 
> 赞同：0
> 
> 时间：2012-09-15T09:01:18.430
> 
> 标签：c#, asp.net, facebook, webforms, scheduled-tasks

所以我每周都使用 c# 和 asp.net webforms 自行更改图像。最终这将是一个 facebook 应用程序（iframe）。

执行上述操作的最佳方法是什么？我做了一些研究，但找不到任何真正有帮助的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T11:41:08.447

我假设您正在通过`Image`ASP.Net 网络表单上的控件显示图像？如果是这样，这很简单。

您在控件内显示的图像由`Image`控件的 ImageURL 属性确定。这需要是包含图像文件 URL 的文本字符串（采用、`gif`、`jpg`、`jpeg`或`bmp`格式）。`wmf``png`

在与 WebForm 关联的 C# 代码中，您可以使用以下方法以编程方式根据月份更改图像（`myImage`是 WebForm 上 Image 控件的名称）：

```
private void SetImage(int day)
{
    if (day >= 1 && day <= 7)
    {
        myImage.ImageUrl = @"~\ImageOne.jpeg";
    }
    else if (day >= 8 && day <= 14)
    {
        myImage.ImageUrl = @"~\ImageTwo.jpeg";
    }
    else if (day >= 15 && day <= 21)
    {
        myImage.ImageUrl = @"~\ImageThree.jpeg";
    }
    else if (day >= 22 && day <= 31)
    {
        myImage.ImageUrl = @"~\ImageFour.jpeg";
    }
    else
    {
        throw new Exception("Invalid Day");
    }
} 
```

显然，根据需要更改日期并在 if 语句中添加另一个块（如果需要），并更新各种图像的 URL。你可以像这样调用这个方法：

```
SetImage(DateTime.Now.Day); 
```

# ajax - 使用 Ajax 更改 div onclick 的内容

> ID：12435995
> 
> 赞同：0
> 
> 时间：2012-09-15T09:01:26.303
> 
> 标签：ajax, onclick

单击图像时，我想将名为 john 的 div 的内容更改为 php 文件的输出。我敢肯定这很简单，但我找不到合适的例子。这是我的代码：

```
function ajaxFunction(){
                var ajaxRequest;
                    ajaxRequest = new XMLHttpRequest();
                ajaxRequest.onreadystatechange = function(){
                    if(ajaxRequest.readyState == 4){
                        document.getElementById("john").innerHTML=xmlhttp.responseText;
                    }
                }
                ajaxRequest.open("GET", "test.php", true);
                ajaxRequest.send(null); 
            } 
```

html

```
<img class='cross' src='images/cross.png' onclick="ajaxFunction();">
<div id='john'>john</div> 
```

测试.php

```
<?php echo "hello"; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T09:42:09.403

我可以建议跨浏览器/版本，使用：

```
var ajaxRequest = getXMLHttpRequest(); 
```

接着，

```
function getXMLHttpRequest() {
    var re = "nothing";
    try {re = new window.XMLHttpRequest();} catch(e1) {};
    try {re = new ActiveXObject("MSXML2.XMLHTTP.4.0");} catch(e) {};
    try {re = new ActiveXObject("Msxml2.XMLHTTP");} catch(e2) {};
    try {re = new ActiveXObject("Microsoft.XMLHTTP");} catch(e3) {};
    try {re = new ActiveXObject("MSXML2.XMLHTTP.3.0");} catch(ex) {};
    if (re != "nothing") {return re;}
    else {return null;};
}; 
```

以及将其更改为

```
ajaxRequest.responseText(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T09:30:26.420

我已经设法用下面的代码解决了它。在从 php 文件中获取“hello”后，此代码还会返回元素的 ID。

```
<script language="javascript">
            function calldislike(str){
                if (str==""){
                  document.getElementById("john").innerHTML="";
                  return;
                  }
                xmlhttp=new XMLHttpRequest();
                xmlhttp.onreadystatechange=function(){
                    if (xmlhttp.readyState==4 && xmlhttp.status==200){
                    document.getElementById("john").innerHTML=xmlhttp.responseText;
                    }
                }
                xmlhttp.open("GET","test.php?q="+str,true);
                xmlhttp.send();
            }
        </script>

<img src='images/cross.png' onclick="calldislike(this.id);" id='3'>
<div id='john'>john</div> 
```

测试.php

```
<?php echo "hello".$_GET["q"];  ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T09:17:52.937

在我看来，您的 javascript 有语法错误。您试图从中获取`responseText`，`xmlhttp`但您`XMLHttpRequest`的存储在 `ajaxRequest`

尝试这个

```
function ajaxFunction(){
    var ajaxRequest = new XMLHttpRequest();
    ajaxRequest.onreadystatechange = function(){
        if(ajaxRequest.readyState == 4 && ajaxRequest.status==200){
                document.getElementById("john").innerHTML=ajaxRequest.responseText;
            }
        }
    ajaxRequest.open("GET", "test.php", true);
    ajaxRequest.send(); 
} 
```

# django - 将缓存页面交付给匿名用户，将非缓存页面交付给授权用户

> ID：12435996
> 
> 赞同：1
> 
> 时间：2012-09-15T09:01:45.870
> 
> 标签：django, caching, memcached, django-1.3

我在我的应用程序中使用 django 1.3。我需要组织缓存，满足以下规则：

1.  使用 memcached 作为缓存后端
2.  在我想要缓存的视图中使用 @cache_page 装饰器
3.  每个非授权（匿名）用户都会看到页面的缓存版本（因此 django 应该提供页面的缓存版本）；
4.  对于每个授权用户，django 应该生成新版本的页面（非缓存）并交付它。

我该怎么做？我尝试在视图下方使用两个装饰器：

```
@cache_page(108000)
@vary_on_cookie 
```

但是当我登录时，首先我会看到新数据，在更新数据后（使用 phpMyAdmin 直接在数据库中）我刷新页面并查看以前的内容版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T09:41:05.367

这可能是您需要的[https://docs.djangoproject.com/en/dev/ref/settings/#std:setting-CACHE_MIDDLEWARE_ANONYMOUS_ONLY](https://docs.djangoproject.com/en/dev/ref/settings/#std:setting-CACHE_MIDDLEWARE_ANONYMOUS_ONLY)