# StackOverflow 问答 10336000-10336999

# iphone - ARC 不释放实例变量

> ID：10336000
> 
> 赞同：0
> 
> 时间：2012-04-26T14:55:17.273
> 
> 标签：iphone, objective-c, ios, memory-management, automatic-ref-counting

我对 ARC 有疑问。经过几个小时的调试，我放弃了，决定在这里检查。

基本上我有一个`MainViewController`，它创建的实例`PreviewsView`。

在`PreviewsView`我有委托和数据源属性：

```
@property (nonatomic, unsafe_unretained) IBOutlet id<PreviewsDataSource> dataSource;
@property (nonatomic, unsafe_unretained) IBOutlet id<PreviewsDelegate> delegate; 
```

我创建`PreviewsView`in 的实例`MainViewController`，设置`self`为`delegate`and `dataSource`，将其添加到视图并保存为实例变量：

```
- (void)addPreviews {
    previewsView = [[PreviewsView alloc] initWithFrame:CGRectMake(0, 75, 1024, 480)];
    previewsView.dataSource = self;
    previewsView.delegate = self;
    [self.view addSubview:previewsView];
} 
```

然后当我`MainViewController`从导航控制器中删除 ACR deallocates 时，BUT`previewsView`仍然存在（为什么？？？）并实际运行触发的方法`[self.delegate doSomeStuff]`。正如`MainViewController`已经解除分配 - 它抛出**`EXC_BAD_ACCESS`**。

所以基本上：

*   实例`MainViewController`拥有`PreviewsView`(previewsView)的实例
*   `MainViewController`分配为`delegate`和`dataSource`在中的实例`PreviewsView`
*   释放实例后`MainViewController`， previewsView 仍然存在并正在运行。

任何想法为什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T16:45:26.967

在像这样 previewsView.delegate = nil; 释放 MainViewController 之前，您需要将您的代表设置为 nil；previewsView.dataSource = nil;

最好在您的 MainViewController 的 dealloc 方法中调用此代码->您仍然可以像这样与 ARC 一起使用它

```
- (void) dealloc
{
    previewsView.dataSource = nil;
    previewsView.delegate = nil;
    [super dealloc];
} 
```

你应该记住协议！假设！您的 previewsView 实例仍然“活着”（通知的工作方式相同）并尝试向您的实例发送消息，无论它是死的还是活着的。因此，当 MainViewController 被释放时， previewsView 也是，但代表仍然“活着”。因此，您需要通过将它们设置为 nil 来取消对它们的授权；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T15:02:56.847

unsafe_unretained 不为零 ivar。__weak 确实如此。

MainViewController 成员是否`previewsView`保留它？在 viewDidUnload 或完成 previewsView 后，将其设置为 nil，即：`previewsView = nil`。

一般来说，所有作为 ivars 的 IBOutlets 或子视图都应该是 __weak。如果您在将 previewsView 添加为子视图后不需要它，则可以删除 ivar。

希望这可以帮助！

# azure - 如何在 Windows Azure 中测试多个 Web 角色实例？

> ID：10336002
> 
> 赞同：0
> 
> 时间：2012-04-26T14:55:36.157
> 
> 标签：azure, azure-web-roles

背景：我已将 MVC3 应用程序部署到 2 个 Azure Web 角色实例，但我对如何测试其中一个实例失败的可能性感到困惑。

当我的一个实例脱机时，有没有一种方法可以测试以确保我的 Web 角色代码无缝运行？

我可以手动停止其中一个吗？或者以某种方式配置负载均衡器以强制所有流量到其中一台服务器？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T17:40:44.923

如果您对您的实例启用了 RDP 访问，您可以非常轻松地从 LoadBalancer 中删除一个或多个实例，即使该实例运行良好，而无需编写任何代码行。您只需要 RDP 到您的实例，然后使用 PowerShell 脚本将实例从负载均衡器中移除。在我的以下博客中，我描述了确切的过程：

[http://blogs.msdn.com/b/avkashchauhan/archive/2012/01/27/windows-azure-troubleshooting-taking-specific-windows-azure-instance-offline.aspx](http://blogs.msdn.com/b/avkashchauhan/archive/2012/01/27/windows-azure-troubleshooting-taking-specific-windows-azure-instance-offline.aspx)

上述细节还有助于通过从总共 M 个实例中删除 N 个实例来运行负载测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:05:31.463

如果您使用 StatusCheck 事件将状态设置为忙碌，您的实例将不会再收到来自负载均衡器的任何请求。您可能想要编写一些代码来向您的实例发送消息，这会将它们设置为忙碌一段时间（例如使用队列）。

```
public override bool OnStart()
{
   RoleEnvironment.StatusCheck += RoleEnvironmentStatusCheck;

   return base.OnStart();
}

// Use the busy object to indicate that the status of the role instance must be Busy
private volatile bool busy = true;

private void RoleEnvironmentStatusCheck(object sender, RoleInstanceStatusCheckEventArgs e)
{
   If (this.busy)
   {
      // Sets the status of the role instance to Busy for a short interval.
      // If you want the role instance to remain busy, add code to 
      // continue to call the SetBusy method
      e.SetBusy();
   }
} 
```

参考：http: [//msdn.microsoft.com/en-us/library/microsoft.windowsazure.serviceruntime.roleenvironment.statuscheck.aspx](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.serviceruntime.roleenvironment.statuscheck.aspx)

除此之外，您还可以简单地重新启动您的实例（使用 Windows Azure 门户或远程桌面）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T17:34:09.083

Steve Marx（又名 smarx）开发了一个名为[WazMonkey](http://blog.smarx.com/posts/wazmonkey-chaos-monkey-for-windows-azure)的工具。它是由 netflix 团队开发的工具[Chaos Monkey](http://techcrunch.com/2012/07/30/netflix-open-sources-chaos-monkey-a-tool-designed-to-cause-failure-so-you-can-make-a-stronger-cloud/)的天蓝色对应物，用于模拟亚马逊 AWS 中的损坏实例。WazMonkey 会随机终止 Windows azure 云服务的实例，以测试云应用程序的弹性。

# jquery - 在 jQuery 中停止递归动画

> ID：10336004
> 
> 赞同：2
> 
> 时间：2012-04-26T14:55:41.490
> 
> 标签：jquery, jquery-ui, jquery-animate

我有一个递归动画来使屏幕上的文本改变颜色。当 div 失去可见性时，我想要一些机制来停止这个动画。在我的实际站点中，这是在一个对话框中。我想在对话框关闭时停止所有动画。我尝试使用`$.stop()`，但我认为这不会在递归调用期间中断调用堆栈。

这是我正在做的事情的要点：

javascript:

```
function rainbow() {
    var hue = 'rgb(' + (Math.floor(Math.random() * 256)) + ',' + (Math.floor(Math.random() * 256)) + ',' + (Math.floor(Math.random() * 256)) + ')';
    $('#rainbow ul li').animate({
        color: hue
    }, 500, rainbow);
}
$(function() {
    rainbow();

    $("#stop").click(function() {

        $('#rainbow ul li').stop()

    });
});​ 
```

html

```
<div id="rainbow">
    <ul>
        <li>Apple</li>
        <li>Microsoft</li>
        <li>SUN</li>
    </ul>
</div>
<button id="stop" type="reset">Stop</button> 
```

​</p>

[http://jsfiddle.net/cRar7/12/](http://jsfiddle.net/cRar7/12/)

单击停止按钮不执行任何操作，动画继续。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T15:00:16.660

看看[.stop的第一个参数](http://api.jquery.com/stop/)

> .stop( [clearQueue] [, jumpToEnd] )
> 
> **clearQueue**一个布尔值，指示是否也删除排队的动画。默认为假。

所以：

```
$('#rainbow ul li').stop(true); 
```

应该管用。

[http://jsfiddle.net/cRar7/14/](http://jsfiddle.net/cRar7/14/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T14:59:04.453

好吧，你可以使用一个标志来做到这一点：

```
var shouldStop = false;
function rainbow() {
    if(shouldStop) return;
    // rest of animation code here
}

$("#stop").click(function() {
    shouldStop = true;
    $('#rainbow ul li').stop();
}); 
```

这是演示：http: [//jsfiddle.net/cRar7/13/](http://jsfiddle.net/cRar7/13/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T15:03:34.637

如果您设置一个间隔而不是设置动画自递归，那没问题。将您的脚本更改为：

```
function rainbow() {
    var hue = 'rgb(' + (Math.floor(Math.random() * 256)) + ',' + (Math.floor(Math.random() * 256)) + ',' + (Math.floor(Math.random() * 256)) + ')';
    $('#rainbow ul li').animate({
        color: hue
    }, 500);
}
$(function() {
    var ani=setInterval(rainbow,500);

    $("#stop").click(function() {

        clearInterval(ani);

    });
}); 
```

# java - 在 java4 和 java5 中使用 volatile 关键字

> ID：10336006
> 
> 赞同：6
> 
> 时间：2012-04-26T14:55:44.127
> 
> 标签：java

`volatile keyword`java4和java5以后使用有什么区别？

并与此相关，

> 非原子变量（long/double）的读/写操作在声明为 volatile 时是原子的。

这对 java4 也是如此**还是**从 java5 开始有效？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T17:03:59.970

是，有一点不同。
编译器可以根据之前的任何读取或写入对 Java 4`volatile`进行重新排序，从而导致微妙的并发错误，例如无法实现`double check`锁定（单例非常常见的习语）。
这在 Java 5.0 中得到了修复，它扩展了`volatile`无法针对任何后续读取或写入重新排序的语义，并引入了新的内存模型。您可以阅读此[Double Checked Locking](http://www.cs.umd.edu/~pugh/java/memoryModel/DoubleCheckedLocking.html)例如参考

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T15:01:00.763

该站点很好地解释了这些差异：[http ://www.javamex.com/tutorials/synchronization_volatile.shtml](http://www.javamex.com/tutorials/synchronization_volatile.shtml)

他们还在一个单独的页面上解释了 Java 5 中 volatile 的行为：[http ://www.javamex.com/tutorials/synchronization_volatile_java_5.shtml](http://www.javamex.com/tutorials/synchronization_volatile_java_5.shtml)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-04T15:01:26.717

人们在回答我的问题回答第一部分时提供了很好的观点和参考。

具体到问题的第二部分，这是我在某个论坛上读到的：

> 声明为 long 的 volatile 是原子的（也是 Java 5 之前的版本），因为它保证（对于所有 JVM 实现）直接读取或写入主内存而不是两个 32 位寄存器。

和

> 在 Java 5 之前，volatile*应该*为 long 和 double 提供这样的保证。然而在实践中事​​情并没有这样发展，并且实现经常违反这个保证。我记得这个问题似乎在 JDK 1.4 附近得到了解决，但是由于他们仍在研究整个内存模型，所以直到 JDK 5 宣布了新规则和内存时，他们才真正做出任何明确的声明。保证实际上意味着什么。

这是来自**Java语言规范，第二版**：

> 17.4 double 和 long 的非原子处理
> 
> 对 volatile 变量的加载、存储、读取和写入操作是原子的，即使变量的类型是 double 或 long。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-15T12:18:51.460

**在 java4 和 java5 以后使用 volatile 关键字有什么区别？**

JDK5 之前的 JMM 被破坏并且对 JDK4 使用 volatile 可能无法提供预期的结果。有关更多信息，请查看： [http ://www.ibm.com/developerworks/library/j-jtp02244/](http://www.ibm.com/developerworks/library/j-jtp02244/)

**非原子变量（long/double）的读/写操作在声明为 volatile 时是原子的。**

long/double 的读/写作为两个单独的 32 位操作发生。对于两个线程，一个线程可能读取了高 32 位，而另一个线程读取了 long/double 变量的低 32 位。简而言之，长读/写不像其他原语那样是原子操作。对 long/double 使用 volatile 应该提供这样的保证，因为 volatile 的指令不会被编译器重新排序以进行 volatile 读/写，并且 volatile 还提供可见性保证。但同样，它可能不适用于 JDK 4 或更早版本。

# json - 我如何将 json 值转换为键

> ID：10336009
> 
> 赞同：0
> 
> 时间：2012-04-26T14:55:52.023
> 
> 标签：json, underscore.js

有没有更快的方法来改变它：

```
[
    { name: 'name1', value: 'value1' },
    { name: 'name2', value: 'value2' },
    { name: 'name3', value: 'value3' },
    ...
] 
```

进入这个：

```
{
    name1: value1,
    name2: value2,
    name3: value3,
    ...
} 
```

无需手动循环和填充对象？下划线库有办法做到这一点吗？它已经在我们的应用程序中，因此无需额外费用即可使用。

目前我有一个手动操作，但我不确定这是我能拥有的最佳性能。

```
 var data = [];      // see the array above
    var result = {};
    for(var i = 0; i < data.length; i++)
    {
        var o = data[i];
        result[o.name] = o.value;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:05:34.537

我认为没有更快的方法。使用下划线有一种更短的方法，但几乎可以肯定它比你的循环慢：

```
var result = _.reduce(data, function(r,o) { r[o.name] = o.value; return r; }, {}); 
```

# sql - 如何表达一个 2 阶段循环的 T-SQL SELECT 查询？

> ID：10336010
> 
> 赞同：1
> 
> 时间：2012-04-26T14:55:52.547
> 
> 标签：sql, sql-server, sql-server-2008

这是一个 SQL 专家的问题！

我正在使用 SQL SERVER 2008 R2 Express。

我有一个名为`[myTable]`由 2 种类型的记录组成的表。

第一种记录是主记录，第二种是`[Relative]`记录。

每个主记录可能有多个相关记录。

我想掌握`SLELECT TOP 10 * FROM [myTable]`记录，以及每个记录的联合子记录。`SELECT TOP 4``[Relative]`

每条记录都有一`[PKID] NO NULL IDENTITY(1,1) PRIMARY KEY CLUSTERED`列。

我想我需要这样的东西：

```
SELECT TOP 10 * FROM [myTable]  WHERE [Relative]=0 
UNION
For each (SELECT TOP 10 [PKID] as Master, * FROM [myTable] WHERE [Relative]=0 )
{SELECT TOP 4 * FROM [myTable] WHERE [Relative] = Master} 
```

**我应该如何更正查询以实现我的目标？**

我有一个次要问题，我怀疑是否有一个简单的解决方案：

如专栏所述，相对记录有两种形式`[IsImportant]`。

有没有办法确保每个主记录只选择一个重要的相关记录？

如果主记录的相对记录少于 4 个，而其中只有 1 个很重要，是否有办法跳过主记录？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T15:03:14.023

**编辑**

这是对您要求的正确解释吗？

[myTable] 有 3 个相关字段...

*   PKID ：每行的唯一标识符
*   relative : 行父级的 PKID（如果行没有父级 [AKA - a master]，则为 0）
*   IsImportant : 0/1 标志

    1.  返回不超过 10 条主记录
    2.  对于每个主记录，返回不超过 4 个相关记录
    3.  在 4 条相关记录中，返回不超过 1 条 IsImportant 记录
    4.  跳过任何少于 4 个亲属的 master（将所有 IsImportant 视为仅 1 个）

问题：
- 如果一个master有3个相关记录，并且没有一个是isImportant，还跳过吗？
- 如果一个master有4条相关记录，并且超过1条是isImportant，还跳过吗？

最佳猜测答案...

```
WITH
  master_metadata
AS
(
  SELECT
    relative         AS MasterID,
    COUNT(*)         AS Relatives,
    SUM(isImportant) AS IsImportantRelatives
  FROM
    [myTable]
  WHERE
    relative <> 0
  GROUP BY
    relative
  HAVING
    COUNT(*) - SUM(isImportant) + MAX(isImportant) >= 4
)
,
  master
AS
(
  SELECT TOP 10
    NULL AS sequence_id,
    [myTable].*,
    [master_metadata].Relatives,
    [master_metadata].IsImportantRelatives
  FROM
    [myTable]
  INNER JOIN
    [master_metadata]
      ON [master_metadata].MasterID = [myTable].PKID
  ORDER BY
    [myTable].Selector
)
,
  relative
AS
(
  SELECT
    ROW_NUMBER() OVER (PARTITION BY relative, IsImportant ORDER BY Selector)  AS sequence_id,
    *
  FROM
    [myTable]
)
,
  data
AS
(
  SELECT
    PKID AS MasterID,
    *
  FROM
    [master]

  UNION ALL

  SELECT
    [master].PKID AS MasterID,
    [relative].*, Relatives, IsImportantRelatives
  FROM
    [master]
  INNER JOIN
    [relative]
      ON  ([relative].relative = [master].PKID)
      AND (  ([relative].isImportant = 1 AND [relative].sequence_id  = 1)
          OR ([relative].isImportant = 0 AND [relative].sequence_id <= 3)
          OR ([relative].isImportant = 0 AND [relative].sequence_id  = 4 AND [master].IsImportantRelatives = 0)
          )
)

SELECT
  *
FROM
  [data]
ORDER BY
  MasterID,
  CASE WHEN MasterID = PKID THEN 0 ELSE 1 END,
  IsImportant DESC,
  relative 
```

# c++ - Dirent.h - 获取具有特定扩展名的文件的字符串

> ID：10336011
> 
> 赞同：4
> 
> 时间：2012-04-26T14:55:52.747
> 
> 标签：c++

有一些问题试图想出一个好方法来让一个目录遍历器只选择 wav 文件并专门返回这些文件的字符串，例如只是 wav 文件。我可以停止 dirent.h 在子目录中查找，我很确定我只需要一个 if 语句，它只允许字符串中带有 .wav 的文件

到目前为止，我的代码看起来像这样，我只是扩展了一些我在 wiki 页面上看到的头文件示例：

```
ifstream fin;
string dir, filepath;
DIR *dp;
struct dirent *dirp;
struct stat filestat;

cout << "dir to get files of: " << flush;

getline(cin, dir);

dp = opendir( dir.c_str() );

if (dp == NULL){

    cout << "Error(" << errno << ") opening " << dir << endl;

    }

while ((dirp = readdir( dp ))){

    filepath = dir + "/" + dirp->d_name;

    if (stat( filepath.c_str(), &filestat )) continue;
    if (S_ISDIR( filestat.st_mode ))         continue;

    fin.open( filepath.c_str() );

    stringVec.push_back(filepath);

    fin.close();

    }

closedir( dp );

for(int i=0;i<stringVec.size();i++){
    cout << stringVec[i] << endl;

} 
```

任何帮助表示赞赏，我不是超级困难 - 但到目前为止我还无法弄清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T15:36:11.550

[我在github](https://github.com/paulrehkugler/ExtensionSearch)上有您正在寻找的解决方案。

# database - Magento 导入客户错误...现在应用程序本身没有运行？

> ID：10336017
> 
> 赞同：0
> 
> 时间：2012-04-26T14:56:32.840
> 
> 标签：database, magento, import, backup

我的 magento 网站在一个小时前运行良好，现在出现错误，因为我**使用 REPLACE Esisting Complex Data 模式从 csv 文件导入客户数据，**因为我们想要更新一些客户数据。

但是当我尝试从现有客户的前端将产品添加到购物车中时，它给了我错误：

```
Item (Model_Customer_Customer) with the same id "11" already exist

exception 'Exception' with message 'Item with the same id "11" already exist' in /htdocs/localhost/magento/lib/Varien/Data/Collection.php:373 
```

有人可以指导我现在该怎么办吗？

或者告诉我如何在每天备份数据库时恢复到原始数据库。所以我昨天备份了我网站的数据库。

那么如何才能恢复到昨天的数据库呢？

请帮助我....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:03:50.723

还原非常简单，创建一个新数据库并将其命名为另一个名称，因此假设您当前的数据库是 magento1，使用您的备份数据创建 magento2，并确保您当前的 magento db 用户有权访问新数据库。

现在编辑 app/etc/local.xml 更改`<dbname><![CDATA[magento1]]></dbname>`为`<dbname><![CDATA[magento2]]></dbname>`，清除所有缓存，您的站点现在应该指向旧数据。

这是一种快速修复方法，但看起来这就是您现在正在寻找的方法。

# android - 安装 Android SDK 更新时出现问题

> ID：10336021
> 
> 赞同：0
> 
> 时间：2012-04-26T14:56:46.857
> 
> 标签：android, sdk

我已经下载了 Android SDK 管理器，在选择了我要安装的更新、工具、平台后，它会显示消息：“正在下载 sdk 平台 android 3.2”，然后出现一条错误消息，显示“找不到文件 c:\program files\android\ android-adk\temp\sdk platform android 3.2.zip (Access is denied)' 不明白这与文件权限有什么关系，因为临时文件夹中没有安装 zip 文件！！！任何帮助，将不胜感激。

1.  我正在运行 winZip 评估版
2.  所有其他程序都已关闭
3.  文件权限：只读临时文件夹中的文件。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T15:04:27.117

您需要以管理员身份运行它。通过右键单击和打开您的`Eclipse`或。那应该工作。`SDK manager``run as administrator`

# mysql - MySQL GROUP_CONCAT 与 Nulls

> ID：10336022
> 
> 赞同：35
> 
> 时间：2012-04-26T14:56:49.103
> 
> 标签：mysql, group-concat

是否可以选择让 MySQL 的 Group_Concat 函数包含空值？

考虑我的源表中的以下示例：

```
userId, questionId, selectionId
7, 3, NULL
7, 4, 1
7, 5, 2 
```

当我使用 GROUP_CONCAT 查询选择表时，我得到以下信息：

```
7, 4=1,5=2 
```

我想得到以下信息：

```
7, 3=NULL,4=1,5=2 
```

作为参考，我的查询如下所示：

```
Select userId, GROUP_CONCAT(CONCAT(questionId, '=', selectionId))
From selection
Group by userId; 
```

我也尝试像这样添加一个 IFNULL ：

```
Select userId, GROUP_CONCAT(IFNULL(CONCAT(questionId, '=', selectionId), 'NULL'))
From selection
Group by userId; 
```

但这产生了以下结果：

```
7, NULL,4=1,5=2 
```

注意 - 我忘记包括另一种复杂性。selectionId 是另一个表的外键。我对 selection_text 表使用左外连接。我的真实查询包括该表中的字段（这些字段解析为 NULL，因为 selectionId 为空）。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-04-26T15:02:21.833

您应该只是`IFNULL`可以的列`NULL`；

```
SELECT userId, GROUP_CONCAT(CONCAT(questionId, '=', 
                 IFNULL(selectionId, 'NULL')))
FROM selection
GROUP BY userId; 
```

演示[在这里](http://sqlfiddle.com/#!2/8168f/4)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-26T15:01:03.873

您应该直接在值上使用`IFNULL`or ：`COALESCE``selectionId`

```
SELECT
  userId,
  GROUP_CONCAT(CONCAT(questionId, '=', COALESCE(selectionId, 'NULL')))
FROM selection
GROUP BY userId; 
```

# ibm-mq - 使用哪个版本的 websphere 客户端？

> ID：10336024
> 
> 赞同：2
> 
> 时间：2012-04-26T14:56:54.463
> 
> 标签：ibm-mq

Websphere MQ 的版本是 7.0.1，我想使用 WebSphere MQ 客户端来实现消息传递和队列。我应该使用哪个版本的 WebSphere MQ 客户端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T18:09:35.453

所有版本的 WebSphere MQ 客户端都可以与所有版本的 WebSphere MQ 队列管理器通信。如果您使用最新版本，您将受益于最新的修复和性能增强，但在功能方面，您会受到后级 QMgr 的限制。您不会*丢失*使用与 QMgr 相同版本的客户端获得的任何功能，您只是无法使用 v7.1 客户端从 v7.0 QMgr 中提取 v7.1 功能。

通常，使用最新的客户端。

也就是说，这是您的下载链接：

[WMQ 客户端 v7.1](http://ibm.co/SupptPacMQC71)
[WMQ 客户端 v7.0](http://ibm.co/SupptPacMQC7)

唯一的问题是客户端的差异。要配置客户端，请使用与客户端版本匹配的信息中心。要查看 QMgr 具有哪些功能，请使用与 QMgr 匹配的信息中心。

[WMQ V7.1 信息中心](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r1/index.jsp)
[WMQ V7.0 信息中心](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0/index.jsp)

# java - 来自 Windows 7 语音识别的 API？

> ID：10336029
> 
> 赞同：0
> 
> 时间：2012-04-26T14:57:03.567
> 
> 标签：java, .net, windows-7, speech-recognition

Windows 7语音识别是否有任何api（用于.net或java）？

我想从 Windows 7 自定义这个惊人功能的某些方面

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T16:20:55.193

Windows 中的语音识别可以通过 SAPI C++ api 或 System.Speech .NET 命名空间进行编程。

几年前在[http://msdn.microsoft.com/en-us/magazine/cc163663.aspx](http://msdn.microsoft.com/en-us/magazine/cc163663.aspx)上发表了一篇非常好的文章。这可能是迄今为止我发现的最好的介绍性文章。它有点过时了，但很有帮助。（AppendResultKeyValue 方法在 beta 之后被删除。）

有关 .NET 的更多信息，请参阅[SAPI 和 Windows 7 问题](https://stackoverflow.com/questions/4213035/sapi-and-windows-7-problem)以及[System.Speech.Recognition 和 Microsoft.Speech.Recognition 之间的区别是什么？](https://stackoverflow.com/questions/2977338/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-22T11:55:23.213

[CMU Sphinx](http://cmusphinx.sourceforge.net/)是用 C 语言编写的库。它是一个用于语音识别的开源工具包。

Sphinx4(wrapper) 是一个用 Java 编写的可调整、可修改的识别器

# iphone - iPhone 在 NSDate 中调整时间

> ID：10336030
> 
> 赞同：2
> 
> 时间：2012-04-26T14:57:04.233
> 
> 标签：iphone, nsstring, nsdate, substring, nsdateformatter

我使用列出时间错误的 RSS 解析器。东部标准时间显示比 RSS 事件的实际时间晚 1 小时。所以，我想弄清楚如何在代码中调整它，以便在 TableView 的 cellForIndexAtPathRow 方法中，它会显示正确的时间。这是我正在使用的代码：

```
NSDateFormatter * dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
[dateFormatter setTimeStyle:NSDateFormatterMediumStyle];
[dateFormatter setDateStyle:NSDateFormatterMediumStyle];
NSString *articleDateString = [dateFormatter stringFromDate:entry.articleDate]; 
```

entry.articleDate 来自前面的 RSS 解析器，它返回：

```
NSString *articleDateString = [item valueForChild:@"updated"];        
    NSDate *articleDate = [NSDate dateFromInternetDateTimeString:articleDateString formatHint:DateFormatHintRFC3339]; 
```

您认为仅取字符串的 HH 部分并从中减去 1 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T03:28:24.563

您可以简单地从解析的日期中减去一个小时，如下所示：

```
NSDateFormatter * dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
[dateFormatter setTimeStyle:NSDateFormatterMediumStyle];
[dateFormatter setDateStyle:NSDateFormatterMediumStyle];
NSDate *correctedDate = [entry.articleDate addTimeInterval:-3600*1];
NSString *articleDateString = [dateFormatter stringFromDate:correctedDate]; 
```

但是，我认为真正的问题在于您的 RSS 解析器。我打赌它正在转换为您当地的时区。但是，没有看到实际`articleDateString`价值，我无法确定。

# c++ - 从端口安装的 openCV (2.3.1) 的 Xcode (4.3.2) 问题

> ID：10336033
> 
> 赞同：2
> 
> 时间：2012-04-26T14:57:11.047
> 
> 标签：c++, xcode, opencv, osx-lion, macports

我在使用从 mac 端口安装的 openCV 2.3.1 时遇到问题。对于 xcode 项目的安装和配置，我使用[了 Salem 博客中的这篇文章](http://salemsayed.me/?p=240)。帖子中显示的示例代码效果很好。但是，如果我将 mail.cpp 文件更改为仅显示图像，则会失败。这是我的示例代码：

```
#include <iostream>

#include <opencv2/opencv.hpp>
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>

int main (int argc, const char * argv[])
{
    cv::Mat img = cv::imread("Lena.jpg");
    cv::namedWindow("Image");
    cv::imshow("Image", img);
} 
```

我得到的错误如下：

```
OpenCV Error: Bad flag (parameter or structure field) (Unrecognized or unsupported array type) in cvGetMat, file /opt/local/var/macports/build/_opt_local_var_macports_sources_rsync.macports.org_release_tarballs_ports_graphics_opencv/opencv/work/OpenCV-2.3.1/modules/core/src/array.cpp, line 2482
terminate called throwing an exception(lldb) 
```

现在我有点困惑，因为我对 c++ 也不太熟悉。

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T17:59:07.770

有可能是由于`imread()`无法在磁盘上找到图像而导致崩溃：

```
cv::Mat img = cv::imread("Lena.jpg");
if (!img.data)
{
     // print error and abort execution
} 
```

除非你开始安全地编码，否则你永远不会知道。

# extjs - 在 Ext.Msg.confirm 之后在另一个窗口中打开 url

> ID：10336040
> 
> 赞同：0
> 
> 时间：2012-04-26T14:57:44.720
> 
> 标签：extjs, confirmation

```
 floTrackBtn: {
            tap:            
            function() {
                window.open('http://www.flotrack.org/'); //WORKS
                Ext.Msg.confirm("", "Are you sure you want to navigate to Flotrack?", 
                    function(answer){
                        if (answer == 'yes'){
                            window.open('http://www.flotrack.org/'); //DOES NOT WORK
                        }                           
                    });
            }
        } 
```

第一个 window.open 有效，但在确认消息框内时无效。任何帮助都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T06:35:13.020

我尝试在 Chrome 中运行您的代码。该代码*绝对正确*，并且运行良好。

当您第一次运行此代码时，您的 chrome 浏览器将阻止弹出窗口，因此您需要选择“ `Always allow pop-up from this page`”。

当您选择该选项时，您将获得您的 o/p。

```
 ...
 ...
 {
    xtype:'button',
    text:'CLick me',
    centered:true,
    listeners : {
         tap: function() {
            window.open('http://www.flotrack.org/'); //WORKS
            Ext.Msg.confirm("", "Are you sure you want to navigate to Flotrack?", 
                               function(answer){
                                     if (answer == 'yes'){
                                        window.open('http://www.flotrack.org/'); // THIS ALSO WORKS FINE !!
                                     }                           
                            });
                        }
                    }
                }
 ...
 ... 
```

样品 o/p :-

![在此处输入图像描述](../Images/5d218582b2dfda49e30ed9605ef18949.png)

当我选择是选项时，它会打开一个带有给定 URL 的弹出窗口。

![在此处输入图像描述](../Images/510e654338a5aae0cd49eb462bc7b7b6.png)

# excel - 截断工作表名称时出错

> ID：10336042
> 
> 赞同：1
> 
> 时间：2012-04-26T14:57:49.540
> 
> 标签：excel, vba

我正在使用以下方法命名工作表：

```
 arrayCollabName = Array("CBDeltaBlockStatus_SAP03_to_Delta01", "CBDeltaBlockStatus_SAP03_to_Delta02", "CBDeltaDeliveryInformation_SAP03_to_Delta01") 

            If Len(arrayCollabName(idx)) > 31 Then
                 ActiveSheet.Name = Left(arrayCollabName(idx), 31)
            Else
                 ActiveSheet.Name = arrayCollabName(idx)
            End If 
```

在数组中，当名称被截断为 31 个字符并且 VB 抛出错误“无法将工作表重命名为与另一个工作表、引用的对象库或由 visualbasic 引用的工作簿相同的名称”时，数组中的第一个和第二个名称相似。

任何方式我都可以做到这一点而不会出错，并将工作表命名为**CBDeltaBlock_SAP03_to_Delta01**和**CBDeltaBlock_SAP03_to_Delta02**或任何所需的名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T16:21:10.803

这是一个更改工作表名称（如果已存在）的示例。

```
Option Explicit

Sub Sample()
    Dim i As Long
    Dim strShName As String

    strShName = "BlahBlah"

    Sheets.Add

    Do Until DoesSheetExist(strShName) = False
        i = Int((1000 * Rnd) + 1)
        strShName = strShName & i
    Loop

    ActiveSheet.Name = strShName
End Sub

Function DoesSheetExist(ByVal strSheetName As String) As Boolean
    Dim ws As Worksheet
    On Error Resume Next
    Set ws = Sheets(strSheetName)
    On Error GoTo 0
    If Not ws Is Nothing Then DoesSheetExist = True
End Function 
```

上述方法将在工作表末尾添加一个随机数。如果您想按升序排列，请使用以下代码。

```
Option Explicit

Sub Sample()
    Dim i As Long
    Dim strShName As String

    strShName = "BlahBlah"

    Sheets.Add

    If DoesSheetExist(strShName) = True Then
        i = 1
        Do Until DoesSheetExist(strShName & i) = False
            i = i + 1
        Loop
        strShName = strShName & i
    End If

    ActiveSheet.Name = strShName
End Sub

Function DoesSheetExist(ByVal strSheetName As String) As Boolean
    Dim ws As Worksheet
    On Error Resume Next
    Set ws = Sheets(strSheetName)
    On Error GoTo 0
    If Not ws Is Nothing Then DoesSheetExist = True
End Function 
```

**注意**：上面的代码只是示例代码。错误处理并没有包含在上面的代码中，不用说错误处理是必须的:)

# objective-c - 从 View 引用 ViewController 中的数组时出错

> ID：10336045
> 
> 赞同：0
> 
> 时间：2012-04-26T14:58:17.357
> 
> 标签：objective-c, ios, xcode

我在 ExperimentsViewController.m 中有一个 NSMutable 数组函数，并且想将该数组调用到 ExercisesView.m 中。

练习视图控制器.m

```
- (NSMutableArray*)qBlock{

NSURL *url = [NSURL URLWithString:@"http://someaddress.php"];
NSError *error;
NSStringEncoding encoding;
NSString *response = [[NSString alloc] initWithContentsOfURL:url 
                                                usedEncoding:&encoding 
                                                       error:&error];
const char *convert = [response UTF8String];
NSString *responseString = [NSString stringWithUTF8String:convert];
NSMutableArray *sample = [responseString JSONValue];

return sample;} 
```

练习视图.m：

```
 - (id) initWithParentViewController:(ExercisesViewController *)parent {
if ((self = [super init])) {
    // Update this to initialize the view with your own frame size
    [self setFrame:CGRectMake(0, 0, 320, 460)];
    refParentViewController = parent;
    NSMutableArray *qnBlock = [refParentViewController:qBlock];} 
```

但是链接参考似乎有一些错误。我只是直觉地感觉到它的语法问题。任何指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T15:01:40.897

这只是一个语法错误。尝试这个：

```
NSMutableArray *qnBlock = [refParentViewController qBlock]; 
```

# wpf - 将画布导出到 xps vb

> ID：10336046
> 
> 赞同：0
> 
> 时间：2012-04-26T14:58:18.510
> 
> 标签：wpf, vb.net, xps

嗨，今天我尝试将画布导出到文件。首先，我尝试将其导出为 png 并且效果很好，一切看起来都与画布上的一样。

之后，我修改了代码以导出到 xps 文件。

```
 Dim thePack As IO.Packaging.Package = IO.Packaging.Package.Open(path.LocalPath,IO.FileMode.Create)
    Dim doc As New Xps.Packaging.XpsDocument(thePack)
    Dim writer As Xps.XpsDocumentWriter = Xps.Packaging.XpsDocument.CreateXpsDocumentWriter(doc)
    writer.Write(mycanvas)
    doc.Close()
    thePack.Close() 
```

代码运行良好，但它不会生成与我的画布/png 完全相同的视图。

是否有任何功能可以更改编写器的输出？看起来视觉对象比它们内部的文本移动得更低。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T14:35:59.230

我不知道为什么，但 dropshadow 给了我一个问题。

```
 <Border Grid.Row="1" Grid.Column="0" HorizontalAlignment="Left" VerticalAlignment="Top" Name="rand" Style="{DynamicResource BorderStyle}" >
           <Border.Effect>
               <DropShadowEffect  Direction="45" Color="#DDDDDD"/>
           </Border.Effect>
       </Border> 
```

从我的用户控件中删除border.effect后，xps文件完美生成。

```
 <Border Grid.Row="1" Grid.Column="0" HorizontalAlignment="Left" VerticalAlignment="Top" Name="rand" Style="{DynamicResource BorderStyle}" >
    </Border> 
```

# r - 查找并合并字符串与上面的行

> ID：10336047
> 
> 赞同：0
> 
> 时间：2012-04-26T14:58:19.870
> 
> 标签：r, dataframe

我有一个数据框，只有一列，我想通过只选择某些行将它变成两列，这里......让我告诉你

我想从这里出发

```
 V1   
1    one
2    two
3    &&three
4    four
5    &&five
6    six 
```

对此

```
 V1      V2
1    one     NA
2    two     three
3    four    five
4    six     NA 
```

因此，具有 a 的那些`&&`被放置在第二列，在上一行的右侧（希望这是有道理的）。有什么办法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T15:20:21.323

这是我的方法：

读入数据：

```
dat <- read.table(text="       V1   
1    one
2    two
3    &&three
4    four
5    &&five
6    six", head=T, stringsAsFactors = FALSE) 
```

重塑：

```
j <- grep("&&", dat$V1)                                 #find && rows
l <- j-1                                                #find rows above && rows
dat$V2 <- rep(NA, nrow(dat))                            #create NA vector
dat$V2[l] <- gsub("&&", "", dat[grep("&&", dat$V1), 1]) #see what it does :)
dat2 <- dat[-j, ]                                       #get rid of the && rows
rownames(dat2) <- 1:nrow(dat2)                          #rename rows 
```

产生：

```
 V1    V2
1  one  <NA>
2  two three
3 four  five
4  six  <NA> 
```

# java - 从 BaseAdapter 中的活动调用函数

> ID：10336050
> 
> 赞同：0
> 
> 时间：2012-04-26T14:58:32.817
> 
> 标签：java, android, dialog

谁能告诉我如何调用`Activity`扩展类内部的函数`BaseAdapter`？

//我的活动

```
import java.util.ArrayList;
import java.util.List;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsManager;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.Button;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

public class MyPage extends Activity {

    private Activity mContext;
    Button createForm;
    Button ConfExpandRegion, Cancelb;
    String ExpandMsg, CancelMsg;
    boolean b;
    MyCaseClass mycase;
    TextView tvCase;
    AlertDialog alertDialog;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mypage);

        // Moving to anther activity
        createForm = (Button) findViewById(R.id.creat_new_formbtn);
        createForm.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {

                Intent j = new Intent(MyPage.this, CreateNewForm.class);
                startActivity(j);

            }
        });

        // ============================================================================================
        // for list

            ListView list = (ListView) findViewById(R.id.mypage_list);
            list.setClickable(true);

            final List<MyCaseClass> listOfPhonebook = new ArrayList<MyCaseClass>();

            MyCasesListAdapter adapter = new MyCasesListAdapter(this, listOfPhonebook);

            for (MyCaseClass m : All_Static.getMyCaseList())
                adapter.add(new MyCaseClass(m));

            // after fill the adapter.. assign the list to the adapter
            list.setAdapter(adapter);

            list.setOnItemClickListener(new OnItemClickListener() {

                public void onItemClick(AdapterView<?> arg0, View view, int position, long index) {
                    System.out.println("sadsfsf");
                ;
                }
            });
            list.setAdapter(adapter);
        // ========================================================================================

    }

    public void sendSMS(String number, String msg) throws Exception {
        if (!b) {
            SmsManager smsManager = SmsManager.getDefault();
            smsManager.sendTextMessage(number, null, msg, null, null);
        }
        b = true;
    }

    // ========================================================================

    public void ShowingDialog(){
        final AlertDialog alertDialog = new AlertDialog.Builder(this).create();
        alertDialog.setTitle("Conformation");
        alertDialog.setMessage("Are you sure you want to Expand Report Region?");
        alertDialog.setButton("Yes", new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int which) {
                  //some codes

                    }
                   ConfExpandRegion.setEnabled(false);
               }

            });

            alertDialog.setButton2("No", new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int which) {
                // here you can add functions
                // Do nothing 

               }
            });

            alertDialog.setIcon(android.R.drawable.ic_dialog_alert);
            alertDialog.show();
    }

} 
```

//====== 我的baseadapter ===========

```
import java.util.List;

import android.content.Context;

import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.Button;
import android.widget.TextView;

public class MyCasesListAdapter extends BaseAdapter {
    private Context context;

    private List<MyCaseClass> listOfCases;

    // TODO delete it not imp.
    public MyCasesListAdapter() {

        super();

    }

    public MyCasesListAdapter(Context context, List<MyCaseClass> listPhonebook) {
        this.context = context;
        this.listOfCases = listPhonebook;
    }

    public int getCount() {
        return listOfCases.size();
    }

    public Object getItem(int position) {
        return listOfCases.get(position);
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup viewGroup) {
        MyCaseClass entry = listOfCases.get(position);

        if (convertView == null) {

            LayoutInflater inflater = (LayoutInflater) context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = inflater.inflate(R.layout.mypage_row, null);

        }

        // this is row items..
        // Set the onClick Listener on this button
        Button ConfExpandRegion = (Button) convertView
                .findViewById(R.id.expand);
        Button Cancelb = (Button) convertView.findViewById(R.id.cancelCase);
        TextView tvCase = (TextView) convertView.findViewById(R.id.mypage_name);

        // To be a clickable button
        ConfExpandRegion.setFocusableInTouchMode(false);
        ConfExpandRegion.setFocusable(false);
        // For Dialog

        ConfExpandRegion.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

            }
        });

        // To be a clickable button
        Cancelb.setFocusableInTouchMode(false);
        Cancelb.setFocusable(false);
        Cancelb.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                MyCaseClass entry = (MyCaseClass) v.getTag();
                listOfCases.remove(entry);
                // listPhonebook.remove(view.getId());
                notifyDataSetChanged();
            }
        });

        // Set the entry, so that you can capture which item was clicked and
        // then remove it
        // As an alternative, you can use the id/position of the item to capture
        // the item
        // that was clicked.
        ConfExpandRegion.setTag(entry);
        Cancelb.setTag(entry);

        // btnRemove.setId(position);

        return convertView;
    }

    public void onClick(View view) {
        MyCaseClass entry = (MyCaseClass) view.getTag();
        listOfCases.remove(entry);
        // listPhonebook.remove(view.getId());
        notifyDataSetChanged();

    }

    private void showDialog(MyCaseClass entry) {
        // Create and show your dialog
        // Depending on the Dialogs button clicks delete it or do nothing
    }

    public void add(MyCaseClass myCaseClass) {
        // TODO Auto-generated method stub
        listOfCases.add(myCaseClass);
    }

} 
```

我想在 BaseaAdapter 中调用 ShowingDialog，因为 BaseAdapter 不属于 AlertDialog！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T15:12:10.713

只需更改您的：

```
private Context context; 
```

至

```
private MyPage myPage; 
```

然后在 showDialog 调用

```
myPage.ShowingDialog(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:54:19.467

According to your question AlertDialog doesn't belong to BaseAdapter. Include your method (its Java not C so is not called function) in the BaseAdapter class. To use any class/method/variable from other nested classes you could put the name of the class and use **this** : `MyCasesListAdapter.this.ShowingDialog()`. However, you are calling a method that doesn't depend of any variable unless your button. Declare it public static and the use it MyCasesListAdapter.ConfExpandRegion. Also you can create a class MyDialog, for example, and implement the method there, like this:

```
public MyDialog(Context context, String title,  String message) {
    super(context);
    this.title = title;
    this.message = message;

}
    public void showMessage( String title, String message) {
    AlertDialog.Builder dialogBox = new AlertDialog.Builder(
            super.getContext());

    dialogBox.setTitle("Hello world");

    dialogBox.setPositiveButton("OK", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {

            dialog.cancel();

        }
    });
    dialogBox.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
            dialog.cancel();

        }
    });

    dialogBox.show();

}
} 
```

And you can pass anything as parameter on the constructor or in the method, any Object.

Call it on your `BaseAdapter`

`new MyDialog(title, message).showmessage(title, message);`

or

```
Mydialog mDialog =  new new MyDialog(title, message);
mDialog.showmessage(title, message); 
```

and if you are concerned to enter your entry object pass it as parameter of the method.

your question isn't very clear. Hope this helps anyway,

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T15:58:10.713

是的，您可以尝试 context.function_name() 其中“context”是您从活动传递到基本适配器的上下文。您可以从中进行广播，开始活动等几件事...

# macros - 创建 JIRA 搜索请求 excel 视图插件和 velocimacro 以格式化输出

> ID：10336052
> 
> 赞同：1
> 
> 时间：2012-04-26T14:58:41.583
> 
> 标签：macros, jira, velocity, jira-plugin

我需要创建一个搜索请求 excel 视图插件，其中输出是按问题类型分组的某些标题下的问题列表。到目前为止，我有一个插件模块项目等，所以我需要帮助的是这种输出的速度宏/模板

据我所知，我需要为问题创建自己的宏，通过访问 $issue.issueType.name 来订购问题并在 issue-table-issue.vm 中使用此宏

我对 JIRA 和插件开发完全陌生，所以任何人都可以建议我如何为表单中的 excel 布局创建速度宏：

**漏洞**

*此处的表格标题*

这里的问题

**任务**

*此处的表格标题*

这里的问题

ETC...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:10:40.717

这一点都不容易。默认的 excel 视图只对问题进行一次循环。在您的情况下，您应该为每个问题类型执行第一个循环以生成标题，然后进行第二个循环以呈现相关类型的问题。

我邀请您查看以下 JIRA 资源：

1.  `com.atlassian.jira.issue.views.SearchRequestPrintableView`作为学习如何用循环逻辑替换 Velocity 渲染的起点。

2.  `com.atlassian.jira.issue.views.AbstractSearchRequestExcelView`重用问题渲染并在那里应用您的循环逻辑，这应该比第 1 步更复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-21T11:12:26.213

**为此使用[更好的 Excel 插件](https://marketplace.atlassian.com/plugins/com.midori.jira.plugin.betterexcel)**。

它可以将搜索请求（在 JIRA 术语中）导出到 Excel 电子表格，同时执行 Groovy 脚本！这些脚本通常用于对数据进行预处理、后处理或​​计算一些也应导出的派生信息。

在您的用例中，您需要做的就是在脚本中：

1.  您将导出的问题作为变量*$issues*
2.  将它们转换为问题类型到问题列表的映射（使用[Multimap](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Multimap.html)和非常简单的 Groovy 转换器）
3.  将地图返回到 Excel 工作表

在电子表格中：

1.  使用[jt:foreach](http://www.midori-global.com/products/jira-better-excel-plugin/documentation/tags#h4)标签遍历地图
2.  将映射键导出到带有大粗体字体的单元格
3.  *使用另一个jt:foreach*迭代映射值
**   像往常一样导出当前项目（问题）*

 *它为您节省了很多精力，但仍然需要编写一些代码（而且您喜欢编码，是吗？:-)）。另一个好处是外观由 Excel 模板电子表格定义，因此业务用户可以轻松更改（在此处添加一些徽标、更改字体等）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-30T11:34:17.060

May be this book will be helpful to you: "JIRA 5.x Development Cookbook" by Jobin Kuruvilla

Excel reports described in Chapter 5.*

# java - JAXB 和 List 的另一个编组异常

> ID：10336053
> 
> 赞同：2
> 
> 时间：2012-04-26T14:58:41.850
> 
> 标签：java, xml, jaxb, marshalling

这是我的 Request 类，它包含一个泛型请求：

```
import java.util.ArrayList;
import java.util.List;
import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlAnyElement;
import javax.xml.bind.annotation.XmlRootElement;

/**
 *
 * @author lorddoskias
 */
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Request {

    private List<StringStringMapEntry> parameters = new ArrayList<StringStringMapEntry>();
    private List<StringStringMapEntry> headers = new ArrayList<StringStringMapEntry>();
    @XmlAnyElement(lax=true)
    private Object requestBody = null;  // this has to reference a JAXB-enabled object
    private String resourcePath;

    public Request() {
    }

    public Object getRequestBody() {
        return requestBody;
    }

    public void setRequestBody(Object requestBody) {
        this.requestBody = requestBody;
    } 
```

为简洁起见省略了某些部分，但精髓就在那里。然后我有以下序列类：

```
import javax.xml.bind.annotation.XmlRootElement;

/**
 *
 * @author lorddoskias
 */
@XmlRootElement
public class Sequence {

    private String sequenceName;
    private long numReads;
    private int sequenceLength;

    public Sequence() {
        /* Required by JAXB */
    }

    public Sequence(String name, long numReads, int length) {
        sequenceName = name;
        this.numReads = numReads;
        sequenceLength = length;
    }

    public long getNumReads() {
        return numReads;
    }

    public void setNumReads(long numReads) {
        this.numReads = numReads;
    }

    public int getSequenceLength() {
        return sequenceLength;
    }

    public void setSequenceLength(int sequenceLength) {
        this.sequenceLength = sequenceLength;
    }

    public String getSequenceName() {
        return sequenceName;
    }

    public void setSequenceName(String sequenceName) {
        this.sequenceName = sequenceName;
    }
} 
```

我做这样的事情：

```
List<Sequence> seq = new ArrayList<Sequence>();
        seq.add(seq1);
        seq.add(seq2);

        client.insertIndividualStatistics(PostRequest.assemblyIndividualStats(66, seq)); 
```

这是 insertIndividualStatistics 方法：

```
public static Request assemblyIndividualStats(int stepId, List<Sequence> l) {

    Request req = new Request();
    req.setResourcePath("/stats/assembly/individual");

    req.addParameter("id", String.valueOf(stepId));
    req.setRequestBody(l);

    return req;
} 
```

当我尝试时，`WebResource res = client.resource(bla).path("my-path").post(req);` 我得到：

```
Exception in thread "main" com.sun.jersey.api.client.ClientHandlerException: javax.ws.rs.WebApplicationException: javax.xml.bind.MarshalException
 - with linked exception:
[javax.xml.bind.JAXBException: class uk.org.infectogenomics.model.rest.MySequenceListWrapper nor any of its super class is known to this context.] 
```

如果它们不是根对象，我认为 JAXB 支持简单列表吗？我什至尝试了一些不同的方法——将列表包装在一个简单的 JAXB 注释类中：

```
import java.util.List;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;

/**
 *
 * @author lorddoskias
 */
@XmlRootElement
public class MySequenceListWrapper {

    @XmlElement(name = "List")
    private List<Sequence> list;

    public MySequenceListWrapper() {/*JAXB requires it */

    }

    public MySequenceListWrapper(List<Sequence> list) {
        this.list = list;
    }

    public List<Sequence> getList() {
        return list;
    }
} 
```

并将其设置为 requestBody 但随后我得到一个类似的异常，但不是说 ArrayList 无法识别，而是说 MySequenceListWrapper 无法识别。我已经阅读了 Blaise Doughan 博客中的文章，我怀疑至少在后一种情况下它应该可以工作，因为我有适当的 XmlAnyElement 注释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:57:08.310

您可以使用 JAX-RS`ContextResolver`来制作`JAXBContext`知道`MySequenceListWrapper`该类的内容。或者您可以`@XmlSeeAlso`按如下方式利用注释：

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
@XmlSeeAlso({MySequenceListWrapper.class})
public class Request {
    ...
} 
```

# c# - 如何模拟鼠标输入？例如设置 MouseButtons 状态？

> ID：10336055
> 
> 赞同：0
> 
> 时间：2012-04-26T14:58:50.937
> 
> 标签：c#, mouse, kinect

如何在 C# 中设置鼠标按钮状态？

我的应用程序通过手势控制鼠标，我需要根据我的手势将鼠标左键状态设置为按下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T15:49:32.407

.NET 提供了鼠标事件处理程序，这些处理程序使用与表单控件交互时引发的事件。您还可以在 Forms 控件上下文中模拟鼠标行为。

[Windows 窗体中的 .NET 鼠标事件](http://msdn.microsoft.com/en-us/library/ms171542.aspx)

对于全局/非 Windows 窗体鼠标事件和模拟鼠标功能，您将需要一个全局鼠标挂钩库/dll，例如：

[全局鼠标钩和鼠标模拟器](http://www.codeproject.com/Articles/28064/Global-Mouse-and-Keyboard-Library)

# java - 模仿Java的ArrayList.remove(o)的函数

> ID：10336058
> 
> 赞同：0
> 
> 时间：2012-04-26T14:59:00.407
> 
> 标签：java, javascript, arraylist

我怎样才能实现一个与 做同样事情的函数`ArrayList.remove(o)`？

我最接近的东西是

```
Array.prototype.remove = function(o) {
    var index = this.indexOf(o);
    if(index == -1) {
        return;
    }
    return this.splice(index, index);
} 
```

但是它在第二行引发错误，声称`indexOf(o)`不存在。( `cannot find function indexOf()`)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T15:04:44.967

`Array.prototype.indexOf`IE7及以下不支持。因此，您之前还需要*填充*该方法，例如

```
Array.prototype.indexOf = Array.prototype.indexOf || function( search ) {
    for(var i = 0, len = this.length; i < len; i++) {
        if( this[ i ] === search ) {
            return i;
        }
    }
    return -1;
}; 
```

^(（简化示例）)。

此外，您的调用`.splice()`是错误的，第二个参数是您要删除的元素的长度，它应该是`1`.

```
Array.prototype.remove = function(o) {
    var index = this.indexOf(o);
    if(~index) {
        this.splice(index, 1);
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T15:09:55.777

另一个想法是使用“关联数组”，也就是具有名称值对的对象文字，并使用适用于所有现代浏览器的删除运算符。

```
var arr = {'x': somval, 'y': someval2 ...}
delete arr.x; 
```

# ubuntu - 为什么 apt-get install libsqlite3-dev 给我一个 404 错误？

> ID：10336060
> 
> 赞同：0
> 
> 时间：2012-04-26T14:59:08.137
> 
> 标签：ubuntu, sqlite, apt-get, sqlite3-ruby

我正在尝试使用 bundler 安装 sqlite3 gem，但遇到了常见`Failed to build native gem extensions`错误。我正在尝试安装必要的文件来解决此问题并使用成功安装了 ruby​​-dev `apt-get install`，但是当我运行时出现`apt-get install libsqlite3-dev`此错误：

```
Err http://ec2-us-east-mirror.rightscale.com jaunty-updates/main libsqlite3-dev 3.6.10-1ubuntu0.2
404 Not Found [IP: 174.129.253.100 80]
Err http://ec2-us-east-mirror1.rightscale.com jaunty-updates/main libsqlite3-dev 3.6.10-1ubuntu0.2
404 Not Found
Err http://ec2-us-east-mirror2.rightscale.com jaunty-updates/main libsqlite3-dev 3.6.10-1ubuntu0.2
404 Not Found
Err http://ec2-us-east-mirror3.rightscale.com jaunty-updates/main libsqlite3-dev 3.6.10-1ubuntu0.2
404 Not Found
Failed to fetch http://ec2-us-east-mirror3.rightscale.com/ubuntu/pool/main/s/sqlite3/libsqlite3-dev_3.6.10-1ubuntu0.2_i386.deb      404 Not Found
E: Unable to fetch some archives, maybe run apt-get update or try with --fix-missing? 
```

我尝试运行 apt-get update 并再次遇到一堆`404 not found`错误，并且运行命令 with`--fix-missing`没有做任何事情。

知道下一步该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T16:50:48.620

所以，原来我使用的是旧版本的 Ubuntu (9.04)，因为我不想升级，我需要指向旧的存储库。这个问题在 superuser.com 上的这个问题中得到解决：[https ://superuser.com/questions/339537/where-can-i-get-theold-repositories-for-ubuntu-9-04-jaunty](https://superuser.com/questions/339537/where-can-i-get-theold-repositories-for-ubuntu-9-04-jaunty)

# inheritance - 将变量添加到 CGAL 的 Point 类

> ID：10336063
> 
> 赞同：1
> 
> 时间：2012-04-26T14:59:14.500
> 
> 标签：inheritance, colors, kernel, point, cgal

我正在尝试向 CGAL 的 Point_3 类添加一个颜色变量（无符号字符），以便在进行 Delaunay 三角剖分后访问颜色。

我尝试过的是使用 Triangulation_vertex_base_with_info_3 来存储这样的颜色（按照[http://www.cgal.org/Manual/latest/doc_html/cgal_manual/Triangulation_3/Chapter_main.html#Subsection_39.5.3](http://www.cgal.org/Manual/latest/doc_html/cgal_manual/Triangulation_3/Chapter_main.html#Subsection_39.5.3)的示例）

```
typedef CGAL::Exact_predicates_inexact_constructions_kernel K;
typedef CGAL::Triangulation_vertex_base_with_info_3<unsigned char, K> Vb;
typedef CGAL::Triangulation_data_structure_3<Vb> Tds;
typedef CGAL::Delaunay_triangulation_3<K, Tds> Triangulation;
typedef Triangulation::Point CGAL_Point;

//...
//here I make a vector of pairs of points and their color

std::vector<std::pair<CGAL_Point, unsigned char> > points;

Point currentPoint;
for (int i=0; i<roiPoints.size(); i++){
    currentPoint=roiPoints[i];
    points.push_back(std::make_pair(CGAL_Point(currentPoint.x, currentPoint.y, currentPoint.z), roiColors[i]));
} 

//...
//triangulation
T.clear();
T.insert(points.begin(), points.end()); 
```

我真正想要实现的是能够在进行三角剖分后通过 Triangulation::Tetrahedron 类访问顶点颜色。

假设我在 (x,y,z) 有一个点 P。三角剖分后，我找到了包含这个点 P 的四面体 t，并且我可以访问这个四面体的顶点（使用 t.vertex(0..3)）。这将返回 Point_3 类型的顶点，我无法访问之前存储的颜色。

我想一种方法是创建我自己的包含颜色信息的 Point 类。这很容易，但我不明白如何使用这个类而不是 Point_3。我发现我还必须编写自己的内核来执行此操作，并在[http://www.cgal.org/Manual/latest/doc_html/cgal_manual/Kernel_23/Chapter_main.html#Section_11.5](http://www.cgal.org/Manual/latest/doc_html/cgal_manual/Kernel_23/Chapter_main.html#Section_11.5)上提供了一个示例，但我不能弄清楚我应该使用什么内核作为基类，或者我的内核甚至应该包含什么功能。

我什至在 stackoverflow 上发现了两个类似的主题： [Customizing CGAL Kernel with my own Point class](https://stackoverflow.com/questions/2418332/customizing-cgal-kernel-with-my-own-point-class) 和 [CGAL: Inheritance and the kernel](https://stackoverflow.com/questions/10241969/cgal-inheritance-and-the-kernel) 但它们对我没有帮助。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:15:34.483

根据您的描述，我认为您只需要在顶点类中添加颜色即可。定位后，您将拥有单纯形，并且能够访问顶点内的颜色。

[请参阅此处](http://www.cgal.org/Manual/latest/doc_html/cgal_manual/Triangulation_3/Chapter_main.html#Subsection_39.5.3)的示例。

# ms-access - 在 ms 访问中读取文本文件

> ID：10336066
> 
> 赞同：1
> 
> 时间：2012-04-26T14:59:31.660
> 
> 标签：ms-access

我有一个包含一些数据的文本文件我想打开文本文件并将数据复制到表单中的文本框字段，我想在事件过程中执行此操作，以在同一表单中为按钮的单击事件执行此操作，我正在使用 ms 访问2007 年。

文本文件非常简单，一列六行

```
12
2.5
6.7
9.5
3.4
7.6 
```

我想把这些数字放在表格中的字段中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T15:18:11.513

这是一个如何打开文本文件并将字段复制到表单字段中的示例

```
Dim MyStr1 as string
dim MyStr2 as string

Open "TESTFILE" For Input As #1
Do While Not EOF(1)    ' Loop until end of file.
    Input #1, MyStr1, MyStr2
    me.txtStr1 = MyStr1
    me.txtStr2 = MyStr2
Loop
Close #1    ' Close file. 
```

（该示例循环遍历多行，但您同样可以展开循环并单独执行每一行，就像您可能想要的那样 - 取决于您的文本文件的组织方式）

[你可以在这里](http://msdn.microsoft.com/en-us/library/aa733686%28v=vs.60%29.aspx)找到更多信息

# forms - MASTER-DETAIL 表单上的 EXECUTE_QUERY 查询错误的块

> ID：10336073
> 
> 赞同：0
> 
> 时间：2012-04-26T15:00:02.490
> 
> 标签：forms, oracle, oracle10g, designer, form-designer

我正在使用具有 Master-Detail 关系的 Oracle Form Designer，我有一个运行的 WHEN-NEW-FORM-INSTANCE 触发器，`'EXECUTE_QUERY;'`但它从 Detail 块而不是 master 块返回记录。谁能告诉我如何从主块返回记录？

我不知道块名称是什么。我试过数据块名称和块上方的标题，都说它们是未定义的。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T18:04:32.277

在通话之前先打`execute_query`一个`go_block('MASTER_BLOCK_NAME')`电话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-30T15:52:58.103

双击块旁边的图标（在对象导航器中）。

“General”下的第一个字段将是 Name 字段。这会让你知道你的块的名称。

# java - 带有来自 Java 的 Cookie 的 Internet Explorer Mobile 7.0

> ID：10336074
> 
> 赞同：1
> 
> 时间：2012-04-26T15:00:11.897
> 
> 标签：java, internet-explorer, jsp, cookies

我有一个基于 jsp 和 Tomcat 6 并使用 cookie 的 web 应用程序。

作为客户端，我使用 HTC Mozart、IE Mobile 7.0，它拒绝我的 cookie，同时在选项中启用了接受 cookie。我正在按如下方式创建 cookie（javax.servlet.http.Cookie）：

```
Cookie tmpCookie = new Cookie("cookiename", "cookievalue");
tmpCookie.setPath("/");
tmpCookie.setMaxAge(365 * 24 * 60 * 60);

if (tmpCookie != null) {
    response.addCookie(tmpCookie);
} 
```

它适用于几乎所有浏览器、移动设备和桌面设备，除了 ie 移动设备。还没有机会在 IEMobile9.0 上测试它。我可以想象它与“/”路径或其他东西有一些问题。你能帮帮我吗？

# mysql - 选择 SUM(field) 达到特定点的行 id - MySQL

> ID：10336080
> 
> 赞同：0
> 
> 时间：2012-04-26T15:00:23.300
> 
> 标签：mysql, sum, where

使用“标准”订单表，我试图找出特定客户购买了一定数量的物品的时间有多远。

```
Order ID      Items      Client      Date
--------      -----      ------      ----

1             1          Fred        26/04/2012
2             3          John        25/04/2012
3             2          Fred        20/04/2012
4             5          Fred        18/04/2012
5             3          Fred        14/04/2012
6             4          Fred        10/04/2012 
```

所以我想知道 Fred 购买的最后 10 件物品所涵盖的时间范围，从现在开始，一直在回溯。

在这种情况下，我将尝试确定订单 ID 1、3、4 和 5 加在一起将我带到（或刚刚超过）我的目标总数 10 项，所以我正在寻找的日期是 2012 年 4 月 14 日。

有一个简单的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T15:12:53.217

鉴于您所拥有的，没有*简单的方法可以做到这一点。*

如果您要跟踪订购了哪些商品，您可以加入 Items 表，这样每个商品就有一行。然后你可以只选择前 10 名。

```
select *
from Orders o
join OrderItems oi on oi.orderId = o.orderId
join Items i on i.itemId = oi.itemId
where o.Client = 'Fred'
order by o.Date
limit 10; 
```

然后语法可能会根据您使用的数据库而有所不同（[更多信息](http://www.w3schools.com/sql/sql_top.asp)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:16:45.223

解决此问题的一种方法是计算所购买物品的运行总数：

```
select 
  orders.*, 
  sum(
    select items 
    from orders as `inner` 
    where client = "Fred" and 
     `outer`.`date` <= `inner`.`date`
  ) as `Running total`
from orders as `outer`
where client = "Fred"
order by date desc; 
```

请注意选择列表中的子查询，它汇总了 Fred 在该日期或之后购买的商品数量。

输出应该是这样的：

```
Order ID      Items      Client      Date         Running total
--------      -----      ------      ----         -------------

1             1          Fred        26/04/2012     1
3             2          Fred        20/04/2012     3
4             5          Fred        18/04/2012     8
5             3          Fred        14/04/2012     11
6             4          Fred        10/04/2012     15 
```

然后从这个结果中，您可以轻松地选择适当的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T15:37:37.823

从我的头顶上...

```
CREATE FUNCTION time_of_last(itemcount INT, custid VARCHAR(50))
RETURNS DATE
BEGIN
   DECLARE tally INT DEFAULT 0;
   DECLARE ondate DATE;
   DECLARE curritems IN DEFAULT 0;
   DECLARE cur1 CURSOR FOR SELECT t.items, t.orderdate FROM yourtable t
      WHERE customer=custid ORDER BY orderdate DESC;
   DECLARE CONTINUE HANDLER FOR NOT FOUND SET ondate = NULL;

   OPEN cur1;

   read_loop: LOOP
       FETCH cur1 INTO curritems, ondate;
       SET tally = tally+curritems;
       IF (tally>=itemcount) THEN
            LEAVE read_loop;
       END IF;
   END LOOP;

   CLOSE cur1;

   RETURN ondate;
END;

SELECT time_of_last(10, 'Fred'); 
```

注意，如果您想开始收集其他信息，例如集合中有哪些订单，那么 Matt Fenwick 的解决方案更简洁。

# google-drive-api - 是否可以从 Google Drive 上传到另一个网络服务？

> ID：10336081
> 
> 赞同：3
> 
> 时间：2012-04-26T15:00:26.770
> 
> 标签：google-drive-api

我正在考虑将 SaaS 产品与 Google Drive 集成。是否可以允许云端硬盘用户授权将云端硬盘文件上传到另一个远程存储位置？

例如，现在，我可以通过网络服务将文件直接下载到计算机上的 Google Drive 文件夹中。我还可以使用 OS 文件处理程序窗口来选择 Google Drive 文件夹以将文件上传到 Web 服务。但这需要根据操作系统来浏览该特定设备上的文件。iOS 根本不允许这样做。

API 是否允许在云端硬盘和其他网络服务之间直接传输文件？

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T15:37:39.470

Drive API 允许您以编程方式读取和写入 Drive 文件。然后由开发人员在 Drive 和另一个网络服务之间实现任何同步/文件传输逻辑。所以是的，理论上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-18T08:58:09.347

以下是它在实践中的工作方式：

[Uploadcare](https://uploadcare.com)是 IaaS 解决方案（由我们提供支持），它允许您从 Google Drive、Dropbox、Box、OneDrive、Evernote 和其他来源上传文件。用户还可以从 Facebook、Instagram 和 Flickr 等社交网络上传图片：

[https://uploadcare.com/upload-sources/](https://uploadcare.com/upload-sources/)

您甚至可以直接从您的设备相机上传照片。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-13T12:15:03.770

只要远程文件位置是 Dropbox、Box 或 Google Drive，您也可以使用 Cloud Rail Single Interface，而且非常容易。

Cloud Rail Single Interface 允许您在上述 Cloud Storage 服务中使用相同的功能、相同的输入和输出。在创建类时会选择使用哪个特定服务。因此，例如该行：

```
 cs = new com.cloudrail.si.cloudStorage.GoogleDrive(
          this, 
          /** Your Client ID **/, 
          /** Your Client Secret**/
        ); 
```

只需要更改为，例如，如果您将文件传输到 Dropbox：“com.cloudrail.si.cloudStorage.Dropbox”，所有其他功能与新证实的服务相同。

免责声明：我受雇于 CloudRail。这也意味着如果您（或其他阅读本文的人）有任何问题，您可以发送电子邮件至 luke@cloudrail.com

# android - ActionBar 片段菜单项。把它们放在前面

> ID：10336085
> 
> 赞同：14
> 
> 时间：2012-04-26T15:00:39.510
> 
> 标签：android

我正在使用**onCreateOptionsMenu**成功添加片段菜单项...

```
@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater)
{
    super.onCreateOptionsMenu(menu, inflater);
    inflater.inflate(R.menu.additional_fragment_menu, menu);
} 
```

上面的这个附加菜单包括 1 个菜单项。我需要做的是将此菜单项放在所有其他现有项目的前面，以便它首先出现在操作栏上。目前它出现在最后。

（这是我要添加的**android:showAsAction="always"项目）**

我尝试以编程方式添加它，但 MenuItem 对象中没有允许您指定图标和 showAsAction 标志的选项。

有人有想法么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-26T15:31:55.633

好的，我自己用*EvilDuck*指向正确方向的指针破解了这个问题。是的， *dymmeh*，你是对的，你可以以编程方式做到这一点！

我需要使用的是`orderInCategory`和的组合`menuCategory`。`orderInCategory`如果您没有`menuCategory`指定，Android 似乎会忽略。

*   `menuCategory`我通过将属性值设置为 来指定应用程序中每个菜单项的类别`"system"`。
*   我的基本菜单项（通过 加载的那些`Activity`）我必须设置高 orderInCategory 数字，例如 10、11、12、13 等。
*   然后，当我膨胀并添加具有相同类别和值 1 的附加片段菜单 xml 时，`orderInCategory`它显示为第一项。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-26T15:05:40.973

尝试在菜单项上使用“android:orderInCategory”属性

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-26T15:25:01.387

我不确定您从哪里得到无法以编程方式设置 showAsAction 选项或图标例如：

```
public void onCreateOptionsMenu(Menu menu)
{
    menu.add(Menu.NONE,  /** group ID.. not really needed unless you're working with groups **/
              0,         /** this is the items ID (get this in onOptionsItemSelected to determine what was clicked) **/
              Menu.NONE, /** ORDER.. this is what you want to change **/
              "Cancel") /** title **/
              .setIcon(R.drawable.ic_menu_cancel)
              .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
} 
```

文件：

[menu.add(int groupId, int itemId, int order, CharSequence title)](http://developer.android.com/reference/android/view/Menu.html#add%28int,%20int,%20int,%20java.lang.CharSequence%29)

[setShowAsAction(int actionEnum)](http://developer.android.com/reference/android/view/MenuItem.html#setShowAsAction%28int%29)

[setIcon(int resId)](http://developer.android.com/reference/android/view/MenuItem.html#setIcon%28int%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-30T06:43:59.770

一切都正确，只需在 onCreateView 中使用以下一行代码。

```
setHasOptionsMenu(true); 
```

# asp.net-mvc - EditorFor 将空值传递给我的控制器

> ID：10336086
> 
> 赞同：0
> 
> 时间：2012-04-26T15:00:43.470
> 
> 标签：asp.net-mvc, razor

我在用着

```
@(Html.EditorFor(m => m.Risk)) 
```

显示我的风险对象的所有可编辑值。当这被发布到我的承担风险的控制器时，它看起来像这样：

```
[HttpPost]
public ActionResult Add(Risk formRisk, string programId) 
```

Risk 已创建（这很神奇），但所有字符串值为 null，即使 Enum 值已正确填充。我还有效地通过表单字段名称匹配传入另一个值，没有问题。

任何人都知道从哪里开始看这个，因为它大部分是基于约定的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T14:00:53.947

原来我的视图模型与我发布表单作为参数的方法的类型不同。显然，这是推断出来的并且可能是错误的，但似乎 MVC 3 在处理提交的表单时做了一些有趣的基于反射的魔法。假设我有这样的方法：

```
[HttpPost]
public ActionResult ProcessForm(Book book)
{
    string title = book.Title;
    //code for stuff
} 
```

如果我发布到此操作的表单有一个名为“Title”的字段，则该表单元素的值会自动设置为参数上名为“Title”的任何属性。我不知道会发生这种情况，但它非常酷，我现在正在使用 EditorFor 正确地利用它。=] 感谢 11 位感兴趣的人。

这篇文章为我赢得了风滚草徽章，因为它太无趣了。=]

# php - 保存我获得的数据或再次请求

> ID：10336088
> 
> 赞同：1
> 
> 时间：2012-04-26T15:00:45.023
> 
> 标签：php, asp.net

我有一个关于应用的理论问题。

想象一个互联网应用程序，您必须在页面上显示某个对象的所有实例。您可以从数据库中获取它们并显示它们。

但是，当用户想要再次访问同一个页面，或者查看另一个页面中某个对象的详细信息时，您应该再次加载它（再次访问数据库）还是保存之前在会话中加载的内容并再次显示？

如果对象的加载不如本地数据库快，并且您必须通过 http 从另一台服务器以 XML 形式获取这些对象怎么办？

对此是否有任何明确的指导方针或约定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T15:07:38.433

如果速度确实是个问题，或者您可能会遇到较高的服务器负载，您可能希望在本地缓存数据。

您更新缓存的频率很大程度上取决于数据库中对象更改的频率。如果它们经常更改，那么缓存可能不是一个好主意，因为您可能会向用户展示过时的信息。

# ruby-on-rails - Rails 3\. 按关联模型排序

> ID：10336089
> 
> 赞同：11
> 
> 时间：2012-04-26T15:00:46.163
> 
> 标签：ruby-on-rails, ruby, activerecord

假设我有两个模型：Course 和 ScheduledCourse。

Course 模型有一个 name 属性。

course has_many :scheduled coursescheduled_courses :belongs_to course

```
courses
id | name
 1 | biology
 2 | history
 3 | chemistry
 4 | literature

scheduled_courses
id | course_id 
 1 | 2
 2 | 4
 3 | 1
 4 | 2 
```

如何进行 ActiveRecord 查询以按字母顺序对预定课程进行排序？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-26T15:04:45.997

尝试...

```
ScheduledCourse.joins(:course).order('course.name') 
```

如果这不起作用，您可能需要`.all`在加入条件之前调用，如下所示：

```
ScheduledCourse.all.joins(:course).order('course.name') 
```

就像*luacassus*说的那样，[这个答案可以提供帮助](https://stackoverflow.com/questions/1530131/rails-order-using-a-has-many-belongs-to-relationship)；我认为该答案中的语法是 pre-Arel (ActiveRecord 3)，但它会完成工作。希望有帮助！

编辑：

正如@FellowStranger 所提到的，现在正确的语法似乎是

```
ScheduledCourse.joins(:course).order('courses.name') 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-24T01:06:20.547

```
ScheduledCourse.joins(:course).order('courses.name asc') 
```

请注意，表名应该是复数形式。此代码经过测试。

# less - LESS 客户端不适合我

> ID：10336092
> 
> 赞同：1
> 
> 时间：2012-04-26T15:00:57.893
> 
> 标签：less

在客户端使用 LESS 的说明非常简单。但由于某种原因，它仍然对我不起作用。！[在此处输入图像描述][1]

我在 Firebug 的控制台上收到此错误：

[http://i.stack.imgur.com/NbIJP.jpg](http://i.stack.imgur.com/NbIJP.jpg)

如果我去那里写的 home.less 文件的 URL，我会看到内容（它们基本上与我之前使用的 CSS 相同，已重命名，因为我刚刚开始使用 LESS 并没有完成任何东西都没有）。

代码中唯一的 javascript（同样，与代码中的 URL 相同）只是更名为 less-1.3.0.min.js。

这是完整的 HTML：

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Language" content="es_ES" />

    <link rel="stylesheet/less" type="text/css" href="http://domain.dev/css/home.less?id=1" />
        <script src="http://domain.dev/js/generated/home.js?id=1" type="text/javascript"></script>
</head>
<body>
</body>
</html> 
```

知道我在做什么错吗？

**解决方案/编辑：**好的，我想出了问题所在。如果您在 LINK 标签上引用的 .less 文件不在同一个域上（即使是不同的子域也不起作用，就像我的情况一样），显然 LESS 不能在客户端（使用 less.js 和所有）。我不知道 LESS 有这个限制，因为 CSS 没有。他们应该在文档中对此提出警告。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-03T23:52:06.763

正如@drinchev 已经提到的，less.js 是一个客户端 javascript，因此您最终会遇到跨域问题。这可以通过启用 CORS 来解决，请参阅：[http](http://enable-cors.org/) ://enable-cors.org/ 。在已安装 home.less 的域上，服务器应发送 Access-Control-Allow-Origin: * 标头。

less.js 使用支持大多数现代浏览器的 CORS 的 XMLHttpRequests 加载 less 文件，请参见[http://caniuse.com/#search=cors](http://caniuse.com/#search=cors)。更多详细信息，[请访问 http://www.html5rocks.com/en/tutorials/cors/](http://www.html5rocks.com/en/tutorials/cors/)

# c - C 结构内部联合内部结构

> ID：10336095
> 
> 赞同：4
> 
> 时间：2012-04-26T15:01:07.747
> 
> 标签：c, struct, unions

如何初始化结构 B 或 C 的变量？

```
typedef struct _A
{
  union
  {
    struct
    {
      int b;
    } B;
    struct
    {
      int c;
    } C;
  } u;
} A; 
```

类似的东西 `A.u.B *bVar;`不起作用

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T15:04:23.830

唯一的`typedef`封面`A`，而不是其中定义的联合或结构。

`typedef`不能这样嵌套——每个用户定义的“类型”必须有一个标签，所以声明一个类型的变量`A.u.B`是非法的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T15:11:03.403

这应该这样做：

```
/* Initialise to zero */
A a = {{{0},{0}}};
/* Now set the b to 5 */
a.u.B.b = 5; 
```

如果您仔细观察大括号，您会发现它们与类型声明中的括号完全匹配。所以第一个大括号开始`A`，第二个开始`A.u`，第三个开始`A.u.B`，第一个`0`对应于`A.u.B.b`。右大括号结束`A.u.B`，然后逗号表示下一个左大括号开始`A.u.C`，因此第二个零初始化`A.u.C.c`，然后所有大括号再次关闭。

请注意，并非所有编译器都支持匿名结构。我不记得他们是否被标准允许......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T15:12:52.620

你应该声明你的结构。

```
typedef struct {
    int b;
} B; 
```

# php - 上传一个 cronjob

> ID：10336096
> 
> 赞同：1
> 
> 时间：2012-04-26T15:01:25.920
> 
> 标签：php, cron

我正在尝试使用 cronjob 在 unix 网络服务器上执行 php 文件（我使用 godaddy 进行托管）。但我通常是 web 开发的新手，所以我不确定如何真正确保文件正在执行。这项工作只需要每天凌晨 2:15 运行一个 php 脚本。这就是我所拥有的：

```
MAILTO=cron@email.domain.com
15 2 * * * http://mydomainname.com/refresh.php 
```

如何指定要运行的文件名，似乎我不应该给它一个 URL？不知道在哪里可以找到 Godaddy 上的文件路径...我只是将其加载为 .txt 文件吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T15:03:51.270

> 如何指定要运行的文件名

您在当前拥有 URI 的位置键入它。

> 看来我不应该给它一个网址？

正确的。你需要一个shell命令。

> 不知道在哪里可以找到godaddy上的文件路径...

我们不知道您将文件保存在服务器上的什么位置。我建议通过 SSH 进入并环顾四周。

> 我只是将其加载为 .txt 文件吗？

通常你会运行`crontab -e`然后使用提供的编辑器来输入它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T15:05:45.467

您可以提供文件路径并使用 PHP 命令行运行它。

`15 2 * * * home/path/to/command/your_php_script.php`

`15 2 * * * home/path/to/command/the_command.sh`

Godaddy 路径显示在服务器部分的虚拟主机下，您的主机帐户的绝对主机路径显示。

提示：您可以创建一个 php 文件，`echo $_SERVER['DOCUMENT_ROOT'];`然后从浏览器访问该页面，这应该为您提供绝对托管路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T15:15:00.547

您不能在 cron 中使用 URL。它不知道 URL。而是创建一个脚本来使用适当的文件运行 PHP。然后，您需要提供该脚本的正确路径。

测试它的一个有用技巧是首先使用`at`- 然后您可以确保该东西可以使用`cron`.

# c# - cs0002 无法从资源 .net 4.0 加载消息字符串

> ID：10336104
> 
> 赞同：1
> 
> 时间：2012-04-26T15:01:54.383
> 
> 标签：c#, .net

使用 wpf 在 ac# .net 4.0 应用程序上工作，当应用程序在具有 xp prof sp3 的 pc 上时出现错误 CS0002（请参见下面的跟踪）。在其他机器上运行良好（也赢得 xp prof sp3）。在花了很多时间寻找解决方案之后，我不知道下一步该做什么，也许你可以提供帮助。

我检查了 c:\windows\temp 目录的访问权限，以及 TEMP 和 TMP 环境设置的 temp dir，所有目录都是完全可访问的。电脑有win xp sp 3，我已经安装了所有更新。我以管理员身份运行代码。

如果您有任何建议，请告诉我！谢谢。

```
Unable to generate a temporary class (result=1).
error CS0002: Unable to load message string from resources.
error CS0002: Unable to load message string from resources.
error CS0002: Unable to load message string from resources.
error CS0002: Unable to load message string from resources.
error CS0002: Unable to load message string from resources.
error CS0002: Unable to load message string from resources.
error CS0002: Unable to load message string from resources.
error CS0002: Unable to load message string from resources.
error CS0002: Unable to load message string from resources.
error CS0002: Unable to load message string from resources.
error CS0002: Unable to load message string from resources.
error CS0002: Unable to load message string from resources.
error CS0002: Unable to load message string from resources.

   at System.Xml.Serialization.Compiler.Compile(Assembly parent, String ns, XmlSerializerCompilerParameters xmlParameters, Evidence evidence)
   at System.Xml.Serialization.TempAssembly.GenerateAssembly(XmlMapping[] xmlMappings, Type[] types, String defaultNamespace, Evidence evidence, XmlSerializerCompilerParameters parameters, Assembly assembly, Hashtable assemblies)
   at System.Xml.Serialization.XmlSerializer.GenerateTempAssembly(XmlMapping xmlMapping, Type type, String defaultNamespace)
   at System.Xml.Serialization.XmlSerializer..ctor(Type type, String defaultNamespace)
   at NHibernate.Cfg.Configuration..ctor(SettingsFactory settingsFactory)
   at MyNHibernateSession.OpenSession() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T14:31:54.663

这似乎是您的 .NET 安装（类型初始化）的问题。请尝试在您的计算机上卸载/重新安装 .NET 框架。

[http://comicrack.cyolito.com/forum/8-help/17699-error-on-comicrack-startup](http://comicrack.cyolito.com/forum/8-help/17699-error-on-comicrack-startup)

# java - 为什么我不能在未初始化的局部变量上放置断点？

> ID：10336105
> 
> 赞同：2
> 
> 时间：2012-04-26T15:02:01.637
> 
> 标签：java, breakpoints, local-variables

为什么我不能在 line 上放置断点`String a;`？

```
public void localMethod() {
    String a;
    a = "haha";
    System.out.println(a);
} 
```

我知道局部变量在我明确地为其赋值之前不会被初始化。但它是一行代码，它做了一些事情。为什么我不能停在那里？哪些行有资格成为断点？

我正在使用 Eclipse，jdk6_31

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T15:06:17.577

声明本身并不是真正的可执行代码——它只是声明某些东西的存在。您应该能够在*第二*行放置一个断点，这实际上*做*了一些事情。

诚然，我看不出 IDE 不支持将断点添加到不可执行行的概念的任何原因——它可能必须*真正*将断点安装在执行环境中的可执行点...

编辑：为了澄清我的意思，这段代码：

```
public void foo() {
    String a;
    String b;
    a = "hello";
    b = " world";
    System.out.println(a + b);        
} 
```

将编译为与以下相同的字节码：

```
public void foo() {
    String a;
    a = "hello";
    String b;
    b = " world";
    System.out.println(a + b);        
} 
```

由于声明，没有代码必须执行 - 它不会*在那个时间点*或类似的地方保留空间。编译器在方法的堆栈空间内分配一个“槽”，并将在整个方法中使用该槽——但它可以重用同一个槽而无需额外初始化，例如，即使变量是在循环中声明的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T15:07:14.113

断点由 IDE/编译器生成，用于监视正在执行的某些行。这些由字节码中的行号表示。表示变量声明和初始化的字节码在编译过程中合并为一个步骤。因此，如果从赋值中分离出变量的声明，则生成的字节码中没有可用的断点。

这是您的示例的字节码：

```
public class Example {
    public void localMethod() {
        String a;
        a = "haha";
        System.out.println(a);
    }
} 
```

到：

```
public class stackoverflow/Example {

  // compiled from: Example.java

  // access flags 0x1
  public <init>()V
   L0
    LINENUMBER 6 L0
    ALOAD 0
    INVOKESPECIAL java/lang/Object.<init> ()V
    RETURN
   L1
    LOCALVARIABLE this Lstackoverflow/Example; L0 L1 0
    MAXSTACK = 1
    MAXLOCALS = 1

  // access flags 0x1
  public localMethod()V
   L0
    LINENUMBER 9 L0
    LDC "haha"
    ASTORE 1
   L1
    LINENUMBER 10 L1
    GETSTATIC java/lang/System.out : Ljava/io/PrintStream;
    ALOAD 1
    INVOKEVIRTUAL java/io/PrintStream.println (Ljava/lang/String;)V
   L2
    LINENUMBER 11 L2
    RETURN
   L3
    LOCALVARIABLE this Lstackoverflow/Example; L0 L3 0
    LOCALVARIABLE a Ljava/lang/String; L1 L3 1
    MAXSTACK = 2
    MAXLOCALS = 2
} 
```

请注意，第 8 行没有 LINENUMBER 标记，在我的 IDE 中它代表`String a`声明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T15:12:16.727

没有对应于`a`局部变量声明的字节码，因此您不能在声明时设置断点，只能在初始化时设置。

**示例.java：**

```
class Sample {
public void localMethod() {
    String a;
    a = "haha";
    System.out.println(a);
}
} 
```

**javac 示例.java; javap -c 示例**

```
class Sample extends java.lang.Object{
Sample();
  Code:
   0:   aload_0
   1:   invokespecial   #1; //Method java/lang/Object."<init>":()V
   4:   return

public void localMethod();
  Code:
   0:   ldc #2; //String haha
   2:   astore_1
   3:   getstatic   #3; //Field java/lang/System.out:Ljava/io/PrintStream;
   6:   aload_1
   7:   invokevirtual   #4; //Method java/io/PrintStream.println:(Ljava/lang/String;)V
   10:  return

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T15:13:36.217

断点允许用户在特定位置暂停程序的执行。断点通常与源代码一起显示在 UI 中。当程序执行过程中遇到断点时，程序会挂起并触发以 BREAKPOINT 为原因的 SUSPEND 调试事件。现在..当你编译它时..声明和赋值属于一个步骤..首先它被声明然后赋值..所以最后一步是赋值..因此，你可以在赋值上放一个断点，但不能关于申报。

# javascript - 带有文本框的 Javascript 和 html 代码

> ID：10336106
> 
> 赞同：0
> 
> 时间：2012-04-26T15:02:02.240
> 
> 标签：javascript, asp.net, html, vb.net

我必须在 button.click 事件中插入文本框。为此，我一直在使用此代码在 ASPX.VB 文件中实现它。

下面的代码反映了附加的屏幕截图，它在删除按钮旁边显示了文本框。

问题：

示例：如果我们在 ASPX 页面中插入任何简单的文本框，那么我们可以获取该文本框 id，我们可以在 aspx.vb 文件中使用它。以同样的方式，我想通过拥有文本框 ID 来玩下面的代码。如何？

我需要如何获取此文本 boxId(id = ""txtExperimentalStressdays"") 并将用户输入的数据保存到数据库中。

只是我想做如下：调用插入文本框数据的方法 calltextboxdatainsertmethod(txtExperimentalStressdays.text)

问题是，按照上面的行，这个文本框代码不起作用，因为它在 "" 引号中。

![在此处输入图像描述](../Images/74281eb80a138955de7b11e5dd4d5d86.png)

```
testTypeNode.Text = testTypeNode.Text & "" & _  
" <img src=""../images/delete_16x.ico""" & _  
" style=""text-align:bottom; cursor:pointer;"" alt=""Delete TestType""" & _  
" title=""Delete TestType"" onclick=""javascript:if(confirm('Are you sure you want to delete? Any running tests will be aborted!'))" & _  
" {" & ClientScript.GetPostBackEventReference(btnDeleteTestType, "" & sequenceNode.Value.ToString & _  
WordSeparationChar & testTypeNode.Value.ToString & "") & ";};"" />" & _  
"<inputtype= ""text""id= ""txtExperimentalStressdays""name=""ExperimentalStressdays""size=""4"" title=""Pleaseenter the Experimental Stressdays"" javascript:onfocusdown(/>" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T15:11:15.857

您可以尝试在代码中使用“\”作为转义字符。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:41:09.667

可能更容易的事情是继续创建文本框，但使用 javascript 来更改可见性。例如，您的文本框可能会开始隐藏：

```
<asp:TextBox ID="txtBox" runat="server" CssClass="1887txt" Text="" Style="display: none;"></asp:TextBox> 
```

然后，一个按钮的 OnClick （只需直接从 .ascx 或使用 *.Attributes.Add("onClick", "yourfunction") 方法在后面的代码中附加 javascript 函数。假设你是第一种方法，所以.ascx 中的按钮如下所示：

```
<asp:Button ID="Button2" runat="server" CssClass="1887lbl" OnClientClick=:firejs(); return false;"
                 Text="Submit" UseSubmitBehavior="false" /> 
```

然后你的javascript函数

```
function firejs(){
   var txt = !GetServerControl("input", "txtBox");
   txt.style.display = "none";
} 
```

只是一个想法。不知道你到底想做什么......

-sf

# java - 使用 Apache POI 向 Powerpoint 幻灯片添加注释

> ID：10336111
> 
> 赞同：5
> 
> 时间：2012-04-26T15:02:19.110
> 
> 标签：java, apache-poi

是否可以向使用 Apache POI 以编程方式创建的幻灯片添加注释？

这是我到目前为止所拥有的

```
Slide slide = ppt.createSlide();
org.apache.poi.hslf.record.Notes notesRecord = new ???; // <--- No Public constructor
org.apache.poi.hslf.model.Notes noteModel = new org.apache.poi.hslf.model.Notes(notesRecord ); // <--- Only one constructor which takes a org.apache.poi.hslf.record.Notes
// hopefully make some notes
// add the notes to the slide
slide.setNotes(noteModel); 
```

如您所见，似乎没有一种方法可以创建向幻灯片对象添加注释所需的对象。

打电话

```
Notes notesSheet = slide.getNotesSheet(); 
```

...返回空值。

是否有另一种方法来创建必要的笔记对象，也许使用我还没有找到的工厂类？

或者，是否有另一种方法可以在不涉及使用 Note 类的幻灯片中添加注释？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-06-11T13:07:37.293

这个问题已经很老了，但我希望这个答案会对某人有所帮助。使用 Apache POI 3.12，以下代码应在幻灯片中添加一些文本作为注释：

```
 // create a new empty slide show
    XMLSlideShow ppt = new XMLSlideShow();

    // add first slide
    XSLFSlide slide = ppt.createSlide();

    // get or create notes
    XSLFNotes note = ppt.getNotesSlide(slide);

    // insert text
    for (XSLFTextShape shape : note.getPlaceholders()) {
        if (shape.getTextType() == Placeholder.BODY) {
            shape.setText("String");
            break;
        }
    }

    // save
    [...] 
```

# c# - dateTime.FromOaDate() 的日期文化

> ID：10336116
> 
> 赞同：0
> 
> 时间：2012-04-26T15:02:37.230
> 
> 标签：c#, datetime

DateTime.FromOaDate() 是否总是返回 en_US 文化 (mm/dd/yyyy) 中的日期？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T15:04:37.000

`DateTime`*价值观和*价值观一样没有文化`Int32`。只有当您开始格式化或解析值时，才会应用文化的概念。

# mobile - 开发“跨平台”原生移动应用的策略

> ID：10336117
> 
> 赞同：0
> 
> 时间：2012-04-26T15:02:39.227
> 
> 标签：mobile, cross-platform

如果我只想针对 iOS、Android 和可选的 Blackberry，在重用相同代码库方面有哪些可用选项（编写一次，将目标多个平台编译）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T22:59:46.223

[Adobe AIR](http://www.adobe.com/devnet/devices.html)

xamarin.com

phonegap.com

（完整列表）： [http ://en.wikipedia.org/wiki/Mobile_application_development](http://en.wikipedia.org/wiki/Mobile_application_development)

# linux - 用neato问题编译

> ID：10336119
> 
> 赞同：0
> 
> 时间：2012-04-26T15:02:47.467
> 
> 标签：linux, graphviz, neato

我正在尝试使用neato将一个非常简单的图形（3个对齐的节点）输出为png。源文件，开头为：

```
graph {
  graph [size="8,5"];
  node [label="\N", pin=true, shape=circle];
  0 [pos="0,0", pin=true, style=filled];
  1 [pos="0,60", pin=true, style=filled];
  2 [pos="0,120", pin=true, style=filled];
  1 -- 0;
  2 -- 1;
  3 -- 2;
} 
```

不幸的是，节点 (1,2,3) 的标签未显示在输出图像 (png) 中。当从另一台 Unix 计算机运行时，相同的源文件会产生不同的结果，但我看不出哪个库或配置可能不同。知道有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T17:08:35.133

如果您删除显式大小和定位信息，它是否正确呈现？也就是说，如果你给它...

```
graph {
  node [label="\N", pin=true, shape=circle, style=filled];
  0;
  1;
  2;
  1 -- 0;
  2 -- 1;
  3 -- 2;
} 
```

...节点标签是否正确显示？此输入在 graphviz 2.28.0 和 2.12 下都能正确呈现。

# .htaccess - 两个几乎相同的 RewriteRules，一个有效，一个无效？

> ID：10336124
> 
> 赞同：1
> 
> 时间：2012-04-26T15:03:04.520
> 
> 标签：.htaccess

我希望将所有内容都重定向到 index.php，所以我认为这应该可行：

```
RewriteEngine on
RewriteRule ^(.*)$ /index.php?url=$1 [L] 
```

..但事实并非如此。这个非常相似的 RewriteRule 确实有效：

```
RewriteEngine on
RewriteRule matches/(.*) /index.php?url=$1 [L] 
```

后来我发现要使第一个工作正常，您需要：

```
RewriteCond %{REQUEST_FILENAME} !-f 
```

有人可以解释为什么在前一个示例中需要最后一个 RewriteCond 而不是后者吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T15:17:05.490

因为第一条规则将重写已经重写的 URL。

[RewriteRule Last [L] 标志不起作用？](https://stackoverflow.com/questions/6797998/rewriterule-last-l-flag-not-working)

**例如：**

*   原始请求：`/hello/pink-kitten`
*   第一次（初始）重写：`/index.php?url=hello/pink-kitten`
*   第二个循环：重写为`/index.php?url=index.php`
*   第三个周期：重写为`/index.php?url=index.php`
*   没有更多的循环，因为第 3 个循环产生了与第 2 个相同的结果

**如果添加该条件，为什么规则有效？**因为条件**清楚地**表明——只有在请求的 URL 不是文件时才进行重写。因此，在第 2 次循环中，URL 不会像`/index.php`文件一样被再次重写，因此不再需要循环。

**为什么第二条规则就是这样工作的？**因为它已经内置了条件 - URL 应该包含在其中，并且您可以看到`matches/`重写的 URL没有任何部分。`/index.php?url=``matches/`

# hudson - Redmine 插件在哈德逊不起作用

> ID：10336125
> 
> 赞同：3
> 
> 时间：2012-04-26T15:03:13.447
> 
> 标签：hudson, hyperlink, redmine, hudson-plugins

我安装了 redmine 1.4.1 和 hudson 2.2。redmine 1.1 迁移到 1.4.1 后，[redmine 0.9 的插件](http://wiki.hudson-ci.org/display/HUDSON/Redmine+Plugin)在 hudson 停止工作。

当提交消息包含诸如“refs”或“closes”之类的 redmine 关键字时，redmine 插件会正确检测到关键字，但链接包含 /show - 前置问题编号（#41），因此在 redmine 中出现 404 错误。

redmine 问题的常规链接： [http://myRedmineProject/issues/100](http://myRedmineProject/issues/100)

redmine插件生成的链接： [http://myRedmineProject/issues/show/100](http://myRedmineProject/issues/show/100) 修改

```
 #34 (26/04/2012 10:15:29)        

    Web Service #41 e #42 — Alexandre Schossler / detalhe
    UC - TC 11 - associar produtos ao cliente #40 — Alexandre Schossler / detalhe
    cadastro de produto, configuracao do bootstrap - ref #44 #38 — carlos / detalhe 
```

有谁知道如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T21:59:11.173

我找不到插件的源代码......但是：如果你在 redmine 前面有 apache，你可以 - 作为一种解决方法，直到 hudson 插件得到修复 - 只需重定向所有`/issues/show/xxx`链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T23:35:33.880

我解决了这个问题：D

我确实检查了[插件](https://svn.jenkins-ci.org/trunk/hudson/plugins/redmine)，我`show/`从类的代码中删除了`RedmineLinkAnnotator`

然后我使用编译`mvn install`，将**redmine.hpi**复制到 hudson 的 plugins 文件夹中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T07:45:26.500

为 redmine 1.4 生成无效问题链接修复

[https://github.com/ncrash/jenkins-redmine-plugin/commit/2fd1072daae4a97f85786c72d8143e6b4340b07b](https://github.com/ncrash/jenkins-redmine-plugin/commit/2fd1072daae4a97f85786c72d8143e6b4340b07b)

# apache - htaccess - 有条件的重写和过期

> ID：10336132
> 
> 赞同：5
> 
> 时间：2012-04-26T15:03:27.497
> 
> 标签：apache, .htaccess, url-rewriting, cache-control, mod-expires

*嘿！*

我的 Apache 2.x 服务器 webroot 中有一个文件夹`/static`。如果请求匹配

```
/static/<somename like [\S-_]+>.(png|jpg|css|js)/\d{8,15} 
```

例如

```
/static/bg.jpg/1335455634 
```

我想要两件事：

*   url 应重写为`/static/bg.jpg`（去掉时间戳）
*   它应该成为[永不过期](http://developer.yahoo.com/performance/rules.html#expires)的（'expires 2030, max-age=290304000, public cache, ...）

如果请求不匹配，则请求及其标头应正常，无需重写。理想情况下，/static/* 之外的任何请求都不应受到影响（尽管«巧合的尾随时间戳»应该很少见......）

我在使用 FilesMatch / RewriteCond 时遇到了麻烦，所以我宁愿不发布我糟糕的尝试……（在我的机器上启用了通用重写，我确实有权发送与缓存相关的标头）

***丹克申！***

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T20:08:53.330

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^static/([^.]+\.(png|jpe?g|css|js))/\d{8,15}$ static/$1 [L,R,NC]

# now set expire date to today + 1 year
<IfModule mod_expires.c>
    ExpiresActive on
    ExpiresByType image/jpeg "access plus 1 years"
    ExpiresByType image/png "access plus 1 years" 
    ExpiresByType text/css "access plus 1 years"
    ExpiresByType text/js "access plus 1 years"
    ExpiresByType text/javascript "access plus 1 years"
    ExpiresByType application/javascript "access plus 1 years"
    ExpiresByType application/x-javascript "access plus 1 years" 
</IfModule> 
```

我选择`iccess plus 1 years`了**永不过期**，因为我在网上找到了这个：

> “要将响应标记为“永不过期”，源服务器会在响应发送后大约一年发送一个过期日期。HTTP/1.1 服务器不应该在未来一年以上发送过期日期。
> 
> **来自 HTTP 1.1 RFC**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T17:16:56.600

这样的事情怎么样？

```
RewriteEngine on
RewriteRule ^static/([^/]+\.(png|jpg|css|js))x?/\d{8,15}$ /static/$1 [NC,L]

<FilesMatch "\.(png|jpg|css|js)$">
    <IfModule mod_expires.c>
        ExpiresActive On
    </IfModule>
    <IfModule mod_headers.c>
        ExpiresDefault "access plus 10 years"
    </IfModule>
</FilesMatch> 
```

# javascript - iOS：“添加到主屏幕”网站不会刷新

> ID：10336135
> 
> 赞同：1
> 
> 时间：2012-04-26T15:03:34.980
> 
> 标签：javascript, iphone, ios, webkit

我正在测试一个网站，我通常在 Safari iOS 中打开它，然后将它添加到主屏幕，这样我就可以全屏看到它，这是我的元数据

```
<meta name="viewport" content="width=device-width, initial-scale=1.0 user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">

<meta name="apple-mobile-web-app-capable" content="yes">

<link rel="apple-touch-icon-precomposed" href="favicon.png"/>  

<meta name="apple-mobile-web-app-status-bar-style" content="black"> 
```

但我注意到，当我重新打开应用程序时，有时，webapp 完全随机地不会刷新......我尝试重置 safari，但仍然没有旧版本......

是一种奇怪的行为吗？我想知道我是否应该在元数据中设置 seomthing 以至少在调试/测试阶段强制刷新...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T15:33:17.777

想知道这是否可行？

`<META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">`

`<META HTTP-EQUIV="PRAGMA" CONTENT="NO-CACHE">`

此链接可能会有所帮助：

[http://www.i18nguy.com/markup/metatags.html](http://www.i18nguy.com/markup/metatags.html)

# jquery - jquery mobile、pageinit、pagecreate和冗余

> ID：10336138
> 
> 赞同：2
> 
> 时间：2012-04-26T15:03:43.613
> 
> 标签：jquery, jquery-mobile

提前感谢您查看此 jQuery Mobile（版本 1.1.0）问题。

我的第一个问题是：你在每次页面加载和每次 ajax 页面调用时使用什么函数（它们似乎是 2 个独立的野兽）？我希望它们每次都运行。

```
$(document).bind('pageinit',function(){
    console.log('Does this work for you?');
}); 
```

我有几个使用 jQuery 代码实现各种功能的独立 jQuery-Mobile 驱动的 HTML 页面。其中一些功能包括在几个页面上发生的基于触摸的滑块（royalSlider），一些代码嗅探是否存在某些元素（例如固定的副页眉或页脚）以调整页面的边距，从而阻碍主要内容通过重叠元素，而其他 js 是一个脚本，它使用特定类触发每个图像的 AJAX 调用的每个元素。

问题是：我是否需要为每个页面的每个 ID 调用一个实时 pageinit 函数？我需要为每个页面使用 pageinit 和 pagecreate 吗？

例如，假设我有一个名为 face() 的函数，它可以查找是否有页脚，因此我可以向 .container 添加一个类以添加底部边距，从而遮挡主要内容。

从理论上讲，我不能运行这样的函数，在登陆页面或通过 AJAX 拉入页面时点击每个活动页面吗？

```
$('[data-role="page"].ui-page-active').live('pageinit', function(){ 
    face();
}); 
```

***不是：***

```
$("#brand-grid,#product-grid,#main-grid,#trends").live('pageinit', function() {
    face();
}); 
```

我发现当我首先登陆需要偏移的页面时它可以工作，但是当你转到另一个页面时它不再工作。这是因为 DOM 中有 2 个 div[data-role="page"] 并且我的命令太模棱两可了吗？还是因为 pageinit 仅适用于原始页面而不适用于 AJAX 内容？

我的下一个问题：从页面导航后如何销毁页面？如果可以的话，我不希望平板电脑运行 2 个 RoyalSlider 实例。

这是我的尝试：

```
$('[data-role="page"].ui-page-active').live('pageinit', function(){
     $('[data-role="page"]:not(.ui-page-active)').live('pageremove');
}); 
```

您拥有的任何见解都会很棒，我只想避免内存泄漏和性能下降。除了这些气质问题之外，JQM 的开发非常棒。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T05:38:30.757

对问题 #1 的回答：

我相信我和你有同样的问题，我是这样解决的：在 pageinit 处理程序中，你应该包含 event 参数，因为事件的目标是新页面的 div（即 data-role="page 的 div ")，因此您可以在任何用于定位到该页面上的 DOM 元素的 jQuery 选择器中使用目标作为上下文，例如：

```
$(document).on('pageinit', function(event) {
  $('#some-element', event.target).toggle();
}); 
```

对问题 2 的回答：

我想你可以在你的处理程序中为 pageremove 做同样的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T15:26:16.687

如果您想在每次通过 ajax 加载页面时运行一个函数，请使用

```
$(document).bind('pageinit') 
```

[http://jquerymobile.com/test/docs/api/events.html](http://jquerymobile.com/test/docs/api/events.html)

我认为你可以做类似的事情来删除页面

```
$(document).bind('pageremove') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T08:43:46.550

还要注意，在 jquery mobile 中，您不能在不同的页面中有重复的 ID。即使元素位于不同的页面中，ID 也必须不同，因为页面已添加到文档中。更多（更好）的解释在这里：

[https://forum.jquery.com/topic/pageinit-firing-twice#14737000002873163](https://forum.jquery.com/topic/pageinit-firing-twice#14737000002873163)

# actionscript-3 - mxml 模块和变量可见性

> ID：10336140
> 
> 赞同：0
> 
> 时间：2012-04-26T15:03:48.277
> 
> 标签：actionscript-3, flash, apache-flex, mxml

考虑以下代码

```
<fx:Script source="Script.as" />
......................
<s:Group>
    <s:layout>
        <s:HorizontalLayout/>
    </s:layout>
    <s:Spacer width="10" />
    <s:Button label="1" click="doSomething()"/>
    <s:Button label="2" click="holder.getCanvas().testDraw()"/>
    <s:Button label="3" click="doSomething()"/>
</s:Group>
<s:Scroller id="canvasGroup" width="650" height="500">
    <s:Group>
        <local:CanvasHolder id="canvas" />
    </s:Group>
</s:Scroller> 
```

我想在一个单独的模块中移动按钮（我们称之为`Toolbar.mxml`）。因此我需要移动`<fx:Script source="Script.as" />`（`Script.as`我也使用画布）。这是我的问题：

1.  我怎样才能看到`canvas`var in `Toolbar.mxml`（我可以）？
2.  是否有可能以某种方式 pu`<fx:Script source="Script.as" />`以便可以从`Toolbar.mxml`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T16:04:23.587

1.  您将无法`canvas`在`Toolbar.mxml`. 我建议使用 Flex 的事件架构来访问它。

    ```
    //Extend Event class to hold any data that must be passed
    //from Toolbar -> canvas
    public class CustomEvent extends Event
    {
        public static const CUSTOM_EVENT:String = "CustomEventTypeString";
        public var mImportantInfo:String = "";

        public function CustomEvent();
        {
            super(CUSTOM_EVENT);
        }

        override public function clone():Event
        {
            var evt:CustomEvent = new CustomEvent();
            evt.mImportantInfo = mImportantInfo;
            return evt;
        }
    }

    //in Script.as
    myToolbarID.addEventListener(CustomEvent.CUSTOM_EVENT,customEventHandler);
    ...
    protected function customEventHandler(var evt:CustomEvent)
    {
        canvas.myFunction(evt.mImportantInfo);
    }

    //in Toolbar.mxml
    var evt:CustomEvent = new CustomEvent();
    evt.mImportantInfo = "canvas needs me!";
    dispatchEvent(evt); 
    ```

    或者，您可以将画布对象直接传递给工具栏。

    ```
    <local:Toolbar ... myCanvas="{canvas}" ... />

    //in Toolbar.mxml
    public var myCanvas:CanvasHolder;
    ...
    myCanvas.myFunction(...); 
    ```

    是的，第二个选项要简单得多，但是当需要通信的组件不容易相互传递时，第一个选项通常很有用。

2.  你可以放`<fx:Script source="Script.as" />` *，* `Toolbar.mxml`如果那是你需要的。如果您需要在父级范围内调用函数，我建议再次使用事件架构，而不是某种`parent...`或`Application.application...`调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T19:22:10.587

了解您在做什么的最佳方式是使用`-keep`选项进行编译 - 这将生成从 MXML 模板编译的实际 AS3 代码。

假设 using`<Script source="script.as"/>`不是一个好方法——这与`include "script.as"`在 AS3 中的做法相同——IDE 不喜欢它，而且总的来说，它很混乱。如果您需要“代码背后”，只需先在 AS3 中编写它，然后在 MXML 中扩展您的 AS3 类。

另一件需要理解的重要事情 - 每次`id`在 MXML 模板中使用属性都会导致生成的类具有一个公共属性，其名称是`id`属性的值。因此，如果您将代码的某些部分移到声明该属性的类（或 MXML 模板）之外 - 您将按照与 AS3 类相同的方式进行处理 - `objectWithTheProperty.property`.

# jquery - 捕获特定提交的表单

> ID：10336149
> 
> 赞同：0
> 
> 时间：2012-04-26T15:04:18.117
> 
> 标签：jquery

我有以下代码：

```
$('#my-modal').modal('show');
...

$('form').submit(function(){
    ...
} 
```

如何调整我的代码以仅捕获提交**的#my-modal**表单？不是所有的形式？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T15:31:08.487

```
$('#my-modal').find('form').submit(function() {

}); 
```

jQuery find 命令仅在元素内查找，因此这将仅返回模式中的表单。

# jquery - 获取具有名称或类的按钮元素的 ID

> ID：10336150
> 
> 赞同：-1
> 
> 时间：2012-04-26T15:04:20.260
> 
> 标签：jquery

我可以这样做吗？

```
 var gender = $('.ImdbAddArtist').click(function() {
  alert(this.id);
}); 
```

我使用下面的代码，但它有点奇怪。

我可以从他们的名字中获得按钮的 ID 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T15:08:23.530

是的。您的代码可以正常工作：

```
//Bind click event handler to all elements with class of 'ImdbAddArtist'
var gender = $('.ImdbAddArtist').click(function() {
    /* When clicked, alert the value of the 'id' property of 'this'.
    'this' refers to the element that was clicked. */
    alert(this.id);
}); 
```

只要单击的元素具有`id`属性，您就会收到显示该值的警报。如果它没有`id`属性，您将收到一个空白警报。

这是一个[工作示例](http://jsfiddle.net/K2dDu/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T15:07:37.437

`$('.ImdbAddArtist')`. 这会选择~~一个元素~~多个元素。

一旦选择了这些元素，您就可以对它们做任何您想做的事情。

如果一个元素有一个 id，你可以得到那个 id，不管它是如何被选中的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T15:07:41.457

您的代码工作正常，但我想使用[.attr()](http://api.jquery.com/attr/)方法来获取元素属性...

对于元素的 id`alert($(this).attr("id"));`

对于元素类`alert($(this).attr("class"));`

只需使用 jquery 的 .attr() 函数即可获取元素的 id

# c# - 用于单元测试的 Castle 类代理

> ID：10336151
> 
> 赞同：2
> 
> 时间：2012-04-26T15:04:20.630
> 
> 标签：c#, unit-testing, castle-dynamicproxy

挠头怎么办。

假设我有一个`Foo`带有 2 个虚拟方法的具体类，`Execute()`并且`GetFile()`. `Execute()`会打电话`GetFile`。我想确保当它发生时，`GetFile()`会抛出几个不同的异常，这些异常`Foo`应该以可测试的方式优雅地处理。

对于我的单元测试，我设想`Foo`从 Castle 项目中实例化一个 DynamicProxy<>，我在其中拦截`GetFile()`以抛出异常，然后调用 DynamicProxy 对象的`Execute()`方法，并测试结果，但我不知道如何做到这一点。

这可能/实用吗？如果是这样，动态代理对象的创建会是什么样子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T16:12:27.350

您不需要手动编写自己的代理，因为大多数模拟框架都支持您的方案。

这是一个使用[Moq](http://code.google.com/p/moq/wiki/QuickStart)的示例（Moq 将在内部为您创建一个动态代理）：

```
public class SomeException : Exception { }

public class Foo
{
    public virtual int Execute()
    {
        try
        {
            GetFiles();
        }
        catch (SomeException)
        {
            return 1;
        }
        return 0;
    }

    public virtual void GetFiles()
    {
        //...
    }
}

[Test]
public void FooTest()
{
    var fooUnderTest = new Mock<Foo>();
    fooUnderTest.CallBase = true;
    fooUnderTest.Setup(f => f.GetFiles()).Throws(new SomeException());
    var result = fooUnderTest.Object.Execute();
    Assert.AreEqual(1, result);
} 
```

您只需要注意设置`Callbase = true`which 将：

> 如果没有期望覆盖成员（在 Rhino Mocks 中也称为“Partial Mocks”），则调用基类实现：默认为 false。

# android - android：谷歌地图加载问题

> ID：10336160
> 
> 赞同：0
> 
> 时间：2012-04-26T15:04:47.873
> 
> 标签：android, google-maps

我在我的应用程序中使用谷歌地图，代码在设备上完美运行，但地图没有加载！我只看到一个白屏！有什么问题 ？

这是代码，请帮助！

```
public class MyMap extends MapActivity {
   private MapView map;
   private MapController controller;
   @Override
   public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.main);
      initMapView();
      initMyLocation();
   }

   /** Find and initialize the map view. */
   private void initMapView() {
      map = (MapView) findViewById(R.id.map);
      controller = map.getController();
      map.setSatellite(true);
      map.setBuiltInZoomControls(true);
   }

   /** Start tracking the position on the map. */
   private void initMyLocation() {
      final MyLocationOverlay overlay = new MyLocationOverlay(this, map);
      overlay.enableMyLocation();
      //overlay.enableCompass(); // does not work in emulator
      overlay.runOnFirstFix(new Runnable() {
         public void run() {
            // Zoom in to current location
            controller.setZoom(8);
            controller.animateTo(overlay.getMyLocation());
         }
      });
      map.getOverlays().add(overlay);
   }

   @Override
   protected boolean isRouteDisplayed() {
      // Required by MapActivity
      return false;
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T07:23:59.073

将您的地图 api 密钥放入 xml[这里](http://mobiforge.com/developing/story/using-google-maps-android) 是获取地图 api 密钥的教程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T09:32:57.400

在 maplayout.xml 中创建您的谷歌地图 api 密钥和害虫

android:apiKey="你的 api 密钥"

这是免费的

# javascript - 如何在jQuery中添加媒体属性

> ID：10336161
> 
> 赞同：0
> 
> 时间：2012-04-26T15:04:50.397
> 
> 标签：javascript, jquery, video, html5-video

我正在使用一个 HTML5 和 jQuery 交互式视频库以及我从教程改编的 Flash 后备。该网站是流动的。我不知道 jQuery，我正在尝试让小型移动设备播放比当前提供的 (800x450) 更小的尺寸 (480x272) 的视频。

这是我更改代码的方式，但无法识别媒体查询。我的格式错误是什么？

```
var videoCode = '<video width="'+480+'" height="'+272+'" controls autoplay autobuffer>
                 <source src="video/'+videoFile+'_small.ogv" type="video/ogg" media="screen and (max-width:500px)">
                 <source src="video/'+videoFile+'_small.mp4" type="video/mp4" media="screen and (max-width:500px)">
                 <video width="'+800+'" height="'+450+'" controls autoplay autobuffer>
                 <source src="video/'+videoFile+'.ogv" type="video/ogg" />
                 <source src="video/'+videoFile+'.mp4" type="video/mp4" /> 
```

编辑：固定编码布局

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T15:27:32.757

您的代码似乎丢失了，但添加/更新元素的属性是`$('someselector').attr('attrname', 'value');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T14:09:14.807

```
//var videoFile = $(this).attr('videofile');
    var videoFile = (screen.width < 500) ? $(this).attr('videofile') + "_small" : $(this).attr('videofile');
    var videoPoster = $(this).attr('videofile');
    var videoPoster = $(this).attr('videofile');
    var videoWidth = (screen.width < 500) ? 200 : 800;
    var videoHeight = (screen.height < 500) ? 200 : 450; 
```

这被证明是解决方案。

# javascript - 裁剪图像，然后拉伸以填充可用空间

> ID：10336164
> 
> 赞同：2
> 
> 时间：2012-04-26T15:04:58.320
> 
> 标签：javascript, html, css

我正在尝试从 url 裁剪图像，然后将裁剪的图像拉伸到可用空间。

```
<div style="width:300px; height:400px;">
  <img style="width:100%; height:100%;" src="http://www.gravatar.com/avatar/eb95aa803f8c6d536afc87bf8d641ed4?s=128&amp;d=identicon&amp;r=PG" />
</div> 
```

这将适当地拉伸图像，但我不知道如何裁剪它。我尝试使用`clip:rect(0px,60px,200px,0px);`，但图像会先拉伸到可用空间，然后再应用剪辑，所以它对我不起作用。

编辑 - jsfiddle：http: [//jsfiddle.net/bjMp6/](http://jsfiddle.net/bjMp6/)

例如，我想尝试剪掉头部然后拉伸头部

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:22:17.517

我做了一个小提琴来说明画布解决方案：

[http://jsfiddle.net/dystroy/mDy24/](http://jsfiddle.net/dystroy/mDy24/)

这是html：

```
 <div id=theimg style="width:300px; height:400px;">
          <canvas id=thecanvas style="width:100%;height:100%;">
   </div>​ 
```

和 js ：

```
 var img = new Image();
   img.src = "http://www.gravatar.com/avatar/eb95aa803f8c6d536afc87bf8d641ed4?s=128&amp;d=identicon&amp;r=PG";
   img.onload = function() {
          var can = document.getElementById('thecanvas');
          var con = can.getContext("2d");
          console.log(con);
          con.drawImage(img, 0, 0, 50, 50, 0, 0, can.width, can.height);
   }​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T15:42:04.013

在没有第二个 div 的情况下实现 Yoshi 的想法

```
div
{
    width:300px; 
    height:400px;
    border:1px solid #333;
    overflow:hidden;
    position:relative;
}
img
{
    width:300%; 
    height:300%;
    position:absolute;
    top:0;
    left:-50%;
} 
```

添加边框只是为了查看包含的 div。这样，您将不需要知道容器的暗淡，但是要裁剪图像，您必须使用任何解决方案来处理数字，除非所有图像都具有相同的相对组成，即头像或类似的东西。

这是您观看乐趣的[小提琴](http://jsfiddle.net/bjMp6/)。

此外，随着容器的增长/缩小，您的图像将保留相同的裁剪和位置。

# php - 调用另一个类中的函数不起作用

> ID：10336166
> 
> 赞同：0
> 
> 时间：2012-04-26T15:05:00.213
> 
> 标签：php

这是一个快速的菜鸟问题。我正在尝试调用另一个类中的函数，但它不起作用。提前致谢

```
** main.php **
require_once("../push/push.php"); 
new APNS_Push($config);
start();

** push.php **

class APNS_Push
{
private $fp = NULL;
private $server;
private $certificate;
private $passphrase;

function __construct($config)
{
    $this->server = $config['server'];
    $this->certificate = $config['certificate'];
    $this->passphrase = $config['passphrase'];

    // Create a connection to the database.
    $this->pdo = new PDO(
        'mysql:host=' . $config['db']['host'] . ';dbname=' . $config['db']['dbname'], 
        $config['db']['username'], 
        $config['db']['password'],
        array());

    // If there is an error executing database queries, we want PDO to
    // throw an exception.
    $this->pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

    // We want the database to handle all strings as UTF-8.
    $this->pdo->query('SET NAMES utf8');
}

// This is the main loop for this script. It polls the database for new
// messages, sends them to APNS, sleeps for a few seconds, and repeats this
// forever (or until a fatal error occurs and the script exits).
function start()
{
    //writeToLog('Connecting to ' . $this->server);

    if (!$this->connectToAPNS())
        exit;

        // Do at most 20 messages at a time. Note: we send each message in
        // a separate packet to APNS. It would be more efficient if we 
        // combined several messages into one packet, but this script isn't
        // smart enough to do that. ;-)

        $stmt = $this->pdo->prepare('SELECT * FROM push_queue WHERE time_sent IS NULL LIMIT 25');
        $stmt->execute();
        $messages = $stmt->fetchAll(PDO::FETCH_OBJ);

        $deletedIds = array();

        foreach ($messages as $message)
        {
            echo 's'; 
            if ($this->sendNotification($message->message_id, $message->device_token, $message->payload))
            {
                //$stmt = $this->pdo->prepare('UPDATE push_queue SET time_sent = NOW() WHERE message_id = ?');

                $name = $message->name; 
                echo $name; 
                $value = '1'; 
                //$this->pdo->query('UPDATE users SET needsUpdate = '$value' WHERE username='$name'');

                //$stmt->execute(array($message->message_id));

                 $deletedIds[] = $message->message_id;

                //$stmt = $this->pdo->prepare('DELETE FROM push_queue WHERE message_id = ?');
                //$stmt->execute(array($message->message_id));

            }
            else  // failed to deliver
            {
                $this->reconnectToAPNS();
            }
        }

        //Delete the chunk of messages.
        $this->pdo->query('DELETE FROM push_queue WHERE message_id IN ('.implode(',', $deletedIds).')');

        //echo 'success'; 

        unset($messages);           

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T15:10:47.473

我看到一个丢失的`}`. 我在课程结束时添加了这一点，下面的工作正常。

```
$myPush = new APNS_Push($config);
$myPush->start(); 
```

# java - 在内部类中调用此实例

> ID：10336167
> 
> 赞同：2
> 
> 时间：2012-04-26T15:05:05.887
> 
> 标签：java, interface, iterator, nodes, inner-classes

我正在编写一个节点类，并且我想创建一个内部节点迭代器类，到目前为止我已经写过：

```
import java.util.Iterator;
import java.util.NoSuchElementException;

public class Node<E> {
  E data;
  Node<E> next;
  int current = 0;

  public Node(E data, Node<E> next){
    this.data = data;
    this.next = next;
  }

  public void setNext(Node<E> next){
    this.next = next;
  }

  private class NodeIterator implements Iterator {

    /*@Override
    public boolean hasNext() {      
      Node<E> node = this;
      for(int i=1; i<current; i++){
        node = node.next;
      }
      if(node.next==null){
        current = 0;
        return false;
      }
      current++;
      return true;
    }*/

    @Override
    public boolean hasNext() {
      // code here
    }

    /*public Node<E> next() {       
      if(next==null){
        throw new NoSuchElementException();
      }
      Node<E> node = this;
      for(int i=0; i<current && node.next!=null; i++){
        node = node.next;
      }
      return node;
    }*/

    @Override
    public Node<E> next() {
      // code here
    }

    @Override
    public void remove() {
      throw new UnsupportedOperationException();
    }
  }
} 
```

我想在 NodeIterator 中创建一个节点对象，如下所示`Node<E> node = this;`：

注释代码是用 Node 类编写的，我在 Node 类本身中实现了 Iterator，但我想让它成为一个内部类，有什么建议可以让它这样吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T15:06:06.353

写吧：

```
Node<E> node = Node.this; 
```

它访问封闭的外部节点实例

# perl - df 使用 perl 以表格形式输出

> ID：10336177
> 
> 赞同：-2
> 
> 时间：2012-04-26T15:05:41.690
> 
> 标签：perl

给定以下命令及其输出：

```
ssh -q $server 'df -hP /raj*

Size   Used  Avail Capacity  Mounted On
200G  154G   44G  79% /raj_day
200G  154G   44G  49% /raj1_day
200G  154G   44G  39% /raj2_day 
```

我想转换成表格格式，所以演示文稿应该很好。另外，要按排序顺序显示容量。在 perl 中对我有什么建议吗？

我的脚本如下...

```
#############################################
#!/usr/local/bin/perl

# Use either -h or -k flag or leave it blank for default (-k)
# -h for human-readable size output
# -k for 1k-block output
$flag = "-h";
@df = `df $flag`;

print "Content-type: text/htmln\n";
print "<table border=2>\n";
print "<tr>\n";

print "<td><b>Filesystem</b></td>\n";

if ($flag eq "-h") {
    print "<td><b>Size</b></td>\n";
}
else {
    print "<td><b>1k-blocks</b></td>\n";
}

print "<td><b>Used</b></td>\n";
print "<td><b>Avail</b></td>\n";
print "<td><b>Capacity</b></td>\n";
print "<td><b>Mounted on</b></td>\n";
print "</tr>\n";

foreach $line (@df) {
    next if ($line =~ /Filesystem/);

    ($fsystem,$blocks,$used,$avail,$capacity,$mounted) = split(/s+/,$line);

    print "fsystem is $fsystem\n";
    print "blocks is $blocks\n";
    print "used is $used\n";
    print "avail is $avail\n";
    print "capacity is $capacity\n";
    print "mounted is $mounted\n";

($number,$sign) = split(/%/,$capacity);
if ($number < 60) {
    print "<tr bgcolor=green>\n";
}
elsif (($number >= 60) && ($number < 90)) {
    print "<tr bgcolor=yellow>\n";
}
else {
    print "<tr bgcolor=red>\n";
}
#
print "<td>$fsystem</td>\n";
print "<td>$blocks</td>\n";
print "<td>$used</td>\n";
print "<td>$avail</td>\n";
print "<td>$capacity</td>\n";
print "<td>$mounted</td>\n";
print "</tr>\n";
}

print "</table>\n"; 
```

**输出如下**

> 内容类型：text/htmln **Filesystem** **Size** **Used** **Avail** **Capacity** **Mounted on** fsystem is /dev/ blocks is da3 95G
> 33G 58G 36% /
> 
> used 是avail 容量是mounted 是fsystem 是tmpf blocks 是
> 499M 88K 499M 1% /dev/ used 是hm
> 
> 可用性是安装容量是 fsystem 是 /dev/ 块是 da1
> 124M 39M 79M 33% /boot
> 
> used 是avail 是容量是mounted 是

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T17:44:10.057

就像 daxim 已经指出的那样：解析 的输出是一个愚蠢的主意`df`，但如果我不得不破解一个小脚本，它可能看起来像这样：

`df -B M -P /path1 /path2 /path3 | sed -e '1d' | sort -k 4,4 -r -h | column -t`

# wysiwyg - PyroCMS - 在前端添加所见即所得编辑器

> ID：10336179
> 
> 赞同：0
> 
> 时间：2012-04-26T15:05:51.447
> 
> 标签：wysiwyg, pyrocms

我需要在我的网站前端显示一个简单的编辑器。我试图以这种方式在我的 Public_Controller 中附加所见即所得的编辑器：

```
function ask(){
    $this->template
                ->title('ask your question')
                ->append_metadata($this->load->view('fragments/wysiwyg', $this->data, TRUE))
                ->build('user/ask');
} 
```

但是当我尝试查看我的前端页面时，我收到了这个错误：

```
An Error Was Encountered
Unable to locate the file: fragments/wysiwyg.php 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T17:32:02.723

我是这样解决的。在视图中的控制器`$this->template->append_metadata($this->load->view('fragments/wysiwyg', $this->data, TRUE));`中，只需使用`wysiwyg-advanced`

# jquery - 如何ajax提交这个没有提交按钮的表单？

> ID：10336180
> 
> 赞同：-1
> 
> 时间：2012-04-26T15:05:51.917
> 
> 标签：jquery

我有以下表格：

```
<form enctype="multipart/form-data" action="uploader.php" method="POST">
<input name="uploadedfile" type="file" />
</form> 
```

一旦用户点击了上传的文件输入并选择了一个文件，他们就可以在页面的不同区域点击这个按钮：

```
<a id="button">My button</a> 
```

怎么能点击我的按钮，怎么会触发表单的上传呢？重要提示：不能在表单内，也不能是输入元素。这也必须是一个 ajax 风格的操作，如果可能的话不重新加载页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:07:23.687

您可以给表单一个 ID（或使用多种变体之一来选择表单）：

```
<form id="myForm" [...] > 
```

并使用 jQuery[提交](http://api.jquery.com/submit/)表单：

```
$('#myForm').submit(); 
```

您希望提交功能在按钮的单击事件中：

```
$('#button').click(function(){
    $('#myForm').submit();
}); 
```

**更新**

要使用 ajax 提交表单，您可以执行以下操作：

```
$('#button').click(function(){
      var form = $('#myForm');
        $.ajax({
          url: form.attr('action').val()  ,
          type: 'POST' ,
          data: form.serialize()
        });
    }); 
```

如果您正在上传文件，您可能需要查看以下 jQuery 插件之一：

*   [jQuery Ajax 文件上传插件](http://www.phpletter.com/Demo/AjaxFileUpload-Demo/)
*   [多文件上传插件](http://www.fyneworks.com/jquery/multiple-file-upload/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:07:59.887

只需获取对表单的引用，然后调用`.submit`它：

```
$("#button").click(function() {
    $("form[action='uploader.php']").submit();
}); 
```

最好也给表单一个`id`，这样您就可以使用更主流的选择器来选择它，例如`$("#theForm")`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T15:10:27.743

您可以使用jQuery触发功能

```
$("#button").click(function(){
    $("form").trigger('submit');
})​; 
```

在这里查看[演示](http://jsfiddle.net/ranganadh/amQvM/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T15:10:34.670

您可以像上面的答案一样做，或者您可以提交表单，甚至无需刷新页面，如[HERE](http://net.tutsplus.com/tutorials/javascript-ajax/submit-a-form-without-page-refresh-using-jquery/)

# emacs - emacs 宏以 .csv 表示法将向量转换为矩阵

> ID：10336189
> 
> 赞同：1
> 
> 时间：2012-04-26T15:06:28.327
> 
> 标签：emacs

我有一个 csv 值的单行文本文件

我希望能够“漂亮地打印”文件以跨越多行以使其更具可读性

第一个没有。代表编号。下一节中的 csv 值，依此类推

例如

```
3,1,2,3,3,4,5,6 
```

将转换为：

```
3,1,2,3
3,4,5,6 
```

我对制作宏有点了解，例如

```
C-x (
C-s RET ,
C-x ) 
```

使用这个我可以做到：

`C-u 3 C-x e`移动 3 个 csv 值

我的症结是如何使用文件中的值粘贴到 arg 中`C-u`

也许我应该使用 e-lisp 函数作为我想“保存”以便在 emacs 会话中继续使用的函数。是否可以这样保存宏？

感激地收到任何想法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T16:11:39.470

我发现 elisp 比键盘宏更容易思考。这个怎么样：

```
(defun csv-line-breaks ()
  (interactive)
  (while (search-forward "," nil t 
                         (1+ (string-to-number (thing-at-point 'word))))
    (delete-char -1)
    (insert "\n")))

(global-set-key (kbd "C-c b") 'csv-line-breaks) 
```

在你的`.emacs`（或只是评估你的暂存缓冲区中的代码）中使用它，你将点放在行的开头，然后点击`C-c b`将行分成你想要的块。

这是做什么的：

1.  循环缓冲区直到它用完值，并且对于每个循环：
2.  读取第一个值。`(thing-at-point 'word)`抓取它在标点符号空格之间找到的任何东西（或多或少）。
3.  将实际上是字符串的值转换为数字
4.  在那个数字上加一个，然后向前移动那么多逗号
5.  删除前面的逗号
6.  插入新行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T21:12:11.663

您可能想看看 Emacs 的 csv-mode：http: [//emacswiki.org/emacs/CsvMode](http://emacswiki.org/emacs/CsvMode)

尽管它可能不完全符合您的要求，但它具有格式化功能以提高可读性，以及以各种方式处理 csv 文件的其他功能。

# c# - 为什么在 .NET 中尝试关闭 SqlConnection 时出现 ThreadAbortException？

> ID：10336190
> 
> 赞同：8
> 
> 时间：2012-04-26T15:06:35.233
> 
> 标签：c#, .net, vb.net

当我这样做时，我不断收到以下异常：

```
Using cnn As SqlConnection = New SqlConnection(ConnectionStr)
    cnn.Open()  'I am fine up to here'
End Using       'Here I am getting the following exception' 
```

手动调用 cnn.Dispose() 会导致相同的异常。在我的代码中的大多数地方似乎都可以，但就在这个函数中，我无法关闭我打开的连接，因为我不断收到 ThreadAbortException。我被难住了，有什么想法吗？任何提示？这是我得到的例外：

```
System.TypeInitializationException: The type initializer for 'System.Data.ProviderBase.DbConnectionClosedPreviouslyOpened' threw an exception. ---> System.Threading.ThreadAbortException: Exception of type 'System.Threading.ThreadAbortException' was thrown.
   --- End of inner exception stack trace ---
   at System.Data.ProviderBase.DbConnectionInternal.CloseConnection(DbConnection owningObject, DbConnectionFactory connectionFactory)
   at System.Data.SqlClient.SqlInternalConnection.CloseConnection(DbConnection owningObject, DbConnectionFactory connectionFactory)
   at System.Data.SqlClient.SqlConnection.Close()
   at System.Data.SqlClient.SqlConnection.Dispose(Boolean disposing) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T17:47:06.480

有人提出了一种可怕的“最终确定”方法。它不断触发并试图关闭连接。浪费了几个小时！！！总有一天我会摆脱代码中的所有 Finalize 方法——在那之前——把它吸干！

# c++ - C++ Gtk 线程。我做对了吗？

> ID：10336192
> 
> 赞同：2
> 
> 时间：2012-04-26T15:06:41.957
> 
> 标签：c++, multithreading, glib, gtkmm

我有一个 gtkmm 应用程序，我正在尝试将一些长时间运行的任务放入单独的线程中，这样它们就不会锁定 GUI。这是我的设计基于的教程：

[http://www.velvetcache.org/2008/09/30/gtkmmglibmm-thread-example](http://www.velvetcache.org/2008/09/30/gtkmmglibmm-thread-example)

当工作完成或需要更新某些内容时，我使用 Glib::Dispatcher 信号通知 GUI 线程，但是我不确定如何在工作线程和 GUI 线程之间传递数据。到目前为止，我一直在传递一个指向创建工人的类的指针，然后修改该类的公共成员，但有些事情告诉我这样做不是最正确的。这是一个例子：

```
class Some_GUI_class
{
public:
    std::string thread_message;

private:
    Worker_class* worker;

    void start_worker()
    {
        if (worker != NULL) return;

        worker = new Worker_class(this);
        worker->sig_message.connect(sigc::mem_fun(*this, &Some_GUI_class::display_message_from_thread);
        worker.start();
    }        

    void display_message_from_thread()
    {
        some_label->set_text(thread_message);
    }
}

class Worker_class
{
public:
    Worker_class(Some_GUI_class* gui_class) : gui_class(gui_class)
    {}

    void start()
    {
        thread = Glib::Thread::create(sigc::mem_fun(*this, &Worker_class::run), true);
    }

    Glib::Dispather sig_message;

protected:
    Glib::Thread* thread;
    Glib::Mutex mutex;

    Some_GUI_class* gui_class;

    void run()
    {
        // ...
        gui_class->thread_message = "Message from a thread!";
        sig_message();                
    }

} 
```

这本质上是可行的，但我想如果 GUI 线程想同时修改 thread_message 会有问题吗？只要我确定变量仅由单个线程修改还是有更好的方法，这样做是否安全？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T22:23:25.177

你有一个竞争条件。即使您的 gui 线程没有修改`thread_message`，允许 GUI 线程在另一个线程正在修改它时读取它也不会给您带来长期的快乐。这是因为 std::string 本身并没有受到多个线程访问它的保护，并且具有多个内部字段。如果一个线程正在修改其内部字段之一，而另一个正在读取它们，则从第二个角度来看，内部状态将不一致。

您可以在 GUI 类中使用互斥锁来保护对可能被另一个线程访问的变量的访问。在 get/set 例程中锁定和解锁互斥锁，并将这些例程用于所有其他访问，以确保一次只有一个线程可以访问或修改变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T07:24:30.090

通常互斥锁的使用不足以实现所需的行为。同一个工作线程（或者如果你有另一个工作线程）可能想要发送另一条消息，而第一个消息还没有被主线程处理。这就是为什么除了互斥锁之外，您还应该使用消息队列（例如`std::deque&lt;std::string&gt;`类的对象）而不仅仅是一个`std::string Some_GUI_class::thread_message`变量来避免这种消息丢失。

# css - 顶部导航栏阻止页面的顶部内容

> ID：10336194
> 
> 赞同：316
> 
> 时间：2012-04-26T15:06:56.757
> 
> 标签：css, twitter-bootstrap

我有这个 Twitter 引导代码

```
 <div class='navbar navbar-fixed-top'>
    <div class='navbar-inner'>
      <div class='container'>
        <a class='btn btn-navbar' data-target='.nav-collapse' data-toggle='collapse'>
          <span class='icon-bar'></span>
          <span class='icon-bar'></span>
          <span class='icon-bar'></span>
        </a>
        <div class='nav-collapse'>
          <ul class='nav'>
            <li class='active'>
              <a href='some_url'>My Home</a>
            </li>
            <li>
              <a href='some_url'>Option 1 </a>
            </li>
            <li>
              <a href='some_url'>Another option</a>
            </li>
            <li>
              <a href='some_url'>Another option</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div> 
```

但是当我查看页面的开头时，导航栏挡住了页面顶部附近的一些内容。关于如何在查看页面顶部时将其余内容向下推以使内容不被导航栏阻挡的任何想法？

* * *

## 回答 #1

> 赞同：378
> 
> 时间：2012-06-13T04:02:32.510

如果您使用的是响应式引导程序，那么添加这样的填充是不够的。在这种情况下，当您调整窗口大小时，页面顶部和导航栏之间会出现间隙。一个合适的解决方案如下所示：

```
body {
  padding-top: 60px;
}
@media (max-width: 979px) {
  body {
    padding-top: 0px;
  }
} 
```

* * *

## 回答 #2

> 赞同：283
> 
> 时间：2012-04-26T15:08:18.963

添加到您的 CSS：

```
body { 
    padding-top: 65px; 
} 
```

从[引导文档](http://getbootstrap.com/components/#navbar-fixed-top)：

> 固定导航栏将覆盖您的其他内容，除非您在正文顶部添加填充。

* * *

## 回答 #3

> 赞同：147
> 
> 时间：2013-10-09T04:15:35.670

对于引导程序 3，类`navbar-static-top`而不是`navbar-fixed-top`防止此问题，除非您需要导航栏始终可见。

* * *

## 回答 #4

> 赞同：62
> 
> 时间：2015-01-26T23:34:32.450

一个更方便的解决方案供您参考，它在我的所有项目中都很完美：

将您的第一个“div”从

```
<div class='navbar navbar-fixed-top'> 
```

至

```
<div class="navbar navbar-default navbar-static-top"> 
```

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2013-10-17T06:35:38.593

我正在使用 jQuery 来解决这个问题。这是 BS 3.0.0 的片段：

```
$(window).resize(function () { 
    $('body').css('padding-top', parseInt($('#main-navbar').css("height"))+10);
});

$(window).load(function () { 
    $('body').css('padding-top', parseInt($('#main-navbar').css("height"))+10);        
}); 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2014-06-23T12:39:12.147

[在我从MVC 5 教程](http://www.asp.net/mvc/tutorials/mvc-5/introduction/getting-started)派生的项目中，我发现更改主体填充没有效果。以下对我有用：

```
@media screen and (min-width:768px) and (max-width:991px) {
    body {
        margin-top:100px;
    }
}
@media screen and (min-width:992px) and (max-width:1199px) {
    body {
        margin-top:50px;
    }
} 
```

它解决了导航栏折叠成 2 或 3 行的情况。这可以插入到 bootstrap.css 行 body { margin: 0; 之后的任何位置。}

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2016-03-16T01:36:02.877

在我真正的固定导航栏之前创建一个虚拟的非固定导航栏，我取得了很好的成功。

```
<nav class="navbar navbar-default"></nav> <!-- Dummy nav bar -->
<nav class="navbar navbar-default navbar-fixed-top"> <!-- Real nav bar -->
    <!-- Nav bar details -->
</nav> 
```

间距适用于所有屏幕尺寸。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2017-10-17T21:26:51.997

bootstrap v4[入门模板 css](https://getbootstrap.com/docs/4.0/examples/starter-template/starter-template.css)使用：

```
body {
  padding-top: 5rem;
} 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2013-05-05T00:34:01.093

[从 Twitter 的这个示例](http://twitter.github.io/bootstrap/examples/fluid.html)中可以看出，在包含响应式样式声明的行之前添加以下内容：

```
<style> 
    body {
        padding-top: 60px;
    }
</style> 
```

像这样：

```
<link href="Z/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
<style type="text/css">
    body {
        padding-top: 60px;
    }
</style>
<link href="Z/bootstrap/css/bootstrap-responsive.min.css" rel="stylesheet" /> 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2016-06-23T17:58:10.263

using`percentage`是比`pixels`.

```
body {
  padding-top: 10%; //This works regardless of display size.
} 
```

如果需要，您仍然可以通过添加`breakpoints`另一个答案中提到的不同来明确`@spajus`

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2014-08-22T11:45:57.100

编辑：此解决方案不适用于较新版本的 Bootstrap，其中 navbar-inverse 和 navbar-static-top 类不可用。

使用 MVC 5，我修复我的方式，是简单地添加我自己的 Site.css，在其他人之后加载，使用以下行： `body{padding: 0}`

我将_Layout.cshtml开头的代码更改为：

```
<body>
    <div class="navbar navbar-inverse navbar-static-top">
        <div class="container">
            @if (User.Identity.IsAuthenticated) {
                <div class="top-navbar"> 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2019-07-16T15:09:28.953

到目前为止，我发现的不涉及硬编码高度和断点的最佳解决方案是在标记中添加一个额外`<nav...`的标签。

```
<nav class="navbar navbar-expand-md" aria-hidden="true">
    <a class="navbar-brand" href="#">Navbar</a>
</nav>
<nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
    <a class="navbar-brand" href="#">Navbar</a> 
```

通过这种方式，`@media`断点是相同的，高度是相同的（假设您`navbar-brand`是最高的对象，`navbar`但您可以轻松地替换非`fixed-top`导航栏中的另一个元素。

失败的地方是屏幕阅读器，它现在将呈现 2 个`navbar-brand`元素。这表明需要一个`not-for-sr`类来防止该元素显示给屏幕阅读器。但是该类不存在 [https://getbootstrap.com/docs/4.0/utilities/screenreaders/](https://getbootstrap.com/docs/4.0/utilities/screenreaders/)

我试图用`aria-hidden="true"`但 [https://www.accessibility-developer-guide.com/examples/sensible-aria-usage/hidden/](https://www.accessibility-developer-guide.com/examples/sensible-aria-usage/hidden/)来弥补屏幕阅读器问题，这似乎表明当屏幕阅读器是在焦点模式下，这当然是你真正需要它工作的唯一时间......

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2017-01-21T21:31:06.373

使用**navbar navbar-default**一切正常，但如果您使用的是**navbar-fixed-top**，则必须包含自定义样式 body { padding-top: 60px;} 否则它会阻止下面的内容。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2018-02-11T20:01:25.030

这里会出现两个问题：

1.  页面加载（内容隐藏）
2.  像这样的内部链接将滚动到顶部，并被导航栏隐藏：

> ```
> <nav>...</nav>              <!-- 70 pixels tall -->
> <a href="#hello">hello</a>  <!-- click to scroll down -->
> <hr style="margin: 100px">
> <h1 id="hello">World</h1>   <!-- Help!  I'm 70 pixels hidden! --> 
> ```

# 带有内部页面链接的 Bootstrap 4

要修复 1)，正如 Martijn Burger 上面所说，bootstrap v4 starter 模板 css 使用：

```
body {
  padding-top: 5rem;
} 
```

要解决 2) 检查[此问题](https://github.com/twbs/bootstrap/issues/1768)。这段代码大部分都有效（但不是在第二次点击相同的哈希时）：

```
window.addEventListener("hashchange", function() { scrollBy(0, -70) }) 
```

此代码使用 jQuery（不是苗条的 jQuery）为 A 链接设置动画：

```
 // inline theme global code here
  $(document).ready(function() {
    var body = $('html,body'), NAVBAR_HEIGHT = 70;
    function smoothScrollingTo(target) {
      if($(target)) body.animate({scrollTop:$(target).offset().top - NAVBAR_HEIGHT}, 500);
    }
    $('a[href*=\\#]').on('click', function(event){
      event.preventDefault();
      smoothScrollingTo(this.hash);
    });
    $(document).ready(function(){
      smoothScrollingTo(location.hash);
    });
  }) 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2013-03-15T16:34:04.820

你应该添加

```
#page {
  padding-top: 65px
} 
```

不破坏粘性页脚或其他东西

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-11-24T09:29:38.543

添加这个：

```
.navbar {
  position: relative;
} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-01-15T22:29:48.233

```
<div class='navbar' data-spy="affix" data-offset-top="0"> 
```

如果您的导航栏最初位于页面顶部，请将值设置为 0。否则，将值设置为`data-offset-top`导航栏上方内容的值。

同时，您需要修改`css`如下：

```
.affix{
  width:100%;
  top:0;
  z-index: 10;
} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2022-03-02T19:38:52.180

您可以使用`.stick-top`which 可以在滚动时将导航栏固定到顶部，而无需添加任何 CSS 填充

```
<div class="container-fluid mt-3">
  <nav class="navbar navbar-expand-sm bg-white navbar-light sticky-top pt-0">
    <a class="navbar-brand" href="/">
      <img src="/images/logo-full.png" alt="logo" width="150">
    </a>
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="/">Home</a>
      </li>
    </ul>
  </nav>
  <div class="row">
     .....
  </div>
</div> 
```

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2018-08-22T13:00:05.897

添加到您的 JS：

```
jQuery(document).ready(function($) {
  $("body").css({
    'padding-top': $(".navbar").outerHeight() + 'px'
  })
}); 
```

* * *

## 回答 #20

> 赞同：-2
> 
> 时间：2018-03-17T02:02:47.200

您可以根据屏幕分辨率设置边距

```
@media screen and (min-width:768px) and (max-width:991px) {
body {
    margin-top:100px;
}

@media screen and (min-width:992px) and (max-width:1199px) {
  body {
    margin-top:50px;
  }
}

body{
  padding-top: 10%;
}

#nav{
   position: fixed;
   background-color: #8b0000;
   width: 100%;
   top:0;
} 
```

# jquery - 在 jquery 中使用 each 时如何访问兄弟姐妹

> ID：10336195
> 
> 赞同：1
> 
> 时间：2012-04-26T15:06:59.490
> 
> 标签：jquery, each

考虑下面的代码

```
 $('.item_select').each(List);

 function List() {

        var x= this.siblings('.fooClass');
} 
```

当我尝试以这种方式访问​​兄弟姐妹时，我收到错误 *“对象不支持属性或方法‘兄弟姐妹’”*

如何访问“this”对象的兄弟姐妹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T15:09:09.443

```
$('.item_select').each(List);

 function List() {

        var x= $(this).siblings('.fooClass');
} 
```

# opencl - OpenCL 和多个视频卡

> ID：10336197
> 
> 赞同：0
> 
> 时间：2012-04-26T15:07:12.507
> 
> 标签：opencl, gpu

我对 CPU 和 GPU 之间差异的理解是 GPU 不是通用处理器，因此如果显卡包含 10 个 GPU，则每个 GPU 实际共享相同的程序指针并优化 GPU 上的并行性我需要确保每个 GPU实际运行相同的代码。

同步在同一张卡上不是问题，因为每个 GPU 在物理上是并行运行的，所以它们应该同时完成。

我的问题是，这如何在多张卡上工作？以它们运行的​​速度，硬件是否会在执行时间上产生细微的差异，以至于在一张卡上的一个 GPU 上的计算可能比在另一张卡上的另一个 GPU 上的相同计算结束得更快或更慢？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T18:27:25.680

> 同步在同一张卡上不是问题，因为每个 GPU 在物理上是并行运行的，所以它们应该同时完成。

这不是真的。例如，由于内存访问延迟的差异，GPU 上的不同线程可能在不同时间完成。这就是为什么 OpenCL 中有同步原语（例如`barrier`命令）的原因。您永远不能假设您的线程精确地并行运行。

多个 GPU 也是如此。无法保证它们是同步的，因此您需要依赖 clFinish 等 API 调用来显式同步它们的工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T20:32:12.373

我认为您可能对线程在 GPU 上的工作方式感到困惑。首先要解决多GPU的问题。多个 GPU 从不共享程序指针，因此它们几乎不会同时完成一个内核。

在单个 GPU 上，只有在同一计算单元（或 NVIDIA 术语中的 SM）上执行并且属于同一扭曲/波前的线程才能保证同步执行。您永远不能真正指望这一点，但对于某些设备，编译器可以确定会出现这种情况（我特别考虑一些 AMD 设备，只要 worgroup 大小硬编码为 64）。

无论如何，正如@vocaro 指出的那样，这就是为什么您需要为本地内存使用屏障。需要强调的是，即使在同一个 GPU 上，线程也不会在整个设备上并行执行 - 仅在每个计算单元内。

# jquery - Jquery 打开一个弹出窗口并将其嵌套到单击的 div 中

> ID：10336198
> 
> 赞同：0
> 
> 时间：2012-04-26T15:07:12.990
> 
> 标签：jquery, append, appendto

我想打开一个弹出窗口并将其嵌套到一个 div 中。我正在使用**appendTo**。我的弹出窗口必须在点击的 div 内打开。**父母**？

然后附加一些html。我错过了什么？

小提琴：http: [//jsfiddle.net/XeELs/151/](http://jsfiddle.net/XeELs/151/)

```
 if ($("#events .event").hasClass("selected")) {
            $('.popup-event').parent().appendTo($(".event"));
            $(this).fadeIn();
            $('.popup-event').append('<span class="close-popup-event" />'); 
        }else{
            $('.close-popup-event').fadeOut('');
       } 
```

**HTML**

```
<div class="event">
</div>

<aside class="popup-event">

</aside> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T15:21:24.863

你可以尝试这样的事情：

[http://jsfiddle.net/mkprogramming/XeELs/150/](http://jsfiddle.net/mkprogramming/XeELs/150/)

```
$('.event a').click(function() {
        $('.popup-event').appendTo($(this).parent());
        $('.popup-event').fadeIn();
        $('.popup-event').append('<span class="close-popup-event" />'); 
});​ 
```

我认为要注意的关键部分是`$(this).parent()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:25:19.153

我认为您的代码中有一些错误。首先，我会说最好使用 id 而不是 class 用于弹出事件，因为（据我所知）它是独一无二的。

另外，当你写

```
 $('.popup-event').parent().appendTo($(".event")); 
```

您尝试将“弹出事件” div 的**父**级附加到“事件” div。

我会做什么（如果我理解正确的话）是这样的：

```
$("div.event").bind('click', function() {
 $("#popup-event").appendTo($(this));
}); 
```

假设您在“popup-event”上放置了一个 id，并且您希望它出现在单击的 div 中。如果您希望它出现在单击的 div 的父级内，您将附加到

```
$(this).parent() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T15:18:32.497

你的第一个陈述是倒退的。将其更改为 $(".event").appendTo($('.popup-event').parent()); 或将 appendTo 更改为 append ，它将起作用。此外，验证您的两个 jQuery 对象都不为空。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T15:29:25.813

看看这个小提琴：http: [//jsfiddle.net/a9AHt/1/](http://jsfiddle.net/a9AHt/1/)

我把整个东西都包进去了`<div id="events">`，把类改成“选定的”，这样事件就会触发。

如果您取出子句中的`.parent()`in ，`appendTo`那么它将放入正确的元素。

此外，为了使其相对于该`.event`div 的位置，您需要`$(this)`在 click 事件中引用，这样您就不会意外获得另一个 div。

最后，添加`position:relative`到`.event`div 以确保它始终在该元素中。

# python - 有人可以解释一下这个奇怪的 Pygame 导入约定吗？

> ID：10336206
> 
> 赞同：7
> 
> 时间：2012-04-26T15:07:27.047
> 
> 标签：python, import, pygame

我看到人们通常像这样导入 Pygame：

```
import pygame
from pygame.locals import * 
```

我不明白第二行是什么。如果我们已经导入了整个 Pygame，为什么还要导入`pygame.locals`呢？Pygame 不是在导入后就已经包含它了吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T15:12:14.220

```
import pygame 
```

将 pygame 模块导入“pygame”命名空间。

```
from pygame.locals import * 
```

将 pygame.locals 中的所有名称复制到您当前的命名空间中。这不是必需的，但可以节省您的打字时间。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-26T15:10:34.563

实际上，来自 pygame[文档](http://www.pygame.org/docs/ref/locals.html)：

> 该模块包含 Pygame 使用的各种常量。它的内容会自动放置在 pygame 模块命名空间中。但是，应用程序可以使用 pygame.locals 仅包含带有“from pygame.locals import *”的 Pygame 常量。

因此，当您使用`import pygame`. 如果我们这样做，我们可以看到：

```
>>> import pygame
>>> from pygame.locals import *
>>> set(dir(pygame.locals)).issubset(set(dir(pygame)))
True 
```

所以，`pygame.locals`是`import pygame`.. 的一个子集，所以如果你已经导入了 pygame，那么绝对没有意义！`pygame`除此之外，您还可以在没有前缀的情况下访问它们。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-26T23:30:07.867

当你执行

```
import pygame 
```

pygame 已完全导入并可以使用，不再需要导入。

现在的问题是关于这一行：

```
from pygame.locals import * 
```

应该使用它有几个原因，还有一些不这样做的原因。

1.  **表现。**当您键入类似`foo.bar.baz.ClassName.classmethod()`的内容时，名称空间中将进行 4 次查找，这会花费一些时间。代码中这样的行越多，不必要的时间浪费就越多。
2.  **简单。**当您编写教程时，您会尝试尽可能简单地解释事物。所以代码越少，教程就越好。
3.  **舒适。**当您键入代码时，您会将其分散到不同的文件中。因为使用较小的边文件更容易，然后将它们全部导入主文件。但是您完全了解您要导入的内容。
4.  **命名空间污染。**当您将模块中的所有内容导入全局变量时，您在全局变量的选择上会受到更多限制。例如，`from struct import *`您不能将函数命名为`pack`. 因此，在使用此类导入之前，您应该探索该模块。它包含什么？它自己导入什么？
5.  **混乱。**当您多次使用此类导入时，`from foo import *`and`from bar import *`和`from baz import *`，某些变量或常量可能会被遮蔽或覆盖。在本例中，`foo.version`被 覆盖`bar.version`，现在命名为`version`。因此，`foo.checkversion()`将不再正常工作。

正确的方法是以显式形式导入常用函数，或者将它们作为快速参考，尤其是当您对模块不太了解时。

例如：

```
from foo.bar.baz import a_very_useful_function 
```

或者

```
import foo.bar.baz
quick_referenced_fn = foo.bar.baz.a_very_useful_function 
```

这里`quick_referenced_fn`仍然`foo.bar.baz.a_very_useful_function`在 的命名空间中工作`foo.bar.baz`，但解释器直接知道它的地址，不会进行额外的查找。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-26T15:11:31.570

```
import pygame
from pygame.locals import * 
```

[http://www.pygame.org/docs/tut/ImportInit.html](http://www.pygame.org/docs/tut/ImportInit.html)

这里的第一行是唯一必要的。它将所有可用的 pygame 模块导入到 pygame 包中。第二行是可选的，将一组有限的常量和函数放入脚本的全局命名空间中。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-26T15:12:38.477

> Pygame 不是在导入后就已经包含它了吗？

没有。不必要。

```
stefanos-imac:python borini$ touch a/__init__.py
stefanos-imac:python borini$ touch a/b.py
stefanos-imac:python borini$ echo "print 'hello' " >a/b.py 
stefanos-imac:python borini$ python
Python 2.7.1 (r271:86832, Jul 31 2011, 19:30:53) 
[GCC 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2335.15.00)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import a
>>> import a.b
hello
>>> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-13T19:57:09.430

我不会担心的。我知道你可能被告知`*`进口产品不好。这在某种程度上是正确的，除非 Pygame 开发人员专门定义了`__all__`属性，他们将所有这些方便的常量放入其中，并且他们拥有。因此，他们通过这种方式使这个特定的`*`进口变得安全。

与属性相关，因此请在源代码中搜索属性中`*`包含的所有常量。`__all__``pygame.locals``__all__`

# iphone - iOS应用内购买skproductrequest随机得到没有产品返回

> ID：10336209
> 
> 赞同：2
> 
> 时间：2012-04-26T15:07:33.583
> 
> 标签：iphone, ios, in-app-purchase

我在应用内购买方面遇到了一个奇怪的问题，任何见解或帮助将不胜感激。我为我的应用设置了应用内购买，并在测试期间定期使用它们；但是，每隔一段时间，SKProductRequest 将返回 0 个产品，并且不会加载任何产品，直到我从设备中完全删除该应用程序并重新安装它。然后一切都会再次出现，并且可以进行购买。

我不确定是什么导致了这个问题。它可能与应用内购买的测试环境有关？我知道一切都已正确配置，因为我可以正常使用应用内购买而不会出现任何错误。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T15:48:39.017

产品请求在设备上失败可能有多种原因。基本上，StoreKit 环境非常挑剔：如果应用程序中的某些内容看起来很奇怪（例如代码签名，或嵌入的 Provisioning Profile，或具有相同配置文件的多个应用程序），它不会发送请求或接收无效数据。

静默失败的一个常见原因是为同一个应用程序安装了多个配置文件。您可以尝试：

1.  从您的设备中卸载所有配置文件（在设置中），
2.  从设备中删除应用程序（以删除嵌入式配置文件），
3.  重新安装应用程序。

几个月前我写了一篇关于这个问题的小博文，你可以在那里找到更详细的信息：http: [//kemenaran.winosx.com/ ?2011/12/02/180-ios-developer-what-to-do -if-in-app-purchases-stop-working](http://kemenaran.winosx.com/?2011/12/02/180-ios-developer-what-to-do-if-in-app-purchases-stop-working)

# c# - Int32.Parse 与 int.Parse

> ID：10336213
> 
> 赞同：12
> 
> 时间：2012-04-26T15:07:42.627
> 
> 标签：c#, coding-style

使用 C# 类型别名而不是 CTS System.* 类型（`int`代替`Int32`和`string`代替`String`）是一种常见的做法。但是，我不清楚在这种情况下使用什么来调用类型的静态方法：别名或系统类型。

Microsoft 似乎没有定义任何使用别名而不是系统类型的指南。但在 MSDN 中，别名用于变量，而 CTS 等效项用于静态调用。例如[MSDN：解析数字字符串](http://msdn.microsoft.com/en-us/library/xbtzcc4w.aspx)

```
int number;
Int32.TryParse(value, out number); 
```

StyleCop 在[SA1121](http://stylecop.soyuz5.com/SA1121.html)中定义相反- 始终使用别名。所以`int.Parse`可以，但`Int32.Parse`不是。

这个问题是风格问题（在我看来）。但我不明白使用 CTS 类型进行静态调用的原因。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-26T15:12:13.303

我个人总是对静态方法调用使用完整的类名。这强调了这样一个事实，即它们实际上是包含代码片段的类，而不是别名所暗示的最简单的可能（原始）数据。

我总是为变量使用别名。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-26T15:09:34.503

绝对没有技术差异，只是编码风格。我个人主张`int.Parse`，但也有许多知名[专家](http://www.wintellect.com/CS/blogs/jeffreyr/default.aspx)倾向于相反。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T15:19:39.873

我强烈建议使用`int.Parse(...)`而不是 .`int32`如果您想象有人阅读了您在 64 位机器上运行它的代码，并且很可能他没有意识到这一点`int32`并且`int`只是*别名*，这将使他做出错误的假设。

换句话说，即使从功能的角度来看没有任何区别，为了避免代码中的歧义（参考大概是 32 位代码），我建议使用`int.Parse(..)`

# windows - Windows Server 2008 DNS 传输失败

> ID：10336215
> 
> 赞同：0
> 
> 时间：2012-04-26T15:07:53.577
> 
> 标签：windows

我有一个严重的问题。我想创建子域，我的 ISP 是主 DNS 服务器，但它改变了，现在他是奴隶，我是主人，他必须传输我的区域数据。当我想在名为的区域上设置区域传输时`creativevision.hu`，我的 ISP DNS 服务器出现错误，例如`The server with this IP address is not authoritative for the required zone`. 另外，当他想下载我的区域数据时，他会收到一个错误：

```
Apr 25 20:49:04 core named[20917]: transfer of 'creativevision.hu/IN' 
from 78.131.7.21#53: failed while receiving responses: REFUSED
Apr 25 20:49:04 core named[20917]: transfer of 'creativevision.hu/IN' 
from 78.131.7.21#53: end of transfer 
```

我完全迷路了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T15:11:44.403

您的 ISP 需要将您的 DNS 服务器 (78.137.7.21) 的 IP 地址添加为受信任的 DNS 服务器，它将接受来自该服务器的传输。大多数 ISP 可能不会这样做。我的建议是更改为托管 DNS 提供商，让您成为主服务器，而他们将充当从服务器。

我不知道有谁会这样做，但我会先查看 www.ultradns.com 或 dns.com，看看他们是否有解决方案。

# jquery - 切换时更改文本

> ID：10336235
> 
> 赞同：0
> 
> 时间：2012-04-26T15:09:34.910
> 
> 标签：jquery

我正在尝试在用户单击但似乎不起作用时更改文本..以下是代码。

不工作示例：http: [//jsfiddle.net/3jt3P/1/](http://jsfiddle.net/3jt3P/1/)

```
<a href="#" class="slide" onclick="firstclick();">Show First</a> ... 
<a href="#" class="slide1" onclick="secondclick();">Show Second</a>

<div id="one" class="content">one</div>
<div id="second" class="content">two</div>

<script type="text/javascript">

        function firstclick() { 
            $('#second').hide();
            $('#one').slideToggle(400, function () {
                debugger
                if ($(this).is(":visible")) {
                    $('.slide > a').text('Hide First');
                    $('.slide1 > a').text('Second');
                }
                else {
                    $('.slide > a').text('First');
                } 
            });
            return false;

        } 
        function secondclick() { 
            $('#one').hide();
            $('#second').slideToggle(400, function () {

                if ($(this).is(":visible")) {
                    $('slide1 > a').text('Hide Second');
                    $('slide > a').text('First');
                }
                else
                    $('slide1 > a').text('First');

            });
            return false;
        } 

        $(document).ready(function () {
            // Hide the "view" div.
            $('#one').hide();
            $('#second').hide();

        });
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T15:25:52.840

`.slide > a`您的标记中没有这样的元素

试试这个（顺便说一句，这是 Jamiec 的 jsfiddle 修复的更新）
[http://jsfiddle.net/eWExr/6/](http://jsfiddle.net/eWExr/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:32:48.260

我会稍微不同地处理这个问题；`data-*`用属性标记您的链接并仅使用一个事件处理程序来控制它们显示/隐藏相关内容。

使您的标记类似于：

```
<a href="#" class="slide" data-content="#one" data-text="first">Show first</a>
<a href="#" class="slide" data-content="#second" data-text="second">Show second</a>

<div id="one" class="content">one</div>
<div id="second" class="content">two</div> 
```

请注意，我添加了 2 个属性：

*   `data-content`包含相关内容的 id
*   `data-text`包含链接中使用的后缀。

我还更改了两个链接以具有相同的类 - 这可以是任何东西，但允许我定位链接，以便我可以附加相同的行为：

```
$('.slide').on("click",function(){
    var $link = $(this);
   var contentid = $link.data('content');
    $('.slide').not($link)
               .filter(function(){ return $(this).data('contentvisible');})
               .trigger('click');
    $(contentid).slideToggle(400,function(){
        if($(this).is(':visible')){
            $link.data('contentvisible',true).text('Hide ' + $link.data('text'));
        }
        else{
           $link.data('contentvisible',false).text('Show ' + $link.data('text'));                
        }
    });
});
$('#one').hide();
$('#second').hide(); 
```

现场示例：http: [//jsfiddle.net/htn3S/1/](http://jsfiddle.net/htn3S/1/)

**编辑**：我更新了上面的内容，包括在显示之前隐藏其他可见元素的功能。

# java - Chrome 中的 Kerberos 重放攻击错误

> ID：10336236
> 
> 赞同：2
> 
> 时间：2012-04-26T15:09:39.177
> 
> 标签：java, gwt, tomcat, kerberos

我在 Chrome 中遇到了 Kerberos 问题。Kerberos 似乎认为请求（HTTP POST）是重放攻击。我正在深入研究源代码。而且我发现 Kerberos 的重放缓存保留了请求时间戳的记录。并且这个重放缓存总是认为请求Authenticator已经在重放缓存中，所以它认为是重放攻击。

这是我的错误信息：

```
KrbException: Request is a replay (34)
   at sun.security.krb5.KrbApReq.authenticate(KrbApReq.java:300)
   at sun.security.krb5.KrbApReq.<init>(KrbApReq.java:134)
   at sun.security.jgss.krb5.InitSecContextToken.<init>(InitSecContextToken.java:79)
   at sun.security.jgss.krb5.Krb5Context.acceptSecContext(Krb5Context.java:724)
   at sun.security.jgss.GSSContextImpl.acceptSecContext(GSSContextImpl.java:323)
   at sun.security.jgss.GSSContextImpl.acceptSecContext(GSSContextImpl.java:267)
   at sun.security.jgss.spnego.SpNegoContext.GSS_acceptSecContext(SpNegoContext.java:874)
   at sun.security.jgss.spnego.SpNegoContext.acceptSecContext(SpNegoContext.java:541)
   at sun.security.jgss.GSSContextImpl.acceptSecContext(GSSContextImpl.java:323)
   at sun.security.jgss.GSSContextImpl.acceptSecContext(GSSContextImpl.java:267)
   at net.sourceforge.spnego.SpnegoAuthenticator.doSpnegoAuth(SpnegoAuthenticator.java:444)
   at net.sourceforge.spnego.SpnegoAuthenticator.authenticate(SpnegoAuthenticator.java:283)
   at net.sourceforge.spnego.SpnegoHttpFilter.doFilter(SpnegoHttpFilter.java:229) 
```

该错误仅在 Chrome 中产生（而不是在 IE 中）。我正在使用 GWT 2.3 和 Tomcat 6。

谁能帮我解决这个问题？

# javascript - 将网页链接从段落中分离到一个 JS 数组中

> ID：10336237
> 
> 赞同：0
> 
> 时间：2012-04-26T15:09:48.743
> 
> 标签：javascript, jquery

我检查了上面的所有答案，看看我的答案是否得到了回答，请不要将其标记为重复

在我正在构建的应用程序中有一个 div

```
<div class="paragraphlink"> </div> 
```

我允许用户输入任何这样的文本

> 莱科宁是进入福布斯杂志“名人 100”名单的两位一级方程式车手**http://www.formula1.com之一，另一位是费尔南多·阿隆索****http://www.google.com**。他在《福布斯》杂志**http://www.forbesmagazine.com上排名第 36 位**

如果您注意到上述段落中存在 url。你能帮我用一个javascript代码从上面的para中提取所有的url吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T15:15:19.270

使用正则表达式

像这样的正则表达式

```
 /(http|https|ftp|ftps)\:\/\/[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,3}(\/\S*)?/g 
```

将匹配网址

有关 Javascript 正则表达式的更多信息，请检查[this](http://www.w3schools.com/jsref/jsref_obj_regexp.asp)和[this](http://www.javascriptkit.com/javatutors/re.shtml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:15:19.197

您可以在文本上使用 match 函数来提取 url，例如：

```
var str = "Räikkönen was among the two Formula One drivers http://www.formula1.com who made it into the Forbes magazine's The Celebrity 100 list, the other being Fernando Alonso http://www.google.com. He is 36th on Forbes magazine's http://www.forbesmagazine.com";

var urls = str.match(/http(s)?:\/\/[a-z0-9_-\.\/]+/ig);
// now the var "urls" is in array with your URL 
```

但是这里的正则表达式很简单，你可以在许多网站上找到更好的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T15:16:27.443

你可以 RegExp 对象

```
var reg = new RegExp(/http(s)?:\/\/[a-z0-9_-\.\/]+/ig);

var html = "Räikkönen was among the two Formula One drivers http://www.formula1.com who made it into the Forbes magazine's The Celebrity 100 list, the other being Fernando Alonso http://www.google.com. He is 36th on Forbes magazine's http://www.forbesmagazine.com"

html.match(reg); 
```

将返回您的网址数组。

# ios - Monotouch Ipad3 视网膜无法以全分辨率运行

> ID：10336243
> 
> 赞同：0
> 
> 时间：2012-04-26T15:10:17.827
> 
> 标签：ios, xamarin.ios, retina-display, ipad-3

我需要做什么才能以全分辨率运行？不管我做什么，

```
UIScreen.MainContent.Bounds => {1024x768} 
```

我正在运行 Monodevelop 2.8.8.4 并将我的部署目标设置为 5.1

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T15:19:31.747

无法验证这一点，因为我没有 iPad3，但 iPhone4 的视网膜显示边界并不能说明全部情况。

您还需要考虑规模；

```
CGRect bounds = [[UIScreen mainScreen] bounds];
CGFloat screenScale = [[UIScreen mainScreen] scale];
CGSize realSize = 
    CGSizeMake(bounds.size.width * scale, bounds.size.height * scale); 
```

这很可能转化为[`UIScreen.MainScreen.Scale`](http://docs.go-mono.com/?link=P%3aMonoTouch.UIKit.UIScreen.Scale)在 MonoTouch 上乘以宽度和高度。

# java - 使用扫描仪从用户输入中读取整数值

> ID：10336253
> 
> 赞同：-2
> 
> 时间：2012-04-26T15:10:55.280
> 
> 标签：java

到目前为止，我有以下代码：

```
 class Card{

    private static String[] pairArray{"A,A","K,K","Q,Q","J,J","10,10",
                     "9,9","8,8","7,7","6,6","5,5","4,4","3,3","2,2"};

    public static void generateRandom(){
    int minimum = 0;
    int maximum = 13;
    int randomNum = minimum + (int)(Math.random()* maximum);

       System.out.print("Player 1, You have been dealt a pair of: ");
       System.out.println(pairArray[randomNum]);

   }

    public static void main(String[] args) {
    generateRandom();
    }
  } 
```

它将数组中的一个元素随机分配给玩家 1。

我需要读取用户输入的他想和多少玩家一起玩的信息，然后生成 4 次，每个玩家得到一组不同的卡片。我想我需要使用扫描仪功能，但我不确定将其包含在此代码中的哪个位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T15:18:19.813

```
Scanner s = new Scanner(System.in);
int num = s.nextInt(); 
```

这将读取用户输入的 int 。你把它放在 generateRandom(); 之前 在你的主要。使用用户提供的数字，您可以对它做任何您想做的事情，包括创建一个 while 循环来生成这么多随机的东西。你提供的信息不多，所以我能提供的就这么多了。

# jquery - 如何用jquery替换锚链接的参数？

> ID：10336256
> 
> 赞同：1
> 
> 时间：2012-04-26T15:11:00.313
> 
> 标签：jquery, url, href

我现在正在学习jquery。我想在页面加载时用另一个 url 的参数替换。例如这是我的代码

```
 <div class="changeparam">
<a href="http://demo.org/post.php?i=123&p=456&s=789">Link</a>
 </div> 
```

现在我需要将参数 i、p 和 s 的值分别更改为不同的值，例如 abc、def、ghi。我如何在页面加载时做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T15:19:01.233

你需要知道旧的价值观吗？如果不是，您不能按照以下方式做一些事情（假设所有链接都具有相同的查询字符串并且如果不是这种情况则需要扩展）：

```
$(document).ready( function ( ) {
    // Get the full address from the original link
    var old_fulladdr = $('div.changeparam a').attr('href');

    // split it to get the actual file address
    var old_addr_parts = old_fulladdr.split('?');

    // This may need something more complex...
    var new_querystring = 'i=abc&p=def&g=ghi';

    // This changes the href of the link to the new one.
    $('div.changeparam a').attr('href',old_addr_parts[0] + '?' + new_querystring);

});​ 
```

更新：我创建了一个更灵活的函数，它接受一个查询字符串、一个要替换的项目数组和一个替换值数组，然后输出一个新的查询字符串。看看这个 jsfiddle：http: [//jsfiddle.net/LWzZR/1](http://jsfiddle.net/LWzZR/1)

另外，我同意评论者对您的问题的看法-虽然有可能，但不建议这样做:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T15:51:56.240

尝试使用[jQuery BBQ](http://benalman.com/code/projects/jquery-bbq/docs/files/jquery-ba-bbq-js.html#jQuery.param.querystring%28build_url%29)插件。它使处理查询字符串的问题大大减少。

我想你会想试试

```
$(document).ready(function(){
    $.param.querystring($(".changeparam").attr("href"), {i:123, p:456, s:789})
}); 
```

它有很多很酷的东西来处理查询字符串，你不必在这里重新发明轮子。

# iphone - iPhone RestKit 如何启用 RKLogDebug？

> ID：10336259
> 
> 赞同：32
> 
> 时间：2012-04-26T15:11:14.493
> 
> 标签：iphone, objective-c, ios, logging, restkit

我正在尝试调试 RestKit 对象映射，并注意到在`RKLogDebug`整个代码中都有调用，但似乎该宏在某处未定义。我该如何启用它？

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-04-26T15:23:06.627

你想添加这样的东西：

```
 RKLogConfigureByName("RestKit", RKLogLevelWarning); 
    RKLogConfigureByName("RestKit/ObjectMapping", RKLogLevelTrace);
    RKLogConfigureByName("RestKit/Network", RKLogLevelTrace); 
```

到你的代码。有关各个级别，请参见 RKLog.h。这是相当的伎俩。

注意，这在末尾支持通配符，例如，

```
 RKLogConfigureByName("*", RKLogLevelTrace); // set all logs to trace,
    RKLogConfigureByName("RestKit*", RKLogLevelWarning); // set all RestKit logs to warning (leaving the app-specific log untouched). 
```

- 谢谢凯文！

对于 Swift 用户，请使用以下语法：

```
 RKlcl_configure_by_name("RestKit/Network", RKlcl_vTrace.rawValue)  
    RKlcl_configure_by_na`enter code here`me("RestKit/ObjectMapping", RKlcl_vOff.rawValue) 
```

- 谢谢达西特！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-02T13:33:04.867

如第一个答案中所述，您可以通过调用将您的应用程序配置为特定组件`RKLogConfigureByName`。

您还可以使用 Xcode 方案中的环境变量为特定组件配置 RestKit。这在您为不同环境持续构建应用程序时尤其有用。

这里是 RestKit 日志的详细解释[http://restkit-tutorials.com/logging-in-restkit-debug-tips/](http://restkit-tutorials.com/logging-in-restkit-debug-tips/)

# php - 让 MySQL 数据库黑客中的个人数据安全吗？

> ID：10336261
> 
> 赞同：0
> 
> 时间：2012-04-26T15:11:24.577
> 
> 标签：php, mysql, database, security

我刚刚开始构建一个相当简单的 Web 应用程序，其中数据在该国的一个地方使用 php 和 mysql 存储在数据库中，并在另一部分进行检索。数据将包含在任何情况下都不得被第三方访问的个人信息。在某些情况下，第三方会主动尝试访问该信息。让我们假设它是证人的名字。这是一个在发展中国家以低预算完成的系统，没有任何形式的证人保护。

我想采取的措施之一是在将数据放入数据库之前对其进行匿名处理，我认为这是最安全且成本最低的。除此之外，我可以采取什么措施来减少黑客获取这些人数据的机会？

如果我在存储数据之前对数据使用高度加密，那么输入数据的人和检索数据的人都需要拥有加密密钥，对吗？这是一个问题，因为许多人将输入/检索数据，从而造成漏洞。如果密钥存储在服务器上，例如在代码中，它就不会起到太大的保护作用，对吧？或者可以使代码对黑客安全吗？

我在某处读到有人建议：

> 网络服务器<==>应用程序服务器（在 DMZ 中）<==>数据库服务器（在第二个防火墙后面），其应用程序可以排除和防止 SQL 注入和类似防御。在这种情况下，任何黑客都无法接近数据库本身。

真的吗？是否需要三台物理服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T15:18:21.650

*作为服务器管理员，您可以访问数据库吗？如果是这样，那么根据定义，该设置应该被认为是不安全的。*

当然，一定要使用 SSL 等显而易见的技术，因为这几乎可以防止中间人攻击。仔细编程您的应用程序以避免 SQL 注入和那些东西。

如果其中一个层（例如网络服务器）被破解，则可以从该层向其下方的层发出请求，等等。分层模型根据定义并不安全，它只需要一些额外的步骤。

# variables - 在 SSIS 2012 中使用 Foreach 循环容器时，如何修复 XML 源中的源为空错误？

> ID：10336263
> 
> 赞同：7
> 
> 时间：2012-04-26T15:11:29.633
> 
> 标签：variables, ssis, mapping, foreach-loop-container

我在 SSIS 2012 中遇到了一个非常简单的任务的问题。

我有一个在 FOR-EACH-FILE Enumerator 模式下运行的 for-each 容器。我想读取带有 XML 文件的目标文件夹。文件夹的路径配置正确。文件字段设置为 *.xml

变量映射使用以下变量定义：User::FileVar，索引 0。

现在我在容器内添加一个简单的数据流任务。数据流任务只有一个 XML 数据源任务，就是这样。对于 XML 数据源任务，设置了 XSD 位置。当我单击选择列时，我可以看到 XSD 架构中的列。

但是：当我保存 XML 任务时，我总是收到错误消息：`The Property XMLDataVariable is empty`。我尝试了两种数据访问模式，来自变量的 XML 文件和来自变量的 XML 数据。错误消息仍然存在，我无法运行该包。

我不使用任何表达式，无论是在 foreach 循环容器中还是在数据流任务中。

我不知道这里出了什么问题，我完全按照旧版本 SSIS 的一些教程中所示的步骤进行了操作。

你有什么想法？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-26T15:30:10.630

问题是*XML 源*试图在设计时验证给定文件的存在。*但是，只有在运行时，当Foreach 循环容器*执行并遍历给定文件夹中可用的每个 XML 文件时，您才会知道文件名。

我使用我对其他 SO 问题之一的回答重新创建了一个 SSIS 2012 包。 [**SSIS从文件夹中读取多个xml文件**](https://stackoverflow.com/a/6957825/756519)

我能够重现错误`The property "XMLDataVariable" on the XML Source was empty`

![错误](../Images/911913fbbd4d94b5975dea8af6c28faf.png)

在 XML 源中，我将属性设置`ValidateExternalMetadata`为`False`. 将此设置为 false 将强制包在设计时不验证 xml 文件路径的存在。

![验证外部元数据](../Images/00cefc7f8ecbf1757cbdb8adfc881790.png)

我成功地执行了这个包。

![成功执行](../Images/1ea05b2db9832b4d4c3707a205beb93f.png)

希望有帮助。

# java - 带有类文件的 RMI 有效，但不适用于 jars

> ID：10336264
> 
> 赞同：0
> 
> 时间：2012-04-26T15:11:30.333
> 
> 标签：java, rmi, executable-jar

当我使用类文件测试 RMI 客户端和服务器时，它可以在两台不同的机器上正常工作。现在，当我对 jar 执行相同操作时，客户端无法连接到服务器上的 RMIRegistry。然后，当我在同一台机器上使用 jar 进行测试时，客户端可以连接到服务器（即使通过网络 ip 而不是 localhost）。

我怀疑这与 RMI 注册表有关，但我是 RMI 的新手，所以我不知道......

我像这样创建一个 RMIRegistry：

```
rmiregistry = LocateRegistry.createRegistry(ServiceConstraints.REGISTRY_PORT);
rmiService = (RmiSubjectService) UnicastRemoteObject.exportObject(this,
                    ServiceConstraints.REGISTRY_PORT);
rmiregistry.rebind("RmiService", rmiService); 
```

客户端连接如下：

```
remoteService = (RmiSubjectService) Naming.lookup("/" + host + ":"+ port + "/RmiService"); 
```

使用 jar 运行时我在客户端上遇到的错误：

```
java.rmi.ConnectException: Connection refused to host: 192.168.2.132; nested exception is:
        java.net.ConnectException: Connection timed out: connect
        at sun.rmi.transport.tcp.TCPEndpoint.newSocket(Unknown Source)
        at sun.rmi.transport.tcp.TCPChannel.createConnection(Unknown Source)
        at sun.rmi.transport.tcp.TCPChannel.newConnection(Unknown Source)
        at sun.rmi.server.UnicastRef.newCall(Unknown Source)
        at sun.rmi.registry.RegistryImpl_Stub.lookup(Unknown Source)
        at java.rmi.Naming.lookup(Unknown Source)
        at ch.uzh.ifi.group10.client.Client.subscribe(Client.java:148)
        at ch.uzh.ifi.group10.client.Client.main(Client.java:242)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader.main(JarRsrcLoa
der.java:58)
Caused by: java.net.ConnectException: Connection timed out: connect
        at java.net.PlainSocketImpl.socketConnect(Native Method)
        at java.net.PlainSocketImpl.doConnect(Unknown Source)
        at java.net.PlainSocketImpl.connectToAddress(Unknown Source)
        at java.net.PlainSocketImpl.connect(Unknown Source)
        at java.net.SocksSocketImpl.connect(Unknown Source)
        at java.net.Socket.connect(Unknown Source)
        at java.net.Socket.connect(Unknown Source)
        at java.net.Socket.<init>(Unknown Source)
        at java.net.Socket.<init>(Unknown Source)
        at sun.rmi.transport.proxy.RMIDirectSocketFactory.createSocket(Unknown S
ource)
        at sun.rmi.transport.proxy.RMIMasterSocketFactory.createSocket(Unknown S
ource)
        ... 13 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T14:56:19.147

问题确实出在网络上。具体来说，我没有意识到我的防火墙阻止了套接字，所以我无法连接。

# windows-phone-7.1 - App Hub 中的功能比 WMAppManifest.xml 中的更多

> ID：10336266
> 
> 赞同：3
> 
> 时间：2012-04-26T15:11:42.670
> 
> 标签：windows-phone-7.1, capability, app-hub

我使用 Silverlight XNA 开发了一个应用程序，带有 AdDuplex（用于 Silverlight 1.2.3）和 Scoreloop（Core Social 1.2.0）。

我已将我的应用程序的功能定义`WMAppManifest.xml`为

```
<Capabilities>
    <Capability Name="ID_CAP_NETWORKING"/>
    <Capability Name="ID_CAP_MEDIALIB"/>
    <Capability Name="ID_CAP_IDENTITY_DEVICE"/>
</Capabilities>` 
```

并且每个功能都可以正常工作。（对不起，我不知道如何在`<`这里输入。请帮我编辑它。）

但是，在我提交后，它在 App Hub 中显示为

```
Required Device capabilities
data services 
music and video library
web browser 
owner identity 
XNA framework 
Silverlight framework 
phone identity 
trial 
```

虽然我后来运行了 Markeplace 测试套件，但它显示了同样的东西。

我的问题是：

从哪里来？`owner identity`_`web browser`

为什么 App Hub 会推翻我的决定？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T05:48:17.090

当您提交时，系统会为您重新计算能力，[如此处所述](http://msdn.microsoft.com/en-us/library/gg180730%28v=vs.92%29.aspx)。据我了解，将添加未声明的功能，但不会删除未使用的功能。

`owner identity`几乎可以肯定是来自您的广告框架或社交框架，并且由对该`Microsoft.Phone.Info.UserExtendedProperties`类的任何引用确定（包括来自您引用的任何库）。

`web browser`也可能来自这两个框架之一，并由对`Microsoft.Phone.Controls.WebBrowser`类的直接引用决定。

有关如何确定每种功能的完整列表，`%programfiles(x86)%\Microsoft SDKs\Windows Phone\v7.1\Tools\Marketplace\Rules.xml`请在您喜欢的文本编辑器中打开。

# sql-server - WAL序列号无限？

> ID：10336269
> 
> 赞同：3
> 
> 时间：2012-04-26T15:11:46.273
> 
> 标签：sql-server, database, oracle, postgresql, db2

我想知道数据库 WAL 序列是否是无限的？我猜大多数 WAL 记录都有 WAL 编号的固定大小？这是一个非常大的数字，大到无法结束吗？这可能是相当浪费空间？还是大 DB 玩家发明了更好的方法？

或者他们是否实现了一些逻辑让 WAl 再次从 0 开始？这可能会对代码中的许多地方产生重大影响......？

编辑：

**影响：**例如，崩溃后的恢复依赖于沿时间线变大的序列号。如果序列可以重新开始，则恢复可能会变得混乱。

**术语 WAL 序列号：** WAL（预写日志，即在应用层收到事务成功之前保证在磁盘上的事务日志）。这个日志有一个不断增长的数字来保持数据库的一致性，例如在恢复的情况下，通过检查来自页面的 WAL 序列号与来自 WAL 的序列号。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T15:54:53.867

I would not assume that every database implements the same strategy.

Speaking only for Oracle, the SCN (system change number) is a 48-bit number so an Oracle database can handle nearly 300 trillion transactions before hitting the limit. Realistically, that will take eons. Even if you could do 1 thousand transactions per second, the SCN wouldn't hit the limit for 300 billion seconds or roughly 9500 years. Now, there are various things that can cause the SCN to increment in addition to just doing transactions (famously the [recent issue with hot backups and database links](http://www.infoworld.com/d/security/fundamental-oracle-flaw-revealed-184163-0?page=0,1) that caused a few users to exceed the database's checks for the reasonability of the SCN) so it won't really take 9500 years to hit the limit. But, realistically, it gives Oracle plenty of time to move to a 64-bit SCN some years down the line, buying everyone a few more centuries of functionality.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T23:38:05.853

与 SQL Server 一样，DB2 调用对[日志序列号](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.admin.ha.doc/doc/c0057411.html)(LSN) 进行计数。IBM 最近将其 LSN 的大小从 6 个字节扩大到 8 个字节，无符号。LSN 是一个不断增长的指针，它显示在日志文件中可以找到特定日志记录的位置。一个 8 字节的 LSN 意味着 DB2 数据库在地址空间用完之前可以写入近 16 [exbibytes的日志记录，此时必须卸载数据库的内容并将其复制到一个新的数据库中。](http://en.wikipedia.org/wiki/Exbibyte)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-11-12T17:27:59.353

Postgres WAL 数字在技术上可以溢出，但只有在写入 32 Eb 数据之后，因为 WAL 文件指针是 64 位的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-29T11:14:47.353

在 PostgreSQL 中，WAL 日志存储为一[组段文件](http://www.postgresql.org/docs/9.1/static/wal-internals.html)。“段文件被赋予不断增加的数字作为名称，从 000000010000000000000000 开始。” 数字没有环绕。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-26T16:06:18.227

请参阅[什么是 LSN：日志序列号](http://rusanu.com/2012/01/17/what-is-an-lsn-log-sequence-number/)。本文描述了 SQL Server LSN（WAL 编号）的结构，并向您展示了如何对其进行解码。由于 LSN 的大小是固定的并且它们不会翻转，因此您可能会用完它们。不过，这将需要很长时间。

# c# - 将规范模式序列化到数据库

> ID：10336271
> 
> 赞同：6
> 
> 时间：2012-04-26T15:12:02.903
> 
> 标签：c#, specification-pattern

好的，我们必须计算极其复杂的保险登记数据的资格和费率。可以根据年龄、就业特征、鞋码等制定政策。1962 年之前出生的人可能被排除在外，除非他们住在德克萨斯州并养有贵宾犬等。

所以我们可以构建实现规范模式的类。我们可以嵌套和规范，或规范等。这很棒。但是现在我们如何将它序列化到数据库中呢？

我们可以将我们的 c# 类转储到 xml 并保留它。但这很脆弱，但几乎不可能查询。将类序列化为 xml 并将其转储到大文本字段中具有明显的代码气味。

是否有关于如何将嵌套规范放入数据库的规范答案？我的 Google-fu 让我失望了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:18:50.770

规范化，它可能是许多项目的祸根。

通常，我选择一种实用的方法，即为任何可以查询（并因此被索引）的内容设置单独的列，并将所有其他列以序列化的形式转储到 blob 中。

如果这不是您的选择，您将不得不通过创建不适用于所有行的列来将冗余引入表中。

对于这类问题，我还没有遇到一种万能的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T19:06:33.330

**使用反射，您只需要一个完全限定的名称**即可获得一个类。因此，将其存储在数据库中。

# gnuplot - 如何在多行中显示 GNUPLOT 键

> ID：10336273
> 
> 赞同：3
> 
> 时间：2012-04-26T15:12:10.573
> 
> 标签：gnuplot, legend

我怎样才能在多行甚至列中显示 gnuplot 标题。事实上，我有 8 个头衔，我刚刚使用了这个：

```
set key below 
```

所以每一个都显示在单独的行中。所以人影变得拥挤。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T03:28:54.167

尝试这个：

```
set terminal postscript enhanced color
set output 'plot.eps'

set key below
plot sin(x) title "{/Arial=8 LongFunctionKeyName}", \
 sin(2*x) title "{/Arial=8 LongFunctionKeyName}", \
 sin(3*x) title "{/Arial=8 LongFunctionKeyName}", \
 sin(4*x) title "{/Arial=8 LongFunctionKeyName}", \
 sin(5*x) title "{/Arial=8 LongFunctionKeyName}", \
 sin(6*x) title "{/Arial=8 LongFunctionKeyName}", \
 sin(7*x) title "{/Arial=8 LongFunctionKeyName}", \
 sin(8*x) title "{/Arial=8 LongFunctionKeyName}", \
 sin(9*x) title "{/Arial=8 LongFunctionKeyName}", \
 sin(10*x) title "{/Arial=8 LongFunctionKeyName}", \
 sin(11*x) title "{/Arial=8 LongFunctionKeyName}", \
 sin(12*x) title "{/Arial=8 LongFunctionKeyName}", \
 sin(13*x) title "{/Arial=8 LongFunctionKeyName}" 
```

这是 gnuplot 4.6 中的输出： ![在此处输入图像描述](../Images/3f987bf190a95544998bd91fcb582c1f.png)

# gwt - GWT 中的 Unicode 规范化

> ID：10336275
> 
> 赞同：5
> 
> 时间：2012-04-26T15:12:11.727
> 
> 标签：gwt, unicode, normalization, unicode-normalization, text-normalization

> **可能重复：**
> [在 GWT 中将 éàçè... 替换为等效的“eace”](https://stackoverflow.com/questions/7500673/replace-eace-with-equivalent-eace-in-gwt)

是否有一些库可以用来在 gwt 中进行 unicode 规范化操作？（例如，在上下文中保证拉丁 O 等于西里尔 O）

# jquery - 如何检查客户端脚本资源是否在页面中注册？

> ID：10336280
> 
> 赞同：3
> 
> 时间：2012-04-26T15:12:14.383
> 
> 标签：jquery, asp.net, custom-controls, embedded-resource, webresource.axd

我开发了一个自定义控件（不是用户控件），它使用了一些 jQuery 脚本。

我已将控件的脚本作为嵌入资源嵌入到程序集中，并在 OnPreRender 事件的页面中将其注册，如下所示：

```
protected override void OnPreRender(EventArgs e)
{
   string controlScript = "Namespace.MyScript.js";
   ClientScriptManager csm = this.Page.ClientScript;
   csm.RegisterClientScriptResource(typeof(ResourceFinder), controlScript );
   base.OnPreRender(e);
} 
```

此控件在部署到已安装 jQuery 库的项目中时有效，但如果 jQuery 库不可用怎么办。我将如何检查该库是否已经在项目中，如果没有，则将其也嵌入到程序集中并从那里拉出。我在想类似的事情：

```
protected override void OnPreRender(EventArgs e)
{
    ClientScriptManager csm = this.Page.ClientScript;

    // Here I would need to check if jQuery is already registered
    // but there is no such method like: IsClientScriptResourceRegistered
    if (csm.IsClientScriptResourceRegistered("jQuery"))
    {
        string jQueryLib = "Namespace.jquery-1.7.2.min.js";
        csm.RegisterClientScriptResource(typeof(ResourceFinder), jQueryLib);
    }

    string controlScript = "Namespace.MyScript.js";
    csm.RegisterClientScriptResource(typeof(ResourceFinder), controlScript );
    base.OnPreRender(e);
} 
```

我知道无论如何我都可以将 jQuery 库嵌入到程序集中，但是如果 jQuery 已经在项目中，那么我最终会得到一个页面，其中包含对库的两次调用，如下所示：

```
<!-- Project's jQuery lib -->
<script type="text/javascript" src="/scripts/jquery-1.7.2.min.js"></script>
<!-- DLL's duplicated jQuery lib:  -->
<script type="text/javascript" src="/WebResource.axd?d=AP7y...r0bHQl"></script>
<!-- DLL Control's MyScript.js -->
<script type="text/javascript" src="/WebResource.axd?d=uTGR...ur15b"></script> 
```

...这是我试图避免的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T01:00:52.850

插入一个脚本标记以使用短路运算符测试 jQuery 对象。如果 jQuery 不可用，请使其可用。

```
<script>window.jQuery || document.write('<script src="js/libs/jquery-1.7.1.min.js"><\/script>')</script> 
```

# apache - 无法在休息服务中获取 http post 参数

> ID：10336282
> 
> 赞同：0
> 
> 时间：2012-04-26T15:12:17.727
> 
> 标签：apache, cxf

我想创建一个休息服务，它应该检索请求中所有可用的 HTTP POST 参数，注意参数是动态的，因此我不能使用 FormParam。

我让其余服务使用编码的表单 url 并使用 org.apache.cxf.jaxrs.ext.MessageContext.getHttpServletRequest() 访问 HttpServletRequest 对象，但我在请求中找不到任何参数。

知道如何检索休息服务器中 httpservletrequest 对象中可用的所有 http post 参数吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T05:19:00.083

好吧，我只需要将 MultivaluedMap 作为我的休息服务的参数，这个地图将包含所有 http post 参数。

# objective-c - 如何将数据放入文本字 段进行编辑？

> ID：10336283
> 
> 赞同：0
> 
> 时间：2012-04-26T15:12:25.370
> 
> 标签：objective-c, ios, xcode4

我有这段代码（XCode 4，使用带有 ARC 的 Storyboards），它从数组（rArray）中获取数据并将其放置在它最初来自的文本字段中（我想编辑数据）。数组 (rArray) 中包含有效数据，但文本字段中没有任何内容。我究竟做错了什么？

```
SingletonListOfReadings *rShareInstance = [SingletonListOfReadings sharedInstance];
rArray *ra = [rShareInstance.listOfReadings objectAtIndex: indexPath.row];  //  get an rArray object out of listOfReadings

//  place data back into textfields
EnterDataViewController *edvc = [[EnterDataViewController alloc] init];
edvc.txtSTA1.text = ra.rSTA;
edvc.txtBS.text = ra.rBS;
edvc.txtFS.text = ra.rFS;
edvc.txtDesc.text = ra.rDesc;

[self.navigationController pushViewController:edvc animated:YES]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:59:22.740

当您尝试填充 VC 中的 UI 文本元素时，它尚未设置（它只会在 [self.navigationController pushViewController:edvc animated:YES]; 之后设置（并且只有当它获取 viewDidLoad 时）。

简单的方法是将 txtSTA1、txtBS、txtFS 等更改为字符串（确保它们在 edvc .h 文件中），像现在一样填充它们

因此，txtSTA1STR 是 edvc 的 .H 文件中的字符串，而 txtSTA 是 edvc 中的 xib（或以编程方式）中的 UI 文本元素

```
EnterDataViewController *edvc = [[EnterDataViewController alloc] init];
edvc.txtSTA1STR = ra.rSTA;
edvc.txtBSSTR= ra.rBS;
edvc.txtFSSTR= ra.rFS;
edvc.txtDescSTR= ra.rDesc;

[self.navigationController pushViewController:edvc animated:YES]; 
```

在 edvc 里面

```
- (void)viewDidLoad
{
   txtSTA1.text = txtSTA1STR;
   //... etc
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T19:13:28.467

我修好了……我把原始代码移到了处理对象的视图控制器（edvc）上。然后我从需要数据的视图控制器中调用它。

工作正常...我认为问题在于接收文本字段的寻址。

谢谢你的帮助......我很感激。

# android - 给出 Api Google Maps 的路线和时间

> ID：10336284
> 
> 赞同：-1
> 
> 时间：2012-04-26T15:12:30.423
> 
> 标签：android, google-maps-api-3

我想知道是否使用 Google Maps API 我可以跟踪两点之间的路线，计算要走的距离和时间，以及 Maps Android 应用程序，如果有人有如何做的示例，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T21:03:33.803

检查此链接：[Android google maps APIs get Directions Programming](https://stackoverflow.com/questions/6642438/android-google-maps-apis-get-directions-programming)

谷歌地图路由没有官方的 android API。如果需要，您应该从谷歌地图网络服务下载路径并手动绘制路径（多边形）。

# java - 使用系统文件分隔符分割文件名

> ID：10336293
> 
> 赞同：24
> 
> 时间：2012-04-26T15:13:16.657
> 
> 标签：java, regex, windows, file-io

我有一个完整的文件路径，我想获取文件名。

我正在使用以下说明：

```
String[] splittedFileName = fileName.split(System.getProperty("file.separator"));
String simpleFileName = splittedFileName[splittedFileName.length-1]; 
```

但在 Windows 上，它给出：

```
java.util.regex.PatternSyntaxException: Unexpected internal error near index 1
\
 ^ 
```

我可以避免这个例外吗？有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-04-26T15:15:21.067

问题是`\`必须对其进行转义才能在正则表达式中将其*用作反斜杠。*您应该使用[*不*](https://guava.dev/releases/23.0/api/docs/com/google/common/base/Splitter.html)[使用正则表达式的](https://guava.dev/releases/23.0/api/docs/com/google/common/base/Splitter.html)[拆分 API](https://guava.dev/releases/23.0/api/docs/com/google/common/base/Splitter.html)*，或者[`Pattern.quote`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#quote%28java.lang.String%29)先使用：*

 *```
// Alternative: use Pattern.quote(File.separator)
String pattern = Pattern.quote(System.getProperty("file.separator"));
String[] splittedFileName = fileName.split(pattern); 
```

或者更好的是，`File`为此使用 API：

```
File file = new File(fileName);
String simpleFileName = file.getName(); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-26T15:18:30.887

当你写一个文件名时，你应该使用`System.getProperty("file.separator")`.

当您读取文件名时，您可能会使用正斜杠或反斜杠作为文件分隔符。

您可能想尝试以下方法：

```
fileName = fileName.replace("\\", "/");
String[] splittedFileName = fileName.split("/"));
String simpleFileName = splittedFileName[splittedFileName.length-1]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T15:20:31.387

首先，对于这个特定问题，我建议使用 java.util.File 类而不是正则表达式。

话虽如此，您遇到的问题的根源是反斜杠字符“\”表示 Java 正则表达式中的转义序列。正在发生的事情是正则表达式解析器看到反斜杠并期望在它之后有另一个字符来完成转义序列。解决此问题的最简单方法是使用 java.util.regex.Pattern.quote() 方法，该方法将转义您提供的字符串中的任何特殊字符。

通过此更改，您的代码变为：

```
String splitRegex = Pattern.quote(System.getProperty("file.separator"));
String[] splittedFileName = fileName.split(splitRegex);
String simpleFileName = splittedFileName[splittedFileName.length-1]; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-26T15:26:28.263

另一种更简单的方法可能是

```
File f = new File(path);
String fileName = f.getName(); 
```

我相信只要路径与平台兼容，这将起作用，即不确定路径“c:\file.txt”是否可以在 Linux 上运行。*

# forms - 尝试在表单中创建实体字段时出现 Symfony2 错误

> ID：10336299
> 
> 赞同：0
> 
> 时间：2012-04-26T15:13:38.667
> 
> 标签：forms, symfony, entity

```
$tip->setGame($em->getRepository('XXXBundle:Game')->find($id));
        $form = $this->createFormBuilder($tip)->add('player', 'entity', array(
        'class' => 'XXXBundle::FootballPlayer',
        /*'query_builder' => function(\XXX\XXXBundle\Entity\FootballPlayerRepository $er)
        {
          $er->findByCurteam($team->getName());
        },*/
    ))->getForm(); 
```

（在我的代码中没有真正使用“XXX”）错误：

> 警告：class_parents(): Class XXX\XXXBundle\Entity\ 不存在，无法加载到 D:\www\xxx\xxx\vendor\doctrine\lib\Doctrine\ORM\Mapping\ClassMetadataFactory.php 行 223

似乎找不到实体类 - 奇怪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:49:56.513

您的代码中有一些奇怪的地方：`'class' => 'XXXBundle::FootballPlayer',`您确定`::`存在吗？从未见过，似乎是一个错误（也许会引发错误）。

经过测试，是的，这是因为 : 的双重`::`替换。`:``'class' => 'XXXBundle:FootballPlayer',`

# asp.net-mvc - iframe 的 MVC 替代方案

> ID：10336300
> 
> 赞同：4
> 
> 时间：2012-04-26T15:13:46.460
> 
> 标签：asp.net-mvc, asp.net-mvc-3, iframe, partial-views

我正在寻找一种替代方法来使用 IFRAME 在使用 MVC3 的所有页面的包装页面中加载整个页面。我需要用于集中登录和身份验证的包装器页面，并且希望在包装器的一部分中动态加载其他页面，就像在 WPF 中加载模块一样。我以前使用 IFRAME 来完成此操作，但我想保持导航不变（即后退按钮将转到先前加载的“插件”页面而不是包装器的前一页）。我认为我可能能够使用部分视图来完成此操作，但无法找到从完全不同的项目（或已托管的站点）加载部分视图的方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T19:27:02.910

您可以进行 ajax 调用以从外部站点获取内容并将它们放在父页面 html 中的所需位置。这你可以做页面的加载。

使用jquery，它会是这样的：

```
$.ajax({
        url: 'http://www.externalsite.com',
        cache: false,
        dataType: "html",
        success: function (data) {
           $("#divInsideParentPage").html(data);
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:17:55.327

查看标题为“布局/母版页方案 - 基础”下的[此页面](http://weblogs.asp.net/scottgu/archive/2010/07/02/introducing-razor.aspx)

简而言之，您创建一个主模板并为您的内容将出现的位置插入占位符......

它的工作原理取决于您使用的视图引擎（Razor 等...）

编辑：

WRT History/Back 按钮，您也许可以使用[history.js](https://github.com/balupton/History.js/)来实现您想要的。请参阅广泛使用它的[此站点](http://spotlight-publishing.co.uk/)（它使用 AJAX 加载内容 - 初始加载后基本页面永远不会更改）。

# r - 在 R 中，如何仅在某个数据区间内绘制条形图？

> ID：10336301
> 
> 赞同：1
> 
> 时间：2012-04-26T15:13:49.243
> 
> 标签：r, plot

我的问题很简单。我必须使用条形图在 R 中绘制数据系列。数据包含在一个向量中`vet`。

我用过`barplot`，它从第一个到最后一个绘制我的数据： `barplot(vet)`，一切都很好。

现在，相反，我想绘制的不是我所有的数据，而是其中的一部分：从 10% 到最后。我怎么能用 barplot() 做到这一点？我怎么能用 plot() 做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T15:29:08.030

您需要在绘图之前对数据进行子集化：

```
##Work out the 10% quantile and subset
v = vet[vet > quantile(vet, 0.1)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T15:30:12.123

目前尚不清楚您想要做什么。

如果您只想绘制条形的子集（但整个条形），那么您可以在将数据传递给`barplot`.

如果您想绘制所有条形图，但只绘制超过 10% 的部分（不包括 0），那么您可以通过设置`ylim`参数来做到这一点。但是非常不鼓励制作不包含 0 的条形图。如果 0 没有意义，最好使用点图而不是条形图。

如果您想要常规绘图，但想要排除绘图内给定窗口之外的绘图，那么该`clip`函数可能就是您想要的。

包中的`gap.barplot`功能`plotrix`也可能是您想要的。

# c# - 向 linqtosql dbml 中的表添加新列 - 无法删除所选类

> ID：10336303
> 
> 赞同：1
> 
> 时间：2012-04-26T15:13:55.477
> 
> 标签：c#, linq-to-sql

我希望向表中添加一个新列，通常我会在 SQL 中添加该列，然后在 dbml 中删除/添加该表以刷新其定义。

但是如果我尝试删除我得到的表

> 无法删除选定的类，因为它被用作一个或多个 DataContext 方法的返回类型。

解决此问题以添加新列的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T15:41:13.170

您无需删除/添加 dbml 中的表即可刷新其定义。只需右键单击 dbml 设计器上的现有实体 - >“添加属性”。（*您也可以通过添加新属性在设计器生成的代码文件上执行此操作*）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-06T23:44:21.197

当您更新表定义并尝试更新 DBML 并收到此错误时，请进入 yourproject.designer.vb，搜索“表名”，找到相关的存储过程并将其删除。然后将表添加到 DBML。然后再次添加相关的存储过程。那应该可以解决您的问题。希望它会有所帮助

# javascript - 为什么页面刷新会触发 .keyup()？

> ID：10336305
> 
> 赞同：3
> 
> 时间：2012-04-26T15:14:00.707
> 
> 标签：javascript, jquery

我有这个功能：

```
$('.PhoneNumbers').on('keyup focusout', $('input:text[name^="Customers[0].PhoneNumbers"]'), function (e) {
    phoneRadioBtns(e);
}); 
```

问题是，当我刷新页面时，它会触发 keyup 事件并执行函数，这不是预期的结果。有谁知道如何纠正这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:23:54.487

只有在输入中按 F5 时才会发生这种情况吗？

（这是我设法重现的唯一方法：试试这里[http://jsfiddle.net/ybuTv/](http://jsfiddle.net/ybuTv/)）

解决它的一种方法是从事件中排除 F5 按钮：http: [//jsfiddle.net/ybuTv/1/](http://jsfiddle.net/ybuTv/1/)

```
$(function() {
    $('.PhoneNumbers').on('keyup focusout', $('input:text[name^="Customers[0].PhoneNumbers"]'), function(e) {
        if(e.which!=116){
            phoneRadioBtns(e);
        }
    });

}); 
```

# linux - 在没有超级用户的情况下重新启动 apache

> ID：10336307
> 
> 赞同：3
> 
> 时间：2012-04-26T15:14:06.490
> 
> 标签：linux, apache, bash, permissions, apache2

是否有可能在没有 root 权限或具有 root 权限的情况下执行优雅重启并检查 apache 配置语法？

我已经尝试为`suid`执行重启的脚本设置位。这是脚本本身：

```
#!/bin/bash

FILENAME=$1
DATE=`date +%Y%m%d`
DIRECTORY='bckp/'
if [ ! -d "$DIRECTORY" ]; then
    echo "Backup directory doesn't exist. Creating one."
    mkdir $DIRECTORY
fi

if [ -z "$FILENAME" -a ! -f "$FILENAME" ]; then
    FILENAME="webdav.conf"
    echo "No file specified. Backing up webdav.conf"
fi

REV=0
BACKUP="$FILENAME.$DATE.$REV"

while [ -f $BACKUP ]; do
    let REV+=1
    BACKUP="$DIRECTORY$FILENAME.$DATE.$REV"
done

cp $FILENAME $BACKUP

echo $OUTPUT
OUTPUT=$(apache2ctl configtest 2>&1)
if [ "$OUTPUT" == "Syntax OK" ]; then
    echo "Syntax OK"
    echo "Performing restart"
    apachectl -k graceful 2>&1
fi

exit $? 
```

这是`ls -l`这个文件的：

```
-rwsrwxr-x 1 root user  645 2012-04-26 18:05 graceful-restart 
```

当我尝试运行此脚本时，我得到以下输出：

```
No file specified. Backing up webdav.conf
ulimit: 88: error setting limit (Operation not permitted) Syntax OK 
```

如果可以执行我所描述的，我很感兴趣。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-26T15:19:52.203

Linux 不会尊重`suid`shell 脚本上的位。阅读[此](http://www.faqs.org/faqs/unix-faq/faq/part4/section-7.html)内容以获取更多信息。

一个常见的解决方案是`sudo`命令。在这样的条目中`/etc/sudoers`：

```
yourname ALL = NOPASSWD:/path/to/graceful-restart 
```

你可以运行：

```
sudo /path/to/graceful-restart 
```

这将在不提示您输入密码的情况下以 root 权限运行。有关文件语法的更多信息，请参见`sudoers`手册页。`sudoers`

# python - 如何缓存下载的 PIP 包

> ID：10336308
> 
> 赞同：62
> 
> 时间：2012-04-26T15:14:06.930
> 
> 标签：python, pip

如何防止 PIP 重新下载以前下载的包？我正在测试 matplotlib 的安装，这是一个 11MB 的包，它依赖于几个发行版特定的包。每次我运行`pip install matplotlib`时，它都会重新下载 matplotlib。我该如何阻止这个？

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2013-04-11T12:24:35.607

**注意**：仅缓存通过**HTTPS**下载的车轮。如果您在普通的旧 HTTP 上使用自定义 repo，[缓存将被禁用](https://github.com/pypa/pip/pull/9498)。

# 对于新的 Pip 版本：

默认情况下，较新的 Pip 版本现在缓存下载。请参阅此文档：

[https://pip.pypa.io/en/stable/cli/pip_install/#caching](https://pip.pypa.io/en/stable/cli/pip_install/#caching)

# 对于旧的 Pip 版本：

创建一个名为 的配置文件`~/.pip/pip.conf`，并添加以下内容：

```
[global]
download_cache = ~/.cache/pip 
```

在一个命令中：

```
printf '[global]\ndownload_cache = ~/.cache/pip\n' >> ~/.pip/pip.conf 
```

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2012-04-26T15:16:35.460

您可以使用特定的环境变量**PIP_DOWNLOAD_CACHE**并使其指向将存储您的包的目录。如果要再次安装它们，它们将从该目录中获取。

PIP 似乎还有一个额外的选项`pip --download-cache`应该做类似的事情，但我自己从未尝试过。`matplotlib`对于您的示例，为避免每次重新下载，您将执行以下操作：

```
pip install --download-cache /path/to/pip/cache matplotlib 
```

这是否回答你的问题？

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-26T16:13:28.787

你可以

```
# download and extract package to build path
pip install --no-install matplotlib

# the build path could be found by 
pip install --help|grep Unpack\ packages\ into -A 2

# then rm pip-delete-this-directory.txt inside the build path
# this prevent pip from removing package from the build directory after install
# you could check the content of the file
rm build/pip-delete-this-directory.txt

# from now on you could install matplotlib quickly
# this uses single build directory 
# and can speed up compiling by caching intermediate objects.
pip install --no-download matplotlib 
```

此外，您可以手动下载包

```
pip install -d dir_for_packages matplotlib 
```

然后通过 un-tar 和`python setup install`更高版本安装它。

类似的`pip install --download-cache`工作方式w/额外检查：它首先从web搜索目标包的最新或指定版本，如果搜索有结果并且在指定的目录中有`download-cache`缓存包，将使用缓存包代替的下载。例如，

```
pip install --download-cache . pymongo 
```

将 pymongo 包下载到当前目录：

```
http%3A%2F%2Fpypi.python.org%2Fpackages%2Fsource%2Fp%2Fpymongo%2Fpymongo-2.1.1.tar.gz
http%3A%2F%2Fpypi.python.org%2Fpackages%2Fsource%2Fp%2Fpymongo%2Fpymongo-2.1.1.tar.gz.content-type 
```

# git - 使用带有版本控制设置的 Pagelime CMS (git)

> ID：10336309
> 
> 赞同：1
> 
> 时间：2012-04-26T15:14:19.803
> 
> 标签：git, version-control, content-management-system, amazon-elastic-beanstalk, beanstalk-svn

我有一个使用版本控制设置的网站。我们将[Beanstalk](http://www.beanstalkapp.com)与**git**一起使用。现在，我刚刚收到一个向他的网站添加 CMS 的请求，这基本上只是向我希望客户能够编辑的任何 div 添加一个“cms”类。

对于我们的 CMS，我们使用[Pagelime](http://www.pagelime.com/)，一个非常轻量级的 CMS。但是客户端将获得自己的登录名来进行更改，它会自动通过 FTP 实时上传这些更改。

这将如何与我的版本控制设置一起使用？如果客户端进入并使用 CMS 添加新内容，则该网站存储库中的文件将过时。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T18:43:33.667

我们的 S/FTP 部署会自动将文件复制到您的远程服务器，但不会保留指向 Beanstalk 托管 git 存储库的链接。相反，您可以通过将 Beanstalk 存储库克隆到远程服务器来进行部署，然后每次部署时，您将从服务器上的该存储库中发出“git pull”以从 Beanstalk 获取任何更改。

为了补偿 Pagelime 所做的更改，您需要在拉取之前和之后执行几个额外的步骤：

1) 通过发出命令提交 pagelime 所做的任何更改

```
git commit -am "commit pagelime changes" 
```

2) 从 Beanstalk 拉取更改到服务器

```
git pull origin master 
```

3) 将 Pagelime 更改推送到 Beanstalk

```
git push master 
```

这是最简单的工作流程，并且不考虑 Pagelime 更改与您从开发环境中做出并提交到 Beanstalk 的更改之间无法自动解决的冲突。

使用首选脚本语言（ruby、python、php）配置和/或编写此工作流程后，您可以开始使用 Beanstalk 的 SSH 部署而不是 S/FTP 部署。然后，每次运行部署时，Beanstalk 都可以自动登录到您的服务器和脚本或命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T19:43:04.413

你在使用 PHP 吗？您可以使用 Pagelime FTP-XML 发布系统，然后使用此 GIST 中的代码：[https ://gist.github.com/945294](https://gist.github.com/945294)

它将设置 Pagelime 以使用 XML 将内容推送到您的客户端站点，而不是通过重写源代码。然后，您使用 PHP（或任何其他语言）将内容拉入您的页面。

一切仍然托管在您的 FTP 上，但您的源代码永远不会被触及！

只要确保永远不要删除“cms-assets”文件夹，因为这是 Pagelime 上传的 XML、图像和文档。

希望这是有道理的！

# php - 社交引擎和 Zend 框架 default.tpl 定制

> ID：10336311
> 
> 赞同：1
> 
> 时间：2012-04-26T15:14:20.023
> 
> 标签：php, zend-framework, socialengine

我是 Social Engine 和 Zend 框架的新手。我想自定义我的应用程序的页眉和页脚。我的 default.tpl 包含以下代码。

```
</head>
<body id="global_page_<?php echo $request->getModuleName() . '-' . $request->getControllerName() . '-' . $request->getActionName() ?>">
<div id="global_header">
<?php echo $this->content('header') ?>
</div>
<div id='global_wrapper'>
<div id='global_content'>
<?php //echo $this->content('global-user', 'before') ?>
<?php echo $this->layout()->content ?>
<?php //echo $this->content('global-user', 'after') ?>
</div>
</div>
<div id="global_footer">
<?php echo $this->content('footer') ?>
</div>
</body>
</html> 
```

现在我想在页脚部分加载一些小部件。任何人都可以建议我如何自定义`<?php echo $this->content('footer') ?>`。以及页脚文件在我的应用程序中的位置？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T11:02:44.937

**content('footer') ?>**在您的代码调用中查看 Helper Content.php

内容页面调用 LoadContent 方法，该方法从社交引擎中的两个表中收集数据

engine4_core_pages 表，其值为 2 作为页脚的 page_id。根据这个 page_id(2)，将查询 engine4_core_content 表，其中包含已加载的小部件列表。目前，一个用于在内容表中显示页脚的小部件是

“core.menu-footer”小部件。此小部件加载在模板的页脚区域 (default.tpl)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:57:01.610

首先将脚本位置添加到您的视图中，然后在您的布局文件中使用`render()`或`partial()`根据您的需要。

IE：

在您的控制器中：

```
$this->view->addScriptPath('/partials'); // Put your custom files here 
```

在您看来：

```
$this->render('customview.phtml') 
```

[请参阅此处](http://framework.zend.com/manual/en/zend.view.helpers.html#zend.view.helpers.initial.partial)了解更多信息。尝试使用`render()`而不是`partial()`因为它更快

# c# - ASP.net c#避免两次打开同一个窗口

> ID：10336312
> 
> 赞同：2
> 
> 时间：2012-04-26T15:14:21.560
> 
> 标签：c#, asp.net, session, window, state

我正在开发一个网络应用程序。当用户在同一个会话中打开同一个窗口时，我对会话有一个小问题。

例如：现在，用户打开页面用户并选择了一个用户会话值 (Session"["user"] = user).....

我正在考虑解决方案：

*   避免用户在同一台​​PC上打开同一个窗口
*   为用户打开的每个页面创建唯一的 id

你怎么看？哪个是更好的解决方案？

感谢您的帮助和最诚挚的问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T06:28:44.963

Thanks all for your responses.

I read the post [How to differ sessions in browser-tabs?](https://stackoverflow.com/questions/368653/how-to-differ-sessions-in-browser-tabs) and I found severals solutions to generate unique id per tab.

The solutions are:

*   [https://sites.google.com/site/sarittechworld/track-client-windows](https://sites.google.com/site/sarittechworld/track-client-windows)
*   [https://github.com/chrisdew/subsession](https://github.com/chrisdew/subsession)
*   Implement my own unique id per page

I'm going to review them and I tell you the result.

If somebody knows another solution, allways is wellcome!

Best regards,

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:32:03.737

我认为您不能阻止用户在两个不同的选项卡或浏览器中打开同一页面。因此，如果您需要确保每个窗口在您的应用程序中都是一个不同的“会话”，您将需要某种唯一 ID，可能存储在隐藏的 HTML 输入中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T15:48:58.353

在这种情况下，您必须使用无 cookie 会话 - 在 system.web 的 web.config 中

```
<sessionState mode="InProc" timeout="20" cookieless="UseUri" /> 
```

这样做是在 URL 中插入一个会话 ID，这样你就会得到类似 www.host.com/(abc15284dndhjkdm)/app.aspx 的东西。这对于每个标签都是唯一的，因此用户可以在每个标签上拥有唯一的会话。

编辑：-这是我在 web3.adprs.net/test/test1.aspx 显示的 aspx 页面的代码，我在下面提到

测试1.aspx

```
<%@ Page Language="vb" AutoEventWireup="false" CodeBehind="test1.aspx.vb" Inherits="WebApplication4.test1" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"> <head runat="server">
    <title></title> </head>
     <body>
        <form id="form1" runat="server">
        <div>
        Enter User <asp:TextBox ID="user" runat="server"></asp:TextBox>
        <asp:Button ID="go" runat="server" Text="Go" />
        </div>
        </form>
    </body></html> 
```

测试1.aspx.vb

```
Public Class test1
    Inherits System.Web.UI.Page

    Private Sub go_Click(sender As Object, e As System.EventArgs) Handles go.Click
        Session("user") = user.Text
        Response.Redirect("test2.aspx")
    End Sub
End Class 
```

测试2.aspx

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
    Your user from session is <%=Session("user").ToString%>
    </div>
    </form>
</body>
</html> 
```

网络配置

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <compilation debug="true" strict="false" explicit="true" targetFramework="4.0" />
    <sessionState mode="InProc" timeout="20" cookieless="UseUri" />
  </system.web>
  <system.webServer>
     <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
</configuration> 
```

高温高压

# c# - Linq to Entities SqlFunctions.DateDiff 不支持

> ID：10336316
> 
> 赞同：5
> 
> 时间：2012-04-26T15:14:40.073
> 
> 标签：c#, linq, linq-to-entities, entity-framework-4.1

我有以下代码

```
DateTime now = DateTime.UtcNow;

var allItemsOver64 = _inventoryContext.Items.Where(i => 
   (SqlFunctions.DateDiff("dd", i.PrimaryInsured.DoB, now) / 365.0) >= 65);

IQueryable<Item> items65To69 = allItemsOver64.Where(i =>
   (SqlFunctions.DateDiff("dd", i.PrimaryInsured.DoB, now) / 365.0) >= 65 &&
   (SqlFunctions.DateDiff("dd", i.PrimaryInsured.DoB, now) / 365.0) <= 69); 
```

但是当我尝试使用 allItemsOver64 因此 Items65To69.Count() 我得到这个错误

> 表达式 ((((Convert(DateDiff("dd", [10007].PrimaryInsured.DoB, 26/04/2012 15:03:09)) / 365) >= 65) 和 ((Convert(DateDiff("dd ", [10007].PrimaryInsured.DoB, 26/04/2012 15:03:09)) / 365) >= 65)) 和 ((Convert(DateDiff("dd", [10007].PrimaryInsured.DoB, 26) /04/2012 15:03:09)) / 365) <= 69)) 不受支持。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T15:20:52.120

也许您可以尝试使用[EntityFunctions](http://msdn.microsoft.com/en-us/library/system.data.objects.entityfunctions.aspx)而不是 SqlFunctions。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-17T15:15:53.300

我了解与 EF 4.1 相关的原始问题，但请注意 EF6 中的 EntityFunctions 现在已过时（[https://msdn.microsoft.com/en-us/library/system.data.entity.core.objects.entityfunctions%28v= vs.113%29.aspx](https://msdn.microsoft.com/en-us/library/system.data.entity.core.objects.entityfunctions%28v=vs.113%29.aspx)），因此如果以 EF6 为目标，则应使用 DbFunctions （[https://msdn.microsoft.com/en-us/library/system.data.entity.dbfunctions%28v=vs.113%29 .aspx](https://msdn.microsoft.com/en-us/library/system.data.entity.dbfunctions%28v=vs.113%29.aspx)）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-28T04:29:16.783

带有 linq to Entity 的 DateDiff 函数如下所示

如果你想

```
Day difference 
EntityFunctions.DiffDays(startDate , endDate);

Hours diff ->
EntityFunctions.DiffHours(startDate , endDate);

Minuutes diff ->
EntityFunctions.DiffMinutes(startDate , endDate); 
```

# actionscript-3 - AS#3，3D 建模格式 AWD、Collada、A3DS

> ID：10336317
> 
> 赞同：0
> 
> 时间：2012-04-26T15:14:52.013
> 
> 标签：actionscript-3, flash, 3d, 3dsmax, away3d

这是我的规格：

*   flash Professional SC5 + 将 flash player 11.02 添加到调试器版本“15”。
*   Away3d 4.0
*   3d 最大 2012
*   弹性 SDK 4.5 或 6

我正在尝试将带有动画的简单模型加载到 Flash CS5 中，问题不在于编码本身，它的结构：

away3d flash 引擎支持 AWD、Doom 引擎 2 和 5 动画。
3D MAX 2012 不导出任何这些格式（我尝试过脚本/插件）似乎都过时了

所以对于我的生活，我无法弄清楚如何实现这一点，我已经用谷歌搜索并浏览了论坛......
有些人建议为 max 和 flash 制作我自己的脚本来做到这一点，但它超出了我的范围。

我还尝试了最新的 Alternativa3d，但也遇到了很多问题，所以有人知道如何将带有动画的 3d 模型导入 Flash，因为 away 3d 4.0 不支持 collada

目前我也不是唯一对这件事一无所知的人，似乎很多人都有同样的问题。

在我看来，Away 3d 基本上是高级 morso 或不受其他工具支持，例如一切都已过时，插件/从 3dmax 支持/Blender 导出脚本等，并且目前不支持 collada 并没有真正留下任何可用的动画模型格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T21:05:50.443

最新版本的 Away3D 4 Gold 支持 Collada (DAE) 文件。这些支持动画，而且我相信 Blender 导出器是最新的，可以为每个模型输出一个动画，或者每个动画一个动画文件（而不是一个动画文件）——我还没有使用它。但我已经成功导入模型并在 Away3D 中渲染。请参阅[这个关于加载纹理的 Away3D 论坛问题](http://away3d.com/forum/viewthread/2935/)，因为那里的代码适用于导入模型。否则，现在 Away3D 下载中的一些示例可能有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T13:17:57.393

好的，我似乎想出了一个解决方法，只需使用旧版本的 3dMax 2009-2010 和 google 用于导出脚本，MD5 导出器似乎有一些，但没有一个与 max 2011 ++ 兼容，同样如此对于 Blender，我认为 2.59 是最容易使用的。

如果您找到更好的解决方案，请告诉我。

# ios - 使用带有标签栏控制器的导航控制器

> ID：10336318
> 
> 赞同：0
> 
> 时间：2012-04-26T15:14:53.963
> 
> 标签：ios, uinavigationcontroller, uitabbarcontroller

我正在努力做到这一点，所以我在屏幕底部有一个标签栏，它总是在那里。我也想要它，所以如果我“单击”到其中一个选项卡中的某个菜单，它会为您提供返回选项，从而提供导航控制器和选项卡栏控制器。

我仍然不太了解iOS，所以我找到的答案让我感到困惑。

这个答案：[在应用程序中有一个 UITabBar 和一个 UINavigationController？](https://stackoverflow.com/questions/2339177/having-a-uitabbar-and-a-uinavigationcontroller-in-an-app)

那么我该如何实现呢？我猜我在我的 App Delegate 中改变了这个方法，

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    UIViewController *viewController1, *viewController2;
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        viewController1 = [[CFSDFirstViewController alloc] initWithNibName:@"CFSDFirstViewController_iPhone" bundle:nil];
        viewController2 = [[CFSDSecondViewController alloc] initWithNibName:@"CFSDSecondViewController_iPhone" bundle:nil];
    } else {
        viewController1 = [[CFSDFirstViewController alloc] initWithNibName:@"CFSDFirstViewController_iPad" bundle:nil];
        viewController2 = [[CFSDSecondViewController alloc] initWithNibName:@"CFSDSecondViewController_iPad" bundle:nil];
    }
    self.tabBarController = [[UITabBarController alloc] init];
    [self.tabBarController setDelegate:self];
    self.tabBarController.viewControllers = [NSArray arrayWithObjects:viewController1, viewController2, nil];
    self.window.rootViewController = self.tabBarController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

感谢你的协助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T16:19:52.340

首先，您不需要手动设置笔尖名称。你可以只命名它们`CFSDFirstViewController~iphone.xib`并且`CFSDFirstViewController~ipad.xib`. 然后你可以打电话`[[CFSDFirstViewController alloc] init]`，让 iOS 为你做剩下的事情。有关信息，请参阅[iOS 支持设备特定资源](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/LoadingResources/Introduction/Introduction.html#//apple_ref/doc/uid/10000051i-CH1-SW2)。

关于您的问题，您只能`UINavigationController`在`UITabBarController`. 要做到这一点`viewController1`，`UINavigationController`如下所示：

```
CFSDFirstViewController viewController1 = [[CFSDFirstViewController alloc] init];
UINavigationController* navController = [[UINavigationController alloc] initWithRootViewController:viewController1]; 
```

然后使用`navController`而不是`viewController1`像以下那样使用

```
self.tabBarController.viewControllers = [NSArray arrayWithObjects:navController, nil]; 
```

检查代码，因为我是手写的。如果您使用非 ARC 项目，请注意内存。

希望能帮助到你。

# .net - Resize Listviewcolumns(详情

> ID：10336329
> 
> 赞同：0
> 
> 时间：2012-04-26T15:15:29.873
> 
> 标签：.net, vb.net, winforms

我在我的项目中创建了这么多列表视图，以至于我懒得给每个列表视图添加一个带有百分比的调整大小事件。有没有其他技巧，谁只是按原样缩放列？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T17:33:47.857

如果您对每个 ListView 使用相同的代码处理 Resize 事件，则创建一个方法并将其用作每个 ListView 的事件处理程序就足够了。在执行事件处理程序代码时，您可以获得一个从 sender 参数引发事件的实例。除了参数是 Object 类型之外，它实际上包含对 ListView 实例的引用。因此，您可以将参数值强制转换为 ListView 类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T17:44:06.973

有一种简单的方法可以自动调整它们的大小。我记不清了，但它涉及将列宽设置为 0、-1 或 -2。它可能是-1或-2。试试看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T18:21:55.923

这个问题很难回答，因为没有足够的细节。如果您有一个列表视图并且它已被填充，那么您可以使用以下代码来自动调整列的大小：

```
this.listControl.AutoResizeColumns(ColumnHeaderAutoResizeStyle.ColumnContent); 
```

它在我的项目中运行良好，因此您也可以尝试一下。

# jquery - Jquery：尝试在附加到 DOM 之前在 HTML 字符串上使用 .before 或 .after

> ID：10336331
> 
> 赞同：1
> 
> 时间：2012-04-26T15:15:31.150
> 
> 标签：jquery

在将完成的字符串写入 DOM 之前，我试图在 HTML 字符串之前和之后插入 HTML 字符串。这是我到目前为止所拥有的：

```
var Hello = '<p id="1234">Hello</p>'; 
var $Hello = $(Hello);
var $HelloGoodbye = $Hello.after('<p>Goodbye</p>');
$('#content').append($HelloGoodbye); 
```

结果是我的#content div 只附加了 Hello 片段。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:21:50.590

问题是因为`$Hello`是对`<p>`元素的引用。您将“再见”`<p>`放在第一个之外，因此`$Hello`变量不受影响。如果要将它们放在一个变量中，则需要某种将两者组合在一起的方法。尝试这个：

```
var $hello = $('<div></div>');
$hello.append('<p id="1234">Hello</p>');
$hello.append('<p>Goodbye</p>');
$('#content').append($hello); 
```

[**示例小提琴**](http://jsfiddle.net/3M9Yx/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:22:13.600

如果你把Goodbye放在元素**之后**，它就不在**元素中**。为什么不换

```
var $HelloGoodbye = $Hello.after('<p>Goodbye</p>'); 
```

和

```
var $HelloGoodbye = $Hello.append('<p>Goodbye</p>'); 
```

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T15:22:27.617

.after() 将内容附加到所选元素的父级。在您的情况下， $Hello 未附加到任何元素，因此 .after() 无效。如果您切换最后两行 #content 将附加“再见”。

这是一个 jsFiddle：http: [//jsfiddle.net/5xQZV/1/](http://jsfiddle.net/5xQZV/1/)

​</p>

# javascript - 使用 Javascript 单击时禁用放置在 ASP.NET 模板中的按钮

> ID：10336332
> 
> 赞同：1
> 
> 时间：2012-04-26T15:15:34.260
> 
> 标签：javascript, asp.net, button

我有一个 ASP.NET Web 窗体应用程序。

我的目标是在用户点击时禁用提交按钮`btnFinish`，以避免多次提交。

```
<asp:Button ID="btnFinish" runat="server" Text="Finish" UseSubmitBehavior="false" 
CausesValidation="true" CommandName="MoveComplete" CssClass="buttonStyle"/> 
```

**Javascript**函数是：

```
 function Validate(btnFinishId) {

            btnObj = document.getElementById(btnFinishId)

            if (Page_IsValid) {
                btnObj.disabled = true
            }
            else {
                 alert('Page has some validation error');
                 }

            // this is to prevent the actual submit
            e.preventDefault();

            return false;
    }; 
```

`btnFinish`放置在`FinishNavigationTemplate`一个 ASP.NET 向导控件中。因此，为了避免运行时错误，我需要以`ClientID`编程方式获取控件的 ，然后将其添加到`OnClientClick`按钮的事件中：

```
Button btFinish = MyWizard.FindControl("FinishNavigationTemplateContainerID$btnFinish") as Button;

if (btFinish != null){
   btFinish.Attributes.Add("onclientclick", "Validate('" + btFinish.ClientID + "');");
} 
```

但它不起作用。我使用**Firebug**来检查浏览器呈现的页面，但虽然源代码看起来很完美，但点击后**Javascript**函数**没有执行**。

如果在**Javascript**函数中我替换`Validate(btnFinishId)`为`Validate()`而不是使用后面的代码来添加`OnClientClick`我写的：

```
 <asp:Button OnClientClick="Validate();" "ID="btnFinish" runat="server" Text="Finish" UseSubmitBehavior="false" 
    CausesValidation="true" CommandName="MoveComplete" CssClass="buttonStyle"/> 
```

该函数已执行，但当然不会执行我想要的操作，因为缺少按钮 ID。有人有解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T15:27:14.667

你在正确的轨道上。像这样的东西应该工作：

```
<script type="text/javascript">
    validate = function(btn){

        //trigger client-side validation
        var valid = Page_ClientValidate("");

        //disable the button if the form is valid
        btn.disabled = valid;

        //trigger postback if the form is valid
        //otherwise do nothing
        return valid;                        
    }
</script>
<asp:Button ID="btnFinish" runat="server" Text="Finish" OnClientClick="return validate(this);" OnClick="btnFinish_Click" ... /> 
```

它看起来有点倒退，但你可以像这样缩短函数：

```
<script type="text/javascript">
    validate = function(btn){
        btn.disabled = Page_ClientValidate("");                        
        return btn.disabled;                        
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:27:21.117

一种方法是在您的页面上创建一个普通的 HTML 按钮，使用 jQuery 添加附加点击事件。然后，您可以使用 css 隐藏 .net 按钮。

在您的 html 按钮的单击事件中，您可以将所有 .net 按钮单击事件。

```
$("#yourbutton").trigger("click"); 
```

# internet-explorer - 如何让 IE 忽略 history.pushState？

> ID：10336335
> 
> 赞同：1
> 
> 时间：2012-04-26T15:15:51.110
> 
> 标签：internet-explorer, pushstate

我已经在我创建的一个小型 Web 应用程序中实现了 pushState/onPopState。该应用程序现在在 IE 中引发 javascript 错误，因为 IE 不支持这些方法。有什么办法可以像

```
if (method_exists(history.pushState)) { 

    history.pushState(blah, blah, blah);
} 
```

这样 IE 会忽略应用程序的这一部分而不抛出错误吗？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T17:26:35.413

试试这个：

```
if (typeof history.pushState != 'undefined') { 
    history.pushState(blah, blah, blah);
} 
```

# c++ - 成员引用基类型“int”不是结构或联合

> ID：10336336
> 
> 赞同：4
> 
> 时间：2012-04-26T15:15:54.183
> 
> 标签：c++, xcode, int

我有以下代码：

```
void setup()
{
address_t sp, pc;

sp = (address_t)stack1 + STACK_SIZE - sizeof(address_t);
pc = (address_t)f;

sigsetjmp(jbuf[0],1);
(jbuf[0]->__jmpbuf)[JB_SP] = translate_address(sp);<----ERROR
(jbuf[0]->__jmpbuf)[JB_PC] = translate_address(pc);<----ERROR
sigemptyset(&jbuf[0]->__saved_mask);<----ERROR     

sp = (address_t)stack2 + STACK_SIZE - sizeof(address_t);
pc = (address_t)g;

sigsetjmp(jbuf[1],1);
(jbuf[1]->__jmpbuf)[JB_SP] = translate_address(sp);<----ERROR
(jbuf[1]->__jmpbuf)[JB_PC] = translate_address(pc);<----ERROR
sigemptyset(&jbuf[1]->__saved_mask);<----ERROR

} 
```

知道这个错误是什么意思吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T15:23:48.450

a 的类型`sigjmp_buf`（`sigsetjmp()`作为第一个参数）是不透明的——在这种情况下，它不是您的代码所期望的。显然，这里很简单`int`，而不是指向结构的指针。

如果您想弄乱`sigjmp_buf`.

# regex - 正则表达式优化工具？

> ID：10336342
> 
> 赞同：7
> 
> 时间：2012-04-26T15:16:08.767
> 
> 标签：regex

RegexBuddy 是一个很棒的工具。我想要的是一个优化正则表达式的工具；接受一些表达式并将它们归结为更小的数字。有什么建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-26T16:30:55.817

正则表达式没有灵丹妙药。简单的交替冗余可能能够排除一些交替，但仅此而已。

总体而言，不能保证速度会提高，甚至不能保证速度提高。

最好的优化是编写正则表达式的经验。写得不好的正则表达式总是很糟糕。一个编写良好且经过测试的人不会想冒险进行程序优化。在使用现代扩展正则表达式时尤其如此。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-26T15:27:48.623

如果您使用 perl，则可以使用[Regexp::Optimizer](http://search.cpan.org/~dankogai/Regexp-Optimizer-0.15/lib/Regexp/Optimizer.pm)或[Regexp::Assemble](http://search.cpan.org/~dland/Regexp-Assemble-0.35/Assemble.pm)。

我不知道有任何在线工具可以满足您的要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T15:25:09.793

当您使用正则表达式时，它将被编译，然后是您指示它执行的更快版本。

例如，编译器将不知道您是否犯了错误，这会产生许多后退或任何事情。RegexBuddy 是要走的路，找出正则表达式会做什么，这样你就可以让你的模式更精确。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-21T08:33:58.330

为 Javascript、Python 和 PCRE 正则表达式引擎尝试[Debuggex 。](https://www.debuggex.com)它显示了图解流程。我们可以在此基础上进一步优化。

接下来，我们有[Regex101 调试器](https://regex101.com/debugger)，它带我们逐步回放正则表达式匹配。

# ruby - 使用 Nokogiri 如何将 Node 对象内容插入 XML::Builder 结构？

> ID：10336343
> 
> 赞同：2
> 
> 时间：2012-04-26T15:16:14.293
> 
> 标签：ruby, xml, nokogiri

使用 Nokogiri 如何将 Node 对象内容插入 XML::Builder 结构？

```
#source nodes
mynodes = [...array of Nodes...]

#where I want to dump source nodes
target_for_nodes = somebuilder.doc.xpath('//mydoc/mynodecollection').first

#drop the nodes into place
Nokogiri::XML::Builder.with(target_for_nodes) do |xml|
  mynodes.each do |node|
     xml.text node.to_xml  #gives escaped text- how to drop real XML here from the Node?
  end
end 
```

它提供了转义文本，但我不清楚如何从 Node 对象中删除真正的 XML？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T15:26:25.670

嗯。看来我只需要使用

```
xml << node.to_xml 
```

而不是

```
xml.text node.to_xml 
```

干杯!

# javascript - 在 Safari/Chrome 中，如何在 ready() 和 focus() 上触发函数 A，在 blur() 上触发函数 B？

> ID：10336349
> 
> 赞同：0
> 
> 时间：2012-04-26T15:16:36.147
> 
> 标签：javascript, jquery, html

我有一个计数器，当窗口聚焦时倒计时，当窗口模糊时停止计数。

我的代码与 Firefox 和 IE 完美配合，因为使用 FF 或 IE，在加载文档时会触发 focus() 事件。

但在 Safari/Chrome 中却不是。

有谁知道我如何在使用 Safari/Chrome 加载时触发 countDown() 函数？非常感谢

我的代码有这样的结构：

```
$(document).ready(function(){    
         $(window).focus(function(){
              countDown();      
          });

       $(window).blur(function(){
              stopCount();      
          });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:20:38.797

你也准备好打电话怎么样`countDown`？不过，您可能必须先检查窗口是否仍然具有焦点。而且你应该确保`countDown`没有被调用 - 或者让 countDown “抵抗”额外的调用。

或者另一种方式，应该使代码更简洁的是简单地调用`$(document).focus()`from `$(document).ready`。

更多背景：

```
$(document).ready(function(){
    $(window).focus(function(){
        countDown();      
    }).blur(function(){
        stopCount();      
    }).focus();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T15:39:19.597

你能试试类似的东西：

```
if ( $.browser.webkit ) {
   countDown();
} 
```

我认为这将检查它是否是 webkit 浏览器，然后触发 countDown() 事件

# java - 递归方法最大深度-静态变量

> ID：10336355
> 
> 赞同：0
> 
> 时间：2012-04-26T15:16:51.683
> 
> 标签：java, xml, algorithm, recurrence

我想使用递归方法获得 XML 文件的最大深度，首先我声明了变量

```
 public static int maxdepth=0;

 private static void GetDepth(NodeList nl, int level,int maxdepth) {      

   level++;
   if (maxdepth<level)
   {
       maxdepth= level;
   }
    if(nl != null && nl.getLength() > 0){
        for (int i = 0; i < nl.getLength(); i++) {
            Node n = nl.item(i);
            if (n instanceof Element)
            {            
            GetDepth(n.getChildNodes(), level, maxdepth);
            }
        }

    }

}

 public static void main(String[] args) {
  NodeList nl = root.getChildNodes();
  GetDepth(nl,level,maxdepth);
  System.out.println(maxdepth);
 } 
```

当我显示变量 maxdepth 的值时，我收到值 0，作为声明

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T15:19:05.037

您`int maxdepth`在方法签名中`getDepth`隐藏了静态变量`maxdepth`。从签名中删除它：

`private static void GetDepth(NodeList nl, int level)`

那么该方法将起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T21:52:05.077

您可以使用 XPath 2.0 将其作为单行程序执行：

```
max(for $n in //* return count($n/ancestor::*)) 
```

即使在 Java 中，你也让它变得更加困难：

```
public int maxDepth(Node node) {
  int max = 0;
  NodeList kids = node.getChildNodes();
  if (kids.getLength() == 0) {
     return 0;
  }
  for (int i=0; i<kids.getLength(); i++) {
     int kidMax = maxDepth(kids.item(i);
     if (kidMax > max) max = kidMax;
  }
  return max + 1;
} 
```

未测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T15:29:12.037

在此代码部分：

```
if (maxdepth<level)
{
    maxdepth= level;
} 
```

您正在更新局部变量 maxdepth 而不是静态变量。为其中一个变量赋予不同的名称将使其工作，但由于该方法的 maxdepth 参数是不必要的，因此我将其删除。

# java - 在java中哪个是更好的做法

> ID：10336361
> 
> 赞同：1
> 
> 时间：2012-04-26T15:17:17.303
> 
> 标签：java

我有一个方法可以返回一些对象，比如说一个**字符串**对象。

现在我有两种可能性之一

```
public String someMethod(){

String data=getData(); //This method returns string

return data;
} 
```

或者

```
public String someMethod(){

return getData();//This method returns string

} 
```

考虑到性能/可扩展性，以上哪一项是更好的做法，也是更好的做法。请给出支持答案的观点。谢谢你的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T15:20:35.200

如果您不打算修改变量，那么没有理由创建它的本地副本只是为了返回它。

代码的第二个版本更干净、更简洁，这通常是首选。

如果您在性能方面不那么明智，那么优化的编译器很可能会为您进行转换，它们是等效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T15:20:56.927

与任何编程语言一样，您希望尽可能简洁明了地表达它。它们都将编译成完全相同的东西，但后者更具可读性并且省略了不需要的代码行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T15:21:55.863

我相信编译器会将第二个变成第一个，从而为您优化它。它不会对所有事情都这样做，但在大多数情况下会这样做。但这一切都取决于可读性。无论你能更快地捕捉到什么，我都会说坚持下去。但它们都是一样的。只有第一个不同的是，您为指向该字符串的指针创建了一个变量，因此“浪费”了不必要的内存。但同样，编译器可能会在这种情况下优化它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T15:22:24.540

这将几乎完全归结为风格（第一个是蹩脚的风格——不要创造你不会使用的东西）。任何优秀的编译器都会注意到，通过消除未使用的局部变量，可以进行一些优化。很容易陷入你认为是“优化”的微小调整中，但实际上只是让开发人员感到聪明和浪费时间的一种尝试。即使编译器没有将第一个代码段优化为第二个代码段（实际上它可能会进一步优化）。

在性能方面，更宏观的架构决策才是真正会产生影响的，而不是一个未使用的分配/分配操作。不要陷入逐行优化的困境。这些优化最好留给编译器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T15:20:42.807

第二个是更好的选择。在第一个中，您的可变数据没有实际用途。反正我觉得这个东西如果编译了，反正编译器会把第一个改成第二个。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-26T15:21:27.173

第二个是更好的选择，因为它需要更少的输入并减少不必要的代码。始终尝试使您的代码尽可能易读。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-26T15:23:03.287

第二种解决方案+1。写得越少，发展得越好！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-26T15:23:51.627

一个`first`：

在编写简洁易懂的代码方面是好的，但它`memory`在初始化 Sring 对象时使用更多 编译器将切换到`first`反正，第二当任何其他开发人员要编辑时，他可以直接在第一次初始化下添加代码，如果他需要`debug`它也更好。
有利于代码管理。

一个`second`：

`performance`在没有额外对象初始化的情况下更好，而只是输出所需的返回数据。但这在代码编写方面并不是一个好的做法，但在编写代码的性能和速度方面却是一个好习惯。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-04-26T15:24:32.430

第一个可能更直观（在大学里，他们展示了为什么，我认为这就是你怀疑这一点的原因）只是为了学习和调试任何可能的异常，但总的来说，第二个是首选和更好的。

# c++ - 默认类构造函数的两种形式是否等效？

> ID：10336362
> 
> 赞同：0
> 
> 时间：2012-04-26T15:17:17.730
> 
> 标签：c++

当我在派生层次的类中尝试两种形式的构造函数时，结果却是不同的。谁能告诉我为什么？下面是测试代码。

//人.h

```
#ifndef PERSON_H_
#define PERSON_H_
#include<string>

using std::string;

class Person{
    private:
        string firstname;
        string lastname;
    public:
        Person(const char *fn="NoName", const char *ln="NoName");   //A
        Person(const string &fn, const string &ln);
        virtual ~Person(){}

};

class Gunslinger:virtual public Person{
    private:
        int notchnum;       
    public:
        Gunslinger(const char*f="unknown",const char*n="unknown",int not=0);//B
        virtual ~Gunslinger(){}
};

class PokerPlayer:virtual public Person{

    public:
        PokerPlayer(const char*fn="unknown", const char*ln="unknown");//C;
        virtual ~PokerPlayer(){}
};    

class BadDude:public Gunslinger,public PokerPlayer{
    public:
        BadDude(const char*fn="unknown", const char*ln="unknown", int notc=0);//D

};

#endif 
```

//PersonDefinition.cpp

```
#include"Person.h"
#include<iostream>
#include<cstdlib>

using std::cout;
using std::endl;
using std::cin;

Person::Person(const char*fn, const char*ln):firstname(fn),lastname(ln){
}

Person::Person(const string &fn,const string &ln):firstname(fn),lastname(ln){

}

Gunslinger::Gunslinger(const char*fn,const char*ln, int not):Person(fn,ln),notchnum(not){
}

PokerPlayer::PokerPlayer(const char*fn,const char*ln):Person(fn,ln){
}

BadDude::BadDude(const char*fn, const char*ln, int notc):Person(fn,ln),PokerPlayer(fn, ln),Gunslinger(fn,ln,notc){

} 
```

//PersonTest.cpp

```
#include<iostream>
#include "Person.h"

int main(){
    Person a("Jack","Husain");
    PokerPlayer b("Johnson","William",8);
    Gunslinger c("Mensly","Sim");

} 
```

所以，这就是问题所在。上面的程序无法使用所有参数的默认值的默认构造函数进行编译，并抛出一条错误消息，指出“在 '!' 之前需要 ',' 或 '...' 令牌”，但是如果我将 A、B、C、D 行中的默认构造函数替换为不带参数的形式，则程序编译并成功运行。有人能告诉我为什么吗？下面是错误信息。

![错误信息](../Images/28930c21f8ef3df22234ef89fed222d1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:22:50.747

您没有实现所有构造函数。例如，您声明了一个构造函数`PokerPlayer::PokerPlayer(char*, char*)`，但您正试图创建一个 PokerPlayer `PokerPlayer b("Johnson","William",8);`（即您从未声明一个接受第三个参数的构造函数）。您希望上一行工作的声明是`PokerPlayer::PokerPlayer(char*, char*, int);`

此外，在尝试声明 a 时，您会遇到完全相反的问题`GunSlinger`。您的 GunSlinger 类需要第三个参数，而您试图在没有该参数的情况下声明它。

即使您的基类支持多种类型的构造函数，每个派生类也必须明确声明/实现您希望在其上使用的每个构造函数（默认构造函数除外）。

**编辑**

这是一些半功能代码：

```
class PokerPlayer : public Person
{
  ...
  PokerPlayer(char* fname, char* lname, int val);
  ...
}; 
```

执行

```
PokerPlayer::PokerPlayer(char* fname, char* lname, int val) : Person(fname, lname, val)
{
  // Anything else we should do...
} 
```

# php - 从 array_keys 返回的键的顺序是否与输入数组中的顺序相同？

> ID：10336363
> 
> 赞同：29
> 
> 时间：2012-04-26T15:17:18.957
> 
> 标签：php

给定一个如下的关联数组，

```
$field_defaults = array(
  'id' => 0,
  'name' => 'new item',
  'desc' => '',
  'parent_id' => 0,
); 
```

我可以依靠按`array_keys()`指定顺序返回密钥吗？或者，更准确地说，由于 PHP 中的数组似乎有一个稳定的顺序，根据[这个答案](https://stackoverflow.com/a/950995/2077)，返回的键是否`array_keys()`与它们在输入数组中出现的顺序相同？[手册页](http://www.php.net/manual/en/function.array-keys.php)没有给出任何提示。

当我尝试这个时，他们*似乎*尊重原始顺序，但我希望能够依赖这种行为。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-04-26T15:18:48.040

TL;DR：理论上你不能指望它。出于实际目的，IMO 你可以。

* * *

由于文档不保证顺序，因此从技术上讲，正确的答案是“不，你不能指望”。

[这是因为从理论上讲，开发人员可以选择保留在未来更改实现的选项，以便它不再遵守现有订单（可能是为了提高性能，或获得其他好处）。]

现在作为一个*实际*问题，我们知道[当前的实现尊重排序](http://lxr.php.net/xref/PHP-7.1/ext/standard/array.c#3319)——PHP 数组是有序的容器（除其他外，还有一个值的链接列表）——这是你永远不会期望改变的。

如果确实如此，则该更改将暗示数组的内部实现发生了相应的重大更改，而这反过来也可能会破坏许多其他代码。我认为它不会很快发生。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-20T16:03:22.257

如果您担心，您总是可以选择一个作为正确的顺序，然后根据该顺序重新实现另一个功能。如果您关心两个调用之间的一致性，您可能会同时调用这两个`array_keys`调用`array_values`。那么为什么不同时做呢？例如，假设 的顺序`array_keys()`是“正确的”。然后做：

```
function arrayKV($arr) {
    $keys = array_keys($arr);
    $values = array();
    foreach($keys as $key) {
        $values[] = $arr[$key];
    }
    return array('keys' => $keys, 'values' => $values);
} 
```

这样，您就知道它们的顺序相同。或者，您可以提供用作订单的密钥：

```
function arrayValuesStable($arr, $keys) {
    $values = array();
    foreach($keys as $key) {
        $values[] = $arr[$key];
    }
    return $values;
} 
```

# javascript - 如何让 PrettyPhoto 与 MVC3 内容处理程序一起工作？

> ID：10336365
> 
> 赞同：0
> 
> 时间：2012-04-26T15:17:21.310
> 
> 标签：javascript, jquery, asp.net-mvc-3, prettyphoto

我正在使用来自[http://www.no-margin-for-errors.com的 PrettyPhoto 3.1.4](http://www.no-margin-for-errors.com)

我在 ASP.NET MVC3 中使用内容处理程序从数据库加载图像。Pretty Photo 没有使用 API 加载图像。如何让它与内容处理程序一起使用？

这是一个应该弹出图像库的图像：

```
<a href='' onclick="$.prettyPhoto.open(api_images0,api_titles0,api_descriptions0);" title='UFC123'>
    <img style="max-height: 160px;max-width: 260px;" id='Img31' alt='UFC123' title='UFC123' src='/img.ashx?mediaId=31' style='padding:10px' />
</a> 
```

这是我正在使用的脚本：

```
<script type="text/javascript" charset="utf-8">
    var api_images0 = ['/img.ashx?mediaId=33'];
    var api_titles0 = ['Gina'];
    var api_descriptions0 = ['Gina Description'];
</script>

<script type="text/javascript" charset="utf-8">
    $(document).ready(function () {
        $("a[rel^='prettyPhoto']").prettyPhoto({ theme: 'dark_rounded', social_tools: '' });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T15:32:27.717

文档不清楚您尝试使用的“公共 api”功能，并且没有这些功能的演示，但我的猜测是，因为您没有任何具有的`a`元素，所以`rel="prettyPhoto"`该`.prettyPhoto()`功能是永远不会运行，因此显示弹出框的支持 HTML 永远不会添加到 DOM。尝试添加`rel="prettyPhoto"`到您的`a`元素中，看看是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T15:35:39.057

没有 javascript 错误。我想到了。问题是我需要井号而不是 href 标记的空字符串。

```
<a href='#' onclick="$.prettyPhoto.open(api_images0,api_titles0,api_descriptions0);" title='UFC123'>
    <img style="max-height: 160px;max-width: 260px;" id='Img31' alt='UFC123' title='UFC123' src='/img.ashx?mediaId=31' style='padding:10px' />
</a> 
```

# java - 转义字符串中的特殊 XML 字符

> ID：10336368
> 
> 赞同：1
> 
> 时间：2012-04-26T15:17:30.187
> 
> 标签：java, string

我正在创建一个输入 xml 到我通过手动创建的数据库过程

```
StringBuilder.append(); 
```

最后，当我创建了所有 xml 时，我将 StringBuilder 转换为字符串

```
stringBuilder.tostring() 
```

现在的问题是我在字符串中得到 &(ampersand) 我正在向 oracle\n 提供输入的存储过程我也用 &(ampersand) 替换了

```
stringUtils.remove(string,'&') 
```

但 oracle 存储过程仍然为 & (& 符号) 给出错误

我想问一下，我的字符串中是否有任何字符被转换为“与号字符”，例如

```
&cent; &gt; &lt; &quot; &divide; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T16:40:48.063

您根本不应该真正手动构建 XML - 它容易出错并且几乎是在重新发明轮子。对于正在进行的开发，我会认真考虑一个专用的 XML 库。

但是，如果您想快速转义此类字符，请查看[Apache Commons Lang](http://commons.apache.org/lang/)库：

```
org.apache.commons.lang.StringEscapeUtils.escapeXml("Here is data & containing special <chars>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-10T16:52:43.387

您可以在 XPL 中包含所有 XML 的特殊字符（'&'、'<'、'>'、'''、'"'）。XPL 到 XML 转换实用程序将为您处理一切[。http://hll。怒](http://hll.nu)

# view - 如何检查 php 关联数组的键是否等于 phptal 条件中定义的变量？

> ID：10336369
> 
> 赞同：1
> 
> 时间：2012-04-26T15:17:31.293
> 
> 标签：view, conditional-statements, template-tal, phptal

我有这个问题，我的 phptal 视图有一个名为 data 的变量，它是一个关联数组。

假设我的键 M01 M02 和 M03**没有按特定顺序**，我必须打印给用户查看键 M02 未引用的所有数据。

我怎样才能做到这一点？提前致谢

马可

**更新：我忘了说我不能编辑调用视图的代码。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T14:39:20.653

如果顺序很重要，请使用带有有序键的第二个数组来打印：

```
<div tal:repeat="key php:array('M01','M03')" tal:content="array/$key"/> 
```

否则，您可以添加一个条件：

```
<div tal:repeat="data array">
    <tal:block tal:condition="php:repeat.data.key != 'M02'" tal:content="data"/>
</div> 
```

# perl - 是否可以对一个字符串属性执行 Sphinx 搜索？

> ID：10336374
> 
> 赞同：1
> 
> 时间：2012-04-26T15:17:45.833
> 
> 标签：perl, search, full-text-search, sphinx, perl-module

```
sql_query=SELECT id,headline,summary,body,tags,issues,published_at
FROM sphinx_search 
```

我正在研究我的网站的搜索功能，我正在使用[Sphinx](http://sphinxsearch.com/)、 Perl 和[Sphinx::Search](https://metacpan.org/module/JJSCHUTZ/Sphinx-Search-0.27.2/lib/Sphinx/Search.pm)。只要我想搜索所有属性并且我不将其限制为一个，一切顺利。但是，当用户搜索特定标签时，我不能只给出模糊搜索的结果，我想使用 Sphinx 的强大功能仅搜索标签或问题，也许有时用户想搜索标题和问题.

我怎样才能执行这样的任务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T20:37:07.063

您需要将其置于扩展匹配模式

[https://metacpan.org/module/JJSCHUTZ/Sphinx-Search-0.27.2/lib/Sphinx/Search.pm#SetMatchMode](https://metacpan.org/module/JJSCHUTZ/Sphinx-Search-0.27.2/lib/Sphinx/Search.pm#SetMatchMode)

然后你可以使用扩展查询语法

[http://sphinxsearch.com/docs/current.html#extended-syntax](http://sphinxsearch.com/docs/current.html#extended-syntax)

其中包括字段搜索运算符

```
@tags keyword1 
```

（小心狮身人面像，“属性”这个词有一个特定的含义 - 附加到文档的值，对于排序/分组/过滤和返回结果集很有用。而我认为你在谈论字段。来自 sql_query 的所有列您没有标记为属性，是一个字段 - 并且全文可搜索）

# mysql - 在 Rails 3 中渴望加载？

> ID：10336378
> 
> 赞同：3
> 
> 时间：2012-04-26T15:18:01.450
> 
> 标签：mysql, ruby-on-rails-3, eager-loading, rails-bullet

我正在尝试学习如何提高 Rails 应用程序的性能，而我正在研究的第一步是急切加载。

我已经配置了子弹 gem，它显示了我可以在哪里使用急切加载，但是，我不太确定如何使用帮助！

一个示例日志是：

```
2012-04-26 15:59:34
0.0.0.0:3000http://0.0.0.0:3000/animals
N+1 Query detected
  Animal => [:client]
  Add to your finder: :include => [:client]
N+1 Query method call stack
  N+1 Query method call stack
  /Users/dannymcclelland/Projects/premvet/app/views/animals/index.html.erb:26:in `block in _app_views_animals_index_html_erb__2796162405947806753_70316525286320'
  /Users/dannymcclelland/Projects/premvet/app/views/animals/index.html.erb:22:in `_app_views_animals_index_html_erb__2796162405947806753_70316525286320'
  /Users/dannymcclelland/Projects/premvet/app/controllers/animals_controller.rb:7:in `index'2012-04-26 15:59:34[WARN] user: dannymcclelland
0.0.0.0:3000http://0.0.0.0:3000/animals
Unused Eager Loading detected
  Animal => [:id, :AnimalName, :Species]
  Remove from your finder: :include => [:id, :AnimalName, :Species]2012-04-26 16:00:56 
```

跳出来的行是：

```
N+1 Query detected
Animal => [:client]
Add to your finder: :include => [:client] 
```

和

```
Unused Eager Loading detected
Animal => [:id, :AnimalName, :Species]
Remove from your finder: :include => [:id, :AnimalName, :Species] 
```

我不确定的是，“发现者”的定义是什么。它是视图中的块还是控制器中的块。

以我跳出的第一部分日志为例，控制器如下：

```
def index
@animals = Animal.page(params[:page]).per_page(15)

respond_to do |format|
  format.html # index.html.erb
  format.json { render json: @animals }
end
end 
```

该模型：

```
class Animal < ActiveRecord::Base
  self.table_name = 'animal'
  self.primary_key = 'PVID'

  attr_accessible :AddedBy, :Age, :AnimalBFAmount, :AnimalBalance, :AnimalName, :Archive,    :BillType, :Breed, :ChronicStatus, :Class, :Classification, :ClientKey, :Colour, :Date1, :DateOfBirth, :DateofBirth, :Dead, :DiaryQueue, :DiscField, :DrugsAtCost, :DrugsNoVAT, :ESDAmount, :ESDType, :FNote, :FirstRegisteredDate, :Height, :IDNumber, :Insured, :InsuredWith, :IsClient, :IsClientDate, :IsMaster, :LastBilledAmount, :LastBilledDate, :LastConsDate, :LastContributionDate, :LastPaidDate, :LastWeightDate, :Locked, :LoyaltyMultiplier, :LoyaltyPoints, :MR_Flag_0, :MR_Flag_1, :MR_Flag_10, :MR_Flag_11, :MR_Flag_12, :MR_Flag_13, :MR_Flag_14, :MR_Flag_15, :MR_Flag_2, :MR_Flag_3, :MR_Flag_4, :MR_Flag_5, :MR_Flag_6, :MR_Flag_7, :MR_Flag_7, :MR_Flag_8, :MR_Flag_9, :Mileage, :Neutered, :NextApptDate, :ORT, :OldSex, :Opt_Flag_0, :Opt_Flag_1, :Opt_Flag_2, :Opt_Flag_3, :Opt_Flag_4, :Opt_Flag_5, :Opt_Flag_6, :Opt_Flag_7, :PVID, :PreferredContact, :PreferredUser, :Ref1, :RefPrac, :ReferredBy, :SSDType, :SeenInPeriod, :SendBill, :Sex, :SiteAnimal, :Species, :Status, :SurcAmount, :SurcType, :SurgeryNumber, :TBU, :TOSAmount, :TOSDrugs, :TOSFees, :TOSType, :Weight

  belongs_to :client, :foreign_key => 'ClientKey'
  has_many :clinicals, :foreign_key => 'PVID'
  has_many :labs, :foreign_key => 'PVID'
  has_many :consults, :foreign_key => 'pvid'
  has_many :sheets, :foreign_key => 'PVID'

  default_scope :order => "Dead ASC, AnimalName ASC"
end 
```

请注意，我使用的是旧数据库，因此出现了奇怪的列名等。

该视图包含以下内容：

```
<% @animals.includes(:client).each do |animal| %>
  <tr>
    <td><%= animal.id %></td>    
    <td><%= animal.AnimalName %></td>
    <td><%= link_to animal.client.Surname, animal.client %></td>    
    <td><%= animal.Species %></td>
    <td><%= animal.Breed %></td>
    <td><%= animal.Dead %></td>    
    <td><%= link_to 'Show', animal %></td>
  </tr>
<% end %> 
```

那么，我应该将其他推荐的列添加到视图“查找器”吗？或者别的地方？

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T15:30:29.713

在您的控制器中，您希望更新查询以包含客户端：

```
@animals = Animal.includes(:client).page(params[:page]).per_page(15) 
```

# sql-server-2008 - 动态 sql 错误：'CREATE TRIGGER' 必须是查询批处理中的第一条语句

> ID：10336384
> 
> 赞同：8
> 
> 时间：2012-04-26T15:18:20.280
> 
> 标签：sql-server-2008, triggers, dynamic-sql

作为一些管理任务的一部分，我们有许多表，每个表都需要创建触发器。当对象被修改时，触发器将在审计数据库中设置一个标志和日期。为简单起见，我有一个表，其中包含需要创建触发器的所有对象。

我正在尝试为每个对象生成一些动态 sql 来执行此操作，但出现此错误：
`'CREATE TRIGGER' must be the first statement in a query batch.`

这是生成sql的代码。

```
CREATE PROCEDURE [spCreateTableTriggers]
AS

BEGIN

DECLARE @dbname     varchar(50),
        @schemaname varchar(50),
        @objname    varchar(150),
        @objtype    varchar(150),
        @sql        nvarchar(max),
        @CRLF       varchar(2)

SET     @CRLF = CHAR(13) + CHAR(10);

DECLARE ObjectCursor CURSOR FOR
SELECT  DatabaseName,SchemaName,ObjectName
FROM    Audit.dbo.ObjectUpdates;

SET NOCOUNT ON;

OPEN    ObjectCursor ;

FETCH NEXT FROM ObjectCursor
INTO    @dbname,@schemaname,@objname;

WHILE @@FETCH_STATUS=0
BEGIN

    SET @sql = N'USE '+QUOTENAME(@dbname)+'; '
    SET @sql = @sql + N'IF EXISTS (SELECT * FROM sys.triggers WHERE object_id = OBJECT_ID(N'''+QUOTENAME(@schemaname)+'.[Tiud_'+@objname+'_AuditObjectUpdates]'')) '
    SET @sql = @sql + N'BEGIN DROP TRIGGER '+QUOTENAME(@schemaname)+'.[Tiud_'+@objname+'_AuditObjectUpdates]; END; '+@CRLF
    SET @sql = @sql + N'CREATE TRIGGER '+QUOTENAME(@schemaname)+'.[Tiud_'+@objname+'_AuditObjectUpdates] '+@CRLF
    SET @sql = @sql + N'   ON '+QUOTENAME(@schemaname)+'.['+@objname+'] '+@CRLF
    SET @sql = @sql + N'   AFTER INSERT,DELETE,UPDATE'+@CRLF
    SET @sql = @sql + N'AS '+@CRLF
    SET @sql = @sql + N'IF EXISTS(SELECT * FROM Audit.dbo.ObjectUpdates WHERE DatabaseName = '''+@dbname+''' AND ObjectName = '''+@objname+''' AND RequiresUpdate=0'+@CRLF
    SET @sql = @sql + N'BEGIN'+@CRLF
    SET @sql = @sql + N'    SET NOCOUNT ON;'+@CRLF
    SET @sql = @sql + N'    UPDATE  Audit.dbo.ObjectUpdates'+@CRLF
    SET @sql = @sql + N'    SET RequiresUpdate = 1'+@CRLF
    SET @sql = @sql + N'    WHERE   DatabaseName = '''+@dbname+''' '+@CRLF
    SET @sql = @sql + N'        AND ObjectName = '''+@objname+''' '+@CRLF

    SET @sql = @sql + N'END' +@CRLF
    SET @sql = @sql + N'ELSE' +@CRLF
    SET @sql = @sql + N'BEGIN' +@CRLF
    SET @sql = @sql + N'    SET NOCOUNT ON;' +@CRLF
    SET @sql = @sql + @CRLF
    SET @sql = @sql + N'    -- Update ''SourceLastUpdated'' date.'+@CRLF
    SET @sql = @sql + N'    UPDATE  Audit.dbo.ObjectUpdates'+@CRLF
    SET @sql = @sql + N'    SET SourceLastUpdated = GETDATE() '+@CRLF
    SET @sql = @sql + N'    WHERE   DatabaseName = '''+@dbname+''' '+@CRLF
    SET @sql = @sql + N'        AND ObjectName = '''+@objname+''' '+@CRLF
    SET @sql = @sql + N'END; '+@CRLF

    --PRINT(@sql);
    EXEC sp_executesql @sql;

    FETCH NEXT FROM ObjectCursor
    INTO    @dbname,@schemaname,@objname;

END

CLOSE ObjectCursor ;
DEALLOCATE ObjectCursor ;

END 
```

如果我使用`PRINT`并将代码粘贴到新的查询窗口，代码执行没有任何问题。

我已经删除了这些`GO`陈述，因为这也给出了错误。

我错过了什么？
为什么我使用`EXEC(@sql);`or even时出现错误`EXEC sp_executesql @sql;`？
这与里面的上下文有关`EXEC()`吗？
非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-27T06:25:19.453

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:23:47.123

触发器创建必须在其自己的执行批次上完成。您在一个过程中，因此您将无法创建它。

我建议将@sql 添加到临时表中，然后在 proc 完成生成所有语句后，循环此临时表以执行它们并创建触发器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-14T20:04:19.443

This approach is a much better approach when using dynamic sql within dynamic sql - side effect: no need to replace quotes and a like:

```
DECLARE
    @originalsql NVARCHAR(4000) = N' ..... '
    , @stmt NVARCHAR(200) = 'otherdatabase.dbo.sp_executesql @stmt = @sql'
    , @params NVARCHAR(200) = '@sql NVARCHAR(4000)'

EXECUTE sp_executesql @stmt=@stmt, @params=@params, @sql = @originalsql 
```

# magento - Magento 发送忘记密码，因为文本未重置链接

> ID：10336386
> 
> 赞同：0
> 
> 时间：2012-04-26T15:18:24.913
> 
> 标签：magento, passwords

我是 magento 的新手。目前我正在使用 magento 创建一个电子商务网站。如您所知，如果有人忘记了他/她的密码，magento 将发送重置密码链接。我希望系统生成的密码必须发送给用户，而不是作为密码重置链接。

请帮助我实现这一目标....

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T01:09:33.107

当前的两步密码重置功能是在 1.6 中引入的，因此您可以考虑将密码重置代码从旧版本的 Magento 移植到您的站点中。我们已经考虑过相反的做法（将新方法向后移植到旧的 Magento 站点）并且它是可行的。从安全角度来看，当前的方法要好得多，所以虽然你想要的东西是可能的，但它可能是不可取的。

# iphone - 尝试将对象添加到 MutableOrderedSet 时发送到已释放实例的 IsEqual 方法

> ID：10336387
> 
> 赞同：0
> 
> 时间：2012-04-26T15:18:26.927
> 
> 标签：iphone, objective-c, ios, nsmutableset

我有一个 NSMutableOrdered 集，其中包含两种类型的对象（我创建的），即 Pieces 和 Others。

Piece 和 Other 都有它们的 isEqual 方法，如下所示：

片：

```
- (BOOL)isEqual:(Piece *)object
{
    if (([title isEqualToString:[object title]])
        && ([composer isEqualToString:[object composer]])
        && (major == [object major])
        && (tempo == [object tempo])
        && (pieceKey == [object pieceKey])
        && (pieceTime == [object pieceTime]))
        return YES;
    else 
        return NO;
} 
```

其他：

```
- (BOOL)isEqual:(Other *)object
{
    if (([title isEqualToString:[object title]])
        && ([subTitle isEqualToString:[object subTitle]])
        && ([description isEqualToString:[object description]])
        && (otherTime == [object otherTime]))
        return YES;
    else 
        return NO;
} 
```

我还覆盖了两个类的散列，为每个实例创建一个唯一的散列（通过获取 ivars 的 int 值并添加它们）。

在我的应用程序中，从集合中删除了另一个，然后当我尝试向集合中添加一块时，我得到了这个：

```
-[Other isEqual:]: message sent to deallocated instance 0x80d5680 
```

这是哈希方法：

```
- (NSUInteger)hash
{
    NSUInteger prime = 31;
    NSUInteger result = 1;
    result = prime * (result + [title intValue]);
    result = prime * (result + [composer intValue]);
    result = prime * (result + major);
    result = prime * (result + tempo);
    result = prime * (result + pieceKey);
    result = prime * (result + pieceTime);
    return result;
} 
```

如果有人知道为什么会这样，我真的会提供一些帮助。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T15:38:51.977

这不是一个真正的答案，但它会帮助我们找到问题所在。一些问题：

*   您确定 0x80d5680 是之前删除的实例吗？
*   你如何将它从集合中移除？
*   添加对象后，您是否修改了对象的状态？
*   您确定您的哈希值是唯一的（ivars 的 int 值总和听起来很可疑）。

最后，确保您的对象遵守此规则：

> 如果两个对象相等，则它们必须具有相同的哈希值。如果您在子类中定义 isEqual: 并打算将该子类的实例放入集合中，那么最后一点尤其重要。确保您还在子类中定义哈希。

有关详细信息，请参阅[NSObject 协议参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSObject_Protocol/Reference/NSObject.html#//apple_ref/occ/intfm/NSObject/isEqual%3a)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:26:18.613

我相信 isEqual 作为集合比较的一部分在成员上被调用，因为集合是一组独特的项目。也许您应该在从旧集合中删除之前将成员添加到新集合中？

希望这可以帮助！

# haskell - 无限列表的有限理解

> ID：10336392
> 
> 赞同：18
> 
> 时间：2012-04-26T15:18:35.107
> 
> 标签：haskell

我在 ghci 中输入了以下内容，认为会发生以下两种情况之一： 1）解释器会挂起，搜索无限列表的每个成员以匹配谓词；或 2）通过幕后的 Haskell 柔术，解释器会以某种方式找出序列在 4 处终止并停在那里。

```
[x | x <- [1..],5>x] 
```

结果 1 就是发生了什么。现在，结果 2 要求很高。但是既然人类可以证明序列在 4 处终止，那么有没有办法让解释器来做呢？是否可以将其重写为终止？事实上，有*没有*一个谓词可以从无限列表中产生有限的理解？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-26T15:25:26.503

> 但是既然人类可以证明序列在 4 处终止，那么有没有办法让解释器来做呢？

在这个简单的情况下，是的。但是不存在一个通用算法来确定一个表达式`>n`对于 some的所有自然数是真还是假`n`，因为 Haskell 是图灵完备的，所以不可能证明一个表达式甚至代表所有自然数的终止程序。

即使您的表达式仅限于基本整数算术，它的真实性在一般情况下仍然无法确定。

> 是否可以将其重写为终止？

正如 Mog 在评论中所写，它是`takeWhile (< 5) [1..]`.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-26T15:29:09.487

`takewhile`如上所述，是针对您的特定问题的正确解决方案。

但是，这只是因为在您的情况下，所有可接受的参数都在所有不可接受的参数之前，并且一般列表理解不遵守该约束。当然可以向解释器添加符号推理，以便它可以证明没有其他元素是可接受的，然后终止。（事实上​​，Haskell 中复杂的类型系统在实现这种推理时非常有用。）但是将它添加到标准`[|]`运算符中没有意义，因为检测器必须在*所有*被评估的列表推导上运行，并且除了更多的计算费用外，通常不会做出任何贡献。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T21:58:30.153

> “但既然人类可以证明序列在 4 处终止，那么有没有办法让解释器来做呢？”

好问题。困难的不是证明它在 4 处终止，而是它可能在 4 处终止的想法，然后是这种情况确实如此的洞察力。

# php - Symfony2 全局函数

> ID：10336401
> 
> 赞同：21
> 
> 时间：2012-04-26T15:18:59.693
> 
> 标签：php, symfony

例如我有算法函数，它计算特定的哈希码。函数本身是 300 多行代码。我需要在捆绑包中的许多不同控制器中多次使用该功能。我在哪里可以存放我`calculate_hash()`的捆绑包中使用它？我可以从其他捆绑包中访问它吗？我也可以编写`calculate_hash()`可以访问**实体管理器**的全局吗？

[在这里](http://symfony.com/doc/current/cookbook/bundles/best_practices.html)没有找到我的答案。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-04-26T15:33:56.340

在 Symfony2 的世界里，这显然属于一种服务。服务实际上是绑定到依赖注入容器的普通类。您可以向它们注入您需要的依赖项。例如，假设函数所在的类`calculate_hash`是`AlgorithmicHelper`. 该服务具有“全局”功能。你定义你的类是这样的：

```
namespace Acme\AcmeBundle\Helper;

// Correct use statements here ...

class AlgorithmicHelper {

    private $entityManager;

    public function __construct(EntityManager $entityManager) {
        $this->entityManager = $entityManager;
    }

    public function calculate_hash() {
        // Do what you need, $this->entityManager holds a reference to your entity manager
    }
} 
```

然后需要让这个类知道 symfony 依赖容器。为此，您可以`app/config/config.yml`通过添加`service`如下部分在文件中定义您的服务：

```
services:
  acme.helper.algorithmic:
    class: Acme\AcmeBundle\Helper\AlgorithmicHelper
    arguments:
      entityManager: "@doctrine.orm.entity_manager" 
```

就在服务下方，是服务 ID。例如，它用于在控制器中检索您的服务。之后，您指定服务的类，然后指定要传递给类的构造函数的参数。该`@`符号表示通过 id 传递对服务的引用`doctrine.orm.entity_manager`。

然后，在您的控制器中，您执行以下操作来检索服务并使用它：

```
$helper = $this->get('acme.helper.algorithmic');
$helper-> calculate_hash(); 
```

请注意，调用的结果`$this->get('acme.helper.algorithmic')`将始终返回相同的帮助程序实例。这意味着，默认情况下，服务是唯一的。这就像有一个单例课程。

有关更多详细信息，我邀请您阅读 Symfony2[书](http://symfony.com/doc/current/book/index.html)。还要检查这些链接

1.  Symfony2 书中的服务容器[部分](http://symfony.com/doc/current/book/service_container.html)。
2.  [我在此处](https://stackoverflow.com/a/6127711/697930)给出了关于在控制器外部访问服务的答案。

希望能帮助到你。

问候，
马特

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-20T21:32:43.253

Braian 在评论中询问 Symfony 3 的答案，所以这里有一个**Symfony 3.3**（2017 年 5 月发布）：

### 1.原来的类保持不变

```
namespace Acme\AcmeBundle\Helper;

use Doctrine\ORM\EntityManager;

final class AlgorithmicHelper
{
    /**
     * @var EntityManager
     */
    private $entityManager;

    public function __construct(EntityManager $entityManager)
    {
        $this->entityManager = $entityManager;
    }

    public function calculateHash()
    {
        // Do what you need, $this->entityManager holds a reference to your entity manager
    }
} 
```

### 2.服务注册[要简单得多](https://www.tomasvotruba.cz/blog/2017/05/07/how-to-refactor-to-new-dependency-injection-features-in-symfony-3-3/)

```
# app/config/services.yml
services:
    _defaults: autowire # this enabled constructor autowiring for all registered services

    Acme\AcmeBundle\Helper\AlgorithmicHelper: ~ 
```

### 3.使用构造函数注入获取服务

```
use Acme\AcmeBundle\Helper\AlgorithmicHelper;

class SomeController
{
    /**
     * @var AlgorithmicHelper
     */
    private $algorithmicHelper;

    public function __construct(AlgorithmicHelper $algorithmicHelper)  
    {
        $this->algorithmicHelper = $algorithmicHelper;
    }

    public function someAction()
    {
        // some code
        $hash = $this->algorithmicHelper->calculateHash();
        // some code
    }
} 
```

您可以在以下 2 篇文章中阅读有关 Symfony 3.3 依赖注入（在这种情况下在配置中注册服务并在控制器中使用它）的新闻：

*   [https://www.tomasvotruba.cz/blog/2017/05/07/how-to-refactor-to-new-dependency-injection-features-in-symfony-3-3/](https://www.tomasvotruba.cz/blog/2017/05/07/how-to-refactor-to-new-dependency-injection-features-in-symfony-3-3/)
*   [https://symfony.com/blog/the-new-symfony-3-3-service-configuration-changes-explained](https://symfony.com/blog/the-new-symfony-3-3-service-configuration-changes-explained)

# c++ - 查找进程从哪里运行

> ID：10336403
> 
> 赞同：0
> 
> 时间：2012-04-26T15:19:04.617
> 
> 标签：c++, process

所以我有一个问题，我有一个可以启动的应用程序。然后通过测试，我需要将其关闭并重新启动。但它需要在没有硬编码的情况下完成。

那么有没有办法找到一个进程是从哪里运行的呢？我可以找到所有正在运行的进程的列表，但不知道这是否可能。

编辑：它在 Windows 7 操作系统上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:12:30.083

简单便携的方法是使用 argv[0]。它返回完整的 .exe 文件路径，这就是您所需要的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T15:30:08.580

[QueryFullProcessImageName()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684919%28v=vs.85%29.aspx)将为进程提供可执行映像的路径：

```
#include <windows.h>
#include <iostream>

int main()
{
    char exe_path[MAX_PATH];
    DWORD exe_path_size = MAX_PATH;
    if (QueryFullProcessImageName(GetCurrentProcess(),
                                  0,
                                  exe_path,
                                  &exe_path_size))
    {
        std::cout << exe_path << "\n";
    }

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T15:26:00.590

首先，“查找进程的运行位置”是什么意思？我假设您的意思是父进程 id，但它可能意味着当前工作目录、远程调用的 ip 等...

要查找父进程 ID，请查看[getppid()](http://pubs.opengroup.org/onlinepubs/009695399/functions/getppid.html)。

编辑：这假设您（像任何理智的程序员一样）正在使用类似 unix 的机器。

编辑#2：你在 Windows 上，所以我不知道。

编辑#3：由于您正在寻找您正在执行的程序的路径，请使用 argv[0]。第一个命令行 arg 到 int main(int argc, char* argv[]) 始终是二进制文件的路径。

# ios - UIPageViewController：如何添加非分页工具栏或其他“覆盖”元素？

> ID：10336407
> 
> 赞同：5
> 
> 时间：2012-04-26T15:19:33.103
> 
> 标签：ios, cocoa-touch, uikit, uipageviewcontroller

我已经实现了一个 PDF 查看器。目前它是一个`UIViewController`包含一个`UIPageViewController`. 我的工具栏，一些覆盖元素（如快速访问 PDF 的某些页面）被添加到标准`UIViewController's`视图中。但是我想知道这是否需要？是否有可能从子控制器继承`UIPageViewController`并具有分页效果，并且仍然在顶部具有不会被分页的“浮动”元素？或者遏制是要走的路？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-15T23:32:58.227

我们应该以`UIPageViewController`编程方式创建并将其视图添加到另一个`UIViewController`视图作为子视图。我们希望它们“覆盖”的元素应该是主机的子视图`UIViewController`。

例如，在`- viewDidLoad`：

```
UIPageViewController *pvc = // init this on your own way
pvc.dataSource = // your data source

// Set page view controller's view's frame to match host view's frame
pvc.view.frame = self.view.bounds;

// And here comes the magic
[self.view insertSubView:pvc.view belowSubview:<any subview>]; 
```

简而言之，我们只使用`UIPageViewController`'s 视图而不使用它本身。

希望这可以帮助。

# javascript - 瘦服务器架构，OAuth2.0 保护页面

> ID：10336408
> 
> 赞同：1
> 
> 时间：2012-04-26T15:19:33.963
> 
> 标签：javascript, security, oauth, web

我最近一直在阅读关于瘦服务器架构的文章——http: [//www.thinserverarchitecture.com/](http://www.thinserverarchitecture.com/)（它是否有另一个名字？）——我有一个关于使用 OAuth2.0 保护页面的密码的问题。

假设我有一个页面 /secure.html，我只希望用户在获得 OAuth2 持有者令牌后才能访问该页面。令牌将通过一些 /login REST 调用生成。

瘦服务器架构页面如何“保护”页面？如果用户转到 /secure.html 并且请求标头没有“Authorization: Bearer”，那么令牌和重定向的验证是什么。这是Web服务器端的东西吗？如果是这样，我没有看到对 Apache、Lighttpd、Nginx 等的 OAuth2 支持。或者...secure.html 上的 Javascript 是否读取了令牌（来自授权标头或我猜是安全 cookie），调用一些 /verify REST 功能，并在必要时重定向到登录页面？

谢谢

# python - C 的 httplib 等效项

> ID：10336414
> 
> 赞同：1
> 
> 时间：2012-04-26T15:19:53.087
> 
> 标签：python, c

是否有类似 Python 的 httplib for C 的库？

我问是因为我想编写一个创建 HTTPSConnection 的 C 程序。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T15:25:22.943

libcurl 无疑是​​最著名的，但这里也有很多替代[品](http://curl.haxx.se/libcurl/competitors.html)。

# c++ - C ++移动构造函数和常量成员指针或常量成员，如何取消它们以避免内存泄漏？

> ID：10336417
> 
> 赞同：0
> 
> 时间：2012-04-26T15:19:59.297
> 
> 标签：c++, move-constructor

我有一个类，它有一个常量成员、常量指针和枚举类成员，

我对以下示例代码的问题：

1.  如何在移动构造函数中正确地取消“其他”的枚举类成员（分配什么值？）
2.  如何在移动构造函数中使“其他”的常量指针无效，以便其他的析构函数不会删除正在构造的对象的内存，并且指针仍然有效？
3.  如何在移动构造函数中使“其他”的常量成员无效，以免调用其他的析构函数？

* * *

```
enum class EnumClass
{
    VALUE0, // this is zero
    VALUE1
};

class MyClass
{
  public:
    MyClass() : 
        member(EnumClass::VALUE1),
        x(10.f),
        y(new int(4)) { }

    MyClass(MyClass&& other) : 
        member(other.member),
        x(other.x),
        y(other.y)
    {
        // Can I be sure that this approach will nullify a "member" and avoid
        // destructor call of other
        other.member = EnumClass::VALUE0;

        // Or shall I use this method?
        other.member = static_cast<EnumClass>(0);

        // ERROR how do I nullify "x" to avoid destructor call of other?
        other.x = 0.f;

        // ERROR the same here, delete is going to be called twice!
        other.y = nullptr;
    }

    ~MyClass() 
    {
        delete y;
    }

  private:
    EnumClass member;
    const float x;
    int* const y;
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T15:30:34.197

您无需担心使非指针类型无效。它们不能被多次“释放”，因为它们的数据位于类内部，而不是堆上。你的 const int 指针确实需要被取消，看起来你做对了。

看看这篇 MDSN 文章了解更多信息：http: [//msdn.microsoft.com/en-us/library/dd293665.aspx](http://msdn.microsoft.com/en-us/library/dd293665.aspx)

编辑：

如果您声明一个 int* const y，则您将指针声明为 const。如果您只是希望 int 为 const，请将其声明为 const int* y。您不能更改声明为 int* const y 的指针的地址。

# websocket - 如何使用 netty 保护 websocket

> ID：10336418
> 
> 赞同：4
> 
> 时间：2012-04-26T15:20:17.067
> 
> 标签：websocket, netty, ssl, sslengine

我想将 netty 用于启用了 TLS 并使用 (wss://) 模式的 websocket。

所以我想我应该像这样工作：[WebSocketServerHandler](http://netty.io/docs/stable/xref/org/jboss/netty/example/http/websocketx/server/WebSocketServerHandler.html)现在应该扩展[SslHandler](http://docs.jboss.org/netty/3.2/api/org/jboss/netty/handler/ssl/SslHandler.html)。[所以我基本上只需要在WebSocketServerPipelineFactory](http://netty.io/docs/stable/xref/org/jboss/netty/example/http/websocketx/server/WebSocketServerPipelineFactory.html)中设置一个 SSLEngine 。我可以将引擎传递给安全处理程序：

```
SSLEngine sslEngine = SSLContext.getDefault().createSSLEngine();
pipeline.addLast("handler", new WebSocketServerHandler(sslEngine)); 
```

这种方法通常是正确的方法吗？（如果方法正确） - 我如何设置 SSLEngine（我有我的证书和私钥/公钥作为可用文件）。我找不到任何例子！

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T22:59:52.233

Netty 有例子:-)

Netty 大师 [https://github.com/netty/netty/tree/master/example/src/main/java/io/netty/example/http/websocketx/sslserver](https://github.com/netty/netty/tree/master/example/src/main/java/io/netty/example/http/websocketx/sslserver)

Netty 3.x 分支 [https://github.com/netty/netty/tree/3/src/main/java/org/jboss/netty/example/http/websocketx/sslserver](https://github.com/netty/netty/tree/3/src/main/java/org/jboss/netty/example/http/websocketx/sslserver)

# android - 使用 Android 加载 1,440,000 大小的 ArrayList 时操作极慢

> ID：10336424
> 
> 赞同：1
> 
> 时间：2012-04-26T15:20:24.693
> 
> 标签：android, arraylist

源代码如下图

```
public static ArrayList<Integer> readFile(String fileName) {

String sdPath;
sdPath = Environment.getExternalStorageDirectory().getAbsolutePath() + "/";
ArrayList<Integer> data = new ArrayList<Integer>();

try {

Scanner s = new Scanner(new FileInputStream(new File(sdPath + fileName)));

while( s.hasNext() ) {
data.add( s.nextInt() );
}
}
catch(FileNotFoundException fN) {
fN.printStackTrace();
}
catch(IOException e) {
System.out.println(e);
}

return data;    
} 
```

当我运行此代码时，LogCat 会显示以下消息，其中包含我的 android 中的任何显示更改

```
.
.
.
04-27 00:12:31.216: D/dalvikvm(17141): GC_CONCURRENT freed 1953K, 23% free 15699K/20295K, paused 2ms+12ms
.
.
. 
```

此外，上面的代码在几秒钟内就可以在我的桌面上完全运行..

请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T15:27:51.983

与台式计算机相比，手机的资源非常有限。您不应该期望手机能够以与台式计算机相同的速度完成计算密集型任务......

您正在用尽所有手机 RAM，试图将这么大的 ArrayList 加载到其中。

一些提示：

*   如果您的 readFile 代码不存在，则将其移至后台线程。
*   考虑一个不同的数据结构，某种 SQL 可能会更有效地处理这么大的数据集
*   考虑一次只加载 ArrayList 的（相对）一小部分。做你需要的部分，当你需要另一个部分时，单独加载它。
*   考虑将数据拆分为多个较小的文件，并仅加载当前操作所需的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T18:21:25.760

只需将数据保存在磁盘上并改用内存映射 IO。看看[FileChannel 和 map 函数](http://developer.android.com/reference/java/nio/channels/FileChannel.html#map%28java.nio.channels.FileChannel.MapMode,%20long,%20long%29)并从那里获取它。缓冲区类也有[检索整数](http://developer.android.com/reference/java/nio/ByteBuffer.html#getInt%28int%29)的方法。

# c# - 以编程方式在 WCF 请求中添加解压缩

> ID：10336430
> 
> 赞同：4
> 
> 时间：2012-04-26T15:20:36.090
> 
> 标签：c#, wcf, gzip, app-config

我想在我的 SOAP WCF 请求中打开压缩。[此处](https://stackoverflow.com/questions/1741768/wcf-gzip-compression-request-response-processing)描述的解决方案完美运行。它涉及2个部分：

1.  打开压缩的 IWebRequestCreate 继承类的实现。这不是问题。

2.  在 app.config 文件中指定应使用上述类。这是通过 app.config 文件中的 XML 完成的：

：

```
<configuration>
  <system.net>
    <webRequestModules>
      <remove prefix="http:"/>
      <add prefix="http:" 
            type="Pajocomo.Net.CompressibleHttpRequestCreator, Pajocomo" />
    </webRequestModules>
  </system.net>
</configuration> 
```

然而，这是一个问题，因为这个 C# 项目是一个 DLL（一个 SSIS 数据流组件），它无法“看到”app.config 文件（我们也不想修改调用 .exe 的配置文件）。

[这里](https://stackoverflow.com/questions/3703844/consume-a-soap-web-service-without-relying-on-the-app-config)的问题描述了此问题的解决方法（简而言之，创建 BasicHttpBinding 和 EndpointAddress 对象并将它们发送到客户端的 c'tor）。我已经在某种程度上成功地使用它来允许代理、更改超时、更改服务的 URL 等。

但是，我无法弄清楚以类似方式替换上述 XML 的机制。

# recursion - 使用 XMLUnit 查找缺失的元素

> ID：10336431
> 
> 赞同：4
> 
> 时间：2012-04-26T15:20:37.657
> 
> 标签：recursion, xmlunit

我有以下 testXML

```
<root>
   <a>test</a>
   <b>bee</b>
   <d/>
</root> 
```

虽然 templateXML 看起来像这样

```
<root>
  <a/>
  <b/>
  <c/>
  <d>
    <e/>
  </d>
</root> 
```

我希望 XMLUnit 返回缺少的元素，在这种情况下，缺少“c”和“e”

**/root[1]/c[1] 丢失
/root[1]/d[1]/e[1] 丢失**

我的代码看起来像这样

```
public static ArrayList<Difference> testCompareToSkeletonXML(String xml, String template) throws Exception {

    XMLUnit.setCompareUnmatched(false);
    XMLUnit.setIgnoreAttributeOrder(true);
    XMLUnit.setIgnoreComments(true);
    XMLUnit.setIgnoreWhitespace(true);
    XMLUnit.setIgnoreDiffBetweenTextAndCDATA(true);     

    DifferenceListener myDifferenceListener = new IgnoreTextAndAttributeValuesDifferenceListener();
    DetailedDiff myDiff = new DetailedDiff(new Diff(template, xml));
   // myDiff.overrideDifferenceListener(myDifferenceListener);
    myDiff.overrideElementQualifier(new RecursiveElementNameAndTextQualifier());
    ArrayList<Difference> returnList = new ArrayList<Difference>();
    List<Object> allDifferences = myDiff.getAllDifferences();
    for(Object obj: allDifferences){
        Difference dif = (Difference) obj;          
        if(dif.getTestNodeDetail().getNode()== null){
            //returnList.add(dif);          
            System.out.println(dif.getControlNodeDetail().getXpathLocation());
        }   
    }
    return returnList;
} 
```

生成的输出如下所示

/root[1]/a[1]
/root[1]/b[1]
/root[1]/c[1]
/root[1]/d[1]

感谢您的帮助
--SD

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-03T16:33:10.587

您告诉 XMLUnit 仅在元素名称和嵌套文本相同时才相互匹配元素。您的`a`or`b`元素并非如此（它们在嵌套文本中有所不同），这就是您在列表中看到它们的原因。

您会看到`d`而不是嵌套`e`，因为顶层`d`s 根据 的规则而有所不同`RecursiveElementNameAndTextQualifier`。如果您删除行设置，`RecursiveElementNameAndTextQualifier`您的列表将减少到

```
/root[1]/c[1]
/root[1]/d[1]/e[1] 
```

这是你所期待的。

# arrays - 拆分数组中的值并创建一个新数组

> ID：10336434
> 
> 赞同：2
> 
> 时间：2012-04-26T15:20:45.193
> 
> 标签：arrays, crystal-reports

我对水晶很陌生。我有一个名为 {?names} 的参数，它允许多个值在数据库中搜索所有这些名称或类似名称。我想检查数组的每个值是否有“，”以防有人写`"last name, first name"`。如果它确实包含“，”，那么我想在“，”处拆分它，然后创建一个新数组，其中所有值都是数组中它们自己的值。像这样：

```
 {?names} = ["hank", "jerry", "smith, john", "peterson"] 
```

如何检查数组的每个值是否有“，”，如果找到，将其拆分并将其分成新数组中的两个不同值？像这样：

```
 new {?names} = ["hank", "jerry", "smith", "john", "peterson"] 
```

对不起，如果这是一个菜鸟问题，但我有点菜鸟。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T15:46:29.803

创建公式字段：

```
//{@names}
Stringvar Array names := Split( Join({?Names},","), "," );

// test the results or do whatever
Join(names, ":") 
```

但是，这种方法不会删除空格。例如，“smith, john”将产生“smith”、“john”。

这很重要，请尝试以下方法：

```
Stringvar Array names:= Split(Join({?Names},","),",");

Stringvar Array output;
Redim output[ubound(names)];

Local Numbervar i;

for i:=1 to ubound(names) do (

    output[i] := trim(names[i]);

);

Join(output,":") 
```

# mongodb - 暴露数据库内部是不是很糟糕？

> ID：10336439
> 
> 赞同：2
> 
> 时间：2012-04-26T15:21:00.920
> 
> 标签：mongodb, database

有人告诉我，公开数据库内部结构很糟糕，但我开始注意到许多相对高调的网站都在这样做，例如 Chartboost 和 ServerDensity 都`_id`在其 URL 中公开了 MongoDB 文档字段。

有人可以阐明为什么这样做不好吗？我唯一能想到的是这对 SEO 不利，因为它们不是人类可读的 URL，但这是真的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T15:24:38.187

通过“暴露数据库内部”，我理解诸如将数据库服务器暴露在互联网上或让用户运行任意查询之类的东西。这东西无疑是坏的。或者，如果您以某种方式暴露了您的数据库模式，恶意用户可以利用这一点为自己谋取利益。

在 url 中使用对象 ID 很好。无论如何，人类不会记住 url，搜索引擎也不关心帖子的链接是由 post slug 还是 post id 组成的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T18:03:29.780

甚至 stackoverflow 在 URL 中显示其数据库 ID。它可能是代理键或自然键，无论如何您必须以某种方式识别资源。基本上，每个站点都在 URL 中使用某种标识，通常是 PK。你认为他们为什么使用 MongoDb ？它甚至可以是使用 GUID 而不是 Long PK 的关系数据库

即使您向某人显示数据库架构，也不会发生任何事情，直到您免受 sql-injection 的保护。

# c# - CustomeProfile 类，键值对列表未保存

> ID：10336440
> 
> 赞同：1
> 
> 时间：2012-04-26T15:21:02.557
> 
> 标签：c#, asp.net, asp.net-profiles

```
public class KeyValue : ProfileBase
{
    public KeyValue()
    { }

    public List<KeyValuePair<string, string>> pair
    {
        get { return (List<KeyValuePair<string,string>>)base["pair"]; }
        set { base["pair"] = value; }
    }

    public string Name
    {
        get { return base["Name"] as string; }
        set { base["Name"] = value; }
    }
} 
```

这个 CustomProfile 类有什么问题。我正在保存键值对列表，但是当我访问它时，每对都显示 null，但它给出了正确的名称

# jquery - 有没有办法将命令绑定到 fadeIn 事件而无需 .trigger('fadeIn')？

> ID：10336442
> 
> 赞同：4
> 
> 时间：2012-04-26T15:21:16.050
> 
> 标签：jquery, events, bind

我有一个具有不同模块的交互式表单系统，其中每个模块的表单包含在不同的 div 元素中。当我从一个模块切换到另一个模块时，我经常这样做：

```
$('#module_1').hide();
$('#module_2').fadeIn(); 
```

我喜欢这个，但是现在，在开发这个系统一段时间后，我有一些功能（比如重新初始化一个 jqgrid），我希望每次 a发生时都`fadeIn`发生。我这样设置：

```
$('#module_2').bind('fadeIn',function(){
    initialize_jqgrid();
}); 
```

有没有一种方法可以使所有实例都可以使用，`$('#module_2').fadeIn();`而不必去每个实例并用它替换它？

```
$('#module_2').fadeIn().trigger('fadeIn'); 
```

这背后的动机只是为了拥有更简洁的代码，`$('#module_2').fadeIn().trigger('fadeIn');`有点多余。

非常感谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-26T15:24:58.730

当然，

```
var _old = $.fn.fadeIn;

$.fn.fadeIn = function(){
    var self = this;
    return _old.apply(this,arguments).promise().done(function(){
        self.trigger("fadeIn");
    });
};

// and your code: // replace .bind with .on if jQuery 1.7+
​$("div").bind("fadeIn",function(){alert("worky");});

$("div").fadeIn(2000);​​​​​​​​​​​​​​​​​ 
```

**演示**
[http://jsfiddle.net/gEVsX/2/](http://jsfiddle.net/gEVsX/2/)

**更新评论**

```
var _old = $.fn.fadeIn;

$.fn.fadeIn = function(){
    return _old.apply(this,arguments).trigger("fadeIn");
};

// and your code: // replace .bind with .on if jQuery 1.7+
​$("div").bind("fadeIn",function(){alert("worky");});

$("div").fadeIn(2000);​​​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T15:25:19.783

您可以定义您的回调函数并将其用作fadeIn() 的参数。

```
function callback(){
    initialize_jqgrid();
}

$('div#module_2').fadeIn(duration,callback) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T15:25:16.567

简单功能：

```
switch_module('div#module_1','div#module_2');

function switch_module(old_selector, new_selector){
    $(old_selector).hide();
    initialize_jqgrid();
    $(new_selector).fadeIn();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T15:27:58.873

您可以使用回调函数`$('div#module_2').fadeIn(500, initialize_jqgrid);`

并通过通用选择器调用将所有内容放入函数中；

```
function fadeModule(selector)
{
    $(selector).fadeIn(500, initialize_jqgrid);
} 
```

并这样称呼它`fadeModule('div#module_2');`

编辑： 500 是淡入的默认持续时间，放任何你想要的。

# c++ - std::map 插入/擦除的并发问题

> ID：10336443
> 
> 赞同：2
> 
> 时间：2012-04-26T15:21:21.080
> 
> 标签：c++, concurrency, pthreads

我正在编写一个线程应用程序，它将处理资源列表，并且可能会或可能不会将结果项放置在每个资源的容器（std::map）中。资源的处理发生在多个线程中。

将遍历结果容器，每个项目由一个单独的线程处理，该线程接受一个项目并更新 MySQL 数据库（使用 mysqlcppconn API），然后从容器中删除该项目并继续。

为简单起见，这里是逻辑的概述：

```
queueWorker() - thread
    getResourcesList() - seeds the global queue

databaseWorker() - thread
    commitProcessedResources() - commits results to a database every n seconds

processResources() - thread x <# of processor cores>
    processResource()
    queueResultItem() 
```

以及显示我在做什么的伪实现。

```
/* not the actual stucts, but just for simplicities sake */
struct queue_item_t {
    int id;
    string hash;
    string text;
};

struct result_item_t {
    string hash; // hexadecimal sha1 digest
    int state;
}

std::map< string, queue_item_t > queue;
std::map< string, result_item_t > results;

bool processResource (queue_item_t *item)
{
    result_item_t result;

    if (some_stuff_that_doesnt_apply_to_all_resources)
    {
        result.hash = item->hash;
        result.state = 1;

        /* PROBLEM IS HERE */
        queueResultItem(result);
    }
}

void commitProcessedResources ()
{
    pthread_mutex_lock(&resultQueueMutex);

    // this can take a while since there

    for (std::map< string, result_item_t >::iterator it = results.begin; it != results.end();)
    {
        // do mysql stuff that takes a while

        results.erase(it++);
    }

    pthread_mutex_unlock(&resultQueueMutex);
}

void queueResultItem (result_item_t result)
{
    pthread_mutex_lock(&resultQueueMutex);

    results.insert(make_pair(result.hash, result));

    pthread_mutex_unlock(&resultQueueMutex);
} 
```

如 processResource() 所示，问题就在那里，当 commitProcessedResources() 正在运行并且 resultQueueMutex 被锁定时，我们将在这里等待 queueResultItem() 返回，因为它会尝试锁定相同的互斥体，因此会等待直到完成，这可能需要一段时间。

显然，由于运行的线程数量有限，因此一旦所有线程都在等待 queueResultItem() 完成，在互斥锁被释放并可用于 queueResultItem() 之前，将不再进行任何工作。

**所以，我的问题是我如何最好地实现这一点？是否有一种特定类型的标准容器可以同时插入和删除，或者是否存在我不知道的东西？**

每个队列项都可以拥有自己的唯一键并不是*绝对*必要的，就像 std::map 的情况一样，但我更喜欢它，因为多个资源可以产生相同的结果，我更愿意只发送一个唯一的结果到数据库，即使它*确实*使用 INSERT IGNORE 忽略任何重复项。

不幸的是，我对 C++ 还很陌生，所以我不知道在 Google 上要寻找什么。:(

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T15:29:48.567

在处理过程中，您不必一直为队列持有锁`commitProcessedResources ()`。您可以改为将队列与空队列交换：

```
void commitProcessedResources ()
{
    std::map< string, result_item_t > queue2;
    pthread_mutex_lock(&resultQueueMutex);
    // XXX Do a quick swap.
    queue2.swap (results);
    pthread_mutex_unlock(&resultQueueMutex);

    // this can take a while since there

    for (std::map< string, result_item_t >::iterator it = queue2.begin();
        it != queue2.end();)
    {
        // do mysql stuff that takes a while

        // XXX You do not need this.
        //results.erase(it++);
    }   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:29:59.573

您将需要使用同步方法（即互斥锁）来使其正常工作。但是，并行编程的目标是最小化临界区（即在您持有锁时执行的代码量）。

也就是说，如果您的 MySQL 查询可以在不同步的情况下并行运行（即多个调用不会相互冲突），请将它们从临界区中取出。这将*大大*减少开销。例如，如下所示的简单重构可以解决问题

```
void commitProcessedResources ()
{
    // MOVING THIS LOCK

    // this can take a while since there
    pthread_mutex_lock(&resultQueueMutex);
    std::map<string, result_item_t>::iterator end = results.end();
    std::map<string, result_item_t>::iterator begin = results.begin();
    pthread_mutex_unlock(&resultQueueMutex);

    for (std::map< string, result_item_t >::iterator it = begin; it != end;)
    {
        // do mysql stuff that takes a while

        pthread_mutex_lock(&resultQueueMutex); // Is this the only place we need it?
        // This is a MUCH smaller critical section
        results.erase(it++);
        pthread_mutex_unlock(&resultQueueMutex); // Unlock or everything will block until end of loop
    }

    // MOVED UNLOCK
} 
```

这将使您能够跨多个线程同时“实时”访问数据。也就是说，随着每次写入完成，地图都会更新，并且可以使用当前信息在其他地方读取。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T15:34:21.567

在 C++03 之前，该标准根本没有定义任何关于线程或线程安全的内容（而且由于您使用的是`pthread`s，我猜这几乎就是您正在使用的内容）。

因此，您可以对共享地图进行锁定，以确保在任何给定时间只有一个线程尝试访问该地图。否则，您可能会破坏其内部数据结构，因此该地图根本不再有效。

或者（我通常更喜欢这个）你可以让你的多个线程将它们的数据放入一个线程安全的队列中，并有一个线程从该队列中获取数据并将其放入映射中。由于它是单线程的，因此您不再需要在使用地图时锁定地图。

在将映射刷新到磁盘时，有一些合理的可能性来处理延迟。可能最简单的方法是从队列中读取相同的线程，插入映射，并定期将映射刷新到磁盘。在这种情况下，当映射被刷新到磁盘时，传入的数据只是位于队列中。这使得对地图的访问变得简单——因为只有一个线程直接接触它，它可以在没有任何锁定的情况下使用地图。

另一个是有两张地图。在任何给定时间，刷新到磁盘的线程都会获得一个映射，而从队列中检索并插入映射的线程会获得另一个。当刷新线程需要做它的事情时，它只是交换两者的角色。就个人而言，我认为我更喜欢第一种——消除地图周围的所有锁定具有很大的吸引力，至少对我来说是这样。

保持这种简单性的另一个变体是队列->映射线程创建映射，填充它，当它足够满时（即，在适当的时间长度之后）将它填充到另一个队列中，然后从头开始重复（即，创建新地图等） 刷新线程从其传入队列中检索地图，将其刷新到磁盘，然后将其销毁。尽管这会增加一些创建和销毁地图的开销，但您这样做的频率并不足以引起很多关注。您仍然可以随时保持对任何地图的单线程访问，并且仍然保持所有数据库访问与其他所有内容隔离。

# javascript - 谷歌浏览器和可视化 google.setOnLoadCallback 在 ajax 中失败

> ID：10336444
> 
> 赞同：0
> 
> 时间：2012-04-26T15:21:23.687
> 
> 标签：javascript, firefox, google-chrome, google-visualization

有关示例，请参见[http://jsfiddle.net/QJVUr/1/ - 在 FF 中可以正常工作，但在 Chrome 中却不行。](http://jsfiddle.net/QJVUr/1/)

在对面；删除 google.setOnLoadCallback 适用于 Chrome 但不适用于 Firefox：http: [//jsfiddle.net/RTQ5S/](http://jsfiddle.net/RTQ5S/)

关于妥协的任何想法？

我猜 Chrome 没有运行 setOnLoadCallback 因为它已经加载了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-04T10:23:15.993

而不是使用 setOnCallback 在库加载中设置回调。

见[http://jsfiddle.net/QJVUr/10/](http://jsfiddle.net/QJVUr/10/)

```
google.load('visualization', 1, {packages:['corechart'], callback: drawChart}); 
```

根据 Google 开发文档，如果库已经加载，则不会再次加载，而是立即调用回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T04:58:12.383

我建议两件事：

*   理想情况下，您的 AJAX 调用只会获取数据，并将此数据传递给回调函数，该函数将构建 gviz DataTable 并绘制图表。[请参阅此处](https://stackoverflow.com/questions/8312744/refresh-google-visualization-on-the-fly/8324093#8324093)的示例。
*   google.setOnLoadCallback 的目的是（[根据这些文档](https://developers.google.com/earth/documentation/)）等到加载谷歌库和 html 页面，以便事情开始发生。所以根据你的小提琴，我会`window.addEvent('domready', function(){..});`用`google.setOnLoadCallback(function(){...});`.

希望这会有所帮助；我不确定他们以您的方式做事是否有原因，这意味着上述选项不是您想要的，所以如果是这种情况，请随时在您的问题中提供更多细节。

# icmp - scapy：修改嗅探流量 TTL 的正确方法

> ID：10336448
> 
> 赞同：2
> 
> 时间：2012-04-26T15:21:32.277
> 
> 标签：icmp, scapy, ttl

我正在和 Scapy 玩耍，我注意到一些奇怪的事情。

如果我创建一个数据包以触发 ICMP 超时错误消息：

```
myPacket = IP(dst="www.google.com", ttl=3)/TCP() 
```

...一旦我使用该功能发送 ICMP 消息，我就会收到它`sr`。

另一方面，如果我获取任何已嗅探的传出数据包并将其 ttl 值更改为上面使用的相同值，我将得不到任何回复。

这里有什么问题？我以为我可以通过使用虚拟流量而不是真实流量来体验这一点！我什至尝试使用其他 TTL 值，但无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:19:17.630

好的，数据包被丢弃了，因为一旦我更改了 ttl 值，校验和就不再正确了。我只需要通过删除它的值来强制重新计算校验和：

```
del(mypacket.getlayer(IP).chksum) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T14:39:27.100

另一种选择是使用 sendp() 函数。Scapy 自动计算 IP 和 TCP 校验和。

```
myPacket = IP(dst="www.google.com", ttl=3)/TCP()
sendp(myPacket)

def dissect(pck):
    if pck.haslayer("ICMP"): # Filter out all but ICMP packets.  You could do additional filtering
        pck.show()           # Display response packets

sniff(iface="eth0", prn=lambda x:dissect(x), store=0) 
```

# php - Google Docs API - Zend gData - 如何找到集合的 URI

> ID：10336453
> 
> 赞同：2
> 
> 时间：2012-04-26T15:21:54.290
> 
> 标签：php, zend-framework, gdata, google-docs-api, google-drive-api

我有一个 Zend_Gdata_App_Entry 类型的条目，

此条目是一个集合/文件夹，我尝试获取此文件夹的 URI，

我知道 URI 是一个 URL，但条目的 id 也是一个 URL，那么有什么区别？

我想这样做：

```
// Instantiate a FolderQuery object to retrieve the content of the folder.
FolderQuery contentQuery = new FolderQuery(folder.ResourceId);

URI = contentQuery.Uri 
```

但不是在 .NET 中，而是在 PHP 中使用 Zend gdata 框架

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T10:05:55.130

也许这会对你有所帮助。创建子文件夹，然后将文件上传到新文件夹：

```
$service = Zend_Gdata_Docs::AUTH_SERVICE_NAME;
$client = Zend_Gdata_ClientLogin::getHttpClient($user, $pass, $service);
$docs = new Zend_Gdata_Docs($client);

$parentFolder = 'folder%3A[folderid]';    

$newFolder = $docs->createFolder($_POST['email'], $parentFolder);

$location = str_replace($parentFolder . '/', '', $newFolder->getSelfLink()->getHref());

// Upload the file to google docs
$newDocumentEntry = $docs->uploadFile(
    $fileToUploadTemp, 
    $fileToUpload, 
    Zend_Gdata_Docs::lookupMimeType($fileExtension),
    $location
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T22:57:02.123

在 GData 中，self URI 和 ID 通常比较相似。所以，如果你有一个或另一个，它真的并不重要。ResourceID 有点不同，因为它们不是 URL，而是形式为`folder:1234`。`folder:`如果前缀后面有数字，则可以轻松构建它们。如果您仔细查看从资源 ID 构造的文档的 ID。所有这些都存在实际差异，它们大多是 GData 协议所需要的。

无论如何，一旦您有了文件夹的 ID 或资源 ID，您就可以使用以下 URL 冷列出其内容：

```
https://docs.google.com/feeds/default/private/full/folder%3A1234/contents 
```

只要确保`folder%3A1234`用文件夹的实际资源 ID 替换即可。

然后，您可以在方法中使用该 URL`Zend_Gdata_Docs.getDocumentListFeed(String location)`作为位置属性。这将为您提供包含文件夹内所有元素的文档提要。

# iphone - 使用转换后的 NSNumber 到 NSString 返回 EXC_BAD_ACCESS

> ID：10336463
> 
> 赞同：0
> 
> 时间：2012-04-26T15:22:25.410
> 
> 标签：iphone, objective-c, nsstring, nsnumber

我已经构建了一个“深度”NSMutableDictionary，其中包含解析的 XML 数据以及可以从一个视图控制器传递到另一个视图控制器的其他相关信息。NSMutableDictionary 主要包含 NSStrings，但也包含另一个 NSMutableDictionary，更多 NSStrings，最后更深入地包含自定义对象的 NSMutableArray（它用于日历）。

现在，因为它是日历，显然涉及到日期。我使用 NSXMLParser 接收和解析的 XML 数据返回字符串，因此我必须将当天的日期转换为可用的数字。XML 中的日期采用以下格式：“MM.DD” 我为此创建了以下方法：

```
- (void)createDateCodesWithString:(NSString *)string 
{ 
   NSInteger monthCode;
   NSInteger dayCode;
   ....
   NSArray *dates = [string componentsSeparatedByString:@"."];
   monthCode = [[dates objectAtIndex:0] integerValue];
   dayCode = [[dates objectAtIndex:1] integerValue];
   ....
   shortDay = [NSNumber numberWithInt:dayCode];
} 
```

'shortDay' 是一个 NSNumber* 和一个 ivar，并设置为我创建的自定义对象的属性（非原子，保留）。当我在控制台中运行 NSLog 命令时，似乎“shortDay”和其他数据已成功存储在深层 NSMutableDictionary 中。但是，当我再次尝试访问数据时，我遇到了问题。当我访问 NSString* 存储的 ivar 时，一切正常，但是当我尝试访问 NSNumber* 时，我收到错误 EXC_BAD_ACCESS 代码 1 或代码 2。这就是我尝试调用 NSNumber* 的方式

```
 NSNumber *number = day.shortDay;
   return [number stringValue]; 
```

问题可能是因为 NSArray *dates 将字符串剥离为月份和日期字符串，而日期字符串（长度为两个字符）可能在之前包含一个“0”，例如，如果该天是该月的 6 号，则为一个“6” ? 有什么建议吗？

如果需要，我很乐意发布更多代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:34:59.570

`shortDay`在您下次尝试访问它之前，可能正在清理内存。分配它时，请尝试以下操作：

```
shortDay = [[NSNumber numberWithInt:dayCode] retain]; 
```

增加引用计数（AKA 取得对象的所有权）以避免过早释放内存。

如果这解决了问题，那么您将需要调用您的类`[shortDay release]`的`dealloc`方法，以便在正确的时间正确地释放它的内存。

# jakarta-ee - WebSphere Class Loader Viewer 是显示应用程序运行时加载的库还是仅显示启动时加载的库？

> ID：10336466
> 
> 赞同：1
> 
> 时间：2012-04-26T15:22:28.673
> 
> 标签：jakarta-ee, websphere, classloader

在 WebSphere Application Server 6.0 管理控制台中，我将转到 Troubleshooting -> Class Loader Viewer -> server_name -> Applications 并打开`war`文件的类加载器。我单击“WAS 模块 - 复合类加载器”下的“类”链接，我会看到从相应`jar`文件加载的类列表。

此列表是否会随着应用程序的运行、执行更多代码分支以及可能加载更多库而更新，还是仅显示启动时加载的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T16:41:55.827

它显示加载页面时该类加载器已加载的类列表。如果您刷新页面，它将显示在此期间加载的任何新类（包括执行更多代码分支，如您所说）。

# wordpress - 检查网站是否在 wordpress.com 或 .org 上运行

> ID：10336469
> 
> 赞同：-4
> 
> 时间：2012-04-26T15:22:43.623
> 
> 标签：wordpress

我如何检查网站是否在 wordpress.com 或 wordpress.org（自托管）上运行？

有问题的网站是[http://www.nsfgirls.com/](http://www.nsfgirls.com/)

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T15:28:05.860

[使用DNS Bench](http://dnsbench.com)等工具查看 www.nsfgirls.com 的 DNS 结果指向何处。然后对该 IP 地址使用反向 DNS 查找。在这种情况下，您会看到该站点托管在[bluehost](http://www.bluehost.com/)上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:45:30.520

[我的博客有效吗？](http://ismyblogworking.com/)是一个方便的工具，它显示了虚拟主机、一些 DNS、服务器签名等。

# visual-studio - 将方法调用替换为另一个

> ID：10336471
> 
> 赞同：3
> 
> 时间：2012-04-26T15:22:58.110
> 
> 标签：visual-studio, visual-studio-2010, resharper, resharper-6.0

我需要将所有出现的`obj.Method1()`地方`obj.Method2()`替换`obj`为同一类的实例。ReSharper 或 VS2010 是否允许这样做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T16:03:55.267

您可以像这样编写**ReSharper 替换模式**（*ReSharper->Tools->Pattern Catalog*、*Add Pattern*）：

![在此处输入图像描述](../Images/9deea56999e998502df645f920f00b25.png)

其中表达式*obj*的类型需要更改为您的类（包含*Method1*）。

然后按***保存***，然后按***立即搜索***以获取所有*Method1()*调用：

![在此处输入图像描述](../Images/8504630db2dc67f9c50c0c285e88b92d.png)

然后单击***替换***，所有*Method1*调用都被类型安全地替换为*Method2*。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T15:27:07.520

我会作弊 - 进行 3 点符号重命名（右键单击 -> 重命名方法名称）

*   方法 1 -> 温度
*   方法 2 -> 方法 1
*   温度 -> 方法 2

这些都不会改变代码功能，但会更新所有代码以使用正确的名称，除了方法本身现在命名不正确 - 只需将方法重命名为手动和*瞧*- 有点hacky但快速有效。

这确实依赖于托管代码中的所有方法调用（以便 VS 知道如何/如何重命名）。如果您有 XML 注释，C# rename 可以很好地处理这个问题，但 VB 没有 - 我假设既然您提到了 ReSharper，那么您使用的是 C#？

这也假设方法签名是相同的（如果不是，准备好进行大量复制/粘贴）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T19:53:37.523

像这样制作 Method1 的主体

```
public void Method1(...) { return Method2(...); } 
```

并在 Method1 上调用重构“内联方法”。

# java - Scanner 类是否一次将整个文件加载到内存中？

> ID：10336478
> 
> 赞同：7
> 
> 时间：2012-04-26T15:23:20.060
> 
> 标签：java, java.util.scanner

我经常使用 Scanner 类来读取文件，因为它非常方便。

```
 String inputFileName;
      Scanner fileScanner;

      inputFileName = "input.txt";
      fileScanner = new Scanner (new File(inputFileName)); 
```

我的问题是，上述语句是否一次将整个文件加载到内存中？或者对 fileScanner 进行后续调用，例如

```
 fileScanner.nextLine(); 
```

从文件中读取（即从外部存储而不是从内存中）？我问是因为我担心如果文件太大而无法一次全部读入内存会发生什么。谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-26T15:32:57.597

如果您阅读源代码，您可以自己回答问题。

似乎有问题的 Scanner 构造函数的实现显示：

```
public Scanner(File source) throws FileNotFoundException {
        this((ReadableByteChannel)(new FileInputStream(source).getChannel()));
} 
```

后者被包装到一个 Reader 中：

```
private static Readable makeReadable(ReadableByteChannel source, CharsetDecoder dec) {
    return Channels.newReader(source, dec, -1);
} 
```

并使用缓冲区大小读取

```
private static final int BUFFER_SIZE = 1024; // change to 1024; 
```

正如您在构造链中的最终构造函数中看到的那样：

```
private Scanner(Readable source, Pattern pattern) {
        assert source != null : "source should not be null";
        assert pattern != null : "pattern should not be null";
        this.source = source;
        delimPattern = pattern;
        buf = CharBuffer.allocate(BUFFER_SIZE);
        buf.limit(0);
        matcher = delimPattern.matcher(buf);
        matcher.useTransparentBounds(true);
        matcher.useAnchoringBounds(false);
        useLocale(Locale.getDefault(Locale.Category.FORMAT));
    } 
```

因此，扫描仪似乎不会一次读取整个文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T15:32:26.933

通过阅读代码，默认情况下似乎一次加载 1 KB。对于长文本行，缓冲区的大小可能会增加。（到您拥有的最长文本行的大小）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T15:53:07.183

In ACM Contest the fast read is very important. In Java we found found that use something like that is very faster...

```
 FileInputStream inputStream = new FileInputStream("input.txt");
    InputStreamReader streamReader = new InputStreamReader(inputStream, "UTF-8");
    BufferedReader in = new BufferedReader(streamReader);
    Map<String, Integer> map = new HashMap<String, Integer>();
    int trees = 0;
    for (String s; (s = in.readLine()) != null; trees++) {
        Integer n = map.get(s);
        if (n != null) {
            map.put(s, n + 1);
        } else {
            map.put(s, 1);
        }
    } 
```

The file contains, in that case, tree names...

```
Red Alder
Ash
Aspen
Basswood
Ash
Beech
Yellow Birch
Ash
Cherry
Cottonwood 
```

You can use the `StringTokenizer` for catch any part of line that your want.

We have some errors if we use `Scanner` for large files. Read 100 lines from a file with 10000 lines!

> A scanner can read text from any object which implements the Readable interface. If an invocation of the underlying readable's Readable.read(java.nio.CharBuffer) method throws an IOException then the scanner assumes that the end of the input has been reached. The most recent IOException thrown by the underlying readable can be retrieved via the ioException() method.

tells in the API

Good luck!

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T15:26:32.447

对于大文件，最好使用带有[FileReader的](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileReader.html)[BufferedReader](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/BufferedReader.html)之类的东西。一个基本的例子可以在[这里](http://www.roseindia.net/java/beginners/java-read-file-line-by-line.shtml)找到。

# phpstorm - 如何增加 PHPStorm 剪贴板历史记录大小？

> ID：10336484
> 
> 赞同：24
> 
> 时间：2012-04-26T15:23:49.277
> 
> 标签：phpstorm

默认情况下`Ctrl`++会弹出一个窗口，其中复制了最后5`Shift`个`V`项目，有没有办法增加这个数字？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-04-26T16:02:18.917

`Settings`（`Preferences`在 Mac 上）| `Editor`| **保存在剪贴板中的最大内容数**。

![剪贴板限制](../Images/a89e37652b408fef4c619a7c5f0fe747.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-11T18:50:31.920

在 2021 年的时候。

你应该从 增加它`Registry`。

1.  按`Shift`+`Shift`
2.  输入`clipboard.history.max.items`
3.  增加`Value`列

[注册表查看图片](https://i.stack.imgur.com/pHo5L.png)

# websphere - 在 Apache Tomcat 或一些开放服务器上运行 ibm websphere 就像 setup

> ID：10336485
> 
> 赞同：0
> 
> 时间：2012-04-26T15:23:49.997
> 
> 标签：websphere

有没有办法在开放的应用服务器上模仿 IBM Web Sphere？我们使用了一些函数，ibm 的 jsecurity_check 和他们的 cookie ltpa 令牌。那应该是获得像服务器一样正常运行的ibm。这些可以从开放服务器获得吗？甚至是 ibm websphere 的开放版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T02:09:52.320

的用法在[Servlet 规范](http://download.oracle.com/otn-pub/jcp/servlet-3.0-fr-eval-oth-JSpec/servlet-3_0-final-spec.pdf?AuthParam=1335491608_a7948343220eec9b9beb6b85b6978c40)`j_security_check`中定义，因此任何 Java Web 容器都与它兼容。

另一方面，LTPA 令牌是一种 IBM 技术，仅供 IBM 产品使用，因此您需要找到另一种方法来实现单点登录。正如@Manglu 所说，这更像是一个容器问题，不应该对您的应用程序产生任何影响。

[https://stackoverflow.com/questions/173704/which-sso-framework-to-use](https://stackoverflow.com/questions/173704/which-sso-framework-to-use)中描述了一些 SSO 解决方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T23:55:02.320

我不确定您所说的开放版本是什么意思。如果您正在查看 WAS 的免费版本，您应该查看 WAS Developers edition

[http://www-01.ibm.com/software/webservers/appserv/developer/](http://www-01.ibm.com/software/webservers/appserv/developer/)

如果您的产品是 WAS，那么我建议您使用它

***将您的应用程序完全保真地部署到 WAS 生产环境，使开发到生产的迁移不再是问题***

您如何在应用程序中使用 LTPA 令牌？这通常应该在引擎盖下，您不一定需要在您的应用程序中使用它。我很想听听您在应用程序中如何使用 LTPA 令牌！

高温高压

芒鲁

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T17:45:12.217

我想知道你是在寻找开放的东西还是更小的东西。如果您已经在使用 WebSphere，但正在寻找仍然支持 LTPA 令牌的更小/更轻的东西，那么您可能想查看 WebSphere Application Server 8.5 中的新 Liberty 配置文件（刚刚发布）。[您可以从http://wasdev.net](http://wasdev.net)获得要玩的低版本和下载版本

（免责声明：我工作过，我有偏见）

# java - 未找到添加到 .jar 的属性

> ID：10336486
> 
> 赞同：0
> 
> 时间：2012-04-26T15:23:50.783
> 
> 标签：java, jar

我有一个简单的桌面应用程序。该应用程序有一个名为 MyApp.jar 的其他应用程序的 .jar，并且在此 jar 中有一个带有一个键的属性文件（infor.properties）。应用程序必须生成一个自己的 MyApp.jar，其中属性文件的键是 inputText 中的字符串，所以我必须更改 que 属性文件。我的问题是当我生成新的 .jar 时，这个 jar 找不到属性文件。我用它来获取 infor.properties 的内容：

```
InputStream in = this.getClass().getClassLoader().getResourceAsStream("infor.properties");
Properties prop = new Properties();
prop.load(in);
in.close(); 
```

我使用 ZipFile 和 ZipOutputStream 将每个文件复制到新的 .jar 中，并添加一个新的。新的.jar 文件的新结构是正确的，但是当我运行新的jar 时，找不到文件infor.properties。有谁知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:19:45.540

这取决于您的文件在 jar 中的位置以及您如何指定类路径。不幸的是，您没有向我们提供有关您的结构等方面的太多信息。所以我创建了这个示例，希望您可以将其应用于您的项目：

假设您`Test`在包中有类`testapp`（类的全名在前面`testapp.Test`）：

```
package testapp;

import java.io.FileInputStream;
import java.io.IOException;
import java.util.Properties;
import java.util.logging.Level;
import java.util.logging.Logger;

public class Test {

    private static final Logger logger = Logger.getLogger(Test.class.getName());

    public static void main(String[] args) {

            Properties properties = new Properties();
            try {
                properties.load(new FileInputStream("testapp/infor.properties"));
                System.out.println("" + properties.getProperty("a"));
            } catch (IOException e) {
                logger.log(Level.SEVERE, "", e);
            }

    }

} 
```

您在某个目录 PROJECT_ROOT 中。现在在这个目录中你有上面编译的类（在目录 testapp，因为你的类的全名是`testapp.Test`）。您的结构如下所示：

```
PROJECT_ROOT
  testapp
    Test.class
    infor.properties 
```

请注意，该类已经编译（您可能知道该怎么做？）。当您的工作目录是 PROJECT_ROOT 时，您可以运行：

```
 jar -vcf myjar.jar * 
```

这将创建一个名为`myjar.jar`. 现在您可以使用以下命令运行 jar 文件

```
java -cp myjar.jar testapp.Test 
```

它只是说（使用`-cp myjar.jar`）类路径是 myjar.jar （对于 JVM 是类似 jar 的目录）。

正如您在 Test.java 中看到的那样，您拥有`"testapp/infor.properties"`. 必须针对使用的类路径指定属性文件的路径。类路径是 myjar.jar 内容的根目录。因此 testapp/infor.properties。

# mysql - MySql 和变量排除结果集

> ID：10336490
> 
> 赞同：0
> 
> 时间：2012-04-26T15:23:59.907
> 
> 标签：mysql, variables

我对变量在 mysql 中的工作方式有疑问。正如我在他们的网站上看到的那样，设置一个变量将对下一行可见。

我的桌子是这样的：

```
A     B     C      N
1    NULL   NULL   4
1    NULL   NULL   4 
1     1     NULL   4 
1     1     NULL   4
1     1     1      4
1     1     1      4 
```

我想要的是只返回带有`C = 1`. 如果没有行，则返回`B = 1 and C is NULL`如果没有行`A = 1 and B is NULL and C is NULL`。

我的想法是：

```
select N as number,
       @var_c := case when (C = 1) then 1 else -1 end as myc,
       @var_b := case when (@var_c < 0 and B = 1) then 1 else -1 end as myB,
       @var_c := case when (@var_a < 0 and var_b < 0 and C = 1) then 1 else -1 end as myC

from (select @var_a := -1) r_a,
     (select @var_b := -1) r_b,
     (select @var_c := -1) r_c,
     (select A, B, C, N from my_table order by A desc, B desc, C desc) rows 
```

它应该（我想）返回

```
number     myA    myB    myC
  4         -1      -1    1
  4         -1      -1    1
  4         -1      -1    -1
  4         -1      -1    -1
  4         -1      -1    -1
  4         -1      -1    -1 
```

有了这个，`having myA > 0 or myB > 0 or myC > 0`就可以了。

但它正在回归

```
number    myA     myB    myC
  4         1      -1    -1
  4         1      -1    -1
  4         -1      -1    1
  4         -1      -1    1
  4         -1      1    -1
  4         -1      1    -1 
```

Mysql 不应该跨行保留变量吗？

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:36:58.927

首先，不要使用这样的变量。您不应该期望您可以在`FROM`子句中设置变量然后访问`SELECT`子句中的值。这不是变量的工作方式。通常你应该只在查询的一个地方使用一个变量，否则你会得到不确定的结果。

其次，你为什么不发出三个不同的查询呢？首先 for `A = 1 and B is NULL and C is NULL`，如果它不返回任何行，则发出带有第二个条件集的查询。等等。

如果你最终只想发出一个查询，你可以试试这个：

```
SELECT N as number
FROM my_table
WHERE IF(EXISTS (SELECT A FROM my_table WHERE A = 1 and B is NULL and C is NULL),
    A = 1 and B is NULL and C is NULL,
    IF(EXISTS (SELECT A FROM my_table WHERE B = 1 and C is NULL), B = 1 and C is NULL, C = 1)) 
```

但这很可能会影响性能。所以最好只使用三个查询而不是一个。

**UPD：**还有另一种（但类似的）方法：

```
SELECT N as number
FROM my_table
WHERE (
  A = 1
  AND B is NULL
  AND C is NULL
) OR (
  B = 1
  AND C is NULL
  AND NOT EXISTS (SELECT A FROM my_table WHERE A = 1 and B is NULL and C is NULL)
) OR (
  C = 1
  AND NOT EXISTS (SELECT A FROM my_table WHERE A = 1 and B is NULL and C is NULL)
  AND NOT EXISTS (SELECT A FROM my_table WHERE B = 1 and C is NULL)
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T21:44:19.367

从另一个示例及其评论中，我会以这种方式处理您的查询。如果有任何“C = 1”值并存储到 CCnt 字段中，则第一个查询进行资格预审。如果未找到，则强制 CCnt 值为 NULL。第二，对“B”列做同样的事情。由于这些中的每一个的限制为 1，只要它可以分别找到 C=1 或 B=1 的条目，它应该很快。如果不是，它们的值为 NULL。为什么要这样做？每次运行查询都会完成一次查询并完成答案。它不必重复执行查询，因为当用作子查询时可能会降低性能。执行不带 group by 的 count() 将 GUARANTEE 作为单行，因此您不会有任何可能导致重复的笛卡尔结果。

现在这个抢先查询已经完成，现在添加你的主表。此时，“HasCEntry.CCnt”值将是 1 或 NULL。“HasBEntry.CCnt”值将是 1 或 NULL。

```
select 
      YT.*
   from
      ( select IF( count(*) > 0, 1, NULL ) as CCnt
           from YourTable
           where C = 1
           limit 1 ) HasCEntry,
      ( select IF( count(*) > 0, 1, NULL ) as BCnt
           from YourTable
           where B = 1
           limit 1 ) HasBEntry,
      YourTable YT
   where
            YT.C = 1
      OR  ( YT.B = 1 AND HasCEntry.CCnt IS NULL )
      OR  ( YT.A = 1 AND HasBEntry.BCnt IS NULL AND HasCEntry.CCnt IS NULL ) 
```

现在，遵循 WHERE 子句。如果甚至有 1 条 C=1 的记录，那么 YT.C = 1 就是您所需要的并且它已经完成了......以及您不关心的其他“OR”条件，记录就会出现。

现在，假设没有 C = 1 的条目。我们知道“CCnt”值为 NULL，因此将进入第一个“OR”条件并针对“B”进行测试...... B 具体 = 1 并且 CCnt 是NULL... 因此，如果有一个“C=2”条目（3、4 或任何其他值），我们不想要它。我们只想要 B = 1 AND C = NULL ...

如果 C 和 B 失败，那么我们就落入“A”测试。同样，A = 1 AND B 为空且 C 为 NULL，原因与上述 B 相同。

对于一张小桌子，您可能不会注意到与 Shedal 的答案有任何显着的性能差异。但是，随着您的桌子的增长，它可能会成为一个巨大的打击。

# performance - sqlite.fetchall() 这么慢是正常的吗？

> ID：10336492
> 
> 赞同：2
> 
> 时间：2012-04-26T15:24:09.577
> 
> 标签：performance, sqlite, fetchall

我有一个从两个内部连接表中选择的 sql 查询。select 语句的执行大约需要 50 秒。但是， fetchall() 需要 788 秒，并且只获取 981 个结果。这是查询和 fetchall 代码：

```
time0 = time.time()
self.cursor.execute("SELECT spectrum_id, feature_table_id "+
                    "FROM spectrum AS s "+
                    "INNER JOIN feature AS f "+
                    "ON f.msrun_msrun_id = s.msrun_msrun_id "+
                    "INNER JOIN (SELECT feature_feature_table_id, min(rt) AS rtMin, max(rt) AS rtMax, min(mz) AS mzMin, max(mz) as mzMax "+
                                 "FROM convexhull GROUP BY feature_feature_table_id) AS t "+
                    "ON t.feature_feature_table_id = f.feature_table_id "+
                    "WHERE s.msrun_msrun_id = ? "+
                    "AND s.scan_start_time >= t.rtMin "+
                    "AND s.scan_start_time <= t.rtMax "+
                    "AND base_peak_mz >= t.mzMin "+
                    "AND base_peak_mz <= t.mzMax", spectrumFeature_InputValues)
print 'query took:',time.time()-time0,'seconds'

time0 = time.time()
spectrumAndFeature_ids = self.cursor.fetchall()      
print time.time()-time0,'seconds since to fetchall' 
```

fetchall 需要这么长时间有什么原因吗？

* * *

## 更新

正在做：

```
while 1:
    info = self.cursor.fetchone()
    if info:
        <do something>
    else:
        break 
```

速度和速度一样慢

```
allInfo = self.cursor.fetchall()         
for info in allInfo:
    <do something> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T20:50:53.780

由于对象的 设置为 1 ，默认情况下`fetchall()`与循环一样慢。`fetchone()``arraysize``Cursor`

为了加快速度，您可以循环`fetchmany()`，但要查看性能提升，您需要为其提供大于 1 的大小参数，否则它将按批次获取“许多” `arraysize`，即 1。

您很可能只需通过提高 的值即可获得性能提升`arraysize`，但我没有这样做的经验，因此您可能想先通过以下方式进行试验：

```
>>> import sqlite3
>>> conn = sqlite3.connect(":memory:")
>>> cu = conn.cursor()
>>> cu.arraysize
1
>>> cu.arraysize = 10
>>> cu.arraysize
10 
```

更多关于上述内容：http: [//docs.python.org/library/sqlite3.html#sqlite3.Cursor.fetchmany](http://docs.python.org/library/sqlite3.html#sqlite3.Cursor.fetchmany)

# wpf - 数据绑定到全局 ObservableCollection

> ID：10336493
> 
> 赞同：2
> 
> 时间：2012-04-26T15:24:16.940
> 
> 标签：wpf, data-binding, mvvm, observablecollection

我有一个使用 MVVM 模式的 WPF 应用程序，其中有许多 ObservableCollections。我没有将这些 ObservableCollections 放入每个 ViewModel 中，而是将它们放入一个名为 Observables 的静态类中，它是静态类 AppCommon 的成员。所以我可以通过 AppCommon.Observables.AnyObservableINeed 访问所有的 observable 集合。

现在我需要更改 UserControl 的绑定，以便它们绑定到这些全局 ObservableCollection，但我不知道如何在不更改 DataContext 的情况下引用这些 ObservableCollection。

我尝试添加命名空间

```
xmlns:globals="clr-namespace:Demirbaş.Globals" 
```

然后在 ListBox 中设置 ItemsSource 属性，如

```
<ListBox ItemsSource="{Binding Source={globals:Observables.TaşınırSınıfları}}" 
```

但这会给我以下错误：

```
'{globals:Observables.TaşınırSınıfları}' value is not a valid MarkupExtension expression. Cannot resolve 'Observables.TaşınırSınıfları' in namespace 'clr-namespace:Demirbaş.Globals'. 'Observables.TaşınırSınıfları' must be a subclass of MarkupExtension. 
```

这里有什么问题？我是否使用正确的 XAML 语法绑定到这些集合？

**编辑** `ItemsSource="{Binding Source={x:Static globals:AppCommon.Observables.TaşınırSınıfları}}"`给我错误：

```
Cannot find the type 'AppCommon.Observables'. Note that type names are case sensitive. 
```

我认为它不能引用嵌套类，对吗？解决方案是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T16:02:46.127

您需要使用注释中建议的 LPL 之类的[x:Static](http://msdn.microsoft.com/en-us/library/ms742135.aspx)标记扩展来告诉 WPF 它是一个静态对象

```
<ListBox ItemsSource="{Binding 
    Source={x:Static globals:Observables.TaşınırSınıfları}}" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T08:06:49.060

我不知道您的应用程序的名称空间，但请尝试

```
xmlns:local="clr-namespace:Demirbaş"

<ListBox ItemsSource="{Binding 
    Source={x:Static local:AppCommon+Observables.TaşınırSınıfları}}" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-28T03:46:57.690

当命名空间引用不是完全限定的并且目标绑定存在于另一个程序集中时，也会发生此错误。

例如，`xmlns:l="clr-namespace:AssemblyA.Namespace;assembly=AssemblyA".`

如果未指定特定程序集，则会显示相同的错误消息“value is not a valid MarkupExtension expression”。

# python - python lxml在dev_appserver（gae，windows）中不可用

> ID：10336500
> 
> 赞同：3
> 
> 时间：2012-04-26T15:24:39.933
> 
> 标签：python, windows, google-app-engine, lxml

我已经安装了lxml。

它在 IDLE 中运行良好。

但是，当我使用 dev_appserver.py 启动下面描述的基本应用程序时，服务器返回错误“没有名为 lxml 的模块”。

```
import webapp2,lxml

class MainPage(webapp2.RequestHandler):
    def get(self):
        self.response.out.write("test")
app = webapp2.WSGIApplication([("/(.*)", MainPage)],debug=True) 
```

我该如何解决这个问题？

谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T15:46:58.973

假设您使用的是 Python 2.7 运行时。此运行时提供了一种配置库的好方法。

请在您的 app.yaml 中添加库部分，如下所示：

```
libraries:
- name: lxml
  version: latest 
```

有关更多详细信息，请参阅： [https ://developers.google.com/appengine/docs/python/python27/using27#Configuring_Libraries](https://developers.google.com/appengine/docs/python/python27/using27#Configuring_Libraries)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:27:58.010

您使用的任何 python 库都需要位于您的 app 文件夹中 - 否则，部署时它将无法工作，因为只有您的 app 文件夹部署到 App Engine。您需要将 lxml 的副本放在您的应用程序文件夹中。

其次，我认为 lxml 不会奏效，因为它运行在 C 库之上，并且只有纯 python 项目才能在 App Engine 上运行。

# xcode - Xcode 链接器错误，在 /usr/lib 中找不到 lib

> ID：10336503
> 
> 赞同：1
> 
> 时间：2012-04-26T15:24:43.723
> 
> 标签：xcode, xcconfig

我在 XCode 3.2 中遇到链接器错误，它声称无法在 /usr/lib 中找到库，即使 LIBRARY_SEARCH_PATHS = "/usr/lib" 并且 dylib 已添加到 xcode 项目中。项目的后期复制构建阶段设法找到这个文件没有任何问题，但不能。

我试图取消 xcconfig 设置的项目设置窗口，所以可能在那里做错了什么。关于我缺少什么的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T15:28:02.367

请注意，诸如路径之类的路径`/usr/lib`以您的 SDK 设置为前缀，因此您认为`/usr/lib`实际上可能是 eg `/Developer/SDKs/MacOSX10.6.sdk/usr/lib`（如果您的 SDK 设置为 10.6）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T17:38:19.073

If you want to link to something in /usr/lib and not in /Developer/SDKs/bla/usr/lib you'll need to use full path to the library when linking. Add it to "Other Linker Flags": /usr/lib/somelib.dylib (note that there is no -l in front of the path)

# android - 谷歌地图上的行车路线

> ID：10336505
> 
> 赞同：0
> 
> 时间：2012-04-26T15:24:45.580
> 
> 标签：android

我正在尝试使用android在谷歌地图上绘制路径我在网上找到了这段代码，但我遇到了一些我无法修复的错误。它为点创建了类，为RoadProvider创建了类，但我对内置类点和他的点感到困惑已创建它。这是错误

```
 Description    Resource    Path    Location    Type
mDescription cannot be resolved or is not a field   RoadProvider.java   /sbn/src/sbn/project/gp line 103    Java Problem
mIconUrl cannot be resolved or is not a field   RoadProvider.java   /sbn/src/sbn/project/gp line 109    Java Problem
mLatitude cannot be resolved or is not a field  RoadProvider.java   /sbn/src/sbn/project/gp line 117    Java Problem
mLongitude cannot be resolved or is not a field RoadProvider.java   /sbn/src/sbn/project/gp line 118    Java Problem
mName cannot be resolved or is not a field  RoadProvider.java   /sbn/src/sbn/project/gp line 90 Java Problem
The method addPoint(Point[]) in the type KMLHandler is not applicable for the arguments (Point[])   RoadProvider.java   /sbn/src/sbn/project/gp line 68 Java Problem
The method addPoint(Point[]) in the type KMLHandler is not applicable for the arguments (Point[])   RoadProvider.java   /sbn/src/sbn/project/gp line 69 Java Problem 
```

安娜这里是代码

```
package sbn.project.gp;

public class Point {

    String mName;
    String mDescription;
    String mIconUrl;
    double mLatitude;
    double mLongitude;
} 
```

这是 RoadProvider 类

```
public class RoadProvider {

        public static Road getRoute(InputStream is) {
            KMLHandler handler = new KMLHandler();
            try {
                    SAXParser parser = SAXParserFactory.newInstance().newSAXParser();
                    parser.parse(is, handler);
            } catch (ParserConfigurationException e) {
                    e.printStackTrace();
            } catch (SAXException e) {
                    e.printStackTrace();
            } catch (IOException e) {
                    e.printStackTrace();
            }
            return handler.mRoad;
    }

    public static String getUrl(double fromLat, double fromLon, double toLat,
                    double toLon) {// connect to map web service
            StringBuffer urlString = new StringBuffer();
            urlString.append("http://maps.google.com/maps?f=d&hl=en");
            urlString.append("&saddr=");// from
            urlString.append(Double.toString(fromLat));
            urlString.append(",");
            urlString.append(Double.toString(fromLon));
            urlString.append("&daddr=");// to
            urlString.append(Double.toString(toLat));
            urlString.append(",");
            urlString.append(Double.toString(toLon));
            urlString.append("&ie=UTF8&0&om=0&output=kml");
            return urlString.toString();
    }
    }

    class KMLHandler extends DefaultHandler {
    Road mRoad;
    boolean isPlacemark;
    boolean isRoute;
    boolean isItemIcon;
    private Stack mCurrentElement = new Stack();
    private String mString;

    public KMLHandler() {
            mRoad = new Road();
    }

    public void startElement(String uri, String localName, String name,
                    Attributes attributes) throws SAXException {
            mCurrentElement.push(localName);
            if (localName.equalsIgnoreCase("Placemark")) {
                    isPlacemark = true;

                    mRoad.mPoints=addPoint(mRoad.mPoints);//there is an error here
                    mRoad.mPoints = addPoint(mRoad.mPoints);//there is an error here
            } else if (localName.equalsIgnoreCase("ItemIcon")) {
                    if (isPlacemark)
                            isItemIcon = true;
            }
            mString = new String();
    }

    public void characters(char[] ch, int start, int length)
                    throws SAXException {
            String chars = new String(ch, start, length).trim();
            mString = mString.concat(chars);
    }

    public void endElement(String uri, String localName, String name)
                    throws SAXException {
            if (mString.length() > 0) {
                    if (localName.equalsIgnoreCase("name")) {
                            if (isPlacemark) {
                                    isRoute = mString.equalsIgnoreCase("Route");
                                    if (!isRoute) {
                                            mRoad.mPoints[mRoad.mPoints.length - 1].mName = mString; //there is an error here  
                                    }
                            } else {
                                    mRoad.mName = mString;
                            }
                    } else if (localName.equalsIgnoreCase("color") && !isPlacemark) {
                            mRoad.mColor = Integer.parseInt(mString, 16);
                    } else if (localName.equalsIgnoreCase("width") && !isPlacemark) {
                            mRoad.mWidth = Integer.parseInt(mString);
                    } else if (localName.equalsIgnoreCase("description")) {
                            if (isPlacemark) {
                                    String description = cleanup(mString);
                                    if (!isRoute)
                                            mRoad.mPoints[mRoad.mPoints.length - 1].mDescription = description;//there is an error here 
                                    else
                                            mRoad.mDescription = description;//there is an error here 
                            }
                    } else if (localName.equalsIgnoreCase("href")) {
                            if (isItemIcon) {
                                    mRoad.mPoints[mRoad.mPoints.length - 1].mIconUrl = mString;
                            }
                    } else if (localName.equalsIgnoreCase("coordinates")) {
                            if (isPlacemark) {
                                    if (!isRoute) {
                                            String[] xyParsed = split(mString, ",");
                                            double lon = Double.parseDouble(xyParsed[0]);
                                            double lat = Double.parseDouble(xyParsed[1]);
                                            mRoad.mPoints[mRoad.mPoints.length - 1].mLatitude = lat;
                                            mRoad.mPoints[mRoad.mPoints.length - 1].mLongitude = lon;
                                    } else {
                                            String[] coodrinatesParsed = split(mString, " ");
                                            int lenNew = coodrinatesParsed.length;
                                            int lenOld = mRoad.mRoute.length;
                                            double[][] temp = new double[lenOld + lenNew][2];
                                            for (int i = 0; i < lenOld; i++) {
                                                    temp[i] = mRoad.mRoute[i];
                                            }
                                            for (int i = 0; i < lenNew; i++) {
                                                    String[] xyParsed = split(coodrinatesParsed[i], ",");
                                                    for (int j = 0; j < 2 && j < xyParsed.length; j++)
                                                            temp[lenOld + i][j] = Double
                                                                            .parseDouble(xyParsed[j]);
                                            }
                                            mRoad.mRoute = temp;
                                    }
                            }
                    }
            }
            mCurrentElement.pop();
            if (localName.equalsIgnoreCase("Placemark")) {
                    isPlacemark = false;
                    if (isRoute)
                            isRoute = false;
            } else if (localName.equalsIgnoreCase("ItemIcon")) {
                    if (isItemIcon)
                            isItemIcon = false;
            }

        return value;
    }

    public Point[] addPoint(Point[] Points) {
            Point[] result = new Point[Points.length + 1];
            for (int i = 0; i < Points.length; i++)
            {  result[i] = Points[i];}
            result[Points.length] = new Point();
            return result;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T16:59:15.710

请参阅此[链接](http://asmncl.blogspot.in/2012/04/android-draw-route-map-between-two.html)以在您的应用程序中绘制行驶路径。您只需在项目中添加链接中存在的四个类，并在需要显示路线时调用以下行。

```
SharedData data = SharedData.getInstance();
data.setAPIKEY("0RUTLH7cqd6yrZ0FdS0NfQMO3lioiCbnH-BpNQQ");//set your map key here
data.setSrc_lat(17);//set your src lat
data.setSrc_lng(78);//set your src lng
data.setDest_lat(18);//set your dest lat
data.setDest_lng(77);//set your dest lng
startActivity(new Intent(YourActivity.this,RoutePath.class));//add RoutePath in your manifeast file 
```

//同时将权限添加到您的清单文件

# java - 在 CloudSim 中执行执行顺序

> ID：10336507
> 
> 赞同：1
> 
> 时间：2012-04-26T15:24:57.547
> 
> 标签：java

在 cloudSim 中，我如何强制 cloudlet_2 应该在 cloudlet_1 之后启动（说到他们的执行时间）？

我尝试这样做：

```
cloudlet_2.setExecStartTime(cloudlet_1.getFinishTime()); 
```

但这在运行时没有影响，两个小云都从 0.0 秒开始。

是否有任何机制强制 cloudlet_2 在 cloudlet_1 完成执行之前不开始执行（甚至不提交到数据中心）？

这可以通过设置开始时间或通过在 cloudlet_2 上施加一些布尔条件或其他技巧来实现...... ???

上述要求来自这样一个事实，即我需要一些 Cloudlet 的管道计算模式，这些模式应该一个接一个地执行（而不是一次执行）。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-08T09:58:29.230

何时执行哪个 cloudlet 完全取决于您的调度策略。这里你需要的是类似 FCFS 策略的东西。实际上 Cloudsim 的默认调度策略是 FCFS。

但是根据您的要求“cloudlet_2 应该在 cloudlet_1 之后启动”，您需要更改 vm/cloudlet 调度策略。我认为您需要的是用于 vm/cloudlet 调度程序的 SpaceSharedPolicy。但不确定。

应用不同的调度策略有4种情况，可以参考[图4。](http://www.buyya.com/papers/CloudSim2010.pdf)

关于如何在代码中更改这些调度程序，您可以参考Cloudsim 包中已有的[示例。](https://github.com/Cloudslab/cloudsim/blob/master/modules/cloudsim-examples/src/main/java/org/cloudbus/cloudsim/examples/CloudSimExample1.java)

例如，如果要更改 VM 调度程序，您可以在上面示例的第 188 行 更改参数*[VmSchedulerTimeShared 或 VmSchedulerSpaceShared]* ，而要更改 cloudlet 调度程序，您可以在第 104 行更改参数*[CloudletSchedulerTimeShared() 或 CloudletSchedulerSpaceShared()]*上面的例子。

# java - 如何在 Play 框架中控制 XML 元素名称

> ID：10336512
> 
> 赞同：1
> 
> 时间：2012-04-26T15:25:11.693
> 
> 标签：java, xml, playframework

我有一个 java bean 类，我使用`renderXml`方法渲染它。如何控制 XML 中类或字段的名称。像这样的东西

```
@XStreamAlias(value="MyInfo")
public class Info  {
} 
```

我想呈现 MyInfo 而不是 Info 作为父元素。正如我所看到的，Play 使用 XStream 来呈现 xml，但我不知道如何更改元素名称。我知道，可以使用视图文件夹中的预定义模板进行渲染，我想避免它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T16:21:38.657

```
 XStream xstream = new XStream();
    xstream.alias("Info", Info.class);
    renderXml(callInfo, xstream); 
```

可以传递具有特殊属性的 XStream 实例。一切正常

# jakarta-ee - JBoss：如何配置打包在 EARS 中的应用程序？

> ID：10336516
> 
> 赞同：1
> 
> 时间：2012-04-26T15:25:21.870
> 
> 标签：jakarta-ee, jboss, java-ee-6, jboss7.x, ear

我们目前正在开发一个分布式 JavaEE 应用程序。几个 JBoss 实例将分布在多个节点上，它们必须相互通信。

由于在开发期间不了解实际部署，我们需要一种策略来配置节点，而无需解压 EAR、更改内容并重新打包它们。

目前我们通过standalone.xml 提供一个系统属性，它指向配置目录，应用程序会查看它来读取配置。这不是很花哨。

是否也有一种优雅的方式将配置放入 JBoss 配置目录，以便从标准功能中读取它？是否有另一种标准方法可以在没有额外系统属性的情况下做到这一点？

我们目前使用 JBoss 7.1.0.Final 和 Java 1.6

**更新** 我现在还发现一个问题 qhich 非常相似，但不完全是我想要的。也许它可以帮助其他人：[如何在 EAR 或 WAR 之外存储 Java EE 配置参数？](https://stackoverflow.com/questions/965061/how-can-i-store-java-ee-configuration-parameters-outside-of-an-ear-or-war)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T06:05:44.077

请通过以下链接了解托管域，您可以在其中使用域控制器概念无缝地管理多个 JBoss 实例。

[https://docs.jboss.org/author/display/AS7/Core+management+concepts](https://docs.jboss.org/author/display/AS7/Core+management+concepts)

# jquery - 页面中的Jquery多个幻灯片复选框

> ID：10336520
> 
> 赞同：1
> 
> 时间：2012-04-26T15:25:28.893
> 
> 标签：jquery, html, css, checkbox, slide

我正在使用此页面[http://jsfiddle.net/gnQUe/170/中的代码](http://jsfiddle.net/gnQUe/170/)

[jquery 滑动切换作为表单复选框](https://stackoverflow.com/questions/9260336/jquery-slide-toggle-as-a-form-checkbox)

如果我使用相同的脚本和 css，如何在单个页面中使用多个此类开关

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T15:29:53.753

首先，将隐藏的输入与`div`控件放在相同的位置，并给它 a`class`而不是 a `id`：

```
<div class="slider-frame">
    <span class="slider-button">NO</span>
    <input type="hidden" class="slider-value" value="false">
</div> 
```

然后使用这个 jQuery 来改变它的值：

```
$('.slider-button').toggle(function() {
    $(this).addClass('on').html('YES');
    $(this).next(".slider-value").val(true);
}, function() {
    $(this).removeClass('on').html('NO');
    $(this).next(".slider-value").val(false);
}); 
```

[**示例小提琴**](http://jsfiddle.net/gnQUe/287/)

你会在小提琴中看到我留下了输入，`text`这样你就可以看到值的变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:29:30.057

您可以多次使用同一个 div 和 'slider-frame' 类

请在此处查看[JSFiddle](http://jsfiddle.net/ranganadh/s2TWJ/1/)

# c# - 查询本地IP地址

> ID：10336521
> 
> 赞同：31
> 
> 时间：2012-04-26T15:25:35.393
> 
> 标签：c#, windows-runtime

我需要从**Windows 8 WinRT/Metro**应用程序中知道我的实际本地 IP 地址（即不是环回地址）。我需要这个有几个原因。最简单的是，在应用程序的 UI 中，我想显示一些文本，例如“您的本地网络 IP 地址是：[从代码查询的 IP]”。

我们还将地址用于一些额外的网络通信。这些通讯是完全有效的，因为如果我查看控制面板中的 IP 地址，然后将其硬编码到应用程序中，它们都可以正常工作。在对话框中要求用户查看地址并手动输入它是我非常非常想避免的事情。

我认为以编程方式获取地址并不是一项复杂的任务，但我的搜索引擎和 StackOverflow 技能却是空的。

在这一点上，我开始考虑做一个 UDP 广播/监听循环来听取我自己的请求并从中提取地址，但这看起来真的是一个 hackey kludge。在新的 WinRT 东西中是否有 API 可以让我到达那里？

请注意，我说的是“WinRT 应用程序。这意味着典型的机制喜欢`Dns.GetHostEntry`或`NetworkInterface.GetAllInterfaces()`不会工作。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-04T22:12:25.233

经过大量挖掘，我使用[NetworkInformation](http://msdn.microsoft.com/en-us/library/windows/apps/windows.networking.connectivity.networkinformation.aspx)和[HostName](http://msdn.microsoft.com/en-us/library/windows/apps/windows.networking.hostname.aspx)找到了您需要的信息。

[NetworkInformation.GetInternetConnectionProfile](http://msdn.microsoft.com/en-us/library/windows/apps/windows.networking.connectivity.networkinformation.getinternetconnectionprofile.aspx)检索与本地计算机当前使用的 Internet 连接关联的连接配置文件。

[NetworkInformation.GetHostNames](http://msdn.microsoft.com/en-us/library/windows/apps/windows.networking.connectivity.networkinformation.gethostnames.aspx)检索主机名列表。这并不明显，但这包括作为字符串的 IPv4 和 IPv6 地址。

使用此信息，我们可以获得连接到 Internet 的网络适配器的 IP 地址，如下所示：

```
public string CurrentIPAddress()
{
    var icp = NetworkInformation.GetInternetConnectionProfile();

    if (icp != null && icp.NetworkAdapter != null)
    {
        var hostname =
            NetworkInformation.GetHostNames()
                .SingleOrDefault(
                    hn =>
                    hn.IPInformation != null && hn.IPInformation.NetworkAdapter != null
                    && hn.IPInformation.NetworkAdapter.NetworkAdapterId
                    == icp.NetworkAdapter.NetworkAdapterId);

        if (hostname != null)
        {
            // the ip address
            return hostname.CanonicalName;
        }
    }

    return string.Empty;
} 
```

请注意，[HostName](http://msdn.microsoft.com/en-us/library/windows/apps/windows.networking.hostname.aspx)具有属性 CanonicalName、DisplayName 和 RawName，但它们似乎都返回相同的字符串。

我们还可以使用类似下面的代码获取多个适配器的地址：

```
private IEnumerable<string> GetCurrentIpAddresses()
{
    var profiles = NetworkInformation.GetConnectionProfiles().ToList();

    // the Internet connection profile doesn't seem to be in the above list
    profiles.Add(NetworkInformation.GetInternetConnectionProfile());

    IEnumerable<HostName> hostnames =
        NetworkInformation.GetHostNames().Where(h => 
            h.IPInformation != null &&
            h.IPInformation.NetworkAdapter != null).ToList();

    return (from h in hostnames
            from p in profiles
            where h.IPInformation.NetworkAdapter.NetworkAdapterId ==
                  p.NetworkAdapter.NetworkAdapterId
            select string.Format("{0}, {1}", p.ProfileName, h.CanonicalName)).ToList();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-08T21:28:04.190

关于接受的答案，你只需要这个：

```
HostName localHostName = NetworkInformation.GetHostNames().FirstOrDefault(h =>
                    h.IPInformation != null &&
                    h.IPInformation.NetworkAdapter != null); 
```

您可以通过以下方式获取本地 IP 地址：

```
string ipAddress = localHostName.RawName; //XXX.XXX.XXX.XXX 
```

使用的命名空间：

```
using System.Linq;
using Windows.Networking;
using Windows.Networking.Connectivity; 
```

# ruby-on-rails - 在 Rails 中未使用 Carrierwave 加载默认 URL

> ID：10336524
> 
> 赞同：3
> 
> 时间：2012-04-26T15:25:42.633
> 
> 标签：ruby-on-rails, imagemagick, carrierwave

在我的载波上传器中设置默认图像时遇到问题。它似乎在 URL 的前面附加了一个奇怪的类，但没有呈现图像。请参阅下面的代码。

**帮手**

```
 # encoding: utf-8

class UserpicUploader < CarrierWave::Uploader::Base

  CarrierWave::SanitizedFile.sanitize_regexp = /[^[:word:]\.\-\+]/
  # Include RMagick or MiniMagick support:
  include CarrierWave::RMagick
  # include CarrierWave::MiniMagick
  # Include the Sprokets helpers for Rails 3.1+ asset pipeline compatibility:
  # include Sprockets::Helpers::RailsHelper
  # include Sprockets::Helpers::IsolatedHelper

  # Choose what kind of storage to use for this uploader:
  storage :file
  # storage :fog

  # Override the directory where uploaded files will be stored.
  # This is a sensible default for uploaders that are meant to be mounted:
  def store_dir
    "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  end

  # Process files as they are uploaded:

  version :normal do
   process :resize_to_fill => [162, 163]
  end
  # Provide a default URL as a default if there hasn't been a file uploaded:

     def default_url
     # For Rails 3.1+ asset pipeline compatibility:
       # asset_path("fallback/" + [normal, "profile_default_pic.png"].compact.join('_'))
       "/images/fallback/" + [normal, "profile_default_pic.png"].compact.join('_')
     end

  #
  # def scale(width, height)
  #   # do something
  # end

  # Create different versions of your uploaded files:
  # version :thumb do
  #   process :scale => [50, 50]
  # end

  # Add a white list of extensions which are allowed to be uploaded.
  # For images you might use something like this:
  def extension_white_list
     %w(jpg jpeg gif png)
  end

  # Override the filename of the uploaded files:
  # Avoid using model.id or version_name here, see uploader/store.rb for details.
    def filename 
      if original_filename 
        @name ||= Digest::MD5.hexdigest(File.dirname(current_path))
        "#{@name}.#{file.extension}"
      end
    end

end 
```

**编辑...**

这是有效的编辑代码。我不得不将图像放在 public/fallback 而不是 Assets/images/fallback 中。

```
# encoding: utf-8

class UserpicUploader < CarrierWave::Uploader::Base

  CarrierWave::SanitizedFile.sanitize_regexp = /[^[:word:]\.\-\+]/
  # Include RMagick or MiniMagick support:
  include CarrierWave::RMagick
  # include CarrierWave::MiniMagick
  # Include the Sprokets helpers for Rails 3.1+ asset pipeline compatibility:
  include Sprockets::Helpers::RailsHelper
  include Sprockets::Helpers::IsolatedHelper

  # Choose what kind of storage to use for this uploader:
  storage :file
  # storage :fog

  # Override the directory where uploaded files will be stored.
  # This is a sensible default for uploaders that are meant to be mounted:
  def store_dir
    "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  end

  # Process files as they are uploaded:

  version :normal do
   process :resize_to_fill => [162, 163]
  end
  # Provide a default URL as a default if there hasn't been a file uploaded:

     def default_url
     # For Rails 3.1+ asset pipeline compatibility:
         asset_path("fallback/" + [normal, "profile_default_pic.png"].compact.join('_'))
       # "/fallback/" + [normal, "profile_default_pic.png"].compact.join('_')
     end

  #
  # def scale(width, height)
  #   # do something
  # end

  # Create different versions of your uploaded files:
  # version :thumb do
  #   process :scale => [50, 50]
  # end

  # Add a white list of extensions which are allowed to be uploaded.
  # For images you might use something like this:
  def extension_white_list
     %w(jpg jpeg gif png)
  end

  # Override the filename of the uploaded files:
  # Avoid using model.id or version_name here, see uploader/store.rb for details.
    def filename 
      if original_filename 
        @name ||= Digest::MD5.hexdigest(File.dirname(current_path))
        "#{@name}.#{file.extension}"
      end
    end

end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T01:49:14.183

好的，我让它工作了，这就是我所缺少的...

*   默认文件夹必须在 public/ 文件夹中，而不是在 assets/images 中
*   我必须将以下行添加到上传器类：

    **包括 Sprockets::Helpers::RailsHelper**

    **包括 Sprockets::Helpers::IsolatedHelper**

*   我不得不将 default_url 更改为以下内容：

    **asset_path("fallback/" + [正常，"profile_default_pic.png"].compact.join('_'))**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T14:44:19.133

编辑上传器类：

```
def default_url  
 "/images/fallback/" + [version_name,"default.png"].compact.join('_')
end 
```

然后把默认图片复制进去`/images/fallback/default.png`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-21T05:42:06.607

在**Rails 4.1.***中，您只需在**default_url**方法中指定文件名

```
def default_url
  "default.png"
end 
```

在这种情况下，**default.png**应该在**/app/assets/images**文件夹中

# c# - 如何同时以多种方式散列单个文件？

> ID：10336535
> 
> 赞同：5
> 
> 时间：2012-04-26T15:26:21.477
> 
> 标签：c#, cryptography, hash

我正在尝试设计一个简单的应用程序来计算文件的 CRC32/md5/sha1/sha256/sha384/sha512，但我遇到了一些障碍。这是在 C# 中完成的。

我希望能够尽可能高效地做到这一点，所以我最初的想法是在处理之前先将文件读入内存流，但我很快发现非常大的文件会导致我很快耗尽内存。所以看来我必须改用文件流。正如我所看到的，问题是一次只能运行一个哈希函数，并且使用文件流这样做需要一段时间才能完成每个哈希。

我该如何将文件的一小部分读入内存，使用所有 6 种算法对其进行处理，然后再进入另一个块……或者散列不是那样工作的？

这是我最初尝试将文件读入内存。当我在内存流上运行散列算法之前尝试将 CD 映像读入内存时，它失败了：

```
 private void ReadToEndOfFile(string filename)
    {
        if (File.Exists(filename))
        {
            FileInfo fi = new FileInfo(filename);
            FileStream fs = new FileStream(filename, FileMode.Open, FileAccess.Read);
            byte[] buffer = new byte[16 * 1024];

            //double step = Math.Floor((double)fi.Length / (double)100);

            this.toolStripStatusLabel1.Text = "Reading File...";
            this.toolStripProgressBar1.Maximum = (int)(fs.Length / buffer.Length);
            this.toolStripProgressBar1.Value = 0;

            using (MemoryStream ms = new MemoryStream())
            {
                int read;
                while ((read = fs.Read(buffer, 0, buffer.Length)) > 0)
                {
                    ms.Write(buffer, 0, read);
                    this.toolStripProgressBar1.Value += 1;
                }

                _ms = ms;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T15:30:33.853

哈希算法的设计方式可以让您逐步计算哈希值。您可以在[此处](https://stackoverflow.com/a/2124500)找到 C#/.NET 示例。您可以轻松地修改提供的代码以在每个步骤中更新多个哈希算法实例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T15:32:47.680

您已经完成了大部分工作，您只是不需要一次将整个内容读入内存。

.Net 中的所有哈希都派生自[HashAlgorithm](http://msdn.microsoft.com/en-us/library/system.security.cryptography.hashalgorithm.transformblock.aspx)类。这有两种方法：`TransformBlock`和`TransformFinalBlock`. 因此，您应该能够为您的文件读取一个块，将其填充到您要使用的任何散列的 TransformBlock 方法中，然后进入下一个块。只要记住从文件中调用`TransformFinalBlock`你的最后一个块，因为这就是你得到包含哈希的字节数组的原因。

现在，我一次只做一个哈希，直到它工作，然后担心同时运行哈希（使用任务并行库之类的东西）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-26T16:38:08.323

这可能是让您了解 TPL 数据流对象的绝佳机会。在一个线程中读取文件并将数据发布到`BroadcastBlock<T>`. 将`BroadcastBlock<T>`链接到 6 个不同的`ActionBlock<T>`实例。每个`ActionBlock<T>`将对应于您的 6 个哈希策略之一。

```
var broadcast = new BroadcastBlock<byte[]>(x => x);

var strategy1 = new ActionBlock<byte[]>(input => DoHash(input, SHA1.Create()));
var strategy2 = new ActionBlock<byte[]>(input => DoHash(input, MD5.Create()));
// Create the other 4 strategies.

broadcast.LinkTo(strategy1);
broadcast.LinkTo(strategy2);
// Link the other 4.

using (var fs = File.Open(@"yourfile.txt", FileMode.Open, FileAccess.Read))
using (var br = new BinaryReader(fs))
{
  while (br.PeekChar() != -1)
  {
    broadcast.Post(br.ReadBytes(1024 * 16));
  }
} 
```

会将每个`BroadcastBlock<T>`数据块转发到所有链接的`ActionBlock<T>`实例。

由于您的问题更多地集中在如何让这一切同时发生，我将把实施留给`DoHash`您。

```
private void DoHash(byte[] input, HashAlgorithm algorithm)
{
  // You will need to implement this.
} 
```

# vbscript - VbScript - 使用 msmq 对象获取 MSMQ 中最旧的消息年龄

> ID：10336539
> 
> 赞同：0
> 
> 时间：2012-04-26T15:26:29.430
> 
> 标签：vbscript, msmq, message-queue

我需要在队列中获取最旧的消息年龄。在使用 wmi 的情况下有这样的属性：

```
myQueue.OldestMessageAgeSeconds 
```

但是我必须在没有 wmi 的情况下这样做。找到这样的例子：

```
Function OldestMessageAgeSeconds(queueFormatName)
       Dim queueInfo
       Set queueInfo = CreateObject("MSMQ.MSMQQueueInfo")
       queueInfo.FormatName = queueFormatName
       Dim queue
       Set queue = queueInfo.Open(32, 0) 'Peek access mode
       If Err.Number > 0 then
              OldestMessageAgeSeconds = 0
       Else
              Dim message
              Set message = queue.PeekCurrent()

              Dim oldestMessageTime
              oldestMessageTime = Now
              Do While Not message Is Nothing
                     If message.ArrivedTime < oldestMessageTime Then
                           oldestMessageTime = message.ArrivedTime
                     End If
                     Set message = queue.PeekNext(False, false, 0)
              Loop

              Dim oldestMessageAge
              oldestMessageAge = DateDiff("s", oldestMessageTime, Now)
              OldestMessageAgeSeconds = oldestMessageAge
       End If
End Function 
```

但这对我来说并不好，因为队列中有大量消息。

是否有另一种方法可以找到最旧的消息年龄？

非常感谢。

# java - 当显示文本字段的弹出菜单时，如何禁止文本字段的焦点丢失？

> ID：10336541
> 
> 赞同：0
> 
> 时间：2012-04-26T15:26:30.463
> 
> 标签：java, swing, textbox, popupmenu, jpopup

谢谢你们的回复。我将使用下面的代码（忽略导入）来显示我的问题。（简而言之，将上面的文本字段称为“field1”，将下面的文本字段称为“field2”） 在diaog中，当我在field1中输入时，单击field2，field2将在field1中显示文本。但如果我在 field1 中输入，并显示其弹出菜单以复制/粘贴，我不想将 field1 的文本显示到 field2。

```
public class MyDialog extends JDialog {
    public MyDialog() {
        final JTextField name = new JTextField(20);
        name.setEditable(true);
        final JTextField clone = new JTextField(20);
        clone.setEditable(true);
        getContentPane().setLayout(new GridLayout(2, 1));
        getContentPane().add(name);
        getContentPane().add(clone);

        name.addFocusListener(new FocusAdapter() {
            public void focusLost(FocusEvent e) {
                clone.setText(name.getText());
            }
        });
        addPopupMenu(name);
    }

    private void addPopupMenu(final JTextField name) {
        JPopupMenu menu = new JPopupMenu();
        JMenuItem copyItem = menu.add(name.getActionMap().get(DefaultEditorKit.copyAction));
        copyItem.setText("copy");
        JMenuItem pasteItem = menu.add(name.getActionMap().get(DefaultEditorKit.pasteAction));
        pasteItem.setText("paste");
        name.setComponentPopupMenu(menu);
    }

    public static void main(String args[]){
        MyDialog dlg = new MyDialog();
        dlg.setSize(500, 200);
        dlg.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-18T19:28:22.293

这会阻止弹出菜单将焦点从文本字段中移开：`menu.setFocusable(false);`

# integer - 关于整数促销

> ID：10336543
> 
> 赞同：0
> 
> 时间：2012-04-26T15:26:34.447
> 
> 标签：integer, promotions

在研究 C 转换时，我发现了一段关于 Integer Promotions 的我不太了解的段落，它说：

*`"Integer types smaller than int are promoted when an operation is performed on them. If all values of the original type can be represented as an int, the value of the smaller type is converted to an int; otherwise, it is converted to an unsigned int"`*

考虑到：

1.  任何无符号整数类型的秩等于相应有符号整数类型的秩

2.  long long int 的rank 大于long int 的rank，long int 的rank 大于int 的rank，short int 的rank 大于signed char 的rank。

问题是：为什么小于 int 的类型不应该用 int 表示？为什么 unsigned int 可以代表一个 int 不应该代表的值？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T15:32:21.007

尽管 a 的`short`等级*低于*a `int`，但它可以是相同的*大小*（以位为单位），例如`sizeof(int) == sizeof(short) == 2`在 16 位系统上。所以 an`unsigned short`可能能够保持大于 的值`INT_MAX`。

对于您问题的第二部分，其答案大致相同： an`unsigned int`可以保存不能表示为 int 的值，即`INT_MAX+1`.. `UINT_MAX`。

# coldfusion - CFC中的CFCATCH抛出错误

> ID：10336545
> 
> 赞同：3
> 
> 时间：2012-04-26T15:26:49.940
> 
> 标签：coldfusion, cfc

出于某种原因，一段代码在`*.cfm`页面上运行良好，并且在 a中运行良好`*.cfc`，现在在检测到错误时抛出错误。

错误是：

```
Element SQL is undefined in CFCATCH. 
```

被抛出的代码块如下所示：

```
<cfcatch type="database">
    <cfset errorMessage = "
        <p>#cfcatch.message#</p>
        <p>Please send the following to a developer:</p>
        <p>#cfcatch.SQL#</p> <--- ERROR HERE
        <p>#cfcatch.queryError#</p>
        <p>#cfcatch.Where#</p>">
    some other stuff
</cfcatch> 
```

有什么想法吗？

***更新***

使用@BenKoshy 的建议，我修改了我的`<cfcatch>`声明。

还记得KISS吗？保持简单愚蠢

使用他的方法然后对其进行修改，我得到的数据比我打算使用的要多，所以我选择了一个简单的版本，它像宣传的那样工作。

```
<cfif isDefined("cfcatch.message")>
  <cfset errorMessage = errorMessage & "<p>#cfcatch.message#</p>">
</cfif>
<cfif isDefined("cfcatch.SQL")>
    <cfset errorMessage = errorMessage & "<p>Please send the following to a developer:</p><p>#cfcatch.SQL#</p>">
</cfif>
<cfif isDefined("cfcatch.QueryError")>
    <cfset errorMessage = errorMessage & "<p>#cfcatch.queryError#</p>">
</cfif>
<cfif isDefined("cfcatch.Where")>
    <cfset errorMessage = errorMessage & "<p>#cfcatch.Where#</p>">
</cfif> 
```

又好又简单，而且很有效。吻

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T15:47:10.063

只是表示错误数据不包含 SQL 语句。不应假设所有错误都存在该变量：

```
<cfif isDefined("cfcatch.sql")>
     <p>#cfcatch.SQL#</p>
 </cfif> 
```

是容易修复。可能最好像这样循环遍历结构：

```
<cfparam name="errorMessage" default="">
<cfloop collection="#cfcatch#" item="this">
    <cfset errorMessage = errorMessage & "<p>#cfcatch[this]#</p>">
</cfloop> 
```

# javascript - javascript char 代码到 WIN32 虚拟键代码

> ID：10336546
> 
> 赞同：1
> 
> 时间：2012-04-26T15:26:52.833
> 
> 标签：javascript, keyboard, virtual-keyboard, fromcharcode

如何将 javascript char 代码转换为 WIN32 虚拟键代码？我的意思是“q”总是有 81 个代码，即使我会在俄语键盘上按下它。在 wpf 中我可以使用这段代码，但我需要一些类似的 javascript

```
keyCodeValue = System.Windows.Input.KeyInterop.VirtualKeyFromKey(e.Key) 
```

# c++ - 递归确定游戏板上所有字段的最小移动

> ID：10336550
> 
> 赞同：2
> 
> 时间：2012-04-26T15:27:06.953
> 
> 标签：c++, c, algorithm, recursion

我正在尝试更好地理解递归，所以我决定编写一个程序来确定 N * N 游戏板上所有字段的最短路径，使用递归（我知道 BFS 在这里会更快，这只是为了学习）：

```
void visit(int x, int y, int moves)
{
  if (x < 0 || x >= n || y < 0 || y >= n) {
    return; // out of board
  } else if (board[y][x] != -1) {
    // already visited, check if path is shorter
    if (moves < board[y][x]) board[y][x] = moves;
    return;
  } else {
    // first time visiting
    board[y][x] = moves;

    visit(x + 1, y, moves + 1); // right
    visit(x, y + 1, moves + 1); // down
    visit(x, y - 1, moves + 1); // up
    visit(x - 1, y, moves + 1); // left
  }
}
# called with visit(0, 0, 0), so it should be able to start at any field 
```

但是，对于 3x3 板，它会产生以下板：

```
0 1 2
1 2 3
6 5 4 
```

前两行是对的，但最后一行（最后一行的最后一列除外）是错误的。它应该是：

```
0 1 2
1 2 3
2 3 4 
```

这是一个 4x4 板：

```
0 1 2 3
1 2 3 4
12 9 6 5
13 8 7 6 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T15:33:09.633

```
else if (board[y][x] != -1) {
    // already visited, check if path is shorter
    if (moves &lt; board[y][x]) board[y][x] = moves;
    return;
} 
```

回到这里是错误的。您刚刚降低了这条路径的分数 - 该区域中可能还有其他路径可以降低分数：

```
void visit(int x, int y, int moves)
{
  if (x < 0 || x >= n || y < 0 || y >= n) {
    return; // out of board
  } else if (board[y][x] == -1 || moves < board[y][x]) {
    // first time visiting
    board[y][x] = moves;

    visit(x + 1, y, moves + 1);
    visit(x, y + 1, moves + 1);
    visit(x, y - 1, moves + 1);
    visit(x - 1, y, moves + 1);
  } else {
    return;
  }
} 
```

按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T15:56:55.427

这会奏效。

```
void visit(int x, int y, int moves)
{
  if (x < 0 || x >= n || y < 0 || y >= n) {
    return; // out of board
  } 
  else if ( board[y][x] == -1 || moves < board[y][x]) 
  {
    board[y][x] = moves;
    visit(x + 1, y, moves + 1);
    visit(x, y + 1, moves + 1);
    visit(x, y - 1, moves + 1);
    visit(x - 1, y, moves + 1);
  }
} 
```

此外，如果你用 (2*n-2) 而不是 -1 来初始化 board 的每个元素，你可以放弃 ( board[y][x] == -1 ) 条件并且只使用 (moves < board[y] [x]) 在 else if 部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T15:35:19.253

您正在进行深度优先搜索，这可能会找到某些方格的次优路径。

为了获得最佳路径，如果您的路径较短，您仍然应该从它访问，即使它已经被访问过。

# c# - System.DirectoryServices.Protocols 分页获取所有用户代码突然停止获取超过第一页的用户

> ID：10336553
> 
> 赞同：4
> 
> 时间：2012-04-26T15:27:20.640
> 
> 标签：c#, active-directory, ldap, directoryservices

所以这里是使用 S.DS.P 的代码，可以一次非常快速地在 500 个页面中获取所有用户..

```
public List<AllAdStudentsCV> GetUsersDistinguishedNamePagedResults( string domain, string distinguishedName )
        {
            try
            {
                NetworkCredential credentials               = new NetworkCredential( ConfigurationManager.AppSettings["AD_User"], ConfigurationManager.AppSettings["AD_Pass"] );
                LdapDirectoryIdentifier directoryIdentifier = new LdapDirectoryIdentifier( domain + ":389" );

                List<AllAdStudentsCV> users = new List<AllAdStudentsCV>();

                using (LdapConnection connection = new LdapConnection(directoryIdentifier, credentials))
                {
                    string filter = "(&(objectClass=user)(objectCategory=person))";
                    string baseDN = ConfigurationManager.AppSettings["AD_DistinguishedName"];

                    string[] attribArray = {"name", "sAMAccountName", "objectGUID", "telexNumber", "HomePhone"};

                    List<SearchResultEntry> srList = PerformPagedSearch(connection, baseDN, filter, attribArray);

                    if (srList.Count == 0) return null;

                    foreach (SearchResultEntry entry in srList)
                    {
                        <...snip a bunch of code to filter out bad users by CN...>

                                users.Add( user );
                            }
                            catch ( Exception ex )
                            {
                                throw;
                            }
                        }
                    }
                }
                return users;
            }
            catch ( Exception ex )
            {
                throw;
            }
        }

private List<SearchResultEntry> PerformPagedSearch( LdapConnection connection, string baseDN, string filter, string[] attribs )
        {
            List<SearchResultEntry> results = new List<SearchResultEntry>();

            SearchRequest request = new SearchRequest(
                baseDN,
                filter,
                System.DirectoryServices.Protocols.SearchScope.Subtree,
                attribs
                );

            PageResultRequestControl prc = new PageResultRequestControl(500);

            //add the paging control
            request.Controls.Add(prc);
            int pages = 0;
            while (true)
            {
                pages++;
                SearchResponse response = connection.SendRequest(request) as SearchResponse;

                //find the returned page response control
                foreach (DirectoryControl control in response.Controls)
                {
                    if (control is PageResultResponseControl)
                    {
                        //update the cookie for next set
                        prc.Cookie = ((PageResultResponseControl) control).Cookie;
                        break;
                    }
                }

                //add them to our collection
                foreach (SearchResultEntry sre in response.Entries)
                {
                    results.Add(sre);
                }

                //our exit condition is when our cookie is empty
                if ( prc.Cookie.Length == 0 )
                {
                    Trace.WriteLine( "Warning GetAllAdSdsp exiting in paged search wtih cookie = zero and page count =" + pages + " and user count = " + results.Count );
                    break;
                }
            }
            return results;
        } 
```

它在 DEV 和 Prod 上运行良好，但在与 QA AD 服务器对话时突然停止在 QA 网络服务器上工作。它只返回一页然后停止。如果我将 DEV 指向 QA AD 服务器，它可以正常工作......

它在 2012 年 2 月之前工作，上次我在 QA 中进行测试，并且肯定在 2012 年 3 月 7 日之前就位

谁能想到会导致这种行为的任何事情？也许是Windows更新？我以前有一个千斤顶这个产品...

我有理由相信它不是代码或配置......因为它适用于许多其他组合......它与 netowrk/securiyt/os 相关......但我无法弄清楚发生了什么变化。

任何帮助都可以使用

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T14:23:52.473

有完全相同的问题，即在第一个页面之后没有返回页面。

这是我发现解决问题的方法：

```
PageResultRequestControl pageRequestControl = new PageResultRequestControl(500);

SearchOptionsControl soc = new SearchOptionsControl(System.DirectoryServices.Protocols.SearchOption.DomainScope);

request.Controls.Add(pageRequestControl);
request.Controls.Add(soc); 
```

不知道 SearchOptionsControl 做了什么，但自从我添加了这个，AD 返回了所有预期的对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-07T08:53:10.207

此行解决了问题（连接为 LdapConnection）->

`connection.SessionOptions.ReferralChasing = ReferralChasingOptions.None;`

[https://social.msdn.microsoft.com/Forums/vstudio/en-US/17957bb2-15b4-4d44-80fa-9b27eb6cb61f/pageresultrequestcontrol-cookie-always-zero?forum=csharpgeneral](https://social.msdn.microsoft.com/Forums/vstudio/en-US/17957bb2-15b4-4d44-80fa-9b27eb6cb61f/pageresultrequestcontrol-cookie-always-zero?forum=csharpgeneral)

# hibernate - HQL 计数查询

> ID：10336555
> 
> 赞同：0
> 
> 时间：2012-04-26T15:27:21.447
> 
> 标签：hibernate, ejb, ejb-3.0, hql

我正在尝试使用 HQL 从表中获取计数。这是我的代码。

```
Long bgaCount = (Long)em.createQuery(" SELECT COUNT(*) FROM BiGlAccounts ").getSingleResult(); 
```

事实上，我知道表中有两条记录，但是每当我运行它并检查它的值时，`bgaCount`它都会返回 0。你看到这里有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T16:56:56.380

问题是服务器需要清理。一旦我清理并重建它，它就可以工作了。我没有更改代码，所以不要问我为什么，但它修复了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:35:47.660

BiGlAccounts 是您的实体名称还是您的表名称？从 SQL 语句移至 NHib 可能会导致在实体名称的末尾添加“s”。如果实体称为 BiglAccount(without s)，则应更改它。Nhib 不需要结尾和开头的 whatespaces，所以我建议你删除它们。所以我会首先尝试以下字符串：“SELECT COUNT(*) FROM BiGlAccount”

# html - 谷歌结果只显示我主页的链接

> ID：10336556
> 
> 赞同：0
> 
> 时间：2012-04-26T15:27:26.377
> 
> 标签：html, seo

我有一个网站 futbolpasionatlanta.com，它有几个内部链接的页面。出于某种原因，我的谷歌搜索结果都显示了我的链接网站，但我的主页 index.php 或只是 www.futbolpasionatlanta.com 显示在结果中。

我能做些什么来纠正这个问题？

是我要在我的头标签上改变的东西吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:29:13.287

如果您想鼓励 Google 对您的网站进行更深入的抓取和索引，您应该尝试直接获取指向这些内页的传入链接。这些链接的质量越高越好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:49:19.837

Google 可能需要一些时间才能将您的整个网站编入索引。它最终会被索引。

对于您的下一个问题：如果您还没有这样做，您可以使用 robots.txt 并将其提交到网站管理员工具中。这可用于阻止某些页面：

[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=156449](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=156449)

# c++ - 如何在 MSVC 中的杂项文件上编译/使用智能感知

> ID：10336557
> 
> 赞同：0
> 
> 时间：2012-04-26T15:27:29.923
> 
> 标签：c++, visual-c++

当我在 MSVC 中打开与任何项目分开的 .cpp 文件时，调试工具显示为灰色，并且智能感知似乎没有解析文本。有没有办法做到这一点，所以当我打开一个单独的 .cpp 文件时，我可以立即编译它，而无需将代码复制粘贴到新项目中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T15:52:55.937

不，没有。Visual Studio 可以构建的最小单元是一个项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T16:08:02.317

> 调试工具显示为灰色，并且智能感知似乎没有解析文本。有没有办法做到这一点，所以当我打开一个单独的 .cpp 文件时

你不能调试它，因为没有程序。一个文件不构成程序。项目“制作”了一个程序。

> 有没有办法做到这一点，当我打开一个单独的 .cpp 文件时，我可以立即编译它，而无需将代码复制粘贴到新项目中？

这是行不通的，因为即使要编译一个文件，您也可能需要特定的编译器设置（包括目录），这些设置在项目中指定。

但是，您可以使用“Visual Studio 命令提示符”，找到您的文件并运行`cl filename.cpp`（filename.cpp 是您的文件）命令，该命令将在不指定额外设置的情况下尝试编译/链接单个文件。在这种情况下，您不会从 ide 获得帮助，但您可能能够编译它（假设文件包含不需要额外设置的琐碎程序）并读取从命令提示符处获得的任何错误。

# c# - 查找控件的直接祖先/父项

> ID：10336560
> 
> 赞同：4
> 
> 时间：2012-04-26T15:27:39.620
> 
> 标签：c#, wpf, user-controls, casting, parent-child

我有一个`UserControl`named `AddressTemplate`，其中包含 a`StackPanel`和各种`Labels`& `Textboxes`。我需要的是一种在`AddressTemplate`. 本质上，我需要一种方法来确定给定`Textbox`是否在内部`AddressTemplate`，或者在外部`UserControl`，并且只是一个独立的控件。

到目前为止，我想出的是：

```
private bool FindParent(Control target)
    {
        Control currentParent = new Control();

        if (currentParent.GetType() == typeof(Window))
        {

        }
        else if (currentParent.GetType() != typeof(AddressTemplate) && currentParent.GetType() != null)
        {
            currentParent = (Control)target.Parent;
        }
        else
        {
            return true;
        }

        return false;            
    } 
```

问题是，我不断收到 InvalidCastException，因为它无法将 StackPanel 转换为控件。有谁知道正确的演员阵容，或者解决这个问题的可行方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T15:37:51.687

你可能想在[`LogicalTreeHelper.GetParent`](http://msdn.microsoft.com/en-us/library/system.windows.logicaltreehelper.getparent.aspx)这里使用它，它返回一个 DependencyObject：

```
//- warning, coded in the SO editor window
private bool IsInAddressTemplate(DependencyObject target)
{
    DependencyObject current = target;
    Type targetType = typeof(AddressTemplate);

    while( current != null)
    {
       if( current.GetType() == targetType)
       {
          return true;
       }
       current = LogicalTreeHelper.GetParent(current);
    }
    return false;
 } 
```

这将沿着逻辑父树向上走，直到找不到父控件或您正在寻找的用户控件。有关更多信息，请查看MSDN[上 Wpf中的树](http://msdn.microsoft.com/en-us/library/ms753391.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T15:47:21.313

`IEnumerable`我使用下面的扩展方法，它通过向上走可视化树来创建所有可视父级中的一个：

```
public static IEnumerable<DependencyObject> VisualParents(this DependencyObject element)
{
    element.ThrowIfNull("element");
    var parent = GetParent(element);

    while (parent != null)
    {
        yield return parent;
        parent = GetParent(parent);
    }
}

private static DependencyObject GetParent(DependencyObject element)
{
    var parent = VisualTreeHelper.GetParent(element);

        if (parent == null && element is FrameworkElement)
            parent = ((FrameworkElement)element).Parent;

    return parent;
} 
```

这非常灵活。在您的示例中，您可以按如下方式使用它：

```
if (target.VisualParents().OfType<AddressTemplate>().Any()) {
     //the target is in the address template
} 
```

# ruby-on-rails - 通过 Tire gem 进行 Elasticsearch 版本控制

> ID：10336561
> 
> 赞同：1
> 
> 时间：2012-04-26T15:27:42.700
> 
> 标签：ruby-on-rails, ruby, elasticsearch, tire

我有一个现有的 Rails 应用程序，它使用轮胎 (0.4.0) 与 Elasticsearch (0.17.4) 引擎交互。它已经有几个使用 Tire::Persistence 的模型。我想添加一个利用 Elasticsearch 版本控制的新模型，以跟踪所有更改并能够恢复到以前的版本。

现在，当我检索任何“持久”模型实例时，我检查`_version`它始终是`nil`. 我还没有找到任何与版本控制相关的轮胎文档。我必须以某种方式激活它，还是手动保存带有版本值的记录？我什至在正确的轨道上吗？

我确实看到某些方法返回`_version`项目的值，但其他方法没有......

```
Article.first._version                          # => nil
Article.search("sample query").first._version   # => nil
Article.find("id_123")._version                 # => 8 
```

此外，版本控制似乎增加了 2。也许轮胎没有完全具备处理版本控制的能力。是保存以前的版本吗？如何检索以前版本的记录？

[编辑] 我可能误解了 Elasticsearch 中的“版本控制”实际上是什么。似乎它主要用于并发控制。哦，好吧。（不过，我很想听听其他的）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T08:33:54.433

首先，是的，正如您在*Edit*中所写，ElasticSearch 中的版本并不是为了存储文档的修订版，而是为了并发控制（例如，不使用过时的版本覆盖文档）。

其次，您必须声明您想要从搜索返回的版本；[http://www.elasticsearch.org/guide/reference/api/search/version.html](http://www.elasticsearch.org/guide/reference/api/search/version.html)

此代码向您展示了如何在*Tire*中执行此操作。

```
require 'tire'

Tire.index('articles') do
  delete
  create
  store id: 1, title: 'One'
  store id: 2, title: 'Two'
  store id: 2, title: 'Two again'

  refresh
end

articles = Tire.search('articles') do
             query { all } 

             version true
           end.results

articles.each do |article|
  puts "Article '#{article.title}' has version #{article._version}"
end 
```

目前，最好阅读*轮胎*集成测试套件的文档。文档当然是应该并且将会改进的东西。

至于您最初的需求本身，过去经常会向 CouchDB 提出类似的问题。[Simple Document Versioning with CouchDB](http://blog.couchbase.com/simple-document-versioning-couchdb)博客文章描述了一种不错的策略。研究 CouchDB 解决方案对您很有帮助，因为文档模型是相似的。（当然，与 ElasticSearch 不同，CouchDB 确实物理存储了文档修订，因此它开启了不同的策略范围。）

在 ElasticSearch 中，关于使用修订的基本决定是：

**我想直接在 JSON 本身中存储完整的修订吗？**

这对于较小的文档和较小的数据库可能有意义。根据您的要求，它可以使搜索历史文档变得非常简单。

ElasticSearch 中的[*嵌套类型*](http://www.elasticsearch.org/guide/reference/mapping/nested-type.html)将使这些“作为嵌套文档的修订”变得方便和容易。

（您也可以在 JSON 本身中存储文档的“差异”，但我敢打赌，这会给您的应用程序逻辑带来更多压力。）

**我想将修订存储为单独的文档吗？**

您可能希望单独存储修订，并将它们“链接”到它们的基础文档。ElasticSearch 中的[*父/子支持*](http://www.elasticsearch.org/guide/reference/mapping/parent-field.html)将使处理这些关系和查询成为可能。

# sql-server - 解析器：ImpersonationInfo 对象的语法不正确，如果 ImpersonateAccount 值用于 ImpersonationInfo

> ID：10336565
> 
> 赞同：15
> 
> 时间：2012-04-26T15:27:52.910
> 
> 标签：sql-server, ssas

我第一次尝试在我的 PC 上部署多维数据集。我以管理员身份运行 SSMS 并让自己（Gary-pc\gary，使用 Windows 身份验证）成为管理员。这样做让我通过了错误消息用户没有权限在“GARY-PC”中创建新对象，或者该对象不存在。现在部署多维数据集时，出现错误：ImpersonationInfo 对象的语法不正确。如果 ImpersonateAccount 值用于 ImpersonationInfo，则 Account 属性不能为空。我没有（故意！大声笑）设置任何与模仿有关的东西。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-27T00:59:50.050

我已经解决了这个问题：

*   双击数据源

*   选择模拟

*   选择用户的使用凭证

正如@user1335419 所说。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-20T16:04:44.927

我尝试将模拟更改为“用户凭据”，虽然我成功部署了多维数据集，但我无法处理它。我最终得到一个错误，上面写着：

> “数据源包含不支持处理操作的 ImpersonationMode”

所以我将模拟从“用户凭据”更改为“继承”并且能够处理。我不知道第一次部署是否适用于“继承”，但我想我会分享我的经验。

# jquery - 'one'和'live'的组合提交？

> ID：10336566
> 
> 赞同：1
> 
> 时间：2012-04-26T15:27:53.770
> 
> 标签：jquery

我知道：

```
$('form').one('submit', function (evt) { ... }); 
```

我知道：

```
$('form').live('submit', function (evt) { ... }); 
```

是否存在两者的结合？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T15:30:01.010

您可以将事件委托给 DOM 树的更高层：

```
$('#someAncestor').one('submit', 'form', function (evt) { ... }); 
```

请注意，这仅在 jQuery 1.7+ 中可用。它采用与方法相同的形式`on`。这是可行的，因为 DOM 事件往往会在树上冒泡。如果将事件处理程序绑定到祖先元素，它最终会到达它。第二个参数是一个选择器。当事件到达祖先时，将根据选择器检查目标。如果匹配，则执行处理程序。

# c++ - 如何使用opencv flann::Index？

> ID：10336568
> 
> 赞同：11
> 
> 时间：2012-04-26T15:27:57.683
> 
> 标签：c++, opencv, knn

我对 opencv flann::Index 有一些问题-

我正在创建索引

```
 Mat samples = Mat::zeros(vfv_net_quie.size(),24,CV_32F);
        for (int i =0; i < vfv_net_quie.size();i++)
        {
           for (int j = 0;j<24;j++)
           {
              samples.at<float>(i,j)=(float)vfv_net_quie[i].vfv[j];
           }
        }
    cv::flann::Index flann_index(
            samples,
            cv::flann::KDTreeIndexParams(4),
            cvflann::FLANN_DIST_EUCLIDEAN
               );
    flann_index.save("c:\\index.fln"); 
```

之后，我试图加载它并找到最近的 neiborhoods

```
cv::flann::Index flann_index(Mat(),
    cv::flann::SavedIndexParams("c:\\index.fln"),
    cvflann::FLANN_DIST_EUCLIDEAN
    );

cv::Mat resps(vfv_reg_quie.size(), K, CV_32F);
cv::Mat nresps(vfv_reg_quie.size(), K, CV_32S);
cv::Mat dists(vfv_reg_quie.size(), K, CV_32F);

flann_index.knnSearch(sample,nresps,dists,K,cv::flann::SearchParams(64)); 
```

并且在 miniflann.cpp 中存在访问冲突

```
((IndexType*)index)->knnSearch(_query, _indices, _dists, knn,
                          (const ::cvflann::SearchParams&)get_params(params)); 
```

请帮忙

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-10T17:39:32.670

您不应该将 flann 文件加载到 a`Mat()`中，因为它是存储索引的地方。它是一个在构造函数被调用后被销毁的临时对象。这就是为什么当您调用`knnSearch()`.

我试过以下：

```
cv::Mat indexMat;
cv::flann::Index flann_index(
    indexMat,
    cv::flann::SavedIndexParams("c:\\index.fln"),
    cvflann::FLANN_DIST_EUCLIDEAN
); 
```

导致：

```
Reading FLANN index error: the saved data size (100, 64) or type (5) is different from the passed one (0, 0), 0 
```

这意味着，必须使用正确的维度初始化矩阵（对我来说似乎很愚蠢，因为我不一定知道索引中存储了多少元素）。

```
cv::Mat indexMat(samples.size(), CV_32FC1);
cv::flann::Index flann_index(
    indexMat,
    cv::flann::SavedIndexParams("c:\\index.fln"),
    cvflann::FLANN_DIST_EUCLIDEAN
); 
```

成功了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-07T09:23:41.293

在接受的答案中，为什么`cv::flann::Index`构造函数中的输入矩阵必须与用于生成保存的索引的矩阵具有相同的维度，并不清楚和误导。我将举例详细说明@Sau 的评论。

`KDTreeIndex`使用 a 作为输入生成`cv::Mat sample`，然后保存。当您加载它时，您必须提供相同的`sample`矩阵来生成它，例如（使用模板化`GenericIndex`界面）：

```
cv::Mat sample(sample_num, sample_size, ... /* other params */);
cv::flann::SavedIndexParams index_params("c:\\index.fln");
cv::flann::GenericIndex<cvflann::L2<float>> flann_index(sample, index_params); 
```

`L2`是通常的欧几里得距离（其他类型可以在 中找到`opencv2/flann/dist.h`）。

现在可以使用索引，如图所示找到一个点的`K`最近邻居：`query`

```
std::vector<float> query(sample_size);
std::vector<int> indices(K);
std::vector<float> distances(K);

flann_index.knnSearch(query, indices, distances, K, cv::flann::SearchParams(64)); 
```

该矩阵`indices`将包含矩阵中**最近邻居的****位置**，**该矩阵**最初用于生成索引。这就是为什么您需要使用用于生成索引的矩阵加载保存的索引，否则返回的向量将包含指向无意义的“最近邻居”的索引。 ****`sample`****

 **此外，您还会得到一个`distances`矩阵，其中包含找到的邻居距您的点有多远`query`，例如，您以后可以使用它来执行一些[反距离加权](https://en.wikipedia.org/wiki/Inverse_distance_weighting)。

另请注意，必须跨矩阵和点`sample_size`匹配。`sample``query`**

# iphone - HTML、Javascript 和 CSS 作为应用程序

> ID：10336577
> 
> 赞同：1
> 
> 时间：2012-04-26T15:28:13.693
> 
> 标签：iphone, html, objective-c, css, ios

我想知道是否可以从 iOS 设备的硬盘驱动器运行 HTML 页面，仅使用 Objective-C 作为 HTML 页面的视图端口，并将 HTML 页面作为应用程序的实际界面。这可能吗？

谢谢，

奥迪努尔夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T18:17:09.937

为 IOS 创建一个包含以下内容的文件：

```
#import "WrapperViewController.h"

@implementation WrapperViewController

- (void) viewDidLoad
{
  NSBundle *bundle   = [NSBundle mainBundle];
  NSString *path     = [bundle bundlePath];
  NSString *fullpath = [NSBundle pathForResource:@"index" ofType:@"htm" inDirectory:path];
  [webView loadRequest:[NSURLRequest requestWithURL: [NSURL fileURLWithPath:fullPath]]];
}

- (BOOL) shouldAutorotateToInterfaceOrientation: (UIInterfaceOrientation) interfaceOrientation
{
  return YES;
}
- (void) didRotateFromInterfaceOrientation: (UIInterfaceOrientation) fromInterfaceOrientation
{
  webView.scalesPageToFit = YES;
  WebView.backgroundColor = [UIColor blackColor];
}

- (void) didReceiveMemoryWarning
{
  [super didReceiveMemoryWarning];
}

- (void) dealloc
{
  [super dealloc];
}
@end 
```

（我直接从《*HTML5 for IOS and Android: A Beginner's Guide*》一书中得到了这一点[第 388-390 页]）

这就是你为安卓做这件事的方式[。](https://stackoverflow.com/a/8780055/599402)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T15:37:13.890

是的，有可能。您需要对 UIWebView 进行子视图，然后加载指向本地目录中的 HTML 文件而不是 Web URL 的请求。您的所有网页都需要添加到应用程序包中。

```
 UIWebView *webview;
 [webView loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"page_name" ofType:@"html"]isDirectory:NO]]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T15:30:40.807

是的，有可能。但是，要小心，苹果有时会拒绝它。这就是我们所说的Web 应用程序。

正如马特指出的那样，看看 PhoneGap 或 Sencha Touch

[http://phonegap.com/](http://phonegap.com/)

[http://www.sencha.com/products/touch/](http://www.sencha.com/products/touch/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T15:30:45.203

听起来[http://phonegap.com](http://phonegap.com)是您正在寻找的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T15:32:01.740

我曾在 Android 上使用过 phonegap，对此我印象深刻。没有用 IOS 尝试过，但这里是 [PhoneGap的链接](http://phonegap.com/)

# c# - Paypal 沙盒无法识别新返回的 ProfileID（错误 11546）

> ID：10336578
> 
> 赞同：1
> 
> 时间：2012-04-26T15:28:16.827
> 
> 标签：c#, paypal, paypal-sandbox

我已经成功集成了贝宝的快速结账和 IPN 通知，因此我遇到了经常性付款的问题。我使用 NVP API 通过方法发出请求：CreateRecurringPaymentsProfile 它运行良好并返回 profileId（例如 I-GK8NCPH2N712）。和 profileStatus（例如 ActiveProfile）。但是，当我使用此 profileId 请求 GetRecurringPaymentsProfileDetails 时，我收到错误 11546 的描述：

配置文件 ID 对此帐户无效。请使用正确的个人资料 ID 重新提交请求。

我在历史上的买家和卖家页面上检查了 profileId 是否正确。

沙盒环境有问题吗？或者可能是配置文件开始时间延迟，它将在一个月后开始（属性 PROFILESTARTDATE）？或者，商家可能无法访问定期付款，但这将是一场灾难。

请分享任何想法，检查什么或可能是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T23:29:48.273

阅读 Derek MacDonald 的文章后，我解决了我的问题：

[http://derekmd.com/2009/02/paypal-development-the-art-of-obfuscation/](http://derekmd.com/2009/02/paypal-development-the-art-of-obfuscation/)

问题是我使用一个卖家的 API 凭证创建了个人资料，然后尝试使用另一个具有不同凭证的卖家做某事。

愚蠢的傻瓜，但正如 Derek MacDonald 所写，错误消息可能会提供更多信息......

# c++ - 不使用裸函数时如何获取所有局部变量的大小

> ID：10336579
> 
> 赞同：1
> 
> 时间：2012-04-26T15:28:20.483
> 
> 标签：c++, visual-studio-2010, function, assembly

如何在非裸函数中获取所有局部变量的大小（我的堆栈在序言中移动了多少）？

在裸函数中，我可以使用 __LOCAL_SIZE 符号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T16:52:53.277

您可以使用[dbghelp.dll 中的 StackWalk64](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680650%28v=vs.85%29.aspx)来执行完整的堆栈遍历。EBP 和 ESP 是描述每个堆栈帧的结构的一部分。

# c#-4.0 - Windows Shell 扩展 dll 和 Winform 进程

> ID：10336580
> 
> 赞同：0
> 
> 时间：2012-04-26T15:28:26.470
> 
> 标签：c#-4.0, windows-shell

[我按照本教程http://blogs.msdn.com/b/codefx/archive/2010/09/14/writing-windows-shell-extension-with-net-framework-4](http://blogs.msdn.com/b/codefx/archive/2010/09/14/writing-windows-shell-extension-with-net-framework-4-c-vb-net-part-1.aspx)为 Windows Shell 扩展集成制作了一个 dll [-c-vb-net-part-1.aspx](http://blogs.msdn.com/b/codefx/archive/2010/09/14/writing-windows-shell-extension-with-net-framework-4-c-vb-net-part-1.aspx) [^]

现在，我在该 dll 中添加了一个 Windows 表单，我正在执行以下操作：

```
void OnVerbDisplayFileName(IntPtr hWnd)
{
    ShowSelectedFiles form = new ShowSelectedFiles();
    form.Show(selectedFiles);
} 
```

一切正常，只是表单图标未显示在任务栏中，我找不到运行表单的进程。

关于如何解决这个问题的任何提示？也许通过开始一个新流程然后显示表格？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T02:43:15.663

尝试使用[Form.Show Method (IWin32Window)](http://msdn.microsoft.com/en-us/library/szcefbbd.aspx)方法，以便您可以指定所有者窗口。

有关如何从 hWnd 指定所有者窗口，请参阅[http://ryanfarley.com/blog/archive/2004/03/23/465.aspx 。](http://ryanfarley.com/blog/archive/2004/03/23/465.aspx)

还要确保窗体的 ShowInTaskBar 属性为 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T07:37:50.853

解决这个问题的唯一方法是创建另一个进程。

```
 void OnVerbDisplayFileName(IntPtr hWnd)
    {
        string file = (new System.Uri(Assembly.GetExecutingAssembly().CodeBase)).AbsolutePath;
        string executableName = file.Substring(0, file.LastIndexOf("/"));
        executableName += "/MyApp.exe";

        Process gui = new Process();

        gui.StartInfo.FileName = executableName;
        gui.StartInfo.Arguments = selectedFiles.JoinFileNames(" ");

        gui.Start();
    } 
```

干杯!

# python - Django 应用程序分配样式表——不想将它添加到应用程序的索引文件中？它可以是动态的吗？

> ID：10336582
> 
> 赞同：0
> 
> 时间：2012-04-26T15:28:53.830
> 
> 标签：python, django

我是 Django 框架的新手，如果我的问题是新手，请考虑一下。

我使用 django 框架创建了一个投票应用程序。我无法弄清楚如何使我的样式表为前端动态。因为我不想在我的 base_site.html 或 index.html 文件中调用它，因为我也是多个视图呈现不同的模板文件。我唯一的目标是如何在一个地方定义我的应用程序的样式表并适用于我的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T15:38:06.887

如果我正确阅读了您的问题，那么第一部分想要制作一个动态的样式表？？？

> 我无法弄清楚如何使我的样式表为前端动态

为此，您可以使用类似

Django 管理员遵循添加的约定`{% block extra_head %}`（或类似的东西，抱歉不记得细节）

这正是它听起来像`<head>`标签中的一个块。这将允许您从任何模板加载样式表。只需在您的中定义该块`base_site.html`并在您扩展时实现它`base_site.html`

但是在您的问题结束时，您似乎想在一个地方定义样式表并为每个请求包含该样式表？

> 我唯一的目标是如何在一个地方定义我的应用程序的样式表并适用于我的应用程序。

也许您可以在 settings.py 中设置一个指令`'DEFAULT_STYLESHEET`并将其包含在您的`base_site.html`模板中。将 css 放在块 extra_head 中。如果您需要覆盖它，只需实现该块和中提琴！

# android - 以编程方式建立 VPN 连接的最简单方法是什么？(pptp) 是否使用 .aidl 文件？

> ID：10336586
> 
> 赞同：4
> 
> 时间：2012-04-26T15:29:02.550
> 
> 标签：android, vpn

我正在尝试使用 PPTP 建立 VPN 连接，我想让它尽可能简单（用户友好）。我搜索了很多尝试了一些没有运气的东西，并且遇到了使用 AIDL 的方法，我不是 100% 确定，但我认为多亏了这一点，我才能使用隐藏的 android 方法（例如`PptpProfile` `IVpnServices.aidl` `VpnProfile.aidl`等）。我想知道：我走对了吗？如果不能，你能给我建议建立 pptp 连接的更好方法是什么？

但另一方面，如果我要走“正确的道路”，我就会遇到问题。我已经复制`IVpnServices.aidl`并生成`VpnProfile.aidl`了我的项目`IVpnServices.java`，但出现错误：

> android.net.vpn.VpnProfile 无法解析为类型

根据 AIDL 教程，我也应该复制`VpnProfile.java`到我的项目中，但它引用了许多其他类，这些类也是隐藏的，并导致更多错误......有谁知道如何解决/绕过它？我将不胜感激任何建议。

# c# - 在内存中对文本文件进行内存操作的最佳方法：首先读取为 byte[]？读取为 File.ReadAllText() 然后另存为二进制？

> ID：10336595
> 
> 赞同：3
> 
> 时间：2012-04-26T15:29:27.053
> 
> 标签：c#, windows, io, bytearray

我需要更改内存中的文件，目前我使用文件流和二进制读取器将文件读入内存中的字节 []。

我想知道在内存中更改该文件、将 byte[] 转换为字符串、进行更改并执行 Encoding.GetBytes() 的最佳方法是什么？或首先使用 File.ReadAllText() 将文件作为字符串读取，然后使用 Encoding.GetBytes()？或者任何方法都可以在没有警告的情况下工作？

有什么特别的方法吗？我需要用额外的字符或替换字符串替换文件中的特定文本，几十万个文件。可靠性优于效率。文件是 HTML 之类的文本，而不是二进制文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T15:54:17.680

Read the files using `File.ReadAllText()`, modify them, then do `byte[] byteData = Encoding.UTF8.GetBytes(your_modified_string_from_file)`. Use the encoding with which the files were saved. This will give you an array of `byte[]`. You can convert the `byte[]` to a stream like this:

```
MemoryStream stream = new MemoryStream();
stream.Write(byteData, 0, byteData.Length); 
```

**Edit:** It looks like one of the `Add` methods in the API can take a byte array, so you don't have to use a stream.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T15:38:55.980

根据文件的大小，我将使用`File.ReadAllText`它们来读取它们并`File.WriteAllText`写入它们。这使您摆脱了必须调用`Close`或`Dispose`读取或写入的责任。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T15:34:31.047

通过先读入字节，您肯定会让自己变得更难。只需使用 StreamReader。您可能可以使用 ReadLine() 并一次处理一行。这会严重减少应用程序的内存使用量，尤其是在处理这么多文件的情况下。

```
using (var reader = File.OpenText(originalFile))
using (var writer = File.CreateText(tempFile))
{
    string line;
    while ((line = reader.ReadLine()) != null) 
    {
        var temp = DoMyStuff(line);
        writer.WriteLine(temp);
    }
}

File.Delete(originalFile);
File.Move(tempFile, originalFile); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T15:31:25.433

您通常不想读取二进制级别的*文本*文件 - 只需使用`File.ReadAllText()`并提供文件中使用的正确编码（这有一个[重载](http://msdn.microsoft.com/en-us/library/ms143369.aspx)）。如果文件编码是 UTF8 或 UTF32 ，*通常*该方法可以自动检测并使用正确的结束编码。同样适用于写回 - 如果它不是 UTF8，请指定您想要的编码。

# java - 从 CSV 文件 Java 清除回车

> ID：10336598
> 
> 赞同：1
> 
> 时间：2012-04-26T15:29:48.077
> 
> 标签：java, excel, csv, return

对于我的问题，我已经看到了很多答案。我已经尝试了所有这些，但没有一个对我有用。当我导出我的 excel 文件时，如果有回车符，它会将应该进入下一列的数据输入到新行中。

我正在尝试删除列级别的回车，如下所示：

```
String col = columnName.replaceAll("\r", "");
             reportColumn.put( "column", col ); 
```

这将遍历每个块并填充 Excel 工作表。另外，我正在尝试使用包含整个 csv 文件的字符串删除此处的回车：

```
String csv = "";

CSVReportGenerator generator = new CSVReportGenerator( );
generator.setReportColumns( this.reportColumns );
generator.setReportRows( rows );
generator.setApplicationPath("");
generator.setNL('\n');
generator.setDebuggingON(Config.DEBUGGING_ON);
generator.produceReport( );
csv = generator.getCSV( );

csv.replaceAll(",,", "");
csv.replaceAll(".", "");
csv.replaceAll("\r", "");
csv.replaceAll("\n", "");
csv.replaceAll("\r\n", "");
csv.replaceAll("\\r\\n", ""); 
```

如您所见，我尝试了几种不同的删除回车的方法，但均未成功。谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:16:09.743

To restate your question: You have an Excel document with cells that contains new lines. You want to export this document to CSV and the new lines within the cells are corrupting the CSV file.

## Removing Newlines

It appears that you have tried removing the new lines from each cell as they are written to CSV, but state that it does not appear to work. In the code that you give you replace just the \r characters, but not the \n characters. I would try this:

```
String col = columnName.replaceAll("[\r\n]", "");
reportColumn.put( "column", col ); 
```

which will replace all both types of characters that could be interpreted as newlines (indeed on Windows, a newline is usually two characters together \r\n).

As far as your regular expressions for removing newlines go here is the rundown:

```
",,"  // Removes two commas, not newlines
"."  // Removes all characters, except newlines
"\r" // Removes the "carriage return" characters (half of the Windows newline)
"\n" // Removes the "new line" characters (half of the Windows newline)
"\r\n" // Removes a Windows newline but not individual newline characters
"\\r\\n"  // Same as "\r\n" but the escapes are handled by the regex library rather than the java compiler.
"[\r\n]" // Should remove any newline character.
"[\\r\\n]" // Same as above but with extra escaping. 
```

## Writing Escaped Newlines

It should be possible to generate CSV files that include newlines within the cells. Indeed Excel itself can do this. There is an ExcelCSVPrinter java library here that will do all the escaping you need for you: [http://ostermiller.org/utils/CSV.html](http://ostermiller.org/utils/CSV.html)

This is a single line of excel format csv:

```
"cell one","first line of cell two
second line of cell two","cell three" 
```

[http://ostermiller.org/utils/CSV.html](http://ostermiller.org/utils/CSV.html) also provides an ExcelCSVParser Java library for reading Excel CSV format like that.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:33:15.857

你可以试试

`System.getProperty("line.separator")`

这样做的一个优点是它独立于平台。

# sql - 大规模更新分层表的有效方法

> ID：10336600
> 
> 赞同：5
> 
> 时间：2012-04-26T15:29:51.460
> 
> 标签：sql, performance, optimization, hierarchy, hierarchical-data

我有一个表示文件和目录层次结构的数据库表，具有以下结构（简化）：

```
项目 ID int
路径文字
输入 int（0 表示文件，1 表示目录）
ParentId int
BackupTime 日期时间

```

目前该`BackupTime`列仅用于文件，对于目录，它设置为 null。

现在我还需要为目录填写此列：它必须是`BackupTime`所有后代（文件和目录）中的最小值。

这个（幼稚且低效的）查询说明了我想要做什么：

```
update Items i
set BackupTime = (select min(BackupTime)
                  from Items d
                  where d.Path like i.Path || '%'
                  and d.Type = 0)
where i.Type = 1 
```

我的问题是我似乎找不到有效的方法。上面的查询在大量数据上耗时太长（该表通常包含超过 100K 行）

`min(BackupTime)`搜索唯一的直接子代可能会更快：

```
update Items i
set BackupTime = (select min(BackupTime)
                  from Items d
                  where d.ParentId = i.ItemId)
where i.Type = 1 
```

但要做到这一点，我必须确保后代将在其祖先之前更新，因此我必须自下而上递归地遍历层次结构。问题是我没有简单的方法知道哪些项目在层次结构中最深。我正在使用 SQLite，所以我不能使用分层查询。

关于如何有效地做到这一点的任何想法？

理想情况下，我希望能够在单个 UPDATE 查询中执行此操作，但如果不可能，我愿意接受其他选项，只要它们有效

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T22:04:29.707

这是在黑暗中拍摄的，但它可能会奏效。这是一种手动处理自下而上问题的尝试。（我不知道 sqlite 的限制，但这可能是标准 SQL-92 并且希望没问题。）

第 1 步：决定如何处理空目录。我认为这里的解决方案只有在没有空目录或者空目录最初被更新以使其具有人为的非 NULL BackupTime 时才有效。（人为的 BackupTime 应该是什么可能很重要，这取决于您在数据发生更改时如何维护 BackupDate 列。使用当前日期或人为的未来日期可能会起作用，但您应该考虑一下。）

步骤 2\. 重复执行以下查询，直到没有更多行受到影响：

```
 update Items i set
    BackupTime = (
      select min(BackupTime)
      from Items d
      where d.ParentId = i.ItemId
    )
  where i.Type = 1
  and i.BackupTime is null
  and not exists (
    select *
    from Items d
    where d.ParentId = i.ItemId
    and d.Type = 1
    and d.BackupTime is null
  ) 
```

换句话说，在需要时更新目录的 BackupTime 并且还拥有所有信息：当它们的 BackupTime 为 null 并且它们不包含 BackupTime 值也为 null 的子目录时。

所以第一次运行它时，它将为所有不包含子目录的目录设置 BackupTime，只包含文件。第二次，它将为包含子目录但不包含子子目录的目录设置 BackupTime。

您可以通过将 BackupTime 设置为 coalesce((select...),current_timestamp) 来处理空目录问题。

# java - 如何多次实例化一个实现可运行并打开套接字的类？

> ID：10336606
> 
> 赞同：1
> 
> 时间：2012-04-26T15:30:07.403
> 
> 标签：java, multithreading, sockets, runnable

我正在做一个项目，其中我有一堂课`DeviceCommunicator`，那个`implements Runnable`。目前，一个主类实例化一个实例，`DeviceCommunicator`该实例（最终）使用库连接到本地网络上的设备`Socket`。

最终，我的意思是，如果需要发送消息，则实例`DeviceCommunicator`打开与设备的套接字连接，发送消息，然后**启动一个新线程以**通过以下行从套接字接收数据代码：

```
new Thread(new DeviceCommunicator()).start(); 
```

编辑：为了澄清，这是程序执行时的操作顺序：

1）`MAIN`类实例化一个`DeviceCommunicator`带有构造函数的类，例如：

`comm1 = DeviceCommunicator(hostName, portNum)`

2)`MAIN`类想要向 发送消息`comm1`，所以它调用`send`如下：

`comm1.send(someString)`

3) comm1 是类型`DeviceCommunicator`并打开`Socket`与 hostName/portNum 的连接，例如：

```
deviceSocket = new Socket(hostName, portNum);
out = new PrintStream(deviceSocket.getOutputStream());
in = new BufferedReader(new InputStreamReader(deviceSocket.getInputStream())); 
```

4) comm1 发送`someStr`到输出`PrintStream`，然后使用以下代码初始化一个线程以侦听响应：

```
new Thread(new DeviceCommunicator()).start(); 
```

由于侦听`DeviceCommunicator`线程没有构造函数参数，因此需要我制作输出`PrintStream`和输入`BufferedReader` `static`变量。

当我只有一个实例时`DeviceCommunicator`- 这很好用！

但是，我希望`DeviceCommunicator`该类的多个实例可以连接到本地网络上的相同或不同设备，**但**考虑到`DeviceCommunicator`类中的输出和输入是`static`，然后它们是共享的（我认为，我已经读到 JVM 并不能完全保证静态变量更改将对其他正在运行的线程可见）在所有实例中`DeviceCommunicator`- 这是一个问题！

我已经做了一些研究，但我还没有遇到非常相似的主题——大多数主题基本上都是“非此即彼”，其中：

A) 该主题是关于线程套接字通信的，其中“非阻塞”通信是通过使用静态变量来完成的。

或者

B)`implements Runnable`考虑一个简单的情况，其中一个线程将完成一项（通常是简单的）任务，而另一个线程将完成另一项（通常稍作修改）任务。

编辑：我想可能提出的一种解决方案是将输入简单地传递`BufferedReader`给侦听`DeviceCommunicator`线程，但是我正在实现要发送的消息队列（以防出现网络问题）；因此，如果需要发送消息，它只需获取队列中的第一个元素并将其打印到套接字连接，我想在侦听线程中验证消息是否被设备正确接收。如果消息被正确接收，那么我想从队列中删除元素，**但这**又带来了一个问题——在 Java 中传递变量总是通过值，而不是通过引用！所以，如果我要传递输入`BufferedReader` **和**队列，在监听中被修改的队列`DeviceCommunicator`不会是需要在主`DeviceCommunicator`实例中修改的实际队列。

这个问题有我不知道的明显解决方案吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T17:08:10.147

如果您可以控制`DeviceCommunicator`该类，我会将您需要的`Stream`或`Reader`对象作为参数传递给构造函数。我当然*不会*以这种方式使用`static`变量。

```
new Thread(new DeviceCommunicator(hostName, portNum, in, out)).start(); 
```

现在，如果多个线程正在读取和写入流，那么您必须在执行此操作之前对其进行同步。

您还在评论中提到您需要发送一条`Queue`消息。`DeviceCommunicator`尽管您需要将其设为同步列表或其他内容，但这也可能是一个参数：

```
List<String> toSendList = Collections.synchronizedList(new ArrayList<String>());
...
new Thread(new DeviceCommunicator(hostName, portNum, in, out, toSendList)).start(); 
```

但是，更好的模式是添加一个`send`方法`DeviceCommunicator`，将项目添加到队列中，而不是主线程和发送线程都具有相同的队列。如果您向 中添加方法`DeviceCommunicator`，您也许可以让它也隐藏读取器和写入器流，并且主线程不会直接访问流。 [数据隐藏](http://docstore.mik.ua/orelly/java-ent/jnut/ch03_05.htm)是面向对象程序的重要特征之一。

# vim - 是否可以在 VIM 中对通配符字符串使用查找和替换？

> ID：10336609
> 
> 赞同：42
> 
> 时间：2012-04-26T15:30:11.030
> 
> 标签：vim, wildcard, replace

例如，我有一堆具有共同前缀和后缀的值，例如：

```
fooVal1Bar;

fooVal2Bar;

fooVal3Bar; 
```

在这种情况下，所有变量名称都以 . 开头和结尾，并以 .`foo`结尾`Bar`。我想使用在 和 之间找到的随机变量名称进行查找和`foo`替换`Bar`。假设我已经定义了变量`Val1`、`Val2`、`Val3`和`Val1Old`、`Val2Old`和`Val3Old`。我会做一个替换，类似于：

```
:%s/foo<AnyString>Bar/foo<AnyString>Bar = <AnyString> + <AnyString>Old 
```

这将导致：

```
fooVal1Bar = Val1 + Val1Old;

fooVal2Bar = Val2 + Val2Old;

fooVal3Bar = Val3 + Val3Old; 
```

我希望很清楚我想要做什么，我在 vim 帮助或网上找不到任何关于用通配符字符串替换的内容。我能找到的最多的是搜索通配符字符串。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-04-26T15:32:14.060

我相信你想要

```
:%s/foo\(\w\+\)Bar/& = \1 + \1\Old/ 
```

解释：

`\w\+`找到一个或多个出现的字符。前面的*foo*和后面的*Bar*确保这些匹配的字符正好在 a`foo`和 a之间`Bar`。

`\(...\)`存储此字符，以便它们可以用于替换的替换部分。

`&`复制匹配的内容

`\1`是`\(....\)`部分中捕获的字符串。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-26T15:34:57.200

您需要捕获要保存的内容。尝试这样的事情：

```
%s/\(foo\(\w\+\)Bar\);/\1 = \2 \2Old/ 
```

[或者你可以用魔法](http://vimdoc.sourceforge.net/htmldoc/pattern.html#/magic)把它清理一下：

```
%s/\v(foo(\w+)Bar);/\1 = \2 \2Old/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-25T14:50:57.410

用通配符替换字符串

```
:%s/foo.*Bar/hello_world/gc 
```

在这里，`.*`句柄通配符遵循正则表达式 有关[正则表达式量词的更多信息](https://www.rexegg.com/regex-quickstart.html#quantifiers)

```
. - Any character except line break
* - Zero or more times 
```

# python - matplotlib 中的散点图

> ID：10336614
> 
> 赞同：25
> 
> 时间：2012-04-26T15:30:18.043
> 
> 标签：python, matplotlib, scatter-plot

这是我的第一个 matplotlib 程序，很抱歉我的无知。

我有两个字符串数组。说，`A = ['test1','test2']`和`B = ['test3','test4']`。如果`A`和`B`元素之间存在任何相关性，则它们的 corr 值将设置为`1`。

```
 test1 | test2
test3 |   1   |   0

test4 |   0   |   1 
```

现在，我想绘制一个散点图，其中我的 X 轴是 的元素`A`，Y 轴是 的元素，`B`如果相关值为`1`，它将在散点图中标记。怎么做？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-04-26T15:42:22.593

也许是这样的：

```
import matplotlib.pyplot
import pylab

x = [1,2,3,4]
y = [3,4,8,6]

matplotlib.pyplot.scatter(x,y)

matplotlib.pyplot.show() 
```

编辑：

让我看看我现在是否理解正确：

你有：

```
 test1 | test2 | test3
test3 |   1   |   0  |  1

test4 |   0   |   1  |  0

test5 |   1   |   1  |  0 
```

现在您想在散点图中表示上述值，使得值 1 由一个点表示。

假设您的结果存储在二维列表中：

```
results = [[1, 0, 1], [0, 1, 0], [1, 1, 0]] 
```

我们想将它们转换为两个变量，以便我们能够绘制它们。

我相信这段代码会给你你正在寻找的东西：

```
import matplotlib
import pylab

results = [[1, 0, 1], [0, 1, 0], [1, 1, 0]]

x = []
y = []

for ind_1, sublist in enumerate(results):
    for ind_2, ele in enumerate(sublist):
        if ele == 1:
            x.append(ind_1)
            y.append(ind_2)       

matplotlib.pyplot.scatter(x,y)

matplotlib.pyplot.show() 
```

请注意，我确实需要 import `pylab`，并且您可以使用轴标签。这也感觉像是一种解决方法，并且可能（可能是）一种直接的方法来做到这一点。

# java - jersey json webservice客户端实现

> ID：10336616
> 
> 赞同：1
> 
> 时间：2012-04-26T15:30:20.053
> 
> 标签：java, json, rest, client, jersey

我有一个返回这种 json 对象的 web 服务：

```
{

"dossiers": [
    {
        "id": "2"
    },
    {
        "id": "3"
    }
]
} 
```

所以我尝试使用 jersey-client (v1.12) 在 POJO 中反序列化这个答案。

所以这是我当前的代码：

**档案POJO.java**

```
 @XmlRootElement( name = "dossiers" )
public class DossiersPOJO
{
    private List<DossierPOJO> dossiers;

    public List<DossierPOJO> getDossiers( )
    {
        return dossiers;
    }

    public void setDossiers( List<DossierPOJO> dossiers )
    {
        this.dossiers = dossiers;
    }
} 
```

**档案.java**

```
public class DossierPOJO
{
    private Long id;

    public Long getId( )
    {
        return id;
    }

    public void setId( Long id )
    {
        this.id = id;
    }
} 
```

和客户端代码本身：

```
WebResource siraWebResource = Client.create( ).resource(
                "http://localhost:8081/site/rest/path/resources" );

Builder accept = siraWebResource.accept( MediaType.APPLICATION_JSON_TYPE );
//        accept.accept( "application/json" );

DossiersPOJO dossierJson = accept.get( DossiersPOJO.class ); 
```

但是当我调用 get 时，我得到了这个错误堆栈：

```
log4j:WARN No appenders could be found for logger (org.springframework.core.env.StandardEnvironment).
log4j:WARN Please initialize the log4j system properly.
26 avr. 2012 17:18:03 com.sun.jersey.api.client.ClientResponse getEntity
GRAVE: A message body reader for Java class fr.paris.lutece.batches.ramen.bean.DossiersPOJO, and Java type class fr.paris.lutece.batches.ramen.bean.DossiersPOJO, and MIME media type application/json was not found
26 avr. 2012 17:18:03 com.sun.jersey.api.client.ClientResponse getEntity
GRAVE: The registered message body readers compatible with the MIME media type are:
*/* ->
  com.sun.jersey.core.impl.provider.entity.FormProvider
  com.sun.jersey.core.impl.provider.entity.MimeMultipartProvider
  com.sun.jersey.core.impl.provider.entity.StringProvider
  com.sun.jersey.core.impl.provider.entity.ByteArrayProvider
  com.sun.jersey.core.impl.provider.entity.FileProvider
  com.sun.jersey.core.impl.provider.entity.InputStreamProvider
  com.sun.jersey.core.impl.provider.entity.DataSourceProvider
  com.sun.jersey.core.impl.provider.entity.XMLJAXBElementProvider$General
  com.sun.jersey.core.impl.provider.entity.ReaderProvider
  com.sun.jersey.core.impl.provider.entity.DocumentProvider
  com.sun.jersey.core.impl.provider.entity.SourceProvider$StreamSourceReader
  com.sun.jersey.core.impl.provider.entity.SourceProvider$SAXSourceReader
  com.sun.jersey.core.impl.provider.entity.SourceProvider$DOMSourceReader
  com.sun.jersey.core.impl.provider.entity.XMLRootElementProvider$General
  com.sun.jersey.core.impl.provider.entity.XMLListElementProvider$General
  com.sun.jersey.core.impl.provider.entity.XMLRootObjectProvider$General
  com.sun.jersey.core.impl.provider.entity.EntityHolderReader 
```

我不知道问题出在哪里，因为我知道我的客户端 POJO 与服务器端完全相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T07:36:23.233

其实比我想象的要容易！第一次我的 pom.xml 只包含一个依赖项：

```
<dependency>
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-client</artifactId>
    <version>1.12</version>
</dependency> 
```

我发现 json 到对象的转换需要另一个依赖项：

```
<dependency>
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-json</artifactId>
    <version>1.12</version>
</dependency> 
```

而且，添加此依赖项就足够了，现在我的项目能够处理 json 响应并将其转换为 pojo 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T07:32:14.840

尝试以下操作：

```
List<DossierPOJO> dossierJson = accept.get(new GenericType<List<DossierPOJO>>() {}); 
```

您应该使用`GenericType`抽象来使用泛型。

UPD。如果您打算这样做，您可能应该将 JAXB 注释添加到您的 DossierPOJO 类中。

# android - Android将蓝牙连接传递给另一个活动

> ID：10336617
> 
> 赞同：1
> 
> 时间：2012-04-26T15:30:21.023
> 
> 标签：android, bluetooth

我正在开发一个用于控制机器人汽车的应用程序，该程序基于 BluetoothChat、BluetoothChatService 和 DeviceListActivity。

在我的第一个活动中，它用于连接蓝牙，如果连接成功则跳转到下一个活动。代码如下所示：

```
private BluetoothAdapter mBluetoothAdapter = null;
private BluetoothSocket mBluetoothSocket = null;
...

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    ...

}

@Override
public void onStart(){
    super.onStart();
    if(mService == null)
        setupControl();
}

@Override
public synchronized void onResume(){
    super.onResume();
    if(mService != null){
        if(mService.getState() == Service.STATE_NONE){
            mService.start();
        }
    }
}

@Override
public synchronized void onPause() {
    super.onPause();
}

@Override
public void onStop() {
    super.onStop();
}

@Override
public void onDestroy() {
    super.onDestroy();
    if (mService != null) mService.stop();
}

private void sendMessage(String message) {
    if (mService.getState() != Service.STATE_CONNECTED) {
        Toast.makeText(this, "not connect", Toast.LENGTH_SHORT).show();
        return;
    }
    if (message.length() > 0) {
        byte[] send = message.getBytes();       
        mService.write(send);       
    }
}

private final Handler mHandler = new Handler() {
    ...

};

public void onClick(View v){
    mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
    switch(v.getId()){
    case R.id.tgbn_bt:

        ...

        break;

    case R.id.bt_connect:
            if(mBluetoothDevice == null && tgbn_bt.isChecked()==true){
            bt_connect.setText("Connect");
            Intent intent = new Intent(this,DeviceListActivity.class);
            startActivityForResult(intent,REQUEST_CONNECT_DEVICE);  
        }
            ...
        }
            break;
        }
    }

public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    switch (requestCode) {

    case REQUEST_CONNECT_DEVICE:
        if (resultCode == Activity.RESULT_OK) {
            String address = data.getExtras().getString(DeviceListActivity.EXTRA_DEVICE_ADDRESS);
            mBluetoothDevice = mBluetoothAdapter.getRemoteDevice(address);
            UUID uuid = UUID.fromString("00001101-0000-1000-8000-00805f9b34fb");
            try{
                mBluetoothDevice.createRfcommSocketToServiceRecord(uuid);
            } catch (IOException e1){
                //TODO Auto-genterated catch block
                e1.printStackTrace();
            }       
            mService.connect(mBluetoothDevice);

        }
        break;  

}        
}
} 
```

服务程序是基于 BluetoothChatService 的，我只是对其进行了一些修改

```
public class Service extends Application{
// Debugging
private static final String TAG = "Service";
private static final boolean D = true;

// Name for the SDP record when creating server socket
private static final String NAME = "ProjectActivity";

// Unique UUID for this application
private static final UUID MY_UUID = UUID.fromString("00001101-0000-1000-8000-00805F9B34FB");

// Member fields
private final BluetoothAdapter mAdapter;
private final Handler mHandler;
private AcceptThread mAcceptThread;
private ConnectThread mConnectThread;
private ConnectedThread mConnectedThread;
private int mState;

// Constants that indicate the current connection state
public static final int STATE_NONE = 0;       // we're doing nothing
public static final int STATE_LISTEN = 1;     // now listening for incoming connections
public static final int STATE_CONNECTING = 2; // now initiating an outgoing connection
public static final int STATE_CONNECTED = 3;  // now connected to a remote device

/**
 * Constructor. Prepares a new BluetoothChat session.
 * @param context  The UI Activity Context
 * @param handler  A Handler to send messages back to the UI Activity
 */
public Service(Context context, Handler handler) {
    mAdapter = BluetoothAdapter.getDefaultAdapter();
    mState = STATE_NONE;
    mHandler = handler;
}

/**
 * Set the current state of the chat connection
 * @param state  An integer defining the current connection state
 */
private synchronized void setState(int state) {
    mState = state;

    // Give the new state to the Handler so the UI Activity can update
    mHandler.obtainMessage(ProjectActivity.MESSAGE_STATE_CHANGE, state, -1).sendToTarget();
}

/**
 * Return the current connection state. */
public synchronized int getState() {
    return mState;
}

/**
 * Start the chat service. Specifically start AcceptThread to begin a
 * session in listening (server) mode. Called by the Activity onResume() */
public synchronized void start() {

    setState(STATE_LISTEN);
}

/**
 * Start the ConnectThread to initiate a connection to a remote device.
 * @param device  The BluetoothDevice to connect
 */
public synchronized void connect(BluetoothDevice device) {

    // Cancel any thread attempting to make a connection
    if (mState == STATE_CONNECTING) {
        if (mConnectThread != null) {mConnectThread.cancel(); mConnectThread = null;}
    }

    // Cancel any thread currently running a connection
    if (mConnectedThread != null) {mConnectedThread.cancel(); mConnectedThread = null;}

    // Start the thread to connect with the given device
    mConnectThread = new ConnectThread(device);
    mConnectThread.start();
    setState(STATE_CONNECTING);
}

/**
 * Start the ConnectedThread to begin managing a Bluetooth connection
 * @param socket  The BluetoothSocket on which the connection was made
 * @param device  The BluetoothDevice that has been connected
 */
public synchronized void connected(BluetoothSocket socket, BluetoothDevice device) {

    // Cancel the thread that completed the connection
    if (mConnectThread != null) {mConnectThread.cancel(); mConnectThread = null;}

    // Cancel any thread currently running a connection
    if (mConnectedThread != null) {mConnectedThread.cancel(); mConnectedThread = null;}

    // Cancel the accept thread because we only want to connect to one device
    if (mAcceptThread != null) {mAcceptThread.cancel(); mAcceptThread = null;}

    // Start the thread to manage the connection and perform transmissions
    mConnectedThread = new ConnectedThread(socket);
    mConnectedThread.start();

    // Send the name of the connected device back to the UI Activity
    Message msg = mHandler.obtainMessage(ProjectActivity.MESSAGE_DEVICE_NAME);
    Bundle bundle = new Bundle();
    bundle.putString(ProjectActivity.DEVICE_NAME, device.getName());
    msg.setData(bundle);
    mHandler.sendMessage(msg);

    setState(STATE_CONNECTED);
}

/**
 * Stop all threads
 */
public synchronized void stop() {
    if (mConnectThread != null) {mConnectThread.cancel(); mConnectThread = null;}
    if (mConnectedThread != null) {mConnectedThread.cancel(); mConnectedThread = null;}
    if (mAcceptThread != null) {mAcceptThread.cancel(); mAcceptThread = null;}
    setState(STATE_NONE);
}

/**
 * Write to the ConnectedThread in an unsynchronized manner
 * @param out The bytes to write
 * @see ConnectedThread#write(byte[])
 */
public void write(byte[] out) {
    // Create temporary object
    ConnectedThread r;
    // Synchronize a copy of the ConnectedThread
    synchronized (this) {
        if (mState != STATE_CONNECTED) return;
        r = mConnectedThread;
    }
    // Perform the write unsynchronized
    r.write(out);
}

/**
 * Indicate that the connection attempt failed and notify the UI Activity.
 */
private void connectionFailed() {
    setState(STATE_LISTEN);

    // Send a failure message back to the Activity
    Message msg = mHandler.obtainMessage(ProjectActivity.MESSAGE_TOAST);
    Bundle bundle = new Bundle();
    bundle.putString(ProjectActivity.TOAST, "Unable to connect device");
    msg.setData(bundle);
    mHandler.sendMessage(msg);
    setState(STATE_NONE);
}

/**
 * Indicate that the connection was lost and notify the UI Activity.
 */
private void connectionLost() {
    setState(STATE_LISTEN);

    // Send a failure message back to the Activity
    Message msg = mHandler.obtainMessage(ProjectActivity.MESSAGE_TOAST);
    Bundle bundle = new Bundle();
    bundle.putString(ProjectActivity.TOAST, "Device connection was lost");
    msg.setData(bundle);
    mHandler.sendMessage(msg);
}

/**
 * This thread runs while listening for incoming connections. It behaves
 * like a server-side client. It runs until a connection is accepted
 * (or until cancelled).
 */
private class AcceptThread extends Thread {
    // The local server socket
    private final BluetoothServerSocket mmServerSocket;

    public AcceptThread() {
        BluetoothServerSocket tmp = null;

        // Create a new listening server socket
        try {
            tmp = mAdapter.listenUsingRfcommWithServiceRecord(NAME, MY_UUID);
        } catch (IOException e) {
            Log.e(TAG, "listen() failed", e);
        }
        mmServerSocket = tmp;
    }

    public void run() {
        setName("AcceptThread");
        BluetoothSocket socket = null;

        // Listen to the server socket if we're not connected
        while (mState != STATE_CONNECTED) {
            try {
                // This is a blocking call and will only return on a
                // successful connection or an exception
                socket = mmServerSocket.accept();
            } catch (IOException e) {
                Log.e(TAG, "accept() failed", e);
                break;
            }

            // If a connection was accepted
            if (socket != null) {
                synchronized (Service.this) {
                    switch (mState) {
                    case STATE_LISTEN:
                    case STATE_CONNECTING:
                        // Situation normal. Start the connected thread.
                        connected(socket, socket.getRemoteDevice());
                        break;
                    case STATE_NONE:
                    case STATE_CONNECTED:
                        // Either not ready or already connected. Terminate new socket.
                        try {
                            socket.close();
                        } catch (IOException e) {
                            Log.e(TAG, "Could not close unwanted socket", e);
                        }
                        break;
                    }
                }
            }
        }
        if (D) Log.i(TAG, "END mAcceptThread");
    }

    public void cancel() {
        if (D) Log.d(TAG, "cancel " + this);
        try {
            mmServerSocket.close();
        } catch (IOException e) {
            Log.e(TAG, "close() of server failed", e);
        }
    }
}

/**
 * This thread runs while attempting to make an outgoing connection
 * with a device. It runs straight through; the connection either
 * succeeds or fails.
 */
private class ConnectThread extends Thread {
    private final BluetoothSocket mmSocket;
    private final BluetoothDevice mmDevice;

    public ConnectThread(BluetoothDevice device) {
        mmDevice = device;
        BluetoothSocket tmp = null;

        // Get a BluetoothSocket for a connection with the
        // given BluetoothDevice
        try {
            tmp = device.createRfcommSocketToServiceRecord(MY_UUID);
        } catch (IOException e) {
            Log.e(TAG, "create() failed", e);
        }
        mmSocket = tmp;
    }

    public void run() {
        setName("ConnectThread");

        // Always cancel discovery because it will slow down a connection
        mAdapter.cancelDiscovery();

        // Make a connection to the BluetoothSocket
        try {
            // This is a blocking call and will only return on a
            // successful connection or an exception
            mmSocket.connect();
        } catch (IOException e) {
            connectionFailed();
            // Close the socket
            try {
                mmSocket.close();
            } catch (IOException e2) {
                Log.e(TAG, "unable to close() socket during connection failure", e2);
            }
            // Start the service over to restart listening mode
            Service.this.start();
            return;
        }

        // Reset the ConnectThread because we're done
        synchronized (Service.this) {
            mConnectThread = null;
        }

        // Start the connected thread
        connected(mmSocket, mmDevice);
    }

    public void cancel() {
        try {
            mmSocket.close();
        } catch (IOException e) {
            Log.e(TAG, "close() of connect socket failed", e);
        }
    }

}

/**
 * This thread runs during a connection with a remote device.
 * It handles all incoming and outgoing transmissions.
 */
private class ConnectedThread extends Thread {
    private final BluetoothSocket mmSocket;
    private final InputStream mmInStream;
    private final OutputStream mmOutStream;

    public ConnectedThread(BluetoothSocket socket) {
        mmSocket = socket;
        InputStream tmpIn = null;
        OutputStream tmpOut = null;

        // Get the BluetoothSocket input and output streams
        try {
            tmpIn = socket.getInputStream();
            tmpOut = socket.getOutputStream();
        } catch (IOException e) {
        }

        mmInStream = tmpIn;
        mmOutStream = tmpOut;
    }

    public void run() {
        Log.i(TAG, "BEGIN mConnectedThread");
        byte[] buffer = new byte[1024];
        int bytes;

        // Keep listening to the InputStream while connected
        while (true) {
            try {
                // Read from the InputStream
                bytes = mmInStream.read(buffer);

                // Send the obtained bytes to the UI Activity
                mHandler.obtainMessage(ProjectActivity.MESSAGE_READ, bytes, -1, buffer)
                        .sendToTarget();
            } catch (IOException e) {
                //connectionLost();
                break;
            }
        }
    }

    /**
     * Write to the connected OutStream.
     * @param buffer  The bytes to write
     */
    public void write(byte[] buffer) {
        try {
            mmOutStream.write(buffer);

            // Share the sent message back to the UI Activity
            mHandler.obtainMessage(ProjectActivity.MESSAGE_WRITE, -1, -1, buffer)
                    .sendToTarget();
        } catch (IOException e) {
        }
    }

    public void cancel() {
        try {
            mmSocket.close();
        } catch (IOException e) {
        }
    }
}} 
```

然后，我想将蓝牙连接传递给其他活动，例如控制面板活动：

```
 public class ControlMethodActivity extends Activity {
static final String[] m=new String[] {"Arrow_Multi-Touch","Arrow_8 Buttons","Test2"};
//private TextView view;
private String holder;
private Spinner spinner;
private Button bt_Ok;
private ArrayAdapter<String> adapter;
@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.control_method);

    bt_Ok = (Button) findViewById(R.id.bt_OK);
    bt_Ok.setOnClickListener(new OnClickListener(){
        public void onClick(View v){
            if(holder=="Arrow_Multi-Touch"){
                Intent i = new Intent(ControlMethodActivity.this,ArrowActivity.class);
                startActivity(i);
            }
            else if(holder=="Arrow_8 Buttons"){
                Intent i = new Intent(ControlMethodActivity.this,Arrow8Activity.class);
                startActivity(i);
            }
        }
    });

    spinner = (Spinner) findViewById(R.id.method_spinner);
    adapter = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item,m);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner.setAdapter(adapter);
    spinner.setOnItemSelectedListener(new Spinner.OnItemSelectedListener(){
        public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3){
            arg0.setVisibility(View.VISIBLE);
            holder = arg0.getSelectedItem().toString();         
        }

    public void onNothingSelected(AdapterView<?> arg0){

    }
});
    }} 
```

我应该怎么办？谢谢你的好建议和教导......

# objective-c - 在回合制游戏中辞职（游戏中心）

> ID：10336618
> 
> 赞同：2
> 
> 时间：2012-04-26T15:30:23.200
> 
> 标签：objective-c, game-center

我的辞职按钮后面有以下代码：

```
currentMatch.currentParticipant.matchOutcome = GKTurnBasedMatchOutcomeWon;
nextParticipant.matchOutcome = GKTurnBasedMatchOutcomeLost;
[currentMatch participantQuitInTurnWithOutcome:GKTurnBasedMatchOutcomeLost 
                               nextParticipant:nextParticipant matchData:data
                             completionHandler:^(NSError *error) {
                                                    if (error) {
                                                        NSLog(@"%@", error);
                                                    }
                                                    else {
                                                        [statusLabel setString:@"You resigned"];
                                                    }]; 
```

它说“你辞职”，但对手没有收到通知，轮到他了。对手现在不能出手，否则会出错。结束比赛的唯一方法是让对手也辞职。

任何人都可以看到上面的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T10:01:30.397

上面的代码没有任何问题。Way Game Center Turn 基于的作品是下一个玩家需要处理他的回合并决定游戏现在是否结束并退出或继续游戏（如果超过 2 个玩家更有意义）。所以这是你游戏代码的一部分。

只要您不再将已辞职的玩家设置为下一个参与者，您就应该能够继续玩。这是你做不到的。（如果你想继续游戏，你应该将结果设置为 GKTurnBasedMatchOutcomeQuit 而不是 Lost）

如果您真的想在那一刻为所有玩家结束游戏，您可以根据需要设置该比赛参与者的所有结果，然后使用

```
[currentMatch endMatchInTurnWithMatchData:data completionHandler:(void (^)(NSError *error))completionHandler]; 
```

结束所有玩家的游戏。

# ms-access - 折叠 MS 访问表

> ID：10336627
> 
> 赞同：3
> 
> 时间：2012-04-26T15:31:06.747
> 
> 标签：ms-access, ms-access-2007, collapse

我有一个类似于下面显示的示例源表的表，我想根据 ID 字段折叠它（请参阅示例折叠表）。我可以用代码做到这一点，但它会使我的 Access 数据库膨胀到超过 2 GB 的最大大小，所以我希望有一种方法可以通过查询来做到这一点。我可能应该注意到，对于任何给定的 ID 值，我不需要担心在字段一、二、三或四中具有多个值的记录。

示例源表：

```
ID  One Two  Three  Four
1   My       Is
1                   Matt
1       Name
2   My       Is     Matt
2       Name
3   My  Name Is     Matt 
```

折叠表示例：

```
ID  One Two   Three  Four
1   My  Name    Is   Matt
2   My  Name    Is   Matt
3   My  Name    Is   Matt 
```

提前感谢您提供的任何帮助或指导。

马特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T16:47:25.953

您可以使用按 ID 分组的聚合查询，并`Max()`为每个 ID 分组中的其他 4 列返回 。

```
SELECT
    ID,
    Max(One),
    Max(Two),
    Max(Three),
    Max(Four)
FROM tblSource
GROUP BY ID; 
```

如果要将结果存储在新表中，请将查询转换为“生成表查询”。如果您已经创建了目标表并希望将这些结果添加到其中，请将查询转换为“追加查询”。

如果您接近 2 GB db 文件大小限制，请首先使用压缩和修复来丢弃未使用的空间。如果 compact 没有给您足够的工作空间，请创建另一个 db 文件并将新的（折叠的）表存储在那里。您可以从原始数据库链接到它。

# c# - 消息队列服务重新启动后服务未收到消息

> ID：10336630
> 
> 赞同：9
> 
> 时间：2012-04-26T15:31:12.933
> 
> 标签：c#, msmq

我们有一个从 n 个消息队列接收消息的服务。但是，如果重新启动消息队列服务，消息检索服务将停止接收消息，即使在消息队列服务重新启动成功后也是如此。

我试图专门捕获消息检索服务中抛出的 MessageQueueException 并再次调用队列的 BeginReceive 方法。但是，在消息队列服务重新启动的大约 2 秒内，我得到了大约 1875 个异常实例，然后当我们的 StartListening 方法中抛出另一个 MessageQueueException 时，该服务停止运行。

有没有一种优雅的方法可以从消息队列服务重新启动中恢复？

```
 private void OnReceiveCompleted(object sender, ReceiveCompletedEventArgs e)
    {
        MessageQueue queue = (MessageQueue)sender;

        try
        {
            Message message = queue.EndReceive(e.AsyncResult);

            this.StartListening(queue);

            if (this.MessageReceived != null)
                this.MessageReceived(this, new MessageReceivedEventArgs(message));
        }
        catch (MessageQueueException)
        {
            LogUtility.LogError(String.Format(CultureInfo.InvariantCulture, StringResource.LogMessage_QueueManager_MessageQueueException, queue.MachineName, queue.QueueName, queue.Path));
            this.StartListening(queue);
        }            
    }

    public void StartListening(MessageQueue queue)
    {
        queue.BeginReceive();
    } 
```

我需要处理这导致的无限循环问题并稍微清理一下，但你明白了。

当 MessageQueueException 发生时，调用 RecoverQueue 方法。

```
 private void RecoverQueue(MessageQueue queue)
    {            
        string queuePath      = queue.Path;
        bool   queueRecovered = false;

        while (!queueRecovered)
        {
            try
            {
                this.StopListening(queue);
                queue.Close();
                queue.Dispose();

                Thread.Sleep(2000);

                MessageQueue newQueue = this.CreateQueue(queuePath);

                newQueue.ReceiveCompleted += new ReceiveCompletedEventHandler(this.OnReceiveCompleted);

                this.StartListening(newQueue);

                LogUtility.LogInformation(String.Format(CultureInfo.InvariantCulture, "Message queue {0} recovered successfully.", newQueue.QueueName));

                queueRecovered = true;
            }
            catch (Exception ex)
            {
                LogUtility.LogError(String.Format(CultureInfo.InvariantCulture, "The following error occurred while trying to recover queue: {0} error: {1}", queue.QueueName, ex.Message));                
            }
        }           
    }

    public void StopListening(MessageQueue queue)
    {
        queue.ReceiveCompleted -= new ReceiveCompletedEventHandler(this.OnReceiveCompleted);            
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T18:24:43.983

在收到服务重新启动导致的异常后，您必须释放旧的`MessageQueue`，即取消连接您的`ReceiveCompleted`事件、处理`MessageQueue`等。然后创建一个新实例并在新实例上再次`MessageQueue`连接到该事件。`ReceiveCompleted``MessageQueue`

或者，您可以使用轮询方法在某个时间间隔创建一个新实例，调用`MessageQueue.Receive(TimeSpan)`，将等待传入消息或直到发生超时。在这种情况下，您处理消息并销毁`MessageQueue`实例并再次开始迭代。

通过`MessageQueue`每次重新创建，您可以确保内置恢复。`MessageQueue`此外，由于底层队列的内部缓存，创建的开销是最小的。

伪代码...

```
while (!notDone)// or use a timer or periodic task of some sort...
{
    try
    {
        using (MessageQueue queue = new MessageQueue(queuePath))
        {
            Message message = queue.Receive(TimeSpan.FromMilliseconds(500));

            // process message
        }
    }
    catch (MessageQueueException ex)
    {
        // handle exceptions
    }
} 
```

# iphone - InAppSettingsKit 可以仅用于 Settings.app

> ID：10336634
> 
> 赞同：-1
> 
> 时间：2012-04-26T15:31:32.623
> 
> 标签：iphone, ios, inappsettingskit

我只想使用 InAppSettingsKit 来显示 iPhone 的 Settings.app 中的设置。我对应用内设置有不同的自定义设置。这可能吗？如何实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T16:02:21.850

> 要支持传统的 Settings.app 窗格，应用程序必须包含至少一个 Root.plist 的 Settings.bundle 以指定设置 UI 元素与 NSUserDefaults 键的连接。InAppSettingsKit 基本上只是使用相同的 Settings.bundle 来完成它的工作。这意味着当您想要包含新的设置参数时，无需额外的工作。它只需添加到 Settings.bundle 中，它就会出现在应用程序内和 Settings.app 中。支持所有设置类型，如文本字段、滑块、切换元素、子视图等。

按以下顺序搜索 plist：

InAppSettings.bundle/FILE~DEVICE.inApp.plist - InAppSettings.bundle/FILE.inApp.plist InAppSettings.bundle/FILE~DEVICE.plist InAppSettings.bundle/FILE.plist Settings.bundle/FILE~DEVICE.inApp.plist 设置。 bundle/FILE.inApp.plist Settings.bundle/FILE~DEVICE.plist Settings.bundle/FILE.plist

我希望它有帮助！

*编辑：*

InAppSettingsKit 库会按照我之前写的顺序自动搜索所有设置包。但是，settings.app 只搜索`Settings.bundle`. 因此，如果您想要为您的应用程序（使用 InAppSettingsKit）创建一个单独的设置文件，您可以`Settings.bundle`为您的设置应用程序创建一个，例如，`InAppSettings.bundle`为您的应用程序内设置创建一个。

# c# - C# - 如何将 SHA512 缩小到大小

> ID：10336636
> 
> 赞同：1
> 
> 时间：2012-04-26T15:31:43.250
> 
> 标签：c#, security, encryption, passwords, hash

基于先前答案的组合，我能够解决为哈希输出适当字符的问题。我仍然有长度问题，因为我得到的哈希比我关注的文档中预期的要长得多。API文档说，使用SHA512，有“FA35A0194E3BE7024CEFB1839CBFC922”作为示例参数，但是当我跑我的哈希测试仪，像“测试”一个简单的密码，以获得一个值传递到它，我得到“EE26B0DD4AF7E749AA1A8EE3C10AE9923F618980772E473F8819A5D4940E0DB27AC185F8A0E1D5F84F88BC887FD67B143732C304CC5FA9AD8E6F57F50028A8FF” - 这显然是多比我需要的更长。

仅供参考，这是我用来执行此操作的：

```
byte[] hashedPassword = HashAlgorithm.Create("SHA512").ComputeHash(new UTF8Encoding(false).GetBytes("test"));
Console.WriteLine(BitConverter.ToString(hashedPassword).Replace("-", "")); 
```

希望那里有人比我有更多的经验（多于没有）与这个哈希的东西。以某种方式缩小这样的值或取其一部分是否正常？我真的不知道从这里做什么。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-26T15:38:13.533

您要求提供 512 位哈希。512 位是 64 个字节。用十六进制写的 64 个字节是 128 个字符。因此，我不明白您为什么认为这里有问题。

> 这显然比我需要的要长得多。

为什么这么明显？

如果它比您需要的长得多，那么您**为什么首先要求 512 位哈希**？

> 以某种方式缩小这样的值或取其一部分是否正常？

**绝对不是**。

> 我真的不知道从这里做什么。

聘请专门编写安全软件的专业人员，他们可以为您编写软件并培训您进行正确的维护。您对编写安全软件的知识还不够，无法成功地做到这一点。编写安全系统是用任何语言*都能做到的最困难的事情之一。*编写一个实际上可以抵御攻击的系统需要多年的培训和经验。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-26T19:59:35.077

[FIPS PUB 180-4](http://csrc.nist.gov/publications/fips/fips180-4/fips-180-4.pdf)允许截断散列。添加截断版本的主要原因是 SH512 在某些 CPU 上比 SHA256 更快，因此截断 SHA512 可能是一个有趣的选择。但是，该标准对截断的哈希使用不同的初始值。这意味着您不能只使用现成的 SHA512 实现并截断结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-30T19:15:48.797

我不确定你是否明白这一点，但你可以将每个两字节十六进制字符转换为单字节。它看起来不像标准哈希，但它将是您期望的大小。

# java - 如何将 Android 程序连接到 localhost 服务器？

> ID：10336637
> 
> 赞同：3
> 
> 时间：2012-04-26T15:31:46.480
> 
> 标签：java, android, sockets, networking

我的服务器和客户端代码可以完美地用作 Java 应用程序。服务器在我的本地机器上运行并监听端口 4444。任何 Java 应用程序都可以轻松连接，但是当我将代码移至 Android 时，无论我尝试什么，我都会不断收到 IOException。我读到您必须将“localhost”更改为“10.0.2.2”，但我仍然收到 IOException。我从 whatsmyip.org 尝试了我的 IP 地址，但它仍然给了我一个 IOException。这是我的安卓代码...

```
package test.myPackage;

import java.io.IOException;
import java.net.Socket;
import java.net.UnknownHostException;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class TestProjectActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        TextView tv = new TextView(this);
        tv.setText("Hello, Android");
        setContentView(tv);

    Socket s = null;
    try {
        s = new Socket("10.0.2.2", 4444);
        tv.setText("socket: CONNECTED!");
    } catch (UnknownHostException e) {
        tv.setText("socket: unknown host");
    } catch (IOException e) {
        tv.setText("socket: IO Exception");
    }
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T17:56:20.517

首先确保您的应用具有互联网权限。

唯一可以使用 10.0.2.2 别名的情况是，如果您的应用程序在模拟器上运行并且想要联系在主机上运行的某些东西。这**不适**用于实际的 android 设备。

对于实际的 android 设备，您要么必须将设备与托管服务器的 PC 放在同一个 wifi 网络上，要么找到一种滥用网络共享解决方案的方法，通过 USB 电缆将它们放在同一个网络上，或者移动您的服务器到可以从 Internet 外部访问的机器，以便能够从设备的移动网络连接访问它。

EvilDuck 肯定有关于滥用 UI 线程的观点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:42:47.290

As I understand you are running Android client on a device in the same network as your server? Then you must use your servers internal IP. Localhost here will search servers on a device obviously.

whatsmyip.org will give you your external IP.

Make sure device is indeed on the same network, make sure you're using correct internal IP, make sure your server doesn't have any firewall blocking this port for LAN.

And for stop doing network activity on UI thread ffs!!!

# php - PHP 上的用户访问级别

> ID：10336642
> 
> 赞同：1
> 
> 时间：2012-04-26T15:32:08.347
> 
> 标签：php, security

我是 php 新手，目前正在创建一个电子商务网站。我为管理员创建了一个 CMS 后端来添加/编辑/删除产品、管理订单、管理商店配置和添加/编辑/删除用户。

我无法找到如何设置用户权限/访问权限，以便： - 普通员工只能访问管理订单 - 管理人员可以访问所有内容

所以基本上给用户一个角色，这会给他们限制或完全访问一切。

是否有任何教程或具有添加此功能的经验的任何人可以为我指明正确的方向？

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T15:46:29.507

@Johnathan 建议的替代设计是`user`HAS_MANY`roles`和每个`role`HAS_MANY `permissions`。

```
Users:
  + id
  + name

Roles:
  + id
  + name

Permissions:
  + id
  + name 
```

然后将用户链接到他们的每个角色（以及角色到他们的每个权限），如下所示：

```
RolesUsers:
  + id
  + role_id  /* Associate a Role to a User */
  + user_id  /* Associate a User to a Role */

RolePermissions:
  + id
  + role_id       /* Associate a Role to a Permission */
  + permission_id /* Associate a Permission to a Role */ 
```

而不是级联角色，或者只允许一个用户担任一个角色——拥有多个角色的用户提供了最大的灵活性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T15:38:38.087

权限与角色相关联，用户与角色相关联。毫无疑问，有很多方法可以实现这种类型的系统，下面是一个快速的概念，您可以从中开始思考：

```
Users:
  + userid
  + roleid /* Associate a Role to a User */

Roles:
  + roleid
  + rolename

Permissions:
  + permissionid
  + permissionname

RolePermissions:
  + roleid
  + permissionid /* Associate a Permission to a Role */ 
```

请注意第一个表中的角色是如何直接从用户表中关联的。如果您想为一个用户分配多个角色，您可以将其分解并放在自己的表中。

一旦这一切到位，或类似的东西，您可以通过会话变量跟踪用户的角色，并通过查找该操作的 ID/名称来确定是否允许用户执行任何给定的操作，以及RolePermissions 表中其角色的 ID/名称。

```
if ( $user->allowed( 'deleteUser' ) ) {
  $users->remove( $uid );
} 
```

当然数据库端只是工作的第一部分。接下来，您需要实现数据库和代码之间的连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T15:45:10.173

有几种方法可以做到这一点，这取决于您的应用程序将如何增长。如果你很确定你只有这两个配置文件，那么只需在“用户”表中添加一个“配置文件”字段。

我想您已经实现了登录管理，那么您可能会将登录的用户 ID 保留在会话中。只需保留配置文件类型，并且每次显示某些仅应由经理访问的组件时，将其包装在

```
<?php if ($_SESSION['logged_user_profile'] == 'manager'): ?>
<!-- display your thing here -->
<?php endif; ?> 
```

请注意，这只会隐藏元素。您还必须在代码中的任何地方执行此检查，以防止执行相应的操作......

例如，如果您使用像 CodeIgniter 这样的 MVC 框架，一个（更好）的方法是通过您的访问控制器挂钩所有请求，如果他试图访问他不允许访问的内容，则将用户重定向到“访问禁止”页面。这样，您的访问权限仅在一个地方受到控制。

好吧，这是一个复杂的主题，很大程度上取决于您的项目体系结构，如果这不能正确回答您的问题，我们深表歉意。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T15:47:41.253

从乔纳森的结构延伸，我做了一些修改：

```
Users:
  + userid
  + roleid /* Associate a Role to a User */

Roles:
  + roleid
  + rolename
  + roleinherit /* Added this field */

Permissions:
  + permissionid
  + permissionname

RolePermissions:
  + roleid
  + permissionid /* Associate a Permission to a Role */ 
```

能够从其他角色继承确实有助于简化访问控制。例如，您可以说“主持人”角色继承了“用户”角色，而“用户”角色又继承了“访客”角色。这样一来，您就永远不会有客人可以做连版主都做不到的事情。

当然，这种结构可能更难实现，因为您不能再创建一个简单的查询来检查。处理这些问题的一个好方法是创建一个递归函数，该函数为用户角色提取数据，然后将其与继承角色的此函数的结果合并。

```
function getPermissions($roleID) {
    // get info about this role and store it in $permissions. Assume we also set $inheritFrom
    if ($inheritFrom == 0) return $permissions;
    else return array_merge($permissions, getPermissions($inheritFrom));
} 
```

确保缓存此函数的结果，因为它可能会变得很重。

# android - 将音频剪辑 x 播放到剪辑中

> ID：10336643
> 
> 赞同：0
> 
> 时间：2012-04-26T15:32:13.277
> 
> 标签：android, audio, unity3d

我希望将时间设置为我们开始播放的音频剪辑。

所以我可以使用“时间进度条”将点设置到我们播放的音频中。

就像在媒体播放器中一样，您可以在曲目中向前跳过。

统一音频类是否有可以完成此操作的功能，或者是否可以添加它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T00:46:38.443

[http://unity3d.com/support/documentation/ScriptReference/AudioSource-time.html](http://unity3d.com/support/documentation/ScriptReference/AudioSource-time.html)

[http://unity3d.com/support/documentation/ScriptReference/AudioSource-timeSamples.html](http://unity3d.com/support/documentation/ScriptReference/AudioSource-timeSamples.html)

# retina-display - 如何在 Google 的静态地图 API 中使用带有比例参数的高分辨率自定义标记？

> ID：10336646
> 
> 赞同：24
> 
> 时间：2012-04-26T15:32:22.257
> 
> 标签：retina-display, google-static-maps

我们使用 Google 的静态地图 API 和[scale 参数](https://developers.google.com/maps/documentation/staticmaps/#scale_values)为使用高分辨率显示器的人显示可爱的平滑地图。但是，我们还想使用[自定义图标](https://developers.google.com/maps/documentation/staticmaps/#CustomIcons)在地图上显示点。

不幸的是，我找不到任何不会[像本例那样](http://maps.googleapis.com/maps/api/staticmap?size=100x100&markers=icon:http://i.stack.imgur.com/uE37r.png%7C224%20West%2020th%20Street%20NY%7C75%209th%20Ave%20NY%7C700%20E%209th%20St%20NY&sensor=false&scale=2)给出像素化图标的方法。有没有办法不放大图标？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-06-16T05:09:43.043

该`&markers`参数现在有一个（未记录的）`scale`描述符。使用参数时将其设置为@2x 标记图像 URL`2`并将描述符设置为。就像是：`icon``&scale=2`

`&markers=scale:2|icon=icon@2x.png&scale=2`

来源：[https ://groups.google.com/d/msg/google-maps-api/_METlecmeO4/JNyfkguoO7QJ](https://groups.google.com/d/msg/google-maps-api/_METlecmeO4/JNyfkguoO7QJ)

# c++ - 在 C++ 中正确使用异常

> ID：10336652
> 
> 赞同：5
> 
> 时间：2012-04-26T15:32:46.390
> 
> 标签：c++, exception, coding-style, exception-handling, runtime-error

在 C++ 中，我应该使用`std::runtime_error`来指示发生了某种错误，还是应该创建继承自的自定义异常，`std::runtime_error`以便更好地处理它们。

例如，如果我以某种方式从用户那里获得输入，那会更好：

```
if (inputInvalid)
{
    throw std::runtime_error("Invalid input!");
} 
```

相对...

```
class invalid_input
    : public std::runtime_error /* or should I inherit from std::exception? */
{
public:
    invalid_input()
        : std::runtime_error("Invalid input!")
    {
    };
};

-------------------------------------------------------

if (inputInvalid)
{
    throw invalid_input();
} 
```

哪个被认为更好地使用异常处理/哪个更好？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T15:40:14.950

我只会在以下两种情况之一中子类化标准异常类：

1.  没有一个标准异常类具有描述我的异常性质的名称
2.  我的异常需要比标准异常（即描述错误的字符串）中找到的更多信息。

否则，没有多大意义。特别是如果其他人必须与您的代码交互并想知道为什么有一个自定义异常类不做任何标准异常不做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T15:37:57.570

始终考虑从继承 std::runtime_error 中获得什么。它是否让您更容易处理错误？在示例代码中，它没有带来任何好处，所以如果它所做的一切都是一样的，那么从 std::runtime_error 继承是没有意义的。如果您想添加比 std::runtime_error 更多的信息，那么您可能需要继承这些信息并将其添加到您的错误类中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T15:42:06.687

这将取决于项目的规模。如果您在做一些小事情并且只需要一些快速而肮脏的东西，那么 std:runtime_error 就可以了。但是，如果您从事一个大型项目，您将希望创建自己的自定义异常来帮助管理（通过捕获）所有不同的可能性。否则现在如果你抓到了，你就会抓到所有的东西，如果你需要用不同的方法来处理多个不同的东西，这可能是个问题。

我也会读这个：

[区别：std::runtime_error 与 std::exception()](https://stackoverflow.com/questions/1569726/difference-stdruntime-error-vs-stdexception)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T17:03:33.987

在您给出的示例中，我将为您的 invalid_input 类继承 std::exception() 。通常，用户输入错误不被视为运行时错误，您可能希望更早地捕获它，您可能希望在它发生时执行不同的逻辑。在这种情况下，在大多数情况下从 runtime_exception 使用或子类化会导致“is a”测试失败。

# string - 在 Perl 中，如何生成由八个十六进制数字组成的随机字符串？

> ID：10336660
> 
> 赞同：12
> 
> 时间：2012-04-26T15:33:08.543
> 
> 标签：string, random, activeperl, perl

使用 Perl，不使用 ActivePerl 不附带的任何额外模块，如何创建从 0-F 的 8 个字符的字符串。例子`0F1672DA`？填充应该是可控的，最好是 8 个字符。

我想生成的字符串类型的更多示例：

```
28DA9782
55C7128A 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-26T15:39:34.077

原则上，你应该能够做到

```
#!/usr/bin/env perl

use strict; use warnings;

for (1 .. 10) {
    printf "%08X\n", rand(0xffffffff);
} 
```

但是，您可能会发现——至少在某些带有一些`perl`s（如果不是全部）的系统上—— 的[范围`rand`被限制为 32,768 个值](http://blog.nu42.com/2010/09/be-vary-of-using-built-in-rng-for.html)。

您还可以研究[String::Random](http://search.cpan.org/perldoc/String::Random)的源代码，了解如何生成满足其他条件的随机字符串。

但是，我对使用内置`rand`Windows 系统的警告仍然存在。有关高质量 RNG，请参阅[Math::Random::MT 。](http://search.cpan.org/perldoc/Math::Random::MT)

```
#!/usr/bin/env perl

use strict; use warnings;

my @set = ('0' ..'9', 'A' .. 'F');
my $str = join '' => map $set[rand @set], 1 .. 8;
print "$str\n"; 
```

PS：[Perl 在 Windows 上的 rand 问题在 5.20 中得到修复](https://metacpan.org/pod/release/RJBS/perl-5.20.0/pod/perldelta.pod#rand-now-uses-a-consistent-random-number-generator)：

> 这意味着 perl 随机数的质量会因平台而异，从 Windows 上的 15 位 rand() 到 POSIX 平台上的 48 位，例如带有 drand48() 的 Linux。
> 
> Perl 现在在所有平台上都使用它自己的内部 drand48() 实现。这不会使 perl 的 rand 加密安全。[perl #115928]

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-26T15:40:04.967

一般示例，允许任何范围的字符：

```
my @chars = ('0'..'9', 'A'..'F');
my $len = 8;
my $string;
while($len--){ $string .= $chars[rand @chars] };
print "$string\n"; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-26T15:40:50.503

```
sprintf("%08X", rand(0xFFFFFFFF)) 
```

有些人提到 rand 的 windows 限制和 rand(0x7FFF) 或 rand(32768) 十进制的最大值，我会用二进制移位运算符 '<<' 来克服这个问题

```
# overcomes the windows-rand()-only-works-with-max-15bit-(32767)-limitation:
#   needed 8*4==32bit random-number:
#     first get the 15 high-significant bits shift them 17bits to the left,
#     then the next 15bits shifted 2 bits to the left,
#     then the last 2 bits with no shifting:
printf( '%08X', (
    (rand(0x8000)<<17) + (rand(0x8000)<<2) + rand(0b100) )
      ); 
```

但我认为这只是学术性的，因为它确实是难以理解的笨拙代码。
我不会在实际代码中使用它，只有在速度最重要的情况下。
但也许它是最快的解决方案，它展示了一种模式来克服 Windows 下 rand() 函数的限制......

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-26T15:39:19.490

用于[`sprintf`](http://perldoc.perl.org/functions/sprintf.html)将数字转换为十六进制。

```
$foo .= sprintf("%x", rand 16) for 1..8; 
```

# knockout.js - 预定义下拉列表中的选定值

> ID：10336664
> 
> 赞同：9
> 
> 时间：2012-04-26T15:33:28.927
> 
> 标签：knockout.js

我有以下问题：

我有一个可观察的对象数组，格式为`{ isSelected: false, Message: "Test1" }, { isSelected: true, Message: "Test2"}`. 我正在从此可观察数组的视图中生成一个选择列表。我希望预先选择具有属性 isSelected = true 的值（在此示例中为： Message: "Test2"）。这是我的代码：

昏死：

```
function ViewModel()
{

    this.DummyOptions = ko.observableArray([{ isSelected: false, Message: "Test1" }, { isSelected: true, Message: "Test2"}]);
    this.selectedValue = ko.observable();
}

ko.applyBindings(new ViewModel()); 
```

html:

```
<div>
Dummy
<select id="dummy" data-bind="options: DummyOptions, optionsText: 'Message'"></select>
</div> 
```

小提琴：http: [//jsfiddle.net/PsyComa/RfWVP/52/](http://jsfiddle.net/PsyComa/RfWVP/52/)

我相信这会很简单，但我对淘汰赛很陌生，我无法按预期工作。任何有关工作代码的帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-26T21:17:50.403

你是对的，这对于knockout.js来说确实很简单。

可以使用 "value" 绑定将 observable 绑定到当前选择的选项：

```
<select data-bind="options: DummyOptions,
                   optionsText: 'Message',
                   value: selectedValue"></select> 
```

现在，只需使用带有“isSelected == true”的对象作为这个 observable 的初始值：

```
function ViewModel() {
    this.DummyOptions = ko.observableArray([...]);

    // Filter the array to find the first element with isSelected == true
    var selectedOption = ko.utils.arrayFirst(this.DummyOptions(), function(item) {
        return item.isSelected;
    });

    // Use this option as the initial value
    this.selectedValue = ko.observable( selectedOption );
} 
```

[http://jsfiddle.net/RfWVP/54/](http://jsfiddle.net/RfWVP/54/)

# php - 覆盖 Symfony 2 异常？

> ID：10336665
> 
> 赞同：7
> 
> 时间：2012-04-26T15:33:29.180
> 
> 标签：php, symfony

根据此文档页面：

[http://symfony.com/doc/current/cookbook/controller/error_pages.html](http://symfony.com/doc/current/cookbook/controller/error_pages.html)

Symfony 使用 TwigBundle 来控制异常的显示。但是，我不希望自定义显示，如文档中所述，我希望覆盖它。我正在开发一个小型 REST API，我想覆盖对我的包的 TwigBundle 调用，进行我自己的异常处理（在 REST 方面：映射正确的 HTTP 状态代码和纯文本正文响应）。

我找不到任何关于此的内容，并且手册上的参考不是那么好，特别是在内核部分。也许有人已经这样做了，可以帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-26T15:52:19.793

You should create a listener that listens on `kernel.exception` event. In `onKernelException` method of that listener you can check for your exception e.g

On exception listener class

```
 //namespace declarations
  class YourExceptionListener
  {

      public function onKernelException(GetResponseForExceptionEvent $event)
      {
        $exception =  $event->getException();
        if ($exception instanceof YourException) {
            //create response, set status code etc.
            $event->setResponse($response); //event will stop propagating here. Will not call other listeners.
        }
      }
  } 
```

The service declaration would be

```
 //services.yml
 kernel.listener.yourlisener:
  class: FQCN\Of\YourExceptionListener
  tags:
    - { name: kernel.event_listener, event: kernel.exception, method: onKernelException } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T15:40:59.683

Bellow 是我的 AppKernel.php 的一部分，用于禁用 Symfony 对 JSON 请求的内部异常捕获，（您可以覆盖`handle`方法而不是创建第二个方法）

```
use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\HttpKernel\HttpKernelInterface;
use Symfony\Component\HttpKernel\Kernel;
use Symfony\Component\Config\Loader\LoaderInterface;

class AppKernel extends Kernel {
  public function init() {
    parent::init();

    if ($this->debug) {
      // workaround for nasty PHP BUG when E_STRICT errors are reported
      error_reporting(E_ALL);
    }
  }

  public function handleForJson(Request $request,
                                $type = HttpKernelInterface::MASTER_REQUEST,
                                $catch = true
  ) {
    return parent::handle($request, $type, false);
  }
  ... 
```

# javascript - 逗号前或逗号结束的正则表达式

> ID：10336669
> 
> 赞同：1
> 
> 时间：2012-04-26T15:33:41.470
> 
> 标签：javascript, regex

我不太擅长正则表达式。

我有一个像这样的字符串：

```
var bigString = 'abc,xyz,def'; 
```

我想创建一个正则表达式，它在末尾查找前面的逗号或逗号。

例如：

有效的表达式为：abc, ,xyz, ,def

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T15:36:04.483

那么，正则表达式将是：

```
/(?:,[A-Za-z]+)|(?:[A-Za-z],)/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T15:39:37.197

```
/(,\w+)|(\w+,)/ 
```

这将显式匹配逗号位于字符串开头或结尾的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T15:38:10.310

**这应该有效：（**更新）

```
/(,[\w]+)|([\w]+,)/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T17:16:30.943

如果您要强制使用表格，我会使用它。
它将字符串 1,2 或 3 验证为一个或多个带有逗号的 alpha 字符，前后或两者都有。

```
string1 = 'abc,'
string2 = ',xyz,'
string3 = ',def'

/^(?:[a-z]+,|,[a-z]+,?)$/i 
```

# c# - .NET WinForms 应用程序在退出时因未处理的 System.NullReferenceException 而崩溃

> ID：10336671
> 
> 赞同：0
> 
> 时间：2012-04-26T15:33:52.583
> 
> 标签：c#, .net, winforms, backgroundworker, unhandled-exception

我有一个 WinForms 应用程序，其中包含一个带有后台工作人员的表单。该表单包含一个通过 RunWorkerAsync() 启动后台工作程序的按钮和另一个将退出应用程序的按钮。大约有 1/3 的时间，在后台工作人员完成其工作后，我单击退出按钮后应用程序将崩溃，并出现如下异常：

```
System.NullReferenceException was unhandled
  Message=Object reference not set to an instance of an object.
  Source=System.Drawing
  StackTrace:
       at System.Drawing.Graphics.Dispose(Boolean disposing)
       at System.Drawing.Graphics.Finalize() 
```

这是退出应用程序的按钮的事件处理程序：

```
 private void buttonExit_Click(object sender, EventArgs e)
    {
        if (!buttonStartWorker.Enabled)
        {
            DialogResult dr = MessageBox.Show("Background worker is still running!  Exit anyway?", "Confirmation", MessageBoxButtons.YesNo, MessageBoxIcon.Warning);

            if (dr == DialogResult.OK)
            {
                backgroundWorker.CancelAsync();
                Close();
            }
        }
        else
        {
            Close();
        }
    } 
```

正如我之前所说，当后台工作程序仍在运行时，我不会退出应用程序，因此我们在这里查看的代码路径只是 Close() 调用。还有一个 FormClosing 事件处理程序，它在我的 USB 相关句柄上调用 close 和 dispose 方法。该代码如下：

```
 private void MainForm_FormClosing(object sender, FormClosingEventArgs e)
    {
        try
        {
            // close and dispose all open handles to the USB device
            if (hidHandle != null)
            {
                if (!(hidHandle.IsInvalid))
                {
                    hidHandle.Close();
                    hidHandle.Dispose();
                }
            }

            if (readHandle != null)
            {
                if (!(readHandle.IsInvalid))
                {
                    readHandle.Close();
                    readHandle.Dispose();
                }
            }

            if (writeHandle != null)
            {
                if (!(writeHandle.IsInvalid))
                {
                    writeHandle.Close();
                    writeHandle.Dispose();  // unhandled exception seems to occur after this
                }
            }
        }
        catch (Exception ex)
        {
            Debug.WriteLine(ex.ToString());
        }
    } 
```

在 writeHandle.Dispose() 和应用程序实际退出之间的某个时间，会发生此异常。最让我感到困惑的是，我的代码从未明确使用 System.Drawing，所以我很难追踪到这一点。

对于它的价值，我的后台工作人员执行以下操作：

1.  它从 USB 设备读取和写入一些数据
2.  它创建一个 Web 客户端来下载一些数据
3.  它进行了一些 SOAP 调用

当应用程序（未明确使用 System.Drawing）退出时，是否有人对可能导致 System.Drawing 中未处理的 NullReferenceException 的原因有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T03:16:54.143

尽管 KeithS 的回答原则上是正确的，但您的代码似乎确实存在明显问题。您在调用`this.Close();`CancelAsync() 后立即调用。我会尝试等待后台工作人员完成其业务或订阅已取消的事件（如果存在）。

您的后台工作人员很可能尚未完成。另请注意，后台工作人员是与表单的事件层次结构相关的组件。

尝试创建一个新任务：

`this.BeginInvoke(new Action(() => (Thread.Sleep(1000); this.Close();)));`.

抱歉语法不正确，但我不在开发机器上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:44:28.393

While your program may not use System.Drawing explicitly, that namespace is all over most WinForms object code. It appears that somewhere in your form, one GUI object is given a reference to another object's Graphics handle, which it then thinks it has to destroy; but, the control that owns that handle has already been disposed, or the Graphics object itself has had its Dispose method called explicitly, and so the Dispose() code fails when run the second time. I would have expected the .NET developers to put in checks to make sure a double-Dispose wouldn't be a problem, but it appears in this case they overlooked it.

Without knowing exactly what you have on your windows form, and exactly which instance of System.Drawing.Graphics is throwing out, I can't really help further. That would be where I'd investigate further; try to discover the exact instance being disposed, what other object owns it, and why it's being finalized after already being disposed (usually if explicitly disposed, a call to GC.SuppressFinalize() should be made).

One of the "reflected" codebase references may help you out; look for System.Drawing.Graphics.Dispose(bool disposing), and browse for any line of code that would fail if run twice in a row. That may give you a hint.

# java - 每个 UDP 数据报的 Netty 不同的管道

> ID：10336672
> 
> 赞同：3
> 
> 时间：2012-04-26T15:33:56.093
> 
> 标签：java, udp, nio, netty

我们有一个已经在 TCP/IP 中实现的服务器，但我们现在需要该协议也支持 UDP。

发送的每个 UDP 数据报都包含我需要解码的所有内容，因此它是一个非常简单的回复和响应系统，数据报中的数据由换行符分隔。

服务器启动时的引导代码如下所示：

```
 //SETUP UDP SERVER
    DatagramChannelFactory udpFactory = new NioDatagramChannelFactory(Executors.newCachedThreadPool());

    ConnectionlessBootstrap udpBootstrap = new ConnectionlessBootstrap(udpFactory);

    udpBootstrap.setOption("sendBufferSize", 65536);
    udpBootstrap.setOption("receiveBufferSize", 65536);
    udpBootstrap.setOption("receiveBufferSizePredictorFactory", new AdaptiveReceiveBufferSizePredictorFactory());

    udpBootstrap.setOption("broadcast", "true");
    udpBootstrap.setPipelineFactory(new ServerPipeLineFactoryUDP());
    udpBootstrap.bind(new InetSocketAddress(hostIp, 4000)); 
```

管道代码是：

```
class ServerPipeLineFactoryUDP implements ChannelPipelineFactory
{

    private final static ExecutionHandler EXECUTION_HANDLER = new ExecutionHandler(new OrderedMemoryAwareThreadPoolExecutor(ScorpionFMS.THREAD_POOL_COUNT, 0, 0));

    public ServerPipeLineFactoryUDP()
    {

    }

    @Override
    public ChannelPipeline getPipeline() throws Exception
    {

    ChannelPipeline pipeline = pipeline();
    pipeline.addLast("debugup", new DebugUpstreamHandler("UDP"));
    pipeline.addLast("debugdown", new DebugDownstreamHandler("UDP"));

    pipeline.addLast("framer", new DelimiterBasedFrameDecoder(256, Delimiters.lineDelimiter()));

    pipeline.addLast("decoder", new UDPRequestDecoder(true));
    pipeline.addLast("encoder", new StringEncoder());
    pipeline.addLast("executor", EXECUTION_HANDLER);
    pipeline.addLast("handler", new UDPRequestHandler(

    return pipeline;
    }
} 
```

我遇到的问题是每个数据报都使用该管道的相同实例（我希望每个数据报都使用管道的新实例），因此我在处理数据报内容时存储的所有状态都被保存，下一个数据报使用它也是如此，（而对于 TCP，每个连接都有自己的通道，因此有自己的管道实例和自己的状态）

我知道这是阅读文档的预期行为，但是无论如何强制netty为每个数据报重新创建管道？还是我以完全错误的方式解决这个问题？

简而言之，我希望每个数据报都有一个新的管道实例（与 tcp 相同）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T11:21:21.997

就像我在 IRC 中所说的那样，我认为这可以做你想做的，或者至少给你一些想法。

```
public class Example {

    public static void main(String[] args) {
        final ChannelPipelineHandlerImpl perDatagramFactory = new ChannelPipelineHandlerImpl();

        DatagramChannelFactory udpFactory = new NioDatagramChannelFactory(Executors.newCachedThreadPool());

        ConnectionlessBootstrap udpBootstrap = new ConnectionlessBootstrap(udpFactory);

        udpBootstrap.setPipelineFactory(new ChannelPipelineFactory() {

            public ChannelPipeline getPipeline() throws Exception {
                return Channels.pipeline(new DistinctChannelPipelineHandler(perDatagramFactory));
            }
        });

    }

    private static final class DistinctChannelPipelineHandler implements ChannelDownstreamHandler, ChannelUpstreamHandler {
        private ChannelPipelineFactory factory;

        public DistinctChannelPipelineHandler(ChannelPipelineFactory factory) {
            this.factory = factory;
        }

        public void handleUpstream(ChannelHandlerContext ctx, ChannelEvent e) throws Exception {
            ChannelPipeline pipeline = factory.getPipeline();
            pipeline.attach(ctx.getChannel(), ctx.getPipeline().getSink());
            pipeline.sendUpstream(e);

            ctx.sendUpstream(e);

        }

        public void handleDownstream(ChannelHandlerContext ctx, ChannelEvent e) throws Exception {
            ChannelPipeline pipeline = factory.getPipeline();
            pipeline.attach(ctx.getChannel(), ctx.getPipeline().getSink());
            pipeline.sendDownstream(e);

            ctx.sendDownstream(e);
        }

    }

    private static final class ChannelPipelineHandlerImpl implements ChannelPipelineFactory {

        public ChannelPipeline getPipeline() throws Exception {
            // Add your handlers here
            return Channels.pipeline();
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T16:25:34.137

我不确定如何处理 UDP 通道，但如果每个数据报的通道不同，您可以将状态存储在[ChannelLocal](http://netty.io/docs/stable/api/org/jboss/netty/channel/ChannelLocal.html)中。

# c# - 使用通配符/正则表达式在 AD 中搜索用户？

> ID：10336674
> 
> 赞同：1
> 
> 时间：2012-04-26T15:33:57.147
> 
> 标签：c#, active-directory

我已经知道如何搜索广告，但是为了获得搜索结果，我的搜索必须准确。我不能只做精确的。问题是我必须根据电话号码查找用户，而这些可以用与输入它们的人一样多的格式编写。我的输入始终是 MSISDN，只是数字，中间没有空格或多余的字符，AD 中的字段绝非如此简单。

如何在不检索所有用户的情况下搜索此类号码并在软件中进行扫描。

例如，我正在查看“mobile”和“telephoneNumber”字段。

例如，AD 中的数字可能是“+45 12 34 56 78”或“(555) 1234”，尽管后者几乎没有资格作为有效的 MSISDN，但想法是一样的，从计算机上看到的各种疯狂看法。如果我查找所有用户，我可以通过删除所有非数字来生成 MSISDN，但我怀疑如果我每次需要查找数字时都开始转储他们的整个 AD，企业是否会高兴。

示例代码：

```
 String domain = "example.com";
        String msisdn = "4512345678";

        // create your domain context
        PrincipalContext ctx = new PrincipalContext(ContextType.Domain, domain);

        DirectorySearcher ds = new DirectorySearcher(ctx.ConnectedServer);

        ds.Filter = String.Format("(mobile={0})", msisdn);

        ds.PropertiesToLoad.Add("cn");
        ds.PropertiesToLoad.Add("sn");
        ds.PropertiesToLoad.Add("name");
        ds.PropertiesToLoad.Add("mail");
        ds.PropertiesToLoad.Add("mobile");
        ds.PropertiesToLoad.Add("telephoneNumber");

        foreach (SearchResult de in ds.FindAll())
        {
            Console.WriteLine("");
            foreach (String key in de.Properties.PropertyNames)
            {

                Console.WriteLine("{0}: {1}", key.PadRight(30, '.'), de.Properties[key].Count);
                int i = 1;
                foreach (String prop in de.Properties[key])
                {
                    Console.WriteLine("{0}: {1}", (String.Format("[{0}]", (i++)).PadLeft(30, ' ')), prop);
                }
            }
            Console.WriteLine("");
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T17:56:09.097

您可以将通配符放入过滤器中。我有一个类似的程序，我在其中搜索名称以输出电话号码。

我这样过滤：

```
static SearchResultCollection GetUsers(string target)
    {
        DirectoryEntry domain = new DirectoryEntry(<removed fqdn>);
        DirectorySearcher searcher = new DirectorySearcher(domain);
        searcher.Filter = "(&(objectClass=User)(displayName=*" + target + "*))";
        searcher.Sort = new SortOption("displayName", SortDirection.Ascending);
        return searcher.FindAll();
    } 
```

# c# - 在混合 MVC3 项目中，剃刀视图优先于 aspx

> ID：10336677
> 
> 赞同：1
> 
> 时间：2012-04-26T15:34:06.873
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我已将旧的 MVC2 项目转换为 MVC3。现在我有了 .aspx 视图和 razor .cshtml。

假设我有一个与控制器（`HomeController`、`Index`动作和`~\Views\Home\Index.aspx`）关联的视图，同时我仍然有完全不同 的视图`~\Views\Shared\Index.aspx`。

通常，当`Index`Action 调用`View()`它时，它会呈现`~\Views\Home\Index.aspx`. 但是，如果我将视图转换为剃刀视图，则使用相同的操作而不是渲染`~\Views\Home\Index.cshtml`调用 `~\Views\Shared\Index.aspx`。

所以我猜MVC优先考虑.aspx页面而不是.cshtml。也许我需要更改 web.config 文件中的某些内容，因为现在我必须明确告诉它要获取哪个视图：

```
View("~\Views\Home\Index.cshtml") 
```

即使我放弃了扩展`View("~\Views\Home\Index")`，它仍然会调用共享的 .aspx 视图，尽管我有正确的路径。是不是很奇怪？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T15:51:05.427

您遇到的问题是 MVC 视图的默认优先级。这是默认值：

```
~/Views/Home/Index.aspx
~/Views/Home/Index.ascx
~/Views/Shared/Index.aspx
~/Views/Shared/Index.ascx
~/Views/Home/Index.cshtml
~/Views/Home/Index.vbhtml
~/Views/Shared/Index.cshtml
~/Views/Shared/Index.vbhtml 
```

如您所见，它优先于所有 aspx/ascx 文件，即使在共享目录中，也优先于类似的 razor 视图。

一种解决方案是[让 MVC Razor 偏爱 .cshtml 而不是 .aspx](https://stackoverflow.com/questions/8434015/get-mvc-razor-favor-cshtml-over-aspx)，**但是此解决方案不会重新关联 aspx/ascx 文件**。所以你需要类似的东西：

```
protected void Application_Start() 
{ 
  ViewEngines.Engines.Clear(); 
  ViewEngines.Engines.Add(new RazorViewEngine()); 
  ViewEngines.Engines.Add(new WebFormViewEngine()); 
} 
```

# neural-network - 神经网络无法计算傅里叶变换？

> ID：10336682
> 
> 赞同：17
> 
> 时间：2012-04-26T15:34:38.160
> 
> 标签：neural-network, fft, dft

我试图了解一些关于神经网络的事情。首先，在网上浏览了一下，似乎没有办法通过神经网络计算（离散）傅里叶变换。您可以通过对事物进行硬编码以包含用于变换的傅立叶常数来破解它，然后获得不错的结果。为什么机器不能自己解决这些问题？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-27T00:29:52.660

DFT 是线性算子。一些神经网络在计算路径中具有 sigmoid、RLU 或其他非线性元素，这可能会使足够紧密地模拟线性算子变得更加困难。

补充：完整的 DFT 是 N 乘 N 矩阵乘法。神经网络必须足够大以表示那么多乘法（至少 O(NlogN)）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T19:42:52.973

我想我找到了关于这个主题的研究论文：[http ://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.144.9688&rep=rep1&type=pdf](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.144.9688&rep=rep1&type=pdf)

它说“为了实现处理 DFT 的神经网络，必须应用一种策略，将 DFT 的数学公式映射到神经网络的结构”，似乎他们让它发挥作用（第 6 节）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T23:33:49.220

据我了解，神经网络只是一种“学习”的分类方法。要使用神经网络解决问题，您需要：

1.  定义分类器输入
2.  定义分类器输出
3.  提供一个训练集：它是一组对（输入，输出）
4.  选择一个拓扑结构（有多少层，每层有多少个神经元......）以及单个神经元将用于将输入转换为输出的函数

在神经网络被训练后，给定一个新的输入，神经网络产生一个输出。输出有多好取决于训练有多“好”。通常，数据的代表性是训练数据集。在尝试解决输入和输出之间存在未知关系的分类问题时，此技术非常有用。

快速傅里叶变换只是一个函数。您可以在一维中进行 FFT，它适用于声波等一维现象。在这种情况下，您传递一个值向量（声波强度的样本）并返回一个频率向量。更具体地说，不同频率的谐波在合成时产生原始声波的幅度。在二维中，FFT 将矩阵作为输入。例如，对于一张图片，它可能是网格中各点的颜色强度。FFT 将其转换为谐波矩阵。向量的长度或矩阵的阶数由原始信号的采样率给出。

应用神经网络计算 FFT：

1.  在 1 维和 2 维中计算 FFT 的算法是明确定义的。它的复杂度是 O(n log n)，这使得它非常高效。神经网络实现需要非常高效（并行性？）才能证明使用它的合理性。
2.  如果你改变你的采样率，你需要重新训练你的神经网络：假设你有一个为给定的采样率计算 FFT 的固定网络，如果你显着降低采样率，神经网络将“过度拟合”数据，并且反之亦然。

有了这一切，我认为只要参数（采样率......）不改变，神经网络就可以很好地适应 FFT 的特定实现。

# php - 如何在 PHP 中的 ITMS url 中发送获取请求？

> ID：10336684
> 
> 赞同：3
> 
> 时间：2012-04-26T15:34:43.603
> 
> 标签：php, ios, plist

我有以下代码不起作用。表示 ITMS 服务不使用获取请求调用 URL。

```
header('Location: itms-services://?action=download-manifest&url=http://www.mysite.com/plistReader.php?id=123'); 
```

如果我删除`id=123`它开始工作。但我需要发送这个以保持 id 动态。在会话中我也无法通过。请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T15:56:23.630

您需要将该问号 URL 编码为`%3F`，因为它是保留字符。正如@wroniasty 指出的那样，您还需要将`=`as编码`%3D`。

```
header('Location: itms-services://?action=download-manifest&url=http://www.mysite.com/plistReader.php%3Fid%3D123'); 
```

另见： http: [//www.blooberry.com/indexdot/html/topics/urlencoding.htm](http://www.blooberry.com/indexdot/html/topics/urlencoding.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-26T18:17:50.387

切勿手动转义 URL 字符。让 PHP 5 的函数 -`urlencode()`并且`http_build_query()`- 为您完成繁重的工作。这避免了某些 GET 参数名称/值对可能包含需要传输的敏感字符的问题，例如

```
<?php
    $base_url = "http://www.example.com/plistReader.php";
    $data = Array("id" => 123, "dangerous" => ":?&= are some sensitive chars");

    $itms_url = "itms-services://?action=download-manifest&url=" . urlencode($base_url . "?" . http_build_query($data));
    header('Location: ' . $itms_url);
?> 
```

# prolog - Prolog 谓词在回溯上生成大于 X 的整数

> ID：10336685
> 
> 赞同：-1
> 
> 时间：2012-04-26T15:34:49.520
> 
> 标签：prolog

> 编写一个谓词`above(L, N)`，它将生成（在回溯时）每个大于给定整数的整数，`L`. 例如，目标`above(3, N)`应该生成为解决方案`N = 4; N = 5; N = 6; ...`，依此类推，以便回溯。

如上。

“在回溯中生成解决方案”的一般策略也会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T17:27:31.390

```
 length(_,N), N > 3.

   length(_,I), N is I + 4. 
```

这些不是最有效的版本，但它们不需要辅助定义。

```
 length([_,_,_,_|_],N). 
```

可能会更快，但有点模糊。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T15:42:23.793

You would need a procedure with two clauses. The first one would be the base case which for the input number L unifies the output number N with L+1. The second clause would be the recursive step, which just increments L and calls recusively above/2.

```
above(L, NL):-
  NL is L+1.
above(L, NL):-
  ML is L+1,
  above(ML, NL). 
```

# entity-framework - EDM 中的列大小检查？

> ID：10336686
> 
> 赞同：0
> 
> 时间：2012-04-26T15:34:51.530
> 
> 标签：entity-framework, entity-framework-4, entity-framework-4.1

我注意到 EF 4.3 没有检查列大小。浏览 EF5 的功能列表后，我了解到我必须提出自己的解决方案。我看过的其他一些 ORM 也缺乏这种行为。

在我开始在我的服务层中对这些检查进行硬编码之前，我想知道你们中的大多数人是如何处理这个问题的。

作为程序员，我是懒惰还是你们中的更多人认为这是一个缺点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:45:03.520

如果您正在寻找 EF 中数据类型之间的（完整）映射，您将找不到它。最好的办法是向您的 poco 添加检查并保持它们同步或构建一些花哨的错误处理。

# sql - sql合并不会除了更新语句吗？

> ID：10336687
> 
> 赞同：1
> 
> 时间：2012-04-26T15:34:55.593
> 
> 标签：sql, merge

我有一种情况，我需要将数据从 table1 插入 table2。在插入之前检查 table2 中是否已经存在某行。

条件是如果： 1) id 和 ahccs 的值在两个表中是相同的，那么什么都不做。2) id 的值相同但 ahccs 不同，然后设置 flag ='z' 并使用新的 ahccs 值插入相同的 id。

我正在使用 SQLSERVER 2008 R2。我怎么能做到这一点？

我可能需要这样的东西。

```
DECLARE @table1 TABLE 
(id int not null, ahccs int not null, info varchar(25), flag varchar(2))
DECLARE @table2 TABLE 
(id int not null, ahccs int not null, info varchar(25), flag varchar(2))

INSERT INTO @table1
VALUES(1, 1223, 'et', 'X')
INSERT INTO @table1
VALUES(2, 321, 'et', 'X')
INSERT INTO @table1
VALUES(3, 134, 'et', 'X' )
INSERT INTO @table1
VALUES(4, 168, 'et', 'X' )
INSERT INTO @table1
VALUES(5, 123, 'et', 'X' )

INSERT INTO @table2
VALUES(1, 1223, 'dt', 'y' )
INSERT INTO @table2
VALUES(2, 456, 'dt', 'y' )
INSERT INTO @table2
VALUES(3, 123, 'dt', 'y' )
INSERT INTO @table2
VALUES(4, 193, 'dt', 'y' )
--SELECT * FROM @table1

SELECT * FROM @table2

MERGE
INTO    @table2 t2
USING   @table1 t1
ON      t2.id = t1.id 
WHEN MATCHED AND t2.ahccs != t1.ahccs THEN
UPDATE
SET     flag = 'z'
INSERT VALUES (t2.id, t1.ahccs, t1.info, 'l'); 
```

我遇到的两个问题是：1）我相信合并不支持多个步骤。2) WHEN NOT MATCHED 情况下不允许更新。

请指教。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T15:53:14.303

我想我现在明白了要求。您想更新 table2 中 id 匹配但 ahccs 不匹配的记录，将标志设置为“z”。此外，对于这些不匹配，应将新行插入到 table2 中，其 id 相同，但来自 table1 的 ahccs，标志为“l”。

```
DECLARE @tmp TABLE (id int, ahccs int, info varchar(25), flag varchar(2))
MERGE
INTO    @table2 t2
USING   @table1 t1
ON      t2.id = t1.id
WHEN NOT MATCHED THEN
    INSERT VALUES (t1.id, t1.ahccs, t1.info, t1.flag)
WHEN MATCHED and t2.ahccs <> t1.ahccs THEN
    UPDATE SET flag = 'z'
output inserted.id, t1.ahccs, t1.info, inserted.flag
into @tmp;

insert into @table2
select id, ahccs, info, 'l' as flag
from @tmp
where flag = 'z' -- don't insert what we've already inserted 
```

# php - api.example.com 比 example.com/api 好吗？

> ID：10336690
> 
> 赞同：4
> 
> 时间：2012-04-26T15:35:14.983
> 
> 标签：php, ruby, api, rest, subdomain

似乎大多数流行的 RESTful API 更喜欢子域而不是子目录：

*   api.twitter.com
*   api.linkedin.com
*   api.foursquare.com
*   图.facebook.com

我想知道这背后是否有任何技术论据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T15:56:02.130

这是一个负载平衡的事情。

> twitter.com 有地址 199.59.150.39
> twitter.com 有地址 199.59.149.230
> twitter.com 有地址 199.59.150.7
> api.twitter.com 有地址 199.59.150.9
> api.twitter.com 有地址 199.59.149.232
> api.twitter.com 有地址 199.59.148.20
> api.twitter.com 有地址 199.59.148.87
> 
> api.linkedin.com 的地址为 216.52.242.83
> linkedin.com 的地址为 216.52.242.86
> 
> api.foursquare.com 的地址为 50.19.210.39foursquare.com
> 的地址为 50.16.220.173
> 
> graph.facebook.com 的地址为 66.220.146.87
> facebook.com 的地址为 66.220.158.11
> facebook.com 的地址为 69.171.229.11
> facebook.com 的地址为 69.171.242.11
> facebook.com 的地址为 66.220.149.11

当您在客户端而不是代理处将 Web 与 API 分开时，它确实有助于稳定性。例如，Twitter 自己的网站运行在 Ruby 上，而后端主要是用 Scala 编写的。代理可以路由这两个，但它需要到 API 和主站点的大量连接，导致连接池大两倍。

另一个优点是，当您的 API 出现故障时，该站点仍然可以工作（不适用于 Twitter，因为该站点是在 API 之上构建的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:52:31.713

需要考虑的是跨域 AJAX 调用。如果您在一个网站上`domain.com`，您不能对`sub.domain.com`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T16:04:51.060

如果您希望 API 服务使用另一台服务器（大型）`api.domain.com`更好，但您希望 AJAX 在中小型或小型`domain.com/api`更好。

# sql - SQL在字符串中搜索特定值

> ID：10336692
> 
> 赞同：1
> 
> 时间：2012-04-26T15:35:19.520
> 
> 标签：sql, string, oracle, search

我需要在我们的 Oracle 数据库中找到所有具有与某个单词匹配的属性的表。因此，例如我正在使用：

```
SELECT TABLE_NAME
     , COLUMN_NAME
  FROM USER_TAB_COLUMNS
 WHERE UPPER(COLUMN_NAME) LIKE '%ING%' 
```

这将返回：

```
TABLE1 ING
TABLE2 THIS_ING
TABLE3 ING_FIRST
TABLE5 TESTING 
```

我只想从 TABLE1、TABLE2 和 TABLE3 返回结果。当它只是像 TESTING 这样的字符串的一部分时，我不想要匹配。

我似乎无法得到我需要的东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T16:18:11.107

您可以使用正则表达式来查找您想要的内容：

```
SELECT TABLE_NAME
     , COLUMN_NAME
  FROM USER_TAB_COLUMNS
 WHERE regexp_like (column_name, '(^|(_)+)ING((_)+|$)') 
```

这将为您提供以 ING 开头或 1 个或多个下划线开头的列，然后是行尾或 1 个或多个下划线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T16:15:36.900

您可以使用 REGEXP_LIKE。我不太擅长正则表达式，比我更好的人可以弄清楚如何在一个表达式中做一个单词的开头或 _

```
SELECT TABLE_NAME
 ,     COLUMN_NAME
FROM USER_TAB_COLUMNS
WHERE
REGEXP_LIKE(COLUMN_NAME,'[_]ING')
or
REGEXP_LIKE(COLUMN_NAME,'^ING') 
```

[演示](http://sqlfiddle.com/#!4/4c95a/28)

# java - JSF p：p：dataTable 中的日历：AJAX 后未正确更新

> ID：10336693
> 
> 赞同：0
> 
> 时间：2012-04-26T15:35:20.890
> 
> 标签：java, ajax, jsf-2, primefaces

我又遇到了:-(一个奇怪的问题，`p:calendar`里面有一个`p:dataTable`：

```
<h:form id="fId">
  <p:dataTable var="cum" value="#{myBean.list}">
    <p:column>
      <p:calendar value="#{cum.validFrom}">  
        <p:ajax update=":fId" event="dateSelect" listener="#{myBean.upDateCum}"/>  
      </p:calendar>  
    </p:column>
    <p:column>
      <h:outputText value="#{cum.validFrom}"/>
    </p:column>
  </p:dataTable>
</h:form> 
```

bean 中的方法是获取发生更新的正确元素（[JSF p:calendar in p:dataTable: How to get the row of p:ajax dateSelect event](https://stackoverflow.com/questions/10276602)）然后元素中的日期被更新并`list`重新排序。可以在方法末尾的 bean 中验证正确的排序和更新`upDateCum`：

```
public void upDateCum(DateSelectEvent event)
{
    // Logging Before (iteration over list, debugging id and date)
    // set date with provided date from event
    // Logging After (iteration over list, debugging id and date)
}

20:53:10,455 INFO  [myBean]  Before id:148 -- 2012-04-15
20:53:10,456 INFO  [myBean]  Before id:141 -- 2012-04-10
20:53:10,456 INFO  [myBean]  Before id:147 -- 2012-04-05

20:53:10,823 INFO  [myBean]  After id:147 -- Fri Apr 20 00:00:00 CEST 2012
20:53:10,823 INFO  [myBean]  After id:148 -- 2012-04-15
20:53:10,823 INFO  [myBean]  After id:141 -- 2012-04-10 
```

但是发生更改的表的行始终包含实际更改的值（见图），但现在应该属于另一行（因为重新排序）。

第三行 (object.id=147) 中的日期从 05.04.12 更改为 20.04.12。更新后，更改的日期位于第一个位置（没关系）。但是第三行不包含 id=141 的未更改日期，它包含新数据（20.04.12）：

![在此处输入图像描述](../Images/e25ef961fe9b8c8c06f35d852b61c115.png)

有趣的是： h:outputText 还包含错误的日期。我只能假设`p:calendar`bean 方法执行后覆盖了该值。

# ruby-on-rails - Devise + CanCan，更新方法后登录用户自动退出

> ID：10336694
> 
> 赞同：1
> 
> 时间：2012-04-26T15:35:25.723
> 
> 标签：ruby-on-rails, devise, cancan

我正在尝试使用 CanCan 进行基本用户授权，出于某种原因，已经登录的用户在提交了他们的个人资料更新后，devise 正在退出。

我想不通，为什么会这样。

我的`ability.rb`

```
class Ability
  include CanCan::Ability

  def initialize(user)
    user ||= User.new # guest user (not logged in)
    can [:welcome, :read, :create, :new], User

    if user.role == 'member'
      can :manage, User, :id => user.id
    end
  end
end 
```

而我的`update`方法来自`UsersController`

```
def update
  if @user.update_attributes(params[:user])
    flash[:success] = "Profile saved!"
    #sign_in @user // tried this with no lucky, it still signing out
    redirect_to @user
  else
    render 'edit'
  end
end 
```

如您所见，它非常基本。

`flash`消息正在显示，并且也`redirect`按预期工作。

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T18:31:16.397

我在您的代码中找不到错误。我认为您需要在其他地方找到问题。例如，你能显示你的`params`哈希吗？`@user`并在更新过程中显示 SQL 日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T02:49:14.863

我忘了添加`before_filter :authenticate_user!`到我的`UsersController`

它现在正在工作。谢谢

# javascript - 访问存储在会话中的 html 表

> ID：10336700
> 
> 赞同：0
> 
> 时间：2012-04-26T15:35:54.590
> 
> 标签：javascript, jquery, asp.net, html

我想为我想做的事情找到最好的方法。我在数据库中有一个存储过程，它确实从另一个数据库导入到我们的数据库并链接信息。如果链接信息丢失，它会产生错误，由用户解决。在我的代码隐藏中，我收到了这些错误，我创建了一个 html 表，为每个错误添加了行。现在我想在多个页面中保留这些信息，所以我将它存储在会话中，因为它只是一个 html 表而不是像网格这样的重型控件，什么是在会话中存储 HTML 表或任何其他方式的最佳方式和如何在客户端的 Javascript 或 Jquery 中访问它，以便我可以利用 Jquery 函数来显示显示此信息的可扩展 div

```
protected void BtnAddDock1_Click(object sender, EventArgs e)
    {
        try
        {
            HtmlGenericControl RadDocksDiv = (HtmlGenericControl)Master.FindControl("RadDocksDiv");
            RadDocksDiv.Style["display"] = "block";

            Session["Docking"] = "Open";

            Table tblErrors = new Table();
            tblErrors.ID = "tblErrors";
            tblErrors.CssClass = "tabularData";
            tblErrors.Width = 800;
            TableHeaderRow hr = new TableHeaderRow();
            // hr.ID = "tblErrorsHeaderRow";
            TableHeaderCell thc = new TableHeaderCell();
            //thc.ID = "tblErrorsHeaderCell";
            thc.Text = "Error Descriptions";
            hr.Cells.Add(thc);
            tblErrors.Rows.Add(hr);
            Panel pnlErrors = (Panel)Master.FindControl("pnlErrors");

            Table dobleTable = (Table)Master.FindControl("tblErrors");

            if (dobleTable == null)
            {
                pnlErrors.Controls.Add(tblErrors);

                for (int i = 0; i < 10; i++)
                {
                    TableRow tableRow = new TableRow();
                    string error = "This is a website generated Import Error that needs to be added to the panel on Masterpage!";
                    TableCell tableCell = new TableCell();
                    tableCell.Text = error;
                    tableRow.Cells.Add(tableCell);
                    tblErrors.Rows.Add(tableRow);
                }

                Session["ErrorsTable"] = tblErrors;
            }
            //Table tblErrors = (Table)Master.FindControl("tblErrors");

        }
        catch (Exception ex)
        {
            throw ex;
        }
    } 
```

这就是我试图在 Javascript 中获取它的方式，但是当我尝试从会话中获取它时，我所能看到的只是 System.Web.UI.WebControls.Table。

```
 //Access html table in  session
    var dockingState = '<%= Session["Docking"] %>'

    if (dockingState == "Open") {

        // This doesnt return the html table correctly?!?
        var sessiontblErrors = '<%= Session["ErrorsTable"] %>'

        if (sessiontblErrors != null) {
            var pnlErrors = $("[id$=pnlErrors]");

        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T15:53:31.853

If you really want to keep errors in session to show across pages, I would do it in this way. Instead of creating HTML table and storing in session, i would create a list of Errors in Session and access it whenever i need and display it in whatever format i want. It can be a HTML table, Ordered List , Spans etc...

I would simply create a class to hold my Error Messages

```
public class ErrorMessage
{
  public string ErrorCode { set;get;}
  public string Message { set;get;}
} 
```

and in your code, instead of creating the HTML table row, i will add this to a list

```
List<ErrorMessage> objErrorList=new List<ErrorMessage>();

for(int i = 0; i < 10; i++)
{
  ErrorMessage objError=new ErrorMessage();
  objError.ErrorCode=5020;
  objError.Message="There is such a bad error!";
  objErrorList.Add(objError);
}
if(objErrorList.Count>0)
{
  Session["Errors"]=objErrorList;
} 
```

And Whenever i want this i will return this from Session. I would wrap this in a function.

```
public List<ErrorMessage> GetErrors()
{
  List<ErrorMessage> objList=new List<ErrorMessage>();
  if(Session["Errors"]!=null)
  {
    objList=(List<ErrorMessage>)Session["Errors"];
  }
  return objList;
} 
```

If you want this from javascript, you can get it by making a call to a server page (an aspx page / ashx handler) using jQuery ajax/getJson. Some thing like this.

```
var strErrors="<ul>";
$.getJSON('geterrors.ashx', function(data) {
    $.each(data, function(key, val) {
      strErrors+="<li>" + val + "</li>";
    });
});
strErrors+="</ul>";

$("#yourMsgDiv").html(strErrors); 
```

Where in `geterrors.ashx`, you will call our GetErrors method and convert that toJSon format and return.

**The main advantage in this approach is that the Presentation is not tightly tied to data**. We can show the error message in various styles.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T15:59:19.090

> 我创建一个 html 表，为每个错误添加行

实际上，这一行`Table tblErrors = new Table();` 创建了一个[System.Web.UI.WebControls.Table](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.table.aspx)，它是一个 ASP.NET 服务器端控件。

如果你真的想创建一个 HTML 表格，你需要使用该[`Render`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.webcontrol.render.aspx)方法来生成 HTML。也就是说，我认为您应该按照[Shyju](https://stackoverflow.com/a/10336976/119477)的建议进行操作，并从数据中删除演示文稿。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T15:55:50.180

首先，这里有一个很大的误解。

`Session`*存储对象*的序列化字符串表示。

```
Session["ErrorsTable"] = tblErrors; 
```

了解`tblErrors`在您的 c# 代码*中不等于*：

```
<table><tr><td>...</td></tr></table> 
```

`tblErrors`是一个对象，它有一个类，就像任何其他 c# 类一样。（释义）当页面由 asp.net 呈现以发送到客户端时，该类被*翻译*为 html。但是，如果您将类的一个实例放入`Session`中，那将不是您将得到的。您正在存储实际对象，该对象`Session`为您进行序列化和反序列化。

我希望这会有所帮助，我意识到这是一个难以解释的话题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T15:46:34.673

阅读以下链接，您将知道要使用什么。从内存的角度来看，会话是一项昂贵的操作，如果您拥有大量网站，那将是一个大问题。

[http://msdn.microsoft.com/en-us/library/75x4ha6s.aspx](http://msdn.microsoft.com/en-us/library/75x4ha6s.aspx)

[http://msdn.microsoft.com/en-us/library/z1hkazw7.aspx](http://msdn.microsoft.com/en-us/library/z1hkazw7.aspx)

[http://www.c-sharpcorner.com/UploadFile/freelance91/ASPNETstatemanagementtechniques01012007212655PM/ASPNETstatemanagementtechniques.aspx](http://www.c-sharpcorner.com/UploadFile/freelance91/ASPNETstatemanagementtechniques01012007212655PM/ASPNETstatemanagementtechniques.aspx)

[http://www.dotnetfunda.com/articles/article61.aspx](http://www.dotnetfunda.com/articles/article61.aspx)

[http://www.codeproject.com/Articles/31994/Beginners-Introduction-to-State-Management-Techniq](http://www.codeproject.com/Articles/31994/Beginners-Introduction-to-State-Management-Techniq)

# content-management-system - 没有主机访问权限的 DotNetNuke 更改

> ID：10336704
> 
> 赞同：3
> 
> 时间：2012-04-26T15:36:58.367
> 
> 标签：content-management-system, dotnetnuke

我需要更改 DotNetNuke 网站的标题，我有管理员访问权限但没有主机访问权限。我也可以通过 FTP 访问网站的文件目录。

我可以更改索引页的标题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T21:50:22.697

如果您正在谈论在

```
<head></head> 
```

文档的部分，您可以在页面设置中逐页设置。从全局来看，没有真正的方法可以做到这一点，除非您想直接在核心中修改 default.aspx。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-28T06:24:19.920

这实际上取决于您希望对标题进行的更改。但无论如何，您都需要其他人添加的附加功能。例如，如果您只是想将内容注入页眉，则可以使用[注入模块](http://www.dotnetnuke.com/Community/Extensions-Forge/view/ProjectDetail/project/wnsinj.aspx)将任何您想要的内容注入页眉。或者，您可以通过皮肤做到这一点。不幸的是，就像米切尔说的那样，如果没有一些配置，你的可用选项就会受到限制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T19:15:13.253

您需要确定内容的来源。如果它在皮肤中，那么您需要通过 FTP 编辑皮肤文件（可能在 /Portals/_default/Skins 或 /Portals/[Portal ID]/Skins 中）。

如果它只是标题窗格中的一个模块，那么您可以使用您的管理员访问权限来更新模块（除非您需要更改模块中不可配置的内容）。

# python - 在 Dexterity 类型中反向引用 RelationList

> ID：10336705
> 
> 赞同：3
> 
> 时间：2012-04-26T15:36:58.833
> 
> 标签：python, plone, dexterity

我创建了两种敏捷类型：lab_equipment.py、class_activity.py。class_activity 类型包含以下与 lab_activity 类型的关系：

类活动.py：

```
class IClassActivity(form.Schema, IImageScaleTraversable):
[...]
    dexteritytextindexer.searchable('apparatus')
    apparatus = RelationList(
        title=_(u"Apparatus"),
        description=_(u"Choose equipment used in this activity"),
        value_type=RelationChoice(
            source=ObjPathSourceBinder(
                object_provides=ILabEquipment.__identifier__,
                navigation_tree_query= {'path': {'query':'/Plone/ug-demos/equipment'}},
            ),
        ),
    )

[...] 
```

现在我需要从 lab_equipment 页面模板中的 class_activity 类型中列出相关成员。

有没有办法将 RelationList 从 class_activity 类型反向引用到 lab_activity 类型，然后将此列表显示到页面模板中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T06:00:26.687

要检索反向引用（使用指定属性指向特定对象的所有对象），您不能简单地使用 from_object 或 from_path，因为源对象存储在没有获取包装器的关系中。您应该使用 from_id 和 helper 方法，它们在 IntId 目录中搜索对象。

```
from Acquisition import aq_inner
from zope.component import getUtility
from zope.intid.interfaces import IIntIds
from zope.security import checkPermission
from zc.relation.interfaces import ICatalog

def back_references(source_object, attribute_name):
    """ Return back references from source object on specified attribute_name """
    catalog = getUtility(ICatalog)
    intids = getUtility(IIntIds)
    result = []
    for rel in catalog.findRelations(
                            dict(to_id=intids.getId(aq_inner(source_object)),
                                 from_attribute=attribute_name)
                            ):
        obj = intids.queryObject(rel.from_id)
        if obj is not None and checkPermission('zope2.View', obj):
            result.append(obj)
    return result 
```

请注意，此方法不检查有效和到期日期或内容语言。

在您的情况下，您需要从实验室设备浏览器视图的某些方法中调用此方法，并将反向引用对象列表传递给您的模板。例如：

```
class LabEquipmentView(BrowserView):

    def aparatus_backrefs(self):
        return back_references(self.context, 'apparatus') 
```

PS我从我自己的敏捷问题＃234复制了我前一段时间发布的答案：[http ://code.google.com/p/dexterity/issues/detail?id=234&colspec=ID%20Type%20Status%20Priority%20Difficulty% 20里程碑%20所有者%20总结](http://code.google.com/p/dexterity/issues/detail?id=234&colspec=ID%20Type%20Status%20Priority%20Difficulty%20Milestone%20Owner%20Summary)

# iphone - xcode 4.2音板？

> ID：10336708
> 
> 赞同：-4
> 
> 时间：2012-04-26T15:37:04.707
> 
> 标签：iphone, ios

大家好，我一直在尝试创建音板一段时间，我发现这个网站有没有人可以通过为 iPhone Xcode 4.2 提供完整的工作代码来回答这个问题，谢谢你的时间。

这是我的代码，但它有错误

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController 

-(IBAction)sound1 {
    CFBundleRef mainBundle = CFBundleGetMainBundle();
    CFURLRef soundFileURLRef;
    soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"sound1", CFSTR      ("wav"), NULL);

    UInt32 soundID;
    AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);
    AudioServicesPlaySystemSound(soundID);
} 
```

加上有人说要使用 av 东西请编辑或上传代码回答时我是初学者哈哈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T17:10:03.040

我刚刚测试了您发布的代码，它运行良好 - 这里没有错误。

所以你可能忘记做以下一件（或多件）事情：

*   将`AudioToolbox`框架包含到您的项目中
*   `#import <AudioToolbox/AudioToolbox.h>;`在您的 ViewController.m 文件中
*   将 sound1.wav 文件添加到您的项目中
*   检查 sound1.wav 是否真的是 sound1.wav 而不是 Sound1.wav 或类似的
*   将您的 IBAction 方法连接到某个真正被触发的事件

# javascript - 如何在 JavaScript 中捕获请求？

> ID：10336710
> 
> 赞同：1
> 
> 时间：2012-04-26T15:37:08.313
> 
> 标签：javascript, jquery, yui

我的场景是：</p>

```
function testb() { b() } // written by me
function b() { 
    sendRequest1(); //eg: http://test1
    sendRequest2(); //eg: http://test2

} // a third party library, it is black box for me 
```

我的问题是在调用 testb() 时，有没有一种方法可以捕获/获取 request1 和 request2 的 url？我想做一些检查，例如：查询字符串是否正确。一些网络代理工具（例如：Charles）将有助于做到这一点。但我想用 JavaScript 来做。可能吗？

这只是测试 b() 的一个测试用例。因为b()有很多类似的情况。所以自动化案例可能对我有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T15:46:56.617

至少在某些浏览器上（我已经在 Chrome 中尝试过），您可以“猴子补丁”`XMLHttpRequest`对象，例如：

```
(function(xhr) {
    var open = XMLHttpRequest.prototype.open;

    xhr.prototype.open = function() {
       console.log(arguments);
       open.apply(this, arguments);
    };

})(XMLHttpRequest); 
```

见[http://jsfiddle.net/alnitak/tbdNJ/](http://jsfiddle.net/alnitak/tbdNJ/)

# programming-languages - 一个 Scheme 过程，它返回程序中使用的最大索引 L

> ID：10336716
> 
> 赞同：1
> 
> 时间：2012-04-26T15:37:24.450
> 
> 标签：programming-languages, scheme

假设我定义了一个程序：

```
(define myprog
  (a-program
   (list (labeled 'A12 (add1 'X)) (unlabeled (sub1 'Y4))))) 
```

我想编写一个程序来查找上述程序中使用的最大索引。

一个测试用例就像：

```
>(max-index myprog);myprog is the program defined above
12 
;this is from A12 because its the largest index used. 
```

我知道该方案有一个内置函数，可以找到列表中的最大元素，比如 `(max 3 5 9)` 会给我 9

但就我而言，我知道我必须解析我的程序并考虑省略的索引将对应于 1；X 对应于 X1。

我可以编写一个在列表中轻松执行此操作的函数，但不是“程序”。

如果有人能告诉我我应该首先看什么，那会很有帮助。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T15:52:22.040

"A Program" in the sense defined in your question *is* a list of lists, and nothing else. If you know how to write a function that does what you need for "a list" please post it here, you'll see that it works for "a program" too.

# c - 无法在 C 中解释“if (result1) *result1 = t2”语句

> ID：10336717
> 
> 赞同：2
> 
> 时间：2012-04-26T15:37:26.923
> 
> 标签：c, if-statement

我不是 C 程序员，但我正在将 C 程序翻译成 Delphi。一切进展顺利，除了我无法弄清楚这样的陈述的含义：

```
if (result1)
    *result1 = t2; 
```

似乎总是要执行分配，然后针对某些条件进行测试？

如果有帮助，完整的 C 程序列在[http://en.wikipedia.org/wiki/Talk%3ATrilateration 。](http://en.wikipedia.org/wiki/Talk%3ATrilateration)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T15:44:14.073

In C, there is an assimilation between integers and booleans: any number not zero means true. In C 99 the `bool` type was added (following the steps of C++), but these so common uses are difficult to erradicate (and there is also a lot of legacy source code using this convention).

The true meaning of that sentence is:

```
if ( result1 != NULL ) {
    *result1 = t2;
} 
```

This means that `result1` is a pointer, and if the probable memory allocation previous to this line was successful, then it is used to store the value `t2`.

So, what does this have to do with pointers? Well, a pointer is basically an integer (a memory address), and NULL is (very commonly, but not always) zero. So "result1" can be interpreted as `result1 != NULL` or even `result1 != 0`.

Finally `NULL` is returned when a memory allocation (or any other memory operation) was unsuccessful, so it is quite common to test that the pointer is alive (i.e., it is not `NULL`) before using it.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T15:38:47.087

它测试指针`result1`是否不是`null`。如果`true` `t2`将被赋值为`result1`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T15:41:09.163

在 C/C++ 中，取消引用指针是**未定义的行为。**`NULL`简而言之，如果您这样做，可能会发生非常糟糕的事情。

因此，`NULL`在取消引用之前检查指针始终是一个好习惯。
上述代码就是这样做的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T15:43:07.337

result looks like a pointer to a pointer. if it's not null, point the pointer it's pointing to to t2.

if result1 is not null result1 points to an address point that address to t2

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T22:12:48.190

`result1`是一个指针；它的值是另一个对象在内存中的位置。

在 C 布尔上下文中，零值积分表达式的计算结果为`false`，而任何非零值整数表达式的计算结果为`true`。在指针上下文中，零值整数表达式被视为*NULL 指针常量*，它表示定义明确的“无处”，并被视为无效指针值。

所以`if (result1)`测试指针的值；如果为 0，则表示`result1`没有指向任何有意义的地方，并且由于 0 也表示，因此不会执行语句`false`的主体。`if`这是一种速记的写作方式`if (result1 != NULL)`。如果值不为 0，那么它是一个有效的指针值（希望如此；见下文），测试通过，表达式`*result1 = t2`将 的值写入*指向*的`t2`位置。 *`result1`*

 *关于指针的几点说明：首先，非 NULL 指针值不一定是*有效*指针，因为它的值可能与活动对象的地址不对应。试图*取消引用*（访问指向的内存）无效指针的行为是未定义的；您的程序可能会彻底崩溃，或者它可能会继续在错误的状态下执行，或者它可能工作得很好。因此，通常认为在声明所有指针时将它们初始化为 NULL 并在不再使用它们所指向的任何内容时将它们设置为 NULL 是一种很好的做法。

其次，虽然空指针*常量*始终为零值，但实现使用的空指针*值*不一定是。映射这些值由编译器决定，因此就您的*源代码*而言，NULL 始终表示 0；只是不要假设底层操作系统是这样的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-26T15:41:16.647

```
if (result1 != NULL)
{
    *result1 = t2;
} 
```

如果 result1 是`null`指针，则该行`*result = t2`应导致 SEGFAULT。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-26T16:00:00.213

如果您想通过函数参数传递返回结果，这实际上是 C 中的一种常见模式。C函数中没有`var`参数，因此您可以通过将指向值的*指针*作为参数传递来模拟这个想法，然后函数可以通过分配给指针指向的位置来设置值。

其中的行`main`如下所示：

```
result = trilateration(&o1, &o2, p1, r1, p2, r2, p3, r3, MAXZERO); 
```

创建指向变量 o1 和 o2 的内存地址的指针（这就是`&`意思）。然后函数中的行

```
*result1 = t2; 
```

分配`t2`给任何`result1`指向的东西，在这种情况下是`o1`.

线

```
if (result1) 
```

测试指针是否为“真”（假与 0 相同，在 C 中任何非零值都为真），因此与

```
if (result1 != NULL)  // NULL is effectively the same as 0. 
```

这样做的原因是，将 NULL 作为函数的第一个参数传递是合法的。如果您只对获取两个结果值之一感兴趣，您可能想要这样做。所以，你可以安全地做

```
result = trilateration(NULL, &o2, p1, r1, p2, r2, p3, r3, MAXZERO); 
```

如果你不关心计算`o1`。*

# java - 带有图像的 android 按钮

> ID：10336718
> 
> 赞同：0
> 
> 时间：2012-04-26T15:37:27.777
> 
> 标签：java, android, image, button, drawable

![纽扣](../Images/a859febf8efbafd97d52a3d6e14d51f2.png)

前两个字段是来自 android ICS 的 SMS 应用程序，第三个是我的。
我是这样做的：

```
 <RelativeLayout 
  android:layout_width="match_parent"  
  android:layout_height="match_parent" >

   <EditText
    android:id="@+id/searchfield"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_toLeftOf="@+id/newItem"/>

   <ImageButton 
    android:id="@+id/newItem"
    android:layout_height="40dip"
android:layout_width="40dip"
android:layout_alignParentTop="@+id/searchfield"
android:adjustViewBounds="true"
android:contentDescription="Add"
android:layout_alignParentRight="true"/>

 </RelativeLayout> 
```

并且图像是这样设置的：

```
 Drawable img = getResources().getDrawable( R.drawable.light_send );
 newItem.setBackgroundDrawable(img); 
```

我得到了一个非常糟糕的绘制箭头，并且在向下创建蓝色背景时遇到了问题。我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T15:43:11.983

对于 ImageButton，您希望将背景设置为具有您正在寻找的颜色的[颜色状态列表。](http://developer.android.com/guide/topics/resources/color-list-resource.html)至于你想要做一个[setImageResource](http://developer.android.com/reference/android/widget/ImageView.html#setImageResource%28int%29)而不是 setBackgroundDrawable 的图像。这样，您可以更改[ScaleType](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html)以调整图像的绘制方式。我会使用 center_inside 来获得最好看的箭头。在 ImageButton 上，背景的行为与在任何视图上的行为完全相同，图像资源是内容并绘制在背景之上。

# c++ - ns2 中的 C++ 未定义引用

> ID：10336723
> 
> 赞同：0
> 
> 时间：2012-04-26T15:37:40.847
> 
> 标签：c++, ns2

我正在用 c++ 修改 ns2 的 aodv 协议。当我调用函数**rft_add**时出现错误。我会把文件放在这里。

声明文件：**aodv_rftable.h**

```
class aodv_rft_entry
{
        friend class aodv_rftable;
        friend class AODV;
        friend class LocalRepairTimer;

 public:
        aodv_rft_entry();  //Constructor
        ~aodv_rft_entry();

 protected:
          LIST_ENTRY(aodv_rft_entry) rft_link;
        nsaddr_t        rft_dst;
        nsaddr_t        rft_src;
        double          rft_lifetime;
        u_int8_t        rft_relay;
        u_int8_t        rft_forward;
};

class aodv_rftable
{
 public:
    aodv_rftable() { LIST_INIT(&rfthead); }

        aodv_rft_entry*       head() { return rfthead.lh_first; }

        aodv_rft_entry*       rft_add(nsaddr_t dst, nsaddr_t src);
        void                 rft_delete(nsaddr_t dst, nsaddr_t src);
        aodv_rft_entry*       rft_lookup(nsaddr_t dst, nsaddr_t src);
 private:
        LIST_HEAD(aodv_rfthead, aodv_rft_entry) rfthead;
}; 
```

实现文件：**aodv_rftable.cc**

```
aodv_rft_entry*
aodv_rftable::rft_add(nsaddr_t dst, nsaddr_t src)
{
 aodv_rft_entry *rft;
 rft = new aodv_rft_entry;
 rft->rft_dst = dst;
 rft->rft_src = src;
 LIST_INSERT_HEAD(&rfthead, rft, rft_link);
 return rft;
} 
```

从 aodv 协议文件调用：**aodv.cc**

```
void
AODV::sendRequest(nsaddr_t dst)
{
    // Allocate a RREQ packet
    Packet *p = Packet::alloc();
    struct hdr_cmn *ch = HDR_CMN(p);
    struct hdr_ip *ih = HDR_IP(p);
    struct hdr_aodv_request *rq = HDR_AODV_REQUEST(p);
    aodv_rt_entry *rt = rtable.rt_lookup(dst);
    aodv_rft_entry *rft = aodv_rftable.rft_add(dst, index);

    //Here i declare and fill the components of RREQ packet

    rft = rftable.rft_add(dst, index);
} 
```

当我尝试重建 ns2 时，出现以下错误

> 对 aodv_rftable(int, int) 的未定义引用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:05:39.427

链接发生错误..？它可能是您的makefile中的问题。确保 aodv_rftable.cc 对象已链接以创建目标可执行文件。

# xml-serialization - 使用 Altova XMLSpy 2012 生成的代码（版本 2007r3）附加命名空间前缀标签

> ID：10336726
> 
> 赞同：1
> 
> 时间：2012-04-26T15:37:56.993
> 
> 标签：xml-serialization, code-generation, altova, xmlspy

显然，在处理使用标签命名空间前缀的 XML 文件时，Altova XMLSpy 2012 sp1 的代码生成器的最新版本中存在一个错误，您会发现生成的 XML 缺少前缀。在尝试了不同的版本并四处寻找后，我找到了解决该问题的方法，基本上您必须替换以下方法的内容（typebase.cs 中的第 110 行）：

```
public XmlNode CreateElement(MemberInfo member) 
```

和

```
return XmlTreeOperations.AddElement(node, member); 
```

那应该会变魔术。

有人可以证实这一点吗？

注意：我在这里发布这个是因为 Altova 似乎已经关闭了他们的支持论坛并且没有回复电子邮件查询......

问候并希望这对某人有所帮助。

Vlax

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-23T13:05:36.847

您还可以修改构造函数来创建元素：

```
public XmlNode CreateElement(MemberInfo member)
{
    string prefix = member.ContainingType.Namespace.prefix;
    XmlDocument doc = node.OwnerDocument;
    if (doc == null)
        doc = (XmlDocument)node;
    XmlNode child = doc.CreateElement(prefix, member.LocalName, member.NamespaceURI);
    node.AppendChild(child);
    return child;
} 
```

但是，您仍然需要从生成的元素中删除命名空间 uri。可能的解决方案在这里： [clear namespaces from xml](https://stackoverflow.com/questions/5157448/adding-a-prefix-to-an-xml-node)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:54:55.827

您需要切换到 SPL 目录以自定义自动生成的代码。下面是 SPL 目录的路径。在修改 SPL 目录之前。请先学习 SPL。

```
C:\Program Files\Altova\XMLSpy2012\spl

1\. Study SPL directory first.
2\. Select your lang in which you work. 
Suppose you work in c# then modify the files inside the  below path
C:\Program Files\Altova\XMLSpy2012\spl\cs\MapForce 
```

# java - 调用 String#toLowerCase 时应该指定哪个语言环境？

> ID：10336730
> 
> 赞同：27
> 
> 时间：2012-04-26T15:38:11.400
> 
> 标签：java, localization, internationalization

在 Java 中，该`String#toLowerCase`方法使用默认系统`Locale`来确定如何处理小写。如果我将一些 ASCII 文本小写并希望确保按预期处理，我应该使用哪个语言环境？

编辑：我主要关心编程标识符，例如模式中的表名和列名。因此，我希望应用英文小写。

`Locale.ROOT`声明它是*区域设置敏感操作的语言/国家中立区域设置*

`Locale.ENGLISH`大概也是一个安全的选择。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-26T15:48:51.940

是的，`Locale.ENGLISH`对于诸如编程语言标识符和 URL 部分之类的大小写操作来说是一个安全的选择，因为它不涉及任何特殊的大小写规则和英语大小写中的所有 7 位 ASCII 字符 - 转换为 7 位 ASCII 字符。

对于所有其他语言环境，情况并非如此。在土耳其语中，'I' 和 'i' 字符不进行大小写转换。

[“有点和无点的我”](http://en.wikipedia.org/wiki/Dotted_and_dotless_I)解释说：

> 土耳其字母表是拉丁字母表的变体，包括字母 I 的两个不同版本，一个带点，另一个不带点。
> 
> 在 Unicode 中，U+0131 是一个小写的无点 i (ı​​)。U+0130 (İ) 是带有点的大写 i。ISO-8859-9 分别将它们放在 0xFD 和 0xDD 位置。在正常的排版中，当小写 i 与其他变音符号组合时，通常在添加变音符号之前删除点；然而，Unicode 仍然列出了包含点 i 的等效组合序列，因为从逻辑上讲，它是被修改的普通点 i 字符。
> 
> 大多数 Unicode 软件将大写 ı 转换为 I 并将小写 İ 转换为 i，但是，除非专门为土耳其语设置，否则它将小写 I 转换为 i 并将大写 i 转换为 I。因此大写然后小写，反之亦然，会更改字母。

特殊例外列表保存在[http://unicode.org/Public/UNIDATA/SpecialCasing.txt](http://unicode.org/Public/UNIDATA/SpecialCasing.txt)

> ```
> # ================================================================================
> 
> # Turkish and Azeri
> 
> # I and i-dotless; I-dot and i are case pairs in Turkish and Azeri
> # The following rules handle those cases.
> 
> 0130; 0069; 0130; 0130; tr; # LATIN CAPITAL LETTER I WITH DOT ABOVE
> 0130; 0069; 0130; 0130; az; # LATIN CAPITAL LETTER I WITH DOT ABOVE
> 
> # When lowercasing, remove dot_above in the sequence I + dot_above, which will turn into i.
> # This matches the behavior of the canonically equivalent I-dot_above
> 
> 0307; ; 0307; 0307; tr After_I; # COMBINING DOT ABOVE
> 0307; ; 0307; 0307; az After_I; # COMBINING DOT ABOVE 
> ```
> 
> ...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T15:52:14.777

> 如果我将一些 ASCII 文本小写并希望确保按预期处理，我应该使用哪个语言环境？

这取决于“按预期”对您意味着什么。允许指定区域设置的要点是大写/小写在所有语言中的工作方式不同，即使它们可能使用相同的字母。因此，请指定您和/或您的客户居住的区域设置，它可能会按照您/他们的预期工作。

# jsf - JSF 登录会话和重定向

> ID：10336732
> 
> 赞同：2
> 
> 时间：2012-04-26T15:38:29.740
> 
> 标签：jsf, login

我正在创建一个登录示例来查看带有 Faces 的 JSF，我有 PHP 背景，所以我遇到了很多困难。

这就是我的工作方式，基于一些谷歌搜索。

我有一个包含 3 个控制器的文件夹：

*主控制器；家庭控制器；登录控制器；*

我将在没有 get 和 set 的情况下展示每个 bu，以使其更易于阅读。

**主控制器：**

```
package com.erp3.gui.controllers;

import javax.faces.context.FacesContext;

public class MainController {

    public LoginController loginController;

    public MainController() {
        this.checkUserSession();
    }

    public String checkUserSession() {
        loginController = (LoginController) FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get("loginController");
        if (!loginController.getIsLoggedIn()) {
            return "login.html";
        } else {
            return null;
        }
    }
} 
```

**家庭控制器：**

```
package com.erp3.gui.controllers;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;

@ManagedBean
public class HomeController extends MainController {

    public String username;

    public HomeController() {
        super();
    }
} 
```

**登录控制器：**

```
package com.erp3.gui.controllers;

import javax.faces.application.FacesMessage;
import javax.faces.bean.ManagedBean;
import javax.faces.context.FacesContext;

@ManagedBean
public class LoginController {

    public Boolean isLoggedIn = false;
    private String username;
    private String password;
    private FacesMessage msg;

    public String login() {

        if (this.getUsername().equals("daniel") && this.getPassword().equals("123")) {
            this.isLoggedIn = true;                 
            FacesContext.getCurrentInstance().getExternalContext().getSessionMap().put("loginController", this);
            return "home.html";
        } else {
            this.isLoggedIn = false;
            msg = new FacesMessage(FacesMessage.SEVERITY_ERROR, "Usuário ou senha inválida.", username);
            FacesContext.getCurrentInstance().addMessage(null, msg);
            return "login.html";
        }
    }

    public String logOut() {
        FacesContext.getCurrentInstance().getExternalContext().getSessionMap().remove("loginController");
        return "login.html";
    }
} 
```

因此，阅读一些页面我发现了这种创建会话的方式，如果它是正确的，请不要拒绝：

`FacesContext.getCurrentInstance().getExternalContext().getSessionMap().put("loginController", this);`

发生的情况是在 HomeController 我检查会话状态，如果错误重定向到**login.xhtml**

另一件事，当我登录时，我被重定向到**home.xhtml**但 url 仍然打开`login.xhtml`，当我将其更改为它时，`home.xhtml`它返回给我这个美丽的错误：

```
Cant instantiate class: com.erp3.gui.controllers.HomeController. 
```

我还想知道，当我调用**home.xhtml**文件时，它会加载**HomeController**还是 Java 只是加载**home.xhtml**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T16:05:15.283

通过返回字符串结果进行导航只能在由`UICommand`组件调用的实际操作方法中`<h:commandButton>`，而不是在构造函数中。

该异常是一个一般异常，基本上说明`new HomeController()`失败了。反过来，这应该在堆栈跟踪中进一步降低根本原因。也许是`NullPointerException`因为`loginController`是`null`？无论如何，堆栈跟踪中最底层异常的根本原因是要寻找的最重要的异常。请记住这一点。

这两个问题都可以通过以下方式解决：

```
public class MainController {

    public MainController() throws IOException {
        this.checkUserSession();
    }

    public void checkUserSession() throws IOException {
        ExternalContext ec = FacesContext.getCurrentInstance().getExternalContext();
        LoginController loginController = (LoginController) ec.getSessionMap().get("loginController");

        if (loginController == null || !loginController.getIsLoggedIn()) {
            ec.redirect(ec.getRequestContextPath() + "/login.html");
        }
    }

} 
```

然而，这种方法存在技术问题。在响应已经提交后发送重定向为时已晚。只有当部分响应已经发送到客户端时，才能构建*bean*。而是查看容器管理的身份验证或至少查看 servlet 过滤器。但那是另一回事了。

# c# - ASP.NET Web API 的不同返回类型

> ID：10336733
> 
> 赞同：10
> 
> 时间：2012-04-26T15:38:32.620
> 
> 标签：c#, asp.net-web-api

我正在尝试使用 ASP.NET MVC 4 Web API 通过 HTTP 编写真正的 RESTful Web 服务。

我目前面临的挑战是根据我的状态码返回不同的返回类型（实体主体）。

例如，对于资源 Hammer，我有一个 .NET 模型类“Hammer”和一个 HammerController：

```
namespace Awesomeness
{
    public class HammerController : ApiController
    {
        public Hammer Get(int id)
        {
        }
... 
```

如果 ID 不存在（404）或需要不同的授权（401），我可以轻松快捷地返回并手动设置状态码和其他任何内容，这很酷。但是，在许多非 2xx 状态下，我希望返回与 Hammer 资源表示不同的实体主体。我可以轻松地手动执行此操作，但我想利用 ASP.NET MVC 4 Web API 自动序列化和反序列化到/从 XML 或 JSON 取决于请求标头。

**所以我的核心问题是：我可以在返回不同返回类型的同时利用 ASP.NET MVC 4 Web API 的自动序列化吗？**

我考虑过的一些潜在方法是：

1.  让控制器方法返回主要资源类型，但将返回短路`HttpContext.Current.Response`并以某种方式挂钩到自动序列化（首选）。

2.  让我的 Model 类更像一个 C 联合，它代表这种类型或那种类型，并让它作为正常返回过程的一部分进行序列化（并且只需覆盖状态代码和所需的任何响应标头）。即使我仔细考虑了如何做到这一点，我感觉它最终仍然会变得非常hacky。

**2012 年 4 月 27 日编辑：** 我可以像这样抛出 HttpResponseException：

```
HttpResponseMessage response = new HttpResponseMessage(statusCode);
if (!string.IsNullOrWhiteSpace(text))
{
    response.Content = new StringContent(text);
}
throw new HttpResponseException(response); 
```

...但现在我需要弄清楚如何挂钩自动魔术序列化并将其设置`response.Content`为`Accept`标头协商表示。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-28T04:24:24.127

[我从另一个问题](https://stackoverflow.com/questions/10357526/cant-get-asp-net-mvc-4-web-api-to-return-status-code-201-created-for-succes)上收到的答案中得出了这个问题的明确答案。

如果我返回 value `HttpResponseMessage`，我可以通过返回 a 来返回我需要的任何状态或内容`new HttpResponseMessage()`。

**编辑**2012 年 5 月 10 日：感谢@DarrelMiller 的输入，删除已弃用`HttpResponseMessage<T>`并替换为调用`HttpRequestMessage.CreateResponse<T>()`扩展方法。注意：此扩展方法在 MVC4/WebAPI beta 中不可用。您需要[从源代码构建](http://blogs.msdn.com/b/henrikn/archive/2012/04/09/getting-started-with-asp-net-web-stack-source-on-codeplex.aspx)或获取[每晚构建](http://blogs.msdn.com/b/henrikn/archive/2012/04/29/using-nightly-nuget-packages-with-asp-net-web-stack.aspx)。

过于简单的例子：

```
public HttpResponseMessage Post(MyResource myResource)
{
    ...
    if (goodStuff)
    {
        return ControllerContext.Request.CreateResponse(HttpStatusCode.Created, myNewResource);
    }
    else if (badStuff)
    {
        return ControllerContext.Request.CreateResponse(HttpStatusCode.BadRequest, badRequest);
    }
    else
    {
        return new HttpResponseMessage(HttpStatusCode.InternalServerError);
    }
} 
```

# linq - 使用 LINQ 查询实体框架，我应该如何进行连接？

> ID：10336734
> 
> 赞同：1
> 
> 时间：2012-04-26T15:38:36.653
> 
> 标签：linq, entity-framework, linq-to-entities

我对 EF 和 LINQ 有点陌生，每次我超越基础知识时，我都会开始对如何处理更高级的查询感到困惑。

![在此处输入图像描述](../Images/67c674dac40529654413d8143cfb0fe7.png)

在我的示例中，我试图返回与用户关联的频道列表，其中包括该用户拥有的报告数量。我已经了解了下面的查询，但我一直坚持如何包含报告计数......任何帮助将不胜感激。

```
 var query = from c in _channelRepository.GetTable().Include("User")
                    where c.UserId == user.Id && c.IsActive == true
                    orderby c.Name
                    select c; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:46:17.927

您可以通过创建具有所有所需属性的新类 (POCO) 来完成此操作。

例如

```
public class ChannelsWithCount
{
  public Channel Channel { get; set; }
  public User User { get; set; }
  public int? ReportsCount { get; set; }
}

var query = from c in _channelRepository.GetTable()
            where c.UserId == user.Id && c.IsActive == true
            orderby c.Name
            select new ChannelsWithCount
            {
               Channel = c,
               User = c.User,
               ReportsCount = c.User.Reports.Count(),
            } 
```

# php - 尝试创建 PHP 搜索脚本

> ID：10336740
> 
> 赞同：0
> 
> 时间：2012-04-26T15:38:56.143
> 
> 标签：php, mysql, search

我一直在尝试构建一个基本的搜索脚本。有很多麻烦。我需要搜索表单和搜索结果是两个单独的页面。脚本不工作。

搜索脚本将我带到 search_result 页面，但输入为空。

![在此处输入图像描述](../Images/9b92d17fa85ab1e26cb2f7f3247e234d.png)

```
<html>
<body>

<form action="search_result.php" method="POST">
<input type="text" name="reg" />
<input type="submit" value="Search" />
</form>

</html>
</body> 
```

第2页：

```
<html>
<body>

<?php
$host="localhost";
$username="XXXXXXXXXXX";
$password="XXXXXXXXXXX";
$db_name="XXXXXXXXXXXX";
$tbl_name="reg_add";
mysql_connect("$host", "$username", "$password") or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");

$record = $_POST['record']; // if coming from e.g. a form
$result=mysql_query(" SELECT * FROM reg_add WHERE reg='" . mysql_real_escape_string($record) . "'");

$row = mysql_fetch_assoc($result);
$first_name = $row['first_name'];
$last_name = $row['last_name'];
$reg = $row['reg'];
?>

<input  name="reg" value="<? echo "$record" ?>">

<input  name="first_name" value="<? echo "$first_name" ?>">

<input  name="last_name" value="<? echo "$last_name" ?>">

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:47:28.803

看起来你正在寻找`$_POST['record']`但经过`$_GET['reg']`

除了搜索不是很好，只有找到确切的才会找到它`reg`，这是你需要的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T15:48:13.563

HTML 表单提交方法是 GET 并且您尝试在 POST 方法中检索它。更改其中任何一个，并检查表单元素的键/名称属性。`

```
<form action="search_result.php" method="POST">
<input type="text" name="record" />
<input type="submit" value="Search" />
</form> 
```

# ruby-on-rails-3 - 在 Refinery PagesController 中访问自定义模型

> ID：10336744
> 
> 赞同：1
> 
> 时间：2012-04-26T15:39:15.217
> 
> 标签：ruby-on-rails-3, refinerycms

我将 RefineryCMS 集成到我现有的应用程序中，但是如何在炼油厂页面控制器中访问我现有的模型。想要在首页上显示一个注册表单，所以我必须创建一个新用户。

我试过这个：

```
 Refinery::PagesController.class_eval do

        before_filter :create_new_user, :only => [:home]

        protected

          def create_new_user
            @user = User.new
          end

     end 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-04T21:11:04.757

你必须给出错误信息。尝试`::User.new`访问默认的主命名空间。顺便说一句，Refinery 自带了，`Refinery::User`所以你可以用它作为你的用户模型。

# android - 动态创建 Android Widget(Spinner) 并将其翻转为水平或垂直时出错

> ID：10336756
> 
> 赞同：1
> 
> 时间：2012-04-26T15:39:45.637
> 
> 标签：android, android-layout, android-widget, android-spinner

我正在动态创建微调器和其他小部件。该应用程序在水平或垂直视图中都可以正常工作但是如果我从一个翻转到另一个，应用程序崩溃说下面的微调器有空指针异常并在此之后发生强制关闭

**我不知道到底是什么问题，我假设整个活动都是从 onCreate From 日志开始创建的，那么为什么它会得到空指针？（补充说它在一个视图中工作正常）**

下面是我动态设置的代码

```
 sku[lineNo].setOnItemSelectedListener (onSpinnerClick); 
```

这是微调器的 onItemSelectedLister

```
OnItemSelectedListener  onSpinnerClick = new OnItemSelectedListener() {
    @Override
    public void onItemSelected(AdapterView<?> parent, View v,int position, long id) {
        Log.v("This","onclick"+parent.getSelectedItem()+" view "+v.getId()+" pos  "+ //
        position+" id "+id+" parentid "+parent.getId()); // Error happens in this Line
        switch(parent.getId()){
           // do something

        }

    }

    @Override
    public void onNothingSelected(AdapterView<?> parent) {

    }
}; 
```

Here Comes Log Cat 错误消息（前几行）

```
FATAL EXCEPTION: main
java.lang.NullPointerException
at com.app.Activity.CurActivity$2.onItemSelected(CurActivity.java:1379)
at android.widget.AdapterView.fireOnSelected(AdapterView.java:864)
at android.widget.AdapterView.selectionChanged(AdapterView.java:847)
at android.widget.AdapterView.checkSelectionChanged(AdapterView.java:970)
at android.widget.AdapterView.handleDataChanged(AdapterView.java:952)
at android.widget.AbsSpinner.onMeasure(AbsSpinner.java:179)
at android.view.View.measure(View.java:8171) 
```

我希望信息足够。在此先感谢，只有一些线索会有所帮助

# objective-c - 将 UIImage 发送到仅接受 JSON 的 Web 服务（通过 RestKit）

> ID：10336757
> 
> 赞同：1
> 
> 时间：2012-04-26T15:39:47.000
> 
> 标签：objective-c, ios, json, uiimage, restkit

我无法将 UIImage 对象发送到仅接受 JSON 作为输入的 REST Web 服务。我已经设置好我的对象映射，它可以很好地生成 JSON，直到它到达任何 UIImages。

我阅读了有关单独加载图像的页面： [https](https://github.com/RestKit/RestKit/wiki/Attach-a-File-to-an-RKObjectLoader) ://github.com/RestKit/RestKit/wiki/Attach-a-File-to-an-RKObjectLoader 但这总是将内容类型从 application/json 更改为 application /xxx-form-url-encoded（或任何它）。

那么在不使用 RKParams 的情况下完成此任务的最佳方法是什么？

我在这里找到了另一个链接：[https](https://groups.google.com/forum/#!msg/restkit/QcTPucXXn4o/41IcKDCeoGAJ) ://groups.google.com/forum/#!msg/restkit/QcTPucXXn4o/41IcKDCeoGAJ 谈到了 RestKit 的早期版本，您可以在其中使用**RKObjectMappable**协议中的 **propertiesForSerialization**但该协议和方法没有在 0.10.0 中似乎可以使用更长的时间。

 **新版本中是否有某种方法允许您在尝试序列化之前用 base64 编码数据（因此 JSON 安全）替换 UIImage 的内容？

或者还有其他解决方案吗？任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T22:43:37.620

我已经使用 RestKit 完成了这项工作，方法是保存到“imageData”属性并在 base64 中编码图像。

不过，这对 CoreData 来说并不是很好，所以我编写了它，以便在从服务器获取图像（以 base64 编码）时，它将图像保存到磁盘，然后将路径存储在 Core Data 中。然后在将图像推送到服务器时，它会在磁盘上找到文件，编码为 base64，然后将其包含在 JSON 中。

这不是一个完美的方法，但如果你不经常来回发送图像，它会很好地工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T10:15:10.573

您是否尝试过使用 RKParams 并仅更改您的 serializationMIMEType？

```
 RKObjectManager* objectManager = [RKObjectManager objectManagerWithBaseURL:baseURL];;
    objectManager.serializationMIMEType = RKMIMETypeJSON; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T14:41:47.327

好吧，我想出了一种方法来做到这一点。

我最终为每个 UIImage 创建了一个额外的 NSString 属性，这就是我用来映射的，而不是实际的 UIImage。然后在 postObject 之前，我为每个图像生成 base64 代码并相应地填充 NSString 属性。

不是最好的方法，但仍然很想看看其他人的想法。**

# android - 菜单打开错误的活动

> ID：10336760
> 
> 赞同：0
> 
> 时间：2012-04-26T15:39:57.523
> 
> 标签：android, menu

我的问题是当我点击程序员它打开推特！

{见 main java 的结尾；这是我的菜单}

当我在模拟器上点击 twitter 时，它会打开程序员，反之亦然。

哪里有问题 ？

主java

```
package com.rum.city;

import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.Toast;

public class myMenu extends Activity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

Button bt_about = (Button) findViewById(R.id.about);
bt_about.setOnClickListener(new OnClickListener() 
{
        public void onClick(View v)
        {
            startActivity(new Intent(myMenu.this, about.class));

        }
   });

Button bt_blocks = (Button) findViewById(R.id.blocks);
bt_blocks.setOnClickListener(new OnClickListener() 
{
        public void onClick(View v)
        {
            startActivity(new Intent(myMenu.this, blocks.class));

        }
   });

Button bt_hosay = (Button) findViewById(R.id.hosay);
bt_hosay.setOnClickListener(new OnClickListener() 
{
        public void onClick(View v)
        {

            startActivity(new Intent(myMenu.this, hosay.class));
        }
});

Button bt_stati = (Button) findViewById(R.id.stati);
bt_stati.setOnClickListener(new OnClickListener() 
{
        public void onClick(View v)
        {
            startActivity(new Intent(myMenu.this, stati.class));

        }
   });
       }

public boolean onCreateOptionsMenu(Menu menu){
super.onCreateOptionsMenu(menu);
MenuInflater awesome = getMenuInflater();
awesome.inflate(R.menu.main_menu, menu);
return true;
     }
public boolean onOptionsItemSelected(MenuItem item){
    switch (item.getItemId()){
    case R.id.menunews:
        String url = "http://j.mp/rumnw";
        Intent i = new Intent(Intent.ACTION_VIEW);
        i.setData(Uri.parse(url));
        startActivity(i);
        return true;

        case R.id.menutwitter:
        String rb6 = "https://twitter.com/#!/Rum_City";
        Intent r = new Intent(Intent.ACTION_VIEW);
        r.setData(Uri.parse(rb6));
        startActivity(r);
        return true;

        case R.id.menuhwl:
            startActivity(new Intent("com.rum.city.HWL"));
        return true;

    }

    return false;
    }
} 
```

菜单xml

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
/>
<item 
android:id="@+id/menunews"
android:alphabeticShortcut="s"
android:title="news"   
/>    

    <item 
android:id="@+id/menutwitter"
android:alphabeticShortcut="t"
android:title="twitter"   
/>
    <item 
android:id="@+id/menuhwl"
android:title="programmer"
android:alphabeticShortcut="a">
</item> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T16:02:26.720

您最近更改了 id 吗？有时 IDE 会混淆并混淆 ID。解决这个问题的方法是清理项目并重建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T16:24:31.200

```
public boolean onOptionsItemSelected(MenuItem item){
    switch (item.getItemId()){
    case R.id.menunews:
        String url = "http://j.mp/rumnw";
        Intent i = new Intent(Intent.ACTION_VIEW);
        i.setData(Uri.parse(url));
        startActivity(i);
         break;

        case R.id.menutwitter:
        String rb6 = "https://twitter.com/#!/Rum_City";
        Intent r = new Intent(Intent.ACTION_VIEW);
        r.setData(Uri.parse(rb6));
        startActivity(r);
        break;

        case R.id.menuhwl:
            startActivity(new Intent("com.rum.city.HWL"));
      break;

    }

    }
return true;
} 
```

# jboss - 接缝中未触发动作

> ID：10336764
> 
> 赞同：0
> 
> 时间：2012-04-26T15:40:08.037
> 
> 标签：jboss, seam

在我的 pages.xml 文件中，我有这个指令：

```
 <page view-id="*" action="#{guestLogin.logIn}" /> 
```

但它永远不会被触发！我的 guestLogin.login 看起来像这样：

```
import org.jboss.seam.ScopeType;
import org.jboss.seam.annotations.*;

@Name("guestLogin")
@Scope(ScopeType.STATELESS)
public class GuestLogin {
    public void logIn()
       {
          throw new RuntimeException();
       }
} 
```

但是，当我通过应用程序单击时，我在应用程序中看不到 RunTimeException 或任何其他类型的异常。当我破坏 pages.xml 文件时，应用程序无法正确部署，因此不可能是我正在编辑错误的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T18:55:02.847

我的一个项目有相同的逻辑，有一些细微的差异，我不确定它们是否相关，但试一试！

```
<page view-id="/*" action="#{countrySelection.checkCountry()}" /> 
```

区别：

1）我有`view-id="/*"`而不是`view-id="*"`

2）我在方法中添加了括号

# php - PHP Echo URL - 添加目标？

> ID：10336765
> 
> 赞同：1
> 
> 时间：2012-04-26T15:40:08.927
> 
> 标签：php

我似乎无法在没有错误的情况下向 URL 添加目标：/ 有人可以帮忙吗？谢谢！

```
<?php 
echo "<a href=\"".$banner[$random]['link']."\"><img src=\"".$banner[$random]['img']."\" border=\"0\"></a>";
//result
?> 
```

我试过这个解决方案；

```
echo "<a href=\"".$banner[$random]['link']."\"><img src=\"".$banner[$random]['img']."\" border=\"0\".'" target="_blank"></a>"; 
```

这是完整的代码（它是一个随机图像 + URL 脚本）：

```
<?php 
$banner[1]['link'] = "http://www.url.com";
$banner[1]['img'] = "/banners/square_1.jpg";

$banner[2]['link'] = "http://url.com";
$banner[2]['img'] = "/banners/square_2.jpg";

//number of banners
$banners=2; 

srand((double)microtime()*1000000);     

$random = rand(1,$banners);     

echo "<a href=\"".$banner[$random]['link']."\"><img src=\"".$banner[$random]['img']."\" border=\"0\"></a>";
//result
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T15:45:24.637

只需使用：

```
echo "<a href=\"{$banner[$random]['link']}\" target=\"_blank\"><img src=\"{$banner[$random]['img']}\" border=\"0\"></a>"; 
```

为了便于阅读，我非常喜欢大括号。

但我个人会这样做：

```
echo "<a href='{$banner[$random]['link']}' target='_blank'><img src='{$banner[$random]['img']}' border='0'></a>"; 
```

为了更容易阅读。

# c++ - 如何在 OS X 下以编程方式加入无线网络？

> ID：10336768
> 
> 赞同：2
> 
> 时间：2012-04-26T15:40:26.423
> 
> 标签：c++, macos, wifi

首选 C 或 C++。这不是一个 Objective-C 项目。

我已经知道 SSID。网络上可能存在 WPA2 安全性。如果机器有多个无线接口，我需要从特定接口（例如 eth2）加入。

我意识到那里有各种命令行工具（例如，在[这个问题](https://stackoverflow.com/questions/4481005/get-wireless-ssid-through-shell-script-on-mac-os-x)的答案中提供的工具），但我想加入网络而不执行可能在或可能不在机器上的外部依赖项。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T15:47:46.777

该[`networksetup`](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man8/networksetup.8.html)工具*将*在机器上，因为它是标准操作系统的一部分。没有必要重新发明轮子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T16:00:17.270

**从终端，试试这个：**

```
networksetup -setairportnetwork $INTERFACE $SSID $PASSWORD 
```

或者，**如果您想将其集成到 Cocoa/Objective-C 应用程序中**：

在此处查看我的代码`runCmd`（[（Mac）创建执行 shell 脚本的 Xcode 应用程序](https://stackoverflow.com/questions/10082162/mac-creating-xcode-app-that-executes-shell-scripts/10082188#10082188)`NSTask`），了解如何使用和运行外部命令`NSPipe`。

在这种情况下，你应该这样称呼它：

```
[self runCmd:@"/usr/sbin/networksetup" 
    withArgs:[[NSArray alloc] initWithObjects:@"-setairportnetwork",
                                              @"INTERFACE",
                                              @"SSID",
                                              @"PASS",
                                              nil]]; 
```

* * *

> 但我想加入网络而不执行可能在机器上也可能不在机器上的外部依赖项。

它**会**在那里...... :-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T16:13:31.417

在 C 中，您可以执行以下操作：

```
execlp("networksetup", "networksetup", "-setairportnetwork", "$INTERFACE", "$SSID", "$PASSWORD", NULL); 
```

# mysql - 在生成电子邮件时解密 MySQL 密码以通知用户密码

> ID：10336773
> 
> 赞同：1
> 
> 时间：2012-04-26T15:40:50.940
> 
> 标签：mysql, encryption, passwords

我正在实现一个登录脚本，其中包括向用户发送用户名和密码（存​​储在 MySQL 数据库中）的功能，以防他们忘记了。脚本的默认行为是发送用户名和***新***密码，即生成临时密码。

我想知道是否有办法只通过电子邮件发送当前密码，这样用户就不必重置它。目前密码已加密，但我无法弄清楚这是如何完成的。密码格式如下：

*2D4CE9DDA883E4FBE985A3439D9DCDCBD88367A0

因此，当我尝试发送当前密码时，会发送加密密码。

有没有办法在发送提醒电子邮件时解密密码，还是我必须保持原样？

谢谢，

缺口

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T15:42:59.023

你真的不应该这样做，即使它是可能的（我怀疑）。电子邮件极不安全，用户倾向于重复使用密码：

1.  用户想出一个密码并在包括你的网站在内的一堆网站上使用它
2.  您发送一封忘记密码的电子邮件，其中包含他们的密码
3.  攻击者[拦截](http://en.wikipedia.org/wiki/Packet_analyzer#Capabilities)了该电子邮件，现在在他们使用的每个站点上都有用户密码

只需像其他人一样给他们一个新密码（并鼓励或要求他们在下次登录时更改密码）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T15:44:51.857

密码可能是散列的，而不是加密的。所以不，你不能解密它们。如果它们实际上是加密的，则需要密钥来解密它们。无论如何，散列（很可能是 SHA1）是更安全的方式。还要在这种情况下查看关键字“盐”。

只需为他们生成一个新的临时密码并强制他们在第一次登录后更改它。这是有充分理由的常用方法。不要像一些大型软件公司一样，重视舒适而不是安全。

# python - Matplotlib - 网格和绘制颜色编码的 y 值/数据范围

> ID：10336774
> 
> 赞同：6
> 
> 时间：2012-04-26T15:40:52.033
> 
> 标签：python, matplotlib

新的 matplotlib 用户在这里。我正在尝试绘制颜色编码的数据行，或者更好的是，绘制颜色编码的数据范围。沿 y 轴的颜色编码间隔。粗略的演示脚本如下：

```
import matplotlib.pyplot as plt

# dummy test data
datapoints = 25
maxtemps = [ 25, 24, 24, 25, 26, 27, 22, 21, 22, 19, 17, 14, 13, 12, 11, 12, 11, 10, 9, 9, 9, 8, 9, 9, 8 ]
mintemps = [ 21, 22, 22, 22, 23, 24, 18, 17, 16, 14, 10, 8, 8, 7, 7, 6, 5, 5, 5, 4, 4, 4, 3, 4, 3 ]
times = list(xrange(datapoints))

# cap a filled plot at a given level
def capped(indata, cap):
    outdata  = [0] * datapoints
    lcount = 0

    while lcount < datapoints:
        if indata[lcount] > cap:
            outdata[lcount] = cap
        else:
            outdata[lcount] = indata[lcount]
        lcount += 1
    return outdata

fig = plt.figure()

ax1 = fig.add_subplot(111)
ax1.fill_between(times, 0, maxtemps, color='#FF69B4', zorder=1, linewidth=0.1)
ax1.fill_between(times, 0, capped(maxtemps,25), color='#F08228', zorder=2, linewidth=0.1)
ax1.fill_between(times, 0, capped(maxtemps,20), color='#E6AF2D', zorder=3, linewidth=0.1)
ax1.fill_between(times, 0, capped(maxtemps,15), color='#E6DC32', zorder=4, linewidth=0.1)
ax1.fill_between(times, 0, capped(maxtemps,10), color='#A0E632', zorder=5, linewidth=0.1)
ax1.fill_between(times, 0, capped(maxtemps,5), color='#00DC00', zorder=6, linewidth=0.1)
ax1.fill_between(times, 0, mintemps, color='#FFFFFF', zorder=7, linewidth=0.1)
plt.setp(ax1.get_xticklabels(), visible=False)
ax1.grid(True, zorder=8)
ylim(0)
plt.draw()
plt.show() 
```

完成了大部分工作，但它引出了两个问题。

1.  有没有一种更直接、更优雅的方式来使用我不知道的 matplotlib 功能来实现同样的效果？也就是说，要么绘制一个（比如说）时间序列数据的一维数组，要么说明两组此类数据之间的范围（例如，最高、最低温度）？

2.  尽我所能，我无法说服网格线绘制在图形的顶部。它们似乎总是位于第一组绘制数据的顶部，然后被后续绘制的数据所掩盖，而下半部分则为空白。zorder 的使用似乎被忽略了。

非常感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T01:34:39.653

回答你的第二个问题：

您可以将所有`fill_between`zorder 设置为 0.1、0.2、0.3 ...

网格线属于xaxis和yaxis，xaxis和yaxis的zorder为2.5。因此任何小于 2.5 的 zorder 都会显示在网格线下方。

我写了一些与你类似的代码，但使用 for 循环和`numpy.interp`,`numpy.clip`来做剪辑图：

```
import pylab as pl
import numpy as np
maxtemps = [ 25, 24, 24, 25, 26, 27, 22, 21, 22, 19, 17, 14, 13, 12, 11, 12, 11, 10, 9, 9, 9, 8, 9, 9, 8 ]
mintemps = [ 21, 22, 22, 22, 23, 24, 18, 17, 16, 14, 10, 8, 8, 7, 7, 6, 5, 5, 5, 4, 4, 4, 3, 4, 3 ]
times = list(xrange(len(mintemps)))

colors = [
    (25, '#FF69B4'),
    (20, '#F08228'),
    (15, '#E6AF2D'),
    (10, '#E6DC32'),
    (5,  '#A0E632'),
    (0,  '#00DC00')
]

# change 300 to larger number if you need more accuracy.
x = np.linspace(times[0], times[-1], 300) 
maxt = np.interp(x, times, maxtemps)
mint = np.interp(x, times, mintemps)

last_level = np.inf
for level, color in colors:    
    tmp_min = np.clip(mint, level, last_level)
    tmp_max = np.clip(maxt, level, last_level)
    pl.fill_between(x, tmp_min, tmp_max, lw=0, color=color)
    last_level = level

pl.grid(True)
pl.show() 
```

![在此处输入图像描述](../Images/cb3a1c95adcb7f37243525d23e708198.png)

# android - 在 SurfaceView 中显示 CameraPreview 和自定义视图

> ID：10336778
> 
> 赞同：0
> 
> 时间：2012-04-26T15:41:08.467
> 
> 标签：android, android-camera, surfaceview, android-canvas, surfaceholder

我遇到以下问题：我目前正在使用 SurfaceHolder 在 SurfaceView 上显示 CameraPreview，如此处所述[Camera Dev Guide](http:////%20deprecated%20setting,%20but%20required%20on%20Android%20versions%20prior%20to%203.0%20%20%20%20%20%20%20%20%20mHolder.setType%28SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS%29;)。所以它提到我必须像这样设置我的 SurfaceHolder 的类型；

```
// deprecated setting, but required on Android versions prior to 3.0
 mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS); 
```

不幸的是，该设置`mHolder.lockCanvas()`将失败，因此我无法再在该画布上绘图。是否有可能在一个 SurfaceView 上绘制 PreviewFrame 以及自己的 View？

如果不是，是否可以渲染两个 SurfaceView，以便相机将用作背景，而第二个 SurfaceView 将渲染其任何“在顶部”的视图？让它运行的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T16:04:42.940

是的，我已经这样做了。您可以做的是创建一个相对布局，然后您可以使用适当的布局参数将您的表面视图添加到其中。然后您可以使用适当的布局参数在相同的相对布局上添加您的其他视图。

# jquery - 如何根据当前使用 Jquery 可见的字段集编写验证代码

> ID：10336779
> 
> 赞同：1
> 
> 时间：2012-04-26T15:41:08.733
> 
> 标签：jquery, html

我们需要在这个 codeIgniter/PHP 应用程序中检索所有必填字段，因为使用了隐藏/显示 js 代码，我如何使用 jquery 获取所有可见的必填字段？请参阅随附的示例 html。

在 prod 应用程序中，所有必填字段在标签 [ * ] 上都有这个 css。有没有办法使用 jquery 提取所有这些字段？这是问题，这个 [ * ] 在标签上，我实际上需要获取/检查关联字段是否为空，并且该字段可以是文本、下拉列表、复选框、单选等。如果为空，我需要防止提交表单并显示错误消息。

简而言之，提交按钮的**OnClick** ，如果这些字段中的任何一个为空，则抓取**当前可见的字段集中****的所有必需字段**[与检测高度和宽度有关]，停止表单提交并显示错误消息，即: "此字段为必填项" "此字段为必填项" "此字段为必填项" [这将进入页面顶部的 div]

 ****下面的测试代码：**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<title>Project Overview</title>
<script type="text/javascript">
var projectType_Field_Id = '1169';

//Project Types
var projectTypes = new Array (
    {id : '11', value:'Cars'},
    {id : '12', value:'Boats'},
    {id : '13', value:'Planes'});

//occurs onLoad
function formOnLoad()
{
    var project_type = document.getElementById(projectType_Field_Id).value;
    refreshSections(project_type);
    }
/*
 *  Onchange - Project Type
 */
function projectTypeChange()
{ 
    var project_type = document.getElementById(projectType_Field_Id).value;
    refreshSections(project_type);
}

function refreshSections(selectedType) 
{    
    for (var i = 0; i < projectTypes.length; i++) 
    {
        if (projectTypes[i].value == selectedType) 
        {
            document.getElementById("section-"+ projectTypes[i].id).style.display = '';
        } else {
            document.getElementById("section-"+ projectTypes[i].id).style.display = 'none';
        }
    }

}

</script>
</head>

<body onload="formOnLoad();">
<form method="post" action="">
<fieldset name="mainSection">
                <legend style="color:blue; font-weight:bold">Project Overview Section</legend>

                <table style="width: 100%">
                    <tr>
                        <td style="height: 33px; width: 178px; color:maroon">Name<span class="required"> * </span></td>
                        <td style="height: 33px"><input  id="1125" name="1125" type="text" class="valuetext fld_required"/></td>
                    </tr>
                    <tr>
                        <td style="height: 33px; width: 178px; color:maroon">Email<span class="required"> * </span></td>
                        <td style="height: 33px"><input  id="1026" name="1026" type="text" class="valuetext fld_required"/></td>
                    </tr>
                    <tr>
                        <td style="width: 178px">Product Title</td>
                        <td><input  id="1089" name="1089" type="text" /></td>
                    </tr>
                    <tr>
                        <td style="width: 178px">Product Type</td>
                        <td><select id="1169" name="1169"  onChange="projectTypeChange();">
                        <option value="">Select</option>
                        <option value="Cars">Cars</option>
                        <option value="Boats">Boats</option>
                        <option value="Planes">Planes</option>
                        </select></td>
                    </tr>
                                    </table>
            </fieldset><br /><br />

            <fieldset id="section-11" name="section-11">
                <legend style="color:fuchsia; font-weight:bold">Car Details Section</legend>

                <table cellpadding="2" style="width: 100%">
                    <tr>
                        <td style="width: 334px; height: 35px"><label style="color:maroon">Size:</label><span class="required"> * </span></td>
                        <td style="height: 35px"><input id="1245" name="1245" type="text" class="valuetext fld_required"/></td>
                    </tr>
                    <tr>
                        <td style="height: 35px; width: 334px">Color:</td>
                        <td style="height: 35px">
                        <select id="1433" name="1433">
                <option value="Orange">Orange</option>
                        <option value="Blank">Blank</option>
                        <option value="Green">Green</option>
            </select></td>
                    </tr>
                    <tr>
                        <td style="width: 334px">Description:</td>
                        <td>
                        <textarea id="1290" name="1290" rows="2" style="width: 433px"></textarea></td>
                    </tr>
                </table>
                            </fieldset>
                            <br />
            <fieldset id="section-12" name="section-12">
                <legend style="color:fuchsia; font-weight:bold">Plane Details Section</legend>

                <table cellpadding="2" style="width: 100%">
                    <tr>
                        <td style="width: 334px; height: 35px"><label  style="color:maroon">Size:</label><span class="required"> * </span></td>
                        <td style="height: 35px"><input id="1254" name="1254" type="radio" class="valuetext fld_required"/>Small
                        <input id="1254" name="1254" type="radio" />Large</td>
                    </tr>
                    <tr>
                        <td style="height: 35px; width: 334px">Color:</td>
                        <td style="height: 35px">
                        <select id="1433" name="1433">
                <option value="Orange">Orange</option>
                        <option value="Blank">Blank</option>
                        <option value="Green">Green</option>
            </select></td>
                    </tr>
                    <tr>
                        <td style="width: 334px">Description:</td>
                        <td>
                        <textarea id="1290" name="1290" rows="2" style="width: 433px"></textarea></td>
                    </tr>
                </table>
                            </fieldset><br />
            <fieldset id="section-13" name="section-13">
                <legend style="color:fuchsia; font-weight:bold">Boat Details Section</legend>

                <table cellpadding="2" style="width: 100%">
                    <tr>
                        <td style="width: 334px; height: 35px"><label  style="color:maroon">Size:</label><span class="required"> * </span></td>
                        <td style="height: 35px"><select id="1245[]" name="1245[]" class="valuetext fld_required">
                        <option value="">Select</option>
                        <option value="Small">Small</option>
                        <option value="Medium">Medium</option>
                        <option value="Large">Large</option>
                        </select></td>
                    </tr>
                    <tr>
                        <td style="height: 35px; width: 334px">Color:</td>
                        <td style="height: 35px">
                        <select id="1433" name="1433">
                <option value="Orange">Orange</option>
                        <option value="Blank">Blank</option>
                        <option value="Green">Green</option>
            </select></td>
                    </tr>
                    <tr>
                        <td style="width: 334px">Description:</td>
                        <td>
                        <textarea id="1290" name="1290" rows="2" style="width: 433px"></textarea></td>
                    </tr>
                </table>
                            </fieldset>
<fieldset id="section-1011" name="section-1011">
                <legend style="color:green; font-weight:bold">Misc Info Section</legend>

                <table cellpadding="2" style="width: 100%">
                    <tr>
                        <td style="width: 334px; height: 35px"><label>Size:</label></td>
                        <td style="height: 35px"><input id="1301" name="1301" type="text" /></td>
                    </tr>
                    <tr>
                        <td style="height: 35px; width: 334px">Color:</td>
                        <td style="height: 35px">
                        <select id="1302" name="1302">
                <option value="Orange">Orange</option>
                        <option value="Blank">Blank</option>
                        <option value="Green">Green</option>
            </select></td>
                    </tr>
                    <tr>
                        <td style="width: 334px">Description:</td>
                        <td>
                        <textarea id="1303" name="1303" rows="2" style="width: 433px"></textarea></td>
                    </tr>
                </table>
                            </fieldset>
                            <input name="Send Job" type="submit" value="Send Job" />

</form>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T15:55:17.577

我会做这样的事情：

```
$("form").on("submit", function () {

    // get the empty elements of the visible fieldsets
    var $empties = $("fieldset:visible").find(":input").filter(function () {

        // for me, a blank space is empty
        // remove the $.trim() if that's not the case
        return $.trim($(this).val()) === "";
    });

    // put some error messages somewhere
    if ($empties.length) {
        $empties.each(function () {

            // I am assuming the "name" attribute is meaningful
            $("#errorDiv").append("Please fill in the " + this.name + "<br />");
        });
    }

    // only submit if there are no empties
    return !$empties.length;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:49:15.343

使用 JQuery，您可以使用[:visible](http://api.jquery.com/visible-selector/)选择器来查找所有可见的内容

```
$("form > :visible") 
```

然后你可以使用 JQuery 中的[is](http://api.jquery.com/is/)方法来找出它是什么元素......然后对它们做任何你想做的事情。

或者，您可以使用[JQuery Validation](http://docs.jquery.com/Plugins/Validation)向控件添加一些规则，如果您禁用它们，它们将自动不被验证，如果它们被重新启用，您可以执行他们在[这篇文章](https://stackoverflow.com/a/7816217/336542)中所做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T15:50:24.337

如果您可以稍微修改 html，最简单的方法（IMO）是在必填字段本身而不是标签上放置一个“必需”类。然后，您可以选择它们

```
$("fieldset:visible *.required").each(function() {
... check if $(this) is empty and display a message if necessary...
}) 
```**

# android - Android CTS 测试超时

> ID：10336787
> 
> 赞同：1
> 
> 时间：2012-04-26T15:41:18.443
> 
> 标签：android

我一直在尝试在从源代码构建的 Android 副本上使用 Android CTS 包，但在大量测试超时然后失败时遇到了麻烦。

我是从标签 android-cts-verifier-4.0.3_r1 构建的。我可以在我的测试设备上安装图像，它似乎工作正常。从那时起，我使用 USB 无线运行 CTS，得到了类似的结果（除了一些网络测试在无线连接时失败，这并不奇怪）。我已经尝试了 eng 和 userdebug 构建，并且我遵循了 CTS 说明中的所有步骤（pdf 文件，而不是网页）。

最大的问题似乎在 android.media 包中。我得到如下结果：

```
-- testLocalVideo_3gp_H263_176x144_300kbps_12fps_AAC_Mono_24kbps_11025Hz    
fail

Test failed to run to completion. Reason: 'Failed to receive adb shell test output within 600000 ms. Test may have timed out, or adb connection to device became unresponsive'. Check device logcat for details 
```

其中对应的 logcat 条目是一长串：

```
I/AwesomePlayer(   93): after SEEK_VIDEO_ONLY we're late by 387.07 secs
I/AwesomePlayer(   93): we're much too late (387.09 secs), video skipping ahead 
```

失败的视频并不总是完全相同，也不是所有视频都失败了，实际上不仅仅是 android.media 有问题（我也在 android.holo 包中看到过）。

相对较短的测试有 10 分钟的超时时间，这将我的测试时间增加了几个小时，而且失败的测试让我担心（因为最终我希望使用 CTS 测试修改后的 android 构建）。

有没有人见过类似的东西，如果有，有什么解决办法吗？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T15:25:59.663

我实际上已经想出了如何解决这个问题，所以我正在回答自己。

如果我使用从实际设备中提取的二进制文件构建 Android，则使用脚本

```
device/$MANUFACTURER/$DEVICE/extract-files.sh 
```

各种媒体测试不会超时。我已经在摩托罗拉 Xoom (wingray) 和三星 Galaxy Nexus (maguro) 上对此进行了测试。因此，这似乎是某种驱动程序问题。

这也使得似乎没有办法让模拟器工作（但由于模拟器本身有足够的其他问题，这可能是可以理解的）。

# c# - 在 windows phone 中创建自定义事件

> ID：10336788
> 
> 赞同：1
> 
> 时间：2012-04-26T15:41:18.523
> 
> 标签：c#, windows-phone-7, events

我有这样的用例：

在我的应用程序中，一些实例需要触发事件，它们已经发生了变化。但是，我不想保留对需要更改的实例的引用，所以我想发送事件并在某些地方以某种方式监听它，但是如何在 windows phone 的 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T16:24:29.867

您正在寻找 EventAggregator。您可以在一些工具包上进行构建，例如[GalaSoft 的 MVVM Light](http://galasoft.ch/mvvm/)和[Caliburn Micro](http://caliburn.codeplex.com/)。[您可以在http://www.mindscapehq.com/blog/index.php/2012/02/01/caliburn-micro-part-4-the-event-aggregator/](http://www.mindscapehq.com/blog/index.php/2012/02/01/caliburn-micro-part-4-the-event-aggregator/)找到一个很好的例子。

它的基本要点是将 EventAggregator 注入到您的 ViewModel 中。这个 ViewModel 会发布一个事件。其他 ViewModel 将订阅此事件。

# bison - FLEX/BISON - 如何将用户输入转换为小写？

> ID：10336790
> 
> 赞同：0
> 
> 时间：2012-04-26T15:41:28.973
> 
> 标签：bison, flex-lexer

如何在 Flex 中将用户输入转换为小写？上网查了一下，没发现什么有用的。

当我尝试这样做时：

```
yylval.string = strdup(tolower( yytext) ); 
```

我收到错误说明：传递 'tolower' 的 arg 1 从指针中生成整数而不进行强制转换。

谢谢，莎拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T16:30:35.520

```
%{
#include <stdio.h>
#include <ctype.h>
%}
%%
[A-Z]    putchar(tolower(*yytext)); 
```

如果要将整个字符串转换为小写，则需要`tolower`在循环中调用，因为`tolower`只转换单个字符：

```
for (i = 0; yytext[i]; i++)
    yytext[i] = tolower(yytext[i]);
yylval.string = strdup(yytext); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T10:35:16.247

您可以在顶部的“C”部分重新定义[YY_INPUT宏：](http://westes.github.io/flex/manual/Generated-Scanner.html)

```
#define YY_INPUT(buf,result,max_size) \
        { \
        int c = '*', n; \
        for ( n = 0; n < max_size && \
                 (c = getc( yyin )) != EOF && c != '\n'; ++n ) \
            buf[n] = (char) tolower(c); \
        if ( c == '\n' ) \
            buf[n++] = (char)  tolower(c); \
        if ( c == EOF && ferror( yyin ) ) \
            YY_FATAL_ERROR( "input in flex scanner failed" ); \
        result = n; \
        } 
```

# javascript - 如何将 JS 对象转换为数组

> ID：10336794
> 
> 赞同：42
> 
> 时间：2012-04-26T15:42:03.800
> 
> 标签：javascript, arrays, hash

我需要转换哈希图

```
{ 
    "fruit" : ["mango","orange"],
    "veg"   : ["carrot"]
} 
```

到

```
[ 
  { "type" : "fruit" , "name" : ["mango","orange"] } ,
  { "type" : "veg" ,   "name" : ["carrot"] } 
] 
```

我怎么做？？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-04-26T15:47:03.777

您可以这样做（在工作片段中）：

```
var input = { 
    "fruit" : ["mango","orange"],
    "veg"   : ["carrot"]
} 

var output = [], item;

for (var type in input) {
    item = {};
    item.type = type;
    item.name = input[type];
    output.push(item);
}

// display result
document.write(JSON.stringify(output));
```

* * *

或者，如果您或其他人一直在`Object`使用可枚举属性扩展原型（我个人认为这是一种不好的做法），那么您可以使用它来保护它：

```
var input = { 
    "fruit" : ["mango","orange"],
    "veg"   : ["carrot"]
} 

var output = [], item;

for (var type in input) {
    if (input.hasOwnProperty(type)) {
        item = {};
        item.type = type;
        item.name = input[type];
        output.push(item);
    }
}

// display result
document.write(JSON.stringify(output));
```

* * *

并且，使用一些更现代的功能：

```
var input = { 
    "fruit" : ["mango","orange"],
    "veg"   : ["carrot"]
};

var output = Object.keys(input).map(function(key) {
   return {type: key, name: input[key]};
});

// display the result
document.write(JSON.stringify(output));
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-04-26T16:03:31.943

在支持 ES5 的浏览器中——或者你为它添加了[shim](https://github.com/kriskowal/es5-shim)的地方：

```
var stuff = { 
    "fruit" : ["mango","orange"],
    "veg"   : ["carrot"]
}

var array = Object.keys(stuff).map(function(key) {
    return {"type" : key, "name" : stuff[key] }
}) 
```

请参阅：[Object.keys](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/map)，[数组的映射](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/map)

或者，以老式方式：

```
var stuff = { 
    "fruit" : ["mango","orange"],
    "veg"   : ["carrot"]
}

var array = []

for (var key in stuff) {
    if (stuff.hasOwnProperty(key)) {
        array.push({"type" : key, "name" : stuff[key] })
    }
} 
```

请注意，在这两种情况下，数组的值都是共享的，因为在 JS 中对象是通过引用传递的。因此，例如，`stuff["fruit"]`并`array[0].name`指向数组的相同引用`["mango", "orange"]`。这意味着，如果您更改其中一个，另一个也将更改：

```
stuff["fruit"].push("apple");
alert(array[0].name); // "mango", "orange", "apple" 
```

为避免这种情况，您可以使用[slice](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/slice)来获得数组的一级深层副本。所以在上面的代码中，而不是：

```
"name" : stuff[key] 
```

你将会有：

```
"name" : stuff[key].slice(0) 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2016-12-27T01:07:51.717

对于那些使用 ES6 地图的人...

假设你有...

```
const m = new Map()
m.set("fruit",["mango","orange"]);
m.set("veg",["carrot"]); 
```

您可以使用...

```
const arr = Array.from(map, ([key, val]) => {
  return {type: key, name: val};
}); 
```

请注意，[Array.from](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/from)采用可迭代对象以及类似数组的对象。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-05-22T22:55:15.600

我想给出一个“单线”解决方案：

```
var b = Object.keys(a).map(e => { return { type:e, name:a[e] } }); 
```

为您服务的语言经济。要求将对象转换为数组的问题，所以我没有重复上面的答案，不是吗？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-26T15:45:55.883

它看起来很简单，您的地图的键是类型，值是名称，所以只需遍历地图并将对象插入到列表中，例如

```
var d = { "fruit" : ["mango","orange"],"veg" :["carrot"]} 
var l = []
for(var type in d){
    l.push({'type':type, 'name': d[type]})
}
console.log(l) 
```

输出：

```
[{"type":"fruit","name":["mango","orange"]},{"type":"veg","name":["carrot"]}] 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-05-29T17:49:26.957

不完全是您正在寻找的答案，但它可能对一般用途有用。

```
var hash2Array = function(hash, valueOnly) {
  return Object.keys(hash).map(function(k) {
    if (valueOnly) {
      return hash[k];
    } else {
      var obj={};
      obj[k] = hash[k];
      return obj;
    }
  });
};

//output
hash2Array({a:1, b:2});     // [{a:1}, {b:2}]
hash2Array({a:1, b:2},true) // [1,2] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-01T04:21:20.747

如果使用 underscore.js：

```
var original = { 
   "fruit" : ["mango","orange"],
   "veg"   : ["carrot"]
}
var converted = _.map(original, function(name, type){
   return {
      type: type, 
      name: name
   };
}); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2014-07-25T10:43:15.967

不需要循环

```
var a = { 
   "fruit" : ["mango","orange"],    
   "veg"   : ["carrot"]

};  

var b = [  
    { "type" : "fruit" , "pop" : function(){this.name = a[this.type]; delete this.pop; return this} }.pop() ,          
    { "type" : "veg" ,   "pop" : function(){this.name = a[this.type]; delete this.pop; return this} }.pop()   
] 
```

# javascript - Strange behaviour of GestureEvent.rotation on iOS webkit

> ID：10336802
> 
> 赞同：0
> 
> 时间：2012-04-26T15:42:24.417
> 
> 标签：javascript, ios, html, touch, mobile-website

I am using javascript Gesture events to detect multitouch pan/scale/rotation applied to an element in a HTML document.

Visit this URL with an iPad: [http://www.merkwelt.com/people/stan/rotate_test/](http://www.merkwelt.com/people/stan/rotate_test/)

You can touch the element with two finger and rotate it, but sometimes the rotation property goes go astray and my element flips around many full rotations.

Here is part of my code, I am really only taking the value directly from the event object:

```
...bind("gesturechange",function(e){        
       e.preventDefault();      
       curX = e.originalEvent.pageX - startX;
       curY = e.originalEvent.pageY - startY;
       node.style.webkitTransform = "rotate(" + (e.originalEvent.rotation) + "deg)" +
                     " scale(" + e.originalEvent.scale + ") translate3D(" + curX + "px, " + curY + "px, 0px)";              
}... 
```

What happens is that the value gets either 360 degrees added or subtracted, so I could monitor the value and react to sudden large changes, but this feels like a last resort.

Am I missing something obvious?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T03:21:33.063

我找到了解决方案。

为了避免不反映真实手指移动的旋转突然变化，您需要对此进行测试。如果旋转在任一方向上变化超过 300 度，我会进行测试，如果是，那么您需要根据方向添加或减去 360。不是很直观，但它确实有效。

固定页面在这里： [http ://www.merkwelt.com/people/stan/rotate_test/index2.html](http://www.merkwelt.com/people/stan/rotate_test/index2.html)

这是代码

```
 <script type="text/javascript">
        var node;
        var node_rotation=0;
        var node_last_rotation=0;

        $('.frame').bind("gesturestart",function(e){    
            e.preventDefault();
            node=e.currentTarget;       
            startX=e.originalEvent.pageX;
            startY=e.originalEvent.pageY;
            node_rotation=e.originalEvent.rotation;
            node_last_rotation=node_rotation;

        }).bind("gesturechange",function(e){
            e.preventDefault(); 
            //whats the difference to the last given rotation?
            var diff=(e.originalEvent.rotation-node_last_rotation)%360;
            //test for the outliers and correct if needed
            if( diff<-300)
            {
                diff+=360;
            }
            else if(diff>300)
            {
                diff-=360;
            }   
            node_rotation+=diff;
            node_last_rotation=e.originalEvent.rotation;     

            node.style.webkitTransform = "rotate(" + (node_rotation) + "deg)" +
                " scale(" + (e.originalEvent.scale) + 
                ") translate3D(" + (e.originalEvent.pageX - startX) + "px, " + (e.originalEvent.pageY - startY) + "px, 0px)";   

        }).bind("gestureend",function(e){
            e.preventDefault();                  
        });
    </script> 
```

# excel - VB Excel PasteSpecial requiring clipboard content?

> ID：10336805
> 
> 赞同：1
> 
> 时间：2012-04-26T15:42:30.963
> 
> 标签：excel, vba, copy-paste, transpose, qlikview

I'm having a problem with VB PasteSpecial.
This code works perfectly in Excel VB (given that you have selected cells with data)

```
Selection.Copy
Range("A1").Select
Selection.PasteSpecial Paste:=xlPasteAll, Operation:=xlNone, SkipBlanks:= _
    False, Transpose:=True
Application.CutCopyMode = False 
```

However, I'm using a third-party software (QlikView) that I extract the data from, which is then supposed to be copied into the Excel document. There is no problem with the normal paste but it **MUST** be transposed.

Obviously, since I dont have any content in the workbook to copy, I don't use

```
Selection.Copy 
```

But because I don't copy anything from the document first (even though there are table data in the copy memory), this call returns bad argument exception (this also happens if I copy cells in that VERY workbook first and then just call the macro for transposing it).

> Runtime error '1004' returned. PasteSpecial method of Range class failed.

Yes, I can paste it into the document, then cut it from the area, move it to the correct place and transpose it, but that is bad coding.

Have any of you experienced this and got a way to get this working ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-07T09:54:19.443

The reason that you cannot use PasteSpecial to transpose the data is due to the format of the data as it resides in the clipboard after you copy it from QlikView.

When you copy data from a QlikView table (which I assume you are copying from), it copies it to the clipboard in three formats: HTML, Unicode and standard (code-paged) text:

![Screenshot of Clipboard viewer showing the different formats that QlikView copies to the clipboard](../Images/defd366fbcf3cc028e6098dc26c88783.png)

Comparing this with Excel's clipboard formats:

![Screenshot of Clipboard viewer showing the different formats that Excel copies to the clipboard](../Images/c7a9dd77ca4c81aadd7343cac080182a.png)

As you can see, when copying data in Excel, it stores the data in the clipboard in its own format and as such knows how to transpose the cells if required. For QlikView, the clipboard just contains plain text, therefore Excel does not know how to transpose this and as a result the PasteSpecial call fails.

If you are copying from a table in QlikView to Excel, I would recommend performing the transposition already in QlikView if you can by using a "Pivot Table" chart in QlikView (as you can drag the columns and rows around how you wish). Otherwise you will have to use Siddharth's code and transpose it once it's in Excel.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T17:44:53.837

您将不得不使用上面提到的方法。你也可以试试这个

```
Range("A1").Select
ActiveSheet.PasteSpecial Format:="Text", Link:=False, DisplayAsIcon:=False
Application.CutCopyMode = False 
```

但是您将不得不再次复制并转置它。否则，没有直接的方法可以转置它。

# message-queue - Can I treat Quartz groups like queues?

> ID：10336807
> 
> 赞同：1
> 
> 时间：2012-04-26T15:42:46.187
> 
> 标签：message-queue, quartz-scheduler, quartz.net, job-scheduling

I am thinking about using Quartz and I would like to have each group execute 1 job at a time. But all groups should fire in parallel. The reason being that I am connecting to physical devices that can only handle one socket at a time.

As far as I can tell I can have StateFull jobs which will only execute 1 of that job type at a time. I can set the scheduler thread count to 1 to ensure that the scheduler only executes one at a time. Each is not what I want but I might be able to achieve what I want be creating a scheduler for each group.

Is there a better solution than quartz for queuing?

# javascript - Forced Image download - file extension missing

> ID：10336809
> 
> 赞同：1
> 
> 时间：2012-04-26T15:42:48.950
> 
> 标签：javascript, http-headers

I got an AJAX function that loads a png from a canvas graph element and does (per user choice) open the image in a new browser window *or* force a download.

While the first works without a problem, I got a problem with adding the file extension to the download. Currently I simply get none, using the following HttpHeaders: `image/octet-stream`, `application/download(force-download, x-download)`

Gladly some SO user put a [JsFiddle](http://jsfiddle.net/kaiser/KkKXR/32/) together. ^(1))

**Question**: How could I go and append a file extension (.png/.jpeg) to the forced download as seen in the JsFiddle example?

^(1) Sry, but I don´t know the User name anymore.)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:54:54.350

不幸的是，使用 data uris 是不可能提供文件名的。您可能应该查看 HTML5 BlobBuilder API - [http://blogs.msdn.com/b/ie/archive/2012/01/27/creating-files-through-blobbuilder.aspx](http://blogs.msdn.com/b/ie/archive/2012/01/27/creating-files-through-blobbuilder.aspx)

即使使用 BlobBuilder，我发现只有 Chrome 承认您提供的文件名，而不是 Firefox。

# java - Jython、子进程和 msvcrt ......有可能吗？

> ID：10336812
> 
> 赞同：0
> 
> 时间：2012-04-26T15:43:03.873
> 
> 标签：java, python, jython, msvcrt, python-multithreading

我正在尝试围绕 Python 模块构建一个包装器，以将其嵌入到我的 java 代码中。

看起来这个模块使用了很多技巧，比如子进程、线程等等

（实际上它本身就是一个模块，它控制按原样提供的 C 实用程序并且仅作为二进制文件，我试图避免重新编码这个 python 包装器已经提供的内部逻辑和其他工具的成本过高）

顺便说一句，当我从 Java 实例化我自己的包装器时，我得到：

```
------------------
Exception in thread "MainThread" Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "__pyclasspath__/mywrapper.py", line 303, in <module>
  File "C:\jython2.5.2\Lib\subprocess.py", line 375, in <module>
    import msvcrt
ImportError: No module named msvcrt 
```

如果我查看我的硬盘，没有 msvscrt.py 它应该在哪里生活？

我正在启动我的 jython：

```
 PythonInterpreter interpreter = new PythonInterpreter(null, new PySystemState());

    PySystemState sys = Py.getSystemState();
    sys.path.append(new PyString("C:/jython2.5.2/Lib"));
    sys.platform = new PyString("win32"); // this is a trick for the wrapper to not fail on a inner plateform test detection with java1.7.0_03 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T10:41:26.987

[`msvcrt`](http://docs.python.org/library/msvcrt.html)在 Jython 中不可用。在 Windows 上的 CPython 中，`msvcrt`是编译到 Python 解释器中的内置模块（您可以使用 进行检查[`sys.builtin_module_names`](http://docs.python.org/library/sys.html?highlight=sys#sys.builtin_module_names)）。没有**msvcrt.py**文件。

为什么你需要“让包装器在使用 java1.7.0_03 进行内部平台测试检测时不会失败的技巧”，我不能说。但是设置为 win32 会使 Jython在使用时`sys.platform`尝试导入，这不起作用。`msvcrt``subprocess`

# android - Android: use unicode characters in option menu

> ID：10336814
> 
> 赞同：0
> 
> 时间：2012-04-26T15:43:07.540
> 
> 标签：android, unicode, toast, optionmenu

I want to know how can I use unicode chars like arabic or persian in option menu? I acctually use this class to reshape string value and set those value as text of my objects like button, text view and ... but I dont know how can I set those value as option menu text

way that I reshape char:

```
public void setface() {
    // TODO Auto-generated method stub

    Typeface face = Typeface.createFromAsset(getAssets(), "font/"+fonts+"");

    TextView shoma = (TextView) findViewById(R.id.shoma);
    shoma.setTypeface(face);
    String shoma_txt = shoma.getText().toString();
    shoma.setText(PersianReshape.reshape(shoma_txt));
} 
```

**face** is a function in reshaper.java (because it's too long I could not post it here)

now how can I use this method to set option menu tittle (or Toast text)?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T16:28:37.163

我不知道我是否理解你的问题。你想改变字体类型吗？要在 Toast 通知中实现这一点，您可以创建自定义 Toast 视图。请参阅：http: [//developer.android.com/guide/topics/ui/notifiers/toasts.html#CustomToastView](http://developer.android.com/guide/topics/ui/notifiers/toasts.html#CustomToastView)

# c# - 使用 NHibernate 创建 SQLite 数据库，但只创建一次

> ID：10336816
> 
> 赞同：9
> 
> 时间：2012-04-26T15:43:09.377
> 
> 标签：c#, sqlite, nhibernate

我一直在关注一些关于如何将 NHibernate 与 SQLite 一起使用的示例，其中大多数都与单元测试数据库 CRUD 操作等有关。因此，到目前为止，我搜索并遵循的示例都与此相关。这很好，但问题是每次我运行我的程序时，数据库都会重新创建！如何修改我的代码，以便如果数据库已经存在，NHibernate 不会创建它？是的，我尝试检查 File.Exists，但它被忽略了；我相信是因为 NHibernate 首先获取文件。

这是我的映射：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-configuration xmlns="urn:nhibernate-configuration-2.2">
  <session-factory name="NHibernate.Test">
    <property name="connection.driver_class">NHibernate.Driver.SQLite20Driver</property>
    <property name="dialect">NHibernate.Dialect.SQLiteDialect</property>
    <property name='proxyfactory.factory_class'>NHibernate.ByteCode.LinFu.ProxyFactoryFactory, NHibernate.ByteCode.LinFu</property>
    <property name="query.substitutions">true=1;false=0</property>
    <property name="show_sql">false</property>
  </session-factory>
</hibernate-configuration> 
```

还有我的完整代码：

```
using System;
using System.Collections.Generic;
using System.Data.SQLite;
using System.Linq;
using NHibernate;
using NHibernate.Cfg;
using PruebaNHLite.Domain;

namespace PruebaNHLite
{
    public class Program
    {
        public static ISession sess;
        public static Configuration cfg;
        public static SQLiteConnection connection;
        private const string CONNECTION_STRING = 
                @"Data Source=nhlite.db;Pooling=true;FailIfMissing=false;
                                BinaryGUID=false;New=false;Compress=true;Version=3";

        static void Main(string[] args)
        {
            Init();
            BuildSchema();
            Insert();
            Retrieve();
            sess.Close();
            sess = null;
        }

        public static void Init()
        {
            // Initialize NHibernate
            cfg = new Configuration();
            cfg.Configure();
            IDictionary<string, string> props = new Dictionary<string, string>();
            props.Add("connection.connection_string", CONNECTION_STRING);
            props.Add("connection.driver_class", "NHibernate.Driver.SQLite20Driver");
            props.Add("dialect", "NHibernate.Dialect.SQLiteDialect");
            props.Add("proxyfactory.factory_class", "NHibernate.ByteCode.LinFu.ProxyFactoryFactory, NHibernate.ByteCode.LinFu");
            props.Add("query.substitutions", "true=1;false=0");
            props.Add("show_sql", "false");
            cfg.SetProperties(props);
            cfg.AddAssembly(typeof(Person).Assembly);
            connection = new SQLiteConnection(CONNECTION_STRING);
            connection.Open();

            // Get ourselves an NHibernate Session
            var sessions = cfg.BuildSessionFactory();
            sess = sessions.OpenSession();
        }

        private static void BuildSchema()
        {
            NHibernate.Tool.hbm2ddl.SchemaExport schemaExport
                = new NHibernate.Tool.hbm2ddl.SchemaExport(cfg);
            schemaExport.Execute(false, true, false, connection, null);
        }

        public static void Insert()
        {
            // Create a Person...
            var person = new Person
            {
                Name = "Almudena",
                Surname = "Pamplinas",
                Age = 5
            };

            // And save it to the database
            sess.Save(person);
            sess.Flush();
        }

        public static void Retrieve()
        {
            IQuery q = sess.CreateQuery("FROM Person");
            foreach (var p in q.List().Cast<Person>())
            {
                Console.WriteLine(string.Format("{0} {1}, de {2} años.", 
                                                p.Name, p.Surname, p.Age));
            }
            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T16:54:52.800

尝试使用`SchemaUpdate`而不是`SchemaExport`. SchmaExport 将删除所有表、约束等并重新创建它们。SchemaUpdate 只会使您的数据库保持最新。但是，我警告在生产环境中使用 SchemaUpdate/SchemaExport，因为它们不是生产质量的迁移工具。

# c++ - How do I call .NET from c++ in as a platform-independent way as possible

> ID：10336825
> 
> 赞同：6
> 
> 时间：2012-04-26T15:43:30.457
> 
> 标签：c++, .net, windows, macos, interop

I have a C++ app from which I want to call .NET (C#) methods. I was going to use `C++/CLI`, but it is only supported on Windows.

Since also we support the MAC, I'd like to call .NET from C++ in a way that will work on both Windows and Mac (with Mono).

What is the best way to do this?

EDIT: I should add that the c# code we wish to call is not ours. We have no way of making any changes to it. The c++ code, of course, is ours.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:48:02.437

最简单的方法是通过函数指针公开功能。.Net 和本机代码都可以以函数指针的形式与 C/C++ 代码互操作。运行 C++ 代码的所有平台都支持函数指针，因此可以在不了解 .Net 的情况下编写它。

# ruby-on-rails-3 - How to create a nested polymorphic form and control the child records rendered for the parent and children

> ID：10336826
> 
> 赞同：0
> 
> 时间：2012-04-26T15:43:30.377
> 
> 标签：ruby-on-rails-3, forms, nested, polymorphism

The models I am using are Merchant, Address, Phone, & Contact. The relationsships are as follows:

Merchant:

```
has_many :phones, :as => :phoneable, :dependent => :destroy
has_many :addresses, :as => :addressable, :dependent => :destroy
has_many :contacts, :as => :entity, :dependent => :destroy 
```

Contact:

```
has_many :phones, :as => :phoneable, :dependent => :destroy
has_many :addresses, :as => :addressable, :dependent => :destroy 
```

I have a form where one can create a parent record with two address records and many phone records. My merchants controller new method has this setup code:

```
@merchant.addresses.build (:address_type => "Dba")
@merchant.addresses.build (:address_type => "Mailing")
@merchant.phones.build (:phone_type => "Business")
@merchant.phones.build (:phone_type => "Fax") 
```

The actual form has;

```
<%= f.fields_for :addresses do |a| %> 
```

for the two addresses for the merchant, and;

```
<%= f.fields_for :phones do |p| %> 
```

for the merchant's phone records.

The problem I am having is when adding the contacts it's address and phone records;

```
<%= f.fields_for :contacts do |c| %>
<%= f.fields_for :addresses do |a| %>
<%= f.fields_for :phones do |p| %> 
```

which renders two addresses and phones for each contact record.

I only want the two addresses for the merchant record. How do I get the two addresses.build & phones.build to create records only for the parent and build only one address & phone record for each contact (which will be added to the form dynamically via a link)?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T04:49:14.330

一种方法是让商家的“新”操作显示一个表单，该表单显示两个要由用户填写的地址。此表单的提交操作将创建商家。它还将有一个“添加联系人”的链接，该链接将显示另一种创建联系人的表单。联系人的“新建”表格应显示用户填写的一个地址和一个电话号码。

# visual-studio-2010 - 此安装不支持项目类型

> ID：10336827
> 
> 赞同：40
> 
> 时间：2012-04-26T15:43:30.720
> 
> 标签：visual-studio-2010

我正在尝试在我的系统上打开一个 MVC 3 项目，但出现以下错误：

* * *

## 微软视觉工作室

无法打开项目文件“C:\Users\abc\Desktop\trunk\iCorpNow\iCorpNow.csproj”。

## 此安装不支持项目类型。

## 确定 帮助

我在我的开发机器上安装了 asp.net MVC 2 和 asp.net MVc 3 我在我的机器上安装了 windows 7。我安装了 Visual Studio 2010 Ultimate。

项目是使用 asp.net MVc 3 和在 Windows server 2008 上使用 Visual Studio Professional 2010 开发的

请建议我如何解决此错误。

以下是我的项目文件中列出的项目类型

```
<ProjectTypeGuids>{E3E379DF-F4C6-4180-9B81-6769533ABE47};{349c5851-65df-11da-9384-00065b846f21};{fae04ec0-301f-11d3-bf4b-00c04f79efbc}</ProjectTypeGuids> 
```

谢谢。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-04-26T16:01:45.720

您遇到的问题是您的项目使用 Asp.Net MVC4，但您只安装了 2 和 3。如果您安装 Asp.Net MVC4，它应该允许您打开项目。

判断这是问题的方法是检查与`ProjectType`项目文件中的条目相关联的 GUID。在这个例子中，它们是

*   `{fae04ec0-301f-11d3-bf4b-00c04f79efbc}`: C# 项目
*   `{349c5851-65df-11da-9384-00065b846f21}`： Web应用程序
*   `{E3E379DF-F4C6-4180-9B81-6769533ABE47}`: ASP.NET MVC 4

C# 和 Web 应用程序都是 Visual Studio Pro 及更高版本的标准，因此缺少的部分必须是 Asp.Net MVC 4

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-04T11:29:38.050

我也有这个问题，我在这里找到了答案：

[http://social.msdn.microsoft.com/Forums/en-US/06cf7bca-982c-44cf-aec9-99cf399b3000/the-project-type-is-not-supported-by-this-installation](http://social.msdn.microsoft.com/Forums/en-US/06cf7bca-982c-44cf-aec9-99cf399b3000/the-project-type-is-not-supported-by-this-installation)

简而言之：

1.  打开`Visual Studio Command Prompt`

2.  从命令行运行“ `devenv /setup`”

此外，在运行此命令之前，您必须具有 MVC3 或 4 或所需的任何内容。

# html - Why does this JSP snippet break my html code?

> ID：10336830
> 
> 赞同：0
> 
> 时间：2012-04-26T15:43:47.943
> 
> 标签：html, jsp, tomcat, spring-mvc, jstl

So i have a jsp that serves a nomination view and form depending on variables passed through spring mvc. Now the view works when the user wants to fill out a new nomination. It also works when they are viewing the nomination for review (where it is flagged as disabled) but it doesn't work a reviewer (called generalist in this case) access it. It breaks up to this point:

![view](../Images/e133e94e8ff63f626a5b28f9b62e1eff.png)

notice where it starts displaying html code. The code display happens in IE, but on the other browsers it doesn't yet still "breaks" because it's missing form elements on the side and bottom.

This only happens with this snippet:

```
<div align="center">
    <c:if test="${mode==cons.GENERALIST}">
        <spring:message code="common.status"/>: <br/>
        <select name="statusId">
            <c:forEach items="${statusList}" var="status">
                <option value="${status.id}" <c:if
                        test="${status.id==currentStatusId}"> selected="selected"</c:if> >
                    <c:if test="${lang=='es'}">${status.statusSpanish}</c:if>
                    <c:if test="${lang=='en'}">${status.statusEnglish}</c:if>
                </option>
            </c:forEach>
        </select>
        <br/>
        <br/>

        <spring:message code="common.comments"/>:<br/>
        <textarea name="generalistComment" cols="50" rows="5">${currentGeneralistComment}</textarea>
        <br/>
        <br/>
        <spring:message code="common.committeeScore"/>:<br/>
        <input type="text" name="committeeScore" value="${nomination.commiteeScore}"/>
    </c:if>
</div> 
```

The full JSP code is here: *please note that I am using a javascript function to access the other form's inputs and this works on other nomination views so that's clearly not it *second note: this is part of a spring tile, so you won't find `html`, `head` or `body` tags here.

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib uri="http://www.springframework.org/tags" prefix="spring" %>
<jsp:useBean id="cons" class="com.project.lmu.util.NominationMode" scope="application"/>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt" %>

<script type="text/javascript">
    $(function() {
        $('.datepicker').datepicker({
            changeMonth: true,
            changeYear:  true,
            minDate:     "-50Y",
            maxDate:    new Date(),
            yearRange:  "-50",
            showOn: "button",
            buttonImage: "images/prototipo/calendar1.png",
            buttonImageOnly: true
        });
    });
</script>

<td id="content_inner">
<div id="content">

<h1><spring:message code="successNomination.lable.title"/></h1>
<br/>

<c:if test="${error==true}">

    <div class="error">
        <ul>
            <c:forEach items="${nomination.errors}" var="message">
                <li><spring:message code="${message}"/></li>
            </c:forEach>
        </ul>
    </div>
</c:if>

<form name="f" action="successSaveNomination" method="post">

<c:if test="${nomination.nominationId==null}">
    <input type="hidden" name="nominationId" value="0"/>
</c:if>
<c:if test="${nomination.nominationId!=null}">
    <input type="hidden" name="nominationId" value="${nomination.nominationId}"/>
</c:if>

<input type="hidden" name="nomineeId" value="${nominee.id}"/>
<input type="hidden" name="mode" value="${mode}"/>

<table border="0" cellpadding="0" cellspacing="5" width="100%">
    <tr>
        <td valign="top" width="150px"><b><spring:message code="successNomination.lable.subtitle1"/>: </b></td>
        <td>
            <table border="0" cellpadding="0" cellspacing="0" width="100%">
                <tr>
                    <td>${nominee.firstName} ${nominee.middleName} ${nominee.lastName}</td>
                </tr>
                <tr>
                    <td><i>${nominee.jobTitle} - ${nominee.department.description} - ${nominee.id}</i></td>
                </tr>
            </table>
        </td>
    </tr>
    <tr>
        <td><b><spring:message code="successNomination.lable.subtitle4"/>: </b></td>
        <td>
            <select name="periodId"
                    <c:if test="${mode==cons.READ_ONLY||mode==cons.GENERALIST}">disabled="disabled" </c:if> >
                <c:forEach items="${periods}" var="period">
                    <option value="${period.id}"
                            <c:if test="${period.id==nomination.periodId}">selected="selected"</c:if>>&nbsp; &nbsp;
                        &nbsp; &nbsp;${period.periodDescription}</option>
                </c:forEach>
            </select>
        </td>
    </tr>
</table>

<br/>

<table width="100%">
<tr>
    <th class="green"><spring:message code="successNomination.label.requirements.title1"/></th>
    <th width="50%" class="green"><spring:message code="successNomination.label.requirements.title2"/></th>
</tr>
<tr>
    <td class="gborder" valign="middle">
        <p><spring:message code="successNomination.label.requirements1"/></p>

        <p>
            <spring:message code="successNomination.label.requirements2"/>:
            <input type="text" class="points" disabled="disabled"
                   value="<fmt:formatDate type='date' pattern='MM/dd/yyyy' value='${nominee.hireDate}' />"/>
        </p>
    </td>
    <td class="gborder">
        <p class="centered">
            <textarea cols="40" rows="6" name="hireComments" <c:if
                    test="${mode==cons.READ_ONLY||mode==cons.GENERALIST}"> disabled="disabled" </c:if>>${nomination.hireComments}</textarea>
        </p>
    </td>
</tr>
<tr>
    <td class="gborder"><p><spring:message code="successNomination.label.requirements3"/><br/>
        <a href="#footnote" class="required"><spring:message code="successNomination.lable.instructions1"/> </a></p>

        <table>
            <tr style="padding:3em;">
                <td><spring:message code="successNomination.label.requirements4"/>:</td>
                <td><input type="text" class="points" name="evaluationPoints1"
                           value="${nomination.evaluationPoints1}"
                           <c:if test="${mode==cons.READ_ONLY||mode==cons.GENERALIST}">disabled="disabled"</c:if> />
                </td>
                <td><spring:message code="successNomination.label.requirements5"/>:</td>
                <td><input type="text" class="points datepicker" name="evaluationYear1"
                           value="${nomination.evaluationYear1}"
                           <c:if test="${mode==cons.READ_ONLY||mode==cons.GENERALIST}">disabled="disabled"</c:if>
                           readonly="readonly"/>
                </td>

            </tr>
            <tr>
                <td><spring:message code="successNomination.label.requirements4"/>:</td>
                <td><input type="text" class="points" name="evaluationPoints2"
                           value="${nomination.evaluationPoints2}"
                           <c:if test="${mode==cons.READ_ONLY||mode==cons.GENERALIST}">disabled="disabled"</c:if> />
                </td>
                <td><spring:message code="successNomination.label.requirements5"/>:</td>
                <td><input type="text" class="points datepicker" name="evaluationYear2"
                           value="${nomination.evaluationYear2}"
                           <c:if test="${mode==cons.READ_ONLY||mode==cons.GENERALIST}">disabled="disabled"</c:if>
                           readonly="readonly"/>
                </td>
            </tr>
        </table>
    </td>
    <td class="gborder">
        <p class="centered">
            <textarea cols="40" rows="6" name="evaluationComments"
                    <c:if test="${mode==cons.READ_ONLY||mode==cons.GENERALIST}"> disabled="disabled" </c:if>>${nomination.evaluationComments}</textarea>
        </p>
    </td>
</tr>
<tr>
    <td class="gborder"><p><spring:message code="successNomination.label.requirements6"/></p>

        <table>
            <tr>
                <td><spring:message code="successNomination.label.requirements7"/>:</td>
                <td>
                    <input type="text" class="points datepicker" name="promotionDate1"
                           <c:if test="${nomination.promotionDate1 != null}">value="${nomination.promotionDate1}"</c:if>
                           <c:if test="${mode==cons.READ_ONLY||mode==cons.GENERALIST}">disabled="disabled"</c:if>
                           readonly="readonly"/>
                </td>
            </tr>
            <tr>
                <td><spring:message code="successNomination.label.requirements7"/>:</td>
                <td>
                    <input type="text" class="points datepicker" name="promotionDate2"
                           <c:if test="${nomination.promotionDate2 != null}">value="${nomination.promotionDate2}"</c:if>
                           <c:if test="${mode==cons.READ_ONLY||mode==cons.GENERALIST}">disabled="disabled"</c:if>
                           readonly="readonly"/>
                </td>
            </tr>
            <tr>
                <td><spring:message code="successNomination.label.requirements7"/>:</td>
                <td>
                    <input type="text" class="points datepicker" name="promotionDate3"
                           <c:if test="${nomination.promotionDate3 != null}">value="${nomination.promotionDate3}"</c:if>
                           <c:if test="${mode==cons.READ_ONLY||mode==cons.GENERALIST}">disabled="disabled"</c:if>
                           readonly="readonly"/>
                </td>
            </tr>
            <tr>
                <td><spring:message code="successNomination.label.requirements7"/>:</td>
                <td>
                    <input type="text" class="points datepicker" name="promotionDate4"
                           <c:if test="${nomination.promotionDate4 != null}">value="${nomination.promotionDate4}"</c:if>
                           <c:if test="${mode==cons.READ_ONLY||mode==cons.GENERALIST}">disabled="disabled"</c:if>
                           readonly="readonly"/>
                </td>
            </tr>
        </table>
    </td>
    <td class="gborder">
        <p class="centered">
            <textarea cols="40" rows="6" name="promotionComments"
                    <c:if test="${mode==cons.READ_ONLY||mode==cons.GENERALIST}"> disabled="disabled" </c:if>>${nomination.promotionComments}</textarea>
        </p>
    </td>
</tr>
<tr>
    <td class="gborder">
        <p>
            <spring:message code="successNomination.label.requirements8"/><br/>
            <a href="#footnote" class="required"><spring:message code="successNomination.lable.instructions1"/></a>
        </p>

        <p>

            <input type="radio" name="extraContribution" value="1"
                   <c:if test="${nomination.extraContribution == true}">checked="checked"</c:if>
                   <c:if test="${mode==cons.READ_ONLY||mode==cons.GENERALIST}">disabled="disabled"</c:if>
                   onclick="activateContributionsField(document.f)"/>
            <spring:message code="successNomination.label.requirements9"/> &nbsp;
            <input type="radio" name="extraContribution" value="0"
                   <c:if test="${nomination.extraContribution == false}">checked="checked"</c:if>
                   <c:if test="${mode==cons.READ_ONLY||mode==cons.GENERALIST}">disabled="disabled"</c:if>
                   onclick="activateContributionsField(document.f)"/>
            <spring:message code="successNomination.label.requirements10"/><br/>
            <spring:message code="successNomination.label.requirements11"/>:
            <input type="text" class="points" name="extraContributionPoints"
                   value="${nomination.extraContributionPoints}"
                   <c:if test="${mode==cons.READ_ONLY||mode==cons.GENERALIST || nomination.extraContribution!=true}">disabled="disabled"</c:if> />
        </p>
    </td>
    <td class="gborder">
        <p class="centered">
            <textarea cols="40" rows="6" name="extraComments"
                    <c:if test="${mode==cons.READ_ONLY||mode==cons.GENERALIST}"> disabled="disabled" </c:if>>${nomination.extraComments}</textarea>
        </p>
    </td>
</tr>
<tr>
    <td class="gborder">
        <p><spring:message code="successNomination.label.requirements12"/><br/>
            <a href="#footnote" class="required"><spring:message code="successNomination.lable.instructions1"/></a>
        </p>

        <p>
            <input type="radio" name="companyPolicy" value="1"
                   <c:if test="${nomination.companyPolicy == true}">checked="checked"</c:if>
                   <c:if test="${mode==cons.READ_ONLY||mode==cons.GENERALIST}">disabled="disabled"</c:if> />
            <spring:message code="successNomination.label.requirements9"/> &nbsp;
            <input type="radio" name="companyPolicy" value="0"
                   <c:if test="${nomination.companyPolicy == false}">checked="checked"</c:if>
                   <c:if test="${mode==cons.READ_ONLY||mode==cons.GENERALIST}">disabled="disabled"</c:if> />
            <spring:message code="successNomination.label.requirements10"/>
        </p>
    </td>
    <td class="gborder">
        <p class="centered">
            <textarea cols="40" rows="6" name="companyPolicyComments"
                    <c:if test="${mode==cons.READ_ONLY||mode==cons.GENERALIST}"> disabled="disabled" </c:if>>${nomination.companyPolicyComments}</textarea>
        </p>
    </td>
</tr>
<tr>
    <td class="gborder">
        <p>
            <spring:message code="successNomination.label.requirements13"/><br/>
            <a href="#footnote" class="required"><spring:message code="successNomination.lable.instructions1"/></a>
        </p>

        <p>
            <spring:message code="successNomination.label.requirements14"/>:
            <input type="radio" value="1" name="evaluationAttendancePolicy1"
                   <c:if test="${nomination.evaluationAttendancePolicy1 == true}">checked="checked"</c:if>
                   <c:if test="${mode==cons.READ_ONLY||mode==cons.GENERALIST}">disabled="disabled"</c:if> />
            <spring:message code="successNomination.label.requirements9"/>
            <input type="radio" value="0" name="evaluationAttendancePolicy1"
                   <c:if test="${nomination.evaluationAttendancePolicy1 == false}">checked="checked"</c:if>
                   <c:if test="${mode==cons.READ_ONLY||mode==cons.GENERALIST}">disabled="disabled"</c:if> />
            <spring:message code="successNomination.label.requirements10"/>
        </p>

        <p>
            <spring:message code="successNomination.label.requirements15"/>:
            <input type="radio" value="1" name="evaluationAttendancePolicy2"
                   <c:if test="${nomination.evaluationAttendancePolicy2 == true}">checked="checked"</c:if>
                   <c:if test="${mode==cons.READ_ONLY||mode==cons.GENERALIST}">disabled="disabled"</c:if> />
            <spring:message code="successNomination.label.requirements9"/>
            <input type="radio" value="0" name="evaluationAttendancePolicy2"
                   <c:if test="${nomination.evaluationAttendancePolicy2 == false}">checked="checked"</c:if>
                   <c:if test="${mode==cons.READ_ONLY||mode==cons.GENERALIST}">disabled="disabled"</c:if> />
            <spring:message code="successNomination.label.requirements10"/>
        </p>
    </td>
    <td class="gborder">
        <p class="centered">
            <textarea cols="40" rows="6" name="attendanceComments"
                    <c:if test="${mode==cons.READ_ONLY||mode==cons.GENERALIST}"> disabled="disabled" </c:if>>${nomination.attendanceComments}</textarea>
        </p>
    </td>
</tr>
</table>

<br/>

<p>
    <spring:message code="successNomination.label.requirements16"/>:
</p>

<div align="center">
    <textarea cols="50" rows="7" name="reason" <c:if
            test="${mode==cons.READ_ONLY||mode==cons.GENERALIST}"> disabled="disabled" </c:if> >${nomination.reason}</textarea>
</div>
<br/>

<div align="center">
    <c:if test="${mode==cons.GENERALIST}">
        <spring:message code="common.status"/>: <br/>
        <select name="statusId">
            <c:forEach items="${statusList}" var="status">
                <option value="${status.id}" <c:if
                        test="${status.id==currentStatusId}"> selected="selected"</c:if> >
                    <c:if test="${lang=='es'}">${status.statusSpanish}</c:if>
                    <c:if test="${lang=='en'}">${status.statusEnglish}</c:if>
                </option>
            </c:forEach>
        </select>
        <br/>
        <br/>

        <spring:message code="common.comments"/>:<br/>
        <textarea name="generalistComment" cols="50" rows="5">${currentGeneralistComment}</textarea>
        <br/>
        <br/>
        <spring:message code="common.committeeScore"/>:<br/>
        <input type="text" name="committeeScore" value="${nomination.commiteeScore}"/>
    </c:if>
</div>

<div id="bottommenu">
    <c:if test="${(mode==cons.NEW||mode==cons.EDIT)}">
        <input type="submit" value="<spring:message code="common.send"/>"/>
    </c:if>
    <c:if test="${mode==cons.GENERALIST}">
        <input type="button" value="<spring:message code="common.save"/>" onclick="generalistSuccessUpdate()"/>
    </c:if>
    <c:if test="${mode==cons.NEW}">
        <input type="reset" value="<spring:message code="common.reset"/>">
    </c:if>
    <c:if test="${mode==cons.EDIT}">
        <script type="text/javascript">var msg = "<spring:message code='nominations.confirm' javaScriptEscape='true' />";</script>
        <input type="button" value="<spring:message code="common.delete"/>" onclick="delNomination()"/>
    </c:if>
    <c:if test="${mode==cons.READ_ONLY||mode==cons.EDIT||mode==cons.GENERALIST}">
        <input type="button" value="<spring:message code="common.print"/>" onclick="printNomination()"/>
        <input type="button" value="<spring:message code="common.back"/>" onclick="history.back();"/>
    </c:if>
</div>

<div id="footnote">
    <p> * <spring:message code="successNomination.lable.instructions3"/>.<br/>
        **<spring:message code="successNomination.lable.instructions4"/>.</p>
</div>

</form>

<form name="d" action="successDeleteNomination" method="post">
    <input type="hidden" name="nominationId" value="${nomination.nominationId}"/>
</form>

<form name="p" action="successPrint" method="post">
    <input type="hidden" name="nominationId" value="${nomination.nominationId}"/>
</form>

<form name="g" action="successGenUpdate" method="post">
    <input type="hidden" name="nominationId" value="${nomination.nominationId}"/>
    <input type="hidden" name="statusId" value="${statusId}"/>
    <input type="hidden" name="generalistComment" value="${generalistComment}"/>
</form>

</div>
</td> 
```

So what exactly is breaking my html here? I know it's the snippet, but I've looked for unclosed tags without avail.

# javascript - 在 HTML5 中自动开始语音到文本

> ID：10336847
> 
> 赞同：0
> 
> 时间：2012-04-26T15:44:56.180
> 
> 标签：javascript, html, webkit, speech-to-text

我正在尝试在不单击麦克风图标的情况下启动语音输入会话。就像窗口加载或文档加载事件一样 - 而不是默认的点击事件。

> `<input type="text" id="autoStart" x-webkit-speech />`

我正在使用 google chrome，因为它支持大多数 HTML 5 功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-14T10:53:03.480

在页面加载时执行此代码，您将看到一个权限对话框，要求您授予麦克风访问权限。单击允许，语音转文本识别将开始。检查语音识别[API 文档](https://developer.mozilla.org/en-US/docs/Web/API/SpeechRecognition)以获取可以绑定的事件。

```
var interim_result, final_result;
var recognition_engine = new webkitSpeechRecognition();

recognition_engine.continuous = true;
recognition_engine.interimResults = true;
recognition_engine.lang = 'en-US';
recognition_engine.onresult = function(function(e) {

  var result, i;

  interim_result = '';
  if (typeof e.results === 'undefined') {

    recognition_engine.stop();
    console.log('SPEECH RECOGNITION : stopping due to empty result.', e);
    return;
  }
  for (i = event.resultIndex; i < event.results.length; ++i) {
    result = event.results[i];
    if (result.isFinal) {
      final_result = result[0].transcript;
      console.log('SPEECH RECOGNITION : final transcript = ' + final_result, e);
      // trigger a command matching the final utterance here
    } else {
      interim_result += result[0].transcript;
    }
  }
  console.log('SPEECH RECOGNITION : interim result = ' + interim_result);
};
recognition_engine.start(); 
```

# java - Java 泛型（简单的案例，推理的清晰之谜）

> ID：10336848
> 
> 赞同：1
> 
> 时间：2012-04-26T15:45:05.603
> 
> 标签：java, generics, types, constructor, inference

我有这门课，只是为了学习：

```
public class MyClass{ //Looking for a solution without making my class also generic <Type>  

    //Private Arraylist var to hold the value called myvar 

   public MyClass(ArrayList<MyDesiredType> incoming) {
        //CODE   myVar=incoming  
    }

    public MyDesiredType getType() {
        return myVar.get(0);
    }   
} 
```

有没有办法在没有警告和强制转换和失去类型安全性的情况下从构造函数中推断传入对象到方法的返回类型，但最重要的是没有使整个类 GENERIC （对我来说似乎是多余的）？如果不是，为什么我认为这对编译器不可行？

这是我已经做过的重新表述的问题，但这是我的第一个问题，我学会了如何清楚地揭露它，因为没有人理解。我后来试图编辑原始问题，但一切都被埋没了。我更改并简化了示例并尝试使其简单。原始问题：[Java Generics Silly Thing (Why can't I infer the type?)](https://stackoverflow.com/questions/10290218/java-generics-silly-thing-why-cant-i-infer-the-type)。

如果有任何问题，请告诉我，我会删除它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T15:52:40.090

不，那里没有。编译器如何知道要返回什么类型？构造函数中 ArrayList 的泛型类型在编译期间将不知道。您要么必须使整个类通用，要么采用另一种方法。

考虑一下：

```
public class Test {
    public static void main(String[] args) {
        List<String> arrList = new ArrayList<String>();
        arrList.add("FOO");
        Test test = new Test(arrList);
        String testStr = test.returnWhat();
        System.out.println("testStr");
    }

    private final List myList; //warning

    public <T> Test(List<T> ttype) {
        myList = ttype;
    }

    public <T> T returnWhat() {
        return (T) myList.get(0); //warning
    }
} 
```

这可行，但会在标记行上为您提供警告。所以，如果不使整个类通用，真的没有办法实现你所描述的。因为，如果：

```
public class Test {

 public static void main(String[] args) {
        List<String> arrList = new ArrayList<String>();
        arrList.add("FOO");
        Test test = new Test(); // now what?
        String testStr = test.returnWhat(0); // no warning...
        JPanel p = test.returnWhat(0); // goes through without warning, real nice...
        test.returnWhat(0); // returns Object

        Test test2 = new Test(arrList);
        test2.addElement(new Object()); // boom, inserted object into list of string.
        String nono = test2.returnWhat(1); // the universe goes down. assign an object to string without warning. even
                                           // though one COULD think the class is generic.
    }

    // private List<T> myList = new ArrayList<T>(); compiler error, T is unknown
    private List myList = new ArrayList();

    public Test() {
        myList.add(new Object());
    }

    public <T> Test(List<T> ttype) {
        myList = ttype;
    }

    public <T> T returnWhat(int index) {
        return (T) myList.get(index);
    }

    public <T> void addElement(T el) {
        myList.add(el);
    }
} 
```

当 myList 被设为通用时，第二个不会编译。在使用默认构造函数的情况下，编译器如何确定 <T> 的类型？

此外，这可能会导致依赖于仅插入某些类型这一事实的集合中的对象出现严重问题。

这将产生以下异常：

```
Exception in thread "main" java.lang.ClassCastException:
java.lang.Object cannot be cast to java.lang.String     at
Test.main(Test.java:27) 
```

我说服你了吗？

真的很好的问题，顺便说一句。我不得不考虑这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T15:59:36.500

当您说您希望编译器“在没有警告和强制转换以及失去类型安全性的情况下将传入的对象从构造函数中推断为方法的返回类型”时，您似乎是在说它应该`getType()`从输入中推断出结果的构造函数。如果两者都发生在同一个函数中，它可以。问题是对象可能不只存在于一个函数中，因此需要额外的类型信息（泛型类型）在函数之间传递这种对象。

例如，如果我想编写一个接受`MyClass`对象的函数，我需要知道`getType()`会返回什么，这样我才能使用返回的值。通过添加一个泛型类型，`MyClass`我们对它所拥有的内容进行了描述。

另一种看待它的方式`MyClass`是容器。通过添加泛型，我们说它是特定类型事物的容器，因此我们可以更轻松地预测我们会从中得到什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T15:54:43.857

编译器无法在运行时知道您的数组列表是什么类型。我真的没有看到使用以下内容的问题：

```
 public class MyClass<TYPE> {
     private ArrayList<TYPE> incoming;

     public MyClass(ArrayList<TYPE> incoming) {
         this.incoming = incoming;
     }

     public TYPE getType() {
         return incoming.get(0);
     }
 } 
```

这样你就可以做到：

```
ArrayList<Integer> numbers = createListOfNumbers();
MyClass<Integer> myClass = new MyClass<>(numbers);
Integer number = myClass.getType(); 
```

还是我误解了这个问题，您想在运行时知道该课程？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T15:50:52.060

**不，**如果您想要一个可以保存参数化类型列表的类。

**是的，**如果您想要一个可以包含仅一种类型的列表的类。您可以在字段、构造函数和访问器中显式声明该类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T15:51:20.233

您忘记的是，并非您可能运行的所有代码对编译器都是可见的！可以在运行时添加、删除、替换 Jar，这是编译器从未见过的。您可以针对以下接口进行编译：

```
public interface MyClassFactory {
  MyClass getInstance();
} 
```

然后在运行时向 JVM 提供一个实现。因此编译器从未看到创建您将使用的 MyClass 的实际代码，因此无法执行这样的编译时推断。您必须使类成为通用类或接受不存在类型安全的事实。

# python - 如何配置 IPython 0.12 以将所有输入记录到按时间戳拆分的日志文件中？我在 IPython 0.10.1 中有这个工作

> ID：10336852
> 
> 赞同：1
> 
> 时间：2012-04-26T15:45:15.087
> 
> 标签：python, logging, ipython

`~/.ipython/ipy_user_conf.py`这是我在运行 IPython .10.1 的系统上的文件的相关部分：

```
import IPython.ipapi
ip = IPython.ipapi.get()

import os
from time import strftime

def main():

    try:
        basedir = '/home/stu/.ipython/log/'
        logdir = strftime('%Y-%m-%d')
        directory = os.path.join(basedir, logdir)

        if not os.path.exists(directory):
            os.mkdir(directory)

        logfilename = strftime("%s") + ".log"
        filename = os.path.join(directory, logfilename)

        ip.IP.logger.logstart(logfname=filename, logmode='append')

    except RuntimeError:
        print "something went wrong!"

main() 
```

这会将交互式会话期间的所有输入记录到以下形式的文件中：`/home/stu/.ipython/log/2012-04-26/1335454387.log`

如何配置 IPython 0.12 以这种方式创建日志？

为此创建一个`~/.ipython/profile_default/startup/00-logstuff.py`文件是否理想？

有没有人有一套`~.ipython/<profile>/startup/`可以作为很好的实际例子的脚本？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T16:08:11.627

看看这个食谱。您可以轻松地将其修改为每天处理文件夹而不是每天处理文件。

[http://wiki.ipython.org/Cookbook/DatedLog](http://wiki.ipython.org/Cookbook/DatedLog)

# apache - apache - RewriteEngine 在外面不起作用 指示

> ID：10336858
> 
> 赞同：0
> 
> 时间：2012-04-26T15:45:31.950
> 
> 标签：apache, mod-rewrite, virtual-hosts

我正在尝试将 apache 配置为将仅包含主机名（域）的请求重定向到另一个路径。我发现以下指令很有用，但只要将它们包含在 中`VirtualHost`，放入`site_available`文件夹 ( `/etc/apache2/`) 并作为单独的站点启用（使用`a2ensite`命令）。

```
<VirtualHost *:80>
    ServerName myserver:80

    WSGIScriptAlias / /var/path/to/myproject/myproject.wsgi

    RewriteEngine On
    RewriteCond %{REQUEST_URI} ^/?$
    RewriteRule ^(.*)$ /path/path [R=301,L]
</VirtualHost> 
```

请注意，只有`Rewrite*`指令不起作用。我的 Python 项目的别名工作正常。

Morover，我发现如果我用`a2dissite`命令禁用其他虚拟主机（000-default）并将上面提到的指令（没有`VirtualHost`）放入 httpd.conf 文件，一切（包括`Rewrite*`规则）都可以工作。

所以，我怀疑为什么我无法在简单的服务器配置上下文中完成这项工作，解决方案是什么？

# mysql - 为什么mysql在应该返回null时返回一些行？

> ID：10336859
> 
> 赞同：1
> 
> 时间：2012-04-26T15:45:32.433
> 
> 标签：mysql, where

这是结构`myTable`

```
----------------
|id|info1|info2|
----------------
|0 |abcde|fghij|
|1 |qwert|yuopa|
---------------- 
```

这是我调用的查询：

```
SELECT * FROM `myTable` WHERE `id` = 'a' 
```

它返回第一行，即

```
|0 |abcde|fghij| 
```

怎么了？通常`id`是一个整数，但是我错误地将它输入为一个字符串，但我仍然得到了结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:47:19.127

MySQL 尝试转换`'a'`为整数。该字符串不包含任何数值，因此强制转换的结果是`0`. 这就是 MySQL 进行强制转换的方式。

```
SELECT 0 = 'a'; 
```

上述查询返回`1`(TRUE)。

```
SELECT CAST('a' AS SIGNED INTEGER); 
```

上面的查询返回`0`.

# magento - 将 Magento Wishlist 链接点修复到 Root 的正确方法是什么？

> ID：10336861
> 
> 赞同：0
> 
> 时间：2012-04-26T15:45:37.480
> 
> 标签：magento, magento-1.5

Magento (1.5.1.0) cms_footer_links**到愿望清单的链接不正确**：它指向网络根目录而不是“/wishlist”。我已经能够应用临时修复（在wishlist.xml 上：注释的操作被它下面的未注释的操作替换）

```
 <reference name="top.links">
        <block type="wishlist/links" name="wishlist_link"/> 
        <!-- <action method="addLinkBlock"><blockName>wishlist_link</blockName></action> -->
        <action method="addLink" translate="label title"><label>My Wishlist</label><url>wishlist</url><title>My Wishlist</title><prepare/><urlParams/><position>20</position></action> 
    </reference> 
```

以这种方式修复它自然**不会在链接上显示愿望清单中的项目数量。如何在`<blockName>wishlist_link</blockName>`不更改负责它的核心 xml 的情况下进行修复？我想它可以通过 local.xml 完成（[这](https://stackoverflow.com/questions/10047194/change-wishlist-url-in-magento)不起作用），但是这样做的语法是什么？**

另**一种解决方案是找出它停止工作的原因**，但这可能比修改 local.xml 更加艰巨。[我已经能够在 magento 论坛（ 1](http://www.magentocommerce.com/boards/viewthread/233869/)、[2](http://www.magentocommerce.com/boards/viewthread/272498/) ）上找到其他有完全相同问题的人，但我已经放弃在那里寻求帮助......

# rest - RESTful api 与 MVC Web API 的教程系列

> ID：10336862
> 
> 赞同：5
> 
> 时间：2012-04-26T15:45:46.590
> 
> 标签：rest, azure, asp.net-web-api

有没有人有任何使用 ASP.NET Web API 构建 RESTful Web 服务的链接。到目前为止，我已经使用 WCF 构建了一个非常基本的 Web 服务，现在想尝试使用 Web api，看看哪个适合基于 Azure 的 Web 服务。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-26T16:49:10.987

我将从：

*   [ASP.NET Web API](http://www.asp.net/web-api)：您可以找到截屏视频、入门信息等（有趣的是，它在 mo 下）

并继续阅读这些博客：

*   Henrik Nielsen 的[博客](http://blogs.msdn.com/b/henrikn/)（ASP.NET Web API 架构师）
*   贡纳尔·皮普曼的[博客](http://weblogs.asp.net/gunnarpeipman/)
*   佩德罗·雷伊斯[博客](http://pedroreys.com/2012/04/04/webapicontrib/)
*   Tugberk Ugurlu 的[博客](http://www.tugberkugurlu.com/archive/getting-started-with-asp-net-web-api-tutorials-videos-samples)
*   我自己的[博客](http://byterot.blogspot.com)

对于提问，您可以尝试这里 (SO) 和[Web API](http://forums.asp.net/1246.aspx/1?Web%20API)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T20:32:12.000

仅供参考，我很喜欢一个好的会议演示视频（RIP MIX ...）

这是我对该主题的介绍，它为我提供了关于 Web API 的原因和方法的非常好的速成课程。

[WCF Web API：“有一个 URI”](http://channel9.msdn.com/Events/MIX/MIX11/FRM14)

注意**事项**：该视频引用了项目的 alpha 状态，因此它可能包含一些旧术语。但由于 Web API 仍处于测试阶段，我认为这一点是没有实际意义的。

# c# - 使用 NodaTime 计算包含天数的时间段

> ID：10336863
> 
> 赞同：6
> 
> 时间：2012-04-26T15:45:49.133
> 
> 标签：c#, datetime, nodatime

例如，如果我有以下代码：

```
var nodaStart = new LocalDate(2012, 5, 1);
var nodaEnd = new LocalDate(2012,5,2);
var daysBetween = Period.Between(nodaStart, nodaEnd,PeriodUnits.Day); 
```

然后`daysBetween.Days == 1`

但是，我计算的范围需要算作 2 天。即它需要包括开始和结束日期。

实际方法可以取开始和结束日期（相隔不超过一年），并且需要计算天数。如果超过 31 天，则将剩余的天数作为整周数返回。

我的逻辑工作正常，但因为计数是唯一的，所以我有一天会出去。

我想我可以在从它`startDate.addDays(-1)`创建之前做`nodaStart`，但我想知道是否有更优雅/漂亮的方式让 noda 返回期间。

谢谢

* * *

更新：我已经阅读了该类[的源代码](http://code.google.com/p/noda-time/source/browse/src/NodaTime/Period.cs)，并且运算符已重载，因此我可以添加`Period``+`

```
daysBetween += Period.FromDays(1); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T21:23:52.043

（对不起，我花了这么长时间才回答这个问题——我以前没见过。）

*任何*一个：

*   在计算之前添加一天结束（这是最合乎逻辑的方法，IMO - 正如罗杰所说，你想要第二天的开始，有效地）
*   在计算之前从开始减去一天
*   将结束的天数加 1

应该没事。我不认为 N​​oda Time 会改变以使这变得更简单。`Between`是减法运算符的一种“模糊单位”版本 - 您不会找到许多 2 - 1 为 2 的减法运算符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-16T10:38:55.577

对于“模糊”大脑的人类，如果它标识一天、一周、一个月等（参见整数倍），我们可能会考虑*包含开始和结束日期的天数，因此您可以对其进行编码：*

```
var start = new NodaTime.LocalDateTime(s.Year, s.Month, s.Day, s.Hour, s.Minute);
var end = new NodaTime.LocalDateTime(e.Year, e.Month, e.Day, e.Hour, e.Minute);

NodaTime.Period periodInclusive = NodaTime.Period.Between(start, end.PlusDays(1), NodaTime.PeriodUnits.AllDateUnits);
NodaTime.Period period =  NodaTime.Period.Between(start, end, NodaTime.PeriodUnits.AllDateUnits);
bool isInclusivePeriod = periodInclusive.Days + periodInclusive.Weeks + periodInclusive.Months + periodInclusive.Years < 
                         period.Days + period.Weeks + period.Months + period.Years;

period = isInclusivePeriod ? periodInclusive : period;
// do stuff with period here.... 
```

# php - 使用来自 html 表单的 NULL 填充 TSQL 查询

> ID：10336867
> 
> 赞同：0
> 
> 时间：2012-04-26T15:46:12.060
> 
> 标签：php, sql, forms, tsql, null

我有一个包含几个选择器的表单的 html 页面。

表单由 GET 通过 js 函数处理，该函数使用 jquery ajax 将数据发送到 php 页面。php 构建 TSQL 查询以选择信息。

如果您没有在选择器中选择任何选项，我的查询中需要一个 NULL。在我尝试过的 js 和 php 页面中：

```
if($variableFromSelector1 ==’-’){ $variableFromSelector1 =’NULL’;}
if($variableFromSelector2 ==’-’){ $variableFromSelector2 =’NULL’;} 
```

（- 表示选择器中未选择任何内容）

但这会用与 NULL 不同的“NULL”填充查询

以下是查询的方式：

```
 function showData($variableFromSelector1,$variableFromSelector2)
    {  

            $strSqlSelect = "EXECUTE mybd.dbo.myprocedure 
            @var1='".$variableFromSelector1."',
            @var2='".$variableFromSelector2."'";
    } 
```

如果在选择器中没有选择任何选项，我如何获得带有 NULL 的查询？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T16:01:55.720

`NULL`当您将其发送到您的存储过程时，您正在引用。尝试以下操作：

```
$strSqlSelect = "EXECUTE mybd.dbo.myprocedure 
@var1=" . ($variableFromSelector1 == '-' ? 'NULL' : "'{variableFromSelector1}'" . ",
@var2=" . ($variableFromSelector2 == '-' ? 'NULL' : "'{variableFromSelector2}'" . "; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T16:02:38.587

```
if($variableFromSelector1 ==’-’){ $variableFromSelector1 = NULL;}
if($variableFromSelector2 ==’-’){ $variableFromSelector2 = NULL;}

function showData($variableFromSelector1,$variableFromSelector2)
{  
  $var1 = is_null($variableFromSelector1) ? 'NULL' : "'{$variableFromSelector1}'";
  $var2 = is_null($variableFromSelector2) ? 'NULL' : "'{$variableFromSelector2}'";

  $strSqlSelect = "EXECUTE mybd.dbo.myprocedure 
  @var1=".$var1.",
  @var2=".$var2;
} 
```

还要记得清理所有输入以防止 SQL 注入。

# javascript - 排除在移动浏览器中运行的代码

> ID：10336870
> 
> 赞同：0
> 
> 时间：2012-04-26T15:46:23.027
> 
> 标签：javascript, jquery, android, html, mobile

有谁知道我可以用来排除某些东西在移动浏览器中显示的一些代码。

我特别想排除某些图像和 Flash 文件显示在网站上 - 但仅限于在移动浏览器上查看时。

像这样的东西，但不知道“代码”是什么。

```
<code><img src="smiley.gif" alt="Smiley face" width="32" height="32" /></code> 
```

如果有人能够提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:59:03.443

看起来你可以[用这样的东西来查找 META 标签](http://www.askdavetaylor.com/detect_apple_iphone_user_web_site_server.html)

JavaScript：

```
var agent=navigator.userAgent.toLowerCase();
var is_iphone = ((agent.indexOf('iphone')!=-1);
if (is_iphone) { conditional code goes here } 
```

使用它来设置一个变量，然后使用这样的东西来检查你的变量并[显示/隐藏一些内容：](http://www.cssnewbie.com/showhide-content-css-javascript/)

XHTML：

```
<p>...This is all visible content... 
<a href="#" id="example-show" class="showLink" 
onclick="showHide('example');return false;">See more.</a>
</p>
<div id="example" class="more">
<p>...This content is hidden by default...</p>
<p><a href="#" id="example-hide" class="hideLink" 
onclick="showHide('example');return false;">Hide this content.</a></p>
</div> 
```

CSS：

```
.more {
    display: none;
    border-top: 1px solid #666;
    border-bottom: 1px solid #666; }
a.showLink, a.hideLink {
    text-decoration: none;
    color: #36f;
    padding-left: 8px;
    background: transparent url('down.gif') no-repeat left; }
a.hideLink {
    background: transparent url('up.gif') no-repeat left; }
a.showLink:hover, a.hideLink:hover {
    border-bottom: 1px dotted #36f; } 
```

JavaScript：

```
function showHide(shID) {
    if (document.getElementById(shID)) {
        if (document.getElementById(shID+'-show').style.display != 'none') {
            document.getElementById(shID+'-show').style.display = 'none';
            document.getElementById(shID).style.display = 'block';
        }
        else {
            document.getElementById(shID+'-show').style.display = 'inline';
            document.getElementById(shID).style.display = 'none';
        }
    }
} 
```

我承认我个人并不关注这里发生的一切，但我认为这些示例和两个不同的链接可以以某种方式为您提供您所追求的结果。

# html - HTML：图像不会转到顶部 :(

> ID：10336874
> 
> 赞同：1
> 
> 时间：2012-04-26T15:46:30.803
> 
> 标签：html, image

我觉得这应该是一个超级简单的修复，但它让我发疯。我试图让这个图像靠在浏览器窗口的顶部，但是我在图像上方得到了这个我无法摆脱的填充。

我尝试了一些事情，例如将填充设置为 0，并且我尝试删除所有内容，但我仍然得到填充。任何帮助，将不胜感激 ：）

[http://twopairphoto.com/SlapFat/](http://twopairphoto.com/SlapFat/)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">
<head>
  <style>

    body{
      padding-top: 0px;
    }       
    div {  
      padding-top: 0px;
    }    
  </style>
</head>
<body background="SlapFatBG_sm.jpg">
<div id="container" align="center"><img src="slapfatsplash_sm.jpg" /></div>
</body>
</html> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:48:51.437

也将边距设置为 0：

```
body {
      padding-top: 0px;
      margin:0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:48:45.403

```
<body style="margin: 0px auto;"> 
```

或者

```
body {
  padding-top: 0px;
  margin: 0px auto;
} 
```

这将消除默认情况下屏幕顶部和底部的边距。由于将左右边距设置为自动，这也将使您的内容在大多数浏览器中居中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T15:48:45.233

尝试将`padding-top`div 更改为`margin-top`

那应该有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T15:49:48.567

你可以试试绝对定位...

```
div {position:absolute; top:0px;} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T15:50:08.977

尝试这个：

```
body{
  padding-top: 0px;
  margin-top: 0px; //<---- Set body margin to 0px
} 
```

用 Firefox 确认。

# entity-framework - 继承和导航属性

> ID：10336875
> 
> 赞同：0
> 
> 时间：2012-04-26T15:46:31.293
> 
> 标签：entity-framework, wcf-data-services

我有这样的关系：

```
class FirstParent {
   public SecondParent SecondRecord { get; set; }
}

class SecondParent {
   public IEnumerable<FirstParent> FirstRecords { get; set; }
}

class FirstChild1 : FirstParent {
   public String StrInFirstChild1{ get; set; }
}

class SecondChild1 : SecondParent {
   public String StrInSecondChild1{ get; set; }
}

class FirstChild2 : FirstParent {
   public String StrInFirstChild2{ get; set; }
}

class SecondChild2 : SecondParent {
   public String StrInSecondChild2{ get; set; }
} 
```

与 FirstChild1 类相关的记录属于 SecondChild1 类型。与 FirstChild2 类相关的记录属于 SecondChild2 类型。

当我写

```
var record = from ch in context.FirstParent.OfType<FirstChild1>() select ch.SecondRecord; 
```

结果我也有 SecondParent 对象。怎么了？如何加载 SecondChild1 对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T16:03:29.270

我找到了解决办法。我从所有四个表中加载记录并加入以收集匿名对象所需的信息。

# jquery - jquery 用新内容更新 div

> ID：10336878
> 
> 赞同：0
> 
> 时间：2012-04-26T15:46:38.940
> 
> 标签：jquery, click

我想单击一个 div 并更新另一个 div 内容。[在jsfiddle](http://jsfiddle.net/xt584/)中很容易做到， 但它在我的实际项目中不起作用。当我将代码移动到我的项目中时，点击永远不会被注册，并且 console.log() 永远不会触发。有关使用 Chrome 开发人员工具或 Firebug 解决此问题的任何想法。当没有明显的线索时，比如语法错误等。寻找更难以捉摸的线索是什么？

我添加了这个：

```
 $('.routers').click(function(event){ 
             $('#titleBarContainerRightier').append('Scooby Doo!');
        console.log("click!"); 
```

为此，点击事件停止显示：

```
 $(document).ready(function(){
        loadDATA('JSON/data.json', "DSC123");

        $('.routers').click(function(event){ 
                 $('#titleBarContainerRightier').append('Scooby Doo!');
            console.log("click!");

         });
       }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T16:04:51.607

您遇到的问题来自任何您的 loadData 函数，但不知道我无法提供太多帮助，但这是我的证明，没有它它也可以工作。

[http://jsfiddle.net/th3fallen/YV8fN/](http://jsfiddle.net/th3fallen/YV8fN/)

# perl - 如何在现有的 bugzilla 代码中使用 bugzilla API？

> ID：10336884
> 
> 赞同：1
> 
> 时间：2012-04-26T15:46:59.940
> 
> 标签：perl, bugzilla

好吧，目前我有两个目标。

1.  用户在 bugzilla 中没有编辑错误权限，但他/她应该对该错误撰写/发表评论。我认为这可以通过以下 API 实现，但我不确定，因为我是 bugzilla 和 Perl 的新手。[http://www.bugzilla.org/docs/tip/en/html/api/Bugzilla/WebService/Bug.html#add_comment](http://www.bugzilla.org/docs/tip/en/html/api/Bugzilla/WebService/Bug.html#add_comment)

* * *

1.  我想使用 importxml.pl 导入错误，但我不想在 DB 中添加新条目。我只想在包含错误信息的 bug.xml 文件的基础上修改 bugzilla 现有错误的一些字段。

    即 perl -TC:\bugzilla\bugzilla\importxml.pl -v C:\bugzilla\bugzilla\mybugs\bug.xml

可能遵循 API 可能会有所帮助，但我不确定。

[http://www.bugzilla.org/docs/tip/en/html/api/Bugzilla/WebService/Bug.html#update](http://www.bugzilla.org/docs/tip/en/html/api/Bugzilla/WebService/Bug.html#update)

* * *

那么，实现这些目标的可能方法是什么？

正如我所想，也许我应该在现有的 bugzilla 代码中使用这些 API 的方法，我的梦想是：

1.  将为没有错误编辑权限的用户启用评论。
2.  我将通过传递一些参数从命令行运行 importxml.pl 脚本，并修改现有错误的一些字段。

但我不确定，我的想法是对还是错。我也不知道这些API的方法怎么用？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T20:19:01.703

email_in.pl 脚本可以执行您所要求的类型的事情。但是，您需要创建一个有权进行更改的用户，并且您需要将数据转换为 email_in.pl 可以理解的形式。

[http://www.bugzilla.org/docs/4.2/en/html/api/email_in.html](http://www.bugzilla.org/docs/4.2/en/html/api/email_in.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-25T06:52:28.453

我可以帮助解决第一点：

这是我修改的 svn_bz_append.pl 脚本 ( [http://www.telegraphics.com.au/svn/svn_bz/trunk/ ) 的摘录，用于更新 bugzilla 对 svn 提交的评论。](http://www.telegraphics.com.au/svn/svn_bz/trunk/)请注意，我在安装 Bugzilla 的同一台机器上运行此脚本，因为它使用 Bugzilla 目录中的模块。我有这个适用于 Bugzilla v 4.2.3。

我已经省略了相当多的这个脚本来提取下面的摘录：

```
use strict;
use warnings;

use Bugzilla;
use Bugzilla::Config;
use Bugzilla::Bug;

use Data::Dumper; 
```

... 创建/获取用户 ID 和一些要处理的错误 ID ...

例如：

```
my $userid = 1;
my @bugs = ( 1, 2, 3 );
my $message = 'Say something here'; 
```

...现在循环遍历错误 ID 并添加注释...

```
foreach my $bugId (@bugs) {

my $user = new Bugzilla::User({ id => $userid}) 
 || ThrowUserError('invalid_username', { id => $userid}); #get the user from bugzilla
print STDERR 'user: '. Dumper($user); #pretty prints the user object

Bugzilla->set_user($user); #this authenticates the user so that you may perform actions on bugs that the user has permissions to.

my $bug = Bugzilla::Bug->check($bugId); #gets the bug
print STDERR 'bug: '. Dumper($bug); #pretty prints the bug object

$bug->add_comment($message); #adds a comment to the bug
$bug->update(); #updated the bug - don't forget to do this! 
```

}

请注意，Dumper 函数只是使用了出色的 Data::Dumper 模块：[http://perldoc.perl.org/Data/Dumper.html](http://perldoc.perl.org/Data/Dumper.html) - 除了调试之外，您不需要它们。

登录信息来自：[在脚本中使用 Bugzilla Perl API 时如何进行身份验证？](https://stackoverflow.com/questions/2769469/how-can-i-authenticate-when-using-the-bugzilla-perl-api-in-a-script)

# jquery - jquery按钮单击并悬停

> ID：10336890
> 
> 赞同：0
> 
> 时间：2012-04-26T15:47:26.367
> 
> 标签：jquery, html

好的，我有这个代码：

```
<html>
<head>
<script src="js/jquery.js"></script>
<script type="text/javascript">
function ps()
{
$('#mm').slideDown("slow");
}
$(document).ready(function(){
$('#mm').hide();
document.onclick = $('#mm').hide(); //this is not working, this one should make the '#mm' hide.
});
</script>
<body>
<button onclick="ps()" id="title" class="bb">Page settings
<ul id="mm">
<li><a href="#">Title</a></li>
<li><a href="#">meta tags</a></li>
<li><a href="#">favicon</a></li>
<li><a href="#">header settings</a></li>
</ul>
</button>
</body>
</html> 
```

现在，我想要的是每当用户点击按钮（'#title'）时，这个ul（'#mm'）将显示，当然如果用户点击一个方式或将鼠标悬停在那个ul上，那个ul将是隐。希望有人可以提供帮助，在此先感谢。我对任何建议持开放态度。这就像一个下拉菜单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:51:08.237

你的 HTML 和你的 Javascript 有点古怪。您可能想要验证您的 HTML 并了解有关 jQuery 的更多信息。

您可能只需要两个简单的事件处理程序：

```
$('#title').click(function(){$('#mm').show()});
$('#title').mouseout(function{$('#mm').hide()}); 
```

[这是一个工作示例](http://jsfiddle.net/4gChP/)

**html**

```
<button id="title">Set Title</button>

<ul id="mm">
    <li>Title One</li>
    <li>Title Two</li>
    <li>Title Three</li>
</ul> 
```

**CSS**

```
#mm{
    display:none;
} 
```

**jQuery**

```
$('#title').click(function(){
   $('#mm').show();
});

$('#title').mouseout(function(){
  $('#mm').hide();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:59:54.493

首先关闭您的 head 部分，按钮内的许多其他元素可能不是一个好主意，并且不需要内联 javascript 处理程序。也许这样的事情会起作用：

```
<!DOCTYPE html>
    <head>
        <script src="js/jquery.js"></script>
        <script type="text/javascript">
            $(document).ready(function(){
                $('#mm').hide();
                $("#title").on({
                     click: function() {
                         $('#mm').slideDown("slow");
                     },
                     mouseleave: function() {
                         $('#mm').delay(300).slideUp("slow");    
                     }
                });
            });
        </script>
    </head>
    <body>
        <button id="title" class="bb">Page settings
            <ul id="mm">
                <li><a href="#">Title</a></li>
                <li><a href="#">meta tags</a></li>
                <li><a href="#">favicon</a></li>
                <li><a href="#">header settings</a></li>
            </ul>
        </button>
    </body>
</html>​ 
```

[小提琴](http://jsfiddle.net/adeneo/EgXZV/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T16:16:20.233

你可以使用 jquery toggle() 函数来做到这一点
示例[http://jsfiddle.net/EnigmaMaster/WgSp4/](http://jsfiddle.net/EnigmaMaster/WgSp4/)

```
 $('#title').click(function() {
    $('#mm').toggle();
});​ 
```

# gwt - 当我使用 GWT 将其设置为纪元时，Cookie 到期时间设置为“会话”

> ID：10336894
> 
> 赞同：0
> 
> 时间：2012-04-26T15:47:40.833
> 
> 标签：gwt, google-chrome, cookies

我正在尝试删除我拥有的 GWT 应用程序中的 cookie。我第一次尝试使用`Cookies.removeCookie`，但它似乎没有任何效果。我相当确定这是因为 removeCookie 不允许您指定域和路径。

我现在正在尝试通过将 cookie 设置为在纪元时间过期，但是当我签入 chrome 的开发工具时，cookie 的过期时间设置为“会话”，它并没有像我预期的那样立即被删除。

这是我正在使用的。我使用与设置 cookie 时相同的参数，唯一的区别是值和日期。

```
boolean secureCookie = "https:".equalsIgnoreCase(Window.Location.getProtocol());
Cookies.setCookie("cookieName", "", new Date(0), null, "/", secureCookie); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T15:35:14.363

好像在

```
boolean secureCookie = "https:".equalsIgnoreCase(Window.Location.getProtocol()); 
```

你`:`在“https”之后有一个流浪者（因为`Window.Location.getProtocol()`可能会返回“https”，而不是“https:”。）所以，你没有将 cookie 设置为“安全”，结果是完全可以预料的。

# c# - gridview 中的按钮在不应该触发所有验证器时触发

> ID：10336896
> 
> 赞同：0
> 
> 时间：2012-04-26T15:47:43.027
> 
> 标签：c#, asp.net, gridview, validation

首先让我说我知道如何使用`CausesValidation`and `ValidationGroup`。我有一个奇怪的情况，我有一个 Ajax Tab 容器。每个选项卡都有一个网格视图，并且在网格视图中生成的行都有一个`TemplateField`包含“添加”按钮。网格视图和选项卡容器中的按钮都`ValidationGroup`用于防止任何交叉污染，并且所有“添加”按钮都设置为`CausesValidation = "false"`

我刚刚添加了最后一个网格视图，“添加”按钮触发了页面上的所有验证器。再次设置“添加”按钮，`CausesValidation = "false"`因此没有理由以这种方式运行。我什至在前端和后面的代码中设置了这个值。

对于尝试，我尝试了以下链接中的建议：[“解决方案 1”](http://forums.asp.net/t/1687911.aspx/1)和[“解决方案 2”](http://sandblogaspnet.blogspot.com/2009/12/weird-causesvalidation-not-working.html)

有没有其他人遇到过这个并找到了解决方案？

**编辑**代码请求：我将只发布有问题的选项卡面板，因为整个容器将近 500 行

```
<asp:TabPanel ID="tab_Browse" runat="server" HeaderText="Browse">
            <ContentTemplate>
                <table id="browseTable">
                    <tr>
                        <td>Category</td>
                        <td>
                            <asp:DropDownList ID="browseDDL" runat="server" AppendDataBoundItems="True">
                                <asp:ListItem Text="All categories" Value="999"></asp:ListItem>
                            </asp:DropDownList>
                        </td>
                        <td>
                            <asp:Button ID="btnBrowse" runat="server" Text="Browse" ValidationGroup="vgBrowse" OnClick="btnBrowse_Click" />
                        </td>
                    </tr>
                </table>
                <asp:GridView ID="gvBrowse" runat="server" AutoGenerateColumns="false" AllowPaging="true" PageSize="8"
                    OnPageIndexChanging="gvBrowse_PageIndexChanging" DataKeyNames="foodId"
                    OnRowDataBound="gvBrowse_RowDataBound" Width="790px">
                    <Columns>
                        <asp:TemplateField HeaderText="Food ID" Visible="false">
                            <ItemTemplate>
                                <%# Eval("foodId") %>
                            </ItemTemplate>
                        </asp:TemplateField>
                        <asp:TemplateField HeaderText="Description">
                            <ItemTemplate>
                                <%# Eval("Shrt_Desc") %> (100g)
                            </ItemTemplate>
                        </asp:TemplateField>
                        <asp:TemplateField HeaderText="Calories" ItemStyle-Width="50px">
                            <ItemTemplate>
                                <%# Eval("cals") %>
                            </ItemTemplate>
                        </asp:TemplateField>
                        <asp:TemplateField HeaderText="Fat Grams" ItemStyle-Width="75px">
                            <ItemTemplate>
                                <%# Eval("fat") %>
                            </ItemTemplate>
                        </asp:TemplateField>
                        <asp:TemplateField HeaderText="Carbs" ItemStyle-Width="50px">
                            <ItemTemplate>
                                <%# Eval("carbs") %>
                            </ItemTemplate>
                        </asp:TemplateField>
                        <asp:TemplateField ItemStyle-Width="110px">
                            <ItemTemplate>
                                <asp:Button ID="browseAdd" runat="server" CausesValidation="false" Text="Add to meal" CommandArgument="Standard" OnClick="showingEntry" />
                            </ItemTemplate>
                        </asp:TemplateField>
                    </Columns>
                    <RowStyle CssClass="gvRowStyle" />
                    <HeaderStyle CssClass="gvHeader" />
                    <AlternatingRowStyle CssClass="altRow" />
                </asp:GridView>
            </ContentTemplate>
        </asp:TabPanel> 
```

**编辑 2**另一个有趣的花絮。如果我放上`OnClientClick="alert(Page_IsValid)"`我的添加按钮，`true`即使其他选项卡中的验证器被触发，它也会返回。如果我再次单击该按钮，它会返回`false`并且我的代码隐藏失败，就好像页面回发但跳过了该`OnDataBound`方法一样

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T15:13:36.520

我最终通过预加载`gridview`一个空行来解决这个问题。对于为什么这解决了问题没有意义，但确实如此。

# java - 什么是问号“？” 和冒号“：”运算符用于？

> ID：10336899
> 
> 赞同：142
> 
> 时间：2012-04-26T15:48:05.573
> 
> 标签：java, operators, ternary-operator, conditional-operator

关于使用问号“？”的两个问题 和冒号“：”运算符在打印函数的括号内：它们做什么？另外，有谁知道它们的标准术语，或者我可以在哪里找到有关它们使用的更多信息？我读过它们类似于“if”“else”语句。

```
int row = 10;
int column;
while (row >= 1)
{
    column = 1;
    while(column <= 10)
    {
        System.out.print(row % 2 == 1 ? "<" : "\r>");
        ++column;
    }
    --row;
    System.out.println();
} 
```

* * *

## 回答 #1

> 赞同：310
> 
> 时间：2012-04-26T15:49:55.687

这是[三元条件运算符](https://en.wikipedia.org/wiki/%3F:)，它可以在任何地方使用，而不仅仅是打印语句。它有时被称为“三元运算符”，但[它不是唯一的三元运算符](https://stackoverflow.com/questions/2997028/other-ternary-operators-besides-ternary-conditional)，只是最常见的一种。

这是来自 Wikipedia 的一个很好的例子，展示了它是如何工作的：

> 用 C、Java 和 JavaScript 编写了一个传统的 if-else 结构：
> 
> ```
> if (a > b) {
>     result = x;
> } else {
>     result = y;
> } 
> ```
> 
> 这可以重写为以下语句：
> 
> ```
> result = a > b ? x : y; 
> ```

基本上它采用以下形式：

```
boolean statement ? true result : false result; 
```

因此，如果布尔语句为真，则得到第一部分，如果为假，则得到第二部分。

如果仍然没有意义，请尝试以下方法：

```
System.out.println(true ? "true!" : "false.");
System.out.println(false ? "true!" : "false."); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-26T15:50:05.273

那是一个 if/else 语句等价于

```
if(row % 2 == 1){
  System.out.print("<");
}else{
  System.out.print("\r>");
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-10-10T10:03:31.453

```
a=1;
b=2;

x=3;
y=4;

answer = a > b ? x : y; 
```

`answer=4`由于条件为假，因此需要 y 值。

A question mark (?)
. The value to use if the condition is true

A colon (:)
. The value to use if the condition is false

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-19T00:11:57.540

同样，尽管我会发布我遇到的另一个相关问题的答案，

```
a = x ? : y; 
```

相当于：

```
a = x ? x : y; 
```

如果 x 为 false 或 null，则采用 y 的值。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-04-08T12:51:10.187

也许它可以成为 Android 的完美示例， **例如：**

```
void setWaitScreen(boolean set) {
    findViewById(R.id.screen_main).setVisibility(
            set ? View.GONE : View.VISIBLE);
    findViewById(R.id.screen_wait).setVisibility(
            set ? View.VISIBLE : View.GONE);
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-26T15:51:48.820

它们被称为*三元运算符*，因为它们是 Java 中唯一的一种。

if...else 构造的不同之处在于，它们返回一些东西，而这个东西可以是任何东西：

```
 int k = a > b ? 7 : 8; 
  String s = (foobar.isEmpty ()) ? "empty" : foobar.toString (); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-26T15:52:02.447

它是一个三元运算符，用简单的英语表示`"if row%2 is equal to 1 then return < else return /r"`

# python - 如何构建依赖大型系统库的Python包

> ID：10336903
> 
> 赞同：4
> 
> 时间：2012-04-26T15:48:23.667
> 
> 标签：python, opencv, pip, distutils

当 Python 包依赖于大型系统库时，通过 disutils 构建 Python 包的适当方法是什么？

我发现了这个[类似的问题](https://stackoverflow.com/questions/6917456/how-can-i-package-my-python-application-with-external-python-libraries)，但它指的是可安装的 Python 应用程序，而不是通用包。

我写了一个依赖 OpenCV 的包。我只关心支持 Linux 发行版，但大多数发行版要么不提供 OpenCV，要么提供太旧而无法使用的版本。不幸的是，OpenCV 庞大且笨重（并且依赖于其他几个系统库），无法包含在包中并在构建步骤中进行编译。

我目前的方法是在我的 setup.py 中不做任何特别的事情，只需在 try/except 中导入其 Python 模块，如果导入失败，则会显示详细的错误消息。有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T22:54:25.307

你可以使用 zc.buildout：[http ://www.buildout.org/](http://www.buildout.org/)

您应该能够从这个扩展项目的构建配置：[https ://github.com/cpsaltis/opencv-buildout](https://github.com/cpsaltis/opencv-buildout)

# javascript - 访问 iFrame 内的元素返回 null

> ID：10336906
> 
> 赞同：0
> 
> 时间：2012-04-26T15:48:30.397
> 
> 标签：javascript, jquery, iframe

我有一个发布到 iFrame 的表单。iFrame 中的网站是我无法控制的。但是，我想将 iframe 内的一些图像的显示设置为“无”。

```
<form id="testForm" method="post" target="testFrame">
  <input type="hidden" name="RequestXML" ID="RequestXML" value="<Request><RedirectURL>Account/TokenRequest</RedirectURL></Request>"
</form>

<iframe id="testFrame" name="testFrame" frameborder="0" style="width:1000px;height:500px">    </iframe> 
```

这是我在页面顶部的脚本：

```
<script type="text/javascript">
  $(function () {
  $("#testForm").attr("action", "http://externalwebsite.aspx");
  $('#testForm').submit();

  var iframe = document.getElementById('testFrame');
  var innerDoc = iframe.contentDocument || iframe.contentWindow.document;
  //alert($("#testFrame").contents().find("body").html());
  //alert(innerDoc.innerHTML);
  });
</script> 
```

我的两个警报在 Chrome、IE 和 firefox 中都返回 null。访问该 iframe 中的元素的最佳方式是什么。（在 chrome 中，当我尝试执行“检查元素”并查看 html 时，我什至看不到该网站的 html）

顺便说一句，我在 MVC4 项目中做这一切

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T15:51:46.033

假设这不是跨域问题，请尝试：

```
var body = $('#testFrame').contents().find('body'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:59:50.557

由于这个跨域，您有两个选择。

如果您可以访问 iframe 代码，那么您可以将 XDM 代码放在那里，也许[easyXDM](https://github.com/oyvindkinsey/easyXDM)会有所帮助。

或者

你必须去服务器端并让你的 php/asp.net 等后端去获取页面并获取它需要的数据。

# vba - Powerpoint 2003 中的 VBA 宏可以在 Powerpoint 2010 中使用吗？

> ID：10336908
> 
> 赞同：0
> 
> 时间：2012-04-26T15:48:39.233
> 
> 标签：vba, powerpoint

提前道歉，询问一个邪恶的微软产品！

无论如何，我有各种用于 Powerpoint 2003 的宏和附加组件，它们有方便的按钮、键盘快捷键和自动格式化的对象等。唯一的问题是有相当多的代码并不完美评论说我没写。

我尝试将其迁移到 Powerpoint 2010 但没有成功，但我不确定是否是因为我可能没有正确导入它们，或者代码中是否存在根本差异或不兼容。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T15:51:25.950

Code should work. Make sure you have the proper settings in Trust Center.

# mysql - 在 PHP fwrite 函数中进行 MYSQL 查询

> ID：10336909
> 
> 赞同：0
> 
> 时间：2012-04-26T15:48:43.183
> 
> 标签：mysql

基本上我试图让 php 文件创建另一个 php 文件，其中包含 XHTML、PHP 和 MYSQL。我正在尝试包含一个 MYSQL 查询，但问题是我用来启动 fwrite 字符串的撇号 (') 在到达 MYSQL 查询时会混淆，因为它也有一个撇号，但我只是希望该字符串继续不结尾。我应该怎么做才能使它起作用？提前感谢您的帮助。

代码（只是相关位）：

```
$filename = "websites/".$firstpage.".php";
$filehandle = fopen($filename, 'w') or die("error opening file");
$datawrite = '
$query = "SELECT websitetitle FROM $weblist WHERE webID='$webID'";
$result =  mysql_query ($query);
$row = mysql_fetch_array( $result );

echo $row['webID'];

';
fwrite($filehandle, $datawrite);

fclose($filehandle); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:51:15.380

您应该使用 \' 转义查询中的 ' 这将不会执行并结束字符串

```
$filename = "websites/".$firstpage.".php";
$filehandle = fopen($filename, 'w') or die("error opening file");
$datawrite = '
    $query = "SELECT websitetitle FROM $weblist WHERE webID=\'$webID\'";
    $result =  mysql_query ($query);
    $row = mysql_fetch_array( $result );

    echo $row[\'webID\'];

';
fwrite($filehandle, $datawrite);

fclose($filehandle); 
```

查看此内容以供参考 [http://php.net/manual/en/language.types.string.php](http://php.net/manual/en/language.types.string.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:51:29.157

只需使用适当的转义并将 a`\`放在撇号之前。

```
$datawrite = '
$query = "SELECT websitetitle FROM $weblist WHERE webID=\'$webID\'";
$result =  mysql_query ($query);
$row = mysql_fetch_array( $result );

echo $row[\'webID\'];

'; 
```

# python - 如何仅打印给定记录器的日志消息？

> ID：10336914
> 
> 赞同：5
> 
> 时间：2012-04-26T15:48:51.630
> 
> 标签：python, logging, python-2.7

目前我在我的代码中这样做：

```
logger = logging.getLogger(__name__)
logger.info("something happened") 
```

然后在我的主要脚本的顶部，我这样做：

```
logging.basicConfig(level=logging.INFO) 
```

问题是消息太多。有没有办法将其限制为一个或几个不同的记录器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T16:07:55.733

您可以按名称控制单个记录器。（在您的示例中，您使用了**name**，这将是模块名称，因此每个记录器将具有不同的名称，一个模块一个模块）。您可以使用日志记录配置文件来单独控制每个记录器的日志记录级别。看看 PEP： http: [//www.python.org/dev/peps/pep-0282/](http://www.python.org/dev/peps/pep-0282/)

# php - Graph API / FQL 不返回页面的所有事件

> ID：10336916
> 
> 赞同：5
> 
> 时间：2012-04-26T15:48:56.070
> 
> 标签：php, facebook, facebook-graph-api, facebook-fql

Facebook 页面： http: [//facebook.com/getwellgabby/events/](http://facebook.com/getwellgabby/events/)目前有 8 个事件。我可以看到他们。非管理员可以看到它们并可以加入它们。

但是，当我通过 Graph API 或 FQL 进行调用时，只返回 4 个未来事件。结果可以在这里看到：[http](http://getwellgabby.org/events?raw=1) ://getwellgabby.org/events?raw=1 （滚动到底部以获取原始响应。）

FQL 查询是：

```
 SELECT eid, name, start_time, end_time, location, venue, description 
        FROM event WHERE eid IN ( SELECT eid FROM event_member WHERE uid = 213367312037345 ) AND end_time > now()
        ORDER BY end_time asc 
```

检查通过 Graph API 返回的单个事件 ID 显示这些事件之间没有区别。但是，当通过前端编辑它们时，它们会显示在不同的对话框中。

接下来是两个示例事件。两者都是由同一个页面管理员创建的。相隔24小时。第一个事件通过 API/FQL 调用正确显示。第二个没有。从前端看，第二个事件的显示与第一个不同。

以下数据是使用 FB Graph API Explorer Tool 使用具有“create_event”权限的访问令牌返回的。

正确报告：

```
{
  "id": "344143808978921", 
  "owner": {
    "name": "Get Well Gabby", 
    "category": "Non-profit organization", 
    "id": "213367312037345"
  }, 
  "name": "Get Well Gabby Day With The Reading Phillies", 
  "description": "Please join [truncated...]", 
  "start_time": "2012-06-10T13:30:00", 
  "end_time": "2012-06-10T16:30:00", 
  "location": "FirstEnergy Stadium", 
  "venue": {
    "street": "1900 Centre Ave.", 
    "city": "Reading", 
    "state": "Pennsylvania", 
    "country": "United States", 
    "latitude": 40.357, 
    "longitude": -75.91434, 
    "id": "223424611014786"
  }, 
  "privacy": "OPEN", 
  "updated_time": "2012-04-25T14:22:57+0000", 
  "type": "event"
} 
```

未正确报告：

```
{
  "id": "128748077259225", 
  "owner": {
    "name": "Get Well Gabby", 
    "category": "Non-profit organization", 
    "id": "213367312037345"
  }, 
  "name": "Get Well Gabby Day With The Wilmington Blue Rocks", 
  "description": "Get Well Gabby Day With [truncated...]", 
  "start_time": "2012-07-29T13:35:00", 
  "end_time": "2012-07-29T16:35:00", 
  "timezone": "America/New_York", 
  "location": "Frawley Stadium", 
  "venue": {
    "id": "148306638522325"
  }, 
  "privacy": "OPEN", 
  "updated_time": "2012-04-25T18:11:35+0000", 
  "type": "event"
} 
```

请注意，未正确报告的事件的前端对话框将不接受额外的场地信息。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T21:29:02.373

您可以使用*since*和*until*来增加查询范围。

这是使用图形 api 资源管理器和搜索事件的示例（显示未来事件） [https://developers.facebook.com/tools/explorer/135669679827333/?method=GET&path=search%3Ftype%3Devent%26q%3Da%26limit%3D100 %26since%3Dnow%26until%3Dnext%20year](https://developers.facebook.com/tools/explorer/135669679827333/?method=GET&path=search%3Ftype%3Devent%26q%3Da%26limit%3D100%26since%3Dnow%26until%3Dnext%20year)

* * *

```
171535666239724/events?since=2010&until=now // all events since 2010 until now

171535666239724/events?since=now&until=2013 // all events from now until 2013 
```

[对于图形 api 请求：直到，自（unix 时间戳或 strtotime http://php.net/manual/en/function.strtotime.php](http://php.net/manual/en/function.strtotime.php)接受的任何日期）：[https ://graph.facebook.com/search?until =昨天&q=橙色](https://graph.facebook.com/search?until=yesterday&q=orange)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T19:18:42.900

这个问题现在似乎已经解决了。感谢关注此问题的人在 Facebook 上做了什么。

# ruby-on-rails - 如何在 Rails 应用程序之外使用 Rails 会话存储？

> ID：10336924
> 
> 赞同：1
> 
> 时间：2012-04-26T15:49:32.473
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有兴趣在我的 Rails 应用程序服务器旁边部署 Node.js。作为参考，我计划使用 socket.IO 创建一个聊天服务器，这样用户就可以在我的 Web 应用程序中聊天。

我当前的应用程序使用 Authlogic 对用户进行身份验证。我想确保只有一个用户不能阅读其他用户的消息，所以我需要以某种方式对用户会话进行身份验证。我的 Node.js 将可以访问我的数据库，并且我知道 Rails 可以将会话存储在数据库中，所以我想使用此功能来验证聊天用户。问题是，我不知道该怎么做。我什至不确定会话中存在哪些信息，也不知道如何使用这些信息来验证用户身份。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T16:08:00.880

Rails 会话在其他语言中使用起来很棘手：它只是一个序列化的 ruby​​ 对象，几乎唯一的 marshal 格式的文档是 implementation/rubyspec。

但是 authlogic 实际上并没有在会话中存储任何内容：它有一个单独的 cookie（默认情况下为 user_credentials，假设您的模型是`User`）该 cookie 中的数据是`"#{user.persistence_token}::#{user.id}"`，因此您应该能够从您的 js 代码中轻松验证这一点

# android - Rails + Android 中的 Authenticity_token

> ID：10336928
> 
> 赞同：5
> 
> 时间：2012-04-26T15:49:56.533
> 
> 标签：android, ruby-on-rails, authenticity-token

我正在开发一个与 Rails 服务器通信的 Android 应用程序。我不想忽略authenticity_token，但我也不认为要求它是正确的答案。可以做些什么来保护我的 POST 请求？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T16:07:21.977

使用 API 时需要真实性令牌并不常见，就像 Android 应用程序一样；这是因为生成的真实性令牌是为了防止[跨站点请求伪造攻击](https://en.wikipedia.org/wiki/Cross-site_request_forgery)，这只有在会话中才有可能......而且通常如果您正在访问 API，您不会（或不能）使用会话。所以我不会太担心在这里生成真实性令牌。

为了保护您的 POST（或者实际上是任何请求），您可以使用许多选项。[最简单的是使用HTTP basic](http://api.rubyonrails.org/classes/ActionController/HttpAuthentication/Basic.html)对每个请求进行身份验证，更复杂但可以说更安全的是实现[OAuth](https://github.com/pelle/oauth-plugin)。无论哪种方式都会为使用您的应用程序并连接到您的网站的人提供一些安全性。

# jquery - 使用 JQuery 对列表框进行排序

> ID：10336934
> 
> 赞同：1
> 
> 时间：2012-04-26T15:50:24.443
> 
> 标签：jquery

我有一个列表框 lstPresentRates 显示

```
<option value="1.01">(I)Ally Bank-Internet (1.01)</option>
<option value="1.03">(I)Alostar Bank-Internet (1.03)</option>
<option value="0.55">(I)American Express Bank-Salt Lak (0.55)</option> 
```

我想对按钮单击事件的值进行排序。

我试过这个，但它显然不太正确 -

```
$('#lstSelectRates'.value.sort()); 
```

MC

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T15:54:50.057

```
var opt = $('select option');
    opt.sort(function(a, b) {
        if(parseFloat($(a).attr('value')) > parseFloat($(b).attr('value')))
            return 1;
        else return -1;
    });
    $('select').empty().html(opt); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T16:13:29.937

这是一个[jsfiddle](http://jsfiddle.net/QWjDS/2/)

```
var $sel = $('#lstSelectRates');
var $children= $sel.children('option').sort(function(a,b){
                                          a=$(a).attr("value")*1.0;
                                          b=$(b).attr("value")*1.0;
                                          return a > b ? 1 : -1;});

$sel.empty();
$children.appendTo($sel);​ 
```

# sencha-touch - 向网络服务发送值 - 初学者

> ID：10336942
> 
> 赞同：0
> 
> 时间：2012-04-26T15:51:09.733
> 
> 标签：sencha-touch, extjs, sencha-touch-2

当我尝试通过 SenchaTouch 执行将一些值发送到 Web 服务时，出现以下错误。这是什么意思，我该如何解决？我的其余代码可以在这个 SO 帖子中找到

XMLHttpRequest 无法加载[http://testWebService/service/](http://testWebService/service/)。Access-Control-Allow-Origin 不允许来源[http://localhost 。](http://localhost)

注意：我找到了这个[链接](http://www.sencha.com/forum/showthread.php?138619-Access-Control-Allow-Origin#HI)，但它仍然没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:55:37.740

这是阻止跨域 XMLHttpRequest 的浏览器。您将需要在 localhost 上运行 Web 服务的本地副本，或者将您的应用程序上传到 TestWebService 域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T14:02:39.550

如果您计划将您的应用程序作为 Web 应用程序运行，则必须确保您的 Web 服务与您的应用程序在同一个域中。

如果您打算通过 phonegap 部署 sencha touch 但想在浏览器上进行调试，请尝试此操作。

使用 chrome，禁用跨站点脚本安全： [禁用 Chrome 中的同源策略](https://stackoverflow.com/questions/3102819/chrome-disable-same-origin-policy/6083677#6083677)

或者使用 safari : (对于这种方法[http://localhost](http://localhost)不起作用)

1.  在 safari 上本地打开文件。（cmd+o 并选择要运行的 html 文件）

Safari 对本地文件没有 XSS 安全性。

希望能帮助到你。

问候，史蒂夫0hh

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T22:02:39.307

请参阅 enable-cors.org，以启用跨域资源共享。

# javascript - Jquery .val() == ** 添加多个可能的答案 **

> ID：10336953
> 
> 赞同：3
> 
> 时间：2012-04-26T15:51:47.707
> 
> 标签：javascript, jquery

我通过执行以下操作实现了这一点，但作为 javascript 和 jquery 的新手，我想知道是否有更短的方法来添加多个可能的值。

```
if ($("input:first").val().toUpperCase() == "UNITED STATES" || $("input:first").val().toUpperCase() == "USA" || $("input:first").val().toUpperCase() == "AMERICA") {
                $("#check").text("Correct!").show().fadeOut(5000);
                return true; 
```

像

```
if ($("input:first").val().toUpperCase() == ("UNITED STATES","USA","AMERICA")) {
                $("#check").text("Correct!").show().fadeOut(5000);
                return true; 
```

在这种情况下，这仅验证了美国的最后一个答案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-26T15:54:44.940

使用[$.inArray()](http://api.jquery.com/jQuery.inArray/)：

```
if( $.inArray( $("input:first").val().toUpperCase(), [ "UNITED STATES", "USA", "AMERICA" ] ) > -1 ) { ... 
```

演示：http: [//jsfiddle.net/4ar2G/](http://jsfiddle.net/4ar2G/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T15:57:31.183

您可以使用键是必需值和`in`运算符的对象：

```
var matches = { 'UNITED STATES': 1, 'USA': 1, 'AMERICA': 1 };

if ($("input:first").val().toUpperCase() in matches) {
   ...
} 
```

以我的经验，这实际上是非常有效的——Javascript 非常擅长查找对象的属性，并且它避免了线性数组扫描，因此对于较大的数组，它`O(log n)`不是`O(n)`.

但是，如果您弄乱了`Object.prototype`，请不要使用！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-26T15:59:07.590

为了平衡起见，等效的非jQuery方式（因为jQuery不会自动意味着更好）：

```
if(["UNITED STATES", "USA", "AMERICA"].indexOf($('input:first').val().toUpperCase()) > -1) {
    $("#check").text("Correct!").show().fadeOut(5000);
    return true;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-26T15:56:19.700

试试这个：

```
if($.inArray($("input:first").val().toUpperCase(), ["UNITED STATES","USA","AMERICA"]) > -1){
            $("#check").text("Correct!").show().fadeOut(5000);
            return true;
} 
```

# iphone - 图像在 iPhone 模拟器中显示不正确

> ID：10336954
> 
> 赞同：1
> 
> 时间：2012-04-26T15:51:48.823
> 
> 标签：iphone, ios, xcode

当我在应用程序中更新大量图像后在模拟器中运行我的 iOS 应用程序时，显示的图像仍然是旧图像。为了正确更新加载到模拟器中的图像，必须做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T16:02:44.707

尝试 Xcode 菜单：产品：如果不够，请清理转到 Xcode 首选项：位置选项卡：单击派生数据下方的灰色小箭头

然后在finder选择的文件夹中删除所有文件...

# eclipse - How to build and get building errors in eclipse for specific package

> ID：10336965
> 
> 赞同：0
> 
> 时间：2012-04-26T15:52:25.193
> 
> 标签：eclipse, ant, build

I have 3 different packages, let's say :

```
com.pack.*
com.package.commons.*
com.package.app.* 
```

The thing is, these 3 packages are in the same source folder and I can't move them.

*   My `com.pack` is completely independant, let's say it's my framework.
*   My `com.package.commons` can import classes from `com.pack` ONLY.
*   My last package can import whichever classes it needs.

In my eclipse project everything is thing as long as I'm the only one to develop, I know I can't import anything without checking first where it comes from. But I work in a team and errors happen frequently, I've tried to make an Ant Build that will first build my framework then my commons (with the framework in it's CP during build time) and lastly my app. But I can't get any error from it. Do you have any idea how I can perform these checks during build time or any other solution?

thanks

EDIT: I can't split in 3 projects even if it would be lot easier I know that!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T10:49:29.103

为什么不把项目分成三个eclipse项目呢？如果一个包是完全独立的，那么（在我看来）它不属于那个项目。这也适用于您的 package.common 包。当它是一个库项目时，它可以被分离，从而隐含地解决你的“单独构建”问题。

至于错误，我不能很好地理解你。你的意思是什么类型的错误？当项目被分成几个具有依赖关系的项目时，也会产生导入错误（例如包之间的可见性）。

# sql - SQL：在同一张表上组合四个“where”子句

> ID：10336969
> 
> 赞同：2
> 
> 时间：2012-04-26T15:53:06.910
> 
> 标签：sql, ms-access

我目前正在努力让它发挥作用。

```
SELECT        Y, SUM(N) AS sumDK, NULL AS sumFI, NULL AS sumNO, NULL AS sumSE
FROM            stat
WHERE        (C = 'Denmark')
GROUP BY Y
UNION ALL
SELECT        Y, NULL AS sumDK, SUM(N) AS sumFI, NULL AS sumNO, NULL AS sumSE
FROM            stat
WHERE        (C = 'Finland')
GROUP BY Y
UNION ALL
SELECT        Y, NULL AS sumDK, NULL AS sumFI, SUM(N) AS sumNO, NULL AS sumSE
FROM            stat
WHERE        (C = 'Norway')
GROUP BY Y
UNION ALL
SELECT        Y, NULL AS sumDK, NULL AS sumFI, NULL AS sumNO, SUM(N) AS sumSE
FROM            stat
WHERE        (C = 'Sweden')
GROUP BY Y 
```

这个查询给了我一个像这样的矩阵：

```
Y | sumDK | sumFI | sumNO | sumSE
----------------------------------
2011| 25 | NULL | NULL | NULL 
2012| 5 | NULL | NULL | NULL 
2011| NULL | 18 | NULL |NULL 
2012| NULL | 5 | NULL |NULL 
...... 
```

如何执行只返回字段 NOT NULL 的查询？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T15:58:42.600

```
SELECT      Y, C, SUM(N) 'Sum'
FROM        stat
WHERE       C IN ( 'Denmark', 'Finland', 'Norway', 'Sweden' )
GROUP BY    Y, C 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T16:08:43.980

遍历表一次，并通过对各列的匹配求和将其创建为交叉表

```
select
      Y,
      SUM( IIF( C = 'Denmark', N, 0 )) as SumDenmark,
      SUM( IIF( C = 'Finland', N, 0 )) as SumFinland,
      SUM( IIF( C = 'Norway', N, 0 )) as SumNorway,
      SUM( IIF( C = 'Sweden', N, 0 )) as SumSweden,
      sum( N ) totalSumValue,
      count(*) totalEntries
   FROM 
      STAT
   WHERE
      C IN ( 'Denmark', 'Finland', 'Norway', 'Sweden' )
  GROUP BY 
      Y 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T15:57:54.193

是否有必要以不同的方式命名它们？关于什么

```
SELECT        Y, SUM(N) AS sum, C
FROM            stat
WHERE        (C = 'Denmark')
GROUP BY Y
UNION ALL
SELECT        Y, SUM(N) AS sum, C
FROM            stat
WHERE        (C = 'Finland')
GROUP BY Y
UNION ALL
SELECT        Y, SUM(N) AS sum, C
FROM            stat
WHERE        (C = 'Norway')
GROUP BY Y
UNION ALL
SELECT        Y, SUM(N) AS sum, C
FROM            stat
WHERE        (C = 'Sweden')
GROUP BY Y 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T16:27:34.847

最好的猜测 - 我没有 Access 方便尝试 - 使用[TRANSFORM](http://msdn.microsoft.com/en-us/library/bb208956.aspx)：

```
TRANSFORM SUM(N)
  SELECT Y FROM STAT
  GROUP BY Y
  ORDER BY Y
  PIVOT C 
```

# resharper - 自定义 ReSharper 生成的属性代码

> ID：10336974
> 
> 赞同：1
> 
> 时间：2012-04-26T15:53:23.583
> 
> 标签：resharper

使用 reSharper -> 编辑 -> 生成代码 -> 属性：

```
private int _age; 
```

我明白了

```
 public int Age
    {
        get { return _age; }
        set { _age = value; }
    } 
```

没关系，但是如果我想要这样的东西我该怎么办：

```
 public int Age
    {
        get { return _age; }
        set 
            { 
                if (_age != value)
                {
                    _age = value; 
                    OnPropertyChanged("Age");
                }
            }
    } 
```

有没有办法自定义 ReSharper 的输出？仅供参考，我使用的是 Visual Studio 2008，ReSharper v5.1。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T16:44:37.947

您可以像这样编写自己的 ReSharper**实时模板**：

![在此处输入图像描述](../Images/f8523082a2733f29571ca07d0eee169f.png)

然后，您可以通过输入实时模板快捷方式的第一个字母来一步一步输入带有支持字段和*OnPropertyChangedEvent*`propWithChangeEvents`调用的新属性： 。
然后出现一个智能列表。您选择***propWithChangeEvents***，输入**字段类型**（即*int*）和***ENTER***，然后输入**字段名称**（即*age*）和***ENTER***。
然后根据需要生成所有内容。

那是针对新字段/属性的。如果您真的需要现有字段相同的内容，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T16:02:20.960

您可以创建一个[实时模板](http://www.jetbrains.com/resharper/features/code_templates.html)来做您想做的事。我有几个用于自定义属性实现的模板。这是非常强大的东西。

# mopub - Integration MoPub encounted un error and the pub not show: webcore can't get the viewwidth after the first layout

> ID：10336980
> 
> 赞同：1
> 
> 时间：2012-04-26T15:53:55.127
> 
> 标签：mopub

I recently integrate MoPub for showing the advertisement of my enterprise. So I have added a part of xml into my main.xml

```
 <com.mopub.mobileads.MoPubView
        android:id="@+id/adview"
        android:layout_width="fill_parent"
        android:layout_height="50dp" /> 
```

And for download image of advertisement,

```
private static class LoadHtmlAdTaskResult extends LoadUrlTaskResult {
    protected String mData;

    private LoadHtmlAdTaskResult(AdView adView, String data) {
        super(adView);
        mData = data;
    }

    public void execute() {
        if (mData == null)
            return;

        AdView adView = mWeakAdView.get();
        if (adView == null || adView.isDestroyed())
            return;

        adView.mResponseString = mData;
        Log.i(TAG, "LoadHtmlAdTaskResult"); 
        //String contain html tags with images      
        String source =
    "<img src='http://banner.testadvertisement.com/campaign/12563254'>";
        adView.loadDataWithBaseURL("http://www.adserverpub.com",
            source,"text/html","UTF-8","about:blank");
    } 
```

But The image doesn't show up and I always get this error in my catlog "can't get the viewwidth after the first layout".

Does anyone have encountered this problem?

I have no idea where this error come from? Thank you all.

# linux - ant command works from within Eclipse but not from linux command line

> ID：10336981
> 
> 赞同：2
> 
> 时间：2012-04-26T15:54:00.877
> 
> 标签：linux, eclipse, ant, command-line

I have a Java project done with Eclipse and I have an ANT command that works perfectly if run from within Eclipse's ANT tool but it doesn't work if I try to run the ANT command from the Linux command line.

Why can it be happening? I have several ANT commands working both in Eclipse and from the command line.

The command is this one:

```
<target name="run.jmsserver">
            <java classname="JMSInternationalEventServer/JMSInternationalEventServer" classpath="${classpath}" fork="true">
            </java>
</target> 
```

And classpath is defined previously:

```
<property name="classpath" location="bin:EventReservationCore/bin:EventReservationCore/db:EventReservationCore/lib/*:EventReservationCore/lib/util_iso2.jar:EventReservationCore/lib/sqlitejdbc-v056.jar:AuthorizationRMI/lib/AuthorizationService.jar"/> 
```

The error I am getting is:

```
 [java] Exception in thread "main" java.lang.NoClassDefFoundError: javax/jms/JMSException
 [java] Caused by: java.lang.ClassNotFoundException: javax.jms.JMSException
 [java]     at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
 [java]     at java.security.AccessController.doPrivileged(Native Method)
 [java]     at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
 [java]     at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
 [java]     at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
 [java]     at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
 [java] Could not find the main class: JMSInternationalEventServer.JMSInternationalEventServer.  Program will exit.
 [java] Java Result: 1 
```

Thank you very much.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:29:19.260

谢谢 Jason Braucht 的帮助，问题是它`EventReservationCore/lib/*`不起作用，即使我读过它应该在 Linux 上工作。

# asp.net-mvc-3 - 使用 Autofac 进行 MVC 3 通用存储库注入

> ID：10336983
> 
> 赞同：2
> 
> 时间：2012-04-26T15:54:09.513
> 
> 标签：asp.net-mvc-3, generics, dependency-injection, repository-pattern, autofac

这是问题所在：我正在研究使用通用存储库的解决方案，存储库工作正常等等。问题是我试图重构代码以启用对控制器构造函数的注入依赖项。为什么我要实现这个？，解决方案使用 TDD，我们希望简化应用程序的测试方式。我不想像我们实际所做的那样创建假货，而不是我真的想利用 EF 存储库的好处并在编译时解决，如果我使用 FakeRepository（在级别实体进行更改）和真正的存储库对数据库的更改。

我使用 EF 作为持久性技术。

这些行代表存储库

```
public class Repository<T> : IRepository<T> where T
                                : class, IEntity
{
    private readonly DbSet<T> dbset;
    private readonly DbContext _context;

    public Repository(DbContext context)
    {
        _context = context;
        dbset = context.Set<T>();
    }

    public void Add(T entity)
    {
        //Some logic...
    }

    public void Update(T entity)
    {
        //Some logic...
    }

    //more methods...

} 
```

这些行代表 Fake Repository

```
 public class FakeRepository<T> : IRepository<T> where T
                                : class, IEntity
{
    private readonly DbSet<T> dbset;
    private readonly DbContext _context;

    public FakeRepository(DbContext context)
    {
        _context = context;
        dbset = context.Set<T>();
    }

    public void Add(T entity)
    {
        //Some logic...
    }

    public void Update(T entity)
    {
        //Some logic...
    }

    public void Remove(T entity)
    {
        //Some logic...
    }

    //more methods...
} 
```

这些行代表存储库的接口契约。

```
public interface IRepository<T>
                    where T : class, IEntity
{
    void Add(T entity);
    void Remove(T entity)
    void Remove(T entity);
    //more methods...
} 
```

这是一个控制器示例，它的构造函数需要 previos 类型的 Generic。

```
public class DemoController : Controller
{
    private readonly IRepository<IEntity> _repository;
    public DemoController(IRepository<IEntity> repository)
    {
        _repository = repository;
    }

    public ViewResult Index()
    {
        return View(_repository.FindAll());
    }

} 
```

所以，问题是......我如何在 Autofac 容器上注册类型。我看到很多关于如何实现这一点的论坛，但没有找到解决这个需求的方法。

在 global.asax 中尝试过：

```
 protected void Application_Start()
    {
        ConfigureIoC();
        AreaRegistration.RegisterAllAreas();

        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);
    }

    private static void ConfigureIoC()
    {
        var builder = new ContainerBuilder();
        builder.RegisterControllers(typeof(Global).Assembly);

        //At this section the dependencies are added in order to resolve Types.
        builder.RegisterType<MyController>().InstancePerHttpRequest();

        builder.RegisterType<MyContext>().As<DbContext>();
        builder.RegisterType<Repository<Entity>>().As<IRepository<IEntity>>();

        var container = builder.Build();
        DependencyResolver.SetResolver(new AutofacDependencyResolver(container));
    } 
```

我也尝试注册单个类型，但 autofac 根本不知道如何解析控制器构造函数。

提前致谢！。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T07:36:27.143

您正在将 注入`IRepository<IEntity>`，`DemoController`这很奇怪，因为`IEntity`它不是一个具体的实体，`DemoController`可能需要一个具体的实体（例如`Customer`）。由于您想映射`IRepository<T>`到具体的`Repository<T>`，您需要以下注册：

```
builder.RegisterGeneric(typeof(Repository<>))
    .As(typeof(IRepository<>)); 
```

您可能还需要`DbContext`根据 Web 请求或在生命周期范围内注册。`MyController`注册as似乎很奇怪`PerHttpRequest`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T14:52:58.897

谢谢你的建议史蒂文。看到文档和其他一些博客，我找到了一个我分享的解决方案。另外，我会尝试您的替代方法来检查哪种方法比其他方法更快。

基于泛型焦点解析构造器注入的代码如下：

```
 protected void Application_Start()
    {
        ConfigureIoC();
        AreaRegistration.RegisterAllAreas();

        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);
    }

    private static void ConfigureIoC()
    {
        var builder = new ContainerBuilder();
        builder.RegisterControllers(typeof(Global).Assembly);

        //First we register the types for DemoController.
        builder.RegisterType<Repository<Entity>>().As<IRepository<IEntity>>();
        //Then we register the controller itself resolving/indicating the target type to use on the constructor.
        builder.Register(c => new DemoController(c.Resolve<IRepository<IEntity>>()));

        //We build the container.
        var container = builder.Build();
        DependencyResolver.SetResolver(new AutofacDependencyResolver(container));
    } 
```

还有另一种方法使用 autofac 的另一种方法，但是由于以前的方法自动解决了依赖关系，所以它就足够了。我只是把方法仅供参考

```
 builder.RegisterType(typeof(DemoController)).UsingConstructor(typeof(IRepository<IEntity>)); 
```

我还分享了一个链接，您可以在其中下载示例项目，并非常清楚地显示 Autofac 在这个数学中是如何工作的。

[Autofac T](http://www.codeproject.com/Articles/25380/Dependency-Injection-with-Autofac)

# android - Android aapt high processor utilization (and slow!)

> ID：10336984
> 
> 赞同：12
> 
> 时间：2012-04-26T15:54:12.400
> 
> 标签：android, maven-3, aapt

I'm having an issue with Android's `aapt` tool. I run two development environments. Each one is on a quad core rig with 8gb of RAM. One is Windows 7, the other is Ubuntu 10.04\. Both are running Eclipse 3.7r2 and ADT 18.0.

I build with maven. My build on the linux system takes about 1 minute, and on the windows system it takes 4 minutes.

The performance seems to be cpu-bound on the windows box, since I can see `aapt.exe` taking up a whole core for at least 2 minutes out of the build process. It executes in a heartbeat on linux.

It doesn't seem to be the png compression issue (as documented [here](https://groups.google.com/forum/#!topic/android-developers/DT-i8QK27Iw)) since that was supposed to be fixed in ADT17.

Has anyone else with this issue found a workaround? Does anyone else have this issue?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T10:09:27.483

也许[这](http://forum.xda-developers.com/showthread.php?t=1907281)会加快你的编译速度？这是对“慢”标准 AAPT 工具的修复。

# javascript - 如何修改 KendoUI DropDownList 项

> ID：10336989
> 
> 赞同：10
> 
> 时间：2012-04-26T15:54:23.593
> 
> 标签：javascript, jquery, asp.net-mvc, kendo-ui

我们第一次使用了 Kendo UI DropDownList，没有绑定敲除。通过 jquery，通常的 html 输入被转换为 KendoUI DropDownList。但是我怎样才能删除/编辑/添加项目到选项？

如果我通过 jquery 修改 html 输入选项，它对 kendoui 下拉列表没有影响——即使之后有刷新调用。

任何想法如何做到这一点？谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-28T08:55:09.170

哟伙计

您应该使用组合框的[数据](http://demos.kendoui.com/web/datasource/index.html)源。例如

```
var ds = $('#YourCombo').data().kendoComboBox.dataSource; 
```

然后你可以像这样修改项目

```
//someIndex is the index of the item in the dataSource
ds.data()[someIndex].set("text","Cool! its changed"); 
```

添加或删除使用数据源的**添加**和**删除**方法

```
ds.add({text:"Test again!",value:"5"}); 
```

# c++ - Delete a member of a structure, and remake it as a copy of something else without using new

> ID：10336992
> 
> 赞同：0
> 
> 时间：2012-04-26T15:54:43.003
> 
> 标签：c++

So I'm working with an API which really isn't as functional as it could be. (Quickhaptics to be specific) In order to make something that I have work, I need to delete an object within a structure, create it again, (without using new, because the constructor for the object doesn't work the way I need it to) then set it to something.

I'm trying to do something along the lines of

```
delete data.cursor;
Cursor* data.cursor = (Cursor*)malloc(sizeof(Cursor));
data.cursor = data.cursors[index]; 
```

But this causes a crash(EDIT sorry, it doesn't compile is what I meant to say, but I don't understand the compiler errors)

Additional info: The way the API works, I need to send it a pointer to an item, which it takes initially and writes information to throughout execution. I'm trying to update the mesh on a cursor type object. It provides update functions to load in new meshes, but they are very expensive and can only run at ~3 fps. My solution is to load the objects into an array at startup, then just switch out the object that the program looks for as a cursor.

I'm generally new to C++, and my experience is all from sitting down and typing with no instruction, so there may be some basic C++ thing that I'm missing.

EDIT: Just to be clear, doing this works, just very slowly

```
delete data.cursor;
data.cursor = new Cursor("filename"); 
```

where data.cursors[index] was declared in teh same exact way at startup

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T15:59:33.403

看起来好像您已经在地址分配了内存，`malloc()`然后将地址值设置为某个对象，也许？您最可能想要的是如下一行

```
*data.cursor = data.cursors[index]; 
```

`*`将取消引用该位置的内存，以便您可以设置其值。但是请注意，这将调用`operator=`.

只是一个旁注：

混合`new`/`delete`与`malloc()`/`free()`通常是一个坏主意，因为您需要跟踪对象的分配*方式。*也就是说，您必须将正确的释放调用与它们各自的分配调用一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T16:06:50.363

它无法编译，因为您试图声明一个成员：

```
delete data.cursor;
Cursor* data.cursor = (Cursor*)malloc(sizeof(Cursor)); 
```

是非法的，应该是：

```
delete data.cursor;
data.cursor = (Cursor*)malloc(sizeof(Cursor)); 
```

此外，因为`cursor`是一个指针，做

```
data.cursor = data.cursors[index]; 
```

将使指针指向该内存，因此先前分配的内存（通过`malloc(sizeof(Cursor));`将被泄漏。您可能正在寻找`memcpy`这里。

# jsf-2 - Change content of dynamically on click of link from menu through Ajax

> ID：10336995
> 
> 赞同：2
> 
> 时间：2012-04-26T15:54:49.033
> 
> 标签：jsf-2, primefaces

I'm using JSF2 with Primefaces running on Tomcat 7\. I have created a layout in baseLayout.xhtml as below: -

```
<h:body>
    <p:layout fullPage="true">
        <p:layoutUnit position="north" size="50" id="top">
            <h:form>
                <ui:include src="/template/header.xhtml" />
            </h:form>
        </p:layoutUnit>
        <p:layoutUnit position="south" size="20">
            <h:form>
                <ui:include src="/template/footer.xhtml" />
            </h:form>
        </p:layoutUnit>
        <p:layoutUnit position="west" size="400">
            <h:form>
                <ui:include src="/template/menu.xhtml" />
            </h:form>
        </p:layoutUnit>
        <p:layoutUnit position="center" size="400">
            <h:panelGroup id="centerContentPanel">
                <ui:include src="#{navigationBean.pageName}.xhtml" />
            </h:panelGroup>
        </p:layoutUnit>
    </p:layout>
</h:body> 
```

I want to dynamically change the source of **centerContentPanel** without refreshing the whole page and just the **centerContentPanel** i.e for on click of link present in the menu.xhtml as below: -

```
<h:form id="form2">
       <f:ajax render=":centerContentPanel" execute="@this">
           <h:commandLink value="page1" action="#{navigationBean.doNav}" >
             <f:param name="test" value="/pages/page1" />
           </h:commandLink>
           <h:commandLink value="page2" action="#{navigationBean.doNav}" >
             <f:param name="test" value="/pages/page2" />
           </h:commandLink>
    </f:ajax>
</h:form> 
```

. I tried doing that, but instead it refreshes the whole page without changing the URL, and when I refresh it again, the new page is included. I don't know what is happening. My NavigationBean as below:-

```
public class NavigationBean {

    private String pageName="/template/body";

    public NavigationBean() {
    }

    public String doNav() {
        System.out.println("Hello");
        String str = FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap().get("test");
        this.pageName = str;
        return pageName;
    }

    public String getPageName() {
        return pageName;
    }

    public void setPageName(String pageName) {
        this.pageName = pageName;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T18:48:41.760

更改`doNav()`为 void ，无需返回值...（因为它会导致您的 commandLink 重新加载页面...）您已经更新了`pageName`正在使用的`<ui:include src="#{navigationBean.pageName}.xhtml" />`

`doNav`应该是这样的：

```
public void doNav() {
    System.out.println("Hello");
    String str = FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap().get("test");
    this.pageName = str;

} 
```

`action="..."`您的原因的返回值`refreshes the whole page without changing the URL`