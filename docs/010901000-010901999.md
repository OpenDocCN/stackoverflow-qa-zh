# StackOverflow 问答 10901000-10901999

# ios - iOS - 带有动画的程序化模态segue（例如翻转）

> ID：10901006
> 
> 赞同：4
> 
> 时间：2012-06-05T16:20:27.933
> 
> 标签：ios, modal-dialog, segue, flip

我知道我可以在这样的代码中进行模态转场：

```
[presentModalViewController:my_view, animated:YES]; 
```

但是如何以编程方式指定淡入或水平/垂直翻转？

谢谢， 帕春

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T16:29:21.487

将此属性设置为您的 viewController： `modalTransitionStyle`

**来自苹果文档的**UIModalTransitionStyle****

 **```
 typedef enum { UIModalTransitionStyleCoverVertical = 0, 
                 UIModalTransitionStyleFlipHorizontal,
                 UIModalTransitionStyleCrossDissolve,  
                  UIModalTransitionStylePartialCurl,} UIModalTransitionStyle; 
```**

# android - 在移动设备上的 android 浏览器中访问麦克风

> ID：10901007
> 
> 赞同：2
> 
> 时间：2012-06-05T16:20:29.183
> 
> 标签：android, html, mobile, speech-recognition

无论如何，我可以使用移动设备上安卓键盘上的默认麦克风在输入字段上进行语音识别吗？

例如，当您单击具有

```
<input type ="tel" value=""> 
```

它调出只有数字的安卓键盘。有没有类似的东西可以做

```
<input type="microphone" value =""> 
```

它会调出安卓键盘，但带有“现在说话”的语音识别功能。然后，一旦你说完，它就会用你说的话填写输入字段。

我曾尝试使用其他替代方法（如 flash）来做到这一点，但它确实效果不佳。我也试过这个

```
<input type="file" accept="audio/*;capture=microphone"></input> 
```

但那只是记录你的声音并没有语音到文本的翻译。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T17:06:26.347

Chrome 支持文本输入的语音识别。请参阅[http://slides.html5rocks.com/#speech-input](http://slides.html5rocks.com/#speech-input)和[http://www.filosophy.org/2011/03/talking-to-the-web-the-basics-of-html5-speech-input/](http://www.filosophy.org/2011/03/talking-to-the-web-the-basics-of-html5-speech-input/) . 这些使用以下标签进行语音识别：

```
<input type=”text” speech x-webkit-speech /> 
```

但是，我不相信 Android 浏览器支持这一点。

大多数带有文本输入的网页会自动在键盘上显示麦克风以进行语音识别。如果您使用的是自定义键盘而不是普通键盘，您可能看不到这一点。

当然，您可以强制在本机 Java 应用程序中使用识别器。我只是认为您不能在网页中强制执行此操作。

![在此处输入图像描述](../Images/6bf530b7d1b0e79591ad7d8ed5bf3d92.png).

# knockout.js - Knockoutjs 原生模板 - 创建 url

> ID：10901009
> 
> 赞同：6
> 
> 时间：2012-06-05T16:20:39.630
> 
> 标签：knockout.js, knockout-2.0

如何使用淘汰赛 js***原生***模板创建 url。

```
<a href="http://" title="Visit site">
    <span data-bind="text: site"></span>
</a> 
```

说表达

```
<span data-bind="text: site"> 
```

替代品`www.xyz.com`。我正在寻找一种方法来前缀它`http://`。

所以，像

```
<a href="http://${site}" title="Visit site"> 
```

这可能适用于 jQuery 模板。本质上，我想知道我们总是需要`<span>, <li>`etc 来输出文本。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T16:22:36.417

通过将 data-bind 与 attr 绑定一起使用。您可以在数据绑定中使用纯 javascript，因此您也可以使用默认连接

```
<a data-bind="attr: {'href':  'http://' + $data.site}, text: 'visit site'"></a> 
```

`data-bind`几乎可以在任何东西上完成，只要它是由 DOM 呈现的。所以你可以把它放在`<a>`标签上，或者你想用的任何东西上

# asp.net - 无法从 JSON Webservice 获取值

> ID：10901014
> 
> 赞同：0
> 
> 时间：2012-06-05T16:20:54.560
> 
> 标签：asp.net, ios, xcode, json, web-services

我有一个 Web 服务，它从数据库中选择数据并将它们以 JSON 格式发送到 Iphone

我的网络服务：

```
[ScriptMethod(ResponseFormat = ResponseFormat.Json)]
       [WebMethod]
       public string Person()
       {
           return Helper.Person();
       } 
```

我的助手.cs

```
public class Helper
{
   internal static string Person()
   {
       List<object> person = new List<object>();

       using (SqlConnection con = new SqlConnection(@"Data Source=Localhost\SQLEXPRESS;Initial Catalog=BOOK-IT-V2;Integrated Security=true;"))
       using (SqlCommand cmd = new SqlCommand(@"SELECT EMAIL FROM PERSON", con))
       {
           con.Open();
           using (SqlDataReader rdr = cmd.ExecuteReader())
           {
               while (rdr.Read())
               {
                   if (rdr["EMAIL"] != DBNull.Value)
                   {
                       raumKlassenObject.Add(new {
                           Email=rdr["EMAIL"].ToString()});
                   }
               }
           }
       }

       return new JavaScriptSerializer().Serialize(person.ToArray());
   }
} 
```

在 Xcode 中：

```
 #import "RaumklasseViewController.h"

@interface RaumklasseViewController ()

@end

@implementation RaumklasseViewController
@synthesize result;
@synthesize dic;
@synthesize array;

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}
- (void) sendRequest:(NSString*)jsonText
{
    NSURL *url = [[NSURL alloc]initWithString:@"http://ndqqxtsdsdoludwons-entwickludng.de/Webdiendst22/service1.asmx/Raumklasse"];
    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
    request = [NSMutableURLRequest requestWithURL:url cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:10];
    [request setHTTPMethod: @"POST"];
    [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
    NSData *reqData = [NSData dataWithBytes:[jsonText UTF8String] length:[jsonText length]];
    [request setHTTPBody:reqData];
    NSURLResponse *response =[[NSURLResponse alloc]init];
    NSError* error;
    result = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

}
- (void)viewDidLoad

{
    [super viewDidLoad];
    [self sendRequest:@""];
    dic = [NSJSONSerialization JSONObjectWithData:result options:kNilOptions error:nil];

    self.array= [dic objectForKey:@"d"];

    NSMutableArray *finalArray = [[NSMutableArray alloc] init];
    for(int n=0; n<[self.array count]; n++)
        [finalArray addObject:[[self.array objectAtIndex:n] objectForKey:@"Email"]];

}
- (void)viewDidUnload
{
    [super viewDidUnload];

}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}
#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    return [self.array count];

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    cell.textLabel.text=[array objectAtIndex:indexPath.row];

    return cell;

}

@end 
```

到目前为止它有效，我的输出是：

```
[{"Email":"abcd@web.de"},{"Email":"acsb@web.de"},{"Email":"asbd@gmx.de"},{"Email":"abcdw@web.de"},{"Email":"absds@web.de"}] 
```

但如果我尝试

```
self.array = [[dic objectForKey:@"d"] objectForKey:@"Email"]; 
```

仅获取值：abcd@web.de、acsb@web.de、asbd@gmx.de 等。

所以我得到一个错误：

```
 [__NSCFString objectForKey:]: unrecognized selector sent to instance 0x6a4ccb0. 
```

我认为 Web 服务返回了一些错误。，但我不知道是什么。也许你可以帮助我。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T17:02:34.653

问题在于：

```
[dic objectForKey@"d"] 
```

返回一个字典数组。无法使用 objectForKey 访问数组，就像您在此处尝试的那样：

```
// the second objectForKey message is being sent to the array returned by the first objectForKey
[[dic objectForKey:@"d"] objectForKey:@"Email"]; 
```

但是， valueForKey 确实适用于数组并返回一个新数组，该数组是通过对数组的每个元素调用 valueForKey 产生的：

```
NSArray *objects = [dict objectForKey:@"d"];
NSArray *emails = [objects valueForKey:@"Email"]; 
```

这将为您提供字典数组中的所有电子邮件地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T17:00:44.497

您有一个字典数组，每个字典中有一个键 ( `"Email"`)。

`objectForKey:`是一种返回字典中键的对象的方法。

您不能在您接收的数组上调用此方法，`[dic objectForKey:@"d"]`因为此方法不适用于数组。

而是`objectAtIndex:`像这样使用：

```
self.array = [dic objectForKey:@"d"];
NSMutableArray *finalArray = [[NSMutableArray alloc] init];
for(int n=0; n<[self.array count]; n++)
    [finalArray addObject:[[self.array objectAtIndex:n] objectForKey:@"Email"]]; 
```

一旦完成，运行`finalArray`将只包含一个电子邮件地址字符串数组。

# c# - 带有 SQL 用户表的自定义 MembershipProvider

> ID：10901017
> 
> 赞同：1
> 
> 时间：2012-06-05T16:21:05.947
> 
> 标签：c#, asp.net, sql-server, asp.net-mvc, active-directory

精简版：

如何使用自定义成员资格提供程序通过 SQL 用户数据库针对多个域验证用户，以便在用户第一次登录时，将在用户数据库中输入所有必要信息？有没有办法在 AD 进入 SQL 数据库之前修改一些来自 AD 的信息，例如解析一些字段？

长版：

我正在开发一个让我头疼的 MVC4 Web 应用程序。用户将从两个域 (dc=domainone,dc=company,dc=com) 和 (dc=domaintwo,dc=company,dc=com) 登录。第一个域是一个相对标准的域，大约有 1000 个用户。没有什么花哨。第二个域中有两种类型的用户：具有“实时”密码的用户（大约 100 个用户），这意味着用户可以直接针对域进行身份验证，以及具有作为盐渍哈希存储在额外字段中的密码的用户在目录中（远超过 200,000 个用户）。对于后面的这些用户，我必须从目录中获取存储的 salted-hash，对他们在登录时输入的密码进行哈希处理并比较两者。我在下面的自定义 MembershipProvider 中进行了身份验证，没有问题。

但是，我在 SQL 中的用户表在登录时没有填充用户信息。我有必要为用户表使用 SQL 数据库，而不是单独使用 AD 信息，因为 AD 中有几个必要的字段是未经解析，我的应用程序无法使用。例如，对于 Jane Smith，employeeNumber 字段可能为“12345”，而对于 Joe Smith，该字段可能为空白，他的员工编号是其 DN 的一部分，如 DN="CN=Joe Smith <#1234>,DC=domainone, DC=公司，DC=com"

# 会员提供者

```
 public override bool ValidateUser(string username, string password)
    {
        CompanyAuthenticationService connectionToAD = new CompanyAuthenticationService ();

        //Test US domain log in first
        if (connectionToAD.ValidateAgainstAD(username, password,"domainone"))
            return true;

        //Test Team domain log in next
        if (connectionToAD.ValidateAgainstAD(username, password,"domaintwo"))
            return true;

        //Test Team Hash last
        if (connectionToAD.ValidateAgainstTeamHash(username, password))
            return true;

        return false;
    }

//all other methods are not implemented 
```

# 网络配置

//几行被截断

```
<connectionStrings>
  <add name="ProgramNameDB"
       connectionString="data source=.\SQLEXPRESS;Integrated Security=True;Initial Catalog=ProgramName"
       providerName="System.Data.SqlClient" />
</connectionStrings> 
```

//几行被截断

```
<authentication mode="Forms">
  <forms loginUrl="/Account/Login" timeout="30"/>
</authentication> 
```

//几行被截断

```
<profile defaultProvider="DefaultProfileProvider">
  <providers>
    <add name="DefaultProfileProvider" type="System.Web.Providers.DefaultProfileProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="ProgramNameDB" applicationName="/" />
  </providers>
</profile>
<membership defaultProvider="ProgramNameMembershipProvider">
  <providers>
    <clear/>
    <add name="ProgramNameMembershipProvider"
         type="ProgramName.Services.Security.MembershipProviders.ProgramNameMembershipProvider" />

  </providers>
</membership>
<roleManager defaultProvider="ProgramNameRoleProvider" cacheRolesInCookie="true" enabled="true" cookieTimeout="120" createPersistentCookie="false">
  <providers>
    <add name="ProgramNameRoleProvider" type="ProgramName.Services.Security.RoleProviders.ProgramNameRoleProvider" connectionStringName="ProgramNameDB" applicationName="/" />
  </providers>
</roleManager> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T17:08:46.570

您必须调用该`Membership.CreateUser`方法来创建新用户。您可以将它放在 ValidateUser 方法中，或在 Login 控件的 LoggedIn 事件中。显然，在调用 CreateUser...

有关 LoggedIn 事件的更多信息：http: [//msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.login.loggedin.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.login.loggedin.aspx)

# .net - 哪个更快：清除集合或实例化新的

> ID：10901020
> 
> 赞同：78
> 
> 时间：2012-06-05T16:21:23.113
> 
> 标签：.net, performance, list, optimization, collections

我的代码中有一些通用列表，其中包含数十或数百个元素。`Clear()`有时我需要用其他对象重新填充这个列表，所以问题是：调用方法或创建一个更快的方法是`new List<T>()`什么？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-06-05T16:26:02.737

> 什么会更快，调用`Clear()`方法或创建一个`new List()？

这是不可能回答的。这真的取决于很多因素，包括收藏品存在多长时间。

这里最好的选择是：

1.  分析应用程序，看看这是否真的很重要。它可能不会产生任何明显的差异，在这种情况下，我会使用对您如何看待这个对象最有意义的方法。

2.  如果确实重要，请编写两组代码，并测量速度差异（如果有）。

从实际的角度来看，调用`Clear()`实际上不会减少内存（由`List<T>`自身使用），因为它不会缩小列表的容量，只会消除其中包含的值。创建一个`List<T>`新列表将导致分配一个新列表，这反过来又会导致更多的分配增长。

然而，这并不意味着它会变慢 - 在许多情况下，重新分配会*更快*，因为您不太可能将大型数组提升到更高的垃圾收集世代，这反过来可以使 GC 过程更快。

如果不知道您的确切场景并在分析器中进行*测量*，则无法知道您的场景中哪个更好。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-06-06T08:39:33.137

我已经运行了这个测试：

```
private static void Main(string[] args)
{
    int defaultN = 1000;

    Stopwatch sw = new Stopwatch();

    while (true)
    {
        Console.WriteLine("Enter test elements number:");
        int n;
        if (!int.TryParse(Console.ReadLine(), out n)) n = defaultN;
        else defaultN = n;

        Console.WriteLine($"Test with {n} elements");

        List<object> list = Enumerable.Repeat(new object(), n).ToList();
        sw.Start();
        Clear(list);
        sw.Stop();
        Console.WriteLine("Clear: {0} ms", sw.ElapsedTicks / 10000D);

        GC.Collect();
        GC.WaitForPendingFinalizers();

        List<object> list2 = Enumerable.Repeat(new object(), n).ToList();
        sw.Restart();
        Reinitialize(list2);
        sw.Stop();
        Console.WriteLine("Reinitialize: {0} ms", sw.ElapsedTicks / 10000D);

        GC.Collect();
        GC.WaitForPendingFinalizers();

        List<object> list3 = Enumerable.Repeat(new object(), n).ToList();
        sw.Restart();
        ReinitializeAndCollect(list3);
        sw.Stop();
        Console.WriteLine("ReinitializeAndCollect: {0} ms", sw.ElapsedTicks / 10000D);

        Console.WriteLine("===");
    }
}
private static List<object> Clear(List<object> list)
{
    list.Clear();
    return list;
}
private static List<object> Reinitialize(List<object> list) => new List<object>();
private static List<object> ReinitializeAndCollect(List<object> list)
{
    list = new List<object>();

    GC.Collect();
    GC.WaitForPendingFinalizers();

    return list;
} 
```

我的结论基于我的普通核心 i3 处理器的结果：

如果有数千个元素 - 最好清除列表。它速度快，内存效率高。

如果集合有超过 100 000 个元素 - 重新初始化变得更有吸引力。如果在分析之后您认为这里存在瓶颈，请使用它。重新初始化会非常快，但正如第三种方法测试所示，未来的垃圾收集将与清除列表一样慢。

如此简短的回答是：如果您没有分析您的应用程序，请使用`Clear`. 重用对象是好的。如果你这样做了——你已经知道该怎么做了。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-05T16:31:27.347

这将取决于很多因素，从长远来看，它在您的程序中可能并不重要（足以计算在内）。

来自 msdn[文档](http://msdn.microsoft.com/en-us/library/ms132405.aspx) `.Clear()`的是 O(n) 操作。

初始化一个新实例将有它自己的开销以及（如果你保持集合相同的长度，一个 O(n) 操作：即 n`Add()`次调用）。

真正测试这一点的唯一方法是在你的程序中设置一些秒表，看看如果你真的认为它值得，效果是什么。在所有的可能性; 这不值得。

我的想法是，如果您已经创建了一个集合，`Clear()`那么这就是为什么`Clear()`首先要有一种方法。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-05T16:24:07.433

虽然这可能令人沮丧，但答案确实是无关紧要。两者之间的时间差异将非常小，以至于它可能不会对您的应用程序产生任何影响。做可以使代码更清晰、更易于理解的事情，并尽量不要为微优化而编程。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-06-05T16:37:08.187

`Clear()`将删除所有元素并保持现有容量，而创建新 List 将需要从托管堆中至少分配一次（如果初始容量很小，可能会添加更多项）。

*   如果您有大量项目，并且每次迭代的项目数量大致相同，那么使用`Clear`可能会稍微快一些。

*   如果您在一次迭代中有非常多的项目，那么在后续迭代中数量会少得多，那么使用`Clear`成本可能会更高，因为您将在内存中保留一个具有不必要大容量的列表。

当然，在许多（大多数？）场景中，差异可以忽略不计。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-03-07T16:16:03.760

也许我在这里做了一些根本错误的事情，但是在使用 C# 开发 ASP.NET 应用程序时，我在使用 Clear() 与 new 时遇到了很大的不同。我正在创建一个带有图表的统计页面，其中包含数据系列。对于每个图表，我都有一个部分执行此操作：

```
chart = new ChartistChart() { Title = "My fancy chart" };
series = new List<ChartistMetaValue>();
*some code for getting the statistics*
chart.Series.Add(series);
chartistLineCharts.Add(chart); 
```

然后是另一个图表。

```
chart = new ChartistChart() { Title = "My second fancy chart" };
series = new List<ChartistMetaValue>();
*some code for getting the statistics*
chart.Series.Add(series);
chartistLineCharts.Add(chart); 
```

这适用于`series`重新分配`new`，但是当我这样做时

```
series.Clear(); 
```

相反，我实际上清除了里面的条目`chart.Series`，`chartistLineCharts`因此统计页面最终只检索最后一个图表的系列。我假设这里有一些链接，比如内存指针，这与最初讨论的问题不同，但这至少是选择`new`. `Clear()`也许有一种方法可以避免它。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-05-02T08:20:09.610

我为自己做了几次测试。结果（速度）是：

*   对于小列表 - 例如 3 个项目，创建新列表的速度更快，但差异不大
*   对于平均 10 个或更多项目，最好清除列表。对于价值类型要好得多（例如 3-4 倍），对于价值时间要好 20%。

但最终，最好对应用进行剖析，找出整个应用的瓶颈。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-05T16:25:57.090

如果您的对象是值类型，我会使用 Clear() 来减少*未来*的内存分配。否则，两种方法几乎相同。

# sql - 如何在没有多个 EXISTS 子句的情况下返回表中匹配的行？

> ID：10901022
> 
> 赞同：1
> 
> 时间：2012-06-05T16:21:33.567
> 
> 标签：sql, sql-server, tsql

我想从一个表中提取与**所有**指定值匹配的结果，其中指定值在另一个表中。我可以这样做：

```
SELECT * FROM Contacts 
WHERE 
EXISTS (SELECT 1 FROM dbo.ContactClassifications WHERE ContactID = Contacts.ID AND ClassificationID =  '8C62E5DE-00FC-4994-8127-000B02E10DA5')
AND EXISTS (SELECT 1 FROM dbo.ContactClassifications WHERE ContactID = Contacts.ID AND ClassificationID =  'D2E90AA0-AC93-4406-AF93-0020009A34BA')
AND EXISTS etc... 
```

然而，当我得到大约 40 个 EXISTS 子句时，这种情况就会失败。错误消息是“查询处理器用完内部资源，无法生成查询计划。这是一种罕见的事件，仅适用于极其复杂的查询或引用大量表或分区的查询。请简化查询。”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T16:34:07.680

这样做的要点是

*   `IN`从语句中选择具有任何 GUID 的所有联系人
*   使用 a`DISTINCT COUNT`在匹配的 GUID 上获取每个联系人 ID 的计数
*   使用`HAVING`仅保留与您在`IN`语句中输入的匹配 GUID 数量相等的联系人

**SQL 语句**

```
SELECT *
FROM   dbo.Contacts c
       INNER JOIN (
          SELECT c.ID
          FROM   dbo.Contacts c
                 INNER JOIN dbo.ContactClassifications cc ON c.ID = cc.ContactID
          WHERE  cc.ClassificationID IN ('..', '..', 38 other GUIDS)
          GROUP BY
                 c.ID
          HAVING COUNT(DISTINCT cc.ClassificationID) = 40
       ) cc ON cc.ID = c.ID 
```

[data.stackexchange](https://data.stackexchange.com/stackoverflow/query/71773/how-to-return-rows-matched-in-a-table-without-multiple-exists-clauses)上的测试脚本

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T16:29:43.860

一种解决方案是要求在没有匹配联系人的情况下不存在分类。这是双重否定：

```
select  *
from    contacts c
where   not exists
        (
        select  *
        from    ContactClassifications cc
        where   not exists
                (
                select  *
                from    ContactClassifications cc2
                where   cc2.ContactID = c.ID
                        and cc2.ClassificationID = cc.ClassificationID
                )
        ) 
```

这种类型的问题被称为[关系划分](http://www.simple-talk.com/sql/t-sql-programming/divided-we-stand-the-sql-of-relational-division/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T16:32:29.837

```
SELECT c.* 
FROM Contacts c
INNER JOIN 
 (cc.ContactID, COUNT(DISTINCT cc.ClassificationID) as num_class
  FROM ContactClassifications 
  WHERE  ClassificationID IN (....)
  GROUP BY cc.ContactID 
 ) b ON c.ID = b.ContactID
WHERE b.num_class = [number of distinct values - how many different values you put in "IN"] 
```

如果您运行 SQLServer 2005 及更高版本，您可以使用 执行几乎相同的操作`CROSS APPLY`，据说效率更高

# android - 为什么 Android 会忽略返回 true 的 OnPreferenceClickListener()？

> ID：10901023
> 
> 赞同：1
> 
> 时间：2012-06-05T16:21:39.637
> 
> 标签：android, preferenceactivity, preferencescreen

我在 xml 文件中定义了我的首选项，如下所示：

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
<PreferenceScreen
    android:title="@string/pref_screen"
    android:key="pref_screen_key">

    <CheckBoxPreference
        android:defaultValue="true"
        android:key="prefs1_key"
        android:title="@string/prefs1_str"
        android:summary="@string/prefs1_summary" />
        .... 
```

在 PreferenceActivity 中，我为“pref_screen_key”覆盖了 onPreferenceClick()：

```
 ...
     findPreference("pref_screen_key").setOnPreferenceClickListener(
     new OnPreferenceClickListener() {

     @Override
     public boolean onPreferenceClick(Preference preference) {
         if (flag) {
              // do some stuff
              return true; // According to Android doc it means, that click was handled
          } else
              return false;
     } 
```

因此，如果我的标志为真，我希望 Android 不会使用 CheckBoxPreference 打开视图，而只是执行我的东西（我在 onPreferenceClick() 中返回 true 以指示单击已处理并且不需要执行默认的 onPreferenceClick() 行为）。不幸的是，Android 总是以默认行为处理 onPreferenceClick() 并同时制作我的东西。

它是Android中的错误吗？有没有办法阻止 Android 在用户点击 PreferenceScreen 后显示 CheckBoxPreference？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:34:38.740

您可能会遇到问题，因为`flag`必须声明 final 才能在`OnPreferenceClickListener`. 尝试将其封装在一个类中并声明该类为final。

要更直接地回答您的问题，请记住，当您从 中返回 true 时`onPreferenceClick()`，您是在告诉系统“别担心，我处理了它”。因此，当您简单地返回 true 而不实际执行任何操作时，系统本身并没有忽略您，您只是告诉它在`Preference`单击时什么都不做。

您的代码类似于[本示例](http://www.java-guide.com/examples/er/android.preference.preference.onpreferenceclicklistener_9.html)的第 108-115 行。仔细看看，它可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-02T15:46:53.150

该错误位于[https://github.com/android/platform_frameworks_base/blob/android-5.1.1_r13/core/java/android/preference/Preference.java#L985](https://github.com/android/platform_frameworks_base/blob/android-5.1.1_r13/core/java/android/preference/Preference.java#L985)

在 Preference.performClick 中，它检查 isEnabled() 是否为 true，调用 onClick()，然后调用您的侦听器，如果返回 false，则返回 - 如果不是，则继续处理，并将点击传播到右侧树/屏幕/启动指定的活动.

错误是它在您的 onPreferenceClick 之前调用 onClick，因此无论您的 onPreferenceClick 返回什么，例如复选框总是被切换。

解决方法：不幸的是，您需要对所有首选项进行子类化并进行自己的侦听器调度，并且仅在允许的情况下调用 super.onClick()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-07T02:28:00.453

我相信您想使用 setOnPreferenceChangeListener 而不是 setOnPreferenceClickListener。根据[android 文档](https://developer.android.com/reference/android/preference/Preference.OnPreferenceChangeListener.html)：

> 这在 Preference 的状态即将更新和状态保持之前被调用。

返回：

> True 使用新值更新 Preference 的状态。

例子：

```
Preference pref = findPreference("pref_key");
pref.setOnPreferenceChangeListener(new OnPreferenceChangeListener() {
  @Override
  public boolean onPreferenceChange(Preference preference, Object newValue) {
    if (flag) {
      // do some stuff
      return false; // Pref change will be not be persisted.
    } else {
      return true;
    }
  }
}); 
```

# php - 使用 PHP 创建、插入、更新或删除 XML

> ID：10901030
> 
> 赞同：0
> 
> 时间：2012-06-05T16:22:10.227
> 
> 标签：php, javascript, xml, function

因此，在你们出色的程序员的一点帮助下完成了我的 uni 工作，并通过 Javascript 操作 XML 数据尽可能地通宵达旦。现在我的暑假结束了，我亲爱的老母亲让我为她的数学辅导服务创建一个基本网站，提供信息和价格等……我在想，因为她不需要太多我会去再次使用 XML，但这次不限于使用 PHP 创建新元素/节点、更新或删除。

我打算为她创建一个基本的预订系统，带有一个用于编辑条目等的小管理面板......由于信息并不需要太安全，因此使用 XML 似乎是可以的。

我的问题是有没有人知道任何干净的基本功能可以用于使用 PHP 的 XML？就功能而言，我的意思是创建/插入、编辑/更新、删除等...

任何帮助，甚至是一个有像样教程的网站都会很棒，因为我已经浏览了 youtube 并且没有任何像样或干净和简单的东西。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T16:26:14.747

好吧，您可以使用 DOM 方法从 XML 创建/编辑/删除节点。

[http://us2.php.net/manual/en/book.dom.php](http://us2.php.net/manual/en/book.dom.php)

只是好奇，你为什么要玩 XML，可能更容易的选择是像 SQLite [http://php.net/sqlite](http://php.net/sqlite)这样简单的数据库。

# postgresql - node.js 与 PostgreSQL 和 socket.io 错误：套接字不可写

> ID：10901032
> 
> 赞同：0
> 
> 时间：2012-06-05T16:22:13.687
> 
> 标签：postgresql, node.js, websocket, socket.io, node-postgres

我一直在玩 socket.io，它似乎运行良好。不过最近，我安装了 postgreSQL，以便在每次事件发生时向数据库插入行（并且事件每秒发生 2 或 3 次！）......这是一个片段：

```
pg.connect(conString, function(err, dbClient) {
  io.sockets.on("connection", function(client) {
    client.on("clientSendingPlayerData", function(playerData) {
      dbClient.query("insert into actions values (1)", function() {
        console.log("INSERTED ROW");
      });
    });
  });
}); 
```

我们得到错误：

```
net.js:391
    throw new Error('Socket is not writable');
          ^
Error: Socket is not writable
    at Socket._writeOut (net.js:391:11)
    at Socket.write (net.js:377:17)
    at [object Object].query (/homes/jjl310/node_modules/pg/lib/connection.js:109:15)
    at [object Object].submit (/homes/jjl310/node_modules/pg/lib/query.js:99:16)
    at [object Object]._pulseQueryQueue (/homes/jjl310/node_modules/pg/lib/client.js:166:24)
    at [object Object].query (/homes/jjl310/node_modules/pg/lib/client.js:193:8)
    at Socket.<anonymous> (/homes/jjl310/tradersgame/server.js:182:16)
    at Socket.$emit (events.js:64:17)
    at SocketNamespace.handlePacket (/homes/jjl310/node_modules/socket.io/lib/namespace.js:335:22)
    at Manager.onClientMessage (/homes/jjl310/node_modules/socket.io/lib/manager.js:469:38) 
```

关于导致问题的原因以及如何解决问题的任何想法？

我将以下库用于 postrgreSQL [https://github.com/brianc/node-postgres](https://github.com/brianc/node-postgres)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T16:42:29.973

`pg.connect()`从池中获取连接，`dbClient`是一个活动连接。长时间运行的连接可能会超时、出错或因不活动而被丢弃。你想进入`pg.connect()`回调`clientSendingPlayerData`。这样，数据库连接仅在需要时才从池中提取，并在完成后返回池中。

# c++ - 评估 C/C++ 内存泄漏时的虚拟内存和物理内存

> ID：10901034
> 
> 赞同：6
> 
> 时间：2012-06-05T16:22:24.267
> 
> 标签：c++, memory, memory-leaks, ram, virtual-memory

我有一个 C++ 应用程序，我试图消除内存泄漏，但我意识到我并不完全理解虚拟内存和物理内存之间的区别。

结果来自`top`（所以 16.8g = 虚拟，111m = 物理）：

`4406 um 20 0 16.8g 111m 4928 S 64.7 22.8 36:53.65 client`

我的进程拥有 500 个连接，每个用户一个，在这些数字上，这意味着每个用户大约有 30 MB 的虚拟开销。在不深入了解我的应用程序的细节的情况下，如果我不知道虚拟内存的实际含义，那么将所有向量、结构、线程、堆栈上的函数等加在一起听起来很现实的唯一方法是。顺便说一句，没有 -O 优化标志。

所以我的问题是：

*   C ++中的哪些操作会使虚拟内存膨胀这么多？
*   如果我的任务正在使用虚拟内存，这会不会有问题？
*   堆栈和堆函数变量、向量等 - 这些是否必然会增加物理内存的使用？
*   消除内存泄漏（通过`delete`或`free()`其他方式）是否必然会减少物理和虚拟内存的使用？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-05T16:37:10.370

*虚拟内存*是您的程序处理的内容。它由`malloc`, `new`, 等人返回的所有地址组成。每个进程都有自己的虚拟地址空间。理论上，虚拟地址的使用受限于程序的地址大小：32 位程序有 4GB 的地址空间；64 位程序的功能要多得多。实际上，进程可以分配的虚拟内存量小于这些限制。

*物理内存*是焊接到主板上或安装在内存插槽中的芯片。在任何给定时间使用的物理内存量都受限于计算机中的物理内存量。

虚拟内存子系统将程序使用的虚拟地址映射到 CPU 发送到 RAM 芯片的物理地址。在任何特定时刻，您分配的大部分虚拟地址都未映射；因此物理内存使用低于虚拟内存使用。如果访问的是已分配但未映射的虚拟地址，则操作系统会无形地分配物理内存并将其映射。当您不访问虚拟地址时，操作系统可能会取消映射物理内存。

依次回答您的问题：

> *   C ++中的哪些操作会使虚拟内存膨胀这么多？

`new`, `malloc`, 大数组的静态分配。通常任何需要程序内存的东西。

> *   如果我的任务正在使用虚拟内存，这会不会有问题？

这取决于您的程序的使用模式。如果您分配了从未接触过的大量内存轨道，并且如果您的程序是 64 位程序，那么您使用虚拟内存可能没问题。

此外，如果您的内存使用量无限制地增长，您最终将耗尽一些资源。

> *   堆栈和堆函数变量、向量等 - 这些是否必然会增加物理内存的使用？

不一定，但很有可能。触摸变量的行为确保，至少暂时，它（以及“靠近”它的所有内存）都在物理内存中。（顺便说一句：容器之类的`std::vector`可以分配在堆栈或堆上，但**包含**的对象是在堆上分配的。）

> *   消除内存泄漏（通过 delete 或 free() 等）是否必然会减少物理和虚拟内存的使用？

物理：可能。虚拟：是的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T16:50:50.740

虚拟内存是进程使用的地址空间。每个进程都有一个指针的 64 位（或 32 个，取决于架构）可寻址字节的完整视图，但并非每个字节都映射到真实的东西。操作系统管理将虚拟地址映射到实际物理内存页面的表——或者任何该地址的真正含义（无论它看起来是您的应用程序的内存）。例如，对于您的应用程序，一个地址可能指向某个函数，但实际上它还没有从磁盘加载，当您调用它时，它会产生一个页面错误中断，内核通过从可执行文件并将其映射到应用程序的地址空间，以便可以执行。

从 Linux 的角度来看（我相信大多数现代操作系统）：

*   分配内存会膨胀虚拟内存。实际上使用分配的内存会增加物理内存的使用。做得太多，它将被交换到磁盘，最终您的进程将被杀死。
*   `mmap`ing 文件只会增加虚拟内存的使用，这包括可执行文件的大小：它们越大，使用的虚拟内存就越多。
*   用完虚拟内存的唯一问题是您可能已经耗尽了它。这主要是 32 位系统上的问题，您只有 4gb（其中 1gb 是为内核保留的，因此应用程序数据只有 3gb）。
*   在堆栈上分配变量的函数调用可能会增加物理内存使用量，但您（通常）不会泄漏此内存。
*   分配的堆变量占用虚拟内存，但只有在你读/写它们时才会真正获得物理内存。
*   释放或删除变量并不一定会减少虚拟/物理内存消耗，它取决于分配器内部，但通常会。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-08T01:50:58.993

您可以设置以下环境变量来控制 malloc 的内部内存分配。设置后，它将回答所有四个问题。如果您想了解其他选项，请参考：

[http://man7.org/linux/man-pages/man3/mallopt.3.html](http://man7.org/linux/man-pages/man3/mallopt.3.html)

导出 MALLOC_MMAP_THRESHOLD_=8192

导出 MALLOC_ARENA_MAX=4

# .net - VS2012 .NET 4.0 Clickonce VSTO CryptographicException：无法为提供的签名算法创建 SignatureDescription

> ID：10901035
> 
> 赞同：6
> 
> 时间：2012-06-05T16:22:26.707
> 
> 标签：.net, visual-studio-2010, c#-4.0, clickonce, visual-studio-2012

我有一个 VS2010 .NET 4.0 VSTO Outlook Addin 项目，我希望迁移到 VS2012（但将其保留在 .NET 4.0 中）。它编译得很好，并且从 IDE 内部运行得很好，但是当我尝试运行已发布的 ClickOnce 安装程序时，出现以下异常：

> System.Deployment.Application.InvalidDeploymentException：从文件：//MyPath/MyAddIn.vsto 读取清单时出现异常：清单可能无效或无法打开文件。---> System.Deployment.Application.InvalidDeploymentException：清单 XML 签名无效。---> System.Security.Cryptography.CryptographicException：无法为提供的签名算法创建 SignatureDescription。

根据我的测试和在线研究（[here](https://stackoverflow.com/questions/15270164/clickonce-setup-instantly-stops-executing) and [there](http://blogs.msdn.com/b/smondal/archive/2012/08/24/signaturedescription-could-not-be-created-for-the-signature-algorithm-supplied.aspx)），似乎只要在我的机器上安装了 VS2012（无论我是从 VS2010 还是 VS2012 发布）都会强制 ClickOnce 安装程序在使用 .NET 4.0 时*要求SHA1 证书。**使用 VS2010（未*安装 VS2012）编译时，我现有的 SHA256 证书与 .NET 4.0 完美配合。

*   我无法将客户端升级到 .NET 4.5，因为这是一个 VSTO40 项目（在 XP/Office 2007 上运行）。
*   我无法在本地机器上卸载 VS2012/.NET 4.5，因为我还有其他需要它的项目。
*   我不能*轻易地将*我的证书从 SHA256 降级到 SHA1。

还有其他建议可以让我继续前进吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-12-20T20:45:00.293

我收到了完全相同的错误消息，并且正在使用 VS 2013、.NET 4.5，并使用 SHA256 正确签名所有内容。

最后，我发现安装了旧版本的 VSTO 2010 Runtime (10.0.40303)。一旦我们将其更新为[10.0.40820](http://www.microsoft.com/en-us/download/details.aspx?id=40790) ，一切正常。真的希望这对某人有所帮助，这几天让我非常疯狂，试图弄清楚发生了什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T22:09:10.430

我通过创建一个新证书来解决我的问题，该证书用于签署 ClickOnce 清单并使用 SHA1 算法生成它。你可以在这里看到对话：http: [//social.msdn.microsoft.com/Forums/en-US/winformssetup/thread/eba424ae-f7b7-4530-bb68-db3b9972a31e](http://social.msdn.microsoft.com/Forums/en-US/winformssetup/thread/eba424ae-f7b7-4530-bb68-db3b9972a31e)

**编辑 2014 年 8 月 5 日：**
Visual Studio 2013 Update 3 终于解决了这个问题。
[http://support.microsoft.com/kb/2933779](http://support.microsoft.com/kb/2933779)
来自*已修复问题 -> 常规*：

> 即使是面向 .NET Framework 4.0 或更早版本的应用程序，您也可以使用 SHA 256 代码签名证书。在此更新之前，当 SHA 256 代码签名证书用于使用 ClickOnce 或 Visual Studio Tools for Office 加载项发布的桌面应用程序时，客户端计算机上必须存在 .NET Framework 4.5。如果您过去使用过 SHA 256 代码签名证书，并且遇到过诸如“应用程序格式不正确”、“清单可能无效”、“清单 XML 签名无效”或***“SignatureDescription 可能不是为提供的签名算法创建的”，***此更新解决了重新发布和新发布的应用程序的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-21T09:51:55.407

与 Visual Studio 2012 RTM 相同。当我在干净的 Windows 7 终极机器上部署应用程序时，出现“无法为提供的签名算法创建签名描述”异常。在部署机器上安装 .Net Framework 4.5 后问题解决。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-02T11:54:11.703

编辑：我后来发现重新签名是使这项工作成功的唯一原因。忽略以下有关更改 .Net 版本的内容。

* * *

我在一个 VSTO 项目中遇到了这个问题，同时使用 Visual Studio 2015 发布，以 .Net 4.5 为目标，并在具有 .Net 4.5 的客户端计算机上运行。理论上我不应该看到错误，但我发现应用程序清单 (*.dll.manifest) 仍在指定 .Net 4.0。它会在登录后第一次运行时正常工作，但之后每次都会失败。

```
<dependency>
  <dependentAssembly dependencyType="preRequisite" allowDelayedBinding="true">
    <assemblyIdentity name="Microsoft.Windows.CommonLanguageRuntime" version="4.0.30319.0" />
  </dependentAssembly>
</dependency> 
```

据我所知，.Net 4.5 的版本是 4.0.30319.18020，所以我把它放了进去。

```
<dependency>
  <dependentAssembly dependencyType="preRequisite" allowDelayedBinding="true">
    <assemblyIdentity name="Microsoft.Windows.CommonLanguageRuntime" version="4.0.30319.18020" />
  </dependentAssembly>
</dependency> 
```

然后我不得不重新签署应用程序和部署清单 (*.vsto)。请参阅[在 ClickOnce 中签署和重新签署清单](http://Signing%20and%20re-signing%20manifests%20in%20ClickOnce)。这是我用来执行此操作的 PowerShell 脚本。它用完了`Application Files\<application>_<version>\`文件夹。

```
# get files only, no directories
$withDeploy = ls -Recurse | where Mode -eq "------" | where Name -Like "*.deploy"

if ($withDeploy.Length -gt 0)
{
    # rename .deploy files
    $withDeploy | %{ Rename-Item -Path $_.FullName -NewName $_.FullName.Replace(".deploy", "") }

    $certPath = "Z:\path\to\your\cert\file"
    $certFile = "$certPath\cert.p12"
    $certPass = "<your_password>"

    # re-sign the application manifest; should be <application>*.dll.manifest
    $manifestFile = ls | where Name -like "*.dll.manifest" | %{ return $_.Name }
    mage -Update $manifestFile -CertFile $certFile -Password $certPass

    # re-sign the deployment manifest; *.vsto
    $vstoFile = ls | where Name -like "*.vsto" | %{ return $_.FullName }
    #mage -Update $vstoFile -AppManifest $manifestFile -CertFile $certFile -Password $certPass

    $otherVstoFile = ls "..\..\" | where Name -like "*.vsto" | %{ return $_.FullName }
    mage -Update $otherVstoFile -AppManifest $manifestFile -CertFile $certFile -Password $certPass
    Copy-Item $otherVstoFile $vstoFile

    # put .deploy back
    $withDeploy | %{ Rename-Item -Path $_.FullName.Replace(".deploy", "") -NewName $_.FullName }
} 
```

理想情况下，最好对 Visual Studio 项目进行更改，这样我就不必每次发布时都这样做，但我看不到这样做的方法，任何解决方案都比没有解决方案好。我可能会将其添加为发布后的 MSBuild 操作或其他内容，但现在这可行。

# c# - 如何以正确的方式使用 Ninject 测试 .net 项目

> ID：10901042
> 
> 赞同：1
> 
> 时间：2012-06-05T16:23:01.537
> 
> 标签：c#, unit-testing, ninject

我们有一个业务层分离的项目。这就像解决方案中独立项目中的许多服务（类）。我们还使用 ninject 来管理依赖关系。业务层项目中的所有类都是内部的，它通过接口与“另一个世界”进行通信。如果要创建包含测试的新项目，那么它不会看到内部类（但是是的，我们可以做一个 hack 并在 AsseblyInfo 中将 Internal 声明为 Public）。

我真正需要知道的是需要测试什么：

1.  我们可以创建所有东西的测试环境，并且只通过生成的接口进行测试（没有«clear» DAL，我们使用的是 linq2sql，但它可能被模拟）这种方式看起来不错，因为我们对内部 BisLayer 结构和测试一无所知只有«合同»功能。但不好的一面是系统有很多选项、设置和绑定，而且似乎不可能或很难检查它的所有可能变体

2.  我们可以将测试放在同一个项目中或设置属性以使 internal 被视为 public，这样我们就可以测试内部类。它很好，因为我们可以测试几乎所有东西，但是很难控制绑定，因为 Ninject 这样做会很好，而且我们只会覆盖我们在具体测试中需要的绑定。此外，它还不清楚如何测试实现相同接口的类（并做类似的事情）。就像我们几乎没有 Cache 的实现，但每个实现都将数据保存在不同的地方（mssql、键值数据库、asp 缓存等），所以每个实现的测试实际上是相同的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T03:59:51.247

正如您所说，您需要访问这些课程才能进行测试。因此，仅使通过外部可访问的接口暴露于外部的内部。

仅针对暴露于外部的行为编写测试，如您所说的“另一个世界”。首先编写更通用的测试用例，然后根据需要详细介绍。由于这将是一个持续的过程以及实际功能的开发/更改，您将能够决定您实际需要多少细粒度的场景。

另请查看 Ninject Mocking Kernel 扩展[https://github.com/ninject/ninject.mockingkernel](https://github.com/ninject/ninject.mockingkernel)

# c# - 为什么我的图像显示得更大？

> ID：10901047
> 
> 赞同：0
> 
> 时间：2012-06-05T16:23:15.933
> 
> 标签：c#, wpf, image, imagesource

我正在尝试在初始屏幕上显示图像，并且它在显示时被拉伸。我要显示的图像是一个简单的 bmp 文件。任何想法为什么？

在 SplashWindow.xaml 中：

```
<Window ... SizeToContent="WidthAndHeight">
  <Grid>
    ...
    <Image Grid.Row="0" Source="{Binding SplashImage}"></Image>
  </Grid>
</Window> 
```

在 SplashViewModel.cs

```
public ImageSource SplashImage
{
  get
  {
    return ImageUtilities.GetImageSource(_splashImageFilenameString);
  }
} 
```

来自 ImageUtilities.cs

```
public static ImageSource GetImageSource(string imageFilename)
{
  BitmapFrame bitmapFrame = null;

  if(!string.IsNullOrEmpty(imageFilename))
  {
    if(File.Exists(imageFilename))
    {
      bitmapFrame = BitmapFrame.Create(new Uri(imageFilename));
    }
    else
    {
      Debug.Assert(false, "File " + imageFilename + " does not exist.");
    }
  }
  return bitmapFrame;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T16:48:57.067

在您的 XAML 中，将“Stretch”属性设置为“None”（我相信它默认为“Fill”）：

```
<Image Grid.Row="0" Source="{Binding SplashImage}" Stretch="None"></Image> 
```

如果您愿意，还可以显式设置 Width 和 Height 属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T18:02:26.273

通常你想要：

```
<Image Source="{Binding ImagePath}" Stretch="Uniform" /> 
```

此值将尽可能放大图像，同时仍完全适合您的父控件。它不会扭曲它，它会保持源的纵横比。如果你使用

```
Stretch="None" 
```

它将以其原始大小显示图像（或图像的适合大小，它将被剪辑），这并不总是您想要的。

无论如何，您有一些选择，但将 Stretch 设置为您想要的会影响图像拉伸与否的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T16:38:35.297

WPF 不以像素显示事物（至少不在表面上）。WPF 以与设备无关的单位显示事物，特别是 1/96 英寸。

图像文件的元数据中有 DPI/分辨率信息，它告诉计算机该图像有多大，以英寸为单位。如果您的图像文件已被编程为 8 英寸宽，那么无论图像有多少像素，这将等于 WPF 中的 768 个单位。

您可以使用 Photoshop 之类的图像编辑程序或等效程序来更改图像的 DPI，或者在 WPF 中显示图像时为其指定明确的宽度和高度。

# python - 我想继承 dict 并设置默认值

> ID：10901048
> 
> 赞同：3
> 
> 时间：2012-06-05T16:23:17.147
> 
> 标签：python, dictionary, subclass

我需要创建一个特殊的 dict 子类。在其中我想为一组键设置默认值。

我似乎无法找到正确的语法来做到这一点。

这是我一直在尝试的：

```
class NewDict(dict):
    Key1 = "stuff"
    Key2 = "Other stuff"
    NoList = []
    Nada = None 
```

然后我实例化一个像这样的对象：

```
PrefilledDict = NewDict() 
```

并尝试在那里使用一些东西：

```
print PrefilledDict['Key1'] 
```

但似乎我的字典不是字典。

我错过了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-05T16:26:04.797

你可以这样实现你想要的：

```
class NewDict(dict):

    def __init__(self):
        self['Key1'] = 'stuff'
        ...

PrefilledDict = NewDict()
print PrefilledDict['Key1'] 
```

使用您的代码，您正在创建 NewDict 类的属性，而不是字典中的键，这意味着您可以这样访问这些属性：

```
PrefilledDict = NewDict()
print PrefilledDict.Key1 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-05T16:54:29.403

不需要子类化：

```
def predefined_dict(**kwargs):
    d = {
        'key1': 'stuff',
        ...
    }
    d.update(kwargs)
    return d

new_dict = predefined_dict()
print new_dict['key1'] 
```

要不就：

```
defaults = {'a':1, 'b':2}
new_dict = defaults.copy()
print new_dict['a'] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-05T17:19:53.890

[@astynax 提供了一个很好的答案](https://stackoverflow.com/a/10901498/4279)，但如果你必须使用子类，你可以：

```
class defaultattrdict(dict):
    def __missing__(self, key):
        try: return getattr(self, key)
        except AttributeError:
            raise KeyError(key) #PEP409 from None 
```

然后：

```
class NewDict(defaultattrdict):
    Key1 = "stuff"
    Key2 = "Other stuff"
    NoList = []
    Nada = None

PrefilledDict = NewDict()
print(PrefilledDict['Key1']) # -> "stuff"
print(PrefilledDict.get('Key1')) #NOTE: None as defaultdict 
```

注意：您的代码不遵循 pep8 命名约定。

# python - 创建一组随机 JPG

> ID：10901049
> 
> 赞同：9
> 
> 时间：2012-06-05T16:23:18.403
> 
> 标签：python, jpeg

这是场景，我想创建一组随机的小 jpg - 大小介于 50 字节和 8k 之间 - 只要它们有效，jpeg 的实际视觉内容就无关紧要。我需要生成一千个左右，而且它们都必须是唯一的——即使它们只相差一个像素。我可以在那里写一个 jpeg 页眉/页脚和一些随机字节吗？我无法使用来自网络的现有照片或照片集。

第二个问题是程序每次运行的图像集都必须不同。

我更喜欢在 python 中执行此操作，因为包装脚本在 Python 中。

我一直在寻找从头开始生成 jpg 的 python 代码，但没有找到任何东西，所以指向库的指针也一样好。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-05T16:26:04.920

如果图像只能是随机噪声，那么您可以`numpy.random`使用 PIL 生成一个数组并保存它们`Image.save`。

这个例子可能会被扩展，包括避免（非常不可能）重复模式的方法：

```
import numpy
from PIL import Image

for n in range(10):
    a = numpy.random.rand(30,30,3) * 255
    im_out = Image.fromarray(a.astype('uint8')).convert('RGB')
    im_out.save('out%000d.jpg' % n) 
```

必须满足这些条件才能获得 jpeg 图像：

1.  阵列需要整形（m,n,3）——三种颜色，RG和B；
2.  每个元素（每个像素的每种颜色）必须是字节整数（uint，或 8 位的无符号整数），范围从 0 到 255。

此外，除了纯随机性之外，还可以使用其他方式来生成图像，以防您不想要纯噪声。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-12-12T12:41:21.597

如果您不关心文件的内容，您可以通过`PIL.Image.new`以下方式使用 Pillow ( [0]) 创建有效的 JPEG：

```
from PIL import Image

width = height = 128
valid_solid_color_jpeg = Image.new(mode='RGB', size=(width, height), color='red')
valid_solid_color_jpeg.save('red_image.jpg') 
```

[0] [https://pillow.readthedocs.io/en/latest/reference/Image.html#PIL.Image.new](https://pillow.readthedocs.io/en/latest/reference/Image.html#PIL.Image.new)

**// 编辑：**我认为 OP 想要生成有效的图像并且不关心它们的内容（这就是我建议纯色图像的原因）。这是一个生成具有随机像素的有效图像并作为奖励将随机字符串写入生成的图像的函数。唯一的依赖是 Pillow，其他的都是纯 Python。

```
import random
import uuid

from PIL import Image, ImageDraw    

def generate_random_image(width=128, height=128):
    rand_pixels = [random.randint(0, 255) for _ in range(width * height * 3)]
    rand_pixels_as_bytes = bytes(rand_pixels)
    text_and_filename = str(uuid.uuid4())

    random_image = Image.frombytes('RGB', (width, height), rand_pixels_as_bytes)

    draw_image = ImageDraw.Draw(random_image)
    draw_image.text(xy=(0, 0), text=text_and_filename, fill=(255, 255, 255))
    random_image.save("{file_name}.jpg".format(file_name=text_and_filename))

# Generate 42 random images: 
for _ in range(42):
    generate_random_image() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-06T17:51:02.207

如果您正在寻找一种没有 numpy 的方法来做到这一点，这对我有用

（python 3.6 字节，你仍然需要枕头）

```
import random as r
from PIL import Image

dat = bytes([r.randint(1,3) for x in range(4500000)])
i = Image.frombytes('1', (200,200), dat) 
```

# java - Facebook 延长了用户授予的权限

> ID：10901050
> 
> 赞同：0
> 
> 时间：2012-06-05T16:23:27.523
> 
> 标签：java, javascript, facebook, facebook-graph-api

如何知道用户是否授予了应用程序请求的扩展权限。我在后端使用 java，登录和 facebook 注册由 socialauth api 处理。我想将提要发布到用户的时间线。Javascript 无法访问 url，因为它没有用于 facebook 通信的访问令牌。这件事可以在不使用任何客户端 facebook java api 的情况下完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T17:25:48.523

从 Graph API获取[/me/permissions](https://developers.facebook.com/tools/explorer?method=GET&path=me/permissions)，随心所欲。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-11T10:29:21.717

在 SignInAdapter 的实现中，使用注入到 signIn(...) 方法中的 Connection 对象来生成 facebook 对象，然后可以使用 userOperations 对象来获取相关权限。以下代码示例可以提供帮助：

```
 Facebook facebook = (Facebook) connection.getApi();
    facebook.userOperations().getUserPermissions().stream().forEach(x -> log.info("Permission {}: {}", x.getName(), x.getStatus())); 
```

我知道这个问题很老，但这个答案可能会帮助任何人开始。这是基于您使用 spring-social-facebook 的假设来完成的。

# c# - 使用方法范围内但在委托范围外的变量在方法中进行委托

> ID：10901051
> 
> 赞同：3
> 
> 时间：2012-06-05T16:23:35.840
> 
> 标签：c#, delegates, thread-safety

我编写了一些示例代码，其中我在方法主体中声明了一个 Action 委托，其中传递了两个参数，然后由委托代码使用，而这些参数没有传递到 delagte。对我来说，将这些参数也明确地传递给代表似乎更干净，但在这种情况下我不是，这段代码可以正常工作。

我想知道.NET 如何使这些引用在现在在新线程上运行的导出委托中保持可用。

```
    public void MyMethod（字符串名称，ComplexObject myObj）
    {

    动作导出 = () => {
       //用名字做一些事情
       姓名=姓名+姓名；
       //对复杂的引用对象做一些事情
        myObj.SomeMethod(name);
    };

    // 做更多的工作
    // 示例在新线程上启动导出
    System.Threading.Thread newThread = new System.Threading.Thread(new System.Threading.ThreadStart(export));
    newThread.Start();
    }

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T16:26:16.233

编译器创建一个特殊类型来保存这些变量。然后，每次调用该方法时，它都会实例化该类型的实例，而不是将这些变量存储在堆栈中。然后，匿名委托使用对该新实例的引用来访问这些变量。

# ajax - 通过 TCP 在 2 个浏览器客户端之间即时传输文件

> ID：10901057
> 
> 赞同：0
> 
> 时间：2012-06-05T16:23:46.573
> 
> 标签：ajax, browser, tcp, p2p, upnp

是否可以创建一个使这种情况成为可能的网站：

用户 A 登录该网站，上传一个与用户 B 建立直接 TCP 连接的文件，该文件在同一站点内，同时下载该文件。无需通过服务器传递文件。

如何让用户B通过浏览器收听？

这会违反“同源政策”吗？

重点是使用浏览器，而不是像 P2P 客户端这样的其他软件。

这个疯狂的想法可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:27:14.707

当然，它被称为P2P。你甚至不需要 Ajax。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T15:41:01.623

我怀疑 webRTC 是否完全满足您的需求。

你有两个问题：

*   B、如果从 Web 浏览器运行，则无法打开端口来接收入站连接
*   即使 B 能够做到这一点，您也可能不得不面对 NAT 穿越问题。

解决方案是使用/实现中继服务器：

1.  A 打开到中继服务器的出站 HTTP/Websocket 连接
2.  B 打开到中继服务器的出站 HTTP/Websocket 连接
3.  A 在出站通道上向中继服务器发送数据（例如 HTTP POST）
4.  B 在响应中从中继服务器读取数据（例如到 HTTP GET）

说起来容易做起来难......（是的，它是高级 P2P 网络的一个功能，如 JXTA、XMPP、Skype......，是的，不幸的是你需要一个中间服务器）

检查[ICE](https://www.rfc-editor.org/rfc/rfc5245)以获取“如何进行 NAT 遍历”的规范

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T17:31:02.797

我在看的是：WebRTC。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-01T01:06:22.230

其他人提到了 WebRTC，但这里是一个活生生的例子：

[http://sharefest.me](http://sharefest.me)

# bash - 如何在大量远程服务器上运行快速脚本？

> ID：10901061
> 
> 赞同：2
> 
> 时间：2012-06-05T16:24:04.690
> 
> 标签：bash, shell, ssh, cloud

我需要在十几台服务器上重新启动 apache。我可以登录每一个并执行它，或者我可以在第一个脚本上为我执行一个脚本。你能帮我吗？

`Server 1`可以通过已知主机访问所有其他服务器。

手动我可以运行它：

```
ssh user@server2
service httpd restart
exit

...

ssh user@server100
service httpd restart
exit 
```

如何编写脚本以从服务器 1 运行以重新启动我的所有服务器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T16:26:40.297

```
for I in $(seq 2 100) ; 
do 
   ssh user@server$I 'service httpd restart' ;
done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T16:26:17.057

```
for server in user@server2 user@server3; do
    ssh $server service httpd restart
done 
```

如果您想生成主机名，请查看`seq`实用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T03:54:52.963

`pdsh -R exec server[2-100] service httpd restart`

# facebook - 如何翻译打开的图形对象

> ID：10901063
> 
> 赞同：1
> 
> 时间：2012-06-05T16:24:08.177
> 
> 标签：facebook, api, facebook-opengraph

我对 facebook API 很陌生。我已经使用开放图来生成动作和对象。这些动作现在由 facebook 验证。但是，我有一个翻译问题：动作和对象必须是英文的。并且 facebook 文档说当元标记被设置为“语言环境”时，动作和对象会自动翻译，这已经完成了。但是我的网站是法语的，对象的动作仍然以英语显示。有没有人可以hep？

（参考文档：https://developers.facebook.com/docs/opengraph/internationalization/，http: [//developers.facebook.com/blog/post/605/](http://developers.facebook.com/blog/post/605/)）

贝斯特,纽本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T17:28:23.690

如果您已经在参考文档 - 为什么不也*阅读*它？

博客文章说明了翻译您的应用程序的工作原理，并且[https://developers.facebook.com/docs/internationalization/](https://developers.facebook.com/docs/internationalization/)对其进行了更详细的描述。

# macos - 在 Mac 的 wxPython 中获取顶部的窗口

> ID：10901067
> 
> 赞同：3
> 
> 时间：2012-06-05T16:24:31.843
> 
> 标签：macos, wxpython, wxwidgets

我有一个位于托盘中的应用程序，当您单击托盘菜单中的某个菜单项时，我试图让它显示/隐藏。代码几乎可以工作，但窗口显示在其他窗口后面，而不是像它应该的那样在顶部。（注意，我不希望它总是在顶部，只是弹出到窗口堆栈的顶部。）

它似乎在 Windows 上工作得很好，但在 Mac 上，它始终低于同时拉到它前面的任何其他窗口。

相关代码如下。

```
def on_hide_frame(self, event):
    self.frame.on_iconify(event)

def on_restore_frame(self, event):
    if self.frame.IsIconized():
        self.frame.Iconize(False)
    if not self.frame.IsShown():
        self.frame.Show(True)
    self.frame.Raise() 
```

另请注意，当调用 this 时，`self.frame`它是同一个对象，`app.GetTopWindow()`并且将两者互换并不能修复错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T21:43:05.153

原因似乎是该应用程序是后台应用程序，因此需要一个激活事件。这可能不是最好的方法，但使用 Applescript 向自己发送激活事件相当容易：

```
subprocess.Popen(['osascript', '-e', '''\
    tell application "System Events"
      set procName to name of first process whose unix id is %s
    end tell
    tell application procName to activate
''' % os.getpid()]) 
```

# c++ - msvc2008 重载全局新运算符问题

> ID：10901070
> 
> 赞同：0
> 
> 时间：2012-06-05T16:24:39.753
> 
> 标签：c++, visual-c++, memory-management, new-operator

我在自己的图书馆工作，我有自己的分配器。我已经声明了一个这样的通用接口：

```
class MyAllocator
{
public:
  void * allocate(size_t size);
  void * allocate(size_t size, size_t align);
  void   deallocate(void *);

  //...

}; 
```

现在，如果我想用这样的分配器分配 C++ 对象，我*必须*以这种方式使用放置 new：

```
MyAllocator a;
MyObject * o = new(a.allocate(sizeof(MyObject))) MyObject(param1, param2, ...); 
```

当然，这很好用。现在，前段时间我想做一个全局分配器，它将分配器作为参数，以避免重复的 sizeof()。所以我来了：

```
template< typename AllocatorT >
inline
void *operator new(size_t n_bytes, AllocatorT & allocator)
{
    return allocator.allocate(n_bytes);
} 
```

有了这个，我可以打电话：

```
MyAllocator my_alloc;
MyObject * o = new(my_alloc) MyObject(param1, param2); 
```

语法很干净，很酷。这基本上也可以很好地工作（使用 gcc 和 msvc2010），但是今天，当我在 msvc2008 中尝试它时，我遇到了错误：这是因为 msvc2008 编译器被该模板参数愚弄了，所以，当我包含一个使用的标头时正常放置 new [几乎每个 stl 标头都包含对放置 new 的调用，例如 vector、set 等] 编译器将使用我的全局 new 模板版本，而不是放置 new，从而导致明显错误：a type 'void *' 不是类/结构，当然也没有 allocate() 成员函数。

现在，问题出现了：

*   这是msvc2008的bug吗？使用 gcc 4.4.0、4.4.5 和 msvc2010 运行良好。
*   我在编写一个接受分配器引用的模板化全局 new 运算符时错了吗？我的意思是，这东西会不会是一种模棱两可的语法，很容易让编译器愚弄，经常导致错误，我应该放弃这个想法，或者这可以通过其他方式实现吗？如前所述，它通过使用常规放置 new 的自定义分配器大大降低了 C++ 对象分配的复杂性。
*   通常，如果我们有：

    无效f（无效*）；//1 模板< typename A >f(A &); //2

我们称：

```
void * void_ptr = something();
f(void_ptr); 
```

当然这里第一个版本被调用。

为什么在 msvc2008 中使用 operator new 的模板版本似乎不会发生这种情况？

# perl - 在perl中，如何遍历文件，解析行然后比较行的所有值？

> ID：10901074
> 
> 赞同：-3
> 
> 时间：2012-06-05T16:25:08.100
> 
> 标签：perl, parsing

我对 perl 非常陌生，并试图弄清楚如何解析制表符分隔文件中的行并将解析行中的值与某个值进行比较，然后打印该行。

例如：我想打印所有数字大于 3 的所有行。

> 2.4 6.9 3.1
> 
> B 10.2 3.4 7.6
> 
> C 1.9 2.6 2.3

我会输出

> B 10.2 3.4 7.6

因为 B 是唯一所有数字都大于 3 的行

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T16:42:33.723

*   使用 Text::CSV CPAN 模块将制表符分隔的文件解析为数组数组

*   循环遍历所有记录。对于每条记录

    *   检查字段 1、2 和 3 是否大于您的阈值。对于只有 3 个字段，使用简单的“if”，对于大量字段，使用`grep`

    *   如果所有字段都较大，则将记录打印到 STDOUT

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T16:50:48.203

您可以使用`split`： http: [//perldoc.perl.org/functions/split.html](http://perldoc.perl.org/functions/split.html)

假设您已将文件中的一行读入`$inString`，您将使用：

```
($letter, $n1, $n2, $n3) = split('\t', $inString); 
```

（模式的 '\t' 是制表符。）

然后检查 $n1、$n2 和 $n3 是否都大于 3，如果是，则打印`$inString`。

这还假设您在每行上都有恒定数量的值（在您的示例中为三个）。如果情况并非总是如此，您可以将返回值 from`split`放入一个数组并检查除第一个之外的所有元素。

# objective-c - 设备上抛出异常，但模拟器中没有

> ID：10901075
> 
> 赞同：0
> 
> 时间：2012-06-05T16:25:11.113
> 
> 标签：objective-c, ios, xcode, debugging

当我运行我的应用程序时，我的行为非常奇怪。在模拟器中，应用程序运行良好。在设备上，抛出异常。我是iOS新手，所以我迷失了这个。我为所有异常设置了断点，并且我的输出只打印`lldb`。

另外，我不确定这是否相关，但是当昨天第一次发生这种情况时，我的设备崩溃并删除了我所有的应用程序。今天早上我不得不恢复。我尝试重新启动我的 Mac 和我的设备。

![在此处输入图像描述](../Images/c57aa2868a6a428e063e9ff6fb76ddfe.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:53:45.767

我没有意识到控制台中有一个“继续”按钮。单击时，它会打印我的错误。

![在此处输入图像描述](../Images/bb9d37756d830f2ffa47256c043ea784.png)

# macos - 从 NPAPI 插件调用 JavaScript，OS X 10.7？

> ID：10901080
> 
> 赞同：0
> 
> 时间：2012-06-05T16:25:21.563
> 
> 标签：macos, plugins, osx-lion, npapi

我正在为 OS X Lion 编写一个浏览器插件，该插件需要能够在页面上调用 JavaScript 函数。我知道如何做到这一点的唯一方法是使用 WebKit/npruntime 函数，例如`NPN_Invoke`. 不幸的是，这些功能不适用于像 Lion 这样的 64 位环境。有没有从插件调用 JavaScript 的替代方法？谢谢。

# hibernate - @Version 在休眠中，在集群环境中运行时不起作用...（乐观锁）

> ID：10901082
> 
> 赞同：2
> 
> 时间：2012-06-05T16:25:25.120
> 
> 标签：hibernate, concurrency, version, cluster-computing, optimistic-locking

我有一个在它的一个字段上使用@version 的实体，我想实现如果两个事务同时修改这个实体，一个会失败（并获得乐观锁异常），另一个会成功。

当我在单个 JVM 上运行此测试时，这工作正常，但是当我在集群环境中运行时，两个事务成功并且没有抛出乐观锁。

```
public class DeploymentLock  {

    @Column(name = "DEPLOYMENT_COUNTER")
    private Long deploymentCounter;

    @Version
    @Column(name = "ENTITY_VERSION")
    private Long version;
    ...
} 
```

我错过了什么吗？我需要在@Version 下使用“@Generated(GenerationTime.ALWAYS)”吗？

顺便说一句，我在我的应用程序中使用 Spring 和 hibrnate ......知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:40:39.407

如果您有两个*不同*`DeploymentLock`休眠会话内部的两个实例（通常在两个不同的 JVM 或两个不同的主机上），每个实例具有相同的值，那么您调用的第二个更新应该 throw 。*`version``HibernateOptimisticLockingFailureException`*

 *基本上hibernate正在做类似的事情：

```
UPDATE DeploymentLock SET deploymentCounter = ..., version = 2 WHERE version = 1 
```

然后，如果更新没有更改行，则会引发异常。

您确定两个不同的 JVM（或两个会话）具有相同`version`值的相同实例吗？是不是有一个`refresh()`你没想到的地方，或者竞争条件导致第二个实例查询返回更新的`DeploymentLock`？

也许添加一些日志记录或`println`调试以在更新之前打印版本值。如果确实显示版本相同，那么您可以编辑您的帖子以显示您如何进行更新调用吗？*

# perl - 如何对 Perl 哈希值进行排序并相应地对键进行排序（可能在两个数组中）？

> ID：10901084
> 
> 赞同：28
> 
> 时间：2012-06-05T16:25:31.897
> 
> 标签：perl, sorting, hash, perl-hash

在 Perl 中，我想按值对哈希的键进行数字排序：

```
{
  five => 5
  ten => 10
  one => 1
  four => 4
} 
```

产生两个数组：

```
(1,4,5,10) and (one, four, five, ten) 
```

然后我想规范化值数组，使数字是连续的：

```
(1,2,3,4) 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-06-05T16:29:54.387

首先按关联的值对键进行排序。然后获取值（例如通过使用散列片）。

```
my @keys = sort { $h{$a} <=> $h{$b} } keys(%h);
my @vals = @h{@keys}; 
```

或者，如果您有哈希引用。

```
my @keys = sort { $h->{$a} <=> $h->{$b} } keys(%$h);
my @vals = @{$h}{@keys}; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-15T00:10:32.050

**如何对哈希进行排序（可选按值而不是键）？**

要对哈希进行排序，请从键开始。在此示例中，我们将键列表提供给排序函数，然后按 ASCII 顺序比较它们（这可能会受到您的语言环境设置的影响）。输出列表具有按 ASCII 顺序排列的键。一旦我们有了密钥，我们就可以通过它们来创建一个以 ASCII 顺序列出密钥的报告。

```
my @keys = sort { $a cmp $b } keys %hash;

foreach my $key ( @keys ) {
    printf "%-20s %6d\n", $key, $hash{$key};
} 
```

不过，我们可以在 sort() 块中获得更多花哨。我们可以用它们计算一个值并将该值用作比较，而不是比较键。

例如，为了使我们的报告顺序不区分大小写，我们在比较它们之前使用 lc 将键小写：

```
my @keys = sort { lc $a cmp lc $b } keys %hash; 
```

注意：如果计算量很大或哈希有很多元素，您可能需要查看 Schwartzian 变换来缓存计算结果。

如果我们想按哈希值排序，我们使用哈希键来查找它。我们仍然得到一个键列表，但这次它们是按它们的值排序的。

```
my @keys = sort { $hash{$a} <=> $hash{$b} } keys %hash; 
```

从那里我们可以变得更复杂。如果哈希值相同，我们可以对哈希键进行二次排序。

```
my @keys = sort {
$hash{$a} <=> $hash{$b}
or
"\L$a" cmp "\L$b"
} keys %hash; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-05T16:47:45.437

请参阅 Perl FAQ 条目，标题为“[我如何对哈希进行排序（可选地按值而不是键）](http://perldoc.perl.org/perlfaq4.html#How-do-I-sort-a-hash-%28optionally-by-value-instead-of-key%29?) ”。

您还可以使用`perldoc -q`在您的计算机上本地搜索常见问题解答，如`perldoc -q sort`，这就是我找到您的答案的方式。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-05T16:37:48.810

```
my ( @nums, @words );
do { push @nums,  shift @$_; 
     push @words, shift @$_; 
   }
    foreach sort { $a->[0] <=> $b->[0] } 
            map  { [ $h->{ $_ }, $_ ] } keys %$h
   ; 
```

# python - 范围值到伪彩色

> ID：10901085
> 
> 赞同：13
> 
> 时间：2012-06-05T16:25:47.853
> 
> 标签：python, colors, floating-point, gradient

我有一组浮点数（在 Python 中），范围可能从 0 到 100。我想创建一个伪彩色图像，以便颜色从绿色（对应于 0）到红色（100）不等。这类似于 matplotlib 中的 pcolor。但是，我不想使用 pcolor。

是否有类似的函数`pseudocolorForValue(val,(minval,maxval))`返回对应于伪颜色值的 RGB 三元组`val`？此外，此功能是否可以灵活选择是从绿色到红色还是从红色到绿色显示颜色？

谢谢，尼克

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-05T18:03:59.473

您可以编写自己的函数来转换值 0…100 → 0…120 度，然后将该值用作 HSV（或 HLS）色彩空间中颜色的 H（或角度）。然后可以将其转换为 RGB 颜色以用于显示目的。在此颜色空间中计算线性解释的颜色时，它们通常看起来更好：这是 HSV 颜色空间的样子：

[![hsv色彩空间图](../Images/3339e09a221f69ee07928cc0418e5291.png)](https://i.stack.imgur.com/FGeOk.png)

**更新：**

好消息，我惊喜地发现 Python 在其内置[`colorsys`](http://docs.python.org/library/colorsys.html)模块中有色彩空间转换例程（它们的真正意思是“包含电池”）。这样做的好处是，它使创建一个执行我所描述的功能的函数变得相当容易，如下图所示：

```
from colorsys import hsv_to_rgb

def pseudocolor(val, minval, maxval):
    """ Convert val in range minval..maxval to the range 0..120 degrees which
        correspond to the colors Red and Green in the HSV colorspace.
    """
    h = (float(val-minval) / (maxval-minval)) * 120

    # Convert hsv color (h,1,1) to its rgb equivalent.
    # Note: hsv_to_rgb() function expects h to be in the range 0..1 not 0..360
    r, g, b = hsv_to_rgb(h/360, 1., 1.)
    return r, g, b

if __name__ == '__main__':
    steps = 10

    print('val       R      G      B')
    for val in range(0, 100+steps, steps):
        print('{:3d} -> ({:.3f}, {:.3f}, {:.3f})'.format(
                                                val, *pseudocolor(val, 0, 100))) 
```

输出：

```
val       R      G      B
  0 -> (1.000, 0.000, 0.000)
 10 -> (1.000, 0.200, 0.000)
 20 -> (1.000, 0.400, 0.000)
 30 -> (1.000, 0.600, 0.000)
 40 -> (1.000, 0.800, 0.000)
 50 -> (1.000, 1.000, 0.000)
 60 -> (0.800, 1.000, 0.000)
 70 -> (0.600, 1.000, 0.000)
 80 -> (0.400, 1.000, 0.000)
 90 -> (0.200, 1.000, 0.000)
100 -> (0.000, 1.000, 0.000) 
```

这是一个显示其输出的示例：

![在 HSV 颜色空间中显示颜色插值的示例](../Images/71ca997c77cd8325b4e86e71c1a4d9a0.png)

我认为您可能会发现生成的颜色比我的其他答案更好。

**概括：**

可以将此函数修改为更通用一点，因为它可以使用除当前硬编码到其中的红色和绿色之外的颜色。

以下是如何做到这一点：

```
def pseudocolor(val, minval, maxval, start_hue, stop_hue):
    """ Convert val in range minval..maxval to the range start_hue..stop_hue
        degrees in the HSV colorspace.
    """
    h = (float(val-minval) / (maxval-minval)) * (stop_hue-start_hue) + start_hue

    # Convert hsv color (h,1,1) to its rgb equivalent.
    # Note: hsv_to_rgb() function expects h to be in the range 0..1 not 0..360
    r, g, b = hsv_to_rgb(h/360, 1., 1.)
    return r, g, b

if __name__ == '__main__':
    # angles of common colors in hsv colorspace
    RED, YELLOW, GREEN, CYAN, BLUE, MAGENTA = range(0, 360, 60)
    steps = 10

    print('val       R      G      B')
    for val in range(0, 100+steps, steps):
        print('{:3d} -> ({:.3f}, {:.3f}, {:.3f})'.format(
                val, *pseudocolor(val, 0, 100, YELLOW, BLUE))) 
```

结果：

[![显示黄色和蓝色之间 HSV 颜色空间中颜色插值的示例](../Images/81bfad84e0277b64e716b96a55c8eadb.png)](https://i.stack.imgur.com/t9JIy.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-06T03:36:51.080

虽然可以说不如在 HLS 或 HSV 颜色空间中插值 H 漂亮，但实现起来更简单的方法是编写一个函数，将单个值映射为三个分量，对应于 RGB 中`red (1,0,0)`完全绿色和完全绿色之间的线性插值颜色`(0,1,0)`色彩空间。

这就是我的意思：

```
def pseudocolor(val, minval, maxval):
    """ Convert value in the range minval...maxval to a color between red
        and green.
    """
    f = float(val-minval) / (maxval-minval)
    r, g, b = 1-f, f, 0.
    return r, g, b

if __name__ == '__main__':
    steps = 10
    print('val       R      G      B')
    for val in xrange(0, 100+steps, steps):
        print('{:3d} -> ({:.3f}, {:.3f}, {:.3f})'.format(
                    val, *pseudocolor(val, 0, 100))) 
```

输出：

```
val       R      G      B
  0 -> (1.000, 0.000, 0.000)
 10 -> (0.900, 0.100, 0.000)
 20 -> (0.800, 0.200, 0.000)
 30 -> (0.700, 0.300, 0.000)
 40 -> (0.600, 0.400, 0.000)
 50 -> (0.500, 0.500, 0.000)
 60 -> (0.400, 0.600, 0.000)
 70 -> (0.300, 0.700, 0.000)
 80 -> (0.200, 0.800, 0.000)
 90 -> (0.100, 0.900, 0.000)
100 -> (0.000, 1.000, 0.000) 
```

您可以根据需要将浮点 r,g,b 分量转换为 0..255 范围内的整数。

这是一个显示其输出的示例：

![显示 RGB 颜色空间中的插值的图像](../Images/ec7b905ee10f90fdc04a1fa75f142f65.png)

如果您想从绿色变为红色，只需反转函数中*r*和*g*的计算即可。无需太多额外的努力，您就可以概括该概念以允许在任何两种给定颜色之间进行线性插值。

这是如何做到的：

```
def pseudocolor(val, minval, maxval, startcolor, stopcolor):
    """ Convert value in the range minval...maxval to a color in the range
        startcolor to stopcolor. The colors passed and the the one returned are
        composed of a sequence of N component values.
    """
    f = float(val-minval) / (maxval-minval)
    return tuple(f*(b-a)+a for (a, b) in zip(startcolor, stopcolor))

if __name__ == '__main__':
    YELLOW, BLUE = (1, 1, 0), (0, 0, 1)
    steps = 10

    print('val       R      G      B')
    for val in range(0, 100+steps, steps):
        print('{:3d} -> ({:.3f}, {:.3f}, {:.3f})'.format(
                    val, *pseudocolor(val, 0, 100, YELLOW, BLUE))) 
```

使用提供的颜色的示例输出：

[![显示不同颜色的 RGB 颜色空间中插值的图像](../Images/6317a91a227a19657671b7a19e9a55b2.png)](https://i.stack.imgur.com/CVRhu.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-09-07T12:31:00.997

您可以直接访问[matplolib 的内置颜色映射](http://matplotlib.org/examples/color/colormaps_reference.html)，这正是 pcolor 用来确定其颜色映射的。每个映射在 [0, 1] 范围内接受一个浮点数，并返回一个在 [0, 1] 范围内的浮点数的 4 元素元组，其中包含组件 (R, G, B, A)。下面是一个使用标准`jet`颜色图返回 RGBA 元组的函数示例：

```
from matplotlib import cm

def pseudocolor(val, minval, maxmal):
    # Scale val to be in the range [0, 1]
    val = (val - minval) / (maxval - minval)
    # Return RGBA tuple from jet colormap
    return cm.jet(val)

pseudocolor(20, 0, 100)
# Returns: (0.0, 0.3, 1.0, 1.0)

pseudocolor(80, 0, 100)
# Returns: (1.0, 0.4074, 0.0, 1.0) 
```

这将映射到下图中显示的颜色范围。

[![在此处输入图像描述](../Images/5995cf890e8d51d24b5202feb53dec22.png)](https://i.stack.imgur.com/MDJt8.png)

此方法的一个方便特性是，您可以通过更改为、、等 轻松切换到任何一个[matplotlib 颜色图。](http://matplotlib.org/examples/color/colormaps_reference.html)`cm.jet``cm.rainbow``cm.nipy_spectral``cm.Accent`

# linux - 在 Coldfire 系统中通过 SPI 使用 SD 或 SDHC

> ID：10901089
> 
> 赞同：1
> 
> 时间：2012-06-05T16:26:02.397
> 
> 标签：linux, spi, sdhc

如果我使用[ColdFire](http://en.wikipedia.org/wiki/Freescale_ColdFire)和[SPI](http://en.wikipedia.org/wiki/Serial_Peripheral_Interface_Bus)，[SD 卡](http://en.wikipedia.org/wiki/Secure_Digital)是 SDHC 还是标准 SD 是否重要？

由于我可以编写 uClinux 内核和任何应用程序，我们可以说我是否可以使用 SDHC 取决于我的编程而不是硬件吗？它只是连接到微控制器的插座，对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T20:48:14.153

我可以使用 SDHC 以及普通 SD。我在冷火中使用了 spi 并正确写入了文件。

# php - 通过php调用存储过程奇怪的错误

> ID：10901095
> 
> 赞同：0
> 
> 时间：2012-06-05T16:26:12.797
> 
> 标签：php, mysql, stored-procedures

我一直在用 php 和 mysql 为网站编写注册页面（登录系统）。我正在使用两个存储过程。第一个存储过程检查电子邮件地址是否已存在于数据库中。第二个存储过程将用户提供的数据插入 mysql 数据库。用户对这两个程序都有 EXECUTE 权限。当从 php 脚本单独执行它们时，它们可以正常工作。但是当我在脚本中一起使用它们时，第二个存储过程（插入）不起作用。

**存储过程 1。**

```
DELIMITER $$
CREATE PROCEDURE reg_check_email(email VARCHAR(80))
BEGIN
SET @email = email;
SET @sql = 'SELECT email FROM user_account WHERE user_account.email=?';
PREPARE stmt FROM @sql;
EXECUTE stmt USING @email;
END$$
DELIMITER; 
```

**存储过程 2**

```
DELIMITER $$
CREATE PROCEDURE reg_insert_into_db(fname VARCHAR(40), lname VARCHAR(40), email      VARCHAR(80), pass VARBINARY(32), licenseno VARCHAR(80), mobileno VARCHAR(10))
BEGIN
SET @fname = fname, @lname = lname, @email = email, @pass = pass, @licenseno =    licenseno, @mobileno = mobileno;
SET @sql = 'INSERT INTO user_account(email,pass,last_name,license_no,phone_no)    VALUES(?,?,?,?,?)';
PREPARE stmt FROM @sql;
EXECUTE stmt USING @email,@pass,@lname,@licenseno,@mobileno;
END$$
DELIMITER; 
```

当我从 php 示例脚本插入测试这些时，插入不起作用，但第一个存储过程（reg_check_email（））正在工作。如果我注释掉第一个（reg_check_email），第二个存储过程（reg_insert_into_db）工作正常。

```
 <?php
 require("/wamp/mysql.inc.php");
 $r = mysqli_query($dbc,"CALL reg_check_email('ravi@gmail.com')");
 $rows = mysqli_num_rows($r);
 if($rows == 0) {
     $r = mysqli_query($dbc,"CALL   reg_insert_into_db('a','b','ravi@gmail.com','c','d','e')");
     }
 ?> 
```

我无法弄清楚错误。

在此先感谢，拉维。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T16:55:58.263

在使用 php 脚本执行存储过程和查询时，我遇到了类似的问题。

您应该尝试[使用 mysqli_multi_query](http://php.net/manual/en/mysqli.multi-query.php)来执行您的 SP。
调用程序后。使用**mysqli_free_result**来使用结果。
你也可以参考[这个链接](https://stackoverflow.com/questions/7691010/getting-error-commands-out-of-sync-you-cant-run-the-command-now-while-execut)。希望，它会帮助你。

# git - 试图推送到 BitBucket，但我得到“master conq：repository access denied”。《致命：远端意外挂断》

> ID：10901102
> 
> 赞同：19
> 
> 时间：2012-06-05T16:26:26.497
> 
> 标签：git, bitbucket

我这样做是为了推送我的 bitbucket 存储库的更改：

```
$: git push origin 
master conq: repository access denied. 
fatal: The remote end hung up unexpectedly 
```

这个错误是什么意思，我该如何解决？

bitbucket 的调试信息：`ssh -T -v git@bitbucket.org`

```
OpenSSH_5.3p1, OpenSSL 1.0.0-fips 29 Mar 2010
debug1: Reading configuration data /etc/ssh/ssh_config
debug1: Applying options for *
debug1: Connecting to bitbucket.org [131.103.20.167] port 22.
debug1: Connection established.
debug1: permanently_set_uid: 0/0
debug1: identity file /root/.ssh/identity type -1
debug1: identity file /root/.ssh/identity-cert type -1
debug1: identity file /root/.ssh/id_rsa type 1
debug1: identity file /root/.ssh/id_rsa-cert type -1
debug1: identity file /root/.ssh/id_dsa type -1
debug1: identity file /root/.ssh/id_dsa-cert type -1
debug1: Remote protocol version 2.0, remote software version OpenSSH_5.3
debug1: match: OpenSSH_5.3 pat OpenSSH*
debug1: Enabling compatibility mode for protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_5.3
debug1: SSH2_MSG_KEXINIT sent
debug1: SSH2_MSG_KEXINIT received
debug1: kex: server->client aes128-ctr hmac-md5 none
debug1: kex: client->server aes128-ctr hmac-md5 none
debug1: SSH2_MSG_KEX_DH_GEX_REQUEST(1024<1024<8192) sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP
debug1: SSH2_MSG_KEX_DH_GEX_INIT sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY
debug1: Host 'bitbucket.org' is known and matches the RSA host key.
debug1: Found key in /root/.ssh/known_hosts:5
debug1: ssh_rsa_verify: signature correct
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug1: SSH2_MSG_NEWKEYS received
debug1: SSH2_MSG_SERVICE_REQUEST sent
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug1: Authentications that can continue: publickey
debug1: Next authentication method: publickey
debug1: Trying private key: /root/.ssh/identity
debug1: Offering public key: /root/.ssh/id_rsa
debug1: Remote: Forced command: conq deploykey:435246
debug1: Remote: Port forwarding disabled.
debug1: Remote: X11 forwarding disabled.
debug1: Remote: Agent forwarding disabled.
debug1: Remote: Pty allocation disabled.
debug1: Server accepts key: pkalg ssh-rsa blen 277
debug1: read PEM private key done: type RSA
debug1: Remote: Forced command: conq deploykey:435246
debug1: Remote: Port forwarding disabled.
debug1: Remote: X11 forwarding disabled.
debug1: Remote: Agent forwarding disabled.
debug1: Remote: Pty allocation disabled.
debug1: Authentication succeeded (publickey).
debug1: channel 0: new [client-session]
debug1: Requesting no-more-sessions@openssh.com
debug1: Entering interactive session.
debug1: Sending environment.
debug1: Sending env LANG = en_US.UTF-8
authenticated via agent_smith.

You can use git or hg to connect to Bitbucket. Shell access is disabled.

This deploy key has read access to the following repositories:

myserver/scripts: root@myserver.stuff.com -- root@myserver.stuff.com
debug1: client_input_channel_req: channel 0 rtype exit-status reply 0
debug1: client_input_channel_req: channel 0 rtype eow@openssh.com reply 0
debug1: channel 0: free: client-session, nchannels 1
Transferred: sent 2440, received 3032 bytes, in 0.0 seconds
Bytes per second: sent 58903.0, received 73194.2
debug1: Exit status 0 
```

这是与上面经过身份验证的用户有关的一些问题`agent_smith`。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-05T16:52:43.297

在 ssh 访问方面（如类似于 的 ssh BitBucket 存储库地址`ssh://git@bitbucket.org/accountname/reponame.git`，请仔细检查：

*   帮助页面“[通过 bitbucket 使用 SSH 协议](https://confluence.atlassian.com/display/BITBUCKET/Use+the+SSH+protocol+with+Bitbucket)”和“[解决 bitbucket 的 SSH 问题](https://confluence.atlassian.com/display/BITBUCKET/Troubleshoot+SSH+Issues)”
*   您地址中使用的大小写（区分大小写）
*   您的 ssh 密钥的性质（是否受密码保护？然后您是否将其添加到 ssh-agent 中？）
*   您的 ssh 密钥的数量（如果您有多个密钥，则需要[在`~/.ssh/config`文件](https://confluence.atlassian.com/display/BITBUCKET/Set+up+SSH+for+Git#SetupSSHforGit-Step4Createaconfigfile)中声明它们，或者您可以按照[这个答案](https://stackoverflow.com/a/8186500/6309)）

注意：在 Windows 上，[默认情况下没有定义](https://stackoverflow.com/a/10122865/6309)[环境变量`HOME`](https://stackoverflow.com/a/10122865/6309)。确保它是。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-17T15:33:28.697

检查您是否具有对 repo 的写入权限。

* * *

*并来自[https://confluence.atlassian.com/display/BITBUCKET/Set+up+SSH+for+Git#SetupSSHforGit-Step4Createaconfigfile](https://confluence.atlassian.com/display/BITBUCKET/Set+up+SSH+for+Git#SetupSSHforGit-Step4Createaconfigfile)：*

> 步骤 4\. 创建 SSH 配置文件
> 
> ```
> Using your favorite text editor, edit an existing (or create a new)
> ~/.ssh/config file.
> 
> Add an entry to the configuration file using the following format:
> 
> Host bitbucket.org
>  IdentityFile ~/.ssh/privatekeyfile
> 
> The second line is indented. That indentation (a single space) is important, 
> so make sure you include it.  The second line is the
> location of your private key file.  If you are following along with
> these instructions, your file is here:
> 
>  ~/.ssh/id_rsa
> 
> When you are done editing, your configuration looks similar to the following:
> 
> Host bitbucket.org
>  IdentityFile ~/.ssh/id_rsa
> 
> Save and close the file.
> Restart the GitBash terminal. 
> ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-26T18:35:33.293

## **这个 git 错误：**

```
$: git pull
master conq: repository access denied. 
fatal: The remote end hung up unexpectedly 
```

## **补救措施：**

1.  清除 ~/.ssh 目录中的公共和私有 ssh 密钥
2.  创建新的 ssh 密钥。
3.  登录到您的存储库的 bitbucket。
4.  从 bitbucket 中删除旧的 ssh 密钥。
5.  将新的 ssh 密钥添加到 bitbucket。
6.  再试一次，然后 ssh 与正确的用户协商 bitbucket。

## **这是什么原因造成的？**

客户端计算机上的 ssh 用于与 bitbucket 协商的凭据已发生更改，导致 bitbucket 认为这是未经授权的用户。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-18T19:05:10.023

如果您使用的是 Mac OSX 或 Linux，那么对我有用的是确保 ssh-agent 已加载并使用我的密钥运行。

```
$ ps -e | grep [s]sh-agent
9060 ??     0:00.28 /usr/bin/ssh-agent -l 
```

检查代理是否正在运行。您应该会看到类似上述结果的内容。如果没有看到以上结果，可以输入

```
$ eval ssh-agent $SHELL 
```

手动启动 ssh-agent。接下来，您要检查密钥是否正在运行。类型

```
$ ssh-add -l
2048 68:ef:d6:1e:4b:3b:a3:52:6f:b0:c3:4b:da:e8:d1:9f /c/Documents and Settings/manthony/.ssh/personalid (RSA) 
```

你应该看到上面的结果。如果你不这样做，你可以输入

```
$ ssh-add ~/.ssh/workid 
```

`workid`您生成的私钥集的名称在哪里。

直接取自此链接：[为 GitBash、Mac OSX 和 Linux 配置多个 SSH 身份](https://confluence.atlassian.com/pages/viewpage.action?pageId=271943168)

# android - 使用 ADB 检查目录是否存在，如果存在则推送文件

> ID：10901103
> 
> 赞同：5
> 
> 时间：2012-06-05T16:26:27.037
> 
> 标签：android, batch-file, adb

我需要能够测试并查看 Android 设备的 SD 卡上是否存在目录，然后将一些文件推送到该目录（如果存在）。

到目前为止，我有这个：

```
adb %argument% shell if [ -e /sdcard/ ]; then echo "it does exist"; else echo "it does not exist"; fi; 
```

但是如何让我的批处理脚本知道该目录存在，以便它可以继续将文件推送到该目录？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T18:38:27.693

这是我在批处理脚本中所做的：

```
set cmd="adb shell ls | find /c "theFile" "
FOR /F %%K IN (' !cmd! ') DO SET TEST=%%K
if !TEST! GTR 0 (
    echo the file exists
) else (
    echo the file does not exist
) 
```

可能有多个文件适合文件名，所以我选择让它测试大于 0。

* * *

要在 Linux 中测试完全匹配并使用 bash（[参考](https://stackoverflow.com/a/13013379/427763)）：

```
FILENAME_RESULT=$(adb shell ls / | tr -d '\015'|grep '^fileName$')

if [ -z "$FILENAME_RESULT" ];
then
        echo "No fileName found."
else
        echo "fileName found."
fi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T16:33:05.290

我认为您应该列出目录`dir or ls`，然后使用 grep 进行分析。如果 grep 发现目录脚本做一些事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-06T04:55:28.517

1）只需使用 adb shell ls /filepath > fileifpresent

2）如果“没有这样的文件或目录”存在，则在本地grep，然后NO

```
 Else Directory Present 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-16T06:47:51.010

这是我将如何检查命令的退出状态的方法

```
MyFile="Random.txt"
WorkingPath="/data/local/tmp/RandomFolder"

IsDir=`adb shell ls $WorkingPath &> /dev/null ; echo "$?"`

if [ $IsDir == 0 ] ; then 

   echo "Exist! Copying File To Remote Folder"

   adb push $MyFile $WorkingPath

else

   echo "Folder Don't Exist! Creating Folder To Start Copying File"

   adb shell mkdir $WorkingPath

   adb push $MyFile $WorkingPath

fi 
```

# air - 我可以使用 Adob e AIR 创建 Windows 屏幕保护程序吗？

> ID：10901104
> 
> 赞同：2
> 
> 时间：2012-06-05T16:26:27.463
> 
> 标签：air, screensaver

使用 Adob​​e AIR 为 Windows 创建屏幕保护程序在技术上是否可行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T23:31:25.867

A work around is to host a .swf within a Windows form exe. I currently do this with C#/.Net 4.0\. First you need to configure the .exe to behave as a screensaver. When you are done, you need to rename your .exe to .scr. Within the windows form, you need to embed a Flash Active X Object, then set the windows form to borderless etc.

If needed, the .swf can communicate to the .scr via the fscommand call. I for example, listen for the mouseMove event, within the .swf, then tell the .scr to close via fscommand.

There is a free utility that converts .swf files to screensavers called InstantStorm, but I personally prefer the Windows form method, as it allows more control.

[Embedding the flash object](http://weblogs.asp.net/twalters/archive/2003/12/29/46265.aspx)

[Windows form to screensaver](http://www.harding.edu/fmccown/screensaver/screensaver.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-27T22:00:37.867

是的。

您可以做的是使用**-captive-runtime**或**-target 包**编译您的 AIR 项目（使其成为独立的 .exe 而不是 .air 文件）。

对于 Windows，只需将您的 .exe 重命名为 .scr，右键单击并选择安装或测试。

如果您想将其设置为配置和预览模式，您可以监听应用程序调用事件：

```
 //put this in your app main constructor
    NativeApplication.nativeApplication.addEventListener(InvokeEvent.INVOKE, invokEventHandler, false, 0, true);

    protected function invokEventHandler(e:InvokeEvent):void {
            //you don't actually have to loop as it will always be the first argument
            for each(var a:String in e.arguments) {
                //p - Show the screensaver in the screensaver selection dialog box
                if (a.indexOf("/p")) {
                    //do something different for preview mode
                    break;
                }
                //s - Show the screensaver full-screen
                if (a.indexOf("/s")) {
                    //the main full screen mode
                    break;
                }
                //c - Show the screensaver configuration dialog box
                if (a.indexOf("/c")) {
                    //show a configuration window
                    break;
                }
            }
    } 
```

# c# - Visual C# 程序“xyz”不包含适用于入口点的静态“主”方法

> ID：10901111
> 
> 赞同：-1
> 
> 时间：2012-06-05T16:26:42.170
> 
> 标签：c#, compiler-errors, visual-c#-express-2010

如果这个问题已经被问过，我很抱歉。另外，请多多包涵，因为我是 C# 新手，刚刚开始学习它。我正在尝试编写一个简单的程序（hello world）来学习，但是当我编译程序时出现错误。下面是我尝试构建解决方案后的屏幕截图。我将不胜感激这方面的任何帮助。![在此处输入图像描述](../Images/ab3d0f307533c7802954dd54c44719b4.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-05T16:27:48.010

`Main`，不是`main`。C# 区分大小写。

# iphone - IOS中的视频编辑库

> ID：10901112
> 
> 赞同：6
> 
> 时间：2012-06-05T16:26:55.060
> 
> 标签：iphone, ios, video-capture, video-processing, video-editing

我正在寻找IOS中的视频编辑库。

编辑任务： -> 在视频帧顶部添加文本或标记。

在我的应用程序中，用户应该能够从视频库中选择一个视频，并在电影播放器​​中播放该视频。用户可以暂停视频，然后使用徒手添加一些文本或标记。我们需要合并此视频中添加的文本和标记。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T16:52:52.090

AVFoundation 将做所有这些甚至更多。该应用程序的用户界面当然取决于您。但是使用这个强大的内置库，所有的视频操作都非常简单。

[在此处阅读有关 AVFoundation 的信息。](https://developer.apple.com/library/mac/#documentation/AudioVideo/Conceptual/AVFoundationPG/Articles/00_Introduction.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-29T09:49:34.900

您可以将 GPUImage 用于您的任务。对于设置图像和文本，请使用此代码..

```
contentView.backgroundColor = [UIColor clearColor];

UIImageView *ivTemp = [[UIImageView alloc] initWithFrame:CGRectMake(20, 20, 147, 59)];
//    UIImage *currentFilteredVideoFrame = [selectedFilter imageFromCurrentFramebuffer];
ivTemp.image = [UIImage imageNamed:@"minimumtrackimage"];
ivTemp.userInteractionEnabled = YES;
[contentView addSubview:ivTemp];

UILabel *lblDemo = [[UILabel alloc] initWithFrame:CGRectMake(0, 100, 200, 30)];
lblDemo.text = @"is this text on video?";
lblDemo.font = [UIFont systemFontOfSize:30];
lblDemo.textColor = [UIColor redColor];
lblDemo.tag = 1;
lblDemo.hidden = YES;
lblDemo.backgroundColor = [UIColor redColor];
[contentView addSubview:lblDemo];

GPUImageUIElement *uiElementInput = [[GPUImageUIElement alloc] initWithView:contentView];
[uiElementInput addTarget:selectedFilter];
__unsafe_unretained GPUImageUIElement *weakUIElementInput = uiElementInput;
[weakUIElementInput update]; 
```

然后写电影。

# php - PHP动态创建CSV：跳过CSV文件的第一行

> ID：10901113
> 
> 赞同：33
> 
> 时间：2012-06-05T16:26:56.213
> 
> 标签：php, html, csv, fgetcsv

我正在尝试导入 CSV 文件。由于我们使用的程序，第一行基本上是我想跳过的所有标题，因为我已经通过 HTML 放入了自己的标题。如何让代码跳过 CSV 的第一行？（strpos 命令是把所有行的第一个字段截掉。）

```
<?php
$row = 1;
if (($handle = fopen("ptt.csv", "r")) !== FALSE) {
while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
    $num = count($data);
           $row++;
    for ($c=0; $c < $num; $c++) {
    if(strpos($data[$c], 'Finished') !== false) {
    $c++;
echo "<TR> <TD nowrap>" . $data[$c] . "</ TD>"; }
    Else{
        echo "<TD nowrap>" .  $data[$c] . "</ TD>";
        }
    }
}
fclose($handle);
}
?> 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-10-08T08:21:55.430

Rather than using if condition for checking whether it is the first row, a better solution is to just add an extra line of code before the line from where the while loop starts as shown below :

```
....
.....
fgetcsv($handle);//Adding this line will skip the reading of th first line from the csv file and the reading process will begin from the second line onwards
while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
.......
....... 
```

It is just as simple......

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-06-05T16:32:37.457

由于您无论如何都在跟踪行号，因此您可以使用`continue`跳过第一行的其余循环。

例如，在你的 while 循环开始处添加这个（就在上面`$num = count($data)`）：

```
if($row == 1){ $row++; continue; } 
```

还有其他方法可以做到这一点，但只要确保当你继续时，`$row`它仍在递增，否则你会得到一个无限循环！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T16:30:53.083

把它放在你的while循环中：

`if ($row == 1) continue;`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-12-29T13:50:22.080

请使用以下代码行

```
$flag = true;
while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
if($flag) { $flag = false; continue; }
//your code for insert
} 
```

将 flag 变量设置为 true 并将其设置为 false 将跳过 CSV 文件的第一行。这很简单，也很容易实现。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-05T16:31:16.583

`while`在上面的循环体中添加`$row++;`：

```
if ($row == 1) {
    continue;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-04T08:16:49.123

```
$count = 0;
while (($fields = fgetcsv($handle, 0, ",")) !== FALSE) {
    $count++;
    if ($count == 1) { continue; } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-26T11:31:10.863

这对我有用：

```
$count = 0;

while(! feof($file))

      {

          $entry = fgetcsv($file, 0, ';');

          if ($count > 0) {
          //skip first line, header

          }

      $count++;
} 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-11-27T07:10:36.373

使用此代码

```
// mysql hostname
$hostname = 'localhost';
// mysql username
$username = 'root';
// mysql password
$password = '';

if (isset($_FILES['file']))
{   

// get the csv file and open it up
$file = $_FILES['file']['tmp_name'];
//$handle is a valid file pointer to a file successfully opened by fopen(), popen(), or fsockopen(). 
$handle = fopen($file, "r"); 
    try { 
    // Database Connection using PDO
    $dbh = new PDO("mysql:host=$hostname;dbname=clasdb", $username, $password);
    // prepare for insertion
    $STM = $dbh->prepare('INSERT INTO statstrackertemp (ServerName, HiMemUti, AvgMemUti, HiCpuUti, AvgCpuUti, HiIOPerSec, AvgIOPerSec, HiDiskUsage, AvgDsikUsage) VALUES (?, ?, ?, ?, ?,?, ?, ?, ? )');

        if ($handle !== FALSE) 
        {
            // fgets() Gets a line from file pointer and read the first line from $handle and ignore it.   
            fgets($handle);
            // created loop here
            while (($data = fgetcsv($handle, 1000, ',')) !== FALSE)
            {
            $STM->execute($data);
            }       

            fclose($handle);

        }

    } 
    catch(PDOException $e)
    {
    die($e->getMessage());
    }

echo 'Data imported'; 

}
else 
{
echo 'Could not import Data';
}

?> 
```

# r - 在ggplot2中截断密度图

> ID：10901117
> 
> 赞同：6
> 
> 时间：2012-06-05T16:27:12.503
> 
> 标签：r, ggplot2

我用

```
frame <- read.table(paste('data', fname, sep="/"), sep=",", header=TRUE)
colnames(frame) <- c("pos", "word.length")
plot <- ggplot(frame, aes(x=pos, y=word.length)) + xlim(0,20) + ylim(0,20) + geom_density2d() + stat_density2d(aes(color=..level..))
png(paste("graphs/", fname, ".png", sep=""), width=600, height=600)
print(plot)
dev.off() 
```

创造情节，但他们被切断了。我该如何解决？

[http://ompldr.org/vZTN0eQ](http://ompldr.org/vZTN0eQ)

我用来创建这个情节的数据： http: [//sprunge.us/gKiL](http://sprunge.us/gKiL)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T17:22:01.243

根据 ggplot2 书，您使用`scale_x_continuous(limits=c(1,20))`而不是`xlim(1,20)`。

# ios - Xcode 中的“框架矩形”与“布局矩形”

> ID：10901121
> 
> 赞同：13
> 
> 时间：2012-06-05T16:27:33.377
> 
> 标签：ios, interface-builder, xib

两者有什么区别？使用其中任何一个时，我都没有发现我的项目有任何区别，但让我感到困扰的是，我不知道它们的用途是什么。

请指教！

![在此处输入图像描述](../Images/28f8105a77906a854ae6ebb1c5236bee.png) ![在此处输入图像描述](../Images/91f2ba88bc7afcdfe02638b3a38f1d62.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-05T17:07:35.770

布局矩形是控件的明显视觉尺寸。它与实际框架不同，因为可能存在超出控件视觉上不同部分的阴影或插入效果。

[Interface builder的尺寸检查器中的框架和布局有什么区别？](https://stackoverflow.com/questions/914102/whats-the-difference-between-frame-and-layout-in-interface-builders-size-inspe)

# ruby - 插值正则表达式中 char 类的过早结束

> ID：10901122
> 
> 赞同：4
> 
> 时间：2012-06-05T16:27:37.450
> 
> 标签：ruby, regex

我似乎无法解决这个问题，希望有人可以帮助：

**Nilfacs**是从哈希中提取的字符串数组。

对于这一行：

```
looping_finaltext = finaltext.reject {|sentence| nilfacs.any? {|fac| sentence =~ /#{(fac)}/i}} 
```

我收到以下错误：`warning: character class has ']' without escape: /[[]]/` 和 `block (2 levels) in <main>': premature end of char-class: /[[]]/i (RegexpError)`

所有字符串都只是普通的单词（如“条件”），不包含需要转义的字符。

这是否表明某些未预料到的东西正在作为字符串输入到数组中？还是我在这一行的语法有问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-05T17:32:52.380

> *这是否表明某些未预料到的东西正在作为字符串输入到数组中？*

是的，就是这样。我希望您有嵌套数组，并且在那里的某个地方有一个空数组的数组`[[]]`，其 to_s 表示会产生您找到的结果。

当您在正则表达式文字中使用插值时，源中的字符将被视为正则表达式中的字符。正如`/b[/`不是一个有效的正则表达式，所以`foo="b["; bar=/#{foo}/`也是无效的。

```
nilfacs = [ "a[]", "b[", "c]", [[]] ]

nilfacs.each do |fac|
  begin
    p /#{fac}/
  rescue RegexpError=>e
    puts e
  end
end

#=> empty char-class: /a[]/
#=> premature end of char-class: /b[/
#=> /c]/
#=> warning: regular expression has ']' without escape: /[[]]/
#=> premature end of char-class: /[[]]/ 
```

如果要将字符串用作文字字符，则要使用[`Regexp.escape`](http://www.ruby-doc.org/core-1.9.3/Regexp.html#method-c-escape)：

```
nilfacs.each do |fac|
  p /#{Regexp.escape fac}/
end
#=> /a\[\]/
#=> /b\[/
#=> /c\]/ 
```

或者，您可能希望使用`Regexp.union`从数组中创建一个匹配其中所有文字字符串的单个正则表达式：

```
rejects = %w[dog cat]
re = Regexp.new(Regexp.union(rejects).source,'i') #=> /dog|cat/i
looping_finaltext = finaltext.reject{ |sentence| sentence=~re } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T17:29:04.567

> **Nilfacs**是从哈希中提取的字符串数组。

可能不会，`nilfacs`几乎可以肯定有一个空的 AoA 作为成员。试试这个`irb`，你会看到：

```
>> a = [[]]
>> /#{a}/
(irb):4: warning: character class has ']' without escape: /[[]]/
RegexpError: premature end of char-class: /[[]]/ 
```

要么，要么你有`'[[]]'`字符串`nilfacs`：

```
>> a = '[[]]'
>> /#{a}/
(irb):6: warning: character class has ']' without escape: /[[]]/
RegexpError: premature end of char-class: /[[]]/ 
```

一旦您将您的字符串固定`nilfacs`为您想要的字符串数组，您可以使用单个正则表达式而不是`any?`：

```
re = Regexp.new(Regexp.union(nilfacs).source, Regexp::IGNORECASE)
looping_finaltext = finaltext.reject { |sentence| sentence =~ re } 
```

正则表达式引擎可以一次检查所有模式，以避免在块`String#=~`内一遍又一遍地调用的开销。`any?`

# facebook - 是否可以在网站上使用丹麦字符进行 Facebook 登录和 API？

> ID：10901124
> 
> 赞同：1
> 
> 时间：2012-06-05T16:28:10.087
> 
> 标签：facebook, special-characters, url-encoding

据我所知，Facebook 不会接受我尝试使用包含丹麦本地字母的 URL。

（丹麦有 3 个本地字母，仅在丹麦使用）

facebook 是否允许 URL 带有这样的外来字符？

# asp.net - 由按钮触发的 Gridview 的 asp.net UpdateProgress

> ID：10901125
> 
> 赞同：0
> 
> 时间：2012-06-05T16:28:10.347
> 
> 标签：asp.net, button, gridview, updatepanel, updateprogress

我想在页面上显示一个 UpdateProgress，当单击 Button 并且加载 Gridiew 时。但是，我想在按钮旁边显示加载图像，而不是代替 Gridview。

单击该按钮时，它不会显示 UpdateProgress。我的代码中缺少什么？

```
<asp:ScriptManager ID="ScriptManager1" runat="server" />
     <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
     <ContentTemplate>
     <asp:Button ID="OKButton" runat="server" Text="OK" Width="48px" onclick="OKButton_Click" />
     </ContentTemplate>
          <Triggers>
               <asp:AsyncPostBackTrigger ControlID="OKButton" EventName="Click" />
          </Triggers>
     </asp:UpdatePanel>
     <asp:UpdateProgress id="UpdateProgress1" runat="server" DisplayAfter="0" AssociatedUpdatePanelID="UpdatePanel">
     <ProgressTemplate><img scr="../images/wait.gif" /></ProgressTemplate>
     </asp:UpdateProgress>
     <asp:UpdatePanel runat="server" id="UpdatePanel2" updatemode="Conditional">
          <Triggers>
               <asp:AsyncPostBackTrigger controlid="OKButton" eventname="Click" />
          </Triggers>
          <ContentTemplate>
               <asp:GridView ID="GridView1" runat="server".....>
               </asp:GridView>
          </ContentTemplate>
     </asp:UpdatePanel> 
```

感谢您的回复...我试图上传图片，但是，我无法这样做..只是想给出一个想法：

*   从日期***_*** ..................| 网格视图
*   迄今为止**__** ..................|
*   确定按钮图像............|

我知道它不是很好。但我希望它可以让我了解如何将按钮放在屏幕的左侧，将 GridView 放在屏幕的右侧。“图像”显示，我希望将 UpdateProgress 的图像放置在哪里，而 GridvView 正在加载其内容。

# php - 通过 PHP 在 PhantomJs 中打开多个 html 文件会引发语法错误

> ID：10901126
> 
> 赞同：1
> 
> 时间：2012-06-05T16:28:10.710
> 
> 标签：php, html, apache, syntax-error, phantomjs

我希望我的 php 脚本从命令行调用 phantomjs，这将从许多 html 文件中生成多个 pdf。所以我有一个连接字符串，其中包含指向我的 html 文件的路径，然后我调用`exec`命令：

```
$myFile1 = dirname(__FILE__)."/testFile0.html";
$myFile2 = dirname(__FILE__)."/testFile1.html";
$myFile3 = dirname(__FILE__)."/testFile2.html";

$files = array($myFile1, $myFile2, $myFile3);

$command = 'phantomjs '.dirname(__FILE__).'/render.js '.implode('|', $files);
exec($command, $phantomOut);

echo print_r($phantomOut); 
```

当我调用 'phantomjs render.js "file1.html|file2.html"' 时，一切正常。但是，当尝试从 php 脚本执行此操作时，我在 apache error_log 中收到以下错误：

```
testFile1.html: line 1: syntax error near unexpected token `<'  
testFile1.html: line 1: `<!DOCTYPE HTML... 
```

我使用的 HTML 文件看起来不错，所以我不知道是什么原因造成的。在浏览器中运行此脚本时的输出是 :`Array ( ) 1`而不是我在命令行中得到的文本。

下面是 PhantomJs 渲染脚本：

```
var page = require('webpage').create(),
    addresses = phantom.args[0],
    outputPath = '/path_to_pdf/',
    outputFilename,
    filesArray, outputArray = [],
    loadInProgress = false,
    pageIndex = 0, 
    interval;

page.viewportSize = { width: 600, height: 600};

if(addresses.indexOf('|') !== -1){
    filesArray = addresses.split('|');
} else{
    filesArray = [addresses];
}

interval = setInterval(function() {
    if (!loadInProgress && pageIndex < filesArray.length) {
        page.open(filesArray[pageIndex]);
    }
    if (pageIndex === filesArray.length) {
        console.log('OUTPUT: ', outputArray.join('|'));
        phantom.exit();
    }
}, 250);

page.onLoadStarted = function() {
    loadInProgress = true;
};

page.onLoadFinished = function() {
    loadInProgress = false;
    outputFilename = 'print'+pageIndex+'.pdf';
    page.render(outputPath+outputFilename);
    outputArray.push(outputFilename);
    pageIndex++;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T21:49:39.933

您是否尝试过将内爆后获得的那些文件的路径包装在引号内？尽管错误本身很奇怪，但它对我来说似乎是一个无效参数。

# java - Android restler 错误 (1001)

> ID：10901127
> 
> 赞同：0
> 
> 时间：2012-06-05T16:28:16.233
> 
> 标签：java, android, https, restlet, clientresource

我在 android 2.3.3 上使用 restlet 2.2，我需要与服务器建立 https 连接，但该服务器没有证书，因此我收到以下错误：

```
06-05 19:11:13.786: W/System.err(2923): Communication Error (1001) - Error while processing a connection
06-05 19:11:13.786: W/System.err(2923):     at org.restlet.resource.ClientResource.doError(ClientResource.java:611)
06-05 19:11:13.796: W/System.err(2923):     at org.restlet.engine.resource.ClientInvocationHandler.invoke(ClientInvocationHandler.java:269)
06-05 19:11:13.796: W/System.err(2923):     at $Proxy5.retrieve(Native Method)
06-05 19:11:13.796: W/System.err(2923):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
06-05 19:11:13.796: W/System.err(2923):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
06-05 19:11:13.796: W/System.err(2923):     at java.util.concurrent.FutureTask.run(FutureTask.java:138)
06-05 19:11:13.796: W/System.err(2923):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
06-05 19:11:13.796: W/System.err(2923):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
06-05 19:11:13.796: W/System.err(2923):     at java.lang.Thread.run(Thread.java:1019)
06-05 19:11:13.796: W/System.err(2923): Caused by: javax.net.ssl.SSLException: Error occured in delegated task:javax.net.ssl.SSLException: Not trusted server certificate
06-05 19:11:13.806: W/System.err(2923):     at org.apache.harmony.xnet.provider.jsse.HandshakeProtocol.fatalAlert(HandshakeProtocol.java:319)
06-05 19:11:13.806: W/System.err(2923):     at org.apache.harmony.xnet.provider.jsse.HandshakeProtocol.wrap(HandshakeProtocol.java:271)
06-05 19:11:13.806: W/System.err(2923):     at org.apache.harmony.xnet.provider.jsse.SSLEngineImpl.wrap(SSLEngineImpl.java:695)
06-05 19:11:13.806: W/System.err(2923):     at javax.net.ssl.SSLEngine.wrap(SSLEngine.java:464)
06-05 19:11:13.806: W/System.err(2923):     at org.restlet.ext.ssl.internal.WritableSslChannel.onFill(WritableSslChannel.java:113)
06-05 19:11:13.806: W/System.err(2923):     at org.restlet.engine.io.Buffer.process(Buffer.java:597)
06-05 19:11:13.816: W/System.err(2923):     at org.restlet.engine.io.WritableBufferedChannel.write(WritableBufferedChannel.java:122)
06-05 19:11:13.816: W/System.err(2923):     at org.restlet.ext.ssl.internal.WritableSslChannel.write(WritableSslChannel.java:126)
06-05 19:11:13.816: W/System.err(2923):     at org.restlet.engine.io.Buffer.drain(Buffer.java:337)
06-05 19:11:13.816: W/System.err(2923):     at org.restlet.engine.connector.OutboundWay.onDrain(OutboundWay.java:304)
06-05 19:11:13.816: W/System.err(2923):     at org.restlet.engine.io.Buffer.process(Buffer.java:553)
06-05 19:11:13.816: W/System.err(2923):     at org.restlet.engine.connector.Way.processIoBuffer(Way.java:477)
06-05 19:11:13.816: W/System.err(2923):     at org.restlet.engine.connector.OutboundWay.processIoBuffer(OutboundWay.java:412)
06-05 19:11:13.816: W/System.err(2923):     at org.restlet.engine.connector.Way.onSelected(Way.java:430)
06-05 19:11:13.816: W/System.err(2923):     at org.restlet.util.SelectionRegistration.onSelected(SelectionRegistration.java:295)
06-05 19:11:13.816: W/System.err(2923):     at org.restlet.engine.connector.Connection.onSelected(Connection.java:607)
06-05 19:11:13.816: W/System.err(2923):     at org.restlet.util.SelectionRegistration.onSelected(SelectionRegistration.java:295)
06-05 19:11:13.816: W/System.err(2923):     at org.restlet.engine.connector.ConnectionController.onSelected(ConnectionController.java:202)
06-05 19:11:13.826: W/System.err(2923):     at org.restlet.engine.connector.ConnectionController.selectKeys(ConnectionController.java:275)
06-05 19:11:13.826: W/System.err(2923):     at org.restlet.engine.connector.ConnectionController.doRun(ConnectionController.java:155)
06-05 19:11:13.826: W/System.err(2923):     at org.restlet.engine.connector.Controller.run(Controller.java:158)
06-05 19:11:13.826: W/System.err(2923):     at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:444)
06-05 19:11:13.826: W/System.err(2923):     ... 5 more
06-05 19:11:13.826: W/System.err(2923): Caused by: org.apache.harmony.xnet.provider.jsse.AlertException: javax.net.ssl.SSLException: Not trusted server certificate
06-05 19:11:13.826: W/System.err(2923):     at org.apache.harmony.xnet.provider.jsse.HandshakeProtocol.fatalAlert(HandshakeProtocol.java:319)
06-05 19:11:13.826: W/System.err(2923):     at org.apache.harmony.xnet.provider.jsse.ClientHandshakeImpl.verifyServerCert(ClientHandshakeImpl.java:600)
06-05 19:11:13.846: W/System.err(2923):     at org.apache.harmony.xnet.provider.jsse.ClientHandshakeImpl.processServerHelloDone(ClientHandshakeImpl.java:392)
06-05 19:11:13.846: W/System.err(2923):     at org.apache.harmony.xnet.provider.jsse.ClientHandshakeImpl$1.run(ClientHandshakeImpl.java:299)
06-05 19:11:13.846: W/System.err(2923):     at org.apache.harmony.xnet.provider.jsse.ClientHandshakeImpl$1.run(ClientHandshakeImpl.java:297)
06-05 19:11:13.846: W/System.err(2923):     at java.security.AccessController.doPrivileged(AccessController.java:182)
06-05 19:11:13.846: W/System.err(2923):     at org.apache.harmony.xnet.provider.jsse.DelegatedTask.run(DelegatedTask.java:52)
06-05 19:11:13.846: W/System.err(2923):     at org.restlet.ext.ssl.internal.SslConnection$1.run(SslConnection.java:389)
06-05 19:11:13.846: W/System.err(2923):     ... 3 more
06-05 19:11:13.856: W/System.err(2923): Caused by: javax.net.ssl.SSLException: Not trusted server certificate
06-05 19:11:13.856: W/System.err(2923):     ... 11 more
06-05 19:11:13.856: W/System.err(2923): Caused by: java.security.cert.CertificateException: java.security.cert.CertPathValidatorException: Trust anchor for certification path not found.
06-05 19:11:13.856: W/System.err(2923):     at org.apache.harmony.xnet.provider.jsse.TrustManagerImpl.checkServerTrusted(TrustManagerImpl.java:161)
06-05 19:11:13.866: W/System.err(2923):     at org.apache.harmony.xnet.provider.jsse.ClientHandshakeImpl.verifyServerCert(ClientHandshakeImpl.java:597)
06-05 19:11:13.866: W/System.err(2923):     ... 9 more
06-05 19:11:13.866: W/System.err(2923): Caused by: java.security.cert.CertPathValidatorException: Trust anchor for certification path not found.
06-05 19:11:13.866: W/System.err(2923):     at org.bouncycastle.jce.provider.PKIXCertPathValidatorSpi.engineValidate(PKIXCertPathValidatorSpi.java:146)
06-05 19:11:13.866: W/System.err(2923):     at java.security.cert.CertPathValidator.validate(CertPathValidator.java:197)
06-05 19:11:13.876: W/System.err(2923):     at org.apache.harmony.xnet.provider.jsse.TrustManagerImpl.checkServerTrusted(TrustManagerImpl.java:156)
06-05 19:11:13.876: W/System.err(2923):     ... 10 more 
```

# python - 一列中连续浮点数的差异

> ID：10901128
> 
> 赞同：0
> 
> 时间：2012-06-05T16:28:20.640
> 
> 标签：python

我在这样的列中的文件中有一个浮点数列表：

123.456

234.567

345.678

我如何生成一个输出文件，该文件是通过将一行中的值减去其上方的值而生成的。对于上面的输入文件，生成的输出应该是：

123.456-123.456

234.567-123.456

345.678-234.567

第一个值应该返回零，但其他值应该减去它上面的值。这不是一个家庭作业问题。这是我更大问题的一个小要求，我被困在这一点上。非常感谢帮助。谢谢 ！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T16:33:48.267

这将起作用：

```
diffs = [0] + [j - data[i] for i,j in enumerate(data[1:])] 
```

所以，假设`data.txt`包含：

```
123.456
234.567
345.678 
```

然后

```
with open('data.txt') as f:
    data = f.readlines()
    diffs = [0] + [float(j) - float(data[i]) for i,j in enumerate(data[1:])]

print diffs 
```

将产生

```
[0, 111.111, 111.11099999999999] 
```

此答案假定您要保留计算值以供进一步处理。

如果您想在某个时候将这些内容写到文件中，请逐行：

```
with open('result.txt', 'w') as outf:
    for i in diffs:
        outf.write('{0:12.5f}\n'.format(i)) 
```

并调整字段宽度以满足您的需要（现在保留 12 个空格，小数点后 5 个），写入文件`result.txt`.

**更新**：鉴于（来自下面的评论）内存中可能有太多数据无法保存，这个解决方案应该可以工作。Python 2.6 不允许在同一个文件中打开两个文件`with`，因此需要单独的语句。

```
with open('result2.txt', 'w') as outf:
    outf.write('{0:12.5f}\n'.format(0.0))
    prev_item = 0;
    with open('data.txt') as inf:
        for i, item in enumerate(inf):
            item = float(item.strip())
            val = item - prev_item
            if i > 0:
                outf.write('{0:12.5f}\n'.format(val))
            prev_item = item 
```

有点hack的感觉。虽然不会在内存中创建一个巨大的列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T16:34:43.783

给定一个值列表：

```
[values[i] - values[i-1] if i > 0 else 0.0 for i in range(len(values))] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T17:16:39.733

为什么不编写自己的生成器，而不是列表推导式或生成器表达式，它可以具有任意复杂的逻辑，并且可以轻松地对庞大的数据集进行操作？

```
from itertools import imap

def differences(values):
    yield 0  # The initial 0 you wanted
    iterator = imap(float, values)
    last = iterator.next()
    for value in iterator:
        yield value - last
        last = value

with open('data.txt') as f:
    data = f.readlines()

with open('outfile.txt', 'w') as f:
    for value in differences(data):
        f.write('%s\n' % value) 
```

如果`data`只保留几个值，则好处不一定那么明显（尽管代码本身的明确性可能会在明年你必须回来维护它时很好）。但是假设`data`是来自巨大（或无限！）来源的值流，并且您想处理其中的前一千个值：

```
diffs = differences(enormousdataset)
for count in xrange(1000):
    print diffs.next() 
```

最后，这适用于不可索引的数据源。跟踪索引号以查找值的解决方案不能很好地处理生成器的输出。

# vim - 铿锵完成不起作用

> ID：10901129
> 
> 赞同：5
> 
> 时间：2012-06-05T16:28:21.610
> 
> 标签：vim, clang, clang-complete

我为 vim 安装了 clang_complete，但它不起作用。例如：当我用 vim 输入`std::`一个 c++ 文件时，vim 窗口的底部显示：

```
User defined completion (^U^N^P) Pattern not found 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T09:39:54.257

对此的常见解决方案似乎是添加：

```
let g:clang_user_options='|| exit 0' 
```

到你的 .vimrc 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-30T20:19:16.713

此问题已在问题[#178](https://github.com/Rip-Rip/clang_complete/pull/178)中解决。这实际上是 Clang 的一个问题，我已经打开了一个[错误报告](http://llvm.org/bugs/show_bug.cgi?id=13616)，并且很快就解决了。

另外，我邀请您看看[我的设置](http://oblita.com/blog/2012/08/30/vim-the-killer/)。

# datetime - 如何使用 JAXB 从 xs:string 元素生成日期类型字段的类

> ID：10901137
> 
> 赞同：2
> 
> 时间：2012-06-05T16:28:36.553
> 
> 标签：datetime, jaxb, xml-parsing, jaxb2, xjc

我有无法更改的 xsd 架构文件。
这是使我遇到问题的摘录：

```
<xs:element name="Event" maxOccurs="unbounded">
    <xs:complexType>
        <xs:all>
            <xs:element name="EventDate" type="xs:string" minOccurs="0">
... 
```

这是我为 EventDate 获得的字符串数据示例：

```
2012-05-30T12:30:00 CEST 
```

我正在使用 xjc 进行编译，并获得带有 String 字段的 Event 类。
有没有办法获得带有某种日期字段的事件类？
我想我应该编写某种适配器，这没关系，但我不知道如何告诉 xjc 仅在 EventDate 元素上使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:47:38.960

你可以使用 'XmlAdapter' 。它支持此功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T13:11:22.167

我正在编译：

```
xjc -b temp.xml schema.xsd 
```

这是 temp.xml 的一部分：

```
 <jaxb:bindings node="//xs:element[@name='EventDate']">
        <jaxb:property>
            <jaxb:baseType>
                <javaType name="java.util.Date"
                    parseMethod="com.mydomain.adapters.DateAdapter.parseDate"
                    printMethod="com.mydomain.adapters.DateAdapter.printDate"
                />
            </jaxb:baseType>
        </jaxb:property>
    </jaxb:bindings> 
```

这是 com.mydomain.adapters.DateAdapter 类的一部分：

```
private static final DateFormatter df = new DateFormatter("yyyy-MM-dd'T'HH:mm:ss z");
public static Date parseDate(String v) {
    Date date = null;
    try {
        date = df.parse(v, Locale.getDefault());
    } catch (ParseException e) {
        throw new MyException("Could not parse date:" + v);
    }
    return date;
}

public static String printDate(Date v) {
    return df.print(v, Locale.getDefault());
} 
```

# javascript - 提交表单时自动“下载”PDF

> ID：10901139
> 
> 赞同：1
> 
> 时间：2012-06-05T16:28:46.007
> 
> 标签：javascript, html

我有一个表单按钮，单击它会提交表单。

我希望同时，浏览器开始下载 PDF 文件。我想知道我该怎么做？请记住，PDF 通常由浏览器默认打开，但我希望浏览器“另存为”文件而不是打开文件。这是仅使用 html 还是我需要 javascript？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T16:43:51.337

如果您在服务器端使用 PHP，请尝试此操作。这是在我的一个网站中运行的经过测试的代码。

```
<?php
    ob_start();
    $file = 'YOUR-FILENAME-HERE.pdf';

    if (file_exists($file)) 
    {
        header('Content-Description: File Transfer');
        header('Content-Type: application/octet-stream');
        header('Content-Disposition: attachment; filename='.basename($file));
        header('Content-Transfer-Encoding: binary');
        header('Expires: 0');
        header('Cache-Control: must-revalidate');
        header('Pragma: public');
        header('Content-Length: ' . filesize($file));
        ob_clean();
        flush();
        readfile($file);
        exit();
    }
?> 
```

浏览器会提示下载而不在浏览器中显示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T18:14:34.013

您可以使用[此插件](http://johnculviner.com/post/2012/03/22/Ajax-like-feature-rich-file-downloads-with-jQuery-File-Download.aspx)使用 javascript 下载文件。
否则，在 javascript 中，您可以为其编写代码。

```
$('a').click(function(e) {
   e.preventDefault();  //stop the browser from following
   window.location.href = 'downloads/file.pdf';
});

<a href="no-script.html">Download now!</a> 
```

或者，您可以使用此 .

在 PHP 中：

```
<?php
  header('Content-type: application/pdf');
  header('Content-disposition: attachment; filename=filename.pdf');
  readfile("file.pdf");
?> 
```

在 Javascript 中：

```
<body>
<script>
 function downloadme(x){
    winObj = window.open(x,'','left=10000,screenX=10000');
    winObj.document.execCommand('SaveAs','null','download.pdf');
    winObj.close();
 }
 </script>

 <a href=javascript:downloadme('file.pdf');>Download this pdf</a>
 </body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T16:33:42.380

在这种情况下，您必须配置您的网络服务器以强制下载 PDF。如果您使用的是 Apache，不妨看看这篇文章 -> [http://www.thingy-ma-jig.co.uk/comment/7264](http://www.thingy-ma-jig.co.uk/comment/7264)

或者，如果您不必支持所有浏览器，您可以只使用 html5 下载属性 -> [http://updates.html5rocks.com/2011/08/Downloading-resources-in-HTML5-a-下载](http://updates.html5rocks.com/2011/08/Downloading-resources-in-HTML5-a-download)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T16:35:18.483

选项 1：您可以让表单提交到的 url 返回下载。

选项 2：使用 ajax 调用提交数据 onclick，将 window.location 设置为您的下载 url。

pdf是在浏览器中打开还是下载，是您无法控制的客户端设置。

# android - Android中MultiPart可编译方法上的NoClassDefFoundError

> ID：10901143
> 
> 赞同：1
> 
> 时间：2012-06-05T16:29:03.720
> 
> 标签：android, image, http, multipart

我正在处理以下问题：当尝试通过 MultiPart Entity 上传图像时，似乎 HttpClient/MIME 上的几个更新正在破解所有内容。我正在尝试以下代码，但它失败了`NoClassDefFoundError`：

```
public static void executeMultipartPost(File image, ArrayList<Cookie> cookies, String myUrlToPost) {
    try {
        // my post instance
        HttpPost httppost = new HttpPost(myUrlToPost);
        // setting cookies for the connection session
        if (cookies != null && cookies.size() > 0) {
            String cookieString = "";
            for (int i=0; i<cookies.size(); ++i) {
                cookieString += cookies.get(i).getName()+"="+cookies.get(i).getValue()+";";
            }
            cookieString += "domain=" + BaseUrl + "; " + "path=/";
            httppost.addHeader("Cookie", cookieString);
        }
        // creating the http client
        HttpClient httpclient = new DefaultHttpClient();
        // creating the multientity part [ERROR OCCURS IN THIS BELLOW LINE]
        MultipartEntity multipartEntity = new MultipartEntity();
        multipartEntity.addPart("photoupload", new FileBody(image));
        httppost.setEntity(multipartEntity);
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity resEntity = response.getEntity();
    } catch (Exception e) {}
} 
```

此方法是完全可编译的，并使用[httpclient-4.0.1.jar](http://repo1.maven.org/maven2/org/apache/httpcomponents/httpclient/4.0.1/httpclient-4.0.1.jar)和[httpmime-4.2.jar](http://repo1.maven.org/maven2/org/apache/httpcomponents/httpmime/4.2-beta1/httpmime-4.2-beta1.jar)库，但同样，它在我的注释行上崩溃了。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T18:26:06.357

好的，[这里](http://www.mediafire.com/?nebn6a3cxpmj4k6)有 Multipart post 所需的库，所有学分都归功于**Satya Komatineni**和**David Maclean**，Pro Android 3 和现在 4 的作者，我从他们的书中引用

> 要进行多部分 POST 调用，您需要获得三个额外的 Apache 开源项目：Apache Commons IO、Mime4j 和 HttpMime。您可以从以下网站下载这些项目： Commons IO：[http](http://commons.apache.org/io/) ://commons.apache.org/io/ Mime4j：http : [//james.apache.org/mime4j/](http://james.apache.org/mime4j/) HttpMime： [http://hc.apache。 org/downloads.cgi](http://hc.apache.org/downloads.cgi)（在 HttpClient 内部）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T16:56:48.463

I have the same problem and it was fixed by moving jars files into 'libs' directory in your android project.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T16:36:49.667

确保在项目构建路径中检查了 jar。（项目 -> 属性）

# javascript - jQuery 图像预加载顺序

> ID：10901144
> 
> 赞同：0
> 
> 时间：2012-06-05T16:29:06.043
> 
> 标签：javascript, jquery, image, preload

我在仅在一个方面适应 jQuery 图像预加载脚本时遇到了麻烦：我不知道如何确保我的图像按图像数组的顺序加载/显示。

目前，每次我重新加载页面时，图像都会以不同的顺序显示。（除了图像顺序之外的所有东西都可以正常工作。）

谁能帮我解决这个问题？

相关代码：

```
 (function($) {
        var imgList = [];
        $.extend({
            preload: function(imgArr, option) {
                var setting = $.extend({
                    init: function(loaded, total) {},
                    loaded: function(img, loaded, total, bild) {},
                    loaded_all: function(loaded, total) {}
                }, option);
                var total = imgArr.length;
                var loaded = 0;

                setting.init(0, total);
                for (var i = 0; i < total; i++) {
                    imgList[i] = ($("<img />")
                        .attr("src", imgArr[i])
                        .load(function() {
                            loaded++;
                            setting.loaded(this, loaded, total, this.src);
                            if(loaded == total) {
                                setting.loaded_all(loaded, total);
                            }
                        })
                    );
                }
           }
        });
    })(jQuery);

    $(document).ready(function() {
        $(function() {
            $.preload([
                "image1.jpg",
                "image2.jpg",
                "image3.jpg"
            ], {
                init: function(loaded, total) {
                    var z = 0;
                    while (z < total) {
                        z++;
                        $("section nav").append('<img id="e'+z+'" src="all/blank.png" alt=""/>');
                    }
                },
                loaded: function(img, loaded, total, bild) {
                    $("#e"+loaded).prop("src",bild);
                },
                loaded_all: function(loaded, total) {
                    //all done!
                }
            });
        });
    }); 
```

更新：

最后，我用一个完全不同的、更短的脚本解决了这个问题，我从头开始编写。它开始向我的图像容器添加尽可能多（非常小的）虚拟图像作为占位符，因为数组包含真实图像，并且仅在前一个图像完成后加载每个图像：

```
imgs = new Array("number1.png","number2.png","number3.png");

for (i=0; i<imgs.length; i++) {
  $("section nav").append('<img id="e'+i+'" src="blank.png" alt=""/>');
}

fin(0);

function fin (n) {
  $('#e'+n).attr('onload', 'fin('+n+')');
  $("#e"+n).attr("src", imgs[n]).load( function() {
    fin ((n+1));
  });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T17:02:25.803

问题是您将加载的 img 附加到当前加载的图像数量的位置，即图像按加载顺序放置。

您实际上希望它们在以下时间订购`var i`：

```
for (var i = 0; i < total; i++) {
    imgList[i] = ($("<img />")
        .attr("src", imgArr[i])
        .load(function() {
            loaded++;
            setting.loaded(this, i, total, this.src);  // i instead of loaded
            if(loaded == total) {
                setting.loaded_all(loaded, total);
            }
        })
    );
} 
```

但这不起作用，因为`i`将与`total`加载图像时相同，因此所有图像都将转到 position `total`。不是你想要的！

所以我们需要将它包装在一个自调用匿名函数中以访问正确的`i`值：

```
for (var i = 0; i < total; i++) {

    // wrap in function to get access to the right i

    (function(img) {
        imgList[img] = ($("<img />")
            .attr("src", imgArr[img])
            .load(function() {
                loaded++;
                setting.loaded(this, img, total, this.src);  // img instead of i
                if(loaded == total) {
                    setting.loaded_all(loaded, total);
                }
            })
        );
    })(i);
} 
```

用这个替换你的 for 循环，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T16:55:40.770

除非您将每个图像的下载延迟到上一个图像完成（这将是一个坏主意），否则您无法保证它们将以什么顺序下载。

浏览器通常会并行下载多个图像，以优化吞吐量。将其与不可预测的下载速度和不同的文件大小相结合，文件将以几乎任何顺序完成。

如果是你想要的视觉效果，那你就得单独解决了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T17:00:31.520

您的`loaded`回调将永远不会按顺序调用，因为图像是异步加载的。但是，您应该`loaded_all`改为传递原始数组。这样您的处理程序就可以按顺序处理图像。

```
if(loaded == total) {
    setting.loaded_all(imgArray);
} 
```

# perl - 无法使用 Text::CSV 解析 csv 文件

> ID：10901148
> 
> 赞同：2
> 
> 时间：2012-06-05T16:29:13.243
> 
> 标签：perl

我有这种格式的 csv 文件：

```
"Keyword"   "Competition"   "Global Monthly Searches"   "Local Monthly Searches (United States)"    "Approximate CPC (Search) - INR"

"kasperaky support" -0  -0  -0  -0 
```

第一行是列标题。

我已经尝试了 Text::CSV 中的大多数选项，但我无法提取这些字段。

这里 sep_char=>' '

我能去的最接近的是获取第一列的第一个单词（仅限“kasperaky”）。

我正在以这种方式创建对象（同时尝试各种设置）：

```
my $csv = Text::CSV->new ( { 
    binary => 1 ,
    sep_char=>' ',allow_loose_quotes=>0,quote_space=>0,quote_char          => '"',
    ,allow_whitespace    =>0, eol=>"\015\012"
     } ) 
                 or die "Cannot use CSV: ".Text::CSV->error_diag (); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T16:43:52.583

您的 CSV 是制表符分隔的。使用以下内容（代码经过测试可针对您的示例文件工作）：

```
use strictures;
use autodie qw(:all);       # automatic error checking open/close
use charnames qw(:full);    # \N named characters
use Text::CSV qw();
my $csv = Text::CSV->new({
    auto_diag   => 2,       # automatic error checking CSV methods
    binary      => 1,
    eol         => "\N{CR}\N{LF}",
    sep_char    => "\N{TAB}",
}) or die 'Cannot use CSV: ' . Text::CSV->error_diag;

open my $fh, '<:encoding(ASCII)', 'computer crash.csv';
while (my $row = $csv->getline($fh)) {
    ...
}
close $fh; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T16:46:01.647

To call that a CSV file is a bit of stretch! Your separator isn't a space, it's a sequence of 1 or more spaces, and Text::CSV doesn't handle that. (`allow_whitespace` doesn't work when your separator is a space, unfortunately.) You could use something like:

```
use List::MoreUtils qw( apply );
my @fields = apply { s/\\(.)/$1/sg } $line =~ /"((?:[^"\\]|\\.)*)"/sg; 
```

Now, if those are tabs, that's a different story, and you could use `sep_char => "\t"`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-09T16:18:08.823

我总是推荐使用解析器，通常 Text::CSV 很好，但是当你不使用真正的 CSV 时，有时会很痛苦。[`Text::ParseWords`](http://p3rl.org/Text%3a%3aParseWords)在这种情况下，您可以尝试使用核心模块。

这是我的例子。

```
#!/usr/bin/env perl

use strict;
use warnings;

use Text::ParseWords qw/parse_line/;

my @data;
while( my $line = <DATA> ) {
  chomp $line;
  my @words = parse_line( qr/\s+/, 0, $line );
  next unless @words;
  push @data, \@words;
}

use Data::Dumper;
print Dumper \@data;

__DATA__

"Keyword"   "Competition"   "Global Monthly Searches"   "Local Monthly Searches (United States)"    "Approximate CPC (Search) - INR"

"kasperaky support" -0  -0  -0  -0 
```

此实现构建了一个二维数据数组，跳过了未使用的行。当然，一旦你解析了标记，你就可以构建你想要的任何数据结构。

```
$VAR1 = [
          [
            'Keyword',
            'Competition',
            'Global Monthly Searches',
            'Local Monthly Searches (United States)',
            'Approximate CPC (Search) - INR'
          ],
          [
            'kasperaky support',
            '-0',
            '-0',
            '-0',
            '-0'
          ]
        ]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-20T16:08:13.187

这对我有用，文件空间用 1 个或多个空格分隔 这是 Text::CSV 不能完成工作的情况......

```
open(my $data, '<:encoding(UTF-8)', $filename) or die "Cannot open $filename";

while( my $line = <$data> ) {
        my @fields = split(' ', $line);
        print "\n$line : $fields[0] --- $fields[1] ----- $fields[2]";

} 
```

# mongodb - 没有字段名的mongodb查询

> ID：10901151
> 
> 赞同：2
> 
> 时间：2012-06-05T16:29:28.317
> 
> 标签：mongodb, advanced-queuing

我想查询所有具有包含特定值的字段的对象。例如，我有两个文件：

```
{"123": "apple", "217": "pear", "179": "orange"}
{"831": "pear", "189": "grapes"} 
```

并想获取所有具有值为“apple”的字段的对象，但我不知道该字段的名称。是否可以在 MongoDB 中指定一个查询来实现这一点？（对象中的数字键是子 id，对象中的值是长 GUID）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T19:46:49.227

不幸的是，MongoDB 不支持任何查询具有特定值的所有字段的方法。现有的 Jira 票证要求此增强功能：[https](https://jira.mongodb.org/browse/SERVER-1248) ://jira.mongodb.org/browse/SERVER-1248 。随意评论、投票或关注该票。

同时，处理这种情况的常用方法是更改​​ MongoDB 模式。对于您的示例，您将更改现有架构：

```
{"123": "apple", "217": "pear", "179": "orange"} 
{"831": "pear", "189": "grapes"} 
```

你可能会像这样构造它：

```
 { tags: [
        { cid: "123", value: "apple" },
        { cid: "217", value: "pear" },
        { cid: "179", value: "orange" },
      ]
    }
   { tags: [
        { cid: "831", value: "pear" },
        { cid: "189", value: "grapes" },
      ]
    } 
```

完成此操作后，您可以执行以下查询以查找所有所需的文档：

```
 db.docs.find( {'tags.value': "apple" } ) 
```

请注意，此架构允许您索引“tags.cid”和“tags.value”字段，而您的原始架构没有。

我希望这有帮助。

-威廉

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-15T18:37:16.973

您可以在所有字段上使用全文索引。

```
use dbname
db.collectionname.ensureIndex(
                           { "$**": "text" },
                           { name: "TextIndex" }
                         ) 
```

然后使用搜索：

```
DB db = mongoClient.getDB("dbname");
DBCollection coll = db.getCollection("collectionname");
BasicDBObject query = new BasicDBObject();
            query.append("$text", new BasicDBObject("$search", searchstring));
            DBCursor cursor = coll.find(query); 
```

# jquery - JQuery添加按钮里面

> ID：10901154
> 
> 赞同：0
> 
> 时间：2012-06-05T16:29:43.113
> 
> 标签：jquery

我想要以下内容：底部有一个文本框（标签调查 Qs）、一个按钮（添加选项）、单选框+文本按钮（添加按钮）。当我单击添加按钮时，正在创建新的 div（如 Survey2）。当我单击添加选项（第一个）时，将创建新的单选 + 文本框。

**但是，当我单击添加选择（第二个）时，未创建单选+文本框**。原因可能是当我们创建新对象时处理程序没有关联。但是我无法将 live() 方法放到代码中来做到这一点。

我是新手。请帮忙。提前致谢。

请找到我的代码：

```
<html>
<head>
<title>jQuery add / remove textbox example</title>

<script type="text/javascript" src="jquery.js"></script>

<style type="text/css">
    div{
        padding:8px;
    }
</style>

</head>

<body>

<h1>jQuery add / remove textbox example</h1>

<script type="text/javascript">

$(document).ready(function(){

    var counter = 2;
    var choiceCounter=2;

    $("#addButton").click(function () {
    //$("#addButton").live("click",function () {
    //alert("Inside Click FUnction");
    choiceCounter=0;
    if(counter>10){
            alert("Only 10 textboxes allow");
            return false;
    }   

    var newTextBoxDiv = $(document.createElement('div'))
         .attr("id", 'TextBoxDiv' + counter);

    newTextBoxDiv.after('<label>Survey Question '+ counter + ' : </label>' + '<input type="text" name="textbox' + counter +  '" id="textbox' + counter + '" value="" >');

    newTextBoxDiv.append('<label>Survey Question ' + counter + ' : </label>' + '<input type="text" name="textbox'  + counter + '" id="textbox' + counter + '" value="" /> <input type="button" value="Add Choice" id="addOption"> </br><input type="radio"> <input type="textbox" id="option1" ></br>');           
  $('#TextBoxesGroup').append(newTextBoxDiv);  

    newTextBoxDiv.appendTo("#TextBoxesGroup");

    counter++;
     });

     $("#addOption").click(function () {   // the new Add Method
    alert("Inside Option Function");
    if(choiceCounter>10){
            alert("Only 10 textboxes allow");
            return false;
    }   

    var newTextBoxDiv = $(document.createElement('div'))
         .attr("id", 'TextBoxDiv' + choiceCounter);

    newTextBoxDiv.after( '<br><input type="radio"> <input type="text" name="textbox' + choiceCounter + '" id="option' + choiceCounter + '" value="Insert your choice" >');

    newTextBoxDiv.append( '<br><input type="radio"> <input type="text" name="textbox' + choiceCounter + '" id="option' + choiceCounter + '" value="Insert your choice" />');           
        $('#TextBoxesGroup').append(newTextBoxDiv);  

    newTextBoxDiv.appendTo("#TextBoxesGroup");

    choiceCounter++;
     });

     $("#removeButton").click(function () {
    if(counter==1){
          alert("No more textbox to remove");
          return false;
       }   

    counter--;

        $("#TextBoxDiv" + counter).remove();

     });

     $("#getButtonValue").click(function () {

    var msg = '';
    for(i=1; i<counter; i++){
      msg += "\n Textbox #" + i + " : " + $('#textbox' + i).val();
    }
          alert(msg);
     });
  });
</script>
</head><body>

<div id='TextBoxesGroup'>
    <div id="TextBoxDiv1">

        <label>Survey Question 1: </label><input type='textbox' id='textbox1' >  <input type="button" value='Add Choice' id="addOption">
        <br><input type="radio"> <input type='textbox' id='option1' ><br>   

    </div>
</div>
<input type='button' value='Add Button' id='addButton'>
<input type='button' value='Remove Button' id='removeButton'>
<input type='button' value='Get TextBox Value' id='getButtonValue'>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T16:32:01.967

尝试委托事件：

```
$("#TextBoxesGroup").on("click", "#addOption", function () { 
  // your code
}): 
```

或者你可以试试

```
$("#TextBoxesGroup").delegate("#addOption", "click", function () { 
   // your code
}): 
```

### 一个小笔记

[`.on()`](http://api.jquery.com/on)用于普通绑定，如

```
$(target).on(eventName, handlerFunction) 
```

但是对于委托事件（又名现场）将使用类似

```
$(container).on(eventName, target, handlerFunction) 
```

这里`container`指向`target`在页面加载时属于 DOM 的持有者。`container`并且`target`将是任何有效的**[jQuery 选择器](http://api.jquery.com/category/selectors/)**。

# css - 调整固定 2 div 的图像大小（页眉和页脚）

> ID：10901156
> 
> 赞同：0
> 
> 时间：2012-06-05T16:29:46.137
> 
> 标签：css, html, resize, fixed

我的问题： ![在此处输入图像描述](../Images/b892899df991f19a63189a72c6fe8c5a.png)

我需要做的：

![在此处输入图像描述](../Images/b4ab8c68c8e634bf8346685b08bf6ae0.png)

有人可以帮助我吗？网址：thiago **** solano (.) com (.) br/index2.php/ (retire ****)

很感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T16:36:27.343

更改 PrettyPhoto 的默认宽度和高度：

```
pp_settings = jQuery.extend({
...
default_width: 500,
default_height: 344,
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T16:40:40.430

您可以将图像的宽度设置为类似 800px 的固定宽度，或者可能更好，设置为 80% 以获得某种动态宽度。

然后，把图片放到a里面`div`，设置左右边距为auto

```
divImgContainer{
    display:inline-block;
    margin-left:auto;
    margin-right:auto;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T17:03:38.330

我真的看不到你的链接。

无论如何，我要做的就是像这样针对那个img（可能是一个类）：

```
<img class="imgClass" src="myImage.jpg" />

.imgClass{
  display:block;
  margin:0 auto;
} 
```

# windows-server-2008 - 检查端口是否打开

> ID：10901157
> 
> 赞同：2
> 
> 时间：2012-06-05T16:29:46.787
> 
> 标签：windows-server-2008, port, telnet

我想查看我的 Windows Server 2008 R2 上的端口 1878 是否打开。我使用 VPS 服务器，所以我与 VPS 服务器公司交谈并要求他们打开所有端口。

当我运行 telnet 172.0.0.1 1878 时，我发现端口不可访问。还有其他方法可以查看端口是否打开或打开它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T16:39:52.247

用户可以使用诸如**nMap 之**类的软件来测试端口是否工作，更具体地说，它是关闭还是打开。

您可能必须添加 -Pn 标记以防端口被隐藏。

[http://nmap.org/](http://nmap.org/)

使用 CLI 命令：nmap (IP) -p (port)

或者，您可以使用基于**Web 的工具**来检查您的 VPS 是否处于活动状态。

[http://www.yougetsignal.com/tools/open-ports/](http://www.yougetsignal.com/tools/open-ports/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T16:41:30.713

您可以使用[netstat](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/netstat.mspx?mfr=true)列出已使用和未使用的内容。您还可以下载[netcat for windows](http://joncraton.org/blog/46/netcat-for-windows)，它的效果与您尝试 telnet 的效果相同，它只是有一个命令行选项来测试它是否可以连接。那将是这样的：

> 数控-z 127.0.0.1 1878

# c# - 删除在运行时 CF C# 上创建的标签

> ID：10901158
> 
> 赞同：2
> 
> 时间：2012-06-05T16:29:50.697
> 
> 标签：c#, winforms, compact-framework, label

我在方法中动态创建了一个标签“label1”。然后，当我单击一个按钮时，我想删除创建的标签，但如果我写*Controls.Remove(label1)*它表示该控件在上下文中不存在。我该怎么做才能做到这一点？

**编辑：**按照 Jon 的建议，我实现了 foreach 循环，但它什么也没做。这是我的代码，我使用的*面板*是由设计创建的：

```
void GenerateControls() {
    Label labelOne = new Label();
    Button btnContinue = new Button();
    panel.SuspendLayout();
    SuspendLayout();
    //btnContinue
    btnContinue.BackColor = System.Drawing.Color.Black;
    btnContinue.ForeColor = System.Drawing.SystemColors.Menu;
    btnContinue.Location = new System.Drawing.Point(145, 272);
    btnContinue.Name = "btnContinue";
    btnContinue.Size = new System.Drawing.Size(95, 28);
    btnContinue.TabIndex = 13;
    btnContinue.Text = "Continue";
    btnContinue.Visible = true;
    Controls.Add(btnContinue);
    btnContinue.Click += new System.EventHandler(btnContinue_Click);            
    //labelOne            
    labelOne.Location = new Point(0,65); 
    labelOne.Size = new System.Drawing.Size(100,20);
    labelOne.Text = "labelOne";
    labelOne.Name = "labelOne";
    labelOne.Visible = true;
    labelOne.TextChanged += new System.EventHandler(this.lbl_TextChanged);
    labelOne.BackColor = System.Drawing.Color.PaleGreen;
    Controls.Add(labelOne);
    //panel
    panel.Controls.Add(labelOne);
    panel.Visible = true;
    panel.Location = new Point(0,0);
    panel.Size = new Size(240, 320);
    //
    Controls.Add(panel);
    panel.ResumeLayout();
    ResumeLayout();
} 
```

然后在我点击*btnContinue*时：

```
private void btnContinuar_Click(object sender, EventArgs e) {
    foreach (Control control in panel.Controls) {
        if (control.Name == "labelOne"){
            panel.Controls.Remove(control);
            break;
        }
    }
} 
```

我调试它并在 panel.Control 中继续，就好像它是空面板一样。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T16:32:48.527

我怀疑它说该*变量*在该上下文中不存在。您必须通过其文本找到标签，或者了解有关它的其他信息。例如，当您创建它时，您可以设置[`Name`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.name.aspx)属性并在您想要删除它时通过它找到它：

```
panel.Controls.RemoveByKey("YourLabelName"); 
```

编辑：如评论`RemoveByKey`中所述，紧凑框架中不存在。所以你*要么*必须自己记住引用（在这种情况下你不需要名字），要么使用类似的东西：

```
foreach (Control control in panel.Controls)
{
    if (control.Name == "YourLabelName")
    {
        panel.Controls.Remove(control);
        break;
    }
} 
```

EDIT2：为了使其更加“通用”和桌面兼容，您可以保留 RemoveByKey 调用并将其添加到您的应用程序中：

```
public static class FormExtensions
{
    public static void RemoveByKey(this Control.ControlCollection collection,
                                   string key)
    {
        if(!RemoveChildByName(collection, key))
        {
            throw new ArgumentException("Key not found");
        }
    }

    private static bool RemoveChildByName(
        this Control.ControlCollection collection,
        string name)
    {
        foreach (Control child in collection)
        {
            if (child.Name == name)
            {
                collection.Remove(child);
                return true;
            }

            // Nothing found at this level: recurse down to children.
            if (RemoveChildByName(child.Controls, name))
            {
                return true;
            }
        }

        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T18:33:11.057

在对 OP 问题进行了 20 次编辑后，Jon 的回答与原始问题没有相似之处，你只剩下一个小故障。

您未将 labelOne 添加到面板中，而是将其添加到表单中。

改变

```
Controls.Add(labelOne); 
```

至

```
panel.Controls.Add(labelOne); 
```

然后一切都应该工作

# python - Python 2.7 还是 Python 3（为了速度）？

> ID：10901161
> 
> 赞同：35
> 
> 时间：2012-06-05T16:29:58.360
> 
> 标签：python

我四处寻找答案，很多东西似乎已经过时或过时了。Python 3 是否已经更新，因此它比 Python 2.7 快得多，还是我还是坚持使用我的可行代码更好？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-05T16:31:06.443

问题不在于速度——它们要么是相同的速度，要么是 Python 3.x 更快（取决于您查看的基准测试）。更具体地说，Python 2 过去速度更快，但显然，它们现在彼此相提并论（？）。请参阅评论和此[幻灯片](https://speakerdeck.com/pyconslides/python-3-dot-3-trust-me-its-better-than-python-2-dot-7-by-dr-brett-cannon)（向后）。

核心开发人员也在积极致力于优化 Python 3——Python 3 的每个新版本[都比上一个版本更快](http://igordavydenko.com/talks/by-pycon-2017/)。[您可以通过监控python-dev 邮件列表](https://mail.python.org/mailman/listinfo/python-dev)了解有关优化 Python（以及许多复杂性）的最新建议和想法。

更确切地说，许多人过去认为没有更新的原因是因为当 Python 3 出现时，以及之后的几年，大多数 Python 库都没有更新为在 Python 3.x 上工作。然而，幸运的是，今天这种情况得到了极大的改善——大多数 3rd 方库现在都兼容 Python 3。

[Python FAQ](http://wiki.python.org/moin/Python2orPython3)包含更多信息。您还可以查看[Python Wall of Superpowers](https://python3wos.appspot.com/)或[Py3 Readiness](http://py3readiness.org/)，以了解当前哪些流行的 Python 库与 Python 3 兼容。

**更新：（2017 年夏季）**

我觉得有必要注意到对 Python 2 的支持[将于 2020 年正式结束](https://www.python.org/dev/peps/pep-0373/)。

许多第 3 方库也计划效仿——科学生态系统的一大子集（例如 matplotlib、pandas、ipython）计划[在 2020 年放弃对 Python 2 的支持](http://www.python3statement.org/)，Django 正在[放弃支持](https://www.djangoproject.com/weblog/2015/jun/25/roadmap/)……我不会如果其他图书馆也这样做，我会感到惊讶。

因此，如果您有兴趣确保可以在 Python 或您最喜欢的库中使用最新和最强大的功能，那么您应该考虑尽快迁移到 Python 3。

以下是将 Python 2 代码转换为 3 代码的一些指南：

*   [https://docs.python.org/3/howto/pyporting.html](https://docs.python.org/3/howto/pyporting.html)
*   [http://python3porting.com/](http://python3porting.com/)
*   [https://eev.ee/blog/2016/07/31/python-faq-how-do-i-port-to-python-3/](https://eev.ee/blog/2016/07/31/python-faq-how-do-i-port-to-python-3/)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-05T17:05:35.240

仅供参考，[这](https://speakerdeck.com/pyconslides/python-3-dot-3-trust-me-its-better-than-python-2-dot-7-by-dr-brett-cannon)是一个比较 Python 2.7 和 Python 3.3 的性能基准。Python 3.3 比 Python 2.7 更快。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-06-05T16:37:44.110

Python 3.3 包括对 Unicode 字符串的优化，可减少它们的内存消耗。如果更多的代码适合缓存，这*可能会转化为更快的代码。*

真正知道的唯一方法是对两者中最关键的代码进行基准测试，看看有什么区别。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-05T16:46:15.127

您的应用程序对库的必要性将决定 Python3 还是 Pyhton2 更好。

# php - 我需要一个证书才能让这个 php 重定向像我期望的那样工作吗？

> ID：10901162
> 
> 赞同：1
> 
> 时间：2012-06-05T16:30:01.077
> 
> 标签：php, redirect, ssl, curl, https

当我在浏览器中访问**http**`://www.google.com/`时，我被重定向到**https**`://www.google.com/`。我希望在运行此代码时`CURLINFO_EFFECTIVE_URL`返回**https ：**

```
$ch = curl_init('http://google.com/');
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)");
curl_setopt($ch, CURLOPT_NOBODY, true);
echo curl_exec($ch); // echos nothing
echo curl_getinfo($ch, CURLINFO_HTTP_CODE); // echos '200'
echo curl_getinfo($ch, CURLINFO_EFFECTIVE_URL); // echos 'http://google.com/'
curl_close($ch); 
```

添加 ssl 证书并添加以下字段是否会像我预期的那样工作？

```
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_CAINFO, 'whateverCrt.crt'); 
```

# python - Python ftplib EOFerror

> ID：10901165
> 
> 赞同：0
> 
> 时间：2012-06-05T16:30:13.993
> 
> 标签：python, ftp, eol, ftplib

我有一个连接到服务器并制作整个目录的本地副本的脚本。EOFerror 发生在恰好下载了 50 个任意选择的文件之后。

**谁能告诉我，脚本有什么问题？**

错误：

```
Traceback (most recent call last):
  File "ftp.py", line 37, in <module>
    ftp_walk(ftp)
  File "ftp.py", line 17, in ftp_walk
    currdir = ftp.pwd()[1:]
  File "/usr/lib/python2.7/ftplib.py", line 574, in pwd
    resp = self.sendcmd('PWD')
  File "/usr/lib/python2.7/ftplib.py", line 244, in sendcmd
    return self.getresp()
  File "/usr/lib/python2.7/ftplib.py", line 210, in getresp
    resp = self.getmultiline()
  File "/usr/lib/python2.7/ftplib.py", line 196, in getmultiline
    line = self.getline()
  File "/usr/lib/python2.7/ftplib.py", line 186, in getline
    if not line: raise EOFError
EOFError 
```

脚本：

```
#!/usr/bin/python

import ftplib
import sys
import os
import datetime

def ftp_walk(ftp):    
    dirs = ftp.nlst()
    for item in (path for path in dirs if path not in ('.', '..')):
        try:
            ftp.cwd(item)
            print datetime.datetime.now().strftime("%Y-%m-%d %H:%M")+' DIR: ', ftp.pwd()
            ftp_walk(ftp)
            ftp.cwd('..')
        except Exception, e:
            currdir = ftp.pwd()[1:]
            if not os.path.exists(currdir): os.makedirs(currdir)
            try:
                with open(currdir+"/"+item, 'wb') as f:

                    def callback(data):
                        f.write(data)

                    ftp.retrbinary('RETR %s' % item, callback)
                    f.close()
                    print datetime.datetime.now().strftime("%Y-%m-%d %H:%M")+' RETR: '+ currdir+"/"+item
            except Exception, e:
                print e

ftp = ftplib.FTP("hhhhhhhhhhhhhh")
ftp.login("aaaaaaaa", "bbbbbbbbbbb")
ftp.sendcmd("TYPE I") #binary mode
ftp.set_pasv(True) # Trying Passive mode
ftp.cwd("public_html/eeeeeeee/rrrrrrrr/images")
ftp_walk(ftp)
ftp.quit() 
```

编辑：为 python 2.7 手动更新 ftplib 后：

```
Traceback (most recent call last):
  File "ftp.py", line 29, in <module>
    ftp = ftplib.FTP("something.com")
  File "/usr/lib/python2.7/ftplib.py", line 114, in __init__
    self.connect(host)
  File "/usr/lib/python2.7/ftplib.py", line 150, in connect
    self.file = self.sock.makefile('r', encoding=self.encoding)
TypeError: makefile() got an unexpected keyword argument 'encoding' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T21:08:51.013

我已经尝试过你的脚本，它没有任何问题。我刚刚使用它从我的服务器中提取了 233 张图像。尝试将当前目录设置为`ftp.cwd("./public_html/eeeeeeee/rrrrrrrr/images")`，看看会发生什么......

# asp.net - 在 ASP.NET 中显示阿拉伯数字

> ID：10901167
> 
> 赞同：1
> 
> 时间：2012-06-05T16:30:42.160
> 
> 标签：asp.net, localization

我使用 VS2010,C# 开发我的 ASP.NET Web 应用程序，我想以阿拉伯语/波斯语模式显示我的数字，我的意思是标记数字和通过代码显示的数字，我有什么选择？我使用了 lang="ar", dir="rtl" 但没有任何变化，我的用户是否应该在他们的浏览器中进行任何更改？我见过几个显示阿拉伯数字的网站，但我根本没有更改我的浏览器设置！我应该在我的代码中转换任何内容吗？标记页面呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T17:01:38.020

我认为这大部分与用户系统配置有关。EX：在 windows vista 中，server 2008 控制面板 => 区域和语言设置 => 附加设置 => 数字选项卡 => 检查标准数字并使用本机数字选项

但是，您应该在代码中执行以下操作：

```
System.Threading.Thread.CurrentThread.CurrentCulture = new CultureInfo("ar-EG");
System.Threading.Thread.CurrentThread.CurrentUICulture = new CultureInfo("ar-EG"); 
```

# javascript - 对这个 javascript 函数进行微调？

> ID：10901170
> 
> 赞同：0
> 
> 时间：2012-06-05T16:30:52.267
> 
> 标签：javascript

我有一个通过 onClick 显示/隐藏的脚本。我可以让它显示/隐藏就好了，但我不能让它显示/'隐藏其他所有东西'。所以当我真的只想要一个时，我得到的是一堆打开的容器。

Javascript：

```
<script>
    function showfields(fields){
        if(document.getElementById(fields).style.display=='none'){
            document.getElementById(fields).style.display='block';
        }
        else{
            document.getElementById(fields).style.display = 'none';
        }
    }
</script> 
```

HTML：

```
<div id="hidden" class="steps" style="display: block;">
    <div class="section" style="margin-right: 10px;">
        <h2>Something</h2>
    </div>
    <button class="continue dropdown" id="showLink" onClick="showfields('hidden2');return false;" href="#">Continue</button>
</div>
<div id="hidden2" class="steps" style="display: block;">
    <div class="section" style="margin-right: 10px;">
        <h2>Something2</h2>
    </div>
    <button class="continue dropdown" id="showLink" onClick="showfields('hidden3');return false;" href="#">Continue</button>
</div>
<div id="hidden3" class="steps" style="display: block;">
    <div class="section" style="margin-right: 10px;">
        <h2>Something3</h2>
    </div>
    <button class="continue dropdown" id="showLink" onClick="showfields('hidden3');return false;" href="#">Continue</button>
</div>
<div id="hidden4" class="steps" style="display: block;">
    <div class="section" style="margin-right: 10px;">
        <h2>Something4</h2>
    </div>
    <button class="continue dropdown" id="showLink" onClick="showfields('hidden4');return false;" href="#">Continue</button>
</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T16:32:57.893

由于您已使用 jQuery 对此进行了标记，因此我认为这是一个选项：

```
function showfields(fields){
  $('.steps').hide()
  $('#' + fields).show();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T16:36:37.440

**编辑：** 这是你想要做的：http: [//jsfiddle.net/Rykus0/67cjt/2/](http://jsfiddle.net/Rykus0/67cjt/2/) （没有jQuery）

（ps - 这可以做得更好）

* * *

您的问题不是很清楚，但我猜您希望页面从除第一个 div 隐藏之外的所有内容开始。

在这种情况下，你所拥有的很好，只需设置`style="display:none;"`你一开始不想显示的元素（你也可以使用一个类）。

另外，我相信您应该将对 hidden3 的`onclick`调用更改为`showfields('hidden4')`并从 hidden4 中删除 onclick 事件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T16:38:21.710

我同意波尔科，

例如，另一种选择是使用类作为标志

```
function showFields(fields){
     $(fields).each(function(){
         if($(this).hasClass('visible'){
              $(this).hide();
         }
         else {
              $(this).show();
         }
     }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T16:39:09.230

不使用 jquery 。这段 javascript 可以帮助你

```
 <script>
        function showfields(fields){
          for(var i=0;i<document.body.getElementsByTagName("*").length;i++)
          { if(document.body.getElementsByTagName("*")[i].id==field)
            {
            document.body.getElementsByTagName("*")[i].style.display='block';
            }
            else{
                 document.body.getElementsByTagName("*")[i].style.display='block';

            }
        }
    </script> 
```

# c++ - 使用 Boost 生成的 Python 模块：与 C++ 签名不匹配

> ID：10901173
> 
> 赞同：0
> 
> 时间：2012-06-05T16:31:12.080
> 
> 标签：c++, python, visual-studio-2010, boost

我正在使用一个名为 Mitsuba 的软件。它带有一个 Python 实现，用 Boost 包装。Python中的这一行：

```
scene = SceneHandler.loadScene(fileResolver.resolve("model.xml"), paramMap) 
```

产生错误。根据文档，fileResolver.resolve 的类型是 fs::path，paramMap 的类型是 ParameterMap。

C++ 代码中的函数签名是：

```
SceneHandler::loadScene(const fs::path &filename, const ParameterMap &params) 
```

错误是：

```
Traceback (most recent call last):
  File "...\foo.py", line 22, in <module>
    scene = SceneHandler.loadScene(fileResolver.resolve("model.xml"), paramMap)
ArgumentError: Python argument types in
    SceneHandler.loadScene(str, StringMap)
did not match C++ signature:
    loadScene(class boost::filesystem2::basic_path<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,struct boost::filesystem2::path_traits>, class std::map<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,struct mitsuba::SimpleStringOrdering,class std::allocator<struct std::pair<class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const ,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > > > >) 
```

我可以做哪些进一步的调查？你知道问题出在哪里吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T21:05:41.400

不幸的是，尚不清楚哪个论点导致了问题。

根据您收到的错误消息，返回类型`fileResolver.resolve`显然是`str`，而不是`boost::filesystem::basic_path`。您要查看的是 Mitsuba 定义其 Boost.Python 接口的位置，以查看是否注册了用于将 Python 字符串转换为`boost::fs::path`对象的“转换器”。如果没有，您将必须弄清楚该库获取可转换为正确类型的 Python 对象的正确方法是什么。

对于第二个参数，您需要进行基本相同的检查，除非`StringMap`已经是 Boost.Python 类型（`type(paramMap.__class__)`返回什么？）。它看起来像是`ParameterMap`一个 typedef

```
`std::map<std::string, std::string, mitsuba::SimpleStringOrdering>` 
```

但同样，必须有一个注册的 Boost.Python 转换器可以从 Python 类型进行转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-22T11:11:03.923

请注意，这个错误已经修复了一段时间——现在有一个隐式转换，在跨越 C++/Python 障碍时在 fs::path 和 std::string 之间进行双向转换。

# android - 是否可以在 IOS 和 Android 中模拟键盘事件？

> ID：10901184
> 
> 赞同：0
> 
> 时间：2012-06-05T16:31:35.933
> 
> 标签：android, ios, keyboard, simulate

我想编写某种按键的宏应用程序。这在 IOS 和/或 Android 上可行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T16:36:29.117

是的，对于 android，你试过[MonkeyRunner](http://developer.android.com/guide/developing/tools/monkeyrunner_concepts.html)

> monkeyrunner 工具提供了一个 API，用于编写从 Android 代码外部控制 Android 设备或模拟器的程序。使用 monkeyrunner，您可以编写一个 Python 程序来安装 Android 应用程序或测试包、运行它、向其发送击键、截取其用户界面的屏幕截图并将屏幕截图存储在工作站上。

# jquery - 如何比较时间戳

> ID：10901185
> 
> 赞同：1
> 
> 时间：2012-06-05T16:31:36.277
> 
> 标签：jquery, timestamp

我查看了这个论坛，发现了一些关于使用 jQuery 转换时间戳的类似帖子。但是我还没有找到解决我的问题的方法。

我正在与 Jquery Mobile 结合使用 web 应用程序。在这个 web 应用程序中，我显示了一些 twitter 提要：图像来自和消息。现在我也试图在那里获取日期。

Wehn 我正在从 json 中检索日期，如下所示：

```
Tue, 05 Jun 2012 13:25:06 +0000 
```

现在我想将此日期与当前日期进行比较以计算过去的时间。这是因为我想说：1 秒前、2 分钟前、1 小时前等。

有人能告诉我如何将当前日期与 twitter 日期进行比较吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T16:48:48.003

您可以像这样比较 javascript 中的时间戳。

```
var input_date = new Date('Tue, 05 Jun 2012 13:25:06 +0000').getTime();
var curr_date = new Date().getTime();
if(input_date > curr_date){
  alert("greater");    
}else{
  alert('small');
} 
```

这是[演示](http://jsfiddle.net/wgZNH/1/)

但是根据您的要求，您希望显示时间，例如“1 分钟前”、“1 小时前”、“2 天前”，您可以使用***jquery timeago 插件***而不是进行 javascrpt 计算。请看[这个插件](http://timeago.yarp.com/)，它会满足你的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T16:33:12.900

```
var twitterDate = new Date("Tue, 05 Jun 2012 13:25:06 +0000").getTime(),
    now = new Date().getTime();

if (twitterDate > now) {
    alert('Future')
} else {
    alert('Past');
} 
```

**[演示](http://jsfiddle.net/thecodeparadox/QStkd/151/)**

> getTime 方法返回的值是自 1970 年 1 月 1 日 00:00:00 UTC 以来的毫秒数。

阅读**[.getTime()](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/getTime)**

要获得日期差异，您可以按照以下方法：

```
function getDateDiff(twitterDate, interval) { // interval means unit,
    // in which you want the result
    var second = 1000,
        minute = second * 60,
        hour = minute * 60,
        day = hour * 24,
        week = day * 7;
    date1 = new Date(twitterDate).getTime();
    date2 = new Date().getTime();
    var timediff = date2 - date1;
    if (isNaN(timediff)) return NaN;
    switch (interval) {
    case "years":
        return date2.getFullYear() - date1.getFullYear() + ' years ago.';
    case "months":
        return ((date2.getFullYear() * 12 + date2.getMonth()) - (date1.getFullYear() * 12 + date1.getMonth())) + ' months ago.';
    case "weeks":
        return Math.floor(timediff / week) + ' weeks ago.';
    case "days":
        return Math.floor(timediff / day) + ' days ago.';
    case "hours":
        return Math.floor(timediff / hour) + ' hours ago.';
    case "minutes":
        return Math.floor(timediff / minute) + ' minutes ago.';
    case "seconds":
        return Math.floor(timediff / second) + ' seconds ago.';
    default:
        return undefined;
    }
} 
```

利用：

```
getDateDiff("Tue, 05 Jun 2012 13:25:06 +0000", "seconds"); 
```

# android - 清理 Android FrameLayout

> ID：10901187
> 
> 赞同：-5
> 
> 时间：2012-06-05T16:31:48.617
> 
> 标签：android

我正在尝试用 Java 编写简单的动画，所以我问你们中是否有人知道如何完全清理框架布局。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-05T16:33:48.503

参考您的框架布局，然后调用`removeAllViews()`该布局。这应该清除所有视图的布局。

# php - cURL PHP 使用自签名证书的私有服务器之间的正确 SSL

> ID：10901189
> 
> 赞同：1
> 
> 时间：2012-06-05T16:32:00.770
> 
> 标签：php, ssl, curl, https, ssl-certificate

我最初在运行 CURLOPT_SSL_VERIFYPEER 的 2 台服务器之间建立了连接，设置为“false”，SSL 证书中没有通用名称以避免错误。以下是使用证书连接到服务器的客户端代码：

```
curl_setopt($ch,CURLOPT_SSL_VERIFYPEER,FALSE);
curl_setopt($ch,CURLOPT_SSL_VERIFYHOST,2); 
```

但是，我最近更改了此代码（将其设置为 true）并以 PEM 格式指定了计算机证书。

```
curl_setopt($ch,CURLOPT_SSL_VERIFYPEER,TRUE);
curl_setopt($ch,CURLOPT_SSL_VERIFYHOST,2);
curl_setopt($ch,CURLOPT_CAINFO,getcwd().'/includes/hostcert/Hostname.crt'); 
```

这在测试机器上的本地网络上效果很好，因为证书是用它的 CN 主机名签名的。如何设置 PHP 代码，使其仅信任主机名计算机并保持安全连接。

我很清楚您可以将 CURLOPT_SSL_VERIFYHOST 设置为“0”或“1”并将 CURLOPT_SSL_VERIFYPEER 设置为“false”，但这些不是有效的解决方案，因为它们破坏了 SSL 安全性。

我的 /etc/hosts 文件如下：

```
#<ip-address>   <hostname.domain.org>   <hostname>
127.0.0.1       localhost.localdomain   localhost ExampleHostName
::1             localhost.localdomain   localhost 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T16:37:57.297

*您需要按照客户端的要求*生成具有有效主机名的证书。如果您使用`machine.local`了您的内部名称，但现在想使用外部客户端通过 调用它`machine.example.org`，那么您需要您使用的证书对`machine.example.org`.

如果您需要两者（因为可能使用不同的主机名调用同一台机器），请使用主题备用名称扩展名并将多个 DNS 条目放入您的证书中。

# objective-c - 在 Objective-C 标头中的冒号上对齐

> ID：10901191
> 
> 赞同：3
> 
> 时间：2012-06-05T16:32:03.953
> 
> 标签：objective-c, uncrustify

我想使用 uncrustify 在冒号上对齐我的参数，并取得一些有限的成功。

使用[Can Uncrustify 中的信息可以在 Objective-C 方法调用中对齐冒号吗？](https://stackoverflow.com/questions/938775/can-uncrustify-align-colons-in-objective-c-method-calls)我的配置文件中有以下内容：

```
align_oc_decl_colon = true
align_oc_msg_colon_span = 20 
```

我的`.m`-files 看起来很棒，如下所示：

```
- (id)initWithStreetName:(NSString *)streetName
                areaCode:(NSString *)areaCode
                    city:(NSString *)city
                 country:(NSString *)country
        positionLatitude:(NSString *)positionLatitude
       positionLongitude:(NSString *)positionLongitude
      serverAssignmentId:(NSString *)serverAssignmentId
                 comment:(NSString *)comment
               timestamp:(NSDate *)timestamp
                  status:(AssignmentStatus)status 
```

但同样的方法在标题中看起来像这样：

```
- (id)initWithStreetName:(NSString *)streetName
             areaCode             :(NSString *)areaCode
                 city                 :(NSString *)city
              country              :(NSString *)country
     positionLatitude     :(NSString *)positionLatitude
    positionLongitude    :(NSString *)positionLongitude
   serverAssignmentId   :(NSString *)serverAssignmentId
              comment              :(NSString *)comment
            timestamp            :(NSDate *)timestamp
               status               :(AssignmentStatus)status; 
```

关于如何让标头代码看起来像实现代码的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:45:15.880

这是最新版本 uncrustify 上的一个已知错误。在给出这个答案时，最新的一个是 9 个月前。然而，这个错误的补丁已经提交，希望它会出现在下一个版本中。

看这里： [https ://github.com/bengardner/uncrustify/issues/18](https://github.com/bengardner/uncrustify/issues/18)

作为临时修复，您可以自己编译当前主控。使用 XCode 编译只会生成一个二进制文件，您可以在下一个正式版本之前使用它。

该错误在 0.59 上，应该在 0.60 上解决

# c - 检查 C 字符串中的“行尾”

> ID：10901195
> 
> 赞同：1
> 
> 时间：2012-06-05T16:32:20.877
> 
> 标签：c

我想从用户那里获得最大长度为 30 个字符的字符串作为输入，并检查它是否包含行尾。

到目前为止，这是我试图写的：

```
int main(void) {
int i;
char* command = (char*)calloc(31, sizeof(char));
while (0 < 1) {
    scanf("%s", command);
    for (i = 0; i <= strlen(command); ++i) {
        if (command[i] == '\n')
            printf("here");
    }
    if (strcmp(command, "quit") == 0)
        break;
} 
```

这个想法是检查用户作为输入给出的命令是否“合法” - 即长度 < 31。当我运行此代码时，无论输入的长度如何，它都不会打印“here”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T16:33:16.923

这是因为`scanf()`不包括换行符，它认为它是空格并使用空格来分隔它转换的值。只需使用`strlen()`' 的返回值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-05T16:36:43.470

`scanf`不包括 terminating `'\n'`，但[`fgets`](http://www.cplusplus.com/reference/clibrary/cstdio/fgets/)确实：

> 换行符使 fgets 停止读取，但它被认为是有效字符，因此它包含在复制到 str 的字符串中。

只需将您的`scanf`行更改为：

```
fgets(command, 31, stdin); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T16:37:59.447

使用 fgets（有关更多信息 man fgets）您正在读取的流是标准输入。

它看起来像这样：

```
fgets(command, 31, stdin); 
```

在字符串的末尾（如果没有错误），您可以查找“\0”。它将被附加到字符串的末尾（这就是为什么我使用 31 而不是 30 作为大小）。

此外，您可以使用 fgets 从任何流（即文件、错误等）中读取数据。我建议您了解它的工作原理，因为它比 scanf 更灵活一点。

希望有帮助。

# php - PHP电子商务多商店引擎

> ID：10901198
> 
> 赞同：1
> 
> 时间：2012-06-05T16:32:28.667
> 
> 标签：php, e-commerce, shopping-cart

我需要电子商务引擎的建议，这将允许创建多站点互联网商店。（当客户在他的电子商务网上有几家商店时）

有了这样的功能：

1.  商店有相同的设计模板

2.  每个商店都有自己的管理员，管理员可以分别填写自己的商店内容。

3.  Gloabal 管理员可以授予商店管理员\stop 权限

4.  用户在系统中是单一注册的，因此在一个商店注册，您可以在其中任何一个中使用此登录。

我有使用 ShopCart 和 VamShop（俄罗斯 osCommerce fork）的经验，但它们都有单一的商店功能，如果我将它们设置几个副本，我可以解决任务 1 和 2，但会遇到 3 和 4 的问题。

您可以为我提供什么解决方案\方法？

PS：重要的是，它必须是基于 PHP 的引擎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T17:20:52.550

你可以试试[PHPMall](http://www.netartmedia.net/mall/index.html)和[Kodemall](http://www.kodemall.com/)。它们都支持多供应商功能，而且它们都不便宜。我去年购买了 PHPMall，我个人不喜欢构建代码（不是 MVC，还有许多已弃用的函数）。虽然它正在工作，但由于“肮脏”的编程风格，我发现很难修改，所以我决定创建自己的。我没有尝试过基于 OpenCart 电子商务脚本的 Kodemall。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T17:36:03.177

Magento 将是解决您问题的好选择。

对于其社区版本，要求 1 和 4 已经存在。安装的扩展将轻松为您提供 2 和 3 的解决方案。

其企业版和专业版将包含这些功能，但每年收取许可证费用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-06T07:54:12.023

PrestaShop 1.5 即将发布。

正如您在路线图上看到的，最后一个错过的功能是多商店管理。

[http://www.prestashop.com/en/milestones-1-5](http://www.prestashop.com/en/milestones-1-5)

> 多商店管理：多币种、多语言和多域选项，多商店管理将完整、高效并集成到 PrestaShop。多商店将允许任何商家，无论其规模如何，都可以从一个后台办公室管理多个商店。

所以我建议你继续关注。

PS：但是，另一种选择是 Magento。

**编辑：Prestashop 1.5 最终版本已发布：[下载](http://www.prestashop.com/en/download)**

# php - 在 PHP 文档块中包含 @param varname 是否仍然合适？

> ID：10901201
> 
> 赞同：0
> 
> 时间：2012-06-05T16:32:42.370
> 
> 标签：php, documentation, phpdoc, docblocks

根据[维基百科](http://en.wikipedia.org/wiki/PHPDoc#DocBlock_Description_Details)`@param`，文档块参数`type [$varname] description`的格式`$varname`是可选的。这似乎得到了 phpDocumentor 项目的支持，该项目[指出](http://manual.phpdoc.org/HTMLSmartyConverter/HandS/phpDocumentor/tutorial_tags.param.pkg.html)：

> ```
> @param datatype $paramname description
> @param datatype1|datatype2 $paramname description 
> ```
> 
> 注意：从 0.4.1 开始，@param 可以记录 phpdoc.de 样式，带有可选的 $paramname

那么包含 $paramname 是否仍然是正确的形式，还是应该省略？

```
/**
 * Have a foo!
 *
 * @param string $foo is a string
 * @param string This is another string
 * @return string
 */
function haveAFoo($foo, $bar) { ... } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T18:56:04.050

更“正确的形式”是包含 $paramname。它确保在将@param 行与函数签名中的匹配参数匹配时零歧义。它很可能仅作为“phpdoc.de 样式”的旧向后兼容性问题被列为“可选”。我怀疑这种可选处理在 phpDocumentor2 中是否仍然可用。

# php - 将数组发送到codeigniter中的函数

> ID：10901209
> 
> 赞同：0
> 
> 时间：2012-06-05T16:33:12.177
> 
> 标签：php, javascript, jquery

我有以下代码将数组发送到 codeigniter 中的函数 /chat

```
$(document).ready(function () {
    $('#submit').live('click', function (eve) {
        eve.preventDefault();
        $.ajax({
            url: "http://localhost/fq/index.php/splash/chat/",
            type: 'JSON',
            data: a,
            success: function (html) {
                alert(html);
            }
        });
    }); 
```

让我们假设数组 a 只包含人名。（约翰、詹姆斯、史密斯）

我希望能够从函数 chat 中的数组中检索所有值。

怎么做到呢？

编辑：

我需要从这个函数（codeigniter）中的 JSON 编码数组中检索值

```
 public function chat()
{

  //code to retrieve values

  $this->load->view('chat');

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T16:38:19.920

```
 data: a, 
```

应该

```
 data: $('form').serialize(), // 'form' may need to replace by your form selector 
```

但是如果你只想发送一个像 ['John', 'James', 'Smith'] 这样的数组......那么你的就好了。

`dataType: 'json'`如果您期望**Object**作为响应或**Html**`dataType: 'html'`响应，则将其用作配置。

 **设置`dataType`将使您免于额外的解析工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T16:44:59.857

You should do it via JSON, by changing

```
type: POST 
```

into

```
type: JSON 
```

Take a look at: [http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

Also I agree with thecodeparadox above, it's simply better practice**

# jquery - jqGrid：其他编辑参数未发布到服务器

> ID：10901212
> 
> 赞同：0
> 
> 时间：2012-06-05T16:33:18.573
> 
> 标签：jquery, asp.net-mvc, jqgrid

我正在使用`Lib.Web.MVC`帮助程序，所以我的初始 jqGrid JS 是由该对象生成的。在调用@grid.GetJavaScript 之后，我发出一个单独的调用来修改`editData`集合，如下所示。这是我正在使用的有效 JS。`AreaId`和的值`AreaItemId`永远不会提交给控制器操作。

```
$(document).ready(function () {
    $('#GetAreaItemDetails').jqGrid({
        colNames: ['Code', 'Name', 'Description', 'Has Addl Comments'],
        colModel: [
            { editable: true, editoptions: { "maxlength": 16 }, editrules: { required: true },
                name: 'AreaItemDetailCode'
            },
            { editable: true, editoptions: { "maxlength": 32 }, editrules: { required: true },
                name: 'AreaItemDetailName'
            },
            { editable: true, editoptions: { "maxlength": 128 }, editrules: { required: true },
                name: 'AreaItemDetailDescription'
            },
            { editable: true, edittype: 'checkbox', editrules: { required: true },
                name: 'HasAdditionalComments'
            }],
        caption: 'Area Item Details',
        url: '/Admin/GetAreaItemDetails',
        datatype: 'json',
        footerrow: true,
        jsonReader: { repeatitems: false, id: 'Id', subgrid: { repeatitems: false} },
        mtype: 'POST',
        pager: '#GetAreaItemDetailsPager',
        prmNames: { npage: 'npage' },
        rowList: [10, 20, 30, 40, 50],
        rowNum: 10,
        sortname: 'AreaItemDetailId',
        viewrecords: true,
        height: '100%'
    }).jqGrid('navGrid', '#GetAreaItemDetailsPager',
        { search: false },
        { height: 175, url: '/Admin/UpdateAreaItemDetail', width: 400, recreateForm: true,
            closeAfterEdit: true
        },
        { height: 175, url: '/Admin/InsertAreaItemDetail', width: 400, recreateForm: true,
            closeAfterAdd: true
        });

    $("#GetAreaItemDetails").jqGrid('navGrid', '#GetAreaItemDetailsPager',
        {/*navGrid options*/},
        {
            editData: {
                AreaItemId: function () {
                    return $('#ddlAreaItems').val();
                },
                AreaId: function () {
                    return $('#ddlAreas').val();
                }
            }
        },
        {
            editData: {
                AreaItemId: function () {
                    return $('#ddlAreaItems').val();
                },
                AreaId: function () {
                    return $('#ddlAreas').val();
                }
            }
        });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T17:24:08.133

我想你的问题的原因是你做了**两个电话**而`navGrid`不是一个。navGrid [方法](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3anavigator#definition)创建导航栏。您只能在网格中创建*一个*导航栏。

您如何从函数测试的代码[行](https://github.com/tonytomov/jqGrid/blob/v4.3.3/js/grid.formedit.js#L1729)中看到将由方法创建的属性的存在（参见刚刚分配[的行](https://github.com/tonytomov/jqGrid/blob/v4.3.3/js/grid.formedit.js#L1976)）。所以代码`navGrid``nav``this.nav = true;`

```
if(this.nav) {return;} 
```

将仅**用于跳过**该方法的第二次执行。

因此，要解决您的问题，您应该将两个调用合二为一：

```
...
}).jqGrid('navGrid', '#GetAreaItemDetailsPager',
    { search: false },
    { height: 175, url: '/Admin/UpdateAreaItemDetail', width: 400, recreateForm: true,
        closeAfterEdit: true,
        editData: {
            AreaItemId: function () {
                return $('#ddlAreaItems').val();
            },
            AreaId: function () {
                return $('#ddlAreas').val();
            }
        }
    },
    { height: 175, url: '/Admin/InsertAreaItemDetail', width: 400, recreateForm: true,
        closeAfterAdd: true,
        editData: {
            AreaItemId: function () {
                return $('#ddlAreaItems').val();
            },
            AreaId: function () {
                return $('#ddlAreas').val();
            }
        }
    }); 
```

如果您将常用的添加和编辑设置设置为表单编辑的默认设置（在页面上），则可以减少代码

```
$.extend($.jgrid.edit, {
    height: 175,
    url: '/Admin/InsertAreaItemDetail',
    width: 400,
    recreateForm: true,
    closeAfterAdd: true,
    closeAfterEdit: true,
    editData: {
        AreaItemId: function () {
            return $('#ddlAreaItems').val();
        },
        AreaId: function () {
            return $('#ddlAreas').val();
        }
    }
}); 
```

*在*调用`navGrid`. 在这种情况下，调用本身可以减少到

```
...
}).jqGrid('navGrid', '#GetAreaItemDetailsPager', { search: false }); 
```

# objective-c - 将代表设置为自己的代表？

> ID：10901216
> 
> 赞同：1
> 
> 时间：2012-06-05T16:33:30.857
> 
> 标签：objective-c, ios, delegates

我有三个 ViewController；A、B 和 C。

A介绍B，B介绍C。

如何将数据从 C 传递回 A？

我将 B 的代表设置为 A。

```
BViewController *bvc = [self.storyboard instantiateViewControllerWithIdentifier:@"B"];
bvc.delegate = self; 
```

我可以以某种方式将 C 的代表设置为 A 吗？

喜欢：

```
CViewController *cvc = [self.storyboard instantiateViewControllerWithIdentifier:@"C"];
cvc.delegate = (self's parent delegate) 
```

?

还是我需要将 C 的代表设置为 B，然后设置为 A？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T16:48:33.553

让视图控制器 C 将其委托设置为 B；B 设置它的委托 A。现在 B 上可以有一个名为 sendMessageToA 的方法：因此，当 C 向其委托发送“sendMessageToA”时，B 可以将它需要的任何数据发送给 A。

或者您可以将消息从 B 转发到 A。因此 C 将向其代表（在本例中为 B）发送消息。B 说“我不知道这个消息，让我转发它。” B 将消息发送给 A。

这个链接很好地解释了这个概念： http: [//www.mikeash.com/pyblog/friday-qa-2009-03-27-objective-c-message-forwarding.html](http://www.mikeash.com/pyblog/friday-qa-2009-03-27-objective-c-message-forwarding.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T16:44:06.067

您当然可以将 c 的委托设置为 a 或 b。您必须决定绕过 b 是否有效。b 可能想在消息返回到 a 之前做一些事情，或者它可能不在乎。所以，如果你在 b 中实例化 c：

```
// make b the delegate of c
cvc.delegate = self; 
```

或者

```
// bypass b and make a the delegate of c
cvc.delegate = self.delegate; 
```

c 只需要知道无论它的委托是谁，他们都可以响应适当的选择器：

```
// in c
if ([delegate respondsToSelector:@selector(doSomething)])
{
    [delegate doSomething];
} 
```

编辑以下评论：您可以制作一个更通用的协议来描述委托，而不是使委托特定于控制器：

```
@protocol InfoSelectorDelegate 
- (void)viewController:(UIViewController *)viewController didSelectInfo:(NSDictionary *)info 
@end 
```

然后两个代表都属于以下类型：

```
id<InfoSelectorDelegate> 
```

# javascript - 将字符串（曾经是一个函数）转换回 Javascript 中的函数

> ID：10901217
> 
> 赞同：10
> 
> 时间：2012-06-05T16:33:32.357
> 
> 标签：javascript, jquery

我在下面有这个函数作为字符串。我如何将它转换回函数？我从 JQuery 事件中提取事件处理程序，我想将它们存储为字符串然后将它们转换回来，因为它们将保存在 mySQL

```
function () {

    if (!GActiveClick) {
        return;
    }
    SaveProduct();
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-05T16:35:19.497

```
var func = new Function(theFunctionString);
func(); 
```

[**MDN**](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function)：

> 新函数 ([arg1[, arg2[, ... argN]],] functionBody)
> 
> ***参数***
> 
> **arg1, arg2, ... argN**
> 函数用作形式参数名称的名称。每个都必须是对应于有效 JavaScript 标识符的字符串，或者是用逗号分隔的此类字符串的列表；例如“x”、“theValue”或“a,b”。
> 
> **functionBody**
> 包含构成函数定义的 JavaScript 语句的字符串。

* * *

**更新：**

这一切都是**非常**糟糕的做法！
你应该有一个通用函数来获取构建你想要的参数。唯一改变的是参数。将这些参数存储在您拥有的数据库中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-01-23T00:51:24.337

使用`return`时使用`new Function()`并执行，像这样

```
new Function('return ' + fn_string)(); 
```

例子：

```
function hackerAll(a, b) {
  var result = a*b
  return result
}

class Doggy{
  method1(){
    return 123123*342343
  }
}

var fn_string = hackerAll.toString()
var back_to_fn = new Function(`return ${fn_string}`)() //This restore the function with name, params and all, even es7 class works

var class_string = Doggy.toString()
var back_to_class = new Function(`return ${class_string}`)()

console.log('fn as it', hackerAll)
console.log('fn string', fn_string)
console.log('restored fn', back_to_fn)
console.log('restored class', back_to_class)
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T16:41:22.170

Javascript 为函数提供 new- 关键字

```
var foo = new Function("arg", ... , "<implementation string>"); 
```

例如，请参见此处... [http://www.permadi.com/tutorial/jsFunc/](http://www.permadi.com/tutorial/jsFunc/)

# php - 如何在联系人数据库中设置关系

> ID：10901223
> 
> 赞同：0
> 
> 时间：2012-06-05T16:34:05.047
> 
> 标签：php, mysql

我目前正在着手学习 PHP 和 MySQL 的新事业。过去我使用 Access 做过一些简单的数据库，但这个数据库是一个以 Web 为中心的数据库，用于跟踪包括联系人和项目信息在内的无数数据。我需要以各种关系链接各种表，我不确定最好的方法。由于我刚刚开始使用 PHP/MySQL，因此我正在研究在线资源以尽可能多地学习。如果有人对书籍或网站有建议，我将不胜感激。

在设置我的表格时，我关心的一个主要领域是联系人。我将拥有各种联系人，包括：员工、客户、供应商、分包商等。单个联系人可以是多种类型，每种类型都有与其相关的各种附加字段。我的想法是有一个联系人表，该表可以链接到各种联系人类型的其他表。我不确定哪种字段类型或表格选项的设置最好...想法？

这种情况可能会在数据库的其他领域以及项目和产品中出现。

任何指针/方向将不胜感激。

WES

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T16:56:03.017

I would give a little thought to how you're going to use those extended fields. Certainly create a table for contacts, and you definitely could create a table for each contact type (employees, clients, etc) with a column connecting the record to the contact table (thus employees would have employee_id, contact_id, propertyOne, propertyTwo, etc).

Another *option* though, which may be convenient if your application is contact centric and you really just want to be able to associate different kinds of information with contacts, would be to have a contact table, a table containing the types of extended information (say "contactTypes" and it would have the information that a vendor type has a billing address for example) and a third table to actually hold all the data (name-value pairs). This is a bit more fluid in that it will let you add new types of contacts or add fields to a type without actually altering your schema. The first option (Jason McCreary's) might scale better if you're going to have many, many records...

Regarding resources - there's so much out there, I can't even begin to narrow it down for you - look at the php manual and just google "php mysql tutorial" - tons of stuff.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T16:38:29.480

你熟悉[面向对象设计](http://en.wikipedia.org/wiki/Object-oriented_programming)吗？

在 RDBMS 中，例如 MySQL，我会按如下方式设计数据库：

*   联系人（名字、姓氏等）
    *   雇员
    *   供应商
    *   客户
    *   ETC

*扩展* 的表`Contacts`将保存其特定数据以及`contact_id`创建关系的列。

顺便说一句，[NoSQL](http://en.wikipedia.org/wiki/NoSQL)解决方案本身就解决了这个问题，因为它们没有严格的模式。这意味着您可以为每条记录保存各种数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T17:00:51.833

我推荐的一本对我有很大帮助的书是[Beginning-PHP-MySQL-Novice-Professional](https://rads.stackoverflow.com/amzn/click/com/1590598628)

并确保您观看以下视频，但如果您不了解基础知识，它可能会更高级。[Bbuild-a-login-system-for-a-simple-website/](http://net.tutsplus.com/articles/news/how-to-build-a-login-system-for-a-simple-website/)

对于数据库关系以及介绍，请访问[Coding HORROR](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

我希望这有帮助..

# javascript - 我需要使用“document.getElementById”吗

> ID：10901234
> 
> 赞同：0
> 
> 时间：2012-06-05T16:35:11.800
> 
> 标签：javascript

我仍然没有让这个代码在 ie9 中正常工作。它在 Firefox 中运行正常。我是否必须使用“document.getElementById”才能在 ie9 中工作？如果是这样，它适合放在哪里？

```
function dbasetype(){

var dbasedata = document.forms[0]._dbase_name.value;
        dbasedata = dbasedata.toUpperCase();
        dbasedata = dbasedata.replace(/\s/g, "");

var _area = document.forms[0]._area;        
var _dbase_name = document.forms[0]._dbase_name;

if  (dbasedata.indexOf("UK_CONTACTS")==-1) {
        _area.value = _dbase_name.value;            
     }  else { setarea(); } 
     } 
```

**编辑** 当单击保存按钮时，上面的代码会更新数据库中的一个字段（控制个人的访问）。正如我之前所说，它在 Firefox 中可以正常工作，但是当它在 ie9 中运行时，应该更新并替换为空白的字段，然后用户无法访问联系人记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T16:58:20.720

您的问题是 IE 具有每个 ID 也是全局（只读）对象的愚蠢属性。你只需要像这样在你的 JavaScript 中重命名你的变量：

```
function dbasetype() {
  var dbasedata = document.forms[0]._dbase_name.value;
  dbasedata = dbasedata.toUpperCase().replace(/\s/g, "");

  var x_area = document.forms[0]._area;        
  var x_dbase_name = document.forms[0]._dbase_name;

  if(dbasedata.indexOf("UK_CONTACTS")==-1) {
    x_area.value = x_dbase_name.value;            
  } else {
    setarea();
  } 
} 
```

# oracle - EF EDM Builder Oracle 编号(1, 0) -> Int16/Bool

> ID：10901237
> 
> 赞同：2
> 
> 时间：2012-06-05T16:35:29.197
> 
> 标签：oracle, entity-framework, edmx

我正在将 EF 与 oracle 数据库一起使用。我们在数据库中的一列具有 Number(1,0) 的数据类型。此字段存储在 C# 中转换为 Int16 的数据。Visual Studio 中的实体数据模型 (EDM) 构建器将此列映射为 Bool 默认值。这会导致数据类型错误。我想要做的是将模型生成器配置为始终将 number(1, 0) 设置为 Int16 字段而不是 bool。

我该怎么做。

我还想提一下，当一位开发人员在他的机器上构建这个模型时，它会将它设置为 Int16（短）。当我在我的机器上这样做时，它确实是布尔值。我们无法弄清楚为什么我们中的一个看到的结果与另一个不同。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T19:05:35.403

假设您正在使用 Oracle 的提供程序（又名 ODAC、ODP.NET、ODT）...

您可以将自定义映射部分添加到包含 EDMX（用于设计时）和可执行程序集（用于运行时）的程序集的 app.config 文件中，以更改默认映射。
在此处查看[更多详细信息](https://forums.oracle.com/forums/thread.jspa?threadID=2339638&tstart=0)。

例如

```
<oracle.dataaccess.client>
    <settings>
        <add name="int16" value="edmmapping number(1,0)" />
    </settings>
</oracle.dataaccess.client> 
```

考虑到 number(1,0) 的范围是 -9..9 所以它**并不真正适合 int16**甚至字节（两者都有更大的范围）。

您可以[在此处找到推荐映射列表](https://stackoverflow.com/a/8298684/38368)。

**编辑：**

对于较新的托管提供商的设置，请参阅[我的答案here](https://stackoverflow.com/a/18193544/38368)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-03T14:57:52.423

我遇到过类似的问题。（试图将 number(1) 从默认 bool 映射到 int16）

我在使用 ODP.net 12.1.24 的 oracle11 上使用 EF6 和 VS2013。

最终，我通过将以下部分添加到我的 app.config 来解决它：

```
<oracle.manageddataaccess.client>
  <version number="*">
    <edmMappings>
      <edmNumberMapping>
        <add NETType="int16" MinPrecision="1" MaxPrecision="4" DBType="Number"/>
      </edmNumberMapping>
    </edmMappings>
  </version>
</oracle.manageddataaccess.client> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-05T18:51:10.390

根据这张表：

[http://docs.oracle.com/cd/E11882_01/win.112/e18754/featLINQ.htm](http://docs.oracle.com/cd/E11882_01/win.112/e18754/featLINQ.htm)

Oracle 中的 Nmber(1,0) 是 Int16

但是，根据上述文档：“您可以在 .NET 配置文件中配置自定义映射，以覆盖 Number(p,0) Oracle 数据类型的默认映射。因此，例如 Number(1,0)，其中默认映射到 Int16，可以自定义映射到 .NET Bool 或 .NET Byte 类型。”

查看文档，它显示了配置的外观。

# sql - 具有多个相同值的 IN 是否较慢？

> ID：10901238
> 
> 赞同：2
> 
> 时间：2012-06-05T16:35:29.810
> 
> 标签：sql, sql-server, sql-server-2008-r2

例如，这是否明显变慢：

```
DELETE FROM [table] WHERE [REOID] IN ( 1, 1, 1, 2, 2, 1, 3, 5) 
```

比这个：

```
DELETE FROM [table] WHERE [REOID] IN ( 1, 2, 3, 4) 
```

SQL Server 2008 R2。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T16:39:19.027

`IN`大多数引擎会在解析阶段消除常量列表中的重复项。

这样的查询将比使用非重复列表的查询解析稍慢，将产生相同的计划，并且在大多数实际场景中，您几乎不会注意到任何差异。

# function - Scala：val foo = (arg: Type) => {...} 与 def(arg:Type) = {...}

> ID：10901239
> 
> 赞同：4
> 
> 时间：2012-06-05T16:35:33.207
> 
> 标签：function, scala, runtime, state, immutability

与[此线程相关](https://stackoverflow.com/q/3646756/185840)

我仍然不清楚这两个定义之间的区别：

`val foo = (arg: Type) => {...}`
`def(arg:Type) = {...}`

据我了解：

1）val版本绑定一次，在编译时
创建单个Function1实例
可以作为方法参数传递

2) def 版本在每次调用
创建的每个调用新方法实例上重新绑定。

如果上述情况属实，那么在要执行的操作不依赖于运行时状态的情况下，为什么还要选择 def 版本呢？

例如，在 servlet 环境中，您可能想要获取连接客户端的 IP 地址；在这种情况下，您需要使用 def 作为，当然在编译时没有连接的客户端。

另一方面，您通常在编译时知道要执行的操作，并且可以使用不可变的`val foo = (i: Type) => {...}`

那么根据经验，应该只在存在运行时状态依赖时才使用 defs 吗？

感谢您的澄清

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T16:40:27.507

我并不完全清楚你所说的*运行时状态依赖*是什么意思。`val`s 和s都`def`可以关闭它们的词法范围，因此以这种方式不受限制。那么Scala中的方法（ `def`s）和函数（as s）有什么区别（*之前**[已经问过并回答过](https://stackoverflow.com/questions/2529184/difference-between-method-and-function-in-scala)**）*？`val`

## 你可以参数化一个def

例如：

```
object List {

  def empty[A]: List[A] = Nil     //type parameter alllowed here

  val Empty: List[Nothing] = Nil  //cannot create a type parameter
} 
```

然后我可以打电话：

```
List.empty[Int] 
```

但我将不得不使用：

```
List.Empty: List[Int] 
```

但当然还有其他原因。如：

## def 是 JVM 级别的方法

如果我要使用这段代码：

```
trades filter isEuropean 
```

我可以选择声明`isEuropean`为：

```
val isEuropean = (_ : Trade).country.region = Europe 
```

或者

```
def isEuropean(t: Trade) = t.country.region = Europe 
```

*后者避免在声明点而不是在使用点*创建对象（用于函数实例）。Scala 正在为使用点的方法声明创建一个函数实例。如果我使用了`_`语法，那就更清楚了。

但是，在以下代码中：

```
val b = isEuropean(t) 
```

...如果`isEuropean`被声明为 a `def`，则不会创建这样的对象，因此代码可能会更高效（如果在非常紧凑的循环中使用，其中每一纳秒都具有临界值）

# c++ - Zeromq：如何在 C++ 中访问 tcp 消息

> ID：10901240
> 
> 赞同：16
> 
> 时间：2012-06-05T16:35:34.677
> 
> 标签：c++, tcp, zeromq

我是 ZeroMQ 的新手，并通过 C++ hello-world 示例回显客户端-服务器模式（请求-回复）。服务器看起来像：

```
//
// Hello World server in C++
// Binds REP socket to tcp://*:5555
// Expects "Hello" from client, replies with "World"
//
#include <zmq.hpp>
#include <string>
#include <iostream>
#include <unistd.h>

int main () {
    // Prepare our context and socket
    zmq::context_t context (1);
    zmq::socket_t socket (context, ZMQ_REP);
    socket.bind ("tcp://*:5555");

    while (true) {
        zmq::message_t request;

        // Wait for next request from client
        socket.recv (&request);
        std::cout << "Received Hello" << std::endl;

        // Do some 'work'
        sleep (1);

        // Send reply back to client
        zmq::message_t reply (5);
        memcpy ((void *) reply.data (), "World", 5);
        socket.send (reply);
    }
    return 0;
} 
```

现在我的问题是：如何访问/读取 socket.recv() 的真实数据？试：

```
 std::cout << request << std::endl; 
```

导致错误消息：

```
 error: no match for ‘operator<<’ in ‘std::operator<< [with _Traits = 
 std::char_traits<char>](((std::basic_ostream<char, std::char_traits<char> >&)
 (& std::cout)), ((const char*)"Received Hello")) << request’ 
```

发送消息的客户端也是如此。我找不到显示真实信息的方法...

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-06-10T07:35:35.587

hello world 示例只进行了一半并输出硬编码值：

```
std::cout << "Received Hello" << std::endl; 
```

打印实际响应可以如下完成：

```
zmq::message_t reply;
socket.recv (&reply);

std::string rpl = std::string(static_cast<char*>(reply.data()), reply.size());

std::cout << rpl << std::endl; 
```

zhelpers.hpp 中还有一些其他有用的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T12:18:19.570

我发现以下内容可以满足我的要求：

```
zmq::message_t request (msglen);
memcpy ( (void *) request.data(), myMessage, msglen);
char * requestmsg = new char [msglen];
memcpy (requestmsg, request.data(), request.size());
requestsocket.send (request);
std::cout << "Sending " <<  requestmsg << std::endl; 
```

其中 msglen 是 int 类型，而 myMessage 是 const char * tyoe。以这种方式，服务器接收到人类可读的消息。希望这不违反任何 zeromq 规则......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-28T06:48:16.207

虽然我认为我们需要通过指南才能编写优雅的 ZeroMQ 代码。**我从HELLO WORLD**示例中找到了几行简单的代码，用于提取从套接字接收的数据并发送回响应：

```
 zmq::message_t request;
    socket.recv (&request);
    std::cout << "Received request: [" << (char*) request.data() << "]" << std::endl;
    //  Do some 'work'
    Sleep (1);
    //  Send reply back to client
    zmq::message_t reply (6);
    memcpy ((void *) reply.data (), "World", 6);
    socket.send (reply); 
```

但是，这个解决方案没有指定接收数据的长度，按照上面*Nikolai Koudelia*的方式，我为接收数据创建了一个字符串：

```
 std::cout << "Received request: [" << std::string(static_cast<char*>(request.data()), request.size())  << "]" << std::endl; 
```

# javascript - 使用javascript获取gridview中隐藏列的值

> ID：10901243
> 
> 赞同：0
> 
> 时间：2012-06-05T16:35:52.480
> 
> 标签：javascript, asp.net

我有一个很好用的函数（如下），但现在我需要隐藏“CustomerID”列，它为我提供了 var CustomerID = grid.rows[i].cells[1].innerText; 的值。如果我隐藏此列，该功能将不再有效，但它会获取错误的值。有人能帮忙吗？

隐藏字段是这样的……

```
<asp:TemplateField>
  <ItemTemplate>
    <asp:Label id="lblCustomerId" runat ="server" text='<%# Eval("CustomerID")%>'/>
  </ItemTemplate>
</asp:TemplateField> 
```

功能：

```
function mapSelectedClick() 
{
    var customerIDs = "";
    var grid = document.getElementById('<%=grdCustomers.ClientID %>');
    var count = 0;

    for (var i = 1; i < grid.rows.length; i++)
    {
        var cell = grid.rows[i].cells[0];

        var CustomerID = grid.rows[i].cells[1].innerText;
        for (var j = 0; j < cell.childNodes.length; j++)
        {
            if (cell.childNodes[j].type == "checkbox")
            {
                if (cell.childNodes[j].checked)
                {
                    customerIDs += CustomerID.toString() + ',';
                    count++;
                }
            }
        }
    }

    if (count == 0)
    {
        alert("Please select at least one customer to map.");
        return false;
    }

    customerIDs = customerIDs.substring(0, customerIDs.length-1);
    window.open("MapCustomers.aspx?CustomerIDs=" + customerIDs);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:45:01.943

I think it will be better to add `value="<%# Eval("CustomerID")%>"` to checkbox.

And the use it like:

```
if (cell.childNodes[j].type == "checkbox")
{
    if (cell.childNodes[j].checked)
    {
        customerIDs += cell.childNodes[j].value.toString() + ',';
        count++;
    }
} 
```

Or use the same name for all checkboxes:

```
<input type="checkbox" name="CheckedCustomers" value="1" />
<input type="checkbox" name="CheckedCustomers" value="3" /> 
```

In js:

```
var checkedCustomers = document.getElementsByName("CheckedCustomers");
var customerIds = [];
for (var i = 0; i < checkedCustomers.lenght; i++)
{
    if(checkedCustomers[i].type === 'checkbox' && checkedCustomers[i].checked)
        customerIds.push(checkedCustomers[i].value);
}
var result = customerIds.join(','); 
```

# python - Django过滤器错误

> ID：10901247
> 
> 赞同：0
> 
> 时间：2012-06-05T16:36:04.963
> 
> 标签：python, django

我想在我的 django 应用程序中保存和过滤用户对象。输入以下代码后，图像字段不断给我一个验证错误，说：

```
 This field is required. 
```

它指向我应该填充它的图像域。如何摆脱该错误并使其过滤？

楷模

```
 class Fin(models.Model):
         user=models.ForeignKey(User)
         title=models.CharField(max_length=250)
         main_view=models.ImageField(upload_to="photos")
         side_view=models.ImageField(upload_to="photos")
         address=models.CharField(max_length=200)
         city=models.CharField(max_length=200)
         state=models.CharField(max_length=200)
         guideline=models.TextField(max_length=1000)

         def __unicode__(self):
              return self.title

        def get_absolute_url(self):
            return self.title

    class FinForm(ModelForm):
        class Meta:
           model=Fin
           fields=('title','main_view','side_view', 'address','city','state','guideline')
           exclude=('user') 
```

意见

```
 def fincrib(request):
            extra_data_context={}
             #if there's nothing in the field do nothing.
            if request. method=="POST":
               form =FinForm(request.POST)
               if form.is_valid():
                  data=form.cleaned_data
                  newfincribs=Fin(
                     user= request.user,
                     title=data['title'],
                     main_view=Fin.objects.latest['main_view'],
                     side_view=Fin.objects.latest['side_view'],
                     address=data['address'],
                     city=data['city'],
                     state=data['state'],
                     guideline=data['guideline'])
                 newfincribs.save()
              extra_data_context.update({'FinForm':form})
        else:
            form = FinForm()
            extra_data_context.update({'FinForm':form})
        extra_data_context.update({'Fins':Fin.objects.filter(user=request.user)})

        plan=Fin.objects.filter(user=request.user)
        paginator=Paginator(plan, 5)

        try:
          page=request.GET.get('page', '1')
        except ValueError:
          page=1

        try:
          Fins=paginator.page(page)
        except (EmptyPage, InvalidPage):
          Fins=paginator.page(paginator.num_pages)
       extra_data_context.update({'Fins': Fins})
       return render_to_response('post.html',extra_data_context,context_instance=RequestContext(request)) 
```

模板

```
 {% block content %}
          <form action="." method="POST">
               {% csrf_token %}
       <center> {{FinForm.as_p}}  </center>
           <input type="submit" value="Submit"/>
           </form>

          {% for Fin in Fins.object_list %}
           <tr>
            <a href="{% url profiles_edit_profile %}"> {{Fin.user}} </a> </p> </strong>
             <p>{{Fin.title}}</p>
             <p><img src="{{MEDIA_URL}}/{{Fin.main_view}}"/></p>
             <p> <img src="{{MEDIA_URL}}/{{Fin.side_view}}"/></p>
             <p> {{Fin.address}} </p>
             <p> {{Fin.city}}</p>
              <p> {{Fin.state}}</p>
              <p> {{Fin.guideline}}</p>
            {% endfor %}

     <div class="pagination">
       <span class="step-links">
           {% if Fins.has_previous %}
              <a href="?page={{ Fins.previous_page_number }}">previous</a>
           {% endif %}

    <span class="current">
      Page {{ Fins.number }} of {{ Fins.paginator.num_pages }}
    </span>

         {% if Fins.has_next %}
             <a href="?page={{ Fins.next_page_number }}">next</a>
         {% endif %}
       </span>
      </div>
     {% endblock %} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T16:47:12.967

这是因为默认情况下所有模型字段都是必需的，这意味着如果要在数据库中创建和保存新模型实例，则应填写所有必填字段。也许

```
main_view=Fin.objects.latest['main_view'],
side_view=Fin.objects.latest['side_view'], 
```

给你错误，因为没有数据。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-05T16:42:31.530

**改变**

```
main_view=models.ImageField(upload_to="photos")
side_view=models.ImageField(upload_to="photos") 
```

**到**

```
main_view=models.ImageField(upload_to="photos", blank=True, null=True)
side_view=models.ImageField(upload_to="photos", blank=True, null=True) 
```

顺便说一句，我不确定您使用的是哪个 django 版本，但您的代码相当混乱，您有什么理由不使用 CBV 和静态标签？

# python - 套接字：在 python 中使用一台机器/NIC 模拟多个客户端

> ID：10901249
> 
> 赞同：4
> 
> 时间：2012-06-05T16:36:10.620
> 
> 标签：python, sockets, client-side

我正在尝试编写一个 python 程序，该程序将产生多个客户端与网络上的一台服务器通信。我的问题是我需要做什么来为每个客户端模拟不同的 IP 地址？

我现在正在使用带有 Python 2.6 的 MAC OSX Lion。

我已经开发了可以接受多个套接字的服务器端。我想避免为每个客户配备一台机器。对于新手的任何提示/提示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-08-10T05:39:36.367

即使这是一个老问题，它仍然出现在谷歌......

如前所述，基本上它将采用接收连接的IP并分配下一个可用端口......所以使用标准套接字......你最终会得到一堆来自同一个IP的不同端口的连接。

就我个人而言，创建一个将生成所需数量的客户端的客户端脚本更容易（我正在使用来自单个 python 脚本的 1000 多个客户端）..

生成客户端后，让脚本为每个客户端生成一个 IP。如果您正确处理连接对象。您可以随时参考您想要的客户端。

所以最后，你的所有客户端都来自同一台机器或网络上的另一台机器，但你只是有一个随机/生成的 IP 地址的变量，你可以用它来测试.. 使用生成的 IP 只需要几行地址作为对您的套接字对象的引用。

* * *

如果您想使用特定于 IP 的东西，例如只允许来自特定子网的连接。只需在连接时生成假 IP 地址并像使用真实 IP 地址一样使用它。

如果您只想拥有多个客户端，则根本不需要生成 IP 地址，因为一切都是不同的端口。

* * *

提取示例目的：

```
for i in xrange(1, self.iCount + 1):
    if len(self.objClients) >= self.iCount:
        break

    #Generate a uid ... sID = xxxxxx+i
    if sID not in self.objClients:
        oPosData = []
        self.objClients[i] = {"id":sID, "current":0, "connected":True}

for oT in self.objClients:
    try:
        self.objClients[oT]['socket'] = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        self.objClients[oT]['socket'].connect((self.ServerIP, self.ServerPort))
        self.objClients[oT]['timer'] = time.time() + randint(0, 10) 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-05T20:25:05.307

[http://docs.python.org/library/socket.html#socket.create_connection](http://docs.python.org/library/socket.html#socket.create_connection)

> 如果提供，source_address 必须是一个 2 元组`(host, port)`，以便套接字在连接之前绑定到它的源地址。

我认为应该这样做。

# language-agnostic - 如何自动检测服务器？

> ID：10901250
> 
> 赞同：3
> 
> 时间：2012-06-05T16:36:18.717
> 
> 标签：language-agnostic, client-server, service-discovery

我们开发了一个客户端应用程序和一个服务器应用程序。客户端使用http协议与服务器通信，并发送一些数据供服务器处理。

我们的结构允许我们将服务器安装在任何地方。我可以在同一个客户端网络上，甚至在云上。

当服务器托管在云上时，向用户询问服务器地址是有意义的（因为如果用户愿意，它可以更改），但当服务器与客户端位于同一网络上时则没有意义。除此之外，我们目前要求用户配置服务器 ip/name 以连接到服务器。

为了避免这种情况（向用户询问地址），我开发了一个基于 UDP 的发现服务。客户端广播一条消息，服务器用它的地址来回答。它在某些情况下确实有效，但当用户有某种防火墙、代理甚至防病毒时，它就不起作用了。

我已经阅读了很多关于发现服务的内容，其中最喜欢的是[Bonjour](http://en.wikipedia.org/wiki/Bonjour_%28software%29)。

所以，问题是：当服务器与客户端位于同一网络上而不会被防火墙、代理等阻止时，发现服务器 IP 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T16:20:17.687

[您可以将您的服务完全保持在本地（在 Intranet 中），并通过实施打孔](http://en.wikipedia.org/wiki/UDP_hole_punching)建立在您现在使用的服务之上。您可以通过防火墙，但我真的不确定 AV 软件策略。

或者您可以在 Internet 上建立一个著名的基于 http 的发现服务。

1.  服务器启动，将其（本地）IP 地址发送到发现服务（不断发送保持活动状态）
2.  启动时，客户端查询该发现服务，识别他所在的本地子网，并取回服务器的本地 IP 地址。

这当然会在您的系统中产生单点故障，因为如果发现服务踢了桶，您的客户端将无法找到服务器。您可以通过复制服务和/或引入后备机制（例如您拥有的纯本地发现）来解决此问题，无论如何您都可能想要这样做。您可能遇到的唯一问题是子网标识，如果本地子网中的计算机不共享外部 IP 地址（那么这取决于您的本地子网是什么）。

# asp.net - about:blank 的页面显示不安全的内容

> ID：10901253
> 
> 赞同：4
> 
> 时间：2012-06-05T16:36:32.287
> 
> 标签：asp.net, html, google-chrome, https

尝试通过 https 访问我的网页时，chrome 浏览器收到以下警告和错误。

**警告：** about:blank 页面显示来自[http://subdomain.name.dns-stuff.com/go.php?sid=mix](http://subdomain.name.dns-stuff.com/go.php?sid=mix)的不安全内容。

**错误：**加载资源失败：服务器响应状态为 404（未找到）

我应该开始担心吗？我如何才能找到这些不安全内容的来源？

**更新：**恶意 IFRAME 可以从网页中获取内容，这些网页试图指纹识别并利用浏览器漏洞或客户端/操作系统漏洞来导致驱动下载。此类 IFRAME 通常对用户是不可见的。

[http://wam.dasient.com/wam/infection_library/917395c589f265fd940fc7cc9b0df341/dns-stuff](http://wam.dasient.com/wam/infection_library/917395c589f265fd940fc7cc9b0df341/dns-stuff)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T11:17:42.883

在联系了我的托管服务提供商后，他们设法发现该网页已被感染。实际上 jquery.js 的一部分被感染了。

得到教训。

1.  切勿从网络的任何地方下载 jquery 库（或任何东西），官方的除外。
2.  通过指向官方网站的链接了解最新版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T16:46:56.017

[404 或 Not Found 错误消息](http://en.wikipedia.org/wiki/404_error)是一个 HTTP 标准响应代码，表示客户端能够与服务器通信，但服务器找不到请求的内容。

因此，当您尝试访问[http://www.dns-stuff.com](http://www.dns-stuff.com)时，您会看到该域是活动的并返回内容，但是当您尝试[http://www.dns-stuff.com/go.php?sid= mix](http://www.dns-stuff.com/go.php?sid=mix)你会看到 404 错误，这意味着内容应该通过调用**"go.php?sid=mix"**返回，不可用并且错误 404 显示此消息。因此，您只需要知道服务器仍在响应时内容丢失即可。

编辑：

根据[Google](http://royal.pingdom.com/2009/05/06/the-5-most-common-http-errors-according-to-google/)错误 404 是第二个最常发生的错误！

# java - 蚂蚁” 我在 ant 脚本中有简单的用户输入元素（从 maven antrun 插件运行）：  这 问问题 问问题 2012-06-05T16:36:35.043 293 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我在 ant 脚本中有简单的用户输入元素（从 maven antrun 插件运行）：  这在 Windows 上运行良好：进程停止，直到y or n在命令行中输入。但是当它在 linux prod 框中运行时 - 输入 y/n 后什么也没有发生：脚本（ant 进程）挂起，直到ctrl+C 我发现了一些关于它的邮件问题，没有别的。 到目前为止，它是蚂蚁虫吗？有人可以复制吗？谢谢！ insert into mytable (columns) select somevalue, somevalue, a.id, b.id, c.id from othertable1 a cross join othertable2 b cross join othertable3 c where a ... condition b ... condition c ... condition javamavenantuser-input 4 1 回答 1 This answer is useful 2 在我的 linux 桌面（RHEL 5）上工作正常，下面的虚拟代码片段使用maven-3.0.4并java 1.6.0_32从bashshell 运行。 <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemalocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"> <modelversion>4.0.0</modelversion> <artifactid>dummy</artifactid> <groupid>com.dummy</groupid> <version>1.0-SNAPSHOT</version> <name>Dummy</name> <url>http://www.dummy.com</url> <build> <plugins> <plugin> <artifactid>maven-antrun-plugin</artifactid> <version>1.7</version> <executions> <execution> <phase>generate-sources</phase> <configuration> <target>  </target> </configuration> <goals> <goal>run</goal> </goals> </execution> </executions> </plugin> </plugins> </build> </project> 于 2012-06-06T04:34:48.650 回答 Related 1 oracle - 创建调度程序作业以每年运行一次 0 facebook - facebook分享订阅的自定义布局 0 php - XML Parsing 用于删除嵌入的 HTML 标记，如 b、i 和 Array 1 c++ - 在 MFC 中的特定行上的列表控件上插入项目 1 c# - 通过 MapServer 显示 GeoReferencing 图像 3 php - 使用正则表达式从内容中删除 HTML 注释 2 android - 我的代码不会将字符串的值与整数相乘 1 html - 刷新 div 而不更改其内容 1 linux - 如何使用 perl 在邮件探测中更改 ip 0 qt - /usr/local/qt463/qt/include/QtCore/qmap.h:108：错误：'key1 < key2'中的'operator<'不匹配 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：10901254
> 
> 赞同：1
> 
> 时间：
> 
> 标签：java, maven, ant, user-input

我在 ant 脚本中有简单的用户输入元素（从 maven antrun 插件运行）：

```
<input addproperty="myprop" validargs="y,n" defaultvalue="y"> 
```

这在 Windows 上运行良好：进程停止，直到`y or n`在命令行中输入。但是当它在 linux prod 框中运行时 - 输入 y/n 后什么也没有发生：脚本（ant 进程）挂起，直到`ctrl+C`

我发现了一些[关于它的邮件问题](http://mail-archives.apache.org/mod_mbox/ant-user/200710.mbox/%3C470B486D.3070709@apache.org%3E)，没有别的。

到目前为止，它是蚂蚁虫吗？有人可以复制吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T04:34:48.650

在我的 linux 桌面（RHEL 5）上工作正常，下面的虚拟代码片段使用`maven-3.0.4`并`java 1.6.0_32`从`bash`shell 运行。

```
<project xmlns="http://maven.apache.org/POM/4.0.0" 
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
                             http://maven.apache.org/xsd/maven-4.0.0.xsd">

    <modelVersion>4.0.0</modelVersion>
    <artifactId>dummy</artifactId>
    <groupId>com.dummy</groupId>
    <version>1.0-SNAPSHOT</version>

    <name>Dummy</name>
    <url>http://www.dummy.com</url>

    <build>
        <plugins>
            <plugin>
                <artifactId>maven-antrun-plugin</artifactId>
                <version>1.7</version>
                <executions>
                  <execution>
                    <phase>generate-sources</phase>
                    <configuration>
                      <target>
                          <input addproperty="myprop" validargs="y,n" defaultvalue="y"/>
                          <echo message="${myprop}"/>
                      </target>
                    </configuration>
                    <goals>
                      <goal>run</goal>
                    </goals>
                  </execution>
                </executions>
          </plugin>
        </plugins>
    </build>
</project> 
```

# magento - Magento 移动搜索结果

> ID：10901258
> 
> 赞同：0
> 
> 时间：2012-06-05T16:36:44.177
> 
> 标签：magento

出于某种原因，当有人在我的网站上执行搜索时，搜索结果不会显示在搜索框下方，而是显示在屏幕的最左侧。

关于将在哪个文件中配置的任何想法？

让我纠正一下，这不是搜索结果，而是搜索建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T22:26:21.080

我无法为您的问题提供直接解决方案，但打开模板提示可能会为您指明正确的方向。在管理员中，转到系统 > 配置，从左上角的范围下拉列表中选择您的商店视图。除非您正在运行多商店，或者更改了默认商店的名称，否则它将被称为“默认商店视图”。然后向下滚动到“开发人员”并打开“调试”部分。打开“模板路径提示”和“将块名称添加到提示”。这将在布局中的每个模板周围添加一个带有红色边框的 div 和一个包含模板名称的标题。它可能会完全搞砸你的页面布局，但会显示哪个模板生成了页面上的每个标签并帮助您跟踪问题。

[DeveloperToolbar](http://www.magentocommerce.com/magento-connect/MageWorld/extension/2271/mw_developertoolbar)扩展使快速打开/关闭此功能变得更加容易，但我不建议将其部署到生产站点 。

Alan Storm 不可或缺的[CommerceBug](http://store.pulsestorm.net/products/commerce-bug)是另一个非常方便跟踪前端问题的工具。CommerdeBug 可以向您显示用于生成当前页面的布局句柄和聚合布局 XML。这两者都有助于确定为什么包含（或不包含）特定块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:36:36.683

因此，如果其他人遇到此问题或想要移动他们的搜索建议显示的位置，则它位于 .searchautocomplete 下的 styles.css 中。

# java - Java重载规则

> ID：10901259
> 
> 赞同：5
> 
> 时间：2012-06-05T16:36:49.203
> 
> 标签：java, overloading

我最近遇到了两个重载问题，我找不到答案，也没有 java 环境来运行一些测试代码。我希望有人可以通过汇编Java编译器遵循的所有规则列表来帮助我重载或交替将我指向一个已经存在的列表。

首先，当两个方法的区别仅在于最终的可变参数参数时，在什么情况下会调用每个方法，您可以在没有任何参数的情况下调用可变参数方法吗？

```
private void f(int a) { /* ... */ }
private void f(int a, int... b) { /* ... */ }

f(12); // calls the former? I would expect it to
f(12, (int[])null); // calls latter, but passes null for b? 
  // Can I force the compiler to call the second method in the same fashion
  // as would happen if the first method didn't exist? 
```

第二个问题，当两种方法因从彼此继承的类型不同而被调用时？我希望调用最衍生的版本，并允许调用另一个版本。

```
interface A {}
class B implements A {}
class C implements A {}

private void f(A a) {}
private void f(B b) {}

f(new C()); // calls the first method
f(new B()); // calls the second method?
f((A)(new B()); // calls the first method using a B object? 
```

这是两个示例，但作为代码阅读器，我更喜欢用于解决此问题的确切有序规则的规范列表，因为我经常没有时间设置构建环境来检查编译器在做什么。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-05T16:43:47.310

**重载与覆盖**

正如您所指出的，选择*正确的方法实现是在运行时完成的，现在要调用的方法的签名是在编译时决定的。*

**在编译时重载方法选择**

[第 15.12 节方法调用表达式](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12)中的[Java 语言规范](http://docs.oracle.com/javase/specs/)(JLS)详细解释了编译器选择要调用的正确方法所遵循的过程。

在那里，您会注意到这是一个*编译时*任务。JLS 在第 15.12.2 小节中说：

> 此步骤使用**方法的名称**和**参数表达式的类型** 来定位可访问和适用的方法。可能有多个这样的方法，在这种情况下选择最具体的一个。

通常，如果可变参数方法与其他候选方法竞争，它们是最后选择的，因为它们被认为不如接收相同参数类型的方法具体。

要验证它的编译时性质，您可以进行以下测试。

像这样声明一个类并编译它（即`javac ChooseMethod.java`）。

```
public class ChooseMethod {
   public void doSomething(Number n){
    System.out.println("Number");
   }
} 
```

声明第二个类，它调用第一个类的方法并编译它（即`javac MethodChooser.java`）。

```
public class MethodChooser {
   public static void main(String[] args) {
    ChooseMethod m = new ChooseMethod();
    m.doSomething(10);
   }
} 
```

如果您运行程序（即`java MethodChooser`），输出会显示`Number`。

现在，向该类添加第二个更具体的*重载*方法`ChooseMethod`，并重新编译它（但不要重新编译其他类）。

```
public void doSomething(Integer i) {
 System.out.println("Integer");
} 
```

如果再次运行 main，输出仍然是`Number`.

基本上，因为它是在编译时决定的。如果您重新编译`MethodChooser`该类（带有 main 的类），并再次运行该程序，输出将是`Integer`.

因此，如果要强制选择重载方法之一，则参数的类型必须与编译时的参数类型相对应，而不仅仅是在运行时。

**在运行时覆盖方法选择**

同样，方法的签名是在编译时决定的，但实际的实现是在运行时决定的。

像这样声明一个类并编译它。

```
public class ChooseMethodA {
   public void doSomething(Number n){
    System.out.println("Number A");
   }
} 
```

然后声明第二个扩展类并编译：

```
public class ChooseMethodB extends ChooseMethodA {  } 
```

在 MethodChooser 类中，您可以：

```
public class MethodChooser {
    public static void main(String[] args) {
        ChooseMethodA m = new ChooseMethodB();
        m.doSomething(10);
    }
} 
```

如果你运行它，你会得到输出`Number A`，这没关系，因为该方法没有被覆盖`ChooseMethodB`，因此被调用的实现是`ChooseMethodA`.

现在，添加一个覆盖的方法`MethodChooserB`：

```
public void doSomething(Number n){
    System.out.println("Number B");
} 
```

然后重新编译这个，然后再次运行 main 方法。

现在，你得到了输出`Number B`

因此，实现是在运行时选择的，不需要重新编译`MethodChooser`类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T16:46:13.180

First question:

Your assumption is correct. The second call to `f()` will call the varargs method. You can get the compiler to call the second method with:

```
private void f(int a) {
    f(a, null);
} 
```

Second question:

Yes. However, you can't extend an interface. If you change `A` to an abstract class, things will compile.

# javascript - Ajax 表单提交进度功能失败？

> ID：10901262
> 
> 赞同：1
> 
> 时间：2012-06-05T16:37:05.130
> 
> 标签：javascript, jquery, ajax, forms

我正在通过 ajax 提交表单并尝试在上传时更新一个简单的进度条。表单提交工作完美，但我无法让进度条更新甚至请求当前加载的金额。

```
<form enctype="multipart/form-data">          
    <input name="file" type="file" />
    <button>Update Account</button>
</form>
<progress value="0" max="100"></progress> 
```

**jQuery + Ajax**

```
$(document).on("submit", "form", function(){

    var formData = new FormData($('form')[0]);

    $.ajax({
        url: window.location.pathname,
        type: 'POST',
        xhr: function() {
            myXhr = $.ajaxSettings.xhr();
            if(myXhr.upload){
                myXhr.upload.addEventListener('progress', progressHandlingFunction, false);
            }
            return myXhr;
        },
        async:false,
        data: formData,
        cache: false,
        contentType: false,
        processData: false
    });
}); 
```

提交表单后，应运行`addEventListener`此函数以更新进度：

```
function progressHandlingFunction(e){
    if(e.lengthComputable){
        $("progress").attr('value', e.loaded);
        $("progress").attr('max', e.total);
    }
} 
```

但是里面的任何功能`myXhr.upload.addEventListener();`似乎都没有运行？

```
myXhr.upload.addEventListener('progress', alert("test"),  false); 
```

工作正常，但以下不运行，为什么会发生这种情况？：

```
myXhr.upload.addEventListener('progress', function(){alert("test")},  false); 
```

此示例使用类似的编码：

[http://www.matlus.com/html5-file-upload-with-progress/](http://www.matlus.com/html5-file-upload-with-progress/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T16:40:18.467

```
$(document).live("submit", "form", function(){ 
```

应该：

```
$(document).on("submit", "form", function(){ 
```

甚至更好：

```
$("#static-container-Id").on("submit", "form", function(){ 
```

如果你想使用`live`(jQuery < 1.4.4)

```
$("form").live("submit", function(){ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T17:55:23.190

问题是：

```
async:false, 
```

删除它解决了问题。

# session - 神秘的 HttpSession 和 session-config 依赖

> ID：10901269
> 
> 赞同：0
> 
> 时间：2012-06-05T16:37:33.987
> 
> 标签：session, jakarta-ee, ssl

再会。我正在使用 Tomcat 7.0 开发带有 Servlets\JSP 的 Java Web 应用程序。在来自客户端的请求期间，我将对象放入会话并使用转发。在转发处理相同的请求之后，如果安全参数为假，则可以检索对象，否则不存储在会话中。

```
 <session-config>
        <session-timeout>15</session-timeout>
        <cookie-config>
            <http-only>true</http-only>
            <secure>true</secure>
        </cookie-config>
        <tracking-mode>COOKIE</tracking-mode>
    </session-config> 
```

我发现“...cookies 可以使用 'secure' 标志创建，它确保浏览器永远不会通过非 SSL 传输指定的 cookie...”。我已将 Tomcat 配置为使用 SSL，但这并没有帮助。将跟踪模式更改为 SSL 也没有帮助。在这种情况下 session-config 和 HttpSession 对象如何关联？可能是什么问题呢？

# javascript - 延迟执行相对于谷歌地图/geoxml3 解析器的 Javascript 函数？

> ID：10901276
> 
> 赞同：0
> 
> 时间：2012-06-05T16:38:01.803
> 
> 标签：javascript, html, google-maps, google-maps-api-3, onload

我正在使用我们自己的瓷砖叠加层和 KML 元素在网站上实施 Google 地图。我之前被要求创建代码，例如，当从特定 URL 加载页面时，它将使用已启用的图块叠加层之一进行初始化。最近，有人要求我对由 KML 元素勾勒出的建筑物执行相同的操作，以便在到达具有特定 URL 的页面时，它会自动缩放、居中并显示建筑物的信息。

但是，虽然从瓦片覆盖开始工作，但构建 KML 却没有。在做了一些测试之后，我确定当检查 URL 的代码执行时，页面仍在加载 KML 元素，因此不存在用于比较或使用的代码：

**评估 URL 的代码**（放在 onLoad="initialize()" 的末尾）

```
function urlClick() {
    var currentURL = window.location.href; //Retrieve page URL
    var URLpiece = currentURL.slice(-6);   //pull the last 6 digits (for testing)
    if (URLpiece === "access") {           //If the resulting string is "access":
        access_click();                      //Display accessibility overlay
    } else if (URLpiece === "middle") {    //Else if the string is "middle":
        facetClick('Middle College');        //Click on building "Middle College"
    };
}; 
```

**刻面点击（）；**

```
function facetClick(name) {  //Convert building name to building ID.
    for (var i = 0; i < active.placemarks.length; i++) {
        if (active.placemarks[i].name === name) {
            sideClick(i)     //Click building whose id matches "Middle College"
        };
    };
}; 
```

**Firebug 控制台错误**

```
active is null
for (var i = 0; i < active.placemarks.length; i++) { 
```

active.placemarks 是页面上加载了哪些 KML 元素，为 null 表示尚未加载 KML。简而言之，我的时机不对，在 KMl 加载后，我似乎找不到合适的位置来放置要执行的 URL 代码。如上所述，我将它放在 onLoad="initialize()" 的末尾，但似乎不是等待 KML 在函数中更早地完全加载，而是执行函数的其余部分：

**onLoad="初始化()"**

```
information();   //Use the buttons variables inital state to set up description
buttons();       //and button state
button_hover(0); //and button description to neutral.

//Create and arrange the Google Map.

//Create basic tile overlays.

//Set up parser to work with KML elements.
myParser = new geoXML3.parser({ //Parser: Takes KML and converts to JS.
    map: map,                   //Applies parsed KML to the map
    singleInfoWindow: true,
    afterParse: useTheData      //Allows us to use the parsed KML in a function
});
myParser.parse(['/maps/kml/shapes.kml','/maps/kml/shapes_hidden.kml']);
google.maps.event.addListener(map, 'maptypeid_changed', function() {
    autoOverlay();
});

//Create other tile overlays to appear over KML elements.

urlClick(); 
```

我怀疑我的问题之一在于使用将我们的 KML 文件转换为 Javascript的 geoxml3 解析器 ( [http://code.google.com/p/geoxml3/ )。](http://code.google.com/p/geoxml3/)虽然页面已完成所有元素的加载，但页面上的地图仍在加载，包括 KML 元素。我还尝试将 urlClick() 放置在解析器本身的各个位置，这些位置似乎在解析所有形状后执行，但我在那里也没有成功。

虽然我一直打算去掉解析器，但我想知道在解析器返回 KML 形状后是否有任何方法可以执行“urlClick”。理想情况下，我不想使用任意方式定义等待时间，例如“等待 3 秒，然后继续”，因为我的各种浏览器都在不同时间加载页面；相反，我正在寻找某种方式来表达“当解析器完成时，执行”或“当谷歌地图完全加载时，执行”，甚至可能是“在推进到 urlClick 之前保持直到解析器完成”。

* * *

**编辑：**这里是地图的链接，上面找到了问题的基本形式。由于我一直在测试服务器上开发地图的下一个更新，因此 facetClick() 不是此实时版本的一部分，而是使用它的输出函数 sideClick(); 但是在这种安排中错误仍然相同：

```
active is null
google.maps.event.trigger(active.gpolygons[poly],'click'); 
```

地图：[http ://www.beloit.edu/maps/](http://www.beloit.edu/maps/)

带有可访问性的地图：[http ://www.beloit.edu/maps/?access](http://www.beloit.edu/maps/?access)

带有建筑的地图点击：[http ://www.beloit.edu/maps/?middle](http://www.beloit.edu/maps/?middle)

* * *

**编辑**：我一天中的大部分时间都在用 Javascript 重建解析器的功能，而且，低而看，没有解析器它工作得很好。我认为这很明显，因为我必须在代码之前单独定义每个形状，而不是等待解析器传递它。答案似乎是“如果您想要唯一的 URL，请删除解析器”。>_<

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:51:51.647

在处理执行函数之前等待标记和 infoWindows 加载时，我遇到了类似的问题。我在这里找到了一个解决方案（[如何检查 Google 地图是否已满载？](https://stackoverflow.com/questions/832692/how-to-check-if-google-maps-is-fully-loaded)请参阅@Veseliq 的答案），使用 google maps 事件侦听器函数检查地图何时“空闲”，可以解决问题。我认为这个解决方案也适用于 KML 图层。本质上，您要做的是在初始化函数的末尾包含以下内容：

```
google.maps.event.addListenerOnce(map, 'idle', function(){
    // do something only the first time the map is loaded
}); 
```

在 API 参考 ( [https://developers.google.com/maps/documentation/javascript/reference](https://developers.google.com/maps/documentation/javascript/reference) ) 中，它声明 'idle' 事件“在地图在平移或缩放后变为空闲时触发”。但是，在 map_canvas 中的所有内容加载后，它也会在初始页面加载时触发，这似乎是正确的。通过使用该`addListenerOnce`调用，您可以确保在初始页面加载后不再执行它（这意味着它不会在缩放或平移操作后触发）。

* * *

第二种选择：
正如我提到的，您可以采用回调方法，我相信这只会在完成解析后调用您的 urlClick 函数。以下是您应该如何安排代码以使其工作：

```
function someFunction(callback){
    myParser.parse(['/maps/kml/shapes.kml','/maps/kml/shapes_hidden.kml']);
    callback();
} 
```

然后在您的初始化中，您将拥有：

```
someFunction(function(){
    urlClick();
}); 
```

您必须使您的`map`和`myParser`变量成为全局变量。

资源：此链接对回调函数如何在 javascript 中工作进行了出色而详细的简要介绍，[http://www.impressivewebs.com/callback-functions-javascript/](http://www.impressivewebs.com/callback-functions-javascript/)

# javascript - 为什么将全局范围内的变量分配给窗口对象？

> ID：10901284
> 
> 赞同：3
> 
> 时间：2012-06-05T16:38:28.310
> 
> 标签：javascript

```
var foo = 'bar';
console.log(window.foo); // bar 
```

似乎变量作为属性分配给`this`，但在匿名函数内部，`this`是指父范围，但不将变量分配给父范围。

```
function() {
    var foo = 'bar';
}();

window.foo; // undefined 
```

**变量在非全局范围内分配给什么对象？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T16:44:51.587

To cite [http://perfectionkills.com/understanding-delete/#execution_context](http://perfectionkills.com/understanding-delete/#execution_context):

> Every execution context has a so-called `Variable Object` associated with it. Similarly to execution context, Variable object is an abstract entity, a mechanism to describe variable instantiation. Now, the interesing part is that variables and functions declared in a source text are actually *added as properties of this Variable object*.
> 
> When control enters execution context for Global code, a `Global object` is used as a `Variable object`. This is precisely why variables or functions declared globally become properties of a `Global object`

Yet, these `Variable Object`s are not accessible. The only non-internal one is the global object, `window` or `this` (in global context).

The relevant section in the specification is [#10: Executable Code and Execution Contexts](http://es5.github.com/#x10).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T16:42:31.227

在 JavaScript 中，所有变量都分配给某个范围对象。但是，在浏览器中的 JavaScript 中只能通过对象访问全局变量的作用域`window`对象。函数作用域中的变量被分配给 JavaScript 运行时内部使用的某个作用域对象，但用户无法访问。

在另一个环境中，全局变量可以作为另一个对象的属性来访问（例如`GLOBAL`在[node.js](http://nodejs.org/)中），或者可能是不可访问的（例如在 Windows 脚本宿主中运行的应用程序脚本）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T16:40:13.987

它们仅在声明它们的函数中可用。

函数作用域是 JavaScript 中唯一的其他作用域，顺便说一句，与其他`{}`语言中的块作用域不同。）

*回复：你的编辑*不要被愚弄`this`——JS 的语义在 IMO 中有点令人讨厌——`this`在各种情况下可能不是你所期望的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T16:40:32.780

内部自调用匿名函数，例如：

```
function() {
    ....
}() 
```

所有变量都保留在其中，并且不会将自己附加到全局对象或`window`. 使用该技术，可以创建诸如[模块/单例模式之类的模式](http://addyosmani.com/resources/essentialjsdesignpatterns/book/)。

请注意，在 JS 中，变量具有**函数级**范围。

# objective-c - 当 Scollview 的子视图时 UITableView 不填充

> ID：10901290
> 
> 赞同：0
> 
> 时间：2012-06-05T16:38:45.807
> 
> 标签：objective-c, ios, uitableview, ios5, uiscrollview

更多背景知识：XIB 有 a`UITableView`作为 a 的子视图`UIScrollView`， the`UIScrollView`是 a 的子视图`UIView`。当它是`UIScrollView`. 我是 iOS 初学者。所以任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T17:31:22.363

检查您是否在方法中返回非零值`tableView:numberOfRowsInSection`。检查您是否正在做某事`tableView:cellForRowAtIndexPath`（您应该创建并填写一些信息）。顺便说一句，你实施了吗？

> 对于我缺乏理解，“在主 tableView 中”是什么意思表示歉意。

在`UITableViewController`你有一个`UITableView`是这个 VC 的主要视图（`self.view`和`self.tableView`属性）。所以它会`[self.tableView reloadData]`自动调用。如果您要添加其他`UITableView`s 或将它们放入`UIViewController`您应该自己调用此方法在`viewDidLoad`.

# magento - Magento 以编程方式编辑订单付款

> ID：10901291
> 
> 赞同：0
> 
> 时间：2012-06-05T16:38:53.060
> 
> 标签：magento

我需要在下订单后更改付款方式。我有订单 ID ($orderID)、订单对象 ($order)、适当的付款对象等。

$service->retrievePaymentType() 以 Mage_Sales_Model_Order_Payment 的形式返回付款

所有这些都发生在 Mage_Checkout_Model_Type_Onepage 的扩展中

有人知道我会怎么做吗？

```
 $order = Mage::getModel('sales/order')->load($orderID);

    $service = Mage::getModel('sales/service_quote', $this->getQuote());

    // Update Saved Order Payment Method

    // $order->getPaymentsCollection()->clear();

    $order->setPayment($service->retrievePaymentType());

    $order->getPaymentsCollection()->save();

    $order->save(); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:35:08.720

不幸的是，我必须直接执行 SQL 查询，这不是 Magento 规范，但它可以完成工作。如果有人想要代码，请给我留言，我会挖掘它。

不过谢谢！

**编辑：**

事实上，我设法让这个与 Magento API 一起工作：

```
 // The payment type I want to change the target order to
    $service = Mage::getModel('sales/service_quote', $this->getQuote()); 

    $payment = $service->retrievePaymentType();

    $paymentData = $payment->getData();
    $oldPayment = $order->getAllPayments();
    $oldPayment = $oldPayment[0];

    foreach ($paymentData as $n => $v) {
         $oldPayment->setData($n,$v);
    } 
```

这有点骇人听闻，但非常有效。

# iphone - UIView 上的纸“展开”动画

> ID：10901297
> 
> 赞同：1
> 
> 时间：2012-06-05T16:39:22.523
> 
> 标签：iphone, objective-c, xcode, core-animation

我想为出现在屏幕上的 UIView 创建一个“展开”动画。可以在[此 YouTube 视频](http://www.youtube.com/watch?v=yUhGBrm8eXw&t=10s)中查看动画示例，该视频评论[SuperList](http://itunes.apple.com/il/app/superlist-shopping-list/id465186964?mt=8)应用程序（可以在屏幕截图部分的应用程序商店页面中查看动画的另一个示例）。

![纸“展开”动画](../Images/2b2354d5c8a8f9fd65ddc7fb09c22587.png)

我对 Core Animation 和 Objective C 有很好的理解，比如 Cocoa 和 Cocoa Touch。该应用程序将支持 iOS 的 5.x 和 4.x 版本，因此，如果可能的话，我更喜欢适合这两种情况的解决方案。

此外，我已经用谷歌搜索了这个问题大约一千次，但没有得到任何答案，因此我们将不胜感激。谢谢你，iLyrical。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T17:13:54.693

显然，“UnCurl”效果是内置在框架中的，您可以使用！您所要做的就是使用类的`animateWithDuration: animation:`方法`UIView`并包含动画，如下所示：

```
[UIView animateWithDuration:1.0
                     animations:^{
                         CATransition *transition = [CATransition animation];
                         [transition setDelegate:self];
                         [transition setDuration:0.7];
                         [transition setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn]];
                         [transition setType:@"pageUnCurl"];
                         [self.view.layer addAnimation:transition forKey:@"pageUnCurl"];
                         [self.view addSubview:someView.view];
                     }]; 
```

在这种情况下，便笺图像（白页）具有透明部分（所有面），因此当发生展开时，看起来只有白色部分展开。

# sql - SQL中的delete语句很慢

> ID：10901299
> 
> 赞同：84
> 
> 时间：2012-06-05T16:39:34.347
> 
> 标签：sql, sql-server, sql-server-2008, database-optimization

我有这样的声明超时：

```
DELETE FROM [table] WHERE [COL] IN ( '1', '2', '6', '12', '24', '7', '3', '5') 
```

我试着像这样一次做一个：

```
DELETE FROM [table] WHERE [COL] IN ( '1' ) 
```

到目前为止，它是 22 分钟，并且还在继续。

该表有 260,000 行，有四列。

有谁知道为什么这会这么慢以及如何加快速度？我在 [COL] 上确实有一个非唯一的非聚集索引，我正在执行 WHERE。我正在使用 SQL Server 2008 R2

更新：我桌上没有触发器。

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-06-05T17:09:32.913

可能导致删除缓慢的事情：

*   删除大量记录
*   许多索引
*   缺少子表中外键的索引。（感谢@CesarAlvaradoDiaz 在评论中提到这一点）
*   死锁和阻塞
*   触发器
*   级联删除（您要删除的那十条父记录可能意味着数百万条子记录被删除）
*   需要增长的事务日志
*   许多外键检查

因此，您的选择是找出阻塞并修复它，或者在它们不会干扰正常生产负载的非工作时间运行删除。您可以批量运行删除（如果您有触发器、级联删除或大量记录，则很有用）。您可以删除并重新创建索引（最好在下班时间也可以这样做）。

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2015-07-10T03:49:57.613

1.  禁用约束

    `ALTER TABLE [TableName] NOCHECK CONSTRAINT ALL;`

2.  禁用索引

    `ALTER INDEX ALL ON [TableName] DISABLE;`

3.  重建索引

    `ALTER INDEX ALL ON [TableName] REBUILD;`

4.  启用约束

    `ALTER TABLE [TableName] CHECK CONSTRAINT ALL;`

5.  再次删除

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-06-05T16:48:31.853

删除大量行可能会非常慢。尝试一次删除一些，例如：

```
delete top (10) YourTable where col in ('1','2','3','4')
while @@rowcount > 0
    begin
    delete top (10) YourTable where col in ('1','2','3','4')
    end 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-10-11T13:36:49.357

就我而言，数据库统计信息已损坏。该声明

```
delete from tablename where col1 = 'v1' 
```

即使没有匹配的记录，也需要 30 秒，但是

```
delete from tablename where col1 = 'rubbish' 
```

瞬间跑了

跑步

```
update statistics tablename 
```

解决了这个问题

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-06-05T16:55:47.400

**Preventive Action**

Check with the help of `SQL Profiler` for the root cause of this issue. There may be `Triggers` causing the delay in Execution. It can be anything. Don't forget to Select the `Database Name` and `Object Name` while Starting the `Trace` to exclude scanning unnecessary queries...

**[Database Name Filtering](http://i.stack.imgur.com/C8VET.png)**

**[Table/Stored Procedure/Trigger Name Filtering](http://i.stack.imgur.com/F4x5i.png)**

**Corrective Action**

As you said your table contains 260,000 records...and `IN Predicate` contains six values. Now, each record is being search 260,000 times for each value in `IN Predicate`. Instead it should be the Inner Join like below...

```
Delete K From YourTable1 K
Inner Join YourTable2 T on T.id = K.id 
```

Insert the `IN Predicate` values into a `Temporary Table` or `Local Variable`

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-06-05T16:45:58.123

If the table you are deleting from has BEFORE/AFTER DELETE triggers, something in there could be causing your delay.

Additionally, if you have foreign keys referencing that table, additional UPDATEs or DELETEs may be occurring.

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-12-07T09:06:41.830

其他表可能对您的 [表] 有 FK 约束。因此数据库需要检查这些表以保持引用完整性。即使您拥有与这些 FK 对应的所有需要​​的索引，也要检查它们的数量。

当 NHibernate 在相同的列上错误地创建**重复的 FK**时，我遇到了这种情况，但名称不同（SQL Server 允许这样做）。它大大减慢了 DELETE 语句的运行速度。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-06T08:26:53.417

检查此删除语句的执行计划。看看是否使用了索引搜索。还有什么是col的数据类型？

如果您使用了错误的数据类型，请更改更新语句（例如从 '1' 到 1 或 N'1'）。

如果使用索引扫描，请考虑使用一些[查询提示](http://msdn.microsoft.com/en-us/library/ms181714.aspx)..

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-05T17:59:04.803

[COL] 真的是一个包含数字的字符字段，还是您可以摆脱值周围的单引号？@Alex 是正确的，IN 比 = 慢，所以如果你能做到这一点，你会更好：

```
DELETE FROM [table] WHERE [COL] = '1' 
```

但更好的是使用数字而不是字符串来查找行（sql 喜欢数字）：

```
 DELETE FROM [table] WHERE [COL] = 1 
```

也许尝试：

```
 DELETE FROM [table] WHERE CAST([COL] AS INT) = 1 
```

无论哪种情况，请确保您在列 [COL] 上有一个索引以加快表扫描。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-08-03T14:31:44.770

较旧的主题，但仍然相关。当索引变得碎片化到成为问题而不是帮助的程度时，就会出现另一个问题。在这种情况下，答案将是重建或删除并重新创建索引并再次发出删除语句。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-10-22T20:27:40.490

我阅读了这篇文章，它对解决任何类型的不便非常有帮助

[https://support.microsoft.com/en-us/kb/224453](https://support.microsoft.com/en-us/kb/224453)

这是一个 waitresource KEY: 16:72057595075231744 (ab74b4daaf17)

```
-- First SQL Provider to find the SPID (Session ID)

-- Second Identify problem, check Status, Open_tran, Lastwaittype, waittype, and waittime
-- iMPORTANT Waitresource select * from sys.sysprocesses where spid = 57

select * from sys.databases where database_id=16

-- with Waitresource check this to obtain object id 
select * from sys.partitions where hobt_id=72057595075231744

select * from sys.objects where object_id=2105058535 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-03-20T21:13:46.630

如果您要删除表中的所有记录而不是少数几个，那么删除并重新创建表可能会快得多。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-10-12T19:20:23.183

作为上面[Andomar 答案](https://stackoverflow.com/a/10901422/4427457)的扩展，我有一个场景，前 700,000,000 条记录（约 12 亿条）处理速度非常快，每秒处理 25,000 条记录的块（大约）。但是，然后它开始需要 15 分钟才能完成 25,000 个批次。我将块大小减少到 5,000 条记录，然后它又恢复了以前的速度。我不确定我达到了什么内部阈值，但**解决**方法是减少记录数量，进一步恢复速度。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-07-26T12:59:01.470

在检查了一个 SSIS 包（由于 SQL Server 执行命令真的很慢），这是在我写这篇文章之前大约 5-4 年在我们的客户端中设置的，我发现有以下任务：1 ) 将 XML 文件中的数据插入到名为 [Importbarcdes] 的表中。

2）在另一个目标表上合并命令，使用上述表作为源。

3) "delete from [Importbarcodes]"，清除SSIS包的任务读取XML文件后插入的行的表。

在快速检查表 ImportBarcodes 上只有 1 行的所有语句（SELECT、UPDATE、DELETE 等）后，执行大约需要 2 分钟。

扩展事件显示了很多 PAGEIOLATCH_EX 等待通知。

表中没有索引，也没有注册触发器。

仔细检查表的属性，在存储选项卡和一般部分下，数据空间字段显示在页面中分配的空间超过 6 GIGABYTES。

发生了什么：

在过去的 4 年中，该查询每天运行大部分时间，在表中插入和删除数据，将未使用的页面文件留在后面而没有释放它们。

因此，这是扩展事件会话捕获的等待事件和表上缓慢执行的命令的主要原因。

运行`ALTER TABLE ImportBarcodes REBUILD`修复了释放所有未使用空间的问题。`TRUNCATE TABLE ImportBarcodes`做了类似的事情，唯一的区别是删除所有页面文件和数据。

* * *

## 回答 #15

> 赞同：-10
> 
> 时间：2018-02-05T03:52:39.983

打开 CMD 并运行此命令

```
NET STOP MSSQLSERVER
NET START MSSQLSERVER 
```

这将重新启动 SQL Server 实例。尝试在您的删除命令后再次运行

我在批处理脚本中有这个命令，如果遇到这样的问题，我会不时运行它。正常的 PC 重启不会是一样的，所以如果你的 sql server 遇到一些问题，重启实例是最有效的方法。

# jquery - 带有帧内动画的图像滑块

> ID：10901302
> 
> 赞同：0
> 
> 时间：2012-06-05T16:39:52.470
> 
> 标签：jquery, image, animation, slider

我有一个客户想要他们网站的图像滑块。他们希望在几个帧中包含动画，但他们希望它能够在 iPhone 和其他移动媒体上运行，所以我不能使用 Flash。有没有一种简单的方法可以做到这一点？他们需要 2 个不同的动画帧。我在想也许可以用 JQuery 来编写动画，但我相信滑块需要能够触发动画。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:44:19.180

[FlexSlider](http://www.woothemes.com/flexslider/)是我所知道的最好的手机和台式机之一。此滑块自动适合视口宽度。现在还没有测试，但已经阅读了积极的反馈:)

响应式网页设计的理想选择。

# jquery - 在 Rails 3 中添加嵌套表单的计数器？

> ID：10901305
> 
> 赞同：2
> 
> 时间：2012-06-05T16:39:59.510
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, forms, nested-forms

我在我的 Rails 3 应用程序中使用嵌套表单 gem：[https](https://github.com/ryanb/nested_form) ://github.com/ryanb/nested_form 。我可以在我的表单中添加/删除“受众领域”。受众模型属于上传模型。

我想做的是计算在表单中添加受众字段的次数。因此，例如，表单最初将在受众字段上方显示“受众 1”。如果我添加另一个受众字段，则会显示“受众 2”，依此类推。

**应用程序.js**

```
var n = $("div.audiencefields").length;
  $("span").text("Audience " + n); 
```

我究竟做错了什么？

**编辑：**

**应用程序.js**

```
 $("#removelink").hide().filter(":first-child").show();

  $("div.audiencefields span").each(function(index, element) {
  $(this).text("Audience " + (index + 1));}); 
```

**nested_form.js**

```
jQuery(function($) {
window.NestedFormEvents = function() {
this.addFields = $.proxy(this.addFields, this);
this.removeFields = $.proxy(this.removeFields, this);
};

NestedFormEvents.prototype = {
addFields: function(e) {
  // Setup
  var link    = e.currentTarget;
  var assoc   = $(link).attr('data-association');            // Name of child
  var content = $('#' + assoc + '_fields_blueprint').html(); // Fields template

  // Make the context correct by replacing new_<parents> with the generated ID
  // of each of the parent objects
  var context = ($(link).closest('.fields').closestChild('input:first').attr('name') || '').replace(new RegExp('\[[a-z]+\]$'), '');

  // context will be something like this for a brand new form:
  // project[tasks_attributes][new_1255929127459][assignments_attributes][new_1255929128105]
  // or for an edit form:
  // project[tasks_attributes][0][assignments_attributes][1]
  if (context) {
    var parentNames = context.match(/[a-z_]+_attributes/g) || [];
    var parentIds   = context.match(/(new_)?[0-9]+/g) || [];

    for(var i = 0; i < parentNames.length; i++) {
      if(parentIds[i]) {
        content = content.replace(
          new RegExp('(_' + parentNames[i] + ')_.+?_', 'g'),
          '$1_' + parentIds[i] + '_');

        content = content.replace(
          new RegExp('(\\[' + parentNames[i] + '\\])\\[.+?\\]', 'g'),
          '$1[' + parentIds[i] + ']');
      }
    }
  }

  // Make a unique ID for the new child
  var regexp  = new RegExp('new_' + assoc, 'g');
  var new_id  = new Date().getTime();
  content     = content.replace(regexp, "new_" + new_id);

  var field = this.insertFields(content, assoc, link);
  $(link).closest("form")
    .trigger({ type: 'nested:fieldAdded', field: field })
    .trigger({ type: 'nested:fieldAdded:' + assoc, field: field });
  return false;
},
insertFields: function(content, assoc, link) {
  return $(content).insertBefore(link);
},
removeFields: function(e) {
  var link = e.currentTarget;
  var hiddenField = $(link).prev('input[type=hidden]');
  hiddenField.val('1');
  // if (hiddenField) {
  //   $(link).v
  //   hiddenField.value = '1';
  // }
  var field = $(link).closest('.fields');
  field.hide();
  $(link).closest("form").trigger({ type: 'nested:fieldRemoved', field: field });
  return false;
}
};

  window.nestedFormEvents = new NestedFormEvents();
$('form a.add_nested_fields').live('click', nestedFormEvents.addFields);
$('form a.remove_nested_fields').live('click', nestedFormEvents.removeFields);
});

// http://plugins.jquery.com/project/closestChild
/*
* Copyright 2011, Tobias Lindig
*
* Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
* and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
*
*/
(function($) {
$.fn.closestChild = function(selector) {
// breadth first search for the first matched node
if (selector && selector != '') {
  var queue = [];
  queue.push(this);
  while(queue.length > 0) {
    var node = queue.shift();
    var children = node.children();
    for(var i = 0; i < children.length; ++i) {
      var child = $(children[i]);
      if (child.is(selector)) {
        return child; //well, we found one
      }
      queue.push(child);
    }
  }
}
return $();//nothing found
};
   })(jQuery); 
```

**新的.html.erb**

```
 <%= f.fields_for :audiences do |audience_form| %>
  <div class="audiencefields">
  <span></span>
  <p>   
    <%= audience_form.label :number_of_people %><br />
    <%= audience_form.text_field :number_of_people %>
  </p>
  <p>
    <%= audience_form.label :gender %><br />
    <%= audience_form.text_field :gender %>
  </p>
  <p>
    <%= audience_form.label :ethnicity %><br />
    <%= audience_form.text_field :ethnicity %>
  </p>
  <p>
    <%= audience_form.label :age %><br />
    <%= audience_form.text_field :age %>
  </p>
  </div>

  <%= audience_form.link_to_remove "Remove this", :id => "removelink" %>
  <% end %>

  <p><%= f.link_to_add "Add this", :audiences, :id => "addlink" %></p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T07:11:31.643

我创建了另一个答案，因为注释不允许格式化代码

如果[那](https://github.com/ryanb/nested_form/blob/master/vendor/assets/javascripts/jquery_nested_form.js)是您正在使用的文件，那么在第 69-71 行您可以找到以下代码

```
window.nestedFormEvents = new NestedFormEvents();
$('form a.add_nested_fields').live('click', nestedFormEvents.addFields);
$('form a.remove_nested_fields').live('click', nestedFormEvents.removeFields); 
```

这将单击事件绑定到添加和删除链接。在您的自定义脚本中以相同的方式绑定事件。完成上述操作后将执行。所以你的代码应该是这样的

```
$('form a.add_nested_fields, form a.remove_nested_fields').live('click', function(){

    $("div.audiencefields span").each(function(index, element) {
        //index starts with 0
        $(this).text("Audience " + (index + 1));
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T19:39:24.183

这`$("span").text("Audience " + n);`会将受众 n 作为您网站上每个跨度的内部文本。我假设你`span`在`div.audciencefields`这种情况下正确的代码是

```
$("div.audiencefields span").each(function(index, element) {

    //index starts with 0
    $(this).text("Audience " + (index + 1));
}); 
```

以上将遍历 div.audiencefields 中的每个跨度，并将正确的文本放入每个元素中。

如果您只想向新元素添加数字，您可以使用

```
var audience = $("div.audiencefields");
audience.last().find('span').text("Audience " + audience.length()); 
```

上面将在最后一个 div 中找到带有 Audiencefields 类的 span 并设置集合中的数字。

# php - 教义问题

> ID：10901307
> 
> 赞同：0
> 
> 时间：2012-06-05T16:40:10.797
> 
> 标签：php, mysql, orm, doctrine-orm

“user_id”属性不会在配置中与“OneToOne”保持一致。这是yaml中的配置：

```
Event:
  type: entity
  table: events
  repositoryClass: EventRepository
  fields:
    userId:
      type: integer
      unsigned: true
      nullable: true
      column: user_id
  oneToOne:
    user:
      targetEntity: User
      cascade: {  }
      mappedBy: null
      inversedBy: null
      joinColumns:
        user_id:
          referencedColumnName: id
      orphanRemoval: false 
```

在“OneToOne”和“fields”中描述“user_id”是否错误？阻止“user_id”保存的关系类型是否错误？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-28T17:11:31.340

我不应该尝试同时使用“user”和“user_id”。一般来说，永远不要使用关系，它们什么也没给你。没有代码生成。要拥有 Active Record，必须对其进行编码。

# javascript - Backbone.js 火狐问题

> ID：10901308
> 
> 赞同：1
> 
> 时间：2012-06-05T16:40:12.133
> 
> 标签：javascript, backbone.js, requirejs

您好，我正在为我的应用程序使用 Backbone.js + require.js 我在 Firefox 中呈现模板时遇到问题。它在 Chrome 和 Ie 中运行良好

这是要渲染的代码

```
define([
  'jquery',
  'underscore',
  'backbone',
  'text!templates/home/main.html'
], function ($, _, Backbone, mainHomeTemplate) {

    var mainHomeView = Backbone.View.extend({
        el: $("#page"),
        render: function () {
//            console.log("loading template");
            this.el.html(mainHomeTemplate);
        }
    });
    return new mainHomeView;
}); 
```

有人可以让我知道是什么问题吗

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T16:53:45.357

`this.el`是对视图的原始 DOM 元素的引用。我猜 Chrome 必须在其原始 DOM 元素上有一个 HTML 方法，但（显然）Firefox 没有。

无论如何，您真正想要的是同一元素的 jQuery 包装版本，您可以使用`this.$el`. 如果由于某种原因您使用的是旧版本的 Backbone（最近添加了 $el），您可以改为`$(this.el)`; 它的工作原理相同，但不太方便。

如果您使用该元素的 jQuery 包装版本，那么您的`.html(mainHomeTemplate)`调用将起作用，因为 jQuery 对象总是有一个“html”方法。

# struts2 - 警告信息struts2

> ID：10901318
> 
> 赞同：1
> 
> 时间：2012-06-05T16:41:00.273
> 
> 标签：struts2, token, csrf

使用时

```
<s:token/> 
```

使用***Struts 2***我在日志中收到此警告消息

```
WARN [com.opensymphony.xwork2.ognl.OgnlValueStack] - <Error setting expression
'struts.token.name' with value '[Ljava.lang.String;@7023f'> 
```

我怎样才能避免这种情况？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T06:06:11.267

看起来您的表单中有多个 <s:token/> 。

> [Ljava.lang.String

表示发送了一个字符串数组，如果您的表单多次发送相同的字段，就会发生这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:11:42.540

我有同样的错误。就我而言，struts.xml 中缺少以下内容：

```
<interceptor-ref name="token"/> 
```

在我的行动中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T23:11:27.380

我发现无法避免 WARN，但我们可以使用 Log4J 设置过滤器，

检查这个...

[https://cwiki.apache.org/S2WIKI/troubleshooting-guide-migrating-from-struts-20x-to-21x.html#TroubleshootingguidemigratingfromStruts2.0.xto2.1.x-MissingProperties](https://cwiki.apache.org/S2WIKI/troubleshooting-guide-migrating-from-struts-20x-to-21x.html#TroubleshootingguidemigratingfromStruts2.0.xto2.1.x-MissingProperties)

# html - 从 flex (mxml) 中的标签或文本字段中删除特殊的 HTML 字符

> ID：10901320
> 
> 赞同：0
> 
> 时间：2012-06-05T16:41:06.817
> 
> 标签：html, apache-flex, special-characters, mxml, htmlspecialchars

我正在将带有 RSS 提要的数据加载到 Flex 应用程序中。有些数据有html特殊字符。例如，它无法读取法语中使用的é、è、à、ç 和其他类似字母。它给出了一个奇怪的代码，而不是带有重音符号的字母。

现在我在 Flex 中用于阅读 HTML 文本，但如何删除这些特殊字符？

谢谢！

纪尧姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T10:08:10.857

使用组件的“限制”属性，以便它采用某种特定类型的字符串。像下面提到的东西

myTextBox.restrict = "AZ az 0-9",

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T18:47:57.633

您可以使用[RegExp](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/RegExp.html)删除这些法语字母。

# c# - 如何在 ASP.NET MVC 中传递多个模型？

> ID：10901322
> 
> 赞同：7
> 
> 时间：2012-06-05T16:41:21.770
> 
> 标签：c#, asp.net, asp.net-mvc, linq, view

问题是：我想运行 3 个不同的动作，但我想在更大的模型中从单个动作中提供所有数据。

我在用：

```
public class SearchScrapClass
    {
        public WClass WClass { get; set; }
        public SClass SClass { get; set; }
        public YClass YClass { get; set; }
    }

    public class WClass 
    {
        public string title { get; set; }
        public string link { get; set; }
    }
    public class SClass 
    {
        public string title { get; set; }
        public string link { get; set; }
    }
    public class YClass 
    {
        public string title { get; set; }
        public string link { get; set; }
    } 
```

我正在使用 LINQ 在这些模型中添加数据。

我在用 ：

```
 var wikians = from info in document.DocumentNode.SelectNodes("//div[@id='span']")
        from link in info.SelectNodes("div//a").Where(x => x.Attributes.Contains("href"))
         select new SearchScrapClass //Main Bigger Class
         {
            WClass.link= link.Attributes["href"].Value, //ERROR: How to add to WClass's url ?
            WClass.title= link.InnerText //ERROR: How to add to WClass's url ?
         }

var wikians = from info in document.DocumentNode.SelectNodes("//div[@id='results']")
               from link in info.SelectNodes("p//a").Where(x => x.Attributes.Contains("href"))
               select new SearchScrapClass //Main Bigger Class
                 {
                   YClass.link= link.Attributes["href"].Value, //ERROR: How to add to YClass's url ?
                   YClass.title= link.InnerText //ERROR: How to add to YClass's url ?
                 }

//Also for the 3rd class (model)

    return View(wikians); //and then return bigger class model so that i can access them in view 
```

这是我想将数据添加到所有类的**链接**和**标题的一种方式。**

我的尝试是将数据添加到来自不同来源的所有 3 个类，并将更大的模型传递给查看，以便我可以访问所有类：

```
@model SearchScrapClass
@using(Html.BeginForm()) {
    @Html.EditorFor(o => o.WClass.link)
    ...
} 
```

请建议一种方法

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T17:24:37.917

为了扩展我的评论，我建议为组织起见创建一个 ViewModel 文件夹。在此添加视图模型

```
public class SearchScrapClassViewModel
{
    SearchScrapClass searchScrap;
    WClass wClass;
    SClass sClass;
    YClass yClass;
} 
```

然后在您的控制器中实例化新的视图模型

```
SearchScrapClassViewModel model = new SearchScrapClassViewModel
{
    ....add in your logic to fill your class objects here

}

return view(model); 
```

然后在您的视图中添加视图模型的使用。

```
@using SearchScrapClassViewModel 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T16:50:08.137

您可以通过创建一个包含多个对象的新模型类来传递多个模型。

```
public class MultiModel 
    {
     SearchScrapClass searchScrap;
     WClass wClass;
     SClass sClass;
     YClass yClass;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-08T10:01:24.483

请参阅元组教程[http://www.dotnetperls.com/tuple](http://www.dotnetperls.com/tuple)或这个[http://msdn.microsoft.com/en-us/library/system.tuple(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/system.tuple(v=vs.110).aspx)

像控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        var first = new FirstModel();
        var second = new SecondModel();
        return View(Tuple.Create(first,second));
    }
} 
```

和观点：

@model 元组

```
<div> 
    @Model.Item1.FirstModelProp
    @Model.Item2.SecondModelProp
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-05T13:41:13.963

```
SearchScrapClassViewModel model = new SearchScrapClassViewModel
{
    ....add in your logic to fill your class objects here

} 
```

我们在这里应用什么逻辑“ ....在你的逻辑中添加你的类对象”

# asp.net - SQL 连接变量不在当前上下文中

> ID：10901329
> 
> 赞同：0
> 
> 时间：2012-06-05T16:41:34.500
> 
> 标签：asp.net

我是 .NET 的初学者，并且在我在 page_load 上定义的单选按钮索引更改事件处理程序中使用 sql 连接时遇到了困难。

下面是我的代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data.SqlClient;
using System.Configuration;

namespace Controls
{
    public partial class Report_Selection : System.Web.UI.Page
    {

        protected void Page_Load(object sender, EventArgs e)
        {

            GridView1.HeaderStyle.Font.Bold = true;
            RadioButtonList1.SelectedIndexChanged += new EventHandler(RadioButtonList1_SelectedIndexChanged);
using (SqlConnection cnn = new SqlConnection("Data Source=DBSW9079;Initial Catalog=Underwriting;Integrated Security=SSPI;"))

            {
              SqlCommand cmd;
               SqlDataReader sdr;

               if (!IsPostBack)
               {
                   cmd = new SqlCommand("select Categoryid,CategoryTitle  from Report_Category", cnn);
                   cnn.Open();
                   sdr = cmd.ExecuteReader();
                   SelectCategorydlist1.DataSource = sdr;
                   SelectCategorydlist1.DataTextField = "CategoryTitle";
                   SelectCategorydlist1.DataValueField = "categoryid";
                   SelectCategorydlist1.DataBind();
                   cnn.Close();

               }
               else
               {
                   //It's a Post back
                   //make the grid visible and fill it

                   GridView1.Visible = true;
                   RadioButtonList1.SelectedValue = "1";
                   cmd = new SqlCommand("Select rptdesc,rptdesctext,categoryid from report_description " + "where categoryid != 99999"
                       + "and categoryid = " + Convert.ToInt32(SelectCategorydlist1.SelectedValue).ToString(), cnn);
                   cnn.Open();
                   sdr = cmd.ExecuteReader();
                   GridView1.DataSource = sdr;
                   GridView1.DataBind();

                   sdr.Close();

                   {

                   }

               }

                }

            }

        void RadioButtonList1_SelectedIndexChanged(object sender, EventArgs e)
        {

            SqlCommand cmd1;
            SqlDataReader sdr1;
            if (RadioButtonList1.SelectedIndex.Equals(1))
            {
                RadioButtonList1.ClearSelection();
                cmd1 = new SqlCommand("Select rptdesc,rptdesctext,categoryid from report_description "
                       + "and categoryid = " + Convert.ToInt32(SelectCategorydlist1.SelectedValue).ToString(), cnn);
                cnn.Open();
                sdr1= cmd1.ExecuteReader();
                GridView1.DataSource = sdr1;
                GridView1.DataBind();

                sdr1.Close();
            }

        }

        }
    } 
```

在上面的代码中，当我在事件处理程序中使用 cnn sequel 连接时，我得到一个小 r

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T16:43:49.510

您的查询`RadioButtonList1_SelectedIndexChanged`似乎不正确。有一个`and`没有 a `where`：

```
Select rptdesc,rptdesctext,categoryid from report_description
and categoryid = ...
^^^ should be WHERE 
```

# jquery - 根据父div获取数组中的复选框值；jquery

> ID：10901332
> 
> 赞同：1
> 
> 时间：2012-06-05T16:42:13.723
> 
> 标签：jquery

我有一个带有复选框的 3 个 div。

```
 <div id="MyDiv1">
    <input type="checkbox"  name="newCheckboxes" value="1"  />
    <input type="checkbox"  name="newCheckboxes" value="2"  />
    <input type="checkbox"  name="newCheckboxes" value="3"  />
    </div>

    <div id="MyDiv2">
    <input type="checkbox"  name="newCheckboxes" value="1"  />
    <input type="checkbox"  name="newCheckboxes" value="2"  />
    <input type="checkbox"  name="newCheckboxes" value="3"  />
    </div> 
```

我还有一个工作代码来获取数组中的所有值

```
 function updateTextArea() {

           var allVals = [];
           var parent = $(this).parent("div");

           $('#c_b :checked').each(function () {

               allVals.push($(this).val());
           });
           var removeItem = 'on';
           allVals = jQuery.grep(allVals, function (value) {
               return value != removeItem;
           });

          //Set Value of hidden Field
           $("#<%= hfSearchData.ClientID %>").val(allVals);

       }
       $(function () {

           $('#c_b input').click(updateTextArea);
           updateTextArea();
       });` 
```

现在我想根据 Divs 将不同数组中的值分开

前任。Mydiv1 的数组 1；Mydiv2 的数组 2

我尝试检查父 div 但没有用

谢谢。

# javascript - 我无法准确理解 JavaScript 的方法 string.match(regexp) 的 sg 标志是如何工作的

> ID：10901334
> 
> 赞同：8
> 
> 时间：2012-06-05T16:42:14.837
> 
> 标签：javascript, regex, string, match, gflags

在“JavaScript：The Good Parts”一书中，它解释了`string.match(regexp)`如下方法：

> match 方法匹配一个字符串和一个正则表达式。它如何做到这一点取决于 g 标志。如果没有 g 标志，则调用 string .match( regexp ) 的结果与调用 regexp .exec( string ) 的结果相同。但是，如果正则表达式具有 g 标志，则它会生成一个包含所有匹配项的数组，但不包括捕获组：

然后书中提供了代码示例：

```
var text = '<html><body bgcolor=linen><p>This is <b>bold<\/b>!<\/p><\/body><\/html>';
var tags = /[^<>]+|<(\/?)([A-Za-z]+)([^<>]*)>/g;
var a, i;
a = text.match(tags);
for (i = 0; i < a.length; i += 1) {
    document.writeln(('// [' + i + '] ' + a[i]).entityify());
}
// The result is
// [0] <html>
// [1] <body bgcolor=linen>
// [2] <p>
// [3] This is
// [4] <b>
// [5] bold
// [6] </b>
// [7] !
// [8] </p>
// [9] </body>
// [10] </html> 
```

我的问题是我无法理解“但不包括捕获组”。

在上面的代码示例中，`html`在`</html>`一个捕获组中。为什么它仍然包含在结果数组中？

并且`/`在`</html>`也是在一个捕获组中。为什么它包含在结果数组中？

您能用上面的代码示例解释“但不包括捕获组”吗？

非常感谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-05T16:48:35.170

> 在上面的代码示例中， html 位于捕获组中。为什么它仍然包含在结果数组中？

因为这是全场比赛。当他说“但不包括捕获组”时，他并不是指完整匹配结果，只是捕获组的内容不会在数组中*重复。*如果包含捕获组，您会看到

```
// The result is
// [0] <html>
// [1]           // From the capture group; nothing here
// [2] html      // From the capture group
// [3]           // From the capture group; nothing here
// ... 
```

> 并且 / in 也在一个捕获组中。为什么它包含在结果数组中？

出于与上述相同的原因：这是整体比赛的一部分，这就是结果；各个捕获组的内容不是。

用一个更简单的例子更容易理解。考虑这段代码：

```
var s = "test1 test2";
var re = /(test)(.)/g;
var r = s.match(re);
var i;
for (i = 0; i < r.length; ++i) {
    console.log("[" + i + "]: '" + r[i] + "'");
} 
```

因为正则表达式有`g`flag，所以数组中只包含全匹配，所以我们看到：

```
[0]：“测试1”
[1]：“测试2”
```

在每种情况下，数组中的条目都是完全匹配的，其中包括在构成整个表达式的捕获组中匹配的字符。

如果我们删除了`g`标志但没有更改任何其他内容，我们将获得第一个完整匹配项，然后是两个捕获组的内容：

```
[0]: 'test1' // 完整匹配，包括来自每个捕获组的内容
[1]: 'test' // 捕获组 0 的内容
[2]: '1' // 捕获组 1 的内容
```

在那里，第一个条目是完整匹配；然后第二个和第三个是捕获组的内容。注意捕获组的内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T16:45:48.393

the `g` modifier is to apply the regex globally. Without it, the regex matches and returns the first match found. With it, it searches for and matches all occurrences in the string.

# mysql - 测试远程数据库访问主机

> ID：10901335
> 
> 赞同：9
> 
> 时间：2012-06-05T16:42:16.723
> 
> 标签：mysql, database, command-prompt, remote-server

我已经在我的网络托管 cpanel 上设置了我的[远程数据库访问主机](https://stackoverflow.com/q/10900504/773263)，使我的家庭计算机 IP 地址能够访问在线数据库。

据我所知，它应该可以工作，但我不能 100% 确定。

有没有一种***快速的方法可以从命令提示符连接到数据库，***以确保它允许从我的 IP 地址访问？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-05T16:50:17.563

使用 mysql 客户端，如果你安装了它，访问远程主机很容易

```
mysql -hyour_ddbb_server_ip -uyour_user -pyour_password your_database_name 
```

或者

```
mysql -h your_ddbb_server_ip -u your_user -p  your_database_name 
```

***请注意，在第一个选项中，参数选项与其值之间没有空格

*** your_database_name 是可选的

# sql-server - 在 xml 变量上选择多行和多列

> ID：10901336
> 
> 赞同：3
> 
> 时间：2012-06-05T16:42:17.717
> 
> 标签：sql-server

通常我在过滤器中使用 XML 变量，因为它们很容易工作。

考虑 tablea，其中 column1 是主键：

```
declare @xml xml = '<column1>1</column1><column1>2</column1>'

select *
from tablea
where
    column1 in (select x.i.value('.', 'bigint') from @xml.nodes('/column1') x(i)) or
    @xml is null 
```

它之所以有效，是因为对 xml 的选择返回两行，值为 1 和 2。

现在我有一个tableb，有一个复合主键column1 和column2。所以：

```
declare @xml xml = '<row><column1>1</column1><column2>2</column2></row><row><column1>3</column1><column2>4</column2></row>' 
```

如何在 xml 上编写一个选择以返回每一行和每一列，例如：

```
column1 column2
1       2
3       4 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T17:08:17.320

```
declare @xml xml = '<row><column1 a="a">1</column1><column2>2</column2></row><row>' +
    '<column1>3</column1><column2>4</column2></row>'

select  col.value('data(column1[1])', 'int') as column1
,       col.value('data(column2[1])', 'int') as column2
from    @xml.nodes('/row') tbl(col) 
```

[SQL Fiddle 的示例。](http://sqlfiddle.com/#!3/d41d8/1481)

# neo4j - Neo4jClient 获取所有引用的节点

> ID：10901337
> 
> 赞同：2
> 
> 时间：2012-06-05T16:42:22.093
> 
> 标签：neo4j, neo4jclient

在我的应用程序中，我有类/节点，例如：
-person
-activity -company
我

可以在以下之间创建关系：
- 个人和公司
- 公司和活动
- 活动和个人 - 个人和个人
- 公司和公司

所以。特定活动可能与个人和公司有关。公司主要是根。但是没有真正的等级制度。它更像是一个网状结构。

（我知道如何创建关系等。我已经看过一些教程。:)）

现在。我想获得与特定节点的节点的所有直接相关关系。我不想按关系类型获取相关数据。我想要（如果可能）一个查询，它读取所有关系和相应的节点。
第二个要求：当我检索到所有相关的关系和节点时，我想获取这些节点之间的关系（如果存在的话）！

所以用 2 个查询来解决这个问题会很酷！

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T06:02:13.727

像这样的东西怎么样

```
start company = node(2) match company-[?:employs]-> person return company, person 
```

有关详细信息，请参阅 docs.neo4j.org/chunked/snapshot/cypher-query-lang.html。

否则，您可以在索引中查找公司、人员等，例如

```
start comp=node:Companies(name='Cocal Cola'), person=node:Persons(name='Bob') ... 
```

那是你要找的吗？

# javascript - 在 HTML 和 Javascript 中添加网格线到背景，类似于 VisualStudios 网格

> ID：10901338
> 
> 赞同：0
> 
> 时间：2012-06-05T16:42:25.137
> 
> 标签：javascript, html, css, forms, gridlines

我实现了网格捕捉，但我想让浅灰色线条水平和垂直显示。我的理由是我正在制作一个设计应用程序，它与 Visual Studios 的表单设计方面具有相似的外观和感觉。

我有一些全局变量，这样我就知道像素间距。我只想让它与 Javascript 一起工作。页面可以在 X 和 Y 方向上无限移动，所以我不能有静态长度。它需要是动态的。

到目前为止，它正在出现，但不确定是否有当前的方法来实现这一点。

```
 <hr style ="position:absolute;" width = "1" size = "500" />  
    <hr style ="position:absolute;" width = "500" size = "1" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T08:28:08.173

如果你有现代浏览器，我喜欢这种方式：

```
body{
  background-size:15px 15px;
  background-position: 0 -5px;
}
body:hover{
  background-image: -webkit-linear-gradient(top, #ffffff, #ffffff 98%, #000000 100%); 
} 
```

悬停，可能会很好，我认为您可以轻松添加第二个背景并添加更多 CSS 前缀。

编辑：更好

```
html{
  background-size:200px 200px,200px 200px;
  background-position: 0 0,0 0;
  color:#7a7a7a;
}
html:hover{
  background-image: -webkit-linear-gradient(top, transparent, transparent 199px, #000000 200px),-webkit-linear-gradient(left, transparent, transparent 199px, #000000 200px); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T16:54:26.313

你能实现一个`for()`循环来创建有限数量的规则（由窗口宽度或任何你想要的），每这么多像素创建一个新的水平规则元素。您可以使用 DHTML 来指定每个水平线的样式特征。

顺便说一句，如果您的网格不需要移动，请尝试位置：固定。

希望这可以帮助！

# c++ - 在 VC++ 中使用跨函数调用的双指针进行操作

> ID：10901346
> 
> 赞同：0
> 
> 时间：2012-06-05T16:42:46.063
> 
> 标签：c++, visual-c++, pointers, nullpointerexception

我的场景如下：

在调用者函数中::

```
IDirect3DSurface9 * surf = null;
Func(&surf);
hr = surf->LockRect(, , );  // THROWS an EXCEPTION BCOZ "surf" is still null. Dont know why ?? 
```

在 CALLED 函数中：

```
Func(IDirect3DSurface9 **surfReceive)
{
   surfReceive= new IDirect3DSurface9*[10];
  IDirect3DSurface9* surfcreate = NULL;

        hr = xyz->CreateOffscreenPlainSurface(  width, 
                                                            height, 
                                                            formt, 
                                                            D3DPOOL_DEFAULT, 
                                                            &surfcreate, 
                                                            NULL);
        if (FAILED(hr)) 
            return hr;

        surfReceive[0] = surfcreate;
} 
```

我的疑问是，在 CALLER 中（如我在上面的代码中所示），即使在调用者返回后，surf 仍然为空。当我在冲浪上调用 LockRect() 时，它会引发异常，如下所示。

```
hr = surf->LockRect(, , ); 
```

**重要的是要注意“CreateOffscreenPlainSurface()”调用返回成功，并且“surfcreate”存储了正确的值，因此 surfReceive[0] 也存储了正确的值。但我认为我在 CALLER 中访问它的方式出错了。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T17:11:47.990

您的代码充满了错误和错误——除了所述问题之外，它还表现出异常不安全、DRY 违规和内存泄漏。确切地说，问题在于您不知道指针和值之间的区别。当您分配给 时`surfReceive`，您只是清除了原始值，并且永远不会返回新值。此外，您稍后会*很开心*地删除它。

你可以说这永远行不通，因为你试图返回一个指向函数调用者期望常规指针的指针数组的指针。

使用基于类的代码，一次性获得清晰度、安全性和性能。

```
struct COMDeleter {
    template<typename T> void operator()(T* p) {
        p->Release();
    }
};
void CheckD3DResult(HRESULT hr) {
#ifdef _DEBUG
    if (FAILED(hr)) {
        __debugbreak();
    }
#endif
}
std::unique_ptr<IDirect3DSurface9, COMDeleter> Func() {
    IDirect3DSurface9* temp = nullptr;
    CheckD3DResult(xyz->CreateOffscreenPlainSurface(
        width, 
        height, 
        formt, 
        D3DPOOL_DEFAULT, 
        &temp, 
        NULL));
    return std::unique_ptr<IDirect3DSurface9, COMDeleter>(temp);
}
std::unique_ptr<IDirect3DSurface9, COMDeleter> surf = Func();
CheckD3DResult(surf->LockRect(...)); 
```

此代码尊重异常，保证内存清理，并且至少接近尊重 DRY。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T17:12:17.320

我不确定您对 的期望是什么`Func`，但这绝对行不通。

您将`Func`一个指向**已**分配（在堆栈上）的指针传递给任何指针。在内部`Func`，您将参数（指向已**分配**的指针的指针）重新分配给您刚刚**分配**的地址（在堆上）。

我会说不要分配任何东西，只是`surfReceive`在调用`CreateOffscreenPlainSurface`. 要访问指向任何内容的指针，只需使用`*surfReceive`.

但是，由于我不明白的原因，您分配了一个由 10 个指针组成的数组。

# go - fgetpos 在 Go 中可用吗？想找到 File.Position

> ID：10901351
> 
> 赞同：15
> 
> 时间：2012-06-05T16:43:09.970
> 
> 标签：go

我有一个`File`，我想找到文件偏移量/位置，`fgetpos`在`stdio`. [我似乎在http://golang.org/pkg/io/](http://golang.org/pkg/io/)中找不到它。我必须自己计算还是有内置方法？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-05T16:49:34.187

您应该能够`[Seek()](http://golang.org/pkg/io/#Seeker)`从当前位置执行 a 到 0 字节，这将返回结果位置。我不是 100% 确定结果是你所追求的绝对位置，但我希望它是。

```
offset, err := f.Seek(0, io.SeekCurrent)
if err != nil {
    // handle error
}
// offset is the current position 
```

# java - 在多个面板之间导航

> ID：10901352
> 
> 赞同：0
> 
> 时间：2012-06-05T16:43:12.893
> 
> 标签：java, swing, awt, jpanel, cardlayout

谁能告诉我如何从对象（面板）本身`JPanel`获取事件触发器的多个类之间的导航编码？`JButton`我读过关于`CardLayout`. 面板可以从父面板中发生的事件中交换。我想要实现的是单击面板中嵌入的按钮，它应该消失或显示所需的面板。似乎找不到解决办法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T17:41:44.647

CardLayout 没有任何东西可以防止从卡片中的孩子的动作切换卡片。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Testing extends JFrame {

    private JPanel cardHolder;
    private CardLayout cards;
    private static final String cardA = "A";
    private static final String cardB = "B";

    private class Switcher implements ActionListener{
        String card;        
        Switcher(String card) { this.card = card; }
        @Override
        public void actionPerformed(ActionEvent e) {
            cards.show(cardHolder, card);
        }
    }

    private void run() {
        setDefaultCloseOperation(EXIT_ON_CLOSE);

        JPanel pa = new JPanel();
        JButton ba = new JButton("Switch to B");
        ba.addActionListener(new Switcher(cardB));
        pa.add(ba);
        pa.setBackground(Color.CYAN);

        JPanel pb = new JPanel();
        JButton bb = new JButton("Switch to A");
        bb.addActionListener(new Switcher(cardA));
        pb.add(bb);
        pb.setBackground(Color.MAGENTA);

        cardHolder = new JPanel();
        cards = new CardLayout();
        cardHolder.setLayout(cards);
        cardHolder.add(pa, cardA);
        cardHolder.add(pb, cardB);
        add(cardHolder);
        pack();
        setVisible(true);
    }

    public static void main(String[] args) {
        try {
            SwingUtilities.invokeAndWait(new Runnable() {
                @Override
                public void run() {
                    new testing().run();
                }
            });
        } catch (Exception ex) { }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T17:33:38.957

您可以将[JMenu 与 JMenuItems](http://docs.oracle.com/javase/tutorial/uiswing/components/menu.html)一起使用，而不是使用[JButton](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html#jbutton)在卡片之间切换

# html - button_to 的 HTML 内容

> ID：10901354
> 
> 赞同：2
> 
> 时间：2012-06-05T16:43:18.300
> 
> 标签：html, ruby-on-rails, button, twitter-bootstrap, button-to

我目前正在使用 link_to：

```
<%= link_to edit_webcast_path(@webcast), :class => 'btn'  do %>
    <i class="icon-pencil"></i> Edit Webcast
<% end %> 
```

但是我想对 button_to 做同样的事情，但是 button_to 必须有一个第一个标签参数传递给它，否则它将使用路径作为它的标签。

```
<%= button_to edit_webcast_path(@webcast), :class => 'btn'  do %>
    <i class="icon-pencil"></i> Edit Webcast
<% end %> 
```

... 生成一个带有标签的按钮，该标签是已解析的 edit_webcast_path(@webcast) 路径。实际上 do 似乎没有效果。

我尝试将 html 作为第一个参数直接传递：

```
<%= button_to "<i class=\"icon-white icon-minus-sign \"></i> Edit Webcast".html_safe, webcast_path(@webcast), :class => 'btn'%> 
```

但这会导致一个带有标签的按钮显示我传入的 html 字符串的一部分。查看生成的 HTMl，我可以看到第一个参数的内容放置在输入的 value 属性中，而不是输入本身。

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T17:03:50.157

Rails`button_to`生成一个带有 html `<input type="submit">`element 的表单，而不是`<button>`一个。您可以尝试覆盖它或编写自己的助手来生成`<button>`，[看看这个例子](http://pastebin.com/9sFvJDXD)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T16:35:46.663

在 Rails 中， button_to 将尝试发布或放置，因此它实际上不是“常规”按钮，您可以设置链接的样式，使其看起来和行为像一个按钮

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-05T17:35:12.193

`button_to`您可以像这样在元素中添加 HTML ：

```
<%= button_to "New", new_articles_path do %>
  Create a <strong>new article</strong>
<% end %> 
```

更多信息：[https ://apidock.com/rails/ActionView/Helpers/UrlHelper/button_to](https://apidock.com/rails/ActionView/Helpers/UrlHelper/button_to)

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-06-20T02:55:44.537

你这样做是不对的。您正在尝试添加一个不必要的 html 元素来控制 CSS 作业。

相反，只需为按钮创建一个类或 Id 并将其添加到 css 中：

```
 .btn { padding-left:30px; background: url(pencil.png) no-repeat; } 
```

# ruby - “要求”在一台计算机上有效，但在另一台计算机上无效

> ID：10901355
> 
> 赞同：0
> 
> 时间：2012-06-05T16:43:35.807
> 
> 标签：ruby

我在尝试运行 ruby​​ 脚本的服务器上收到此错误。

`require: no such file to load -- ssch_mail_lib (LoadError)`

但是，在我的工作站计算机上，脚本运行良好。

这是相关代码。

```
#!/usr/bin/ruby
$: << './lib'
require 'ssch_mail_lib' 
```

$LOAD_PATH 的输出

```
/Library/Ruby/Site/1.8
/Library/Ruby/Site/1.8/powerpc-darwin11.0
/Library/Ruby/Site/1.8/universal-darwin11.0
/Library/Ruby/Site
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/vendor_ruby/1.8
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/vendor_ruby/1.8/universal-darwin11.0
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/vendor_ruby
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/powerpc-darwin11.0
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/universal-darwin11.0
.
./lib 
```

我已经检查了三倍的名称和目录。他们匹配。

有什么我想念的想法吗？或者为什么它可以在一台机器上正常工作而在另一台机器上却不行？谢谢！

**编辑：** 他们都使用 Ruby 1.8.7。

**EDIT2：** 该脚本仅在通过 TextMate 运行时才有效。`(LoadError)`使用终端时，它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:56:48.053

There is one fundamental difference between 1.8 and 1.9: require semantics. In 1.8, `require` handles relative and absolute paths. In 1.9, `require` can only be used for the standard library, not user defined files in relative paths or locations. For that, you have to use the Ruby 1.9 method `require_relative`. I'm guessing that one of your computers has 1.8, and the other 1.9\. You can use a clause with `RUBY_VERSION` to make version specific code.

# pycharm - PyCharm 突出显示事件

> ID：10901356
> 
> 赞同：7
> 
> 时间：2012-06-05T16:43:45.603
> 
> 标签：pycharm

在 Eclipse 中，当我用鼠标单击变量时（您知道，光标位于变量名称中的某处），Eclipse 足以突出显示文件中该变量的所有其他出现。我假设 pycharm 有这个，但不知道如何打开它。

我知道如何在一个阶段做到这一点，但它（从记忆中）是一个键盘的东西，我必须*不断*按下每个新变量。如果突出显示是可能的，我如何保持它？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-06T03:58:02.113

您需要启用此设置：

![在插入符号处突出显示元素的用法](../Images/5202d3363965c0103c7c412c71393ae1.png)

但这个问题实际上是[IntelliJ: How to auto-highlight variables like in Eclipse](https://stackoverflow.com/questions/3763183/intellij-how-to-auto-highlight-variables-like-in-eclipse)的副本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T16:47:54.770

```
Edit > Find > Highlight usages in file. 
```

您的操作系统有一个键盘快捷键

# java - ElasticSearch 中的映射和类型之间的混淆

> ID：10901366
> 
> 赞同：10
> 
> 时间：2012-06-05T16:44:18.963
> 
> 标签：java, json, solr, lucene, elasticsearch

抱歉，我是 ElasticSearch 的新手。

[http://www.elasticsearch.org/guide/reference/api/admin-indices-put-mapping.html](http://www.elasticsearch.org/guide/reference/api/admin-indices-put-mapping.html)

该文档说您可以“在 twitter 索引中创建一个名为 tweet 的映射”

```
$ curl -XPUT 'http://localhost:9200/twitter/tweet/_mapping' -d '
{
    "tweet" : {
        "properties" : {
            "message" : {"type" : "string", "store" : "yes"}
        }
    }
}
' 
```

正如有人在 ES IRC 频道上告诉我的那样，/twitter/tweet twitter=index, tweet=type

但是，如果我执行以下操作会发生什么？

```
$ curl -XPUT 'http://localhost:9200/twitter/XXX/_mapping' -d '
{
    "YYY" : {
        "properties" : {
            "message" : {"type" : "string", "store" : "yes"}
        }
    }
}
' 
```

如果我已经在 url 中提供了类型名称，为什么还要在内容中提供类型名称？如果我在内容中提供类型名称，为什么我不能只调用一些 url，例如：

```
$ curl -XPUT 'http://localhost:9200/twitter/_mapping' -d ' 
```

在阅读文档时，对我来说，它说“在 twitter 索引中创建一个名为 tweet 的映射”，这意味着 XXX 是映射名称，YYY 是类型名称。

因此，如果有一个映射名称，一个索引通常可以有很多“映射”

那么，到底 XXX 和 YYY 是/应该是一样的吗？

* * *

这不是我从文档中理解的内容，而是我认为： - 一个索引可以有类型 - 类型有一个映射因此我们不会像文档说的那样创建映射，但是我们创建了一个类型，它有一个映射，或者我们更新类型的映射没有？

在我不想使用任何类型的索引上（所有被索引的文档都是相同类型的数据），但我想为该索引创建一个映射，我应该通过只创建一个类型来处理它吗？映射，并始终使用该类型（例如在 CouchDB 河中）？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-05T17:07:55.833

在当前版本的 elasticsearch search (0.19.4) 中，“YYY”被忽略，映射被分配给“XXX”类型。

实际上，您可以将创建映射视为创建类型。在内部，类型是根据映射表示的，文档只是反映了这种行为。如果所有记录都具有相同的类型，则应将索引视为只有一种类型的索引。类型用于“命名空间”不同类型的记录，因此它是强制性的。id 本身并不能唯一标识一条记录。要在elasticsearch中识别一条记录，你需要有index、type和id。例如，这就是为什么 type 是 get 操作的必需参数的原因。对于其他操作，如果没有指定类型，elasticsearch 假定您要对所有类型的记录执行操作。

请注意，也可以通过添加新类型的记录随时动态创建类型。因此，只有一种类型的索引是还没有第二种类型的*索引*。

# python - What is the most efficient way to use datastore in google appengine?

> ID：10901371
> 
> 赞同：0
> 
> 时间：2012-06-05T16:44:41.703
> 
> 标签：python, google-app-engine, datastore

Currently I am working on project that's supposed to be used by a lot of people. I am worried that datastore read/write/small ops are using too much resources. Since I am new to appengine, are there any efficient ways to make those numbers smaller? I thought about using memcache but it's not most secure way. Also is it a good idea to search for datastore entities using the:

```
SELECT __key__ FROM table 
```

then use:

```
....#code
table.get_by_id(entity.id())
....#code 
```

?

Thank you very much.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T17:22:05.697

对于经常读取和不经常写入的数据，请使用数据存储前面的 memcache。读取时，首先检查数据是否在 memcache 中，如果没有，则从 datastore 中读取，然后将其存储在 memcache 中以供将来读取。在您通过键读取实体的简单情况下，您可以将每个实体按其数据存储键存储在内存缓存中。对于查询，您必须决定是否值得将结果集存储在 memcache 中，由查询参数键入。

写入时，您可以删除 memcache 值，并在下次读取时重新加载。您必须忍受删除失败的可能性。通常，您在 memcache 值上设置过期时间，以便旧值不会保留很长时间。请注意，对于每秒多次读取，即使是很短的过期时间也会让您获得显着的性能提升。

您还可以以同样的方式将 memcache 用于其他耗时的数据操作，如 URL Fetch 或计算值（例如复杂的模板文本）。在所有这些情况下，如果 memcache 值已被逐出，您将退回到主要来源，因此您可以获得读取性能而不会失去对数据的访问权限。

其他性能提示：尽可能使用批处理调用来减少 RPC 的数量。尽可能使用异步调用，这样您的应用程序就不会在可能执行其他操作时阻塞服务调用。使用 AppStats 可视化您的服务调用并找到异步调用可能有帮助的领域。

关于您的 fetch-by-key 问题：通常，执行仅键查询然后立即按键获取结果实体无济于事，因为这就是完整实体查询的全部内容。但是，如果您需要从查询结果中选择性地获取，或者如果在一个地方查询键并在另一个地方获取密钥是有意义的，那么这些都是可能的，并且您不会损失太多。我经常发现仅键查询的用途。另请参阅投影查询，仅获取（索引）属性的子集。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-05T18:20:13.510

由于看起来您使用的是 python，因此我强烈建议您使用新的数据存储 API [NDB](https://developers.google.com/appengine/docs/python/ndb/)。

NDB 自动使用 memcache 在后台缓存它的模型，而无需您做任何额外的工作。当然，您还应该考虑手动使用 memcache，ndb 不是灵丹妙药。但它会免费为您提供帮助，这总是很好。

除了性能提升之外，它还是应用引擎数据存储的更简洁的界面。它还为[批量操作](https://developers.google.com/appengine/docs/python/ndb/entities#multiple)提供了干净的支持，这也可以提高性能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T17:02:34.897

在 Google App Engine 中使用 Datastore 最有效的方法是……不使用 Datastore！它很慢。

尽可能使用内存缓存。什么是内存缓存“不安全”？这当然是一个不同寻常的批评。

此外，如果您知道实体的键或 ID，只需直接加载它，例如使用[get_by_key_name](https://developers.google.com/appengine/docs/python/datastore/modelclass#Model_get_by_key_name)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T03:13:22.367

不，没有理由只进行键查询，然后单独获取实体，除非您只想检索由返回键标识的一些实体。如果这更有效，数据存储将为您完成。只需进行常规查询。

# git - Different versions between local and remote git repo - how to syncronize again?

> ID：10901376
> 
> 赞同：1
> 
> 时间：2012-06-05T16:45:03.823
> 
> 标签：git

I have a post-update hook like this:

```
#!/bin/sh
echo
echo “**** Pulling changes into Dev [Hub’s post-update hook]”
echo
case “ $1 ” in
*‘refs/heads/dev’*)
cd /home/user/www/dev/ || exit
unset GIT_DIR
git pull hub dev
echo
echo “Dev was pulled”
echo
;;
esac 
```

Git is telling me that the local and remote are up to date, but they aren't. Local is a more recent version then the remote.

**When I git pull I get:**

> Already up-to-date.

**When I do a git status on the REMOTE I get:**

> On branch dev nothing to commit (working directory clean)

(previously, when doing git status on REMOTE I've seen that a file (.htaccess one) was not added, so remotely I did, `git add .` and `git commit -a -m "added htaccess remotely"`, they I did `git pull` locally, but I still get: Already up-to-date.)

I've tried to change something locally (in hope that it would pushed that specific change and all the other changes previously done) - no luck.

Can anyone help me to get all repos synchronized again ?

```
git remote -v 
```

> hub ssh://user@site.org/home/user/private/repos/site_hub.git (fetch)
> 
> hub ssh://user@site.org/home/user/private/repos/site_hub.git (push)

hub is a bare repo.

# visual-studio-2010 - Easy way to delete an html tag and its content in Visual Studio?

> ID：10901379
> 
> 赞同：0
> 
> 时间：2012-06-05T16:45:08.183
> 
> 标签：visual-studio-2010, visual-studio

Is there a way to delete an html tag and its content in Visual Studio with the fewest keystrokes?

Addition:

The tag is several pages long. Resharper or any extension?

# ftp - 来自 ftp 连接到端口 22 的奇怪错误消息

> ID：10901381
> 
> 赞同：1
> 
> 时间：2012-06-05T16:45:29.620
> 
> 标签：ftp, sftp

我有点困惑。我正在尝试使用端口 22 进行 FTP。它表示我已连接，然后表示我未连接。这是我的输出：

```
dan@voldemort:~$ ftp $hname 22
Connected to <hostname>.
SSH-2.0-OpenSSH_5.1
ftp> ls
Not connected. 
```

这是怎么回事？是因为我使用的是 22 端口吗？我知道这是 ssh 端口，但这就是我使用它的原因。

编辑：我想知道发生了什么。我对其他传输文件的方式不感兴趣，例如 FTP 客户端。我也在寻找命令行解决方案。我正在运行 Ubuntu。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T17:05:25.680

端口 22 用于 SSH，而不是 FTP。你不能在 22 端口上使用普通的 FTP 客户端，你必须使用支持 SSH 的 FTP 客户端。

在 Ubuntu 命令行中，使用`sftp`，而不是`ftp`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T16:49:27.957

连接到端口 22 应使用 ssh。您可以使用 WinSCP 进行连接。

# java - Finding a cumulative frequency array

> ID：10901387
> 
> 赞同：2
> 
> 时间：2012-06-05T16:46:12.357
> 
> 标签：java, arrays, frequency

This method converts a frequency array into a cumulative frequency array. For example if the initial array was { 1, 2, 3, 4} calling the method should give you { 1, 3, 6, 10}

This is what Ive written:

```
public void cumulate(int[] a)
{
   for (int i= 0; i < a.length; i ++){
          a[i] = a[i-1] + a[i];
    }
} 
```

I'm certain its wrong, but I do need help with generating another set of codes. If anyone is able to assist me, that would be lovely!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T16:49:20.360

好吧，您将在 i = 0 的数组之外。所以从 1 开始：

```
public void cumulate(int[] a) {
   for (int i = 1; i < a.length; i++){
          a[i] = a[i - 1] + a[i];
    }
} 
```

现在应该可以了。

# regex - 这个正则表达式是什么意思以及为什么

> ID：10901391
> 
> 赞同：1
> 
> 时间：2012-06-05T16:46:22.463
> 
> 标签：regex, sed

```
sed "s/\(^[a-z,0-9]*\)\(.*\)\( [a-z,0-9]*$\)/\1\2 \1/g" desired_file_name 
```

*我很欣赏它，即使你只解释它的一部分，或者至少用词来构造它，如`s\alphanumerical_at_start\something\alphanumerical_at_end\something_else\global`*

有人可以解释这意味着什么，为什么以及所有正则表达式都如此......糟糕？

我知道它用最后一个替换了第一个小写字母数字单词。但是你能解释一下这里发生了什么吗？所有的`/\`和`\(.*\)\`所有的东西是怎么回事？

我只是迷路了。

**编辑：**这是我得到`(^[a-z0-9]*)`的：从 z 槽和 0 槽 9 开始；并且`[a-z,0-9]*$`是相同的，但最后一个单词（但是`[0-9,a-z]`= 只是前 2 个字符/第一个字符，还是整个单词？）。另外： the`*`或`\(.*\)\`even 是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T16:59:07.107

这是一个 sed 搜索和替换，作为 form `s/search/replace/flags`，唯一的标志是`g`表示搜索/替换是全局的，所以如果匹配在一行上出现多次，而不是只在第一行出现。

首先，这是它搜索的正则表达式：

```
\(^[a-z,0-9]*\)\(.*\)\( [a-z,0-9]*$\) 
```

或者以更易读的格式：

```
\(             # start capture group 1
  ^              # match at the beginning of the line
  [a-z,0-9]*     # zero or more alphanumeric or comma characters (lowercase only)
\)             # end capture group 1
\(             # start capture group 2
  .*             # zero or more of any character (except for newlines)
\)             # end capture group 2
\(             # start capture group 3
  [ ]            # literal ' ' character (I added brackets for clarity)
  [a-z,0-9]*     # zero or more alphanumeric or comma characters (lowercase only)
  $              # match at the end of the line
\)             # end capture group 3 
```

这是替换：

```
\1\2 \1 
```

这将用捕获组 1 的内容替换整行（因为正则表达式中的`^`和`$`锚点），然后是捕获组 2 的内容，然后是空格，然后是捕获组 1 的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T16:52:00.793

*   (^[az,0-9]) - 行首的字母数字或逗号（第 1 组）
*   (.) - 任意字符（第 2 组）
*   ( [az,0-9]*$) - 一个空格，后跟零个或多个字母数字或逗号 [猜测逗号只是一个错误]，到行尾
*   \1\2 \1 - 替换为（第 1 组）（第 2 组）空格（第 1 组）
*   g - 输入中的任何地方

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T17:01:46.013

正则表达式是一种描述正则文法的方法。他们以非常简洁和非常有效的方式实现了这一点。这使它们看起来很复杂。

它们也是结构化和可解码的。

首先，有一个`sed`电话。

```
sed "{operation}/{expression}/{replacement}/{modifiers}" {argument} 
```

笔记

*   用`sed`正斜杠分隔部分。这意味着您不能在`{expression}`or中有未转义的正斜杠`{replacement}`。
*   与大多数其他正则表达式方言不同，`sed`它使用括号来匹配实际括号，并使用*转义*括号来定义捕获组。

`{operation}`碰巧是-`s`替代品。

是，它分解`{expression}`为`\(^[a-z,0-9]\)\(.*\)\( [a-z,0-9]*$\)`

```
\( # 开始捕获组 1
  ^ # 匹配字符串的开头
  [az,0-9] # 匹配字符 az 和 0-9 以及逗号 (!)
\) # 结束捕获组 1
\( # 开始捕获组 2
  .* # 匹配任意字符 (.)，零次或多次 (*)
\) # 结束捕获组 2
\( # 开始捕获组 3
               # 匹配一个空格
  [az,0-9]* # 匹配字符 az 和 0-9 以及逗号 (!)
  $ # 匹配字符串的结尾
\) # 结束捕获组 3

```

想一想，编写一个功能相同的函数需要多少代码（和时间），以及正则表达式需要多少空间。这就是为什么它更难阅读的原因 - 它非常压缩。

`{replacement}`是`\1\2 \1`。_ `\n`称为反向引用，其中`n`是捕获组的编号。所以这会再次插入第 1 组和第 2 组的内容、一个空格和第 1 组的内容。

该`{modifiers}`部分是一个`g`标志，它使正则表达式尽可能频繁地应用。在这种特殊情况下，它没有多大意义，因为上面的正则表达式无论如何只能匹配一次。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T17:03:22.323

```
s/\(^[a-z,0-9]*\)\(.*\)\( [a-z,0-9]*$\)/\1\2 \1/g

s -> substitute
/ -> begin of regex
\( -> begin of a first field( accessed as \1 later)
^  -> from the begining of line in data
[a-z,0-9] -> list of characters which will be compared, lowercase a through z, comma, and 0 through 9
* -> zero or more times
\) -> end of \1 field
\( -> begin of \2
.* -> . means any character. .* means any character zero or more times
\) -> end of \2
\( [a-z,0-9]*$ -> begin of \3, followed by a space, follwed by zero or more a-z, comma, 0-9
\) -> end of \3 field
/ -> end of regex to replace

/ -> begin of regex to replace with
\1\2 \1 -> first field followed by second field followed by a space and again the first field
/ -> end of regex to replace with

g -> globally 
```

# android - 微调器 OnItemSelected 不起作用

> ID：10901393
> 
> 赞同：1
> 
> 时间：2012-06-05T16:46:29.107
> 
> 标签：android, events, click, spinner

我已经多次查看我的代码并尝试了不同的“解决方案”，显然它们都没有奏效。问题是当一个项目被点击时，监听器永远不会被触发。我发现当单击一个项目时，它会出现在 Logcat 中：

> 窗口已经聚焦，忽略焦点增益：com.android.internal.view.IInputMethodClient$Stub$Proxy@40683498

Spinner 是在 Button 触发的函数中动态创建的。

> 代码 ：

```
public void showFilterCountries(View v){

     Spinner country_list=new Spinner(this);

     ArrayAdapter<String> adapter= new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, countries);
     adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
     country_list.setAdapter(adapter);
     country_list.setPrompt("Select a country");

     country_list.setOnItemSelectedListener(new OnItemSelectedListener() {
            public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int pos, long arg3) {
                Log.d("","selected");                   
            }

            public void onNothingSelected(AdapterView<?> arg0) {
                Log.d("","none selected");
            }
        });

     country_list.performClick();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T17:02:50.093

我解决了使用 AlertDialog.Builder 而不是 Spinner （这是正确的方法），如下所示：

[https://stackoverflow.com/a/7635966/1181261](https://stackoverflow.com/a/7635966/1181261)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-20T18:57:03.487

我刚刚经历了这个，我有一个微调器无法工作。问题是它在一个实现 AdapterView.OnItemSelectedListener 的片段中，问题是它也在实现 AdapterView.OnItemSelectedListener 的活动中，问题是活动总是捕获事件，所以我不得不把我的逻辑放在片段，并让活动调用片段方法。

TL：DR，如果您的 onItemSelected 从未被调用，它可能是活动，或者另一个监听器正在捕获它，显然 Android 只喜欢监听 onItemSelected 的一件事。

# appcelerator - Appcelerator: How to prevent Window.click fired when TableViewRow.click()?

> ID：10901396
> 
> 赞同：0
> 
> 时间：2012-06-05T16:46:38.800
> 
> 标签：appcelerator, appcelerator-mobile

I have this situation where my textfield is embedded within a TableViewRow like this [http://cl.ly/1i372j0Q062H010L2O0y](http://cl.ly/1i372j0Q062H010L2O0y)

I wanted a situation when someone click on the "Password" row, I will focus on the Password Textfield and when someone click on anywhere else in the window, the password will get blur().

However, the problem comes in when both Window.click and PasswordRow.click got fired when the user clicks on the PasswordRow. This make the textfield.focus() and textfield.blur() got executed, resulting is no focus at all.

Anyway I can workaround it? Or is there a better way to blur it than to listen to Window.click?

Cheers, Mickey

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T08:48:38.673

我以前多次遇到过这个问题。有一个奇怪的错误，在 tableview 上触发的事件将在窗口上触发。我有一个问题，我将文本框设置为数字键盘，我必须在文本框上单击两次才能显示它，然后它就不是数字键盘了。

论坛上有很多解决方案，例如捕获窗口事件并且在某些情况下什么都不做，使用模态窗口等。我建议不要使用 tableView（如果可能的话）。如果您需要它看起来像那样，您可能可以将视图设置为看起来相同。

如果你想走另一条路，这里有一个帖子，其中一条评论提到过滤掉其他事件：

[http://developer.appcelerator.com/question/117540/textfield-on-tableview-loses-focus-android](http://developer.appcelerator.com/question/117540/textfield-on-tableview-loses-focus-android)

# netty - netty websocket + 连续PERIODIC数据推送

> ID：10901399
> 
> 赞同：1
> 
> 时间：2012-06-05T16:46:46.513
> 
> 标签：netty, server-push, executors

从netty中的websocket服务器定期（比如每n秒）连续推送一些数据的最佳方法是什么？

编辑 ：

我遇到了这篇文章：[使用 Netty 在 Java 中发送连续数据的最佳方法](https://stackoverflow.com/questions/6781388/best-way-to-send-continuous-data-in-java-using-netty)，根据答案，while/sleep 的可扩展性不是很好，如何在 Executor 上安排工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T20:48:38.570

1.  WebSocket 客户端连接到您的 Netty 服务器，握手并建立 websocket 连接。
2.  服务器将客户端的通道注册到某个地方，当有数据要发送时可以检索到该通道。（我在单例中使用 ChannelGroup）
3.  计划的作业触发，从某处获取一些数据，然后获取对客户端通道的引用并将数据写入其中。
4.  客户端通道的管道中应该有一些编码器，用于将计划作业提供的数据编组到 websocket 帧中。

# java - Spring Converter for Cookie [] on controller 方法

> ID：10901403
> 
> 赞同：0
> 
> 时间：2012-06-05T16:47:12.573
> 
> 标签：java, spring, spring-mvc, annotations

我有一个案例，我有多个 cookie 值需要用于填充单个 Java 对象。我想让我的控制器签名看起来像这样：

```
@RequestMapping("/test")
public String displayUserData(Person person) {
  ...
} 
```

我已经为 Cookie[] 到 Person 创建了一个转换器，并在我的 WebMvcConfigurerAdapter 类上使用 addFormatters 方法注册了它，但我似乎无法让 Spring 使用它。

我有另一个可以正常工作的转换器，它的设置方式相同。两者之间的唯一区别是工作的使用@PathParameter 变量而不是Cookie[]。

我知道我可以访问 Cookie[] 并手动运行我的转换，但这不如使用转换器那么优雅。关于如何完成这项工作的任何想法？

顺便说一句，这一切都是在 Spring 3.1 中使用注释配置设置的（任何地方都没有 xml）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T20:08:06.560

见[http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-ann-cookievalue](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-ann-cookievalue)

# ruby-on-rails - “集合”是 rails 3.2、simple_form 或 mongoid/mongodb 中的保留字吗？

> ID：10901405
> 
> 赞同：1
> 
> 时间：2012-06-05T16:47:17.720
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, mongoid

我在使用模型**"Collection"**时遇到问题。

我将**mongoid**与**mongodb**和**rails 3.2**一起使用。

当我尝试使用带有 simple_form 的选择从集合中创建嵌套资源时遇到问题，例如：

```
 <%= f.input :collection_id, :collection => Collection.where(:user_id => current_user.id).order([:created_at, :desc]), :input_html => { :id => "m_collection_id" }  %> 
```

然而，换句话说，模型工作正常。

我的问题是，是否可以**在 Rails 3.2、mongoid 和 mongodb 上使用 ruby​​ 创建一个带有****“Collection”**字样的模型。

 **非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T17:15:24.023

虽然我不确定“collection”是否是 rails、mongodb 或 simple_form 中的受保护词，但最好不要使用它。有几种方法名称中包含“collection”，例如 collection_select。我检查了几个保留字列表，但没有找到它。（这是我找到的最好的：http: [//cheat.errtheblog.com/s/rails_reserved_words/](http://cheat.errtheblog.com/s/rails_reserved_words/)）

但是，当我不确定某个词时，我只是去在线词库并查找一个好的同义词。我看到的一些很好的收集是编译、聚合、分类、混合（好吧，也许不是这样，但你明白了）。**

# html - 文本跳出列

> ID：10901409
> 
> 赞同：3
> 
> 时间：2012-06-05T16:47:34.417
> 
> 标签：html, css

我有这个[脚本](http://leb-media.com/fouadlb/files/GermanySupporters/Scores2/phpmydatagrid-2011-09-27/sample9.php) 这是一个允许我通过网络编辑数据库表的脚本。一切都很完美脚本，但无法修复此问题...

这些都是我的代码...

我的CSS代码：

```
body{
    margin-top: 0px;
    margin-left: 0px;
    font-family:Tahoma, Geneva, sans-serif;
    font-size:14px;
}
.dgError{
    margin-top:10px;
    margin-left:10px;
    font-family:Verdana, Arial, Helvetica, sans-serif;
    font-size:12px;
    color:#000000;
    background-color:#EFEFEF;
    border:5px double #C0C0C0;
    padding:5px;
}
.dgMainDiv{
    width:98%;

}
.dgTable{
    font-family:Verdana, Arial, Helvetica, sans-serif;
    font-size:95%;
    width:100%;
    background-color:#FFFFFF;
}
.dgTitles{
    font-size:105%;
    font-weight:bold;
    background-color:#DCDCDC;
    border:1px solid;
    border-left-color:#ffffff;
    border-right-color:#aca899;
    border-top-color:#ece9d8;
    border-top-width:2px;
    border-bottom-color:#ece9d8;
}
.dgTitles:hover{
    border-top-color:#ffc83c;
}
.dgImgLink{
    cursor:pointer;
    padding:2px;
}
.dgImgLink:hover{
    background-color:#CCCCCC;
}
.dgHeader{
    font-size:110%;
    font-weight:bold;
    background-color:#C0C0C0;
    border:solid 1px #A0A0A0;
    height:30px;
}
.dgFooter{
    font-size:9px;
    background-color:#EFEFEF;
    color:#000000;
}
.dgPagRow{
    background:#EFEFEF;
    border-top:solid 1px #bfcacd;
    font-size:9px;
}
.dgBold{
    font-weight:bold;
}
.dgLinks{
    cursor:pointer;
    text-decoration:underline;
    color:#0000FF;
}
.dgLinks:hover{
    color:#FF0000;
}
.dgSelectpage{
    color:#000000;
    font-size:9px;
    font-weight:bold;
}
.dgRownorm{
    font-size:100%;
    border:1px solid #bfcacd;
    border-left-color:#ffffff;
    border-bottom-style:none;
}
.dgRowalt{
    font-size:100%;
    border:1px solid #bfcacd;
    border-left-color:#ffffff;
    border-bottom-style:none;
}
.dgRowsnormTR, .dgspnormRow{
    height:20px;
    background-color:#ffffff;
    color:#000000;
}
.dgRowsnormTR:hover{
    background-color:#ffffe0;
}
.dgRowsaltTR, .dgspaltRow{
    height:20px;
    background-color:#e9eff2;
    color:#000000;
}
.dgRowsaltTR:hover{
    background-color:#ffffe0;
}
.dgspnormRow{
    font-weight:bold;
}
.dgspaltRow{
    font-weight:bold;
}
.dgAjax{
    font-family:Verdana, Arial, Helvetica, sans-serif;
    font-size:12px;
    font-weight:bold;
    background-color:#FFFFE1; 
    border-style: dotted; 
    border-width: 2px; 
    padding: 4px;
}
.dgArrows{
    width:5px; 
    height:15px;
}
.dgInput {
    font-family: Verdana, Arial, Helvetica, sans-serif; 
    font-size: 10px; 
    border: 1px solid #6699FF; 
    padding-left: 4px; 
    padding-right: 4px; 
    padding-top: 1px; 
    padding-bottom: 1px;
}
.dgInput:focus{
    background-color: lightyellow;
}
.dgSearchDiv {
    font-family:Verdana, Arial, Helvetica, sans-serif;
    position: absolute; 
    width:300px; 
    height: 150px;
    background-color:#0a246a; 
    border:2px solid #0a246a;
    top:0; 
    z-index: 10000; 
    display:none; 
}
.dgInnerDiv {
    font-family:Verdana, Arial, Helvetica, sans-serif;
    margin-top:20px;
    background-color:#d9d9d9;
    font-size:100%;
    height:130px;
}
.dgSearchTit {
    width:270px; 
    color:#FFFFFF;
    font-size:12px;
    font-weight:bold;
    padding-left:10px;
    cursor:move;
    float:left;
}
.dgCheck{
    width: 17px;
    border: 1px solid #6699FF; 
}
.dgTotRowsTR{
    height:25px;
    background-color:#ece9d8;
    color:#000000;
    font-weight:bold;
}
.dgRowsTot{
    border:1px solid #bfcacd;
    border-left-color:#ffffff;
}
.dgAddDiv{
    position:absolute; 
    top: 0px;
    left: 0px;

/* --- This options below produce an error in FF 3 --- */
/*
    opacity: .98; 
    -moz-opacity:0.98; 
*/
    color:#FFFFFF;
}
.dgAddTitle{
    background-color: #000099; 
    height:20px;
    font-weight:bold;
}
.dgAddNames{
    width: 200px;
    font-weight:bold;
}
.dgAddInputs{
    width: 180px;
}
.dgAddButons{
    height:30px;
    vertical-align:middle;
    background-color: #CCC; 
} 
```

**主页代码**= [http://pastebin.com/44qgpeti](http://pastebin.com/44qgpeti)

**PHP 脚本代码**= [http://pastebin.com/LqavqHdx](http://pastebin.com/LqavqHdx)

我发布了我的`css`，`script`如果问题不在`CSS`文件中......

所以我希望有人能帮我找到这个问题:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T16:52:43.397

您可以使用 CSS 自动换行来拆分那些非常大的单词：

```
.dgRownorm {
    border-style: solid solid none;
    font-size: 100%;
    word-wrap: break-word;
} 
```

[您可以在 MDN](https://developer.mozilla.org/en/CSS/word-wrap#AutoCompatibilityTable)上查看浏览器兼容性表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T16:54:38.477

您可以尝试将溢出设置为隐藏：

```
.dgRownorm{
    font-size:100%;
    border:1px solid #bfcacd;
    border-left-color:#ffffff;
    border-bottom-style:none;
    overflow: hidden;
} 
```

如果设置了单元格的大小，这将切断任何额外的文本。如果您希望文本换行，您可以查看 PHP`wordwrap`函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T17:34:36.013

使用**css 自动换行属性**。

`word-wrap: break-word;`无论您面临开箱即用的文本问题，都可以在 div css 中设置。

```
.dgRownorm{
    font-size:100%;
    border:1px solid #bfcacd;
    border-left-color:#ffffff;
    border-bottom-style:none;
    word-wrap: break-word;
} 
```

# xml - 比较网页上的 XML 文件

> ID：10901412
> 
> 赞同：1
> 
> 时间：2012-06-05T16:47:45.813
> 
> 标签：xml, vb.net

我需要比较网页上的 2 个 XML 文件。我想知道是否有可用于将 XML 比较查看器嵌入网页的工具。用户将选择要比较的 2 个文件并将其传递给查看器。查看器应显示比较结果，如 XMLDiff/beyond 比较工具中所示。我将不胜感激任何答案/建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T19:52:27.610

尝试[Prettydiff](http://prettydiff.com/)。它是一种可识别 XML 语言的差异工具，可直接在您的浏览器中运行，无需将代码发送到任何地方。

# java - java.lang.NoSuchMethodException：类'class java.lang.Class'上的未知属性'language'

> ID：10901413
> 
> 赞同：0
> 
> 时间：2012-06-05T16:47:49.063
> 
> 标签：java, hibernate, rest

我得到以下错误：

```
java.lang.NoSuchMethodException: Unknown property 'language' on class 'class java.lang.Class' 
```

使用的休息电话：/Test/rest/Languages/insertobj/Japanese/Swedish%206

我正在使用：org.apache.commons.beanutils.PropertyUtils;

我的 Languages 类中确实有指定的属性“语言”，所以我不确定它为什么会抛出错误。当我这样声明它时它会起作用：

语言 lanobj = new Languages();

//语言类

```
public class Languages implements java.io.Serializable {
    private String language;
    private String displayName;

public Languages() {
        this.language = null;
        this.displayName = null;
    }

public Languages(String language, String displayName) {
    this.language = language;
    this.displayName = displayName;
}

public void setLanguageId(Long languageId) {
    this.languageId = languageId;
}

@Column(name = "language", nullable = false, length = 50)
public String getLanguage() {
    return this.language;
}

public void setLanguage(String language) {
    this.language = language;
}

@Column(name = "displayName", nullable = false, length = 50)
public String getDisplayName() {
    return this.displayName;
}

public void setDisplayName(String displayName) {
    this.displayName = displayName;
}

} 
```

///资源管理器代码

```
@Path("{subResources}/insertobj/{language-id}/{displayname-id}")
//@POST 
@GET // Using get for the sake of making rest call with browser
@Produces(MediaType.TEXT_HTML)
public String getLanguageById(@PathParam("subResources") String id,
                            @PathParam("language-id") String language_id,
                            @PathParam("displayname-id") String displayname_id) 
{
    try{
        Class<?> c = Class.forName("com.test."+id);
        PropertyUtils.setProperty(c, "language",language_id);
        PropertyUtils.setProperty(c, "displayName",displayname_id);
        TransactionManager.createObject(c);     

    }catch (Exception exc){
        exc.printStackTrace();      
    }

} 
```

//TransactionManager 片段：

```
public static void createObject(Object entityObject) {
    Transaction tx = null;
    //SessionFactoryUtil.getInstance().openSession();
    Session session =  SessionFactoryUtil.openSession();
    try {
      tx = session.beginTransaction();        
      session.save(entityObject);         
      tx.commit();
    } 
    catch (RuntimeException e)
    {
      if (tx != null && tx.isActive())
      {
        try 
        {
            // Second try catch as the rollback could fail as well
            tx.rollback();
        } 
        catch (HibernateException e1) {
            //logger.debug(“Error rolling back transaction”);
        }
        // throw again the first exception
        throw e;
      }
    }
    finally
    {
        session.close();
    }
  } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T17:03:27.457

您正在尝试为`language`Class 对象设置属性`"com.test."+id`。您需要创建此类的一个实例来设置值。就像是：

```
try{
    Class<?> c = Class.forName("com.test."+id);
    Object o = c.newInstance();
    PropertyUtils.setProperty(o, "language",language_id);
    PropertyUtils.setProperty(o, "displayName",displayname_id);
    TransactionManager.createObject(o);     

}catch (Exception exc){
    exc.printStackTrace();      
} 
```

引用的类`c`必须具有零参数构造函数才能使此代码正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T17:05:01.483

`setProperty`在传递课程时需要一个实例，请参阅[文档](http://commons.apache.org/beanutils/api/org/apache/commons/beanutils/PropertyUtils.html)

```
Class<?> c = Class.forName("com.test."+id);
Language language = (Language)c.newInstance();
PropertyUtils.setProperty(language , "language",language_id); 
```

要么你专门投到，`Language`要么你可以把它保留为`Object`

```
Object object  = Class.forName("com.test."+id).newInstance();
PropertyUtils.setProperty(object, "language",language_id); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T16:52:40.630

由于您的类`Languages`没有定义默认构造函数，beanutils 无法进行反射。确保您的类中定义了默认构造函数。

# vim - Vim 和 ack-grep：quickfix 不打开文件

> ID：10901416
> 
> 赞同：1
> 
> 时间：2012-06-05T16:48:04.613
> 
> 标签：vim, ack

我不知所措。

我正在运行 Debian Lenny、vim 7.3，并且我已经尝试了 ack-grep 1.80 和 1.96。我将此行添加到我的 .vimrc 中：

```
let g:ackprg="ack-grep -H --nocolor --nogroup" 
```

[当我包含时，`--column`我得到一个错误，它不是一个有效的选项，这就是我尝试升级 ack-grep 的原因。]

当我执行`:Ack`时，快速修复窗口以这种形式显示匹配项：

```
|| folder/subfolder//file.rhtml:30:def do_it 
```

我可以使用`:cn`,`:cp`等方法。但我无法让 vim 打开文件。return 和 o 什么都不做。

我错过了什么？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T09:42:17.500

我刚刚在 Ubuntu 上遇到了同样的问题。为了解决它，我

*   `ack`删除了别名`ack-grep`

*   将此行添加到`.vimrc`：

`let g:ackprg = "ack-grep -H --nocolor --nogroup --column"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T12:44:52.630

尝试清空 Vim 中的所有内容（所有插件和设置），除了 ack-vim 必需的。这有帮助吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T18:01:04.880

尝试使用来自 github 的最新版本的 ack.vim：[https ://github.com/mileszs/ack.vim](https://github.com/mileszs/ack.vim)

我遇到了同样的问题，这为我解决了这个问题。

有关更多信息，请参阅此问题：[https ://github.com/mileszs/ack.vim/issues/36](https://github.com/mileszs/ack.vim/issues/36)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-05T16:56:37.430

I believe you need to escape the spaces. If you look at the `g:ackprg` in plugin/ack.vim, it looks like this:

```
let g:ackprg="ack\\ -H\\ --nocolor\\ --nogroup" 
```

Another solution would be to symlink your ack-grep to be ack to make up for the sadness of ack getting renamed ack-grep by your distro's packager. :-(

# c# - ListBox ItemTemplate IsExpanded 默认值内的 WPF 扩展器

> ID：10901421
> 
> 赞同：0
> 
> 时间：2012-06-05T16:48:29.087
> 
> 标签：c#, wpf, wpf-controls

我在 ListBox ItemControl.ItemTemplate 中有一个 Expander。数据绑定到 ListBox 后，每个 ListItem 上的所有扩展器都具有 IsExpanded = False。当手动将新的 ListItem 添加到 ListBox 时，我需要将 IsExpanded 默认设置为 true。我的 XAML 如下：

```
 <ListBox
    ScrollViewer.HorizontalScrollBarVisibility="Hidden" 
    ScrollViewer.CanContentScroll="False" 
    VirtualizingStackPanel.IsVirtualizing="False" 
    Grid.ColumnSpan="2" 
    HorizontalAlignment="Stretch" 
    Grid.Row="2" 
    Name="ArbitraryDataListbox"
    ItemsSource="{Binding ElementName=CurrentArbitraryDataListControl, Path=CurrentJob.AdditionalData}">
    <ListBox.Resources>
        <Style TargetType="{x:Type Expander}">
            <Setter Property="IsExpanded" Value="{Binding Path=IsSelected, RelativeSource={RelativeSource AncestorType={x:Type ListBoxItem}}}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="Beige"/>
            <Setter Property="Foreground" Value="#202020"/>
            <Setter Property="Background" Value="Beige"/>
        </Style>
    </ListBox.Resources>
    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <Expander Header="{Binding Path=Name}" Margin="0,8,0,0" IsExpanded="{Binding RelativeSource={RelativeSource self}, ElementName=ArbitraryDataListbox, Path=}">
                <Controls:ArbitraryDataControl 
                    Width="{Binding ElementName=ArbitraryDataListbox, Path=ActualWidth, Converter={StaticResource SubtractConverter}, ConverterParameter=10}" 
                    CurrentArbitraryData="{Binding}" 
                    CurrentJob="{Binding ElementName=CurrentArbitraryDataListControl, Path=CurrentJob}"/>
            </Expander>
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ListBox> 
```

我对 WPF 非常陌生，无法理解如何在 IsExpanded 上设置绑定，因此在手动打开新项目时确实如此。

感谢您提供任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T17:03:33.697

如果我理解您的代码，那么现在您已展开 ListBox 的 SelectedItem 并且其他项已折叠。如果选中项发生变化，旧选中项将折叠，新选中项将展开。

如果您希望能够将项目添加到集合中然后选择它，则应考虑使用 ListCollectionView。

ListCollectionView 环绕您的内部集合并公开一个“CurrentItem”。您可以轻松地将此类绑定到您的 ListBox，这将允许您在添加对象后调用 ListCollectionView.MoveCurrentTo(object) 来选择对象。

# android - 如何暂停Android Intent Service？

> ID：10901423
> 
> 赞同：-1
> 
> 时间：2012-06-05T16:48:32.150
> 
> 标签：android, android-service

}

一切正常，但是当按下暂停然后尝试恢复时，我仍然可以上传图像，但我无法将广播消息发送到活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T17:24:48.383

我假设 OP 的意思是他所说的，并且正在使用 IntentService 类，该类*确实*在自己的线程中运行。如果是这样，暂停服务正在执行的工作的一种方法是向它发送一个指示它暂停的 Intent。然后，您必须修改执行工作的代码以定期检查是否已发出暂停。

不过，我有点疑惑。为什么要暂停服务？它在后台运行，与用户在 Activity 中所做的事情异步。用户不得不暂停图像显示的用例是什么？处理此问题的一种方法是从 Activity 启动图像下载，然后允许用户在您的应用程序或其他应用程序中执行其他工作。下载所有图像后，发布通知并将 PendingIntent 附加到它。当用户单击通知时，控制权会传回您的应用程序。我认为这是使用异步工作实现应用程序生命周期的最佳模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T16:55:33.437

Services, by default, are not in their own Thread. So pausing the service is as simple as calling `Thread.sleep()`. However, assuming you are running a Thread in your Service, which I would do since you are uploading images, I would have a a flag in the while loop of the Thread's run method. This flag would be the `IsServicePaused` boolean that would pause or break out of the running loop.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T18:00:44.683

调用 Looper.loop() 并让它处理一条消息。

# android - 在 Android 库 Java 中使用用户定义的方法

> ID：10901435
> 
> 赞同：1
> 
> 时间：2012-06-05T16:49:28.453
> 
> 标签：android, reflection, dynamic, methods

我正在实现一个库，该库将被许多不同类型的媒体播放器使用。我需要使用一种`getPosition`因每个用户的视频播放器而异的方法。

目前，为了实现这一点，我已将我的库设为用户必须扩展的抽象类，然后`getPosition`用他们用来获取媒体播放器位置的任何对象/方法覆盖该方法。

我正在努力使我的类不必是抽象的，并且他们可以`getPosition`为我的库定义此方法而不必扩展我的抽象类（即）我不希望我的库类是抽象的。

我已经研究过使用反射，但我正在努力解决它，因为直到运行时我才知道类名/方法名/参数，我想要媒体播放器对象的特定实例的位置，这样我就可以获得最新的位置.

Java/Android 编程范式有什么好的做法？

反思是要走的路吗？如果是这样，我可以看到这个特定实例的一些示例代码（未知的类名/方法名/我的导入库使用的参数等......）

或者有没有更好的方法来完成这个/让我的类抽象成 Java 的方式？

如果用户不必扩展我的类并且可以只在对象上调用某种 setGetPosition() 方法，我更愿意再次这样做。

编辑：简单地说：我希望能够在我的库中使用未知类的 getPosition 方法，但我不希望我的整个类都是抽象的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T18:02:55.603

这就是接口的用途——强制执行 API 义务。

实现`Positionable`（或其他）的类可以（a）引用为 a `Positionable`，并且（b）处理对`Positionable`的方法的调用，例如`getPosition`.

考虑`List`接口：任何`implements List`必须有一堆特定方法的类，但它们不需要是子类。[它们*可能*是子类，但不一定*是*。]

通常，“插件”系统允许任意实现特定功能，并且使用接口指定功能。接口是 Java 提供的用于强制类遵守规范的最基本机制之一。

插件*可能会*使用反射，但会产生额外的开销、额外的复杂性，并且允许不合需要的运行时行为，正是因为没有像接口那样的编译器强制执行。

# cuda - 有什么区别：DRAM 吞吐量与全局内存吞吐量

> ID：10901441
> 
> 赞同：7
> 
> 时间：2012-06-05T16:49:54.453
> 
> 标签：cuda, gpu, gpgpu, nvidia

CUDA 分析器使用四个指标报告内核实现的**实际吞吐量：**

*   全局内存负载吞吐量
*   全局内存存储吞吐量
*   DRAM 读取吞吐量
*   DRAM 写入吞吐量

*CUDA C 最佳实践指南*将全局内存加载/存储吞吐量描述为实际吞吐量，并没有具体说明 DRAM 读/写吞吐量。

*CUPTI 用户指南*定义：

*   全局内存负载吞吐量为**((128*global_load_hit) + (l2_subp0_read_requests + l2_subp1_read_requests) * 32 - (l1_cached_local_ld_misses * 128))/(gputime)**
*   全局内存存储吞吐量为**(l2_subp0_write_requests + l2_subp1_write_requests) * 32 - (l1_cached_local_ld_misses * 128))/(gputime)**
*   DRAM 读取吞吐量为**(fb_subp0_read + fb_subp1_read) * 32 / gputime**
*   DRAM 写入吞吐量为**(fb_subp0_write + fb_subp1_write) * 32 / gputime**

我了解 DRAM 读/写吞吐量，因为 fb_subp* 计数器报告了许多 DRAM 访问（对于 32 字节访问增加 1）并为所有 SM 收集。所以我很清楚，吞吐量是根据 gputime 和访问的字节数计算的。

我不明白全局内存吞吐量定义。没有 global_load_hit 和 counter 的定义。我不明白为什么在这两种情况下都会减去 l1_cached_local_ld_misses 。

**在这种情况下，DRAM 与全局内存有什么不同吗？**

**如果我想知道内核的实际吞吐量是多少，我应该使用 DRAM 还是全局内存吞吐量指标？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T04:58:06.313

全局内存吞吐量是指令从全局地址空间请求的数据量。global_load_hits 是来自全局请求的 L1 缓存命中数（缓存行大小为 128 字节）。公式的其余部分通过计算对 L2 的所有访问来近似错过 L1 的访问的全局吞吐量。

全局内存是可以映射到设备内存和系统内存的虚拟内存空间。

DRAM 是物理设备内存（例如卡上的 GDDR5）。在 L2 未命中时访问 DRAM。以下虚拟地址空间可以位于 DRAM/设备内存中（全局、局部、常量、指令和纹理）。请注意，这些内存空间中有许多是虚拟地址空间，最终数据可以驻留在 DRAM 或系统内存中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T04:41:55.150

全局内存加载/存储通过缓存；他们中的一些人可能会受到打击或回写。这将避免访问 DRAM。因此，全局内存吞吐量取决于加载/存储请求的数量和缓存的命中/未命中率。

相比之下，DRAM 吞吐量仅基于 DRAM 访问来计算，没有考虑缓存的任何影响。

要在您的情况下测量内核吞吐量，您应该使用全局内存吞吐量，因为这些包括缓存效果。

# eclipse - 无法调试 erai-cdi 快速入门

> ID：10901449
> 
> 赞同：0
> 
> 时间：2012-06-05T16:50:36.470
> 
> 标签：eclipse, maven, errai

我已经使用 Maven 原型在 Eclipse 中安装了 erai-cdi 快速启动项目。但是当我运行目标“gwt：debug”时，“Gwt 开发模式”用户界面没有启动，目标执行在控制台中写入的这一行被阻止：“[INFO] 在地址监听传输 dt_socket：8000”。当我取消调试并重新启动它时，出现此错误：“[ERROR] 错误：传输错误 202：绑定失败：地址已在使用中”要解决此错误，我必须关闭 Eclipse。

我不知道这是一个错误还是我遗漏了什么谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:43:50.040

您应该使用`mvn gwt:run`.

当您使用 启动时`mvn gwt:debug`，Dev Mode 进程会在完成启动之前等待您连接 Java 调试器。如果您想执行此操作，请查看[本教程](http://javarevisited.blogspot.com/2011/02/how-to-setup-remote-debugging-in.html)，其中包含将 Eclipse 作为远程调试器附加的屏幕截图和分步说明。

# html - 在灯箱中嵌入 html5 youtube 视频（使用 fancybox）

> ID：10901450
> 
> 赞同：2
> 
> 时间：2012-06-05T16:50:45.767
> 
> 标签：html, video, youtube, fancybox, lightbox

我已经将视频嵌入到灯箱中，现在一切正常。如果我关闭我的 adobe flash player 插件，我会收到错误消息。我希望它切换到 html5 播放器（就像我将视频嵌入 iframe 一样）。

有已知的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T09:09:11.543

解决方案是使用 Fancybox2。如果 Flash 播放器已停用或未安装，它会自动切换到 HTML5 播放器。

# python - 使用 Django modpython 部署静态文件

> ID：10901454
> 
> 赞同：0
> 
> 时间：2012-06-05T16:50:51.800
> 
> 标签：python, django, django-urls, django-settings

我一直想知道使用 Django 时服务器是如何找到静态文件的。最近我将我的 Django 应用程序部署到服务器上，但在部署静态文件时遇到了麻烦。我总是收到如下错误：

```
Using the URLconf defined in cms.urls, Django tried these URL patterns, in this order:
^gre/
The current URL, static/, didn't match any of these. 
```

当我像这样要求我的css文件时`http://gnijuohz.com/static/css/bootstrap.css`

所以 1)

我是否必须对我的 urls.py 做一些事情才能找到我的 css 文件和 js 文件？

注意我在服务器上没有root权限，所以不能使用Django提供的collectstatic命令。

我确实在我的 setting.py 中设置了 STATIC_ROOT 和 STATIC_URL，以便 STATIC_ROOT 指向我的静态文件。

2)

我不清楚整个过程是如何运作的。当我请求我的 css 文件时，它是否会通过 urls.py 进行匹配？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T17:28:44.537

1.

不，Django 不应该在生产服务器上提供您的静态文件。Apache（或您使用的任何服务器）应该为静态文件提供服务，这些文件通常位于目录 /static/ 中。就是这样`collectstatic`做的：它从您的所有 Django 应用程序中收集所有静态文件并将它们放入，`STATIC_ROOT`以便您的服务器可以提供这些文件。

在本地，您可以通过调整`urlpatterns`in来提供静态文件`urls.py`。

很遗憾你不能使用`collectstatic`，因为这就是 Django 的用途。

2.

如上所述，这不是应该发生的事情。

现在，要回答您的问题，您可以在`STATIC_ROOT`您的静态文件所在的所有位置创建符号链接。因此，每个 Django 应用程序的每个静态目录都有一个符号链接。

# knockout.js - kendo 组合框和 kendo-knockout 动态添加/删除下一个可用值集

> ID：10901456
> 
> 赞同：0
> 
> 时间：2012-06-05T16:50:56.840
> 
> 标签：knockout.js, kendo-ui

当我尝试在组合框中设置下一个可用值时会出现问题，这就是我的情况。

我有一个显示在组合框中的可用项目列表，用户可以选择一个项目并分配，此时我将其添加到列表/表格中，用户可以从选定的项目中删除一个项目，然后它会返回到可用列表中。

现在，当完成以下操作时会出现问题 1）选择并分配几个项目（注意在组合框中选择了下一个可用项目） 2）从选定的列表/表格中删除一个项目（项目现在应该可以在组合框中选择）3 ) 现在尝试选择相同的项目并再次分配并注意组合框中的下一个可用值。

这是一个可以重现问题的 jsFiddle（仅适用于 chrome）[http://jsfiddle.net/navnitmehta/fHXBx/7/](http://jsfiddle.net/navnitmehta/fHXBx/7/)

我不确定这是否是剑道或剑道淘汰赛绑定的问题。

谢谢！

# ruby - 如何在 RVM 中升级 1.9.3 的 Ruby 补丁级别？

> ID：10901458
> 
> 赞同：3
> 
> 时间：2012-06-05T16:51:10.883
> 
> 标签：ruby, rvm, ruby-upgrade

根据之前的 StackOverflow 问题，将 Ruby 升级到最新补丁级别的正确方法是：

```
$ rvm upgrade 1.9.2 1.9.2-p0
Are you sure you wish to upgrade from ruby-1.9.2-p0 to ruby-1.9.2-p136? (Y/n): Y 
```

但是，这似乎对我不起作用：

```
$ rvm upgrade 1.9.3 1.9.3-p0
Are you sure you wish to upgrade from ruby-1.9.3-p194 to ruby-1.9.3-p0? (Y/n): n
Cancelling upgrade.
$ rvm upgrade 1.9.3-p0 1.9.3
Are you sure you wish to upgrade from ruby-1.9.3-p194 to ruby-1.9.3-p194? (Y/n): n
Cancelling upgrade.
$ rvm upgrade 1.9.3-p0 1.9.3-p194
Are you sure you wish to upgrade from ruby-1.9.3-p194 to ruby-1.9.3-p194? (Y/n): n
Cancelling upgrade.
$ rvm upgrade 1.9.3-p194 1.9.3-p0
Are you sure you wish to upgrade from ruby-1.9.3-p194 to ruby-1.9.3-p0? (Y/n): n
Cancelling upgrade. 
```

有没有更合适的方法来使用 RVM 升级 Ruby 版本？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-05T18:50:24.037

首先更新 RVM：

```
rvm get stable 
```

下一次升级红宝石：

```
rvm upgrade 1.9.2 
```

RVM 将自动检测 1.9.2 的现有版本，并检查它是否低于可用的最高补丁级别：

1.  如果可以更新，它将继续
2.  如果不能更新会报错

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T02:40:23.077

显然我已经安装了 ruby​​ 1.9.3-p194，所以我同时安装了 ruby​​ 和 1.9.3-p0。这就是升级命令令人困惑的原因。如果已经有更新的版本，它不会升级 1.9.3-p0...

# bash - 如何在 sed 命令中包含变量？

> ID：10901459
> 
> 赞同：0
> 
> 时间：2012-06-05T16:51:14.443
> 
> 标签：bash, unix, sed

```
grep -F "$name" -A1000 filename | sed -n '1p;19p;24p' 
```

假设`let a=10,b=20,c=30`。在上面的 grep 命令中，我可以使用`'$ap;$bp;$cp'`代替`'1p;19p;24p'`吗？

另一件事，我给出了`-A1000`. 这意味着从 1p 开始考虑到 1000 行，对吗？我需要在不提供数字的情况下搜索整个文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T17:00:53.003

如果要在引号内包含变量，则需要使用`"`而不是`'`.

如果您想为变量添加字母数字后缀，您需要指出它不是其名称的一部分。

```
sed -n "${a}p;${b}p;${c}p" 
```

或者：

```
sed -n "$a"'p;'"$b"'p;'"$c"'p' 
```

# php - 使用 PHP 从 MySQL 数据库中检索数据 - 时间管理

> ID：10901460
> 
> 赞同：0
> 
> 时间：2012-06-05T16:51:34.490
> 
> 标签：php, mysql, arrays

我需要有关如何从 DB (MySQl) 获取/显示一些信息的帮助

我当前的表格如下所示：

```
id | title | level | start_afterID | days | 

1  |   A   |   0   |       0       |   7  |
2  |   B   |   1   |       1       |   5  |
3  |   C   |   1   |       2       |   3  |
4  |   D   |   1   |       3       |   2  |
5  |   E   |   1   |       4       |   2  |
6  |   F   |   1   |       3       |   6  | 
```

级别“0”表示该作业将首先开始，开始日期和时间在其他表中 ( `$config_start`)

所有其他级别 = 1 的条目都没有固定的开始，只是他们开始`id`的工作 ( )。`start_afterID`

此外，每项工作都将在 DAYS 字段中持续天数。

在这个 ID 为 6（标题 F）的表作业中，必须在 jobID 3 之后开始 - 开始时间类似于：

```
$config_start + jobID 3 + jobID 2; 
```

这份工作的结束是：

```
$config_start + jobID 3 + jobID 2 + 6; 
```

最后，我需要按传入顺序显示数据库中的所有作业。

我尽力了，但我不知道如何检查所有父母级别并计算它。另外，我可以为此创建新的管理，也许有更好的插入新工作的方法？

**感谢您对此的任何帮助，**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T17:09:41.300

首先，我建议您重新考虑该`level`列 - IIUC 这只是一个布尔值，告诉您这是否是工作根 - 此信息也存在于 start_afterID 为 0 中。

现在计算开始时间和结束时间是一项非常重要的工作，需要大量的 DB avvess，所以我建议您创建第二个表`id|startday|endday`并以某种方式移动计算逻辑，以便更新这个（基本上是缓存）表工作变动，为您提供正常操作的快速查询路径。

要计算此时序表的内容，您可以执行以下操作

```
function docalc($after,$startday) {

    $sql="SELECT * FROM tablename WHERE start_afterID=$after";

    //Run the query, this depends on your framework used

    //Pseudocode from here - again depends on your framework
    foreach ($row) {
        $id=$row['id'];
        $endday=$startday+$row['days']; //This will not be a simple addition, depending on your data types

        //Adapt the following to your data types
        $sql="REPLACE INTO timingcache SET id=$id, startday=$startday, endday=$endday";
        //Run the query - depends on your framework

        docalc($id,$endday);

    } //for each row

}

//this assumes $config_start is set correctly
docalc(0,$config_start); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T17:21:37.090

如果我理解您想按`level`,`start_afterID`和对数据进行排序`days`。

在这种情况下，您必须进行选择：`select * from table order by level asc, start_afterID asc, days desc;`

# azure-sql-database - SQL Azure SPLIT AT 后端进程和资源限制

> ID：10901462
> 
> 赞同：2
> 
> 时间：2012-06-05T16:51:46.667
> 
> 标签：azure-sql-database

当发出 SPLIT AT 命令时，数据库被拆分为 2 个新的联合成员。这 2 个成员会坐在同一台服务器上吗？它们是否具有相同数量的 I/O、CPU 资源？如果应用程序必须增长到 50 个成员，除了 SPLIT AT 命令之外是否还需要其他任何东西来横向扩展？这 50 名成员会分布在多台服务器上吗？此操作是否需要单独的 SQL Azure Server 帐户？

当资源限制与 SQL Azure 一起出现时，可量化的限制是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T20:37:37.680

对 David 注释的一个更正：所有联合成员都分布到 sql azure 集群，因此**成员不会驻留在同一物理服务器上**。联合成员是系统中的常规数据库，它们的分布方式与 env 中的所有 db 在放置时的行为方式相同。包括成员在内的所有数据库都通过 sql azure 负载平衡引擎通过查看它们的资源利用率来放置在集群中。[我在这里](http://technet.microsoft.com/en-us/video/Video/hh872892)谈这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T17:33:26.163

是的，每个联合都在同一个数据库服务器上，只是单独的数据库。

有关限制的详细信息现在位于 SQL Azure Wiki 中，最近的 MSDN 博客文章讨论了[此处](http://blogs.msdn.com/b/windowsazure/archive/2012/06/04/sql-azure-connection-management-wiki-updated-with-throttling-and-long-transaction-limits.aspx)的各种 wiki 更新。

# java - 更改 YYYY/MM/DD -> MM/DD/YYYY java

> ID：10901471
> 
> 赞同：2
> 
> 时间：2012-06-05T16:52:38.297
> 
> 标签：java

我希望将我的日期格式更改为 MM/DD/YYYY，目前它在 YYYY/MM/DD 中​​。

我尝试研究它，但具有讽刺意味的是，它总是相反。现在有人可能会说向后尝试尝试从那里开始工作，但它没有用。

我的类调用所有的东西：

```
import java.util.*;
import java.text.*;

class Driver {   
   public static void main (String[] args) {    
       Kid kid;
       Node list = new Node(); 

       kid = createKid("Lexie", 2.6, "11/5/2009"); 
       insertEnd(list, kid);
       kid = createKid ("Sally", 2.3, "4/8/2009"); 
       insertEnd(list, kid);
       kid = createKid ("Joe", 2.7, "6/16/2009");
       insertEnd(list, kid);
       kid = createKid ("Bob", 2.2, "1/16/2009");
       insertEnd(list, kid);
       kid = createKid ("Tom", 3.1, "8/16/2009");
       insertEnd(list, kid);
       printList(list);
   } //end main method

   public static Kid createKid(String name, double height, String date) {
       return new Kid(name, height, date);
   }

} //end class     

import java.util.*; 
import java.text.SimpleDateFormat;
import java.io.*;
class Kid {  
    String name; 
    double height; 
    GregorianCalendar bDay; 

    ...
    /**
     * Second constructor for kid
     * Setting instances to equal the constructors of this
     * @param 1: Setting n (aka name,   but it was taken) to equal the instance var of name
     * @param 2: Setting h (aka height, but it was taken) to equal the instance var of height
     * @param 3: Setting date to equal the instance var of bDay with some modifications
     */
    public Kid (String n, double h, String date) {
        StringTokenizer st = new StringTokenizer(date, "/");
        this.name = n;
        this.height = h;
        this.bDay = new GregorianCalendar(Integer.parseInt(st.nextToken()), 
        Integer.parseInt(st.nextToken()), Integer.parseInt(st.nextToken()));
    }

    /**
     * public String toString() { 
     * Converting Java language to English language
     */
    public String toString() {

        return (this.name + ", Height: " + this.height + "ft., Born: "
        +       this.bDay.get(Calendar.DATE) + "/" + this.bDay.get(Calendar.MONTH) 
        + "/" + this.bDay.get(Calendar.YEAR));

    }
} //end class 
```

*顺便说一句，我不熟悉的简单日期格式类和日期格式类，并没有成功地尝试实现它们。*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T16:56:13.407

只需使用[`SimpleDateFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)转换`String`为`Date`. 无需为痛苦的`Calendar`API 烦恼。

```
String dateString = "2012/06/05";
Date date = new SimpleDateFormat("yyyy/MM/dd").parse(dateString); 
```

`Date`而是在整个代码中使用此对象。每当您需要将`Date`对象呈现给人类时，只需使用另一个`SimpleDateFormat`：

```
String dateString = new SimpleDateFormat("MM/dd/yyyy").format(date); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-16T22:26:46.247

# tl;博士

```
String output = LocalDate.parse( "2012/06/05".replace( "/" , "-" ) ).format( DateTimeFormatter.ofLocalizedDate( FormatStyle.SHORT ).withLocale( Locale.US ) ) ; 
```

# 细节

[BalusC](https://stackoverflow.com/a/10901526/642706)的答案是正确的，但现在已经过时了。

旧的日期时间类，例如`Date`和`Calendar`现在是遗留的。请改用 java.time 类。

# ISO 8601

您的输入字符串几乎符合[ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)标准。只需将斜杠字符替换为连字符即可。java.time 类默认解析/生成 ISO 8601 格式的字符串，无需定义格式化模式。

```
String input = "2012/06/05".replace( "/" , "-" ); 
```

# `LocalDate`

该类[`LocalDate`](https://docs.oracle.com/javase/8/docs/api/java/time/LocalDate.html)表示没有时间和时区的仅日期值。

```
LocalDate ld = LocalDate.parse( input ); 
```

要生成[ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)格式的输出，只需调用`toString`.

```
String output = ld.toString(); 
```

要生成其他格式的字符串，请使用[`DateTimeFormatter`](https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html). 通常最好通过指定一个`Locale`. 确定 (a) 翻译的`Locale`人类语言，(b) 大写、标点符号、部分排序等问题的文化规范。

```
DateTimeFormatter f = DateTimeFormatter.ofLocalizedDate( FormatStyle.SHORT ) ;
f = f.withLocale( Locale.US );  // Or Locale.CANADA_FRENCH etc.
String output = ld.format( f ); 
```

# 关于 java.time

java.time框架内置于 Java 8 及更高版本中[。](http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html)这些类取代了旧的麻烦的日期时间类，例如`java.util.Date`, `.Calendar`, & `java.text.SimpleDateFormat`。

[现在处于维护模式](https://en.wikipedia.org/wiki/Maintenance_mode)的[Joda-Time](http://www.joda.org/joda-time/)项目建议迁移到 java.time。

要了解更多信息，请参阅[Oracle 教程](http://docs.oracle.com/javase/tutorial/datetime/TOC.html)。并在 Stack Overflow 上搜索许多示例和解释。

许多 java.time 功能在 ThreeTen-Backport 中向后移植到 Java 6 和 7，并在[ThreeTenABP](https://github.com/JakeWharton/ThreeTenABP)中[进一步](http://www.threeten.org/threetenbp/)适应[Android](https://en.wikipedia.org/wiki/Android_(operating_system))。

ThreeTen [-Extra](http://www.threeten.org/threeten-extra/)项目通过附加类扩展了 java.time。该项目是未来可能添加到 java.time 的试验场。您可能会在这里找到一些有用的类，例如`Interval`、`YearWeek`、`YearQuarter`等。

# php - PHP memcache::addServer，权重

> ID：10901480
> 
> 赞同：2
> 
> 时间：2012-06-05T16:52:58.430
> 
> 标签：php, memcached

我的问题与 PHP Memcache 扩展的 addServer 函数中的“权重”参数有关。
在过去的几个月里，我一直在为所有服务器使用“weight = 1”。我现在正在尝试应用以下配置以最终从轮换中删除“10.10.10.3”并最大限度地减少数据丢失。
有了新的权重值，我的 PHP 客户端无法检索它曾经能够获取的键的值。如果我恢复为“weight = 1”，则可以毫无问题地获取所有键。

为了在“Memcache::addServer”中正确使用“权重”选项，是否有任何配置或任何我遗漏的东西？

感谢您的帮助。

```
 $hosts = array(
      array('ip' => '10.10.10.1', 'port' => 11211, 'weight' => 100),
      array('ip' => '10.10.10.2', 'port' => 11211, 'weight' => 100),
      array('ip' => '10.10.10.3', 'port' => 11211, 'weight' => 1),
      array('ip' => '10.10.10.4', 'port' => 11211, 'weight' => 100),
 );

 $memcache = new Memcache();
 foreach($hosts as $host) {
    $host['port'] = isset($host['port']) ? (int) $host['port'] : 11211;
    $host['weight'] = isset($host['weight']) ? (int) $host['weight'] : 1;
    $memcache->addserver($host['ip'], $host['port'], false, $host['weight'], 1, 15);
 } 
```

* * *

**PHP 版本**= 5.3.10

**Memcache PHP 变量**
- memcache 支持 => 启用
- memcache.allow_failover => 1 => 1
- memcache.chunk_size => 32768 => 32768
- memcache.compress_threshold => 20000 => 20000
- memcache.default_port => 11211 => 11211
- memcache.hash_function => crc32 => crc32
- memcache.hash_strategy => 一致 => 一致
- memcache.lock_timeout => 15 => 15
- memcache.max_failover_attempts => 20 => 20
- memcache.protocol => ascii => ascii
- memcache.redundancy => 1 => 1
- memcache.session_redundancy => 2 => 2

**Memcached 版本**
10.10.10.1 / 10.10.10.2 / 10.10.10.3 正在运行 1.4.5
10.10.10.4 正在运行 1.4.4

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-05T21:10:10.763

weight 参数影响用于确定从哪个服务器读取/写入密钥的一致散列。更改池中任何 1 台服务器的权重将导致一些缓存未命中。池中的服务器数量以及您更改权重的程度将影响您可能遇到的未命中次数。

您需要了解的是 memcached 是分布式的，这意味着由于您有 4 个服务器，因此密钥分布在每个服务器之间（尽可能接近均匀[权重会影响均匀分布]）。如果一台服务器出现故障，则无法再访问存储在该服务器上的数据，并且必须从数据库中获取数据，因为它在任何其他服务器上都不可用。*请注意，PHP 扩展`memcache`和`memcached`只是访问`memcached`集群的客户端（memcached 是两者中较新的，支持更多功能，但两者都与 memcached 集群中的服务器通信）。

当您想从缓存中存储或检索值时，会计算一个哈希值，该哈希值确定应该从集群中的哪个位置放置或读取数据。说明这一点的常用方法是使用 360 度圆，如下所示。您计算一个哈希，并使用它在圆圈中“最接近”的节点。添加或删除服务器，或更改任何一台服务器的权重都会影响散列的结果并导致未命中。

![在此处输入图像描述](../Images/86482e981d0bfa304dd215537811480d.png)
资料来源：[http ://alpha.mixi.co.jp/blog/?p=158](http://alpha.mixi.co.jp/blog/?p=158)

如果您想慢慢地将服务器从集群中移出，我建议逐渐降低其权重，直到它为 0，然后您可以将服务器从列表中完全删除。请记住，权重的任何微小变化都可能/将导致缓存未命中，但是权重变化的幅度（以及您拥有的服务器数量）会影响您将经历的未命中次数。

这是[Memcached 教程故事](http://code.google.com/p/memcached/wiki/TutorialCachingStory)中的一个片段，它也可能有助于解释其中的一些内容。

前言是两个系统管理员建立了一个有 3 台服务器的 memcached 集群，并告诉 memcached 在每台服务器上使用 1GB...

> 因此，他再次获取程序员使用的密钥并在他的 memcached 服务器上查找它们。'get this_key' 'get that_key' 但每次他这样做时，他只能在一个 memcached 上找到每个键！现在你为什么要这样做，他想？他整晚都在困惑。这太傻了！您不希望密钥位于所有 memcached 上吗？
> 
> “但是等等”，他想“我给每个 memcached 1 GB 的内存，这意味着我总共可以缓存 3 GB 的数据库，而不仅仅是一个！哦，伙计，这太棒了，”他想。“这将为我节省大量现金。布拉德·菲茨帕特里克，我爱你的屁股！”
> 
> “但是，嗯，下一个问题，这是一个令人困惑的问题，这个网络服务器就在这里，这个运行 memcached 它很旧，它有病，需要升级。但为了做到这一点，我必须让它离线！会发生什么到我可怜的内存缓存集群？嗯，让我们找出答案，”他说，然后关闭了盒子。现在他看着他的图表。“哦，不，DB 负载，它已经大步向前了！负载不是一个，现在是两个。嗯，但仍然可以忍受。所有其他 memcached 仍在获得流量。这还不错。只是一个几次缓存未命中，我的工作几乎完成了。所以他重新打开机器，让 memcached 恢复工作。几分钟后，数据库负载再次下降到 1，它应该一直在这个位置。
> 
> “缓存自己恢复了！我现在明白了。如果它不可用，那只是意味着我的一些请求被遗漏了。但这还不足以杀死我。这很甜蜜。”

道德是存储在 memcached 中的值仅存储在一台服务器上（即密钥分布在所有服务器中），如果其中任何一台服务器不可用，则数据无法从缓存中获取，必须从源中获取.

为了从集群中的正确节点正确存储和检索数据，密钥必须[一致地散列](http://code.google.com/p/memcached/wiki/NewCommonFeatures#Consistent_Hashing)，以便客户端知道哪个服务器是池中该特定密钥的正确服务器。

正如您可能猜到的那样，不同的客户端使用不同的散列技术，因此使用 Perl 客户端和 PHP 客户端来存储/检索值将无法按预期工作，因为它们的散列方式不同。例外情况是任何使用[libmemcached](http://libmemcached.org/libMemcached.html)的客户端，从那时起它们都将使用相同的散列算法。PHP 的[memcached](http://php.net/memcached)扩展使用`libmemcached`，而[memcache](http://php.net/memcache)没有使用它自己的散列算法（据我所知）。

进一步阅读：
- [memcached wiki](http://code.google.com/p/memcached/wiki/NewStart?tm=6)和[学习 memcached 的冒险](http://code.google.com/p/memcached/wiki/TutorialCachingStory)
-[一致哈希](http://www.tomkleinpeter.com/2008/03/17/programmers-toolbox-part-3-consistent-hashing/)
-[分布式哈希表](http://offthelip.org/?p=149)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T18:10:05.073

~~问题是您使用的是[memcache](http://us3.php.net/manual/en/intro.memcache.php)与[memcached](http://us.php.net/manual/en/intro.memcached.php)。Memcached 是分布式的，这意味着添加到池中的所有服务器都充当一个缓存服务器。因此，如果 server1 已关闭，您仍然可以检索键/值，因为它们分布在其他三个服务器上。而使用 memcache (no d)，~~每个服务器基本上都是一个孤岛，这意味着存储在 server1 上的键/值不能保证出现在任何其他缓存服务器上。

如果您想弃用有问题的缓存服务器，我建议在您的 api 调用中添加一些额外的逻辑以从持久存储中提取值，然后将其存储在至少两个其他有效缓存服务器中。我见过一些项目，其中缓存值将保存在两台缓存服务器之间，以确保一台服务器不再响应，另一台服务器可以弥补这一不足。

**- 更新 -**

无论使用哪个 PHP 内存缓存 API，如果从池中删除服务器，将导致缓存未命中驻留在现在丢失的服务器上的键。当`$cache->get()`失败并进入持久存储并被`$cache->set()`调用时，缓存现在将存储在不同的活动服务器上。感谢 Drew010 对此的澄清。

如果您绝对不能承受任何缓存未命中，您仍然可以编写您的应用程序以将相同的缓存值写入多个服务器。

# clojure - 运行 clojure 程序的典型方式

> ID：10901481
> 
> 赞同：20
> 
> 时间：2012-06-05T16:53:15.537
> 
> 标签：clojure

我是 Clojure 的新手，对如何运行 Clojure 程序感到非常困惑。

我的第一个问题是每个 Clojure 程序是否都是 Leiningen 包？如果我想写作，我是从创建一个新的 Leiningen 项目开始吗？是否有运行类似于 Python（即`python pyfile.py`）的 Clojure 程序

我意识到这可能是一个愚蠢的问题，但我已经对此感到困惑了一段时间，而且我读过的几本书/教程似乎并没有正确回答这个问题。到目前为止，我一直在 REPL 中运行 Clojure 代码。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-05T19:12:33.650

既然你直接找到了 leiningen，你就走在了正确的轨道上。这不是一个愚蠢的问题，因为回答它会帮助其他人获得更好的谷歌搜索结果。

*   每个 clojure 程序都应该是一个单独的 leiningen 项目，因此您可以`lein new project-name`为每个程序运行。

*   `java -jar myproject-standalone.jar`构建 Clojure 项目的结果与构建 Java 项目的结果相同，例如可以运行的 JAR 文件

*   leiningen 可以为您构建一个包装器 shell 脚本，该脚本会生成一个仅调用 java -jar 的 .sh 文件

*   当我在工作中运行 clojure 程序时，我们只需将它们从 git 中检查出来，然后`lein run`在目录中调用（实际上 Jenkins 就是这样做的）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-05T20:31:12.990

添加到 Arthur Ulfeldt 的出色答案的一件事是 lein 为您创建了一个 project.clj，并且您的 main 函数（程序开始执行的函数）可以在其中定义。默认情况下，Leiningen 在名为`core.clj`For example 的文件中创建 main 函数：

```
(defproject music "1.0.0-SNAPSHOT"
  :description "A workspace for my music experiments"
  :dependencies [
    [org.clojure/clojure "1.3.0"]
    [org.clojure/math.combinatorics "0.0.1"]
  ]
  :main music.core) 
```

现在我的项目可以使用：

```
lein run 
```

并且music.core中的主要功能将被运行。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-09-06T02:59:00.540

回答部分问题：“是否有运行类似于 Python 的 Clojure 程序？” 你真的可以像这样运行一个 clojure 脚本（称为`hello.clj`）：

```
(println "Hello!") 
```

像这样：

```
clojure hello.clj 
```

编辑：以下应该适用于*所有*系统：

```
java -jar <path-to-clojure-jar>/clojure.jar hello.clj 
```

在我的系统上，clojure.jar 文件位于 /usr/share/clojure/clojure.jar 中。启动 clojure 的 linux 命令只是简单地运行一个类似于上面的命令。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-06-06T12:29:36.337

可能最简单的方法是使用`lein-exec`运行 Clojure 脚本：

[http://charsequence.blogspot.in/2012/04/scripting-clojure-with-leiningen-2.html](http://charsequence.blogspot.in/2012/04/scripting-clojure-with-leiningen-2.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-06T00:47:22.143

我的 bash clojure 脚本：

```
#!/bin/sh

export CLOJURE_EXT=$HOME/.clojure
export CLOJURE_OPTS="-Xmx1g -server"

LIBS=$(ls -1 $CLOJURE_EXT/* 2> /dev/null)
export CLASSPATH=.:$CLOJURE_EXT:$CLASSPATH:"$(echo "$LIBS" | tr \\n :)"

JAVA=${CLOJURE_JAVA:-java}
OPTS=${CLOJURE_OPTS:-}
MAIN=${CLOJURE_MAIN:-clojure.main}

breakchars="(){}[],^%$#@\"\";:''|\\"

if [ $# -eq 0 ]; then
    exec rlwrap --remember -c -b $breakchars \
        -f $HOME/.clj_completions \
        --history-filename=$HOME/.clj_history --histsize=1000000 \
        $JAVA $OPTS $MAIN -i $HOME/.clojure.clj --repl
else
    exec $JAVA $OPTS $MAIN "$@"
fi 
```

将它们保存到$HOME/bin/clojure，chmod +x $HOME/bin/clojure，将clojure.jar和第3方库复制到$HOME/.clojure，你可以运行`clojure your_program.clj`为python pyfile.py

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-12-26T01:24:47.597

作为更新，处理 clojure 程序的一种简单方法是使用[leiningen](http://leiningen.org/)

如果要运行小型 clojure 脚本，请使用[lein-exec](https://github.com/kumarshantanu/lein-exec)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-20T02:25:08.120

在您的文件中创建别名`.bashrc`，或等效：

`alias clojure="java -jar path/to/clojure-x.x.x.jar"`

然后你可以`clojure my-file.clj`在你的终端中运行。

# linux - 从制表符分隔的文件中删除重复的单词/字符串

> ID：10901492
> 
> 赞同：3
> 
> 时间：2012-06-05T16:54:08.423
> 
> 标签：linux, sed, awk

我想使用 Linux 命令从一个大的制表符分隔文件中删除重复的单词/字符串。

```
names            john, cnn, mac, tommy, mac, patrick, ngc, discovery, john, cnn, adam, patrick
cities            san jose, santa clara, san franscisco, new york, san jose, santa clara 
```

以上是文件格式，我想去掉重复词后保留制表符和逗号。

```
names            john, cnn, mac, tommy, patrick, ngc, discovery, adam
cities            san jose, santa clara, san franscisco, new york 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T17:06:38.223

```
awk 'BEGIN {
         FS = ", |\t"
     }
     {
          printf "%s\t", $1
          delim = ""
          for (i = 2; i <= NF; i++) {
              if (! ($i in seen)) {
                  printf "%s%s", delim, $i
                  delim = ", "
              }
              seen[$i]
          }
          printf "\n"
          delete seen
     }' inputfile 
```

如果你没有使用 GNU AWK ( `gawk`) 那么你不能`delete`使用数组，`split("", array)`而是使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T17:02:47.760

`sed`并且`awk`它们本身并不是特别适合这个。`uniq`更好。

首先将名称提取到另一个文件中，例如`names`. 您可以为此使用 sed：

```
head -1 inputfile | sed 's/^names\s*//g' > names 
```

所以现在名称包含`john, cnn, mac, tommy, mac, patrick, ngc, discovery, john, cnn, adam, patrick`.

然后使用这个：

```
awk 'BEGIN{RS=","}{print $0}' names | sort | uniq | awk 'BEGIN{ORS=","}{print $0}' 
```

输出是`adam,cnn,discovery,john,mac,ngc,patrick,tommy,`。如果您想使用，也可以删除最后一个逗号`sed`。当然，您也可以将`head`命令的输出通过管道传输到第二个`awk`。在这种情况下，您将不需要中间`names`文件。

城市也一样。我假设顺序对你来说并不重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T21:14:36.303

这可能对您有用：

```
sed -i ':a;s/\(\(\<[^,]*\),.*\)\( \2,*\)/\1/;ta;s/,$//' /tmp/a 
```

# wcf - WCF 应用程序设计

> ID：10901493
> 
> 赞同：0
> 
> 时间：2012-06-05T16:54:14.223
> 
> 标签：wcf, oracle, ibm-mq

我开始开发一个简单的 WCF 应用程序，该应用程序从 Oracle 11g DB 表中查询数据并将消息排入 Websphere MQ 5.3。我不确定设计此应用程序的最佳方式。

当对表进行更改时，我应该使用 Oracle 触发器通知 WCF，还是应该使用 WCF 不断轮询 DB 表以进行更改？

另外，如何让我的 WCF 与 Websphere MQ 5.3 进行通信？我已经进行了足够的研究，发现较新版本的 Websphere MQ 7.1 带有 WCF 的自定义通道，但我不知道如何让 WCF 与 5.3 一起使用。

有人告诉我，我们不使用 Microsoft Biztalk 或 Oracle 数据库更改通知 (ODBN)。我是否应该向我的主管推荐我们将 Websphere MQ 升级到 7.1 并同时使用 Biztalk 或 ODBN？

我是使用 WCF、Oracle 和 Websphere MQ 的新手，我不确定该采取哪个方向。任何帮助我解决这个问题的链接或资源将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-06T04:14:57.467

MQ 5.3 不受支持。所以不建议使用不支持的产品。正如您发现 MQ v5.3 中不提供 WCF 支持。WCF 支持可从 MQ v7.0.1 获得。所以你必须至少升级到 MQ v7.0.1。

MQ WCF 提供了一个自定义通道，使用该通道可以在 MQ 上托管 Web 服务，并且客户端可以使用自定义通道调用这些 Web 服务。

如果您打算使用 MQ WCF 仅将消息放入队列而不开发任何 Web 服务，那么最好查看 MQ .NET 类或 XMS .NET 类。MQ .NET 类为与 MQ 队列/主题进行消息传递提供 OO API，而 XMS .NET 提供类似 JMS 的 API。

我的 2 美分在另一部分：发生更改时接收来自 Oracle DB 的通知比轮询更好。在 Oracle 中可能有一种方法，您可以注册一个回调或侦听器，当表发生更改时调用该回调或侦听器。

# jquery - 根据另一个设置一个div的宽度

> ID：10901494
> 
> 赞同：2
> 
> 时间：2012-06-05T16:54:18.467
> 
> 标签：jquery, css, width

我有以下问题。每次用户单击锚点时，我都需要设置一个 div 的宽度。此 div 的宽度应取自另一个 div。如何做到这一点？

以下代码不起作用（请记住，该脚本包含在 PHP echo 中）：

```
jQuery(".geother").click(function(){
var pos=$("p.second").width() + "px";
jQuery("#headerRightContactPhone span").css(\'width\', pos);
} 
```

编辑（我还需要另一件事，我想应用到左侧的“geother”div CSS，这将是 pos 宽度+230px 的负值）：

```
jQuery(".geother").click(function(){
   var pos = $("p.second").width(); // don't need to use 'px'
   jQuery("#headerRightContactPhone span").css('width', pos); // don't need escaping
   $(this).css('left', ((230+pos)*-1) );
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T16:54:51.830

```
jQuery(".geother").click(function(){
   var pos = $("p.second").width(); // don't need to use 'px'
   jQuery("#headerRightContactPhone span").css('width', pos); // don't need escaping
}); //  you missed ');' here 
```

### 笔记

您应该需要给`display: block`您`span`或使用任何块元素`div`，例如`p`等。

```
jQuery(".geother").click(function(){
       var pos = $("p.second").width(); // don't need to use 'px'
       jQuery("#headerRightContactPhone span").css({
                     width: pos, 
                     display: 'block',
                     left: '-' + (230+pos)
               }); // don't need escaping
    }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T16:57:26.217

您是否将宽度应用于跨度元素？这就是问题所在。将跨度设为块或使用 div。

# c# - 访问路径被拒绝...为什么？

> ID：10901495
> 
> 赞同：0
> 
> 时间：2012-06-05T16:54:19.217
> 
> 标签：c#, asp.net

整个早上都有 ASP.NET 问题，现在我有了一个新问题

```
string filepath = "";
filepath = Server.MapPath(Request.QueryString["fileDownloadable"]);
if (filepath != null)
{
    Response.Clear();
    Response.AddHeader("content-disposition", "attachment; filename=MyPDF.pdf");
    Response.WriteFile(filepath);
    Response.ContentType = "";
    Response.End();
} 
```

在第 18 行给我一个错误`Response.WriteFile(filepath);`，它说 Access to the path is denied....为什么要这样做？

来自`Request.QueryString["fileDownloadable"]`此代码...

`<li><a href="./DownloadableProducts.aspx?fileDownloadable=/downloadableProducts/MyPDF.pdf" runat="server">IPC Client Personal Financial Website Feb 12</a></li>`

我检查了文件夹的权限，它们具有与我的根目录中的所有其他文件夹相同的权限。

请问有什么建议吗？

我在后面的代码之间运行了这段代码，以查看文件是否存在..

```
if(File.Exists(filepath)){
} 
```

它运行页面没有错误，但页面的功能没有工作，这告诉我文件路径不存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T17:02:18.790

对该路径的访问可能会被拒绝，因为它可能不存在。在简单地将文件爆破之前，`Response.WriteFile`您应该至少先检查一下文件是否存在。这也将使您有机会确保它试图获得的路径将起作用。

还要记住，它不会知道您在 Web 应用程序范围内处理的“相对”路径。您应该确保使用其中一个`Server.MapPath`或某些配置设置，以确保您的`filepath`变量看起来像操作系统上的绝对路径，例如`E:\Inetpub\wwwroot\...`.

# javascript - 解析 x 属性的意外值 NaN

> ID：10901501
> 
> 赞同：4
> 
> 时间：2012-06-05T16:54:43.940
> 
> 标签：javascript, raphael

我用 javascript 和 raphael 写了一个花哨的热图，它工作得很好而且完美无缺。现在，在我完成任务并去其他牧场三个月后，我收到了这个错误：

```
Unexpected value NaN parsing x attribute 
```

...在前导实例中使用特定的代码片段指示此错误发生的位置。（是的，错误列出了大约 500 多次，但只有前导实例给出了发生错误的代码行。）

我环顾四周，没有发现任何实质性的东西可以引导我找到解决方案。所以，我设法删除了主要实例中列出的代码，希望能解决问题。和往常一样，它传播到另一行代码，这次是在 Raphael.js 代码中......

如何解决这个问题？我不想修复 Raphael 代码，如果我不需要...任何帮助将不胜感激。

更多代码

```
function todayBand(){
    // Band which represents *TODAY*
    for (var i=2; i<47; i++){
        xx = parseInt(calcOffset+i*hour_millis/(2*timeZoom)); x2 =  xOff(xx-100,220);           
        pp = "p_"+i;
        window[pp] = paper.path("M "+xx+" 350 l "+x2+" -220 z").attr("stroke", "#999").toBack();   //PRESENT TIME LINE IN RED
        window[pp].class="paths";
        paper.path("M "+xx+" 350 l 0 15 z").attr("stroke", "#aaa" ).toBack();   //PRESENT TIME LINE IN RED
    }
} 
```

TIA

丹尼斯

# ios - performSelector:afterDelay 与 NSTimer:ScheduleTimerWithTimeInterval

> ID：10901502
> 
> 赞同：2
> 
> 时间：2012-06-05T16:54:50.710
> 
> 标签：ios

我有一个我想在一段时间延迟后执行（不重复）的方法。

我可以使用 performSelector:afterDelay 或者我可以安排一个 NSTimer 并将选择器指定为它的参数。

如果最终结果相同（即我的方法将在指定的时间延迟后被调用），那么使用其中一个的优点/缺点是什么。我用哪一个不重要吗？

（如果相关，我的方法将在前台和当应用程序在通过 beginBackgroundTaskWithEcpirationHandler 可用的 10 分钟窗口期间移动到后台时被调用）。

TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T17:07:02.620

来自 NSObject 类关于 performSelector: 方法的苹果参考

> 此方法设置一个计时器以在当前线程的运行循环上执行 aSelector 消息。定时器配置为在默认模式下运行（NSDefaultRunLoopMode）。当计时器触发时，线程尝试将消息从运行循环中取出并执行选择器。如果 run loop 正在运行并且处于默认模式，则成功；否则，计时器会一直等待，直到运行循环处于默认模式。

所以如果你只想打一个电话，我想你可以自由使用`performSelector:afterDelay:`

# forms - Embed a Collection of Forms in symfony2

> ID：10901519
> 
> 赞同：2
> 
> 时间：2012-06-05T16:55:58.263
> 
> 标签：forms, symfony, doctrine-orm

hey guys I'm new at symfony2 and I'm trying to do a simple application!

I have 3 entities, called "CarInquerito", "CarPergunta" and "CarResposta" and they are related as you can see on "interesting" code below. All these properties have appropriate gets/sets.

What I pretend is when I create a form from CarInquerito, I embed a form from CarPergunta and a form from CarResposta to that CarPergunta form. I've already accomplished embedding a collection of CarResposta to CarPergunta form, but when I try to embed the result of this to CarInquerito it seems not to work.

```
class CarInquerito
{
     /**
     * @ORM\OneToMany(targetEntity="CarPergunta", mappedBy="idInquerito", cascade={"persist"})
     */
    private $perguntas;
}

class CarInqueritoType{
    $builder->add('perguntas', 'collection', array(
            'type' => new CarPerguntaType(),
            'allow_add' => true,
            'by_reference' => false,
            'prototype' => true,
            'allow_delete' => true,
            ));
}

class CarInquerito
{
 /**
     * @var CarInquerito
     *
     * @ORM\ManyToOne(targetEntity="CarInquerito", inversedBy="perguntas")
     * @ORM\JoinColumns({
     *   @ORM\JoinColumn(name="id_inquerito", referencedColumnName="id", onUpdate="cascade", onDelete="cascade", nullable = false)
     * })
     */
    private $idInquerito;

  /**
     * @ORM\OneToMany(targetEntity="CarResposta", mappedBy="idPergunta", cascade={"persist"})
     */
    private $respostas;
}

class CarPerguntaType{
   $builder->add('respostas', 'collection', array(
            'type' => new CarRespostaType(),
            'allow_add' => true,
            'by_reference' => false,
            'prototype' => true,
            'allow_delete' => true,
            ));
}

class CarResposta{
   /**
     * @var CarPergunta
     *
     * @ORM\ManyToOne(targetEntity="CarPergunta", inversedBy="respostas")
     * @ORM\JoinColumns({
     *   @ORM\JoinColumn(name="id_pergunta", referencedColumnName="id", onUpdate="cascade", onDelete="cascade", nullable = false)
     * })
     */
    private $idPergunta;
}

class CarRespostaType{
  $builder->add('resposta', 'text');
} 
```

Now the controller:

```
public function newAction() {

        $CarInquerito = new CarInquerito();
        $form = $this->createForm(new CarInqueritoType(), $CarInquerito);

        return $this->render('CareAdminBundle:CarInquerito:new.html.twig', array(
                    'form' => $form->createView(),
                ));
    } 
```

Now the views: new.html.twig:

```
<div class="inqueritos">
<div class="perguntas-list">
<ul class="perguntas" data-prototype="{% filter escape %}{% include 'CareAdminBundle:CarInquerito:prototypePergunta.html.twig' with {'form': form.perguntas.get('prototype')} %}{% endfilter %}">
        {% for pergunta in form.perguntas %}
            <li>
            {{ form_widget(pergunta.pergunta) }} 
            </li>
        {% endfor %}

       </ul>
</div>
</div> 
```

---protoypePergunta.html.twig----------

```
<div class="respostas-list" style="background-color: red; padding: 10px;">
    <ul class="respostas" data-prototype="{{ form_widget(form.respostas.get('prototype')) | e }}">
       {% for resposta in form.respostas %}
        <li>{{ form_widget(resposta.resposta) }}</li>
     {% endfor %}

    </ul>
</div> 
```

I have a javascript file where I add and remove links to add "Pergunta" and "Respostas" like below:

```
$(document).ready(function(){    

    var collectionHolderPerguntas = $('ul.perguntas');

    collectionHolderPerguntas.find('li').each(function() {
        addPerguntaFormDeleteLink($(this));
    });

    // setup an "add a tag" link
    var $addPerguntaLink = $('<a href="#" class="add_pergunta_link">Adicionar pergunta</a>');
    var $newLinkLi = $('<li></li>').append($addPerguntaLink);

      // add the "add a tag" anchor and li to the tags ul
    collectionHolderPerguntas.append($newLinkLi);

    $addPerguntaLink.on('click', function(e) {
        // prevent the link from creating a "#" on the URL
        e.preventDefault();

        // add a new tag form (see next code block)
        addPerguntaForm(collectionHolderPerguntas, $newLinkLi);
    });

    var collectionHolderRespostas = $('ul.respostas');
    collectionHolderRespostas.find('li').each(function() {
        alert("OL");
        addRespostaFormDeleteLink($(this));
    });

    // setup an "add a tag" link
    var $addRespostaLink = $('<a href="#" class="add_resposta_link">Adicionar resposta</a>');
    var $newLinkLiResposta = $('<li></li>').append($addRespostaLink);

    // add the "add a tag" anchor and li to the tags ul
    collectionHolderRespostas.append($newLinkLiResposta);

    $addRespostaLink.on('click', function(e) {
        // prevent the link from creating a "#" on the URL
        e.preventDefault();

        // add a new tag form (see next code block)
        addRespostaForm(collectionHolderRespostas, $newLinkLiResposta);
    });

});

function addPerguntaForm(collectionHolderPerguntas, $newLinkLi) {
    // Get the data-prototype we explained earlier
    var prototype = collectionHolderPerguntas.attr('data-prototype');

    // Replace '$$name$$' in the prototype's HTML to
    // instead be a number based on the current collection's length.
    var newForm = prototype.replace(/\$\$name\$\$/g, collectionHolderPerguntas.children().length);

    // Display the form in the page in an li, before the "Add a tag" link li
    var $newFormLi = $('<li></li>').append(newForm);
    $newLinkLi.before($newFormLi);

     // add a delete link to the new form
    addPerguntaFormDeleteLink($newFormLi);
}

function addPerguntaFormDeleteLink($perguntaFormLi) {
    var $removeFormA = $('<a href="#">apagar</a>');
    $perguntaFormLi.append($removeFormA);

    $removeFormA.on('click', function(e) {
        // prevent the link from creating a "#" on the URL
        e.preventDefault();

        // remove the li for the tag form
        $perguntaFormLi.remove();
    });
}

function addRespostaForm(collectionHolderRespostas, $newLinkLiResposta) {

    // Get the data-prototype we explained earlier
    var prototype = collectionHolderRespostas.attr('data-prototype');
    // 
    // Replace '$$name$$' in the prototype's HTML to
    // instead be a number based on the current collection's length.
    var newFormResposta = prototype.replace(/\$\$name\$\$/g, collectionHolderRespostas.children().length);

    // Display the form in the page in an li, before the "Add a tag" link li
    var $newFormLiResposta = $('<li></li>').append(newFormResposta);
    $newLinkLiResposta.before($newFormLiResposta);

    // add a delete link to the new form
    addRespostaFormDeleteLink($newFormLiResposta);
}

function addRespostaFormDeleteLink($respostaFormLi) {
    var $removeFormA = $('<a href="#">apagar</a>');
    $respostaFormLi.append($removeFormA);

    $removeFormA.on('click', function(e) {
        // prevent the link from creating a "#" on the URL
        e.preventDefault();

        // remove the li for the tag form
        $respostaFormLi.remove();
    });
} 
```

Any suggestions guys? I search all day, and I have tried a lot of things but I didn't manage to find a solution.

Any help is appreciated!

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T14:16:46.913

您需要在 newAction() 中的对象“CarInquerito”中放入一些数据。[就像表单集合食谱](http://symfony.com/doc/current/cookbook/form/form_collections.html)中的这个例子：

```
$tag1 = new Tag();
        $tag1->name = 'tag1';
        $task->getTags()->add($tag1);
        $tag2 = new Tag();
        $tag2->name = 'tag2';
        $task->getTags()->add($tag2);
        // end dummy code

        $form = $this->createForm(new TaskType(), $task); 
```

如果您不这样做，则不会创建嵌入式表单。

# matlab - 如何将同一文件的两个部分加载到两个不同的矩阵？（matlab）

> ID：10901520
> 
> 赞同：0
> 
> 时间：2012-06-05T16:55:59.447
> 
> 标签：matlab, file-io, matrix

我有一个文件（file.csv）用以下格式填充整数：

```
1,2,3,4,5,6,7,8,9,100
2,5,1,3,4,6,7,8,10,200 
```

我知道使用此代码：

```
load('FILE.csv')
x = FILE 
```

`x`将是一个`NxM`矩阵，其中..

*   `N`是文本文件中的行数（在上面的示例中`N=2`：）
*   `M`是每行中的数字数量（除以逗号）（在上面的示例中`M=10`：）

我的目标是类似的。

我想得到**两个**矩阵：

第**一个**矩阵（y）：这是与“x”相同的矩阵，但**没有**最后一列（在上面的示例中，这与在矩阵中加载以下文件相同：

```
 1,2,3,4,5,6,7,8,9
   2,5,1,3,4,6,7,8,10 
```

所以结果矩阵是一个`N*(M-1)`矩阵 ( `N=2`, `M=10`) ==> 2 rows , 9 columns

```
 |1 2 3 4 5 6 7 8 9 |
   |2 5 1 3 4 6 7 8 10| 
```

第二**个**矩阵：这是剩余的列（或更简单地说：一个 N*1 矩阵**，最后一列的每个元素**都有一行）

在上面的示例中，矩阵将是：

```
|100|
|200| 
```

最简单的方法是什么？（我是 MATLAB 初学者）。

提前感谢您的任何提示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T17:14:13.753

最简单的方法是`FILE`在加载后手动拆分变量

```
y=FILE(:,1:end-1);
x=FILE(:,end); 
```

如果您的数据文件很大并且您担心内存不足，那么您可以使用导入文件`csvread`

```
 y=csvread('file.csv',0,0,[0 0 n-1 m-2] # reads the first m-1 columns and n rows
 x=csvread('file.csv',0,m-1) %# reads the mth column 
```

但是您首先需要知道行数和列数。

# powershell - check to see if the website is up and running from powershell

> ID：10901521
> 
> 赞同：1
> 
> 时间：2012-06-05T16:56:00.597
> 
> 标签：powershell

i'am trying to login to a web site and see it's up and running, below is my powershell code and the error. could somebody please let me know where am i doing wrong.

```
$ie = New-Object -ComObject "internetExplorer.Application" 
$ie.Visible = $true 
$ie.Navigate("https://www.Mysite.net/websuite/index.do"); 

while ($ie.Busy -eq $true){Start-Sleep -Milliseconds 20000}; 

$doc = $ie.Document 

$LoginName = $doc.getElementsByName("abcdef") 

$LoginName.value = "XXXXXX" 

$txtPassword = $doc.getElementsByName("123456")

$txtPassword = "XX_XXXXXX" 

$btnLogin = $doc.getElementsByName("cmdLogin") 
```

..and the error i'am getting at the value property below

Property 'value' cannot be found on this object; make sure it exists and is settable. At E:\XXXX\YYY_YY\test.ps1:12 char:12 + $LoginName.v <<<< alue = "XXXXXXX"

Hello,

i tried writing the below for my simple requirement with the help of MSDN article, where i have login site with login page asking for UserId and Password. i need to capture the success return page and email to the group saying the website is up and running else it's down, one more thing to add this is i need to run every halfhour, Any help would be greatly appreciated. below is my code and errors and the errors i'am facing

## code

```
$ie = new-object -com "InternetExplorer.Application"

$ie.navigate("https://www.Mysite.net/websuite/index.do")

$doc = $ie.document

$tb1 = $doc.getElementByID("TextBox1")

$tb2 = $doc.getElementByID("TextBox2")

$btn = $doc.getElementByID("Button1")

$tb1.value = "XXXXXX"

$tb2.value = "XXXX"

$btn.click() 
```

## errors

You cannot call a method on a null-valued expression. At C:\Documents and Settings\k082504\MyScripts\CMM_Login.ps1:7 char:27 + $tb1 = $doc.getElementByID <<<< ("TextBox1") + CategoryInfo : InvalidOperation: (getElementByID:String) [], Ru ntimeException + FullyQualifiedErrorId : InvokeMethodOnNull

You cannot call a method on a null-valued expression. At C:\Documents and Settings\k082504\MyScripts\CMM_Login.ps1:9 char:27 + $tb2 = $doc.getElementByID <<<< ("TextBox2") + CategoryInfo : InvalidOperation: (getElementByID:String) [], Ru ntimeException + FullyQualifiedErrorId : InvokeMethodOnNull

You cannot call a method on a null-valued expression. At C:\Documents and Settings\k082504\MyScripts\CMM_Login.ps1:11 char:27 + $btn = $doc.getElementByID <<<< ("Button1") + CategoryInfo : InvalidOperation: (getElementByID:String) [], Ru ntimeException + FullyQualifiedErrorId : InvokeMethodOnNull

Property 'value' cannot be found on this object; make sure it exists and is set table. At C:\Documents and Settings\k082504\MyScripts\CMM_Login.ps1:13 char:6 + $tb1\. <<<< value = "XXXXXX" + CategoryInfo : InvalidOperation: (value:String) [], RuntimeExce ption + FullyQualifiedErrorId : PropertyNotFound

Property 'value' cannot be found on this object; make sure it exists and is set table. At C:\Documents and Settings\k082504\MyScripts\CMM_Login.ps1:15 char:6 + $tb2\. <<<< value = "XXXXXX" + CategoryInfo : InvalidOperation: (value:String) [], RuntimeExce ption + FullyQualifiedErrorId : PropertyNotFound

You cannot call a method on a null-valued expression. At C:\Documents and Settings\k082504\MyScripts\CMM_Login.ps1:17 char:11 + $btn.click <<<< () + CategoryInfo : InvalidOperation: (click:String) [], RuntimeExce

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:21:19.903

我认为这是因为您的示例代码使用`getElementByID`（单数），而在您的代码中使用的是`getElementsByName`（复数）。如果确实存在调用该方法的方法，它将返回一个项目集合，因此它不会具有 value 属性。这也意味着您可以拥有两个或多个具有相同名称的元素，我认为这是不允许的。

# ios - NSLog writing data into sqlite database

> ID：10901522
> 
> 赞同：0
> 
> 时间：2012-06-05T16:56:01.367
> 
> 标签：ios, sqlite, nslog

In my iOS application after I open sqlite to change data NSLog is occasionally writing messages into the database causing corruption to occur and making the app unusable. Does anyone know how to prevent this from happening? I would like to keep the NSLog statements in the code for debugging if possible.

# actionscript-3 - 从 Flash CS 到 Flex Builder

> ID：10901525
> 
> 赞同：0
> 
> 时间：2012-06-05T16:56:10.133
> 
> 标签：actionscript-3, flash, apache-flex

我正在尝试将我的纯 Actionscript Flash 项目移植到 Flex Builder。

我创建了一个新项目，它打开一个 mxml 文件，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <fx:Script>
        <![CDATA[
        ]]>
    </fx:Script>
</s:Application> 
```

现在，我试图在这个 mxml 文件中复制我的 Flash 文档类，但无济于事。

如果我在 fx:Script 中添加以下代码：

```
 addChild(new TradeShow()); 
```

我明白了：

> 1180：调用可能未定义的方法 addChild。

好的，所以 mxml 没有隐式的 DisplayObjectContainer。让我们尝试定义一个（总是在 fx:Script 中）：

```
 public class TradeShow extends Sprite {} 
```

这是另一个矛盾的错误：

> 1131：类不能嵌套。

我已经失去了几个小时，并为自己感到羞耻好几次。有人可以在这里遮光吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T17:09:40.293

> 我创建了一个新项目，它以这样的 mxml 文件打开

听起来您已经在 Flash Builder 中创建了一个 Flex 项目。除非您想移植 Flash Pro ActionScript 项目以使用 Flex 框架，否则我强烈建议您在 flash Builder 中创建一个 ActionScript 项目。

我怀疑这会解决你的大部分问题。

* * *

我正在编辑以添加有关 Flex 及其工作原理的更多信息。

> 如果我在 fx:Script 中添加以下代码：
> 
> ```
>  addChild(new TradeShow()); 
> ```
> 
> 我明白了：
> 
> ```
> 1180: Call to a possibly undefined method addChild. 
> ```

我不太确定您为什么会收到该错误；但是 fx:Script 块内的代码必须在方法、导入语句或变量定义内。这与您编写的“普通”课程并没有什么不同。将 MXML 文件视为一个类；只是定义不同。MXML 由 Flex 编译器在后台生成到 ActionScript。MXML 应被视为一种 ActionScript 代码生成语言。

> 好的，所以 mxml 没有隐式的 DisplayObjectContainer。

那不是真的。[Application](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/Application.html)类扩展了UIComponent——就像所有 Flex 视觉类一样——它在术语上扩展了 DisplayObjectContainer。因此，Application 类是一个 DisplayObjectContainer。我怀疑您出现上述错误的原因是代码的位置。

```
Let's try to define one (always inside fx:Script):

        public class TradeShow extends Sprite {}

Here is another contradicting error :

    1131: Classes must not be nested. 
```

在我看来，这并不矛盾。应用程序是一个类。你正试图在其中定义一个新的。这在仅 ActionScript 的类中不起作用，在 MXML 类中也不起作用。

如果您真的想使用 Flex，那么您应该阅读 Flex 组件生命周期。这是[MX 组件](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf68641-7ff0.html)生命周期，这里是[Spark 组件生命周期](http://help.adobe.com/en_US/flex/using/WS460ee381960520ad-2811830c121e9107ecb-7fff.html)的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T18:39:31.623

您甚至可以在 Flash Builder 中创建一个 Flash Professional 项目并使用 Flash Builder 界面来构建代码，您可以通过 Flash Builder 和 Flash Professional 编译 swf。

这是开发具有带有资产的 FLA 文件的项目的好方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T17:09:23.710

是的... Flex 有点不同。我不会弄乱类文件（甚至认为我应该这样做），所以我不能对此发表评论，但是要让 addChild 工作，只需执行以下操作：

```
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600" creationComplete="init()">
<fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>
<fx:Script>
    <![CDATA[

    private function init():void
    {
        this.addChild(new TradeShow());
    }

    ]]>
</fx:Script>
</s:Application> 
```

在主应用程序标签中添加了“creationComple”处理程序以及“init()”函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T19:24:43.723

不应将纯 actionscript 项目重新创建为 flex 项目。您应该使用 AS3 项目选项，除非出于某种原因您需要弹性组件。移植到 flashbuilder 背后的意图是什么？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T19:15:19.357

这是我解决它的方法：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="1300" minHeight="700" applicationComplete="init()">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>

    <fx:Script>
        <![CDATA[
            private function init():void
            {   
                var show:TradeShowOrig = new TradeShowOrig();
                this.stage.addChild(show);
                show.init();
            }
        ]]>
    </fx:Script>

</s:Application> 
```

请注意，Flex 的“文档”类 mxml 被称为 TradeShow.mxml。我的主要课程**同样被称为**TradeShow.as。这导致了无法克服的问题，因为事情变得非常糟糕**，没有明显的编译器错误。**我不得不将我的文档类重命名为 TradeShowOrig.as，所有问题都突然消失了。

# opencv - 如何使用opencv检测视频中的方形对象？

> ID：10901527
> 
> 赞同：0
> 
> 时间：2012-06-05T16:56:13.583
> 
> 标签：opencv, video-processing

我想构建一个可以检测视频中方形对象的程序。我为此使用了 SURF 算法。但那只检测关键点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T17:00:05.163

正常的方法是用一个[精明的滤波器](http://opencv.willowgarage.com/documentation/feature_detection.html?highlight=canny)检测边缘，然后用[霍夫变换](http://opencv.willowgarage.com/documentation/feature_detection.html#houghlines2)找到线，然后找到斜率相差 90 度的线对

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T17:17:22.883

您似乎没有对此进行任何搜索。如果你有，你会在你的电脑里找到这个代码。

正方形检测的代码（特别是矩形，您可以稍作修改使其仅适用于正方形）直接随 opencv 示例提供，下载 OpenCV 库时即可获得。

你没有指定你工作的语言。但代码来自 Python 和 C++。

[蟒蛇](http://code.opencv.org/projects/opencv/repository/changes/trunk/opencv/samples/python2/squares.py) , [C++](http://code.opencv.org/projects/opencv/repository/changes/trunk/opencv/samples/cpp/squares.cpp)

这个怎么运作：

*   将图像拆分为 R、G、B 平面
*   对于每个平面，阈值图像的范围值在 0 到 255 之间
*   找到轮廓，近似，选择只有4个点的轮廓
*   找到轮廓所有线之间的夹角余弦并检查是否接近 90
*   如果是这样，它是矩形
*   如果你想要正方形，检查它的所有边是否几乎相等。

它工作得很好。如果你看到了这个，这不是你想要的，用更具体的细节更新你的问题，包括一些测试图像。

在提问之前，谷歌你的疑问，甚至在 SOF 中搜索类似的问题。

希望能帮助到你！！！

# mysql - 每 5 分钟的查询点击次数

> ID：10901531
> 
> 赞同：3
> 
> 时间：2012-06-05T16:56:26.950
> 
> 标签：mysql, group-by

我正在构建一个报告来确定点击我网站上特定按钮的访问者数量。在分析了我的日志后，我发现访问者会在一两分钟内多次点击同一个按钮（有时最多 10 次），这完全扭曲了结果。

我正在尝试创建一个查询，该查询将在 5 分钟的时间内仅对每个访问者（按 ip）计数一次。我想出了以下内容，这给了我总数，但我似乎无法找到将其分解为时间块的正确组合。（日期时间的类型为*date*）

```
SELECT count(ip), ip, link, datetime  FROM `clicks` group by ip, link 
```

有没有一种简单的方法可以做到这一点，还是我想错了？我想如果有必要我可以按天对它进行分组，但如果可能的话，我真的很想把它分解得更细一些。

任何指向正确方向的指针将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T17:00:54.483

如果您想要今天每 5 分钟间隔的 IP 计数，请尝试以下操作：

```
SELECT COUNT(ip) ipcount,dt FROM
(
    SELECT
    ip,(datetime - INTERVAL MOD(UNIX_TIMESTAMP(datetime),300)) SECOND dt
    FROM `clicks`
    WHERE datetime >= (DATE(NOW()) + INTERVAL 0 SECOND)
) A
GROUP BY dt; 
```

表情`DATE(NOW()) + INTERVAL 0 SECOND`是今天午夜

```
mysql> select DATE(NOW()) + INTERVAL 0 SECOND;
+---------------------------------+
| DATE(NOW()) + INTERVAL 0 SECOND |
+---------------------------------+
| 2012-06-05 00:00:00             |
+---------------------------------+
1 row in set (0.00 sec)

mysql> 
```

# bundle - apache felix/sling 中的 OSGi 包解析和 OBR

> ID：10901539
> 
> 赞同：1
> 
> 时间：2012-06-05T16:56:58.140
> 
> 标签：bundle, resolution, apache-felix, sling, obr

在将捆绑包安装到 apache sling（基于 apache felix 构建）时，我有一些 spring 依赖项不在 sling/felix 中。我手动找到并安装了它们，但必须有更好的自动方式来执行此操作。

我在 OSGi Bundle Repository (OBR) 在线和 felix Web 控制台中的 OSGi Repository 选项卡上找到了文档。OBR 似乎是 sling/felix 自动解决依赖关系的方式，就像 maven 和 maven repo 为 maven 构建所做的那样。我的理解是，OBR 使用的协议与 maven repos 使用的协议不同。

我尝试使用 felix OSGi 存储库选项卡（例如[http://www.osgi .org/obr/browse?cmd=repository&_xml=1](http://www.osgi.org/obr/browse?cmd=repository&_xml=1)并单击“添加”）并得到一个简单的 AJAX 错误“请求失败：OK”（吊索）或 http 500 连接被拒绝（felix）：

> HTTP 错误 500
> 
> 访问 /system/console/obr 时出现问题。原因：连接被拒绝：连接原因：java.net.ConnectException：连接被拒绝：连接

我尝试将它添加到 felix conf/config.properties 文件中的逗号分隔列表中，但没有成功。

我对如何在 felix/sling 中解决捆绑包的正确方法的理解是正确使用 OBR 吗？

有没有人让这个工作？我如何让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-05T14:00:03.187

可能你在代理后面。使用参数启动 VM `-Dhttp.proxyHost=your.proxy.host -Dhttp.proxyPort=your.proxy.port`。

# php - PHP/Ajax - 将 JQuery 值发送 到 PHP 脚本

> ID：10901542
> 
> 赞同：1
> 
> 时间：2012-06-05T16:57:24.620
> 
> 标签：php, jquery, ajax

我在遵循其他人的代码时遇到了困难，如果有人可以帮助我解决这个问题，我将不胜感激。

基本上，我有一个显示预订列表的 Jqgrid，当您双击一行时，它会打开一个 jqdialog，其中显示有关其预订的所有详细信息。

我定义了一个变量，它是我想要传递给 php 脚本的预订参考。

```
var brData = rowData['bookref']; 
```

然后我试图通过ajax发送这个：

```
function getGridRow(brData) {

$.ajax({

    // Request sent from control panel, so send to cp.request.php (which is the handler)
    url: 'scripts/php/bootstrp/all.request.php',
    type: 'POST',

    data: {

        ft: "getDGRow",
        type: 'POST',
        data: 'fnme=getDGRow&row_data='+brData,
        //row_data: rowData,

        id: null,
        condition: null
    },
    dataType: 'xml',
    timeout: 20000,
    error: function(){
        $('#cp-div-error').html('');
        $('#cp-div-error').append('<p>There was an error inserting the data, please try again later.</p>');
        $('#cp-div-error').dialog('open');
    },
    success: function(response){

    }
}); 
```

all.request.php 中就是这种情况：

```
case 'getDGRow':
header('Content-type: text/xml');
DatagridController::getGridRow($_REQUEST['row_data']);
break; 
```

这就是我要传递变量“brData”的地方：

```
public static function getGridRow($row_data) {

    $pdo = new SQL();
    $dbh = $pdo->connect(Database::$serverIP, Database::$serverPort, Database::$dbName, Database::$user, Database::$pass);

    try {

        $query = "SELECT * FROM tblbookings WHERE bookref = '$row_data'"; 
```

我现在发现这非常令人困惑，所以任何帮助将不胜感激。目前 $row_data 是我的 php 函数是空白的，所以显然它没有从数据库中选择任何行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T17:12:32.490

首先验证 javascript 函数没有传递空白变量。尝试提醒变量“brData”。其次，验证ajax调用是否成功，可能是通过使用firebug的控制台。第三，确保PHP接收到并可以进入函数。你可以试试

```
public static function getGridRow($row_data) {
    echo $row_data;
    exit;
} 
```

在您的 PHP 文件中并提醒您的 html 中的值。

```
function getGridRow(brData) {
    $.ajax({
        //...blah blah blah
        success: function(response){
            alert(response);
        }
    });
} 
```

如果您可以从脚本中收到警报，我想您可以尝试的最后一件事是使用 PHP 脚本发回给您的变量值手动查询数据库。谁知道，生成的查询真的没有结果。

# javascript - 可以将图像对象直接加载到 jquery colorbox 中吗？

> ID：10901546
> 
> 赞同：0
> 
> 时间：2012-06-05T16:57:58.490
> 
> 标签：javascript, jquery, gallery, colorbox

我正在使用**jQuery**插件“colorbox”，我需要能够动态加载带有预加载图像对象列表的颜色框。

问题是，我有 3 种图像尺寸，缩略图、显示和大。我使用缩略图并通过图库插件显示，但是我想添加一个功能，当单击显示图像时，它将拉出大图像的颜色框。
我可以获得一组大图像，但是，我还没有找到一种方法将它们作为一个组加载到颜色框中。

我可以使用以下方法加载一张图片：

```
$.fn.colorbox({href: '/path/to/image.jpg'}); 
```

是否可以将 href 传递给逗号分隔的列表？还是一个数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T19:51:00.277

不幸的是，您目前不能用 ColorBox 做类似的事情。要作为一个组显示，元素必须在您的文档中。原因是 ColorBox 将每张图片的设置单独存储在目标元素上。此外，它使用文档来搜索和排序组中的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-02T08:28:27.717

添加具有内联样式的 div 使其不可见。在这个 div 中，放置您的图像列表。

```
<div style="display: none;">
    <img src="#path" />
</div> 
```

# python - python PIL可以处理原始图像数据吗？

> ID：10901547
> 
> 赞同：4
> 
> 时间：2012-06-05T16:58:07.747
> 
> 标签：python, image-processing, python-imaging-library, raw-data

我有一个原始图像文件，它是 .bin，由 16 位无符号整数组成。python 映像库可以获取这种类型的文件并进行处理吗？我的代码运行不正常并给我一个无效的文件类型错误，但我认为这可能是编码中的错误，而不仅仅是它不采用这种文件类型。

有这方面的知识吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T17:48:56.877

假设您的文件没有标题并且包装紧密，请尝试以下操作：

```
with open('filename', 'rb') as f:
    im = Image.fromstring('L;16', (width, height), f.read()) # also try 'L;16B', 'I;16', and 'I;16B'
im.show() 
```

`'L'`格式将从每像素 16 位截断为 8 位；这些`'I'`格式将使其保持在每像素 16 位，但可能更难使用。

如果您的原始文件以某种方式编码，您将不得不搜索它的文档，因为原始格式根本没有标准化。通过`.bin`扩展，我怀疑情况是否如此。

# asp.net-mvc-3 - 将在数据库级别或应用程序级别执行 Icollection<> 的 Orberby

> ID：10901553
> 
> 赞同：1
> 
> 时间：2012-06-05T16:58:55.143
> 
> 标签：asp.net-mvc-3, entity-framework

我正在开发一个 asp.net mvc 3 Web 应用程序，并且我的 .tt 文件夹中有以下模型类：-

```
public partial class Patient
{
    public Patient()
    {
        this.Visits = new HashSet<Visit>();
    }

    public int PatientID { get; set; }
   //code goes here...
    public virtual Gender Gender { get; set; }
    **public virtual ICollection<Visit> Visits { get; set; }** 
```

然后在 Controller 类上我写了以下内容：-

```
public PartialViewResult ShowOther(int id, int skip, int take )
        {
                ViewBag.take = take;
                Patient patient = repository.GetPatient(id);
               **Visit visit = patient.Visits.OrderByDescending(d => d.Date).Skip(skip).Take(take).SingleOrDefault();**
//code goes here 
```

所以我的问题是是否在应用程序级别执行以下 Orderby `patient.Visits.OrderByDescending(d => d.Date).Skip(skip).Take(take).SingleOrDefault();`（这意味着将从数据库中检索所有访问对象，然后将在应用程序级别完成 orderby）**或者**Orderby 将在数据库上执行并且只有预期的访问对象将被传递给应用程序？

我的`repository.GetPatient(id);`方法如下：-

```
 public Patient GetPatient(int id)
        {
            return entities.Patients.FirstOrDefault(d => d.PatientID == id);        } 
```

BR

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T17:00:45.397

在调用之前`.ToList()`，`.Single()`- 数据库级别。调用后`.ToList()`，`.Single()`- 应用程序级别。

* * *

`FirstOrDefault`在您的具体示例中，调用存储库方法执行查询并返回结果并不重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T17:03:44.353

一旦您访问`patient.Visits`延迟加载，将加载对您应用程序的**所有**访问。一切都将在您的应用程序中完成。

如果您只想加载单次访问，​​请尝试以下操作：

```
entities.ContextOptions.LazyLoadingEnabled = false;
var patient = entities.Patients.FirstOrDefault(d => d.PatientID == id);
var visit = ((EntityCollection<Visit>)patient.Visists).CreateSourceQuery()
                                                      .OrderByDescending(d => d.Date)
                                                      .SingleOrDefault();
                                                      . 
```

# ios - 在 iOS 中以编程方式锁定/禁用相机

> ID：10901556
> 
> 赞同：1
> 
> 时间：2012-06-05T16:59:05.853
> 
> 标签：ios

我有一个要求，我需要以编程方式锁定/禁用相机作为安全方面。例如，在我的设备丢失的情况下。我用谷歌搜索但找不到任何解决方案。任何人都可以帮助我提供解决方案...

在此先感谢 Sudheer

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T17:04:04.343

这是应用程序无法做到的。您需要通过移动设备管理 (MDM) 解决方案禁用相机应用程序，该解决方案仅适用于企业中的设备。

正如另一位回答者所说，Find My iPhone 也可以使用，但是没有用于 Find My iPhone 的 API，而 MDM 则有。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-03T07:23:44.837

从理论上讲，您可以在企业程序中控制 iPhone 的相机和其他实用程序。Apple 已明确将此作为 iOS 3.0 及更高版本的 Enterprise 程序的一项功能。

请查看此链接，其中提到了这种可能性：http: [//images.apple.com/ie/iphone/business/docs/Enterprise_Deployment_Guide.pdf](http://images.apple.com/ie/iphone/business/docs/Enterprise_Deployment_Guide.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T17:32:39.870

这个答案有些正确。您不必是企业才能使用 iPhone 配置实用程序。您只需在要管理的设备上应用配置文件。

这不能在程序中完成，您必须在设备上明确安装配置文件。如果您使用“查找我的 iPhone”，则无需任何额外设置即可锁定手机或远程擦除手机。

# database - 增加列是否会使列上的 b 树索引不平衡？

> ID：10901558
> 
> 赞同：4
> 
> 时间：2012-06-05T16:59:13.377
> 
> 标签：database, performance, oracle, indexing, b-tree

我一直在思考两个问题。在互联网上找不到任何关于此的资源。dbms 如何处理它？还是他们？尤其是甲骨文。

在问题之前，这里是一个例子：假设我有一个主表“MASTER”和从表“SLAVE”。主表有一个“ID”列，它是主键，索引是由Oracle创建的。从表有外键“MASTER_ID”，它指的是主表和“SLAVE_NO”。这两个加起来就是从表的主键，又被索引了。

```
 **MASTER**  |  **SLAVE**
     (P) ID <------> (P)(F) MASTER_ID 
                     (P) SLAVE_NO 
```

现在是问题；

1-如果 MASTER_ID 是一个自动递增的列，并且没有删除任何记录，这不会使表的索引不平衡吗？Oracle 是否定期重建索引？据我所知，Oracle 仅在构建时平衡索引分支。Oracle 是否会自动重新构建索引？说如果水平上升到一些高水平？

2-假设 Oracle 不会自动重建，除了安排定期重建索引的作业之外，将 SLAVE 表的主键列反向排序是否更明智？我的意思不是“MASTER_ID”、“SLAVE_NO”将其排序为“SLAVE_NO”、“MASTER_ID”i，它会帮助从表的 b-tree 索引更加平衡吗？（好吧，每个主表可能没有确切数量的从属记录，但仍然似乎比倒序好）

有人知道吗？还是意见？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T17:18:51.990

> 如果`MASTER_ID`是一个自动增量列，并且没有删除任何记录，这不会使表的索引不平衡吗？

`Oracle`的索引永远不会“不平衡”：索引中的每个叶子都与任何其他叶子处于相同的深度。

没有页面拆分本身会引入一个新级别：叶子页面不会像在非自平衡树上那样成为新页面的父页面。

相反，为拆分页面创建一个兄弟，并且新记录（可能加上旧页面中的一些记录）转到新页面。指向新页面的指针被添加到父页面。

如果父页面也空间不足（不能接受指向新创建的叶子页面的指针），它也会被拆分，依此类推。

这些拆分可以传播到根页面，其拆分是唯一增加索引深度的东西（并且一次对所有页面执行此操作）。

索引页面还被组织成双链表，每个列表都有自己的级别。如果树不平衡，这是不可能的。

如果`master_id`是自动递增的，这意味着所有拆分都发生在最后（例如称为`90/10`拆分），这使得最密集的索引成为可能。

> `SLAVE`将表的主键列反向排序会更明智吗？

不，它不会，出于上述原因。

如果你经常加入`slave`，`master`你可以考虑创建`CLUSTER`两个表中的一个，索引为`master_id`. 这意味着来自两个表的记录，共享相同的`master_id`，转到相同或附近的数据页，这使得它们之间的连接非常快。

当引擎从`master`中找到带有索引或其他内容的记录时，这也意味着它已经找到了`slave`要与该 连接的记录`master`。反之亦然，定位 a`slave`也意味着定位它的`master`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T17:29:04.833

`MASTER_ID`对于“平衡”的大多数有用定义，b-tree 索引将保持平衡。特别是，根块和任何子块之间的距离将始终相同，并且任何分支中的数据量将至少大致等于任何其他兄弟分支中的数据量。

当您将数据插入到序列生成列的索引中时，当任何特定级别的数据量增加时，Oracle 将在叶子上执行 90-10 块拆分。例如，如果您有一个可以容纳 10 行的叶子块，当它已满并且您想添加第 11 行时，Oracle 创建一个新块，将前 9 个条目留在第一个块中，将 2 个条目放入新块，并用新块的地址更新父块。如果父块因为持有太多子块的地址而需要拆分，则会发生类似的过程。这使得指数在其整个生命周期中相对平衡。[Richard Foote（Oracle 索引专家）有一篇关于 Oracle 索引何时增加高度](http://richardfoote.wordpress.com/2008/04/03/so-when-does-an-oracle-b-tree-index-increase-in-height-almost-grown/)的优秀博客，其中详细介绍了它的工作原理。

您可能不得不担心索引倾斜的唯一情况是您定期从索引左侧删除大部分但不是所有块。例如，如果您决定从索引的左侧删除 90% 的数据，在每个指向数据的叶节点中保留一行，则您的索引可能会变得不平衡，因为某些路径会导致更多的数据比其他路径。Oracle 在索引叶节点完全为空之前不会回收它们，因此您最终可能会使用比实际需要更多的空间来使用索引的左侧。这并不会真正影响系统的性能 - 它更多的是空间利用问题 - 但可以通过在清除数据后合并索引来修复它（或构建清除结构以便您不要'

# python - 当我使用 Scipy 优化时，为什么我的“实例”会变成“ndarray”？

> ID：10901560
> 
> 赞同：0
> 
> 时间：2012-06-05T16:59:20.217
> 
> 标签：python, optimization, scipy

我使用返回浮点数的量子模拟类[QuTIP编写了一个函数。](http://qutip.googlecode.com)接下来，我在函数上调用了 scipy.optimize.fmin_cg。我不断收到错误：

```
AttributeError: 'numpy.ndarray' object has no attribute 'expm' 
```

在线上：

```
U_sq = H_sq.expm 
```

但是 H_sq 是 Qobj 的一个实例，而不是一个 ndarray。如果我在 scipy.optimize.fmin_cg 之外运行该函数，它会将类型返回为“实例”；当它在 fmin_cg 内运行时，它返回类型为“ndarray”。

为什么这样做？python中是否有一个优化函数会尊重使用这样的实例？

这是代码：

```
from qutip import *
from numpy import *
import scipy.optimize

def sq_fidelity(eps,N=7):
    H_sq = squeez(N,eps);
    print type(H_sq);
    one_ph = basis(N,1);
    U_sq = H_sq.expm();
    squ = U_sq*one_ph;
    fidelity = expect(fock_dm(N,1),squ);
    return float(fidelity) 

if __name__=='__main__':
    print sq_fidelity(0.2);
    eps = scipy.optimize.fmin_cg(sq_fidelity, x0=0.2, args=(7,)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T20:30:12.150

这里的问题`fmin_cg`是将`ndarray`（长度为 1）传递给您的目标函数。您只需将第一行更改为即可提取标量值`sq_fidelity`：

```
H_sq = squeez(N, float(eps)) 
```

# android - 键盘出现时如何确保特定视图可见？

> ID：10901561
> 
> 赞同：7
> 
> 时间：2012-06-05T16:59:32.660
> 
> 标签：android

我有一个布局，顶部有一个图形，`EditText`中间有一个图形，下方有一个按钮，如下所示：

![示例布局](../Images/1390e38c47de09f19e67b41ea01b5918.png)

当用户输入时`EditText`，我想平移布局以使“Go”按钮仍然可见，即使这意味着将图像从顶部剪掉，如下所示：

![想要的布局](../Images/b71957578a0ca20fb0fd3cf58d01dbbf.png)

我在清单中知道`windowSoftInputMode="adjustPan"`，但这不起作用，因为它只能平移到足以让 EditText 可见。有没有办法确保它平移直到按钮也可见？

* * *

对于 K_Anas 的评论，这是我的布局。与第一个屏幕截图相比，它删除了所有额外的边距和间距，以消除任何其他问题来源。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <View
        android:layout_width="300dp"
        android:layout_height="150dp"
        android:layout_alignParentTop="true"
        android:background="#999"/>

    <EditText
        android:layout_width="280dp"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:hint="Sample..."/>

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:text="Go"/>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:37:05.267

与 Android 开发人员聚会交谈，似乎没有一种简单的方法可以解决这个问题。共识似乎是重新设计布局，而不是使用 API 来解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T17:18:33.527

你试过了吗：

```
android:windowSoftInputMode="adjustResize" 
```

在清单中的活动标签中

在 android 开发者博客上查看这些[文档](http://android-developers.blogspot.com/2009/04/updating-applications-for-on-screen.html)

我尝试了您的布局：`android:windowSoftInputMode="stateVisible|adjustResize"`

并给我这些结果：

![在此处输入图像描述](../Images/be64f61314d42fd9bb1a384939916b74.png) ![在此处输入图像描述](../Images/647ef638c93cc6ea59faf5a53f72b3f3.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T17:17:14.690

我确定这不是最好的方法，但是您不能只更改按钮的布局属性（添加/更改边距）并在单击编辑文本时重绘吗？使用 onClickListener 并可能使您的按钮无效。

# scala - 类模式中的对象是如何工作的，如 Lift Framework 中所使用的那样？

> ID：10901562
> 
> 赞同：0
> 
> 时间：2012-06-05T16:59:36.200
> 
> 标签：scala, lift, mapper

我是 scala 的新手，无法理解 Lift 家伙是如何实现 Record API 的。然而，问题不在于这个 API，而更多的是关于 Scala。我对 Lift 中使用的类模式中的对象如何工作感兴趣。

```
class MainDoc private() extends MongoRecord[MainDoc] with ObjectIdPk[MainDoc] {
  def meta = MainDoc

  object name extends StringField(this, 12)
  object cnt extends IntField(this)
}

object MainDoc extends MainDoc with MongoMetaRecord[MainDoc] 
```

在上面的代码片段中，您可以看到在 Lift 中如何定义记录。有趣的部分是字段被定义为对象。API 允许您像这样创建实例：

```
val md1 = MainDoc.createRecord
  .name("md1")
  .cnt(5)
  .save 
```

这可能是通过使用 apply 方法完成的？但与此同时，您可以通过执行以下操作来获取值：

```
val name = md1.name 
```

这一切如何运作？在类的范围内，对象是否不是静态的。或者它们只是一些内部表示的构造函数类？怎么可能遍历所有字段，你使用反射吗？

谢谢，奥托

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T18:20:40.577

奥托，

你在正确的轨道上多或少。您实际上不需要将字段定义为对象，您可以将示例编写为

```
class MainDoc private() extends MongoRecord[MainDoc] with ObjectIdPk[MainDoc] {
  def meta = MainDoc

  val name = new StringField(this, 12)
  val cnt= new IntField(this)
}

object MainDoc extends MainDoc with MongoMetaRecord[MainDoc] 
```

net.liftweb.record.Field trait 确实包含一个相当于 set 的 apply 方法。这就是为什么您可以在实例化对象后按名称分配字段的原因。

您提到的字段参考：

```
val name = md1.name 
```

将名称键入为 StringField。如果你想的是

```
val name: String = md1.name 
```

这将无法编译（除非在范围内隐含转换 Field[T] => T）。检索字段的字符串值的正确方法是

```
val name = md1.name.get 
```

Record 确实使用反射来收集字段。当您在类中定义对象时，编译器将创建一个字段来保存对象实例。从反射的角度来看，对象看起来与我之前提到的定义字段的替代方式非常相似。每个定义都可能创建字段类型的子类，但这与

```
val name = new StringField(this, 12) {
  override def label: NodeSeq = <span>My String Field</span>
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T18:16:51.893

你是对的，它是`apply`方法。Record 的[`Field`基类](http://scala-tools.org/mvnsites/liftweb-2.4/#net.liftweb.record.Field)定义了一些`apply`方法。

```
def apply(in: Box[MyType]): OwnerType
def apply(in: MyType): OwnerType 
```

通过返回`OwnerType`，您可以将调用链接在一起。

关于`object`定义字段的使用，一开始我也很困惑。`object`标识符定义了特定范围内的对象。尽管将其视为[单例模式](http://en.wikipedia.org/wiki/Singleton_pattern)`object`的快捷方式很方便，但它比这更灵活。根据[Scala 语言规范](http://www.scala-lang.org/docu/files/ScalaReference.pdf)（第 5.4 节）：

> 它大致等价于以下惰性值的定义：
> `lazy val m = new sc with mt1 with ... with mtn { this: m.type => stats }`

<snip/>

> 上面给出的扩展对于顶级对象是不准确的。这不可能是因为变量和方法定义不能出现在包对象之外的顶层（第 9.3 节）。相反，顶级对象被转换为静态字段。

关于遍历所有字段，`Record`对象定义了一个`allFields`返回 a 的方法`List[net.liftweb.record.Field[_, MyType]]`。

# javascript - HTML 中的 Javascript：何时使用分号，何时返回 false？

> ID：10901572
> 
> 赞同：1
> 
> 时间：2012-06-05T17:00:41.753
> 
> 标签：javascript, html

考虑以下 HTML 元素中的 Javascript 属性示例：

```
<input type="button" onclick="somceFunc()" />
<input type="button" onclick="somceFunc();" />
<input type="button" onclick="somceFunc(); return false;" /> 
```

`someFunc()`什么时候应该用分号结束通话，什么时候应该去掉分号？另外，什么时候应该通过调用来结束属性`return false;`？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T17:03:31.357

> 什么时候应该用冒号结束 someFunc() 调用，什么时候应该删除冒号？

那是一个分号。总是以一个结束表达式。自动分号插入有足够的陷阱，你最好避免它。

> 另外，什么时候应该通过调用来结束属性`false`？

`false`是文字，不是函数，你不能调用它。

该示例中的用法完全没有任何作用。

如果您`return false`要从内部事件属性（如`onclick`）开始，那么您将停止触发控件的默认操作。例如，链接不会被关注。但是，按钮没有默认操作。

应避免使用固有的事件属性，而应使用[不显眼的 JavaScript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T17:03:33.657

**SEMI** -colons 在 JavaScript 中是可选的，但最好包含它们以避免令人讨厌的意外，例如如果您尝试这样做会发生什么：

```
return
  {
    a:1,
    b:2
  }; 
```

至于`false`，它一个人什么都不做。当您想要停止发生默认单击操作时（通常只对链接或表单按钮很重要），您希望这样做。**`return`**`false`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T17:08:25.910

> 分号用于将语句彼此分隔，

在函数调用或任何 JavaScript 语句之后使用分号是一种很好的做法。

对于“错误”声明：

```
<input type="button" onclick="somceFunc(); false;" /> 
```

这是错误的做法。要么你应该调用`return false`
嘛，`return false`就是调用阻止动作被调用。

# jquery - 使用 jquery 查找文本节点？

> ID：10901580
> 
> 赞同：0
> 
> 时间：2012-06-05T17:01:01.000
> 
> 标签：jquery, nodes

我发现[如何使用 jQuery 选择文本节点？](https://stackoverflow.com/questions/298750/how-do-i-select-text-nodes-with-jquery)但我的问题是，虽然我可以去

```
$(elem)
  .contents()
  .filter(function() {
    return this.nodeType == Node.TEXT_NODE;
  }).each(function() {
     this.nodeValue = //stuff
  }); 
```

我试图弄清楚如何`this.nodeType`与`before`and`after`节点结合，因为我需要的一些东西`this.nodeValue + before`可以`this.nodeValue`显示`this.nodeValue + after`为上一个和下一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T17:55:06.310

如果我理解正确，您想在点击文本节点时获得`prev`and next 。`node`见下文，

```
var elContents = $('#test').contents();
elContents.each(function(idx, el) {
    if (el.nodeType == 3) {
        if (idx == 0) {
           prev = null;
           next = elContents.get(idx + 1);
        } else if (idx == elContents.length - 1) {
           prev = elContents.get(idx - 1);
           next = null;
        } else {
           next = elContents.get(idx + 1);
           prev = elContents.get(idx - 1);
        }

        //below is demo code
        $('#result').append ("<b>Prev: </b>" + $(prev).text() + " <b>Cur: </b>" + $(el).text() + "<b> Next: </b>" + $(next).text() + '<br />');
    }
}); 
```

**演示：http:** [//jsfiddle.net/SFmRR/](http://jsfiddle.net/SFmRR/)

**注意：**在演示中，div 内的元素没有任何额外的空格/换行符，因为当您迭代时，`contents()`它包括换行符和空格作为 textNode。

# php - PDO，MySQL - 如何从函数返回数组？

> ID：10901583
> 
> 赞同：1
> 
> 时间：2012-06-05T17:01:18.867
> 
> 标签：php, arrays, foreach, pdo, return

我正在使用一个函数从 mysql 数据库中检索多行。我使用 foreach 循环遍历每场比赛。我希望能够将每一行的 id 添加到数组中，并将数组返回给调用程序，然后使用 id。

这是我试图得到的，我是否朝着正确的方向前进？

```
$resultarray = array();
    $resultarray[] = get_post_data($post_id);

    print_r($resultarray); 
```

函数中的代码：

```
$stmt = $dbh->prepare("SELECT * FROM mjbox_images JOIN mjbox_posts USING (post_id) WHERE post_id = ?");
        $stmt->bindParam(1,$post_id);
        $stmt->execute();

        $resultarray = array();
        foreach($stmt as $row):

                $resultarray[] = $img_id = $row['img_id'];

        endforeach;
        return $resultarray; 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T17:04:39.907

你需要使用：

```
while($row = $stmt->fetch(\PDO::FETCH_ASSOC)) {

} 
```

而不是 for 循环。还强烈建议您将 { 和 } 用于循环之类的东西:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T17:09:13.467

如果你只需要这个`img_id`领域，你为什么要跑步`select *`？

```
$stmt = $dbh->prepare("SELECT img_id FROM mjbox_images JOIN mjbox_posts USING (post_id) WHERE post_id = ?");
$stmt->bindParam(1,$post_id);
$stmt->execute();

return $stmt->fetchAll(); 
```

或者，您可以手动遍历结果（以验证/更改返回数组语法）：

```
while($row = $stmt->fetch(PDO::FETCH_ASSOC)) {
    //code
} 
```

# dojo - 道场 - dijit.dialog

> ID：10901584
> 
> 赞同：1
> 
> 时间：2012-06-05T17:01:27.367
> 
> 标签：dojo, dialog

这是我的问题的流程：我有一个模态对话框，当我打开一个新对话框时，它会在模态对话框中打开 contentOne.jsp。当我单击 contentOne.jsp 上的链接时，模式对话框会刷新并使用我的 href 引用打开 contentTwo.jsp。然后我关闭对话框。当我再次打开对话框时，它会打开 contentTwo.jsp 而不是 contentOne.jsp。我尝试了destroyDescendants、destroyRendering....但它们没有用。

我有一个标题，其中包含一个打开模式对话框的链接，如下所示：

```
<div style="position: relative;right: 50px; top: 15px;">
     <a onclick="dijit.byId('selectEquipmentInfo').show(); return false;"            href=""       />Add Equipment</a>

</div>
<%-- start equipment info dialog link --%>
    <div id="selectEquipmentInfo" style="display:none;" name="selectEquipmentInfo" dojotype="dijit.Dialog" draggable="false" title="Select Equipment">
    <div style="width:870px; height:400px; padding: 10px; overflow-y:auto;" href="">
         <%@ include file="../../StoreInfoArea/ProductFamilyDisplay.jspf"%>

    </div>
    </div> 
```

这应该打开一个模式对话框。在我的 ProductFamilyDisplay.jspf 中，我有一个项目链接到“href”上的另一个 jsp 页面，如下所示

```
 <div id="productFamily" class="productFamilyContainer">
<div id= "prdctFamilyRow" class="productFamilyColumn">
<c:forEach  var="equipmentInfo"    items="${equipmentTestList}" varStatus="status">
<a href="${EquipmentModelsViewURL}"><c:out value="${equipmentInfo.value}" /></a><br />

    </c:forEach>
</div> 
```

这将在同一个模态对话框上呈现，并且由这个 javascript 控制：

```
 <script type="text/javascript">
dojo.addOnLoad (function(event){
    dojo.connect(dijit.byId('selectEquipmentInfo'), 'onClick', clicked);
});

   var clicked=function(event) {

        var dialog=dijit.byId('selectEquipmentInfo');
        var contentNode=dialog.domNode;
        var node = event.target;
        var attrId = dojo.attr(node, "id");

        if (attrId =="dijitCloseLink" || attrId == "dijitCloseImg") {
            dialog.set('href','');

        } else {
        if("a" == node.nodeName.toLowerCase()){
            dialog.href=node.href;
            dialog.refresh();
            dojo.stopEvent(event);
        } 
        }
    };
  </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T18:31:22.383

我无法找到销毁对话框的代码。试试下面给出的代码。将此代码放在创建对话框的 div 中。

```
 dojo.connect(selectEquipmentInfo, "hide", function(e){
                dijit.byId("selectEquipmentInfo").destroy(); 
            }); 
```

# xcode - 使用凹凸发送文件

> ID：10901586
> 
> 赞同：0
> 
> 时间：2012-06-05T17:01:29.470
> 
> 标签：xcode, objective-c-blocks, bump

我已经正确实现了bump的api，并添加了以下代码：

```
- (void) configureBump {

[BumpClient configureWithAPIKey:@"your api key" andUserID:[[UIDevice currentDevice] name]];

[[BumpClient sharedClient] setMatchBlock:^(BumpChannelID channel) { 
/* UIAlertView *alert=[[UIAlertView alloc] initWithTitle:@"Matched with user" message:nil delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Ok", nil ];
 [alert show];
 [alert release];*/
NSLog(@"Matched with user: %@", [[BumpClient sharedClient] userIDForChannel:channel]); 
[[BumpClient sharedClient] confirmMatch:YES onChannel:channel];
 }];

[[BumpClient sharedClient] setChannelConfirmedBlock:^(BumpChannelID channel) {
/*  UIAlertView *alert=[[UIAlertView alloc] initWithTitle:@"Channel with" message:nil delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Ok", nil ];
 [alert show];
 [alert release];*/
NSLog(@"Channel with %@ confirmed.", [[BumpClient sharedClient] userIDForChannel:channel]);

    [[BumpClient sharedClient] sendData:[[NSString stringWithFormat:@"hi"] dataUsingEncoding:NSUTF8StringEncoding]
                              toChannel:channel];

}];

[[BumpClient sharedClient] setDataReceivedBlock:^(BumpChannelID channel, NSData *data) {
UIAlertView *alert=[[UIAlertView alloc] initWithTitle:@"Data received" message:[NSString stringWithCString:[data bytes] encoding:NSUTF8StringEncoding] delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Ok", nil ];
[alert show];
[alert release];
NSLog(@"Data received from %@: %@", 
      [[BumpClient sharedClient] userIDForChannel:channel], 
      [NSString stringWithCString:[data bytes] encoding:NSUTF8StringEncoding]);
NSString  *receivedBumpData=[NSString stringWithCString:[data bytes] encoding:NSUTF8StringEncoding];
if(receivedBumpData.length!=0){
    CardAvailableLandscape *cardObject=[[CardAvailableLandscape alloc] init];
    [cardObject bumpInsertFunction:receivedBumpData];
}
}];

[[BumpClient sharedClient] setConnectionStateChangedBlock:^(BOOL connected) {
if (connected) {
    /* UIAlertView *alert=[[UIAlertView alloc] initWithTitle:@"bump Coneected"   message:nil delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Ok", nil ];
     [alert show];
     [alert release];*/
    NSLog(@"Bump connected...");
} else {
    /* UIAlertView *alert=[[UIAlertView alloc] initWithTitle:@"Bump disconnected..." message:nil delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Ok", nil ];
     [alert show];
     [alert release];*/
    NSLog(@"Bump disconnected...");
}
}];

[[BumpClient sharedClient] setBumpEventBlock:^(bump_event event) {
switch(event) {
    case BUMP_EVENT_BUMP:{
        /*UIAlertView *alert=[[UIAlertView alloc] initWithTitle:@"Bump detected." message:nil delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Ok", nil ];
         [alert show];
         [alert release];*/
        NSLog(@"Bump detected.");

        break;
    }
    case BUMP_EVENT_NO_MATCH:
    {
        /*UIAlertView *alert=[[UIAlertView alloc] initWithTitle:@"No match." message:nil   delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Ok", nil ];
         [alert show];
         [alert release];*/
        NSLog(@"No match.");

        break;
    }
}
}];
} 
```

此代码取自示例项目。建立连接。但我似乎无法发送文件：我尝试了本教程：

[http://appgenor.blogspot.it/2010/02/using-bumps-new-api-to-exchange-data.html](http://appgenor.blogspot.it/2010/02/using-bumps-new-api-to-exchange-data.html)

但是无法创建 Bumb 对象。它给了我一个错误。凹凸尚未实施。所以它不在sdk中，我想......

```
bumpObject = [[Bump alloc] init];   // Bump *bumpObject; 
```

请帮忙！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T08:58:13.247

我查看了您提到的链接，它似乎有点旧。您使用静态函数创建凹凸对象：[BumpClient sharedClient]，它也为您调用连接。我也在尝试使用它，但是在检测到碰撞时遇到问题，但我可以发送数据。我正在使用 iPod 和 bu.mp 网站来测试代码。

# c# - 我的应用程序如何找到旧版本的辅助文本文件？

> ID：10901590
> 
> 赞同：2
> 
> 时间：2012-06-05T17:01:45.537
> 
> 标签：c#, winforms, file, file-io, windows-xp

我有从文本文件中读取加密凭据的代码。我更新了该文本文件以包含连接字符串。其他所有内容都可以很好地读取和解密，但连接字符串却没有（当然，我也相应地更新了我的代码）。

所以我想知道：它是否在读取正确的文件。答案：不！\bin\debug 中的文件日期为 2012 年 6 月 5 日上午 9:41，但此代码：

```
using (StreamReader reader = File.OpenText("Credentials.txt")) {
    string line = null;
    MessageBox.Show(File.GetCreationTime("Credentials.txt").ToString()); 
```

...显示 2012 年 6 月 4 日下午 2:00:44

所以我在我的硬盘驱动器中搜索“Credentials.txt”的所有实例，看看它从哪里读取文件。它只找到了一个实例，即今天日期在 \bin\debug 中的实例。

？？？

注意：Credentials.txt 不是我的解决方案的一部分；应该是吗？（IOW，我只是将它复制到 \bin\debug 中，我没有执行“添加|现有项目”）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T17:05:06.243

如果您不更改当前目录，则 bin\Debug 中的文件将是正在读取的文件，因为您没有指定完整路径。

该问题可能是由于不同文件日期之间的差异造成的。创建日期（这是您获取并显示为 6/4 @ 2:00:44 pm 的日期）可能与修改日期不同（这是 Windows 资源管理器中默认显示的日期）。可以使用[`File.GetLastWriteTime`](http://msdn.microsoft.com/en-us/library/system.io.file.getlastwritetime)而不是获取此日期`GetCreationTime`。

话虽如此，我建议使用文件的完整路径，而不是假设当前目录与可执行路径相同。指定完整路径（可以根据可执行路径来确定）会更安全，以后也不太可能出问题。这可以通过以下方式完成：

```
var exePath = System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetEntryAssembly().Location);
var file = System.IO.Path.Combine(exePath, "Credentials.txt");
using (StreamReader reader = File.OpenText(file)) { // ... 
```

# postgresql - Heroku 是否支持外键和唯一约束？

> ID：10901606
> 
> 赞同：1
> 
> 时间：2012-06-05T17:02:57.857
> 
> 标签：postgresql, heroku

我正在考虑将 Rails 应用程序移至 Heroku。

通常，我将具有 ON DELETE 行为的 FK 约束添加到所有 FK。到目前为止，我已经通过编写原始 SQL 来添加约束来做到这一点，因为 Rails 迁移没有提供这样做的方法。

我还在需要的地方添加了 UNIQUE 键。

如果我搬到 Heroku，我还能以这种方式添加约束吗？

提出这个问题的另一种方法是，我是否可以使用 Heroku 直接访问我的数据库，或者我是否仅限于在迁移中可以做的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T18:53:01.187

您可以使用 执行迁移中所需的任何 SQL `connection.execute`，例如：

```
def up
    connection.execute(%q{
        alter table t add constraint c check (x in ('a', 'b', 'c'))
    })
end
def down
    connection.execute('alter table t drop constraint c')
end 
```

如果您不想通过原始 SQL 管理您的 FK，您还可以使用[foreigner](https://github.com/matthuhiggins/foreigner)为您的迁移添加适当的 FK 支持。`schema.rb`

您可以使用该`:unique => true`选项来`add_index`获取唯一的约束/索引。

我已经完成了所有这些工作，甚至在 Heroku 的专用 PostgreSQL 数据库中添加了函数（SQL 和 Pl/pgSQL）和触发器。我不确定共享数据库支持多少，但唯一索引肯定会支持，而且我很确定 FK 和 CHECK 也将可用。

# objective-c - 模态视图控制器大小

> ID：10901607
> 
> 赞同：0
> 
> 时间：2012-06-05T17:03:08.393
> 
> 标签：objective-c, ipad, uiviewcontroller, modal-dialog, modalviewcontroller

我正在尝试显示模态视图控制器，但保持导航栏显示在 iPad 上。我尝试了不同的演示风格，但都没有奏效。是否可以调整它的大小，或者在某个视图的正上方显示它，而不是在整个视图控制器上方？

**编辑：** *添加代码：*

```
- (void)buttonPressed:(id)sender
{
    RKWebViewController *webViewController = [[RKWebViewController alloc] initWithNibName:nil bundle:nil];
    webViewController.request = [NSURLRequest requestWithURL:_link];
    webViewController.webView.delegate = self;
    webViewController.shouldDisplayDoneButton = YES;
    webViewController.modalPresentationStyle = UIModalPresentationCurrentContext;
    [self presentModalViewController:webViewController animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T17:15:04.487

采用 -

```
- (void)buttonPressed:(id)sender
{
    RKWebViewController *webViewController = [[RKWebViewController alloc] initWithNibName:nil bundle:nil];
    webViewController.request = [NSURLRequest requestWithURL:_link];
    webViewController.webView.delegate = self;
    webViewController.shouldDisplayDoneButton = YES;

    UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:webViewController];
    [webViewController release];

    navController.modalPresentationStyle = UIModalPresentationCurrentContext;
    [self presentModalViewController:navController animated:YES];
    [navController release]; 
```

}

# django - 在 django 中赋值之前引用的局部变量“stockqty”

> ID：10901608
> 
> 赞同：0
> 
> 时间：2012-06-05T17:03:16.637
> 
> 标签：django

请问我如何解决分配前引用的错误局部变量'stockqty'。我在我的一个模型中有一个保存方法，它搜索一个项目并返回一些值，如数量、价格、成本等，但我一直收到这个错误。

def保存（自我）：

```
 callitems=Item.objects.filter(subcategory=self.ItemName)

    for callitem in callitems:
        stockqty=callitem.quantity
        #stovkqty.append(callitem.quantity)
        price=callitem.unitprice
        #price.append(callitem.unitprice)
        cost=callitem.unitcost
        #cost.append(callitem.unitcost)
        vat=callitem.tax.rate
    if self.quantity < stockqty: the error complain is here
        if self.discount==True:
            self.total= self.discountprice * self.quantity
            self.profit=self.total-(cost * self.quantity)
            self.salesdate=date.today()
            self.salestime=datetime.now()
            self.staff='admin'
            Item.objects.filter(subcategory=self.ItemName).update(quantity=stockqty-self.quantity)
        else:
            self.total= price * self.quantity
            self.profit=self.total-(cost * self.quantity)
            self.salesdate=date.today()
            self.salestime=datetime.now()
            self.staff='admin'
            Item.objects.filter(subcategory=self.ItemName).update(quantity=stockqty-self.quantity)
    super(RecordSales, self).save() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T17:06:37.053

你可能有一个缩进错误。第一条`if`语句应该在 for 循环内，但它与它“并行”。尝试这个：

```
callitems=Item.objects.filter(subcategory=self.ItemName)

    for callitem in callitems:
        stockqty=callitem.quantity
        #stovkqty.append(callitem.quantity)
        price=callitem.unitprice
        #price.append(callitem.unitprice)
        cost=callitem.unitcost
        #cost.append(callitem.unitcost)
        vat=callitem.tax.rate
        if self.quantity < stockqty:    # the error complain is here
            if self.discount==True:
                self.total= self.discountprice * self.quantity
                self.profit=self.total-(cost * self.quantity)
                self.salesdate=date.today()
                self.salestime=datetime.now()
                self.staff='admin'
                Item.objects.filter(subcategory=self.ItemName).update(quantity=stockqty-self.quantity)
            else:
                self.total= price * self.quantity
                self.profit=self.total-(cost * self.quantity)
                self.salesdate=date.today()
                self.salestime=datetime.now()
                self.staff='admin'
                Item.objects.filter(subcategory=self.ItemName).update(quantity=stockqty-self.quantity)
        super(RecordSales, self).save() 
```

# java - JPA - 从多对一关系中获取集合

> ID：10901614
> 
> 赞同：0
> 
> 时间：2012-06-05T17:03:34.307
> 
> 标签：java, jpa, collections, one-to-many, many-to-one

我有一个表 Post 和 Post_Image

```
 @Entity
@Table(name = "post")
@XmlRootElement
@NamedQueries({
    @NamedQuery(name = "Post.findAll", query = "SELECT p FROM Post p"),
    @NamedQuery(name = "Post.findByPostId", query = "SELECT p FROM Post p WHERE p.postId = :postId"),
    @NamedQuery(name = "Post.findByTitle", query = "SELECT p FROM Post p WHERE p.title = :title"),
    @NamedQuery(name = "Post.findByCreatedDatetime", query = "SELECT p FROM Post p WHERE p.createdDatetime = :createdDatetime")})
public class Post implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @NotNull
    @Column(name = "post_id")
    private Integer postId;
    @Basic(optional = false)
    @NotNull
    @Size(min = 1, max = 500)
    @Column(name = "title")
    private String title;
    @Basic(optional = false)
    @NotNull
    @Lob
    @Size(min = 1, max = 65535)
    @Column(name = "content")
    private String content;
    @Column(name = "created_datetime")
    @Temporal(TemporalType.TIMESTAMP)
    private Date createdDatetime;
    @JoinColumn(name = "user_id", referencedColumnName = "user_id")
    @ManyToOne(optional = false)
    private User userId;
    @JoinColumn(name = "post_type_id", referencedColumnName = "post_type_id")
    @ManyToOne(optional = false)
    private PostType postTypeId;

    public Post() {
        Date date = new Date();
        this.createdDatetime =new Date(date.getTime());

    }

    public Post(Integer postId) {
        this.postId = postId;
    }

    public Post(Integer postId, String title, String content) {
        this.postId = postId;
        this.title = title;
        this.content = content;
    }

    public Integer getPostId() {
        return postId;
    }

    public void setPostId(Integer postId) {
        this.postId = postId;
    }

    public String getTitle() {
        return title;
    }

    public void setTitle(String title) {
        this.title = title;
    }

    public String getContent() {
        return content;
    }

    public void setContent(String content) {
        this.content = content;
    }

    public Date getCreatedDatetime() {
        return createdDatetime;
    }

    public void setCreatedDatetime(Date createdDatetime) {
        this.createdDatetime = createdDatetime;
    }

    public User getUserId() {
        return userId;
    }

    public void setUserId(User userId) {
        this.userId = userId;
    }

    public PostType getPostTypeId() {
        return postTypeId;
    }

    public void setPostTypeId(PostType postTypeId) {
        this.postTypeId = postTypeId;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (postId != null ? postId.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof Post)) {
            return false;
        }
        Post other = (Post) object;
        if ((this.postId == null && other.postId != null) || (this.postId != null && !this.postId.equals(other.postId))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "entity.Post[ postId=" + postId + " ]";
    }

} 
```

和

```
@Entity
@Table(name = "post_image")
@XmlRootElement
@NamedQueries({
    @NamedQuery(name = "PostImage.findAll", query = "SELECT p FROM PostImage p"),
    @NamedQuery(name = "PostImage.findByPostImageId", query = "SELECT p FROM PostImage p WHERE p.postImageId = :postImageId"),
    @NamedQuery(name = "PostImage.findByPath", query = "SELECT p FROM PostImage p WHERE p.path = :path"),
    @NamedQuery(name = "PostImage.findByTitle", query = "SELECT p FROM PostImage p WHERE p.title = :title")})
public class PostImage implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @Basic(optional = false)
    @NotNull
    @Column(name = "post_image_id")
    private Integer postImageId;
    @Basic(optional = false)
    @NotNull
    @Size(min = 1, max = 500)
    @Column(name = "path")
    private String path;
    @Basic(optional = false)
    @NotNull
    @Size(min = 1, max = 500)
    @Column(name = "title")
    private String title;
    @JoinColumn(name = "post_id", referencedColumnName = "post_id")
    @ManyToOne(optional = false)
    private Post postId;

    public PostImage() {
    }

    public PostImage(Integer postImageId) {
        this.postImageId = postImageId;
    }

    public PostImage(Integer postImageId, String path, String title) {
        this.postImageId = postImageId;
        this.path = path;
        this.title = title;
    }

    public Integer getPostImageId() {
        return postImageId;
    }

    public void setPostImageId(Integer postImageId) {
        this.postImageId = postImageId;
    }

    public String getPath() {
        return path;
    }

    public void setPath(String path) {
        this.path = path;
    }

    public String getTitle() {
        return title;
    }

    public void setTitle(String title) {
        this.title = title;
    }

    public Post getPostId() {
        return postId;
    }

    public void setPostId(Post postId) {
        this.postId = postId;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (postImageId != null ? postImageId.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof PostImage)) {
            return false;
        }
        PostImage other = (PostImage) object;
        if ((this.postImageId == null && other.postImageId != null) || (this.postImageId != null && !this.postImageId.equals(other.postImageId))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "entity.PostImage[ postImageId=" + postImageId + " ]";
    }

} 
```

我想获取特定帖子的图像集合，例如 Collection objPostImage = objPost.getPostImageCollection() 但多对一关系不向我提供此功能如何将其转换为一对多或如何获取帖子的图像集合。？我是java新手，所以任何帮助和建议都将提前感谢thanx ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T17:19:24.187

您可以在 Post 对象中添加一个 java.util.Set 的 PostImages，并使用 Hibernate 映射来提供关系。 [这个网站](http://www.mkyong.com/hibernate/hibernate-one-to-many-relationship-example-annotation/)有一个很好的例子来建立一对多的关系。

因此，例如，您可能希望在 Post 类中添加如下内容：

```
private Set<PostImage> postImages = new HashSet<PostImage>();

@OneToMany(fetch = FetchType.LAZY, mappedBy = "post")
public Set<PostImage> getPostImages() {
return this.postImages;
}

public void setPostImages(Set<PostImage> postImages) {
this.postImages= postImages;
} 
```

然后，在 PostImage 类中，添加对 Post 对象的引用：

```
private Post post;

@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "POST_ID", nullable = false)
public Stock getPost() {
return this.post;
}

public void setPost(Post post) {
this.post= post;
} 
```

添加后，您将能够在 Post 对象上调用 getPostImages() 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T06:42:03.483

尝试这个：

```
@Entity
@Table(name = "post")
public class Post
{
    //....

    @OneToMany(mappedBy = "post")
    private Set<PostImage> images;

    //....
}

@Entity
@Table(name = "post_image")
public class PostImage
{
    //....

    @JoinColumn(name = "post_id", referencedColumnName = "id")
    @ManyToOne(optional = false)
    private Post post;

    //....
} 
```

Seth 的回答不起作用的原因是因为 EclipseLink 使用字段来访问持久性数据。（Hibernate 使用属性 IIRC。）您可以为每个类指定 JPA 提供者应如何访问此数据。

使用字段：

```
@Entity
@Access(AccessType.FIELD)
public class SomeEntity
{
    @Id
    private Long id;

    //....
} 
```

使用属性：

```
@Entity
@Access(AccessType.PROPERTY)
public class SomeEntity
{
    private Long id;

    //....

    @Id
    public Long getId()
    {
        return id;
    }
} 
```

然而，当使用`@Access(AccessType.PROPERTY)`字段时（至少在 EclipseLink 中），这样的事情是可能的：

```
@Entity
@Access(AccessType.PROPERTY)
public class SomeEntity
{
    private Long id;

    @Column(name = "text")
    private String someText;

    //....

    @Id
    public Long getId()
    {
        return id;
    }
} 
```

# c++ - 如何使用 Qt/C++ 获取 Windows 路径

> ID：10901615
> 
> 赞同：0
> 
> 时间：2012-06-05T17:03:35.773
> 
> 标签：c++, qt

我正在尝试使用 Qt 和 C++ 获取 Windows 路径。下面的代码编译，但没有得到 Qt 中的 windows 文件夹路径。相同的代码适用于 Visual Studio 2010

```
 wchar_t path[MAX_PATH];
      SHGetFolderPath(NULL, CSIDL_WINDOWS, NULL, 0, path); 
```

以下代码更改似乎有效：

```
 int const bufferSize = 512;        
     QScopedPointer<WCHAR> dirPath(new WCHAR[bufferSize]);
     ZeroMemory( dirPath.operator ->(), bufferSize);
     SHGetFolderPath(NULL, CSIDL_WINDOWS, NULL, 0, dirPath.operator ->()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T17:14:30.323

**没有 Qt 函数可以执行此操作，但是**您可以通过读取环境变量来实现您的要求`WINDIR`：

```
QStringList env_list(QProcess::systemEnvironment());

int idx = env_list.indexOf(QRegExp("^WINDIR=.*", Qt::CaseInsensitive));
if (idx > -1)
{
    QStringList windir = env_list[idx].split('=');
    qDebug() << "Var : " << windir[0];
    qDebug() << "Path: " << windir[1];
} 
```

输出：

```
Var :  "WINDIR"
Path:  "C:\WINDOWS" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T08:04:06.243

```
QString windowsInstallPath;

#ifdef Q_WS_WIN
QDir d;
if (d.cd("%windir%"))
    windowsInstallPath = d.absolutePath();
#endif

if (!windowsInstallPath.isNull())
    qDebug() << windowsInstallPath;
else
    qDebug() << "Not compiled for Windows"; 
```

应该管用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-19T01:00:17.487

我认为获取 Windows 目录的另一种非常合理的方法是从传递给程序的环境中获取它：

```
QProcessEnvironment env = QProcessEnvironment::systemEnvironment();
qDebug() << env.value("windir"); 
```

[https://doc.qt.io/qt-5/qprocessenvironment.html](https://doc.qt.io/qt-5/qprocessenvironment.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T17:14:01.180

我认为没有特定的 Qt 函数可以做到这一点。

最接近的是[QSysinfo](http://qt-project.org/doc/qt-4.8/qsysinfo.html)，它告诉您 Windows 版本。然而 SHGetFolderPath() 应该在 Qt 中工作，就像任何其他 win API 调用一样。

ps 在 Windows vista-> 这被替换为[SHGetKnownFolderPath](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762188%28v=vs.85%29.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-01T12:43:20.863

如果您的应用程序不支持终端服务，您可能会在 TS 环境下获得不同的目录。今天我自己发现了这一点，并不是说我曾经被 %windir% 或 %SystemRoot% 或使用过 ShGetKnownFolderPath 或 GetWindowsDirectory API。

我选择使用存在于 Windows 2000 及更高版本的 GetSystemWindowsDirectory。[微软的功能页面在这里。](https://docs.microsoft.com/en-us/windows/win32/api/sysinfoapi/nf-sysinfoapi-getsystemwindowsdirectorya)

Raymond Chen 的进一步解释[在这里。](https://devblogs.microsoft.com/oldnewthing/20140723-00/?p=423)

最后，代码...

它是用 Delphi 6 编写的。对此感到抱歉 :) 这是我目前正在编写的代码，但是如果您的语言中有 GetWindowsDirectory 的代码，那么只需要一些复制 + 重命名，因为函数签名是相同的。注意：此代码是 ANSI（...Delphi 6 中的单字节字符）。

```
function GetSystemWindowsDirectoryA(lpBuffer: PAnsiChar; uSize: UINT): UINT; stdcall; external kernel32 name 'GetSystemWindowsDirectoryA';

function GetSystemWindowsDirectory: string;
var
  buf: array[0..MAX_PATH] of Char;
  resultLength: Cardinal;
begin
  resultLength := GetSystemWindowsDirectoryA(@buf, SizeOf(buf));
  if resultLength = 0 then
    RaiseLastOSError;
  SetLength(Result, resultLength);
  Move(buf, PChar(Result)^, resultLength);
end; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-14T09:17:04.467

这是一个单行解决方案：

`QString winPath = QString::fromUtf8(qgetenv("windir"));`

这也可以用于任何环境变量。我不确定`qgetenv`Qt4 中是否可用，但它在 Qt5 中。

# jquery - 隐藏菜单 onClick

> ID：10901626
> 
> 赞同：3
> 
> 时间：2012-06-05T17:04:07.023
> 
> 标签：jquery, html, css, drop-down-menu, menu

我有这个下拉菜单，只要我的用户点击链接，它就会向下滑动。但是，每当用户单击页面上的某个位置（当然不在菜单上）时，我不知道如何使它滑动。

我的 CSS 看起来像这样：

```
<li class="da-header-button message">
    <span class="da-button-count">32</span>
    <a href="#">Notifications</a>
    <ul class="subnav">
        <li class="head"><span class="bold">Notificatons</span></li>
        <li class="item"><a href="#">Under menu</a></li>
        <li class="item"><a href="#">Under menu</a></li>
    </ul>
</li> 
```

我当前的 jQuery 代码如下所示：

```
jQuery("ul.topnav li").click(function() { //When trigger is clicked...  
    //Following events are applied to the subnav itself (moving subnav up and down)  
    jQuery(this).find("ul.subnav").slideDown('fast').show(); //Drop down the subnav on click  
    jQuery(this).hover(function() {  
    }, function(){  
        jQuery(this).find("ul.subnav").slideUp('slow'); //When the mouse hovers out of the subnav, move it back up  
    });  
}); 
```

`jQuery(this).hover(function()`如果我从 this:到 this:编辑最后一个 jQuery 函数，`jQuery(this).click(function()` 它不起作用，因为它只会向下滑动，然后立即向上滑动。

感谢您的帮助。

编辑：

多谢你们！但是，如果我同时打开其中两个子菜单怎么办？我怎样才能防止这种情况？

我只想允许打开 1 个。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T17:08:01.247

当点击传播到文档时，向上滑动所有可见菜单：

```
$(document).on("click", function(){
    $(".subnav:visible").slideUp();
}); 
```

然后通过停止事件传播来防止在菜单中发生这种情况。

```
$("ul.topnav").on("click", "li", function(e){
    e.stopPropagation();
    $(".subnav:visible", $(this).siblings()).slideUp("fast");
    $(".subnav", this).slideDown();
}); 
```

小提琴：http: [//jsfiddle.net/jonathansampson/qQsdN/](http://jsfiddle.net/jonathansampson/qQsdN/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T17:09:51.907

这个 JQuery 应该可以工作：

```
$('#nav li').hover(
    function () {
        //show its submenu
        $('ul', this).slideDown(100);

    },
    function () {
        //hide its submenu
        $('ul', this).slideUp(100);        
    }
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T17:13:14.707

jQuery(this).find() 将找到“this”的**后代。**在您的代码中，“this”由于新的闭包“function()”而发生了变化。

试试这个：

```
jQuery("ul.topnav li").click(function() { //When trigger is clicked...  

    var me = this;
    //Following events are applied to the subnav itself (moving subnav up and down)  
    jQuery(me).find("ul.subnav").slideDown('fast').show(); //Drop down the subnav on click  

    jQuery(me).click(function() {  
    }, function(){  
        jQuery(me).find("ul.subnav").slideUp('slow'); //When the mouse hovers out of the subnav, move it back up  
    });  

}); 
```

# security - CGI 脚本中的绝对路径是否安全？

> ID：10901629
> 
> 赞同：1
> 
> 时间：2012-06-05T17:04:12.217
> 
> 标签：security, path, cgi, absolute

我正在为一个网站创建一个新设计，并且有一个旧的 CGI 脚本，它会向我们的服务器发送一封电子邮件。由于隐私问题，我无法在此处发布代码，但问题将在一秒钟内清楚。

此 CGI 脚本采用一些模板，然后重定向到“thanks.htm”页面。但是在这样做的同时，它使用的是绝对路径。

现在的问题是：使用绝对路径是否安全？我的意思是，是否可以读出 CGI 脚本以获取有关服务器架构的信息？

提前致谢， 问候 Thunderhook

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T18:34:05.333

您没有提到哪个平台或网络服务器，但无论如何，正确配置的网络服务器不应该能够提供可读的 cgi 脚本。我认为在安全的环境中，cgi-bin 目录应该位于可访问的网络空间之外。

恕我直言，使用绝对路径的问题与其说是安全问题，不如说是可扩展性问题。如果它是我的应用程序，我会将操作系统环境变量设置为文档根目录，然后使用该变量构建绝对路径。这是否提供了一些额外的安全性？也许 - 因为您对文件结构侦察的担忧有所减轻。但它确实使重新配置应用程序或将其移植到新的服务器/位置更容易。

# javascript - javascript 键 i18n

> ID：10901631
> 
> 赞同：0
> 
> 时间：2012-06-05T17:04:13.377
> 
> 标签：javascript, arrays, dynamic, key

我有这样的代码。

```
var myI18n; // json : "{"close":"بستن","locationInformation":"مشخصات جغرافیایی","yes":"بله","no":"خیر"}" 
```

我想用这样的东西。

```
$.modal({
    buttons: {
        myI18n.close: function(win) {

        }
    }
}); 
```

但我有一个语法错误。也用这个方法字符串不会改变。

```
var aaa = myI18n.close;
$.modal({
    buttons: {
        aaa: function(win) {

        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T17:07:14.383

将具有动态名称的属性分配给对象的唯一方法是使用数组语法

```
 var myButtons = {};
 myButtons[myi18n.close] = ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T17:08:27.507

您不能在对象字面量的键名中引用变量，因此您需要先创建对象，使用常规`[]`符号填充它，然后在`$.modal`.

```
buttons = {}

buttons[myI18n.close] = function(win) {
   // ....
}

$.modal({
    buttons: buttons
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T17:08:53.077

您不能直接将对象文字与变量键一起使用。您需要分离出您的代码以使用数组访问语法 ( `obj[keyname] = value`)。

```
var obj = {
        buttons: {}
    };
obj.buttons[myI18n.close] = function () {...};
$.modal(obj); 
```

或者，您可以使用模块模式：

```
$.modal({
    buttons: (function () {
        var btns = {};
        btns[myI18n.close] = function () {...};
        return btns;
    }())
}); 
```

# html - 表格宽度仅在 IE 中不起作用

> ID：10901632
> 
> 赞同：0
> 
> 时间：2012-06-05T17:04:16.573
> 
> 标签：html, css, internet-explorer, html-table

我有一个宽度为 161 像素，高度为 374 像素的表格，它在 Firefox 中运行良好，但宽度和高度在 Internet Explorer 中不起作用。这是网址： http: [//nonudot.io-web.com/demo](http://nonudot.io-web.com/demo)。

```
<div class="BottomBorderBoxes">
<table width="200" cellspacing="0" cellpadding="0" border="0" style="font-size:13px;">
<tbody>
    <tr>
        <td>
        <h2>Concern Area 1</h2>
        </td>
    </tr>
    <tr>
        <td>Describe Location<br>
        (Please Use Street Names)<br>
        <br>
        <div class="EditingFormControlNestedControl">
            <input type="text" class="TextBoxField" id="ctl00_plcMain_CMSEditableRegion2_BizFormControl1_Bizform1_ctl00_Area1_StreetName" maxlength="300" name="ctl00$plcMain$CMSEditableRegion2$BizFormControl1$Bizform1$ctl00$Area1_StreetName">
        </div></td>
    </tr>
    <tr>
        <td><br>
        City<br>
        <div class="EditingFormControlNestedControl">
            <input type="text" class="TextBoxField" id="ctl00_plcMain_CMSEditableRegion2_BizFormControl1_Bizform1_ctl00_Area1_City" maxlength="300" name="ctl00$plcMain$CMSEditableRegion2$BizFormControl1$Bizform1$ctl00$Area1_City">
        </div></td>
    </tr>
    <tr>
        <td><br>
        Type of Issue<br>
        <div class="EditingFormControlNestedControl">
            <select class="DropDownField" id="ctl00_plcMain_CMSEditableRegion2_BizFormControl1_Bizform1_ctl00_Area1_Issue" name="ctl00$plcMain$CMSEditableRegion2$BizFormControl1$Bizform1$ctl00$Area1_Issue">
                <option value="1">Needs curb cut or existing curb cut needs improvement</option>
                <option value="2">Needs wheelchair ramp or existing ramp needs improvement</option>
                <option value="3">Crosswalk improvements needed</option>
                <option value="4">Uneven surface</option>
                <option value="5">Other (please indicate below)</option>

            </select>
        </div>&nbsp;<br>
        <div class="EditingFormControlNestedControl">
            <input type="text" class="TextBoxField" id="ctl00_plcMain_CMSEditableRegion2_BizFormControl1_Bizform1_ctl00_Area1_IssueComment" maxlength="300" name="ctl00$plcMain$CMSEditableRegion2$BizFormControl1$Bizform1$ctl00$Area1_IssueComment">
        </div></td>
    </tr>
    <tr>
        <td><br>
        Addtional Input<br>
        <div class="EditingFormControlNestedControl">
            <textarea class="TextAreaField" id="ctl00_plcMain_CMSEditableRegion2_BizFormControl1_Bizform1_ctl00_Area1_AddInput" cols="20" rows="2" name="ctl00$plcMain$CMSEditableRegion2$BizFormControl1$Bizform1$ctl00$Area1_AddInput"></textarea>
        </div><br>
        &nbsp;</td>
    </tr>
    <tr>
        <td>&nbsp;</td>
    </tr>
</tbody> 
```

这是我的 CSS

```
.BottomBorderBoxes {
border: 1px solid black;
float: left;
height: 374px;
margin-right: 5px;
margin-top: 10px;
padding: 7px;
width: 161px;} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T17:09:21.190

你的问题是你没有指定一个`DOCTYPE`.

如果没有 doctype，IE 将始终进入 Quirks 模式。Quirks 模式会导致各种渲染故障。要解决这个问题，只需在页面顶部的`<html>`标记之前添加一个有效的文档类型。

如果您不确定要使用哪种文档类型，请使用 HTML5 文档类型 - 就像这样简单：

```
<!DOCTYPE html> 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T17:08:04.807

添加`<!DOCTYPE html>`到您的页面。否则，您正在为 IE 5.5 进行设计。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T17:11:45.987

修复`DOCTYPE`将解决问题，但您需要再次查看下拉框，因为它会超出表格和 div 的范围，因为项目长于容器的宽度。

[http://jsfiddle.net/y2dGZ/1/](http://jsfiddle.net/y2dGZ/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T17:08:55.463

您已在表格的 html 属性中指定其宽度为 200 像素。我的猜测是这会产生问题。此外，如果表格超过 CSS 中指定的宽度/高度设置，您还没有指定如何处理溢出，因此浏览器只是依赖于它被告知要做的事情，默认情况下，对于表格来说，是扩展超出指定的限制。尝试在 css 上设置 overflow: hidden 来限制它。

# computer-science - 什么是 3D 蒙特卡罗集成的巧妙边界框？

> ID：10901633
> 
> 赞同：0
> 
> 时间：2012-06-05T17:04:36.477
> 
> 标签：computer-science, numerics

对于一个项目，我需要计算 3D 中两个重叠椭球的重叠体积。该方法本身不是问题：我基本上是在边界框中选择随机点并检查它们是否同时在两个椭球体中。

在我对运行时优化程序的永无止境的追求中，更小的边界框显然是有利的。现在，“盒子”是一个以椭球质心之间的中点为中心的球体，其直径对应于最长的椭球轴。这完全是任意的，我相当肯定重叠体积将始终包含在这个球体中，但我真的很想找到一些方法来优化整个过程。

有没有一些通用的方法来优化包围体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T20:30:55.320

如果你想坚持蒙特卡洛，这里有另一个想法：

将椭圆体投影到 XZ 平面上以获得 2 个椭圆。计算它们的边界矩形的交集以用作计算的边界矩形。

然后沿着 Y 轴通过边界矩形内的 XZ 平面发射光线。对于每条射线，计算与椭球的交点并计算在两者内部的射线的长度。将此添加到变量“hits_length”中。

椭球相交的体积应近似为：

hits_length/ray_shot * bounding_rectangle_area

同样，您通过对 2D 空间进行采样来计算体积，这应该使其收敛更快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T17:18:38.203

这可能更像是一个数学问题而不是编程问题，但我认为 2 个椭圆体的交集是一个凸形，所以也许你可以尝试另一种方法而不是蒙特卡洛来处理这样一个表现相对良好的对象。

首先，您需要（以某种方式）在两个椭球内找到一个点。

现在创建一个以该点为中心的立方体，大到足以完全包含两个椭圆体。沿着所有 3 个轴将立方体细分为 8 个大小相等的子立方体（创建八叉树的第一步）。

在此之后，对子多维数据集应用递归。如果一些立体角在两个椭球内而一些不在，则再次细分立方体。此外，如果立方体面的某些区域在椭圆体内而其他区域不在，请再次细分。

重复到所需的递归深度。您可以通过对细分的立方体的体积求和来跟踪计算错误。

现在，这里具有挑战性的操作是解决“如果立方体面的某些区域在两个椭球内”。椭圆体与平面的交点就是椭圆。要检查 6 个立方体面中的每一个，您需要将它们与椭圆体相交，然后如果它们都与立方体面重叠，则将剩余的椭圆彼此相交。幸运的是，对于 2D 椭圆-椭圆重叠测试，您可以更轻松地找到参考...

Monte Carlo 将通过 O(2^n) 的努力为您提供 n 位的准确度，因此例如 24 位需要 1670 万个样本。如果您使用这种分而治之的方法专注于形状表面，您应该只需要 O(2^(n*2/3)) 个样本，即 24 位大约 65,000 个样本。

此外，您对初始边界框大小的担忧也变得无关紧要，因为在初始递归步骤中会迅速删除多余的边界框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T17:11:52.217

这不是一道数学题，而不是一道CS题吗？您似乎要求的是一个定义两个椭球可能重叠的公式。当然，您打算使用该公式使您的代码更高效，但据我所知，这与核心问题无关。如果您有公式并试图弄清楚如何将其编写为代码，那将是另一回事。也许您应该考虑将其发布到[https://math.stackexchange.com/](https://math.stackexchange.com/)

在我看来，您可以将您的问题重新定义为“定义 3D 空间中 2 个椭圆体之间可能重叠的体积的公式是什么？”，这与计算无关。

# eclipse - 为什么我的 Eclipse 项目构建如此缓慢？

> ID：10901636
> 
> 赞同：13
> 
> 时间：2012-06-05T17:04:45.700
> 
> 标签：eclipse

我们使用 Eclipse（Indigo，带有 STS）。我们的某些项目需要非常长的时间来构建。通常，进度指示器会持续 30 秒，例如 87%。

我试图找出 Eclipse 在构建周期中花费的时间。我希望能够优化构建或禁用导致它如此缓慢的组件。我希望看到一个日志文件说（“编译 java 代码”、“处理资源”等）。

我浏览了 .metadata 目录中的日志文件。我在 Eclipse 站点上查看了提示。我在启动 Eclipse 时尝试过使用“-debug”。我仍然找不到我正在寻找的信息。

有没有办法让 Eclipse 在构建项目时吐出它花费时间在哪些活动上的日志？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-16T08:56:37.573

为您的工作区和项目目录禁用病毒扫描软件。我以这种方式提高了构建速度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T21:57:02.980

这些是什么类型的项目？爪哇？动态网络？在项目“属性”对话框中，有两件事需要查看以了解正在发生的事情的提示；查看**Builders**部分和**Validation**部分。尝试禁用验证以查看这是否会影响您的构建时间。

要深入了解构建似乎挂起时发生的情况，请尝试设置`-debug`和`-consoleLog`选项，如此[处](http://wiki.eclipse.org/How_to_report_a_deadlock#Using_eclipse_-consolelog)所述。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T11:33:43.560

你可以去编辑 **Windows->preference->general->workspace->build order**来编辑根据你的项目需要存在的默认值。

并检查**使用循环构建时的最大迭代次数**。

我希望它有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-28T21:19:37.767

由于 eclipse 是一个 Java 应用程序，因此您可以使用常用的调试工具。特别是，您可以尝试使用 JConsole 连接到 eclipse 并检查构建“挂起”时采取的线程转储，或者在分析器中运行 eclipse。

您可能会发现诸如验证器尝试下载 xml 模式，并等待超时，因为 eclipse 未配置为使用公司代理服务器 - 这很难通过其他方式找到；-)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T15:23:43.997

查看 Apache Ant 构建脚本。Eclipse 支持自动生成它们作为起点，而不是手动编写整个代码。我工作的商店使用经过调整的 ANT 脚本来优化和控制构建顺序。然后，我们使用 shell 脚本将输出通过管道传输到日志文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-29T09:47:13.067

您可以尝试用这个[aapt](http://forum.xda-developers.com/showthread.php?t=1907281 "适应")替换。我为特定项目构建的时间从 3 分钟缩短到 41 秒......

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-29T13:16:03.613

这是一篇旧帖子，但想分享我的解决方案。我正在使用 eclipse Luna，我注意到当您继续在 GIT 分支上工作而不检查 git 时，构建变得非常缓慢。就我而言，我刚刚删除了文件夹 .git 和文件 .gitignore ，构建速度非常快。请注意，这将断开 eclipse 与 git 的连接，因此仅当您知道如何使用 git 命令连接回 git 分支时才使用此方法。

# linux - 如何在家庭服务器上安装 CentOS？

> ID：10901642
> 
> 赞同：0
> 
> 时间：2012-06-05T17:05:20.990
> 
> 标签：linux, centos

我还是个菜鸟，所以请多多包涵。我构建了自己的计算机，非常简单的 4 gig 内存，i7 处理器，1TB 硬盘，并且我正在尝试使用 CentOS 对其进行映像，这样我就可以拥有自己的服务器用于我正在从事的大学项目。到目前为止，我在 Stanford.edu 网站上找到了 CentOS 的下载页面，但我想知道我首先想要的扩展是什么？.iso 或 .torrent。其次，我在寻找 i386 还是 x86 的架构类型？如果有人可以一步一步指导我如何做到这一点，那就太棒了。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T17:56:52.487

由于您的计算机是 i7，您可以选择使用 i386 版本或 x86_64 版本。i386 通常表示它的 32 位，而 x86_64 是 64 位。任何一个版本都可以在您的机器上正常安装，这取决于您想要 64 位操作系统还是 32 位操作系统。正如geermc4所说，iso是您要下载的文件。iso 将为您提供一个 dvd/cd 映像，您可以将其刻录到光盘并启动以安装 centos。我可以建议阅读[centos 安装指南](http://www.centos.org/docs/5/html/5.2/Installation_Guide/)以获取有关安装 centos 的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T17:09:07.410

.torrent 只是意味着你需要一个 torrent 客户端来获取你的 .iso，如果你选择 .iso，你是直接从他们的网站下载的，.torrent 可能会更快，架构取决于你的 CPU，i386 是在这里最安全的选择，至于指南，也许[这](http://www.howtoforge.com/installation-guide-centos5.1-desktop)会有所帮助

# codeigniter - 使用 Codeigniter 和 XenForo 跨多个站点的单用户系统

> ID：10901647
> 
> 赞同：2
> 
> 时间：2012-06-05T17:05:49.967
> 
> 标签：codeigniter, openid, pyrocms, authentication

我有几个网站，基本上我希望有相同的用户系统。

其中一个站点运行 XenForo，其他站点都运行 Codeigniter，或者基于 Codeigniter 构建的系统（例如 PyroCMS）。

除了能够注册之外，我还需要以某种方式让用户使用相同的用户名/密码组合登录任何网站。

我知道有很多方法可以解决这个问题，例如 OpenID 服务器，但是我不能 100% 确定哪种方法最适合我的情况，因为我使用的两个系统并不能很好地协同工作。

我不太在意让它同时在所有站点上自动登录，但只是不希望人们不得不使用多个不同的凭据。

我是否会按照中央 OpenID 服务器的思路思考一些事情，在“从”站点上使用 openid 身份验证是我的最佳选择吗？

在这种情况下，我最好将 XenForo 用户表用作“主”用户表。

任何意见或建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T17:07:59.500

前段时间在这里写了一篇，虽然好久没更新了，但应该还是不错的：

[http://www.jeremyhutchings.com/2010/12/xenforo-and-codeigniter-intergration.html](http://www.jeremyhutchings.com/2010/12/xenforo-and-codeigniter-intergration.html)

# javascript - 制作一个用于美化 html 或缩小 html 的 jquery 插件

> ID：10901648
> 
> 赞同：1
> 
> 时间：2012-06-05T17:05:52.373
> 
> 标签：javascript, jquery, dom, html-parsing, nodes

我想制作一个 jquery 插件来美化 html 代码，将缩进空格作为一个选项。

我想知道如何进行。*我应该递归地*提取每个 dom 元素并存储它然后继续它吗？

**注意：我尝试了上述过程，但它不适用于 4-5 个标签，并且如果函数中传递了更多 dom 元素，则页面崩溃。**

递归实现的代码类似于：

```
result="";
function serialize(domNode, indent) {
//get tagname & attributes
result+="<"+tagname+""+attributes+">";
var children=domNode.childNodes;
for (var i=0;i<children.length;i++) {
    var node=children[i];
    if(children[i].nodeType==3) {
        result += children[i].data;
    }
    else if (children[i].nodeType == 1) {
        result += serialize(children[i], indent);
    }
}
result += "</"+tagname+">";
} 
```

**PS：我知道代码很糟糕，所以我需要一些更好的实现。**

# ios - 调整相机图像大小 iOS

> ID：10901650
> 
> 赞同：0
> 
> 时间：2012-06-05T17:06:08.847
> 
> 标签：ios, uiimageview, scaling

我有一些调整大小的问题。我希望用户拍照，但我希望将其调整为更小的尺寸（iPhone 上为 320、480 或全尺寸）。mainImageView 设置为 320,480 并填充模式比例。我已经尝试过适合的方面，但它似乎仍然没有解决它。这是代码。

```
- (void)imagePickerController:(UIImagePickerController *) Picker

didFinishPickingMediaWithInfo:(NSDictionary *)info {

UIImage *originalImage = [info objectForKey:UIImagePickerControllerOriginalImage];
UIImage *resizedImage;
CGSize newSize = CGSizeMake(320.0, 480.0);
resizedImage = [original imageScaledToFitSize:newSize]; // uses MGImageResizeScale

mainImageView.image = newImage; 
```

}

问题是它的缩放比例不正确（即棋盘图像在变换后是矩形而不是正方形）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T17:11:13.787

我相信拍摄的照片与设备屏幕的纵横比不同。这可能会导致您的问题。查看所拍照片的原始纵横比并确认它们是 1.3:1，这就是您要调整它们的大小。

# dojo - 在greasemonkey脚本中访问iframe中的javascript库

> ID：10901651
> 
> 赞同：1
> 
> 时间：2012-06-05T17:06:14.233
> 
> 标签：dojo, greasemonkey, scriptish

我正在尝试在我的 web 应用程序中访问 Dojo，但在获取所需内容时遇到了问题。具体来说，我在 iframe 中有一个 webapp，加载了不同版本的 Dojo：

在 Firebug 中，我可以这样做：

```
window.dojo.version; // 1.7
window.frames[0].window.dojo.version; // 1.0 
```

（注意 iframe 与父级在同一个域中）

在 GreaseMonkey 中，我找不到任何一个版本的 Dojo：

```
dojo // undefined
window.dojo // undefined
window.frames[0].window.dojo // undefined 
```

我开始研究`unsafeWindow`我不应该使用哪个。它使我可以访问 window'd Dojo，但不是我真正想要的 iframe'd dojo。

```
unsafeWindow.dojo.version // 1.7 (wrong version)
unsafeWindow.frames[0].dojo // undefined 
unsafeWindow.frames[0].window.dojo // undefined
window.frames[0].window.dojo // undefined
window.frames[0].unsafeWindow // undefined
window.frames[0].window.unsafeWindow // undefined 
```

我已经尝试过`withDoc`，但我怀疑我使用不正确：

```
unsafeWindow.dojo.withDoc(window.frames[0].window, function(){
    var dijit = unsafeWindow.dijit; // seems wrong; doesn't work
    var widget = dijit.byId('someWidgetInsideIframe');
    console.log(widget); // undefined
}, this); 
```

关于我可以尝试在 iframe 中访问 Dojo 1.0 的其他事情有什么建议吗？或者，如果不是这样，至少要弄清楚如何使用我可以访问的 Dojo 访问 iframe 中定义的 dojo 小*部件*？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T20:44:56.867

我希望***当 GM 在主页上运行时***`unsafeWindow.frames[0].window.dojo.version;`工作（见下文） 。在我看来，这不是一个错误，但首席 GM 开发人员可能不同意。考虑[提交错误报告](https://github.com/greasemonkey/greasemonkey/issues)。

 ***然而**，[Greasemonkey 通常会像处理独立页面一样处理框架/iframe](https://stackoverflow.com/a/10669321/331508)（有一些例外）。这意味着该脚本将为主页触发一次，并为与 //指令匹配`src`的每个框架触发一次。这也意味着不会在每次传递中都定义类似的东西。`@include``@exclude``@match``window.frames[0]`

您可以使用如下代码告诉您处于正确的框架中：

```
if (window.self == window.top.frames[0]) {
    //-- Currently running in the target frame
    unsafeWindow.console.log ("dojo.version:", unsafeWindow.dojo.version);
}
else
    unsafeWindow.console.log ("These are not droids... Or, er something."); 
```*

# git - 在预提交挂钩失败后继续部分 git svn dcommit

> ID：10901652
> 
> 赞同：4
> 
> 时间：2012-06-05T17:06:16.363
> 
> 标签：git, svn, git-svn

[尝试按照此答案](https://stackoverflow.com/a/772881/27358)将现有的 git 存储库导入 SVN ；几次提交都很顺利，但后来我遇到了一个失败的预提交钩子。

```
r180827 = 444fa1c75e5a31fe8d887637a7fbd3fc62b34354 (refs/remotes/trunk)
No changes between current HEAD and refs/remotes/trunk
Resetting to the latest refs/remotes/trunk
Unstaged changes after reset:
M       [some file]
M       [another file]
M       [...etc...]
        A       [problem file]
A repository hook failed: 'pre-commit' hook failed with error output:
[error description]
  at /usr/libexec/git-core/git-svn line 922 
```

我把钩子修好了，这样我就可以过去了；但是当我`git svn dcommit`再次尝试（显然错误）时，我得到了

```
[some file]: needs update
[another file]: needs update
[...etc...] 
```

当我执行“git status”时，我得到：

```
#       modified: [some file]
#       modified: [another file]
#       modified: [...etc...]
#
# Untracked files:
#   (use "git add<file>..." to include in what will be committed
#       
#       [problem file]
#       [other file modified in the commit that created the problem file]
#       [yet other files modified in that commit]
#       [...etc...] 
```

我想我可以吹走整个 SVN 树并重新开始，但我真的不想这样做。我如何从中恢复并继续 dcommit？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:09:43.977

由于dcommitting时出现以下错误，我遇到了完全相同的问题：

```
 0 [main] perl.exe" 5992 handle_exceptions: Exception: STATUS_ACCESS_VIOLATION
6635 [main] perl.exe" 5992 open_stackdumpfile: Dumping stack trace to perl.exe.stackdump 
```

由于我找不到任何其他解决方案，我只是对现在“未提交”的更改进行了本地提交（根据问题中的最后一个示例），之后我可以再次运行 dcommit。这有效地将剩余的本地提交压缩为一个，但至少它起作用了。

如果有人知道更好的解决方案，将不胜感激。

# business-catalyst - 在 Business Catalyst 中，如何根据搜索结果页面上的几个字段对 Web 应用程序项进行排序？

> ID：10901653
> 
> 赞同：0
> 
> 时间：2012-06-05T17:06:16.493
> 
> 标签：business-catalyst

我有一个网络应用程序及其搜索。搜索结果在多个页面上意味着它有分页。我的客户的要求是具有一项功能，该功能将根据某些 Web 应用程序项目对结果进行排序。例如，我们有一个字段价格，所以当用户选择价格时，它需要从高到低排序。有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T03:44:59.270

如果您的项目少于 500 个，有一种方法可以做到这一点（如果您有更多，它仍然可以完成，但更复杂）。

您将使用模块标签输出所有 Web 应用程序项。确保您的列表视图有价格。使用 jquery 读取所有结果并根据价格字段重新排序。

如果这需要在搜索结果页面而不是常规页面上发生，请将一个变量附加到搜索表单的操作 URL，您可以在结果页面上阅读该变量，以便您知道根据价格进行过滤。

# php - 使用 PHP 将人类时间转换为 UNIX 时间

> ID：10901656
> 
> 赞同：0
> 
> 时间：2012-06-05T17:06:33.220
> 
> 标签：php, unix, date, time

我有这样的字符串：`Thu, 27 May 2010 07:00:00 GMT`

我想将它们转换为 UNIX 时间戳

有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T17:07:34.203

```
echo strtotime('Thu, 27 May 2010 07:00:00 GMT'); 
```

[http://php.net/manual/en/function.strtotime.php](http://php.net/manual/en/function.strtotime.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T17:08:26.487

是的，有办法！事实上，*有不止一种方法可以做到！*;)

您可以使用 strtotime();

```
$time_en = "Thu, 27 May 2010 07:00:00 GMT"
$time = strtotime($time_en); 
```

[http://fr2.php.net/manual/fr/function.strtotime.php](http://fr2.php.net/manual/fr/function.strtotime.php)

# shell - node js与shell应用程序交互

> ID：10901660
> 
> 赞同：7
> 
> 时间：2012-06-05T17:06:53.237
> 
> 标签：shell, node.js, stdin, read-eval-print-loop

网上有很多关于如何生成子进程然后将结果捕获为字符串供您自己处理的 node js 示例。

但...

我想与子进程“交互”。例如，我将如何编写一个节点 js 应用程序，而不是通过调用' `python`'开始，然后键入一个语句' `1+1`'，让我捕获结果' `2`'，然后再继续键入另一个任意语句' `4+4`'？

（通过“类型”，我假设它需要将数据流式传输到进程使用的标准输入）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-05T21:37:02.147

```
var child = require('child_process');
var ps = child.spawn('python', ['-i']);
ps.stdout.pipe(process.stdout);
ps.stdin.write('1+1');
ps.stdin.end(); 
```

工作一种享受！

# python - Python CGI 错误 500：脚本头过早结束

> ID：10901662
> 
> 赞同：1
> 
> 时间：2012-06-05T17:06:59.547
> 
> 标签：python, cgi

我有这个相当复杂的 python 脚本我试图运行它导入其他自写的模块和诸如 sqlite 之类的东西。当我运行脚本时，我收到 500：内部服务器错误，并且日志显示：脚本头过早结束。

我知道这意味着我可能没有正确放置/键入标题，但我相信我这样做了。

```
#!/usr/bin/env python

import cgi
import cgitb; cgitb.enable(logdir=..., format="text")

print "Content-type: text/html"
print 
```

看起来不错，对吧？

我继续编写脚本并在最后打印结果。所有其他模块都没有标题或 hashbang，但我认为这很好。

问题可能是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-08T13:00:10.243

我有同样的问题。这解决了它：

```
#!/usr/bin/env python
# -*- coding: UTF-8 -*-

.
.
.

print "Content-Type: text/plain;charset=utf-8"
print 
```

# html - 如何调整 href="#object"

> ID：10901668
> 
> 赞同：2
> 
> 时间：2012-06-05T17:07:22.623
> 
> 标签：html, css

当使用 name="object" 然后使用 href="#object" id 让页面滚动到该对象时，可以调整页面所在的位置。而不是窗口的顶部，向下几个像素。我有一个固定的导航栏，当滚动时，内容在后面，所以导航栏总是可见的。因此，当我使用 href="#object" 时，它的一部分被切断，因为它位于导航栏后面。有什么修复吗？谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T17:16:26.983

使用命名锚点更改元素的顶部填充和边距样式。例如，如果您的标题为 100 像素高，则为您命名的锚点设置 -100 像素的边距顶部和 100 像素的填充顶部。

请参阅此**[jsFiddle 示例](http://jsfiddle.net/j08691/BGzu5/)**。

在此示例中，该链接将使粗体文本（'Vestibulum ante ipsum'）距离页面顶部 100 像素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T17:25:47.197

如果您想通过 css 选择器设置这些属性（如 j08691 中提到的），请将这个 JS 放入您的 html 中，然后您可以为每个锚点一个类，如果属性选择器不起作用（旧浏览器）：

```
function findAnchors(){
    anker = document.anchors;
    for(i=0; i<anker.length; i++ ){
        anker[i].className = "anchor";
    }
}
window.onload = findAnchors(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T17:20:03.923

您可以通过在插件配置中设置[jQuery.localScroll来做到这一点。](http://flesler.blogspot.be/2007/10/jquerylocalscroll-10.html)`offset`

在这里，[有一个小提琴](http://jsfiddle.net/MattiasBuelens/FXfqS/)。

# php - ftp_nlist 连接成功后返回 false

> ID：10901670
> 
> 赞同：0
> 
> 时间：2012-06-05T17:07:33.057
> 
> 标签：php, ftp

```
 <?

//$conn_id = ftp_connect($_GET['host'],21,5) or die ('Cant connect to host!');
$conn_id = ftp_connect($_GET['host']) or die ('Cant connect to host!');
ftp_pasv($conn_id, true);
echo 'host OK<br>';
$login_result = ftp_login($conn_id, addslashes($_GET['user']), $_GET['pass']) or die ('Cant connect with username/pass!');
echo 'conect OK<br>Contents there:';

print_r (ftp_nlist($conn_id,"."));
echo '<br />';
if(ftp_put($conn_id, "just-d-test.html", "img/just-d-test.html", FTP_BINARY))
echo 'put OK';
else
print  'put Failed!';

echo "<p><hr>";
echo phpinfo();
?> 
```

我在将 ftp_nlist 返回为 false 时遇到问题。

它连接良好，但总是为后一个任务返回 put Failed (false)。

我没有运气在 CentOS 中禁用了防火墙。PHP.ini 中没有特别禁用任何内容。

我正在使用 PHP 5.3.3。当我使用 FileZilla 访问 FTP.XXX 时，它会完美加载目录。

请问有人知道如何进行这项工作吗？

这就是我得到的[http://www.uploadaphoto.co.uk/images/untitled.jpg](http://www.uploadaphoto.co.uk/images/untitled.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T17:49:25.210

> 请注意 ftp_pasv() 只能在成功登录后调用，否则会失败。（[来源](http://www.php.net/manual/en/function.ftp-pasv.php)）

尝试在命令`ftp_pasv($conn_id, true)`后执行`ftp_login()`

# javascript - 包含块的样式/脚本

> ID：10901675
> 
> 赞同：0
> 
> 时间：2012-06-05T17:07:47.147
> 
> 标签：javascript, symfony, styles, twig

好的，我不确定我是否在这里错过了一个技巧。但是我在文档或在线解决方案中找不到任何内容。基本上我试图在模板块中包含一大块javascript，但样式也是如此。我总结了模板结构：

```
{# base.html.twig %}
<html>
  <head>
    <title>{% block title %}Base template{% endblock %}</title>
    {% block stylesheets %}
      <link rel="stylesheet" href="{{ asset('bundles/thisBundle/css/theme.css') }}" type="text/css" media="all" />
    {% endblock %}
    {% block scripts %}{% endblock %}
  <head>
  <body>
    {% block content %}hello from base{% endblock %}
    {% block javascripts %}
    {% endblock %}
  </body>
</html>

{# index.html.twig #}
{% extends 'base.html.twig %}
{% block content %}
  {% include 'ThisBundleBundle::templatewithascript.html.twig' %}
  <p>Some content here<p>
  {% include 'ThisBundleBundle::anothertemplatewithascript.html.twig' %}
{% endblock %} 
```

现在这是我的问题。从这个模板我想添加到 javascripts/stylesheets 块的内容，但我的包含在内容块内，我不能在 templatewithascript.html.twig 中扩展 index.html.twig，基本上我希望这个工作：

```
{# templatewithascript.html.twig #}
{% block stylesheets %}
  <link href="{{ asset('bundles/thisBundle/css/blockspecificstyle.css') }}" rel="stylesheet" type="text/css" />
{% endblock %}
{% block body %}
  <p>Click here and something happens</p>
{% endblock %}
{% block javascripts %}
  <script type="text/javascript">
    $(document).ready(function(){
      $("p").click(function(){
        $(this).hide();
      });
    });
  </script>
{% endblock %} 
```

或者这只是一个限制，我必须在包含内容的模板中包含样式/脚本？谢谢。鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:20:00.987

好的回答我自己的问题！导入宏是我想出的答案，即：

```
{# index.html.twig #}
{% extends 'base.html.twig' %}
{% import 'ThisBundleBundle::templatewithascript.html.twig' as importedTemplate %}
{% block content %}
  {{ importedTemplate.content }}
{% endblock %}
{% block javascripts %}
  {{ importedTemplate.js }}
{% endblock %}

{# templatewithascript.html.twig #}
{% macro content %}
  <p>Click here and something happens</p>
{% endmacro %}
{% macro js %}
  <script type="text/javascript">
    $(document).ready(function(){
      $("p").click(function(){
        $(this).hide();
      });
    });
  </script>
{% endmacro %} 
```

它似乎有效，但不确定我是否稍微改变了规则才能到达那里。而且似乎应该有一种更简单的方法可以让我在 templatewithascript.html.twig 中完成所有这些工作？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T17:23:03.950

你可以做的是将 index.html.twig 变成另一个可扩展的模板，从 templatewithascript.html.twig 扩展它并从你的控制器渲染它：

```
{# templatewithascript.html.twig #}
{% extends 'ThisBundleBundle::index.html.twig' %}
...

{# index.html.twig #}
{% extends 'base.html.twig %}
{% block content %}
  {% block body %}{% endblock body %}
{% endblock content %} 
```

# java - 存储此数据的对象或数组

> ID：10901676
> 
> 赞同：0
> 
> 时间：2012-06-05T17:07:53.867
> 
> 标签：java, arrays, object

所以，如果你有这样的数据：

```
site.name = "domain"
site.url = "http://www.domain.com"
site.color = "red"
site.author = "name" 
```

而且您有一堆不同的站点，您会将这些数据存储在对象还是数组中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T17:32:20.627

看起来像一个对象的工作。

```
class Site
{

 String name;
 String url;
 String color;
 String author;

 Site(String name,String url, String color, String author)
 {
   this.name=name;
   this.url=url;
   this.color=color;
   this.author=author;
 }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T17:40:38.693

正如@Vigrant 所写，站点几乎肯定应该是一个对象。

至于如何存储一堆站点，数组是可能的，但你应该考虑某种形式的集合，也许是一个地图，这样你就可以快速访问一个给定名称的站点。

例如

```
Map<String, Site> sitesByName = new HashMap<String, Site>(); 
```

（注意 - 这仅适用于所有站点都具有*唯一*名称的情况。使用 URL 作为键是更安全的选择）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T17:35:16.833

我猜对象数组会很好

# linux - 如何实施 ABA 解决方案？

> ID：10901680
> 
> 赞同：0
> 
> 时间：2012-06-05T17:08:01.107
> 
> 标签：linux, concurrency, intel, fifo, lock-free

我正在尝试从[这里](http://www.cs.rochester.edu/research/synchronization/pseudocode/queues.html)实现 Michael-Scott FIFO 队列。我无法为 ABA 问题实施他们的解决方案。我得到这个错误。

```
error: incompatible type for argument 1 of '__sync_val_compare_and_swap' 
```

作为参考，我正在使用 linux 机器在英特尔架构上编译它。如果您需要有关我的设置的更多信息，请询问。

似乎`sync_val_CAS`最多只能处理 32 位值。因此，当我删除他们用于消除 ABA 问题的计数器时，一切都编译并运行良好。

有人知道我应该在这里使用的相关 64 位 CAS 指令吗？

作为另一个问题，是否有更好（更快）的无锁 fifo 队列实现？我遇到[了](http://www.cs.tau.ac.il/~shanir/nir-pubs-web/Papers/FIFO_Queues.pdf)Nir ​​Shavit 等人，这似乎很有趣。我想知道其他人是否看到过类似的努力？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:10:59.767

GCC，我最后一次查看是在 2009 年，不支持连续双字 CAS。我必须实施内联汇编。

你可以在这里找到我对 M&S 队列的实现（包括在抽象层中 DCAS 的组装实现）和其他无锁数据结构；

[http://www.liblfds.org](http://www.liblfds.org)

简单地看一下 Nir ​​Shavit 等人的论文，队列需要安全内存回收，我怀疑你需要实现它 - 它不会内置到队列中。SMR API 将在下一个版本（几周）中可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T17:21:46.590

假设 gcc，尝试使用“march”开关。像这样：-march=i686

还有 __sync_bool_compare_and_swap。我不知道它是否更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-20T21:23:51.137

无锁可能不是您想要的，因为无锁不一定是无等待的。如果您需要一个快速的线程安全队列（不是无锁的！），请考虑使用[线程构建块 concurrent_queue](http://www.threadingbuildingblocks.org/docs/help/reference/containers_overview/concurrent_bounded_queue_cls.htmhttp://www.threadingbuildingblocks.org/docs/help/reference/containers_overview/concurrent_bounded_queue_cls.htm)。

# c# - .net 日历 requiredFieldValidator

> ID：10901682
> 
> 赞同：1
> 
> 时间：2012-06-05T17:08:03.557
> 
> 标签：c#, asp.net, calendar, requiredfieldvalidator

是否可以将 requiredFieldValidator 添加到日历中？例如，我有一个提交按钮，如果在没有选择日期的情况下单击它，应该会出现红色文本说请先选择日期。

我知道一种方法是简单地检查 c# 代码中的 selectedDate 但我可以创建一个 requiredFieldValidator 作为文本框吗？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T17:57:57.557

我认为否，但您可以添加 requiredFieldValidator 并将其与页面上的隐藏 TextBox（我的意思是 CSS display:none）相关联，并将 TextBox Text 属性绑定到日历的 SelectedDate

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T18:19:47.440

将文本框与[ajax 工具包日历扩展器](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Calendar/Calendar.aspx)一起使用，并为此文本框控件设置必填字段验证器。您可以从[此处](http://www.asp.net/ajaxlibrary/download.ashx)下载 ajax 工具包。并将该dll的引用添加到您的项目中..

希望这可以帮助..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-19T14:28:29.210

我知道现在回答为时已晚，但我是这样做的，

添加一个带有 css display:none 的文本框，并在 calender_DayRender 上从服务器端获取 selectedDate

```
 protected void calenderPrefDate_DayRender(object sender, DayRenderEventArgs e)
{
    txtCalenderDate.Text = calenderPrefDate.SelectedDate.ToString();
    if(calenderPrefDate.SelectedDate.ToString() == "01/01/0001 00:00:00")
    {
        txtCalenderDate.Text = string.Empty;
    }
} 
```

如果添加了条件，因为刷新页面时，文本框会选择“01/01/0001 00:00:00”，因为没有选择任何内容。和 controlToValidate 文本框。希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-22T17:03:36.413

请放置 requiredfieldvalidator 控件并将其附加到从 asp:calendar 接收日期的文本框中。希望这会有所帮助.. 示例代码（例如）txtDOB 是文本框

# zend-framework - Zend_Form 不显示错误信息

> ID：10901683
> 
> 赞同：1
> 
> 时间：2012-06-05T17:08:04.413
> 
> 标签：zend-framework, zend-form

我有以下 ZF 表单元素。

```
 $this->addElement('text', 'price', array(
        'required'  => true,
        'label'     => 'Price:',
        'attribs'   => array(
            'title'     => 'Please enter the value of your artwork'),
        'filters'   => array('Currency'),
        'validators'    => array(
            array('NotEmpty', true, array(
                'messages' => array(
                    Zend_Validate_NotEmpty::IS_EMPTY =>
                        "You must enter your artworks price"))),
            array('Float', true, array(
                'messages'  => array(
                    Zend_Validate_Float::INVALID => 
                        "You must enter a valid price",
                    Zend_Validate_Float::NOT_FLOAT =>
                        "You must enter a valid price"))),
            array('GreaterThan', true, array(
                'min'   => 0.99,
                'messages'  => array(
                    Zend_Validate_GreaterThan::NOT_GREATER =>
                        "You must enter a value of £1.00 or more"))))
    )); 
```

最后一个验证器是 Zend_Validate_GreaterThan ，它设置了一个错误消息，我的问题是当这个验证器失败时错误消息没有显示在表单上。我得到的只是一个空的无序列表！！

```
<ul>
    <li></li>
</ul> 
```

当我检查 zend_form 输出的消息时，我得到了错误和消息。

```
array(1) {
  ["price"]=>
  array(1) {
    ["notGreaterThan"]=>
    string(39) "You must enter a value of £1.00 or more"
  }
} 
```

有谁知道为什么没有在表单上呈现消息？

提前谢谢了

加里

编辑

我使用的唯一装饰器是在我拥有的表单上呈现表单的视图脚本。

```
$this->setDecorators(array(
    array('ViewScript', array('viewScript' => 'forms/add-item.phtml'))
)); 
```

和视图本身。

```
$attribFilterObj = new Freedom_Zend_Filter_HtmlAttribs();
$attribs = $attribFilterObj->filter($this->element->getAttribs());
?>
<form <?php echo $attribs; ?>>
<dl>
    <?php echo $this->element->ArtworkTitle->title->render(); ?>
    <?php echo $this->element->ArtworkDescription->description->render(); ?>
    <?php echo $this->element->price->render(); ?>
    <?php echo $this->element->Genres->render(); ?>
    <?php echo $this->element->image->render(); ?>
    <?php echo $this->element->add->render(); ?>
</dl>
</form> 
```

编辑

var_dump 的输出如下

```
array(5) {
  ["Zend_Form_Decorator_ViewHelper"]=>
  object(Zend_Form_Decorator_ViewHelper)#157 (6) {
    ["_buttonTypes":protected]=>
    array(3) {
      [0]=>
      string(24) "Zend_Form_Element_Button"
      [1]=>
      string(23) "Zend_Form_Element_Reset"
      [2]=>
      string(24) "Zend_Form_Element_Submit"
    }
    ["_helper":protected]=>
    NULL
    ["_placement":protected]=>
    string(6) "APPEND"
    ["_element":protected]=>
    NULL
    ["_options":protected]=>
    array(0) {
    }
    ["_separator":protected]=>
    string(2) "
"
  }
  ["Zend_Form_Decorator_Errors"]=>
  object(Zend_Form_Decorator_Errors)#158 (4) {
    ["_placement":protected]=>
    string(6) "APPEND"
    ["_element":protected]=>
    NULL
    ["_options":protected]=>
    array(0) {
    }
    ["_separator":protected]=>
    string(2) "
"
  }
  ["Zend_Form_Decorator_Description"]=>
  object(Zend_Form_Decorator_Description)#159 (6) {
    ["_escape":protected]=>
    NULL
    ["_placement":protected]=>
    string(6) "APPEND"
    ["_tag":protected]=>
    NULL
    ["_element":protected]=>
    NULL
    ["_options":protected]=>
    array(2) {
      ["tag"]=>
      string(1) "p"
      ["class"]=>
      string(11) "description"
    }
    ["_separator":protected]=>
    string(2) "
"
  }
  ["Zend_Form_Decorator_HtmlTag"]=>
  object(Zend_Form_Decorator_HtmlTag)#160 (7) {
    ["_encoding":protected]=>
    NULL
    ["_placement":protected]=>
    NULL
    ["_tag":protected]=>
    NULL
    ["_tagFilter":protected]=>
    NULL
    ["_element":protected]=>
    NULL
    ["_options":protected]=>
    array(2) {
      ["tag"]=>
      string(2) "dd"
      ["id"]=>
      array(1) {
        ["callback"]=>
        array(2) {
          [0]=>
          string(22) "Zend_Form_Element_Text"
          [1]=>
          string(16) "resolveElementId"
        }
      }
    }
    ["_separator":protected]=>
    string(2) "
"
  }
  ["Zend_Form_Decorator_Label"]=>
  object(Zend_Form_Decorator_Label)#161 (6) {
    ["_placement":protected]=>
    string(7) "PREPEND"
    ["_tag":protected]=>
    NULL
    ["_tagClass":protected]=>
    NULL
    ["_element":protected]=>
    NULL
    ["_options":protected]=>
    array(1) {
      ["tag"]=>
      string(2) "dt"
    }
    ["_separator":protected]=>
    string(2) "
"
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T13:49:53.807

有点旧，但检查这个网站[http://zendguru.wordpress.com/2008/12/04/handling-zend-framework-form-error-messages/](http://zendguru.wordpress.com/2008/12/04/handling-zend-framework-form-error-messages/)

我相信你必须自己得到错误信息，然后打印出来

```
$errorsMessages = $this->form->getMessages(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T13:10:20.923

这有时是由于忘记在元素的表单装饰器中包含“错误”引起的。如果您使用的是自定义装饰器，请先检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-01T02:31:34.550

我有同样的问题，我只是像你一样使用 ViewScript。这解决了它：

```
($this is in the form class I created)
$this->setDecorators(array(
        array('ViewScript', 
              array('viewScript' => '/formElementViewscripts/editRoughDraft/_form.phtml')),
        'Form'
    )); 
```

如果您希望能够接收这些消息，您还必须将默认的“表单”装饰器添加到表单中。我尝试查看代码，但我无法确定确切原因。

# c# - 以正确的方式分离数据

> ID：10901685
> 
> 赞同：0
> 
> 时间：2012-06-05T17:08:05.187
> 
> 标签：c#, sql-server

让我们想象以下场景：

我有一个表“类型”和一个表“事物”。每个“事物”都有一个通过“Things.TypeId”列定义的类型，该列在“Types.Id”列上有一个外键。

现在我想通过我的 C#-Code 访问这些类型，它将类型加载到一个列表中，以便我可以在我的应用程序中使用它。

现在让我们考虑一种方法，它尝试将所有类型为“one”的“事物”加载到我的应用程序中。

`SELECT * FROM Things WHERE TypeId = {0}"`

我现在在哪里可以获得类型“one”的 TypeId？通常，枚举适用于此，但我们不能使用枚举，因为类型存储在我的数据库中并在运行时检索。

我该如何处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T17:11:10.983

你可以通过加入来做到这一点

```
select things.* 
from things 
join type on thing.typeID = type.typeID 
where type.name = 'one' 
```

或者当程序启动时，您可以将类型加载到字典中，其中 typeID 为键并命名值。您还可以将该 DictionaryList 绑定到显示值但使用键的组合框。

# javascript - 离开页面并返回时不保留 JS 页面格式

> ID：10901687
> 
> 赞同：0
> 
> 时间：2012-06-05T17:08:18.363
> 
> 标签：javascript, jquery, .net, html, css

当我离开时，页面格式有点问题，然后将浏览器返回到页面。

这是一个例子：

我在下拉列表中的表单上有安全问题，如下所示：

[http://i.stack.imgur.com/ib32z.jpg](http://i.stack.imgur.com/ib32z.jpg)

当用户从下拉列表中选择 [Type in your own question] 时，我有一些 jquery 动画一个 CSS 更改，将表单向下推，并使“自定义安全问题”的隐藏字段可见。选中后，表单如下所示：http: [//i.stack.imgur.com/uVPKo.jpg](http://i.stack.imgur.com/uVPKo.jpg)

现在我的困境是当我离开这个页面，然后使用浏览器的后退按钮导航回来时，我的格式被搞砸了，看起来像这样：

[http://i.stack.imgur.com/5Xhpi.jpg](http://i.stack.imgur.com/5Xhpi.jpg)

我编写的 javascript 不会在后退按钮上再次触发，因此浏览器不知道将表单向下移动以适应间距的变化。无论如何我可以强制 document.ready 重新加载或清除某种缓存吗？

谢谢！

编辑：对不起，我需要将图像重新上传到主机并重新发布。抱歉耽搁了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T17:27:44.170

在 Web 上持久化状态基本上有四种机制：

1.  基于浏览器 - 如果幸运的话，浏览器会将答案保存到表单字段并在看到具有相同名称的 INPUT 时重新显示它们；此外，一些浏览器会在前进<=>后退导航之间保留一些状态
2.  基于 Cookie - 不言自明；您保存带有状态信息的 cookie，稍后检查以恢复状态
3.  基于 URL - 导航到您的 URL 的不同哈希，其中包含您想要的信息（例如“？roll_down = true”）
4.  HTML5/本地存储 - 如果您有兴趣，请查看 :-)

我们基本上可以扔掉 1 和 4，因为它们都过于依赖浏览器的行为/支持，我们不能可靠地依赖所有浏览器来按照我们想要的方式处理它们。剩下#2 或#3。

Cookies 允许您保存更多信息（与 cookie 所保存的一样多，即大约 4k）。URL 允许的信息较少，但它们具有书签功能的额外好处；如果用户将 URL 保存为书签（或作为他们发送给朋友的链接等），则该状态仍会保留。

因此，选择上述选项，决定如何保持“我的表单已向下滚动”状态......然后是（我认为）您真正感兴趣的部分：您如何检查此状态和当用户单击“返回”时修复问题？

那部分我谦虚地推迟到另一个 SO 帖子，它已经回答了它： [有没有办法在 javascript 中捕获后退按钮事件？](https://stackoverflow.com/questions/136937/is-there-a-way-to-catch-the-back-button-event-in-javascript)

# android - 访问android os根文件

> ID：10901688
> 
> 赞同：0
> 
> 时间：2012-06-05T17:08:22.993
> 
> 标签：android, c, operating-system, controls

我有以下疑问：

我读过 android os 是基于 linux 的，我想它可能具有与 ubuntu 相同的结构（在文件配置方面：/root、/dev 等）。那么，是否可以在 android 中运行用 C 编写的应用程序？就像在 ubuntu 中可以做的那样？如果是这样，我该怎么做？

另外，如何通过 android 应用程序（用 java 编写）访问根文件？以及如何访问操作系统的行为（例如中断）？

提前感谢您的回答。

格斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T17:17:27.120

基本答案：不支持在 Android 上运行 C 应用程序，除非通过本机开发工具包 (NDK)。

除非通过手机root，否则您无法访问root文件。

您可以通过 API 访问某些操作系统行为。基本上，如果它不是 API 的一部分，您就无法访问它。

Android 操作系统*基于*Linux，但它是一个操作系统，而不是像 X 那样的窗口服务器或像 Gnome 或 KDE 这样的桌面环境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T17:14:20.417

您可以`C and C++`使用 NDK 在 android 上运行代码。您也可以使用`QT`框架。但是代码在名为 Davlik 的虚拟机中运行。Android 有 r​​oot 帐号，但默认用户不可用。因此，对目录的访问依赖于`chmod`.

如果您想阅读有关在 android 中访问低级别的信息： [http ://www.phrack.org/issues.html?issue=68&id=6](http://www.phrack.org/issues.html?issue=68&id=6)

关于架构这个系统： [https ://developer.android.com/guide/basics/what-is-android.html](https://developer.android.com/guide/basics/what-is-android.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T17:35:55.143

您可以使用[`Runtime.exec`](http://developer.android.com/reference/java/lang/Runtime.html#exec%28java.lang.String%29). 例如，您可以看到[终端 IDE](https://play.google.com/store/apps/details?id=com.spartacusrex.spartacuside&hl=en)，它运行许多不同的程序，包括 ssh、vim 和 bash。它也是开源的，因此您可以从[代码](http://code.google.com/p/terminal-ide/)中学习。您可能必须将可执行文件作为资源或资产包含在内，然后复制到本地目录，授予执行权限，然后使用`Runtime.exec`. 由于您的应用程序在受限帐户下运行，因此您仍然拥有有限的用户权限，除非设备已获得 root 权限并且您请求 root 访问权限。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-06T11:30:34.250

android 智能手机/平板电脑与 Arm cpu 一起工作，而不是 x85。架构不同。但是如果你为arm linux交叉编译它，你可以在android中运行一个C应用程序。或者您可以在 android 设备中使用 ac 编译器。人们将c编译器移植到android。你可以试试 C4DROID 和安卓市场。但是由于 sd 卡的 android 权限，您只能在系统内存中运行编译的程序。

# asp.net - 如何在asp.net webform中发布序列化数据

> ID：10901689
> 
> 赞同：0
> 
> 时间：2012-06-05T17:08:24.083
> 
> 标签：asp.net

```
public class Product
{
    public int ProductId { get; set; }
    public string ProductName { get; set; }
    public decimal UnitPrice { get; set; }
} 
```

我想获取一个`List<Product>`并将其作为序列化数据发布到另一个页面（实际上只是 .ashx 页面），这可能在 asp.net 网络表单中吗？

**更新**我知道我可以使用 session 将通用列表传递给我的处理程序，但作为序列化数据发布会更好吗？请问利弊？对于重载来说，一种比另一种更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T17:53:06.030

一种方法是使用 System.Web.Script.Serialization.JavaScriptSerializer 序列化到和从 json 格式。

[http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)

# php - 是否可以将自定义字段添加到 PHP ini 文件？

> ID：10901694
> 
> 赞同：7
> 
> 时间：2012-06-05T17:08:41.437
> 
> 标签：php

我想知道是否可以将自定义*字段*添加到 PHP ini 文件并使用该`ini_get`函数获取它。

此代码工作正常：

```
;PHP ini file
mysqli.default_host=localhost

# PHP code
ini_get('mysqli.default_host') 
```

**但我想做这样的事情（不工作）：**

```
;PHP ini file
my_custom_field=custom_value

# PHP code
ini_get('my_custom_field') 
```

有可能做到这一点吗？因为当我对自定义字段执行此操作时，它会返回`false`.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-05T17:11:45.963

`php.ini`用于 PHP 配置，除非您正在制作扩展（用 C 编写），否则您可能不应该为其添加新选项。如果您正在为特定站点/应用程序进行配置，请`config.ini`在该项目的根目录中创建您自己的文件。然后，您可以使用[parse_ini_file](http://ca2.php.net/manual/en/function.parse-ini-file.php)从中获取值。

如果你真的必须添加自定义条目，`php.ini`你可以使用[get_cfg_var](http://www.php.net/manual/en/function.get-cfg-var.php)而不是[ini_get](http://www.php.net/manual/en/function.ini-get.php)来获取它们。

# python - 对于 UI 框架中长时间运行的数据生产者，是否应该在事件循环中完成？

> ID：10901706
> 
> 赞同：0
> 
> 时间：2012-06-05T17:09:14.997
> 
> 标签：python, multithreading, user-interface, clutter

考虑混乱和启蒙。它们都提供闲置者并将事件回调添加到事件循环中。两者似乎都不提倡使用线程，而是建议使用事件驱动编程。

但是，如果您有一个数据生产者在返回之前会花费几秒钟的处理时间怎么办？

在闲置或事件循环中添加这种处理肯定会阻止 UI 响应吗？

你应该如何用 UI 框架做这些事情？

仅供参考 - 我们在 Python 中使用这两个框架。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T12:54:34.327

如果您的生产者代码不能分成小块，那么您绝对应该使用线程。考虑到 GL 的线程模型（状态机的上下文存储在线程本地存储中），Clutter 与 GTK+ 一样，甚至比 GTK+ 更重要，除了调用 clutter_init() 和 clutter_main() 的线程之外，不能由不同的线程使用；另一方面，使用 GMainLoop 工具将 UI 更新从线程调度到主循环中是完全可以接受的。

Clutter 在 Git 存储库中有一个关于如何实现此模式的示例：

[http://git.gnome.org/browse/clutter/tree/examples/threads.c](http://git.gnome.org/browse/clutter/tree/examples/threads.c)

简而言之，在线程内执行阻塞操作时，您应该使用 gobject.idle_add() 来安排 UI 更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T18:21:54.477

实际上有一个更好的方法可以通过使用`gobject.idle_add`和生成器函数在没有线程的情况下实现这一点：

```
def my_task(data):
    # ...some work...
    while heavy_work_needed:
        ...do heavy work here...
        progress_label.set_text(data) # here we update parts of UI
        # there's more work, return True
        yield True
    # no more work, return False
    yield False

def on_start_my_task_button_click(data):
    task = my_task(data)
    gobject.idle_add(task.next) 
```

有关详细信息，请参阅此[常见问题解答条目](http://faq.pygtk.org/index.py?req=show&file=faq23.020.htp)

# database - 具有层次域的图形数据库？

> ID：10901707
> 
> 赞同：3
> 
> 时间：2012-06-05T17:09:16.597
> 
> 标签：database, graph, hierarchical-data

我可以拥有一个图形数据库并将其加载到分层域模型中吗？为什么？我想要图形数据库的好处和分层域的结构，其中节点可以是后代和祖先。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T15:41:57.917

[本文](http://blog.neo4j.org/2010/03/modeling-categories-in-graph-database.html)专门与[Neo4j](http://neo4j.org)相关，但可能有用。如果我对您的理解正确，这描述了您正在寻找的内容。

# android - 如何通过另一个 if 语句中的包传递在 if 语句中创建的字符串值？

> ID：10901709
> 
> 赞同：0
> 
> 时间：2012-06-05T17:09:23.030
> 
> 标签：android, string, if-statement, bundle

```
public class MainActivity extends Activity implements OnClickListener, AdapterView.OnItemSelectedListener, OnCheckedChangeListener{

@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.main);

    //Declare Variables to be used
    final Bundle bundle = new Bundle();
    final CheckBox checkbox01 = (CheckBox) findViewById(R.id.CheckBox01);

    //All if statements for builds
    final Button findbuilds = (Button) findViewById(R.id.btn_FindBuildsTab1);{
        findbuilds.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                 if ((v==findbuilds)&&(checkbox01.getText()==("Ahri-AP"))&&((checkbox01).isChecked())){
                     final String charactername = "Ahri-AP";
                 }
                 if ((checkbox01).isChecked(){
                   //All Bundles are placed here
                     bundle.putString("CharacterName Value Key", charactername);

                   //Start Tabhost Activity and pass bundle(s)
                     Intent nextActivity = new Intent(v.getContext(),
                     nextActivity.putExtras(bundle);
                     startActivity(nextActivity); TabHostActivity.class);
                 } 
```

基本上，我要做的是在第一个 if 语句中为角色名称创建字符串，然后将其捆绑在另一个 if 语句中。我需要将字符串捆绑在不同的 if 语句中的原因是为了避免达到方法的字节限制。我总共需要为每个 if 语句捆绑 64 个不同的字符串，并且我总共需要发生 126 个 if 语句。问题当然是在第二个 if 语句中的捆绑包中永远找不到或解决 String 变量。有没有办法做到这一点？或者也许是更有效的方法？在此先感谢您的帮助！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T17:26:20.113

只需将变量的定义拉到 if 语句之外。例如：

```
final String charactername 
if() {
    charactername = ...
}
if() {
    bundle stuff with charactername 
} 
```

# javascript - 循环对象数组

> ID：10901713
> 
> 赞同：0
> 
> 时间：2012-06-05T17:09:34.433
> 
> 标签：javascript, asp.net, json, jquery-ui

我正在开发一个使用大量 jQuery UI 控件的 asp.net 应用程序，尤其是 datepicker。

在我的 Web 服务中，我正在调用数据库并检索对象列表，然后将它们传递回我的 javascript，在那里我将它们解析成一个包含 1 个或多个如下所示对象的数组：

[![javascript 对象](../Images/b80128ed1424d4580d2ba8a31e760803.png)](https://i.stack.imgur.com/qegeW.jpg)

我需要包含某种逻辑，我可以在其中循环遍历这个对象数组并检查 javascript Date 是否位于对象的 EndDate 和 StartDate 属性之间，以便我可以为 DatePicker 应用 css 样式。第一个问题，有没有办法将 EndDate/StartDate 属性从这种格式转换为有效的 javascript 日期？如果是这样，我如何遍历数组并应用逻辑来查看日期是否在范围内？

任何帮助是极大的赞赏！

编辑：我注意到这里的图像很难看到你可以更清楚地阅读这里的属性：

[图片链接](https://postimg.cc/fVY8Zfhx)

根据要求，这里是一些示例代码：

```
function createDateRangesForCalendar() {
    $.ajax({
        type: "POST",
        url: "../Services/BookingService.asmx/GetCalendarDateRanges",
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        async: false,
        success: function (response) {
            dateRanges = $.parseJSON(response.d);
        },
        error: function (xhr, textStatus, thrownError) {
            alert(textStatus);
            alert(thrownError);
        }
    });
}

function markInvalidDates(date) {

    var isHoliday = false;
    dmy = date.getDate() + "-" + (date.getMonth() + 1) + "-" + date.getFullYear();

    isHoliday = checkIsHoliday(date);

    if ($.inArray(dmy, invalidDays) == -1) {

        for (var i = 0; i < dateRanges.length; i++) {
            // if date falls in between start and end date of object[i] return something like: return [true, "holiday", "Holiday Rates Apply - Minimum 14 days"];
            // else loop through to the next object and try there
            } 

        if (isHoliday == true) {
            return [true, "holiday", "Holiday Rates Apply - Minimum 14 days"];
        } else {
            return [true, ""];
        }
    } else {
        return [false, "unavailable", "Unavailable"];
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T17:15:42.900

StartDate 和 EndDate 对我来说似乎是有效的 JSON，除了结尾和开头的斜线。否则，对值的简单 eval 应该会生成一个可以操作的 JS 日期对象。

对于您的第二点，是什么让您无法对数组进行经典循环？多说一些代码会更有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T17:22:58.343

**第一个问题，有没有办法将 EndDate/StartDate 属性从这种格式转换为有效的 javascript 日期？**

格式似乎是这样的：`/Date(MILLISECONDS)/`. 可以像这样获得一个有效的 JS 日期对象`new Date(s.match(/Date\((\d+)/)[1])`：

**如果是这样，我如何遍历数组并应用逻辑来查看日期是否在范围内？**

```
var re = /Date\((\d+)/;
for(var i in arr) {
    var start = new Date(arr[i].startDate.match(re)[1]),
        end = new Date(arr[i].endDate.match(re)[1]);
    if(myDate < end && myDate > start)
        // do something.
} 
```

以上似乎回答了你的问题，我理解它的方式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T17:23:36.123

只需将您的开始日期和结束日期作为数字返回，而不使用 \Date()\ 包装器。

在您的循环中，从您的目标日期创建一个 JavaScript 日期，即，`new Date(1334548800000)`然后在您的目标日期与那些开始和结束日期之间进行简单的比较。

虽然您可以循环使用，`$.each(yourArray, function(id,item){ date comparison logic here });`但我建议您查看 Underscore 库以获得一组体面的实用程序来操作 JS 对象。

# android-ndk - 如何加载一个或另一个.so？

> ID：10901722
> 
> 赞同：-1
> 
> 时间：2012-06-05T17:10:18.537
> 
> 标签：android-ndk, java-native-interface

我的应用程序使用了一个共享库，比如说，`mylib.so`

这`mylib.iso`想从任何一个`lib1.so`或`lib2.so`根据某些条件使用 API。

两者都`lib1.so`提供`lib2.so`完全相同的 API 集。

我只能`mylib.iso`在加载后计算条件。它不依赖于来自`lib1.so`或`lib2.so`但我不能从 java 做的 API：

```
static {
   if(nativeHasCondition()) System.loadLibrary("lib1");
   else System.loadLibrary("lib2");
}
System.loadLibrary("mylib"); 
```

}

因为`nativeHasCondition()`在`mylib.so`.

所以，我想我会根据我的本地代码中的一些计算以某种方式加载`lib1.so`或`lib2.iso`从我的本地代码加载。

我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T06:06:11.603

如果 nativeHasCondition() 是 mylib.so 的方法，那么你必须先加载 mylib.so。然后你可以按照条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T23:00:12.850

也许您应该将该代码放入一个单独的库中并首先加载它。如果您需要测试 cpu 上限，可能您应该从 java 中执行此操作，然后加载适当的库（只要您设法加载 mylib.so，它应该在其导入部分引用 lib1.so 或 lib2.so）。

# javascript - jQuery UI 日期选择器显示不正确（透视）

> ID：10901723
> 
> 赞同：2
> 
> 时间：2012-06-05T17:10:19.330
> 
> 标签：javascript, jquery, css, jquery-ui, internet-explorer

我在使用 jQuery 日期选择器控件时遇到了一些困难。在我的应用程序中，我使用最基本的方法来调用日历：

```
$('#elmt').datepicker(); 
```

目标元素是弹出 div 上的输入文本框。每当我单击文本框时，日历都会显示为透明：[http ://s17.postimage.org/4knyxgvjz/see_thru_calendar.png](http://s17.postimage.org/4knyxgvjz/see_thru_calendar.png)

我已经在 Stackoverflow 上尝试了一些建议来调整 ui-datepicker 类的 z-index：

```
.ui-datepicker { width: 17em; padding: .2em .2em 0; display: none; z-index: 9999 !important; } 
```

但这也没有什么不同。我的测试环境正在运行 Internet Explorer 7（日历在 jQuery-UI 提供的示例 index.html 上呈现正常）。

有没有人在 jQuery UI 日期选择器中看到过这样的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T17:15:13.033

您没有为[jQuery UI datepicker](http://jqueryui.com/demos/datepicker/)加载相关的 CSS ，这导致日历成为“透明”。

**要对其进行测试**，请编辑 jQuery UI 的 CSS 文件并更改它`class` `background`：

```
.ui-widget-content {
    background: #000;
} 
```

*   如果日期选择器的背景为黑色，则表示样式表正在加载，但图像的路径可能是错误的。

*   如果没有黑色背景，则没有加载样式表。

* * *

**另一种**确认问题是否出在样式表上的方法是直接从[jQuery CDN](http://code.jquery.com/)中包含 CSS ：

```
http://code.jquery.com/ui/1.8.20/themes/redmond/jquery-ui.css 
```

# performance - 谷歌浏览器的开发者工具时间线内存视图中的 DOM 节点计数是多少？

> ID：10901730
> 
> 赞同：43
> 
> 时间：2012-06-05T17:11:00.783
> 
> 标签：performance, google-chrome

我得到一个“啊，啪！” 加载某个网页时 chrome 崩溃。我正在尽我所能找出导致它的原因并且非常困难。

在 Chrome 开发人员的工具中，有一个内存选项卡，当查看计数器图时，我注意到 DOM 节点计数线上升、下降，然后继续上升。

![Dom 节点数增加](../Images/2545765dfde2793682f149f729f237d4.png)

我理解这意味着我页面上的 DOM 元素数量正在增加，但在完成之后

```
document.getElementsByTagName("*").length 
```

在控制台中，我注意到值没有改变。

那么 DOM 节点计数图实际显示的是什么？如果它继续像这样增加，那可能是“啊，啪！”的原因。碰撞？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-18T13:25:58.550

DOM 节点计数图显示了仍保存在内存中的已创建 DOM 节点的数量，即尚未被垃圾回收的 DOM 节点。这不必与您通过的元素相吻合`getElementsByTagName`。后者也只会让您获得实际附加到文档树的元素。它不会获得您仍然有参考的任何“离线”项目。

Facebook API 中的 Like 小部件是卡住这种特殊金字塔增长的一种简单方法，它包含一些关于失控计时器的代码，该计时器会创建大量额外的 DOM 节点。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-02-03T11:32:49.033

*仍然保留在内存*中的 DOM 节点称为分离节点。这意味着它们不会显示在页面的 DOM 树中，但某些 JavaScript 代码仍会在某处引用它们。通读这篇谷歌开发工具帖子，它用简单的代码解释了分离的 DOM 节点是什么以及如何使用 Chrome DevTools 检测它：[https ://developers.google.com/web/tools/chrome-devtools/memory-problems/](https://developers.google.com/web/tools/chrome-devtools/memory-problems/)

# exchangewebservices - ExchangeWebServices 身份验证

> ID：10901734
> 
> 赞同：1
> 
> 时间：2012-06-05T17:11:29.707
> 
> 标签：exchangewebservices

我们正在寻求创建一个与多个交易所账户进行通信的后端流程；主要是创建/更新约会。

显然，在与 Exchange API 通信时，我们需要在服务器端进行身份验证。我们正在考虑创建一个“主”登录名，该登录名可以访问/有权访问所有交易所帐户。

出于安全原因，我们的 IT 部门不想为此用途提供“主”登录。显然，他们不希望我们能够访问其他人的电子邮件。可以理解。

我们想到的另一个选择是使用每个帐户的单独登录凭据进行身份验证。不幸的是，由于我们的网络设计，要为每个用户检索这些信息并不容易。

还有其他选择吗？一个完美的场景是 Exchange 中的某种帐户/用户类型不能阅读电子邮件但可以执行操作。

非常感谢任何想法，先前的经验等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T05:20:18.360

这是正确的。由于安全问题，不接受使用主登录。我也在一个类似的项目中工作过。

解决方案是

> 冒充交换网络服务

在互联网上搜索此主题。如果需要一些代码帮助，请询问。我可以给一些样品。

使用模拟，我们可以添加约会，获取约会并将它们更新为我们服务器中其他帐户中的许多其他内容。

但要使用它，您必须使用管理员服务器帐户登录交换服务器。

# linux - 在文件中每出现第 n 个字符时插入内容

> ID：10901745
> 
> 赞同：2
> 
> 时间：2012-06-05T17:12:04.837
> 
> 标签：linux, bash, shell, sed, awk

我有一个包含查询的文件，每个查询都以“;”结尾，我想添加一个“COMMIT;BEGIN;” 每 100 个查询。查询可以多于 1 行。

例如：

```
 INSERT INTO table
    VALUES(...);
    DELETE FROM table WHERE ...;
    UPDATE table
    SET ...; 
```

所以我想每 100 个“;”更换一次 用“提交；开始；” （我知道我必须添加一个 BEGIN; 在文件的开头并在最后做一些事情，但这很容易）

我需要在 shell 脚本中执行此操作，但我不是 Linux 专家，使用 sed 还是 awk 更好（文件大小也可以像 4GB 一样大）？我知道这些命令的基础知识，但我不知道我是否可以在这里做我想做的事......

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T17:17:40.737

如果您可以保证 the`;`位于行尾，或者您并不真正关心带有多个`;`'s 的行，那么简单的解决方案（未经测试）是：

```
awk '/;/{ count+=1 } {print} count==100 { print "COMMIT; BEGIN"; count=0 }' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T17:30:36.313

我建议不要尝试替换分号。取而代之的是，“解析”所有命令，`BEGIN`并`COMMIT`围绕您要提交的一堆命令。使用 sed 这很容易。如果你有这个文件：

```
$ cat my.sql 
INSERT INTO table VALUES (1);
INSERT INTO table VALUES (2);
INSERT INTO table VALUES (3);
INSERT INTO table VALUES (4);
INSERT INTO table VALUES (5);
INSERT INTO table VALUES (6);
INSERT INTO table VALUES (7);
INSERT INTO table VALUES (8);
INSERT INTO table VALUES (9);
INSERT INTO table VALUES (10); 
```

只需运行以下命令：

```
$ sed -n 'H;${x;s/\([^;]*;\)\{,3\}/BEGIN;&\nCOMMIT;\n\n/g;p}' my.sql 
BEGIN;
INSERT INTO table VALUES (1);
INSERT INTO table VALUES (2);
INSERT INTO table VALUES (3);
COMMIT;

BEGIN;
INSERT INTO table VALUES (4);
INSERT INTO table VALUES (5);
INSERT INTO table VALUES (6);
COMMIT;

BEGIN;
INSERT INTO table VALUES (7);
INSERT INTO table VALUES (8);
INSERT INTO table VALUES (9);
COMMIT;

BEGIN;
INSERT INTO table VALUES (10);
COMMIT; 
```

（为了清楚起见，这里我使用 3 作为块的大小。对于“包含”100 个命令的块，替换`\{,3\}`为 `\{,100\}`）

它有什么作用？

*   首先，我们禁止打印带有 的行`-n`。现在 sed 只会在我们命令它显式打印它们时打印它们。

*   现在，对于每一行，我们将该行附加到具有`H`.

*   在最后一行（地址`$`），我们执行一个命令块（从 开始到`{`结束`}`）。第一个命令，`x`交换保持空间（现在包含所有文件）和模式空间的内容。

*   在此之后，我们用`s///`n (0 < n <= 3) 系列字符（没有一个`;`）`;`替换字符串`BEGIN;`，匹配的命令块（由 表示`&`）和字符串`\nCOMMIT;\n\n`（为了更好的可读性而使用换行符。

*   最后，我们用 打印模式空间的内容`p`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T17:27:45.020

如果分号位于行尾：

```
awk '{print} /;$/ && ! (count++%100) {print "COMMIT; BEGIN;"}' inputfile 
```

如果精确计算 100 个分号很重要，并且它们可能位于一行中的任何位置，那么它可以完成，但它会变得有点复杂。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T20:59:24.613

这可能对你有用（GNU sed）；

```
sed ':a;$!{N;ba};s/^\([^;]*\(;[^\n][^;]*\)*;\s*$\)\{100\}/&\nCOMMIT;BEGIN;/mg' file 
```

# java - 封装可执行文件

> ID：10901746
> 
> 赞同：0
> 
> 时间：2012-06-05T17:12:07.947
> 
> 标签：java, executable, encapsulation

我有一个二进制可执行文件，我确实有 C++ 中的源代码。我需要在我的 Java 代码中以某些方式使用它。我打算将它包装为 Java 中的一个类，所以我的代码将调用我的类而不是直接调用可执行文件。这类似于 .net 包装旧 com 组件的方式。由于我是java新手，我想知道是否有更好的方法来解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T19:54:25.493

这取决于您要使用它的“某些方式”。

如果你想直接调用方法，你（可能）需要学习 JNI。有一些奇怪的 COM <-> Java 的东西，或者至少曾经有过。

如果您想或多或少地将数据“管道”进出可执行文件，类似于 UNIX 命令，您需要查看 Runtime.exec() 或更新（更好）的 ProcessBuilder。直接使用 Runtime.exec() 具有挑战性，因此，如果这是您想要的，请搜索一些有助于支持它的库，或者例如代码。

（编辑添加以响应 OP 的评论）作为 shell 命令运行，您需要查看 RUNtime.exec() 或 ProcessBuilder。以下是一些链接：

[堆栈溢出讨论1](https://stackoverflow.com/questions/8995055/libraries-to-run-unix-commands-from-java)

[堆栈溢出讨论2](https://stackoverflow.com/questions/3643939/java-process-with-input-output-stream)

[JAvaWorld 讨论这里的一些陷阱](http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html)

# jstree - 我在哪里可以下载最新版本的 jQuery 插件 jstree（不是 GitHub）？

> ID：10901751
> 
> 赞同：2
> 
> 时间：2012-06-05T17:12:19.700
> 
> 标签：jstree

如标题所述，我对 GitHub 不熟悉，要找到适合 Windows 的正确源代码真的很复杂。关于我在哪里可以找到它的任何想法？看来来自 jstree.com/demo 的版本在我们的最后期限内无法使用。

非常感谢您的任何指点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T14:40:39.063

GitHub 是作者放置最新稳定版本的地方。

这是他的项目，所以他的电话：http: [//github.com/downloads/vakata/jstree/jstree_pre1.0_fix_1.zip](http://github.com/downloads/vakata/jstree/jstree_pre1.0_fix_1.zip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T13:44:48.300

jstree的配置控制很差，不得不忽略。我建议使用 Ivan 网站 www.jstree.com 上标有“pre 1.0 fix 2”的版本。这链接到：

```
 https://codeload.github.com/vakata/jstree/zip/v.pre1.0 
```

解压后展开到目录 jstree-v.pre1.0 所有文件的日期为“Feb 27 2013”

上面提到的版本来自github

```
 http://cloud.github.com/downloads/vakata/jstree/jstree_pre1.0_fix_1.zip 
```

展开到当前文件夹，大部分文件大约是“2011 年 6 月 25 日”

两个版本的 jquery.jstree.js 都包含 SVN 状态信息：

```
/*
* jsTree 1.0-rc3
* http://jstree.com/
*
* Copyright (c) 2010 Ivan Bozhanov (vakata.com)
*
* Licensed same as jquery - under the terms of either the MIT License or the GPL Version 2 License
*   http://www.opensource.org/licenses/mit-license.php
*   http://www.gnu.org/licenses/gpl.html
*
* $Date: 2011-02-09 01:17:14 +0200 (ÑÑ, 09 ÑÐµÐ²Ñ 2011) $
     * $Revision: 236 $
*/ 
```

然而，除了比较报告 jquery.jstree.js 的 36 个不同部分。

# java - HashMap中负载因子的意义是什么？

> ID：10901752
> 
> 赞同：263
> 
> 时间：2012-06-05T17:12:20.773
> 
> 标签：java, hashmap, load-factor

`HashMap`有两个重要的性质：`size`和`load factor`。我浏览了 Java 文档，它说`0.75f`是初始负载因子。但我找不到它的实际用途。

有人可以描述我们需要设置负载因子的不同场景以及不同情况下的一些示例理想值吗？

* * *

## 回答 #1

> 赞同：305
> 
> 时间：2012-06-05T17:17:13.727

该[文档](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)很好地解释了它：

> HashMap 的实例有两个影响其性能的参数：初始容量和负载因子。容量是哈希表中的桶数，初始容量只是哈希表创建时的容量。负载因子是哈希表在其容量自动增加之前允许达到的程度的度量。当哈希表中的条目数超过负载因子和当前容量的乘积时，对哈希表进行重新哈希（即重建内部数据结构），使哈希表具有大约两倍的桶数。
> 
> 作为一般规则，默认负载因子 (.75) 在时间和空间成本之间提供了良好的折衷。较高的值会减少空间开销，但会增加查找成本（反映在 HashMap 类的大多数操作中，包括 get 和 put）。在设置其初始容量时，应考虑映射中的预期条目数及其负载因子，以尽量减少重新哈希操作的次数。如果初始容量大于最大条目数除以负载因子，则不会发生重新哈希操作。

与所有性能优化一样，最好避免过早地优化事物（即没有关于瓶颈所在位置的硬数据）。

* * *

## 回答 #2

> 赞同：163
> 
> 时间：2013-10-17T12:33:44.950

默认初始容量`HashMap`为 16，加载因子为 0.75f（即当前地图大小的 75%）。负载因子表示`HashMap`容量应该在什么水平上翻倍。

**例如**容量和负载系数的乘积为`16 * 0.75 = 12`。这表示将第 12 个键值对存储到 中后`HashMap`，其容量变为 32。

* * *

## 回答 #3

> 赞同：51
> 
> 时间：2015-07-14T08:42:10.537

实际上，根据我的计算，“完美”负载因子更接近 log 2 (~ 0.7)。尽管任何小于此的负载因子都会产生更好的性能。我认为 0.75 可能是从帽子里拔出来的。

证明：

通过预测桶是否为空，可以避免链接并利用分支预测。如果桶为空的概率超过 0.5，则它可能是空的。

让 s 代表大小， n 代表添加的键的数量。使用二项式定理，桶为空的概率为：

```
P(0) = C(n, 0) * (1/s)^0 * (1 - 1/s)^(n - 0) 
```

因此，如果桶少于

```
log(2)/log(s/(s - 1)) keys 
```

当 s 达到无穷大并且如果添加的键的数量是这样的 P(0) = .5，则 n/s 迅速接近 log(2)：

```
lim (log(2)/log(s/(s - 1)))/s as s -> infinity = log(2) ~ 0.693... 
```

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2016-08-21T02:56:45.893

## **什么是负载系数？**

HashMap 增加容量需要消耗多少容量？

## **为什么负载系数？**

默认情况下，负载因子是初始容量的 0.75 (16)，因此 25% 的存储桶在容量增加之前将是空闲的，这使得许多具有指向它们的新哈希码的新存储桶在容量增加后立即存在桶数。

## **现在为什么要保留许多免费存储桶以及保留免费存储桶对性能的影响是什么？**

如果您将加载因子设置为 1.0，那么可能会发生一些非常有趣的事情。

假设您正在将对象 x 添加到您的 hashmap 中，其 hashCode 为 888 并且在您的 hashmap 中，表示哈希码的存储桶是 free ，因此**对象 x**被添加到存储桶中，但现在再次说明您是否要添加另一个对象 y，其 hashCode 是还有 888 那么你的对象 y 肯定会被添加到存储桶的末尾（*因为存储桶只不过是linkedList实现存储键、值和下一个*）现在这会对性能产生影响！由于如果您执行查找，您的**对象 y**不再存在于存储桶的头部，因此所花费的时间不会是**O(1)**这次取决于同一个桶中有多少项目。顺便说一下，这被称为哈希冲突，甚至当您的加载因子小于 1 时也会发生这种情况。

## **性能、哈希冲突和加载因子之间的相关性？**

**更低的负载系数**= 更多的空闲桶 =**更少的碰撞机会**= 高性能 = 高空间要求。

*如果我在某处错了，请纠正我。*

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2012-06-05T17:16:50.710

从[文档](http://docs.oracle.com/javase/7/docs/api/java/util/Hashtable.html)中：

> 负载因子是哈希表在其容量自动增加之前允许达到的程度的度量

这实际上取决于您的特定要求，没有用于指定初始负载因子的“经验法则”。

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2019-04-20T13:22:20.880

对于 HashMap **DEFAULT_INITIAL_CAPACITY = 16**和**DEFAULT_LOAD_FACTOR = 0.75f** 这意味着 HashMap 中所有条目的最大数量 = **16 * 0.75 = 12**。当添加第 13 个元素时，HashMap 的容量（数组大小）将翻倍！完美的插图回答了这个问题： [![在此处输入图像描述](../Images/bf49c22daa243bbbf2d263b838db6e27.png)](https://i.stack.imgur.com/sRa6z.png) 图片取自这里：

[https://javabypatel.blogspot.com/2015/10/what-is-load-factor-and-rehashing-in-hashmap.html](https://javabypatel.blogspot.com/2015/10/what-is-load-factor-and-rehashing-in-hashmap.html)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-09-27T16:44:26.803

如果桶太满，那么我们必须仔细检查

一个很长的链表。

这有点违背了这一点。

所以这是一个我有四个桶的例子。

到目前为止，我的 HashSet 中有大象和獾。

这是一个很好的情况，对吧？

每个元素都有零个或一个元素。

现在我们将另外两个元素放入我们的 HashSet 中。

```
 buckets      elements
      -------      -------
        0          elephant
        1          otter
         2          badger
         3           cat 
```

这也不算太糟糕。

每个桶只有一个元素。所以如果我想知道，这是否包含熊猫？

我可以很快查看 1 号存储桶，但它不是

那里和

我知道它不在我们的收藏中。

如果我想知道它是否包含猫，我看一下桶

3号，

我找到了猫，我很快就知道它是否在我们的

收藏。

如果我加上考拉呢，那还不错。

```
 buckets      elements
      -------      -------
        0          elephant
        1          otter -> koala 
         2          badger
         3           cat 
```

也许现在而不是在 1 号桶中只看

一个元素，

我需要看两个。

但至少我不用看大象、獾和

猫。

如果我再次寻找熊猫，它只能在桶里

1号和

除了水獭，我不需要看任何东西

考拉。

但现在我把鳄鱼放在 1 号桶里，你可以

看看这可能会发生什么。

如果 1 号桶越来越大

更大，然后我基本上必须查看所有

要找到的那些元素

应该在 1 号桶中的东西。

```
 buckets      elements
      -------      -------
        0          elephant
        1          otter -> koala ->alligator
         2          badger
         3           cat 
```

如果我开始向其他存储桶添加字符串，

是的，问题只是在每个方面都变得越来越大

单桶。

我们如何阻止我们的水桶变得太满？

这里的解决方案是

```
 "the HashSet can automatically

        resize the number of buckets." 
```

HashSet 意识到桶越来越多

太满了。

它正在失去所有一个查找的优势

元素。

它只会创建更多的桶（通常是以前的两倍）和

然后将元素放入正确的桶中。

所以这是我们的基本 HashSet 实现，带有单独的

链接。现在我要创建一个“自调整大小的 HashSet”。

这个 HashSet 将意识到桶是

变得太满和

它需要更多的桶。

loadFactor 是我们 HashSet 类中的另一个字段。

loadFactor 表示每个元素的平均数量

桶，

上面我们要调整大小。

loadFactor 是空间和时间的平衡。

如果桶太满，那么我们将调整大小。

当然，这需要时间，但是

如果水桶是一个

多一点空。

让我们看一个例子。

这是一个 HashSet，到目前为止我们已经添加了四个元素。

大象、狗、猫和鱼。

```
 buckets      elements
      -------      -------
        0          
        1          elephant
         2          cat ->dog
         3           fish
          4         
           5 
```

在这一点上，我已经决定 loadFactor，

临界点，

我没问题的每个桶的平均元素数

为 0.75。

桶数为 buckets.length，即 6，而

此时我们的 HashSet 有四个元素，所以

当前大小为 4。

我们将调整我们的 HashSet 的大小，即我们将添加更多的桶，

当每个桶的平均元素数超过

负载因子。

那就是当前大小除以 buckets.length 时

大于负载因子。

此时，每个桶的平均元素数

是 4 除以 6。

4 个元素，6 个桶，即 0.67。

这小于我设置的阈值 0.75 所以我们

好的。

我们不需要调整大小。

但现在假设我们添加土拨鼠。

```
 buckets      elements
      -------      -------
        0          
        1          elephant
         2        woodchuck-> cat ->dog
         3           fish
          4         
           5 
```

土拨鼠最终会进入 3 号桶。

此时，currentSize 为 5。

现在每个桶的平均元素数

是 currentSize 除以 buckets.length。

即 5 个元素除以 6 个桶是 0.83。

这超过了 0.75 的 loadFactor。

为了解决这个问题，为了使

水桶也许有点

更空，这样操作就像确定一个

桶包含

一个元素会不那么复杂，我想调整大小

我的哈希集。

调整 HashSet 的大小需要两个步骤。

首先我将桶的数量增加一倍，我有 6 个桶，

现在我将有 12 个桶。

请注意，我设置为 0.75 的 loadFactor 保持不变。

但是改变的桶数是12，

元素的数量保持不变，为 5。

5 除以 12 大约是 0.42，这远低于我们的

负载因子，

所以我们现在没事了。

但我们还没有完成，因为其中一些元素在

现在错误的桶。

比如大象。

大象在 2 号桶中，因为

大象中的人物

是8。

我们有 6 个桶，8 减 6 等于 2。

这就是为什么它最终排在第二位的原因。

但是现在我们有 12 个桶，8 mod 12 是 8，所以

大象不再属于 2 号桶。

大象属于 8 号桶。

土拨鼠呢？

土拨鼠是整个问题的始作俑者。

土拨鼠最终进入了 3 号桶。

因为 9 mod 6 是 3。

但现在我们做 9 mod 12。

9 mod 12 是 9，土拨鼠去 9 号桶。

你看到了这一切的好处。

现在 3 号桶只有两个元素，而之前有 3 个。

所以这是我们的代码，

我们的 HashSet 有单独的链接

没有做任何调整大小。

现在，这是一个我们使用调整大小的新实现。

大部分代码是相同的，

我们仍然要确定它是否包含

已经值了。

如果没有，那么我们会弄清楚它是哪个桶

应该进入并且

然后将其添加到该存储桶，将其添加到该 LinkedList。

但是现在我们增加 currentSize 字段。

currentSize 是跟踪数字的字段

我们的 HashSet 中的元素。

我们要增加它，然后我们要看看

在平均负载下，

每个桶的平均元素数。

我们将在这里进行划分。

我们必须在这里做一些铸造以确保

我们得到一个双倍的。

然后，我们将平均负载与现场进行比较

我设置为

例如，当我创建这个 HashSet 时，它是 0.75

负载因子。

如果平均负载大于loadFactor，

这意味着每个桶上的元素太多

平均，我需要重新插入。

所以这是我们重新插入方法的实现

所有元素。

首先，我将创建一个名为 oldBuckets 的局部变量。

这指的是它们目前站立的桶

在我开始调整所有内容之前。

注意我还没有创建一个新的链表数组。

我只是将存储桶重命名为 oldBuckets。

现在记住水桶是我们班的一个领域，我要去

现在创建一个新数组

的链表，但这将有两倍的元素

和第一次一样。

现在我需要实际进行重新插入，

我将遍历所有旧存储桶。

oldBuckets 中的每个元素都是字符串的 LinkedList

那是一个桶。

我将遍历那个桶并获取其中的每个元素

桶。

现在我要把它重新插入到 newBuckets 中。

我会得到它的hashCode。

我会弄清楚它是哪个索引。

现在我得到了新的存储桶，新的 LinkedList

字符串和

我会将它添加到那个新存储桶中。

回顾一下，我们已经看到的 HashSet 是 Linked 的数组

列表或存储桶。

一个自调整大小的 HashSet 可以使用一些比率或

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-02-16T02:13:15.437

我会选择一个 n * 1.5 或 n + (n >> 1) 的表大小，这将给出 0.66666~ 的负载因子而不进行除法，这在大多数系统上都很慢，尤其是在没有除法的便携式系统上硬件。

# amazon-web-services - AWS NoSQL 或 AWS RDS，存储社交图的好方法是什么？

> ID：10901753
> 
> 赞同：0
> 
> 时间：2012-06-05T17:12:32.137
> 
> 标签：amazon-web-services, nosql, relational-database, social-networking, non-relational-database

最近我想将一些社交图信息存储到我们的数据库中，并且用户通过在具有社交图的服务器端发生的自动“映射”来发现新的社交节点。

**背景：** 每次有新客户访问时，我都会从其他来源存储他/她现有的社交节点，一个很好的例子是 Facebook。所以我有一个 Facebook 好友列表以及该客户的 Facebook ID，并将它们存储在我的数据库中。然后，服务器尝试将客户端好友列表中的每个项目与现有客户端进行匹配。如果匹配，则表示该客户有朋友使用我的服务。然后服务器返回一个匹配列表并在边缘的另一侧标记匹配。下次客户的朋友回来时，他们也会收到匹配完成的通知。

**障碍：** 我的问题是这种机制需要服务器存储客户社交图的完整列表，在我的示例中，这是客户的 Facebook 朋友的完整列表。由于这个社交图可以任意大，我当然不能将它存储到一个项目中，而是将它跨越多个项目或行，并使用客户 ID 和朋友 ID 对。如果我以这种方式存储它，那么密钥可能分布不均，这意味着我无法使用 DynamoDB。但是，我想探索将其存储在某些 AWS NoSQL 服务中以获得快速访问优势的可能性。

那么有没有很好的方法将这些数据存储在 AWS NoSQL 服务器中？或者我们可以做哪些优化来将它们放入 RDS 但不会损失太多效率？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T18:47:00.387

实际上，DynamoDB 可能非常适合您的用例...... DynamoDB 支持多值字段并且最大记录大小为 64k。

因此，您将创建一个包含两列的“friends”表，其中“clientId”作为您的哈希键，然后“friendId”作为多值字段。

这意味着您只需要一条记录来存储用户的完整朋友列表（假设 GUID 为“friendId”，最多大约 4,000 个朋友）。如果需要，您可以为拥有 4,000 多个朋友的用户使用多条记录...

# clojure - 在 Clojure 中调用 Java 可变参数方法时避免反射

> ID：10901756
> 
> 赞同：4
> 
> 时间：2012-06-05T17:12:42.070
> 
> 标签：clojure

我试图在从 JIRA API调用[IssueInputParameters.addCustomFieldValue()时避免反射。](http://docs.atlassian.com/software/jira/docs/api/5.0.1/com/atlassian/jira/issue/IssueInputParameters.html#addCustomFieldValue(java.lang.Long,%20java.lang.String...))然而，即使在完全类型提示时，Clojure 仍然会发出警告说反射正在使用中。

javadocs中给出的方法签名如下：

```
IssueInputParameters addCustomFieldValue(Long customFieldId, String... values) 
```

因此，我试图这样称呼它：

```
(fn [^com.atlassian.jira.issue.IssueInputParameters i, ^Long l]
  (.addCustomFieldValue i l (into-array String ["foo"]))) 
```

实际调用有效，但始终使用反射：

```
Reflection warning, NO_SOURCE_PATH:1 - call to addCustomFieldValue can't be resolved. 
```

如何避免这种情况？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-05T18:11:48.913

完成后，提示`String[]`显式有效，如下所示：

```
(fn [^com.atlassian.jira.issue.IssueInputParameters i, ^Long l]
  (.addCustomFieldValue i l
    ^"[Ljava.lang.String;" (into-array String ["foo"]))) 
```

# asp.net - 母版页、路径和一些 ContentPlaceHolder

> ID：10901757
> 
> 赞同：2
> 
> 时间：2012-06-05T17:12:43.013
> 
> 标签：asp.net, master-pages

我对 ASP.Net 完全陌生。实际上是 ASP 时期的新手。因此，如果它非常明显，请原谅我的无知。

我曾经像这样在母版页中有我的代码，但是为了防止 ContenPlaceHolder 中的文本被页面提供的任何内容替换，我对其进行了更改。

```
<head Runat="server">
    <title><asp:ContentPlaceHolder ID="title" Runat="server"></asp:ContentPlaceHolder></title>
    <asp:ContentPlaceHolder ID="stylesheets" Runat="server">
        <link rel="stylesheet" type="text/css" href="s/main.css" />
    </asp:ContentPlaceHolder>
    <asp:ContentPlaceHolder ID="scripts" Runat="server">
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
        <!--[if lt IE 9]>
        <script type="text/javascript" src="js/html5.js"></script>
        <![endif]-->
        <script type="text/javascript" src="js/slideshow.js"></script>
    </asp:ContentPlaceHolder>
</head> 
```

它产生了：

```
<head>
    <title></title>
    <link rel="stylesheet" type="text/css" href="s/main.css" />
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <!--[if lt IE 9]>
    <script type="text/javascript" src="js/html5.js"></script>
    <![endif]-->
    <script type="text/javascript" src="js/slideshow.js"></script>
</head> 
```

现在，当我将其更改为此时，它决定将解决我的`href`属性。

```
<head Runat="server">
    <title><asp:ContentPlaceHolder ID="title" Runat="server"></asp:ContentPlaceHolder></title>
    <link rel="stylesheet" type="text/css" href="s/main.css" />
    <asp:ContentPlaceHolder ID="stylesheets" Runat="server"></asp:ContentPlaceHolder>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <asp:ContentPlaceHolder ID="scripts" Runat="server"></asp:ContentPlaceHolder>
    <!--[if lt IE 9]>
    <script type="text/javascript" src="js/html5.js"></script>
    <![endif]-->
    <script type="text/javascript" src="js/slideshow.js"></script>
</head> 
```

和

```
<head Runat="server">
    <title><asp:ContentPlaceHolder ID="title" Runat="server"></asp:ContentPlaceHolder></title>
    <link rel="stylesheet" type="text/css" href="./s/main.css" />
    <asp:ContentPlaceHolder ID="stylesheets" Runat="server"></asp:ContentPlaceHolder>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <asp:ContentPlaceHolder ID="scripts" Runat="server"></asp:ContentPlaceHolder>
    <!--[if lt IE 9]>
    <script type="text/javascript" src="js/html5.js"></script>
    <![endif]-->
    <script type="text/javascript" src="js/slideshow.js"></script>
</head> 
```

变成了

```
<head>
    <title></title>
    <link rel="stylesheet" type="text/css" href="masters/s/main.css" />
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <!--[if lt IE 9]>
    <script type="text/javascript" src="js/html5.js"></script>
    <![endif]-->
    <script type="text/javascript" src="js/slideshow.js"></script>
</head> 
```

现在，在阅读了这里和我的书中的一些内容后，我想出了这个也是不正确的。

```
<head Runat="server">
    <title><asp:ContentPlaceHolder ID="title" Runat="server"></asp:ContentPlaceHolder></title>
    <link rel="stylesheet" type="text/css" href="~/s/main.css" />
    <asp:ContentPlaceHolder ID="stylesheets" Runat="server"></asp:ContentPlaceHolder>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <asp:ContentPlaceHolder ID="scripts" Runat="server"></asp:ContentPlaceHolder>
    <!--[if lt IE 9]>
    <script type="text/javascript" src="js/html5.js"></script>
    <![endif]-->
    <script type="text/javascript" src="js/slideshow.js"></script>
</head> 
```

出品：

```
<head>
    <title></title>
    <link rel="stylesheet" type="text/css" href="../s/main.css" />
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <!--[if lt IE 9]>
    <script type="text/javascript" src="js/html5.js"></script>
    <![endif]-->
    <script type="text/javascript" src="js/slideshow.js"></script>
</head> 
```

文件夹设置如下：

```
/masters/normal-page.master
/index.aspx #uses normal-page.master 
```

现在，问题是如何禁用此行为或使其产生`href="s/main.css"`或等效？是的，显而易见的解决方案是移动`normal-page.master`到根目录，但我不喜欢弄乱根文件夹。

另外，如果我使用了原件并且页面为页面中的占位符提供了一些内容，那么占位符标记之间的文本会被替换还是会被附加？（这本书似乎假设我知道这一切。）

另外，我没有使用 Visual Studio，也不会使用，因为我还不能证明成本合理。我正在使用记事本++。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T17:19:46.447

有一种`ResolveUrl`方法可以使这变得非常简单。试试这个，看看它是否对你有帮助：

```
<link href="<%= ResolveUrl("~/s/main.css")%>" rel="stylesheet" type="text/css" /> 
```

一些附加阅读： [Control.ResolveUrl 方法](http://msdn.microsoft.com/en-us/library/system.web.ui.control.resolveurl.aspx)

# wpf - System.Windows.Media.SolidColorBrush 必须将 IsFrozen 设置为 False 才能编辑错误

> ID：10901758
> 
> 赞同：0
> 
> 时间：2012-06-05T17:12:44.200
> 
> 标签：wpf, xaml

我有一个 WPF 应用程序，我在其中修改了许多控件的模板。在许多不同的情况下，我得到以下堆栈跟踪：

```
Specified value of type 'System.Windows.Media.SolidColorBrush' must have IsFrozen set to false to modify.
Specified value of type 'System.Windows.Media.SolidColorBrush' must have IsFrozen set to false to modify. (Exception class InvalidOperationException)

   at System.Windows.Markup.XamlReader.RewrapException(Exception e, Uri baseUri)
   at System.Windows.FrameworkTemplate.LoadTemplateXaml(XamlReader templateReader, XamlObjectWriter currentWriter)
   at System.Windows.FrameworkTemplate.LoadTemplateXaml(XamlObjectWriter objectWriter)
   at System.Windows.FrameworkTemplate.LoadOptimizedTemplateContent(DependencyObject container, IComponentConnector componentConnector, IStyleConnector styleConnector, List`1 affectedChildren, UncommonField`1 templatedNonFeChildrenField)
   at System.Windows.FrameworkTemplate.LoadContent(DependencyObject container, List`1 affectedChildren)
   at System.Windows.StyleHelper.ApplyTemplateContent(UncommonField`1 dataField, DependencyObject container, FrameworkElementFactory templateRoot, Int32 lastChildIndex, HybridDictionary childIndexFromChildID, FrameworkTemplate frameworkTemplate)
   at System.Windows.FrameworkTemplate.ApplyTemplateContent(UncommonField`1 templateDataField, FrameworkElement container)
   at System.Windows.FrameworkElement.ApplyTemplate()
   at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
   at System.Windows.UIElement.Measure(Size availableSize)
   at System.Windows.Controls.Border.MeasureOverride(Size constraint)
   at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
   at System.Windows.UIElement.Measure(Size availableSize)
   at System.Windows.Controls.Grid.MeasureCell(Int32 cell, Boolean forceInfinityV)
   at System.Windows.Controls.Grid.MeasureCellsGroup(Int32 cellsHead, Size referenceSize, Boolean ignoreDesiredSizeU, Boolean forceInfinityV)
   at System.Windows.Controls.Grid.MeasureOverride(Size constraint)
   at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
   at System.Windows.UIElement.Measure(Size availableSize)
   at System.Windows.Controls.Control.MeasureOverride(Size constraint)
   at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
   at System.Windows.UIElement.Measure(Size availableSize)
   at System.Windows.Controls.Grid.MeasureCell(Int32 cell, Boolean forceInfinityV)
   at System.Windows.Controls.Grid.MeasureCellsGroup(Int32 cellsHead, Size referenceSize, Boolean ignoreDesiredSizeU, Boolean forceInfinityV)
   at System.Windows.Controls.Grid.MeasureOverride(Size constraint)
   at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
   at System.Windows.UIElement.Measure(Size availableSize)
   at MS.Internal.Helper.MeasureElementWithSingleChild(UIElement element, Size constraint)
   at System.Windows.Controls.ContentPresenter.MeasureOverride(Size constraint)
   at System.Windows.FrameworkElement.MeasureCore(Size availableSize)
   at System.Windows.UIElement.Measure(Size availableSize)
   at System.Windows.ContextLayoutManager.UpdateLayout()
   at System.Windows.ContextLayoutManager.UpdateLayoutCallback(Object arg)
   at System.Windows.Media.MediaContext.InvokeOnRenderCallback.DoWork()
   at System.Windows.Media.MediaContext.FireInvokeOnRenderCallbacks()
   at System.Windows.Media.MediaContext.RenderMessageHandlerCore(Object resizedCompositionTarget)
   at System.Windows.Media.MediaContext.RenderMessageHandler(Object resizedCompositionTarget)
   at System.Windows.Media.MediaContext.Resize(ICompositionTarget resizedCompositionTarget)
   at System.Windows.Interop.HwndTarget.OnResize()
   at System.Windows.Interop.HwndTarget.HandleMessage(WindowMessage msg, IntPtr wparam, IntPtr lparam)
   at System.Windows.Interop.HwndSource.HwndTargetFilterMessage(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   at MS.Win32.HwndWrapper.WndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
   at MS.Win32.HwndSubclass.DispatcherCallbackOperation(Object o)
   at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
   at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler) 
```

我还没有编写任何试图更改任何画笔的值的代码。而且我不知道哪个控件正在产生错误。我怀疑问题出在我修改的模板之一中，但我不知道是哪一个。

我不知道如何跟踪和调试它。有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T18:00:27.687

我很幸运得到了这个。

我注意到该错误发生在应用程序的两个不同屏幕上。它们唯一的共同点是 Telerik 的 RadGridView 控件。我对该控件进行了一些自定义修改，以支持将调色板从“白天模式”更改为“夜间模式”。

我不知道我做了什么，但是我从 app.xaml 文件中删除了自定义模板，错误就消失了。然后我在 Expression Blend 中重新生成了模板，只替换了我所做的颜色更改的 Setter。而且错误仍然消失了！

我怀疑我可能在实现“夜间模式”的过程中升级了 Telerik 库，并且我有一个过时的控件模板。无论如何，错误消失了，至少现在是这样。

# java - 我需要帮助才能让我的计算器正常工作 - NetBeans

> ID：10901759
> 
> 赞同：-2
> 
> 时间：2012-06-05T17:12:46.733
> 
> 标签：java, swing, netbeans, jframe, calculator

我正在尝试创建一个零售计算器，它将显示商品的销售价格。用户在一个文本框中输入项目的原始价格，并在另一个框中输入折扣百分比。然后用户点击计算按钮得到答案。我的问题是我无法让程序计算答案，而是收到很多错误消息。我只在几行上看到错误，但我不知道如何修复它们。以下是我的代码：

导入 javax.swing.JOptionPane；

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/**
 * 
 * @author Owner
 */
public class RetailCalcForm extends javax.swing.JFrame {

    private void close() {
        throw new UnsupportedOperationException("Not yet implemented");
    }

    private static class number {

        public number() {
        }
    }

    private static class number2 {

        public number2() {
        }
    }

    /**
     * Creates new form RetailCalcForm
     */
    public RetailCalcForm() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        itemNameText = new javax.swing.JTextField();
        originalPriceText = new javax.swing.JTextField();
        percentDiscountedText = new javax.swing.JTextField();
        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        calculateButton = new javax.swing.JButton();
        salesPriceLabel = new javax.swing.JLabel();
        exitButton = new javax.swing.JButton();
        javax.swing.JComboBox departmentBox = new javax.swing.JComboBox();
        jLabel4 = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jLabel1.setText("Item Name");

        jLabel2.setText("Original Price");

        jLabel3.setText("% Discounted");

        calculateButton.setText("Calculate Discount Price");
        calculateButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                calculateButtonActionPerformed(evt);
            }
        });

        salesPriceLabel.setText("Discounted Sales Price: ");

        exitButton.setText("Exit");
        exitButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                exitButtonActionPerformed(evt);
            }
        });

        departmentBox.setModel(new javax.swing.DefaultComboBoxModel(
                new String[] { "Electronics", "Toys", "Clothing", "Housewares",
                        "Garden" }));
        departmentBox.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                departmentBoxActionPerformed(evt);
            }
        });

        jLabel4.setText("Select Department");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(
                getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(layout
                .createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(
                        layout.createSequentialGroup()
                                .addGap(28, 28, 2Cool

                                .addGroup(
                                        layout.createParallelGroup(
                                                javax.swing.GroupLayout.Alignment.LEADING)
                                                .addGroup(
                                                        layout.createSequentialGroup()
                                                                .addGroup(
                                                                        layout.createParallelGroup(
                                                                                javax.swing.GroupLayout.Alignment.LEADING)
                                                                                .addComponent(
                                                                                        jLabel2)
                                                                                .addComponent(
                                                                                        jLabel1))
                                                                .addContainerGap())
                                                .addGroup(
                                                        layout.createSequentialGroup()
                                                                .addGroup(
                                                                        layout.createParallelGroup(
                                                                                javax.swing.GroupLayout.Alignment.LEADING)
                                                                                .addComponent(
                                                                                        salesPriceLabel,
                                                                                        javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                        310,
                                                                                        javax.swing.GroupLayout.PREFERRED_SIZE)
                                                                                .addGroup(
                                                                                        layout.createSequentialGroup()
                                                                                                .addGroup(
                                                                                                        layout.createParallelGroup(
                                                                                                                javax.swing.GroupLayout.Alignment.LEADING)
                                                                                                                .addComponent(
                                                                                                                        jLabel3)
                                                                                                                .addComponent(
                                                                                                                        jLabel4))
                                                                                                .addGap(26,
                                                                                                        26,
                                                                                                        26)
                                                                                                .addGroup(
                                                                                                        layout.createParallelGroup(
                                                                                                                javax.swing.GroupLayout.Alignment.LEADING)
                                                                                                                .addComponent(
                                                                                                                        percentDiscountedText,
                                                                                                                        javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                                                        145,
                                                                                                                        javax.swing.GroupLayout.PREFERRED_SIZE)
                                                                                                                .addComponent(
                                                                                                                        departmentBox,
                                                                                                                        javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                                                        105,
                                                                                                                        javax.swing.GroupLayout.PREFERRED_SIZE)
                                                                                                                .addGroup(
                                                                                                                        layout.createSequentialGroup()
                                                                                                                                .addGroup(
                                                                                                                                        layout.createParallelGroup(
                                                                                                                                                javax.swing.GroupLayout.Alignment.LEADING)
                                                                                                                                                .addComponent(
                                                                                                                                                        originalPriceText,
                                                                                                                                                        javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                                                                                        145,
                                                                                                                                                        javax.swing.GroupLayout.PREFERRED_SIZE)
                                                                                                                                                .addComponent(
                                                                                                                                                        itemNameText,
                                                                                                                                                        javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                                                                                        145,
                                                                                                                                                        javax.swing.GroupLayout.PREFERRED_SIZE))
                                                                                                                                .addPreferredGap(
                                                                                                                                        javax.swing.LayoutStyle.ComponentPlacement.RELATED,
                                                                                                                                        59,
                                                                                                                                        Short.MAX_VALUE)
                                                                                                                                .addComponent(
                                                                                                                                        calculateButton)))))
                                                                .addGap(0, 33,
                                                                        33))))
                .addGroup(
                        layout.createSequentialGroup().addGap(228, 228, 228)
                                .addComponent(exitButton)
                                .addGap(0, 0, Short.MAX_VALUE)));
        layout.setVerticalGroup(layout
                .createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addGroup(
                        layout.createSequentialGroup()
                                .addGap(69, 69, 69)
                                .addGroup(
                                        layout.createParallelGroup(
                                                javax.swing.GroupLayout.Alignment.TRAILING)
                                                .addComponent(
                                                        departmentBox,
                                                        javax.swing.GroupLayout.PREFERRED_SIZE,
                                                        javax.swing.GroupLayout.DEFAULT_SIZE,
                                                        javax.swing.GroupLayout.PREFERRED_SIZE)
                                                .addComponent(jLabel4))
                                .addGap(35, 35, 35)
                                .addGroup(
                                        layout.createParallelGroup(
                                                javax.swing.GroupLayout.Alignment.TRAILING)
                                                .addComponent(jLabel1)
                                                .addComponent(
                                                        itemNameText,
                                                        javax.swing.GroupLayout.PREFERRED_SIZE,
                                                        javax.swing.GroupLayout.DEFAULT_SIZE,
                                                        javax.swing.GroupLayout.PREFERRED_SIZE))
                                .addGap(37, 37, 37)
                                .addGroup(
                                        layout.createParallelGroup(
                                                javax.swing.GroupLayout.Alignment.BASELINE)
                                                .addComponent(jLabel2)
                                                .addComponent(
                                                        originalPriceText,
                                                        javax.swing.GroupLayout.PREFERRED_SIZE,
                                                        javax.swing.GroupLayout.DEFAULT_SIZE,
                                                        javax.swing.GroupLayout.PREFERRED_SIZE))
                                .addGap(26, 26, 26)
                                .addGroup(
                                        layout.createParallelGroup(
                                                javax.swing.GroupLayout.Alignment.TRAILING)
                                                .addComponent(
                                                        percentDiscountedText,
                                                        javax.swing.GroupLayout.PREFERRED_SIZE,
                                                        javax.swing.GroupLayout.DEFAULT_SIZE,
                                                        javax.swing.GroupLayout.PREFERRED_SIZE)
                                                .addComponent(jLabel3))
                                .addGap(35, 35, 35)
                                .addComponent(salesPriceLabel)
                                .addPreferredGap(
                                        javax.swing.LayoutStyle.ComponentPlacement.RELATED,
                                        44, Short.MAX_VALUE)
                                .addComponent(exitButton).addGap(26, 26, 26))
                .addGroup(
                        layout.createSequentialGroup()
                                .addGap(140, 140, 140)
                                .addComponent(calculateButton,
                                        javax.swing.GroupLayout.PREFERRED_SIZE,
                                        87,
                                        javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addContainerGap()));

        pack();
    }// </editor-fold>

    private void calculateButtonActionPerformed(java.awt.event.ActionEvent evt) {
        int number1 = 0, number2 = 0;
        try (
            int = Integer.parseInt(
            this.originalPriceText.getText());
        catch (Excemption e) {
            JOptionPane.showMessageDialog(this, "Invalid Price Amount", "Error", JOptionPane.ERROR_MESSAGE);
            return;
        }
        try (
            int = Integer.parseInt(
            this.percentDiscountedText.getText());
        catch (Excemption e) {
            JOptionPane.showMessageDialog(this, "Invalid Discount Amount", "Error", JOptionPane.ERROR_MESSAGE);
            return;
        }
        int answer = number1 / number2;
        this.salesPriceLabel.setText("Discounted Sales Price: " / answer);
    }

    private void departmentBoxActionPerformed(java.awt.event.ActionEvent evt) {
        // TODO add your handling code here:
    }

    private void exitButtonActionPerformed(java.awt.event.ActionEvent evt) {
        System.exit(0);
        close();

    }

    /**
     * @param args
     *            the command line arguments
     */
    public static void main(String args[]) {
        /*
         * Set the Nimbus look and feel
         */
        // <editor-fold defaultstate="collapsed"
        // desc=" Look and feel setting code (optional) ">
        /*
         * If Nimbus (introduced in Java SE 6) is not available, stay with the
         * default look and feel. For details see
         * http://download.oracle.com/javase
         * /tutorial/uiswing/lookandfeel/plaf.html
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager
                    .getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(RetailCalcForm.class.getName())
                    .log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(RetailCalcForm.class.getName())
                    .log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(RetailCalcForm.class.getName())
                    .log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(RetailCalcForm.class.getName())
                    .log(java.util.logging.Level.SEVERE, null, ex);
        }
        // </editor-fold>

        /*
         * Create and display the form
         */
        java.awt.EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new RetailCalcForm().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify
    private javax.swing.JButton calculateButton;
    private javax.swing.JButton exitButton;
    private javax.swing.JTextField itemNameText;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JTextField originalPriceText;
    private javax.swing.JTextField percentDiscountedText;
    private javax.swing.JLabel salesPriceLabel;
    // End of variables declaration
} 
```

我能得到的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T17:25:36.217

这是一个 try catch 块（您忘记用`}`

```
try {
    number1  = Integer.parseInt(this.percentDiscountedText.getText());
} catch (Exception e) {
    JOptionPane.showMessageDialog(this, "Invalid Discount Amount", "Error", JOptionPane.ERROR_MESSAGE);
    return;
} 
```

这是**例外**而不是**例外**

* * *

你需要一个`+`not a`/`来连接带有变量的字符串：

```
this.salesPriceLabel.setText("Discounted Sales Price: " +  answer); 
```

* * *

要创建一个整数，您需要一个名称。

```
int = Integer.parseInt("1"); ---> int name = Integer.parseInt("1"); 
```

但是在您的情况下，您不必创建新的 int，我想您必须使用`number1`and `number2`。

* * *

我不知道这条线有什么问题。首先我认为你必须`Cool`用括号替换

```
.addGap(28, 28, 2Cool  ---> .addGap(28, 28, 2) 
```

但随后计算器不再工作（`java.lang.IllegalArgumentException: Following is not met: min<=pref<=max`）。
我的解决方案是删除这条线。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T17:30:23.153

将[JFormattedTextField / JSpinner](http://docs.oracle.com/javase/tutorial/uiswing/components/formattedtextfield.html)与[Number Formatter](http://docs.oracle.com/javase/tutorial/uiswing/components/formattedtextfield.html#format)一起使用，而不是从 String 中解析数字

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T17:20:27.477

一件事，try/catch 块像所有其他块一样使用花括号，而不是括号。你有

```
try (
   // some code ...
) catch (Exception e) {
   // catch code here
} 
```

什么时候应该

```
try {
   // some code ...
} catch (Exception e) {
   // catch code here
} 
```

但更重要的是你的编码风格需要纠正。您似乎在屏幕上添加了很多代码，在您输入整个内容之前忽略了所有错误，这是灾难的根源。您需要在添加的每一行或两行代码之后更正每个编译错误。否则，您将一无所有，只有老鼠窝里几乎无法纠正的错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T17:47:49.440

你在写——

```
int=Integer.parseint(this.originalPriceText.getText()); 
```

这是错误的！它应该是 -

```
number1=Integer.parseint(this.originalPriceText.getText()); 
```

此外，try 块被包裹在花括号内 -

```
try{
    // code goes here
}
catch(Exception ex){
    // code goes here
} 
```

您再次描述了`Exception`to be `Excemption`。

纠正所有这些，您的方法应该如下所示 -

```
private void calculateButtonActionPerformed(java.awt.event.ActionEvent evt) {
    int number1 = 0, number2 = 0;
    try{
        number1 = Integer.parseInt(this.originalPriceText.getText());
    }
    catch (Exception e) {
        JOptionPane.showMessageDialog(this, "Invalid Price Amount", "Error", 
                                           JOptionPane.ERROR_MESSAGE);
        return;
    }

    try {
        number2 = Integer.parseInt(this.percentDiscountedText.getText());
    }
    catch (Excemption e) {
        JOptionPane.showMessageDialog(this, "Invalid Discount Amount", "Error", 
                                            JOptionPane.ERROR_MESSAGE);
        return;
    }

    int answer = number1 / number2;
    this.salesPriceLabel.setText("Discounted Sales Price: " / answer);
} 
```

您应该快速浏览[本](http://docs.oracle.com/javase/tutorial/)教程。

# java - 添加具有截断结果的十六进制数

> ID：10901760
> 
> 赞同：-1
> 
> 时间：2012-06-05T17:12:48.380
> 
> 标签：java, hex

我需要有关添加内存位置的 java 帮助。

如果当前内存位置在`fffffff8`并且有一个偏移量`+10`，在java中我会得到的值`100000008`但是如果我想要这个值`0000 0000 0000 0008`而不是`0000 0001 0000 0008`，我应该怎么做，我当前的代码是否优化了这个计算?

目前我使用的代码如下：

```
long a = Long.parseLong("fffffff8",16) + Long.parseLong("10",16);
String x = Long.toHexString(a); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T17:21:55.347

既然您似乎想要进行 32 位数学运算，那么您为什么首先使用`long`呢？

如果你只使用`int`，你会得到你想要的：

```
int a = 0xfffffff8 + 0x10; 
```

会给你`8`。

正如托马斯所说，除非您从某个地方收到不需要使用的字符串，`Long.parseLong()`或者`Integer.parseInt()`因为您可以直接以十六进制形式编写数字文字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T17:21:51.003

不知道为什么要在 java 中手动弄乱内存位置，但是如果您需要截断 long，这应该适合您。此外，除非您接受来自用户输入/网络的 longs 并将其作为字符串发送，否则 0x#### 可以代替 parseLong。

```
long a = 0xfffffff8L + 0x10L;
long b = a & 0xffffffffL; 
```

编辑：在常量的末尾去掉我的 L。

# vb.net - 以编程方式切换 DataGridView 中的复选框单元格

> ID：10901761
> 
> 赞同：2
> 
> 时间：2012-06-05T17:12:51.090
> 
> 标签：vb.net, winforms

当用户取消选中 datagridview 行的复选框时，显示消息框，如果用户回答是，则删除该行，如果用户回答否，则我需要重新选中该复选框。但是它实际上并没有检查，除非我之后单击 datagridview 上的任何位置。有什么想法可以让 dgv 更新吗？

```
Private Sub DataGridView2_CellValueChanged(sender As Object, e As DataGridViewCellEventArgs) Handles DataGridView2.CellValueChanged

  If e.RowIndex <> -1 Then
    Dim row As DataGridViewRow = DataGridView2.Rows(e.RowIndex)
    If e.ColumnIndex = 0 Then
      If row.Cells(0).Value = False Then
        If MessageBox.Show("Delete view from database.", "Delete", MessageBoxButtons.YesNo) = DialogResult.Yes Then
          DataGridView2.Rows.RemoveAt(e.RowIndex)
        Else
          row.Cells(0).Value = True
          DataGridView2.Invalidate()
        End If
      End If
    End If
  End If
End Sub

Private Sub DataGridView2_CurrentCellDirtyStateChanged(sender As Object, e As EventArgs) Handles DataGridView2.CurrentCellDirtyStateChanged
  If DataGridView2.IsCurrentCellDirty Then
    DataGridView2.CommitEdit(DataGridViewDataErrorContexts.Commit)
  End If
End Sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T18:19:27.927

而不是`Invalidate()`，请尝试调用`RefreshEdit()`，如下所示：

```
Else
  row.Cells(0).Value = True
  DataGridView2.RefreshEdit()
End If 
```

# objective-c - 将 NSDate 转换为其他格式

> ID：10901764
> 
> 赞同：4
> 
> 时间：2012-06-05T17:13:12.383
> 
> 标签：objective-c, ios5

> **可能重复：**
> [NSDateFormatter 和 yyyy-MM-dd](https://stackoverflow.com/questions/5087173/nsdateformatter-and-yyyy-mm-dd)

我有一个格式为 yyyy-MM-dd 的 NSDate 变量，我想将其转换为 dd/MM/yyyy。我该怎么做？

```
NSDateFormatter *f = [[NSDateFormatter alloc] init];
[f setDateFormat:@"yyyy-MM-dd"];            
NSDate *date = [f dateFromString:[[jugador objectAtIndex:0] valueForKey:@"FECHA_NAC"]]; 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T17:26:38.307

使用相同的 NSDateformatter，您可以使用**setDateFormat**格式化日期并使用**dateFromString检索日期**

例如 ：

```
NSDateFormatter *dateFormat1 = [[NSDateFormatter alloc] init];

[dateFormat1 setDateFormat:@"yyyy-MM-dd"];

NSString *strToday = [dateFormat1  stringFromDate:[NSDate date]];// string with yyyy-MM-dd format

[dateFormat1 setDateFormat:@"dd/MM/yyyy"];

NSDate *todaydate = [dateFormat1 dateFromString:strToday];// date with dd/MM/yyyy format 
```

**编辑**：代码的更改`example`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T17:20:36.280

调用后`dateFromString:`，只需在同一日期格式化程序上设置所需的格式并调用`stringFromDate:`。

# c# - WCF 通道故障模式

> ID：10901766
> 
> 赞同：0
> 
> 时间：2012-06-05T17:13:23.480
> 
> 标签：c#, wcf

我想知道 WCF 服务的故障模式的行为。

假设托管服务的服务器已关闭，那么我用来连接服务的通道将处于故障模式？

以下是我的观察：

*   服务已启动并运行，所有服务调用均成功。
*   现在服务器已关闭，频道显示它已打开，因此它将调用最终超时的服务，我处置频道
*   对于下一次服务呼叫，它将创建新通道，因为我在上次呼叫中已将其处理。

问题：这是预期的场景还是通道应该显示它在第一次调用时处于故障状态。

请指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T17:14:52.350

根据 TCP 的设计，通常不可能查看服务器或客户端是否失去连接。所以你必须打电话才能看到。（非正常方式是发送一个空的 TCP 包，但通常不被任何操作系统支持。）

如果您将regualry 称为特殊的nop（无操作）功能，您可以更快地看到它。

如果您的呼叫由于连接超时而失败（如果对方离线，则每次都会发生这种情况），那么您的通道就会出现故障。

# c++ - 无法将 »boost::gregorian::date_duration« 转换为 »int

> ID：10901767
> 
> 赞同：0
> 
> 时间：2012-06-05T17:13:23.940
> 
> 标签：c++, boost, boost-date-time

我正在使用这些`boost`库，并且只会使用`int`：

但我收到错误：

```
cannot convert »boost::gregorian::date_duration« to »int 
```

我能做什么 ？请帮忙，我只想检查我的日期是否超过了当前日期。我得到了正确的答案，但无法使用。( `range.length()`)

```
#include <iostream>
#include <boost/date_time/gregorian/gregorian.hpp>
#include <ctime>
#include <fstream>

namespace bdt = boost::gregorian;
using namespace std;

int main(void)
{

time_t now = time(0);
tm *ltm = localtime(&now);

//Aktuelles Datum
    int y = 1900 + ltm->tm_year;
    int d = ltm->tm_mday;
    int m = 1 + ltm->tm_mon;
    bdt::date today(bdt::date(y, m, d));

//Ziel                               y   m   d  
    bdt::date electionDay(bdt::date(2012, 6, 6));
    bdt::date_period range(today, electionDay);

    std::cout  << range.length() << std::endl;
            int z = range.length() ;  

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T17:22:59.087

假设您希望整数表示期间的天数，则：

```
range.length().days() 
```

或者，如果您想比较日期，您可以在不转换为句点、持续时间、整数或其他任何内容的情况下执行此操作：

```
if (today > electionDay) {
    std::cout << "Election day is in the past\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T17:22:46.913

`length()`返回`date_duration`实例。您可以使用它的成员函数之一来获得您想要的。例如，`range.length().days()`;

# linux - Default protocol for AF_UNIX sockets

> ID：10901775
> 
> 赞同：7
> 
> 时间：2012-06-05T17:14:00.853
> 
> 标签：linux, sockets, unix, networking

I'm curious what the default protocol is for an AF_UNIX SOCK_STREAM socket. I'm trying to track down exactly what the packet overhead should be, but I can't figure out what protocol is used by default. I suspect it's *not* IPPROTO_TCP because this:

```
socketpair(AF_UNIX, SOCK_STREAM, 0, sfd) 
```

works while, this:

```
socketpair(AF_UNIX, SOCK_STREAM, IPPROTO_TCP, sfd) 
```

Gives a "Protocol not supported error".

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T17:37:09.943

Since an **AF_UNIX** unix socket is a local thing, there's no such thing as added protocol overhead in this case. You can use it in **SOCK_STREAM** or **SOCK_DGRAM** mode to make it connection-oriented or connectionless, respectively, but that's all: no protocol headers are added and it traverses none of the network or transport protocol implementations in the network stack.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T17:56:42.497

**AF** stands for **A** ddress **F** amily whereas **PF** stands for **P** rotocol **F** amily.

The **AF_UNIX** family does not have a protocol IPPROTO_TCP that is supported by that address family. AF_UNIX is for interprocess communications between processes on the same system in the UNIX® domain. **The AF_UNIX and AF_UNIX_CCSID address family supports a protocol of 0 for both SOCK_STREAM and SOCK_DGRAM.**

Read more here: [Sockets](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/index.jsp?topic=/apis/socket.htm)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T17:42:07.767

The only valid "protocol" when using AF_UNIX is zero.

Look at [socket(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/socket.2.html) and [unix(7)](http://www.kernel.org/doc/man-pages/online/pages/man7/unix.7.html)

# jquery - jQuery-Handsontable 和 Twitter Bootstrap responsive.css 复制/粘贴问题

> ID：10901778
> 
> 赞同：0
> 
> 时间：2012-06-05T17:14:02.370
> 
> 标签：jquery, twitter-bootstrap, copy-paste, responsive-design

我在使用带有 Twitter Bootstrap 的 jQuery-Handsontable 时遇到问题。

我不能将 jQuery-Handsontable 复制粘贴功能与 Twitter Bootstrap 响应式样式表一起使用。

如果我删除 bootstrap-responsive.css 它就像魅力一样工作！但我需要使用 twitter bootstrap 响应式 css。如果我不能将它们组合在一起，至少我想知道为什么我会遇到这个问题。

这是示例链接（[http://jsfiddle.net/tevfik/mJVpA/](http://jsfiddle.net/tevfik/mJVpA/)）；尝试从“管理资源”中删除 bootstrap-responsive.css。您会看到复制/粘贴将在桌面上工作。

我需要解决这个问题。

其他链接； [http://warpech.github.com/jquery-handsontable/](http://warpech.github.com/jquery-handsontable/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T13:29:13.910

使用 Firebug 表明 CSS 中的“.hidden”类存在冲突。我已修复 Handsontable 以使用名称间隔的类名（现在称为“.htHidden”。

确保升级到当前版本，一切都会好起来的。

# ios - iOS Soundcloud 登录问题

> ID：10901779
> 
> 赞同：1
> 
> 时间：2012-06-05T17:14:04.263
> 
> 标签：ios, soundcloud

我正在尝试从我自己的 Soundcloud 帐户流式传输我自己的曲目。我的项目中包含 API 并开始配置，如下所示：

```
 [SCSoundCloud setClientID:CLIENT_KEY
                    secret:CLIENT_SECRET
               redirectURL:[NSURL URLWithString:REDIRECT_URL]]; 
```

我正在尝试对我自己的 Soundcloud 凭据进行硬编码，但在 SCSoundCloud 中找不到为此的调用。我不想让用户登录。是否有必要让用户登录才能查看我的曲目，或者我可以提供匿名访问以便他们可以简单地流式传输？

这一直是一个问题，任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T15:28:09.927

如果有人感兴趣，可以使用以下方法完成：

```
[[SCSoundCloud shared] requestAccessWithUsername:@"username" password:@"password"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-18T17:52:52.537

只需自己编写代码，不要使用 Soundcloud-Wrapper，这是一个使用 AFNetworking 的示例：

```
 NSMutableDictionary * parameters = [[NSMutableDictionary alloc]init];
        [parameters setObject:@"password" forKey:@"grant_type"];
        [parameters setObject:self.emailTextField.text forKey:@"username"];
        [parameters setObject:self.passWordTextField.text forKey:@"password"];
        [parameters setObject:CLIENT_ID forKey:@"client_id"];
        [parameters setObject:CLIENT_SECRET forKey:@"client_secret"];

        // Token will not expire 
        [parameters setObject:@"non-expiring" forKey:@"scope"];

        [[SoundCloudClient sharedClient] POST:@"/oauth2/token" parameters:parameters success: ^(NSURLSessionDataTask *task, id responseObject)
         {
             // Store Access-Token
         }

            failure: ^(NSURLSessionDataTask *task, NSError *error)
         {
             // Errorhandling
         }]; 
```

# wordpress - 将 https://www 重定向到 https://non-www

> ID：10901790
> 
> 赞同：0
> 
> 时间：2012-06-05T17:14:51.167
> 
> 标签：wordpress, http, redirect, https

我有一个安全的 wordpress 网站重定向问题。我已经尽可能彻底地研究了这一点，但似乎无法弄清楚。我有两个条件可以在 .htaccess 文件中重定向流量。首先，所有`http://www`流量都需要重定向到`https://afspa.org`. 这是我通过以下方式完成的：

```
#BEGIN WordPress

<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{SERVER_PORT} 80
RewriteRule ^(.*)$ https://afspa.org/$1 [R=301,L]
</IfModule>

#END WordPress 
```

我的第二个条件是所有`https://www`流量也需要重定向到`https://afspa.org`. 但是，当用户输入或添加书签时，`https://www.afspa.org`他们不会被重定向。相反，他们会收到安全警告。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T17:24:22.657

这是因为您的证书适用于`afspa.org`但不适用于`www.afspa.org`. 浏览器在重定向之前检查证书。

# perl - perl while 循环

> ID：10901799
> 
> 赞同：0
> 
> 时间：2012-06-05T17:15:37.123
> 
> 标签：perl

我知道搜索一般是如何工作的，并且看过其他一些帖子。但是我仍然很困惑。Seek 究竟是如何工作的，它会从它离开的相同位置读回吗？

```
while( my $line= <IN1>)
{
  do something;
  while( my $l= <IN2>)
  {
    do something;
    seek IN1, 0, 1;
  }
} 
```

这会回到第一个循环并从它停止的地方开始......？然后如果它回到第二个while循环，我如何让它从它停止的地方读取......？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T17:21:53.453

不，它不会去任何地方。这`seek`是一个无操作，因为根据[`seek`文档](http://p3rl.org/seek)，您实际上是在告诉它“从当前位置移动 0 个字节”。如果您需要记下您在文件中的位置，然后从那里恢复，您需要使用然后[`tell`](http://p3rl.org/tell)设置为( ) 来获取它。`seek``WHENCE``SEEK_SET``0`

例子：

```
use Fntl qw(SEEK_SET); # <- he knows exactly what SEEK_SET is on your system, though it is always 0, AFAIR.

my $current_position = tell $file_handle;
do_stuff_with_data_from(<$file_handle>);
do_more_stuff_with_data_from(<$file_handle>);
# rewind
seek $fh, $current_position, SEEK_SET; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T17:41:25.333

只要您不在循环中打开或关闭它们，句柄就会从它们最初停止的位置“返回” - 而您没有。

如果您要做的是停止从第二个输入读取并从第一个输入读取，那么您只想打破内部循环。因为您没有关闭或重新启动 IN2，所以它应该准备好读取您之前读取的记录之后的记录。

```
RCD_FROM_1:
while( my $line= <IN1>)
{
  do something;
  RCD_FROM_2:
  while( my $l= <IN2>)
  {
    do something;
    last RCD_FROM_2 if some_condition();
  }
} 
```

你也可以这样做`next RCD_FROM_1;`

如果您希望能够重新读取该行，那么您可以`tell`在每个循环结束时记录 a ，以便您可以倒带并再次读取该记录。

```
my $prev = 0;
RCD_FROM_1:
while( my $line= <IN1>)
{    
  ...

  $prev = tell( IN2 );
  RCD_FROM_2:
  while( my $l= <IN2>)
  {
    do something;
    if ( some_condition()) { 
        die 'Could not reset handle' unless seek( IN2, $prev, 0 );
        last RCD_FROM_2;
    }
    $prev = tell( IN2 );
  } 
```

我自己，我可能宁愿在本地缓冲两个流的最后一条记录。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T18:42:14.007

我认为您对我对[上一个问题](https://stackoverflow.com/questions/10899621/perl-while-loops-and-reading-lines)的回答感到困惑，该问题用于`seek`倒带文件并从头开始再次阅读。

Perl与循环`seek`无关。`while`它只是在文件中设置下一个数据将被读取的位置。我在我的解决方案中使用它来在文件被完全读取后将读取点返回到文件的开头。

为了让我们为您提供最好的帮助，您必须*重新表述*您的问题，并详细说明您真正想做的事情。目前，我最好的猜测是这个。

你有两个文件，每个文件都有四行记录，第二行有一个 DNA 序列。您想要一个出现在*两个文件中**任何位置*的所有 DNA 序列的列表，以及仅在一个文件中或另一个文件中的那些序列的列表。

 *无论这是否正确，请提出一个新问题，详细解释您的问题。您已经寻求*无法解决您的问题*的特定解决方案，并寻求帮助以使其正常工作。如果您告诉我们问题而不是您提出的解决方案，那么我们将能够更好地帮助您，并且不必对真实情况进行猜测。*

# php - 一个输入表单中有两个不同的值

> ID：10901800
> 
> 赞同：0
> 
> 时间：2012-06-05T17:15:38.603
> 
> 标签：php, html, css

我创建了一个登录表单，如果您输入错误的用户名或密码，您在用户名中输入的值将回显到登录表单。

但是现在我想将 value="LOGIN" 添加到表单中，当您没有尝试登录并且输入错误的用户/密码时，它将更改为回显值。

希望你明白我的意思:)

这是我的输入代码

```
<input type="text" name="username" id="username" value="<?php if (isset($_POST['username'])) echo  htmlentities($_POST['username']); ?>" /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-05T17:20:47.590

```
<input type="text" name="username" id="username" value="
<?php 
if (isset($_POST['username'])) echo htmlentities($_POST['username']); 
else echo "LOGIN";
?>" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T17:19:21.613

如果我理解正确，您只希望用户名文本框的默认值为“LOGIN”，然后当用户输入他们的信息时它会改变？如果这是正确的，那么只需将值更改为 LOGIN。如果我误解了您，请尝试进一步澄清您想要完成的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T17:20:25.223

```
$val = isset($_POST['username']) ? htmlentitie($_POST['username']) : 'LOGIN';
<input type="text" value="<?=$val?>" /> 
```

应该做你正在寻找的东西。

# internet-explorer-8 - 为什么 Internet Explorer 拒绝我的带有空格的文件名？

> ID：10901804
> 
> 赞同：2
> 
> 时间：2012-06-05T17:15:56.827
> 
> 标签：internet-explorer-8, filenames

我有一堆 pdf 文件，它们的名称中有空格，它们显示在 iFrame 以及使用 window.open 的新窗口中（不是同时）。

两者都可以正常工作，除了 IE8 会引发文件未找到错误。删除空格，它们在 IE8 中工作正常。

我需要保留文件名中的空格，所以我尝试使用 escape(filename); 它用转义键 %20 替换空格。这也不起作用。

我已经尝试了所有我能想到的或谷歌可以让 IE8 接受空间的方法，但没有任何接缝可以工作。

有什么建议么？我可以删除空格进行测试，但在现实世界中，从文件系统中的 pdf 文件的名称中删除空格目前不是一种选择。

这是我正在使用的代码

```
var file = "pdfs/this file name has spaces.pdf";
file = escape(file);  //this does not fix the problem

//to display in a new window or tab...
window.open(file);

//to display in my iFrame...
$('.viewer .ifrm').attr('src', file); 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T17:17:09.163

使用 encodeURI 而不是转义

# java - java.lang.OutOfMemory: GC Overhead limit exceeded 与 java.lang.OutOfMemory: Multicast listener 有什么区别

> ID：10901808
> 
> 赞同：3
> 
> 时间：2012-06-05T17:16:29.527
> 
> 标签：java, glassfish, apache-poi, application-server

我正在调查我们的应用程序的缓慢情况，最终导致集群环境中的一个实例出现故障。几周前，我遇到了以下错误：

```
[#|2012-05-11T14:12:03.460-0400|SEVERE|sun-appserver2.1|javax.enterprise.system.container.web|_ThreadID=89;_ThreadName=httpSSLWorkerThread-7311-0;_RequestID=7afaee11-c970-40dd-b5fb-29498af8e512;|StandardWrapperValve[LoginModule]: PWC1406: Servlet.service() for servlet LoginModule threw exception
java.lang.OutOfMemoryError: GC overhead limit exceeded 
```

我认为由于超过了 GC 开销限制，这与我的应用程序有关。有一份报告非常详细地使用 POI 将记录放入 excel 中，所以我认为这可能是导致它的原因。作为短期修复，在下一个版本之前，我们通知 1 位有权访问此报告的用户不要访问它。

然而，今天，两周后，其中一个实例再次出现故障，在搜索日志时，我发现以下错误：

```
[#|2012-06-05T10:31:36.532-0400|SEVERE|sun-appserver2.1|net.jxta.impl.endpoint.mcast.McastTransport|_ThreadID=141;_ThreadName=IP Multicast Listener for mcast://228.8.10.93:31676;_RequestID=90caf76e-b740-4f11-8ffe-8ab88a740569;|Uncaught Throwable in thread :IP Multicast Listener for mcast://228.8.10.93:31676
java.lang.OutOfMemoryError: Java heap space
|#] 
```

请注意`GC overhead limit exceeded`与. 的区别`Java heap space`。我试图找出我今天看到的错误是否是由用户访问报告的相同原因引起的，但是，我相信如果是这样的话，我会看到`GC overhead limit exceeded`。

我相信今天的错误更多的是与服务器的配置有关。

请帮助澄清。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T17:23:28.700

第一个错误“GC Overhead”意味着 GC 占用了大部分 CPU 周期，主要是指 98% 或 99%，并且在每次运行中释放的内存非常少 1-2%。

第二个错误意味着您的应用程序在某些处理期间内存不足。

此外，您对 POI 使用过多内存的调查是正确的，POI 有额外内存消耗的历史。

遇到了[关于 SO 的非常好的讨论](https://stackoverflow.com/questions/1393486/what-does-the-error-message-java-lang-outofmemoryerror-gc-overhead-limit-excee)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T17:24:18.260

[这里](https://stackoverflow.com/q/1393486/1079354)有一个关于类似主题的很好的讨论。基本上是因为GC消耗了很多时间，但回收的内存很少。

# vb.net - '一维字节数组'类型的值不能转换为整数，有什么想法吗？

> ID：10901817
> 
> 赞同：0
> 
> 时间：2012-06-05T17:16:52.287
> 
> 标签：vb.net, pointers, readprocessmemory

我以前使用以下代码从指针和偏移量中读取内存地址，但是现在我再次使用它并且无法弄清楚我上次是如何工作的，我收到错误“值“字节的一维数组”类型的无法转换为整数”，突出显示 ReadProcessMemory 调用中的 BytesAtAddress 变量。

我已经坚持了大约 25 分钟，任何人都可以向我指出问题所在，因为我确信这很简单。

谢谢！

```
Public Shared Function ReadPointerFromMemory(ByVal BaseAddress As Integer, ByVal PointerOffset As Integer, ByVal BytesToRead As Integer, ByVal pHandle As IntPtr) As Integer
    Dim BytesAtAddress As Byte() = New Byte(BytesToRead - 1) {}
    Dim BytesRead As Integer
    Dim MemoryBase As Integer
    Dim ReturnVal As Integer
    ReadProcessMemory(pHandle, CType(BaseAddress, IntPtr), BytesAtAddress, BytesToRead, BytesRead)
    MemoryBase = BitConverter.ToInt32(BytesAtAddress, 0)
    MemoryBase += PointerOffset
    ReadProcessMemory(pHandle, CType(MemoryBase, IntPtr), BytesAtAddress, BytesToRead, BytesRead)
    ReturnVal = BitConverter.ToInt32(BytesAtAddress, 0)
    Return ReturnVal
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T18:56:36.677

我假设您使用`ReadProcessMemory`来自：http: [//msdn.microsoft.com/en-us/library/ms886794.aspx](http://msdn.microsoft.com/en-us/library/ms886794.aspx)作为参考。

```
BOOL ReadProcessMemory( 
  HANDLE hProcess, 
  LPCVOID lpBaseAddress, 
  LPVOID lpBuffer, 
  DWORD nSize, 
  LPDWORD lpNumberOfBytesRead 
); 
```

因此，根据错误，您需要的是缓冲区上的指针而`BytesAtAddress`不是数组本身。您也可以更改`MemoryBase As Integer`为`MemoryBase As IntPtr`和。或者甚至更好地将所有需要的变量 ByRef 而不是 ByVal 传递给您的函数。 `ReturnVal As Integer``ReturnVal As IntPtr`

# facebook-graph-api - C# Facebook SDK 和自动分页

> ID：10901818
> 
> 赞同：1
> 
> 时间：2012-06-05T17:16:59.427
> 
> 标签：facebook-graph-api, facebook-c#-sdk

如果我请求具有大量对象的东西（例如，如果您在相册中有 10000 个朋友或 10000 张照片），C# Facebook SDK 是否会自动为我跟随“Paging:Next”链接，或者有什么我需要去做？

我查看了他们的代码，没有看到任何关于分页的提及，但可能会错过它。

请注意，我不是在谈论批处理请求；我说的是一个简单的 api.Get("/me/friends") ，其中 Facebook 认为有太多对象无法放入单个响应中。不幸的是，我没有足够的帐户来测试结果...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T17:33:35.447

无论 Facebook 使用哪个 SDK，分页始终取决于 SDK 的用户。我认为他们在添加它时没有那么有创意，或者也许有一些他们没有的法律原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T21:24:48.880

这是我最终使用的代码。因为我从专辑的“计数”中知道有多少张图片，所以我只是分批请求它们，直到达到这个数量。对于您事先不知道要返回多少对象的情况，这会比较棘手，但我还没有遇到这种需要。

```
const long maxBatchSize = 50;
for (long q = 0; q < album.Count; q += maxBatchSize)
{
    var facebook = new FacebookClient(FacebookSession.AccessToken);
    facebook.GetCompleted += new EventHandler<FacebookApiEventArgs>(GetPhotosCallback);

    long take = album.Count - q;
    if (take > maxBatchSize)
        take = maxBatchSize;

    dynamic parameters = new ExpandoObject();
    parameters.limit = take;
    parameters.offset = q;

    facebook.GetAsync("/" + album.Id + "/photos", parameters, null);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-13T02:32:01.540

如果您查看 Facebook 返回的数据，结果中通常会有分页元素。分页元素包含下一个和上一个 url。这些 URL 由 Facebook 创建，“下一个”可用于检索更多信息。以下是 /me/posts -request 的令牌示例：

```
{
 data: [ ... ],
 "paging": {
    "previous": "https://graph.facebook.com/6644332211/posts?limit=25&since=1374648795", 
    "next": "https://graph.facebook.com/6644332211/posts?limit=25&until=1374219441"
  }
 } 
```

如果您想自动检索所有项目，您可以从“下一个”url 中选择相关参数并将其传递给 Facebook SDK get 方法。

您需要选择的相关参数取决于您检索的信息类型。在帖子中，您只有“直到”，对于签入，我还可以看到称为 pagingtoken 的东西。

# java - xml转换的堆栈溢出异常

> ID：10901819
> 
> 赞同：5
> 
> 时间：2012-06-05T17:17:08.267
> 
> 标签：java, xml, xslt, stack-overflow

我在**sun solaris**中托管的**weblogic server 10g**中的 xml 转换中收到以下 java stackoverflow 错误。这只发生在特定的 xml 转换中，其余所有 xml 转换都可以正常工作。使用的 xsl 文件也不是很大。

 **我正在使用 rt.jar 中提供的 Transformation api，但是从`com.sun.org.apache.xalan.internal.xsltc.dom.SimpleResultTreeImpl`我没有打包在我的应用程序中的 xalan apache package() 中得到了这个错误。

*另一个有趣的事情是，当我在 Windows 机器上托管的 weblogic 10g 服务器中运行应用程序时，我没有得到这个异常，我只在 sun solaris 中得到这个。*

谁能让我知道为什么会出现此错误。

你能让我知道哪个 jar 文件导致了异常吗？weblogic 会有 xalan.jar 吗？如果是这样，我可以尝试升级 jar 文件，看看它是否工作？

```
Caused by: java.lang.StackOverflowError
    at com.sun.org.apache.xalan.internal.xsltc.dom.SimpleResultTreeImpl.characters(SimpleResultTreeImpl.java)
    at com.sun.org.apache.xalan.internal.xsltc.dom.SimpleResultTreeImpl.copy(SimpleResultTreeImpl.java:438)
    at com.sun.org.apache.xalan.internal.xsltc.runtime.BasisLibrary.copy(BasisLibrary.java:1317)
    at GregorSamsa.replace()
    at GregorSamsa.replace()
    at GregorSamsa.replace()
    at GregorSamsa.replace()
    at GregorSamsa.replace()
    at GregorSamsa.replace()
    at GregorSamsa.replace()
    at GregorSamsa.replace()
    at GregorSamsa.replace()
    at GregorSamsa.replace()
    at GregorSamsa.replace()
    at GregorSamsa.replace()
    at GregorSamsa.replace() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T18:17:49.997

基于对`GregorSamsa.replace()`. 它在 Windows 而不是 Solaris 上工作的事实可能是由于 JVM 的不同实现，或者更有可能是堆栈大小的默认 JVM 选项。

下面是 JVM[堆栈大小选项的作用](https://stackoverflow.com/questions/4967885/jvm-option-xss-what-does-it-do-exactly)。

这是[在 Eclipse 中增加堆栈大小的方法。](https://stackoverflow.com/questions/2127217/java-stack-overflow-error-how-to-increase-the-stack-size-in-eclipse)

以下是如何通过命令行[设置堆栈大小](https://stackoverflow.com/questions/3700459/how-to-increase-to-java-stack-size)以及有关此主题的更多讨论：

```
$ javac TT.java
$ java -Xss4m TT 
```

-Xss4m = 4 兆
-Xss1024k = 1024kb

如果您想从应用程序中启动一个新线程，并且仅为该线程指定堆栈大小，请查看[Thread 类的构造函数](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html)，包括：

```
public Thread(ThreadGroup group, Runnable target,String name,long stackSize) 
```**

# c - 为什么我的 Windows 程序试图调用 main() 而不是 WinMain()？

> ID：10901825
> 
> 赞同：0
> 
> 时间：2012-06-05T17:17:20.990
> 
> 标签：c, winapi, visual-c++

我正在尝试向 OpenGL 迈出第一步。

但是，由于尝试调试解决方案时出现此错误，它似乎不会发生：

> MSVCRTD.lib(crtexe.obj)：错误 LNK2019：*函数 _* _tmainCRTStartup中引用的未解析的外部符号主

我知道编译器想看到`int main() ...`，但它没有看到 WinMain 调用吗？

这是代码：

```
#include <Windows.h>
#include <stdio.h>
#include <stdlib.h>

typedef struct {
    HWND hWnd;
} Glab_t;

static Glab_t glab;

char szClassName[ ] = "GLab";

static LRESULT CALLBACK WindowProcedure (HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam) {
    switch (message) {
        case WM_DESTROY:
            PostQuitMessage (0);
            break;
        default:
            return DefWindowProc (hwnd, message, wParam, lParam);
    }

    return 0;
}

int WINAPI WinMain (HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow) {

    MSG messages;
    RECT rect;
    WNDCLASSEX wndClass;
    int screenWidth, screenHeight;
    int x, y, w, h;

    screenWidth = GetSystemMetrics(SM_CXSCREEN);
    screenHeight = GetSystemMetrics(SM_CYSCREEN);

    rect.left = (screenWidth - 582) / 2;
    rect.top = (screenHeight - 358) / 2;
    rect.right = rect.left + 582;
    rect.bottom = rect.top + 358;

    x = rect.left;
    y = rect.top;
    w = 640;
    h = 480;

    wndClass.hInstance = hInstance;
    wndClass.lpszClassName = szClassName;
    wndClass.lpfnWndProc = WindowProcedure;
    wndClass.style = CS_DBLCLKS;
    wndClass.cbSize = sizeof (WNDCLASSEX);
    wndClass.hIcon = LoadIcon (NULL, IDI_APPLICATION);
    wndClass.hIconSm = LoadIcon (NULL, IDI_APPLICATION);
    wndClass.hCursor = LoadCursor (NULL, IDC_ARROW);
    wndClass.lpszMenuName = NULL;
    wndClass.cbClsExtra = 0;
    wndClass.cbWndExtra = 0;
    wndClass.hbrBackground = (HBRUSH)(COLOR_BTNFACE + 1);

    if (!RegisterClassEx (&wndClass)) {
        return 0;
    }

    glab.hWnd = CreateWindowEx (
           0,
           szClassName,
           "GLab - OpenGL",
           WS_OVERLAPPEDWINDOW,
           x,
           y,
           w,
           h,
           HWND_DESKTOP,
           NULL,
           hInstance,
           NULL 
           );

    ShowWindow (glab.hWnd, nCmdShow);
    while (GetMessage (&messages, NULL, 0, 0)) {
        TranslateMessage(&messages);
        DispatchMessage(&messages);
    }

    return true;
} 
```

我正在使用 MS Visual C++ 2010 Express。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T17:21:09.030

您有一个子系统项目，`Console`而不是`Windows`. 从您的项目属性中更改它，它将起作用。那在*Linker -> System -> SubSystem*中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T17:24:45.673

You have to change the properties for the project; a `Console` project will generally look for a main() function, whereas a `Windows` project looks for WinMain() instead.

# java - 使用私有成员或公共访问器的方法

> ID：10901829
> 
> 赞同：7
> 
> 时间：2012-06-05T17:18:09.947
> 
> 标签：java, coding-style

我意识到这可能*无法回答*，但我正在寻找关于是否直接使用私有成员或类方法中的公共访问器的某种指导。

例如，考虑以下代码（在 Java 中，但在 C++ 中看起来非常相似）：

```
public class Matrix {

    // Private Members
    private int[][] e;
    private int numRows;
    private int numCols;

    // Accessors
    public int rows(){ return this.numRows; }
    public int cols(){ return this.numCols; }

    // Class Methods
    // ...
    public void printDimensions()
    {
        // [A] Using private members
        System.out.format("Matrix[%d*%d]\n", this.numRows, this.numCols);

        // [B] Using accessors
        System.out.format("Matrix[%d*%d]\n", this.rows(), this.cols());
    } 
```

该`printDimensions()`函数说明了两种获取相同信息的方法，[A] 使用私有成员 ( `this.numRows, this.numCols`) 或 [B] 通过访问器 ( `this.rows(), this.cols()`)。

一方面，您可能更喜欢使用访问器，因为您不可能无意中更改私有成员变量的值。另一方面，您可能更喜欢直接访问私有成员，希望它会删除不必要的函数调用。

我想我的问题是，是事实上的标准还是首选？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T17:22:34.167

这是一种风格的召唤。我更喜欢使用访问器，因为恕我直言，函数调用开销足够小，在大多数情况下并不重要，并且这种用法保留了数据抽象。如果我以后想改变数据的存储方式，我只需要改变访问器，而不是寻找我接触变量的所有地方。

不过，我对此感觉并不强烈，如果我认为我有充分的理由，我会打破这个“规则”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T17:41:25.113

恕我直言，访问器更多的是结构和数据管理问题，而不是访问器本身。有时，您需要在返回某些数据之前对其进行预处理。想想这个例子：

```
public class Foo {

    private List<Bar> bars = null;

    //Methods and stuff

    public List<Bar> getBars() {
        if(bars == null)
            bars = SomeClass.loadBars();
            // You can also use 
            // setBars(SomeClass.loadBars());
        return bars;
    }

} 
```

在这种情况下，您的 getter 不仅包装您的字段，而且在您调用它时返回一个已初始化的字段。在类中使用访问器与对局外人具有相同的好处，您可以将自己从字段的特定细节中抽象出来，并且可以在处理后获得它。

另一方面，如果您的字段是直接返回的（例如，一个字符串），您是否使用 get 并不重要，但您可能希望使用 get 来尊重代码中的标准。

最后，这一切都归结为编码风格。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T17:40:02.917

我有其他对象，包括对象的子类，使用访问器，但让对象本身使用字段。这样，内部结构和与世界其他地方的接口之间就有了明显的区别。对自身隐藏类的内容似乎是不必要的，并且可能会造成混淆。如果某些东西真正受益于将其实现隐藏在对象的其他部分中，那么将其分解为一个单独的对象。

# android - android webview 在带有 websockets 的页面上不起作用

> ID：10901835
> 
> 赞同：0
> 
> 时间：2012-06-05T17:19:01.793
> 
> 标签：android, webview

我在 spring mvc 上有一个聊天 Web 应用程序。我使用 android webview 进入使用 websockets 的聊天页面。我可以在 android webview 上看到该页面，但是当我键入并单击发送时它没有响应。当我使用码头将其部署在浏览器上时，此页面工作正常。

```
 webview= (WebView)findViewById(R.id.webscreen);
        webview.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);
        webview.getSettings().setJavaScriptEnabled(true);
        webview.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);              
        webview.getSettings().setSupportMultipleWindows(false);
        webview.getSettings().setSupportZoom(false);       
        webview.setVerticalScrollBarEnabled(true);
        webview.setHorizontalScrollBarEnabled(false);
        webview.setClickable(true);
        webview.setLongClickable(true);        
        webview.setBackgroundColor(0);
        webview.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);
        webview.getSettings().setLightTouchEnabled(true);     
        webview.loadUrl("http://10.0.2.2:8080/mychat/chatwindow");
        webview.setWebViewClient(new DroidWebViewClient()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T17:27:10.600

如果你在网上四处看看，你会看到很多关于[Android 网络浏览器不支持套接字](http://mobilehtml5.org/)的信息。`WebView`没有什么不同。

# html - SVG 图像在服务器上显示为损坏的图像

> ID：10901836
> 
> 赞同：16
> 
> 时间：2012-06-05T17:19:11.410
> 
> 标签：html, svg

我在 Apache 上使用简单的 img 标签显示 .svg 时遇到了一个奇怪的问题。

在我的本地计算机上，图像是可见的。在我的 mt VPS 上，图像显示为断开的链接。当我右键单击损坏的图像链接和“打开图像”时，它会正确显示图像（告诉我路径正确）。

我的 HTML 如下所示：

```
<img width="32" height="32" alt="icon" id="create-wheel-icon2" src="public/assets/img/svg/idea_vect.svg" style="left: 230px; top: 57px; opacity: 1;"> 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-21T15:08:22.503

罗伯特上面提供的链接中的信息对我有用：

具有以下规则的 .htaccess 文件：

```
AddType image/svg+xml svg svgz
AddEncoding gzip svgz 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-05T17:31:37.583

很可能您没有使用正确的 mime 类型提供图像。这里有一些关于如何做到这一点的信息：http: [//kaioa.com/node/45](http://kaioa.com/node/45)

你总是可以先尝试让一个 png 文件工作，以确保你放置图像的位置不是很明显。

# cordova - iOS PhoneGap 应用程序可以在通话后返回应用程序吗？

> ID：10901837
> 
> 赞同：1
> 
> 时间：2012-06-05T17:19:13.057
> 
> 标签：cordova

我有一个混合的 PhoneGap 应用程序，它允许用户拨打电话号码。这切换到电话应用程序。当用户结束通话时，他被困在电话应用程序中，并且期望的行为是自动返回到实际应用程序。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T14:19:11.250

而不是使用 tel: 意图，您必须使用 telprompt 意图。这会提示用户他将要拨打的号码，并可选择拨打或取消。例子：

```
window.location = 'telprompt://' + phoneNumber 
```

当用户挂断时，他会返回到应用程序。

# c# - MySQL 插入，如果不存在/忽略

> ID：10901841
> 
> 赞同：0
> 
> 时间：2012-06-05T17:19:22.050
> 
> 标签：c#, mysql, insert, exists

所以基本上这是我的表格布局：

```
Type_Of     Agreement
iPad        Heyo! I'm an agreement!
iPod Touch  I'm another agreement! 
```

基本上，我正在构建一个管理员界面，管理员可以在其中添加新类型。我希望它能做到，这样他/她就不能输入已经存在的新类型。基本上，在上面的例子中，如果他们在新类型框中输入“iPad”并按下提交，它将被简单地忽略或抛出错误或其他东西。

这是我现有的 MySQL 语句：

```
INSERT IGNORE INTO agreements (Type_Of, Agreement) VALUES (?, ?)
com.Parameters.AddWithValue("", Request.Form["pies"]);
com.Parameters.AddWithValue("", "Wahey! A sample license!"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T17:33:00.120

（*升级到答案*）

您需要`UNIQUE`在`Type_Of`. 如[手册中所述](http://dev.mysql.com/doc/en/create-index.html)：

> 索引创建一个`UNIQUE`约束，使得索引中的所有值都必须是不同的。如果您尝试使用与现有行匹配的键值添加新行，则会发生错误。对于所有引擎，`UNIQUE`索引允许`NULL`包含多个值的列`NULL`。如果为`UNIQUE`索引中的列指定前缀值，则列值在前缀中必须是唯一的。

所以：

```
ALTER TABLE agreements ADD UNIQUE INDEX (Type_Of); 
```

# jquery - 获取带有类的 div 内的标签

> ID：10901844
> 
> 赞同：0
> 
> 时间：2012-06-05T17:19:33.297
> 
> 标签：jquery

我有以下html：

```
<div class="Checkbox">
  <img src='../tema/default/images/CheckVerde.png' onclick="Visibilidade('41767', 'img08ptNA_41767_0', '10')" style='cursor:pointer;margin: 4px;text-align:center;' ID='img08ptNA_41767_0' />
</div> 
```

我需要通过 jQuery 获取 img 标签的 src 值。img ID 是动态的

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T17:23:26.200

`$(".Checkbox img").prop("src");`

将根据提供的 html 工作。当然，如果`div`一个 div 中有多个元素或多个图像，则可能必须使用类似`eq()`通过索引获取值的方法。

例如：

`$(".Checkbox:eq(0) img").prop("src");`- 将获得第一个`div.Checkbox`图像源。

请记住，如果选择器中有多个图像，则`.prop()`方法仅返回第一个的值 - [http://api.jquery.com/prop/](http://api.jquery.com/prop/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T17:20:17.730

`$('.Checkbox>img').prop('src');`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T17:31:04.633

```
$('.Checkbox').find('img').prop('src') 
```

这可以获取该类中所有可用的 img 标签的 src 属性。

# delphi - 实例/类字段是否应该在 Delphi 中添加前缀？

> ID：10901845
> 
> 赞同：7
> 
> 时间：2012-06-05T17:19:39.003
> 
> 标签：delphi, coding-style

正如鲍勃叔叔的清洁代码中所说，我们不应该为类成员添加前缀。尽管我完全同意这些论点，特别是关于 Delphi，但我们如何区分私有字段和公共属性？

在 Java 中这不是问题，因为没有属性。

[微软还在其编码指南](http://msdn.microsoft.com/en-us/library/ms229012)中以粗体字推荐这种做法。他们通过使用小写的私有字段和大写的公共属性来区分。

除此之外，我们没有像其他 IDE 那样对字段成员进行语法高亮（包括免费和开源 IDE...）

那么，我们应该为所有字段添加前缀吗？或者只是与公共财产发生冲突的那些？

**编辑：**

我知道 Delphi 的编码标准是在字段前加上`F`，但这正是 Clean Code 中所说的不好的做法。这是否意味着 Delphi 代码不能像用其他语言编写的代码那样“干净”？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-05T17:24:52.440

Delphi 方法是在它们前面加上`F`：

```
strict private
  FField: Integer;
public
  property Field: Integer read FField; 
```

（请参阅[Object Pascal 样式指南](http://edn.embarcadero.com/article/10280#3.3)。）

# c# - 当第二次修改等于原始值时，TextChanged 事件不会触发

> ID：10901858
> 
> 赞同：0
> 
> 时间：2012-06-05T17:20:32.100
> 
> 标签：c#, asp.net, .net, user-controls, viewstate

我有一个 _TextChanged 事件，它可以正常工作，除非在特定情况下可以复制如下：

1.  用户修改文本（事件正确触发）
2.  用户再次修改文本以匹配原始值（事件不触发）

我可以通过在 ascx 页面上为更新面板打开 Viewstate 来让 _TextChanged 事件在我的开发框上工作，但是当我将它移动到服务器时，如果我切换用户控件然后切换回来，我会收到一个错误，即 viewstate 失败到那个页面。进入更新面板的控件是在代码后面动态构建的，并在每次回发时重新构建——这适用于其他所有回发，所以我认为问题不在于控件。

此外，打开视图状态会使页面运行速度非常慢，因此这不是一个理想的解决方案。

最后，_TextChanged 事件适用于所有更改，*除非*恢复为原始值。

谁能告诉我为什么在这种特定情况下事件不会触发，以及如何解决这个问题？

在后面的代码中创建文本框：

```
 TextBox annualHoursTextBox = new TextBox();
 annualHoursTextBox.ID = string.Format("bundle{0}_annualHoursTextBox{1}", bundle.BundleNbr, parentItem.LaborItemNbr);
 annualHoursTextBox.CssClass = "";
 annualHoursTextBox.Columns = 4;
 annualHoursTextBox.Text = childItem == null ? string.Empty : childItem.FTEHours.ToString("F0");
 annualHoursTextBox.AutoPostBack = true;
 annualHoursTextBox.TextChanged += new EventHandler(annualHoursTextBox_TextChanged);

 AsyncPostBackTrigger AHtrigger = new AsyncPostBackTrigger();
 AHtrigger.ControlID = annualHoursTextBox.UniqueID;
 AHtrigger.EventName = "TextChanged";
 upPricingSheet.Triggers.Add(AHtrigger);

 //snip

 //add some attributes for reference on the events
 annualHoursTextBox.Attributes["othercontrol"] = tasksPerYearTextBox.UniqueID;
 annualHoursTextBox.Attributes["nextcontrol"] = benefitsTextBox.UniqueID;
 annualHoursTextBox.Attributes["targetTBcontrol"] = taskTimeTextBox.UniqueID;
 annualHoursTextBox.Attributes["targetDDLcontrol"] = taskTimeUOMDropDown.UniqueID; 
```

事件处理程序：

```
protected void annualHoursTextBox_TextChanged(object sender, EventArgs e)
{
    TextBox ah = sender as TextBox;
    TextBox other = Page.FindControl(ah.Attributes["othercontrol"]) as TextBox;

    if ((!String.IsNullOrEmpty(ah.Text)) && (!String.IsNullOrEmpty(other.Text))) 
    {
        TextBox next = Page.FindControl(ah.Attributes["nextcontrol"]) as TextBox;
        TextBox targetTB = Page.FindControl(ah.Attributes["targetTBcontrol"]) as TextBox;
        DropDownList ddl = Page.FindControl(ah.Attributes["targetDDLcontrol"]) as DropDownList;
        Double TasksPerSecond;

        TasksPerSecond = CalculateTimePerTask(ah.Text, other.Text);
        string TimeUnit;
        double Time;

        if (TasksPerSecond < 60)
        {
            TimeUnit = "Seconds";
            Time = TasksPerSecond;
        }
        else if (TasksPerSecond < 3600)
        {
            TimeUnit = "Minutes";
            Time = (TasksPerSecond / 60);
        }
        else
        {
            TimeUnit = "Hours";
            Time = (TasksPerSecond / 60 / 60);
        }

        //Enter the time in the appropriate textbox
        targetTB.Text = Time.ToString("F2");

        //select the appropriate item from the ddl
        ListItem i = ddl.Items.FindByText(TimeUnit);

        if (i != null)
        {
            ddl.SelectedItem.Selected = false;
            i.Selected = true;
        }
    }
} 
```

ASPX 页面：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/MasterPage.master"
AutoEventWireup="true" CodeFile="Solution.aspx.cs" Inherits="Solution" %>

<%@ Register Src="fragments/solutionRecommended.ascx" TagName="solutionRecommended"
TagPrefix="uc1" %>
<%@ Register Src="fragments/solutionPricingSheet.ascx" TagName="solutionPricingSheet"
TagPrefix="uc2" %>
<%@ Register Src="fragments/solutionSuggested.ascx" TagName="solutionSuggested" TagPrefix="uc3" %>
<%@ Register Src="fragments/solutionSummary.ascx" TagName="solutionSummary" TagPrefix="uc4" %>
<%@ Register Src="fragments/ucItemFilterSearch.ascx" TagName="ucItemFilterSearch"
TagPrefix="uc5" %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="Server">
<script type="text/javascript">
    function addItemToBundle(postUrl, redirectUrl) {
        $.post(postUrl);
        window.location = redirectUrl;
        //  window.location = url;
    }

</script>
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="Server">
<asp:HiddenField ID="hfStepNbr" runat="server" />
<asp:Panel ID="pnlStepMessage" runat="server" Visible="false" CssClass="padding10">
    <h3 class="placeholder">
        <asp:Label ID="lblMessage" runat="server" /></h3>
</asp:Panel>
<div class='elev8form' id="mainDiv" runat="server">
    <h3 class='header'>
        Solutions</h3>
    <div id="tabs">
        <div class='tab'>
            <asp:LinkButton ID="lbSuggested" runat="server" Text="Select Items" data-step="1"
                OnClick="lbTab_Click" CausesValidation="false"></asp:LinkButton>
        </div>
        <div class='tab'>
            <asp:LinkButton ID="lbPricing" runat="server" Text="Pricing Worksheet" data-step="2"
                OnClick="lbTab_Click" ></asp:LinkButton>
        </div>
        <div class='tab'>
            <asp:LinkButton ID="lbRecommendedSolutions" runat="server" Text="Recommended Solutions"
                data-step="3" OnClick="lbTab_Click" CausesValidation="false"></asp:LinkButton>
        </div>
        <div class='tab'>
            <asp:LinkButton ID="lbSummary" runat="server" Text="Solutions Summary" data-step="4"
                OnClick="lbTab_Click" CausesValidation="false"></asp:LinkButton>
        </div>
    </div>
    <div id="solutions-body">
        <asp:MultiView ID="mltSolution" runat="server">
            <asp:View ID="viewSuggested" runat="server">
                <uc3:solutionSuggested ID="solutionSuggested1" runat="server" RedirectUrl="~/portal/elev8/solution.aspx" />
            </asp:View>
            <asp:View ID="viewPricing" runat="server">
                <uc2:solutionPricingSheet ID="solutionPricingSheet1" runat="server" />
            </asp:View>
            <asp:View ID="viewRecommended" runat="server">
                <uc1:solutionRecommended ID="solutionRecommended1" runat="server" />
            </asp:View>
            <asp:View ID="viewSummary" runat="server">
                <p style="font-size: 14px;">
                    Text here 
                </p>
                <uc4:solutionSummary ID="solutionSummary1" runat="server" />
            </asp:View>
        </asp:MultiView>
    </div>
</div>
<script type="text/javascript">
    function pageLoad() {
        $(function () {

            var maxChannelHeight;

            var items = $('.channel');

            for (var counter = 0; counter < items.length; counter++) {
                var channel = items[counter];

                var channelHeight = $(channel).height();

                maxChannelHeight = maxChannelHeight > channelHeight ? maxChannelHeight : channelHeight;
            }

            $('.channel').height(maxChannelHeight);

            $("#priceing-sheet-save-button *").click(function () {
                window.scrollTo(0, 0);

            });
        });
    }

</script> 
```

ASCX 页面：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="solutionPricingSheet.ascx.cs"
Inherits="solutionPricingSheet" %>

<asp:UpdateProgress ID="upProgressRecSolution" runat='server' AssociatedUpdatePanelID="upPricingSheet">
<ProgressTemplate>
    <div style="position: absolute; z-index: 2000; left: 45%; display: inline; width: 100px;"
        class="elev8form">
        <asp:Image ID="Image1" runat='server' ImageUrl="~/portal/img/ajax-loader-big.gif" />
    </div>
</ProgressTemplate>
</asp:UpdateProgress>
<div id="pricing-sheet-wrapper">
<p class='left'>
    More text</p>
<asp:Panel ID="pnlSaveMessage" runat="server" Visible="false" CssClass="save-message">
    <span>Item prices saved</span>
</asp:Panel>
<div class='export'>
    <span class='bigbutton'>
        <asp:LinkButton ID="btnExport" runat='server' Text="Export to Excel" OnClick="btnExport_Click" />
    </span>
</div>
<asp:UpdatePanel ID="upPricingSheet" runat="server" UpdateMode="Conditional" ViewStateMode="Disabled">
    <ContentTemplate>
        <div id="pricing-sheet">        
            <asp:PlaceHolder ID="phContent" runat="server"></asp:PlaceHolder>
            <asp:PlaceHolder ID="opportunityPlaceHolder" runat="server" />
            <div class='save export'>
                <div>
                    <div id="pageValidationError" class="validationMessage">
                       * Changes not saved. Review all entries for validation messages. Required fields marked with an asterisk.
                    </div>
                </div>
                <%--<asp:HiddenField ID="hf" runat="server" value="0" />--%>
                <center>
                    <span id="priceing-sheet-save-button">
                    <asp:Button ID="btnSave" runat="server" Text="Save All Prices" SkinID="redbutton"
                        OnClick="btnSave_Click" CausesValidation="true" />
                    </span>
                </center>
            </div>
        </div>
        <script type="text/javascript">
            function pageLoad() {

                $("#tabs .tab a").click(function () {
                    $("#<%= btnSave.ClientID%>").click();
                });
            }
        </script>
    </ContentTemplate>
</asp:UpdatePanel>
</div>
    <script type="text/javascript">
$(document).ready(function () {
    $('.validationMessage').hide();

    $('#<%= btnSave.ClientID %>').click(function () {
        if (Page_IsValid == false) {
            $('.validationMessage').show();
            return false;
        }
    });

    $('input[type=text]').blur(function () {
        if (Page_IsValid == false) {
            $('.validationMessage').show();
            return false;
        }
        else {
            $('.validationMessage').hide();
        }
    })
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T21:54:05.250

这是预期的行为 - 事件被调用`OnTextChanged`（与原始不同）而不是`OnTextTyped`（输入的任何文本），因为您必须处理此事件（即使没有输入任何内容也会触发）：

`OnBlur="__doPostBack(this.id, '');"`

**更新：**实际上它非常简单，因为您使用的是 ajax，所以您的文本框`.defaultValue` 在回发之间没有改变，只有`.value`是 - 所以要么`OnBlur`按照我告诉你的方式使用，要么在每次回发时将 javascript 更改为：`.defaultValue`http [://www.w3schools .com/jsref/prop_text_defaultvalue.asp](http://www.w3schools.com/jsref/prop_text_defaultvalue.asp)`.value`

或者只是将文本框放在 中`UpdatePanel`，它会自行处理它......

**更新 2：**首先，您的代码中没有显示在“UpdatePanel”内的文本框，其次，您有 3 个选择：

a）为了使`OnBlur`方法起作用，删除`AutoPostBack`属性（它是客户端`OnChange`事件），但保留`OnTextChanged`事件（它是服务器端）。

b）要使`ViewState`方法起作用，`ViewStateMode="Enabled"`请在文本框上设置，并确保您`ViewStateMode="Disabled"`在其容器上使用 - 而不是`EnableViewState="False"`.

c) javascript`.defaultValue`方法...

# arrays - 分数取决于数组中的位置

> ID：10901863
> 
> 赞同：0
> 
> 时间：2012-06-05T17:20:49.960
> 
> 标签：arrays, position, elasticsearch

我在 Elastic Search 中为包含数组的文档编制索引。

样本文件：

```
doc1:
{
  ...
  actors: ["Tom Cruise", "Brad Pitt", ...],
  ...
}

doc2:
{
  ...
  actors: ["Brad Pitt", "Tom Cruise", ...],
  ...
} 
```

在此类文档中搜索时，我希望得分取决于数组中的匹配位置，这意味着在示例文档中，搜索“Tom Cruise”应该提升第一个文档`doc1`，因为它的匹配位置是`1`.

我现在能想到的唯一解决方案是添加有限数量的包含第一个演员的字段（大约 5 个），并进行提升，例如：

```
doc1:
{
  ...
  actors: ["Tom Cruise", "Brad Pitt", ...],
  actor1: "Tom Cruise",
  actor2: "Brad Pitt",
  ...
} 
```

随着,等`actor1`的提升。`5``actor2` `4`

你有更好的解决方案来处理这个问题，也许使用`custom_score`？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T23:48:06.420

鉴于这种

```
curl -XPOST localhost:9200/films

curl -XPOST localhost:9200/films/film/1 -d'{
    actors: ["Tom Cruise", "Brad Pitt", "Patrick Stewart", "Christopher Walken"]
}'
curl -XPOST localhost:9200/films/film/2 -d'{
    actors: ["Brad Pitt", "Patrick Stewart", "Tom Cruise", "Christopher Walken"]
}' 
```

然后这个查询

```
{
    "query":{
        "custom_score":{
            "query": {"match_all":{}},
            "script":"length = _source.actors.size();
            found = false; index=0;
            while(!found && index<length){
              if(_source.actors[index] == target){
                found=true;
              }
              else{
                index+=1
              }
            }
            length - index;",
            "params":{
                "target": "Tom Cruise"
            }
        }
    }
} 
```

计算第一部电影的分数为 4，最后一部电影的分数为 2（如果您将其粘贴到 curl 中，我必须删除自定义脚本中的所有换行符）

一些警告：

*   您可能想要一种将偏移量转换为分数的更好方法：此代码返回`length - offset`分数，因此您只能真正比较相同长度的事物
*   看起来`doc.actors`（即索引数据）只有一个按字母顺序排序的数组版本，这显然没有用，所以我不得不使用`_source`它，我认为它要慢得多。如果 custom_score 查询包装了过滤后的查询，则在性能方面可能是可以接受的。

# codeigniter - Codeigniter 分页 - 404 错误

> ID：10901864
> 
> 赞同：2
> 
> 时间：2012-06-05T17:20:51.207
> 
> 标签：codeigniter, codeigniter-2, codeigniter-url

我正在尝试对主页上的博客文章使用分页：

控制器：

```
public function index()
{
   $data['view'] = "home";

    /** Pagination **/
    $config['base_url'] = base_url().'home/';
    $config['total_rows'] = $this->Blog_model->count_articles();
    $config['per_page'] = 2; 
    $config['uri_segment'] = 2;

    $this->pagination->initialize($config);

    $data['paginate'] = $this->pagination->create_links();
    $data['articles'] = $this->Blog_model->get_articles($config['per_page'],$this->uri->segment(2));

    $this->load->view('template', $data);

} 
```

信息检索和分页似乎一切正常，但是，当我单击数字链接或下一个链接时，我收到 404 Not Found 错误。

我假设这与 URI 段有关？

正在加载的 URL 是第二页的[http://www.example.com/home/2](http://www.example.com/home/2)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T00:59:02.207

您还可以添加路由规则，例如：

```
$route['home/(:num)'] = 'yourhomecontroller'; 
```

然后你可以在没有索引或任何方法的情况下使用它，num 告诉它在 home/ 之后将带有数字的任何 url 路由到 home 的索引

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T17:31:51.313

Codeigniter 页面的格式为[http://domain.com/controller/method/arguments](http://domain.com/controller/method/arguments)。
如果您忽略该方法，默认方法将加载，但如果您需要传递一个参数，则必须将方法原样放置。

```
 http://www.example.com/home/index/2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-22T07:22:02.420

控制器代码

```
public function index()
{

$home=$this->uri->segment(2);

$limit_ti=2;
if(!$home):
offset_ti = 0;
else:
$offset_ti = $home;
endif;

$this->load->model('Blog_model');// call model
$this->load->library('pagination'); // call library

$query=$this->Blog_model->get_articles($limit_ti,$offset_ti); // geting aan article 

$total_page = $this->Blog_model->count_articles(); // count row

 /** Pagination **/
 $config['base_url'] = base_url().'index.php/home/'; // assuming you doesn't have htaccess
 $config['total_rows'] =$total_page->num_rows();
 $config['per_page'] = 2; 
 $config['uri_segment'] = 2;

    $this->pagination->initialize($config);
    $data = array('query' => $query,'page'=>$home);

    $data['view'] = "home";
    $this->load->view('template', $data);

} 
```

型号代码

```
function get_articles($limit,$ofset){
$query=$this->db->query("select * from *table* order by id ASC LIMIT $ofset,$limit");
return $query;
}

function count_articles(){
$query=$this->db->query("select * from table");
return $query;
} 
```

在视野中

```
<?php echo $this->pagination->create_links(); // call the pagnation?> 
```

# javascript - 在 Rails 中将数据从 Controller 传递到 Javascript

> ID：10901867
> 
> 赞同：0
> 
> 时间：2012-06-05T17:20:57.223
> 
> 标签：javascript, ruby-on-rails-3

我正在尝试按照此示例[Google Charts Quick Start使用](https://google-developers.appspot.com/chart/interactive/docs/quick_start)[Google Charts API](https://developers.google.com/chart/)

如您所见，数据在 JS 中创建为：

```
data.addColumn('string', 'Topping');
        data.addColumn('number', 'Slices');
        data.addRows([
          ['Mushrooms', 3],
          ['Onions', 1],
          ['Olives', 1],
          ['Zucchini', 1],
          ['Pepperoni', 2]
        ]); 
```

我的问题是：

如果在我的控制器中我得到数据...如何将它传递给我的模板文件的 Javascript？我在 index.html.erb 文件的头部连接了这个示例 JS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T17:22:55.397

您只需要在控制器操作中创建一个 ruby​​ 变量来保存您的值并使用 <%= %> 标签在视图中使用它们的值生成 javascript。

示例：@values 将是名称值集合。

```
data.addColumn('string', 'Topping');
data.addColumn('number', 'Slices');
data.addRows([
    <% @values.each do |v| %>
        ['<%= v.name %>', <%= v.value %>],
    <% end %>
    ]); 
```

使用 js 函数的示例。

index.js：

```
var values;

function InitPage(valuesFromView)
{
    values = valuesFromView;
}

function InitData()
{
    data.addColumn('string', 'Topping');
    data.addColumn('number', 'Slices');
    data.addRows(values);
} 
```

index.html.erb：请注意，当页面加载时，我使用 jquery 来调用 InitPage，如果您不使用 jquery，您的 InitPage 调用可能会在 body 标记或类似内容的 onload 中。

```
<script>
    $(document).ready(function() {
        InitPage([
           <% @values.each do |v| %>
               ['<%= v.name %>', <%= v.value %>],
           <% end %>
        ]);
    });
</script> 
```

# facebook - Facebook 应用程序 url 上的 Fan-Gate + Facebook 选项卡显示空白

> ID：10901868
> 
> 赞同：0
> 
> 时间：2012-06-05T17:21:01.347
> 
> 标签：facebook, tabs, fan-page

我在 Facebook 应用程序上遇到问题。当任何人输入应用程序网址时，我想制作一个扇形门，例如。apps.facebook.com/zoomcompetition/

我无法在选项卡上显示它，因为它显示为空白。但它适用于应用程序网址，所以我想在应用程序指定上添加扇门到 Facebook 页面。这是代码

```
<?php

require 'src/facebook.php';
//require 'fbconfig.php';
require 'functions.php';

// Create An instance of our Facebook Application.
$facebook = new Facebook(array(
'appId' => ***************,
'secret' => **************,
));

// Get the app User ID
$user = $facebook->getUser();
if ($user) {
try {
// If the user is authenticated and logged-in
$user_profile = $facebook->api('/me');
//var_dump($user_profile);
} catch (FacebookApiException $e) {
error_log($e);
$user = null;
}

// If the user is authenticated then generate the variable for the logout URL
if ($user) {
  $logoutUrl = $facebook->getLogoutUrl();

?>

<!-- Insert Logged in HTML here -->
 <a href="<?php echo $logoutUrl; ?>">Logout</a>

 <?php
//Always place this code at the top of the Page

session_start();

if (!isset($_SESSION['id'])) {

// Redirection to login page  facebook

header("location: index.php");

}
echo ' Welcome '.$_SESSION['username'];  // or whatever you want your user to see.

$varri = "http://www.*****.ps";  
?>  

  <iframe src=<?php print $varri; ?> scrolling="auto" width=100% height=100% frameborder="0"> </iframe>

<?php
$user = $facebook->getUser();
if ($user) { 
 $ret_obj = $facebook->api('/me/feed', 'POST',
                                    array(
                                      'link' => 'https://www.************.com',

                                      'picture' => 'http://www.*******************.jpg',
                                      'caption' => "أهلا وسهلا!",

                                      'message' => ' Welcome '.$_SESSION['username'],

                                      'uid'=> $facebook->getUser()
                                 ));
}

?>

<?php
} else {
  $loginUrl = $facebook->getLoginUrl();
}

if (!empty($user_profile )) {

$username = $user_profile['name'];

$uid = $user_profile['id'];

$email = $user_profile['email'];

$user = new User();

$userdata = $user->checkUser($uid, 'facebook', $username,$email,$twitter_otoken,$twitter_otoken_secret);

if(!empty($userdata)){ 
session_start();

$_SESSION['id'] = $userdata['id'];

$_SESSION['oauth_id'] = $uid;

$_SESSION['username'] = $userdata['username'];

$_SESSION['email'] = $email;

$_SESSION['oauth_provider'] = $userdata['oauth_provider'];

//header("Location: home.php");
?>
<!--<!DOCTYPE>
<HTML>
<head>
<script> 
function run(){
    window.location.href = '/facebook/home.php';
}
</script>
</head>
<body onLoad="run()">
</body>
</html> -->
<?php
}

} else {

die("There was an error."); 
}

}

else {
// Generate a session if there is none.

$login_url = $facebook->getLoginUrl(array( 'scope' => ' read_stream, publish_stream, email'));
?>
<!DOCTYPE>
<HTML>
<head>
<script> 
function run(){
    window.location.href = '<?php echo $login_url ?>';
}
</script>
</head>
<body onLoad="run()">
</body>
</html>
<?php

}

?> 
```

您能帮我解决以下问题之一吗：

1.  我需要什么使它不在选项卡上显示“空白”？2- 如果有人直接访问 App url，我如何为特定的 Facebook Pae 制作粉丝门？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T17:37:42.867

> 我需要什么使它不在选项卡上显示“空白”？

生成一些输出而不是什么都没有，我猜……？

> 如果有人直接访问 App url，我如何为特定的 Facebook Pae 设置粉丝门？

您可以通过 JavaScript 从画布页面重定向到特定页面/应用组合（top.location.href = "FB-Address of your page/app id combo"）。要检查您是否在画布页面上，最简单的方法是在画布页面地址中给它一个额外的 GET 参数，然后您可以在代码中对其进行评估。

# vxworks - 如何在 shell 解释器中重复 vxworks 6.9 shell 命令

> ID：10901871
> 
> 赞同：2
> 
> 时间：2012-06-05T17:21:13.610
> 
> 标签：vxworks

是否有一个键可以单步执行过去的 vxworks v6.9 shell 解释器命令，例如 Windows 和 Linux？

'h' 显示命令历史列表。

我该如何逐步完成并选择？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T17:56:45.917

它默认使用 VI 键绑定。

```
esc-K  - go back in history
esc-J  - go forward in history 
```

# javascript - 将“类型”属性添加到由 dll 加载的脚本标记

> ID：10901875
> 
> 赞同：0
> 
> 时间：2012-06-05T17:21:29.937
> 
> 标签：javascript, jquery

我有一个来自 dll 的菜单控件，我只需要引用它。它很旧，因此**注入**页面的脚本标签具有“语言”属性。我正在寻找一种在页面加载后添加“类型”属性的方法。

我试过了：

```
$("script").attr("type", "text/javascript"); 
```

但它不起作用......任何建议，甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T17:46:37.143

我很害怕编辑脚本标签是不可能的。因为这意味着可以卸载脚本，这是不可能的，因为代码已经可以执行。

因此，您可以尝试创建第二个具有正确属性的脚本标签：

```
var script = document.createElement("script");
script.src = "url";
script.type = "text/javascript";
$("head").append(script); 
```

# algorithm - 计算设置了 N 位或更多位的行数

> ID：10901878
> 
> 赞同：1
> 
> 时间：2012-06-05T17:21:37.257
> 
> 标签：algorithm, math, formula, excel-formula, multicast

我目前正在研究 IP 多播，并确定解决 N 主机的所有可能组合所需的唯一多播组的数量。

例如，如果我们有 3 台终端主机（A、B、C），则需要创建总共 4 个多播组才能使这些主机的所有可能组合（AB、AC、BC、ABC）能够被寻址，不包括正在处理 1 或 0 个主机的实例。

据我所知，不包括正在寻址 1 或 0 个主机的实例的唯一组数可以表示为 [2^N - (N + 1)]，其中 N = 主机数。

但是，我有兴趣查看在仅处理至少一定百分比的系统时存在多少组。

例如，如果我们有 5 个系统，我们总共会有 26 个多播组。但是，如果我们排除正在处理 3 个或更少系统的组（仅查看有 4 个或所有系统都已处理的组），我们将只有 6 个组。我可以手动确定这一点，如下所示。

有没有我可以用来计算的公式？因此，如果我们有 N 个主机并且只想创建包含 Y 个或更多主机的多播组，这意味着我们有 Z 个多播组。在上面的例子中，Y = 4，Z被确定为6。

任何帮助或反馈总是很感激

```
1 with 0 bits set
00 - 00000

5 with 1 bit set
01 - 00001
02 - 00010
04 - 00100
08 - 01000
16 - 10000

10 with 2 bits set
03 - 00011
05 - 00101
06 - 00110
09 - 01001
10 - 01010
12 - 01100
18 - 10010
20 - 10100
17 - 10001
24 - 11000

10 with 3 bits set
07 - 00111
11 - 01011
13 - 01101
14 - 01110
19 - 10011
21 - 10101
22 - 10110
25 - 11001
26 - 11010
28 - 11100

5 with 4 bits set
15 - 01111
23 - 10111
27 - 11011
29 - 11101
30 - 11110

1 with 5 bits set
31 - 11111 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T17:48:50.560

```
Sum[i=0 to N] N{C}i = Sum of all combinations of i hosts out of N hosts = 2^N
--- [1] 
Sum[i=0 to Y] N{C}i = Sum of all combinations of multicast groups with Y or fewer hosts, including single hosts. 
--- [2] 
```

您正在寻找 ([1] - [2])。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T17:59:17.430

将其视为组合问题应该会有所帮助。见[http://en.wikipedia.org/wiki/Combination](http://en.wikipedia.org/wiki/Combination)

在 N 位中，您想知道设置了 Y 到 N 位的组合的总和。

像这样的伪代码：

```
for k from Y..N
  total += (N choose k) 
```

哪里`N choose k`可以计算为`N! / (k! * (N-k)!)`

对于您的示例，您将得到：

```
5 choose 4 = 5
5 choose 5 = 1
--------------
     total = 6 
```

# javascript - 如何让我的屏幕等到我的子窗口关闭，在Firefox中

> ID：10901879
> 
> 赞同：0
> 
> 时间：2012-06-05T17:21:39.677
> 
> 标签：javascript, jsp, firefox

问题：应该限制网页提交和移动到下一个，直到子窗口关闭。

技术：jsp

浏览器：火狐。

用于打开的代码：

`retValue = window.open(child_url,',',"Height=400px,Width=670px,status:no,top=190px,left=200px");`

描述：

单击页面中的一个链接并使用 window.open 命令从 Firefox 浏览器打开子窗口。但是在点击链接之后，随着子窗口的打开，主页面也被提交并移动到下一页。

ie 中的相同逻辑可以正常工作。在即使用 showModalDialog() 时没有任何问题。

注意：希望有另一种方式，而不是向页面提交行提供 if 条件。

有人可以帮忙...提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T19:57:22.283

我建议您升级到[jQuery 模态对话框](http://jqueryui.com/demos/dialog/)。它是独立于浏览器的，您的用户将理解他正在与一个模式对话框进行交互，该对话框必须在继续之前关闭。使用单独的窗口或选项卡（您当前的解决方案），用户很容易迷失方向并完全离开浏览器。

# c# - 如何在每个逗号处断开一个字符串？

> ID：10901880
> 
> 赞同：1
> 
> 时间：2012-06-05T17:21:42.930
> 
> 标签：c#, asp.net, .net, string

大家好，我手头有一个问题，我似乎无法弄清楚，我有一个**字符串（C#）**，看起来像这样：

```
string tags = "cars, motor, wheels, parts, windshield"; 
```

我需要在每个逗号处打破这个字符串，并将每个单词本身分配给一个新字符串，例如：

```
string individual_tag = "car"; 
```

我知道我必须在这里做某种循环，但我不确定如何处理这个问题，任何帮助都会非常感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-05T17:23:42.090

不需要循环。只需致电`Split()`：

```
var individualStrings = tags.Split(new string[] { ", " }, StringSplitOptions.RemoveEmptyEntries); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-05T17:44:04.803

您可以使用其中一种[String.Split](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)方法

```
Split Method (Char[])
Split Method (Char[], StringSplitOptions)
Split Method (String[], StringSplitOptions) 
```

让我们尝试第二个选项：我`,`将空格作为拆分字符，然后在每个出现的字符上，输入字符串将被拆分，但结果中可以有空字符串。我们可以使用`StringSplitOptions.RemoveEmptyEntries`参数删除它们。

```
string[] tagArray = tags.Split(new char[]{',', ' '},
                               StringSplitOptions.RemoveEmptyEntries); 
```

或者

```
 string[] tagArray = s.Split(", ".ToCharArray(), 
                               StringSplitOptions.RemoveEmptyEntries); 
```

您可以通过以下方式访问每个标签：

```
foreach (var t in tagArray )
{
    lblTags.Text = lblTags.Text + " " + t; // update lable with tag values 
    //System.Diagnostics.Debug.WriteLine(t); // this result can be see on your VS out put window 
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-05T17:23:20.203

使用[拆分](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)功能将完成您​​的任务...

```
string[] s = tags.Split(','); 
```

或者

[String.Split 方法 (Char[], StringSplitOptions)](http://msdn.microsoft.com/en-us/library/ms131448)

```
char[] charSeparators = new char[] {',',' '};
string[] words = tags.Split(charSeparators, StringSplitOptions.RemoveEmptyEntries); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-05T17:23:41.310

```
string[] words = tags.Split(','); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-06-05T17:23:48.497

您正在寻找 C# [split()](http://msdn.microsoft.com/en-us/library/b873y76a.aspx)函数。

```
string[] tags = tags.Split(','); 
```

**编辑**：

```
string[] tag = tags.Trim().Split(new string[] { ", " }, StringSplitOptions.RemoveEmptyEntries); 
```

您绝对应该使用 Justin Niessner 提供的表格。根据您收到的输入，有两个关键区别可能会有所帮助：

1.  你的`,`s 后面有空格，所以最好分开`", "`

2.  `StringSplitOptions.RemoveEmptyEntries`如果您有一个尾随逗号，将删除可能的空条目。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-06-05T17:25:17.020

## 按空格分割的程序 [C#]

```
using System;
class Program
{
    static void Main()
    {
        string s = "there, is, a, cat";
        string[] words = s.Split(", ".ToCharArray());
    foreach (string word in words)
    {
        Console.WriteLine(word);
    }
    }
} 
```

## 输出

```
there
is
a
cat 
```

## [参考](http://www.dotnetperls.com/split)

# c# - 对 SQL Server 中的用户管理感到困惑

> ID：10901886
> 
> 赞同：1
> 
> 时间：2012-06-05T17:22:04.250
> 
> 标签：c#, sql-server

我创建了一个 WPF 应用程序，它直接（而不是通过服务）连接到位于数据库服务器上的 SQL Server 数据库。现在我需要创建用户管理，每个用户都有自己的登录凭据（不是 Windows 身份验证）。这就是我的想法：

1.  在应用程序安装过程中，数据库管理员将为我提供一个包含足够权限的帐户来创建数据库

2.  使用这些凭据，我将连接到 SQL Server，执行一个脚本来创建数据库，并执行一个脚本来为此数据库创建一个默认管理员用户，该用户将具有完全权限。

3.  我将使用这个新用户来管理我的数据库的所有用户和角色。

4.  对于我的应用程序中的每个用户，我需要在我的数据库中创建一个用户。

问题：

*   这是正确的做法吗？

*   我对如何管理这个感到困惑。如果我的数据库中有一个表用户和角色，并且我还需要在数据库级别创建用户和角色，那么看起来我在复制东西？

或者我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T17:34:17.540

我可能会通过创建角色和通过角色而不是用户名/登录来管理事物来做不同的事情。最好在数据库中创建一个应用程序登录，其凭据将用于您的数据库和应用程序之间的通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T17:27:30.567

只有非常小的重叠。在您的用户表中，您存储与 SQL 帐户匹配的用户名，用户名是唯一的重叠。所有其他信息都存储在用户表中。

我认为这样做没有任何问题，唯一的缺点是您需要拥有一个管理员帐户，在安装它的任何 SQL Server 上都具有相当大的访问权限，但听起来您已经考虑到了考虑。

# dom - 为什么这个 DOM 元素在 Firebug 中显示为灰色并被隔离？

> ID：10901892
> 
> 赞同：0
> 
> 时间：2012-06-05T17:22:46.800
> 
> 标签：dom, backbone.js, firebug, inspector

我有一个将元素附加到 DOM 的 Backbone 应用程序。当我将这些 DOM 元素记录到控制台时，它们有时会在 Firebug 检查器中显示为灰色并被隔离，如下所示：

[http://cl.ly/0N0s451G0W2L0x0r072r](http://cl.ly/0N0s451G0W2L0x0r072r)

其他时候，它们在 DOM 的上下文中以全彩显示。这是我的 Backbone 应用程序中不同时间的相同元素：

[http://cl.ly/2k2j0I3g2D0R0K121i3t](http://cl.ly/2k2j0I3g2D0R0K121i3t)

我猜想一个灰色的、孤立的处理表示一个没有附加到 DOM 的元素——但我正在对我的应用程序中的一个错误进行故障排除，这将有助于 100% 确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T17:51:50.250

你猜对了。该“灰色”元素与 DOM 分离。

# wcf - 如何在运行时更改 basicHttpBinding sendTimeout？

> ID：10901902
> 
> 赞同：3
> 
> 时间：2012-06-05T17:23:02.673
> 
> 标签：wcf

我有一个使用 WCF 让两个应用程序相互通信的小型基本工作示例。我的客户端应用程序侦听服务器，在配置我的设置的 app.config 文件中有 XML。在编译时硬编码的一项设置是隐藏在 basicHttpBinding 设置下的 sendTimeout 设置。例如：

```
<configuration>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="BasicHttpBinding_IScriptRunHost" closeTimeout="00:05:00"
                    openTimeout="00:05:00" receiveTimeout="00:05:00" sendTimeout="00:00:15" 
```

我希望能够在运行时设置 sendTimeout 属性（使用 c#）。但是对 WCF 如此陌生，我不知道从哪里开始？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T18:41:50.587

您可以在代码中执行您在配置文件中执行的任何操作。您可以通过创建新的客户端代理并在运行时为其分配所需的绑定配置来动态设置超时或各种配置详细信息：

```
ServiceClient _client = new ServiceClient(new BasicHttpBinding { SendTimeout = new TimeSpan(2, 0, 0) },new EndpointAddress("http://localhost:8089/MyService.svc")); 
```

或者：

```
BasicHttpBinding myBinding = new BasicHttpBinding();
                 myBinding.OpenTimeout = new TimeSpan(2, 0, 0);
                 myBinding.CloseTimeout = new TimeSpan(2, 0, 0);
                 myBinding.SendTimeout = new TimeSpan(2, 0, 0);

ServiceClient _client = new ServiceClient();
              _client.Endpoint.Binding = myBinding; 
```

但是，您可能可以通过查看代码推断出，如果您想在运行时更改超时值、服务端点或几乎任何绑定配置，则必须拆除以前的客户端代理并处置并使用您创建的新的，显然这会产生一些不良影响，因为您的客户将暂时与您的服务断开连接，因此请记住这一点。您还可以在配置文件中定义 2 或 3 个（或任意数量）绑定配置，并创建一个新客户端并将其配置为使用该绑定，这几乎与在代码中执行此操作相同。即使这样，您也必须实例化一个新的客户端代理才能使用不同的绑定配置。

# javascript - HTML 表格换行列

> ID：10901904
> 
> 赞同：1
> 
> 时间：2012-06-05T17:23:06.100
> 
> 标签：javascript, html-table

我有一个表格，用户将数据输入到列中。每次用户输入数据时，都会创建一个新列。过了一会儿，他们有很多列，我需要它们来换行。

我知道如何将文本包装在列中，但我需要将整列包装在第一列下方，依此类推。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T17:32:57.983

您不应该为此使用表格。您应该使用带有“float:left”CSS 样式的 div。

这是一个工作示例：http: [//jsfiddle.net/3MEJ5/](http://jsfiddle.net/3MEJ5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T17:29:24.440

`<div class="datainput">`不要使用表格列，而是尝试使用以下 CSS将每个输入数据单独作为一个表格，包裹在 a中：

```
.datainput {display: inline-block; vertical-align: top;} 
```

现在，不要添加新列，而是复制容器。这会将它放在现有的旁边，并在需要时包装。

如果包装失败，请将此 CSS 应用于包含所有这些容器的元素：

```
word-break: break-all; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-05T17:27:13.397

其实并不简单。表/行/列结构相当僵化。为了实现您所描述的，您必须将每个单元格创建为一个巨大的外部单元格中的单单元格表。然后他们会包装。但是，它们可能无法很好地对齐。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-04-01T17:18:23.720

现在一个很好的解决方案是使用 CSS3 Columns。

您可以在容器上设置 CSS 属性，子项将向下流动。

您有以下选择：

```
div {
  /* Make columns with a min width of 100px, create multiple columns as space permits */
  column-width: 100px;
  column-count: 3; /* Divide the text in a <div> element into three columns */
  column-gap: 40px;  /* Specify a 40 pixels gap between the columns */
  /* Specify the width, style, and color of the rule between columns */
  column-rule: 4px double #ff00ff;
} 
```

有关详细信息，请参阅：[https ://www.w3schools.com/cssref/css3_pr_columns.asp](https://www.w3schools.com/cssref/css3_pr_columns.asp)

有关浏览器支持，请参阅：[https ://caniuse.com/#search=css3%20columns](https://caniuse.com/#search=css3%20columns)

# c++ - 在 Visual C++ 2010 Express 中安装 OpenCV 2.4.3

> ID：10901905
> 
> 赞同：60
> 
> 时间：2012-06-05T17:23:08.353
> 
> 标签：c++, visual-c++, opencv

如何在 VC++ 2010 Express 下安装和使用 OpenCV 2.4.3？

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2012-06-05T17:23:10.130

**1.安装OpenCV 2.4.3**

首先，从 sourceforge.net获取[OpenCV 2.4.3 。](http://sourceforge.net/projects/opencvlibrary/)它是自解压的，因此只需双击即可开始安装。将其安装在一个目录中，例如*`C:\`*.

![OpenCV 自解压器](../Images/d76153b3ff7e7e336c5c1fae08fd2d73.png)

等到所有文件都被提取出来。它将创建一个*`C:\opencv`*包含 OpenCV 头文件、库、代码示例等的新目录。

现在您需要将目录添加*`C:\opencv\build\x86\vc10\bin`*到系统 PATH。此目录包含运行代码所需的 OpenCV DLL。

打开**控制面板**→**系统**→**高级系统设置**→**高级**选项卡→**环境变量...**

![在此处输入图像描述](../Images/c1574c3e7800aa8220f283a8772a3d76.png)

在系统变量部分，选择**路径**(1)、**编辑**(2)，然后键入*`C:\opencv\build\x86\vc10\bin;`*(3)，然后单击**确定**。

在某些计算机上，您可能需要重新启动计算机，系统才能识别环境路径变量。

这将在您的计算机上完成 OpenCV 2.4.3 安装。

* * *

**2.新建项目并设置Visual C++**

打开 Visual C++ 并选择**File** → **New** → **Project...** → **Visual C++** → **Empty Project**。为您的项目命名（例如：）`cvtest`并设置项目位置（例如：）`c:\projects`。

![新建项目对话框](../Images/9e9547d06e761c72f09b2090188ac85f.png)

单击**确定**。Visual C++ 将创建一个空项目。

![VC++ 空项目](../Images/04140df61eadc9aef56e0e5f23054c0c.png)

确保在解决方案配置组合框中选择了“调试”。右键单击`cvtest`并选择**Properties** → **VC++ Directories**。

![项目属性对话框](../Images/91b8fcf525bf88dd378313b0b6a2619a.png)

选择**包括目录**以添加新条目并键入*`C:\opencv\build\include`*。

![包括目录对话框](../Images/9ab8f0c7adc01017d9fae4f5433ae06a.png)

单击**确定**关闭对话框。

返回到 Property 对话框，选择**Library Directories**以添加新条目并键入*`C:\opencv\build\x86\vc10\lib`*。

![库目录对话框](../Images/0430f220fa8be3fd9a311e3505a86574.png)

单击**确定**关闭对话框。

返回属性对话框，选择**Linker** → **Input** → **Additional Dependencies**添加新条目。在弹出对话框中，键入以下文件：

```
opencv_calib3d243d.lib
opencv_contrib243d.lib
opencv_core243d.lib
opencv_features2d243d.lib
opencv_flann243d.lib
opencv_gpu243d.lib
opencv_haartraining_engined.lib
opencv_highgui243d.lib
opencv_imgproc243d.lib
opencv_legacy243d.lib
opencv_ml243d.lib
opencv_nonfree243d.lib
opencv_objdetect243d.lib
opencv_photo243d.lib
opencv_stitching243d.lib
opencv_ts243d.lib
opencv_video243d.lib
opencv_videostab243d.lib 
```

请注意，文件名以“d”结尾（表示“调试”）。另请注意，如果您安装了另一个版本的 OpenCV（比如 2.4.9），这些文件名将以 249d 而不是 243d 结尾（opencv_core249d.lib..etc）。

![在此处输入图像描述](../Images/3bf43610ee2c63693269a9fa9dd9479f.png)

单击**确定**关闭对话框。单击项目属性对话框上的**确定以保存所有设置。**

> **笔记：**
> 
> 这些步骤将为“调试”解决方案配置 Visual C++。对于“Release”解决方案（可选），您需要重复添加 OpenCV 目录并在**Additional Dependencies**部分中，使用：
> 
> `opencv_core243.lib`
> `opencv_imgproc243.lib`
> `...`
> 
> 代替：
> 
> `opencv_core243d.lib`
> `opencv_imgproc243d.lib`
> `...`

您已经完成了 Visual C++ 的设置，现在是编写真正代码的时候了。右键单击您的项目并选择**Add** → **New Item...** → **Visual C++** → **C++ File**。

![添加新的源文件](../Images/f8ab7a6bf8be4872e5228c72bc16498d.png)

命名您的文件（例如：）`loadimg.cpp`并单击**确定**。在编辑器中输入以下代码：

```
#include <opencv2/highgui/highgui.hpp>
#include <iostream>

using namespace cv;
using namespace std;

int main()
{
    Mat im = imread("c:/full/path/to/lena.jpg");
    if (im.empty()) 
    {
        cout << "Cannot load image!" << endl;
        return -1;
    }
    imshow("Image", im);
    waitKey(0);
} 
```

上面的代码将加载*`c:\full\path\to\lena.jpg`*并显示图像。你可以使用任何你喜欢的图像，只要确保图像的路径是正确的。

输入 F5 编译代码，它会在一个漂亮的窗口中显示图像。

![第一个 OpenCV 程序](../Images/37b881997317d222a90150462a6c0e7b.png)

这就是你的第一个 OpenCV 程序！

* * *

**3\. 从这里到哪里去？**

现在您的 OpenCV 环境已经准备就绪，下一步是什么？

1.  转到示例目录 → *`c:\opencv\samples\cpp`*。
2.  阅读并编译一些代码。
3.  编写自己的代码。

# c# - 声明为另一个类的静态成员的类对象的方法的线程行为

> ID：10901908
> 
> 赞同：1
> 
> 时间：2012-06-05T17:23:20.100
> 
> 标签：c#, oop, static-members, instance-methods

最近我的一个同事想出了一段代码，并询问我对代码线程安全的看法。下面是一个示例，说明了与代码相同的场景。

```
public class classA
{
   public int DoWorkA() 
   { 
       //some logic 
   }
}

public class classB
{
     public static classA objA = new classA();
}

public class classC
{
        int DoWorkC () 
        {

           return classB.objA.DoWorkA();

        }
} 
```

现在，如果在 ClassC、ClassD 等不同类的不同实例中同时调用 ClassB.objA.DoWorkA() 是否会出现任何线程或“重叠”问题？是否应该将 objA 转换为实例成员？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T17:26:45.123

因为`objA`是静态的，所以只有一个`classA`. 这意味着所有线程都访问*同一实例*`DoWorkA()`上的方法，但这并不意味着方法调用是线程安全的——这完全取决于.*`DoWorkA()`*

 *您仍然需要适当的逻辑`DoWorkA`来防止并发访问可能出现的问题，例如使用锁定或线程安全集合等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T17:26:55.157

> 是否会有任何线程或“重叠”问题

这取决于做什么`//some logic`。每个调用都将共享同一个实例，因此`DoWorkA`需要线程安全才能使其正常运行。

为了安全起见，其中使用的任何数据都`//some logic`需要适当的同步。*

# javascript - 关闭后如何将可变数据存储在PDF中？

> ID：10901918
> 
> 赞同：0
> 
> 时间：2012-06-05T17:23:54.633
> 
> 标签：javascript, acrobat

我正在使用 Javascript 在 Acrobat 中编写 PDF 应用程序，并且需要能够在文档关闭后在后台存储数据。

例如，如果我在`arr[0] = "myData";`关闭并重新打开 PDF 时设置了数组的值（假设这是动态发生的），则 的值`arr[0]`将返回为`undefined`.

是否有另一种方法来存储与我可以使用 javascript 回调的 PDF 文件一起保存的数据？理想情况下，我希望在后台执行此操作，而不是用一堆文本填充虚拟文本框。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T19:56:46.327

我找到了一个可行的解决方案。

我合并了 Diodeus 的编辑 Acrobat 元数据的链接以及在此处找到的 JSON 对象：[https ://github.com/douglascrockford/JSON-js/blob/master/json2.js](https://github.com/douglascrockford/JSON-js/blob/master/json2.js)

我只是拿了我想要的对象并使用 Stringify 方法（JSON 对象）将其转换为 JSON 字符串。然后我将它存储在一个元变量中（Diodeus 的链接）。

要将其重新放入对象中，我使用了 parse 方法（JSON 对象的）。奇迹般有效！

# wordpress - WordPress query_posts 显示过去的日期

> ID：10901919
> 
> 赞同：0
> 
> 时间：2012-06-05T17:23:55.497
> 
> 标签：wordpress, date, post

我的页面只显示我想要的未来日期，我一直在寻找一种只查询的方法：日期早于今天的帖子。

这是目前我的查询：

```
<?php
$args=array(
    'post_type' => 'artists',
    'orderby'   => 'ecpt_featured_month',
    'order' => 'ASC',
    'post_status' => 'future'
); 
```

有任何想法吗？如果有帮助，每个帖子都是艺术家，他们有一个特色月份，帖子=月份。

谢谢，

瑞安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T17:55:59.340

考虑到“ecpt_featured_month”是一个自定义字段，请使用这个：

```
$args=array(
    'post_type' => 'artists',
    'orderby'   => 'meta_value',
    'meta_key' => 'ecpt_featured_month'
    'order' => 'ASC',
    'post_status' => 'future'
);
$loop = new WP_Query( $args);
while ( $loop->have_posts() ) : $loop->the_post(); 
// write the general code to display the post's title and date
endwhile; 
```

# javadoc - javadoc 是否支持其他注释样式？

> ID：10901923
> 
> 赞同：1
> 
> 时间：2012-06-05T17:24:22.987
> 
> 标签：javadoc, doxygen

我一直在使用 doxygen 生成文档输出的 C++ 项目中工作。我们使用的文档方法如下所示：

```
//! This is an awesome method.  You should totally use this method for all sorts
//! of cool stuff that you might want to do.
//! @returns something useful
string my_awesome_method() {...} 
```

如您所见，我们使用`//!`注释前缀来表示一个 doxygen 注释块。我们发现这非常适合我们的需求。

现在我们正在添加一个 Java 组件，并希望与我们在 C++ 中使用的注释样式保持一致，而不是转向我们认为很尴尬`/** */`的 javadocs 使用的样式。有没有办法让 javadocs 识别像 doxygen 这样的其他前缀？或者 javadocs 是否需要使用`/** */`？我们可以只使用 doxygen，但是围绕 javadocs 构建了各种各样的细节，因此我们希望维护与这个生态系统的接口。

这可能吗？恐怕答案可能是否定的。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T03:08:45.363

是的，`/** */`是 javadoc 识别的唯一注释格式。请参阅[http://www.oracle.com/technetwork/java/javase/documentation/index-137868.html#format](http://www.oracle.com/technetwork/java/javase/documentation/index-137868.html#format)。

# c++ - 提取特定的 Win32 函数

> ID：10901931
> 
> 赞同：0
> 
> 时间：2012-06-05T17:25:00.303
> 
> 标签：c++, winapi, dll

我想使用 windows.h 中的 CreateThread 函数，但没有包含在头文件中的所有#defines 和废话。有什么方法可以从 .dll 或 .lib 中导入（我认为这就是它的名称）吗？测试失败：

```
#pragma comment(lib,"Kernel32.lib")
__declspec(dllimport)
unsigned long
__stdcall
WaitForSingleObject(
    void* hHandle,
    unsigned long dwMilliseconds
    );

int main()
{
    WaitForSingleObject(0,0);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T17:39:20.483

是的，您可以动态加载 DLL，获取函数的地址，然后调用它。不过，我不确定 Windows.h 的问题是什么。

[LoadLibrary](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684175%28v=vs.85%29.aspx) [GetProcAddress](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683212%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T17:44:31.993

至少有两种选择：

1.  您不需要包含标题。的定义`CreateThread`不会改变。您可以将其声明（以及它所依赖的声明）从 Windows 标头复制到您自己的源文件中。

2.  您可以围绕您使用的 Windows API 函数编写包装器，然后“pimpl”使用 Windows API，这样您就不必到处包含 Windows.h 和其他头文件。

在我看来，后一种选择可能更可取，因为它不易出错、更简单，并且提供非标准函数的隔离，从而更容易移植代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T17:43:20.310

我认为 DLL 没有预处理器指令，因为它们已经编译，因此包含 DLL 不应该污染您的工作集。如果您想包含源文件（*.h 文件），那么您还需要编译这些函数，这很可能取决于这些指令和其他废话。

# java - EditText 留空时的错误

> ID：10901935
> 
> 赞同：0
> 
> 时间：2012-06-05T17:25:35.047
> 
> 标签：java, android

任何人都可以看看下面的代码并指出明显的问题吗？`editText`程序在留空时会出错，并且只有在所有信息都存在时才进行计算。目前程序在缺少文本时崩溃，这是为什么呢？

```
EditText editText1, editText2;
double numA, numB, numC;
TextView answer;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.calc);

    editText1 = (EditText) findViewById(R.id.editText1);
    editText2 = (EditText) findViewById(R.id.editText2);
}

public void btnClick(View v)
{
    if(editText1.getText().length()==0)
    {
        editText1.setError("please input text"); 
    }{
        if  (editText2.getText().length()==0)
            {
                editText2.setError("please input text");
            }

    numA = new Double(editText1.getText().toString());
    numB = new Double(editText2.getText().toString());

    numC=(numA + numB); answer.setText(Double.toString(numC));
    }
}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T17:30:03.893

问题是你试图解析`""`成一个数字（特别是双精度数）。您正在检查空值，但即使您设置了错误，您仍在尝试解析它。您需要将`new Double()`语句放在 try-catch 块中，并捕获在尝试解析无效输入时发生的异常。这样，即使用户输入的随机文本字符串也不能解析为双精度，它也是安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T18:34:46.827

尝试这个，

只需用这些替换您的陈述......它就会起作用。

```
if ((editText1.getText().toString()).equals(null))

if ((editText2.getText().toString()).equals(null)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T20:30:58.873

做就是了

```
if(editText1.getText().toString().equals(null){//your code here}
if(editText2.getText().toString().equals(null){//your code here} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-05T17:27:16.420

将您的代码更改为：

```
if(TextUtils.isEmpty(editText1.getText()))
{
    editText1.setError("please input text"); 
}
if(TextUtils.isEmpty(editText2.getText()))
{
    editText2.setError("please input text"); 
} 
```

什么`TextUtils.isEmpty(str)`是 return `str == null || str.length() == 0`。

# java - 将活动中定义的布局更改为xml布局

> ID：10901937
> 
> 赞同：0
> 
> 时间：2012-06-05T17:25:40.920
> 
> 标签：java, android, xml

我正在尝试使用他们的[音频捕获示例代码中的一些谷歌代码](http://developer.android.com/guide/topics/media/audio-capture.html)。他们简化了代码，并在课堂上进行了布局。我想要一个实际的 xml 布局。我知道如何做那部分，但我想知道如何将下面的代码更改为 onClick 方法并拥有它提供的所有功能。

```
class PlayButton extends Button {      
    boolean mStartPlaying = true;   
    OnClickListener clicker = new OnClickListener() {  
        public void onClick(View v) {          
            onPlay(mStartPlaying);            
            if (mStartPlaying) {              
                setText("Stop playing");        
            } else {              
                setText("Start playing");     
            }          
            mStartPlaying = !mStartPlaying;      
        }      
    };      

    public PlayButton(Context ctx) {   
        super(ctx);           
        setText("Start playing");      
        setOnClickListener(clicker);    
    }   
} 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T18:03:46.010

在布局文件中，您将拥有类似...

```
<LinearLayout>
   <Button android:id="play_button"/>
</LinearLayout> 
```

在活动中，onCreate()，然后您可以执行类似..

```
OnClickListener clicker = new OnClickListener() {  
    public void onClick(View v) {          
        onPlay(mStartPlaying);            
        if (mStartPlaying) {              
            setText("Stop playing");        
        } else {              
            setText("Start playing");     
        }          
        mStartPlaying = !mStartPlaying;      
    }      
};      
Button b = findViewById(R.id.play_button);
b.setOnClickListener(clicker); 
```

或者，您还可以在 xml 布局中定义将在`Activity`...中调用的方法

```
<LinearLayout>
   <Button android:id="play_button" onclick="play"/>
</LinearLayout> 
```

然后在`Activity`你简单地创建一个方法，称为`play(View view)`

```
public void play(View view) {
            onPlay(mStartPlaying);            
            if (mStartPlaying) {              
                setText("Stop playing");        
            } else {              
                setText("Start playing");     
            }          
            mStartPlaying = !mStartPlaying;      
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T18:10:57.683

只需将按钮定义为`Button`并将布尔值声明为`Activity`变量。例子...

```
public class AudioRecordTest extends Activity {
    ...
    private Button mPlayButton = null;
    private boolean mStartPlaying = true;
    // Do the same for mRecordButton and mStartRecording
    ...

    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.main);

        // The next line assumes the play button has the id "@+id/play_button"
        mPlayButton = (Button)findViewById(R.id.play_button);
        mPlayButton.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                onPlay(mStartPlaying);            
                if (mStartPlaying) {
                    ((Button)v).setText("Stop playing");
                } else {
                    ((Button)v).setText("Start playing");
                }
                mStartPlaying = !mStartPlaying;
            }
        });

        // Do the same for the mRecordButton
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T18:02:55.980

扩展按钮只是为了设置一个 onClickListener 不是一个好主意。仅当您要为其添加新功能时，才应扩展某些内容。当您将其用于不需要额外功能的特定目的时，则不会。

```
Button button = new Button(this);
button.setOnClickListener(...); 
```

如果您需要使用 XML，您可以使用 LayoutInflater 以编程方式加载它。

您的布尔值 isPlaying 不是按钮本身的属性，而是它正在播放的媒体的属性。您不应将其隐藏在按钮内。

# objective-c - 具有字符串常量和 id 的 NSDictionary

> ID：10901942
> 
> 赞同：1
> 
> 时间：2012-06-05T17:26:06.650
> 
> 标签：objective-c, ios, nsdictionary, constants

我正在寻找解决问题的好方法。我需要大约 20 多个字符串常量（资源文件名）。但我需要：

1.  组常量（文件名）
2.  遍历选定的常量组
3.  通过 id 访问常量

所以我找到的最佳解决方案是为每个组创建常量 NSDictionary 并使用常量值和 ID。我想`enum`用于存储常量 id，但 int 不能用作 NSDictionary 中的键。

```
typedef enum {
    kSoundColorSelection1 = 0,
    kSoundColorSelection2,
    kSoundColorSelection3,
    kSoundFill1,
    kSoundFill2,
    kSoundSizeSelectionBig,
    kSoundSizeSelectionMedium
} ACSoundId; 
```

“最简单”的方法是显式转换`int`为`NSNumber`

```
templatesSounds = [[NSDictionary alloc] initWithObjectsAndKeys:@"album_close.caf",[NSNumber numberWithInt:kSoundAlbumClose],
                 @"album_open.caf", [NSNumber numberWithInt:kSoundAlbumOpen], nil]; 
```

在这种情况下还有其他方法可以保持常量吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T17:43:45.723

有两种可能的方法可以使这更容易。

**解决方案 1** 如果您使用 ACSoundId 作为 NSDictionary 的键，则可以只使用 NSArray：

```
typedef enum {
    kSoundColorSelection1      = 0,
    kSoundColorSelection2      = 1,
    kSoundColorSelection3      = 2,
    kSoundFill1                = 3,
    kSoundFill2                = 4,
    kSoundSizeSelectionBig     = 5,
    kSoundSizeSelectionMedium  = 6
} ACSoundId; 
```

按照上面枚举中定义的相同顺序将声音存储在数组中：

```
templatesSounds = [[NSArray alloc] initWithObjects:@"color_selection1.caf",
    @"color_selection2.caf",
    @"color_selection3.caf",
    @"color_fill1.caf",
    @"color_fill2.caf",
    @"size_selection_big.caf",
    @"size_selection_medium.caf",
    nil]; 
```

由于声音的索引与枚举的值相关，因此它的工作方式类似于 NSDirectory：

```
queuedSound = [templatesSounds objectAtIndex:kSoundColorSelection2]; 
```

**解决方案 2** 或者，您可以创建一个类别，以便更轻松地将整数用作 NSDictionary 中的键：

定义类别：

```
@interface NSMutableDictionary (NSNumberDictionary)
- (void) setObject:(id)anObject forNumber:(NSInteger)aNumber;
- (void) removeObjectForNumber:(NSInteger)aNumber;
- (id)   objectForNumber:(NSInteger)aNumber;
@end 
```

实现类：

```
@implementation NSMutableDictionary (NSNumberDictionary)
- (void) setObject:(id)anObject forNumber:(NSInteger)aNumber
{
   NSNumber * number;
   number = [[NSNumber alloc] initWithInteger:aNumber];
   [self setObject:anObject forKey:number];
   [number release];
   return;
}
- (void) removeObjectForNumber:(NSInteger)aNumber
{
   NSNumber * number;
   number = [[NSNumber alloc] initWithInteger:aNumber];
   [self removeObjectForKey:number];
   [number release];
   return;
}
- (id) objectForNumber:(NSInteger)aNumber
{
   NSNumber * number;
   id         object;
   number = [[NSNumber alloc] initWithInteger:aNumber];
   object = [self objectForKey:number];
   [number release];
   return(object);
}
@end 
```

使用类别：

```
templatesSounds = [[NSMutableDictionary alloc] initWithWithCapacity1];
[templatesSounds setObject:@"color_selection1.caf" forNumber:kSoundColorSelection1];
[templatesSounds setObject:@"color_selection2.caf" forNumber:kSoundColorSelection2];
[templatesSounds setObject:@"color_selection3.caf" forNumber:kSoundColorSelection3];
[templatesSounds setObject:@"color_fill1.caf"      forNumber:kSoundColorFill1];
[templatesSounds setObject:@"color_fill2.caf"      forNumber:kSoundColorFill2]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T17:45:11.160

如果你的“键”总是整数，为什么不使用普通的 C 数组呢？

```
NSString **templatesSounds ;

int numConstants = 10;
templatesSounds = calloc(numConstants , sizeof(NSString*));

templatesSounds[kSoundAlbumOpen] = @"album_open.caf";

NSString* soundName = templatesSounds [kSoundSizeSelectionMedium];

//...
free (templatesSounds); 
```

# javascript - 一些 Javascript 在 64 位 Internet Explorer 中无法正常运行

> ID：10901948
> 
> 赞同：2
> 
> 时间：2012-06-05T17:26:38.573
> 
> 标签：javascript, jquery, internet-explorer, x86, 64-bit

**编辑**：Juan Mendez 的解决方案解决了这个特定问题，但没有解释更普遍的问题，即为什么这在 32 位而不是 64 位上适用于完全相同的浏览器。只是让我想知道可能存在哪些其他类似问题以及如何对它们采取预防措施......这是最初的问题：

* * *

我在两台 Windows 7 机器上安装了 IE 9，一台 32 位，另一台 64 位。所有 IE 选项/安全设置都是相同的。

在 32 位机器上，以下网站正确显示。请注意页面中间的滚动社交媒体图标正在移动，向左滚动：

[http://www.nba.com/warriors/social-media-new-test](http://www.nba.com/warriors/social-media-new-test)

在 64 位机器上，脚本似乎没有运行，因为图标没有移动。页面上的其他脚本运行良好（例如标题有一些 javascript 控制要显示的图像）。

这是使图标移动的代码，但是我担心这是一个更大（不太具体）的问题：

```
$(document).ready(function() {
    setInterval(scrollIcons, 40);
});

function scrollIcons() {
    var i, thisPos, newPosLeft;

    for (i=0; i < numIcons; i++) {
        thisPos = $(iconButtons[i]).position();

        newPosLeft = thisPos.left - (1 * scrollspeed);
        if (newPosLeft < SLIDERLEFTBORDER) newPosLeft = SLIDERRIGHTBORDER;

        $(iconButtons[i]).attr("style", "left: " + newPosLeft + "px;");
    }
} 
```

有谁知道可能是什么问题？我对 64 位与 32 位的假设错了吗？对我来说，这似乎是机器之间的唯一区别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T18:05:00.693

当我在 IE 8 64 位上运行您的页面时，我收到以下错误：

```
// Object doesn't support this property or method
divs = document.getElementsByClassName('icon_socialmedia'); 
```

改为使用`jQuery`，因为您已经在其他地方使用

# android - 在 Internet 中使用 TCP

> ID：10901949
> 
> 赞同：-1
> 
> 时间：2012-06-05T17:26:40.537
> 
> 标签：android, tcp

我正在使用 TCP 将我的 android 手机与 Windows 7 PC 连接起来。当我在局域网中发送消息电话-PC 时，此系统正常工作，因为我在 Internet 中使用此系统，她已关闭，因为 android 应用程序向我发送“超时”。为什么？

```
// The host name can either be a machine name, such as "java.sun.com", or a
// textual representation of its IP address
String host = "10.26.144.118";
int port = 20;
try {
    Socket socket = new Socket(InetAddress.getByName(host), port);
    BufferedReader reader = new BufferedReader(
                                new InputStreamReader(socket.getInputStream()));
    PrintWriter writer = new PrintWriter(socket.getOutputStream(), true);
    // true for auto flush
    writer.println("Hello World");
    myView.setText("Send hello world");
} catch (Exception e) {
System.out.println("Error" + e);
myView.setText("Error" + e);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T17:50:25.593

您的问题是您将[LAN](https://en.wikipedia.org/wiki/Local_Area_Network)（局域网）与[WAN](https://en.wikipedia.org/wiki/Wide_area_network)（广域网）（即互联网）混为一谈。您的个人局域网受到外部保护。

您需要一个静态公共 IP 或 DDNS（动态 DNS）解决方案，例如[dyndns](http://www.dyndns.org/)。比您必须将流量从您的公共 IP 转发到您的内部服务器 IP。另请参阅[thax](https://stackoverflow.com/a/10902056/995926)的答案。

您的智能手机可以连接到您的静态公共 IP 或 DDNS 地址。比您的应用程序还应该与移动网络一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T17:32:52.967

您可能正在寻找[端口转发](http://portforward.com/)

# asp.net - 具有多列和相关值的组合框

> ID：10901952
> 
> 赞同：0
> 
> 时间：2012-06-05T17:26:55.607
> 
> 标签：asp.net, ajax, vb.net, drop-down-menu, telerik

是否可以在 asp.net 的组合框/下拉列表中显示多个列和标题并显示相关列值，例如，如果我单击一个国家/地区名称，那么它应该显示该国家/地区的所有城市和点击城市名称应该会显示所有相关的地方。

是否有任何第三方控件可用？我检查了telerik，他们有包含多列但没有相关值的组合框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T04:19:00.590

我希望这会帮助你开始。

![在此处输入图像描述](../Images/3a22a054247625cd9c233c8d98ae4758.png)

```
<telerik:RadComboBox ID="RadComboBox1" runat="server" AutoPostBack="True" 
    OnSelectedIndexChanged="RadComboBox1_SelectedIndexChanged">
    <ItemTemplate>
        <table width="100%">
            <tr>
                <td>
                    <%# Eval("Name") %>
                </td>
                <td>
                    <%# Eval("Population")%>
                </td>
            </tr>
        </table>
    </ItemTemplate>
</telerik:RadComboBox>
<telerik:RadComboBox ID="RadComboBox2" runat="server" AutoPostBack="True" 
    OnSelectedIndexChanged="RadComboBox2_SelectedIndexChanged">
    <ItemTemplate>
        <table width="100%">
            <tr>
                <td>
                    <%# Eval("Name") %>
                </td>
                <td>
                    <%# Eval("Population")%>
                </td>
            </tr>
        </table>
    </ItemTemplate>
</telerik:RadComboBox>
<telerik:RadComboBox ID="RadComboBox3" runat="server">
    <ItemTemplate>
        <table width="100%">
            <tr>
                <td>
                    <%# Eval("Name") %>
                </td>
                <td>
                    <%# Eval("Population")%>
                </td>
            </tr>
        </table>
    </ItemTemplate>
</telerik:RadComboBox>

public class Country
{
  public int Id { get; set; }
  public string Name { get; set; }
  public int Population  { get; set; }
}

public class State
{
  public int Id { get; set; }
  public int CountryId { get; set; }
  public string Name { get; set; }
  public int Population { get; set; }
}

public class City
{
  public int Id { get; set; }
  public int StateId { get; set; }
  public string Name { get; set; }
  public int Population { get; set; }
}

public List<Country> Countries
{
  get
  {
    return new List<Country>
      {
        new Country {Id = 1, Name = "United States", Population = 1000},
        new Country {Id = 2, Name = "Canada", Population = 2000},
        new Country {Id = 3, Name = "Mexico", Population = 3000}
      };
  }
}

public List<State> States
{
  get
  {
    return new List<State>
      {
        new State {Id = 1, CountryId = 1, Name = "California", Population = 100},
        new State {Id = 2, CountryId = 1, Name = "New York", Population = 200},
        new State {Id = 3, CountryId = 2, Name = "Quebec", Population = 300},
        new State {Id = 4, CountryId = 2, Name = "Ontario", Population = 400}
      };
  }
}

public List<City> Cities
{
  get
  {
    return new List<City>
      {
        new City {Id = 1, StateId = 1, Name = "Los Angeles", Population = 10},
        new City {Id = 2, StateId = 1, Name = "San Diego", Population = 20},
        new City {Id = 3, StateId = 1, Name = "San Francisco", Population = 30},
        new City {Id = 4, StateId = 1, Name = "San Joe", Population = 40},
        new City {Id = 5, StateId = 2, Name = "New York", Population = 50},
        new City {Id = 6, StateId = 2, Name = "Paterson", Population = 60},
        new City {Id = 7, StateId = 2, Name = "Newark", Population = 70},
        new City {Id = 8, StateId = 2, Name = "Smithtown", Population = 80},
      };
  }
}

protected void Page_Load(object sender, EventArgs e)
{
  if(!IsPostBack)
  {
    RadComboBox1.DataSource = Countries;
    RadComboBox1.DataValueField = "Id";
    RadComboBox1.DataTextField = "Name";
    RadComboBox1.DataBind();

    RadComboBox1.Items.Insert(0, new RadComboBoxItem("Select Country", ""));
  }
}

protected void RadComboBox1_SelectedIndexChanged(
  object sender, RadComboBoxSelectedIndexChangedEventArgs e)
{
  RadComboBox2.Items.Clear();
  RadComboBox3.Items.Clear();

  int countryId;
  if (Int32.TryParse(e.Value, out countryId))
  {
    RadComboBox2.DataSource = States.Where(s => s.CountryId == countryId);
    RadComboBox2.DataValueField = "Id";
    RadComboBox2.DataTextField = "Name";
    RadComboBox2.DataBind();

    RadComboBox2.Items.Insert(0, new RadComboBoxItem("Select State", ""));
  }
}

protected void RadComboBox2_SelectedIndexChanged(
  object sender, RadComboBoxSelectedIndexChangedEventArgs e)
{
  RadComboBox3.Items.Clear();

  int stateId;
  if (Int32.TryParse(e.Value, out stateId))
  {
    RadComboBox3.DataSource = Cities.Where(c => c.StateId == stateId);
    RadComboBox3.DataValueField = "Id";
    RadComboBox3.DataTextField = "Name";
    RadComboBox3.DataBind();

    RadComboBox3.Items.Insert(0, new RadComboBoxItem("Select City", ""));
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T17:35:05.470

就其本身而言，我不知道“相关”值；但是您可能需要自己开发它。

除了 Telerik，如果你不介意使用 jQuery，这里有几个插件可以免费使用来实现多列/标题方面：

*   [mcDropdown jQuery插件 v1.3.1](http://www.givainc.com/labs/mcdropdown_jquery_plugin.htm)
*   [Jquery 多列选择框](http://webscripts.softpedia.com/script/Forms-and-Controls-C-C/Jquery-Multi-Column-Selectbox-54203.html)

还有其他一些你可以在使用[这个谷歌搜索](https://www.google.com/search?sugexp=chrome,mod=3&sourceid=chrome&ie=UTF-8&q=jquery%20multi%20column%20dropdown%20list#hl=en&sclient=psy-ab&q=jquery%20multi%20column%20dropdown%20list&oq=jquery%20multi%20column%20dropdown%20list&aq=f&aqi=&aql=&gs_l=serp.12...0.0.0.7883.0.0.0.0.0.0.0.0..0.0...0.0.d5MF__sdi5g&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&fp=caf26cc50dd30da&biw=1863&bih=1107)时达到顶峰。

有用的参考：[jQuery](http://jquery.com/)

# javascript - 当 Div 可见时调用 Twitter 脚本

> ID：10901953
> 
> 赞同：0
> 
> 时间：2012-06-05T17:27:03.937
> 
> 标签：javascript, html, twitter, dom-events, visibility

在我的页面上，有一个像这样调用 Twitter 的脚本：

此 div 的初始可见性是隐藏的。

```
<div class="YGNH DSL" id="twitter_update_list">
    <script type="text/javascript" src="../js/tweetsv3.js"></script>
    <script type="text/javascript" src="http://twitter.com/statuses/user_timeline/WebMasterAmy.json?callback=twitterCallback2&count=1">
    </script>
</div> 
```

所有的 js 都是 twitter，但是现在，当页面加载时会调用 twitter，这会使页面加载速度变慢，所以我想将其设置为仅在`<div class="YGNH DSL" id="twitter_update_list">`可见时调用脚本的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T17:42:37.157

如果您使用的是 jQuery，则可以执行类似的操作

```
function toggleTwitterDiv() {
    var div = $('#twitter_update_list');
    div.toggle(function() {
        if (div.is(':visible')) {
            //make twitter call here
        }
    })
}

toggleTwitterDiv(); 
```

# c++ - c++ 中的函数指针：错误：必须使用 '.*' 或 '->*' 在函数中调用指向成员函数的指针

> ID：10901959
> 
> 赞同：16
> 
> 时间：2012-06-05T17:27:19.400
> 
> 标签：c++, function-pointers

代码片段如下。无法理解为什么我会收到此错误。

```
void
SipObj::check_each_field()
{
  map <std::string, sip_field_getter>::iterator msg;
  string str;
  char name[20];
  bool res = false;
  sscanf(get_payload(), "%s %*s", name);
  LOGINFO(lc()) <<  "INVITE:" << name;
  str = name;
  msg = sip_field_map.find(str);
  if (msg != sip_field_map.end()) {
      sip_field_getter sip_field = msg->second;
      res = (this).*sip_field();
  }
}

 typedef bool (SipObj::*sip_field_getter)();
 static map <std::string, sip_field_getter> sip_field_map; 
```

`sip_field_getter`是函数名称的占位符

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-05T17:33:26.467

```
(this).*sip_field(); 
```

这个表达式有两个问题：

1.  `this`是一个指针，所以你必须使用`->*`它通过指针调用成员函数。

2.  函数调用 ( `()`) 的优先级高于逐指针运算符（`.*`或`->*`），因此您需要括号来正确分组表达式。

正确的表达是：

```
(this->*sip_field)(); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-05T17:32:11.897

看起来您在指针上调用方法指针，但您使用点星语法调用它。尝试更换

```
res = (this).*sip_field(); 
```

和

```
res = (this->*sip_field)(); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-05T17:32:49.743

正确的语法是这样的：

```
(this->*sip_field)(); 
```

或者，如果您想使用`.`而不是`->`，那么：

```
((*this).*sip_field)(); 
```

我更喜欢前一种语法。

# javascript - 如何从子页面中调整 iFrame 的大小？

> ID：10901963
> 
> 赞同：1
> 
> 时间：2012-06-05T17:27:37.510
> 
> 标签：javascript, html, iframe

当内容更改尺寸时，例如在 javascript 效果之后，是否可以调整 iFrame 的大小？

在我的示例链接中，我使用了显示/隐藏 Javascript 效果，但是由于我的 iframe 无法通信，导致的溢出被隐藏了。

[我的网站示例](http://www.taskmotivator.com/Iframe_test.html)（单击第 2 页，您会看到较长的文本已隐藏）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T17:34:13.830

对的，这是可能的。例如，它是由 Facebook 应用程序完成的。

要从主文档访问 iframe：

```
window.frames['iframeName'].document.callAFunction()
window.frames['iframeName'].document.getElementById('foo') 
```

从 iframe 到父文档：

```
parent.document.callAFunction()
parent.document.getElementById('foo') 
```

请记住，这仅适用于从同一域加载的两个文档。

现在你可以这样做：

*   如果 iframe 内容发生更改，则获取事件
*   将新尺寸提交到父文档中
*   父文档更改 iframe 尺寸

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T17:32:15.470

将 iFrame 包含在一个 div 中，将 iFrame 的宽度和高度分配为 100% 并控制 div 的高度/宽度。

# drupal - Drupal 7 视图：如何为多个字段重用一个视图或如何让用户选择显示哪个字段视图？

> ID：10901966
> 
> 赞同：1
> 
> 时间：2012-06-05T17:27:44.997
> 
> 标签：drupal, drupal-7, drupal-views

**我的任务：**我的内容类型有 100 多个不同的主要数字字段（带有年度报告的非政府组织的大型问卷）。对于一个字段，我可以使用 Views 模块让用户选择包含哪些报告（例如一年）并将其显示为漂亮的图表（例如使用 Views+Charts）。我必须定义大约 100 多个几乎相同的视图，它们的区别仅在于它们使用的字段数据。

**我的问题：**有什么方法可以重用一个视图定义并仅更改来自哪个字段 id 显示的数据？

**到目前为止的解决方案：**我发现了两个不太好的解决方案：

*   创建一个视图，将其导出（使用功能或类似方式），然后克隆此导出，重写它用作源的字段，然后添加。但这只会加快为每 100 多个字段创建一个视图。
*   使用模块[查看动态字段](http://drupal.org/project/views_dynamic_fields)- 它允许用户选择要显示的字段。但是我仍然会单独定义如何为每个字段显示，所以没有比为每 100 多个字段添加一个视图更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T21:31:53.360

我建议编写自己的视图字段显示插件！这实际上都记录在 Views 模块文件夹中：views/docs/views.api.php。根据您的字段，我不确定您如何将数据准确连接到视图。

另一种选择是仅使用 PHP 代码字段，并找出一种以编程方式显示所需字段数据的方法。这样做的缺点是，据我所知，您将无法使用该字段对任何过滤器进行排序/搜索。

# php - 在类中使用外部变量

> ID：10901967
> 
> 赞同：-2
> 
> 时间：2012-06-05T17:27:47.603
> 
> 标签：php

我有一个目录结构：

```
app
cofig
 config.php
classes
 db.class.php
index.php 
```

配置.php：

```
<?php

define('DB_HOST', 'localhost'); 
define('DB_USER', 'root'); 
define('DB_PASS', ''); 
define('DB_NAME', 'db_name'); 
```

db.class.php：

```
<?php 
include "config/config.php";

class DB {

private $conn;
private $results;

public function __construct() {

$this->conn = mysql_connect(DB_HOST, DB_USER, DB_PASS);//**This doesn't work**
mysql_select_db(DB_NAME, $this->conn);
}

}
?> 
```

当我尝试在 index.php 中创建 $db 类的实例时，出现错误（无法在类中获取 DEFINED 变量）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T17:41:48.957

有这个目录结构：

```
app
config
 config.php
classes
 db.class.php
index.php 
```

将迫使您使用：`include('../config/config.php');`或定义一个绝对`PATH`的根并执行：`include(PATH.'config/config.php');`。

你`include "config/config.php";`被解释为`include('root/classes/config/config.php')`，我认为，不存在。

正如 Samy 建议的那样，您无论如何都应该通过构造函数将常量传递给该类，以便您可以将同一个类用于与不同数据库变量的多个连接。

此外，不建议再使用 mysql 或 mysqli 功能。了解 PDO。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T17:44:09.517

根据您的目录结构，包含路径应​​为“../config/config.php”。由于您使用的是包含，因此无论是否包含文件，它都不会引发致命错误并继续执行代码。根据代码，此处不包含您的文件。尝试这个

```
 <?php 
include "../config/config.php";

class DB {

    private $conn;
    private $results;

    public function __construct() {

        $this->conn = mysql_connect(DB_HOST, DB_USER, DB_PASS);//**This doesn't work**
        mysql_select_db(DB_NAME, $this->conn);
     }

 }
?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-05T17:41:05.060

假设您的目录结构中的“cofig”是一个错字，请使用：

```
include("../config/config.php"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-05T17:31:26.933

将这些变量作为参数传递给你的类，无论如何它更干净。

```
class DB {
    public function __construct($host, $dbName, $user, $password) {
        $this->conn = mysql_connect($host, $user, $password);
        mysql_select_db($dbName, $this->conn);
    }
}

new DB(DB_HOST, DB_NAME, DB_USER, DB_PASS); 
```

顺便说一句，[*mysql_*函数正在被弃用](http://www.php.net/manual/en/intro.mysql.php)。

# wcf - WCF Net.tcp 服务随机故障

> ID：10901972
> 
> 赞同：0
> 
> 时间：2012-06-05T17:28:02.877
> 
> 标签：wcf, net.tcp

此代码稍作修改，几乎直接取自 Internet 上的示例，该示例使用发布/订阅机制运行 net.tcp 双工服务。这在一段时间内工作得很好，但客户端会随机错误用于通信的通道。一些客户在故障前 24 - 48 小时仍然可以进行沟通。问题：有谁知道为什么套接字会随机中止，甚至如何找出错误日志中究竟是什么导致了异常？

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Runtime.Serialization;
    using System.ServiceModel;
    using System.ServiceModel.Web;
    using System.Text;

    namespace WcfService1
    {

    [ServiceContract(CallbackContract = typeof(IClientCallBack))]
    interface IService
    {
        //The Alert Server Function called by the Client
        [OperationContract(IsOneWay = true)]
        void SubscribeToBeNotifiedServer(string EmpID);

        [OperationContract(IsOneWay = true)]
        void UpdatePricingServer(string ReservationID, string CustomerID);

        [OperationContract(IsOneWay = true)]
        void SendMessageToNotifyOther(string From, string To, string Message);

    }

    [ServiceContract]
    public interface IClientCallBack
        {
            [OperationContract()]
            [FaultContract(typeof(InvalidOperationException))]
            void UpdatePricingClient(string FromReservationID, string CustomerID );

            //The Alert Server Function called by the Client
            [OperationContract(IsOneWay = true)]
            void SubscribeToBeNotifiedClient();

            [OperationContract()]
            [FaultContract(typeof(InvalidOperationException))]
            void ReceiveMessage(string From, string Message);

        }

    [ServiceBehavior( ConcurrencyMode = ConcurrencyMode.Reentrant,UseSynchronizationContext =   false,  InstanceContextMode = InstanceContextMode.Single, IncludeExceptionDetailInFaults=true )]
    [CallbackBehavior(UseSynchronizationContext = false)]     
    class Service1 : IService
        {
          public Service1()
          {

          }

          public void SubscribeToBeNotifiedServer(string EmpID)
          {
              var added = OperationContext.Current.GetCallbackChannel<IClientCallBack>();

              var st = OperationContext.Current.InstanceContext.State;

              var asdf1 = OperationContext.Current.Host.State;

              if (!subscribers.Select(x => x.CallBackInformation).Contains(added))
              {
                  subscribers.Add(new ClientInfo(added, OperationContext.Current, EmpID));

                  OperationContext.Current.Channel.Faulted += new EventHandler(Channel_Faulted);

              }
          }          

          private static readonly List<ClientInfo> subscribers = new List<ClientInfo>();  

          public void UpdatePricingServer(string ReservationID, string CustomerID)
           {                  

               try
               {

                   List<ClientInfo> Remove = new List<ClientInfo>();

                   Action<ClientInfo> invoke = delegate(ClientInfo callback)
                   {

    //I wrapped this in its own thread as the entire thread gets torn down if there is an exception 
    // when you call the client. This is true even if its in a try catch the entire thread dies. 

    System.Threading.Thread mythread = new System.Threading.Thread((System.Threading.ThreadStart)delegate() {
        try
        {

            var test = (ICommunicationObject)callback.CallBackInformation;

            if (test.State == CommunicationState.Opened && callback.InstanceContext.Host.State == CommunicationState.Opened)
            {

                callback.CallBackInformation.UpdatePricingClient(ReservationID, CustomerID);

            }

            else
            {
                Remove.Add(callback);
            }

        }
        catch (FaultException<InvalidOperationException> exception)
        { }
        catch (FaultException exception)
        { }
        catch (CommunicationException exception)
        { }
    });

    mythread.Start();

    };

                   subscribers.ForEach(invoke);

                   foreach (var temp1 in Remove)
                   {
                       subscribers.Remove(temp1);
                   }

               }
               catch (Exception ex)
               {

               }
           }

          public void SendMessageToNotifyOther(string From, string To, string Message)
          {

              try
              {

                  List<ClientInfo> Remove = new List<ClientInfo>();

                  Action<ClientInfo> invoke = delegate(ClientInfo callback)
                  {

                      //I wrapped this in its own thread as the entire thread gets torn down if there is an exception 
                      // when you call the client. This is true even if its in a try catch the entire thread dies. 

                      System.Threading.Thread mythread = new System.Threading.Thread((System.Threading.ThreadStart)delegate()
                      {
                          try
                          {

                              var test = (ICommunicationObject)callback.CallBackInformation;

                              if (test.State == CommunicationState.Opened && callback.InstanceContext.Host.State == CommunicationState.Opened)
                              {

                                  if (callback.EmployeeID == To)
                                  {
                                      callback.CallBackInformation.ReceiveMessage(From, Message);
                                  }

                              }

                              else
                              {
                                  Remove.Add(callback);
                              }

                          }
                          catch (FaultException<InvalidOperationException> exception)
                          { }
                          catch (FaultException exception)
                          { }
                          catch (CommunicationException exception)
                          { }
                      });

                      mythread.Start();

                  };

                  subscribers.ForEach(invoke);

                  foreach (var temp1 in Remove)
                  {
                      subscribers.Remove(temp1);
                  }

              }
              catch (Exception ex)
              {

              }
          }

           #region IService Members
           void Channel_Faulted(object sender, EventArgs e)
           {
               ICommunicationObject myobj = (ICommunicationObject)sender;

               myobj.Abort();

               myobj.Close();

           }

           void InstanceContext_Closing(object sender, EventArgs e)
            {
                try
                {
                    subscribers.Remove(subscribers.Where(x => x.CallBackInformation == sender).FirstOrDefault());
                }
                catch { }
            }

            void Channel_Closed(object sender, EventArgs e)
            {
                try
                {
                    subscribers.Remove(subscribers.Where(x => x.CallBackInformation == sender).FirstOrDefault());
                }
                catch { }
            }

            void InstanceContext_Closed(object sender, EventArgs e)
            {
                try
                {
                    subscribers.Remove(subscribers.Where(x => x.CallBackInformation == sender).FirstOrDefault());
                }
                catch { }
            }

            void InstanceContext_Faulted(object sender, EventArgs e)
            {
                try
                {
                    subscribers.Remove(subscribers.Where(x => x.CallBackInformation == sender).FirstOrDefault());
                }
                catch { }
            }

            #endregion
        }

    public class ClientInfo
      {
          IClientCallBack client;

          OperationContext context;

          public ClientInfo(IClientCallBack clientcall, OperationContext Instance, string EmpID)
          {
              this.client = clientcall;

              this.context = Instance;

              this.EmployeeID = EmpID;
          }

          public IClientCallBack CallBackInformation
          {
              get { return client; }
              set { this.client = value; }
          }

          public OperationContext InstanceContext
          {
              get { return context; }
              set { this.context = value; }
          }

          public string EmployeeID;
      }

    } 
```

这是服务器的 web.config

```
 <?xml version="1.0"?>
    <configuration>
      <system.web>
    <compilation debug="true" targetFramework="4.0" />
    <customErrors mode="Off">    
    </customErrors>
      </system.web>

      <system.serviceModel>
        <!--WcfService1.IService-->  

    <services>
      <service behaviorConfiguration="MyBehavior" name="WcfService1.Service1">
        <endpoint address="" binding="netTcpBinding"
          bindingConfiguration="portSharingBinding" name="MyServiceEndpoint"
          contract="WcfService1.IService">
          <identity>
            <!--<dns value="localhost:808" />-->
          </identity>
        </endpoint>

        <endpoint address="/mex" kind="mexEndpoint"
                  binding="mexTcpBinding" 
                  contract="IMetadataExchange" />        
        <host>
          <baseAddresses>
            <!--<add baseAddress="net.tcp://iiswatso/MnetTcp/Service1.svc" />-->
            <add baseAddress="net.tcp://localhost/WcfService/Service1.svc" />
          </baseAddresses>
        </host>
      </service>
    </services>

    <behaviors>
      <serviceBehaviors>
        <behavior name="MyBehavior" >
          <serviceTimeouts />          
          <serviceMetadata httpGetEnabled="false" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>

    <bindings>
      <netTcpBinding>
        <binding name="portSharingBinding" portSharingEnabled="true" openTimeout="infinite" closeTimeout="infinite" receiveTimeout="infinite" sendTimeout="infinite"    >
          <reliableSession inactivityTimeout="infinite" ordered="True"    enabled="true" />
          <security mode="None"></security>          
        </binding>
      </netTcpBinding>
    </bindings>
  </system.serviceModel>
  <system.webServer>   
  </system.webServer>

  <system.diagnostics>
    <trace autoflush="true"></trace>
    <sources>
      <source name="System.ServiceModel" switchValue="Information, ActivityTracing" propagateActivity="true">
        <listeners>          
          <add name="traceListener" type="System.Diagnostics.XmlWriterTraceListener" initializeData="c:\log\Server3.svclog" />
        </listeners>
      </source>
    </sources>   
  </system.diagnostics>  
</configuration> 
```

这是服务器的跟踪日志：

```
 <E2ETraceEvent xmlns="http://schemas.microsoft.com/2004/06/E2ETraceEvent">
    <System xmlns="http://schemas.microsoft.com/2004/06/windows/eventlog/system">
 <EventID>131075</EventID>
<Type>3</Type>
<SubType Name="Error">0</SubType>
<Level>2</Level>
<TimeCreated SystemTime="2012-05-30T18:11:10.9002453Z" />
<Source Name="System.ServiceModel" />
<Correlation ActivityID="{00000000-0000-0000-0000-000000000000}" />
<Execution ProcessName="Meridian Reservation System.vshost" ProcessID="10676" ThreadID="21" />
<Channel />
<Computer>JIMMY-PC</Computer>
</System>
<ApplicationData>
<TraceData>
<DataItem>
<TraceRecord xmlns="http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord" Severity="Error">
<TraceIdentifier>http://msdn.microsoft.com/en-US/library/System.ServiceModel.Diagnostics.ThrowingException.aspx</TraceIdentifier>
<Description>Throwing an exception.</Description>
<AppDomain>Meridian Reservation System.vshost.exe</AppDomain>
<Exception>
<ExceptionType>System.ServiceModel.CommunicationException, System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType>
<Message>The socket connection was aborted. This could be caused by an error processing your message or a receive timeout being exceeded by the remote host, or an underlying network resource issue. Local socket timeout was '10675199.02:48:05.4775807'.</Message>
<StackTrace>
at System.ServiceModel.Channels.SocketConnection.BeginReadCore(Int32 offset, Int32 size, TimeSpan timeout, WaitCallback callback, Object state)
at System.ServiceModel.Channels.SocketConnection.BeginRead(Int32 offset, Int32 size, TimeSpan timeout, WaitCallback callback, Object state)
at System.ServiceModel.Channels.DelegatingConnection.BeginRead(Int32 offset, Int32 size, TimeSpan timeout, WaitCallback callback, Object state)
at System.ServiceModel.Channels.SessionConnectionReader.BeginReceive(TimeSpan timeout, WaitCallback callback, Object state)
at System.ServiceModel.Channels.SynchronizedMessageSource.ReceiveAsyncResult.PerformOperation(TimeSpan timeout)
at System.ServiceModel.Channels.SynchronizedMessageSource.SynchronizedAsyncResult`1..ctor(SynchronizedMessageSource syncSource, TimeSpan timeout, AsyncCallback callback, Object state)
at System.ServiceModel.Channels.SynchronizedMessageSource.ReceiveAsyncResult..ctor(SynchronizedMessageSource syncSource, TimeSpan timeout, AsyncCallback callback, Object state)
at System.ServiceModel.Channels.SynchronizedMessageSource.BeginReceive(TimeSpan timeout, AsyncCallback callback, Object state)
at System.ServiceModel.Channels.FramingDuplexSessionChannel.BeginReceive(TimeSpan timeout, AsyncCallback callback, Object state)
at System.ServiceModel.Channels.FramingDuplexSessionChannel.TryReceiveAsyncResult..ctor(FramingDuplexSessionChannel channel, TimeSpan timeout, AsyncCallback callback, Object state)
at System.ServiceModel.Channels.FramingDuplexSessionChannel.BeginTryReceive(TimeSpan timeout, AsyncCallback callback, Object state)
at System.ServiceModel.Channels.ClientReliableChannelBinder`1.DuplexClientReliableChannelBinder`1.OnBeginTryReceive(TDuplexChannel channel, TimeSpan timeout, AsyncCallback callback, Object state)
at System.ServiceModel.Channels.ReliableChannelBinder`1.TryReceiveAsyncResult.BeginInput(ReliableChannelBinder`1 binder, TChannel channel, TimeSpan timeout, AsyncCallback callback, Object state)
at System.ServiceModel.Channels.ReliableChannelBinder`1.InputAsyncResult`1.CompleteTryGetChannel(IAsyncResult result, Boolean&amp; complete)
at System.ServiceModel.Channels.ReliableChannelBinder`1.InputAsyncResult`1.Start()
at System.ServiceModel.Channels.ReliableChannelBinder`1.TryReceiveAsyncResult..ctor(ReliableChannelBinder`1 binder, TimeSpan timeout, MaskingMode maskingMode, AsyncCallback callback, Object state)
at System.ServiceModel.Channels.ReliableChannelBinder`1.BeginTryReceive(TimeSpan timeout, MaskingMode maskingMode, AsyncCallback callback, Object state)
at System.ServiceModel.Channels.ReliableChannelBinder`1.BeginTryReceive(TimeSpan timeout, AsyncCallback callback, Object state)
at System.ServiceModel.Channels.ReliableDuplexSessionChannel.StartReceiving(Boolean canBlock)
at System.ServiceModel.Channels.ReliableDuplexSessionChannel.HandleReceiveComplete(IAsyncResult result)
at System.ServiceModel.Channels.ReliableDuplexSessionChannel.OnReceiveCompletedStatic(IAsyncResult result)
at System.Runtime.Fx.AsyncThunk.UnhandledExceptionFrame(IAsyncResult result)
at System.Runtime.AsyncResult.Complete(Boolean completedSynchronously)
at System.Runtime.AsyncResult.Complete(Boolean completedSynchronously, Exception exception)
at System.ServiceModel.Channels.ReliableChannelBinder`1.InputAsyncResult`1.OnInputComplete(IAsyncResult result)
at System.ServiceModel.Channels.ReliableChannelBinder`1.InputAsyncResult`1.OnInputCompleteStatic(IAsyncResult result)
at System.Runtime.Fx.AsyncThunk.UnhandledExceptionFrame(IAsyncResult result)
at System.Runtime.AsyncResult.Complete(Boolean completedSynchronously)
at System.Runtime.AsyncResult.Complete(Boolean completedSynchronously, Exception exception)
at System.ServiceModel.Channels.FramingDuplexSessionChannel.TryReceiveAsyncResult.OnReceive(IAsyncResult result)
at System.Runtime.Fx.AsyncThunk.UnhandledExceptionFrame(IAsyncResult result)
at System.Runtime.AsyncResult.Complete(Boolean completedSynchronously)
at System.Runtime.AsyncResult.Complete(Boolean completedSynchronously, Exception exception)
at System.ServiceModel.Channels.SynchronizedMessageSource.SynchronizedAsyncResult`1.CompleteWithUnlock(Boolean synchronous, Exception exception)
at System.ServiceModel.Channels.SynchronizedMessageSource.ReceiveAsyncResult.OnReceiveComplete(Object state)
at System.ServiceModel.Channels.SessionConnectionReader.OnAsyncReadComplete(Object state)
at System.ServiceModel.Channels.SocketConnection.FinishRead()
at System.ServiceModel.Channels.SocketConnection.AsyncReadCallback(Boolean haveResult, Int32 error, Int32 bytesRead)
at System.ServiceModel.Channels.OverlappedContext.CompleteCallback(UInt32 error, UInt32 numBytes, NativeOverlapped* nativeOverlapped)
at System.Runtime.Fx.IOCompletionThunk.UnhandledExceptionFrame(UInt32 error, UInt32 bytesRead, NativeOverlapped* nativeOverlapped)
at System.Threading._IOCompletionCallback.PerformIOCompletionCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* pOVERLAP)
</StackTrace>
<ExceptionString>System.ServiceModel.CommunicationException: The socket connection was aborted. This could be caused by an error processing your message or a receive timeout being exceeded by the remote host, or an underlying network resource issue. Local socket timeout was '10675199.02:48:05.4775807'. ---&gt; System.Net.Sockets.SocketException: An existing connection was forcibly closed by the remote host
   --- End of inner exception stack trace ---</ExceptionString>
<InnerException>
<ExceptionType>System.Net.Sockets.SocketException, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType>
<Message>An existing connection was forcibly closed by the remote host</Message>
<StackTrace>
at System.ServiceModel.Channels.SocketConnection.BeginReadCore(Int32 offset, Int32 size, TimeSpan timeout, WaitCallback callback, Object state)
at System.ServiceModel.Channels.SocketConnection.BeginRead(Int32 offset, Int32 size, TimeSpan timeout, WaitCallback callback, Object state)
at System.ServiceModel.Channels.DelegatingConnection.BeginRead(Int32 offset, Int32 size, TimeSpan timeout, WaitCallback callback, Object state)
at System.ServiceModel.Channels.SessionConnectionReader.BeginReceive(TimeSpan timeout, WaitCallback callback, Object state)
at System.ServiceModel.Channels.SynchronizedMessageSource.ReceiveAsyncResult.PerformOperation(TimeSpan timeout)
at System.ServiceModel.Channels.SynchronizedMessageSource.SynchronizedAsyncResult`1..ctor(SynchronizedMessageSource syncSource, TimeSpan timeout, AsyncCallback callback, Object state)
at System.ServiceModel.Channels.SynchronizedMessageSource.ReceiveAsyncResult..ctor(SynchronizedMessageSource syncSource, TimeSpan timeout, AsyncCallback callback, Object state)
at System.ServiceModel.Channels.SynchronizedMessageSource.BeginReceive(TimeSpan timeout, AsyncCallback callback, Object state)
at System.ServiceModel.Channels.FramingDuplexSessionChannel.BeginReceive(TimeSpan timeout, AsyncCallback callback, Object state)
at System.ServiceModel.Channels.FramingDuplexSessionChannel.TryReceiveAsyncResult..ctor(FramingDuplexSessionChannel channel, TimeSpan timeout, AsyncCallback callback, Object state)
at System.ServiceModel.Channels.FramingDuplexSessionChannel.BeginTryReceive(TimeSpan timeout, AsyncCallback callback, Object state)
at System.ServiceModel.Channels.ClientReliableChannelBinder`1.DuplexClientReliableChannelBinder`1.OnBeginTryReceive(TDuplexChannel channel, TimeSpan timeout, AsyncCallback callback, Object state)
at System.ServiceModel.Channels.ReliableChannelBinder`1.TryReceiveAsyncResult.BeginInput(ReliableChannelBinder`1 binder, TChannel channel, TimeSpan timeout, AsyncCallback callback, Object state)
at System.ServiceModel.Channels.ReliableChannelBinder`1.InputAsyncResult`1.CompleteTryGetChannel(IAsyncResult result, Boolean&amp; complete)
at System.ServiceModel.Channels.ReliableChannelBinder`1.InputAsyncResult`1.Start()
at System.ServiceModel.Channels.ReliableChannelBinder`1.TryReceiveAsyncResult..ctor(ReliableChannelBinder`1 binder, TimeSpan timeout, MaskingMode maskingMode, AsyncCallback callback, Object state)
at System.ServiceModel.Channels.ReliableChannelBinder`1.BeginTryReceive(TimeSpan timeout, MaskingMode maskingMode, AsyncCallback callback, Object state)
at System.ServiceModel.Channels.ReliableChannelBinder`1.BeginTryReceive(TimeSpan timeout, AsyncCallback callback, Object state)
at System.ServiceModel.Channels.ReliableDuplexSessionChannel.StartReceiving(Boolean canBlock)
at System.ServiceModel.Channels.ReliableDuplexSessionChannel.HandleReceiveComplete(IAsyncResult result)
at System.ServiceModel.Channels.ReliableDuplexSessionChannel.OnReceiveCompletedStatic(IAsyncResult result)
at System.Runtime.Fx.AsyncThunk.UnhandledExceptionFrame(IAsyncResult result)
at System.Runtime.AsyncResult.Complete(Boolean completedSynchronously)
at System.Runtime.AsyncResult.Complete(Boolean completedSynchronously, Exception exception)
at System.ServiceModel.Channels.ReliableChannelBinder`1.InputAsyncResult`1.OnInputComplete(IAsyncResult result)
at System.ServiceModel.Channels.ReliableChannelBinder`1.InputAsyncResult`1.OnInputCompleteStatic(IAsyncResult result)
at System.Runtime.Fx.AsyncThunk.UnhandledExceptionFrame(IAsyncResult result)
at System.Runtime.AsyncResult.Complete(Boolean completedSynchronously)
at System.Runtime.AsyncResult.Complete(Boolean completedSynchronously, Exception exception)
at System.ServiceModel.Channels.FramingDuplexSessionChannel.TryReceiveAsyncResult.OnReceive(IAsyncResult result)
at System.Runtime.Fx.AsyncThunk.UnhandledExceptionFrame(IAsyncResult result)
at System.Runtime.AsyncResult.Complete(Boolean completedSynchronously)
at System.Runtime.AsyncResult.Complete(Boolean completedSynchronously, Exception exception)
at System.ServiceModel.Channels.SynchronizedMessageSource.SynchronizedAsyncResult`1.CompleteWithUnlock(Boolean synchronous, Exception exception)
at System.ServiceModel.Channels.SynchronizedMessageSource.ReceiveAsyncResult.OnReceiveComplete(Object state)
at System.ServiceModel.Channels.SessionConnectionReader.OnAsyncReadComplete(Object state)
at System.ServiceModel.Channels.SocketConnection.FinishRead()
at System.ServiceModel.Channels.SocketConnection.AsyncReadCallback(Boolean haveResult, Int32 error, Int32 bytesRead)
at System.ServiceModel.Channels.OverlappedContext.CompleteCallback(UInt32 error, UInt32 numBytes, NativeOverlapped* nativeOverlapped)
at System.Runtime.Fx.IOCompletionThunk.UnhandledExceptionFrame(UInt32 error, UInt32 bytesRead, NativeOverlapped* nativeOverlapped)
at System.Threading._IOCompletionCallback.PerformIOCompletionCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* pOVERLAP)
</StackTrace>
<ExceptionString>System.Net.Sockets.SocketException (0x80004005): An existing connection was forcibly closed by the remote host</ExceptionString>
<NativeErrorCode>2746</NativeErrorCode>
</InnerException>
</Exception>
</TraceRecord>
</DataItem>
</TraceData>
</ApplicationData>
</E2ETraceEvent> 
```

跟踪客户端：

```
 <E2ETraceEvent xmlns="http://schemas.microsoft.com/2004/06/E2ETraceEvent">
<System xmlns="http://schemas.microsoft.com/2004/06/windows/eventlog/system">
<EventID>131075</EventID>
<Type>3</Type>
<SubType Name="Error">0</SubType>
<Level>2</Level>
<TimeCreated SystemTime="2012-05-30T18:11:02.2488000Z" />
<Source Name="System.ServiceModel" />
<Correlation ActivityID="{54830e63-b315-4f74-9455-d9ba50c655c0}" />
<Execution ProcessName="w3wp" ProcessID="2716" ThreadID="6" />
<Channel />
<Computer>IISWATSO</Computer>
</System>
<ApplicationData>
<TraceData>
<DataItem>
<TraceRecord xmlns="http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord" Severity="Error">
<TraceIdentifier>http://msdn.microsoft.com/en-US/library/System.ServiceModel.Diagnostics.ThrowingException.aspx</TraceIdentifier>
<Description>Throwing an exception.</Description>
<AppDomain>/LM/W3SVC/3/ROOT/MNetTcp-1-129828750305652000</AppDomain>
<Exception>
<ExceptionType>System.ServiceModel.CommunicationException, System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType>
<Message>The socket connection was aborted. This could be caused by an error processing your message or a receive timeout being exceeded by the remote host, or an underlying network resource issue. Local socket timeout was '10675199.02:48:05.4775807'.</Message>
<StackTrace>
at System.ServiceModel.Channels.SocketConnection.EndRead()
at System.ServiceModel.Channels.TracingConnection.EndRead()
at System.ServiceModel.Channels.SessionConnectionReader.OnAsyncReadComplete(Object state)
at System.ServiceModel.Channels.TracingConnection.TracingConnectionState.ExecuteCallback()
at System.ServiceModel.Channels.SocketConnection.AsyncReadCallback(Boolean haveResult, Int32 error, Int32 bytesRead)
at System.Runtime.Fx.IOCompletionThunk.UnhandledExceptionFrame(UInt32 error, UInt32 bytesRead, NativeOverlapped* nativeOverlapped)
at System.Threading._IOCompletionCallback.PerformIOCompletionCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* pOVERLAP)
</StackTrace>
<ExceptionString>System.ServiceModel.CommunicationException: The socket connection was aborted. This could be caused by an error processing your message or a receive timeout being exceeded by the remote host, or an underlying network resource issue. Local socket timeout was '10675199.02:48:05.4775807'. ---&gt; System.Net.Sockets.SocketException: An existing connection was forcibly closed by the remote host
   --- End of inner exception stack trace ---</ExceptionString>
<InnerException>
<ExceptionType>System.Net.Sockets.SocketException, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType>
<Message>An existing connection was forcibly closed by the remote host</Message>
<StackTrace>
at System.ServiceModel.Channels.SocketConnection.EndRead()
at System.ServiceModel.Channels.TracingConnection.EndRead()
at System.ServiceModel.Channels.SessionConnectionReader.OnAsyncReadComplete(Object state)
at System.ServiceModel.Channels.TracingConnection.TracingConnectionState.ExecuteCallback()
at System.ServiceModel.Channels.SocketConnection.AsyncReadCallback(Boolean haveResult, Int32 error, Int32 bytesRead)
at System.Runtime.Fx.IOCompletionThunk.UnhandledExceptionFrame(UInt32 error, UInt32 bytesRead, NativeOverlapped* nativeOverlapped)
at System.Threading._IOCompletionCallback.PerformIOCompletionCallback(UInt32 errorCode, UInt32 numBytes, Nativ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T17:43:24.503

您至少有 9 个空的 catch 块，这意味着您正在吞下错误并且无法看到发生了什么错误。

您应该做的第一件事是将日志记录代码放在每个 catch 块中以记录错误。

从您发布的代码看来，您正在打开通道，您没有打开通道，使用它并尽快关闭它。最终，保持打开状态的通道将进入故障状态。

# shell - 如何附加字符串

> ID：10901973
> 
> 赞同：0
> 
> 时间：2012-06-05T17:28:04.923
> 
> 标签：shell

我正在解析一个文件以获取选定的字符串并构建为一行，但是，我不知道如何在 shell 脚本中执行它（如 //add... 所示）

```
while read line
do
    tt=`echo $line | cut -d'|' -f2 | cut -d'"' -f1`
    //add a $total = add all tt parts into a big string seperate by ", "
done < tmp_file

echo $total >> outfile 
```

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T17:35:54.820

您使用赋值和变量扩展在 shell 中追加：

```
total="${total}, ${tt}" 
```

在这种情况下，花括号 ( `{}`) 不是必需的，但我发现当它们像这样彼此相邻时，它们有助于区分变量。

这会给你一个领先的“，”。您可以像这样解决它：

```
total="${total:+${total}, }${tt}" 
```

该`${variable:+value}`构造仅扩展为`value`if`variable`已设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T17:39:32.427

我认为代码必须是这样的^_^"

```
while read line

do

    $tt=`echo $line | cut -d'|' -f2 | cut -d'"' -f1`

    $total .= $tt.", ";

done < tmp_file

echo $total >> outfile 
```

我认为这就是全部 ^^ :D 只是一个错过了一点的串联 :p 大声笑 :D

# android - android中scrollTo()的问题

> ID：10901977
> 
> 赞同：1
> 
> 时间：2012-06-05T17:28:19.900
> 
> 标签：android, scroll, chat, scrollview, android-edittext

我正在开发一个包含聊天功能的应用程序，当输入新消息时，它会将其存储到内部存储器中的文件中。此外，当我输入新消息时，它会自动滚动到 editText 的底部（消息所在的位置），并且在第一次尝试时工作正常，但是当我再次打开应用程序并从文件中加载历史记录时，自动滚动不再正常工作，因为虽然也滚动到底部，但它隐藏了最后一行文本。

这是 .java 文件：

```
public class ChatActivity extends Activity {

private static EditText messageHistory;
//
private EditText messageInput;
//
private Button sendButton;
//
private ScrollView scroller;

@Override
public void onCreate (Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.chat);

    //Prevents the keyboard from appearing when not rquested
    getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);

    ProjectData.chatLogFile = new FileHandler(getApplicationContext(), ProjectData.CHAT_LOG_FILE);
    ProjectData.chatLogFile.create();

    getViews();

    getChatLog();

    addListennerOnButton();
}

/**
 * Finds all the views in this activity and stores them in global variables
 */
private void getViews ()
{
    messageHistory = (EditText) findViewById(R.id.messageHistory);
    messageInput = (EditText) findViewById(R.id.messageInput);
    sendButton = (Button) findViewById(R.id.sendButton);
    scroller = (ScrollView) findViewById(R.id.historyScroller);
}

private void getChatLog ()
{
    messageHistory.setText(ProjectData.chatLogFile.getData());
    scroller.scrollTo(0, messageHistory.getBottom());
}

private void addListennerOnButton ()
{
    sendButton.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            if (!messageInput.getText().toString().equals(""))
            {
                newMessage(messageInput.getText().toString(), 0);
                scroller.scrollTo(0, messageHistory.getBottom());
                messageInput.setText("");
            }
        }
    });
}

public static void newMessage (final String msg, int id)
{
    StringBuilder strBuilder = new StringBuilder();
    switch (id) {
        case 0: strBuilder.append("User:\n");break;
        case 1: strBuilder.append("PC Medic:\n");
        default: break;
    }

    strBuilder.append(msg + "\n");
    messageHistory.append(strBuilder.toString());
    messageHistory.refreshDrawableState();
    ProjectData.chatLogFile.addData(strBuilder.toString());
}

@Override
public boolean onCreateOptionsMenu (Menu menu)
{
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.options_menu, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) 
{
    Intent intent;
    switch (item.getItemId()) {
        case R.id.menuFAQ:
            intent = new Intent();
            intent.setClass(getApplicationContext(), FAQActivity.class);
            startActivity(intent);
            return true;
        case R.id.menuConfig:
            intent = new Intent();
            intent.setClass(getApplicationContext(), PrefActivity.class);
            startActivity(intent);
            return true;
        case R.id.menuAbout:
            intent = new Intent();
            intent.setClass(getApplicationContext(), AboutActivity.class);
            startActivity(intent);
            return true;
        case R.id.menuExit:
            intent = new Intent();
            intent.setClass(getApplicationContext(), BackgroundService.class);
            stopService(intent);
            setResult(ProjectData.EXIT_CODE);
            finish();
            return true;
        default:
            return false;
    }
}
} 
```

和 .xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
android:id="@+id/chatMainLayout"
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<ImageView
    android:id="@+id/logoChat"
    android:layout_width="match_parent"
    android:layout_height="90dp"
    android:scaleType="fitStart"
    android:adjustViewBounds="true"
    android:src="@drawable/logo_top"
    android:contentDescription="@string/logo" />

<ScrollView
    android:id="@+id/historyScroller"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:fillViewport="true"
    android:layout_weight="1" >

    <EditText
        android:id="@+id/messageHistory"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:background="@color/black"
        android:clickable="true"
        android:editable="false"
        android:focusable="false"
        android:gravity="top"
        android:inputType="textMultiLine"
        android:textColor="@color/white" />
</ScrollView>

<EditText 
    android:layout_width="0dp"
    android:layout_height="0dp"
    android:inputType="none"
    android:focusable="true" />

<LinearLayout
    android:id="@+id/chatBottomLayout"
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <EditText
        android:id="@+id/messageInput"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:maxHeight="60dp"
        android:nextFocusLeft="@id/messageInput"
        android:nextFocusUp="@id/messageInput"
        android:hint="@string/message_input"
        android:layout_weight="1"
        android:textColor="@color/gray"
        style="@style/textInput" />
    <Button 
        android:id="@+id/sendButton"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="3"
        android:text="@string/send" />

</LinearLayout> 
```

任何人都可以看到甚至理解这个问题吗？

提前致谢，

里卡多·阿门多埃拉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-07T13:54:46.850

Sana 的回答让我解决了自己的问题。我认为您需要允许 TextView 重新计算窗口边界，因此请尝试将您的 scrollTo() 方法包装在 post [Handler](http://developer.android.com/reference/android/os/Handler.html#post%28java.lang.Runnable%29)中。

请参阅下面的代码：

```
@Override
public void onWindowFocusChanged(boolean hasFocus) {
    super.onWindowFocusChanged(hasFocus);
    scrollView.post(new Runnable() {
        @Override
        public void run () {
            scrollView.scrollTo(0, 500);
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T18:00:01.177

这里的问题是展示你的观点。当您在 onCreate 方法中布局视图时，它还没有完全膨胀，并且在滚动到第一行时可以正常工作，因此您可能希望将您的方法`getChatLog();`放入

```
@Override
 public void onWindowFocusChanged(boolean hasFocus) {
  // TODO Auto-generated method stub
  super.onWindowFocusChanged(hasFocus);
  getChatLog();
 } 
```

让我知道它是否有效。

这是一个非常有趣的问题。

# c - 为结构数组中的所有元素的字段赋值

> ID：10901978
> 
> 赞同：2
> 
> 时间：2012-06-05T17:28:21.537
> 
> 标签：c, struct

我有：

```
#include <stdio.h>

struct DVD {
    char *movie_title;
    int minutes;
    float price;
};

void display_struct(struct DVD *ptr);

int
main()
{
    struct DVD movies[10];
    movies[0].movie_title = "I Am Legend"; //Don't want to do this
}

void
display_struct(struct DVD *ptr)
{
    printf("%s\n%i\n%f\n", ptr->movie_title, ptr->minutes, ptr->price);
} 
```

我想在一个语句中为我的结构数组分配 10 个电影标题。这可能吗？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-05T17:31:19.663

在这样的单一声明中？

```
main()
{
    struct DVD movies[10] = {
        { .movie_title = "I Am Legend",
          .minutes = 101,
          .price = 9.99
        },
        { .movie_title = "Hancock",
          .minutes = 103,
          .price = 5.99
        },
        { .movie_title = "MIB3",
          .minutes = 106,
          .price = 9.49
        }
    };
} 
```

* * *

如果要避免所有字段名称：

```
main() {
    struct DVD movies[10] = {
        { "I Am Legend", 101, 9.99    },
        { "Hancock",     103, 5.99    },
        { "MIB3",        106, 9.49    }
    }; 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-05T17:52:04.517

```
#include <stdio.h>

struct DVD {
    char *movie_title;
    int minutes;
    float price;
};

void display_struct(struct DVD *ptr);

int main()
{
    struct DVD movies[10] =
    {
        { "I am Legend", 90, 4 },
        { "Star Wars", 100, 5 },
        { "Another Title", 60, 1},
        .......
    };
}

void display_struct(struct DVD *ptr)
{
    printf("%s\n%i\n%f\n", ptr->movie_title, ptr->minutes, ptr->price);
} 
```

# vb.net - 为什么我的 VB.Net 项目消失而不是给出错误消息？

> ID：10901982
> 
> 赞同：-1
> 
> 时间：2012-06-05T17:28:33.147
> 
> 标签：vb.net, visual-studio, error-handling

为什么我的 VB.Net 项目消失而不是给出错误消息？这只是最近才开始发生，但是当使用 Visual Studios 进行调试而不是出现错误时，程序就像按下了停止按钮一样关闭。并非所有错误类型都会发生这种情况，但如果存在某种类型的转换错误，它就会始终如一地发生。这是一个过于简化的例子，但下面的几行代码会导致程序一运行就消失。

```
 Dim i As Integer
    i = "A" 
```

另一个有趣的部分是，如果这是在 try catch 块中，则会捕获错误而不是关闭程序。我在办公室环境中，所以我已经能够测试一些配置，并发现这个问题只影响 Windows XP PC，但不影响 Windows 7。Visual Studios 2010 Professional 和 Ultimate，Visual Studios 一直发生这种情况2008 年。

有人有什么想法吗？除此之外，我们显然都需要 Windows 7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T17:32:52.133

Visual Studio 不能期望转换错误首先他必须强调你的错误。然后你必须在调试之前纠正它。

您的 VS 是否向您显示错误中的红色下划线？

如果 VS 显示调试时存在错误？

# visual-studio-2010 - VS 2010 C++ 创建库

> ID：10901985
> 
> 赞同：0
> 
> 时间：2012-06-05T17:28:45.240
> 
> 标签：visual-studio-2010, visual-c++

我想开发一个游戏。现在我只想制作引擎。我正在考虑使用 SFML 和 C++ 来做到这一点，但这个问题与它无关。

我想将游戏与引擎分开。所以起初，我用 C++ 项目解决了它。到目前为止，一切都很好。

然后我在这个解决方案中添加了新项目。我的问题从这里开始。

我需要在引擎项目中更改哪些设置，以便编译为库？（我猜是.dll？）

我需要在游戏项目（.exe）中更改哪些设置，以便我可以从引擎库访问类？

学校没有教我，如何做到这一点。在 C# 中很容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T06:25:54.017

如果您使用的是 MFC，则需要使用 Wizard Vc++->MFC->MFC DLL 为您的游戏引擎创建一个 DLL。

如果它是 win32 dll 或只是一个 c++ dll，您需要创建 win32 项目。请阅读以下帖子以了解其中的每一个

[http://www.codeproject.com/Articles/6351/Regular-DLL-Tutor-For-Beginners](http://www.codeproject.com/Articles/6351/Regular-DLL-Tutor-For-Beginners)

[http://www.codeproject.com/Articles/2516/Creating-and-sumption-MFC-DLLs-for-Beginners](http://www.codeproject.com/Articles/2516/Creating-and-consuming-MFC-DLLs-for-Beginners)

[http://www.codeproject.com/Articles/8341/DLLs-are-simple-Part-2](http://www.codeproject.com/Articles/8341/DLLs-are-simple-Part-2)

[http://www.codeproject.com/Articles/8417/DLLs-are-Simple-Part-3](http://www.codeproject.com/Articles/8417/DLLs-are-Simple-Part-3)

# php - 无法使用 include 包含文件 php

> ID：10901993
> 
> 赞同：1
> 
> 时间：2012-06-05T17:29:12.523
> 
> 标签：php, file, include, directory

我有一个名为 index.php 的页面，其中包含一个页面 new_display.php，它再次包含两个页面，即 x.php 和 y.php

包含在本地主机上工作正常，但在我的主机上却不行！我得到的错误是：-

**警告：需要（/interests/sketching/udis.php）[function.require]：无法打开流：/hermes/bosweb/web054/b548/ipg.pingcampuscom/mysql/interests/sketching/new_display中没有这样的文件或目录.php 在第 154 行**

**致命错误：require() [function.require]: 无法打开所需的 '/interests/sketching/udis.php' (include_path='.:/usr/local/lib/php-5.2.17/lib/php') /hermes/bosweb/web054/b548/ipg.pingcampuscom/mysql/interests/sketching/new_display.php 在第 154 行**

目录是：

**index.php -> 本地主机/mysql**

new_display.php -> **localhost/mysql/interests/sketching/new_display.php**（包含在 index.php 中为 /interests/sketching/new_display.php ）

然后在 new_display x.php 和 y.php 中包含为

**/interests/sketching/x.php**

**/interests/sketching/y.php**

它在本地主机中运行良好，但是当我在域上发布页面时出错

有谁知道为什么这不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T17:31:36.387

`/`表示绝对路径，这意味着您的脚本正在文件系统的根目录中查找名为`interests`.

`/`相反，请尝试在路径的开头删除它，或`$_SERVER['DOCUMENT_ROOT']`添加到它们前面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T18:10:23.830

你必须做

```
要求（兴趣/素描/udis.php）
```

没有

```
“/”
```

因为你必须指向同一个文件夹；）。

# ruby - 在不同的进程中生成命令提示符并在 Windows 上发送/接收命令

> ID：10901997
> 
> 赞同：3
> 
> 时间：2012-06-05T17:29:29.683
> 
> 标签：ruby

我手头有一个问题，需要我将命令提示符作为不同的进程生成并向其发送一些命令并捕获/解析命令输出。这种交互需要采用父子进程的形式，也就是说所有命令都可以放在一个 ruby​​ 文件中，并且在运行 ruby​​ 文件时，命令被发送到控制台（命令提示符）并从中接收输出并在 ruby​​ 脚本中处理。

我要遵循的一般逻辑是：

1.  使用 fork 生成不同的进程并获取进程 ID
2.  获取流程的流
3.  写入进程的输入流并从输出流中读取。

我使用的环境是安装了 Ruby 1.9.2 的 Windows XP 机器。[我下载了在这里](http://win32utils.rubyforge.org/)找到的 win32-process 库。通过使用该库，我可以按如下方式执行第 1 步

```
require 'win32/process'
    APP_NAME = "C:\\Windows\\system32\\cmd.exe"
    process_info = Process.create(:app_name => APP_NAME,
      :creation_flags => Windows::Process::CREATE_NEW_CONSOLE,
      :process_inherit  => false,
      :thread_inherit   => true,
      :cwd => "C:\\"
    ) 
```

由于 win32-process 库是基于在 windows 上使用进程和线程的，因此我尝试通过[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686937%28v=vs.85%29.aspx)帮助查看它。在阅读[创建控制台](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682528%28v=vs.85%29.aspx)文章时，我发现 GetStdHandle 方法可用于获取输入和输出流的句柄。但是，我在 win32 进程中的任何地方都找不到这种方法。

有人可以为我提供一些关于如何进行步骤 2 和 3 的指导吗？

另外，有没有其他方法可以用来解决手头的问题？

另外，我想了解更多关于进程间通信或一般进程的产生和分叉的信息，所以有人可以告诉我一些我可以研究它们的好的参考吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T18:10:54.357

这是一个在 Windows 中使用 IO.popen 的示例，imo 如果它与 stdlib 一起使用，请不要使用 gem

```
IO.popen("other_program", "w+") do |pipe|
  pipe.puts "here, have some input"
  pipe.close_write  # If other_program process doesn't flush its output, you probably need to use this to send an end-of-file, which tells other_program to give us its output. If you don't do this, the program may hang/block, because other_program is waiting for more input.
  output = pipe.read
end

# You can also use the return value from your block. (exit code stored in $? as usual)
output = IO.popen("other_program", "w+") do |pipe|
  pipe.puts "here, have some input"
  pipe.close_write
  pipe.read
end 
```