# StackOverflow 问答 10482000-10482999

# javascript - 如何从字符串中删除后缀？

> ID：10482002
> 
> 赞同：3
> 
> 时间：2012-05-07T12:22:08.060
> 
> 标签：javascript

如何删除以下后缀：

1.  像素
2.  %
3.  时间

来自某个字符串，如果它包含那个后缀？
就像输入一样，我得到的字符串可以衡量 div 的宽度，可以以 'px'、'%'、'em' 结尾，也可以没有，所以我需要删除后缀（如果存在）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T12:23:52.950

```
var s = "34em";
parseInt(s, 10); // returns 34 
```

这适用于`em, px, %, pt`... 和任何其他后缀，即使它之前有空格。

`parseFloat()`如果您有非整数值，请改用

```
var s = "81.56%";
parseFloat(s); // returns 81.56 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-07T12:26:39.237

您可以使用正则表达式来获取仅包含数字的字符串：

```
var s = input.replace(/\D+/g, ''); 
```

您可以将字符串解析为数字，这将忽略末尾的非数字字符：

```
var n = parseInt(input, 10); 
```

# c++ - 制作工作台类型界面的想法

> ID：10482004
> 
> 赞同：1
> 
> 时间：2012-05-07T12:22:24.520
> 
> 标签：c++, qt, user-interface

我正在查看 MeVisLab 用于生成数据视图的界面，我发现这种查看控制结构的方式非常直观。

![MeVisLab](../Images/0d8bc49b0b228d7ee22d3d9a24197e3a.png)

尤其是我喜欢的连接盒，有没有提供这种接口的框架。我知道它可以使用 Qt 来完成，但请注意它需要大量的工作。

有谁知道制作这种 gui 的框架？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T12:46:59.687

这不是 c++，但我认为它涵盖了你的问题，所以我建议[WireIt](http://neyric.github.com/wireit/index.html)。

例子：

*   [http://neyric.github.com/wireit/plugins/editor/examples/logicGates/index.html](http://neyric.github.com/wireit/plugins/editor/examples/logicGates/index.html)
*   [http://neyric.github.com/wireit/plugins/composable/examples/jsBox/jsBox.html](http://neyric.github.com/wireit/plugins/composable/examples/jsBox/jsBox.html)

它是一个 Java Script 库，所以浏览器就是你的 GUI。但我真的认为，使用浏览器是一件好事。学习 HTML、CSS 和 Java Script 与学习新的 GUI 框架一样困难。你可以专注于 HTML5 而忽略旧的浏览器，也许可以使用像 jQuery 这样的好库，这就像 js 的提升。即使您的 GUI 只能在 Firefox 上运行，您仍然会支持比大多数 GUI-Toolkits 更多的平台。

您当然必须在您的 c++ 代码中嵌入一个小型 http-server，您可以使用[libmicrohttpd](https://www.gnu.org/software/libmicrohttpd/)或[mongoose](https://code.google.com/p/mongoose/)。

最后，您使用了非常可重用的工具，并且比 GUI 框架具有更广泛的适用性。

# iphone - 在appstore上发布应用程序时不显示分发配置文件？

> ID：10482019
> 
> 赞同：0
> 
> 时间：2012-05-07T12:23:06.573
> 
> 标签：iphone, app-store, distribution

我已成功创建配置和分发证书并准备上传我的应用程序。但是，在发布时我无法访问以选择分发配置文件？![在此处输入图像描述](../Images/a039dfeef61ef62b8483106081d178ff.png)

![在此处输入图像描述](../Images/23925f514abcf5735dcd4ce198d62978.png)

![在此处输入图像描述](../Images/99dae16d684123fc94d06cf4893a2cb6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:00:03.917

@NeerajNeeru：

首先，确保从您要提交应用程序的帐户下载 App Store 分发配置文件的新副本，并通过双击安装相同的配置文件。`Project Settings`一旦你这样做，在你的和部分`Target Settings`下选择它`Release`。

其次，在构建归档和归档应用程序之前，请确保您已选择在 under under 下`Release`运行。`Archive``Manage Schemes`

一旦您在in`Release`下选择，请确保您执行您的应用程序，然后执行，然后执行。`Archive``Manage Schemes``Product -> Clean``Product -> Build For Archiving``Product -> Archive`

**编辑：**

参考这个：[Xcode 4.3: Codesign operation failed（检查你选择的身份是否有效）](https://stackoverflow.com/questions/9386925/xcode-4-3-codesign-operation-failed-check-that-the-identity-you-selected-is-va)

如果您需要更多帮助，请告诉我

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T12:36:46.097

我想你还没有打开下载的配置文件，从 developer.apple.com 下载配置文件并双击它。它现在可以选择，并在您的项目和目标文件中重新分配配置文件，即使他们已经选择了。

# bash - 从某些文件读取时连接字符串失败

> ID：10482023
> 
> 赞同：3
> 
> 时间：2012-05-07T12:23:23.187
> 
> 标签：bash

我有一个部署到服务器的 Web 应用程序。我正在尝试创建一个脚本，它可以从与应用程序一起部署的属性文件中读取 Web 应用程序的当前版本。

该文件如下所示：

```
//other content
version=[version number]
build=[buildnumber]
//other content 
```

我想创建一个看起来像这样的变量：`version-buildnumber`

这是我的脚本：

```
VERSION_FILE=myfile

VERSION_LINE="$(grep "version=" $VERSION_FILE)"
VERSION=${VERSION_LINE#$"version="}
BUILDNUMBER_LINE=$(grep "build=" $VERSION_FILE)
BUILDNUMBER=${BUILDNUMBER_LINE#$"build="}
THEVERSION=${VERSION}-${BUILDNUMBER} 
```

奇怪的是，这在某些情况下有效，但在其他情况下无效。我遇到的问题是当我尝试连接字符串时（即上面的最后一行）。在某些情况下，它可以完美运行，但在其他情况下，一个字符串中的字符会替换另一个字符串中的字符，而不是在之后放置。

在这些情况下它不起作用**：**

*   当我从部署的文件中读取
*   如果我将部署的文件复制到另一个位置并从那里读取

它在这些情况下**确实有效：**

*   如果我从头开始编写文件并从该文件中读取。
*   如果我创建自己的文件，然后将部署文件中的内容复制到我创建的文件中。

我觉得这很奇怪。有没有人认识到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:34:22.697

鉴于此`foo.txt`：

```
//other content
version=[version number]
build=[buildnumber]
//other content 
```

您可以使用以下方法更轻松地提取版本构建字符串`awk`：

```
awk -F'=' '$1 == "version" { version = $2}; $1 == "build" { build = $2}; END { print version"-"build}' foo.txt 
```

我不知道为什么你的脚本不起作用。你能提供一个错误输出的例子吗？

从这句话：

> 在某些情况下，它可以完美运行，但在其他情况下，一个字符串中的字符会替换另一个字符串中的字符，而不是在之后放置。

我不明白到底发生了什么（我不是以英语为母语的人，所以这可能是我的错）。

干杯，贾科莫

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T13:57:55.027

您的文件中可能包含回车符。您可以通过`dos2unix`在文件上运行来解决此问题。

您也可以在正在检索的字符串上即时执行此操作。

这里有几种方法：

用`sed`代替`grep`：

```
VERSION_LINE="$(sed -n "/version=/{s///;s/\r//g;p}" $VERSION_FILE)" 
```

并且您不需要 Bash 参数扩展来去除“版本 =”。

或者

照`grep`你现在做的，做第二个参数扩展来去掉回车。

```
VERSION=${VERSION_LINE#$"version="}
VERSION=${VERSION//$'\r'} 
```

顺便说一句，我建议习惯性地使用小写或混合大小写的变量名，以减少名称冲突的机会。

# ios - 如何在 MonoTouch 中移植很棒的 PhotoScrollerNetwork？

> ID：10482024
> 
> 赞同：0
> 
> 时间：2012-05-07T12:23:25.330
> 
> 标签：ios, xamarin.ios, uiscrollview, porting, catiledlayer

我正在尝试将 PhotoScrollerNetwork 应用程序移植到 MonoTouch（iOS 5 Apple PhotoScroller 示例的改进版本），但代码正在执行我无法在 MonoTouch 中重现的事情。

[https://github.com/dhoerl/PhotoScrollerNetwork](https://github.com/dhoerl/PhotoScrollerNetwork)

例如，内存管理很难在 MonoTouch 中重现，没有它就会崩溃。作者（dhoerl）在自述文件中写道：

> v2.0： - iPad1 和 iPhone3GS（只有 256M 内存）在没有操作系统警告的情况下被杀死。因此，创建了 cdisk 缓存使用上限，并在达到阈值时刷新文件（以释放内存）。崩溃消失了。

在 MonoTouch 中移植以下类非常复杂：

[TiledImageBuilder.m](https://github.com/dhoerl/PhotoScrollerNetwork/blob/de4e266f313d080d363b757b5f3ab36b58b31bf9/PhotoScroller/Classes/TiledImageBuilder.m)

由于他的 GC，也许 MonoTouch 中还有另一种更简单的方法来处理上述内存管理技巧。有其他人尝试移植 PhotoScrollerNetwork 应用程序并想分享吗？

任何建议表示赞赏，谢谢。

# c# - 使用 Graphics.ScaleTransform 时 Pen 的缩放比例不正确

> ID：10482032
> 
> 赞同：1
> 
> 时间：2012-05-07T12:24:00.737
> 
> 标签：c#, winforms, graphics, scaletransform

`Graphics.ScaleTransform()`在我的方法中使用比例变换（ - 请参阅[MSDN](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.scaletransform.aspx)）绘制一条线时，我看到了奇怪的行为`OnPaint()`。

当该方法使用较大的 y 比例因子时`ScaleTransform`，如果 x 比例设置为 1x 以上，则线会突然变得更大。

将画线的笔宽设置为-1似乎可以解决问题，但我不想画很细的线（线必须稍后打印，1px太细了）。

这是一些示例代码来演示该问题：

```
public class GraphicsTestForm : Form
{
    private readonly float _lineLength = 300;
    private readonly Pen _whitePen;

    private Label _debugLabel;

    public GraphicsTestForm()
    {
        ClientSize = new Size(300, 300);

        Text = @"GraphicsTest";
        SetStyle(ControlStyles.ResizeRedraw, true);

        _debugLabel = new Label
        {
            ForeColor = Color.Yellow,
            BackColor = Color.Transparent
        };
        Controls.Add(_debugLabel);

        _lineLength = ClientSize.Width;
        _whitePen = new Pen(Color.White, 1f); // can change pen width to -1
    }

    protected override void OnPaint(PaintEventArgs e)
    {
        base.OnPaint(e);

        float scaleX = ClientSize.Width / _lineLength;
        const int ScaleY = 100;

        e.Graphics.Clear(Color.Black);

        _debugLabel.Text = @"x-scale: " + scaleX;

        // scale the X-axis so the line exactly fits the graphics area
        // scale the Y-axis by scale factor
        e.Graphics.ScaleTransform(scaleX, ScaleY);

        float y = ClientSize.Height / (ScaleY * 2f);
        e.Graphics.DrawLine(_whitePen, 0, y, _lineLength, y);

        e.Graphics.ResetTransform();
    }
} 
```

我希望线条/笔能够优雅地缩放，而不会如此显着地跳跃。

（另外，我注意到当线条很大时，它不会在多个显示器上连续绘制。也许这有关系？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T12:39:58.233

尝试根据比例改变笔宽：

```
 _whitePen = new Pen(Color.White, 1f / ScaleY); 
 e.Graphics.DrawLine(_whitePen, 0, y, _lineLength, y); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-11T11:48:25.123

我只是补偿了笔线几何形状的整体缩放；-

```
m_Pen->SetWidth(1.0f);
m_Pen->ScaleTransform(1.0f / ZoomX, 1.0f / ZoomY); 
```

# sql-server - 按 ShopName Count 分组不同类型的客户（会员）

> ID：10482033
> 
> 赞同：0
> 
> 时间：2012-05-07T12:24:02.303
> 
> 标签：sql-server, linq

我们有 2 张桌子

**表 1**
有店铺详情的店铺

```
ShopNo, ShopName 
```

**表 2**
拥有所有客户详细信息的客户

```
CustomerId, CustomerName, MembershipType, ShopId 
```

我们要查询的是

```
ShopName   SilverMember GoldMember LifeMember

ABC        45           110        1

XYZ        90           0          10

DEF        10           10         7 
```

有没有办法让它成为可能

如果在 Linq 中很好，否则只有 sql 查询会提前谢谢

问候莫克沙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T12:32:37.657

这样的事情应该可以解决问题：

```
select s.ShopName,
       count(c1.CustomerId) as 'SilverMember',
       count(c2.CustomerId) as 'GoldMember',
       count(c3.CustomerId) as 'LifeMember'
from Shop s
left outer join Customer c1 on c1.ShopId = s.ShopNo and c1.MembershipType = 'SilverMember'
left outer join Customer c2 on c2.ShopId = s.ShopNo and c2.MembershipType = 'GoldMember'
left outer join Customer c3 on c3.ShopId = s.ShopNo and c3.MembershipType = 'LifeMember'
group by s.ShopName 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T13:50:38.900

假设`MembershipType`包含实际的 VARCHAR 值`SilverMember`、`GoldMember`和`LifeMember`，这应该在 T-SQL 中工作：

```
SELECT
    [ShopName], COUNT([SilverMember]) AS [SilverMember], COUNT([GoldMember]) AS [GoldMember], COUNT([LifeMember]) AS [LifeMember]
FROM
    [Table1]
    INNER JOIN [Table2]
        ON [Table1].[ShopNo] = [Table2].[ShopId]
    PIVOT
    (
        MAX([MembershipType])
            FOR [MembershipType] IN ([SilverMember], [GoldMember], [LifeMember])
    ) AS [P]
GROUP BY
    [ShopName] 
```

[SQL Fiddle 示例](http://www.sqlfiddle.com/#!3/a2e15/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T13:47:22.030

如果你想使用 linq：

```
var query = from s in context.Shops
            join c in context.Customers on s.ShopNo equals c.ShopId
            group c by s.ShopName into g
            select new 
            {
              ShopName = g.Key,
              SilverMember = g.Count(c => c.MembershipType == "SilverMember"),
              GoldMember= g.Count(c => c.MembershipType == "GoldMember"),
              LifeMember= g.Count(c => c.MembershipType == "LifeMember"),
            }; 
```

# javascript - textarea 螺丝表单的 Javascript 表单验证错误消息

> ID：10482038
> 
> 赞同：0
> 
> 时间：2012-05-07T12:24:36.133
> 
> 标签：javascript, forms, validation, message, innerhtml

好的，所以我正在用我对 JavaScript 的一点了解来做我课程的基本表单验证脚本书到了，以后会学到更多，现在我只是在做一个基本的验证脚本。

我只想知道为什么当我尝试为 textarea 显示错误消息时，表单突然开始完全重置。

表格 1 有效 [http://www.richie.id.au/TAFE/form/enquiry.html](http://www.richie.id.au/TAFE/form/enquiry.html) 表格 2 无效 [http://www.richie.id.au/TAFE/form2/enquiry.html](http://www.richie.id.au/TAFE/form2/enquiry.html)

两者之间的唯一区别是这段代码会导致错误消息消失：

```
 //Message message action if true of false
    if(messageMessage==true){
        document.getElementByID('messageError').innerHTML='*Please enter a message*';
    }
    if(messageMessage==false){
        document.getElementByID('messageError').innerHTML='';
    } 
```

它与我的其他消息相同，因此我不确定为什么它会导致表单错误消息仅显示一秒钟然后消失。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:27:02.957

**document.getElementByID**应该是：

```
document.getElementById('messageError')... //small d not capital D 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T12:45:38.400

您的表单因其提交而正在重置（在第二种情况下）。您输入错误`http://www.richie.id.au/TAFE/form2/clientSideValidator.js`：

```
 if(messageMessage==true){
        document.getElementByID('messageError').innerHTML='*Please enter a message*';
    }
    if(messageMessage==false){
        document.getElementByID('messageError').innerHTML='';
    } 
```

替换为：

```
if(messageMessage==true){
    document.getElementById('messageError').innerHTML="*Please enter a message*";
}
if(messageMessage==false){
    document.getElementById('messageError').innerHTML='';
} 
```

# internet-explorer - return false 在 IE 中不起作用

> ID：10482041
> 
> 赞同：0
> 
> 时间：2012-05-07T12:24:50.557
> 
> 标签：internet-explorer, onsubmit

我遇到了一个奇怪的小问题。在四处搜索以修复表单提交后刷新页面后，我发现您可以使用“return false”。我很高兴看到它在 FF 中有效，但是当我在 IE 中尝试时……它仍然刷新了页面。

这是代码的重要部分：

```
<form action="" onsubmit="event.preventDefault(); showAddress(this.address.value); return false">
    <table cellspacing="0" cellpadding="0" border="0">
        <tr>
            <td><h3>address:</h3></td>
        </tr>
        <tr>
            <td><input type="text" size="60" name="address" value="" /></td>
            <td>&nbsp;</td>
            <td><button type="submit" value="Zoek!">Zoek!</button></td>
        </tr>
    </table>
</form> 
```

如何确保它不会在 IE 中刷新？

提前致谢！

**编辑** 我现在改变了它，所以我不再使用表格。相反，我使用按钮的 onclick 事件。感谢 Shin 指出我的错误。

```
<table cellspacing="0" cellpadding="0" border="0">
   <tr>
      <td><h3>address:</h3></td>
   </tr>
   <tr>
      <td><input type="text" size="60" name="address" value="" /></td>
      <td>&nbsp;</td>
      <td><button type="submit" onclick="showAddress(this.value); value="Zoek!">Zoek!</button></td>
   </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:27:07.130

您可以将 preventDefault() 放在提交按钮的 onclick 事件上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T12:29:26.823

处理 JS 中按钮的 onclick 事件并在 JS 处理程序中添加以下行

```
//e.cancelBubble is supported by IE - this will kill the bubbling process.
e.cancelBubble = true;
e.returnValue = false; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T12:35:38.450

您可以在点击函数中调用所有函数

# oop - Scala 类、对象、案例类、文字

> ID：10482042
> 
> 赞同：1
> 
> 时间：2012-05-07T12:24:55.540
> 
> 标签：oop, scala, smalltalk

只是试图让我了解 Scala 的基本概念。因此，每次使用关键字“new”实例化一个类时，我们都会得到一个新对象。用 object 关键字声明的单例对象不能用关键字“new”实例化，因为只能有一个。从某种意义上说，它是在编译时实例化的。

4 是 Int 的案例类吗？5.07是Double的案例类吗？

4是一个对象吗？

类本身有时是对象，还是总是对象？

函数是对象。它们也是类的实例？这如何结合在一起？

Scala 是否像 Smalltalk 一样纯粹面向对象，还是在 OO 方面做出了一些妥协？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-07T13:07:39.420

当您使用`new`运算符实例化一个类时，您将获得该类的一个新实例。新实例是一个对象。

`object`您可以使用关键字声明单例对象。说它在编译时被实例化并没有任何意义。对象仅在程序运行时存在，而不是在此之前（例如在编译程序时）。An`object`在第一次使用时被实例化。

> 4 是 Int 的案例类吗？5.07是Double的案例类吗？

No. 4 和 5.07 只是类`Int`和`Double`. 在 Scala 中，它们的行为方式与对象相同，但在幕后 4 和 5.07 并不是真正的对象。要理解这一点，您必须了解标准 Scala 类层次结构。

层次结构的顶部是类型`Any`。一切延伸`Any`。`Any`有两个直接子类型：`AnyVal`和`AnyRef`。

*   `AnyVal`是所有值类型的超类型。值类型是映射到 JVM 原始类型的类型（例如：`Int`-> `int`、`Double`->`double`等）。
*   `AnyRef`是所有引用类型（“常规”对象）的超类型。

在运行时，所有扩展`AnyRef`的都是幕后的对象，而所有扩展`AnyVal`的都不是真正的对象；它映射到原始类型。

案例类只是一种语法糖。案例类与普通类完全相同，只是编译器会自动为您添加一些方法（例如，这使得它们适用于模式匹配）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T12:47:39.990

4 和 5.07 不是对象。它们只是[Int](http://www.scala-lang.org/api/current/scala/Int.html)和[Double](http://www.scala-lang.org/api/current/scala/Double.html)类的实例。[在这里](http://www.scala-lang.org/node/128)查看层次结构。

对象在编译时未实例化。当您第一次访问它时，它会被实例化（在对象主体/构造函数执行的意义上）。

函数也不是对象，它们是扩展 FunctionN 的匿名类的实例（例如[Function2](http://www.scala-lang.org/api/current/scala/Function2.html)）。但是是的，有[object](http://www.scala-lang.org/api/current/scala/Function$.html)，它提供了一些常见的实用程序，允许您编写：

```
//instance of Function2
scala> val sum = (x: Int, y: Int) => x+y
sum: (Int, Int) => Int = <function2>

scala> sum.curried
res0: Int => (Int => Int) = <function1>

// now back to uncurried version with Function object
scala> Function.uncurried(res0)
res1: (Int, Int) => Int = <function2> 
```

如果您对普通类和案例类之间的区别感兴趣，请看[这里](https://stackoverflow.com/questions/2312881/what-is-the-difference-between-scalas-case-class-and-class)。

不幸的是，与 smalltalk 相比，我不知道 smalltalk 来假设 scala oop 纯度。

# c++ - 如何在异步提升中只读取一个数据包数据？

> ID：10482043
> 
> 赞同：2
> 
> 时间：2012-05-07T12:25:09.097
> 
> 标签：c++, boost, tcp, boost-asio

我有一个 tcp 客户端需要通过 tcp 读取数据，但我每次都需要读取一个 tcp 数据包数据。

我使用这个代码：

```
 socket_[socket_index]->async_receive(
            boost::asio::buffer(buf, max_size),
            boost::bind(
              &pipe::handle_read, shared_from_this(),
              boost::asio::placeholders::error,
              socket_index,
              boost::asio::placeholders::bytes_transferred)); 
```

但有时我读取了多个数据包。我需要将其更改为仅读取一个数据包数据吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T16:45:53.423

你就是不能。您对网络概念感到困惑，TCP 比这更高级别。

如果您确实需要处理单个数据包，请使用 UDP。对于您的最小情况，很容易切换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T05:50:29.633

TCP 不是面向数据包的——它的数据流。数据包可以在任何一侧合并在一起，依此类推。我使用以下技术来读取数据包：

```
async_read(sock, asio::buffer(buf, sizeof(packet_header)), ... 
```

例如，只读数据包阅读器。现在，我在异步读取处理程序中拥有完整的逻辑数据包长度，所以我可以`asio::read`准确地读取字节数来读取其余的逻辑数据包；然后`async_read`再次设置以等待下一个数据包头。

如果您的标头中没有逻辑数据包长度，则无法检测逻辑数据包的结束位置（在 TCP 情况下）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T20:55:44.857

在实践中控制的方式是传递您想要读取的字节数而不是缓冲区的大小。

您可以将数据包中的字节数放在数据包标头中的标准偏移量中。首先读取包头的大小。然后取数据包中的字节数（减去数据包头的大小）并读取那么多字节。

或者，继续让它读取多个数据包。处理该数据包。处理完第一个数据包后，判断是否读取了多个数据包，如果是，则将其 memcpy 到数据包缓冲区的开头。如果缓冲区中有一个完整的数据包，请处理，如果没有，请在 memcpy 结束的末尾阅读更多内容。

# c# - 如何使用 C# 查找 Exchange 服务器的数据库名称

> ID：10482051
> 
> 赞同：1
> 
> 时间：2012-05-07T12:25:50.033
> 
> 标签：c#, active-directory, ldap, exchange-server

我正在使用带有 C# 的 LDAP 为 ActiveDirectory 中的用户创建邮箱。在创建邮箱时，我们需要设置“homeMDB”属性。“homeMDB”的语法是

> CN=DB1,CN=SG1,CN=InformationStore,CN=Exchange1,CN=Servers,CN=AG1,CN=Administrative Groups,CN=Organization,CN=Microsoft Exchange,CN=Services,CN=Configuration,DC=contoso, DC=com

其中“DB1”是 Exchange 服务器的数据库名称。

谁能告诉我如何使用 C# 以编程方式查找 Exchange 服务器的数据库名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T15:27:06.697

`displayName`和/或属性在`name`这里很有用。所有数据库都位于您突出显示的一般区域中。您必须在每个服务器和存储组下进行搜索。从外观上看，您使用的是 Exchange 2003 或 2007，请记住，数据库名称不是全球唯一的。

# email - CDO.Message .Send 导致脚本执行超时

> ID：10482053
> 
> 赞同：1
> 
> 时间：2012-05-07T12:25:50.243
> 
> 标签：email, asp-classic, smtp

我有以下代码：

```
Set myMailanon = CreateObject("CDO.Message")
myMailanon.MimeFormatted = True

Set myConfanon = Server.CreateObject("CDO.Configuration")
Set objBPanon = myMailanon.AddRelatedBodyPart("http://www.foo.bar/img/logo1.jpg", "http://www.foo.bar/img/logo1.jpg", CdoReferenceTypeName)
objBPanon.Fields.Item("urn:schemas:mailheader:Content-ID") = "<http://www.foo.bar/img/logo1.jpg>" 
objBPanon.Fields.Update 
ConfURLanon = "http://schemas.microsoft.com/cdo/configuration/"

with myConfanon        
  .Fields.Item(ConfURLanon & "sendusing") = 2        
  .Fields.Item(ConfURLanon & "smtpserver") = "smtp.foo.bar"        
  .Fields.Item(ConfURLanon & "smtpserverport") = 25     
  .Fields.Item(ConfURLanon & "smtpusessl") = false
  .Fields.Item(ConfURLanon & "smtpauthenticate") = 1
  .Fields.Item(ConfURLanon & "sendusername") = "foo@bar.com"
  .Fields.Item(ConfURLanon & "sendpassword") = "foobarpass"
  .Fields.Update
end with

with myMailanon
  .Subject='Foo!! Bar!!'
  .From='Foo!! Bar!! <foo@bar.com>'      
  .To='foo@bar.com,bar@foo.com'      
  txt="This is foo... bar... text... SPARTAAAAAAAAA"
  .HTMLBody = txt
  Set .Configuration = myConfanon   
  On Error Resume Next 
  .Send      
end with 
```

问题是这段代码运行 100 次，运行 30 次，失败 70 次。随机。“失败”是指它会导致脚本执行超时。

在逐行注释之后，我得出的结论是错误来自“.Send”。但为什么？有任何想法吗？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T19:58:55.243

代码没有任何问题（虽然`CdoReferenceTypeName`看起来有点可疑，但这可能只是变量命名不佳）。可能只是 SMTP 服务器很忙，因此需要一段时间来处理发送。

您可以在 IIS 管理器中检查为 ASP 功能指定的脚本超时值。默认情况下它应该是 90 秒，但可能由于某种原因它被设置为一个较低的值。

您可以通过在代码中指定脚本来增加脚本的时间量。

```
Server.ScriptTimeout = 300 
```

这将使您的脚本有 5 分钟的时间。这很可能掩盖了您的 Web 服务器和 SMTP 服务器之间的一些设置问题，但它可能会提高成功率。否则，您可能会得到相同的结果，但 70% 的故障需要更长的时间才能发生。

不管是什么原因，我不认为它是你的代码。

# php - 使用 PHP 创建缩略图或手动添加缩略图？

> ID：10482054
> 
> 赞同：3
> 
> 时间：2012-05-07T12:25:54.510
> 
> 标签：php, imagemagick

我有一个名为“Gallery”的文件夹，我在其中创建了一个名为“Gallery-Thumbs”的缩略图文件夹，我在其中手动添加缩略图。

我的问题是手动添加缩略图或使用“GD”或“ImageMagick”动态创建缩略图是否更好。

手动添加缩略图的问题

*   如果我忘记为照片添加缩略图，画廊链就会中断
*   调整所有图像的大小以创建缩略图很乏味

那么使用 PHP ImageProcessing 函数是否会在创建缩略图时增加额外的开销，或者是正确的方法吗？

--**更新回答查询**

1.  如何将图像添加到“画廊”文件夹？

    *   通过直接文件上传
2.  如何访问这些图像和缩略图？

    *   我使用 glob 获取各个文件夹中的文件列表
3.  您如何（想要）将图像映射到缩略图？

    *   对于缩略图，我使用 imageName-thumb.jpg，因此它们出现在列表中的顺序与它们在主图像文件夹中的顺序相同

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T12:31:06.863

使用 PHP 创建**一次**缩略图，并将它们保存在具有相同文件名的“缩略图”目录中。然后直接使用这些现在可以使用的缩略图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T12:31:36.987

如果您使用一些动态图像处理工具，那么这将是一个非常耗时的过程，但它会是一项很棒的技术。

如果您要使用手动过程，那么：

*   使用一些客户端脚本强制缩略图
*   这取决于您的图像方向

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T12:51:13.547

我在上传过程中创建缩略图，或者保存在具有相同名称的不同目录中，或者将 th_ 添加到文件名的前面。您还可以上传一些代码以再次为您当前在图库中拥有的图像生成所有拇指，以防您错过任何一个。您还可以同时调整大小，添加水印或添加其他效果。这是我的画廊，我有一个拇指和正常大小；拇指在上传时被锐化并且正常的水印。两个版本都有阴影，调整大小等都是用 Imagemagick 完成的。 [http://www.rubble.info/gallery/](http://www.rubble.info/gallery/)

如果您在显示之前检查文件是否存在并且它丢失了，您可以显示默认图像。

你可以查看我的网站，了解可以用 php 和 Imagemagick 做的许多不同的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T12:54:57.173

我强烈建议使用带有某种缓存的 GD 来保留那些不变的缓存。然而，已经有一个很棒的库可以做到这一点。它绝对是我的最爱，只需使用 GET URL 即可轻松进行图像压缩和调整大小。

通过 ShiftingPixel 尝试 Smart Image Resizer：http: [//shiftingpixel.com/2008/03/03/smart-image-resizer/](http://shiftingpixel.com/2008/03/03/smart-image-resizer/)

如果您愿意，您可以使用我使用其页面来源制作的网站作为参考：[http ://www.eastwood-whelpton.co.uk/about/gallery.php](http://www.eastwood-whelpton.co.uk/about/gallery.php)

该网站上的几乎所有图像都使用 Smart Image Resizer GD 库。

如果您需要示例，我还可以提供我使用的 PHP 代码。此特定代码会自动将在我的画廊文件夹中找到的任何图像添加到此页面。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-10T21:54:40.470

如前所述，您需要支持 GD 的 PHP 5。如果您有这些，那么这里有一个非常方便的功能，可以`$options`从给定目录 ( ) 中的每个图像创建给定尺寸和质量 ( ) 的缩略图`$from_dir`并将它们保存到另一个目录 ( `$to_dir`)。

```
function make_thumbnails($from_dir,$to_dir, $options){
    $files = scandir($from_dir);
    $exclude = array('.','..','etc.');
    foreach($files as $fi => $fv){
        if(!in_array($fv,$exclude)){
            $from_file = $from_dir.$fv;
            $to_file = $target_dir.$fv;
            list($img_width, $img_height,$img_type) = getimagesize($from_file);
            $scale = min($options['max_width'] / $img_width,
                                        $options['max_height'] / $img_height
                               );
            $new_width = $img_width * $scale;
            $new_height = $img_height * $scale;
            $new_img = imagecreatetruecolor($new_width, $new_height);
            $src_img = imagecreatefromjpeg($from_file);
            $success = $src_img && imagecopyresampled(
                    $new_img,
                    $src_img,
                    0, 0, 0, 0,
                    $new_width,
                    $new_height,
                    $img_width,
                    $img_height
            ) && imagejpeg($new_img, $to_file, $options['quality']);
                              //Monitor results with $success - returns 1 or null
            echo '<br />success:['.$success.']';
        }
    }
}

//Set options
$from_dir = ':/source/dir';
$to_dir = ':/destination/dir';
$options = array();
$options['max_width'] = 100;
$options['max_height'] = 100;
$options['quality'] = 100;

// Make thumbs...
make_thumbnails($from_dir,$to_dir,$options); 
```

# android - Android 相机表面视图

> ID：10482057
> 
> 赞同：11
> 
> 时间：2012-05-07T12:26:11.040
> 
> 标签：android, android-camera

我正在尝试为相机创建一个表面视图，以便它在相机视图中时呈现在表面上。目前，我在相机视图上只能看到黑屏视图。我试图在谷歌和这里查看，但到目前为止我还没有找到我要找的东西。任何人都可以建议我一些想法。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-07T13:22:13.273

我写了一个可以帮助你的类。

```
 public class Preview_can_work extends Activity {
        private SurfaceView surface_view;  
        private Camera mCamera;
        SurfaceHolder.Callback sh_ob = null;
        SurfaceHolder surface_holder        = null;
        SurfaceHolder.Callback sh_callback  = null;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            getWindow().setFormat(PixelFormat.TRANSLUCENT);

            surface_view = new SurfaceView(getApplicationContext());
            addContentView(surface_view, new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));

            if (surface_holder == null) {
                surface_holder = surface_view.getHolder();
            }

            sh_callback = my_callback();
            surface_holder.addCallback(sh_callback);
        }

            SurfaceHolder.Callback my_callback() {      
                SurfaceHolder.Callback ob1 = new SurfaceHolder.Callback() {

                    @Override
                    public void surfaceDestroyed(SurfaceHolder holder) {
                          mCamera.stopPreview();
                          mCamera.release();
                          mCamera = null;
                    }

                    @Override
                    public void surfaceCreated(SurfaceHolder holder) {
                        mCamera = Camera.open();

                          try {
                               mCamera.setPreviewDisplay(holder);  
                          } catch (IOException exception) {  
                                mCamera.release();  
                                mCamera = null;  
                          }
                    }

                    @Override
                    public void surfaceChanged(SurfaceHolder holder, int format, int width,
                            int height) {
                        mCamera.startPreview();
                    }
                };
                return ob1;
        }
    } 
```

在您的清单文件中复制此代码以获得相机权限

```
<uses-permission android:name="android.permission.CAMERA"/> 
```

解释：

SurfaceView 是一种包含 SurfaceHolder 的 View。SurfaceHolder 持有我们可以在其上显示媒体（通常是框架）的表面。

`mCamera`是一个包含相机实例的相机对象。

当您想保留默认相机实例时，您可以简单地调用`Camera.open();`

```
Camera mCamera = Camera.open(); 
```

现在你有一个打开的相机或者你有默认的相机实例。现在您需要从相机捕获帧并将其显示在表面上。但是你不能在没有任何东西的情况下显示它

`surface`. 这里`surfaceView`提供`surfaceHolder`和`surfaceHolder`提供`surface`显示相机帧。现在何时`surface`创建三个回调函数

叫。

```
1\. public void surfaceCreated(SurfaceHolder holder)
2\. public void surfaceChanged(SurfaceHolder holder, int format, int width, int height)
3\. public void surfaceDestroyed(SurfaceHolder holder) 
```

注意：- 当您的应用程序暂停时，Surface 将被销毁。

`surfaceCreated:` surfaceCreated 是一个回调函数，将在创建表面时调用。在此，您可以打开相机并设置其他属性。

`surfaceChanged`：这将在创建表面时至少调用一次。之后，只要您的表面发生变化（在设备旋转中），它就会被调用。在这里你可以

开始您的预览，因为您的表面已经创建。

`surfaceDestroyed`：每次你的表面将被破坏时都会调用它。现在，如果您没有表面，那么您可以在哪里显示相机帧，所以我通过使用释放相机

`mCamera.release()`. 这非常重要，因为如果您的活动将暂停并且任何其他活动试图打开相机，那么它将无法像您一样打开它

已经打开相机。相机是一种共享资源，因此一次只有一个应用程序可以使用它。因此，每当您打开相机时，请记住一件事，然后始终释放它。

`stopPreview`：当您开始预览时，您的相机开始捕捉您的帧并将其显示在表面上。现在，如果您的表面已损坏，那么您需要停止捕获帧

从相机，所以你必须打电话`mCamera.stopPreview`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T12:34:03.007

确保您添加了权限：

> `<uses-permission android:name="android.permission.CAMERA"/>`

还有这些窗口属性：

```
getWindow().setFormat(PixelFormat.TRANSLUCENT);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN | WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON,
                 WindowManager.LayoutParams.FLAG_FULLSCREEN | WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
```

如果这不起作用，请发布一些代码以帮助您

# mongodb - C#：在 MongoDB 文档中查找嵌套数组

> ID：10482058
> 
> 赞同：0
> 
> 时间：2012-05-07T12:26:13.313
> 
> 标签：mongodb, mongodb-.net-driver

我想找到一个嵌套在文档中的数组。文档结构是这样的：

```
{
  name:himani;
  user:
  {
    Id: 1,
    Qualification: Programmer,
    PhoneNo: [2524785, 9983410902]
  }
} 
```

现在我想找到 PhoneNo 并添加一个新号码。我正在使用 C# 驱动程序。请告诉我这样做的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T00:23:28.180

假设您要在名为 hinami 的文档中添加一个新的 PhoneNo 9876543210：

```
peopleCollection.Update(Query.EQ("name", "himani"), Update.Push("user.PhoneNo", "9876543210")); 
```

# drupal - 用户警告：BIGINT UNSIGNED 值超出通知事件表中的范围

> ID：10482059
> 
> 赞同：0
> 
> 时间：2012-05-07T12:26:15.727
> 
> 标签：drupal, notifications

我正在使用 Notifications 6.x-2.3 进行内容订阅，它运行良好，但是当我连续创建超过 4 个博客时，我在保存博客后遇到了这个问题：

用户警告：BIGINT UNSIGNED 值超出“（... - 88）”查询的范围`db_name`：`notifications_event`更新`counter`通知事件集计数器 = 计数器 - 88 WHERE eid = 9 in /sites/all/modules/notifications/notifications.cron.inc 在线387

虽然邮件正在发送，但有些用户收到了双重邮件。

我在[http://drupal.org/node/1561230](http://drupal.org/node/1561230)中提到了这个问题，但无法获得任何帮助。非常感谢这里的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T06:57:59.480

好的，我通过取消选中通知设置中的立即发送选项解决了这个问题。

# c++ - 如何创建一个在集合中查找对象的函数？

> ID：10482066
> 
> 赞同：0
> 
> 时间：2012-05-07T12:26:58.237
> 
> 标签：c++

我正在制作一个生成迷宫的程序，然后使用 bredth first search 在迷宫中找到一条路。我的检查容器类中是否存在元素的函数现在使用这样的向量（其中坐标路径是向量的 typedef）：

```
bool Labyrinth::inVisited(const Coordinate &c, const coordinatePath &visited ) const
{
    for each (Coordinate coord in visited)
    {
        if(coord == c)
            return true;
    }
    return false;
} 
```

由于如果元素不存在，此方法必须遍历整个容器，因此对于大型搜索非常无效。我尝试实现使用集合而不是向量的相同函数，并像这样编写它：

```
bool Labyrinth::inVisited(const Coordinate &c, const set<Coordinate> &visited ) const
{
       return (visited.find(c) != visited.end());
} 
```

当我尝试重新编译时，我得到了很多错误，其中最上面是

错误 22 错误 C2676: 二进制 '<' : 'const Coordinate' 未定义此运算符或转换为预定义运算符可接受的类型 c:\program files (x86)\microsoft visual studio 11.0\vc\include\xstddef 193

我不太了解这些特定的调试消息，想知道是否有办法实现这种更快的搜索！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T12:29:12.917

为了创建一个`std::set`对象，这些对象必须定义`operator <`。

因此，您需要添加以下运算符：

```
inline bool operator < (const Coordinate& first, const Coordinate& other); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T12:29:11.100

要使用必须定义`set`的元素，或者您需要为容器提供比较函子。显然，您的类型没有这样做，或者您提供的参数不兼容。它应该大致如下所示：`value_type``operator<``Coordinate``operator<`

```
struct Coordinate {
  bool operator<(const Coordinate& other) const { return false; }
};

// or by providing a functor
struct CmpCoord {
  bool operator()(const Coordinate& x, const Coordinate& y);
}; 
typedef std::set<Coordinate, CmpCoord> coord_set; 
```

# java - Java 真正的全局变量 (Eclipse for Android)

> ID：10482076
> 
> 赞同：1
> 
> 时间：2012-05-07T12:27:14.017
> 
> 标签：java, android, eclipse, variables

这应该是相对简单的，但是每当我寻求帮助时，我都会被 SQL 信息淹没。

基本上我有 3 个类，它们每个生成一个数字，我想在最后得到总数。有没有办法在不生成 SQLite 数据库的情况下创建一个所有 3 个类都可以添加的变量？

例子

*   Page1.java 创建 5 -> 添加到 Total

*   Page2.java 创建 12 -> 添加到 Total

*   Page3.java 创建 10 -> 添加到 Total

*   Page4.java 打开总数

就像我说的，这可能是一个简单的问题，但 SQLite 主导了我的搜索。

希望能帮到你，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T12:29:40.123

您可以为此使用静态变量。如果您不关心封装，您甚至可以为此目的使用一个公共静态变量。

例子：

```
private static int mCounter = 0;

public static void addToCounter(int i)
{
    mCounter += i;
}

public static int getCount()
{
    return mCounter;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T12:34:49.967

您可以做的是`private int count`在您的每个班级及其各自的吸气剂中拥有一个私有值。然后，您还将在每个类中都有一个方法，例如`public void doSomething(){... count = ...}`.

一旦你拥有了所有这些，`Page4`你可以做类似的事情：

公共类 Page4 { Page1 pg1 = new Page1(); 第 2 页 pg2 = 新第 2 页（）；第 3 页 pg3 = 新第 3 页（）；

```
 pg1.doSomething();
 pg2.doSomething();
 pg3.doSomething();

 int total = pg1.getCount() + pg2.getCount() + pg3.getCount(); 
```

}

另一方面，您可以将一个整数变量传递给被修改并传递给下一个类的类。

您还可以传入对包含实际计数器的某个类的引用，一旦每个类 ( `Page1`, `Page2`...) 完成了它需要的操作，它就会简单地引用该类并更新值本身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T12:39:08.697

目前还不清楚你如何称呼你的课程。

但是，如果您只有 3 个简单的类和一个调用类的地方，您可以在类之间传递变量并将值添加到其中。

```
public class Page1 {

  public void addToVariable(int var) {
    var = var + 5;
  }
}

public class Page2 {

  public void addToVariable(int var) {
    var = var + 12;
  }
}
... 
```

然后用你的变量调用类方法：

```
int yourVariable = 0;
Page1 p1 = new Page1();
Page2 p2 = new Page2();

p1.addToVariable(yourVariable);
p2.addToVariable(yourVariable); 
```

`yourVariable`将保存您要查找的总数。

# java - 将简单的 java 应用程序与 ADFS2 集成

> ID：10482082
> 
> 赞同：5
> 
> 时间：2012-05-07T12:27:26.600
> 
> 标签：java, single-sign-on, adfs2.0

我可以在 java 应用程序中使用 adfs2 吗？我想在java中实现单点登录。我已经阅读了一些他们提到您需要 .net 框架的文章。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T19:04:39.530

有两种方法可以做到这一点。

您可以使用 Java 身份提供程序（例如 OpenSSO、OpenAM、Ping Identity 等）保护您的 Java 应用程序。这将为您处理 SSO。然后，将此提供程序与 ADFS 联合。

[或者，您可以在此处](http://docs.oracle.com/cd/E17842_01/doc.1111/e17846/fedlet.htm)或[此处](http://docs.oracle.com/cd/E17842_01/doc.1111/e17847/about.htm)使用 OpenSSO 或 OpenAM Fedlet ，它们本质上是一个 SAML 2.0 堆栈。在这种情况下，您可以直接与 ADFS 通信。

或者（如@Scott 所述），使用其他产品之一。

**更新：**

使用 Fedlet 遵循交换元数据 (ip / sp .xml) 的正常 SAML 集成流程。从 ADFS 的角度来看，只需使用该文件将 sp.xml 安装为 RP。只需按照将 ADFS 替换为 OpenAM 的 Fedlet 文档进行操作即可。没有示例代码（除了 Fedlet 中的代码）。你实际上不需要写任何东西——这是一个配置练习。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T18:02:52.180

是的。可以通过许多工具包和产品广泛支持的 SAML 2.0 进行通信。

# php - 如何在 Doctrine 2 中获取类而不是数组

> ID：10482085
> 
> 赞同：16
> 
> 时间：2012-05-07T12:27:37.183
> 
> 标签：php, doctrine, doctrine-orm, doctrine-query

我可以使用以下结构从数据库中获取我的数据：

```
$user = $this->getDoctrine()
->getRepository('AcmeDemoBundle:Emails')
->find(8081); 
```

当我这样做时，我可以像这样获取我的数据：

```
$user->getColumnNameHere(); 
```

基本上我可以使用**实体**类。

但是，如果我想使用 QueryBuilder 而不是`find`我只会得到关联数组。

```
$product->createQueryBuilder('p')
        ->setMaxResults(1)
        ->where('p.idx = :idx')
        ->select('p.columnNameHere')
        ->setParameter('idx', 8081)
        ->orderBy('p.idx', 'DESC')
        ->getQuery();
        $product = $query->getResult(); 
```

$product 作为数组返回。是否可以使用 j Entity Managaer Class 获取它？如果是，如何？

我挖掘了文档，但文档中似乎不可能或不存在，或者我只是瞎了:)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-07T12:31:49.907

是的，您可以，通常使用：

```
$repository
    ->createQueryBuilder('p')
    ->getQuery()
    ->execute()
; 
```

这应该会返回一个实体数组。

如果要获得单个实体结果，请使用`getSingleResult`或`getOneOrNullResult`：

```
$repository
    ->createQueryBuilder('p')
    ->getQuery()
    ->getOneOrNullResult()
; 
```

警告：这些方法可能会抛出`NonUniqueResultException`.

**编辑：**好的，所以问题是关于部分对象：[http ://docs.doctrine-project.org/en/latest/reference/partial-objects.html](http://docs.doctrine-project.org/en/latest/reference/partial-objects.html)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-08-20T20:14:31.633

您可以使用“部分对象”获取对象而不是数组。

这是一个使用 DoctrineORM 2.2.2 测试的示例：

```
// create query builder
// $em is the EntityManager
$qb    = $em->createQueryBuilder();

// specify the fields to fetch (unselected fields will have a null value)
$qb->select  ('partial p.{id,pubDate,title,summary}')
   ->from    ('Project\Entity\Post', 'p')
   ->where   ('p.isActive = 1')
   ->orderBy ('p.pubDate', 'desc');

$q      = $qb->getQuery();

$result = $q->getResult();
var_dump($result); // => object 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-11-07T21:28:02.140

如果您希望从原始查询中返回一个对象：

```
 $product->createQueryBuilder('p')
    ->setMaxResults(1)
    ->where('p.idx = :idx')
    ->select('p.columnNameHere')
    ->setParameter('idx', 8081)
    ->orderBy('p.idx', 'DESC')
    ->getQuery();
    $product = $query->getResult(); 
```

**删除此行**

```
->select('p.columnNameHere') 
```

一旦您使用 select，它将返回一个数组...

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-07T12:31:48.840

`getResult()`方法返回实体的集合（数组）。`getSingleResult()`如果您只想获取一个对象，请使用。

### 编辑：

哦，我刚刚注意到您想获取单个对象的单个字段。`getSingleScalarResult()`按照@Florian 的建议使用。

# java - ksoap2 具有相似命名空间但类型不同的嵌套项

> ID：10482090
> 
> 赞同：1
> 
> 时间：2012-05-07T12:28:08.153
> 
> 标签：java, android, soap, ksoap2

这是请求信封的样子：

```
<v:Envelope xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns:d="http://www.w3.org/2001/XMLSchema" xmlns:c="http://schemas.xmlsoap.org/soap/encoding/" xmlns:v="http://schemas.xmlsoap.org/soap/envelope/">
  <v:Header />
  <v:Body>
    <getLijst xmlns="http://OAM/OMZETAPPMETHODS.xsd">
      <selectie i:type="n1:OAM_ArtstructselobjUser" xmlns:n1="http://OAM/OMZETAPPMETHODS.xsd">
        <filiaal i:type="d:decimal">4</filiaal>
        <artnivsel i:type="n1:OAM_ArtstructobjUser">
          <asonummer i:type="d:decimal">1</asonummer>
          <asotype i:type="d:string">P</asotype>
        </artnivsel>
      </selectie>
    </getLijst>
  </v:Body>
</v:Envelope> 
```

这是我的代码的一部分：

```
String nameSpace = "http://OAM/OMZETAPPMETHODS.xsd";
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
envelope.dotNet = true;
envelope.setAddAdornments(false);
SoapObject request = new SoapObject(nameSpace, _soapMethod);

OAM_ArtstructselobjUser obj = new OAM_ArtstructselobjUser();
// .. This is where the properties are added, irrelevant
request.addProperty("selectie", obj);

OAM_ArtstructobjUser obj2 = new OAM_ArtstructobjUser();
// .. This is where the properties are added, irrelevant
request.addProperty("artnivsel", obj2);

envelope.setOutputSoapObject(request);

Marshal floatMarshal = new MarshalFloat();
floatMarshal.register(envelope);

envelope.addMapping(nameSpace, "OAM_ArtstructselobjUser", OAM_ArtstructselobjUser.class);   
envelope.addMapping(nameSpace, "OAM_ArtstructobjUser", OAM_ArtstructobjUser.class); 
```

所以我想要`artnivsel`一个自定义类型，但继承`selectie`. 如果我运行上面的代码，我会得到一个`05-07 14:22:21.034: ERROR/AndroidRuntime(16417): Caused by: java.lang.RuntimeException: Unknown Property: asotype`

如果我`nameSpace`将第二个更改`addMapping`为其他任何内容，我的代码运行良好。但我的信封 XML 不正确。了。

任何可以给我指点的人，我对ksoap2或soap特别没有经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:02:12.347

好的，看起来更新到 ksoap2.6.4 可以解决这个问题。只需添加`avoidExceptionForUnknownProperty`到`true``SoapSerializationEnvelope`

# extjs - extJs 门户内的 extJs gmappanel

> ID：10482094
> 
> 赞同：6
> 
> 时间：2012-05-07T12:28:39.657
> 
> 标签：extjs

我想在 extJs 门户中使用 extJS Gmpanel。下面是示例 extJS 门户。在“google”portlet 中，我需要有google 地图。

我们如何在 extJs 门户中创建 extJs gmpanel？

```
Ext.define('Ext.app.Portal', {
    extend: 'Ext.container.Viewport',
    uses: ['Ext.app.PortalPanel', 'Ext.app.PortalColumn', 'Ext.app.GridPortlet', 'Ext.app.ChartPortlet'],
    getTools: function() {
        return [{
            xtype: 'tool',
            type: 'gear',
            handler: function(e, target, panelHeader, tool) {
                var portlet = panelHeader.ownerCt;
                portlet.setLoading('Working...');
                Ext.defer(function() {
                    portlet.setLoading(false);
                }, 2000);
            }
        }];
    },

    initComponent: function() {
        var content = '<div class="portlet-content">' + Ext.example.shortBogusMarkup + '</div>';
        Ext.apply(this, {
            id: 'app-viewport',
            layout: {
                type: 'border',
                padding: '0 5 5 5'
            },
            items: [{
                id: 'app-header',
                xtype: 'box',
                region: 'north',
                height: 70,
                html: 'Dimestore Reports'
            }, {
                xtype: 'container',
                region: 'center',
                layout: 'border',
                items: [{
                    id: 'app-portal',
                    xtype: 'portalpanel',
                    region: 'center',
                    items: [

                        {
                            id: 'col-1',
                            items: [{
                                    id: 'portlet-1',
                                    title: 'google',
                                    tools: this.getTools(),
                                    items: {}, //I want ExtJs Form here.
                                    listeners: {
                                        'close': Ext.bind(this.onPortletClose, this)
                                    }
                                },
                                {
                                    id: 'portlet-2',
                                    title: 'grid',
                                    tools: this.getTools(),
                                    html: content,
                                    listeners: {
                                        'close': Ext.bind(this.onPortletClose, this)
                                    }
                                }
                            ]
                        }
                    ]
                }]
            }]
        });
        this.callParent(arguments);
    },
    onPortletClose: function(portlet) {
        this.showMsg('"' + portlet.title + '" was removed');
    },
    showMsg: function(msg) {
        var el = Ext.get('app-msg'),
            msgId = Ext.id();
        this.msgId = msgId;
        el.update(msg).show();
        Ext.defer(this.clearMsg, 3000, this, [msgId]);
    },
    clearMsg: function(msgId) {
        if (msgId === this.msgId) {
            Ext.get('app-msg').hide();
        }
    }
}); 
```

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-11T11:09:34.270

我得到了答案

我只是将 gmap 放入`Ext.ux.GMapPanel`库中并创建一个`gmappanel`

```
Ext.create('Ext.ux.GMapPanel', {
    autoShow: true,
    layout: 'fit',
    closeAction: 'hide',
    height: 300,
    border: false,
    items: {
        xtype: 'gmappanel',
        center: {
            geoCodeAddr: 'pune,maharashtra',
            marker: {
                title: 'Pune'
            }
        },

    }
}); 
```

使用上面的代码

谢谢

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-06T11:53:13.817

另一种解决方案可能是创建自定义组件。我在[这里](https://jsfiddle.net/5dvrp3x3/3/)创建了一个简单的小提琴。

```
Ext.define('MyApp.view.Map', {
    extend : 'Ext.Component',
    alias : 'widget.map',

    config : {
        /**
         *
         * @cfg {Object} mapConfig
         * The map specific configurations as specified 
         * in the the [Google Maps JavaScript API][googleMaps]
         * 
         * [googleMaps]: https://developers.google.com/maps/documentation/javascript/3.exp/reference#MapOptions
         */
        mapConfig : null
    },

    /**
     *
     * @property {google.maps.Map} map
     * The google map.
     */
    map : null,

    afterRender : function () {
        var me = this,
            mapConfig = me.getMapConfig();

        me.map = me.createGoogleMap({
            domEl : me.getEl().dom,
            mapConfig : mapConfig
        });
    },

    /**
     *
     * @method createGoogleMap
     * This method creates a new Google map based on the defined
     * configuration. 
     * 
     * @param {Object} config
     * The configuration can contain the following
     * key-value-pairs:
     * 
     *  - domEl {Node} The node do draw the map into.
     *  - mapConfig {Object} The map configuration as specified in the
     *    Google Maps JavaScript API 
     * 
     * @return {google.maps.Map}
     *
     * @throws {Error} Throws an error if the Google library is not
     * loaded.
     */
    createGoogleMap : function (config) {
        if (typeof google === 'undefined') {
            throw new Error('The google library is not loaded.');           
        } else {
            return new google.maps.Map(
                config.domEl,
                config.mapConfig
            );            
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-05-26T15:07:15.780

有时 ExtJS 的 gmap 可能达不到要求。在这种情况下，您可以尝试以下方法。

为了便于查看，您可以将面板放在任何地方。

```
{
  xtype: 'panel',
  itemId: 'googleMap',
  height: 500
} 
```

在控制器内部使用以下方法链接面板和谷歌地图，然后您可以使用谷歌地图 API 中的所有功能。

```
var map = new google.maps.Map(this.getView().query('#googleMap')[0].body.dom,{
        center: ,
        zoom: ,
        mapTypeId:google.maps.MapTypeId.ROADMAP
    }); 
```

# actionscript-3 - Flex，将view.data对象访问到变量中

> ID：10482097
> 
> 赞同：0
> 
> 时间：2012-05-07T12:28:49.960
> 
> 标签：actionscript-3, apache-flex, flash-builder, flex-spark

下面是我正在查看的代码。

```
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009"
    xmlns:s="library://ns.adobe.com/flex/spark" title="data"
    xmlns:model="model.*"
    creationComplete="data=sqlSearch(data)"
    > 
```

在这个视图中，它刚刚被 pushView 与数据对象一起编辑。我需要将此数据用作 sql 搜索的一部分。我在初始视图中使用了一次creationComplete。我的理解是，在creationComplete 上，无论运行什么函数（我这里仅以sqlSearch 为例），它的返回值都会成为要在List 中使用的数据。

creationComplete 行的错误是

> 此行有多个标记：-1137：参数数量不正确。预计不超过 0。

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:35:45.457

您定义的 creationComplete 需要一个事件处理函数。

要直接对事件进行一些逻辑，请使用 { }，如下所示

```
creationComplete  = "{data=sqlSearch(data)}" 
```

我强烈建议使用处理函数，以便您可以在 creationComplete 上添加更多逻辑。为此，请使用以下示例

```
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009"
    xmlns:s="library://ns.adobe.com/flex/spark" title="data"
    xmlns:model="model.*"
    creationComplete="handleCreationComplete()"
    >

<mx:Script>
    <![CDATA[

    private function handleCreationComplete():void
    {
         //Here is my code
         data=sqlSearch(data);
    }

]]></mx:Script> 
```

# android - 我们如何创建动态文本视图？

> ID：10482099
> 
> 赞同：2
> 
> 时间：2012-05-07T12:29:10.320
> 
> 标签：android

如何在不在 xml 文件中的代码中创建文本视图。这是因为我的应用程序中的文本视图数量将根据某个整数发生变化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T12:35:24.780

这是动态创建 TextView 的代码

```
LinearLayout layout = (LinearLayout ) findViewById(R.id.llayout);

for (int i = 0; i < 3; i++) {

TextView dynamicTextView = new TextView(this);
dynamicTextView.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
                LayoutParams.WRAP_CONTENT));
        dynamicTextView.setText("NewYork");
        layout.addView(tstate);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T12:39:06.640

也许这就是你需要的：

```
LinearLayout lin = (LinearLayout) findViewById(R.id.myLinear);

  for (int i = 0; i <= 10 ; i++)
  {
      TextView myText = new TextView(this);
      myText.setText("textview# "+ i);
      lin.addView(myText);
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T12:33:40.630

您需要以下内容：

```
final int N = 10; // total number of textviews to add

final TextView[] myTextViews = new TextView[N]; // create an empty array;

for (int i = 0; i < N; i++) {
    // create a new textview
    final TextView rowTextView = new TextView(this);

    // set some properties of rowTextView or something
    rowTextView.setText("This is TextView #" + i);

    // add the textview to the linearlayout
    myLinearLayout.addView(rowTextView);

    // save a reference to the textview for later
    myTextViews[i] = rowTextView;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T12:36:15.543

```
private LinearLayout ll;
private TextView tv;

      // in oncreate()
onCreate()
{
        int WrapWidth = LinearLayout.LayoutParams.WRAP_CONTENT;
        int WrapHeight = LinearLayout.LayoutParams.WRAP_CONTENT;

        tv = new TextView(this);

        ll.addView(tv,WrapWidth,WrapHeight);

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-02T10:50:00.430

代码在这里

```
final int c = 12;
final TextView[] mtext = new TextView[c]; 
for (int i = 0; i < c; i++) {
TextView rowtxt = new TextView(this);
rowtxt.setText("Hello" + i);
myLinearLayout.addView(rowtxt);
myTextViews[i] = rowtxt;
myTextViews[i].setOnClickListener(onclicklistener);//textview click 
```

}

OnClickListeners 代码在这里

```
OnClickListener onclicklistener = new OnClickListener() {

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    if(v == myTextViews[0]){
        //do whatever you want....
    }
} 
```

};

希望对你有帮助

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-12T06:57:38.083

你用`TextView textView = new TextView(CurrentActivity.this);`

然后添加`TextView`类附带的 setter 参数

# .net - 如何以编程方式向类添加接口（在运行时）

> ID：10482101
> 
> 赞同：1
> 
> 时间：2012-05-07T12:29:11.513
> 
> 标签：.net, vb.net, reflection, interface

我正在寻找一种在运行时向类添加接口实现的方法。这是一个示例代码，我将在下面讨论。

```
Public Interface IAction
    Sub DoThis(a As Integer)
End Interface

Class Actor
Implements IAction

    Private mNumber As Integer

    Public Sub New(number As Integer)
        mNumber = number
    End Sub

    Public Sub DoThis(a As Integer) Implements IAction.DoThis
        Console.WriteLine(String.Format("Actor #{0}: {1}", mNumber, a))
    End Sub

End Class

Class ActionDispatcher
Implements IAction

    Private Shared mActionList As New List(Of IAction)

    Public Shared Sub Add(actor As IAction)
        mActionList.Add(actor)
    End Sub

    Public Sub DoThis(a As Integer) Implements IAction.DoThis
        For Each act In mActionList
            act.DoThis(a)
        Next
    End Sub

End Class

Module Module1

    Sub Main()
        Dim a As New ActionDispatcher
        ActionDispatcher.Add(New Actor(1))
        ActionDispatcher.Add(New Actor(2))
        a.DoThis(5)
    End Sub

End Module 
```

这与 WCF 相关，需要向 CreateHost 提供单个类，该类实现端点所需的所有接口。在这个场景中，ActionDispatcher 就是这样一个类，而 IAction 就是众多要实现的接口之一。

我的愿景是避免在 ActionDispatcher 中手动实现 IAction，但有某种注册机制，我可以说，ActionDispatcher 必须实现接口 IAction、IDoing、INoAction 等 - 并为我生成调度方法。

MSDN 说，任何类都兼容任何接口，所以我不需要在 ActionDispatcher 中声明“Implements”。但是我仍然需要实现接口，并将实现方法连接到接口定义上，以便 WCF 可以在需要时找到它。

我发现的最接近的可能是[Automatic Interface Implementer](http://www.codeproject.com/Articles/22832/Automatic-Interface-Implementer-An-Example-of-Runt)，但它 (1) 创建了一个新类型，(2) 添加了虚拟方法。

我也试图理解 CodeCompileUnit 类，但到目前为止还看不到与我需要的关系。

在反射 API 方面更有经验的人可以帮助我吗？有什么好方法可以做我想做的事吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T13:07:25.170

我终于把它咬碎了。对于那些对复杂性感兴趣的人，解决方案（简而言之）是：

```
Class ActionDispatcher

    Private Shared mImplementorType As Type

    Public Shared Function GetImplementorType() As Type
        If mImplementorType Is Nothing
            mImplementorType = CreateImplementorType()
        End If

        Return mImplementorType
    End Function

    Private Shared Function CreateImplementorType() As Type
        ' Nice to have RunAndSave for debugging with ILdasm / ILSpy
        Dim myAssemblyBuilder = AppDomain.CurrentDomain.DefineDynamicAssembly(
            New AssemblyName() With { .Name = "ViewerDispatcherAssembly" },
            AssemblyBuilderAccess.RunAndSave)
        Dim mbuilder = myAssemblyBuilder.DefineDynamicModule("ViewerDispatcherModule", "ViewerDispatcherModule.dll")
        Dim tbuilder = mbuilder.DefineType("ViewerDispatcherImpl", TypeAttributes.Class Or TypeAttributes.Public)

        For Each itype In mInterfaceTypes
            tbuilder.AddInterfaceImplementation(itype)
            For Each method In itype.GetMethods()
                ' Create interface implementation for each interface method.
                CreateInterfaceImplementation(tbuilder, itype, method, capability, mbuilder)
            Next
        Next
        Return tbuilder.CreateType()
    End Sub
End Class 
```

该函数`CreateInterfaceImplementation`动态创建一个类型来保存接口参数，并在此类型中创建一个方法来调用正确的`IAction`函数。它还`IAction`在`tbuilder`. 还存在一个中间函数来循环`mActionList`以最小化生成的代码量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T21:44:10.207

您可以使用 Castle Dynamic Proxy 尝试某种混合。 [http://www.codeproject.com/Articles/9055/Castle-s-DynamicProxy-for-NET](http://www.codeproject.com/Articles/9055/Castle-s-DynamicProxy-for-NET) 还创建了一个新类型（代理），所以也许你也不喜欢它......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T12:42:40.837

首先，这似乎需要大量工作来避免几行代码。如果您希望一个类实现一个接口，只需指定它，这就是 .Net 类型系统的工作方式。

事实上，你不能真正做你想做的事。您不能在运行时修改类的代码。您可以期望的最好的结果是创建一个实现接口的新类型。但是，如果您不想在运行时创建新类型（为什么？），那么我认为您不走运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T16:39:47.007

我听说过使用反射来编写属性值，但在运行时将新属性和方法注入现有类型？对我来说听起来有点太未来了。

即使有可能，接口也用于定义一组属性和/或方法，这些属性和/或方法**始终**存在于实现它们的类型中。如果您确实可以随意添加或删除实现，那么它很可能会破坏以某种方式依赖您的类的任何其他类型。

# xslt - XSLT - 应用模板中包含多个节点的通用规则

> ID：10482103
> 
> 赞同：2
> 
> 时间：2012-05-07T12:29:21.827
> 
> 标签：xslt

我正在根据父亲中的一个字段对祖父母进行排序。源文件看起来像

```
<Root>
    <AllData>
        <Data_not_to_be_sorted>
            <Additional_data1>
                <Some_test_data1/>
                <Some_test_data2/>
            </Additional_data1>
        </Data_not_to_be_sorted>
        <RealData>
            <Some_data1/>
            <Some_data2/>
            <GrandFather>
                <Data_required_as_it_is></Data_required_as_it_is>
                    <Father>
                        <Value>4</Value>
                        <Name>name in 4</Name>
                    </Father>
            </GrandFather>
            <GrandFather>
                <Data_required_as_it_is></Data_required_as_it_is>
                <Father>
                    <Value>3</Value>
                    <Name>name in 3</Name>
                </Father>
            </GrandFather>
        </RealData>
        <RealData>
            <Some_data1/>
            <Some_data2/>
            <GrandFather>
                <Data_required_as_it_is></Data_required_as_it_is>
                <Father>
                    <Value>2</Value>
                    <Name>name in 2</Name>
                </Father>
            </GrandFather>
            <GrandFather>
                <Data_required_as_it_is></Data_required_as_it_is>
                <Father>
                    <Value>1</Value>
                    <Name>name in 1</Name>
                </Father>
            </GrandFather>
        </RealData>
    </AllData>
</Root> 
```

我正在使用的 XSLT 代码如下：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output omit-xml-declaration="yes" indent="yes"/>
<xsl:strip-space elements="*"/>

<xsl:template match="@* | node()">
<xsl:copy>
   <xsl:apply-templates select="@* | node()"/>
</xsl:copy>
</xsl:template>

<xsl:template match="RealData">
<xsl:copy>
<xsl:apply-templates select="Data_required_as_it_is"></xsl:apply-templates>
<xsl:apply-templates select="GrandFather">
<xsl:sort select="Father/Value" data-type="number"/>
</xsl:apply-templates>

</xsl:copy>

</xsl:template>

</xsl:stylesheet> 
```

代码运行良好......我的查询是 - 我可以为

Data_required_as_it_is。想象一下，我有 20 个不同的 xml 标签用于“Data_required_as_it_is”，所以我需要手动编写所有这些标签，或者只是以通用方式编写它们......

代码的输出如下：

```
<Root>
    <AllData>
        <Data_not_to_be_sorted>
            <Additional_data1>
                <Some_test_data1/>
                <Some_test_data2/>
            </Additional_data1>
        </Data_not_to_be_sorted>
        <RealData>
            <Some_data1/>
            <Some_data2/>
            <GrandFather>
                <Data_required_as_it_is></Data_required_as_it_is>
                    <Father>
                        <Value>3</Value>
                        <Name>name in 3</Name>
                    </Father>
            </GrandFather>
            <GrandFather>
                <Data_required_as_it_is></Data_required_as_it_is>
                <Father>
                    <Value>4</Value>
                    <Name>name in 4</Name>
                </Father>
            </GrandFather>
        </RealData>
        <RealData>
            <Some_data1/>
            <Some_data2/>
            <GrandFather>
                <Data_required_as_it_is></Data_required_as_it_is>
                <Father>
                    <Value>1</Value>
                    <Name>name in 1</Name>
                </Father>
            </GrandFather>
            <GrandFather>
                <Data_required_as_it_is></Data_required_as_it_is>
                <Father>
                    <Value>2</Value>
                    <Name>name in 2</Name>
                </Father>
            </GrandFather>
        </RealData>
    </AllData>
</Root> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T13:18:04.710

> ```
> <xsl:template match="RealData">
>       <xsl:copy>
>           <xsl:apply-templates select="Data_required_as_it_is"></xsl:apply-templates>
>           <xsl:apply-templates select="GrandFather">
>               <xsl:sort select="Father/Value" data-type="number"/>
>           </xsl:apply-templates>
>       </xsl:copy>
>   </xsl:template> 
> ```

**可以使用这样的更通用的代码**：

```
<xsl:template match="RealData">
    <xsl:copy>
        <xsl:apply-templates>
            <xsl:sort select="self::GrandFather/Father/Value" data-type="number"/>
        </xsl:apply-templates>
    </xsl:copy>
</xsl:template> 
```

**注意**`GrandFather`：这将在任何节点之前对任何非节点进行排序，并将按元素对元素进行`GrandFather`指定的排序。`GrandFather``Father/Value`

如果希望非`GrandFather`元素仍然散布在`GrandFather`元素中，这也可以实现 - 如果有兴趣，请提出另一个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T12:40:31.000

如果此时你想匹配任何不是**GrandFather**元素的东西，你应该能够做这样的事情：

```
<xsl:apply-templates select="*[not(self::GrandFather)]"></xsl:apply-templates> 
```

请注意，如果您在任何现有的**GrandFather**元素之后有元素，那么在这种情况下，它们将被移动到输出中已排序的**GrandFather**元素之前。

# sql - 从两列进行 SQL 重复数据删除

> ID：10482107
> 
> 赞同：5
> 
> 时间：2012-05-07T12:29:28.237
> 
> 标签：sql, duplicates, ignore-duplicates

我已经为此苦苦挣扎了一段时间，但我就是想不通。

我有一个有 3 列的表。2 列包含名称，第三列包含这些名称之间的 Damerau Levensthein 距离 ( [http://en.wikipedia.org/wiki/Damerau%E2%80%93Levenshtein_distance](http://en.wikipedia.org/wiki/Damerau%E2%80%93Levenshtein_distance) )。

每列都包含每个名称，这意味着出现在 autor1 列中的所有名称也出现在 autor2 列中。结果，我需要两倍的行，只是交换了 autor1 和 autor2 列。

例如，第 3 行等于第 1 行，只是交换了自动列，第 2-4 行也是如此。我将如何制定一个省略那些“重复”的查询？
id-|-----auto1----|-----auto2-----| dld
1 -| 阿贝尔，古斯塔夫-| 亚伯，古斯塔夫 | 1
2 -| 阿贝尔，古斯塔夫-| 阿贝尔，古斯塔夫 | 1
3 -| 亚伯，古斯塔夫| 阿贝尔，古斯塔夫 --| 1
4 -| 阿贝尔，古斯塔夫 | 阿贝尔，古斯塔夫-| 1

到
|-----auto1----|-----auto2-----| dld
| 阿贝尔，古斯塔夫-| 亚伯，古斯塔夫 | 1
| 阿贝尔，古斯塔夫-| 阿贝尔，古斯塔夫 | 1

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-07T12:31:16.207

`NOT EXISTS`在我所知道的所有 DBMS 上使用作品。这样做的*复杂性*是不要忘记在`id`. 没有它，什么都不会返回。

```
SELECT *
FROM   YourTable yto
WHERE  NOT EXISTS (
         SELECT  *
         FROM    YourTable yti
         WHERE   yti.autor2 = yto.autor1
                 AND yti.id > yto.id
       ) 
```

**编辑**

一步一步，下面是语句背后的逻辑分解

1.  获取第一条记录 ( `ID = 1`)
2.  是否有记录 where `ID > 1`and `autor1 = autor2`(Yes, ID 3) -> **Ignore**
3.  获取下一条记录 ( `ID = 2`)
4.  是否有记录 where `ID > 2`and `autor1 = autor2`(Yes, ID 4) -> **Ignore**
5.  获取下一条记录 ( `ID = 3`)
6.  是否有记录 where `ID > 3`and `autor1 = autor2`(No) -> **Include**
7.  获取下一条记录 ( `ID = 4`)
8.  是否有记录 where `ID > 4`and `autor1 = autor2`(No) -> **Include**

# sql-server - 无法访问通过 Visual Studio 创建的数据库？

> ID：10482113
> 
> 赞同：10
> 
> 时间：2012-05-07T12:30:00.637
> 
> 标签：sql-server, database, visual-studio, visual-studio-2010, sql-server-2008

我创建了一个数据库**emailDatabase**，它存储在

```
C:\Program Files\Microsoft SQL Server\MSSQL10.MSSQLSERVER\MSSQL\DATA 
```

在 Visual Studio 中，我使用`Server Explorer`，单击添加新连接按钮。

出现添加连接对话框。

在服务器名称下，我使用下拉框并选择`DEV-5\SQLEXPRESS`. 我使用 Windows 身份验证。

在`Connect to`底部的部分中，下拉菜单显示：`Master, Model, msdb`并且`tempdb`不显示 my `emailDatabase`.

所以我选择`Attach Database File`并单击浏览并关注

```
local C:\Program Files\Microsoft SQL Server\MSSQL10.MSSQLSERVER\MSSQL\DATA 
```

并选择我的电子邮件数据库。

发生以下错误：

> emailDatabase
> 您无权打开此文件。
> 联系文件所有者或管理员以获得许可。

我认为我的问题是我错误地保存了我的数据库，我需要进行备份或类似的事情。如果是这种情况，请告诉我如何进行备份等。我真的需要从这个问题中向前迈进。

创建数据库时，我右键单击 SQL Server Management Studio 中的数据库并选择新数据库，然后添加带有查询的列。然后文件全部保存。

如何获得具有在 Visual Studio 中使用它所需的所有权限的数据库文件的副本？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-07T13:21:57.330

**当您在服务器上**创建数据库时（使用 SQL Server Management Studio），您不必（也不应该！）再摆弄数据库文件 - 让服务器为您处理。

而是：在 Visual Studio 中**添加连接**，然后在连接对话框中指定服务器实例 ( `DEV-5\SQLEXPRESS`) 和数据库名称 ( )。`emailDatabase`

这样，您就可以按照预期的方式连接和使用 SQL Server 数据库 - 在 SQL Server 实例本身上。这比不得不处理“自由浮动”`.mdf`文件并将它们附加到您的解决方案和类似的东西要容易得多，也少得多麻烦......

![在此处输入图像描述](../Images/211e85fd2e143dfb7edcb05fa8570703.png)

所以在这里 - 填写`DEV-5\SQLEXPRESS`您的“服务器名称”下拉列表，然后使用“选择或输入数据库名称”选项并输入您的数据库名称（或从下拉列表中选择） - 它应该在那里！

**不要**使用“附加数据库文件”选项 - 这是自由浮动的`.mdf`“功能”，它相当笨拙且难以使用且容易出错 - 再次：我建议**不要**使用它......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-17T04:32:58.470

有同样的问题，我意识到问题不在VS2010，而是我的SQLserver。
我的实例名称是**OMAFANO**，这就是我的 MSSQL 在服务器名称下连接的名称。现在这是关键，单击它并连接到**OMAFANO\SQLEXPRESS**并在那里创建所有数据库和表，如果您希望它们按照您在上面所说的方式显示在 VS2010 中。所以在VS2010的服务器名称下，如果你想查看你新创建的数据库等，还要写**INSTANCENAME\SQLEXPRESS 。看一下图片：**
![在此处输入图像描述](../Images/db81adbcde8f20cb1d11dd9f2f7f4a04.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T20:18:15.300

我以为我已经弄清楚了，但问题不断出现。所以 ...

忽略这条线以下的所有内容。

经过几个小时的修修补补，我终于弄清楚了如何使用 SSMS 连接到在 VS2010 中创建的 SQLServer 2008 数据库，并且相对简单。但是从各地未得到解答的问题的数量来看，没有很好的记录。这是如何做到的：

1.  在 VS 中右键单击 SolutionExplorer 中的项目并选择添加新项目，然后选择数据，然后选择 SQLServer 数据库。它会提示您将其保存在 app_data 文件夹中，如果该文件夹不存在，则为您创建该文件夹。

2.  找到 Ssms.exe 文件（在我的系统上它位于 C:\Program Files\Microsoft SQL Server\100\Tools\Binn\VSShell\Common7\IDE

3.  右键单击 Ssms.exe 并选择以管理员身份运行。

4.  SSMS 打开后，您可以附加项目 MDF。它现在将出现在您的数据库列表中。数据库名称是一个 GUID。

5.  您甚至可以对数据库运行 aspnet_regsql 以添加成员资格表和存储过程。

重要的！您可以使用 SMSS**或****VS**管理此数据库，但不能同时使用两者。如果您使用 ServerExplorer 从 VS 中弄乱数据库，您将中断 SSMS 连接。要解决这个问题，您需要分离并重新附加数据库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-14T11:56:57.377

以管理员身份运行 Visual Studio 转到 Visual Studio 实例，即 C#、C++ 等 右键单击​​ > 以管理员身份运行

那么现在它可能会起作用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-03T21:14:05.603

要从 Visual Studio 2013 连接到 ssms2014 数据库，在新的连接向导中，我必须将“数据源”从“ms sql server 数据库文件”更改为“.net framework data provider for sql server..”。然后我可以输入 [计算机名] [用户名] 进行 Windows 身份验证。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-31T06:19:01.240

我有同样的问题，你只需输入本地服务器名称“ **sara-PC** ”而不是“ **sara-PC\SQLEXPRESS** ”

现在您可以轻松访问您的数据库，您可以在下拉列表中看到它。并且请不要使用文件访问方法来附加数据库，那不是好方法。您也可以通过使用 server->rightclick->properties->Database settings 设置默认位置，将 ~....\Data 和 ~...\log 文件放在任何你想要的位置。

这绝对可以解决您的问题。

# c# - new Thread(void Target()) 和 new Thread(new ThreadStart(void Target())) 有什么区别？

> ID：10482121
> 
> 赞同：4
> 
> 时间：2012-05-07T12:30:52.830
> 
> 标签：c#, multithreading

抱歉，如果之前有人问过这个问题，但我想简要回答以下两种用法之间的区别。VS 似乎接受它们作为有效代码。

```
private static void doSomeWork()
{
   //do some work
}

public someClass()
{
   //Thread thread = new Thread(doSomeWork);
   //or
   //Thread thread = new Thread(new ThreadStart(doSomeWork));
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T12:32:15.453

唯一的区别是第一个在 C# 1 中不起作用。C# 2 及更高版本的编译器将第一个转换为第二个。

方法组可以隐式转换为具有兼容签名的委托类型。此功能称为“（隐式）方法组转换”。有时您需要第二个来指导重载解决方案，但这里不是这种情况。

# android - 从 XML-Android 加载图像

> ID：10482122
> 
> 赞同：1
> 
> 时间：2012-05-07T12:30:53.760
> 
> 标签：android, xml-parsing

我有一个带有不同标签的 xml 文件

```
<data>
   <name>xyz</name>
   <img> image with source(/res/img.jpg)</img>
   <desc>this is the description</desc>
</data> 
```

我想加载 xml 中可用的项目列表，单击 listitem 我想在新屏幕中显示名称、图像和描述。

请帮助某人..紧急..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-10T13:40:42.390

当管理读取 XML（如果不告诉我）时，这是我用来从 JSON 中读取 imageNames 以填充 About 活动的 ListView 的代码：

```
holder.logo.setImageResource(getResources().getIdentifier("about_logo_"+aboutItems.get(position).getID(),"drawable",getActivity().getPackageName())); 
```

或者你的意思是其他的东西，比如将二进制文件保存到 xml 中并读取它？那么我必须说这不是 XML 的用途！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T12:43:56.123

网络上有许多教程描述了如何解决您面临的问题（Android 上的 XML/List）。这里有几个：

*   [http://appfulcrum.com/2010/09/05/listview-example-2-using-xml-resource-file/](http://appfulcrum.com/2010/09/05/listview-example-2-using-xml-resource-file/)
*   [http://androidlistviews.blogspot.in/2012/02/simple-listview-using-xml-datasource.html](http://androidlistviews.blogspot.in/2012/02/simple-listview-using-xml-datasource.html)
*   [http://www.softwarepassion.com/android-series-custom-listview-items-and-adapters/](http://www.softwarepassion.com/android-series-custom-listview-items-and-adapters/)

网上还有很多...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T14:09:40.007

使用此[**代码示例**](http://www.roseindia.net/tutorial/xml/dom/ParseDOMDocument.html)先`parse the XML`归档。

* * *

然后使用图像列表，您将需要从中获取图像`resource folder`。

`drawable`要使用其名称从文件夹中获取图像，请[**使用此代码**](https://stackoverflow.com/questions/7941304/android-reference-things-in-r-drawable-using-variables)

* * *

最后使用[**这个很棒的教程**](http://www.vogella.com/articles/AndroidListView/article.html)在arraylist中显示一堆图像。

* * *

链接是 1\. [http://www.roseindia.net/tutorial/xml/dom/ParseDOMDocument.html](http://www.roseindia.net/tutorial/xml/dom/ParseDOMDocument.html) 2\. [Android，参考 R.drawable 中的东西。使用变量？](https://stackoverflow.com/questions/7941304/android-reference-things-in-r-drawable-using-variables) 3\. [http://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)

# c# - asp.net URL 重写 需要帮助

> ID：10482128
> 
> 赞同：-1
> 
> 时间：2012-05-07T12:31:22.597
> 
> 标签：c#, asp.net, url-rewriting

我在一个网站上工作，我正在使用 URL 重写器（http://urlrewriter.net）我正在使用 .net 框架 3.5 和 IIS 7，我必须显示用户的详细信息目前我的项目中有一个名为 user 的文件夹重写 URL 的 Default.aspx 文件，如：

[http://localhost:5000/user/123.aspx](http://localhost:5000/user/123.aspx)

其中 123 是我想让它喜欢的用户的用户 ID

[http://localhost:5000/user/123/Nameofuser.aspx](http://localhost:5000/user/123/Nameofuser.aspx)

是否可以使用 url 重写器？即 URL 应该像 [http://localhost:5000/user/UserID/Nameofuser.aspx](http://localhost:5000/user/UserID/Nameofuser.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T16:55:29.413

自从我使用 url 重写器以来已经有一段时间了，但是是的，这应该是可能的。

您使用的是 3.5 sp1 吗？sp1 使路由可用于 asp.net Web 表单。从 3.5 sp1 开始，我只使用路由，因为它随 .net 一起提供并用于 mvc。很多人都在使用它，因此很容易通过 SO 等网站获得支持。

[http://msdn.microsoft.com/en-us/magazine/dd347546.aspx](http://msdn.microsoft.com/en-us/magazine/dd347546.aspx)

# tcp - 在公共网络中使用 wxTCPConnection 是否安全？

> ID：10482131
> 
> 赞同：0
> 
> 时间：2012-05-07T12:31:41.863
> 
> 标签：tcp, connection, client, wxwidgets

我正在开发我的第一个客户端和相应的服务器应用程序。所以请放轻松，我是网络相关事务的*菜鸟*。

我的目标是在我的客户端和服务器之间创建一个简单的接口。换句话说，我希望能够启动/停止服务器，连接/断开连接并在连接时以任何一种方式发送数据包。

我正在使用 c++ 进行开发，我使用提供基于套接字的 IPC 类（wxTCPServer、wxTCPClient 和 wxTCPConnection）的 wxWidgets 库。

**我的问题是：** 由于 wxSSLServer、wxSSLClient 和 wxTCPConnection 仍在工作中且不可用，当客户端或服务器（如果我在我的笔记本电脑）连接到公共网络？我认为当两者都在专用网络中连接时，这样的连接是安全的 - 如果我错了，请纠正我。

是否有您建议的替代开源库可以让我安全地完成我的任务？

提前谢谢你，尼古拉斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:07:37.977

检查这个比较

[https://en.wikipedia.org/wiki/Comparison_of_TLS_Implementations#Overview](https://en.wikipedia.org/wiki/Comparison_of_TLS_Implementations#Overview)

# android - Android java.lang.ArrayIndexOutOfBoundsException

> ID：10482140
> 
> 赞同：0
> 
> 时间：2012-05-07T12:32:24.647
> 
> 标签：android, indexoutofboundsexception

我正在制作一个梦想字典，我正在从 txt 文件中读取并保存到数组以将其显示到列表视图中。但是日志猫有一些错误，谁能告诉我出了什么问题。

```
 05-07 14:29:06.750: E/AndroidRuntime(29135): FATAL EXCEPTION: main
05-07 14:29:06.750: E/AndroidRuntime(29135): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.sonovnik.petkovski/com.sonovnik.petkovski.Main}: java.lang.ArrayIndexOutOfBoundsException
05-07 14:29:06.750: E/AndroidRuntime(29135):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1768)
05-07 14:29:06.750: E/AndroidRuntime(29135):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1784)
05-07 14:29:06.750: E/AndroidRuntime(29135):    at android.app.ActivityThread.access$1500(ActivityThread.java:123)
05-07 14:29:06.750: E/AndroidRuntime(29135):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:939)
05-07 14:29:06.750: E/AndroidRuntime(29135):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-07 14:29:06.750: E/AndroidRuntime(29135):    at android.os.Looper.loop(Looper.java:130)
05-07 14:29:06.750: E/AndroidRuntime(29135):    at android.app.ActivityThread.main(ActivityThread.java:3835)
05-07 14:29:06.750: E/AndroidRuntime(29135):    at java.lang.reflect.Method.invokeNative(Native Method)
05-07 14:29:06.750: E/AndroidRuntime(29135):    at java.lang.reflect.Method.invoke(Method.java:507)
05-07 14:29:06.750: E/AndroidRuntime(29135):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
05-07 14:29:06.750: E/AndroidRuntime(29135):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
05-07 14:29:06.750: E/AndroidRuntime(29135):    at dalvik.system.NativeStart.main(Native Method)
05-07 14:29:06.750: E/AndroidRuntime(29135): Caused by: java.lang.ArrayIndexOutOfBoundsException
05-07 14:29:06.750: E/AndroidRuntime(29135):    at com.sonovnik.petkovski.Main.readTxt(Main.java:115)
05-07 14:29:06.750: E/AndroidRuntime(29135):    at com.sonovnik.petkovski.Main.initStuff(Main.java:131)
05-07 14:29:06.750: E/AndroidRuntime(29135):    at com.sonovnik.petkovski.Main.onCreate(Main.java:39)
05-07 14:29:06.750: E/AndroidRuntime(29135):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-07 14:29:06.750: E/AndroidRuntime(29135):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1722)
05-07 14:29:06.750: E/AndroidRuntime(29135):    ... 11 more 
```

这是代码：

```
 public class Main extends ListActivity {
    private ArrayList<Son> sonovi;
    private EditText filterText = null;
    private SonovnikAdapter adapter;
    private ListView list;
    Translator t = new Translator();
    private Intent intent;
    private ArrayList<Son> temp;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        initStuff();

        list.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                intent.putExtra("opis", sonovi.get(position).getOpis());
                intent.putExtra("naslov", sonovi.get(position).getNaslov());
                startActivity(intent);

            }
        });
        filterText.addTextChangedListener(new TextWatcher() {

            @Override
            public void onTextChanged(CharSequence s, int start, int before,
                    int count) {

            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {

            }

            @Override
            public void afterTextChanged(Editable s) {

                String test = filterText.getText().toString().toUpperCase();
                int dolzina = filterText.length();
                temp = new ArrayList<Son>();
                for (int i = 0; i < sonovi.size(); i++) {
                    if (filterText.getText().toString().toLowerCase().equals(
                                    (String) sonovi.get(i).getLatinicno().toLowerCase()
                                            .subSequence(0, dolzina))) {
                        temp.add(sonovi.get(i));
                    }

                }

                SonovnikAdapter testc = new SonovnikAdapter(Main.this,
                        R.layout.item, temp);
                list.setAdapter(testc);
                testc.notifyDataSetChanged();
                list.setOnItemClickListener(new OnItemClickListener() {

                    @Override
                    public void onItemClick(AdapterView<?> parent, View view,
                            int position, long id) {
                        intent.putExtra("opis", temp.get(position).getOpis());
                        intent.putExtra("naslov", temp.get(position)
                                .getNaslov());
                        startActivity(intent);
                    }
                });

            }
        });

    }

    private ArrayList<Son> readTxt() {
        ArrayList<Son> s = new ArrayList<Son>();
        InputStream is = this.getResources().openRawResource(R.raw.sonovnik);
        BufferedReader br = new BufferedReader(new InputStreamReader(is));
        String str = null;
        String naslov, opis, latinica;
        String[] tmp;
        try {
            while ((str = br.readLine()) != null) {
                tmp = str.split("-");
                naslov = tmp[0].toString();
                opis = tmp[1].toString();

                latinica = tmp[2].toString(); //line 115
                 Log.v("test", latinica);
                s.add(new Son(naslov, opis, latinica));
            }
            is.close();
            br.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return s;
    }

    private void initStuff() {
        list = getListView();
        list.setTextFilterEnabled(true);
        sonovi = new ArrayList<Son>();
        sonovi = readTxt(); //line 131
        intent = new Intent(this, Details.class);
        adapter = new SonovnikAdapter(this, R.layout.item, sonovi);
        setListAdapter(this.adapter);
        filterText = (EditText) findViewById(R.id.search_box);
    }

    private class SonovnikAdapter extends ArrayAdapter<Son> {

        private ArrayList<Son> items;

        public SonovnikAdapter(Context context, int textViewResourceId,
                ArrayList<Son> items) {
            super(context, textViewResourceId, items);
            this.items = items;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            View v = convertView;
            if (v == null) {
                LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                v = vi.inflate(R.layout.list_item, null);
            }
            Son o = items.get(position);
            if (o != null) {
                TextView naslov = (TextView) v.findViewById(R.id.textView1);
                if (naslov != null) {
                    naslov.setText(o.getNaslov().toString());
                }
            }
            return v;

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:35:57.413

在`readText`中，您有：

```
tmp = str.split("-"); 
```

然后你使用`tmp[0]`,`tmp[1]`和`tmp[2]`。我的猜测是`tmp.length < 2`。

是什么让您认为 tmp 至少有 3 个项目？即使您认为应该是这种情况，您也应该对其进行测试：`if (tmp.length >=3) {`等等。

旁注： tmp[i] 已经是一个 String 所以不需要写`xxx = tmp[i].toString();`，`xxx = tmp[i];`就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T12:41:07.343

这是你的问题：

```
 tmp = str.split("-");
            naslov = tmp[0].toString();
            opis = tmp[1].toString();

            latinica = tmp[2].toString(); //line 115 
```

您使用“-”作为分隔符拆分字符串，但您永远不会检查它实际拆分了多少块。显然，您的输入文本文件包含一些只有一个“-”的行，因此它被分成两部分，并且 tmp[2] 超出范围。

此外，不需要调用 .toString()，因为 tmp 已经是一个字符串数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T12:41:12.600

你确定 str = br.readLine() 总是有一个“-”吗？我在这里看到的是，如果您的 str (str = br.readLine() ) 之一不包含“-”，您将不会有 tmp[0] 和或 tmp[1] 这可能导致java.lang.ArrayIndexOutOfBoundsException 您可能需要通过检查 if(str.contains("-")) 来检查是否可以用“-”分割

```
 String[] tmp;
try {
    while ((str = br.readLine()) != null) {
       //before split, check that delimeter exists                      
        if (str.contains("-")) {
            tmp = str.split("-");
            naslov = tmp[0].toString();
            opis = tmp[1].toString();
         .......            
         }                          
    }
    is.close();
    br.close();
} catch (IOException e) {
    e.printStackTrace();
} 
```

# java - 在 jtable 的某些列中显示图像

> ID：10482147
> 
> 赞同：3
> 
> 时间：2012-05-07T12:33:03.680
> 
> 标签：java, swing, jtable, imageicon

我正在制作`JTable`前两列包含字符串，其余列包含图标（特别是类的对象`ImageIcon`）的位置。我知道该怎么做，但是如何在 1 个表中混合两者，以使某些列返回字符串而其他列返回图标？

--EDIT--
代码解释：数据是一个二维字符串数组。对于前两列，我希望它们按原样显示在表格中。对于所有其余的列，只有两个可能的值，“Y”或“N”。现在，如果有“Y”，我希望显示一个 ImageIcon，否则如果有“N”，则将其留空。

（如果有帮助，我正在绘制一个比较表，如果值为“Y”，我希望在其中显示一个刻度线图标，否则如果值为“N”，则将单元格留空）

现在的输出是这样
的： PATH_TO_ICON ("//home//....") 在 "Y"
的情况下的值 "javax.swing.ImageIcon@288e509b" 在 "N" 的情况下

```
class MyTableModel extends AbstractTableModel {

    private Object[][] data;
    private String[] headers;

    public MyTableModel(String[][] data, String[] headers) {
        super();
        this.data = data;
        this.headers = headers;
    }

    @Override
    public int getColumnCount() {
        return headers.length;
    }

    @Override
    public int getRowCount() {
        return data.length;
    }

    @Override
    public Object getValueAt(int row, int col) {
        if (col < 2) {
            return data[row][col];
        } else {
            if (data[row][col].equals("Y")) {
                return new ImageIcon(PATH_TO_ICON);
            } else if(data[row][col].equals("N")) {
                return new ImageIcon();
                            } else return null;
        }
    }

    @Override
    public Class<?> getColumnClass(int col) {
        if (col < 2) {
            return String.class;
        } else {
            return ImageIcon.class;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T12:39:14.753

根据需要设置列类（对于每列）。正如@mKorbel 所提到的，另请参阅[如何使用表格 - 概念：编辑器和渲染器](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T12:41:48.760

[JTable](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)知道[Icon / ImageIcon.Class](https://stackoverflow.com/a/7051005/714968)，然后不需要任何额外的努力

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T13:08:25.290

这是正确的代码。

```
import java.awt.Dimension;

import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.AbstractTableModel;

public class MainTest extends JFrame {
private static final long serialVersionUID = 1L;

public static void main(String[] args) {
    MainTest mt = new MainTest();
    mt.doThis();
}

public void doThis(){
    String PATH_TO_ICON = "//home//icon.png";
    String[] headers = { "A", "B", "File1", "File2" };
    String[][] data = { { "1", "abc", "Y", "N" }, { "2", "def", "Y", "Y" } };
    JScrollPane scrollpane = new JScrollPane();
    JTable table = new JTable();
    table.setModel(new MyTableModel(data, headers, PATH_TO_ICON));
    scrollpane.setViewportView(table);

    // layout
    this.add(scrollpane);
    this.setLocationRelativeTo(null);
    this.setMinimumSize(new Dimension(400,300));
    this.setPreferredSize(new Dimension(600,400));
    this.setDefaultCloseOperation(EXIT_ON_CLOSE);
    this.setVisible(true);
}
}

class MyTableModel extends AbstractTableModel {
private static final long serialVersionUID = 1L;
private Object[][] data;
private String[] headers;
private String PATH_TO_ICON;

public MyTableModel(String[][] data, String[] headers, String PATH_TO_ICON) {
    super();
    this.data = data;
    this.headers = headers;
    this.PATH_TO_ICON = PATH_TO_ICON;
}

@Override
public int getColumnCount() {
    return headers.length;
}

@Override
public int getRowCount() {
    return data.length;
}

@Override
public Object getValueAt(int row, int col) {
    if (col < 2) {
        return data[row][col];
    } else {
        if (data[row][col].equals("Y")) {
            return new ImageIcon(PATH_TO_ICON);
        } else if (data[row][col].equals("N")) {
            return new ImageIcon();
        } else
            return null;
    }
}

@Override
public Class<?> getColumnClass(int col) {
    if (col < 2) {
        return String.class;
    } else {
        return ImageIcon.class;
    }
} 
```

}

# matlab - 从 .mexglx 到 .mex

> ID：10482150
> 
> 赞同：3
> 
> 时间：2012-05-07T12:33:26.703
> 
> 标签：matlab, mex

我得到了一个使用外部 C 函数的 Matlab 程序。我只有这个外部函数的编译版本，扩展名是 .mexglx 。从我已经红色的情况来看，这个扩展似乎是用 linux 编译的 mex 文件版本。我在 windows XP 下运行 matlab，我的问题是我的 Matlab 无法读取 .mexglx 扩展名。所以我的问题是：有没有办法将扩展名为 .mexglx 的文件更改为 .mex？因为目前我没有 C 语言的源代码，所以我无法正确重新编译它。如果可以提供帮助，我准确地说我的 Matlab 版本是 R2007b。谢谢您的回答

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-07T12:42:27.677

不，没有办法，对不起。您需要获取源代码才能为不同的平台构建它。

# python - 从网页调用 Python 脚本

> ID：10482151
> 
> 赞同：0
> 
> 时间：2012-05-07T12:33:28.093
> 
> 标签：python, apache, cgi, mod-python

我已经搜索了一段时间，但找不到关于如何做我想做的事的简明解释。

我有一个相当复杂的程序，我想为它制作一个简单的网络界面。

理想情况下，网页上会有几个文本字段，“foo”和“bar”。

当用户点击提交时，运行一个 python 脚本“src/script.py”，它以某种方式访问​​这些字段的内容。

我有 apache2 和 mod_python。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T12:38:52.007

如果它是一个“相当复杂的程序”，您可能希望使用一个小型框架，该框架负责以“标准”（即支持和记录）方式对各个部分进行分组。我会研究*轻量级*Python Web 框架，如[Flask](http://flask.pocoo.org/)和[WebApp2](http://webapp-improved.appspot.com/)。*在性能和学习曲线方面都很轻量级*。

[在这里](http://wiki.python.org/moin/WebFrameworks)，您可以全面了解 Python Web 框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T12:37:56.837

你可能想研究一个 web 框架，比如 [django](http://djangoproject.com)或[webOb](http://www.webob.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T14:13:44.670

下面是它的工作原理：

1.  用户请求一个网页（类似[http://127.0.0.1/start.html](http://127.0.0.1/start.html)的 URL ）

2.  您必须将页面提供给用户（通过像 apache 这样的独立网络服务器或通过像 http.server、BaseHTTPServer、flask、cherrypy 等一些 python 库）

3.  用户在您的页面上的某些 html 表单中填写一些值（了解[html 表单](http://www.w3schools.com/html/html_forms.asp)），当他点击提交另一个 url 时，请求[http://127.0.0.1/myfunction.py?foo=1&bar=2](http://127.0.0.1/myfunction.py?foo=1&bar=2)

4.  您必须处理对该 url 的请求并从 url 中提取参数，例如通过[cgi](http://docs.python.org/library/cgi.html)、mod_py 和 apache 或 python 框架（如 flask、cherrypy 等），然后使用参数执行代码并生成结果html 页面并通过这些工具提供它

如果你想让它变得非常简单，请学习如何使用烧瓶和 html 表单。

# javascript - 如何循环通过gridview客户端？

> ID：10482153
> 
> 赞同：0
> 
> 时间：2012-05-07T12:33:35.203
> 
> 标签：javascript, asp.net, jquery, telerik

我有一个像这样的网格视图：

```
<telerik:RadGrid ID="RadGrid1" runat="server" GridLines="None" AllowPaging="true"
        PageSize="20" OnPreRender="RadGrid1_PreRender" Width="500px">
        <PagerStyle Mode="NextPrevAndNumeric" />
        <MasterTableView TableLayout="Fixed" Width="500px">
            <ItemTemplate>
                <%# (((GridItem)Container).ItemIndex != 0)? "</td></tr></table>" : "" %>
                <asp:Panel ID="ItemContainer" CssClass='<%# (((GridItem)Container).ItemType == GridItemType.Item)? "item" : "alternatingItem" %>'
                    runat="server">
                    <asp:Image ID="image_event" runat="server" ImageUrl='<%# Eval("event_pic")%>' AlternateText="" />
                    <asp:RadioButton ID="rbtn_map" runat="server" onclientclick="adjustSelected(this)" />
                </asp:Panel>
            </ItemTemplate>
        </MasterTableView>
        <GroupingSettings CaseSensitive="false" />
    </telerik:RadGrid> 
```

* * *

我想通过客户端方法`adjustSelected(this)`循环遍历所有单选按钮使它们未选中并将单击的单选按钮设置为仅选中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:36:04.517

给网格中的所有这些单选按钮一个类（`class="radioClass"`）：

```
<asp:RadioButton CssClass="radioClass" runat="server" onclientclick="adjustSelected(this)" /> 
```

然后使用该类选择所有其他收音机：

```
function adjustSelected(obj){
    $('.radioClass').prop('checked', false);
    this.checked = true;
} 
```

您还可以使用不显眼的 JavaScript：

```
var $radios = $('.radioClass');
$('.radioClass').click(function(){
    $radios.prop('checked', false);
    this.checked = true;
}); 
```

* * *

**更新：**

好的 ASP.Net 生成奇怪的标记，所以使用它作为函数：

```
function adjustSelected(obj){
    console.log($('.radioClass :radio'));
    $('.radioClass :radio').prop('checked', false);
    $(':radio', obj).prop('checked', true);
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T12:39:12.430

```
 function checkRadio{
    var grid = document.getElementById('<%=RadGrid1.ClientID%>');
    if (grid) {
        var elements = grid.getElementsByTagName('input');
        var checkcount = 0;
        for (var i = 0; i < elements.length; i++) {
            if (elements[i].type == 'radio' && elements[i].id.toString().match('rbtn_map') != null) {
               --- do code here ---                    
            }
        }

    }
 } 
```

# c# - 包含 Category 和 SubCategory 的嵌套 Category 表

> ID：10482156
> 
> 赞同：1
> 
> 时间：2012-05-07T12:33:41.103
> 
> 标签：c#, .net, sql, gridview, nested-datalist

伙计们，
我有一个包含 CategoryID（主键）、ParentID（int 非空）和 Category（nvarchar 非空）的 Category 表。
我正在尝试在此表中插入和检索 ID 为 CategoryID 的类别和 ID 为 ParentID 的子类别。
我一直在尝试整个周末都没有运气，希望你能帮助我。我正在使用 MSSQL 2008。
表结构应如下所示：

```
-Category1          
        SubCategory1  
        SubCategory2  
    ...  

-Category2  
            SubCategory2  
            SubCategory2  
    ... 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:42:17.477

检查公用表表达式，这些表达式允许您创建“递归选择”。 [http://www.mssqltips.com/sqlservertip/1520/recursive-queries-using-common-table-expressions-cte-in-sql-server/](http://www.mssqltips.com/sqlservertip/1520/recursive-queries-using-common-table-expressions-cte-in-sql-server/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T12:59:01.593

您可以使用递归公用表表达式：

```
WITH cteTable(madeUpColA, madeUpColB, Etc) as
(
   -- this select statement with the union all is what does the recursive query
   SELECT aCol as madeUpColA, bCol as madeUpColB, Etc
   from dbo.someTable
   UNION ALL
   SELECT aCol as madeUpColA, bCol as madeUpColB, Etc
   FROM dbo.someTable st
   INNER JOIN cteTable as c -- inner join on relationship
   ON st.aCol = c.madeUpColA
)
-- this select statement is what retrieves the data from the above query
SELECT madeUpColA, madeUpColB, Etc
FROM cteTable
-- add your other criteria here 
```

您可以使用[MSDN 文档](http://msdn.microsoft.com/en-us/library/ms175972.aspx)的`WITH`语句来专门化您的查询

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T20:35:12.613

你只是在寻找一个简单的自我加入吗？如果是这样，这应该工作：

```
select parent.category, subcat.category as subcategory
from Category subcat join
     Category parent
     on subscat.parentid = parent.categoryid 
```

还是需要遍历整个父母链？如果是这样，那么递归 CTE 是更好的方法。

# android - Android：透明活动不起作用

> ID：10482165
> 
> 赞同：0
> 
> 时间：2012-05-07T12:34:32.320
> 
> 标签：android, android-activity

我遵循以下链接中的建议 [如何在 Android 上创建透明的活动？](https://stackoverflow.com/questions/2176922/how-to-create-transparent-activity-in-android?answertab=active#tab-top) 在 HTC Desire 中，活动是透明的，但在 Moto MileStone(Android) 中，它不起作用。背景是黑色的。我将 res/values/styles.xml 更改如下，但 Moto MileStone 中的背景仍然是黑色

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<style name="Theme.Transparent" parent="@android:style/Theme.Translucent.NoTitleBar">
<item name="android:windowIsTranslucent">true</item>
<item name="android:windowBackground">@color/transparent</item>
<item name="android:colorBackgroundCacheHint">@null</item>
<item name="android:backgroundDimEnabled">false</item>
<item name="android:windowContentOverlay">@null</item>
<item name="android:windowNoTitle">true</item>
</style>
</resources> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T08:46:39.870

您始终可以尝试在活动的 OnCreate 方法中以编程方式设置视图的 RGBA 值。那可能行得通。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T08:25:01.093

这是我的解决方案：

我的 XML 文件是第一个活动。单击按钮后，您将被重定向到具有按钮的第二个活动。我给出了完整的源代码：

活动一：

```
public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Button nextBtn = (Button)findViewById(R.id.button1);
    nextBtn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            startActivity(new Intent("com.ranjan.dibya.shadow.Next"));
        }
    });
}
} 
```

活动二：

```
public class Next extends Activity{

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.next);
}
} 
```

活动 1 的 XML：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#f09473"
tools:context=".MainActivity" >

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_centerVertical="true"
    android:layout_marginRight="16dp"
    android:text="Button" />

 </RelativeLayout> 
```

活动 2 的 XML：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:text="This is clickable" />

</RelativeLayout> 
```

我的清单

```
 <activity
        android:name=".Next"
        android:label="@string/app_name"
        android:theme="@style/Theme.MyTranslucent" > 
```

风格：

```
<style name="Theme.MyTranslucent" parent="android:style/Theme.Translucent">
    <item name="android:backgroundDimEnabled">true</item>
    <item name="android:backgroundDimAmount">0.5</item>
    <item name="android:windowAnimationStyle">@android:style/Animation.Dialog</item>
    <item name="android:background">@android:color/transparent</item>
</style> 
```

这对我有用。我希望同样对你有用。

**编辑：**您遵循的链接将导致透明的活动，中心的按钮是我自己想出来的:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T08:41:20.387

我没有尝试过，但我认为获得透明背景的最佳方法是添加颜色。

将透明颜色放入十六进制

[http://www.w3schools.com/html/html_colornames.asp](http://www.w3schools.com/html/html_colornames.asp) ...您可以在这里查看。

如果您接受答案，请单击右侧。

有什么问题请发帖。

# ruby-on-rails-3 - Rails 模型关联但不同的数据库

> ID：10482169
> 
> 赞同：1
> 
> 时间：2012-05-07T12:34:41.073
> 
> 标签：ruby-on-rails-3, activerecord, associations, postgresql-9.1, rails-postgresql

我正在构建一个使用 mysql 和 postgres 数据库的应用程序。由于 postgis，我正在使用 postgres，因为这个应用程序是基于位置的。Postgres 只有一个数据库`Places`，而 mysql 包含所有其他数据库。在开发过程中，我在各种模型之间建立了一些关联，包括`Place`模型。但正如我意识到的那样，由于数据库不同，关联的 Join 查询失败了。

我的想法是只在 Postgres DB 中移动我的所有表。因此，我对 MySQL 没有任何特殊需求。

但是从 MySQL 迁移到 Postgres 是我最后的选择。我想知道是否有任何方法可以使位于不同数据库中的模型之间的关联无缝工作？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T14:05:31.810

作为对您问题的直接回答，您可以使用 PostgreSQL 外部数据包装器 (FDW) 功能来引用来自其他数据库（包括 MySQL）的表。

[http://www.postgresql.org/docs/current/interactive/ddl-foreign-data.html](http://www.postgresql.org/docs/current/interactive/ddl-foreign-data.html)

[http://wiki.postgresql.org/wiki/Foreign_data_wrappers](http://wiki.postgresql.org/wiki/Foreign_data_wrappers)

[http://www.postgresql.org/docs/current/interactive/sql-createserver.html](http://www.postgresql.org/docs/current/interactive/sql-createserver.html)

[http://www.postgresql.org/docs/current/interactive/sql-createforeigntable.html](http://www.postgresql.org/docs/current/interactive/sql-createforeigntable.html)

也就是说，规划器优化连接外部表的查询的能力受到严重限制。虽然针对一个外部表的简单查询应该执行得相当好，但如果您尝试使用复杂的声明式查询来发挥 SQL 的真正威力，它可能会比全部在 PostgreSQL 上慢几个数量级。

如果可行，我的建议是把它全部转移到 PostgreSQL。如果这会严重影响时间线，您可能会考虑使用 FDW 作为临时“桥梁”来快速启动和运行，并在有机会或需要时移动表以优化性能。

# java - 如何获得运行服务的参考？

> ID：10482171
> 
> 赞同：11
> 
> 时间：2012-05-07T12:34:46.213
> 
> 标签：java, android

有一个问题 - 我的主要活动启动服务然后关闭。当应用程序下次启动时，应用程序应该获取对该服务的引用并停止它。但我不知道如何获得对正在运行的服务的引用。拜托，我希望你能帮助我。谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-09-26T10:46:52.487

该答案基于[@DawidSajdak](https://stackoverflow.com/a/10482276/1232833)的答案。他的代码大部分是正确的，但他切换了`return`语句，所以它给出了与预期结果相反的结果。正确的代码应该是：

```
private boolean isMyServiceRunning() {
    ActivityManager manager = (ActivityManager) getSystemService(ACTIVITY_SERVICE);
    for (RunningServiceInfo service : manager.getRunningServices(Integer.MAX_VALUE)) {
        if ("your.service.classname".equals(service.service.getClassName())) {
            return true; // Package name matches, our service is running
        }
    }
    return false; // No matching package name found => Our service is not running
}

if(isMyServiceRunning()) {
    stopService(new Intent(ServiceTest.this,MailService.class));
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-07T12:42:32.357

```
private boolean isMyServiceRunning() {
    ActivityManager manager = (ActivityManager) getSystemService(ACTIVITY_SERVICE);
    for (RunningServiceInfo service : manager.getRunningServices(Integer.MAX_VALUE)) {
        if ("your.service.classname".equals(service.service.getClassName())) {
            return false;
        }
    }
    return true;
}

if(isMyServiceRunning()) {
    stopService(new Intent(ServiceTest.this,MailService.class));
} 
```

# knockout.js - 使用 knockoutjs 扩展方法验证单选按钮时出错

> ID：10482176
> 
> 赞同：-1
> 
> 时间：2012-05-07T12:35:12.587
> 
> 标签：knockout.js

我需要一个在 kockoutjs 中扩展单选按钮的实现验证示例。有任何机构实施相同的。如果可以，请与我分享这个例子。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T22:42:40.933

我想这可能是你所追求的。

[https://github.com/ericmbarnard/Knockout-Validation](https://github.com/ericmbarnard/Knockout-Validation)

希望这可以帮助。

# c++ - 二进制存储树 fstream 出错

> ID：10482180
> 
> 赞同：0
> 
> 时间：2012-05-07T12:35:23.593
> 
> 标签：c++, error-handling, tree, storage, binary-tree

我目前有一个项目，我通过一个包含数千个名称的文本文件运行并将它们放入二进制存储树中。遇到此错误的绊脚石：

```
error C2248: 'std::basic_ios<_Elem,_Traits>::basic_ios' : cannot access private member declared in class 'std::basic_ios<_Elem,_Traits>'    c:\program files (x86)\microsoft visual studio 10.0\vc\include\fstream  1116 
```

我希望有人可以帮助我解释根本问题。

提前致谢。

乔希

编辑：

```
BinaryTreeStorage::BinaryTreeStorage(void) : root(NULL)
{

}

BinaryTreeStorage::~BinaryTreeStorage(void)
{

}

void BinaryTreeStorage::insert(string &input, TreeNode *&root)
{
if(root != NULL)
{
    root -> name = input;
    root -> left = NULL;
    root -> right = NULL;
}

else if (input < root -> name)
{
    insert(input, root -> left);
}
else
{
    insert(input, root -> left);
}   
}

string BinaryTreeStorage:: writeToTree(TreeNode *&root)
{
if(root ->left != NULL)
{
    writeToTree(root ->left);
}
return root->name;
if (root->right != NULL)
{
    writeToTree(root);
}
}

void BinaryTreeStorage::write(ofstream nameOut)
{
cout << "Writing out bst names" << endl;
writeToTree(root);
}

void BinaryTreeStorage::read(ifstream& nameIn)
{
cout<< "Reading in bst" << endl;
string name;

for (int i = 0; i < numberOfNames; i++)
{
    nameIn >> name;
    insert (name, root);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:49:09.950

在您的`write`功能中：您不能复制`ofstream`. 通过引用传递它。再说一次，您似乎从未在正文中使用*函数*`nameOut`参数，所以为什么不完全省略它：

```
void BinaryTreeStorage::write()
{
    cout << "Writing out bst names" << endl;
    writeToTree(root);
} 
```

# jquery - jCarousel - cufon 在第一次旋转后消失

> ID：10482181
> 
> 赞同：1
> 
> 时间：2012-05-07T12:35:24.037
> 
> 标签：jquery, jquery-plugins, jcarousel, cufon

我将 cufon 与 jCarousel 一起使用。

旋转木马有四个项目，它们从左到右旋转。

轮播设置为“圆形”，第一次旋转后cufon段落消失。

我能做些什么来让 jCarousel 和 cufon 工作，这样标题就不会消失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T08:55:28.680

尝试像这样在每次“旋转”时刷新 cufon 怎么样 - 我假设你的 jCarousel 容器有一个类`jcarousel`：

```
$('.jcarousel').bind('jcarouselanimate', function(event, carousel) {
    Cufon.refresh();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-03T09:56:48.350

我尝试了很多，发现Jcarousel默认不包含jquery.jcarousel.js。所以尝试将以下行添加到modules/jcarousel 中的**jcarousel.module文件中。**

```
 drupal_get_path('module', 'jcarousel') . '/js/jquery.jcarousel.js', 
```

之后，而不是 jquery.jcarousel.js 的第 287 行... if (i + 1 < self.first) {

把它换成这个...

```
if (i + 1 < self.first % this.options.size) { 
```

一切顺利...

它对我有用。

# asp.net - asp:panel的边框

> ID：10482182
> 
> 赞同：2
> 
> 时间：2012-05-07T12:35:24.473
> 
> 标签：asp.net, .net, html, css, border

我在这段代码中做错了什么？我想在两个 div 周围设置边框，但我看到了线条（没有内容的矩形）。你有什么想法吗？此代码在我的 WebControl 中。

```
<asp:Panel ID="pan" runat="server" BorderStyle="solid" BorderWidth="1px" >
    <div style="width:18%; float:left;">
        <asp:Image id="img" runat="server" AlternateText="X" ImageUrl=""/>
    </div>

    <div style="width:78%; float:left;">
        <b><asp:Label ID="lblTitle" runat="server"></asp:Label></b>
        <br />
        <br />
        <asp:Label ID="lblDescription" runat="server"></asp:Label>
        <br />
        <asp:Button id="btnSet" runat="server" Text="Ustaw>"/>
        <br />
        <br />
        <asp:Label id="lblYouHaveCreditText" runat="server" Text="Masz kredytu na usługę"></asp:Label>
    </div>
</asp:Panel> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T12:43:01.713

尝试以下操作：

```
<panel style="border: 1px solid #000; width: 500px; height:500px;" 
    id="pan" runat="server">

</div> 
```

这是它的 jsFiddle：http: [//jsfiddle.net/C5jqS/](http://jsfiddle.net/C5jqS/)

完成后，丢掉内联 CSS ;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-14T06:16:36.557

要获取面板的边框，请执行以下操作：

*   asp webform上的拖放面板
*   转到分组文本中的属性并输入组名
*   在边框样式中选择您的选择。

[![截屏](../Images/90ac7b3da8cb6b9be0cc51923adc4edb.png)](https://i.stack.imgur.com/MRqDI.png)

# sql - 在 SQL Server 中，将 Text 列的所有值设置为 NULL 是否会减少数据库大小？

> ID：10482185
> 
> 赞同：4
> 
> 时间：2012-05-07T12:35:40.753
> 
> 标签：sql, sql-server, sql-server-2008

在 SQL Server 2008 的上下文中。

我正在将值从具有数据类型的列压缩和迁移到具有`Text`数据类型的另一列`Image`，同一个表。目前，我们不想删除 Text 列。所以，我只是将该列的所有值设置为 NULL。

设置为 NULL 是否会立即提供空间增益？即减少数据库大小？

删除列会这样做吗？

如果没有，需要做哪些额外的事情来声明未使用的空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T15:21:53.177

对于表的单行中的列值，文本列至少需要 16 个字符值。要在此列中将所有值设置为空，请重新组织数据和索引。

为了回收这个空间，我们必须使用 DBCC CLEANTABLE 或收缩数据库。

语法：DBCC CLEANTABLE(Databasename, "Table_name or View_name")

[请参阅此链接以对表进行碎片整理和重新索引](http://technet.microsoft.com/en-us/library/cc917715.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T15:30:12.597

要实际减小 DATABASE 大小，您需要：

*   删除列
*   如果没有聚集索引，则重建聚集索引或表
*   收缩数据库文件

我不建议缩小，因为它会导致碎片。但是，数据库的磁盘占用量不会自动下降。您将拥有一个内部有空白空间的数据库，它可以填充更多数据/索引，而无需进一步扩展数据库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T12:50:41.933

将值设置为 NULL 不会有任何区别。删除列不会自行释放磁盘空间。您还需要重建索引：[Disk Space Taken By Dropped Columns](https://stackoverflow.com/q/957834/138938)

# android - GLSurfaceView.onPause() 会破坏上下文吗？

> ID：10482191
> 
> 赞同：1
> 
> 时间：2012-05-07T12:36:04.987
> 
> 标签：android, opengl-es, glsurfaceview

我正在使用 GLSurfaceView.onPause() 来管理资源（即停止渲染线程以允许呈现更具响应性的视图）。似乎需要重新创建表面，但我没有在文档中看到详细信息。

有人可以确认是这种情况吗？

干杯，乔什

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T14:09:48.937

是的，就是这样。但是，如果您想在有限的时间内提高另一个视图或对话框的响应能力，您还有其他一些选择。

*   如果您以 api 级别 11 或更高级别为目标，则可以在[GLSurfaceView](http://developer.android.com/reference/android/opengl/GLSurfaceView.html#setPreserveEGLContextOnPause%28boolean%29)上使用 setPreserveEGLContext
*   你可以使用[setRenderMode(RENDERMODE_WHEN_DIRTY)](http://developer.android.com/reference/android/opengl/GLSurfaceView.html#setRenderMode%28int%29)
*   你可以设置一个标志，如果设置了这个标志，你可以在你的[onDrawFrame()](http://developer.android.com/reference/android/opengl/GLSurfaceView.Renderer.html#onDrawFrame%28javax.microedition.khronos.opengles.GL10%29)中提前返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T13:28:03.707

是的，它将在暂停时重新创建，因为 glView 扩展了 SurfaceView 并且 SurfaceView 总是在活动暂停时重新创建。

# charts - 使用 Infragistics XamChart 模拟步骤图

> ID：10482195
> 
> 赞同：0
> 
> 时间：2012-05-07T12:36:17.133
> 
> 标签：charts, infragistics

我需要使用 Infragistics 的 XamChart 制作一个类似于以下链接图像中黑色实线的阶梯图。

[http://bloggpro.com/wp-content/uploads/2007/06/windowslivewriterstepcharttypeinexcel-2da1clip-image00231.gif](http://bloggpro.com/wp-content/uploads/2007/06/windowslivewriterstepcharttypeinexcel-2da1clip-image00231.gif)

我浏览了几个链接，XamChart 中似乎不支持步骤图。我觉得这可以使用 XamChart 上的 DataPoints 和 Markers 来实现，但不能完全得到我想要的。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:52:54.937

模拟阶梯线图的一种方法是使用散点线图，并发出额外的点以创建阶梯效果。尽管这取决于您对标签或工具提示的需求，但可能并不完全需要，因为您会让用户觉得好像存在不严格存在的额外数据。此外，如果您需要阶梯线系列与类别类型系列共存，则使用分散系列来模拟阶梯效应会变得更加困难。

您是否可以选择使用 XamDataChart（可能包含在您的订阅中）？XamDataChart 本身就支持 stepline 类型。

# python - Django Celery 任务没有完成并且一直处于待处理状态

> ID：10482197
> 
> 赞同：4
> 
> 时间：2012-05-07T12:36:19.443
> 
> 标签：python, django, celery, amqp, django-celery

我安装了 Django Celery bur running `pip install django-celery`。这安装了 celery 和必要的库，例如 celery 和 kombu。

我添加`djcelery`到我的已安装应用程序列表并运行`syncdb`和`migrate`命令来创建表。

我已经安装了 RabbitMQ 并使用这些命令创建了一个用户和虚拟主机：

```
rabbitmqctl add_user trakklr trakklr
rabbitmqctl add_vhost /trakklr 
rabbitmqctl set_permissions -p /trakklr trakklr ".*" ".*" ".*" 
```

我编辑了我的设置文件以包含这两行：

```
BROKER_URL = "amqp://trakklr:trakklr@localhost:5672//trakklr"
CELERY_IMPORTS = ("app.trackers.tasks", ) 
```

我在我的模块中创建了一个`tasks.py`文件，名为`trackers`：

```
from celery.task import task

@task(name="trackers.tasks.add")
def add(x, y):
    print("In task %s" % add.request.id)
    return x + y 
```

我在这样的终端窗口中启动了 Celery 守护进程：

```
python manage.py celeryd -l debug --discard --settings=production 
```

运行这个会喷出这个：

```
[2012-05-07 15:30:44,681: DEBUG/MainProcess] Start from server, version: 8.0, properties: {u'information': u'Licensed under the MPL.  See http://www.rabbitmq.com/', u'product': u'RabbitMQ', u'copyright': u'Copyright (C) 2007-2011 VMware, Inc.', u'capabilities': {}, u'platform': u'Erlang/OTP', u'version': u'2.7.1'}, mechanisms: [u'PLAIN', u'AMQPLAIN'], locales: [u'en_US']
[2012-05-07 15:30:44,682: DEBUG/MainProcess] Open OK! known_hosts []
[2012-05-07 15:30:44,683: DEBUG/MainProcess] using channel_id: 1
[2012-05-07 15:30:44,684: DEBUG/MainProcess] Channel open
[2012-05-07 15:30:44,686: WARNING/MainProcess] discard: Erased 3 messages from the queue.
[2012-05-07 15:30:44,687: WARNING/MainProcess]

 -------------- celery@Webserver v2.5.3
---- **** -----
--- * ***  * -- [Configuration]
-- * - **** ---   . broker:      amqp://trakklr@localhost:5672//trakklr
- ** ----------   . loader:      djcelery.loaders.DjangoLoader
- ** ----------   . logfile:     [stderr]@DEBUG
- ** ----------   . concurrency: 1
- ** ----------   . events:      OFF
- *** --- * ---   . beat:        OFF
-- ******* ----
--- ***** ----- [Queues]
 --------------   . celery:      exchange:celery (direct) binding:celery

[Tasks]
  . celery.backend_cleanup
  . celery.chord
  . celery.chord_unlock
  . trackers.tasks.add

[2012-05-07 15:30:44,693: DEBUG/MainProcess] [Worker] Loading modules.
[2012-05-07 15:30:44,696: DEBUG/MainProcess] [Worker] Claiming components.
[2012-05-07 15:30:44,697: DEBUG/MainProcess] [Worker] Building boot step graph.
[2012-05-07 15:30:44,697: DEBUG/MainProcess] [Worker] New boot order: ['queues', 'pool', 'mediator', 'beat', 'autoreloader', 'timers', 'state-db', 'autoscaler', 'consumer']
[2012-05-07 15:30:44,699: DEBUG/MainProcess] Starting celery.concurrency.processes.TaskPool...
[2012-05-07 15:30:44,711: DEBUG/MainProcess] created semlock with handle 3077668864
[2012-05-07 15:30:44,711: DEBUG/MainProcess] created semlock with handle 3077664768
[2012-05-07 15:30:44,712: DEBUG/MainProcess] created semlock with handle 3077660672
[2012-05-07 15:30:44,712: DEBUG/MainProcess] created semlock with handle 3077656576
[2012-05-07 15:30:44,713: DEBUG/MainProcess] created semlock with handle 3077652480
[2012-05-07 15:30:44,713: DEBUG/MainProcess] created semlock with handle 3077648384
[2012-05-07 15:30:44,713: DEBUG/MainProcess] created semlock with handle 3077644288
[2012-05-07 15:30:44,714: DEBUG/MainProcess] created semlock with handle 3077640192
[2012-05-07 15:30:44,714: DEBUG/MainProcess] created semlock with handle 3077636096
[2012-05-07 15:30:44,734: DEBUG/MainProcess] worker handler starting
[2012-05-07 15:30:44,738: DEBUG/MainProcess] result handler starting
[2012-05-07 15:30:44,744: DEBUG/PoolWorker-1] Closed channel #1
[2012-05-07 15:30:44,746: INFO/PoolWorker-1] child process calling self.run() 
```

现在，我使用 Python shell 打开了一个新的终端窗口，以便将这样的任务排入队列：

```
>>> from app.trackers.tasks import add
>>> task = add.delay(1, 4)
>>> task
<AsyncResult: c3298494-de50-41b5-8a3a-77017a1298f2>
>>> task.state
u'PENDING'
>>> task.result 
```

任务永远不会完成。它们经常被报告为“待处理”。在 celery 守护进程运行的窗口中，我没有看到任何变化。但是，当我按下`CTRL^C`. 我得到这个额外的文字：

```
^C[2012-05-07 15:31:55,541: DEBUG/MainProcess] result handler got IOError(4, 'Interrupted system call') -- exiting
[2012-05-07 15:31:55,544: DEBUG/MainProcess] celery.concurrency.processes.TaskPool OK!
[2012-05-07 15:31:55,546: DEBUG/MainProcess] Starting celery.worker.mediator.Mediator...
[2012-05-07 15:31:55,552: DEBUG/MainProcess] celery.worker.mediator.Mediator OK!
[2012-05-07 15:31:55,553: DEBUG/MainProcess] Starting celery.worker.consumer.Consumer...
[2012-05-07 15:31:55,556: WARNING/MainProcess] celery@Webserver has started.
[2012-05-07 15:31:55,557: DEBUG/MainProcess] Consumer: Re-establishing connection to the broker...
[2012-05-07 15:31:55,570: DEBUG/MainProcess] Start from server, version: 8.0, properties: {u'information': u'Licensed under the MPL.  See http://www.rabbitmq.com/', u'product': u'RabbitMQ', u'copyright': u'Copyright (C) 2007-2011 VMware, Inc.', u'capabilities': {}, u'platform': u'Erlang/OTP', u'version': u'2.7.1'}, mechanisms: [u'PLAIN', u'AMQPLAIN'], locales: [u'en_US']
[2012-05-07 15:31:55,571: DEBUG/MainProcess] Open OK! known_hosts []
[2012-05-07 15:31:55,571: DEBUG/MainProcess] Consumer: Connection established.
[2012-05-07 15:31:55,572: DEBUG/MainProcess] using channel_id: 1
[2012-05-07 15:31:55,573: DEBUG/MainProcess] Channel open
[2012-05-07 15:31:55,576: DEBUG/MainProcess] basic.qos: prefetch_count->4
[2012-05-07 15:31:55,576: DEBUG/MainProcess] using channel_id: 2
[2012-05-07 15:31:55,577: DEBUG/MainProcess] Channel open
[2012-05-07 15:31:55,589: DEBUG/MainProcess] Consumer: Starting message consumer...
[2012-05-07 15:31:55,590: DEBUG/MainProcess] Consumer: Ready to accept tasks!
[2012-05-07 15:31:55,591: INFO/MainProcess] Got task from broker: trackers.tasks.add[c3298494-de50-41b5-8a3a-77017a1298f2] 
```

从最后一行可以看出，Celery 已经完成了任务，但它只是停在那里。此外，我似乎无法弄清楚为什么它必须`CTRL ^C`在两者之间按下它。它一直处于未决状态。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T13:41:20.660

固定的。这是由于我`__init__.py`在 Django 中使用 Gevent 修补了一些 Python 模块。

Gunicorn 使用 Gevent，而 Celery 似乎使用 Eventlet。Gevent 对线程和多处理模块的猴子补丁会导致 Celery 出现问题。

# jsf - 如何重新呈现丰富的特定列：数据表？

> ID：10482200
> 
> 赞同：1
> 
> 时间：2012-05-07T12:36:25.657
> 
> 标签：jsf, richfaces

我有一个由两列组成的表，columnA 和columnB（参见下面的源代码）。我想要做的是重新渲染 columnB 中的所有单元格，只要该列中的任何值发生更改。

我尝试了很多东西，但没有成功。所以，我不得不重新渲染整个表格。

```
reRender="my-form:myTable" 
```

有趣的是，在表格的标题部分

```
reRender="myTable:columnB" 
```

完全按照我想要的方式工作（虽然我不明白它是如何工作的）。

有人可以告诉我如何重新渲染数据表中的特定列吗？

我将不胜感激任何帮助。

亲切的问候

富阿特

```
<ui:composition
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:s="http://jboss.com/products/seam/taglib"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:rich="http://richfaces.org/rich"
  xmlns:a4j="http://richfaces.org/a4j"
  template="/layout/template.xhtml">

  <ui:define name="body">

    <rich:panel>

      <a4j:form id="my-form">
        <s:validateAll>
          <rich:dataTable
            id="myTable"
            value="#{myManager.items}"
            var="item">
            <rich:column id="columnA">
              <f:facet name="header">
                <s:div>
                  <h:inputText value="#{myManager.allRowsColumnA}">
                    <a4j:support
                      event="onchange"
                      action="#{myManager.changeColumnAForAllRows}"
                      reRender="myTable:columnA"
                      ajaxSingle="true" />
                  </h:inputText>
                  <br />
                  <h:outputText value="Column A" />
                </s:div>
              </f:facet>
              <h:inputText
                id="inputColumnA"
                value="#{item.columnA}"
                required="true">
              </h:inputText>
            </rich:column>

            <rich:column id="columnB">
              <f:facet name="header">
                <s:div>
                  <h:inputText value="#{myManager.allRowsColumnB}">
                    <a4j:support
                      event="onchange"
                      action="#{myManager.changeColumnBForAllRows}"
                      reRender="myTable:columnB"
                      ajaxSingle="true" />
                  </h:inputText>
                  <br />
                  <h:outputText value="Column B" />
                </s:div>
              </f:facet>
              <h:inputText
                id="inputColumnB"
                value="#{item.columnB}"
                valueChangeListener="#{myManager.columnBChanged}"
                required="false">
                <a4j:support
                  event="onchange"
                  reRender="my-form:myTable"
                  ajaxSingle="false" />
              </h:inputText>
            </rich:column>

          </rich:dataTable>

        </s:validateAll>
      </a4j:form>
    </rich:panel>
  </ui:define>
</ui:composition> 
```

# ios - IOS UILabel显示白线

> ID：10482202
> 
> 赞同：0
> 
> 时间：2012-05-07T12:36:39.587
> 
> 标签：ios, uilabel

我有以下 UILabel 的实现。我可以确认有一个 NSString 被传入，但我似乎得到的只是一条白线

有任何想法吗？

```
 CGRect labelFrame = CGRectMake(10, 5, 300, 20);                
        UILabel *label = [[UILabel alloc] initWithFrame:labelFrame];
        label.font = [UIFont systemFontOfSize:15];
        label.text = labelText; 
        [textView addSubview:label]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:44:14.120

尝试添加 [label setAdjustsFontSizeToFitWidth:YES] （您还必须将最小字体大小设置为较小的值）。此外，请确保 textColor 值不透明，并可能给它一些更高的高度。如果没有启用 ARC，请不要忘记释放标签。

# youtube - YouTube GData API - 查询具有特定持续时间的视频

> ID：10482203
> 
> 赞同：0
> 
> 时间：2012-05-07T12:36:40.133
> 
> 标签：youtube, gdata, duration

是否有一个查询的 YouTube GData API 参数只会返回具有最短和/或最长给定持续时间的条目？我找到了“duration”参数，但它只接受“short”、“medium”和“long”值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:11:36.143

好的，找到了！

您需要将此类查询条件集成到***fields***参数中，该参数的操作语法类似于 xpath：

```
http://gdata.youtube.com/feeds/api/videos?fields=entry[*videoVariable* operator *value*] 
```

因此，对于我正在寻找的，*字段*参数值将是：

```
entry[media:group/yt:duration/@seconds > *min_value* and media:group/yt:duration/@seconds < *max_value*] 
```

[https://developers.google.com/youtube/2.0/developers_guide_protocol_partial](https://developers.google.com/youtube/2.0/developers_guide_protocol_partial)

# java - 检查 FTP 服务器上的文件是否存在

> ID：10482204
> 
> 赞同：21
> 
> 时间：2012-05-07T12:36:41.320
> 
> 标签：java, ftp, apache-commons-net

有没有一种有效的方法来检查 FTP 服务器上的文件是否存在？我正在使用 Apache Commons Net。我知道我可以使用 的`listNames`方法`FTPClient`来获取特定目录中的所有文件，然后我可以查看此列表以检查给定文件是否存在，但我认为它效率不高，尤其是当服务器包含大量文件时文件。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-07T12:54:02.423

`listFiles(String pathName)`对于单个文件应该可以正常工作。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2018-04-17T11:46:07.603

[`listFiles`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#listFiles-java.lang.String-)正如接受的答案所示，在（或）调用中使用文件的完整路径[`mlistDir`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#mlistDir-java.lang.String-)确实应该有效：

```
String remotePath = "/remote/path/file.txt";
FTPFile[] remoteFiles = ftpClient.listFiles(remotePath);
if (remoteFiles.length > 0)
{
    System.out.println("File " + remoteFiles[0].getName() + " exists");
}
else
{
    System.out.println("File " + remotePath + " does not exists");
} 
```

关于命令部分的 4.1.3 节中的[RFC 959](https://datatracker.ietf.org/doc/html/rfc959)`LIST`说：

> 如果路径名指定了一个文件，那么服务器应该发送该文件的当前信息。

虽然如果您要检查许多文件，这将是相当无效的。命令的使用`LIST`实际上涉及到几个命令，等待它们的响应，主要是打开一个数据连接。打开一个新的 TCP/IP 连接是一项代价高昂的操作，在使用加密时更是如此（现在必须这样做）。

此外`LIST`，命令对于测试文件夹的存在甚至更加无效，因为它会导致传输完整的文件夹内容。

* * *

更有效的是使用[`mlistFile`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#mlistFile-java.lang.String-)( `MLST`command)，如果服务器支持的话：

```
String remotePath = "/remote/path/file.txt";
FTPFile remoteFile = ftpClient.mlistFile(remotePath);
if (remoteFile != null)
{
    System.out.println("File " + remoteFile.getName() + " exists");
}
else
{
    System.out.println("File " + remotePath + " does not exists");
} 
```

此方法*可*用于测试目录是否存在。

`MLST`命令不使用单独的连接（与 相反`LIST`）。

* * *

如果服务器不支持`MLST`命令，可以*滥用* [`getModificationTime`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#getModificationTime-java.lang.String-)（`MDTM`命令）：

```
String timestamp = ftpClient.getModificationTime(remotePath);
if (timestamp != null)
{
    System.out.println("File " + remotePath + " exists");
}
else
{
    System.out.println("File " + remotePath + " does not exists");
} 
```

此方法*不能*用于测试目录是否存在。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-07-05T12:18:30.420

接受的答案对我不起作用。

代码不起作用：

```
String remotePath = "/remote/path/file.txt";
FTPFile[] remoteFiles = ftpClient.listFiles(remotePath); 
```

相反，这对我有用：

```
ftpClient.changeWorkingDirectory("/remote/path");
FTPFile[] remoteFiles = ftpClient.listFiles("file.txt"); 
```

# ruby-on-rails - Rails 中“has_one”和“belongs_to”的区别

> ID：10482209
> 
> 赞同：2
> 
> 时间：2012-05-07T12:37:17.110
> 
> 标签：ruby-on-rails

有什么不同？的优点和缺点？这对我来说有点困惑。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T12:40:00.200

当关系为**1-1**时，您将**belongs_to**放在具有外键的表中，并将**has_one**放在引用的表中。

 **当关系为**1-n**时，您将**belongs_to**放在具有外键的表中，并将**has_many放在引用的表中**

 *** * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-07T12:44:03.177

属于带有外键的表。对于以下内容：

```
class User < ActiveRecord::Base
  has_one :profile
end
class Profile < ActiveRecord::Base
  belongs_to :user
end 
```

profile 表需要有一个 user_id 字段来引用 users 表中的记录。

知道哪个是属于_to，哪个是has_one是许多人都在努力解决的问题。一般来说，如果has_one 可能变成has_many，那么这就是需要has_one 的一面。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-07T12:43:28.567

你将需要两者。你一个在一个班级，另一个在你想联系的班级。

例如

```
Class User 
  has_one :profile
end

Class Profile
  belongs_to :user
end 
```

正确设置关系后，优点是您可以使用`user.profile`or访问它们`profile.user`。****

# ruby-on-rails - 用于匹配域和 IP 地址的正则表达式

> ID：10482210
> 
> 赞同：2
> 
> 时间：2012-05-07T12:37:20.057
> 
> 标签：ruby-on-rails, regex, ruby-on-rails-3, ruby-on-rails-3.1

对于我的 rails 应用程序，我想要一个匹配域和 IP 地址的正则表达式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:41:37.590

你可以使用这样的东西：

`\b(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b`

取自[这里](http://www.regular-expressions.info/examples.html)。

编辑：对于域名，您可以使用如下内容：`^http://(.*?)/?.*`. 但是，如果您可以发布一些域名示例，将会有所帮助。我发布的正则表达式应该与开头的 url 匹配，`http://`然后它将抛出域名，例如`google.com`在您以后可以访问的组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T12:46:21.363

如果您正在获取 URL，并尝试匹配主机部分，

```
/^http:\/\/([^\/])\// 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T12:49:06.193

每当我需要某个正则表达式时，我首先会去[正则表达式库](http://regexlib.com/)。在那里我发现这个看起来很合理：

```
^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,6}$ 
```

我会为 IP 地址使用单独的正则表达式，并询问字符串是否匹配，而不是尝试使两种模式都适合单个匹配器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T22:56:12.613

^

我想说你需要更具体，我也喜欢使用[http://www.rubular.com/](http://www.rubular.com/) 来开发我的正则表达式。它在编辑器下有一个参考键，因此您可以使用它。您可以在享受乐趣的同时完成工作！

# scala - Scala：创建一个通用的 Quartz Job 类

> ID：10482215
> 
> 赞同：5
> 
> 时间：2012-05-07T12:37:45.073
> 
> 标签：scala, quartz-scheduler

我们使用quartz（java API）进行作业调度。这很好用。现在我试图用它概括一些事情。石英 api 需要一个作业类作为扩展作业接口的参数。这使得通过构造函数传递参数成为不可能。

我们有一组作业都应该做同样的事情，执行检查，如果为真则调用一个动作，例如：

```
class SimpleJob extends Job {

def execute(context: JobExecutionContext) {
  val check = classOf[SimpleCheck].asInstanceOf[Class[Check]].newInstance()
  val result = check.execute(context.getJobDetail.getJobDataMap)

  if (result.shouldInvokeAction) {
    Action(result).execute
  }
} 
```

然后通过调用来实例化一个石英作业：

```
newJob(classOf[SimpleJob]).with... 
```

这行得通。

目标是为不同类型的检查重用这个逻辑问题：我可以使用 scala 类型系统，这样我就可以拥有一个类型化的 JobClass，它可以被重用于执行 Check 的任何子类？

我想出了以下解决方案：

```
class GenericJobRule[J <: Check](implicit m: Manifest[J]) extends Job {

  def execute(context: JobExecutionContext) {
    val check = m.erasure.newInstance().asInstanceOf[J]
    val result = check.execute(context.getJobDetail.getJobDataMap)

    if (result.shouldInvokeAction) {
      Action(result).execute
    }
  }
} 
```

现在可以像这样实例化作业：

```
newJob(classOf[GenericJobRule[PerformanceCheck]]) 
```

这可行，但是我认为实例化和强制类型绕过了类型检查的整个想法。有没有更好的方法来做到这一点？也许我们也应该重新考虑我们的设计......

谢谢，阿尔伯特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T14:01:30.123

也许一种可能性是使用类型类。我试图实现它（简化了一些事情），缺点是特定的作业规则总是必须实现 doCheck 方法（有关类型类的更多信息，请参见[此处](http://debasishg.blogspot.de/2010/06/scala-implicits-type-classes-here-i.html)和[此处](http://dcsobral.blogspot.de/2010/06/implicit-tricks-type-class-pattern.html)）：

**[编辑]**：用特征替换抽象类。不再需要构造函数参数。

**[EDIT2]**：忘记类型类（在这种情况下）。现在让它变得简单多了。每次检查只有一个特征和一个实现类。你对那个怎么想的？

```
trait GenericJobRule[J <: Check] extends Job {

  val genericCheck: J

  def execute(context: JobExecutionContext) {
    val result = genericCheck.execute(context.getJobDataMap)

    if (result.shouldInvokeAction) {
      Action(result).execute
    }
  }  
}

class JobRule1 extends GenericJobRule[SimpleCheck] {
  override val genericCheck = new SimpleCheck
} 
```

现在可以像这样实例化作业：

```
newJob(classOf[JobRule1]) 
```

**[EDIT3]**：如果 GenericJobRule 是一个抽象类，这是另一种可能性：

```
abstract class GenericJobRule[J <: Check] extends Job {

  val genericCheck: J

  def execute(context: JobExecutionContext) {
    val result = genericCheck.execute(context.getJobDataMap)

    if (result.shouldInvokeAction) {
      Action(result).execute
    }
  }  
} 
```

然后，您可以即时创建特定的作业规则：

```
val myJobRule = new GenericJobRule[SimpleCheck] { override val genericCheck = new SimpleCheck } 
```

# jquery - jQuery 动画速度较慢，并且在服务器端的 chrome 中滞后

> ID：10482219
> 
> 赞同：3
> 
> 时间：2012-05-07T12:38:09.817
> 
> 标签：jquery, performance, google-chrome, animation

我的 chrome 版本是：18.0.1025.168 m，jQuery 版本是 1.7.2。

仍然当我尝试制作动画时：

```
$("#xyz").animate({ 'margin-left':'500px' }, 500, function(){
    //Do something (another animation).
    $("#abc").animate({ 'margin-left':'300px' }, 500);
}); 
```

在客户端（在我的计算机上）的所有浏览器（IE、FF 和 Chrome）中都可以流畅和快速地制作动画`xyz`。`abc`

但是，当我将它上传到服务器时，IE 和 FF 像往常一样流畅地制作动画。Chrome 动画`abc`流畅。但是 Chrome 在制作动画时会遇到严重的问题/滞后`xyz`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-27T07:22:24.893

这是 Chrome 中的一个众所周知的错误。当背景图像是全尺寸甚至低于它时，它会滞后。

阅读更多[https://code.google.com/p/chromium/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Pri%20M%20Iteration%20ReleaseBlock%20Cr%20Status%20Owner%20Summary%20OS %20Modified&groupby=&sort=&id=92812](https://code.google.com/p/chromium/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Pri%20M%20Iteration%20ReleaseBlock%20Cr%20Status%20Owner%20Summary%20OS%20Modified&groupby=&sort=&id=92812) "在 chrome 中滚动时背景图像滞后是一个错误！"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T12:54:12.590

您在 xyz 上的动画是否反复出现？如果是这样，您可能需要清除动画队列。查看 jquery .stop() 命令。您滞后的原因可能是 jQuery 在开始下一个动画之前等待之前的动画完成。如果每次为 xyz 设置动画时延迟似乎都会增加，我会怀疑这是原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-25T13:10:56.667

将数字提高到高值并尝试。即而不是margin-left'：'500px'尝试margin-left'：'1000px' ...我不知道为什么，但它对我有用...margin和top，left，right，bottom在chrome中有点滞后。

# javascript - touchmove 中的 JavaScript DOM 更改延迟到移动 Safari 上的滚动结束

> ID：10482227
> 
> 赞同：16
> 
> 时间：2012-05-07T12:38:55.783
> 
> 标签：javascript, ios, safari, classname, touchmove

在移动 safari 中，在处理`touchmove`一个元素的过程中，我更改了`className`该元素的。不幸的是，视觉变化不会在用户滚动时发生，或者直到惯性滚动的最后。

我该怎么做才能`className`立即目视拍摄？

**更多：**显然这不仅限于 className 更改，而且似乎对 DOM 进行了任何更改，例如`innerHTML`and `style`。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-01T20:05:17.923

我实际上建立了那个站点，是的，绕过这个限制的方法是不使用内置浏览器功能滚动站点，而是伪造它。JS 监听滚轮和键盘事件，并将主容器的 css top 属性补间到它自己的“scrollTop”。右边的滚动条当然是自定义的 JS 滚动条。在这种情况下，它同步到相同的内部 'scrollTop' 值。

整个网站实际上只是一个大补间，主时间线是它的 scrollTop 位置，所有子动画都在特定时间触发。JS 没有被缩小，所以看看 ScrollAnimator.js 文件，它就在那里。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-11T13:13:03.263

不幸的是，这是设计使然。iOS Safari 会将所有 DOM 操作排队，直到滚动或手势结束。实际上，DOM 在滚动期间被冻结。

我以为我可以在苹果开发者页面上找到对此的参考，但我只能找到指向 jQueryMobile 的链接：http: [//jquerymobile.com/test/docs/api/events.html](http://jquerymobile.com/test/docs/api/events.html)。

> 请注意，iOS 设备在滚动期间冻结 DOM 操作，将它们排队以在滚动完成时应用。我们目前正在研究允许在滚动开始之前应用 DOM 操作的方法

希望这可以帮助！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-07-30T03:51:49.760

只需将位置更改为`-webkit-sticky`。不要设置顶部，这样它看起来就像一个普通元素，但执行起来就像一个固定元素。你可以立即更新它的样式，除了位置。

# java - 在 Java Applet 中发送数据包

> ID：10482228
> 
> 赞同：0
> 
> 时间：2012-05-07T12:38:56.157
> 
> 标签：java, applet, sip

我编写了一个简单的 Java 小程序，可以将 SIP 数据包发送到我们的服务器。在 Sun 小程序查看器中的 Eclipse 中运行时，一切正常，但是当我尝试将小程序嵌入 Web 浏览器（使用小程序标签）时，小程序成功运行，但没有发送任何数据包。我使用wireshark验证了这一点。IE/chrome 中是否有一些我不知道的安全设置？我想我可以在必要时显示代码。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:45:34.853

我认为applet 只能与源服务器通信，类似于javascript ajax 调用，如果不是这样，那么您可以在流行站点中使用简单的servlet 进行某种攻击。

检查您是否到达源服务器。

干杯!

# android - 在ImageView上绘制矩形以突出显示可以在android中放大

> ID：10482229
> 
> 赞同：17
> 
> 时间：2012-05-07T12:38:57.793
> 
> 标签：android, imageview, zooming

我已经从下面的 SO 中引用了这个例子是他们。

1.[在 ImageView 上画线](https://stackoverflow.com/questions/8831642/how-to-draw-lines-over-imageview-on-android)

2.[在ImageView上画图](https://stackoverflow.com/questions/6956774/android-draw-picture-over-imageview)

3.我已经使用这个 ImageView 类让我的图像成为放大缩小[图像捏缩放代码 google](http://code.google.com/p/scale-imageview-android/source/browse/src/com/matabii/dev/scaleimageview/ScaleImageView.java)。

**现在我想做的是：**

我想通过捏住屏幕来放大，其他一点是，当我单击一个矩形时，应该在图像视图上绘制一个矩形，我还希望这个矩形应该通过 imageView 的放大和缩小来放大和缩小，我想要通过`ScaleImageView` 课堂使用它。

其输出应如下图所示。

![你可以看到当我在 ImageView 上单击时它会像在图像中显示一样绘制矩形](../Images/1db931ff1c27d4eda46221109a0f7cbd.png)

而且我也知道，这可以通过 Using`Relative Layout`或`SurfaceView`在 android 中使用来完成，但我是使用 Surface 视图的新手，我也担心如果我使用另一个视图而不是 imageView 进行绘制，那么这两个视图都可以放大和出来。如果我在 ImageView 上使用 SurfaceView，那么 Image 可以放大和缩小。

通过使用此处的此捏拉放大示例。[我使用捏缩放的示例](http://code.google.com/p/scale-imageview-android/)。

现在我通过该示例中的以下代码在单点触控上绘制矩形。

```
@Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        Log.v("Log_tag", "Draw Image View");
        //Bitmap _scratch = BitmapFactory.decodeResource(getResources(), R.drawable.rect_image);
        //canvas.drawColor(Color.BLACK);
        //canvas.drawBitmap(_scratch, 10, 10, null);
        Drawable d = getDrawable();
        //Bitmap bitmap = ((BitmapDrawable)d).getBitmap();
        Bitmap bitmap = Bitmap.createBitmap(100, 100, Bitmap.Config.RGB_565);
        /*if(bitmap!=null){
            if (x1 > 0 || x2 > 0 || y1 > 0 || y2 > 0){
                  Log.v("Log_tag", "ImageBitmap is draw");
                //Canvas mCanvas=new Canvas(bitmap);
                //mCanvas.drawRect(x1, y1, x2, y2, mPaint);
                //  canvas.clipRect(left, top, right, bottom);
                   paint.setStyle(Paint.Style.FILL_AND_STROKE);
                    paint.setStrokeWidth(1);
                   paint.setColor(0xFF000000
                      + ((int)(PRESET_PRESSURE * pressure) <<16)
                      + ((int)(PRESET_PRESSURE * pressure) << 8)
                      + (int)(PRESET_PRESSURE * pressure));
                   //mCanvas.drawCircle(x1, y1, (PRESET_SIZE * size), paint);
            }

        }*/
        //canvas.save();
        //canvas.translate(mPosX, mPosY);
       // canvas.scale(mScaleFactor, mScaleFactor);
        mBitmapDrawable.draw(canvas);
        Paint myPaint = new Paint();
        myPaint.setColor(Color.GREEN);
        myPaint.setStyle(Paint.Style.STROKE);
        myPaint.setStrokeWidth(1);
        Log.v("Log_tag", "Redraw with this point");
        canvas.drawRect(rect_x1-30,rect_y1-30, rect_x1+30, rect_y1+30, myPaint);
        mCanvasMatrix=canvas.getMatrix();
        mImageCanvas=canvas;

        canvas.setMatrix(mCanvasMatrix);
        //canvas.restore();

    } 
```

**更新**

下面是我用于 ImageView 捏缩放的类。

```
public class ImageViewScale extends ImageView implements OnTouchListener {
    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        //canvas.save();
        //canvas.scale(mScale, mScale);
        mCanvasMatrix=canvas.getMatrix();
        Paint myPaint = new Paint();
        myPaint.setColor(Color.GREEN);
        myPaint.setStyle(Paint.Style.STROKE);
        myPaint.setStrokeWidth(1);
        if(mCanvasMatrix!=null){
            if(orignalRect!=null)
                mCanvasMatrix.mapRect(orignalRect);
        }
        if(orignalRect!=null){
            canvas.drawRect(orignalRect,myPaint);
        }
        //canvas.drawRect(rect_x1-30,rect_y1-30, rect_x1+30, rect_y1+30, myPaint);
        int canavs_width=canvas.getWidth();
        int canavs_height=canvas.getHeight();
        canvas.setMatrix(mCanvasMatrix);
        //canvas.setMatrix(mMatrix);
        if(mDrawable!=null){
            //mDrawable.draw(canvas);
            Log.v("Log_tag", "draw with Canvas is done  W:"+ canavs_width+"H:"+ canavs_height);
        }
        //canvas.restore();
    }

    private float MAX_SCALE = 2f;
    private int DOUBLE_TAP_SECOND = 400;

    private float CANVAS_MAX_SCALE=2f;

    float rect_x1=50;
    float rect_y1=150;

    private Matrix mMatrix;
    private Matrix mCanvasMatrix;

    private final float[] mCanvasMatrixValues=new float[9];
    private final float[] mMatrixValues = new float[9];
    RectF orignalRect;
    private Drawable mDrawable;
    private ImageView mImageView;
    // display width height.
    private int mWidth;
    private int mHeight;

    private int mIntrinsicWidth;
    private int mIntrinsicHeight;

    private int mCanvasWidth;
    private int mCanvasHeight;

    private float mScale;
    private float mMinScale;

    private float mCanvasMinScale;

    // double tap for determining
    private long mLastTime = 0;
    private boolean isDoubleTap;
    private int mDoubleTapX;
    private int mDoubleTapY;

    private float mPrevDistance;
    private boolean isScaling;

    private int mPrevMoveX;
    private int mPrevMoveY;

    String TAG = "ScaleImageView";

    public ImageViewScale(Context context, AttributeSet attr) {
        super(context, attr);
        initialize();
    }

    public ImageViewScale(Context context) {
        super(context);
        initialize();
    }

    @Override
    public void setImageBitmap(Bitmap bm) {
        super.setImageBitmap(bm);
        this.initialize();

    }

    private void initialize() {
        this.setScaleType(ScaleType.MATRIX);
        this.mMatrix = new Matrix();
        Drawable d = getDrawable();
        mDrawable=d;
        if (d != null) {
            mIntrinsicWidth = d.getIntrinsicWidth();
            mIntrinsicHeight = d.getIntrinsicHeight();
            setOnTouchListener(this);
        }
    }

    @Override
    protected boolean setFrame(int l, int t, int r, int b) {
        Log.v("Log_tag", "Size are here "+ l + t + r+ b);
        mWidth = r - l;
        mHeight = b - t;

        mMatrix.reset();
        mScale = (float) r / (float) mIntrinsicWidth;
        int paddingHeight = 0;
        int paddingWidth = 0;
        // scaling vertical
        if (mScale * mIntrinsicHeight > mHeight) {
            mScale = (float) mHeight / (float) mIntrinsicHeight;
            mMatrix.postScale(mScale, mScale);
            paddingWidth = (r - mWidth) / 2;
            paddingHeight = 0;
            // scaling horizontal
        } else {
            mMatrix.postScale(mScale, mScale);
            paddingHeight = (b - mHeight) / 2;
            paddingWidth = 0;
        }
        mMatrix.postTranslate(paddingWidth, paddingHeight);

        setImageMatrix(mMatrix);
        mMinScale = mScale;
        zoomTo(mScale, mWidth / 2, mHeight / 2);
        cutting();
        return super.setFrame(l, t, r, b);
    }

    protected float getValue(Matrix matrix, int whichValue) {
        matrix.getValues(mMatrixValues);
        return mMatrixValues[whichValue];
    }
    //New Added
    protected float getCanvasValue(Matrix matrix,int whichvalues){
        mCanvasMatrix.getValues(mCanvasMatrixValues);
        return mCanvasMatrixValues[whichvalues];
    }

    protected float getScale() {
        return getValue(mMatrix, Matrix.MSCALE_X);
    }

    //New added  Method
    protected float getCanvasScale(){
        return getCanvasValue(mCanvasMatrix, Matrix.MSCALE_X);
    }

    protected float getTranslateX() {
        return getValue(mMatrix, Matrix.MTRANS_X);
    }

    //New added Method
    protected float getCanvasTranslateX(){
        return getCanvasValue(mCanvasMatrix, Matrix.MTRANS_X);
    }

    protected float getTranslateY() {
        return getValue(mMatrix, Matrix.MTRANS_Y);
    }

    //New Added Method
    protected float getCanvasTranslateY(){
        return getCanvasValue(mCanvasMatrix, Matrix.MTRANS_Y);
    }

    protected void maxZoomTo(int x, int y) {
        if (mMinScale != getScale() && (getScale() - mMinScale) > 0.1f) {
            // threshold 0.1f
            float scale = mMinScale / getScale();
            zoomTo(scale, x, y);
        } else {
            float scale = MAX_SCALE / getScale();
            zoomTo(scale, x, y);
        }
    }

    protected void zoomTo(float scale, int x, int y) {
        if (getScale() * scale < mMinScale) {
            return;
        }
        if (scale >= 1 && getScale() * scale > MAX_SCALE) {
            return;
        }
        mMatrix.postScale(scale, scale);
        // move to center
        mMatrix.postTranslate(-(mWidth * scale - mWidth) / 2,
                -(mHeight * scale - mHeight) / 2);

        // move x and y distance
        mMatrix.postTranslate(-(x - (mWidth / 2)) * scale, 0);
        mMatrix.postTranslate(0, -(y - (mHeight / 2)) * scale);
        setImageMatrix(mMatrix);
    }

    protected void zoomToCanvas(float scale,int x,int y){
        if(getCanvasScale()* scale<mCanvasMinScale){
            return;
        }

        if(scale>=1 && getCanvasScale()*scale> CANVAS_MAX_SCALE){
            return;
        }
        mCanvasMatrix.postScale(scale, scale);

    }

    public void cutting() {
        int width = (int) (mIntrinsicWidth * getScale());
        int height = (int) (mIntrinsicHeight * getScale());
        if (getTranslateX() < -(width - mWidth)) {
            mMatrix.postTranslate(-(getTranslateX() + width - mWidth), 0);
        }
        if (getTranslateX() > 0) {
            mMatrix.postTranslate(-getTranslateX(), 0);
        }
        if (getTranslateY() < -(height - mHeight)) {
            mMatrix.postTranslate(0, -(getTranslateY() + height - mHeight));
        }
        if (getTranslateY() > 0) {
            mMatrix.postTranslate(0, -getTranslateY());
        }
        if (width < mWidth) {
            mMatrix.postTranslate((mWidth - width) / 2, 0);
        }
        if (height < mHeight) {
            mMatrix.postTranslate(0, (mHeight - height) / 2);
        }
        setImageMatrix(mMatrix);
    }

    private float distance(float x0, float x1, float y0, float y1) {
        float x = x0 - x1;
        float y = y0 - y1;
        return FloatMath.sqrt(x * x + y * y);
    }

    private float dispDistance() {
        return FloatMath.sqrt(mWidth * mWidth + mHeight * mHeight);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        int touchCount = event.getPointerCount();
        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
        case MotionEvent.ACTION_POINTER_1_DOWN:
        case MotionEvent.ACTION_POINTER_2_DOWN:
            if (touchCount >= 2) {
                float distance = distance(event.getX(0), event.getX(1),
                        event.getY(0), event.getY(1));
                mPrevDistance = distance;
                isScaling = true;
            } else {
                if (System.currentTimeMillis() <= mLastTime + DOUBLE_TAP_SECOND) {
                    if (30 > Math.abs(mPrevMoveX - event.getX())
                            + Math.abs(mPrevMoveY - event.getY())) {
                        isDoubleTap = true;
                        mDoubleTapX = (int) event.getX();
                        mDoubleTapY = (int) event.getY();
                    }
                }
                mLastTime = System.currentTimeMillis();
                mPrevMoveX = (int) event.getX();
                mPrevMoveY = (int) event.getY();
            }
            break;
        case MotionEvent.ACTION_MOVE:
            if (touchCount >= 2 && isScaling) {
                float dist = distance(event.getX(0), event.getX(1),
                        event.getY(0), event.getY(1));
                float scale = (dist - mPrevDistance) / dispDistance();
                mPrevDistance = dist;
                scale += 1;
                scale = scale * scale;
                zoomTo(scale, mWidth / 2, mHeight / 2);
                cutting();
            } else if (!isScaling) {
                int distanceX = mPrevMoveX - (int) event.getX();
                int distanceY = mPrevMoveY - (int) event.getY();
                mPrevMoveX = (int) event.getX();
                mPrevMoveY = (int) event.getY();
                mMatrix.postTranslate(-distanceX, -distanceY);
                cutting();
            }
            break;
        case MotionEvent.ACTION_UP:
        case MotionEvent.ACTION_POINTER_UP:
        case MotionEvent.ACTION_POINTER_2_UP:
            if (event.getPointerCount() <= 1) {
                isScaling = false;
                if (isDoubleTap) {
                    if (30 > Math.abs(mDoubleTapX - event.getX())
                            + Math.abs(mDoubleTapY - event.getY())) {
                        maxZoomTo(mDoubleTapX, mDoubleTapY);
                        cutting();
                    }
                }
            }
            isDoubleTap = false;
            break;
        }
        return true;
    }

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        int count_touch=event.getPointerCount();
        switch(event.getAction()){
        case MotionEvent.ACTION_UP:
            float point_x=event.getX();
            float point_y=event.getY();
            rect_x1=point_x;
            rect_y1=point_y;
            if(count_touch==1){
                orignalRect=new RectF(rect_x1-30, rect_y1-30, rect_x1+30,  rect_y1+30);
                invalidate();
            }
            break;
        }

        return super.onTouchEvent(event);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T15:13:31.663

您可能想签[出 Matrix.mapRect](http://developer.android.com/reference/android/graphics/Matrix.html#mapRect%28android.graphics.RectF%29)。使用此方法将矩形变换为与 imageview 中的图像相同的量。

```
boolean onTouch(MotionEvent ev) {
    ....
    // this rect dimensions should be initial values and should be a member.
    mOriginalRect = new RectF(rect_x1-30, rect_y1-30, rect_x1+30, rect_y1+30); 
    .....
}

@Override
protected void onDraw(Canvas canvas) {
    ....
    mCanvasMatrix = canvas.getMatrix();  ///matrix should have scale values..
    mCanvasMatrix.mapRect(tempRect, mOriginalRect); // mOriginalRect is src 
    canvas.drawRect(tempRect, myPaint);   // draw tempRect..
    ....
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T13:31:43.773

@Herry - 我在这类问题上做了一个小的 POC，发现我们必须在转换图像视图时准确地转换画布。

例子 ：

```
@Override
protected void onDraw(Canvas canvas) {
super.onDraw(canvas);
Resources res = this.getResources();
Bitmap mBitmap = BitmapFactory.decodeResource(res, R.drawable.circlered);
canvas.save();
canvas.translate(1f, 1f);
canvas.restore();
canvas.save();
canvas.concat(mMatrix);
canvas.drawBitmap(mBitmap, 100, 150, null);
} 
```

试试这个！让我知道。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T23:06:24.973

您可能想要扩展 ImageView，在视图 onDraw(Canvas) 中绘制矩形。

扩展 ImageView 一次以进行捏合缩放（应使用图像视图中的矩阵来实现捏合缩放）

再次扩展它以获取一个矩形，使用图像矩阵对其进行转换并在 super.draw() 调用之后绘制它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-18T11:51:03.560

## 绘制 Ractangle 图像视图

```
 public class RactangleImageView extends ImageView {
      private static final int strockwidth = 6;
      private Paint paintBorder;
      private Bitmap bitmap;
      private int strokeWidthPx;
      private RectF rectF;
      private RadialGradient radialGradient;
       public RactangleImageView(Context context) {
        super(context);
        init();
      }
     private void init() {
        bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.imageicon);
        strokeWidthPx = (int) (strockwidth * getResources().getDisplayMetrics().density);
        int halfStrokeWidthPx = strokeWidthPx / 2;
        paintBorder = new Paint();
        paintBorder.setStyle(Paint.Style.FILL);
        int totalWidth = bitmap.getWidth() + strokeWidthPx * 2;
        int totalHeight = bitmap.getHeight() + strokeWidthPx * 2;
        radialGradient = new RadialGradient(totalWidth /2, totalHeight /2, totalWidth /2, new int[]    {Color.BLACK, Color.GREEN}, null, Shader.TileMode.MIRROR);
        paintBorder.setShader(radialGradient);
        setImageBitmap(Bitmap.createBitmap(totalWidth, totalHeight,        Bitmap.Config.ARGB_8888));
          rectF = new RectF(halfStrokeWidthPx, halfStrokeWidthPx, totalWidth - halfStrokeWidthPx, totalHeight - halfStrokeWidthPx);
      }   
      @Override
      protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        canvas.drawRoundRect(rectF, 40, 40, paintBorder);
        canvas.drawBitmap(bitmap,strokeWidthPx, strokeWidthPx, null);
      }
    } 
```

# jquery - 用于 2 个 html 案例的 jQuery slideDown

> ID：10482241
> 
> 赞同：0
> 
> 时间：2012-05-07T12:39:55.823
> 
> 标签：jquery, slidedown

在这里，我有我的复选框 slideDown 解决方案的示例。[http://jsfiddle.net/kNpYz/3/](http://jsfiddle.net/kNpYz/3/)

当您选中复选框时，某些元素会滑动或滑动，并且工作正常，但是当我在此更改 HTML 时。我知道我必须更改 jQuery 标记，但我不知道怎么做。

```
<div id="section-uvitaci_text" class="section section-checkbox ibutton">
  <h3 class="heading">Uvítací text</h3>
  <div class="option">
    <div class="controls">
      <input type="hidden" class="fld checkbox aq-input" name="uvitaci_text" id="uvitaci_text" value="0">
      <div class="ibutton-container">
        <input type="checkbox" class="fld checkbox of-input" name="uvitaci_text" id="uvitaci_text" value="1" checked="checked">
        <div class="ibutton-handle" style="left: 50px; ">
          <div class="ibutton-handle-right">
            <div class="ibutton-handle-middle"></div>
          </div>
        </div>
        <div class="ibutton-label-off"><span style="margin-right: -50px; ">
          <label>OFF</label>
          </span></div>
        <div class="ibutton-label-on" style="width: 54px; overflow-x: hidden; overflow-y: hidden; "><span style="margin-left: 0px; ">
          <label>ON</label>
          </span></div>
        <div class="ibutton-padding-left"></div>
        <div class="ibutton-padding-right"></div>
      </div>
    </div>
    <div class="explain">This will show an offline message. Except for administrators, nobody will be able to access the site</div>
    <div class="clear"> </div>
  </div>
</div> 
```

所以效果不行。对于这个 HTML 案例，我必须在我的 js 中更改什么？

谢谢你的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:56:02.997

使用这个 jQuery 代码：

```
 jQuery('.fld').click(function() {
    $(this).closest('.option').find('.explain').slideToggle('normal', "swing");
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T12:58:08.300

您的 HTML 有很多错误，例如不能有两个具有相同 ID 的控件，并且您在 jquery 中滑动的 ID 不存在，试试这个：

[正确的代码](http://jsfiddle.net/JfrRV/1/)

# sql-server - sql查询日期的年份部分

> ID：10482244
> 
> 赞同：0
> 
> 时间：2012-05-07T12:40:01.303
> 
> 标签：sql-server, datetime, sql-server-2000

有人可以帮我做一个 sql 查询吗？我有一列有日期，还有一列有年份。我希望能够根据年份列中的选择来提取日期列。例如，如果日期是 2006 年 8 月 2 日，那么当用户从该记录中选择 2006 年时，将提取 2006 年的所有记录？如果用户选择 2011，那么只会提取 2011 年的记录。这是我的声明，但它没有提取任何记录。

```
SELECT [O_Adj_Key]
  ,[O_Adj_AMOUNT]
  ,[O_Adj_APPRV_D]
  ,[O_Adj_COMMENT]
  ,[O_Adj_Initials]
  ,[F_Year]

FROM [NAOLI].[dbo].[O_AdjustBudgetTbl], [NAOLI].[dbo].[codeFiscalYearTbl]
where f_year = o_adj_apprv_d 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T13:05:57.487

您可以使用 YEAR(datetimefield) 函数进行比较。例如：

```
SELECT  YEAR(GETDATE())
where   YEAR(GETDATE()) = YEAR(GETDATE()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T12:45:56.637

在 MS SQL Server 中，您可以获得（并且能够做到这一点）该[`DATEPART`](http://www.w3schools.com/sql/func_datepart.asp)功能。

# sql - 三表连接

> ID：10482246
> 
> 赞同：0
> 
> 时间：2012-05-07T12:40:12.397
> 
> 标签：sql

我有三张桌子。

一个是文章，一个是文章的标签，以及一个链接这些表格的表格，因为它是多对多的关系。每篇文章都有一些标签，为了保持标签表小而数据整数我需要一个表将它们链接在一起。

现在我必须在标签中搜索某些关键字，然后选择链接到这些标签的文章。最有效的方法是什么？这是表格的视觉呈现：

![在此处输入图像描述](../Images/e1ad0ec444442635673a545951af9169.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T12:44:28.817

搜索文章/文档的最有效方法是**不**使用关系数据库。那不是它的Forte。例如 SOLR 将是完美的。

但：

```
SELECT
   a.id
FROM
   article a
  join
   article_tags b
  on
   a.id = b.article_id
  join
   tags c
  on
   b.tag_id = c.id
where
  c.tag_name = {$cleaned_input_tag_name} 
```

你也可以`c.tag_name = {$cleaned_input_tag_name}` 发表`IN`声明或`LIKE`声明

# c# - 绑定数据表时未将对象引用设置为winform中的对象实例

> ID：10482247
> 
> 赞同：1
> 
> 时间：2012-05-07T12:40:12.403
> 
> 标签：c#, winforms, data-binding, datagridview

你可能会嘲笑我愚蠢，你可能会投反对票。但没关系。我已经为这个简单的问题挣扎了好几天。基本上我想通过windows形式的datagridview显示一个表格。该表是从存储过程中获取的。

```
BindingSource bsource = new BindingSource();
    DataSet ds = new DataSet();
    private SqlDataAdapter da;
    DataTable table1 =  some subroutine 
```

然后表确实存在。 ![快照](../Images/bed64c59cd7b8670492b19fa459c34ea.png)

然后在运行下面的代码后，我得到一个异常“对象引用未设置为对象的实例。”。

```
ds.Tables.Add(table1);
            da.Fill(table1); // here catch an error.
            bsource.DataSource = table1;
            datagridview1.DataSource = table1; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:42:52.263

除非您在`da`某处进行初始化，否则在这之间：

```
private SqlDataAdapter da; 
```

还有这个：

```
da.Fill(table1); 
```

你当然会得到一个 NPE，因为它没有指向任何东西。我想你的意思是：

```
private SqlDataAdapter da = new SqlDataAdapter(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T12:44:04.657

你没有初始化`SqlDataAdapter`

```
private SqlDataAdapter da = // Initialize adapter here. 
```

# c - 如何连接到 IRC 服务器/解析 IRC MSGs/PING-PONG 处理 C 语言（提供代码）

> ID：10482249
> 
> 赞同：0
> 
> 时间：2012-05-07T12:40:26.923
> 
> 标签：c, sockets, ping, irc

我正在用 C 语言编写 IRC 客户端。在连接服务器时遇到了一些问题。当我运行程序时，我得到以下信息：

**输出**

```
Set Fully Qualified host Domain Name(human readable):  ::automaticaly provided::

Set the port number of the server You want to connect to: ::automaticaly provided::

Destination server IP: 88.190.23.245

Socket descriptor: 3

Connection has been successfully established

Peer's IP is: 88.190.23.245
Peer's port is: 5190

:irc2.gbatemp.net NOTICE AUTH :*** Looking up your hostname...

:irc2.gbatemp.net NOTICE AUTH :*** Found your hostname (cached)

Type Your nick name: ::automaticaly provided::

Type Your user name: ::automaticaly provided::

(10-20 seconds break here and than what follows down here)

ERROR :Closing Link: thisIsMyNickNameXXXa[85.221.165.54] (Ping timeout)

temp.net NOTICE AUTH :*** Found your hostname (cached)

ERROR :Closing Link: thisIsMyNickNameXXXa[85.221.165.54] (Ping timeout)

temp.net NOTICE AUTH :*** Found your hostname (cached)

ERROR :Closing Link: thisIsMyNickNameXXXa[85.221.165.54] (Ping timeout)

temp.net NOTICE AUTH :*** Found your hostname (cached)

.......
.............
................... 
```

==================================================== ===========

`::automaticaly provided::`- 表示现在由程序传递，所以我不必多次输入。

顺便提一句。正在连接到 irc.gbatemp.net:5190（就我而言，不需要密码）

在提供必要的数据后 10-20 秒发生中断（我在 OUTPUT 部分指定），然后 ERROR temp.net 部分跟随广告无限（我用点标记）

所以问题的主要部分是我应该如何以及何时发送 PONG 消息以响应 PING ？我做了我的研究，但仍然无法做到。为什么我在 STDOUT 中看不到 PING 消息？

我正在提供负责输出和 PINGPONG 部分的代码（已注释）（目前的主要问题是 PING PONG，因为错误状态为 PING TIMEOUT）可能是 while(1) 循环还不完美，但我想它是另一个主题的主题）代码如下：

```
 int readReady=0;
    int writeReady=0;
    pid_t pID;
    char buf[1024];     //I/O buffer (?)
    pid_t sID;
    char *NICK = "NICK thisIsMyNickNameXXXa\n\r";
    char *USER = "USER tomaazrxtc 8 * :nameandsurname";
    char ping[512];
    char *change;

    pID=fork();
            if(pID < 0){
                //failed to execute fork()
                perror("Error while forking");
                getchar();getchar();
                exit(1);
            }
            if(pID > 0){
                exit(0);
                }
            //child down here
                //setting new session
                sID = setsid();
                if(sID < 0){
                    perror("Error while setting new session");
                    getchar();getchar();
                    exit(1);
                }

//---------receiving NOTICE AUTH :*** part-------------------------------

                if(recv(sockfd, buf, 1024,0)>0){
                printf(buf);
                }
                else{
                    perror("Error while receiving data");
                }

//---------providing and sending NICK and USERNAME-----------------------

                printf("Type Your nick name: \n");
                //scanf(nickname); pamietaj zeby zapewnic podawanie tylko nicku, a format handler zrobic osobno

                send(sockfd, NICK, strlen(NICK), 0);

                printf("Type Your user name: \n");
                //scanf(username); pamietaj zeby zapewnic podawanie tylko nicku, a format handler zrobic osobno

                send(sockfd, USER, strlen(USER), 0);

//--------Shoudnt I receive PING message just here ?????-----------------

                recv(sockfd, buf, strlen(buf), 0);
                printf(buf);

//--------PONG'ing function which I havent tested yet since i cant see PING message----

                recv(sockfd, ping, 512,0);
                if(strstr(ping, "PING")){
                    change = strstr(ping, "PING");
                    strncpy(change, "PONG", 4);
                    send(sockfd, ping, 512, 0);
                    }

//-------------------------------------------------------------------------

                while(1){
                    //sleep(1);
                    if((readReady = readReadiness(sockfd))==0){    //nothing to recv
                        if((writeReady = writeReadiness(sockfd))>0){  //sending is possible
                                scanf(buf);
                                send(sockfd, buf, strlen(buf), 0);
                                continue;
                        }
                        else
                            continue; //if there s no data to read and cant send (is it even possible?)
                    }
                    else{ //if there s some data to recv() on the socket buffer
                        recv(sockfd, buf, strlen(buf), 0);
                        printf(buf);
                        continue;
                    }
                }
//-------------------------------------------------------------------------- 
```

行。以后我会把这个问题留给其他人并提供答案。这很琐碎。

我刚刚在 USER 变量的末尾添加了 \n\r （就像在 NICK 字符串中一样）。像魅力一样连接！

终于 ： ））

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T13:10:17.843

因此，我立即发现的一些问题是：

1.  `NICK`未正确终止。应该是`\r\n`。
2.  `USER`根本没有终止，它应该以`\r\n`.
3.  当您发送 ping 响应时，您的硬编码大小为`512`. `send()`不适用于字符串，它适用于原始数据。所以，你也会在这里传递很多垃圾。您需要根据收到的内容传递长度。
4.  `printf(buf);`不安全。任何碰巧包含格式说明符的传入字符串都会导致`printf()`尝试解释它们（这被称为“格式字符串漏洞”）。它们应该被替换为`printf("%s", buf);`以安全的方式实现相同的行为。
5.  通常，您的代码假定从 IRC 接收到的消息是 nul 终止的。他们不是。您应该使用 的返回值`recv()`来了解您收到了多少数据。
6.  您`strlen()`用于确定缓冲区的大小。此函数计算字符串的长度，而不是缓冲区的大小。您应该改用`sizeof`运算符。
7.  我不确定`scanf(buf);`应该做什么，但几乎可以肯定这不是你想要的。也许你在找`fgets()`？
8.  您`recv()`对 ping 的调用发生在 for 之后`buf`。你怎么知道什么时候会发生，会持续多久？似乎您应该始终使用相同的缓冲区。

# apache - 动态创建子域。（阿帕奇Tomcat 5.5）

> ID：10482253
> 
> 赞同：1
> 
> 时间：2012-05-07T12:40:33.720
> 
> 标签：apache, jsp, tomcat, subdomain, subdirectory

我想为我的网站动态创建子域。是否可以使用 JSP 来做到这一点。例如，我想为每个用户注册创建一个子域。

同样，如果`www.mywebsite.com`是我的网站，当用户注册时，我需要通过`www.userName.mywebsite.com`. 我已经[在这里](https://stackoverflow.com/questions/10351085/create-a-sub-website-of-the-parent-website-for-each-usersub-domain-or-subfolder)发布了，我认为我的问题不清楚。我正在使用 JSP 和 Apache tomcat 5.5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T13:20:33.580

如果问题是“这可以通过编程方式完成”，那么答案是肯定的。如果问题是“这可以用 JSP 完成”，答案是……也许？我对 JSP 不是很熟悉，但是要执行您所描述的操作，您需要：

*   动态更新 DNS 服务器以创建`www.username.mywebsite.com`DNS 记录；
*   动态更新您的网络服务器以识别新的虚拟主机名。

前者很棘手。如果您有支持动态 DNS 更新的服务器，或者您正在使用具有良好 API 的 DNS 提供商，那么以编程方式进行更新是微不足道的。

有多种方法可以让您的网络服务器了解新的虚拟主机。Apache 的[mod_vhost_alias](https://httpd.apache.org/docs/2.2/mod/mod_vhost_alias.html)模块使这变得相对简单；您可以在文档中阅读更多[动态配置的海量虚拟主机](https://httpd.apache.org/docs/2.2/vhosts/mass.html)。

您还可以使用`mod_rewrite`数据库查找来做一些聪明的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T10:16:54.773

也可以创建虚拟子域。拦截请求（使用 Spring MVC 中的 HandlerInterceptorAdapter 或 struts 拦截器......）并将请求 url 映射到您的应用程序 url。

出于测试目的，我想使用驱动程序/etc/hosts 就足够了。我可能错了。

# asp.net - 未声明“ZoneDropDown”。由于其保护级别，它可能无法访问

> ID：10482258
> 
> 赞同：0
> 
> 时间：2012-05-07T12:40:48.357
> 
> 标签：asp.net, vb.net

我的 .aspx 页面中有一堆控件。此外，设计器还为这些控件生成代码。当我尝试使用这些控件中的任何一个时，页面中的所有控件都会出现上述错误。我是 VB.Net 的新手。请帮助提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T13:21:51.640

您需要在您的 aspx 页面顶部检查您的页面指令。

```
<%@ Page Language="VB" MasterPageFile="~/Master/Mater.master" AutoEventWireup="false"
    CodeFile="Test.aspx.vb" Inherits="Test" %> 
```

检查 CodeFile 属性是否设置为正确的代码文件。

因此，如果您正在处理 Test.aspx 并且您的代码文件是 Test.aspx.vb 您的 CodeFile 属性应该设置为 Test.aspx.vb 并且它应该继承测试。

如果 CodeFile 不正确，那么您将无法访问任何控件，因为后面的代码不知道要查看哪个页面。

# xcode - 在 iPad 模拟器中侧放的 Interface Builder 选项卡栏视图

> ID：10482263
> 
> 赞同：0
> 
> 时间：2012-05-07T12:41:12.080
> 
> 标签：xcode, ipad, tabs, interface-builder

我很困惑，希望有人可能遇到过这个问题，并且能够告诉我到底做了什么！

我有一个工作正常的视图 - 风景

我添加了一个新的选项卡栏控制器并将这个新视图连接到其中。

确保标签栏视图控制器和窗口都是横向的。（在 IB 中编辑）

支持的设备方向只是横向

单击运行，基本上垂直视图显示在它的一侧，如下图所示： [http ://s13.postimage.org/sabxoufrr/Screen_Shot_2012_05_07_at_13_26_06.png](http://s13.postimage.org/sabxoufrr/Screen_Shot_2012_05_07_at_13_26_06.png)

任何想法我可能做了什么？（或者您可能需要什么其他信息来帮助诊断！）有趣的是，我将创建的视图（我尝试添加到条形控制器的视图）拖到一个全新的项目中，同样的事情发生了。

视图不必连接到 IB 中的选项卡控制器，但它在项目中的存在足以将选项卡视图翻转到其一侧

我很困惑

编辑：代码中没有做任何事情 - 我在代码中更改的唯一特征是背景图像

编辑：俗气的解决方案 - 我只是将所有内容复制到一个新项目中，现在它工作正常 - 但对于为什么会发生这种情况仍然有点困惑，并且有兴趣找出答案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T17:30:20.890

我认为 BobbyScon 就在这里，当我再次遇到这个问题时，我只是看的不够仔细或在正确的视图控制器上。导致问题的不一定是新的视图控制器，更有可能是选项卡栏控制器设置中已经存在的视图之一

所以是的，请确保

```
 -(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interface‌​Orientation{ return YES; } 
```

（已回答问题并选择作为答案以将其从未回答列表中删除，但如果 BobbyScon 回答回答，将改为勾选他）

# javascript - JS Submit() 访问被拒绝 IFrame IE

> ID：10482265
> 
> 赞同：3
> 
> 时间：2012-05-07T12:41:14.167
> 
> 标签：javascript, jquery, html

我在 iframe 中有一个表单，其输入类型文件带有一个 onchange 事件，只要输入被修改，就会提交表单，然后我在 IE 中得到一个错误，仅适用于其他浏览器。

例如（简化版）

```
<form id="form1">
<input type="file" id="_file" onchange="document.forms[0].submit();$('#form1').hide()" />
<input type="button" onclick="$('#_file').click();" />
</form> 
```

然后 IE 8 给出了这个错误：

```
SCRIPT5: Access is denied. 
```

我相信这与 IE 认为从用户未触发的事件提交的安全风险或它可能与它发生在 iframe 中的事实有关。关于如何解决这个问题的任何想法？

**编辑**

看起来问题可能与 input[type:file] 是隐藏的事实有关，它的宽度和 opacity:0 很小。在让它显示并在那里放置一个提交按钮后它可以工作，但我需要它在没有显示输入 [type:file] 且没有提交按钮的情况下工作。但是，在 onchange 中显示和提交的 input[type:file] 尝试仍然不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T05:28:46.527

似乎问题是当您以编程方式设置和提交文件输入时 IE 不喜欢它。现在发现这个问题所以放弃了。当用户在 IE 中时，我选择使用 Jquery uploadify 作为后备。这对闪存产生了不必要的依赖，但这是我能想到的最佳选择。

# javascript - 引用没有 ID 的 div

> ID：10482273
> 
> 赞同：0
> 
> 时间：2012-05-07T12:42:20.213
> 
> 标签：javascript

我对 addEvent（或其他我不知道的东西）有疑问。这是我的代码。
HTML：

```
<div style="background-color:red;height:30px;width:30px;" ></div>
<div style="background-color:yellow;height:30px;width:30px;" ></div> 
```

JS：

```
function addEvent(elm,ev,fun)//Cross-browser addEvent
{
    if(elm.addEventListener)elm.addEventListener(ev,fun,false);
    else if(elm.attachEvent)
    {
        var r=elm.attachEvent("on"+ev,fun);
        return r;
    }
}

function myFun(x)
{
    alert(x.style.backgroundColor);
}

var allDiv=document.getElementsByTagName("div");
myFun(allDiv[0]);//Here it works
for(var i=0;i<allDiv.length;i++) {
      //But not here when you click the div
      addEvent(allDiv[i],
               "click",function(){
                          myFun(allDiv[i])
                       });
} 
```

我希望警报有效，但不使用 ID 并且不放置内联 onclick。是否可以 ？

[http://jsfiddle.net/G9gBS/1/](http://jsfiddle.net/G9gBS/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:44:07.677

与其将其调用为`allDiv[i]`，不如将其传递`this`给回调函数。在调用 onclick 回调时，`i`超出范围且无法通过`allDiv[i]`. 回调在调用的上下文中调用`<div>`，由 引用`this`。

```
for(var i=0; i<allDiv.length; i++) {
      addEvent(allDiv[i], "click", function() {
         // allDiv[i] is out of scope in the callback.  Use this instead.
         myFun(this);
      });
} 
```

[更新了 jsFiddle。](http://jsfiddle.net/G9gBS/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T12:49:57.330

改变

```
for(var i=0;i<allDiv.length;i++)addEvent(allDiv[i],"click",function(){myFun(allDiv[i])}); 
```

到

```
for(var i=0;i<allDiv.length;i++)addEvent(allDiv[i],"click",function(){myFun(this)}); 
```

> 如果我想访问 i onclick，我应该传递什么作为参数？

像这样，是一种方式（另一种是使用绑定）：

```
for(var i=0;i<allDiv.length;i++){
    var bob = i;
    addEvent(allDiv[i],"click",function(){
                               alert(bob);
                               myFun(this,bob);
    });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T12:51:23.833

在 JavaScript 中使用闭包时，你陷入了一个常见的陷阱。我已关闭，但所有点击函数的更改都在调用 myFunc，`allDiv[allDiv.length -1]`您可以使用自执行函数来解决这个问题

```
for(var i=0;i<allDiv.length;i++) {
          addEvent(allDiv[i],
                   "click",(function(j) {
                              return function(){
                                       myFun(allDiv[j])
                                     }
                            }(i)));
} 
```

这不再关闭 i（在分配给点击事件的函数中从未引用 i）。

但是在这种特殊情况下，您可以简单地传递它。在触发事件的元素的上下文中调用事件处理程序，以便您可以执行

```
for(var i=0;i<allDiv.length;i++) {
              addEvent(allDiv[i],
                       "click",function(){myFun(this)});
} 
```

甚至更短的使用 jQuery

```
var myFun function(x)
{
    alert(x.style.backgroundColor);
}

$("div").click(myFun); 
```

# css - jquerymobile ajax 问题

> ID：10482281
> 
> 赞同：1
> 
> 时间：2012-05-07T12:42:51.323
> 
> 标签：css, ajax, jquery-mobile, styles

我试图构建一个从工作数据中选择帖子数据的应用程序。所以它只需要在 jquery-moblie 中成为一个简单的`<li>`elmenets`<ul>`来显示这是我的代码：probalme 最后有描述它

```
<?php /**
        * @author yosef yawitz
        * @copyright 2012
        * @name index.php
        **/
require_once 'inc/header.php';
/**
 * $query = 'inventory_sku';
 * $a = wareHouseAllItems($query);
 */
?>
<script src="js/jqm.autoComplete-1.3.js"></script>
<body>
<div data-role="page" id="indexPage">

    <div data-role="header" data-position="fixed"> 
        <h1> בר דעת </h1> 
    </div>
    <div data-role="content">
    <ul id="inventoryProducts"data-role="listview" data-theme="g">
        </ul>
    </div>
    <div data-role="footer">
        <h1>Comp</h1>
    </div>
</div>
<script>

        $(document).ready(function(){
        $('#inventoryProducts').load('inc/load_posts.php');
        });
 </script>
</body>
</html> 
```

当我在页面底部加载 ajax 时，`<li>`elemnet 显示正常并且没有 jquery css 样式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T14:43:51.297

I had the same problem. Do an Ajax call, something along the lines of:

```
$.ajax({
    type: 'POST',
    url: inc/load_posts.php,
    success:function(receivedData){
        // successful request; do something with the data
        var myData = receivedData;
        },
    error:function(){
        // failed request; give feedback to user
        alert('Ajax call failed.');
    }
}); 
```

And then use this code in Javascript to update your page with the posts you received through the Ajax call.

```
$("#content").html(myData).page();
$("#content").page("destroy").page(); 
```

It solved the problem for me.

Maybe this can help you as well : [http://blog.dkferguson.com/index.cfm/2011/3/15/jQuery-Mobile-styling-loaded-content](http://blog.dkferguson.com/index.cfm/2011/3/15/jQuery-Mobile-styling-loaded-content)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-15T04:33:22.130

```
function loginfunction()
{ 

  alert(1);

    var uname=document.getElementById('uid').value;
    var pword=document.getElementById('psw').value;
    var query="UID="+uname+"&PWD="+pword;

    alert(2);

    $.ajax({
        url:"http://192.168.1.36/login.php",
        type:"POST",
        data:query,
        timeout:10000,
        success : function(data)
        { 
            alert(3);

            data=jQuery.parseJSON(data);
            if(data==1){alert("success");
            window.location='Home.html';}
            else if(data==0){alert("fail");}
            },

    });

} 
```

# javascript - 如何在css和javascript中隐藏“body”语句

> ID：10482284
> 
> 赞同：0
> 
> 时间：2012-05-07T12:42:55.840
> 
> 标签：javascript, css

但经过治疗后，我想隐藏它，所以我这样做了：

CSS 代码：

```
body {
text-align: center;
background: url(../images/greenbg.png);
color: #fff;
font-family: myriad pro;    
    }

 body#hide{
visibility: hidden; 
   } 
```

但我找不到在我的 javascript 代码中使用“body#hide”属性的方法。请问有什么想法吗？先感谢您

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T13:07:43.983

F. Calderan 是对的，但在这种情况下，为了避免任何误解（已经声明的 ID），最好使用 css 类。

例如：

```
<style>
.inVisible{
visibility: hidden; 
}
</style>
<script>
 function HideBodyElement(){
    document.body.className = "inVisible"
 }
</script>
<body>
   <button onclick="HideBodyElement()">Hide body</button>
</body> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T12:45:13.877

只需使用

```
document.body.id = "hide" 
```

你写的css规则会应用到你的body

# jsf-2 - PrettyFaces：使所有 jsf 页面“无扩展”

> ID：10482288
> 
> 赞同：2
> 
> 时间：2012-05-07T12:43:27.117
> 
> 标签：jsf-2, prettyfaces

我想在该代码中编写（pretty-config.xml）：

```
<pretty-config xmlns="http://ocpsoft.com/prettyfaces/3.3.2" 
               xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
               xsi:schemaLocation="http://ocpsoft.com/prettyfaces/3.3.2
                                        http://ocpsoft.com/xml/ns/prettyfaces/ocpsoft-pretty-faces-3.3.2.xsd">

 <!--- ??? --->

</pretty-config> 
```

只需将我的所有页面都映射到“.jsf / .xhtml”。

/admin/listusers => /admin/listusers.jsf

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T17:19:22.307

PrettyFaces 对于各种重写场景都非常强大。

当它只涉及无扩展的 url 时，OmniFaces 是一个有趣的选择。您可以通过将您的页面放在一个特殊的目录中，或者在 web.xml 中进行一些配置来获得完全没有配置的无扩展 url：

```
<context-param>
    <param-name>org.omnifaces.FACES_VIEWS_SCAN_PATHS</param-name>
    <param-value>/*.xhtml</param-value>
</context-param> 
```

有关更多信息，请参阅[包文档](http://omnifaces.org/docs/javadoc/current/org/omnifaces/facesviews/package-summary.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T06:03:02.517

为此，您有几个选项我可以想到，除非您想使用传统的 PrettyFaces 映射映射应用程序中的所有 URL...

您可以使用 PrettyFaces 规则，使用如下内容：

```
<pretty-config xmlns="http://ocpsoft.com/prettyfaces/3.3.2" 
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
           xsi:schemaLocation="http://ocpsoft.com/prettyfaces/3.3.2
                                    http://ocpsoft.com/xml/ns/prettyfaces/ocpsoft-pretty-faces-3.3.2.xsd">

    <rewrite match="(?!.*.jsf.*)(.*)" substitute="$1.jsf" outbound="false" inbound="true"/>
    <rewrite match="(.*).jsf" substitute="$1" inbound="false" outbound="true" />

</pretty-config> 
```

但这会变得复杂，因为您实际上需要两个规则，因此您也可以为此使用[http://ocpsoft.org/rewrite/](http://ocpsoft.org/rewrite/)，并且事情会更简单且更具声明性：

```
ConfigurationBuilder.begin()
  .addRule(Join.path("/{p}").to("/{p.jsf}").where("p").matches("(?!*.jsf).*")); 
```

传统的 PrettyFaces 方法是使用配置中的 url-mapping 声明将 URL 映射到每个页面：

```
<pretty-config xmlns="http://ocpsoft.com/prettyfaces/3.3.2" 
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
           xsi:schemaLocation="http://ocpsoft.com/prettyfaces/3.3.2
                                    http://ocpsoft.com/xml/ns/prettyfaces/ocpsoft-pretty-faces-3.3.2.xsd">

    <url-mapping id="listUsers">
        <pattern value="/admin/listusers"/>
        <view-id value="/admin/listusers.jsf" />
    </url-mapping>

    <url-mapping id="login">
        <pattern value="/login"/>
        <view-id value="/login.jsf" />
    </url-mapping>

</pretty-config> 
```

我希望这有帮助。

# java - 字符串中的java参数替换

> ID：10482289
> 
> 赞同：2
> 
> 时间：2012-05-07T12:43:28.640
> 
> 标签：java, regex

我正在寻找一种方法来用它们的值替换字符串中的变量。这是我的字符串相似：

```
"cp $myfile1 $myfile2" 
```

事实上，我查看了 javadoc，似乎可以使用 String 类中的 split() 方法，这很好，但我也看过一篇文章，似乎可以用 regex 和 replaceAll() 替换我的所有变量方法。不幸的是，我没有找到关于最后一个解决方案的任何示例。

是否可以在我的情况下使用 replaceAll（举例）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T12:45:05.037

不，你不能`String.replaceAll`在这种情况下使用。（您可以替换所有`$...`子字符串，但每次替换都取决于被替换的实际变量。）

这是一个执行*同时*替换的示例，该替换取决于被替换的子字符串：

```
import java.util.*;
import java.util.regex.*;

class Test {
    public static void main(String[] args) {

        Map<String, String> variables = new HashMap<String, String>() {{
            put("myfile1", "/path/to/file1");
            put("myfile2", "/path/to/file2");
        }};

        String input = "cp $myfile1 $myfile2";

        // Create a matcher for pattern $\S+
        Matcher m = Pattern.compile("\\$(\\S+)").matcher(input);
        StringBuffer sb = new StringBuffer();

        while (m.find())
            m.appendReplacement(sb, variables.get(m.group(1)));
        m.appendTail(sb);

        System.out.println(sb.toString());
    }
} 
```

**输出：**

```
cp /path/to/file1 /path/to/file2 
```

（改编自这里：[一次替换多个子字符串](https://stackoverflow.com/questions/7661460/replace-multiple-substrings-in-a-file-at-once)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T12:48:46.643

我会坚持使用 java 并使用

```
public void replace(String s, String placeholder, String value) {
    return s.replace(placeholder, value);
} 
```

您甚至可以使用这种方法进行多次替换：

```
public String replace(String s, Map<String, String> placeholderValueMap) {
  Iterator<String> iter = placeholderValueMap.keySet().iterator();
    while(iter.hasNext()) {
        String key = iter.next();
        String value = placeholderValueMap.get(key);
        s = s.replace(key, value);
    }
    return s;
} 
```

你可以像这样使用它：

```
String yourString = "cp $myfile1 $myfile2";
Map<String, String> placeholderValueMap = new HashMap<String, String>();
placeholderValueMap.put("$myfile1", "fileOne");
placeholderValueMap.put("$myfile2", "fileTwo");

someClass.replace(yourString, placeholderValueMap); 
```

# html - 创建我的个人浏览器语言

> ID：10482291
> 
> 赞同：0
> 
> 时间：2012-05-07T12:43:30.087
> 
> 标签：html, browser, tags

有什么方法可以创建我自己的可以支持的浏览器语言（例如 html）？

我有上述想法，但不知道如何解决：将 XML 与命名空间一起使用？JavaScript 做后端的功能？用于显示内容的 CSS？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:50:47.697

这应该可以使用 xml + xslt，是的。

# iphone - 下有tableView的透明tabbar

> ID：10482292
> 
> 赞同：3
> 
> 时间：2012-05-07T12:43:32.950
> 
> 标签：iphone, objective-c, uitableview, uitabbar

我有一个透明背景的标签栏。其中一个选项卡项加载了一个包含 UITableView 的视图。是否可以让该表格视图进入标签栏“下方”？也就是说，让 tableview 填满整个屏幕大小。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:50:46.520

在您将 viewController 推送到导航堆栈上的那一刻，您可以使用它：

```
[controller setHidesBottomBarWhenPushed:YES];
[self.navigationController pushViewController:controller]; 
```

或查看此主题以手动隐藏/显示它

[如何隐藏uitabbar控制器](https://stackoverflow.com/questions/5272290/how-to-hide-uitabbarcontroller)

# java - 在 Listgrid 的过滤器编辑器中编辑数据不会导致 fetchData

> ID：10482293
> 
> 赞同：0
> 
> 时间：2012-05-07T12:43:34.973
> 
> 标签：java, filter, smartgwt, listgrid

我有一个`ListGrid`过滤器编辑器设置为可见。通常，如果我在过滤器编辑器中键入数据，它会导致从服务器获取数据并且我的`executeFetch(..)`方法被调用。

但在某些情况下，在编辑过滤器的数据后不会调用此方法。例如，如果我输入“ **word** ”，它会显示一些数据`ListGrid.` 然后我将光标移动到第一个位置，输入“ **one** ”，所以总的来说我有过滤字符串“ **one word** ”。在这种情况下，不会执行获取，并且不再显示更多“旧”数据。也许我需要禁用一些结果集/标准的缓存？

这是我的 ListGrid 声明：

```
ListGrid grid = new ListGrid();
grid.setCanEdit(false);
grid.setShowFilterEditor(true);
grid.setDataSource(getSource());
grid.setDataPageSize(DATA_PAGE_SIZE);
grid.setFields(gridFields); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-14T09:15:23.523

你不觉得根据更克制的标准重新获取是不合逻辑的吗？我会解释：

SmartGWT 使用数据缓存来优化客户端-服务器连接并减少网络流量。在您的示例中，假设您的数据库中有以下内容：

*   一个词
*   两个字
*   一个句子

当您键入`word`时，获取返回：

*   一个词
*   两个字

这些值缓存在您的客户端中。

添加`one`到 时`word`，因为这个 ss 是一个比较严格的搜索条件，不需要服务器抓取，只需要客户端过滤，结果是：

*   一个词

# visual-studio-2010 - 使用过多 RAM 提高 Visual Studio 工作效率的方法

> ID：10482296
> 
> 赞同：2
> 
> 时间：2012-05-07T12:43:49.107
> 
> 标签：visual-studio-2010, ram

通常，我尝试让 Visual Studio 和插件使用最少的 RAM，因为我的工作系统通常有 3-4 GB 可用和大型 C# 项目。很快，我可能会拥有一个具有 16 GB 或 32 GB RAM 的桌面。

当 RAM 不那么重要时，您建议使用哪些生产力选项/插件？

现有环境：Visual Studio 2010、ReSharper、NCrunch

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T16:17:51.293

您可以将[TestResults](https://stackoverflow.com/questions/2908235/how-to-specify-the-location-for-the-unit-test-results-in-vs-2010)和[Ncrunch 工作区](http://wiki.ncrunch.net/workspaces.ashx)移动到 ramdisk。您还可以将临时文件甚至整个项目文件夹（或仅 bin 和 obj 文件夹）移动到 ramdisk。

# asp.net-mvc - IIS 7 重写规则和 Url.Content 问题

> ID：10482299
> 
> 赞同：3
> 
> 时间：2012-05-07T12:44:01.397
> 
> 标签：asp.net-mvc, iis-7, url-rewrite-module, umbraco5

我在 IIS 7 中有以下规则：

```
 <rule name="Category" enabled="true">
              <match url="^store/([0-9]+)/(.*)" />
              <action type="Rewrite" url="store?cid={R:1}" appendQueryString="false" logRewrittenUrl="true" />
           </rule> 
```

这似乎工作正常，但是在我的 ASP.Net MVC 3 应用程序中，我有几个 @Url.Content("~/") 条目解析为 /store/ 作为根而不是 /。例如，典型的 url 是[http://mysite.com/store/99/coats-with-hoods](http://mysite.com/store/99/coats-with-hoods)。

编辑/更新：我仍然在这个问题上大发雷霆，所以我决定研究 Url.Content 代码库，我注意到它会检查 URL 是否已被重写（真），如果是这样的话相关的路径，这反过来又**没有**给我绝对的 URL：

```
 if (!PathHelpers._urlRewriterHelper.WasRequestRewritten(httpContext))
      return contentPath;
    string relativePath = PathHelpers.MakeRelative(httpContext.Request.Path, contentPath);
    return PathHelpers.MakeAbsolute(httpContext.Request.RawUrl, relativePath); 
```

有谁知道为什么会这样？我对为什么会发生这种情况以及如何在我的应用程序中解释它有点困惑？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T19:55:27.847

好的，一旦我意识到我永远无法针对 ASP.Net MVC 使用 IIS Rewrite，我决定改用 HttpContext.RewritePath，现在一切似乎都在正常工作。

这是一个非常基本的问题，因为受影响的不仅仅是 Url.Content，还有控制器路由，我在这个特定页面上有一个表单也错误地指向 /store/ 而不是 /。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T06:43:58.847

如果您的站点当前是并且将永远是域/子域的根（例如，您总是打算`~/`表示`site.com/`），那么请丢失`~`并仅将所有 url 设为`/path/to/content`。 `~`做了一些古怪的巫术——正如你所见。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-01-25T14:30:10.963

Scripts.Url 确实有助于保持您的应用程序根在位

# javascript - 防止 Spidermonkey Javascript 引擎中的垃圾收集

> ID：10482303
> 
> 赞同：0
> 
> 时间：2012-05-07T12:44:10.907
> 
> 标签：javascript, garbage-collection, spidermonkey

根据 Spidermonkey 的用户指南

[https://developer.mozilla.org/En/SpiderMonkey/JSAPI_User_Guide](https://developer.mozilla.org/En/SpiderMonkey/JSAPI_User_Guide)

> ... jsval 本身并不能保护其所指对象免受垃圾收集器的影响...

我对这句话的理解是，如果我们通过 JS_NewStringCopyZ() 创建一个 JSString，那么返回的值可以随时被 gc'ed。例如

```
JSString *str=JS_NewStringCopyZ(cx, "hello world");
JS_GC(cx);
//..now my "hello world" JSString is gone 
```

那么我们如何防止上面的*str*被 gc'ed 呢？我注意到有一个**JS_EnterLocalRootScope** () 函数，我可以在 JSNative 函数的开头调用它。不幸的是，它现在已被弃用。那么防止gc的正确方法应该是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T02:02:31.663

我认为这是蜘蛛猴上的[垃圾收集器问题的重复...... JS_AnchorPtr()？](https://stackoverflow.com/questions/9357320/garbage-collector-issues-on-spidermonkey-js-anchorptr)- 那里的答案显示了在使用 SpiderMonkey 作为共享库时如何锚定指针以使它们在 GC 中保持活动状态。如果这不能回答您的问题，请编辑以澄清。

# ios - 删除核心数据中的对象

> ID：10482311
> 
> 赞同：10
> 
> 时间：2012-05-07T12:44:39.627
> 
> 标签：ios, objective-c, core-data, nsmanagedobject

我的核心数据模型中有一个实体，如下所示：

```
@interface Selection : NSManagedObject

@property (nonatomic, retain) NSString * book_id;
@property (nonatomic, retain) NSString * contenu;
@property (nonatomic, retain) NSNumber * page_id;
@property (nonatomic, retain) NSNumber * nbrOfOccurences;
@property (nonatomic, retain) NSString * next;
@property (nonatomic, retain) NSString * previous; 
```

我已经创建了许多`Selection`s 并将它们保存在 Core Data 中，现在我想删除一些带有某些标准的选择。`Selection`例如，如果匹配以下内容 ，我想删除一个对象：

```
content = test
page_id = 5
book_id = 1331313 
```

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-07T13:16:17.077

**Mike Weller**写的是对的。我会稍微扩展一下答案。

首先，您需要创建`NSFetchRequest`如下内容：

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];    
[fetchRequest setEntity:[NSEntityDescription entityForName:@"Selection" inManagedObjectContext:context]]; 
```

然后您必须为该请求设置谓词，如下所示：

```
[fetchRequest setPredicate:[NSPredicate predicateWithFormat:@"content == %@ AND page_id == %@ AND book_id == %@", contentVal, pageVal, bookVal]]; 
```

在哪里

```
NSString* contentVal = @"test";
NSNumber* pageVal = [NSNumber numberWithInt:5];
NSString* bookVal = @"1331313"; 
```

我正在使用`%@`，因为我假设您使用的是对象而不是标量值。

现在，您在先前请求的上下文中执行 fetch：

```
NSError* error = nil;
NSArray* results = [context executeFetchRequest:fetchRequest error:&error]; 
```

`results`包含与该谓词匹配的所有托管对象。

最后，您可以抓取对象并对它们调用删除。

```
[context deleteObject:currentObj]; 
```

完成后，您需要根据文档保存上下文。

> 就像在保存上下文之前不会将新对象保存到存储中一样，在保存上下文之前不会从存储中删除已删除的对象。

因此

```
NSError* error = nil;
[context save:&error]; 
```

请注意，该`save`方法返回一个布尔值。因此，您可以使用如下方法或向用户显示警报。源[NSManagedObjectContext 保存错误](http://matthewmorey.com/nsmanagedobjectcontext-save-error/)。

```
NSError *error = nil;
if ([context save:&error] == NO) {
    NSAssert(NO, @"Save should not fail\n%@", [error localizedDescription]);
    abort();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-07T12:49:22.347

您应该使用具有适当条件的 fetch 请求`NSPredicate`，然后对结果集中的每个对象调用该`deleteObject:`方法。`NSManagedObjectContext`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-06T07:17:28.070

除了 Mike Weller 和 flexaddicted，调用后`[context deleteObject:currentObj];`你需要`save:`上下文：

```
NSError *error = nil;
[context save:&error]; 
```

从[文档](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CoreData/Articles/cdCreateMOs.html#//apple_ref/doc/uid/TP40001654-SW1)：

> 就像在保存上下文之前不会将新对象保存到存储中一样，在保存上下文之前不会从存储中删除已删除的对象。

这对我来说很重要。

# c# - C# 查询和比较 CSV 文件中的条目

> ID：10482312
> 
> 赞同：2
> 
> 时间：2012-05-07T12:44:39.960
> 
> 标签：c#, linq

我必须比较可能包含超过 100000 个条目的 csv 文件中的条目，并找到对并将它们存储在另一个文件中。比较必须检查两列或多列中的值，例如：

狗 5

猫 7

老鼠 5

狗 3

狗 5

在这个例子中，我必须选择对 {Dogs, 5} 并忽略其余的。你会建议什么方法？

像往常一样感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T12:58:55.087

[`Tuple`](http://msdn.microsoft.com/en-us/library/dd387036.aspx)如果您的架构真的如此简单，则可以使用and用最少的代码来完成[`HashSet<T>`](http://msdn.microsoft.com/en-us/library/bb359438.aspx)。

无论如何，基本策略是创建一个数据结构来跟踪您所看到的并使用它来确定输出什么。也可以使用字典跟踪计数。但是，作为内存与代码权衡的一种方式，我选择使用两组而不是一个字典：

```
// 1\. Data structure to track items we've seen
var found = new HashSet<Tuple<string, int>>();

// 2\. Data structure to track items we should output
var output = new HashSet<Tuple<string, int>>();

// 3\. Loop over the input data, storing it into `found`
using (var input = File.OpenText(path))
{
    string line;
    while (null != (line = input.ReadLine()))
    {
        // 4\. Do your CSV parsing
        var parts = line.Split(','); // <- need better CSV parsing
        var item = Tuple.Create(parts[0], Int32.Parse(parts[1]));

        // 5\. Track items we've found and those we should output
        // NB: HashSet.Add returns `false` if it already exists,
        // so we use that as our criteria to mark the item for output
        if (!found.Add(item)) output.Add(item);
    }
}

// 6\. Output the items
// NB: you could put this in the main loop and borrow the same strategy
// we used for `found` to determine when to output an item so that only
// one pass is needed to read and write the data. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T12:59:59.250

在不知道具体细节的情况下，我会采取的第一步是研究一个 Linq To CVS 库，比如这个......

[http://www.codeproject.com/Articles/25133/LINQ-to-CSV-library](http://www.codeproject.com/Articles/25133/LINQ-to-CSV-library)

# .net - 具有纵向布局的 RDLC 多列报表

> ID：10482314
> 
> 赞同：0
> 
> 时间：2012-05-07T12:44:51.113
> 
> 标签：.net, rdlc

有没有办法在具有纵向布局的多列 rdlc 报告中呈现数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T07:27:09.257

只需单击 rdlc 设计器表单的空白区域，在右侧您将看到报告的一些属性找到属性列，展开它，您会看到要打印的列数。至于纵向布局，默认情况下页面设置为纵向。但是您可以通过右键单击报告并选择报告属性来更改/检查它。然后查看页面设置和页面的所有相关选项。

# javascript - .serialize() 并非在所有浏览器中都一致

> ID：10482316
> 
> 赞同：0
> 
> 时间：2012-05-07T12:44:58.947
> 
> 标签：javascript, jquery, html

我正在使用该`serialize()`函数来获取表单中的所有字段。在极少数情况下，客户打电话说他们保存购物车后只剩下一件商品。经过调查，事实证明，对于某些用户，该`serialize()`函数仅提交最后一个名为的项目数组`items[ITEMNUM] = qty`。

**HTML：**

```
<form id="cartitems" action="self">
    <table width="98%" border="0">
        <tr>
            <td style=" font-size:.9em;">title</td>
            <td width="30"> <input name="items[AH33.3600]" class="qty" value="1" /></td>
            <td width="30" nowrap="nowrap" style="padding-right:10px; border-bottom:1px solid #CCC;">Total</td>
        </tr>
        <tr>
            <td style=" font-size:.9em;">title</td>
            <td width="30"> <input name="items[PNP-A00SVR30]" class="qty" value="1" /></td>
            <td width="30" nowrap="nowrap" style="padding-right:10px; border-bottom:1px solid #CCC;">Total</td>
        </tr>
        <tr>
            <td style=" font-size:.9em;">title</td>
            <td width="30"> <input name="items[A4882+++++107+5X12]" class="qty" value="1" /></td>
            <td width="30" nowrap="nowrap" style="padding-right:10px; border-bottom:1px solid #CCC;">Total</td>
        </tr>
    </table>
</form> 
```

**JavaScript：**

```
var subform = $("#cartitems").serialize();
$.ajax({
    beforeSend: function() {        
        $('#cartitems').slideUp().queue(function() {
            $(this).dequeue();
            $('#cartitems').html(' Please wait...  Cart Loading').show();
        });
    },
    url: "/order/ajax/cart",
    type: "POST",
    cache: false,
    data:  subform,
    dataType: "html",
    success: function(html){
        alert('info saved');
    }
}); 
```

我采访的最新客户正在使用 Firefox 7。

有没有人看到问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:08:03.750

我在几个浏览器中对此进行了测试，它似乎工作正常 - [http://jsfiddle.net/z6P4x/](http://jsfiddle.net/z6P4x/)

# html - IE 无法显示 html 背景图片（颜色没问题）

> ID：10482324
> 
> 赞同：0
> 
> 时间：2012-05-07T12:45:31.613
> 
> 标签：html, css

所以 Chrome 和 FF 都可以，只是 IE9 无法显示 html 背景 - 它显示了它的颜色，但没有图像。我怎样才能使它正常工作？

测试它：[这里](http://%C5%9Bwiadomesny.pl/bg/)

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<style type="text/css">
html {
    width:100%;
    height:100%;
    background-color: #ffeacd;
    background-image: url(bg.png);
    background-position: 0px 0px;
    background-repeat: repeat-x;
    margin: 0px;
    padding: 0px;
}
body {
    background-position: center top;
    width:100%;
    height:100%;
    margin: 0px;
    padding: 0px;
    background-image: url(bg_overlay.png);
    background-repeat: no-repeat;
}
.content {
    width:1020px;
    height: 100%;
    padding: 0px;
    margin-top: 0px;
    margin-right: auto;
    margin-bottom: 0px;
    margin-left: auto;
}
</style>
</head>
<body>
<div class="content"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T12:59:52.730

似乎 IE 不允许在 html 元素上使用背景图像标签。尝试做这样的事情。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<style type="text/css">
body {
width:100%;
height:100%;
background-color: #ffeacd;
background-image: url(header-ad.png);
background-position: 0px 0px;
background-repeat: repeat-x;
margin: 0px;
padding: 0px;
}
#wrapper {
background-position: center top;
width:100%;
height:100%;
margin: 0px;
padding: 0px;
background-image: url(hdr_GSA_lp.jpg);
background-repeat: no-repeat;
}
.content {
width:1020px;
height: 100%;
padding: 0px;
margin-top: 0px;
margin-right: auto;
margin-bottom: 0px;
margin-left: auto;
}
</style>
</head>
<body>
<div id="wrapper">
<div id="content">

</div>
</div>
</body> 
```

# javascript - 提交包含特殊字符的值的表单

> ID：10482327
> 
> 赞同：0
> 
> 时间：2012-05-07T12:45:46.310
> 
> 标签：javascript, jquery, struts2

```
$('form').on('submit', function(submitEvent)
{
    $('table[id*=OtherOptions] :input').attr('disabled', false);
    $('#collapsiblePanel :input').attr('disabled', false);

    if (preventSubmit)
    {
        submitEvent.preventDefault();

        populateDateValues();

        populateContextFilterValues();

        if($.browser.msie)
        {
                $('#collapsiblePanelHiddenValues').val(JSON.stringify(collapsiblePanelObj));
        }

        var form = $(this);

        var formInput = decodeURIComponent(form.serialize());           

        $.getJSON('ValidateParams', formInput, function(data)
        { 
// Some more code here... 
```

在上面的代码中，我正在使用表单数据对 struts2 操作进行验证调用，但是如果某个表单字段包含 # 或 % 作为值，那么在服务器端获取请求参数时，这些特殊字符之后的所有参数都不会出现请求参数映射。

有什么办法可以解决上述问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T12:16:56.817

我能够通过不调用 decodeURIComponent 并且仅将序列化的表单数据发送到服务器端来解决该问题，其中编码数据由 struts2 自动解码。

# grails - 如何将域对象属性映射到列

> ID：10482328
> 
> 赞同：1
> 
> 时间：2012-05-07T12:45:54.500
> 
> 标签：grails, mapping, grails-orm

我有这个域类。

```
class Book {

    String code
    String description

    static mapping = {
        table 'Book'
        version false
    }
} 
```

我有`BookStore`列`COD`和表`DSC`。我需要映射到这张桌子。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:51:21.280

如果我理解您的问题是正确的，[文档](http://grails.org/doc/latest/)中映射中的部分应该可以帮助您

对于您的示例，以下内容应该有效：

```
class Book {

    String code
    String description

    static mapping = {
        table 'BookStore'
        version false
        code column: 'COD'
        description column: 'DSC'
    }
} 
```

此外，在 DataSource.groovy 中，`dbCreate = "update"`在您正在使用的适当环境下进行制作。[请参阅DataSource](http://grails.org/doc/latest/guide/conf.html#dataSource)上的文档。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T14:08:27.950

```
class Book implements Serializable {
        String code
    String description

    static mapping = {
        table 'BookStore'
        version false
        id composite: ['code']
        code column: 'COD'
        description column: 'DSC'
    }

    boolean equals(other) {
        if (!(other instanceof Book)) {
            return false
        }
        other.code == code
    }

    int hashCode() {
        def builder = new HashCodeBuilder()
        builder.append code
        builder.toHashCode()
    }

} 
```

# c# - 尝试将对象序列化为 XML

> ID：10482332
> 
> 赞同：0
> 
> 时间：2012-05-07T12:46:03.407
> 
> 标签：c#, silverlight, windows-phone-7, xml-serialization

*使用 WP7 和 C#：*

我正在尝试将我的对象转换为 XML，以便我可以将该文件保存到 SkyDrive。我试过很多例子，但运气不佳。有了这段代码，我

```
 public void ConvertObjectToXmlString()
        {
            System.IO.MemoryStream ms = new System.IO.MemoryStream();
            System.Xml.Serialization.XmlSerializer xs = new System.Xml.Serialization.XmlSerializer(App.ViewModel.vehicleItemsCollection.GetType());
            System.Xml.XmlWriter xtw = System.Xml.XmlWriter.Create(ms);
            //System.Xml.XmlTextWriter xtw = new System.Xml.XmlTextWriter(ms, System.Text.Encoding.UTF8);

            xs.Serialize(xtw, App.ViewModel.vehicleItemsCollection[0]);

            MessageBox.Show(xtw.ToString());
        } 
```

错误在这一行：`xs.Serialize(xtw, App.ViewModel.vehicleItemsCollection[0]);` 我有一个集合，在我的测试中只有 1 个项目。但是我可以想象，当我最终发布此代码时，我不会设置索引 [0]。

错误状态： **生成 XML 文档时出错**

当我进一步查看错误消息时，我看到以下内容： **无法将 OilChangeApplication.vehicle 类型的对象分配给 System.Collections.ObjectModel.ObservableCollection`1[[OilChangeApplication.vehicle, OilChangeApplication, Version=1.0.0.0, Culture =中性，PublicKeyToken=null]]。**

vehicleItemsCollection 是车辆的集合...我需要做什么才能获取一些 XML 以便上传它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T13:01:34.720

编译器稍微翻译一下，错误似乎非常明确： *Cannot assign object of type `OilChangeApplication.vehicle`to an object of type `ObservableCollection<OilChangeApplication.vehicle>`。*

这意味着您对集合的索引会导致错误，这里：

```
xs.Serialize(xtw, App.ViewModel.vehicleItemsCollection[0]); 
```

因为不是`ObservableCollection<...>`像您在本部分中告诉序列化程序那样传递一个：`new XmlSerializer(App.ViewModel.vehicleItemsCollection.GetType());`，而是传递模型类的一个实例。

因此，您可以删除`[0]`或更改传递给序列化程序的类型，错误就会消失。

```
xs.Serialize(xtw, App.ViewModel.vehicleItemsCollection); 
```

或者

```
 var xs = new System.Xml.Serialization.XmlSerializer(OilChangeApplication.vehicle.GetType()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T12:56:44.853

我的猜测是您序列化了集合项目。要序列化所有集合，您需要传递它：

```
xs.Serialize(xtw, App.ViewModel.vehicleItemsCollection); 
```

澄清。这样：

```
XmlSerializer(App.ViewModel.vehicleItemsCollection.GetType()); 
```

您指定序列化程序可以序列化以下类型的对象：

```
ObservableCollection<OilChangeApplication.vehicle> 
```

而你传递来序列化`OilChangeApplication.vehicle`不是实例集合的`OilChangeApplication.vehicle`实例。

* * *

如果你只想序列化一个对象，那么你需要“告诉”序列化器你将序列化`OilChangeApplication.vehicle`：

```
XmlSerializer(typeof(OilChangeApplication.vehicle)); 
```

现在您可以只序列化一个对象：

```
xs.Serialize(xtw, App.ViewModel.vehicleItemsCollection[0]); 
```

# macos - 怎么找流程？

> ID：10482334
> 
> 赞同：0
> 
> 时间：2012-05-07T12:46:19.937
> 
> 标签：macos, cocoa, process

我需要按名称在正在运行的进程列表中找到一些进程。我想，这是一个非常简单的任务，但没有......

我在这个网站上阅读了类似的问题，但仍然没有找到简单的答案。

[Process Manager Reference](http://developer.apple.com/library/mac/#documentation/Carbon/Reference/Process_Manager/Reference/reference.html#//apple_ref/doc/uid/TP30000208)允许获取仅打开的[进程](http://developer.apple.com/library/mac/#documentation/Carbon/Reference/Process_Manager/Reference/reference.html#//apple_ref/doc/uid/TP30000208-CH3g-TPXREF107)的列表。

这个[解决方案](http://www.cocoabuilder.com/archive/cocoa/92971-bsd-processes-with-code.html)还不错，但在某些方面，结果列表中不包含所需的应用程序，即使我在“顶部”中看到它也是如此。

有人知道此类任务的可行解决方案吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:52:54.730

您是否查看了以下帖子（和相关评论）：http: [//jongampark.wordpress.com/2008/01/26/a-simple-objectie-c-class-for-checking-if-a-specific-process-is -跑步/](http://jongampark.wordpress.com/2008/01/26/a-simple-objectie-c-class-for-checking-if-a-specific-process-is-running/)

另外：[获取进程列表并隐藏特定应用程序](https://stackoverflow.com/questions/6531379/getting-process-list-and-hiding-a-specific-app)

# python - 如何找到中位数

> ID：10482339
> 
> 赞同：18
> 
> 时间：2012-05-07T12:46:48.580
> 
> 标签：python, median

我有这样的数据。

```
Ram,500
Sam,400
Test,100
Ram,800
Sam,700
Test,300
Ram,900
Sam,800
Test,400 
```

从上述数据中细化“中位数”的最短方法是什么。我的结果应该是......

中位数 = 1/2(n+1)，其中 n 是样本中数据值的数量。

```
Test 500
Sam 700
Ram 800 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2014-03-17T15:15:06.770

Python 3.4 包含内置的[统计信息](http://docs.python.org/3.4/library/statistics.html)[`statistics.median`](http://docs.python.org/3.4/library/statistics.html#statistics.median)，因此您可以使用以下方法：

```
>>> from statistics import median
>>> median([1, 3, 5])
 3 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-05-07T12:52:17.767

使用[numpy 的中值](http://docs.scipy.org/doc/numpy/reference/generated/numpy.median.html)函数。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2012-05-07T13:11:15.003

它有点不清楚您的数据实际上是如何表示的，所以我假设它是一个元组列表：

```
data = [('Ram',500), ('Sam',400), ('Test',100), ('Ram',800), ('Sam',700), 
        ('Test',300), ('Ram',900), ('Sam',800), ('Test',400)]

from collections import defaultdict

def median(mylist):
    sorts = sorted(mylist)
    length = len(sorts)
    if not length % 2:
        return (sorts[length / 2] + sorts[length / 2 - 1]) / 2.0
    return sorts[length / 2]

data_dict = defaultdict(list)
for el in data:
    data_dict[el[0]].append(el[1])

print [(key,median(val)) for key, val in data_dict.items()] 
print median([5,2,4,3,1])   
print median([5,2,4,3,1,6])
#output:
[('Test', 300), ('Ram', 800), ('Sam', 700)]
3
3.5 
```

该函数`median`从列表中返回中位数。如果有偶数个条目，则取中间两个条目的中间值（这是标准的）。

我使用[defaultdict](http://docs.python.org/library/collections.html#collections.defaultdict)创建了一个以您的数据及其值为键的字典，这是对您的数据更有用的表示。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-12-22T15:25:41.077

看一下这个：

```
def median(lst):
    even = (0 if len(lst) % 2 else 1) + 1
    half = (len(lst) - 1) / 2
    return sum(sorted(lst)[half:half + even]) / float(even) 
```

笔记：

`sorted(lst)`生成`lst`;的排序副本

`sum([1]) == 1`;

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-11T15:36:42.133

我从 user3100512 的答案开始，很快意识到它不适用于偶数个项目。我添加了一些条件来计算中位数。

```
def median(x):
    if len(x)%2 != 0:
        return sorted(x)[len(x)/2]
    else:
        midavg = (sorted(x)[len(x)/2] + sorted(x)[len(x)/2-1])/2.0
        return midavg

    median([4,5,6,7]) 
```

应该返回 5.5

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-13T18:43:27.627

使用整数数据获取列表中位数的最简单方法：

```
x = [1,3,2]
print "The median of x is:",sorted(x)[len(x)//2] 
```

# linux - 在 linux 上将 apache 设置为服务

> ID：10482340
> 
> 赞同：0
> 
> 时间：2012-05-07T12:46:52.837
> 
> 标签：linux, apache, suse

我已经安装了 apache，目前正在 /app/apache2 路径中使用它。我想让它在 SUSE linux 上作为“服务”运行，以便它与盒子一起启动。最好的方法是什么，最好不必更改我的内部配置或路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:51:13.983

启动 YaST 并选择系统+系统服务（运行级别）。

搜索 apache2 并启用该服务。

# c++ - C++ 通过 ref 编译错误

> ID：10482345
> 
> 赞同：2
> 
> 时间：2012-05-07T12:47:24.860
> 
> 标签：c++, pass-by-reference

使用 C++，我很难理解一个编译错误。我有这个功能，有这个给定的签名：

```
void MethodNMMS::tryNMSA(double factor, double temperature,double& funcWorst,int& iWorst,      double& funcTry, double* funcEvals)
{
     //...
} 
```

我的问题涉及论点`double& functry`（例如）。我在另一个函数中调用这个函数`tryNMSA()`，我希望在执行这个函数期间修改 functry。这就是我通过引用传递的原因。

这是函数调用：

```
// other initializations for funcEvals...
double funcTry = 0;
tryNMSA(-1.0,temperature,funcWorst,iWorst,&funcTry,funcEvals); 
```

我放了这个符号是因为我确实想通过引用传递这个东西。这是不允许的。怎么了，为什么？

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T12:49:27.953

您不应该在此处放置与号，因为这样做会给出一个*指针*，而不是对 . 的引用`funcTry`。获取对变量的引用不需要任何特殊符号或运算符 - 只需使用变量的名称即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T12:50:02.300

只需在调用函数时删除`&`- 添加`&`您尝试传递指针的方法。

如果你不放`&`，你会通过一个参考。不需要特殊的语法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T12:50:26.493

通过传递`&funcTry`，您传递的是 的地址`funcTry`，该地址将匹配一个期望指向 的函数`double`。你的电话应该只是

```
ryNMSA(-1.0,temperature,funcWorst,iWorst,funcTry,funcEvals); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T12:50:37.937

在声明之外，一个 & 符号表示地址，所以`&foo`表示`address-of foo`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T12:51:11.900

您应该像这样在调用中省略与号：

```
tryNMSA(-1.0,temperature,funcWorst,iWorst,funcTry,funcEvals); 
```

方法声明中的 & 符号将其标记为引用参数。当您在方法调用中执行 & 时，您传递的是 funcTry 变量的地址，该变量是不可变的并且不能通过引用传递，因此编译器会给您一个错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-07T12:53:16.897

**删除参数前面的&。**

这里的信息：http: [//pages.cs.wisc.edu/~hasti/cs368/CppTutorial/NOTES/PARAMS.html](http://pages.cs.wisc.edu/~hasti/cs368/CppTutorial/NOTES/PARAMS.html)

参考参数

当一个参数通过引用传递时，从概念上讲，传递的是实际参数本身（并且只是给了一个新名称——相应形式参数的名称）。因此，对形式参数所做的任何更改都会影响实际参数。例如：

```
void f(int &n) {
    n++;
}

int main() {
    int x = 2;
    f(x);
    cout << x;  
} 
```

在这个例子中，f 的参数是通过引用传递的。因此，在 f 中对 n 的赋值实际上是在改变变量 x，所以这个程序的输出是 3。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-07T12:57:45.790

您可以通过 2 种方式修改参数。

方法一：（参考）：

```
void MethodNMMS::tryNMSA(double& funcTry)
{
    funcTry = funcTry + 1.0;
    //...
}
// other initializations for funcEvals...
double funcTry = 0;
tryNMSA(funcTry); 
```

方法2：（指针）：

```
void MethodNMMS::tryNMSA(double* funcTry)
{
    (*funcTry) = (*funcTry) + 1.0;
    //...
}
// other initializations for funcEvals...
double funcTry = 0;
tryNMSA(&funcTry); 
```

下定决心，只使用其中一个，这样可以避免很多混乱。

（实际上，这里你可以使用另外一种方法——返回值）。强调这一价值是功能的主要目的是有用的。

```
double MethodNMMS::tryNMSA(double funcTry)
{
    //...
    return funcTry + 1.0;
}
// other initializations for funcEvals...
double funcTry = 0;
funcTry = tryNMSA(funcTry); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-07T13:02:47.293

我不会重复其他答案。我只是想说这是`C++`. 问题是这个`&`标志有三个完全不同的含义，这对初学者来说并不是很明显：

1.  如果`x`是一个左值，那么`&x`就是它的地址。
2.  如果`<type> x`声明一个类型的变量`<type>`，那么`<type> &x`声明一个类型的变量`reference to <type>`。
3.  `a & b`是位与运算符。

这类似于`*`标志：

1.  如果`x`是一个指针，那么`*x`就是它的内容。
2.  如果`<type> x`声明一个类型的变量`<type>`，那么`<type> *x`声明一个类型的变量`pointer to <type>`。
3.  `a * b`是乘法运算符。

出于某种原因，`*`运营商似乎比`&`运营商造成的问题更少。也许这只是历史偶然：引用比指针更新。

# ipad - iPhone OK，但不是 iPad .. 为什么？

> ID：10482348
> 
> 赞同：0
> 
> 时间：2012-05-07T12:47:33.797
> 
> 标签：ipad, ios4, ios-universal-app

我的应用程序在 iphone 和 ipod touch 上运行良好，但在 ipad 上启动它时显示空白屏幕。

当我第一次创建项目时，我选择了构建 iphone/ipad 应用程序的选项。但到目前为止，我从未真正在 ipad 上进行过测试。

知道为什么它不能在 ipad 上运行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T21:07:18.687

在检查并尝试了一些没有成功的事情之后，我终于尝试了最后一个有效的方法。在 MainWindow_iPad.xib 中，我将 rootViewController 连接到我的应用程序中的顶部视图控制器，它使一切正常。

我仍然不太明白发生了什么，因为这个 rootViewController 没有连接任何东西，在 MainWindow_iPhone.xib 的情况下，它从一开始就完美地工作。

# mysql - Mysql Subqery 问题

> ID：10482353
> 
> 赞同：1
> 
> 时间：2012-05-07T12:47:48.940
> 
> 标签：mysql, sql

我遇到了子查询的问题。

我正在为我当地的自行车俱乐部争取最好的 10 次计时赛联赛。有一个每周联赛，进入的人将他们的时间和他们的时间一起记录在一张桌子上。

这是我的存储过程。

```
BEGIN
    #Routine body goes here...
        DROP TEMPORARY TABLE IF EXISTS tbl_Temp;

        CREATE TEMPORARY TABLE tbl_Temp (
        UserId int DEFAULT 0,
        TotalTime DECIMAL (10,2),
        EventCount int DEFAULT 0,
        FullName VARCHAR(255),
        Marshalled TINYINT(2) DEFAULT 0,
        HillClimb TINYINT(2) DEFAULT 0,
        Year INT(10)
        );

        INSERT INTO tbl_Temp (UserID,Year)
        SELECT DISTINCT userId,YEAR(date)
        FROM tbl_series;

        /* ---- EVENT COUNT */
        UPDATE tbl_Temp AS c,tbl_series AS t
        SET c.EventCount = (SELECT COUNT(userId) FROM tbl_series WHERE (UserID = t.userId))
        WHERE c.UserID = t.userId;

        /* ---- get the times into a temp table */

        /* ---- TOTAL TIME */
        UPDATE tbl_Temp AS c,tbl_series AS t
        SET c.TotalTime = (
            /*SELECT SUM(A.Time) FROM (
                    SELECT Time FROM tbl_series
                    WHERE (UserID = t.userId) 
                    LIMIT 10
                ) AS A*/
                SELECT SUM(Time) FROM tbl_series 
                WHERE (userId = t.UserId)
        )
        WHERE c.UserID = t.userId;

        /* ---- Name */
        UPDATE tbl_Temp AS c,tbl_users AS t
        SET c.FullName = (
                SELECT NAME
                FROM tbl_users
                WHERE (userId = t.UserId)
        ) 
        WHERE (c.userId = t.UserId);

        /* ---- Marshalled */
        /*  will need to add in a new table for marshalled so isn't lost over the coming years */
        UPDATE tbl_Temp AS c,tbl_users AS t
        SET c.Marshalled = (
                SELECT marshalled
                FROM tbl_users
                WHERE (userId = t.UserId)
        ) 
        WHERE (c.userId = t.UserId);

        /* ---- Hill Climb */
        UPDATE tbl_Temp AS c,tbl_users AS t
        SET c.HillClimb = (

            SELECT Count(tbl_series.SeriesID)
            FROM tbl_series
            INNER JOIN tbl_series_courses ON tbl_series.CourseID = tbl_series_courses.SeriesCourseID AND tbl_series.CourseID = tbl_series_courses.SeriesCourseID
            where (EventType = 2) AND (userId = t.UserId)

        ) 
        WHERE (c.userId = t.UserId);

        /* ---- select all */
        SELECT * FROM tbl_Temp

        ORDER BY EventCount Desc,TotalTime;

END 
```

tbl_series 存储时间、用户 ID 和课程 ID

我正在构建一个存储过程，它可以计算出用户、他们的总时间等，但是我只希望他们的前 10 个最快时间，但 MySql 对此有限制。我无法运行以下代码。

```
/* ---- TOTAL TIME */
        UPDATE tbl_Temp AS c,tbl_series AS t
        SET c.TotalTime = (
            SELECT SUM(A.Time) FROM (
                    SELECT Time FROM tbl_series
                    WHERE (UserID = t.userId) 
                    LIMIT 10
                ) AS A
        )
        WHERE c.UserID = t.userId; 
```

我得到了错误

程序执行失败

> 1054 - 'where 子句'中的未知列't.userId'

任何想法都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:57:26.917

啊……简单，MySql 不支持`LIMIT`内部查询。
打开游标，在主结果集上循环，并为循环中的每条记录获取所需的数据。

# jquery - Fancybox：从另一个函数触发 fancybox iframe 的最佳方法是什么

> ID：10482355
> 
> 赞同：0
> 
> 时间：2012-05-07T12:47:58.087
> 
> 标签：jquery, fancybox

我想从另一个功能启动fancybox。在一些 ajax 函数成功后我需要这个触发器。

**代码库**

```
$.post('principals/search_post/'+value, function(data) {

   **// I need to call fancybox here**

}); 
```

**编辑**

我有一个类似[http://example.com/somepage](http://example.com/somepage)的网址。在那个ajax函数之后，我需要在一个带有fancybox的iframe中打开它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-08T07:58:51.967

你可以手动打开fancybox：

```
$.fancybox.open({
    href: 'your_url',
    type: 'iframe'
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T13:05:59.580

你的意思是

```
$.post('principals/search_post/'+value, function(data) {
    $("a.images").fancybox();
}); 
```

# asp.net-mvc-2 - 检测页面是从谷歌结果访问还是不是直接从我的域访问

> ID：10482360
> 
> 赞同：0
> 
> 时间：2012-05-07T12:48:28.243
> 
> 标签：asp.net-mvc-2

我正在尝试检测用户是否通过谷歌结果登陆我的页面，或者如果没有在我的页面上的链接中访问该页面，则更正确。下面的代码示例是我尝试做的一个例子

```
bool googleResult = "somecode";

if (googleResult){
     //do something
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:50:39.327

检查`Request.UrlReferrer`。

# android - 如何查看 Activity 是否正在运行？

> ID：10482361
> 
> 赞同：0
> 
> 时间：2012-05-07T12:48:29.077
> 
> 标签：android

我有一个收听传入短消息的广播接收器。在 SmsReceiver 我想启动一个活动来处理短信。在许多情况下，活动在收到消息时正在运行，我不想再次启动它。

事实上，我想看看如果那个 Activity 已经在运行（可见或尚未被杀死），只需将它放在前面，否则用新任务启动它。

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T21:31:55.453

我混合了这里和其他地方的一些想法，最终解决了这个问题。我在这里为可能有类似情况的其他人编写解决方案：

在艾米活动中：

```
static boolean isRunning = false;

@Override
public void onStart() {
    super.onStart();
    isRunning = true;
}

public void onStop() {
    isRunning = false;
    super.onStop();
}

public static boolean isRuuning() {
    return isRunning;
}

@Override
public void onCreate(Bundle savedInstanceState) {       
    smsReceiver = new SmsReceiver();
    smsReceiver.setActivity(this);
    // ...
} 
```

在我的 SmsReceiver 中：

```
static MyActivity myActivity;

public void setActivity(MyActivity MyActivity) {
    SmsReceiver.myActivity = myActivity;
}   

if( MyActivity.isRuuning() ) {
    SmsReceiver.myActivity.receiveNewMessage(smsBody);
} else {
    // Create an intent and start it
} 
```

这对我来说很好。

# mysql - MySQL IF 在 SELECT

> ID：10482366
> 
> 赞同：2
> 
> 时间：2012-05-07T12:48:41.620
> 
> 标签：mysql, sql

我有三个 MySQL InnoDB 表： 债务人 公司 私人

现在我想查找有关债务人的信息。下面的 SQL 不起作用，任何人都可以帮助我编写有效的 SQL 吗？

```
SELECT
    d.id,
    d.type,
    i.name
FROM
    debtors AS d
IF d.type = 'c' THEN
    INNER JOIN
        companies AS i ON (i.debtor_id = d.id)
ELSE THEN
    INNER JOIN
        private_individuals AS i ON (i.debtor_id = d.id)
WHERE
    d.id = 1 
```

错误：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'IF d.type = 'c' THEN INNER JOIN companies AS i ON (i.debtor_id = d.i' at line 7 
```

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T12:53:13.630

你不能这样用`IF`！

这是一个可能的解决方案：

```
SELECT
    d.id,
    d.type,
    COALESCE(i.name, i2.name) as name
FROM
    debtors AS d
    LEFT JOIN companies AS i ON i.debtor_id = d.id and d.type = 'c'
    LEFT JOIN private_individuals AS i2 ON i2.debtor_id = d.id and d.type <> 'c'
WHERE
    d.id = 1 
```

* * *

另一个可能是动态 SQL，但你应该避免它！:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T12:55:33.887

这就是你通常会如何完成这样的事情：

```
SELECT d.id, d.type, COALESCE(c.name, p.name)
FROM debtors d
LEFT JOIN companies c
  ON d.type = 'c' AND c.debtor_id = d.id
LEFT JOIN private_individuals p
  ON d.type = 'p' AND p.debtor_id = d.id
WHERE d.id = 1 
```

# asp.net-mvc-3 - MEF + MVC3 - 显示视图总是失败

> ID：10482367
> 
> 赞同：0
> 
> 时间：2012-05-07T12:48:44.640
> 
> 标签：asp.net-mvc-3, razor, views, mef

我正在尝试使用 MEF + MVC3。

我有2个项目。一个我应该“动态”渲染其他模块的地方，我称之为 Shell。第二个项目是我有一个特定模块的地方，我想在 Shell 中加载它。

我能够使用 MEF 从模块中动态实例化一个控制器，但每次它重定向到视图时都找不到它。

我是否必须将所有模块/插件中的视图“复制+粘贴”到我的 Shell 中？或者还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:25:49.983

如果您正在使用`.aspx`文件，那么您需要将它们设为嵌入式视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T13:15:27.183

您需要将`.cshtml`（或`.aspx`）视图文件复制到实际的应用程序目录。

视图不会编译到项目中；相反，它们是在运行时从 Web 应用程序目录中读取的。

如果您愿意，您可以制作自己的 VirtualPathProvider 来读取其他内容的视图。

# clojure - 如何使用一个 Arg 按顺序生成多个函数调用

> ID：10482369
> 
> 赞同：1
> 
> 时间：2012-05-07T12:48:45.310
> 
> 标签：clojure

我想获取使用`[44 1 11]`生成的序列`(map #(nth %1 0 nil) v1)`并将其馈入（映射）到对同一函数的连续调用中。我只是不确定要使用哪个 Clojure 内置插件或内置插件。

这是详细信息。

给定这两个向量：

```
(def v1 [[44 2 3 4 5]
         [1 6 7 5 10]
         [11 12 13 14 15]])

(def v2 [[1 2 3 4 44]
         [1 6 7 5 1]
         [11 12 13 14 44]]) 
```

和这个功能

```
(defn ret-non-match-rows
    "Expects a sequence of sequences, like what is returned from clojure-csv.
     Returns all csv rows that do not match cmp-val at cmp-col-idx."

    [s-o-s cmp-val cmp-col-idx]

    (filter (complement nil?) 
       (map #(if (ret-col-match %1 cmp-val cmp-col-idx) nil %1) s-o-s) )) 
```

所以我正在寻求帮助如何将（地图）`[44 1 11]`输入到这样的 ret-non-match-rows

```
(ret-non-match-rows v2 44 4)
(ret-non-match-rows v2 44 1)
(ret-non-match-rows v2 44 11) 
```

但是使用 Clojure 内置函数来生成这些单独的调用。

谢谢你。

编辑：

以下给了我想要的东西，但我想知道是否有更清洁的方法来做到这一点。

```
(def ssn-1 [44 1 11])
(def tst (partial ret-non-match-rows v2 4))
(map #(tst %1) ssn-1) 
```

我得到一个序列序列，并将解析它以获得我的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:53:10.880

也许你想要这个：

```
(map (partial ret-non-match-rows v2 44) (map first v1)) 
```

（假设`4`第一个示例中的调用是一个错字，应该是`44`）

# c++ - 将元素存储在具有两个可能索引的集合中

> ID：10482376
> 
> 赞同：2
> 
> 时间：2012-05-07T12:49:13.190
> 
> 标签：c++, algorithm, stl

我需要针对特定​​情况的解决方案。我有一个基本上适用于线段的算法。我只知道线段的终点和起点。（点有2个坐标x，y。这些是图像上的像素点。我也知道图像的大小。）我想检查这些线段并对它们做一些事情。但是，我还需要跟踪检查过的线段，这样我就不会再次检查相同的线段。我正在使用 C++，所以我想使用 stl set 容器。

我的问题是如何根据它们的终点和起点存储这些线段？我需要为终点和起点生成唯一编号。（除了使用 stl set 之外，我也愿意接受任何其他建议 :)）

一种可能的解决方案是我为这两个像素生成索引号：(y*image->Witdh) + x。然后我得到两个索引号（顺便说一下它们是整数。）然后我通过以下方式连接这些数字：（indexStart << 32）+ indexEnd.（我得到双）。现在我有了唯一的编号，我可以轻松地存储在集合中。但问题是在我的搜索中，一旦线段的起点可以是同一线段的终点。如果我从端点遇到相同的线段，则连接的线段唯一编号变为 (indexEnd << 32) + indexStart。然后我会将相同的线段添加到我需要避免的设置容器中。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:58:55.860

只需为您的线段指定适当的顺序关系运算符。即，如果您的细分看起来像这样：

```
struct LineSegment {
  int start;
  int end;
}; 
```

只需`operator<`在该结构上定义，这样就存在一个实例化`std::less<LineSegment>`（请参阅[set 的定义](http://en.cppreference.com/w/cpp/container/set)了解为什么这很重要）。

```
bool operator<(LineSegment const& lhs, LineSegment const& rhs) {
  if (lhs.start == rhs.start)
    return lhs.end < rhs.end;
  return lhs.start < rhs.start;
} 
```

这允许您使用`std::set<LineSegment>`尊重正确排序的集合。LineSegments 保证是不同的，当且仅当它们实际上不同时（如果我正确理解了您的问题，这正是您想要的，否则，您可以轻松地调整`operator<`实现）。

`std::less<LineSegment*>`同样，如果要将`LineSegment*`指针存储在集合中，则可以在第二个模板参数（替换）中覆盖集合的比较运算符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T13:07:52.430

一种解决方案是：

```
 (indexLeft << 32) + indexRight 
```

但是你应该每次都分配 Left 和 Right。例如，Left 是具有最小 X 值的那个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T13:10:23.397

您可以保留您的解决方案或使用`operator<`. 您的优点是切换到某些哈希集实现很简单，另一个应该是整体上更好的实践（更容易理解，可能更快，可以与 64 位坐标一起使用，等等）。

`start`只需通过不区分和`end`而是`lower`和`upper`坐标来解决您描述的问题（您必须对两种方法都这样做） 。总是在同一个地方使用较小的坐标是一个简单的解决方法，当你发现它们时，得到假阳性的不同片段

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T13:01:00.943

立即想到的一个结构是 a `set`of `pair`s of `pair`s of `int`s：

`std::set<std::pair<std::pair<int, int>, std::pair<int, int> > >`

这样每个键都有一个明确的唯一值并描述一个完整的线段。

# c++ - 无法在 C++ 函数中返回 std::vector，编译错误

> ID：10482377
> 
> 赞同：2
> 
> 时间：2012-05-07T12:49:15.503
> 
> 标签：c++, stl, vector

尝试编译下面的代码段（使用 g++）时出现以下错误：

```
error: invalid initialization of non-const reference of type
‘std::vector<pos,std::allocator<pos> >&’ from a temporary of
type ‘std::vector<pos, std::allocator<pos> >& 
(*)(std::vector<pos, std::allocator<pos> >&)’ 
```

这是生成错误的代码：

```
struct pos{
  int start;
  int end;
  int distance;
  int size;
};

bool compare_pos(pos a, pos b)
{
  if (a.distance != b.distance)
    return (a.distance < b.distance);
  else
    return (a.size < b.size);
}

vector<pos> sort_matches(vector<pos>& matches)
{
  //vector<pos> sorted_matches(matches);
  vector<pos> sorted_matches();
  //sort(sorted_matches.begin(), sorted_matches.end(), compare_pos);
  return sort_matches;
} 
```

真正的代码会取消注释两个注释行，但即使是注释示例也会给我错误。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T12:51:52.203

```
vector<pos> sorted_matches(); 
```

this 声明了一个不接受任何内容并返回 a 的函数`vector<pos>`。这被称为[最令人头疼的解析](http://en.wikipedia.org/wiki/Most_vexing_parse)。如果你不相信我，想象变量被命名`f`而不是`sorted_matches`：

```
vector<pos> f(); 
```

看起来像一个函数，不是吗？

使用它来定义一个默认构造的对象：

```
vector<pos> sorted_matches;
return sorted_matches; 
```

# mysql - Mysql数据查询返回错误

> ID：10482379
> 
> 赞同：0
> 
> 时间：2012-05-07T12:49:20.670
> 
> 标签：mysql, sql

```
SELECT  d.sbjnum, d.name, d.scan_no, c.scanner  
FROM data AS d  
INNER JOIN check AS c ON d.sbjnum = c.sbjnum 
```

* * *

> 数据库查询失败：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 3 行的“check AS c ON d.sbjnum = c.sbjnum”附近使用正确的语法

不知道我做错了什么！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T12:51:37.937

`check`是 MySQL 中的保留关键字。把它放在蜱虫中以逃避它：

```
SELECT  d.sbjnum, d.name, d.scan_no, c.scanner  
FROM data AS d  
INNER JOIN `check` AS c ON d.sbjnum = c.sbjnum 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T12:52:14.230

`AS`用于为字段创建别名，而不是为表创建别名。对于表格，不要写那个`AS`:)

```
SELECT  d.sbjnum, d.name, d.scan_no, c.scanner  
FROM data d  
INNER JOIN check c ON d.sbjnum = c.sbjnum 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T12:52:51.710

`CHECK`是一个mysql关键字。如果你坚持使用它，至少把它放在 backtiks 中。
并删除`AS`FROM 部分中的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T13:12:28.043

`check`是 MySQL 中的保留关键字。

您可以更改别名

```
SELECT  d.sbjnum, d.name, d.scan_no, c.scanner  
FROM data AS d  
INNER JOIN check1 AS c ON d.sbjnum = c.sbjnum 
```

或者把它放在蜱虫中以逃避它：

```
SELECT  d.sbjnum, d.name, d.scan_no, c.scanner  
FROM data AS d  
INNER JOIN `check` AS c ON d.sbjnum = c.sbjnum 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-07T12:51:23.570

您可以尝试在请求末尾添加分号 (;)。

如果仍然无法正常工作，请考虑为这两个表提供 CREATE TABLE 命令。

# ios - 应用商店图标光泽效果？

> ID：10482383
> 
> 赞同：0
> 
> 时间：2012-05-07T12:49:40.730
> 
> 标签：ios, xcode

我知道，为了在我的图标、设备和 Appstore (512x512) 上禁用任何光泽效果，我必须在我的`Info.plist`文件中设置：

```
Icon already includes glossary effect: YES 
```

但我在这里读到过，有一个东西叫做 :`UIPrerenderedIcon`我找不到。

我上面提到的 plist 文件中的第一个布尔值是否足够好，还是两者都需要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:15:50.853

`UIPrerenderedIcon`并且`Icon already includes glossary effect`是一回事。这是XCode 中包含的 Plist 编辑器`Icon already includes glossary effect`的可读表示。`UIPrerenderedIcon`

要确定，`right click on you plist file`> `Open As`>`Source Code`你会看到所有值集的名称。其中，您会发现`UIPrerenderedIcon`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T13:02:55.680

设置应禁用图标上的光泽效果`YES`。`UIPrerenderedIcon`

# sql-server-2008 - SQL Server 2008，datediff 返回错误值

> ID：10482384
> 
> 赞同：-2
> 
> 时间：2012-05-07T12:49:42.533
> 
> 标签：sql-server-2008, datediff

我有两列数据类型时间。我正在使用 datediff 来查找小时数的差异。问题是当我试图找出 00:00:00 到 06:00:00 之间的差异时，它返回 -18。我该如何解决？注意：我需要用这个计算更多的差异，所以我不能把它除以 -3

```
my function- (datediff(HOUR, startHour, endHour))*60 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T13:10:48.403

你不是在`00:00:00`比较`06:00:00`。你有一些日期组件

这以 -18 为例

```
DECLARE @starthour datetime = '00:00:00';
DECLARE @endhour datetime = '18991231 06:00:00';    
SELECT @starthour, @endhour, DATEDIFF(hour, @starthour, @endhour); 

SET @starthour = '20120507 00:00:00';
SET @endhour = '20120506 06:00:00';
SELECT @starthour, @endhour, DATEDIFF(hour, @starthour, @endhour); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T12:54:43.560

反转参数：

```
my function- (datediff(HOUR, endHour, startHour))*60 
```

编辑：

DATEDIFF 函数适用于日期，并且由于某种原因，它认为您要减去 6AM - Midnight（第二天），即 18 小时。

以下代码示例在 SQL 2008 中对我来说很好，因此您需要检查您的数据类型以确保您使用的是 TIME 而不是 DATETIME 或 SMALLDATETIME。

```
declare @t1 time
set @t1 = '00:00:00'
declare @t2 time 
set @t2 = '06:00:00'

select datediff(hour, @t1, @t2)

-- returns 6 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T13:07:29.257

## 句法：

```
DATEDIFF (datepart, startdate, enddate ) 
```

## 例子：

```
SELECT DATEDIFF(hour, '00:00:00', '06:00:00'); 
```

**结果：6**

```
SELECT DATEDIFF(hour, '00:00:00', '06:00:00')*60; 
```

**结果：360**

参考**[DATEDIFF (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms189794%28v=sql.100%29.aspx)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-24T18:04:34.253

我玩游戏迟到了，但我遇到了类似的问题。

```
DATEDIFF(HOUR,'23:00:00','06:00:00') 
```

**结果：-17**

反转两次（如上面另一个答案所建议的）并不代表我想要捕获的时间范围。我不想知道早上 6 点到晚上 11 点之间有多少小时。我想要晚上 11 点到早上 6 点。

要解决此问题，请将 in 包装`DATEDIFF()`在一个`CASE`语句中，并在开始时间大于结束时间时添加 24：

```
DECLARE @startTime TIME(0) = '23:00:00';
DECLARE @endTime TIME(0) = '06:00:00';
SELECT CASE WHEN @startTime > @endTime THEN 24 + DATEDIFF(HOUR,@startTime,@endTime) ELSE DATEDIFF(HOUR,@startTime,@endTime) END 
```

**结果：7**

# android - iOS开发中相当于Android的权限是什么？

> ID：10482385
> 
> 赞同：4
> 
> 时间：2012-05-07T12:49:50.623
> 
> 标签：android, ios, security, permissions, ios-permissions

我不知道如何搜索这个，所以即使是一堆关键字就足够了，或者如果有人可以将我指向相关文档的话 +1。

Android有大约。[此处](http://developer.android.com/reference/android/Manifest.permission.html)描述了 122 个权限。iOS中的等价物是什么？开发人员是否声明了权限，或者他们可以访问所有内容？如果一切，我在哪里可以找到这个“一切”意味着什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T13:03:14.640

`iOS`尽管在方式和访问系统上存在关键差异，但`Android`Apple 所做的是让您使用一些系统资源（例如联系人或照片），并通过属性列表中的一些键注册您的应用程序，以使用诸如作为后台执行（例如，想要监听来电的 voip 应用程序）。[您可以在此处找到所有这些选项（键）。](http://developer.apple.com/library/ios/#documentation/General/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html#//apple_ref/doc/uid/TP40009252-SW2)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T12:55:23.670

iOS 中没有类似清单的权限概念。你可以访问每一个公共 API，只要它不违反开发者协议，如果你做错了，你的应用程序将被 Apple 拒绝。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T13:01:41.450

iOS 没有权限的概念（iOS 5；可能发生在 iOS 6 中，但不要指望它）。您只能访问 Apple 批准的官方 API。不允许使用任何非官方 API，因此在大多数情况下会导致您的应用被拒绝在 AppStore 中分发。

The closest you will find to permissions in notifications you see when using Location. See more @: [http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/TechnologyUsage/TechnologyUsage.html#//apple_ref/doc/uid/TP40006556-CH18-SW10](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/TechnologyUsage/TechnologyUsage.html#//apple_ref/doc/uid/TP40006556-CH18-SW10)

Regards, Bo

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-07T12:54:49.723

iOS 中没有“权限”的概念，有些事情你可以做，有些事情你不能做。您无需要求用户访问这些权限。

我不知道你可以做什么的具体清单，但[审查指南](https://developer.apple.com/appstore/resources/approval/guidelines.html)应该给你一个好主意。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-07T12:55:12.450

不幸的是，iOS 中没有这样的东西。您可能有兴趣阅读[这篇](http://palpapers.plynt.com/issues/2011Oct/android-vs-ios/)关于 iOS 和 Android 在这一特定点上的区别的文章。

# javascript - 在 JQuery 中创建动态创建元素的事件

> ID：10482389
> 
> 赞同：1
> 
> 时间：2012-05-07T12:49:59.890
> 
> 标签：javascript, jquery, html

我有表格元素

```
<table class="ActionMenu" id="tblActionMenu" cellpadding="3" cellspacing="3" > 
```

约翰

```
 $('.ActionMenu tr').click(function (e) {
                alert("abcd");
     }); 
```

这很好用。

现在使用 javascript，我添加了具有相同类 =“ActionMenu”的表，但单击 tr 时它不起作用。

如何获取动态创建表的 Click 事件消息

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T12:54:18.600

可能，当您定义函数时，较新的表还不存在。因此，假设您使用的是最新的 jQuery 版本（1.7.x），请使用事件委托并在公共父级（例如`body`元素）上捕获事件

```
 $('body').on("click", ".ActionMenu tr", function (e) {
      alert("abcd");
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T12:57:06.477

您必须使用“实时”功能……如果您使用“委托”功能，效果会更好。

它是这样工作的：

```
$('.someClass').live('click',function(){}); //adds 'click evt' to every future .someClass inside the DOM

$('#someID').delegate('.someClass','click',function(){}); //adds 'click evt' to every future .someClass inside #someID 
```

搜索 jQuery api 以获取更多信息，或者如果您需要更多帮助，请告诉我。祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T13:10:43.833

[在http://api.jquery.com/on/](http://api.jquery.com/on/)上查看委托事件的示例

```
$('#tblActionMenu').on("click", "tr", function(){
   //do something
}); 
```

# .net - 程序集的签名是否需要可验证？

> ID：10482398
> 
> 赞同：1
> 
> 时间：2012-05-07T12:50:41.950
> 
> 标签：.net, strongname, assembly-signing

从我在互联网上看到的 - 它没有。（我指的是程序集的强名称签名，而不是证书颁发机构的证书）这让我想到了这些问题：

1.  为什么有日期戳呢？
2.  我是否必须保留用于签名的密钥，或者我可以简单地创建一个密钥对 (sn –k)、签名并删除它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T14:43:11.607

“日期标记”和“可验证”等术语仅适用于代码签名。强名称完全不同，它不能证明签名者的身份。它仅允许验证程序集的内容没有被没有私钥的人从用于构建程序的版本修改。

自 .NET 3.5 SP1 起，未在完全信任模式下验证强名称。`<bypassTrustedAppStrongNames>`您可以使用 .config 文件和元素覆盖的策略。MSDN 文章[在这里](http://msdn.microsoft.com/en-us/library/cc679069.aspx)。

您当然希望保留 .snk 文件。如果您将其丢弃，您将无法为特定程序集部署错误修复。

# c# - Facebook Graph API ASP.NET 发布图片

> ID：10482404
> 
> 赞同：1
> 
> 时间：2012-05-07T12:51:06.160
> 
> 标签：c#, asp.net, facebook-graph-api

我正在尝试使用 Graph API 将照片发布到 Facebook。我设法在我的时间轴上发布了一条消息，但不是一张照片。Facebook 调试器没有给出错误并且对象属性是正确的。

```
public class oAuthFacebook
{
    public enum Method { GET, POST };

    public const string AUTHORIZE = "https://graph.facebook.com/oauth/authorize";

    public const string ACCESS_TOKEN = "https://graph.facebook.com/oauth/access_token";

    public const string CALLBACK_URL ="http://test.com/FbCallback.aspx";

    private string _consumerKey = "";

    private string _consumerSecret = "";

    private string _token = "";

 public string ConsumerKey
{

    get
    {
        if (_consumerKey.Length == 0)
        {
            _consumerKey = "";
        }
        return _consumerKey;
    }
    set { _consumerKey = value; }
}

public string ConsumerSecret 
{
    get
    {
        if (_consumerSecret.Length == 0)
        {
            _consumerSecret = "";
        }
        return _consumerSecret;
    }
    set { _consumerSecret = value; }

    }

public string Token { get { return _token; } set { _token = value; } }

public string AuthorizationLinkGet()
{
    return string.Format("{0}?client_id={1}&redirect_uri={2}&,publish_actions",
  AUTHORIZE, this.ConsumerKey, CALLBACK_URL);
}

public void AccessTokenGet(string authToken)
{
    this.Token = authToken;
    string accessTokenUrl = string.Format("{0}?client_id={1}&redirect_uri=
  {2}&client_secret={3}&code={4}",
    ACCESS_TOKEN, this.ConsumerKey, CALLBACK_URL, this.ConsumerSecret, authToken);

    string response = WebRequest(Method.GET, accessTokenUrl, String.Empty);

    if (response.Length > 0)
    {
        NameValueCollection qs = HttpUtility.ParseQueryString(response);

        if (qs["access_token"] != null)
        {
            this.Token = qs["access_token"];
        }
    }
}

public string WebRequest(Method method, string url, string postData)
{
    HttpWebRequest webRequest = null;
    StreamWriter requestWriter = null;
    string responseData = "";
    webRequest = System.Net.WebRequest.Create(url) as HttpWebRequest;
    webRequest.Method = method.ToString();
    webRequest.ServicePoint.Expect100Continue = false;
    webRequest.UserAgent = "http://test.com";
    webRequest.Timeout = 40000;

    if (method == Method.POST)
    {
        webRequest.ContentType = "application/x-www-form-urlencoded";

        requestWriter = new StreamWriter(webRequest.GetRequestStream());
        try
        {
            requestWriter.Write(postData);
        }
        catch
        {
            throw;
        }
        finally
        {
            requestWriter.Close();
            requestWriter = null;
        }
    }
    responseData = WebResponseGet(webRequest);
    webRequest = null;
    return responseData;
}

public string WebResponseGet(HttpWebRequest webRequest)
{
    StreamReader responseReader = null;
    string responseData = "";
    try
    {
        responseReader = new StreamReader(webRequest.GetResponse().GetResponseStream());
        responseData = responseReader.ReadToEnd();
    }
    catch
    {
        throw;
    }
    finally
    {
        webRequest.GetResponse().GetResponseStream().Close();
        responseReader.Close();
        responseReader = null;
    }
    return responseData;
} 
```

这就是我发送测试消息的方式，它工作正常：

```
var json = oAuth.WebRequest(oAuthFacebook.Method.POST, url, "message=" +
HttpUtility.UrlEncode("Testmessage")); 
```

我已经尝试了几天让它与照片一起使用，对我做错了什么有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:03:38.840

我可以建议查看 FB C# SDK（[在此处](https://github.com/facebook-csharp-sdk/facebook-csharp-sdk)或 NuGet 中可用）而不是发送原始请求。这是我用来将图像上传到 FB 相册的功能（您应该知道相册 ID，或者您也可以创建它，或者您可以枚举所有相册并获取您需要的相册）：

```
public static string UploadPhoto(string imageName, string albumID, string accesstoken, string photoComment = null, bool doNotPostStory = false)
{
    var fbAPI = new FacebookApp(accesstoken);
    var p = new FacebookMediaObject {FileName = path};

    p.SetValue( <<YOUR IMAGE GOES HERE AS byte[]>>);

    p.ContentType = "multipart/form-data";

    var param = new Dictionary<string, object> { {"attachment", p} };
    if (!string.IsNullOrEmpty(photoComment))
        param.Add("message", photoComment);

    // http://stackoverflow.com/questions/7340949/is-it-possible-to-upload-a-photo-to-fanpage-album-without-publishing-it
    // http://developers.facebook.com/blog/post/482/
    if (doNotPostStory == true)
    {
        param.Add("no_story", "1");
    }

    var result = fbAPI.Post(string.Format("http://graph.facebook.com/{0}/photos", albumID), param);
    return result.ToString();
} 
```

# java - 我如何将信息从复合发送到入口点类？

> ID：10482410
> 
> 赞同：1
> 
> 时间：2012-05-07T12:51:27.120
> 
> 标签：java, gwt, uibinder

我的问题是关于我的 GWT 项目。我的客户端包中有 2 个名为 Main.java(EntryPoint) 和 Registration.java(Composite) 的文件。注册类只是注册的用户界面。（它有文本框和按钮）

注册类中有一个注册按钮，可以从注册表中获取所有信息。我的问题就在这里。当用户单击按钮时，如何将这些信息从 Registration 类发送到 EntryPoint 类？

这是我的 onModuleLoad 方法；

……

注册注册 = new Registration();

```
 dockLayoutPanel.add(registration); 
```

……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:10:41.383

使用命令模式，例如我也有一个接口

```
public interface SuperPuperHandler<T> {
  public void onFire(T t);
} 
```

并在您的注册类中添加保存处理程序：

```
 public class Registration extends Composite{
       private SuperPuperHandler<MySavedObject> saveHandler;

       public void addSaveHandler(SuperPuperHandler<MySavedObject> saveHandler){
          this.saveHandler=saveHandler;
       }

       .....
       savebutton.addClickHandler(new ClickHandler() {
           public void onClick(ClickEvent clickEvent) {
              if(saveHandler!=null){
                  saveHandler.onFire(mysavedObject); 
              }               
          }
       }); 
```

}

所以这是在您的入口点中要做的事情

```
 public class Main implements EntryPoint {

       ....
       Registration registration =new Registration();
       registration.addSaveHandler(new SuperPuperHandler<MySavedObject>(){
          public void onFire(MySavedObject t){
              // here is saved objects in registration form
          }
        });

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T13:05:35.350

我认为你应该使用[观察者](http://en.wikipedia.org/wiki/Observer_pattern)模式。您的注册组件必须有某种方式来添加侦听器来处理“用户按下按钮”的事件。

**手工制作的**

最简单的方法就是自己定义：

```
interface ClickListener {
  onButtonClicked(...); // use params if you want
} 
```

并且您的 Registration 组件提供了一种设置侦听器的方法：

```
void addClickListener(ClickListener l) {
   this.listener = l;
} 
```

然后当单击按钮时，您只需调用您的侦听器（界面）

```
...
if (listener != null)
   listener.onButtonClicked(...); // pass arguments if you want
... 
```

您的 EntryPoint 必须注册一些侦听器：

```
Registration r = ...
r.addClickListener(new ClickListener() {
   public void onButtonClicked(...) {
      // do what you need
   }
} 
```

**使用 GWT 事件**

在这种情况下，您应该为事件定义一个类，并以给定的方式注册处理程序，但这可能是矫枉过正。如果我找到有关它的文档。我会把它添加到这个答案中。

# visual-studio - 嵌入本地 HTML 文件

> ID：10482415
> 
> 赞同：0
> 
> 时间：2012-05-07T12:51:50.283
> 
> 标签：visual-studio, executable

如何在可执行文件中嵌入本地 HTML 文件？？？

例如，我有一个名为 war.html 的东西，如何将它嵌入到可执行文件中？

我使用 Visual Studio 2010，可以使用不同的编码，如 Visual Basic、Visual C++ 等。

谢谢你，希望你能理解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T13:05:33.777

您可以使用该`file2c`实用程序，它将文件转换为可在 C 源代码中使用的定义。

# mysql - mysqldump 是否保留索引信息？

> ID：10482418
> 
> 赞同：16
> 
> 时间：2012-05-07T12:52:12.463
> 
> 标签：mysql, mysqldump

是否`mysqldump`也转储索引信息，因此在加载转储时会自动创建索引？从文档中我看不到任何具体说明它的东西。[http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)。谢谢你。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-07T12:53:18.233

是的。确实如此。（做一个，你会在那里看到它）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-07T12:56:36.450

这取决于索引信息的含义。如果您为每个表转储 CREATE TABLE 语句，那么这将转储有关每个表上哪些列上存在哪些索引的信息。它不会转储每个索引的内容，但是当您在转储文件中重放 INSERTS 时，将重新创建此信息。

如果您不转储 CREATE TABLE 语句，那么如果您将转储文件重新导入到没有适当索引的架构中，您可能会丢失此信息。

# objective-c - 如何避免动画（completionBlock）和非动画代码之间的重复代码

> ID：10482428
> 
> 赞同：0
> 
> 时间：2012-05-07T12:52:26.283
> 
> 标签：objective-c, ios, cocoa, animation, duplicates

我有一个问题我已经问过自己很多次了。让我们看看下面的例子：

```
 if (animated) {
    [UIView animateWithDuration:0.3 animations:^{            
        view.frame = newFrame;
    } completion:^(BOOL finished) {

        // same code as below
        SEL selector = @selector(sidePanelWillStartMoving:);
        if ([currentPanningVC conformsToProtocol:@protocol(CHSurroundedViewDelegate)] &&
            [currentPanningVC respondsToSelector:selector]) {
            [(id)self.currentPanningVC sidePanelWillStartMoving:self.currentPanningVC];
        }

        if ([centerVC conformsToProtocol:@protocol(CHSurroundedViewDelegate)] &&
            [centerVC respondsToSelector:selector]) {
            [(id)centerVC sidePanelWillStartMoving:self.currentPanningVC];
        }
    }];
}
else {
    view.frame = newFrame;

    // same code as before
    SEL selector = @selector(sidePanelWillStartMoving:);
    if ([currentPanningVC conformsToProtocol:@protocol(CHSurroundedViewDelegate)] &&
        [currentPanningVC respondsToSelector:selector]) {
        [(id)self.currentPanningVC sidePanelWillStartMoving:self.currentPanningVC];
    }

    if ([centerVC conformsToProtocol:@protocol(CHSurroundedViewDelegate)] &&
        [centerVC respondsToSelector:selector]) {
        [(id)centerVC sidePanelWillStartMoving:self.currentPanningVC];
    }
} 
```

完成块和非动画代码块中的代码是相同的。这通常是这样的，我的意思是两者的结果是一样的，除了一个是动画的。

有两个完全相同的代码块真的让我很困扰，请问我该如何避免这种情况？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T12:57:14.307

为您的动画和完成代码创建块变量，并在非动画情况下自己调用它们。例如：

```
void (^animatableCode)(void) = ^{
    view.frame = newFrame;
};

void (^completionBlock)(BOOL finished) = ^{
    // ...
};

if (animated) {
    [UIView animateWithDuration:0.3f animations:animatableCode completion:completionBlock];

} else {
    animatableCode();
    completionBlock(YES);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T12:54:49.673

创建块对象并在两个地方都使用它！。

```
void (^yourBlock)(BOOL finished);

yourBlock = ^{

        // same code as below
        SEL selector = @selector(sidePanelWillStartMoving:);
        if ([currentPanningVC conformsToProtocol:@protocol(CHSurroundedViewDelegate)] &&
            [currentPanningVC respondsToSelector:selector]) {
            [(id)self.currentPanningVC sidePanelWillStartMoving:self.currentPanningVC];
        }

        if ([centerVC conformsToProtocol:@protocol(CHSurroundedViewDelegate)] &&
            [centerVC respondsToSelector:selector]) {
            [(id)centerVC sidePanelWillStartMoving:self.currentPanningVC];
        }
    } 
```

在您的代码中，

```
 if (animated) {
    [UIView animateWithDuration:0.3 animations:^{            
        view.frame = newFrame;
    } completion:yourBlock];
}
else {
yourBlock();
} 
```

# php - 参数解析时Paypal错误

> ID：10482431
> 
> 赞同：0
> 
> 时间：2012-05-07T12:52:34.653
> 
> 标签：php, paypal

Paypal 显示错误

> TIMESTAMP: 2012-05-07T12:17:49Z CORRELATIONID: 37a2b3f9a2901 ACK: Failure VERSION: 76.0 BUILD: 2860716 L_ERRORCODE0: 10413 L_SHORTMESSAGE0: 由于参数无效，交易被拒绝。有关详细信息，请参阅其他错误消息。L_LONGMESSAGE0：购物车项目总金额与订单金额不匹配。`orderreview.php`L_SEVERITYCODE0：错误，但我在参数解析期间使用了以下代码

```
$personName        = $_REQUEST['PERSONNAME'];
           $SHIPTOSTREET      = $_REQUEST['SHIPTOSTREET'];
           $SHIPTOCITY        = $_REQUEST['SHIPTOCITY'];
           $SHIPTOSTATE       = $_REQUEST['SHIPTOSTATE'];
           $SHIPTOCOUNTRYCODE = $_REQUEST['SHIPTOCOUNTRYCODE'];
           $SHIPTOZIP         = $_REQUEST['SHIPTOZIP'];
           $count             = $_REQUEST['COUNT'];
           $shippingch        = $_REQUEST['shipping_charge'];

           $L_NAME            = 'L_NAME';
           $itemamt = 0.00;
           $itemstr = '';
           $amtstr = '';
           $qtystr = '';
           for($i=0; $i<=$count; $i++){
            $temp_lname = 'L_NAME'.$i;
            $temp_lamt = 'L_AMT'.$i;
            $temp_lqty = 'L_QTY'.$i;

           $$temp_lname     = $_REQUEST['L_NAME'.$i];
           $$temp_lamt            = $_REQUEST['L_AMT'.$i];
           $$temp_lqty           =  $_REQUEST['L_QTY'.$i];
           $itemamt=($itemamt+($$temp_lqty*$$temp_lamt));
           $itemstr.='&L_NAME'.$i.'='.$_REQUEST['L_NAME'.$i];
           $amtstr.='&L_AMT'.$i.'='.$_REQUEST['L_AMT'.$i];
           $qtystr.='&L_QTY'.$i.'='.$_REQUEST['L_QTY'.$i];
           }

           $returnURL =urlencode($url.'/ReviewOrder.php?currencyCodeType='.$currencyCodeType.'&paymentType='.$paymentType);
           $cancelURL =urlencode("$url/SetExpressCheckout.php?paymentType=$paymentType" );

           $shiptoAddress = "&SHIPTONAME=$personName&SHIPTOSTREET=$SHIPTOSTREET&SHIPTOCITY=$SHIPTOCITY&SHIPTOSTATE=$SHIPTOSTATE&SHIPTOCOUNTRYCODE=$SHIPTOCOUNTRYCODE&SHIPTOZIP=$SHIPTOZIP";

           $nvpstr="&ADDRESSOVERRIDE=1$shiptoAddress".$itemstr."".$amtstr."".$qtystr."&MAXAMT=".(string)$maxamt."&AMT=".(string)$amt."&ITEMAMT=".(string)$itemamt."&CALLBACKTIMEOUT=4&L_SHIPPINGOPTIONAMOUNT1=$shippingch&L_SHIPPINGOPTIONlABEL1=UPS Next Day Air&L_SHIPPINGOPTIONNAME1=UPS Air&L_SHIPPINGOPTIONISDEFAULT1=true&L_SHIPPINGOPTIONAMOUNT0=$shippingch&L_SHIPPINGOPTIONLABEL0=UPS Ground 7 Days&L_SHIPPINGOPTIONNAME0=Ground&L_SHIPPINGOPTIONISDEFAULT0=false&INSURANCEAMT=1.00&INSURANCEOPTIONOFFERED=true&CALLBACK=https://www.ppcallback.com/callback.pl&SHIPPINGAMT=$shippingch&SHIPDISCAMT=-3.00&TAXAMT=2.00&L_NUMBER0=1000&L_DESC0=Size: 8.8-oz&L_NUMBER1=10001&L_DESC1=Size: Two 24-piece boxes&L_ITEMWEIGHTVALUE1=0.5&L_ITEMWEIGHTUNIT1=lbs&ReturnUrl=".$returnURL."&CANCELURL=".$cancelURL ."&CURRENCYCODE=".$currencyCodeType."&PAYMENTACTION=".$paymentType; 
```

如果我使用的运费硬编码为 8.00，则此代码有效。

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T13:01:50.970

If you receive this error, be sure the total of the payment detail item parameters, such as ItemTotal, HandlingTotal, TaxTotal, and so forth add up to the order total.

# list - 确保列表中的所有 dicts 具有相同的键

> ID：10482439
> 
> 赞同：2
> 
> 时间：2012-05-07T12:53:07.920
> 
> 标签：list, dictionary, set, python

我有一个包含字典的列表，例如

```
[{'x': 42}, {'x': 23, 'y': 5}] 
```

并希望确保所有 dicts 具有相同的键，`None`如果键不存在于原始 dict 中。所以上面的列表应该变成

```
[{'x': 42, 'y': None}, {'x': 23, 'y': 5}] 
```

什么是最美丽和最蟒蛇的方式来做到这一点？目前的做法：

```
keys = reduce(lambda k, l: k.union(set(l)), [d.keys() for d in my_list], set())
new_list = [dict.fromkeys(keys, None) for i in xrange(len(my_list))]
for i, l in enumerate(my_list):
    new_list[i].update(l) 
```

但尤其是前两行似乎有点笨拙。想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T13:05:35.740

```
>>> from itertools import chain 
>>> l = [{'x': 42}, {'x': 23, 'y': 5}]
>>> all_keys = set(chain.from_iterable(l))   
>>> for d in l:
        d.update((k,None) for k in all_keys-d.viewkeys())

>>> l
[{'y': None, 'x': 42}, {'y': 5, 'x': 23}] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T12:59:08.493

最简单的方法是：

```
from itertools import chain

dicts = [{'x': 42}, {'x': 23, 'y': 5}]

keys = set(chain.from_iterable(dicts))
for item in dicts:
     item.update({key: None for key in keys if key not in item}) 
```

给我们：

```
[{'y': None, 'x': 42}, {'y': 5, 'x': 23}] 
```

我们从所有字典中的所有键中创建一个集合，然后我们循环遍历`dict`s 并使用它们没有的任何值进行更新。

using 的替代方法`itertools.chain.from_iterable()`是 do `reduce(or_, [dict.keys() for dict in dicts])`, using `functools.reduce()`(in 3.x, `reduce()`builtin in 2.x) and `operator.or_`，尽管我觉得这不太可读。

如果您想创建一个新列表，而不是更新旧列表，只需将 for 循环替换为：

```
newdicts = [{key: item.get(key, None) for key in keys} for item in dicts] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T13:06:26.057

这将创建一个新的字典列表，它们都具有完整的键：

```
>>> import itertools as it
>>> l = [{'x': 42}, {'x': 23, 'y': 5}]
>>> all_keys = set(it.chain.from_iterable(l))
>>> [dict((k, a.get(k, None)) for k in all_keys) for a in l]
[{'x': 42, 'y': None}, {'x': 23, 'y': 5}] 
```

# javascript - 用 JavaScript 识别图像中红球的位置？

> ID：10482447
> 
> 赞同：6
> 
> 时间：2012-05-07T12:53:29.497
> 
> 标签：javascript, image-processing, canvas, html5-canvas

假设我有这张图片：

![在此处输入图像描述](../Images/0d471c716822076985c3e0b6d59123c8.png)

我想识别图像中红球的位置，我可以测量前面球的大小（以像素为单位）。

我知道我可以将图像绘制到画布上，然后我可以使用 获取像素颜色数据`context.getImageData`，但是我该怎么办？我应该使用哪种算法？我是图像处理的新手，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T19:13:08.697

这是专用于获取该球位置的代码。输出位置将记录到控制台，因此请打开您的 JS 控制台！这段代码中有一些你可以使用的值。我选择了一些适用于您的图像的方法，例如球的粗略直径为 14 像素以及每个颜色分量的阈值。

我将图像保存为“test.jpg”，但您可以在第 11 行将代码更改为正确的图像路径。

```
<!DOCTYPE html>
<html>
    <body>
        <canvas width="800" height="600" id="testCanvas"></canvas>
        <script type="text/javascript">
            var img = document.createElement('img');
            img.onload = function () {
                console.log(getBallPosition(this));
            };
            img.src = 'test.jpg';

            function getBallPosition(img) {
                var canvas = document.getElementById('testCanvas'),
                    ctx = canvas.getContext('2d'),
                    imageData,
                    width = img.width,
                    height = img.height,
                    pixelData,
                    pixelRedValue,
                    pixelGreenValue,
                    pixelBlueValue,
                    pixelAlphaValue,
                    pixelIndex,
                    redThreshold = 128,
                    greenThreshold = 40,
                    blueThreshold = 40,
                    alphaThreshold = 180,
                    circleDiameter = 14,
                    x, y,
                    count,
                    ballPosition,
                    closestBallCount = 0,
                    closestBallPosition;

                // Draw the image to the canvas
                canvas.width = width;
                canvas.height = height;
                ctx.drawImage(img, 0, 0);

                // Get the image data
                imageData = ctx.getImageData(0, 0, width, height);
                pixelData = imageData.data;

                // Find the ball!
                for (y = 0; y < height; y++) {
                    // Reset the pixel count
                    count = 0;

                    // Loop through the pixels on this line
                    for (x = 0; x < width; x++) {
                        // Set the pixel data starting point
                        pixelIndex = (y * width * 4) + (x * 4);

                        // Grab the red pixel value
                        pixelRedValue = pixelData[pixelIndex];
                        pixelGreenValue = pixelData[pixelIndex + 1];
                        pixelBlueValue = pixelData[pixelIndex + 2];
                        pixelAlphaValue = pixelData[pixelIndex + 3];

                        // Check if the value is within out red colour threshold
                        if (pixelRedValue >= redThreshold && pixelGreenValue <= greenThreshold && pixelBlueValue <= blueThreshold && pixelAlphaValue >= alphaThreshold) {
                            count++;
                        } else {
                            // We've found a pixel that isn't part of the red ball
                            // so now check if we found any red data
                            if (count === circleDiameter) {
                                // We've found our ball
                                return {
                                    x: x - Math.floor(circleDiameter / 2),
                                    y: y
                                };
                            } else {
                                // Any data we found was not our ball
                                if (count < circleDiameter && count > closestBallCount) {
                                    closestBallCount = count;
                                    closestBallPosition = {
                                        x: x - Math.floor(circleDiameter / 2),
                                        y: y
                                    };
                                }
                                count = 0;
                            }
                        }
                    }
                }

                return closestBallPosition;
            }
        </script>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T13:23:45.003

好吧，我会去聚集那种颜色的像素。例如，您可以有一个查找表，其中存储红色（或在阈值范围内）像素（坐标是查找键），并且每当遇到没有任何已知红色邻居的像素时，一个整数值作为集群 ID它启动了一个新的集群，所有其他红色像素都获得了与它们相邻的红色像素的集群 ID。取决于你的算法内核：

```
 A) XXX      B)  X
      XOX         XOX
      XXX          X 
```

您可能需要处理（案例 B）连接两个先前未连接的集群的像素。您必须替换其中一个集群的集群 ID。

之后你有像素簇。这些你可以分析。如果是圆形，我会在每个簇的 x 和 y 中查找中值，并检查该簇的所有像素是否都在半径内。

如果红球（或它的一部分）在另一个红色物体的前面，这将失败。您将需要更复杂的算法。

# iphone - 本地化后我得到 clang: error: linker command failed with exit code 1

> ID：10482451
> 
> 赞同：-1
> 
> 时间：2012-05-07T12:54:11.747
> 
> 标签：iphone, objective-c, ios, cocoa-touch, xcode4.2

我刚刚通过向我的一些 nib 和 .m 文件添加本地化功能将我的整个应用程序翻译成另一种语言，完成后我尝试运行该应用程序，但出现以下错误。

> ld“/Users/tenghamn/Library/Developer/Xcode/DerivedData/scheduleTable-djaxkjmejcrgsybqqoinnhkerlut/Build/Products/Debug-iphonesimulator/MDH Schedule.app/MDH Schedule”正常i386 cd
> 
> "/Users/tenghamn/Dropbox/xcode Projects/scheduleTable" setenv MACOSX_DEPLOYMENT_TARGET 10.6 setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents /开发者/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
> 
> /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5。 1.sdk
> 
> -L/Users/tenghamn/Library/Developer/Xcode/DerivedData/scheduleTable-djaxkjmejcrgsybqqoinnhkerlut/Build/Products/Debug-iphonesimulator
> 
> -F/Users/tenghamn/Library/Developer/Xcode/DerivedData/scheduleTable-djaxkjmejcrgsybqqoinnhkerlut/Build/Products/Debug-iphonesimulator
> 
> -filelist "/Users/tenghamn/Library/Developer/Xcode/DerivedData/scheduleTable-djaxkjmejcrgsybqqoinnhkerlut/Build/Intermediates/scheduleTable.build/Debug-iphonesimulator/scheduleTable.build/Objects-normal/i386/MDH
> 
> Schedule.LinkFileList" -mmacosx-version-min=10.6 -Xlinker
> 
> -objc_abi_version -Xlinker 2 -fobjc-arc -Xlinker -no_implicit_dylibs -D__IPHONE_OS_VERSION_MIN_REQUIRED=50100 -framework SystemConfiguration -framework QuartzCore -framework CoreData -framework UIKit -framework Foundation -framework CoreGraphics -o
> 
> “/Users/tenghamn/Library/Developer/Xcode/DerivedData/scheduleTable-djaxkjmejcrgsybqqoinnhkerlut/Build/Products/Debug-iphonesimulator/MDH Schedule.app/MDH Schedule”
> 
> ld：在/Users/tenghamn/Library/Developer/Xcode/DerivedData/scheduleTable-djaxkjmejcrgsybqqoinnhkerlut/Build/Intermediates/scheduleTable.build/Debug-iphonesimulator/scheduleTable.build/Objects-normal/i386/MainViewController-96B8D44EBB24B056中重复符号_OBJC_CLASS_$_MainViewController .o
> 
> 和
> 
> /Users/tenghamn/Library/Developer/Xcode/DerivedData/scheduleTable-djaxkjmejcrgsybqqoinnhkerlut/Build/Intermediates/scheduleTable.build/Debug-iphonesimulator/scheduleTable.build/Objects-normal/i386/MainViewController-4CC6B4B54C957278.o
> 
> 对于架构 i386 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

我已经搜索了此错误的解决方案，但似乎没有任何东西可以解决我的问题或直接相关。关于我能做些什么来解决它的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T17:10:23.380

我直接在文件中进行了翻译。您需要利用 NSLocalizedstring 和一个字符串文件来完成这项工作，否则 xcode 将尝试使用两个具有相同名称的 .m 文件。

# c++ - c++中不同地方的const是什么意思

> ID：10482455
> 
> 赞同：6
> 
> 时间：2012-05-07T12:54:25.660
> 
> 标签：c++

和有什么区别

```
 const string& getName() const {return name;} 
```

和

```
 string& getName() const {return name;} 
```

const 在开头和结尾是什么意思？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T12:58:39.423

`const`函数签名末尾的 表示该方法是const*成员函数*，因此您的两个方法都是 const 成员函数。

`const`开头的意思是返回的都是 const 。

第一个示例是一个 const 方法，它返回对内部数据的 const 引用，因此是 const 正确的。

第二个是返回对内部数据的非常量引用的 const 方法。这不是 const 正确的，因为这意味着您可以修改 const 对象的数据。

对 const 方法的调用不能更改任何实例的数据（可变数据成员除外），只能调用其他 const 方法。

const 方法可以在 const 或非常量实例上调用，但非常量方法只能在非常量实例上调用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-07T12:55:27.170

一个返回`const`引用并且是`const`成员函数，另一个是`const`成员函数。

```
const string& getName() const {return name;} 
```

返回的`string`不能修改，方法是`const`（见下文）。

```
string& getName() const {return name;} 
```

该方法不能修改非`mutable`类成员。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T12:59:49.660

```
const string& getName() const {return name;} 
```

return const reference 意味着您在返回对它的引用后将无法使用该实例。

```
string& getName() const {return name;} 
```

const 方法意味着该方法不会改变对象的状态，除了可变成员变量。也可以在 const 对象上调用此方法，例如：

```
class MyClass(){
public:
  void doSomethingElse()const;
  void notConstMethod();
};

void doSomething( const MyClass& obj ){
  obj.doSomethingElse();
  obj.notConstMethod(); //Error
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-08T13:44:51.063

我们`const`在函数的前缀中使用以确保从函数返回的任何内容都保持不变。

我们`const`在函数声明中使用后缀作为后缀，以确保函数不会对类的当前实例进行任何修改，即如果类的成员函数试图修改当前对象的属性值，那么编译器将抛出错误。

**const 函数**主要用于**const 对象**，以确保该函数不会试图修改当前对象数据。

# gwt - 我们如何动态设置 CellTable 的 Header？

> ID：10482456
> 
> 赞同：0
> 
> 时间：2012-05-07T12:54:28.067
> 
> 标签：gwt, gwt2

我只想动态设置每一列的标题文本。

```
|Header1|Header2|Header3|

-------------------------------------------------------
|    ROW 1 
----------------------------------------------------
|    ROW 2 
```

我需要动态设置 Header1,Header2,Header3。例如。

```
final TextColumn<Contacts> nameColumn = new TextColumn<Contacts>() {

        @Override
        public String getValue(Contacts contact) {
            return contact.name();
        }
    };
cellTable.addColumn(nameColumn, contact.city()); 
```

像这样 (contact.city()) 我必须从服务器响应中设置标题文本。

谁能帮我？

提前致谢， Gnik

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T05:55:47.697

我通过以下代码实现了它。让我们考虑`List<Contacts>`从服务器返回。

```
where response is List<Contacts>

      for (Contacts contact : response) {
           final String name = contact.getName();
           final TextColumn<Contacts> addressColumn = new TextColumn<Contacts>() {

            @Override
            public String getValue(Contacts object) {
                return name;
            }
        };

        cellTable.addColumn(addressColumn, contact.getCity());
        } 
```

问候， Gnik

# wxpython - wxpython 绘制事件无限循环

> ID：10482457
> 
> 赞同：0
> 
> 时间：2012-05-07T12:54:31.187
> 
> 标签：wxpython, paint, infinite-loop

我想在 wxpython 的面板上画一些简单的图画（线、圆等）。我修改了在某处找到的示例代码。它工作正常，但直到我最小化窗口或切换到另一个窗口并返回。然后它开始无限循环重新绘制。

这甚至应该发生吗？如果没有，有什么办法可以防止无限循环？

我发现的一种解决方案是使用 wx.Timer，但它只是导致了具有可调节间隔的相同循环。

```
import math

import wx

class DrawPanel(wx.Frame):

    def __init__(self,parent):
        wx.Frame.__init__(self,parent,title='Drawing on panel')
        self.Bind(wx.EVT_PAINT,self.OnDraw)

    def OnDraw(self,event=None):
        self.dc = wx.PaintDC(self)
        self.dc.Clear()
        self.dc.SetPen(wx.Pen(wx.BLACK,1.5))
        i0 = 1
        for i in range(2,1000,1):
            i = i/10.0
            self.dc.DrawLine(i0,200*math.sin(i0/10)+200,
                        i,200*math.sin(i/10)+200)
            i0 = i

if __name__ == '__main__':
    aplication = wx.App()
    ram = DrawPanel(parent=None)
    ram.Show()
    aplication.MainLoop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:36:35.933

在函数中`OnDraw`创建局部变量`dc`而不是使用属性（`dc`而不是`self.dc`）。

# c# - WCF REST 得到响应 504 json 数据太大

> ID：10482462
> 
> 赞同：2
> 
> 时间：2012-05-07T12:54:58.993
> 
> 标签：c#, wcf, rest

我一直在基于 WCF REST 模板构建我的 REST 服务，您可以使用 Visual Studio 2010 作为模板下载。（带有密钥授权的 REST 入门工具包）我的 web.config 看起来像这样。

```
 <system.serviceModel>
<behaviors>
  <serviceBehaviors>
    <behavior>
      <serviceAuthorization serviceAuthorizationManagerType="APIKeyAuthorization, SSD.Harrier.Services.REST" />
    </behavior>

  </serviceBehaviors>
</behaviors>
<serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />

<standardEndpoints>
  <webHttpEndpoint>
    <standardEndpoint name="" helpEnabled="true" automaticFormatSelectionEnabled="false" maxReceivedMessageSize="2147483647" maxBufferSize="2147483647" defaultOutgoingResponseFormat="Json" />
  </webHttpEndpoint>
</standardEndpoints> 
```

当我尝试带回超过 3000 条记录的记录时，我在提琴手中收到 504 错误，它无法处理响应。我什至尝试对同一服务进行 POST。有没有办法可以在我的 web.config 中配置此端点以允许更大的响应？我现在正在做的事情是行不通的。谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T12:59:50.727

尝试

```
<configuration> 
<system.web.extensions>
   <scripting>
       <webServices>
           <jsonSerialization maxJsonLength="50000000"/>
       </webServices>
   </scripting>
</system.web.extensions>
</configuration> 
```

# python - 将大量变量导入命名空间

> ID：10482467
> 
> 赞同：2
> 
> 时间：2012-05-07T12:55:19.937
> 
> 标签：python, import, namespaces

我正在重构一个大型科学程序。该应用程序的主要代码由使用数百个参数的数十个方程组成。因为这个计算代码已经过广泛的测试，我不想改变它。

一些参数可以在逻辑上集中在集合中，例如，可能存在对应于给定工具的参数集合。模拟将通过换入和换出不同的参数集来运行。

我想将参数保存在一个单独的文件中，以便可以轻松更改它们。

我的问题是：如何以允许我指定使用哪些集合的方式将参数“导入”到计算模块命名空间中？

现在，我正在使用似乎是黑客的东西。在参数模块中，我将值保存在字典中。例如，

```
----- start params_module -----
instrument1 = dict(param1=1.0, param2=2.0, ...)
instrument2 = dict(param1=3.0, param2=4.0, ...)
instrument3 = dict(param1=5.0, param2=6.0, ...)
misc_params = dict(param10 = 10, param11=20, ...)
...
----- end params_module ----- 
```

然后我在calculation_module命名空间中导入感兴趣的字典并将其添加到全局字典中：

```
--- start calculation_module -----
from params_module import instrument1, misc_params
globals().update(instrument1) 
globals().update(misc_params)
...
many equations that make use of param1, param2, etc.
...
--- end calculation_module ----- 
```

有没有更 Pythonic 的方式来做到这一点？

谢谢你。

-细胞色素

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T13:08:46.173

你的方法是可以的，但是如果你想改变calculation_module中的参数，你需要改变calculation_module.py代码。我将使用 execfile 代替。

```
from params_module import instrument1, misc_params
env = {}
env.update(instrument1) 
env.update(misc_params)

execfile("calculation_module.py", env)

#get your result form env 
```

# mysql - 嵌套集模型（分层数据）mysql - 并发用户以一致性方式插入新节点

> ID：10482470
> 
> 赞同：0
> 
> 时间：2012-05-07T12:55:24.357
> 
> 标签：mysql, concurrency, tree, nested

我读过这个： [在嵌套集中事务安全插入节点？](https://stackoverflow.com/questions/3128794/transaction-safe-insertion-of-node-in-nested-set)

但我担心在嵌套集模型中插入新节点的锁定。我想在我的树类别中插入一个新节点，但我想确保它插入的新节点没有损坏。mysql中使用的引擎是InnoDb。正如其他问题所说：

```
 BEGIN; -- or whatever API your framework has for starting a transaction
   SELECT @myLeft := lft FROM myTable WHERE ID = $id FOR UPDATE;  
   UPDATE myTable SET rgt = rgt + 2 WHERE rgt > @myLeft;       
   UPDATE myTable SET lft = lft + 2 WHERE lft > @myLeft;       
   INSERT INTO myTable(title, lft, rgt) VALUES($title, @myLeft + 1, @myLeft + 2);
 COMMIT; -- or whatever API your framework has for commiting a transaction 
```

我的问题是，如果并发用户尝试在同一棵树中插入新节点，事务是否足以更新和调整其他节点的左右？如果 user1 添加新节点（在 transaction1 中执行）同时 user2 添加新节点（在 transaction2 中执行），我确定 user2 在 user2 插入他的新节点之前读取了 user1 添加的节点的更新树？那么，100 个用户在同一时间插入新节点，最后一个用户必须等待用户完成预览才能始终拥有一致性树？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T13:35:55.553

InnoDB 执行行级锁定。因此，正在更新的行将在事务期间被锁定。这可能导致阻塞和死锁。

如果一行正在更新，InnoDB 将无法获取该行的锁以再次更新它。这有效地序列化了事务。注意事务隔离级别可以控制看这个链接[http://dev.mysql.com/doc/refman/5.1/en/dynindex-isolevel.html](http://dev.mysql.com/doc/refman/5.1/en/dynindex-isolevel.html)

这里还有一篇关于如何在 innodb 引擎中查找死锁的有趣文章[http://www.xaprb.com/blog/2006/07/31/how-to-analyze-innodb-mysql-locks/](http://www.xaprb.com/blog/2006/07/31/how-to-analyze-innodb-mysql-locks/)。

如果嵌套集正在大量更新，请确保您具有正确的隔离级别并将语句包装在事务中就足够了。但是，它可能会产生您需要编写代码的锁定、阻塞和死锁问题。

# glassfish-3 - GlassFish V3 在部署应用程序时不会为 Postgresql 创建 ConnectionPool 和 JDBC 资源

> ID：10482473
> 
> 赞同：2
> 
> 时间：2012-05-07T12:55:43.153
> 
> 标签：glassfish-3

当我部署我的 EE 应用程序时，没有创建 jdbc 资源。当我在 glassfish v2.x 中部署我的应用程序时，已创建资源并正确部署了应用程序。我在 galssfish --> ext 文件夹中复制了 postgresql jar 文件，并在 Pesistence.xml 中将提供程序更改为 Eclipse

```
<provider> org.eclipse.persistence.jpa.PersistenceProvider </provider> 
```

当我部署应用程序时，我收到如下异常：

```
SEVERE: Invalid resource : jdbc/demo7-datasource__pm
org.glassfish.deployment.common.DeploymentException: Invalid resource : jdbc/demo7-datasource__pm
    at org.glassfish.javaee.full.deployment.EarDeployer.prepare(EarDeployer.java:166)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.prepareModule(ApplicationLifecycle.java:870)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:410)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:370)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:355)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:370)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1067)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:96)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1247)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1235)
    at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:465)
    at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:222)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:168)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:234)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:822)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:719)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1013)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.RuntimeException: Invalid resource : jdbc/demo7-datasource__pm
    at com.sun.enterprise.connectors.ConnectorRuntime.lookupDataSourceInDAS(ConnectorRuntime.java:539)
    at com.sun.enterprise.connectors.ConnectorRuntime.lookupPMResource(ConnectorRuntime.java:468)
    at org.glassfish.persistence.common.PersistenceHelper.lookupPMResource(PersistenceHelper.java:63)
    at org.glassfish.persistence.jpa.ProviderContainerContractInfoBase.lookupDataSource(ProviderContainerContractInfoBase.java:71)
    at org.glassfish.persistence.jpa.PersistenceUnitInfoImpl.<init>(PersistenceUnitInfoImpl.java:108)
    at org.glassfish.persistence.jpa.PersistenceUnitLoader.loadPU(PersistenceUnitLoader.java:154)
    at org.glassfish.persistence.jpa.PersistenceUnitLoader.<init>(PersistenceUnitLoader.java:119)
    at org.glassfish.persistence.jpa.JPADeployer$1.visitPUD(JPADeployer.java:213)
    at org.glassfish.persistence.jpa.JPADeployer$PersistenceUnitDescriptorIterator.iteratePUDs(JPADeployer.java:486)
    at org.glassfish.persistence.jpa.JPADeployer.createEMFs(JPADeployer.java:220)
    at org.glassfish.persistence.jpa.JPADeployer.prepare(JPADeployer.java:166)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.prepareModule(ApplicationLifecycle.java:870)
    at org.glassfish.javaee.full.deployment.EarDeployer.prepareBundle(EarDeployer.java:290)
    at org.glassfish.javaee.full.deployment.EarDeployer.access$200(EarDeployer.java:86)
    at org.glassfish.javaee.full.deployment.EarDeployer$1.doBundle(EarDeployer.java:141)
    at org.glassfish.javaee.full.deployment.EarDeployer$1.doBundle(EarDeployer.java:138)
    at org.glassfish.javaee.full.deployment.EarDeployer.doOnBundles(EarDeployer.java:215)
    at org.glassfish.javaee.full.deployment.EarDeployer.doOnAllTypedBundles(EarDeployer.java:224)
    at org.glassfish.javaee.full.deployment.EarDeployer.doOnAllBundles(EarDeployer.java:250)
    at org.glassfish.javaee.full.deployment.EarDeployer.prepare(EarDeployer.java:138)
    ... 29 more
Caused by: com.sun.appserv.connectors.internal.api.ConnectorRuntimeException: Invalid resource : jdbc/demo7-datasource__pm
    at com.sun.enterprise.connectors.service.ConnectorResourceAdminServiceImpl$MyDataSource.validateResource(ConnectorResourceAdminServiceImpl.java:272)
    at com.sun.enterprise.connectors.service.ConnectorResourceAdminServiceImpl$MyDataSource.setResourceInfo(ConnectorResourceAdminServiceImpl.java:253)
    at com.sun.enterprise.connectors.service.ConnectorResourceAdminServiceImpl.lookupDataSourceInDAS(ConnectorResourceAdminServiceImpl.java:243)
    at com.sun.enterprise.connectors.ConnectorRuntime.lookupDataSourceInDAS(ConnectorRuntime.java:537)
    ... 48 more

SEVERE: Exception while preparing the app : Invalid resource : jdbc/demo7-datasource__pm
java.lang.RuntimeException: Invalid resource : jdbc/demo7-datasource__pm
    at com.sun.enterprise.connectors.ConnectorRuntime.lookupDataSourceInDAS(ConnectorRuntime.java:539)
    at com.sun.enterprise.connectors.ConnectorRuntime.lookupPMResource(ConnectorRuntime.java:468)
    at org.glassfish.persistence.common.PersistenceHelper.lookupPMResource(PersistenceHelper.java:63)
    at org.glassfish.persistence.jpa.ProviderContainerContractInfoBase.lookupDataSource(ProviderContainerContractInfoBase.java:71)
    at org.glassfish.persistence.jpa.PersistenceUnitInfoImpl.<init>(PersistenceUnitInfoImpl.java:108)
    at org.glassfish.persistence.jpa.PersistenceUnitLoader.loadPU(PersistenceUnitLoader.java:154)
    at org.glassfish.persistence.jpa.PersistenceUnitLoader.<init>(PersistenceUnitLoader.java:119)
    at org.glassfish.persistence.jpa.JPADeployer$1.visitPUD(JPADeployer.java:213)
    at org.glassfish.persistence.jpa.JPADeployer$PersistenceUnitDescriptorIterator.iteratePUDs(JPADeployer.java:486)
    at org.glassfish.persistence.jpa.JPADeployer.createEMFs(JPADeployer.java:220)
    at org.glassfish.persistence.jpa.JPADeployer.prepare(JPADeployer.java:166)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.prepareModule(ApplicationLifecycle.java:870)
    at org.glassfish.javaee.full.deployment.EarDeployer.prepareBundle(EarDeployer.java:290)
    at org.glassfish.javaee.full.deployment.EarDeployer.access$200(EarDeployer.java:86)
    at org.glassfish.javaee.full.deployment.EarDeployer$1.doBundle(EarDeployer.java:141)
    at org.glassfish.javaee.full.deployment.EarDeployer$1.doBundle(EarDeployer.java:138)
    at org.glassfish.javaee.full.deployment.EarDeployer.doOnBundles(EarDeployer.java:215)
    at org.glassfish.javaee.full.deployment.EarDeployer.doOnAllTypedBundles(EarDeployer.java:224)
    at org.glassfish.javaee.full.deployment.EarDeployer.doOnAllBundles(EarDeployer.java:250)
    at org.glassfish.javaee.full.deployment.EarDeployer.prepare(EarDeployer.java:138)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.prepareModule(ApplicationLifecycle.java:870)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:410)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:370)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:355)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:370)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1067)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:96)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1247)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1235)
    at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:465)
    at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:222)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:168)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:234)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:822)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:719)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1013)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:662)
Caused by: com.sun.appserv.connectors.internal.api.ConnectorRuntimeException: Invalid resource : jdbc/demo7-datasource__pm
    at com.sun.enterprise.connectors.service.ConnectorResourceAdminServiceImpl$MyDataSource.validateResource(ConnectorResourceAdminServiceImpl.java:272)
    at com.sun.enterprise.connectors.service.ConnectorResourceAdminServiceImpl$MyDataSource.setResourceInfo(ConnectorResourceAdminServiceImpl.java:253)
    at com.sun.enterprise.connectors.service.ConnectorResourceAdminServiceImpl.lookupDataSourceInDAS(ConnectorResourceAdminServiceImpl.java:243)
    at com.sun.enterprise.connectors.ConnectorRuntime.lookupDataSourceInDAS(ConnectorRuntime.java:537)
    ... 48 more 
```

创建 jdbc 资源需要做哪些事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:06:52.783

您需要通过在管理 gui 中设置连接池和关联的 jdbc 资源或使用 glassfish-resources.xml 来提供资源配置。

请参阅[https://blogs.oracle.com/JagadishPrasath/entry/application_scoped_resources_in_glassfish](https://blogs.oracle.com/JagadishPrasath/entry/application_scoped_resources_in_glassfish)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T07:51:15.137

*   启动服务器。
*   转到本地主机：4848。
*   Configure your jdbc-pool and dont forget to put postgres.jdbc to your `glassfish/glassfish/domain/your_domain/lib/ext`

# ruby-on-rails - ActiveRecord before_update 不起作用

> ID：10482478
> 
> 赞同：0
> 
> 时间：2012-05-07T12:56:18.363
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我是 Rails 的新手。我有具有许多分类的类别和公司模型。根据我的日志。我认为`before_update`回调不起作用/请查看我的日志。它在更新后调用。/。这是我的公司模型：

```
class Company < ActiveRecord::Base

  attr_accessible :description, :name, :phone, :web, :fax, :email, :address, :category_ids

  has_many :categorizations
  has_many :categories, through: :categorizations

  before_create :increase_category_counters
  before_update :update_category_counters

  protected
    def increase_category_counters
      Category.update_all("count=count+1", ["id IN (?)", self.category_ids])
    end

    def update_category_counters
      old_categories = self.categories.collect {|c| c.id}
      puts "------------------------------ #{old_categories}"
      old_category_ids = old_categories-category_ids
      puts "------------------------------ #{old_category_ids}"
      unless old_category_ids.empty?
        Category.update_all("count=count-1", ["id IN (?)"], old_category_ids)
      end
      new_categories = category_ids-old_categories
      puts "------------------------------ CATEGORY_IDS: #{category_ids}"
      puts "------------------------------ OLD_CATEGORIES #{old_categories}"
      puts "------------------------------ NEW_CATEGORIES #{new_categories}"
      unless new_categories.empty?
        Category.update_all("count=count+1", ["id IN (?)"], new_categories)
      end
    end

  # Validations
  validates :name, :description, :phone, presence: true
  validates_uniqueness_of :name
  validates :email, format: {with: /\A[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]+\z/}, allow_blank: true
  validates :web, format: {with: URI::regexp(%w(http https))}, allow_blank: true
  validates :fax, format: {with: /[0-9]/}, allow_blank: true

end 
```

类别型号：

```
class Category < ActiveRecord::Base

  attr_accessible :name, :count

  # Validations
  validates :name, presence: true

  has_many :categorizations
  has_many :companies, through: :categorizations
end 
```

分类模型：

```
class Categorization < ActiveRecord::Base

  belongs_to :category
  belongs_to :company

  validates_uniqueness_of :category_id, scope: :company_id
end 
```

这是日志：

```
Started PUT "/admin/companies/43" for 127.0.0.1 at 2012-05-07 20:39:28 +0800
Processing by Admin::CompaniesController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"raDb5MWAViIOR6oYE5iJGNz8gio/WHM1H/mVYRHldxA=", "company"=>{"name"=>"ТЭДИ төв", "category_ids"=>["", "21", "22", "19"], "phone"=>"88574711", "email"=>"", "web"=>"", "fax"=>"", "address"=>"", "description"=>"<p>\r\n\tбы ыбө ыбө ыбө ыбөбыөыйб өыбөйыө</p>\r\n"}, "commit"=>"Update Company", "id"=>"43"}
  AdminUser Load (0.7ms)  SELECT "admin_users".* FROM "admin_users" WHERE "admin_users"."id" = 1 LIMIT 1
  Company Load (0.5ms)  SELECT "companies".* FROM "companies" WHERE "companies"."id" = $1 LIMIT 1  [["id", "43"]]
  Category Load (0.5ms)  SELECT "categories".* FROM "categories" WHERE "categories"."id" IN (21, 22, 19)
  Category Load (0.4ms)  SELECT "categories".* FROM "categories" INNER JOIN "categorizations" ON "categories"."id" = "categorizations"."category_id" WHERE "categorizations"."company_id" = 43
   (0.1ms)  BEGIN
  Categorization Exists (0.4ms)  SELECT 1 FROM "categorizations" WHERE ("categorizations"."category_id" = 22 AND "categorizations"."company_id" = 43) LIMIT 1
  SQL (30.8ms)  INSERT INTO "categorizations" ("category_id", "company_id") VALUES ($1, $2)  [["category_id", 22], ["company_id", 43]]
   (18.8ms)  COMMIT
   (0.1ms)  BEGIN
  Company Exists (0.8ms)  SELECT 1 FROM "companies" WHERE ("companies"."name" = 'ТЭДИ төв' AND "companies"."id" != 43) LIMIT 1
------------------------------ [21, 19, 22]
------------------------------ []
------------------------------ CATEGORY_IDS: [21, 19, 22]
------------------------------ OLD_CATEGORIES [21, 19, 22]
------------------------------ NEW_CATEGORIES []
   (0.2ms)  COMMIT 
```

我正在使用 Rails 3.2.3。我没有任何想法。请帮我？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T13:00:21.513

`update_all`不会触发 Active Record 回调或验证。

[http://api.rubyonrails.org/classes/ActiveRecord/Relation.html#method-i-update_all](http://api.rubyonrails.org/classes/ActiveRecord/Relation.html#method-i-update_all)

# meteor - 如何在 myapp.meteor.com/login 上提供页面

> ID：10482479
> 
> 赞同：10
> 
> 时间：2012-05-07T12:56:30.960
> 
> 标签：meteor

如果我在 ./client 中放置两个文件，例如 ./client/myapp.html & ./client/login.html，则页面[http://localhost:3000/login.html](http://localhost:3000/login.html)不起作用。

如果我将 login.html 放在 ./client/login 目录中，链接[http://localhost:3000/login](http://localhost:3000/login)也不起作用。

那么，我如何在[http://myapp.meteor.com/login上提供页面](http://myapp.meteor.com/login)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T18:09:46.477

使用 Backbone 在客户端进行 URL 路由。

[http://docs.meteor.com/#backbone](http://docs.meteor.com/#backbone)

[http://documentcloud.github.com/backbone/#Router](http://documentcloud.github.com/backbone/#Router)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-05T06:25:33.657

如果您需要服务器端路由，以下提供了一个 hacky 但有效的解决方案：

```
__meteor_bootstrap__.app.stack.splice (0, 0, {
    route: '/hello',
    handle: function (req,res, next) {
        res.writeHead(200, {'Content-Type': 'text/plain'});
        res.end("hello world");
        return;
    }.future ()
}); 
```

现在让我们希望在 Meteor 的官方路由包发布之前我们不用太久！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-07T18:35:45.567

骨干路由是目前要走的路，如前一个答案中所述。通过查看 Meteor 网站上引用的标准 Todos 应用程序，我了解了如何在 Meteor 的上下文中使用它。

但我知道，通过即将发布的路由版本编写能够识别 URL 的应用程序会更容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-15T19:51:04.650

我喜欢这个`router`包，可以通过 Atmosphere 和`mrt add router`.

[https://github.com/tmeasday/meteor-router](https://github.com/tmeasday/meteor-router)

# solr - 使用 Solr 3.6 为每个实体行运行嵌套的 CachedSqlEntityProcessor？

> ID：10482484
> 
> 赞同：1
> 
> 时间：2012-05-07T12:56:38.743
> 
> 标签：solr, dataimporthandler

我刚从 Solr 3.4 升级到 Solr 3.6；我`data-import.xml`对两个版本都使用相同的。导入在 3.4 中正常运行。

我正在使用嵌套实体来获取与每个文档关联的作者，并且我正在使用`CachedSqlEntityProcessor`它来避免不合理地访问数据库。但是，在编制索引时，Solr 编制索引的速度非常慢，并且似乎正在为每个文档获取数据库中的所有作者。指数应为~500 兆；当它达到〜6gigs时，我中止了索引。如果我注释掉`author`下面的嵌套实体，Solr 将正常索引。

我错过了一些明显的东西还是这是一个错误？

```
<document name="documents">
    <entity name="document" dataSource="production"
     transformer="HTMLStripTransformer,TemplateTransformer,RegexTransformer"
     query="select id, ..., from document">
        <field column="id" name="id"/>
        <field column="uid" name="uid" template="DOC${document.id}"/>
        <!-- more fields .. -->
        <entity name="author" dataSource="production"
         query="select 
                cast(da.document_id as text) as document_id, 
                a.id, a.name, a.signature from document_author da 
                left outer join author a on a.id = da.author_id"
         cacheKey="document_id"
         cacheLookup="document.id" 
         processor="CachedSqlEntityProcessor">
             <field name="author_id" column="id" />
             <field name="author" column="name" />
             <field name="author_signature" column="signature" />
        </entity>
    </entity>
</document> 
```

# objective-c - 目标 zip 不能处理音频文件，也不能压缩现有目录

> ID：10482485
> 
> 赞同：1
> 
> 时间：2012-05-07T12:56:43.027
> 
> 标签：objective-c, zlib

我正在使用objective-zip将音频文件压缩成一个zip文件，但是当我这样做时，这个异常出现在我身上：

```
Terminating app due to uncaught exception 'ZipException', reason: 
'Error in opening '/Users/macuser/Library/Application 
Support/iPhoneSimulator/5.1/Applications/79E57C84-3B47-437C-BB44- 
89BAAB034DF5/Documents/ADDRecordFileForTest_0_07-05-2012 12:42:45.caf' in zipfile 
```

我也尝试先将所有音频文件放入一个目录，然后使用 Objective-zip 压缩这些目录，但也出现以下异常：

```
Terminating app due to uncaught exception 'ZipException', reason: 
'Can't open '/Users/macuser/Library/Application Support/iPhone Simulator/5.1/
Applications/79E57C84-3B47-437C-BB44-89BAAB034DF5/Documents/
CurrentMeeting_AudioFiles 
```

是objective-zip 只支持文本文件，为什么objective-zip 不压缩现有文件夹？欢迎任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-04T13:42:14.027

文件名中的冒号可能会导致问题。

```
ADDRecordFileForTest_0_07-05-2012 12:42:45.caf 
```

考虑使用破折号。我也不会使用空格。至少只要您不必处理用户创建的文件名（为了方便/用户体验）。

此外，更多的 zip 通常不会保留目录。但是，如果您在文件夹中压缩文件，则该目录是路径的一部分。我还没有使用 Objective-Zip，但会尝试，因为 ZipArchive 目前不适合我，因为我需要它。我为 ZipArchive 写了一个“zip -r”类别，它基本上是这样工作的：

```
- (NSDictionary *)directoriesAndFilesAtPath:(NSString *)path error:(NSError * __autoreleasing *)error {
    NSFileManager *fileManager = [[NSFileManager alloc] init];
    NSError *fileManagerError = nil;
    NSArray *directoryContents = [fileManager contentsOfDirectoryAtPath:path error:&fileManagerError];
    if (!directoryContents) {
        *error = fileManagerError;
        return nil;
    }

    BOOL isDir;
    NSMutableArray *dirs = [NSMutableArray arrayWithCapacity:10];
    NSMutableArray *files = [NSMutableArray arrayWithCapacity:10];
    for (NSString *object in directoryContents) {
        if ([fileManager fileExistsAtPath:[path stringByAppendingPathComponent:object] isDirectory:&isDir]) {
            if (isDir) {
                [dirs addObject:[path stringByAppendingPathComponent:object]];
            } else {
                [files addObject:[path stringByAppendingPathComponent:object]];
            }
        }
    }

    return @{kDirectoriesKey: dirs, kFilesKey: files};
} 
```

然后，您可以使用递归方法将文件添加到 zip 并为每个目录调用自身。

# c# - 可枚举范围不能正常工作

> ID：10482487
> 
> 赞同：2
> 
> 时间：2012-05-07T12:56:51.743
> 
> 标签：c#

我有一个可枚举的范围，我最初想要对范围执行的操作是遍历存储的列表并获取 minStop（最小停止点）和 maxStart（最大 tarting 品脱）但我只得到最小范围和最大范围我的可枚举范围并没有给我我需要的值。请帮我弄清楚我做错了什么。请！

```
List<Grades> ranges = new List <Grades>();
var strGrades = "40-50, 55-62, 65-72, 80-82, 85-92, 95-99, 110-115";
var splitGrades = strGrades.Split(char.Parse(","));
foreach(var item in splitGrades)
{
    var splitAgain = items.Split(char.Parse("-"));
    var myMax = Math.Max(int.Parse(splitAgain[0]), int.Parse(splitAgain[1]));
    var myMin = Math.Max(int.Parse(splitAgain[0]), int.Parse(splitAgain[1]));

    //my enumerable list   
    var erange = Enumerable.Range(int.Parse(myMax), int.Parse(myMax)).ToList()
    foreach (var maxrange in erange)
    {
       for (int q = myMin; q < maxrange; q++)
        {
         //custom extension method for Between
         if (!q.Between((myMin), (myMax), true))
         {
          //Public class Grades{public int Start, get; set }                  
            ranges.Add(new Grades()
            {
              Start= q,
            });
         }
       }
     }        
  }
 return ranges;
} 
```

谁能告诉我如何让我的可枚举范围得到我的 minStop 值（例如：第一组成绩：40-50，我的最小停止值是 50，然后得到我的下一组成绩范围 55-62，我的最大起始值是 55，所以我希望得到 50-55 的范围，我需要每组的最后一个值以及之后的组的起始值。我希望我很清楚。任何帮助都会很大感谢！谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-07T12:59:15.133

如果您查看文档，[`Enumerable.Range`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.range.aspx)您会发现第二个参数是计数，而不是最大值。

```
public static IEnumerable<int> Range(int start, int count) 
```

所以你需要`max - min + 1`作为第二个参数传递，假设你的最大值是包容性的。

您还需要将最小值作为第一个参数传递，而不是最大值。

还有一个错误是您计算`myMin`的是限制的最大值而不是最小值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T13:00:34.010

首先要找到`Min`它应该是

```
var myMin = Math.Min(int.Parse(splitAgain[0]), int.Parse(splitAgain[1]));

Enumerable.Range(int.Parse(myMax),int.Parse(myMax)) 
```

这将使一个从 n 开始并具有 n 长度的可枚举。

它应该是

```
Enumerable.Range(int.Parse(myMax), int.Parse(myMax) - int.Parse(myMin) + 1) 
```

你的代码应该是

```
List<Grades> ranges = new List <Grades>();
var strGrades = "40-50, 55-62, 65-72, 80-82, 85-92, 95-99, 110-115";
var splitGrades = strGrades.Split(char.Parse(","));
foreach(var item in splitGrades)
{
    var splitAgain = items.Split(char.Parse("-"));
    int myMax = Math.Max(int.Parse(splitAgain[0]), int.Parse(splitAgain[1]));
    int myMin = Math.Min(int.Parse(splitAgain[0]), int.Parse(splitAgain[1]));

    //my enumerable list   
    var erange = Enumerable.Range(myMax, myMax - myMin + 1).ToList()
    foreach (var maxrange in erange)
    {
       for (int q = myMin; q < maxrange; q++)
        {
         //custom extension method for Between
         if (!q.Between((myMin), (myMax), true))
         {
          //Public class Grades{public int Start, get; set }                  
            ranges.Add(new Grades()
            {
              Start= q,
            });
         }
       }
     }        
  }
 return ranges;
} 
```

# .net - 动画简单的 ContextMenu

> ID：10482490
> 
> 赞同：0
> 
> 时间：2012-05-07T12:56:59.227
> 
> 标签：.net, wpf, xaml

我有一个按钮，它应该是一个包含多个子项的菜单。菜单应该“向下滑动”或类似的东西。我正在尝试使用简单的 TranslateTransform 来完成此操作，但我不断收到以下运行时错误：`System.InvalidOperationException: 'translateTransform' name cannot be found in the name scope of 'System.Windows.Controls.ContextMenu'.`

原因是什么？有没有办法解决这个问题？菜单动画方法是否有任何（免费）替代方案？

```
 <Button Name="Settings" Margin="2" Style="{StaticResource GrayGrayButtonStyle}">
            <Image Source="gear.png" />
            <Button.ContextMenu>
                <ContextMenu>
                    <MenuItem Header="Item 0"/>
                    <MenuItem Header="Item 1"/>
                    <MenuItem Header="Item 2"/>
                    <MenuItem Header="Item 3"/>
                    <ContextMenu.RenderTransform>
                        <TranslateTransform x:Name="translateTransform"
                            X="{Binding 
                                Path=ActualWidth, 
                                RelativeSource={RelativeSource 
                                                FindAncestor,
                                                AncestorType={x:Type Button}}}" />
                    </ContextMenu.RenderTransform>
                    <ContextMenu.Triggers>
                        <EventTrigger RoutedEvent="ContextMenu.Loaded">
                            <EventTrigger.Actions>
                                <BeginStoryboard>
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="translateTransform"
                                         Storyboard.TargetProperty="(TranslateTransform.X)"
                                         To="0"
                                         BeginTime="0:0:3.5"
                                         AutoReverse="False"
                                         Duration="0:0:2.5" />
                                    </Storyboard>
                                </BeginStoryboard>
                            </EventTrigger.Actions>
                        </EventTrigger>
                    </ContextMenu.Triggers>
                </ContextMenu>
            </Button.ContextMenu>
        </Button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:15:38.810

不知道你将通过该动画实现什么，但你可以这样写：

```
<DoubleAnimation
    Storyboard.TargetProperty="RenderTransform.(TranslateTransform.X)"
    To="0" ... /> 
```

不幸的是，没有任何动画！该`TranslateTransform.X`属性已经为 0，因为它的绑定会导致错误。但是，您可以像这样编写您的 TranslateTransform 声明：

```
<TranslateTransform 
    X="{Binding Path=PlacementTarget.ActualWidth,
        RelativeSource={RelativeSource AncestorType=ContextMenu}}" /> 
```

# javascript - 使用java脚本在弹出窗口/工具提示上显示信息？

> ID：10482492
> 
> 赞同：0
> 
> 时间：2012-05-07T12:57:05.603
> 
> 标签：javascript

我有一个jsp，我在其中添加了一个徽标。在徽标的单击/鼠标悬停时，我需要显示弹出窗口（或工具提示）并在其中显示一些文本。要显示的文本将从`application context`. 我怎样才能实现它？请帮我。

```
<table>
    <tr>
        <td align="center" class="bgimg">
            <img src="images/someLogo.gif"/>
        </td>
    </tr>
</table> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T13:00:04.407

首先将工具提示文本检索到变量中并在 img 标题属性中使用它。

```
<img src="images/someLogo.gif" title="${tooltipText}"/> 
```

鼠标悬停时，标题文本显示为工具提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T13:30:31.653

如果您的值设置为`application context`使用此：

```
<img src="images/someLogo.gif" title="<%=application.getAttribute("YOUR_VAR_NAME")%>"/> 
```

或者

```
<img src="images/someLogo.gif" alt="<%=application.getAttribute("YOUR_VAR_NAME")%>"/> 
```

# cassandra - Astyanax 复合柱

> ID：10482493
> 
> 赞同：1
> 
> 时间：2012-05-07T12:57:05.883
> 
> 标签：cassandra, composite, astyanax

我正在寻找一个像这样的数据模型。在这个数据模型中，我使用复合键。我知道如何制作复合键。但不知何故，在这种情况下我无法做到。

```
User_Keys_By_Last_Name = {
  "Engineering" : {"anderson", 1 : "ac1263", "anderson", 2 : "724f02", ... }, 
  "Sales" : { "adams", 1 : "b32704", "alden", 1 : "1553bd", ... }, 
} 
```

我想在 Astyanax 做这个。请建议我怎么做。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T10:27:28.517

最好选择 CQL3。 [http://www.datastax.com/dev/blog/whats-new-in-cql-3-0](http://www.datastax.com/dev/blog/whats-new-in-cql-3-0)

# android - Android终端模拟器中的权限被拒绝

> ID：10482495
> 
> 赞同：5
> 
> 时间：2012-05-07T12:57:07.233
> 
> 标签：android

当我打开 android 终端模拟器时，我总是被**拒绝权限？**我想更改 android 的主机，但我不能因为权限被拒绝？我该如何解决？

**我想将主机更改为指向另一台电脑，以便在那里看到请求并检查服务是否来自移动设备，以便我可以将其重新路由到移动页面**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T13:44:46.750

android 板载“工具箱”外壳的错误词汇量有限，并且喜欢因各种原因（例如未找到命令）给予权限被拒绝。

它还具有相当有限的命令种类，其中一些不采用桌面 linux 世界熟悉的格式。

# vb.net - 网站上的事件处理程序导致的内存泄漏？

> ID：10482497
> 
> 赞同：2
> 
> 时间：2012-05-07T12:57:17.590
> 
> 标签：vb.net

一方面，很明显，处理事件的对象必须在事件结束之前注销自己的事件，以避免 CG 没有从内存中清除 - 特别是当它的寿命比“事件引发器”对象长时。

但是，另一方面，我想知道是否有可能在 Web 服务器上遇到这个问题......即使执行上下文（即 Web 会话）已经死亡，服务器是否有可能保持这个对象处于活动状态？不是所有与会话相关的对象都被会话本身清除了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:00:25.200

考虑实施弱事件模式：http: [//msdn.microsoft.com/en-us/library/aa970850.aspx](http://msdn.microsoft.com/en-us/library/aa970850.aspx)

# entity-framework - 实体框架和 n 层应用程序

> ID：10482502
> 
> 赞同：0
> 
> 时间：2012-05-07T12:57:37.177
> 
> 标签：entity-framework, entity-framework-4

所以，我有这个：

1.  网络应用
2.  商业逻辑
3.  数据访问逻辑

我在数据访问逻辑、实体、上下文、初始化程序中创建。

所以通常较高层调用较低层功能，对吗？

如果我想保存客户，我想从 Web 应用程序创建一个客户实体。我不喜欢从 Web 应用层直接引用到数据访问逻辑层（类库）

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:17:17.743

我知道这可能不是很有建设性，但如果我是你，我会添加参考。没有必要让你自己更难找到一种更复杂的方法来做一些应该很容易的事情。另外，如果您现在跳过它并稍后遇到更好的解决方案，您可以修改您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T13:29:27.083

这就是我在以前的项目中所做的

**我的解决方案下的 4 个项目**

**1)** UI（我的 ASP.NET MVC 应用程序）

**2)**商业实体（我的 POCOS 用于客户、订单等实体）

**3）**业务逻辑（我的中间服务层，它位于 UI 和 DataAccess 层之间。我会在这里进行特定于业务的验证。

**4)**数据访问层。与我的数据库对话。可以是EF/纯ADO.NET Stored Proc等。

*   DataAccessLayer 项目有业务实体项目的引用
*   业务逻辑项目有业务实体项目的参考
*   UI Project 有 Business Entities Project 和 BusinessLogic 的参考。

在 UI 中，我调用中间层（业务逻辑）的方法，在进行自定义验证/业务规则之后，我将调用数据访问层方法。

# regex - 正则表达式没有数字或 ( )

> ID：10482503
> 
> 赞同：0
> 
> 时间：2012-05-07T12:57:37.800
> 
> 标签：regex

我需要一个接受除数字和`(`&之外的所有内容的正则表达式`)`。我正在尝试，但我似乎无法得到它。有人可以帮我解决这个正则表达式地狱吗？

**示例**：

汉斯佩德罗 (23123123) 应该是汉斯佩德罗。但是格式可以随时不同。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T13:00:12.543

您可以使用：

```
^[^0-9()]+$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T13:00:08.037

像这样：`^[^\d()]+$`应该做你需要的。它将从字符串 ( `^`) 的开头开始并匹配一个或多个不是数字 ( `\d`) 或括号的字符。它将继续这样做，直到找到字符串的结尾 ( `$`)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T12:59:55.990

尝试：

```
/[^\(\)0-9]*/ 
```

这接受除输入字符之外的所有字符

# java - SVN 导入命令的参数太多

> ID：10482507
> 
> 赞同：2
> 
> 时间：2012-05-07T12:57:52.810
> 
> 标签：java, svn, command-line

在 linux 机器上，我正在执行以下 SVN`import`命令：

```
svn import
           --non-interactive 
           --trust-server-cert 
           --username username 
           --password password 
           -m "a message" 
           /path/to/local.zip 
           https://sub.domain.net/path/to/export.zip 
```

当我自己从命令行调用它时，它可以正常工作。

但是，如果我使用 Java 命令提示符进行此调用，则会收到一条错误消息，指出命令中的参数太多`import`。

有谁知道这可能是什么原因造成的？

**补充说明**

*   如果我将 Java 生成的 svn 命令从我的日志文件复制并粘贴`import`到控制台，那么导入将按预期工作。

*   我可以`export`在 Java 中使用 SVN 命令没有任何问题

*   我试过使用单`'`引号

### 编辑

进行这些调用的代码如下：

```
private void exportToSvn()
    String command = String.format(
            "svn import --non-interactive --trust-server-cert " +
            "--username %s --password %s -m %s %s %s",
            username, password, "\"a message\"", "/path/to/local.zip",
            "https://sub.domain.net/path/to/export.zip"
    );
    command( command );
}

private void command( String... commands ) throws IOException, InterruptedException {
    Runtime rt = Runtime.getRuntime();
    for( String command : commands ){
        Process pr = rt.exec( command );
        BufferedReader input = new BufferedReader(new InputStreamReader(pr.getInputStream()));
        logger.debug( command );
        String line;
        while ( (line = input.readLine()) != null)
            logger.debug("> " + line);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:15:18.277

我建议你使用推荐的[ProcessBuilder](http://docs.oracle.com/javase/6/docs/api/java/lang/ProcessBuilder.html)而不是 Process。它使您可以更好地控制执行，并允许指定参数列表。它可能会解决您的问题，并且只需要对代码进行少量修改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T14:26:47.453

在匿名提示后（*评论者在我发现他们的名字之前删除了他们的评论*） - 我发现问题在于引号，因为它们无法在其中转义`Process` *（参见[这个问题](https://stackoverflow.com/q/3190190/681807)）*。

```
String message = "\"Some message\"";    //quotes aren't escaped 
```

我发现一个解决方法是在`char`格式中包含引号：

```
String message = String.format( "%sSome message%s", (char)34 );  //quotes as char 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-13T06:32:54.320

**试试这个使用终端提交文件**

如果文件夹名称中有空格，只需在空格前使用反斜杠

例如：

> svn import -m "这里我要提交" /Users/Ram/Documents/ **Ram\ file1** / [http://svnlocation/](http://svnlocation/) **svnFolder\ 2654** /

这里我的文件名是：*Ram file1*

SVN文件夹名称为：*svnFolder 2654*

> 请确保在复制过程中没有多余的空格。

# oop - 混合仪器组合的优化 OO 设计

> ID：10482511
> 
> 赞同：2
> 
> 时间：2012-05-07T12:57:58.590
> 
> 标签：oop, design-patterns, finance

我正在设计一个系统，旨在根据最初一天的持有量以及新交易和价格变动的馈送来计算一组持有量的各种指标。初始信息来自 WCF 服务，其中包含新交易和价格更新事件。

所需的指标包括市场价值 (MV)，也需要以各种方式汇总到层次结构中。

在初始加载时，我们得到一组对象，如下所示：

**职位**[数量：双倍，安全：安全，帐户：帐户，策略：策略]

**安全性**[价格：货币，国家：国家，货币：CCY]

**账户**[名称：字符串，基金：基金，经理：经理，货币：CCY]

**策略**[名称：字符串]

**基金**[名称：字符串]

**经理**[名称：字符串]

多重性看起来像这样：

*   经理 (1) -manages-> (1..*) 帐户
*   基金 (1) - 由 -> (1..*) 账户组成
*   账户 (1) -contains-> (1..*) 头寸
*   安全性 (1) - 可以在-> (1..*) 位置
*   策略 (1) -contains-> (1..*) 位置
*   策略 (1) - 可以存在于-> (1..*) 帐户中

白天还会发生很多事情：

*   证券价格变化 - 证券价格从 a -> b 变化
*   新仓位 - 有一笔交易
*   删除头寸 - 交易已被取消

从前端 - 我们需要能够查看经理/基金级别的数据，即

*   经理 1
    *   总价值 = 4800 美元
    *   最大的国家曝光 = 43% 英国
    *   总 % MV = 100%
    *   组件：列表>
    *   国家：列表>
*   经理 2
    *   总价值 = 1200 美元
    *   最大的国家暴露 = 90% 美国
    *   总 % MV = 100%
    *   组件：列表>
    *   国家：列表>
*   基金2
    *   总价值 = 1200 美元
    *   最大的国家暴露 = 90% 美国
    *   总 % MV = 100%
    *   组件：列表>
    *   国家：列表>

或者在安全级别

*   第 1 节
    *   MV = 1000 美元
    *   经理 1 的百分比 = 67%
    *   基金 1 的百分比 = 48%
*   第二节
    *   MV = 2000 美元
    *   经理 3 的百分比 = 12%
    *   基金 2 的百分比 = 4% ...

实体将加载到身份映射中，以确保它们在系统中仅存在一次，因此证券价格的变化将反映在相关头寸中。

我已经研究了各种方式来表示这一点，从概念上讲，事件采购 (http://martinfowler.com/eaaDev/EventSourcing.html) 看起来很有希望，尽管我们只需要查看当前状态，因此可能是矫枉过正。

我目前的思路是将*Manager*、*Fund*和*Account*表示为**Portfolio**对象：

并使用复合模式（组合：组件，职位：组件）+访问者模式分别封装层次结构+计算逻辑。

**投资组合**[对象：表示，组件：ListOfComponents，Accept(Visitor v)：状态]

组件也有 MV（以 $ 为单位）（这些可以使用访问者计算）

设 MV [位置] = *数量 * 安全性.价格*

设 MV [投资组合] = 以下所有仓位 MV 的总和。

所以我们有以下复合结构：

*   投资组合（代表：基金A，MV：**500**）
    *   投资组合（代表：账户 A，MV：**500**）
        *   位置 1 (MV: 300)
        *   位置 2 (MV: 200)
*   投资组合（代表：基金 B，MV **1600**）
    *   投资组合（代表：账户 B，MV：**1000**）
        *   位置 3 (MV: 800)
        *   位置 4 (MV: 200)
    *   投资组合（代表：账户 C，MV：**600**）
        *   位置5（MV：200）
        *   位置6（MV：400）

我的第一个问题是表示不同级别的百分比 - 系统需要能够表示第 5 位构成的资金 B 和账户 C 的百分比？

仓位 5 MV / 账户 C MV = 200 / 600 = 33%

头寸 5 MV / 基金 B MV = 200 / 1600 = 12.5%

可以使用访问者计算值，但我们将计算结果存储在哪里？

在*位置 5*的字典中，如下所示： Dictionary percentMV = {[Fund B, 12.5%], [Account C, 33%]}

或者在相关的投资组合中，在这种情况下，所有的单个头寸都需要被基金 B 参考？**就管理它的经理而言，我们还需要位置 5。**

我遇到困难的另一个概念是国家风险指标——每一种证券都代表了与一个国家相关的一定风险。因此，有两个职位的投资组合： - MV 100 美元，安全国家 = 英国 - MV 300 美元，国家 = 美国

该投资组合的国家风险敞口为 - 100/400 = 25% 英国和 300/400 = 75% 美国。

将这个概念推广到设计中的最佳方式是什么，即存储数据的最佳位置在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T02:03:03.163

*投资组合*是代表职位群体的任意分割的好主意；请务必查看[*规范*模式 (pdf)](http://martinfowler.com/apsupp/spec.pdf)，了解指定投资组合包含标准的通用方法。事实上，*分析模式*(Martin Fowler) 中 描述的*投资组合模式与**领域驱动设计*(Eric Evans)中描述的*规范*模式进行了比较。

 ***现在，*投资组合*仅代表头寸的包含标准。要以不同方式实际汇总职位，请查看*Enterprise Segment*模式（在*Analysis Patterns*中描述）。*企业细分*是组成您的领域（在您的情况下为：证券、经理和基金）的不同*维度元素*的一部分，可以在其上聚合、计算和存储有趣的*度量（如市场价值和国家风险敞口）。*

此外，请务必查看更基本的模式，例如*Money*、*Quantity*和*Range*；并始终使用*小数*或*整数*来存储货币值或汇率以进行货币计算。***

# python - 在 python 中使用类类型名

> ID：10482512
> 
> 赞同：9
> 
> 时间：2012-05-07T12:58:02.907
> 
> 标签：python

与特定类关联的 typename 有什么用？例如，

```
Point = namedtuple('P', ['x', 'y']) 
```

您通常会在哪里使用类型名“P”？

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-07T13:08:45.340

出于理智的考虑，namedtuple 的第一个参数应该与您分配给它的变量名称相同：

```
>>> from collections import namedtuple
>>> Point = namedtuple('P','x y')
>>> pp = Point(1,2)
>>> type(pp)
<class '__main__.P'> 
```

isinstance 不太关心这一点，尽管不知道“P”是什么：

```
>>> isinstance(pp,Point)
True
>>> isinstance(pp,P)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'P' is not defined 
```

但是 pickle 是一个关心找到与类型名匹配的类名的模块：

```
>>> import pickle
>>> ppp = pickle.dumps(pp)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "c:\python26\lib\pickle.py", line 1366, in dumps
    Pickler(file, protocol).dump(obj)
  File "c:\python26\lib\pickle.py", line 224, in dump
    self.save(obj)
  File "c:\python26\lib\pickle.py", line 331, in save
    self.save_reduce(obj=obj, *rv)
  File "c:\python26\lib\pickle.py", line 401, in save_reduce
    save(args)
  File "c:\python26\lib\pickle.py", line 286, in save
    f(self, obj) # Call unbound method with explicit self
  File "c:\python26\lib\pickle.py", line 562, in save_tuple
    save(element)
  File "c:\python26\lib\pickle.py", line 286, in save
    f(self, obj) # Call unbound method with explicit self
  File "c:\python26\lib\pickle.py", line 748, in save_global
    (obj, module, name))
pickle.PicklingError: Can't pickle <class '__main__.P'>: it's not found as __main__.P 
```

如果我将 namedtuple 定义为“Point”，那么 pickle 很高兴：

```
>>> Point = namedtuple('Point','x y')
>>> pp = Point(1,2)
>>> ppp = pickle.dumps(pp)
>>> 
```

不幸的是，由您来管理这种一致性。namedtuple 无法知道您将其输出分配给什么，因为在 Python 中分配是一个语句而不是运算符，因此您必须将正确的类名传递给 namedtuple，并将生成的类分配给相同的变量姓名。

# c# - 比较 XML 片段和返回差异

> ID：10482514
> 
> 赞同：9
> 
> 时间：2012-05-07T12:58:09.907
> 
> 标签：c#, xml, compare

我有一个充满序列化对象的审核列表，我想比较它们并返回差异列表。通过“比较”，我的意思是我想返回元素文本已更改的位置，或添加节点的位置（因此它不在 Xml1 中，但在 Xml2 中 - 它不会反过来发生）

示例 xml：

```
<HotelBookingView xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <Id>119</Id>
  <RoomId>1</RoomId>
  <ChangeRequested>false</ChangeRequested>
  <CourseBookings>      
    <CourseHotelLink>
      <Id>0</Id>
    </CourseHotelLink>
</CourseBookings>
</HotelBookingView> 
```

名称空间和标签的名称/大小写不会改变。此示例中所有可以更改的是标签之间的值，以及“CourseHotelLink”的数量（它是一个序列化列表）。

我想要的最终结果是哪个节点已更改的列表 - 旧值和新值。

比较它们的最佳选择是什么？我正在使用 .Net 4.0，所以 linq 是一个选项。我需要能够在不必知道所有节点的名称的情况下进行比较——尽管我只会比较两个相同类型的对象。我一直在尝试使用以下代码，但我无法调整它以找出文本中的更改以及额外的节点。

```
XmlDocument Xml1 = new XmlDocument();
XmlDocument Xml2 = new XmlDocument();
Xml1.LoadXml(list[1].Changes);
Xml2.LoadXml(list[2].Changes);
foreach (XmlNode chNode in Xml2.ChildNodes)
{
   CompareLower(chNode);
}

protected void CompareLower(XmlNode aNode)
{
    foreach (XmlNode chlNode in aNode.ChildNodes)
    {
        string Path = CreatePath(chlNode);
        if (chlNode.Name == "#text")
        {
            //all my efforts at comparing text have failed
            continue;
        }
        if (Xml1.SelectNodes(Path).Count == 0)
        {
            XmlNode TempNode = Xml1.ImportNode(chlNode, true);
            //node didn't used to exist, this works- though doesn't return values
            str = str + "New Node: " + TempNode.Name + ": " + TempNode.Value;
        }
        else
        {
            CompareLower(chlNode);
        }
    } 
} 
```

可能我的代码尝试距离很远，并且有更好的方法，欢迎提出任何建议！

编辑添加：我最终使用了 MS Xml Diff Tool，以下代码生成了两个 xml 节点的大 html 表列表，差异以绿色突出显示。所以它可能（虽然很疯狂）生成 html，然后对其进行排序以找到文本“lightgreen”（突出显示的值），然后执行一些字符串格式以仅显示更改的子节点。

```
var node1 = XElement.Parse("Xml string 1 here").CreateReader();
var node2 = XElement.Parse("Xml string 2 here").CreateReader();

MemoryStream diffgram = new MemoryStream();
XmlTextWriter diffgramWriter = new XmlTextWriter(new StreamWriter(diffgram));

XmlDiff xmlDiff = new XmlDiff(XmlDiffOptions.IgnoreChildOrder);
xmlDiff.Algorithm = XmlDiffAlgorithm.Fast;
xmlDiff.Compare(node1, node2,diffgramWriter);

diffgram.Seek(0, SeekOrigin.Begin);
XmlDiffView xmlDiffView = new Microsoft.XmlDiffPatch.XmlDiffView();
StringBuilder sb = new StringBuilder();
TextWriter resultHtml = new StringWriter(sb);
xmlDiffView.Load("Xml string 1", new XmlTextReader(diffgram)); 

xmlDiffView.GetHtml(resultHtml);
resultHtml.Close(); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-07T21:00:45.157

使用 XMlDiff 是要走的路 - 证明它这里有一些工作代码。我正在使用你的 XML。如果 XML 不同（或无效），这可能不起作用。

原来的：

```
var xml1 = @"<HotelBookingView xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xmlns:xsd=""http://www.w3.org/2001/XMLSchema"">
<Id>119</Id>
<RoomId>1</RoomId>
<ChangeRequested>false</ChangeRequested>
<CourseBookings>      
    <CourseHotelLink>
    <Id>0</Id>
    </CourseHotelLink>
</CourseBookings>
</HotelBookingView>"; 
```

中的不同`Id`值`CourseBookings`：

```
var xml2 = @"<HotelBookingView xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xmlns:xsd=""http://www.w3.org/2001/XMLSchema"">
<Id>119</Id>
<RoomId>1</RoomId>
<ChangeRequested>false</ChangeRequested>
<CourseBookings>      
    <CourseHotelLink>
    <Id>1</Id>
    </CourseHotelLink>
</CourseBookings>
</HotelBookingView>"; 
```

创建阅读器的省力方式（`XDocument`如果需要，更改为）：

```
var node1 = XElement.Parse(xml1).CreateReader();
var node2 = XElement.Parse(xml2).CreateReader(); 
```

准备结果编写器：

```
var result = new XDocument();
var writer = result.CreateWriter(); 
```

做差异：

```
var diff = new Microsoft.XmlDiffPatch.XmlDiff();    
diff.Compare(node1, node2, writer);
writer.Flush(); 
writer.Close(); 
```

`result`现在是`XDocument`包含差异摘要的一个：

```
<xd:xmldiff version="1.0" srcDocHash="14506386314386767543" options="None" fragments="no" xmlns:xd="http://schemas.microsoft.com/xmltools/2002/xmldiff">
  <xd:node match="1">
    <xd:node match="4">
      <xd:node match="1">
        <xd:node match="1">
          <xd:change match="1">1</xd:change>
        </xd:node>
      </xd:node>
    </xd:node>
  </xd:node>
</xd:xmldiff> 
```

# facebook - 为什么 bf like 按钮会显示一些评论框而不显示其他评论框？

> ID：10482515
> 
> 赞同：0
> 
> 时间：2012-05-07T12:58:12.923
> 
> 标签：facebook, facebook-like

...我们的一个客户提供了一个来自 addThis.com 的 js 脚本链接，以便在他们的网站上显示 FB、twitter 和 G+ 按钮作为共享栏。我注意到，对于某些人来说，点击 Like 按钮会显示评论框，而对于某些人来说却没有。这解决了一些问题，因为我们必须使用另一个 '4th' 方 jQuery 插件来让共享栏保持静态定位在页面上，在某些条件下从视图中消失等。

因此，我被要求永久隐藏评论框，我做到了。发现了一些令人讨厌的 hack，至少现在似乎在跨浏览器上运行良好。

但我需要记录发生了什么。有任何想法吗？我看到我们的一个 QA 人员在我做的同一页面上点击，但他们没有得到评论框，而我做到了。是什么驱动了它？

如果这有什么不同，客户端正在使用类似按钮的 iframe 实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T13:23:43.473

我不知道这是否适合您，但您是否尝试过使用 css 禁用评论选项？

```
.fb_edge_widget_with_comment span.fb_edge_comment_widget iframe.fb_ltr {
    display: none !important;
} 
```

# ruby - Sinatra 在多部分表单提交时“无法将 nil 转换为哈希”

> ID：10482521
> 
> 赞同：0
> 
> 时间：2012-05-07T12:58:38.823
> 
> 标签：ruby, sinatra

我正在尝试做一个简单的文件上传页面，但不断收到“无法将 nil 转换为哈希”（文件：request.rb 位置：合并行：221）。这发生在 Windows 和 Ubuntu 上。红宝石 1.9.3，西纳特拉 1.3.2。我还注意到 POST 数据显然是空的，无论我尝试上传的文件大小如何，请求总是不到 70k。

处理程序没有做太多：

```
get "/upload" do
  erb :upload
end      

post '/upload' do
  tempfile = params['file'][:tempfile]
  filename = params['file'][:filename]
  File.copy(tempfile.path, "./files/#{filename}")
  redirect '/'
end 
```

表格如下：

```
 <div id="bodydiv">
    <h1>file upload page</h1>
    File to upload:

    <form method="post" action="" enctype="multipart/form-data">
        <input type="file" id="file" />
        <input type="hidden" value="tokenstuff" id="hiddenThing" />
        <input type="submit" value="upload" id="commit" />
    </form>

   </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T14:24:35.513

`name`您必须在文件输入中添加一个属性。
我不知道为什么，如果有人可以解释这一点。谢谢。

# android - 从日历实例中获取给定的一天

> ID：10482525
> 
> 赞同：0
> 
> 时间：2012-05-07T12:58:51.660
> 
> 标签：android

假设我有一个像 2012 年 1 月 1 日这样的日期，我想看看今天是哪一天，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T13:03:44.323

我假设您将日期作为字符串。[在这种情况下，您应该首先使用 SimpleDateFormat 解析日期，然后使用Date.getDay()](http://developer.android.com/reference/java/util/Date.html#getDay%28%29)从该日期获取星期几。

```
SimpleDateFormat curFormater = new SimpleDateFormat("dd/MM/yyyy"); 
Date dateObj = curFormater.parse(dateStr);
int day = dateObj.getDay(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T13:07:37.617

通过使用 SimpleDateFormate 对象，我们可以从字符串日期中获取日期：

```
SimpleDateFormat  format = new SimpleDateFormat("dd/MM/yyyy");  
        try {  
            Date date = format.parse("01/01/2012");  
            switch(date.getDay()) {
            case 0: "sunday";
            break;
            case 1: "monday";
            break;
            ....
            }

        } catch (ParseException e) {
            e.printStackTrace();  
        } 
```

# ruby-on-rails - Rails 3.x 的发票管理 gem

> ID：10482526
> 
> 赞同：2
> 
> 时间：2012-05-07T12:58:55.040
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gem

我正在寻找与我的 Rails 应用程序一起使用的发票管理 gem。我尝试了 Ruby Invoicing Framework (http://ept.github.com/invoicing/)，但它似乎不适用于 Rails 3。

Rails 3.x 还有其他可用的发票管理 gem 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T13:11:04.870

发票很复杂，并且有很多与之相关的业务规则——以及发送、跟踪、发送提醒等流程。我建议不要寻找宝石，而是考虑使用现有应用程序提供商的 API . 周围有几个不错的可以选择。

这里有三个：

Freshbooks 发票 API：http: [//developers.freshbooks.com/docs/invoices/](http://developers.freshbooks.com/docs/invoices/)

ZOHO 发票 API： [http ://www.zoho.com/invoice/api/index.html](http://www.zoho.com/invoice/api/index.html)

收获发票 API： [http ://www.getharvest.com/api/invoices](http://www.getharvest.com/api/invoices)

这些服务具有功能齐全的发票系统，与您找到可以帮助您构建自己的 gem 的情况相比，这些服务可能会花费您更少的时间来启动和运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T13:04:44.277

查看此[列表](https://www.ruby-toolbox.com/search?utf8=%E2%9C%93&q=invoice)，您可以在其中找到许多发票替代方案。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-09-05T05:54:23.370

网上有很多开票应用程序，但我认为你应该选择我目前正在使用的那个，因为它可以在线免费获得，而且是非常简单、易用且功能丰富的开票工具。查看网站[http://www.nutcache .com](http://www.nutcache.com) _

# jquery - jQuery ajax 函数返回错误

> ID：10482530
> 
> 赞同：7
> 
> 时间：2012-05-07T12:58:58.887
> 
> 标签：jquery, ajax, post

老实说，我是 jQuery 的初学者，现在我被困住了。我想将数据从我的 HTML 表单发送到 php，它将数据添加到数据库并返回一些我想在原始 HTML 上显示的值。这是我的代码：

```
$.ajax({
  type: "POST",
  url: "http://mysite.com/process.php",
  data: { data: mydata },
  cache: false,
  dataType: "text",
  error: function(jqXHR, textStatus, errorThrown){
        alert(jqXHR.status);
        alert(jqXHR.statusText);
        alert(jqXHR.responseText);
    },
  success: function(data){
        getContentBox().innerHTML = data;
}
}); 
```

它返回一个带有`status`=0、`statusText`="error" 和 empty的 jqXHR 对象`responseText`。但是，我的 php 似乎可以工作，我看到我的数据插入到我的数据库中。我究竟做错了什么？

任何帮助，将不胜感激。提前致谢！

编辑：Chrome 控制台说 XMLHttpRequest 无法加载[http://mysite.com/data.php](http://mysite.com/data.php)。Access-Control-Allow-Origin 不允许来源[http://www.mysite.com 。](http://www.mysite.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T19:48:42.007

ShelbyZ 的评论让我找到了解决方案：

当我尝试使用绝对 URL 时，浏览器拒绝执行请求，我不得不将其写为相对 URL。

```
$.ajax({
  type: "POST",
  url: "process.php",
  data: { data: mydata },
  cache: false,
  dataType: "text",
  error: function(jqXHR, textStatus, errorThrown){
        alert(jqXHR.status);
        alert(jqXHR.statusText);
        alert(jqXHR.responseText);
    },
  success: function(data){
        getContentBox().innerHTML = data;
}
}); 
```

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T13:07:41.713

试试这个（你忘了关闭一个括号）：

```
$.ajax({
  ...
  success: function(data){
    getContentBox().innerHTML = data;
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T18:04:02.250

为什么不使用jquery的内置post函数来简化这个ie

```
 $.post('http://mysite.com/process.php', mydata, function(data) {
                if (data.status == 1) {
                    getContentBox().html() = data;
                } else {
                    alert(data.status);
                    alert(data.statusText);
                    alert(data.responseText);
                }
            }); 
```

我不确定您的状态响应是什么，因此您可能需要对其进行编辑，但如果您将其放入`$('form here').submit(function() {POSTCODEHERE});`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-28T11:08:53.850

我有同样的问题。Ajax 函数绑定`<form>`到. 我真的不知道这有什么关系，但是当我添加到按钮的动作侦听器时，它就可以正常工作了。`error``success``event.preventDefault()`

# php - 对 Facebook API 的请求数量有哪些限制？

> ID：10482534
> 
> 赞同：0
> 
> 时间：2012-05-07T12:59:09.003
> 
> 标签：php, facebook-graph-api

我正在为 Facebook 开发一个应用程序。

对 Facebook API 的请求数量有哪些限制？每次通话次数是否有限制？

在使用 Facebook 广告 API 时也有类似的限制吗？

我发现如果我连续拨打 800 多个电话：

```
$request = $facebook->api('/'.$row['fb_uid'].'/feed', 'POST', array('message'=>'Facebook API Test №'.$i.' time '.gmdate('Y-m-d H:i:s', time()) )); 
```

第 79 次通话后，我收到错误消息：

```
Err type: OAuthException
Err msg: (#1) An unknown error occurred 
```

并且这个程序应用程序将在两天内被这个 facebook 用户禁止。

从哪里获得有关限制的所有信息？[我在http://developers.facebook.com](http://developers.facebook.com)上找不到此信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T18:12:48.160

速率限制为 600 秒内 600 次调用，如此处所述：[http ://www.quora.com/Whats-the-Facebook-Open-Graph-API-rate-limit](http://www.quora.com/Whats-the-Facebook-Open-Graph-API-rate-limit)

# php - PHP从数据库中选择显示用户名？

> ID：10482537
> 
> 赞同：0
> 
> 时间：2012-05-07T12:59:23.910
> 
> 标签：php

所以我试图从用户表中选择用户名，如果他们在一个帮派中。

使用的变量：

```
$member_gang = mysql_fetch_assoc(mysql_query("SELECT level,gangid,rating FROM user_stats WHERE id = '" . $_SESSION['user']['id'] . "'"));
$gang_info = mysql_fetch_assoc(mysql_query("SELECT * FROM gangs WHERE id = '".$member_gang['gangid']."'")); 
```

这是我想展示它的时候。

```
$getmembers = mysql_fetch_assoc(mysql_query("SELECT * FROM user_stats WHERE gangid = '" . $gang_info['gangid'] . "'"));

$displaymembers = mysql_fetch_assoc(mysql_query("SELECT * FROM users WHERE id = '" . $getmembers['id'] . "'"));

echo 'One Member of this gang is: <b>'.$displaymembers['username'].' </b>:)'; 
```

（我确实有数据库连接等。）它没有回显用户名？！

编辑：我不擅长 PHP，我不明白准备好的语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:03:08.697

```
$gang_info['id'] 
```

不是

```
$gang_info['gangid'] 
```

因为你在上面写

```
"SELECT * FROM gangs WHERE id...." 
```

并不是

```
"SELECT * FROM gangs WHERE gangid..." 
```

?

你为什么在''中设置ID？它们是字符串吗？如果没有，请将它们更改为整数，这是主键的更好解决方案。

# bash - Shell：等待文件已被复制

> ID：10482541
> 
> 赞同：0
> 
> 时间：2012-05-07T12:59:39.207
> 
> 标签：bash, shell, unix, sh

我有一个 shell 脚本，它列出了文件夹的文件，然后对它们执行操作（打印成 PDF），但我经常得到一个空白的 PDF。如果我删除生成的 PDF，则始终会正确生成新的 PDF。

我的印象是因为我的脚本在文件完全复制之前开始打印（副本是通过操作系统资源管理器制作的，另存为，或者只是复制粘贴）。

当有人添加新文件时，绝对不是我来管理，副本来自使用网络共享的用户。

那么有没有办法拥有这样的东西？

```
for inputFile in `ls -l $SearchPattern | grep ^- | awk '{print $9}'`
do
   //CHECK_THAT_THE_FILE_HAS_ALREADY_BEEN_FULLY_SAVED_ONCE 
   //DO_MY_PRINT_HERE
done 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T13:10:00.137

如果您在 Linux 下运行并且文件系统是服务器*本地*的，那么您可以使用[inotify](https://en.wikipedia.org/wiki/Inotify)子系统等到文件关闭然后触发操作。inotify [-tools](https://github.com/rvoicilas/inotify-tools/wiki/)包包括[inotifywait](http://linux.die.net/man/1/inotifywait)程序，它将 inotify 功能公开给 shell 脚本。

例如，您可以`close_write`在这样的目录中监视事件：

```
inotifywait -e close_write -m /path/to/directory 
```

运行此命令，执行以下操作：

```
echo hello > /path/to/directory/file 
```

将生成如下输出：

```
/path/to/directory/ CLOSE_WRITE,CLOSE hello 
```

所以你有生成事件的目录和文件名。在 shell 脚本中，您可以将其通过管道传输到循环中：

```
inotifywait -e close_write -m /path/to/directory | while read dir flags file; do
  ...do something with the file...
done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T13:20:31.763

正如有人指出的那样，使用文件修改时间可能很有用。我很快就完成了这个可能有用的脚本。它将等到自给定文件的最后修改时间以来经过 5 秒：

```
#!/bin/bash

function getTimeFromLastChange() {
    file=${1}
    let lastAccess=$(stat --format=%Y ${file})
    let now=$(date +%s)
    let timePassed=$((now - lastAccess))
    echo ${timePassed}
}

file=./test
while [ true ]; do
    let lastChange=$(getTimeFromLastChange ${file})
    if [ "${lastChange}" -lt 5 ]; then
        echo "waiting"
        sleep 1
    else
        echo "done"
        exit
    fi
done

echo ${timePassed} 
```

这里的关键是“getTimeFromLastChange”函数，它使用 stat (http://linux.die.net/man/1/stat) 获取给定文件自 unix 纪元时间以来的最后修改时间（以秒为单位）。然后，它将使用日期 (http://linux.die.net/man/1/date) 获取当前时间（同样，自 unix 纪元时间以来的秒数），减去它们，并计算自以来的总秒数最后修改时间。

主循环将等到一些“安全”的秒数过去。因此，您可以尝试调整此参数并打印几秒钟前写入/修改的文件。

示例运行：

```
marcelog@host ~ $ touch ./test
marcelog@host ~ $ ./try.sh
waiting
waiting
waiting
done 
```

这不是 100% 安全的。但我认为值得一试。

希望能帮助到你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T13:08:48.710

您应该检查数据的修改时间并对此设置阈值。没有其他（简单）方法可以查看文件上是否没有更多操作未决。

所以你应该使用

ls -l -t

在您找到上面的语句并根据您的时间阈值通过“排序”进行管道传输。

问候

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T10:40:46.340

我结束了使用

```
for inputFile in `find $SearchPattern2 -maxdepth 1 -type f -cmin +1 -iname "*.pdf"` 
```

-cmin +1 表示查找，即只列出修改时间>1分钟前的文件。

它不是 100% 安全的，但它会以很大的利润处理我所有的情况。

我没有找到如何在几秒钟内做到这一点

# javascript - jQuery 调整大小无法正常工作

> ID：10482542
> 
> 赞同：-1
> 
> 时间：2012-05-07T12:59:40.220
> 
> 标签：javascript, jquery, jquery-ui

首先，我无法将演示放在 jsFiddle 中，因为它太大了。
[Demo](http://ilyeskooli.com/desktop/)
双击**配置**图标打开窗口，现在如果你调整窗口大小，内容溢出，如果你再次调整大小就可以了，等等。为什么会出现这个问题？（调整大小一次又一次没有..）
这是相关代码：

调整大小事件处理程序：

```
$('.window-container').live('resize', function(){
    var window = $(this).data('window');
    window.setWidth(window.windowContainer.width());
    window.setHeight(window.windowContainer.height());       
    window.repaint();
}); 
```

重绘方法（仅相关代码）：

```
JWindow.prototype.repaint = function(){ 
    this.windowContainer.hide();
    if (this._visible && !this._minimized) this.windowContainer.show();
    this.windowContainer.css('position', 'abosolute');
    this.windowContainer.css('left', this.getLeft());
    this.windowContainer.css('top', this.getTop());
    //Resizable    
    this.windowContainer.resizable('disable');
    if (this._resizable){
        this.windowContainer.resizable({
            containment: 'parent',
            ghost: true,
            animate: false,
            minHeight:100,
            minWidth:this.titleLabel.textWidth()+120
        });
        this.windowContainer.resizable('enable');
    }
    this.windowContentContainer.css('height',this.windowContainer.innerHeight()-this.titleBarContainer.height()-20);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T16:01:55.463

好吧，这不是一个真正的*正确答案*，我无法弄清楚这个问题，所以我重新编码了所有调整大小的代码..

# asp.net - ASPX 背后的代码问题

> ID：10482547
> 
> 赞同：2
> 
> 时间：2012-05-07T12:59:56.287
> 
> 标签：asp.net, vb.net

我有一个带有此按钮的 ASPX 文件：

```
<asp:button id="cmdPartnerInfo" runat="server" Font-Bold="True" 
    Text="Partner Info" TabIndex="3">
</asp:button> 
```

在 ASPX.VB 文件中，我有这个子：

```
Private Sub Page_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

    cmdPartnerInfo.Attributes.Add("onclick", "return ShowPartnerContatcInfo();")
    imgStaff.Attributes.Add("onclick", "return AddStaffSelection();")
    lblDt.Text = ""

... snip ...

End Sub 
```

但是，下面有一条波浪线`cmdPartnerInfo`，消息是：

```
Error 38 'cmdPartnerInfo' is not declared. It may be inaccessible due to its 
protection level. 
```

所以看起来vb文件中的代码在aspx页面中看不到asp控件。

任何帮助弄清楚为什么会发生这种情况表示赞赏。

谢谢！埃里克

更新：这是 ASPX 页面顶部的两个指令。

```
<%@ Register TagPrefix="Card" TagName="Banner" Src="~/banner.ascx" %>
<%@ Page Language="vb" AutoEventWireup="false" CodeFile="projectpartlog.aspx.vb" Inherits="Project_and_Partners_Log" %> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T13:50:59.970

1.  检查页面的指令`<%@ Page`并确保您后面的类属于您的 aspx 文件。
2.  您需要检查的下一个问题是 aspx.designer 文件（您应该找到您的 Button 控件声明）。有时，当您复制粘贴代码时，VS 不会自动添加声明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T13:06:42.033

您的 ASPX 文件是否声明了具有“CodeFile/Inherits”属性的页面指令？例如 <@Page CodeFile="XYZ.aspx.vb" Inherits="XYZ" >

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T14:27:44.200

```
<%@ Page Language="vb" AutoEventWireup="false" CodeFile="projectpartlog.aspx.vb" Inherits="Project_and_Partners_Log" %> 
```

该指令意味着：

1.  您的“代码隐藏”的**文件名**应该是`projectpartlog.aspx.vb`
2.  文件中的**类**名`projectpartlog.aspx.vb`应该是`Project_and_Partners_Log`

    ```
    Partial Class Project_and_Partners_Log
        Inherits System.Web.UI.Page

        Protected Sub Page_Load(sender As Object, e As System.EventArgs) Handles Me.Load

        End Sub

        Protected Sub cmdPartnerInfo_Click(sender As Object, e As System.EventArgs) Handles cmdPartnerInfo_Click.Click     

          'Code.....

         End Sub

    End Class 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T13:07:32.413

我认为您已将按钮转换为私人添加一个新按钮并将其删除，然后尝试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T13:14:59.883

您需要检查您的页面指令。

```
<%@ Page Language="VB" MasterPageFile="~/Master/Mater.master" AutoEventWireup="false"
    CodeFile="Test.aspx.vb" Inherits="Test" %> 
```

检查 CodeFile 属性是否设置为正确的代码文件。

# ajax - 当多个 POST 请求发生时，我的 post 请求处于挂起状态

> ID：10482552
> 
> 赞同：1
> 
> 时间：2012-05-07T13:00:05.290
> 
> 标签：ajax, asp.net-mvc, asp.net-mvc-3

通过 AJAZ 帖子提交我的表单时，一些 POST 请求仍处于待处理状态（注意=待处理）。这个问题只发生在我的笔记本电脑上！

我注意到当我有一个独特的发布请求时（同时）我没有问题。只有当我有多个发布请求时才会出现问题。

![在此处输入图像描述](../Images/abc2420a3a715162bca3133e57b6fd5c.png)

所有这些待处理的 POST 命令都是在提交表单时触发的“远程验证”。

我已经卸载了防病毒软件并停用了我的防火墙，但没有任何变化。

有关如何解决和解决此问题的任何想法？

* * *

**更新**

根据要求，这里有更多信息：

**它可以在该机器上的 Visual Studio 调试中工作吗？**在 VS 中调试时，我遇到了同样的问题。

**在这些方法中设置断点会发生什么？**当我设置断点时，这些都没有到达。

**你试过多少浏览器？**我尝试使用 IE9、GC、Safari。我对所有这些都有问题。

**哪个操作系统是问题机器？**赢得 7 家庭高级版 64 位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T21:09:50.490

问题是由于**会话状态锁定**......在你的控制器中添加这个`[SessionState(SessionStateBehavior.Disabled)]`

并可*选择*继承自 `AsyncController`

使用 asp.net mvc 4 为我工作。

# iphone - 使用自定义路径覆盖谷歌地图 API（iOS 开发）

> ID：10482555
> 
> 赞同：0
> 
> 时间：2012-05-07T13:00:11.840
> 
> 标签：iphone, ios, xcode, overlay

我正在尝试找出如何在 google map api 中覆盖/创建自定义路径。即在某个区域周围，我有一张尚未放入谷歌地图的自行车道地图。

基本上，如果有人可以通过链接我或为我提供一些入门步骤来为我指明正确的方向，那就太好了！

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T13:19:57.283

[iOS MapLayerDemo](https://github.com/mtigas/iOS-MapLayerDemo)和[MTLocation](https://github.com/myell0w/MTLocation)可能是一个很好的地方。

# authentication - LDAP 网页授权

> ID：10482560
> 
> 赞同：0
> 
> 时间：2012-05-07T13:00:25.477
> 
> 标签：authentication, ldap, webpage

我想使用我设置的 LDAP 服务器为我的网页提供身份验证。我已经使用本教程设置了服务器：[http](http://www.krugerville.com/centos6/configuring-openldap-server-on-centos-6.html) ://www.krugerville.com/centos6/configuring-openldap-server-on-centos-6.html 。

然后我使用我在此处找到的 ldif 文件（在组身份验证下）创建了一个组“用户”： [http ://www.yolinux.com/TUTORIALS/LinuxTutorialApacheAddingLoginSiteProtection.html#LDAP](http://www.yolinux.com/TUTORIALS/LinuxTutorialApacheAddingLoginSiteProtection.html#LDAP)

我的域名是：bimi-test.fm.abc-dc.it。

可以吗，如果我将“o=stooges”替换为“dc=bimi-test,dc=fm,dc=abc-dc,dc=it”，那么条目将如下所示：

```
<Directory /var/www/html>
   Order deny,allow
   Deny from All
   AuthType Basic
   AuthName "Stooges Web Site: Login with user id"
   AuthBasicProvider ldap
   AuthzLDAPAuthoritative on
   AuthLDAPURL ldap://bimi-test.fm.abc-dc.it:389/dc=bimi-test,dc=fm,dc=abc-dc,dc=it?uid?sub
   AuthLDAPBindDN "cn=Manager,dc=bimi-test,dc=fm,dc=abc-dc,dc=it"
   AuthLDAPBindPassword pepi
   AuthLDAPGroupAttribute memberUid
   AuthLDAPGroupAttributeIsDN off
   Require ldap-group cn=users,ou=group,dc=bimi-test,dc=fm,dc=abc-dc,dc=it
   Require ldap-attribute gidNumber=100
   Satisfy any
</Directory> 
```

除了编辑 httpd.conf 之外，我还有什么需要编辑的以获取登录窗口吗？这里什么都没有发生……我可以在没有任何授权的情况下访问我的网站。:(

**更新：好的，所以一个朋友给了我他的 httpd.conf，我编辑了它。这对我有用：**

```
<Directory /var/www/html>
    Deny from all
    AuthType Basic
    AuthBasicProvider ldap
    Order deny,allow
    Allow from all
    AuthLDAPURL ldap://bimi-test.fm.abc-dc.it/ou=people,dc=bimi-test,dc=fm,dc=abc-dc,dc=it?uid?sub
    AuthzLDAPAuthoritative off
    AuthName "Ldap admin"
    require valid-user
</Directory> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:04:13.457

我们有很多人对此有疑问，并在此处对配置进行了一些注释：http: [//ldapwiki.willeke.com/wiki/TomcatAndLDAP](http://ldapwiki.willeke.com/wiki/TomcatAndLDAP)

# spring-aop - AOP : java.lang.IllegalArgumentException: ::0 处的错误找不到引用的切入点

> ID：10482563
> 
> 赞同：12
> 
> 时间：2012-05-07T13:00:39.260
> 
> 标签：spring-aop

我是 AOP 的新手。我遇到了这样的问题。

```
package org.suman.Aspect;

import org.aspectj.lang.annotation.Aspect;
import org.aspectj.lang.annotation.Before;
import org.aspectj.lang.annotation.Pointcut;

@Aspect
public class LoginAspect {
    //@Before("execution(public String getName())")
    //@Before("execution(public String org.suman.Model.Triangle.getName())")
    //@Before("execution(* get*())")
    //@Before("execution(* get*(..))")
    //@Before("execution(* org.suman.Model.*.get*())")

    //@Before("execution(* get*())&& within(org.suman.Model.Circle)")
    @Before("execution(* get*())&& allCircle()")
    //@Before("allGetters() && allCircle()")
    public void LoginAdvice()
    {
        System.out.println("Advice run.. getMethod is called");
    }

    @Before("execution(* get*())")
    //@Before("allGetters()")
    public void SecondAdvice()
    {
        System.out.println("this is a second Advice");
    }
    @Pointcut("execution(* get*())")
    public void allGetters(){}

    //@Pointcut("execution (* * org.suman.Model.Circle.*(..))")
    @Pointcut("within(org.suman.Model.Circle)")
    public void allCircle(){}

} 
```

使用切入点时，方法`allGetters()`到`LoginAdvice`方法，如果我使用 `@Before("execution(* get*())")`则没有错误，但如果我使用`@Before("allGetters()")`则给出错误

> java.lang.IllegalArgumentException: ::0 处的错误找不到引用的切入点 allGetters

如果我使用`@Before("execution(* get*())&& within(org.suman.Model.Circle)")`而不是方法名称，它会起作用。

我的xml是这样的：

```
<?xml version="1.0" encoding="UTF-8" ?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.0.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd">
    <!-- <context:annotation-config /> -->
    <aop:aspectj-autoproxy />

    <bean name="triangle" class="org.suman.Model.Triangle">
        <property name="name" value="Triangle Name"></property>
    </bean>
    <bean name="circle" class="org.suman.Model.Circle">
        <property name="name" value="Circle name"></property>
    </bean>
    <bean name="shapeService" class="org.suman.Services.ShapeService"
        autowire="byName"></bean>
    <bean name="loginAspect" class="org.suman.Aspect.LoginAspect"></bean>

</beans> 
```

请用切入点解决问题

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-27T20:46:28.490

我遇到了这个问题 - 在“占位符”方法上使用 @Pointcut 会给我“找不到引用的切入点”错误。

只需通过使用以下 maven 依赖项更新 AspectJ 库即可解决：

```
 <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjrt</artifactId>
        <version>1.5.4</version>
    </dependency>
    <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjweaver</artifactId>
        <version>1.5.4</version>
    </dependency> 
```

对此

```
 <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjrt</artifactId>
        <version>1.7.0</version>
    </dependency>
    <dependency>
        <groupId>org.aspectj</groupId>
        <artifactId>aspectjweaver</artifactId>
        <version>1.7.0</version>
    </dependency> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T00:44:12.087

我遇到了同样的问题。一旦我用 aspectjweaver-1.6.11.M2.jar 版本替换了 aspectjweaver。一切都开始顺利进行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-04-15T16:04:48.140

使用 aspectjweaver 和 aspectjrt 版本 1.8.10

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-01-27T17:41:25.467

运行早期访问版本的 JDK9 也可能导致该问题。

Maven 可能更喜欢更新版本的 Java，而不是`PATH`.

就我而言，我在 Ubuntu 15.04 上通过 Maven 使用 Swagger2 运行 Spring，并且我已经安装了`java-8-oracle`和`java-9-oracle`（以及更多版本）。我的`java -version`，源自`PATH`，说`1.8.0_72`，但是当我运行 Maven 并更改为时`/usr/bin/mvn`，`echo JAVA_HOME`它显示已选择`/usr/lib/jvm/java-9-oracle`。

导出`JAVA_HOME`到`/usr/lib/jvm/java-8-oracle`使 Maven 使用所需的 Java 版本，这使得 AOP 编织 Spring 的依赖注入布线的切入点的问题消失了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-05-01T09:06:57.320

在不同的用例中遇到相同的错误。

[![在此处输入图像描述](../Images/99d2679104e8f16848ff222f7cc4780d.png)](https://i.stack.imgur.com/evwP5.png)

**用例：**试图调用存在于不同方面类中的切入点。

*LogServicePointCut1() 切入点存在于 LogService*

```
package com.opensource.kms;
@Aspect
@Component
public class LogService {

    @Pointcut("execution(* com.opensource.kms.AccountService.my*(..))")
    public void logServicePointCut1() {
    }
} 
```

*尝试调用 SecurityService*

```
@Aspect
@Component
public class SecurityService {

    @Before("logServicePointCut1()")  /*Need to give fully Qualified name*/
    public void verifyUserBeforeSecurityService() {
        System.out.println("verifyUserBeforeSecurityService");
    }
} 
```

**解决方案：**需要通过全限定名**com.opensource.kms.LogService.logServicePointCut1(** )

希望这对某人有帮助！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-04T19:26:27.423

You should change the aspectJWeaver version to be 1.6.x

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-07T13:07:36.673

我相信你需要在前面加上另一个通配符：

```
@Pointcut("execution(* get*())") 
```

将其更改为：

```
@Pointcut("execution(* *get*())") 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-08-23T06:52:45.210

添加这个 Maven 依赖项。这将解决您的问题。

将版本更改为**1.6.12**

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-03-13T14:22:23.227

这是依赖关系的问题。应使用以下完全相同版本的 jar 或依赖项来避免此类问题：

```
<dependency>
<groupId>aspectj</groupId>
<artifactId>aspectjrt</artifactId>
<version>1.5.2</version>
</dependency>

<dependency>
<groupId>org.aspectj</groupId>
<artifactId>aspectjweaver</artifactId>
<version>1.8.10</version>
</dependency>

<dependency>
<groupId>asm</groupId>
<artifactId>asm</artifactId>
<version>3.3.1</version>
</dependency>

<dependency>
<groupId>aopalliance</groupId>
<artifactId>aopalliance</artifactId>
<version>1.0</version>
</dependency>

<dependency>
<groupId>cglib</groupId>
<artifactId>cglib</artifactId>
<version>2.2.2</version>
</dependency> 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-01-24T09:31:12.643

我也遇到了类似的问题，@Before 建议不接受 @Pointcut 方法名称作为参数。我通过将依赖项版本更改为：

```
<dependency>
    <groupId>org.aspectj</groupId>
    <artifactId>aspectjrt</artifactId>
    <version>1.6.11</version>
</dependency>

<!-- https://mvnrepository.com/artifact/org.aspectj/aspectjweaver -->
<dependency>
    <groupId>org.aspectj</groupId>
    <artifactId>aspectjweaver</artifactId>
    <version>1.6.11</version>
</dependency> 
```

它现在对我来说工作正常。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-05-22T17:55:27.220

我遇到了这个问题，因为项目是在 Java 1.6 中编译的，但是 tomcat 服务器是在 Java 8 中启动的。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-01-08T19:09:31.840

请使用以下 Maven 依赖项 - 我希望它会起作用

1.  [方面jrt 1.8.14](https://mvnrepository.com/artifact/org.aspectj/aspectjrt)
2.  [aspectjweaver 1.8.14](https://mvnrepository.com/artifact/org.aspectj/aspectjweaver)

```
<dependency>
    <groupId>org.aspectj</groupId>
    <artifactId>aspectjrt</artifactId>
    <version>1.8.14</version>
</dependency>

<dependency>
    <groupId>org.aspectj</groupId>
    <artifactId>aspectjweaver</artifactId>
    <version>1.8.14</version>
    <scope>runtime</scope>
</dependency> 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2012-08-03T08:43:53.000

将 aspectjeaver 版本更改为最新版本并部署它...

# javascript - 有没有办法在 IE7 或 IE8 中使用 Canvas？

> ID：10482570
> 
> 赞同：6
> 
> 时间：2012-05-07T13:01:07.537
> 
> 标签：javascript, html, internet-explorer, canvas

是否有任何解决方法可以在 IE7 和 IE8 中使用“Canvas”标签？请告诉我。

```
<input type="text" id="textSign" value="Sign" />
<input type="button" onclick="javascript:return changeSign();" value="changeSign" />
<canvas id="e" width="150" height="100"></canvas>
<script type="text/javascript">
var textSign = document.getElementById("textSign").value;
      function changeSign() {
             textSign = document.getElementById("textSign").value;
                    var canvas = document.getElementById("e");
                    var context = canvas.getContext("2d");
                    context.fillStyle = "#4c4c4c";
                    context.font = "30px Giddyup Std";
                    context.fillText (textSign , 20, 50);
                }
            </script>
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T13:06:53.700

**是**的，有一个项目可以在旧版本的 IE（7 和 8）上*模拟画布 API。*

您可以在[此处](http://code.google.com/p/explorercanvas/)找到它，只需包含 JavaScript 文件并继续支持画布即可。

请注意，这是在 IE 之上的另一层 JavaScript 代码（并且解析 JavaScript 的速度并不出名......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T13:06:20.043

是的，有：[https ://developers.google.com/chrome/chrome-frame/](https://developers.google.com/chrome/chrome-frame/)

但与任何现代 Web 技术一样，您必须在开发时进行大量测试。并且根据您的部署位置，您可能会被禁止使用它（仍然强加 IE7 的系统管理员可能有奇怪的要求）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-07T13:07:08.057

不可以。Canvas 元素仅在 IE9 中受支持。

# c# - 未找到 UserControl 中的自定义 RoutedEvent

> ID：10482572
> 
> 赞同：2
> 
> 时间：2012-05-07T13:01:16.013
> 
> 标签：c#, wpf, xaml, user-controls, routedevent

我在使用 XAML 设计器时遇到了一些问题。

我有一个代表自定义 ProgressBar 的 UserControl：只是一个基于状态的带有一些颜色的旋转圆圈。它扩展了 UserControl，我已将本地命名空间添加到 XAML 文件并将其命名为“本地”。

```
<UserControl x:Class="MyControls.ProgressControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:MyControls"> 
```

在代码隐藏中，我创建了一个自定义事件，如下所示：

```
public static readonly RoutedEvent NotStartedEvent = EventManager.RegisterRoutedEvent("NotStartedEvent",RoutingStrategy.Bubble,typeof(RoutedEventHandler),typeof(ProgressControl));

// .NET wrapper
public event RoutedEventHandler NotStarted
{
    add { AddHandler(NotStartedEvent, value); }
    remove { RemoveHandler(NotStartedEvent, value); }
} 
```

在我的 XAML 文件中，我有一个 EventTrigger 来连接一些动画：

```
<UserControl.Triggers>
    <EventTrigger RoutedEvent="local:ProgressControl.NotStartedEvent">
        <StopStoryboard BeginStoryboardName="rotateAnimation"/>
        <BeginStoryboard Storyboard="{StaticResource notStartedStateAnimation}"/>
    </EventTrigger>
</UserControl.Triggers> 
```

然而，这给了我一个错误：在“UserControl”类型中找不到事件“NotStartedEvent”。

我在网上搜索过，但找不到我做错了什么，这一定是一些愚蠢的细节。例如是因为 EventTrigger 在 UserControl.Triggers 下吗？

我已经尝试过多次清理和重建项目，并且效果很好。只有 XAML 设计器给了我这个错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T13:24:12.510

试试这个：

```
<UserControl.Triggers>
    <EventTrigger RoutedEvent="{x:Static local:ProgressControl.NotStartedEvent}">
        <StopStoryboard BeginStoryboardName="rotateAnimation"/>
        <BeginStoryboard Storyboard="{StaticResource notStartedStateAnimation}"/>
    </EventTrigger>
</UserControl.Triggers> 
```

# delphi - 列聚合的 TDBGrid 状态栏

> ID：10482573
> 
> 赞同：5
> 
> 时间：2012-05-07T13:01:16.897
> 
> 标签：delphi, c++builder, vcl, tdbgrid

得到一个包含一些数字列的网格，它需要为每一列实现一个聚合（总和或计数）并将其显示在相应的列下。

我知道某些套件（DevExpress 或其他）已经“默认”实施。但是有一种方法可以使用默认控件或 JVCL 来实现吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T14:11:21.940

既然您提到[`JEDI VCL`](http://jvcl.delphi-jedi.org/)了，请尝试查看该[`TJvDBGridFooter`](http://wiki.delphi-jedi.org/wiki/JVCL_Help%3aTJvDBGridFooter)组件。它是[`TJvDBGrid`](http://wiki.delphi-jedi.org/wiki/JVCL_Help%3aTJvDBGrid)控件的状态栏。

*   您可以修改[`OnDisplayText`](http://wiki.delphi-jedi.org/wiki/JVCL_Help%3aTJvDBGridFooter.OnDisplayText)事件中显示的文本
*   您可以计算[`OnCalculate`](http://wiki.delphi-jedi.org/wiki/JVCL_Help%3aTJvDBGridFooter.OnCalculate)事件中的聚合字段
*   您可以跟随网格列滚动，调整大小或修改面板的外观

检查 JVCL`..\examples\JvUltimDBGrid`文件夹中的演示项目以查看它的运行情况。

# php - 注意：未定义的变量：mysqli in... 在第 63 行

> ID：10482574
> 
> 赞同：0
> 
> 时间：2012-05-07T13:01:18.147
> 
> 标签：php, ajax, mysqli

我收到了这个错误，我真的不知道该怎么办。我很想构建一个“表单”，您可以使用它向数据库添加信息。因为我不想在我的数据库中出现双重记录，所以我正在使用 AJAX 检查一些字段。

在这里，您可以看到我收到错误的班级代码。（我使用 mysqli - 语言）

```
<?php
class Places {

    private $m_sName;
    private $m_sStreet;
    private $m_sHouseNumber;
    private $m_sCity;
    private $m_sCategory;

    public function __set($p_sProperty, $p_vValue) {
        switch($p_sProperty) {
            case "Name" :
                $this -> m_sName = $p_vValue;
                break;
            case "Street" :
                $this -> m_sStreet = $p_vValue;
                break;
            case "HouseNumber" :
                $this -> m_sHouseNumber= $p_vValue;
                break;
            case "City" :
                $this -> m_sCity = $p_vValue;
                break;
            case "Category" :
                $this -> m_sCategory = $p_vValue;
                break;
        }
    }

    public function __get($p_sProperty) {
        $vResult = null;
        switch($p_sProperty) {
            case "Name" :
                $vResult = $this -> m_sName;
                break;
            case "Street" :
                $vResult = $this -> m_sStreet;
                break;
            case "HouseNumber" :
                $vResult = $this -> m_sHouseNumber;
                break;
            case "City" :
                $vResult = $this -> m_sCity;
                break;
            case "Category" :
                $vResult = $this -> m_sCategory;
                break;
        }
        return $vResult;
    }

    public function addPlaces() 
    {
        include_once("connection.php");
            $sSql = "INSERT INTO tblPlaces
                (Name, 
                Street, 
                HouseNumber, 
                City, 
                Category) 
                VALUES 
                ('" . $mysqli -> real_escape_string($this -> m_sName) . "', 
                '" . $mysqli -> real_escape_string($this -> m_sStreet) . "', 
                '" . $mysqli -> real_escape_string($this -> m_sHouseNumber) . "', 
                '" . $mysqli -> real_escape_string($this -> m_sCity) . "', 
                '" . $mysqli -> real_escape_string($this -> m_sCategory) . "')";

        if (!$mysqli -> query($sSql))
        {
            throw new Exception("Er is iets mis gelopen bij het toevoegen van een plaats");
        }

    }

    public function placeAvailable()
    {

        include("connection.php");

        $sSql= "select Street from tblPlaces
                where Street = '".$this->m_sStreet."' AND HouseNumber = '".$this->m_sHouseNumber."'";

        $vResult=$mysqli->query($sSql);
        if($vResult->num_rows>0)
        {

            return(false);  
        }
        else
        {

            return(true);
        }

        $mysqli->close();   
    }
}
?> 
```

在我的连接文件中，我有以下代码：

```
<?php

$localhost = "localhost";
$user = //user hidden
$password = //paswoord hidden 
$database = //database hidden

$mysqli = new mysqli($localhost, $user, $password,$database);

if ($mysqli->connect_error) {
    throw new Exception("Geen Databankconnectie");
}
?> 
```

有没有人有办法解决吗？或者您是否还想查看我的 ajax 文件和 .php 页面？谢谢

编辑

这是我的 add.php 文件（至少所有重要的东西）

```
<?php
$feedback = "";
include_once ('assets/classes/places.class.php');
if (isset($_POST['knop'])) {
    try 
    {
        $place1 = new Places;
        $place1 -> Name = $_POST['Name'];
        $place1 -> Street = $_POST['Street'];
        $place1 -> HouseNumber = $_POST['HouseNumber'];
        $place1 -> City = $_POST['City'];
        $place1 -> Category = $_POST['Category'];

            if($place1->placeAvailable())
            {
                $place1 -> addPlaces();
                $feedback = $place1 -> Name . ", is met succes toegevoegd!";
            }
            else
            {
                $feedback = "Sorry";            
            }
    } 
    catch (Exception $e) 
    {
        $feedback = $e -> getMessage();
    }
}

?>
<!DOCTYPE html>
<html lang="en">
    <head>

        <meta charset="utf-8" />
        <!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
        Remove this if you use the .htaccess -->
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
        <title>Search | FoodSquare</title>
        <link rel="stylesheet" href="assets/css/reset.css" />
        <link rel="stylesheet" href="assets/css/style.css" />
        <script type="text/javascript" src="assets/javascript/geolocation.js"></script>
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>

        <meta name="description" content="" />
        <meta name="viewport" content="width=device-width; initial-scale=1.0" />
        <!-- Replace favicon.ico & apple-touch-icon.png in the root of your domain and delete these references -->
        <link rel="shortcut icon" href="/favicon.ico" />
        <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function(){
            $("#klik").click(function(){
            var naam = $("#naam").val();
            var plaats = $("#straat").val();
            var nummer = $("#huisnummer").val();
            var block = "block";

        $.ajax({
            type: "POST",
            url: "assets/ajax/check_place.php",
            data: { eet:naam, place:plaats, number:nummer }
        }).done(function( msg ) {

            if(msg.status != "error")

                {
                    if(msg.available == "yes")
                    {
                        $(".feedback").fadeOut();
                    }
                    else
                    {
                        $(".feedback span").text(msg.message);
                        $(".feedback").fadeIn();
                        $(".feedback").css("display", block);
                    }
                }

        });
        return(false);

    })

});
</script>
    </head>
    <body> 
```

这是我的 ajax 文件

```
<?php
ini_set('display_errors', 1);
    include_once('../classes/places.class.php');
try
{
    $oPlace = new Places();
    $oPlace->Name = $_POST['eet'];
    $oPlace->Street = $_POST['place'];
    $oPlace->HouseNumber = $_POST['number'];
    if($oPlace->placeAvailable())
    {
        $feedback['status'] = "success";
        $feedback['available'] = "yes";
        $feedback["message"] = "Go ahead, street is available";
    }   
    else
    {
        $feedback['status'] = "success";
        $feedback['available'] = "no";
        $feedback["message"] ="De zaak " . "'" . $_POST['eet'] . "'". " is reeds op dit adres gevestigd." ;
    }
}
catch(exception $e)
{
    $feedback['status'] = "error";
    $feedback["message"] =$e->getMessage();

}
header('Content-type: application/json');
echo json_encode($feedback);
?> 
```

好的，我尝试了您的几个解决方案，但没有一个有效。我可能会是我的错，但我想出了一些东西，我用 INCLUDE 替换了 INCLUDE_ONCE，现在我可以在我的数据库中添加一些东西，但只有在没有 AJAX 的情况下，当我使用 AJAX 时，表单会检查值是否已经在数据库中但是当我添加它们，没有任何反应。我也没有收到任何错误。我还从 ajax 收到正确的信息。有人可以帮忙吗？谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T13:04:57.683

您不应该在方法声明中使用包含。这是一个不好的做法。首先在构造函数中将 MySQLi 对象作为参数传递：

```
include_once("connection.php");
$place = new Places($mysqli) {
    $this->mysqli= $mysqli;
} 
```

然后你会像这样在你的课堂上使用它；

```
$this->mysqli->real_escape_string 
```

代替

```
$mysqli->real_escape_string 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T13:23:30.797

常见的解决方案是在文件中包含实际使用这些连接的连接定义（换句话说，在高级代码中）——而不是在定义了一些与 DB 相关的函数和类的库中。

文件本身通常是一个[单例](http://php.net/manual/en/language.oop5.patterns.php)类，构造函数和 __clone 方法都是私有的。像这样：

```
class DbConnection {
  private static $connection;
  private function __construct() {} // not needed in this example, really, as we only need a connection, which is a stable resource.
  private function __clone() {} // nothing to see here, move on!
  private function __wakeup() {} // ...and I really mean it!
  public static function getConnection() { 
    if (!isset(self::$connection)) { 
      self::$connection = new mysqli(...);
      // and so created was a connection for all creatures, big and small, 
      // to share and enjoy!
    }
    return self::$connection; 
  }
} 
```

然后，您可以在每次需要时安全地使用连接，方法是使用...

```
 $conn = DbConnection::getConnection(); 
```

...仅包含该类文件一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T13:03:40.160

一个快速而肮脏的解决方案是使用数据库访问在您的方法中添加全局 $mysqli。像这样

```
 include_once("connection.php");
    global $mysqli;
        $sSql = "INSERT INTO tblPlaces
            (Name, 
            Street, 
            HouseNumber, 
            City, 
            Category) 
            VALUES 
            ('" . $mysqli -> real_escape_string($this -> m_sName) . "', 
            '" . $mysqli -> real_escape_string($this -> m_sStreet) . "', 
            '" . $mysqli -> real_escape_string($this -> m_sHouseNumber) . "', 
            '" . $mysqli -> real_escape_string($this -> m_sCity) . "', 
            '" . $mysqli -> real_escape_string($this -> m_sCategory) . "')";

    if (!$mysqli -> query($sSql))
    {
        throw new Exception("Er is iets mis gelopen bij het toevoegen van een plaats");
    }

}
?> 
```

脏，我的意思是***真的***很脏！- 但是，如果要以其他方式制作，那么您制作它的方式将需要进行相当大的重组。

# java - 访问数组的类型不匹配

> ID：10482576
> 
> 赞同：0
> 
> 时间：2012-05-07T13:01:33.493
> 
> 标签：java, multidimensional-array

我在访问数组中的值时遇到问题，目的是从我试图获得最接近匹配的值中减去数组第 1 列中保存的值。我收到**类型不匹配错误无法从 double 转换为 int**

顺便说一句，我什至确定我是否以正确的方式解决问题。我有一张表，我在其中检查第 1 列中的值是否与我正在查找的值最接近，而该行中的其他列是需要返回的值。（如果你玩过的话，想想有点像 AD&D 中的一些桌子）

```
// Column 1 ability score,  2 Damage mod, 3 Lift , 4 carry, 5 drag
double arr [][] = {{1.01,-7,11,9,28},
                   {1.51,-6,25,12,63},
                   {2.01,-6,38,14,96},
                   {2.51,-5,51,14,96},
                   {3.01,-5,51,17,128}};

public double EXTcha(double cha) {
    double closestNo = 0;
    double lookingFor = cha;
    int reqIndex = 0;
    double i;

    for (int row=0; row < arr.length; row++) {
        System.out.println(row+"row \t");
        double currentDiff = (lookingFor-arr[i][0]);
        System.out.println(currentDiff+"diff \t");
        if (currentDiff < closestNo) {
            closestNo = currentDiff;
            System.out.println(closestNo+"closest \t");
            reqIndex = row;
        };
    }

    for (int column=0; column<arr[reqIndex].length;column++) {
        System.out.println(arr[reqIndex][column]+"\t");
    }

    return extcha;
} 
```

## **这是进行建议更改后其他人的代码**

```
// Column 1 ability score,  2 Damage mod, 3 Lift , 4 carry, 5 drag
double arr [][] = {{1.01,-7,11,9,28},
                   {1.51,-6,25,12,63},
                   {2.01,-6,38,14,96},
                   {2.51,-5,51,14,96},
                   {3.01,-5,51,17,128}};

public double EXTcha(double cha) {
    double closestNo = 50;
    double lookingFor = cha;
    int reqIndex = 0;

    for (int row=0; row < arr.length; row++) {
        System.out.println(row+"row \t");
        double currentDiff = Math.abs(lookingFor-arr[row][0]);
        System.out.println(currentDiff+"diff \t");
        if (currentDiff < closestNo){
            closestNo = currentDiff;
            System.out.println(closestNo+"closest \t");
            reqIndex = row;
        };
    }

    for (int column=0; column<arr[reqIndex].length;column++) {
        System.out.println(arr[reqIndex][column]+"\t");
}

    return extcha;
} 
```

我遇到了另一个初始化`closestNo`为 0 的问题，这意味着当我对它进行测试时`(currentDiff < closestNo)`总是小于所以我将它设置为 50，它总是大于第 1 列中的双精度值。

我希望这可以帮助某人

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T13:07:54.803

您已声明`i`为双精度，然后尝试将其用作（整数）数组索引。我想你想要`double currentDiff = (lookingFor-arr[row][0]);`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T13:07:40.520

您的算法中有（至少）一个错误，这里：

```
double currentDiff = (lookingFor-arr[i][0]); 
```

要获得最接近的匹配，您应该在此处使用差异的绝对值。否则，您很可能最终总是“匹配”最后一行（具有最高值），因为这将在上面的表达式中给出最小的*否定结果。*

（而且，正如其他人迅速提到的那样，您应该使用`int`s 来索引数组）。

总体而言，您的方法非常低级且脆弱。对于这项工作，您最好使用一个[`NavigableMap`](http://docs.oracle.com/javase/7/docs/api/java/util/NavigableMap.html)实现，例如，其中键是行中的第一个元素，值 a包含每行中的其余数字，例如：[`TreeMap`](http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html)[`List`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html)

```
NavigableMap<Double, List<Double>> characteristics = 
        new TreeMap<Double, List<Double>>();
characteristics.put(1.01, Arrays.asList(-7.0, 11.0, 9.0, 28.0));
...
Double key = characteristics.floorKey(cha);
// Null check omitted for brevity
List<Double> matchingCharacteristics = characteristics.get(key); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T13:07:57.977

`arr[i]`需要`i`是数组的整数索引，但您声明`i`为`double`.

我想你想要`arr[row]`，即`double currentDiff = (lookingFor-arr[row][0]);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T13:08:43.123

您正试图在索引 i: 处访问您的数组，`arr[i][0]`但 i 是双精度数。我认为你应该学习面向对象的编程和面向对象的设计，这样会更容易。

# android - 一分钟定期服务

> ID：10482583
> 
> 赞同：3
> 
> 时间：2012-05-07T13:02:18.323
> 
> 标签：android, android-service

执行周期性任务的正确方法是什么？我的实现似乎无法正常工作：当屏幕打开并且我正在使用电话时，服务方法会及时完美地运行。但是，当手机被锁定时，服务会以非常大的随机间隔运行（例如：10:30 10:32 10:45 10:46 10:49 11:00...）这是代码：

主要服务类别：

```
@Override
public void onCreate() {
    pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
    mNM = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);
    // Display a notification about us starting.  We put an icon in the status bar.
    showNotification();
    mHandler.postDelayed(periodicTask, ONE_MINUTE); 
}

private Handler mHandler = new Handler();
private static final int ONE_MINUTE = 60000;

private Runnable periodicTask = new Runnable() {

    public void run() {
        try{
            wakelock = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "My Tag");    
            wakelock.acquire();
            Log.v("PeriodicTimerService","Awake");
            getValues();
            writeDB();
            writeLog();
            mHandler.postDelayed(periodicTask, ONE_MINUTE);
        }
        finally{
            wakelock.release();
        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:54:48.003

如果您需要定期任务在手机处于睡眠状态时每分钟准确运行，那么您别无选择：您必须使用 AlarmManager。

# nhibernate - order columns by name when using SchemaExport

> ID：10482584
> 
> 赞同：3
> 
> 时间：2012-05-07T13:02:18.410
> 
> 标签：nhibernate, nhibernate-mapping, fluent-nhibernate-mapping, mapping-by-code

i have a legacy db structure like

```
table t1
(
  c0 bigint, // pk
  c10 bigint,  // deleted flag
)

table t2
(
  c0 bigint, // pk
  c1 bigint, // fk to t1.c0
  c10 bigint,  // deleted flag
) 
```

and classes

```
class Entity
{
    public virtual long Id { get; private set; }
    public virtual long Property { get; set; }
}

class Parent : Entity
{
    public virtual ICollection<Child> Childs { get; private set; }
}

class Child : Entity { } 
```

After mapping it with MappingByCode or FNH, SchemaExport will create the columns in the wrong order.

```
table t2
(
  c0 bigint, // pk
  c10 bool,  // deleted flag
  c1 bigint, // fk to t1.c0
) 
```

How can i make sure the columns are created in ascending order?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T06:28:02.653

在挖掘了源代码后，我想出了这个

```
configuration.BeforeBindMapping += (sender, e) =>
{
    // change to foreach if more than one classmapping per file
    var c = e.Mapping.RootClasses[0];
    c.Items = 
        // sort everything with a column (simple property, reference, ...)
        c.Items.OfType<IColumnsMapping>().OrderBy(cm => cm.Columns.First().name)
        // concat everything that has no column (collection, formula, ...)
        .Concat(c.Items.Where(o => !(o is IColumnsMapping))).ToArray();
}; 
```

# math - per fragment lighting and window to camera transforms

> ID：10482585
> 
> 赞同：0
> 
> 时间：2012-05-07T13:02:19.890
> 
> 标签：math, opengl, glsl, opengl-4

我使用窗口到相机转换实现了每个片段的照明和光衰减：

```
vec4 ndcPos;
ndcPos.xy = ((gl_FragCoord.xy / windowSize.xy) * 2.0) - 1.0;
ndcPos.z = (2.0 * gl_FragCoord.z - gl_DepthRange.near - gl_DepthRange.far) / (gl_DepthRange.far - gl_DepthRange.near);
ndcPos.w = 1.0;

vec4 clipPos = ndcPos / gl_FragCoord.w;

vec3 cameraPos = vec3(clipToCameraMatrix * clipPos); 
```

然后我使用 lightPos 和 cameraPos 来计算光照。lightPos 在世界空间中有一个固定的位置。我有 ViewMatrix 来处理 fps 风格的相机和 ModelMatrix。早些时候我使用顶点位置而不是窗口到相机的变换，一切都很好。现在，当我使用相机在物体周围移动时，我得到了不正确的照明。在上传到片段着色器之前，lightPos 乘以 ViewMatrix。

```
glUniform3fv(dirToLightUniformLocation, 1, glm::value_ptr(ViewMatrix * lightPos)); 
```

我不知道我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T08:07:07.810

你有一个问题：

> ```
> ndcPos.z = (2.0 * gl_FragCoord.z - gl_DepthRange.near - gl_DepthRange.far) / (gl_DepthRange.far - gl_DepthRange.near); 
> ```

除非您使用的是正交投影，否则 gl_FragCoord.z 不会线性映射到深度范围，这是由 w 分割引起的。尽管可以（并且不难）对其进行反向投影，但我建议您只需使用额外的可变输入/输出将视图空间眼睛位置从顶点着色器传递到片段着色器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T13:15:16.140

灯光有什么问题？当您移动视图时，照明是否会保持静止？（即镜面高光永远不会移动）。

你的 lightPos 应该是标准化的 Vec3：lightPosition - (worldMatrix * vertexPosition)

# magento - 从magento中的子类别生成树

> ID：10482589
> 
> 赞同：-2
> 
> 时间：2012-05-07T13:02:47.877
> 
> 标签：magento

![类别列表](../Images/bda8253c98b88e2db30de56dcf97eff9.png)

我有子类别名称及其 ID

如图所示

前马扎里沙里夫和赫拉特

如图所示，如何从子类别生成树？？？

我想生成与图像相同的树

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:41:42.133

使用下面的代码，它会帮助你。

```
$_rootCatId     = 2;
$_rootCategory  = Mage::getModel('catalog/category')->load($_rootCatId);
$_catName       = $_rootCategory->getName();
if($_rootCategory->hasChildren()) 
{
$_collection = Mage::getResourceModel('catalog/category_collection')
                ->addAttributeToFilter('is_active', 1)
                ->addAttributeToSort('position', 'asc')
                ->joinUrlRewrite()
                ->addIdFilter($_rootCategory->getChildren())
                ->load();

foreach($_collection AS $_sub)
{
    $_subCat    = Mage::getModel('catalog/category')->load($_sub->getId());

    if($_subCat->hasChildren()) 
    {   
        echo '<li class="leve10 nav-'. $_subCat->getId() .'">';
            echo '<a id="subCatLink">';
                echo '<span>'. $this->htmlEscape($_subCat->getName()) .'</span>
                </a>
         </li>';
        echo '<ul id="subCatUl" style="padding:0px 13px;">';
        $__collection = Mage::getResourceModel('catalog/category_collection')
                ->addAttributeToFilter('is_active', 1)
                ->addAttributeToSort('position', 'asc')
                ->joinUrlRewrite()
                ->addIdFilter($_subCat->getChildren())
                ->load();

        foreach($__collection AS $__sub)
        {
            $__subCat   = Mage::getModel('catalog/category')->load($__sub->getId());
            echo '<li class="leve20 nav-'. $__subCat->getId() .'">
                    <a href="'. $this->getCategoryUrl($__subCat) .'">
                     <span>'. $this->htmlEscape($__subCat->getName()) .'</span>
                    </a>
                 </li>';
        }
        echo '</ul>';
    }
    else
    {
        echo '<li class="leve10 nav-'. $_subCat->getId() .'">
            <a href="'. $this->getCategoryUrl($_subCat) .'">
             <span>'. $this->htmlEscape($_subCat->getName()) .'</span>
            </a>
         </li>';
    }
}
} 
```

# ios - 音频和视频文件的通用播放方式

> ID：10482595
> 
> 赞同：0
> 
> 时间：2012-05-07T13:03:12.987
> 
> 标签：ios, cocoa-touch, avaudioplayer

我的文档目录中有多个文件，文件是`mp3`,`mp4`和`avi`格式类型。我需要在播放器中播放它们中的任何一个，而不用担心它的格式类型。对于音频文件，我使用这种方法：

```
//Play the file
    NSURL *fileUrl = [NSURL fileURLWithPath:path];

                  NSError *err;
                  audioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:fileUrl error:&err];

                  if (audioPlayer == nil)
                  NSLog(@"%@",[err description]);
                  else
                  [audioPlayer play]; 
```

所有音频/视频文件（例如 Microsoft 媒体播放器）是否有任何通用方式/播放器。

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T13:46:38.090

你可以使用一个`MPMoviePlayerViewController`组件。示例（这会将控制器显示为模态）：

```
MPMoviePlayerViewController *player = [[MPMoviePlayerViewController alloc] initWithContentURL:url];
[self.navigationController presentModalViewController:player animated:YES]; 
```

您可以在此处找到文档：http: [//developer.apple.com/library/ios/#documentation/mediaplayer/reference/mpmovieplayerviewcontroller_class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/mpmovieplayerviewcontroller_class/Reference/Reference.html)

# jquery - Jquery Autocomplete 在搜索中忽略破折号

> ID：10482596
> 
> 赞同：0
> 
> 时间：2012-05-07T13:03:12.993
> 
> 标签：jquery, coldfusion, autocomplete

我有一个自动完成功能，适用于您在输入字段中输入的任何字母组合。但是现在我希望它忽略我正在搜索的结果中的破折号。

我在输入框中输入

ea1

它会发现

ea-1

自动完成代码

```
$("#customer"+myIndex).autocomplete({
         source: "AS_userLookup.cfm",
         select: function(e, ui){ 
```

我的数据库查询

```
 SELECT roomname        
 From sec_rooms_new
 where lower(roomname) like '%#lcase(url.term)#%' and dontshow = 0 
```

我会在 jquery 中执行还是在 db 查询中执行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T13:11:36.033

将您的查询修改为：

```
SELECT
    roomname        
FROM
    sec_rooms_new
WHERE
    REPLACE(LOWER(roomname), '-', '') LIKE '%#lcase(url.term)#%'
    AND dontshow = 0 
```

该`REPLACE` [函数](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_replace)将任何出现的 替换`-`为空字符串。这意味着`ea-1`成为`ea1`并因此在您搜索时返回`ea1`。

使用此查询可能会很慢，因为每次执行它时，数据库都会对所有行的值应用`REPLACE`and`LOWER`函数。`roomname`最好创建一个额外的列来存储准备好的值`roomname`（因此已经应用了`REPLACE`and`LOWER`函数）。然后你可以在这个列上搜索，这样会快很多。

还有一件事：根据您的设置（列类型和字符集）`LIKE`可能已经不区分大小写。这意味着您可以`LOWER`从语句中删除该函数`WHERE`，这将使查询更快。[在MySQL 文档](http://dev.mysql.com/doc/refman/5.5/en/case-sensitivity.html)中阅读有关它的更多信息。

# reporting-services - SSRS 2008 中的报表参数位置

> ID：10482600
> 
> 赞同：0
> 
> 时间：2012-05-07T13:03:25.007
> 
> 标签：reporting-services, ssrs-2008

![在此处输入图像描述][1]我在 SQL Server Reporting Services 2008 中有一些报告，它们向用户询问参数，例如开始/结束日期或在数据库中搜索的姓氏等。我只是按照设计报告时的基础知识，以及在构建和部署之后，我将 URL 提供给我的用户。现在，用户抱怨说，在报告要求参数时，用户看不到报告的名称，所以既然有几个，当她在浏览器中返回页面时，她不知道这是哪个报告，除非她查看 URL（如果她没有先运行它，就会发生这种情况）。

最重要的是，我希望报告的标题高于参数，但还没有弄清楚如何做到这一点。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:06:20.310

你不能。参数块固定在页面上。

但是，URL 应该无关紧要，因为报告的名称在文件夹视图中：我希望标题与报告的名称相匹配......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T14:13:35.650

报告的名称是 ssrs 2008 R2，显示为网页标题。即使报告尚未运行且只有参数可见。（在 ssrs 2005 中，它没有显示为网页标题。我不知道它是否是 R2 特定的功能。）网页标题应该在浏览器的某处显示（它取决于浏览器；选项卡式浏览器通常显示它在选项卡标题上）。 ![在选项卡式浏览器中查看的 ssrs 2008 R2 报告示例，标题为 ListingReclamationOperation](../Images/756d76083c602038b9790f9cbb2f9323.png) 不幸的是，确实是报告文件名被用作标题。看起来除了文件名之外没有显示标题的选项。

（非标签浏览器通常在其窗口标签中显示网页标题。） ![在非选项卡式浏览器中查看的 ssrs 2008 R2 报告示例，标题为 ListingReclamationOperation](../Images/0dd84f6968603c04f5cb6a5101b58c10.png)

# ruby - Ruby - 查找字符串中最长的 3 个单词

> ID：10482604
> 
> 赞同：1
> 
> 时间：2012-05-07T13:03:33.823
> 
> 标签：ruby, arrays, string

我希望能够从字符串中获取 3 个最长的单词。有没有一种巧妙的方法可以做到这一点而无需进入数组等？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-07T13:07:42.743

```
>> str = 'Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
    tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
    quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.'
>> str.split.map { |s| s.gsub(/\W/, '') }.sort_by(&:length)[-3..-1]
=> ["adipisicing", "consectetur", "exercitation"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T13:09:26.500

`"some string with words that are of different length".split(/ /).sort_by(&:length).reverse[0..2]`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-11T13:49:28.660

从 Ruby 2.2 开始， Enumerable 、`max_by`和采用可选参数，允许您指定将返回多少个元素。`min_by``max``min`

```
str.scan(/[[:alnum:]]+/).max_by(3, &:size) 
# => ["exercitation", "consectetur", "adipisicing"] 
```

# java - IntelliJ IDEA GUI builder – 不生成 Java 代码

> ID：10482610
> 
> 赞同：13
> 
> 时间：2012-05-07T13:03:57.707
> 
> 标签：java, user-interface, intellij-idea, code-generation, gui-builder

我在 IntelliJ IDEA GUI 设计器中设计了我的 GUI 表单，并选择了[Project Settings → GUI Designer](http://www.jetbrains.com/idea/webhelp/gui-designer.html)中的单选按钮来生成源代码而不是`.class`文件，但我`.java`的代码文件如下所示：

```
public class PovRayEmptyProjectWizardPanelVisual {
    private JTextField textField1;
    private JTextField textField2;
    private JTextField textField3;
    private JButton button1;
} 
```

就是这样——没有生成创建 GUI 的代码。如何手动触发此类代码生成，以便我可以`.java`使用 Maven 编译生成的文件？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-07T14:08:14.540

源代码生成于`Build`| `Make`. 如果您在外部构建，IDEA GUI 表单可以从 Ant（`javac2`IDEA 提供的任务）或[Maven](http://www.glxn.net/?p=279)编译。

# ruby-on-rails - 使用 to_json 函数时的 RoR，如何在其中打包额外的信息

> ID：10482614
> 
> 赞同：0
> 
> 时间：2012-05-07T13:04:33.150
> 
> 标签：ruby-on-rails, json

最近，我遇到了一个问题。

我想使用 Json 表单在 Ruby on Rails 中传输模型信息。原始功能将仅封装此模型中的所有属性。但是这个模型有一个子模型。由 has_many 定义链接。

如果我需要 to_json 函数可以将子模型属性封装在里面。我可以做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T13:17:07.887

例如，您可以采用另一种方法并使用[JSON 构建器](https://github.com/dewski/json_builder)。或者只是覆盖`to_json`要更改默认行为的模型的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-06T13:56:05.230

要在 ActiveRecord 模型的 JSON 中包含/排除属性，请覆盖该`as_json`方法。

```
def as_json(opts)
  super(opts).merge(
    "other_1" => "Some value",
    "other_2" => self.get_other_value
  )
end 
```

调用 super 将允许您包含所有属性的标准 JSON，然后合并其他属性。或者只是为属性构造一个哈希。

# iphone - 如何使用 Objective C 在另一个方法中调用 MKAnnotation 方法

> ID：10482624
> 
> 赞同：0
> 
> 时间：2012-05-07T13:05:24.060
> 
> 标签：iphone, objective-c

```
-(MKAnnotationView *)mapView:(MKMapView *)map viewForAnnotation:(id <MKAnnotation>)annotation {

} 
```

`MKAnnotationView`方法用于在地图中显示图标。如何在`-didUpdateToLocation`使用objective-c的方法中调用MKAnnotationView方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:48:57.840

我不确定这是否是您想要的，但是：

这是我为注释编写的类：

.h 文件：

```
#import <Foundation/Foundation.h>
#import <MapKit/MapKit.h>

@interface MyLocation : NSObject <MKAnnotation> {
    NSString *_name;
    NSString *_address;
    CLLocationCoordinate2D _coordinate;
}

@property (copy) NSString *name;
@property (copy) NSString *address;
@property (nonatomic, readonly) CLLocationCoordinate2D coordinate;

- (id)initWithName:(NSString*)name address:(NSString*)address coordinate:(CLLocationCoordinate2D)coordinate;

@end 
```

和 .m 文件：

```
#import "MyLocation.h"

@implementation MyLocation
@synthesize name = _name;
@synthesize address = _address;
@synthesize coordinate = _coordinate;

- (id)initWithName:(NSString*)name address:(NSString*)address coordinate:(CLLocationCoordinate2D)coordinate {
    if ((self = [super init])) {
        _name = [name copy];
        _address = [address copy];
        _coordinate = coordinate;
    }
    return self;
}

- (NSString *)title {
    if ([_name isKindOfClass:[NSNull class]]) 
        return @"Unknown charge";
    else
        return _name;
}

- (NSString *)subtitle {
    return _address;
}

@end 
```

在视图控制器中，我正在调用位置管理器，例如：

```
locationManager = [[CLLocationManager alloc] init];
locationManager.delegate = self;
locationManager.distanceFilter = 10.0; // whenever we move
locationManager.desiredAccuracy = kCLLocationAccuracyHundredMeters; // 100 m
[locationManager startUpdatingLocation]; 
```

然后在位置管理器的委托方法中，我将我的地图设置如下：

```
- (void)locationManager:(CLLocationManager *)manager
    didUpdateToLocation:(CLLocation *)newLocation
           fromLocation:(CLLocation *)oldLocation
{
    [locationManager stopUpdatingLocation];
    //CLLocationCoordinate2D newCoord = { newLocation.coordinate.latitude, newLocation.coordinate.longitude };

    CLLocationCoordinate2D centerPoint = { newLocation.coordinate.latitude, newLocation.coordinate.longitude };
    MKCoordinateSpan coordinateSpan = MKCoordinateSpanMake(0.01, 0.01);
    MKCoordinateRegion coordinateRegion = MKCoordinateRegionMake(centerPoint, coordinateSpan);

    ["your-map-name" setRegion:coordinateRegion];
    ["your-map-name" regionThatFits:coordinateRegion];

CLLocationCoordinate2D cordPoint = { latitude_value, longitude_value };
            MyLocation *annotation = [[MyLocation alloc] initWithName:@"title of the pin" address:@"some sub string" coordinate:cordPoint] ;
            ["your-map-name" addAnnotation:annotation]; } 
```

这就是我解决注释和地图问题的方法..

我希望这有帮助..

# android - 我可以在 viewpager 上修复标签吗？

> ID：10482642
> 
> 赞同：1
> 
> 时间：2012-05-07T13:06:45.900
> 
> 标签：android, tabs, android-viewpager, viewpagerindicator

我已经实现了一个可以在片段之间滑动的 TitlePageIndicator，但是我希望在屏幕底部有固定的选项卡，当用户在片段中滑动时它们不会移动。

我开始以标准方式实现此功能，但意识到我的主机活动不能同时扩展 TabActivity 和 FragmentActivity。做这样的事情的正确方法是什么？我的想法是我必须实现自己的选项卡，而不是使用 TabHost 和 TabWidget。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T09:53:47.717

您可以使用[FragmentTabsPager](http://developer.android.com/resources/samples/Support4Demos/src/com/example/android/supportv4/app/FragmentTabsPager.html)（扩展 FragmentPagerAdapter 的 TabsAdapter）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-20T07:42:59.617

您可以使用 TabLayout 如下

```
 <android.support.v4.view.ViewPager
    android:id="@+id/viewPager"
    android:layout_width="0dp"
    android:layout_height="0dp"
    app:layout_constraintBottom_toBottomOf="parent"
    app:layout_constraintEnd_toEndOf="parent"
    app:layout_constraintStart_toStartOf="parent"
    app:layout_constraintTop_toBottomOf="@+id/toolbar_dialog">

    <android.support.design.widget.TabLayout
        android:id="@+id/pager_tab_strip"
        app:tabMode="fixed"
        app:tabTextColor="@color/gray2"
        app:tabIndicatorColor="@color/gray2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="top" />

</android.support.v4.view.ViewPager> 
```

# hadoop - 最近 SVM 实现被添加到 Mahout 中，我计划使用 SVM。有人试过吗？

> ID：10482646
> 
> 赞同：5
> 
> 时间：2012-05-07T13:06:50.940
> 
> 标签：hadoop, svm, mahout

使用 Hadoop 在 Mahout（使用 Hadoop 的机器学习）中围绕 SVM（支持向量机）发生的任何新发展？最近，SVM 实现被添加到 Mahout 中。我打算使用 SVM。有人试过吗？互联网上提供的信息很少。

任何帮助/指导表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T06:10:52.120

不，Mahout 中没有 SVM 实现。

关于它存在三个 Jira 问题：[Mahout-14](https://issues.apache.org/jira/browse/MAHOUT-14)和[Mahout-334](https://issues.apache.org/jira/browse/MAHOUT-334)已关闭，因为无法修复。[Mahout-232](https://issues.apache.org/jira/browse/MAHOUT-232)是后来分配的，因为早期（2009 年）贡献了一些代码，但它没有工作，所以它没有并入 Mahout。从那时起，Mahout 发生了变化，因此移植代码会很困难，而且如果您查看这个问题，对于它是否以最佳方式解决问题存在一些分歧。

有[一些用于 cascadeSVM 实现的代码，](https://code.google.com/p/cascadesvm/)但训练部分——最难的部分——从未发布过。

有一个在 MPI 而不是 Hadoop 上运行的[并行 SVM 实现。](https://code.google.com/p/psvm/)

[这个旧金山聚会摘要](http://www.meetup.com/sfmachinelearning/events/116497192/)对并行 SVM 的当前技术和问题进行了一些讨论。

# c# - 是否有针对 C#/.NET 的积极维护的 DOM 实现？

> ID：10482649
> 
> 赞同：0
> 
> 时间：2012-05-07T13:06:58.687
> 
> 标签：c#, html, dom

我正在寻找可以在 C# 中用于 HTML5 文档的 DOM 实现。

要求是：

*   解析 HTML5
*   通过某种方式查询 DOM
*   操作 DOM（创建和注入节点、删除节点、移动节点、合并/嵌套其他 DOM）
*   以字符串形式获取操作后的 DOM
*   理想情况下，该库将处于积极开发中

*注意：我知道 Html Agility Pack，但是我很想看看我是否还有其他可用的选项，因为它自 2010 年以来就没有维护过。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:48:45.017

另一种选择是尝试使用同样托管在[GitHub 上的](https://github.com/MindTouch/SGMLReader)[SgmlReader](http://developer.mindtouch.com/SgmlReader)使 html5 格式正确。看起来对 master 分支的最新提交是 11 个月前。

> SGMLReader 是由 Chris Lovett 编写的用于解析 HTML/SGML 文件的多功能 C# .NET 库。

它试图将格式错误的 html 文档转换为格式正确的 xml 文档。然后，您可以根据自己的选择手动操作文档。

# c# - 使用在外部库中声明的结构反序列化对象

> ID：10482653
> 
> 赞同：2
> 
> 时间：2012-05-07T13:07:10.997
> 
> 标签：c#, serialization, json.net

我有一个要反序列化的对象，它在外部库中声明为结构（标记为可序列化）。但是，Json.net 无法反序列化此对象。序列化很好，但反序列化不起作用。我已经尝试将 struct 更改为 class 但它没有帮助。我是否需要在 JsonSerializerSettings 或其他东西中添加一些特殊的东西，或者它不受支持？我已经尝试了那里的几个参数，例如 TypeNameHandling 和 TypeNameAssemblyFormat，但它不起作用。

如所问，一些代码，这是在外部库中声明的：

```
[Serializable]
public struct BarEntry
{
    public RegistryValueKind One;
    public string Two;  
    public string Three;
    public string Four;
    public object Five;
}

[Serializable]
public struct FooEntry
{
    public string One;
    public string Two;
} 
```

在自己的项目中序列化为：

```
Stream stream = System.IO.File.Open(fileName, FileMode.Create);
string json = JsonConvert.SerializeObject(entry, Formatting.None, new   JsonSerializerSettings { PreserveReferencesHandling = PreserveReferencesHandling.Objects });
StreamWriter streamWriter = new StreamWriter(stream);
streamWriter.Write(json);
streamWriter.Flush();
stream.Close(); 
```

在自己的项目中反序列化为：

```
StreamReader streamReader = new StreamReader(input);
string json = streamReader.ReadToEnd();
object returnObject = JsonConvert.DeserializeObject<T>(json);
input.Close();
return returnObject; 
```

自己项目中的所有内容都可以使用此代码正常工作，但是从外部库它无法反序列化对象（来自 BarEntry 和 FooEntry）。

此外 BarEntry 和 FooEntry 都存储在其存储对象的相同属性中：

```
public object Entry { get; set; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T11:08:06.160

您必须将确切的类型发送到 JsonConvert.DeserializeObject，否则无法创建正确的对象，该对象具有从 json 字符串反序列化所需的属性。因此，从外部程序集中加载此类型并将其发送到 Json.NET。像这样的东西：

```
Assembly assembly = Assembly.LoadFile("ExternalAssembly.dll");
Type barEntryType = assembly.GetType("BarEntry");
var returnObject = JsonConvert.DeserializeObject(json, barEntryType); 
```

或引用外部程序集并简单地执行此操作：

```
BarEntry returnObject = JsonConvert.DeserializeObject<BarEntry>(json) 
```

# android - JSON响应更改为没有项目更改

> ID：10482654
> 
> 赞同：0
> 
> 时间：2012-05-07T13:07:15.113
> 
> 标签：android

我来自服务器的 JSON 响应随着用户输入而变化，假设在服务器上当用户添加一个项目时我得到响应为 JSONObject 但当项目超过 1 时响应是 JSONArray 形式。

现在如何处理这些响应以使我的应用程序不被杀死，需要使用检查点吗？

如果有两个项目..

```
"items":{
     "item":[ 
          {
           "item_id":"49623",
           "type":"Products",
           "name":"desktop app",
           "description":"",
           "unit_cost":"162.45",
           "quantity":"1.00",
           "discount":"0.00",
           "discount_type":"Percent",
           "tax1_percent":"0.00",
           "tax2_percent":"0.00"

        },
        {
           "item_id":"52851",
           "type":"Products",
           "name":"",
           "description":"",
           "unit_cost":"5,290.50",
           "quantity":"1.00",
           "discount":"0.00",
           "discount_type":"Percent",
           "tax1_name":{

           },
           "tax1_percent":"0.00",
           "tax1_type":{

           },
           "tax2_name":{

           },
           "tax2_percent":"0.00",
           "tax2_type":{

           }
        } 
```

] }

单品的情况下

```
"items":{
     "item":{
               "item_id":"49623",
                "type":"Products",
                 "name":"desktop app",
        "description":"this  is the software for your desktop system sequerty",
        "unit_cost":"162.45",
        "quantity":"1.00",
        "discount":"0.00",
        "discount_type":"Percent",
        "tax1_name":{

        },
        "tax1_percent":"0.00",
        "tax1_type":{

        },
        "tax2_name":{

        },
        "tax2_percent":"0.00",
        "tax2_type":{

        }
     } 
```

} }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T13:44:55.703

我认为您可以使用 optJSONArray("") 或 optJSONObject("")，它不会引发任何异常，但如果对象的类型不正确，则返回 null。

```
JSONObject items = myJSON.getJSONObject("items");
Object item;
if (items.optJSONArray("item") != null){
//The result isn't null so it is a JSONArray
item = items.optJSONArray("item");
}
else
{
//The result is null so it isn't a JSONArray
item = items.optJSONObject("item");
} 
```

然后，您只需使用“instanceof”按您的意愿使用您的对象：

```
if (item instanceof JSONObject){
// The object is a JSONObject
[... Your code ...]
}
else
{
// The object is a JSONArray
[... Your code ...]
} 
```

# objective-c - 为什么 NSLog() 在方法返回之后什么都不做？

> ID：10482655
> 
> 赞同：-4
> 
> 时间：2012-05-07T13:07:17.197
> 
> 标签：objective-c, return

我注意到当我的方法运行时，控制台上没有打印任何内容：

```
- (BOOL)theTemporyFunction
{
    return YES;
    NSLog(@"Events");
} 
```

但是当我更改语句的顺序时：

```
- (BOOL)theTemporyFunction
{
    NSLog(@"Events");
    return YES;
} 
```

`NSLog()`确实运行。

两个版本都可以编译，那么为什么`NSLog()`第一个版本似乎不起作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T13:09:31.573

`return`是函数中执行的最后一条语句。在[return 语句](http://en.wikipedia.org/wiki/Return_statement)之后，函数将控制权**返回**给调用者。

例如：

```
function1                                      function2
int x;
function2();-----------------------------+
                                         +---->puts("function2 - should be called");
                                         +-----return;
puts("back to function1");<--------------+     puts("should not be called"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T13:10:45.293

您确实需要学习编程基础知识..-`return`正如它所说-您正在从方法执行返回到先前的上下文>>此时您将离开该方法。

# android - 如何根据从服务接收到的命令更改活动的 UI？

> ID：10482659
> 
> 赞同：0
> 
> 时间：2012-05-07T13:07:31.080
> 
> 标签：android, android-service, android-ui

*我创建了一个通过 AIDL 向外部活动*发送命令的服务：在此活动绑定到服务后，它向服务发送回调，因此建立了双向通信并正常工作。

相反，当我想根据从服务接收到的命令更改应用程序的 UI 时，就会出现问题。我使用简单的 Toast 通知进行了测试，但出现了一些错误......

当通过 AIDL 接收到新命令时，调用*外部活动*的`onExecute`方法。如果我删除 Toast 通知，一切正常，但我需要根据从服务收到的命令更改 UI。

 *```
protected void onExecute(Bundle params) {
    Log.i(LOG_TAG, "onExecute(): " + params);

    if (params.containsKey("command01")) {
        Log.i(LOG_TAG, "onExecute(): " + params.getString("command01"));
        Toast
        .makeText(this, "Command 1...", Toast.LENGTH_SHORT)
        .show();
    }
    else if (params.containsKey("command02")) {
        Log.i(LOG_TAG, "onExecute(): " + params.getString("command02"));
        Toast
        .makeText(this, "Command 2...", Toast.LENGTH_SHORT)
        .show();
    }
    else {
        Log.w(LOG_TAG, "onExecute() - unknown command: " + params);
    }
} 
```

下图为 LogCat 在出错时记录的日志：

```
05-07 12:45:30.676: W/dalvikvm(363): JNI WARNING: JNI method called with exception raised
05-07 12:45:30.676: W/dalvikvm(363):              in Ldalvik/system/NativeStart;.run ()V (CallStaticVoidMethodV)
05-07 12:45:30.676: W/dalvikvm(363): Pending exception is:
05-07 12:45:30.676: I/dalvikvm(363): Ljava/lang/RuntimeException;: Can't create handler inside thread that has not called Looper.prepare()
05-07 12:45:30.706: I/dalvikvm(363):    at android.os.Handler.<init>(Handler.java:121)
05-07 12:45:30.706: I/dalvikvm(363):    at android.widget.Toast.<init>(Toast.java:68)
05-07 12:45:30.706: I/dalvikvm(363):    at android.widget.Toast.makeText(Toast.java:231)
05-07 12:45:30.706: I/dalvikvm(363):    at org.example.android.applicationdemo.ApplicationDemoActivity.onExecute(ApplicationDemoActivity.java:130)
05-07 12:45:30.706: I/dalvikvm(363):    at org.example.android.applicationdemo.ApplicationDemoActivity$2.execute(ApplicationDemoActivity.java:100)
05-07 12:45:30.706: I/dalvikvm(363):    at org.example.android.servicedemo.IServiceCallback$Stub.onTransact(IServiceCallback.java:55)
05-07 12:45:30.706: I/dalvikvm(363):    at android.os.Binder.execTransact(Binder.java:320)
05-07 12:45:30.706: I/dalvikvm(363):    at dalvik.system.NativeStart.run(Native Method)
05-07 12:45:30.706: I/dalvikvm(363): "Binder Thread #2" prio=5 tid=8 NATIVE
05-07 12:45:30.706: I/dalvikvm(363):   | group="main" sCount=0 dsCount=0 obj=0x405116f0 self=0x1f1590
05-07 12:45:30.706: I/dalvikvm(363):   | sysTid=370 nice=0 sched=0/0 cgrp=default handle=2037072
05-07 12:45:30.714: I/dalvikvm(363):   | schedstat=( 18375041 37002039 19 )
05-07 12:45:30.714: I/dalvikvm(363):   at dalvik.system.NativeStart.run(Native Method)
05-07 12:45:30.714: E/dalvikvm(363): VM aborting 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:12:14.107

我认为您在非 UI 线程上执行的方法中创建了您的 Handler。将您的 Handler 作为全局变量。

```
private Handler _handler = new Handler(); 
```*

# c# - 检查子类是否属于特定类型的最佳方法是什么？

> ID：10482672
> 
> 赞同：1
> 
> 时间：2012-05-07T13:07:47.250
> 
> 标签：c#, oop, asp.net-mvc-2

我有一个`Person`基类和三个衍生物。在编辑页面上，我有一个包含一般人员数据（姓名、地址等）的部分。

我还希望每个子类有一个部分。因此，如果 a`Person`是 a，`User`我想添加一个包含特定用户数据的部分。如果 a`Person`也是 a`CardHolder`我想显示持卡人部分。

我正在努力解决如何实现这一点。我的想法是询问`UserRepository`指定的`Person`是否为`User`. 如果是，该方法将返回一个`User`对象；否则为空。我计划为所有子类执行此操作。

但是，我有这种感觉，这可以做得更好，但我找不到那种方法。

**编辑：**
我有以下情况。`Person`我对对象（不是派生词！）有一个概述。单击一行时，我想显示详细信息页面。在此页面上，我有如上所述的不同部分。在这一点上，我想知道“人”是否也是`User`“持卡人”。

我想应用多态性，但我不明白如何......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T13:09:56.267

在 Person 类上有一个抽象函数，称为“ `ReturnValidSectionsForPerson()`”。在每个子类中，重写该函数以根据需要返回“ `UserData`”或“ `CardHolder`”。您可以使用枚举来保存各种类型的部分，以使其更易于阅读和维护。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T13:11:03.537

我认为您可以使用`is`运算符：

```
if(Person is User) { /* do something */ }
if(Person is CardHolder) { /* do something more */ } 
```

[在这里](http://msdn.microsoft.com/en-us/library/scekt9xw%28v=vs.80%29.aspx)阅读更多 。

正如 Jason 评论的那样，您可能还想做这样的事情：

```
interface class Person
{
    IEnumerable<Section> GetSections();
}

class User : Person
{
     IEnumerable<Section> GetSections() { return new[] { new PersonSection() }; }
}

class CardHolder : Person
{
     IEnumerable<Section> GetSections() 
     { 
          return base.GetSections().Concat(new [] {new CardHolderSection() });
     }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T14:08:17.260

好的，您可以按照偏好的递增顺序执行三件事。

1）使用“is”明确检查对象的类。这种方法的问题在于它很脆弱。如果你将来想出新的子类，你需要改变你的条件。这打破了“开放/封闭原则”：您无需修改​​现有代码即可添加新功能。

2）在Person中实现一个“hasDetails”方法并在User中覆盖它。然后您检查“hasDetails”，然后您可以在任何实现该接口的类中实现它。这是可取的，因为它允许您在不更改现有代码的情况下添加新代码，但不灵活，因为它假定所有细节都是相同的。

3）“告诉，不要问”。不要向对象询问有关自身的信息，并根据结果做某事。相反，告诉对象自己执行操作。这允许对象决定何时执行以及如何执行。

在大多数情况下，最好使用#3，但在某些情况下，你真的别无选择，只能使用#2（例如，打包或分层要求你想要执行的操作不能由 Person 对象完成）甚至使用#1（例如，您无权访问 Person 类的源代码或无法向其添加方法）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T13:10:03.513

只需使用`is`运算符 - is 运算符用于检查对象的运行时类型是否与给定类型兼容。is 运算符用于以下形式的表达式：

```
if(pers is user )
{
}
else if (pers is cardholder)
{
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-07T13:10:44.700

`typeof (SubClass).IsSubclassOf(typeof (BaseClass));`// 返回真

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-07T13:11:13.473

最好使用聚合而不是继承。根据相应的属性是否为“空”来创建属性`Person.UserData`并显示/隐藏控件。`Person.CardholderDetails`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-07T13:11:08.383

也许我错过了重点，但我认为您应该能够进行“是”检查：

```
var isUser = myObject is User; 
```

请参阅 MSDN：

[http://msdn.microsoft.com/en-us/library/scekt9xw%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/scekt9xw%28v=vs.80%29.aspx)

编辑：

这是一个简单的解决方案，如果添加更多类，则需要维护。请参考其他解决方案以获得更好的答案。

希望能帮助到你，

基督教

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-07T13:28:08.397

> 我有以下情况。我对 Person 对象（不是派生对象！）有一个概述。单击一行时，我想显示详细信息页面。在此页面上，我有如上所述的不同部分。此时我想知道“Person”是否也是 a`User` 或 a `Cardholder`。

您可以使用[枚举](http://msdn.microsoft.com/it-it/library/sbbt4032%28v=vs.80%29.aspx)。所以你可以做这样的事情：

```
[Flags]    
public enum Test
{
    User,
    CardHolder
} 
```

然后在你的课堂上使用它：

```
public class Person
{
    //...
    public Test MyTest;
} 
```

因此，您可以在任何地方使用它：

```
Person person = new Person();
person.Test1 = (Test.User | Test.CardHolder);

//...

if(person.MyTest == Test.User | Test.CardHolder))
{
     //Do something
} 
```

或者简单地说：

```
Person person = new Person();
person.Test1 = Test.User;

//...

if(person.MyTest == Test.User)
{
     //Do something
}

if(person.MyTest == Test.CardHolder)
{ 
    //Do something
} 
```

# python - Python重新排序排序列表，使最大值位于中间

> ID：10482684
> 
> 赞同：6
> 
> 时间：2012-05-07T13:08:37.423
> 
> 标签：python, sorting, partitioning

我需要重新排序排序列表，以便“中间”元素是最高数字。到中间的数字是递增的，经过中间的数字是递减的。

我有以下工作解决方案，但感觉可以更简单地完成：

```
foo = range(7)
bar = [n for i, n in enumerate(foo) if n % 2 == len(foo) % 2]
bar += [n for n in reversed(foo) if n not in bar]
bar
[1, 3, 5, 6, 4, 2, 0] 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-07T13:14:59.633

怎么样：

```
foo[len(foo)%2::2] + foo[::-2]

In [1]: foo = range(7)
In [2]: foo[len(foo)%2::2] + foo[::-2]
Out[2]: [1, 3, 5, 6, 4, 2, 0]
In [3]: foo = range(8)
In [4]: foo[len(foo)%2::2] + foo[::-2]
Out[4]: [0, 2, 4, 6, 7, 5, 3, 1] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T13:12:09.067

使用 2 步向上和 -2 向后的切片：

```
>>> foo[1::2]+foo[-1::-2]
[1, 3, 5, 6, 4, 2, 0] 
```

# wordpress - re_write page outside wordpress folder

> ID：10482691
> 
> 赞同：0
> 
> 时间：2012-05-07T13:08:55.677
> 
> 标签：wordpress, .htaccess, mod-rewrite

I want to redirect write a re_write rule to handle article1 to blog/article1 where blog is a wordpress world that has blog/.htaccess too

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T13:29:59.637

Enable mod_rewrite and .htaccess through `httpd.conf` and then put this code in your `.htaccess` under **DOCUMENT_ROOT** directory (parent dir of /blog):

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^(article1)/?$ blog/$1 [L,R,NC] 
```

# python - Cronjob - 运行脚本和 Python

> ID：10482692
> 
> 赞同：1
> 
> 时间：2012-05-07T13:08:57.907
> 
> 标签：python, cron

我的问题是 cronjob 似乎运行良好，但没有在 .sh 文件中正确执行代码，请参阅下面的详细信息。

我输入 crontab -e，调出 cron： 在该文件中：

```
30 08 * * 1-5 /home/user/path/backup.sh
45 08 * * 1-5 /home/user/path/runscript.sh >> /home/user/cronlog.log 2>&1 
```

备份.sh：

```
#!/bin/sh
if [ -e "NEW_BACKUP.sql.gz" ]
then
    mv "NEW_BACKUP.sql.gz" "OLD_BACKUP.sql.gz"
fi
mysqldump -u username -ppassword db --max_allowed_packet=99M | gzip -9c > NEW_BACKUP.sql.gz 
```

运行脚本.sh：

```
#!/bin/sh
python /home/user/path/uber_sync.py 
```

uber_sync.py：

```
import keyword_sync
import target_milestone_sync
print "Starting Sync"
keyword_sync.sync()
print "Keyword Synced"
target_milestone_sync.sync()
print "Milestone Synced"
print "Finished Sync" 
```

问题是，它似乎在 uber_sync 中执行打印语句，但实际上并没有执行 import 语句中的代码......有什么想法吗？

另请注意，keyword_sync 和 target_milestone_sync 与 uber_sync 位于同一目录下，即 /home/user/path

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:33:08.573

您的导入语句失败，因为 python 无法找到您的模块。将它们添加到您的搜索路径，然后导入您的模块，如下所示（将其添加到 uber_sync.py）：

```
import sys
sys.path.append("/home/user/path")
import keyword_sync
import target_milestone_sync 
```

Python looks for modules in the current directory (the dir the code is executed in), in the `$PYTHONPATH` environment variable and config files. This all ends up in `sys.path` which can be edited like any list object. If you want to learn more about the reasons a certain module gets imported or not i suggest also looking into the standard module [imp](http://docs.python.org/library/imp.html).

In your case you tested your code in `/home/user/path` via `python uber_sync.py` and it worked, because your modules were in the current directory. But when execute it in `some/other/dir` via `python /home/user/path/uber_sync.py` the current dir becomes `some/other/dir` and your modules are not found.

# sql - 插入包含新行和引号的文本列的条目时出错

> ID：10482693
> 
> 赞同：1
> 
> 时间：2012-05-07T13:09:00.097
> 
> 标签：sql, informix

我有一个 Informix 11.70 数据库。我无法在表上成功执行此插入语句。

```
INSERT INTO some_table(
    col1,
    col2,
    text_col,
    col3) 
VALUES(
    5, 
    50, 
    CAST('"id","title1","title2"
"row1","some data","some other data"
"row2","some data","some other"' AS TEXT), 
    3); 
```

我收到的错误是：

> [错误代码：-9634，SQL 状态：IX000] 没有从字符转换为文本。

我发现我应该添加这个语句以便允许在文本文字中使用新行，所以我在我已经编写的同一个查询上方添加了这个：

```
EXECUTE PROCEDURE IFX_ALLOW_NEWLINE('t'); 
```

不过，我收到同样的错误。

我还阅读了 IBM 文档，上面写着：或者允许换行，我可以在文件中设置`ALLOW_NEWLINE`参数。`ONCONFIG`我想最后一个需要对服务器的管理访问权限来更改我没有的配置文件，我不想利用这个设置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T14:21:03.830

Informix 的 TEXT（和 BYTE）列早于任何标准，并且在许多方面都是非常特殊的类型。Informix 中的 TEXT 与其他 DBMS 中的 TEXT 非常不同。其中一个长期存在（超过 20 年）的问题是没有可用于向其中插入数据的字符串文字表示法。'No cast from char to text' 是说没有从字符串文字到 TEXT 的显式转换。

您有多种选择：

*   在表中使用 LVARCHAR（如果您的值不会超过几 KiB，则很好，因为总行长度约为 32 KiB）。LVARCHAR 列的最大大小略低于 32 KiB。
*   使用可以处理 Informix 'locator' 结构的编程语言——在 ESQL/C 中，用于保存 TEXT 的类型是`loc_t`.
*   考虑改用 CLOB。但是，这具有相同的限制（没有字符串到 CLOB 转换），但是您可以使用该`FILETOCLOB()`函数将信息从客户端上的文件获取到数据库（并将`LOTOFILE`信息从数据库传输到客户）。

如果您可以使用 LVARCHAR，那是迄今为止最简单的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-15T21:46:00.980

我忘了提到问题中的一个重要细节——我使用 Java 和 Hibernate ORM 来访问我的 Informix 数据库，因此[Jonathan Leffler 的回答](https://stackoverflow.com/questions/10482693/error-inserting-entry-with-text-column-that-contains-new-line-and-quotes/10483762#10483762)`loc_t`中建议的一些方法（特别是处理）很遗憾不适用。另外，我需要存储动态长度的大数据，我担心该列不足以容纳它。`LVARCHAR`

我让它工作的方式是按照[Michał Niklas](https://stackoverflow.com/users/22595/michal-niklas)[从他的评论](https://stackoverflow.com/questions/10482693/error-inserting-entry-with-text-column-that-contains-new-line-and-quotes#comment13564329_10483762)中的建议，并使用`PreparedStatement`. 这可以通过 Informix`TEXT`以自己的方式处理数据类型来解释。

# android - ComponentInfo{packgname.LoginActivity}：java.lang.ClassNotFoundException

> ID：10482700
> 
> 赞同：1
> 
> 时间：2012-05-07T13:09:27.663
> 
> 标签：android, android-manifest, classnotfoundexception

每当我运行我的 android 应用程序时，都会出现异常：

```
05-07 12:03:55.356: E/AndroidRuntime(589): FATAL EXCEPTION: main
05-07 12:03:55.356: E/AndroidRuntime(589): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{packgname/de.fau.fsahoy.android.api15.Activities.LoginActivity}: java.lang.ClassNotFoundException: de.fau.fsahoy.android.api15.Activities.LoginActivity
05-07 12:03:55.356: E/AndroidRuntime(589):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1880)
05-07 12:03:55.356: E/AndroidRuntime(589):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
05-07 12:03:55.356: E/AndroidRuntime(589):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
05-07 12:03:55.356: E/AndroidRuntime(589):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
05-07 12:03:55.356: E/AndroidRuntime(589):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-07 12:03:55.356: E/AndroidRuntime(589):  at android.os.Looper.loop(Looper.java:137)
05-07 12:03:55.356: E/AndroidRuntime(589):  at android.app.ActivityThread.main(ActivityThread.java:4424)
05-07 12:03:55.356: E/AndroidRuntime(589):  at java.lang.reflect.Method.invokeNative(Native Method)
05-07 12:03:55.356: E/AndroidRuntime(589):  at java.lang.reflect.Method.invoke(Method.java:511)
05-07 12:03:55.356: E/AndroidRuntime(589):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-07 12:03:55.356: E/AndroidRuntime(589):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-07 12:03:55.356: E/AndroidRuntime(589):  at dalvik.system.NativeStart.main(Native Method)
05-07 12:03:55.356: E/AndroidRuntime(589): Caused by: java.lang.ClassNotFoundException: packgname.Activities.LoginActivity
05-07 12:03:55.356: E/AndroidRuntime(589):  at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
05-07 12:03:55.356: E/AndroidRuntime(589):  at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
05-07 12:03:55.356: E/AndroidRuntime(589):  at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
05-07 12:03:55.356: E/AndroidRuntime(589):  at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
05-07 12:03:55.356: E/AndroidRuntime(589):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1871)
05-07 12:03:55.356: E/AndroidRuntime(589):  ... 11 more 
```

但是，在我的 AndroidManifest.xml 中，恕我直言没有错：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="de.fau.fsahoy.android.api15"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" android:targetSdkVersion="15"/>
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>

    <application
        android:icon="@drawable/fsa_launcher"
        android:label="@string/AppName">

        <activity
            android:name=".Activities.LoginActivity"
            android:label="@string/AppName">
            <intent-filter>
                        <action android:name="android.intent.action.MAIN" />
                        <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name=".Activities.MainMenuActivity"></activity>
        <activity android:name=".Activities.ProfileActivity"></activity>

    </application>
</manifest> 
```

我对这个问题很着迷，并试图在过去 3 个小时左右解决它：<

目前我正在通过将代码复制并粘贴到另一个干净的项目来重建应用程序。我希望这行得通。无论如何，我看到很多人都有这个问题。它是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T10:57:52.770

我通过创建一个新的 Android 项目并手动复制并粘贴旧项目中的代码解决了这个问题。

神奇的是-它起作用了:)

可能不是最好的解决方案——尤其是对于拥有庞大代码库的大型项目。然而，它对我有用:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-08T22:57:52.390

我的代码中有一个类似的“poltergeist”。我不明白原因，但它似乎与我的活动扩展`FragmentActivity`和具有以下签名的方法有关：`public boolean isResumed()`.
我重命名了该方法并且它起作用了。

# javascript - 如何使用 Jquery 将字段内的值设置为表 td？

> ID：10482702
> 
> 赞同：0
> 
> 时间：2012-05-07T13:09:30.863
> 
> 标签：javascript, jquery

我的字段很少，我希望将这些字段中的值复制到`tbody td`. 我做了一个jsfiddle，有人可以看看它。

[http://jsfiddle.net/tsdUU/](http://jsfiddle.net/tsdUU/)

我想让每个 tbody td 看起来如下：

> 复制值：（在字段中键入的值）

任何形式的帮助表示赞赏

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T13:26:00.333

那么这里是[您的代码](http://jsfiddle.net/tsdUU/9/)的工作版本。现在解释一下。

快的！这段代码有什么问题。

```
<select id="SubjectTypeName" id="1"> 
```

它有两个`id`s 阻止我们通过 选择它`id`。其次，在您的代码中，您试图将文本框 ( `#1`) 的值设置为`td`( ) 的值`#S`。

```
$("#1").val($("#S").val()); 
```

所以我们需要把那个代码改成。

```
$("#S").val($("#1").val()); 
```

啊，但是这段代码仍然不起作用。这是因为单元格没有`val()`返回值属性。相反，我们试图设置`innerHTML`; 它有一个 jQuery 替代品`html()`。

```
$("#S").html($("#1").val()); 
```

还有，多田！有用！=D

**编辑：**获取所选选项的文本。

为此，我们需要获取选定的选项。我们可以通过`:selected`选择器来做到这一点。

```
$("#1 option:selected"); 
```

现在我们只需使用该`text()`方法获取 this 的内部文本。

```
$("#1 option:selected").text(); 
```

把它们放在一起，我们就得到了。

```
$("#S").html($("#1 option:selected").text()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T13:28:33.700

将jquery代码更改为

```
$('#next-step').click(function() {
    $('#S').html('Copied value: ('+$("#1").val()+')');
    $('#C').html('Copied value: ('+$("#2").val()+')');
    $('#T').html('Copied value: ('+$("#3").val()+')');
}); 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T13:29:01.530

这是你的 html

```
<input type="text" value="" id ="three" />
<input type="text" value="" id="two" />
<select id="one">
<option value="">Select something</option>
<option value="2">test1</option>
<option value="3">test2</option>
<option value="4">test3</option>
</select>
<br>
<br>
<table class="box-style3" border="1">
 <thead></thead>
<tbody>
<tr><td id="S">Copied value:</td></tr>
<tr><td id ="C">Copied value:</td></tr>
<tr><td id="T">Copied value:</td></tr>
 </tbody>
</table>

<input type="button" id="next-step"  value="save"> 
```

这是你的js

```
$('#next-step').click(function() {
$('#S').html($('#one').val());
$('#C').html($('#two').val());
$('#T').html($('#three').val());
}); 
```

及其工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T14:32:06.260

大多数人已经给出了答案，但这是我的。

您的 HTML 代码：

```
<input type="text" value="" id ="3" />
<input type="text" value="" id="2" />
<select id="1">
<option value="">Select something</option>
<option value="2">test1</option>
<option value="3">test2</option>
<option value="4">test3</option>
</select>
<br>
<br>
<table class="box-style3" border="1">
  <thead></thead>
   <tbody>
    <tr><td id="S">Copied value:</td></tr>
    <tr><td id ="C">Copied value:</td></tr>
    <tr><td id="T">Copied value:</td></tr>
     </tbody>
</table>

<input type="button" id="next-step"  value="save"> 
```

这是脚本

```
$('#next-step').click(function() {
    $('#S').append($('#1 option:selected').text());
    $('#C').append($('#2').val());
    $('#T').append($('#3').val());
}); 
```

​Simpy 删除选择标签上的这个 id，id="SubjectTypeName" 就可以了。

# ms-word - 测试 TOC 域代码返回的错误

> ID：10482704
> 
> 赞同：1
> 
> 时间：2012-05-07T13:09:36.940
> 
> 标签：ms-word, word-2010, fieldcodes

我正在尝试在创建图表之前测试是否存在任何“图表标题”。我有一行有效的代码：（ `{IF {TOC \h \z \c "Figure"} = {TOC \h \z \c "blarghel"} " No table" "Entries exist"}` 当然是域代码），其中“blarghel”是一个故意的假人。我以为我曾经能够（在 Word 2003 中）引用返回的错误字符串，对于 WORD 2010 来说

`{IF {TOC \h \z \c "Figure"} = "No table of figures entries found." " No table" "Entries exist"}`

但这总是返回“IF”测试的失败条件。我没有看到任何“ISERROR”类型的域代码，也无法弄清楚 TOC 域代码实际返回的是什么。
有任何想法吗？（是的，通常我会用域代码替换第二个条件以返回图表:-)）

谢谢。

卡尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T14:04:32.573

我认为您需要在 Word 2010 中的错误消息之前添加一个额外的段落标记。自 Word 2003 以来这可能已经改变 - 我没有检查过：

{IF {TOC \h \z \c "Figure"} = "未找到图表条目。" " 没有表" "条目存在"}

# mysql - Mysql查询帮助显示小于给定日期的结果

> ID：10482705
> 
> 赞同：1
> 
> 时间：2012-05-07T13:09:38.200
> 
> 标签：mysql

我的日期字段`Mysql`存储`char`如下`050712`.. 现在我想显示数据库中可用的小于该日期的结果。我写如下

条件应该失败

```
select * from tblFedACHRDFI where date_format(changedate,'%m/%d/%Y')> 05/08/12; 
```

这显示了所有可用的记录，但我不需要我只想在日期为时显示，`05/06/12`这意味着

真实情况

```
select * from tblFedACHRDFI where date_format(changedate,'%m/%d/%Y')> 05/06/12; 
```

`Sqlserver`当我写如下时，同样适用于我

根据我的要求，没有显示记录是真实的

```
select * from tblFedACHRDFI where
 CONVERT(datetime,(SUBSTRING(ChangeDate,1,2)+'/'
+SUBSTRING(ChangeDate,3,2)+'/'+dbo.Years
(SUBSTRING(ChangeDate,5,2))+SUBSTRING(ChangeDate,5,2)))>
 '05/08/2012' 
```

所以任何人都可以帮助我在`MySql`声明中出错的地方..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T13:22:08.470

MySQL 日期应为 YYYY-MM-DD，列类型应为 DATE。

如果您希望以任何其他方式存储日期（例如，在这里使用 CHAR(6)），则每次使用日期时都必须使用转换。这更慢，使用更多 CPU，并且可能会失败，因为您可以在 CHAR 字段中存储无效值。

但是，它确实有效。使用[STR_TO_DATE](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)函数将您的 CHAR 列转换为正确的日期。现在您可以将其与适当的日期进行比较，使用 INTERVAL 函数，整个 shebang：

```
select * 
from tblFedACHRDFI 
where str_to_date(changedate,'%m%d%Y') > "2012-08-05"; 
```

# c - 将数据写入文件时如何生成信号？

> ID：10482706
> 
> 赞同：1
> 
> 时间：2012-05-07T13:09:42.873
> 
> 标签：c, linux, signals

当 C 程序执行时，它会产生错误或成功执行。如果它产生错误，我会将错误重定向到文件 error.log。我希望在error.log上发生写操作后立即生成一个信号（通知），这个信号应该调用另一个程序，比如Parser.c，它将把error.log副本读入缓冲区并清除日志的内容文件。

如果是，文件是否有可能生成一个信号来调用另一个程序，那么我们如何以编程方式实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T13:16:35.483

我相信在不同的系统上答案会有所不同。我建议您在完成文件写入后从第一个程序（在 Linux 上 fork 一个新进程）启动其他程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T13:24:48.890

一种方法是使用异步 I/O 机制 (aio_*)，它们将发送 AIO 控制块中指定的信号（查看手册页了解更多详细信息，它非常完整）。本质上，您将设置一个用于读取的 AIO 控制块，并发出 aio_read()。收到信号后，您将处理数据。aio(7) for Linux 是一个非常有用的手册页。

# java - Java 多线程服务器与单个客户端通信，但不能同时与所有客户端通信

> ID：10482708
> 
> 赞同：1
> 
> 时间：2012-05-07T13:09:48.430
> 
> 标签：java, sockets, networking

我编写了一个多线程服务器，它可以同时处理多个连接的客户端。唯一的问题是，它只与该特定客户端通信。这是我要实现的示例：客户端->服务器->客户端+其他客户端。但是我目前拥有的是：客户端->服务器->客户端

我知道我必须将其他客户端的数据存储在每个特定客户端上，但问题是我不知道这样做的最佳方法是什么。目前，每个客户端都使用字符串标记器并存储有关自身的信息。

发送有关其他客户端的信息的最佳方式以及在客户端存储信息的最佳方式是什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T13:11:20.377

您可以在此示例中使用消息队列[http://inetjava.sourceforge.net/lectures/part1_sockets/InetJava-1.9-Chat-Client-Server-Example.html](http://inetjava.sourceforge.net/lectures/part1_sockets/InetJava-1.9-Chat-Client-Server-Example.html)

搜索`sendMessageToAllClients(String aMessage)`

此外，这个示例可能正是您所需要的，一个多线程服务器-客户端聊天

# php - 在 Codeigniter 中 URL 如何加密和解密。每次刷新加密值更改

> ID：10482712
> 
> 赞同：2
> 
> 时间：2012-05-07T13:10:03.397
> 
> 标签：php, codeigniter

我想加密我的 url 参数，例如： [http://localhost/myapps/user/profile/john](http://localhost/myapps/user/profile/john) 到 [http://localhost/myapps/user/profile/](http://localhost/myapps/user/profile/) {'john'的加密值}

在代码点火器中。

另一方面，特定数据的每次刷新加密值都会发生变化。但我需要这个静态（特定输入值的唯一值总是）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:31:44.673

见：[http ://www.99points.info/2010/06/php-encrypt-decrypt-functions-to-encrypt-url-data/](http://www.99points.info/2010/06/php-encrypt-decrypt-functions-to-encrypt-url-data/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-18T11:45:40.520

```
$this->load->library('encrypt');//load this library. 
$config['encryption_key'] = "YOUR KEY"; // application/config/config.php
$this->encrypt->encode();//Data encryption and returns it as a string
$this->encrypt->decode();//Decrypts an encoded string. 
```

# xml - VB.NET 写入某个文件（本质上是创建一个新的 XML 元素）

> ID：10482714
> 
> 赞同：0
> 
> 时间：2012-05-07T13:10:10.503
> 
> 标签：xml, vb.net, filesystems, streamwriter, writer

嗨，我正在制作自己的 ToDo 程序，我需要为用户添加创建 ToDo 项目的功能。当他们这样做时，我需要能够在列表文件中添加 XML 元素/部分。

我的 XML 文件如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<list>
<item>
    <name>Item 1</name>
    <due>Tomorrow</due>
</item>
<item>
    <name>Item 2</name>
    <due>Thursday</due>
</item>
</list> 
```

假设用户创建了一个名称为“论文”且截止日期为“明天”的项目，我需要能够制作另一个类似上面的列表元素并将其插入到`</list>`标签之前。

基本上我在问如何在特定位置（在`</list>`标记之前的末尾）写入我的 XML 文件？是否有可能只是转到文件的末尾并返回一行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:19:34.150

> 是否有可能只是转到文件的末尾并返回一行？

当然可以，但是这样做会非常不安全。它假设 XML 文件的编写方式，这也是同样有效的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<list><item><name>Item 1</name><due>Tomorrow</due></item><item><name>Item 2</name><due>Thursday</due></item></list> 
```

现在它会变得有点复杂。相反，您应该使用 XML 解析器，解析 XML 文件，操作 XML 的文档对象模型 (DOM)，然后将其保存回来。你可以这样做：

```
Dim document As XDocument = XDocument.Load("pathtoxmlfile.xml")
Dim root = document.Root
root.Add(
    New XElement("item",
                 New XElement("name", "Item 3"),
                 New XElement("due", "Friday"))
             )
document.Save("pathtoxmlfile.xml") 
```

这利用了框架的[`XDocument`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)类，这是一个很好的工具，可以轻松使用 XML 文件的对象模型。

> 如何选择和删除特定节点？

您可以使用[LINQ-to-XML](http://msdn.microsoft.com/en-us/library/bb387098.aspx)编写删除查询。只需编写一个 LINQ 查询来选择您想要的元素，然后使用`Remove()`. 这是一个删除我们刚刚添加的项目的示例：

```
Dim document As XDocument = XDocument.Load("pathtoxmlfile.xml")
Dim root = document.Root
Dim deleteThese = From e In root.Elements("item") Where e.Element("name").Value = "Item 3"
If deleteThese.Any() Then
    deleteThese.Remove()
    document.Save("pathtoxmlfile.xml")
End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T13:14:15.003

您*可以*在文件中的特定位置写入，但不能插入数据，您将覆盖文件的其余部分。此外，该位置不是一行，甚至不是一个字符，而是一个字节位置。由于 UTF-8 可以为某些字符使用多个字节，因此找到一个字符的字节位置并非易事。

只需将文件加载到`XmlDocument`对象中，添加元素，然后将文档写入文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T13:14:22.177

不，您不会自己编写 XML 文件。您将使用`XmlDocument`该类创建一个 DOM 结构，您可以使用相应的类轻松地读取或写入 XML 文件`XmlWriter`。

或者，您可以使用类型化数据集，该数据集可以写入带有或不带有模式的 XML 文件。

*当框架中有类为您做事时，您绝对不应该手动编写 XML 文件*！**

# jquery - jsp加载时加载特定的data-role="page" - jquery mobile

> ID：10482720
> 
> 赞同：0
> 
> 时间：2012-05-07T13:10:24.783
> 
> 标签：jquery, jsp, web-applications, jquery-mobile

我正在使用 jquery mobile 开发移动 Web 应用程序。我在 jsp 文件中有各种 div 页面，当加载该文件时，我希望加载特定页面。我在用

```
window.location.replace(window.location.href.split('#')[0] + '#directory_page') 
```

但是 div 页面仅在页面刷新后加载。

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T14:00:14.677

自己解决了..没有正确阅读文档。我需要将 rel="external" 添加到将我发送到多页的链接中...首页自动加载

# git - 如何重新启动 git bash？

> ID：10482721
> 
> 赞同：7
> 
> 时间：2012-05-07T13:10:28.617
> 
> 标签：git

各种文档，例如

[http://confluence.atlassian.com/display/BITBUCKET/Set+up+SSH+for+Git](http://confluence.atlassian.com/display/BITBUCKET/Set+up+SSH+for+Git)

和

[http://help.github.com/ssh-key-passphrases/](http://help.github.com/ssh-key-passphrases/)

参考重启 git bash。如何从 Linux 执行此操作？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-07T13:12:28.887

这是指通过 Cygwin 在 Windows 系统上安装的 Git Bash shell。如果您需要在 Linux 上执行此操作，只需关闭并重新打开终端窗口即可。通常您可以将此步骤替换为`source ~/.bashrc`

# jquery - jquery fancybox 错误'类型'

> ID：10482728
> 
> 赞同：-1
> 
> 时间：2012-05-07T13:10:48.430
> 
> 标签：jquery, fancybox

我正在尝试将 fancybox 与我的 MVC 应用程序一起使用，以实现视频等的弹出功能，但是当我单击为使用 fancybox 而创建的链接时，出现以下错误：

```
SCRIPT438: Object doesn't support property or method 'type' 
jquery.fancybox.pack.js?v=2.0.6, line 2 character 131 
```

谁能告诉我是什么导致了这个问题？

代码如下：

```
<script type="text/javascript">
    $(document).ready(function () {
        $('.fancybox-media').fancybox({
            openEffect: 'none',
            closeEffect: 'none',
            helpers: {
                media: {}
            }
        });
    });
</script>

<ul class="list">
<li><a class="fancybox-media" href="http://www.youtube.com/watch?v=opj24KnzrWo">Youtube</a></li>
<li><a class="fancybox-media" href="http://www.youtube.com/watch?v=opj24KnzrWo">Youtube</a></li>
<li><a class="fancybox-media" href="http://www.youtube.com/watch?v=opj24KnzrWo">Youtube</a></li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T13:38:11.333

来自[fancybox 提示和技巧](http://fancybox.net/blog)n°4 的示例：

```
$("#tip4").click(function() {
    $.fancybox({
            'padding'       : 0,
            'autoScale'     : false,
            'transitionIn'  : 'none',
            'transitionOut' : 'none',
            'title'         : this.title,
            'width'     : 680,
            'height'        : 495,
            'href'          : this.href.replace(new RegExp("watch\\?v=", "i"), 'v/'),
            'type'          : 'swf',
            'swf'           : {
                 'wmode'        : 'transparent',
                'allowfullscreen'   : 'true'
            }
        });

    return false;
}); 
```

我想你需要指出

```
'type': 'swf', 
```

也许还有 swf 选项。我建议你保留

```
'href': this.href.replace(new RegExp("watch\\?v=", "i"), 'v/'), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T08:11:16.640

为我工作 - [http://jsfiddle.net/pGRRj/1/](http://jsfiddle.net/pGRRj/1/) 也许你可以展示你的页面？

# mysql - 文本框上的数据字段

> ID：10482731
> 
> 赞同：0
> 
> 时间：2012-05-07T13:11:07.570
> 
> 标签：mysql, vb.net, winforms

我在我的 MySQL 连接中为我的数据适配器创建了一个 UpdateCommand。

```
myDataAdapter.UpdateCommand = New MySqlCommand("UPDATE tblTable SET anotherTableID = ?antaID, tableText = ?tabText WHERE tabID = 1", myConnection)

myDataAdapter.UpdateCommand.Parameters.Add("?antaID", MySqlDbType.Int32, 15, "antaID")
myDataAdapter.UpdateCommand.Parameters.Add("?tabText", MySqlDbType.String, 15, "tabText") 
```

有没有办法将这些参数链接到变量或文本字段？因为我希望文本框中的值是`tabText`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:20:00.647

```
myDataAdapter.UpdateCommand.Parameters.Add("?tabText", MySqlDbType.String, 15, txtTabText.Text) 
```

假设您的文本框控件 Id 是 txtTabText

# parameters - JasperReports：带参数的动态查询字符串

> ID：10482735
> 
> 赞同：0
> 
> 时间：2012-05-07T13:11:16.477
> 
> 标签：parameters, jasper-reports, ireport

又是一个 JasperReports 问题——真的很烦人。

假设我有一个名为*BooleanParam*的带有布尔参数/输入控件的报告。现在有另一个参数称为*Param1*并且没有提示。*Param1*基于*BooleanParam*的值构建其值。就我而言，这看起来像这样：

```
($P{ShowTimePeriod_} == true) ? "cdate BETWEEN '01.01.10' AND '07.05.2012' " : 
```

`"cdate BETWEEN " + $P{DateParam1} + " AND " + ${DateParam1}`

注意：*DateParam1*和*DateParam2*是另外两个参数/输入控件，用于提供两个日期。

现在 Jasper 不会接受 else 表达式中的两个 DateParam。我还尝试将参数作为纯字符串直接放入字符串中 - 不起作用。

有人遇到过同样的问题吗？如何解决？我被这个问题困住了。

提前感谢您的任何意见和/或建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T14:38:01.560

我的坏 - 像这样解决它：

```
"cdate BETWEEN '" + new java.text.SimpleDateFormat("dd.MM.yy").format($P{DateParam1}) + "' AND '" + new java.text.SimpleDateFormat("dd.MM.yy").format(${DateParam1}) + "' " 
```

# javascript - 主干同步覆盖，将 url 附加到查询字符串？

> ID：10482740
> 
> 赞同：9
> 
> 时间：2012-05-07T13:11:31.603
> 
> 标签：javascript, jquery, ajax, rest, backbone.js

我在将令牌附加到主干 url 查询字符串时遇到了一些麻烦，希望你们能在这里帮助我。三件事要知道，

*   有一个rest api，每个请求都需要一个令牌
*   一个执行身份验证的 nginx 后端，为 /api 下的 api 提供主干应用程序 + 代理请求
*   我是 javascript + 主干的新手：/

主干应用程序实际上从 cookie 中读取令牌，并且每次主干进行调用时，我都需要将其附加到请求 url。我看到这可以通过覆盖主干同步来完成。但它在一些不同的事情上困扰着我。就像，这就是我所做的

```
console.log('overriding backbone sync');
var key ="token";
Backbone.old_sync = Backbone.sync
Backbone.sync = function(method, model, options) {
    if (method === 'read') {
        if (!(model.url.indexOf('?key=') != -1)) {
            model.url = model.url + '?key=' + key;
        }
    } else {
        old_url = model.url();
        if (!(old_url.indexOf('?key=') != -1)) {
            model.url = function() {
                return old_url + '?key=' + key;
            }
        }
    }
    Backbone.old_sync(method, model, options);
}; 
```

model.url 在它不是“读取”方法并且不知道如何处理它时返回一个函数，另一个问题是当发出连续请求时，令牌被添加两次。我试图用那个 indexOf 东西删除它，但没有运气。

有一个更好的方法吗 ？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-07T13:45:22.547

我认为您根本不需要覆盖`sync`：

```
var globalKey = 'key123';

var urlWithKey = function(url, key) {
    return function() {
        return url + "?key=" + key;
    };
};

var MyModel = Backbone.Model.extend({
    url: urlWithKey('/my/url/', globalKey)
}); 
```

如果您现在创建一个对象并保存它，则会发送一个 POST 请求`my/url/?key=key123`。如果这是所有 Backbone 模型所需的行为，我想你也可以覆盖 url 方法。

一般注意事项：Backbone 中的大多数参数，例如`url`可以是函数或值。我不知道为什么在您的示例中它曾经是一个函数，而在另一种情况下是一个值，但是如果您覆盖某些内部函数，您总是必须能够同时处理这两种方式。如果您查看 Backbone 的源代码，您会看到它们用于`getValue`访问这些参数：

```
var getValue = function(object, prop) {
    if (!(object && object[prop])) return null;
    return _.isFunction(object[prop]) ? object[prop]() : object[prop];
}; 
```

更新：重载所有模型的 url 方法可以像这样工作：

```
var globalKey = 'key123';

(function() {
    var baseUrl = Backbone.Model.prototype.url;
    Backbone.Model.prototype.url = function() {
        return this.baseUrl + "?key=" + globalKey;
    };
})()

var MyModel = Backbone.Model.extend({
   baseUrl: '/my/url/'
}); 
```

您也可以保留常规的 Backbone.Model 原样，并创建自己的基类。有关详细信息，请参阅[http://documentcloud.github.com/backbone/#Model-extend](http://documentcloud.github.com/backbone/#Model-extend)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T13:24:42.580

只需像这样设置您的网址：

```
url : function() {
        return  "/my/url" + this.key;
    } 
```

在您的覆盖`.sync`中，您只需要设置`key`属性。

# firefox - 如何使用 Firefox 源代码中的附属 js 文件在 Firefox 中测试 jsengine？

> ID：10482751
> 
> 赞同：0
> 
> 时间：2012-05-07T13:11:58.763
> 
> 标签：firefox, testing, spidermonkey

我已经成功地从源代码构建了spidermonkey，我唯一困惑的是如何测试它的性能？幸运的是，我在FFsource code的/js/src/tests文件夹中看到了很多测试js文件，所以我可以冒险吗？这些测试文件？如何 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T02:14:53.540

这些测试是用于正确性目的的参考测试。您通常会按照以下方式进行性能测试：

```
$ cat test.js 
var accum = 1;
for (let i = 0; i < 1000000000; ++i) accum = accum * 1.0000001 + 1;
print(accum);
$ ./js -m -n -b test.js 
2.6881041239718265e+50
runtime = 7313.683 ms 
```

确保您正在运行优化的构建并确保打开 JIT 标志。

# android - 如何在嵌套在 LinearLayout 中的 RelativeLayout 中实现重力 =“center_vertical”？

> ID：10482753
> 
> 赞同：1
> 
> 时间：2012-05-07T13:12:04.520
> 
> 标签：android, android-layout, android-linearlayout, center, android-relativelayout

[https://docs.google.com/document/d/1SDDnAG-jkQjC6F85iPgfv3Et1pYl8t03k-TkCN3YcCw/edit](https://docs.google.com/document/d/1SDDnAG-jkQjC6F85iPgfv3Et1pYl8t03k-TkCN3YcCw/edit)

* * *

我有一个包含库存和自定义列表项的 Android 首选项页面。自定义列表项“Mood”和“Mixed Mood”可以在引用的 Google Doc 的屏幕截图中看到，并以下列方式起作用。（外部链接是因为，没有至少 10 的声誉，我不允许在 stackoverflow 中发布图像......）

1）在用户选择一个值之前，他们只是显示他们的标题。（情绪或混合情绪）

2）用户选择了一个值后，他们会显示他们的标题和一个自定义工具提示（小彩色方块），表明他们的选择。

问题：您可以从屏幕截图中看到，在用户选择一个值之前，“心情”文本没有居中。我希望它居中，然后在做出选择后动态地为自定义工具提示腾出空间。换句话说，我想

```
<TextView android:id="@+android:id/title" 
```

回应

```
android:gravity="center_vertical". 
```

这可能吗？

我的布局文件看起来像这样。

* * *

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:minHeight="60dip"
    android:gravity="center_vertical"
    android:paddingRight="?android:attr/scrollbarSize">

    <RelativeLayout 
         android:layout_width="fill_parent" 
         android:layout_height="wrap_content" 
         android:gravity="center_vertical" 
         android:layout_marginLeft="15dip" 
         android:layout_marginRight="6dip"> 

        <TextView android:id="@+android:id/title"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:gravity="center_vertical"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textSize="18sp"/>
        <!-- This image represents the dropdown arrow -->
        <ImageView
            android:gravity="center_vertical"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_toRightOf="@android:id/title"
            android:scaleType="fitEnd"
            android:src="@drawable/ic_btn_round_more_normal_cropped" />

        <monarca_rct.client.customcomponents.MoodScalePresentation
            android:id="@+android:id/hpmp_mood_scale"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@android:id/title"
            android:paddingTop="4.0dp"/>

    </RelativeLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T19:44:00.650

如果我的问题是正确的：

您可以`android:layout_alignWithParentIfMissing="true"`访问[http://developer.android.com/resources/articles/layout-tricks-efficiency.html](http://developer.android.com/resources/articles/layout-tricks-efficiency.html)`<TextView android:id="@+android:id/title"`了解更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-18T15:44:56.063

我不能完全尝试这个，但我认为它可能是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:minHeight="60dip"
    //REMOVED GRAVITY
    android:paddingRight="?android:attr/scrollbarSize">

    <RelativeLayout 
         android:layout_width="fill_parent" 
         android:layout_height="wrap_content" 
         //REMOVED GRAVITY
         android:layout_marginLeft="15dip" 
         android:layout_marginRight="6dip"> 

        <TextView android:id="@+android:id/title"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:gravity="center_vertical|left"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textSize="18sp"/>
        <!-- This image represents the dropdown arrow -->
        <ImageView
            android:gravity="center_vertical"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_toRightOf="@android:id/title"
            android:scaleType="fitEnd"
            android:src="@drawable/ic_btn_round_more_normal_cropped" />

        <monarca_rct.client.customcomponents.MoodScalePresentation
            android:id="@+android:id/hpmp_mood_scale"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@android:id/title"
            android:paddingTop="4.0dp"/>

    </RelativeLayout>

</LinearLayout> 
```

从**center_vertical**到**center_vertical|left**的原因是因为你的父布局就像一个网格，你可以“选择”你的位置。因此，如果您有：

(1) (2) (3)

(4) (5) (6)

(7) (8) (9)

[不要介意每行之间的空格，由于某种原因，如果我不这样做，它会全部显示在一行中。]

**4**是你想要你的文本的地方。如您所见，4 在**左侧**，但也**垂直居中**，因此组合：

```
 android:gravity="center_vertical|left" 
```

快速提问，为什么需要在 LinearLayout 中使用 RelativeLayout？从外观上看，您可以完全不使用 LinearLayout。

# c++ - 为什么大多数书籍建议赋值运算符返回对 *this 的引用？

> ID：10482764
> 
> 赞同：2
> 
> 时间：2012-05-07T13:12:45.190
> 
> 标签：c++, assignment-operator

> **可能重复：**
> [在 C++ 中重载赋值运算符](https://stackoverflow.com/questions/2447696/overloading-assignment-operator-in-c)
> [C++ 为什么赋值运算符应该返回一个 const ref 以避免 (a=b)=c](https://stackoverflow.com/questions/4706690/c-why-the-assignment-operator-should-return-a-const-ref-in-order-to-avoid-a-b)

为什么大多数书籍建议赋值运算符返回对此的引用？为什么不`const`参考？

`const`会使像 (a=b)=c 这样的奇怪代码无法编译，这是一件好事。

# sql-server-2008 - 在 SQL Server 2008 中的指定数据库上执行 sp_addrolemember（或替代方法）

> ID：10482770
> 
> 赞同：2
> 
> 时间：2012-05-07T13:12:57.967
> 
> 标签：sql-server-2008, stored-procedures, triggers

我正在尝试在 dbo.restorehistory 表上设置触发器，以尝试在数据库还原后验证用户角色。当恢复记录到历史表时，触发器只是查询“destination_database_name”。然后我尝试在有问题的数据库上运行“EXEC sp_addrolemember”。然而，显然，该过程不存在于数据库范围之外，即它在触发器内部不可用。

那么有人对如何管理此任务有建议吗？除了我的方法不起作用这一明显事实之外，完全可以有更好的方法。

简而言之，我需要能够添加一个用户并在恢复后将他设置为 db_owner。

这些恢复的问题在于它们是从我们无法控制的第 3 方应用程序远程执行的。当他们创建一个新数据库时，他们执行恢复以使用默认数据填充数据库，从而覆盖我们专门设置的用户角色，即使我们在模型数据库中指定了它们。所以...

1.  第三方程序创建数据库
2.  数据库从模型数据库继承用户
3.  第三方程序通过恢复默认数据库覆盖用户
4.  我需要重新创建这些用户并应用他们的角色

```
    设置 ANSI_NULLS ON
    去
    设置 QUOTED_IDENTIFIER ON
    去
    -- ===============================================
    创建触发器 [dbo].[AfterRestore]
       ON [msdb].[dbo].[restorehistory]
       插入后
    作为
    开始
       设置无计数；
       将@DatabaseName 声明为 VARCHAR(100)
         选择 @DatabaseName = 目标数据库名称
         从插入
         为登录 [域\xyzzyusers] 创建用户 [XYZZY 用户]
         EXEC sp_addrolemember 'db_owner', 'XYZZY 用户'
    结尾
    去

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T18:10:14.253

要从触发器中更改数据库上下文，您需要使用动态 sql。下面是一个简单的例子

```
declare @DatabaseName nvarchar(100) = 'YourDB';

declare @cmd nvarchar(max);
set @cmd = replace('

    select db_name();

    use $dbname$;

    select db_name();
', '$dbname$', @DatabaseName);

print @cmd
exec sp_executesql @cmd; 
```

# ruby - Ruby 的双冒号 (::) 运算符用法差异

> ID：10482772
> 
> 赞同：30
> 
> 时间：2012-05-07T13:13:25.127
> 
> 标签：ruby

有没有区别

```
module Foo
  class Engine < Rails::Engine
  end
end 
```

和

```
module Foo
  class Engine < ::Rails::Engine
  end
end 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-05-07T13:16:37.027

Ruby 中的常量像文件系统中的文件和目录一样嵌套。因此，常量由它们的路径唯一标识。

与文件系统进行类比：

```
::Rails::Engine #is an absolute path to the constant.
# like /Rails/Engine in FS.

Rails::Engine #is a path relative to the current tree level.
# like ./Rails/Engine in FS. 
```

这是可能的错误的说明：

```
module Foo

  # We may not know about this in real big apps
  module Rails
    class Engine 
    end
  end

  class Engine1 < Rails::Engine
  end

  class Engine2 < ::Rails::Engine
  end
end

Foo::Engine1.superclass
 => Foo::Rails::Engine # not what we want

Foo::Engine2.superclass
 => Rails::Engine # correct 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-26T15:25:35.487

```
Rails::Engine #is a path relative to the current tree level.
# like ./Rails/Engine in FS. 
```

这不完全正确！

让我们举个例子：

```
module M
  Y = 1
  class M
    Y = 2
    class M
      Y = 3
    end
    class C
      Y = 4
      puts M::Y
    end
  end
end

# => 3

module M
  Y = 1
  class M
    Y = 2
    class C
      Y = 4
      puts M::Y
    end
  end
end

# => 2

module M
  Y = 1
  class M
    Y = 2
    class M
      Y = 4
      puts M::Y
    end
  end
end

# => 4 
```

因此，当您说 M::Y 时，ruby 会查找最接近的定义，无论它是在当前范围内、外部范围内还是外部外部范围等。

# git - 在 diff 中也使用逗号作为单词分隔符

> ID：10482773
> 
> 赞同：33
> 
> 时间：2012-05-07T13:13:25.590
> 
> 标签：git, diff

如何`,`为 git diff --word-diff 添加单词分隔符？

例如，我希望差异能够识别

```
function(A,B,C) -> function(A, B, C) 
```

只添加了空格而不是替换整行。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-05-07T13:32:09.167

使用`--word-diff-regex`：

```
 --word-diff-regex=<regex>
       Use <regex> to decide what a word is, instead of considering runs
       of non-whitespace to be a word. Also implies --word-diff unless it
       was already enabled.

       Every non-overlapping match of the <regex> is considered a word.
       Anything between these matches is considered whitespace and
       ignored(!) for the purposes of finding differences. You may want to
       append |[^[:space:]] to your regular expression to make sure that
       it matches all non-whitespace characters. A match that contains a
       newline is silently truncated(!) at the newline.

       The regex can also be set via a diff driver or configuration
       option, see gitattributes(1) or git-config(1). Giving it explicitly
       overrides any diff driver or configuration setting. Diff drivers
       override configuration settings. 
```

我从未使用过它，但我想这`git diff --word-diff-regex="[^[:space:],]+"`可能会奏效。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-10-10T11:01:33.950

除了 KurzedMetal 的回答：如果没有引号，它的效果会更好，因为它在点击 TAB 时不会破坏我的 bashs 自动完成。

`git diff --word-diff-regex=[^[:space:],]+`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T13:43:35.480

您也可以尝试`-w`/ `--ignore-all-space`，尽管这可能会忽略比您喜欢的更多的空格。

# jetty - 如何使用嵌入式 Jetty 提供静态内容？

> ID：10482774
> 
> 赞同：1
> 
> 时间：2012-05-07T13:13:27.027
> 
> 标签：jetty, embedded-jetty

我尝试使用嵌入式 Jetty 提供简单的 html 文档，但我不断收到 404 错误。这是我的相关设置

```
ResourceHandler resource_handler = new ResourceHandler();
resource_handler.setDirectoriesListed(true);
resource_handler.setWelcomeFiles(new String[] { "index.html" });
resource_handler.setResourceBase(".");
server.setHandler(resource_handler); 
```

当我从 Eclipse 运行它并打印出 BaseResource 时，我将获得我的项目的工作区目录，其中有一个简单的 index.html。但是，如果我尝试使用网址[http://127.0.0.1:8888/index.html](http://127.0.0.1:8888/index.html)，我会收到 404 错误 - 我错过了什么？

# asp.net - 收到错误“超时已过期。在操作完成之前超时时间已过或服务器没有响应。”

> ID：10482775
> 
> 赞同：2
> 
> 时间：2012-05-07T13:13:29.363
> 
> 标签：asp.net, sql, iis

我的网站在 IIS 下正确运行。但是工作了很长时间。它开始给出超时错误，似乎服务器忙于做其他工作。但是 SQL 服务器在我的本地主机上运行，​​除了当前应用程序之外没有服务器使用/负载。

*“超时已过。在操作完成之前超时时间已过或服务器没有响应。”*

完成系统重启后，我才能恢复我的工作。在这方面需要帮助。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-16T15:49:08.920

我已经使用重新编译来解决这个问题。

```
EXEC sp_recompile N'myproc' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T13:26:41.477

听起来你正在达到执行超时。如果您达到此阈值，您可能需要进行一些分析以查看某处是否存在性能瓶颈。要解决此问题，您可以在以下内容中指定执行超时`web.config`：

```
<httpRuntime executionTimeout="180" /> <!-- in seconds --> 
```

要更改 SQL Server 中的执行超时，请转到服务器属性：

[http://img197.imageshack.us/img197/3152/srvrprops.png](http://img197.imageshack.us/img197/3152/srvrprops.png)

有关更多详细信息，请参见此处：
[更改 SQL Management Studio 中的 CommandTimeout](https://stackoverflow.com/questions/1137190/changing-the-commandtimeout-in-sql-management-studio)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-15T15:19:26.430

最后通过从过程缓存中清除执行计划解决了这个问题。

要清除计划缓存，请运行以下脚本...

```
SELECT plan_handle, st.text
FROM sys.dm_exec_cached_plans 
CROSS APPLY sys.dm_exec_sql_text(plan_handle) AS st
where objtype = 'Proc' AND st.[text] like '%[Enter stored procedure name here]%' 
```

如果缓存中存在存储过程，则结果应如下所示：

![执行计划查询的结果](../Images/f4af847f6d27c20c1437a59c7659a610.png)

从返回的结果中替换下面示例中的*plan_handle* ...

```
-- Remove the specific execution plan from the cache.  
DBCC FREEPROCCACHE (0x050017005CBF201940A1CE91000000000000000000000000);  
GO 
```

更多信息[在这里](http://technet.microsoft.com/en-us/library/ms174283(v=sql.105).aspx)

# networking - 块校验字符 (BCC) 错误突发检测

> ID：10482777
> 
> 赞同：1
> 
> 时间：2012-05-07T13:13:36.827
> 
> 标签：networking, error-detection, parity

免责声明：不是家庭作业！

# 问题

我一直在为我的网络课程阅读密件抄送错误检测，并且对某些幻灯片中的一个特定解释感到有些困惑。

# 给定信息

我们提供了以下解释：

```
 | r |m6 |m5 |m4 |m3 |m2 |m1 |m0
------------------------------------
w0  | 0 | 1 | 0 | 0 | 1 | 0 | 0 | 0
w1  | 0 | 1 | 1 | 0 | 0 | 1 | 0 | 1
w2  | 0 | 1 | 1 | 0 | 1 | 1 | 1 | 1
w3  | 0 | 1 | 1 | 0 | 1 | 1 | 1 | 1
w4  | 0 | 1 | 1 | 0 | 1 | 1 | 1 | 1
-----------------------------------
BCC | 0 | 1 | 0 | 0 | 0 | 0 | 1 | 0 
```

*   设 n = 行长（本例中 n=8）
*   请记住，并非突发中的所有位都需要出错，只有第一个和最后一个
*   BCC 处理 (n+1) 位突发（在这种情况下为 9 位突发）

# 问题

有人可以向我解释这是怎么回事/它是如何工作的吗？

# 示例问题

（在过去的论文中看到）例如给定上图，在一个块中可以可靠地检测到多少个突发比特？解释你的答案。

非常感谢任何帮助！

* * *

**编辑：添加参考幻灯片**

![（唯一的）幻灯片是我关于这个主题的讲义](../Images/4dddb5a343efbc05f9a7ca24c2811dbd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:56:17.323

彼得，该列`r`包含 的求和模块 2 `m0 ... m6`，因此可以检测到一个字中的任何奇数个错误（`r`称为*奇偶校验位*）。

同样，每个***BCC***位由列的求和模块 2 计算，这就是为什么***BCC***也称为***纵向冗余校验***。

现在，要产生**不可**检测的突发错误（意味着编码方案未能达到目的），行和列中***都***需要偶数个错误。所以，要找到***最短的***无法检测到的错误突发，您必须在一个字中有 2 位错误（因此奇偶校验位不会检测到），并且在下一个字（最短突发）中有另外 2 位错误，错误是列对齐的（所以***密件抄送***没有捕捉到这种情况）。***这种结构需要n+2***位的突发长度，如图中红色所示。因此，任何长度小于或等于***n+1***位的错误突发都可以通过这种方法检测到。

请注意，***BCC*****可以检测到许多**其他更长的错误突发组合，但是当您谈论编码方案的*错误检测能力*时，您指定了最坏的情况。 **我希望这有帮助！**

# android - 配置 ADB 时出错

> ID：10482780
> 
> 赞同：2
> 
> 时间：2012-05-07T13:13:45.463
> 
> 标签：android, adb

![ ](../Images/9653359f4ab2a4452cb7abba1fbcceb1.png)

尝试配置 ADB 以便我可以通过 wifi 对其进行调试，我在 Google 上进行了检查，但没有得到正确的分辨率。

告诉我在端口地址，设备ip中输入什么。

此外，当我在 set 和 prop 之间留出空间时，setprop service.adb.tcp.port 命令正在运行，有点混淆......

寻求帮助

我得到了以下文章，并在相同的情况下需要帮助。

*   断开设备与 USB 的连接，然后告诉它监听 4455 adb tcpip 4455 在 TCP 模式下重新启动端口：4455

*   使用指定的 ip:port 连接到设备。我的设备正在使用 wifi adb connect 192.168.1.103:4455 连接到 192.168.1.103:4455

*   现在通过 tcp adb shell 执行正常的 adb 命令

*   完成后，您可以将其放回 USB 模式 adb usb 在 USB 模式下重新启动 Help me

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:30:30.267

这些是针对 android 设备外壳的命令，而不是针对主机系统的命令。

键入 adb shell 以获取设备的外壳，然后输入它们。如果您返回到 windows shell 提示符，那么您来错地方了。

然而，这些命令在安全设备上可能无论如何都无效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T19:43:06.360

`setprop`是一个 Android 命令，旨在在设备上之后`su`在终端中使用（您可以这样做`adb shell setprop ...`，但当您`adb shell stop adbd`失去设备连接时）。如果已经通过 USB 连接，更简单的方法是`adb tcpip 8600`then `adb connect IP_OF_PHONE:8600`- 但这只有在`adb shell`为您提供 root 提示时才有效（以`#`and not开头`$`）。请注意，您 wifi 网络上的任何人都可以访问您的设备！

# java - 为什么 FileInputStream 关 闭

> ID：10482781
> 
> 赞同：0
> 
> 时间：2012-05-07T13:14:00.333
> 
> 标签：java, android

我正在尝试按块从本地存储中读取视频文件并上传到服务器。我有这个代码在另一个java平台上工作，所以我认为它会很简单。

当我尝试使用打开文件时

```
 File f = new File(filePath);
 fileIn = new FileInputStream(f); 
```

它打开了，我可以从文件中读取我需要的任何内容，尽管我调用了我的代码

```
 SocketFactory socketFactory = SSLSocketFactory.getDefault();
    Socket socket = socketFactory.createSocket(url, 443);

    _in = new InputStreamReader(socket.getInputStream());
    _out = (OutputStream)socket.getOutputStream(); 
```

套接字连接正常，但是当我在这段代码之后读取 FileInputStream 时，我得到流关闭异常。

有任何想法吗？我在日志中看不到任何内容以显示任何失败，但是一旦我连接到服务器，我就无法从文件输入流中读取？

让我知道您是否需要知道其他任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:27:26.087

这个例子对我有用：

```
public class MainClass {
  public static void main(String[] args) {
    String host = args[0];
    int port = Integer.parseInt(args[1]);

    try {
      System.out.println("Locating socket factory for SSL...");
      SSLSocketFactory factory = (SSLSocketFactory) SSLSocketFactory.getDefault();

      System.out.println("Creating secure socket to " + host + ":" + port);
      SSLSocket socket = (SSLSocket) factory.createSocket(host, port);

      System.out.println("Enabling all available cipher suites...");
      String[] suites = socket.getSupportedCipherSuites();
      socket.setEnabledCipherSuites(suites);

      System.out.println("Registering a handshake listener...");
      socket.addHandshakeCompletedListener(new MyHandshakeListener());

      System.out.println("Starting handshaking...");
      socket.startHandshake();

      System.out.println("Just connected to " + socket.getRemoteSocketAddress());
    } catch (IOException e) {
      e.printStackTrace();
    }
  }
}

class MyHandshakeListener implements HandshakeCompletedListener {
  public void handshakeCompleted(HandshakeCompletedEvent e) {
    System.out.println("Handshake succesful!");
    System.out.println("Using cipher suite: " + e.getCipherSuite());
  }
} 
```

正如 snicolas 所说，`socket.startHandshake()`可以解决您的问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-07T13:20:40.233

你没有调用 socket.startHandshake();

# php - 使用 PHP 将多个变量通过 JSON 发送到 AJAX 不起作用

> ID：10482789
> 
> 赞同：0
> 
> 时间：2012-05-07T13:14:35.517
> 
> 标签：php, ajax, json, post

我有个问题。我想将 3-4 个变量从 PHP 文件发送到我的 AJAX 请求（通过 json）......我确信我的代码是正确的，它不起作用。它什么也没做。如果我只是在做一个普通的“回声”，一切正常，但 json 不工作？

这是我的 JS 代码：

```
$.ajax({
       type: "POST",
       url: "test.php",
       data: "varA=" + varA + "&varB=" + varB,
       dataType: json,
       cache: false,
       success: function(data1){

       alert(data1.b);

       if (data1.a == "success"){
       alert("OK");

       location.href = "index.html";
       }

       else{
       alert("Not OK");
       }

       }
       }); 
```

这是我的 PHP 代码：

```
...
    $qry="SELECT * FROM database1 WHERE varA='".$_POST['varA']."' AND varB='".$_POST['varB']."'";
$result=mysql_query($qry);

if($result) {
    if(mysql_num_rows($result) == 1) {
        $test = mysql_fetch_assoc($result);
        echo json_encode(array('a' => 'success', 'b' => $test['database_entry']));
... 
```

我不知道为什么这个 AJAX 代码不会被触发！希望你能帮助我，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T13:18:47.230

将您的数据作为 JSON 对象发送，而不是自行生成的查询字符串：

```
data:  {"varA":  varA, "varB": varB},
dataType: json,
cache: false, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T13:35:31.713

你写错了

`dataType: json,`

这里 json 应该在一个字符串中

`dataType: 'json',`

在您的代码中，它试图搜索`json`不可用且因此未定义的变量，因此不进行 ajax 调用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T13:18:44.057

您发送给 ajax 调用的数据是一个字符串，而它应该是一个对象或数组。

```
data: "varA=" + varA + "&varB=" + varB, 
```

应该

```
data: {"varA":varA,"varB":varB}, 
```

# google-app-engine - JDO/GAE继承+抽象超类NPE

> ID：10482793
> 
> 赞同：1
> 
> 时间：2012-05-07T13:15:05.763
> 
> 标签：google-app-engine, gwt, jdo

我想为一个简单的东西建模，但在从数据存储区读取时遇到了麻烦。我发现这个问题有不同的风格，但在我的情况下没有一个答案有帮助（使用接口而不是抽象是没有选择的）我有一个抽象类媒体：

```
@SuppressWarnings("serial")
@PersistenceCapable(identityType = IdentityType.APPLICATION, 
        detachable="true")
@Inheritance(strategy = InheritanceStrategy.SUBCLASS_TABLE)
public abstract class Media implements Serializable{

    @PrimaryKey
    @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
    @Extension(vendorName="datanucleus", key="gae.encoded-pk",
            value="true")
        ...
    @Persistent
    User owner;
} 
```

电影正在扩展它。

```
@SuppressWarnings("serial")
@PersistenceCapable(identityType = IdentityType.APPLICATION, 
        detachable="true")
public class Movie extends Media implements Serializable{
...
} 
```

一个用户有一个媒体列表。

```
@SuppressWarnings("serial")
@PersistenceCapable(identityType = IdentityType.APPLICATION, 
        detachable="true")
public class User implements Serializable{

    @PrimaryKey
    @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
    @Extension(vendorName="datanucleus", key="gae.encoded-pk",
            value="true")
    protected String id;
        @Persistent(mappedBy = "owner")
    private List<Media> ownedMediaSet = new ArrayList<Media>();
} 
```

读取操作代码为：

```
@Override
public List<UserDTO> readAllUser() throws IllegalArgumentException {

        ArrayList<UserDTO> result = new ArrayList<UserDTO>();
        PersistenceManager pm = pmf.getPersistenceManager();

        Query q = pm.newQuery("select from " + User.class.getName());   
    List<User> res = null;
            try {
        res = (List<User>) q.execute();

        for (User u : res) {
            UserDTO uDTO = new UserDTO(u.getId(),null,                        u.getName(), u.getEmail());
                result.add(uDTO);
            }// for

        } catch 
```

这会导致 NPE: java.lang.NullPointerException at

```
org.datanucleus.store.appengine.DatastoreTable.addFieldMapping(DatastoreTable.java:531)
    at org.datanucleus.store.appengine.DatastoreTable.initializeNonPK(DatastoreTable.java:440) 
```

我不明白。没有 Media 是抽象的，一切都可以正常工作。也许有人知道这个问题，可以给我一个提示。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:38:08.710

您不能列出媒体...因为没有可实例化的媒体类。--> 这意味着没有“数据库表”媒体

多态关系不适用于 GAE ... [https://developers.google.com/appengine/docs/java/datastore/jdo/relationships#Polymorphic_Relationships](https://developers.google.com/appengine/docs/java/datastore/jdo/relationships#Polymorphic_Relationships)

```
 @Persistent(mappedBy = "owner")
private List<Media> ownedMediaSet = new ArrayList<Media>(); 
```

使类媒体不抽象，然后它就可以工作。

或者你制作一个电影列表......

```
 @Persistent(mappedBy = "owner")
private List<Movie> ownedMediaSet = new ArrayList<Movie>(); 
```

但这可能不是你想要的。

所以最后一个选项是这篇文章中的内容： [https ://developers.google.com/appengine/docs/java/datastore/jdo/relationships#Polymorphic_Relationships](https://developers.google.com/appengine/docs/java/datastore/jdo/relationships#Polymorphic_Relationships)

列出密钥列表：

```
@Persistent
private List<Key> ownedMediaSet = new ArrayList<Key>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T17:21:39.900

试试 Google 的 JDO 插件 v2.0，看看效果如何。可能它没有什么不同，但如果是这样的话，你可以很容易地在[http://code.google.com/p/datanucleus-appengine/issues/list上](http://code.google.com/p/datanucleus-appengine/issues/list)*用简单的测试用例*提出问题事实上 v1 插件做了一些以不合逻辑的方式处理事情（有关这种不合逻辑的处理导致的一些链接，请参见 Sam 的回答）。您也可以只将继承策略设置为 COMPLETE_TABLE，因为这是 BigTable 真正支持的所有内容（即每个类都有一个“种类”，其中包含该类型的所有属性）。

# java - 访问动态生成的 GUI JTextField 对象

> ID：10482796
> 
> 赞同：0
> 
> 时间：2012-05-07T13:15:26.337
> 
> 标签：java, dynamic, jpanel, instance, jtextfield

我正在编写一个包含`JButton`. 每次单击按钮时，`JTextField`都会向`JPanel`.

我的问题是，在用户创建了所有内容`JTextFields`并用信息填充它们之后，我需要获取每个字段的文本。当它们动态生成时，我如何访问`JTextFields`它们，因为它们没有实例名称？有没有更好的方法来获取每个文本的文本，而不知道它们的实例名称。

这是`actionPerformed`事件的代码`JButton`...

```
private void jButton4ActionPerformed(java.awt.event.ActionEvent evt) {                                         
    JTextField x = new JTextField();
    x.setColumns(12);
    p.add(x); 
    validate();
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-07T13:19:21.163

你说你想从每个字段中获取文本。那么，当您创建新实例时`x`，为什么不保留它们的集合，例如添加`JTextFields`到一个`ArrayList`？

或者，假设它`p`是 a `JPanel`，您应该能够获得所有孩子，这`JTextFields`就是您要添加的孩子。尝试`getComponents()`像这样使用...

```
Component[] children = p.getComponents();
for (int i=0;i<children.length;i++){
    if (children[i] instanceof JTextField){
        String text = ((JTextField)children[i]).getText():
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T13:30:06.080

您可以通过遍历面板的组件（或任何“p”）来找到它们。如有必要，检查每个是否都是文本框。也就是说，执行 p.getComponents 然后遍历返回的数组。喜欢：

```
Component[] components=p.getComponents();
for (Component c : components)
{
  if (c instanceof JTextField)
  {
    String value=((JTextField)c).getText();
    ... do whatever ...
  }
} 
```

如果它们可以互换，那应该就是您所需要的。如果您需要区分它们，我认为最干净的做法是创建您自己的扩展 JTextField 的类，并且该类具有用于名称或序列号或您需要的任何内容的字段。

# jquery - 预加载图像/文本，因此当触发 .load 时没有延迟

> ID：10482798
> 
> 赞同：0
> 
> 时间：2012-05-07T13:15:39.160
> 
> 标签：jquery, preload, jquery-load, google.load

我使用 jquery .load 将一些内容和图像加载到滑出 div 中，但加载图像似乎有延迟，所以当面板滑出时，我最终得到了图像的占位符框。有没有一种方法可以延迟 .load 函数，直到内容准备好或预加载图像，这样一开始就不会延迟？

这就是我用来加载图像/激活幻灯片的内容

```
google.setOnLoadCallback(function () {
$("#show-services").click(function (e) {
    e.preventDefault;
    $(".content").load("index.html .get", function () {
        $('.hide-content').click(function () {
            $(".content").hide("slide", {
                direction: "right"
            }, 1000);
        });
    });
    return false;
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T16:10:21.283

您可以使用以下方法。

```
$('#content').load("index.html", function(){
   setTimeout(function(){alert("loaded")}, 3000);
}); 
```

页面加载成功后设置超时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T13:19:05.000

您可以隐藏容器，然后加载图像并等待它们被加载（使用 Image 对象数组，其 src 取自您的内容并带有 onload 回调和计数器）。

# c# - 使用 NUnit 时的 NRE

> ID：10482804
> 
> 赞同：-1
> 
> 时间：2012-05-07T13:16:24.923
> 
> 标签：c#, nunit

我正在尝试为纸牌游戏应用程序设置单元测试，但我的代码抛出 NullReferenceException: Object reference not set to an instance of an object。据我所知，我不应该收到此错误，但确实存在。

这是我的代码：

```
 [TestFixture]
        public class Tests
        {
            CardTable aTable = null;

            [SetUp]
            public void setup()
            {
                aTable = new CardTable();
            }

            [Test]
            public void setPlayerGold_setTo0_return0()
            {
                //arrange

                //act
                aTable.setPlayerGold(0);

                //assert
                Assert.AreEqual(0, aTable.playerGold);
            }
       }

       public class CardTable
       {
           int playerGold;

           public CardTable()
           {
               playerGold = 0;
           }

            public void setPlayerGold(int amount)
            {
               if (amount == 0)
               {
                    playerGold = 0;
               }
               else
               {
                   playerGold += amount;
               }
               goldLabel.Text = playerGold + "";
            } 
```

异常被抛出在 aTable.setup 行，好像 aTable 没有被实例化，即使它显然在 [Setup] 中，我不知道为什么。当我删除“act”调用时，测试通过，所以 aTable*不能*为空，否则测试也会在那里失败。

我正在使用 NUnit 2.6.0.12051 运行 Visual C# 2010 Express v10.0.40219.1 SP1Rel。

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:29:32.227

您可能还想更改您的值`Assert.AreEqual(0, aTable.playerGold);`以使用 get 方法，而不是直接引用 objects 属性。

所以像

```
aTable.getPlayerGold() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T13:22:03.183

我相信它在 goldLabel.Text 您没有在任何地方实例化表单，因此表单上的控件为空。

作为一般规则，您可能不想在单元测试中测试标签是否设置为某个值，而是以某种方式模拟此对象或只是编写一个设置了值的测试（但不是更新标签的文本.)

# c# - 从网站/退出应用程序启动 JavaScript

> ID：10482807
> 
> 赞同：0
> 
> 时间：2012-05-07T13:16:42.130
> 
> 标签：c#, javascript, process

长话短说，它是关于带有 WebBrowser 控件的 Windows 窗体应用程序。该应用程序打开一个网站，填写用户名和密码，登录，通过执行 javascript 启动一个 vpn 客户端 (exe)。一旦 vpn 客户端成功启动，应用程序应该退出。上半场工作正常。

我想检查vpn客户端是否正在运行，如果是，它应该关闭我的应用程序，否则等待exe启动。

```
private void LaunchJS()
        {
            HtmlDocument doc = webBrowser1.Document;
            Object js = doc.InvokeScript("launchJS");
            label1.Text = "complete";
        } 
```

.

```
if (label1.Text == ("complete"))
            {
            bool prc = false;
            while (!prc)
            {
                foreach (Process clsProcess in Process.GetProcesses())
                {
                    if (clsProcess.ProcessName.Contains("JS_plugin"))
                    {
                        prc = true;
                        Application.Exit();
                    }
                }
            }
            } 
```

我遇到的问题是，当我启用代码的第二部分（检查过程）时，javascript 启动不成功。java脚本没有执行，程序永远不会启动，检查过程进入无限循环。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T07:10:03.990

在单独的线程中进行流程检查解决了我的问题。

```
private void GetPRo()
{
    if (label1.Text == ("complete"))
    {
        bool prc = false;
        while (!prc)
        {
            foreach (Process clsProcess in Process.GetProcesses())
            {
                if (clsProcess.ProcessName.Contains("JS_plugin"))
                {
                    prc = true;
                    Application.Exit();
                }
            }
        }
    } 
} 
```

.

```
Thread CloseApp = new Thread(new ThreadStart(GetPro));
CloseApp.Start(); 
```

# model-view-controller - JavaFX 视图导航

> ID：10482809
> 
> 赞同：1
> 
> 时间：2012-05-07T13:16:52.067
> 
> 标签：model-view-controller, navigation, javafx-2

我正在开发一个桌面 JavaFX 2 应用程序。我们使用 FXML，一种 MVC 架构来构建选项卡式 UI。现在我正在努力为这种情况找到一种优雅的方式：

1.  用户单击视图 1 上的按钮，该按钮位于主视图的选项卡中。
2.  控制器创建一个新的模型对象。
3.  新模型对象通过视图 2 显示，该视图在主视图的另一个选项卡中打开。

是否适合实现一个类似于 GWT 的类来`com.google.gwt.user.client.History`处理所有导航请求。首先，我必须注册主视图。还是我在监督 JavaFX 机制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T17:25:37.150

我实现了一个带有历史管理的选项卡式 Web 浏览器，这听起来与您的情况有点相似。 [代码](http://code.google.com/p/willow-browser/source/browse/)有点乱，但如果你想看看是否有任何适用于你的情况的有价值的东西，你可以看一下。

对于 JavaFX 的下一个版本 (2.2)，将有一个通用[分页控件](http://javafx-jira.kenai.com/browse/RT-19375)（任何人都可以在该链接上注册以查看问题），这可能有助于封装您需要的一些功能，因为它提到了类似 TabPane 的功能。

在[open-jfx 开发邮件列表](http://mail.openjdk.java.net/mailman/listinfo/openjfx-dev)上也有一些[关于 JavaFX 历史功能](http://mail.openjdk.java.net/pipermail/openjfx-dev/2012-May/001594.html)的讨论。

[创建jfx-flow](http://www.zenjava.com/jfx-flow/)项目是为了在 JavaFX 上启用类似 web 的界面（例如，带有历史导航的视图）。不确定它是否完全针对您的用例开发，但您也可以看看。

# c++ - RGB 缓冲区到 JPEG 缓冲区，这里有什么问题？

> ID：10482812
> 
> 赞同：4
> 
> 时间：2012-05-07T13:17:07.727
> 
> 标签：c++, encoding, jpeg

我需要一种简单的方法将包含 RGB 数据的缓冲区转换为 jpeg。我已经尝试过使用 libjpeg，但我根本无法让它正常工作。例如，将缓冲区保存为位图会产生以下结果：

![位图截图](../Images/c9dd97eee7e3d83faf0cb085b638b2d1.png)

使用 libjpeg 对内存中的相同图像进行编码会产生以下结果：

![在此处输入图像描述](../Images/adbae50f77a166e278dc2d484a4f066e.png)

将图像直接保存到文件中只会中止，而不会给出警告、错误或任何东西。

我当然需要一些有用的东西！

这就是我正在做的

```
void OnKeyPress(unsigned char key, int x, int y) {
  if (key != static_cast<unsigned char>('p'))
    return;

  int width = g_current_width;
  int height = g_current_height;
  boost::scoped_array<boost::uint8_t> buffer(new boost::uint8_t[3 * width * height]);

  glReadBuffer(GL_FRONT);
  glReadPixels(0, 0, width, height, GL_RGB, GL_UNSIGNED_BYTE,
              reinterpret_cast<GLvoid *>(buffer.get()));
  glReadBuffer(GL_BACK);

  FlipImage(buffer.get(), width, height);

  // Generate a BMP files for testing purposes
  SaveRGB("screenshot.bmp", buffer.get(), width, height);

  jpeg_compress_struct cinfo;
  jpeg_error_mgr jerr;
  cinfo.err = jpeg_std_error(&jerr);
  jerr.trace_level = 10;
  jpeg_create_compress(&cinfo);
  boost::uint8_t *jpeg_buffer_raw = NULL;
  unsigned long outbuffer_size = 0;
  jpeg_mem_dest(&cinfo, &jpeg_buffer_raw, &outbuffer_size);

  cinfo.image_width = width;
  cinfo.image_height = height;
  cinfo.input_components = 3;
  cinfo.in_color_space = JCS_RGB;
  jpeg_set_defaults(&cinfo);

  jpeg_set_quality(&cinfo, 100, true);
  jpeg_start_compress(&cinfo, true);
  int row_stride = width * 3;
  JSAMPROW row_pointer[1];
  int counter = 0;
  std::cout << boost::format("height: %d\n") % height;
  boost::uint8_t *r_buffer = buffer.get();
  while (cinfo.next_scanline < cinfo.image_height) {
    row_pointer[0] = &r_buffer[cinfo.next_scanline * row_stride];
    jpeg_write_scanlines(&cinfo, row_pointer, 1);
    std::cout << boost::format("current line: %d\n") % (counter++);
  }
  jpeg_finish_compress(&cinfo);
  jpeg_destroy_compress(&cinfo);
  std::ofstream jpegfile("screenshot.jpg");
  jpegfile.write(reinterpret_cast<const char*>(jpeg_buffer_raw), outbuffer_size);
  jpegfile.flush();
  // calling free(jpeg_buffer_raw); or delete[] jpeg_buffer_raw; generates an error
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T06:46:20.500

所以，我发现了问题，而且在最后，输出文件应该是这样初始化的：

```
std::ofstream jpegfile("screenshot.jpg", std::ios_base::out | std::ios_base::binary); 
```

# iphone - 从图像复制人脸

> ID：10482815
> 
> 赞同：-2
> 
> 时间：2012-05-07T13:17:17.293
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我是这个论坛的菜鸟，但想试一试。

我目前正在学习 Objective-C 和 Cocoa；尝试构建我的第一个 iPhone 应用程序。

我正在做的一件事是允许用户从他们拍摄的图像中剪下他/她的脸并将其粘贴到另一张图像中。（这个想法是从一张图片中剪下来的，然后粘贴到另一张图片中，并留出一张脸。）

如何才能做到这一点？我想我会允许用户以矩形的形式触摸并拖动他们的脸，然后允许他们复制。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T15:00:25.660

好吧，尽管你问的有点自大，这里有一些关于如何开始的指南：通用 obj-c/iOS 开发（从 hello world 开始）；UIImage 类；相机API；图像处理算法，人脸检测算法。循序渐进，不想一下子解决所有问题。首先编写一个简单地加载任意照片并将其显示给用户的应用程序。然后修改它可以从图像中裁剪出指定的矩形区域并将其保存到新文件中。然后编写一个打开相机的应用程序，您可以拍摄图像并将其保存到磁盘。然后结合你写的你只保存捕获图像的裁剪区域。

当您到达这一点时，您将了解更多关于软件开发图像处理的知识。在此之后，您可以开始寻找图像处理算法。也可以从这里开始使用一些简单的东西，比如你实现的微不足道的模糊过滤器或类似的东西。如果你已经对图像处理有所了解，可以在网上搜索人脸检测算法。您甚至可能会找到一些包含这些功能的现成框架，或者至少您会理解这些概念。您甚至可以回到这里堆栈溢出并询问有关良好人脸检测算法的建议，但是如果您已经选择了一个并且有一些具体问题，我们仍然更喜欢。

# gwt - 了解 Spring Roo 为 GWT 生成的实体代码

> ID：10482820
> 
> 赞同：4
> 
> 时间：2012-05-07T13:17:34.017
> 
> 标签：gwt, jpa, spring-roo, entitymanager

我们正在处理生成的 GWT 项目，`Spring Roo`但我们不再用于`Roo`编辑/生成类。相反，我们现在手动编写所有内容。

对于每个服务器端实体类 Roo 生成了相当奇怪的`EntityManager`获取代码。并且必须维护它，我想很好地理解它，但我没有。以下是生成的实体代码的片段：

```
@PersistenceContext
transient EntityManager entityManager;

public static final EntityManager entityManager() {
    EntityManager em = new Scenario().entityManager;
    if (em == null)
        throw new IllegalStateException(
                "Entity manager has not been injected (is the Spring Aspects JAR configured as an AJC/AJDT aspects library?)");
    return em;
}

@Transactional
public void persist() {
    if (entityManager == null)
        entityManager = entityManager();
    entityManager.persist(this);
}

public static List<Scenario> findAllScenarios() {
    List<Scenario> res = entityManager().createQuery(
            "select o from Scenario o order by o.name",
            Scenario.class).getResultList();
    return res;
}

public static Scenario findScenario(Long id) {
    if (id == null)
        return null;
    return entityManager().find(Scenario.class, id);
} 
```

我的观察和问题：

*   实例方法使用`EntityManager`Spring 注入的字段，这很清楚。但为什么这件作品用于：`if(entityManager == null) entityManager = entityManager();`？难道我们不期望`EntityManager`在`em`现场应该被注入并且不能被注入`null`（或者有什么问题吗？）
*   静态方法创建实体的新实例并获取其`EntityManager`字段，为什么？不能`EntityManager`缓存在静态字段或类似的东西中？
*   为什么 read 方法就像`findAllXXX`are not `@Transictional`？据我所知，根据 JPA 规范，所有 JPA 操作都应该在事务边界内完成？
*   分段方法真的有必要吗`if (id == null) return null;`？`findXXX`如果我们得到 null 作为`id`参数来表明有问题，我们不应该让应用程序崩溃吗？
*   我们能否以更优雅的方式重写这个`EntityManager`获取代码（例如，没有那些奇怪的`new Entity().entityManager`东西）但不破坏它（可能需要保留一些先决条件）？
*   为什么是`EntityManager`字段`transient`？那很重要吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:53:40.750

我完全同意你的看法，代码看起来很可疑。

[在http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/dao.html](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/dao.html)和[http:/](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/transaction.html)中完美解释了在 DAO 中使用 EntityManager 和使用 Spring 使用 @Transactional 的常用方法[/static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/transaction.html](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/transaction.html)，我不明白为什么这对于 Roo 生成的代码应该有所不同。

# php - 如何制作像 Liftmagic 这样的东西

> ID：10482822
> 
> 赞同：-2
> 
> 时间：2012-05-07T13:17:59.070
> 
> 标签：php, jquery, image, imagemagick, gd

我有一个客户要求类似以下网站：

[http://liftmagic.com/](http://liftmagic.com/)

我们该怎么做呢？

我可以使用 jQuery 进行图像处理还是应该使用其他东西？

我想我也可以使用像 GD 这样的服务器端库来进行图像处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:02:37.350

您将不得不使用各种插件来获得相同的功能。

人脸检测（jQuery 插件）：http: [//facedetection.jaysalvat.com](http://facedetection.jaysalvat.com)
图像旋转（jQuery 插件）：[http](http://code.google.com/p/jqueryrotate/)
://code.google.com/p/jqueryrotate/ 图像裁剪（jQuery 插件）：[http://deepliquid。 com/projects/Jcrop/](http://deepliquid.com/projects/Jcrop/)

# sql - 使用 COUNT() 进行计算

> ID：10482827
> 
> 赞同：5
> 
> 时间：2012-05-07T13:18:45.187
> 
> 标签：sql, postgresql

我有一个可以分组的数据集，并且想知道每组中行的百分比。

这似乎几乎可行，除了因为恕我直言缺少类型转换，它为每个组返回 0

```
SELECT COUNT(*) / (SELECT COUNT(name) 
                    FROM x 
                    WHERE d = '0') 
  FROM x, y 
  WHERE x.a = y.a AND x.b = '0' 
  GROUP BY y.c 
  ORDER BY y.c ASC 
```

我如何正确投射这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T13:21:10.490

你应该能够做到

```
select 1.0 * count(*) / ..... 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-07T14:18:34.113

而不是乘以`1.0`，您可以直接转换。这对我来说似乎更清晰。一方面，它明确了您要使用的数据类型。`float4`您可能对精确度或近似值感到满意，而不是为精确计算`float8`支付额外费用。`numeric`

```
SELECT COUNT(*)::float / (SELECT COUNT(name) 
                           FROM x 
                           WHERE d = '0')::float
  FROM x, y 
  WHERE x.a = y.a AND x.b = '0' 
  GROUP BY y.c 
  ORDER BY y.c ASC 
```

```
test=# 选择 1.0 * 5 / 10;
        ？柱子？        
----------------------
 0.50000000000000000000
(1 行)

test=# 选择 pg_typeof(1.0 * 5 / 10);
 pg_typeof
------------
 数字
(1 行)

test=# 选择 5::float / 10::float;
 ？柱子？
----------
      0.5
(1 行)

test=# 选择 pg_typeof(5::float / 10::float);
    pg_typeof     
------------------
 双精度
(1 行)

```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T13:21:58.130

如果您转换为`float`您的问题可能会解决：

```
SELECT convert(double, COUNT(*)) / (SELECT convert(double, COUNT(name)) 
                    FROM x 
                    WHERE d = '0') 
  FROM x, y 
  WHERE x.a = y.a AND x.b = '0' 
  GROUP BY y.c 
  ORDER BY y.c ASC 
```

# busybox - 如何从灰壳重启？

> ID：10482829
> 
> 赞同：19
> 
> 时间：2012-05-07T13:18:46.303
> 
> 标签：busybox, ash

如何从灰壳重启？

我有一个 Ubuntu 系统，由于某种原因（与这个问题无关），它目前已经变砖了，这意味着我启动到了 BusyBox ash shell。但是退出命令确实蹲下，并且重置是无关紧要的。一定有比电源按钮更好的重启方法，对吧？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2014-10-10T10:34:23.677

我一直在寻找相同的东西，而我的 BusyBox 安装没有关闭、重新启动或重新启动命令。

我使用`poweroff -f`是因为`poweroff`没有参数不会做任何事情。

如果前面的命令不起作用，请尝试执行 a`ls -la /bin`或 a`ls -la /sbin`以查看 BusyBox 安装中可用的命令。

正如 user6214440 所说，如果您的安装没有良好的路径环境，您应该需要使用完整路径执行命令，例如`/sbin/reboot`或`/sbin/poweroff`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-13T02:54:20.210

你没有重启或关机命令吗？不带参数的重启应该重启你的盒子，或者'shutdown -r now'也应该这样做。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-10T19:03:45.783

在我的运行 ash shell 的 Alpine 盒子上，完全关闭的命令是`poweroff`. `shutdown -h now`我注意到它与我通常在[CentOS 机器](http://en.wikipedia.org/wiki/CentOS)上处理的更熟悉的事情相同。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-06-26T16:33:02.297

> 在 BusyBox v1.18.4 (2011-03-18 03:57:01 EDT) 多呼叫二进制上测试

一些 BusyBox 版本也使用强制重启命令重启：

`reboot -f`

`reboot --help`

了解更多信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-19T01:02:01.757

我有一个类似的“忙箱”问题，但它通常只在 Windows 会话（我的 DAW 需要它）后重新启动时发生作为 MXlinux 19.x 并从那里运行 Gparted 它位于管理下的菜单中（您需要使用密码对其进行授权，对于实时 USB，我认为它是“root”或“demo”。

在它完成它的事情之后，我寻找上面有 Linux 的分区，它总是有一个带有感叹号的三角形，要检查的那个，右键单击它，选择“检查”，然后单击顶部的勾号窗口/屏幕，回答“是”以应用并等待它检查您分区的文件系统。

完成后，打开终端并键入 reboot 或执行此操作，但您通常会重新启动。这就是我每次解决问题的方法。

# ajax - 使用 ajax 在 div 中加载页面，然后在同一个 div 中提交加载

> ID：10482831
> 
> 赞同：-1
> 
> 时间：2012-05-07T13:18:50.360
> 
> 标签：ajax, jsp, html

我有一个带有超链接的主页和一个 div 标签 id="contentarea"，其中加载了此超链接的结果。现在单击链接搜索，**search.jsp**加载其中包含一个提交按钮和**表单 action="search.jsp ”。**search.jsp 包含一些用于搜索的下拉列表。我希望在下拉列表下方的相同 div id="contentarea" 中显示结果。我不知道 jQuery 并且想避免它，plz。对于 div 中页面的动态 ajax 加载，我使用提供的代码 [http://www.dynamicdrive.com/dynamicindex17/ajaxcontent.htm](http://www.dynamicdrive.com/dynamicindex17/ajaxcontent.htm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:36:08.877

```
$("#contentarea").load("search.jsp"); 
```

# hibernate - 如果 2 个表之间存在间接关系，如何在 Hibernate 中重新排序

> ID：10482837
> 
> 赞同：0
> 
> 时间：2012-05-07T13:19:34.157
> 
> 标签：hibernate, relationship

在 Hibernate 中，我有 3 个表 table1、table2 和一个主表。表 1 与主表具有一对多关系，表 2 与主表具有一对一关系。我的问题是，是否可以使用 table2 对象获取 table1 记录，而 table1 和 table2 之间没有直接关系，但两者之间通过主表有间接关系。如果可能，请解释我们如何使用 table2 对象获取 table1 记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T17:24:53.833

您可以在 table1 和 table2 之间形成笛卡尔连接，并通过 where 条件表示间接关系。

例如：从 tableA 中选择 a 作为 a，tableB 作为 b 其中 a.column1 = b.column2 和 b.column3 = 10

希望这能解决你的问题。

编辑：如果 table1 和 table2 有一列共享主表中的共同值但没有直接关系，则可以使用上述内容。否则，您将不得不使用主表来连接/关联表 1 和表 2。

# php - PHP Web 服务客户端：Guzzle 和 xsd

> ID：10482838
> 
> 赞同：2
> 
> 时间：2012-05-07T13:19:38.837
> 
> 标签：php, xml, web-services, xsd

我是使用 xml 和 xsd 东西的新手。我正在尝试使用 Guzzle 创建一个 Web 服务客户端：

[http://guzzlephp.org/index.html](http://guzzlephp.org/index.html)

按照本教程，我能够创建一个非常基本的客户端和 1 个命令：

[http://guzzlephp.org/tour/building_services.html](http://guzzlephp.org/tour/building_services.html)

我遇到的问题是如何将返回的 XML 转换为更有用的格式。我正在使用的 Web 服务（及其文档和 xsd）可以在这里找到：

[http://www.epo.org/searching/free/ops.html](http://www.epo.org/searching/free/ops.html)

我得到一个 SimpleXMLElement。假设 XML 的以下内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="/2.6.2/style/exchange.xsl"?>
<ops:world-patent-data xmlns:ops="http://ops.epo.org" xmlns="http://www.epo.org/exchange" xmlns:ccd="http://www.epo.org/ccd" xmlns:xlink="http://www.w3.org/1999/xlink">
    <ops:meta name="elapsed-time" value="30"/>
    <exchange-documents>
        <exchange-document system="ops.epo.org" family-id="19768124" country="EP" doc-number="1000000" kind="A1">
            <bibliographic-data>
                <publication-reference>
                    <document-id document-id-type="docdb">
                        <country>EP</country>
                        <doc-number>1000000</doc-number>
                        <kind>A1</kind>
                        <date>20000517</date>
                    </document-id>
                    <document-id document-id-type="epodoc">
                        <doc-number>EP1000000</doc-number>
                        <date>20000517</date>
                    </document-id>
                </publication-reference>
                <!-- a lot of content snipped -->
            </bibliographic-data>
        </exchange-document>        
    </exchange-documents>
</ops:world-patent-data> 
```

作为非常简单的示例，我如何提取文档编号（在上面 XML 的第 11 行）？

我试过：

```
$xpath = '/ops:world-patent-data/exchange-documents/exchange-document/bibliographic-data/publication-reference/document-id/doc-number';
$data = $result->xpath($xpath); 
```

及其变体，但 $data 始终是空数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:51:04.680

XPath 允许这样做：

```
//document-id 
```

这将返回所有`document-id`节点，无论它们在 DOM 中的什么位置。`/.../.../.../`除非您真的需要确定某物的位置，否则您不必指定绝对类型路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T16:51:43.063

我相信您的问题与名称空间前缀的使用有关。我要做的（也是最佳实践）是确保在编写 xpath 之前注册自己的前缀和命名空间。这样，我将使用由我控制的前缀。

PHP 有一种奇怪的（在我看来）处理这个问题的方式，因为它允许一种“默认”方式，即尝试自行解析前缀。在您的情况下，此路径中的标签`exchange-documents/exchange-document/bibliographic-data/publication-reference/document-id/doc-number`实际上是合格的，因为`xmlns="http://www.epo.org/exchange"`. 如果您要为此命名空间注册一个前缀，并在您的 XPath 中使用它，我相信您的东西会起作用。

查看此[PHP 帮助主题](http://www.php.net/manual/en/simplexmlelement.registerxpathnamespace.php)以了解更多信息...

# php - preg_replace 特殊字符

> ID：10482841
> 
> 赞同：1
> 
> 时间：2012-05-07T13:19:54.390
> 
> 标签：php, regex, preg-replace

我尝试更换

```
http://site.com/13/new new (2011).html 
```

至

```
http://site.com/13/new_new_2011.html 
```

这是我的代码，

```
<a href="<?php echo $row->id;?>/<?=preg_replace('#[^\w\-]+#','_', strtolower($row->showTitle()))?>.html"> 
```

**$row->showTitle()**是一个类似于**New New (2011)的标题**

但问题是因为我的链接现在看起来像这样

```
http://site.com/13/new_new_2011_.html 
```

我需要从 url _.html 中删除最后一个“_”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:22:14.237

尝试这个 ：

```
 <a href="<?php echo $row->id;?>/
 <?=trim(preg_replace('#[^\w\-]+#','_', strtolower($row->showTitle())), '_')?>.html"> 
```

它将删除任何尾随下划线。

# java - 将 JSP 中的模型读取为 Java 变量

> ID：10482845
> 
> 赞同：0
> 
> 时间：2012-05-07T13:20:08.190
> 
> 标签：java, jsp, spring-mvc

我的 JSP 中有这个，

```
<c:forEach items="${files}" var="f">
                <li>
                    <a href="">${f}</a>
                </li>
</c:forEach> 
```

我需要将文件作为 Java 变量访问。所以，我可以操纵这个。

得到它使用，request.getAttribute("files");

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T13:25:20.480

您也可以使用 jstl 对其进行操作。

```
<c:set var="f" value="Somthing else..." /> 
```

如果你想访问变量 java 我想你可以做

```
<% String f = (String)pageScope.getAttribute("f"); %> 
```

# iphone - Iphone 获得可用空间

> ID：10482849
> 
> 赞同：3
> 
> 时间：2012-05-07T13:20:33.860
> 
> 标签：iphone, objective-c

我正在使用这种方法来获取设备可用空间（在网络上找到）：

```
-(float)getFreeSpace{  
float freeSpace = 0.0f;  
NSError *error = nil;  
NSDictionary *dictionary = [[NSFileManager defaultManager] attributesOfFileSystemForPath:kSongsFolder error: &error];  

if (dictionary) {  
    NSNumber *fileSystemFreeSizeInBytes = [dictionary objectForKey: NSFileSystemFreeSize];  
    NSLog(@"%d",fileSystemFreeSizeInBytes);
    freeSpace = [fileSystemFreeSizeInBytes floatValue];  
} else { 
    //Handle error
}  
return freeSpace/1024; 
```

}

现在我从这个方法 8687616.0 中得到，当我检查设备属性时，我有 8.1 GB 的空闲空间。

如何获得以 MB 为单位的可用空间？并且这种方法做得很好，因为它们之间存在差异。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T13:22:22.880

```
fileSystemFreeSizeInBytes/(1024 * 1024) gives you size in MB 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T13:23:07.197

大小以 KB 为单位，您将不得不再次将其除以 1024。如果您需要以 GB 为单位，则再次除以 1024

# html - Twitter Bootstrap 中的全宽英雄单元

> ID：10482850
> 
> 赞同：14
> 
> 时间：2012-05-07T13:20:34.923
> 
> 标签：html, twitter-bootstrap

在[这个示例布局](http://twitter.github.com/bootstrap/examples/hero.html)中，我只希望英雄单位为 100% 宽并位于默认网格内。例如，[检查这个站点](http://www.htc.com/in/)。它只有全宽的英雄单元部分（展示区域）和固定宽度的其余部分（导航、底部内容、页脚）。

我需要在不丢失响应式设计功能的情况下做到这一点。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-07T13:24:04.210

将您的 div移到您的`.hero-unit`div 之外`.container`。

该`.container`样式将您限制在设定的宽度内。并且其中的任何内容都将具有其父级的最大宽度。代替：

```
<div class="container">
   <div class="hero-unit">
   </div>
</div> 
```

利用：

```
<div class="hero-unit">
</div>
<div class="container">
</div> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-30T03:47:36.700

答案是正确的，但是每当你调整网站大小时， hero-unit 都会改变为周围有空格（右 20 像素，左 20 像素），因为所有元素都绑定到 this `body has paddings in @media max-width: 767px`。只需执行以下代码即可修复它：

> @media (max-width: 767px) { .hero-container { margin-right: -20px; 左边距：-20px；} }

# java - 在 Jboss5 上创建计时器失败

> ID：10482851
> 
> 赞同：1
> 
> 时间：2012-05-07T13:20:35.607
> 
> 标签：java, jakarta-ee, jboss, ejb-3.0, transactionscope

我正在使用 EJB3.0 jboss5.1AS

我有一些以前没有发生过的奇怪问题。我正在尝试测试我的 ejb 无状态 bean。

我曾经模拟来自我耳内（在 WAR 项目内）的 servlet 的 ejb 调用，并且一切正常。

现在我们尝试通过 EJB 调用从外部 tomcat 服务器通过 EAR 外部的 servlet 测试这个 ejb

突然间我得到了这个例外：

```
7 May 12 13:13:11, ERROR DispactherBean:dispatchMsg:113 Exception. The error msg=Failed to create timer
javax.ejb.EJBException: Failed to create timer
    at org.jboss.ejb.txtimer.TimerServiceImpl.createTimer(TimerServiceImpl.java:263)
    at org.jboss.ejb.txtimer.TimerServiceImpl.createTimer(TimerServiceImpl.java:171)
    at org.jboss.as.ejb3.timerservice.TimerServiceFacade.createTimer(TimerServiceFacade.java:83)
    at DispactherBean.dispatchMsg(DispactherBean.java:94)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at 
```

……

我以这种方式触发我的计时器：

```
@Stateless
@Remote(
{ DispactherBeanRemote.class })
@RemoteBinding(jndiBinding = "DispactherBean")
public class DispactherBean implements DispactherBeanRemote, Serializable
{

    private static final long serialVersionUID = 1L;
    private final static Logger logger = Logger.getLogger(DispactherBean.class);

    @Resource
    private TimerService timerService;

         public void someMethod()
         { 

            timerService.createTimer(MomConstants.TRX_TIMEOUT_PERIOD,"test");
         }
     ..
     } 
```

我以这种方式从 tomcat/standalone 调用这个 bean：

```
Properties p = new Properties();
            p.put(Context.INITIAL_CONTEXT_FACTORY, "org.jnp.interfaces.NamingContextFactory");
            p.put(Context.URL_PKG_PREFIXES, "org.jnp.interfaces");
            p.put(Context.PROVIDER_URL, "jboss.ip:1099"); 
            InitialContext context = new InitialContext(p);
            String lookupStr = "Mom/DispactherBean/remote-mom.beans.DispactherBeanRemote";

            DispactherBeanRemote dispactherBean = (DispactherBeanRemote) context.lookup(lookupStr);                 
        dispactherBean.someMethod();

        }
        catch (Exception e)
        {
            e.printStackTrace();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T07:18:41.033

需要将所有 jboss 客户端 jar 添加到 tomcat/jboss 端。

# ruby-on-rails - Rails：rake db：create：all（无法连接到服务器）

> ID：10482853
> 
> 赞同：3
> 
> 时间：2012-05-07T13:20:43.767
> 
> 标签：ruby-on-rails, ruby, postgresql, rails-migrations, rails-postgresql

按照截屏视频[http://railscasts.com/episodes/342-migrating-to-postgresql?autoplay=true](http://railscasts.com/episodes/342-migrating-to-postgresql?autoplay=true) 直到**“rake db:create:all”**的步骤并得到错误：

> 无法连接到服务器：没有这样的文件或目录服务器是否在本地运行并接受 Unix 域套接字“/tmp/.s.PGSQL.5432”上的连接？

参考[Rails 上的问题：rake db:create:all failed to connect to PostgreSQL database](https://stackoverflow.com/questions/10263821/rails-rake-dbcreateall-fails-to-connect-to-postgresql-database)

但仍然无法解决。不知道是什么问题。 ![在此处输入图像描述](../Images/469dabf6d5ad4449498cd0272c19baf9.png)

[数据库.yml]

```
development:
  adapter: postgresql
  encoding: unicode
  database: store_development
  pool: 5
  username: amysukumunu 
  password:
test:
  adapter: postgresql
  encoding: unicode
  database: store_test
  pool: 5
  username: amysukumunu
  password: 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T14:17:18.200

**[更新2]**

好的，这是你应该做的：

1.  unix 套接字应该位于`/var/pgsql_socket`（根据 plist 图像），因为 rails 试图在`/tmp`. 我相信这是错误的原因。所以编辑你的`database.yml`＆明确添加套接字位置。所以你最终的 database.yml 应该是[这样](https://gist.github.com/2700597)的。更改您的 Unix 套接字位置的文件位置。现在尝试连接？

2）如果它仍然没有连接。验证 postgres 服务器是否实际运行

```
$ netstat -a | grep postgre 
```

`psql`如果它正在运行，请尝试使用命令从终端连接到它。以防它，不运行。尝试手动启动它

```
pg_ctl -D /usr/local/var/postgres -l /usr/local/var/postgres/server.log start 
```

如果仍然无法启动，server.log 中是否有任何错误消息？如果是，请在此处发布。

祝你好运！=======更新================ ![在此处输入图像描述](../Images/3604fe0c92a3db6a453515ae562a15b5.png) ![在此处输入图像描述](../Images/2f46b48c7259d2396cdaf33644a31275.png)

# javascript - 谷歌地图半径

> ID：10482854
> 
> 赞同：0
> 
> 时间：2012-05-07T13:20:53.820
> 
> 标签：javascript, html, google-maps

我需要以公里为单位找到谷歌地图半径（可见区域）。你能给我举个例子吗？我试过`

```
var bounds = new google.maps.LatLngBounds();
var sw = bounds.getSouthWest(); 
var ne = bounds.getNorthEast();

var proximitymeter = google.maps.geometry.spherical.computeDistanceBetween (sw, ne); 
```

`

但它每次都返回相同的值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:48:29.807

您正在寻找横截面距离。这将确定所显示地图的垂直和水平距离。

```
var bounds = new google.maps.LatLngBounds();
var sw = bounds.getSouthWest();
var ne = bounds.getNorthEast();
var east = new google.maps.LatLng(0, ne.lng());
var west = new google.maps.LatLng(0, sw.lng());
var north = new google.maps.LatLng(ne.lat(), 0);
var south = new google.maps.LatLng(sw.lat(), 0);
var width = google.maps.geometry.spherical.computeDistanceBetween(east, west);
var height = google.maps.geometry.spherical.computeDistanceBetween(north, south); 
```

从这里你可以找到“半径”。

# opencl - 在 OpenCL 内核中将数据从全局内存传递到本地内存

> ID：10482855
> 
> 赞同：1
> 
> 时间：2012-05-07T13:21:05.650
> 
> 标签：opencl, data-transfer

假设我有以下内核：

```
__kernel void classify_data_points( __global float* data,
                                    __local float* datasegment)
{
    int gid0 = get_global_id(0);
    int lid = get_local_id(0);
    dataSegment[lid] = data[gid];
} 
```

可以看出，我想将数据从全局内存中提取到本地内存中。本地内存的大小对于一次执行此操作是否重要？我的意思是，dataSegment 数组大小是 64 字节。然后，通过这一行'dataSegment [lid] = data [gid]'，我可以假设整个64字节的内存空间都被从全局内存中获取的数据填充了吗？（全局内存中有足够的数据）或者512字节长的本地内存，我们可以说同样的话吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T23:57:15.593

不，在写入本地内存的代码之后，您需要一个带有本地内存栅栏的屏障。像这样的东西：

```
barrier(CLK_LOCAL_MEM_FENCE); 
```

只有这样，您才能确保您的工作组的本地内存已被完全复制。您还需要确保您的工作组有足够的工作项来初始化工作组的所有本地内存（在您的情况下为 dataSegment。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-14T23:55:58.470

在您的示例中，复制的内存量取决于工作组的大小，而不是数据段的大小。您不能假设将复制 64 字节的内存。

如果要将复制作为单个操作执行，请查看[async_work_group_copy](http://www.khronos.org/registry/cl/sdk/1.0/docs/man/xhtml/async_work_group_copy.html)函数。

# sharepoint - 如何在 SharePoint 2010 中存储用户的收藏链接？

> ID：10482857
> 
> 赞同：1
> 
> 时间：2012-05-07T13:21:14.577
> 
> 标签：sharepoint, user-profile

我有一个任务允许用户添加他最喜欢的**任何网站**的链接，然后将它们存储在 SharePoint 中。然后它们将显示在名为“我的书签”的面板中。

我有一个解决方案，可以为所有用户创建一个带有“CreatedBy”字段的列表，但我认为加载速度很慢。您有任何解决方案、定制解决方案或 OOTB 解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:04:36.303

您可以使用 ootb 的“链接”列表。如果您想要跨站点和集合的东西，则需要创建自定义 Web 部件。有了它，您将需要点击 sql 表或 sp 列表....例如 -> id、userid、sitename、url。所以你必须得到当前登录的用户。所以像 -> select * from tableName where @currentUser = userid ......

# android - 在 textchanged StringIndexOutOfBoundsException 上更新 listview android

> ID：10482859
> 
> 赞同：0
> 
> 时间：2012-05-07T13:21:33.387
> 
> 标签：android, listview, textchanged

我在更新我的列表视图 ontextchanged 时遇到问题。当我输入一个字母时工作正常，但在第二个字母上应用程序崩溃。可能是什么问题？我已经测试过并且 dolzina 或长度是正确的，但是为什么在 edittext 中的第二个插入字符上应用程序崩溃了？适配器会不会有问题？这是代码！

```
public class Main extends ListActivity {
    private ArrayList<Son> sonovi;
    private EditText filterText = null;
    private SonovnikAdapter adapter;
    private ListView list;
    Translator t = new Translator();
    private Intent intent;
    private ArrayList<Son> temp;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        initStuff();

        list.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                intent.putExtra("opis", sonovi.get(position).getOpis());
                intent.putExtra("naslov", sonovi.get(position).getNaslov());
                startActivity(intent);

            }
        });
        filterText.addTextChangedListener(new TextWatcher() {

            @Override
            public void onTextChanged(CharSequence s, int start, int before,
                    int count) {
                int dolzina = filterText.length();
                temp = new ArrayList<Son>();
                temp.clear();
                for (int i = 0; i < sonovi.size(); i++) {
                    if (filterText.getText().toString().toLowerCase()
                            .equals((String) sonovi.get(i).getLatinicno()
                                    .toLowerCase().subSequence(0, dolzina))) { //line 63
                        temp.add(sonovi.get(i));
                    }

                }

                SonovnikAdapter testc = new SonovnikAdapter(Main.this,
                        R.layout.item, temp);
                list.setAdapter(testc);
                testc.notifyDataSetChanged();
                list.setOnItemClickListener(new OnItemClickListener() {

                    @Override
                    public void onItemClick(AdapterView<?> parent, View view,
                            int position, long id) {
                        intent.putExtra("opis", temp.get(position).getOpis());
                        intent.putExtra("naslov", temp.get(position)
                                .getNaslov());
                        startActivity(intent);
                    }
                });
            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {

            }

            @Override
            public void afterTextChanged(Editable s) {

            }
        });

    }

    private ArrayList<Son> readTxt() {
        ArrayList<Son> s = new ArrayList<Son>();
        InputStream is = this.getResources().openRawResource(R.raw.sonovnik);
        BufferedReader br = new BufferedReader(new InputStreamReader(is));
        String str = null;
        String naslov, opis, latinica;
        String[] tmp;
        try {
            while ((str = br.readLine()) != null) {
                tmp = str.split("-");
                naslov = tmp[0];
                opis = tmp[1];
                if (tmp.length >= 3) {
                    latinica = tmp[2];
                    s.add(new Son(naslov, opis, latinica));
                }
            }
            is.close();
            br.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return s;
    }

    private void initStuff() {
        list = getListView();
        list.setTextFilterEnabled(true);
        sonovi = new ArrayList<Son>();
        sonovi = readTxt();
        intent = new Intent(this, Details.class);
        adapter = new SonovnikAdapter(this, R.layout.item, sonovi);
        setListAdapter(adapter);
        filterText = (EditText) findViewById(R.id.search_box);
    }

    private class SonovnikAdapter extends ArrayAdapter<Son> {

        private ArrayList<Son> items;

        public SonovnikAdapter(Context context, int textViewResourceId,
                ArrayList<Son> items) {
            super(context, textViewResourceId, items);
            this.items = items;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            View v = convertView;
            if (v == null) {
                LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                v = vi.inflate(R.layout.list_item, null);
            }
            Son o = items.get(position);
            if (o != null) {
                TextView naslov = (TextView) v.findViewById(R.id.textView1);
                if (naslov != null) {
                    naslov.setText(o.getNaslov().toString());
                }
            }
            return v;

        }
    }
} 
```

以及 logcat 的输出：

```
05-07 15:16:58.770: E/AndroidRuntime(31689): FATAL EXCEPTION: main
05-07 15:16:58.770: E/AndroidRuntime(31689): java.lang.StringIndexOutOfBoundsException
05-07 15:16:58.770: E/AndroidRuntime(31689):    at java.lang.String.substring(String.java:1651)
05-07 15:16:58.770: E/AndroidRuntime(31689):    at java.lang.String.subSequence(String.java:2040)
05-07 15:16:58.770: E/AndroidRuntime(31689):    at com.sonovnik.petkovski.Main$2.onTextChanged(Main.java:63)
05-07 15:16:58.770: E/AndroidRuntime(31689):    at android.widget.TextView.sendOnTextChanged(TextView.java:6321)
05-07 15:16:58.770: E/AndroidRuntime(31689):    at android.widget.TextView.handleTextChanged(TextView.java:6362)
05-07 15:16:58.770: E/AndroidRuntime(31689):    at android.widget.TextView$ChangeWatcher.onTextChanged(TextView.java:6511)
05-07 15:16:58.770: E/AndroidRuntime(31689):    at android.text.SpannableStringBuilder.sendTextChange(SpannableStringBuilder.java:889)
05-07 15:16:58.770: E/AndroidRuntime(31689):    at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:502)
05-07 15:16:58.770: E/AndroidRuntime(31689):    at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:409)
05-07 15:16:58.770: E/AndroidRuntime(31689):    at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:28)
05-07 15:16:58.770: E/AndroidRuntime(31689):    at android.view.inputmethod.BaseInputConnection.replaceText(BaseInputConnection.java:654)
05-07 15:16:58.770: E/AndroidRuntime(31689):    at android.view.inputmethod.BaseInputConnection.setComposingText(BaseInputConnection.java:415)
05-07 15:16:58.770: E/AndroidRuntime(31689):    at com.android.internal.view.IInputConnectionWrapper.executeMessage(IInputConnectionWrapper.java:318)
05-07 15:16:58.770: E/AndroidRuntime(31689):    at com.android.internal.view.IInputConnectionWrapper$MyHandler.handleMessage(IInputConnectionWrapper.java:75)
05-07 15:16:58.770: E/AndroidRuntime(31689):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-07 15:16:58.770: E/AndroidRuntime(31689):    at android.os.Looper.loop(Looper.java:130)
05-07 15:16:58.770: E/AndroidRuntime(31689):    at android.app.ActivityThread.main(ActivityThread.java:3835)
05-07 15:16:58.770: E/AndroidRuntime(31689):    at java.lang.reflect.Method.invokeNative(Native Method)
05-07 15:16:58.770: E/AndroidRuntime(31689):    at java.lang.reflect.Method.invoke(Method.java:507)
05-07 15:16:58.770: E/AndroidRuntime(31689):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
05-07 15:16:58.770: E/AndroidRuntime(31689):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
05-07 15:16:58.770: E/AndroidRuntime(31689):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:48:43.630

您的元素大小不同。您假设 sonovi (getLatinicno) 中的每个元素都至少具有 dolzina 字符。但是 readTxt 不做任何这种控制。

# ios - 具有区域设置和指数的 NSNumber

> ID：10482861
> 
> 赞同：1
> 
> 时间：2012-05-07T13:21:46.793
> 
> 标签：ios, decimal, nsnumber, nsnumberformatter, exponent

我正在尝试在 iOS 中编写转换器。

用户将值输入到文本字段中，然后转换这些值。

结果最终返回给用户。

输出必须采用区域设置十进制格式，这样才有效。

此外，输出必须以指数形式打印，这很有效。

问题：我需要指数形式和十进制形式。

下面的代码解释了什么是有效的。

```
//formatting

        NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];  
        [formatter setLocale:[NSLocale currentLocale]];
        [formatter setNumberStyle: NSNumberFormatterDecimalStyle];

//formattiing

        float myFloat=0.01;
        NSNumber *myNumber =[[NSNumber alloc]initWithFloat:myFloat];
        NSString *myString =[formatter stringFromNumber:myNumber];

        NSLog(@"Locale: %@", formatter.locale.localeIdentifier);
        NSLog(@"myFloat = %g", myFloat);
        NSLog(@"myNumber = %.2e",[myNumber floatValue]);
        NSLog(@"myString = %@", myString);

//output
 Locale: nb_NO
 myFloat = 0.01
 myNumber = 1.00e-02
 myString = 0,01 
```

什么不起作用。我需要将指数和十进制格式化程序合二为一！

我想要这个输出：

```
myString = 1,00e-2 
```

有人有线索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T13:25:43.973

用你的格式化程序试试这个：`NSNumberFormatterScientificStyle`

# nhibernate - 数据库列到常量值，不需要实体类中的属性，通过代码映射

> ID：10482864
> 
> 赞同：1
> 
> 时间：2012-05-07T13:21:56.340
> 
> 标签：nhibernate, nhibernate-mapping, mapping-by-code

除了使用 NH 的按代码映射之外，这与[此问题](https://stackoverflow.com/q/8993997/671619)几乎相同。

我真的需要虚拟属性，因为我还想使用 SchemaExport 为不同的 rdbms 创建数据库，而无需为每个 rdbms 创建/维护脚本。

也许有一位 MbC Guru 知道如何使用 MbC

更新：明显的简单代码

```
Property("dummyProperty", c =>
{
    c.Column("legacyColumn");
    c.Access(typeof(MyPropertyAccessor));
}); 
```

不工作

```
NHibernate.MappingException: Unable to instantiate mapping class (see InnerException): Test.MbC.GroupMap ---> System.Reflection.TargetInvocationException: Ein Aufrufziel hat einen Ausnahmefehler verursacht. ---> NHibernate.MappingException: Member not found. The member 'dummyProperty' does not exists in type Test.Data.Group
   bei NHibernate.Mapping.ByCode.Impl.CustomizersImpl.PropertyContainerCustomizer`1.GetPropertyOrFieldMatchingNameOrThrow(String memberName)
   bei NHibernate.Mapping.ByCode.Impl.CustomizersImpl.PropertyContainerCustomizer`1.RegisterNoVisiblePropertyMapping(String notVisiblePropertyOrFieldName, Action`1 mapping)
   bei 
   ... 
```

这也不是，因为上帝知道为什么**MbC 在内部通过反射检查该属性确实存在于 class 上**。

```
var parameter = Expression.Parameter(typeof(T), "x");
Expression body = Expression.Property(parameter, new GetterPropertyInfo(typeof(T), defaultgetter));
body = Expression.Convert(body, typeof(object));

var lambda = Expression.Lambda<Func<T, object>>(body, parameter);

Property(lambda, m =>
{
    m.Column(defaultgetter.PropertyName);
    m.Access(propertyAccessorType);
}); 
```

甚至通过在 ClassMapping 中重写来禁用反射测试，`RegisterProperty()`它在构建 hbm 时仍然会抛出抱怨：

```
System.ArgumentOutOfRangeException: Can't add a property of another graph
Parametername: property
   bei NHibernate.Mapping.ByCode.Impl.AbstractBasePropertyContainerMapper.Proper
ty(MemberInfo property, Action`1 mapping)
   bei NHibernate.Mapping.ByCode.ModelMapper.MapProperty(MemberInfo member, Prop
ertyPath propertyPath, IMinimalPlainPropertyContainerMapper propertiesContainer)

   bei NHibernate.Mapping.ByCode.ModelMapper.MapProperties(Type propertiesContai
nerType, IEnumerable`1 propertiesToMap, IPropertyContainerMapper propertiesConta
iner, PropertyPath path)
   bei NHibernate.Mapping.ByCode.ModelMapper.MapProperties(Type propertiesContai
nerType, IEnumerable`1 propertiesToMap, IPropertyContainerMapper propertiesConta
iner)
   bei NHibernate.Mapping.ByCode.ModelMapper.MapRootClass(Type type, HbmMapping
mapping)
   bei NHibernate.Mapping.ByCode.ModelMapper.CompileMappingFor(IEnumerable`1 typ
es) 
```

按代码映射应该比FNH更灵活？在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T13:17:40.407

在投入大量时间尝试在 MbC 中进行这个相当简单的映射之后，我承认并再次加入 MbC。

哦，如此灵活的 MbC，即使是像这样的简单映射也无法实现

```
public class MyClassMap : ClassMap<MyClass>
{
    public MyClassMap()
    {
        Map(x => this.VirtualProp, "legacyColumn").Default("123").Access.None();
    }

    public long VirtualProp { get; set; }
} 
```

这里的好处是我可以使用 SchemaExport 为遗留应用程序创建兼容的模式，而不会污染我的域类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T17:24:05.230

您可以按照与链接问题中相同的方式进行操作。实施`PropertyAccessor`保持不变。要在按代码映射中使用它，请使用字符串重载映射列（属性名称是必需的，但在这种情况下并未真正使用）并附加访问器：

```
Property("dummyPropertyNameForConstant", c =>
{
    c.Column("ConstantColumn");
    c.Access(typeof(CustomAccessor));
}); 
```

# c# - IEqualityComparer on Dictionary inside Dictionary

> ID：10482871
> 
> 赞同：1
> 
> 时间：2012-05-07T13:22:12.283
> 
> 标签：c#, .net-3.5, dictionary

我想创建一个`Dictionary<DateTime, Dictionary<APerson, AVisit>>`结构，我想`IEqualityComparer`在**第二个**字典上提供一个`APerson`作为键的

如果我只有内部字典，那就是

```
var f = new Dictionary<APerson, AVisit>(new PersonEqualityComparer()); 
```

但我找不到在声明中提供它的构造函数。我是否必须在每个子声明中传递它，`Dictionary<APerson, AVisit>`或者是否可以指示母结构`IEqualityComparer`始终指定一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T13:25:25.533

> 我是否必须在 Dictionary 的每个子声明中传递它

是的，因为外部字典的值是字典。所以每次你在这个外部字典中插入一个值时，你实际上是你在其他地方实例化的一些字典。因此，无论您在哪里实例化它，您都可以提供相等比较器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T13:24:55.743

> 我是否必须在 Dictionary 的每个子声明中传递它

是的（如果您指的是 的每个实例`Dictionary<APerson, AVisit>`）。

> 还是可以指示母结构始终具有指定的 IEqualityComparer？

不。

但是，您可以重新组织。代替

```
Dictionary<DateTime, Dictionary<APerson, AVisit>> 
```

为什么不

```
Dictionary<Tuple<DateTime, APerson>, AVisit> 
```

然后你可以提供一个实现的东西的实例

```
IEqualityComparer<Tuple<DateTime, APerson>> 
```

您甚至可以`Tuple<DateTime, APerson>`用自定义类型替换。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-07T13:36:24.723

为了避免必须`IEqualityComparer<APerson>`在子字典的每个实例上指定实例，您可以执行此[MSDN 文档](http://msdn.microsoft.com/en-us/library/ms131187%28v=vs.90%29.aspx)`IEquatable<APerson>`中所示的实现。在该方法中，您可以编写实际的比较逻辑或调用您已经定义的实例。将检测对象实现并将其用作进行比较的默认值。`APerson``Equals``IEqualityComparer<APerson>``Dictionary``IEquatable<APerson>`

如果你走这条路，建议在你的身上有一个`Default`字段（声明为静态只读），`PersonEqualityComparer`这样`Equals`你就不必每次都创建一个新实例。这样您就有了类似于以下内容的内容：

```
public class PersonEqaulityComparer : IEqualityComparer<APerson>
{
    public static readonly Default = new PersonEqualityComparer();
}

public class APerson : IEquatable<APerson>
{
    public bool Equals(APerson other)
    {
        return PersonEqualityComparer.Default.Equals(this, other);
    }

    public override bool Equals(object other)
    {
        return ((IEquatable<APerson>)this).Equals(other as APerson);
    }

    public override int GetHashCode()
    {
        return PersonEqualityComparer.Default.GetHashCode(this);
    }
} 
```

# ruby-on-rails - 如何从backbone.js应用程序中的远程服务器获取json数据

> ID：10482873
> 
> 赞同：0
> 
> 时间：2012-05-07T13:22:13.933
> 
> 标签：ruby-on-rails, json, api, backbone.js

我正在关注this [repo](https://github.com/ccoenraets/backbone-directory)中的一个应用程序示例 ，我开始在我的本地机器上使用rails intead php for API构建一个类似的应用程序，所以我在一个特定的根目录中构建rails应用程序，然后在另一个根目录中构建backbone.js/ JQM 应用程序调用 rails api。

所以我使用 urlRoot 在主干中创建模型和集合：[http://localhost:3000/api/clubs.json](http://localhost:3000/api/clubs.json)，对应于本地服务器 url 以检索俱乐部列表

然后我试图在 javascript 控制台中查看这些命令会发生什么：

```
clubs = new ClubsCollection()

Object {length = 0 ...etc..}

clubs.fetch()
GET http://localhost:3000/api/clubs.json 200 OK 
```

响应是空的...

但是当我调用 url [http://localhost:3000/api/clubs.json](http://localhost:3000/api/clubs.json)时，它会正确返回 json 俱乐部列表。

你能帮我理解打这个电话的最好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:36:20.093

`fetch`是异步的。您必须等待它完成加载数据，然后检查响应。这通常通过`reset`事件完成：

```
 clubs = new ClubsCollection();
clubs.on("reset", function(){
  alert(clubs.length + " item(s) found");
});
clubs.fetch(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T08:33:18.833

我已经使用带有基本配置的[“rack-cors”gem解决了这个问题](https://github.com/cyu/rack-cors)

*配置/应用程序.rb：*

```
config.middleware.use Rack::Cors do
      allow do
        origins 'localhost'
        resource '%r{/api/\$+.json}',
          :headers => ['Origin', 'Accept', 'Content-Type'],
          :methods => [:get, :put, :delete]
      end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T21:26:19.903

如果您查看主干 API，则可以通过 fetch() 调用提供一个成功回调，例如

clubs.fetch({ success : function(model, err) { // 做点什么 } });

与其他答案一样， fetch 是异步的，因此您不能指望通过在 .fetch() 调用之后设置断点来返回结果。

# iphone - 在目标 C 中创建一个 NSString

> ID：10482876
> 
> 赞同：4
> 
> 时间：2012-05-07T13:22:17.137
> 
> 标签：iphone, objective-c

> **可能重复：**
> [我是否需要释放使用@“...”生成的 NSString？](https://stackoverflow.com/questions/687962/do-i-need-to-release-nsstring-generated-using)

在 Objective C 中有两种创建 NSString obj 的方法

方式一：

```
// string1 will be released automatically 

NSString* string1 = [NSString string]; 

// must release this when done 
```

方式二

```
NSString* string2 = [[NSString alloc] init]; 

[string2 release]; 
```

如果我做

```
NSString *string = @"This is a string"; 
```

我的问题是上述声明属于哪种方式，毕竟我们应该**释放它**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-07T13:23:59.580

字符串常量不会被释放；它们既没有明确发布也没有自动发布；它们只是常量，永远不会被释放。

因此，只有在您之前保留它们时才释放它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T13:27:55.807

在第一个和最后一个中，您不拥有（分配和初始化）字符串，因此不要释放它们。而在第二个中，您手动分配了它，因此您必须释放它。如果您在代码中使用对象，则应使用第二个，否则使用第一个或最后一个

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T13:28:44.393

如果您使用的是 ARC，则`string = nil;` 根本不应该释放它，但是不，您不需要释放它

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T13:29:36.843

如果你`alloc`是它，那么你应该`release`它。

`static`通过类似方法创建的字符串

```
[NSString stringWithXXXX]; 
```

是`auto released`

@H2CO3 关于常数是正确的。

# python - 新手到扭曲和旋风 - 如何让 redis 回调为简单的 get 请求工作

> ID：10482878
> 
> 赞同：1
> 
> 时间：2012-05-07T13:22:36.143
> 
> 标签：python, redis, twisted, tornado, cyclone

下面是我尝试以非阻塞方法从 get 请求写入 redis 的代码。下面也是我得到的错误。这是一个 500 错误。我只是不明白旋风附带的 txredisapi 的文档。它确实写入了redis，但应用程序

```
import cyclone.web
import sys
from twisted.internet import reactor
from twisted.python import log
import cyclone.redis as redis
from twisted.internet import defer
from twisted.internet import reactor

@defer.inlineCallbacks
def redisPixelWrite(remote_ip):
    rc = yield redis.Connection()
    yield rc.set("foo", 'itwodasdfred')
    v = yield rc.get("foo")
    print "foo:", v
    yield rc.disconnect()

class Application(cyclone.web.Application):
    def __init__(self):
        handlers = [
            (r"/", MainHandler),
        ]
        settings = {"xheaders": True,"static_path": "./static"}
        cyclone.web.Application.__init__(self, handlers, **settings)       

class MainHandler(cyclone.web.RequestHandler):
    def get(self):
        remote_ip = self.request.remote_ip
        redisPixelWrite(remote_ip).addcallback()
        self.set_header('Content-Type', 'text/html')
        self.write(remote_ip)

def main():
    log.startLogging(sys.stdout)
    reactor.listenTCP(8051, Application(), interface="127.0.0.1")
    reactor.run()

if __name__ == "__main__":
    main()

2012-05-07 21:12:10+0800 [-] Log opened.
2012-05-07 21:12:10+0800 [-] Application starting on 8051
2012-05-07 21:12:10+0800 [-] Starting factory <__main__.Application instance at 0x228af38>
2012-05-07 21:12:14+0800 [HTTPConnection,0,127.0.0.1] Starting factory <cyclone.redis.RedisFactory instance at 0x261a680>
2012-05-07 21:12:14+0800 [HTTPConnection,0,127.0.0.1] Uncaught exception GET / (127.0.0.1) :: HTTPRequest(protocol='http', host='127.0.0.1:8051', method='GET', uri='/', version='HTTP/1.1', remote_ip='127.0.0.1', body='', headers={'Connection': 'keep-alive', 'Accept-Language': 'en-us,en;q=0.5', 'Accept-Encoding': 'gzip, deflate', 'Cache-Control': 'max-age=0', 'Host': '127.0.0.1:8051', 'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8', 'User-Agent': 'Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:11.0) Gecko/20100101 Firefox/11.0'})
2012-05-07 21:12:14+0800 [HTTPConnection,0,127.0.0.1] 500 GET / (127.0.0.1) 2.07ms
2012-05-07 21:12:14+0800 [RedisProtocol,client] foo: itwodasdfred
2012-05-07 21:12:14+0800 [RedisProtocol,client] Stopping factory <cyclone.redis.RedisFactory instance at 0x261a680> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T06:38:33.280

你错过了代码中的一些东西。

1.  该`get`函数必须用 装饰`inlineCallbacks`，并且应该`yield redisPixelWrite(remote_ip)`
2.  您可能不想在每次请求时都与 redis 建立新连接。设置持久连接池并在新请求上重用它更有效。

这可能是您正在寻找的：

```
import cyclone.redis
import cyclone.web
import sys

from twisted.python import log
from twisted.internet import defer
from twisted.internet import reactor

class RedisMixin(object):
    redis = None

    @classmethod
    def setup(self):
        RedisMixin.redis = cyclone.redis.lazyConnectionPool()

class Application(cyclone.web.Application):
    def __init__(self):
        handlers = [(r"/", MainHandler)]
        RedisMixin.setup()
        settings = {"debug": True, "xheaders": True, "static_path": "./static"}
        cyclone.web.Application.__init__(self, handlers, **settings)

class MainHandler(cyclone.web.RequestHandler, RedisMixin):
    @defer.inlineCallbacks
    def get(self):
        try:
            yield self.redis.set("foo", self.request.remote_ip)
            ip = yield self.redis.get("foo")
        except:
            raise cyclone.web.HTTPError(503)  # Service Unavailable
        else:
            self.set_header('Content-Type', 'text/html')
            self.write(ip)

def main():
    log.startLogging(sys.stdout)
    reactor.listenTCP(8051, Application(), interface="127.0.0.1")
    reactor.run()

if __name__ == "__main__":
    main() 
```

请注意，所有`Connection`方法的默认行为是在 redis 停止或重新启动时自动重新连接。它将以 HTTP 503（服务不可用）响应，直到重新建立连接并恢复与 redis 的通信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T12:50:48.177

这一行：

```
redisPixelWrite(remote_ip).addcallback() 
```

提高`AttributeError`。您可能应该针对 Cyclone 提交错误报告，因为它应该在某处报告此问题（或者，确保您实际上正在查看将报告异常的日志）。

`redisPixelWrite`返回 a`Deferred`因为它用`inlineCallbacks`. 上没有`addcallback`方法`Deferred`。有一种`addCallback`方法，我想这可能是你想要使用的。但是，它至少需要一个参数，而不是零，因此您还需要修复它。

# delphi - Firemonkey 中缺少的事件动作和过程

> ID：10482882
> 
> 赞同：4
> 
> 时间：2012-05-07T13:23:00.957
> 
> 标签：delphi, drag-and-drop, runtime, firemonkey

我在 Delphi 中有一个程序可以将图像组件从一个面板拖放到另一个面板，但在这里我为每个图像组件使用“TWincontrol”和“OnStartDrag”事件，它运行良好，示例代码如下所示。当我在 Firemonkey 中实现相同的功能时，我发现这些事件和过程丢失了。那么上述事件和程序有什么方法或替代方法吗？

我想知道当“dragmode”属性设置为“dmManual”时我们可以拖动组件吗？有没有办法在运行时使用一些代码来更改属性？

示例代码：

```
TMyDragObject = class(TDragControlObject)    
protected    
function GetDragImages: TDragImageList; override;    
end;    

procedure TForm1.Shape1StartDrag(Sender: TObject; var DragObject: TDragObject);    
var    
b:TBitmap;    
index:integer;    
p:TPoint;    
begin    
if Sender is TImage then    
with Sender as TImage do    
begin    
p:=screentoclient(mouse.cursorpos);    
MouseX:=p.x;    
MouseY:=p.y;    
DragObject := TMyDragObject.Create(TImage(Sender));     
end;    
end;    

procedure TForm1.Panel1DragDrop(Sender, Source: TObject; X, Y: Integer);    
var    
shape:TImage;    
begin    
if source is tMyDragObject then    
with source as TMyDragObject do    
begin    
shape:=TImage(control);    
shape.parent:=TWincontrol(sender);    
shape.left:=x-MouseX;    
shape.top:=y-MouseY;    
end;    
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T23:03:35.753

您需要更新属性`DragMode`以`dmAutomatic`允许拖动... [http://docwiki.embarcadero.com/Libraries/en/FMX.Types.TControl.DragMode](http://docwiki.embarcadero.com/Libraries/en/FMX.Types.TControl.DragMode)

下面的示例向您展示了如何在面板内部/从面板移动形状......因此，它适用于 FireMonkey......

如果你右键单击，你改变形状的颜色..红色，禁止拖动......否则，授权......

```
unit Unit6;

interface

uses
  System.SysUtils, System.Types, System.UITypes, System.Classes, System.Variants,
  FMX.Types, FMX.Controls, FMX.Forms, FMX.Dialogs, FMX.Objects;

type
  TForm1 = class(TForm)
    Panel1: TPanel;
    Panel2: TPanel;
    RoundRect1: TRoundRect;
    procedure PanelDragOver(Sender: TObject; const Data: TDragObject; const Point: TPointF; var Accept: Boolean);
    procedure PanelDragDrop(Sender: TObject; const Data: TDragObject; const Point: TPointF);
    procedure RoundRect1MouseDown(Sender: TObject; Button: TMouseButton; Shift: TShiftState; X, Y: Single);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.fmx}

procedure TForm1.PanelDragDrop(Sender: TObject; const Data: TDragObject; const Point: TPointF);
begin
  if ((data.Source <> nil) and (data.Source is TRoundRect) and (Sender is TPanel)) then
  begin
    with TRoundRect(data.Source) do
    begin
      Parent := TPanel(Sender);
      Position.X := Point.X - (Width  / 2);  // Mouse cursor is center on the dragged object
      Position.Y := Point.Y - (Height / 2);
      DragMode   := TDragMode.dmManual;      // Disable drag by default (authorized later if not red)
    end;
  end;
end;

procedure TForm1.PanelDragOver(Sender: TObject; const Data: TDragObject; const Point: TPointF; var Accept: Boolean);
begin
  Accept := Data.Source is TRoundRect;       // Can be moved on the same panel... update if you don't want
end;

procedure TForm1.RoundRect1MouseDown(Sender: TObject; Button: TMouseButton; Shift: TShiftState; X, Y: Single);
begin
  if Sender is TRoundRect then
  begin
    with TRoundRect(Sender) do
    begin
      if Button = TMouseButton.mbRight then
      begin
        if Fill.Color <> claRed then
        begin
          Fill.Color := claRed;
        end
        else
        begin
          Fill.Color := claBlue;
        end;
      end
      else
      begin
        if Fill.Color <> claRed then
        begin
          DragMode := TDragMode.dmAutomatic;   // can be dragged
        end
        else
        begin
          DragMode := TDragMode.dmManual;      // drag forbidden
        end;
      end;
    end;
  end;
end;

end. 
```

**FMX**（2 TPanel；1 TRoundRect）：

```
object Form1: TForm1
  Left = 0
  Top = 0
  Caption = 'Drag...'
  ClientHeight = 418
  ClientWidth = 820
  Visible = False
  StyleLookup = 'backgroundstyle'
  object Panel1: TPanel
    Position.Point = '(8,8)'
    Width = 433.000000000000000000
    Height = 401.000000000000000000
    OnDragOver = PanelDragOver
    OnDragDrop = PanelDragDrop
    TabOrder = 1
    object RoundRect1: TRoundRect
      Position.Point = '(48,40)'
      Width = 129.000000000000000000
      Height = 81.000000000000000000
      OnMouseDown = RoundRect1MouseDown
      Fill.Color = claBlue
    end
  end
  object Panel2: TPanel
    Position.Point = '(448,8)'
    Width = 361.000000000000000000
    Height = 401.000000000000000000
    OnDragOver = PanelDragOver
    OnDragDrop = PanelDragDrop
    TabOrder = 2
  end
end 
```

当然，它也适用于 TImage ...... ![步骤1](../Images/3cd23078739c9d8d4be78d52941bc414.png) ![第2步](../Images/e989b2ac09b90652e7599072cfd48753.png) ![第 3 步](../Images/14f3f1a11742f0448eb2219e89e93e83.png) ![第4步](../Images/3019ef1275d65ca032ac54a9b5f041bb.png)

# unicode - 如何标记文档中的所有 CJK 文本？

> ID：10482883
> 
> 赞同：5
> 
> 时间：2012-05-07T13:23:04.700
> 
> 标签：unicode, multilingual, cjk, character-properties

我有一个文件，`file1.txt`包含英文、中文、日文和韩文的文本。为了在 ConTeXt 中使用，我需要根据语言（英语除外）标记文件中的每个文本区域，并输出一个新文件，例如，这是一个示例行：

```
The 恐龙 ate 鱼. 
```

由于其中包含汉字文本，因此将被标记如下：

```
The \language[cn]{恐龙} ate \language[cn]{鱼}. 
```

*   文档保存为 UTF-8。
*   中文文本应标明`\language[cn]{*}`。
*   日文文字应标注`\language[ja]{*}`。
*   韩文文字应标明`\language[ko]{*}`。
*   内容永远不会从一行继续到下一行。
*   如果代码对某些内容是中文、日文还是韩文有疑问，最好默认为中文。

如何根据当前语言标记文本？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T14:08:07.287

粗略的算法：

```
use 5.014;
use utf8;
while (<DATA>) {
    s
        {(\p{Hangul}+)}
        {\\language[ko]{$1}}g;
    s
        {(\p{Hani}+)}
        {\\language[zh]{$1}}g;
    s
        {(\p{Hiragana}+|\p{Katakana}+)}
        {\\language[ja]{$1}}g;
    say;
}

__DATA__
The 恐龙 ate 鱼.
The 恐竜 ate 魚.
The キョウリュウ ate うお.
The 공룡 ate 물고기. 
```

（另见[Detect chinese character using perl?](https://stackoverflow.com/questions/6937087/detect-chinese-character-using-perl)）

这是有问题的。[Daenyth](https://stackoverflow.com/users/350351/daenyth)评论说，例如恐竜被误识别为中文。我发现您不太可能真正使用混合的英语-CJK，并且只是给出了糟糕的示例文本。首先进行词汇分析以区分中文和日文。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-07T20:55:39.040

我想提供一个 Python 解决方案。无论哪种语言，它都是基于 Unicode 脚本信息（来自 Unicode 数据库，又名 UCD）。与 Python 相比，Perl 具有相当详细的 UCD。
Python 在其“unicodedata”模块中没有打开脚本信息。但是有人在这里添加了它[https://gist.github.com/2204527](https://gist.github.com/2204527)（小而有用）。我的实现是基于它的。顺便说一句，它对空间不敏感（不需要任何词法分析）。

```
 # coding=utf8
    import unicodedata2
    text=u"""The恐龙ate鱼.
    The 恐竜ate 魚.
    Theキョウリュウ ate うお.
    The공룡 ate 물고기. """

    langs = {
    'Han':'cn',
    'Katakana':'ja',
    'Hiragana':'ja',
    'Hangul':'ko'
    }

    alist = [(x,unicodedata2.script_cat(x)[0]) for x in text]
    # Add Last
    alist.append(("",""))
    newlist = []
    langlist = []
    prevlang = ""
    for raw, lang in alist:
        if prevlang in langs and prevlang != lang:
            newlist.append("\language[%s]{" % langs[prevlang] +"".join(langlist) + "}")
            langlist = []

        if lang not in langs:
            newlist.append(raw)
        else:                      
            langlist.append(raw)
        prevlang = lang

    newtext = "".join(newlist)
    print newtext 
```

输出是：

```
 $ python test.py 
    The\language[cn]{恐龙}ate\language[cn]{鱼}.
    The \language[cn]{恐竜}ate \language[cn]{魚}.
    The\language[ja]{キョウリュウ} ate \language[ja]{うお}.
    The\language[ko]{공룡} ate \language[ko]{물고기}. 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-19T17:04:59.603

虽然韩语不再使用汉字[汉字/汉字]，但它们有时仍会弹出。一些日本的正弦图是纯日文的，比如竜，但很多都与简体中文或繁体相同。所以你有点卡住了。所以如果你有一些“汉”字符，你需要看一个完整的句子。如果它有一些平假名/片假名+汉字，那么它是日语的可能性非常高。同样，一堆*韩文*音节和几个正弦图会告诉你这个句子是韩文的。

那么，如果都是汉化字符，即中文，可以看一下是否有一些字符是简体的：kZVariant 表示一个简体中文字符。哦，kSpecializedSemanticVariant 经常用于日语特定的简化字符。里面和内你可能看起来一样，但第一个是日文，第二个是繁体中文和韩文（韩文以繁体中文为标准）。

我在某处有代码，它为一个代码点返回脚本名称。那会有所帮助。你通过一个句子，看看最后剩下什么。我会把代码放在某个地方。

编辑：代码

[http://pastebin.com/e276zn6y](http://pastebin.com/e276zn6y)

回应以下评论：

上面的这个函数是基于 Unicode.org 提供的数据构建的……虽然我本身不是*专家，但我为 Unihan 数据库贡献了很多——而且我碰巧会说 CJK。*是的，全部 3。我确实有一些代码可以利用`kXXX`Unihan 数据库中的属性，但是 A/ 我不知道我们应该为 OP 编写代码，并且 B/ 这需要可能会进行的后勤工作超出了 OP 准备实施的范围。我的建议站得住脚。使用上面的函数，循环一个完整的句子。如果所有代码点都是“Han”（或“Han”+“Latin”），那么很有可能是中文。另一方面，如果结果是“Han”+“Hangul”（可能+“latin”）的混合，那么韩语就不会出错。同样，“汉”和“

**快速测试**

一些与我之前链接的函数一起使用的代码。

```
function guessLanguage(x) {
  var results={};
  var s='';
  var i,j=x.length;
  for(i=0;i<j;i++) {
    s=scriptName(x.substr(i,1));
    if(results.hasOwnProperty(s)) {
      results[s]+=1;
    } else {
      results[s]=1;
    }
  }
  console.log(results);
  mostCount=0;
  mostName='';
  for(x in results) {
    if (results.hasOwnProperty(x)) {
      if(results[x]>mostCount) {
        mostCount=results[x];
        mostName=x;
      }
    }
  }
  return mostName;
} 
```

一些测试：

```
r=guessLanguage("外人だけど、日本語をペラペラしゃべるよ！");
Object
  Common: 2
  Han: 5
  Hiragana: 9
  Katakana: 4
  __proto__: Object
"Hiragana" 
```

该`r`对象包含每个脚本的出现次数。平假名是最常见的，平假名+片假名 --> 句子的 2/3。

```
r=guessLanguage("我唔知道,佢講乜話.")
Object
  Common: 2
  Han: 8
  __proto__: Object
"Han" 
```

一个明显的中文案例（在这种情况下是粤语）。

```
r=guessLanguage("中國이 韓國보다 훨씬 크지만, 꼭 아름다운 나라가 아니다...");
Object
  Common: 11
  Han: 4
  Hangul: 19
  __proto__: Object
"Hangul" 
```

一些汉字，还有很多韩文。一句韩语，肯定的。

# iphone - 更改 iPhone 应用程序中的每个 UITableViewCell 背景颜色？

> ID：10482887
> 
> 赞同：0
> 
> 时间：2012-05-07T13:23:10.453
> 
> 标签：iphone, ios, uitableview, background-color

我正在使用`UITableView`. 在我的表格视图中，我有多个包含多个单元格的部分。我想为每个单元格赋予单元格背景颜色。这意味着`each cell should have different colors`。

例如：如果有 20 个单元格意味着每 20 个单元格应该有不同的单元格背景颜色。

您能否告诉我是否可以为每个单元格赋予单元格背景颜色/图像？你能指导我这样做吗？

提前致谢。

**编辑**

我的 Tableviewcell 颜色如下所示，

```
First Cell background color : white color
Second Cell background color : red color
Third Cell background color : orange color
Fourth cell background color : gray color
Fifth Cell background color : white color
Sixth cell background color : white color
Seventh cell background color : white color
Eight cell background color : gray color
Ninth cell background color : red color
Tenth cell background color : red color 
```

我想像这样给表格视图单元格背景颜色。然后当 UITableView 重新加载或新打开时，背景颜色会发生变化。你能帮我这样做吗？可以在 iPhone app tableview 中做吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T13:39:52.883

您实际上不能使用标准`tableView:cellForRowAtIndexPath:`工作流程来执行此操作。单元格的背景颜色是一种特殊情况，因为表格视图会在管理单元格的选定状态时对其进行修改。

相反，如[this answer](https://stackoverflow.com/a/2268654/49658)中所述，您必须实现该`tableView:willDisplayCell:atIndexPath:`方法。有一个旧的 WWDC 视频涵盖了这一点，我认为是 2009 年或 2010 年的会议。

例如，您可以执行以下操作：

```
- (void)tableView:(UITableView*)tableView 
  willDisplayCell:(UITableViewCell*)cell 
forRowAtIndexPath:(NSIndexPath*)indexPath
{
    cell.backgroundColor = /* random color here */;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T16:22:10.130

这有点复杂，但这里是如何在 cellForRowAtIndexPath 中完成的。只需将此代码粘贴到您的方法中即可。我是按照你上面的规范写的。

```
if (indexPath.row == 0 || indexPath.row == 4 || indexPath.row == 5 || indexPath.row == 6) {
            [cell.textLabel setBackgroundColor:[UIColor whiteColor]];
            cell.contentView.backgroundColor = [UIColor whiteColor];
            [cell.textLabel setTextColor:[UIColor blackColor]];
        } else {
            if (indexPath.row == 1 || indexPath.row == 8 || indexPath.row == 9){
                 [cell.textLabel setBackgroundColor:[UIColor redColor]];
                 cell.contentView.backgroundColor = [UIColor redColor];
                 [cell.textLabel setTextColor:[UIColor whiteColor]];
            } else {
                  if (indexPath.row == 3 || indexPath.row == 7){
                 [cell.textLabel setBackgroundColor:[UIColor grayColor]];
                 cell.contentView.backgroundColor = [UIColor grayColor];
                 [cell.textLabel setTextColor:[UIColor whiteColor]];
                 } else {
                      [cell.textLabel setBackgroundColor:[UIColor orangeColor]];
                      cell.contentView.backgroundColor = [UIColor orangeColor];
                      [cell.textLabel setTextColor:[UIColor blackColor]];
}}} 
```

当然，还有其他方法可以做到这一点（例如使用`switch`，或通过声明 UIColor，并根据`indexPath.row`被调用的内容更改其值）。但实施后，您可以自己简化。

请注意，如果您想要统一，则需要设置 textLabel 和 contentView 的背景颜色。

干杯!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T14:04:22.957

尝试这个

```
- (UITableViewCell *)tableView:(UITableView *)tTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tTableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    double numSections = [self numberOfSectionsInTableView:tableView];
    double numRows = [self tableView:tableView numberOfRowsInSection:indexPath.section];
    [cell setBackgroundColor:[UIColor colorWithRed:0.8/numRows*((double)indexPath.row)+0.2 green:0.8/numSections*((double)indexPath.section)+0.2 blue:((double)(random()%1000))/1000.0 alpha:1]];
    return cell;
} 
```

# facebook - 无法将 fb 应用程序添加到 Facebook 页面

> ID：10482889
> 
> 赞同：0
> 
> 时间：2012-05-07T13:23:27.477
> 
> 标签：facebook

我名下有两个 facebook 页面，我开发了 ann 应用程序。现在我将应用程序添加到我的一个页面，我似乎也无法将应用程序添加到我的另一个页面。我尝试了这个链接（https://www.facebook.com/dialog/pagetab?app_id=YOUR_APP_ID）并替换了应用 ID 和 fb 页面 url，但它给了我这个错误：“API 错误代码：191 API 错误描述：指定的 URL 不属于应用程序错误消息：redirect_uri 不属于应用程序”

如何将我的这个应用程序添加到我的第二个 fb 页面？

问候

# list - 从mathematica中的列表中选择项目

> ID：10482903
> 
> 赞同：3
> 
> 时间：2012-05-07T13:24:39.573
> 
> 标签：list, select, wolfram-mathematica, rules

我在 Mathematica 中有一个很大的规则列表，但我想选择与某些标准相对应的项目。尽管我一直在尝试使用 Select 和 Take 命令，但我一直无法获得所需的输出。

示例：假设我想从列表中选择 A->1.2 的项目。

```
list={{A->1,B->2.1,C->5.2},{A->1.1,B->2.6,C->5.5},{A->1.2,B->2.7,C->5.7},{A->1.3,B->2.9,C->6.1}}; 
```

期望的输出是 {A->1.2,B->2.7,C->5.7}

我知道可以根据它们的价值从列表中选择项目。但是我如何从规则列表中做到这一点？

谢谢

编辑：显然，案例可以解决问题：

案例[列表，{A-> # | A-> 合理化[#]，规则[_, _] ..}] & /@ {1.2}

这也搜索有理和非有理形式的数字，这是我发现的另一个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T13:48:00.010

一种可能性是使用`Select`

例如

```
Select[mylist, MemberQ[#, A -> 1] &] 
```

给

> (* {{A -> 1, B -> 2.1, C -> 5.2}}*)

其他例子；

```
Select[mylist, MemberQ[#, A -> 1.1 |  1.2] &]

Select[mylist, 
 MemberQ[#, A -> 1.1 |  1.2 | 1.3] && FreeQ[#, C -> 6.1] &] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-08T20:07:57.177

替代：

```
Select[list, A == 1.2 /. # &] 
```

此解决方案的优点是它使用`Equal`代替`MatchQ`（或等效）。 `1.2 == 6/5`给出`True`（数学意义上的比较），而`MatchQ[1.2, 6/5]`给出`False`（结构比较）。当然，总是可以`MatchQ[1.2, x_ /; x == 6/5]`解决这个问题。

此外，此解决方案忽略列表中规则的顺序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T14:04:04.230

或使用`Cases`：

`Cases[list, {A -> 1.2, ___}]`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-13T09:34:13.607

另一个：

```
Pick[#, A /. #, 1.2]& @ list 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-15T20:49:50.890

“所需的输出将是 {A->1.2,B->2.7,C->5.7}”所以上述答案应该是扁平的 :)

```
Cases[N@mylist, {___, A -> 1.2, ___}] // Flatten 
```

使用 N 将 6/5 之类的内容转换为 1.2。

# jsp - 如何使用 Spring 3 MVC Annotations 设置会话或全局属性

> ID：10482905
> 
> 赞同：0
> 
> 时间：2012-05-07T13:24:42.627
> 
> 标签：jsp, spring-mvc

我有一个使用 Spring MVC 用 Ja​​va 编写的简单应用程序。Credentials 类只包含登录时提供的用户名和密码。

理想情况下，我希望每个 jsp 页面上都显示人员的用户名和全名。我正在考虑设置会话属性。

我的控制器类：

```
@RequestMapping(value = "/menu", method=RequestMethod.POST)
    public String addContact(Map<String, Object> map,@ModelAttribute("user")
    User user, BindingResult result, SessionStatus status,HttpSession session) {

session.setAttribute("DisplyName", u.getDisplayName()); 
```

我的 JSP：

```
 <div class="wlctxt">Welcome <%=session.getAttribute("DisplyName") %></div> 
```

但是我在这里得到会话属性的空值。

有没有其他方法可以实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T06:11:03.260

您不需要输入会话属性 DisplayName。您对每个请求都执行此操作。您有模型属性，它将被放入请求中，因此您可以在 jsp 中访问它：

```
<div class="wlctxt">Welcome <c:out value="${user.displayName}"/></div> 
```

参加会议有很多你必须关心的麻烦。如果您的用户更改显示名称怎么办？您应该在会话中更新。或者更关键的是：更改某些访问权限？在每个可能的地方都可以轻松地在会话中进行更新。

我通过我可以从内存缓存中获取的内容（从性能的角度从 DB expansibe 读取）放入会话 userId，然后执行以下操作：

```
@Controller
public class SomeController {

    @Autowired
    private UserService userService;

    @RequestMapping(...)
    public String getSomePage(HttpServletRequest request, HttpSession session) {
        Long userId = (Long) session.getAtribute("currentUserId");
        User user = userService.get(userId);
        request.setAttribute("currentUser", user);
    } 
```

在jsp中你可以访问它：

```
<div>Wellcome <c:out value="${currentUser.displayName}"/>!</div> 
```

# javascript - 将内部 div 移到其父母和邻居之上（溢出和 z 指数有帮助）

> ID：10482906
> 
> 赞同：0
> 
> 时间：2012-05-07T13:24:46.197
> 
> 标签：javascript, css, jquery-animate

大家好，我对 JS 和 CSS 真的很陌生，我只是在测试游戏开发技能......

[删除链接]

如果您尝试按“W”键几次，您会看到蓝色 div 当他离开父 div 的区域时，他会在邻居 div 下……如何解决这个问题？

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:34:01.863

一、答案：去掉父框的z-index（红色的）

现在内部运作：

为兄弟姐妹和他们的孩子设置 z-index 的问题是，每次你为父母设置 z-index 时，它的所有孩子的 z-index 现在都将相对于父母的 z-index。

即，如果一个兄弟姐妹的孩子的 z-index 高于另一个兄弟姐妹的孩子，而父母双方都有自己的 z-index，那么这些孩子将不在同一层次结构中。

尝试删除红色框的 z-index，并且只在子级上使用 z-index。

鉴于这是您寻求的结果。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-07T13:34:52.433

把红色方块 0 和蓝色方块 1 的 z-index
[http://www.w3schools.com/cssref/pr_pos_z-index.asp](http://www.w3schools.com/cssref/pr_pos_z-index.asp)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-07T13:29:36.250

更改`overflow :visible`为`overflow: hidden;`for `board_cell`css 规则

# django - 将 GIS 地图数据转换为 SVG？

> ID：10482908
> 
> 赞同：0
> 
> 时间：2012-05-07T13:24:50.140
> 
> 标签：django, image, svg, gis, arcgis

我正在使用 Django 创建一个 Web 应用程序，以向用户显示部分 GIS 地图。

我已经知道可以为此使用谷歌地图，但我想创建自己的地图！

为此，我需要地图中的 SVG 图像，然后将其显示在我的网页中，但问题是，我不知道如何将部分 GIS 数据转换为 SVG。

对我来说，完全拥有所有图层也很重要，因为它们是一般的 GIS 地图数据。

（我的 GIS 引擎是 ArcGIS）

任何建议将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-08T08:36:18.030

这是一个非常古老的问题，我只是在我的个人资料中找到它。虽然我在大约 6 年前更改了这个项目的实现，但目前我看到使用 ArcGIS 可以将数据导出到 SVG：[ExportToSVG](http://desktop.arcgis.com/en/arcmap/10.3/analyze/arcpy-mapping/exporttosvg.htm)。这个功能是 2 或 3 年前开发的，我猜 6 年前我在搜索时它不可用：)

以下文档/页面也可能对进一步阅读有用：

1.  [通过可缩放矢量图形 (SVG) 在 Web 上使用 GIS 数据智能](http://www.svgopen.org/2005/papers/PublishingYourGISDataIntelligenceOnTheWebUsingSVG/index.html)
2.  [将 SVG 导入 GIS？](https://gis.stackexchange.com/questions/11476/importing-svg-into-gis)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-09T21:49:27.573

ArcGIS 一直允许导出到 AI (Adobe Illustrator)。[使用AI](http://www.adobe.com/products/illustrator.html)、[Inkscape](https://inkscape.org/en/)、[CloudConvert](https://cloudconvert.com/ai-to-svg)等可以轻松地将 AI 文件转换为 svg 。

# mono - 光单声道安装

> ID：10482915
> 
> 赞同：0
> 
> 时间：2012-05-07T13:25:26.143
> 
> 标签：mono

mono-project.com 提供的单声道安装包含多个库，例如 gkt，使得安装非常大（约 280MB 左右）。

有什么方法可以为用户提供“只是”单声道环境的安装？我的目标是 Windows、MacOSX 和 Linux。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T18:33:59.770

您可能正在寻找[mkbundle](http://www.mono-project.com/Guide%3aRunning_Mono_Applications)，它将您的应用程序、它使用的库和 Mono 运行时合并到一个可执行映像中。请参阅该页面中的“捆绑包”下。

但是，如果您这样做，则可能意味着您正在分发 LGPL 代码，这意味着所有这些。

如果您正在为 Mac OS X 分发您的应用程序，还有[MonoMacPackager](http://www.mono-project.com/MonoMacPackager)可以为此提供更高级的支持。我认为他们在链接器中做了很多工作，以真正减少您必须包含的 Mono 的数量。它实际上会从您引用的程序集中删除未使用的代码。

# silverlight - Silverlight 三态复选框数据绑定到对象属性计算值

> ID：10482919
> 
> 赞同：0
> 
> 时间：2012-05-07T13:25:33.617
> 
> 标签：silverlight, data-binding, binding, checkbox

所以我有这个小问题使它起作用：

1.  我有 Silverlight 客户端应用程序，该应用程序具有自定义用户控件和三态复选框和双向绑定
2.  用户更改复选框值后，属性底层函数将值转换为整数：

    ```
     -1 nothing
        0 false
        1 true 
    ```

3.  用户从对话框保存数据后，所有数据（复杂对象）都被序列化并发送到 Web 服务并存储在 SQL 数据库中。

4.  当客户端请求从 web 服务返回保存的数据时，它会返回该对象 OK
5.  当我尝试将返回的反序列化对象（EA）绑定回复选框时，如下所示：

    ```
     With cC
               Dim b As New Binding("AllowedTo.Create")
               b.Source = EA
               b.Mode = BindingMode.TwoWay
               .SetBinding(CheckBox.IsCheckedProperty, b)
           End With 
    ```

只有当值是真或假时它才能正常工作，但如果值什么都不是，因为复选框是三态的，它应该转向第三个状态 - 未定义 - 带有减号 [-]，但它不存在。它只是停留在错误状态 - 没有检查是空的，就像它是错误的一样。

可能是什么问题呢？

*对不起我的英语，它不是我的母语*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T15:01:38.113

不要为此使用整数，请使用 Nullable Bool (Bool?)。两种方式绑定效果很好，它转换：

*   已检查 == 真
*   未选中 == 假
*   不确定 == 空

序列化不是可空 bool 的问题，实际上您甚至不必检查 SQL 字段值是否为 NULL，因为它将是一个有效状态，并且在 SQL 数据库中使用 bool 字段甚至会减小它的大小一点点 ;）

如果您的数据库已设置，并且您无法更改它，请编写一个转换器将您的整数转换为可空的布尔值以进行绑定，不应该超过 2 分钟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T20:43:45.623

由于这种技术实际上是复选框的原生技术，因此我建议创建一个自定义控件来处理该布尔值的 3 种不同状态。

# php - livequery 在 ie 中不起作用

> ID：10482920
> 
> 赞同：1
> 
> 时间：2012-05-07T13:25:33.913
> 
> 标签：php, jquery, html, livequery

你好朋友，我正在开发一个类似的模块。在 ie 上运行它时遇到了一些困难。在所有其他浏览器中运行良好。问题是当我点击喜欢按钮时，ie 中没有任何反应。任何人都可以看到我的代码并帮助我。IE就是这样的痛苦。

```
 $('.LikeThis').livequery("click",function(e){

        var getID   =  $(this).attr('id').replace('post_id','');
        var uid = $('.like_uid').val();
        var type_id = $('.like_type_id').val();

        $("#shlike-loader-"+getID).html('<img src="images/icons/like.gif" alt="" />');

    $.post("eg?postId="+getID+ '&uid=' + uid + '&type_id=' + type_id, {

        }, function(response){
            $('#hiddenlikesval'+getID).remove();
            $('#likepanel'+getID).show();
            $('#likecontainer'+getID).append($(response).fadeIn('slow'));
            var bing=$('#hiddenlikesval'+getID).val();
            $('#lplbl'+getID).html(bing);
            $('#likePanel'+getID).css({'display':'block','width':'404px','padding':'5px 3px 5px 3px','background':'#ECEFF5'});
            $('#like-panel-'+getID).html('<input type="hidden" class="like_uid" id="like_uid'+getID+'" name="like_uid" value="'+uid+'"/><input type="hidden" class="like_type_id" id="like_type_id'+getID+'" name="like_type_id" value="'+type_id+'"/><div class="comtcontbtm unlwid"><a href="javascript: void(0)" id="post_id'+getID+'" class="Unlike liknlksh" title="Unlike"><span class="shareiconsbottom unlikeiconbtm"></span><span class="replyshare">unlike</span></a></div>');

            $("#shlike-loader-"+getID).html('');
        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:37:07.587

你在使用 jQuery 1.7 吗？如果是这样，您应该使用`on`,`livequery`已弃用。如果您使用的是 1.7 之前的版本，则应该使用`.delegate`.

对于 1.7，将您的函数声明更改为：

```
$(document).on("click", ".LikeThis", function (e) {
    //your stuff here
}); 
```

对于 1.7 之前的版本，将其更改为：

```
$(document).delegate("click", ".LikeThis", function (e) {
    //your stuff here
}); 
```

上：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

代表：[http ://api.jquery.com/delegate/](http://api.jquery.com/delegate/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T13:30:22.367

```
 $('.LikeThis').live('click', function (e) {
            var getID = $(this).attr('id').replace('post_id', '');
            var uid = $('.like_uid').val();
            var type_id = $('.like_type_id').val();

            $("#shlike-loader-" + getID).html('<img src="images/icons/like.gif" alt="" />');

            $.post("modules/like/likeit.php?postId=" + getID + '&uid=' + uid + '&type_id=' + type_id, {

            }, function (response) {
                $('#hiddenlikesval' + getID).remove();
                $('#likepanel' + getID).show();
                $('#likecontainer' + getID).append($(response).fadeIn('slow'));
                var bing = $('#hiddenlikesval' + getID).val();
                $('#lplbl' + getID).html(bing);
                $('#likePanel' + getID).css({ 'display': 'block', 'width': '404px', 'padding': '5px 3px 5px 3px', 'background': '#ECEFF5' });
                $('#like-panel-' + getID).html('<input type="hidden" class="like_uid" id="like_uid' + getID + '" name="like_uid" value="' + uid + '"/><input type="hidden" class="like_type_id" id="like_type_id' + getID + '" name="like_type_id" value="' + type_id + '"/><div class="comtcontbtm unlwid"><a href="javascript: void(0)" id="post_id' + getID + '" class="Unlike liknlksh" title="Unlike"><span class="shareiconsbottom unlikeiconbtm"></span><span class="replyshare">unlike</span></a></div>');

                $("#shlike-loader-" + getID).html('');
            });
        }); 
```

# java - java独立应用程序中特定于环境的持久性xml

> ID：10482927
> 
> 赞同：1
> 
> 时间：2012-05-07T13:25:55.097
> 
> 标签：java, hibernate, jpa

我有一个独立的 java 应用程序，它使用 JPA 来实现其持久性。现在我在 META-INF 中有一个 persistence.xml。我的应用程序目前正在开发中。我的问题是，如果我从开发转到下一个环境，请说 QA。我必须修改persistence.xml 并重建jar。这是正确的方法吗？如果不是，如果我将连接属性移动到另一个文件，该文件应该放在哪里？

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://java.sun.com/xml/ns/persistence
 http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd" version="2.0">
    <persistence-unit name="pu1" transaction-type="RESOURCE_LOCAL">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <class>ClassA</class>
        <class>ClassB</class>
        <class>ClassC</class>
        <class>ClassD</class>

        <properties>
            <property name="hibernate.dialect" value="org.hibernate.dialect.Oracle9Dialect" />
            <property name="hibernate.connection.driver_class" value="oracle.jdbc.OracleDriver" />
            <property name="hibernate.show_sql" value="true" />
            <property name="hibernate.connection.username" value="username" />
            <property name="hibernate.connection.password" value="password" />
            <property name="hibernate.connection.url"
                value="url" />
            <property name="hibernate.max_fetch_depth" value="3" />
            <property name="hibernate.archive.autodetection" value="class" />
        </properties>
    </persistence-unit>
</persistence> 
```

提前致谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T13:35:06.287

这是个好问题。通常，您将所有这些环境设置放在一个外部文件中，例如 application.properties，并在您启动应用程序时将位置传递给 JVM（例如`-Dconfig.location=/conf/`）

然后你应该找到一种方法将外部化的属性放入你的`EntityManagerFactory`. 你不能在persistence.xml 中这样做，你只能在那里硬编码。但是您可以在创建实体管理器工厂时通过传递供应商属性来执行此操作。

例如，如果使用像 spring 这样的框架，这更容易做到，因为 spring 为实体管理器提供了一个工厂 bean。否则你应该自己处理。这是春天的相关内容：

```
provider.createEntityManagerFactory(persistenceUnitInfo, getJpaPropertyMap()) 
```

# vb.net - 如何从文本框中将数据加载到列表框中？

> ID：10482930
> 
> 赞同：0
> 
> 时间：2012-05-07T13:26:04.430
> 
> 标签：vb.net, listbox, fileopendialog

嗨，我需要一点帮助。

我的部分问题：

> *   首先，读取一个文本文件。
> *   将文本文件中的项目添加到 TextBox 和 ListBox 中。

我的文本文件中的示例数据是这样的：

> **A;猫;狗;老鼠;鸟**

在哪里， ”;” 是分隔符，数据只是一行。
“A”必须加载到 TextBox 中，“Cat,.....,Bird”必须加载到 ListBox 中，每只动物一行。我已经阅读了文本文件并将“A”加载到文本框中。
但无法弄清楚如何将其余数据加载到列表框中。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T14:00:43.547

这非常简单，您应该查看[MSDN 页面](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox%28v=vs.100%29.aspx#Y0)以了解有关 ListBox 和其他相关内容的更多信息。

```
Dim str As String = "A;Cat;Dog;Rat;Bird"  'should have read from your text file

Dim arr As String() = str.Split(New Char() {";"})
Dim i As Integer
For i = 1 To arr.Length - 1
     ListBox1.Items.Add(arr(i))
Next i 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T13:32:19.680

```
string[] strArrr = "A;Cat;Dog;Rat;Bird".Split(new char[] { ';' }, StringSplitOptions.RemoveEmptyEntries);
        for (int i = 1;i< strArrr.Length - 1; i++)
        {
           listbox.items.add(strarrr[i]);
        } 
```

# mysql - InnoDB 表损坏

> ID：10482931
> 
> 赞同：0
> 
> 时间：2012-05-07T13:26:19.620
> 
> 标签：mysql, innodb, corruption

我目前有一个 MySQL 数据库，它同时使用 MyISAM 和 InnoDB 表。为什么两者都被创建我不知道，因为我在创建时基本上不注意哪个。

出于开发目的，我在闪存驱动器上拥有数据库（MySQL 服务器以及数据）。完成一天的工作后，我弹出闪存驱动器并将其带回家继续使用数据库。在过去的一个月中，尽我所能确定，我已经两次损坏了一个或多个 InnoDB 表，导致 mysql 服务器拒绝启动。虽然我更喜欢使用 InnoDB，但我很担心为什么会这样。我应该将 InnoDB 转换为 MyISAMS 吗？

# android - 使用微调器选择动态地将主题应用于我的 android 应用程序

> ID：10482938
> 
> 赞同：2
> 
> 时间：2012-05-07T13:27:20.660
> 
> 标签：android, themes

在我的应用程序中，我可以使用按钮单击来更改主题（每个主题的每个按钮）。当我尝试使用微调器选择项 id 更改主题时，onItemSelectedLisenser() 将连续执行，直到应用程序停止。

我正在使用一种方法来更改主题

```
public static void changeToTheme(Activity activity, int theme)
{
    sTheme = theme;
    activity.finish();
    activity.startActivity(new Intent(activity, activity.getClass()));

} 
```

当我在 onItemSelectedListener() 中调用此方法时，在 changeToTheme() 方法中将活动更改为 onItemSelectedListener 时显示错误

如果我在另一个方法中编写相同的方法并在 onItemSelectedListener() 中调用该方法，它将继续执行，而在微调器中没有任何选择。

请提前提供任何建议谢谢。

# latex - Lyx：跑头永远是对的

> ID：10482941
> 
> 赞同：2
> 
> 时间：2012-05-07T13:27:46.033
> 
> 标签：latex, lyx

我使用命令“runninghead”创建了一个正在运行的标题 现在，正在运行的标题位于左侧的每一侧。

我想单面打印工作，所以我想在骑行侧的每一页上都有运行标题。

# html - 如何操作窗口列表颜色？

> ID：10482942
> 
> 赞同：0
> 
> 时间：2012-05-07T13:27:48.147
> 
> 标签：html, css, jsp, popupwindow

![在此处输入图像描述](../Images/1fb1c12cdf4ed1b21bb2dbb5f727e674.png)我正在为 HTML 弹出窗口制作一个 GUI，它应该看起来像这个模型

我制作了显示几乎相似视图的 HTML： ![在此处输入图像描述](../Images/942aaf5d0a672868156beaecb14a3c7c.png)

但是我不知道如何使模型的蓝色褪色到更浅的细微差别的窗户的褪色尖端。当这是一个显示在 DIV 中的弹出窗口时，HTML / CSS 甚至可能吗？你能告诉我怎么做吗？我现在的代码是

```
 <table id="mainTable" border="1" class="tabell" cellspacing="5" cellpadding="2">
          <tr>
            <!-- Placeholder for the form table -->
            <td valign="top">
              <table id="formTable" border="1" class="tabell" cellspacing="2" cellpadding="2">
                <tr>
                  <td>
                    <b>Sök efter ansvarig</b>
                  </td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                </tr>
                <tr>
                  <td>Sök efter person, funktion, organisation, roll eller signatur med följande namn:</td>
                </tr>
                <tr>
                  <td>
                    <input type="text" class="textandlist" name="searchValue" size="40" />
                  </td>
                </tr>
                <tr>
                  <td align="right">
                    <input type="button" class="knapp" name="searchButton" id="searchButton" value="&nbsp;&nbsp;Sök&nbsp;&nbsp;" onclick="doSubmit('HandlaggareSearch','search')" />
                    <input type="button" class="knapp" name="cancelButton" id="cancelButton" value="Avbryt" onclick="cancelHandlaggareDialog()" />
                    <input type="button" class="knapp" name="showButton" id="showButton" value="Visa alla" onclick="doSubmit('HandlaggareSearch','showAll')" />
                  </td>
                </tr>
              </table>                      
            </td>
            <!-- Placeholder for the result table -->
            <td valign="top"><a href="javascript:void(0)" onclick="document.getElementById('popupD').style.display = 'none';"
" align="right">Stäng</a>

              <img src="images/spacer.gif" />
              <table id="headerTable" class="tabell" cellspacing="2" cellpadding="2" width="700">

                <tr>
                  <td colspan="5">
                    <b>Sökningen gav inga träffar.</b>
                  </td>
                </tr>

                <tr>
                  <td colspan="5">
                    <b>Resultat</b>
                  </td>
                </tr>
                <tr>
                  <td colspan="2">
                    <span>Antal träffar: </span>
                  </td>

                  <td colspan="3" align="right">

                  <a href="javascript:SearchHandlaggareShow('previous')">
                    &lt;&lt;

                    -

                  </a>

                  [

                  -

                  ]

                  <a href="javascript:SearchHandlaggareShow('next')">

                    -

                    &gt;&gt;
                  </a>

                </td>

              </tr>

            </table>

            <div style="height: 220px; overflow: auto;" >   
              <table id="resultTable" class="tabell" cellspacing="2" cellpadding="2" width="700">
                <tr>
                  <th><a href="javascript:SearchHandlaggareSort('1')">Signatur</a></th>
                  <th><a href="javascript:SearchHandlaggareSort('2')">Namn</a></th>
                  <th><a href="javascript:SearchHandlaggareSort('3')">Enhet</a></th>
                  <th><a href="javascript:SearchHandlaggareSort('4')">Grupp</a></th>
                  <th><a href="javascript:SearchHandlaggareSort('5')">Roll</a></th>
                </tr>

                <tr class="bakgrund1" onmouseover="this.className='highlight'" onmouseout="this.className='bakgrund1'">

                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                  <td></td>
                </tr>

              </table>
            </div>

          </td>
        </tr>
      </table> 
```

感谢您的任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:29:40.603

[http://jsfiddle.net/efortis/t6QsP/](http://jsfiddle.net/efortis/t6QsP/)

```
<div class="horizontal-gradient"> Pandora - sok ... </div>​

.horizontal-gradient {
    background: #1a2adb; /* Old browsers */
    background: -moz-linear-gradient(left,  #1a2adb 0%, #a1e6ed 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, right top, color-stop(0%,#1a2adb), color-stop(100%,#a1e6ed)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(left,  #1a2adb 0%,#a1e6ed 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(left,  #1a2adb 0%,#a1e6ed 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(left,  #1a2adb 0%,#a1e6ed 100%); /* IE10+ */
    background: linear-gradient(left,  #1a2adb 0%,#a1e6ed 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#1a2adb', endColorstr='#a1e6ed',GradientType=1 ); /* IE6-9 */
    color: white;
} 
```

​</p>

用

[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

# ios - 文件名匹配 initWithNibName 的规则是什么？

> ID：10482944
> 
> 赞同：7
> 
> 时间：2012-05-07T13:27:55.843
> 
> 标签：ios, uiviewcontroller, xib

iOS 上的 initWithNibName 很聪明：它会自动为 iPad 而不是 iPhone 加载不同的 NIB（尽管很多人不知道这一点 - 它没有记录在 UIViewController.initWithNibName 中！）。

但它还能做什么？我为此找到的唯一 Apple 文档解释说：

1.  它将查找并查找名称末尾带有 ~ipad 或 ~iphone 的文件
2.  苹果*暗示*它遵循自动图像文件名匹配的规则

但是没有指向图像匹配规则的链接，我也找不到任何明确的文档:(。

规则可能包括：“如果您将 @2x 放在文件名的末尾，您将获得不同的视网膜 NIB”（我不知道这是否有效）。

我真正要寻找的是使用了哪些规则的列表。如果我可以更多地使用它们的智能名称匹配（例如，如果它们有“加载横向笔尖与加载纵向笔尖”），它将节省大量的硬编码 - 在我编写的几乎每个应用程序中重复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T15:42:57.440

要回答您的（主要）问题，这些是文件名匹配的规则`initWithNibName`：

> ...但是，如果您不指定 nib 名称，并且不覆盖自定义子类中的 loadView 方法，则视图控制器会使用其他方式搜索 nib 文件。具体来说，它会查找具有适当名称（不带 .nib 扩展名）的 nib 文件，并在请求其视图时加载该 nib 文件。具体来说，它会（按顺序）查找具有以下名称之一的 nib 文件：
> 
> 1.  如果视图控制器类名以单词“Controller”结尾，如在 MyViewController 中，它会查找名称与类名匹配但不包含单词“Controller”的 nib 文件，如在 MyView.nib 中。
> 2.  它查找名称与视图控制器类的名称匹配的 nib 文件。例如，如果类名为 MyViewController，它会查找 MyViewController.nib 文件。
> 
> ***来自nibName**下的 UIViewController 文档*

 **但还有更多……实际上，它`NSBundle`有一些非常聪明的规则来定位其中的资源。[这是描述这些规则的文档页面](https://developer.apple.com/library/mac/#documentation/CoreFOundation/Conceptual/CFBundles/AccessingaBundlesContents/AccessingaBundlesContents.html) （请参阅：*iOS 中的设备特定资源*）。

这将我们[带到此页面](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/App-RelatedResources/App-RelatedResources.html)，该页面描述了可应用于捆绑资源的所有修饰符（和基本模式）（我相信这是您提到的有关图像文件名匹配的链接）。**

# windbg - 每次执行时如何在windbg中跳过一行？

> ID：10482947
> 
> 赞同：5
> 
> 时间：2012-05-07T13:28:05.347
> 
> 标签：windbg

假设我想在每次调用函数 func 时跳过第 3 行

```
int func() {
     int a = 10, b =20;
     a = 25;
     b = 30;
     return a+b
} 
```

所以每次它应该返回40（即不执行第3行a = 25）windbg中是否有任何类似的命令，如gdb中的jmp？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-10T09:19:45.670

又是一个很晚的答案，但如果不宜弄乱汇编，请
设置一个条件断点以跳过执行一行

在下面的示例中，401034 是您不想执行的行，
因此在该行上设置条件断点以跳过它

`bp 401034 "r eip = @$eip + size of current instruction";gc"`
**7**在这种情况下`gc = go`从条件中断

```
jmptest:\>dir /b
jmptest.c

jmptest:\>type jmptest.c
#include <stdio.h>
int func()
{
    int a = 10 , b = 20;
    a = 25;
    b = 30;
    return a+b;
}
int main (void)
{
    int i , ret;
    for (i= 0; i< 10; i++)
    {
        ret = func();
        printf("we want 40 we get %d\n",ret);
    }
    return 0;
}
jmptest:\>cl /nologo /Zi jmptest.c
jmptest.c

jmptest:\>dir /b *.exe
jmptest.exe

jmptest:\>cdb -c "uf func;q" jmptest.exe | grep 401
00401020 55              push    ebp
00401021 8bec            mov     ebp,esp
00401023 83ec08          sub     esp,8
00401026 c745fc0a000000  mov     dword ptr [ebp-4],0Ah
0040102d c745f814000000  mov     dword ptr [ebp-8],14h
00401034 c745fc19000000  mov     dword ptr [ebp-4],19h
0040103b c745f81e000000  mov     dword ptr [ebp-8],1Eh
00401042 8b45fc          mov     eax,dword ptr [ebp-4]
00401045 0345f8          add     eax,dword ptr [ebp-8]
00401048 8be5            mov     esp,ebp
0040104a 5d              pop     ebp
0040104b c3              ret

jmptest:\>cdb -c "bp 401034 \"r eip = 0x40103b;gc\";g;q " jmptest.exe | grep wan
t
we want 40 we get 40
we want 40 we get 40
we want 40 we get 40
we want 40 we get 40
we want 40 we get 40
we want 40 we get 40
we want 40 we get 40
we want 40 we get 40
we want 40 we get 40
we want 40 we get 40

jmptest:\> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T14:18:07.797

如果您熟悉汇编，您可以使用**a**命令来更改汇编（即将“a = 25;”的操作码转换为所有 NOP）。当我想 NOP 退出或以其他方式更改指令流时，我通常会这样做。

偶尔人们会依赖NOP指令的字节码是0x90这一事实，使用**e**命令来编辑内存（例如“ew @eip 0x9090”）。**这与使用a**命令的结果相同。

最后，如果您不经常执行此操作并且只想手动跳过指令，您可以使用“设置当前指令”GUI 操作：

[http://msdn.microsoft.com/en-us/library/windows/hardware/ff542851(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff542851(v=vs.85).aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T15:24:08.037

这里有一个教程解释了如何执行此操作，您可以设置偏移量以使其跳过该行：[http ://cfc.kizzx2.com/index.php/tutorial-using-windbg-to-bypass-specific- functions-windbg-kung-fu-series/](http://cfc.kizzx2.com/index.php/tutorial-using-windbg-to-bypass-specific-functions-windbg-kung-fu-series/)并将寄存器`eip`设置为此值。

此外，您可以设置断点并将命令放入断点以执行相同操作：http: [//japrogbits.blogspot.co.uk/2010/01/using-breakpoints-to-skip-function-in.html](http://japrogbits.blogspot.co.uk/2010/01/using-breakpoints-to-skip-function-in.html)和另一个博客：[http](http://www.shcherbyna.com/?p=1234) ://www.shcherbyna.com/?p=1234 ，您也可以使用`.call`实现相同的：http: [//blogs.msdn.com/b/oldnewthing/archive/2007/04/27/2292037 .aspx](http://blogs.msdn.com/b/oldnewthing/archive/2007/04/27/2292037.aspx)

# iphone - Objective C 中的内存管理，NSString

> ID：10482949
> 
> 赞同：2
> 
> 时间：2012-05-07T13:28:10.033
> 
> 标签：iphone, objective-c, memory-management

我所做的是

```
int main(int argc, char *argv[]){
    NSString *str = [[NSString alloc] init];
    str = @"a a a a a a a a a ";
    [str release];
    NSLog(@"string is %@",str);
    return 0; 
} 
```

我认为 string 将是 nil 因为我们在打印它之前释放它。然而，事实并非如此。所以，我的消费是错误的。

任何人都可以建议我并纠正我。欢迎任何意见。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T13:32:14.680

您正在那里泄漏内存，首先您分配一个新的空`NSString`对象，然后为指针分配一个静态字符串文字，从而有效地泄漏您之前分配的内存。然后你释放一个你不拥有的对象，正如 The Saad 所指出的，然后你应该注意 release 不会将指针设置为 nil ，而只是释放可能会或可能不会以取消分配结束的对象（这，假设它会释放对象，也不会将指针设置回`nil`)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T13:32:59.813

该`str`变量是一个指向字符串对象的指针，本质上包含一个内存地址。向对象发送类似的消息`retain`不会更改变量的值。

仅仅因为字符串被释放不会导致变量失去它的值。您必须明确地将变量设置为 nil 才能发生这种情况。

请注意，使用 iOS 5 下的 ARC，您可以获得弱引用/指针，当它们的底层对象被释放时，这些引用/指针将变为 nil。您可以通过在变量声明前加上`__weak`关键字（或`weak`在属性声明中使用）来做到这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-07T13:43:40.930

```
NSString *str = [[NSString alloc] init]; 
```

这声明了一个变量，该变量是 的实例的指针，为 的实例`NSString`分配内存`NSString`，初始化该内存，然后将指向该内存的指针分配给您声明的变量。

```
str = @"a a a a a a a a a "; 
```

这将创建一个`NSString`常量并将指向它的指针分配给您声明的变量。由于您不再拥有对`NSString`您创建的原始对象的引用，因此您已经泄漏了为它分配的内存。

```
[str release]; 
```

这表明该代码不再希望成为分配给 的内存的所有者`str`。当您使用字符串文字创建它时，该对象将始终存在于您的程序中，并且释放它什么也不做。

> 我认为 string 将是 nil 因为我们在打印它之前释放它。

释放对象永远不会将其设置为`nil`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T13:29:36.897

字符串常量不会被释放；它们既没有明确发布也没有自动发布；它们只是常量（顺便说一下，它们在作用域结束时被释放）。

因此，只有在您之前保留它们时才释放它们

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-07T14:42:06.957

以下是更正的来源：

恐怕在完全理解正在发生的事情之前还有很多东西要学。您还应该了解 malloc（尽管不要使用它）以及指针在 C 中的工作方式。

```
int main(int argc, char *argv[]){
     NSString *str = [[NSString alloc] initWithString:@"a a a a a a a a a "];
     [str release];
     str = nil;
     NSLog(@"string is %@",str);
     return 0; 
}

int main(int argc, char *argv[]){
     NSString *str = @"a a a a a a a a a ";
     // DONT Call this - the str [str release]; - no need to release this kind of string
     NSLog(@"string is %@",str);
     return 0; 
} 
```

# visual-studio-2010 - 从 Code-Behind 导航到 SourceView 的快捷键

> ID：10482952
> 
> 赞同：5
> 
> 时间：2012-05-07T13:28:33.857
> 
> 标签：visual-studio-2010

我正在寻找从**代码**隐藏文件 (a.cs) 导航到**HTML 源视图**页面 (a.aspx) 的快捷键？我找不到任何直接可能的方法来处理这个！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-16T17:07:12.043

**F7** -> 在 .ASPX 和 .ASPX.CS 之间切换（代码隐藏） **Shift + F7** -> 在 .ASPX 的设计视图和源视图之间切换

@JasonReis，你是对的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T03:44:58.617

试试 Shift + F7 通常使用 shift + 快捷键在visual studio中做相反的功能

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T22:26:49.007

F7 允许我在 .aspx 和 .cs 文件之间切换。

# python - Python 扩展 - 使用 super() Python 3 与 Python 2

> ID：10482953
> 
> 赞同：125
> 
> 时间：2012-05-07T13:28:42.163
> 
> 标签：python, inheritance, configparser

本来想问[这个问题](https://stackoverflow.com/questions/4058400/using-colons-in-configparser-python)的，后来发现之前已经想到了……

谷歌搜索我发现了这个[扩展 configparser](http://sureshamrita.wordpress.com/2011/08/28/extending-python-configparser/ozn@yenikaro:%7E/Software/)的例子。以下适用于 Python 3：

```
$ python3
Python 3.2.3rc2 (default, Mar 21 2012, 06:59:51) 
[GCC 4.6.3] on linux2
>>> from configparser import  SafeConfigParser
>>> class AmritaConfigParser(SafeConfigParser):
...     def __init__(self):
...         super().__init__()
... 
>>> cfg = AmritaConfigParser() 
```

但不适用于 Python 2：

```
>>> class AmritaConfigParser(SafeConfigParser):
...       def __init__(self):
...           super(SafeConfigParser).init()
... 
>>> cfg = AmritaConfigParser()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 3, in __init__
TypeError: must be type, not classob 
```

然后我读了一点 Python New Class vs. Old Class 样式（例如[在这里](https://stackoverflow.com/questions/1713038/super-fails-with-error-typeerror-argument-1-must-be-type-not-classobj)。现在我想知道，我可以这样做：

```
class MyConfigParser(ConfigParser.ConfigParser):
      def Write(self, fp):
          """override the module's original write funcition"""
          ....
      def MyWrite(self, fp):
          """Define new function and inherit all others""" 
```

但是，我不应该调用 init 吗？这在 Python 2 中是否等效：

```
 class AmritaConfigParser(ConfigParser.SafeConfigParser):
    #def __init__(self):
    #    super().__init__() # Python3 syntax, or rather, new style class syntax ...
    #
    # is this the equivalent of the above ? 
    def __init__(self):
        ConfigParser.SafeConfigParser.__init__(self) 
```

* * *

## 回答 #1

> 赞同：187
> 
> 时间：2012-05-07T13:44:13.793

*   [`super()`](http://docs.python.org/py3k/library/functions.html#super) (without arguments) was introduced in Python 3 (along with `__class__`):

    ```
    super() -> same as super(__class__, self) 
    ```

    so that would be the Python 2 equivalent for new-style classes:

    ```
    super(CurrentClass, self) 
    ```

*   for old-style classes you can always use:

    ```
     class Classname(OldStyleParent):
        def __init__(self, *args, **kwargs):
            OldStyleParent.__init__(self, *args, **kwargs) 
    ```

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2012-05-07T13:41:01.997

在单一继承的情况下（当你只继承一个类时），你的新类继承基类的方法。这包括`__init__`. 所以如果你没有在你的类中定义它，你会从基础中得到一个。

Things start being complicated if you introduce multiple inheritance (subclassing more than one class at a time). This is because if more than one base class has `__init__`, your class will inherit the first one only.

In such cases, you should really use `super` if you can, I'll explain why. But not always you can. The problem is that all your base classes must also use it (and their base classes as well -- the whole tree).

If that is the case, then this will also work correctly (in Python 3 but you could rework it into Python 2 -- it also has `super`):

```
class A:
    def __init__(self):
        print('A')
        super().__init__()

class B:
    def __init__(self):
        print('B')
        super().__init__()

class C(A, B):
    pass

C()
#prints:
#A
#B 
```

Notice how both base classes use `super` even though they don't have their own base classes.

What `super` does is: it calls the method from the next class in MRO (method resolution order). The MRO for `C` is: `(C, A, B, object)`. You can print `C.__mro__` to see it.

So, `C` inherits `__init__` from `A` and `super` in `A.__init__` calls `B.__init__` (`B` follows `A` in MRO).

So by doing nothing in `C`, you end up calling both, which is what you want.

Now if you were not using `super`, you would end up inheriting `A.__init__` (as before) but this time there's nothing that would call `B.__init__` for you.

```
class A:
    def __init__(self):
        print('A')

class B:
    def __init__(self):
        print('B')

class C(A, B):
    pass

C()
#prints:
#A 
```

To fix that you have to define `C.__init__`:

```
class C(A, B):
    def __init__(self):
        A.__init__(self)
        B.__init__(self) 
```

The problem with that is that in more complicated MI trees, `__init__` methods of some classes may end up being called more than once whereas super/MRO guarantee that they're called just once.

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2012-05-07T17:22:29.607

In short, they are equivalent. Let's have a history view:

(1) at first, the function looks like this.

```
 class MySubClass(MySuperClass):
        def __init__(self):
            MySuperClass.__init__(self) 
```

(2) to make code more abstract (and more portable). A common method to get Super-Class is invented like:

```
 super(<class>, <instance>) 
```

And init function can be:

```
 class MySubClassBetter(MySuperClass):
        def __init__(self):
            super(MySubClassBetter, self).__init__() 
```

However requiring an explicit passing of both the class and instance break the DRY (Don't Repeat Yourself) rule a bit.

(3) in V3\. It is more smart,

```
 super() 
```

is enough in most case. You can refer to [http://www.python.org/dev/peps/pep-3135/](http://www.python.org/dev/peps/pep-3135/)

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2018-02-25T20:04:59.273

Just to have a simple and complete example for Python 3, which most people seem to be using now.

```
class MySuper(object):
    def __init__(self,a):
        self.a = a

class MySub(MySuper):
    def __init__(self,a,b):
        self.b = b
        super().__init__(a)

my_sub = MySub(42,'chickenman')
print(my_sub.a)
print(my_sub.b) 
```

gives

```
42
chickenman 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-08-16T08:01:16.057

Another python3 implementation that involves the use of Abstract classes with super(). You should remember that

```
super().__init__(name, 10) 
```

has the same effect as

```
Person.__init__(self, name, 10) 
```

Remember there's a hidden 'self' in super(), So the same object passes on to the superclass init method and the attributes are added to the object that called it. Hence `super()`gets translated to `Person` and then if you include the hidden self, you get the above code frag.

```
from abc import ABCMeta, abstractmethod
class Person(metaclass=ABCMeta):
    name = ""
    age = 0

    def __init__(self, personName, personAge):
        self.name = personName
        self.age = personAge

    @abstractmethod
    def showName(self):
        pass

    @abstractmethod
    def showAge(self):
        pass

class Man(Person):

    def __init__(self, name, height):
        self.height = height
        # Person.__init__(self, name, 10)
        super().__init__(name, 10)  # same as Person.__init__(self, name, 10)
        # basically used to call the superclass init . This is used incase you want to call subclass init
        # and then also call superclass's init.
        # Since there's a hidden self in the super's parameters, when it's is called,
        # the superclasses attributes are a part of the same object that was sent out in the super() method

    def showIdentity(self):
        return self.name, self.age, self.height

    def showName(self):
        pass

    def showAge(self):
        pass

a = Man("piyush", "179")
print(a.showIdentity()) 
```

# android - 安卓多人回合制游戏

> ID：10482955
> 
> 赞同：0
> 
> 时间：2012-05-07T13:28:44.830
> 
> 标签：android, network-programming, multiplayer

我正在尝试在 Android 上开发多人游戏。接近 TIC TAC TOE 游戏（2 人回合制游戏）。我是整个多人游戏开发的新手，所以我想澄清一些想法..

1.  我是否需要云服务器（例如 smartfoxserver、Photonserver 等服务器）来处理回合制游戏？

2.  对于像上面这样的简单游戏，我是否必须使用开源 SDK（如 Skiller）才能使其成为多人游戏，还是必须自己编写服务器和客户端编程？

3.  除了 Skiller 之外，是否有任何开源 SDK 可用（openfiet 和 scoreloop，根据我的谷歌搜索，我猜他们的 SDK 上不支持回合制游戏）

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T11:09:15.073

1.  不，对于简单的 2 人游戏，完全不需要云服务器（用户 104 提到的套接字......可能是一种选择）。无论如何，您可能都想考虑一个，以便更好地跟踪游戏活动并限制作弊，但服务器端显然是有代价的。

顺便说一句，我不会考虑购买昂贵的服务器解决方案，而是考虑寻找 CAAS 提供商，例如 Stackmob、Parse、Kinvey 等。或者只是使用 AppEngine 或亚马逊云。

1.  如果存在任何好的开源 SDK，它显然是一个有趣的选择。但是，我认为没有（在开始使用该库之前，我会仔细阅读 Skiller 许可证）。

2.  从来没听说过。AndEngine 具有某种多人游戏组件。MAGES 是一个早期的多人游戏框架，现已停产。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T14:01:13.477

我目前正在编写一个多人回合制安卓游戏，我正在自己编写客户端/服务器。我看过skiller和其他人的api，但我想挑战自己。这很涉及，但正如我所说，获得更多经验是一个挑战。我已经用 php 编写了我的服务器，当然也用 java 编写了我的客户端。如果您能够正确把握时机和识别，事情就会开始变得顺利。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T13:33:07.193

我认为如果是这样一个简单的游戏，你可以避免使用服务器。这是电话到电话应用程序的示例，其中一部电话是服务器 [http://www.android10.org/index.php/articlesgeneralprogramming/262-socket-programming-in-android-applications](http://www.android10.org/index.php/articlesgeneralprogramming/262-socket-programming-in-android-applications)

# java - 当通过 Web 应用程序动态更改密钥库文件时，无法正常工作 ssl 连接

> ID：10482957
> 
> 赞同：2
> 
> 时间：2012-05-07T13:28:58.007
> 
> 标签：java, ssl, keystore, keytool

我正在尝试使用 java Web 应用程序动态更改信任库路径。

我正在开发 struts 应用程序，登录是基于 ldap 通过安全套接字层（ssl）连接。

为了与 ssl 连接，我使用 java keytool 选项创建了 .cer 文件。

现在我可以连接 ldap 并且可以从 ldap 中检索用户信息。

当我动态更改 ssl 证书（用于测试的无效证书）时，它不会给出任何例外。但是当我重新启动tomcat服务器时它可以工作。

以下是我正在尝试的代码

```
try{
        java.io.InputStream in = new java.io.FileInputStream("C:\\test.cer");
        java.security.cert.Certificate c = java.security.cert.CertificateFactory.getInstance("X.509").generateCertificate(in);
        java.security.KeyStore ks = java.security.KeyStore.getInstance("JKS");
        ks.load(null); 
        if (!ks.containsAlias("alias ldap")) { 
            ks.setCertificateEntry("alias ldap", c);
        }
        java.io.OutputStream out = new java.io.FileOutputStream("C:\\ldap.jks");
        char[] kspass = "changeit".toCharArray();
        ks.store(out, kspass);
        out.close();
        System.setProperty("javax.net.ssl.trustStore", "C:\\ldap.jks");
        System.setProperty("javax.net.ssl.trustStorePassword", "changeit");    
    }catch(Exception e){
        e.printStackTrace();
    } 
```

我对代码有什么错误吗？我需要添加任何新代码来动态连接吗？

注意：我动态给出了无效文件，而不是 c:\ldap.jks 文件。它没有给出任何例外。

**已编辑（使用自定义 TrustManager 检查）：**

我还实现了 TrustManager 并使用自定义信任管理器初始化 ssl 上下文。但我无法获得预期的行为

你能帮帮我吗？我试过的代码是

```
import java.io.DataInputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStream;
import java.security.KeyStore;
import java.security.NoSuchAlgorithmException;
import java.security.cert.Certificate;
import java.security.cert.CertificateException;
import java.security.cert.X509Certificate;
import java.util.ArrayList;
import java.util.Hashtable;
import java.util.List;
import java.util.UUID;
import javax.naming.Context;
import javax.naming.NamingEnumeration;
import javax.naming.NamingException;
import javax.naming.directory.DirContext;
import javax.naming.directory.InitialDirContext;
import javax.net.ssl.TrustManager;
import javax.net.ssl.TrustManagerFactory;
import javax.net.ssl.X509TrustManager;

public class TestDynamicSSLCert {

    public static void main(String[] args)throws NamingException,IOException {
        DataInputStream din = new DataInputStream (System.in);
        String yes = "yes";

        String certpath = "C:\\cert.cer";
        String ldappath1 = "C:\\ldap.jks";
        String ldappath2 = "C:\\ldap.jks";    // setting valid key store path    

        while("yes".equalsIgnoreCase(yes.trim())){            
            System.out.println(" ldappath2 : "+ldappath2);
            Hashtable env = new Hashtable();
            env.put(Context.SECURITY_AUTHENTICATION, "simple");
            env.put(Context.SECURITY_PRINCIPAL,"uid=admin,ou=system");
            env.put(Context.SECURITY_CREDENTIALS, "secret");
            env.put(Context.INITIAL_CONTEXT_FACTORY,"com.sun.jndi.ldap.LdapCtxFactory");
            env.put(Context.PROVIDER_URL, "ldaps://172.16.12.4:636/ou=system");
            try {

                java.io.InputStream in = new java.io.FileInputStream(certpath);
                java.security.cert.Certificate c = java.security.cert.CertificateFactory.getInstance("X.509").generateCertificate(in);
                java.security.KeyStore ks = java.security.KeyStore.getInstance("JKS");
                ks.load(null);
                if (!ks.containsAlias("alias ldap")) {
                    ks.setCertificateEntry("alias ldap", c);
                }
                java.io.OutputStream out = new java.io.FileOutputStream(ldappath1);
                char[] kspass = "changeit".toCharArray();
                ks.store(out, kspass);
                out.close();
                System.setProperty("javax.net.ssl.trustStore", ldappath2);
                System.setProperty("javax.net.ssl.trustStorePassword", "changeit");              
                // Custorm trust manager 
                MyX509TrustManager reload = new MyX509TrustManager(ldappath2,c);
                TrustManager[] tms = new TrustManager[] { reload };
                javax.net.ssl.SSLContext sslCtx = javax.net.ssl.SSLContext.getInstance("SSL");
                sslCtx.init(null, tms, null);  
                // Custom trust manager
            } catch (Exception e) {
                e.printStackTrace();
            }
            DirContext ctx = new InitialDirContext(env);
            NamingEnumeration enm = ctx.list("");
            while (enm.hasMore()) {
                System.out.println(enm.next());
            }                    
            ctx.close();
            System.out.println(" Go again by yes/no :");
            yes = din.readLine();
            ldappath2 = "C:\\invalidldap.jks"; // setting invalid keystore path

        }
    }
}

class MyX509TrustManager implements X509TrustManager {

    private final String trustStorePath;
    private X509TrustManager trustManager;
    private List<Certificate> tempCertList = new ArrayList<Certificate>();

    public MyX509TrustManager(String tspath,Certificate cert)throws Exception{
        this.trustStorePath = tspath;        
        tempCertList.add(cert);
        reloadTrustManager();
    }

    public MyX509TrustManager(String tspath)
            throws Exception {
        this.trustStorePath = tspath;
        reloadTrustManager();
    }

    @Override
    public void checkClientTrusted(X509Certificate[] chain,
            String authType) throws CertificateException {
        trustManager.checkClientTrusted(chain, authType);
    }

    @Override
    public void checkServerTrusted(X509Certificate[] chain,
            String authType) throws CertificateException {
        try {
            trustManager.checkServerTrusted(chain, authType);
        } catch (CertificateException cx) {
            addServerCertAndReload(chain[0], true);
            trustManager.checkServerTrusted(chain, authType);
        }
    }

    @Override
    public X509Certificate[] getAcceptedIssuers() {
        X509Certificate[] issuers = trustManager.getAcceptedIssuers();
        return issuers;
    }

    private void reloadTrustManager() throws Exception {

        // load keystore from specified cert store (or default)
        KeyStore ts = KeyStore.getInstance(KeyStore.getDefaultType());
        InputStream in = new FileInputStream(trustStorePath);
        try {
            ts.load(in, null);
        } finally {
            in.close();
        }

        // add all temporary certs to KeyStore (ts)
        for (Certificate cert : tempCertList) {         
            ts.setCertificateEntry(UUID.randomUUID().toString(), cert);
        }

        // initialize a new TMF with the ts we just loaded
        TrustManagerFactory tmf = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());
        tmf.init(ts);

        // acquire X509 trust manager from factory
        TrustManager tms[] = tmf.getTrustManagers();

        for (int i = 0; i < tms.length; i++) {
            if (tms[i] instanceof X509TrustManager) {                
                trustManager = (X509TrustManager) tms[i];
                return;
            }
        }

        throw new NoSuchAlgorithmException("No X509TrustManager in TrustManagerFactory");
    }

    private void addServerCertAndReload(Certificate cert,
            boolean permanent) {
        try {
            if (permanent) {
                // import the cert into file trust store
                // Google "java keytool source" or just ...
                Runtime.getRuntime().exec("keytool -importcert ...");
            } else {
                tempCertList.add(cert);
            }
            reloadTrustManager();
        } catch (Exception ex) { /* ... */ }
    }
} 
```

**预期行为：**

ldap 连接应该使用有效的密钥库文件成功（在第一个循环期间）。如果用户给出是，则分配无效的密钥库并且需要产生异常并且不应该连接到 ldap

**实际行为：**

对于两个有效的密钥库文件，我都能够从 ldap 检索信息。

**笔记 ：**

如果我设置 String ldappath2 = "C:\invalidldap.jks"; 一开始，它给出了例外。

**为什么要这样做？**

@EJP，因为，我需要安全地开发基于 ldap 身份验证的模块。模块应该支持多个 ldap 服务器。ldap 设置可以从 UI（具有 ui 以获取 ldaphost、端口、basedn 和 ssl 证书等详细信息的网页）插入，并且此详细信息应进入数据库。同时证书也存在于数据库中。模块的工作只是从 ldap 检索用户并将其存储到另一个表中。因此，如果我们使用新的证书方式更改新的 ldap 服务器设置，System.setProperty("javax.net.ssl.trustStore","truststorepath") 将失败。你同意我的解释吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T01:14:49.233

你是对的。更改密钥库或信任库时必须重新启动 Tomcat。您不需要编写代码来加载客户端证书，您只需要确保您正在处理其证书由您信任的 CA 签名的服务器。在运行时添加新证书是非常不安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T10:24:20.493

> 有没有其他方法可以在不使用上述步骤的情况下安全地连接 ldap？

是的，但你为什么认为你需要知道？

> 每当更新 trustStore 属性时，是否应该重新启动应用程序（tomcat 或单个 java 文件）？

是的。

# c++ - 可变参数以 printf 所有参数

> ID：10482960
> 
> 赞同：2
> 
> 时间：2012-05-07T13:29:11.447
> 
> 标签：c++, variadic-functions

如果我有这个功能：

```
printAll(const char *message, ...)
{
    va_list argptr = NULL;
    va_start(argptr, message);

    // todo: how to printf all the arguments in the message?   

    va_end(argptr);    
} 
```

假设我这样调用函数：

```
printAll("My info: Value1 = %d, Value 2=%d", 1, 2); 
```

在这一行： // todo: 如何打印消息中的所有参数？

我怎样才能将它们全部打印出来以获得：

```
My info: Value1 = 1, Value 2=2 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-07T13:32:26.980

您正在寻找`vprintf()`旨在执行此操作的功能：

```
vprintf(message, argptr); 
```

函数家族的`v*printf()`工作方式与正常对应的函数基本相同，只是它们采用 va_list 而不是 varargs。他们不召唤`va_end()`你，所以你现在拥有它的方式是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T14:03:53.433

这是一般想法的*草图*（虽然是完成的版本，但必须处理更多的事情，例如字段宽度、精度、更多转换等。

```
#include <stdarg.h>
#include <stdio.h>
#include <string.h>

int my_vfprintf(FILE *file, char const *fmt, va_list arg) {

    int int_temp;
    char char_temp;
    char *string_temp;
    char ch;
    int length = 0;

    char buffer[512];

    while ( ch = *fmt++) {
        if ( '%' == ch ) {
            switch (ch = *fmt++) {
                /* %% - print out a single %    */
                case '%':
                    fputc('%', file);
                    length++;
                    break;

                /* %c: print out a character    */
                case 'c':
                    char_temp = va_arg(arg, int);
                    fputc(char_temp, file);
                    length++;
                    break;

                /* %s: print out a string       */
                case 's':
                    string_temp = va_arg(arg, char *);
                    fputs(string_temp, file);
                    length += strlen(string_temp);
                    break;

                /* %d: print out an int         */
                case 'd':
                    int_temp = va_arg(arg, int);
                    itoa(int_temp, buffer, 10);
                    fputs(buffer, file);
                    length += strlen(buffer);
                    break;

                /* %x: print out an int in hex  */
                case 'x':
                    int_temp = va_arg(arg, int);
                    itoa(int_temp, buffer, 16);
                    fputs(buffer, file);
                    length += strlen(buffer);
                    break;
            }
        }
        else {
            putc(ch, file);
            length++;
        }
    }
    return length;
}

int my_printf(char const *fmt, ...) {
    va_list arg;
    int length;

    va_start(arg, fmt);
    length = my_vfprintf(stdout, fmt, arg);
    va_end(arg);
    return length;
}

int my_fprintf(FILE *file, char const *fmt, ...) {
    va_list arg;
    int length;

    va_start(arg, fmt);
    length = my_vfprintf(file, fmt, arg);
    va_end(arg);
    return length;
}

#ifdef TEST 

int main() {
    my_printf("%s", "Some string");
    return 0;
}

#endif 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-18T19:22:22.483

这是一个 printAll() 将完全按照您的意愿执行...

```
#ifdef __cplusplus
#include <cstring>
#include <cstdio>
#include <cstdarg>
using namespace std;
#else
#include <string.h>
#include <stdio.h>
#include <stdarg.h>
#endif

void printAll(const char* fmt, ...) {
    va_list ap;
    va_start(ap, fmt);
    const size_t MAX_LEN = 1023;
#ifdef __cplusplus
    char msg[MAX_LEN+1] = {0};
#else
    char msg[MAX_LEN+1];
    for (int i = 0; i < MAX_LEN+1; i++)
    {
       msg[i] = 0;
    }
#endif
    vsnprintf(msg, MAX_LEN, fmt, ap);
    printf("%s\n", msg);
    va_end(ap);
}

int main() {
    printAll("My info: Value1 = %d, Value 2=%d", 1, 2);
    return 0;
} 
```

我的信息：值 1 = 1，值 2 = 2

# tfs - TFS2010 - 工作项目类型 - 链接到程序？

> ID：10482961
> 
> 赞同：0
> 
> 时间：2012-05-07T13:29:12.560
> 
> 标签：tfs, tfs-workitem

我希望 LinkLabel 链接到程序（而不是 http-URL）。但是在工作项中，唯一允许的链接类型似乎是“http”......我如何在我的工作项类型中创建一个链接，该链接链接到我的本地网络中的程序，如带有参数的 \server1\path2\program3.exe从工作项的输入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T13:55:18.507

您是否尝试过使用`file:///c:/myfolder/myapp.exe`语法？

它可以将链接保存在工作项中。

![在此处输入图像描述](../Images/8dafe989e9d2032a63e46a8d24a1cbab.png)

# jquery - 如何阻止可拖动的被拖动到某个位置之外？

> ID：10482962
> 
> 赞同：0
> 
> 时间：2012-05-07T13:29:14.130
> 
> 标签：jquery, jquery-ui

我有一个应该描绘时间的栏，在这个栏下我放置了两个可拖动的标记，其中一个表示开始时间，另一个表示结束时间。不幸的是，如果您可以将结束时间标记拖到开始时间标记的左侧，这看起来很粗糙，因为我们必须让开始时间 <= 结束时间。我一直在尝试这个[joern.zae](http://forum.jquery.com/topic/trying-to-manipulate-the-position-of-a-draggable-mid-drag-doesn-t-seem-to-work#14737000000849001) .... 我发现我需要的不是负号，而是等于号。但是解决方案不起作用，而是可拖动的只是闪烁。

总之，当它到达 x 轴上的某个位置时，我需要可拖动停止。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T13:40:00.303

对于可拖动对象，您可能需要查看 jQuery UI 的[有关约束移动](http://jqueryui.com/demos/draggable/#constrain-movement)的示例。

听上去，您正在实现一个双手柄滑块，因此您可能希望[查看 jQuery UI 的滑块演示](http://jqueryui.com/demos/slider/#range)。

# c++ - 为什么堆栈内存大小如此有限？

> ID：10482974
> 
> 赞同：102
> 
> 时间：2012-05-07T13:29:47.570
> 
> 标签：c++, memory-management

在堆上分配内存时，唯一的限制是可用 RAM（或虚拟内存）。它使 Gb 的内存。

那么为什么堆栈大小如此有限（大约 1 Mb）？什么技术原因阻止您在堆栈上创建非常大的对象？

**更新**：我的意图可能不清楚，我*不想*在堆栈上分配巨大的对象，我*不需要*更大的堆栈。这个问题只是纯粹的好奇。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-05-07T13:42:06.677

我的直觉如下。栈不像堆那么容易管理。堆栈需要存储在连续的内存位置。这意味着您不能根据需要随机分配堆栈，但您至少需要为此目的保留虚拟地址。保留的虚拟地址空间越大，可以创建的线程就越少。

例如，一个 32 位的应用程序一般有 2GB 的虚拟地址空间。这意味着如果堆栈大小为 2MB（默认为 pthreads），那么您最多可以创建 1024 个线程。这对于 Web 服务器等应用程序来说可能很小。例如，将堆栈大小增加到 100MB（即，您保留 100MB，但不必立即将 100MB 分配给堆栈），会将线程数限制为大约 20，即使对于简单的 GUI 应用程序也可能会受到限制。

一个有趣的问题是，为什么我们在 64 位平台上仍然有这个限制。我不知道答案，但我假设人们已经习惯了一些“堆栈最佳实践”：小心在堆上分配大对象，如果需要，手动增加堆栈大小。因此，没有人发现在 64 位平台上添加“巨大的”堆栈支持很有用。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2014-12-16T09:14:43.820

还没有人提到的一个方面：

**有限的堆栈大小是一种错误检测和遏制机制。**

通常，C 和 C++ 中堆栈的主要工作是跟踪调用堆栈和局部变量，如果堆栈超出范围，则几乎总是设计和/或应用程序行为中的错误.

如果允许堆栈任意增长，这些错误（如无限递归）将很晚才被发现，只有在操作系统资源耗尽之后。这可以通过对堆栈大小设置任意限制来防止。实际大小并不那么重要，除了它足够小以防止系统退化。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-05-07T13:46:54.193

它只是一个默认大小。如果你需要更多，你可以得到更多——通常是通过告诉链接器分配额外的堆栈空间。

拥有大堆栈的缺点是，如果您创建许多线程，它们每个都需要一个堆栈。如果所有的堆栈都在分配多 MB，但不使用它，那么空间将被浪费。

您必须为您的程序找到适当的平衡点。

* * *

有些人，比如@BJovke，认为虚拟内存本质上是免费的。确实，您不需要物理内存来支持所有虚拟内存。您必须至少能够为虚拟内存提供地址。

但是，在典型的 32 位 PC 上，虚拟内存的大小与物理内存的大小相同——因为我们只有 32 位用于任何地址，无论是否虚拟。

因为进程中的所有线程共享相同的地址空间，所以它们必须在它们之间划分地址空间。在操作系统发挥作用后，“只”有 2-3 GB 空间用于应用程序。这个大小是物理*和虚拟内存的限制，**因为*没有更多的地址。

 ** * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-05-07T13:41:17.650

一方面，堆栈是连续的，因此如果您分配 12MB，则当您想要低于您创建的任何内容时，您必须删除 12MB。移动物体也变得更加困难。这是一个真实世界的示例，可能会使事情更容易理解：

假设您在房间周围堆放箱子。哪个更容易管理：

*   将任何重量的盒子堆叠在一起，但是当您需要在底部放一些东西时，您必须撤消整堆。如果您想从堆中取出一件物品并将其交给其他人，您必须取下所有盒子并将盒子移到其他人的堆中（仅限堆叠）
*   你把你所有的盒子（除了非常小的盒子）放在一个特殊的区域，在那里你不会把东西堆在其他东西上面，然后写下你把它放在一张纸上的地方（一个指针），然后把纸放在上面桩。如果您需要将盒子交给其他人，您只需将纸叠中的纸条递给他们，或者给他们一张纸的复印件并将原件留在您的纸堆中。（堆栈+堆）

这两个例子是粗略的概括，类比中有一些明显错误的点，但它足够接近，希望它可以帮助你看到这两种情况下的优势。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-03-17T09:39:23.000

按照从近到远的顺序考虑堆栈。寄存器离 CPU 很近（快），栈更远一些（但还是比较近），堆离得很远（访问慢）。

堆栈当然存在于堆上，但由于它被连续使用，它可能永远不会离开 CPU 缓存，使其比普通的堆访问更快。这是保持堆栈大小合理的原因；尽可能保持缓存。分配大堆栈对象（可能会在溢出时自动调整堆栈大小）违背了这一原则。

所以它是一个很好的性能范例，而不仅仅是旧时代的遗留物。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-04-07T16:11:42.143

例如，在 100MB 的堆栈中分配大对象会使大多数机器无法将它们一次加载到缓存中，这几乎违背了堆栈的目的。

堆栈的要点是将属于同一范围的小对象（因此通常需要一起或彼此靠近）一起存储在连续的内存地址中，以便程序可以将它们全部加载到缓存中同时，最大限度地减少缓存未命中，一般来说，CPU 必须等待的时间，直到它从较慢的 RAM 中获取一些丢失的数据。

存储在堆栈中的 50MB 对象不适合缓存，这意味着在每个缓存行之后会有一个 CPU 等待时间，直到从 RAM 中取出下一条数据，这意味着一个会阻塞调用堆栈并且没有任何意义与从堆中加载相比，受益（在速度方面）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-12-16T10:28:16.893

许多你认为需要大量筹码的事情可以通过其他方式完成。

Sedgewick 的“算法”有几个很好的例子，通过用迭代替换递归，从递归算法（如 QuickSort）中“删除”递归。实际上，算法仍然是递归的，并且仍然存在 as 堆栈，但是您将排序堆栈分配在堆上，而不是使用运行时堆栈。

（我喜欢第二版，用 Pascal 给出算法。它可以用 8 美元。）

另一种看待它的方式是，如果您认为需要一个大堆栈，那么您的代码效率低下。有一种使用更少堆栈的更好方法。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-23T04:38:33.373

如果您可以有一个无限堆栈，那么每个虚拟地址都可能被堆栈使用。如果堆栈可以使用每个地址，那么堆就没有地方可去。您为堆变量选择的每个地址都可能被不断增长的堆栈覆盖。

换句话说，栈上的变量和堆上的变量占用同一个虚拟地址空间。我们需要某种方法来防止堆分配器在堆栈可能增长的地方分配数据。堆栈大小是一种简单的方法。堆分配器知道堆栈地址已被占用，因此它使用其他东西。

* * *

## 回答 #9

> 赞同：-9
> 
> 时间：2012-05-07T13:48:35.233

我不认为有任何技术原因，但它会是一个奇怪的应用程序，它只是在堆栈上创建了一个巨大的超级对象。堆栈对象缺乏灵活性，随着大小的增加，问题变得更加严重——你不能在不破坏它们的情况下返回，也不能将它们排队到其他线程。*

# javascript - 在modernizr中编写测试以检查浏览器中对溢出y：auto的支持

> ID：10482975
> 
> 赞同：3
> 
> 时间：2012-05-07T13:29:55.720
> 
> 标签：javascript, css, modernizr

我正在尝试 Modernizr 并尝试在其中编写测试以检查浏览器是否支持 css 属性。
我在这里写的是“溢出-y：自动”

```
Modernizr.addTest('overflowauto', function(){
    var bool = false;
    var testProp = "overflow-y";
    var testVal = "auto";
    var styles = Modernizr._prefixes.join(testProp + ":" + testVal + "; ");
    var ret = true;
    ret =  Modernizr.testStyles('#modernizr { '+styles+' }', function(elem, rule){
        for(var i = 0; i < Modernizr._prefixes.length; i++) {
            bool = (window.getComputedStyle ?
                    getComputedStyle(elem, null) :
                    elem.currentStyle)[Modernizr._prefixes[i] + testProp] == testVal;

            if(bool) break;
        }

        return bool;

    });
    return ret;
}); 
```

如果支持，这应该将 **Modernizr.overflowauto**设置为 true。

但问题是，这总是回归真实。:(

即使在不支持 overflow-y:auto 的 android < 3 中，它也会返回 true。请告诉我我做错了什么或如何实现我正在尝试的东西。请帮忙。

# perl - perl：在while循环中连接

> ID：10482981
> 
> 赞同：1
> 
> 时间：2012-05-07T13:30:26.193
> 
> 标签：perl, sockets

我读[了这个](http://www.madore.org/~david/computers/connect-intr.html)，我会在一个while循环中调用connect来强制连接。那么我可以做这样的事情还是这是一个愚蠢的想法......

```
sub sendData2Master {
    my ($data) = @_ ;
    my $failed = -1;
    return( $failed ) unless defined $data ;

    my $proto = (getprotobyname('tcp'))[2] ;
    my $sin = sockaddr_in( $PORTMASTER, inet_aton($MASTER) ) ;
    my $FS;
    unless (socket($FS, AF_INET, SOCK_STREAM, $proto)) {
        logger("socket [$MASTER]:[$PORTMASTER] failed:[$?]:[$!]") ;
        return( $failed ) ;
    }

    while (!connect($FS, $sin) && ! $!{EISCONN}) 
    {
        if ($!{EINTR} || $!{EINPROGRESS})
        {
            last;
            # the connection shall be established asynchronously.
            # http://pubs.opengroup.org/onlinepubs/009695399/functions/connect.html
        }
        else
        {
            logger("connect to [$MASTER]:[$PORTMASTER] failed:[$?]:[$!]") ;
            if ($!{ECONNREFUSED})
            {
                # tcp server can refuse a connection because a low Listen parameter in IO::Socket::INET->new
                next;
            }
            else
            {
                return ( $failed );
            }
        }

    }

    select((select($FS),$|=1)[0]);
    unless ( print $FS "$data","\n" ) {
        logger("print [$data] to [$MASTER]:[$PORTMASTER] failed:[$?]:[$!]") ;
        return( $failed );
    }
    close ($FS) ;
    select((select(STDOUT),$|=1)[0]);

    return 1;
} 
```

感谢您提供任何已经这样做的建议或示例... ------------------------------------- -----------------------------------------

# java - JMeter配置：登录后的性能测试

> ID：10482982
> 
> 赞同：2
> 
> 时间：2012-05-07T13:30:27.567
> 
> 标签：java, jmeter

我正在尝试在我的 webapp 中测试特定操作的性能。为此，我必须先登录。基本上我有两个 HTTP 请求，一个用于登录，另一个我想用多个同时线程（=用户）进行测试。

为了在第二个请求上获得可比较的结果，我需要第一个请求由所有线程完成，以便第一个请求不会干扰第二个请求的性能。

我尝试将进程拆分为多个 ThreadGroup 或在 setUp-ThreadGroup 和 ThreadGroup 中，问题是登录请求将登录信息存储到 HTTPSession 中，我需要在这些 ThreadGroup 中“共享”会话。

我做了一些研究，但我找不到很多我能理解的东西。是否有捷径可寻？

非常感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T14:48:42.077

您可以在单个线程组中执行此操作，使用作为子级添加到第二个请求采样器的[同步计时器](http://jmeter.apache.org/usermanual/component_reference.html#Synchronizing_Timer)，其值为`Number of Simultaneous Users to Group by`= 线程总数。

这将暂停执行第二个请求，直到所有线程完成第一个请求。

```
 **Thread Group**
Number of Threads = N
+- **Login Request**
+- **1st Request**
   +- **Synchronizing Timer**
      Number of Simultaneous Users to Group by = N
+- **2nd Request**
   +- **Synchronizing Timer**
      Number of Simultaneous Users to Group by = N 
```

# c# - 自动播放列表框中的下一项

> ID：10482987
> 
> 赞同：0
> 
> 时间：2012-05-07T13:30:40.167
> 
> 标签：c#, wpf, listbox, playlist

我正在制作一个小型媒体播放器，在其中将媒体文件添加到列表框中，该列表框用作媒体元素的播放列表。当我单击列表框中的项目时，它开始播放。我想做的是让媒体元素在当前结束后自动开始播放列表框中的下一首歌曲/视频。

以下是我将歌曲添加到列表框的方法：

```
 OpenFileDialog ofd = new OpenFileDialog();
        ofd.Multiselect = true;

        if (ofd.ShowDialog() == System.Windows.Forms.DialogResult.OK)
        {
            foreach (string file in ofd.FileNames)   
            {
                FileInfo fileName = new FileInfo(file);                   
                listBox.Items.Add(fileName);
            }
        } 
```

这是我如何单击列表框中的项目并开始播放的方法

```
 private void Button_Click(object sender, RoutedEventArgs e)
    {
        System.Windows.Controls.Button prevButton = player.Tag as System.Windows.Controls.Button;
        System.Windows.Controls.Button button = sender as System.Windows.Controls.Button;
        FileInfo fileInfo = button.DataContext as FileInfo;

        // If a file is playing, stop it

        if (prevButton != null)
        {
            player.Tag = null;
            player.Stop();
            prevButton.Background = Brushes.White;

            // if the one thats playing is the one that was clicked -> don't play it

            if (prevButton == button)
                return;
        }

        // Play the one that was clicked

        player.Tag = button;
        player.Source = new Uri(fileInfo.FullName);
        player.Play();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:09:29.327

订阅 MediaElement 或 MediaPlayer 的 MediaEnded 事件，然后从列表框中选择下一项。

**编辑**

如何选择下一个项目：

1.  当前项的索引在 ListBox 的 SelectedIndex 属性中
2.  您可以通过将 1 添加到 SelectedIndex 并检查索引是否仍在边界内来获取下一项
3.  将新索引存储在一个变量中，该变量将保持新索引直到播放项目或直接更改 SelectedIndex；这将更改 SelectedItem 并移动 ListBox 中的选择

以下代码未经编译器检查！

```
private int currentSongIndex = -1;

void Player_MediaEnded(object sender, EventArgs e)
{
    if(currentSongIndex == -1)
    {
        currentSongIndex = listBox.SelectedIndex;
    }
    currentSongIndex++;
    if(currentSongIndex < listBox.Items.Count)
    {
        player.Play(listBox.Items[currentSongIndex]);
    }
    else
    {
        // last song in listbox has been played
    }
} 
```

# sharepoint - 在 Sharepoint Server 2010 中安装功能时创建列表

> ID：10482988
> 
> 赞同：0
> 
> 时间：2012-05-07T13:30:57.787
> 
> 标签：sharepoint, sharepoint-2010

我有一个包含设置列表模板的 Sharepoint 功能，其他功能可以读取该模板。列表必须有一个特定的名称才能使整个工作正常工作，所以理想情况下，我宁愿创建一个列表而不是列表模板。

我尝试通过覆盖方法来玩这个`EventReceiver`类。`FeatureInstalled`它接收一个`SPFeatureReceiverProperties`类型的参数。我查看了文档，发现一个属性 ,`UserCodeSite`指的`SPSite`是功能的安装位置，如果它是一个`Site`范围解决方案，在我的例子中就是这样。这样，我想编写一段代码，从功能中包含的列表模板创建一个特定的列表。

```
SPWeb_object.Lists.Add(listName, "", SPListTemplate_object) 
```

但是该属性为空，该属性也是如此`Feature`。所以我无法获取 SPSite 对象，也无法获取 SPWeb 对象。

还有其他想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T15:37:17.020

您可以创建一个新的列表实例 ListInstance 构造。请参阅：http: [//msdn.microsoft.com/en-us/library/ms476062.aspx](http://msdn.microsoft.com/en-us/library/ms476062.aspx) 该列表将在激活该特定功能时创建。要自动激活功能，您可以使用功能装订。请参阅此[http://msdn.microsoft.com/en-us/library/ff648422.aspx](http://msdn.microsoft.com/en-us/library/ff648422.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T21:49:47.527

创建列表是一个非常常见的需求。正如另一位海报所建议的那样，通常最好在激活而不是安装时创建一个列表实例。您可以访问所需的激活范围（激活该功能的 SPWeb 或 SPSite），如下所示：

```
SPWeb web = (SPWeb)properties.Feature.Parent;
```

或者

```
SPSite 站点 = (SPSite)properties.Feature.Parent；
```

希望这可以帮助。

# salesforce - 如何在知识文章中嵌入视频？

> ID：10482989
> 
> 赞同：1
> 
> 时间：2012-05-07T13:30:57.967
> 
> 标签：salesforce, apex-code, visualforce

我想在我的知识文章中嵌入视频，并且我一直在尝试遵循这两个帖子中的步骤：http: [//boards.developerforce.com/t5/General-Development/Embedded-Video-in-New-Knowledge- Base/td-p/19](http://boards.developerforce.com/t5/General-Development/Embedded-Video-in-New-Knowledge-Base/td-p/19) ... [http://success.salesforce.com/ideaView?id=087300000006n6v](http://success.salesforce.com/ideaView?id=087300000006n6v)

在设置->自定义->知识->文章类型下，我有一个标题为 test_video_tutorial 的“视频教程”文章类型。我有一个名为“Tutorial”的自定义字段，API 名称为“Tutorial__c”。

在文章管理中，我创建了一篇类型为“视频教程”的新文章，并且教程字段有： `<div class="youtube">http://www.youtube.com/v/TDArzCNu178?</div>`

在 Setup->Develop->Pages 中，我创建了一个名为 VideoTutorialPage 的新 Visualforce 页面，如下所示：

```
<apex:page standardController="Video_Tutorials__kav" showHeader="true">
    <apex:outputPanel >
        <apex:outputField value="{!Video_Tutorials__kav.Title}"/>
        <apex:outputText escape="false" value="{!Video_Tutorials__kav.Tutorial__c}"/>
    </apex:outputPanel>
</apex:page> 
```

但是，当我单击文章中的文章“test_video_tutorial”时，视频没有嵌入。我只看到它的html代码。我是否需要告诉 Salesforce，当我单击视频教程文章时，它应该使用我创建的 Visualforce 页面？我必须做什么才能让视频显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T19:08:00.883

`<iframe>`在 Summer 12 版本中，通过在知识文章中允许标签，这变得容易多了。有关详细信息，请参阅[Summer 12 发行说明](http://na1.salesforce.com/help/doc/en/salesforce_summer12_release_notes.pdf)（“文章中的多媒体内容”部分）

# c++ - 如何避免 QNetworkRequest 将 RHELP 动词发送到 FTP 服务器？

> ID：10482991
> 
> 赞同：3
> 
> 时间：2012-05-07T13:31:32.013
> 
> 标签：c++, qt, ftp, ftp-client

**场景：**
我正在我的应用程序中实现一个**FTP 获取**功能，它使用**Qt 4.7.x**
Qt 文档声明**QFtp**类**已弃用**，改为使用 QNetworkAccessManager，所以我正在这样做；）
我测试了我写的代码有一些 FTP 服务器，它似乎工作正常。

**问题：**
当我使用我的 ftp get 类连接到本地、自制（并且非常简单）的 ftp 服务器时，我收到以下错误：**请求：500 无可用帮助。***我使用tcpdump* 跟踪了 ftp 通信，实际上我看到*QNetworkAccessManager/QNetworkRequest*一旦获得**230 User Logged In**就会向服务器发送一个**HELP动词**

 **不幸的是，我的服务器不支持。现在有没有办法配置 Qt 不发送 HELP 动词？在线阅读所涉及课程的 Qt Doc 并没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T13:58:29.130

它是不可配置的。您可以在此处查看正在发生的事情的源代码：http: [//qt.gitorious.org/qt/qt/blobs/4.7/src/network/access/qnetworkaccessftpbackend.cpp#line300](http://qt.gitorious.org/qt/qt/blobs/4.7/src/network/access/qnetworkaccessftpbackend.cpp#line300)

如果您可以构建自己的 Qt 版本，那么它很容易被压制。但升级 FTP 服务器以支持 HELP 命令可能更容易。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-07T14:00:19.567

除非您想重新实现 FTP 后端，否则可能无法避免这种情况。通过浏览[FTP后端的源代码](http://qt.gitorious.org/qt/qt/blobs/4.8/src/network/access/qnetworkaccessftpbackend.cpp)，可以发现发送`HELP`命令的目的是查看服务器是否支持“SIZE”和“MDTM”命令。

可能最简单的解决方案是在您的 FTP 服务器中为 HELP 命令实现一个最小处理程序，该处理程序以适当的 200/211/214 响应进行响应。

编辑：请参阅[http://qt.gitorious.org/qt/qt/blobs/4.8/src/network/access/qnetworkaccessftpbackend.cpp#line350](http://qt.gitorious.org/qt/qt/blobs/4.8/src/network/access/qnetworkaccessftpbackend.cpp#line350)了解后端对响应的期望。这并不复杂。**

# objective-c - 将 HTML 内容设置为 MFMailComposeViewController 视图的邮件正文

> ID：10482992
> 
> 赞同：2
> 
> 时间：2012-05-07T13:31:33.583
> 
> 标签：objective-c, ios, email, xcode4, messageui

我正在使用 MessageUI 框架在我的应用程序中撰写电子邮件。我想为邮件正文设置 HTML 内容。

所以我[参考了 Mugunthkumar 的博客](http://blog.mugunthkumar.com/coding/iphone-tutorial-in-app-email/)，我编码如下，

```
MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
picker.mailComposeDelegate = self;

[picker setSubject:@"Hello from California!"];

// Set up recipients
NSArray *toRecipients = [NSArray arrayWithObject:@"first@example.com"]; 
NSArray *ccRecipients = [NSArray arrayWithObjects:@"second@example.com", @"third@example.com", nil]; 
NSArray *bccRecipients = [NSArray arrayWithObject:@"fourth@example.com"]; 

[picker setToRecipients:toRecipients];
[picker setCcRecipients:ccRecipients];  
[picker setBccRecipients:bccRecipients];

// Fill out the email body text    
NSString *pageLink = @"http://mugunthkumar.com/mygreatapp"; // replace it with yours
NSString *iTunesLink = @"http://link-to-mygreatapp"; // replate it with yours
NSString *emailBody =
[NSString stringWithFormat:@"%@\n\n&lt;h3&gt;Sent from &lt;a href = '%@'&gt;MyGreatApp&lt;/a&gt; on iPhone. &lt;a href = '%@'&gt;Download&lt;/a&gt; yours from AppStore now!&lt;/h3&gt;", @"title", pageLink, iTunesLink];

[picker setMessageBody:emailBody isHTML:YES];

[self presentModalViewController:picker animated:YES];
[picker release]; 
```

当我运行应用程序并转到电子邮件撰写视图时，我收到以下邮件正文，

![在此处输入图像描述](../Images/c4c12b0226c0a814966e446cea3fa9d7.png)

我正在使用 XCode4 和 iOS 4.3。我看不到我的代码有任何问题。但我需要在我的邮件正文中插入可点击的 URL。

请帮忙 ！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T14:00:00.027

如果要发送 HTML 格式的电子邮件，则在电子邮件正文中转义 HTML 标记是错误的。使用`</a>`代替`&lt;/a&gt;`等。

# java - 如何用eclipse单独调用方法？

> ID：10482994
> 
> 赞同：0
> 
> 时间：2012-05-07T13:31:38.333
> 
> 标签：java, eclipse, plugins, methods, refactoring

我使用 IDE Eclipse 来编写 Java 代码。我有一个这样的类结构：

```
class Item
{
    private ItemId id;
    public ItemId getId()
    {
        return this.id;
    }
}

class ItemId {/*just some class*/} 
```

我也有一个使用 ItemId 恢复 Item 的实用方法，该方法具有以下签名：

```
UtilityClass.utilityMethod(ItemId id); 
```

所以，有很多这样的调用：

```
Item unpredictableItemName = ...
UtilityClass.utilityMethod(unpredictableItemName.getId()); 
```

或者

```
ItemId unpredictableIdName = ...
UtilityClass.utilityMethod(unpredictableIdName); 
```

我想编写新方法，它将使用已经构造的 Item 对象：

```
UtilityClass.utilityMethod(Item item); 
```

所以问题是： **如何从**

```
UtilityClass.utilityMethod(unpredictableItemName.getId()) 
```

**至**

```
UtilityClass.utilityMethod(unpredictableIdName)? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T14:41:33.227

选择`utilityMethod(ItemId id)`，右键单击，然后选择重构 > 更改方法签名。选择选项以保留原始方法并弃用它。您最终会使用这两种方法，`UtilityClass`并且由于弃用，原始调用者将被标记。然后，您可以使用上面的正则表达式选项，或者只使用弃用警告来随着时间的推移进行迁移。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T14:31:10.723

使用正则表达式文本搜索和替换来替换：

`UtilityClass.utilityMethod\((.*)\.getId\(\)\)`和 `UtilityClass.utilityMethod\(\1\)`

然后手动修复方法签名。

# struts2 - struts2中的动作消息标签

> ID：10482995
> 
> 赞同：6
> 
> 时间：2012-05-07T13:31:40.070
> 
> 标签：struts2

我是 struts 新手，如何在 struts2 jsp 页面中装饰动作消息和动作错误？

```
<s:actionmessage/>
<s:actionerror/> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T10:16:17.813

您可以使用 css 样式以及 jquery 主题属性来装饰您的操作错误和操作消息。

```
<div class="error"><s:actionerror theme="jquery"/></div>
<div class="message"><s:actionmessage theme="jquery"/></div>

.message li
{
    font-size: 14px;
    color: #000066;
    text-align: center;
    list-style: none;
    font-family: Trebuchet MS,sans-serif,inherit,Arial,monospace;
}

.error li
{
    font-size: 14px;
    color: #990000;
    text-align: center; 
    list-style: none;
    padding-right: 50px;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T05:27:44.473

嗨，如果您希望您的操作消息和错误消息来装饰使用此代码，我在这里发布您的问题的解决方案

```
<div id="sucessMsg"><s:actionerror /></div>

sucessMsg is the class that is using by struts2 internally so override this so kindly put the below code inside the css

#sucessMsg {
    text-align: center;
    font-weight: bolder;
    color:  #6A2A91;
    list-style: none;
    margin: auto;
}

#errorMsg {
    text-align: center;
    font-weight: bolder;
    color: red;
    list-style: none;
    width: 350px;
    margin: auto;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T14:19:55.390

You should view the HTML source after it is rendered to see the CSS classes and HTML structure that Struts uses to render the message. You can also look in the template files.

By Default struts renders each action message as follows:

```
<ul>
  <li><span class="actionMessage">${message}</span></li>
</ul> 
```

Every message will have a `<li><span class="actionMessage">${message}</span></li>`.

You can create CSS for actionMessage or change the template file to render these however you want.

The template files for these are located in:

```
/template/simple/actionerror.ftl
/template/simple/actionmessage.ftl 
```

Field Error might be useful to you as well:

```
/template/simple/fielderror.ftl 
```

**note:** if you are using the xhtml theme those files *may* be located in that folder under template

# makefile - 使用 Premake 链接到外部库

> ID：10482997
> 
> 赞同：3
> 
> 时间：2012-05-07T13:31:47.670
> 
> 标签：makefile, premake

我无法使用 premake 获得与主程序的外部库链接。例如，我已将问题简化为以下示例：

./_external/ext.cpp

```
#include "ext.h"
int foo()
{
    return 4;
} 
```

./_external/ext.h

```
#pragma once
int foo(); 
```

./main.cpp

```
#include "stdio.h"
#include "_external/ext.h"

int main()
{
    printf("%d", foo());
    return 0;
} 
```

./premake4.lua

```
solution "Test"
    configurations { "Release", "Debug" }

project "TestMain"
    language "C++"
    kind "ConsoleApp"

    files "main.cpp"

    links
    {
        "_external/libfoo.a"
    } 
```

我在 Cygwin 环境下创建 GNU makefile：

```
$ ./premake4.exe gmake
Building configurations...
Running action 'gmake'...
Generating Makefile...
Generating TestMain.make...
Done. 
```

当我制作时出现以下错误：

```
$ make
==== Building TestMain (release) ====
Linking TestMain
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../../i686-pc-cygwin/bin/ld: cannot find -lD:/test/_external/libfoo.a
collect2: ld returned 1 exit status
TestMain.make:93: recipe for target `TestMain.exe' failed
make[1]: *** [TestMain.exe] Error 1
Makefile:16: recipe for target `TestMain' failed
make: *** [TestMain] Error 2 
```

我发现的唯一解决方法是使用“ **linkoptions** ”而不是“ **links** ”来摆脱“-l”，但对我来说，它更像是一个 hack 而不是一个解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:30:54.813

你做对了，但 Premake 做错了。Premake 的 makefile 生成器中存在一个错误，导致无法正确链接。它现在已在[stable](https://bitbucket.org/premake/premake-stable/commits/5b608f9979882ea021703d64325ec5b1)（将成为 4.4 版）和[dev](https://bitbucket.org/premake/premake-dev/commits/ae4bc303c4d221b55992a7a4d22f3628)（将成为 5.0）存储库中修复。

很高兴得到修复 - 希望它有所帮助。

# c++ - 创建数组 C++ 的深层副本

> ID：10482998
> 
> 赞同：0
> 
> 时间：2012-05-07T13:31:56.250
> 
> 标签：c++, arrays, destructor, copy-constructor

我试图解决我的程序中的一些问题，看起来我的复制构造函数或析构函数有问题。我遇到了内存异常。

任何帮助将不胜感激谢谢

```
ArrayStorage::ArrayStorage(const ArrayStorage &a):readArray(a.readArray),arraysize(a.arraysize)
{
    readArray = new string[arraysize]; //create the array

    memcpy (readArray,a.readArray,sizeof(string)*arraysize);//Copy the values of bytes from the location pointed at by the souce and destination.
}

ArrayStorage::~ArrayStorage(void)
{
    delete[](readArray);//deconstuctor to delete the array.
} 
```

这是否是复制 memcpy 以外的数组的更好方法：

```
for (int i = 0 ; i < arraysize ; i ++)
    {
        readArray[i] = a.readArray[i];
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-07T13:36:05.570

您不能只是`memcpy`随机对象，您需要使用它们的复制运算符实际复制它们。

`string`很可能拥有指向堆分配存储的指针。如果按位复制，则对原始字符串调用析构函数会使“复制”字符串的数据无效。

使用类似的东西`std::copy`来正确地做到这一点。

```
#include <algorithm>
...
std::copy(a.readArray, a.readArray+arraysize, readArray); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-07T13:34:45.757

我不建议您以您的方式复制字符串。由于字符串包含对堆内存的引用，因此您实际上复制了指针，因此两个数组中的字符串共享内存。这不是很 c++-ish 并且非常危险。我建议您对字符串使用赋值运算符或复制构造函数（是的，循环）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-07T13:38:36.783

字符串还具有动态内存，因此您必须遍历每个字符串并对其进行复制。

一个修复方法是复制数组中的每个字符串而不是 memcopy。例外情况是两个不同的字符串具有相同的指向一块内存的指针并且都试图释放它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T13:54:14.890

该代码没有任何意义。首先，通过初始化列表将成员初始化为要复制的对象传递的值。然后为相同的成员分配内存并再次复制所有内容。

您很可能正在将垃圾数据复制到未初始化的指针中。摆脱初始化列表`:readArray(a.readArray),arraysize(a.arraysize)`。