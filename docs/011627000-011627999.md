# StackOverflow 问答 11627000-11627999

# java - 为什么 [import java.awt.*] 不包括 [import java.awt.event.ActionEvent]？

> ID：11627001
> 
> 赞同：1
> 
> 时间：2012-07-24T08:29:00.903
> 
> 标签：java, import

晚上，

我正在玩一个小摇摆应用程序，我添加了一个响应被按下的按钮。因此我需要实现 ActionListener。我已经添加了这一行：

```
import java.awt.*; 
```

但它告诉我它找不到“ActionListener”类。所以过了一会儿，我结束了这个：

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener; 
```

我假设 awt.* 部分意味着它正在导入 awt 保护伞下的所有子包。显然情况并非如此。有人可以为我澄清这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T08:30:23.633

```
import java.awt.*; 
```

这将导入awt 包中的所有**类，而不是子包。**

主要原因是java包没有嵌套，即使它们的名字让你认为它们是嵌套的。`java.awt`并且`java.awt.event`可以看作是两个不相关的包。

# objective-c - 自定义 X 轴的标签 [core-plot]

> ID：11627002
> 
> 赞同：1
> 
> 时间：2012-07-24T08:29:01.817
> 
> 标签：objective-c, core-plot

我正在使用 core-plot 并遇到 x 轴自定义问题。我希望 x 轴标签显示一些日期，但它们没有相等的差异。例如，日期可能是这样的：2012-05-06、2012-06-08、2012-07-21 ...所以我想我不能通过设置主要间隔来设置轴标签。谁能告诉我这样做的方法？任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:20:34.577

是的，如果这些日期是连续值意味着您可以在创建自定义标签时实现这一点。您可以将连续日期添加到数组中，并将此数组设置`majorTickLocations`为 X 轴的属性。以下行添加到您的自定义标签生成方法中。customStick 是您想要设置的值。 `[customTick addObject:customStick];`

将此行添加到您的轴属性集中。 `axisSet.xAxis.majorTickLocations = [NSSet setWithArray:customTick];`

# assembly - 汇编中add esp,-10的含义

> ID：11627007
> 
> 赞同：0
> 
> 时间：2012-07-24T08:29:21.180
> 
> 标签：assembly

add esp, -10 是什么意思？

我认为 add in aseembly 用于做加法和 sub 用于做减法..

如果执行 add esp, -10 会发生什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T08:34:19.013

它将添加值-10（实际上是一个子，但使用 ADD 操作码）无论如何，ESP 寄存器默认使用（在英特尔 x86 上）作为指向堆栈的指针，而 EBP 是函数的堆栈帧。

所以添加 esp，-10 只是在堆栈中腾出空间。

注意您可以使用任何寄存器操作堆栈，ESP 寄存器是管理堆栈的操作码的默认寄存器，如 push、pop、call、ret 等。

# php - 使用自动建议 jQuery 插件的多标签

> ID：11627008
> 
> 赞同：0
> 
> 时间：2012-07-24T08:29:21.570
> 
> 标签：php, jquery, mysql, ajax

我使用来自该站点的自动建议 jQuery 插件：

[http://code.drewwilson.com/entry/autosuggest-jquery-plugin](http://code.drewwilson.com/entry/autosuggest-jquery-plugin)

用于制作多个标签，就像在该网站中给予一样。

但我的问题是......从自动建议中选择时，它显示在我的输入框中，但我不想再次显示选定的自动建议，如链接中给出的示例......但我无法这样做事物...

请帮助我...我使用的代码如下：

```
<link rel="stylesheet" type="text/css" href="view/stylesheet/autoSuggest.css">

<script type="text/javascript" src="view/javascript/jquery/jquery.autoSuggest.js"></script>

<script type="text/javascript"><!--

$("#product_tag1").autoSuggest("http://test.com/ajax", {minChars: 2, matchCase: true,selectedItemProp: "tag", searchObjProps: "tag"});

//--></script> 
```

Ajax 文件之类的

```
<?

$input = $_GET["q"];

$data = array();

$query = mysql_query("SELECT * FROM my_table WHERE my_field LIKE '%$input%'");

while ($row = mysql_fetch_assoc($query)) {

$json = array();

$json['tag_id'] = $row['id'];

$json['tag'] = $row['tag'];

$data[] = $json;

}

header("Content-type: application/json");

echo json_encode($data);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:59:05.663

我可以建议[选择 2](http://ivaynberg.github.com/select2/)插件作为替代方案吗？它正在积极开发中，并且具有 IMHO 更好的功能；例如，当控件具有焦点时显示可用标签列表，并且不允许多次选择同一个标签。

听起来它会完全按照您的意愿行事，但请参阅[标记示例](http://ivaynberg.github.com/select2/#tags)以了解所有选项的描述。根据您的示例代码，我认为切换插件并不困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T09:52:31.150

通过在javascript的文档准备功能中使用以下代码

$(document).ready(function() { var data=null; var data=; $("#tag").autoSuggest("config->item('admin_folder').'/products/autosuggest');? >",{minChars: 2, matchCase: true,selectedItemProp: "name", searchObjProps: "name",selectedValuesProp:"value",preFill: data}); });

# installation - 检查 DirectX 最终用户运行时的注册表

> ID：11627013
> 
> 赞同：2
> 
> 时间：2012-07-24T08:30:01.357
> 
> 标签：installation, registry, directx

我正在创建一个安装程序，它检查注册表中未安装的软件/组件，并在需要时安装它们。我遇到的问题是，如果我在 Windows 的新副本上从 DirectX 最终用户运行时 Web 安装程序安装最新的 DirectX 最终用户运行时，我需要运行的软件正确启动（http://www.microsoft.com /en-au/download/details.aspx?id=35)。

如果未安装，我得到的错误是“程序无法启动，因为您的计算机中缺少 d3dx9_43.dll”。现在，即使在全新安装的 Windows 中，来自 HKEY_LOCAL_MACHINE\Software\Microsoft\DirectX 的 DirectX 注册表项也会显示版本键的“4.09.00.0904”。

所以我的问题是，我在哪里查看注册表以检查是否安装了 DirectX 最终用户运行时的所有组件。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T08:54:21.330

您没有提及您使用的安装程序、脚本或编程语言。知道这会很有帮助。

如果您不担心下载大小，最简单的方法可能是总是盲目地安装 DirectX Runtime。如果它已经存在，安装它不会有什么坏处。

以下是您可以考虑的其他一些事项：

如果您使用的是 Vista 或更高版本（包括 Win7、Win8、Server 2K8），那么您可能不需要安装任何东西。因为这些操作系统可能预装了二进制文件。同样适用于 XP SP2 及更高版本。您的“Windows 的新副本”是否比 XP 更新？

另一个简单的想法是在 Windows\System32 或 Windows\SysWow64 目录中搜索 d3dx9_43.dll 的存在。

以编程方式，您可以让安装程序代码检测 DLL 的安装，如下所示

```
#include <windows.h>
BOOL HasD3DX9()
{
    HMODULE hMod = LoadLibrary("d3dx9_43.dll");
    return (hMOD != NULL) ? TRUE : FALSE;
} 
```

# java - android清除字符串生成器

> ID：11627015
> 
> 赞同：0
> 
> 时间：2012-07-24T08:30:14.843
> 
> 标签：java, android, stringbuilder

> **可能重复：**
> [如何清除/清空 Java Stringbuilder](https://stackoverflow.com/questions/5192512/how-to-clear-empty-java-stringbuilder)

我正在向字符串添加值，然后在文本视图中显示它，但是当我刷新页面时，它不会先清除字符串。
它只是不断添加它。

有没有办法清除android中的字符串生成器？

到目前为止我尝试过的

```
StringBuilder sb = new StringBuilder();
sb.delete(0,sb.length());
for (String s : awayScores)
{
    sb.append(s);
    sb.append("\n");
}

StringBuilder sb2 = new StringBuilder();
sb2.delete(0,sb2.length());
for (String h : homeScores)
{
    sb2.append(h);
    sb2.append("\n");
}

 String awayeve = sb.toString();
 String homeeve = sb2.toString();

Log.v("home", "homeeve" + homeeve);
Log.v("home", "awayeve" + awayeve); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T08:36:54.910

尝试使用 `sb.delete(0,sb.length());`

编辑：

```
StringBuilder sb2 = new StringBuilder();
sb2.delete(0,sb2.length()); 
```

在上面的代码中，您试图删除空的内容`StringBuilder`。

这是做不到的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:40:49.087

你可以使用 setText(""); 它将用空白字符串重置值

# android - 自定义进度对话框动画

> ID：11627016
> 
> 赞同：5
> 
> 时间：2012-07-24T08:30:15.850
> 
> 标签：android, android-layout, android-emulator, android-widget

我正在努力`Custom Progress Dialog`。我已经设置了它的样式，就像在这个 SO 问题中所做的那样 在[自定义进度对话框中定位纺车](https://stackoverflow.com/questions/7738490/positionning-the-spinning-wheel-in-a-custom-progress-dialog)我的进度对话框根本没有显示任何动画。当我将其更改为时`background`，`black`它只显示一个黑框。我希望我的进度对话框动画。

在活动中，我正在做这样的事情

```
 public MyProgressDialog(Context context) {
        super(context, R.style.NewDialog);
    } 
```

和 NewDialog 是：

```
<style name="NewDialog" parent="@android:style/Theme.Dialog">

    <item name="android:windowFrame">@null</item>
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowIsFloating">true</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowTitleStyle">@null</item>
    <item name="android:windowAnimationStyle">@android:style/Animation.Dialog</item>
    <item name="android:windowSoftInputMode">stateUnspecified|adjustPan</item>
    <item name="android:backgroundDimEnabled">true</item>
    <item name="android:width">50dip</item>
    <item name="android:height">50dip</item>
    <item name="android:background">@android:color/transparent</item>

</style> 
```

提前感谢任何帮助

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-24T12:15:00.467

```
import android.app.ProgressDialog;
import android.content.Context;
import android.view.animation.Animation;

public class MyProgressDialog extends ProgressDialog {

    public MyProgressDialog(Context context) {
        super(context,R.style.NewDialog);

        // TODO Auto-generated constructor stub
    }

} 
```

//资源样式文件 res->values->mydialog.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
   <style name="NewDialog" parent="@android:style/Theme.Dialog">

    <item name="android:windowFrame">@null</item>
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowIsFloating">true</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowTitleStyle">@null</item>
    <item name="android:colorBackground">#ffffff</item>
    <item name="android:windowAnimationStyle">@android:style/Animation.Dialog</item>
    <item name="android:windowSoftInputMode">stateUnspecified|adjustPan</item>
    <item name="android:backgroundDimEnabled">true</item>
    <item name="android:width">600dip</item>
    <item name="android:height">100dip</item>
     <item name="android:textColor">#FF0000</item>

</style>
</resources> 
```

//并在您的应用程序中的任何地方使用此代码以获取自定义进度对话框

```
MyProgressDialog pd = new MyProgressDialog(YouActivity.this);
pd.setMessage("Loading. Please wait...");
pd.show(); 
```

好吧，您的代码和我的代码没有任何区别，因为我运行您的代码只是为了测试您是否遇到任何问题，但我仍然为您发帖，以便您找出问题所在。

谢谢 ：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-20T09:39:54.197

```
public class TransparentProgressDialog extends Dialog {

 private ImageView iv;

 public TransparentProgressDialog(Context context, int resourceIdOfImage) {

     super(context, R.style.TransparentProgressDialog);
  WindowManager.LayoutParams wlmp = getWindow().getAttributes();
  wlmp.gravity = Gravity.CENTER_HORIZONTAL;
  getWindow().setAttributes(wlmp);
  setTitle(null);
   setCancelable(false);
   setOnCancelListener(null);
   resourceIdOfImage = R.drawable.loading_spinner_icon;
  LinearLayout layout = new LinearLayout(context);
   layout.setOrientation(LinearLayout.VERTICAL);
  LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(
   LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);
  iv = new ImageView(context);
  iv.setImageResource(resourceIdOfImage);
  layout.addView(iv, params);
  addContentView(layout, params);
  }

  } 
```

[您将在此处](http://shortcutsandroid.blogspot.in/2015/02/custom-progress-dialog-with-animation.html)获得完整的动画示例

# c# - 使用扩展方法使用上周的日期自动填充 DateTime 字段

> ID：11627021
> 
> 赞同：0
> 
> 时间：2012-07-24T08:30:44.047
> 
> 标签：c#

我有两个要自动填写的 DateTime 字段，以便将 PeriodFrom 字段设置为 7 天前，并将 PeriodTo 字段设置为今天的日期。

目前我已经将它们设置为将 PeriodFrom 设置为每月的第一天，代码如下：

```
 PeriodFrom = DateTime.Now.FirstDayOfMonth();
  PeriodTo = DateTime.Today; 
```

其中 FirstDayOfMonth() 是扩展方法：

```
public static DateTime FirstDayOfMonth(this DateTime dateTime)
{
  return new DateTime(dateTime.Year, dateTime.Month, 1);
} 
```

有没有我可以编写的快速扩展方法将日期设置为正好 1 周前？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T08:32:46.827

```
public static DateTime OneWeekAgo(this DateTime dateTime)
{
  return dateTime.AddDays(-7);
} 
```

Usage, as you already understand, like this:

```
PeriodFrom = DateTime.Now.OneWeekAgo();
PeriodTo = DateTime.Today; 
```

# c# - 无法为未实现 ICollection 的数据源计算 Count。

> ID：11627024
> 
> 赞同：0
> 
> 时间：2012-07-24T08:30:49.030
> 
> 标签：c#, repeater, paging

这是我的代码

```
 var q = from a in bh
                join b in hr on a.HotelCode equals b.hotelCode
                select new
        {
            a.HotelCode,
            a.ImageURL_Text,
            a.HotelName,
            a.StarRating,    
            a.HotelAddress,
            a.Destination,
            a.Country,
            a.HotelInfo,
            a.Latitude,
            a.Longitude,
            b.totalPrice,
            b.totalPriceSpecified,
            b.totalSalePrice,
            b.totalSalePriceSpecified,
            b.rooms

    };

        //rptHotels.DataSource = getres.availableHotels;

        PagedDataSource objPds = new PagedDataSource();
        objPds.DataSource = q;
        objPds.AllowPaging = true;
        objPds.PageSize = 10;// Convert.ToInt32(ddlPageNo.SelectedValue);

        objPds.CurrentPageIndex = CurrentPage;

        lblCurrentPage.Text = "Page: " + (CurrentPage + 1).ToString() + " of "
           + objPds.PageCount.ToString();

        // Disable Prev or Next buttons if necessary
        cmdPrev.Enabled = !objPds.IsFirstPage;
        cmdNext.Enabled = !objPds.IsLastPage;

        rptHotels.DataSource = objPds;
        rptHotels.DataBind(); 
```

错误有自我解释，但没有解决这个错误的方法......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T08:39:04.753

使用 ToArray()：

```
objPds.DataSource = q.ToArray(); 
```

# c# - 实体框架代码优先：在数据库中插入 NULL 值

> ID：11627031
> 
> 赞同：2
> 
> 时间：2012-07-24T08:31:14.147
> 
> 标签：c#, .net, entity-framework, ef-code-first

我正在使用实体框架代码优先方法。我有以下代码将数据插入到 PaymentComponent 和 Payment 表中。插入 PaymentComponent 表的数据不正确。即使域对象中的相应属性不为空，它在两列（对于一条记录）中都有 NULL 值。需要进行哪些更改才能使其正常工作？

![在此处输入图像描述](../Images/4e1a35c4802cc0aef260eae94d8211cb.png)

**编辑**

当我在 NerdDinners 类中添加以下内容时，我得到以下结果 - 它有新的不需要的列

```
 public DbSet<ClubCardPayment> ClubCardPayments { get; set; } 
```

![在此处输入图像描述](../Images/3d3d07e492b3e5b0e1d37dcd987453c3.png)

原始代码

```
static void Main(string[] args)
{
    string connectionstring = "Data Source=.;Initial Catalog=NerdDinners;Integrated Security=True;Connect Timeout=30";

    using (var db = new NerdDinners(connectionstring))
    {
        GiftCouponPayment giftCouponPayment = new GiftCouponPayment();
        giftCouponPayment.MyValue=250;
        giftCouponPayment.MyType = "GiftCouponPayment";

        ClubCardPayment clubCardPayment = new ClubCardPayment();
        clubCardPayment.MyValue = 5000;
        clubCardPayment.MyType = "ClubCardPayment";

        List<PaymentComponent> comps = new List<PaymentComponent>();
        comps.Add(giftCouponPayment);
        comps.Add(clubCardPayment);

        var payment = new Payment { PaymentComponents = comps, PayedTime=DateTime.Now };
        db.Payments.Add(payment);

        int recordsAffected = db.SaveChanges();

    }
} 
```

域名代码

```
public abstract class PaymentComponent
{
    public int PaymentComponentID { get; set; }
    public abstract int MyValue { get; set; }
    public abstract string MyType { get; set; }
    public abstract int GetEffectiveValue();
}

public partial class GiftCouponPayment : PaymentComponent
{

    private int couponValue;
    private string myType;

    public override int MyValue
    {
        get
        {
            return this.couponValue;
        }
        set
        {
            this.couponValue = value;
        }
    }

    public override string MyType
    {
        get
        {
            return this.myType;
        }
        set
        {
            this.myType = value;
        }
    }

    public override int GetEffectiveValue()
    {
        if (this.PaymentComponentID < 2000)
        {
            return 0;
        }
        return this.couponValue;
    }

}

public partial class ClubCardPayment : PaymentComponent
{

    private int cardValue;
    private string myType;

    public override int MyValue
    {
        get
        {
            return this.cardValue;
        }
        set
        {
            this.cardValue = value;
        }
    }

    public override string MyType
    {
        get
        {
            return this.myType;
        }
        set
        {
            this.myType = value;
        }
    }

    public override int GetEffectiveValue()
    {
        return this.cardValue;
    }

}

public partial class Payment
{
    public int PaymentID { get; set; }
    public List<PaymentComponent> PaymentComponents { get; set; }
    public DateTime PayedTime { get; set; }

}

//System.Data.Entity.DbContext is from EntityFramework.dll
public class NerdDinners : System.Data.Entity.DbContext
{

    public NerdDinners(string connString): base(connString)
    { 

    }

    protected override void OnModelCreating(DbModelBuilder modelbuilder)
    {
        modelbuilder.Conventions.Remove<PluralizingTableNameConvention>();
    }

    public DbSet<GiftCouponPayment> GiftCouponPayments { get; set; }
    public DbSet<Payment> Payments { get; set; }

} 
```

**参考**：

1.  [使用实体框架代码优先映射属性分隔表时，移动外键字段](https://stackoverflow.com/questions/9434082/when-using-entity-framework-code-first-mapping-property-to-separate-table-moves)
2.  [覆盖实体框架实体属性](https://stackoverflow.com/questions/5689696/override-entity-framework-entity-property)
3.  [EntityFramework 如何覆盖属性](https://stackoverflow.com/questions/2511357/entityframework-how-to-override-properties)
4.  [http://weblogs.asp.net/manavi/archive/2011/04/24/associations-in-ef-4-1-code-first-part-4-table-splitting.aspx](http://weblogs.asp.net/manavi/archive/2011/04/24/associations-in-ef-4-1-code-first-part-4-table-splitting.aspx)
5.  [http://www.robbagby.com/entity-framework/entity-framework-modeling-entity-splitting/](http://www.robbagby.com/entity-framework/entity-framework-modeling-entity-splitting/)
6.  实体框架映射方案 - [http://msdn.microsoft.com/en-us/library/cc716779.aspx](http://msdn.microsoft.com/en-us/library/cc716779.aspx)
7.  [http://blogs.microsoft.co.il/blogs/gilf/archive/2009/03/06/entity-splitting-in-entity-framework.aspx](http://blogs.microsoft.co.il/blogs/gilf/archive/2009/03/06/entity-splitting-in-entity-framework.aspx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T08:38:13.380

您尚未在数据上下文中定义 ClubCardPayment 数据库集。

插入这个，它应该可以工作

```
public DbSet<ClubCardPayment> ClubCardPayments { get; set; } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T08:41:29.653

直接在基类中`MyType`实现。`MyValue`EF 允许共享成员仅在基类中实现。在派生类中实现的成员在结果表中使用它们自己的列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T08:39:34.850

您需要定义实际实现抽象类的 2 个类，这是 EF 了解不同类以及如何读取/更新/写入它们的实例的唯一方法。

（无需在 EF 中映射抽象类！）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T08:41:37.963

这对您的问题没有帮助，而只是我这边的一个提示：
为什么要在派生类中显式地实现 MyValue 和 MyType ？如果实现始终相同，则可以将其放入抽象类中...

# php - 在php中编辑json字符串

> ID：11627032
> 
> 赞同：0
> 
> 时间：2012-07-24T08:31:16.567
> 
> 标签：php, javascript, json

我正在尝试通过 javascript 传递使用 php 来编辑数据查询，

我的ajax请求看起来像

```
var totalSearchResult=10;
$.ajax({
    url:"php/queryManipulation.php",
    type: 'POST',
    data: { totalQuery : totalSearchResult,  query : '{"data":{"match_all":{}}}'},

    success: function(finalList)
    {
        alert(finalList);
    }
}); 
```

我的 php 代码看起来像

```
<?php
$from=$_POST["totalQuery"];
$qry=json_decode($_POST["query"]);
$qry->from=$from;   }?> 
```

我正在尝试以形式获取它，

```
{"data": {"match_all": {}} , "from": 10} 
```

我得到错误`Object of class stdClass could not be converted to string`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T08:35:50.573

**编辑：将 json_decode 返回值从数组更改为对象**

您需要在完成编辑后再次对 json 进行编码。所以你可以做的是：

```
<?php
    $from            = $_POST["totalQuery"];
    $qry             = json_decode($_POST["query"]);
    $qry->data->from = $from;
    //you will get the new json string 
    //as the finalList variable in your post callback
    echo json_encode($qry); 
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:34:11.903

You should use json_decode($string, true) - so it will be an array. Details here: [http://php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T08:34:43.873

您可以解码为数组（不确定对象）并重新编码：

```
$qry = json_decode($_POST['query'], TRUE);
$qry['from'] = 10;
$new_qry = json_encode($qry); 
```

# sphinx - SphinxQL RT 索引错误

> ID：11627033
> 
> 赞同：0
> 
> 时间：2012-07-24T08:31:26.260
> 
> 标签：sphinx

我已经尝试使用 Sphinx QL 源代码的示例示例。但我收到“未选择数据库”错误。任何人都可以分享示例示例吗？这对我很有用..

Sphinx QL 包装类已从以下路径下载： [http ://code.google.com/p/sphinxapi/source/browse/trunk/class.sphinxql.php?r=2](http://code.google.com/p/sphinxapi/source/browse/trunk/class.sphinxql.php?r=2)

使用以下步骤：

```
$option['host'] = 'localhost';
$classApi = new SphinxQL($option);
$value = $classApi->exec(" select count(DISTINCT ID) from tablename where fanme=2769457"); 
```

> 错误：未选择数据库

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T16:29:35.230

如狮身人面像论坛 [http://sphinxsearch.com/forum/view.html?id=9864所述](http://sphinxsearch.com/forum/view.html?id=9864)

看起来您发现的代码中有几个错误。

# jquery - 如何添加一个类，并在完成后获得结果

> ID：11627035
> 
> 赞同：0
> 
> 时间：2012-07-24T08:31:30.647
> 
> 标签：jquery, css

我将如何使用 jQuery 将“选定”类添加到 LI 中？一旦选择了所有 6 个问题，我就需要检查这些问题并获得选定的答案。我已将问题 ID 与答案 ID 添加到每个答案中，这可能会使以后更容易获取和处理。

```
 <div id="1002" class="question2" style="display: block; ">
   <h1>Question 2</h1>
   <p><i>This is Question 2</i></p>
   <div class="answer-grid">
    <ul class="answer">
        <li id="1002-a1">Answer 1</li>
        <li id="1002-a2">Answer 2</li>
        <li id="1002-a3">Answer 3</li>
    </ul>
   </div>
 </div> 
```

这就是我希望它看起来的样子......

```
 <div id="1002" class="question2" style="display: block; ">
   <h1>Question 2</h1>
   <p><i>This is Question 2</i></p>
   <div class="answer-grid">
    <ul class="answer">
        <li id="1002-a1" class="selected">Answer 1</li>
        <li id="1002-a2">Answer 2</li>
        <li id="1002-a3">Answer 3</li>
    </ul>
   </div>
 </div> 
```

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:48:35.510

要切换`<li>`元素：

```
$('.answer li').on('click', function() {
    $(this).addClass('selected').siblings().removeClass('selected');
}); 
```

要查找选定的`<li>`元素：

```
var answers = $('.answer li.selected').map(function() {
    return this.id;
}).get(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:48:25.513

我建议您为此使用表单中的单选按钮。也就是说，~~这里有一个我认为你正在寻找的答案的小提琴~~，这里有一些很好的答案。:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T08:50:50.207

这是一个有效的例子 - [http://jsfiddle.net/3fPaC/](http://jsfiddle.net/3fPaC/)。

代码 -

```
$(document).ready(function() {
    var count = 0;
    $("li").click(function() {
        if($(this).siblings().hasClass("selected")) {            
            $(this).siblings().removeClass("selected");
            count--;
            $("#result").text("");
        }
        $(this).addClass("selected");    
        var question = $(this).attr("question");
        $("#"+question).addClass("answered");       
        count++;
        if(count == 3) {
            $(".selected").each(function() {
                $("#result").append(" "+$(this).text());
            });
        }     
    });          
});​ 
```

另外，不要只使用数字作为 ID，因为它可能会导致问题。

HTML 代码 -

```
<div id="result"></div>
<div id="question1002" class="question2" style="display: block; ">
   <h1>Question 2</h1>
   <p><i>This is Question 2</i></p>
   <div class="answer-grid">
    <ul class="answer">
        <li question="question1002" answer="a1">Answer 1111</li>
        <li question="question1002" answer="a2">Answer 2111</li>
        <li question="question1002" answer="a3">Answer 3111</li>
    </ul>
   </div>
 </div>

 <div id="question1003" class="question2" style="display: block; ">
   <h1>Question 2</h1>
   <p><i>This is Question 2</i></p>
   <div class="answer-grid">
    <ul class="answer">
        <li question="question1003" answer="a1">Answer 1</li>
        <li question="question1003" answer="a2">Answer 2</li>
        <li question="question1003" answer="a3">Answer 3</li>
    </ul>
   </div>
 </div><div id="question1004" class="question2" style="display: block; ">
   <h1>Question 2</h1>
   <p><i>This is Question 2</i></p>
   <div class="answer-grid">
    <ul class="answer">
        <li question="question1004" answer="a1">Answer 122</li>
        <li question="question1004" answer="a2">Answer 222</li>
        <li question="question1004" answer="a3">Answer 322</li>
    </ul>
   </div>
 </div>​ 
```

您可以将 count == 3 更改为您喜欢的任何值。3是问题的数量。

# f# - Whitespace sensitive FParsec

> ID：11627037
> 
> 赞同：2
> 
> 时间：2012-07-24T08:31:43.087
> 
> 标签：f#, fparsec

I'm trying to implement a whitespace sensitive parser using FParsec, and I'm starting off with the baby step of defining a function which will parse lines of text that start with `n` chars of whitespace.

Here's what I have so far:

```
let test: Parser<string list,int>
  = let manyNSatisfy i p = manyMinMaxSatisfy i i p

    let p = fun (stream:CharStream<int>) ->
      let state = stream.UserState

      // Should fail softly if `state` chars wasn't parsed
      let result = attempt <| manyNSatisfy state (System.Char.IsWhiteSpace) <| stream

      if result.Status <> Ok 
        then result
        else restOfLine false <| stream

    sepBy p newline 
```

My issue is that when I run

`runParserOnString test 1 "test" " hi\n there\nyou" |> printfn "%A"`

I get an error on "you". I was under the impression that `attempt` would backtrack any state changes, and returning `Error` as my status would give me soft failure.

How do I get `["hi"; "there"]` back from my parser?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T08:43:57.450

亲，好尴尬。

我想要`sepEndBy`，也就是说我应该终止对分隔符的解析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T12:20:34.560

这看起来更地道。我已经硬编码`1`，但很容易提取为参数。

```
let skipManyNSatisfy i = skipManyMinMaxSatisfy i i
let pMyText =
    (                                               // 1st rule
        skipManyNSatisfy 1 System.Char.IsWhiteSpace // skip an arbitrary # of WhiteSpaces
        >>. restOfLine false |>> Some               // return the rest as Option
    )
    <|>                                             // If the 1st rule failed...
    (                                               // 2nd rule
        skipRestOfLine false                        // skip till the end of the line
        >>. preturn None                            // no result
    )
    |> sepBy <| newline                             // Wrap both rules, separated by newLine
    |>> Seq.choose id                               // Out of received string option seq, select only Some() 
```

# windows-phone-7 - Multi Phrase / Word Autocompletebox for Silverlight

> ID：11627038
> 
> 赞同：0
> 
> 时间：2012-07-24T08:31:44.473
> 
> 标签：windows-phone-7, silverlight-4.0, autocomplete, silverlight-toolkit, autosuggest

I have been using the [autocompletebox from Silverlight Toolkit](http://jesseliberty.com/2011/07/25/windows-phone-toolkit-autocompletebox/) for Windows Phone.

What kind of changes (changes/extended ?) will be needed to enable the autocompletebox
to support auto completion for multiple phrases/words ? i.e. support something similar to

## ![Enabling autosuggest for the 2nd word also?](../Images/66e93da238fcb44a31c10c372e1b3801.png)

as soon as 'c' is entered in above the dropdown list shows items starting with 'c' etc.

(or how can this be achieved using normal text box?)

Related to this
[http://www.codeproject.com/Articles/180311/Rich-Text-Box-With-Intellisense-Ability](http://www.codeproject.com/Articles/180311/Rich-Text-Box-With-Intellisense-Ability)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T04:56:33.530

我发现这篇文章很有用..

使用（和自定义）适用于 Windows Phone 的 AutoCompleteBox

[http://www.croitoriu.com/blog/2012/02/using-and-customizing-the-autocompletebox-for-windows-phone/](http://www.croitoriu.com/blog/2012/02/using-and-customizing-the-autocompletebox-for-windows-phone/)

![数据源](../Images/0f598480076efae723ba1e6357e566db.png)

![自动完成](../Images/a25fb7b86d8c89abfef7c64bdd48dccb.png)

# jquery - 如何将一个简单的 JSON 数组传递给 jQuery 然后 Flot？

> ID：11627040
> 
> 赞同：0
> 
> 时间：2012-07-24T08:31:48.243
> 
> 标签：jquery, django, json, flot

我已经在谷歌上搜索了一段时间，试图找到解决我的问题的方法，但是我发现的一切都太复杂了！

我有一个有效的 Flot 饼图。它以这种格式从 Django 接收 JSON 数组：

`[0, 3, 5, 6, 7]`

该数组表示每个系列的实例数（即系列 1 的 0 个实例、系列 2 的 3 个实例等）。

然后使用此代码将该数组显示在一个简单的 Flot 饼图中（`theData`是上面的数组）：

```
function loadTotalChart(theData) {
  $.plot($("#total-pie-chart"), theData ,
  {
    series: {
        pie: { 
            show: true
    }
        },
label: {
    show:true
},
legend: {
    show: false
    },
grid: {
    hoverable: true,
    }
   });
  } 
```

问题是数组中的标签未定义，因此我的饼图显示每个系列的“未定义：30%”或类似。

我要做的是为每个系列添加标签：图表的每个实例的标签都是相同的。

如何获取 JSON 数组，添加标签，然后将其传递给 Flot？

非常感谢！

编辑：

多亏了[Liam McCann](https://stackoverflow.com/users/983969/liam-mccann)，我现在有了这个代码来绘制图表，只有在有数据的情况下：

```
function checkJsons(otherJson,newJson)
{
for (var key in otherJson) {if(otherJson[key] != newJson[key]) {return false;}}
return true;
}

function loadWeekChart(theData)
{
var blankData = [0, 0, 0, 0, 0];
if(checkJsons(blankData,theData)){$('#week-pie-chart').empty().append('Nothing to show yet');} 

else { $.plot($("#week-pie-chart"), theData ,
    {
        series: {
            pie: { 
                show: true
            }
        }
    }); }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T10:29:22.423

原来我已经回答了我自己的问题。这是我现在用来获取未标记的 JSON 数组（例如`[1, 2, 4, 1, 5]`）的代码，确保数组包含数据（即不是`[0, 0, 0, 0, 0]`），添加标签然后显示图表：

```
function loadTotalChart(theData) {
  var blankData = [0, 0, 0, 0, 0];
  if(checkJsons(blankData,theData)){
  $('#total-pie-chart').empty().append('Nothing to show yet');
} else { 
  var totalPieData = [
    {label: "1/5", data:theData[0]},
    {label: "2/5", data:theData[1]},
    {label: "3/5", data:theData[2]},
    {label: "4/5", data:theData[3]},
    {label: "5/5", data:theData[4]},
  ];
  $.plot($("#total-pie-chart"), totalPieData ,
    {
        series: {
            pie: { 
                 show: true
            }
        },
        label: {
               show:true
        },
        legend: {
                show: false
        },
        grid: {
              hoverable: true,
        }
    }); 
  }
} 
```

如果有人可以看到代码的任何问题，或者更好的方法，请告诉我！

编辑：回顾这个问题，我意识到我没有包含这个函数中引用的 checkJsons 函数。这里是：

```
function checkJsons(otherJson,newJson){
    for (var key in otherJson) {if(otherJson[key] != newJson[key]) {return false;}}
    return true;
 } 
```

# heroku - 将应用程序从 Bamboo 迁移到 Cedar：我可以在新实例中更改 DATABASE_URL 吗？

> ID：11627044
> 
> 赞同：0
> 
> 时间：2012-07-24T08:31:56.217
> 
> 标签：heroku, database-migration, bamboo, cedar

在[迁移指南](https://devcenter.heroku.com/articles/cedar-migration)中，迁移数据库的推荐方法不仅包括更改新实例中的 DATABASE_URL。如果您在 Bamboo 中有一个专用数据库，并且想在 Cedar 中使用相同的数据库，那么将 Cedar 中的 DATABASE_URL 指向相同的 DATABASE_URL 是否有问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T16:19:00.557

如果您删除竹应用程序，您的数据库可能会被停用。如果你维护你的竹应用程序，只有一个测功机，没有工人，它应该是免费的，你建议的方法应该有效。

# php - 我应该用什么钩子在正文之后输出扩展名

> ID：11627045
> 
> 赞同：1
> 
> 时间：2012-07-24T08:32:05.597
> 
> 标签：php, mediawiki

使用媒体维基。我已经安装了扩展[http://www.mediawiki.org/wiki/Extension:Contribution_Credits](http://www.mediawiki.org/wiki/Extension%3aContribution_Credits)`<?php $this->html('bodytext') ?>` ，它在我的`skin.php`文件中使用主体文本调用。我想在我的页面的主体文本和贡献信用之间插入一些代码（评论部分）。目前，贡献信用扩展使用钩子： `$wgHooks['OutputPageBeforeHTML'][] = 'addFooter';`我可以将其更改为什么，以便它不与主体文本一起调用，而是在`{ $this->html('catlinks'); }`部分上方调用？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:29:26.663

在那个确切的地方没有任何钩子。您可以使用[SkinAfterContent 挂钩](http://www.mediawiki.org/wiki/Manual%3aHooks/SkinAfterContent)将内容紧跟在类别链接之后。在不创建自己的皮肤的情况下，这可能是您能做的最好的事情。

**编辑：**要在贡献信用扩展中使用钩子，试试这个：

注释掉 OutputPageBeforeHTML 钩子并像这样添加 SkinAfterContent 钩子：

```
#$wgHooks['OutputPageBeforeHTML'][] = 'addFooter';
$wgHooks['SkinAfterContent'][] = 'addSkinAfterContentFooter'; 
```

然后在扩展文件中创建一个新函数，如下所示：

```
function addSkinAfterContentFooter(&$data, $skin) {
    $title = null;
    addFooter( $title, $data );
    return true;
} 
```

# python - Where to start when writing very simple irc bot?

> ID：11627047
> 
> 赞同：-1
> 
> 时间：2012-07-24T08:32:09.897
> 
> 标签：python, linux

I Am trying to make a very simple irc bot in python, but can't figure out how to do that with sockets. The only thing i want it to is: Connect to irc server, set nick (and name), join a channel, and write a message to the irc channel.

Anyone who can lead me in the right direction or small example of code?

```
import socket

name = raw_input("Enter your name: ")
nick = raw_input("IRC Handle: ")

irc_serv = "irc.freenode.net"
port = 6667
conn = socket.socket()
conn.connect((irc_serv, port))

conn.send("NICK "), nick
conn.send("NAME "), nick
conn.send("JOIN #king")
conn.send("PRIVMSG #king test message") 
```

I Run it, enters name and nick, but it doesnt join the channel (checking with xchat connected to the channel)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T08:44:25.910

正如 J. Steen 指出的那样，您的问题对于本网站来说过于宽泛，没有单一的答案。

以下是一些入门建议：

您正在使用 python。Python 有很多库可以帮助你做很多事情。首先尝试找出您需要的东西是否已经由某人完成。不要重新发明轮子。

在您的情况下，我可以向您指出具有 IRC 协议实现的[Twisted 。](http://twistedmatrix.com/trac/)Twisted 是一个编写良好、维护良好、模块化和异步的框架，我建议你使用它。

[这是 Twisted IRC 客户端 API 文档。](http://twistedmatrix.com/documents/8.2.0/api/twisted.words.protocols.irc.IRCClient.html)

这是一个使用 twised 实现[的示例 IRC 机器人。](http://eflorenzano.com/blog/2008/11/16/writing-markov-chain-irc-bot-twisted-and-python/)你可以研究它开始。

看来你刚开始所以我帮忙了，但下次你可以试试谷歌。本网站一般不支持用勺子喂食，建议用户在寻求帮助之前先尝试一下，这样可以更好地学习。

祝你项目好运。

PS：这个问题可能已经在这里被问过和回答[了](https://stackoverflow.com/questions/1100840/irc-python-bot-best-way)，更有理由你应该先搜索。

# javascript - 在tinymce中插入内容，附加文本被放置在插入的内容中

> ID：11627053
> 
> 赞同：0
> 
> 时间：2012-07-24T08:32:22.990
> 
> 标签：javascript, html, tinymce

我有一个 tinymce 的视频上传，它将一些代码插入到编辑器中，如下所示：

```
var content2 = "<div class='playvideo' id='<?php echo $randomnumber;?>'>
<img class='posterimage' src='<?php echo $new_image_path; ?>'>
<a id='<?php echo $new_file; ?>' class='videoplaceholder'></a>
</div></div>";

parent.tinyMCE.execCommand('mceInsertContent', false,content2); 
```

这工作正常，并输出：

```
<p><div id="581827" class="playvideo">
<img class="posterimage" src="/uploads/videos/images/1097VID.jpg" alt="" />
<a class="videoplaceholder" id="1097VID.mp4"></a>
</div></p> 
```

但是插入这个内容后，我当然想继续写文字。但是当我这样做时，文本会放在 img 标签之后的我插入的内容中。像这样：

```
<p><div id="581827" class="playvideo">
<img class="posterimage" src="/uploads/videos/images/1097VID.jpg" alt="" />text i try to write goes here for some reason
<a class="videoplaceholder" id="1097VID.mp4"></a>
</div></p> 
```

[小提琴示例](http://fiddle.tinymce.com/fPbaab)

当为新行单击 enter 时，它会创建第二个 div，其类与我插入的类相同。这是一种奇怪的行为。我读到 div 在段落中是非法的，但它也不适用于 span。

有没有人有任何指示？任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T09:16:44.717

The problem of the text getting inserted after the img can be fixed by putting an `&nbsp;` as the link text i.e. instead of `<a id='<?php echo $new_file; ?>' class='videoplaceholder'></a>` you can use `<a id='<?php echo $new_file; ?>' class='videoplaceholder'>&nbsp;</a>`. I am not sure about the class though, may be there is a way to prevent TinyMCE from adding the class by default.

# java - User registering/login management in GWT application

> ID：11627055
> 
> 赞同：5
> 
> 时间：2012-07-24T08:32:40.760
> 
> 标签：java, gwt

I have a java application with GWT frontend, that do some stuff.

Now I want to implement users and their registrations, things like "forgot password", logging in and out.

My problem is - it is a thing, that almost everyone does at their application, but there are many things to do wrong (hashing passwords, somebody faking "forgot password", and so on), so there has to be some general solution or library.

And what I mean by that is both some GUI widget on client side and something for the server side, that would handle the user logins and save their passwords.

Does something like that exist?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:53:35.953

看[这里](http://code.google.com/p/google-web-toolkit-incubator/wiki/LoginSecurityFAQ)

它描述了几件事：

*   如何创建基于用户/密码身份验证的“登录”页面。
*   如何在您的服务器上以安全的方式存储这些数据。
*   只要您愿意，就允许用户“保持登录”，这样他们就不必每次都输入用户名和密码。

以及更多。

# javascript - Collapsing a jQuery accordion when clicking a link outside of the accordion menu

> ID：11627064
> 
> 赞同：0
> 
> 时间：2012-07-24T08:33:37.690
> 
> 标签：javascript, jquery, jquery-plugins, session-cookies

I'm using this jQuery accordion menu found here [jQuery Vertical Accordion Menu Plugin](http://www.designchemical.com/lab/jquery-vertical-accordion-menu-plugin/getting-started/ "jQuery Vertical Accordion Menu Plugin"). The plugin is working well without much customization. The feature that I was really looking for that this plugin offers is persistent menu state after a page refresh. This plugin uses cookies to accomplish this. On to the problem...

If you click outside the accordion menu the state is still maintained. I'm trying to figure out a way to collapse the entire menu when a link is clicked outside of the accordion menu.

My first inclination was to find some way to delete or reset the data in state saving cookie when the window.location was equal to a certain URL. (At the moment it I be happy if when returning to the home page that the menu was completely collapsed).

I'm thinking the best solution would be some jQuery that if an was clicked outside of #Accordion-Navigation was clicked that it would reset the cookie or collapse the menu.

I'm open to anything.

I tried the following with no luck.

```
jQuery(document).ready(function(jQuery){
    var siteurl = "http://myhomepageurl.com/index.php";
if (window.location.href == siteurl) {
    jQuery.cookie('dcjq-accordion-1', null, { path: '/'});
    }
}); 
```

Any suggestions at a more elegant solution would be greatly appreciated! Thanks for taking the time to have a look in advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:43:08.157

有一个技巧可以做到这一点，只需在你的 html 和 body 元素上绑定一个事件处理程序。如果点击了手风琴，则停止传播，否则折叠手风琴。

```
$(function () {
  $('html').on('click', collapseAccordion);
  $('body')
    .on('click','.accordion', function (e) { e.stopPropagation() });
}); 
```

您应该创建一个`collapseAccordion`通过 api 调用折叠手风琴的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:11:05.193

```
$(function () {
  $('body').mousedown(function (e) { 
    if($(e.target).closest('.accordion').length != 1){
       //click was outside accordion,
       // so close it
    }      
}); 
```

# asp.net-mvc - Using the method in two model in one view of asp.net mvc 2.0

> ID：11627067
> 
> 赞同：0
> 
> 时间：2012-07-24T08:33:47.237
> 
> 标签：asp.net-mvc, asp.net-mvc-2

I have one view in my ASP.net MVC 2.0 project, I want to list the list of employee that I create method `GetProfileCustomer()` in `CustomerModels` and `GetTransaction()` in `TransactionModels`.

How can I import two different of models in a single view?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T20:27:24.603

I'm fairly new to MVC as well, and I've struggled with the similar issues if I understand the question correctly.

I've found that you get much cleaner controller code if you design your ViewModels to be as close as possible to the data that the view is using. Your ViewModels can contain lists of other things including other model objects. Something like:

```
public class TransactionViewModel
{       
    public string dataelement1 { get; set; }
    public int dataelement2 { get; set; }
    //and so on...

    //The Lists
    public IList<Employee> EmpList { get; set; }
    public IList<OtherModel> SomethingElse { get; set; }
    //and so on...          
} 
```

In your controller, you construct and initialize your ViewModel

something like...

```
TransactionViewModel TVM = new TransactionViewModel();
//assign basic attributes here..

//make a list
TVM.Emplist = (from blah in context select blah).ToList();

//send it to the view
return View(TVM); 
```

Hope this helps and happy to hear any feedback...

# android - SherlockDialogFragment and empty space on dialog

> ID：11627071
> 
> 赞同：1
> 
> 时间：2012-07-24T08:34:09.950
> 
> 标签：android, layout, dialog, android-dialogfragment

How to delete clean space on top dialog?

To display I extends my class SherlockDialogFragment. Maybe try to change the setStyle?

My layout of dialog:

```
<LinearLayout
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:gravity="center_horizontal"
android:orientation="horizontal"
android:padding="10dp" >

<ProgressBar
    android:id="@+id/pbDialog"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_vertical" />

<TextView
    android:id="@+id/tvDialog"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_vertical"
    android:gravity="center_vertical|center_horizontal"
    android:text="text" />

</LinearLayout> 
```

My screen:

![screen with spaces](../Images/9747a5cb9657d3e11765b7e95f7c70e3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T08:48:47.643

在职的：

```
public void onCreate(Bundle savedInstanceState) {
    ...
    setStyle(DialogFragment.STYLE_NO_FRAME, android.R.style.Theme);
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T19:44:10.153

感谢 Max Bublifoff 的意见。他不会像所说的那样给你任何框架。如果要保留对话框框架，请在 onCreate 中使用它。

```
 setStyle(DialogFragment.STYLE_NO_TITLE, 0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-10T08:13:19.700

只需使用：

```
 override fun onCreateView(inflater: LayoutInflater, container: ViewGroup?, savedInstanceState: Bundle?): View? {
      requireDialog().requestWindowFeature(Window.FEATURE_NO_TITLE)
      return super.onCreateView(inflater, container, savedInstanceState)
   } 
```

# java - 这种情况下可以做XSS吗？

> ID：11627079
> 
> 赞同：0
> 
> 时间：2012-07-24T08:34:42.453
> 
> 标签：java, jsp, jakarta-ee, xss

我有一个带有以下代码片段的 jsp 文件：

```
<form action=<%= request.getContextPath() %>/query_flight? ... 
```

在使用[codesecue](http://www.armorize.com/codesecure/)进行静态代码检查时，我收到了 XSS 攻击警告： ![在此处输入图像描述](../Images/762616cf02608213e1c9540cb06c1067.png)

但我很困惑，因为`context.getContextPath`它是一个 Java EE 标准 API。是否可以进行 XSS 攻击？

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T08:38:44.050

工具不对。也就是说，我将使用`<c:url>`JSTL 标记来生成 URL。如果需要跟踪会话，它将处理上下文路径和 URL 重写。

# mobile - Symbian 设备编程

> ID：11627080
> 
> 赞同：-1
> 
> 时间：2012-07-24T08:34:43.240
> 
> 标签：mobile, symbian

我不知道在哪里发布这个所以我来到这里。无论如何，我想知道是否值得针对 Symbian 手机？特别是因为诺基亚甚至不想再与它有任何关系。

symbian 手机是否获得 chrome 和 firefox mobile 的最新更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T07:15:04.540

仍然有很多旧手机，但几乎没有出售新手机。如果您了解 Symbian，那么您可以为现有客户开发它，但是开始学习该语言是没有意义的

# shell - 表示环境变量 10

> ID：11627082
> 
> 赞同：0
> 
> 时间：2012-07-24T08:34:47.233
> 
> 标签：shell

我将参数从 Java 程序传递到 shell 脚本，我在 shell 脚本中使用环境变量来接收参数。我可以使用 $9 获取参数直到没有 9。但是如果我得到第 10 个参数，我会得到一个错误。我正在使用 ${10} 来获取第 10 个参数的输入。我在哪里出错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:44:55.583

我不确定`${10}`格式，尽管它看起来很合理。但是，您可以使用`shift`内置函数来重用`$1`. 像这样的东西。

```
#!/bin/sh

a=$1
shift
b=$1

echo "$a:$b" 
```

你可以像这样运行它。

```
noufal@sanitarium% ~/foo.sh Hello Goodbye
Hello:Goodbye 
```

# mercurial - 在 Mercurial 中，如果存在默认参数，如何运行原始命令？

> ID：11627084
> 
> 赞同：5
> 
> 时间：2012-07-24T08:34:51.157
> 
> 标签：mercurial, alias, defaults

默认情况下，我已配置`hg log`为`~/.hgrc`仅列出来自当前分支的提交：

```
[defaults]
log = --branch . 
```

但是，有时我真的希望看到来自所有分支的提交。有没有办法告诉`hg log`从命令行调用时不使用配置的默认值而是回退到内置行为？`~/.hgrc`作为一个完全忽略这个特定调用的蛮力解决方案`hg log`对我来说很好。

我知道不推荐使用默认值来支持 aliases ~~，但是不能使用与现有命令相同的名称创建别名，这是我想要的，以便不必学习新的命令名称，尤其是。当`~/.hgrc`设置由多个开发人员共享~~时。

**编辑：**无法创建与现有命令同名的别名是[已修复的回归](https://bz.mercurial-scm.org/show_bug.cgi?id=3104)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T01:29:10.143

您应该能够使用`--config`覆盖您的设置`.hgrc`：

```
hg --config defaults.log= log 
```

从手册页：

```
--config    set/override config option (use 'section.name=value') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T08:41:19.407

我已经浏览了 Mercurial 网站上的错误报告，但找不到任何解决方法，响应是笼统的“这已被弃用”。

就个人而言，不向我学习命令并不是不迁移默认命令值的正当理由。一种可能的替代方法是远离每个存储库设置并在用户级别进行一些设置，因此您可以设置自己的默认值/别名。

* * *

现在不推荐使用默认值，因此您应该删除它并每次都指定参数。在文档中确认：

[https://www.mercurial-scm.org/wiki/Defaults](https://www.mercurial-scm.org/wiki/Defaults)

> （不推荐使用默认值。不要使用它们。改用别名）

尝试：

```
[alias]
blog = log --branch 
```

用法：

```
hg blog <branch name>
hg blog default 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-02T03:05:37.633

我知道我在这里复活了一个老问题，但是这个声明

> 不能使用与现有命令相同的名称创建别名

是不正确的。

例如，在该部分的`.hgrc`文件中`[alias]`，您可以：

```
[alias]
add = add --dry-run 
```

这将使`add`命令始终进行空运行，而不是实际递归地在存储库中添加所有未知文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T09:36:18.600

对于我的用例来说，这似乎是最好的解决方案，它确实暂时`~/.hgrc`完全忽略了该文件。这可以通过设置`HGRCPATH`为空字符串来完成，这会导致 Mercurial 仅从`.hg/hgrc`当前存储库中读取文件：

```
HGRCPATH="" hg log 
```

# c# - C# 中的 JSON 语法

> ID：11627090
> 
> 赞同：0
> 
> 时间：2012-07-24T08:34:58.823
> 
> 标签：c#, javascript, jquery, json

我编写了以下 Javascript，但收到错误“无效的 JSON 原语：strSeason”。语法的其余部分似乎很好，但我似乎无法正确获取“数据”参数。任何人都可以帮我语法吗？

```
TagBuilder script = new TagBuilder("script");
            script.Attributes.Add("type", "text/javascript");
            script.Attributes.Add("language", "javascript");
            // ReSharper disable LocalizableElement
            script.InnerHtml = @"

            $.ajax({
                type: 'POST',
                async: true,
                contentType: 'application/json; charset=utf-8',
                dataType: 'html',
                url: '/en-US/" + areaName + '/' + controllerName + '/' + actionName + @"',
                data: " + "{strSeason:'" + season + "', strTeam:'" + team + @"'},
                beforeSend: function(xhr){
                $(this).addClass('ajaxRefreshing');
                xhr.setRequestHeader('X-Client', 'jQuery');
                },
                success: function(html){
                $(this).html(html);
                },
                complete: function(){
                $(this).removeClass('ajaxRefreshing');
                }
            });

        "; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:37:26.483

将名称括在引号中

```
data: " + "{'strSeason':'" + season + "', 'strTeam':'" + team + @"'}, 
```

编辑：您可能只需要发送 JSON 字符串，因此将整个字符串括在引号中。

```
data: " + "\"{'strSeason':'" + season + "', 'strTeam':'" + team + "'}\"" +@", 
```

# jquery - jquery ajax方法的序列化数据限制？

> ID：11627094
> 
> 赞同：1
> 
> 时间：2012-07-24T08:35:00.817
> 
> 标签：jquery, ajax, serialization, post

通过jquery的POST类型**ajax**方法给出的数据长度是否有限制？

我正在使用 ajax() 方法在后台提交表单：

```
$.ajax({type:'POST', url: '<?=BASE_URL?>comenzi/save', dataType:'json', data:$('#theForm').serialize(), success: function(response) { ... 
```

但是有些输入没有被发送，在 POST 中找不到。

这个数据参数有限制，还是我应该在这里寻找另一个问题？

**更新：** 我已经以两种不同的方式将表单发布到控制台：

```
console.log($('#theForm').serialize());
console.log($('#theForm')); 
```

在第二个输出上，我的所有输入都在那里，但在序列化输出中我找不到我的一些输入。可能是什么问题呢？

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-24T08:43:57.343

来自 jQuery API 文档：

> 对于要包含在序列化字符串中的表单元素的值，该元素必须具有 name 属性。来自复选框和单选按钮（“单选”或“复选框”类型的输入）的值仅在它们被选中时才被包括在内。来自文件选择元素的数据未序列化。

这有帮助吗？

如果您正在处理文件，或者想通过 Ajax 提交多个表单，我发现[jQuery 表单插件](http://jquery.malsup.com/form/)非常好用。

# ios - 在 Scrollview 中调整图像大小

> ID：11627096
> 
> 赞同：0
> 
> 时间：2012-07-24T08:35:11.210
> 
> 标签：ios, xcode, imageview, scrollview

我有一个`ImageView`in a`ScrollView`并`ScrollView`在某个时候调整大小。问题是，`ImageView`正在调整大小与 相同的大小`ScrollView`，但我希望它保持原始图像大小。

我正在做的是这样的：

```
scrollView.frame = CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height); // fullscreen scrollview
[scrollView setContentMode:UIViewContentModeTopLeft]; //i want the content to be on the top left, thats correct right?
[scrollView setContentSize:CGSizeMake(imageInScrollView.frame.size.width, imageInScrollView.frame.size.height)]; // now im setting the size of the content, which is like 200x200 but it shows in fullscreen 
```

请阅读我的代码旁边的注释，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:40:01.763

您需要`autoresizingMask`更改`UIView`

> **autoresizingMask**
> 一个整数位掩码，用于确定接收器在其父视图的边界发生变化时如何调整自身大小。

你可以这样做：

```
[myImageView setAutoresizingMask:UIViewAutoresizingNone]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:41:46.513

`contentSize`of`UIScrollView`不影响绘图，它仅用于滚动目的（即定义用户可以在其中滚动的矩形）。

请提供有关它的更多信息`imageInScrollView`以及`UIImageView`它包含在其中。特别是检查它的`frame`属性是否符合您的要求并检查它`autoresizingMask`：您可能想要类似的东西

```
imageView.autoresizingMask = UIViewAutoresizingNone; 
```

最后，你应该这样做：

```
 [scrollView setContentSize:imageView.frame.size]; 
```

因为这更简单

# wcf - 使用 msmqIntegrationBinding 的 MVC 应用程序内的 WCF 服务不接收来自 msmq 的消息

> ID：11627097
> 
> 赞同：1
> 
> 时间：2012-07-24T08:35:13.733
> 
> 标签：wcf, msmq

我有一个 MVC 应用程序，它有一个控制器，它的动作应该从队列 (msmq) 中的最新消息中公开数据。我在本地机器上添加了一个私人队列。我希望应用程序在添加消息时自动从队列接收消息。为此，我在已添加到应用程序的 WCF 服务上使用 msmqIntegrationBinding。然后，在合约中获取消息的方法我应该将消息保存在应用程序缓存中，以便在客户端请求最新数据时可以访问它。

我现在面临的挑战是，当我将消息添加到队列时，WCF 服务不会接收到它。我需要关于我可能做错的事情的指导或对我的方法的反馈。请帮忙。

以下是 WCF 服务的端点配置：

```
<bindings>
<msmqIntegrationBinding>
  <binding name="MsmqBinding">
    <security mode="None" />
  </binding>
</msmqIntegrationBinding>
</bindings>

<services>
  <service name="TestApp.Web.Service.QueueMessageReceiver">
    <endpoint address="msmq.formatname:DIRECT=OS:.\private$\testsmessagequeue"
                      binding="msmqIntegrationBinding"
                      bindingConfiguration="MsmqBinding"
                      contract="TestApp.Web.Service.IQueueMessageReceiver" />
  </service>
</services> 
```

以下代码来自 QueueMessageReceiver.cs WCF 服务：

```
public class QueueMessageReceiver : IQueueMessageReceiver
{
    private static readonly XmlSerializer Serializer = new XmlSerializer(typeof(ScrewInfoModel));

    [OperationBehavior(TransactionScopeRequired = true, TransactionAutoComplete = true)]
    public void PutScrewInfoMessage(System.ServiceModel.MsmqIntegration.MsmqMessage<System.Xml.XmlDocument> msg)
    {
        CacheScrewInfoModelFromScrewInfoXmlDoc(msg.Body);
    }

    private static void CacheScrewInfoModelFromScrewInfoXmlDoc(XmlNode screwInfoXmlDoc)
    {
        var reader = new StringReader(screwInfoXmlDoc.InnerXml);
        var screwInfoModel = (ScrewInfoModel)Serializer.Deserialize(reader);
        Common.Utils.CacheScrewInfo(screwInfoModel);
    }
} 
```

这是 WCF 的接口：

```
[ServiceContract]
public interface IQueueMessageReceiver
{
    [OperationContract(IsOneWay = true, Action = "*")]
    void PutScrewInfoMessage(MsmqMessage<XmlDocument> msg);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:05:18.750

尝试将您的运营合同更改为

```
void PutScrewInfoMessage(MsmqMessage<string> msg); 
```

WCF 堆栈可能难以反序列化为`XmlDocument`.

**更新**

要尝试的事情：

1.  使您的队列“testsmessagequeue”具有正确的权限集。在这种情况下，运行托管您的控制器的应用程序池的服务帐户需要设置“接收消息”权限。

2.  启用 MSMQ 日志记录（如果您使用的是 windows 2008 服务器或 windows 7 及更高版本），可在事件查看器中的以下位置找到：应用程序和服务日志 -> Microsoft -> Windows -> MSMQ -> End2End。这将捕获 MSMQ 中发生的所有事情，包括任何错误。

3.  尝试使队列具有事务性（如果还没有）。这将确保消息未传递时存在错误情况。

4.  在您的服务端点上启用 WCF 跟踪，以查看在消息出列时发生的任何特定 WCF 错误。

**更新 2**

我认为问题是队列权限。您的应用程序池在用户*ApplicationPoolIdentity*下运行（如果它在 .net 4.0 应用程序池下运行）。与此身份对应的用户称为*DefaultAppPool*。您需要授予此用户在队列上接收消息的权限。要选择此用户，请在“选择用户”对话框中搜索名为*IIS AppPool\DefaultAppPool的本地帐户。*

![在此处输入图像描述](../Images/01b4609ec3f74078c74d4f6a85530bfb.png)

**更新 3**

令我震惊的是，IIS 不是队列侦听器的合适托管容器。原因是应用程序池在一段时间不活动后卸载。这由 IIS 控制，不可配置。（见[这里](https://stackoverflow.com/a/11101718/569662)）

我认为您应该在 Windows 服务中创建一个新的托管容器（您可以使用控制台主机来增加它）来托管队列端点。Windows 服务将在实际服务帐户下运行，因此授予权限将不那么复杂。

此服务可以直接将写入写入缓存，或者如果这不可能，则应写入网站控制器可以刷新缓存的数据库。

这有意义吗？

**更新 4**

毒消息意味着消息由于某些问题而无法出队。检查名为 Transactional Dead Letter Queue 的系统队列，看看您的消息是否在其中。

# javascript - 重新输入相同的输入时，jQuery on change 不会触发

> ID：11627099
> 
> 赞同：0
> 
> 时间：2012-07-24T08:35:14.980
> 
> 标签：javascript, jquery, firefox, onchange

我有这个表单，您可以在输入字段中输入一些内容，并且我添加了一个 onchange 事件侦听器以在值更改时发出警报。显然，该代码在 Chrome 中有效，但在**Firefox**中，如果我们重新输入相同的文本，它就不起作用。

例子：

第一次尝试->输入文本->你好。（文本更改时的警报）。第二次尝试->输入文本->你好。（再次）（未调用更改事件）。

谁能告诉我为什么会这样？提前感谢您的时间:)。

这是一个jsfiddle。

[http://jsfiddle.net/neoragex/6yMsf/1/](http://jsfiddle.net/neoragex/6yMsf/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:38:49.267

因为该事件仅在输入字段的值更改时触发 - 您再次设置相同的值，因此就浏览器而言不会发生任何更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:40:50.123

您可以处理模糊事件。即使值相同，它也会被解雇。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T08:41:32.160

```
$(function() {
    $('input[type=text]').on('blur',function() {    
       alert($(this).val());
    });    
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T08:45:46.673

尝试使用 keyup 事件。此事件在按键按下时触发。

# ms-access - 我的 c# 应用程序无法使用 microsoft access database engine 2010 32bit 连接到 window7 64bit 上的数据库

> ID：11627100
> 
> 赞同：0
> 
> 时间：2012-07-24T08:35:16.277
> 
> 标签：ms-access, clickonce

我正在与

1) Window7 32bit 2) VS 2005 3) 语言：C#

我制作了一个连接到 Access 文件的应用程序，并在我的计算机上使用 Clickonce 部署了该应用程序。

我以发布/任何 cpu 模式发布。

先决条件是 .Net Framework 2.0。

当我在另一台计算机（Window7 64bit，MS Access Database Engine 2010 32bit）上安装应用程序时，出现错误。

错误消息是`Cannot Connect to Database.... System.Data`。

我的连接字符串是`Provider=Microsoft.ACE.OLEDB.12.0;Data Source=...`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:46:44.610

64 位和 32 位组件不能很好地配合使用。

我在使用 64 位 Windows 和 32 位 ODBC 驱动程序时遇到了类似的问题。您很可能需要 64 位版本的 Access 数据库驱动程序。

# java - 如何处理ant中最简单的依赖动作？

> ID：11627101
> 
> 赞同：0
> 
> 时间：2012-07-24T08:35:19.927
> 
> 标签：java, ant, dependencies

在 Makefile 中，我会简单地指定

```
.a.b:
    do_something_with_a $< --output=$*.b 
```

我该如何在蚂蚁中做到这一点？我在任何文档中都没有看到这一点，也无法让它与 ant 一起使用。

对于不知道make的人，第一部分指定了两种文件，扩展名为.a的文件和扩展名为.b的文件。此外，它指定 bs 依赖于 as，因此如果 filename.b 不存在或比 filename.a 旧，则应应用命令规则。命令规则指定使用参数“filename.a”和“--output==filename.b”为每个这样的文件名调用命令“do_something_with_a”。

我将使用 ant-1.8.4 测试您的解决方案并接受第一个可行的解决方案。可以指定文件位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T06:15:23.167

这种抽象依赖在 ant 中是不可能的。

# android - 使 Android Radio Button 的 `button` Drawable 缩小以适应边界并保持纵横比

> ID：11627102
> 
> 赞同：1
> 
> 时间：2012-07-24T08:35:23.193
> 
> 标签：android, android-layout, android-widget

我正在尝试制作一个自定义单选按钮。我有一个`<selector>`配置如下：

```
<selector xmlns...>
  <item android:drawable="@drawable/image" android:state_checked="true" />
  <item android:drawable="@drawable/image" android:state_checked="false" />
</selector> 
```

现在这只是一个示例，因此为了简单起见，我使用相同的图像，但我计划`@drawable/image`稍后使用由 和稍大的矩形组成的复合图像。图像大于我想要的单选按钮大小，所以我的问题不是缩小图像以使图像保持其纵横比`<RadioButton />`，图像只是被裁剪（准确地说是一半）。由于这不是图像视图，我不知道如何使其正确缩放。

我已将`layout_width`&设置`layout_height`为`wrap_content`。我计划稍后在资源文件中编码绝对 dp 值，但我想首先弄清楚如何让图像正确缩放以适合指定的尺寸。我看到的另一种选择是使用 GIMP 预先调整我的图像大小，但从长远来看，这似乎不太适应，特别是如果我需要使其在多个屏幕密度上正常工作。

刚才，我尝试使用`<inset />`，希望可以调整大小，但没有成功。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T13:28:23.073

创建一个虚拟背景对我有用[在 API8 和 16 上测试]：

```
<RadioButton
 android:id="@+id/stKayaBkRad"
 android:background="@drawable/goban_rad_bkg"
 android:button="@drawable/rad_goban_kaya_sel"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"/> 
```

显然`wrap_content` *确实*包裹了背景，这只是一个完全透明的png，与drawable的大小相同。

# android - 准备好后在视图中设置 ListView

> ID：11627104
> 
> 赞同：1
> 
> 时间：2012-07-24T08:35:26.640
> 
> 标签：android

我的 Android 应用程序中有两个视图（实际上是 2 个视图片段）。第一个视图有一个文本字段和一个按钮，第二个视图有一个 ListView。

我想做的是根据文本字段中设置的内容（从第一个视图）在 ListView 中设置一些数据。但我不知道该怎么做。

我目前正在通过`onCreateView`2nd Views SecondFragment.java 文件中的方法在 ListView 中设置硬编码数据。看起来像这样：

```
ListView list = (ListView)view.findViewById(R.id.list_mainmenu);

items.add(new SectionItem("Section 1"));
items.add(new EntryItem("Item 1", "This is item 1", 1));
items.add(new EntryItem("Item 2", "This is item 2", 2));
items.add(new EntryItem("Item 3", "This is item 3", 3));

EntryAdapter adapter = new EntryAdapter(this.getActivity().getBaseContext(), items);
list.setAdapter(adapter); 
```

但是在`onCreateView`方法中使用它不是我想要的。我希望能够从另一个 java 文件中为该视图设置该列表。就我而言`FirstFragment.java`。

这可能吗，如果可以，我该怎么做？

我可以想象必须已经有一些`SecondFragment.java`类的实例，因为`onCreateView`在应用程序加载时会立即调用。我只是不知道我可以从哪里得到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:36:24.477

问题是您将适配器设置为`oncreate`，而不是将其设置为`oncreate`，将其设置为单击按钮，或者在您想要显示列表时设置它。

```
// here SelectOption is a button
SelectOption.setOnClickListener(new OnClickListener() {
    public void onClick(View arg0) {    

        if(Text.equals("BEVERAGES")) {         
            l1.setAdapter(bever);
            return;
        }    
        else if(Text.equals("BREAKFAST")) {
            l1.setAdapter(Breakf);
            S5=new String[]{ Breakf.size() };
            return;
        }
        else if(Text.equals("LUNCH")) {
            l1.setAdapter(lunc);
            S5=new String[]{ lunc.size() };
            return;
        }
        else if(Text.equals("DINNER")) {
            l1.setAdapter(Dinn);
            S5=new String[]{ Dinn.size() };
            return;
        }
        else if(Text.equals("DESSERTS")) {
            l1.setAdapter(Dessert);
            S5=new String[]{ Dessert.size() };
            return;
        }
        else if(Text.equals("APPETIZERS & SIDES")) {
            l1.setAdapter(Appet);
            S5=new String[]{ Appet.size() };
            return;
        }
    }
}); 
```

因此只有在设置适配器时才会填充数据列表，然后在向适配器添加新值时也添加此行

```
adapter.notifyDataSetChanged(); 
```

# php - 单击复选框时如何添加新内容？

> ID：11627105
> 
> 赞同：0
> 
> 时间：2012-07-24T08:35:27.647
> 
> 标签：php, jquery, mysql, ajax, checkbox

我在 php 中使用 ajax、jquery、mysql 和复选框进行了设计。就是这样：

有一个带有复选框的框。还有一个空盒子。当您选中第一个框中的复选框时，有关该复选框的信息将显示在空框中。我做到了并且工作良好。但是当您单击另一个复选框时，有关您第一次单击的信息消失了，并且仅显示当前选择。也就是说，我想在旧的选择上添加新的选择。另外，当我取消选中复选框时，如何删除第二个框中的信息。谢谢你。

这是HTML代码：

```
<div id="first_box"> 
  <label class='checkbox'>
     <input type='checkbox' id=1> 
         First checkbox
  </label>
  <label class='checkbox'>
     <input type='checkbox' id=2> 
         Second checkbox
  </label>
  <label class='checkbox'>
     <input type='checkbox' id=3> 
         Third checkbox
  </label>
</div>
<div id="second_box"> </div> 
```

这是jQuery代码：

```
$(document).ready(function() {

 $("#first_box input:checkbox").change(function() {

    if($(this).is(":checked")) { 

       $.post("/here/is/url", { strID:$(this).attr("id"), strState:"1" },
        function(data) {
         $("#second_box").html(data);
       });

  } else {
      $.ajax({
        url: 'here/is/url/',
        type: 'POST',
        data: { strID:$(this).attr("id"), strState:"0" }
      });
  }
 });    

}); 
```

这是ajax请求的php代码：

```
$strID    = $_POST['strID'];
$strState = $_POST['strState'];

    if ($strState) { //if checkbox is clicked

        //I fetch data about checkbox which is clicked
        $infos = $this->info_model->get_info_from_checkbox_id($strID);

        foreach ($infos as $info) {
            echo "<label class='checkbox'>
                <input type='checkbox'>".$info->information .
                "</label>"; 
        }
    } else {  // if it is unchecked

         // I do not know how to delete 

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T08:44:26.957

> 我想在旧的选择上添加新的选择。

您可以使用`append()`而不是`html()`替换内容：

```
$("#second_box").append(data); 
```

> 当我取消选中复选框时，如何删除第二个框中的信息。

您可以使用`empty()`which 删除所选元素的内容：

```
$("#second_box").empty(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T09:42:50.233

或者，您可以在客户端做更多的事情。请参阅[此处](http://jsfiddle.net/ZRqgg/1/)进行演示。

```
<div id="first_box"> 
  <label class='checkbox'>
    <input data-url="url1" data-id="1" type="checkbox"> First checkbox
  </label>

  <label class='checkbox'>
    <input data-url="url2" data-id="2" type="checkbox" > Second checkbox
  </label>

  <label class='checkbox'>
    <input data-url="url3" data-id="3" type="checkbox"> Third checkbox
  </label>

</div>

<div id="second_box"></div>​ 
```

JavaScript：

```
$(document).ready(function() {
    $("#first_box input:checkbox").change(function(e) {
        var $this = $(this);

        if (already_loaded()) {
            update_visibility();
        } else {
            load();
        }

        // END -- Functions

        function already_loaded() {
            return $this.data("loaded");
        }

        function is_loading() {
            return $this.data("loading");
        }

        function load() {
            if (!is_loading()) {
                $this.data("loading", true);
                var id = $this.data("id");
                $.post("url", { // or use $this.data("url") if you want individual URLs
                    strId: id
                }, function(data) {
                    $this.data("loaded", true);
                    $this.data("is_loading", false);
                    $("#second_box").append(data);
                    update_visibility();
                });
            }
        }

        function is_checked() {
            return $this.is(":checked");
        }

        function update_visibility() {
            var $info = $("#info-" + $this.data("id"));
            if (is_checked()) {
                $info.show();
            }
            else {
                $info.hide();
            }
        }
    });
    $("#first_box input:checkbox").data("loaded", false);
    $("#first_box input:checkbox").data("loading", false);
});​ 
```

# google-maps - 更改 gmap3 中的默认集群编号后未更改集群图像

> ID：11627111
> 
> 赞同：0
> 
> 时间：2012-07-24T08:36:00.480
> 
> 标签：google-maps, jquery-gmap3

我已将以下代码用于集群，但在这种情况下，cluster-3 不显示，仅显示 cluster-1 和 cluster-2。

```
clusters: {
    // This style will be used for clusters with more than 0 markers
    10: {
        content: '<div class="cluster cluster-1">CLUSTER_COUNT</div>',
        width: 53,
        height: 52
    },
    // This style will be used for clusters with more than 20 markers
    50: {
        content: '<div class="cluster cluster-2">CLUSTER_COUNT</div>',
        width: 56,
        height: 55
    },
    // This style will be used for clusters with more than 50 markers
    100: {
        content: '<div class="cluster cluster-3">CLUSTER_COUNT</div>',
        width: 66,
        height: 65
    }
}, 
```

此处剩余的代码与 css 和 javascript 中的代码相同，如[http://gmap3.net/examples/clustering.html](http://gmap3.net/examples/clustering.html) 请提出任何好的解决方案或我们无法更改现有比率的缺点。

提前致谢。

# c# - If else 缩小器

> ID：11627114
> 
> 赞同：3
> 
> 时间：2012-07-24T08:36:27.623
> 
> 标签：c#, asp.net

我有很多这样的代码行。这只是我现在正在尝试的一件事。

```
if (RI2.Text.Contains("SOS") || RI2.Text.Contains("WAR"))
{
     Response.Redirect("http://mydomain.com/rabat");
}
if (RI2.Text.Contains("sos") || RI2.Text.Contains("war"))
{
     Response.Redirect("http://mydomain.com/rabat");
} 
```

我如何缩小这段代码。我的意思是，它非常丑陋，并且有许多类似于此的代码行。

有没有更好的方法可以做到这一点，我不知道。

请帮忙。感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T08:42:28.463

试试这个正则表达式。

*   在比较中忽略大小写（`SOS`和`sos`匹配）
*   不会因为您不调用而改变字符串`ToLower()`
*   只有 2 行代码

如果表达式 ( ) 是一个常量，您可以选择[预编译表达式以获得更高的性能。](http://www.dotnetperls.com/regex-performance)`SOS|WAR`

```
if (Regex.IsMatch(RI2.Text, "SOS|WAR", RegexOptions.IgnoreCase))
    Response.Redirect("http://mydomain.com/rabat"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T08:40:17.913

不确定我是否完全理解你的要求，但你去：

```
if(RI2.Text.ToLower().Contains("sos") || RI2.Text.ToLower().Contains("war")) {
  Response.Redirect("http://mydomain.com/rabat");
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T08:38:43.713

你可以打**一个**电话，比如

```
//this will accept "SOS" and "sos"
if(RI2.Text.ToLower().Contains("sos") || 
      RI2.Text.ToLower().Contains("war")) 
{
  ....
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-24T08:44:41.723

您可以将字符串转换为小写删除一个 if 语句，然后使用 linq any 语句。

```
var search=new[] {"sos","war"};

if (search.Any(x=>RI2.Text.ToLower().Contains(x))) {
  Response.Redirect("http://mydomain.com/rabat"); 
} 
```

甚至可以收集目标网址的匹配项。

```
var search = new Dictionary<string,string>{ 
   {"sos","http://mydomain.com/rabat"},
   {"war","http://mydomain.com/rabat"},
}; 
```

使用 linq

```
var url=search.Keys.Where(x=>RI2.Text.ToLower().Contains(x)).Select(x=>search[x]).FirstOrDefault();
if (url!=null) {
  Response.Redirect(url);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-24T08:44:53.897

您可以按如下方式创建对字符串的扩展

```
public static bool Contains(this string value, string[] values)
    {
        foreach (string comparar in values)
        {
            if (value.ToUpper().Contains(comparar.ToUpper())) return true;
        }
        return false;
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-24T09:01:23.090

而不是将字符串转换为小写或大写使用[string.IndexOf](http://msdn.microsoft.com/en-us/library/system.string.indexof.aspx)忽略大小写

```
if (RI2.Text.IndexOf("sos",StringComparison.InvariantCultureIgnoreCase) >= 0  || 
    RI2.Text.IndexOf("war",StringComparison.InvariantCultureIgnoreCase) >= 0 )
{
        Response.Redirect("http://mydomain.com/rabat");
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-24T08:39:59.777

```
if(string.Equals("war", RI2.Text, StringComparison.InvariantCultureIgnoreCase) ||
                string.Equals("sos", RI2.Text, StringComparison.InvariantCultureIgnoreCase))
                Response.Redirect("http://mydomain.com/rabat"); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-24T08:40:15.460

创建一个字符串对列表，其中一个是大写的搜索字符串，另一个是重定向位置。

遍历列表检查每个搜索字符串与大写文本。如果您发现匹配重定向到该对中指定的位置。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-24T08:44:48.130

使用正则表达式：

```
var pattern = "(sos|war)";
if(Regex.IsMatch(RI2.Text.ToLower(), pattern))
    Response.Redirect("http://mydomain.com/rabat"); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-07-24T08:46:47.593

鉴于 Response.Redirect 的 Url 相同

```
string lowerRI2 = RI2.Text.ToLower();
if (lowerRI2.Contains("sos") || lowerRI2.Contains("war"))
   Response.Redirect("http://mydomain.com/rabat"); 
```

# php - 如何从控制器内部访问路由参数？

> ID：11627116
> 
> 赞同：0
> 
> 时间：2012-07-24T08:36:45.813
> 
> 标签：php, zend-framework2

这是路线...

```
'panel-list' => array (
    'type' => 'Segment',
    'options' => array (
        'route'    => '/panel-list/:pageId[/:action]',
        'constraints' => array (
            'pageId' => '[a-z0-9_-]+'
        ),
        'defaults' => array (
            'action' => 'index',
            'controller' => 'PanelList',
            'site' => null
        ),
    ),
), 
```

我需要在这里放什么......

```
public function indexAction()
{
    echo ???????
} 
```

回显 pageId？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T14:34:04.237

在 zf2 的 beta5 中，它变得更容易使用，因此您不需要为每种不同的类型记住不同的语法。我[引用](http://framework.zend.com/zf2/blog/entry/Zend-Framework-2-0-0beta5-Released)：

> 新的“参数”控制器插件。允许检索查询、发布、cookie、标头和路由参数。用法是 $this->params()->fromQuery($name, $default)。

因此，要从路由中获取参数，您需要做的就是。

```
$param = $this->params()->fromRoute('pageId'); 
```

正如引文所说，这也可以通过查询（$_GET）和发布（$_POST）等来完成。

```
$param = $this->params()->fromQuery('pageId');
// will match someurl?pageId=33

$param = $this->params()->fromPost('pageId');
// will match something with the name pageId from a form.

// You can also set a default value, if it's empty.
$param = $this->params()->fromRoute('key', 'defaultvalue'); 
```

例子：

```
$param = $this->params()->fromQuery('pageId', 55); 
```

如果 url 是 someurl?pageId=33 $param 将保持值 33。如果 url 没有 ?pageId $param 将保持值 55

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T08:40:13.180

你有没有尝试过

```
$this->getRequest()->getParam('pageId') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T08:59:14.680

$this->getEvent()->getRouteMatch()->getParam('pageId');

# git - 使用 git 推送特定的提交（与 ClearCase 相比）

> ID：11627122
> 
> 赞同：1
> 
> 时间：2012-07-24T08:37:08.537
> 
> 标签：git, version-control, clearcase, dvcs

我们目前正在使用 ClearCase 来管理我们的源代码。

使用 ClearCase，我习惯于进行一些更改，并且能够以我想要的任何方式将这些更改提交（签入）到服务器。

这也意味着我可以编辑（签出和修改）10 个不同的文件，但只能将其中一些文件签入服务器，并且可以按照我想要的任何顺序进行。

使用 git，在本地提交会迫使我以特定顺序将更改推送回服务器。

Git 中是否有任何工作流程，类似于我习惯使用 ClearCase 的工作流程？（能够仅将我的一些本地提交推送到服务器而无需大量工作）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:56:07.497

除了将文件添加到索引（它允许您只提取您想要的文件）之外，您还可以：

*   以交互方式将文件的*一部分*添加到索引中（这意味着如果需要，您可以只推送文件的一部分：您不能使用 ClearCase 做到这一点）
*   在任何时候存储您正在修改的文件，以刷新您的工作区（git pull），然后将这些更改重新应用到您的工作树。
    这比在 ClearCase 中更容易，后者在刷新视图时不会修改当前签出的文件（例如在快照视图中更新）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:43:03.960

回复：

> 这也意味着我可以编辑（签出和修改）10 个不同的文件，但只能将其中一些文件签入服务器，并且可以按照我想要的任何顺序进行。

您可以只提交您想要的文件：

```
>git status
# on branch xxx
# Changes not staged for commit
#    file1
#    file2
#    file3

>git add file1 file3
>git commit -m "Commited file1 and file3"

>git status
# on branch xxx
# Changes not staged for commit
#    file2 
```

# android - Android 日期选择器和时间选择器问题

> ID：11627124
> 
> 赞同：1
> 
> 时间：2012-07-24T08:37:13.410
> 
> 标签：android, datetimepicker, android-datepicker, datepickerdialog

我面临的问题是从日期和时间对话框。我已经单独创建了所有这些。在 onCreate 上，我在对话框中为用户设置了当前日期和时间。即例如 24/7/2012 作为今天的日期。当我将 from_date 的对话框更改/单击为日期时，例如：26/7/2012 然后我通过 setText 将 to_date 对话框的文本更改为 26/7/2012。这里出现的问题是当我打开 to_date 对话框时，对话框中显示的日期是 24/7/2012 而不是 26/7/2012。对于日期和时间选择器对话框，如何实现这一点。我附上了下面的代码。提前致谢。

```
public Dialog onCreateDialog(int id) {
    switch (id) {
    case DATE_DIALOG_ID_FROM:
        Log.i("Date Case", "" + from_day);
        return new DatePickerDialog(this, dateListenerfrom, from_year,
                from_month, from_day);
    case DATE_DIALOG_ID_TO:
        Log.i("Date Case", "" + to_day);
        return new DatePickerDialog(this, dateListenerto, to_year,
                to_month, to_day);
    case TIME_DIALOG_ID_FROM:
        return new TimePickerDialog(this, timeListenerfrom, from_hours,
                from_min, false);
    case TIME_DIALOG_ID_TO:
        return new TimePickerDialog(this, timeListenerto, to_hours, to_min,
                false);

    }
    return null;

}

private DatePickerDialog.OnDateSetListener dateListenerfrom = new DatePickerDialog.OnDateSetListener() {

    public void onDateSet(DatePicker view, int yr, int monthOfYear,
            int dayOfMonth) {
        // TODO Auto-generated method stub

        from_year = yr;
        from_month = monthOfYear;
        from_day = dayOfMonth;
        // to_year = yr;
        // to_month = monthOfYear;
        to_day = dayOfMonth;

        Log.i("From Day", "" + from_day);
        Log.i("To Day", "" + to_day);
        Log.i("To Cons", "" + dayOfMonth);

        try {
            updateDateFrom();
        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
};

private DatePickerDialog.OnCancelListener mDateFromCancelListener = new DatePickerDialog.OnCancelListener() {
    public void onCancel(DialogInterface dialog) {

    }
};

private DatePickerDialog.OnDateSetListener dateListenerto = new DatePickerDialog.OnDateSetListener() {

    public void onDateSet(DatePicker view, int yr, int monthOfYear,
            int dayOfMonth) {
        // TODO Auto-generated method stub
        to_year = yr;
        to_month = monthOfYear;
        to_day = dayOfMonth;

        Log.i("From Day", "" + from_day);
        Log.i("To Day", "" + to_day);
        Log.i("To Cons", "" + dayOfMonth);

        try {
            updateDateTo();
        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
};

private void updateDateFrom() throws ParseException {

    SimpleDateFormat dateFormat = new SimpleDateFormat("dd/MM/yyyy HH:mm");

    try {
        date_from = dateFormat.parse(from_day + "/" + from_month + "/"
                + from_year + " " + from_hours + ":" + to_min);

    } catch (ParseException e) {
        e.printStackTrace();
    }

    System.out.println("From LONG   " + date_from.getTime());

    from_date_builder = new StringBuilder().append(from_day).append('/')
            .append(from_month + 1).append('/').append(from_year);

    from_date.setText(from_date_builder.toString());

    to_date.setText(new StringBuilder().append(from_day).append('/')
            .append(from_month + 1).append('/').append(from_year));

}

private void updateDateTo() throws ParseException {

    SimpleDateFormat dateFormat = new SimpleDateFormat("dd/MM/yyyy HH:mm");

    try {
        date_to = dateFormat.parse(to_day + "/" + to_month + "/" + to_year
                + " " + to_hours + ":" + to_min);

    } catch (ParseException e) {
        e.printStackTrace();
    }

    System.out.println("To LONG   " + date_to.getTime());

    if (date_from.getTime() <= date_to.getTime()) {
        to_date_builder = new StringBuilder().append(to_day).append('/')
                .append(to_month + 1).append('/').append(to_year);
        to_date.setText(to_date_builder.toString());
    } else {
        Toast.makeText(this, "Please set proper date", Toast.LENGTH_SHORT)
                .show();
    }

}

private TimePickerDialog.OnTimeSetListener timeListenerfrom = new TimePickerDialog.OnTimeSetListener() {
    public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
        from_hours = hourOfDay;
        from_min = minute;
        try {
            updateTimeFrom();
        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
};

private TimePickerDialog.OnTimeSetListener timeListenerto = new TimePickerDialog.OnTimeSetListener() {
    public void onTimeSet(TimePicker view, int hourOfDay, int minute) {
        to_hours = hourOfDay;
        to_min = minute;
        try {
            updateTimeTo();
        } catch (ParseException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
};

private void updateTimeFrom() throws ParseException {

    SimpleDateFormat dateFormat = new SimpleDateFormat("dd/MM/yyyy HH:mm");

    time_from = dateFormat.parse(from_day + "/" + from_month + "/"
            + from_year + " " + from_hours + ":" + from_min);

    from_time_builder = new StringBuilder().append(from_hours).append(':')
            .append(from_min);

    from_time.setText(from_time_builder.toString());

    to_time.setText(new StringBuilder().append(from_hours).append(':')
            .append(from_min));

}

private void updateTimeTo() throws ParseException {

    SimpleDateFormat dateFormat = new SimpleDateFormat("dd/MM/yyyy HH:mm");

    time_to = dateFormat.parse(to_day + "/" + to_month + "/" + to_year
            + " " + to_hours + ":" + to_min);

    if (time_from.getTime() <= time_to.getTime()
            && date_from.getTime() <= date_to.getTime()) {

        to_time_builder = new StringBuilder().append(to_hours).append(':')
                .append(to_min);

        to_time.setText(to_time_builder.toString());
    }

    else {
        Toast.makeText(this, "Please set proper date", Toast.LENGTH_SHORT)
                .show();
    }

    System.out.println("Thi is in the time to ");

} 
```

这是 onClick {

```
if (v == from_date) {
        showDialog(DATE_DIALOG_ID_FROM);
    }

    if (v == to_date) {
        showDialog(DATE_DIALOG_ID_TO);
    }

    if (v == from_time) {
        showDialog(TIME_DIALOG_ID_FROM);
    }
    if (v == to_time) {
        showDialog(TIME_DIALOG_ID_TO);
    } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:09:03.780

您必须在您的活动中实现以下方法来更新要在对话框中显示的日期/时间。

```
protected void onPrepareDialog(int id, Dialog dialog) {
    switch (id) {
        case DATE_DIALOG_ID_TO:
        case DATE_DIALOG_ID_FROM:
            ((DatePickerDialog) dialog).updateDate(mYear, mMonth, mDay);
            break;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:00:53.930

如果您想在默认情况下为 to_date 显示 from_date，您可以更改您的 to_date 日期选择器以显示从日期值。

```
case DATE_DIALOG_ID_TO:
    Log.i("Date Case", "" + to_day);
    return new DatePickerDialog(this, dateListenerto, from_year,
            from_month, from_day); 
```

或者，您可以从 from_date 选择器的 onDateSet 函数中设置 to_year、to_month 和 to_day。

# tridion - Tridion 2011 SP1 中的 SiteEdit 属性和方法

> ID：11627125
> 
> 赞同：1
> 
> 时间：2012-07-24T08:37:18.377
> 
> 标签：tridion, tridion-2011, siteedit

有人可以向我提供 Tridion 2011 SP1 中使用的 SiteEdit 属性和方法的文档吗？例如：SiteEdit.ComponentPresentation()，这个属性用在两个不同的地方，不同的参数。我想要有关所有此类属性及其返回类型的完整信息。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T08:39:56.123

所有文档都可以在[http://docportal.sdl.com/sdltridion](http://docportal.sdl.com/sdltridion)上找到，这将指向 API 指南以及在线文档。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T10:39:30.607

SiteEdit 2011 SP1 版本中没有这种方法。该方法仅在 SiteEdit 的 1.3 版本中可用，现在已经非常过时了。

但是，好消息是您仍然可以使用该脚本扩展的标记输出 - 即使在此后发布的许多版本中也是如此。不过，您确实应该在某个时候更新您的模板 - 至少要使用较新版本的脚本扩展（但最好使用模板构建块）。

所以无论如何，您需要查看 SiteEdit 1.3 的实施手册以获取方法信息。

为方便起见，我将在此处解释 3 个参数：

1.  要输出的组件表示。类型：组件演示。强制的。
2.  要使用的“交换标签”。如果设置，您只能将其在页面上的位置与使用相同标签的组件表示交换。类型：字符串。可选，默认为空字符串。
3.  用作父元素的 HTML 标记。在 SiteEdit 中可编辑的所有 CP 都必须有一个容器元素（以便它可以在其周围显示一个边框，并且通常知道什么被认为是该 CP 的内容）。类型：字符串。可选，默认为“跨度”。

# php - PHP类基础：类中传值

> ID：11627128
> 
> 赞同：0
> 
> 时间：2012-07-24T08:37:31.697
> 
> 标签：php, oop

我正在调试一个网站，我不得不使用我目前还不习惯的类。

此站点中有此类处理 a`$this`但似乎没有任何变量传递给该类。上课是这样的

```
class myclass extends otherclass{

    function dosmthtomyclass{
        print_r($this);
    }
} 
```

`function dosmttomyclass`打印一个数组。

在类中定义了一堆受保护的变量，但似乎没有为这些变量中的任何一个指定任何特定值，并且类中没有构造函数可以将值传递给。

我对必须从哪里传递变量感到非常困惑。这可能是非常基本的东西，但任何帮助将不胜感激。将变量传递给类的可能方法是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:47:01.603

`$this`指当前对象。根据[PHP 文档](http://us2.php.net/manual/en/language.oop5.basic.php)

> 当从对象上下文中调用方法时，伪变量 $this 可用。$this 是对调用对象的引用（通常是方法所属的对象，但也可能是另一个对象，如果该方法是从辅助对象的上下文中静态调用的）。

这里有一些关于它的详细解释。这可以帮助你理解

[PHP 中的变量 $this 是什么意思？](https://stackoverflow.com/questions/1523479/what-does-the-variable-this-mean-in-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:47:09.087

您需要阅读有关 OOP 的手册和/或教程。因为这是您了解 OOP 的唯一方法。从这个开始：[http ://www.php.net/manual/en/language.oop5.basic.php](http://www.php.net/manual/en/language.oop5.basic.php)

$this 指的是对象的当前实例。阅读 PHP+visibility 以了解为什么私有变量/方法对子类（扩展类）不可见。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T08:48:12.830

`$this`指类的当前对象。执行以下代码更清楚：

```
<?php
class abc {
    var $val = 3;

    function show()
    {
        print_r($this);
    }
}

$ob = new abc();
$ob->show(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T08:50:14.810

这是因为 myclass 正在从 otherClass 获取数据......像这样：

```
<?php
class otherclass{
    public $name="Mike";
}

class myclass extends otherclass {
    function dosmthtomyclass() {
        print_r($this);
    }
}

$test=new myclass();
$test->dosmthtomyclass();  //prints "[name] => Mike" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-24T08:51:41.347

也许在 php 中使用类的一些背景知识可以帮助你：

$this 用于引用类中的层次结构。例如，您可以有这样的课程：

```
class Phpclass{

    public function main(){
        echo "public function called<br/>";
        $this->helloworld();
    }

    private function helloworld(){
        echo "hello world";
    }

}

$phpclass=new Phpclass();
$phpclass->main(); 
```

这个类是一个对象的蓝图，它将用变量 $phpclass 进行实例化。由于 main() 是类中的公共函数，因此可以从类外部调用它。私有函数只能从类内部调用，因此 main() 函数使用 $this 作为类本身的标识符来调用自身内部的私有函数 helloworld()。如果没有 $this，对象就不会知道你指的是它自身内部的一个函数。

首先，上面会回显“public function called”，然后是“hello world”。

# java - 在java中同步大量线程的最佳方法

> ID：11627129
> 
> 赞同：2
> 
> 时间：2012-07-24T08:37:32.973
> 
> 标签：java, multithreading, stress-testing

我开发了一个应用程序，并且在给定的时刻，我启动了大约 10000 个线程来对数据库进行压力测试。我想通过以下方式同步它：我想从所有线程中的表中读取所有数据，然后我希望所有线程等待其他线程停止读取。在所有线程完成读取后，我从该表中删除所有记录，然后我希望所有线程插入之前读取的数据。现在，我如何同步我的线程，以前面提到的顺序相互等待？什么是最好的解决方案？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T08:41:27.077

使用[`CyclicBarrier`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CyclicBarrier.html)：

> CyclicBarriers 在涉及固定大小的线程组的程序中很有用，这些线程组必须偶尔相互等待。

上面引用的 JavaDoc 中的示例解决了完全相同的问题。

* * *

一万个线程？确保您正在测试您的数据库，而不是您的 CPU 和内存（上下文切换开销可能很大）。您是否考虑过分布式模式下的[jmeter ？](/questions/tagged/jmeter "显示标记为“jmeter”的问题")

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T09:08:05.060

这可能不是您想要的，但您可以看看[CountDownLatch](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CountDownLatch.html)

> 一种同步辅助，允许一个或多个线程等待，直到在其他线程中执行的一组操作完成。

# javascript - Jquery 插件绑定更改事件

> ID：11627137
> 
> 赞同：1
> 
> 时间：2012-07-24T08:38:07.017
> 
> 标签：javascript, jquery, jquery-plugins

我刚刚创建了一个`selectbox`插件。它非常简单，我正在尝试修改它。

实际上它所做的是隐藏选择并`ul,li`在此之后添加一些`select`。

假设我有这些选项可用

```
<select id="test">
<option>1</option>
<option>2</option>
</select> 
```

现在我可以做

```
$("#test").selectBox(); //to make it my selectBox 
```

我有 setter 和 getter 选项

```
$("#test").selectBox("changeValue",["changed option",index]); 
```

在我的插件上，我正在使用方法..

```
var methods = {

init :function(options){},

changeValue:function(value){

//some code to change the value ...

}

}; 
```

我可以更改值，但如何捕捉`change`事件？

`change`意味着选择或`ul,li`

我真正需要的是

```
$("#test").selectBox(); //initialise

$("#test").change(function(){ //attach change event

//my codes.....

}); 
```

或者

```
$("#test").selectBox({
onChange : function(){

console.log("changed....");

}

}); 
```

希望问题现在很清楚。谢谢你。

**编辑：这里是 FIDDLE 链接[http://jsfiddle.net/jitheshkt/rBjqq/3/](http://jsfiddle.net/jitheshkt/rBjqq/3/) 请注意，我不是这方面的专家，只是试图做到这一点。**

**编辑：我在每个函数中编写了事件，所以我认为这将是问题所在。我改变了它并且运行良好**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T09:34:49.863

我想您正在使用[val()](http://api.jquery.com/val/)方法设置值。如果您使用 jQuery API/JavaScript 更改值，则不会触发 change 事件，因此您必须手动触发它，如下所示：

```
$('#test').change() 
```

或者

```
$('#test').trigger('change'); 
```

我希望这能解决问题！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T08:53:05.027

尝试这个...

```
$("#test").on('change',function(){ 
    // Write  your code here.
}); 
```

对于旧版本的 jQuery 使用这个

```
$("#test").change(function() {
    console.log('HI');
}); 
```

这应该按原样工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T08:48:13.113

您可以依赖于原始选择框的更改，而不是您自定义的选择框。

当您选择一个 li 项目时，您会更新原始选择框中的相应值，以便触发更改获取..

# ios5 - 如何在 iOS5 上访问 iPhone 通话记录历史

> ID：11627139
> 
> 赞同：0
> 
> 时间：2012-07-24T08:38:19.047
> 
> 标签：ios5, calllog, recent-screens

> **可能重复：**
> [使用 iPhone SDK 访问 iPhone 的通话记录](https://stackoverflow.com/questions/341622/accessing-the-iphones-call-log-with-the-iphone-sdk)

我目前正在做一个地址簿应用程序，我想要一个“最近”通话记录。我现在正在使用 Xcode 4.3.3 并在 iOS 5.1.0 和 5.1.1 中开发应用程序。在这个版本中，苹果似乎还没有支持 call_history.db，我看到一些关于这个问题的讨论。

您对通话历史记录有任何了解吗？我可以在 iOS 5 中应用它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:55:09.087

我认为在 iOS 5 中没有办法做到这一点。您的应用程序也可能被 Apple 拒绝。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:12:57.597

我认为在法律上是不可能的，你可以使用私有框架来做，但是你的申请会被拒绝

# asp.net-mvc-3 - ServiceStack：如何在写入响应之前捕获错误

> ID：11627141
> 
> 赞同：1
> 
> 时间：2012-07-24T08:38:25.737
> 
> 标签：asp.net-mvc-3, exception-handling, servicestack

我使用 ServiceStack 开发了一个 Rest Service。我的模型包含一个 DateTime 属性，问题从它开始。如果客户端发布/获取格式错误的日期值作为字符串，ServiceStack 会触发异常“字符串未被识别为有效的日期时间”。

```
Stack Trace: 

[FormatException: String was not recognized as a valid DateTime.]
   System.DateTime.Parse(String s, IFormatProvider provider, DateTimeStyles styles) +6364458
   ServiceStack.Text.Common.DeserializeBuiltin`1.<GetParseFn>b__b(String value) in C:\src\ServiceStack.Text\src\ServiceStack.Text\Common\DeserializeBuiltin.cs:58
   ServiceStack.ServiceModel.Serialization.StringMapTypeDeserializer.PopulateFromMap(Object instance, IDictionary`2 keyValuePairs) in C:\src\ServiceStack\src\ServiceStack.Common\ServiceModel\Serialization\StringMapTypeDeserializer.cs:79

[SerializationException: KeyValueDataContractDeserializer: Error converting to type: String was not recognized as a valid DateTime.]
   ServiceStack.ServiceModel.Serialization.StringMapTypeDeserializer.PopulateFromMap(Object instance, IDictionary`2 keyValuePairs) in C:\src\ServiceStack\src\ServiceStack.Common\ServiceModel\Serialization\StringMapTypeDeserializer.cs:95
   ServiceStack.ServiceHost.RestPath.CreateRequest(String pathInfo, Dictionary`2 queryStringAndFormData, Object fromInstance) in C:\src\ServiceStack\src\ServiceStack\ServiceHost\RestPath.cs:319
   ServiceStack.WebHost.Endpoints.RestHandler.GetRequest(IHttpRequest httpReq, IRestPath restPath) in C:\src\ServiceStack\src\ServiceStack\WebHost.Endpoints\RestHandler.cs:104
   ServiceStack.WebHost.Endpoints.RestHandler.ProcessRequest(IHttpRequest httpReq, IHttpResponse httpRes, String operationName) in C:\src\ServiceStack\src\ServiceStack\WebHost.Endpoints\RestHandler.cs:80
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +625
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +270 
```

我知道它是一个错误，我知道它一定是捕获但我想用我的错误代码和错误描述（人性化）来实现它。

任何建议都可能对如何在异常写入响应（DebeugMode=true）或服务向客户端触发异常之前捕获异常非常有帮助。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T16:06:59.630

添加您的自定义请求绑定器（或更高级的选项是在您的 DTO 上实现 IRequiresRequestStream）以使用您自己的绕过 ServiceStack 的反序列化。

有关这方面的更多信息包含在[ServiceStack 的 wiki 文档中](https://github.com/ServiceStack/ServiceStack/wiki/Serialization-deserialization)

# php - Symfony2 安全组件文档

> ID：11627142
> 
> 赞同：1
> 
> 时间：2012-07-24T08:38:33.730
> 
> 标签：php, symfony

我想知道安全组件文档是否有任何改进？如果属实，什么时候发布？

无论如何，您是否知道任何详细解释每个安全组件功能的教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:21:42.520

根据您的需要，您有不同的方式进入安全层：

*   **防火墙** => 帮助限制对页面和角色的访问
*   **身份验证提供者** => 最有用的：FosUserBundle。帮助管理用户和身份验证（如何创建身份验证令牌...）
*   **ACL** => 帮助在项目上创建一些权限（例如：你有一个实体评论。然后你创建一个新评论并让 ACL 拥有评论的所有权，让你以你想要的方式编辑这个项目）
*   **Voters** => 这是检查您是否可以访问 not 元素的部分

链接：
防火墙：[http](http://symfony.com/doc/current/book/security.html)
://symfony.com/doc/current/book/security.html 身份验证：[http](http://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html)
://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html ACL：[http://symfony。 com/doc/current/cookbook/security/acl.html](http://symfony.com/doc/current/cookbook/security/acl.html)
选民：[http ://symfony.com/doc/current/cookbook/security/voters.html](http://symfony.com/doc/current/cookbook/security/voters.html)

# jquery - 使用分隔符在屏幕上显示 DropDownList 用户选择 - 追加或加入？

> ID：11627149
> 
> 赞同：1
> 
> 时间：2012-07-24T08:39:03.513
> 
> 标签：jquery

此代码将在用户选择时在屏幕上显示来自 dropDowList 的用户选择。

现在我需要在每次选择之后放置一个分隔符，这样它们就不会一起运行。我试过追加和加入，但没有成功。

有人可以告诉我如何完成这个简单的任务吗？

```
$("#ServiceRequest_select").change(function() {
    var content = $("#ServiceRequest_select option:selected").text();
    $("TD#displayitem").text(content);
}); 
```

更新：不起作用的 Jquery 示例：
使用 Raminson 建议的代码`this`而不是 的结果`div#`是；Every item displays when a single item is selected and without seperation of items. 我想这是因为 jquery 在 Yii 的 PHP 中。感谢您尝试雷明森。

```
$("#ServiceRequest_select").change(function() { 
    var content = $(this).text(); // text of selected option
    $("#displayitem").append("<span>"+ content +"</span>"); // appends a new span 
}); 
```

在下一个示例中，使用`div#`而不是`this`将显示选定的项目，但它不会删除取消选择的项目，因此它将更改的选择添加到先前选择的下方。

```
$("#ServiceRequest_select").change(function() { 
    var content = $("#ServiceRequest_select option:selected").text();
    $("TD#displayitem").append("<span>"+ content +"</span>");
}); 
```

我已经尝试了变体，搜索了示例，但仍然需要**帮助来使用 serparator 在页面上显示用户选择/取消选择，例如`<br />`选择/取消选择？**天啊，我需要做脑部手术；我很高兴我没有尝试任何真正复杂的东西！:smile: 我仍然认为 Jquery 是 kewl！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:49:07.503

尝试这个：

```
$("#ServiceRequest_select").change(function() {
  var content = $(this).text(); // text of selected option
  $("#displayitem").append('<span class="new">'+ content +'</span>'); // appends a new span 
}); 
```

# codenameone - 在代号 one 中首次安装时执行操作

> ID：11627151
> 
> 赞同：2
> 
> 时间：2012-07-24T08:39:05.877
> 
> 标签：codenameone

我正在构建一个[代号为 one的应用程序](http://www.codenameone.com)

所以，我基本上想在用户第一次安装应用程序时发送一条短信。

所以我这样做。

1）检查“firstRUN”存储文件是否存在。

2）如果没有，请创建该文件并发送短信。如果是这样，只需启动应用程序。

到目前为止，一切都很好。

但现在的困境是：

如果用户已经安装了我的应用程序，并且他安装了我的应用程序的更新版本，android 会询问我的应用程序是否必须升级。现在如果用户说是：

1）我的应用程序升级然后启动 2）它检查存储文件“firstRUN”是否存在。在这种情况下，它确实存在，因为应用程序已经升级并且现有的存储文件没有被删除。

我想做的是，如果我的应用程序升级，我想删除该应用程序的现有存储文件。我该怎么做呢？

好的，我在这里做的对吗？有一个更好的方法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:03:06.977

无需检查文件是否存在，只需在文件中存储一个版本号，升级时根据版本号进行操作。

# iphone - UIView 未显示在 UIScrollView 中

> ID：11627152
> 
> 赞同：1
> 
> 时间：2012-07-24T08:39:16.333
> 
> 标签：iphone, objective-c, ios, uiscrollview, uiimageview

我目前正在动态地将 UIImage 添加到我的 UIScrollView 对象中，并且一切都按预期工作。我现在需要添加额外的功能（从互联网加载时图像中心的 UIActivityIndi​​cator 和下方的标签）所以我想为什么不创建一个自定义视图，其中包含我需要的所有这些布局是，然后将其加载到滚动视图中。但是我遇到了一个问题，当我将它添加到scrollView时，什么都没有出现。这是我所拥有的：

新闻视图控制器.m：

```
imageScrollView.contentSize = CGSizeMake(320*numberOfPages, 303);
pageControl.numberOfPages = numberOfPages;
dispatch_queue_t imageDownload = dispatch_queue_create("imageDownload", NULL);
__block NSData *temp;
    CustomImageView *customImageView = [[CustomImageView alloc] initWithFrame:CGRectMake(0, 0, 320, 303)];
    [imageScrollView addSubview:customImageView];
    [[customImageView activityIndicator] startAnimating];
    dispatch_async(imageDownload, ^{
        temp = [[NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://www.wlfarm.org/wp-content/uploads/2012/05/farm.jpg"]]retain];
        dispatch_async(dispatch_get_main_queue(), ^{
            customImageView.imageView.image = [[UIImage alloc] initWithData:temp];
            [[customImageView activityIndicator] stopAnimating];
            [customImageView setNeedsDisplay];
            customImageView.caption.text = @"HAHAHAHAHHAHA";
            [imageScrollView setNeedsDisplay];
            [temp release];
        });
    });

    dispatch_release(imageDownload); 
```

CustomImageView.h：

```
#import <UIKit/UIKit.h>

@interface CustomImageView : UIView
{
    IBOutlet UIImageView *imageView;
    IBOutlet UILabel *caption;
    IBOutlet UIActivityIndicatorView *activityIndicator;
}

@property (nonatomic, retain) IBOutlet UIImageView *imageView;
@property (nonatomic, retain) IBOutlet UILabel *caption;
@property (nonatomic, retain) IBOutlet UIActivityIndicatorView *activityIndicator;
@end 
```

自定义图像视图.m

```
#import "CustomImageView.h"  
@interface CustomImageView ()

@end

@implementation CustomImageView

@synthesize caption, imageView, activityIndicator;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

 - (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:    (UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

我包括我的 XIB 文件的屏幕截图，以及在模拟器上运行的程序。第一张图片在滚动视图中没有显示任何内容（使用我的自定义类进行的尝试），滚动视图的第二页是通过将 UIImageView 添加到 UIScrollView 进行的尝试（有效）。谁能指出我做错了什么？我不允许将自定义视图加载到 UIScrollView 中吗？谢谢你的帮助！

IB 截图 - [http://i.stack.imgur.com/gz9UL.png](http://i.stack.imgur.com/gz9UL.png)

iOS 模拟器没有带有 CustomView 的图像屏幕截图 - [http://i.stack.imgur.com/zhswq.png](http://i.stack.imgur.com/zhswq.png)

带有 UIImageView 屏幕截图的 iOS 模拟器图像 - [http://i.stack.imgur.com/97vmU.png](http://i.stack.imgur.com/97vmU.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:42:14.877

看起来好像`CustomImageView`是 on `UIViewController`， not `UIImageView`or的子类`UIView`。您***不能***像那样添加 a`UIViewController`作为子视图。将其更改为子类`UIView`，它应该可以工作。

要从 .nib 加载 a `UIView`，您需要像声明 .nib`IBOutlet`一样声明属性`UIViewController`。在 IB 中定义正确的自定义类并连接所有内容，包括基本视图。然后在您的自定义视图类中覆盖以下方法。

```
- (id)initWithFrame:(CGRect)frame {
    self = [super initWithFrame:frame];
    if (self) {
    // Initialization code.
    //
    [[NSBundle mainBundle] loadNibNamed:@"<NIB NAME HERE>" owner:self options:nil];
    [self addSubview:self.view];
    }
  return self;
} 
```

似乎您已将子类中的方法剪切并粘贴`UIViewController`到您的`UIView`子类中。首先删除您在 `@synthesize`和之间粘贴的所有方法`@end`。子`UIView`类需要不同的方法来从 .nib 加载，因此您需要覆盖上面显示的方法并使用代码行

`[[NSBundle mainBundle] loadNibNamed:@"<NIB NAME HERE>" owner:self options:nil];`

加载笔尖。

除了您关于连接基本视图的评论之外，我的意思是：

创建自定义类和 nib 文件后，打开 nib 并突出显示左侧的“文件所有者”，然后在右上角，选择左侧第三个图标，看起来像身份证或其他东西。在“类”框中，添加自定义类的名称。

在你的customClass中，添加一个`IBOutlet UIView`名为baseView的属性，并在根级别添加一个覆盖IB中视图的UIView，将这两者连接起来。然后在上面添加其他所有内容

你的代码现在看起来像这样：

CustomImageView.h

```
#import <UIKit/UIKit.h>

@interface CustomImageView : UIView
{
    IBOutlet UIView *baseView
    IBOutlet UIImageView *imageView;
    IBOutlet UILabel *caption;
    IBOutlet UIActivityIndicatorView *activityIndicator;
}
@property (nonatomic, retain) IBOutlet UIView *baseView;
@property (nonatomic, retain) IBOutlet UIImageView *imageView;
@property (nonatomic, retain) IBOutlet UILabel *caption;
@property (nonatomic, retain) IBOutlet UIActivityIndicatorView *activityIndicator;
@end 
```

自定义图像视图.m

```
#import "CustomImageView.h"  
@interface CustomImageView ()

@end

@implementation CustomImageView

@synthesize baseView, caption, imageView, activityIndicator;

- (id)initWithFrame:(CGRect)frame {
    self = [super initWithFrame:frame];
    if (self) {
    // Initialization code.
    //
    [[NSBundle mainBundle] loadNibNamed:@"<NIB NAME HERE>" owner:self options:nil];
    [self addSubview:self.baseView];
    }
  return self;
}

@end 
```

如果您在 IB 中将它们全部连接起来，它应该可以正常工作，只需记住添加 baseView

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:57:12.523

如前所述，`initWithNibName`属于控制器。
在我看来，你走错路了。

您有一个 ViewController 并想要添加一个 customView，以从 URLData 动态加载图像。

*您有 2 个选项：*
**选项 1：** 在 IB 中执行所有操作：
在 Interfacebuilder 中编辑/（或添加新的）ViewController 的 XIB 文件并添加您喜欢的视图。该文件的所有者是一个 UIViewController 类/子类。像以前一样做所有事情，除了在视图控制器中做。在您的 App 委托 initWithNibName 中，您的 ViewController 像这样

```
 self.viewController = [[testViewController alloc] initWithNibName:@"testViewController" bundle:nil]; 
```

如果您愿意，请初始化您自己的视图控制器，您希望将其推送并推送到堆栈中。

您做错了什么：您正在使用 Frame 初始化 customImageView，但笔尖不会自动加载。属性在那里，但笔尖不在。

如果您真的想要一个稳定的东西，请选择
**选项 2：以编程方式执行所有**操作（更容易、更易于理解且轻量级）：
从您的实现中，我们执行以下操作：

**新闻视图控制器.m**

像以前那样做！！！

**CustomImageView.h：**

```
#import <UIKit/UIKit.h>

@interface CustomImageView : UIView
{
    UIImageView *imageView;
    UILabel *caption;
    UIActivityIndicatorView *activityIndicator;
}

@property (nonatomic, retain) UIImageView *imageView;
@property (nonatomic, retain) UILabel *caption;
@property (nonatomic, retain) UIActivityIndicatorView *activityIndicator;
@end 
```

**自定义图像视图.m：**

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        caption = [[UILabel alloc] initWithFrame:CGRectMake(0, 250, 320, 50)];
        [caption setBackgroundColor:[UIColor greenColor]];
        imageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 320, 250)];
        [imageView setBackgroundColor:[UIColor blueColor]];
        activityIndicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
        self.activityIndicator.frame = CGRectMake(320/2-25, 460/2-25, 50, 50);
        [self.activityIndicator startAnimating];

        [self addSubview:self.caption];
        [self addSubview:self.imageView];
        [self addSubview:self.activityIndicator];
    }
    return self;
} 
```

然后做你以前做过的一切。那会做得更好

# c - 分析内存分配器的正确方法

> ID：11627155
> 
> 赞同：1
> 
> 时间：2012-07-24T08:39:23.537
> 
> 标签：c, memory, allocator

我编写了一个内存分配器，它（据说）比使用 malloc/free 更快。我已经编写了一小部分代码来测试它，但我不确定这是否是分析内存分配器的正确方法，谁能给我一些建议？

这段代码的输出是：

```
Mem_Alloc: 0.020000s
malloc: 3.869000s
difference: 3.849000s
Mem_Alloc is 193.449997 times faster. 
```

这是代码：

```
int i;
int mem_alloc_time, malloc_time;
float mem_alloc_time_float, malloc_time_float, times_faster;
unsigned prev;

// Test Mem_Alloc
timeBeginPeriod (1);
mem_alloc_time = timeGetTime ();

for (i = 0; i < 100000; i++) {
    void *p = Mem_Alloc (100000);
    Mem_Free (p);
}

// Get the duration
mem_alloc_time = timeGetTime () - mem_alloc_time;

// Test malloc
prev = mem_alloc_time; // For getting the difference between the two times
malloc_time = timeGetTime ();

for (i = 0; i < 100000; i++) {
    void *p = malloc (100000);
    free (p);
}

// Get the duration
malloc_time = timeGetTime() - malloc_time;
timeEndPeriod (1);

// Convert both times to seconds
mem_alloc_time_float = (float)mem_alloc_time / 1000.0f;
malloc_time_float = (float)malloc_time / 1000.0f;

// Print the results
printf ("Mem_Alloc: %fs\n", mem_alloc_time_float);
printf ("malloc: %fs\n", malloc_time_float);

if (mem_alloc_time_float > malloc_time_float) {
    printf ("difference: %fs\n", mem_alloc_time_float - malloc_time_float);
} else {
    printf ("difference: %fs\n", malloc_time_float - mem_alloc_time_float);
}

times_faster = (float)max(mem_alloc_time_float, malloc_time_float) /
    (float)min(mem_alloc_time_float, malloc_time_float);
printf ("Mem_Alloc is %f times faster.\n", times_faster); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:59:16.897

您正在测试的所有实现都缺少检查当前数据包的大小是否与之前炒过的相同：

```
if(size == prev_free->size) 
{
     current  = allocate(prev_free);
     return current; 
} 
```

在内存没有碎片之前，为内存创建高效的 malloc/free 函数是“微不足道的”。挑战是当您分配大量不同大小的内存并尝试释放一些然后分配一些没有特定顺序的内存时。

您必须检查您测试的库并检查该库针对哪些条件进行了优化。

*   去碎片化的内存处理效率
*   快速免费，快速 malloc（您可以制作任何一个 O(1) ），
*   内存占用
*   多处理器支持
*   重新分配

检查他们正在处理的现有实现和问题，并尝试改进或解决他们遇到的困难。试着弄清楚用户对图书馆的期望。

对此假设进行测试，而不仅仅是您认为重要的一些操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:23:58.067

没有人关心 [*] 你的分配器比他们的分配器快还是慢，在分配然后立即释放 100k 块 100k 次。这不是一种常见的内存分配模式（对于发生这种情况的任何情况，可能有比使用内存分配器更好的优化方法。例如，使用堆栈`alloca`或使用静态数组）。

人们非常关心你的分配器是否会加速他们的申请。

选择一个真实的应用程序。使用两种不同的分配器研究其在分配繁重的任务中的性能，并进行比较。然后研究更多分配繁重的任务。

仅举一个例子，您可以比较启动 Firefox 和加载 StackOverflow 首页的时间。您可以模拟网络（或至少使用本地 HTTP 代理），以从测试中删除大量随机变化。您还可以使用分析器来查看花费了多少时间`malloc`，从而查看任务是否分配繁重，但请注意“过度使用”之类的内容可能意味着并非所有内存分配成本都以`malloc`.

如果您编写分配器是为了加速您自己的应用程序，您应该使用您自己的应用程序。

需要注意的一件事是，人们通常在分配器中想要的是最坏情况下的良好行为。也就是说，如果您的分配器在大多数情况下比默认设置快 99.5%，那一切都很好，但如果内存碎片化时它的性能相对较差，那么您最终会失败，因为 Firefox 运行了几个小时并且然后无法再分配内存并摔倒。然后你就会意识到为什么默认设置会花费如此长时间来完成看似微不足道的任务。

[*] 这可能看起来很苛刻。没有人关心它是否苛刻;-)

# java - 保存 SWT Widget 对象的集合

> ID：11627156
> 
> 赞同：1
> 
> 时间：2012-07-24T08:39:26.837
> 
> 标签：java, collections, widget, swt

我尝试使用 XML 代码来创建 SWT 小部件。

我想先存储这些小部件，然后再将其添加到 GUI 组件中，因此我创建了一个列表来存储这些小部件，使用

```
List<Widget> widgets = new ArrayList<Widget>(); 
```

但是，如何在不指定其父组合的情况下创建此小部件？

```
Widget newWidget = new Button(null,SWT.RADIO); // Argument cannot be null 
```

在这里，我还不想将它添加到父组合中，所以我指定 null，但我无法通过。

如何在不添加到父组合的情况下创建这个小部件（因为我现在没有组合）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:47:28.600

好吧，正如[javadoc](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/Composite.html)所说，`IllegalArgumentException`当`parent`参数为空时抛出。您可以做的是将您的小部件放置在一些不可见的合成中，然后使用`org.eclipse.swt.widgets.Control.setParent(Composite parent)`将它们添加到不同的合成中。

# objective-c - 如何在 iOS 中不写登录发布模式？

> ID：11627174
> 
> 赞同：5
> 
> 时间：2012-07-24T08:40:20.643
> 
> 标签：objective-c, nslog

在我的记忆中，有一些代码可以让`NSLog`发布时不起作用。

我不想`NSLog`在我的代码中删除我的。它对调试模式有很大帮助。

所以我想找到一种可以将它们留在我的代码中的方法，并且在发布时也不会减慢应用程序的速度。

谢谢你的帮助~~

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T08:51:55.370

删除`NSLog(…)`版本中所有调用的常用方法是创建一个宏，该宏位于条件预处理器宏之间并编译为空，如下所示：

```
#ifdef RELEASE
# define NSLog(...) //remove loggin in production
#endif 
```

将此代码放在`.h`包含在所有其他文件中的文件中，例如前缀标头 ( )`Defines.h`中`#include`的 'd 。`.pch`

`RELEASE`应该是针对目标“构建设置”选项卡中的发布配置定义的预处理器宏。

![Apple LLVM 编译器 4.0 - 预处理](../Images/a65d7b6724afa7d2e06290d1ffb27261.png)

## 相关问题

*   [真的不应该在生产代码上使用 NSLog() 吗？](https://stackoverflow.com/questions/300673/is-it-true-that-one-should-not-use-nslog-on-production-code?lq=1)
*   [如何打印出方法名称和行号并有条件地禁用 NSLog？](https://stackoverflow.com/questions/969130/nslog-tips-and-tricks)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T08:48:11.520

您需要将 NSLog 替换为自定义宏。

举个例子

```
#ifdef DEBUG
#    define DLog(...) NSLog(__VA_ARGS__)
#else
#    define DLog(...) /* */
#endif
#define ALog(...) NSLog(__VA_ARGS__) 
```

在您的前缀 pch 文件中。

ALog 用于无论调试标志的状态如何都需要日志输出的情况，而 DLog 仅用于调试模式下的日志。

[资源](http://iphoneincubator.com/blog/debugging/the-evolution-of-a-replacement-for-nslog)

# ios - iphone 应用程序使用 aws ios sdk

> ID：11627177
> 
> 赞同：1
> 
> 时间：2012-07-24T08:40:27.800
> 
> 标签：ios, sdk, amazon-web-services

我们正在开发一个使用 Web 服务的 iOS（iPhone）应用程序。我们计划在 AWS 中托管我们的 Web 服务（ReSTful Web 服务）。最初我们计划使用`Restkit`或`ASIHttpRequest`库来调用 Web 服务。我们的网络服务包含`GET`, `POST`api 和一些用于设置用户个人资料照片的图片上传。我们还将视频、音频文件发送到数据库并通过 Web 服务访问这些文件。我们使用`JSON`作为我们的输出格式。

在网上搜索时，我们发现适用于 iOS 的 AWS SDK 是[这样](http://aws.amazon.com/sdkforios/)的。有人可以建议我们是否可以使用适用于 iOS 的 AWS 开发工具包来满足上述要求（GET/POST/Upload Photo/etc）？或者我们应该继续使用其他第三方库，如 Restkit 或 ASIHttpRequest。

请告知我们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:50:03.387

您可以同时使用两者`ASIHttpRequest`。您`Amazon SDK for IOS`希望为您的媒体文件使用 Amazon S3 服务（通过创建存储桶）。Amazon S3 便宜、快速且易于使用。当您下载 AWS 开发工具包时，您可以看到文件夹和适用于 ios`sample`的示例。`S3_Uploader`

例如，在我最新的应用程序中，用户将他们的照片上传到 Amazon S3 并对其他用户图片进行评论和投票等......我使用 AWS SDK 将图片上传到 Amazon S3 服务。在使用 AWS SDK 上传照片时，我将照片的 URL、路径保存在数据库中，并使用`ASIHttpRequest`,`POST`来更新位于另一台服务器中的 MYSQL 数据库。当我从我使用的服务器`JSON`和 AWS SDK 获取数据时。

所以如果我是你，我会使用 Amazon S3 来存储我的文件（照片、视频等），我会使用 Amazon EC2 或其他 Web 服务来存储数据库的其余部分。我假设您将数据保存在数据库中并通过`GET`方法`POST`进行交互。如果是这样，将媒体文件和数据库保存在不同的地方将是我的选择

# java - 我的培训师说 Java 创建了 380 个对象来运行一个简单的 Java 程序。对吗？

> ID：11627180
> 
> 赞同：4
> 
> 时间：2012-07-24T08:40:45.553
> 
> 标签：java, oop, object, conceptual

一位在我们公司接受过培训的 Java 培训师声称创建了 380 个对象来运行最简单的“Hello World”程序。这个对吗 ？我如何验证它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T08:43:17.200

> 这个对吗 ？

很可能。Java 每次都会启动很多基础架构和/或必须存在。

> 我如何验证它？

内存分析器。

没关系 - 大多数将是非常小的或基线基础设施元素。您现在发现的是，Java 不是很苗条，什么都不做。谁在乎？大多数 Java 程序并不是那么简单。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T08:45:51.247

**编辑**

很可能，要了解 JVM 所做的工作，您可以查看为执行简单程序而加载的类的数量。这些将是加载的类，而不是实例（为此，您需要分析您的程序），但这是获得总体思路的快速方法。

编写一个简单的 HelloWorld 类（即使使用空的 main 方法）

```
public class HelloWorld {

    public static void main(String [] arguments) {
    }

} 
```

编译它并使用`-verbose`选项执行它。JVM 会告诉你加载了哪些类

```
$ javac HelloWorld.java
$ java -verbose HelloWorld
[Opened /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Classes/classes.jar]
[Loaded java.lang.Object from    /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Classes/classes.jar]
[Loaded java.io.Serializable from /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Classes/classes.jar]
[Loaded java.lang.Comparable from /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Classes/classes.jar]
[Loaded java.lang.CharSequence from /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Classes/classes.jar]
[Loaded java.lang.String from /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Classes/classes.jar] 
```

如果您在 Unix 环境中，`grep`您可以计算行数`wc`

```
$ java -verbose HelloWorld | grep Loaded | wc -l
588 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T08:44:23.023

标准库类中的初始化代码创建对象。例如，您可以使用 VisualVM 验证这一点。

不清楚的是这是创建的对象总数，还是**保留**的对象总数（不符合 GC 条件），这是一个**非常重要的区别**。如果这是创建的对象总数，那么我只能说这是真正优化初始化过程的标志。380 个短暂的对象分配几乎没有。

# android - 操作系统 4.03 中的操作栏

> ID：11627181
> 
> 赞同：1
> 
> 时间：2012-07-24T08:40:47.480
> 
> 标签：android

我在我的应用程序中使用**ActionBar**。

我的**ActionBar上有三样东西**

1.  标识
2.  选项卡
3.  菜单

我面临一个问题，`Tab's`因为`Tab's`文本在下一行

例如：-我正在使用**音频**，所以它应该是单行的（即**音频**）

但在 OS 4.03 中，它看起来像：-

```
Aud

io 
```

有人可以帮我解决这个问题吗？

这里的代码添加标签

```
actionBar.addTab(actionBar.newTab()
                .setText(getInfoTabName())
                .setTabListener(new ActionBarTabListener<InfoFragment>(this, 
                        getInfoTabName(),InfoFragment.class, InfoFragment))); 
```

# c# - 可以使用 selenium webdriver 和 C# 完成 Android 应用程序自动化测试吗？

> ID：11627187
> 
> 赞同：1
> 
> 时间：2012-07-24T08:40:59.077
> 
> 标签：c#, android, selenium, webdriver

可以使用 selenium webdriver 和 C# 完成 Android 应用程序自动化测试吗？我正在学习android自动化测试。从互联网上的数据来看，我已经安装了 Android SDK 和 Eclipse。我只是想知道我是否可以使用 C# 编码而不是 Java 来做同样的事情？如果是的话，我在哪里可以找到更多详细信息以开始使用它。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:58:41.967

**为了更好更流畅地运行应用程序，我建议您进行手动测试，而不是任何现成的服务器工具**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T14:10:31.270

对的，这是可能的。您是否查看过有关 android 驱动程序的 selenium 文档？

如果没有，请点击此[链接](http://code.google.com/p/selenium/wiki/AndroidDriver)

# c# - 使用 LongListSelector 控件进行导航

> ID：11627188
> 
> 赞同：2
> 
> 时间：2012-07-24T08:41:00.637
> 
> 标签：c#, silverlight, windows-phone-7, longlistselector

我使用 mvvm 模式创建了一个 longlistselector。

我在不同的标题下创建了许多城市名称。

我想知道当用户选择或点击特定项目时如何导航到特定页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T09:54:19.153

您可以简单地为`tap`每个事件`ListBoxItem`（即包含`grid`// `canvas`whatever）或`SelectionChanged`列表本身的事件连接一个事件侦听器。

一个例子：

```
<ListBox:ItemTemplate>
    <DataTemplate>
        <Grid Tap="Tap_Handler">
            // .. your text or whatever goes here
        </Grid>
    </DataTemplate>
</ListBox:ItemTemplate> 
```

和代码隐藏的魔法：

```
public void Tap_Handler(object sender, GestureEventArgs e)
{
    var item = (sender as Grid).DataContext as City; // Given you have City objects in your list
    NavigationService.Navigate(new Uri("/View/City.xaml?id=" + item.Id, UriKind.Relative);
} 
```

应该是类似的，如果这不能正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T10:55:03.813

您可以从 订阅`SelectionChanged`事件`LongListSelector`。

```
longListSelector.SelectionChanged += new SelectionChangedEventHandler(longListSelector_SelectionChanged); 
```

# c# - 使用 TextChanged 事件禁用文本框

> ID：11627189
> 
> 赞同：1
> 
> 时间：2012-07-24T08:41:11.540
> 
> 标签：c#, textchanged, disabled-control

我使用的表单需要复制粘贴的 URL。我试图有一个 textChanged 事件，它会在粘贴后立即检查 url，告诉用户它是有效的还是无效的。发生这种情况时，我还希望能够锁定文本框，并显示一条消息，例如“正在处理...”。

问题在于下面的代码，文本框永远不会被禁用，程序将执行 checkUrl() 方法并且文本框永远不会被禁用，即使它是第一个执行的（我认为它是但事实上有一个函数调用正确在它下面是在弄乱某些东西或获得更高的优先级）。

如何在方法运行时使控件在视觉上被禁用？

```
private void urlTxtBx_TextChanged(object sender, EventArgs e)
{
    urlTxtBx.Enabled = false;

    checkUrl();

    urlTxtBx.Enabled = true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:19:13.147

我认为这是因为应用程序需要在禁用`TextBox`. 请尝试以下代码：

```
private void urlTxtBx_TextChanged(object sender, EventArgs e)
{
    urlTxtBx.Enabled = false;
    Application.DoEvents();
    checkUrl();
    urlTxtBx.Enabled = true;
} 
```

这将使 UI 得到更新。有关更多详细信息，请查看[此处](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.doevents.aspx)。

# asp.net - 以不显示文件扩展名和查询字符串的方式映射 url

> ID：11627191
> 
> 赞同：0
> 
> 时间：2012-07-24T08:41:21.900
> 
> 标签：asp.net, .net

例如，我想在 URL 中显示人名代替 id

```
http://MyWebSite/Doc/Home.aspx?UID=6
to
http://MyWebSite/Doc/Harry 
```

可以重写url吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:50:03.643

你真正需要的是使用[VirtualPathProvider](http://msdn.microsoft.com/en-us/library/system.web.hosting.virtualpathprovider.aspx)

它允许您控制如何映射虚拟资源。

请求`http://MyWebSite/Doc/Harry`将首先出现在您面前，如果您说路径是虚拟的（通过覆盖`FileExists`方法），asp.net 引擎将向您提供文件的内容（覆盖`GetFile`方法）。

这篇关于[创建自定义虚拟路径提供程序](http://www.codeproject.com/Articles/16848/Creating-Custom-Virtual-Path-Provider-in-ASP-Net-2)的代码项目文章应该可以指导您。它完全实现了您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T10:40:49.507

我已经解决了 System.Web.Routing 的问题...从[http://www.codeproject.com/Articles/37917/URL-rewriting-using-ASP-NET-routing](http://www.codeproject.com/Articles/37917/URL-rewriting-using-ASP-NET-routing)文章中获得了帮助

# c# - 在 sql 中更新表

> ID：11627196
> 
> 赞同：2
> 
> 时间：2012-07-24T08:41:32.307
> 
> 标签：c#, sql

```
ALTER PROCEDURE InsertHash
    @FileName varchar(max),
    @Hash  varchar(max)
AS
UPDATE tabletest 
SET deneme1 = @Hash, deneme2 =@FileName 
```

这是我的存储过程，我发送了一些数据

```
while (rdr.Read())
{
    string filename = @"\\" + rdr.GetString(3);
    filename = System.IO.Path.Combine(filename, rdr.GetString(2));
    filename = System.IO.Path.Combine(filename, rdr.GetString(1));
    computeHashh1 abc = new computeHashh1();
    Console.WriteLine(abc.computeHash(filename));
    SqlCommand myCommand2 = new SqlCommand("InsertHash", myConnection);
    myCommand2.CommandType = CommandType.StoredProcedure;
    SqlParameter param = new SqlParameter("@FileName", filename);
    myCommand2.Parameters.Add(param);
    SqlParameter param2 = new SqlParameter("@Hash", abc.computeHash(filename));
    myCommand2.Parameters.Add(param2);
} 
```

当我运行代码时它没有更新表，可能是什么问题，对于这样的坏问题我很抱歉，我对 sql 很陌生

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T08:43:16.753

**你不**使用的一件事`myCommand2`是......执行它：

```
myCommand2.ExecuteNonQuery(); 
```

好吧，实际上你也应该处理它......

```
while (rdr.Read())
{
    // ... blah
    using(var myCommand2 = new SqlCommand("InsertHash", myConnection))
    {
        // setup parameters etc
        myCommand2.ExecuteNonQuery();
    }
} 
```

或者，如果这看起来太多工作......一些“精致”的爱：

```
myConnection.Execute("InsertHash", new {
        FileName = filename,
        Hash = abc.computeHash(filename)
    }, commandType: CommandType.StoredProcedure); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T08:43:20.793

你还没有执行命令：

```
myCommand2.ExecuteNonQuery() 
```

# android - 将无需密钥的 Android 蓝牙与 PC 配对

> ID：11627204
> 
> 赞同：0
> 
> 时间：2012-07-24T08:42:26.410
> 
> 标签：android, windows, linux, bluetooth, communication

我的问题是我有一台 PC 主机来管理宽敞房间内的蓝牙连接，例如购物中心。而且我希望任何想要与提供服务的主机配对的客户都可以自动完成配对，而无需通过 PC 询问密码，因为这不会由任何人管理。

我真正的应用程序是一个管理这种连接的平台，我想将 BT 设备与它配对，但至少从 PC 端不要求任何密钥。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:57:28.270

**转到您的蓝牙设置并禁用安全选项，如果您在连接上找到类似该选项的身份验证，请取消选中它并重试**

# sum - 将节点分为三层并求和一个节点

> ID：11627209
> 
> 赞同：0
> 
> 时间：2012-07-24T08:42:45.827
> 
> 标签：sum, grouping, xslt-1.0

请遵循示例 xml 中的注释，它解释了我需要的所有内容，它有三个场景以相同的顺序检查输出 xml 中的每个场景。

输入 XML

```
 <!-- In the below xml there will be one ASNInDesc with multiple ASNInPO's 
        and each ASNInPO contains one ASNInCtn and each ASNInCtn contains one ASNInItem -->

<ASNInDesc>
   <asn_nbr>ASN-1</asn_nbr>

   <!-- In the below two ASNInPO's po_nbr is same container_id under ASNInCtn is same and item_id under
        ASNInItem is same. In this case two ASNInPO's has to be merged and two ASNInCtn's has to be merged
        into one tag(since the container_id is same) and two ASNInItem's has to be merged into one tag and unit_qty is to be added  -->

   <ASNInPO>
      <po_nbr>PO-1</po_nbr>
      <ASNInCtn>
         <container_id>CONTAINER-1</container_id>
         <ASNInItem>
            <item_id>ITEM-1</item_id>
            <unit_qty>2</unit_qty>
         </ASNInItem>
      </ASNInCtn>
   </ASNInPO>
   <ASNInPO>
      <po_nbr>PO-1</po_nbr>
      <ASNInCtn>
         <container_id>CONTAINER-1</container_id>
         <ASNInItem>
            <item_id>ITEM-1</item_id>
            <unit_qty>2</unit_qty>
         </ASNInItem>
      </ASNInCtn>
   </ASNInPO>

   <!-- In the below two ASNInPO's po_nbr is same container_id under ASNInCtn is same and item_id under
        ASNInItem is different. In this case two ASNInPO's has to be merged and two ASNInCtn's has to be merged into one tag and
        two different ASNInItem's for the two different items  -->

    <ASNInPO>
      <po_nbr>PO-2</po_nbr>
      <ASNInCtn>
         <container_id>CONTAINER-2</container_id>
         <ASNInItem>
            <item_id>ITEM-2</item_id>
            <unit_qty>3</unit_qty>
         </ASNInItem>
      </ASNInCtn>
   </ASNInPO>
   <ASNInPO>
      <po_nbr>PO-2</po_nbr>
      <ASNInCtn>
         <container_id>CONTAINER-2</container_id>
         <ASNInItem>
            <item_id>ITEM-3</item_id>
            <unit_qty>3</unit_qty>
         </ASNInItem>
      </ASNInCtn>
   </ASNInPO>

   <!-- In the below two ASNInPO's po_nbr is same container_id under ASNInCtn is different and item_id under
        ASNInItem is different. In this case two ASNInPO's has to be merged into one tag with
        two different ASNInCtn's each having their own ASNInItem  -->

   <ASNInPO>
      <po_nbr>PO-3</po_nbr>
      <ASNInCtn>
         <container_id>CONTAINER-3</container_id>
         <ASNInItem>
            <item_id>ITEM-3</item_id>
            <unit_qty>2</unit_qty>
         </ASNInItem>
      </ASNInCtn>
   </ASNInPO>
   <ASNInPO>
      <po_nbr>PO-3</po_nbr>
      <ASNInCtn>
         <container_id>CONTAINER-4</container_id>
         <ASNInItem>
            <item_id>ITEM-3</item_id>
            <unit_qty>2</unit_qty>
         </ASNInItem>
      </ASNInCtn>
   </ASNInPO>

</ASNInDesc> 
```

输出 XML

```
<?xml version = '1.0' encoding = 'UTF-8'?>
<ASNInDesc>
   <asn_nbr>ASN-1</asn_nbr>
  <!-- Scenerio-1 --> 
   <ASNInPO>
      <po_nbr>PO-1</po_nbr>
      <ASNInCtn>
         <container_id>CONTAINER-1</container_id>
         <ASNInItem>
            <item_id>ITEM-1</item_id>
            <unit_qty>4</unit_qty>
         </ASNInItem>        
      </ASNInCtn>
  </ASNInPO>
  <!-- Scenerio-2 -->  
  <ASNInPO>
      <po_nbr>PO-2</po_nbr>
      <ASNInCtn>
         <container_id>CONTAINER-2</container_id>
         <ASNInItem>
            <item_id>ITEM-2</item_id>
            <unit_qty>3</unit_qty>
         </ASNInItem>
         <ASNInItem>
            <item_id>ITEM-3</item_id>
            <unit_qty>3</unit_qty>
         </ASNInItem>        
      </ASNInCtn>
   </ASNInPO>
  <!-- Scenerio-3 -->   
   <ASNInPO>
      <po_nbr>PO-3</po_nbr>
      <ASNInCtn>
         <container_id>CONTAINER-3</container_id>
         <ASNInItem>
            <item_id>ITEM-3</item_id>
            <unit_qty>2</unit_qty>
         </ASNInItem>
      </ASNInCtn>
      <ASNInCtn>
         <container_id>CONTAINER-4</container_id>
         <ASNInItem>
            <item_id>ITEM-3</item_id>
            <unit_qty>2</unit_qty>
         </ASNInItem>
      </ASNInCtn>     
   </ASNInPO> 
```

我尝试过使用自己的 xsl，但无法处理所有场景。请帮我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T05:09:21.070

Here's a XSLT 1.0 stylesheet using [Muenchian grouping](http://www.jenitennison.com/xslt/grouping/muenchian.html). This is based on [my answer](https://stackoverflow.com/a/11771704/91822) to your other question.

This is the same approach, but with adjusted keys where we use a concatenation of the element's own id and the parent elements' id to look up elements for grouping. For example, `ASNInItem` elements are looked up using the following concatenated key: `concat(../../po_nbr, '|', ../container_id, '|', item_id)`. The choice of separator is not important, but you need to choose a character which does not appear in the ids.

Also the summing of unit quantities has been added.

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" 
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:output method="xml" indent="yes" encoding="UTF-8"/>

  <xsl:key name="ASNInPO" match="ASNInPO" 
           use="po_nbr"/>

  <xsl:key name="ASNInCtn" match="ASNInCtn" 
           use="concat(../po_nbr, '|', 
                       container_id)"/>

  <xsl:key name="ASNInItem" match="ASNInItem" 
           use="concat(../../po_nbr, '|', 
                       ../container_id, '|', 
                       item_id)"/>

  <xsl:template match="ASNInDesc">
    <xsl:copy>
      <xsl:copy-of select="asn_nbr"/>
      <xsl:apply-templates 
          select="ASNInPO[generate-id() =
                          generate-id(key('ASNInPO', 
                                          po_nbr)[1])]"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="ASNInPO">
    <xsl:copy>
      <xsl:copy-of select="po_nbr"/>
      <xsl:apply-templates 
          select="key('ASNInPO', po_nbr)/
                  ASNInCtn[generate-id() =
                           generate-id(key('ASNInCtn',
                                           concat(../po_nbr, '|', 
                                                  container_id))[1])]"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="ASNInCtn">
    <xsl:copy>
      <xsl:copy-of select="container_id"/>
      <xsl:apply-templates
          select="key('ASNInCtn',
                      concat(../po_nbr, '|', 
                             container_id))/
                  ASNInItem[generate-id() =
                            generate-id(key('ASNInItem', 
                                        concat(../../po_nbr, '|',
                                               ../container_id, '|',
                                               item_id))[1])]"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="ASNInItem">
    <xsl:copy>
      <xsl:copy-of select="item_id"/>
      <unit_qty>
        <xsl:value-of 
            select="sum(key('ASNInItem', 
                        concat(../../po_nbr, '|', 
                               ../container_id, '|', 
                               item_id))/unit_qty)"/>
      </unit_qty>
    </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

# java - 由于文件路径中有空格，在创建 xml 文件时出错

> ID：11627211
> 
> 赞同：1
> 
> 时间：2012-07-24T08:42:47.740
> 
> 标签：java, xml-parsing

我正在创建一个 xml 文件。这段代码没有问题。

```
TransformerFactory transformerFactory = TransformerFactory.newInstance();
Transformer transformer = transformerFactory.newTransformer();
DOMSource source = new DOMSource(doc);
String fileName="D:\\Doc\\File.xml";
StreamResult result = new StreamResult(new File(fileName));
transformer.transform(source, result); 
```

但是如果路径是

```
String fileName="D:\\My Doc\\File.xml"; 
```

然后它抛出错误。

```
XML-22110: (Fatal Error) Invalid StreamResult set in TransformerHandler. 
```

我认为文件路径中的空间造成了问题。如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:46:01.377

我确信空间*不是*问题。我刚刚运行了这段代码，它运行良好：

```
package io;

import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.PrintStream;

/**
 * FileWithSpace description here
 * @author Michael
 * @link
 * @since 7/24/12 5:03 AM
 */
public class FileWithSpace {
    public static void main(String[] args) {
        try {
            File dir = new File("J:\\Path With Spaces");
            boolean exists = dir.mkdirs();
            if (exists) {
                File f = new File("J:\\Path With Spaces\\test.txt");
                FileOutputStream fos = new FileOutputStream(f);
                PrintStream ps = new PrintStream(fos);
                ps.println("This is a test");
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

请注意，我确实在将文件写入目录之前创建了该目录。在你开始之前是否`C:\\My Docs`存在？如果没有，请添加该`mkdirs()`步骤，如图所示。如果我在创建`FileOutputStream`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-21T11:40:51.663

您需要将文件视为 FileOutputStream。如果您不这样做，文件名将被视为 URI。

```
Transformer transformer = TransformerFactory.newInstance().newTransformer();
Result output = new StreamResult( new FileOutputStream( absolutePath ) );
Source input = new DOMSource( XMLDoc );
transformer.transform(input, output); 
```

注意：也回答上述问题：问题是特定于 XML 转换器的。当您简单地创建一个用于写入的文件时，它不会发生。

# javascript - IE8 DOM 不反映 JS 的变化

> ID：11627212
> 
> 赞同：0
> 
> 时间：2012-07-24T08:42:55.940
> 
> 标签：javascript, dom, internet-explorer-8

我正在使用 javascript 对页面提供时已经存在的 HTML 元素进行一些简单的更改（例如更改 div 元素的背景图像、添加 ID 等）。这当然适用于除 IE8 之外的所有浏览器，其中更改似乎没有反映在 DOM 中，因此当我在 JS 运行后解析 dom 时，它无法找到我正在寻找的元素。该页面由标题中的 2 个 javascript 文件组成，1 个是我无法控制的外部第三方脚本，但它是添加 id 和背景图像的那个。第二个是我的，它在第一个之后调用，正在解析文档以查找具有新 ID 的特定元素。两者都是外部脚本，不在 HTML 源代码中内联。

据我所知：

*   竞争条件，2 个外部 Javascript 正在运行 1 个正在更改按钮并添加 id，另一个正在解析 dom 以查找特定元素，并且它们同时运行，第二个从未找到元素
*   进行更改后，IE8 无法正确刷新 DOM

我的 JS 在头中的第一个 JS 之后被调用，因此您会假设阻塞不会导致竞争条件，并且在我的 JS 运行之前元素将可用

我尝试过的事情：

*   我尝试在我的代码运行之前向正文添加一个类以强制刷新 DOM
*   我使用了 IE8 开发者工具，id 和元素不存在，但是如果我刷新几次它们就会神奇地出现（此时页面已经完全加载，我可以完全与之交互）

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T22:48:18.747

要记住的一件事是，当您创建多个`<script>`标签时，您无法保证它们的加载顺序，并且取决于它们的构建方式 - 它们通常会在加载后立即开始处理。

因此，如果您在 CDN 中包含一个本地文件和一个文件，例如：

```
<script type="text/javascript" 
        src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js">
</script>
<script type="text/javascript" src="/js/my_script.js"></script> 
```

您必须考虑到 CDN 文件的交付速度通常比托管文件快得多。在上述情况下，这可能是一件好事 - 因为`jQuery`在您的脚本之前加载到页面上可能是理想的 - 但是如果您正在加载不同的 3rd 方脚本，这可能依赖于*您的*脚本的 DOM 中存在的某些元素负责创建，您的脚本可能无法及时创建它们。

想象一下这个场景：

```
<script type="text/javascript" src="https://someurl/somelib.js">
    // This script parses the DOM and applies alterations to certain items
</script>
<script type="text/javascript" src="/js/my_script.js">
    // This script creates the DOM elements the other script is supposed to alter
</script> 
```

仅当本地文件 , 首先加载时，您的页面才会起作用`/js/my_script.js`- 这不太可能，因为其他文件是从专用 CDN 提供的。

当两个文件都在本地提供时，情况会更糟，例如：

```
<script type="text/javascript" src="/js/my_relied_upon_script.js"></script>
<script type="text/javascript" src="/js/my_reliant_script.js"></script> 
```

在这种情况下，这完全取决于您的本地 Web 服务器如何处理 HTTP 请求，以确定以什么顺序发生的事情。

所以 - 解决方案：

1) 让你的脚本都等待`document`'`onready`事件触发。因为此事件仅在文档完全加载后发生（包括完全加载其元素所需的任何其他 HTTP 请求，例如脚本、图像等） - 您可以保证脚本至少会等到完整的 DOM加载。

2) 使下级脚本等待触发事件。

使用 jQuery，一个示例可能类似于以下内容：

```
// Script #1
$(document).bind('ready', function () {
    $('#NeedsBackground').css({ background: 'url(/gfx/bg.png)' });

    var $wrapper = $('<div />').addClass('wrapper');
    $('#NeedsWrapper').wrap($wrapper);

    // Here's the magic that enforces loading.
    $(document).trigger('Script1Finished');
});

// Script #2
$(document).bind('Script1Finished', function () {
    $('.wrapper').css({ border: '1px solid #000' });
}); 
```

现在 - 请记住，上述转换是相当糟糕的，而不是您想要做的事情（例如内联 CSS 等，通常） - 但他们举了一个例子。因为`Script #2`要求`.wrapper`元素在运行之前存在，所以需要确保它在发生之后`Script #1`发生。

在这种情况下，我们通过`trigger`在文档上设置一个自定义事件来实现这一点，然后我们可以响应该事件 - 我们仅在 DOM 处于正确状态后触发该事件。

# javascript - 如何将 XML 节点转换为字符串？

> ID：11627219
> 
> 赞同：0
> 
> 时间：2012-07-24T08:43:13.780
> 
> 标签：javascript, jquery, xml

我有一个如下的xml字符串：

```
str = "<myxml><Node id="1" attr1="a" attr2="b" />
<Node id="2" attr1="a" attr2="b" /><Node id="3" attr1="a" attr2="b" />
<Node id="4" attr1="a" attr2="b" /></myxml>"

function returnNodeAsStr(str) {
...
...
}

if(returnNodeAsStr(str) == '<Node id="1" attr1="a" attr2="b" />') {
    alert("ok");
} 
```

如何编写函数以将节点作为字符串获取？（使警报执行）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:03:01.903

尝试使用这样的正则表达式

```
var str='<myxml><Node id="1" attr1="a" attr2="b" /><Node id="2" attr1="a" attr2="b" /><Node id="3" attr1="a" attr2="b" /><Node id="4" attr1="a" attr2="b" /></myxml>';

var match = str.match(/<Node.*?\/>/g);

if(match.length){
   for(var i=0; i< match.length; i++)
      alert(match[i]);              
} 
```

不需要额外的依赖项

PS您甚至可以通过正则表达式获取单个 attrs 值，尽管它会变得相当复杂

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:06:38.393

你可以试试这个：

```
var str = '<myxml><Node id="1" attr1="a" attr2="b" /><Node id="2" attr1="a" attr2="b" /><Node id="3" attr1="a" attr2="b" /><Node id="4" attr1="a" attr2="b" /></myxml>';​​​​​​​

var nodeArray = str.replace(/<\/?myxml>/g,'')    //removing root-> '<myxml>' tag
                .replace(/\/>\s*</g,'/>,<')      //replacing  '/><'  with '/>,<'
                .split(',');                     //spliting by comma  -------^ 
```

在此之后，您将拥有一个字符串数组`Node`，您可以将这些元素与字符串进行比较，例如：

```
if( nodeArray[0] == '<Node id="1" attr1="a" attr2="b" />'){
   //Do something
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T09:16:21.317

试试这个：

```
var str = '<myxml><Node id="1" attr1="a" attr2="b" /><Node id="2" attr1="a" attr2="b" /><Node id="3" attr1="a" attr2="b" /><Node id="4" attr1="a" attr2="b" /></myxml>';

function returnNodeAsStr(str) {
    var xmlDoc = $.parseXML(str),
        xml = $( xmlDoc ),
        item=[],
        results=[];
    $(xml).find('Node').each(function() {
        item.push("<Node");
        $.each(this.attributes, function(i, attrib){
            item.push(attrib.name+"=\""+attrib.value+"\"");
        });
        item.push("/>");
        results.push(item.join(" "));
        item=[];
    });
    return results;
}

var result=returnNodeAsStr(str);
console.log(result);
/*
["<Node id="1" attr1="a" attr2="b" />", 
"<Node id="2" attr1="a" attr2="b" />", 
"<Node id="3" attr1="a" attr2="b" />", 
"<Node id="4" attr1="a" attr2="b" />"] 
*/

if(result[0] == '<Node id="1" attr1="a" attr2="b" />') {
    alert("ok");
} 
```

# php - 函数中的 symfony 重定向

> ID：11627232
> 
> 赞同：2
> 
> 时间：2012-07-24T08:44:16.767
> 
> 标签：php, redirect, symfony, this

在我的项目中，我将框架用作 Symfony2。我想编写一个 php 函数，如果条件失败，它会重定向到默认页面。所以我的功能是这样的。

```
public function validate($value){
    if($value==null){
        return  $this->redirect(
             $this->generateUrl('home_page', array("message"=>""))
        ); 
    }   
} 
```

我这样调用函数。

```
$this->validate($value); 
```

问题是重定向不会发生。
请大家帮帮我。我不知道为什么它没有重定向。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T09:18:14.660

你必须这样称呼它：

```
$response = $this->validate($value);

if ($response instanceof \Symfony\Component\HttpFoundation\Response) {
    return $response;
} 
```

您可以抛出自定义重定向异常并编写一个侦听器来创建重定向响应，而不是返回响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T11:09:43.413

为了重定向，调用动作应该返回一个重定向响应。意思是，你应该 return`validate()`的回报。

```
return $this->validate($value); 
```

# excel - 如何过滤字符串文本单元格？

> ID：11627233
> 
> 赞同：2
> 
> 时间：2012-07-24T08:44:17.890
> 
> 标签：excel, excel-2007, excel-formula, excel-2003

我想在工作表的行数未知的情况下使用 SUMPROCUT 函数。

因此公式由*=SUMPRODUCT(--F:F,--G:G)*编写，在按下 Enter 键后*#VALUE!* 出现。

我意识到列名是字符串类型，但它们被包含在计算中，这可能是问题所在。
如何避免 SUMPRODUCT 函数中的字符串文本？或者你有更聪明的方法，请帮忙。提前致谢！

[更新 - 截图 & 原始要求]
客户问我一个公式来计算总和（F 列 * G 列），例如 10*470 + 5*350 + 5*5.5 + 25*180 + 4*48 + 6*15 + 80*4.5 + 70*5.44，我不知道他们的工作表中有多少行导致他们想要一个通用公式来处理所有的excel文件

![在此处输入图像描述](../Images/a62c1c409caa0bcbf61b571a8affc385.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:44:17.627

这是一个尝试：

```
=SUMPRODUCT($F2:INDEX($F:$F,MATCH(9.9999E+307,$F:$F)), $G2:INDEX($G:$G,MATCH(9.9999E+307,$G:$G))) 
```

前提是您的值在同一行结束。

一些解释：

*   `index()`可以返回一个引用以及一个值（我们在这里使用它作为引用）
*   9.9999E+307 是一个*技巧*- 基本上，如果你在一个数字范围内寻找一个大于任何数字的数字（& 9.9999E+307 大约是 excel 可以处理的最大数字，所以在大多数情况下都有效），`match()`将返回列表中最后一个数字的位置，这就是我们想要的

[在这里](http://www.mrexcel.com/forum/showthread.php?270775-sum-a-range-of-unknown-size)找到了灵感，但我发现这个技巧非常聪明和聪明:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:49:35.720

只需使用`=SUMPRODUCT(F:F,G:G)` （即，没有`--`）

# rest - REST API：创建部署引发错误 BadRequest

> ID：11627240
> 
> 赞同：0
> 
> 时间：2012-07-24T08:44:41.980
> 
> 标签：rest, azure

我们正在尝试访问下面所述的创建部署方法 [http://msdn.microsoft.com/en-us/library/windowsazure/ee460813](http://msdn.microsoft.com/en-us/library/windowsazure/ee460813) 我们已在 blob 中上传了包并浏览了配置文件。我们已经检查过尝试在 Azure 门户中手动上传包和配置文件，并且它工作正常。下面是我们为创建部署而编写的代码，其中“AzureEcoystemCloudService”是我们要在其中部署包的云服务名称。

```
 byte[] bytes = new byte[fupldConfig.PostedFile.ContentLength + 1];
        fupldConfig.PostedFile.InputStream.Read(bytes, 0, bytes.Length);
        string a = Encoding.UTF8.GetString(bytes, 0, bytes.Length);
        string base64ConfigurationFile = a.ToBase64();
        X509Certificate2 certificate = CertificateUtility.GetStoreCertificate  
        (ConfigurationManager.AppSettings["thumbprint"].ToString());

        HostedService.CreateNewDeployment(certificate, ConfigurationManager.AppSettings   
        ["SubscriptionId"].ToString(), "2012-03-01", "AzureEcoystemCloudService", 
        Infosys.AzureEcosystem.Entities.Enums.DeploymentSlot.staging,
        "AzureEcoystemDeployment", "http://shubhendustorage.blob.core.windows.net/shubhendu
        storage/Infosys.AzureEcoystem.Web.cspkg", "AzureEcoystemDeployment", 
        base64ConfigurationFile, true, false);   

    /// <summary>
    /// 
    /// </summary>
    /// <param name="certificate"></param>
    /// <param name="subscriptionId"></param>
    /// <param name="version"></param>
    /// <param name="serviceName"></param>
    /// <param name="deploymentSlot"></param>
    /// <param name="name"></param>
    /// <param name="packageUrl"></param>
    /// <param name="label"></param>
    /// <param name="base64Configuration"></param>
    /// <param name="startDeployment"></param>
    /// <param name="treatWarningsAsError"></param>
    public static void CreateNewDeployment(X509Certificate2 certificate, string 
    subscriptionId,string version, string serviceName, 
   Infosys.AzureEcosystem.Entities.Enums.DeploymentSlot deploymentSlot, string name, 
   string packageUrl, string label, string base64Configuration,
        bool startDeployment, bool treatWarningsAsError)
    {
        Uri uri = new Uri(String.Format(Constants.CreateDeploymentUrlTemplate, 
        subscriptionId, serviceName, deploymentSlot.ToString()));
        XNamespace wa = Constants.xmlNamespace;
        XDocument requestBody = new XDocument();

        String base64ConfigurationFile = base64Configuration; 
        String base64Label = label.ToBase64();
        XElement xName = new XElement(wa + "Name", name); 
        XElement xPackageUrl = new XElement(wa + "PackageUrl", packageUrl);
        XElement xLabel = new XElement(wa + "Label", base64Label);
        XElement xConfiguration = new XElement(wa + "Configuration", 
        base64ConfigurationFile);
        XElement xStartDeployment = new XElement(wa + "StartDeployment", 
        startDeployment.ToString().ToLower());
        XElement xTreatWarningsAsError = new XElement(wa + "TreatWarningsAsError", 
        treatWarningsAsError.ToString().ToLower()); 
        XElement createDeployment = new XElement(wa + "CreateDeployment"); 

        createDeployment.Add(xName); 
        createDeployment.Add(xPackageUrl);
        createDeployment.Add(xLabel); 
        createDeployment.Add(xConfiguration); 
        createDeployment.Add(xStartDeployment); 
        createDeployment.Add(xTreatWarningsAsError);
        requestBody.Add(createDeployment);
        requestBody.Declaration = new XDeclaration("1.0", "UTF-8", "no"); 
        XDocument responseBody;
        RestApiUtility.InvokeRequest(
            uri, Infosys.AzureEcosystem.Entities.Enums.RequestMethod.POST.ToString(), 
        HttpStatusCode.Accepted, requestBody, certificate, version, out responseBody);
    }
    /// <summary>
    /// A helper function to invoke a Service Management REST API operation.
    /// Throws an ApplicationException on unexpected status code results.
    /// </summary>
    /// <param name="uri">The URI of the operation to invoke using a web request.</param>
    /// <param name="method">The method of the web request, GET, PUT, POST, or 
    DELETE.</param>
    /// <param name="expectedCode">The expected status code.</param>
    /// <param name="requestBody">The XML body to send with the web request. Use null to   
    send no request body.</param>
    /// <param name="responseBody">The XML body returned by the request, if any.</param>
    /// <returns>The requestId returned by the operation.</returns>
    public static string InvokeRequest(
        Uri uri,
        string method,
        HttpStatusCode expectedCode,
        XDocument requestBody,
        X509Certificate2 certificate,
        string version,
        out XDocument responseBody)
    {
        responseBody = null;
        string requestId = String.Empty;
        HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(uri);
        request.Method = method;
        request.Headers.Add("x-ms-Version", version);
        request.ClientCertificates.Add(certificate);
        request.ContentType = "application/xml";
        if (requestBody != null)
        {
            using (Stream requestStream = request.GetRequestStream())
            {
                using (StreamWriter streamWriter = new StreamWriter(
                    requestStream, System.Text.UTF8Encoding.UTF8))
                {
                    requestBody.Save(streamWriter, SaveOptions.DisableFormatting);
                }
            }
        }
        HttpWebResponse response;
        HttpStatusCode statusCode = HttpStatusCode.Unused;
        try
        {
            response = (HttpWebResponse)request.GetResponse();
        }
        catch (WebException ex)
        {
            // GetResponse throws a WebException for 4XX and 5XX status codes
            response = (HttpWebResponse)ex.Response;
        }
        try
        {
            statusCode = response.StatusCode;
            if (response.ContentLength > 0)
            {
                using (XmlReader reader = XmlReader.Create(response.GetResponseStream()))
                {
                    responseBody = XDocument.Load(reader);
                }
            }
            if (response.Headers != null)
            {
                requestId = response.Headers["x-ms-request-id"];
            }
        }
        finally
        {
            response.Close();
        }
        if (!statusCode.Equals(expectedCode))
        {
            throw new ApplicationException(string.Format(
                "Call to {0} returned an error:{1}Status Code: {2} ({3}):{1}{4}",
                uri.ToString(),
                Environment.NewLine,
                (int)statusCode,
                statusCode,
                responseBody.ToString(SaveOptions.OmitDuplicateNamespaces)));
        }
        return requestId;
    }

  But every time we are getting the below error from the line

  response = (HttpWebResponse)request.GetResponse();

    <Error xmlns="http://schemas.microsoft.com/windowsazure" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
      <Code>BadRequest</Code>
      <Message>The specified configuration settings for Settings are invalid. Verify that the service configuration file is a valid XML file, and that role instance counts are specified as positive integers.</Message>

</Error> 
```

谢谢， 舒本杜

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T13:22:55.550

我对 azure rest API 的请求有问题。我发现 WebException 的阅读响应非常宝贵。

```
try
{
    //Call Azure REST API
}
catch(WebException ex)
{
    var err = new StreamReader(ex.Response.GetResponseStream()).ReadToEnd();

    Console.WriteLine(err);

    throw;
} 
```

这应该为您提供有关请求的潜在问题的足够信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-26T22:52:56.307

从 Azure SDK 2.2 开始，这里的文档是错误的，您不需要对配置字符串进行 base64 编码。因此，无需将所有 byte[] 转换为 base64，只需传入一个 UFT8 字符串即可。

# ruby-on-rails - 我应该将所有独角兽进程作为 www-data（非 root）运行吗？

> ID：11627241
> 
> 赞同：1
> 
> 时间：2012-07-24T08:44:44.520
> 
> 标签：ruby-on-rails, unicorn

我正在使用 Unicorn 和 Nginx 运行 Rails 3 应用程序。目前，Unicorns 以 root 身份运行，并且由于 unicorn.rb 中的这一行：

```
user "www-data" 
```

但我想知道我是否应该将所有 Unicorn 进程作为 www-data 运行。这样做会有什么问题吗？我正在使用文件套接字，因此打开端口（<1024）不是我遇到的问题。还有什么我应该注意的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:54:40.547

您不应该以 root 身份运行您的应用程序。这给了应用程序 root 权限，这反过来意味着如果你犯了错误并暴露了文件系统，攻击者可以毫不费力地获得 root 权限。

我避免以 www-data 或其他共享用户身份运行。相反，我为特定的应用程序创建了一个用户，并赋予他们自己独特的权限。就我而言，我在一台服务器上运行多个应用程序，这样可以在一个应用程序遭到破坏时增加一层保护。

以下是一些可能出错的好读物：[https ://jhalderm.com/pub/papers/dcvoting-fc12.pdf](https://jhalderm.com/pub/papers/dcvoting-fc12.pdf)

# zend-framework - Zend Navigation：为导航层次结构之外的操作定义活动分支

> ID：11627243
> 
> 赞同：0
> 
> 时间：2012-07-24T08:44:46.330
> 
> 标签：zend-framework, zend-navigation

我有一个在使用 Zend Navigation 时给我带来问题的持久性要求。一个简化的例子是一个系统，它有一个像“专辑”这样的数据库实体，用户需要一个“列表”、“添加”、“编辑”和“删除”页面。“列表”和“添加”页面包含在菜单系统中，但特定于特定“专辑”的“编辑”和“删除”页面从“列表”页面链接到。

问题是导航到“编辑”或“删除”页面会导致“相册”菜单分支处于非活动状态。显然这是因为这些页面不在导航层次结构中。

我在找：

1.  将这些页面放在导航层次结构中但不显示它们的好方法。
2.  一种从控制器中定义当前活动分支的方法，以便我可以保持菜单的相应分支处于活动状态。
3.  我没有想到的一种方法可以做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:42:32.273

好的，自从从上述潜在方法发布问题沿着路线 1 发布以来，找到了一种可能的解决方案。

创建菜单容器时使用“可见”属性，例如

```
 array(
      'label'      => 'Edit Vehicle',
      'action'     => 'update',
      'controller' => 'vehicle',
      'route'      => 'update-vehicle',
      'visible'    => false
    ),
    ... 
```

对于应该在菜单中的每个页面，以便生成适当的“活动”行为，但不适合显示。

然后在部分生成菜单测试

```
$page->isVisible 
```

并做出相应的反应。但这是规定的方法吗？

# mysql - 无法将 blob 从 MySQL 传输到 H2

> ID：11627248
> 
> 赞同：1
> 
> 时间：2012-07-24T08:44:58.147
> 
> 标签：mysql, playframework, blob, h2

我有一些使用 MAMP 从 MySQL 数据库导出的 blob 十六进制值。我试图将这些值添加到 H2 数据库中，但我不断收到错误消息：

```
 org.h2.jdbc.JdbcSQLException: Hexadecimal string with odd number of characters: "80273753912952185238922745508880797601482513992540829416944108482201678079823009423240796439787688076562876906583780517704249256776629049440054030707230103901187860416530898080584543691951511619479802824069658267005899514817053628822676904964354186008390099680162497341280836375590099576180828248580706583256766125057680523862652582731318422096302127828322568212884418137380647350895148022669223845592468192584084729728626393575544"; SQL statement:
INSERT INTO `StatisticsExplanationActivity` VALUES(2, '2012-06-01 11:36:36', '0', '2012-06-01 11:36:37', 1, 16, 0x00aced0005737200136a6176612e7574696c2e41727261794c6973747881d21d99c7619d03000149000473697a6578700000000577040000000a7400196d757365756d507265666572656e63655f6f7269656e74616c7400166d757365756d507265666572656e63655f70686f746f740014696465616c686f6c79646179735f75726261696e7400176e696768744576656e696e67486f6262795f6d757369637400106d75736963616c54617374655f706f7078) -- (2, '2012-06-01 11:36:36', '0', '2012-06-01 11:36:37', 1, 16, 80273753912952185238922745508880797601482513992540829416944108482201678079823009423240796439787688076562876906583780517704249256776629049440054030707230103901187860416530898080584543691951511619479802824069658267005899514817053628822676904964354186008390099680162497341280836375590099576180828248580706583256766125057680523862652582731318422096302127828322568212884418137380647350895148022669223845592468192584084729728626393575544) [90003-166]
    at org.h2.message.DbException.getJdbcSQLException(DbException.java:329)
    at org.h2.message.DbException.get(DbException.java:169)
    at org.h2.message.DbException.get(DbException.java:146)
    at org.h2.util.StringUtils.convertHexToBytes(StringUtils.java:990) 
```

相同的 INSERT 行适用于 MySQL。我在其他一些主题上看到，启用 H2 的多线程模式时可能会发生这种情况。我想试一试，但我不知道如何使用 Play 设置该参数！1.2.x。

编辑：尝试了 MULTI_THREADED 的东西，但仍然得到同样的错误。EDIT2：忘记发布我使用的十六进制数字：

```
0xaced0005737200136a6176612e7574696c2e41727261794c6973747881d21d99c7619d03000149000473697a6578700000000577040000000a7400196d757365756d507265666572656e63655f6f7269656e74616c7400166d757365756d507265666572656e63655f70686f746f740014696465616c686f6c79646179735f75726261696e7400176e696768744576656e696e67486f6262795f6d757369637400106d75736963616c54617374655f706f7078 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T15:00:50.473

H2 数据库将 解释`0x00aced0...`为数字（Java BigDecimal），然后尝试将 toString() 表示（十进制数字）转换为十六进制编码的二进制文件。

这当然不是您想要的，并且在大约 50% 的情况下它会失败。

因此，`0x00aced0...`您需要使用`'00aced0...'`（引用）而不是

# sql - 当快速加载选项打开并且最大插入提交大小设置为零时，SSIS如何重定向OLEDB目标中的行

> ID：11627250
> 
> 赞同：2
> 
> 时间：2012-07-24T08:45:07.787
> 
> 标签：sql, sql-server, ssis

我正在使用启用快速加载的 OLEDB 目标。在错误输出中有 3 个选项失败组件、忽略失败和重定向。如果我选​​择重定向它显示启用快速加载选项 OLEDB 无法重定向。是否有任何替代方法来处理错误这些类型的 Oledb 目的地（具有快速加载选项的 oledb）会发生这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T08:58:26.007

使用快速加载时，插入是使用单个事务进行的。因此，如果发生任何错误，则需要重定向整批行。因此，它不能`Redirect Option`与快速加载一起使用。为了重定向错误行，您需要使用其中一个`Table or view`或编写你的`sql statements`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-04T16:52:37.700

这篇文章[http://agilebi.com/jwelch/2008/09/05/error-redirection-with-the-ole-db-destination/](http://agilebi.com/jwelch/2008/09/05/error-redirection-with-the-ole-db-destination/)为这个问题提供了一个有趣的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-04T18:36:16.617

因为快速加载使用批量操作，所以不允许错误行重定向或忽略。您不应该使用快速加载来重定向错误。

# iphone - iOs 中的dismissModalViewController 问题

> ID：11627252
> 
> 赞同：0
> 
> 时间：2012-07-24T08:45:11.283
> 
> 标签：iphone, uiviewcontroller, navigation, presentmodalviewcontroller, dismiss

我有三个视图控制器，比如 A、B 和 C。我正在浏览这些视图，如下所示；

**A -**呈现-> **B** -呈现-> **C** -呈现-> **B**

从**B**，如果我解雇我想导航到**C**。但取而代之的是，现在它正在转移到**A**。我不能使用解除从**C**导航到**B**（一些内部问题）。那么我该如何解决这个问题呢？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:47:27.773

您遇到了以下限制`dismissModalViewController`：它将删除您的所有模态视图（[source](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/dismissModalViewControllerAnimated%3a)）：

> 如果您连续呈现几个视图控制器，从而构建一个呈现视图控制器的堆栈，则在堆栈中较低的视图控制器上调用此方法会关闭其直接子视图控制器以及堆栈上该子视图控制器上方的所有视图控制器。发生这种情况时，只有最顶层的视图会以动画方式消失；任何中间视图控制器都简单地从堆栈中删除。最顶层的视图使用其模态转换样式被解除，这可能与堆栈中其他视图控制器使用的样式不同。

您可以做的是`UINavigationController`根据您的要求使用一个简单的推/弹出控制器。

或者，您可以通过直接调用`addSubview`您的顶视图并确保它们覆盖整个屏幕并且正确保留/释放管理控制器来简单地显示由您拥有的各种控制器管理的视图（视图在您添加/删除时自动它到另一个视图）。

作为提示，您可以这样做：

1.  在你有的地方`presentModal...`，使用`addSubview`；

2.  在你有的地方`dismiss...`，使用`removeFromSuperview`；

3.  存储对您管理其视图的任何视图控制器的引用，就像我在`retain`/`strong`属性中建议的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T18:38:31.267

您好在“C”视图控制器中使用以下代码

```
[[[self presentingViewController] presentingViewController] dismissModalViewControllerAnimated:YES]; 
```

# jquery - ScriptManager.RegisterStartupScript 在 mozila 中不起作用

> ID：11627255
> 
> 赞同：0
> 
> 时间：2012-07-24T08:45:16.030
> 
> 标签：jquery, asp.net, jquery-ui, colorbox, scriptmanager

我正在尝试从 cs 文件后面的代码中打开 jquery colorbox。它可以在 chrome 中运行，但 mozila 或 Internet Explorer 无法正常工作

.aspx 代码：

```
 <script type="text/javascript">
        function OpenColorBox() {
            $.colorbox({
                opacity: 0.1,
                width: '350px',
                height: '350px',
                iframe: true,
                href: 'Test.aspx',
                onLoad: function () {

                    $('#cboxClose').remove();
                },
            });
        }

    </script>

<asp:Button ID="Button2" runat="server" Text="Save this Search Criteria" CssClass="srchBtn btnNew"
            OnClick="Call_Click" /> 
```

.cs 文件

```
 protected void Call_Click(object sender, EventArgs e)
  {
    ScriptManager.RegisterStartupScript(this,this.GetType(), "alert", "OpenColorBox(); return false;", true);
} 
```

我错过了什么???如果有人对此有任何想法，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T08:52:22.967

尝试这个

```
protected void Call_Click(object sender, EventArgs e)
{
  ScriptManager.RegisterStartupScript(
              ((Button)sender),
              ((Button)sender).GetType(),
              "alert", 
              "OpenColorBox();return false;",
              true);
} 
```

# java - 由于没有互联网连接而无法打开url时的android事件

> ID：11627258
> 
> 赞同：0
> 
> 时间：2012-07-24T08:45:40.870
> 
> 标签：java, android, eclipse, android-webview

我正在正确检查设备是否有互联网连接，但由于任何其他原因不适合我。当 webview 尝试打开网页但由于 Internet 连接而无法打开网页时，我需要捕获事件。现在，webview 显示标准浏览器页面“www.mypage.com 无法打开...”。可以为此处理哪个事件？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T08:48:19.110

尝试使用附加到 WebView 的 WebViewClient 来拦截事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T08:50:13.087

我通常检查发送到互联网连接的 req 给出什么响应，如果它失败了，我会抛出一个自定义的`Exception`。在我的`catch`块中，我会按照我想要的方式处理它，比如给出自定义消息，`alert`或者`Toast`.

我检查哪个网址无法打开的条件：

1.  服务器不可达（例如：响应码不是 200）
2.  没有网络连接
3.  连接超时
4.  格式错误的网址
5.  不支持的编码或内容类型
6.  任何其他例外

我使用自己的异常类对它们中的每一个进行不同的处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T08:48:47.377

您应该得到排序的连接超时响应。通常，webview 会显示默认结果，但您可以创建自己的处理程序来管理它。

# javascript - 在 Raphael JS 中开始绘制路径动画之前暂停

> ID：11627262
> 
> 赞同：2
> 
> 时间：2012-07-24T08:45:55.090
> 
> 标签：javascript, raphael

我有这个工作代码，用于在 Raphael JS 中绘制一条线：

```
var path1 = paper.path("M2 2").attr({"stroke": "#fff", "stroke-width":1});
// Here I need to wait 5 seconds
path1.animate({path: "M2 2L100 2"},1500); 
```

在我之前关于在执行代码之前等待一段时间的问题中，有人建议我在开始矩形的淡入淡出动画之前延迟这个解决方案：

[http://jsfiddle.net/beajL/](http://jsfiddle.net/beajL/)

，但是对于路径，我无法应用相同的原则。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T09:04:54.020

又是那个人。该方法仍然适用于矩形。

[http://jsfiddle.net/48ZDc/](http://jsfiddle.net/48ZDc/)

我注意到路径的颜色是白色的；猜这就是问题所在。

# iphone - Facebook 登录给我已经授权我的应用程序而不会自动返回应用程序

> ID：11627264
> 
> 赞同：1
> 
> 时间：2012-07-24T08:45:59.363
> 
> 标签：iphone, objective-c

我的应用程序应该使用 facebook 实现登录，但我注意到每次我想登录时，都会出现一个屏幕“你已经授权这个应用程序，按 OK 继续”，问题是我是否已经授权了 facebook 应该返回的应用程序自动没有出现我在其他应用程序中看到的这个屏幕？![在此处输入图像描述](../Images/1bc2bc66211106319822ce0ce1ff6a31.png) 但是当我在 Facebook.m 的这一行中设置 BOOL=NO [self authorizeWithFBAppAuth:BOOL safariAuth:BOOL]; 它的工作完美，即弹出屏幕“你已经授权这个应用程序”没有出现，但我需要这个功能并将 BOOL 设置为 YES。

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:03:13.217

您不想每次单击登录时都调用授权功能。检查会话是否存在并继续登录状态

```
if (![[delegate facebook] isSessionValid]) {

    [[delegate facebook] authorize:permissions];
} else {

    NSLog(@"seesion found");
[self apiFQLIMe];
} 
```

# iphone - 是否可以在不隐藏的情况下禁用键盘（UITextField）？

> ID：11627266
> 
> 赞同：2
> 
> 时间：2012-07-24T08:46:01.463
> 
> 标签：iphone, ios, uitextfield, disabled-input

我想在不隐藏的情况下禁用 UITextField 的键盘。可能吗？如果是这样，你能告诉我怎么做吗？

谢谢

卡什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T08:57:36.920

如果你实现了 uitextfield 的委托方法

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
   return NO;
} 
```

它不显示键盘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:57:03.637

我不相信 UIKeyboard 可以在不隐藏的情况下被禁用。

如果您想禁用用户与键盘的交互，您可以在现有窗口的顶部添加一个额外的 UIWindow。

通过用透明的 UIWindow 覆盖 UIKeyboard，用户将能够看到键盘，而无需与之交互。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T09:21:16.287

哈哈，我有一个非常非常丑陋的方法。您可以创建一个框架 = 键盘框架的视图。`[view setBackgroundColor:[UIColor clearColor]]; [self addSubviews:view];`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T11:17:59.183

我没有尝试，但这应该有效：

```
textField.inputView.userInteractionEnabled = NO; 
```

# java - 如何自动化鼠标和键盘？

> ID：11627272
> 
> 赞同：5
> 
> 时间：2012-07-24T08:46:38.217
> 
> 标签：java, awt, awtrobot

我可以编写一个java程序来自动化鼠标移动和点击吗？

就像，然后我将能够运行该程序，它会像有人控制机器一样工作..

我知道机器人课。这会是一个解决方案。欢迎任何想法......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-24T09:00:48.087

嗯，又是你。java.awt.Robot 是解决方案。自己试试。它易于使用。您可以自动化鼠标和键盘。

这是一个这样的类，它演示了 Robot 类的使用。我很久以前就写过了。我正在发布完整的代码。自己试试。。

```
package MyRobot;

import java.awt.Color;
import java.awt.GraphicsDevice;
import java.awt.GraphicsEnvironment;
import java.awt.Rectangle;
import java.awt.Robot;
import java.awt.image.BufferedImage;
import java.util.ArrayList;
import java.util.HashMap;
import javax.swing.JOptionPane;
import javax.swing.JPanel;

public class MyRobot {

Robot MYROBOT;
Color SCREEN[][];
int SCREEN_X;
int SCREEN_Y;
int WINDOW_X;
int WINDOW_Y;
int TYPE_DELAY = 0;
int MOUSE_DELAY = 0;
int SKILL = 0;
int X, Y;
int lastX, lastY;
int savedX, savedY;
int RED, GREEN, BLUE;
Color PIX_CLOSE_ACTIVE_OFF_MOUSE;
Color PIX_CLOSE_ACTIVE_ON_MOUSE;
HashMap<Character, Integer> KEYMAP;
ArrayList<Integer> randKeys;
GraphicsEnvironment grEnv;
GraphicsDevice grDevice;
JPanel drawPanel;
BufferedImage bufImg;
Rectangle rect;

public static void main(String[] args) {
    new MyRobot().go();
}

void go() {
    initialize();        
    gotoxy(100, 100);
}

void initialize() {
    grEnv = GraphicsEnvironment.getLocalGraphicsEnvironment();
    grDevice = grEnv.getDefaultScreenDevice();
    updateScreenInfo();
    setKeyMap();
    try {
        MYROBOT = new Robot();
    } catch (Exception e) {
        JOptionPane.showOptionDialog(null, "Can't build the robot!", "Error", -1, 1, null, null, this);
        System.exit(1);
    }
    X = SCREEN_X / 2;
    Y = SCREEN_Y / 2;
    //MYROBOT.mouseMove(X, Y);
    PIX_CLOSE_ACTIVE_OFF_MOUSE = new Color(184, 67, 44);
    PIX_CLOSE_ACTIVE_ON_MOUSE = new Color(210, 35, 2);
}

void updateScreenInfo() {
    SCREEN_X = grDevice.getDisplayMode().getWidth();
    SCREEN_Y = grDevice.getDisplayMode().getHeight();
    WINDOW_X = grEnv.getMaximumWindowBounds().width;
    WINDOW_Y = grEnv.getMaximumWindowBounds().height;
}

void setKeyMap() {
    KEYMAP = new HashMap<Character, Integer>();
    KEYMAP.put('q', 81);
    KEYMAP.put('w', 87);
    KEYMAP.put('e', 69);
    KEYMAP.put('r', 82);
    KEYMAP.put('t', 84);
    KEYMAP.put('y', 89);
    KEYMAP.put('u', 85);
    KEYMAP.put('i', 73);
    KEYMAP.put('o', 79);
    KEYMAP.put('p', 80);
    KEYMAP.put('a', 65);
    KEYMAP.put('s', 83);
    KEYMAP.put('d', 68);
    KEYMAP.put('f', 70);
    KEYMAP.put('g', 71);
    KEYMAP.put('h', 72);
    KEYMAP.put('j', 74);
    KEYMAP.put('k', 75);
    KEYMAP.put('l', 76);
    KEYMAP.put('z', 90);
    KEYMAP.put('x', 88);
    KEYMAP.put('c', 67);
    KEYMAP.put('v', 86);
    KEYMAP.put('b', 66);
    KEYMAP.put('n', 78);
    KEYMAP.put('m', 77);
    KEYMAP.put('1', 49);
    KEYMAP.put('2', 50);
    KEYMAP.put('3', 51);
    KEYMAP.put('4', 52);
    KEYMAP.put('5', 53);
    KEYMAP.put('6', 54);
    KEYMAP.put('7', 55);
    KEYMAP.put('8', 56);
    KEYMAP.put('9', 57);
    KEYMAP.put('0', 48);
    KEYMAP.put(' ', 32);

    randKeys = new ArrayList<Integer>();
    for (int j = 44; j < 94; j++) {
        randKeys.add(j);
    }
    randKeys.remove(randKeys.indexOf(58));
    randKeys.remove(randKeys.indexOf(60));
    randKeys.remove(randKeys.indexOf(62));
    randKeys.remove(randKeys.indexOf(63));
    randKeys.remove(randKeys.indexOf(64));
}

void typeHuman(String letters) {
    MYROBOT.setAutoDelay(TYPE_DELAY);
    char[] letter = letters.toCharArray();
    for (int i = 0; i < letter.length; i++) {
        System.out.print(letter[i]);
        try {
            if ((int) (Math.random() * SKILL) == (int) (Math.random() * SKILL) / 2) {
                int limit = (int) ((Math.random() * 3) + 1);
                for (int j = 0; j < limit; j++) {
                    int k = (int) (Math.random() * (randKeys.size() - 1));
                    manuPress(randKeys.get(k));
                }
                sleep(200);
                for (int j = 0; j < limit; j++) {
                    backspace();
                }
            }
            if ((Character.isLowerCase(letter[i])) || (Character.isDigit(letter[i]))) {
                MYROBOT.keyPress(KEYMAP.get(letter[i]));
                MYROBOT.keyRelease(KEYMAP.get(letter[i]));
            } else {
                letter[i] = Character.toLowerCase(letter[i]);
                MYROBOT.keyPress(16);
                MYROBOT.keyPress(KEYMAP.get(letter[i]));
                MYROBOT.keyRelease(KEYMAP.get(letter[i]));
                MYROBOT.keyRelease(16);
            }
        } catch (Exception e) {
            switch (letter[i]) {
                case '!': {
                    manuPressSHIFTED(49);
                    break;
                }
                case '@': {
                    manuPressSHIFTED(50);
                    break;
                }
                case '#': {
                    manuPressSHIFTED(51);
                    break;
                }
                case '$': {
                    manuPressSHIFTED(52);
                    break;
                }
                case '%': {
                    manuPressSHIFTED(53);
                    break;
                }
                case '^': {
                    manuPressSHIFTED(54);
                    break;
                }
                case '&': {
                    manuPressSHIFTED(55);
                    break;
                }
                case '*': {
                    manuPressSHIFTED(56);
                    break;
                }
                case '(': {
                    manuPressSHIFTED(57);
                    break;
                }
                case ')': {
                    manuPressSHIFTED(48);
                    break;
                }
                case '?': {
                    manuPressSHIFTED(47);
                    break;
                }
                case '/': {
                    manuPress(47);
                    break;
                }
                case ':': {
                    manuPressSHIFTED(59);
                    break;
                }
                case ';': {
                    manuPress(59);
                    break;
                }
                case '.': {
                    manuPress(46);
                    break;
                }
                case ',': {
                    manuPress(44);
                    break;
                }
                case '"': {
                    manuPressSHIFTED(222);
                    break;
                }
                case '\'': {
                    manuPress(222);
                    break;
                }
                case '[': {
                    manuPress(91);
                    break;
                }
                case ']': {
                    manuPress(93);
                    break;
                }
                case '{': {
                    manuPressSHIFTED(91);
                    break;
                }
                case '}': {
                    manuPressSHIFTED(93);
                    break;
                }
                case '\\': {
                    manuPress(92);
                    break;
                }
                case '|': {
                    manuPressSHIFTED(92);
                    break;
                }
                case '=': {
                    manuPressSHIFTED(61);
                    break;
                }
                case '+': {
                    manuPressSHIFTED(61);
                    break;
                }
                case '-': {
                    manuPress(45);
                    break;
                }
                case '_': {
                    manuPressSHIFTED(45);
                    break;
                }
                case '`': {
                    manuPress(192);
                    break;
                }
                case '~': {
                    manuPressSHIFTED(192);
                    break;
                }
                case '<': {
                    manuPressSHIFTED(44);
                    break;
                }
                case '>': {
                    manuPressSHIFTED(46);
                    break;
                }

            }
        }

    }
    System.out.println("");
}

void type(String letters) {
    MYROBOT.setAutoDelay(TYPE_DELAY);
    char[] letter = letters.toCharArray();
    for (int i = 0; i < letter.length; i++) {
        System.out.print(letter[i]);
        try {
            if ((Character.isLowerCase(letter[i])) || (Character.isDigit(letter[i]))) {
                MYROBOT.keyPress(KEYMAP.get(letter[i]));
                MYROBOT.keyRelease(KEYMAP.get(letter[i]));
            } else {
                letter[i] = Character.toLowerCase(letter[i]);
                MYROBOT.keyPress(16);
                MYROBOT.keyPress(KEYMAP.get(letter[i]));
                MYROBOT.keyRelease(KEYMAP.get(letter[i]));
                MYROBOT.keyRelease(16);
            }
        } catch (Exception e) {
            switch (letter[i]) {
                case '!': {
                    manuPressSHIFTED(49);
                    break;
                }
                case '@': {
                    manuPressSHIFTED(50);
                    break;
                }
                case '#': {
                    manuPressSHIFTED(51);
                    break;
                }
                case '$': {
                    manuPressSHIFTED(52);
                    break;
                }
                case '%': {
                    manuPressSHIFTED(53);
                    break;
                }
                case '^': {
                    manuPressSHIFTED(54);
                    break;
                }
                case '&': {
                    manuPressSHIFTED(55);
                    break;
                }
                case '*': {
                    manuPressSHIFTED(56);
                    break;
                }
                case '(': {
                    manuPressSHIFTED(57);
                    break;
                }
                case ')': {
                    manuPressSHIFTED(48);
                    break;
                }
                case '?': {
                    manuPressSHIFTED(47);
                    break;
                }
                case '/': {
                    manuPress(47);
                    break;
                }
                case ':': {
                    manuPressSHIFTED(59);
                    break;
                }
                case ';': {
                    manuPress(59);
                    break;
                }
                case '.': {
                    manuPress(46);
                    break;
                }
                case ',': {
                    manuPress(44);
                    break;
                }
                case '"': {
                    manuPressSHIFTED(222);
                    break;
                }
                case '\'': {
                    manuPress(222);
                    break;
                }
                case '[': {
                    manuPress(91);
                    break;
                }
                case ']': {
                    manuPress(93);
                    break;
                }
                case '{': {
                    manuPressSHIFTED(91);
                    break;
                }
                case '}': {
                    manuPressSHIFTED(93);
                    break;
                }
                case '\\': {
                    manuPress(92);
                    break;
                }
                case '|': {
                    manuPressSHIFTED(92);
                    break;
                }
                case '=': {
                    manuPressSHIFTED(61);
                    break;
                }
                case '+': {
                    manuPressSHIFTED(61);
                    break;
                }
                case '-': {
                    manuPress(45);
                    break;
                }
                case '_': {
                    manuPressSHIFTED(45);
                    break;
                }
                case '`': {
                    manuPress(192);
                    break;
                }
                case '~': {
                    manuPressSHIFTED(192);
                    break;
                }
                case '<': {
                    manuPressSHIFTED(44);
                    break;
                }
                case '>': {
                    manuPressSHIFTED(46);
                    break;
                }

            }
        }

    }
    System.out.println("");
}

void typeln(String letters) {
    type(letters);
    enter();
}

void typelnHuman(String letters) {
    typeHuman(letters);
    enter();
}

void getRun() {
    MYROBOT.keyPress(524);
    MYROBOT.keyPress(82);
    MYROBOT.keyRelease(82);
    MYROBOT.keyRelease(524);
    sleep(500);
}

void combinePress(int keyOne, int keyTwo) {
    MYROBOT.keyPress(keyOne);
    MYROBOT.keyPress(keyTwo);
    MYROBOT.keyRelease(keyTwo);
    MYROBOT.keyRelease(keyOne);
}

void combinePress(int keyOne, int keyTwo, int keyThree) {
    MYROBOT.keyPress(keyOne);
    MYROBOT.keyPress(keyTwo);
    MYROBOT.keyPress(keyThree);
    MYROBOT.keyRelease(keyThree);
    MYROBOT.keyRelease(keyTwo);
    MYROBOT.keyRelease(keyOne);
}

void altTab() {
    MYROBOT.keyPress(18);
    MYROBOT.keyPress(9);
    MYROBOT.keyRelease(9);
    MYROBOT.keyRelease(18);
}

void winD() {
    MYROBOT.keyPress(524);
    MYROBOT.keyPress(68);
    MYROBOT.keyRelease(68);
    MYROBOT.keyRelease(524);
}

void altF4() {
    MYROBOT.keyPress(18);
    MYROBOT.keyPress(115);
    MYROBOT.keyRelease(115);
    MYROBOT.keyRelease(18);
}

void enter() {
    MYROBOT.keyPress(10);
    MYROBOT.keyRelease(10);
}

void backspace() {
    MYROBOT.keyPress(8);
    MYROBOT.keyRelease(8);
}

void sleep(long duration) {
    try {
        Thread.sleep(duration);
    } catch (Exception e) {
    }
}

void click() {
    MYROBOT.mousePress(16);
    MYROBOT.mouseRelease(16);
}

void doubleClick() {
    click();
    click();
}

void clickNhold(boolean tof) {
    if (tof) {
        MYROBOT.mousePress(16);
    } else {
        MYROBOT.mouseRelease(16);
    }
}

void rightClick() {
    MYROBOT.mousePress(4);
    MYROBOT.mouseRelease(4);
}

void rightclickHold(boolean tof) {
    if (tof) {
        MYROBOT.mousePress(4);
    } else {
        MYROBOT.mouseRelease(4);
    }
}

void middleClick() {
    MYROBOT.mousePress(8);
    MYROBOT.mouseRelease(8);
}

void manuPress(int code) {
    MYROBOT.keyRelease(16);
    MYROBOT.keyPress(code);
    MYROBOT.keyRelease(code);
}

void manuPressSHIFTED(int code) {
    MYROBOT.keyPress(16);
    MYROBOT.keyPress(code);
    MYROBOT.keyRelease(code);
    MYROBOT.keyRelease(16);
}

void gotoxy(int goX, int goY) {
    lastX = X;
    lastY = Y;
    MYROBOT.setAutoDelay(MOUSE_DELAY);
    int initX = X;
    int initY = Y;
    if (goX == X) {
        if (goY > Y) {
            for (int i = Y; i <= goY; i++) {
                Y = i;
                MYROBOT.mouseMove(X, Y);
            }
        } else {
            for (int i = Y; i >= goY; i--) {
                Y = i;
                MYROBOT.mouseMove(X, Y);
            }
        }
    } else if (goX > X) {
        for (int i = 0; i <= (goX - initX); i++) {
            X = initX + i;
            Y = initY + ((i * (goY - initY)) / (goX - initX));
            MYROBOT.mouseMove(X, Y);
        }

    } else {
        for (int i = 0; i >= (goX - initX); i--) {
            X = initX + i;
            Y = initY + ((i * (goY - initY)) / (goX - initX));
            MYROBOT.mouseMove(X, Y);
        }
    }
}

void getRGB(Color pixel) {
    RED = pixel.getRed();
    GREEN = pixel.getGreen();
    BLUE = pixel.getBlue();
    System.out.println(RED + "," + GREEN + "," + BLUE);
}

void savePoint() {
    savedX = X;
    savedY = Y;
}

void captureScreen() {
    System.out.println("Capturing...");
    SCREEN = new Color[SCREEN_X][SCREEN_Y];
    for (int i = 0; i < SCREEN_X; i++) {
        for (int j = 0; j < SCREEN_Y / 2; j++) {
            SCREEN[i][j] = MYROBOT.getPixelColor(i, j);
        }
    }
    System.out.println("Capturing done");
}

void gotoPixel(Color pixel) {
    if (MYROBOT.getPixelColor(X, Y).getRGB() != pixel.getRGB()) {
        for (int i = SCREEN_X - 4; i >= 0; i--) {
            for (int j = 3; j < SCREEN_Y / 2; j++) {
                if ((MYROBOT.getPixelColor(i, j).getRGB() == pixel.getRGB())) {
                    gotoxy(i, j);
                    i = -1;
                    break;
                }
            }
        }
    }
    if (MYROBOT.getPixelColor(X, Y).getRGB() == pixel.getRGB()) {
        while (MYROBOT.getPixelColor(X, Y).getRGB() == pixel.getRGB()) {
            gotoxy((X - 1), Y);
        }
    }
}

void emergeFromPixel(Color pixel) {
    if (MYROBOT.getPixelColor(X, Y).getRGB() != pixel.getRGB()) {
        for (int i = SCREEN_X - 4; i >= 0; i--) {
            for (int j = 3; j < SCREEN_Y / 2; j++) {
                if ((MYROBOT.getPixelColor(i, j).getRGB() == pixel.getRGB())) {
                    MYROBOT.mouseMove(i, j);
                    X = i;
                    Y = j;
                    i = -1;
                    break;
                }
            }
        }
    }
}

void shift(char dir) {
    int initX = X;
    Color initPixel;
    dir = Character.toUpperCase(dir);
    switch (dir) {
        case 'L': {
            gotoxy((X - 8), Y);
            initPixel = MYROBOT.getPixelColor(X, Y);
            while (MYROBOT.getPixelColor(X, Y).getRGB() == initPixel.getRGB()) {
                gotoxy((X - 1), Y);
            }
            initX = X;
            for (int i = initX; i > initX - 20; i--) {
                if (MYROBOT.getPixelColor(i, Y).getRGB() == initPixel.getRGB()) {
                    gotoxy(i, Y);
                    while (MYROBOT.getPixelColor(X, Y).getRGB() == initPixel.getRGB()) {
                        gotoxy((X - 1), Y);
                    }
                    break;
                }
            }
            break;
        }
        case 'R': {
            initPixel = MYROBOT.getPixelColor(X, Y);
            while (MYROBOT.getPixelColor(X, Y).getRGB() == initPixel.getRGB()) {
                gotoxy((X + 1), Y);
            }
            initX = X;
            for (int i = initX; i < initX + 20; i++) {
                if (MYROBOT.getPixelColor(i, Y).getRGB() == initPixel.getRGB()) {
                    gotoxy(i, Y);
                    while (MYROBOT.getPixelColor(X, Y).getRGB() == initPixel.getRGB()) {
                        gotoxy((X + 1), Y);
                    }
                    break;
                }
            }
            gotoxy((X + 8), Y);
            break;
        }
    }
}

void emergeFromButton(String butName) {
    int tempDelay = TYPE_DELAY;
    TYPE_DELAY = 0;
    MYROBOT.setAutoDelay(TYPE_DELAY);
    butName = butName.toUpperCase();
    if (butName.equals("CLOSE")) {
        emergeFromPixel(PIX_CLOSE_ACTIVE_OFF_MOUSE);
    } else if (butName.equals("MAXIMIZE")) {
        emergeFromPixel(PIX_CLOSE_ACTIVE_OFF_MOUSE);
        shift('L');
    } else if (butName.equals("MINIMIZE")) {
        emergeFromPixel(PIX_CLOSE_ACTIVE_OFF_MOUSE);
        shift('L');
        shift('L');
    } else if (butName.equals("START")) {
        MYROBOT.mouseMove(20, SCREEN_Y - 10);
    }
    TYPE_DELAY = tempDelay;
    MYROBOT.setAutoDelay(TYPE_DELAY);
}

void gotoButton(String butName) {
    butName = butName.toUpperCase();
    if (butName.equals("CLOSE")) {
        if (MYROBOT.getPixelColor(X, Y).getRGB() != PIX_CLOSE_ACTIVE_ON_MOUSE.getRGB()) {
            gotoPixel(PIX_CLOSE_ACTIVE_OFF_MOUSE);
        }
    } else if (butName.equals("MAXIMIZE")) {
        gotoPixel(PIX_CLOSE_ACTIVE_OFF_MOUSE);
        shift('L');
    } else if (butName.equals("MINIMIZE")) {
        gotoPixel(PIX_CLOSE_ACTIVE_OFF_MOUSE);
        shift('L');
        shift('L');
    } else if (butName.equals("START")) {
        gotoxy(20, SCREEN_Y - 10);
    }
}

void catchTitleBar() {
    gotoButton("CLOSE");
    gotoxy(X - 150, Y);
}

void pressKey(String keyName) {
    keyName = keyName.toUpperCase();
    if (keyName.equals("ESC")) {
        manuPress(27);
    }
}

void closeAllWindows() {
    while ((MYROBOT.getPixelColor(65, SCREEN_Y - 35).getRed() > 213) && (MYROBOT.getPixelColor(65, SCREEN_Y - 35).getGreen() > 220) && (MYROBOT.getPixelColor(65, SCREEN_Y - 35).getBlue() > 228)) {
        altTab();
        gotoButton("CLOSE");
        sleep(100);
        click();
        sleep(50);
    }
}

void quickCloseAllWindows() {
    while ((MYROBOT.getPixelColor(65, SCREEN_Y - 35).getRed() > 213) && (MYROBOT.getPixelColor(65, SCREEN_Y - 35).getGreen() > 220) && (MYROBOT.getPixelColor(65, SCREEN_Y - 35).getBlue() > 228)) {
        winD();
        sleep(100);
        altTab();
        altF4();
        type("n");
    }
}

void getNotepad() {
    int saveDelay = TYPE_DELAY;
    TYPE_DELAY = 0;
    MYROBOT.setAutoDelay(0);
    MYROBOT.keyPress(524);
    MYROBOT.keyPress(82);
    MYROBOT.keyRelease(82);
    MYROBOT.keyRelease(524);
    sleep(200);
    typeln("notepad");
    sleep(500);
    TYPE_DELAY = saveDelay;
    MYROBOT.setAutoDelay(TYPE_DELAY);
}

void closeActiveWindow() {
    gotoButton("CLOSE");
    click();
    type("n");
}

void openMyComputer() {
    gotoxy(50, 50);
    doubleClick();
}

void lockMouse() {
    Thread lockMouse = new Thread(new Runnable() {

        @Override
        public void run() {
            while (true) {
                MYROBOT.mouseMove(X, Y);
                sleep(100);
            }
        }
    });
    lockMouse.start();
} 
```

}

你欠我...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T08:55:14.153

机器人课程可以很好地完成您想做的事情。[在这里](http://www.developer.com/java/other/article.php/2212401/Introduction-to-the-Java-Robot-Class-in-Java.htm)查看本教程

您还可以查看其他自动化测试框架。想到的一个是[testComplete](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&sqi=2&ved=0CEUQFjAA&url=http://smartbear.com/products/qa-tools/automated-testing-tools&ei=y2IOUN_ODoeC2wXCsIGgBg&usg=AFQjCNEuuz3bt7rOiMPGfi_sitMULUCCQw)。您是否尝试将其用于 UI 测试目的？

# c# - 为什么这个事务范围不起作用？

> ID：11627273
> 
> 赞同：2
> 
> 时间：2012-07-24T08:46:39.370
> 
> 标签：c#, sql-server, transactions, transactionscope

第一次玩交易，我想我可以让下面的代码工作：

```
namespace database
{
    class Program
    {
        static string connString = "Server=ServerName;Database=Demo;Trusted_Connection=True;";
        SqlConnection connection = new SqlConnection(connString);
        static Random r = new Random();

        static void Add()
        {
            try
            {
                Thread.Sleep(r.Next(0, 10));
                using (var trans = new TransactionScope())
                {
                    using (var conn = new SqlConnection(connString))
                    {
                        conn.Open();

                        var count = (int)new SqlCommand("select balance from bank WITH (UPDLOCK) where owner like '%Jan%'", conn).ExecuteScalar();
                        Thread.Sleep(r.Next(0, 10));
                        SqlCommand cmd = new SqlCommand("update bank set balance = " + ++count + "where owner like '%Jan%'", conn);
                        cmd.ExecuteNonQuery();
                    }
                    trans.Complete();
                }
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.Message);
            }
        }

        static void Remove()
        {
            try
            {
                Thread.Sleep(r.Next(0, 10));
                using (var trans = new TransactionScope())
                {
                    using (var conn = new SqlConnection(connString))
                    {
                        conn.Open();

                        var count = (int)new SqlCommand("select balance from bank WITH (UPDLOCK) where owner like '%Jan%'", conn).ExecuteScalar();
                        Thread.Sleep(r.Next(0, 10));
                        SqlCommand cmd = new SqlCommand("update bank set balance = " + --count + "where owner like '%Jan%'", conn);
                        cmd.ExecuteNonQuery();

                    }
                    trans.Complete();
                }
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.Message);
            }
        }

        static void Main(string[] args)
        {
            for (int i = 0; i < 5; i++)
            {
                Thread t = new Thread(new ThreadStart(Add));
                t.Start();
            }
            for (int i = 0; i < 5; i++)
            {
                Thread t = new Thread(new ThreadStart(Remove));
                t.Start();
            }
            Console.ReadLine();
        }
    }
} 
```

我假设在 100 次加法和 100 次减法之后，我的 balane 将与我的起点相同 - 100，但是每次运行脚本时它都会上下变化。即使隔离级别可序列化。谁能告诉我为什么？o_o

**编辑**：将连接打开和关闭移动到事务范围内。现在的问题是我得到*“事务（进程 ID XX）在锁定资源上与另一个进程死锁，并已被选为死锁受害者。重新运行事务”*

* * *

就像 Marc Gravell 所说：将连接放在事务范围内并将 UPDLOCK 添加到选择查询中，并结合将隔离级别更改为可重复读取就可以了 :)

```
 static void Add()
        {
            try
            {
                Thread.Sleep(r.Next(0, 10));
                using (var trans = new TransactionScope(TransactionScopeOption.Required, new TransactionOptions() { IsolationLevel = IsolationLevel.RepeatableRead }))
                {
                    using (var conn = new SqlConnection(connString))
                    {
                        conn.Open();

                        var count = (int)new SqlCommand("select balance from bank WITH (UPDLOCK) where owner like '%Jan%'", conn).ExecuteScalar();
                        Thread.Sleep(r.Next(0, 10));
                        SqlCommand cmd = new SqlCommand("update bank set balance = " + ++count + "where owner like '%Jan%'", conn);
                        cmd.ExecuteNonQuery();
                    }
                    trans.Complete();
                }
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.Message);
            }
        } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T09:02:16.943

1：目前`TransactionScope`可能是多余的和未使用的；尝试更改事务以包装连接，而不是相反（哦，并使用`using`）：

```
using (var trans = new TransactionScope(TransactionScopeOption.Required,
      new TransactionOptions() { IsolationLevel = IsolationLevel.Serializable }))
using (var conn = new SqlConnection(connString))
{
    conn.Open();
    //...
    trans.Complete();
} 
```

这样，连接**应该在事务中正确登记**（如果发生不好的事情会被正确清理）

**我认为以上是主要问题**；即不参与交易。这意味着可能会丢失更改，因为读/写操作实际上并未提升到更高的隔离级别。

2：但是，如果你自己这样做，我希望你会看到死锁。为了*避免*死锁，如果你知道你要更新，你可能想要使用`(UPDLOCK)`它`select`- 这将在开始时获取一个写锁，这样如果有一个竞争线程你会得到一个块而不是死锁。

需要明确的是，这种死锁情况是由以下原因引起的：

*   线程 A 读取行，获得读锁
*   线程 B 读取行，获得读锁
*   线程 A 尝试更新行，并被 B 阻塞
*   线程 B 尝试更新行，并被 A 阻塞

添加`UPDLOCK`，这变为：

*   线程 A 读取行，获得写锁
*   线程 B 尝试读取该行，并被 A 阻塞
*   线程 A 更新行
*   线程A完成事务
*   线程 B 能够继续，读取行，获得写锁
*   线程 B 更新行
*   线程 B 完成事务

3：但是查询做一个微不足道的更新是愚蠢的；最好只是在不选择的情况下发布就地更新，即`update bank set balance = balance + 1 where ...`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T09:17:33.687

您必须打开块*内*的连接`TransactionScope`。

代替

```
var conn = new SqlConnection(connString);
conn.Open();
using (var trans = new TransactionScope(TransactionScopeOption.Required, new TransactionOptions() { IsolationLevel = IsolationLevel.Serializable }))
{ 
    // do stuff
} 
```

像这样使用它

```
using (var trans = new TransactionScope(TransactionScopeOption.Required, new TransactionOptions() { IsolationLevel = IsolationLevel.Serializable }))
using (var conn =  new SqlConnection(connString))
{ 
    conn.Open();
    // do stuff
} 
```

通过这种方式打开连接会自动将其`TransactionScope`作为轻量级事务加入。

您可以随时查看[示例](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)。

# c# - 同时读取和写入文件

> ID：11627276
> 
> 赞同：9
> 
> 时间：2012-07-24T08:46:46.753
> 
> 标签：c#, file

对于使用文件作为公司设备预订的某种全局存储的应用程序，我需要一种读取和写入文件的方法（或锁定文件、读取文件、写入文件和解锁文件）。一个小代码片段将说明我的意思：

```
FileStream in = new FileStream("storage.bin", FileMode.Open);
//read the file
in.Close();

//!!!!!
//here is the critical section since between reading and writing, there shouldnt
//be a way for another process to access and lock the file, but there is the chance
//because the in stream is closed
//!!!!!
FileStream out = new FileStream("storage.bin", FileMode.Create);
//write data to file
out.Close(); 
```

这应该得到这样的东西

```
LockFile("storage.bin");
//read from it...
//OVERwrite it....
UnlockFile("storage.bin"); 
```

该方法应该是绝对安全的，因为程序应该同时在 2000 台设备上运行

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-24T08:52:59.987

简单地保持`FileStream`具有独占（非共享）访问权限的打开将阻止其他进程访问该文件。这是打开文件进行读/写访问时的默认设置。

您可以通过截断它来“覆盖”您当前打开的文件。

所以：

```
using (var file = File.Open("storage.bin", FileMode.Open))
{
    // read from the file

    file.SetLength(0); // truncate the file

    // write to the file
} 
```

> 该方法应该是绝对安全的，因为程序应该同时在 2000 台设备上运行

根据您写入文件的频率，这可能会成为一个瓶颈。您可能想对此进行测试以了解它的可扩展性。

此外，如果其中一个进程试图与另一个进程同时对文件进行操作，`IOException`则会抛出 an 。没有真正的“等待”文件的方法，因此您可能希望以更有序的方式协调文件访问。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T08:59:08.550

您需要一个单独的流，为读取和写入而打开。

```
FileStream fileStream = new FileStream(
      @"c:\words.txt", FileMode.OpenOrCreate, 
      FileAccess.ReadWrite, FileShare.None); 
```

或者你也可以试试

```
static void Main(string[] args)
    {
        var text = File.ReadAllText(@"C:\words.txt");
        File.WriteAllText(@"C:\words.txt", text + "DERP");
    } 
```

根据[http://msdn.microsoft.com/en-us/library/system.io.fileshare(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/system.io.fileshare(v=vs.71).aspx)

```
FileStream s2 = new FileStream(name, FileMode.Open, FileAccess.Read, FileShare.None); 
```

您需要传入 None 的 FileShare 枚举值才能在 FileStream 构造函数重载上打开：

```
fs = new FileStream(@"C:\Users\Juan Luis\Desktop\corte.txt", FileMode.Open, 
    FileAccess.ReadWrite, FileShare.None); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-24T17:21:11.403

我最终编写了这个助手类来做到这一点：

```
public static class FileHelper
{
    public static void ReplaceFileContents(string fileName, Func<String, string> replacementFunction)
    {
        using (FileStream fileStream = new FileStream(
                fileName, FileMode.OpenOrCreate,
                FileAccess.ReadWrite, FileShare.None))
        {
            StreamReader streamReader = new StreamReader(fileStream);
            string currentContents = streamReader.ReadToEnd();
            var newContents = replacementFunction(currentContents);
            fileStream.SetLength(0);
            StreamWriter writer = new StreamWriter(fileStream);
            writer.Write(newContents);
            writer.Close();
        }
    }
} 
```

它允许您传递一个函数，该函数将获取现有内容并生成新内容，并确保在发生此更改时文件不会被其他任何内容读取或修改

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T09:03:12.727

我认为您只需要在重载的 Open 方法中使用[FileShare.None](http://msdn.microsoft.com/en-us/library/5h0z48dh.aspx)标志。

```
file = File.Open("storage.bin", FileMode.Open, FileShare.None); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-24T08:52:21.487

您可能正在寻找[FileStream.Lock](http://msdn.microsoft.com/en-us/library/system.io.filestream.lock)和[FileStream.Unlock](http://msdn.microsoft.com/en-us/library/system.io.filestream.unlock)

# java - 运行 java helloworld

> ID：11627279
> 
> 赞同：2
> 
> 时间：2012-07-24T08:46:59.133
> 
> 标签：java

我试着用谷歌搜索这个，去了 oracle.com 并阅读了这个论坛上与此相关的所有问题。我写了一个简单的“Helloworld”程序

```
package helloworld;

public class Helloworld {
    public static void main(String[] args) {

        System.out.println("Hello World!");
    }
} 
```

NetBeans 将源代码编译成一个`.class`文件。我将该文件移动到`C:\MyJava`

我尝试通过`C:\MyJava> java -cp . Helloworld`所有可能的变化来运行它。我不断得到`NoClassDefFoundError: Helloworld (wrong name: helloworld/Helloworld)`.

确保;确定。有一个几乎完全一样的问题（“错误名称”的差异）。该问题的解决方案在我的情况下不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T08:51:39.057

您收到“错误名称”错误，因为您的课程在 package 中`helloworld`。Java 希望您在命令行上提供完全限定的类名：

```
C:\MyJava> java -cp . helloworld.Helloworld 
```

目录结构必须与包结构匹配。这意味着您应该有一个`C:\MyJava\helloworld`包含类文件的目录`Helloworld.class`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-24T08:50:36.603

您需要告诉它包名（即`helloworld`）：

```
C:\MyJava> java -cp . helloworld.Helloworld 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T08:52:01.213

下面的帖子与您的问题相似。我希望它能指导你；

[如何从命令行在 Windows 上运行 .class 文件？](https://stackoverflow.com/questions/2864622/how-do-i-run-class-files-on-windows-from-command-line)

# wpf - 带有按钮的 WPF ComboboxItems

> ID：11627282
> 
> 赞同：0
> 
> 时间：2012-07-24T08:47:07.420
> 
> 标签：wpf, combobox, styles

我已经创建了自己的组合框样式以及样式组合框项目。下拉列表需要显示一些带有按钮的项目，而其他没有我的项目的项目是动态创建的，如下所示：

```
 ComboBoxItem typeItem = new ComboBoxItem();
            typeItem.Content = "Test";
            typeItem.Tag = i;
            MyCombobox.Items.Add(typeItem); 
```

我的问题是如何将这种样式应用于某些项目而不是其他项目，我的两个组合框项目如下？

```
<Style x:Key="{x:Type ComboBoxItem}" TargetType="{x:Type ComboBoxItem}">
    <Setter Property="HorizontalContentAlignment" Value="Left" />
    <Setter Property="VerticalContentAlignment" Value="Top" />
    <Setter Property="MinHeight" Value="{DynamicResource ResourceKey=MinimumIteractSizeDips}" />
    <Setter Property="MinWidth" Value="{DynamicResource ResourceKey=MinimumIteractSizeDips}" />
    <Setter Property="Foreground" Value="Black"/>
</Style>

<Style x:Key="MyComboBoxItem" TargetType="{x:Type ComboBoxItem}">
    <Setter Property="HorizontalContentAlignment" Value="Left" />
    <Setter Property="VerticalContentAlignment" Value="Top" />
    <Setter Property="MinHeight" Value="{DynamicResource ResourceKey=MinimumIteractSizeDips}" />
    <Setter Property="MinWidth" Value="{DynamicResource ResourceKey=MinimumIteractSizeDips}" />
    <Setter Property="Foreground" Value="Black"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ComboBoxItem">
                <Grid>
                    <Label Content="{TemplateBinding Content}" Foreground="Black" Background="White" Height="26" HorizontalAlignment="Left" VerticalAlignment="Center" Grid.Row="0" Grid.Column="0"/>
                    <Button Grid.Column="2" Grid.Row="0" Content="Settings" Height="23" HorizontalAlignment="Left" Margin="2" Name="PositionSettings" VerticalAlignment="Center" Width="57"/>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:14:57.653

检查[StyleSelector](http://msdn.microsoft.com/en-us/library/system.windows.controls.styleselector.aspx)类。

```
public class MyStyleSelector : StyleSelector
{
     public override Style SelectStyle(object item, DependencyObject container)
    {
        var element = container as FrameworkElement;
        var myVm = item as MyViewModel;

        if(myVm.EditMode)
            return element.FindResource("TemplateWithButtons") as DataTemplate
        return element.FindResource("TemplateNormal") as DataTemplate

    }
} 
```

在 xaml 中，为您的选择器定义一个资源

```
<MyStyleSelector x:Key="myStyleSelector"/> 
```

并将其应用于您的组合框。

```
<ComboBox StyleSelector="{StaticResource myStyleSelector}"/> 
```

顺便提一句。x:Key 与相同类型`TargetType`是多余的。

最后说明：您不应该为此覆盖样式。您想要的是 DataTemplate 和 DataTemplate 选择器。此外，您不应该将 Content(type object) 绑定到标签文本（type string），ContentPresenter 是这里的方法。

# c# - 使用 Exchange Web 服务 API 确定邮箱是否存在

> ID：11627283
> 
> 赞同：2
> 
> 时间：2012-07-24T08:47:07.937
> 
> 标签：c#, .net, active-directory, exchangewebservices

使用 Exchange Web 服务 API，是否可以确定组织内是否存在邮箱/电子邮件地址（例如某人@ *mydomain.com* ） ？

如果是这样，这是最简单的方法，是否可以不使用模拟？

**案例：** Windows 服务定期向组织内的人员发送电子邮件。它对他们的电子邮件地址没有任何明确的了解。它只知道他们的用户名并假定他们的电子邮件地址是*用户名*@mydomain.com。除少数没有邮箱的用户外，所有用户都是如此。在这些情况下，它不应该首先尝试发送电子邮件。

## 解决方案：

正如[mathieu](https://stackoverflow.com/a/11629697/137471)建议的那样：改为在 Active Directory 中查找用户和电子邮件地址。这个函数完成了工作：

```
using System.DirectoryServices.AccountManagement;
// ...

public static bool TryGetUserEmailAddress(string userName, out string email)
{
  using (PrincipalContext domainContext = 
    new PrincipalContext(ContextType.Domain, Environment.UserDomainName))
  using (UserPrincipal user = 
    UserPrincipal.FindByIdentity(domainContext, userName))
  {
    if (user != null && !string.IsNullOrWhiteSpace(user.EmailAddress))
    {
      email = user.EmailAddress;
      return true;
    }
  }
  email = null;
  return false; // user not found or no e-mail address specified
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:16:35.967

确定用户是否只有 EWS 邮箱可能比预期的要复杂，尤其是在没有模拟的情况下。

如果您在 Active Directory 域中，则应依靠 DirectoryEntry 信息来确定用户的邮箱，并相应地发送电子邮件。如果您获得了用户登录名，则很容易获得相关的 DirectoryEntry。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-26T05:24:09.767

有一种简单的方法可以通过检查用户可用性来做到这一点，如下面的代码。我试过这个，它对我有用。

我不确定可用性结果返回错误的其他情况，但可以肯定的是，当电子邮件不正确时它确实如此

要定义您的交换服务，请参阅：[https ://docs.microsoft.com/en-us/exchange/client-developer/exchange-web-services/get-started-with-ews-managed-api-client-applications](https://docs.microsoft.com/en-us/exchange/client-developer/exchange-web-services/get-started-with-ews-managed-api-client-applications)

```
ExchangeService service = new ExchangeService(ExchangeVersion.Exchange2007_SP1);//You version
service.Credentials = new WebCredentials("user1@contoso.com", "password");
service.AutodiscoverUrl("user1@contoso.com", RedirectionUrlValidationCallback);
string email = "TEST@YOUR.COM";

// Get User Availability after 6 months 
AttendeeInfo attendee = new AttendeeInfo(email);
var attnds = new List<AttendeeInfo>();
attnds.Add(attendee);
var freeTime = service.GetUserAvailability(attnds, new 
TimeWindow(DateTime.Now.AddMonths(6), DateTime.Now.AddMonths(6).AddDays(1)), AvailabilityData.FreeBusyAndSuggestions);
//if you receive result with error then there is a big possibility that the email is not right
if(freetimes.AttendeesAvailability.OverallResult == ServiceResult.Error)
{
     return false;
}
return true; 
```

# android - 在android应用程序中使用Base64进行图像编码和解码

> ID：11627287
> 
> 赞同：3
> 
> 时间：2012-07-24T08:47:24.777
> 
> 标签：android, android-widget

在我的应用程序中，我在将图像编码和解码为字符串并将其传递给 Web 服务时遇到了一个小问题。获取位图图像后，我将其转换为 byte[] 并编码为 String 值，但在某些情况下它会显示错误，我不知道它为什么会出现。还有一个疑问是 Base64 类只支持将位图图像转换为字符串或任何其他可用的工具来做同样的事情。

提前致谢...

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-24T09:02:53.607

在 OutOfMemoryError 的情况下，下面的代码可以帮助我。

```
public String BitMapToString(Bitmap bitmap){
        ByteArrayOutputStream baos=new  ByteArrayOutputStream();
        bitmap.compress(Bitmap.CompressFormat.JPEG,100, baos);
        byte [] b=baos.toByteArray();
        String temp=null;
        try{
        System.gc();
        temp=Base64.encodeToString(b, Base64.DEFAULT);
        }catch(Exception e){
            e.printStackTrace();
        }catch(OutOfMemoryError e){
            baos=new  ByteArrayOutputStream();
            bitmap.compress(Bitmap.CompressFormat.JPEG,50, baos);
            b=baos.toByteArray();
            temp=Base64.encodeToString(b, Base64.DEFAULT);
            Log.e("EWN", "Out of memory error catched");
        }
        return temp;
  } 
```

基本上我所做的是：我捕获 OutofMemoryError 并在该捕获块中将其大小调整 50%，然后将其编码为字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T08:52:08.380

**试试我下面的项目示例代码**

```
Bitmap bmp = (Bitmap) data.getExtras().get("data");

        img.setImageBitmap(bmp);
        btnadd.requestFocus();

        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        bmp.compress(Bitmap.CompressFormat.JPEG, 100, baos);
        byte[] b = baos.toByteArray();
        encodedImageString = Base64.encodeToString(b, Base64.DEFAULT);

        byte[] bytarray = Base64.decode(encodedImageString, Base64.DEFAULT);
        Bitmap bmimage = BitmapFactory.decodeByteArray(bytarray, 0,
                bytarray.length); 
```

# java - 根据里面的组件调整JPanel的大小

> ID：11627290
> 
> 赞同：1
> 
> 时间：2012-07-24T08:47:35.327
> 
> 标签：java, swing

我在 JPanel 中有一个 JTable。表中的最大行数为 10。根据表行，我需要调整 JPanel 的大小。我不应该得到任何滚动窗格。

所以，简单地说：根据表格大小，我应该调整面板的大小。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:57:06.553

我相信`jtable.getPreferredSize()`应该返回一个合理的结果。如果 tat 失败，您可以使用表格字体度量和 tabes 默认行高来估计大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T10:14:43.833

1.在这种情况下，`GridBagLayout`最好的标准`LayoutManagers`是`JTable`放置`JPanel`和不使用`JScrollPane`

2.notice`JTable`默认不支持调整行大小`vertical direction`

```
import java.awt.BorderLayout;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTable;

public class TableAndGbc {

    public static void main(String args[]) throws Exception {
        JPanel panel = new JPanel(new GridBagLayout());
        final JTable table = new JTable(10, 10);
        GridBagConstraints gbc = new GridBagConstraints();
        gbc.weightx = 1.0;
        gbc.fill = GridBagConstraints.HORIZONTAL;
        panel.add(table, gbc);
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(panel, BorderLayout.CENTER);
        frame.pack();
        frame.setVisible(true);
    }
} 
```

# ruby-on-rails - rails excel mime-type - 如何更改默认文件名？

> ID：11627291
> 
> 赞同：4
> 
> 时间：2012-07-24T08:47:34.357
> 
> 标签：ruby-on-rails, mime-types, railscasts

我按照[http://railscasts.com/episodes/362-exporting-csv-and-excel](http://railscasts.com/episodes/362-exporting-csv-and-excel) 并在我的 Rails 应用程序中设置了 Excel 下载。

我的控制器代码如下所示：

```
 def show
    @project = Project.find(params[:id])
    @project.tasks.order(:name)
    respond_to do |format|
      format.html
      format.json { render json: @project }
      format.xls
    end
  end 
```

在我看来，我创建了下载 excel 文件的链接，如下所示：

```
.dl_xls= link_to "Download xls", url_for(:format => 'xls') 
```

现在生成的 excel 文件总是像`Project`记录的 id 一样命名，例如`80.xls`

有没有办法改变这种行为并给它一个自定义名称？

谢谢..

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-24T10:13:11.863

我相信你的答案就在这里：[在 Rails 中，如何将记录作为 csv 文件返回](https://stackoverflow.com/questions/94502/in-rails-how-to-return-records-as-a-csv-file#94626)

使用标题来设置文件名。

```
headers["Content-Disposition"] = "attachment; filename=\"#{filename}\"" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-19T00:58:19.247

```
def index
  @tabulars = Tabular.all
  filename = "data_users.xls"
  respond_to do |format|
    format.html
    format.xls { headers["Content-Disposition"] = "attachment; filename=\"#{filename}\"" }
  end
end 
```

此链接[更详细更改文件名 excel](http://akbarbin.blogspot.com/2013/05/ruby-on-rails-export-excel-without-gem.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T10:12:54.337

我希望您实际看到的是没有 .erb 的视图名称，不一定是控制器操作。

如果你想要那种程度的控制，你可以做三件事。

*   使用来自控制器的 send_data 调用和制表符分隔的数据，如带有文件名的 rails cast 所示：选项

例如

```
class ProductsController < ApplicationController
  def index
    @products = Product.order(:name)
    respond_to do |format|
      format.html
      format.csv { send_data @products.to_csv }
      format.xls { send_data @products.to_csv(col_sep: "\t"), filename: 'your_file_name.xls'}
    end
  end
end 
```

这种方法以及 railscast 引入的旧式电子表格ML 语言存在问题，但如果您的用户群被锁定在 MS-OFFICE 中，我认为没有人会注意到。

*   或者，您可以使用像 act_as_xlsx 或 axlsx_rails 这样的 gem 来消耗 axlsx gem。这些工具生成经过验证的 xlsx 数据（也称为 Office Open XML / ECMA-376 - 或 MS 自 2007 年以来一直在使用的...），并且与其他现代电子表格软件（如 Numbers、GoogleDocs、LibraOffice）具有相当好的互操作性。我相信你在 railscast 中注意到了所有与此相关的评论。

我知道，因为我是作者或 axlsx，而这些限制，以及缺乏样式、图表和验证，是我最初创作 axlsx 的原因。

更多信息：axlsx：[https ://github.com/randym/axlsx](https://github.com/randym/axlsx)

act_as_xlsx： [http ://axlsx.blogspot.jp/2011/12/using-actsasxlsx-to-generate-excel-data.html](http://axlsx.blogspot.jp/2011/12/using-actsasxlsx-to-generate-excel-data.html)

*   编写自己的响应器/渲染器

axlsx_rails 也是一个很好的例子，说明如何编写自己的渲染器和响应器，以便您可以使用标准的 rails 视图，但重命名下载的文件。

[https://github.com/straydogstudio/axlsx_rails/blob/master/lib/axlsx_rails/action_controller.rb](https://github.com/straydogstudio/axlsx_rails/blob/master/lib/axlsx_rails/action_controller.rb)

# c# - 未找到 MSBuild 社区任务

> ID：11627304
> 
> 赞同：14
> 
> 时间：2012-07-24T08:48:30.223
> 
> 标签：c#, visual-studio-2010, msbuild

我有`MyLib`图书馆项目和几个例子。库和示例在同一个解决方案中`MySolution`。

在`MyLib`库项目中，我包含了 MSBuild 代码来压缩整个解决方案并复制到另一个目录以进行 Internet 发布。

```
<Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />
  <Import Project="$(MSBuildExtensionsPath)\MSBuildCommunityTasks\MSBuild.Community.Tasks.Targets" />
  <Target Name="AfterBuild" Condition="'$(Configuration)' == 'Release'">
    <PropertyGroup>
      <ReleasePath>C:\Users\Administrator\Projects\CA\Libraries\Api-DotNet\</ReleasePath>
      <ZipFile>C:\Users\Administrator\Projects\CA\WebProject\libraries\Api-DotNet.zip</ZipFile>
    </PropertyGroup>
    <ItemGroup>
      <LibraryFiles Include="$(ReleasePath)\**\*.*" Exclude="$(ReleasePath)\**\*.user;$(ReleasePath)\**\*.suo;$(ReleasePath)\Api.*;$(ReleasePath)\**\packages\**;$(ReleasePath)\**\Lib.Test\**;$(ReleasePath)\**\*.nuspec;$(ReleasePath)\**\*.nupkg;$(ReleasePath)\**\*nuget*;$(ReleasePath)\**\*internal*;$(ReleasePath)\**\*ReSharper*\**;$(ReleasePath)\**\.svn\**;$(ReleasePath)\**\obj\**;$(ReleasePath)\lib\bin\Debug\**;$(ReleasePath)\lib\bin\Publish\**;$(ReleasePath)\Example\**\bin\**;" />
    </ItemGroup>
    <Zip Files="@(LibraryFiles)" WorkingDirectory="$(ReleasePath)" ZipFileName="$(ZipFile)" ZipLevel="9" />
  </Target>  
</Project> 
```

问题是当用户下载库并在另一台计算机上运行时，编译器显示找不到导入库的错误`MSBuild.Community.Tasks.Targets`。我想在构建解决方案时从项目文件中排除 ZipAndCopy 代码。怎么做？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-24T09:06:03.387

将其添加`Condition`到 the`Import`和`Zip`元素中：

```
Condition="Exists('$(MSBuildExtensionsPath)\MSBuildCommunityTasks\MSBuild.Commu‌​nity.Tasks.Targets')" 
```

例如：

```
<Import Project="$(MSBuildExtensionsPath)\MSBuildCommunityTasks\MSBuild.Community.Tasks.Targets"
        Condition="Exists('$(MSBuildExtensionsPath)\MSBuildCommunityTasks\MSBuild.Commu‌​nity.Tasks.Targets')" /> 
```

与此类似：[C# Checking if a Property 'Starts/Ends With' in a csproj](https://stackoverflow.com/questions/10784740/c-sharp-checking-if-a-property-starts-ends-with-in-a-csproj/10784815#10784815)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-07-08T22:35:49.803

上述解决方案隐藏了项目文件加载错误，但 Tomas 似乎正在尝试使用 MSBuild.Community.Tasks 扩展中的任务。

这应该可以使用 NuGet 安装。这是源站点的[链接](https://github.com/loresoft/msbuildtasks)，显示我们可以通过 NuGet 的包命令行安装它：

```
PM> Install-Package MSBuildTasks 
```

他们的文档不是很好。您还需要使用以下方法定义路径：

```
<Import Project="..\Packages\MSBuildTasks.1.4.0.88\tools\MSBuild.Community.Tasks.Targets"/>
<UsingTask AssemblyFile="..\Packages\MSBuildTasks.1.4.0.88\tools\MSBuild.Community.Tasks.Targets.dll"
         TaskName="MSBuild.Community.Tasks.Zip" /> 
```

...您需要将版本替换为您在 NuGet 中使用的版本。这并不完美，但我设法让我的工作。

NuGet 会将其安装到解决方案/项目主干根目录下的“包”文件夹中。

我遇到了 Visual Studio 可能仍在努力在特定位置查找文件的问题。如果发生这种情况，请将文件从**'.\Packages\MSBuildTasks.1.4.0.88\tools*'**复制到**'C:\Program Files (x86)\MSBuild\MSBuildCommunityTasks\'**。

这不是最优雅的，但我能够成功地让新标签工作。如果我找到解决最后一部分的方法，我会更新我的帖子。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-24T09:05:15.113

听起来你想要多个构建配置。我建议设置一个专门用于构建和压缩工件，并为您的用户单独设置一个。

`Release ZIP`可能是您使用构建后事件压缩文件`Release`的构建，也可能是使用社区任务不做任何特殊事情的普通构建。

# erlang - 如何从 Cowboy 获取 http 参数？

> ID：11627307
> 
> 赞同：7
> 
> 时间：2012-07-24T08:48:38.190
> 
> 标签：erlang, cowboy

我正在使用牛仔（[https://github.com/extend/cowboy](https://github.com/extend/cowboy)）作为一项宁静的网络服务，我需要从“http://localhost:8080/?a=1&b=2&c=32”获取参数

```
init({tcp, http}, Req, Opts) ->
    log4erl:debug("~p~n", [Opts]),
    {ok, Req, undefined_state}.

handle(Req, State) ->
    {ok, Req2} = cowboy_http_req:reply(200, [], <<"Hello World!">>, Req),
    io:format("How to get the params from Req ? "),
    {ok, Req2, State}.

terminate(Req, State) ->
    log4erl:debug("~p~p~n", [Req, State]),
    ok. 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-24T09:26:10.030

您应该使用该`cowboy_http_req:qs_val/2`功能，例如`cowboy_http_req:qs_val(<<"a">>, Req)`，查看[https://github.com/extend/cowboy/blob/master/examples/echo_get/src/toppage_handler.erl](https://github.com/extend/cowboy/blob/master/examples/echo_get/src/toppage_handler.erl) 的示例。

您还可以使用`cowboy_http_req:qs_vals/1`来检索所有查询字符串值的列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-12T09:55:01.620

For anyone who have upgrade to Cowboy 2, there are two ways of getting the query params.

You can get them all by using `cowboy_req:parse_qs/1`:

```
QsVals = cowboy_req:parse_qs(Req),
{_, Lang} = lists:keyfind(<<"lang">>, 1, QsVals). 
```

Or specific ones by using `cowboy_req:match_qs/2`:

```
#{id := ID, lang := Lang} = cowboy_req:match_qs([id, lang], Req). 
```

Read more in the [cowboy docs](https://ninenines.eu/docs/en/cowboy/2.4/guide/req/#_query_parameters) where these examples where found.

# iphone - 应用程序启动时如何显示 2 个介绍视图？

> ID：11627312
> 
> 赞同：0
> 
> 时间：2012-07-24T08:48:52.867
> 
> 标签：iphone, xcode, image

我知道是否有一个名为 Default.png 的文件，它会自动显示图像。但是，我想在它显示期间更改图像。仅供参考，我有 2 张图片 Default.png 和 default2.png。我想在显示 Default.png 之后显示 default2.png。我尝试了遵循的代码，但没有奏效。我需要做什么？

```
-(BOOL) application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions{

//..................................................................
//self.window bullabulla~

[self performSelectorOnMainThread:@selector(showIntro2View) withObject:nil waitUntilDone:YES];
//[self showIntro2View];  //also tried this, but not work.

[self.window addsubview:tabbarController];
[self.window makeKeyAndVisible];
}
-(void) showIntro2View {
UIImageView *intro2 = [[UIImageView alloc]initwithframe:cgrectmake(0,0,320,460)];
intro2.image = [UIImage imagenamed:@"default2.png"];
[self.window addSubview:intro2];
[self.window bringSubviewToFront:intro2];
[NSThread sleepfortimeinterval:2];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:32:39.170

在你的`APP DELEGATE`. 像这样的东西应该可以完成这项工作：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {    
    UIImageView *imageView = [[[UIImageView alloc] initWithFrame:self.window.bounds] autorelease];
    UIImage *image = [UIImage imageNamed:@"NAMEOFYOURSPLASHSCREEN.png"];
    imageView.image = image;
    [self.window addSubview:imageView];
    [self.window makeKeyAndVisible];
    [self performSelector:@selector(remove1stSplash:) withObject:imageView afterDelay:5];
    return YES;
}

- (void)remove1stSplash:(UIImageView *)1stView {
    UIImageView *imageView = ...
    [self.window addSubview:imageView];
    [self performSelector:@selector(remove2ndSplash:) withObject:imageView afterDelay:5];
    [1stView removeFromSuperView];
}

- (void)remove2ndSplash:(UIImageView *)2ndView {
    [self.window addSubview:.....
    [2ndView removeFromSuperView];
} 
```

**编辑：**

示例项目的链接： [iphone 中的两个启动画面显示](http://www.edumobile.org/iphone/iphone-programming-tutorials/two-splash-screen-display-in-iphone/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:31:17.717

您可能知道，您对默认 img 的显示时间没有实际影响。但是你知道它什么时候显示和隐藏。它仅显示，当应用程序第一次运行时，应用程序不在后台或在一段时间不使用后被终止。

调用的第一个 View Controller 应该实现`viewWillAppear`，因为它类似于在默认图像隐藏之前调用的最后一个方法。一切都已加载，您可以立即将子视图添加到主窗口。

我会用 2 种不同的方法来做，比如`showOverrideDefaultImage`和`hideOverrideDefaultImage`。在 show 方法中，您将自己的视图添加到 appDelegate 窗口并触发

```
[self performSelector:@selector(hideOverrideDefaultImage) withObject:nil afterDelay:2]; 
```

在 hide 方法中，只需从 superview 中删除您的视图。因此，您必须有一个指向该对象的有效指针。

就是这样。不要使用 NSThread。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T09:41:20.030

做这个：

```
 -(void) showIntro2View 
{
  UIImageView *intro2 = [[UIImageView alloc]initwithframe:cgrectmake(0,0,320,460)];
  intro2.image = [UIImage imagenamed:@"default2.png"];
  intro2.animationImages = [NSArray arrayWithObjects:    
                           [UIImage imageNamed:@"Default.png"],
                           [UIImage imageNamed:@"default2.png"], nil];
  intro2.animationDuration = 2.0f;
  intro2.animationRepeatCount = 0;
  [intro2 startAnimating];

  [self.window addSubview:intro2];
  [self.window bringSubviewToFront:intro2];
  [NSThread sleepfortimeinterval:2];
} 
```

# shortcut - 如何使用 Google Drive API 创建快捷方式？

> ID：11627313
> 
> 赞同：4
> 
> 时间：2012-07-24T08:48:56.853
> 
> 标签：shortcut, google-drive-api

我一直在阅读 Google Drive API 文档，但我不明白如何创建外部文件的快捷方式。`openssl s_client`到目前为止，我已经弄清楚了如何通过使用Linux 中的命令行向 www.googleapis.com 发送 HTTP POST 来登录和上传文件。

[Drive Apps 工作原理页面上的创建外部文件的 Google Drive 快捷方式](https://developers.google.com/drive/apps-overview#creating_product_name_shortcuts_to_external_files)部分 描述了如下快捷方式：“快捷方式的行为类似于文件。它们可以打开和创建，在搜索中编制索引，并与其他用户共享。与常规文件不同，快捷方式可以“

这里的这一部分说，至少在同步到桌面时，快捷方式会在浏览器中打开。（我仍然不清楚如果您通过浏览器使用 Google Drive 并尝试单击快捷方式会发生什么。）这似乎也表明快捷方式的文件扩展名为 .glink，但是这里关于同步的部分是什么意思？如果我向 www.googleapis.com 发布 HTTP 请求以创建快捷方式，是否需要指定 .glink 作为文件扩展名？

我提到的页面说要转到[创建文件的快捷方式以](https://developers.google.com/drive/integrate-create#create_a_shortcut_to_a_file)获取有关如何创建快捷方式的说明。该页面告诉我要使用什么 mimetype，并说要检查 files.insert 的文档。在该页面上，我找不到有关如何创建快捷方式的任何信息。

那么如何创建快捷方式呢？files.insert 是否有一个参数，您可以在其中指定要重定向到用户的 URL？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T21:09:38.170

Google 云端硬盘快捷方式用于公开文件，该文件的内容存储在用户云端硬盘的第三方网络应用程序中。

当用户点击快捷方式时，用户会被重定向到已注册的第三方网站，并在`?state`查询参数中使用 Google Drive File ID，如[打开文件](https://developers.google.com/drive/integrate-open)中所述。由第三方应用程序使用提供的 Google Drive File ID 来匹配其内部 ID 并获取内容。

创建快捷方式的方式与插入新文件的元数据相同，唯一的例外是`mimeType`需要将其设置为`application/vnd.google-apps.shortcut`：

```
POST https://www.googleapis.com/drive/v3/files?key=[YOUR_API_KEY]
Authorization: Bearer [YOUR_ACCESS_TOKEN]

{
    "name": "A file's Shortcut",
    "mimeType": "application/vnd.google-apps.shortcut",
    "parents": [
        // Optional, unless you want to put shortcut inside of a folder
    ],
    "shortcutDetails": {
        "targetId": targetId,
        "targetMimeType": targetMimeType,
    }
} 
```

此`POST`请求将为您的应用程序创建一个快捷方式。借助包含此信息的授权标头，Drive API 将知道为哪个应用程序创建快捷方式。

# javascript - 使用 JavaScript 禁用文件上传控制

> ID：11627319
> 
> 赞同：0
> 
> 时间：2012-07-24T08:49:11.300
> 
> 标签：javascript, jquery, asp.net, file-upload

如何使用 Javascript 禁用或启用 .NET 框架的文件上传控制？

有没有人有想法，请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T08:54:15.897

尝试这样做：

```
<script type = "text/javascript">
    function EnableDisable(rbl) {
        var rb = rbl.getElementsByTagName("input");
        document.getElementById("<%=FileUpload1.ClientID %>").disabled = true;
        for (var i = 0; i < rb.length; i++) {
            if (rb[i].value == 1 && rb[i].checked) {
                document.getElementById("<%=FileUpload1.ClientID %>").disabled = false;
            }
        }
    }
</script>

<form runat = "server">
    <asp:RadioButtonList ID="RadioButtonList1" runat="server" onclick = "EnableDisable(this)">
        <asp:ListItem Text = "Yes" Value = "1"></asp:ListItem>
        <asp:ListItem Text = "No" Value = "2"></asp:ListItem>
    </asp:RadioButtonList>
    <asp:FileUpload ID="FileUpload1" runat="server" disabled = "disabled"/>
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:12:29.517

采用

 ****```
document.getElementById(FileUploadControlID).disabled = true; 
```****

# xslt - Applescript 将变量参数发送到 xslt 文件 (updatedx2)

> ID：11627321
> 
> 赞同：0
> 
> 时间：2012-07-24T08:49:14.970
> 
> 标签：xslt, variables, applescript

我有一个applescript，它使用xmltransform 来转换使用外部xlst 文件的xml。我想在 applescript 中添加一个变量以供 xslt 文件拾取。satimage 字典谈到使用 xsl 参数作为 xmltransform 的一部分，但我找不到任何示例。

使用模板`XMLTransform xmlFile with xsltFile in outputpath` 我将如何在 applescript 和以下 xsl 文件示例中定义变量。

```
<xsl:stylesheet version="1.0">
    <xsl:param name="vb1" value="'unknown'"/>
  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>
  <xsl:template match="xmeml/list/name">
    <xsl:value-of select="{$vb1}"/>
  </xsl:template>
</xsl:stylesheet> 
```

Applescript 片段

```
set vb1 to "Hello" as string
XMLTransform xmlFile with xsltFile1 in outputpathtemp xsl params vb1 
```

当前的小程序返回“无法使 vb1 进入记录”。

我现在正在考虑使用以下内容，但它在 XML 中返回 NULL

```
set vb1 to {s:"'hello'"}
XMLTransform xmlFile with xsltFile1 in outputpathtemp xsl string params vb1 
```

输入是

```
<xmeml>
   <list> 
     <name>IMaName</name>
     <!-- other nodes -->
   </list>
</xmeml> 
```

当前输出为

```
<xmeml>
   <list> 
     <name/>
     <!-- other nodes -->
   </list>
</xmeml> 
```

任何人都可以帮忙吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T01:07:02.873

`xsl params`需要记录或清单

必须引用原始字符串参数

```
set vb1 to "'Hello'" -- added simple quote
XMLTransform xmlFile with xsltFile1 in outputpathtemp xsl params {vb1} --  {} = list 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T09:33:02.803

当您使用参数调用 XSLT 时，参数在内部看起来与 XSLT 中的变量非常相似（就像发送给函数的参数一样），因此如果您将参数作为名称传入：

```
<xsl:stylesheet version="1.0">
  <xsl:parameter name="paramname" value="'unknown'"/>

  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>
  <xsl:template match="xmeml/list/name">
    <xsl:value-of select="{$paramname}"/>
  </xsl:template>
</xsl:stylesheet> 
```

在这种情况下传递参数时，您将使用名称“paramname”（尽管也许其他名称会更好！），并且该值存在以防您不传递任何内容。如果你这样做，它将被替换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T10:41:59.847

这是答案：

苹果脚本

```
XMLTransform xmlFile with xsltFile1 in outputpathtemp xsl params {"vb1", "'hello'"} 
```

XSLT

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>

<xsl:param name="vb1" />

<xsl:template match="@*|node()">
  <xsl:copy>
    <xsl:apply-templates select="@*|node()"/>
  </xsl:copy> 
</xsl:template>

<xsl:template match="/xmeml/list/name">
<xsl:element name="name">
       <xsl:value-of select="$vb1"/>
    </xsl:element>
 </xsl:template>
</xsl:stylesheet> 
```

谢谢。

# linux - 打开嵌入式启动困难

> ID：11627323
> 
> 赞同：3
> 
> 时间：2012-07-24T08:49:20.837
> 
> 标签：linux, arm, openembedded

因此，我目前正在尝试使用[Open Embedded](http://www.openembedded.org/wiki/Getting_started)为 i.MX53 平台构建，但是我在理解 OE 概念的主要轮廓以及文件夹结构应该如何方面存在一些困难，获得了上层看法。

所以，我希望有人能用几句话总结为什么不在内核根目录中使用 make 命令。

更重要的是（对我来说），我想知道文件夹结构应该如何，有一个[Oe-core](http://cgit.openembedded.org/cgit.cgi/openembedded-core/)和为[i:MX53QSB构建的](http://www.freescale.com/webapp/sps/site/prod_summary.jsp?code=IMX53QSB)[meta-fsl-arm](http://github.com/Freescale/meta-fsl-arm)层。

我应该使用[bitbake](http://developer.berlios.de/projects/bitbake/)运行哪个文件来为我的设备获取自定义图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T22:35:12.583

您应该开始构建一些 bitbake 示例食谱，如果您在这方面取得成功，您应该继续构建自己的图像。寻找 angstrom 的配置脚本，它们将帮助您设置一些东西，例如架构和部署平台。在所有这些东西之后，您应该将自定义图像放入您的 openembedded images 文件夹并执行：

> bitbake my_image

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-10T20:35:27.533

[从这个链接](http://crashcourse.ca/wiki/index.php/Poky)开始是对 Yocto Open Embedded 项目的综合研究。Yocto 是一个现成的子集，已知可以工作，是一个很好的起点。

[此链接](http://crashcourse.ca/wiki/index.php/Poky_Directory_Hierarchy)向您显示目录层次结构。

# shell - ZSH 搜索函数定义

> ID：11627324
> 
> 赞同：3
> 
> 时间：2012-07-24T08:49:26.587
> 
> 标签：shell, zsh

是否有一种机制可以从控制台获取函数定义而无需手动查找文件？

我寻找一种方法来快速找到已知函数名称的定义。

例如我想知道“_kill”自动补全函数是在哪里定义的。

在使用 pry 的红宝石中，我可以得到这样的东西：

> 显示方法查找
> 
> 来自：app/models/search/object.rb @ 第 2 行：
> 
> 行数：7

```
def self.find(conditions = {}, options = {})
  type = extract_object_type
  raise 'do not call Search::Object directly' if type == 'Object'
  search_logic = "Search::#{type.camelize}Logic".constantize.new(conditions, options)
  search_logic.process!
  search_logic.execute
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T08:55:42.903

对于 zsh，请尝试`whence -f`或`type -f`. 例如：

```
myhost% whence -f _kill
_kill () {
    # undefined
    builtin autoload -XUz
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-04-05T17:38:09.093

对我来说，以下作品：

```
$ autoload +X _kill # important step
$ whence -v _kill
_kill is a shell function from /usr/share/zsh/5.2/functions/_kill 
```

[Zsh 文档 – 9.1 自动加载函数](http://zsh.sourceforge.net/Doc/Release/Functions.html#Autoloading-Functions)

> 要在不执行 myfunc 的情况下加载自动加载函数 myfunc 的定义，请使用：
> 
> `autoload +X myfunc`

之后`autoload +X`你还可以看到实际的功能`whence -f`

```
$ whence -f _kill
_kill () {
    local curcontext="$curcontext" line state ret=1
    typeset -A opt_args
    _arguments -C '(-s -l 1)-n[specify signal number]:signal number' '(-n -l 1)-s[specify signal name]:signal:_signals -s' '(-n -s)-l[list signal names or numbers of specified signals]:*:signal:_signals' '(-n -s -l)1::signal:_signals -p -s' '*:processes:->processes' && ret=0
    if [[ -n "$state" ]]
    then
        local pgrp='process-groups:: _wanted '
        [[ -n "$opt_args[(i)-[ns]]${${(@)line:#--}}" && -prefix - ]] && pgrp+='-x '
        pgrp+="process-groups expl 'process-group' compadd - 0"
        _alternative 'processes:: _pids' 'jobs:: _jobs -t' $pgrp && ret=0
    fi
    return ret
} 
```

# c# - 在网格视图中更新和删除行的代码

> ID：11627328
> 
> 赞同：0
> 
> 时间：2012-07-24T08:49:52.707
> 
> 标签：c#, asp.net, .net, gridview

什么是直接在 Web 表单中更新和保存网格视图数据的代码。这是我拥有的代码。帮我删除记录和更新记录。

```
 protected void CancelRecord(object sender, GridViewCancelEditEventArgs e)
{
    gridRegistrationTableDetails.EditIndex = -1;
    BindData();
}
protected void EditRecord(object sender, GridViewEditEventArgs e)
{
    gridRegistrationTableDetails.EditIndex = e.NewEditIndex;
    BindData();
}
protected void UpdateRecord(object sender, GridViewUpdateEventArgs e)
{

}
protected void DeleteRecord(object sender, GridViewDeleteEventArgs e)
{} 
```

我需要编辑四列 Emp name,Emp address,emp dept,emp mail.emp ID 是主键。请帮我解决这个问题..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T11:13:33.857

如果您正在使用数据库，则为更新和删除创建函数 例如： Public void Update(DataClass dataclass){...} public void Delete(int Id){...}

在您的 apsx 页面中编写以下代码

```
 <Columns>
                    <asp:CommandField ShowDeleteButton="True" ShowEditButton="True" />
                </Columns>

            </asp:GridView>
            <asp:ObjectDataSource ID="ObjectDataSource1" runat="server" 
                DataObjectTypeName="DataClass" DeleteMethod="Delete" 
                TypeName="YourServiceClass" UpdateMethod="Update">
                <DeleteParameters>
                    <asp:Parameter Name="id" Type="Int32" />
                </DeleteParameters>
            </asp:ObjectDataSource> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:26:12.523

将此代码放在 gridview Rowdeleting 事件中

```
GridViewRow row = (GridViewRow)gv_Type.Rows[e.RowIndex];
d.con_Open();
SqlCommand cmd = new SqlCommand("Delete from tbl_Category where Catno=" + Convert.ToInt32(gv_Type.Rows[e.RowIndex].Cells[1].Text) + "", d.con);
cmd.ExecuteNonQuery();
d.con_Close(); 
```

# ios - 了解报亭应用

> ID：11627332
> 
> 赞同：0
> 
> 时间：2012-07-24T08:50:06.393
> 
> 标签：ios, newsstand-kit

我有一个关于报摊如何运作的大问题。当你必须创建一个新杂志（问题）时，你是怎么做的？

我的意思是，我是否必须为每本杂志（带有新视图和新视图控制器）实现与其他杂志不同且具有交互式内容的新代码？在这种情况下，我如何将它们添加/上传/集成到我已经在市场上的报亭应用程序中？

如果它不能以这种方式工作，它是如何工作的？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T05:26:23.997

您的问题确实触及了 Apple 如何选择实施 Newsstand 的核心。基本上，使用 Newsstand 有三种可能性：使用图像/pdf 内容、使用 HTML5 内容和使用 CoreText 原生 API。

我从你所说的你想使用 CoreText API 中得到它。由于您建议的原因，这在 Newsstand 框架中很难做到：您真的不应该为每个版本上传一个全新的应用程序。

有两种可能的解决方案。首先是根本不使用报亭。相反，您可以将杂志发布为应用程序，只需为每个版本上传一个新应用程序。这意味着您会错过订阅和报亭的“双重列表”促销等内容，但您可以制作高质量、原生的自定义界面。

第二个是做我现在正在做的事情，即开发类似 XML 编码的东西，当加载到你的基础应用程序中时，它会生成你想要的那种界面。

至少到目前为止我的分析是这样的。我会很高兴被告知我错了，真的。但我确实认为这是苹果没有真正考虑过他们提供的产品的案例之一。或许明年会更好！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T04:59:38.040

如果您使用 Baker 框架，您可以将界面元素（html、图像）下载为“问题”，并且代码部分（Baker 框架）将保持不变。

要添加新问题，您的操作与使用 NKAssetDownload 下载 PDF 相同。如果您使用的是 Baker，您将希望将整个“书”提取到文档目录中。

# java - 在 java/android 中将 ascii 字符写入文件时出错

> ID：11627336
> 
> 赞同：2
> 
> 时间：2012-07-24T08:50:24.950
> 
> 标签：java, android, ascii, outputstream, filewriter

我有以下代码：

```
private char[] headerToWrite;
protected String workingFileName;

private void writeHeaderToFile()
{
    try
    {
        String completeFile = new String(headerToWrite);

        File myFile = new File(workingFileName);

        FileOutputStream fOut = new FileOutputStream(myFile);

        OutputStreamWriter myOutWriter = new OutputStreamWriter(fOut);

        myOutWriter.append(completeFile);
        myOutWriter.close();
    }
    catch (IOException ioe) 
    {
        ioe.printStackTrace();
    }
} 
```

在上面的代码中，变量**headerToWrite**包含一个数组，其中前几个值是：`[1, Q, H, S, , 4, ±, Q, .....]`。这是十六进制的`[31, 51, 48, 53, 01, 34, B1, 51...]`。

它用于创建字符串**completeFile** = 1QHS 4±Q...

但是，在写入文件时，文件包含 1QHS 4Å±Q..... 十六进制为`[31 51 48 53 01 34 c2 b1 51]`....

我不明白为什么会有一个额外的 c2 但我发现**myOutWriter**中的字节如下：`[49, 81, 72, 83, 1, 52, -62, -79, 81]`....

这里有趣的一点是`-62, -79`似乎负责`c2, b1`. 为了让它工作，`-62, -79`应该只是`177`，这是 b1 的小数。有趣的是 177 + 79 是 256。

很明显，在从**completeFile中的 ascii 字符到****myOutWriter**中的字节的传输中，`c2`正在添加。

我想知道是否有人可以解释为什么以及如何解决它。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T09:07:25.400

这可能是因为通过附加一个字符串，它实际上使用默认编码将其转换为字节数组，这可能是 UTF-8。要解决此问题，请使用 ISO 8859-1 编码将您的字符串转换为字节数组，并将该字节数组写入您的输出流。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T09:14:37.610

-79 可以用溢出来解释。就像`byte`有符号字符和 177 > 127（这是一个字节的最大值）一样，它会溢出，结果是 -79。我无法真正解释 -62，但您显然使用了错误的编码（可能是 UTF-8）。尝试使用不同的编码（[ISO 8859-1](http://en.wikipedia.org/wiki/ISO/IEC_8859-1)可能会成功）。

# validation - Symfony-2 给出了不止一个验证错误信息

> ID：11627337
> 
> 赞同：4
> 
> 时间：2012-07-24T08:50:35.023
> 
> 标签：validation, symfony

我的validation.yml 给出：

```
 task:
        - Email: 
               message: The email "{{ value }}" is not a valid email.
        - MinLength: { limit: 50, message: You must be 50 or under to enter. } 
```

我的问题是，如果我在任务字段中给出“错误的电子邮件”，它会给出两条错误消息：

```
The email "wrong-email" is not a valid email.
You must be 50 or under to enter. 
```

实际上，我想一次只显示一条错误消息。这意味着只有当它是有效的电子邮件时，它才应该检查验证“MinLength”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T17:22:03.587

验证排序可以使用组序列来完成。我今天才修复了 YAML 驱动程序的组序列，因此您可能需要等待 2.0 或 master 分支的下一个版本。

```
MyEntity:
    group_sequence: [MyEntity, Extra]
    properties:
        task:
            - Email: { message: ... }
            - MinLength { limit: 50, message: ..., groups: Extra } 
```

现在，只有在组“MyEntity”（即默认组）中的所有约束都成功时，才会验证组“Extra”中的约束。

# date - LastFullWeek 从星期一开始在水晶报告中

> ID：11627339
> 
> 赞同：1
> 
> 时间：2012-07-24T08:50:40.883
> 
> 标签：date, crystal-reports, crystal-reports-xi

使用 LastFullWeek 时，我得到最后一个星期日 - 星期六周，但对于我的报告，我想要最后一个星期一 - 星期日周。是否有任何简单的方法来获得这种行为，或者我是否必须为它编写自己的函数（这并不难，但对于这样一个常见的日期跨度来说并不方便。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T13:17:17.173

自定义功能：

```
//LastFullWeekEx
Function (DateVar date, Optional NumberVar firstDayOfWeek := crSunday)
  (date - DayOfWeek(date, firstDayOfWeek)) - 6 TO (date - DayOfWeek(date, firstDayOfWeek)) 
```

用法：

```
// use with non-volatile DataDate and Sunday
{TABLE.DATE} IN LastFullWeekEx(DataDate)

// use with non-volatile DataDate and Monday
{TABLE.DATE} IN LastFullWeekEx(DataDate, crMonday) 
```

测试：

```
// should return True
( Minimum(LastFullWeek) = Minimum(LastFullWeekEx(DataDate, crSunday)) ) AND
( Maximum(LastFullWeek) = Maximum(LastFullWeekEx(DataDate, crSunday)) ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-07T20:05:37.683

而不是使用

> LastFullWeek 的 {DATE}

使用表格

> {DATE}-1 在 LastFullWeek

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T07:26:32.530

您别无选择，只能使用自定义公式，因为 Crystal Reports 使用固定周设置（美国）。所以一周是星期日到星期六，DayOfWeek 从星期日开始（值/索引 1）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T09:09:10.797

对于通过搜索引擎找到此问题的其他人，如果没有更好的答案，该代码：

```
{DATE} >= currentdate - dayofweek(currentdate, crMonday) - 6 AND
{DATE} <  currentdate - dayofweek(currentdate, crMonday) + 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-21T17:17:45.893

**将 +1 添加到 LastFullWeek 最小值和最大值：**

```
DateVar Start := Minimum(LastFullWeek)+1; //Monday
DateVar End := Maximum(LastFullWeek)+1;   //Sunday 
```

**编辑：**由于`LastFullWeek`总是将星期日作为一周的第一天，我们需要检查当前日期是否为星期日。如果是这样，我们需要减去一周：

```
// Check if the current day is Sunday
IF (DAYOFWEEK(CurrentDate) = 1)
THEN (
    Start := Start - 7;
    End := End - 7
); 
```

* * *

***示例：字符串的日期范围***

```
StringVar LastWeekRange := ToText(Start) + " - " + ToText(End);

LastWeekRange; 
```

返回示例：“MM/DD/YYYY - MM/DD/YYYY”

* * *

***示例：选择日期范围内的所有日期***

```
{datefield} >= Start and {datefield} <= End; 
```

# django - Django模板的优雅高效方式？

> ID：11627342
> 
> 赞同：2
> 
> 时间：2012-07-24T08:50:49.383
> 
> 标签：django, templates, html-helper

我发现自己最终得到了以下样式的模板片段：

```
<ul>
{% for item in items %}
<li><a class="{% if item.active %}active{% endif %}" title="{{ item.title }}" href="{{ item.get_absolute_url }}"><img src="{% thumbnail item.image 24x24 crop upscale %}" />{{ item.title|truncate_chars:30 }}</a></li>
{% endfor %}
</ul> 
```

不久前，ai 不得不使用一个 PHP 框架，该框架有一些很好的 HTML 输出助手。我知道这不能直接比较，因为它不是一个*真正的*模板层（相当简单的 PHP）——而是为了这个想法：

```
<ul>
<?php foreach($items as $item) { ?> 
<li><?= HTML::anchor($item->url(), HTML::mage($item->image->url(24)), Text::limit($item->title, 30), array('title' => $item->title, 'class' => ($item->active) ? 'active' : '') ?></li>
<?php } ?>
</ul> 
```

我非常喜欢这种不必处理打开/关闭 HTML 标记并编写包含**=**和**"**的属性的方法。

喜欢：

```
<?= HTML::anchor($url, $title, array('class' => $class)) ?> 
```

呈现为：

```
<a href="http://url.my/" class="my-class">My Title</a> 
```

你如何处理这种模板化？你知道一些很好的模板标签库可以解决这种情况吗？在 django-templates 中是否有可能，或者它们的逻辑是否遵循不同的路径/概念？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T09:04:47.147

你可以通过定义一些我想称之为“partials”的东西来做到这一点，这些东西在技术上是普通的模板。让我给你看一个例子。

您的主要模板：

```
<ul>
{% for item in items %}
<li>
    {% include "partial/link.html" with url=item.get_absolute_url, title=item.title, active=item.active, image=item.image %}
</li>
{% endfor %}
</ul> 
```

部分/链接.html：

```
<a class="{% if active %}active{% endif %}" title="{{ title }}" href="{{ url }}">
    <img src="{% thumbnail image 24x24 crop upscale %}" />{{ title|truncate_chars:30 }}
</a> 
```

# c# - 如何使用 C# 将数据插入到 Excel 工作表中？

> ID：11627344
> 
> 赞同：3
> 
> 时间：2012-07-24T08:50:54.180
> 
> 标签：c#, excel

我想从字符串数组创建新的 excel 表并将数据插入其中。我使用以下代码创建，现在我想插入数据。

```
 Excel.Application xlApp;
            Excel.Workbook xlWorkBook;
            Excel.Worksheet xlWorkSheet;
            object misValue = System.Reflection.Missing.Value;
            xlApp = new Excel.Application();
            //xlApp = new Excel._Application.ApplicationClass();
            xlWorkBook = xlApp.Workbooks.Add(misValue);

            xlWorkSheet = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1);
            xlWorkSheet.Cells[1, 1] = "http://csharp.net-informations.com";

            xlWorkBook.SaveAs("csharp-Excel.xls", Excel.XlFileFormat.xlWorkbookNormal, misValue, misValue, misValue, misValue, Excel.XlSaveAsAccessMode.xlExclusive, misValue, misValue, misValue, misValue, misValue);
            xlWorkBook.Close(true, misValue, misValue);
            xlApp.Quit();

            releaseObject(xlWorkSheet);
            releaseObject(xlWorkBook);
            releaseObject(xlApp);
}
    private void releaseObject(object obj)
        {
            try
            {
                System.Runtime.InteropServices.Marshal.ReleaseComObject(obj);
                obj = null;
            }
            catch (Exception ex)
            {
                obj = null;
                MessageBox.Show("Exception Occured while releasing object " + ex.ToString());
            }
            finally
            {
                GC.Collect();
            }
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T08:53:51.543

```
private void ExportToExcel(string fileName, DataGridView dgv) //Exports the given dataGridView to Excel with the given fileName
        {
            Excel.Application xlApp;
            Excel.Workbook xlWorkBook;
            Excel.Worksheet xlWorkSheet;
            object misValue = System.Reflection.Missing.Value;

            xlApp = new Excel.Application();
            xlWorkBook = xlApp.Workbooks.Add(misValue);
            xlWorkSheet = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1);
            int i = 0;
            int j = 0;

            DataTable dtExcelTable = GetDataTableForExcel(dgv);

            for (i = 0; i < dtExcelTable.Columns.Count; i++)
            {
                xlWorkSheet.Cells[1, i + 1] = dtExcelTable.Columns[i].ColumnName;
            }

            for (i = 0; i < dtExcelTable.Rows.Count; i++)
            {
                for (j = 0; j < dtExcelTable.Columns.Count; j++)
                {
                    xlWorkSheet.Cells[i + 2, j + 1] = dtExcelTable.Rows[i][j];
                }
            }

            try
            {
                xlWorkBook.SaveAs(fileName + ".xls", Excel.XlFileFormat.xlWorkbookNormal, misValue, misValue, misValue, misValue, Excel.XlSaveAsAccessMode.xlExclusive, misValue, misValue, misValue, misValue, misValue);
                xlWorkBook.Close(true, misValue, misValue);
                xlApp.Quit();

                releaseObject(xlWorkSheet);
                releaseObject(xlWorkBook);
                releaseObject(xlApp);

                MessageBox.Show("Excel dosyanız C:\\" + fileName + ".xls uzantısında yaratıldı.");
            }
            catch (Exception ex)
            {
                MessageBox.Show("Bir sorun oluştu, tekrar deneyiniz. Hata: " + ex.Message);
            }

        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T08:57:38.473

调用 COM 方法非常慢。如果您打算插入大量数据，我建议您获取所需的整个范围，设置所有值，然后将其添加回来：

```
var range = xlWorkSheet.get_Range[firstCell, lastCell]; // or string range
var data = (object[,])range.get_Value(XlRangeValueDataType.xlRangeValueDefault);
// Set data here. Remember it's 1 based index, and row (y component) first
range.set_Value(data); 
```

# c# - 使用 SQL Server 数据库中的数据自动填充组合列表

> ID：11627346
> 
> 赞同：1
> 
> 时间：2012-07-24T08:51:02.827
> 
> 标签：c#, sql, combobox

任何人都可以帮忙吗，我正在尝试将数据自动填充到我的组合框中，而无需按下任何按钮，而是通过下拉控件.....

```
private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
{
   if (comboBox1.AllowDrop == false)
   {
      SqlConnection conn = new SqlConnection("Data Source=localhost; database=KnowledgeEssentials;Trusted_Connection=yes;connection timeout=30");
      SqlDataAdapter adapter = new SqlDataAdapter("SELECT Problem FROM PROBLEMT", conn);

      DataTable dt = new DataTable();
      DataSet ds = new DataSet();

      SqlDataAdapter ad = new SqlDataAdapter();
      ad.SelectCommand = new SqlCommand("SELECT Problem FROM PROBLEMT", conn);
      ad.Fill(ds, "Problem");

      dataGridView1.DataSource = dt;
      //Biding the data with the control
      BindingSource bs = new BindingSource();
      bs.DataSource = ds;
      bs.DataMember = "Problem";

      DataGridView dvg = new DataGridView();
      this.Controls.Add(dvg);
      dvg.DataSource = bs;

      for (int i = 0; i < dt.Rows.Count; i++)
      {
          comboBox1.Items.Add(dt.Rows[i]["Problem"]);
      }
   }
   else
   {
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:15:28.360

你错过了一个`}`，我几乎不相信 SelectedIndexChanged 是填充组合框的最佳位置。由于显然您正在学习，因此请尝试将代码放在按钮上，一旦单击按钮即可正常工作，您可以为其寻找更好的位置，例如表单加载。

究竟是什么问题？它会出错吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:20:26.947

首先创建用于获取数据并加载到组合框中的方法，如下所示

```
 protected void LoadCombo()
    {

           SqlConnection conn = new SqlConnection("Data Source=localhost;database=KnowledgeEssentials;Trusted_Connection=yes;connection timeout=30"); 
            SqlDataAdapter adapter = new SqlDataAdapter("SELECT Problem FROM PROBLEMT", conn); 
            DataSet ds = new DataSet(); 
            SqlDataAdapter ad = new SqlDataAdapter(); 
            ad.SelectCommand = new SqlCommand("SELECT Problem FROM PROBLEMT", conn); 
            ad.Fill(ds, "Problem"); 
            dataGridView1.DataSource = ds; 
            dataGridView1.DataBind(); 
        for (int X = 0; X <= ds.Tables[0].Rows.Count - 1; X++)
        { 
            comboBox1.Items.Add(ds.Tables[0].Rows[X]["Problem"].ToString()); 
        } 
```

}

现在在 page_load 调用这个方法

```
protected void Page_Load()
{

if(ispostback)
 {

}
else
{
 LoadCombo();

 }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T10:43:27.653

回答有关如何自动填充组合框的问题：

```
 private void Form3_Load(object sender, EventArgs e)
              {
                  using (SqlConnection sc = new SqlConnection())
                   {
                    sc.ConnectionString= "database=KnowledgeEssentials;Trusted_Connection=yes;connection timeout=30";
                    sc.Open();
                    using (SqlDataAdapter sda = new SqlDataAdapter())
                     {
                       DataTable data = new DataTable();
                       sda.SelectCommand = new SqlCommand("SELECT ID, TypeProblem FROM eL_Section", sc);
                       sda.Fill(data);

                       comboBox1.ValueMember = "ID";
                       comboBox1.DisplayMember = "ID";
                       comboBox1.DataSource = data;

                       comboBox2.ValueMember = "TypeProblem";
                       comboBox2.DisplayMember = "TypeProblem";
                       comboBox2.DataSource = data;

                     }

             }

            using (SqlConnection cn = new SqlConnection())
              {
            cn.ConnectionString = "database=KnowledgeEssentials;Trusted_Connection=yes;connection timeout=30";
            cn.Open();
                using (SqlDataAdapter da = new SqlDataAdapter())
                  {
                    DataTable dat = new DataTable();
                    da.SelectCommand = new SqlCommand("SELECT UserName FROM UserT", cn);
                    da.Fill(dat);

                    comboBox3.ValueMember = "UserName";
                    comboBox3.DisplayMember = "UserName";
                    comboBox3.DataSource = dat;

                  }
              }

        // TODO: This line of code loads data into the 'knowledgeEssentialsDataSet.ProblemT' table. You can move, or remove it, as needed.
        this.problemTTableAdapter.Fill(this.knowledgeEssentialsDataSet.ProblemT);
     } 
```

# ruby-on-rails - 在任何来源中都找不到 rake-0.9.2.2

> ID：11627349
> 
> 赞同：4
> 
> 时间：2012-07-24T08:51:28.980
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1, rake, bundler

这是一个奇怪的问题。我在运行 rake 进行测试时遇到此错误，但在迁移时却没有。我正在运行 RVM，下面的 shell 转储应该提供您需要的任何信息。

任何帮助将不胜感激。我见过其他几个人遇到这个问题，但还没有对我（或他们）有用的解决方案。

谢谢。

```
$ rake
Could not find rake-0.9.2.2 in any of the sources
Run `bundle install` to install missing gems.
Could not find rake-0.9.2.2 in any of the sources
Run `bundle install` to install missing gems.
Errors running test:units, test:functionals, test:integration!

$ ruby -v
    ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-darwin11.4.0]
    $ rails -v
    Rails 3.1.6

$ more .rvmrc 
rvm ruby-1.9.3-p194@...
$ rake db:rollback
==  AddAllLocationsToAlert: reverting =========================================
-- remove_column(...
   -> 0.0320s
==  AddAllLocationsToAlert: reverted (0.0321s) ================================ 
```

- - - - 编辑：：：：

我已经升级到最新的 Rails - 3.2.6。即使我使用'bundle exec'，错误仍然存​​在。（这对 3.2.6 来说并不新鲜——我仍然在 3.1 下遇到问题） undefined 方法是新的。

```
Your bundle is complete! Use `bundle show [gemname]` to see where a bundled gem is installed.
$ bundle exec rake
Could not find rake-0.9.2.2 in any of the sources
Run `bundle install` to install missing gems.
Could not find rake-0.9.2.2 in any of the sources
Run `bundle install` to install missing gems.
Errors running test:units! #<NoMethodError: undefined method `[]' for nil:NilClass>
Errors running test:functionals! #<RuntimeError: Command failed with status (7): [/Users/ben/.rvm/rubies/ruby-1.9.3-p194/bin...]>
Errors running test:integration! #<RuntimeError: Command failed with status (7): [/Users/ben/.rvm/rubies/ruby-1.9.3-p194/bin...]> 
```

我的 Gemfile，按要求：

```
source 'http://rubygems.org'

gem 'rails', '3.2.6'

group :assets do
  gem 'sass-rails', "  ~> 3.2.5"
  gem 'coffee-rails', "~> 3.2.1"
  gem 'uglifier', '>= 1.2.6'
end

gem 'jquery-rails'

gem 'rake'
gem "mysql2"

gem "squeel"
gem 'tinymce-rails'
gem 'dynamic_form'

gem 'will_paginate'
gem 'devise'
gem 'whitelist'
gem 'rmagick'
gem 'json'
gem 'paperclip'
gem 'acts_as_list', :git => 'https://github.com/swanandp/acts_as_list'
gem 'htmlentities'
gem 'formtastic'
# Bundle gems for the local environment. Make sure to
# put test-only gems in this group so their generators
# and rake tasks are available in development mode:
# group :development, :test do
#   gem 'webrat'
# end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T10:50:14.613

gem 'rake', ">=0.9.2" # 在你的 Gemfile

然后

$捆绑安装

然后

$ bundle exec rake

如果以上不起作用：

$ rvm all do gem install rake -v 0.9.2.2#install rake to all ruby​​ 版本

然后再次运行 rake

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:09:42.890

如果您正在使用 bundler（并且使用 rails，您可能会这样做），请始终像这样运行 rake：

`bundle exec rake`

这将获取您的 Gemfile 中指定的宝石。

# asp.net-mvc - 统一MVC（三）与Winforms

> ID：11627352
> 
> 赞同：0
> 
> 时间：2012-07-24T08:51:44.383
> 
> 标签：asp.net-mvc, winforms, asp.net-mvc-3

我已经创建了一个令我满意的业务/数据架构，并且我通过让控制器使用服务并将结果绑定到 Winforms 数据源，以一种相当标准的方式在 Winforms 中呈现它。现在，我想通过 MVC 3 公开我的体系结构，并且我正在寻找有关如何避免重复所有控制器类的指导。我有点被 Controller 和 ViewResult 所困扰，而不是简单地实现可以应用于现有控制器类并插入 Web 视图的接口。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T10:00:09.287

ASP.NET MVC 使用前端控制器架构，它提供了处理 Web 请求的入口点。此控制器与 Web 环境（HttpContext、Request、Response 等）耦合，它返回视图，而不是更新现有视图。因此，您不能也不应该在 WinForms 开发中使用它。您应该重用的是模型，它与环境无关，对控制器或视图一无所知。

# c# - 放置此身份验证逻辑的正确位置在哪里？

> ID：11627354
> 
> 赞同：1
> 
> 时间：2012-07-24T08:51:57.417
> 
> 标签：c#, asp.net, asp.net-mvc-3, authentication, global-asax

我们有一个旧的经典 asp 应用程序，用于管理和启动我们的其他 Web 应用程序。

它启动应用程序的方式如下：

```
<form name="frmMain" action="http://xxxx/mvc3app/Index" target=_self method=post>
<script language="javascript">
frmMain.submit();
</script> 
```

用户登录名和密码作为请求的一部分传递。

要在 ASP.NET 应用程序中验证用户身份，我调用以下 AuthenticateUser 函数：

```
public bool AuthenticateUser()
{

 var userName = Context.Request["txtName"];
 var password = Context.Request["txtPassword"];   

    if (Membership.ValidateUser(userName, password))
    {
       FormsAuthentication.SetAuthCookie(userName, true);              
    }
} 
```

我假设调用 AuthenticateUser 的正确位置`Session_Start()`在 global.asax 中的方法中，但提交“frmMain”时似乎没有调用此方法。它似乎间歇性地工作 - 如果我完全关闭 IE，请再试一次，然后手动输入 URL。

```
void Session_Start(object sender, EventArgs e)
{
   Log("In Session Start");
   AthenticateUser();
} 
```

***在我的 ASP.NET 应用程序中对用户进行身份验证的正确位置在哪里？***

这是来自开发工具的验证失败形式的屏幕截图 - 未调用 Session_Start()。

![在此处输入图像描述](../Images/7996003e8a68c2a7dbdbd557411b18f3.png)

**编辑**

看起来这不起作用，因为 IsAuthenticated 属性仅在后续请求上设置，这导致身份验证在索引操作上失败。

我现在将对此进行测试，但请参阅[谁设置了 HttpContext.User.Identity 的 IsAuthenticated 属性](https://stackoverflow.com/questions/8660539/who-sets-the-isauthenticated-property-of-the-httpcontext-user-identity)

***解决方案：***

第一个错误在调用 SetAuthCookie 后没有重定向，这导致索引视图验证失败。

我还意识到没有必要将它放在 global.asax 中，但我宁愿重定向到 LogOn 操作，而不是直接转到 index 操作：

```
public ActionResult LogOn()
    {            

    var userName = Context.Request["txtName"];
    var password = Context.Request["txtPassword"];

            if (Membership.ValidateUser(userName, password))
            {
                FormsAuthentication.SetAuthCookie(userName, false);
                return RedirectToAction("Index", "Index");
            }

            else
            {
               return RedirectToAction("IncorrectLogin", "Index");
            }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:18:33.853

我认为控制器动作将是最好的地方，将控制器动作保持在最低限度是个好主意，这样它就不会变得臃肿。但如果动作不涉及太多层，它似乎很合适。

如果您正在使用会话操作做任何“奇怪”的事情，您仍然可以使用`Session_Start`。但是，如果可以的话，请避免它，没有什么能像魔术一样在你自己的应用程序执行路径上迷惑你：D

# asp.net - 插入到相互依赖的 3 个表中

> ID：11627356
> 
> 赞同：0
> 
> 时间：2012-07-24T08:52:02.263
> 
> 标签：asp.net, sql-server-2008

我有3张桌子-

```
1\. Country (CountryName, CID (PK- AutoIncrement))
2\. State (SID(PK- AutoIncrement), StateName, CID (FK to Country)
3\. City (CityName, CID, SID (FK to State) 
```

现在我只需要将名称插入到 CountryName、StateName 和 CityName 的三个表中。ID 需要更新。

我是怎么做到的？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:02:55.860

您可以在存储过程中使用存储过程，您可以先将其插入国家表中：

```
Insert into Country ( CountryName) VALUES (@CountryName)
DECLARE @cid as INTEGER = @@IDENTITY 
```

然后在第二个插入中使用 SELECT @@IDENTITY ，如下所示：

```
Insert into State( StateName, cid ) values (@StateName, @cid)
DECLARE @SID as INTEGER = @@IDENTITY 
```

并在第三个插入语句中使用相同的：

```
Insert into City ( CityName, CID,SID ) values (@CityName,@CID,@SID ) 
```

这就是你所需要的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:27:42.793

如果您想使用 linq to SQL

```
var country = new Dbml.Country();
country.Name = "countryname";

var state = new Dbml.State();
state.Country = country;
state.Name = "stateName"

var city = new Dbml.City();
city.State= state;
city.cityName = "cityName";

context.SubmitChanges(); 
```

# javascript - 通过 JavaScript 创建新的 HTML5 视频元素

> ID：11627358
> 
> 赞同：8
> 
> 时间：2012-07-24T08:52:10.087
> 
> 标签：javascript, html, html5-video, runtime-error

我正在尝试完全通过 JS 创建一个新的 HTML5 视频元素。因此，我尝试以创建新图像的相同方式进行操作，例如：`obj = new Image()`我写`obj = new HTMLVideoElement()`. 但是，这不起作用。我收到运行时错误：**对象不支持此操作**。怎么了？谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-24T08:53:31.673

类`Image`是一个特例。

创建任意 HTML 元素的标准方法是：

```
var obj = document.createElement('video'); 
```

# python - 如何在 Python 中使用 OpenCV 拉直图像的旋转矩形区域？

> ID：11627362
> 
> 赞同：42
> 
> 时间：2012-07-24T08:52:24.327
> 
> 标签：python, image-processing, opencv

下面的图片会告诉你我想要什么。

我有图像中矩形的信息（宽度、高度、中心点和旋转度）。现在，我想编写一个脚本将它们剪下来并将它们保存为图像，但也要将它们拉直。如中所示，我想从图像内部显示的矩形转到外部显示的矩形。

我正在使用 OpenCV Python。**请**告诉我一种方法来实现这一点。

**请**展示一些代码，因为 OpenCV Python 的示例很难找到。

![示例图像](../Images/0446a1e9b97c07f5279147b4317c35f5.png)

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-07-24T09:26:42.853

您可以使用该[`warpAffine`](https://docs.opencv.org/3.0-beta/doc/py_tutorials/py_imgproc/py_geometric_transformations/py_geometric_transformations.html#rotation)功能围绕定义的中心点旋转图像。可以使用[`getRotationMatrix2D`](https://docs.opencv.org/3.4.0/da/d54/group__imgproc__transform.html#gafbbc470ce83812914a70abfb604f4326)（其中`theta`以*度*为单位）生成合适的旋转矩阵。

![开始图像](../Images/877a5562465cddf3e8451b1da2e41c6e.png) ![找到所需的矩形后](../Images/445a290909ea9448ea2897ba7d494719.png)

然后，您可以使用[Numpy 切片](https://docs.scipy.org/doc/numpy/reference/arrays.indexing.html)来剪切图像。

[![旋转图像](../Images/7e9797c3d068f445be0cb0a55bdad3c7.png)](https://i.stack.imgur.com/6oB6V.jpg) ![结果](../Images/fdf94d379752fc33b8e4e9f9ac283de4.png)

```
import cv2
import numpy as np

def subimage(image, center, theta, width, height):

   ''' 
   Rotates OpenCV image around center with angle theta (in deg)
   then crops the image according to width and height.
   '''

   # Uncomment for theta in radians
   #theta *= 180/np.pi

   shape = ( image.shape[1], image.shape[0] ) # cv2.warpAffine expects shape in (length, height)

   matrix = cv2.getRotationMatrix2D( center=center, angle=theta, scale=1 )
   image = cv2.warpAffine( src=image, M=matrix, dsize=shape )

   x = int( center[0] - width/2  )
   y = int( center[1] - height/2 )

   image = image[ y:y+height, x:x+width ]

   return image 
```

请记住，这`dsize`是*输出*图像的形状。如果补丁/角度足够大，如果使用原始形状（为了简单起见），边缘会被切断（比较上图）。在这种情况下，您可以引入缩放因子`shape`（以放大输出图像）和切片的参考点（此处`center`）。

上述函数可按如下方式使用：

```
image = cv2.imread('owl.jpg')
image = subimage(image, center=(110, 125), theta=30, width=100, height=200)
cv2.imwrite('patch.jpg', image) 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-01-23T12:29:00.413

在此处和类似问题中使用解决方案时，我遇到了偏移错误的问题。

因此，我进行了数学计算，并提出了以下可行的解决方案：

```
def subimage(self,image, center, theta, width, height):
    theta *= 3.14159 / 180 # convert to rad

    v_x = (cos(theta), sin(theta))
    v_y = (-sin(theta), cos(theta))
    s_x = center[0] - v_x[0] * ((width-1) / 2) - v_y[0] * ((height-1) / 2)
    s_y = center[1] - v_x[1] * ((width-1) / 2) - v_y[1] * ((height-1) / 2)

    mapping = np.array([[v_x[0],v_y[0], s_x],
                        [v_x[1],v_y[1], s_y]])

    return cv2.warpAffine(image,mapping,(width, height),flags=cv2.WARP_INVERSE_MAP,borderMode=cv2.BORDER_REPLICATE) 
```

作为参考，这里有一张解释其背后数学的图像：

注意

```
w_dst = width-1
h_dst = height-1 
```

这是因为最后一个坐标的值`width-1`不是`width`, 或`height`。

![](../Images/f7453f7db38fbe53e02dfb7a21827a9d.png)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2019-02-22T09:16:57.157

**其他方法只有在矩形的内容在旋转后的旋转图像中时才有效，并且在其他情况下会严重失败**。如果部分零件丢失了怎么办？请参见下面的示例：

[![在此处输入图像描述](../Images/da3ee26fe3baa25415977a255f388719.png)](https://i.stack.imgur.com/lAjlY.png)

如果要使用上述方法裁剪旋转的矩形文本区域，

```
import cv2
import numpy as np

def main():
    img = cv2.imread("big_vertical_text.jpg")
    cnt = np.array([
            [[64, 49]],
            [[122, 11]],
            [[391, 326]],
            [[308, 373]]
        ])
    print("shape of cnt: {}".format(cnt.shape))
    rect = cv2.minAreaRect(cnt)
    print("rect: {}".format(rect))

    box = cv2.boxPoints(rect)
    box = np.int0(box)

    print("bounding box: {}".format(box))
    cv2.drawContours(img, [box], 0, (0, 0, 255), 2)

    img_crop, img_rot = crop_rect(img, rect)

    print("size of original img: {}".format(img.shape))
    print("size of rotated img: {}".format(img_rot.shape))
    print("size of cropped img: {}".format(img_crop.shape))

    new_size = (int(img_rot.shape[1]/2), int(img_rot.shape[0]/2))
    img_rot_resized = cv2.resize(img_rot, new_size)
    new_size = (int(img.shape[1]/2)), int(img.shape[0]/2)
    img_resized = cv2.resize(img, new_size)

    cv2.imshow("original contour", img_resized)
    cv2.imshow("rotated image", img_rot_resized)
    cv2.imshow("cropped_box", img_crop)

    # cv2.imwrite("crop_img1.jpg", img_crop)
    cv2.waitKey(0)

def crop_rect(img, rect):
    # get the parameter of the small rectangle
    center = rect[0]
    size = rect[1]
    angle = rect[2]
    center, size = tuple(map(int, center)), tuple(map(int, size))

    # get row and col num in img
    height, width = img.shape[0], img.shape[1]
    print("width: {}, height: {}".format(width, height))

    M = cv2.getRotationMatrix2D(center, angle, 1)
    img_rot = cv2.warpAffine(img, M, (width, height))

    img_crop = cv2.getRectSubPix(img_rot, size, center)

    return img_crop, img_rot

if __name__ == "__main__":
    main() 
```

这就是你将得到的：

[![在此处输入图像描述](../Images/040b6d29072620e0f4aab30dcddaaa80.png)](https://i.stack.imgur.com/0Cowom.png)

显然，有些部分被切掉了！为什么不直接扭曲旋转的矩形，因为我们可以通过方法得到它的四个角点`cv.boxPoints()`？

```
import cv2
import numpy as np

def main():
    img = cv2.imread("big_vertical_text.jpg")
    cnt = np.array([
            [[64, 49]],
            [[122, 11]],
            [[391, 326]],
            [[308, 373]]
        ])
    print("shape of cnt: {}".format(cnt.shape))
    rect = cv2.minAreaRect(cnt)
    print("rect: {}".format(rect))

    box = cv2.boxPoints(rect)
    box = np.int0(box)
    width = int(rect[1][0])
    height = int(rect[1][1])

    src_pts = box.astype("float32")
    dst_pts = np.array([[0, height-1],
                        [0, 0],
                        [width-1, 0],
                        [width-1, height-1]], dtype="float32")
    M = cv2.getPerspectiveTransform(src_pts, dst_pts)
    warped = cv2.warpPerspective(img, M, (width, height)) 
```

现在裁剪的图像变为

[![在此处输入图像描述](../Images/9f680d576d2b333b0876a2f7fb965ade.png)](https://i.stack.imgur.com/yB7dum.png)

好多了，不是吗？如果您仔细检查，您会注意到裁剪后的图像中有一些黑色区域。这是因为检测到的矩形的一小部分超出了图像的范围。为了解决这个问题，您可以稍微[填充图像并在此之后进行裁剪。](https://stackoverflow.com/questions/36255654/how-to-add-border-around-an-image-in-opencv-python)[这个答案](https://stackoverflow.com/a/54824218/6064933)中有一个例子。

现在，我们比较两种从图像中裁剪旋转矩形的方法。这种方法不需要旋转图像，可以用更少的代码更优雅地处理这个问题。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2018-02-01T00:25:37.853

openCV 3.4.0 版的类似配方。

```
from cv2 import cv
import numpy as np

def getSubImage(rect, src):
    # Get center, size, and angle from rect
    center, size, theta = rect
    # Convert to int 
    center, size = tuple(map(int, center)), tuple(map(int, size))
    # Get rotation matrix for rectangle
    M = cv2.getRotationMatrix2D( center, theta, 1)
    # Perform rotation on src image
    dst = cv2.warpAffine(src, M, src.shape[:2])
    out = cv2.getRectSubPix(dst, size, center)
    return out

img = cv2.imread('img.jpg')
# Find some contours
thresh2, contours, hierarchy = cv2.findContours(img, cv2.RETR_TREE, cv2.CHAIN_APPROX_SIMPLE)
# Get rotated bounding box
rect = cv2.minAreaRect(contours[0])
# Extract subregion
out = getSubImage(rect, img)
# Save image
cv2.imwrite('out.jpg', out) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-09-23T07:49:49.317

这是我执行相同任务的 C++ 版本。我注意到它有点慢。如果有人看到任何可以提高此功能的性能的东西，请告诉我。:)

```
bool extractPatchFromOpenCVImage( cv::Mat& src, cv::Mat& dest, int x, int y, double angle, int width, int height) {

  // obtain the bounding box of the desired patch
  cv::RotatedRect patchROI(cv::Point2f(x,y), cv::Size2i(width,height), angle);
  cv::Rect boundingRect = patchROI.boundingRect();

  // check if the bounding box fits inside the image
  if ( boundingRect.x >= 0 && boundingRect.y >= 0 &&
       (boundingRect.x+boundingRect.width) < src.cols &&  
       (boundingRect.y+boundingRect.height) < src.rows ) { 

    // crop out the bounding rectangle from the source image
    cv::Mat preCropImg = src(boundingRect);

    // the rotational center relative tot he pre-cropped image
    int cropMidX, cropMidY;
    cropMidX = boundingRect.width/2;
    cropMidY = boundingRect.height/2;

    // obtain the affine transform that maps the patch ROI in the image to the
    // dest patch image. The dest image will be an upright version.
    cv::Mat map_mat = cv::getRotationMatrix2D(cv::Point2f(cropMidX, cropMidY), angle, 1.0f);
    map_mat.at<double>(0,2) += static_cast<double>(width/2 - cropMidX);
    map_mat.at<double>(1,2) += static_cast<double>(height/2 - cropMidY);

    // rotate the pre-cropped image. The destination image will be
    // allocated by warpAffine()
    cv::warpAffine(preCropImg, dest, map_mat, cv::Size2i(width,height)); 

    return true;
  } // if
  else {
    return false;
  } // else
} // extractPatch 
```

# session-state - Sessions_End 和 StateServer 会话模式

> ID：11627364
> 
> 赞同：1
> 
> 时间：2012-07-24T08:52:38.190
> 
> 标签：session-state

众所周知，`Session_End`当会话模式设置为 时，事件不会触发`StateServer`。

但这里有一个问题，在一个项目中，我使用此事件删除分配给当前登录用户的记录，其会话已过期

现在我正在寻找另一种方法来用这个事件替换它。有没有人给我这个东西的想法？！

谢谢

阿里·福鲁吉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:16:46.193

我使用了以下文章：

[用于处理与 StateServer 的会话结束的 ASP.NET HttpModule](http://www.codeproject.com/Articles/21156/ASP-NET-HttpModule-for-handling-session-end-with-S)

# javascript - 脚本文件相互冲突

> ID：11627367
> 
> 赞同：0
> 
> 时间：2012-07-24T08:52:47.980
> 
> 标签：javascript, jquery-ui, scrollbar, accordion

我在页面中使用自定义滚动和手风琴，但是当我将两个插件的脚本都放在页面中时，任何一个 tat 都不起作用。我试图合并两者，但仍然无法正常工作。

这是我每个插件的脚本

**对于自定义滚动**

```
<script type="text/javascript" src="js/jquery.min1.7.2.js"></script>
<script type="text/javascript" src="js/jquery.tinyscrollbar.min.js"></script>
 <script type="text/javascript">
        $(document).ready(function(){
            $('#scrollbar1').tinyscrollbar();   
             $('#maintab').tabs();              
        });
    </script> 
```

对于手风琴

```
<script type="text/javascript" src="js/jquery.js"></script> 
<script type="text/javascript" src="js/accordion.js"></script>
<script type="text/javascript">
jQuery().ready(function(){  
    // applying the settings
    jQuery('.theMenu').Accordion({
        active: 'h3.selected',
        header: 'h3.head',
        alwaysOpen: false,
        animated: true,
        showSpeed: 400,
        hideSpeed: 800
    });
}); 
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:00:50.983

您正在使用 2 个 Jquery 库。在所有脚本的顶部只使用一个（最新的），所以你的代码应该是这样的：

```
<script type="text/javascript" src="js/jquery.min1.7.2.js"></script>
<script type="text/javascript" src="js/jquery.tinyscrollbar.min.js"></script>
<script type="text/javascript" src="js/accordion.js"></script> 
```

或查看这篇文章：[包含两个以上的 jquery 库](https://stackoverflow.com/questions/5049220/inclusion-of-more-than-two-jquery-libraries-creates-problems)

从上面的帖子中提取：

```
<script src="http://code.jquery.com/jquery-1.7.2.js"></script>
<!-- other scripts that depend on 1.7.2 --->
<script>
    var $.1.7.2 = $.noConflict(true);
</script>

<script src="http://code.jquery.com/jquery-1.2.6.js"></script>
<!-- other scripts that depend on 1.2.6 --->
<script>
    var $.1.2.6 = $.noConflict(true);
</script> 
```

> 许多 JavaScript 库使用 $ 作为函数或变量名，就像 jQuery 一样。在 jQuery 中，$ 只是 jQuery 的别名，所以所有功能都可以在不使用 ` 的情况下使用。如果我们需要在 jQuery 旁边使用另一个 JavaScript 库，我们可以通过调用 $.noConflict() 将 $ 的控制权返回给另一个库：

另请参阅：[jQuery.noConflict](http://api.jquery.com/jQuery.noConflict/)

# sql - 基于 if 条件在 where 子句中间使用 between

> ID：11627368
> 
> 赞同：1
> 
> 时间：2012-07-24T08:52:48.373
> 
> 标签：sql, sql-server-2008, tsql

```
Select * from MyTable 
    where myField = 1
    And myImportantField ???
    ... 
```

我有以下参数：

```
@DoCalculateValues bit,  
@FromValue int,  
@ToValue int 
```

我需要这个

```
if @DoCalculateValues = 1 then  
check if myImportantField is between @FromValue and @ToValue  
else  
ignore values, something like "And myImportantValue = myImportantValue" 
```

请考虑这一切都发生在“... WHERE ... AND ...”子句的中间

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T08:56:36.367

```
Select * from MyTable 
where myField = 1
And (@DoCalculateValues = 0
or myImportantField between @FromValue and @ToValue) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:55:31.157

```
Select * from MyTable  
where myField = 1 
And ((myImportantField between @FromValue and @ToValue and @DoCalculateValues = 1)
OR  ( @DoCalculateValues <> 1)) 
```

# java - 文件的内存扫描，最好使用 ClamAV

> ID：11627370
> 
> 赞同：11
> 
> 时间：2012-07-24T08:52:52.437
> 
> 标签：java, antivirus

我们正在实施一个重点关注安全性的企业应用程序，其中包括文件上传。这些文件需要进行病毒扫描，但也需要加密。

当前的过程是文件被上传，然后通过加密器流式传输到磁盘上的临时存储区域。然后调用病毒扫描程序，文件被即时解密，通过套接字流式传输到 ClamAV - 然后从套接字返回病毒状态。

问题是 ClamAV 似乎在扫描之前写入磁盘上的临时区域，这意味着文件系统上的未加密、潜在敏感数据。

有谁知道如何解决这一问题？可能通过将 ClamAV 配置为仅扫描内存（我的谷歌搜索没有结果），或者可能有一些替代建议？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T03:28:20.390

我在这里假设您正在使用 clamd，因为您是通过套接字而不是 clamscan cli 工具与它交谈。

在这种情况下，您可以通过 clamd.conf 中的 TemporaryDirectory 指令对其进行配置，以使用 dm-crypt （https://help.ubuntu.com/community/EncryptedFilesystemHowto）之类的方式指向加密文件系统进行临时存储 - 我希望这个有帮助。

来自 man 5 clamd.conf 的参考：

```
 TemporaryDirectory STRING
          Optional path to the global temporary directory.
          Default: system specific (usually /tmp or /var/tmp). 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-30T17:14:53.320

有一个很好的例子：

使用 ClamAV Antivirus 检测病毒的 Java API

[http://nsinfra.blogspot.ca/2011/06/java-api-to-detect-virus-using-clamav.html](http://nsinfra.blogspot.ca/2011/06/java-api-to-detect-virus-using-clamav.html)

这篇文章描述了使用 java API 扫描文件以检测木马、病毒、恶意软件和其他恶意威胁的方法。

已涵盖以下项目： 关于 ClamAV 杀毒软件 在 Linux 机器上安装 ClamAV 杀毒软件的说明 使用 ClamAV Java API 扫描文件以检测病毒的方法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T09:24:49.773

我能想象的最简单的事情是使用 ram 磁盘。

也许你应该检查一下 ClamAV 是否​​有更复杂的 API 来完成这样的任务。

# c# - 防止在给定位置使用某些 dll 或服务代码

> ID：11627371
> 
> 赞同：0
> 
> 时间：2012-07-24T08:52:55.283
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, code-contracts

有没有一种简单的方法（也许使用代码合同？）来防止在应用程序的给定部分中使用某些 dll/命名空间/程序集？

我的用例是，当我尝试在控制器中使用公司范围的服务层时，我想要一个警告机制。

相反，我们应该在该服务层和我们的控制器之间有一个层（服务层正在发生变化，我们将为我们的新 SDK 一点一点地切换它）。

有哪些方法可以做到这一点？我可以简单地在代码合同中指定一些东西来警告在控制器方法中使用给定程序集吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T09:33:17.377

代码合同在这里不会真正有用。

您是否有权访问 Visual Studio Premium 或 Ultimate？内置了一个层图工具，可用于在构建时验证架构。

您创建一个新的建模项目并在其中添加一个层图。然后你可以将其他项目拖到图表中，你可以编辑它们之间的关系等等。这是一个非常直观的界面。

这是[一篇博客文章，解释了如何打开编译时验证](https://web.archive.org/web/20120330172123/http://blog.dontpaniclabs.com/post/2011/04/08/Enforcing-Architecture-Rules-with-Visual-Studio.aspx)，以及有关填充图表的更多信息。

这是一个示例层图。例如，如果来自业务的代码访问了 Web 层内部的内容，则会生成错误。

[![示例层图](../Images/01bb16b51ac41745bd5ab63b227b322d.png)](https://i.stack.imgur.com/CiR3O.jpg)
[（来源：[msdn.com](http://blogs.msdn.com/blogfiles/jennifer/WindowsLiveWriter/VisualStudio2010_DA7C/LayerDiagram_thumb.jpg)）]

# asp.net - 使用 ASP.net 发送的邮件中未显示文本格式

> ID：11627375
> 
> 赞同：0
> 
> 时间：2012-07-24T08:53:11.217
> 
> 标签：asp.net, sendmail

**电子邮件的正文是使用HttpWebRequest.create()**动态创建的网页。当我在我的帐户中打开电子邮件时，此页面格式正确，但未显示应用的格式（粗体效果、字体颜色、字体大小等）。这是这种机制的正常行为还是**有什么方法可以从 asp.net 接收格式正确的电子邮件**？

# c - 如何在 C 中读取由 h5py 创建的 hdf5 布尔枚举

> ID：11627376
> 
> 赞同：2
> 
> 时间：2012-07-24T08:53:18.317
> 
> 标签：c, scientific-computing, hdf5, h5py

我创建了一个包含 3 个双精度数和一个布尔值的数组，并使用以下方法`numpy`将它们写入文件`h5py`：

```
import numpy as np
import h5py

data = np.zeros(10, dtype=[("THETA",np.double),("PHI",np.double),("PSI",np. double),("FLAG",np.bool)])

with h5py.File("testout.h5") as f:
    f.create_dataset("data", data=data) 
```

`h5py`为布尔字段创建枚举类型：

```
HDF5 "testout.h5" {
GROUP "/" {
   DATASET "data" {
      DATATYPE  H5T_COMPOUND {
         H5T_IEEE_F64LE "THETA";
         H5T_IEEE_F64LE "PHI";
         H5T_IEEE_F64LE "PSI";
         H5T_ENUM {
            H5T_STD_I8LE;
            "FALSE"            0;
            "TRUE"             1;
         } "FLAG";
      }
      DATASPACE  SIMPLE { ( 10 ) / ( 10 ) }
   }
}
} 
```

现在我需要使用 C 读取这个文件，事情变得复杂了：

```
typedef enum {
    false = 0;
    true
} bool;

typedef struct {
    double THETA, PHI, PSI;
    bool FLAG;
} pointing_t; 
```

我不明白如何定义具有枚举的类型：

```
hid_t memtype = H5Tcreate (H5T_COMPOUND, sizeof(pointing_t));
H5Tinsert (memtype, "THETA", HOFFSET (pointing_t, THETA),  H5T_NATIVE_DOUBLE);
H5Tinsert (memtype, "PHI", HOFFSET (pointing_t, PHI),  H5T_NATIVE_DOUBLE);
H5Tinsert (memtype, "PSI", HOFFSET (pointing_t, PSI),  H5T_NATIVE_DOUBLE);
# this should be an ENUM!!
H5Tinsert (memtype, "FLAG", HOFFSET (pointing_t, FLAG),  H5T_NATIVE_DOUBLE); 
```

我在 gist 上粘贴了一个完整的“不工作”示例，该示例尝试读取使用前面的 python 片段创建的 hdf5 文件：

[http://gist.github.com/3168909](http://gist.github.com/3168909)

有人有建议吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-16T19:59:09.020

处理此问题的更简单方法是使用 1 字节无符号字符来存储布尔类型。在 h5py 中，您可以通过调用以下命令来存储布尔数组

```
import h5py
import numpy as np

# Generate some boolean data

shape = (100, 100)
data = np.zeros(shape, dtype=np.bool)

# Save the boolean data as uchars

f = h5py.File('foo.h5')
dset = f.create_dataset('/bar', dtype='u1', shape=shape)
dset[:] = data[:] 
```

In C/C++, you can read the uchars into a `bool*` array, and they will be interpreted correctly. This is because they are 1-byte, just like C/C++ boolean values, and anything with nonzero bits is interpreted in C/C++ as `true`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T11:01:11.743

找到了解决办法，需要在hdf5中创建一个枚举类型：

```
#define CPTR(VAR,CONST) ((VAR)=(CONST),&(VAR))
hid_t boolenumtype = H5Tcreate(H5T_ENUM, sizeof(bool));
status = H5Tenum_insert(boolenumtype, "FALSE",   CPTR(val, FALSE ));
printf ("H5Tenum_insert (FALSE): %i\n", status);
status = H5Tenum_insert(boolenumtype, "TRUE",   CPTR(val, TRUE ));
printf ("H5Tenum_insert (TRUE): %i\n", status); 
```

然后将其添加到 memtype 中：

```
H5Tinsert (memtype, "FLAG", HOFFSET (pointing_t, FLAG),  boolenumtype); 
```

github上的示例现在正在运行。

# shell - 在 unix 文件中的任何位置添加一列 [使用 awk 或 sed]

> ID：11627382
> 
> 赞同：5
> 
> 时间：2012-07-24T08:53:44.230
> 
> 标签：shell, unix, sed, awk

我正在为以下命令寻找其他替代方案/更智能的 1 衬里，它应该为请求的列号添加一个值。我尝试按照以下 sed 命令正常工作，将值 4 添加到第 4 列。[需要：因为我有这样的文件，其中包含 1000 条记录，并且很多时候我需要在任何位置之间添加一列。] 我的方法仅适用于较小的规模。

`cat 1.txt`

```
1|2|3|5
1|2|3|5
1|2|3|5
1|2|3|5 
```

`sed -i 's/1|2|3|/1|2|3|4|/g' 1.txt`

`cat 1.txt`

```
1|2|3|4|5
1|2|3|4|5
1|2|3|4|5
1|2|3|4|5 
```

提前谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-24T09:32:29.187

**字段分隔符**
[http://www.gnu.org/software/gawk/manual/html_node/Field-Separators.html](http://www.gnu.org/software/gawk/manual/html_node/Field-Separators.html)

**字符串连接**
[http://www.gnu.org/software/gawk/manual/html_node/Concatenation.html](http://www.gnu.org/software/gawk/manual/html_node/Concatenation.html)

**默认模式和操作**
[http://www.gnu.org/software/gawk/manual/html_node/Very-Simple.html](http://www.gnu.org/software/gawk/manual/html_node/Very-Simple.html)

```
 awk -v FS='|' -v OFS='|' '{$3=$3"|"4} 1' 1.txt 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-24T09:18:50.343

一种使用方式`awk`。将两个参数传递给脚本，列号和要插入的值。该脚本会增加字段的数量 ( `NF`) 并遍历最后一个字段，直到指定的位置并在那里插入新值。

运行此命令：

```
awk -v column=4 -v value="four" '
    BEGIN {
        FS = OFS = "|";
    }
    {
        for ( i = NF + 1; i > column; i-- ) {
            $i = $(i-1);
        }
        $i = value;
        print $0;
    }
' 1.txt 
```

具有以下输出：

```
1|2|3|four|5
1|2|3|four|5
1|2|3|four|5
1|2|3|four|5 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T09:42:52.607

一种使用`coreutils`和处理替换的方法：

```
f=1.txt
paste -d'|'                       \
  <(cut -d'|' -f1-3 $f          ) \
  <(yes  4 | head -n`wc -l < $f`) \
  <(cut -d'|' -f4- $f           ) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T11:59:49.037

一种方法，使用 coreutils 和进程替换：

```
sed 's/3|/3|4|/' 1.txt 
```

# java - 在文本框中设置日期？

> ID：11627386
> 
> 赞同：0
> 
> 时间：2012-07-24T08:54:06.403
> 
> 标签：java, gwt, gwt2, gwt-widgets

我为我的项目创建日期小部件。

n 对对象的 setProperty 和 getProperty 使用相同的小部件。

```
public TextBox getTimeTxtbx() {
        // TODO Auto-generated method stub

        timebx =new TextBox();

        timebx.setReadOnly(true);
        final PopupPanel popupPanel=new PopupPanel(true);
        final DatePicker datePicker=new DatePicker();

        datePicker.addValueChangeHandler(new ValueChangeHandler<Date>() {

            public void onValueChange(ValueChangeEvent<Date> event) {
                // TODO Auto-generated method stub

                Date date=event.getValue();
                timebx.setText(DateTimeFormat.getFormat("EEE MMM dd HH:mm:ss z yyyy").format(date));
                popupPanel.hide();
            }

        });
        popupPanel.setWidget(datePicker);
        timebx.addClickHandler(new ClickHandler() {

            public void onClick(ClickEvent event) {
                // TODO Auto-generated method stub
                String strDate = timebx.getText();
                System.out.println(" strDate " +strDate);
                DateTimeFormat format = DateTimeFormat.getFormat("[EEE MMM dd HH:mm:ss z yyyy]");
                try {  
                      Date selDate = (Date)format.parse(strDate); 
                      datePicker.setValue(selDate, true);
                    } catch(Exception pe){
                     // setting current date
                        System.out.println("error" +pe);
                     datePicker.setValue(new Date(), true);
                    }
                int x=timebx.getAbsoluteLeft();
                int y=timebx.getAbsoluteTop();
                popupPanel.setPopupPosition(x, y+20);
                popupPanel.show();
            }
        });
        return timebx;
    }
    public void setTimebx(String string) {
        // TODO Auto-generated method stub
        timebx.setText(string);
    } 
```

我在不同的 gui 类的 flexTable 中添加这个小部件

```
flexTable.setWidget(i, j,textBoxDisplay.getTimeTxtbx());
textBoxDisplay.setTimebx(customProperty.getValues().toString()); 
```

在 flexTable 中，上面的代码位于 a 中`iterator`并称为**Twice**。 ![在此处输入图像描述](../Images/d79a4a1bed1754014d1f5457ce13057e.png)

就像在图像中：testDate 收到的。

当我单击 testDate 时，Received On 的值已更改

* * *

已编辑

```
public ListBox getBooleanBox() {
        // TODO Auto-generated method stub
        selectBoolean = new ListBox(false);
        //selectBoolean.setName(title);
        selectBoolean.setStyleName("cmis-Customproperties-TextBox");
        selectBoolean.setSize("150px", "20px");
        selectBoolean.addItem("True","True");
        selectBoolean.addItem("False", "False");
        return selectBoolean;
    }
    public void setBooleanBox(String value){
         int itemCount = selectBoolean.getItemCount();
         for(int i = 0 ;i < itemCount;i++){
             if(selectBoolean.getItemText(i).equalsIgnoreCase(value)){
                 selectBoolean.setSelectedIndex(i);
             }
         }
    } 
```

加入弹性表

```
customPropertyTabel.setWidget(i, j,textBoxDisplay.getBooleanBox());
textBoxDisplay.setBooleanBox(removeSymbol(customProperty.getValues().toString())); 
```

这工作得很好。我得到了正确的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:47:28.653

在我看来，`textBoxDisplay`testingDate 和 receivedOn 是同一个小部件实例。这意味着如果添加了 receivedOn，它会覆盖 testingDate，因此当您单击 testingDate 图标时会弹出窗口。所以你需要一个`textBoxDisplay`测试日期和接收日期，比如：`textBoxDisplayTestingDate`和`textBoxDisplayReceivedOn`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T09:51:28.510

这是实现中的参考问题。

在您的第二次迭代中（当您创建 Received On 文本框时），您已将实例中`getTimeTxtbx`的局部变量设置为Received On 文本框的新引用。您的实现将文本设置为 on ，因此在您的第二次迭代中设置了 Received On 文本框而不是文本框。`timebx``textBoxDisplay``datePicker``onValueChange``timebx``testingDate`

`TextBoxDisplay`尝试在迭代期间使用新实例代替。

```
TextBoxDisplay textBoxDisplay = new TextBoxDisplay();
flexTable.setWidget(i, j,textBoxDisplay.getTimeTxtbx());
textBoxDisplay.setTimebx(customProperty.getValues().toString()); 
```

# firefox - 桌面应用程序和浏览器之间的通信

> ID：11627391
> 
> 赞同：2
> 
> 时间：2012-07-24T08:54:27.537
> 
> 标签：firefox, google-chrome, desktop-application, communication

如何实现桌面应用程序和浏览器之间的通信机制，例如 Firefox 或 Google Chrome。

是否有独立于平台的解决方案，或者我需要分别为每个平台实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T00:16:53.430

该应用程序要么为浏览器提供网络服务器。或其他第三个主机将是网络服务器，您的应用程序将在其中通过代理与浏览器通信（即向服务器发出请求“向浏览器发送此数据”）。

此外，您必须使用 AJAX 或页面刷新定期检查来自服务器的更新，因为服务器无法向浏览器发出命令，仅在浏览器请求时[这也可以通过 COMET 或 COMET-LIKE 技术实现]。

# wcf - WCF - 无法获取元数据，但在删除 XML 端点时工作？

> ID：11627392
> 
> 赞同：4
> 
> 时间：2012-07-24T08:54:29.360
> 
> 标签：wcf, web-config, wcftestclient

我在使用 WCF 测试客户端时遇到问题。我无法连接到我的 WebService，因为它一直遇到此错误：

> 错误：无法从 [http://xxx.xxxxxxxx.xxx/DPITerminal.svc](http://xxx.xxxxxxxx.xxx/DPITerminal.svc)获取元数据如果这是您有权访问的 Windows (R) Communication Foundation 服务，请检查您是否已在指定地址启用元数据发布。有关启用元数据发布的帮助，请参阅位于 [http://go.microsoft.com/fwlink/?LinkId=65455.WS-Metadata](http://go.microsoft.com/fwlink/?LinkId=65455.WS-Metadata) Exchange Error URI: [http://xxx.xxxxxxxx.xxx/DPITerminal.svc](http://xxx.xxxxxxxx.xxx/DPITerminal.svc)
> 的 MSDN 文档 元数据包含无法解析的引用：“http://xxx.xxxxxxxx.xxx/DPITerminal.svc”。内容类型应用程序/soap+xml；[服务http://xxx.xxxxxxxx.xxx/DPITerminal.svc](http://xxx.xxxxxxxx.xxx/DPITerminal.svc)不支持 charset=utf-8 . 客户端和服务绑定可能不匹配。远程服务器返回错误：（415）无法处理消息，因为内容类型'application/soap+xml; charset=utf-8' 不是预期的类型 'text/xml; charset=utf-8'..HTTP GET 错误 URI： http://xxx.xxxxxxxx.xxx/DPITerminal.svc 下载“http://xxx.xxxxxxxx.xxx/DPITerminal.svc”时出错[。](http://xxx.xxxxxxxx.xxx/DPITerminal.svc)

这是我的 Web.Config: [Link](http://pastie.org/4313058)。

如您所见，我已经有了

```
<serviceMetadata httpGetEnabled="true" /> 
```

也

```
<endpoint address="mex" binding="mexHttpBinding" bindingConfiguration="mex" contract="IMetadataExchange" /> 
```

正如其他 StackOverflow 问题中所建议的那样。还是不行。

我还注意到，当我评论以下端点时：

```
<endpoint address="x" behaviorConfiguration="poxBehavior" binding="webHttpBinding" bindingConfiguration="web" contract="xxx.xxxxxxxx.xxxxxx.WebService.IDPITerminal" /> 
```

一切都按预期工作。所以我猜我的 XML Endpoint 有问题？这很奇怪，因为 XML 端点共享 JSON 端点的绑定配置，而 JSON 没有任何问题。

另外，让我澄清一下，我只是在使用 WCF 测试客户端时遇到问题。JSON 和 XML 端点都工作正常。

编辑：

我尝试评论 XML 端点，发布，然后通过 WCF 测试客户端连接。然后我取消注释 XML Endpoint，重新发布。WCF 测试客户端仍然有效——我的意思是我可以发送和接收数据。当我刷新服务时，再次弹出无法获取元数据错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T20:44:28.363

似乎 WCF 不允许对 2 个端点使用相同的配置。

有解决此问题的解决方法：

1.  `bindingConfiguration`将端点的属性`address="x"`从更改`web`为`web2`
2.  添加新的 web2`webHttpBinding`配置（复制 web 配置）：

新绑定配置的代码：

```
<webHttpBinding>
    <binding name="web" ... />
    <binding name="web2" closeTimeout="00:10:00" openTimeout="00:10:00"
         sendTimeout="00:10:00" allowCookies="true" maxBufferSize="2147483647"
         maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647">
         <readerQuotas maxDepth="64" maxStringContentLength="2147483647"
            maxArrayLength="8192" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" /> 
    </binding>
</webHttpBinding> 
```

**更新：**

WCF 测试客户端无法获取元数据，`webHttpBinding`因为此类元数据不存在。RESTfull 服务不支持 WSDL 或用于 或 的类似`basicHttpBinding`协议`wsHttpBinding`。当 WCF 测试客户端尝试在两种情况下获取元数据时（当 WCF 测试客户端失败和不失败时），服务返回错误，但由于某种原因，在建议的解决方法的情况下，WCF 测试客户端设法吞下错误。很难说为什么没有 WCF 测试客户端源代码。

跟踪查看器中的错误：

![在此处输入图像描述](../Images/bd998a96d53cee04a45f3449636b38e7.png)

# php - 为什么 MySQL 以科学计数法返回一些浮点数，而不返回其他浮点数？

> ID：11627393
> 
> 赞同：6
> 
> 时间：2012-07-24T08:54:31.920
> 
> 标签：php, mysql, floating-point

我正在编写一个 PHP 脚本，它查看一个浮点值的 DB 表，它往往有点小，例如：

```
0.00052
0.00134
0.00103
0.00149
0.00085
0.00068
0.00077
0.00088
0.00169
0.00063 
```

由于我不知道的原因，一些值以科学计数法出现在数据库中，例如：

1.12305e-06

该表设置为浮动，我尝试了 PHP 中的各种函数来强制数字显示为十进制，但无济于事。尽我所能，我无法让这个数字表在所有情况下都是十进制的。

关于如何解决这个问题的任何建议？尝试过typcasting to `(float)`and using`number_format()`等几个选项，但每次都没有变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T09:04:41.190

CLI（可能还有其他地方）显示的内容似乎有六位数的限制。您的示例是 1.12305e-06 ，即 0.00000112305 将显示为 0.00000 - 尽管显然它不是零。

如果您坚持使用浮点数或双精度数，则必须使用`round(columnName,5)`强制以十进制值显示之类的东西来强制它们。否则，可能会切换到十进制数据类型。

来自[http://dev.mysql.com/doc/refman/5.0/en/floating-point-types.html](http://dev.mysql.com/doc/refman/5.0/en/floating-point-types.html)

因为浮点值是近似值而不是存储为精确值，所以在比较中尝试将它们视为精确值可能会导致问题。它们还受平台或实现依赖关系的影响。有关详细信息，请参阅第 C.5.5.8 节，“<a href="http://dev.mysql.com/doc/refman/5.0/en/problems-with-float.html" rel="nofollow">浮点值问题”</p>

另请参阅mysql 论坛上有关此确切问题的此[线程。](http://forums.mysql.com/read.php?10,263388)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T05:24:01.903

在我的案例中，解决方案原来是从数据库中的浮点类型更改为十进制类型，因此感谢 Romain 的评论让我研究了该解决方案！

# jquery - $.on('click') 中的 $.ajax 在页面加载期间运行

> ID：11627394
> 
> 赞同：0
> 
> 时间：2012-07-24T08:54:37.087
> 
> 标签：jquery, events

最近，当我有一些需要在点击事件中触发 $.ajax 的新功能时，我有一些如下代码，

```
$('.ClickMe').on('click', function() {

   // Do something

   $.ajax({
     type: 'POST',
     url: 'Foo.aspx/BarWebMethod',
     data: '{}',
     contentType: 'application/jspn',
     dataType: 'json',
     success: function(data) {
       // Do good thing
     },
     error: function() {
       // Do something bad
     }

}); 
```

我意识到该页面会在页面加载期间触发对我的 WebMethod 的 AJAX 调用并缓存所有结果，而不是在有人单击其类中具有“ClickMe”的元素期间触发它。

功能方面一切都很好，但是由于我有大约数百个元素会与上面的代码挂钩，而且我当然不想运行那些数百个过多的 AJAX 调用。我只想在用户单击任何元素时运行那段代码。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:00:08.173

您需要确保您实际上并未以某种方式触发点击事件。

为了简单起见，我会使用[.click](http://api.jquery.com/click/)而不是[.on](http://api.jquery.com/on/)

```
$(document).ready(function() {
  $("#target").click(function() {
    alert("Handler for .click() called.");
  });
}); 
```

将事件包装在 中`$(document).ready`也将确保在绑定单击事件之前加载文档。

还可以使用 Firebug 或 Chrome 开发人员工具（F12 是默认键绑定）查看重新加载页面时实际触发的网络请求。

![Chrome 开发者工具 - 网络](../Images/dbbe6e908779c56a84fae43fb0717cb9.png)

使用这些工具，您应该能够更多地了解您的网页实际在做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T08:59:21.247

除非单击 clickme 类的东西，否则这不会触发，传统的方法是附加到准备好的文档。

如果您不想缓存将其关闭，下面显示的是文档就绪的简写

```
$(function() {

  $.ajaxSetup({ cache: false });
  ...
  your click handler attached to element
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T08:59:27.473

将您的脚本放在此函数中

```
$(document).ready(function() {
  // Here goes your script.
}); 
```

# sql - PowerShell - 格式化 SQL 输出并将其写入 CSV

> ID：11627396
> 
> 赞同：3
> 
> 时间：2012-07-24T08:54:56.133
> 
> 标签：sql, powershell, csv, formatting

我有点被我的问题困住了，在网上搜索了几个小时后，我仍然没有找到解决方案。

我正在尝试执行以下操作：从几个内部连接的 SQL 表中读取 PowerShell 中的信息并将此信息保存在数据集中。这是我仍然能够做到的：

```
$SqlAdapter = New-Object System.Data.SqlClient.SqlDataAdapter
$SqlAdapter.SelectCommand = $command
$DataSet = New-Object System.Data.DataSet
$SqlAdapter.Fill($DataSet) 
```

然后将其导出为 CSV，如下所示：

```
$DataSet.Tables[0] | Export-Csv -Delimiter "," C:\test.csv -Encoding "unicode" 
```

现在问题来了。

我的 CSV 看起来像这样：

```
Servername,"Administrator","Description"
SRV01,"Admin1","Description SRV01"
SRV01,"Admin2","Description SRV01"
SRV01,"Admin3","Description SRV01"
SRV02,"Admin1","Description SRV02"
SRV02,"Admin2","Description SRV02" 
```

我的目标是获得如下所示的 CSV：

```
Servername,Administrator,Description
SRV01,Admin1 Admin2 Admin3,Description SRV01
SRV02,Admin1 Admin2,Description SRV02 
```

我怎样才能做到这一点？

编辑：

好的，它看起来像这样：

```
Servername,Administrator,Description
SRV01,Admin1,Description SRV01
SRV01,Admin2,Description SRV01
SRV01,Admin3,Description SRV01
SRV02,Admin1,Description SRV02
SRV02,Admin2,Description SRV02 
```

有没有人知道如何将其转换为这种语法：

```
Servername,Administrator,Description
SRV01,Admin1 Admin2 Admin3,Description SRV01
SRV02,Admin1 Admin2,Description SRV02 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T12:40:25.627

试试这个：

```
$csv = @"
Servername,Administrator,Description
SRV01,Admin1,Description SRV01
SRV01,Admin2,Description SRV01
SRV01,Admin3,Description SRV01
SRV02,Admin1,Description SRV02
SRV02,Admin2,Description SRV02
"@

$group = ConvertFrom-Csv $csv | Group-Object -Property Servername,Description

$group | select @{n='Name';e={ ($_.Name -split ",")[0] }}, @{n='Administrators';e={ ($_.Group | select -expandproperty Administrator) -join ","}},  @{n='Description';e={ ($_.Name -split ",")[1] }} |
 convertto-csv -NoTypeInformation | Foreach-Object  -begin { $start=$true }  -process { if ($start) { $start=$false } else { $_ }  } | foreach {$_ -replace '"'} 
```

# java - 使用 Spring 3 进行本地化时出错

> ID：11627397
> 
> 赞同：0
> 
> 时间：2012-07-24T08:55:01.717
> 
> 标签：java, spring, jakarta-ee, spring-mvc, localization

我的调度程序 servlet 中有以下内容：-

```
 <bean id="localizationMessageSource"
        class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
        <property name="basename" value="classpath:messages" />
        <property name="defaultEncoding" value="UTF-8"/>
    </bean>
    <bean id="localeChangeInterceptor"
        class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor">
        <property name="paramName" value="lang" />
    </bean>

    <bean id="localeResolver"
        class="org.springframework.web.servlet.i18n.CookieLocaleResolver">
        <property name="defaultLocale" value="wp"/>
    </bean>
 <bean id="localizationHandlerMapping"
        class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping">
        <property name="interceptors">
            <ref bean="localeChangeInterceptor" />
        </property>
    </bean> 
```

现在我有一个像这样的 JSP：-

```
<h3><spring:message code="first.name"/></h3>

<span style="float: right">
    <a href="?lang=boa">boa</a> 
    | 
    <a href="?lang=wp">wp</a>
</span> 
```

我面临的问题是，每当我来到上面的 JSP 页面时，我都会收到这样的错误：-

```
Jul 24, 2012 2:13:45 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet dispatcher threw exception
javax.servlet.jsp.JspTagException: No message found under code 'first.name' for locale 'wp'.
    at org.springframework.web.servlet.tags.MessageTag.doStartTagInternal(MessageTag.java:184)
    at org.springframework.web.servlet.tags.RequestContextAwareTag.doStartTag(RequestContextAwareTag.java:79)
    at org.apache.jsp.WEB_002dINF.jsp.resource.GeneralDetails_jsp._jspx_meth_spring_005fmessage_005f0(GeneralDetails_jsp.java:1985)
    at org.apache.jsp.WEB_002dINF.jsp.resource.GeneralDetails_jsp._jspService(GeneralDetails_jsp.java:214)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:377)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:551)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:488)
    at org.apache.jasper.runtime.JspRuntimeLibrary.include(JspRuntimeLibrary.java:968)
    at org.apache.jsp.WEB_002dINF.jsp.resource.ResComponent_jsp._jspService(ResComponent_jsp.java:2085)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:377)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:436)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:374)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:302)
    at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)
    at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250)
    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1047)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:817)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:669)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:574)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Unknown Source) 
```

我无法理解问题所在。我在论坛和其他地方做过，但我的代码似乎没有什么不同，这可能会出错。我有我的财产文件

messages_boa.properties 和 messages_wp.properties。但我仍然收到此错误，请帮助我解决此问题。我正在使用 Spring 3，主要是 MVC。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:12:53.503

我猜应用程序无法识别属性文件的位置。

编辑您的 messageSource bean，如下所示。

```
<bean id="messageSource"
    class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
    <property name="basename" value="classpath:messages" />
    <property name="defaultEncoding" value="UTF-8"/>
</bean> 
```

我希望这个链接对你有帮助。

[http://developers-blog.org/blog/de/2009/05/22/Spring-Localization](http://developers-blog.org/blog/de/2009/05/22/Spring-Localization)

# javascript - 在 Gridview 页面中搜索和突出显示文本

> ID：11627401
> 
> 赞同：1
> 
> 时间：2012-07-24T08:55:13.137
> 
> 标签：javascript, asp.net, gridview

我有一个`gridview`来自`dataset`. `Gridview`包含数千条记录，因此我使用`dataview`. 填充后`gridview`，我正在`gridview`使用 java 脚本的列中搜索文本并突出显示文本。它工作到行的末尾`gridview`。

`gridview`我想实现like search应该继续使用javascript的下一页。

gridivew 寻呼机控件被添加到面板中以与 gridview 分开。

搜索功能是从弹出窗口中发生的。我正在像这样从弹出窗口中的 javascript 访问面板中的控件。但它返回零作为长度。

```
var controls = window.opener.document.getElementById('ctl00_ContentPlaceHolder1_pnlpager1').getElementsByTagName("input");  
             alert(controls.length);   
       for (var i = 0; i < controls.length; i++)  

       alert(controls[i]); 
```

我们可以使用javascript搜索gridview所有页面中的gridview列吗

请检查 javascript 中的代码。

```
function searchback()
{//alert(window.opener)
    var rowid = -1 
    if (typeof(window.opener) != "undefined" && window.opener != null)
    {

         i = 1;
        if ((document.getElementById('<%= hdn_value.ClientId %>').value!="")&&(document.getElementById('<%= hdn_value.ClientId %>').value!="undefined"))
        {
            if ((document.getElementById('<%= hdn_ddVal.ClientId %>').value!="")&&(document.getElementById('<%= hdn_ddVal.ClientId %>').value!="undefined"))
            {
            //alert(document.getElementById('<%= hdn_ddVal.ClientId %>').value)
                if (document.getElementById('<%= hdn_ddVal.ClientId %>').value==document.getElementById('colNos').value)
                {
                    i=document.getElementById('<%= hdn_value.ClientId %>').value;
                    i--;
                }
            }
        }
      //alert(i);
        var rows = window.opener.document.getElementById(opener.gvwListViewId).getElementsByTagName('tr');             
        var searchData = document.getElementById('<%= hdn_SearchText.ClientId %>').value.toLowerCase();   
        //alert(searchData)
        var searchExp = new RegExp(searchData);
        //alert(searchExp)
        var colNo = document.getElementById('colNos').value;
        document.getElementById('<%= hdn_ddVal.ClientId %>').value=document.getElementById('colNos').value;
      //  alert(colNo)
       // alert(rows.length)
        while(i < rows.length)
        {               
            if(searchExp.test(rows[i].getElementsByTagName('td')[colNo].innerText.toLowerCase()))
            {             

            if (document.getElementById('rbtn_MatchFullWord').checked)
            {
                if (rows[i].getElementsByTagName('td')[colNo].innerText.toLowerCase().replace(/^\s+|\s+$/g,"")!=searchData.replace(/^\s+|\s+$/g,""))
                {                     
                    i--;
                    continue;
                }
            }
                //alert(i)
                // rows[i].click();
               // alert('done boss')   
               // rows[i].cells[colNo].blur()
                if ((document.getElementById('<%= hdn_value.ClientId %>').value!="")&&(document.getElementById('<%= hdn_value.ClientId %>').value!="undefined"))
                {
                    rows[document.getElementById('<%= hdn_value.ClientId %>').value].cells[colNo].style.backgroundColor=document.getElementById('<%= hdn_backColor.ClientId %>').value;
                }
                document.getElementById('<%= hdn_backColor.ClientId %>').value=rows[i].cells[colNo].style.backgroundColor;
                rows[i].cells[colNo].style.backgroundColor ='yellow';
                rows[i].scrollIntoView(false);
                document.getElementById('<%= hdn_value.ClientId %>').value = i; 
                break;
            }
            i--;   

        }
       // alert("hdn2:"+ document.getElementById('<%= hdn_value.ClientId %>').value);

        if (i == 0)
        {

            if (window.opener.document.getElementById('ctl00_toolbar1_ibtn_Next') != null)
            {
                if(yesno("Finished searching the current page. Do you want to search in the next page?", "Search") == 6)
                {
                    window.opener.document.getElementById('ctl00_toolbar1_ibtn_Next').click();
                }
            }
            else if (document.getElementById('<%= hdn_value.ClientId %>').value == "")
            {
            alert("Search Completed No Records Found");
            }

            else
            {
                alert('Search Completed');
            }
        }
    }
  //  alert('outside if');
    if (rowid != -1)
    {
   // alert('rowid'+rowid)
        window.returnValue = rowid;
        window.close;
    }
} 
```

# c# - 通过 C# 代码获取 Visual Studio 设置

> ID：11627403
> 
> 赞同：0
> 
> 时间：2012-07-24T08:55:18.923
> 
> 标签：c#, visual-studio-2010, visual-studio, sdk

我已经浏览了一个小时的互联网，但我找不到任何有关通过 C# 在**独立**应用程序中检索 Visual Studio 设置（例如 TFS url、代理 URL 等）的文档。我想我应该使用 Visual Studio SDK。任何代码片段将不胜感激！

# java - Eclipse 快速对话框 DefaultInformationControl

> ID：11627404
> 
> 赞同：0
> 
> 时间：2012-07-24T08:55:25.977
> 
> 标签：java, eclipse, eclipse-plugin

使用 Eclipse 的人必须熟悉 Eclipse 提供的快速对话框，例如快速访问（CTRL + 3）快速大纲（CTRL+O）快速类型层次结构（CTRL+T）等。有没有办法让我们自己的对话框像在我们的 Eclipse 插件中。

知道怎么做吗？一些与该主题相关的资源将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:07:30.627

那里没有具体的日食在做什么。您需要为已定义的命令定义键绑定。请通过链接：[键绑定](http://www.vogella.com/articles/EclipseCommandsKeybindings/article.html)了解更多信息。

# iphone - 从 iPhone 删除日历的问题

> ID：11627407
> 
> 赞同：0
> 
> 时间：2012-07-24T08:55:38.690
> 
> 标签：iphone, icalendar, eventkit

我已经通过编码成功创建了日历，并在该日历中创建了事件。我可以通过编码删除日历，但是当我选择 iPhone 的日历并删除新创建的日历时，这次删除不起作用。请建议。

```
EKEventStore *eventStore = [[EKEventStore alloc] init];
EKCalendar *calendar = [EKCalendar calendarWithEventStore:eventStore];
calendar.title = CALENDAR_TITLE;

// Iterate over all sources in the event store and look for the local source
EKSource *theSource = nil;
for (EKSource *source in eventStore.sources) {
    if (source.sourceType == EKSourceTypeLocal) {
        theSource = source;
        break;
    }
}

if (theSource) {
    calendar.source = theSource;
} else {
    NSLog(@"Error: Local source not available");
    return;
}

NSError *error = nil;
BOOL result = [eventStore saveCalendar:calendar commit:YES error:&error];
if (result) {
    NSLog(@"Saved calendar to event store.")
    self.calendarIdentifier = calendar.calendarIdentifier;
} else {
    NSLog(@"Error saving calendar: %@.", error);
}

// Delete Calendar
EKEventStore *eventStore = [[EKEventStore alloc] init];
EKCalendar *calendar = [eventStore calendarWithIdentifier:self.calendarIdentifier];
if (calendar) {
    NSError *error = nil;
    BOOL result = [self.eventStore removeCalendar:calendar commit:YES error:&error];
    if (result) {
        NSLog(@"Deleted calendar from event store.");
    } else {
        NSLog(@"Deleting calendar failed: %@.", error);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T07:24:57.230

我也有同样的经历。在 iOS 5.0 上，日历似乎也自动用于提醒。您需要从提醒应用程序中删除日历。

我认为这可能是 iOS 中的一个错误，当您尝试从日历应用程序中删除以编程方式创建的日历失败时，您甚至没有收到通知。

# android - 尝试显示多个标记时出现异常

> ID：11627412
> 
> 赞同：1
> 
> 时间：2012-07-24T08:55:47.600
> 
> 标签：android

我正在开发一个显示带有多个标记的地图的 Android 应用程序。对于相同的代码，当我使用新应用程序运行时它可以正常工作，但是当我将它与我的应用程序集成时它就不行了。它给了我一个异常/错误，如下所示：

```
 07-24 14:19:55.737: ERROR/AndroidRuntime(1645): FATAL EXCEPTION: main
    07-24 14:19:55.737: ERROR/AndroidRuntime(1645): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.maps/com.maps.DisplayMap}: java.lang.NullPointerException
    07-24 14:19:55.737: ERROR/AndroidRuntime(1645):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
    07-24 14:19:55.737: ERROR/AndroidRuntime(1645):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
    07-24 14:19:55.737: ERROR/AndroidRuntime(1645):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
    07-24 14:19:55.737: ERROR/AndroidRuntime(1645):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
    07-24 14:19:55.737: ERROR/AndroidRuntime(1645):     at android.os.Handler.dispatchMessage(Handler.java:99)
    07-24 14:19:55.737: ERROR/AndroidRuntime(1645):     at android.os.Looper.loop(Looper.java:123)
    07-24 14:19:55.737: ERROR/AndroidRuntime(1645):     at android.app.ActivityThread.main(ActivityThread.java:4627)
    07-24 14:19:55.737: ERROR/AndroidRuntime(1645):     at java.lang.reflect.Method.invokeNative(Native Method)
    07-24 14:19:55.737: ERROR/AndroidRuntime(1645):     at java.lang.reflect.Method.invoke(Method.java:521)
    07-24 14:19:55.737: ERROR/AndroidRuntime(1645):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
    07-24 14:19:55.737: ERROR/AndroidRuntime(1645):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
    07-24 14:19:55.737: ERROR/AndroidRuntime(1645):     at dalvik.system.NativeStart.main(Native Method)
    07-24 14:19:55.737: ERROR/AndroidRuntime(1645): Caused by: java.lang.NullPointerException
    07-24 14:19:55.737: ERROR/AndroidRuntime(1645):     at com.maps.DisplayMap.onCreate(DisplayMap.java:32)
    07-24 14:19:55.737: ERROR/AndroidRuntime(1645):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
    07-24 14:19:55.737: ERROR/AndroidRuntime(1645):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 
```

我的代码：

```
package com.maps;
import java.util.ArrayList;
import java.util.List;
import android.graphics.Canvas;
import android.graphics.Point;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.view.KeyEvent;
import android.view.View;
import android.view.ViewGroup;
import android.widget.RelativeLayout;
import android.widget.TextView;
import com.google.android.maps.GeoPoint;
import com.google.android.maps.ItemizedOverlay;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;
import com.google.android.maps.MyLocationOverlay;
import com.google.android.maps.OverlayItem;

public class DisplayMap extends MapActivity {
  private MapView map=null;
  private MyLocationOverlay me=null;
  private SitesOverlay sites=null;

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    map=(MapView)findViewById(R.id.map);

    map.getController().setCenter(getPoint(19.159646,
                                            72.995664));
    map.getController().setZoom(17);
    map.setBuiltInZoomControls(true);

    sites=new SitesOverlay();
    map.getOverlays().add(sites);

    me=new MyLocationOverlay(this, map);
    map.getOverlays().add(me);
  }

  @Override
  public void onResume() {
    super.onResume();

    me.enableCompass();
  }  

  @Override
  public void onPause() {
    super.onPause();

    me.disableCompass();
  }  

  @Override
  protected boolean isRouteDisplayed() {
    return(false);
  }

  @Override
  public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_S) {
      map.setSatellite(!map.isSatellite());
      return(true);
    }
    else if (keyCode == KeyEvent.KEYCODE_Z) {
      map.displayZoomControls(true);
      return(true);
    }
    else if (keyCode == KeyEvent.KEYCODE_H) {
      sites.toggleHeart();

      return(true);
    }

    return(super.onKeyDown(keyCode, event));
  }

  private GeoPoint getPoint(double lat, double lon) {
    return(new GeoPoint((int)(lat*1000000.0),
                          (int)(lon*1000000.0)));
  }

  private class SitesOverlay extends ItemizedOverlay<CustomItem> {
    private Drawable heart=null;
    private List<CustomItem> items=new ArrayList<CustomItem>();
    private PopupPanel panel=new PopupPanel(R.layout.popup);

    public SitesOverlay() {
      super(null);

      heart=getMarker(R.drawable.heart_full);

      items.add(new CustomItem(getPoint(40.748963847316034,
                                          -73.96807193756104),
                                "","",
                                getMarker(R.drawable.blue_full_marker),
                                heart));
      items.add(new CustomItem(getPoint(40.76866299974387,
                                          -73.98268461227417),
                                "",
                                "",
                                getMarker(R.drawable.orange_full_marker),
                                heart));
      items.add(new CustomItem(getPoint(40.765136435316755,
                                          -73.97989511489868),
                                "",
                                "",
                                getMarker(R.drawable.green_full_marker),
                                heart));
      items.add(new CustomItem(getPoint(40.70686417491799,
                                          -74.01572942733765),
                                "",
                                "",
                                getMarker(R.drawable.purple_full_marker),
                                heart));
      populate();
    }

    @Override
    protected CustomItem createItem(int i) {
      return(items.get(i));
    }

    @Override
    public void draw(Canvas canvas, MapView mapView,
                      boolean shadow) {
      super.draw(canvas, mapView, shadow);

    }

    @Override
    protected boolean onTap(int i) {
      OverlayItem item=getItem(i);
      GeoPoint geo=item.getPoint();
      Point pt=map.getProjection().toPixels(geo, null);

      View view=panel.getView();

      ((TextView)view.findViewById(R.id.latitude))
        .setText(String.valueOf(geo.getLatitudeE6()/1000000.0));
      ((TextView)view.findViewById(R.id.longitude))
        .setText(String.valueOf(geo.getLongitudeE6()/1000000.0));
      ((TextView)view.findViewById(R.id.x))
                              .setText(String.valueOf(pt.x));
      ((TextView)view.findViewById(R.id.y))
                              .setText(String.valueOf(pt.y));

      panel.show(pt.y*2>map.getHeight());

      return(true);
    }

    @Override
    public int size() {
      return(items.size());
    }

    void toggleHeart() {
      CustomItem focus=getFocus();

      if (focus!=null) {
        focus.toggleHeart();
      }

      map.invalidate();
    }

    private Drawable getMarker(int resource) {
      Drawable marker=getResources().getDrawable(resource);

      marker.setBounds(0, 0, marker.getIntrinsicWidth(),
                        marker.getIntrinsicHeight());
      boundCenter(marker);

      return(marker);
    }
  }

  class PopupPanel {
    View popup;
    boolean isVisible=false;

    PopupPanel(int layout) {
      ViewGroup parent=(ViewGroup)map.getParent();

      popup=getLayoutInflater().inflate(layout, parent, false);

      popup.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
          hide();
        }
      });
    }

    View getView() {
      return(popup);
    }

    void show(boolean alignTop) {
      RelativeLayout.LayoutParams lp=new RelativeLayout.LayoutParams(
            RelativeLayout.LayoutParams.WRAP_CONTENT,
            RelativeLayout.LayoutParams.WRAP_CONTENT
      );

      if (alignTop) {
        lp.addRule(RelativeLayout.ALIGN_PARENT_TOP);
        lp.setMargins(0, 20, 0, 0);
      }
      else {
        lp.addRule(RelativeLayout.ALIGN_PARENT_BOTTOM);
        lp.setMargins(0, 0, 0, 60);
      }

      hide();

      ((ViewGroup)map.getParent()).addView(popup, lp);
      isVisible=true;
    }

    void hide() {
      if (isVisible) {
        isVisible=false;
        ((ViewGroup)popup.getParent()).removeView(popup);
      }
    }
  }

  class CustomItem extends OverlayItem {
    Drawable marker=null;
    boolean isHeart=false;
    Drawable heart=null;

    CustomItem(GeoPoint pt, String name, String snippet,
               Drawable marker, Drawable heart) {
      super(pt, name, snippet);

      this.marker=marker;
      this.heart=heart;
    }

    @Override
    public Drawable getMarker(int stateBitset) {
      Drawable result=(isHeart ? heart : marker);

      setState(result, stateBitset);

      return(result);
    }

    void toggleHeart() {
      isHeart=!isHeart;
    }
  }
} 
```

# image - 处理自定义 UserAgentCallback 的图像时飞碟出现异常

> ID：11627418
> 
> 赞同：1
> 
> 时间：2012-07-24T08:56:20.520
> 
> 标签：image, pdf, flying-saucer

我已经为 Flying Saucer R8 设置了一个测试环境，并且正在测试从模板和数据构建 PDF。我正在使用自定义 UserAgentCallback 从文件系统本地读取外部 js/css 和图像。引入如下自定义UserAgentCallback时出现问题：

```
package support;

import java.io.File;
import java.io.FileInputStream;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.net.URL;

import org.xhtmlrenderer.swing.NaiveUserAgent;

public class FileUserAgent extends NaiveUserAgent {
    @Override
    public String resolveURI(String uri) {
        URL url = null;
        String path = null;
        try {
            url = new URL(uri);
            path = url.getPath();
        } catch (MalformedURLException e) {
            // only path present
            path = uri;
        }
        if (path.charAt(0) == '/') {
            path = path.substring(1, path.length());
        }
        return path;
    }

    @Override
    protected InputStream resolveAndOpenStream(String filepath) {
        InputStream is = null;
        try {
            File file = new File(filepath);
            is = new FileInputStream(file);
        } catch (Exception e) {
            System.out.print("an error occured when reading resource: " + e.getMessage());
        }
        return is;
    }
} 
```

UserAgentCallback 能够毫无问题地读取 CSS，但是当从 src 或 background-image 属性读取图像时，我得到以下异常：

```
java.lang.ClassCastException: org.xhtmlrenderer.swing.AWTFSImage$OldAWTFSImage cannot be cast to org.xhtmlrenderer.pdf.ITextFSImage
    at org.xhtmlrenderer.pdf.ITextOutputDevice.drawImage(ITextOutputDevice.java:761)
    at org.xhtmlrenderer.render.AbstractOutputDevice.paintTiles(AbstractOutputDevice.java:300)
    at org.xhtmlrenderer.render.AbstractOutputDevice.paintBackground0(AbstractOutputDevice.java:245)
    at org.xhtmlrenderer.render.AbstractOutputDevice.paintBackground(AbstractOutputDevice.java:191)
    at org.xhtmlrenderer.pdf.ITextOutputDevice.paintBackground(ITextOutputDevice.java:187)
    at org.xhtmlrenderer.render.Box.paintBackground(Box.java:436)
    at org.xhtmlrenderer.layout.Layer.paintBackgroundsAndBorders(Layer.java:243)
    at org.xhtmlrenderer.layout.Layer.paint(Layer.java:329)
    at org.xhtmlrenderer.pdf.ITextRenderer.paintPage(ITextRenderer.java:384)
    at org.xhtmlrenderer.pdf.ITextRenderer.writePDF(ITextRenderer.java:348)
    at org.xhtmlrenderer.pdf.ITextRenderer.createPDF(ITextRenderer.java:315)
    at org.xhtmlrenderer.pdf.ITextRenderer.createPDF(ITextRenderer.java:246) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:46:37.457

根据我在飞碟论坛上读到的内容，您必须确保返回正确的 ImageResource！

对我有帮助的是使用 ITextUserAgent 而不是 NaiveUserAgent 扩展类。（ITextUserAgent 扩展了 NaiveUserAgent）。

# eclipse - 无法连接到 collabnet 中的存储库

> ID：11627421
> 
> 赞同：0
> 
> 时间：2012-07-24T08:56:46.723
> 
> 标签：eclipse, repository, collabnet

我已经设置了 collabnet subversion 边缘服务器，并且已经为 eclipse 安装了 collabnet 插件。我遇到的问题是我无法连接到我的存储库。当我尝试将项目导入服务器时，出现这样的错误：

svn: 无法连接到 URL 'http://localhost/viewvc/rep/android' 的存储库 svn: 'http://localhost/viewvc/rep/android' 找不到路径

我能做些什么来解决这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:15:17.227

请尝试使用`http://localhost/svn/rep/android`而不是`http://localhost/viewvc/rep/android`

viewvc url 仅用于通过 viewvc 在浏览器中查看 repo 内容

# c# - 从列表中获取项目并将其内部列表放入一个列表中？

> ID：11627424
> 
> 赞同：1
> 
> 时间：2012-07-24T08:57:03.640
> 
> 标签：c#, linq, list

我有一个清单

```
public class Org
{
  public string Name;
  public List<OrgPost> OrgPostCollection= new List<OrgPost>();
}

public class OrgPost
{
  public string OrgPostTitle;
} 
```

并且有：

```
List<Org> OrgCollection=//GetAll(Org); 
```

现在我有一个这样的组织列表

```
 [Name,OrgPostCollection]
   [Name2,OrgPostCollection2]
   ... 
```

但我需要这样的东西：

```
 [Name1,OrgPostCollection[0]]
   [Name1,OrgPostCollection[1]
   [Name2,OrgPostCollection[0]]
   [Name2,OrgPostCollection[1]]
   ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T09:05:09.580

您可以进行嵌套选择：

```
 var flatEnumerable = from o in OrgCollection
                        from p in o.OrgPostCollection
                        select new Tuple<Org, OrgPost>(o, p); 
```

然后你可以在 中投射任何你想要的东西`select`，我投射`Tuple<Org, OrgPost>`.

结果`flatEnumerable`是`IEnumerable<Tuple<Org, OrgPost>>`，然后您可以调用`ToList`或`ToArray`将可枚举对象解析为列表或数组：

```
List<Tuple<Org, OrgPost>> flatList = flatEnumerable.ToList();
Tuple<Org, OrgPost>[] flatArray = flatEnumerable.ToArray(); 
```

# c++ - 删除使用自定义 new 运算符分配的对象

> ID：11627426
> 
> 赞同：2
> 
> 时间：2012-07-24T08:57:15.510
> 
> 标签：c++, memory, memory-management

我正在为 STL 编写一个基于堆栈的分配器。这个想法是一次分配一大块内存，并在构造对象时让它建立起来，然后在需要时将其重置为零。例如，这可用于存储游戏的关卡信息或为游戏循环的单次迭代创建的对象。当你加载一个关卡时，你建立了堆栈，当你需要加载一个新的关卡时，你只需将顶部指针重置为开头，不需要操作系统调用。

现在我的问题是标准分配器做事的方式，即`deallocate()`函数。在[这篇](http://www.cplusplus.com/reference/std/memory/allocator/deallocate/)文章中，我可以读到

> 在默认分配器中，使用 ::operator delete 释放存储块。

这意味着通过使用该`deallocate()`函数，既可以释放内存，又可以调用析构函数。现在为了我的分配器的目的，我可以使`deallocate()`函数为空，因为我不会为单个对象释放内存。

那么问题来了，**STL 容器如何使用分配器类来创建新对象？由于默认分配器使用`new`and `delete`，容器是否曾经调用`construct()`or `destroy()`？**我应该让我的`deallocate()`函数也调用 descutor 吗？

我想同样的问题也适用于`allocate()`and`construct()`方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T09:10:02.403

> 这意味着通过使用 deallocate() 函数既可以释放内存，又可以调用析构函数

不，它没有。`::operator delete`是全局删除函数，它只是释放内存。`delete`运算符是另一回事，尽管名称相似——它先解构然后调用删除函数（全局删除函数或重载）。

析构`destroy`函数由分配器的函数调用。

标准容器用于`allocate`获取一些内存，然后`construct`当且仅当它们需要该内存以包含元素时，`destroy`当且仅当它们`construct`编辑并`deallocate`释放内存时。例如：

```
{
    std::vector<int> v; // may or may not call anything on the allocator
    v.reserve(10000); // calls 'allocate'
    v.resize(100); // calls 'construct' 100 times
    v.resize(50); // calls 'destroy' 50 times
} // destructor calls 'destroy' 50 times and then 'deallocate' 
```

# solr - Solr 查询 (q) 或过滤器查询 (fq)

> ID：11627427
> 
> 赞同：31
> 
> 时间：2012-07-24T08:57:17.930
> 
> 标签：solr

我有一个~1 百万的产品文档 Solr 索引。我还有一大堆 UI 过滤器，例如类别、选项卡、价格范围、尺寸、颜色和其他一些过滤器。

让 q 选择所有内容`(q=\*:\*)`而 fq 中的所有其他过滤器是正确的方法吗？例子：

`fq=(catid:90 OR catid:81) AND priceEng:[38 TO 40] AND (size:39 OR size:40 OR size:41 OR size:50 OR size:72) AND (colorGroup:Yellow OR colorGroup:Violet OR colorGroup:Orange ... AND (companyId:81 OR companyId:691 OR companyId:671 OR companyId:628 OR companyId:185 OR companyId:602 OR ... AND endShipDays:[* TO 7])`

对我来说，从类别到公司 ID，从颜色和尺寸等一切都只是过滤器。这种方法在未来增长中的性能有什么问题吗？我应该将一些查询放在 q 中，哪些？

谢谢，

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-07-24T09:09:03.780

最好尽可能使用过滤查询而不是普通查询。

[FilterQuery](http://wiki.apache.org/solr/CommonQueryParameters#fq)能够利用[FilterCache](http://wiki.apache.org/solr/SolrCaching#filterCache)，与您的查询相比，这将是一个巨大的性能提升。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-02-12T19:57:16.737

为了决定，我会查看有关字段的以下几点：

1.  您的领域是否有固定的提升分数，或者您是否需要为该领域评分？如果是，就放到query中，因为上面说过，filter query不使用scores。
2.  该字段的条件是否经常使用？如果是 - 再次，如前所述，过滤缓存可能会带来巨大的优势，但如果不是 - 它可能会更慢。
3.  你的指数是恒定的吗？这有点类似于#2。如果您的索引经常更新，过滤查询的使用可能会成为瓶颈，而不是提高性能。

关于#3 的一些注意事项：根据我的经验，我有一个大索引，每隔几秒就会填充一次新文档，并且 autoSoftCommit 也设置为几秒。在软提交期间，打开了新的搜索器，这使缓存无效。所以真正发生了什么，过滤命中率几乎总是 0。我可以告诉更多：我发现第一次过滤查询运行比运行所有过滤条件移动到“q”而不是“ fq”。例如，当我使用“AND”将所有“fq”条件移动到主查询中时，我的查询用了 1 秒和 5 个过滤器查询（没有缓存命中）和 147 毫秒。但是，当然，当我停止索引更新时，相同的过滤器查询需要 0 毫秒，因为使用了缓存。所以这是需要考虑的事情。

您的问题还有其他几点：

*   尽量不要在查询中使用通配符。它显着影响性能。因此，我建议使用一种条件，而不是“ *： ”*
*   范围搜索也最好避免（如果可能）。使用通配符进行范围搜索甚至更多。这是关于您的“endShipDays：[* TO 7]”。例如，使用“endShipDays:(1 2 3 4 5 6 7)”会更有效，但这只是一个例子，有很多方法。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-03-23T07:32:52.453

我使用**q**和**fq**的方式。**我在q**上应用全文搜索，在**fq**上应用所有过滤器。假设您有字段**关键字**，您将使用 copyField 在架构中定义的字段进行全文搜索

```
<copyField source="id" dest="keyword"/>
<copyField source="category" dest="keyword"/>
<copyField source="product_name" dest="keyword"/>
<copyField source="color" dest="keyword"/>
<copyField source="location" dest="keyword"/>
<copyField source="price" dest="keyword"/>
<copyField source="title" dest="keyword"/>
<copyField source="description" dest="keyword"/> 
```

我的查询看起来像

```
/select?q={keyword}&fq=category:fashion&fq=location:nyc

/select?q=jeans&fq=category:fashion&fq=location:nyc 
```

正如 digitaljoel 建议的那样，如果您必须查询多个字段，那么最好使用多个 fq（请参阅上面的查询）而不是使用 AND 和 OR 与**q**

注意：在我的例子中，**q** default 指的是solrconfig.xml 中定义的field*关键字*

```
<requestHandler name="/select" class="solr.SearchHandler">
<!-- default values for query parameters can be specified, these
     will be overridden by parameters in the request
  -->
 <lst name="defaults">
   <str name="echoParams">explicit</str>
   <int name="rows">10</int>
   <str name="df">keyword</str>
 </lst> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-03-25T17:26:43.580

考虑您的查询，并将所有不需要评分且可重复的内容放入`fq`参数中。这样，在打开搜索器之间将命中 Solr 节点的连续查询将能够重用存储在 FilterCache 中的信息。

过滤器缓存将唯一过滤器存储为过滤器中的键 - 值是一个位数组，其中数组的每个条目表示给定文档是否与给定过滤器匹配。这样就很容易为下一个查询重新应用过滤器。但是，您当然会错过得分能力。

在查看您的查询时，我会通过使用多个`fq`值来简化它，其中包括：

```
fq=(catid:90 OR catid:81)
fq=priceEng:[38 TO 40]
fq=(size:39 OR size:40 OR size:41 OR size:50 OR size:72)
fq=(colorGroup:Yellow OR colorGroup:Violet OR colorGroup:Orange  ... ) 
fq=(companyId:81 OR companyId:691 OR companyId:671 OR companyId:628 OR companyId:185 OR companyId:602 OR ... ) 
fq=endShipDays:[* TO 7]) 
```

过滤器是附加的，所以查询会返回相同的结果，但至少对我来说更容易管理:)

# android - 模拟器只收到 GCM 消息？

> ID：11627428
> 
> 赞同：2
> 
> 时间：2012-07-24T08:57:18.567
> 
> 标签：android, google-cloud-messaging

我在 GCM 的帮助下准备了一份 GCM 应用程序[：入门](http://developer.android.com/guide/google/gcm/gs.html)。它工作正常。我在模拟器中收到消息。我已经在设备中安装了我的应用程序。当我从服务器模拟器发送消息时只收到消息，但设备没有收到消息。我认为在某些地方犯了一些错误，请指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T06:50:06.570

您是否在 GCM 中注册了设备？要获取注册 ID，您必须执行以下代码：

在 onCreate() 方法中，添加以下代码：

```
GCMRegistrar.checkDevice(this);
GCMRegistrar.checkManifest(this);
final String regId = GCMRegistrar.getRegistrationId(this);
if (regId.equals("")) {
  GCMRegistrar.register(this, SENDER_ID);
} else {
  Log.v(TAG, "Already registered");
} 
```

在这里，您将获得 regId，您必须将其发送到服务器，以便服务器可以向具有上述 regId 的设备发送推送通知。

如需更多帮助，请参阅[此处](http://developer.android.com/guide/google/gcm/gs.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T09:20:39.180

检查 GCMRegistrar 日志。如果成功注册，设备无法`t register in GCM , can`收到消息，您会在日志控制台中看到设备 regId。

或者

检查您的第 3 方服务器或数据库。

# google-drive-api - 将文件从 Google Drive 复制到我自己的服务器

> ID：11627433
> 
> 赞同：1
> 
> 时间：2012-07-24T08:57:27.620
> 
> 标签：google-drive-api

如果您还记得，我正在尝试将 Google Drive 集成到我们基于 Elgg 构建的网站中。Elgg 已经拥有自己的本地文件管理系统。

我们想做的是将文件从 Drive 复制到我们的服务器，你知道，有点：发送到我的文件。问题是我在文件元数据中看不到任何指示文件物理存储位置的 URL。

我可以在 Google Drive SDK 中看到复制功能，但我认为它不允许在我们自己的服务器上复制文件。除非我读错了。

你能帮助我吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T20:55:25.217

如果您尝试保存内容存储在驱动器中的文件（例如图像、pdf 等），则文件的元数据应包含`downloadUrl`可用于通过授权`GET`请求检索文件内容的 。

对于 Google 文档（Google 文档、Google 电子表格等），数据以第三方应用程序无法理解的私有格式存储。在这种情况下，您的应用程序将不得不使用其中一种公开`exportLinks`文件将文档导出为您的应用程序可以理解的格式。

# objective-c - 在 NSMutableArray 中移动多个对象

> ID：11627434
> 
> 赞同：0
> 
> 时间：2012-07-24T08:57:33.417
> 
> 标签：objective-c, ios, nsmutablearray, nsarray

假设我有一个这样的 NSMutableArray：

对象 0 对象 1 对象 2 对象 3 对象 4

并希望将对象 0 和对象 1 移到对象 4 后面：

对象 2 对象 3 对象 4 对象 0 对象 1

我有这个相当长的代码来实现多个对象的重新排序，但我想知道是否有更直接/优雅的方式：

```
 int from = 0;
    int to = 5;
    int lastIndexOfObjectsToBeMoved = 1;    
    NSMutableArray *objectsToBeMoved = [[NSMutableArray alloc] init];
    for (int i = from; i < lastIndexOfObjectsToBeMoved; i++) {
        object *o = [self.objects objectAtIndex:i];
        [objectsToBeMoved addObject:o];
    }

    NSUInteger length = lastIndexOfObjectsToBeMoved-from;
    NSRange indicesToBeDeleted = NSMakeRange(from, length);
    [self.objects removeObjectsInRange:indicesToBeDeleted];

    NSIndexSet *targetIndices = [NSIndexSet indexSetWithIndexesInRange:NSMakeRange(to, length)];
    [self.objects insertObjects:objectsToBeMoved atIndexes:targetIndices]; 
```

* * *

编辑：对不起，我应该澄清一下，我并不总是将对象移动到最后，但也希望能够执行诸如将对象 2 和 3 移动到索引 0 之类的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T09:08:36.413

将要移到后面的索引创建一个 NSRange。用 抓取这些对象`subarrayWithRange`，用 删除它们，`removeObjectsInRange:`然后通过调用将它们添加到末尾`addObjectsFromArray:`。这是一种更简洁的方式来编写您所拥有的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T11:17:54.323

rowIndexes 是一个 NSIndexSet ，其中包含您喜欢移动的对象

行是索引目标

```
NSArray *objectsToMove = [your_array objectsAtIndexes: rowIndexes];

// If any of the removed objects come before the row
// we want to decrement the row appropriately
row -= [rowIndexes countOfIndexesInRange: (NSRange){0, row}];

[your_array removeObjectsAtIndexes:rowIndexes];
[your_array replaceObjectsInRange: (NSRange){row, 0}
       withObjectsFromArray: objectsToMove]; 
```

我希望这可以帮助你

# facebook - Watir webdriver附加窗口并等待

> ID：11627436
> 
> 赞同：0
> 
> 时间：2012-07-24T08:57:37.043
> 
> 标签：facebook, google-chrome, webdriver, watir

我正在尝试检测何时显示 Facebook 弹出窗口，然后填写 Facebook 登录表单。我已经尝试了附加方法、等待方法和睡眠方法，但似乎一旦我启动新页面，所有连接都会丢失：

```
 #this output is displayed
 puts "lets the game begingsx"
 $b.goto("javascript:gigya.services.socialize.plugins.login.providerClick('loginPluginDiv','facebook')")

 #this output is never displayed
 puts "lets start sleep"

 $b.window(:title,/Log In | Facebook/i).use do
   $b.text_field(:id => 'email').when_present.set("xyz@gmail.com")
 end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:01:39.957

这是使用新打开/弹出窗口的方法

```
@my_browser = Watir::Browser.new
@my_browser.goto "your first url" 
```

当您获得 facebook 弹出窗口时，请执行以下操作以在弹出窗口上执行操作。我假设你现在是 facebook 弹出窗口上的标题

```
@my_browser.window(:title => "facebook login popup title").use do
  @my_browser.button(:id => "yout buttone id").click
end 
```

我希望它会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T15:04:24.710

问题是您为 Facebook 登录页面使用了错误的标题。页面标题在 html 元素中。所以使用这个构造

```
@browser.window(:title => 'Facebook').wait_until_present
@browser.window(:title => 'Facebook').use do

end 
```

问候，卡罗。

# c# - 我可以在哪里下载 google earth api for asp.net web application

> ID：11627438
> 
> 赞同：-5
> 
> 时间：2012-07-24T08:57:47.597
> 
> 标签：c#, asp.net, google-earth

我想用谷歌地球创建一个网络应用程序。但我无法下载 asp.net Google Earth API。有什么方法可以创建 Google 地球应用程序吗？请给出一些想法来创建这个应用程序。

提前致谢..

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-07-24T09:13:54.463

试试这个，它对我有用

[http://www.searchengineknowledge.com/hosting/embedgooglemaps.php](http://www.searchengineknowledge.com/hosting/embedgooglemaps.php)

# oracle - 调用 Oracle DB 的 Drupal 模块

> ID：11627439
> 
> 赞同：0
> 
> 时间：2012-07-24T08:57:48.520
> 
> 标签：oracle, drupal

在 Drupal 架构上工作，我希望有一个独立的 Drupal/DrupalCommerce 安装，其产品定义基于来自单独的 Oracle DB 的内容。

有没有人有集成 Drupal 和 ORacle 的经验。我不是在谈论用 ORacle 替换 MySQL，而是在特定模块中使用 ORacle 内容。什么是最好的连接选项：XML-RPC、REST、WebServices/SOAP ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T18:48:48.880

您是否尝试在 Drupal 设置文件中将 Oracle 数据库定义为辅助数据库？

*   [http://www.php.net/manual/en/book.oci8.php](http://www.php.net/manual/en/book.oci8.php)
*   [http://drupal.org/project/oracle](http://drupal.org/project/oracle)

如果您设法连接，则可以编写一个自定义模块来切换到辅助数据库，从 Oracle 数据库中检索数据并将其带入 Drupal 上下文。

我想知道您是否找到了其他解决方案。

# c++ - 正则表达式 C++：提取子字符串

> ID：11627440
> 
> 赞同：28
> 
> 时间：2012-07-24T08:57:58.660
> 
> 标签：c++, regex

我想在另外两个之间提取一个子字符串。
例如：`/home/toto/FILE_mysymbol_EVENT.DAT`
或者只是`FILE_othersymbol_EVENT.DAT`
我想得到：`mysymbol`和`othersymbol`

我不想使用 boost 或其他库。只是来自 C++ 的标准东西，除了 CERN 的 ROOT 库，带有[TRegexp](http://root.cern.ch/root/html/TRegexp.html%20%22TRegexp)，但我不知道如何使用它......

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-07-24T11:21:13.920

自去年以来，C++ 已经在标准中内置了正则表达式。该程序将展示如何使用它们来提取您所追求的字符串：

```
#include <regex>
#include <iostream>

int main()
{
    const std::string s = "/home/toto/FILE_mysymbol_EVENT.DAT";
    std::regex rgx(".*FILE_(\\w+)_EVENT\\.DAT.*");
    std::smatch match;

    if (std::regex_search(s.begin(), s.end(), match, rgx))
        std::cout << "match: " << match[1] << '\n';
} 
```

它将输出：

```
匹配：mysymbol

```

但应该注意的是，它在 GCC 中不起作用，因为它的库对正则表达式的支持不是很好。在 VS2010（可能还有 VS2012）中运行良好，并且应该在 clang 中运行。

* * *

到现在（2016 年末），所有现代 C++ 编译器及其标准库都完全符合 C++11 标准，即使不是全部也是 C++14 标准。GCC 6 和即将到来的 Clang 4 也支持大部分即将到来的 C++17 标准。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T09:04:02.390

与其他正则表达式相比，TRegexp 仅支持非常有限的正则表达式子集。这使得构建适合您需求的单个正则表达式有些尴尬。

一种可能的解决方案：

```
[^_]*_([^_]*)_ 
```

将匹配字符串直到第一个下划线，然后捕获所有字符直到下一个下划线。然后在第 1 组中找到匹配的相关结果。

但在你的情况下，为什么要使用正则表达式呢？只需`_`在字符串中找到第一次和第二次出现的分隔符，然后提取这些位置之间的字符。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-24T09:25:56.047

如果你想使用正则表达式，我真的推荐使用 C++11 的正则表达式，或者，如果你有一个还不支持它们的编译器，Boost。Boost 是我认为几乎是标准 C++ 的一部分。

但是对于这个特定的问题，您实际上并不需要任何形式的正则表达式。`beg != npos`在添加所有适当的错误检查（等`end != npos`）、测试代码并删除我的拼写错误之后，像这个草图这样的东西应该可以正常工作：

```
std::string between(std::string const &in,
                    std::string const &before, std::string const &after) {
  size_type beg = in.find(before);
  beg += before.size();
  size_type end = in.find(after, beg);
  return in.substr(beg, end-beg);
} 
```

显然，您可以将 更改`std::string`为模板参数，并且它应该可以很好地与`std::wstring`或更少使用的实例化一起使用`std::basic_string`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-14T21:15:54.510

在信任它之前，我会研究极端案例。

但这是一个很好的候选人：

```
std::string text = "/home/toto/FILE_mysymbol_EVENT.DAT";
std::regex reg("(.*)(FILE_)(.*)(_EVENT.DAT)(.*)");
std::cout << std::regex_replace(text, reg, "$3") << '\n'; 
```

# .net - 获取计算机的上次唤醒时间

> ID：11627441
> 
> 赞同：3
> 
> 时间：2012-07-24T08:58:01.640
> 
> 标签：.net, windows

我知道我可以得到自上次启动以来的时间，`Environment.TickCount`
但是是否有可能得到计算机从休眠或睡眠中唤醒的最后时间？

（请不要使用 WMI）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-24T09:56:29.113

试试这个命令 - 使用[Process](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)来启动它 - 你需要解析结果

> cmd /k wevtutil qe System /q:"*[System[Provider[@Name='Microsoft-Windows-Power-Troubleshooter']]]" /rd:true /c:1 /f:text

如果您想了解更多信息，请从[这里提取...](http://www.xhroot.com/blog/2012/04/14/get-time-of-last-wake-from-sleep-in-windows7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:01:30.550

根据[此页面](http://msdn.microsoft.com/en-us/library/windows/desktop/aa373235%28v=vs.85%29.aspx)，您必须收听[PBT_APMRESUMEAUTOMATIC](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372718%28v=vs.85%29.aspx)（如果您想知道用户是否是唤醒的“原因”，则必须收听 PBT_APMRESUMESUSPEND）[。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372720%28v=vs.85%29.aspx)

我认为[Microsoft.Win32.SystemEvents](http://msdn.microsoft.com/en-us/library/microsoft.win32.systemevents.aspx) ( [PowerModeChanged event](http://msdn.microsoft.com/en-us/library/microsoft.win32.systemevents.powermodechanged%28v=vs.85%29.aspx) ) 是值得一看的地方，但是，如果没有进一步调查，可能会有[一些问题](http://connect.microsoft.com/VisualStudio/feedback/details/736387/systemevents-powermodechanged-appears-to-ignore-pbt-apmresumeautomatic#details)。

[这个页面](http://www.pinvoke.net/default.aspx/user32/registerpowersettingnotification.html)可能会让你开始感兴趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-12T10:25:31.587

尽管上面有一个提供核心查询的答案，但对于那些决定想要更完整的东西的人来说，这里有一个更充实的解决方案。

```
private string getLastWakeInfo() {
    String args = @"qe System /q:"" *[System[Provider[@Name = 'Microsoft-Windows-Power-Troubleshooter']]]"" /rd:true /c:1 /f:xml";
    ProcessStartInfo psi = new ProcessStartInfo();
    psi.FileName = "wevtutil.exe";
    psi.UseShellExecute = false;
    psi.CreateNoWindow = true;
    psi.RedirectStandardOutput = true;
    psi.RedirectStandardError = true;
    psi.RedirectStandardInput = true;
    psi.Arguments = args;
    Process proc = Process.Start(psi);
    proc.WaitForExit(2000);
    String strOutput = proc.StandardOutput.ReadToEnd();
    return strOutput;
} 
```

用法：

```
private void button1_Click_2(object sender, EventArgs e) {
    String xml = getLastWakeInfo();
    XmlDocument doc = new XmlDocument();
    doc.LoadXml(xml);
    String path = "//*[local-name()='Event']/*[local-name()='EventData']/*[local-name()='Data'][@Name='WakeTime']";
    XmlNode root = doc.DocumentElement;
    XmlNode node = root.SelectSingleNode(path);
    MessageBox.Show(node.InnerText);
} 
```

将需要以下内容；

```
using System.Diagnostics;
using System.Runtime.InteropServices;
using System.Xml;
using System.Windows.Forms; // Needed only if you want to show the messagebox 
```

在此示例中，我试图查找 PC 唤醒时间（如中所列`@Name='WakeTime'`- 更改以获取唤醒时间或查询返回的另一个单独值）。例如，如果您想知道是什么唤醒了 PC，请`WakeSourceText`改用。

您肯定会想要添加一些错误检查，但这应该可以实现您想要的。

# ios - 如何在 iPhone 中填写可填写的 PDF？

> ID：11627443
> 
> 赞同：0
> 
> 时间：2012-07-24T08:58:04.247
> 
> 标签：ios, objective-c, iphone, pdf

PDF Expert 是一款 iPhone 应用程序，可以让用户填写可编辑的 PDF 并保存。表示它是可编辑的形式。

我曾经`UIWebView`展示过 PDF，它完全按照原样显示，但上面的文本字段不可编辑。

我尝试使用`UIDocumentInteractionController`来查看 pdf，它显示得很好，但我无法编辑该文件。

在 mac 的 safari 浏览器中只支持查看文件，而谷歌浏览器支持编辑文件。并且在使用 Mac 上的 Preview 应用程序打开文件时，它允许对用户进行编辑并可以保存它。

请建议我，如何在此编辑和保存文件..

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-24T09:00:24.800

我也在追求同样的事情，发现这是一个看似不错的解决方案：[https ://github.com/derekblair/ILPDFKit](https://github.com/derekblair/ILPDFKit)

让您填写表格、访问/设置字段，然后另存为静态副本。

# oracle - 如何在 oracle 9i 中创建 last_modified 字段？

> ID：11627445
> 
> 赞同：1
> 
> 时间：2012-07-24T08:58:25.827
> 
> 标签：oracle

我正在使用 Oracle 10g Express 或 Oracle XE。在 EMPLOYEES 表中，我想添加另一个列调用 last_modified，如果它已被修改，它会自动生成当前日期或日期/时间。我知道只有从 oracle 10g 起才有的 rowscn(timestamp) 东西，但我想手动创建一个，因为我的客户使用的是 oracle 9i，但我只有 10g 来进行测试。而且我以前从未使用过oracle。这是针对与 Lotus Notes 的一些集成项目。因此，如果可能的话，我希望 LotusScript 可以识别日期或日期/时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:03:33.403

向表中添加一个类型`TIMESTAMP`的列（在不支持的 9i 版本中可能不可用，但随后只需使用`DATE`）。

```
alter table employees add (modified_at timestamp); 
```

然后创建一个在更新时触发的触发器，它只是将该列设置为 sysdate：

```
create or replace trigger update_modified
  before update on employees
  for each row
begin
  :new.modified_at := sysdate;
end;
/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T09:03:38.163

通常的方法是

*   将 modify_date / modified_by 列添加到您的表中
*   创建一个触发器，在修改行时更新此列

例子：

```
 CREATE OR REPLACE TRIGGER TR_AUD_EMPLOYEE
  BEFORE INSERT OR UPDATE OR DELETE ON EMPLOYEE
  FOR EACH ROW
begin

  if UPDATING then

    :new.MODIFIED_BY := user;
    :new.MODIFY_DATE := sysdate;
  end if;
end; 
```

# c++ - 从 C++ 类更新 UITextView 值

> ID：11627451
> 
> 赞同：0
> 
> 时间：2012-07-24T08:58:56.897
> 
> 标签：c++, ios, listener

我需要实现一个更新 UITextView 值的监听器，这个值来自 c++ 类。我的第一个想法是混合c++和objective-c，但我不知道我是否写了这个：

**监听器.h**

```
class Listener
{
  public:
    virtual void updateValue(NSString*) = 0;
} 
```

**我的监听器.h**

```
#import <UIKit/UIKit.h>
class MyListener : public Listener
{
  private:
    UITextField *_text;
  public:
    MyListener(UITextField *);
    ~MyListener();
    virtual void updateValue(NSString*);
} 
```

**我的监听器.cpp**

```
MyListener::MyListener(UITextField *text) :
  _text(text)
{}

void MyListener::updateValue(NSString* value)
{
  _text.text = value;
} 
```

# java - 如何使用 Struts2 向动作类发送隐藏值

> ID：11627452
> 
> 赞同：0
> 
> 时间：2012-07-24T08:58:59.273
> 
> 标签：java, html, jsp, struts2

单击链接时，我需要向操作类发送一个值。这是我的代码：

```
<s:iterator value="results" var = "item">   
   <li><pre>
       <a href="<s:url action="getCompanies"/>" class="selectable"><b></b><s:property value="%{#item.getGroupName()}"/> (<span class="count"><s:property value="%{#item.getNrCompanies()}"/></span>)<s:hidden value="%#item.getGroupId()}" name="GroupId" id="GroupId" /></a>
   </pre></li>
</s:iterator> 
```

根据我从迭代器中选择的选项，我需要被发回 **%#item.getGroupId()} 。**

```
<s:hidden value="%#item.getGroupId()}" name="GroupId" id="GroupId" /> 
```

我有 Group Id 的 getter 和 setter，但它没有达到行动等级。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T04:21:23.743

如果组 id 出现在用户浏览器的地址栏中，是否可以？如果是这样，那么您可以将参数添加到这样的 url：

```
<s:iterator value="results" var = "item">   

   <s:url var="companyUrl" action="getCompanies">
      <s:param name="groupId" value="%{#item.getGroupId()}"/>
   </s:url>

   <li>
      <pre>
         <a href="${ companyUrl }" class="selectable">
            <b><s:property value="%{#item.getGroupName()}"/></b>
            (<span class="count"><s:property value="%{#item.getNrCompanies()}"/></span>)
         </a>
      </pre>
   </li>

</s:iterator> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:01:59.467

我认为您遇到的问题可能是由于`name="GroupId"`。将其更改为`name="groupId"`. 也`value="%#item.getGroupId()}`改为`value="%{#item.getGroupId()}`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T09:16:34.680

```
<s:hidden value="%#item.getGroupId()}" name="GroupId" id="GroupId" /> 
```

试试下面的，好像你没有打开`{`大括号

```
<s:hidden name="groupId" value="%{#item.getGroupId}"></s:hidden> 
```

# html - 如何旋转显示在 html 按钮上的图像

> ID：11627460
> 
> 赞同：0
> 
> 时间：2012-07-24T08:59:20.413
> 
> 标签：html, css, imagebutton

嘿，我在 HTML 中有刷新按钮，我想在单击该按钮时旋转该按钮上的图像。我使用 css 创建了如下效果：

```
 input.button_refresh {

margin-left: 600px;
background: url("../images/refresh.JPG") 0 0 no-repeat scroll ;
background-position: right;
font-weight: bold;
background-color: rgb(80,140,210);
display: inline-block;
cursor: pointer;
height: 20px; /* height of the background image */
width: 70px; /* width of the background image */
color: threedface;
border-radius: 6em;
 } 
```

HTML

```
<input type="image" name="Refresh" value="Refresh" class="button_refresh" onclick="window.location.reload()" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:32:08.883

您好，您可以按照 Alien 的方式进行操作。除此之外，您可以保留一个标志并通过调用特定的 css 类来相应地旋转图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:44:25.967

试试这个

```
input.button_refresh:active {
  background: url("../images/otherImage.JPG") 0 0 no-repeat scroll ; /* other image or rotated image */
} 
```

检查此[**演示**](http://jsfiddle.net/zbq9z/)

编辑：添加了一个演示

# dynamics-crm - 用4.0 SDK开发的asp.net客户端应该在2011 SDK中转换（支持Dynamics 4.0）

> ID：11627464
> 
> 赞同：0
> 
> 时间：2012-07-24T08:59:33.183
> 
> 标签：dynamics-crm, dynamics-crm-2011, crm, dynamics-crm-4, microsoft-dynamics

我开发了一个带有 4.0 SDK 的 asp 客户端。为了使用 Dynamics 2011，我使用 2007 端点（它们是为了向后兼容）。但自上个月以来，只有“Office 365”身份验证是可能的（对于新客户端），并且这种身份验证方法不支持 2007 端点。如何转换我的应用程序花费尽可能少的时间？应该支持 CRM Dynamics 4.0。可能我应该开始一个新项目而不是重新开发一个旧项目吗？

一些信息：

为了验证我从 CRM CRMPassport 获得的用户，并将其用于 crmService 调用（crm 在线）。

为了使用端点，我使用了一个为我创建服务的工厂：

```
CrmService crmService = CrmServiceHandlerFactory.GetInstance().Resolve<ICrmServiceHandler>().CreateCrmService(crmCallInfo);

BusinessEntityCollection userAttributesCol = 
    ((RetrieveMultipleResponse)crmService.Execute(qbaRequest)).BusinessEntityCollection; 
```

我以同样的方式使用元数据服务......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:50:28.673

最好的起点是下载 SDK 并查看示例。

[http://www.microsoft.com/en-us/download/details.aspx?id=24004](http://www.microsoft.com/en-us/download/details.aspx?id=24004)

# c++ - if语句中非常奇怪的未处理异常错误

> ID：11627468
> 
> 赞同：0
> 
> 时间：2012-07-24T08:59:44.890
> 
> 标签：c++, if-statement, bit-manipulation

所以我调试了我的应用程序，这是调试器告诉我的：

![在此处输入图像描述](../Images/6c6c81d897219d3b6e98f3db8f05d136.png)

在线：

```
 if(p_IS_TRUE(playerid,CHECK_INACTIVITY)) 
```

其定义为：

```
#define p_IS_TRUE(playerid,check)      (p_CheckForStuff[playerid] & check) 
```

所以这是重要的代码：

```
//global
#define CHECK_SPAWNKILL         (128)   // 0000 0000 0000 0000 0000 0000 1000 0000
#define CHECK_INACTIVITY        (256)   // 0000 0000 0000 0000 0000 0001 0000 0000
#define CHECK_TELEPORT          (512)   // 0000 0000 0000 0000 0000 0010 0000 0000
#define CHECK_AIRBREAK          (1024)  // 0000 0000 0000 0000 0000 0100 0000 0000

unsigned long p_CheckForStuff[MAX_PLAYERS];
#define p_IS_TRUE(playerid,check)      (p_CheckForStuff[playerid] & check)
list<int> PlayerLoopList;

//When a player connects
    PlayerLoopList.push_back(playerid);
    p_CheckForStuff[playerid] =-1;//enable all checks

//When a player disconnects
    PlayerLoopList.remove(playerid);

//ProcessTick
    int playerid = 0;
    int ProcessTicksize = 0;
    int ProcessTickindex = 0;
    for (list <int>::iterator i = PlayerLoopList.begin(); i != PlayerLoopList.end(); ++i)
    {
        playerid = *i;
        int playerstate = GetPlayerState(playerid);
        int vid = GetPlayerVehicleID(playerid);
        if(g_IS_TRUE(CHECK_INACTIVITY))
        {
            if(p_IS_TRUE(playerid,CHECK_INACTIVITY))
            {
                if(p_AcivityInfo[playerid].Reported == false)
                { 
```

它可以复制如下：

1）加入服务器 2）退出/被踢？3) 再次加入 4) 崩溃

有谁知道为什么会这样？代码对我来说看起来很完美..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T09:14:01.657

访问冲突通常来自尝试读取空指针或未初始化指针或读取数组末尾的尝试。

在这种情况下，您正在读取一个数组值，因此该`playerid`值很可能大于或等于`MAX_PLAYERS`数组的边界。

# android - 自定义适配器视图未正确更新

> ID：11627475
> 
> 赞同：0
> 
> 时间：2012-07-24T09:00:19.343
> 
> 标签：android, android-4.0-ice-cream-sandwich, android-adapterview

好的，我有一个自定义的 AdapterView。每当我检测到长按时，我都会调用一个方法来更改自定义的可编辑状态。

```
public void setEditing(boolean editing) {
    this.editing = editing;
    //Set editing to children
    for (int i=0; i < getChildCount(); i++){
        ((PresentationPickerGalleryCellView)getChildAt(i)).setEditing(editing);
        if (editing == true)
            getChildAt(i).setVisibility(View.INVISIBLE);
            //((PresentationPickerGalleryCellView)getChildAt(i)).deleteImageButton.setVisibility(View.VISIBLE);
    }
} 
```

就我而言，它在主线程中执行。现在，如果我打电话：

```
getChildAt(i).setVisibility(View.INVISIBLE); 
```

当编辑==true 时，它​​会**正确**隐藏整个视图。但如果我打电话：

```
((PresentationPickerGalleryCellView)getChildAt(i)).deleteImageButton.setVisibility(View.VISIBLE); 
```

deleteImageButton 是单元格内的按钮。**它根本不会显示 deleteImageButton**。我尝试了 invalidate、postInvalidate、layout、requestLayout、refreshDrawableState，但什么都没有……

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:44:28.273

好的......似乎如果我在开始时设置 View.GONE，然后我尝试设置 View.VISIBLE，它不会显示按钮......我必须只使用 View.INVISIBLE 和 View.VISIBLE ： /

# sql - 简单的用户输入清理

> ID：11627476
> 
> 赞同：-1
> 
> 时间：2012-07-24T09:00:30.950
> 
> 标签：sql, sql-server, sql-injection, user-input, javascript-injection

我正在使用`Server.HttpEncode()`，并且`HttpDecode()`为了清理用户表单输入，以及在检测到“潜在危险”输入时让服务器抛出异常。

（然后将数据保存到 MSSQL 数据库）

这是否足以阻止 SQL / Javascript 注入和类似的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T13:48:08.167

不，它根本不会阻止它。[正如微软在此处](http://support.microsoft.com/kb/252985)所解释的，它更多地用于防止 XSS 攻击。阅读[这个](https://stackoverflow.com/questions/305044/how-can-i-avoid-sql-injection-attacks-in-my-asp-net-application)Stackoverflow 问题，了解有关防止 SQL 注入的一些想法。

根据您所处的环境，我会使用诸如 Entity Framework 或 NHibernate 之类的技术来完全防止 SQL 注入，因此您甚至不必担心它。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-24T09:25:53.810

可能，但几乎可以肯定不会。

# c# - 为什么要在 HttpContext.Current 之前指明 System.Web？

> ID：11627477
> 
> 赞同：1
> 
> 时间：2012-07-24T09:00:35.490
> 
> 标签：c#, asp.net-mvc

# 语境

我在控制器中。

我使用命名空间`System.Web`：

```
using System.Web; 
```

当我打电话时`HttpContext.Current`，VS 会提醒我`Current`未定义的内容`HttpContextBase`：

```
HttpContext.Current.Session["currentUser"]; 
```

如果我`System.Web`之前指出`HttpContext.Current`，它的工作原理：

```
System.Web.HttpContext.Current.Session["currentUser"]; 
```

# 问题

为什么要`System.Web`在前面注明`HttpContext.Current`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T09:02:20.720

你有命名空间冲突，使用这个：

`using HttpContext = System.Web.HttpContext;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T09:05:18.520

控制器类包含 HttpContextBase 类型的 HttpContext 属性，这就是发生这种歧义的原因

```
public HttpContextBase HttpContext { get; } 
```

这就是为什么您应该使用完整的限定名称或别名

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T09:06:39.150

这是因为您处于控制器的上下文中。控制器有一个名为`HttpContext`type的属性`HttpContextBase`。此属性的实例是 current 的包装器`HttpContext`，这意味着您不必调用`HttpContext.Current`它，因为它已经在使用该属性的控制器中可用。

你可以这样做（只要你在控制器中）：

```
HttpContext.Session["currentUser"]; 
```

# jquery - jQuery水平滚动一直跨越宽度

> ID：11627484
> 
> 赞同：0
> 
> 时间：2012-07-24T09:00:52.543
> 
> 标签：jquery, scroll

关于我昨天在这里发布的一个问题，我试图获得一个在滚动时水平移动的 div，但是它只能跨越这么远（因为它是总窗口宽度减去垂直滚动的量）但我想要这个 div一直遍历页面...我该怎么做？

[http://jsfiddle.net/wH3Fn/](http://jsfiddle.net/wH3Fn/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:13:53.743

正如我昨天回答的问题一样，我也会在这里插话。

将以下内容添加到您的滚动处理程序

```
console.log($("#block").css('left')); 
```

显示方块在视线之外继续移动。如果您需要它更快地移动（即，如果您希望它在仍然在视图中的同时在窗口的整个宽度上移动），那么只需将左值乘以如下：

```
 $("#block").css({ "left":  (windowWidth - $(window).scrollTop())*2}); 
```

上面的编辑使块的移动速度提高了两倍（最后的 *2 乘数）。如果您需要它更快地移动，请使用 *3 等等。

正如对您的问题所评论的那样，我知道使用 SO 作为代码生成工具很诱人，但是这种问题相对简单，可以通过一点逻辑和一些反复试验来解决……您应该尝试做一些研究也许在将来来这里问这个问题之前。

# java - 为什么 JSON 不需要 setXXX 方法？

> ID：11627487
> 
> 赞同：1
> 
> 时间：2012-07-24T09:01:03.483
> 
> 标签：java, json, jackson

作为问题提到，我很好奇，为什么当反序列化发生时，字段不需要设置器？只需要吸气剂吗？

我正在使用杰克逊的 JSON。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T15:30:10.563

Jackson 和类似的 Java-to/from-JSON 工具甚至不需要 getter 来设置/修改字段值。要设置/修改的字段甚至可以是私有的和最终的（已经指定了一个值——杰克逊不一定尊重字段的不变性）。这怎么可能？正如 Thomas 所建议的，Jackson 可以使用反射来设置字段值。此行为在[http://www.cowtowncoder.com/blog/archives/2010/08/entry_409.html](http://www.cowtowncoder.com/blog/archives/2010/08/entry_409.html)中有描述。

# javascript - 来自所有动态生成的输入字段的数据不会进入数据库

> ID：11627488
> 
> 赞同：0
> 
> 时间：2012-07-24T09:01:19.170
> 
> 标签：javascript, php, mysql, dom-events

我通过调用一个外部 PHP 函数重新生成输入字段，该函数在 ajax 函数的帮助下生成这些字段，但保存函数不会保存所有字段的数据，而是仅将最后一行的数据保存到数据库中。

用于重新生成这些字段的 ajax 函数代码如下所示：

```
var counter = 0;    
function loadfields_addmore(checked)
{
$jd.ajax({
  url: "<?php echo JURI::root(); ?>",
  type: "POST",
  data: {'option':'com_joomd', 'view':'itempanel', 'task':'loadfields', 'typeid':<?php echo $this->cparams->typeid; ?>, 'catid[]':checked, 'id':<?php echo (int)$this->item->id; ?>, "<?php echo jutility::getToken(); ?>":1, 'abase':1}
    });
} 
```

对于触发保存过程的保存按钮：

```
function save(task) {
var data = $jd("form[name='<?php echo $array['editform']; ?>']").serializeArray();
$jd.ajax({
      url: "<?php echo $url; ?>",
      type: "POST",
      dataType:"json",
      data: data
});
} 
```

实际的保存功能是这样的：

```
function store()
{
    foreach($post['cats'] as $cat)  {

    $query = 'insert into #__joomd_item_cat values('.$cat.', '.$row->id.')';
    $this->_db->setQuery( $query );
}
} 
```

图像显示了表单。![如附件所示。。](../Images/d8cfd22a61238a0f27e7d53ecfe9b6a8.png) 所有字段的数据都不会进入数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:06:00.530

如果我理解正确，似乎某些表单元素是通过 jQuery 动态创建的。这些将不会发布，因为它们不是原始源代码的一部分，而是稍后添加的。

使用[on()](http://api.jquery.com/on/)获取动态创建的字段。您的参数将是“单击”、按钮 ID、按钮的下一个静态父级。

# javascript - 如何将javascript数组转换为函数

> ID：11627493
> 
> 赞同：3
> 
> 时间：2012-07-24T09:01:30.533
> 
> 标签：javascript, arrays, function

我有一个任意值的数组。我写了一个函数，将数组转换为返回原始值的函数数组，所以我不会调用 a[3]，而是调用 a3。

这是我的代码不起作用？[代码](http://jsfiddle.net/cYss7/)。它给出了这个错误`Cannot call method '1' of undefined`。

```
var numToFun = [1, 2, { foo: "bar" }];
var numToFunLength = numToFun.length;

function transform(numTo) {
    for (var i = 0; i < numToFunLength; i++) {
        (function(num){
            numTo.unshift(function() {
                return num;
            });
        }(numTo.pop())) 
    }
}

var b = transform(numToFun);

console.log(numToFun);
console.log(b[1]());​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T09:16:38.963

在我写我的时候，其他人已经回答了你的问题，但我还是会发布它——这可能会更容易理解，而不会出现所有这些问题：

```
function transform(numTo) {
    var r = [];
    for (var i = 0; i < numTo.length; i++) {
        r[i] = (function (v) {
            return function() {
                return v;
            }
        }(numTo[i]));
    }
    return r;
} 
```

（我还将硬编码的长度从 numToFunLength 更改为 numTo.length，因此 transform() 函数适用于其他输入，而不仅仅是全局 numToFun 变量。）

见[演示](http://jsfiddle.net/cYss7/5/)。

**更新：使用**[Sugar](http://sugarjs.com/)库的更优雅的方法：

```
function transform(array) {
    return array.map(function (v) {
        return function() {
            return v;
        }
    });
} 
```

我喜欢这种语法，因为它更明确地表明您希望将值数组映射到返回这些值的函数数组。

见[演示](http://jsfiddle.net/cYss7/7/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T09:06:24.887

您的函数`transform`不返回任何内容。这就是`b`为什么`undefined`。

```
return numTo; 
```

[jsFiddle 演示](http://jsfiddle.net/bazmegakapa/cYss7/1/)

另一方面，数组将作为引用传递给函数，因此原始数组将被更改。如果您不返回任何内容，这不是问题，只需省略该`var b = transform(numToFun);`行并简单地编写`transform(numToFun)`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T09:06:52.907

您的转换函数没有返回任何内容。所以 b 是未定义的

# django - 从 URL 中“隐藏”表单查询（Django 1.3）

> ID：11627494
> 
> 赞同：-1
> 
> 时间：2012-07-24T09:01:39.100
> 
> 标签：django, django-forms

我有一个包含 6-7 个字段的表格。用户输入后，我的 web 应用程序在数据库中搜索这些字段并显示结果。现在的问题是，URL 最终包含所有表单字段名称及其值。

```
result/?name=lorem&class=arc&course=ipsum 
```

现在表单有 7-8 个字段，最终 url 看起来很难看。是否有 Django 技术可以从 URL 中“隐藏”这些内容？引号围绕隐藏，因为我也可以使用完全不同的方式将对象从表单传递到我的数据库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T09:04:53.013

使用[POST 请求](http://en.wikipedia.org/wiki/POST_%28HTTP%29)。这是[表单上的 django 文档](https://docs.djangoproject.com/en/dev/topics/forms/)和使用 POST>的[特定示例。](https://docs.djangoproject.com/en/dev/topics/forms/#using-a-form-in-a-view)在 HTML 方面，您需要做的就是更改`form`标签上的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T10:04:37.167

我不建议使用 POST 请求进行搜索。如果您将使用 GET，用户会更轻松，他只需为链接添加书签并保存搜索或与朋友分享搜索结果。

# android - 地理编码器未定义？

> ID：11627497
> 
> 赞同：0
> 
> 时间：2012-07-24T09:01:44.140
> 
> 标签：android, location

> 我正在尝试使用 GPS 获取用户位置，但我需要将经纬度转换为地址，但地理编码器不断给出错误 gc 未定义。

```
public class MyLocationListener implements LocationListener{

            public void onLocationChanged(Location loc){

                try{
                Geocoder gc = new Geocoder(this, Locale.ENGLISH);
                List <Address> addr = gc.getFromLocation(loc.getLatitude(),loc.getLongitude(),1);
                if (addr != null && addr.size() > 0){
                    Address address = addr.get(0);
                    String results = address.getAddressLine(0);
                    Toast.makeText(getApplicationContext(),results,Toast.LENGTH_LONG).show();
                }

                }catch(Exception e){

                }

            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:08:13.640

检查你的进口有这个

```
import android.location.Geocoder; 
```

并且，

这指的是您的 locationlistener 类。所以把你的 activityname.this 而不是这个

```
Geocoder gc = new Geocoder(youractivityname.this, Locale.ENGLISH); 
```

# java - 可以将复选框添加到 SWT 组边框

> ID：11627499
> 
> 赞同：3
> 
> 时间：2012-07-24T09:01:47.297
> 
> 标签：java, swt, border

我想要一个带有单选按钮的 SWT 边框，所以使用带有一些文本名称的 Group。但我想为组名边框提供一个单选按钮前缀。是否可以？ ![单选按钮 infront 组](../Images/a54edacef224fadd0b2c7d32dd7a3b77.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T09:15:16.553

默认情况下这是不可能的。[opal 项目](http://code.google.com/a/eclipselabs.org/p/opal/)与 Checkboxes 有类似的东西，请参见[此处](http://code.google.com/a/eclipselabs.org/p/opal/wiki/Checkboxgroup)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T07:57:22.760

您可以通过使用`FormLayout`.

# android - android如何保持大列表 在应用程序运行时

> ID：11627501
> 
> 赞同：6
> 
> 时间：2012-07-24T09:01:48.700
> 
> 标签：android, out-of-memory

让`List<String[]>`我的应用程序运行一段时间的最佳方法是什么？我的方法有问题。由于列表太大，大多数情况下都会给我一个 OutOfMemory 错误。

这`List<String[]>`是解析我在线下载的csv文件的结果。我所做的是解析活动中的 csv，然后将其结果保存在静态类成员中，例如：

```
String url = "http://xxx/pdf/pms/pms_test.csv";
try {
    InputStream input = new URL(url).openStream();
    CSVReader reader = new CSVReader(new InputStreamReader(input));
    SchedController.sched = reader.readAll();
    input.close();
} 
```

...然后访问`ClassName.sched`不同的活动。

我这样做是为了在每个活动中都可以使用解析的数据......而且我不必再次解析。我能做些什么来改善它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:18:12.643

我认为你可以有两种方法。

1.  您保存文**​​件**并以延迟加载的方式对其进行解析
2.  您创建一个**数据库**并保存您的数据。

我建议你创建一个数据库，这并不难，让你管理好你的数据。您可以轻松地使用光标进行延迟加载，或使用 ORM（[ORMLite](http://ormlite.com/) / [Greendao](http://greendao-orm.com/)）......我认为这是加载数据的最佳方式和最快方式。

希望这会帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T09:23:57.950

只是为了添加到 Paresh 的评论中。我可以建议我在我的应用程序中使用的类似内容。

例如，我需要在商店中显示商品列表。（每件商品都有 ID、名称和费用）。

为此，我首先向服务器发出请求以获取项目数，例如*itemCount*。现在我将页面中显示的项目数设置为 100。如果*itemCount*大于 100，我会显示一条警报，说只会显示 100 个项目，并且`button`可以添加下一个以下载下一组项目。或者，如果是搜索，您可以要求用户返回并细化搜索。如果*itemCount*小于 100 那么你不会有任何问题

这种方式可以实现*分页*`OutOfMemory`以避免问题

# c# - 在 C# 中使用递归的字符串/字符字体映射

> ID：11627508
> 
> 赞同：1
> 
> 时间：2012-07-24T09:02:17.303
> 
> 标签：c#, fonts, mapping

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T15:45:21.800

I'd approach it with a greedy algorithm. Something like this:

```
 // warning, untested
    public String Translate(String s, Dictionary<String, String> mapping)
    {
        String result = "";
        if (RecurTranslate(s, mapping, ref result))
            return result;

        throw new Exception("No translation");
    }

    private bool RecurTranslate(String s, Dictionary<String, String> mapping, ref String result)
    {
        if (s.Length == 0)
            return true;

        for (int prefixLen = s.Length; prefixLen > 0; --prefixLen)
        {
            String prefix = s.Substring(0, prefixLen);
            String trans;
            if (mapping.TryGetValue(prefix, out trans))
            {
                if (RecurTranslate(s.Substring(prefixLen), mapping, ref result))
                {
                    result = trans + result;
                    return true;
                }
            }
            else if (prefixLen == 1)
            {   // this branch allows a character to stand for itself
                if (RecurTranslate(s.Substring(prefixLen), mapping, ref result))
                {
                    result = prefix + result;
                    return true;
                }
            }
        }

        return false;
    } 
```

This starts from the front, looking for the largest possible match. Depending on your data, other approaches might be better - say, going through the mapping in length order to find the longest match and splitting from there:

```
 private bool RecurTranslate2(String s, Dictionary<String, String> mapping, ref String result)
    {
        if (s.Length == 0)
            return true;

        foreach (var entry in mapping.Where(e => e.Key.Length <= s.Length).OrderByDescending(e => e.Key.Length))
        {
            if (s.Contains(entry.Key))
            {   // split into a before and after
                int idx = s.IndexOf(entry.Key);
                String before = s.Substring(0, idx);
                String after = s.Substring(idx + entry.Key.Length);
                String bRes = "", aRes = "";
                if (RecurTranslate2(before, mapping, ref bRes) && RecurTranslate2(after, mapping, ref aRes))
                {
                    result = aRes + entry.Value + bRes;
                    return true;
                }
            }
        }

        return false;
    } 
```

Finally, you might play with combining these methods: use RecurTranslate2 until you get to some length threshold and then switch to RecurTranslate.

Responding to comment: See new else branch for failed lookup

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:33:39.797

Recursive version - O(2^(string.Length-1)) - dont run on larger strings

```
[Test]
    public void StringSplit()
    {

        var splits = AllPossibleSplits("hello".Select(c => c.ToString()).ToList());

        Assert.AreEqual(16, splits.Count);
        Assert.AreEqual("hello", splits.First().First());
        Assert.AreEqual("hello".Length, splits.Last().Count());
    }

    private List<List<string>> AllPossibleSplits(List<string> source)
    {

        if (source.Count == 0)
        {
            return new List<List<string>>();
        }
        if (source.Count == 1)
        {
            return new List<List<string>> { source };
        }
        var firstTwoJoined = new List<string> { source[0] + source[1] };
        firstTwoJoined.AddRange(source.Skip(2));

        var justFirst = new List<string> { source[0] };
        var withoutFirst = AllPossibleSplits(source.Skip(1).ToList());

        var result = new List<List<string>>();
        result.AddRange(AllPossibleSplits(firstTwoJoined));
        result.AddRange(withoutFirst.Select(list => justFirst.Concat(list).ToList()));

        return result;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T17:55:51.393

I would approach this problem differently, perhaps using [phonemes](http://en.wikipedia.org/wiki/Phoneme). What you want is a process that converts

English text -> English phonemes -> Hindi representations of each phoneme (or combinations) -> Hindi transliterated string.

One open-source string to phoneme synthesizer is [eSpeak](http://espeak.sourceforge.net/index.html). Using [this](http://sourceforge.net/projects/espeak/forums/forum/538920/topic/2343895) method, you can get only the phonemes from the library (discard the wave buffers). Now scan the english phonemes and pick Hindi fragments from a map.

*Note: You can choose any library that converts a given string in English to the standard phoneme map, eSpeak is just one that I have seen before*

This method should yield better results and seems to me to be a "natural" solution to this problem.

Hope this helps!

# jquery - 根据选择框选择显示元素

> ID：11627510
> 
> 赞同：0
> 
> 时间：2012-07-24T09:02:24.670
> 
> 标签：jquery, html

我有一个选择框，可以根据其选择隐藏和显示元素。

在 JS 页面中

```
function showhide() {

    $("div.brandDiv").hide();
    $("select.slct").bind('change', function() {

        $('div.brandDiv').hide();
        var targetId = $(this).val();
        $('div#' + targetId).show();
    });
} 
```

在 HTML 中调用函数 showhide()

```
 <select name="ex" class="slct"> 
```

然后是 id 为 non 和 yes 的 div。

<div id="oui" class="brandDiv">

```
 <input type="text" name='num' class="numbersonly" maxlength="2" ></input>
                </div> 
```

它工作正常

问题是当我刷新页面时，它只显示带有最后选择的选项的选择框，而不是基于该选择的元素

例如，如果我有 2 个选择框选项是和否，如果用户选择是，它显示你好，没有它显示 By 但是当我刷新页面时它正确显示是或否，但不是你好或 by

我不是很专家。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T14:16:11.487

在这里，我已经为上述问题完成了完整的垃圾箱，一次试用演示链接如下所示：

**演示：** [http ://codebins.com/bin/4ldqp9q](http://codebins.com/bin/4ldqp9q)

**HTML：**

```
<div id="panel">
  <select name="ex" class="slct">
    <option value="div1">
      Option1
    </option>
    <option value="div2">
      Option2
    </option>
    <option value="div3">
      Option3
    </option>
  </select>
  <div id="div1" class="brandDiv">
    Here is content for brand Div 1.
  </div>
  <div id="div2" class="brandDiv">
    Here is content for brand Div 2.
  </div>
  <div id="div3" class="brandDiv">
    Here is content for brand Div 3.
  </div>
</div> 
```

**CSS：**

```
.slct{
  border:1px solid #442288;
}
.brandDiv{
  border:1px solid #225599;
  margin-top:5px;
  padding:5px;
  background:#a4c8ed;
  height:30px;
  display:none;
} 
```

**jQuery：**

```
function showhide() {
    $('.brandDiv').hide('fast');
    var targetId = $("select.slct").val();
    $('div#' + targetId).show(1000);
}
$(function() {
    showhide();
    $("select.slct").bind('change', showhide);
}); 
```

**演示：** [http ://codebins.com/bin/4ldqp9q](http://codebins.com/bin/4ldqp9q)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T09:05:52.650

最简单的选择是触发更改事件。所以尝试类似：

```
$("select.slct").bind('change', function() {
//your stuff
}).trigger('change'); 
```

# javascript - 我可以制作这个 javascript 循环吗？

> ID：11627512
> 
> 赞同：0
> 
> 时间：2012-07-24T09:02:37.907
> 
> 标签：javascript, loops, text

有什么办法可以让这个循环保持在最后一个“1” [http://pastebin.com/swDRrsfv](http://pastebin.com/swDRrsfv)

另外我如何正确地将我的代码间隔 4 个空格？！？！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:07:25.317

我想你正在尝试连接..？

试试这个......（只需定义重复次数，无论您想在字符串中添加多少次）。

```
afunc = function() {
  $html = "";
  for($1 = 0; $i < $repeats; $i++){
    $html .= '1';
    document.getElementById('text').innerHTML = $html;
    sleep(1000);
  }
} 
```

您只是每次都将 innerHTML 重新定义为 1，因此它正在遍历您的所有命令，只是没有进行可见的更改，因为每个值都是相同的。

**代码格式**

在回答有关 4 间距编码的问题时，您可以单击`{ }`标签以自动更改为代码格式，或者只需在每行代码的开头添加最少 4 个空格（加上任何额外的间距）。您可以查看我的答案的来源作为示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:13:43.150

如果您希望数字增量更改此代码（我数了 33 行）

```
afunc = function() {
    for (i=0; i<33; i++)
      document.getElementById('text').innerHTML = i;
      sleep(1000);
    }
} 
```

# asp.net - 如何突出显示 Gridview 中的最大价值

> ID：11627513
> 
> 赞同：2
> 
> 时间：2012-07-24T09:02:38.723
> 
> 标签：asp.net, vb.net, gridview

我有一个绑定的gridview。

即使有重复，我也想在最长的交货时间内更改字体的颜色。我不知道如何编写我的 if 语句。

这是我想做的一个粗略的想法，尽管我知道这段代码是错误的。

```
if Max(LeadTime) Then

GridView.ForeColor = Color.Red 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T09:08:07.510

您首先需要从数据源中获取最大值。您可以使用 linq 执行此操作：

```
maxLeadTime = ds.Max(dsi => dsi.LeadTime) 
```

在您的项目数据绑定事件处理程序中，将绑定项目与最大值进行比较：

```
if (item.LeadTime == maxLeadTime)
{
    /* do stuff */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T18:11:17.170

（VB.NET 版本）假设您将 Grid 绑定到数据表，这就是您将如何做到的。

```
 Private maxVal As Decimal

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    If Not Me.Page.IsPostBack Then
        dim dt as datatable = GetTable()
        maxVal = ds.AsEnumerable.Max(Function(dr) dr("lead_time"))
        gv.DataSource = dt
        gv.DataBind()
    End If
End Sub

Private Sub gv_RowDataBound(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles gv.RowDataBound
    If e.Row.RowType = DataControlRowType.DataRow Then
        Dim dr As DataRowView = e.Row.DataItem
        If dr("lead_time") = maxVal Then
            e.Row.BackColor = Drawing.Color.Red
        End If
    End If
End Sub 
```

如果你将它绑定到一个列表（T），它会是一样的

在页面加载中：

```
 maxVal = urList.Max(Function(x) x.LeadTime) 
```

在行数据绑定中：

```
 Dim uc As urClass = e.Row.DataItem
        If uc.LeadTime = maxVal Then
            e.Row.BackColor = Drawing.Color.Red
        End If 
```

# jquery - jQuery向同位素砌体添加可排序/可拖动

> ID：11627518
> 
> 赞同：3
> 
> 时间：2012-07-24T09:02:57.923
> 
> 标签：jquery, jquery-ui-draggable, jquery-isotope, jquery-ui-sortable

早上好，

我有一个关于 jQuery 插件的问题`isotope`。

![在此处输入图像描述](../Images/4d0d0de5ca35dc2b965841289916d7e5.png)

正如您[在 jsfiddle 上](http://jsfiddle.net/29UUd/)看到的那样，我有一个具有动态布局的网格（您可以单击 div 并更改大小和布局）。现在我希望能够`items`使用 jQuerys 以其他顺序排序`sortable`。将此添加到代码中：

```
$container.sortable({
   items: '.item'
}); 
```

将使其可拖动但没有任何可排序功能。

我究竟做错了什么？

TIA - 最好的问候， frgtv10

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-24T13:34:29.923

MetaFizzy 有一个名为[Packery](http://packery.metafizzy.co/)的新插件，它可以满足您的需求。

请参阅此处了解更多信息：http: [//packery.metafizzy.co/draggable.html](http://packery.metafizzy.co/draggable.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-24T15:21:47.620

您可以使用我对 gridster.js 的修改并添加调整大小。（也包括砖石和可拖动）

[https://github.com/evaldsurtans/gridster.js](https://github.com/evaldsurtans/gridster.js)

示例： [http ://evalds.lv/gridster](http://evalds.lv/gridster)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-12T09:45:21.997

我给你一个 jsfiddle 的链接......看看他们使用了 jquery draggable 和 isotope。

[http://jsfiddle.net/ganeshgaxy/yL3Lu/](http://jsfiddle.net/ganeshgaxy/yL3Lu/)

```
$(document).ready(function () {
    $('#inner').isotope({
        itemSelector: '.gravity'
    });
    var list = $('#inner');
    list.sortable({
        cursor: 'move',
        start: function (event, ui) {
            ui.item ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T11:41:54.873

这是可能的，但有局限性。看看 [http://tyler-designs.com/masonry-ui/](http://tyler-designs.com/masonry-ui/)

# iphone - 如何在 iOS 中的 MPMoviePlayerContoller 视图上添加自定义右栏按钮

> ID：11627525
> 
> 赞同：0
> 
> 时间：2012-07-24T09:03:13.430
> 
> 标签：iphone, ios, ipad

我试过这个，

```
self.navigationItem.righBarButton = customView; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T14:32:42.660

由于您在 MPMoviePlayerController 方面确切想要实现的备用描述，我将您的问题简单地称为一般“如何将自定义视图添加为 rightBarButtonItem？”。

答案是，您只需使用自定义视图创建一个 UIBarButtonItem 并将结果分配为 ​​rightBarButtonItem ，如下所示：

```
[self.navigationItem setRightBarButtonItem:[[UIBarButtonItem alloc] initWithCustomView:customView]]; 
```

例如，[这里](https://stackoverflow.com/questions/4630800/adding-segment-controller-to-place-that-already-has-one?rq=1)也已经回答了一个类似的问题。

# c# - ASP.NET 网格视图。交换图像字符串

> ID：11627530
> 
> 赞同：0
> 
> 时间：2012-07-24T09:03:43.683
> 
> 标签：c#, asp.net, gridview, webforms

我正在使用gridview，并且正在使用gridview 中的boundfield 将数据库中的数据显示到其中。

gridview 中的 2 列仅显示**YES**或**NO**值。我想将“是”或“否”换成绿色的勾号图像或红色的 X 图像……谁能帮我解决这个问题或为我指出类似的解决方案。我用c#

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:17:20.777

使用[TemplateFields](http://msdn.microsoft.com/en-us/library/bb288031.aspx) 填充您的`gridview`

如果字段***是 yes*，没有**值，则将 传递`<%# Eval("YourValue") %>`给返回您需要使用的图像路径的方法

例如

```
public static string GetImage(string value)
{
    var str = "default image url";
    if(!string.IsNullOrEmpty(value))
    {
    if(value=="Yes")
          str = "yes image url";
    else if(value=="No")
          str = "no image url";
    }
    return str;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T09:25:46.520

在 aspx 页面上使用的代码：

```
 <asp:TemplateField HeaderText="Image">
      <HeaderStyle BackColor="#FFD653" Width="10%" HorizontalAlign="Center" />                               
      <ItemTemplate>                         
          <img src='<%#GetImagePath(Eval("databasecolumnvalue").ToString())%>'/>
      </ItemTemplate>
      <ItemStyle HorizontalAlign="Center"  />
  </asp:TemplateField> 
```

用于cs文件的代码

```
 public void GetImagePath(object value)
  {
    if(!string.IsNullOrEmpty(Convert.ToString(value)))
      {
         if(Convert.ToString(value)=="Yes")
             return "yes image url";
         else if(Convert.ToString(value)=="No")
             return "no image url";
      }
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T09:29:51.127

你也可以试试这个

```
<asp:TemplateField>
<ItemTemplate>
    <%= Eval("Field") == "Yes" ? "<img src='tick.png' />" : "<img src='cross.png' />" %>
</ItemTemplate>
</asp:TemplateField> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T09:47:00.297

您可以拥有一个带有 runat="server" 属性的图像，并在 RowDataBound 事件中更改代码隐藏中的 src。

例如 ：

```
<ItemTemplate><img id="theImage" runat="server" /></ItemTemplate> 
```

在代码隐藏中：

```
Control ctl = e.Row.Cells[0].FindControl("theImage");
HtmlControl htmlCtl = ctl as HtmlControl;

if (htmlCtl != null)
{
    String image = ((DataRowView)e.Row.DataItem)[0] as String == "YES" ? "images/accept.png" : "images/cancel.png";
    htmlCtl.Attributes["src"] = image;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-24T09:15:15.140

在您的代码后面创建一个公共函数，它应该接受字符串类型参数并在您的设计/.aspx 页面上使用该公共函数并检查公共函数，如果是，则返回

```
<img src='path of your Green tick image' /> 
```

否则返回

```
<img src='path of your red X image' /> 
```

但是您将无法在绑定字段上使用此公共功能...您必须为此使用模板字段

# javascript - 输入 slideUp/slideDown 问题

> ID：11627531
> 
> 赞同：1
> 
> 时间：2012-07-24T09:03:47.350
> 
> 标签：javascript, jquery, html, css, animation

似乎 jQuery 删除了已向上滑动然后向下滑动的输入字段的值。不太确定是否是占位符执行此操作，但内置的 slideUp/Down 似乎会破坏输入字段。

这是一个例子：http: [//jsfiddle.net/k3Bc2/](http://jsfiddle.net/k3Bc2/)

```
$(document).ready(function () {
    $('#slideUp').click(function () {
        $('input[type="text"]').slideUp(1000);
    });

    $('#slideDown').click(function () {
        $('input[type="text"]').slideDown(1000);
    });
}); 
```

如果您在输入字段中输入一个值并单击 slideUp 按钮并等待它向上滑动然后单击 slideDown 您将看到输入字段的值丢失。

有谁知道一种解决方法来让 slideUp/slideDown 处理链接的示例？
如果可以说明原因，请使用谷歌浏览器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T09:14:20.257

当输入的高度为 0 时会发生错误。您应该更改方法。使用带有遮罩动画方法的 css 位置：

[这是演示链接。您将检查此方法不会有错误。](http://jsfiddle.net/k3Bc2/8/)

jQuery：

```
$(document).ready(function () {
    $('#slideUp').click(function () {
        $('input[type="text"]').stop().animate({'top':'200px'},400);
    });

    $('#slideDown').click(function () {
        $('input[type="text"]').stop().animate({'top':'0px'},400);
    });
});​ 
```

html:

```
<div id="mask">
   <input id="motion" type="text" value="" placeholder="Enter some text.." />
</div>
<input type="button" value="slideUp" id="slideUp" />
<input type="button" value="slideDown" id="slideDown" />​ 
```

CSS：

```
#mask { position:relative; 160px; height:25px; overflow:hidden; top:0; left:0; }
#motion { position:absolute; top:0; left:0; }
input { position:relative; } ​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T09:35:27.940

这似乎是 chrome 中的一个错误（不是 jQuery）。它在ff中工作正常。

`font-size`我猜它与 相关。Chrome 不会丢失`font-size`，但如果您再次设置，它会起作用。

```
$(document).ready(function () {
    $('#slideUp').click(function () {
        $('input[type="text"]').slideUp(1000);
    });

    $('#slideDown').click(function () {
        $('input[type="text"]').slideDown(1000,function(){ 
             $(this).css('font-size',$(this).css('font-size'));                
        });
    });
});​ 
```

[演示](http://jsfiddle.net/6HXkw/2/)

**编辑：**

我看到上面的黑客只工作一次。如果再次向上/向下滑动，它会失败。

这是一个更好的技巧。

```
.text{ 
    font-size:13px; 
}​

$(document).ready(function () {
    $('#slideUp').click(function () {
        $('input[type="text"]').slideUp(1000,function(){
               $(this).removeClass('text');        
        });
    });

    $('#slideDown').click(function () {
        $('input[type="text"]').slideDown(1000,function(){    
            $(this).addClass('text');     
        });
    });
});​ 
```

[演示](http://jsfiddle.net/6HXkw/3/)

# ruby-on-rails - 不明白为什么添加到模态的链接会使我的视图崩溃并显示奇怪的内容？

> ID：11627534
> 
> 赞同：0
> 
> 时间：2012-07-24T09:04:03.043
> 
> 标签：ruby-on-rails, twitter-bootstrap, modal-dialog

我正在使用 Rails、Twitter Bootstrap 和 Devise gem。

也许我调用模态的原则很糟糕，但它确实有效，所以我将解释问题出在哪里。

这是我的标题：

```
 <div class="modal hide" id="login">
   <%= render :template => "devise/sessions/new" %>
  </div>
 <div class="modal hide" id="sign_up">
   <%= render :template => "devise/registrations/new" %>
 </div>
 <div class="modal hide" id="congrats">
  <%= render :template => "devise/registrations/congrats" %>
 </div> 
```

一切正常，模态正在从模态调用（当用户想从登录中获取注册表单时），

**但是当我添加这一行时：**

```
 <div class="modal hide" id="forgot_password">
     <%= render :template => "devise/passwords/new"%>
   </div> 
```

我的视图开始只显示标题。

这是来自设计/密码/新的代码：

```
 <div class="login_header">
<a class="close" data-dismiss="modal">
<%= image_tag("/images/close_btn.png") %> 
```

```
<%= image_tag("/images/login_logo.png") %>
 <div class="login_header_text">
 <h2>Forgot your password?</h2>
 <hr id="line">
 </div>
</div>
<div class="form_for_new">
 <%= form_for(resource, :as => resource_name, :url => password_path(resource_name), :html => {:method => :post }) do |f| %>
 <%= devise_error_messages! %>
 <div class="field2">
 <%= f.label :email %><br />
  <%= f.email_field :email %>
 </div>
 <div class="login_submit">
   <%= f.submit "Send me", class: "btn login" %>
 </div>
<% end %> 
```

我从登录模式中调用它：

```
 <b><%= link_to("Forgot?", "#forgot_password", "data-toggle" => "modal") %></b> 
```

以模式显示所有内容（主页），并带有忘记密码的表单。

有人能帮我吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:34:35.107

请注意我下面的评论。你还没有关闭 div3

```
<div class="login_header">                                    #open div1
   <a class="close" data-dismiss="modal">
   <%= image_tag("/images/close_btn.png") %>
   <%= image_tag("/images/login_logo.png") %>
   <div class="login_header_text">                            #open div2
     <h2>Forgot your password?</h2>
     <hr id="line">
   </div>                                                     #close div2
 </div>                                                       #close div1
 <div class="form_for_new">                                   #open div3
   <%= form_for(resource, :as => resource_name, :url => password_path(resource_name), :html => {:method => :post }) do |f| %>
   <%= devise_error_messages! %>
   <div class="field2">                                       #open div4
     <%= f.label :email %><br />
     <%= f.email_field :email %>
   </div>                                                     #close div4
   <div class="login_submit">                                 #open div5
     <%= f.submit "Send me", class: "btn login" %>
   </div>                                                     #close div 5
 <% end %> 
```

# sql-server - 如何在实体框架连接上模拟较长的数据库往返时间？

> ID：11627538
> 
> 赞同：0
> 
> 时间：2012-07-24T09:04:36.787
> 
> 标签：sql-server, entity-framework, lazy-loading, simulation, latency

我们正在使用带有 SQL Azure 数据库后端的 Azure Web 角色创建 N 层应用程序，并将 EF 作为我们的 ORM。在开发网站时，我们注意到它们在现实世界中往往表现得更差。这主要是由于 EF 延迟加载大部分数据。我们使用了 Miniprofiler，它提供了一些很好的通知，但它并没有真正给人以网站在实时环境中运行的感觉。

无论如何，我们可以让我们的本地数据库花费 100 毫秒来响应每个查询，从而模拟层之间的往返时间吗？这有望让开发人员在本地开发他们需要优化 EF 查询的系统时轻松感受到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:10:51.613

我可以想象使用自定义[EF Provider 包装器](http://code.msdn.microsoft.com/EFProviderWrappers-c0b88f32)，其中每个 DB 命令执行都会先于执行，`Thread.Sleep`但我相信也会有一些工具来实现这一点。

# javascript - 使用 JavaScript 的 Items.push 变量

> ID：11627541
> 
> 赞同：0
> 
> 时间：2012-07-24T09:04:46.530
> 
> 标签：javascript, jquery, cordova, getjson

我有一个 JSON 数组，我在我的应用程序中进行操作，

```
...
$.each(data, function(key, val) {
    val = link + val;
    foto = val;
    foto = foto.substr(0, foto.lastIndexOf(".")) + ".jpg";
    /* Visualizza */
    var elem = document.getElementById("archivio-num");
    elem.innerHTML = '<a href="#"><img src="' + foto + '"></a>';
    elem.firstChild.onclick = function() {
        cordova.exec("ChildBrowserCommand.showWebPage", val);
    };
    items.push('<li id="' + key + '">' + elem.innerHTML + '</li>');
});
... 
```

现在我正在尝试将所有包含在 var elem 中的元素推到外面。仅 Puttin + elem + 给我一个错误 [objectHTMLDivElement]。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:23:58.810

进一步利用 jQuery，你可能想尝试这样的事情：

```
...
var $ul = $("<ul/>");//jQuery object containing a dummy UL element in which to accumulate LI elements.
$.each(data, function(key, val) {
    var url = link + val;
    var foto = url.substr(0, url.lastIndexOf(".")) + ".jpg";
    var $a = $('<a/>').attr('href',url).append($("<img/>").attr('src',foto)).on('click', function() {
        cordova.exec("ChildBrowserCommand.showWebPage", $(this).attr('href'));
        return false;
    });
    $ul.append($('<li/>').attr('id',key).append($a));
});
$("#archivio-num").html($a);
... 
```

在这里，实际的 LI 元素不是在数组中累积 HTML，而是在 jQuery 包装的 UL 元素中累积，该元素可用于稍后在代码中进行进一步处理（例如插入 DOM）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:54:23.247

```
<script type="text/javascript">
             $.getJSON('http://www..../json.php', function(data) {
                      var items = [];
                      var url;
                      var foto;
                      var link = 'http://www.bla.com/';
                      var $div = $("<div/>");

                      $.each(data, function(key, val) {
                             url = link + val;
                             foto = url.substr(0, url.lastIndexOf(".")) + ".jpg";
                             var $a = $('<a>').attr('href',url).append($("<img/>").attr('src',foto)).on('click',function(){
                                    cordova.exec("ChildBrowserCommand.showWebPage", $(this).attr('href'));
                                    return false;
                                    });
                                    $div.append($('<div/>').attr('id',key).append($a));
                             });
                             $("#archivio-num").html($a);                           
                      });
            </script> 
```

# ios - 如何通过按主页按钮永久停止iOS中的音频？

> ID：11627547
> 
> 赞同：0
> 
> 时间：2012-07-24T09:04:59.200
> 
> 标签：ios, audio, delegates

我有一个带有导航树的应用程序。某处有一个带 mp3 的音频播放器。

```
UITabViewController // controlled by AppDelegate.m
    -> UINavigationController
        -> UITableViewController // controlled by TableViewController.m
            -> UIViewController // with my AVAudioPlayer controlled by AudioViewController.m 
```

在`AudioViewController.m`我有我所有的音频引擎，所以我播放/暂停/停止它，甚至在按下后退按钮时杀死它（使用 viewWillDisappear 等） - 它只在这个视图中播放，而不是在另一个视图中，这很好。

但是，当我在播放打开时按主页按钮时会出现问题。它停止了，但回到我的应用程序后，它会从记住的时间戳再次播放。

我尝试了所有这些：

```
- (void)viewDidUnload
{
    [super viewDidUnload];
    [self audioStop:self];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [self audioStop:self];
    [super viewWillDisappear:animated];
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    [self audioStop:self];
}

- (void)viewWillUnload
{
    [self audioStop:self];
    [super viewWillUnload];
}

- (void)awakeFromNib
{
    [super awakeFromNib];
    [self audioStop:self];
} 
```

但什么也没有发生。

现在我知道要管理是否按下主页按钮，我需要使用`applicationWillResignActive`AppDelegate 的方法，但我完全不知道如何从这里停止我的音频播放器。我对iOS很陌生，我不熟悉如何`delegates`工作，所以请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:22:59.207

让您 AppDelegate 为您的 UIViewcontroller 提供一些参考并调用它。有道理？

```
 AppDelegate
        |
        v
    TableViewController (@property)
        |
        v
    UIViewController (@property)
        |
        v
    AudioPlayer (@property) --> [ stop]; 
```

编辑：

```
@interface TableViewController : UIViewController
{
     AudioPlayer * audioPlayer;
}
@property(nonatomic, retain) AudioPlayer * audioPlayer;
... // other stuff
@end

@implementation TableViewController
@synthesize audioPlayer;
... // other stuff
@end 
```

这样您就可以从 TableViewController 对象访问音频播放器。如果您以这种方式持有 TableViewController 对象，那对您来说应该很容易。

```
[tableViewController.audioPlayer someMethod]; 
```

类似的东西..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-22T05:17:57.437

当按下主页按钮时，您需要使用 AppDelegate 中的 applicationWillResignActive 方法，我们如何使用此方法，我将向您展示。您需要在视图控制器中使用 NotificationObeserver。

**如何添加 NotificationOberserver**

```
 NotificationCenter.default.addObserver(self, selector: #selector(self.application_resign_active(notification:)), name: NSNotification.Name.UIApplicationWillResignActive, object: nil) 
```

现在您可以在此功能中停止声音：像这样

```
func application_resign_active(notification : NSNotification)
{

    if my_audio_player.isPlaying{
        print("Stop")
        my_audio_player.stop()
    }

} 
```

my_audio_player 是 AudioPlayer 的一个实例

`var my_audio_player = AVAudioPlayer()`

您还可以查看我的视频，我是如何做到的：[https ://www.youtube.com/watch?v=BxmhTAd1SU4](https://www.youtube.com/watch?v=BxmhTAd1SU4)

# sproutcore - 如何将我的记录推送到 SC.ArrayController 内容中？

> ID：11627550
> 
> 赞同：0
> 
> 时间：2012-07-24T09:05:12.840
> 
> 标签：sproutcore, sproutcore-views, sproutcore-controllers

我正在尝试将我的示例数据（从夹具创建的记录）放入我的`SC.ListView`. 我知道这些记录是正确构建的，因为我可以通过`primaryKey`.

正在通过以下方式提取`SC.ListView`其内容：`contentBinding: 'MyApp.thisController.arrangedObjects'``SC.ArrayController`

```
MyApp.thisController = SC.ArrayController.create(SC.SelectionSupport, {
    allowsMultipleSelection: NO,
    content: MyApp.store.find(MyApp.MyRecordType)
}); 
```

要初始化商店，我使用官方指南中的功能：

`store: SC.Store.create().from(SC.Record.fixtures)`

如何在控制器中设置我的内容属性以导入`SC.RecordArray`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T12:18:42.113

这仅在您的商店是在您的控制器之前创建时才有效。尝试做

`MyApp.thisController.set('content', MyApp.store.find(....));`

应用程序加载后，在控制台中。如果可行，您需要在应用初始化后查询商店。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T10:36:30.973

我的问题是商店是在控制器尝试设置内容之后生成的，这非常令人困惑，因为使用另一个教程中的以下代码它工作正常。

```
store: SC.Store.create().from(SC.FixturesDataSource.create({
    simulateRemoteResponse: YES,
    latency: 250
})) 
```

有谁知道告诉我为什么问题文本中的商店创建之前无法生成？

# c# - 循环实体对象并设置对象的属性

> ID：11627560
> 
> 赞同：1
> 
> 时间：2012-07-24T09:06:03.340
> 
> 标签：c#, visual-studio-2010, entity

我有产品对象。Product 对象具有 DiscountRate 和 Price 属性。我想根据折扣率功能更改价格。我想对我所有的 Product 对象执行此操作。这是我的代码：

```
 public IEnumerable<Product> GetAll()
    {
        //I want to set change price in here. 
        return _kContext.Products.ToList();
    } 
```

你有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T09:15:49.990

这里我们可以使用 List 的 Foreach 方法。请注意，原始产品将被修改：

```
using System;
using System.Collections.Generic;

_kContext.Products.ToList().ForEach(product => {
    if (product.DiscountRate >= 0.3) {
       product.Price += 10;
    }
}); 
```

如果您不想修改原始对象，可以使用 Linq Select：

```
using System.Linq;
return _kContext.Products.Select(product => {
    var newProduct = new Product();
    newProduct.Price = product.Price;
    newProduct.DiscountRate = product.DiscountRate;
    if (newProduct.DiscountRate >= 0.3) {
       newProduct.Price += 10;
    }
    return newProduct;
}); 
```

编辑：使用属性构造函数的替代版本使可读性更强。

```
 using System.Linq;
 return _kContext.Products.Select(product => new Product {
        DiscountRate = product.DiscountRate,
        Price = product.Price + ((product.DiscountRate >= 0.3) ? 10 : 0)
 }); 
```

# c# - 如何在 GridView 中查找选定单元格的内容

> ID：11627562
> 
> 赞同：0
> 
> 时间：2012-07-24T09:06:05.930
> 
> 标签：c#, wpf, radgridview

我试图在复制时在 GridView 中获取选定的单元格及其内容。在复制单元格的内容时，我得到单元格项目源而不是单元格内容。

复制网格的事件

```
private void RadGrid_CopyingCellClipboardContent(object sender, GridViewCellClipboardEventArgs e)
    {
      var textBlock = e.Cell as TextBlock;

      if (textBlock != null)
      {
        e.Value = textBlock.Text;
      }
    } 
```

我总是将文本块设为空。复制时如何获取单元格内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:52:26.587

如果您不一定需要使用 RadGrid_CopyingCellClipboardContent 事件，您可能希望使用 SelectedIndexChanged 事件。您可以使用此事件来确定何时选择了一个单元格，然后使用 SelectedRow 属性访问您需要的各个单元格和文本。

要查看其中的一些操作，请在此处查看有关 GridView.SelectedIndexChanged 事件的 MSDN 页面：http: [//msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.selectedindexchanged.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.selectedindexchanged.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T10:29:58.443

如果您正在处理 DataGridTextColumn，您应该使用：

```
TextBlock textBlock = e.Cell.Content as TextBlock; 
```

另外，您应该知道，如果单元格处于编辑模式，则内容是 TextBox，而不是 TextBlock。

# mysql - 测试后恢复mysql数据库的状态

> ID：11627566
> 
> 赞同：3
> 
> 时间：2012-07-24T09:06:18.643
> 
> 标签：mysql

我正在一个有很多单元测试的网站上工作，每个测试都需要数据库处于某种“默认”状态。没错，我在每次测试时都在破坏数据库，并使用 SQL 脚本加载默认状态。而且速度很慢。因此，我认为如果我可以保存该默认状态并在每次测试开始时将数据库恢复到该状态，将会很有用。这可能吗 ？如果没有，我为什么要加快进程？知道我删除了整个数据库并重新创建它。如果我只删除行不会提高性能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T09:16:23.930

您可以在所有测试之前将数据库设置为默认状态，然后将每个测试包装在事务中。测试完成后，您只需回滚事务。

当您希望同时运行测试时，这种方法特别适用，因为它们不依赖于任何共享状态。

但是，有些用例不适合。例如，当测试场景中涉及多个进程访问数据库时，这是集成测试中的常见情况。

这种情况的真实示例：测试运行程序（进程#1）在数据库中设置数据，并且在后台运行的 phantomjs 向应用服务器（进程#2）发出请求。您不能同时测试运行程序和应用程序服务器共享单个数据库事务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T09:15:35.670

1.  您可以将现有表隐藏在临时表后面：

    ```
    CREATE TEMPORARY TABLE foo
    PRIMARY KEY (a),
    UNIQUE  KEY (b),
    FOREIGN KEY (c) REFERENCES bar (c)
    SELECT a, b, c FROM foo 
    ```

    一旦连接断开，临时表将被丢弃（因此只留下原始的、未受影响的表）。

2.  使用[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)来模拟数据库、连接到测试数据库或执行任何必要的初始化（例如创建上述临时表）。

# php - jquery进度条引导

> ID：11627568
> 
> 赞同：1
> 
> 时间：2012-07-24T09:06:37.483
> 
> 标签：php, jquery, progress-bar

您好，JQ 在显示进度条时遇到了一些问题，问题是我在页面上没有显示任何内容

这有什么问题。

```
<script>
$(document).ready(function() {
     $("#getlist").load("toolkit/getlist.php");
   var refreshId = setInterval(function() {

var progress = setInterval(function() { var $bar = $('.bar');

    if ($bar.width()==400) {
        clearInterval(progress);
        $('.progress').removeClass('active'); } else { $bar.width($bar.width()+4); }
    var refreshId = setInterval(function() {
      $("#getlog").load('toolkit/getlog.php?randval='+ Math.random());
        $bar.text($bar.width()/4 + "%"); }, 800);

</script> 
```

这是显示进度的引导程序的进度条

```
<div class="progress">
 <div class="bar"
 style="width: ;"></div> 
 </div> 
```

这是我通过 JQ getlog.php 加载的外部 php 文件？*输出 echo " " 。$进度。"%" ;*

```
$content = @file_get_contents('../logs/block.txt');

if($content){
    //get duration of source
    preg_match("/Duration: (.*?), start:/", $content, $matches);

    $rawDuration = $matches[1];

    //rawDuration is in 00:00:00.00 format. This converts it to seconds.
    $ar = array_reverse(explode(":", $rawDuration));
    $duration = floatval($ar[0]);
    if (!empty($ar[1])) $duration += intval($ar[1]) * 60;
    if (!empty($ar[2])) $duration += intval($ar[2]) * 60 * 60;

    //get the time in the file that is already encoded
    preg_match_all("/time=(.*?) bitrate/", $content, $matches);

    $rawTime = array_pop($matches);

    //this is needed if there is more than one match
    if (is_array($rawTime)){$rawTime = array_pop($rawTime);}

    //rawTime is in 00:00:00.00 format. This converts it to seconds.
    $ar = array_reverse(explode(":", $rawTime));
    $time = floatval($ar[0]);
    if (!empty($ar[1])) $time += intval($ar[1]) * 60;
    if (!empty($ar[2])) $time += intval($ar[2]) * 60 * 60;

    //calculate the progress
    $progress = round(($time/$duration) * 100);

 echo "  " . $progress . "%" ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T10:52:53.217

答案是

```
<div class="progress">
<div class="bar" style="width:<?php echo $progress;?>%"></div>
    </div> 
```

# sql-server - 在 SSIS 中选择忽略失败时，忽略的行会发生什么情况？

> ID：11627571
> 
> 赞同：8
> 
> 时间：2012-07-24T09:06:39.033
> 
> 标签：sql-server, sql-server-2008, ssis

数据流中有 3 个组件：一个`OLE DB Source`、`Data Conversion`转换和一个`Flat File Destination`。如果我在数据转换转换中选择了该`Ignore failure`选项，并且在该数据转换级别中忽略了某些行，那么那些被忽略的行会移向目标吗？或者我在哪里可以得到那些被忽略的行？那些将在日志文件中可用吗？

当我选择`Fail component`作为选项时，错误行会发生什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T09:39:03.977

选择时的标准行为`Ignore failure`似乎是忽略违规值，而不是包含它们的行。我刚刚做了一个快速测试（SQL Server 2008 R2）并且导入了值`NULL`而不是有问题的值。

[您可以在此处](http://msdn.microsoft.com/en-us/library/ms141679.aspx)找到一个非常有用的页面，其中包含有关 SSIS 数据流任务中的错误处理的更多信息。该页面的相关错误处理选项及其含义的概述：

**失败组件**：
发生错误或截断时，数据流任务失败。失败是错误和截断的默认选项。

**忽略失败**：忽略
错误或截断，并将数据行定向到转换或源的输出。

**重定向行**：
错误或截断数据行被定向到源、转换或目标的错误输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-08-19T12:11:54.537

根据 SQL 2014，如果将 Truncate Row Disposition 设置为“RD_IgnoreFailure”，则列数据将被截断为指定长度并插入到目标中。例如，如果列大小为 50，数据长度为 70，则前 50 个字符将插入到目标位置。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-24T09:20:24.393

为什么要标记 sql server 2000 和 2008？它在每个版本上都不同，即使从 2005 年到 2008 年它也会发生变化。例如，在 2008 年，您可以将失败的行拖到另一个 oledbdestination 并将它们插入到失败的日志表中。

# javascript - 在控制台中隐藏 AJAX 控制器调用

> ID：11627573
> 
> 赞同：0
> 
> 时间：2012-07-24T09:06:49.737
> 
> 标签：javascript, ajax, firebug

我正在开发一个基于 Spring MVC 的应用程序（使用图块作为视图解析器）。

该应用程序有一些下拉列表，其中填充了从数据库中获取的值。

下拉列表

```
<form:select id="idServiceUnit" path="serviceUnit" multiple="multiple"></form:select> 
```

对控制器的 AJAX 调用（包含在单独的 js 文件中）

```
jq.ajax({
        url: "/MRYWeb/getServiceUnitLookUp",
        context: document.body,
        success: function(data){              
          jq("#idServiceUnit").addOption(data,{},false,{},{});
          jq("#idServiceUnit").multiselect({
                noneSelectedText:"Select",
                selectedList: 3, 
                height:150,
                minWidth:195,
                beforeclose:function(){
                    fnCustomizedTextForMultiSelect('idServiceUnit');
                }
                }).multiselectfilter();
    }
    }); 
```

/MRYWeb/getServiceUnitLookUp 是返回列表以填充下拉列表的控制器的相对 URL

它工作正常，但是当我加载页面时，萤火虫实际上拦截了 URL

[http://i.minus.com/ieYZJj8eC6jlr.JPG](http://i.minus.com/ieYZJj8eC6jlr.JPG)

以及拦截js文件调用

[http://i.minus.com/ibkGiljg3dpXUl.JPG](http://i.minus.com/ibkGiljg3dpXUl.JPG)

我们的客户认为这是一个安全风险。那么任何人都可以通过告诉我隐藏这些 URL 或隐藏 js 调用本身来帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:17:34.797

> 我们的客户认为这是一个安全风险。

URL 允许访问您要向用户显示的数据。在格式化之前查看数据对他们来说不是安全风险。

只需确保您不发送需要保密的数据，并且在数据只应发送给某些用户时执行身份验证和授权。

> 那么任何人都可以通过告诉我隐藏这些 URL 或隐藏 js 调用本身来帮助我吗？

你不能。

浏览器属于用户，而不是网络作者。如果您要求他们的浏览器做某事，那么他们就能够看到它（并停止它或更改它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:12:40.500

这是我的朋友的网络。这是一个安全风险，但您可以摆脱这种风险的唯一方法是离开互联网。向他展示他的银行网站，ajax 调用也在那里......

# java - 为 Postgres 安装 JDBC 时遇到问题

> ID：11627580
> 
> 赞同：0
> 
> 时间：2012-07-24T09:07:18.397
> 
> 标签：java, linux, postgresql, jdbc

我想使用 JDBC。我的代码：

```
import java.sql.*;
import java.util.ArrayList;
import java.util.Properties;

public class test {

Connection conn;

public test() throws ClassNotFoundException, SQLException{
    Class.forName("org.postgresql.Driver");
    String url = "jdbc:postgresql://localhost/tb";
    Properties props = new Properties();
    props.setProperty("user","user");
    props.setProperty("password","passwd");
    conn = DriverManager.getConnection(url, props);
    System.out.println(conn.isClosed());
}

public static void main(String[] args) {
    try{
        test t = new test();
    } catch (Exception e){
        e.printStackTrace();        
    }
}
} 
```

我的软件：postgres 9.1，java 1.7

我的尝试：

```
ziel@gad ~/java/test $ ls
postgresql-9.1-902.jdbc4.jar  test.java
ziel@gad ~/java/test $ javac test.java 
ziel@gad ~/java/test $ java -cp postgresql-9.1-902.jdbc4.jar test
Error: Could not find or load main class test 
```

据谷歌的人说，这应该加载驱动程序。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T09:21:16.933

那是因为当您这样做时`-cp postgresql-9.1-902.jdbc4.jar`，您将 jar 定义`postgresql-9.1-902.jdbc4.jar`为类文件的唯一位置，而该类`test`不在 this 中`jar`。要解决问题，您必须执行此 cmd`java -cp postgresql-9.1-902.jdbc4.jar;. test`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T09:28:53.420

`java -cp postgresql-9.1-902.jdbc4.jar:. test`在 Linux / Unix / OS X 下使用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T09:36:03.220

我猜你正在使用 linux 操作系统，所以试试这个`java -cp postgresql-9.1-902.jdbc4.jar:. test`。在窗口中`java -cp postgresql-9.1-902.jdbc4.jar;. test`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-29T10:02:15.960

在 Linux 机器上执行以下操作

`javac -cp '.:postgresql-9.1-901.jdbc4.jar' postgresjavatest.java`

`java -cp '.:postgresql-9.1-901.jdbc4.jar' postgresjavatest`

确保 jar 文件位于触发命令的相同位置。

# php - 在 symfony 1.4 中使用 Doctrine ORM 更新 mysql 表时如何获取结果信息

> ID：11627585
> 
> 赞同：4
> 
> 时间：2012-07-24T09:07:31.010
> 
> 标签：php, orm, doctrine, symfony-1.4, doctrine-1.2

我正在使用 symfony 1.4 开发并使用 Doctrine ORM。在构建模式和模型之后，我有了一些用于数据库的类。我也可以使用 Doctrine_query .... 唯一我无法理解的是：

我需要更新表。

```
Doctrine_Query::create()->update('table')->.....->execute(). 
```

或者

```
$tbl = new Table();
$tbl->assignIdentifier($id);
if($tbl->load()){
    $tbl->setFieldname('value');
    $tbl->save();
} 
```

我如何理解查询是否成功？以及更新了多少行。

ps同样的问题是删除操作。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-24T09:20:58.060

一切都在[更新](http://doctrine.readthedocs.org/en/latest/en/manual/dql-doctrine-query-language.html#update-queries)和[删除](http://doctrine.readthedocs.org/en/latest/en/manual/dql-doctrine-query-language.html#delete-queries)的文档中。

> 执行 DQL UPDATE 和 DELETE 查询时，查询的执行会返回受影响的行数。

查看示例：

```
$q = Doctrine_Query::create()
        ->update('Account')
        ->set('amount', 'amount + 200')
        ->where('id > 200');

$rows = $q->execute();

echo $rows; 
```

```
$q = Doctrine_Query::create()
        ->delete('Account a')
        ->where('a.id > 3');

$rows = $q->execute();

echo $rows; 
```

这与 DQL 相关（当您使用原则查询时）。但我认为`->save()`将返回当前对象或 @PLB 评论的真/假。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-04-04T07:36:53.760

```
$statement = $this->entityManager->getConnection()->prepare($sql);
$statement->execute();

// the counter of rows which are updated
$counter = $statement->rowCount(); 
```

它非常适合我在 symfony 2 项目中的学说 2

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-13T12:12:51.393

```
$nrRows = $this->getEntityManager()->getConnection()->executeUpdate('UPDATE ...'); 
```

[executeUpdate](https://www.doctrine-project.org/projects/doctrine-dbal/en/2.9/reference/data-retrieval-and-manipulation.html#executeupdate)的文档：

```
 /**
     * Executes an SQL INSERT/UPDATE/DELETE query with the given parameters
     * and returns the number of affected rows.
     *
     * This method supports PDO binding types as well as DBAL mapping types.
     *
     * @param string         $query  The SQL query.
     * @param mixed[]        $params The query parameters.
     * @param int[]|string[] $types  The parameter types.
     *
     * @return int The number of affected rows.
     *
     * @throws DBALException
     */
    public function executeUpdate($query, array $params = [], array $types = []) 
```

# vhdl - 为什么 VHDL 属性调用需要一个进程？

> ID：11627586
> 
> 赞同：2
> 
> 时间：2012-07-24T09:07:33.053
> 
> 标签：vhdl

如果我有以下 VHDL-200X 架构：

```
architecture my_arc of my_entity is
    signal test_char   : std_logic_vector(7 downto 0);
    signal test_char_c : character;
    signal test_char_i : integer;
begin
    test_char   <= "01001010";
    test_char_i <= to_integer(unsigned(test_char));
    test_char_c <= character'val(test_char_i);
end architecture my_arc; 
```

...并对其进行仿真（在 Xilinx iSim 14.1 中），即使取值`test_char_c`为 ，它的初始值也不会改变。但是，如果我将架构中的最后一行替换为：`NUL``test_char_i``74`

```
 process(test_char_i)
    begin
        test_char_c <= character'val(test_char_i);
    end process; 
```

...然后按照我`test_char_c`的预期获得价值。`J`

我认为如果右侧的*任何信号发生变化，将同时更新裸信号分配。*换句话说，它相当于一个对分配中涉及的所有信号都敏感的过程。

为什么第一时间不`test_char_c`更新？

**编辑：**更改`test_char_i`为 a`natural`不会改变结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T13:00:12.803

在初始化时，`test_char_i`具有`integer'low`不映射到的值`character`- Modelsim 10.0 报告：

```
# ** Fatal: (vsim-3390) Result ?(-2147483648) of attribute 'VAL is out of range NUL (0) to 'ÿ' (255).
#    Time: 0 ns  Iteration: 0  Process: /my_entity/line__15 File: attr.vhd
# Fatal error in Architecture my_arc at attr.vhd line 15
# 
```

如果我创建`test_char_i`一个`natural`, 以便它初始化为`0`, 事情会按你的预期工作(至少在 Modelsim 中, 没有尝试过 iSim)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-26T14:42:05.617

> 我认为如果右侧的任何信号发生变化，将同时更新裸信号分配。换句话说，它相当于一个对分配中涉及的所有信号都敏感的过程。

这是正确的。

> 为什么 test_char_c 在第一个实例中没有得到更新？

确实如此。

一个[最小的、完整的和可验证的示例](https://stackoverflow.com/help/mcve)，其中包含将报告所有值更新的监控流程`test_char_c`：

```
library ieee;
use ieee.std_logic_1164.all;
use ieee.numeric_std.all;

entity my_entity is
end entity;

architecture my_arc of my_entity is
    signal test_char   : std_logic_vector(7 downto 0);
    signal test_char_c : character;
    signal test_char_i : natural; -- integer;
begin
    test_char   <= "01001010";
    test_char_i <= to_integer(unsigned(test_char));
    test_char_c <= character'val(test_char_i);

    process (test_char_c)
    begin
        report "test_char_c = " & character'image(test_char_c);
    end process;
end architecture my_arc; 
```

请注意对声明的更改以`test_char_i`克服默认初始值 (INTEGER'LOW) 导致 Martin Thompson 报告的边界检查失败。

使用符合 -1993 的 VHDL 工具对此进行了分析、阐述和模拟：

> ghdl -r my_entity
> ../../src/ieee/numeric_std-body.v93:2098:7:@0ms:（断言警告）：NUMERIC_STD.TO_INTEGER：检测到元值，返回 0
> my_entity.vhdl:19:9:@ 0ms:(报告说明): test_char_c = nul
> my_entity.vhdl:19:9:@0ms:(报告说明): test_char_c = 'J'

来自 numeric_std 包的断言警告是由`test_char`“UUUUUUUU”的默认初始值引起的。

第一个报告`test_char_c`的值是您报告的 NUL，因为 的初始值为`test_char_i`0（映射到 NUL）。

第二个是响应并发的简单信号分配，`test_char`从而导致更新，`test_char_i`进而导致更新`test_char_c`（并恢复监视过程）。`test_char`它用值 x"4A"（对应于字符 'J'）反映分配的位串。

如果您使用以下形式的断言语句而不是显示的监视器进程：

```
 assert test_char_c /= NUL
        report "test_char_c = " & character'image(test_char_c); 
```

您会发现只显示第一个报告语句，因为评估了一个断言语句条件，并且当发现错误断言时。

同样，如果条件中的“/=”更改为“=”，则只会显示第二个报告语句（显示“J”）。

如果不提供 MCVe，您的问题就不能被复制（或归咎于当时新生的 ISIM）。

# git - UNC 的 Git 获取错误

> ID：11627587
> 
> 赞同：1
> 
> 时间：2012-07-24T09:07:35.427
> 
> 标签：git, command-line, sql-server-2008-r2, scheduled-tasks

我有一个 GIT 备份脚本，当从命令行执行时可以完美运行（它是我们主要 GIT 代表的每日备份）：

```
@echo off
rem -- Set Parameters
rem -- daliy GIT backup
REM Get DATE
set mm=%Date:~4,2%
set dd=%Date:~7,2%
set yy=%Date:~10,4%
set TODAY=%yy%%mm%%dd%
for /f %%a in ('date /t') do set DAY=%%a
if %DAY%==Sun goto :weekend
if %DAY%==Sat goto :weekend
goto :weekday
:weekend
:: No backup after weekends
echo %day%
exit
:weekday
:: Backup during weekdays
REM Connect to share
REM net use z: \\backupnas\backup\
Z:
cd \
cd git
REM Start backup of current GITS
cd OptiTexRepo.git
call git fetch
cd ..
RAR.exe a -rr10 -s ARCHIVES\%TODAY%.OptiTexRep.git.rar OptiTexRepo.git
cd OptiTexRepo_V11.1.git
call git fetch
cd ..
RAR.exe a -rr10 -s ARCHIVES\%TODAY%.OptiTexRepo_V11.1.git.rar OptiTexRepo_V11.1.git
REM exit 
```

但是，当我每天从 W2008R2 服务器将其作为计划任务运行时，它立即存在（非常类似于问题[https://serverfault.com/questions/343496/powershell-script-works-from-command- line-not-from-task-scheduler-why](https://serverfault.com/questions/343496/powershell-script-works-from-command-line-not-from-task-scheduler-why)）这给了我一个想法，检查天气 GIT FETCH 是否与 UNC 一起正常工作 - 显然可以，但是在任务中运行时 - 出了点问题 - 我不知道是什么.

根据问题：[git on UNC path](https://stackoverflow.com/questions/4998549/git-on-unc-path) git 应该可以工作，但我不明白脚本命令需要什么才能使其实际工作。

*   目前我将我的备份驱动器映射到 Z:，当我 CD 到文件夹时，我只是 GIT FETCH（从主服务器所在的配置文件中读取）

*   如何使用 UNC 做到这一点？这也适用于任务调度程序？

*   还是问题实际上在其他地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:48:56.900

Git 确实适用于 UNC 路径，但通常将它们用作 Unixy 路径更可靠 -`git clone //backupnas/backup/repo.git`例如。

作为任务运行时 - 检查权限是否允许您的任务查看具有读取访问权限的远程路径。除此之外 - 脚本中有很多回声并测试运行命令的结果代码。对于最新版本的 msysGit，您可能不再需要“调用 git”，因为包装器 git.cmd 已更改为 git.exe 以解决 ^ 字符的一些引用问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-05T06:25:55.403

使用 Git 2.24（2019 年第四季度），您可以使用协议明确指定 UNC 路径`file://`。

这修复了[`git-for-windows/git`问题 1264](https://github.com/git-for-windows/git/issues/1264)，其中使用此类 URL 失败：

```
$ git clone file://server/file/path/here
Cloning into 'here'...
fatal: 'C:/Program Files/Git/file/path/here' does not appear to be a git repository
fatal: Could not read from remote repository. 
```

请参阅[Torsten Bögershausen ( ) 的](https://github.com/tboegi)[提交 ebb8d2c](https://github.com/git/git/commit/ebb8d2c90fb0840a0803935804e37e2205505f23)（2019 年 8 月 24 日[）](https://github.com/tboegi)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 aadac06](https://github.com/git/git/commit/aadac067aa34a148477c9db98058941be3e4465c))^(中，2019 年 9 月 30 日）)[`tboegi`](https://github.com/tboegi)
^([`gitster`](https://github.com/gitster))

> ## `mingw`: 支持UNC`git clone file://server/share/repo`
> 
> 扩展解析器以接受`file://server/share/repo`Windows 用户期望它被解析的方式，这些用户习惯于通过 UNC 路径引用文件共享`\\server\share\folder`。

加紧检查以避免`file://C:/some/path`作为 UNC 路径处理。

* * *

Git 2.25.2（2020 年 3 月）为此用例添加了测试。

请参阅[Johannes Schindelin ( ) 的](https://github.com/dscho)[提交 bfe2bbb](https://github.com/git/git/commit/bfe2bbb47f1213e9d4ef6b8d1679b58b37485625)（2020 年 2 月 13 日[）](https://github.com/dscho)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 fc25a19](https://github.com/git/git/commit/fc25a19265deb84170aab1216228d4e817a17d15))^(中，2020 年 2 月 17 日）)[`dscho`](https://github.com/dscho)
^([`gitster`](https://github.com/gitster))

> ## [`t5580`](https://github.com/git/git/commit/bfe2bbb47f1213e9d4ef6b8d1679b58b37485625): 测试无克隆`file://`，通过 UNC 路径测试获取
> 
> ^(签字人：约翰内斯·辛德林)
> 
> 在 Windows 上，使用网络驱动器是很常见的。网络驱动器（或“网络共享”或 UNC 路径）的路径格式为：
> 
> ```
> \\<server>\<share>\... 
> ```
> 
> 我们已经围绕这些类型的路径进行了一些回归测试，但是我们错过了在没有前导的情况下从 UNC 路径进行克隆和获取`file://`（并且使用反斜杠而不是正斜杠）。这个 lil' 补丁缩小了这个差距。
> 
> 将命令添加到测试脚本的名称有点傻，所以我们在测试更多 UNC 内容时重命名它。

# php - 如何在 HTML/PHP 上传之前确定文件大小？

> ID：11627588
> 
> 赞同：0
> 
> 时间：2012-07-24T09:07:35.330
> 
> 标签：php, html, upload

> **可能重复：**
> [客户端使用 HTML5 检查文件大小？](https://stackoverflow.com/questions/4112575/client-checking-file-size-using-html5)

在传输文件之前，如何通知服务器有关文件大小的信息？使用 HTML/HTML5、JS 和 PHP（没有 Flash）？

我想阻止它，在上传过程之前上传大文件；可能吗？

非常感谢你，对不起我的德语-英语..

eb

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:13:30.060

```
if (typeof FileReader !== "undefined") {
var size = document.getElementById('myfile').files[0].size;
// check file size
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T09:13:52.317

对于客户端，请查看[File API](https://developer.mozilla.org/en/Using_files_from_web_applications/)它的 html5 功能，尽管有些浏览器无法正常工作。[兼容性列表](http://caniuse.com/fileapi)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T09:11:01.947

```
$(function(){

      $('#submit_button_id').click(function(){

            var f=this.files[0]
            if(f.size > 10000 || f.fileSize > 10000)
            {
               return false;
            }
        });
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T09:12:26.437

看看[PHP 文件大小函数](http://php.net/manual/en/function.filesize.php)。

此外，您可以使用 $_FILES["fieldname"]["size"] 然后检查：

```
if($_FILES["fieldname"]["size"]>150000){ echo "too large"; exit;} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-24T09:18:45.690

认为实现任务的唯一方法是在提交之前通过 JS 进行验证。看看这个[JS 的 Validation](http://www.webdeveloper.com/forum/showthread.php?t=29776)

# mysql - Opencart SQL 查看哪些产品有选项

> ID：11627590
> 
> 赞同：0
> 
> 时间：2012-07-24T09:07:49.000
> 
> 标签：mysql, options, product, opencart

我想知道如何查找哪些产品有选项并进行出口，以便我可以在我的网站上查找产品并更改具有选项的产品的价格并更正它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:56:12.147

我知道它很旧，但如果它对任何人都有帮助，这个 mysql 查询应该返回所有有选项的产品......

```
select * from product where product_id in (select product_id from product_option group by product_id) order by product_id 
```

# facebook-graph-api - Facebook Place 图片下载缓慢

> ID：11627591
> 
> 赞同：0
> 
> 时间：2012-07-24T09:07:50.340
> 
> 标签：facebook-graph-api, download, image

我想下载我通过 Facebook API 使用 type=place 搜索检索到的地方的所有图片（小尺寸）。获取图片效果很好（a la graph.facebook.com/[id]/picture?type=small），但速度很慢（Android 通过 Wi-Fi 或 3G）。对于一组 25 张图片，最多需要 10 秒。是进行缓存的唯一选择，还是有办法更快地下载图片，可能与搜索中的其他数据一起下载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:55:03.127

任何查询中最耗时的部分是运输时间。如果您在某种循环中进行单个 API 调用，它会减慢您的应用程序的速度。如果您在 10 秒内进行 25 次 API 调用，我会说您做得非常好。大多数情况下，我大约需要 1 秒/通话时间。

如果速度是您最关心的问题，那么进行一次 API 调用即可一次获取所有内容。FQL 或 batch.request 允许您执行此操作。

# java - 如何在 Android 上播放不断变化的 MIDI - jetPlayer

> ID：11627595
> 
> 赞同：0
> 
> 时间：2012-07-24T09:07:57.823
> 
> 标签：java, android, midi

我一直在为此头疼。

我有一个 ndk c++ 应用程序，可以在向量中连续生成注释信息。

现在我需要把它写成可以无延迟播放的midi文件（来自ndk或sdk）。

看来我应该使用 JetPlayer。但这没有正确记录，我无法从中得出正面或反面。

如何获取 .jet 文件？我的 midi 信息到底在哪里？我看了jetBoy的例子，但我不太明白。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:07:00.170

据我所知，JetPlayer 无法生成 midi。

所以我改用 MediaPlayer 并用 android-midi-lib 生成了 midi。

# c++ - 如何执行 lynx -dump

> ID：11627600
> 
> 赞同：0
> 
> 时间：2012-07-24T09:08:19.407
> 
> 标签：c++, lynx

这听起来可能很愚蠢，但有没有办法打开终端并使用 C++ 执行“lynx -dump HTML.html > text.txt”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:11:27.180

使用 system() 函数。见这里： http: [//linux.die.net/man/3/system](http://linux.die.net/man/3/system)

# c# - Datatable-Access 数据库更新并发冲突

> ID：11627601
> 
> 赞同：2
> 
> 时间：2012-07-24T09:08:21.160
> 
> 标签：c#, asp.net, ajax, ms-access, gridview

我正在开发一个使用 Access 数据库的项目。首先，我从 db 复制我需要的信息并将其放入 DataTable（结合 2 个表）。在这个数据表上我搜索项目；使用 GridView 更新、删除、添加行，所有这些都发生在 ajax 更新面板中。当我尝试将更改应用回数据库时会出现问题。我想要做的是获取 DataTable 的某些行并将它们更新/插入/删除到某些表的某些行。重要的是数据库表必须包含与 DataTable 相同的信息。我实际上不知道我是否可以通过这种方式使用 OledbDataAdapter.Update。

这是我得到的例外：并发冲突：UpdateCommand 影响了预期的 1 条记录中的 0 条。

我的代码：

```
void load_dtTable()
{
    OleDbConnection bag = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0; Data Source=D:\\Profiles\\StjBugraO\\Desktop\\data.accdb");

    DataTable dtResult = new DataTable();
    if (Session["dtResult"] != null)
    {
        dtResult = (DataTable)Session["dtResult"];
    }
    else
    {
        bag.Open();
        try
        {
            OleDbDataAdapter adtr = new OleDbDataAdapter("select gt.NodeID, gt.unit_num,gt.unit_name_text,gt2.ip_id ,gt2.server_name_text ,gt.call_flow_type  From gt inner join gt2 on gt.cm_id=gt2.cm_id", bag);
            dtResult.Clear();
            adtr.Fill(dtResult);
            adtr.Dispose();
            dtResult.Columns[0].ColumnName = "NodeID";
            dtResult.Columns[1].ColumnName = "Şube Kodu";
            dtResult.Columns[2].ColumnName = "Şube ADI";
            dtResult.Columns[3].ColumnName = "IP Adresi";
            dtResult.Columns[4].ColumnName = "Call Manager";
            dtResult.Columns[5].ColumnName = "Santral Tipi";
            foreach (DataRow dr in dtResult.Rows)
            {
                if ((string)dr[5] == "P")
                {
                    dr[5] = "PRI";
                }
                else if ((string)dr[5] == "A") dr[5] = "ANALOG";

            }

        }
        catch (Exception e)
        {

        }
        Session["dtResult"] = dtResult as DataTable;

            bag.Close();
    }

protected void Button3_Click(object sender, EventArgs e)
{
    DataTable dtResult = Session["dtResult"] as DataTable;
    //changing the names of the columns (that i need) to be the same with the db
    dtResult.Columns[0].ColumnName = "NodeID";
    dtResult.Columns[1].ColumnName = "unit_num";
    dtResult.Columns[2].ColumnName = "unit_name_text";
    dtResult.Columns[3].ColumnName = "ip_id";    
    dtResult.Columns[5].ColumnName = "call_flow_type";

    OleDbConnection bag = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0; Data Source=D:\\Profiles\\StjBugraO\\Desktop\\data.accdb");
    OleDbDataAdapter adtr2 = new OleDbDataAdapter("select NodeID ,unit_num ,unit_name_text , ip_id , call_flow_type from gt", bag);
    OleDbCommandBuilder Ocmd = new OleDbCommandBuilder(adtr2);
    adtr2.DeleteCommand=Ocmd.GetDeleteCommand();
    adtr2.InsertCommand=Ocmd.GetInsertCommand();
    adtr2.UpdateCommand=Ocmd.GetUpdateCommand();
    DataTable dt = dtResult.GetChanges();
    int updates = 0;
    try
    {
        if(dt != null)
      updates=adtr2.Update(dtResult);
    }

    catch (Exception ex)
    {
        Label1.Text = ex.Message.ToString();
    }
    //changing them back

    dtResult.Columns[0].ColumnName = "NodeID";
    dtResult.Columns[1].ColumnName = "Şube Kodu";
    dtResult.Columns[2].ColumnName = "Şube ADI";
    dtResult.Columns[3].ColumnName = "IP Adresi";
    dtResult.Columns[4].ColumnName = "Call Manager";
    dtResult.Columns[5].ColumnName = "Santral Tipi";
    Label2.Text = updates + "changes applied.";
    adtr2.Dispose();
    bag.Close();

} 
```

# dynamic - Solr 可以处理从 table1、table2、....tableN 等表导入数据吗？

> ID：11627607
> 
> 赞同：0
> 
> 时间：2012-07-24T09:08:40.643
> 
> 标签：dynamic, solr, data-import

我有一个mysql db，数据表是按照分片规则命名的，也就是说名字有相同的前缀，例如：the_table_，并且后缀有一个数字，所以表名会是the_table_1,the_table_2,the_table_3。当我们要选择一行，我们要从sql select mod(primary_key_id, 64)+1中找到表后缀，分片规则，64是一个基数，也就是说我们有64个表。

现在我们想使用Solr来索引表中的数据，但是solr data-config.xml不支持动态名称的sql查询，那么有什么解决这个问题的建议吗？

诸如此类的事情？

```
<entity name="audit" 
        query="select id,monitor_type,city,STATUS,is_history,timeout,author,author_uid,author_ip,operator_uid,operator,created_at,description from `main_table`">
        <field column="ID" name="id" />
        <field column="MONITOR_TYPE" name="monitor_type" />
        <field column="CITY" name="city" />
        <field column="STATUS" name="status" />
        <field column="IS_HISTORY" name="is_history" />
        <field column="AUTHOR" name="author" />
        <field column="AUTHOR_UID" name="author_uid" />
        <field column="AUTHOR_IP" name="author_ip" />
        <field column="OPERATOR_UID" name="operator_uid" />
        <field column="OPERATOR" name="operator" />

        <entity name="distribution" query="select mod(${audit.ID}, 256)+1 as table_id">
          <entity name="details" query="select content from detail${distribution.table_id} where id=${audit.ID}">
            <field column="CONTENT" name="content" />
          </entity>
        </entity>
</entity> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T16:56:35.263

我会创建一个存储过程来做你想做的事，然后从 Solr 调用它。像这样的东西

```
CREATE PROCEDURE `GetAuditDetails`(IN auditID INT)
BEGIN
  DECLARE tableID INT DEFAULT 0;
  DECLARE sqlString VARCHAR(100) DEFAULT '';
  SELECT MOD(auditID, 256)+1 INTO tableID;
  SET @sqlString = CONCAT('select content from detail', tableID, ' where id=', auditID );
  PREPARE stmt FROM @sqlString;
  EXECUTE stmt;
END;

<entity name="audit" 
    query="select id,monitor_type,city,STATUS,is_history,timeout,author,author_uid,author_ip,operator_uid,operator,created_at,description from `main_table`">
        <field column="ID" name="id" />
        <field column="MONITOR_TYPE" name="monitor_type" />
        <field column="CITY" name="city" />
        <field column="STATUS" name="status" />
        <field column="IS_HISTORY" name="is_history" />
        <field column="AUTHOR" name="author" />
        <field column="AUTHOR_UID" name="author_uid" />
        <field column="AUTHOR_IP" name="author_ip" />
        <field column="OPERATOR_UID" name="operator_uid" />
        <field column="OPERATOR" name="operator" />

        <entity name="details" query="CALL GetAuditDetails(${audit.ID})">
           <field column="CONTENT" name="content" />
        </entity>
</entity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T08:08:23.090

首先，嵌套条目查询中不能使用audit.ID，而是${audit.id}，否则会出现异常。二、对于Mysql程序：

```
CREATE PROCEDURE `GetAuditDetails`(IN auditID INT)
BEGIN
  DECLARE tableID INT DEFAULT 0;
  DECLARE sqlString VARCHAR(100) DEFAULT '';
  SELECT MOD(auditID, 256)+1 INTO tableID;
  SET @sqlString = CONCAT('select content from detail', tableID, ' where id=', auditID );
  PREPARE stmt FROM @sqlString;
  EXECUTE stmt;
END; 
```

# jquery - 调整浏览器大小时的导航菜单宽度

> ID：11627616
> 
> 赞同：-1
> 
> 时间：2012-07-24T09:09:25.587
> 
> 标签：jquery, html, css, jquery-plugins, menu

我有以下等式，但我没有解决方案:) 我需要一个导航菜单，它简单地由

```
<ul id="nav">
   <li>
      <a>link</a>
        </li>
other 20 li's ...and last a select which contains li's that no longer have space on menu ...
        <ul>
            <li>
            <a>last li's that cannot be displayed on nav menu </a>
            </li>
       </ul>
    </ul> 
```

我怎样才能做到这一点？？并在调整菜单宽度时调整窗口大小 li 进行最后一次选择，然后展开返回菜单。

如果有人可以为此提供一个不错的 jQuery，请帮助我。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:21:15.143

HTML 代码无效，所以我试图在两行之间阅读。

有两种可能的解决方案。

[TinyNav.js](http://tinynav.viljamis.com/)。

它不会像你描述的那样做，但是它会通过媒体查询自动将列表转换为选择。通常这是为了使菜单在小屏幕上更友好。

在我看来，20 个列表项太多而无法显示，在这种情况下，尝试使用子菜单项移动到较小的数量是一个好方法。[您通过Superfish](http://users.tpg.com.au/j_birch/plugins/superfish/)显示子菜单项。不是选择，但可以说更好，因为子菜单项出现在将鼠标悬停在父项上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T09:33:53.573

使用 window.onresize DOM 事件

```
window.onresize = function(event) {

 your code for changing content of ul goes here     

} 
```

# jms - 如何使用 HornetQ 匹配模式

> ID：11627618
> 
> 赞同：1
> 
> 时间：2012-07-24T09:09:27.743
> 
> 标签：jms, jboss7.x, hornetq

我正在使用 Jboss 7.1.1.final，我需要定义 2 个不同的 DLQ，这样一个队列将具有 DLQ1，而其他队列将具有 DLQ2。

我查看了 HornetQ 文档，发现`address_settings`标签有一个`match`属性：

```
<address-setting match="jms.queue.exampleQueue">
<dead-letter-address>jms.queue.deadLetterQueue</dead-letter-address> 
```

如果我有一个定义如下的队列：

```
<jms-queue name="Test">
<entry name="queue/Test"/>
</jms-queue> 
```

它的匹配模式是什么？是 jms.queue.Test 吗？

如何查看 DLQ 中的消息？我是否必须编写一个 MDB 来监听它，或者是否可以在 jboss 的管理控制台中看到它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T15:02:15.733

它的匹配模式是什么？是 jms.queue.Test 吗？-->> 是的，这是正确的模式。您可以为此使用 JMS 浏览器 API 或 hornetq 管理 API

# android - 安卓清单

> ID：11627620
> 
> 赞同：3
> 
> 时间：2012-07-24T09:09:37.103
> 
> 标签：android, xml

我在互联网上找到了一个代码，用于在启动 Android 应用程序之前显示启动画面。他对代码进行了一些更改，但没有很好地解释。

*   他将 Launcher 用于启动画面`Activity`，并在主 android 中使用 Default `Activity`。
*   他使用包名和主类名，而不是预先生成的 android:name 代码。这是代码。

    ```
     <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".StartingPoint"
        android:label="@string/title_activity_starting_point" >
        <intent-filter>
            <action android:name="com.alfred.splashscreenwithsound.STARTINGPOINT" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
    ```

所以我的问题

1.  **LAUNCHER**和**DEFAULT**有什么区别。
2.  `android:name`将in action更改为包名称有什么好处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:13:41.567

`"android.intent.category.LAUNCHER"`作为我们进入应用程序的主要入口。

`android.intent.category.DEFAULT` 如果`Activity`应该是对一条数据执行的默认操作（中心按下）的选项，则进行设置。

参考[这个](http://developer.android.com/reference/android/content/Intent.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T09:24:43.250

当您编写**LAUNCHER**时，它将使用 Icon 启动应用程序，如果您将其删除，它将不会向您显示应用程序 Icon

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T09:21:34.103

**LAUNCHER**是您的主页**DEFAULT**是您`Activity`加载应用程序时的页面。在设备上第一个启动**器**将打开。然后，如果您触发您的活动页面，**默认**将打开。

# paypal - 通过直接付款支付 Pal 定期付款

> ID：11627623
> 
> 赞同：0
> 
> 时间：2012-07-24T09:09:53.047
> 
> 标签：paypal, paypal-sandbox

我在将定期付款与 PayPal 集成时遇到了一些问题。我使用“Payment Pro”API 通过直接付款开发了定期付款。它在“沙盒”环境中运行良好，但是当我们切换到“实时”时，我们会收到错误“未为该商家启用 DPRP”。PayPal 不支持“Payment Pro”API 吗？如果 PayPal 仍然支持“Payment Pro”API，请告诉我必须在商户帐户中启用哪些功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:17:58.227

正如错误所说，它没有为您的帐户启用。您需要注册 PayPal Website Payments Pro 并要求他们将 Direct Recurring Payments 产品添加到您的帐户。

# objective-c - UIWebview 和 facebook 墙

> ID：11627625
> 
> 赞同：2
> 
> 时间：2012-07-24T09:10:02.547
> 
> 标签：objective-c, ios, facebook, facebook-graph-api

我在 UIWebview 中打开 facebook 墙有一个小问题。我的本地数据库中保存了 access_token 和朋友 ID。现在，我想打开 UiWebview 来展示用户墙。似乎只能以 json 的形式从用户配置文件中获取提要。是否真的可以使用用户 id 和 access_token 显示用户墙。

我可以简单地以 json 的形式获取用户墙提要：

```
https://graph.facebook.com/<user_id>/feed?access_token=<access_token> 
```

但是，这是 json 格式的。有没有办法以 html 形式获取提要或登录到 facebook，以便它使用我现有的令牌将 cookie 存储在 uiwebview 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T18:36:45.583

要在不使用 Json 的情况下使用 webview 查看提要，只需使用 Facebook 页面中的移动 URL 进行 URL 请求。

像这样：

```
http://m.facebook.com/<user_id> 
```

不需要访问令牌来执行此操作。

此致。

# sitecore - Sitecore DMS - 用户代理和操作系统

> ID：11627630
> 
> 赞同：0
> 
> 时间：2012-07-24T09:10:16.350
> 
> 标签：sitecore, sitecore-dms

Sitecore DMS 在哪里/如何解析操作系统？

我知道用户代理会说“Windows NT 5.1”等，但我们的操作系统表没有这样的东西，只有 WinXP。

事实上，操作系统表对我们来说似乎已经过时了，我们如何添加新表并让它们匹配？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:30:02.963

在挖掘 ILSpy 中的代码后，似乎只使用了 ASP.NET 浏览器功能：

[http://msdn.microsoft.com/en-us/library/system.web.httpbrowsercapabilities.aspx](http://msdn.microsoft.com/en-us/library/system.web.httpbrowsercapabilities.aspx)

# java - Java 用 printf 格式化宽度；'$' 不随数字移动

> ID：11627633
> 
> 赞同：0
> 
> 时间：2012-07-24T09:10:40.560
> 
> 标签：java, formatting, printf

想知道如何放置“$”符号，以便在我执行此操作时它与数字一起移动：

```
 System.out.printf("$%20.2f", test); 
```

我明白了

```
$               10.00 
```

我正在尝试将一系列数据格式化为 3 列

我尝试将 $ 放在 C 中的 % 之后，但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T09:18:58.250

没有将文本添加到要格式化的变量的快捷方式。
您必须分两步执行此操作，如下所示：

```
System.out.printf("%20s", String.format("$%.2f", test)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:23:48.887

这可能有点麻烦，但我通常只是为此设置了一个十进制格式化程序：

```
import java.text.DecimalFormat;
class Test {
    public static void main(String[] args) {
        // One-time setup (could be simpler, I've opted for readability).
        final String fmt20v2a = "$#################.00";
        final String fmt20v2b = "%21s";
        final DecimalFormat df20v2 = new DecimalFormat (fmt20v2a);

        // Usage
        System.out.printf(fmt20v2b + "\n", df20v2.format(74.1));
        System.out.printf(fmt20v2b + "\n", df20v2.format(999999.99)); 
```

} }

这使您可以通过一些额外的工作来对齐输出，但设置通常只需完成一次。的输出是：

```
 $74.10
          $999999.99 
```

# jquery - 如何使 div 向上滚动并固定在顶部

> ID：11627636
> 
> 赞同：3
> 
> 时间：2012-07-24T09:10:56.203
> 
> 标签：jquery, css

我是 jquery 的新手，并希望在我向下滚动浏览器中的特定位置后向上滚动并修复顶部，就像[http://www.airbnb.com/jobs/](http://www.airbnb.com/jobs/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T09:26:36.277

试试下面的[**DEMO**](http://jsfiddle.net/68eXM/13/)

这与我的其他答案（[答案](https://stackoverflow.com/questions/9352419/fixed-header-transformation-when-page-is-scrolled/9352465#9352465)）相同，只是更改了一些值。原生 JS 解决方案。

代码是：

JS：

```
window.onscroll=function () {
var top = window.pageXOffset ? window.pageXOffset : document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop;
var head = document.getElementById("header")
if(top > 550){
    head.style.position = "fixed";
    head.style.height="50px"
    head.style.top="0px"
    }
    else {
if(head.getAttribute("style"))
 head.removeAttribute("style")                
    }
} 
```

HTML：

```
<div class="container">
  <div id="header" class="header">
    Hello World
  </div>
</div> 
```

CSS：

```
.container{
 height:2000px;
 width:100%;
 background-color:yellow;
}

.header{
 text-align:center;
 background-color:red;
 height:100px;
 position:relative;
 min-height:50px;
 width:100%;
 top:500px;
} 
```

​</p>

希望能帮助到你

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-24T10:04:14.607

像这样写：

```
$(window).scroll(function () {
                    var height = $('body').height();
                    var scrollTop = $(window).scrollTop();

                      if(scrollTop>500){
                          $('#header').css({ 'position': 'fixed', 'top' : '0' });
                    }
                      else{
                         $('#header').css({ 'position': 'relative', 'top': '500px'});
                       }
                }); 
```

检查这个[http://jsfiddle.net/68eXM/14/](http://jsfiddle.net/68eXM/14/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-24T09:44:52.743

**小提琴演示：http: [//jsfiddle.net/collabcoders/PZp8R/3/](http://jsfiddle.net/collabcoders/PZp8R/3/)**

扩展它以包含 jquery 动画，您将需要包含 jquery、jquery.effects.core.min.js、jquery.effects.slide.min.js 和 jquery.effects.transfer.min.js 文件。

在您的 CSS 中，您需要将 div 的上边距设置为负数，这将是动画的起点。

CSS

```
.tophead {  
    width:100%;
    height: 100px;
    color:#fff;
    background-color:#111;
}

.container {
    height:2000px;
    width:100%;
    margin-top:-100px;
}

.header{
    text-align:center;
    background-color:#000;
    height:100px;
    position:relative;
    min-height:100px;
    width:100%;
    top:500px;
    color: #fff;
}​ 
```

在您的 javascript 中，这将在 3 秒内将整个 div 从 -100 px 变为 0

Javascript

```
$(document).ready(function () {
    $(".container").animate({
         marginTop: "0"
    },2000);
});

$(window).scroll(function () {
    var height = $('body').height();
    var scrollTop = $(window).scrollTop();
    if(scrollTop>500){
         $('#header').css({ 'position': 'fixed', 'top' : '0' });
    } else {
         $('#header').css({ 'position': 'relative', 'top': '500px'});
   }
}); 
```

HTML

```
<div class="container">
    <div id="tophead" class="tophead">
      Sliding Down Container
    </div>
  <div id="header" class="header">
    Hello World
  </div>
</div>​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-07T08:33:57.647

这很简单..就像这个例子：

```
$(window).scroll(function () {
    var height = $('body').height();
    var scrollTop = $(window).scrollTop();
    if(scrollTop>100){
        $('#header').css({ 'position': 'fixed', 'top' : '0', 'opacity': '0.7'});
    } else {
         $('#header').css({ 'position': 'relative', 'top': '100px', 'opacity': '1'});
    }
}); 
```

[http://jsfiddle.net/PZp8R/55/](http://jsfiddle.net/PZp8R/55/)

# .net - 多选主题 WPF 树视图，如 VS 项目资源管理器

> ID：11627640
> 
> 赞同：1
> 
> 时间：2012-07-24T09:11:04.840
> 
> 标签：.net, wpf, treeview

在我当前的项目中，我需要一个 WPF (4.0) TreeView 控件，它支持多项选择和正确的 Windows 主题（关于选择、聚焦和背景颜色/渐变 wrt。节点图标...），就像 Visual Studio 2010 中的项目资源管理器一样. 现在他们设法做到了，我该怎么办？我可以使用与 VS2010 相同的控件吗？

使用 Snoop 我无法分析 GUI。Snoop 似乎看不到窗口的实际内容，只是一些装饰层。我不知道我可以用来研究其他人的实施的其他工具。

到目前为止，我在 CodeProject 上找到了 TreeListView，但它有严重的焦点问题，使得组合键盘和鼠标导航非常麻烦，而 CodePlex 上的 TreeViewEx 也有主要的焦点问题。两者都基于其他控件并使用子控件的冒险组合。两者都有其他错误，我已经可以部分修复。

这个 GUI 是否有一些可靠可靠的实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T20:47:06.380

同时，我已经选择了[TreeViewEx](http://treeviewex.codeplex.com/)控件。在进行了大量修改和错误修复之后，它对我来说效果最好。我已经与原作者联系，将我的更改集成到他的代码中。

**更新：**我的分叉项目现在可以在我的网站上找到。我已将其从其最突出的附加功能重命名为[MultiSelectTreeView 。](http://dev.unclassified.de/source/multiselecttreeview)

# oracle - 将未传输的数据转储到位置文件中

> ID：11627641
> 
> 赞同：0
> 
> 时间：2012-07-24T09:11:12.667
> 
> 标签：oracle, plsql, oracle11g, plsqldeveloper

我想将数据写入位置文件。只有以前没有写入文件的数据才会被写入。显然，表中有一个列来确定数据是否之前写入过。

就我而言，假设字段长度为 80，但数据长度为 30，则其余空间将被空格填充。例如，

```
----------------------------------------
|  Name    |    SSN      |  Integrated |
----------------------------------------
| Doe      |  453214     |     Y       |
| John     |  1234567890 |     N       |
| Scarlett |  123        |     N       |
---------------------------------------- 
```

第一条记录已传输/写入先前的文件。因此，它不会在下一个文件中传输。名称的长度固定为 80 个字符。因此，如果名称少于 80 个字符，则其余空间将由空格填充。它看起来像这样。其他领域也是如此

```
Name           SSN         
John           1234567890
Scarlett       123 
```

我该怎么做？提前致谢。我正在使用 oracle 11g。

*编辑*

好的，我可以编写代码。但是，我想将此代码称为可以在 dbms_jobs 中使用的过程。问题是我不知道如何编写程序。

```
DECLARE
    v_file UTL_FILE.file_type;
BEGIN
    v_file := UTL_FILE.fopen('DIR_VR_AD_INTEGRATION', 'HRMtoAD1_'||sysdate, 'w', 32767);

    FOR x IN (select * from (select RPAD(user_id, 7, ' ') || ' ' || RPAD(pid_company_id, 10, ' ') str from arc_hrvr.vr_ad_integration where integrated = 'N') str where rownum <= 3 order by rownum)
    LOOP
        BEGIN
            UTL_FILE.put_line(v_file, x.str);
         END;
     END LOOP;

    UTL_FILE.fflush(v_file);
    UTL_FILE.fclose(v_file);
END; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:53:52.430

现在，这与您开始时的内容以及标题的方式确实是一个不同的问题。很高兴您已经弄清楚了您需要做的大部分事情，但这应该是一个单独的问题。但是，那将是相当模糊的，所以我不妨在这里尝试一下...

关于程序编写的[文档](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/create_procedure.htm)相当清楚，并且有很多例子，例如[这个](http://www.techonthenet.com/oracle/procedures.php)是谷歌第一次点击“oracle create procedure”的例子。

目前您有一个匿名 PL/SQL 块，因此您需要将其转换为存储过程。在这种情况下，假设您不希望它成为包的一部分，您只需将其更改`DECLARE`为`CREATE PROCEDURE my_procedure_name AS`：

```
CREATE PROCEDURE my_procedure_name AS
    v_file UTL_FILE.file_type;
BEGIN
   ...
END;
/ 
```

# actionscript-3 - 使用标注而不是使用 flex 4 和动作脚本 3 的 TextArea

> ID：11627642
> 
> 赞同：1
> 
> 时间：2012-07-24T09:11:16.600
> 
> 标签：actionscript-3, flex4

实际上，我已经使用 Flex 4 和 Cirrus 为 android 设备开发了简单的聊天应用程序。现在我需要一些关于设计的帮助。实际上对于传入的文本消息，我只是使用了火花 TextArea。但我需要像这样使用“标注”框，![大喊](../Images/ab980f2218886b660d98fdd4b8be4398.png) 任何人都建议我对此提出一些想法。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T12:17:17.737

首先，不要将 TextArea 用于传入的文本。一个简单的 Label 或 StyleableTextfield 会快得多。考虑到您的标注，我认为没有任何理由使用标注。改用绘制框和箭头的皮肤。这比对每条消息都使用标注要轻得多（因此更快）。

# java - 使用 Scalr 调整图像 java 的大小，输出图像不正确，灰色

> ID：11627646
> 
> 赞同：0
> 
> 时间：2012-07-24T09:11:49.033
> 
> 标签：java, image, resize, imgscalr

> **可能重复：**
> [在 Java 中调整图像大小 - 任何开源库？](https://stackoverflow.com/questions/244164/resize-an-image-in-java-any-open-source-library)

我希望我可以在录制之前调整图像大小！我尝试了几次但没有成功。你能告诉我程序吗？我想使用 imgscarlr 或更好的。谢谢你

```
private static void getImages(String src,String Name) throws IOException {

    String folder = null;

    //Exctract the name of the image from the src attribute
    int indexname = src.lastIndexOf("/");

    if (indexname == src.length()) {
        src = src.substring(1, indexname);
    }

    indexname = src.lastIndexOf("/");
    String name = src.substring(indexname, src.length());

    System.out.println(name);

    //Open a URL Stream
    URL url = new URL(src);
    InputStream in = url.openStream();

    OutputStream out = new BufferedOutputStream(new FileOutputStream( folderPath+ name));

    for (int b; (b = in.read()) != -1;) {

        out.write(b);
    }

  BufferedImage originalImage = ImageIO.read(new File(folderPath+name));
    BufferedImage scaledImage = Scalr.resize(originalImage, 200);
    ImageIO.write(scaledImage, "jpg", new File(folderPath+name));
    }
    } 
```

我没问题，但根据图片，我在对灰色部分进行采样时遇到了问题！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T09:21:21.260

您需要先“加载”图像，查看[ImageIO](http://docs.oracle.com/javase/7/docs/api/javax/imageio/package-summary.html) API 了解更多详细信息，然后根据您的需要，缩放图像相对简单

**更新**

[从 URL 读取图像](http://docs.oracle.com/javase/tutorial/2d/images/loadimage.html)

[图片缩放API](http://code.google.com/p/java-image-scaling/)

[多步、高质量缩放](http://today.java.net/pub/a/today/2007/04/03/perils-of-image-getscaledinstance.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T07:08:09.850

我忘了`out.close();`现在它的工作

# c# - Windows 8 Metro：ListView 忽略 ItemTemplate

> ID：11627649
> 
> 赞同：4
> 
> 时间：2012-07-24T09:11:55.293
> 
> 标签：c#, xaml, windows-8, microsoft-metro

我正在关注[本](http://msdn.microsoft.com/en-us/library/windows/apps/br211380.aspx)教程，但我遇到了一个奇怪的问题。有一段说：

> 在 SplitPage.xaml 中，我们还更新了 itemListView 中的 ItemTemplate 属性，以使用我们的 DefaultListItemTemplate 资源，而不是默认模板 Standard130ItemTemplate。这是 itemListView 的更新 XAML。

但是，无论我做什么，它都会显示带有默认模板的列表，如下[所示](http://snag.gy/n8IMs.jpg)。这是我的代码：

```
<DataTemplate x:Key="DefaultListItemTemplate">
    <Grid HorizontalAlignment="Stretch" Width="Auto" Height="110" Margin="10,10,10,0">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <!-- Green date block -->
        <Border Background="{StaticResource BlockBackgroundBrush}" Width="110" Height="110" />
        <ContentControl Template="{StaticResource DateBlockTemplate}" />
        <StackPanel Grid.Column="1"  HorizontalAlignment="Left" Margin="12,8,0,0">
            <TextBlock Text="{Binding Title}" FontSize="26.667" TextWrapping="Wrap"
                   MaxHeight="72" Foreground="#FFFE5815" />
            <TextBlock Text="{Binding Author}" FontSize="18.667" />
        </StackPanel>
    </Grid>
</DataTemplate> 
```

...在 Page.Resources 中，以及

```
<ListView
    x:Name="itemListView"
    AutomationProperties.AutomationId="ItemsListView"
    AutomationProperties.Name="Items"
    TabIndex="1"
    Grid.Row="1"
    Margin="-10,-10,0,0"
    Padding="120,0,0,60"
    ItemsSource="{Binding Source={StaticResource itemsViewSource}}"
    IsSwipeEnabled="False"
    SelectionChanged="ItemListView_SelectionChanged"
    ItemTemplate="{StaticResource DefaultListItemTemplate}"/> 
```

...在页面的网格中。

我试过内联模板并修改 Standard130ItemTemplate 无济于事。但是，指定不存在的模板会引发构建错误。

有什么想法我可能做错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T11:41:20.187

显然这是由于我的屏幕分辨率低（1280x800）造成的。我没有注意到拆分页面模板为 FilledOrNarrow 定义了以下 VisualState：

```
 <ObjectAnimationUsingKeyFrames Storyboard.TargetName="itemListView" Storyboard.TargetProperty="ItemTemplate">
                    <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource Standard80ItemTemplate}"/>
                </ObjectAnimationUsingKeyFrames> 
```

我尝试在模拟器中运行它，任何比它更宽的东西（例如 1366x768）都可以正常工作。

# android - 布局在 2.2 和 4.0 上看起来不同

> ID：11627652
> 
> 赞同：0
> 
> 时间：2012-07-24T09:12:09.490
> 
> 标签：android, android-layout, android-imageview

我有一个在 Android 4.0 和 4.1 上看起来很不错的布局：

![在此处输入图像描述](../Images/fb3b6b341d95ae5e7f5713b2be094b2e.png)

它在 Android 2.2 上看起来像这样

![在此处输入图像描述](../Images/8c45b414d3c999f8e8aef37ab9248f1c.png)

这是我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/linearLayout2"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_marginRight="3dp" >

        <LinearLayout
            android:id="@+id/linearLayout3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <FrameLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                <ImageView
                    android:id="@+id/image"
                    android:layout_width="90dp"
                    android:layout_height="90dp"
                    android:layout_marginLeft="3dp"
                    android:layout_marginRight="3dp"
                    android:layout_marginTop="6dp"
                    android:scaleType="centerCrop"
                    android:src="@drawable/calendar" />

                <TextView
                    android:id="@+id/date_month"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center|top"
                    android:layout_marginTop="12dp"
                    android:gravity="center_horizontal"
                    android:text="Sep"
                    android:textColor="@android:color/black"
                    android:textSize="14dp"
                    android:textStyle="bold" />

                <TextView
                    android:id="@+id/date_day"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center"
                    android:layout_marginTop="5dp"
                    android:gravity="center_vertical|center_horizontal"
                    android:text="26"
                    android:textColor="@android:color/black"
                    android:textSize="40dp"
                    android:textStyle="bold" />

                <TextView
                    android:id="@+id/date_year"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center|bottom"
                    android:layout_marginBottom="9dp"
                    android:gravity="center_vertical|center_horizontal"
                    android:text="2012"
                    android:textColor="@android:color/black"
                    android:textSize="14dp"
                    android:textStyle="bold" />
            </FrameLayout>
        </LinearLayout>

        <LinearLayout
            android:id="@+id/linearLayout4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/title"
                android:layout_marginTop="5dp"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="3dp"
                android:ellipsize="end"
                android:maxLines="1"
                android:textSize="16dp"
                android:textStyle="bold" />

            <View
                android:layout_width="wrap_content"
                android:layout_height="30dp" />

            <TextView
                android:id="@+id/description"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="3dp"
                android:textSize="14dp" />
        </LinearLayout>
    </LinearLayout>
</LinearLayout>

</LinearLayout> 
```

如您所见，ImageView 上的 TextViews 在不同版本上的放置方式不同。

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T10:17:30.950

原因不在于手机的版本，是4.0还是2.2。问题在于屏幕的不同密度和宽度。在android中，由于屏幕尺寸不同，厂商不同，会出现这类问题。不幸`dp`的是，测量没有按预期工作

要使您的应用程序支持这些内容，您应该阅读（如果您还没有阅读过）“支持多个屏幕”部分中的 android 文档。

在您的情况下，您应该创建一个`dimen.xml`文件并移动其中的所有值`dp`。下面的例子会更清楚：

在 dimen.xml 中：

```
...
<dimen name="big_size">90dp</dimen>
... 
```

在 layout.xml 中：

```
...
layout_width="@dimen/big_size"
... 
```

默认`dimen.xml`文件应该在 values 中，然后您应该创建子文件夹，例如`values-mdpi/`，关于您想要支持的不同密度的值。在那里你应该有不同的`dimen.xml`文件。

在 values-mdpi/ 文件夹中，dimen.xml 文件将是：

```
...
<dimen name="big_size">60dp</dimen>
... 
```

请注意，名称相同但值不同。Android 会根据屏幕的密度来理解并取更合适的值。有关更多信息，请阅读我之前添加的文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T10:38:36.647

试试这个它适用于所有 android 设备屏幕

如果您不在代码中使用图像，请将其直接作为 FrameLayout 的背景

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <LinearLayout
        android:id="@+id/linearLayout3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <FrameLayout
            android:layout_width="90dp"
            android:layout_height="90dp"
            android:layout_marginLeft="3dp"
            android:layout_marginRight="3dp"
            android:background="@drawable/calendar"
             >

            <!--
            <ImageView
                android:id="@+id/image"
                android:layout_width="90dp"
                android:layout_height="90dp"
                android:layout_marginLeft="3dp"
                android:layout_marginRight="3dp"
                android:layout_marginTop="6dp"
                android:scaleType="centerCrop"
                android:src="@drawable/calendrier" />
            -->

            <TextView
                android:id="@+id/date_month"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center|top"
                android:layout_marginTop="6dp"
                android:gravity="center_horizontal"
                android:text="Dec"
                android:textColor="@android:color/black"
                android:textSize="14dp"
                android:textStyle="bold" />

            <TextView
                android:id="@+id/date_day"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center_vertical|center_horizontal"
                android:layout_marginTop="1dip"
                android:gravity="top"
                android:text="1"
                android:textColor="@android:color/black"
                android:textSize="40dp"
                android:textStyle="bold" />

            <TextView
                android:id="@+id/date_year"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center|bottom"
                android:layout_marginBottom="8dp"
                android:gravity="center_vertical|center_horizontal"
                android:text="2012"
                android:textColor="@android:color/black"
                android:textSize="14dp"
                android:textStyle="bold" />
        </FrameLayout>
    </LinearLayout>

    <LinearLayout
        android:id="@+id/linearLayout4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginRight="3dp"
        android:layout_marginTop="6dp"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="3dp"
            android:layout_marginTop="5dp"
            android:ellipsize="end"
            android:maxLines="1"
            android:textSize="16dp"
            android:textStyle="bold" />

        <View
            android:layout_width="wrap_content"
            android:layout_height="30dp" />

        <TextView
            android:id="@+id/description"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="3dp"
            android:textSize="14dp" />
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T09:19:39.607

我不知道这是否可行，但如果我是你，我不会为此使用 imageview。我会使用布局并将该图像设置为其背景。

# python - 装饰 lxml.etree._Element 方法

> ID：11627656
> 
> 赞同：2
> 
> 时间：2012-07-24T09:12:39.540
> 
> 标签：python, methods, decorator, lxml, patch

我试图装饰/覆盖/修补 lxml.etree._Element 的**'** *get'*、*'text'*和*'findtext'*方法，但似乎不可能实现，因为所有属性都是只读的，可能是因为它是不是用python写的。有没有办法装饰这些方法？感谢您的任何建议..

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T19:52:50.663

看完评论，听了建议到处使用unicode，在输出数据的时候编码成字符串。谢谢你，但是无论如何我都很好奇完成我想要的任务，所以这就是我想出的，一个 lxml._Element 类包装器：

[https://github.com/integricho/lxmlproxy](https://github.com/integricho/lxmlproxy)

毕竟，也许其他人会发现它对某些东西有用，因为我没有找到其他正统的解决方案。**

# python - matplotlib 中具有重复值（加载配置文件）的 x 轴图

> ID：11627658
> 
> 赞同：0
> 
> 时间：2012-07-24T09:12:41.927
> 
> 标签：python, excel, graph, plot, matplotlib

我有负载配置文件数据，其中 x 轴是负载配置文件，因此对于多个相同的 x 值（恒定负载）我有不同的 y 值。到现在为止，我在 excel 中用线绘制 y 并右键单击图形->选择数据->通过提供范围 ox 轴数据来更改水平轴数据，并用于给我图表

![示例图表](../Images/d36019ec87c383e3cdaf84b3a68b48e0.png)

我遇到的问题是当我尝试给出 plot(x,y) 时，matplotlib 为 x 的唯一 val 绘制 y，即它忽略了相同 x 值的所有剩余值。当我用 plot(y) 绘图时，我在 x 轴上得到序列号，我尝试使用 xticks([0,5,10,15]) 进行检查，但无法获得所需的结果。我的问题是是否有可能以与 excel 类似的方式绘制图表我能想到的另一种选择是用相同的水平轴绘制 plot(y 和 plot (x) 它至少给出了一个图形的想法但是有什么办法可以用excel的方式做吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:20:23.150

如果要`y-values`为给定的 绘图`x-values`，则需要获取具有相同 x 值的索引。如果您正在使用，`numpy`那么您可以尝试

```
import pylab as plt
import numpy as np
x=np.array([1]*5+[2]*5+[3]*5)
y=np.array([1,2,3,4,5]*3)
idx=(x==1) # Get the index where x-values are 1
plt.plot(y[idx],'o-')
plt.show() 
```

如果您正在使用列表，则可以通过以下方式获取索引

```
# Get the index where x-values are 1
idx=[i for i, j in enumerate(x) if j == 1] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T13:32:23.580

根据您的描述，在我看来，您想使用“scatter”绘图命令而不是“plot”绘图命令。这将允许使用冗余 x 值。示例代码：

```
import numpy as np
import matplotlib.pyplot as plt

# Generate some data that has non-unique x-values
x1 = np.linspace(1,50)
y1 = x1**2
y2 = 2*x1
x3 = np.append(x1,x1)
y3 = np.append(y1,y2)

# Now plot it using the scatter command
# Note that some of the abbreviations that work with plot,
# such as 'ro' for red circles don't work with scatter
plt.scatter(x3,y3,color='red',marker='o') 
```

![散点图](../Images/7325755edb2cd3e87bfdcc2ca2a0c49c.png)

正如我在评论中提到的，一些方便的“绘图”快捷方式不适用于“分散”，因此您可能需要查看文档： http: [//matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib。 pyplot.scatter](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.scatter)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-03T17:15:48.517

只是回答自己的问题，当我几年前发布这个问题时发现了这个:)

```
def plotter(y1,y2,y1name,y2name):
    averageY1=float(sum(y1)/len(y1))
    averageY2=float(sum(y2)/len(y2))
    fig = plt.figure()
    ax1 = fig.add_subplot(111)  
    ax1.plot(y1,'b-',linewidth=2.0)
    ax1.set_xlabel("SNo")
    # Make the y2-axis label and tick labels match the line color.
    ax1.set_ylabel(y1name, color='b')
    for tl in ax1.get_yticklabels():
        tl.set_color('b')
    ax1.axis([0,len(y2),0,max(y1)+50])

    ax2 = ax1.twinx()

    ax2.plot(y2, 'r-')
    ax2.axis([0,len(y2),0,max(y2)+50])
    ax2.set_ylabel(y2name, color='r')
    for tl in ax2.get_yticklabels():
        tl.set_color('r')
    plt.title(y1name + " vs " + y2name)
    #plt.fill_between(y2,1,y1)
    plt.grid(True,linestyle='-',color='0.75')

    plt.savefig(y1name+"VS"+y2name+".png",dpi=200)
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-28T15:49:36.253

您可以使用

```
import numpy as np
import matplotlib.pyplot as plt

x = np.array([1, 1, 1, 2, 2, 2])
y = np.array([1, 2, 1, 5, 6, 7])

fig, ax = plt.subplots()
ax.plot(np.arange(len(x)), y)
ax.set_xticklabels(x)
plt.show() 
```

# c# - 如何在 Dll 中调用 Application.AddMessageFilter

> ID：11627659
> 
> 赞同：1
> 
> 时间：2012-07-24T09:12:41.757
> 
> 标签：c#

我想在 C# 中创建一个 dll 文件，该文件具有在加载此 dll 的 Win 表单上调用 Application.AddMessageFilter() 的静态方法。

例如，

```
public Form1()
{
    // initializing
    MyDll.InvokeFilter(SomeClass); // Perfect!
} 
```

而且我不希望它看起来像下面这样，（我什至不认为这段代码会正确工作）

```
public Form1()
{
     // initializing

     // Send also the delegate to Application.AddMessageFilter as a parameter
     // to let MyDll know it, which is not as good.
     MyDll.InvokeFilterWithDelegate(SomeClass, Application.AddMessageFilter);
} 
```

问题是我不知道如何从我的 Dll 文件中调用 Application.AddMessageFilter，因为 Application 类属于 Form1，而不是属于我的 Dll 库。

我错过了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T23:06:32.457

该类`Application`，或者更具体地说`System.Windows.Forms.Application`不“属于 Form1”，可以在`System.Windows.Forms.dll`. 在您的 DLL 项目中添加对它的引用。

ApplicationContexts 存在潜在问题，但调用者不太可能从主 UI 线程以外的任何地方进行调用。

话虽如此，如果“SomeClass”只是一个实现`IMessageFilter`，那么你的库函数有什么意义呢？他们可以打电话给`Application.AddMessageFilter`自己。

# android - 手机文本挖掘

> ID：11627660
> 
> 赞同：2
> 
> 时间：2012-07-24T09:12:42.647
> 
> 标签：android

我有一些文本文件或 html 文件。我想从文本中检索一些单词。我担心我必须在移动设备上进行文本挖掘。我可以使用哪种算法在手机上进行文本挖掘。一个示例将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-10-25T00:13:42.527

我认为你不需要在移动设备上进行文本挖掘，因为算法大多是在云服务器上训练的。除此之外，如果你有很多文件，你可能会使手机 CPU 过载。

如果您有几个文件，为什么不使用正则表达式？

很难举个例子，因为你提供的关于这个案例的信息太少了。我认为您需要在此之前更好地使用 Google，然后返回一个更具体的问题。

# mysql - MySQL 查询逻辑

> ID：11627662
> 
> 赞同：0
> 
> 时间：2012-07-24T09:13:00.157
> 
> 标签：mysql, logic

我有一个充满交易的数据库，以及一个网站，如果交易是特色交易，它将只显示其中一个交易，但是我正在努力获得正确的逻辑......网站上显示的交易必须是。在有效的日期范围内 b. 成为数据库中最近添加的交易

通过使用以下查询，我能够做到这一点：

```
"SELECT * FROM deals WHERE datestart < now() AND dateend > now() ORDER BY deals.deal_id DESC" 
```

伟大的。但是...在极少数情况下会同时添加一大堆交易，因此我需要某种覆盖来指定应该“精选”哪个交易。我添加了一个布尔值 [featured] 并测试了以下查询：

```
"SELECT * FROM deals WHERE datestart < now() AND dateend > now() ORDER BY deals.featured DESC" 
```

它有效，但现在我需要指定特色交易，否则特色交易将被随机选择？而我只想将其作为替代。

所以我需要以某种方式组合上述两个脚本。

有任何想法吗？

多谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:20:27.840

将布尔比较添加到 WHERE 子句并将结果数限制为 1。当按 deal_id 排序时，这将始终返回相同的结果。

```
SELECT *
FROM deals
WHERE datestart < now() AND dateend > now() AND deals.featured IS TRUE
ORDER BY deals.deal_id DESC
LIMIT 1 
```

编辑：

这是另一种选择，因此您不必在 WHERE 子句中添加更多内容。

```
SELECT *
FROM deals
WHERE datestart < now() AND dateend > now()
ORDER BY deals.featured DESC, deals.deal_id DESC
LIMIT 1 
```

ORDER 子句的顺序很重要，如果 deal_id 是唯一的，就像我假设的那样，如果它们以相反的方式排序，则不会使用*特色布尔值。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:15:51.857

如果你只是想组合这两个查询，你可以只组合 where 子句 - 先按 deal_id 排序，然后如果有多个具有相同的 deal_id，然后它会按是否有特色来排序：

```
SELECT *
FROM   deals
WHERE  datestart < Now()
       AND dateend > Now()
ORDER  BY deals.deal_id DESC,
          deals.featured DESC 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T09:24:03.780

要获得特色交易，您需要检查`featured IS TRUE` 并使用`UNION ALL`操作来覆盖它：

```
SELECT *
FROM   deals
WHERE  datestart < Now()
       AND dateend > Now()
       AND featured IS TRUE
ORDER  BY deal_id DESC

UNION ALL

SELECT *
FROM   deals
WHERE  datestart < Now()
       AND dateend > Now()
ORDER  BY deal_id DESC; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T09:27:04.573

我认为你想要做的是以下几点：

```
UPDATE deals 
SET featured=1 
WHERE datestart < now() AND dateend > now()
ORDER BY deal_id DESC
LIMIT 1; 
```

好的，现在您正在尝试更新最新的有效特色交易并将其标记为特色。如果受影响的行数为 0，那么您已经拥有最新的有效特色交易，或者表中根本没有有效交易（您可以选择如何对此做出反应）。

如果受影响的行数为 1，那么您刚刚找到了一个新行，您需要选择它（也许将其填充到您的站点中）。选择语句：

```
SELECT *
FROM deals
WHERE datestart < now() AND dateend > now() AND featured=1
ORDER BY deal_id DESC
LIMIT 1; 
```

理想情况下，您会将这两个查询组合成一个更新选择，但当时无法做到这一点。

# c# - C#.Net：如何使我的列表视图项目可点击

> ID：11627665
> 
> 赞同：1
> 
> 时间：2012-07-24T09:13:20.203
> 
> 标签：c#, .net, regex, listview, listviewitem

我正在 Visual C#.Net 中创建一个工具。该工具的算法是检查括号之前/之后的所有空格，并为发现的错误创建错误消息。例如： input is ( Text ) 将引发错误，因为检测到括号前后的空格。
如果发现错误，代码将在 listview1.items() 中添加错误。

为了让我的问题更清楚，这是我的代码：

```
private void button1_Click(object sender, EventArgs e)
        {
            int error_counter = 0;
            listView1.Items.Clear();

            //requirement 8c
            //check for a space in open and close parenthesis
            Regex test = new Regex(@"\(\s.+\s\)|\[\s.+\s\]|\{\s.+\s\}", RegexOptions.IgnoreCase);
            MatchCollection matchlist = test.Matches(richTextbox1.Text);
            if (matchlist.Count > 0)
            {
                for (int i = 0; i < matchlist.Count; i++)
                {
                    Match firstMatch = matchlist[i];
                    string firstMatch_string = firstMatch.ToString();
                    string[] errors = new string[matchlist.Count];
                    errors[i] = "Ommit Space between a bracket";
                    listView1.Items.Add(errors[i]);
                    error_counter++;
                }
            }
        }

        private void listView1_ItemActivate(object sender, EventArgs e)
        {
            if (listView1.SelectedItems.Count > 0)
            {
                ListViewItem item = listView1.SelectedItems[0];
                MessageBox.Show(item.ToString());
            }
        } 
```

我要寻找的是我的 listview1 的所有项目都是可点击的，并且在用户点击后，该工具将突出显示在richtextbox1 中发现的错误。

感谢您的所有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:14:20.377

Match 对象（如 firstMatch）在这里有两个有用的属性：[索引和长度](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.match.aspx)。

它们为您提供原始文本中相关匹配的位置和长度。根据您的知识，您只需要在richTextBox 中实现高亮！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T11:39:31.330

正如有人已经告诉你的那样，使用 Match 类的 Index 和 Length 属性。这是一个实现奇怪的文本框选择策略的简短示例。但它有效地展示了这个概念：

```
public partial class Form1 : Form
{
    List<Error> errors = new List<Error>();

    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        errors = new List<Error>();
        listView1.Items.Clear();                                    
        foreach(Match m in Regex.Matches(richTextBox1.Text, @"(\(\s+|\s+\)|\[\s+|\s+\]|\{\s+|\s+\})", RegexOptions.IgnoreCase))
        {                           
            //you may decide to differentiate the msg according to the specific problem
            Error error = new Error(m, "Ommit Space between a bracket");
            this.errors.Add(error);
            listView1.Items.Add(error.msg);                
        }            
    }

    private void listView1_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (listView1.SelectedIndices.Count > 0)
        {
            Error error = errors[listView1.SelectedIndices[0]];
            Select(richTextBox1, error);
        }
    }

    private static void Select(RichTextBox rtb, Error e) {
        string o = rtb.Text;
        rtb.Clear();
        for (int i = 0; i < o.Length; i++)
        {
            if (i >= e.index && i <= e.index + e.length)
            {
                rtb.SelectionColor = Color.White;
                rtb.SelectionBackColor = Color.Red;
            }
            else
            {
                rtb.SelectionColor = Color.Black;
                rtb.SelectionBackColor = Color.White;
            }
            rtb.AppendText(o[i].ToString());
        }
    }              
}

public class Error
{

    public int index;
    public int length;
    public string value;
    public string msg;

    public Error(Match m, string msg)
    {
        this.index = m.Index;
        this.length = m.Length;
        this.value = m.Value;
        this.msg = msg;
    }
} 
```

# c# - 使用 xml 作为配置文件

> ID：11627672
> 
> 赞同：2
> 
> 时间：2012-07-24T09:13:43.983
> 
> 标签：c#, xml

我正在尝试弄清楚如何使用我`XmlTextReader`的`XmlTextWriter`程序的配置文件。

xml 文件如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<Base>
    <Global>
        <some_config_value>86400</some_config_value>
        <test1>t_1</test1>
        <test2>t_2</test2>
        <test3>t_3</test3>
        <test4>t_4</test4>
    </Global>
    <test_head>
        <test5>t_5</test5>
        <test6>t_6</test6>
    </test_head>
</Base> 
```

这是我到目前为止的课程：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml;

namespace my_program.Global
{
    class CXMLConfig
    {
        private string path;

        public CXMLConfig(string filepath)
        {
            path = filepath;
        }

        public string XmlReadValue(string Section, string Key)
        {
            XmlTextReader textReader = new XmlTextReader(path);
            ReadElements readEl = new ReadElements(textReader, Section, Key);
            textReader.Close();
            return readEl.Value;
        }

        private class ReadElements
        {
            XmlTextReader textReader;
            string Section;
            string Key;

            private bool inBase = false;
            private bool inSection = false;
            private bool inKey = false;

            public string Value { get; private set; }

            public ReadElements(XmlTextReader textReader_set, string Section_set, string Key_set)
            {
                Value = "";

                this.textReader = textReader_set;
                this.Section = Section_set;
                this.Key = Key_set;

                textReader.Read();
                while (textReader.Read())
                {
                    // Move to fist element
                    textReader.MoveToElement();

                    string nodetype = textReader.NodeType.ToString();

                    if (textReader.LocalName == "Base")
                    {
                        if (nodetype == "Element")
                        {
                            if (!inBase)
                                inBase = true;
                        }
                        else if (nodetype == "EndElement")
                        {
                            if (inBase)
                                inBase = false;
                        }
                    }
                    else if (inBase && textReader.LocalName == Section)
                    {
                        if (nodetype == "Element")
                        {
                            if (!inSection)
                                inSection = true;
                        }
                        else if (nodetype == "EndElement")
                        {
                            if (inSection)
                                inSection = false;
                        }
                    }
                    else if (inBase && inSection && textReader.LocalName == Key)
                    {
                        if (inSection)
                        {
                            if (nodetype == "Element")
                            { 
                                if (!inKey)
                                    inKey = true;
                            }
                            else if (nodetype == "EndElement")
                            {
                                if (inKey)
                                    inKey = false;
                            }
                        }
                    }
                    else if (inBase && inSection && inKey)
                    {
                        if (nodetype == "Text")
                        {
                            Value = textReader.Value.ToString();
                            //Console.WriteLine(Value);
                        }
                    }
                }
            }

        }
    }
} 
```

所以首先，这可能是糟糕的 XML。我以前从未使用过它，它看起来确实有点……奇怪。还有一个事实是我编写了整个`ReadElements`类来从配置文件中读取一个值，但我想会有一种更简单的方法来做到这一点`XmlTextReader`（但我找不到它）。最后，我还没有弄清楚如何在`XmlTextWriter`不从上到下重写整个 xml 文件的情况下更新 xml 文件中的值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T09:36:24.710

您可以使用`XmlSerializer`序列化和反序列化任意配置类。这是一个示例实现：

```
public enum MyEnum
{
    ValueA,
    ValueB
}

[Serializable]
public class Configuration : PersistableObject
{
    public double A { get; set; }
    public string B { get; set; }
    public MyEnum C { get; set; }
}

public class PersistableObject
{
    public static T Load<T>(string fileName) where T : PersistableObject, new()
    {
        T result = default(T);

        using (FileStream stream = File.OpenRead(fileName))
        {
            result = new XmlSerializer(typeof(T)).Deserialize(stream) as T;
        }

        return result;
    }

    public void Save<T>(string fileName) where T : PersistableObject
    {
        using (FileStream stream = new FileStream(fileName, FileMode.CreateNew))
        {
            new XmlSerializer(typeof(T)).Serialize(stream, this);
        }
    }
} 
```

有关如何配置 XmlSerializer 的更多信息，请查看 MSDN 文章：http: [//msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)

# arm - armlink 的类似选项“-BSymbolic”

> ID：11627677
> 
> 赞同：0
> 
> 时间：2012-07-24T09:14:01.807
> 
> 标签：arm, dynamic-linking, relocation

*为了减少重定位，可以*在 gcc 工具链中使用“-BSymbolic” 。但是 armlink 怎么样？有类似的选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T03:28:05.930

-- 来自 armlink 的符号。但它似乎与不同的impl。与 gcc。

# javascript - 如何嵌入特定的推文但仍对其进行样式设置？

> ID：11627681
> 
> 赞同：4
> 
> 时间：2012-07-24T09:14:21.997
> 
> 标签：javascript, jquery, twitter, tweets, oembed

我想嵌入具有特定推文 ID 的推文。我知道您可以使用“嵌入此推文”选项来获取预渲染的 HTML，但我希望能够为推文设置样式并拥有更多控制权。jQuery怎么可能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T11:22:13.103

将 ajax 请求与 twitter 的 oEmbed 端点一起使用：[https ://dev.twitter.com/docs/embedded-tweets](https://dev.twitter.com/docs/embedded-tweets)

# winapi - 以编程方式获取另一个进程的环境变量？

> ID：11627682
> 
> 赞同：3
> 
> 时间：2012-07-24T09:14:26.717
> 
> 标签：winapi, linux-kernel

我想从进程B获取进程A的环境变量？与A和B没有关系。不是System环境变量，而是已经传递给进程的环境变量！

在linux或windows中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T09:18:17.437

在 Linux 中，您可以通过读取（或映射）/proc/[pid]/environ 来做到这一点。从[过程（5](http://linux.die.net/man/5/proc)）：

> /proc/[pid]/环境
> 
> 该文件包含进程的环境。这些条目由空字节 ('\0') 分隔，最后可能有一个空字节。因此，要打印出流程 1 的环境，您可以：
> 
> ```
>  $ (cat /proc/1/environ; echo) | tr '\000' '\n' 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T09:19:10.253

环境变量显示在`/proc/PID/environ`：

```
$ cat /proc/19065/environ
DISPLAY=localhost:0.0SHELL=/bin/bashPWD=/home/phil... 
```

看看[这个](https://stackoverflow.com/questions/205064/is-there-a-way-to-change-another-processs-environment-variables)问题。

# cakephp - CakePHP 来自一个字段的多封电子邮件

> ID：11627684
> 
> 赞同：0
> 
> 时间：2012-07-24T09:14:38.587
> 
> 标签：cakephp

我对 cakephp 很陌生，我在网站上做了示例帖子教程，现在我正在做我的第一个项目。它很简单。管理员粘贴电子邮件列表，它们将成为数据库中的记录，并带有随机密码。

1.  所以，我想通过输入 em 'foo@bar.com; 来注册多个电子邮件；bar@foo.com; com@foo.bar' 样式在同一个文本框中。在数据库中，它们应该成为记录/电子邮件。对于一封电子邮件，我的代码是： echo $this -> Form -> input('email'); echo $this -> Form -> input('code', array('default' => genRandomString()));

2.  我也不想稍后将地址验证为电子邮件。那么我可以使用php的explode然后以一种或另一种方式验证它们吗？

问候杰夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:26:28.953

Cake 本身有一个巧妙的方法来爆炸它们：

```
$emails = String::tokenize($emailList, ';'); 
```

（[http://book.cakephp.org/2.0/en/core-utility-libraries/string.html#string](http://book.cakephp.org/2.0/en/core-utility-libraries/string.html#string)）

是的，您可以遍历它们并手动逐个验证它们，或者将它们放入数组 saveAll() 理解并使用 'validate'=>'first' 或 'only' 。

（[http://book.cakephp.org/2.0/en/models/data-validation/validating-data-from-the-controller.html#validating-data-from-the-controller](http://book.cakephp.org/2.0/en/models/data-validation/validating-data-from-the-controller.html#validating-data-from-the-controller)）

# sql - 如果 col1 值退出两次并且 c ol2 不为空，则选择行

> ID：11627685
> 
> 赞同：2
> 
> 时间：2012-07-24T09:14:40.127
> 
> 标签：sql, performance, select, subquery, informix

我们正在监控网络设备。一个设备可能出现在多个交换机上。

我们想要过滤掉那些在上行链路/端口通道上的设备，以防它也出现在另一个端口上。选择所有其他设备。

假设表格如下所示：

```
HOST,  SWITCH,  PORT
HostA, Switch1, 01
HostB, Switch1, 02
HostA, Switch2, Po  - Po is portchannel / uplink
HostC, Switch2, Po  - Po is portchannel / uplink 
```

期望的输出：

```
HostA, Switch1, 01
HostB, Switch1, 02
HostC, Swtich2, Po  - is only on an uplink / so that is OK 
```

条目 HostA、Switch2、Po 需要过滤掉，因为它也出现在另一个端口上。

现在的问题是如何编写有效的查询。

在 SQL 术语中，我们希望选择除 HOST 出现两次之外的所有行。然后我们只想要 PORT 不是 'Po' 的那一行

由于子查询，我们当前的查询很慢！？我假设子查询正在创建一个笛卡尔积 - 对吧？

```
SELECT * FROM devices t1
WHERE NOT ((Port = 'Po') AND 
      ((Select count(*) from table t2 where t1.host=t2.host AND NOT Port='Po') > 0)) 
```

同样的问题是如何编写更快的 SQL 查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:28:37.757

```
SELECT HOST as HOST,  SWITCH,  PORT from table 
WHERE port<>'po' 
UNION ALL
SELECT MAX(HOST) as HOST,  SWITCH,  PORT from table
WHERE port='po'
GROUP BY SWITCH,  PORT 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:28:59.813

不存在应该比相关计数更快（*）

```
select *
  from devices t1
 where (port <> 'Po'
        or not exists (select null
                         from devices t2
                        where t2.host = t1.host
                          and t2.Port <> 'Po')
       ) 
```

**更新：**如果您认为加入版本会表现更好：

```
select t1.*
  from devices t1
  left join devices t2
    on t1.host = t2.host
   and t2.port <> 'Po'
 where (t1.port <> 'Po'
    or t2.port is null) 
```

查询自连接设备表，从第二个实例中删除 Po。然后它继续选择所有非 Po 和 Po 而不匹配非 Po。哦，好解释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T13:32:18.250

假设主机/交换机组合上最多有一个端口，您可以使用 group by：

```
select HOST, SWITCH,
       (case when max(case when PORT <> 'Po' then 1 else 0 end) = 1
             then max(case when PORT <> 'Po' then port end)
             else 'Po'
        end) port
from t
group by host, switch 
```

如果你有一个支持 windows 功能的数据库，你可以使用：

```
select t.host, t.switch, t.port
from (select t.*,
             sum(isPo) over (partition by host, switch) as numPo,
             count(*) over (partition by host, switch) as numAll
      from (select t.*,
                   (case when port = 'po' then 1 else 0 end) as isPo
            from t
           ) t
     ) t
where numPo = numAll or -- all are Po
      (port <> 'Po')    -- remove any other Pos 
```

# php - $_GET 在所有创建的类中都可用吗？

> ID：11627689
> 
> 赞同：0
> 
> 时间：2012-07-24T09:15:11.713
> 
> 标签：php, get, eval

我做了一个请求，我的 URL 有一个像这样的参数`.../index.php?customer=abc`

In`index.php`的课程`$_GET['customer']`可用。

然后创建了多个其他类。

最后在`somefile.php`包含一些不同的类`someClass`，`$_GET['customer']`不再可用。

我被迫使用一个框架，该框架使用一种`eval()`在按钮单击时编写 PHP 代码的表单。

`new TDynButton($body, "login", ... , "\$this->win->doLogin();");`

`doLogin()`里面`$_GET['customer']`没有。无法理解为什么。如果这个框架`action=GET`在我失去的背景中使用，是否有可能`$_GET`？我完全迷路了。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T09:19:37.043

我的方法是通过将 $_GET['customer'] 中的信息传递给构造函数并将其存储在私有成员中来将其提供给实例化对象。这样您就可以获得所需的信息，并且无需直接访问 $_GET。无论如何，我认为这是一个更好的设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:16:52.917

是的，$_GET 是一个在所有 PHP 脚本中都可用的超全局变量。

是的，通常，框架转换/清理 GET/POST 数组并清除它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T09:18:12.237

$_GET 是一个全局变量，将在您使用它的整个脚本中可用。不过，您必须将它传递给脚本 - 例如 somefile.php?customer=peter

# c# - WebDriver 的图像（非元素）可见性

> ID：11627700
> 
> 赞同：4
> 
> 时间：2012-07-24T09:15:40.000
> 
> 标签：c#, html, image, webdriver

我有一个可点击的图像，它在 FireFox 中不可见。我的意思是，没有图像，但是有一个元素（并且它是可点击的）。**FindElement(by).Displayed**返回 true 但仍然没有图像。问题是我如何检查，这张图片是否可见？

另外，我在 html 标头中发现了一个错误（原因，为什么图像不可见），也许有一种方法可以使用 html 标头检查图像是否存在？

```
public bool IsFileIconDisplayed()
        {
            return IsElementDisplayed(By.XPath("//*[@class='SomeClass']/img"));

        }

protected bool IsElementDisplayed(By by)
        {
            return FindElement(by).Displayed;
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T10:15:30.493

图像是否具有将其宽度和高度设置为预设值的样式？

如果没有，您可以在 Javascript 中查询图像元素的客户端宽度和高度属性。

```
document.getElementById(<webElement>).getClientRects()[0].width
document.getElementById(<webElement>).getClientRects()[0].height 
```

要不就

```
document.getElementById(<webElement>).naturalWidth 
```

使用 JavascriptExecutor，您应该能够将这些值绘制到您的 Java/C# 代码中，并根据图像的宽度/高度得出加载/未加载的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T16:00:13.850

该线程包含有关如何检查图像可见性的有价值信息（最关注 Dave Hunt 提供的答案）

[如何使用 Selenium WebDriver 检查 404 的 URL？](https://stackoverflow.com/questions/1453527/how-to-check-url-for-404-using-selenium-webdriver)

# php - 联系表格+重定向不起作用

> ID：11627708
> 
> 赞同：0
> 
> 时间：2012-07-24T09:16:02.910
> 
> 标签：php, forms, redirect, submit

我制作了一个简单的“姓名和电子邮件”联系表格，我希望在提交信息后将其重定向到“page2.html”。

我无法让它工作。

这是我为提交表单制作的 html 部分。我仍然不确定“名称”部分代表什么，id 部分（带有破折号）指的是 CSS 样式。但无论如何，这就是我制作联系人“姓名和电子邮件”表格的方式。

```
<form method="post" action="submission.php" name="contactform" id="contact-form">
        <fieldset>
        <label for=name accesskey=U><span class="required">*</span> Name</label>
        <input name="name" type="text" id="name" size="30" value="" /> 
        <br />
        <label for=email accesskey=E><span class="required">*</span> Email</label>
        <input name="email" type="text" id="email" size="30" value="" />
        <br />
        <input type="submit" class="submit" id="submit-button" value="Submit" />
        </fieldset>        
</form> 
```

并且 php 部分被回收，我尝试在最后一行输入带有重定向的标题，但它不起作用，最好的方法是在浏览器中打开一个空白页面，打印出我在表单中输入的信息。

我希望在提交信息后重定向表单，所以......提前感谢您的帮助：D

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript" src="jquery-1.3.2.min.js"></script>
<script src="http://www.google.com/jsapi"></script>
<script type="text/javascript">google.load("jqueryui", "1.5.2");</script>
<? 
if($_POST['name']!="" ){

    $headers    = "From: Webmaster";
    $message    = 
  strtoupper($_POST['name'])."
".strtoupper($_POST['email'])."
";
    echo str_replace("\n","<br />", $message);
    $headers2   = "From: Sender Name <email@gmail.com>\nContent-Type:     text/plain; charset=UTF-8; format=flowed\nMIME-Version: 1.0\nContent-Transfer-Encoding:     8bit\nX-Mailer: PHP\n";
    $message2   = "Message
";

    mail("webmaster@gmail.com", "Subject", $message, $headers);
    mail("$_POST[email]", "Subject", $message2, $headers2);

    $myFile = "submissions.txt";
    $fh = fopen($myFile, 'a') or die("can't open file");
    $stringData =     "$_POST[name]*$_POST[email]*".$_SERVER['REMOTE_ADDR']."*".date("d-m-Y H:i")."
";
    fwrite($fh, $stringData);
    fclose($fh);

} else {
    echo "You didnt enter anything";
    ?>
    <script language="javascript">
    alert("You didnt enter anything");
    </script>
    <?
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:27:50.797

表单中的 name 属性将给 $_POST 数组是 name。例如，使用

```
<input type="text" name="awesometext"/> 
```

在带有 method="post" 的表单中，将使该文本字段的值可以通过您在表单操作中定义的 php 脚本中的 $_POST['awesometext'] 访问。

如果在发送电子邮件后您想使用 header() 将用户重定向到另一个页面，则在此之前的页面上必须不生成任何输出。摆脱所有回声和 html 输出，因此删除您在开始时拥有的 html。如果你想使用 header()，你可能只有没有输出的 php 代码。

然后你可以使用`header('Location:somepage.php');`指向somepage.php。

您的代码将是：

```
<?php 
if($_POST['name']!="" ){

$headers    = "From: Webmaster";
$message    = 
strtoupper($_POST['name'])."
".strtoupper($_POST['email'])."
";
echo str_replace("\n","<br />", $message);
$headers2   = "From: Sender Name <email@gmail.com>\nContent-Type:     text/plain; charset=UTF-8; format=flowed\nMIME-Version: 1.0\nContent-Transfer-Encoding:     8bit\nX-Mailer: PHP\n";
$message2   = "Message
";

mail("webmaster@gmail.com", "Subject", $message, $headers);
mail("$_POST[email]", "Subject", $message2, $headers2);

$myFile = "submissions.txt";
$fh = fopen($myFile, 'a') or die("can't open file");
$stringData =     "$_POST[name]*$_POST[email]*".$_SERVER['REMOTE_ADDR']."*".date("d-m-Y H:i")."
";
fwrite($fh, $stringData);
fclose($fh);

//header here
header('Location:somepage.php');

} else {
echo "You didnt enter anything";
?> 
```

header() 需要在生成任何输出之前调用。上面的代码应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:28:24.443

```
$a = mail("webmaster@gmail.com", "Subject", $message, $headers);
$b = mail("$_POST[email]", "Subject", $message2, $headers2);

if($a && $b)
{
  echo '<script>document.location="page2.html"; </script>'
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T09:28:52.610

如果脚本中有任何输出，则无法发送 php 重定向标头。要么将您的 php 部分更改为页面顶部，但您可以在 php 中进行

```
header("location:page2.html"): 
```

或在 php 中使用 javascript 重定向

```
echo '<script>document.location="page2.html"; </script>'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-03T14:05:48.717

我在function.php中使用下面的代码并且它正在工作

```
add_action( 'wpcf7_mail_sent', 'wpcf7_mail_sent_callback' );
function wpcf7_mail_sent_callback() {
     header("location: https://www.example.com/thankyou/");
} 
```

# c# - text_changed 事件不起作用

> ID：11627714
> 
> 赞同：0
> 
> 时间：2012-07-24T09:16:27.230
> 
> 标签：c#

```
private void txtName_TextChanged(object sender, EventArgs e)
{
    if (dataGridView1.SelectedRows.Count == 1)
    {
        dataGridView1.SelectedRows[0].Cells["someValue"].Value = txtName.Text;
    }
} 
```

当文本框中的文本发生更改时，它应该显示在数据网格视图中，如果我选择已经有数据的单元格，那么它工作正常但是如果我选择一个新行（空行），文本不会出现在数据网格视图中允许用户为 datagrid 视图添加行设置为 true。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:35:52.090

确保您的文本框 AutopostBack 属性设置为“true”..否则 textchanged 事件将不会触发

# c++ - 提升/创建流

> ID：11627722
> 
> 赞同：-1
> 
> 时间：2012-07-24T09:16:49.420
> 
> 标签：c++, boost, stream

您能否提供一个最简单代码的简单示例来创建提升“in”流（boost::iostreams）？我试图创建一个可以稍后分配给 file_sink 的流。提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:31:17.180

这是一个很好的起点

[http://www.boost.org/doc/libs/](http://www.boost.org/doc/libs/)

# javascript - Three.js TrackballControls.js 仅在 z 和 x 轴上旋转

> ID：11627727
> 
> 赞同：4
> 
> 时间：2012-07-24T09:17:07.517
> 
> 标签：javascript, three.js

我试图在 threejs 中设置 TracballControls 以仅在两个轴上移动，仅平移和倾斜，没有滚动。有没有可能实现它？我的代码：http: [//360.art.pl/experimental/2/](http://360.art.pl/experimental/2/) 鼠标移动应该是这样的：http: [//360.art.pl/experimental/1/](http://360.art.pl/experimental/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T22:48:52.377

我认为这会帮助你：（解决了我的问题）

查看您的 TrackballControl.js 文件并更改第 148 行

从：

```
_this.object.up.applyQuaternion( quaternion ); 
```

至：

```
_this.object.up.applyQuaternion( new THREE.Vector4(0,0,0,1) ); 
```

//更新仅适用于旧版本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-22T23:08:08.447

我意识到这已经很老了，但由于它仍然是谷歌的主要结果，我将描述我是如何完成这项工作的。

为了防止滚动（锁定 z 轴），您可以防止 rotateCamera() 更改相机的 Up 向量。

注释掉该行（~第 200 行）

```
_this.object.up.applyQuaternion(quaternion); 
```

如果你喜欢你也可以锁定相机的旋转矢量，添加

```
_this.object.rotation.z = 0; 
```

或者

```
_this.object.rotation.set(0, 0, 0); 
```

到函数结束。但是在实践中，我发现这并没有太大区别，因为大部分旋转是由相机相对于它的 lookAt 目标（trackballControls.js 文件中的_this.target）的移动引起的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-22T08:51:39.193

我只是改变了变量

```
this.noPan 
```

在第 26 行设置为假。未注释

```
_this.object.up.applyQuaternion( quaternion ); 
```

并增加了

```
this.dynamicDampingFactor = 0.2; 
```

到 0.8。

# zend-framework - 使用 PHPUnit 进行 ZendFramework 测试无法获取响应

> ID：11627728
> 
> 赞同：1
> 
> 时间：2012-07-24T09:17:11.560
> 
> 标签：zend-framework, phpunit

我有这个发出 Ajax 请求的测试代码，我需要测试响应是有效的 JSON，但是我无法得到响应。我正在使用 PHPUnit 3.5.15 和 ZendFramework 1.11.11

```
class ClienteControllerTest extends ControllerTestCase
{

    public function testIndexAjaxAction()
    {
        $this->login();

        $this->resetRequest()->resetResponse();

        $this->dispatch("/cliente/ajax/?sEcho=2&iColumns=7....");

        $this->assertNotController('error');
        $this->assertNotAction('error');
        $this->assertController('cliente');
        $this->assertAction('ajax');

        $this->assertNotRedirect();

        $this->assertResponseCode(200, 'Ajax index fallita');

        //$this->assertNotNull(json_decode($this->getResponse()->getBody()));
        //$this->getResponse()->outputBody();

    } 
```

我试图设置 die(print_r($this->getResponse)) 我得到

```
Zend_Controller_Response_HttpTestCase Ob
(
    [_body:protected] => Array
        (
        )

    [_exceptions:protected] => Array
        (
        )

    [_headers:protected] => Array
        (
        )

    [_headersRaw:protected] => Array
        (
        )

    [_httpResponseCode:protected] => 200
    [_isRedirect:protected] =>
    [_renderExceptions:protected] =>
    [headersSentThrowsException] => 1
)
1 
```

我怎样才能在 dispatch() 之后得到响应？

# c# - 加解密时是否需要使用初始化向量？

> ID：11627729
> 
> 赞同：0
> 
> 时间：2012-07-24T09:17:11.530
> 
> 标签：c#, encryption-symmetric

我是 C# 的新手，我的任务是加密 C# 中的文件并将其放到服务器上（提到使用 256 位 AES 加密）。谁想要它，他们应该先解密然后使用它。

但我对此有一些疑问：我正在使用 AESCryptoServiceProvider 类。我正在使用该方法`CreateEncryptor(Byte[], Byte[])`。但我想问的问题是，如果我使用密钥和 IV 加密文件，那么我必须与用户密钥和 IV 共享两者。

在这种情况下我该怎么办？我希望在加密和解密时只使用密钥。我怎样才能做到这一点？

我对此完全感到困惑。请建议我采取一些步骤。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:33:26.500

据我所知，IV 不需要保密，因此您可以将其与加密数据一起存储在服务器上。只需确保每个 IV 都是随机的，并且您不会重复使用它们。

有关 IV 的更多详细信息，请查看此处：
[http ://en.wikipedia.org/wiki/Initialization_vector](http://en.wikipedia.org/wiki/Initialization_vector)

# c# - Delegate.Combine() 问题？

> ID：11627736
> 
> 赞同：0
> 
> 时间：2012-07-24T09:17:32.680
> 
> 标签：c#, events, delegates

我真的不明白这段代码有什么问题。它抛出了几个错误：

> 错误 CS0079：事件只能出现在or运算符`core.Events.Event.thisEvent`的左侧`+=``-=`
> 
> 错误 CS0070：事件`core.Events.Event.thisEvent`只能出现在类型的左侧`+=`或`-=`在类型之外使用时 `core.Events.Event`
> 
> 错误 CS1502：匹配的最佳重载方法 `System.Delegate.Combine(System.Delegate, System.Delegate)`有一些无效参数
> 
> 错误 CS1503：参数`#1`无法将`object`表达式转换为类型 `System.Delegate`

我做错了什么，我该如何解决？

```
using System;
using System.Runtime.CompilerServices;

namespace core.Events
{
    public class Event
    {
        public delegate void EventDelegate (object from,EventArgs args);

        public event Event.EventDelegate thisEvent {
            [MethodImpl(MethodImplOptions.Synchronized)]
            add {
                this.thisEvent += (Event.EventDelegate)Delegate.Combine (this.thisEvent, value);
            }
            [MethodImpl(MethodImplOptions.Synchronized)]
            remove {
                this.thisEvent -= (Event.EventDelegate)Delegate.Remove (this.thisEvent, value);
            }
        }

        public void call (object from, EventArgs args)
        {
            this.thisEvent (from, args);
        }
    }
} 
```

预先感谢您的帮助，我想我只是超级累了，迷失在源头上...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T23:28:27.443

这与在属性的 getter 中使用属性名称类似的错误。这通常会导致 SO，但是这个错误很早就被发现了。您需要创建一个私有支持字段来存储委托，当您显式编写访问器时，编译器不再为您自动生成它。因此：

```
 private EventDelegate eventImpl;

    public event Event.EventDelegate thisEvent {
        [MethodImpl(MethodImplOptions.Synchronized)]
        add {
            this.eventImpl += value;
        }
        [MethodImpl(MethodImplOptions.Synchronized)]
        remove {
            this.eventImpl -= value;
        }
    }

    public void call(object from, EventArgs args) {
        var handler = this.eventImpl;
        if (handler != null) handler(from, args);
    } 
```

注意 call() 实现，如果没有人订阅事件，它会避免崩溃，而当线程取消订阅事件时，它会避免另一个崩溃。我使用了快捷符号来避免显式调用 Delegate.Combine()。请注意，如果您不使用访问器，此代码实际上与编译器自动生成的代码并没有什么不同。

# android - Android：ProgressDialog 中的 ProgressBar 没有动画

> ID：11627743
> 
> 赞同：1
> 
> 时间：2012-07-24T09:17:55.887
> 
> 标签：android, android-asynctask

我创建了一个 AsyncTask 类用于从后台获取数据（访问数据库）。

在**onPreExecute()**方法中，我创建了一个进度对话框

```
 try {
            progressDialog = ProgressDialog.show(context, "",
                    "Please wait...", true);
            progressDialog.setIndeterminate(true);

        } catch (final Throwable th) {
            // TODO
        } 
```

在 onpostExecute()

```
 protected void onPostExecute(Boolean result) {

            pinPoint();
            progressDialog.dismiss();
        } 
```

我更新的课程，

```
@Override
        protected Boolean doInBackground(Void... params) {
            clust = getPinPointClusters();
            runOnUiThread(new Runnable() {
                public void run() {
                    plotClusters(clust);
                }
            });

            return true;
        }

        @Override
        protected void onPostExecute(Boolean result) {

            progressDialog.dismiss();
        } 
```

这里 pinpoint() 方法将从服务器获取一些数据并将点固定在地图中。但是 ProgressDialog 中的 progressBar 没有动画...请给我最好的方法...

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T09:30:41.180

我建议您将**pinPoint() 方法**放在***影响 UI***`doInBackground method`的方法**pinPoint()**中的行可以保留在此方法下：

 *```
activityname.runOnUiThread(new Runnable() {
    @Override
        public void run() 
         {
        // Put here the line which is changing the UI.          
     }
}); 
```

**示例：**当任何行尝试更改 doInBackground 中的 UI 时，请执行以下操作：

```
 protected Boolean doInBackground(final String... args) 
   {
     .
     .
     .
     .     
    activityname.runOnUiThread(new Runnable() {
            @Override
                public void run() 
                 {
                   eg. linearLayout.addView(ChildView);         
             }
        });
     .
     .
     . 
   } 
```

现在，您必须从**onPostExecute()**方法中***解散。***`ProgressDialog`

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T09:27:23.247

“动画”发生在主 UI 线程上。`onPostExecute`也运行在 UI 线程上，因此当您调用服务器时，您实际上是在阻止它。移动`pinPoint`到`doInBackground`它在后台线程上执行，允许进度对话框保持动画。

在更高版本的 android（Honeycomb [Android 3.0] 及更高版本）上运行代码时，在严格模式下也会抛出[NetworkOnMainThreadException 。](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)

如果`pinPoint`需要更改 UI，则需要将网络调用分离为`doInBackground`（+ 数据操作），并且只有 UI 更改为`onPostExecute`. 您可以保留对数据的任务引用或将其作为结果传递。

您还可以使用该`publishProgress`方法，在`doInBackground`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T09:23:30.660

您已经创建了不同的函数来获取数据和更新 UI 部分

```
 private class FetchRSSFeeds extends AsyncTask<String, Void, Boolean> {

    private ProgressDialog dialog = new ProgressDialog(HomeActivity.this);

    protected void onPreExecute() {
        this.dialog.setMessage("Please wait");
        this.dialog.show();
    }

    protected Boolean doInBackground(final String... args) {
        try {
            Utilities.arrayRSS = objRSSFeed.FetchRSSFeeds(Constants.Feed_URL);
            return true;
        } catch (Exception e) {
            Log.e("tag", "error", e);
            return false;
        }
    }

    @Override
    protected void onPostExecute(final Boolean success) {

        if (dialog.isShowing()) {
            dialog.dismiss();
        }

        if (success) {
            // Setting data to list adaptar
            setListData();
            txtTitle.setText(Utilities.RSSTitle);
        }
    }
} 
```***

# c# - 在datagridview中选择comobox值时从数据库texbox中获取数据？

> ID：11627745
> 
> 赞同：1
> 
> 时间：2012-07-24T09:17:57.137
> 
> 标签：c#, sql-server, database, visual-studio-2008, datagridview

当我从 datagridview 组合框中选择一个值以从数据库获取到 datagridview 文本框时，我想要。当我选择任何应该从数据库中获取单价的药物名称时，请参见图像。怎么可能呢？

```
 SqlConnection con = new SqlConnection(connection string);

            con.Open();

            SqlDataAdapter adp = new SqlDataAdapter("select quantity,unitprice,totalprice from stock where medicinename='" + dataGridView1.Columns[0].ToString() + "' ", con);
            DataSet ds = new DataSet();
            adp.Fill(ds);
            dataGridView1.DataSource = ds;

            dataGridView1.Columns[1].DataPropertyName = "quantity";
            dataGridView1.Columns[2].DataPropertyName = "unitprice";
            dataGridView1.Columns[3].DataPropertyName = "totalprice";
            con.Close(); 
```

![在此处输入图像描述](../Images/f28131d48ccfcfc8d073e09ef5ed915b.png)

# jquery - MVC jQuery DatePicker 样式

> ID：11627746
> 
> 赞同：-1
> 
> 时间：2012-07-24T09:18:00.120
> 
> 标签：jquery, asp.net-mvc, razor, jquery-ui-datepicker

我目前正在针对数据库实现 MVC 应用程序，其中创建表单允许我将新寄存器插入到数据库中。

我尝试使用 jQuery DatePicker 来显示 DateTime 字段并获取信息。

我的问题是，在实现它之后，css 样式在 IE9 上完美运行，但在 Chrome 中却不行。

在 Chrome 中......如果单击该字段并按住按钮，日期选择器将出现并应用 css 主题。一旦我释放鼠标按钮，css 样式就会消失。然后，我选择一个日期（在非样式日历上）并且日历返回到 css 应用并且不记得我的选择。然后我需要在 css 样式的日历上重新选择日期。

**\Views\Shared_Layout.cshtml** ....

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>@ViewBag.Title</title>
    <link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
    <script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript">        </script>
    <script src="@Url.Content("~/Scripts/modernizr-1.7.min.js")" type="text/javascript"></script>
     <link href="@Url.Content("~/Content/themes/base/jquery.ui.core.css")" rel="stylesheet" type="text/css" /> 
    <link href="@Url.Content("~/Content/themes/base/jquery.ui.datepicker.css")" rel="stylesheet"  type="text/css" /> 
    <link href="@Url.Content("~/Content/themes/base/jquery.ui.theme.css")" rel="stylesheet" type="text/css" /> 
    <script src="@Url.Content("~/Scripts/jquery.ui.core.min.js")" type="text/javascript"></script> 
   <script src="@Url.Content("~/Scripts/jquery.ui.datepicker.min.js")" type="text/javascript"></script> 
   <script src="@Url.Content("~/Scripts/DatePickerReady.js")" type="text/javascript"></script>
</head>

<body>
   @RenderBody() 
```

**\Views\Shared\EditorTemplates\DateTime.cshtml** ...

```
@model Nullable<DateTime> 

 @{ 
     DateTime dt = DateTime.Now; 
    if (Model != null) 
    { 
      dt  = (System.DateTime) Model; 

    } 
    @Html.TextBox("", String.Format("{0:d}", dt.ToShortDateString()), 
     new { @class = "datefield", type = "date"  }) 
} 
```

**\Views\Agent\Create.cshtml** ...

```
@model Agente.Receipts

@{
    ViewBag.Title = "Create";
}

<h2>Create</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm()) {
@Html.ValidationSummary(true)
<fieldset>
    <legend>Receipts</legend>

  <!--  <div class="editor-label">
        @Html.LabelFor(model => model.ReceiptId)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.ReceiptId)
        @Html.ValidationMessageFor(model => model.ReceiptId)
    </div> -->

    <div class="editor-label">
        @Html.LabelFor(model => model.QuantityReceived)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.QuantityReceived)
        @Html.ValidationMessageFor(model => model.QuantityReceived)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.ReceivedWareHouseDate)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.ReceivedWareHouseDate)
        @Html.ValidationMessageFor(model => model.ReceivedWareHouseDate)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.PONumber)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.PONumber)
        @Html.ValidationMessageFor(model => model.PONumber)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Weight)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Weight)
        @Html.ValidationMessageFor(model => model.Weight)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.CommentsReceived)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.CommentsReceived)
        @Html.ValidationMessageFor(model => model.CommentsReceived)
    </div>

      <p>
        <input type="submit" value="Create" />
    </p>
</fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:37:07.853

我在使用 jquery-ui datepicker 时遇到了非常相似的问题，经过一些实验后，它对我来说完全适用于所有浏览器。

我想这会对你有所帮助。首先，您不需要添加[jquery-ui](http://www.jqueryui.com)包中的每个 .js 文件。您只需要从您的 ui 包 (themes/base/jquery-ui.css) 的这个位置添加 jqery-ui.css，并从这个位置 (ui/jquery-ui.js) 添加一个 .js 文件。它适用于每个 jquery ui 函数。是否包含 demoes.css 对 datepicker 影响不大

这些是文件的未压缩版本，如果需要，您也可以参考缩小版本。我希望这个对你有用。如果不是，则检查天气，其他一些 -webkit- 类型的样式是否冲突

请提及这是否对您有用。

# iphone - UIAlertView 在 iPhone 中被调用两次

> ID：11627747
> 
> 赞同：1
> 
> 时间：2012-07-24T09:18:03.330
> 
> 标签：iphone, ios, ipad, uigesturerecognizer, uialertview

> **可能重复：**
> [UITableViewCell 上的 UILongPressGestureRecognizer - 双重调用](https://stackoverflow.com/questions/7688329/uilongpressgesturerecognizer-on-uitableviewcell-double-call)

我是 iPhone 新手，

我在长按按钮时显示警报，但是当我长按按钮时，我的警报视图被再次调用。

这是我的代码片段，

```
- (IBAction)longPressDetected:(UIGestureRecognizer *)gestureRecognizer {

    //Gets text of Button.
    UIButton *btn = (UIButton *)[gestureRecognizer view];
    BtnText= [btn titleForState:UIControlStateNormal];
    NSLog(@"longPressDetected");

    UIAlertView* alert_view = [[UIAlertView alloc]
                               initWithTitle: @"Are you sure want to Delete ?" message:nil delegate: self 
                               cancelButtonTitle: @"Yes" otherButtonTitles: @"No", nil];
    [alert_view show];
    [alert_view release];
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{ 
    if (buttonIndex==0) {

        [self ReloadView];
         [alertView dismissWithClickedButtonIndex:0 animated:TRUE];
    }
    else{
        [alertView dismissWithClickedButtonIndex:1 animated:TRUE];
    }
} 
```

**任何帮助将不胜感激。**

**编辑：**

```
 -(void)viewWillAppear:(BOOL)animated
   {
         for(int i=0;i<10i++)
            {

                if(i!=0)
                {
                    if (i%4==0) 
                    {                    
                        ypos+=180;
                        xpos=30;
                    }
                    else
                    {
                        xpos+=200;
                    }
                }

                button = [UIButton buttonWithType:UIButtonTypeCustom];
                button.frame = CGRectMake(xpos, ypos, 120,130);
                [button setBackgroundImage:[UIImage imageNamed:@"ibook2.png"] forState:UIControlStateNormal];
                [button setTitle:[NSString stringWithFormat:@"%@", [Downloadedepubs objectAtIndex:i]] forState:UIControlStateNormal];
                [button addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside];

                 LongPress = [[UILongPressGestureRecognizer alloc] init];
                [LongPress addTarget:self action:@selector(longPressDetected:)];
                 LongPress.delegate = (id<UIGestureRecognizerDelegate>)self;
                [button addGestureRecognizer:LongPress];
                [self.view addSubview:button];
                [LongPress release];

      } 

   } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T10:01:28.617

`UILongPressGestureRecognizer`是一个漫长的事件过程。请检查事件状态是否已开始、已完成等。

```
- (IBAction)longPressDetected:(UIGestureRecognizer *)gestureRecognizer {        

    if (gestureRecognizer.state == UIGestureRecognizerStateBegan){

        NSLog(@"Long press began");

    } else if ( gestureRecognizer.state == UIGestureRecognizerStateRecognized ) {

            NSLog(@"Long press UIGestureRecognizerStateRecognized");
    }
    else if (gestureRecognizer.state == UIGestureRecognizerStateEnded) {

        NSLog(@"Long press Ended");
    }
    else {

        NSLog(@"Long press detected.");
    }       
} 
```

我认为，最好在您的情况下使用**UIGestureRecognizerStateBegan**状态。

请修改您的`longPressDetected()`as

```
 -(IBAction)longPressDetected:(UIGestureRecognizer *)gestureRecognizer {

   if (gestureRecognizer.state == UIGestureRecognizerStateBegan){

       UIButton *btn = (UIButton *)[gestureRecognizer view];
       BtnText= [btn titleForState:UIControlStateNormal];
       NSLog(@"longPressDetected");

      UIAlertView* alert_view = [[UIAlertView alloc] initWithTitle: @"Are you sure want to Delete ?" message:nil delegate: self cancelButtonTitle: @"Yes" otherButtonTitles: @"No", nil];
      [alert_view show];
      [alert_view release];
      alert_view = nil;

   }
 } 
```

请检查以下所有**UIGestureRecognizerStates**

```
 UIGestureRecognizerStatePossible,   // the recognizer has not yet recognized its gesture, but may be evaluating touch events. this is the default state

    UIGestureRecognizerStateBegan,      // the recognizer has received touches recognized as the gesture. the action method will be called at the next turn of the run loop
    UIGestureRecognizerStateChanged,    // the recognizer has received touches recognized as a change to the gesture. the action method will be called at the next turn of the run loop
    UIGestureRecognizerStateEnded,      // the recognizer has received touches recognized as the end of the gesture. the action method will be called at the next turn of the run loop and the recognizer will be reset to UIGestureRecognizerStatePossible
    UIGestureRecognizerStateCancelled,  // the recognizer has received touches resulting in the cancellation of the gesture. the action method will be called at the next turn of the run loop. the recognizer will be reset to UIGestureRecognizerStatePossible

    UIGestureRecognizerStateFailed,     // the recognizer has received a touch sequence that can not be recognized as the gesture. the action method will not be called and the recognizer will be reset to UIGestureRecognizerStatePossible

    // Discrete Gestures – gesture recognizers that recognize a discrete event but do not report changes (for example, a tap) do not transition through the Began and Changed states and can not fail or be cancelled
    UIGestureRecognizerStateRecognized = UIGestureRecognizerStateEnded // the recognizer has received touches recognized as the gesture. the action method will be called at the next turn of the run loop and the recognizer will be reset to UIGestureRecognizerStatePossible 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:27:33.960

即使不需要输入 UILongPressGestureRecognizer 详细信息，您也可以做一些简单的事情来解决这个问题。定义一个`BOOL isShowingAlertView`. 当你调用时`[alertView show]`，你设置`isShowingAlertView = YES`，当你关闭它时，`isShowingAlertView = NO`。在调用之前，您只需检查：`if (isShowingAlertView == NO)`然后才显示它：

```
-(void)viewDidLoad
{
    [super viewDidLoad];
    isShowingAlert = NO;
}

- (IBAction)longPressDetected:(UIGestureRecognizer *)gestureRecognizer {

    if (isShowingAlert == NO)
    {
        isShowingAlert = YES;
        //Gets text of Button.
        UIButton *btn = (UIButton *)[gestureRecognizer view];
        BtnText= [btn titleForState:UIControlStateNormal];
        NSLog(@"longPressDetected");

        UIAlertView* alert_view = [[UIAlertView alloc]
                               initWithTitle: @"Are you sure want to Delete ?" message:nil delegate: self 
                               cancelButtonTitle: @"Yes" otherButtonTitles: @"No", nil];
        [alert_view show];
        [alert_view release];
    }
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    isShowingAlert = NO;
    if (buttonIndex==0)
    {
        [self ReloadView];
    }
} 
```

# r - R求和数据透视表

> ID：11627754
> 
> 赞同：2
> 
> 时间：2012-07-24T09:18:28.393
> 
> 标签：r

对于如下数据框

```
id<-c(1,1,2,3,3,2)
p<-c(10,0,22,34,0,0)
df<-data.frame(id,p) 
```

我需要一个汇总表，例如

```
id   p
1    10
2    22
3    34 
```

这实际上是每个 id 的 p 的总和。我可以用“dcast”得到这个吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T09:26:08.560

有几种方法可以获得所需的结果，这里有一些： 您可以使用`split`and `sapply`：

```
df <- data.frame(id, p)
sapply(split(df, df$id), function(x) sum(x$p))
 1  2  3 
10 22 34 
```

或者更短的 with `tapply`：

```
 tapply(p, id, sum)
 1  2  3 
10 22 34 
```

或者您可以`ddply`从`plyr`包中使用：

```
library(plyr)
ddply(df, .(id), function(x) sum(x$p))
  id V1
1  1 10
2  2 22
3  3 34 
```

最后你也可以使用`by`：

```
 by(p, id, sum)
id: 1
[1] 10
------------------------------------------------------------ 
id: 2
[1] 22
------------------------------------------------------------ 
id: 3
[1] 34 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T09:23:30.650

为什么需要`dcast`？`aggregate`在基础 R 中尝试：

```
df <- data.frame(id = c(1,1,2,3,3,2),
                 p = c(10,0,22,34,0,0))
aggregate(df, by=list(id), sum)
#   Group.1 id  p
# 1       1  2 10
# 2       2  4 22
# 3       3  6 34 
```

你也可以`dcast`像下面这样欺骗。您的数据并非完全符合预期的“熔化”形式`dcast`：

```
library(reshape2)
dcast(df, id ~ ., value.var = "p", sum)
#   id NA
# 1  1 10
# 2  2 22
# 3  3 34 
```

# android - ViewPager 中的片段 ID 或标签？

> ID：11627756
> 
> 赞同：0
> 
> 时间：2012-07-24T09:18:39.687
> 
> 标签：android, android-fragments, android-viewpager, fragment-identifier

我目前在访问片段 ID 和片段标签时遇到问题。我目前正在 TabHost 和 ViewPager 中实现 Fragment，新选项卡的添加方式如下：

```
mTabsAdapter.addTab(bar.newTab().setText("Tab0"),
            Tab0.class, null); 
```

addTab 方法如下：

```
public void addTab(ActionBar.Tab tab, Class<?> clss, Bundle args) {
        TabInfo info = new TabInfo(clss, args);
        tab.setTag(info);
        tab.setTabListener(this);
        mTabs.add(info);
        mActionBar.addTab(tab);
        notifyDataSetChanged();
    } 
```

我目前在我的活动中打开了 2 个选项卡和 2 个片段：Tab0.class 和 Tab1.class。我想要 Fragment Tab1 的 Fragment Id 或 Tag，以便我可以使用回调方法将值传递给它。请你帮我解决这个问题好吗？

我没有运气就尝试了以下方法：

```
public String addTab(ActionBar.Tab tab, Class<?> clss, Bundle args) {
            TabInfo info = new TabInfo(clss, args);
            tab.setTag(info);
            tab.setTabListener(this);
            mTabs.add(info);
            mActionBar.addTab(tab);
            notifyDataSetChanged();
            return tab.getTag().toString();
        } 
```

然后后来我将返回字符串称为片段标记，但它始终为空。你能帮帮我吗？？？？？？我应该怎么做才能在后台访问 Tab1 片段。非常感谢您的帮助:( !!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-20T20:57:59.863

我今天遇到了类似的问题。我想给我的片段赋值，但我不能使用标签，因为我使用了 ViewPager 和适配器。所以我使用了来自我的适配器的方法 getItem() 返回片段，并在我的片段中创建了一个方法。

```
public class SchedulePagerAdapter extends FragmentPagerAdapter {
  private final ArrayList<String> mTabs;
  public SchedulePagerAdapter(FragmentManager fm, Context mContext) {
    super(fm);
    mTabs = new ArrayList<String>();
    mTabs.add(new String(mContext.getString(R.string.label_monday)));
    mTabs.add(new String(mContext.getString(R.string.label_tuesday)));
    mTabs.add(new String(mContext.getString(R.string.label_wednesday)));
    mTabs.add(new String(mContext.getString(R.string.label_thursday)));
    mTabs.add(new String(mContext.getString(R.string.label_friday)));
    mTabs.add(new String(mContext.getString(R.string.label_saturday)));
    mTabs.add(new String(mContext.getString(R.string.label_sunday)));
  }

  @Override
  public CharSequence getPageTitle(int position) {
    return mTabs.get(position);
  }

  @Override
  public int getCount() {
    return mTabs.size();
  }

  @Override
  public Fragment getItem(int position) {
    return ScheduleFragment.newInstance(position);
  }
} 
```

在活动中，我像这样过去了我的价值：

```
(FragmentNameClass)mSchedulePagerAdapter.getItem(0).setDate("00-00-00"); 
```

# android - 当用户提交登录详细信息时启动 ProgressDialog

> ID：11627758
> 
> 赞同：1
> 
> 时间：2012-07-24T09:18:47.063
> 
> 标签：android, progressdialog

我的 android 应用程序具有登录功能，它正在从我的在线服务器访问用户信息。它还可以通过电子邮件确认来检测注册用户是否已激活他/她的帐户。

但我的问题是，我的应用程序在从数据库中检索用户详细信息时几乎关闭了。我看过一些有关 ProgressDialog 的视频，但我不知道它是否可以正确插入我的程序中，请帮助我。

这是我的代码。

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.firstscreen);

    initialise();

    bGotoRegister.setOnClickListener(new View.OnClickListener()
    {    
        public void onClick(View view)
        {
            Intent i = new Intent(getApplicationContext(), Register.class);
            startActivity(i);
        }
    });        
}

private void initialise()
{
    // TODO Auto-generated method stub
    etEmail = (EditText) findViewById(R.id.loginEmail);
    etPassword = (EditText) findViewById(R.id.loginPassword);
    bLogin = (Button) findViewById(R.id.loginSubmit);
    tvEmailError = (TextView) findViewById (R.id.loginEmailError);
    tvPasswordError = (TextView) findViewById (R.id.loginPasswordError);
    bGotoRegister = (Button) findViewById (R.id.goToRegister);

    bLogin.setOnClickListener(this);
}

public void onClick(View v) 
{
    httpclient = new DefaultHttpClient();
    httppost = new HttpPost("http://mysite.com/login.php");
    stringEmail = etEmail.getText().toString();
    stringPassword = etPassword.getText().toString();

    try 
    {
        nameValuePairs = new ArrayList<NameValuePair>();
        nameValuePairs.add(new BasicNameValuePair("stringEmail", stringEmail));
        nameValuePairs.add(new BasicNameValuePair("stringPassword", stringPassword));

        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        response = httpclient.execute(httppost);
        if(response.getStatusLine().getStatusCode()== 200)
        {
            entity = response.getEntity();
            if(entity != null)
            {   
                InputStream instream = entity.getContent();
                JSONObject jsonResponse = new JSONObject(convertStreamToString(instream));

                String errorEmail = jsonResponse.getString("errorEmail");
                if (errorEmail != "")
                {
                    tvEmailError.setText(errorEmail);
                }else{}

                String errorPassword = jsonResponse.getString("errorPassword");
                if (errorPassword != "")
                {
                    tvPasswordError.setText(errorPassword);
                }else{}

                String inactiveAccount = jsonResponse.getString("inactiveAccount");
                if (inactiveAccount.length() != 0)
                {                       
                    AlertDialog alert = new AlertDialog.Builder(FirstScreen.this).create();
                    alert.setCancelable(false);
                    alert.setMessage("Your account is currently inactive and unusable." + "\nDo you want to send an account activation message to your email now?");
                    alert.setButton("Yes", new DialogInterface.OnClickListener()
                    {   
                        public void onClick(DialogInterface arg0, int arg1)
                        {
                            httpclient = new DefaultHttpClient();
                            httppost = new HttpPost("http://mysite.com/activate2.php");
                            stringEmail = etEmail.getText().toString();
                            stringPassword = etPassword.getText().toString();

                            try
                            {
                                nameValuePairs = new ArrayList<NameValuePair>();
                                nameValuePairs.add(new BasicNameValuePair("stringEmail", stringEmail));
                                nameValuePairs.add(new BasicNameValuePair("stringPassword", stringPassword));

                                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                                response = httpclient.execute(httppost);
                                if(response.getStatusLine().getStatusCode()== 200)
                                {
                                    entity = response.getEntity();
                                    if(entity != null)
                                    {
                                        InputStream instream = entity.getContent();
                                        JSONObject jsonResponse = new JSONObject(convertStreamToString(instream));

                                        String successActivation = jsonResponse.getString("successActivation");
                                        if (successActivation.length() != 0)
                                        {
                                            //Progress Dialog here.
                                            Toast.makeText(getBaseContext(), "We successfully sent an activation message to your email account. Try to log in again after activating your account.", Toast.LENGTH_LONG).show();
                                        }
                                        else
                                        {
                                            Toast.makeText(getBaseContext(), "Sorry, we are unable to reach your email account.",Toast.LENGTH_SHORT).show();
                                        }
                                    }
                                }   
                            }
                            catch (Exception e)
                            {
                                e.printStackTrace();
                                Toast.makeText(getBaseContext(), "Connection to the server is lost. Please check your internet connection.", Toast.LENGTH_SHORT).show();
                            }
                        }
                    });
                    alert.setButton2("Not now", new DialogInterface.OnClickListener()
                    {   
                        public void onClick(DialogInterface arg0, int arg1)
                        {
                            AlertDialog alert2 = new AlertDialog.Builder(FirstScreen.this).create();
                            alert2.setCancelable(false);
                            alert2.setMessage("Are you sure you want to exit?");
                            alert2.setButton("Yes", new DialogInterface.OnClickListener()
                            {   
                                public void onClick(DialogInterface arg0, int arg1)
                                {
                                    finish();
                                }
                            });
                            alert2.setButton2("No", new DialogInterface.OnClickListener()
                            {   
                                public void onClick(DialogInterface arg0, int arg1)
                                {
                                    //Do nothing
                                }
                            });
                            alert2.show();
                        }
                    });
                    alert.show();
                }else{}

                if ((errorEmail.length()==0) && (errorPassword.length()==0)&& (inactiveAccount.length()==0))
                {                       
                    String dbEmail = jsonResponse.getString("dbEmail");
                    String dbPassword = jsonResponse.getString("dbPassword");
                    //---Store dbEmail and dbPassword to SharedPreferences---//
                    //-------------------------------------------------------//
                    Intent i = new Intent(getApplicationContext(), Construction.class);
                    startActivity(i);
                    finish();
                }

            }//if (entity!=null)..      
        }//if response()...
    }//try..
    catch(Exception e)
    {
        e.printStackTrace();
        Toast.makeText(getBaseContext(), "Connection to the server is lost. Please check your internet connection.", Toast.LENGTH_SHORT).show();
    }   
}//END onClick() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:25:56.230

您正在主线程上建立 HTTP 连接，这在 Android 中是一种糟糕的编程方式。

Web 连接是一种阻塞调用，这意味着您的主线程将在 onClick 上被触发，直到从服务器收到成功或失败的响应。

由于主线程在网络连接中被阻塞，您的应用程序对其他事件（例如触摸/点击或任何类型的生命周期事件）没有响应，并且也无法更新 UI。这就是为什么您的应用程序会崩溃/进度对话框中不显示更新的原因。

我建议您将[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)用于任何与网络相关的任务，这样您的主线程就不会被阻塞。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:35:43.960

您正在事件线程中进行网络操作登录和检索详细信息，而不是在事件线程或 AsyncTask 中的另一个线程中执行此操作。

通过进度对话框，您可以显示正在进行一些处理。

我正在编写一个示例代码来说明如何在程序中使用进度对话框、线程和处理程序：

```
public void onClick(View v) 
{
    progressDialog=ProgressDialog.show(v.getContext(), "Login",  "Logging In...." );
    Thread thread= new Thread()
    {
        public void run()
        {
             httpclient = new DefaultHttpClient();
    httppost = new HttpPost("http://mysite.com/login.php");
    stringEmail = etEmail.getText().toString();
    stringPassword = etPassword.getText().toString();

    try 
    {
        nameValuePairs = new ArrayList<NameValuePair>();
        nameValuePairs.add(new BasicNameValuePair("stringEmail", stringEmail));
        nameValuePairs.add(new BasicNameValuePair("stringPassword", stringPassword));

        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        response = httpclient.execute(httppost);
        if(response.getStatusLine().getStatusCode()== 200)
        {
            entity = response.getEntity();
            if(entity != null)
            {   
                InputStream instream = entity.getContent();
                JSONObject jsonResponse = new JSONObject(convertStreamToString(instream));

                String errorEmail = jsonResponse.getString("errorEmail");
                if (errorEmail != "")
                {
                    tvEmailError.setText(errorEmail);
                }else{}

                String errorPassword = jsonResponse.getString("errorPassword");
                if (errorPassword != "")
                {
                    Message msg= errHandler.obtainMessage();
                    msg.obj=errorPassword;
                    errHandler.sendMessage(msg);
                }else{}

                //

            }//if (entity!=null)..      
        }//if response()...
    }//try..
    catch(Exception e)
    {
        e.printStackTrace();
        Toast.makeText(getBaseContext(), "Connection to the server is lost. Please check your internet connection.", Toast.LENGTH_SHORT).show();
    }   
        }
    }

Handler errHandler=new Handler()
{
    public void handleMessage(Message msg)
    {
          progressDialog.dismiss();
          String strErr=(String)msg.obj;
          tvEmailError.setText(strErr);
    }
}; 
```

# java - 如何为单个方法设置 show_sql Hibernate 参数？

> ID：11627759
> 
> 赞同：2
> 
> 时间：2012-07-24T09:18:48.540
> 
> 标签：java, hibernate

我想在 hibernate 方法的 java 代码中设置 show_sql hibernate 参数，以便它可以仅打印该特定方法的实际 SQL 查询。

我知道使用以下配置可以完成

```
<property name="show_sql">true</property> 
```

但它会打印所有休眠调用的所有 sql。我想要一些特定的方法，例如。

```
public List<Customer> getAllCustomerListByActive(boolean isActive) {
        List<Customer> customerList = new ArrayList<Customer>();
        Criteria criteria = getSession().createCriteria(Customer.class);
        criteria.add(Restrictions.eq("isActive", isActive));
        criteria.add(Restrictions.eq("delFlag", false));
        criteria.addOrder(Order.asc("id"));
        customerList = criteria.list();        
        **//Print SQL Method Syntax will come here**
        return customerList;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T10:08:39.977

您可以通过以下代码启用或禁用 SQL 日志记录。

```
Logger sqlLogger = Logger.getLogger("org.hibernate.SQL");
sqlLogger.setLevel(Level.DEBUG);

... do your stuff ...

sqlLogger.setLevel(Level.OFF); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T09:46:57.597

@Vash 在上面给出了链接，其中详细介绍了不同的方法。

但是对于这个问题的参考，我在我的代码中使用的如下

```
try {
            CriteriaImpl c = (CriteriaImpl) criteria;
            SessionImpl s = (SessionImpl) c.getSession();
            SessionFactoryImplementor factory = (SessionFactoryImplementor) s.getSessionFactory();
            String[] implementors = factory.getImplementors(c.getEntityOrClassName());
            CriteriaLoader loader = new CriteriaLoader((OuterJoinLoadable) factory.getEntityPersister(implementors[0]),
                    factory, c, implementors[0], s.getEnabledFilters());
            Field f = OuterJoinLoader.class.getDeclaredField("sql");
            f.setAccessible(true);
            String sql = (String) f.get(loader);
        } catch (Exception e) {
        } 
```

**用于生产环境非常危险。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T09:41:24.517

执行此操作的一种方法是将所有其他包/类的日志记录级别更改为更高级别，并将日志记录保持为仅针对此类/包的调试级别。

检查如何设置 log4j 属性。我相信一定有其他方法可以做到这一点..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T09:55:52.827

这不能通过 hibernate 属性或使用标准 hibernate/slf4j API 调用来完成。

您可以尝试编写自己的自定义 Logger 来过滤掉不必要的输出。

# c# - 使用在 Endpoint 上设置了标识的 WCF：正确的 UPN 不起作用

> ID：11627761
> 
> 赞同：2
> 
> 时间：2012-07-24T09:18:53.050
> 
> 标签：c#, wcf, windows-services

我编写了一个 Windows 服务托管的 WCF 服务。已部署或 localhost 工作正常，我的客户端应用程序可以使用它。

如果我更改 Windows 服务的登录设置并设置域用户（从默认的“本地系统”更改），我的客户端应用程序将无法再使用该服务。我得到的例外是

```
A call to SSPI failed 
```

没有内部异常或任何细节。为了解决这个问题，我尝试在我的客户端应用请求中设置 UPN 以获得有效的服务名称检查。这是在客户端通过代码在端点中设置身份完成的：

```
string uri = "myServiceUri";
EndpointIdentity identity = EndpointIdentity.CreateSpnIdentity("user@domain");
EndpointAddress epa = new EndpointAddress(uri, identity, new AddressHeader[] { }); 
```

出现了非常奇怪的行为。

*   如果我在客户端请求中设置了确切的 UPN，比如说“user@domain”，我会得到一个新异常（没有内部异常，没有详细信息）

    ```
    The following remote identity failed verification: 'user@domain' 
    ```

*   如果我在客户端请求中将任何其他字符串设置为 UPN，它可以正常工作，比如“ *XXXuser@domainXXX* ”、“ *toto* ”，甚至是*String.Empty*。

服务器端，我没有在配置文件中设置任何身份节点来保持默认行为，即 UPN 检查（没有 SPN 或 DNS）。

换句话说，服务/用户名检查似乎只有在我的客户端应用程序中的设置*错误*时才有效。

亲爱的社区，您在此主题上的帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T17:19:23.850

解决方案是......使用`CreateUpnIdentity`而不是`CreateSpnIdentity`让 WCF 正确处理 UPN。

原因是服务器配置文件中没有任何 Identity 节点，*并且*使用域帐户作为服务用户，服务公开的默认身份是 UPN“account@domain”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T12:50:41.390

我似乎记得使用不存在的 UPN 将强制身份验证从 Kerberos 回退到 NTLM。要让 Kerberos 使用域帐户，我认为您需要为目标帐户配置 SPN：http: [//msdn.microsoft.com/en-us/library/bb628618.aspx](http://msdn.microsoft.com/en-us/library/bb628618.aspx)

# c# - 设置多个 CheckBox

> ID：11627764
> 
> 赞同：0
> 
> 时间：2012-07-24T09:18:59.553
> 
> 标签：c#, checkbox

我需要简单的逻辑迭代，但很多项目......这是我的代码

```
 byte[] nc1 = new byte[40];
        nc1 = ChekSt(36, "192.168.2.55", 38, 40);

        //I need to iterate 40 times so my 40 checkbox can be updated

        switch (nc1[0])
        {
            case 1: checkBox1.Checked = false; break;
            case 2: checkBox1.Checked = true; checkBox1.CheckState = CheckState.Indeterminate; break;
            case 3: checkBox1.Checked = true; checkBox1.CheckState = CheckState.Checked; break;
        } 
```

我有 checkBox1、checkBox2、checkBox3... 到 checkBox40

我需要类似的东西`checkBox(i).checked = true;`

所以不必编写我的代码 40 次

任何人有想法...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:20:09.770

将复选框放在数组或列表中，以便您可以以基于集合的方式操作它们。

例如

```
var list = new List<CheckBox>();
list.Add(checkBox1);
list.Add(checkBox2);
list.Add(checkBox3);

list[2].Checked = true; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T09:24:47.957

尝试使用此代码

```
foreach (CheckBox checkbox in yourPanelContainer.Controls.OfType<CheckBox>())
{
   checkbox.Checked = true;
} 
```

# android - lastUpdateTime 的确切值是多少？

> ID：11627765
> 
> 赞同：5
> 
> 时间：2012-07-24T09:19:04.303
> 
> 标签：android, installation, updates

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T09:31:16.287

> > lastUpdateTime：应用最后一次更新的时间……</p>

*这意味着安装在设备上的软件包更新的时间..*

每次安装或更新 apk 时，都会通过读取设备当前系统时间来更新 PackageInfo.lastUpdateTime。

# c - AIR Native Extension 调用花费异常长的时间

> ID：11627766
> 
> 赞同：1
> 
> 时间：2012-07-24T09:19:08.203
> 
> 标签：c, windows, actionscript-3, air, kinect

我有一个用于 Windows 的 C 实现的 AIR 本机扩展，以提供对 Kinect for Windows SDK 的访问。我知道 AIRKinect，但某些因素需要定制解决方案。

最近，出现了一个问题，导致整个应用程序在使用运行/调试按钮从 Flash Builder 4.6 中启动时速度降低了约 100 倍。

## 尝试的解决方案

最初，重新启动将允许我在问题再次发生之前运行/调试应用程序一次。不久之后，即使是这种方法也开始失效。

将系统恢复到一个月前的状态时，问题似乎永久解决了。在此时间范围内发生的唯一系统更改是 Windows 更新。今天安装新的 Windows 更新显然使这个问题重新出现。

确认问题的原因*不*在于我的源代码 - 我回滚到过去的几个修订版，但问题仍然存在。

奇怪的是，将应用程序导出为发布版本、安装它并像这样运行它时没有出现任何问题。但是，此工作流程不适合日常开发，因为构建需要一整分钟，并且无法进行适当的调试（至少我知道无法将调试器附加到正在运行的已安装 AIR 应用程序。 )

## 地点

通过分析代码，我设法追踪到对`context.call`. 奇怪的是，在测量功能块开始和结束之间经过的时间时，实现本机部分的功能和往常一样快。

这只能意味着问题介于两者之间。由于互联网上缺乏关于此类案件的信息，我已经用尽了自己和同事的知识。我非常感谢任何可能有助于找到此问题的原因和解决方案的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T14:17:19.757

运行调试器时性能变慢并不奇怪。这对于大多数（如果不是全部）开发来说都是典型的，包括 ADL。

虽然这不会缩短编译时间，但您可以创建一个简单的调试类，将跟踪语句输出到文本字段。

# artificial-intelligence - 在反向传播中使用 sigmoid 函数计算误差

> ID：11627773
> 
> 赞同：5
> 
> 时间：2012-07-24T09:19:26.357
> 
> 标签：artificial-intelligence, neural-network, backpropagation

我有一个关于反向传播的快速问题。我正在查看以下内容：

[http://www4.rgu.ac.uk/files/chapter3%20-%20bp.pdf](http://www4.rgu.ac.uk/files/chapter3%20-%20bp.pdf)

在这篇论文中，它说要计算神经元的误差为

> 误差 =**输出(i) * (1 - 输出(i)) *** (目标(i) - 输出(i))

我将等式中我不理解的部分用粗体表示。在论文中，它说由于 sigmoid 函数需要**Output(i) * (1 - Output(i))**项 - 但我仍然不明白为什么这会是必要的。

使用会有什么问题

```
Error = abs(Output(i) - Target(i)) 
```

?

误差函数是否与神经元激活/传递函数无关？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-24T10:17:17.387

您需要这个的原因是您正在计算**误差函数**相对于神经元输入的导数。

当你通过链式法则求导时，你需要乘以神经元激活函数的导数（恰好是一个 sigmoid）

这是重要的数学。

通过链式法则计算神经元输入的误差导数：

```
E = -(target - output)^2

dE/dinput = dE/doutput * doutput/dinput 
```

计算 doutput/dinput：

```
output = sigmoid (input)

doutput/dinput = output * (1 - output)    (derivative of sigmoid function) 
```

所以：

```
dE/dinput = 2 * (target - output) * output * (1 - output) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:49:40.460

sigmoid 函数的选择绝不是任意的。基本上，您正在尝试估计给定一些样本的类标签的条件概率。如果你取绝对值，你在做不同的事情，你会得到不同的结果。

有关该主题的实用介绍，我建议您查看 Andrew Ng 教授的在线机器学习课程

[https://www.coursera.org/course/ml](https://www.coursera.org/course/ml)

以及克里斯托弗·毕晓普教授的书，用于对该主题进行深入研究

[http://www.amazon.com/Neural-Networks-Pattern-Recognition-Christopher/dp/0198538642/ref=sr_1_1?ie=UTF8&qid=1343123246&sr=8-1&keywords=christopher+bishop+neural+networks](https://rads.stackoverflow.com/amzn/click/com/0198538642)

# asp.net - 从aspx页面处理用户控件中的selectedchange事件？

> ID：11627774
> 
> 赞同：2
> 
> 时间：2012-07-24T09:19:26.763
> 
> 标签：asp.net, user-controls

我在 Main.aspx 页面上有一个 filterControl，这个 filterControl 有另一个名为 filterList 的控件。

我想处理来自 main.aspx 的 filterlist 控件中的列表框。

怎么办？

![在此处输入图像描述](../Images/14bdecf4f4095d5225d903b950a9e5c6.png)

需要你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:33:21.083

试试这个：

## 后面的用户控制代码

```
public event Action<string> MyHandler = delegate { };

protected void myListBox_SelectedIndexChanged(object sender, Eventargs e)
{
   // ....
   this.MyHandler(this.myListBox.SelectedValue);
} 
```

## ASPX

```
<uc1:YourControl OnMyHandler="myPageHandler" .... 
```

## ASPX 代码背后

```
protected void myPageHandler(string customMessage)
{
   // your awesome stuff goes here
} 
```

# ios - 我如何在视图之间转换，每个视图都有自己的视图控制器？

> ID：11627781
> 
> 赞同：0
> 
> 时间：2012-07-24T09:19:45.627
> 
> 标签：ios, view

我在 X-Code 上创建了一个单视图应用程序并创建了另一个视图控制器并尝试推送第二个视图控制器。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath     *)indexPath
{   
if (self.statesView == nil)
{
    StatesView *newStateView = [[StatesView alloc]initWithNibName:@"StatesView" bundle:[NSBundle mainBundle]];
    self.statesView = newStateView;
}

[self.navigationController pushViewController:self.statesView animated:YES];
} 
```

但是应用程序因 SIGABRT 信号而崩溃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:26:47.663

StatesView 是 ViewController 吗？ `pushViewController:`需要一个`UIViewController`，而不是一个`UIView`。

我认为您在点击 UITableView 中的一行时试图更改 ViewController。实现这一点的最简单和最好的方法是使用 segues。在你的故事板中，ctrl 拖动你的`UITableViewCell`并将它与你的新视图控制器链接。

如果您想以编程方式执行此操作，则需要使用：

```
[self.storyboard instantiateViewControllerWithIdentifier:@"StatesViewController"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:23:47.247

所以，你的`StatesView`实例（即`newStateView`）是一个 UIView 子类，所以它是一个视图，而不是一个控制器。您只能`pushViewController`在向其发送`UIViewController`子类时使用。您可以`newStateView`使用以下命令将您的添加到当前视图：

```
[self.view addSubview:self.statesView]; 
```

但这没有任何过渡。您可以使用动画视图属性`[UIView animateWithDuration:animations:]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T09:24:47.043

您可以像这样为视图之间的过渡设置动画

```
`CATransition *transition = [CATransition animation];
transition.duration = 1.0;
transition.type = kCATransitionPush; //choose your animation
[viewController.view.layer addAnimation:transition forKey:nil];
[self.viewController1.view addSubview:viewController2.view];` 
```

`不要忘记导入 QuartzCore 库！`

# c# - 如何在 C# 中将标量查询分配给报表查看器

> ID：11627792
> 
> 赞同：3
> 
> 时间：2012-07-24T09:20:51.937
> 
> 标签：c#, sql

我的问题是我需要 2 个相同的行来求和，我在数据集中使用标量查询 SUM，如果您有任何其他建议，请回复。

在这种情况下，当我分配时：

```
this.saleTableAdapter.ScalarQuery(this.SaleDateset.sale); 
```

表明：

```
No overload method "Scalar Query" takes 1 argument. 
```

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:34:39.273

'ScalarQuery' 是您自己的函数。它可能还需要一个参数。

**没有重载方法“标量查询”需要 1 个参数。**这是为“ScalarQuery”函数询问超过 1 个参数的编译时错误。

# eclipse-rcp - 带有关闭控件的选项卡项

> ID：11627793
> 
> 赞同：1
> 
> 时间：2012-07-24T09:20:54.217
> 
> 标签：eclipse-rcp

在我的 eclipse 插件中，在运行时我根据用户交互为 Tabfolder 创建多个 TabItems。当创建太多 TabItems 时，就会出现问题。我正在寻找一个选项来创建一个带有关闭控件的 TabItem，以便用户可以在不需要时关闭相应的 TabItem。有没有办法创建这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T11:50:44.870

如果您使用 CTabFolder 而不是 TabFolder，那么您可以将 CTabItem 用于选项卡并将 SWT.CLOSE 样式传递给构造函数。这将在选项卡上创建一个关闭按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-31T11:49:00.003

> 按下`SHIFT + TAB` 可在打开一个编辑器时在编辑器之间切换。

您第二次按下`SHIFT + TAB` 键打开另一个编辑器，但使用 RCP Eclipse 关闭前一个编辑器。

```
public class Emp_editor_open extends AbstractHandler{

    @Override
    public Object execute(ExecutionEvent event) throws ExecutionException {

        IWorkbenchWindow window = HandlerUtil.getActiveWorkbenchWindow(event);
        IWorkbenchPage page = window.getActivePage();

        //Three object create in EditorInput 
        ProductEditorInput product_input=new ProductEditorInput();
        EmployeeEditorInput emp_input=new EmployeeEditorInput();
        UserEditorInput std_input = new UserEditorInput();

        IEditorReference[] editors = page.getEditorReferences();
        System.out.println("Length : "+editors.length);

        if(editors.length==0){
            //First Time or empty editors to check this condition
            try {
                page.openEditor(product_input,ProductEditor.ID);
                System.out.println("product Editor open");
            } catch (PartInitException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

        else if(page.getActiveEditor().getTitle().equals("Product_Editor")){
            System.out.println("Product:: "+page.getActiveEditor().getTitle());
            try {
                page.closeAllEditors(true);
                page.openEditor(emp_input, EmployeeEditor.Id);
                System.out.println("Employee Editor open");
            } catch (PartInitException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
        else if(page.getActiveEditor().getTitle().equals("Employee_Editor")){
            System.out.println("Emp:: "+page.getActiveEditor().getTitle());
            try {
                page.closeAllEditors(true);
                page.openEditor(std_input, UserEditor.ID);
                System.out.println("student Editor open");
            } catch (PartInitException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
        else if(page.getActiveEditor().getTitle().equals("Student_Editor")){
            System.out.println("Product:: "+page.getActiveEditor().getTitle());
            try {
                page.closeAllEditors(true);
                page.openEditor(product_input,ProductEditor.ID);
                System.out.println("product Editor open");
            } catch (PartInitException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
        else {
            try {
                page.closeAllEditors(true);
                page.openEditor(product_input,ProductEditor.ID);
                System.out.println("product Editor open");
            } catch (PartInitException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
        return null;
    }
} 
```

插件.xml

* * *

```
 <extension point="org.eclipse.ui.commands">
        <command
                defaultHandler="rcp_demo.Toolbar.Emp_editor_open"
                id="RCP_Demo.Toolbar.emp_editor_open_cmd"
                name="Employee_Editor_open">
        </command>
    </extension>
    <extension point="org.eclipse.ui.bindings">
        <key
                commandId="RCP_Demo.Toolbar.emp_editor_open_cmd"
                schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
                sequence="M2+TAB">
        </key>              
    </extension> 
```

键序：M2 表示`Shift`

# api - 我们可以在同一个站点中使用 Google Places API 和 4sq 场地 API 吗？

> ID：11627797
> 
> 赞同：0
> 
> 时间：2012-07-24T09:21:04.263
> 
> 标签：api, foursquare

似乎找不到明确的答案。我应该注意两者之间的哪些限制？我目前只使用foursquare，但有时我可能想使用google 的地方不在foursquare 中。

**更新**

我仅将 4sq API 用于地点名称和 lat/lng。我不想在同一个地方使用 4sq 场地数据和 Google Places 数据的组合......只是希望能够检查这两种服务以提取名称/位置数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:47:16.893

[https://developer.foursquare.com/overview/community](https://developer.foursquare.com/overview/community)明确表示

“场地数据库使用......不要在foursquare和Google Places上执行搜索，然后返回它们的结果/数据的组合。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-25T23:08:23.293

在“场地数据库使用”中，Foursquare 政策似乎接受与其他人一起使用他们的 API，只要解决了归属规则：

“你可以并排显示来自这些来源的信息，只要来自 Foursquare 的数据是原始形式并且明确归属于我们。根据经验，用户应该能够指向任何数据片段并且可以清楚地说“哦，这是来自 Foursquare”或“哦，这是来自 Google”。</p>

但是，明智的做法是检查 Google 对此的看法。

# xml - 无法使用 XSLT2.0 获取所需的 XML 元素？

> ID：11627805
> 
> 赞同：0
> 
> 时间：2012-07-24T09:21:31.207
> 
> 标签：xml, xpath, xslt-1.0, xslt-2.0, xpath-2.0

这是我的 XML 文档。我想将此 XML 文档转换为另一个 XML 文档（请参阅所需的输出 XML 部分）。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
    <w:document xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main"
                xmlns:v="urn:schemas-microsoft-com:vml">
    <w:body>
        <w:p>
            <w:pPr>
            </w:pPr>
            <w:r>
                <w:t>Text1-</w:t>
            </w:r>  
        </w:p>

        <w:p>
            <w:pPr>
                <w:pStyle w:val="Heading2" /> 
            </w:pPr>
            <w:r>
                <w:t>Text2-</w:t>
            </w:r>  
        </w:p>

        <w:p>
            <w:pPr>
            </w:pPr>
            <w:r>
                <w:t>Text3-</w:t>
            </w:r>  
        </w:p>

        <w:p>
            <w:pPr>
            </w:pPr>
            <w:r>
                <w:t>Text4-</w:t>
            </w:r>  
        </w:p>

         <w:p>
            <w:pPr>
                <w:pStyle w:val="Heading3" /> 
            </w:pPr>
            <w:r>
                <w:t>Text2.1-</w:t>
            </w:r>  
        </w:p>

        <w:p>
            <w:pPr>
                <w:pStyle w:val="Heading2" /> 
            </w:pPr>
            <w:r>
                <w:t>Text5-</w:t>
            </w:r>  
        </w:p>

        <w:p>
            <w:pPr>
            </w:pPr>
            <w:r>
                <w:t>Text6-</w:t>
            </w:r>  
        </w:p>

        <w:p>
            <w:pPr>
                <w:pStyle w:val="Heading3" /> 
            </w:pPr>
            <w:r>
                <w:t>Text7-</w:t>
            </w:r>  
        </w:p>

        <w:p>
            <w:pPr>
            </w:pPr>
            <w:r>
                <w:t>Text8-</w:t>
            </w:r>  
        </w:p>  

        <w:p>
            <w:pPr>
                <w:pStyle w:val="Heading1" /> 
            </w:pPr>
            <w:r>
                <w:t>Text9-</w:t>
            </w:r>  
        </w:p>

        <w:p>
            <w:pPr>
            </w:pPr>
            <w:r>
                <w:t>Text10-</w:t>
            </w:r>  
        </w:p>

<w:p>
            <w:pPr>
                <w:pStyle w:val="Heading2" /> 
            </w:pPr>
            <w:r>
                <w:t>Text11-</w:t>
            </w:r>  
        </w:p>

        <w:p>
            <w:pPr>
            </w:pPr>
            <w:r>
                <w:t>Text12-</w:t>
            </w:r>  
        </w:p>

        <w:p>
            <w:r>
                <w:pict>
                    <v:shape>
                        <v:textbox>
                            <w:txbxcontent>
                                <w:p>
                                    <w:pPr>
                                        <w:pStyle w:val="Heading1" /> 
                                    </w:pPr>
                                    <w:r>
                                        <w:t>   
                                            Drawing Description_1
                                        </w:t>
                                    </w:r>
                                </w:p>          
                                <w:p>
                                    <w:pPr>
                                        <w:pStyle w:val="Heading1" /> 
                                    </w:pPr>
                                    <w:r>
                                        <w:t>   
                                            Drawing Description_2
                                        </w:t>
                                    </w:r>
                                </w:p>
                            </w:txbxcontent>
                        </v:textbox>
                    </v:shape>
                </w:pict>
            </w:r>
        </w:p>

    </w:body>
    </w:document> 
```

所需的**输出 XML**是：

```
 <?xml version="1.0" encoding="utf-8"?><Document xmlns:v="urn:schemas-microsoft-com:vml" xmlns:pic="http://schemas.openxmlformats.org/drawingml/2006/picture">
    <Paragraph>Text1-</Paragraph>
    <Heading2>
       <Title>Text2-</Title>
       <Paragraph>Text3-</Paragraph>
       <Paragraph>Text4-</Paragraph>
       <Heading3>
          <Title>Text2.1-</Title>
       </Heading3>
    </Heading2>
    <Heading2>
       <Title>Text5-</Title>
       <Paragraph>Text6-</Paragraph>
       <Heading3>
         <Title>Text7-</Title>
         <Paragraph>Text8-</Paragraph>
       </Heading3>
   </Heading2>
   <Heading1>
      <Title>Text9-</Title>
      <Paragraph>Text10-</Paragraph>
      <Heading2>
       <Title>Text11-</Title>
         <Paragraph>Text12-</Paragraph>
         <txtContentGroup>
              <Paragraph>Drawing Description_1</Paragraph>
              <Paragraph>Drawing Description_2</Paragraph>
         </txtContentGroup>
       </Heading2>
    </Heading1>
 </Document> 
```

这是我的 XSLT 2.0 实现：

```
<xsl:stylesheet 
  version="2.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xpath-default-namespace="http://schemas.openxmlformats.org/wordprocessingml/2006/main"
  xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  xmlns:fn="http://www.w3.org/2005/xpath-functions"
  xmlns:mf="http://example.com/mf"
  xmlns:v="urn:schemas-microsoft-com:vml"
  xmlns:pic="http://schemas.openxmlformats.org/drawingml/2006/picture"
  xmlns:user="http://http://stackoverflow.com/questions/11356668"
  exclude-result-prefixes="xs w fn mf user">

  <xsl:output indent="yes"/> 

  <xsl:function name="mf:group" as="element()*">
      <xsl:param name="paragraphs" as="element()*"/>
      <xsl:param name="level" as="xs:integer"/>

      <xsl:for-each-group select="$paragraphs" group-starting-with="p[pPr/pStyle/@w:val = concat('Heading', $level)]">   

        <xsl:choose>
            <xsl:when test="self::p[pPr/pStyle/@w:val = concat('Heading', $level)]">
                <xsl:element name="Heading{$level}">
                <Title>
                  <xsl:apply-templates select="./r/t"/>
                </Title>                

                <xsl:sequence select="mf:group(current-group() except ., $level + 1)"/>
          </xsl:element>
        </xsl:when>

        <xsl:when test="current-group()[self::p[pPr/pStyle/@w:val = concat('Heading', $level + 1)]]">
          <xsl:sequence select="mf:group(current-group(), $level + 1)">
          </xsl:sequence>
        </xsl:when>
        <xsl:otherwise>
          <xsl:apply-templates select="current-group()">
           </xsl:apply-templates>
        </xsl:otherwise>
      </xsl:choose>
    </xsl:for-each-group>
  </xsl:function>

  <xsl:template match="document">

    <Document>
       <xsl:sequence select="mf:group(body/p, 1)"/>
    </Document>

  </xsl:template>

  <xsl:template match="p">

      <xsl:choose>
           <xsl:when test="(./r/t)">
               <xsl:choose>
                 <xsl:when test="descendant::w:p[w:r/w:t] | descendant::w:p[//w:r/w:t[ancestor::w:pict]][2] ">         
                       <txtContentGroup>            

                                <Paragraph>              
                                    <xsl:apply-templates select="./r/t"/>            
                              </Paragraph>

                              <xsl:apply-templates select="descendant::w:p">
                              </xsl:apply-templates>  

                       </txtContentGroup>          
                </xsl:when>  

                <xsl:otherwise>         
                    <Paragraph>
                       <xsl:apply-templates select="./r/t"/>
                    </Paragraph>
        </xsl:otherwise>
      </xsl:choose>

      </xsl:when>
         <xsl:otherwise>
           <xsl:choose>
             <xsl:when test="descendant::w:p[not(ancestor::w:tbl)]">
               <xsl:apply-templates select="descendant::w:p">
               </xsl:apply-templates>
             </xsl:when>     
            </xsl:choose>
         </xsl:otherwise>
       </xsl:choose>
    </xsl:template>

  <xsl:template match="/r/t">
    <xsl:value-of select="."/>
  </xsl:template> 
</xsl:stylesheet> 
```

但它会生成以下输出：

```
 <?xml version="1.0" encoding="utf-8"?><Document xmlns:v="urn:schemas-microsoft-com:vml" xmlns:pic="http://schemas.openxmlformats.org/drawingml/2006/picture">
    <Paragraph>Text1-</Paragraph>
    <Heading2>
       <Title>Text2-</Title>
       <Paragraph>Text3-</Paragraph>
       <Paragraph>Text4-</Paragraph>
       <Heading3>
         <Title>Text2.1-</Title>
      </Heading3>
    </Heading2>
    <Heading2>
       <Title>Text5-</Title>
       <Paragraph>Text6-</Paragraph>
       <Heading3>
         <Title>Text7-</Title>
         <Paragraph>Text8-</Paragraph>
       </Heading3>
    </Heading2>
    <Heading1>
       <Title>Text9-</Title>
       <Paragraph>Text10-</Paragraph>
       <Heading2>
          <Title>Text11-</Title>
          <Paragraph>Text12-</Paragraph>
          <Paragraph>Drawing Description_1</Paragraph>
          <Paragraph>Drawing Description_2</Paragraph>
       </Heading2>
   </Heading1>
   </Document> 
```

我的情况是：

每当`<w:p>`元素中包含**多个** `descendant::w:p[w:r/w:t]`元素并且`descendant::w:p[w:r/w:t]`具有其祖先时，`<w:pict>`我想创建`<txtContentGroup>`元素并将所有元素放入`descendant::w:p[w:r/w:t]`其中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:10:35.630

使用这种输入，您应该使用模板规则，而不是深度嵌套的 xsl:choose 指令。你的英文陈述

每当`<w:p>`元素中包含多个元素`descendant::w:p[w:r/w:t]`并且它具有祖先时，`<w:pict>`我想创建`<txtContentGroup>`元素并将所有元素放入`descendant::w:p[w:r/w:t]`其中。

直接映射到模板规则：

```
<xsl:template match="w:pict//w:p[descendant::w:p[w:r/w:t][2]]">
  <textContentGroup>
    <xsl:apply-templates select="descendant::w:p[w:r/w:t]"/>
  </textContentGroup>
</xsl:template> 
```

# sql - HSQL 视图错误：表达式不在聚合或 GROUP BY 列中

> ID：11627814
> 
> 赞同：0
> 
> 时间：2012-07-24T09:22:13.443
> 
> 标签：sql, view, hsqldb

我在 hsql 中有一个 CREATE VIEW 查询，但是每当我运行它时，它都会抛出这个错误：

***表达式不在聚合或 GROUP BY 列中：AGV.ID***

我知道如果没有任何聚合表达式（AVG、SUM、MIN、MAX），GROUP BY 将无法工作，但我无法弄清楚如何修复我的查询..因为每条记录都需要按 manifestID 值分组。

基本上，我试图通过组合 3 组选择查询来创建一个视图。

我尝试使用 distinct 但没有运气，因为如果我有多个选定的列，它将不起作用。此查询在 MYSQL 中运行良好。

我的查询：

```
CREATE VIEW local_view_event_manifest(
        manifest_id,
        eventId, 
        eventType, 
        eventDate,
        manifestID, 
        businessStepStr, 
        manifestVersion,
        externalLocation, 
        remark, 
        epcCode, 
        locationCode
        )
        AS
        SELECT 
        agm.manifest_id AS manifest_id,
        agv.id AS eventId,
        'AGGREGATION_EVENT' AS eventType,
        agv.event_time AS eventDate,
        md.manifest_id AS manifestID,
        agv.business_step_code AS businessStepStr,
        md.manifest_version AS manifestVersion,
        md.external_location AS externalLocation,
        md.remark AS remark,
        epc.code as epcCode,
        bloc.location_code as locationCode
        FROM 
        "local".local_MANIFEST_DATA AS md,
        "local".local_AGGREGATION_EVENT AS agv,
        "local".local_AGGREGATION_EVENT_EPCS AS agv_epc,
        "local".local_EPC AS epc,
        "local".local_BUSINESS_LOCATION AS bloc,
        "local".local_AGGREGATION_EVENT_MANIFEST_DATA AS agm
        WHERE
        md.id=agm.manifest_id
        AND agv.deleted=0
        AND md.deleted=0
        AND agv.id=agm.aggregation_event_id
        AND agv.id=agv_epc.aggregation_event_id
        AND agv.business_location_id=bloc.id
        AND bloc.id=agv.business_location_id
        AND agv_epc.epc_id=epc.id
        GROUP BY agm.manifest_id

        UNION
        SELECT 
        om.manifest_id AS manifest_id,
        ov.id AS eventId,
        'OBJECT_EVENT' AS eventType,
        ov.event_time AS eventDate,
        md.manifest_id AS manifestID,
        ov.business_step_code AS businessStepStr,
        md.manifest_version AS manifestVersion,
        md.external_location AS externalLocation,
        md.remark AS remark,
        epc.code as epcCode,
        bloc.location_code as locationCode
        FROM 
        "local".local_MANIFEST_DATA AS md,
        "local".local_OBJECT_EVENT AS ov,
        "local".local_OBJECT_EVENT_EPCS AS ov_epc,
        "local".local_EPC AS epc,
        "local".local_BUSINESS_LOCATION AS bloc,
        "local".local_OBJECT_EVENT_MANIFEST_DATA AS om
        WHERE
        md.id=om.manifest_id
        AND ov.deleted=0
        AND md.deleted=0
        AND ov.id=ov_epc.object_event_id
        AND ov.id=om.object_event_id
        AND bloc.id=ov.business_location_id
        AND ov_epc.epc_id=epc.id
        GROUP BY om.manifest_id

        UNION
        SELECT 
        trm.manifest_id AS manifest_id,
        trv.id AS eventId,
        'TRANSACTION_EVENT' AS eventType,
        trv.event_time AS eventDate,
        md.manifest_id AS manifestID,
        trv.business_step_code AS businessStepStr,
        md.manifest_version AS manifestVersion,
        md.external_location AS externalLocation,
        md.remark AS remark,
        epc.code as epcCode,
        bloc.location_code as locationCode
        FROM 
        "local".local_MANIFEST_DATA AS md,
        "local".local_TRANSACTION_EVENT AS trv,
        "local".local_TRANSACTION_EVENT_EPCS AS trv_epc,
        "local".local_EPC AS epc,
        "local".local_BUSINESS_LOCATION AS bloc,
        "local".local_TRANSACTION_EVENT_MANIFEST_DATA AS trm
        WHERE
        md.id=trm.manifest_id
        AND trv.deleted=0
        AND md.deleted=0
        AND trv.id=trv_epc.transaction_event_id
        AND trv.id=trm.transaction_event_id
        AND bloc.id=trv.business_location_id
        AND trv_epc.epc_id=epc.id
        GROUP BY trm.manifest_id 
```

下面是使用 GROUP BY 和不使用 GROUP BY 的 mysql 中查询结果的快照：

[使用 GROUP BY 查询结果](http://i106.photobucket.com/albums/m256/mag_geo8/group_by.png)

[没有 GROUP BY 的查询结果](http://i106.photobucket.com/albums/m256/mag_geo8/without_group.png)

吨

* * *

@fredt ...感谢您的详细解释..参考您的建议，我已经尝试过了..但不知何故我收到了这个错误：

错误：找不到表：语句中的 TABL_B [SELECT TABL_B.* FROM (SELECT DISTINCT manifest_id FROM "local".local_AGGREGATION_EVENT_MANIFEST_DATA) TABL_A] 错误代码：-22

以下是我的查询：

```
SELECT TABL_B.* FROM (SELECT DISTINCT manifest_id FROM "local".local_AGGREGATION_EVENT_MANIFEST_DATA) TABL_A
LATERAL JOIN 
( SELECT 
    agm.manifest_id AS manifest_id,
    agv.id AS eventId,
    'AGGREGATION_EVENT' AS eventType,
    agv.event_time AS eventDate,
    md.manifest_id AS manifestID,
    agv.business_step_code AS businessStepStr,
    md.manifest_version AS manifestVersion,
    md.external_location AS externalLocation,
    md.remark AS remark,
    epc.code as epcCode,
    bloc.location_code as locationCode
    FROM 
    "local".local_MANIFEST_DATA AS md,
    "local".local_AGGREGATION_EVENT AS agv,
    "local".local_AGGREGATION_EVENT_EPCS AS agv_epc,
    "local".local_EPC AS epc,
    "local".local_BUSINESS_LOCATION AS bloc,
    "local".local_AGGREGATION_EVENT_MANIFEST_DATA AS agm
    WHERE
    md.id=agm.manifest_id
    AND agv.deleted=0
    AND md.deleted=0
    AND agv.id=agm.aggregation_event_id
    AND agv.id=agv_epc.aggregation_event_id
    AND agv.business_location_id=bloc.id
    AND bloc.id=agv.business_location_id
    AND agv_epc.epc_id=epc.id AND manifest_id = TABL_A.manifest_id  LIMIT 1 ) TABL_B 
```

* * *

谢谢@fredt ..我注意到逗号的事情并已经添加到我的查询中。我也尝试删除 JOIN 词。但仍然抛出同样的错误..

```
ERROR: Table not found in statement [SELECT TABL_B.* FROM (SELECT
DISTINCT MANIFEST_ID FROM "local".local_AGGREGATION_EVENT_MANIFEST_DATA)
AS TABL_A, LATERAL] Error Code: -22 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:24:25.193

使用 HSQLDB 2.2.x 或更高版本：

当您使用 GROUP BY 时，所有选定的列都必须在 GROUP BY 列表中，但任何作为聚合的列除外。在您的示例中，GROUP BY 列表应包含 11 列，而不是一列。

您可以使用 DISTINCT，如`SELECT DISTINCT COL1, COLB, COLC, ...`没有 group by。DISTINCT 是对 SELECT 列表中的所有列进行分组的快捷方式。

一般来说，GROUP BY 意味着查询应该只为 GROUP BY 列表中的每个列值组合返回一行。允许聚合，因为它们将可能多行的值组合成一个值。

现在，如果您将 GROUP BY 列表中的所有列都包括在内，并且结果有多行具有相同的 manifestID 值，这意味着您不能真正单独对 manifestID 进行分组。

更新：您使用 MySQL 的查询结果表明它在这方面不是很严格。manifestId=bhbhbhbh 有二十多行，其他列的值不一样。然而 MySQL 会随机返回其中一行。这不是 GROUP BY 根据其他数据库（包括 HSQLDB）支持的 SQL 标准的工作方式。请参阅 MySQL 专家的此博客：

[http://www.mysqlperformanceblog.com/2006/09/06/wrong-group-by-makes-your-queries-fragile/](http://www.mysqlperformanceblog.com/2006/09/06/wrong-group-by-makes-your-queries-fragile/)

如果你想要类似 MySQL 输出的东西，那么你需要这样的查询：

```
SELECT TABL_B.* FROM (SELECT DISTINCT manifestID FROM "local".local_AGGREGATION_EVENT_MANIFEST_DATA) TABL_A,
LATERAL 
( [YOUR SELECT STATEMENT WITHOUT GROUP BY] AND manifestID = TABL_A.manifestID  LIMIT 1 ) TABL_B 
```

首先尝试在 VIEW 中选择一个，然后再应用到其余部分。

您可以通过在 LIMIT 1 之前添加 ORDER BY COL_NAME 来选择返回哪一行。

# java - Maven连接问题

> ID：11627815
> 
> 赞同：1
> 
> 时间：2012-07-24T09:22:16.047
> 
> 标签：java, linux, maven, connection

当我尝试在我的项目文件夹中执行“mvn clean install”时，出现如下错误：

> org.apache.maven.wagon.providers.http.httpclient.impl.client.DefaultRequestDirector tryConnect 信息：连接到目标主机时捕获 I/O 异常 (java.net.NoRouteToHostException)：没有到主机的路由

我的 settings.xml 文件没问题。还有我的配置：

```
Apache Maven 3.0.4 (r1232337; 2012-01-17 10:44:56+0200)
Maven home: /usr/local/apache-maven-3.0.4
Java version: 1.6.0_33, vendor: Sun Microsystems Inc.
Java home: /usr/lib/jvm/jdk1.6.0_33/jre
Default locale: en_US, platform encoding: UTF-8
OS name: "linux", version: "2.6.24-24-server", arch: "i386", family: "unix" 
```

请帮助我们，无聊的很多:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:47:56.947

它可能与代理设置有关？检查您是否在 settings.xml 中提到了代理标记，或者您可能希望在执行 mvn clean install 时传递指定代理和端口号的环境参数。

像这样的东西

mvn clean install -Dhttp.proxyHost=proxy_name -Dhttp.proxyPort=port_number

# makefile - 如何在不安装的情况下使用正确的库路径重新链接 libtool 构建的可执行文件？

> ID：11627821
> 
> 赞同：1
> 
> 时间：2012-07-24T09:22:20.877
> 
> 标签：makefile, gnu-make, autotools, libtool, ldd

A 有一个使用 GNU 自动工具构建的项目。现在我有一个微小的变化，只想从整个集合中复制*一个库* `libmylib.so`和*一个程序（使用该库）。* `myprog.x`

我不想使用`make install`，因为我必须非常小心不要覆盖所有其他东西。

当我做

```
ldd .libs/myprog.x 
```

我看到使用的库 - 正如预期的那样 - 新构建的库，而不是`/usr/lib/`.

```
$ ldd .libs/myprog.x
libmylib.so.0 => /home/user/project/.libs/libmylib.so.0 (0x003bb000)
libnsl.so.1 => /lib/libnsl.so.1 (0x00f57000)
libc.so.6 => /lib/tls/libc.so.6 (0x00948000)
libz.so.1 => /usr/lib/libz.so.1 (0x0024e000)
/lib/ld-linux.so.2 => /lib/ld-linux.so.2 (0x00ee7000) 
```

我怎样才能告诉`make`或`libtool`重新**链接** `myprog.x`，以便我可以手动将其复制到`/usr/bin/`？当然是复制`libmylib.so`到之后`/usr/lib/`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T00:32:54.143

（我通过运行解决了这个问题`make -n install | less`。）

您可能想用 libtool 安装库和程序（如果它是使用 libtool 链接的），因此请尝试以下操作：

```
sudo ./libtool --mode=install /usr/bin/install -c libmylib.la /usr/lib
sudo ./libtool --mode=install /usr/bin/install -c myprog.x /usr/bin 
```

Libtool 可能还会要求您运行`./libtool --mode=finish`命令。我相信它的建议。在执行任何这些操作之前，我会使用该`--dry-run`选项运行命令，而无需`sudo`查看究竟会发生什么。

请注意，我运行的不是系统`libtool`，而是由`configure`脚本创建的系统。

# mysql - 选择包含特定列的所有表

> ID：11627822
> 
> 赞同：5
> 
> 时间：2012-07-24T09:22:22.287
> 
> 标签：mysql

我的数据库中有大约 300 个表。我想要包含 sname、dtcreatedat、dtmodifiedat、ixlastmodifiedby 和 fstatus 列的表名。目前我正在手动检查每个表。在 mysql 中可以使用哪个命令来执行此操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T09:25:22.070

您可以找到包含该列的所有表：

```
select distinct table_name
from information_schema.columns
where column_name in ('sname','dtcreatedat','dtmodifiedat','ixlastmodifiedby','fstatus')
and table_schema = 'your_db_name' 
```

# javascript - 甜甜圈饼图中数据标签的自定义 CSS 类

> ID：11627824
> 
> 赞同：2
> 
> 时间：2012-07-24T09:22:31.457
> 
> 标签：javascript, css, arrays, class, highcharts

我正在制作这个甜甜圈图

我想知道是否可以为每个数据标签分配不同的自定义 CSS 类，以便为每个数据标签设置样式并纠正定位问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T09:07:06.487

已解决（感谢 fcodebue）！如果有人能发现这很有用......这是完整的代码：http: [//jsfiddle.net/fcodebue/qkJtk/8/](http://jsfiddle.net/fcodebue/qkJtk/8/)

从 highcharts donut oie demo 开始 - 将数组中的自定义类分配给每个标签，修改格式化程序，如下所示：

```
//assign classes from array
                    return this.y > 1 ? '<div class="boheti2 '+classes2[this.point.x]+'">'+'<b>'+ this.point.name +'</b></div>'  : null; 
```

其中`boheti2`是用于外部标签的一般样式的类，`classes2`是类数组的名称

# asp.net - 如何让 EF 在我的 App_Data 文件夹 MVC 中创建数据库

> ID：11627825
> 
> 赞同：1
> 
> 时间：2012-07-24T09:22:31.447
> 
> 标签：asp.net, mysql, asp.net-mvc-3

当我制作 MVC 4 应用程序并将“代码优先”与实体框架一起使用时，它会“神奇地”根据我的模型创建数据库。但是，我希望将此数据库放入项目 App_Data 文件夹中，而不是我计算机上的某个随机位置。

我怎样才能做到这一点？我猜我需要在 Web.config 中添加一些东西，但这就是我能猜到的全部。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T11:41:57.707

我认为您需要使用 AttachDbFilename 和 |DataDirectory| 在您的连接字符串中，如下所示：

数据源=.\SQLEXPRESS;集成安全=SSPI;AttachDBFilename=|DataDirectory|dbName.mdf;用户实例=true;数据库=dbName

在此处查看完整示例

[实体框架代码优先和连接字符串](https://stackoverflow.com/questions/8249929/entity-framework-code-first-and-connection-strings)

# eclipse - 在 MyEclipse 7.5 上安装 Subclipse 1.6.x

> ID：11627826
> 
> 赞同：1
> 
> 时间：2012-07-24T09:22:38.320
> 
> 标签：eclipse, subclipse, myeclipse

我正在尝试在 MyEclipse 7.5 上安装 Subclipse 1.6.x，有人可以确认绝对没有办法做到这一点吗？

我尝试通过以下方式安装：

1.  [http://subclipse.tigris.org/update_1.6.x/](http://subclipse.tigris.org/update_1.6.x/)
2.  [从http://subclipse.tigris.org/servlets/ProjectDocumentList?folderID=2240](http://subclipse.tigris.org/servlets/ProjectDocumentList?folderID=2240)下载后的本地站点安装 和
3.  将步骤2中下载的“plugins”和“features”目录直接放到MyEclipse的“dropins”文件夹中

    *   [对于 1.，MyEclipse 说“在http://subclipse.tigris.org/update_1.6.x/](http://subclipse.tigris.org/update_1.6.x/)找不到存储库”
    *   对于 2.，MyEclipse 说“在[http://download.eclipse.org/eclipse/updates/3.4/](http://download.eclipse.org/eclipse/updates/3.4/)找不到存储库”和“在[http://download.eclipse.org/releases/ganymede/](http://download.eclipse.org/releases/ganymede/)找不到存储库”
    *   对于 3.，MyEclipse 启动时安装失败

当我通过任何浏览器访问这些 URL 时，我可以看到这些 URL 是有效的，并且没有被防火墙过滤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:13:29.933

也许您需要取消选中在此过程中联系所有站点的选项？此外，如果您的浏览器使用代理服务器，您仍然需要在 Eclipse 首选项中配置代理。这或许可以解释为什么 Eclipse 无法访问任何站点，而您的浏览器可以。

如果您的选项 2 和未选中联系所有站点的选项，您应该不需要任何网络访问权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T15:25:18.580

如果您可以选择升级 MyEclipse，这非常简单。

1）升级到MyEclipse 10.5
2）在配置中心的“软件”选项卡中查找Subclipse
3）按照提示安装Subclipse

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T19:41:48.107

对于选项 2，我假设您的意思是您已经尝试过存档更新站点。有了这个，您应该能够忽略错误（我认为这些错误与 subclipse 无关，但可能与已检测到的 eclipse 更新有关）。继续安装 subclipse，这应该会成功安装。

正如其他人所说，升级到 MyEclipse 10.5（10.6 即将发布）是最好的选择。您的许可证允许您在许可证有效时安装所有版本。

# windows-8 - 使用 WritableBitmapEx 从 xaml 控件创建位图图像

> ID：11627830
> 
> 赞同：4
> 
> 时间：2012-07-24T09:22:46.653
> 
> 标签：windows-8, windows-runtime

如何使用 WritableBitmapEx 从 xaml 控件创建位图图像。在我的 winRT 应用程序中，我需要创建我的窗口的快照以实现 Pin to Tile（固定辅助磁贴）。我发现 winRT 中缺少 WritableBitmap.render()。如何使用 WritableBitmapEx 实现此功能。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-22T22:14:54.827

不知何故，他们错过了实现 WriteableBitmap。[Render()](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.writeablebitmap.render%28v=vs.95%29.aspx)虽然我听说它可能会出现在 SDK 的更高版本中，但现在您的选择是使用 WriteableBitmap 并使用您的控件内容逐像素填充它，也许在[WriteableBitmapEx](http://writeablebitmapex.codeplex.com/)的帮助下或者使用 DirectX，也许在 SharpDX 的帮助下，它是 DirectX 的包装器，您可以在 C# 应用程序中使用。如果你想渲染任何文本，你确实需要使用 DirectX/Direct2D/DirectWrite。如果您的 UI 很简单，那么使用 DirectX 并不太难。有一个样本似乎是从[这里](https://github.com/christophwille/winrt-snippets/tree/master/RenderTextToBitmap)开始的好地方。

编辑*

然后还有一个我开始在[WinRT XAML 工具包中实现的](http://winrtxamltoolkit.codeplex.com)[WriteableBitmap.Render() 扩展方法](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/512f5e79e2b6#WinRTXamlToolkit.Composition/WriteableBitmapRenderExtensions.cs)，它对渲染可视化树有一些有限但可能有用的支持。如有必要，我计划扩展它以支持更多 UI 元素。它目前支持具有纯色或渐变背景的典型文本块和形状。

编辑 2*

Windows 8.1 添加了[`RenderTargetBitmap.RenderAsync()`](http://msdn.microsoft.com/en-us/library/windows/apps/dn298556.aspx)非常有用的 API，尽管它有一些限制，例如它要求渲染的 UI 是可视化树的一部分（尽管它可以在隐藏面板中），错过视频播放、DirectX 内容，我`WebView`也相信内容.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T08:48:45.263

自提出此问题以来，WritableBitmapEx 已更新，现在支持 WinRT - 所以它应该可以正常工作。

有大量的演示来展示这一点并回答了一些 SO 问题：[https ://gist.github.com/2834070](https://gist.github.com/2834070)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T18:07:52.083

我一直在使用 Windows.Storage.Streams 中的 RandomAccessStreamReference 类来创建位图。一个例子（这实际上是共享代码）：

```
 var reference = RandomAccessStreamReference.CreateFromUri(new Uri(item.ImagePath.AbsoluteUri));
            request.Data.SetBitmap(reference); 
```

还要记住，对于固定辅助磁贴，您可以传入磁贴上徽标的 URI，而无需创建实际的位图，只要徽标是应用程序包的一部分，如下所示：

```
 var uri = new Uri(item.TileImagePath.AbsoluteUri);

        var tile = new SecondaryTile(
                item.UniqueId,              // Tile ID
                item.ShortTitle,            // Tile short name
                item.Title,                 // Tile display name
                item.UniqueId,              // Activation argument
                TileOptions.ShowNameOnLogo, // Tile options
                uri                         // Tile logo URI
            );

        await tile.RequestCreateAsync(); 
```

最后，如果要在辅助磁贴上使用的图像是在线的，而不是应用程序包的一部分，则必须先将其复制到本地，然后才能使用它。这是一些执行此操作的代码：

```
 // This is the URI that you will then pass as the last parameter into 
        // the Secondary Tile constructor, like the code above:
        var logoUri = await GetLocalImageAsync(restaurant.ImagePath, restaurant.Key);

        // and here's the method that does the meat of the work:

    /// <summary>
    /// Copies an image from the internet (http protocol) locally to the AppData LocalFolder.
    /// This is used by some methods (like the SecondaryTile constructor) that do not support 
    /// referencing images over http but can reference them using the ms-appdata protocol.  
    /// </summary>
    /// <param name="internetUri">The path (URI) to the image on the internet</param>
    /// <param name="uniqueName">A unique name for the local file</param>
    /// <returns>Path to the image that has been copied locally</returns>
    private async Task<Uri> GetLocalImageAsync(string internetUri, string uniqueName)
    {
        if (string.IsNullOrEmpty(internetUri))
        {
            return null;
        }

        using (var response = await HttpWebRequest.CreateHttp(internetUri).GetResponseAsync())
        {
            using (var stream = response.GetResponseStream())
            {
                var desiredName = string.Format("{0}.jpg", uniqueName);
                var file = await ApplicationData.Current.LocalFolder.CreateFileAsync(desiredName, CreationCollisionOption.ReplaceExisting);

                using (var filestream = await file.OpenStreamForWriteAsync())
                {
                    await stream.CopyToAsync(filestream);
                    return new Uri(string.Format("ms-appdata:///local/{0}.jpg", uniqueName), UriKind.Absolute);
                }
            }
        }
    } 
```

# cocoa - 为什么我必须添加这些内存语句？

> ID：11627833
> 
> 赞同：0
> 
> 时间：2012-07-24T09:23:03.567
> 
> 标签：cocoa, memory-management

当我从 Aaron Hillegass 的 Cocoa Programming for Mac OSX 的第 8 章运行这个程序时遇到错误。该程序将 tableview 绑定到数组控制器。在数组控制器的 setEmployees 方法中，

```
-(void)setEmployees:(NSMutableArray *)a
{
    if(a==employees)
        return;
    [a retain];//must add
    [employees release]; //must add
    employees=a;
} 
```

书中没有包含两个保留和释放语句，每当我尝试添加新员工时，我的程序就会崩溃。谷歌搜索后，我发现这两个必须添加的语句以防止程序崩溃。我不明白这里的内存管理。我分配`a`给`employees`. `a`如果我不释放任何东西，为什么我必须保留？为什么我可以`employees`在最后一个赋值语句中使用它之前释放它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T09:33:26.567

这是使用手动引用计数 (MRC) 的二传手的标准模式。一步一步，这就是它的作用：

```
-(void)setEmployees:(NSMutableArray *)a 
{ 
    if(a==employees) 
        return;          // The incoming value is the same as the current value, no need to do anything. 
    [a retain];          // Retain the incoming value since we are taking ownership of it
    [employees release]; // Release the current value since we no longer want ownership of it
    employees=a;         // Set the pointer to the incoming value
} 
```

在自动引用计数 (ARC) 下，访问器可以简化为：

```
 -(void)setEmployees:(NSMutableArray *)a 
    { 
        if(a==employees) 
            return;          // The incoming value is the same as the current value, no need to do anything. 
        employees=a;         // Set the pointer to the incoming value
    } 
```

保留/释放已为您完成。您还没有说您遇到了什么样的崩溃，但您似乎在 MRC 项目中使用了 ARC 示例代码。

# python - 保持 cmd.exe 打开

> ID：11627846
> 
> 赞同：6
> 
> 时间：2012-07-24T09:23:55.767
> 
> 标签：python, registry, cmd

我有一个 python 脚本，我使用注册表项使其可删除，但它似乎不起作用。cmd.exe 窗口只是一闪而过，我可以以某种方式使窗口保持不变，还是保存输出？

编辑：问题在于它不仅给出了文件名，还给出了整个路径。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T09:32:37.567

如果你想要一个纯 Python 解决方案，你必须用 try/except 子句包装你的脚本：

```
import traceback
try:
    ... your script ...
except:
    traceback.print_exc()

raw_input("Press Enter to close") # Python 2
input("Press Enter to close") # Python 3 
```

这样，即使您的代码抛出异常，窗口也会保持打开状态。当 Python 无法解析脚本时，它仍然会关闭，即当您有语法错误时。如果您也想解决这个问题，我建议您使用一个好的 IDE，它可以让您以更愉快的方式进行开发（想到[PyCharm](https://www.jetbrains.com/pycharm/)和[PyDev ）。](http://pydev.org/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T09:24:52.247

在脚本末尾插入一行：

```
raw_input("Press Enter to close") # Python 2 
```

或者

```
input("Press Enter to close") # Python 3 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T09:25:11.280

当您的脚本完成执行时，窗口将关闭。

保持它打开的一个技巧是让它向用户询问某种输入，例如通过[raw_input](http://docs.python.org/library/functions.html#raw_input)。

* * *

所以你可以添加

```
raw_input() 
```

到脚本的末尾等待用户按下`Enter`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-24T09:41:13.633

另一种可能的选择是创建一个带有文本区域和关闭按钮的基本 TKinter GUI。然后使用 subprocess 或 equiv 运行它。并从执行的 python 脚本中获取标准输出，`pythonw.exe`这样就不会出现 CMD 提示。

这使它纯粹使用 Python 标准库，也意味着您可以使用 GUI 来设置选项或输入参数......

只是一个想法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-24T09:52:58.867

右键单击您的脚本并删除其属性中的 Program->Close on exit 复选框，或`cmd /k`用作其调用行的一部分。

在引入人为延迟或需要按键之前三思而后行 - 这将使您的脚本在任何无人值守/管道呼叫中几乎无法使用。

# cocos2d-iphone - 类似于 CCJump 的 Cocos2d 波浪动作

> ID：11627853
> 
> 赞同：0
> 
> 时间：2012-07-24T09:24:11.920
> 
> 标签：cocos2d-iphone, ccaction

我需要创建一个与 CCMove 动作相结合的波浪效果。CCJump 动作非常接近我所需要的，但当然没有跳跃，因此它可以平滑地上下移动，直到精灵到达其末端 x 和 y 位置。下面是 CCJump 动作的计算。谁能帮我调整这段代码以消除跳跃并允许流畅的流动。任何指针将不胜感激。

```
-(void) update: (ccTime) t
{
    // parabolic jump (since v0.8.2)
    ccTime frac = fmodf( t * waves_, 1.0f );
    ccTime y = height_ * 4 * frac * (1 - frac);
    y += delta_.y * t;
    ccTime x = delta_.x * t;
    [target_ setPosition: ccp( startPosition_.x + x, startPosition_.y + y )];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:29:00.877

使用 CCWave 进行波浪动作。

```
id waveAction  = [CCWaves actionWithWaves:5 amplitude:20 horizontal:NO vertical:YES grid:ccg(15,10) duration:20];
id repeate     = [CCRepeatForever actionWithAction:waveAction];
[sprite runAction:repeate]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T10:29:06.950

当精灵沿着 X 和 Y 位置移动时，我设法获得了波浪效果。以下计算取自 CCWaves 类，稍作修改。如果有人知道这是否可以改进，请说。为了实现这种效果，我创建了一个名为 CCWaveMove 的新类，它是 CCActionInterval 的子类。

```
-(void) update: (ccTime) t
{
    ccTime y = (delta_.y + (sinf(t*(CGFloat)M_PI*waves_) * height_ * 1.0f));
    ccTime x = delta_.x * t;
    [target_ setPosition: ccp( startPosition_.x + x, startPosition_.y + y )];        
} 
```

# c++ - C++ - CString 不确定为转储 html 源设置什么值

> ID：11627854
> 
> 赞同：0
> 
> 时间：2012-07-24T09:24:15.603
> 
> 标签：c++, html

我正在尝试执行以下操作：

首先，我转储了大约 1000-2000 行代码的页面的 HTML 源代码。

接下来，我想做这个

```
ifstream myfile;

myfile.open("file.txt");
while(!myfile.eof())
{
    getline(myfile,sline);
    sdata = sdata + sline;
} 
```

但是我不想`string`用于我的情况，如何使用 cstring 来保存`sdata`. 在这种情况下，`sdata`是 a `string`，但我想使用 cstring 保存内容。有没有办法让我初始化和使用 cstring？这是我的迷你项目的非功能性要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:43:01.363

不幸的是，`sline`必须是 a `std::string`，但没有什么可以阻止您拥有`sdata`a `CString`：

```
CString sdata;
#ifdef _UNICODE
std::wstring sline;
#else
std::string sline;
#endif
while(getline(myfile, sline))
{
    sdata += sline.c_str();
} 
```

这需要原始`char *`数据并将其附加到`CString`对象。

# c# - 文件系统观察器只检查完整的文件

> ID：11627856
> 
> 赞同：1
> 
> 时间：2012-07-24T09:24:26.773
> 
> 标签：c#, multithreading, file-io

我正在建立一个系统来监视图像目录然后处理它们。

有时 PDF 可能会被放入监视的目录中，在这种情况下，我将它们转换为图像并照常继续。

但是，一旦图像被处理，它就会将其移动到一个完整的文件夹中，但如果 PDF 到图像的转换不完整，那么我的代码将引发 IO 异常，因为它无法移动另一个进程正在使用的文件。

是否可以指定通知过滤器仅处理“完整”文件。完成是指它已完成复制、移动或创建。

我猜测发生这种冲突是因为处理文件的工作人员在不同的线程上运行。

```
public void Start()
{
  if (string.IsNullOrWhiteSpace(this.fileDirectory))
  {
    throw new Exception("No file directory specified.");
  }

  // watch for any type of file activity
  const NotifyFilters Filters = NotifyFilters.LastAccess | NotifyFilters.LastWrite | NotifyFilters.FileName | NotifyFilters.DirectoryName | NotifyFilters.CreationTime;

  // set up the watcher based on the app.config file
  var watcher = new FileSystemWatcher() { Path = this.fileDirectory, NotifyFilter = Filters, EnableRaisingEvents = true };

  // event handler for new files
  watcher.Created += this.NewFileCreated;

  // file system watcher doesn't "see" current files, manually get these
  this.ProcessExistingFiles();
}

private void NewFileCreated(object source, FileSystemEventArgs e)
{
  Task.Run(() => this.ProcessFile(e.FullPath));
}

private void ProcessExistingFiles()
{
  var files = Directory.GetFiles(this.fileDirectory);
  Parallel.ForEach(files, this.ProcessFile);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:18:07.613

据我了解，您有两种类型的文件到达受监控的目录：图像和 pdf。如果 pdf 到达，您必须先将其转换为图像。我不确定您描述的异常的原因是什么 - 转换和处理（最终移动）是否同时完成？

如果不是 - 你找错地方了。可能首先将文件放在那里的进程仍然持有它的句柄。

如果答案是肯定的，那么我有两个建议：

1.  将pdf文件放入不同的文件夹。转换过程将收听此文件夹，并在提取图像后立即进行移动。这样，您不需要更改当前算法中的任何内容，只需添加另一个隔离级别。

2.  Alternatively, you can set a filter on the FSW to monitor only image files (filter file extension) this way, when a pdf is put to the directory, it does not go straight away to processing, it first gets converted to an image. At the end of the conversion, the monitored directory suddenly "receives" another another image! And the process continues as normal. This is essentially another way to receive isolation between the images and the pdfs.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:22:51.800

Possibly, you can try to lock files for writing, if this operation fails - file not completed - wait some time (for next changes or 1 second, for example).

# ruby-on-rails - 我的 Rails 应用程序运行速度太慢。为什么？请帮我

> ID：11627857
> 
> 赞同：-3
> 
> 时间：2012-07-24T09:24:34.843
> 
> 标签：ruby-on-rails, facebook, algorithm, koala

这是代码。谁能找到原因？该程序用于显示朋友相册中的照片。

我认为这个程序使用了 facebook api 3 次，所以可能有重点。但我对事情没有任何想法，而不是这段代码。

```
 graph = Koala::Facebook::API.new(session[:access_token])
  freegraph = Koala::Facebook::API.new

  friends = graph.get_object("me/friends")
  friendsIds = Array.new
  friends.each do |f| friendsIds << f["id"] end
  fsinfo = freegraph.get_objects(friendsIds)

  @realFriends = Array.new
  fsinfo.each do |f|
    if f[1]["gender"].present? && (f[1]["gender"] != "male")
      @realFriends << f[1]
    end
  end

  rFids = @realFriends.map do |rF| rF["id"] end

  albums = graph.get_object("albums?ids="+rFids.join(","))
  album_ids = Array.new
  albums.each do |user|
     album_ids += user[1]["data"].map do |a| a["id"] end
  end

  randAlbumIds = Array.new
  20.times do
    randAlbumIds << album_ids.at(rand(album_ids.count))
  end

  imgList = graph.get_object("photos?ids="+randAlbumIds.join(","))
  imgObjs = Array.new
  imgList.each do |img|
    imgObjs += img[1]["data"]
  end
  if params[:tags].present?
    @photos = imgObjs.select do |i| i["tags"].present? end
  else
    @photos = imgObjs
  end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T13:00:31.793

Facebook 的拉动速度会很慢，这是理所当然的。您不想在 Rails HTTP 请求中进行 HTTP 调用——这也是给定的。因此，您需要将其移至后台进程或线程。

但我更关心你的代码......你写的

```
 @realFriends = Array.new
  fsinfo.each do |f|
    if f[1]["gender"].present? && (f[1]["gender"] != "male")
      @realFriends << f[1]
    end
  end

  rFids = @realFriends.map do |rF| rF["id"] end 
```

你正在寻找一系列女性朋友的想法。所以我会这样做：

```
@female_friend_ids = fsinfo.map {|friend| friend["id"] if friend.first["gender"] != "male"}.compact 
```

这将返回一组非男性朋友 ID。该地图将返回 [nil, 3435, 656]，并摆脱我们称为紧凑的 nil。

它是可读的，并且执行速度会更快并减少垃圾收集时间。

无法自拔。更多的！

```
randAlbumIds = Array.new
20.times do
  randAlbumIds << album_ids.at(rand(album_ids.count))
end 
```

应该只是

```
random_album_ids = album_ids.shuffle.take(20) 
```

（这一切都只是 Ruby 的魅力）

# vim - 纠正 GVim 中的错误后返回主乳胶文件

> ID：11627859
> 
> 赞同：2
> 
> 时间：2012-07-24T09:24:39.707
> 
> 标签：vim, macros, latex, recompile

使用 Gvim 的 vim-latexsuite，我正在编辑一个相当大的文档。它由一个包含 \begin{document}、\end{document} 等的主文档组成。在它们之间有很多部分写在另一个文档中并使用`\input{blahblah}`.

问题是，当我使用`\ll`其中一个导入的文档进行编译时出现错误。该文档与错误日志等一起在当前选项卡中打开。这样做当然是为了我可以轻松纠正错误。

...但是在更正错误之后，我现在位于选项卡中的另一个文档中，该文档以前是我的主文档。该文档没有序言，因此我必须重新打开主文档才能重新编译以查看我的更正是否有效。

在我看来，纠正错误后我应该很容易在现场重新编译。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T13:19:10.000

`Ctrl-O`只要主文档仍然作为缓冲区打开，它似乎就可以使用。有关`:help CTRL-o`其工作原理的更多信息，请参阅。您可以检查一下`:ls`，看看缓冲区是否出现。

# scala - scala中是否可以通过函数字面量来写一个重复参数的函数？

> ID：11627860
> 
> 赞同：4
> 
> 时间：2012-07-24T09:24:42.200
> 
> 标签：scala, multiparameter

正如我们所知，我们可以在 scala 中定义一个重复参数（varargs）函数，如下所示：

```
def func(s: String*) = println(s) 
```

我的问题是如何以**函数文字**样式重写上述内容。还是不可能做到这一点？

**注**：`(s: String) => println(s)`不正确。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-24T10:03:08.367

> 众所周知，我们可以在 scala 中定义一个多参数函数，如下所示：
> 
> ```
> def func(s: String*) = println(s) 
> ```

实际上，这不是函数，而是方法。两者在 Scala 中是根本不同的。

> 我的问题是如何以**函数文字**样式重写上述内容。还是不可能做到这一点？
> 
> **注意**：`(s: String*) => println(s)`不正确。

您不能在函数文字中定义 varargs 参数。在 Scala 错误跟踪器中有一个关于此的错误报告和 Martin Odersky 本人的评论，基本上说这太复杂了。

然而，有几种作弊方法。

如果您对函数参数使用类型推断，即如果您在参数静态已知为可变参数的上下文中使用函数文字，那么一切正常：

```
val func: (String*) => Unit = s => println(s) 
```

或者，您可以定义一个方法，然后通过 η-expansion 将其转换为部分应用的函数：

```
def meth(s: String*) = println(s)

val func = meth _ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T09:49:09.040

正如评论中所写。您可以通过首先定义一个方法然后使用“指向”该方法的函数来作弊：

```
> def m(str:String*) = println(str)
m: (str: String*)Unit

> val f = m _
f: String* => Unit = <function1>

> f("1", "2")
WrappedArray(1, 2) 
```

# internet-explorer - 当单击“返回”按钮时，有时会发生重新发送（POST）而不按原样加载页面。我不会阻止再次发布数据

> ID：11627862
> 
> 赞同：1
> 
> 时间：2012-07-24T09:24:44.220
> 
> 标签：internet-explorer, jakarta-ee

大多数情况下，当单击“返回”按钮时，它会再次将数据发布到服务器端。我在想的是，当单击后退按钮时，它应该加载上一页，因为它没有再次发布数据。但这不是它的行为方式。所以我真正需要的是后退按钮应该显示上一页而无需再次将数据重新发送到服务器。请让我知道是否有任何标题更改或配置可以防止这种情况发生。

谢谢查米尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:44:45.053

如果您有“Cache-Control: no-cache”（和/或 no-store）标头，则将其删除。请参阅：[为什么在 HTTP 响应中应同时使用 no-cache 和 no-store？](https://stackoverflow.com/questions/866822/why-both-no-cache-and-no-store-should-be-used-in-http-response). （我认为 Cache-Control: private 应该仍然可以，如果你想使用它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:30:24.247

做类似的事情，

```
When button clicked set boolean sent = true
If boolean is false
Send data to server 
```

# javascript - 如何检查 JSON 数组是否等于

> ID：11627867
> 
> 赞同：4
> 
> 时间：2012-07-24T09:24:54.720
> 
> 标签：javascript, arrays, json, equals, flot

我正在使用 JSON 和 Flot 创建饼图。创建饼图的 JS 函数接收来自 Django 的 JSON 数组，格式如下：

```
[1, 3, 2, 5, 4] 
```

如果没有数据，则 JSON 数组为：

```
[0, 0, 0, 0, 0] 
```

我正在尝试调整该功能，以便如果没有数据，则不会绘制饼图，而是会出现一些文本（例如“Nothing to show yet”）。到目前为止，我已经尝试过：

```
function loadWeekChart(theData) {
    var blankData = [0, 0, 0, 0, 0];
    if ($.data(theData) == $.data(blankData)){
    $('#week-pie-chart').empty().append('Nothing to show yet');
    } else {
        $.plot($("#week-pie-chart"), theData ,
            {
                series: {
                    pie: { 
                        show: true
                    }
                }
            });
     }
} 
```

JS 没有失败，但它既不打印饼图（没有数据）也不给我文本替换。

请有人告诉我我哪里出错了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T09:28:23.250

就个人而言，我会执行以下伪代码...

```
set boolean to true
for each element in the JSON
    compare it with blank data element 
    if they are not equal boolean false
    else continue
return boolean 
```

然后你会知道是否有相同的函数返回 true 如果它们是 false 如果它们不是。

如果您需要帮助编码，请告诉我。不应该那么难

这也可能有帮助：[类似的问题](https://stackoverflow.com/questions/4465244/compare-2-json-objects)

```
function checkJsons(otherJson,newJson)
{
    var sameJson = true;
     for (var key in otherJson) {
        if(otherJson[key] != newJson[key]) {sameJson=false;} return sameJson;
     }
} 
```

那应该有帮助，但不是测试

一种更好但更难阅读的方法是

```
function checkJsons(otherJson,newJson)
{
  for (var key in otherJson) {if(otherJson[key] != newJson[key]) {return false;}}
  return true;
}

function pieChartData(theData)
{
  var blankData = [0, 0, 0, 0, 0];
 if(checkJsons(blankData,theData)){$('#week-pie-chart').empty().append('Nothing to show yet');} else { // do your code here // }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T09:38:51.837

我应该认为这样的事情应该有效：

```
var replace = true;
for(var i = 0; i < theData.length; i++)
{
    if(theData.[i] != 0)
    {
        replace = false;
        break;
    }
}

if(replace)
{
     $('#week-pie-chart').empty().append('Nothing to show yet');
}

else
{
    $.plot($("#week-pie-chart"), theData ,
        {
            series: {
                pie: { 
                    show: true
                }
            }
        });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T09:46:49.650

使用 JSON.stringify 怎么样？

```
l1 = [0, 0, 0, 0];
l2 = [0, 0, 0, 1];
var bEqual = JSON.stringify(l1) == JSON.stringify(l2);
console.log(bEqual); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-24T09:59:54.890

您不需要与 0 填充数组进行比较。只需检查输入数组是否填充为 0。我认为[`reduce()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/Reduce)这是最好的：

```
if(arr.reduce(function(a, b){ return a + b; }) == 0) {
    //Nothing to show
} else {
    ... 
```

...但较旧的浏览器不支持 reduce()，所以我建议[`$.grep()`](http://api.jquery.com/jQuery.grep/)改用（因为您已经在使用 jQuery）。

```
if($.grep(theData, function (a) { return a != 0; }).length == 0) {
    //Nothing to show
} else {
    ... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-27T21:02:41.883

LmC 的答案非常适合与 JSON 对象进行比较。我调整它来比较两个甚至可以嵌套 JSON 数组的 JSON 数组。这是代码：

```
var areJSONArraysEqual = function(jsonArray1,
                                    jsonArray2) {

                                if(jsonArray1.length===0||jsonArray2.length===0){
                                    if(jsonArray1.length===0 && jsonArray2.length===0){
                                        return true;
                                    }else{
                                        return false;
                                    }
                                }

                                for(var i=0;i<jsonArray1.length;i++){
                                    for ( var key in jsonArray1[i]) {
                                        if(jsonArray1[i][key].length>1){
                                            return areJSONArraysEqual(jsonArray1[i][key],jsonArray2[i][key])
                                        }
                                        if (jsonArray1[i][key] != jsonArray2[i][key]) {
                                            return false;
                                        }
                                    }
                                }
                                return true;
                            }; 
```

# django - Django 管理站点 - admin.py 的位置

> ID：11627871
> 
> 赞同：2
> 
> 时间：2012-07-24T09:25:10.997
> 
> 标签：django, django-admin

我正在编写有几个小应用程序的 django 项目。我想使用默认的管理站点，所以我的 admin.py 会很简单。不幸的是，如果我把它放到项目目录中它不起作用 - 它必须在 app 目录中。现在我有两个选择：

*   将一个 admin.py 放在应用程序的一个目录中 - 它会起作用，但它在逻辑上是不正确的

*   在每个应用程序目录中放置几个​​ admin.py 文件（仅包含来自某个应用程序的模型）

有没有办法强制 django 在项目根目录中查找这个文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-14T23:49:15.920

您可以将文件放入“默认”应用程序（创建项目时创建的应用程序）。然后，您可以从其他应用程序导入模型并在该单个 admin.py 文件中使用它们。例如，下面的文件将适用于默认应用程序和“课程”、“论坛”应用程序。

管理员.py

```
from django.contrib import admin

from models import UserProfile, Sponsor
from courses.models import Course
from forum.models import ForumTopic
admin.site.register(UserProfile)
admin.site.register(Sponsor)
class CourseAdmin(admin.ModelAdmin):
    prepopulated_fields = {"slug": ("code", "name",)}

admin.site.register(Course, CourseAdmin)

class ForumTopicAdmin(admin.ModelAdmin):
    prepopulated_fields = {"slug": ("title",)}

admin.site.register(ForumTopic, ForumTopicAdmin) 
```

# ios - 分配的对象的潜在泄漏

> ID：11627872
> 
> 赞同：0
> 
> 时间：2012-07-24T09:25:12.463
> 
> 标签：ios, memory-leaks, cocos2d-iphone

在**分析**我的 cocos2d 游戏后，我在此代码中收到警告“在第 525 行分配并存储到 'valueString' 中的对象的潜在泄漏”

```
525  NSString * valueString=[[[NSString alloc] initWithString:[NSString stringWithFormat:@"%@: %@",kGameTimeeng,[allFunctions getTimeFormat:(int) _timeLimit]]] retain];

    if([_language isEqualToString:@"rus"]){
        [valueString release];
        valueString=[[[NSString alloc] initWithString:[NSString stringWithFormat:@"%@: %@",kGameTimerus,[allFunctions getTimeFormat:(int) _timeLimit]]] retain];
    }    

    id sequence=[CCSequence actions:
                 [CCCallFuncND actionWithTarget: allFunctions selector: @selector(setLabelColor:withIndex:) data:(void*)color],
                 [CCCallFuncND actionWithTarget: allFunctions selector: @selector(setLabelValue:withValue:) data:(NSString*)valueString],
                // [CCCallFuncND actionWithTarget: self selector: @selector(setLabelStroke:withTag:) data:(void*)TagCurentPointsLabelStroke],
                 [CCBlink actionWithDuration:0.5f blinks:2],
                 [CCShow action], 
                 [CCCallFuncND actionWithTarget: allFunctions selector: @selector(setLabelColor:withIndex:) data:(void*)colorAfter],

                 nil];

    [_timeLimitLabel runAction:sequence];
    [valueString release]; 
```

allFunctions.m

```
-(void) setLabelValue:(id) sender withValue:(NSString*) value
{   
    CCLabelTTF *label=(CCLabelTTF *)sender;
    NSString * valueString=[[[NSString alloc] initWithString:[NSString stringWithFormat:@"%@",value]] autorelease];
    [label setString:[NSString stringWithFormat:@"%@",valueString]];
   //[valueString release];
} 
```

你能解释一下为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T09:36:38.040

```
525 if([_language isEqualToString:@"rus"]){
        [valueString release];
        valueString=[[[NSString alloc] initWithString:[NSString stringWithFormat:@"%@: %@",kGameTimerus,[allFunctions getTimeFormat:(int) _timeLimit]]] autorelease];
    } else {    
        NSString * valueString=[[[NSString alloc] initWithString:[NSString stringWithFormat:@"%@: %@",kGameTimeeng,[allFunctions getTimeFormat:(int) _timeLimit]]] autorelease];
    }

    id sequence=[CCSequence actions:
                 [CCCallFuncND actionWithTarget: allFunctions selector: @selector(setLabelColor:withIndex:) data:(void*)color],
                 [CCCallFuncND actionWithTarget: allFunctions selector: @selector(setLabelValue:withValue:) data:(NSString*)valueString],
                // [CCCallFuncND actionWithTarget: self selector: @selector(setLabelStroke:withTag:) data:(void*)TagCurentPointsLabelStroke],
                 [CCBlink actionWithDuration:0.5f blinks:2],
                 [CCShow action], 
                 [CCCallFuncND actionWithTarget: allFunctions selector: @selector(setLabelColor:withIndex:) data:(void*)colorAfter],

                 nil];

    [_timeLimitLabel runAction:sequence]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T09:29:26.683

当您分配初始化一个对象时，该对象已经将保留计数设置为 1，因此您通常不需要保留它。当您在第一个代码示例 ( `[valueString release];`) 的末尾释放它时，它的保留计数将为 1，因为您在 init alloc 之后保留了它。

我不确定如何处理有关内存管理的参数`CCSequence`，`CCCallFuncND`但是如果从指示的行中删除保留，则应该是安全的。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T09:30:48.107

```
valueString = [[[NSString alloc] initWithString:[NSString stringWithFormat:@"%@: %@",kGameTimerus,[allFunctions getTimeFormat:(int) _timeLimit]]] retain]; 
```

您在这里保留了两次：分配和保留。然后你只释放一次：

```
[valueString release]; 
```

这就是为什么存在潜在泄漏（实际上是泄漏）的原因。

而对于

```
NSString * valueString = [[[NSString alloc] initWithString:[NSString stringWithFormat:@"%@",value]] autorelease]; 
```

您保留一次（分配），并在不再需要`autorelease`时释放（） 。`valueString`这没关系。

# https - 通过 HTTPS 使用 Skype 在线状态控制

> ID：11627876
> 
> 赞同：0
> 
> 时间：2012-07-24T09:25:25.430
> 
> 标签：https, skype

我想创建一个页面，显示登录用户的Skype状态，如下所示：

[http://www.skype.com/intl/en-us/tell-a-friend/get-a-skype-button/](http://www.skype.com/intl/en-us/tell-a-friend/get-a-skype-button/)

它在 HTTP 上运行良好，但我必须使用 https 协议。

MyStatus 链接是一个显示用户状态的 http 链接，但浏览器无法正确显示此状态或因为 http 链接而显示通知。

有没有人有这方面的经验？有什么建议么？

**更新**

解决方案是您必须创建一个代理处理程序 (ashx) 文件，该文件捕获 web 请求并返回相同的内容作为响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:35:46.027

难道你不能自己获取数据，然后显示任何你想要的东西来表明他们的状态。

[http://mystatus.skype.com/user.xml](http://mystatus.skype.com/user.xml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-18T02:23:33.760

您需要为 Skype 小部件使用此特定的安全 (HTTPS) 域：

[https://secure.skypeaassets.com/i/scom/js/skype-uri.js](https://secure.skypeassets.com/i/scom/js/skype-uri.js)

# c++ - 在用户机器上存储密钥的推荐方式

> ID：11627885
> 
> 赞同：0
> 
> 时间：2012-07-24T09:25:50.630
> 
> 标签：c++, windows, security

我想知道在用户机器（Windows）上存储密钥的推荐方法是什么。该密钥用于各种加密和解密过程。

[更新]
到目前为止我发现的东西：
1）混淆硬编码密钥
2）使用 MAC、硬件 ID 等生成密钥

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T09:35:29.460

对于在 Windows 机器上存储密钥材料，我建议您查看[CNG 密钥存储 API](http://msdn.microsoft.com/en-us/library/windows/desktop/bb204778.aspx)。

密钥存储 API 允许您将密钥存储在受保护的存储中，从而防止其他进程从内存中读取密钥。但是，它不会阻止某人在运行时使用调试器捕获密钥。

如果您正在寻找许可/防复制系统，我建议您投资现有的库。

# ruby-on-rails - 在 Rails 中解析 JSON 并显示值

> ID：11627889
> 
> 赞同：2
> 
> 时间：2012-07-24T09:25:57.607
> 
> 标签：ruby-on-rails, arrays, ruby-on-rails-3, json, activerecord

我有一些 JSON 保存在我正在检索和解析的数据库中，但由于某种原因无法遍历解析的 JSON 并返回它的值。

```
<% @submission.each do |submission| %>
 <div class="field">
  <p class="submissionDate">
    <% @dog = JSON.parse(submission.self_interests) %> #Gets the JSON from the self_interests field
      <% @dog.each do |self_interests| %>
        <%= self_interests.company_name %>  #trying to get the company_name from the parsed array
     <% end %>
  </p>
<% end %> 
```

如果我使用`<%= self_interests %>`而不是`<%= self_interests.company_name %>`它按预期输出解析的数组。

```
{"self_interest"=>{"appointment_date"=>"2012-07-19", "company_name"=>"asdasd", "company_registration"=>"asdas", "created_at"=>"2012-07-18T15:49:33+02:00", "date_deleted"=>nil, "date_registered"=>"2012-07-10", "date_terminated"=>"2012-07-27", "id"=>16, "trading_name"=>"asdasd", "transacting_with"=>1, "type_of_business"=>"asdasdasd", "updated_at"=>"2012-07-18T15:49:33+02:00", "user_id"=>2}} 
```

对此的任何帮助将不胜感激，它一直在努力破坏我的大脑。我对 Rails 很陌生，所以很明显我错过了一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:54:38.307

试试这个更新的

```
<%= self_interests["self_interest"]["company_name"] %> 
```

# javascript - 仅当存在某些 HTML 元素时才运行多个 Javascript 脚本？

> ID：11627890
> 
> 赞同：0
> 
> 时间：2012-07-24T09:25:59.313
> 
> 标签：javascript, html, onload

这是情况。我正在构建一个使用大量脚本的网站，看起来有点像这样：

```
function getRandomArrayIndex(source_array) {

return Math.floor(Math.random() * source_array.length);

}

function getRandomArrayEntry(source_array) {

var random_index = getRandomArrayIndex(source_array);

return source_array[random_index];

}

function getRandomBlah() {

var blahs = [
["A"],
["B"],
["C"],
["D"],
["E"],
["F"],
["G"],
["H"],
["I"],
["L"],
["M"],
["N"],
["O"],
["P"],
["R"],
["S"],
["T"],
["V"],
["W"],
["Y"],
]; var random_blah = getRandomArrayEntry(blahs);

return random_blah;

}

function displayBlah(blah) {

const TEXT_ROW = 0;

const LINK_ROW = 1;

var blah_text = blah[TEXT_ROW];

var blah_link = blah[LINK_ROW]; if (blah_link != null) {

document.getElementById("blah").innerHTML = '<a href="' + blah_link + '">' + blah_text + '</a>';

} else {

document.getElementById("blah").innerHTML = blah_text;

}

}

function generateRandomBlah(){

var random_blah = getRandomBlah();

displayBlah(random_blah);

} 
```

这将在使用 调用时`<body onload="generateRandomBlah()">`，将其中一个字母随机插入`<span id="blah"></span>`。

所以大约有 15 个这样的脚本，每个都有自己的函数，其名称因不同用途而略有不同 - generateRandomBlah2 等，每个脚本在 HTML 中都有相应的不同位置来完成其工作。

因为我不是一个很好的编码员，所以整个工作的方式是在“body onload”标签中，仅在这个标签内就有大约 15 个不同的“generateRandomBlah()”函数。该站点的性质意味着在任何一个页面上，我一次只需要 2 或 3 个这些脚本，但我需要能够在任何页面上调用*它们*中的*任何一个。*如您所见，我当前的策略是一次调用它们，如果脚本不存在对应的脚本，它将忽略该事实并转移到下一个。

除了它没有忽略没有对应的事实`<span>`。

一旦一个不存在，其余的脚本就会中断并且实际上并没有做他们应该做的事情。查看 Chrome 的“检查代码”中的代码会发现第一个脚本出现错误，该脚本恰好中断：“Uncaught TypeError: Cannot set property 'innerHTML' of null”。我看到了几个潜在的解决方案，但我可能完全不知道：

1）在每个脚本中添加一些代码，告诉它，如果`<span id>`页面上没有插入代码，它会优雅地结束并移动到下一个 - 逐渐（显然在不到一秒的速度）通过脚本并且只有在实际存在时才运行它们。（如您所见，问题在于脚本会因为没有地方插入其代码而被“卡住”，而且如果发生这种情况，也不会优雅地结束。

2）摆脱'onload'的东西，让每个脚本自包含，调用它自己的函数。不过，我不知道这是否能解决问题。

无论如何，一些帮助将不胜感激，因为我很难过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:30:41.410

不确定我是否在这里遗漏了一些东西，但是由于即使错误消息也抱怨该值为 null，所以明显的解决方案是检查 null：

```
var element = document.getElementById("blah");

if( element !== null ) {
    element.innerHTML = '<a href="' + blah_link + '">' + blah_text + '</a>';
} 
```

如果您需要经常这样做，您可以为其创建一个函数：

```
function updateIfExists( id, content ) {
    var element = document.getElementById( id );

    if( element !== null ) {
        element.innerHTML = content;
    }
}

updateIfExists( 'blah', '<a href="' + blah_link + '">' + blah_text + '</a>' ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:31:05.117

正如您在第一个解决方案中所说，`null`在尝试“做”任何事情之前进行测试可能是您最好的选择，而不是完全重新编码。

```
function getRandomArrayIndex(source_array) {
  if(source_array === null) return; // similar lines in each function should fix everything
  return Math.floor(Math.random() * source_array.length);
} 
```

也就是说，与您当前创建一堆非常相似的函数并运行它们的解决方案相比，一个更好的方法是创建一个可以接受参数来指示它应该做什么的单个函数**。**如果它们真的很相似，那应该不难，并且会减少很多代码行。如果您能找到一种方法让您的页面不每次都调用所有函数，那也很好，尽管修复`null`指针是一个小得多的问题。

# android - 使用 actionLayout (SherlockActionBar) 时未调用 onOptionsItemSelected

> ID：11627892
> 
> 赞同：50
> 
> 时间：2012-07-24T09:26:02.947
> 
> 标签：android

在菜单项中使用 actionLayout 时，不会调用 onOptionsItemSelected 方法。我错过了什么，还是 SherlockActionBar 的已知问题？

活动

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getSupportMenuInflater();
    inflater.inflate(R.menu.article, menu);

    super.onCreateOptionsMenu(menu);

    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {   

    Log.d(TAG, "onOptionsItemSelected()");

    switch (item.getItemId()) {        
        case android.R.id.home:            
            finish();      
            return true; 
        case R.id.menu_item_comment:
            return true;
        default:            
            return super.onOptionsItemSelected(item);    
    }
} 
```

菜单

```
<item android:id="@+id/menu_item_comment"
    android:showAsAction="ifRoom"
    android:actionLayout="@layout/action_bar_comment_layout"/> 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-07-24T10:02:22.763

好吧，您必须在该 actionLayout 上设置 onClickListener 才能接收回调。我这样做：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getSupportMenuInflater().inflate(R.menu.map_menu, menu);
    for (int i = 0; i < menu.size(); i++) {
        MenuItem item = menu.getItem(i);
        if (item.getItemId() == R.id.menu_more) {
            itemChooser = item.getActionView();
            if (itemChooser != null) {
                itemChooser.setOnClickListener(this);
            }
        }
    }
    return super.onCreateOptionsMenu(menu);
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-06-21T10:03:53.897

您必须添加自己的`OnClickListener`并明确调用`onOptionsItemSelected`：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuItem awesomeMenuItem = menu.findItem(R.id.action_awesome);
    View awesomeActionView = menuItem.getActionView();
    awesomeActionView.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            onOptionsItemSelected(awesomeMenuItem));
        }
    });
} 
```

PS：不知道为什么它不能开箱即用。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-03-11T19:08:31.490

您应该使用**MenuItemCompat.getActionView(menuItem);** 而不是**item.getActionView();** 如果您正在为旧版本开发。

```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.menu, menu);
        for (int i = 0; i< menu.size() ;i++) {
            MenuItem menuItem = menu.getItem(i);
            if (menuItem.getItemId() == R.id.add_item) {
                View view = MenuItemCompat.getActionView(menuItem);
                if (view != null) {
                    view.setOnClickListener(new OnClickListener() {

                        @Override
                        public void onClick(View v) {
                            Intent intent = new Intent(MainActivity.this, ToDoActivity.class);
                            startActivity(intent);
                        }
                    });
                }
            }
        }       
        return true;
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-02-21T06:49:25.593

```
 override fun onCreateOptionsMenu(menu: Menu?): Boolean {
    menuInflater.inflate(R.menu.menu_add_require, menu)

    val menuItem = menu!!.findItem(R.id.menu_cart)
    val view = menuItem.actionView
    view.setOnClickListener {
        onOptionsItemSelected(menuItem)
    }

    return true
} 
```

为我工作（代码在 kotlin 中）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-12T15:24:40.120

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);
    getMenuInflater().inflate(R.menu.main, menu);
    View view = menu.findItem(R.id.menu_item_comment).getActionView();
    view.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            // do something
        }
    });
    return true;
} 
```

此外，（这对我来说非常重要，因此其他答案不起作用）您需要禁用操作布局中所有视图的可点击选项（即 action_bar_comment_layout.xml）：

```
android:clickable="false" 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-11-10T20:59:49.360

结合@Arun Kumar 和@Luten 的答案，下面的方法将使实现变得通用。**对于所有使用actionView**的菜单项，我们**setOnClickListener**调用**onOptionsItemSelected(item)**。这样我们就可以混合和匹配 normal 和 actionLayout 菜单项，而不必担心设置单独的 onClickListeners。

```
@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    menu.clear();
    inflater.inflate(menuResourceId(), menu);

    for (int i = 0; i < menu.size(); i++) {
        final MenuItem item = menu.getItem(i);
        View actionView = MenuItemCompat.getActionView(item);
        if (actionView != null) {
            actionView.setOnClickListener(new View.OnClickListener(){
                @Override
                public void onClick(View v){
                    onOptionsItemSelected(item);
                }
            });
        }
    }

    super.onCreateOptionsMenu(menu, inflater);
} 
```

# c# - 如何防止 RegisterViewWithRegion 在 PRISM 中添加新的 TabItems？

> ID：11627905
> 
> 赞同：0
> 
> 时间：2012-07-24T09:26:47.753
> 
> 标签：c#, wpf, prism, tabcontrol, region

好的

在我的 PRISM 应用程序中，我有 3 个模块，每个模块都有 3~6 个视图。在`Initialize`方法运行时的每个模块中，在每个`RegisterViewWithRegion`视图之后，新`TabItem`出现在`Shell`'s`TabControl`中。但我只想`TabItem`在启动时添加一个，每次用户执行`Command`并`Navigation`发生时，都会`TabItem`出现新的。用户还应该能够添加或删除`TabItem`s。我该怎么办？实施新的`RegionAdapter`还是什么？

这是我的外壳`TabControl`：

```
<TabControl TabStripPlacement="Left" Grid.Column="2" Margin="6" VerticalAlignment="Stretch" HorizontalAlignment="Stretch"
            VerticalContentAlignment="Stretch" HorizontalContentAlignment="Stretch"
            prism:RegionManager.RegionName="{x:Static infrastructure:RegionNames.MainRagionName}">
    <TabItem />
</TabControl> 
```

这是RegisterViewWithRegion：

```
var codingMainTreeView = _container.Resolve<Views.CodingMainTreeView>();
_regionManager.RegisterViewWithRegion(RegionNames.MainRagionName, () => codingMainTreeView);

var vouchersMainView = _container.Resolve<Views.VouchersMainView>();
_regionManager.RegisterViewWithRegion(RegionNames.MainRagionName, () => vouchersMainView); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T05:06:12.787

**Damian Cherubini** 的回答在[这里](http://compositewpf.codeplex.com/discussions/387923)。

# c# - c# 将控制台输出复制到第二个位置

> ID：11627909
> 
> 赞同：1
> 
> 时间：2012-07-24T09:26:59.597
> 
> 标签：c#, console

无论如何，使用 c# 是否可以将控制台输出复制到第二个位置（以及原始控制台）。我知道我可以调用 SetOut 来覆盖控制台的默认输出位置，但我想做的是继续写入原始控制台实现，但也写入第二个位置。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:35:49.570

您可以尝试使用此代码

```
FileStream ostrm;
StreamWriter writer;
TextWriter oldOut = Console.Out;

try
{
    ostrm = new FileStream ("./Redirect.txt", FileMode.OpenOrCreate, FileAccess.Write);
    writer = new StreamWriter (ostrm);
}
catch (Exception e)
{
    Console.WriteLine ("Cannot open Redirect.txt for writing");
    Console.WriteLine (e.Message);
    return;
}
Console.SetOut (writer);
Console.WriteLine ("This is a line of text");
Console.SetOut (oldOut);
writer.Close();
ostrm.Close();
Console.WriteLine ("Done"); 
```

# php - connection_aborted() 不适用于 ajax 调用

> ID：11627916
> 
> 赞同：1
> 
> 时间：2012-07-24T09:27:27.580
> 
> 标签：php, ajax, connection

**已编辑**

我有一个 ajax 调用（使用[`$.ajax()`](http://api.jquery.com/jQuery.ajax/)），它调用以下 php 脚本。

```
for ($i=0;$i<40;$i++) {
    echo " ";
    flush();
    if (connection_aborted()) {
        log_message('error','CONNECTION IS ABORTED!!!!!');
        exit;
    }
    else {
        log_message('error','connection not aborted :(');
    }
    sleep(1);
} 
```

持续 40 秒。

如果我关闭触发调用的浏览器窗口，*即使我显式发送了一个字符串并刷新了缓冲区*[`connection_aborted()`](http://ch.php.net/manual/en/function.connection-aborted.php)，仍然返回 false ！

 *请问有人在这里回答吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-20T22:23:22.837

您将需要添加“ignore_user_abort(true);” 在 PHP 脚本之上，并在从脚本中回显某些内容后调用“ob_flush()”（有关原因，请参见[**PHP flush() 手册页**](http://php.net/manual/en/function.flush.php)）。工作示例（概念证明）：

```
<?php

ignore_user_abort(true);

function log_message($s, $ss) {
  $myFile = "log.txt";
  $fh = fopen($myFile, 'a') or die("can't open file");
  $stringData = $s . ": " . $ss . "\n";
  fwrite($fh, $stringData);
  fclose($fh);
}

for ($i=0;$i<5;$i++) {

    echo "<br>";
    //flush();
    ob_flush();

    if (connection_aborted()) {
        log_message('error1', connection_status());
        exit;
    }
    else {
        log_message('error2', connection_status());
    }

    sleep(1);
} 
```

PS connection_status() 如果连接仍然处于活动状态，则返回 0，如果连接已关闭，则返回 1。

**编辑：**

我的错。调用 flush() 和 ob_flush() （请阅读 flush() 手册页、上面的链接以及[**本主题**](https://stackoverflow.com/questions/4191385/php-buffer-ob-flush-vs-flush)的答案），否则可能无法正常工作，具体取决于服务器/php 配置。以下代码在 WAMP 上使用 PHP 5.3.8 进行了测试（无需调用 flush()），现在在 Ubuntu 上使用 PHP 5.3.10 进行了测试。在 ob_flush() 之前调用 flush() 是必要的。

完整的测试代码：

**索引.html：**

```
 <html>
  <head>
    <script src="http://code.jquery.com/jquery-1.8.0.min.js"></script>

    <script>

      $(document).ready(function() {

        $.ajax({
          url: "script.php",
          context: document.body
        }).done(function(data) { 
         alert(data);
        });

      })

    </script>

  </head>

  <body>
  </body>

</html> 
```

**脚本.php：**

```
ignore_user_abort(true);

function log_message($type, $message, $file = 'log.txt') {
    $fh = fopen($file, 'a') or die("can't open file");

    $conn_status = connection_status();

    if($conn_status === CONNECTION_NORMAL) {
        $status = 'normal';
    } elseif($conn_status  === CONNECTION_ABORTED) {
         $status = 'aborted';
    } else {
        $status = 'timeout';
    }

    $aborted = connection_aborted() ? 'yes' : 'no';

    $data  = $type . ': ' . $message . "\n";
    $data .= 'Connection status: ' . $status . "\n";
    $data .= 'Aborted: ' . $aborted . "\n\n\n";

    fwrite($fh, $data);
    fclose($fh);
}

for ($i = 0; $i < 10; $i++) {

    echo "<br>";
    flush();
    ob_flush();

    if (connection_aborted()) {
        log_message('Error', 'Connection closed by user!');
        exit;
    }
    else {
        log_message('Info', 'Everything is fine. Move along...');
    }

    sleep(1);
} 
```

调用 index.html 页面并关闭选项卡或整个浏览器后，您应该在 log.txt 文件中看到下一个信息：

```
Info: Everything is fine. Move along...
Connection status: normal
Aborted: no

Info: Everything is fine. Move along...
Connection status: normal
Aborted: no

Info: Everything is fine. Move along...
Connection status: normal
Aborted: no

Error: Connection closed by user!
Connection status: aborted
Aborted: yes 
```*

# c# - 标记为 COM 互操作的 C# DLL 如何在 vb6 应用程序中工作

> ID：11627921
> 
> 赞同：0
> 
> 时间：2012-07-24T09:27:42.983
> 
> 标签：c#, .net, vb6

我有一个为 COM 互操作注册的简单 C# 库。我已在我的 vb6 应用程序中添加了对此的参考。我运行了我的 vb 应用程序，一切正常。我想知道这是如何工作的。我检查了任务管理器，我在进程中看到了 VB6.exe，但我看不到任何与 .net 相关的内容。

代码：VB6

```
Dim a As CsharpdllForVBHack.ComAdder
Private Sub Command1_Click()
    Set a = New CsharpdllForVBHack.ComAdder
    a.Add 1, 4
End Sub 
```

代码：C#.net

```
 [ComVisible(true)]
 public class ComAdder
 {
    [ComVisible(true)]
    public void add (int a,int b)
    {
        TestForm testForm = new TestForm(a+b);
        testForm.ShowDialog();
    }
 } 
```

我也想知道一旦我完成了如何处理这个 com 对象

我们注意到，每次单击按钮并关闭表单时，使用的内存都会增加 100 kb，即使添加 set a=Nothing

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T12:22:11.827

在您的情况下，VB 实例化了一个 COM 可调用包装类 (CCW)，它位于 .NET 程序集中。通常的 COM 类型的事情发生在这里。首先，COM 在注册表中查找该类的 GUID，并找到程序集 DLL，并将其加载到 VB 组件的进程中。COM 试图找到一个函数，该函数检索一个指向标准 COM 接口的指针，您可以使用它来实例化 COM 类。您现在有一个 COM 对象。

但这还不是全部。实例化 CCW 时，它还确保加载 .NET 运行时，然后创建 .NET 类的实例。您的 COM 对象有一个基于 .NET 接口的接口。CCW 实质上将所有来自 COM 接口的调用转发到 .NET 接口，将 COM 数据类型转换为 .NET 数据类型，如果您有返回值和输出参数，则再次返回。

至于你的第二点 - 在这种特殊情况下，不要打扰。当 VB 到达过程结束时（或 Exit Sub，或引发错误），它会跳转到清除所有过程级变量的子例程。如果清除对象变量，则对 COM 对象的引用计数会减少。如果引用计数为零，则 COM 实例会自行终止。

在您的情况下，当 COM 类杀死自己时，它会采取极端措施来确保 .NET 对象被销毁，但您不能像所有 .NET 对象一样依赖这种行为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-24T09:59:24.953

您问题的第一部分过于宽泛，无法在此处回答，请查看[COM Interop](http://msdn.microsoft.com/en-us/library/6bw51z5z.aspx)以获取有关此主题的更多信息。

您问题的第二部分回答如下：

要在 VB6 中处理对象，请执行以下操作：

```
Set a = Nothing 
```

确保周围没有其他参考资料。

# android - 当我将 Edittext 的重力设置为 Center 时，placeHolder 不可见

> ID：11627922
> 
> 赞同：0
> 
> 时间：2012-07-24T09:27:44.493
> 
> 标签：android, android-widget, android-edittext

我将重力设置`Edittext`为 CENTER，当我运行它时，`placeholder`可以看到，但是当我尝试设置 Ellipsize 时，它​​看不到。我在 Sony Xperia mini 上有这个问题`(API level 7)`。用其他手机好像没问题。这是代码：

```
 edittext =    (EditText)findViewById(R.id.editText1);
    edittext.setHint("PlaceHolder");   
    edittext.setGravity(Gravity.CENTER);
    edittext.setEllipsize(TruncateAt.START);` 
```

# objective-c - 核心数据：使用延迟实例化时的奇怪错误行为

> ID：11627925
> 
> 赞同：1
> 
> 时间：2012-07-24T09:27:57.707
> 
> 标签：objective-c, ios, ios5, core-data, nsmanagedobject

我在我的 中添加了一个类别`NSManagedObject IBCompany`，该类别应根据简单的日期比较检索特定时间段，这是 IBCompany 的关系之一。

当我运行以下代码时， NSArray`sortedFinPeriodsDesc`以正确的排序顺序包含故障期间。但是，当在`for each`循环中访问它们时，每个句点的属性都返回 nil，特别是 EndDate 的返回 nil。出于这个原因，我的方法`lastReportedPeriodforDate`总是返回 nil，这是一个错误。

```
#import "IBCompany+FinstatAccessors.h"

@implementation IBCompany (FinstatAccessors)

NSArray *sortedFinPeriodsDesc;

- (IBFinPeriod*)lastReportedPeriodforDate:(NSDate*)date;
{
    if ( !sortedFinPeriodsDesc ) {
        NSSortDescriptor *sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"EndDate" ascending:NO];
        sortedFinPeriodsDesc = [self.finperiod sortedArrayUsingDescriptors:[NSArray arrayWithObject:sortDescriptor]];
        }   
    IBFinPeriod *lastPeriod;
    for (IBFinPeriod *finPeriod in sortedFinPeriodsDesc) {
        if ( [finPeriod.EndDate compare:date] == NSOrderedAscending ){ // finPeriod.EndDate < date
            lastPeriod = finPeriod;
            break;
        }
    }
    return lastPeriod;
} 
```

`if clause`但是，当通过删除并始终实例化和排序 NSArray来替换方法中的第一行（延迟实例化）时`sortedFinPeriodsDesc`，代码可以正常工作。

因此，我有几个**问题**：

*   我的代码有什么错误？如何影响惰性实例化故障？
*   您是否建议将 NSArray 定义`sortedFinPeriodsDesc`为瞬态属性并将其排序`awakeFromFetch`？
*   在您看来，最好的选择是什么？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:24:05.050

“延迟加载”带有过早优化的味道。特别是您实现它的方式，您实际上并没有使用实例变量，而是使用全局变量（有关详细信息，请参见[此处](https://stackoverflow.com/questions/2571518/class-variable-defined-at-implementation-rather-than-interface)），这意味着每个对象都没有拥有自己的数组版本。

我建议将数组放在本地并在每次需要时生成它。如果这会影响性能，您可以查看其他方法，但即使上面的 ivar 问题已解决，如果周期集更新，您也会遇到问题 - 您的数组现在已过时。

你还没有说这段时间你的对象被问了多少次，或者有多少对象，或者多少个周期，所以很难给出更具体的建议。

获取的[财产](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdRelationships.html)可能是获得期限的更有效方式，但我没有足够的经验来帮助您解决具体情况。

# sql - 如何仅更新精确值匹配？

> ID：11627926
> 
> 赞同：1
> 
> 时间：2012-07-24T09:27:58.583
> 
> 标签：sql, sql-server, sql-server-2008, powershell

我正在使用 SQL 更新查询 [在 powershell 脚本中] 来更新列中存在的机器名称。

列值存储为 URL。所以机器名是字符串的一部分。

（列名：URL 示例列值：“http://Machine1:80/Impl100/Core/Data/Config.0”）

我正在使用以下查询进行更新。

```
$UpdateQuery="UPDATE [$DatabaseName].[dbo].[$TableName] 
SET $columnName=Replace("$ColumnName", '$OldMachineName', '$NewMachineName');" 
```

假设我的旧机器名称是“Machine1”，我将替换为“AppMachine1”。如果我执行脚本，它将更新“AppMachine1”。但是，如果我第二次执行该脚本，它会将其更新为“AppAppMachine1”，因为 Machine1 是 AppMachine1 的一部分。

是否可以在更新前获取列值并检查机器名称？

这个怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T12:36:18.447

包括双前导正斜杠：

```
 ... -replace '//machine1','//AppAppMachine1' 
```

您还需要将带引号的变量放在双引号中。单引号禁用变量扩展，因此变量不会被其值替换。

这是双重替换的示例：

```
PS> $url = 'http://machine1:80/Impl100/Core/Data/Config.0'
PS> $url -replace '//machine1','//AppAppMachine1' -replace '//machine1','//AppAppMachine1'

http://AppAppMachine1:80/Impl100/Core/Data/Config.0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T09:32:16.007

尝试这个

```
$UpdateQuery="UPDATE [$DatabaseName].[dbo].[$TableName] 
SET $columnName=Replace("$ColumnName", '$OldMachineName', '$NewMachineName')
WHERE "$ColumnName" <> '$NewMachineName';" 
```

# c++ - 固定大小的 const 数组 const 数组作为 C++ 中方法的参数

> ID：11627927
> 
> 赞同：0
> 
> 时间：2012-07-24T09:28:00.853
> 
> 标签：c++, multidimensional-array, constants, argument-passing

在我关于[将数组作为 const 参数传递](https://stackoverflow.com/questions/11543625/passing-an-array-as-a-const-argument-of-a-method-in-c)的问题之后，我试图弄清楚如何编写一个方法，其中参数是固定大小的 const 数组的 const 数组。唯一可写的就是这些数组的内容。

我正在考虑这样的事情：

```
template <size_t N>
void myMethod(int* const (&inTab)[N])
{
    inTab = 0;       // this won't compile
    inTab[0] = 0;    // this won't compile
    inTab[0][0] = 0; // this will compile
} 
```

这个解决方案的唯一问题是我们不知道第一维。有人对此有解决方案吗？

提前致谢，

凯文

[编辑]

我不想使用 std::vector 或这种动态分配的数组。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T09:40:51.777

如果在编译时两个维度都是已知的，那么您可以使用二维数组（换句话说，数组数组）而不是指向数组的指针数组：

```
template <size_t N, size_t M>
void myMethod(int (&inTab)[N][M])
{
    inTab = 0;       // this won't compile
    inTab[0] = 0;    // this won't compile
    inTab[0][0] = 0; // this will compile
}

int stuff[3][42];
myMethod(stuff); // infers N=3, M=42 
```

如果在运行时不知道任一维度，则可能需要动态分配数组。在这种情况下，请考虑使用`std::vector`两者来管理分配的内存并跟踪大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:58:06.407

The reference prevents line 4 (`inTab = 0;`), because you've made `inTab` a reference. The const prevents line 5 (`inTab[0] = 0;`) because an `inTab` pointer is const.

# c# - MVC 3 多租户和查看编译缓存问题

> ID：11627930
> 
> 赞同：4
> 
> 时间：2012-07-24T09:28:11.587
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, multi-tenant

关于 ASP.NET MVC 3 中的一种多租户实现，我遇到了一个无法预料的问题。

假设我有 2 个网站：`example.com`和`example.fr`. 它们都由 IIS 中的同一个 MVC 网站提供服务。

然后我有一个自定义`VirtualPathProvider`，它基于域，为来自不同位置的视图提供服务。控制器总是相同的，只是从不同的位置获取视图。

这一切都很好。问题来自 ASP.NET View 编译。假设两个域都有一个具有相同名称和路径的视图（为清楚起见，MVC 视图路径）：

```
example.com/Views/MyController/Index.cshtml
example.fr/Views/MyController/Index.cshtml 
```

这应该运作良好。但是 ASP.NET BuildManager（将 Razor 代码编译为程序集）**仅基于 Virtual Path**缓存构建。

所以这意味着当我在访问时第一次渲染视图时，`example.com`我得到了正确的视图。但是，如果我尝试在 的上下文中渲染视图`example.fr`，ASP.NET 会认为该视图没有被修改（这是真的，因为虚拟路径是相同的）并且它将从缓存中执行视图，因此渲染不正确看法。

解决它的一种方法是根据域在不同的命名空间中编译视图。

到目前为止，我得到了`MvcWebRazorHostFactory`，覆盖`CreateHost`方法以返回`RazorEngineHost`具有正确命名空间的 a。不确定它是否会起作用，因为我认为我当时没有所有需要的信息（`HttpContext`是其中之一）

有人有什么想法吗？我在这里遗漏了一些明显的东西吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T11:39:51.083

好的，事实证明很容易解决。

我所要做的就是覆盖`GetCacheKey`我的`VirtualPathProvider`并返回一个考虑到主机名的密钥字符串。

在我的情况下，我只是连接主机和虚拟路径并返回结果字符串的哈希码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T10:25:55.863

我不知道您是否已经走得太远而无法考虑其他方法，但我也正在开发一个多租户系统，并且我通过覆盖基于 Razor 的视图引擎来完成它.

```
public class MultiTenancyRazorViewEngine : RazorViewEngine
{
    /// <summary>
    /// Finds the specified partial view by using the specified controller context.
    /// </summary>
    /// <param name="controllerContext">The controller context.</param>
    /// <param name="partialViewName">The name of the partial view.</param>
    /// <param name="useCache">true to use the cached partial view.</param>
    /// <returns>The partial view.</returns>
    /// <exception cref="T:System.ArgumentNullException">The <paramref name="controllerContext"/> parameter is null (Nothing in Visual Basic).</exception>
    /// <exception cref="T:System.ArgumentException">The <paramref name="partialViewName"/> parameter is null or empty.</exception>
    public override ViewEngineResult FindPartialView(ControllerContext controllerContext, string partialViewName, bool useCache)
    {
        var searchedLocations = new List<string>();
        var foundFile = Support.ResolvePath(string.Format("{0}.cshtml", partialViewName), controllerContext.HttpContext, controllerContext.RouteData, searchedLocations);

        return foundFile == null 
            ? new ViewEngineResult(searchedLocations) 
            : base.FindPartialView(controllerContext, foundFile, useCache);
    }

    /// <summary>
    /// Finds the view.
    /// </summary>
    /// <param name="controllerContext">The controller context.</param>
    /// <param name="viewName">Name of the view.</param>
    /// <param name="layoutPath">The layout path.</param>
    /// <param name="useCache">if set to <c>true</c> [use cache].</param>
    /// <returns></returns>
    public override ViewEngineResult FindView(ControllerContext controllerContext, string viewName, string layoutPath, bool useCache)
    {
        var searchedLocations = new List<string>();
        var foundFile = Support.ResolvePath(string.Format("{0}.cshtml", viewName), controllerContext.HttpContext, controllerContext.RouteData, searchedLocations);

        return foundFile == null 
            ? new ViewEngineResult(searchedLocations) 
            : base.FindView(controllerContext, foundFile, layoutPath, useCache);
    } 
```

我有自己的查找视图的支持方法：“ResolvePath”。我使用 HttpContext 存储正在访问的站点（通过主机名），并根据该主机名（或客户端的唯一 ID）缓存结果。它还允许我使用自己的路径形式来搜索视图，因此我可以：

如果我想覆盖视图的一部分，Views/Controller/Action.cshtml 或 Views/Custom/[client]/Controller/Action.cshtml（或非常小的部分）。

抱歉，它并没有真正回答您的具体问题，但它有帮助吗？如果您对这种方法感兴趣，我可以提供更多代码。

# android - 如何取消选中 TabHost 中的所有选项卡

> ID：11627940
> 
> 赞同：0
> 
> 时间：2012-07-24T09:29:00.507
> 
> 标签：android, android-layout

我有时需要显示选项卡内容，否则该区域必须填充“非选项卡主机”数据。但是，选项卡应该是可见的，并且当用户单击这些选项卡中的任何一个时，必须隐藏“非选项卡主机”并且必须隐藏适当的选项卡内容变得可见。

它与虚假标签创建有关吗？

给出一个在未选择选项卡的情况下创建 TabHost 的示例。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T09:35:22.667

我通常做的是，添加一个额外的`Tab`并使用`setVisibility(View.GONE)`来隐藏它。这只会对用户隐藏选项卡按钮，并且`Tab`仍然会在“背景”中存在，您可以使用`tabHost.setCurrentTab(0)`. 我通常也将此选项卡保留为第一个选项卡。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-08-09T08:22:21.543

1.复制你想要标签取消选中的代码

```
 tabLayout.setSelectedTabIndicatorColor(Color.WHITE);
                    tabLayout.setTabTextColors(Color.BLACK, Color.BLACK); 
```

2.覆盖Tabselected监听器并粘贴以下代码

```
tabLayout.setOnTabSelectedListener(new TabLayout.OnTabSelectedListener() {
            @Override`enter code here
            public void onTabSelected(TabLayout.Tab tab) {
                 tabLayout.setSelectedTabIndicatorColor(Color.parseColor("#EB1C23"));
                tabLayout.setTabTextColors(Color.BLACK, Color.RED);
              viewPager.setCurrentItem(position);
}

            @Override
            public void onTabUnselected(TabLayout.Tab tab) {

            }

            @Override
            public void onTabReselected(TabLayout.Tab tab) {
               tabLayout.setSelectedTabIndicatorColor(Color.parseColor("#EB1C23"));
                tabLayout.setTabTextColors(Color.BLACK, Color.RED);
              viewPager.setCurrentItem(position);
            }
        }); 
```

# c# - 如何禁用挂起 || 结束 || 我的 Metro Style App 在 Windows 8 Pro 上的终止事件

> ID：11627947
> 
> 赞同：1
> 
> 时间：2012-07-24T09:29:45.857
> 
> 标签：c#, windows-8, windows-runtime, winrt-xaml

我是一名法国开发人员，我需要为始终启动的 Windows 8 Pro 开发 Metro Style 应用程序。我想知道如何禁用我的应用程序的关闭事件。我的应用程序需要一直在前面，并且用户无法退出该应用程序。

我以为我可以使用 GPO 禁用所有快捷方式，但关闭手势（将应用程序从顶部拖到底部）也需要我禁用。

我希望我很清楚，每个人都会理解这个问题:-)。随时问我更具体的问题。

亲切的雷诺。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T15:04:35.423

简短的回答是：你不能。

操作系统和用户控制 Metro Style 应用程序的生命周期，您不能阻止用户切换离开您的应用程序，一旦您的应用程序不再处于前台，应用程序将暂停，系统可以终止应用程序任何时候。

同样，用户关闭手势也不能被阻止。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-06T01:48:52.800

在 Windows 8.1 中，您可能会发现[Kiosk 模式](http://social.technet.microsoft.com/Forums/windows/en-US/5ff9a4a7-530c-425a-98dd-1d3bf6af18d8/how-i-can-config-user-kiosk-mode-in-windows-81-preview)正是您所需要的。

# android - android线性布局的宽度与图像相同

> ID：11627950
> 
> 赞同：0
> 
> 时间：2012-07-24T09:30:14.083
> 
> 标签：android, image, layout, width

我有我的`layout`：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout  xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:orientation="vertical"

        android:gravity="center_horizontal"
         >
             <ImageView
                        android:id="@+id/id_new_big_list_item_image"
                        android:layout_width="fill_parent"
                        android:layout_height="wrap_content"
                        android:adjustViewBounds="true"   
                        android:layout_centerHorizontal="true"   /> 

              <LinearLayout 
                  android:layout_height="wrap_content"
                  android:layout_width="fill_parent"
                  android:orientation="vertical"
                  android:background="@drawable/round_corners_new_bottom" >

                  <TextView
                    android:id="@+id/id_new_big_list_item_name"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:textSize="12sp"
                    android:textColor="@color/new_restaurant_name"
                    android:paddingTop="5dp"
                    android:paddingLeft="10dp"
                    android:paddingRight="10dp"
                    android:paddingBottom="0dp" />

              </LinearLayout>

</LinearLayout> 
```

我需要使用文本视图在顶部（水平中心）和线性布局下方显示图像。图像可以有不同的宽度，但我想将线性布局的宽度设置为与图像相同。但是如果文本太长，宽度就会变大。我怎样才能做到这一点？如果文本的宽度大于图像宽度，则制作 2 行文本。

可能吗？？

这是我的布局快照：

![在此处输入图像描述](../Images/5f7d6c31b463c4d00d3802c3bcf90a20.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:33:43.920

设置 ImageView`layout_width="wrap_content"`并删除包含 TextView 的第二个 LinearLayout

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout  xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:orientation="vertical"
    android:gravity="center_horizontal" >
    <ImageView
        android:id="@+id/id_new_big_list_item_image"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:adjustViewBounds="true"   
        android:layout_centerHorizontal="true"   /> 

    <TextView
       android:id="@+id/id_new_big_list_item_name"
       android:layout_width="fill_parent"
       android:layout_height="wrap_content"
       android:textSize="12sp"
       android:textColor="@color/new_restaurant_name"
       android:paddingTop="5dp"
       android:paddingLeft="10dp"
       android:paddingRight="10dp"
       android:paddingBottom="0dp" />
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T09:37:55.847

您的图像应该是 wrap_contant 并且取决于它的大小。TextView 将放置在所有父级中。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout  xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:orientation="vertical"
        android:gravity="center_horizontal" >

        <ImageView
               android:id="@+id/id_new_big_list_item_image"
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"
               android:layout_centerHorizontal="true"   /> 

       <TextView
               android:background="@drawable/round_corners_new_bottom" 
               android:id="@+id/id_new_big_list_item_name"
               android:layout_width="fill_parent"
               android:layout_height="wrap_content"
               android:textSize="12sp"
               android:textColor="@color/new_restaurant_name" />

</LinearLayout> 
```

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T09:36:03.850

在这里，而不是`LinearLayout`使用 a `RelativeLayout`。

并将您的边界设置为`EditText`与**ImageView Width 对齐的****左右**对齐。这样当文本的长度超过 EditText 的高度时，EditText 的垂直增量比水平的增量。

# php - 使用 DB 值动态将字段添加到表单，php

> ID：11627952
> 
> 赞同：1
> 
> 时间：2012-07-24T09:30:15.563
> 
> 标签：php, javascript, forms, dynamic

好吧，我有一个由许多元素组成的表单，我希望用户能够向表单动态添加内容（理想情况下不使用 JS 来不显示 SQL 查询和内容）。目前我正在尝试在 php 中执行此操作，代码示例如下：

假设其中有一个表单和一个表 t1。我希望用户能够通过按下按钮或 w/e 来添加相同的表格，从 t2 到一组 tn，到表单中，并更改了 id（这很简单）。
这在多大程度上可能不显示 SQL 内容并且不需要重新加载页面？

```
<form ...>
...

echo'<table id="t1" ...>
 <tr>
   <td>Text</td>
   <td>Text</td>
   <td>Text</td>
   <td>Text</td>
</tr>
<tr>
  <td>';
     $query = "SELECT * FROM randomTable";
     $exec = mysql_query($query ) or die(mysql_error());

     $num = 0;
     while ($row= mysql_fetch_array($exec))
     {
       if ($num == 0)
       {
         echo '<select id="t1_show">
               <option value="" selected="selected">
               <option value="' . $row['id'] . '">'
               . $row['name'] . '</option>';
         $num ++;
       }
       else
       {
         echo '<option value="' . $row['id'] . '">'
               . $row['name'] . '</option>';
         $num ++;
       }
     }
     if ($num > 0) echo '</select>';

     echo '</td>
           <td><input id="t1_input1" type="text"/></td>
           <td><input id="t1_input2" type="text"/></td>
           <td><input id="t1_input3" type="text"/></td>
         </tr>

  </table>';

... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:36:08.917

> 理想情况下，不使用 JS 来不显示 SQL 查询和内容。

使用 JS，特别是 ajax，不会暴露任何东西，你只需调用一个 php 脚本，它会在后台完成所有数据库工作，然后返回结果。

我建议你看看[jquery](http://jquery.com/)和[jquery.ajax()](http://api.jquery.com/jQuery.ajax/)，这正是你所需要的。

只需将单击事件绑定到按钮并发送 ajax 请求。

# jquery - 为什么我们写方法插件的时候需要函数插件

> ID：11627955
> 
> 赞同：1
> 
> 时间：2012-07-24T09:30:21.650
> 
> 标签：jquery

我是一个 JQuery 新手，在阅读 Jquery 书籍时遇到了这个 jquery 插件示例代码。

```
//adding a function to JQuery object
jQuery.slowEach = function( array, interval, callback ) {
    if( ! array.length ) return;
    var i = 0;
    next();
    function next() {
        if( callback.call( array[i], i, array[i] ) !== false )
            if( ++i < array.length )
                setTimeout( next, interval );
    }
    return array;
};

//attaching a new method .slowEach()
jQuery.fn.slowEach = function( interval, callback ) {
    return jQuery.slowEach( this, interval, callback );
};

// Show an element every half second
$('.reveal').slowEach( 500, function() {
    $(this).show();
}) 
```

我就是想知道在写这样的方法插件的时候是否需要写函数插件，有什么意义？如果没有，我可以在没有函数插件的情况下在 jQuery.fn.slowEach 方法中编写整个内容吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T12:05:07.710

如果我没记错的话，在 中编写你的函数/方法`jQuery.fn`，你将能够在所有 jQuery 对象上使用它，因为`.fn`它是 jQuery 的某种快捷方式`prototype`。您可以这样做，但您需要更改原始代码中的一些内容（例如，您需要将其`this`用作`array`变量）。这样，您将能够做到这一点：

```
//select a DOM element and apply the plugin on it
$('.reveal').slowEach( 500, function() {
   $(this).show();
}); 
```

将插件写入其中`jQuery.yourplugin`使其无需 jQuery 元素即可访问。这意味着您将能够执行以下操作：

```
//use it without doing it over a jQuery element
var ar = [1,2,3];
jQuery.slowEach(ar,500,function(){
   alert("hey");
}); 
```

# windows - 如何批量替换目录windows vista中的文件（从.txt.txt到.txt）

> ID：11627956
> 
> 赞同：1
> 
> 时间：2012-07-24T09:30:22.557
> 
> 标签：windows, dos, batch-file, system-administration

我在一个目录中有几个平面文件（.txt）。所有这些文件的格式都是 *.txt.txt 所以我想把它重命名为 *.txt？有没有简单的方法可以一起重命名？

当我尝试时`ren *.txt.txt *.txt`不起作用

请任何专家建议？令人惊讶的是我还没有得到任何答案 ![在此处输入图像描述](../Images/f56475e132192ee703d1cdcf497a7849.png)

请注意，我需要一个不符合格式的 filename.txt。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T10:28:36.213

这应该工作

```
ren *.txt.txt *. 
```

您的命令不起作用的原因是，对于 Windows，该文件`file.txt.txt`是`file.txt`使用`.txt`扩展名调用的。

只有最后一个扩展名是真正的扩展名，第一个扩展名成为文件名的一部分，因此您的命令将其更改为它已经是什么。

如果你这样做了`ren *.txt.txt *.pdf`，你会得到`file.txt.pdf`.

我的命令将只删除最后一个，从而留下第一个，然后成为唯一且真正的扩展。

# c# - 具有中央数据库的多用户环境中的实体框架数据更新

> ID：11627959
> 
> 赞同：8
> 
> 时间：2012-07-24T09:30:27.577
> 
> 标签：c#, entity-framework, multi-user

让我解释一下标题。

我在应用程序**(TestApp)**中首先使用实体​​框架代码。出于调试目的，*TestApp*连接到 SQLExpress 数据库（中央数据库服务器）。

为了简单起见，数据库包含一个表“Products”，TestApp 在数据网格中显示数据库中的所有“Products”，TestApp 可以添加/删除“Product”或修改 ProductName。

```
public class Product {
 public int ProductId { get; set; }
 public string ProductName { get; set; }
}

public DbSet<Product> Products { get; set; } 
```

例如，我有 3 台安装并运行 TestApp 的电脑（我将它们称为 Client_X）。如果我通过 Client_1 添加一个新的“产品”，那么这在 Client_2 和 Client_3 上的 TestApp 中是不直接可见的。只有当 Client_2 和 Client_3 再次获取所有数据（手动刷新）时，我才会看到新添加的记录。

我想知道的：如何通过 EF Code First 了解数据库的变化？由于添加或删除了新项目，Client_2 和 Client_3 如何自动更新其数据网格？

我不确定它是否被问得太多，但是一个简单的示例项目或简单的代码来证明这一点会很有用。

*仅供参考：我对 EF Code First 还很陌生。（我使用的是 .NET 4.0 和 EF Code First 4.3.1）*

提前致谢。

**方案：**

```
Client_3<
         \
          \
           \
            \
             \>
Client_1 <---> [Central Database] <----> Client_2 
```

**更新/编辑：**

好的，很明显实体框架本身不会在多个客户端之间进行任何同步。

**所以我会问另一个问题：** 我正在考虑以客户端-服务器方式工作：

*   创建数据库并首先使用实体​​框架代码的单个服务器应用程序。
*   与该单个服务器应用程序通信的多个客户端。

    现在确保客户端使用相同数据并查看彼此更新/更改的最佳方法是什么？（我会很感激代码示例。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-24T11:29:54.067

您无法使用实体框架来通知客户端。您可以为 编写重载`SaveChanges`或创建扩展方法，但就您没有客户端-> 服务器架构而言，我无法想象您如何实现这一点。

如果您使用 WCF 作为数据库的网关，您可以在客户端和服务器之间创建双工通信，并且当新记录可用时，将使用回调通道通知客户端。

另一种方法是使用 MS SQL 服务代理[概述（Service Broker）](http://msdn.microsoft.com/en-us/library/ms166104%28v=sql.105%29)

尽管有许多不同的方法可以得到想要的结果，但它们都与实体框架无关，因为它是 ORM，也不是应用程序框架或使用 .NET 构建的应用程序的通信框架。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-24T09:33:32.493

这不是 EF 的责任，它更多地取决于您的一般应用程序设计。一个相对简单的背景或定期轮询过程将解决您的问题。

在处理多个用户时有更多考虑因素，例如记录锁定，并且可能对这方面的事情进行一些研究，然后在遇到特定问题时再回来。

# magento - 在 magento 主页内容中使用 if else

> ID：11627963
> 
> 赞同：0
> 
> 时间：2012-07-24T09:30:42.703
> 
> 标签：magento, if-statement, customization

我正在尝试显示一个网格视图，其中包含按类别过滤的主页上显示的销售项目。

我试图将 php if/else 块放在管理员 CMS 部分的主页内容中，但它不起作用。CMS 中的任何 PHP 代码都会被自动注释！

有没有其他方法可以按类别过滤主页销售/特色产品？我正在使用 Magento 1.7.x

我已将以下代码添加到有效的主页中：

```
{{block type="catalog/product_special" template="catalog/product/list1.phtml"}} 
```

当用户单击主页本身（而不是主菜单）上的类别链接时，我只想使用类别过滤上述代码的结果

谢谢 有人请吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T19:32:26.970

试试 cms 中的 if/else 语法（严格使用客户组参考作为示例）...

```
{{if customer.group_id==4}} Print true {{else}} Print false {{/if}} 
```

# php - PHP json 编码和解码

> ID：11627964
> 
> 赞同：0
> 
> 时间：2012-07-24T09:30:42.827
> 
> 标签：php, json

我是json的新手。我在文件中有现有的 json 数据。这里看起来像：

```
{

    "qwqw":{
        "id":3,
        "item1":{
            "id":15,
            "price":31.85
        },
        "item2":{
            "id":17,
            "price":26
        },
        "item3":{
            "id":16,
            "price":57.85
        }
    }
} 
```

我可以使用 json_decode 获得这个值。我将使用此代码添加另一个条目。

```
$data = json_decode( file_get_contents('test.ini'), true );
$data[] = array(
                    'id'=>4,
                    'item1'=>array(
                        'id'=>15,
                        'price'=>11
                    ), 
                    'item2'=>array(
                        'id'=>17,
                        'price'=>12
                    ),
                    'item3'=>array(
                        'id'=>16,
                        'price'=>13.50
                    )
                );

file_put_contents('test.ini', json_encode($data) ); 
```

这工作正常。当我再次解码时。这是它的外观。

```
 {

        "qwqw":{
            "id":3,
            "item1":{
                "id":15,
                "price":31.85
            },
            "item2":{
                "id":17,
                "price":26
            },
            "item3":{
                "id":16,
                "price":57.85
            }
        },

         "0":{
            "id":3,
            "item1":{
                "id":15,
                "price":11
            },
            "item2":{
                "id":17,
                "price":12
            },
            "item3":{
                "id":16,
                "price":13.5
            }
        }
    } 
```

我的问题是，我可以更改值“0”吗？到一个字符串。

谁能帮忙？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T09:32:44.990

0 在这里是一个字符串，你可以知道，因为它有引号。

但是如果你想要一个不同的字符串，不要使用：

```
$data[] = array(
   /* ... */
) 
```

但：

```
$data['myKey'] = array(
   /* ... */
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T09:32:54.493

是的你可以

```
$data['string'] = array(
                    'id'=>4,
                    'item1'=>array(
                        'id'=>15,
                        'price'=>11
                    ), 
                    'item2'=>array(
                        'id'=>17,
                        'price'=>12
                    ),
                    'item3'=>array(
                        'id'=>16,
                        'price'=>13.50
                    )
                ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-24T09:33:16.613

采用

```
$data["the_string_key"] = array(
   //...
); 
```

# jquery - 禁用整个 div 上的选项卡

> ID：11627969
> 
> 赞同：1
> 
> 时间：2012-07-24T09:31:10.583
> 
> 标签：jquery, html, tabindex

我有一个包含多个问题的测验.. 一次只显示一个。但是，如果用户在页面上使用标签，则测验将与标签顺序分开。

设置 tabindex="-1" 不适用于所有浏览器.. 还有其他方法吗？jQuery？我需要它以某种方式跳过整个 div ......

注意：我试过这个：

```
$('.quiz').live('keydown', function(e) {
    var keyCode = e.keyCode || e.which; 
    if (keyCode == 9) { 
        e.preventDefault();
    }
}); 
```

但它没有工作..：/

这也没有：

```
$('.quiz').bind('focusin', function() {
    var keyCode = e.keyCode || e.which;
    if (keyCode == 9) { 
        e.preventDefault();
        return false;
    }  
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T10:45:31.500

Try this:

```
//Set tabindex = -1 for all div childs
var divChilds = $('.quiz').find("*");
$.each(divChilds , function(i, elem){
    $(elem).attr("tabindex", -1);
});

//cancel tab click
$('.quiz').keydown(function(e) {
    var keyCode = e.keyCode || e.which; 
    if (keyCode == 9) { 
        e.preventDefault();
    }
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:22:23.377

看看这个：http: [//jsfiddle.net/albertjan/5X5LH/12/](http://jsfiddle.net/albertjan/5X5LH/12/)

**js**

```
$(window).keydown(function(e) {
    var keyCode = e.keyCode || e.which; 
    if (keyCode == 9) { 
        if ($(e.target).is('.quiz *')) {
            e.preventDefault();
        } else {
            wastab = true;
        }
    }
});

$('.quiz input').focus(function(){
    if (wastab){
        wastab = false;    
        $('#not-in-quiz').focus();
    }
}); 
```

​</p>

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-24T11:33:35.323

我已经完成了完整的解决方案箱。所以，我在这里放置了演示链接，如下所示：

**演示：** [http ://codebins.com/bin/4ldqp9r](http://codebins.com/bin/4ldqp9r)

**HTML：**

```
<div id="panel">
  <div class="quiz">
    <span class="header">
      Div-1
    </span>
    <p>
      Question-1? 
      <input type="text" tabIndex="1" />
    </p>
    <p>
      Question-2? 
      <input type="text" tabIndex="2" />
    </p>
    <p>
      Question-3? 
      <input type="text" tabIndex="3" />
    </p>
  </div>
  <div class="quiz">
    <span class="header">
      Div-2
    </span>
    <p>
      Question-4? 
      <input type="text" tabIndex="4" />
    </p>
    <p>
      Question-5? 
      <input type="text" tabIndex="5" />
    </p>
    <p>
      Question-6? 
      <input type="text" tabIndex="6" />
    </p>
  </div>
</div> 
```

**CSS：**

```
.header{
  border-bottom:1px solid #445599;
  display:block;
  background:#447797;
  padding:0px;

}
.quiz{
  background:#bbaadd;
  border:1px solid #445599;
  padding:2px;
  display:inline-block;
}
.quiz input{
  border:1px solid #113388;
}
.quiz input:focus{
  background:#d98866;
} 
```

**查询：**

```
$(function() {
    $(".quiz:first input:first").focus();
    $(".quiz input").keypress(function(e) {
        var keyCode = e.keyCode || e.which;
        if (keyCode == 9) {
            e.preventDefault();

            if ($(this).parents(".quiz").next().find("input:first").length > 0) {
                $(this).parents(".quiz").next().find("input:first").focus();

                /*
              //OR Another way to find next input selector is:
              $(this).closest(".quiz").next().find("input:first").focus(); 
              */

            } else if ($(this).parents(".quiz").prev().find("input:first").length > 0) {
                $(this).parents(".quiz").siblings(".quiz:first").find("input:first").focus();

                /*
              //OR Another way to find next input selector is:
              $(this).closest(".quiz").siblings(".quiz:first").find("input:first").focus(); 
              */
            }
        }

    });
}); 
```

**演示：** [http ://codebins.com/bin/4ldqp9r](http://codebins.com/bin/4ldqp9r)

# c++ - Sublime Text 2 和 MinGW

> ID：11627977
> 
> 赞同：6
> 
> 时间：2012-07-24T09:31:30.570
> 
> 标签：c++, windows, mingw, sublimetext, sublimetext2

再会！

谁能分享他们如何将 MinGW 编译器附加到 Sublime 的经验？

我在互联网上找到了一个配置，但是当我运行已编译的程序时，会弹出“../MinGW/bin/”中缺少文件的错误。

配置：

```
{
   "cmd": ["mingw32-g++.exe", "-o", "$file_base_name", "$file_name"],
   "path": "c:\\Program Files\\MinGW\\bin\\"
} 
```

谢谢！

# **UPD**

我找到了我的问题的答案！我不得不在`cmd`. 是`"-static"`。

所以，这是 my `MinGW.sublime-build`，它工作正常：

```
{
    "path": "c:\\Program Files\\MinGW\\bin\\",
    "cmd": ["mingw32-g++.exe", "-static", "-o", "$file_base_name", "$file"]
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T21:40:11.563

确保将 bin 文件包含在系统的“路径”变量中。

打开开始菜单并输入“变量”或“环境变量”（或谷歌搜索）以查找操作方法。您将进入一个包含很多变量的窗口，找到 Path（而不是 PATH）变量并将路径添加到 MinGW 的 bin 文件夹。

顺便说一句，按照建议，您应该按文件更改 file_base_name，并将 file_base_name 放在放置 file_base 的位置。

这是我个人使用的命令：

`"cmd": ["C:\\MinGW\\bin\\mingw32-g++.exe", "-Wall", "-time", "$file", "-o", "$file_base_name"]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:25:16.377

您应该使用 $file 而不是 $file_name。$file_name 仅扩展为名称，而 $file 扩展为完整路径。

更改后的配置将是

```
{
   "cmd": ["mingw32-g++.exe", "-o", "$file_base_name", "$file"],
   "path": "c:\\Program Files\\MinGW\\bin\\"
} 
```

# iphone - 加载本地音频 .caf 文件，使用哪个对象？iOS

> ID：11627979
> 
> 赞同：0
> 
> 时间：2012-07-24T09:31:50.873
> 
> 标签：iphone, ios, tableview, avaudioplayer, caf

此特定功能的目的是能够从表格视图中显示和播放本地录音。加载本地caf文件的代码如下：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self loadFileInformation];
}

- (void)loadFileInformation
{
    items = [[NSMutableArray alloc] init];
    NSString *path = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSArray *directoryContent = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:path error:nil];
    for (int i = 0; i < [directoryContent count]; i++) [items addObject:[directoryContent objectAtIndex:i]];
    [self.tableView reloadData];
} 
```

使用委托方法播放特定文件如下：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    avAudioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:[[items objectAtIndex:indexPath.row] filePathURL] error:nil];
    avAudioPlayer.delegate = (id)self;
    [avAudioPlayer prepareToPlay];
    [avAudioPlayer play];
} 
```

但是，当调用此方法时，出现错误：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFString filePathURL]: unrecognized selector sent to instance 0x239420' 
```

我只是想知道是否有人可以指出我正确的方向！当本地目录的内容存储在数组中`directoryContent`时，每个元素是什么对象？`NSData`?

提前谢谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:35:52.157

您正在将 NSString 值添加到 items 数组中。将`AVAudioPlayer`初始化行替换为以下内容：

```
avAudioPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:[items objectAtIndex:indexPath.row]] error:nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:37:57.837

在您的 loadFileInformation 方法中

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0]; 
```

将是一个正确的方法。

也看看[什么是 NSSearchPathForDirectoriesInDomains？](https://stackoverflow.com/questions/3179527/what-is-nssearchpathfordirectoriesindomains)

编辑：

顺便说一下，内容是 NSString 。为什么不尝试使用该路径上可用的数据分配 AVudioPlayer 对象。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString * path = [documentsDirectory stringByAppendingPathComponent:[items objectAtIndex:indexPath.row]];

NSData *data = [[NSFileManager defaultManager] contentsAtPath:path];
AVAudioPlayer * player = [[AVAudioPlayer alloc] initWithData:data error:nil]; 
```

您在 items 数组中有文件名，但不是完整的路径。因此，我们将尝试将其附加到路径并获取该路径中可用的数据并使用它加载您的音频播放器。

# c# - 使用谓词条件搜索元素

> ID：11627981
> 
> 赞同：0
> 
> 时间：2012-07-24T09:31:52.183
> 
> 标签：c#, wpf, enumeration, visualtreehelper

如何通过谓词在 VisualTree 中找到框架元素？类似的东西：

```
public static FrameworkElement FindChild(FrameworkElement root, Predicate<> predicate)
{
   ...
} 
```

我将使用它：

```
Button btn = FindChild(MainForm, element => element is Button); 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:40:56.397

所以真正的问题是如何遍历给定“根”元素的所有子元素。因为这样您就可以调用该元素的谓词并选择您想要的那些。所以我想你应该在这里区分两种不同的工作流程 - 一个 - 当元素是 Panel 时，你应该首先将它传入，然后遍历它的 Children 属性并传入其中的每一个（递归和非递归都可以工作，但是您应该更深入地了解树，并在两种情况下都通过关卡返回）。如果是非面板元素，只需将该元素传递给谓词。您还应该考虑具有“内容”属性的元素（我想这是在某些基本类型中定义的，我不记得是哪一个），因此以相同的方式检查内容元素。就这样。

问候， 阿尔塔克

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T09:50:45.727

您可以使用 LINQ 找出特定类型的控件，可能是这样的：

```
List<Button> btns = Controls.OfType<Button>().ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T09:36:08.187

[这个 SO question](https://stackoverflow.com/questions/636383/wpf-ways-to-find-controls)的答案描述了在可视化树中查找控件的多种方法。

谓词版本在此处作为指向[this](http://code.google.com/p/gishu-util/source/browse/trunk/WPF/Utilities/DepObjExtn.cs)的链接给出。

# oracle - Oracle DB：获取触发特定更新的查询

> ID：11627982
> 
> 赞同：2
> 
> 时间：2012-07-24T09:31:56.673
> 
> 标签：oracle, oracle11g

我想监视数据库中的某些字段；当 SQL 查询使用某个值更新该字段时，我想记录触发更新的查询。

我怎样才能做到这一点 ？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T11:24:24.510

好问题。让我很好奇。[我在这里](http://www.dbasupport.com/forums/showthread.php?t=44351)找到了答案。那里还提到了一个 LOGMINER 实用程序。也许值得研究？

```
SQL> CREATE OR REPLACE FUNCTION cur_sql_txt
  2    RETURN CLOB
  3  AS
  4    v_cnt BINARY_INTEGER;
  5    v_sql ORA_NAME_LIST_T;
  6    v_rtn CLOB;
  7  BEGIN
  8    v_cnt := ora_sql_txt (v_sql);
  9    FOR l_bit IN 1..v_cnt LOOP
 10      v_rtn := v_rtn || RTRIM (v_sql (l_bit), CHR (0));
 11    END LOOP;
 12    RETURN RTRIM (v_rtn, CHR (10)) || ';';
 13  END;
 14  /

Function created.

SQL> CREATE OR REPLACE TRIGGER trigger_name
  2    BEFORE UPDATE ON emp
  3    FOR EACH ROW
  4  BEGIN
  5    DBMS_OUTPUT.PUT_LINE (cur_sql_txt);
  6  END;
  7  /

Trigger created.

SQL> SET SERVEROUTPUT ON;
SQL> UPDATE emp
  2  SET    empno = empno,
  3         ename = ename
  4  WHERE  ROWNUM = 1;
UPDATE emp
SET    empno = empno,
       ename = ename
WHERE  ROWNUM =
:"SYS_B_0";

1 row updated.

SQL> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T03:56:46.217

为什么不使用审计报告？它允许您监视例如针对表的更新。

# android - 如果 proguard 为 ON，则在生成 .apk 文件时出错

> ID：11627984
> 
> 赞同：2
> 
> 时间：2012-07-24T09:32:01.040
> 
> 标签：android, cordova, proguard, cordova-plugin-proguard

我正在使用 proguard 来混淆代码。我在控制台中收到以下错误

```
Proguard returned with error code 1\. See console
Warning: org.apache.cordova.CameraLauncher: can't find referenced class org.apache.commons.codec.binary.Base64
Warning: org.apache.cordova.CameraLauncher: can't find referenced class org.apache.commons.codec.binary.Base64
Warning: org.apache.cordova.CordovaWebView: can't find referenced method 'WebView(android.content.Context,android.util.AttributeSet,int,boolean)' in class android.webkit.WebView
Warning: org.apache.cordova.CordovaWebViewClient: can't find referenced method 'android.webkit.WebResourceResponse shouldInterceptRequest(android.webkit.WebView,java.lang.String)' in class android.webkit.WebViewClient
Warning: org.apache.cordova.CordovaWebViewClient: can't find referenced class android.webkit.WebResourceResponse
Warning: org.apache.cordova.CordovaWebViewClient: can't find referenced class android.webkit.WebResourceResponse
Warning: org.apache.cordova.CordovaWebViewClient: can't find referenced class android.webkit.WebResourceResponse
Warning: org.apache.cordova.CordovaWebViewClient: can't find referenced class android.webkit.WebResourceResponse
Warning: org.apache.cordova.CordovaWebViewClient: can't find referenced class android.webkit.WebResourceResponse
Warning: org.apache.cordova.FileUtils: can't find referenced class org.apache.commons.codec.binary.Base64
Warning: org.apache.cordova.FileUtils: can't find referenced class org.apache.commons.codec.binary.Base64
Warning: there were 9 unresolved references to classes or interfaces.
          You may need to specify additional library jars (using '-libraryjars').
Warning: there were 2 unresolved references to program class members.
          Your input classes appear to be inconsistent.
          You may need to recompile them and try again.
          Alternatively, you may have to specify the option 
          '-dontskipnonpubliclibraryclassmembers'.
 java.io.IOException: Please correct the above warnings first.
    at proguard.Initializer.execute(Initializer.java:321)
    at proguard.ProGuard.initialize(ProGuard.java:211)
    at proguard.ProGuard.execute(ProGuard.java:86)
    at proguard.ProGuard.main(ProGuard.java:492) 
```

我的**project.properties**文件在这里

```
# This file is automatically generated by Android Tools.
# Do not modify this file -- YOUR CHANGES WILL BE ERASED!
#
# This file must be checked in Version Control Systems.
#
# To customize properties used by the Ant build system edit
# "ant.properties", and override values to adapt the script to your
# project structure.
#
# To enable ProGuard to shrink and obfuscate your code, uncomment this (available properties: sdk.dir, user.home):
proguard.config=~/Desktop/Android/android-sdk-macosx/tools/proguard/proguard-android.txt:proguard-project.txt

# Project target.
target=android-10 
```

我的**proguard-project.txt**在这里

```
# To enable ProGuard in your project, edit project.properties
# to define the proguard.config property as described in that file.
#
# Add project specific ProGuard rules here.
# By default, the flags in this file are appended to flags specified
# in ${sdk.dir}/tools/proguard/proguard-android.txt
# You can edit the include path and order by changing the ProGuard
# include property in project.properties.
#
# For more details, see
#   http://developer.android.com/guide/developing/tools/proguard.html

# Add any project specific keep options here:

# If your project uses WebView with JS, uncomment the following
# and specify the fully qualified class name to the JavaScript interface
# class:
#-keepclassmembers class fqcn.of.javascript.interface.for.webview {
#   public *;
#} 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T11:27:17.367

我通过在我的**proguard-project.txt中添加它来修复它**

```
-keep public class * extends com.phonegap.api.Plugin 
-keep public class org.apache.cordova.DroidGap 
-keep public class org.apache.cordova.** 
-libraryjars /Users/Nasir/Desktop/libs/commons-codec.jar
-dontwarn android.webkit.* 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T01:43:59.373

您可以将以下内容添加到您的 proguard-project.txt 中。它在 Cordova (PhoneGap) 2.1 上对我有用：

```
-keep public class * extends com.phonegap.api.Plugin 
-keep public class * extends org.apache.cordova.api.Plugin 
-keep public class org.apache.cordova.DroidGap 
-keep public class org.apache.cordova.** 
-libraryjars libs/commons-codec-1.7.jar
-dontwarn android.webkit.*
-dontwarn org.apache.** 
```

# deployment - jboss 7作为部署错误ClassNotFoundException，LinkageError

> ID：11627986
> 
> 赞同：1
> 
> 时间：2012-07-24T09:32:09.793
> 
> 标签：deployment, jboss

从 jboss 4.2.3 迁移。您好，我尝试将 jboss 上的 war 文件部署为 7。我知道部署工作库我部署了其他 war 文件而没有错误，但是这场战争要复杂得多，并且会出现一些错误。下面是来自服务器的eclipse中的错误

```
11:11:12,564 INFO  [org.jboss.as.server.deployment] (pool-1-thread-11) Content added at location D:\liferay-portal-6.1.0-ce-ga1\jboss-7.0.2\standalone\data\content\3a\6447fca9f6c08a7f92ef5e09bca1f993a21a77\content
11:11:12,566 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-1) Starting deployment of "dts.war"
11:11:14,401 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-7) Class Path entry iText-toolbox.jar in "/D:/liferay-portal-6.1.0-ce-ga1/jboss-7.0.2/bin/content/dts.war/WEB-INF/lib/itext-2.1.2.jar"  does not point to a valid jar for a Class-Path reference.
11:11:14,401 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-7) Class Path entry iText-toolbox-2.1.2.jar in "/D:/liferay-portal-6.1.0-ce-ga1/jboss-7.0.2/bin/content/dts.war/WEB-INF/lib/itext-2.1.2.jar"  does not point to a valid jar for a Class-Path reference.
11:11:14,401 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-7) Class Path entry bcmail-jdk14-138.jar in "/D:/liferay-portal-6.1.0-ce-ga1/jboss-7.0.2/bin/content/dts.war/WEB-INF/lib/itext-2.1.2.jar"  does not point to a valid jar for a Class-Path reference.
11:11:14,402 WARN  [org.jboss.as.server.deployment] (MSC service thread 1-7) Class Path entry bcprov-jdk14-138.jar in "/D:/liferay-portal-6.1.0-ce-ga1/jboss-7.0.2/bin/content/dts.war/WEB-INF/lib/itext-2.1.2.jar"  does not point to a valid jar for a Class-Path reference.
11:11:14,505 INFO  [org.jboss.as.jpa] (MSC service thread 1-4) added javax.persistence.api dependency to dts.war
11:11:14,554 WARN  [org.jboss.modules] (MSC service thread 1-8) Failed to define class org.richfaces.skin.SkinBean in Module "deployment.dts.war:main" from Service Module Loader: java.lang.LinkageError: Failed to link org/richfaces/skin/SkinBean (Module "deployment.dts.war:main" from Service Module Loader)
    at org.jboss.modules.ModuleClassLoader.defineClass(ModuleClassLoader.java:401) [jboss-modules.jar:1.0.2.GA]
    at org.jboss.modules.ModuleClassLoader.loadClassLocal(ModuleClassLoader.java:261) [jboss-modules.jar:1.0.2.GA]
    at org.jboss.modules.ModuleClassLoader$1.loadClassLocal(ModuleClassLoader.java:76) [jboss-modules.jar:1.0.2.GA]
    at org.jboss.modules.Module.loadModuleClass(Module.java:590) [jboss-modules.jar:1.0.2.GA]
    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:183) [jboss-modules.jar:1.0.2.GA]
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:361) [jboss-modules.jar:1.0.2.GA]
    at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:310) [jboss-modules.jar:1.0.2.GA]
    at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:103) [jboss-modules.jar:1.0.2.GA]
    at org.jboss.as.web.deployment.jsf.JsfManagedBeanProcessor.deploy(JsfManagedBeanProcessor.java:104)
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:115) [jboss-as-server-7.0.2.Final.jar:7.0.2.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1824) [jboss-msc-1.0.1.GA.jar:1.0.1.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1759) [jboss-msc-1.0.1.GA.jar:1.0.1.GA]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [:1.6.0_15]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [:1.6.0_15]
    at java.lang.Thread.run(Thread.java:619) [:1.6.0_15]
Caused by: java.lang.NoClassDefFoundError: org/richfaces/skin/Skin
    at java.lang.ClassLoader.defineClass1(Native Method) [:1.6.0_15]
    at java.lang.ClassLoader.defineClass(ClassLoader.java:621) [:1.6.0_15]
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:124) [:1.6.0_15]
    at org.jboss.modules.ModuleClassLoader.defineClass(ModuleClassLoader.java:397) [jboss-modules.jar:1.0.2.GA]
    ... 14 more
Caused by: java.lang.ClassNotFoundException: org.richfaces.skin.Skin from [Module "deployment.dts.war:main" from Service Module Loader]
    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:191) [jboss-modules.jar:1.0.2.GA]
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:361) [jboss-modules.jar:1.0.2.GA]
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:333) [jboss-modules.jar:1.0.2.GA]
    at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:310) [jboss-modules.jar:1.0.2.GA]
    at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:103) [jboss-modules.jar:1.0.2.GA]
    at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320) [:1.6.0_15]
    ... 18 more

11:11:14,556 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-8) MSC00001: Failed to start service jboss.deployment.unit."dts.war".POST_MODULE: org.jboss.msc.service.StartException in service jboss.deployment.unit."dts.war".POST_MODULE: Failed to process phase POST_MODULE of deployment "dts.war"
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:121)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1824)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1759)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [:1.6.0_15]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [:1.6.0_15]
    at java.lang.Thread.run(Thread.java:619) [:1.6.0_15]
Caused by: java.lang.LinkageError: Failed to link org/richfaces/skin/SkinBean (Module "deployment.dts.war:main" from Service Module Loader)
    at org.jboss.modules.ModuleClassLoader.defineClass(ModuleClassLoader.java:401)
    at org.jboss.modules.ModuleClassLoader.loadClassLocal(ModuleClassLoader.java:261)
    at org.jboss.modules.ModuleClassLoader$1.loadClassLocal(ModuleClassLoader.java:76)
    at org.jboss.modules.Module.loadModuleClass(Module.java:590)
    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:183)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:361)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:310)
    at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:103)
    at org.jboss.as.web.deployment.jsf.JsfManagedBeanProcessor.deploy(JsfManagedBeanProcessor.java:104)
    at org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:115)
    ... 5 more
Caused by: java.lang.NoClassDefFoundError: org/richfaces/skin/Skin
    at java.lang.ClassLoader.defineClass1(Native Method) [:1.6.0_15]
    at java.lang.ClassLoader.defineClass(ClassLoader.java:621) [:1.6.0_15]
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:124) [:1.6.0_15]
    at org.jboss.modules.ModuleClassLoader.defineClass(ModuleClassLoader.java:397)
    ... 14 more
Caused by: java.lang.ClassNotFoundException: org.richfaces.skin.Skin from [Module "deployment.dts.war:main" from Service Module Loader]
    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:191)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:361)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:333)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:310)
    at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:103)
    at java.lang.ClassLoader.loadClassInternal(ClassLoader.java:320) [:1.6.0_15]
    ... 18 more

11:11:14,558 INFO  [org.jboss.as.server.controller] (pool-1-thread-11) Deployment of "dts.war" was rolled back with failure message {"Failed services" => {"jboss.deployment.unit.\"dts.war\".POST_MODULE" => "org.jboss.msc.service.StartException in service jboss.deployment.unit.\"dts.war\".POST_MODULE: Failed to process phase POST_MODULE of deployment \"dts.war\""}}
11:11:14,559 INFO  [org.jboss.as.controller] (pool-1-thread-11) Service status report
  Services which failed to start:
      service jboss.deployment.unit."dts.war".POST_MODULE: org.jboss.msc.service.StartException in service jboss.deployment.unit."dts.war".POST_MODULE: Failed to process phase POST_MODULE of deployment "dts.war"

11:11:16,271 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-6) Stopped deployment dts.war in 1711ms 
```

你怎么看，我有两个问题我尝试通过修改 MANIFEST.MF 和 jboss-deployment-structure.xml 来修复 ClassNotFoundException 我把代码放在下面

```
jboss-deployment-structure.xml
<jboss-deployment-structure>
  <deployment>
    <exclusions>  
    </exclusions>
    <dependencies>
    </dependencies>
    <resources>
      <resource-root path="D:\Workspace Liferay\DTS_TRUNK\code\dts\dts-web\target\dts\WEB-INF\lib\richfaces-impl-3.3.3.Final" />
    </resources>
  </deployment>
</jboss-deployment-structure>

MANIFEST.MF
Manifest-Version: 1.0
Class-Path: D:\dts-web\WEB-INF\lib\richfaces-impl-3.3.3.Final.jar 
```

但这不起作用。我究竟做错了什么 ？我也不知道如何解决其他问题 LinkageError。也许有人可以帮助我吗？提前致谢

# visual-studio-2010 - 创建一个在顶部重新安装的服务安装程序

> ID：11627987
> 
> 赞同：2
> 
> 时间：2012-07-24T09:32:12.303
> 
> 标签：visual-studio-2010, windows-services, setup-project

我有一个服务和一个 VS 安装程序/设置项目。

安装程序可以正常安装/注册和卸载/取消注册 Windows 服务。

为了在不卸载的情况下安装，我`RemovePreviousVersions`设置为 True 并在安装项目属性上增加版本，它会提示也更改`ProjectCode`. 所有这些都允许我在前一个之上运行安装程序。

但是，在安装过程中，当它尝试注册服务时，它抱怨服务已经注册“错误 1001。指定的服务已经存在”

我应该在我的安装程序中对此进行测试并且不再注册该服务吗？这感觉不对，因为我希望它在安装新版本之前卸载旧版本。

让我烦恼的是，当我右键单击项目并从 VS 内部选择“安装”时，它完全正确地完成了所有这些操作，甚至无需增加版本等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T09:48:26.337

尝试`custom action - install`在您的设置项目中设置条件：

```
Not (Installed OR PREVIOUSVERSIONSINSTALLED) 
```

您已经在系统中安装了服务，您只需要更新二进制文件。

# sql - 针对大型 SQL Server 表的 2 个类似查询执行不同

> ID：11627990
> 
> 赞同：2
> 
> 时间：2012-07-24T09:32:25.347
> 
> 标签：sql, sql-server

我的数据库中有一个巨大的表，其中包含城市之间的距离。这使我的应用程序能够在选择起始城市时找到世界各地附近的城市。

它包含 4 列：

```
ID, StartCityID, EndCityID, Distance 
```

并包含大约 1.2 亿行。

我已经在 , 上设置了索引`startcityID`，`endcityID`另外一个用于`startcity + distance`, 和`endcity + distance`（这是我第一次真正处理索引，所以不能 100% 确定我是否正确执行）。

无论如何 - 我做了以下两个查询：

```
Select distinct StartCityID
From Distances where EndCityID = 23485 
```

和

```
Select distinct EndCityID 
From Distances where StartCityID = 20045 
```

它们都返回相同数量的`cityID`'，但顶部的需要 35 秒才能完成，底部的则立即返回结果。当我查看索引时，它们似乎被设置为`startCity`以`endCity`相同的方式提供服务。

有谁知道为什么他们的行为可能不同？我很茫然...

注意 - 这可能会提供更多洞察力，但需要 35 秒 - 如果我立即使用相同的 ID 再次按下执行，它也会立即返回结果。

不幸的是，这对我的网站来说还不够好，但它可能是有用的信息。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T09:39:28.093

第二个是覆盖索引，因此速度很快，因为您在 startcity 和 endcity 上有索引。

endcity 上的索引没有覆盖（因为它没有 startcity），因此它要么必须与其他索引连接才能获取数据，要么必须进行键查找，因此需要时间。此外，它必须使用不同的哈希或不同的哈希sor，而第一个不需要这样做，并且数据按给定 startcity 的 endcity 顺序排序。另外，为什么要使用 distinct，你会有 startcity 和 endcity 的重复数据。如果没有 dup 数据删除 distinct。

检查然后计划这些第一个应该是在 endcity + distnace 索引上的索引查找，然后很可能是键查找，它也可以是基于 endcity 的选择性的聚集索引扫描。然后是 hash distinct 或 sort distinct 。

第二个应该只有索引 startcity + endcity 上的索引搜索。

您提到第二次它立即返回是因为数据已经在缓存中。因此尝试以下

dbcc dropcleanbuffers dbcc freeproccache 然后先运​​行第二个查询..

注意：不要在 PROD 服务器和其他 cirtical 服务器上使用这些。在不会影响其他用户的机器上尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T09:41:25.007

你所要做的就是想一想……

你的表有主键吗？它是什么？这是什么意思（有一个主键）？DISTINCT 关键字要求什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T09:45:35.613

试试这个查询（避免 DISTINCT 关键字）

```
Select StartCityID From Distances  group by StartCityID where EndCityID = 23485

Select EndCityID  From Distances  group by EndCityID  where StartCityID = 20045 
```

# android - HTML5 地理位置在 Android 模拟器中不起作用

> ID：11627994
> 
> 赞同：1
> 
> 时间：2012-07-24T09:32:31.640
> 
> 标签：android, html, android-emulator, geolocation

我面临一个奇怪的问题，其中 HTML5 Geolocation 不仅适用于 Android Emulator。我有一个非常简单的代码如下：

```
navigator.geolocation.getCurrentPosition(suc, locFail, { 'enableHighAccuracy': true, 'timeout': 60000, 'maximumAge': 60000 }); 
```

一旦模拟器运行，我会使用 DDMS/telnet geo fix 提供模拟坐标。

但是当它执行上面的代码行时，模拟器就会挂起。在 LogCat 中，我收到通知每个服务正在死亡的消息，然后我收到 Android Emulator Launch 屏幕。除了关闭它并重新启动它之外，我无法对模拟器做任何事情。

Android 版本：2.3.3 ADT 版本：20

模拟器设置：允许模拟位置已启用。使用 GPS 卫星已启用。

相同的代码在我的桌面浏览器上运行良好。任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T16:20:36.953

创建 AVD 时，您将看到两个版本。例如，2.3.3 的目标名称将是 Android 2.3.3 和 Google APIs (Google Inc)。尝试为您的 AVD 选择 Google APIs 版本，看看它是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T10:29:09.953

尝试移动到 AVD 的 Google 地图版本，看看您是否能够看到模拟位置。

# perl - UTF8 字符串部分无法识别

> ID：11627996
> 
> 赞同：0
> 
> 时间：2012-07-24T09:32:38.483
> 
> 标签：perl, unicode, mojolicious

当我从 SQLite3 数据库中获取西里尔文文本时，在某些情况下 perl（或 Mojolicious，或 DBIx::Class - 我真的不知道）无法解码字节流。例如，给定文本：

```
1984г1ф!!11четыре 
```

输出将是：

```
1984г1ф!!11������
1984\x{433}1\x{444}!!11\x{fffd}\x{fffd}\x{fffd}\x{fffd}\x{fffd}\x{fffd} 
```

为什么会这样？如何解决这个问题？

**更新：**我能够追踪这个问题的根源。看起来格式错误的字符串是从网页上的用户输入中获取的，并作为参数发送到 Controller 操作：[code here](http://codepad.org/SKofssg0)。

执行保存操作会产生以下日志：

```
[2012/07/24 14:06:09] [DEBUG] 15703 Mojolicious.Plugin.RequestTimer - POST /admin/node/save (Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:14.0) Gecko/20100101 Firefox/14.0.1).
[2012/07/24 14:06:09] [DEBUG] 15703 Mojolicious.Routes - Routing to a callback.
[2012/07/24 14:06:09] [DEBUG] 15703 Mojolicious.Routes - Routing to controller "MyApp::Admin" and action "save".
Wide character in print at /home/nikita/perl5/lib/perl5/Log/Log4perl/Appender/File.pm line 245.
Wide character in print at /home/nikita/perl5/lib/perl5/Log/Log4perl/Appender/Screen.pm line 39.
[2012/07/24 14:06:09] [DEBUG] 15703 MyApp.Admin - 123123!!!11������������������ 
```

**更新 2：**我使用 Morbo 作为开发服务器，我的应用程序布局包含`meta`标题：

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
```

**更新 3：**奇怪，但*有时*字符串被正确编码和显示：

```
[2012/07/24 14:55:52] [DEBUG] 16451 Mojolicious.Routes - Routing to a callback.
[2012/07/24 14:55:52] [DEBUG] 16451 Mojolicious.Routes - Routing to controller "MyApp::Admin" and action "save".
[2012/07/24 14:55:52] [DEBUG] 16451 MyApp.Admin - 112!!ЫВафывафывп
[2012/07/24 14:55:52] [DEBUG] 16451 Mojolicious.Plugin.RequestTimer - 302 Found (0.326543s, 3.062/s).
[2012/07/24 14:55:52] [DEBUG] 16451 Mojolicious.Plugin.RequestTimer - GET /admin (Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:14.0) Gecko/20100101 Firefox/14.0.1). 
```

如果我第二次做同样的事情，我会得到：

```
[2012/07/24 14:57:30] [DEBUG] 16451 Mojolicious.Routes - Routing to controller "MyApp::Admin" and action "save".
Wide character in print at /home/nikita/perl5/lib/perl5/Log/Log4perl/Appender/File.pm line 245.
Wide character in print at /home/nikita/perl5/lib/perl5/Log/Log4perl/Appender/Screen.pm line 39.
[2012/07/24 14:57:30] [DEBUG] 16451 MyApp.Admin - 112!!��������������������
[2012/07/24 14:57:30] [DEBUG] 16451 Mojolicious.Plugin.RequestTimer - 302 Found (0.362417s, 2.759/s).
[2012/07/24 14:57:30] [DEBUG] 16451 Mojolicious.Plugin.RequestTimer - GET /admin (Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:14.0) Gecko/20100101 Firefox/14.0.1). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T10:46:55.487

“打印中的宽字符”警告让我认为您的输出文件句柄不希望看到 utf-8 字符。

[perldiag](http://perldoc.perl.org/perldiag.html)手册页更详细地解释了Perl 错误和警告。这是关于此警告的内容。

> **%s 中的宽字符**
> 
> (S utf8) Perl 遇到了一个宽字符 (>255)，但它没有预料到它。此警告默认为 I/O（如打印）打开。消除此警告的最简单方法是将 :utf8 层添加到输出中，例如 binmode STDOUT, ':utf8' 。另一种关闭警告的方法是添加 no warnings 'utf8'; 但这通常更接近作弊。通常，您应该使用编码显式标记文件句柄，请参阅 open 和 binmode。

我怀疑您也会从阅读[Perl Unicode 教程](http://perldoc.perl.org/perlunitut.html)（以及[骆驼书第 4 版的](http://shop.oreilly.com/product/9780596004927.do)第 6 章）中受益。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T14:55:21.597

已移除

```
% use utf8; 
```

来自其中一个模板，然后按应有的方式显示该文本。