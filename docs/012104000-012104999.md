# StackOverflow 问答 12104000-12104999

# c# - 为什么即使设置了 RecordSelectionFormula，水晶报告也会获得所有记录？

> ID：12104003
> 
> 赞同：2
> 
> 时间：2012-08-24T06:11:07.720
> 
> 标签：c#, visual-studio-2010, crystal-reports

我正在使用以下代码加载水晶报告。

```
 ConnectionInfo crconnectioninfo = new ConnectionInfo();
        ReportDocument cryrpt = new ReportDocument();
        TableLogOnInfos crtablelogoninfos = new TableLogOnInfos();
        TableLogOnInfo crtablelogoninfo = new TableLogOnInfo();

        Tables CrTables;

        crconnectioninfo.ServerName = "localhost";
        crconnectioninfo.DatabaseName = "dbclients";
        crconnectioninfo.UserID = "ssssssss";
        crconnectioninfo.Password = "xxxxxxx";  

      cryrpt.Load(Application.StartupPath + "\\rpts\\" + dealerInfo.ResourceName);

            CrTables = cryrpt.Database.Tables;

            foreach (CrystalDecisions.CrystalReports.Engine.Table CrTable in CrTables)
            {
                crtablelogoninfo = CrTable.LogOnInfo;
                crtablelogoninfo.ConnectionInfo = crconnectioninfo;
                CrTable.ApplyLogOnInfo(crtablelogoninfo);
            }

            cryrpt.RecordSelectionFormula = getCustInfoRptSelection();
            cryrpt.Refresh();

            allReportViewer.ReportSource = cryrpt; 
```

getCustInfoRptSelection() 正在获取特定客户，但报告第一次显示所有客户，当我关闭报告并再次打开它时，它显示正确的记录。所以基本上我必须打开报告两次才能获得正确的数据，尽管 getCustInfoRptSelection() 结果没有改变。

在这种情况下， RecordSelectionFormula =" {dealer.dealer_type_id}=2 和 {dealer.DEALER_NAME} 就像' *Mark Stall X* '"

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T14:46:51.033

我遇到了完全相同的问题，我在一个有效的 SAP 网站上找到[了这个答案](http://scn.sap.com/message/8179989#8179989)

1.  展开`Form1.vb|cs`以显示`Form1.Designer.vb|cs`并双击它以显示其代码

2.  查找在方法`crystalReportViewer1`中设置初始属性的位置`InitializeComponent`

3.  注释掉或删除以下两行：

    ```
    this.crystalReportViewer1.SelectionFormula = ""
    this.crystalReportViewer1.ViewTimeSelectionFormula = "" 
    ```

显然这是在他们的一个较新的服务包中添加的东西，因为这个问题直到我升级了 .Net 的 Crystal Reports 框架之后才开始发生

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-17T08:02:52.437

这一个钉了它。找到包含 CrystalReportViewer 控件的 Windows 窗体。

通常，您的 Windows 窗体具有 Resx 文件和设计器文件

例子： [![在此处输入图像描述](../Images/dd61f02be1fa8d5b0257c675efc53856.png)](https://i.stack.imgur.com/jfYA3.png)

打开设计器文件：

删除以下两行：

[![在此处输入图像描述](../Images/dd9eb88960874f78a9358da8e05c5e94.png)](https://i.stack.imgur.com/MM30C.png)

我认为这是一个错误。我正在使用 VS2015 VB.NET。

有效！

# python - 编写 socks5 代理时如何处理多个请求？

> ID：12104005
> 
> 赞同：0
> 
> 时间：2012-08-24T06:11:15.790
> 
> 标签：python, proxy, web

最近，我尝试用python编写socks5服务器。你可以[在这里](https://github.com/baiyang/lab/blob/master/socks5/socks5.py)看到。

我开始思考一个问题。如何处理来自浏览器的多个请求？在这个版本中，我使用多个线程来处理它。如果我不想使用多线程，我该如何设计代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:17:56.113

看一下[`select`](http://docs.python.org/library/select.html#module-select)模块。特别看[`select()`](http://docs.python.org/library/select.html#select.select) 功能。

`select()`是相当低级的。另一种选择是标准的 Python[`asyncore`](http://docs.python.org/library/asyncore.html#module-asyncore)模块。查看示例 echo server 以了解它的易用性。

# android - ListView 与 EditText 视图问题

> ID：12104008
> 
> 赞同：0
> 
> 时间：2012-08-24T06:11:30.250
> 
> 标签：android

我有 ListView，其中包含要编写的文本和 EditText。

这里我的问题是在单击底部的项目时我看不到editText，

因此，请建议我在键盘出现时如何向上滚动总数。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:41:05.100

也许你会为 EditText 的 ParentView 设置一个 xml 参数 "android:descendantFocusability="beforeDescendants"。

# ssas - 部署 SSAS Cube 的凭据

> ID：12104009
> 
> 赞同：1
> 
> 时间：2012-08-24T06:11:31.827
> 
> 标签：ssas, cube, olap-cube

我正在使用 SSAS 多维数据集开发 DW。在开发过程中，我的 Cube 托管在开发服务器 (Windows Server 2003) 上的 SQL SERVer 2008R2 上。

现在，进入开发阶段后，我需要在测试服务器上托管多维数据集，该服务器将位于我无法访问的远程位置。

我可以在服务器上托管它的可能方式是什么，请记住，如果需要，我需要从 BIDS Studio 重新部署在服务器上（当出现一些错误时）。

我需要什么凭据（如果我必须拥有 SQL sys 权限或该域中的 Windows 帐户，它会这样做吗）？

提前致谢！！1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:35:41.887

理论上你不应该担心它，当然考虑到你有一个可以访问目标服务器的人。

您永远不应该使用 BIDS 来部署您的多维数据集，例如它不能处理分区或安全性。每个部署都会覆盖目标服务器的这些管理设置。

相反，您应该使用部署向导来创建脚本，然后将其发送给负责部署的人员。

如果您需要有关部署向导的更多信息，请查看我在[这篇](https://stackoverflow.com/questions/10742738/how-to-do-deployment-using-alter-script-in-ssas/10745152#10745152)文章中的回答

# actionscript-3 - 如何创建这样的圆形布局

> ID：12104012
> 
> 赞同：0
> 
> 时间：2012-08-24T06:11:48.407
> 
> 标签：actionscript-3, blackberry-playbook, playbook

![在此处输入图像描述](../Images/e081ad8148d69226637c31782cafda3b.png)

如何创建圆形可滚动布局。

我尝试在 Group & 中添加所有图标而不是尝试旋转它，但由于边缘粗糙而没有成功。

我尝试旋转图像并根据此图像旋转，我尝试设置图标的位置。

有没有其他选择可以完美地做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T12:20:13.693

将圆圈及其图标放入影片剪辑中，并确保其注册点与圆圈的中心相匹配。然后，您可以旋转该影片剪辑。为了避免锯齿，您可以在位图的属性中启用“允许平滑”。对于向量，您可以启用提示。此外，为了避免混叠，将对象放置在整数坐标上通常是一个好主意。因此，对影片剪辑及其内容的 x、y 坐标进行四舍五入（在旋转后循环它们）也可能会有所帮助。

# iphone - 保管箱集成 iphone

> ID：12104016
> 
> 赞同：1
> 
> 时间：2012-08-24T06:12:06.117
> 
> 标签：iphone, ios, dropbox

我是 iPhone 的初学者。我想在我的应用程序中集成 Dropbox Api 以上传 .pdf 文件和图像。但是经过长时间的谷歌搜索，没有找到任何好的教程。

请给我任何教程链接。或任何示例链接，我可以在其中获取有关如何集成保管箱和上传文件的信息。

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T06:17:08.323

**要求：**

1.  您需要 4.0 版本的 iPhone SDK。您的 XCode 版本至少应为 3.2.3。
2.  您需要注册为具有[移动访问权限](http://dropbox.com/developers)的 Dropbox 应用程序。你应该有一个消费者密钥和秘密。
3.  您需要下载[Dropbox sdk](https://www.dropbox.com/developers/releases)

有关更多详细信息和示例，请参阅[此](http://programmaticallytakingscreenshot.blogspot.in/2011/04/dropbox-integration-in-iphone.html)链接。

# sql - 从无限的层次结构中选择孩子

> ID：12104020
> 
> 赞同：3
> 
> 时间：2012-08-24T06:12:20.267
> 
> 标签：sql, sql-server, sql-server-2008

我有一个这样的 SQL 表

```
ID    | ParentID
1     | null
2     | null
3     | null
4     | 1
5     | 4
6     | 5
7     | 6
8     | 7
9     | 8 
```

现在，如您所见，维护了子父关系。我想要一个查询来选择给定 ID 的“所有级别”子级。

假设如果我输入`ID = 1`，结果应该是

```
ID    | ParentID
1     | null
4     | 1
5     | 4
6     | 5
7     | 6
8     | 7
9     | 8 
```

因此，所有直系子女，以及任何级别的子女的子女，都应该出现。

是否可以在 MS SQL 服务器中执行此操作？我有 MS-SQL 服务器 2012。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T06:33:24.680

这是一个带有额外字段名称的示例，但使用 CTE 递归很简单：

```
DECLARE @ID int

SET @ID = 1;

WITH CTE_Table_1
(
  ID,
  Name,
  ParentID,
  TreeLevel
)
AS(
 SELECT 
  ID,
  Name,
  ParentID,
  0 AS TreeLevel
 FROM Table_1
 WHERE ID = @ID

UNION ALL

 SELECT 
  T.ID,
  T.Name,
  T.ParentID,
  TreeLevel + 1
 FROM Table_1 T
 INNER JOIN CTE_Table_1 ON CTE_Table_1.ID = T.ParentID
)

SELECT * FROM CTE_Table_1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T06:19:37.173

试试这个工作正常：[http ://www.sqlteam.com/Forums/topic.asp?TOPIC_ID=101053](http://www.sqlteam.com/Forums/topic.asp?TOPIC_ID=101053)

```
-- Structure
create table dbo.MyPeople (Id int, Name varchar(30), ParentId int)

-- Data
insert dbo.MyPeople
          select 1, 'P1', null
union all select 2, 'P2', null
union all select 3, 'P1C1', 1
union all select 4, 'P1C2', 1
union all select 5, 'P2C1', 2
union all select 6, 'P1C2C1', 4
union all select 7, 'P1C1C1', 3
union all select 8, 'P1C1C1C1', 7
union all select 9, 'P2C1C1', 5
union all select 10, 'P1C3', 1
go

-- Function
create function dbo.AncestorPath(@Id int) returns varchar(100) as
begin
    declare @Path varchar(100)
    while 0 = 0
    begin
        select @Path = cast(Id as varchar(5)) + isnull('/' + @Path, ''), @Id = ParentId
        from dbo.MyPeople where Id = @Id

        if @@rowcount = 0 break
    end

    return @Path
end
go

-- Calculation
select * from (
    select *, dbo.AncestorPath(Id) as AncestorPath from dbo.MyPeople) a
where '/' + AncestorPath + '/' like '%/1/%' 
```

或者

尝试这样的递归过程

```
ALTER PROCEDURE dbo.GetChildren
@ParentId int

AS

SET NOCOUNT ON

SELECT * 
FROM MainTable 
WHERE ChildId IN 
(
SELECT ParentId 
FROM f_GetChildren(@ParentId)
UNION
SELECT ChildId
FROM f_GetChildren(@ParentId)
)
ORDER BY ParentId

SET NOCOUNT OFF
RETURN 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T06:17:04.987

从 SQL Server 2005 开始，[公共表表达式](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx)已添加到 SQL Server 的 T-SQL 中，可帮助您进行此类分层查询。这就是你要找的！

# java - Java中的i18n - 将键转换为枚举/未使用的键

> ID：12104021
> 
> 赞同：0
> 
> 时间：2012-08-24T06:12:26.617
> 
> 标签：java, eclipse, properties, internationalization, translation

**问题：** 我有带有翻译的属性文件和非常简单的 API，允许我通过密钥（标准）调用标签。我使用 Eclipse IDE for java。

1.  我希望能够找到不再使用的密钥（一些工具支持）
2.  我想确保代码中使用的每个键在属性文件中都有其等效项。

    广告 2。我要将所有键更改为枚举，以便编译器告诉我是否缺少任何翻译。在代码中有类似的东西：

    ```
    translations.getTranslation("key")
    ```

    我想要：

    ```
    translations.getTranslation(TranslationEnum.KEY)
    ```

也许您知道任何可以帮助我的 API/工具？任何其他想法如何做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:42:57.547

IntelliJ IDE 显示属性文件中未使用的键，并将源代码中键的使用链接到属性文件。因此，您可以查看密钥是否存在。

这是一个非常酷的 IDE，但不是免费的。

所以在我的项目中，我决定使用[gettext](http://code.google.com/p/gettext-commons/wiki/Tutorial)进行翻译工作，我对此很满意。

1.  解析所有源并提取翻译候选。
2.  源中没有无意义的键，但如果缺少翻译，将显示有意义的基本文本。
3.  支持 Maven 和 Ant。
4.  源代码和翻译文件中的翻译注释，以帮助翻译人员。
5.  现有的翻译工具，如[poEdit](http://www.poedit.net/)
6.  开箱即用的强大复数处理

# php - PHP 邮件 - 一个特定的发件人地址 - 电子邮件永远不会到达

> ID：12104031
> 
> 赞同：0
> 
> 时间：2012-08-24T06:13:14.997
> 
> 标签：php, email, sendmail

我正在使用 PHP 使用邮件发送电子邮件。现在我发送它的发件人地址是我的域。这在从任何电子邮件地址@所述域（例如 abc@domain.com、fff@domain.com）发送时工作正常，但它们是 1 个无法正常工作的特定地址。

当我从电子邮件reports@domain.com（这是一个存在的电子邮件帐户）发送它时，错误日志看起来很好，但电子邮件永远不会到达。不在垃圾邮件或任何东西中。

为什么某个发件人的电子邮件地址会失败？我不确定这是否是 sendmail 或 PHP 的问题。

我检查了报告电子邮件帐户的设置，它们看起来都与其他所有有效的帐户相同，所以我不确定从哪里开始查找。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:20:40.943

请检查您的邮件服务器和域的反向 DNS、SPF 和域密钥

使用以下#

*   [去抖器](http://www.debouncer.com/reverse-dns-check)
*   [MX工具箱](http://www.mxtoolbox.com/)
*   [进入DNS](http://www.intodns.com)

# asp.net-mvc-3 - Entity Framework - Connection string - Keyword not supported 'Data Source'

> ID：12104036
> 
> 赞同：4
> 
> 时间：2012-08-24T06:13:42.380
> 
> 标签：asp.net-mvc-3, entity-framework-4, connection-string

I know this is a common issue faced by beginners in EF and there have been multiple questions and answers on the same here, but still I have not been able to still resolve the issue.

I am using EF 4.1 and MVC 3 and have generated the EF model from the DB in a separate library. I have copied the connection string from the app.config in the supporting library to the web.config of my application. I am also instantiating the object context by passing the web.config connection string.

```
string connectionString = System.Configuration.ConfigurationManager.ConnectionStrings["MasterDataContainer"].ConnectionString;

context = new MasterDataContainer(connectionString); 
```

The connection string in web.config is as below

```
<connectionStrings>    
    <add name="MasterDataContainer" connectionString="metadata=res://*/MasterData.csdl|res://*/MasterData.ssdl|res://*/MasterData.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=.;Initial Catalog=MasterData;Integrated Security=True;MultipleActiveResultSets=True;Application Name=EntityFramework&quot;" providerName="System.Data.EntityClient" />
</connectionStrings> 
```

I am getting the error "Keyword not supported : data source". Any help on this is appreciated.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T06:18:32.847

You don't need the `EntityConnectionStringBuilder` since you already have an EF connection string. i.e. just

```
string connectionString = System.Configuration.ConfigurationManager.ConnectionStrings["MasterDataContainer"].ConnectionString;
context = new MasterDataContainer(connectionString); 
```

`EntityConnectionStringBuilder` can be used to build up an EF connection from e.g. a vanilla .NET one.

**Edit** It looks like you've encountered this problem [here](http://blogs.msdn.com/b/rickandy/archive/2008/12/09/explicit-connection-string-for-ef.aspx). The workaround is to escape the load the connection string and then replace the `&quot;` with `"'"`

What might be easier altogether is to use the [`name=ConnStringName`](http://msdn.microsoft.com/en-us/library/bb739017.aspx) overload of ObjectContext / DbContext. In your case, this would be

```
context = new MasterDataContainer("name=MasterDataContainer"); 
```

Note also if you view the source of the generated Context (probably `MasterDataContainer.Context.cs`) that the default constructor should have the EntityContainerName property hardcoded into it, so you might not need to provide a connectionstring at all to the constructor, provided that you keep the same EntityContainerName.

[http://msdn.microsoft.com/en-us/library/bb739017.aspx](http://msdn.microsoft.com/en-us/library/bb739017.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-10T05:00:54.390

easiest way to solve this issue is rewrite your EF conn string (replacing the *amp;* and *quot;*):

from ORIGINAL

```
<add name="Entities" connectionString="metadata=res://*/EntityModel.csdl|res://*/EntityModel.ssdl|res://*/EntityModel.msl;provider=System.Data.SqlClient;provider connection string=&quot;metadata=res://*/EntityModel.csdl|res://*/EntityModel.ssdl|res://*/EntityModel.msl;provider=System.Data.SqlClient;provider connection string=&amp;quot;data source=<SERVER\INSTANCE>;initial catalog=<BDD>;integrated security=True;MultipleActiveResultSets=True;App=EntityFramework&amp;quot;&quot;" providerName="System.Data.EntityClient" /> 
```

to FIXED

```
<add name="Entities" connectionString="metadata=res://*/EntityModel.csdl|res://*/EntityModel.ssdl|res://*/EntityModel.msl;provider=System.Data.SqlClient;provider connection string='metadata=res://*/EntityModel.csdl|res://*/EntityModel.ssdl|res://*/EntityModel.msl;provider=System.Data.SqlClient';provider connection string='data source=<SERVER\INSTANCE>;initial catalog=<BDD>;integrated security=True;MultipleActiveResultSets=True;App=EntityFramework;'" providerName="System.Data.EntityClient" /> 
```

Just change then **Entities** name and the tags **SERVER\INSTANCE** and **BDD** with your values and that's it.

I hope this saves you a few days of research. Enjoy!

# php - 管理mysql中更改记录的审计跟踪的方法

> ID：12104039
> 
> 赞同：1
> 
> 时间：2012-08-24T06:13:56.317
> 
> 标签：php, mysql

我正在构建一个应用程序。它基本上是一个电子商务订单履行应用程序。在此审计试验中，即谁更改了哪些内容以及更改了多少次，以及其他人是一个重要方面。我应该如何在数据库/表级别维护它？假设如果记录被 3 人更改，我将如何维护所有更改并跟踪谁更改了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T07:57:34.757

首先，您需要为要跟踪的每个表创建如下结构：

```
create table user_track_logs {

    id bigint(20) primary key auto_increment,
    key_id int (11),
    user_id (int),
    created timestamp default now(),
    field varchar(128)// set bigger if you have long named columns (like this_columns_is_very_important_for_me_and_my_employers...)
    field_value_was text null,
    field_value_new text null,    
} 
```

其次，您需要在 MySQL 的连接中的 var 中设置当前用户 ID，或者您可以使用 MySQL 的用户。您可以为每个用户创建单独的 MySQL 登录。

第三个创建触发器插入/更新/删除将存储在`user_track_logs`.

或者你可以在 PHP 中模拟这个过程，但是在 PHP 中会更加困难。

# cloudbees - CloudBees 中 Web 应用程序之间的默认或自定义域名地址 run@cloud

> ID：12104040
> 
> 赞同：0
> 
> 时间：2012-08-24T06:14:02.033
> 
> 标签：cloudbees

我有多个在 CloudBees run@cloud 中运行的 Web 应用程序。我需要使用 HTTP 在这些应用程序之间进行通信。我也为所有这些应用程序配置了 SSL 路由器和自定义域名。我应该在通信中使用自定义域名还是默认的 xxx.cloudbees.net 地址？

我知道使用 SSL 可以提供更好的安全性，但我更多地考虑性能、灵活性和数据传输成本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:35:39.043

使用自定义域名只会“消耗”DNS 查找来解析足够的 cloudbees.net 节点。我不认为一个或另一个名称会对性能和网络成本产生任何重大影响，因为 IP 地址已被解析为内部路由。

# ios - Game Center matchData 的良好实践

> ID：12104041
> 
> 赞同：2
> 
> 时间：2012-08-24T06:14:19.923
> 
> 标签：ios, nsdata, game-center, gamekit, nscoding

我是 GKTurnBasedMatch 的新手，我正在尝试找出在回合期间玩家之间发送的“matchData”的良好做法。我发现的所有教程主要涉及发送一串文本，我想发送的远不止这些。如果有人能给我推荐一个更高级的教程，那就太好了。

我想做的一个例子是战斗。两个玩家有他们的头像，他们有不同的细节（健康、攻击、防御等），我应该如何发送这些数据？我认为可能的唯一方法是将所有匹配详细信息（其中很多）编码到 NSDictionary 中并发送，以便它们可以再次放回自定义匹配对象中。我应该实施 NSCoding 吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T06:41:52.357

我将实现一个类来存储单回合所需的所有相关信息，并让该类实现 NSCoding。这意味着您可以在一个播放器的设备上将对象转换为 NSData，然后将其转换回另一端的对象。

这个网站[http://samsoff.es/posts/archiving-objective-c-objects-with-nscoding](http://samsoff.es/posts/archiving-objective-c-objects-with-nscoding)有一个简单的例子来帮助你，这里是你需要的主要方法的例子：

```
- (id)initWithCoder:(NSCoder *)decoder {
    if (self = [super init]) {
        self.health = [decoder decodeObjectForKey:@"health"];
        self.attack = [decoder decodeObjectForKey:@"attack"];
        isDead = [decoder decodeBoolForKey:@"isDead"];
    }
    return self;
}

- (void)encodeWithCoder:(NSCoder *)encoder {
    [encoder encodeObject:self.health forKey:@"health"];
    [encoder encodeObject:self.attack forKey:@"attack"];
    [encoder encodeBool:isDead forKey:@"isDead"];
 } 
```

将您的对象编码为 NSData：

```
NSData *data = [NSKeyedArchiver archivedDataWithRootObject: object]; 
```

转换回对象：

```
id *object = [NSKeyedUnarchiver unarchiveObjectWithData: inputData]; 
```

[Archives and Serializations Programming Guide](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Archiving/Archiving.html#//apple_ref/doc/uid/10000047i)也是一个很好的起点。

另一种选择是使用像 RestKit 这样的库，它是与 JSON 或 XML 的对象映射。

# c++ - 分析特定函数 C++

> ID：12104043
> 
> 赞同：3
> 
> 时间：2012-08-24T06:14:34.903
> 
> 标签：c++, profiling

我研究过gprof。但不太明白如何实现以下目标：

我写了一个聚类程序。在每次迭代中，重复调用 4 个函数。大约有 100000 次迭代需要完成。我想知道每个函数花费了多少时间。
这些函数可能会调用其他子函数，并且可能涉及哈希图、地图等数据结构。但我不关心这些子函数。我只想知道所有这些父函数在所有迭代中花费了多少总时间。这将帮助我更好地优化我的程序。

gprof 的问题在于，它会分析每个函数。因此，甚至 stl 数据结构的功能也被考虑在内。

目前我正在使用clock_gettime。对于每个函数，我输出每次迭代所花费的时间。然后我操作这个输出文件。为此，我必须输入大量分析代码。分析代码使我的代码看起来非常复杂，我想避免它。这在行业中是如何做到的？

有没有更简单的方法来做到这一点？

如果您有其他更清洁的方法，请告诉我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T07:50:49.947

如果我理解正确，您感兴趣的是在您感兴趣的四个目标函数上花费了多少时间，而不是这些函数调用的任何子函数。

此信息在 gprof 的“flat”配置文件中的“self seconds”下提供。或者，如果您正在查看调用图，则此时间位于“自我”列中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T07:45:13.660

我会看看[遥测](http://www.radgametools.com/telemetry.htm)。它主要针对想要比较每帧数据的游戏开发人员，但它似乎非常适合您的要求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T11:42:52.900

您想要这 4 个功能的自时间，因此您可以专门优化它们。

`gprof`将向您显示，占总时间的百分比。假设它是 10%。如果是这样，即使您能够将其优化到 0%，您也会获得 100/90 = 1.11 的加速因子，或 11% 的加速比。如果花了 100 秒，那太慢了，那么 90 秒也太慢了。

但是，这些函数所花费的*包容性*（自身加被调用者）时间可能要大得多，即 80% 来选择一个数字。如果是这样，您可以通过减少对这些被调用者的调用来进一步优化它。或者，您可能会发现被调用者花费了很大一部分做您严格不需要做的事情，例如为了一般性而测试他们的论点，在这种情况下，您可以用临时例程替换它们。

事实上，严格来说，没有自我时间这样的东西。即使是找到程序计数器的最简单指令实际上也是对微码子程序的调用。

[以下是对这些问题的一些讨论和建设性建议。](https://stackoverflow.com/a/1779343/23771)

# unix - 与文件一一对应 - 在 unix 中 - 日志文件

> ID：12104058
> 
> 赞同：0
> 
> 时间：2012-08-24T06:15:43.340
> 
> 标签：unix, logging, filesystems, inode

我正在编写一个 Log Unifier 程序。也就是说，我有一个生成日志的系统：my.log、my.log.1、my.log.2、my.log.3...

我希望在每次迭代中存储我从某个文件中读取的行数，以便在下一次迭代中 - 我可以从那个地方继续阅读。

问题是当文件已满时，它们会滚动：最后一个日志被删除...... my.log.2 变为 my.log.3 my.log.1 变为 my.log.2 my.log 变为 my.log .1 并创建一个新的 my.log

我当然可以使用 inode 跟踪它们——这几乎是与文件的一对一对应。

我说“几乎”，因为我担心以下情况：在我的两次迭代之间 - 一些文件被删除（假设日志记录非常快），然后是新文件被创建并且一些文件的 inode 刚刚被删除。现在的问题是 - 我会将这些文件误认为是旧文件 - 并从第 500 行（例如）而不是 0 开始读取。

所以我希望找到一种方法来解决这个问题——这里有几个我想到的方向——可以帮助你帮助我：

1.  除 inode 之外的另一个 1 对 1 对应关系。

2.  标记文件的能力。我考虑过使用 chmod +x 将文件标记为现有文件，对于没有这些权限的新文件-我会知道它们是新的-但是如果有人要手动更改权限，那会混淆我的程序. 所以如果你有任何其他的方法来标记。

3.  我考虑过创建指向文件的软链接，当文件被删除时会被删除。这样我就可以知道哪些文件被删除了。

4.  任何获取“创建日期”的方法

5.  想到的任何想法——也许以某种巧妙的方式使用时间戳、atime、ctime、mtime——一切都会很好，只要它们能让我知道哪些文件是新的，或者任何创建一对一文件的想法文件的对应关系。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T18:02:39.770

我可以想到几个替代方案：

*   使用[POSIX 扩展属性](http://en.wikipedia.org/wiki/Extended_file_attributes)来存储有关您的程序可用于其操作的每个日志文件的元数据。

*   旧日志文件的内容在归档后没有被修改应该是一个安全的假设，即在`my.log`变为之后`my.log.1`。您可以为每个文件（例如 SHA-256）生成一个哈希来唯一标识它。

*   所有体面的日志格式都在每个条目中嵌入了时间戳。您可以在文件中使用第一个条目的时间戳 - 甚至整个条目本身 - 用于识别目的。日志文件通常会定期滚动，这将确保每个文件的起始时间戳不同。

# javascript - Galleria 起始图像滑回第一张图像

> ID：12104060
> 
> 赞同：2
> 
> 时间：2012-08-24T06:16:11.610
> 
> 标签：javascript, jquery, image-gallery, galleria

我在我的网站上使用 Galleria 图片库。问题是：当我第一次运行 Galleria 时，初始图像不是第一个，Galleria 会显示初始图像片刻，然后滑回第一张图像。当我点击更多拇指时，Galleria 会正确运行，所以这只是第一次发生。这是我用来初始化 Galleria 的代码：

```
$('.thumbnail').live('点击', function(){   

            var image_number = getNumber($(this).attr('id'));
            Galleria.ready（功能（选项）{
                this.show(image_number);
            });
            Galleria.run('#galleria');
            $('#galleria_frame').show();    
           });

```

getNumber 是我的函数，它返回图库中图像的数量，第一张图像的编号为 0，第二张图像的编号为 1，等等。
我的错误在哪里？为什么我第一次点击 .thumbnail 时，Galleria 会滑回第一张图片？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T17:56:14.450

您的代码有几个问题。

1）您正在多次初始化 Galleria（每次单击缩略图时）

2）您正在向`ready`事件添加多个侦听器，每次您告诉 Galleria 在加载时显示不同的图像。

试试这个：

```
$('.thumbnail').live('click', function(){   
    var image_number = getNumber($(this).attr('id')),
        instance = $('#galleria').data('galleria');

    // if Galleria already loaded, just show the index:
    if (instance) {
        instance.show(image_number);
    } else {
    // else fire up Galleria and pass the index as an option
        $('#galleria_frame').show();
        Galleria.run('#galleria', { show: image_number });
    }
}); 
```

# cordova - phonegap config.xml 文件是否支持启动视频而不是启动 png？

> ID：12104061
> 
> 赞同：0
> 
> 时间：2012-08-24T06:16:25.027
> 
> 标签：cordova, sencha-touch-2

我已经使用 sencha touch2 完成了应用程序，**使用 phone gap build 我正在打包这些文件。**现在我可以在启动应用程序期间显示启动 .png 图像。但是我需要在启动应用程序时向用户显示启动视频。所以我添加了代替源图像路径添加的视频路径而不是启动视频。**我想知道电话间隙是否支持启动视频？**如果它支持意味着它将支持哪种类型的视频格式。谁能告诉我如何实现这一目标。

**这是启动图像的代码：Config.xml(Working)**

```
<?xml version="1.0" encoding="UTF-8" ?>
    <widget xmlns = "http://www.w3.org/ns/widgets"
        xmlns:gap = "http://phonegap.com/ns/1.0"
        id        = "com.phonegap.example"
        versionCode="10" 
        version   = "1.0.0">
    <!-- versionCode is optional and Android only -->
    <name>ABC</name>
<gap:splash src="resources/splash/def.png" width="1024" height="768" />
<gap:splash src="resources/splash/def.png" gap:platform="android" gap:density="ldpi" />
<icon src="resources/icons/xyz.png" gap:platform="ios" width="80" height="80" />
<icon src="resources/icons/xyz.png" gap:platform="android" gap:density="ldpi" width="100"  height="100"/> 
</widget> 
```

**这是 Splash 视频的代码：config.xml（不工作）**

```
<?xml version="1.0" encoding="UTF-8" ?>
    <widget xmlns = "http://www.w3.org/ns/widgets"
        xmlns:gap = "http://phonegap.com/ns/1.0"
        id        = "com.phonegap.example"
        versionCode="10" 
        version   = "1.0.0">
    <!-- versionCode is optional and Android only -->
    <name>ABC</name>
<gap:splash src="resources/splash/AVIFile.avi.mp4" width="1024" height="768" />
<gap:splash src="resources/splash/AVIFile.avi.mp4" gap:platform="android" gap:density="ldpi" />
<icon src="resources/icons/xyz.png" gap:platform="ios" width="80" height="80" />
<icon src="resources/icons/xyz.png" gap:platform="android" gap:density="ldpi" width="100"  height="100"/> 
</widget> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T04:47:40.660

这对我来说很好

```
 <?xml version="1.0" encoding="UTF-8"?>
<widget xmlns     = "http://www.w3.org/ns/widgets"
        xmlns:gap = "http://phonegap.com/ns/1.0"
        id        = "com.media.myappindia"
        version   = "2.0.1">
    <title>myappindia</title>   
    <name>myappindia</name>

    <description>
        myappindia - my 1st app
    </description>

    <author href="http://www.myappindia.com/" email="android@myappindia.com">
        myappindia Team
    </author>

    <feature name="http://api.phonegap.com/1.0/device" />

    <preference name="phonegap-version" value="2.0.0" />
    <preference name="orientation"      value="default" />
    <preference name="target-device"    value="universal" />
    <preference name="fullscreen"       value="false" />
    <preference name="stay-in-webview" value="true" />

    <icon src="icon.png" />
    <icon src="res/icon/android/icon-36-ldpi.png"   gap:platform="android"    gap:density="ldpi" />
    <icon src="res/icon/android/icon-48-mdpi.png"   gap:platform="android"    gap:density="mdpi" />
    <icon src="res/icon/android/icon-72-hdpi.png"   gap:platform="android"    gap:density="hdpi" />
    <icon src="res/icon/android/icon-96-xhdpi.png"  gap:platform="android"    gap:density="xhdpi" />
    <icon src="res/icon/blackberry/icon-80.png"     gap:platform="blackberry" />
    <icon src="res/icon/blackberry/icon-80.png"     gap:platform="blackberry" gap:state="hover"/>
    <icon src="res/icon/ios/icon-57.png"            gap:platform="ios"        width="57" height="57" />
    <icon src="res/icon/ios/icon-72.png"            gap:platform="ios"        width="72" height="72" />
    <icon src="res/icon/ios/icon-57-2x.png"         gap:platform="ios"        width="114" height="114" />
    <icon src="res/icon/ios/icon-72-2x.png"         gap:platform="ios"        width="144" height="144" />
    <icon src="res/icon/webos/icon-64.png"          gap:platform="webos" />
    <icon src="res/icon/windows-phone/icon-48.png"  gap:platform="winphone" />
    <icon src="res/icon/windows-phone/icon-173.png" gap:platform="winphone"   gap:role="background" />

    <gap:splash src="res/screen/android/screen-ldpi-portrait.png"  gap:platform="android" gap:density="ldpi" />
    <gap:splash src="res/screen/android/screen-mdpi-portrait.png"  gap:platform="android" gap:density="mdpi" />
    <gap:splash src="res/screen/android/screen-hdpi-portrait.png"  gap:platform="android" gap:density="hdpi" />
    <gap:splash src="res/screen/android/screen-xhdpi-portrait.png" gap:platform="android" gap:density="xhdpi" />
    <gap:splash src="res/screen/blackberry/screen-225.png"         gap:platform="blackberry" />
    <gap:splash src="res/screen/ios/screen-iphone-portrait.png"    gap:platform="ios"     width="320" height="480" />
    <gap:splash src="res/screen/ios/screen-iphone-portrait-2x.png" gap:platform="ios"     width="640" height="960" />
    <gap:splash src="res/screen/ios/screen-ipad-portrait.png"      gap:platform="ios"     width="768" height="1024" />
    <gap:splash src="res/screen/ios/screen-ipad-landscape.png"     gap:platform="ios"     width="1024" height="768" />
    <gap:splash src="res/screen/windows-phone/screen-portrait.jpg" gap:platform="winphone" />

    <access origin="*" />
</widget> 
```

# android - 如何解码通过Base64上传的图像字符串的服务器响应？

> ID：12104063
> 
> 赞同：0
> 
> 时间：2012-08-24T06:16:35.483
> 
> 标签：android

我正在使用 Base64 将我的图像上传到服务器上 -

```
private String convertBitmapToString(ImageView imgview) {
    imgview.buildDrawingCache();
    Bitmap objbmap = imgview.getDrawingCache();
    ByteArrayOutputStream objbitmapArrayStream = new ByteArrayOutputStream();
    objbmap.compress(Bitmap.CompressFormat.JPEG, 90, objbitmapArrayStream);
    byte[] objbitmaparray = objbitmapArrayStream.toByteArray();
    String img_string = Base64.encodeBytes(objbitmaparray);
    return img_string;
} 
```

当我想再次显示该图像时，Php 服务器给我的响应是-

```
 "picture":"\/9j\/4AAQSkZJRgABAQAAAQABAAD\/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT\/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT\/wAARCABGAEcDASIAAhEBAxEB\/8QAHwAAAQUBAQEBAQE" 
```

我无法解码它请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:22:20.447

那么服务器显然会为您提供base64编码的图片，因为在线base64解码器在我解码您的字符串时显示了这一点：

```
�JFIF�������C� 
```

这是正确图像内容的标志，因此只需对其进行解码。

```
BASE64Decoder decoder = new BASE64Decoder();
byte[] decodedBytes = decoder.decodeBuffer(encodedBytes); 
```

# java - 文件大时上传文件错误

> ID：12104067
> 
> 赞同：0
> 
> 时间：2012-08-24T06:16:52.707
> 
> 标签：java, php, android, upload, multipartentity

这是我的代码

```
private Boolean doFileUpload() {
        HttpEntity resEntity;
        String urlString = "http://192.168.1.112/johnson/learn/android/index2.php";
        try {
            HttpClient client = new DefaultHttpClient();
            HttpPost post = new HttpPost(urlString);
            FileBody bin1 = new FileBody(file1);
            FileBody bin2 = new FileBody(file2);
            MultipartEntity reqEntity = new MultipartEntity();
            reqEntity.addPart("uploadedfile1", bin1);
            reqEntity.addPart("uploadedfile2", bin2);
            reqEntity.addPart("user", new StringBody("User"));
            post.setEntity(reqEntity);
            HttpResponse response = client.execute(post);
            resEntity = response.getEntity();
            final String response_str = EntityUtils.toString(resEntity);
            if (resEntity != null) {
                Log.i("RESPONSE", response_str);
                runOnUiThread(new Runnable() {
                    public void run() {
                        try {
                            showToast("Upload Complete. Check the server uploads directory.");
                        } catch (Exception e) {
                            e.printStackTrace();
                        }
                    }
                });
            }
        } catch (Exception ex) {
            Log.e("Debug", "error: " + ex.getMessage(), ex);
        }
        return true; 
    } 
```

当我上传大约 2MB 的文件时它可以工作，但是当我上传 20+MB 文件时出错有人知道错误在哪里吗？（错误 = 数据未上传，但声明已上传）

它表示两者都成功上传。

我的日志猫

```
08-24 13:27:15.725: D/dalvikvm(4221): GC_CONCURRENT freed 324K, 5% free 9538K/9991K, paused 0ms+0ms
08-24 13:27:18.417: I/RESPONSE(4221): <br />
08-24 13:27:18.417: I/RESPONSE(4221): <b>Notice</b>:  Undefined index: uploadedfile1 in <b>C:\xampp\htdocs\Johnson\Learn\android\index2.php</b> on line <b>6</b><br />
08-24 13:27:18.417: I/RESPONSE(4221): <br />
08-24 13:27:18.417: I/RESPONSE(4221): <b>Notice</b>:  Undefined index: uploadedfile1 in <b>C:\xampp\htdocs\Johnson\Learn\android\index2.php</b> on line <b>7</b><br />
08-24 13:27:18.417: I/RESPONSE(4221): There was an error uploading the file, please try again!<br />
08-24 13:27:18.417: I/RESPONSE(4221): <b>Notice</b>:  Undefined index: uploadedfile1 in <b>C:\xampp\htdocs\Johnson\Learn\android\index2.php</b> on line <b>12</b><br />
08-24 13:27:18.417: I/RESPONSE(4221): filename: target_path: uploads/<br />
08-24 13:27:18.417: I/RESPONSE(4221): <b>Notice</b>:  Undefined index: uploadedfile2 in <b>C:\xampp\htdocs\Johnson\Learn\android\index2.php</b> on line <b>16</b><br />
08-24 13:27:18.417: I/RESPONSE(4221): <br />
08-24 13:27:18.417: I/RESPONSE(4221): <b>Notice</b>:  Undefined index: uploadedfile2 in <b>C:\xampp\htdocs\Johnson\Learn\android\index2.php</b> on line <b>17</b><br />
08-24 13:27:18.417: I/RESPONSE(4221): There was an error uploading the file, please try again!<br />
08-24 13:27:18.417: I/RESPONSE(4221): <b>Notice</b>:  Undefined index: uploadedfile2 in <b>C:\xampp\htdocs\Johnson\Learn\android\index2.php</b> on line <b>22</b><br />
08-24 13:27:18.417: I/RESPONSE(4221): filename: target_path2: uploads/<br />
08-24 13:27:18.417: I/RESPONSE(4221): <b>Notice</b>:  Undefined index: user in <b>C:\xampp\htdocs\Johnson\Learn\android\index2.php</b> on line <b>26</b><br />
08-24 13:27:18.417: I/RESPONSE(4221): n String Parameter send from client side : 
```

这是我的 PHP 脚本

```
<?php
$target_path1 = "uploads/";
$target_path2 = "uploads/";
/* Add the original filename to our target path.
Result is "uploads/filename.extension" */
$target_path1 = $target_path1 . basename( $_FILES['uploadedfile1']['name']);
if(move_uploaded_file($_FILES['uploadedfile1']['tmp_name'], $target_path1)) {
    echo "The first file ".  basename( $_FILES['uploadedfile1']['name']).
    " has been uploaded.";
} else{
    echo "There was an error uploading the file, please try again!";
    echo "filename: " .  basename( $_FILES['uploadedfile1']['name']);
    echo "target_path: " .$target_path1;
}

$target_path2 = $target_path2 . basename( $_FILES['uploadedfile2']['name']);
if(move_uploaded_file($_FILES['uploadedfile2']['tmp_name'], $target_path2)) {
    echo "n The second file ".  basename( $_FILES['uploadedfile2']['name']).
    " has been uploaded.";
} else{
    echo "There was an error uploading the file, please try again!";
    echo "filename: " .  basename( $_FILES['uploadedfile2']['name']);
    echo "target_path2: " .$target_path2;
}

$user = $_REQUEST['user'];
echo "n String Parameter send from client side : " . $user;
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:33:59.863

在这两种情况下，您的文件很可能确实已正确上传。但目标 URL 是 PHP 脚本。PHP 有一个限制（可以在 PHP 选项中设置）它在帖子中接受多少数据（不记得默认值，但它非常低）。

调查脚本可以接受多少数据。

# javascript - 如何查看元素是否为“br”

> ID：12104075
> 
> 赞同：4
> 
> 时间：2012-08-24T06:17:20.710
> 
> 标签：javascript, jquery

如何查看元素是否为“br”？我试图通过 .attr("type") 和 .type() 得到它，但它总是返回未定义！它适用于输入或按钮，但不适用于 br 元素。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T06:19:07.230

使用`.tagName`or`.nodeName`属性。然后将该值与 进行比较`"BR"`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-24T06:18:09.430

刚刚怎么样`$(element).is('br')`？例如：

```
<div class='tested' id='first'>
  <br class='tested' id='second' />
</div>

...
$('.tested').each(function() {
  var id = this.id;   
  if ($(this).is('br')) {
    console.log(id + ' is <br>');
  }
  else {
    console.log(id + ' is not <br>');
  }
});
// first is not <br>
// second is <br>​ 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-24T06:22:16.150

通过`element.tagName`您可以获得标签的名称

```
if (element.tagName=="br") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T06:33:01.257

```
<div id="test">
    <br>
</div> 
```

--

```
var tag = $("#test").children().first().prop('tagName'); //returns BR 
```

[小提琴](http://jsfiddle.net/jCsyC/1/)

```
var isTag = $("#test").children().first().is('br');  //returns true/false 
```

[小提琴](http://jsfiddle.net/jCsyC/2/)

# nginx - 如何在 nginx 中使用 http auth 和两个域只进行一次身份验证？

> ID：12104076
> 
> 赞同：3
> 
> 时间：2012-08-24T06:17:26.620
> 
> 标签：nginx, http-authentication

我有一个需要 2 个域的站点：一个用于动态内容，另一个用于静态内容。

在暂存环境中，我需要它来询问用户和密码，因为我不希望随机的人或机器人可以访问它。我为此使用了 http_auth。

问题是当您尝试访问时，它会要求您提供两次凭据：每个域一次。这很烦人。

我怎样才能避免这种情况？

# iphone - 核心文本 - 如何增长 UIView？

> ID：12104081
> 
> 赞同：0
> 
> 时间：2012-08-24T06:17:46.663
> 
> 标签：iphone, resize, core-text

我正在使用核心文本（用于文本出血/换行效果）。由于主体`UIView`必须随着放置在视图上的文本和图像而增长，我希望我`UIView`相应地调整它的高度。

我尝试`sizeToFit`（在我的`UIView`）根据其内容调整其高度。但是，`UIView`它不会增加它的高度，尽管它可以减少它。

这就是我的层次结构的`UIView`样子：

> [UITextView]
> 
> [UIImageView]（可以是 0 个或多个）

我怎样才能`UIView`根据它的内容调整它的高度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T07:18:37.917

我将文本放在 a 中`UITextView`，然后在`UIView`（使用 CoreText）中显示它，所以我基本上将我的高度设置`UIView`为：

> （文本视图的高度）+（图像的高度）

虽然它不是一个优雅的解决方案，但至少它可以正常工作。

PS：更好的解决方案可能是添加正确比例的高度和宽度（因为文本环绕图像）。

# android - android 的 SQLiteException

> ID：12104088
> 
> 赞同：0
> 
> 时间：2012-08-24T06:18:41.667
> 
> 标签：android, sql, sqlite

```
String insertQuery= "INSERT INTO"+ Table_Name +"(Coloum1, Coloum2, Coloum3, Coloum4,Coloum5,Coloum6,Coloum7,Coloum8,Coloum9) VALUES('fname','lname','dob','address','pin','city','tel','eid','date')" ;       
sd.execSQL(insertQuery); 
```

我想通过这段代码在 sqlite db 中写入，但它会引发异常：

```
08-24 09:51:53.858: E/(595): Exception   android.database.sqlite.SQLiteException: near "INTORegistrationTable11": syntax error: , while compiling: INSERT INTORegistrationTable11(Coloum1, Coloum2, Coloum3, Coloum4,Coloum5,Coloum6,Coloum7,Coloum8,Coloum9) VALUES('fname','lname','dob','address','pin','city','tel','eid','date') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T06:20:19.817

查看它抱怨“INTORegistrationTable11”的 SQL

看到空间不足了吗？

这个：

```
String insertQuery= "INSERT INTO" + Table_Name + "(Coloum1, ... 
```

应该：

```
String insertQuery = "INSERT INTO " + Table_Name + " (Coloum1, ... 
```

仔细阅读错误消息是软件工程的重要组成部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T06:21:13.800

```
String insertQuery= "INSERT INTO "+ Table_Name +" (Coloum1, Coloum2, Coloum3, Coloum4,Coloum5,Coloum6,Coloum7,Coloum8,Coloum9) VALUES('fname','lname','dob','address','pin','city','tel','eid','date')" ; 
```

在 INTO 之后添加一个空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T07:10:09.533

空格，在为 SQL 编写此类字符串时要非常小心，始终确保每个 SQL 符号和单词前后都有适当的空格。另外，为什么不使用内置`insert()`功能并通过 提供您的数据`ContentValues`？

# hibernate - 如何在 Axis2 中使用休眠

> ID：12104104
> 
> 赞同：0
> 
> 时间：2012-08-24T06:20:03.300
> 
> 标签：hibernate, axis2

我想将 Hibernate 与 Axis2 一起使用，以便我可以使用 hibernate 从我的数据库中获取数据并在我的 web 服务中使用该日期。如何在axis2中加载休眠配置。如果有人对此有任何信息，请分享。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:55:47.053

步骤 1\. 像往常一样创建一个 Web 服务类和方法 2\. 使用所有参数创建方法（Hibernate 映射类属性。）.. 在方法内部创建映射类的对象并将所有设置器和表单放在那里调用休眠添加、删除、更新（CRUD） 3.创建服务...

注意：不能在方法中传递对象...因为 Soap 是使用原型传递属性而不是对象的 Xml。

# linux - 在 Linux 网络驱动程序中区分转发流量和本地流量

> ID：12104105
> 
> 赞同：2
> 
> 时间：2012-08-24T06:20:07.920
> 
> 标签：linux, networking, linux-kernel, linux-device-driver

中是否有任何信息`struct skbuff`可以区分转发流量（网桥转发和 ip 转发）和本地发起的流量？我们希望在网络驱动程序中区别对待这两种流量，因为转发流量不需要对整个数据包大小进行缓存失效。

任何建议表示赞赏。非常感谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T16:28:00.573

是的，有可能，您可以尝试通过查看来自此函数的所有调用来跟踪接收数据包的生命周期 `ip_rcv_finish`（[http://lxr.free-electrons.com/source/net/ipv4/ip_input.c?v=3.3 #L317](http://lxr.free-electrons.com/source/net/ipv4/ip_input.c?v=3.3#L317)）。

该结构`struct sk_buff`包含一个指向目标条目的指针：

```
struct  dst_entry   *dst; 
```

其中包含一个函数指针：

```
int (*input)(struct sk_buff*); 
```

调用输入数据包，在本地数据包的情况下，内核调用`ip_local_deliver`函数和转发数据包调用`ip_forward`函数。

我认为您可以像这样检查本地和转发的数据包：

**- 当地的 ：**

```
/*  struct sk_buff *skb : Entry packet */
if (((struct rtable *)skb->dst)->rt_type == RTN_LOCAL)
{
    /* This packet is to consume locally */
} 
```

**- 向前 ：**

```
if (((struct rtable *)skb->dst)->rt_type == RTN_UNICAST)
{
    /* This packet will be forwarded */
} 
```

# iphone - 如何将当前日期保存到 sqlite 数据库

> ID：12104110
> 
> 赞同：0
> 
> 时间：2012-08-24T06:20:26.653
> 
> 标签：iphone, objective-c, ios5, sqlite

我创建了一个 sqlite 数据库。'Orders' 是一个包含 idOrder(int)、dateOrder(varchar) 和 discount(float) 的表。在 Bill.h 中，我将 dateBill 设置为 NSDate，那么如何将当前 dateBill 保存到表“订单​​”中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T06:28:12.467

看起来这个主题也在这里讨论过。[在 iPhone 应用程序中将日期持久化到 SQLite3](https://stackoverflow.com/questions/251155/persisting-dates-to-sqlite3-in-an-iphone-application)

```
+ (NSDate *) dateWithSQLiteRepresentation: (NSString *) myString;
{
    NSAssert3(myString, @"%s: %d; %s; Invalid argument. myString == nil",  __FILE__, __LINE__, __PRETTY_FUNCTION__);

    return [[self sqlLiteDateFormatter] dateFromString: myString];
}

+ (NSDate *) dateWithSQLiteRepresentation: (NSString *) myString timeZone: (NSString *) myTimeZone;
{
    NSString * dateWithTimezone = nil;
    NSDate * result = nil;

    NSAssert3(myString, @"%s: %d; %s; Invalid argument. myString == nil",  __FILE__, __LINE__, __PRETTY_FUNCTION__);
    NSAssert3(myTimeZone, @"%s: %d; %s; Invalid argument. myTimeZone == nil",  __FILE__, __LINE__, __PRETTY_FUNCTION__);

    dateWithTimezone = [[NSString alloc] initWithFormat: @"%@ %@", myString, myTimeZone];
    result = [[self sqlLiteDateFormatterWithTimezone] dateFromString: dateWithTimezone];
    [dateWithTimezone release];

    return result;
}

+ (NSString *) sqlLiteDateFormat;
{
    return @"yyyy-MM-dd HH:mm:ss";    
}

+ (NSString *) sqlLiteDateFormatWithTimeZone;
{
    static NSString * result = nil;

    if (!result) {
        result = [[NSString alloc] initWithFormat: @"%@ zzz", [self sqlLiteDateFormat]];
    }

    return result;    
}

+ (NSDateFormatter *) sqlLiteDateFormatter;
{
    static NSDateFormatter * _result = nil;

    if (!_result) {
        _result = [[NSDateFormatter alloc] init];
        [_result setDateFormat: [self sqlLiteDateFormat]];
    }

    return _result;
}

+ (NSDateFormatter *) sqlLiteDateFormatterWithTimezone;
{
    static NSDateFormatter * _result = nil;

    if (!_result) {
        _result = [[NSDateFormatter alloc] init];
        [_result setDateFormat: [self sqlLiteDateFormatWithTimeZone]];
    }

    return _result;
}

- (NSString *) sqlLiteDateRepresentation;
{
    NSString * result = nil;

    result = [[NSDate sqlLiteDateFormatter] stringFromDate: self];

    return result;
}

- (NSTimeInterval) unixTime;
{
    NSTimeInterval result = [self timeIntervalSince1970];

    return result;
}

#define SECONDS_PER_DAY 86400
#define JULIAN_DAY_OF_ZERO_UNIX_TIME 2440587.5
- (NSTimeInterval) julianDay;
{
    return [self unixTime]/SECONDS_PER_DAY + JULIAN_DAY_OF_ZERO_UNIX_TIME;
}

+ (NSDate *) dateWithJulianDay: (NSTimeInterval) myTimeInterval
{
    NSDate * result = [[NSDate date] timeIntervalSince1970];

    return result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T06:56:35.363

列的数据类型是 INTEGER

对于保存日期：

sqlite_bind_double(compiledStatement,1, [yourdate TimeIntervalSince1970]);

对于检索日期：

NSDate *gotDate = [NSDate dateWithTimeIntervalSinceNow: sqlite3_column_double(compiledStatement, 1)];

希望能帮助到你

问候

库尔迪普

# c# - DotNetOpenAuth.OAuth2.TokenEndpointProtocolException

> ID：12104113
> 
> 赞同：2
> 
> 时间：2012-08-24T06:21:01.647
> 
> 标签：c#, asp.net-mvc, oauth-2.0

我们正在实施 IAuthorizationServerHost 以适应我们网站组的 OAuth2 功能。

我正在使用从 0.23 包升级的 DontNetOpenAuth 0.25 包，该包需要一些更改，需要一些代码更改。

在 AuthorizationServer.HandleTokenRequest() 调用期间，我得到以下信息

> *DotNetOpenAuth.OAuth：2012-08-24T18:06:55 错误DotNetOpenAuth.OAuth* - 客户端凭据授予客户端访问请求“ ****省略************“被授权服务器主机拒绝。DotNetOpenAuth.OAuth2.AuthorizationServer.dll DotNetOpenAuth.Messaging.Channel 中发生了“DotNetOpenAuth.OAuth2.TokenEndpointProtocolException”类型的第一次机会异常：2012-08-24T18:06:55 调试 DotNetOpenAuth.Messaging.Channel - 准备发送 AccessTokenFailedResponse (2.0) 消息。DotNetOpenAuth.Messaging.Bindings: 2012-08-24T18:06:55 调试 DotNetOpenAuth.Messaging.Bindings - 绑定元素 DotNetOpenAuth.OAuth2.ChannelElements.MessageValidationBindingElement 不适用于消息。DotNetOpenAuth.Messaging .Bindings: 2012-08-24T18:06:55 DEBUG DotNetOpenAuth.Messaging.Bindings - 绑定元素 DotNetOpenAuth.OAuth2.ChannelElements.TokenCodeSerializationBindingElement 不适用于消息。DotNetOpenAuth.Messaging.Channel: 2012-08-24T18:06:55 INFO DotNetOpenAuth.Messaging.Channel - 准备传出 AccessTokenFailedResponse (2.0) 消息：错误：未授权客户端**
> 
>  **DotNetOpenAuth.Messaging.Channel：2012-08-24T18:06:55 调试 DotNetOpenAuth.Messaging.Channel - 发送消息：AccessTokenFailedResponse**

 **我可以确认 client_id 是正确的。

有没有人对这个问题有一些建议或经验？

我尝试使用 chrome 的 REST 控制台手动创建请求，并且得到了相同的结果。

根据要求提供一些代码片段（更改以保护无辜者）

//客户端

```
public class MyOAuth2Client : OAuth2Client
{
 ...
} 
```

上述类在 MVC4 AuthConfig.cs 中注册为客户端

QueryAccessToken 函数被覆盖，我使用 DotNetOpenAuth 库中的 WebServerClient 对象来构造请求。MyWebServerClient.GetClientAccessToken();

//服务器端

我已经实现了 IAuthorizationServerHost 接口并构造了一个授权服务器；

```
AuthorizationServer _authorizationServer = new AuthorizationServer( new     OAuth2AuthorizationServerHost() ); 
```

令牌查询通过

```
public ActionResult Token()
{
  _authorizationServer.HandleTokenRequest( Request ).AsActionResult();
} 
```**

# android - Android 部分视图元素不可见

> ID：12104115
> 
> 赞同：0
> 
> 时间：2012-08-24T06:21:04.890
> 
> 标签：android

我正在创建如下布局，但复选框元素在屏幕上不可见，我哪里出错了？

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:layout_width="match_parent"
    android:layout_height="match_parent">

    <LinearLayout android:orientation="horizontal" 
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <SeekBar android:id="@+id/seek" 
            android:layout_width="300dip"
            android:layout_height="wrap_content" 
            android:progress="50"/>

        ...and a few more elements here.

    </LinearLayout>

    <CheckBox android:id="@+id/CheckBox" 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        android:text="somestring" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T06:22:48.340

`LinearLayout`之前的高度`CheckBox`设置为`MATCH_PARENT`（并且它填充了所有父级的高度），并且两者的父`LinearLayout`级都将方向设置为垂直，因此`CheckBox`被推出屏幕。

`LinearLayout`例如，将包含的高度设置`SeekBar`为`WRAP_CONTENT`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T06:27:43.047

更改您的 LinerLayout 定义它不能是 android:layout_height="match_parent"

```
<LinearLayout android:orientation="horizontal" 
    android:layout_width="match_parent"
    android:layout_height="0px"
    android:layout_weight="1"> 
```

如果您为线性布局设置 match_parent 它会消耗所有内容，因此 wrap_content 更好。但是，如果您按照我写的方式设置它，复选框将位于底部页面，线性布局将消耗屏幕的剩余部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T06:33:32.337

您需要设置内部线性布局的高度和宽度来包装内容。试试这个。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <SeekBar
            android:id="@+id/seek"
            android:layout_width="300dip"
            android:layout_height="wrap_content"
            android:progress="50" />
    </LinearLayout>

    <CheckBox
        android:id="@+id/CheckBox"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="somestring" />

</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T06:35:21.073

试试这个 ：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:weightSum="10" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="9"
    android:orientation="horizontal" >

    <SeekBar
        android:id="@+id/seek"
        android:layout_width="300dip"
        android:layout_height="wrap_content"
        android:progress="50" />
</LinearLayout>

<CheckBox
    android:id="@+id/CheckBox"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:text="somestring" />

</LinearLayout> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T06:47:01.337

在您的布局中选择了一个您希望大小灵活的元素，比如高度。然后使其`height="0dp"`和`weight="1"`。制作其余元素的高度：`height="wrap_content"`.

此外，您可能已经为其他元素提供了一些 dp 的谨慎大小，因此它们的总高度超出了可用的屏幕空间，或者有太多元素超出了您的屏幕高度。在这种情况下，请将您的布局包装在`ScrollView`.

# android - 如何在 Android 的程序中添加会话超时功能？

> ID：12104116
> 
> 赞同：4
> 
> 时间：2012-08-24T06:21:04.333
> 
> 标签：android

我是 android 新手。我想知道如何在 Android 程序中添加会话超时功能？像使用网站一样，如果一小时内没有操作，页面会提醒并退出。如何在Android应用程序中实现这一点？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T06:37:29.903

也许 AlarmManager 是你想要的。

要安排闹钟：

```
AlarmManager am = (AlarmManager) context
    .getSystemService(Context.ALARM_SERVICE);
am.set(AlarmManager.RTC, <trigger time>, <the intent>); 
```

要取消警报：

```
am.cancel(<the intent>); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T06:37:46.130

我在我的应用程序中编写了类似的功能。为此，我使用 SharedPreferences 来保存用户的 LoginTime。此外，我实现了一个后台服务，它每 20 秒检查一次登录时间。在我的情况下，登录会在 30 分钟后过期。之后，SharedPreferences LoginTime 被清除，我的应用程序返回到 LoginActivity。好吧，我不知道这是否是最好的方法，这是一个非常基本的解释。但它对我来说效果很好。

# asp.net - 如何使用联接查询从两个以上没有外键和主键的表中获取数据

> ID：12104122
> 
> 赞同：0
> 
> 时间：2012-08-24T06:21:27.353
> 
> 标签：asp.net, sql-server, ado.net

一旦我需要你的帮助，

我的数据库中有三个表。

1>**婚礼**

```
Column Name    Data Type
-------------------------------------
wedID          Int (primary key)
wedName        varchar (50) 
```

2>**选择站点**

```
Column Name   Data Type
-----------------------------------
wedID         Int (without foreign key and primary key with null allow)
siteID        Int (without foreign key and primary key with null allow)
siteStatus    varchar(50) 
```

3>**网站**

```
Column Name   Data Type
--------------------------------      
siteID        Int (Primary Key) 
siteName      varchar(50)
siteFile      varchar(MAX) 
```

我想要以下输出：

```
 ws.siteID     ws.siteName     ws.siteFile    s.wedID   s.sitestatus
 ----------------------------------------------------------------------------
 1              Show           show.jpeg      6         Yes
 2              My View        my view.png    5     
 3              Dream          dream.jpeg     3 
```

`ws`是`webSite`表`s`的别名，是表的别名`siteSelect`。

如果 wedID 不匹配，则表中的所有数据`webSite`和仅显示`siteSelect`其中的数据`s.siteStatus``Yes`

我尝试以下 sql 查询

```
select 
    DISTINCT(ws.siteID), s.wedID, ws.siteName, 
    ws.siteFile, s.siteStatus 
from wedding wd, webSite ws 
left outer join siteSelect s on ws.siteID = s.siteID 
where wd.wedID = @wedID 
```

但输出是这样的：

```
 ws.siteID     ws.siteName     ws.siteFile    s.wedID   s.sitestatus
 -----------------------------------------------------------------------
 1              Show           show.jpeg      6         Yes
 2              My View        my view.png    5         Yes
 3              Dream          dream.jpeg     3         Yes 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T07:12:31.517

**[演示 SQL 小提琴](http://sqlfiddle.com/#!3/78fe1/1)**

检查演示添加一些值并运行此查询

```
select 
   ws.siteId, ws.siteName, ws.siteFile, ss.wedID,
   (case 
      when ss.wedID = 1 then ss.siteStatus else '' end) as siteStatus
from 
   website ws 
join 
   selectsite ss on ss.siteID=ws.siteID 
```

让我知道是否有任何问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T06:42:26.030

尝试这个

```
select 
    DISTINCT(ws.siteID), s.wedID, ws.siteName, ws.siteFile, 
    (case 
        when s.wedID = @wedID 
        then s.siteStatus 
        else '' end) as siteStatus, wd.wedName
from webSite ws  
left join selectSite s on ws.siteID = s.siteID  
Left Join wedding wd on wd.wedID = s.wedID 
```

# c++ - ZeroC ICE vs 0MQ/ZeroMQ vs Crossroads IO vs 开源 DDS

> ID：12104123
> 
> 赞同：7
> 
> 时间：2012-08-24T06:21:31.287
> 
> 标签：c++, publish-subscribe, zeromq, ice, data-distribution-service

ZeroC ICE 与 0MQ 相比如何？我知道 0MQ/Crossroads 和 DDS 非常相似，但似乎无法弄清楚 ICE 的来源。

作为我项目的第一阶段，我需要快速实现一个将实时市场数据从 C++ 卸载到 C# 的系统。下一阶段将是使用底层 Pub/Sub 设计实现基于事件的架构。

我愿意使用 TCP .. 但系统当前在单个 24 核服务器上运行.. 所以 IPC 选项会很好。据我了解，ICE 只是 TCP，而 DDS 和 0mq 有 IPC 选项。

目前，我倾向于将 Protobuf 与 ICE 或 Crossroads IO 一起使用。从 OpenSplice DDS 网站关闭。我对各种选项进行了大量研究，最初是考虑 OpenMPI + boost:mpi，但似乎没有用于 .NET 的 MPI。

我的问题是：

ICE 与 0MQ 相比如何？我无法解决这个问题。无法在网上找到任何可以比较两者的东西。

提前致谢。

...........更多关于我的项目：

目前在 Windows 上使用 CMAKE C++，但计划在某个时候迁移到 CentOS。另一个需要的功能是将 tic 数据和所有消息存储在“NoSql”数据库中，例如 Hbase/Hadoop 或 HDF5。这些中间件/消息传递/发布-订阅库中是否有任何数据库集成？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T11:04:32.090

关于 ZeroC 的一些想法： 非常快；能够有多个端点；能够在端点上进行负载平衡；能够在其中一个节点出现故障时重新连接到不同的端点。这对最终用户是透明的；拥有良好的工具链（IceGrid、IceStorm、IceBox 等）；分布式、高可用、多故障转移等

除此之外，我将它用于热交换代码模块（类似于 Erlang），让客户端创建具有多个端点的代理，然后关闭每个端点以逐个快速升级。通过对不同端点的透明重试，我可以在我进行升级的整个过程中启动并运行系统。不确定这是广告功能还是未广告的副作用:)

总的来说，如果需要使用 ZeroC Ice，可以很容易地扩展您的服务器。

我知道 ZeroMQ 提供了一套很棒的工具和消息传递模式，我会继续在我的宠物项目中使用它。但是，我看到的问题是，很容易过火而忘记所有分布式组件。这是分布式环境中必须具备的。当您需要升级时，您如何知道您的客户端/服务器在哪里？如果下游的组件之一没有收到消息，如何确定问题出在哪里？出版商？客户端？还是介于两者之间的任何一座桥（REP/REQ、XREP/XREQ 等）？

总体而言，ZeroC 为企业解决方案提供了更好的工具集和生态系统。

它是开源的:)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-30T06:55:47.190

杰布尼，

ZMQ：如果您想要真正的良好性能，并且您工作第一阶段的唯一工作是将数据从 C++ 移动到 C#，那么 Zmq 是最佳选择。Zmq 可以通过其内置的消息传递模式为您提供事件驱动架构的发布/订阅模型。在这种情况下，Zmq 还支持您的 IPC 要求。例如：您可以拥有一个应用程序实例，该实例通过多线程和 IPC 通信消耗 24 个内核。

ZeroC Ice：Ice 是一个非常类似于 CORBA 的 RPC 框架。

例如。Socket/ZMQ - 你通过网络发送消息。在另一端阅读它，解析消息，执行一些操作等。 ZeroC Ice - 在客户端和服务器之间创建一个合同。契约只不过是一个类的模板。现在客户端调用该类的代理方法，服务器实现/操作它并返回值。因此， int result = mathClass.Add(10,20) 是客户端调用的。方法、参数等被编组并发送给服务器，服务器实现Add方法，返回结果，客户端得到30作为结果。因此，在客户端，api 只不过是运行在远程主机上的服务的代理。

结论：ZeroC ICE 有一些非常好的企业特性。但是，对于您的项目要求，ZMQ 是正确的工具。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T21:54:36.243

对我来说.. 正确答案是 Crossroads I/O 。它可以满足我的一切需求……但在使用 protobufs 时仍然无法发布/订阅……我确信 ZeroC ICE 非常适合分布式 IPC，但 0MQ/Crossroads 为您提供了使用线程间通信的额外灵活性。

注意：在 windows 上，0mq 没有 IPC。

所以，总而言之，0mq的十字路口叉子是最好的。但是您必须推出自己的 windows/ipc（或使用 tcp::127..），以及 pub/sub 的发布方主题过滤功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-16T07:08:40.907

nanomsg，来自编写 crossroads 和 0mq 的人（我认为）。

[http://nanomsg.org/](http://nanomsg.org/)

# c# - 如何在 C# 中实现 Jaccard 相似度

> ID：12104128
> 
> 赞同：1
> 
> 时间：2012-08-24T06:21:46.353
> 
> 标签：c#, vector, similarity

我在计算集合（位向量）的 Jaccard 相似度时遇到了这个问题：

v1 = 10111

v2 = 10011

交叉点的大小 = 3；（我们怎么能找到它？）

union 的大小 = 4，（我们怎样才能找到它？）

Jaccard 相似度 = (交集/并集) = 3/4

但我不明白我们如何找出两个向量的“交集”和“并集”。

请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T06:25:17.137

大概您对“交集”和“并集”的定义是“在两个值中设置的位数”和“在任一值中设置的位数”......这是（假设您使用类似`int`or的东西`long`作为向量） ：

```
int intersection = CountBits(v1 & v2);
int union = CountBits(v1 | v2); 
```

接下来你只需要实现`CountBits`. [这个 Stack Overflow 问题](https://stackoverflow.com/questions/109023/best-algorithm-to-count-the-number-of-set-bits-in-a-32-bit-integer)可以帮助你。

您可能想要使用 ，而不是使用`int`or 。那有和方法，*看起来*它们不会改变原始值，但并不完全清楚。当然，您需要找出计算 a中设置的位的最佳方法 -可能会很好。`long`[`BitArray`](http://msdn.microsoft.com/en-us/library/system.collections.bitarray.aspx)`And``Or`*`BitArray``array.Cast<bool>().Count(bit => bit)`*

# java - ruby 中的前端（带有 java/php 框架）

> ID：12104129
> 
> 赞同：0
> 
> 时间：2012-08-24T06:21:47.557
> 
> 标签：java, php, ruby-on-rails

我想知道我们是否可以使用 php/java 框架（php/java 中的后端）和 ruby​​ 作为前端来构建应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:24:53.810

自从：

*   Ruby 有 HTTP 客户端库
*   Ruby 有提供 UI 的方法

是的。

这同样适用于几乎所有的编程语言。

（假设您的意思是“带有 HTTP 接口的后端”）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T06:25:17.577

我曾经用另一种语言来做到这一点，称为 AutoIT。基本上，我只是向 PHP 页面发送一个请求，其中包含一组指定 PHP 页面应该做什么的参数。然后返回的文本返回到 AutoIT 程序。例如，在我的一些更基本的项目中，我已将其用于许可。这在理论上可以用 Ruby 完成，只要你能从网页上接收数据（如果你不能，这会让我哭泣）。

# android - 三星设备上的 OpenGL 渲染问题

> ID：12104130
> 
> 赞同：0
> 
> 时间：2012-08-24T06:22:01.797
> 
> 标签：android, opengl-es-2.0

我有一个使用 OpenG-ES 2.0 绘制一些对象的应用程序。该应用程序无法在某些三星设备上呈现。我尝试调试，似乎顶点和片段着色器有问题。

这是我的着色器代码：
顶点着色器：

```
attribute vec3 Position; 
attribute vec4 SourceColor; 

varying vec4 DestinationColor; 

uniform mat4 Projection;
uniform mat4 Modelview;
uniform mat4 CordTransform;
attribute float flag;
attribute float clubColorFlag;

attribute vec2 TexCoordIn; // New
varying vec2 TexCoordOut; // New
varying float flagS;
varying float flagClubColorS;
void main(void) {   
        gl_Position = Projection * Modelview * vec4(Position,1.0);  
        flagS = flag;  
        flagClubColorS = clubColorFlag;  
        if (clubColorFlag == 1.0) {  
            DestinationColor = vec4(0.190,0.309,0.309,1.0);  
        }  
        else {   
            DestinationColor = SourceColor;  
        }  
        exCoordOut = TexCoordIn;  
        gl_PointSize = 1.0;  
    } 
```

片段着色器：

```
varying lowp vec4 DestinationColor;

varying lowp vec2 TexCoordOut; // New
uniform sampler2D Texture; // New
varying lowp float flagS;
varying lowp float flagClubColorS;
void main(void) {

    gl_FragColor = DestinationColor;
    if(flagS == 1.0){
        gl_FragColor = DestinationColor;
    }
    else if (flagClubColorS == 1.0) {
        gl_FragColor = DestinationColor;
    }
    else if (flagS == 0.0){
        gl_FragColor = DestinationColor * texture2D(Texture, TexCoordOut); // New
    }
} 
```

我不确定是什么问题，但如果我在片段着色器中注释掉 if-else 部分，我会得到纹理统一 -1。在其他情况下，它为零。两个着色器都编译没有任何错误。
跟精度有关系吗？请帮我调试问题。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-29T08:30:02.503

我正在为稍后将要提及此问题的人回答我自己的问题。我可以解决这个问题。

问题不在任何一个着色器中。问题是，我正在使用`glDrawElements()`方法来绘制具有顶点和索引缓冲区的对象。我用仅使用顶点缓冲区的方法替换了这个调用，`glDrawArrays()`一切正常。

我仍然不确定确切的问题，但它可能会帮助那些长期为类似问题而苦苦挣扎的人。

# css - 在 Android 2.3.5 和 2.3.6 版本上，我的后退按钮无法正确显示

> ID：12104133
> 
> 赞同：2
> 
> 时间：2012-08-24T06:22:16.540
> 
> 标签：css

android aap 上的屏幕截图是这样的 - [http://screencast.com/t/jvO2nn1zMlN8](http://screencast.com/t/jvO2nn1zMlN8)

[从http://cssnerd.com/2011/11/30/the-best-pure-css3-ios-style-arrow-back-button/](http://cssnerd.com/2011/11/30/the-best-pure-css3-ios-style-arrow-back-button/)复制 CSS

# c++ - C++ 计数动物和与基类的随机交互

> ID：12104137
> 
> 赞同：0
> 
> 时间：2012-08-24T06:22:28.037
> 
> 标签：c++

我的任务是

> “我的狗，名叫巴迪，住在后院。晚上看到猫或松鼠来拜访时，它会吠叫。如果它看到青蛙，并且饿了，它就会吃掉它。如果它看到青蛙他不饿，他就和它玩。如果他已经吃了 2 只青蛙，但仍然饿，他会放手。如果他看到一只土狼，他会大声呼救。有时他的朋友 Spot 路过，然后他们互相追逐。如果他看到任何其他动物，他只是看着它。

编写一个测试程序和一组类来跟踪所有后院活动并将结果存储到给定夜晚的文件中。我希望你会有一个动物类，以及一个继承自动物类的猫、狗、松鼠、郊狼类。你需要记录他吃了多少只青蛙，每种类型的动物有多少来访，他玩的频率以及其他类似细节。"

您还需要编写一个测试程序，该程序将读取从其他测试程序生成的文件，并打印出他见过的每种动物的数量，以及他在特定的一天对它们做了什么。用户需要输入日期，该日期的文件信息将被读入并显示。

将任何其他功能添加到您需要的程序中，使其涵盖列出的所有必需的编程概念。创造性地完成这项任务。

-我们将使用类、数据抽象、继承、组合、指针、运算符重载和异常处理。-

```
#include <iostream>
#include <cstdlib>

using namespace std;

class animal{
public:
       animal();
       ~animal();
       void interactWithBuddy(); 
       virtual int ID()
        {
          return ID;
        }
 };
class frog: public animal
{
     public:
            void interactWithBuddy();
            void eat();
            void play();
            void letGo();

};
class dog: public animal
{      
       public:
              void interactWithBuddy();
              void chase();

};
class cat: public animal
{
      public:
             void interactWithBuddy();
             void bark();
};
class coyote: public animal
{
      public:
             void interactWithBuddy();
             void cryForHelp();
};
class squirrel: public animal
{
      public:
             void interactWithBuddy();
             void bark();
};
class otherAnimal: public animal
{
      public:
             void interactWithBuddy();
             void watch();
};
int main ()
{
    srand(time(0)); 
    int number; 
      std::cout << (rand() % 6 + 1) <<std::endl;   
    animal * a = new frog(); 
        int z = a->ID(); 
    animal * b = new dog();
         int y = a->ID();
    animal * c = new cat();
         int x = a->ID();
    animal * d = new coyote();
         int w = a->ID();
    animal * e = new squirrel();
         int v = a->ID();
    animal * f = new otherAnimal();
         int u = a->ID();         
    return 0;
} 
```

我知道代码只是一个外壳，但我在正确的轨道上吗？你如何建议数青蛙并计算它们是否被吃掉、被玩弄或放手？此外，我想为每个动物子类分配一个数字，然后我可以在主函数中随机化以与分配相关，但我不确定如何完成。非常欢迎提示和指示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T06:32:13.323

您在基类中投入了太多。并非所有动物都能做其他动物能做的所有事情。你的`animal`课程应该只包含*任何*动物可以拥有/做的东西。所有特定于具体动物（即狗或青蛙）的东西都应该放在相应的类中。例如，不是每个动物都可以`bark()`，当然，所以这个函数不应该在基类中。

> 你如何建议数青蛙并计算它们是否被吃掉、被玩弄或放手？

好吧，既然是能看到青蛙的狗，那么在课堂上放一个计数器是有道理的`dog`。

> 此外，我想为每个动物子类分配一个数字，然后我可以在主函数中随机化以与分配相关，但我不确定如何完成。

~~我不太明白你在这里是什么意思。您的意思是要为每个班级制作标识符吗？如果是，您为什么需要这样做？~~

**升级版：**

是的，这是一个正确的方法。最简单的方法是为每只动物分配从 1 到 6 的数字，然后当需要确定出现哪一个时，生成一个 范围内的随机数`[1,6]`。要为动物分配编号，您应该`int id;`在每个类中添加一个类似的字段并为其分配不同的值。

**UDP 2：**

这就是多态性发挥作用的地方。首先，要为一个类初始化一个 const 成员，您需要将其设为静态。这是一个简单的例子：

```
class base
{
public:
    static const int ID = -1;
};

class derived: public base
{
public:
    static const int ID = 1;
}; 
```

现在基类的*每个对象的 ID 为 -1，派生类的**每个*对象的 ID 为 1。但是，如果您尝试从这样的基类指针中使用它：

```
base * a = new derived();
int t = a->ID; 
```

你总是会得到-1，因为基类指针不知道它指向什么。要获得正确的 ID，您需要创建一个虚函数：

```
virtual int getId(){ return ID; } 
```

现在，如果你愿意

```
base * a = new derived();
int t = a->getID(); 
```

您将*始终*从“真实”类型`a`点处获得正确的 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T07:17:00.043

我建议您将随机逻辑放在工具之外……关注点分离。然后你可以让一个程序从标准输入中读取一系列动物名称，执行操作并记录它需要的任何内容，然后当它检测到文件结束时打印一个摘要报告。您可以简单地测试它，如下所示：

```
echo cat frog frog squirrel frog | buddy_simulator 
```

如果你愿意，你可以创建一个程序来随机化一些输入。

基本逻辑应该是：

```
std::string animal_name;
while (std::cin >> animal_name)
{
    // do something animal_specific
}
// do reporting 
```

`animal_name`可以使用接受参数并将适当的返回`Animal*`到新堆分配的动物对象的工厂方法来创建特定于动物的行为。然后，您可以调用`p->suffer_buddy();`，这将更新静态成员“看到此动物的次数”计数器，打印出好友喜欢做什么（在此目击时）。如果这是第一次看到该动物，您可以将指针存储到`vector`in 中`main()`，这样当您想要进行汇总报告时，您可以调用`p->report()`您遇到的每种动物类型。 `Frog::report()`，例如，可能类似于：

```
void Frog::report()
{
    std::cout << "of " << count_ << " frogs, " << eaten_ << " eaten, " << played_with_ << " played with, " << let_go_ << " let go\n";
} 
```

使用这么多静态变量有点难看，但让它像这样工作更容易。

（不幸的是，这种行为没有明确规定——你如何确定好友是否饿了？根本没有规定，所以你必须做出一些假设（并记录下来）或让你的老师指定这一点。）

这一切都非常愚蠢，但是使用多态层次结构建模这个问题也是如此，所以你去......

# .net - Web api 控制器中的操作与通用控制器中的操作有什么不同

> ID：12104142
> 
> 赞同：0
> 
> 时间：2012-08-24T06:22:48.227
> 
> 标签：.net

我搜索了一些关于 web api 的信息。这是一种将数据发布到客户端（例如移动设备和浏览器）的简单方法。我已经阅读了[这篇文章](http://www.asp.net/web-api/overview/getting-started-with-aspnet-web-api/tutorial-your-first-web-api)。

我发现如果我只是写一个这样的控制器：

```
public HomeController:Controller
{
    [HttpGet]
    public void UserInfos()
    {
        UserInfo[] users = new UserInfo[]{ new UserInfo{FirstName="Tim",LastName="Lee"},  new UserInfo{FirstName="Tim2",LastName="Lee2"}} };

        return Json(users);
    }
} 
```

我还可以通过输入这样的 url 来获取 json 数据：

```
[http://]localhost:port/Home/UserInfos 
```

除此之外，它们之间的其他区别是什么？

# sqlite - 更新 Sqlite 数据库只工作一次

> ID：12104144
> 
> 赞同：0
> 
> 时间：2012-08-24T06:22:54.520
> 
> 标签：sqlite, sql-update, xcode4.3

我有一个 sqlite 数据库，它已加载到 tableview 中，现在当我单击一行以查看其详细信息时。我转到另一个视图控制器，其中显示了详细信息并且存在 AddToFav 按钮。当我单击它..并转到另一个视图控制器...我可以正确看到更改，我的数据库正在正确更新，但是如果我尝试添加另一个条目..我注意到我的数据库不再更新.. addToFav 按钮只更新一次数据库。有任何想法吗？这是我的 Addbut IBaction ：

```
- (IBAction)AddButClick:(UIButton *)sender {

    [AddBut setImage:[UIImage imageNamed:@"apple-logo copy.png"] forState:UIControlStateSelected];
    [AddBut setImage:[UIImage imageNamed:@"apple-logo copy.png"] forState:UIControlStateHighlighted];
    Favo = [[NSMutableArray alloc] initWithCapacity:1000000];

    @try {
      //  NSFileManager *fileMgr = [NSFileManager defaultManager];
        // NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"dictionary.sqlite"];
        //NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"authorsDb2.sqlite"];
        //     NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"FinalDb.sqlite"];
        //NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"xxJuridique-FINAL-OK.sqlite"];
     //   [self createEditableCopyOfDatabaseIfNeeded];

   //     NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"data.sqlite"];
      //  [self.tableView reloadData];

        sqlite3_stmt *compiled_statement1;

        if(sqlite3_open([PathDB UTF8String], &db) == SQLITE_OK) {

//            UIAlertView *DbO = [[UIAlertView alloc]
//                                 initWithTitle:@"PATH" message:@"Database still open !" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
//            
//            [DbO show];
            NSString *formatedSql = [NSString stringWithFormat:@"UPDATE Sheet1 SET Fav = 'YES' WHERE field3 = '%@'" , authorNAme2];

//            UIAlertView *messageAlert = [[UIAlertView alloc]
//                                         initWithTitle:@"Query" message:formatedSql delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
//            
//            [messageAlert show];
//            
            UIAlertView *PAth = [[UIAlertView alloc]
                                 initWithTitle:@"PATH" message:PathDB delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];

            [PAth show];
           // NSLog(PathDB);

            const char *sql = [formatedSql UTF8String];
            NSLog(@" !!!!!!!! In the middle of it !!!!!!!!!!!!");
            if (sqlite3_prepare_v2(db, sql, -1, &compiled_statement1, NULL) != SQLITE_OK) {
                NSLog(@"!!!!!!!!!!!!!!!!!!!ERRRRROOOOOOORRRRRRRRR!!!!!!!!!!!!!!!!!!!!!!!!!");
                //NSAssert1(0, @"Error: failed to prepare statement with message '%s'.", sqlite3_errmsg(database));
            }

            NSLog(@"This is the query %@",formatedSql);

        }
   //     sqlite3_bind_text(compiled_statement1, 1, [authorNAme2 UTF8String], -1, SQLITE_TRANSIENT);

        int success = sqlite3_step(compiled_statement1);

        // sqlite3_reset(compiled_statement1);
        if (success != SQLITE_ERROR) {
            NSLog(@"Successfully inserted");
            sqlite3_last_insert_rowid(db);
        }

//        
//        BOOL success = [fileMgr fileExistsAtPath:dbPath];
//        
//        if(!success)
//        {
//            NSLog(@"Cannot locate database file '%@'.", dbPath);
//        }
//        if(!(sqlite3_open([dbPath UTF8String], &db) == SQLITE_OK))
//        {
//            NSLog(@"An error has occured: %@", sqlite3_errmsg(db));
//            
//        }

        // const char *sql = "SELECT F_Keyword FROM wordss";  
        const char *sql = "SELECT * FROM Sheet1";
        NSLog(@"Successfully selected from database");
        sqlite3_stmt *sqlStatement;
        if(sqlite3_prepare(db, sql, -1, &sqlStatement, NULL) != SQLITE_OK)
        {
            NSLog(@"Problem with prepare statement:  %@", sqlite3_errmsg(db));

        }else{

            NSLog(@"Got in the else tag");

            while (sqlite3_step(sqlStatement)==SQLITE_ROW /*&& PAss == NO*/) {

                NSLog(@"Got in the while tag");

                Author * author = [[Author alloc] init];
                NSLog(@"Author initialized");

                author.name = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,10)];
                NSLog(@"Initialization ok");
           //     NSLog(author.name);

                if(/*author.name == @"NO" &&*/ HighLighted == NO){
                    //const char *sql2 = "INSERT INTO Sheet1 ";

                    [AddBut setImage:[UIImage imageNamed:@"apple-logo copy.png"] forState:UIControlStateNormal];
                    NSLog(@"We have not selected it as fav yet");
                  //  [AddBut setSelected:NO]; //btn changes to normal state
                    NSLog(@"The button was NOt highlighted and now is");
                    HighLighted = YES;
                     break;

                }

                else
                {

                    NSLog(@"We have selected it as fav");

                    [AddBut setImage:[UIImage imageNamed:@"apple-logo.png"] forState:UIControlStateNormal];
                    [AddBut setSelected:NO]; //btn changes to normal state
                    NSLog(@"The button was highlighted and now is NOt");

                    HighLighted = NO;
                     break;

                   // [self viewDidLoad];
                  //  PAss = YES;

                }
         //       [Favo release];

         //       NSLog(Favo);

//                author.name = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,2)];
//                author.title = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,2)];
//                author.genre = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement, 4)];
//                [theauthors addObject:author];
            }
        }
    }
    @catch (NSException *exception) {

        NSLog(@"Problem with prepare statement:  %@", sqlite3_errmsg(db));

    }
    @finally {
        //   sqlite3_finalize(sqlStatement);
     //   sqlite3_close(db);

        UIAlertView *fin = [[UIAlertView alloc]
                                                initWithTitle:@"Query" message:@"DOne with Click Button" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];

                   [fin show];

        return Favo;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T06:48:36.537

谢谢@crazyCreator 的回答！！！！

[自我作者列表2]；
[self.tableView reloadData];

# cairo - 如何拉伸绘制具有任意不透明度的 cairo gdk pixbuf 图案区域？

> ID：12104147
> 
> 赞同：1
> 
> 时间：2012-08-24T06:23:08.100
> 
> 标签：cairo, freepascal, lazarus, gdk

如何使用用户定义的不透明度将 gdk pixbuf 的区域拉伸到 cairo 表面？

我正在尝试编写一个用于处理位图的跨平台界面，并希望将 alpha 混合添加到我的 cairo 拉伸绘制方法中。我现在所拥有的工作得很好，但我无法想出一种方法将 alpha 混合塑造成一系列 cairo/gdk api，这些 api 有点像微软的[AlphaBlend](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183351%28v=vs.85%29.aspx)函数。

我到目前为止是这样的：

```
procedure TGtkBitmap.Draw(const Source: TRect; Canvas: TCanvas;
  const Dest: TRect; Alpha: Byte = $FF);
var
  D: PGdkDrawable;
  C: Pcairo_t;
  M: cairo_matrix_t;
begin
  if FBuffer = nil then
    Exit;
  if (WidthOf(Source) < 1) or (WidthOf(Dest) < 1) then
    Exit;
  if (HeightOf(Source) < 1) or (HeightOf(Dest) < 1) then
    Exit;
  D := TGtk2DeviceContext(Canvas.Handle).Drawable;
  C := gdk_cairo_create(D);
  gdk_cairo_set_source_pixbuf(C, FBuffer, 0, 0);
  cairo_matrix_init_identity(@M);
  cairo_matrix_translate(@M, Source.Left, Source.Top);
  cairo_matrix_scale(@M, WidthOf(Source) / WidthOf(Dest),
    HeightOf(Source) / HeightOf(Dest));
  cairo_matrix_translate(@M, -Dest.Left, -Dest.Top);
  cairo_pattern_set_matrix(cairo_get_source(C), @M);
  cairo_rectangle(C, Dest.Left, Dest.Top, WidthOf(Dest), HeightOf(Dest));
  // what cairo functions can I combine here to vary
  // the opacity of the pattern fill using Alpha argument?
  cairo_fill(C);
  cairo_destroy(C);
end; 
```

一切正常，但我不确定如何让 alpha 混合与 pix buff 模式工作。我可以想象一种方法，它涉及创建第二个 cairo 表面，使用用户定义的不透明度将整个 pixbuf 绘制到它，然后使用新表面为第一个表面创建图案，这一切都变得有点混乱，可能比某些东西慢得多我会很高兴的。

这是我到目前为止所做工作的[视频记录。](http://youtu.be/iuorYlmbmvI)我想从熟悉 cairo 的人那里知道，我可以在上面的例程中插入什么来设置 pixbuf 源模式的 alpha 级别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T21:49:26.347

来自 cairo 邮件列表的 Chris Wilson 提供了这个完美运行的解决方案。

更换：

```
cairo_fill(C); 
```

和：

```
cairo_clip(C);
cairo_paint_with_alpha(C, Alpha / $FF); 
```

感谢来自 cairo 邮件列表的 Chris Wilson！

# php - 在 wordpress 中显示帖子中的图像

> ID：12104149
> 
> 赞同：0
> 
> 时间：2012-08-24T06:23:27.717
> 
> 标签：php, wordpress

我正在开发一个 wordpress 网站。我对一种类型的帖子有不同的类别（例如叫花）。假设我在这个类别中有 10 个帖子。我想在主页上显示这些帖子中的 10 张图片（一篇文章中的一张图片）

单击图像后，用户将被重定向到相应的帖子。

这在 wordpress 中可行吗？我是否需要使用自定义字段或谷歌搜索后发现的东西。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:44:50.573

按它们所在的*类别*设置循环和 query_posts()`cat id`

```
query_posts( 'cat=1' ); 
```

然后，您可以在主页循环中显示帖子的特色图片，如下所示：

```
<?php if ( has_post_thumbnail() )
{
        $image_id = get_post_thumbnail_id();
        $alt_text = get_post_meta($image_id, '_wp_attachment_image_alt', true);
        $image_url = wp_get_attachment_image_src($image_id,'large');  
        $image_url = $image_url[0];
?>
<a href="<?php the_permalink(); ?>">
    <img src='<?php echo $image_url;?>' alt='<?php echo $alt_text; ?>' title='<?php echo $alt_text; ?>' />
</a>
        <?php
}
else
{
?>
<a href="<?php the_permalink(); ?>">
  <img src='<?php bloginfo('template_url'); ?>/images/no_image.jpg' />
</a>
<?php
}
?> 
```

# ios - 如何以编程方式制作 UILabel

> ID：12104154
> 
> 赞同：0
> 
> 时间：2012-08-24T06:23:55.810
> 
> 标签：ios, uilabel

如何以编程方式制作 UILabel？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T06:30:38.713

```
UILabel *myLabel = [[UILabel alloc] initWithFrame:CGRectMake
(50, 100, 200, 100)];  
myLabel.text = @"Lorem...";  //add text to your label
[self.view addSubview:myLabel]; //add label to your view 
```

那应该可以帮助您。

为什么要问这个简单的问题？如果你搜索它，点击谷歌上的第一个结果，你就会得到答案。

# c++ - 使用 WIA 获取图像/扫描

> ID：12104157
> 
> 赞同：0
> 
> 时间：2012-08-24T06:24:08.740
> 
> 标签：c++, wia

我是 WIA 的新手。我以某种方式设法获取设备列表，选择我的设备并枚举该设备以获取图像项。但是现在，当我尝试传输图像时，我被卡住了。如果我使用根项进行数据传输`pWiaDataTransfer->idtGetData`，则返回 0x8000FFFF (E_UNEXPECTED) 的 HRESULT，如果我使用图像项（我的设备上只有两个项 'root' 和 'top'），则在获取存储接口时会失败。我想也许我需要从“root”获取存储接口，从“top”获取数据传输接口，但这也失败了（当我尝试获取数据传输接口时）。然后我得到 0x80004002（E_NOINTERFACE - 不支持此类接口。）。这是代码：

```
HRESULT TransferWiaItem( IWiaItem *pWiaItem, IWiaItem *pWiaItem2 )
{
    IWiaPropertyStorage *pWiaPropertyStorage = NULL;
    HRESULT hr = pWiaItem->QueryInterface( IID_IWiaPropertyStorage, (void**)&pWiaPropertyStorage );
    if( SUCCEEDED( hr ) )
    {
        PROPSPEC PropSpec[2] = {0};
        PROPVARIANT PropVariant[2] = {0};
        const ULONG c_nPropCount = sizeof(PropVariant)/sizeof(PropVariant[0]);
        GUID guidOutputFormat = WiaImgFmt_BMP;
        PropSpec[0].ulKind = PRSPEC_PROPID;
        PropSpec[0].propid = WIA_IPA_FORMAT;
        PropSpec[1].ulKind = PRSPEC_PROPID;
        PropSpec[1].propid = WIA_IPA_TYMED;
        PropVariant[0].vt = VT_CLSID;
        PropVariant[0].puuid = &guidOutputFormat;
        PropVariant[1].vt = VT_I4;
        PropVariant[1].lVal = TYMED_FILE;
        hr = pWiaPropertyStorage->WriteMultiple( c_nPropCount, PropSpec, PropVariant, WIA_IPA_FIRST );
        if( SUCCEEDED( hr ) )
        {
            IWiaDataTransfer *pWiaDataTransfer = NULL;
            hr = pWiaItem2->QueryInterface( IID_IWiaDataTransfer, (void**)&pWiaDataTransfer );
            if( SUCCEEDED( hr ) )
            {
                CWiaDataCallback *pCallback = new CWiaDataCallback;
                if( pCallback )
                {
                    IWiaDataCallback *pWiaDataCallback = NULL;
                    hr = pCallback->QueryInterface( IID_IWiaDataCallback, (void**)&pWiaDataCallback );
                    if( SUCCEEDED( hr ) )
                    {
                        STGMEDIUM stgMedium = {0};
                        stgMedium.tymed = TYMED_FILE;
                        hr = pWiaDataTransfer->idtGetData( &stgMedium, pWiaDataCallback );
                        ... 
```

`pWiaItem`“根”项目在哪里`pWiaItem2`，“顶部”项目在哪里。

有人知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T08:31:48.617

`WiaItem`解决方案是再次枚举本地上下文中的“根”项。我在 init 方法中执行此操作并将指针存储到“顶部”，不知何故，它似​​乎变得无效，而 HRESULT 没有反映这一点。在我更改代码之后，以便`WiaItem`在我使用它之前识别出“顶部”，一切都很好。

# wpf - wpf 事件处理程序

> ID：12104159
> 
> 赞同：1
> 
> 时间：2012-08-24T06:24:14.670
> 
> 标签：wpf, event-handling, html.dropdownlistfor

我想要一个在鼠标离开控件并转到另一个应用程序时引发的事件。我有一个自定义的下拉列表，即使鼠标离开控件并进入另一个应用程序，它在打开时仍然保持打开状态。因此，下拉菜单出现在该应用程序上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T06:40:08.983

您需要 Mouse.MouseLeave 事件：http: [//msdn.microsoft.com/en-us/library/system.windows.input.mouse.mouseleave.aspx](http://msdn.microsoft.com/en-us/library/system.windows.input.mouse.mouseleave.aspx)

# codeigniter - 如何在 CodeIgniter 中显示错误消息

> ID：12104164
> 
> 赞同：6
> 
> 时间：2012-08-24T06:24:23.037
> 
> 标签：codeigniter, codeigniter-2

在我的控制器中，我输入了这段代码来检查购物车是否为空：

```
if (!$this->cart->contents()){
    $this->session->set_flashdata('message', 'Your cart is empty!');
}

$this->data['message'] = $this->session->flashdata('message');

$this->load->view('templates/header', $this->data);
$this->load->view('bookings', $this->data);
$this->load->view('templates/footer'); 
```

在我的“预订”视图中，我设置了此代码以显示消息：

```
<div id="infoMessage"><?php echo $message;?></div> 
```

但在第一页加载消息“您的购物车是空的！” 没有显示。但是，当我按 F5 键或刷新浏览器时，它会显示。

我已经阅读了 codeigniter 的手册，上面写着“CodeIgniter 支持“flashdata”，或者只能用于下一个服务器请求的会话数据，然后会自动清除。

但是，我不知道在哪里设置此消息，因此它将在“下一个服务器请求”中可用。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-24T07:39:27.083

无需将数据传递给视图并将其分配为 flashdata。

它第一次不起作用的原因是 flashdata 仅可用于下一个服务器请求。加载视图不是服务器请求。但是，刷新页面是。

有几个解决方案：

*   直接传递数据并加载视图。（不使用闪存数据。）
*   使用 flashdata 并重定向到页面。

## 直接传递数据

你可以直接传递它（我个人会选择这个选项 - 我不确定你为什么要在这种情况下使用 flashdata，我想你总是想通知用户如果他们购物车是空的...）：

**控制器：**

```
if (!$this->cart->contents())
{
    $this->data['message'] = 'Your cart is empty!';
}

$this->load->view('templates/header', $this->data);
$this->load->view('bookings', $this->data);
$this->load->view('templates/footer'); 
```

**看法：**

```
<div id="infoMessage"><?php echo $message;?></div> 
```

## 使用闪存数据

或者，如果你想使用 flashdata，那么：

**控制器：**

```
if (!$this->cart->contents())
{
    $this->session->set_flashdata('message', 'Your cart is empty!');
}

redirect('/your_page'); 
```

**看法：**

```
 <div id="infoMessage"><?php echo $this->session->flashdata('message');?></div> 
```

如果你想使用这个方法，你不能简单地加载视图——由于我上面解释的服务器请求问题——你必须重定向用户，使用`redirect('/your_page');`，和[URL Helper](http://ellislab.com/codeigniter/user-guide/helpers/url_helper.html) `$this->load->helper('url');`。您还可以使用本机 PHP[`header`](http://php.net/manual/en/function.header.php)函数发送适当的 HTTP 标头。第一次加载视图将不起作用。

* * *

您可以使用它`$this->session->keep_flashdata('message');`来为其他请求保留数据。

我还会检查您是否自动加载会话库或将其加载到控制器的构造函数中：（`$this->load->library('session');`我很确定您会这样做，但无论如何都值得检查。）

最后，我知道一些将会话数据存储在数据库中的人可能会遇到 flashdata 问题，因此如果上述方法都没有帮助，这可能值得研究。

附带说明一下，我个人会检查以确保在回显之前设置了变量。

# iphone - 用 iphone 发送 FM 广播信号

> ID：12104171
> 
> 赞同：-1
> 
> 时间：2012-08-24T06:24:58.633
> 
> 标签：iphone, ios

我知道 iPhone 和 iPod touch 设备已经能够接收 FM 广播信号，我的问题是 iphone 可以像某些 FM 广播设备一样广播 FM 广播信号吗？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:29:52.617

你会误解一些东西。

**iPhone 和 iPod touch 无法接收或广播 FM 无线电信号。**

*iPod nano*（第 6代^）只能接收 FM 广播信号，请参阅**[此文档](http://support.apple.com/kb/HT4316)**了解详细信息。

您**可以购买特殊的硬件扩展**来广播无线电信号。**[您会在此处](http://www.techradar.com/news/audio/portable-audio/best-fm-transmitter-for-iphone-ipod-5-on-test-1035323)**或其他任何地方找到一些无线电发射器。

# search - 用于在视图中进行简单搜索的操作按钮 - Lotus Notes 7

> ID：12104177
> 
> 赞同：0
> 
> 时间：2012-08-24T06:25:48.070
> 
> 标签：search, view, action, lotus-notes

我想创建一个操作按钮来进行简单的搜索（基于一些参数，用户可以在其中介绍他想要搜索的内容的字段）。我不想使用很多很多脚本库等等......有什么最简单的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:09:59.227

假设您要搜索视图，您可以简单地将脚本直接写入视图上的[操作按钮](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=/com.ibm.designer.domino.main.doc/H_WRITING_SCRIPTS_AND_FORMULAS_FOR_ACTIONS.html&resultof=%22view%22%20%22action%22%20%22button%22%20)。如果您需要提示输入参数，您可以使用[对话框](http://www.breakingpar.com/bkp/home.nsf/0/81862484CB3919C987256AFB0012ED3D)（或查看[此处](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=/com.ibm.designer.domino.main.doc/H_DIALOGBOX_METHOD.html)），这将需要在数据库中创建表单设计，或者只是一系列输入[框](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=%2Fcom.ibm.designer.domino.main.doc%2FLSAZ_INPUTBOX_FUNCTION.html&resultof=%22inputbox%22%20)。输入框非常有限，但不需要数据库中的额外设计元素，不像对话框需要表单，但您几乎可以做任何您需要的界面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T22:38:43.640

您可以使用基于表单的搜索。在数据库上启用全文搜索，然后单击查看/搜索此视图。搜索栏打开后，单击更多（右侧）。单击表单按钮（第 4 个），然后选择您的搜索表单。可以在 Designer 中按表单定义哪些表单可用作搜索表单。请参阅“表单属性”对话框中的“包含在搜索生成器中”选项。

# magento - 使用 createEntityTables 时出错

> ID：12104178
> 
> 赞同：1
> 
> 时间：2012-08-24T06:25:59.483
> 
> 标签：magento

当我包含 $installer->createEntityTables( $this->getTable('red/red') ); 时出现此错误

我正在使用企业 1.11，我还看到了替代方案，即键入所有非常耗时的东西。有人可以告诉我谁使这个功能起作用。

```
 [previous:Exception:private] => 
    [xdebug_message] => ( ! ) Mage_Eav_Exception: Can't create table: red_faqs_eavexample in C:\wamp\www\ubt.onlocal.com.au\app\Mage.php on line 549
Call Stack
#TimeMemoryFunctionLocation
10.0003690528{main}(  )..\index.php:0
20.00271167384Mage::run(  )..\index.php:81
30.01012776112Mage_Core_Model_App->run(  )..\Mage.php:640
40.02304545784Mage_Core_Model_App->_initModules(  )..\App.php:338
50.46364871080Mage_Core_Model_Resource_Setup::applyAllUpdates(  )..\App.php:412
60.528411772936Mage_Core_Model_Resource_Setup->applyUpdates(  )..\Setup.php:235
70.528611769664Mage_Core_Model_Resource_Setup->_installResourceDb(  )..\Setup.php:327
80.528611769824Mage_Core_Model_Resource_Setup->_modifyResourceDb(  )..\Setup.php:421
90.529511778144include( 'C:\wamp\www\ubt.onlocal.com.au\app\code\local\Magelocal\Red\sql\red_setup\install-0.1.0.php' )..\Setup.php:624
100.529711778712Mage_Eav_Model_Entity_Setup->createEntityTables(  )..\install-0.1.0.php:6

)
Error in file: "C:\wamp\www\ubt.onlocal.com.au\app\code\local\Magelocal\Red\sql\red_setup\install-0.1.0.php" - Can't create table: red_faqs_eavexample

#0 C:\wamp\www\ubt.onlocal.com.au\app\code\core\Mage\Core\Model\Resource\Setup.php(645): Mage::exception('Mage_Core', 'Error in file: ...')
#1 C:\wamp\www\ubt.onlocal.com.au\app\code\core\Mage\Core\Model\Resource\Setup.php(421): Mage_Core_Model_Resource_Setup->_modifyResourceDb('install', '', '0.1.0')
#2 C:\wamp\www\ubt.onlocal.com.au\app\code\core\Mage\Core\Model\Resource\Setup.php(327): Mage_Core_Model_Resource_Setup->_installResourceDb('0.1.0')
#3 C:\wamp\www\ubt.onlocal.com.au\app\code\core\Mage\Core\Model\Resource\Setup.php(235): Mage_Core_Model_Resource_Setup->applyUpdates()
#4 C:\wamp\www\ubt.onlocal.com.au\app\code\core\Mage\Core\Model\App.php(412): Mage_Core_Model_Resource_Setup::applyAllUpdates()
#5 C:\wamp\www\ubt.onlocal.com.au\app\code\core\Mage\Core\Model\App.php(338): Mage_Core_Model_App->_initModules()
#6 C:\wamp\www\ubt.onlocal.com.au\app\Mage.php(640): Mage_Core_Model_App->run(Array)
#7 C:\wamp\www\ubt.onlocal.com.au\index.php(81): Mage::run('', 'store')
#8 {main} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T02:14:40.943

这是一个不应该触发错误的问题。长话短说，MySQL 不支持 DDL 事务，并且在该方法的过程中，在 SQL 中发现了 DDL 例程并引发了错误。

简单的答案是注释掉这一行：

* * *

**lib/Varien/Db/Adapter/PDO/Mysql.php**

```
protected function _checkDdlTransaction($sql)
{
    if (is_string($sql) && $this->getTransactionLevel() > 0) {
        $startSql = strtolower(substr(ltrim($sql), 0, 3));
        if (in_array($startSql, $this->_ddlRoutines)) {
            // comment this out: trigger_error(Varien_Db_Adapter_Interface::ERROR_DDL_MESSAGE, E_USER_ERROR);
        }
    }
} 
```

这样做可以安装您的模块。显然，破解核心文件是一个糟糕的主意。您应该扩展该方法或允许 SQL 运行，然后将生成的 SQL 转换为 Magento MySQL API，如核心 sql 设置脚本中所示。后者是一个主要的痛苦......更好的想法是扩展该方法。

[更多](http://zaclee.net/magento/magento-1-7-custom-module-setup-createentitytables-method-fails)关于背景信息和故障排除的信息。

# winapi - 使用安装的第 3 方文件资源管理器。如何通过win32获取注册默认资源管理器程序？

> ID：12104182
> 
> 赞同：0
> 
> 时间：2012-08-24T06:26:10.807
> 
> 标签：winapi

我想这就像总指挥官或类似类型的程序，它们替换了默认文件夹浏览器。我如何通过win32知道用户使用什么替换程序而不是explorer.exe

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:51:25.403

Windows 中没有官方支持的机制来更改默认文件夹浏览器。然而，任何“替换资源管理器”的东西都必须将自己设置为 HKEY_CLASSES_ROOT\Folder 键的默认操作，所以我将从那里开始。

# javascript - 添加到 CollectionView 的内容后，第 1 行的 Ember 错误

> ID：12104183
> 
> 赞同：1
> 
> 时间：2012-08-24T06:26:19.473
> 
> 标签：javascript, ember.js

使用 Ember js，我得到了一个基于树的视图结构，每个视图都有一个文本框。在任何框中输入文本并点击“输入”应该会向该视图添加“回复”；也就是说`<ul>`，在原始视图下方添加另一个视图，通过 缩进。

问题是，当我点击“输入”时，ember 会在 ember.js 脚本的第 1 行出现错误并崩溃。任何想法可能是什么问题？

JS 小提琴在这里：http: [//jsfiddle.net/TcgJB/1/](http://jsfiddle.net/TcgJB/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T09:48:07.847

好的，我想已经修好了你的小提琴：http: [//jsfiddle.net/Sly7/hVdab/](http://jsfiddle.net/Sly7/hVdab/)

我认为主要问题在于

```
Bap.Reply = Ember.Object.extend({
  text: null,
  children: [], // don't do that, instead declare it as null, and create
                // an empty children at instanciation time 
  addReply: function(text) {
    this.get('children').addObject(Bap.Reply.create({text:text, content: []}));
  },
});

//or an equivalent implementation, if you want each instance to be created with a default empty array:

Bap.Reply = Ember.Object.extend({
  text: null,
  children: null,

  //overriding the init method (kind of constructor for Ember's Objects
  init(): function() {
    this._super(); // very important, don't forget it
    this.set('children', []);
  },

  addReply: function(text) {
    this.get('children').addObject(Bap.Reply.create({text:text, content: []}));
  },
}); 
```

当你要声明一个类时，如果它拥有一个数组child，你必须将它声明为null，然后`[]`在创建时初始化它。这是从 ember 开始时的常见问题。事实上，潜在的行为是所有的实例都`Bap.Reply`将共享相同的子数组。

所以当你将一些孩子添加到第一个中时，这可能会导致一个糟糕的结构，因为所有孩子都有相同的父母，有些孩子和他们的兄弟姐妹有相同的孩子等等......我认为在那之后，Ember 会丢失它想要更新绑定并渲染视图，因此您会遇到意外和奇怪的错误。

顺便说一句，为了尊重 Ember 命名约定，我已经修正了一些小错误，因为类应该是驼峰式的。

这是两个有用的链接，详细说明：

*   [Ember 陷阱，第 6 段](http://codebrief.com/2012/03/eight-ember-dot-js-gotchas-with-workarounds/)
*   [关于命名约定](https://stackoverflow.com/questions/11129338/ember-naming-capitalization-convention)

# php - 如何在 my.cnf 文件中设置内存限制

> ID：12104185
> 
> 赞同：19
> 
> 时间：2012-08-24T06:26:36.277
> 
> 标签：php, mysql

如何在`my.cnf`文件中设置内存限制。我试过了`memory_limit = 64M`。但它在重新启动 MYSQL 服务器时显示错误。任何人请帮助...

**我的.cnf**

```
[mysqld]
datadir=/home/mysql/
tmpdir=/home/mysqltmp
#max_connections = 175 #was 175
max_connections = 80
#max_connect_errors = 350 #was 250
max_connect_errors = 250
safe-show-database
skip-locking
key_buffer = 1024M # was 128M
max_allowed_packet = 6M
myisam_sort_buffer_size = 64M

#old settings, for 900 ish max maxconn
#sort_buffer_size = 32M
#read_buffer_size = 32M
#read_rnd_buffer_size = 32M

sort_buffer_size = 5M
read_buffer_size = 5M
read_rnd_buffer_size = 5M

query_cache_size= 1024M
query_cache_limit= 16M
max_heap_table_size = 128M
tmp_table_size = 128M
thread_concurrency = 16
wait_timeout = 10
innodb_file_per_table
innodb_log_file_size = 10485760
open_files_limit = 8192
low_priority_updates = 1 
#log_slow_queries = /var/log/mysql_slow.log
#log_queries_not_using_indexes = 1
#slow_queries_log_file = /var/log/mysql_slow.log
memory_limit = 64M 
# who set these? these are NOT memory settings, but rather integer settings.
#table_cache = 1024M
#thread_cache_size = 8M

table_cache = 512
thread_cache_size = 8

[mysqldump]
quick
max_allowed_packet = 16M

[mysql]
no-auto-rehash

[isamchk]
key_buffer = 128M
sort_buffer_size = 128M
read_buffer = 2M
write_buffer = 2M

[myisamchk]
key_buffer = 128M
sort_buffer_size = 128M
read_buffer = 2M
write_buffer = 2M 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-24T06:37:02.173

`memory_limit` MySQL`my.cnf`文件中没有这样的变量。您只能从[MySQL 服务器系统变量中添加变量](http://dev.mysql.com/doc/refman/5.6/en/server-system-variables.html)。阅读这篇[Mysql 如何使用内存](http://dev.mysql.com/doc/refman/5.5/en/memory-use.html)

这取决于您的 MySQL 服务器的 RAM 大小。您可以`my.cnf`根据以下 MySQL 内存需求计算的基本公式相应地配置文件：

```
key_buffer_size + (read_buffer_size + sort_buffer_size) * max_connections = K bytes of memory 
```

您可能需要配置这些基本参数。

my.cnf 文件中的示例变量：

```
#MyISAM
key_buffer_size = 8G
sort_buffer_size = 1M
read_buffer_size = 1M
read_rnd_buffer_size = 2M
myisam_sort_buffer_size = 2M
join_buffer_size = 2M

#Innodb
innodb_buffer_pool_size = 16G
innodb_additional_mem_pool_size = 2G
innodb_log_file_size = 1G
innodb_log_buffer_size = 8M
innodb_flush_log_at_trx_commit = 1
innodb_lock_wait_timeout = 30
innodb_file_format=barracuda 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T06:41:06.720

MySQL 中没有 memory_limit 限制设置。管理或限制 MySQL 内存使用的唯一方法是降低缓存、缓冲区和池大小的设置（确切的设置名称取决于您使用的存储引擎。一些适用于 MyISAM 引擎的设置（默认引擎） 是：

```
table_cache=1024
record_buffer=1M
sort_buffer_size=2M
read_buffer_size=2M
read_rnd_buffer_size=2M
myisam_sort_buffer_size=64M
thread_cache_size=128
query_cache_limit=1M
query_cache_size=64M
query_cache_type=1 
```

对于 InnoDB，您有：

```
innodb_buffer_pool_size = 256M
innodb_additional_mem_pool_size = 20M
innodb_log_file_size = 64M
innodb_log_buffer_size = 8M 
```

如果您希望更改 PHP 中的内存限制，那么该行（memory_limit = 64M）应该在 php.ini 文件中，而不是 my.cnf 中，它是 MySQL 的配置文件。

# hadoop - 有没有办法修复HDFS的随机因子的种子

> ID：12104187
> 
> 赞同：1
> 
> 时间：2012-08-24T06:26:57.143
> 
> 标签：hadoop, hdfs

我正在使用 HADOOP-0.22 对 HDFS 进行一些实验。另一方面，为了使我的实验可重复，我需要修复一些随机因素的 HDFS 种子。具体来说，每次我重新格式化文件系统并导入相同的数据集时，我希望数据块分配到与之前的实验相同的数据节点，并且具有相同的名称。我不知道有人已经这样做了。感谢任何回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T20:59:07.717

您的 Hadoop 版本支持*可插入*的块放置策略，您可以根据需要提供更加静态或非随机的策略。请参阅[HDFS-385](https://issues.apache.org/jira/browse/HDFS-385)了解更多技术细节，以及从那时起对该接口的相关演变。

# algorithm - 算法复杂性：Strassen 的算法在多项式上比 n 立方正则矩阵乘法要快。“多项式更快”是什么意思？

> ID：12104192
> 
> 赞同：0
> 
> 时间：2012-08-24T06:27:21.377
> 
> 标签：algorithm, matrix, multiplication

Strassen 的算法在多项式上比 n 立方正则矩阵乘法要快。“多项式更快”是什么意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T06:38:45.740

您的问题与“复杂性”的理论概念有关。例如，据说正则矩阵乘法的复杂度为 O(n^3)。这意味着随着维度“n”的增长，运行算法所需的时间，T(n) 保证不会超过函数“n^3”（三次函数）相对于一个正常数。形式上，这意味着：

存在一个正阈值 n_t，使得对于每个 n >= n_t，T(n) <= c * n^3，其中 c > 0 是某个常数。

在您的情况下，Strassen 算法已被证明具有复杂性 O(n^log7)。由于 log7 = 2.8 < 3，因此随着 n 的增长，可以保证 Strassen 算法比经典乘法算法运行得更快。

作为旁注，请记住，对于非常小的 n 值（即当 n < n_t 以上时），此语句可能不成立。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T06:36:35.183

具有复杂性`O(n^3)`且`O(n^2)`两者都是多项式的算法。但第二个是**多项式更快**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T06:35:01.147

在这种情况下，我假设这意味着两种算法都有多项式运行时间，但 Strassen 算法更快。

那只是因为标准（即使是立方体）是多项式的。

无论如何，我不认为“多项式更快”这个术语是一个标准术语。

# html - 垂直居中的元素，其上方有最小边距/填充？

> ID：12104193
> 
> 赞同：0
> 
> 时间：2012-08-24T06:27:29.697
> 
> 标签：html, css

我在页面上有一个垂直居中的幻灯片，但是我想以某种方式添加一个“限制”，可以说它在较小的屏幕上向上滑动页面的高度。

[http://www.visioncreativegroup.com.au/demos/bps/index.php/production/theatre](http://www.visioncreativegroup.com.au/demos/bps/index.php/production/theatre)

如果您调整窗口大小，它将达到幻灯片位于导航栏和主徽标顶部的位置。基本上，一旦屏幕尺寸达到足够小的尺寸，它就需要停在这些元素的底部。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:18:28.360

我会将网站的幻灯片部分和标题部分分开。所以你有 3 个水平切片：页眉、幻灯片、页脚。然后您可以将幻灯片置于中间部分的中心，并且它永远不会超过标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T07:39:17.760

试试我为您设置的这个小演示，看看您是否可以将项目中的 HTML 切换为类似的内容：

`HTML:`

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Demo</title>

            <!-- Insert below CSS here -->
            <!-- Insert JQuery here (http://code.jquery.com/jquery-latest.min.js) -->
            <!-- Insert below JS here -->
    </head>

    <body>
        <div id="shell">
            <div id="head">Header.</div>
            <div id="slideshow">Slideshow.</div>
            <div id="foot">Footer.</div>
        </div>
    </body>
</html> 
```

`CSS:`（主要用于演示）：

```
*{ margin: 0; padding: 0; }
div#head{ height: 200px; background: blue; }
div#foot{ height: 100px; background: red; }
div#slideshow{ height: 300px; background: green; } 
```

`JavaScript:`

```
// Fix position initially and on each window resize.
$(window).resize(fix);
$(document).ready(fix);

function fix()
{
    // Work out position value.
    var base = $("div#slideshow").position().top;
    var middle = $(window).height() / 2;
    var hw = $("div#slideshow").height() / 2;

    // Position top either at the position determined above, or 0 if it bypasses the top of the page.
    var destination = Math.max(middle - base - hw, 0);
    $("div#shell").offset({ top: destination });
} 
```

[您可以在此处获取完整的工作示例](http://pastebin.com/DmKCie8x)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T06:31:21.257

`position: absolute;`从`.production-scroll`班级中删除

如果没有必要`position: fixed;`也删除`#sticky-footer`

# javascript - GET 在 POST 不工作的情况下工作正常 XMLHttpRequest

> ID：12104194
> 
> 赞同：2
> 
> 时间：2012-08-24T06:27:36.733
> 
> 标签：javascript, android, cordova, xmlhttprequest

我的 GET 请求工作正常并以 xml 响应。 [https://mydomain.com/mypage.php?id=123&nm=ak_dhara](https://mydomain.com/mypage.php?id=123&nm=ak_dhara) 注意：我们的 php 页面位于 https。

但是 POST 不起作用。

```
xhttp.open("POST"," https://mydomain.com/mypage.php",true);
xhttp.setRequestHeader("Content-type","application/xhtml+xml");
xhttp.send("id=123&nm=ak_dhara"); 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T02:33:19.290

`xhttp.setRequestHeader("Content-type","application/xhtml+xml")`是错的。如果您想请求 XHTML 内容，那么正确的请求头名称是`Accept`. 如果您想识别您正在发送的内容类型，那么您正在发送`application/x-www-form-urlencoded`. 尊重标头的服务器将尝试读取您发送的数据，作为一种使用格式`id=123&nm=ak_dhara`编码的特殊请求；`application/xhtml+xml`并且没有 PHP 服务器知道如何做到这一点。它可能在某些浏览器中有效，因为它们知道这不是有效的内容类型，并且它们会忽略该标头并发送正确的值。

顺便说一句，`application/x-www-form-urlencoded`是默认的，所以你不必明确地设置它。

# iphone - 需要从 uiwebview 打开 Safari 中的链接吗？

> ID：12104198
> 
> 赞同：4
> 
> 时间：2012-08-24T06:27:43.110
> 
> 标签：iphone, ios, uiwebview

我已经将带有转义序列的整个 html 文档存储在一个变量中......它包含一些锚标记......如果点击了它，它应该在 safari 中打开，而不是在我的应用程序 webview 中......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T06:30:13.263

您可以为此使用以下代码。

```
 -(BOOL) webView:(UIWebView *)inWeb shouldStartLoadWithRequest:(NSURLRequest *)inRequest navigationType:(UIWebViewNavigationType)inType {
        if ( inType == UIWebViewNavigationTypeLinkClicked ) {
            [[UIApplication sharedApplication] openURL:[inRequest URL]];
            return NO;
        }

        return YES;
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T06:32:07.663

您可以使用 UIWebViewDelegate 协议来实现这一点：

```
// assuming webView is a valid UIWebView
webView.delegate = self;

- (BOOL)webView:(UIWebView *)wv shouldStartLoadWithRequest:(NSURLRequest *)rq navigationType:(UIWebViewNavigationType)nt
{
    if (nt == UIWebViewNavigationTypeLinkCkicked) {
        [[UIApplication sharedApplication] openURL:[rq URL]];
        return NO;
    }

    return YES;
} 
```

# php - 从“消息”表中选择数据，没有错误，但它不起作用。MYSQL、PHP

> ID：12104200
> 
> 赞同：2
> 
> 时间：2012-08-24T06:27:54.603
> 
> 标签：php, mysql

我正在尝试拥有一组数据，我可以像这样从表中提取这些数据：

```
echo $message_data['content']; 
```

所以我这样声明 $message_data ：

```
 $message_data = message_data($_GET['id'],'id' ,'content', 'sender', 'addressee','support','date'); 
```

message_data() 函数是这样写的：

```
function message_data($message_id) {
$data = array();
$message_id = (int)$message_id;

$func_num_args = func_num_args();
$func_get_args = func_get_args();

if($func_num_args > 1)
{
    unset($func_get_args[0]);

    $fields = '`'  .  implode('`, `' , $func_get_args) . '`';
    $data = mysql_fetch_assoc(mysql_query("SELECT $fields FROM `messages` WHERE `id` = $message_id") or die(mysql_error()));
    return $data;
} } 
```

当我尝试提取有关用户的数据时，此功能的工作方式类似，我只是复制并粘贴它并稍微调整它。问题是，没有错误，是的，我确实使用 GET 变量输入了浏览器。错误在哪里？或者，如果有更好的方法来做到这一点，我会很高兴听到。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T06:42:47.800

```
$data = mysql_fetch_assoc(mysql_query("SELECT $fields FROM `messages` WHERE `id` = $message_id") or die(mysql_error())); 
```

这一行是问题所在，括号内似乎 foo() 或 bar() 等于 foo() || bar()，这不是你想要的，所以把它放在一边：

```
$res = mysql_query("SELECT $fields FROM `messages` WHERE `id` = $message_id") or die(mysql_error());
$data = mysql_fetch_assoc($res); 
```

编辑：

只是不要使用 or like this，或者至少不要使用 or like that 的返回值。

一般，

```
A or B 
```

如果 A 为假，则 PHP 将检查 B；如果 A 为真，则无需检查 B。

但我猜

```
$c = A or B 
```

实际上是

```
($c = A) or B 
```

# c# - MVC3 不显眼的验证输入组并突出显示组中的所有字段

> ID：12104202
> 
> 赞同：1
> 
> 时间：2012-08-24T06:28:10.893
> 
> 标签：c#, asp.net-mvc, validation

我的问题与以下链接中提出的先前问题非常相似，

[MVC3 不显眼的验证输入组](https://stackoverflow.com/questions/5816313/mvc3-unobtrusive-validation-group-of-inputs/5817958#5817958)

基本上我需要验证 3 个或更多输入字段（至少需要一个）。例如，我有电子邮件、传真、地址。定义如下：

```
public class MyViewModel
{ 
    public string Email { get; set; }
    public string Fax { get; set; }
    public Address Address { get; set; }
}

public class Address 
{ 
    public string Street { get; set; }
    public string Suburb { get; set; }
} 
```

我需要填写 Email、Fax 或 Address.Suburb，如果失败，我希望突出显示所有字段，而不仅仅是一个字段（这是上一个链接中的解决方案所包含的内容）。

请注意，我已经完成了所有服务器端验证，我只需要知道如何在客户端使用 MVC3 不显眼地完成此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T07:30:57.977

您可以尝试`AtLeastOneRequired`在所有属性上应用该属性：

```
public class MyViewModel
{
    [AtLeastOneRequired("Email", "Fax", "Phone", ErrorMessage = "At least Email, Fax or Phone is required")]
    public string Email { get; set; }

    [AtLeastOneRequired("Email", "Fax", "Phone", ErrorMessage = "At least Email, Fax or Phone is required")]
    public string Fax { get; set; }

    [AtLeastOneRequired("Email", "Fax", "Phone", ErrorMessage = "At least Email, Fax or Phone is required")]
    public string Phone { get; set; }
} 
```

# c++ - 在 MSVS 2010 中一次设置多个断点

> ID：12104206
> 
> 赞同：0
> 
> 时间：2012-08-24T06:28:21.440
> 
> 标签：c++, debugging

我有 cpp 代码，我想将断点放在每个`if`语句和每个`else`语句中，而不是单独进入它们。我怎样才能做到这一点？任何提示或技巧？嗯，我正在使用 Express Edition 2010。请建议！Rgds，软软的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:39:18.437

创建 Visual Studio 宏。以下[过程](http://msdn.microsoft.com/en-us/library/b4c73967%28v=vs.80%29.aspx)逐步创建一个简单宏的示例。

# silverlight - Silverlight 5 MVVM 最佳实践

> ID：12104209
> 
> 赞同：-1
> 
> 时间：2012-08-24T06:28:37.913
> 
> 标签：silverlight, mvvm, silverlight-5.0

看到 MVVM 如何被高度视为一种良好的系统设计模式，我想我可能会跳上去尝试一下 MVVM。

在我开始提问之前，请先介绍一下我自己的背景：

我已经使用 ASP.NET Webforms 进行了几年的开发。我还在 ASP.NET MVC 中进行了相当多的开发，对此我很满意。

目前，我们有许多使用 ASP.NET MVC 3 编写的“骨干”应用程序，我们会在与我们接洽时对其进行定制并出售给我们的客户。这些应用程序都是供内部使用的，因此插件不会有太大问题。

开发的真正问题在于，对于具有复杂业务规则的大型业务应用程序，ASP.NET MVC 往往会拖慢我们的速度（编写 jQuery / javascript > 服务器端处理 > 返回结果，使用 jQuery 通知 > 更改视图，沿着这个线）。

然后我开始寻找可以帮助我们提高交付时间和响应能力的答案（好吧，我们都知道 JavaScript 是如何杀死我们的），我的搜索把我带到了 Silverlight（我们有时间改变，不用担心） ）。

那么问题来了：

1.  我在网上遇到过许多 Silverlight MVVM 示例，但它们都展示了应用程序，就像只与一个数据库表进行交互一样简单。MVVM 模式是否非常适合大型应用程序？
2.  在 MVC 中，我习惯于 Ninject 的依赖注入将 UnitOfWork 的实现传递给我的控制器。在我在网上找到的所有示例中，没有一个使用任何形式的 DI。真的没有必要吗？既然 MVVM 的思想是解耦，那为什么不把 ViewModel 和 Model 也解耦呢？
3.  我阅读了 Jeremy Likness 出版的一本书，名为《设计 Silverlight 业务应用程序》。他使用 MEF 进行解耦，我认为这并不适合我们的应用程序。我们真的不需要做“热插拔”。你对此有何看法？
4.  MVVM 是关于命令、数据绑定和无代码隐藏的全部内容。如果我想与不暴露给命令的 UI 交互怎么办？（我不太确定，我猜是 ListView OnSelectionChange？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T04:10:43.043

要添加到上一个答案：

1.  我们正在开发一个大型企业级 Silverlight 平台和一组使用 MVVM 的应用程序。似乎工作得很好。

2.  我们正在广泛使用 DI。我们的系统建立在 Prism 之上。Prism 包含大量各种复杂性的示例应用程序，说明了 DI 在 MVVM 中的使用。

3.  我们使用 Unity 作为我们的 IoC 容器。Prism 包含 MEF 和 Unity 的指南。Unity 似乎是一种更传统的 IoC 方法。

4.  在绝大多数情况下，使用绑定和命令可以满足我们的需求。对于其他人，我们使用表达式触发器和操作。如有必要，您还可以创建自定义触发器/操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T11:15:12.700

我对你所有的答案都没有答案（从未使用过 MEF），但我可以告诉你我的经验：

1-我一直在开发一个相当大的 Silverlight 应用程序，MVVM 非常适合拥有一个可维护的应用程序。由于应用程序大小，我们遇到的更大问题是因为 Silverlight，而不是 MVVM 8-)

2-我没有使用太多，但它在很多情况下都很有用。有几个工具包可以将 DI 与 Silverlight 一起使用，例如 MVVM Light Toolkit： [http ://compiledexperience.com/blog/posts/blendable-mvvm-dependency-injection-and-unit-testing](http://compiledexperience.com/blog/posts/blendable-mvvm-dependency-injection-and-unit-testing)

4- 对于 UI 之间的交互，您可以使用中介者模式。同一个 MVVM Light Toolkit 有一个 Messenger 来订阅、发送和接收消息并保持每个层的解耦。

希望这可以帮助你;-)

# android - 尝试在 android 系统时间中设置时间和日期时，在 AlarmManager 中找不到 setTime(long) 方法

> ID：12104213
> 
> 赞同：0
> 
> 时间：2012-08-24T06:28:59.523
> 
> 标签：android, alarmmanager

我正在尝试在 Android 设备上设置系统时间和日期。

我认为下面的代码可以工作，但它会产生错误`method not found: setTime(long)`

```
Calendar c = Calendar.getInstance();
c.set(2010, 1, 1, 12, 00, 00);
AlarmManager am = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
am.setTime(c.getTimeInMillis()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:52:35.660

应用程序无法更改（非根）Android 设备上的日期或时间。

从文档中`AlarmManager.setTime()`：

> 需要权限 android.permission.SET_TIME。

请参阅[http://developer.android.com/reference/android/app/AlarmManager.html](http://developer.android.com/reference/android/app/AlarmManager.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-24T16:31:05.267

> 这可能会有所帮助-------广泛的演员班------------------------- --

```
public class TimeReceiver extends BroadcastReceiver {

@Override
public void onReceive(Context ctx, Intent intent) {

    Toast.makeText(ctx, "It's time to WAKE UP!!!!", Toast.LENGTH_SHORT).show();
} 
```

}

> ----------------在Activity类中写这段代码-------------------------

```
PendingIntent sender = null;
    Intent intent = null;
    Calendar systemtime = Calendar.getInstance();
    systemtime.setTime(new Date());

    Calendar timeToTriggerAlarm = Calendar.getInstance();
    timeToTriggerAlarm.set(Calendar.HOUR_OF_DAY, systemtime.get(Calendar.HOUR_OF_DAY));
    timeToTriggerAlarm.set(Calendar.MINUTE, systemtime.get(Calendar.MINUTE));
    timeToTriggerAlarm.set(Calendar.SECOND, 00);

    intent = new Intent(this,TimeReceiver.class);

    sender = PendingIntent.getBroadcast(this, 0, intent,PendingIntent.FLAG_ONE_SHOT);

    AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
    am.set(AlarmManager.RTC_WAKEUP, timeToTriggerAlarm.getTimeInMillis(), sender); 
```

> 注意-打开您的清单文件并单击选项>添加>接收器>浏览>添加类名（这里是 TimeReceiver）

# jquery - 如何使用 $this->request->data('Name.of.the Key') 从 cakephp 控制器中的网页读取 ajax 数据

> ID：12104217
> 
> 赞同：1
> 
> 时间：2012-08-24T06:29:36.663
> 
> 标签：jquery, cakephp-2.1

这是 email_list 管理控制器页面中的代码：

`$idOfCourse = $this->request->data('courseId');`/* 在这两行中，我正在读取从 Js 页面发布的数据*/ `$emailArray = $this->request->data('emailList');`

这是对应JS中的ajax代码 `var data = { courseId : id, emailList: myArray }; //这里我用 2 个字段 courseID 和 emailList 格式化 JSON 格式

```
 $.ajax({  //here I am giving the call
     type:"POST",
     url :"/adata/admin/email_list",
     data: { studentcoursemaildata : data, action : "/adata/admin/template1"}
   }).done(function(){
     window.location.href ="/admin/email/";  /*I am redirecting after the data is being   fetched */
   }); 
```

`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T09:47:51.947

正确解决方案的关键是很好地理解如何访问 JSON 格式的数据。

首先，我们必须读取 studentcourseemaildata，因为它包含整个数据。

它将在控制器中读取如下：

$someVariable = $this->request->data('studentcourseemaildata'); 在适当的控制器中执行此操作后，我们得到一个数组。从中读取相应的组成字段很简单，可以这样完成：

idOfTheCourse = $someVariable('courseId'); $mailArray = $someVariable['emailList'];

而已。

# excel - Excel VbScript 行情问题

> ID：12104218
> 
> 赞同：0
> 
> 时间：2012-08-24T06:29:58.973
> 
> 标签：excel, vbscript

我正在使用 Vbscript 将一些数据写入 excel 然后我将此 excel 对象保存为 txt 文件。我的问题是在将某些行保存为文本文件后包含引号“。下面是我的代码可以帮助我记录这个。

我的输出文本文件是：

```
"Rules*V*ZBEA*892**0010*10*IBM-01**"                    
30,000.00*01/08/2012*21/08/2012****0000013556*01***2600
"Scale value* *********" 
```

这里的问题是第 1 行和第 3 行以引号 (" ") 开头和结尾。

代码是

```
Dim objXL1,name
Set objXL1 = CreateObject("Excel.Application")
objXL1.Workbooks.Add
objXL1.Cells(1 ,1) =  "Rules*V*ZBEA*892**0010*10*IBM-01** "
objXL1.Cells(2,1) =  "30,000.00*01/08/2012*21/08/2012****0000013556*01***2600"
objXL1.Cells(3 ,1) =  "Scale value* *********"
name = objXL1.GetSaveAsFilename(,"Text(MS-DOS)(*.txt),*.txt")
objXL1.ActiveWorkbook.SaveAs   name ,21 ,,21 
objXL1.ActiveWorkbook.Close 0
objXL1.quit 
```

这里还有一个问题是我正在使用 SaveAs 方法来获取文件名。当执行到这一行时，隐藏在主 IE 窗口后面的文件保存对话框有没有办法让这个保存对话框成为焦点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T10:45:49.567

我认为这是因为空格。在您的代码中，第一行中有一个尾随空格。

```
"Rules*V*ZBEA*892**0010*10*IBM-01** "
-----------------------------------^- 
```

如果要导出多个单元格，则需要封装这些单元格以识别单元格值的开始和结束位置。

# php - 重新生成会话 ID 而不使前一个无效？

> ID：12104221
> 
> 赞同：0
> 
> 时间：2012-08-24T06:30:18.323
> 
> 标签：php, security, validation, session, cookies

我有一种情况，我的系统检测到 cookie 是否被劫持。如果我在两个不同的浏览器之间克隆 cookie，那么我的系统可以杀死作为克隆的浏览器上的会话 cookie，从而保护原始会话。

但我有一个问题。如何在同一会话中为克隆的浏览器重新生成新的会话 ID 值？我基本上会给克隆一个新的会话 ID，它是原始会话 ID 数据的干净，而不影响原始会话 ID 数据。

这是我的克隆当前发生的情况：

*   系统检测到此会话是使用不同的指纹启动的，因此它是克隆或劫持的 cookie
*   会话数据无法访问，之前的会话数据使用 session_write_close() 写入磁盘，之后 $_SESSION 变量被完全清除。
*   通知用户代理（浏览器）删除克隆的会话 cookie

我想要发生的事情是不会删除 cookie，而是分配一个新的 - 不同的 - 会话 ID，这样不会删除当前会话，而是创建一个空的新会话。

我不能使用 session_regenerate_id()，因为它希望启动会话并且它将启动前一个会话而不是一个新会话，并且我之前的原始会话数据将丢失并且无法从前一个会话访问。我可以使用 session_id() 函数分配一个新的会话 ID，然后使用它，但是如何生成与 PHP 本身生成的一样安全的会话 ID 值？

基本上我想做的就是如果我检测到克隆会话，那么我仍然想启动会话，但是我想替换克隆会话的会话 ID，同时保持原始会话仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:51:34.257

好吧，显然它可以使用 session_regenerate_id() 方法来接受一个变量，该变量基本上表示它是否应该保留以前的会话数据。使用这个我能够编写一个解决方法。

# stored-procedures - 如何在 ASP.NET 4.0 中的 ADO.NET Entity Framework 4 中使用输入参数调用存储过程

> ID：12104224
> 
> 赞同：0
> 
> 时间：2012-08-24T06:30:29.527
> 
> 标签：stored-procedures, entity-framework-4, ado.net, asp.net-4.0, ado.net-entity-data-model

我正在使用数据库第一模式和 EF4.0。

我创建了一个存储过程，它需要两个输入参数并在结果集中动态返回列，即列在结果中不固定。它可能是 5 或 7 或 10 等等。我正在使用网格视图并将结果集传递到它的数据源中。

在这种情况下如何调用存储过程。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:44:11.827

您必须直接使用 ADO.NET 和数据读取器/数据适配器。EF 只能使用在设计时产生强类型结果的存储过程（您必须为它们创建类）。

# javascript - javascript数组中条目的成对组合

> ID：12104226
> 
> 赞同：6
> 
> 时间：2012-08-24T06:30:34.420
> 
> 标签：javascript, arrays, combinations

我在 javascript 中获得了一组条目，例如：

```
var entries = ["cat", "dog", "chicken", "pig"]; 
```

我现在想遍历它们的所有独特的成对组合。在这个例子中，我想看看：

```
("cat", "dog"),
("cat", "chicken"),
... 
```

在其他语言中，比如 scala，这非常简单。你只是做

```
entries.combinations(2) 
```

javascript库中是否有类似的方法或函数？还是我只需要自己用嵌套循环的丑陋方式编写它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-22T22:37:43.373

```
var arr = ["cat","dog","chicken","pig"].map(function(item,i,arr) {
    return arr.map(function(_item) { if( item != _item) return [item, _item];});
}); 
```

这将返回预期的结果。有一些警告，它在没有 shims 的旧浏览器中不起作用。

此外，重复值是“未定义”，而不是 4 个 3 个数组。我相信有一种更优雅的方式来处理这个问题。

[Array.prototype.map() - MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)

## 编辑

这将为您提供正确的成对组合。

```
var arr = ["cat","dog","chicken","pig"].map(function(item,i,arr) {
    var tmp = arr.map(function(_item) { if( item != _item) return [item, _item];});
    return tmp.splice(tmp.indexOf(undefined),1), tmp;
}); 
```

[数组拼接方法 - MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/splice)

这是相同代码的更具可读性的版本。

```
var myArray = ["cat", "dog", "chicken", "pig"];
var pairwise = myArray.map(function(item, index, originalArray) {
    var tmp = originalArray.map(function(_item) {
        if (item != _item) {
            return [item, _item];
        }
    });
    tmp.splice(tmp.indexOf(undefined), 1); // because there is now one undefined index we must remove it.
    return tmp;
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T06:34:55.523

据我所知不是。我认为你必须坚持嵌套循环。

此处提出了一个类似的问题：[Output each combination of a array of a numbers with javascript](https://stackoverflow.com/questions/4061080/output-each-combination-of-an-array-of-numbers-with-javascript)也许您可以在那里找到答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T22:07:23.917

查看问题后，此答案无法正确解决问题。该问题要求所有组合，但下面的函数组合了数组的所有相邻偶数和奇数索引。

这是我使用reduce做的成对实现

```
function pairwise(arr) {
    return arr.reduce(function(acc, current, index) {
        var isFirstPair = (index % 2) === 0;

        if (isFirstPair) {
            acc.push([current]);
        } else {
            lastElement = acc[acc.length - 1];
            lastElement.push(current);
        }

        return acc;
    }, []);
};

var nums = [1,2,3,4,5,6];

var res = pairwise(nums);

res.forEach(function(elem) {
   console.log(elem); 
}); 
```

回报：

```
[
  [1, 2]
  [3, 4]
  [5, 6]
] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-19T05:17:21.310

使用 ES6 语法，可以使用较短版本的[@rlemon 答案](https://stackoverflow.com/a/14007148/2962507)：

```
["cat","dog","chicken","pig"].sort().reduce(
  (acc, item, i, arr) => acc.concat(
    arr.slice(i + 1).map(_item => [item, _item])
  ),
[]) 
```

This takes care of `undefined`s, and also outputs only *unique* combinations, as per OP's question.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-09-26T15:10:20.173

Here's a generic TypeScript implementation (you can get the pure JS by removing the types):

```
// Returns an array of size
const sizedArray = (n: number): null[] => Array(n).fill(null);

// calls the callback n times
const times = (n: number, cb: () => void): void => {
  while (0 < n--) {
    cb();
  }
};

// Fills up the array with the return values of subsequent calls of cb
const fillWithCb = <T>(n: number, cb: () => T): T[] => sizedArray(n).map(cb);

// Generic to produce pairwise, 3 element wise etc..
const nWise = (n: number): (<T>(array: T[]) => T[][]) => <T>(
  array: T[]
): T[][] => {
  const iterators = fillWithCb(n, () => array[Symbol.iterator]());
  iterators.forEach((it, index) => times(index, () => it.next()));
  return fillWithCb(array.length - n + 1, () =>
    iterators.map(it => it.next().value)
  );
};

// curried nWise with 2 -> pairWise
export const pairWise = nWise(2); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-26T15:24:32.760

The most effective and simple solution can be reduced and slice. However, if you just want to get values. You can use a generator.

```
// Util class 
function pairWise(arr) {
     return {
         [Symbol.iterator]: function *() {
             for(let i =0; i< arr.length; i= i+2)
             yield arr.slice(i, i+2)
         }
     }
    } 
 // How to use it
for(ent of pairWise([1,2,3,4,5,6, 7])){
    console.log(ent)
}
// Output
/*
[ 1, 2 ]
[ 3, 4 ]
[ 5, 6 ]
[ 7 ]
*/ 
```

# qt - Ubuntu 上 https 站点上 QtWebkit 的 SSL 错误

> ID：12104234
> 
> 赞同：0
> 
> 时间：2012-08-24T06:31:16.760
> 
> 标签：qt, ssl, webkit, qtwebkit, libssl

我正在 Ubuntu 12.04 LTS 上构建一个基于 qtwebkit 的浏览器应用程序。当我使用它访问 https 网站时，我遇到了很多 ssl 错误。例如，当我访问 www.paypal.com 时，我收到以下消息：

SSL 错误：[https ://t.paypal.com/ts?v=0.1&t=1341683749338&g=420&e=im&pgrp=main%3Amktg%3Apersonal%3A%3Ahome&page=main%3Amktg%3Apersonal%3A%3Ahome%3A%3A %3ANotInTest%3B](https://t.paypal.com/ts?v=0.1&t=1341683749338&g=420&e=im&pgrp=main%3Amktg%3Apersonal%3A%3Ahome&page=main%3Amktg%3Apersonal%3A%3Ahome%3A%3A%3ANotInTest%3B)

无法找到本地查找的证书的颁发者证书 根 CA 证书不受此用途的信任 无法验证证书

我正在使用 QtSDK 4.8.1。该应用程序链接到 libssl 0.9.8。虽然 ubuntu 自带 libssl 1.0，但预建的 QtSDK 4.8.1 版本链接到 0.9.8。所以我必须安装 libssl 0.9.8 才能让它工作。

相同的应用程序在 windows 和 mac 上运行良好。

如果有人知道如何解决这个问题，请与我分享。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T01:06:27.353

这是另一个 StackOverflow 问题的链接，我认为它可以解决您的问题：[这是使用 QWebPage 设置 SSL 协议的正确方法吗？](https://stackoverflow.com/questions/11941630/is-this-the-right-way-to-set-the-ssl-protocol-with-qwebpage)

此外，qt 论坛上的这个线程：http: [//qt-project.org/forums/viewthread/19690](http://qt-project.org/forums/viewthread/19690)讨论了您遇到的完全相同的问题。

# jpa - CriteriaBuilder 布尔比较

> ID：12104239
> 
> 赞同：6
> 
> 时间：2012-08-24T06:31:32.347
> 
> 标签：jpa, criteria, criteria-api

我目前正在这样做。

```
final CriteriaBuilder builder = ...;
final boolean flag = ...;

if (flag) {
    builder.isTrue(expression);
} else {
    builder.isFalse(expression);
} 
```

我可以这样使用它吗？

```
builder.equals(expression, flag); 
```

这个尝试不会有问题吗？说 null 表示表达式或其他内容。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-24T15:48:27.990

我想你暗示 using`CriteriaBuilder`的`equal`方法。在这种情况下是的，您可以按如下方式使用它：

```
builder.equal(expression, flag); 
```

这相当于：

```
if (flag) {
  builder.isTrue(expression);
} else {
  builder.isFalse(expression);
} 
```

但请注意，如果您使用`Hibernate`作为`JPA`提供者，前一个实现将抛出 NPE，以防万一`expression==null`，而后一个实现不会。

# asp.net-mvc-3 - ASP.MVC 3 - 好了吗？

> ID：12104240
> 
> 赞同：-3
> 
> 时间：2012-08-24T06:31:40.600
> 
> 标签：asp.net-mvc-3

我正在考虑在我的项目中使用 ASP.MVC 3。我想请有经验的建筑师分享他们对此的看法。

它已经很好了吗？它最大的问题是什么？你为什么不使用它？

预先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T11:59:43.690

这些问题之前已经被问过几次了，所以不要重复这里已经说过的内容，而是一些链接应该为您提供您所追求的所有信息：

[使用 ASP.Net MVC 与 Web 表单的最大优势](https://stackoverflow.com/questions/102558/biggest-advantage-to-using-asp-net-mvc-vs-web-forms)

[比较 Web 窗体和 ASP.NET MVC - MSDN 杂志](http://msdn.microsoft.com/en-us/magazine/dd942833.aspx)

[http://blog.mikecouturier.com/2011/03/aspnet-web-forms-versus-net-mvc.html](http://blog.mikecouturier.com/2011/03/aspnet-web-forms-versus-net-mvc.html)

但我的想法很简单：

MVC 框架（asp.net）自 2009 年 3 月 13 日第一个稳定版本发布以来就已经发布了......很好地发布了。

从那时到现在，微软的团队已经做出了大量的改进，我相信未来他们会做出更多的改进。

对我来说，他们的关键点是在 MVC 中构建的应用程序的可测试性。它们只是更容易进行单元测试，这对你来说可能并不重要……尽管它应该是。

依赖注入是 MVC 3 中“融入”的另一件事，如果你喜欢 SOLID 原则，那么 DI 将是你感兴趣的东西。

然后是它的灵活性，这篇文章讲了[13点扩展](http://codeclimber.net.nz/archive/2009/04/08/13-asp.net-mvc-extensibility-points-you-have-to-know.aspx)，现在有点过时了，但还是值得一读。

对我来说，这完全是关于 MVC 相对于 webforms 的好处。

说了这么多，我不得不问你

> 你为什么不使用它？

而且我知道您可能有充分的理由不这样做，一个例子可能是，如果您有一个开发人员团队，他们都是[控制体操运动员](http://wekeroad.com/2008/07/27/asp-net-mvc-avoiding-tag-soup/)，并且喜欢 viewstate 和 webforms，那么迁移到 MVC 可能不是一个好主意你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T06:39:17.960

MVC 模式在大型应用程序中非常舒适。它允许您将应用程序分成几部分：模型、视图和控制器。所以代码更加清晰易懂。我建议阅读：[http ://weblogs.asp.net/shijuvarghese/archive/2008/07/09/asp-net-mvc-vs-asp-net-web-form.aspx](http://weblogs.asp.net/shijuvarghese/archive/2008/07/09/asp-net-mvc-vs-asp-net-web-form.aspx)

# linux - WHOIS 服务器守护进程

> ID：12104243
> 
> 赞同：5
> 
> 时间：2012-08-24T06:32:02.007
> 
> 标签：linux, daemon, redhat, whois

是否有任何 WHOIS 服务器守护程序可以在我的服务器上运行并为我的请求提供服务？

是否可以像 DNS 服务器一样在 WHOIS 层次结构的末尾部署自己的 WHOIS 服务器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T07:04:45.913

看看[rwhois](https://www.rfc-editor.org/rfc/rfc2167)。它至少得到 ARIN 的认可，您可能无法让您的域名注册商将 whois 请求转发给您。但如果他们愿意，您可以运行一个 rwhois 服务器，该服务器将提供附加到末尾的 whois 信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-03T22:37:40.270

查看[https://github.com/DaKnOb/mwhois](https://github.com/DaKnOb/mwhois)以获得完整的 RFC 兼容 whois 服务器。另外，在 sunsite 的某个地方，曾经有 nsca 的 whois 服务器和 whois 客户端的副本。

但请记住，如果要运行自己的 whois 服务器，大多数 whois 客户端都不会找到它，因为默认情况下，域名查询转到 icann/verisign，由 arin 管理机构定义，用于 whois、IP 地址、ASN、反向dns 和公共路由表。

好消息是，如果有人在 linux 上，那么他们可以将 TLD 添加到 /etc/whois.conf 或在 jwhois 中设置默认 whois 以利用自己控制的 whois/whois++/rwhois 服务器。

# ios - 有没有办法在 OpenGL 中使用原生 iOS 控件

> ID：12104244
> 
> 赞同：2
> 
> 时间：2012-08-24T06:32:05.413
> 
> 标签：ios, opengl-es, input

我有我的 OpenGL C++ 游戏，我想提供一些文本输入。现在我考虑并实施了两个选项：

1）对原生输入字段使用包装器。这看起来和感觉很棒，但不尊重我的内部结构——它总是在我的应用程序之上。如果某些元素与此输入重叠（即：确认对话框），它仍会在我的整个应用程序窗口上方绘制。

2）使用带有0大小输入字段的hack并将其输入到游戏中，并自己绘制所有文本。这很好用，但它只支持基本的输入退格操作。没有“缩放”，没有“拖动光标到位置”，没有“复制粘贴全选”。

所以我想知道 - 据我所知，所有本机控件都是使用 OpenGL 实现的。那么有没有一种方法可以手动“绘制”它们？如果是这样，我可以将它们放在我的显示列表中，重叠的问题就会消失。

# localization - NSIS 不正确地使用 LangString

> ID：12104247
> 
> 赞同：0
> 
> 时间：2012-08-24T06:32:16.997
> 
> 标签：localization, nsis

我有一个安装程序，它使用 NSIS 命令行功能自动构建（在 TFS 上）

```
"..\..\NSIS\makensis.exe"  /DBUILD_NUMBER=28311 /DPRODUCT_LANGUAGE=English "MTService_setup.nsi" 
```

安装程序必须使用 PRODUCT_LANGUAGE 参数中指定的语言。我已经通过以下方式完成了

```
!insertmacro MUI_LANGUAGE "${PRODUCT_LANGUAGE}" 
```

当我以这种方式构建安装程序时，界面的通用语言是正确的。但它对 LangString 使用默认系统语言。因此，如果默认系统语言不是英语，它会在英语安装程序中以另一种语言显示 LangString。

我试图更改脚本以避免命令行参数（用于测试目的）

```
!insertmacro MUI_LANGUAGE "English" 
```

它也不起作用。

我试图将脚本更改为

!insertmacro MUI_LANGUAGE "英语" !insertmacro MUI_LANGUAGE "俄语"

函数 .onInit

!insertmacro MUI_LANGDLL_DISPLAY

功能结束

它可以工作，但是，当然，它会显示语言选择对话框。我想在没有任何对话框的情况下使用特定的 ${PRODUCT_LANGUAGE}。

那么，我该如何解决呢？

![例子](../Images/70afa98a6dd858b9c75ea93605eb6a34.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T23:09:10.887

您没有在示例中向我们展示您的 LangString 代码，因此很难说出问题所在！

这是一个基于[MUI 自述](http://nsis.sourceforge.net/Docs/Modern%20UI/Readme.html)文件中代码的工作示例：

```
Outfile "test.exe"
Requestexecutionlevel user

!include MUI2.nsh
!insertmacro MUI_PAGE_COMPONENTS
!insertmacro MUI_PAGE_INSTFILES
!insertmacro MUI_LANGUAGE Swedish ;First language is the default if a better match is not found
!insertmacro MUI_LANGUAGE Danish

Function .onInit
StrCpy $language ${LANG_DANISH} ;Always force Danish?
FunctionEnd

Section "Section Name 1" Section1
SectionEnd
Section "Section Name 2" Section2
SectionEnd

LangString DESC_Section1 ${LANG_SWEDISH} "Bork, bork, bork!"
LangString DESC_Section2 ${LANG_SWEDISH} "Aweenda shmure da froog's legs."
LangString DESC_Section1 ${LANG_DANISH} "Danish text here for section 1"
LangString DESC_Section2 ${LANG_DANISH} "...and section 2"
!insertmacro MUI_FUNCTION_DESCRIPTION_BEGIN
    !insertmacro MUI_DESCRIPTION_TEXT ${Section1} $(DESC_Section1)
    !insertmacro MUI_DESCRIPTION_TEXT ${Section2} $(DESC_Section2)
!insertmacro MUI_FUNCTION_DESCRIPTION_END 
```

# javascript - 警报后jQuery单击事件不起作用

> ID：12104250
> 
> 赞同：1
> 
> 时间：2012-08-24T06:32:31.713
> 
> 标签：javascript, jquery, html, dom

附加表后，我正在检查按钮单击事件。Javascript 警报正在工作，但 jQuery 单击事件不起作用。

我似乎找不到我的错误。

```
$("#inputcon").change(function(e){

    if($(this).attr('checked')){
        $(this).val('TRUE');

    }else{
        $(this).val('FALSE');                
    }

    if($(this).val() == 'TRUE'){

        $("div#Add").append(' <table id="inputT" style=""> <tr> ' +
            '<td><label>Input Control Name :</label>  </td>' +
            '     <td><input id="icname" type="text" name="icname"  ></td>' +
            ' </tr>' +
            ' <tr>' +
            '     <td><label>Parameter Name :</label>  </td>' +
            '    <td><input id="pname" type="text" name="pname"  ></td>' +
            ' </tr>             ' +          
            ' <tr >' +
            '    <td><label>DataType:</label>  </td>' +
            '   <td><select name="datatype"  class="texta" id="datatype"  style="width: 328px "   > ' +
            '    <option value="string">Text</option> ' +
            '         <option value="date">Date</option>' +
            '         <option value="number">Number</option>' +
            '     </select></td>' +
            '      </tr>' +
            '     <tr  >' +
            '       <td><label>Input Type:</label>   </td>' +
            '   <td> <select name="inputtype"  class="texta" id="inputtype"  style="width: 328px "   >' +
            '         <option value="text">Text</option>' +
            '          <option value="date">Date</option>' +
            '          <option value="singleList">Single Select List</option>' +
            '         <option value="singleQue"  >Single Select Query List</option>' +
            '          <option value="multiList" selected="true">Multi Select List</option>' +
            '         <option value="multiQue" selected="true">Multi Select Query List</option>' +
            '      </select></td>' +
            ' </tr><tr><td><input onClick="alert(this.id);" id="inconbutt" type="button" value="Add InputControl" name="Add InputControl"></td></tr> </table>');
    }else{

        $("table#inputT").remove();
    }
});
  $("#inconbutt").click(function() {
    alert("add");
    var i1 = $("#icname").val() ; 
    var pname = $("#pname").val();
    var dtype = $("#datatype").val();
    var itype = $("#inputtype").val() ;
    alert(i1);
    alert(pname);
    alert(dtype);
    alert(itype);
 /*   $.ajax({
        type:"POST",
        url:"Welcome.jsp",
        data:"inputname="+i1+"&pname="+pname+"&datatype="+dtype+"&intype"+itype,
        success: function(){
            $("table#inputT").remove();
            $("table#tableI").append(' <tr><td><a href="#">'+i1+'</a></td><td><a href="#">Remove</a></td></tr> ' ) ;
        }
    }); */
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T06:36:23.203

您正在尝试将事件绑定到尚不存在的元素。

尝试使用`$(document).on('click', '#inconbutt', function() { ... });`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T06:39:35.180

您不能将事件处理程序直接绑定到尚不存在的元素。但是您*可以*使用绑定到稍后将创建的元素的父元素的委托事件处理程序：

```
$("div#Add").on("click", "#inconbutt", function() {
   // your code here
}); 
```

使用该语法`.on()`，jQuery 将处理父`"div#Add"`元素内的任何点击，并测试它是否发生在`"#inconbutt"`与第二个参数中的选择器匹配的元素上。如果确实如此，则调用您的函数。

如果您使用的 jQuery 版本早于 1.7 ，请`.delegate()`使用`.on()`. 如果您使用的是早于 1.4.2 的版本，请使用`.live()`.

或者，将 移至添加元素`$("#inconbutt").click(...)`的`if`语句中。

而不是每次单击复选框时都附加和删除整个表，我建议始终将其包含在您的代码中，但显示和隐藏它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T06:43:21.110

您在加载开始时使用 .click 创建的 jQuery 函数绑定，然后您的输入被放置。因此 jQuery 无法识别该事件并且您的函数不会被调用。

尝试使用动态绑定函数，例如：

```
$.live(/*yourevent*/'click', function(){
  // your function
}); 
```

或者

```
$.delegate(/*selector*/, 'click', function(){
  //your function
}); 
```

或者，如果您使用的是较新版本的 jQuery 1.7+，那么您也可以使用

```
$.on('click', /*selector*/, function(){
  //your function
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T06:42:12.760

`.on`jquery的使用方法

```
$(document).on('click', '.button.clickable', function () {...}); 
```

# iphone - 如果 UIDatePicker 未滚动，则 UIDatePicker 选择的值是错误的

> ID：12104256
> 
> 赞同：6
> 
> 时间：2012-08-24T06:32:48.780
> 
> 标签：iphone, objective-c, uidatepicker

![在此处输入图像描述](../Images/031b5e87b0747eb220c61a7318e31495.png)

我正在制作一个我正在使用的 iPhone 应用程序，并在操作`UIDatePicker`表中显示选定的时间。在操作表中，时间以 10 分钟间隔显示。

`textfield`当我滚动时，值设置正确**`Datepicker`**

如果我 **不**滚动操作表，则直接单击选择按钮，然后文本字段设置当前时间（**`11:56`**），但我在操作表（**`11:50`**）中选择时间。( `textfield`) 显示不正确的值。

如何设置`textfield`' 值 ( `11:50`)。给我一些解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:45:42.680

只需在按下选择按钮后从日期选择器中设置 dateSelected....

```
NSDate *date = datePicker.date;
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"dd/MM/yyyy"];    
NSString *dateString = [formatter stringFromDate:date];
yourTxtField.text = dateString; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T07:18:56.937

**编辑** 让你的班级在你的选择器中处理 UIControlEventValueChanged 事件。添加这一行 ViewDidLoad 方法或当您的操作表显示时：

```
 [picker addTarget:self action:@selector(dateChanged:) 
          forControlEvents:UIControlEventValueChanged]; 
```

现在更改日期时将调用选择器

**更新**

```
- (void) dateChanged:(id)sender{
    // handle date changes and set in textField
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    NSString *strdate = [dateFormatter stringFromDate:self.datePicker.date]; //provide your selected date here
    self.dateTexField.text = strdate;
} 
```

如果未调用上述方法，则表示日期未更改，因此请始终在 textField 中设置默认日期。

* * *

将日期转换为字符串对象

**更新**

```
 NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
 NSString *strdate = [dateFormatter stringFromDate:self.datePicker.date]; //provide your selected date here 
```

现在为 textField 设置值，如下所示：

```
 self.dateTextField.text = strdate; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T15:44:23.427

我认为最简单的方法是将带有完成按钮的工具栏附加到以 UIDatePicker 作为其 inputView 的 TextField 上。通过在 TextViewDidBeginEditing 中维护对它的引用来跟踪当前的 TextField。然后在完成按钮中执行以下操作：

```
if (_currentTextField == _myTextFieldThatUsesADatePicker) {
    self.myDateProperty = _myDatePicker.date;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-17T13:09:51.280

我不知道这种方式是否正确，但它对我有用

```
-(void)selectedTime{
    NSDateFormatter *outputFormatter = [[NSDateFormatter alloc] init];
//    [outputFormatter setDateFormat:@"h:mm a"];
    [outputFormatter setDateFormat:@"HH:mm:ss"];
    selectedTime = [outputFormatter stringFromDate:datePicker.date];
    NSArray *temp=[selectedTime componentsSeparatedByString:@":"];
    NSLog(@"%@",temp);
    NSInteger mins=[[temp objectAtIndex:1]integerValue];
    //check your interval here
    if (mins<=29) {
        selectedTime=[NSString stringWithFormat:@"%@:%@:%@",[temp objectAtIndex:0],@"00",@"00"];
    }else if (mins>=31 && mins<=59){
        selectedTime=[NSString stringWithFormat:@"%@:%@:%@",[temp objectAtIndex:0],@"30",@"00"];
    }else{
//        selectedTime = [outputFormatter stringFromDate:datePicker.date];
    }
    if (self.delegate && [self.delegate respondsToSelector:@selector(SelectedValue:)]) {
        [self.delegate SelectedValue:selectedTime];
    }
    [self.popupController dismiss];
} 
```

我的间隔是**30分钟**

# java - Apache POI 和 Aspose？

> ID：12104257
> 
> 赞同：3
> 
> 时间：2012-08-24T06:32:50.967
> 
> 标签：java, android, apache-poi, aspose

嗨，我正在创建一个可以读取 pdf/doc/docx/xls/ppt 等文件并将其显示给用户的应用程序。我已经读过，如果在 doc 中有一些图像和表格，apache POI 无能为力，因为它无法为表格创建边框。使用 aspose 不是问题，但我应该有充分的理由使用 aspose 而不是开源的 apache POI。

谁能建议我应该选择哪一个？Apache POI 和 Aspose 的局限性是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-27T22:19:59.887

我们评估了这两种工具并提出了评论，主要是关于 Aspose.Words，因为它更适合我们的需求。但我们也写了关于 Apache POI 的文章。我将评论粘贴在这里供您参考。

我们是一家开发在线文字处理器的公司。一大挑战是将 M​​icrosoft Word DOC、DOCX 和 RTF 内容与我们的专有数据模型相互转换。由于瘦客户端的限制和 Microsoft Word 文档的复杂性，我们必须在服务器端处理转换。

我们的服务器端技术是 java/spring/hibernate。我们意识到在处理 DOC(X) 处理的 Java 空间中没有多少选择。我们只寻找经过验证和成熟的产品。我们已经在公共领域评估了 Apache POI。我们发现 Apache POI 的一个主要问题是在底层有许多看似独立的组件，我们必须使用两个不同的组件来处理 DOC 和 DOCX。处理 DOCX 的 POI 组件相当新，还没有很多功能。就 RTF 而言，Apache POI 根本不支持它。

知道 Apache POI 不是我们的应用程序的好选择，我们检查了 Aspose.Words for java。事实上，就我们的搜索而言，它只是该领域的商业产品。评价很顺利。我们轻松地为 Aspose 库创建了一个 Maven 工件，并将该库集成到我们的后端 Web 应用程序中。根据我们的经验，我们相信 Aspose.Words for java 是该领域的顶级产品，实际上远优于任何其他解决方案。由于篇幅限制，我们只能从技术角度与您分享对我们最有价值的两个主要功能。

首先，Aspose.Words 使用一致、直观且文档完善的 DOM 模型作为底层文档结构。这个 DOM 模型直截了当且易于理解，并且非常具有表现力和强大的功能。这种 DOM 模型实际上不同于 OOXML 的 DOM 模型。我们更喜欢 Aspose 的 DOM 模型。它提醒我们 JDOM 和 XML 的 W3C 模型之间的区别，其中 JDom 的模型更简单、更直观，但功能强大，足以处理业务应用程序所需的大多数操作。令我们惊讶的是，Aspose.Words 支持的所有格式都使用了一个单一的 DOM 模型，包括但不限于 DOC、DOCX 和 RTF。Aspose 的这种特殊设计/功能。Words 大大降低了我们这边的工作量，因为我们只需要开发一个代码库来处理我们的应用程序当前需要的所有三种格式，以及将来可能需要的其他格式（例如 PostScript）。除了丰富的功能和 API 之外，我们发现这种设计/架构是 Aspose.Words 的关键技术优势。

其次，Aspose.Words 能够在其打开/关闭往返过程中保留原始 Word 文档中的所有 OLE 组件。即：让 Apose.Words 将现有的 Word 文档加载到其内存中的 DOM 模型中，并立即将 DOM 模型导出回 Word 文档。与原始文件相比，Aspose.Words 将生成文档的无损副本。此功能对我们的应用程序至关重要，据我们所知，没有其他产品（商业或公共领域）声称提供该功能。

我们想分享两张截图来结束这篇评论。一张截图 ( [http://s26.postimg.org/lfc1skz8n/screenshot_rtf.jpg](http://s26.postimg.org/lfc1skz8n/screenshot_rtf.jpg) ) 是由 Aspose.Words 为我们生成的复杂表格。另一个（[http://s26.postimg.org/5v4o21p47/screenshot_converted.jpg](http://s26.postimg.org/5v4o21p47/screenshot_converted.jpg)）是我们在线编辑器中显示的一些内容（由 Aspose.Words 从 Word 文档转换而来）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-27T07:21:54.127

> 谁能建议我应该选择哪一个？Apache POI 和 Aspose 的局限性是什么？

这是一个非常困难和笼统的问题，只能有非常笼统的答案。

每个软件项目都有不同的要求和功能。每个项目使用第 3 方组件的可行性也很可能不同。在不同的第 3 方之间进行选择很困难，因为您需要做更多或更少的

*   需求评估（哪个产品符合您的要求或非常符合）
*   看看产品购买前后的客户支持有多好
*   第三方产品的功能比较
*   找出产品的稳定性。检查他们发布了多少个版本。新版本有错误修复，新功能？
*   任何来自独立来源的奖项
*   API 和文档的整体可用性
*   许可条款
*   成本和收益

有关 Aspose 与 Apache POI 和其他替代方案的比较，请参见以下链接：

*   [假设细胞](http://www.aspose.com/docs/display/cellsjava/Aspose.Cells+for+Java+Vs+Open+Source+Competitors)
*   [Aspose.Words](http://www.aspose.com/docs/display/wordsjava/Why+not+Open+XML+SDK)

总体而言，很难找到限制并比较流行文件格式组件的功能。为什么？由于 MS Office 和 Adob​​e PDF 都是非常古老、成熟和稳定的产品，您可以在这些文件中放置各种各样的内容。

一个技巧是尝试获取最复杂和最大的文件（pdf、doc、xls 等）并使用 Aspose 和 Apache POI 加载。测试你最坏的情况。

PS。我是 Aspose 的开发人员布道师。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T07:53:17.620

因此，针对特定问题评估这两个框架的最佳方法是针对您提到的特定问题对它们进行测试（“无法为表格创建边框”，这是在 Aspose 4 Slides 中修复的恕我直言。请参阅：[http:// www.aspose.com/community/forums/thread/320218/borders-are-not-shown-in-aspose.slides-2.6.0.aspx](http://www.aspose.com/community/forums/thread/320218/borders-are-not-shown-in-aspose.slides-2.6.0.aspx)）。

只需获得“Aspose Slides 4 Java”的演示许可证，下载最新版本并实施解决您的问题的解决方案。在你的情况下，这只需要几行。

之后你对 POI（或像 Gagravarr 提到的 Tika）做同样的事情。之后，您至少知道“Aspose slides 4 java”是否可以解决您的问题，然后您可以决定将钱花在 Aspose 上或免费获取 POI lib。

我们使用“Aspose Sliedes 4 Java”已经 3 年了。有很多错误，但是当我们将它们发布到论坛中时，它们都已修复。在我们购买 Aspose 之前，我们还用 POI 做了所有这些 Powerpoint 的事情。我想说这两个框架在功能性、稳定性和可靠性方面几乎是相同的。

Aspose 唯一的大缺点是您必须对所有内容进行两次编码。旧 PowerPoint 格式 (PP 97-2003) 的一个特定代码和新 PPTX 格式的一个特定代码。当您必须为所有格式编码时，这确实会让您感到紧张。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-19T12:23:26.003

如果您的唯一目的是导入和导出 Excel/OO 文件，请使用 Apache POI。如果您需要处理文件、处理、显示等，请使用 Aspose。

# c++ - 如何使用 MsiGetProductInfo 和 MsiOpenDatabase 获取升级代码？

> ID：12104259
> 
> 赞同：1
> 
> 时间：2012-08-24T06:32:56.487
> 
> 标签：c++, windows-installer

我已经阅读了一些关于 StackOverflow 本身的关于使用 2 个查询获取 UpgradeCode 的帖子。首先，使用 MsiGetProductInfo 获取数据库路径（如何？！）以打开包含 UpgradeCode 的数据库。请提供 API 调用以获取数据库路径！紧迫的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T00:21:42.200

如果只知道名称，调用MsiEnumProducts查找包码，然后用产品码调用MsiGetProductInfo获取INSTALLPROPERTY_LOCALPACKAGE属性（即“数据库”/msi文件），打开数据库，在属性表中找到UpgradeCode，大功告成。这回答了你的问题 - 但我不确定你为什么需要这种方式。

# facebook-graph-api - 无法获取多个 Facebook 对象 ID Graph API 的大型图片

> ID：12104262
> 
> 赞同：0
> 
> 时间：2012-08-24T06:33:06.397
> 
> 标签：facebook-graph-api, object, types, image

我只是想不通，我正在使用 Facebook 图形 API 来获取数据，假设我有多个 Facebook 对象，我希望他们的图片类型为 = 大...我看到了一些类似这样的帖子 [如何屏蔽图片的Facebook图形API URL？](https://stackoverflow.com/questions/9829259/how-do-i-mask-facebook-graph-api-urls-for-pictures) 建议执行以下操作： /?ids=OBJECT_IDS&fields=picture&type=large 事情是，一旦图片被指定为像上面这样的字段，type URL 参数似乎不会影响检索到的图片。

如果有一种方法可以通过图形 API 在一个请求中获取多个 Facebook 对象的大型图片，请告诉我...

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T06:35:46.440

您真正需要的只是对象的 ID。

*   如果它是用户，那么他/她`user_id`。
*   如果它是一个页面，那么`page_id`.
*   ETC...

一旦你有了它，你可以简单地使用这个 URL 来获取大图像 -

```
https://graph.facebook.com/OBJECT_ID/picture?type=large 
```

您实际上不必请求大图像，因为您可以将此 URL 直接放置为图像的链接。例如，在 HTML 中 -

```
<img src="https://graph.facebook.com/4/picture?type=large" /> 
```

* * *

获取不同类型对象的**所有**大图像的问题在于它们都位于不同的端点。您将能够为**同一类型**的对象获取多张图片。例如 -

*   经过`user_id`

    `select pic_big from user where uid in(4,5,6)`

*   经过`page_id`

    `select pic_big from page where page_id in(1,2,3)`

*   经过`event_id`

    `select pic_big from event where eid in(1,2,3)`

*   经过`group_id`

    `select pic_big from group where gid in(1,2,3)`

# jquery - 选择时的jquery哈希标记动画

> ID：12104266
> 
> 赞同：0
> 
> 时间：2012-08-24T06:33:19.587
> 
> 标签：jquery

我的哈希标签转换不起作用，有什么想法吗？

我有：

```
//Hash tag animations
$(document).ready(function(){
    $('#selectcitydd').localScroll({duration:800, hash:true});
}); 
```

这应该由选择触发：

```
<select id="selectcitydd">
<option selected="selected" value="http://localhost/wordpress/#afterheadindex">Tbilisi</option>
<option value="http://localhost/wordpress/gudauri/#afterheadindex">Gudauri</option>
<option value="http://localhost/wordpress/batumi/#afterheadindex">Batumi</option>
</select> 
```

我使用这个 jquery 来触发选择 url：

```
// Homepage Select City function
$(document).ready(function() {
  // bind change event to select
  $('#selectcitydd').on('change', function () {
      var url = $(this).val(); // get selected value
      if (url) { // require a URL
          window.location = url; // redirect
      }
      return false;
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:49:19.337

你试过了吗？

```
//document.ready
$(function(){
    $.localScroll.hash();
}); 
```

我想通过做

```
$(document).ready(function(){
    $('#selectcitydd').localScroll({duration:800, hash:true});
}); 
```

你告诉插件滚动`#selectcitydd`而不是窗口。

因此，要保留您指定的持续时间，您必须像这样写

```
$.localScroll.hash({
    target: '#content', // Could be a selector or a jQuery object too.
    queue:true,
    duration:800
}); 
```

我从未真正使用过它，只是[查看了](https://github.com/flesler/jquery.localScroll/blob/master/demo/index.html)GitHub 存储库上的示例。

# javascript - 在下拉列表中的类别中拆分选项

> ID：12104267
> 
> 赞同：0
> 
> 时间：2012-08-24T06:33:21.347
> 
> 标签：javascript, jquery, asp.net, ajax

我想在下拉列表中添加多个选项及其类别。与基于其部门的名称列表一样，但不应选择部门名称。如何在 asp.net 中执行此操作？例如。

```
--IT--
Programmer
Tester
Analyst
--HR--
Manager
Executive-HR
Sr.Executive–HR Talent Acquisition 
```

我忘了提，我是从 sqlserver 数据库绑定这个的。并在下拉列表中绑定数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T06:38:30.247

没有任何关系，`asp.net`因为它可以完成`HTML`

```
<select>
    <optgroup label="--IT--"></optgroup>
    <option value="0">Programmer</option>
    <option value="1">Tester</option>
    <option value="2">Analyst</option>
    <optgroup label="--HR--"></optgroup>
    <option value="3">Manager</option>
    <option value="4">Executive-HR</option>
    <option value="5">Sr.Executive–HR Talent Acquisition</option>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T06:38:16.373

使用 HTML optgroup 标签：

```
<select>
  <optgroup label="--IT--">
    <option value="Programmer">Programmer</option>
    <option value="Tester">Tester</option>
    <option value="Analyst">Analyst</option>
  </optgroup>
  <optgroup label="--HR--">
    <option value="Manager">Manager</option>
    <option value="Executive-HR">Executive-HR</option>
    <option value="Executive-HR-T">Sr.Executive–HR Talent Acquisition</option>
  </optgroup>
</select> 
```

[**小提琴**](http://jsfiddle.net/E7vj6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-16T07:20:53.853

您好，请参考此[链接](https://www.codeproject.com/Tips/638625/DropDown-List-With-OptGroup-Support)

只需复制粘贴两个文件夹并尝试使用以下类型代码在您的项目中添加下拉列表

```
 ListItem item1 = new ListItem("Camel", "1");
        item1.Attributes["OptionGroup"] = "Mammals";

        ListItem item2 = new ListItem("Lion", "2");
        item2.Attributes["OptionGroup"] = "Mammals";

        ListItem item3 = new ListItem("Whale", "3");
        item3.Attributes["OptionGroup"] = "Mammals";

        ListItem item4 = new ListItem("Walrus", "4");
        item4.Attributes["OptionGroup"] = "Mammals";

        ListItem item5 = new ListItem("Velociraptor", "5");
        item5.Attributes["OptionGroup"] = "Dinosaurs";

        ListItem item6 = new ListItem("Allosaurus", "6");
        item6.Attributes["OptionGroup"] = "Dinosaurs";

        ListItem item7 = new ListItem("Triceratops", "7");
        item7.Attributes["OptionGroup"] = "Dinosaurs";

        ListItem item8 = new ListItem("Stegosaurus", "8");
        item8.Attributes["OptionGroup"] = "Dinosaurs";

        ListItem item9 = new ListItem("Tyrannosaurus", "9");
        item9.Attributes["OptionGroup"] = "Dinosaurs";

        DDLTest.Items.Add(item1);
        DDLTest.Items.Add(item2);
        DDLTest.Items.Add(item3);
        DDLTest.Items.Add(item4);
        DDLTest.Items.Add(item5);
        DDLTest.Items.Add(item6);
        DDLTest.Items.Add(item7);
        DDLTest.Items.Add(item8);
        DDLTest.Items.Add(item9); 
```

# jquery - Jquery add 方法功能不应根据条件触发

> ID：12104273
> 
> 赞同：-1
> 
> 时间：2012-08-24T06:33:57.973
> 
> 标签：jquery, jquery-ui, jquery-plugins, jquery-validate

以我的形式有

```
 Payment Method : Dropdown [value  -1, 1, 2]
 Tax Type: Dropdown [value 1 0 2]
 Sake Tax Amount : textbox
 submitButton 
```

我根据条件为销售税金额定制了功能（addMethod）。

**我的要求是：** 当我选择下拉 [付款方式] 值 -1 或 1 时，验证不应触发该销售税金额。否则，如果我选择下拉 [Payment Method] 值 2，则根据 taxtype 值验证火灾。在这种情况下（下拉 [付款方式] 值 2）对我来说工作正常，但下拉 [付款方式] 值为 1 或 -1 时也只触发了 addmethod 函数。它不应该发生。

[我的小提琴](http://jsfiddle.net/ssthil/a7zQ6/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T08:15:01.520

在规则中，改变

```
taxAmount_validate: true 
```

至

```
taxAmount_validate: {
                    depends: function(element) {return $('#ddlPaymentMethod :selected').val()=='2' }
                } 
```

查看[更新的小提琴](http://jsfiddle.net/a7zQ6/2/)

# c# - 即使在 WPF 中提供 CommandParameter 后，按钮也未启用

> ID：12104274
> 
> 赞同：5
> 
> 时间：2012-08-24T06:34:01.387
> 
> 标签：c#, .net, wpf, icommand

我创建了一个按钮，其命令参数已设置并使用实现 ICommand 接口的类进行命令。但是我的按钮被禁用了。这是为什么？我从这里得到了这个代码：[ICommand is like a Chocolate cake](http://blogs.msdn.com/b/mikehillberg/archive/2009/03/20/icommand-is-like-a-chocolate-cake.aspx)

```
<Window x:Class="ICommand_Implementation_CSharp.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:ICommand_Implementation_CSharp"
    Title="MainWindow" Height="350" Width="525">
<Grid>      
    <Grid>
        <Grid.Resources>
            <local:HelloWorldCommand x:Key="hwc"  />
        </Grid.Resources>

        <Button Command="{StaticResource hwc}" CommandParameter="Hello" 
                Height="23" HorizontalAlignment="Left" Margin="212,138,0,0" 
                Name="Button1" VerticalAlignment="Top" Width="75">Button</Button>
    </Grid>
</Grid> 
```

我的课是

```
class HelloWorldCommand:ICommand
{
    public bool CanExecute(object parameter)
    {
        return parameter != null;
    }

    public event EventHandler CanExecuteChanged;

    public void Execute(object parameter)
    {
        MessageBox.Show(parameter.ToString());
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T06:52:10.490

嗯，这是非常非常简单的`ICommand`.

正如@JleruOHeP 所说，部分问题可以通过交换`Command`and的设置器来解决`CommandParameter`。但这是一种丑陋的方式，因为您每次都必须记住顺序。

更正确的方法是告诉`CommandManager`重新查询命令状态：

```
public class HelloWorldCommand : ICommand
{
    public bool CanExecute(object parameter)
    {
        return parameter != null;
    }

    public event EventHandler CanExecuteChanged
    {
        add { CommandManager.RequerySuggested += value; }
        remove { CommandManager.RequerySuggested -= value; }
    }

    public void Execute(object parameter)
    {
        MessageBox.Show(parameter.ToString());
    }
} 
```

现在二传手的顺序是无关紧要的。
要了解其`CommandManager`工作原理，您可以阅读Josh Smith 的[这篇](http://joshsmithonwpf.wordpress.com/2008/06/17/allowing-commandmanager-to-query-your-icommand-objects/)精彩文章。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-24T06:42:13.273

最简单的答案 - 切换命令和命令参数的位置：

```
<Button CommandParameter="Hello" Command="{StaticResource hwc}" .../> 
```

但更好的是@Dennis

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-16T08:07:28.863

就我而言，`CommandParameter`这是导致问题的类型。我的按钮就像这样简单地绑定：

```
<Button Content="New" Command="{Binding NewCommand}" CommandParameter="False" /> 
```

底层证券`NewCommand`是一个`RelayCommand<bool>`。不知何故，XAML 无法转换`False`为 bool。（请注意，它确实适用于许多内置类型和属性；可能有一些`TypeConverter`或一些在那里起作用）。

解决方案是简单地向 XAML 提供有关 的真正底层类型的信息`CommandParameter`，如下所示：

```
<Button Content="New" Command="{Binding NewCommand}">
    <Button.CommandParameter>
        <sys:Boolean>
          False
        </sys:Boolean>
    </Button.CommandParameter>
</Button> 
```

您必须`sys`在 XAML 文件的顶部导入命名空间，如下所示：

```
xmlns:sys="clr-namespace:System;assembly=mscorlib" 
```

希望这对未来的人有所帮助。

# wpf - 我应该使用什么技术来构建一个使用云服务运行的窗口应用程序

> ID：12104277
> 
> 赞同：0
> 
> 时间：2012-08-24T06:34:08.170
> 
> 标签：wpf, database, silverlight, cloud

我有一个这样的软件要求：一个应用程序在窗口上运行，但这个应用程序可以连接到服务器以获取并由用户使用它的文件。

用户A可以**登录**，从服务器**查看** *他的所有文件* **，创建新文件，编辑内容，上传，共享文件，查看另一个用户的共享文件**。

我通常使用 .Net 框架。

那么我应该使用什么技术来解决这个要求

我真的需要一些有用的建议

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T09:21:59.503

根据评论，我建议您在 UI 和应用程序功能之间进行清晰的分离。

这将允许您为同一应用程序构建可能的多个界面（Win8、Mobile、...）。对于 Windows 环境并且您习惯于 .NET，我建议您看看 WPF（Windows Presentation Foundation）。我相信您会发现有些人已经在 WPF 中创建了非常可靠的文件管理器。它可以作为你的一个很好的基础。

如果您查看 WPF，请查看[http://www.codeplex.com](http://www.codeplex.com)以获得可以简化编码的框架。（[Caliburn.Micro](http://caliburnmicro.codeplex.com/)，[棱镜](http://compositewpf.codeplex.com/)，...）。一个非常流行的模式是[MVVM](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)，这将构建您的代码，以便您将来可以轻松地对其进行调整。

此外，我认为您可以在库中构建 Windows 来管理文件。

对于编辑，您会在应用程序中找到一个很好的挑战，简单的方法就是让用户将文件从应用程序打开到适当的环境中（例如：Word 中的 word 文档，excel 中的 excel 文档， ETC.. ）。

要进行共享，有多种选择。我正在考虑发送电子邮件链接、应用程序通知等...共享也可能意味着您对这些文件设置了某些权限。为此，您可以将其带到域安全管理的极限（与活动目录对话以获得适当的权限等），或者您可以简单地将自己的实现到您的应用程序中并将其限制在该级别。

# php - 创建文件级别@package的规则

> ID：12104278
> 
> 赞同：0
> 
> 时间：2012-08-24T06:34:17.700
> 
> 标签：php, apigen

我的代码如下所示：

```
/**
 * @package Test
 */
require_once('foo.php');

/**
 * Main class
 */
class Test{
}

/**
 * Generic exception
 */
class Test_Excepcion extends Exception{
} 
```

我希望第一个 docblock 是文件级块，但 ApiGen 似乎将它链接到 require 语句，并且我的类显示在“None”命名空间中。如果我这样做，它会得到修复，例如：

```
/**
 * @package Test
 */
//
require_once('foo.php'); 
```

这是预期的行为吗？我需要在文件级块之后添加虚假评论吗？具体规则是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:16:26.533

@package 标签不一定是文件级块。您可以为文件中的每个类指定 @package 标记。像这样：

```
/**
 * Main class
 * @package Test
 */
class Test{} 
```

# android - 如何知道哪个应用程序正在使用麦克风

> ID：12104284
> 
> 赞同：2
> 
> 时间：2012-08-24T06:34:40.603
> 
> 标签：android, android-ndk, linux-kernel, microphone, lsof

> **可能重复：**
> [我们可以检测到哪个 android 应用程序正在使用麦克风吗？](https://stackoverflow.com/questions/11886824/can-we-detect-which-android-application-is-using-the-microphone)

我想检测哪个应用程序正在使用麦克风。

假设两个应用程序可以访问麦克风。对于使用麦克风的应用程序，它应该具有`android.permission.RECORD_AUDIO`.

使用该`lsof`命令，我们可以检测到正在使用麦克风，但不能检测到正在使用它的应用程序名称。所以我们可以列出所有当前正在运行的应用程序，然后我们可以检查哪个应用程序有`android.permission.RECORD_AUDIO`权限，**但问题是：**

假设我们有两个名为“A”和“B”的应用程序。A 只能录制语音，而 B 可以选择录制语音和维护网络状态。由于两者都可以录制语音，因此两者都将获得`android.permission.RECORD_AUDIO`许可。所以我们可以知道 A 和 B 都可以使用 mic，但是目前，哪一个在使用 mic？我怎样才能避免这种混乱？

# actionscript-3 - 如何使用 actionscript 3.0 代码上传背景图片？

> ID：12104291
> 
> 赞同：0
> 
> 时间：2012-08-24T06:35:18.830
> 
> 标签：actionscript-3, flash, flash-cs5, flashdevelop

**需要你的帮助。我是第一次尝试。**

我使用了以下代码。但我在控制台中得到了这个：

**开始加载文件 SecurityError: Error #2000: No active security context。**

我的图片网址与我的脚本文件位于同一文件夹中。

`var loader:Loader = new Loader();`

```
loader.contentLoaderInfo.addEventListener(Event.COMPLETE, fileLoaded);
loader.load(new URLRequest("C:\Documents and Settings\Owner\Desktop\23Aug\demo1\mic.jpg"), context);
var context:LoaderContext = new LoaderContext();
context.applicationDomain = ApplicationDomain.currentDomain;
trace("started loading file");
addChild(loader);
function fileLoaded(event:Event):void
{
trace("file loaded");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:33:16.687

引发 securityError 异常的原因。

*   路径无效，
*   尝试访问安全沙箱不允许的 URL，
*   尝试超过端口限制的套接字连接，并且
*   尝试访问已被用户拒绝的设备（例如，摄像头、麦克风。）

试试这个

```
private var _loader:Loader = new Loader();
private var _context:LoaderContext = new LoaderContext();
private var _url:URLRequest = new URLRequest("demo1/mic.jpg");

_context.checkPolicyFile = false;
_loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onImageloaded);
//_loader.contentLoaderInfo.addEventListener(IOErrorEvent.IO_ERROR, onIOError);
_loader.load(_url, _context);
private function onImageloaded(e:Event):void{
    addChild(e.target.content);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T07:09:31.503

使用斜杠而不是反斜杠：

```
loader.load(new URLRequest("C:/Documents and Settings/Owner/Desktop/23Aug/demo1\mic.jpg"), context); 
```

但最好的方法是使用“./mic.jpg”之类的相对路径，不要使用绝对路径。

# android - 如何在 ANDENGINE 中获得身体顶部

> ID：12104295
> 
> 赞同：0
> 
> 时间：2012-08-24T06:35:38.567
> 
> 标签：android, andengine

我正在开发一个游戏。我有一个问题，我在某个高度添加了一个实体。我希望当玩家从它的上侧跳跃时，他可以站在上面，但是当玩家与它的左侧或下侧发生碰撞时，他可以通过它而不会发生碰撞。任何帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:48:48.423

在检查碰撞时，当发生碰撞时，获取玩家的位置（getX() 和 getY()），然后计算玩家的底部位置。之后将其与位置 (getX() 和 getY()) 物理体进行比较。

如果物理身体的getX()大于玩家的getX()并且物理身体的getY()小于玩家的表示玩家在左侧。

同样，您可以找到其他位置，并根据这些位置启动操作。

# php - PHP Session 变量在脚本中途被删除

> ID：12104299
> 
> 赞同：0
> 
> 时间：2012-08-24T06:35:51.767
> 
> 标签：php, session, session-variables

我试图在我的一个脚本中保存一个会话变量，它似乎对脚本的一部分工作正常，但是，它在我的代码的第二部分中被删除了。我已经回应了每一行，但无法弄清楚为什么会发生这种情况。此外，这段代码之前运行良好，但自从我切换服务器后，它似乎出现了故障。我不认为这是会话保存路径，因为代码的第一部分工作正常。这是我的代码的基本外部结构（我删除了所有不相关的部分以节省空间）：

```
<!--raw-->
<?php 

session_start(); 
include 'config.php'; 

?>
<html>
<body>

<form id="driver_record" method="post" action="<?php echo htmlentities($PHP_SELF); ?>">
Enter Driver Number: <input type="text" name="driver" />
<input type="submit" value="Submit" name="user_submit" />
</form>

<?php

if(isset($_POST['user_submit']))
{
if(username_exists($_POST['driver'])){

$ulog = $_POST['driver'];
$_SESSION['user_id'] = $ulog;
echo $_SESSION['user_id']; //Session echos fine here
$tablename_cc = "cc_".$ulog;
$tablename_db = "db_".$ulog;
$tablename_misc = "misc_".$ulog;
$tablename_cash = "cash_".$ulog;

?>

<form id="expenses_update" method="post" action="<?php echo htmlentities($PHP_SELF); ?>">
<input type="submit" value="Approve" name="record_approve" />

<?php
}
}
?>

<?php

    if(isset($_POST['record_approve']))
    {
        echo $_SESSION['user_id']; //Session does not echo here
        $ulog = $_SESSION['user_id'];
        $tablename_cc = "cc_".$ulog;
        $tablename_db = "db_".$ulog;
        $tablename_misc = "misc_".$ulog;
        $tablename_cash = "cash_".$ulog;

    }

    //unset($_SESSION['user_id']);
    //session_destroy();
?>

</body>
</html>
<!--/raw--> 
```

编辑：我已经注释掉了 unset 语句，并且还尝试将它们放在 if 语句中，而不改变代码的行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:44:07.647

每次运行代码时，您都在调用 unset($_SESSION['user_id']); 这是因为它不在你的 IF 语句中，你在错误的地方有一个花括号。

```
<?php

    if(isset($_POST['record_approve']))
    {
        echo $_SESSION['user_id']; //Session does not echo here
        $ulog = $_SESSION['user_id'];
        $tablename_cc = "cc_".$ulog;
        $tablename_db = "db_".$ulog;
        $tablename_misc = "misc_".$ulog;
        $tablename_cash = "cash_".$ulog;

    unset($_SESSION['user_id']);
    session_destroy();

    } //moved curly brace here

?> 
```

编辑：代码对我来说运行良好，我不得不注释掉包含行和使用的函数，错误必须在 config.php 内。您在该文件的顶部有一个 session_start() 并且没有使用 unsets 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T10:58:38.880

这是一个简单的会话脚本，你有这个问题吗？如果是这样，那么 php.ini 有问题。

```
<?php
session_start();

$_SESSION['testing'] = "boo";
echo "Session 1=" . $_SESSION['testing'];
?>

<form action="session1.php" method="post">
<input type="text" name="input"
<input type="submit" />
</form>
<pre>

<?php

if (isset($_POST['input']))
{
   print_r ($_SESSION);
   print_r ($_POST);
}

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T22:53:54.737

似乎我或这里的任何其他人都无法找到关于正在发生的事情的合乎逻辑的解决方案。我决定简单地删除会话变量并包含一个“隐藏”输入字段，该字段仅通过 POST 变量发送变量。这似乎解决了我所有的问题，而不必担心会话变量的行为。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-24T06:39:35.410

只有在提交第一个表单时才设置会话值 ( `isset($_POST['user_submit'])`)。当脚本处理第二个表单提交 ( `isset($_POST['record_approve'])`) 时，没有设置会话值。因此没有输出。

您确实意识到，即使脚本在一个 PHP 文件中，它也会被两个互斥的表单提交触发，对吧？所以会话值只有在`isset($_POST['user_submit']`. 因此，如果您在提交第一个表单后提交第二个表单，您将拥有一个会话变量`'user_id'`，前提是您已注释掉取消设置和破坏会话的行。

希望这是有道理的。

# php - 如何让 XDebug 在 CLI 上与 PHPUnit 一起运行？

> ID：12104303
> 
> 赞同：66
> 
> 时间：2012-08-24T06:36:01.667
> 
> 标签：php, phpunit, command-line-interface, xdebug

我尝试运行以下 CLI 命令：

```
phpunit -d xdebug.profiler_enable=on XYZTestCase.php 
```

但它只是正常运行。谁能指出我正确的方向？谢谢！

这是 XDebug 设置：

```
xdebug

xdebug support => enabled
Version => 2.1.2

Supported protocols => Revision
DBGp - Common DeBuGger Protocol => $Revision: 1.145 $

Directive => Local Value => Master Value
xdebug.auto_trace => Off => Off
xdebug.collect_assignments => Off => Off
xdebug.collect_includes => On => On
xdebug.collect_params => 0 => 0
xdebug.collect_return => Off => Off
xdebug.collect_vars => Off => Off
xdebug.default_enable => On => On
xdebug.dump.COOKIE => no value => no value
xdebug.dump.ENV => no value => no value
xdebug.dump.FILES => no value => no value
xdebug.dump.GET => no value => no value
xdebug.dump.POST => no value => no value
xdebug.dump.REQUEST => no value => no value
xdebug.dump.SERVER => no value => no value
xdebug.dump.SESSION => no value => no value
xdebug.dump_globals => On => On
xdebug.dump_once => On => On
xdebug.dump_undefined => Off => Off
xdebug.extended_info => On => On
xdebug.file_link_format => no value => no value
xdebug.idekey => Nam => no value
xdebug.manual_url => http://www.php.net => http://www.php.net
xdebug.max_nesting_level => 100 => 100
xdebug.overload_var_dump => On => On
xdebug.profiler_aggregate => Off => Off
xdebug.profiler_append => Off => Off
xdebug.profiler_enable => Off => Off
xdebug.profiler_enable_trigger => Off => Off
xdebug.profiler_output_dir => c:/wamp/tmp => c:/wamp/tmp
xdebug.profiler_output_name => cachegrind.out.%t.%p => cachegrind.out.%t.%p
xdebug.remote_autostart => On => On
xdebug.remote_connect_back => Off => Off
xdebug.remote_cookie_expire_time => 3600 => 3600
xdebug.remote_enable => On => On
xdebug.remote_handler => dbgp => dbgp
xdebug.remote_host => localhost => localhost
xdebug.remote_log => no value => no value
xdebug.remote_mode => req => req
xdebug.remote_port => 9000 => 9000
xdebug.scream => Off => Off
xdebug.show_exception_trace => Off => Off
xdebug.show_local_vars => Off => Off
xdebug.show_mem_delta => Off => Off
xdebug.trace_format => 0 => 0
xdebug.trace_options => 0 => 0
xdebug.trace_output_dir => \ => \
xdebug.trace_output_name => trace.%c => trace.%c
xdebug.var_display_max_children => 128 => 128
xdebug.var_display_max_data => 512 => 512
xdebug.var_display_max_depth => 3 => 3 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-08-27T12:09:21.547

该`xdebug.profiler_enable`设置**不能在运行时更改，**只能在脚本开始时更改。

运行`phpunit -d foo=bar`只会导致 phpunit 调用`ini_set("foo", "bar");`，这不起作用，因为该值在运行时无法更改。

看：[**`xdebug.profiler_enable`**](http://xdebug.org/docs/all_settings#profiler_enable)

> 启用 Xdebug 的分析器，它在配置文件输出目录中创建文件。KCacheGrind 可以读取这些文件以可视化您的数据。无法使用 ini_set() 在脚本中设置此设置。如果您想选择性地启用分析器，请将 xdebug.profiler_enable_trigger 设置为 1 而不是使用此设置。

## 解决方案：

```
php -d xdebug.profiler_enable=on /usr/bin/phpunit XYZTestCase.php 
```

通过将设置直接应用于 PHP 运行时而不是 phpunit，它将在脚本启动**之前设置并且应该可以工作。**

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-12-03T17:39:12.300

花了很长时间试图让它发挥作用。认为这可能会改变我的生活！

我最初试图在 vagrant box 内执行此操作（即运行 phpunit），但意识到在 vagrant box 外运行它更容易（并且性能更快）。

首先，我`brew install php55 php55-xdebug`在 Mac 上使用自制软件（但您的配置可能不同，它仍然可以工作）。我的网站是一个 symfony2 项目。

我试图遵循这个：[phpunit vagrant xdebug](http://www.grobmeier.de/remote-debugging-phpunit-vagrant-04102013.html#.VH3X_aSsVMM)让它从一个流浪者盒子里工作（几乎到了那里，但有一些问题）。

这些设置对我有用（从 vagrant box 运行站点，但 phpunit 在 vagrant box 外）：

```
#xdebug.ini (parent machine, not inside vagrant box).
[xdebug]
zend_extension="/usr/local/Cellar/php55-xdebug/2.2.6/xdebug.so" #this will be different on your machine and will probably already be set

xdebug.max_nesting_level = 250 
xdebug.default_enable = 1
xdebug.idekey = "PHPSTORM" #seems to work without this too
xdebug.remote_enable = 1 
```

然后在命令行运行它（这里我使用的是 phpunit 的下载，而不是 /usr/local/bin 中链接的那个（这似乎不起作用））

```
XDEBUG_CONFIG="idekey=PHPSTORM" bin/phpunit -c app 
```

或者您可以创建一个名为 phpunit-debug 的文件（用于存储 XDEBUG_CONFIG 环境变量），如下所述：[phpunit xdebug](http://blog.doh.ms/2011/05/13/debugging-phpunit-tests-in-netbeans-with-xdebug/)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-27T07:54:34.627

您是否尝试过：

1.  将您的**xdebug.idekey**在您的 php.ini 中设置为您想要的任何内容（例如：blacktie）
2.  重启你的服务器

3.  通过添加**-d xdebug.idekey=blacktie调用您的脚本**

    phpunit -d xdebug.profiler_enable=on -d xdebug.idekey=blacktie XYZTestCase.php

希望有所帮助。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-25T21:17:24.830

设置的正确名称`xdebug.profiler_enable`带有下划线。将您的命令更改为：

```
phpunit -d xdebug.profiler_enable=on XYZTestCase.php 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-08-22T15:11:32.637

您可以通过预先设置环境变量从命令行运行 Xdebug，例如：

`export XDEBUG_CONFIG="idekey=YOUR_IDE_KEY remote_host=localhost remote_enable=1"`

这对我有用。

有关[Xdebug 文档](https://xdebug.org/docs/remote)的更多信息。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-10-03T12:38:49.910

在使用 VS 代码调试器（使用 WSL）时，我在终端中唯一需要做的就是执行以下命令：

```
export XDEBUG_CONFIG="idekey=VSCODE" 
```

之后我像往常一样简单地运行我的 phpunit 命令。即`phpunit ./tests/`调试器将在我设置的第一个断点处停止。

如果调试器在无法访问的代码上暂停，您可能需要在“断点”下的调试器窗格中切换“一切”。

我从[https://tighten.co/blog/configure-vscode-to-debug-phpunit-tests-with-xdebug得到了这个信息](https://tighten.co/blog/configure-vscode-to-debug-phpunit-tests-with-xdebug)

：： 编辑 ：：

虽然上述内容适用于我的本地网络服务器。今天，当我试图将我的项目移植到 docker 时，我对此有所了解。

事实证明它不适用于此设置：

```
xdebug.remote_connect_back=1 
```

但是您需要设置它：

```
xdebug.remote_host=172.17.0.1
xdebug.remote_connect_back=0 
```

注意：我使用 172.17.0.1 从 docker 容器内引用我的主机，因为我在 linux 上，但如果你在 mac 上，最好使用：

```
xdebug.remote_host=docker.for.mac.host.internal
xdebug.remote_connect_back=0 
```

或在窗户上：

```
xdebug.remote_host=host.docker.internal
xdebug.remote_connect_back=0 
```

使用 docker 似乎我也不需要`export XDEBUG_CONFIG="idekey=VSCODE"`再做任何事情了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-06-06T23:52:34.897

在**带有 phpStorm 的 Windows 上**

在命令行中输入：

```
set XDEBUG_CONFIG="idekey=PHPSTORM" 
```

这将添加一个 phpStorm 将寻找的环境变量。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-09-06T06:12:39.380

假设当被 cookie/post/get 变量触发时，您已经在编辑器/独立调试器中运行了 Xdebug，添加一个 shell 脚本来执行相同的触发，因此您无需记住：

创建`~/bin/php-cli-debug.sh`：

```
#!/bin/bash
phpfile="$1"
idekey=YOUR_IDE_KEY
shift 1
php -d'xdebug.remote_enable=1' -d'xdebug.remote_autostart=1' -d'xdebug.idekey='"$idekey" -f "$phpfile" -- "$@" 
```

然后在 CLI 上调试东西，使用类似的东西：

```
$ php-cli-debug.sh "$(which phpunit)" --bootstrap tests/bootstrap.php tests/FooBarTest | less -S 
```

确保您`.bashrc`已添加`~/bin`到您的`$PATH`.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-05-08T12:17:36.657

首先，我的环境：

*   WampServer 版本 3.1.3 64 位
*   阿帕奇 2.4.33 - PHP 7.1.16
*   MySQL 5.7.21
*   MariaDB 10.2.14

php.ini：

```
[xdebug]
zend_extension ="c:/wamp64/bin/php/php7.1.16/zend_ext/php_xdebug-2.6.0-7.1-vc14-x86_64.dll"

xdebug.remote_enable = 1
xdebug.remote_autostart = 1
xdebug.profiler_enable = 1
xdebug.profiler_enable_trigger = 1
xdebug.profiler_output_name = cachegrind.out.%t.%p
xdebug.profiler_output_dir ="c:/wamp64/tmp"
xdebug.show_local_vars=0
xdebug.idekey = "PHPSTORM" #seems to work without this too 
```

phpunit.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<phpunit backupGlobals="false"
         backupStaticAttributes="false"
         bootstrap="bootstrap/autoload.php"
         colors="true"
         convertErrorsToExceptions="true"
         convertNoticesToExceptions="true"
         convertWarningsToExceptions="true"
         processIsolation="false"
         stopOnFailure="false">
    <testsuites>
        <testsuite name="Application Test Suite">
            <directory suffix="Test.php">./tests</directory>
        </testsuite>
    </testsuites>
    <filter>
        <whitelist processUncoveredFilesFromWhitelist="true">
            <directory suffix=".php">./app</directory>
        </whitelist>
    </filter>
    <php>
        <env name="APP_ENV" value="testing"/>
        <env name="CACHE_DRIVER" value="array"/>
        <env name="SESSION_DRIVER" value="array"/>
        <env name="QUEUE_DRIVER" value="sync"/>
    </php>
</phpunit> 
```

我在 phpstorm 上做了一个测试运行配置，如下所示： [![点击红圈内的按钮](../Images/9289f537f0f09a6448d316bf416add80.png)](https://i.stack.imgur.com/INmtt.png) [![配置面板](../Images/135e9af0b783b809d1718e7146961002.png)](https://i.stack.imgur.com/wuYFg.png)

进行运行配置后，当我单击 PHPSTORM 中的调试按钮时，将运行以下命令。

```
C:\wamp64\bin\php\php7.1.16\php.exe
-dzend_extension=C:\wamp64\bin\php\php7.1.16\zend_ext\php_xdebug-2.6.0-7.1-vc14-x86_64.dll
-dxdebug.remote_enable=1 -dxdebug.remote_mode=req -dxdebug.remote_port=9000 -dxdebug.remote_host=127.0.0.1 C:/wamp64/www/<PROJECT_FOLDER>/vendor/phpunit/phpunit/phpunit --bootstrap C:\wamp64\www\<PROJECT_FOLDER>\vendor\autoload.php --configuration C:\wamp64\www\<PROJECT_FOLDER>\phpunit.xml --teamcity 
```

请**注意`--teamcity`**. 我不知道 :) 还要**注意反斜杠和正斜杠。**

我希望这对每个人都有帮助。

# android - 通过单击android中的URL打开应用程序

> ID：12104306
> 
> 赞同：0
> 
> 时间：2012-08-24T06:36:24.430
> 
> 标签：android

看看这个：[点击 url iOS 时打开一个应用程序](https://stackoverflow.com/questions/12037712/open-an-app-when-clicking-on-a-url-ios)

我想在android中做同样的事情。是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T06:47:26.143

查看这两个链接：希望这将有助于克服您的问题。

访问[从 android 浏览器启动自定义 android 应用程序](https://stackoverflow.com/questions/2958701/launch-custom-android-application-from-android-browser)

访问[在 Android 浏览器中创建链接启动我的应用程序？](https://stackoverflow.com/questions/3469908/make-a-link-in-the-android-browser-start-up-my-app/3472228)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T06:45:28.533

我相信您正在寻找自定义意图

[可以在此处](https://stackoverflow.com/questions/2448213/how-to-implement-my-very-own-uri-schema-on-android)找到有关意图的手册，并且可以在[此处](http://developer.android.com/reference/android/content/Intent.html)找到设置自定义的示例

# java - 覆盖单个对象的 UIManager 值

> ID：12104310
> 
> 赞同：4
> 
> 时间：2012-08-24T06:36:52.537
> 
> 标签：java, swing, background, jlabel, uimanager

是否可以覆盖`UIManager`特定对象的属性？

例如，我的 UI 管理器有

```
[Label.background] => (ColorUIResource) [javax.swing.plaf.ColorUIResource[r=238,g=238,b=238]] 
```

我想做`JLabel`一个有`Color.WHITE`背景的。

```
whiteJLabel.setBackground(Color.WHITE) 
```

..没有效果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T06:43:22.043

```
whiteJLabel.setBackground(Color.WHITE)
whiteJLabel.setOpaque(true); 
```

# php - 如何在服务器上运行 PHP 代码的同时阻止 PHP 向客户端发送数据？

> ID：12104311
> 
> 赞同：5
> 
> 时间：2012-08-24T06:36:53.437
> 
> 标签：php, http

当我遇到一个导致我的 PHP 程序无限循环的错误时，我想到了这个问题。这是一个示例情况：

假设我有一个接收图片上传的 PHP 网页（该页面可能是图像上传表单的响应页面）。在服务器中，脚本应该将图像存储在一个临时文件中。然后脚本应该向客户端输出一条确认消息，然后停止发送数据，这样客户端就不会等待。然后脚本应继续执行，在结束之前处理图像（如调整大小）。

我认为这种“技术”可能很有用，这样客户端就不会在耗时的过程中等待，从而防止超时。

另外，这可以使用 HTTP 方法解决吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-25T16:06:54.113

## 是的。

如果您正确使用 HTTP 标头，则无需任何异步处理即可轻松完成此操作。

在正常情况下，一旦另一端的客户端关闭连接，PHP 就会停止处理。如果你想在这个事件之后继续处理，你需要做一件事：告诉 PHP 忽略用户中止。如何？

`ignore_user_abort()`

这将允许您的脚本在客户端摆脱闪避之后继续运行。但是我们也面临着如何告诉客户端他们发出的请求已经完成以便它关闭连接的问题。通常，如果我们不指定它们，PHP 会透明地为我们发送这些标头。但是，在这里，我们需要明确地执行此操作，否则客户端将不知道我们何时希望他们停止读取响应。

为此，我们必须发送适当的 HTTP 标头来告诉客户端何时关闭：

```
Connection: close
Content-Length: 42 
```

这种标头组合告诉客户端，一旦它读取 42 个字节的实体主体响应，消息就完成了，他们应该关闭连接。这种方法有几个后果：

1.  *您必须在发送任何输出之前*生成响应，因为您必须确定其内容长度大小（以字节为单位），以便发送正确的标头。
2.  在回显任何输出*之前*，您必须实际发送这些标头。

所以你的脚本可能看起来像这样：

```
<?php

ignore_user_abort();

// do work to determine the response you want to send ($responseBody)
$contentLength = strlen($responseBody);

header('Connection: close');
header("Content-Length: $contentLength");
flush();

echo $responseBody;

// --- client will now disconnect and you can continue processing here --- 
```

这种方法的最大“Gotchya”是当您在 Web SAPI 中运行 PHP 时，如果您在最终用户客户端关闭连接后进行耗时的处理，您可以轻松地违反最大时间限制指令。如果这是一个问题，您可能需要考虑使用 cron 的异步处理选项，因为 PHP 在 CLI 环境中运行时没有时间限制。或者，您可以使用[`set_time_limit`^(*docs*)](http://php.net/manual/en/function.set-time-limit.php)来提高 Web 环境中脚本的时间限制。

值得一提的是，如果您执行此类操作，您可能还希望在生成响应正文时向[`connection_aborted()`^(*文档*)](http://us2.php.net/manual/en/function.connection-aborted.php)添加检查，以便在用户在完成传输之前中止时避免额外的处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T06:57:47.760

当我通过 php 的网络服务从 iphone 上传 twitter 和 facebook 上的图像时，我遇到了同样的问题。

如果图像上传的处理时间不多，那么您可以查看此评论`@Musa`可能对您有所帮助，但如果处理时间过长，请尝试此步骤。

```
 1\. Image store in folder
 2\. Fetch image from folder using cron 
 3\. Cron run for every 2 min in backend 
```

这些将减少您的处理时间。

希望这对您有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T06:41:23.993

建议异步执行这些操作。也就是说，制作另一个只处理先前创建的 tmp 文件的脚本，并使用 cron 运行它（甚至不涉及 apache）。当 php 作为 web-server 模块运行时，它应该致力于快速形成响应，然后离开为下一个请求释放资源。

你这样想是对的；只需继续在架构上迈出一小步，将请求与需要进行的繁重工作完全分离。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T06:47:00.793

你可以通过几种方式做到这一点#

1#

```
ob_start();
//output
header("Content-Length: ".ob_get_length());
header("Connection: close");
ob_end_flush();
//do other stuff 
```

2#

使用 PHP 的 system() 或 exec()，关闭进程

3#

使用 Shell 脚本关闭进程

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-24T06:51:54.630

您可以使用`ob_implicit_flush(),`它将打开或关闭隐式刷新。隐式刷新将在每次输出调用后导致刷新操作，因此不再需要对 flush() 的显式调用。

参考

[我如何使用 PHP 实现这个场景？](https://stackoverflow.com/questions/10403521/how-do-i-implement-this-scenario-using-php)

或者

您应该创建一个独立的 cron，它将在特定时间后运行，并以异步方式执行，不让用户知道正在进行的处理，或者不让用户等待。这样，您甚至还可以检测到失败的案例。

你还应该尽量减少加载时间。

# apache-camel - Apache Camel 可以用作通用负载均衡器吗

> ID：12104315
> 
> 赞同：4
> 
> 时间：2012-08-24T06:37:14.360
> 
> 标签：apache-camel

我想知道 Apache Camel 是否可以用作任何 HTTP Web 服务器的负载平衡器。

我正在考虑 Apache，因为我可以为其添加一些自定义。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T08:48:53.373

是的，您可以为此使用骆驼。像这样的事情可能会为你做（在路线构建器中）：

```
from("jetty://http://0.0.0.0:8080/my/path")
    .loadBalance()
    .roundRobin()
    .to("http://server1:8080/my/path","http://server2:8080/my/path"); 
```

您可以在此处查看更多负载平衡选项：http: [//camel.apache.org/load-balancer.html](http://camel.apache.org/load-balancer.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T07:32:25.637

由于您想对 HTTP 进行负载平衡，请同时查看此页面，因为您需要配置要桥接的 http 端点：http: [//camel.apache.org/how-to-use-camel-as-a- http-proxy-between-a-client-and-server.html](http://camel.apache.org/how-to-use-camel-as-a-http-proxy-between-a-client-and-server.html)

以及 matchOnUriPrefix=true，以匹配任何传入的请求。如果您在所有端点上使用码头，它可以扩大规模，使用非阻塞延续。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T07:21:50.860

是的，当然你可以使用骆驼作为负载均衡器。到目前为止，我已经非常成功地使用了它。看看这个讨论[使用骆驼进行负载平衡](http://camel.465427.n5.nabble.com/Load-balancing-camel-in-real-world-td5717381.html#a5717541)。这对开始很有用。骑骆驼玩得开心！

# c# - 我的 ANTLR 解析器（不是词法分析器）如何触发词法“包含”（不是 AST 拼接）？

> ID：12104324
> 
> 赞同：2
> 
> 时间：2012-08-24T06:37:51.530
> 
> 标签：c#, include, antlr, antlr3

ANTLR 网站描述[了两种](http://www.antlr.org/wiki/pages/viewpage.action?pageId=557057)实现“包含”指令的方法。第一种方法是识别词法分析器中的指令并在词法上包含文件（通过将 CharStream 推入堆栈并将其替换为读取新文件的堆栈）；二是识别解析器中的指令，启动子解析器解析新文件，并拼接到子解析器生成的AST中。这些都不是我所需要的。

在我正在解析的语言中，由于以下几个原因，识别词法分析器中的指令是不切实际的：

1.  没有自包含的字符模式总是意味着“这是一个包含指令”。例如，`Include "foo";`在顶层是一个包含指令，但在`Array bar --> Include "foo";`or`Constant Include "foo";`中`Include`是一个标识符。
2.  要包含的文件的名称可以作为字符串或常量标识符给出，并且可以使用任意复杂的表达式定义此类常量。

所以我想触发解析器的包含。但是要执行包含，我不能启动子解析器并将 AST 拼接在一起；我必须拼接令牌。块`{`在主文件中开始并`}`在包含文件中终止是合法的。包含在函数中的文件甚至可以关闭函数定义并启动一个新定义。

似乎我需要类似于第一种方法的方法，但在 TokenStreams 而不是 CharStreams 级别。这是一个可行的方法吗？我需要在堆栈上保留多少状态，以及如何使解析器切换回原始令牌流而不是在遇到 EOF 时终止？或者有没有更好的方法来处理这个？

==========

这是该语言的一个示例，演示了在主文件中打开的块可以在包含的文件中关闭（反之亦然）。请注意，当指令在函数内部时，`#`before是必需的，但在外部是可选的。`Include`

主.inf：

```
[ 主要的;
  打印“这是主要的！”；
  如果（0）{
  #include "其他.h";
  打印“这是其他功能！”；
];

```

其他.h：

```
  } ！万一
]; ！结束主要

[其他功能；

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T20:20:37.733

每个`Include`语句都有可能让您的解析器创建您的词法分析器的新实例，并将这些新标记插入词法分析器在解析器当前所在的索引处创建（请参阅`insertTokens(...)`解析器`@members`块中的方法。）。

这是一个快速演示：

## 通知6.g

```
grammar Inform6;

options {
  output=AST;
}

tokens {
  STATS;
  F_DECL;
  F_CALL;
  EXPRS;
}

@parser::header {
  import java.util.Map;
  import java.util.HashMap;
}

@parser::members {
  private Map<String, String> memory = new HashMap<String, String>(); 

  private void putInMemory(String key, String str) {
    String value;
    if(str.startsWith("\"")) {
      value = str.substring(1, str.length() - 1);
    }
    else {
      value = memory.get(str);
    }
    memory.put(key, value);
  }

  private void insertTokens(String fileName) {
    // possibly strip quotes from `fileName` in case it's a Str-token
    try {
      CommonTokenStream thatStream = new CommonTokenStream(new Inform6Lexer(new ANTLRFileStream(fileName)));
      thatStream.fill();
      List extraTokens = thatStream.getTokens();
      extraTokens.remove(extraTokens.size() - 1); // remove EOF
      CommonTokenStream thisStream = (CommonTokenStream)this.getTokenStream();
      thisStream.getTokens().addAll(thisStream.index(), extraTokens);
    } catch(Exception e) {
      e.printStackTrace();
    }
  }
}

parse
 : stats EOF -> stats
 ;

stats
 : stat* -> ^(STATS stat*)
 ;

stat
 : function_decl
 | function_call
 | include
 | constant
 | if_stat
 ;

if_stat
 : If '(' expr ')' '{' stats '}' -> ^(If expr stats)
 ;

function_decl
 : '[' id ';' stats ']' ';' -> ^(F_DECL id stats)
 ;

function_call
 : Id exprs ';' -> ^(F_CALL Id exprs)
 ;

include
 : Include Str ';' {insertTokens($Str.text);}            -> /* omit statement from AST */
 | Include id ';'  {insertTokens(memory.get($id.text));} -> /* omit statement from AST */
 ;

constant
 : Constant id expr ';' {putInMemory($id.text, $expr.text);} -> ^(Constant id expr)
 ;

exprs
 : expr (',' expr)* -> ^(EXPRS expr+)
 ;

expr
 : add_expr
 ;

add_expr
 : mult_expr (('+' | '-')^ mult_expr)*
 ;

mult_expr
 : atom (('*' | '/')^ atom)*
 ;

atom
 : id
 | Num
 | Str
 | '(' expr ')' -> expr
 ;

id
 : Id
 | Include
 ;

Comment  : '!' ~('\r' | '\n')* {skip();};
Space    : (' ' | '\t' | '\r' | '\n')+ {skip();};
If       : 'if';
Include  : 'Include';
Constant : 'Constant';
Id       : ('a'..'z' | 'A'..'Z') ('a'..'z' | 'A'..'Z' | '0'..'9')+;
Str      : '"' ~'"'* '"';
Num      : '0'..'9'+ ('.' '0'..'9'+)?; 
```

## 主文件

```
Constant IMPORT "other.h";

[ Main;
  print "This is Main!";
  if (0) {    

  Include IMPORT;

  print "This is OtherFunction!";
]; 
```

## 其他.h

```
 } ! end if
];  ! end Main

[ OtherFunction; 
```

## 主.java

```
import org.antlr.runtime.*;
import org.antlr.runtime.tree.*;
import org.antlr.stringtemplate.*;

public class Main {
  public static void main(String[] args) throws Exception {
    // create lexer & parser
    Inform6Lexer lexer = new Inform6Lexer(new ANTLRFileStream("main.inf"));
    Inform6Parser parser = new Inform6Parser(new CommonTokenStream(lexer));

    // print the AST
    DOTTreeGenerator gen = new DOTTreeGenerator();
    StringTemplate st = gen.toDOT((CommonTree)parser.parse().getTree());
    System.out.println(st);
  }
} 
```

要运行演示，请在命令行上执行以下操作：

```
java -cp antlr-3.3.jar org.antlr.Tool Inform6.g
javac -cp antlr-3.3.jar *.java
java -cp .:antlr-3.3.jar 主要
```

您将看到的输出对应于以下 AST：

![在此处输入图像描述](../Images/50be631278287919faf0e8225141b353.png)

# mysql - 从连接的 MySQL 表中选择解码的 JSON 数据

> ID：12104327
> 
> 赞同：2
> 
> 时间：2012-08-24T06:38:11.340
> 
> 标签：mysql, json, select

如果我有两个带有 JSON 数据的表，您能否写信告诉我如何从 MySQL 数据库中进行选择。其中之一具有以下结构：

```
Table Trees
(id, name, value) - three columns 
```

其中包括以下数据

```
1,  trees, [{"name":"Oaktree","value":1,"target":null},{"name":"Appletree","value":2,"target":null},{"name":"Plumtree","value":3,"target":null}]
2,  length, [{"name":"10m","value":1,"target":null},{"name":"15m","value":2,"target":null},{"name":"20m","value":3,"target":null}]
3,  age, [{"name":"5y","value":1,"target":null},{"name":"10y","value":2,"target":null},{"name":"20y","value":3,"target":null}] 
```

第二个表的结构如下：

```
Table SelectedTrees
(properties) - only one column 
```

其中包括以下数据

```
[{"id":"1","value":["1","3"]},{"id":"2","value":["1", "2", "3"]},{"id":"3","value":["2"]}] 
```

它表示从 Trees 表中选择的数据。*selectedTrees*中*属性*列中的*id对应于**Trees*表中的*id*列。我想从数据库真实（json_decoded）值中进行选择，例如：

 ***树木 = 橡树、李子树

长度 = 10m、15m、20m

年龄 = 10 岁

我怎么能做这个？提前致谢。

简

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-21T00:09:21.643

简而言之，这是不可能的。建立关系数据库是为了快速比较它们可以索引的常量值。JSON 只是 MySQL 的一个字符串，任何类型的部分字符串匹配都会触发所谓的*表扫描*，当您获得大量数据时，这基本上会变得异常缓慢。

你可以**让它**像这样工作：

```
SELECT * FROM Trees
JOIN SelectedTrees
  ON properties LIKE CONCAT('"id":"', Trees.id, '"') 
```

然而，这只是一个你**不应该在任何生产系统中使用**的技巧，我建议不要在测试系统中使用它。相反，重构您的数据库，这样就永远不会有任何*您要在查询中匹配的*JSON 。可以将辅助数据存储为 JSON，只需确保在插入之前提取 ID 和名称，然后在数据库表中的单独列中插入，以便数据库引擎可以发挥其关系魔法。***

# java - 如何获得二维数组长度

> ID：12104329
> 
> 赞同：1
> 
> 时间：2012-08-24T06:38:17.580
> 
> 标签：java

我创建了在二维数组中显示元素的方法。但我无法为每个维度指定数组长度。这是我的代码

```
public static void display2DArray(String[][] array){        
    for (int i = 1; i < array.length; i++) {
        for (int j = 1; j < array.length; j++) {
            System.out.println("Document "+i+ "  Section "+j);
            System.out.println(" "+array[i][j]);
        }
        System.out.println(" ");
    }
} 
```

请帮我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T06:40:33.087

试试这个方法

```
public static void display2DArray(String[][] array){
    for (int i = 0; i < array.length; i++) {
        for (int j = 0; j < array[i].length; j++) {
            System.out.println("Document "+i+ "  Section "+j);
            System.out.println(" "+array[i][j]);
        }
        System.out.println(" ");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T06:47:54.540

你也可以用这种方式..

```
public static void display2DArray(String[][] array){ 
  for (String[] strings : array)
  {
     for (String string : strings)
     {
        System.out.println(" "+string );
     }
    System.out.println(" ");
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T06:42:10.073

首先，`i`两者`j`都应该默认为 0。其次，将 j 更改为`array[0].length`，并且在检查数组是否为空之前，立即返回。一个数组可以表示如下：

```
{{[0][0] [0][1] [0][2]},

 {[1][0] [1][1] [1][2]},

 {[2][0] [2][1] [2][2]}} 
```

因此，要获得高度，您只需这样做`array.length`，但对于宽度，您必须获得一个内部数组' `lengths`，所以`array[0].length`会这样做

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T06:43:45.987

在Java 中，每个内在数组对象（即Object[]）都有“长度”属性。如果你有一个 Object[][] 类型的对象，你可以把它看成 (Object[])[]，意思是一个数组数组。所以你要做的是使用索引“i”来获取一个内部数组，然后使用索引“j”来从内部数组中获取一个元素。即：

```
Object[][] myArray;

for (int i = 0; i < myArray.length; ++i)
   for (int j = 0; j < myArray[i].length; ++j)
   { /* do something with myArray[i][j] */ } 
```

# php - PHP PDO 未插入数据库

> ID：12104331
> 
> 赞同：0
> 
> 时间：2012-08-24T06:38:45.103
> 
> 标签：php, mysql, database, insert, pdo

我正在研究 PDO，我已经尝试了很多小时，但仍然无法成功地将输入插入数据库。我没有收到任何错误，因此我收到了 $err -> succeded 消息。但是没有机会插入数据库...

如果你能提供帮助会很高兴。

注意：关于用户 id，我从另一个表中获取 id，列 userid，并尝试将其插入到另一个表中，“params_user_id”列。

这是我的代码：

```
if(isset($_POST["create"])) {
try{

$param1 = cleanInput($_POST["param1"]);
$param2 = cleanInput($_POST["param2"]);
$param3 = cleanInput($_POST["param3"]);
$param4 = cleanInput($_POST["param4"]);
$param5id = cleanInput($_POST["param5id"]);
$param6id = cleanInput($_POST["param6id"]);
$param7 = cleanInput($_POST["param7"]);
$param8id = cleanInput($_POST["param8id"]);
$param9 = cleanInput($_POST["param9"]);
$param10 = cleanInput($_POST["param10"]);
$param11 = cleanInput($_POST["param11"]);
$param12 = cleanInput($_POST["param12"]);
$param13 = cleanInput($_POST["param13"]);
$param14 = cleanInput($_POST["param14"]);
$param15 = cleanInput($_POST["param15"]);
$param16 = cleanInput($_POST["param16"]);
$param17 = cleanInput($_POST["param17"]);
$param18 = cleanInput($_POST["param18"]);
$param19 = cleanInput($_POST["param19"]);
$param20 = cleanInput($_POST["param20"]);
$param21 = cleanInput($_POST["param21"]);
$userid = $_SESSION[':userid'];
$datenow = date('Y-m-d H:i:s');

$create_params_query = "INSERT INTO `params`(`datenow`, `param1`, `param2`, `param3`, `param4`, `param5id`, `param6id`, `param7`, `param8id`, `param9`, `param10`, `param11`, `param12`, `param13`, `param14`, `param15`, `param16`, `param17`, `param18`, `param19`, `param20`, `param21`,`params_user_id`) VALUE(:datenow, :param1, :param2, :param3, :param4, :param5id, :param6id, :param7, :param8id, :param9, :param10, :param11, :param12, :param13, :param14, :param15, :param16, :param17, :param18, :param19, :param20, :param21, :userid)";

$create_params_do = $db->prepare($create_params_query);
$create_params_do -> bindParam(':datenow', $datenow, PDO::PARAM_STR);
$create_params_do -> bindParam(':param1', $param1, PDO::PARAM_STR);
$create_params_do -> bindParam(':param2', $param2, PDO::PARAM_STR);
$create_params_do -> bindParam(':param3', $param3, PDO::PARAM_STR);
$create_params_do -> bindParam(':param4', $param4, PDO::PARAM_STR);
$create_params_do -> bindParam(':param5id', $param5id, PDO::PARAM_INT);
$create_params_do -> bindParam(':param6id', $param6id, PDO::PARAM_INT);
$create_params_do -> bindParam(':param7', $param7, PDO::PARAM_STR);
$create_params_do -> bindParam(':param8id', $param8id, PDO::PARAM_INT);
$create_params_do -> bindParam(':param9', $param9, PDO::PARAM_STR);
$create_params_do -> bindParam(':param10', $param10, PDO::PARAM_STR);
$create_params_do -> bindParam(':param11', $param11, PDO::PARAM_STR);
$create_params_do -> bindParam(':param12', $param12, PDO::PARAM_STR);
$create_params_do -> bindParam(':param13', $param13, PDO::PARAM_STR);
$create_params_do -> bindParam(':param14', $param14, PDO::PARAM_STR);
$create_params_do -> bindParam(':param15', $param15, PDO::PARAM_STR);
$create_params_do -> bindParam(':param16', $param16, PDO::PARAM_STR);
$create_params_do -> bindParam(':param17', $param17, PDO::PARAM_STR);
$create_params_do -> bindParam(':param18', $param18, PDO::PARAM_STR);
$create_params_do -> bindParam(':param19', $param19, PDO::PARAM_STR);
$create_params_do -> bindParam(':param20', $param20, PDO::PARAM_STR);
$create_params_do -> bindParam(':param21', $param21, PDO::PARAM_STR);
$create_params_do->bindParam(':userid', $userid, PDO::PARAM_INT);

$create_params_do->execute() or die(print_r($create_params_do->errorInfo(), true));
//forgot to add when posting first sorry, i have that also.
}
catch(PDOException $e) {
$log->logError($e." - ".basename(__FILE__));
}

$err = "<div class=\"success\"><strong>"._("Congrats.")."</strong><br/>"._("Success.")."</div>";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T06:40:19.187

你不见了

```
$create_params_do->execute(); 
```

在参数末尾

您的查询应该是：

```
$create_params_query = "INSERT INTO `params`(`datenow`, `param1`, `param2`, `param3`, `param4`, `param5id`, `param6id`, `param7`, `param8id`, `param9`, `param10`, `param11`, `param12`, `param13`, `param14`, `param15`, `param16`, `param17`, `param18`, `param19`, `param20`, `param21`,`params_user_id`) VALUES(:datenow, :param1, :param2, :param3, :param4, :param5id, :param6id, :param7, :param8id, :param9, :param10, :param11, :param12, :param13, :param14, :param15, :param16, :param17, :param18, :param19, :param20, :param21, :userid)"; 
```

与`VALUES`不`VALUE`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-21T16:04:45.840

要添加到 Iorga 端默认情况下 PDO 对错误保持沉默，因此如果您想知道发生了什么，您需要通过设置 PDO error_mode 来告诉 PDO 是嘈杂的，如下所示。对于您的情况 VALUE 或 VALUES 有效（使用 MySQL 5.5 测试）。捕获异常错误将为您提供它未提交到数据库的真正原因。

```
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

# ajax - 数据绑定 MVC3

> ID：12104335
> 
> 赞同：0
> 
> 时间：2012-08-24T06:39:07.750
> 
> 标签：ajax, asp.net-mvc, asp.net-mvc-3, data-binding

我不知道我做错了什么。好吧，我有这个表格，它是复杂视图的一部分。

```
 @{
    var filtersAjaxOptions = new AjaxOptions
        {
            HttpMethod = "POST",
            InsertionMode = InsertionMode.Replace,
            UpdateTargetId = "clientList-body",
            OnBegin = "clientList.filterRequestStart()",
            OnComplete = "clientList.filterRequestComplete()",
            OnSuccess = "clientList.filterRequestSuccess()"
        };
    }
    <span class="clientFilters-filterValue inlineBlock">
        @using (Ajax.BeginForm(
            "Index",
            "ClientList",
            new {
                ProductId = Model.ClientListViewModel.Filters.ProductId,
                ClientFilter = Model.ClientListViewModel.Filters.ClientFilter,
                BillFilter = Model.ClientListViewModel.Filters.BillFilter,
                DateSortType = Model.ClientListViewModel.Filters.DateSortType,
                SortDirection = Model.ClientListViewModel.Filters.SortDirection
            },
            filtersAjaxOptions,
            new
            {
                id = "clientListDateFilter-form"
            }
        ))
        {
            @Html.TextBoxFor(
                m => m.ClientListViewModel.Filters.BeginDateRange,
                new
                {
                    @class = "dp-input textInput inlineBlock",
                    id = "dp-billDateFilterStart",
                }
            )
            @Html.TextBoxFor(
                m => m.ClientListViewModel.Filters.EndDateRange,
                new
                {
                    @class = "dp-input textInput inlineBlock",
                    id = "dp-billDateFilterEnd",
                }
            )
        }
    </span> 
```

这是过滤器模型

```
 public class FilterModel
    {
        public FilterModel()
        {
            ClientFilter = ClientsEnum.All;
            BillFilter = ClientBillsEnum.All;
        }

        public string ProductId { get; set; }
        public ClientsEnum ClientFilter { get; set; }
        public ClientBillsEnum BillFilter { get; set; }
        public DateTime? BeginDateRange { get; set; }
        public DateTime? EndDateRange { get; set; }
        public DateSortType? DateSortType { get; set; }
        public SortDirection? SortDirection { get; set; }
    } 
```

这部分是**ClientListController**方法**索引**：

```
 public ActionResult Index(FilterModel filters)
    {
        var clientListViewModel = GetClientListViewModel(filters, 1, 1, PageSize);
        if (ControllerContext.HttpContext.Request.IsAjaxRequest())
            return PartialView("Partial/ClientListBody", clientListViewModel);
        return View(clientListViewModel);
    } 
```

每当我提交上面的表格时，我发现“BeginDateRange”和“EndDateRange”字段为空，其他字段设置正确。虽然，当我在 Watch 中插入**Request.Form**时，我可以看到整个数据。

**更新 1** 所以我将 Web.config 中的 <globalisation> 设置为：

```
 <globalisation responseHeaderEncoding="utf-8" culture="en-US"> 
```

但它不起作用。结果和之前非常相似。

**更新 2** 此外，当我尝试将所有路由值数据放入 @Html.HiddenFor 时，控制器只看到空值。再一次，Request.Form 已填写完毕。

所以问题是：如何将表单数据绑定到传入模型？泰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T06:47:49.027

~~绑定日期时间时，默认模型绑定器使用当前区域性日期时间格式。这意味着您必须在文本框中输入正确格式的日期。另一方面，如果您需要固定格式，则可以在 web.config（`<globalization>`元素）中使用固定文化或编写自定义模型绑定器：[https ://stackoverflow.com/a/7836093/29407](https://stackoverflow.com/a/7836093/29407)~~

* * *

更新：

您需要指定正确的绑定前缀，因为您的输入字段被命名为，`ClientListViewModel.Filters.BeginDateRange`但您的控制器操作采用`FilterModel`as 参数而不是根视图模型：

```
public ActionResult Index([Bind(Prefix = "ClientListViewModel.Filters")] FilterModel filters)
{
    ...
} 
```

但是现在这会破坏其他值，因此您还需要调整视图：

```
@using (Ajax.BeginForm(
    "Index",
    "ClientList",
    null,
    filtersAjaxOptions,
    new
    {
        id = "clientListDateFilter-form"
    }
 ))
{
    @Html.HiddenFor(x => x.ClientListViewModel.Filters.ProductId)
    @Html.HiddenFor(x => x.ClientListViewModel.Filters.ClientFilter)
    @Html.HiddenFor(x => x.ClientListViewModel.Filters.BillFilter)
    @Html.HiddenFor(x => x.ClientListViewModel.Filters.DateSortType)
    @Html.HiddenFor(x => x.ClientListViewModel.Filters.SortDirection)

    @Html.TextBoxFor(
        m => m.ClientListViewModel.Filters.BeginDateRange,
        new
        {
            @class = "dp-input textInput inlineBlock",
            id = "dp-billDateFilterStart",
        }
    )
    @Html.TextBoxFor(
        m => m.ClientListViewModel.Filters.EndDateRange,
        new
        {
            @class = "dp-input textInput inlineBlock",
            id = "dp-billDateFilterEnd",
        }
    )
} 
```

或者如果您想将它们作为表单 url 的一部分发送，而不是使用隐藏字段：

```
@using (Ajax.BeginForm(
    "Index",
    "ClientList",
    new RouteValueDictionary 
    { 
        { "ClientListViewModel.Filters.ProductId", Model.ClientListViewModel.Filters.ProductId },
        { "ClientListViewModel.Filters.ClientFilter", Model.ClientListViewModel.Filters.ClientFilter },
        { "ClientListViewModel.Filters.BillFilter", Model.ClientListViewModel.Filters.BillFilter },
        { "ClientListViewModel.Filters.DateSortType", Model.ClientListViewModel.Filters.DateSortType },
        { "ClientListViewModel.Filters.SortDirection", Model.ClientListViewModel.Filters.SortDirection },
    },
    filtersAjaxOptions,
    new RouteValueDictionary
    {
        { "id", "clientListDateFilter-form" }
    }
 ))
{
    @Html.TextBoxFor(
        m => m.ClientListViewModel.Filters.BeginDateRange,
        new
        {
            @class = "dp-input textInput inlineBlock",
            id = "dp-billDateFilterStart",
        }
    )
    @Html.TextBoxFor(
        m => m.ClientListViewModel.Filters.EndDateRange,
        new
        {
            @class = "dp-input textInput inlineBlock",
            id = "dp-billDateFilterEnd",
        }
    )
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T06:46:31.903

试试这个：

```
public ActionResult Index(FilterModel filters, FormCollection collection)
{
    UpdateModel(filters, "ClientListViewModel");
    var clientListViewModel = GetClientListViewModel(filters, 1, 1, PageSize);
    if (ControllerContext.HttpContext.Request.IsAjaxRequest())
        return PartialView("Partial/ClientListBody", clientListViewModel);
    return View(clientListViewModel);
} 
```

并认为：

```
@Html.TextBoxFor(
            m => m.ClientListViewModel.FilterModel.EndDateRange,
            new
            {
                @class = "dp-input textInput inlineBlock",
                id = "dp-billDateFilterEnd",
            }
        ) 
```

你有奇怪的名字。此外，最好使用隐藏字段然后通过路由值传递值。

# mysql - 使用限制堆叠 Rails 查询

> ID：12104337
> 
> 赞同：0
> 
> 时间：2012-08-24T06:39:14.383
> 
> 标签：mysql, ruby, ruby-on-rails-3, scope

我正在尝试从数据库中获取总共 25 个关联。我希望 15 的计数等于 1，其余的计数大于 1（所以 10 大于 10）。我尝试了以下方法：

```
def self.get_specific_array
  a = Association.limit(25) # I would like a total of 25 associations
  a.where(["count = ?", 1]).limit(15) # I would like 15 of the associations to have a count of 1
  a.where(["count > ?", 1]) # I would like the remaining 10 associations to have a count that is greater then 1
  a
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T07:06:12.117

您可以添加查询的结果数组：

```
a.where("count = 1").limit(15) + a.where("count > 1").limit(10) 
```

# xmpp - 本地主机上的 ejabberd

> ID：12104342
> 
> 赞同：0
> 
> 时间：2012-08-24T06:39:34.383
> 
> 标签：xmpp, localhost, ejabberd

是否可以在 localhost（以 localhost 作为域）上安装和运行 ejabberd 并从客户端连接到此以试验客户端功能？

我想这样做的原因是能够使用在例如 jabber.org 上不可用的扩展。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T16:07:36.227

这确实是可能的。如果您使用 ProcessOne 的二进制安装程序，安装程序甚至会询问您要使用的域名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T08:42:18.207

确定它是可能的，而且也很容易。您可以使用任何 xmpp 服务器，例如 openfire 或 ejabberd。并且这些服务器具有用于管理的用户友好的 Web 界面。

# c# - 如何使用 ICSharplib 使用加密密码压缩文件夹

> ID：12104345
> 
> 赞同：1
> 
> 时间：2012-08-24T06:39:38.177
> 
> 标签：c#, .net

如何使用 ICSharplib 压缩文件夹。有什么方法可以在压缩时添加加密密码？没有我可以使用任何其他 dll 的选项。必须只使用 ICSharplib。

目前我正在使用这个代码块

```
private static void CompressFiles(string folderPath) {
    string zipOutput = @"C:\temp\myoutput.zip";
    try {
        using (ZipOutputStream zs = new ZipOutputStream(File.Create(zipOutput))) {
            zs.SetLevel(9); // 0-9 (9 being best compression)
            foreach (string file in Directory.GetFiles(folderPath)) {
                ZipEntry entry = new ZipEntry(Path.GetFileName(file));
                entry.DateTime = DateTime.Now;
                using (FileStream fs = File.OpenRead(file)) {
                    byte[] buffer = new byte[fs.Length];
                    fs.Read(buffer, 0, buffer.Length);
                    entry.Size = buffer.Length; // This is very important
                    zs.PutNextEntry(entry);
                    zs.Write(buffer, 0, buffer.Length);
                }
            }
            zs.Finish();
            zs.Close();
        }
    }
    catch { throw; }
} 
```

它可以压缩文件夹中的所有文件。

但我想要的是压缩整个文件夹。与该文件夹中的文件夹一样，该文件夹也包含在 zip 文件中。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T06:48:24.027

使用`FastZip`对象。

```
ICSharpCode.SharpZipLib.Zip.FastZip z = new ICSharpCode.SharpZipLib.Zip.FastZip();
z.CreateEmptyDirectories = true;
z.CreateZip("F:\\ZipTest.zip", "F:\\ZipTest\\", true, ""); 

if (File.Exists("F:\\ZipTest.zip"))
    Console.WriteLine("Done");
else
    Console.WriteLine("Failed"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T07:38:21.703

我使用以下代码：

```
public static bool ZipIt(string sourcePath, string destinationPath)
        {          
            List<string> ListOfFiles = GetListOfFiles(sourcePath);
            try
            {
                string OutPath = destinationPath + ".zip";               
                int TrimLength = (Directory.GetParent(sourcePath)).ToString().Length;
                TrimLength += 1;
                //remove '\'
               FileStream ostream;
                byte[] obuffer;               
                ZipOutputStream oZipStream = new  ZipOutputStream(System.IO.File.Create(OutPath));                    
                oZipStream.Password = EncodePassword("Password");
                oZipStream.SetLevel(9);
                // 9 = maximum compression level
                ZipEntry oZipEntry;
                foreach (string Fil in ListOfFiles.ToArray()) // for each file, generate a zipentry
                {
                    oZipEntry = new ZipEntry(Fil.Remove(0, TrimLength));    
                    oZipStream.PutNextEntry(oZipEntry);    

                    if (!Fil.EndsWith(@"/")) // if a file ends with '/' its a directory
                    {
                        ostream = File.OpenRead(Fil);    
                        obuffer = new byte[ostream.Length];
                        ostream.Read(obuffer, 0, obuffer.Length);    
                        oZipStream.Write(obuffer, 0, obuffer.Length);    
                        ostream.Close();    
                    }
                }
                oZipStream.Finish();
                oZipStream.Close();               
                return true;
            }
            catch (Exception ex)           
            {    
                return false;
            }
        }            

         public static string EncodePassword(string originalPassword)
         {                         
            Byte[] encodedBytes;  
            encodedBytes = ASCIIEncoding.Default.GetBytes(originalPassword);              
            return BitConverter.ToString(encodedBytes);
         } 
```

# windows-services - SDL Tridion 2011 SP1：安装监控服务

> ID：12104347
> 
> 赞同：1
> 
> 时间：2012-08-24T06:39:59.637
> 
> 标签：windows-services, tridion, tridion-2011, tridion-content-delivery

我们正在我们的一台服务器上设置 Tridion 2011 SP1 CDS（基于.net）。我们对“将监控安装为 Wndows 服务”感到震惊。在运行批处理文件“StartCDInstaller.bat”并执行该过程后，我们无法在 Windows 服务中找到**Tridion Monitoring Agent**服务。我们错过了什么吗？

还有另一个关于 CDS 的问题，我们可以在安装后更改配置文件（Deployer、Storage_conf 等）的位置吗？还是我们需要重新运行安装程序？

更新：即使重新安装监控服务后也出现同样的错误。“**事件日志详细信息：找不到来自源 TCDmonitor 的事件 ID 100 的描述。引发此事件的组件未安装在本地计算机上，或者安装已损坏**”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T07:28:49.823

您可以通过在名为“Tridion_Home”的环境变量（控制面板 -> 系统和安全 -> 系统 -> 高级 -> 环境变量 -> 系统变量）中设置系统变量来更改 tridion 文件夹结构的位置，并将值设置为“d: \tridion”（这是 tridion 文件夹的路径）。您可以在运行并输入 %tridion_home% 后对其进行测试。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-24T07:46:29.347

如果由于某种原因安装程序没有安装 Tridion 监控服务，您可以手动安装。

*   找到文件 cd_monitor.exe（它位于安装 CD 的 Content Delivery\roles\monitoring\windows 中）。

*   将其复制到保存可执行文件的位置（例如，到 Tridion\bin 文件夹）

*   以管理员身份启动命令提示符并键入“cd_monitor -install”

*   进入服务控制台，启动监控服务

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T16:03:37.383

也有类似的问题，它是安装了 x64 Java 的 x64 内容交付服务器。手动安装了监控服务却拒绝启动：

*找不到来自源 TCDmonitor 的事件 ID 100 的描述。引发此事件的组件未安装在本地计算机上，或者安装已损坏。您可以在本地计算机上安装或修复组件。如果事件起源于另一台计算机，则显示信息必须与事件一起保存。事件中包含以下信息：Could not load Java runtime libraries at the message resource is present but the message is not found in the string/message table*

监控服务需要 32 位 Java，一旦安装它就可以毫无问题地启动。

希望有帮助。

斯科特

# passwords - 当用户更改他的密码时，是否有任何理由禁止他使用他过去可能使用过的任何密码？

> ID：12104350
> 
> 赞同：1
> 
> 时间：2012-08-24T06:40:17.180
> 
> 标签：passwords

我正在为我的网站实施忘记密码功能，在查看其他网站以获得最佳实践时，我发现 gmail 强制执行此限制，而我查看的其他网站没有强制执行此限制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T06:46:55.550

关于密码和密码安全有很多相当过时的想法。

如果用户的密码被泄露——然后不管他们在多少天后更改它——攻击者现在就被系统阻止了。

如果该用户返回并重新使用他的旧密码，那么黑客可能会决定重试该帐户/密码并重新进入系统。

当然，它带来了一系列全新的问题。使用户不记得他的密码，他们将开始将密码写在粘在显示器上的便签上。

亲自？在我工作过的所有网站上，我从未认为添加密码过期/或/限制可能（重新）使用的密码很重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T06:49:16.913

我原以为它几乎没有提供额外的安全性。您相信用户不会丢失密码，但我想它可以双向使用。

如果他们必须选择一个新密码，那么他们可能不得不写下来或者更有可能再次忘记它，但是如果他们有一个新密码，那么知道他们使用的密码的人不太可能使用它来访问您的网站.

无论哪种方式，请确保您存储的是散列密码以进行比较，而不是纯文本。

# c# - FileSystemWatcher 触发两次，程序突然停止

> ID：12104363
> 
> 赞同：0
> 
> 时间：2012-08-24T06:41:08.537
> 
> 标签：c#, .net, error-handling, filesystemwatcher

我想使用文件系统观察程序并在文件更改但触发 onchaged 事件时在表单上显示更改的信息但它被触发两次而不是一次并且我想要显示的表单从不显示并且程序停止而不显示任何异常它都会停止调试

```
public void Run()
{
    FileSystemWatcher watcher = new FileSystemWatcher();
    watcher.Path = pathOfPatientFixedFile.Remove(pathOfPatientFixedFile.IndexOf("PatientFixedData.xml")-1);
    watcher.Filter = "PatientFixedData.xml";
    watcher.Changed += new FileSystemEventHandler(watcher_Changed);
    watcher.EnableRaisingEvents = true;
}

private void watcher_Changed(object sender, FileSystemEventArgs e)
{
    try
    {
        GetPatientInfo(e.FullPath);
        frmPatientInfoDisplay displayPatientInfo = new frmPatientInfoDisplay(_patientInfo);
        displayPatientInfo.Show();
    }
    catch (Exception ex)
    {
    }
} 
```

GetPatientInfo 的代码

```
private void GetPatientInfo(String filePath)
{
    try
    {
        XmlDocument xmlDoc = new XmlDocument();
        using (StreamReader sr = new StreamReader(filePath, Encoding.Default))
        {
            String line = sr.ReadToEnd();
            if (line.IndexOf("<IsPatientFixed>") > 0)
            {
                var value = GetTagValue(line, "<IsPatientFixed>", "</IsPatientFixed>");
                if (value == "true" || value == "True")
                {
                    if (line.IndexOf("<PatientID>") > 0)
                        _patientInfo[0] = GetTagValue(line, "<PatientID>", "</PatientID>");
                    if (line.IndexOf("<PatientName>") > 0)
                        _patientInfo[1] = GetTagValue(line, "<PatientName>", "</PatientName>");
                    if (line.IndexOf("<PatientSex>") > 0)
                        _patientInfo[2] = GetTagValue(line, "<PatientSex>", "</PatientSex>");
                    if (line.IndexOf("<PatientDateOfBirth>") > 0)
                        _patientInfo[3] = GetTagValue(line, "<PatientDateOfBirth>", "<PatientDateOfBirth>");
                }
            }
        }
    }
    catch (Exception ex)
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T07:05:28.460

For starters, you're misusing the [`FileSystemWatcher`](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx) since it's a disposable component - it ought to be stored in a field, not a local variable, and disposed when no longer required.

Because you're not storing a long lived reference, it *may* be being garbage collected, and that *may* be leading to debugging stopping.

Also, it may fire multiple times, depending on what operations are being performed on the files by whichever other programs are interacting with the file - and there's no guarantee that the file will be accessible to *your* program at the point at which you receive notification.

As eluded to in the comments, you really need to a) Implement your TODOs, or b) Remove these empty `catch` blocks (the better option, IMO). You say "no exception is thrown", but you're making that pretty difficult to detect at the moment. It would be far better to let the program crash with a nice ugly error.

# jsf-2 - ClassCastException:UIViewRoot 无法转换为 org.portletfaces.bridge.component.PortletNamingContainerUIViewRoot

> ID：12104364
> 
> 赞同：1
> 
> 时间：2012-08-24T06:41:12.803
> 
> 标签：jsf-2, portlet

对于一个简单的 jsf 2.0 和 Tomcat 7 应用程序，我收到以下错误：

> 转换错误 java.lang.ClassCastException: javax.faces.component.UIViewRoot 不能转换为 org.portletfaces.bridge.component.PortletNamingContainerUIViewRoot

```
 Aug 24, 2012 11:55:40 AM com.sun.faces.application.view.FaceletViewHandlingStrategy       handleRenderException
 SEVERE: Error Rendering View[/hello.xhtml]
 java.lang.ClassCastException: javax.faces.component.UIViewRoot cannot be cast to   org.portletfaces.bridge.component.PortletNamingContainerUIViewRoot
at   org.portletfaces.bridge.renderkit.html_basic.HeadRenderer.encodeBegin(HeadRenderer.java:62)
at javax.faces.component.UIComponentBase.encodeBegin(UIComponentBase.java:823)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1611)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1616)
at   com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrateg       y.java:380) 
```

hello.xhtml 如下：

```
 <?xml version="1.0" encoding="UTF-8"?>
   <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
   <html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"      
     xmlns:h="http://java.sun.com/jsf/html">

<h:body>

    <h:form>
       <h:commandButton value="Welcome Me" action="welcome"></h:commandButton>
    </h:form>
</h:body>
  </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-17T21:12:39.777

我也有同样的问题。但是一旦 h:head 或 h:body 被删除，页面加载正常，除了需要 h:head 的 javascripts 和 css。这些将不会被加载。

# php - Yii 中下拉选项的默认值

> ID：12104367
> 
> 赞同：2
> 
> 时间：2012-08-24T06:41:18.573
> 
> 标签：php, yii

我有这样的`dropdown`选择`Yii`

```
<?php echo $form->dropdownList($students,'student_name', CHtml::listData(Students::model()->findAll(), 'student_name', 'student_name'), array('selected'=>'Choose One')); ?> 
```

这`html output`是这样的

```
<select selected="selected" name="Students[student_name]" id="Students_student_name">
<option value="Alex">Alex</option>
<option value="John">John</option>
<option value="Johny">Johny</option>
<option value="" selected="selected"></option>
</select> 
```

但我希望`Select One`应该是`default selected value for the dropdown options`. 所以默认情况下会`Select One`在没有选择任何选项时出现。

**[更新]**

`Select One`当我尝试时`array('prompt'=>'Choose One')`，它也是一种选择`array('empty'=>'Choose One')`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T06:43:38.437

我认为您对默认选定值使用了错误的键。

尝试：

```
// array('prompt'=>'Choose One')
echo $form->dropdownList($students,'student_name', CHtml::listData(Students::model()->findAll(), 'student_name', 'student_name'), array('prompt'=>'Choose One')); ?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T06:50:33.087

使用名为的属性`empty`

```
echo $form->dropdownList(
    $students,
    'student_name', 
     CHtml::listData(Students::model()->findAll(), 'student_name', 'student_name'),   
     array('empty'=>'Choose One') // boom!
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T18:13:59.267

当需要这样做时，我只需添加到 listData 生成的数组中。

```
<?php echo $form->dropdownList($students,'student_name', array(''=>'Select One') + CHtml::listData(Students::model()->findAll(), 'student_name', 'student_name')); ?> 
```

一直对我很好。

# c# - DataGridView 选中值，禁用按钮

> ID：12104370
> 
> 赞同：0
> 
> 时间：2012-08-24T06:41:29.607
> 
> 标签：c#, datagridview

DataGird 已经绑定了`datasource`一些`checked`和`unchecked`值。我必须禁用检查其值的按钮。

```
 private void disableManualBuyButtons()
    {
        foreach (DataGridViewRow row in gvViewTickets.Rows)
        {
            DataGridViewCheckBoxCell cbc = (DataGridViewCheckBoxCell)row.Cells[0];
            cbc.TrueValue = true;
            if (cbc.Value.Equals(cbc.TrueValue))
            {
                DataGridViewButtonCell btn = (DataGridViewButtonCell)row.Cells[8];
                btn.ReadOnly = true;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T06:55:35.317

根据[这篇](http://msdn.microsoft.com/en-us/library/ms171619.aspx)文章：

> DataGridView 控件包括 DataGridViewButtonCell 类，用于显示具有用户界面 (UI) 的单元格，例如按钮。但是，DataGridViewButtonCell 不提供禁用单元格显示的按钮外观的方法。

文章建议的解决方法是创建自己的专栏。您将在文章中找到完整的代码。

# scala - 在 Scala 中，是否可以有一个包含与字段名称相同的方法的案例类？

> ID：12104371
> 
> 赞同：0
> 
> 时间：2012-08-24T06:41:40.627
> 
> 标签：scala

我想我希望能够做如下（显然是垃圾）代码所示的事情：

```
// Clearly nonsensical
case class Example(a: String) {
    def a: Array[Byte] = a.getBytes
} 
```

它的要点是我想为一个与它的构造函数参数之一命名相同的案例类编写一个访问器方法。

我正在使用一个名为[Jerkson](https://github.com/codahale/jerkson)的 JSON 序列化库，根据我的理解，如果我以这种方式定义一个类，它将按照我想要的方式运行。我基于[此代码](https://github.com/codahale/jerkson/blob/master/src/main/scala/com/codahale/jerkson/ser/CaseClassSerializer.scala#L23-L38)的假设。目前，我[很难过](https://stackoverflow.com/questions/12102550/use-the-non-default-constructor-with-jerkson)。

如果这是不可能的，任何人都可以提供一些关于 Jerkson 库代码试图做什么的见解吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T07:01:16.137

不，这是不可能的。原因是`case`类的构造函数参数自动成为公共值，就像你用`val`. 引用[Scala 之旅：案例类](http://www.scala-lang.org/node/107)

> 案例类的构造函数参数被视为公共值，可以直接访问。

因此，Scala 为每个构造函数参数创建一个对应的同名[访问器方法。](http://en.wikipedia.org/wiki/Method_%28computer_programming%29#Accessor_and_mutator_methods)您不能创建具有相同名称的方法，它已经存在。

这实际上就是`case`课程的意义所在。想法是它们可以用于模式匹配，因此从它们检索的值应该与用于构造它们的值相同。

（使用类是要求`case`吗？使用常规类似乎可以解决问题。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T09:17:44.243

`val`Scala 自动创建一个与类中声明的任何方法（包括案例类的字段）同名的方法，以支持称为[引用透明性](http://www.artima.com/pins1ed/glossary.html#g-1825668081)的概念。这也是您可以[用 a](http://www.artima.com/pins1ed/abstract-members.html#lst%3abad-apple)[覆盖 a`def``val`](http://www.artima.com/pins1ed/abstract-members.html#lst%3abad-apple)的原因。如果您仍然持怀疑态度，您可以像这样自己测试：

首先，创建一个包含单个案例类的 Scala 文件。

```
// MyCase.scala
case class MyCase(myField1: Int, myField2: String) 
```

现在，用`scalac`. 这应该导致两个类。对于上面的示例，我得到*MyCase.class*（代表实际案例类类型）和*MyCase$.class*（代表案例类的自动生成的伴随对象）。

```
$ scalac MyCase.scala 
$ ls
MyCase$.class MyCase.class  MyCase.scala 
```

现在您可以检查与`.class`您使用声明的案例类相对应的结果文件`javap`。（`javap`检查 Java 字节码的标准工具——它与`javac`JDK 一起分发。）

```
$ javap -private MyCase
Compiled from "MyCase.scala"
public class MyCase extends java.lang.Object implements scala.Product,scala.Serializable{
    private final int myField1;
    private final java.lang.String myField2;
    public static final scala.Function1 tupled();
    public static final scala.Function1 curry();
    public static final scala.Function1 curried();
    public scala.collection.Iterator productIterator();
    public scala.collection.Iterator productElements();
    public int myField1();
    public java.lang.String myField2();
    public MyCase copy(int, java.lang.String);
    public java.lang.String copy$default$2();
    public int copy$default$1();
    public int hashCode();
    public java.lang.String toString();
    public boolean equals(java.lang.Object);
    public java.lang.String productPrefix();
    public int productArity();
    public java.lang.Object productElement(int);
    public boolean canEqual(java.lang.Object);
    private final boolean gd1$1(int, java.lang.String);
    public MyCase(int, java.lang.String);
} 
```

请注意生成的类如何同时具有与案例类的字段对应的a`private final int myField1`和 a 。对于.`public int myField1()``myField1``myField2`

在 JVM 上，方法返回类型*不是*方法签名的一部分。这意味着如果两个方法具有相同的名称和相同的参数类型，那么它们被认为是冲突的方法声明。这意味着您不能`def a: Array[Byte]`在示例中声明，因为`val a: String`已经存在，也没有参数。

***更新：***

我只是查看了库代码，根据示例，案例类应该可以正常工作。*README中*有一条注释说解析案例类*在 REPL 中不起作用。*那会是你的问题吗？如果没有，您应该真正发布您遇到的错误。**编辑：**没关系，我在指向其他帖子的链接中看到了您所说的错误。如果我想到对该问题的回应，我会在那里发布。

# ruby-on-rails - 预期 model.rb 定义 MODEL

> ID：12104373
> 
> 赞同：0
> 
> 时间：2012-08-24T06:41:53.287
> 
> 标签：ruby-on-rails, ruby, polymorphic-associations

我有 3 个表 Collections、Tracks 和 ProductContributors Association 如下

```
class Collection < ActiveRecord::Base
  has_many :product_contributors, :as => :product 
  has_many :tracks, :through => Product_contributors, :as=> :product
end

class Track < ActiveRecord::Base
 has_many :product_contributors, :as => :product 
 has_many :collections, :through => Product_contributors, :as => :product
end

class ProductContributor < < ActiveRecord::Base
  belongs_to :product, :polymorphic => true
  belongs_to :collection
  belongs_to :track
end 
```

每当我点击产品贡献者的 url 时，我都会收到以下错误：
***Expected /app/models/track.rb to define TRACK***

我已经浏览了[这个](https://stackoverflow.com/questions/11330750/loaderror-expected-app-path-models-model-file-rb-to-define-model-name)url，但无论如何都没有帮助我。我没有自动加载问题，我所有的模型都正确加载

任何帮助将不胜感激.. !!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T15:55:45.257

我敢说是因为你`Track`班上的错字。

```
has_many :collections, :through => Product_contributors, :as => :product 
```

无效。尝试：

```
has_many :collections, :through => :product_contributors, :as => :product 
```

基本上，它正在尝试加载模型，但它在关联中找到了拼写错误，然后它没有加载，导致它看起来好像类不存在。我想你也会在课堂上遇到类似的情况`Collection`。

# c#-4.0 - 通用删除不起作用？

> ID：12104380
> 
> 赞同：0
> 
> 时间：2012-08-24T06:42:24.727
> 
> 标签：c#-4.0, entity-framework-4.1

我有一个带有 Delete 方法的抽象存储库类：

```
 public abstract class MyRepository<C, T> :
        IMyRepository<T>
        where T : class
        where C : ObjectContext, new()
    {
        private C _entities = new C();

        public C Context
        {
            get { return _entities; }
            set { _entities = value; }
        }

        public virtual void Delete(T entity)
        {
            _entities.Attach(entity);
            _entities.DeleteObject(entity);
            _entities.SaveChanges();
        }
    } 
```

但是这不编译？如何在这里创建通用删除方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:48:07.233

而不是这个

```
private C _entities = new C(); 
```

使用*Activator.CreateInstance*：

```
private C _entities = Activator.CreateInstance<T>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T06:49:05.037

修改你的`Delete`方法如下

```
 public virtual void Delete(T entity)
    {
        _entities.CreateObjectSet<T>().Attach(entity);
        _entities.DeleteObject(entity);
        _entities.SaveChanges();
    }

    public virtual void Update(T entity)
    {
        _entities.CreateObjectSet<T>().Attach(entity);
        _entities.ObjectStateManager
            .ChangeObjectState(entity, System.Data.EntityState.Modified); 
        _entities.SaveChanges();
    } 
```

# javascript - 加载自定义图块后的 Google 地图事件

> ID：12104382
> 
> 赞同：0
> 
> 时间：2012-08-24T06:42:26.610
> 
> 标签：javascript, google-maps, google-maps-api-3

我有个问题。我正在使用 overlayMapTypes.insertAt() AKA MVCArray.insertAt() 加载自定义地图图块，然后我需要知道我的图块已加载。

```
google.maps.event.addListener(map, 'tilesloaded', function() {
        if (map.overlayMapTypes.getLength() == 0) {
            map.overlayMapTypes.insertAt(0, new ItemsMapType(new google.maps.Size(256, 256)));
        }
}); 
```

在那之后是否有事件触发？ps idle 事件触发得太快。

提前谢谢你的帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-25T10:47:49.727

你检查过[https://developers.google.com/maps/documentation/javascript/](https://developers.google.com/maps/documentation/javascript/)

# android - Android在显示进度对话框时执行代码

> ID：12104386
> 
> 赞同：0
> 
> 时间：2012-08-24T06:42:46.520
> 
> 标签：android, multithreading, dialog

```
protected void showSpinner() {
    dialogSpin = ProgressDialog.show(activity, "", 
            "Loading. Please wait...", true);

    Thread t = new Thread(new Runnable(){

        @Override
        public void run() {
            activity.runOnUiThread(new Runnable() {
                @Override
                public void run() {

                    EverydayNotesAndroid3Activity.importAllCalendar();
                }
            });
        }

    });
    t.start();
} 
```

我想在线程运行时显示微调器。这样，我可以在导入日历时向用户展示我的日历导入方式。

**问题**：我的 Spinner 对话框只会在导入完成时显示。我不知道我做错了什么，因为根据我的代码，它应该显示对话框然后运行导入（这需要 30 秒），但是再一次，对话框等待导入结束显示。

感谢关注，求更多信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T06:57:18.243

考虑研究[Asynctasks](http://developer.android.com/reference/android/os/AsyncTask.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T06:46:55.583

您正在自己的 UI 线程中导入日历。然后你的进度对话框等待直到导入完成。然后它会再次显示。

如果要显示进度对话框，请在另一个线程中导入日历，而不是在 UI 线程中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T07:19:48.573

我会使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)来导入日历。AsyncTask 具有三个可以被覆盖的方法。您覆盖 doInBackground 并执行在后台线程中完成的所有工作。每当 UI 中的某些内容发生变化时，您都可以从后台任务中调用 publishProgress。然后 AsyncTask 将在 UI-Thread 中调用[onProgressUpdate](http://developer.android.com/reference/android/os/AsyncTask.html#onProgressUpdate%28Progress...%29)以允许您向用户显示进度。

# buddypress - 将 Buddypress 注册移至索引页面

> ID：12104390
> 
> 赞同：0
> 
> 时间：2012-08-24T06:43:09.483
> 
> 标签：buddypress

我有一个自定义索引页面。我需要在索引页面上进行 buddypress 注册。脸书之类的。

任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T18:46:11.727

您可以简单地将主题 bp-default/registration/register.php 的内容复制粘贴到您的页面中。您可以在这两行之间复制 register.php 上的所有内容：

```
<?php do_action( 'bp_before_register_page' ); ?> 
```

和

```
<?php do_action( 'bp_after_register_page' ); ?> 
```

但是，但是……你需要删除这个 if 子句

```
<?php if ( 'request-details' == bp_get_current_signup_step() ) : ?> 
```

只需删除开始和结束 if 语句。中间的一切都应该保持原样。但是有一个问题，因为您删除了此 if 语句，您的注册表单将始终可见。如果你不能忍受，那么你需要做一些解决方法来解决这个问题。

# java - 无法在 Java 中创建类的实例：“X() 在 X 中具有私有访问权限”

> ID：12104391
> 
> 赞同：4
> 
> 时间：2012-08-24T06:43:15.787
> 
> 标签：java, class, design-patterns, instantiation

我正在尝试在我自己的 Java 程序中实例化[StdRandom](http://algs4.cs.princeton.edu/stdlib/StdRandom.java.html)类（见下文），以便我可以通过调用它的*统一*方法来生成随机整数。但是，我在编译过程中不断收到此错误：

> MyProgram.java:43: StdRandom() 在 StdRandom 中具有私有访问权限
> StdRandom random = new StdRandom();
> 1 个错误

我注意到代码中的这一行阻止我实例化 StdRandom 类：

```
// singleton pattern - can't instantiate
        private StdRandom() { } 
```

我的问题是：我应该如何实例化这个类并在我自己的程序中使用这个类中的方法？为什么上面的单例模式包含在这段代码中？我应该将模式注释掉并使用它吗？还是有另一种方法可以在我的 Java 程序中访问此类的方法？

```
/*************************************************************************
 *  Compilation:  javac StdRandom.java
 *  Execution:    java StdRandom
 *
 *  A library of static methods to generate pseudo-random numbers from
 *  different distributions (bernoulli, uniform, gaussian, discrete,
 *  and exponential). Also includes a method for shuffling an array.
 *
 *
 *  %  java StdRandom 5
 *  seed = 1316600602069
 *  59 16.81826  true 8.83954  0 
 *  32 91.32098  true 9.11026  0 
 *  35 10.11874  true 8.95396  3 
 *  92 32.88401  true 8.87089  0 
 *  72 92.55791  true 9.46241  0 
 *
 *  % java StdRandom 5
 *  seed = 1316600616575
 *  96 60.17070  true 8.72821  0 
 *  79 32.01607  true 8.58159  0 
 *  81 59.49065  true 9.10423  1 
 *  96 51.65818  true 9.02102  0 
 *  99 17.55771  true 8.99762  0 
 *
 *  % java StdRandom 5 1316600616575
 *  seed = 1316600616575
 *  96 60.17070  true 8.72821  0 
 *  79 32.01607  true 8.58159  0 
 *  81 59.49065  true 9.10423  1 
 *  96 51.65818  true 9.02102  0 
 *  99 17.55771  true 8.99762  0 
 *
 *
 *  Remark
 *  ------
 *    - Relies on randomness of nextDouble() method in java.util.Random
 *      to generate pseudorandom numbers in [0, 1).
 *
 *    - This library allows you to set and get the pseudorandom number seed.
 *
 *    - See http://www.honeylocust.com/RngPack/ for an industrial
 *      strength random number generator in Java.
 *
 *************************************************************************/

import java.util.Random;

/**
 *  <i>Standard random</i>. This class provides methods for generating
 *  random number from various distributions.
 *  <p>
 *  For additional documentation, see <a href="http://introcs.cs.princeton.edu/22library">Section 2.2</a> of
 *  <i>Introduction to Programming in Java: An Interdisciplinary Approach</i> by Robert Sedgewick and Kevin Wayne.
 */
public final class StdRandom {

    private static Random random;    // pseudo-random number generator
    private static long seed;        // pseudo-random number generator seed

    // static initializer
    static {
        // this is how the seed was set in Java 1.4
        seed = System.currentTimeMillis();
        random = new Random(seed);
    }

    // singleton pattern - can't instantiate
    private StdRandom() { }

    /**
     * Set the seed of the psedurandom number generator.
     */
    public static void setSeed(long s) {
        seed   = s;
        random = new Random(seed);
    }

    /**
     * Get the seed of the psedurandom number generator.
     */
    public static long getSeed() {
        return seed;
    }

    /**
     * Return real number uniformly in [0, 1).
     */
    public static double uniform() {
        return random.nextDouble();
    }

    /**
     * Return an integer uniformly between 0 and N-1.
     */
    public static int uniform(int N) {
        return random.nextInt(N);
    }

    ///////////////////////////////////////////////////////////////////////////
    //  STATIC METHODS BELOW RELY ON JAVA.UTIL.RANDOM ONLY INDIRECTLY VIA
    //  THE STATIC METHODS ABOVE.
    ///////////////////////////////////////////////////////////////////////////

    /**
     * Return real number uniformly in [0, 1).
     */
    public static double random() {
        return uniform();
    }

    /**
     * Return int uniformly in [a, b).
     */
    public static int uniform(int a, int b) {
        return a + uniform(b - a);
    }

    /**
     * Return real number uniformly in [a, b).
     */
    public static double uniform(double a, double b) {
        return a + uniform() * (b-a);
    }

    /**
     * Return a boolean, which is true with probability p, and false otherwise.
     */
    public static boolean bernoulli(double p) {
        return uniform() < p;
    }

    /**
     * Return a boolean, which is true with probability .5, and false otherwise.
     */
    public static boolean bernoulli() {
        return bernoulli(0.5);
    }

    /**
     * Return a real number with a standard Gaussian distribution.
     */
    public static double gaussian() {
        // use the polar form of the Box-Muller transform
        double r, x, y;
        do {
            x = uniform(-1.0, 1.0);
            y = uniform(-1.0, 1.0);
            r = x*x + y*y;
        } while (r >= 1 || r == 0);
        return x * Math.sqrt(-2 * Math.log(r) / r);

        // Remark:  y * Math.sqrt(-2 * Math.log(r) / r)
        // is an independent random gaussian
    }

    /**
     * Return a real number from a gaussian distribution with given mean and stddev
     */
    public static double gaussian(double mean, double stddev) {
        return mean + stddev * gaussian();
    }

    /**
     * Return an integer with a geometric distribution with mean 1/p.
     */
    public static int geometric(double p) {
        // using algorithm given by Knuth
        return (int) Math.ceil(Math.log(uniform()) / Math.log(1.0 - p));
    }

    /**
     * Return an integer with a Poisson distribution with mean lambda.
     */
    public static int poisson(double lambda) {
        // using algorithm given by Knuth
        // see http://en.wikipedia.org/wiki/Poisson_distribution
        int k = 0;
        double p = 1.0;
        double L = Math.exp(-lambda);
        do {
            k++;
            p *= uniform();
        } while (p >= L);
        return k-1;
    }

    /**
     * Return a real number with a Pareto distribution with parameter alpha.
     */
    public static double pareto(double alpha) {
        return Math.pow(1 - uniform(), -1.0/alpha) - 1.0;
    }

    /**
     * Return a real number with a Cauchy distribution.
     */
    public static double cauchy() {
        return Math.tan(Math.PI * (uniform() - 0.5));
    }

    /**
     * Return a number from a discrete distribution: i with probability a[i].
     * Precondition: array entries are nonnegative and their sum equals 1.
     */
    public static int discrete(double[] a) {
        double EPSILON = 1E-14;
        double sum = 0.0;
        for (int i = 0; i < a.length; i++) {
            if (a[i] < 0.0) throw new IllegalArgumentException("array entry " + i + " is negative: " + a[i]);
            sum = sum + a[i];
        }
        if (sum > 1.0 + EPSILON || sum < 1.0 - EPSILON)
            throw new IllegalArgumentException("sum of array entries not equal to one: " + sum);

        double r = uniform();
        sum = 0.0;
        for (int i = 0; i < a.length; i++) {
            sum = sum + a[i];
            if (sum >= r) return i;
        }
        return -1;
    }

    /**
     * Return a real number from an exponential distribution with rate lambda.
     */
    public static double exp(double lambda) {
        return -Math.log(1 - uniform()) / lambda;
    }

    /**
     * Rearrange the elements of an array in random order.
     */
    public static void shuffle(Object[] a) {
        int N = a.length;
        for (int i = 0; i < N; i++) {
            int r = i + uniform(N-i);     // between i and N-1
            Object temp = a[i];
            a[i] = a[r];
            a[r] = temp;
        }
    }

    /**
     * Rearrange the elements of a double array in random order.
     */
    public static void shuffle(double[] a) {
        int N = a.length;
        for (int i = 0; i < N; i++) {
            int r = i + uniform(N-i);     // between i and N-1
            double temp = a[i];
            a[i] = a[r];
            a[r] = temp;
        }
    }

    /**
     * Rearrange the elements of an int array in random order.
     */
    public static void shuffle(int[] a) {
        int N = a.length;
        for (int i = 0; i < N; i++) {
            int r = i + uniform(N-i);     // between i and N-1
            int temp = a[i];
            a[i] = a[r];
            a[r] = temp;
        }
    }

    /**
     * Rearrange the elements of the subarray a[lo..hi] in random order.
     */
    public static void shuffle(Object[] a, int lo, int hi) {
        if (lo < 0 || lo > hi || hi >= a.length)
            throw new RuntimeException("Illegal subarray range");
        for (int i = lo; i <= hi; i++) {
            int r = i + uniform(hi-i+1);     // between i and hi
            Object temp = a[i];
            a[i] = a[r];
            a[r] = temp;
        }
    }

    /**
     * Rearrange the elements of the subarray a[lo..hi] in random order.
     */
    public static void shuffle(double[] a, int lo, int hi) {
        if (lo < 0 || lo > hi || hi >= a.length)
            throw new RuntimeException("Illegal subarray range");
        for (int i = lo; i <= hi; i++) {
            int r = i + uniform(hi-i+1);     // between i and hi
            double temp = a[i];
            a[i] = a[r];
            a[r] = temp;
        }
    }

    /**
     * Rearrange the elements of the subarray a[lo..hi] in random order.
     */
    public static void shuffle(int[] a, int lo, int hi) {
        if (lo < 0 || lo > hi || hi >= a.length)
            throw new RuntimeException("Illegal subarray range");
        for (int i = lo; i <= hi; i++) {
            int r = i + uniform(hi-i+1);     // between i and hi
            int temp = a[i];
            a[i] = a[r];
            a[r] = temp;
        }
    }

    /**
     * Uniformly sample (without replacement) M of the N items from the array a[].
     * To make it work with an Object[] argument and return an array of the 
     * underlying argument type requires some Java minutiae, e.g., using static
     * generics and Arrays.copyOf().
     */
    public static String[] sample(String[] a, int M) {
        int N = a.length;
        if (M < 0 || M > N)
            throw new RuntimeException("Illegal number of samples");
        String[] b = new String[M];
        for (int i = 0; i < N; i++) {
            int r = uniform(i+1);     // between 0 and i
            if (r < M) {
                if (i < M) b[i] = b[r];
                b[r] = a[i];
            }
        }
        return b;
    }

    /**
     * Unit test.
     */
    public static void main(String[] args) {
        int N = Integer.parseInt(args[0]);
        if (args.length == 2) StdRandom.setSeed(Long.parseLong(args[1]));
        double[] t = { .5, .3, .1, .1 };

        StdOut.println("seed = " + StdRandom.getSeed());
        for (int i = 0; i < N; i++) {
            StdOut.printf("%2d "  , uniform(100));
            StdOut.printf("%8.5f ", uniform(10.0, 99.0));
            StdOut.printf("%5b "  , bernoulli(.5));
            StdOut.printf("%7.5f ", gaussian(9.0, .2));
            StdOut.printf("%2d "  , discrete(t));
            StdOut.println();
        }

        String[] a = "A B C D E F G".split(" ");
        for (String s : a)
            StdOut.print(s + " ");
        StdOut.println();
        String[] b = StdRandom.sample(a, 3);
        for (String s : b)
            StdOut.print(s + " ");
        StdOut.println();
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T06:45:06.047

所有方法都是静态的，您无需创建该类的实例即可使用它。要使用例如该`random()`方法，请使用`StdRandom.random()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T06:46:17.620

你不实例化它，你静态地调用方法：

```
StdRandom.setSeed(42L);
double n = StdRandom.uniform(66); 
```

等等

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T06:47:32.220

这个类中的所有方法都是静态的，你不需要也不能实例化，因为它有私有构造函数，你可以直接使用方法例如`StdRandom.unifrom(...)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T06:47:42.943

这是带有隐藏构造函数的“util”类。而不是直接创建新的实例调用方法：`StdRandom.uniform(100)`,`StdRandom.random()`等。

# javascript - 如何“取消渲染” MathJax 方程？

> ID：12104394
> 
> 赞同：1
> 
> 时间：2012-08-24T06:43:29.777
> 
> 标签：javascript, html, mathjax

我们都知道 MathJax 默认在窗口加载时渲染元素（并且可以使用`MathJax.Hub.Queue(["Typeset",MathJax.Hub]);` [Reference Link](https://stackoverflow.com/questions/5200545/mathjax-js-how-to-recall-restart-it)刷新），但是有没有办法“取消渲染”元素？例如，在刚刚加载页面后，我可以单击一个按钮，所有元素都会变回它们的 TeX 代码。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:00:39.983

好吧，原来的 TeX 代码是由 MathJax 存储的，所以你可以使用一些 javascript 把它放回去。[MathJax 用户论坛](https://groups.google.com/d/msg/mathjax-users/IwXGeBqwN1s/Q3DaXsAHpxUJ)上有一个如何执行此操作的示例，我认为这可能是您正在寻找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T22:53:01.723

似乎 MathJax 将原始 LaTeX 代码隐藏在一个名为 的元素中`MathJax-Element-x`，该元素包含原始代码。所以我所做的只是用类隐藏所有元素`MathJax_Display`，其中出现格式化版本，并显示所有以`MathJax-Element-`. 似乎工作正常。

**编辑**`MathJax_Display`：我不得不选择里面的所有元素，而不是选择元素`MathJax_Display`，比如`MathJax_Display *`. 我还必须更改放入 LaTeX 代码的元素类型，就像它在脚本中一样。

# android - 从 TypedValue 中提取背景颜色/可绘制对象

> ID：12104401
> 
> 赞同：0
> 
> 时间：2012-08-24T06:44:25.737
> 
> 标签：android, resources, styles

我正在开发一个 Android 项目，并尝试检索窗口标题背景样式，然后提取背景颜色/可绘制对象（这样我就可以将它们应用于我的自定义标题栏布局）。我已经能够使用以下代码获得样式的 TYPE_REFERENCE ：

```
 TypedValue a = new TypedValue();
            getTheme().resolveAttribute(android.R.attr.windowTitleBackgroundStyle, a, true);
            if(a.type == TypedValue.TYPE_REFERENCE){
    // GOES IN HERE
// Drawable d = getResources().getDrawable(a.resourceId); // THROWS A RESOURCES NOT FOUND EXCEPTION
    } 
```

我对如何成功地弄清楚 a 指向的资源是什么以及从那里到颜色/可绘制的资源一无所知（尽管很容易在 Google 中尝试了 2 个小时的咒语）。我假设它是在某处用 XML 定义的样式：我如何才能以编程方式实际获取该样式的属性/属性/设置并获取背景的颜色/Drawable？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T07:19:48.043

啊，想通了：

```
TypedValue a = new TypedValue();
getTheme().resolveAttribute(android.R.attr.windowTitleBackgroundStyle, a, true);
        if(a.type == TypedValue.TYPE_REFERENCE){
            TypedArray b = this.obtainStyledAttributes(a.resourceId, new int[]{
                    android.R.attr.background
            });
            b.getValue(0, a);
                        titleBar.setBackgroundResource(a.resourceid);
            b.recycle();
        } 
```

# objective-c - 关键IOS值的字典检索

> ID：12104402
> 
> 赞同：1
> 
> 时间：2012-08-24T06:44:47.947
> 
> 标签：objective-c, ios, nsdictionary

对不起，我是IOS新手，我无法弄清楚这个问题的解决方案

这只是一个初学者餐厅菜单

有一个包含项目和价格的表格视图，当我单击一个项目时，它会显示另一个视图，用户必须输入数量并单击完成按钮，所以当用户单击完成时，我想将数量乘以价格，如何我是否检索该特定价格并将其与文本字段中用户输入的数量相乘。

这是我的代码

我在名为的 Menu 头文件中声明了 NSDictionary

```
NSDictionary *dict; 
```

我的 viewdidload 方法

```
dict=[[NSDictionaryalloc]initWithObjectsAndKeys:
@"TomatoSoup",@"20.00",@"VegManchowSoup",@"12.00",nil];
NSLog(@"%@",dict);
[super viewDidLoad]; 
```

我已在表格视图中显示此内容

```
- (NSInteger)tableView:(UITableView *)table numberOfRowsInSection:(NSInteger)section{
return [[dict allKeys]count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{ 
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];
}

NSArray *sortedkeys=[[dict allKeys]sortedArrayUsingSelector:@selector(caseInsensitiveCompare:)];
NSString *key=[sortedkeys objectAtIndex:indexPath.row];
NSString *value=[dict objectForKey:key];
cell.textLabel.text=value;
cell.detailTextLabel.text=key;
return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath*)indexPath{
if(indexPath.row==0){   

VegQuantity *vegetarian1 = [[VegQuantity alloc]   initWithNibName:@"VegQuantity" bundle:nil];
vegetarian1.m_SelectedIndexPath=indexPath.row;
vegetarian1.pass=dict;
[self presentModalViewController:vegetarian1 animated:YES];
}
if(indexPath.row==1){   

VegQuantity *vegetarian1 = [[VegQuantity alloc] initWithNibName:@"VegQuantity" bundle:nil];
vegetarian1.m_SelectedIndexPath=indexPath.row;
[self presentModalViewController:vegetarian1 animated:YES];
}
} 
```

VegQuantity.h 有一个视图，其中有一个文本字段和一个表示完成的按钮，现在当我单击完成按钮时，我需要检索该特定汤的值并将其乘以我输入的数量。我的问题是我应该如何检索该特定键的价格（值）并将其与数量相乘。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T07:04:51.423

```
dict=[[NSDictionary alloc]initWithObjectsAndKeys:
                     @"TomatoSoup",@"20.00",@"VegManchowSoup",@"12.00",nil]; 
```

该方法是initWithObjectsAndKeys，这意味着首先是对象，然后是键，（键“20.00”，对象-“TomatoSoup”）-在您的情况下，情况正好相反。

其次，不要使用 NSString 作为价格（我想是价格或数量），而是使用 NSNumber - [NSNumber numberWithFloat:20.0f]。

然后，制作您的 VegQuantity 视图控制器（顺便说一句，最好将其称为 VegQuantityViewController，以保持命名约定）2 个属性：

```
@property (nonatomic, strong) NSString *itemName; //Use strong if using ARC,  otherwise retain
@property (nonatomic, strong) NSNumber *price; 
```

并在显示之前将这些值传递给视图控制器。然后在里面你可以对它们做任何你想做的事情。PS 使用属性来操作实例变量的值是一种很好的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T06:55:01.153

您可以通过使用从 Dictionary 中检索一个值。

```
[dict objectForKey:@"someDummyKey"]; 
```

但老实说。您应该使用 NSMutableArray 作为 UITableView 的数据源，而不是 NSDictionary。

# iphone - 从 CMS 获取的文本中的特殊字符问题

> ID：12104403
> 
> 赞同：4
> 
> 时间：2012-08-24T06:44:54.660
> 
> 标签：iphone, encoding, utf-8, special-characters, decoding

我正在使用 API 从 CMS 获取数据，我们正在显示用户在 CMS 中输入的文本，

但我的问题是当用户在 CMS 中输入一些特殊字符时，我无法在 iphone 端获取这些文本

这是用户在**墙描述中输入的文本链接** ![在此处输入图像描述](../Images/3b4170803de0caa13a525756ced9f957.png)

我们正在使用 json 网络服务，它们将字符串编码为 utf-8，所以我的 json 字符串将是

**您的词汇表中没有“停止”这个词。在 4.5 小时或更短的时间内跑完马拉松。**

utf 字符 \u0092 是我们需要显示的特殊字符，如上图所示

注意：1）如果我们在 web 服务中将未编码的字符串传递给 utf-8，我将整个字符串作为 null 。

2）我尝试了 [NSString stringWithCString:[textFromCms cStringUsingEncoding:NSISOLatin1StringEncoding] encoding:NSUTF8StringEncoding]; 其中 textFromCms 是我从 cms 获得的文本，如上所示。

3）我也尝试不进行任何对话/编码......它忽略了特殊字符

4）也尝试使用base64，但也没有帮助。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T07:08:05.057

CMS 显然使用的是 windows-1252，而不是 UTF-8。卷曲撇号在 windows-1252 中是 92（十六进制），在 Unicode 中是 U+2019，因此当正确编码为 JSON 时，它应该是`\2019`.

# java - 在不使用额外线程的情况下向同一个 Web 容器中的另一个 servlet 发送新请求

> ID：12104406
> 
> 赞同：3
> 
> 时间：2012-08-24T06:45:09.853
> 
> 标签：java, servlets, websphere

是否有任何已知方法可以在单个 WebContainer 中将新的 SOAP 请求从一个 servlet 发送到另一个，而无需消耗额外的 Web 容器线程？

到目前为止，我已经尝试将 RequestDispatcher.include(request, response) 与自定义请求和响应一起使用，这样我就可以提供自己的输入并拦截被调用者的输出。有了这个，我可以毫无问题地拦截输出（使用写入缓冲区的自定义 HttpServletResponse 类），但我无法使用此方法发送自定义输入。我正在使用 HttpServletRequestWrapper 的扩展来向第三方应用程序提供我自己的输入（而不是对我的应用程序的原始请求），但是似乎 WebSphere 或 Axis 正在丢弃我的包装器，因此我得到一个 SOAP 错误而不是有效的回应。为了清楚起见，我不需要将原始请求转发给被调用者（这是一个 JSONP GET 请求），

我应该尝试这种方法的变体吗？是否有完全不同的方式在单个 Web 容器中发送请求？

非常感谢回复的人。

对于上下文，我正在编写一个在 WebSphere Application Server 上运行的 JSON/REST Web 服务，它反过来通过 Axis 2 上的 SOAP 调用第三方产品。不幸的是，这个第三方产品*只能*通过 SOAP HTTP 接口获得，尽管它本身是在同一个 WebSphere Web 容器中运行的 Java servlet。

以前，我一直使用基于第三方产品的 WSDL 的 SOAP 代理生成器生成的 HTTP 代理调用此应用程序。这很好用，但这意味着对我的服务的一次调用又会消耗两个 Web 容器线程，这是一个严重的漏洞。一旦 Web 容器线程池已满，它就会保持满状态，因为对我的 servlet 的请求会一直保持线程，直到第三方应用程序响应为止，因为没有线程可用于处理我的 servlet 发出的 HTTP 请求，所以它无法做到这一点。

**更新：** 我已经做了一些进一步的测试，并且能够成功地将这种类型的转发到我的 REST 服务。我可以使用合成的 ServletRequest 和 ServletResponse 查询我的 REST/JSON 服务，因此*如果*我调用的产品不使用 Axis SOAP 接口，我就可以实现我的原始目的。看起来 Axis 在寻找 SOAPAction 标头的位置与我预期的不同，因为我总是得到“找不到 SOAPAction 标头！” 尽管我在合成请求中添加了 SOAPAction 标头，但仍返回错误消息（我已验证实际上添加了 SOAPAction 标头）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:02:41.180

事实证明，由于“缺少” SOAPAction 标头，我无法让该服务与 Axis 一起工作的原因与 WebSphere 或 Axis 完全无关。这是一个 ConcurrentHasMap，它以某种方式比较两个等效字符串并说它们不同，因此当 Axis 查找 SOAPAction 标头时，它从未返回。为了解决这个问题，我简单地测试了关于“SOAPAction”的查询并对响应进行了硬编码。

因此，为了将来参考，这里是我使用的一般设置。

1.  创建一个实现类，该类实现`HttpServletRequest`包装另一个`HttpServletRequest`要在构造函数中提供的类。在此类中，该`getHeader`方法被重写以捕获对 SOAPAction 标头的请求，其他标头请求可能被转发到原始请求（Axis 似乎不寻找 SOAPAction 标头以外的任何内容）。我还`getInputStream`重写了返回我自己的 ServletInputStream 实现的方法，该实现只是使用固定文本编码从字节缓冲区中读取，以及`getContentLength`返回与我的数据一致的长度的方法。

2.  创建一个实现 HttpServletResponse 的类，该类只正确实现 getWriter 和 getOutputStream 方法。该`getOutputStream`方法返回一个自定义`ServletOutputStream`实现，该实现将其输出记录到字节缓冲区。该`getWriter`方法返回了一个特殊的 PrintWriter，它写入了由 返回的同一个 ServletOutputStream `getOutputStream`，除了这个 writer在写入后*总是*需要刷新 - 我不知道为什么必须这样。

3.  在使用 发送请求之前`RequestDispatcher.include(request, response)`，我将我的合成文件包裹`HttpServletRequest`在一个`HttpServletRequestWrapper`中，奇怪的是这似乎有帮助。然后我`RequestDispatcher.include(request, response)`以通常的方式使用，并从我的自定义 ServletOutputStream 的字节缓冲区中读取 SOAP 服务的输出，以像我发出 HTTP 请求一样进行处理。

# java - Oracle 序列事务性

> ID：12104407
> 
> 赞同：18
> 
> 时间：2012-08-24T06:45:16.767
> 
> 标签：java, sql, oracle, hibernate, sequence-sql

我需要一个特定的业务场景来在一个实体（不是 PK）上设置一个来自序列的数字（序列必须是 min 和 max 之间的数字）

我定义了这样的序列：

```
CREATE SEQUENCE MySequence
  MINVALUE 65536 
  MAXVALUE 4294967296 
  START WITH 65536
  INCREMENT BY 1
  CYCLE
  NOCACHE
  ORDER; 
```

在 Java 代码中，我从这样的序列中检索数字：

```
select mySequence.nextval from dual 
```

我的问题是：

如果我`select mySequence.nextval from dual`在一个事务中调用这个“”并且在另一个事务中同时调用相同的方法（并行请求），那么确定序列返回的值是不同的吗？

不可能像从第一笔交易中读取未提交的值吗？

因为假设我不会使用序列和一个普通表，我会在其中增加自己的序列，那么如果 trasactinalitY 是默认的“READ COMMITTED”，那么事务 2 将能够读取相同的值。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-08-24T07:03:56.677

答案是不。

Oracle 保证序列生成的数字是不同的。即使发出并行请求，RAC 环境或回滚和提交也是混合的。

序列与事务无关。

请参阅[此处的文档](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_6015.htm)：

> 使用 CREATE SEQUENCE 语句创建一个序列，这是一个数据库对象，多个用户可以从中生成**唯一** 整数。您可以使用序列自动生成主键值。
> 
> 生成序列号时，序列会递增， 与事务提交或回滚**无关。**如果两个用户同时递增同一个序列，那么每个用户获取的序列号可能会有间隙，因为序列号是由另一个用户生成的。一个用户永远无法获得另一个用户生成的序列号。在一个用户生成序列值后，该用户可以继续访问该值，而不管该序列是否由另一个用户递增。
> 
> 序列号是独立于表生成的，因此可以为一个或多个表使用相同的序列。个别序列号可能会被跳过，因为它们是在最终回滚的事务中生成和使用的。此外，单个用户可能没有意识到其他用户正在从同一序列中绘图。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-24T06:57:14.497

Oracle 保证序列号会有所不同。即使您的事务被回滚，该序列也被“使用”并且不会重新发布给另一个查询。

编辑：在 Cris 的评论中说明围绕“无间隙”的要求后添加附加信息

如果您的要求是一个*没有间隙*的数字序列，那么 oracle 序列可能不是一个合适的解决方案，因为在事务回滚时，或者当数据库重新启动或任何其他数量的场景时会出现间隙。

序列的主要目的是作为唯一数字（例如主键）的高性能生成工具，而不考虑间隙和事务上下文约束。

如果您的设计/业务/审计要求需要考虑每个数字，那么您需要设计一个在事务上下文中使用预定数字的解决方案。在多线程环境中，这可能很棘手并且容易出现性能/锁定问题。最好尝试重新定义您的要求，这样差距就无关紧要了。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-24T06:56:53.767

`sequence.nextval`永远不会为并发请求返回相同的值（循环之前）。也许您应该检查以下 URL：

[http://docs.oracle.com/cd/B19306_01/server.102/b14220/schema.htm#sthref883](http://docs.oracle.com/cd/B19306_01/server.102/b14220/schema.htm#sthref883)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T07:08:35.070

不幸的是，你必须实现你自己的轮子——事务序列。这相当简单 - 只需创建像 sequence_name varchar2、value、min_value number、max_value number、need_cycle char 这样的表，然后搞乱“从序列表中选择值到变量中以进行更新等待（或 nowait - 这取决于您的场景）”。在它发出 update set value = variable from previous step + 1 其中 sequence_name = 您的序列的名称并从客户端发出提交语句之后。就是这样。

# java - 使用 '' 从 HTML 表中获取行的内容

> ID：12104412
> 
> 赞同：0
> 
> 时间：2012-08-24T06:45:46.763
> 
> 标签：java, javascript, html, jsp

我使用jsp和java从mysql db中获取并显示数据作为html表现在我想要的是当用户点击特定行时，如果我的表有这个数据，那么该行中的数据应该填充在3个不同的标签示例中

姓名 地点 手机号码

```
a         abc         123
b         def         234
c         ghi         345 
```

（上表取自mysql db）

如果用户单击第 3 行，则姓名地点和手机号码等数据应显示在 3 个不同的标签中，如下所示

```
Name: c
Place: ghi
Mobile: 345 
```

提前致谢

在我曾经在每行右侧有一个带有“名称”的按钮之前（如果它是一行 c，那么按钮有 c），所以我使用 CSS 用图片装饰了按钮。

这是我使用的代码

```
 <form action="Options2" method="post">
 <table id="sorter" class="sortable" id="example" class="pretty">
 <tr>
<th>Book Id</th>
<th>Title</th>
<th>Author</th>
<th>Category</th>
<th>Status</th>            
<th>Owner</th>
<th>Borrow Date</th>
<th>Return Date</th>
<th>Requested By</th>
<th>Actions</th>            
</tr>
<%
ArrayList  rs=(ArrayList)request.getAttribute("news");
ListIterator itr=rs.listIterator();
int i=1;

while( itr.hasNext()){ 
%> 
<tr> 
<td><%=itr.next()%></td> 
<% int Id = itr.nextIndex(); %>
<td><%=itr.next()%></td>    
<td><%=itr.next()%></td> 
<td><%=itr.next()%></td> 
<% int Id2 = itr.nextIndex(); %>
<td><%=itr.next()%></td> 
<td><%=itr.next()%></td> 
<td><%=itr.next()%></td> 
<td><%=itr.next()%></td>
<td><%=itr.next()%></td>
<% 
String Bname=rs.get(Id).toString();
System.out.println(Bname); 
String Stat=rs.get(Id2).toString();
System.out.println(Stat); 
if(!Stat.equals("Not Availible"))
{
%>
<td>
<input class="buttonir" type="Submit" name="X" value="<%=Bname %>"></td>
</tr>
<% 
}
}
%>
</table>

</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:57:36.370

尝试这个：

```
$('table tr').click(function () {
    var BookId = $(this).children('td:eq(0)').html();
    var Title = $(this).children('td:eq(1)').html();
    var Author = $(this).children('td:eq(2)').html();

    $('div').html(
        'Book Id: ' + BookId + '<br />' +
        'Title: ' + Title + '<br />' + 
        'Author:' + Author + '<br />'
    );
}); 
```

演示：http: [//jsfiddle.net/UPxB9/1/](http://jsfiddle.net/UPxB9/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T08:53:30.190

将其与您的代码进行比较，它几乎相同，只是提到了一些更改

在您的代码中仅添加了以下功能，并且在代码中突出显示了另外两行

**编辑** 在此页面上的（已经工作的）javascript 标记或您在此页面中使用的 js 文件中添加以下功能

```
function displayRowData(yourRow)
{
   var dv=document.getElementById('yourDivId');
   dv.innerHTML="<br>Name : "+ yourRow.children[0].innerHTML";
   dv.innerHTML += "<br>Place: "+yourRow.children[1].innerHTML";
   dv.innerHTML += "<br>Name : "+yourRow.children[2].innerHTML";
}

<form action="Options2" method="post">
 <table id="sorter" class="sortable" id="example" class="pretty">
 <tr>
<th>Book Id</th>
<th>Title</th>
<th>Author</th>
<th>Category</th>
<th>Status</th>            
<th>Owner</th>
<th>Borrow Date</th>
<th>Return Date</th>
<th>Requested By</th>
<th>Actions</th>            
</tr>
<%
ArrayList  rs=(ArrayList)request.getAttribute("news");
ListIterator itr=rs.listIterator();
int i=1;

while( itr.hasNext()){ 
%> 
```

**以下行刚刚修改，它已经在您的代码中**

```
<tr onclick='displayRowData(this)'> 

<td><%=itr.next()%></td> 
<% int Id = itr.nextIndex(); %>
<td><%=itr.next()%></td>    
<td><%=itr.next()%></td> 
<td><%=itr.next()%></td> 
<% int Id2 = itr.nextIndex(); %>
<td><%=itr.next()%></td> 
<td><%=itr.next()%></td> 
<td><%=itr.next()%></td> 
<td><%=itr.next()%></td>
<td><%=itr.next()%></td>
<% 
String Bname=rs.get(Id).toString();
System.out.println(Bname); 
String Stat=rs.get(Id2).toString();
System.out.println(Stat); 
if(!Stat.equals("Not Availible"))
{
%>
<td>
<input class="buttonir" type="Submit" name="X" value="<%=Bname %>"></td>
</tr>
<% 
}
}
%>
</table> 
```

**将以下行添加到您的代码中**

```
<div id='yourDivId'></div>
</form> 
```

# forms - perl dbi 提交复选框值

> ID：12104414
> 
> 赞同：-1
> 
> 时间：2012-08-24T06:45:49.407
> 
> 标签：forms, perl, checkbox, dbi

我有一个带有复选框的表单，我需要知道将它们提交到数据库的最佳方式是什么。我有以下表格设置：

```
roles    users    user_roles
-----    -----    ----------
id       id       user_id
                  role_id 
```

我有一个页面，您可以在其中编辑用户并通过复选框为他们分配不同的角色，然后将这些复选框保存在 user_roles 表中。由于编辑用户的角色可能涉及删除行或添加行，这就是我目前的处理方式：

```
my $form_vals = (1=>1,2=>2); #submitted by user
my $db_vals = (3=>3); #gotten out of db 
```

所以我有这两个哈希值，我会将 in 中的键与 in 中`$form_vals`的键进行比较`$db_vals`，然后我看到我有两个额外的值在数据库中不存在，所以我添加了它们。反之亦然，我通过比较键`$db_vals`和键来发现表单上不再选择哪些值`$form_vals`，然后从数据库中删除这些行。我的问题是，有人知道更好/更简单的方法吗？对我来说，如何处理复选框从来都不是很明显，我想知道最佳实践是什么。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T09:25:29.603

我不会说这与复选框本身有很大关系。

基本上，您拥有的是两个数组数组，[ (uid, rid), (uid, rid) ]，并且您想让 array1（数据库中的那个）成为 array2（复选框中的用户输入）的副本。你可以有一个多选或一个逗号分隔的字符串，大小写也是一样的。您有一个用户 ID，并且您希望该用户仅具有提供的角色。

实现这一目标的两种方法是

*   将两个数组分别放在一个哈希中，对提交的执行 foreach 键，如果数据库中不存在，则插入。然后对数据库哈希执行相同的操作并删除提交的哈希中不存在的那些
*   从 member_role 表中删除所有内容并插入提交的内容。

您确实必须了解数据库中的所有内容以及提交的所有内容，如果您不想删除所有内容并进行新的插入，请检查两次。你当然可以为你做一个函数，隐藏丑陋一点。想想如果它只有两个数组并且没有数据库，你会怎么做。

# html - css3 文字旋转

> ID：12104418
> 
> 赞同：0
> 
> 时间：2012-08-24T06:46:26.047
> 
> 标签：html, css, rotation

如何在我的代码中水平翻转文本。

当我在纯代码中尝试 -90deg 时，它可以工作，但是当我将它添加到我的工作示例中时它不起作用。目前我旋转了 h3 文本，但我需要面向左侧（意味着水平翻转它）

这是[演示](http://jsfiddle.net/pJDLG/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T07:44:11.157

```
transform: scaleX(-1); 
```

您不使用 rotate 进行翻转，而是使用 scale -`scaleX(-1)`水平`scaleY(-1)`翻转，垂直翻转 - [**demo**](http://dabblet.com/gist/3447277)。

* * *

但是，在您的示例中，您需要的是`-90deg`旋转，删除`transform-origin`（让它采用默认值）并更改`margin`.

[**演示**](http://jsfiddle.net/thebabydino/pJDLG/25/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T06:56:30.697

尝试使用正值。

另见此处：

[http://css-infos.net/property/-webkit-transform](http://css-infos.net/property/-webkit-transform)

例子：

```
p {
  -webkit-transform: rotate(45deg);
} 
```

# dynamics-crm - 无法将主题文本添加到 Dynamics CRM 活动中的相关字段

> ID：12104420
> 
> 赞同：0
> 
> 时间：2012-08-24T06:46:37.973
> 
> 标签：dynamics-crm, microsoft-dynamics

我在 Dynamics CRM 的管理部分下添加了几个主题。我真的很想将这些“主题”之一添加到活动中的相关字段中。例如，有人打来电话，它与“ProductX”有关。

奇怪的是，在尝试为字段选择项目时，实体类型“主题”不会出现。出现一系列其他实体类型，例如“联系人”和“帐户”。

有谁知道为什么这里不能选择主题？我原以为这是 OOB 功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T09:05:50.127

那是因为就某个主题进行活动没有任何意义。

一项活动只​​有在其他事物的背景下才真正有意义，而其他事物通常是世界上的真实事物或作品。关于字段真的说：“这个活动涉及处理这个事情”。

例如，如果 John Smith 给您的公司打电话，创建一个新的电话活动来关注 John Smith 的联系人记录是有意义的。使用这种方法，您可以查看针对联系人的整个活动历史记录。通过打电话给联系人，您是在说这件作品是关于联系人的。

如果电话是关于一个主题的，它会说，“这个电话涉及处理这个主题”，这是不正确的，它是关于联系人的工作。您也失去了跟踪与联系人的通信的能力。

所以我的建议是，如果您想对电话进行分类，请使用“相关”字段链接到人和事，并在您的活动和主题之间添加关系。

作为一个方面，CRM 中有一个产品实体（但它不能是关于），所以也许你应该创建一个关系。

# c# - 单元测试控制台 c# 应用程序的最佳方法

> ID：12104429
> 
> 赞同：9
> 
> 时间：2012-08-24T06:47:01.140
> 
> 标签：c#, unit-testing, nunit

我有一个简单的控制台应用程序。它是用一个普通的 main 触发的，整个程序在 main 中返回。它使用[命令行解析器库](http://commandline.codeplex.com/)。然后我在解决方案中有第二个项目，其中包含应用程序的单元测试。但是我似乎没有找到从测试中启动主程序进程的好方法。我当前实际启动该过程的代码看起来像这样。

```
...

process = new Process();
process.StartInfo.FileName = "FooBar";
process.StartInfo.Arguments = arguments;

// use it to start from testing environment
process.StartInfo.UseShellExecute = false;

// redirect outputs to have it in testing console
process.StartInfo.RedirectStandardOutput = true;
process.StartInfo.RedirectStandardError = true;

... 
```

我试过设置

```
process.StartInfo.WorkingDirectory 
```

至

```
AppDomain.CurrentDomain.BaseDirectory 
```

和

```
Environment.CurrentDirectory; 
```

但是我是否必须为控制台应用程序可执行文件指定整个相对路径，或者是否有一种改进的方式来启动“测试”应用程序的进程？首先，我将测试作为“主”程序中的一个类，然后它工作得很好。当我将测试转移到他们自己的项目时，问题就开始了。这就是为什么我怀疑路径是问题或类似性质的东西。

我也试过 Running Program.Main 但这感觉很不对:)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-24T12:48:16.473

我建议将您的应用程序重组为：

*   `Program`- 解析参数的入口点，创建一个`Settings`实例
*   `Settings`- 应用程序设置（根据口味重命名）
*   `BusinessClass`- （绝对重命名！）接受`Settings`实例的实际工作

现在您可以单独测试：

*   测试解析成`Settings`，即你是否正确使用了解析器库
*   您的业​​务逻辑，单元测试在其中创建适当的实例`Settings`

如果可能的话，您当然应该将您的业务逻辑分成不同的类来处理不同的关注点，并分别进行测试。我们真的没有足够的知识在这里提出具体的建议。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T07:02:17.100

我不知道为什么运行 Program.Main 对您来说感觉不对。
你不应该对控制台机制进行单元测试。只有你的程序逻辑，你可以很容易地做到这一点。

# javascript - 如何从 vb.net 中的一组页面加载事件中调用特定的 javascript 函数

> ID：12104430
> 
> 赞同：1
> 
> 时间：2012-08-24T06:47:13.883
> 
> 标签：javascript, asp.net, vb.net

我有一堆javascript（在我的aspx页面中用不同的标签分隔。现在我想在页面加载时某个条件有效时调用特定的Javascript。这个脚本的执行将返回几个值作为执行的输入对于 vb.net 代码的其余部分。一旦 vb 代码执行完成，我希望执行剩余的 javascript 代码。

我试过这样：

```
If CombinedMapPointsDropDownList.Items.Count = 0 Then
            ScriptManager.RegisterClientScriptBlock(Me, Me.GetType(), "GetVals", "javascript:getCurrentPosition(pos);", True)
        End If 
```

执行此操作后，我所有的 javascript 都将被执行。

任何想法，请分享。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:53:50.433

从页面加载中删除在 vb.net 代码执行后运行的脚本。并将 vb.net 函数作为 Ajax 调用调用。然后在 Ajax 函数的成功方法上，您可以放置​​剩余的脚本。

# matlab - 需要关于莫兰过程的matlab代码片段的解释

> ID：12104431
> 
> 赞同：0
> 
> 时间：2012-08-24T06:47:15.017
> 
> 标签：matlab

我是 Matlab 的新手。我正在阅读此代码片段，但在某些部分（标有星号）我不明白它的含义，所以如果有人可以提供帮助，将不胜感激

```
function [A1nmb] = moran(initsize, popsize) 
% MORAN generates a trajectory of a Moran type process 
%  which gives the number of genes of allelic type A1 in a population 
%  of haploid individuals that can exist in either type A1 or type A2.
%  The population size is popsize and the initial number of type A1 
%  individuals os initsize. 
%  Inputs: initsize - initial number of A1 genes
%          popsize - the total population size (preserved)

if (nargin==0)
  initsize=10;
  popsize=30;
end

A1nmb=zeros(1,popsize);
A1nmb(1)=initsize;

**lambda = inline('(x-1).*(1-(x-1)./N)', 'x', 'N');
mu = inline('(x-1).*(1-(x-1)./N)', 'x', 'N');**

x=initsize;
i=1;
while  (x>1 & x<popsize+1)
  if (lambda(x,popsize)/(lambda(x,popsize)+mu(x,popsize))>rand)
   x=x+1;
   A1nmb(i)=x;
  else
   x=x-1;
   A1nmb(i)=x;
  end;
  i=i+1;
end;
nmbsteps=length(A1nmb);
***rate = lambda(A1nmb(1:nmbsteps-1),popsize) ...
        +mu(A1nmb(1:nmbsteps-1),popsize);***  

**jumptimes=cumsum(-log(rand(1,nmbsteps-1))./rate);**
jumptimes=[0 jumptimes];

stairs(jumptimes,A1nmb);
axis([0 jumptimes(nmbsteps) 0 popsize+1]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T07:07:28.327

您标记的第一行

```
lambda = inline('(x-1).*(1-(x-1)./N)', 'x', 'N'); 
```

创建称为内联函数的东西。它相当于定义一个数学函数。例子：

```
y = inline('x^2') 
```

会让你做

```
>> y(2)
4 
```

这立即解释了您标记的第二行。

```
rate = lambda(A1nmb(1:nmbsteps-1),popsize) ...
    +mu(A1nmb(1:nmbsteps-1),popsize); 
```

将计算函数`lambda(x,N)`在`x = A1nmb(1:nmbsteps-1)`和处的值`N = popsize`。

我会马上在这里说你应该看看[匿名函数](http://www.mathworks.nl/help/techdoc/matlab_prog/f4-70115.html)，一种不同的格式用来完成与`inline`. 只是，匿名函数通常得到更好的支持，并且通常比`inline`函数快得多。

然后，对于最后一行，

```
jumptimes = cumsum(-log(rand(1,nmbsteps-1))./rate); 
```

是一个嵌套命令。`rand`将创建一个包含伪随机数的矩阵，`log`是自然对数 ( `"ln"`)，并`cumsum`创建一个新矩阵，其中新矩阵中的所有元素都是输入矩阵中元素的累积和。

`doc`您会发现这些命令`help`非常有用。尝试输入

```
doc cumsum 
```

或者

```
help inline 
```

在 Matlab 命令提示符下。使用构成上一条语句的命令再试一次。

作为一般建议：花*大量**时间**阅读*文档。确实，对于您遇到的每个新命令，请阅读它并在沙盒中使用它，直到您觉得自己理解它为止。Matlab 只有在您了解它的所有命令时才会变得强大，并且有**很多东西**要了解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T06:58:45.490

它定义了一个内联函数对象。例如这个

```
 lambda = inline('(x-1).*(1-(x-1)./N)', 'x', 'N') 
```

将 lambda 定义为具有 2 个变量的函数。当您调用`lambda(A,n)`Matlab 时，只需扩展您在第一个字符串中定义的函数。因此`lambda(A,n)`使用您在函数调用中提供的变量。`lambda(A,n)`将评估为：

```
 (A-1).*(1-(A-1)./n) 
```

它只是使用您提供的参数扩展功能。查看此链接了解更多具体细节[http://www.mathworks.co.uk/help/techdoc/ref/inline.html](http://www.mathworks.co.uk/help/techdoc/ref/inline.html)

该`cumsum`函数仅返回矩阵沿特定维度的累积和。假设我们在向量上调用 cumsum `X`，那么`i`结果中元素处的值等于`X`从索引 1 到的元素之和`i`。例如`X = [1 2 1 3]`我们会得到

```
 AA = cumsum(X); 
```

我们会有

```
 AA = [1 3 5 8] 
```

有关更多详细信息和示例，请参阅此链接[http://www.mathworks.co.uk/help/techdoc/ref/cumsum.html](http://www.mathworks.co.uk/help/techdoc/ref/cumsum.html)

# android - 在 Android 应用程序中显示台湾地图

> ID：12104437
> 
> 赞同：1
> 
> 时间：2012-08-24T06:47:40.593
> 
> 标签：android, map, android-mapview, country

在这里，我开发了一个在应用程序中显示地图的应用程序。我在我的应用程序中显示地图并且它工作正常，但我显示了我想从应用程序在地图中显示的那个国家。那么该怎么做呢？在安卓中可以吗？

请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T06:54:10.757

首先通过 LocationListener/LocationManager 跟踪你当前的位置：

```
MyLocation myLocation = new MyLocation();
private void locationClick() {
    myLocation.getLocation(this, locationResult);
} 
```

并且，通过代码缩小您的位置：

```
mapView.getController().setZoom(17); 
```

然后你可以看到提到的国家。

# ruby-on-rails - capistrano + dreamhost + deploy 失败不会创建 release/release_version 目录

> ID：12104438
> 
> 赞同：0
> 
> 时间：2012-08-24T06:47:42.147
> 
> 标签：ruby-on-rails, capistrano, dreamhost

我无法让 capistrano 将我的 rails 应用程序完全部署到我的 dreamhost VPS ..

据我所知，它在创建发布目录时停止了..

```
$ cap deploy 
```

我明白了

```
failed: "sh -c 'cd /home/gasloggr/gasloggr.com/releases/20120824064241 && bundle install --gemfile /home/gasloggr/gasloggr.com/releases/20120824064241/Gemfile --path /home/gasloggr/gasloggr.com/shared/bundle --deployment --quiet --without development test'" on gasloggr.com 
```

出于故障排除的目的，我在服务器本身上运行了引号中的内容，我收到了..

```
bash: cd: /home/gasloggr/gasloggr.com/releases/20120824064241: No such file or directory 
```

快速`ls -alh`发布目录，猜猜是什么......它是空的。

## 我的 deploy.rb 文件

```
require 'bundler/capistrano'

default_run_options[:pty] = false
ssh_options[:forward_agent] = true

set :use_sudo, false
set :user, "gasloggr"

set :application, "gasloggr.com"
set :repository,  "git@github.com:gorelative/GasLoggr.git"
set :scm, :git
set :branch, 'master'
set :git_shallow_clone, 1
set :deploy_via, :copy
set :copy_compression, :bz2
set :rails_env, 'production'
set :deploy_to, "/home/gasloggr/#{application}"

role :web, "#{application}"                          # Your HTTP server, Apache/etc
role :app, "#{application}"                          # This may be the same as your `Web` server
role :db,  "#{application}", :primary => true # This is where Rails migrations will run
# role :db,  "your slave db-server here"

namespace :deploy do
  task :start do ; end
  task :stop do ; end
  task :restart, :roles => :app, :except => { :no_release => true } do
    run "#{try_sudo} touch #{File.join(current_path,'tmp','restart.txt')}"
  end
end

namespace :deploy do
  task :start do ; end
  task :stop do ; end
  task :restart, :roles => :app, :except => { :no_release => true } do
    run "#{try_sudo} touch #{File.join(current_path,'tmp','restart.txt')}"
  end
end 
```

我已经尝试删除`:deploy_via`以及以下所有内容：

```
set :deploy_via, :remote_cache
set :deploy_via, :copy 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T18:31:22.290

请按照此处列出的方法重试：[http ://wiki.dreamhost.com/Capistrano](http://wiki.dreamhost.com/Capistrano)

这个特定部分可能是最有帮助的，提到 cap deploy:setup ：[http ://wiki.dreamhost.com/Capistrano#Deployment_with_Capistrano](http://wiki.dreamhost.com/Capistrano#Deployment_with_Capistrano)

# jquery - jquery附加问题与多元素条件函数

> ID：12104443
> 
> 赞同：0
> 
> 时间：2012-08-24T06:47:54.993
> 
> 标签：jquery

我正在映射一个对象，并从对象中附加元素，而我映射元素时，我正在检查对象值并适当地附加元素。我相信在我的函数中一切都是正确的，但最后一个“if”条件只附加元素，其余条件不附加任何东西......对此有什么解决方法？

```
var processModules = function (mData) {
    $.map(mData, function (val,i) {
        $(val.container).append(
            $(val.type === 'content' || val.type === 'navigation' ?
            $('<div />',{
                'class':val.attributes['class'],
                id:val.attributes.id})
            .append(val.title ? $('<h2 />',{text:val.title}) : "")
            .append(val.subtitle ? $('<h3>',{text:val.subtitle}) : "")
            :
            val.type === 'form' ? $('<form />',{
                id:val.attributes.id,
                'class':val.attributes['class'],
                action:val.action,
                name:val.name
            })
            .append($('<legend />',{text:val.title}))
            .append(
                $.map(val.fields, function (val,i) {
                    var element;
                    if (val.label) {
                        element = $('<label />',{text:val.label}); // it is not appending
                    }
                    if (val.type) {
                        element = $('<input />',{id:val.id}) // only this is appending, if i place anything after this, only the last condition appends.. any what is the issue? pls check my json tree in the jsfiddle.
                    }
                    return element;
                } )
            )
            : ""));
    } )
} 
```

[jsfiddle 这里是 json](http://jsfiddle.net/EFFNr/)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:02:27.870

制作一个元素数组。将您的元素推入该数组并在追加中返回该数组。

改变这个

```
$.map(val.fields, function (val,i) {
    var element;
    if (val.label) {
        element = $('<label />',{text:val.label}); 
    }
    if (val.type) {
        element = $('<input />',{id:val.id}) 
    }
    return element;
} ) 
```

到

```
$.map(val.fields, function (val,i) {
   var elements = [];
    var element;
    if (val.label) {
        element = $('<label />',{text:val.label}); 
        elements.push(element); 
    }
    if (val.type) {
        element = $('<input />',{id:val.id}) 
        elements.push(element);
    }
    return elements;
} ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T06:59:31.787

看起来您正在覆盖每个 if 条件中的*元素*。这就是为什么只有最后一个条件才重要。

# javascript - 对 RequireJS 依赖感到困惑

> ID：12104448
> 
> 赞同：5
> 
> 时间：2012-08-24T06:48:15.320
> 
> 标签：javascript, dependencies, requirejs

我试图围绕 requirejs 中的依赖项。

1.  如果我已经使用 声明了文件的依赖关系`shim`，是否需要在该文件中定义模块时重新声明它？
2.  如果我`require`用来加载诸如骨干之类的依赖项，当我定义一个作为其一部分加载的模块时，是否需要重新声明它`require`？

到目前为止，这是我的代码：

```
require.config({
    //alias
    paths: {
        Backbone: 'libs/backbone-min',
        Config: 'config',
        Dom: 'dom',
        App: 'app'
    },

    //dependencies
    shim: {
        'Backbone': ['libs/underscore-min'],
        'Dom': ['libs/sizzle']
    }
});

//used to load and use stuff
require(['Config','Dom','App','Backbone'], function(){

}); 
```

那么`dom.js`我可以定义一个使用`define(function(){...});`并开始使用 Sizzle 的模块吗？还是我还需要像这样定义它`define(['libs/sizzle'], function(){...});`

另外，如果我在 app.js 中定义了一个模块，我还需要在 .js 中加载主干吗`define`，因为我已经将它作为`require()`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:34:10.580

> 1) 如果我已经使用 shim 声明了文件的依赖项，在该文件中定义模块时是否需要重新声明它？

对于每个模块，您需要定义它的一组依赖项。

> 2）如果我使用require来加载依赖项，例如主干，当我定义一个作为require的一部分加载的模块时，是否需要重新声明它？

如果你想在任意模块中使用主干作为依赖项，你可以写

```
define(['backbone'], function(Backbone) { .. } 
```

# object - Extjs 树无法加载嵌套对象

> ID：12104449
> 
> 赞同：1
> 
> 时间：2012-08-24T06:48:21.127
> 
> 标签：object, extjs, tree, nested

我在java中有一个名为Zone1s的类，它有2个字段文本（区域名称）和Zone1s列表。当我将其转换为 json 时，我得到以下响应：

```
{"text":"Papa","Zone1s":[{"text":"Beta1","Zone1s":[{"text":"BetaBeta1","Zone1s":[]},{"text":"BetaBeta2","Zone1s":[]}]},{"text":"Beta2","Zone1s":[]}]} 
```

我在下面写了一个 Extjs 模型、存储和面板：

```
Ext.define('Zone1s', {
    extend: 'Ext.data.Model',
    fields: [

        { name: 'text', type: 'string' } 
    ], 

    proxy: {                       
        type: 'ajax',
        url : 'test.htm',
        reader: {
    type  : 'json',
      record: 'Zone1s'
        }
    },
hasMany: {model: 'Zone1s', name: 'Zone1s'},
belongsTo: 'Zone1s'
});

var store =Ext.create('Ext.data.Store', {
    model: 'Zone1s',
    autoLoad: true
});

Ext.create('Ext.tree.Panel', {
    title: 'Simple Tree',
    width: 200,
    height: 150,
    store: store,

    renderTo: Ext.getBody()
}); 
```

我收到以下错误： **me.store.getRootNode 不是函数...** 谁能指导我哪里错了？我已经完成了 [如何将嵌套数据显示到树中？](https://stackoverflow.com/questions/7632363/extjs-4-how-do-i-show-nested-data-into-a-tree) 但在这里，我的 Zone1 本身可以有 Zone1，这就是区别。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-29T15:34:33.343

您应该向您的 Store 添加一个 root 属性：

```
var store =Ext.create('Ext.data.Store', {
    model: 'Zone1s',
    autoLoad: true,
    root: {
      text: 'Zone1s',
      id: 'Zone1s',
      expanded: true
   }
}); 
```

如果您不想看到根节点，请使用*rootVisible*属性：

```
Ext.create('Ext.tree.Panel', {
        title: 'Simple Tree',
        width: 200,
        height: 150,
        store: store,
        rootVisible : false,
        renderTo: Ext.getBody()
    }); 
```

# javascript - html div在z-index较高的图像上重叠时没有得到鼠标点击

> ID：12104451
> 
> 赞同：1
> 
> 时间：2012-08-24T06:48:33.790
> 
> 标签：javascript, html

请帮帮我，当我在“图像”上方的空间“div”中重叠时，我没有收到带有 IE8+ 的 onclick 事件（或大多数鼠标事件）。我的 html 看起来像：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
 <html>
 <head>
 <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
  <title>div home</title>

 <script type="text/javascript" >

function doRaise()
{
alert("hiii")   
}

</script>

</head>

<body>
    <div id="dragMe" onclick="doRaise()" style="position:absolute ;width: 50px; height:       50px;z-index: 100;border: solid red 2px"></div>
    <div>
    <img src="snap2.jpg" alt="no" />
    </div>
    welcome!!
</body>
</html> 
```

但同样适用于 Mozilla Firefox 12+ 和 Google Chrome 最新版本。

请任何帮助都会很棒。提前致谢。普拉萨德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:17:29.963

另一个IE问题。尝试将任何背景添加到 div（图像或颜色）。

如果你想要一个透明的背景，你可以使用它：

```
background-color:rgba(0, 0, 0, 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T07:19:30.907

为“div”设置背景。试试这个 CSS

`#dragMe{ position:absolute ;width: 50px; height: 50px;z-index: 100;border: solid red 2px; background: rgb(255, 255, 255); /* default color if rgba not supported*/ background: rgba(255, 255, 255, 0.01); padding: 4px; padding: 4px; }`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T06:35:48.543

最后我做出如下： 感谢帮助的朋友，感谢所有div home

```
 <script type="text/javascript" >

    function doRaise()
    {
         alert("hiii")   
    }

    </script> 
```

```
<body>
    <div id="dragMe" onclick="doRaise()" 
style="position:absolute ;width: 50px; height:50px;z-index: 100;
        border: solid red 2px;
        background: transparent url(whatever.png)"></div>
    <div>
    <img src="snap2.jpg" alt="no" />
    </div>
        welcome!!
</body> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T07:16:33.953

我通过小提琴做到了这一点。请检查，希望这对您的要求有所帮助..

[我的小提琴](http://jsfiddle.net/AAuAc/1/)

# asp.net-mvc - ASP MVC3如何添加系统当前日期？

> ID：12104458
> 
> 赞同：-1
> 
> 时间：2012-08-24T06:49:23.163
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我有这样的形式

```
@using (Html.BeginForm()) {

    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Course</legend>

        @Html.HiddenFor(model => model.CId)

        <div class="editor-label">
            @Html.LabelFor(model => model.CName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.CName)
            @Html.ValidationMessageFor(model => model.CName)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Cteator)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Cteator)
            @Html.ValidationMessageFor(model => model.Cteator)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.date)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.date)
            @Html.ValidationMessageFor(model => model.date)
        </div>

        <p>
            <input type="submit" value="Save" />
        </p>
    </fieldset>
} 
```

我想在日期字段的字段中插入系统当前日期和时间。我怎样才能做到这一点。模型和控制器已经通过脚手架创建。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T06:52:47.143

在调用编辑器之前插入它（假设您的属性是 a `DateTime`）

```
@{ Model.date = DateTime.Now; } 
```

如果您的属性是字符串，请调用`DateTime.Now.ToString()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T06:54:17.727

您可以在相应的控制器操作中设置默认值：

```
public ActionResult Index() {
    return View(new SomeModel { date = DateTime.Now });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T06:54:51.710

如下所述更改您的代码

```
@{ Model.date = DateTime.Now.ToString(); }
@Html.ValidationSummary(true)
<fieldset>
    <legend>Course</legend>

    @Html.HiddenFor(model => model.CId)

    <div class="editor-label">
        @Html.LabelFor(model => model.CName)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.CName)
        @Html.ValidationMessageFor(model => model.CName)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Cteator)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Cteator)
        @Html.ValidationMessageFor(model => model.Cteator)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.date)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.date)
        @Html.ValidationMessageFor(model => model.date)
    </div>

    <p>
        <input type="submit" value="Save" />
    </p>
</fieldset> 
```

# sharepoint - 该文件已因 sharepoint 中的错误而被修改

> ID：12104459
> 
> 赞同：0
> 
> 时间：2012-08-24T06:49:31.547
> 
> 标签：sharepoint, sharepoint-2010

当我尝试更新共享点文档库中的项目名称时，出现以下错误。该项目是文档集类型，其默认值是使用 javascript 加载的。在 Item added 事件中，我们使用新更改的项目的名称值进行更新。但是在 item.update() 代码语句中，我收到了以下错误。

文件 CZY14389 在当前日期已被域\用户名修改。

请提供您对解决此问题的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T15:14:57.903

您不能像这样更改共享点文档的名称。你需要“移动它”。

```
Item.Update();
Item.File.MoveTo(Item.ParentList.RootFolder.Url + "/" + newFileName, false);
Item.File.Item["FileRef"] = newFileName;
Item.File.Update(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T10:32:41.737

这有时会发生在事件处理程序中。问题是事件处理程序中的更新过程与工作流不同。在用于更新的事件处理程序中，您必须使用以下步骤。不要在工作流程中使用 Item.Update()。

按照步骤：

• 在您的代码之前调用和禁用事件触发：base.EventFiringEnabled = false；

•通过调用 item.systemUpdate(false) 更新您的项目；

•启用事件触发：base.EventFiringEnabled = true；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T23:38:22.360

在您更新项目名称并调用 item.update() 之前，您可以尝试像这样刷新您的项目：

```
 item = item.ParentList.GetItemById(item.ID);
 item.name = "xyz";
 item.update(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-26T06:10:50.703

禁用事件触发并调用您的更新代码，不要忘记启用事件触发。

```
 HandleEventFiring handleEventFiring = new HandleEventFiring();  
        handleEventFiring.DisableHandleEventFiring();     
     try  
            {  
                item.Update(); 
//if item.Update  doesnt work then use(For me item.update worked only on my local not on prod then i used the below)  
//item.SystemUpdate(false)
            }  
            finally  
            {  
                handleEventFiring.EnableHandleEventFiring();  
            }

 public class HandleEventFiring : SPItemEventReceiver  
    {  

        public void DisableHandleEventFiring()  
        {  
            //obsolete  
            //this.DisableEventFiring();  
            this.EventFiringEnabled = false;  
        }  

        public void EnableHandleEventFiring()  
        {  
            //obsotete  
            //this.EnableEventFiring();  
            this.EventFiringEnabled = true;  
        }  
    } 
```

# java - Java Swing：改变jprogressbar的颜色

> ID：12104462
> 
> 赞同：-3
> 
> 时间：2012-08-24T06:50:01.653
> 
> 标签：java, swing

> **可能重复：**
> [java中漂亮的进度条](https://stackoverflow.com/questions/8884297/nice-looking-progress-bar-in-java)
> [使用进度条](https://stackoverflow.com/questions/12088424/working-with-progressbar)

如何使用netbeans更改swing中jprogressbar的颜色，默认情况下它采用橙色，我使用setbackground但没有更改，请告诉我任何简单的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T06:58:45.620

我假设当您在其中实现代码时，`NetBeans`您正在使用.[`Nimbus`](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/nimbus.html) `look-and-feel`

最好通过这些链接了解如何自定义此 LnF 的默认值

*   [Nimbus：更改颜色主题](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/color.html)
*   [Nimbus：默认值](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/_nimbusDefaults.html#primary)

以下几篇 SO 文章也可能对您有用：

*   [使用 nimbus 更改 JProgressBar 的颜色？](https://stackoverflow.com/questions/7174420/change-colors-for-jprogressbar-with-nimbus)
*   [Nimbus L&F - 更改进度条的背景颜色](https://stackoverflow.com/questions/11802887/nimbus-lf-change-background-color-of-progress-bar)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T06:54:55.693

这是一个很好的测试来查看 JProgressBar 颜色是什么：

```
 JFrame frame = new JFrame("ProgressBar test");
    frame.setSize(300, 300);
    frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
    JPanel panel = new JPanel();
    frame.add(panel);

    JProgressBar pb = new JProgressBar(50, 100);
    pb.setMinimum(0);
    pb.setMaximum(100);
    pb.setValue(75);
    pb.setForeground(Color.orange);
    pb.setBackground(Color.green);
    panel.add(pb);

    frame.setVisible(true); 
```

从中可以看出，setForeground 会设置当前进度的颜色，setBackground 会设置剩余进度的颜色

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T06:55:10.107

您正在寻找的方法是[`setForeground(Color)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#setForeground%28java.awt.Color%29)

# jquery - jquery中的.on方法

> ID：12104464
> 
> 赞同：-5
> 
> 时间：2012-08-24T06:50:06.757
> 
> 标签：jquery, html

我`.on`在 jquery 中使用方法而不是`.live`.

```
$(function(){

$('.mydiv').live('click', function(){ //my code})

})

$(function(){

$('.mydiv').on('click','/*selector*/', function(){ //my code})

}) 
```

我想知道在`.on`函数中放入选择器的内容。我想在“mydiv”上应用功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:52:24.473

从 jquery 文档：`selector: A selector string to filter the descendants of the selected elements that trigger the event. If the selector is null or omitted, the event is always triggered when it reaches the selected element.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T06:52:54.963

尝试

```
$(function(){    
    $(document).on('click','.mydiv', function(){ 
      //your code
     })    
}) 
```

[`Reference`](http://api.jquery.com/on/)

[`blog of explanation`](http://www.andismith.com/blog/2011/11/on-and-off/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T06:54:03.990

```
$(function(){
    $(document).on('click','.mydiv', function(){ //my code});
}); 
```

当委派事件时，您监听绑定时存在的元素的任何点击，因为事件处理程序只能附加到绑定时实际存在于 DOM 中的元素，这将是上面语句中的第一个元素，然后它检查目标（被单击的那个）元素是否与您真正正在侦听的元素匹配，即上述语句中的第二个元素。 `document`总是存在的，但使用更接近实际元素的元素会更好。

它监听对文档的任何点击，这是整个页面，因为所有元素都在文档中，然后检查点击是否来自语句中的第二个元素，如果是，它会触发函数。显然，您越接近实际元素，触发点击功能并被过滤掉的元素就越少。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T06:56:29.407

```
.on( events [, selector] [, data], handler(eventObject) ) 
```

**events**一种或多种以空格分隔的事件类型和可选的命名空间，例如“click”或“keydown.myPlugin”。 **selector**一个选择器字符串，用于过滤触发事件的选定元素的后代。如果选择器为 null 或省略，则始终在到达所选元素时触发事件。 **data**触发事件时要传递给 event.data 中的处理程序的数据。 **handler** (eventObject) 事件触发时执行的函数。值 false 也可以作为简单返回 false 的函数的简写；

```
$("#dataTable tbody tr").on("click", function(event){
    alert($(this).text());
});

$("#dataTable tbody").on("click", "tr", function(event){
    alert($(this).text());
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T06:56:46.483

作为起点，请始终查看[此功能](http://api.jquery.com/on/)的 Jquery API 。

一个可能的用途：

```
$('.parent').on('click','.child', function(){
//code
}) 
```

这个[视频](https://tutsplus.com/lesson/events-101/?WT.mc_id=learnjquery)可能会给你一个很好的概述

# cocoa - 以编程方式更改系统设置或链接到它们？

> ID：12104468
> 
> 赞同：1
> 
> 时间：2012-08-24T06:50:29.793
> 
> 标签：cocoa, notifications, settings

我希望用户能够直接从我的应用程序更改通知中心系统设置，而无需转到系统偏好设置应用程序。我不知道这是否可以完成，所以我愿意让他们单击一个直接链接到系统设置的通知窗格的按钮。这样他们就可以从我的本地首选项窗口中切换一些首选项，只需单击一个按钮即可快速更改 SS 通知中的任何内容并完成它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T06:53:26.793

首选项窗格是独立的可执行文件。当你想打开一个特定的，只需启动它：

```
[[NSWorkspace sharedWorkspace] 
    openFile:@"/System/Library/PreferencePanes/Notifications.prefPane"]; 
```

显然，您可能想检查文件是否存在，这在旧的 OS X 版本上可能不是这样。

# xml - ForeignKeyConstraint 不起作用

> ID：12104469
> 
> 赞同：0
> 
> 时间：2012-08-24T06:50:30.267
> 
> 标签：xml, dataset

在我的代码中，我尝试`foreignkeyconstraint`了，但它不起作用（即当我删除与另一个表相关的行时它不会引发错误）。

请让我知道以下代码有什么问题：

```
try
        {
            int salesid = 2;

            DataSet ds1 = new DataSet();

            DataSet fakeDS = new DataSet();
            DataTable dt = null;
            fakeDS.ReadXml(@"product.xml");

            dt = fakeDS.Tables[0].Copy();
            dt.TableName = "product";
            ds1.Tables.Add(dt);

            DataSet fakeDS2 = new DataSet();
            DataTable dt2 = null;

            fakeDS2.ReadXml(@"sales.xml");

            dt2 = fakeDS2.Tables[0].Copy();
            dt2.TableName = "sales";
            ds1.Tables.Add(dt2);

            DataColumn dcParent, dcChild;

            dcChild = ds1.Tables["sales"].Columns["productid"];
            dcParent = ds1.Tables["product"].Columns["id"];

            ForeignKeyConstraint FKC = new ForeignKeyConstraint("foreignkeys", ds1.Tables["product"].Columns["id"], ds1.Tables["sales"].Columns["productid"]);
            FKC.DeleteRule = Rule.None;
            ds1.Tables[1].Constraints.Add(FKC);
            ds1.Tables[1].AcceptChanges();
            ds1.AcceptChanges();

            for (int i = 0; i < ds1.Tables[1].Rows.Count; i++)
            {
                if (ds1.Tables[1].Rows[i]["salesid"].Equals(salesid.ToString()))
                //if (ds1.Rows[i]["productid"].Equals(salesid.ToString()))
                {
                    //dt2.Rows[i].Delete();

                    ds1.Tables[1].Rows[i].Delete();
                }
            }
        }
        catch (Exception ex1)
        {
            MessageBox.Show(ex1.Message.ToString());
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:33:36.560

如果您在表之间添加 ForeignKeyConstraint，这意味着您不能从父表中删除数据如果子表存在此代码，如果您像这样删除

```
for (int i = 0; i < ds1.Tables[1].Rows.Count; i++)
                {
                    if (ds1.Tables[0].Rows[i]["productid"].Equals(salesid.ToString()))
                    //if (ds1.Rows[i]["productid"].Equals(salesid.ToString()))
                    {
                        //dt2.Rows[i].Delete();

                        ds1.Tables[0].Rows[i].Delete();
                    }
                }
                ds1.AcceptChanges(); 
```

它向您展示了一个例外

```
"Cannot delete this row because constraints are enforced on relation foreignkeys, and deleting this row will strand child rows." 
```

因此，在这种情况下，**首先**要从子表中删除数据，然后**您**必须从父表中删除数据，

但是，如果您从子表中删除数据，则它是不可能的，然后它会自动从父表中删除数据。

# c++ - 错误：“track_t”未在此范围内声明

> ID：12104470
> 
> 赞同：1
> 
> 时间：2012-08-24T06:50:31.290
> 
> 标签：c++, arduino

我正在摆弄一个 Arduino 项目，我的主文件中有这些结构：

```
struct gpsCoord_t {
  long latitude;
  long longitude; 
};

struct track_t {
  char code[4];
  gpsCoord_t bounds[4];
  gpsCoord_t points[4];
}; 
```

接下来我有一个函数可以将这种类型的变量转储到同一个文件中的串行总线：

```
void dumpTrack(track_t track) {
  Serial.print("\nTrack: ");
  Serial.print(track.code);
  Serial.print("\nTrack bounds: ");
  Serial.print("\n- 1 lat: ");
  Serial.print(track.bounds[0].latitude);
  Serial.print("\n- 1 lon: ");
  Serial.print(track.bounds[0].longitude);
} 
```

编译器产生 2 个没有行号的错误，我认为第一个错误是由第二个错误引起的：

```
error: variable or field 'dumpTrack' declared void
error: 'track_t' was not declared in this scope 
```

编辑这里的完整文件：

```
#include <Wire.h> //I2C library
#include <I2C_eeprom.h>
#include <SoftwareSerial.h>
#include <TinyGPS.h>

I2C_eeprom ee(0x50);

const int baseTrackAddress = 3;
const int trackSize = 68;
const int maxTracks = 480;

int powerOnLED = 2;
int gpsFixLED = 3;
int trackFoundLED = 4;
int errorLED = 6;
int gpsSensor = 7;

TinyGPS gps;
SoftwareSerial nss(gpsSensor, 255);

int calcTrackAddress(int trackId) {
  return (trackId*trackSize) + baseTrackAddress;
}

struct gpsCoord_t {
  long latitude;
  long longitude; 
};

struct track_t {
  char code[4];
  gpsCoord_t bounds[4];
  gpsCoord_t points[4];
};

track_t tracks[maxTracks];

void setup() 
{
  Serial.begin(115200);
  Serial.flush();
  Serial.print("Demo I2C eeprom library ");
  Serial.print(I2C_EEPROM_VERSION);
  Serial.println("\n");

  strcpy(tracks[0].code, "X11");
  tracks[0].bounds[0].latitude = 0;
  tracks[0].bounds[0].longitude = 0;

  tracks[0].points[0].latitude = 0;
  tracks[0].points[0].longitude = 0;

  ee.writeBlock(3, (uint8_t*)&tracks[0], trackSize);
}

void loop() 
{
  Serial.println("\nTEST: 64 byte page boundary writeBlock");
  dumpEEPROM(0, 255);
  while(1);
}

void dumpTrack(track_t track) {
  Serial.print("\nTrack: ");
  Serial.print(track.code);
  Serial.print("\nTrack bounds: ");
  Serial.print("\n- 1 lat: ");
  Serial.print(track.bounds[0].latitude);
  Serial.print("\n- 1 lon: ");
  Serial.print(track.bounds[0].longitude);
}

void readTrack(int trackId) {
  track_t track;
  ee.readBlock(60, (uint8_t*)&track, 10);
}

void readTracks() {

}

void dumpEEPROM(unsigned int addr, unsigned int length)
{
  // block to 10
  addr = addr / 10 * 10;
  length = (length + 9)/10 * 10;

  byte b = ee.readByte(addr); 
  for (int i = 0; i < length; i++) 
  {
    if (addr % 10 == 0)
    {
      Serial.println();
      Serial.print(addr);
      Serial.print(":\t");
    }
    Serial.print(b);
    b = ee.readByte(++addr); 
    Serial.print("  ");
  }
  Serial.println();
}

void ProcessCommand(char* command) {
  //switch(*command==) 
}

char* ReadSerialCommand() {
  int i=0;
  char commandbuffer[100];

  if(Serial.available()){
     delay(100);
     while( Serial.available() && i< 99) {
        commandbuffer[i++] = Serial.read();
     }
     commandbuffer[i++]='\0';
  }

  if(i>0)
    return (char*)commandbuffer; 
  else
    return 0L;
} 
```

当我将整个 dumpTrack 函数放在注释中时，错误就消失了。我检查了几次是否有错字，但没有找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T06:53:34.677

看来您正在将此代码编译为 C。

代替

```
struct track_t {
  char code[4];
  gpsCoord_t bounds[4];
  gpsCoord_t points[4];
}; 
```

写

```
typedef struct {
  char code[4];
  gpsCoord_t bounds[4];
  gpsCoord_t points[4];
} track_t; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T07:30:40.817

我怀疑在标题的某个地方有一个名为 dumpTrack 的变量。你为什么不把函数重命名为别的东西呢？

此外，通常最好避免使用保留字作为函数名；“循环”不是函数名的好选择。

编辑：后者可能是您的问题的原因。

# php - yii：登录后如何重定向到不同的页面？

> ID：12104472
> 
> 赞同：1
> 
> 时间：2012-08-24T06:50:49.203
> 
> 标签：php, yii, yii-extensions

Q : 登录后如何重定向到不同的页面？

状态：我有自定义用户角色，我想为不同的用户重定向到不同的页面。

> 例如人力资源经理 -> 员工/索引，客户经理 -> 客户/索引。

我正在使用 yii 1.1.xx 和权限模块。yii 和权限模块是绿色的。

更新问题的信息

这是排名 tbl ![在此处输入图像描述](../Images/cdaa0e557abf435a9cf88f7826e3893a.png)

这是用户 tbl ![在此处输入图像描述](../Images/0062e9de603fcf55830b1ec146b24c20.png)

如果排名是客户经理，网站将重定向到帐户/索引。

如果等级是人力资源经理，网站将重定向到员工/索引。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T07:04:11.183

```
if(Yii::app()->user->checkAccess('hrManager',Yii::app()->user->getId())==1)
{
    $this->redirect(array("employee/index"));
} else if(Yii::app()->user->checkAccess('accountManager',Yii::app()->user->getId())==1) {
    $this->redirect(array("account/index"));
} 
```

人力资源经理和客户经理登录的相应访问规则在哪里`hrManager`以及在哪里。`accountManager`这将检查用户是否具有“人力资源经理”级别的访问权限，如果有则将其重定向到那里，然后检查用户是否具有“客户经理”级别的访问权限，如果有则将他们重定向到该页面。

显然，您可以自定义它如何适合您的应用程序，因为如果用户既没有人力资源经理或客户经理访问权限，上述代码将不会重定向到任何地方，因此您需要另一个捕手。

编辑：

该`hrManager`字符串是 rbac authitem 名称，您有表`authassignment` `authitem`并`authitemchild`为您的 rbac 设置了吗？

如果没有，您可以使用排名表稍微不同地使用此方法。您可以使用 rank_id 进行设置，但您必须加载用户模型（如果您尚未加载它），这可能不是最有效的方法。

```
$user = User::model()->findbyPk(Yii::app()->user->getId());
if($user->rank_id==3)
{
    $this->redirect(array("employee/index"));
} else if($user->rank_id==2)) {
    $this->redirect(array("account/index"));
} 
```

另一种方法是在登录后将用户排名加载到 Yii::app()->user 参数中，这样您就不必在重定向之前加载用户模型，也许您已经为此设置好了授予对页面的访问权限？

```
if(Yii::app()->user->rank_id==3)
{
    $this->redirect(array("employee/index"));
} else if(Yii::app()->user->rank_id==2)) {
    $this->redirect(array("account/index"));
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T06:52:53.843

像`$this->redirect(array("controller/admin"));`什么？

# c++ - 如何通过指定的电子邮件客户端发送消息？

> ID：12104475
> 
> 赞同：2
> 
> 时间：2012-08-24T06:51:27.030
> 
> 标签：c++, qt

我有一个应用程序，需要将格式化的消息和地址发送到电子邮件客户端（例如 Lotus Notes、Outlook 等 - 最好是前者）。然后客户端应该在没有任何干预的情况下在后台发送该消息（即没有人应该在客户端按下发送）。

我有消息，我有地址，而且我知道如何选择默认的电子邮件客户端。

如何发送预先格式化的消息和地址（我猜是一些 MAIL:TO）并让客户端自动发送消息？

该应用程序使用 C++ 和 Qt。我可能需要调用客户端的一些 API。他们会暴露这些吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T08:31:13.930

这在一定程度上取决于平台，可以通过以下两种方式之一进行处理：有一个邮件服务器进程，您连接到该进程（使用套接字）；或者，您将输出通过管道传送到邮件客户端（`mail`或`mailx` 在 Unix 下）。通过管道连接到邮件客户端通常更简单，但我不确定 Windows 机器是否有现成的可用。（你说你有一个默认的电子邮件客户端。以什么形式？如果是 URL，则需要使用套接字；如果是本地程序的名称，则需要使用管道。）

在这两种情况下，您可能都需要创建一个`streambuf`来处理输出，以便使用 `std::ostream`.

如果要在后台进行，最可靠的方法是创建一个单独的进程：将数据写入文件，然后用于`system`执行邮件客户端并在完成后删除文件（一个小批量脚本）。或者，您可以在单独的线程中执行此操作，如果您确定在发送邮件之前您的进程不会被终止。

# objective-c - 按钮事件未在 tableviewCell 中触发

> ID：12104492
> 
> 赞同：0
> 
> 时间：2012-08-24T06:53:24.293
> 
> 标签：objective-c, xcode

我在我的 nib 中添加了一个 tableviewCell，我在其中一个单元格中添加了一个 UIButton。问题是按钮的 IBAction 没有被触发。我可以点击按钮，你们可以帮忙。会很棒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:00:12.187

另一种方法...创建一个uibutton并将其添加到您需要的单元格中

inside **- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath**使用开关检查表格行

```
switch (indexPath.row) 
```

如果大小写匹配，则使用此

```
UIButton *yourButton=[UIButton buttonWithType:UIButtonTypeRoundedRect];
[yourButton addTarget:self action:@selector(your_method_to_handle_button_clicked) forControlEvents:UIControlEventTouchUpInside];
yourButton.frame=CGRectMake(<#CGFloat x#>, <#CGFloat y#>, <#CGFloat width#>, <#CGFloat height#>);

[cell addSubview:yourButton]; 
```

# javascript - 检测用户是否有意从其页面重定向

> ID：12104499
> 
> 赞同：1
> 
> 时间：2012-08-24T06:53:51.940
> 
> 标签：javascript, jquery

我如何检测用户是否有意离开当前页面并从我的网站重定向到任何页面是他们可以处理此事件的任何 javascript 函数我的页面中有超过 25 个链接

```
<script type="text/javascript">
if(//user clicks a link )
 confirm("do you want to continue ?"); 

</script> 
```

他们是否有任何javascript函数可以检查用户是否点击页面上的任何链接

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T06:56:11.693

此代码将拦截对您页面中链接的所有点击。

```
$("a").click(function() {
    // this.href will be the href of the link they clicked on
    // return false from this function if you want to abort the click on the link
}); 
```

仅供参考，除非您的页面中有非常特殊的情况，否则强迫用户确认他们确实想要转到他们刚刚点击的链接是令人讨厌的。如果您必须确认每次点击，您能想象网络浏览器会有多糟糕吗？

[`onbeforeunload`](https://developer.mozilla.org/en-US/docs/DOM/window.onbeforeunload)如果用户想使用事件离开你的页面，还有一种通用的方式来提示。

```
window.onbeforeunload = function(e) {
    return 'Are you sure you want to leave?';
}; 
```

注意：这也是令人讨厌的，除非有非常特殊的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T06:58:18.383

```
window.onbeforeunload = function(e) {
    return 'Are you sure you want to leave?';
}; 
```

请记住，这不是一个正常的事件 - 您不能以标准方式绑定到它。

检查值？这取决于您的验证框架。

在 jQuery 中，这可能类似于（非常基本的示例）：

```
$('input').change(function() {
    if( $(this).val() != "" )
        window.onbeforeunload = function(e) {
            return 'Are you sure you want to leave?';
        };
}); 
```

# android - 选定的微调器值通过 android 中的 soap webservice 在 mysql db 中更新

> ID：12104500
> 
> 赞同：1
> 
> 时间：2012-08-24T06:53:55.863
> 
> 标签：android, mysql, web-services, android-spinner, insert-update

嗨，我通过调用soap webservice获得了将选定微调器项目插入mysql数据库的解决方案。感谢您提供好主意。但我无法开发更新微调器值保存在mysql数据库中。请参考我的代码：[android代码](http://pastie.org/4578986)

[网络服务代码](http://pastie.org/4578991) ...以上两个链接都用于为android和网络服务插入代码...请帮助我...更新微调器值的更改在mysql数据库中也发生了更改...。

```
 public class update {

 public String insertData(String status,String username){

  try{

   Class.forName("com.mysql.jdbc.Driver");
   Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/androidlogin","root","");
   PreparedStatement statement =  con.prepareStatement("UPDATE `user` set `status` = 'C'  where `status` = 'Q'");
   int result = statement.executeUpdate();
  }

   catch(Exception exc){
    System.out.println(exc.getMessage());
    }

  return "Updation successfull!!";
  }

} 
```

请帮助我如何为此更新功能编写android代码...

# python - 为 OAuth 令牌生成加密安全字符串

> ID：12104506
> 
> 赞同：2
> 
> 时间：2012-08-24T06:54:21.273
> 
> 标签：python, oauth, cryptography

我想生成随机字符串的令牌和密钥。生成它们的可接受方法是什么？

通过标准库函数生成两个 UUID 并将它们连接起来是否可以接受？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T07:34:00.080

[os.urandom](http://docs.python.org/library/os.html#os.urandom)提供对操作系统随机数生成器的访问

编辑：如果您使用的是 linux 并且非常关心安全性，您应该直接使用*/dev/random/*。此调用将阻塞，直到有足够的[熵](http://en.wikipedia.org/wiki/Entropy_%28computing%29#Entropy_in_the_Linux_kernel)可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T09:43:41.113

计算机（没有特殊硬件）只能生成[*伪*随机数据](http://en.wikipedia.org/wiki/Pseudo-random_number_generator)。一段时间后，所有伪随机数生成器将开始重复自己。它在重复之前可以生成的数据量称为*周期*。

[Mersenne Twister](http://en.wikipedia.org/wiki/Mersenne_twister)是一个非常流行的伪随机数（也在 Python`random`模块中使用）生成器。但它被认为不适合加密目的，因为在仅观察相对少量的迭代后预测下一次迭代相当容易。

请参阅有关[加密安全伪随机数生成器](http://en.wikipedia.org/wiki/Cryptographically_secure_pseudorandom_number_generator)的 Wikipedia 页面，以获取似乎合适的算法列表。

FreeBSD、OpenBSD 和 OS X 等操作系统在其设备上使用[Yarrow](http://en.wikipedia.org/wiki/Yarrow_algorithm)算法。`urandom`所以在那些系统上使用`os.urandom`可能没问题，因为它被认为是加密安全的。

当然你需要使用什么很大程度上取决于你的要求有多高；您希望它有多安全？一般来说，我建议您使用已发布和测试的算法实现。编写自己的实现很容易出错。

**编辑：**计算机可以通过观察例如中断到达的时间来*收集随机数据。*然而，这并不能提供大量的随机数据，因此它经常被用来作为 PRNG 的种子。

# c# - DataTemplateSelector / 绑定不起作用

> ID：12104508
> 
> 赞同：0
> 
> 时间：2012-08-24T06:54:35.000
> 
> 标签：c#, wpf, binding, datatemplate, datatemplateselector

这是我的视图模型：

```
class MainViewModel : ViewModelBase
{
    private CalculatorViewModel calc;
    public CalculatorViewModel Calculator {get {return calc; }set {calc = value; RaisePropertyChanged("Calculator");}}
}

class CalculatorViewModel : ViewModelBase
{
    private CalculatorMode mode;
    public CalculatorMode Mode {get {return mode;}set{mode=value; RaisePropertyChanged("CalculatorMode");}}

    public CalculatorViewModel()
    {
        Mode = new HexMode();
    }
}
abstract class CalculatorMode : ViewModelBase
{
    abstract int Calculate(...);
}
class HexMode : CalculatorMode
{
public int Calculate(...) { ...}
} 
```

这是我的 MainWindow（MainViewModel 实例设置为 Windows 的 DataContext）：

```
<ad:DockingManager >
            <ad:DockingManager.LayoutItemTemplateSelector>
                <vm:PanesTemplateSelector>
                    <vm:PanesTemplateSelector.FileViewTemplate>
                        <DataTemplate>
                            <h:MyDocument  />
                        </DataTemplate>
                    </vm:PanesTemplateSelector.FileViewTemplate>
                    <vm:PanesTemplateSelector.CalculatorViewTemplate>
                        <DataTemplate>
                            <w:Calculator  />
                        </DataTemplate>
                    </vm:PanesTemplateSelector.CalculatorViewTemplate>
                </vm:PanesTemplateSelector>
            </ad:DockingManager.LayoutItemTemplateSelector>
</ad:DockingManager> 
```

PanesTemplateSelector-Class 的代码：

```
public DataTemplate FileViewTemplate
        {
            get;
            set;
        }

        public DataTemplate CalculatorViewTemplate
        {
            get;
            set;
        }

        public override System.Windows.DataTemplate SelectTemplate(object item, System.Windows.DependencyObject container)
        {
            if (item is DocumentViewModel)
                return FileViewTemplate;

            if (item is CalcualtorViewModel)
                return CalculatorViewTemplate;

            return base.SelectTemplate(item, container);
        } 
```

计算器控件的内容：

```
<Grid Name="main">
    <Grid.RowDefinitions>
        <RowDefinition Height="auto" />
        <RowDefinition Height="*" />
    </Grid.RowDefinitions>
    <ContentControl Name="content">
        <ContentControl.ContentTemplateSelector>
            <vm:CalculatorTemplateSelector>
                <vm:CalculatorTemplateSelector.DefaultView>
                    <DataTemplate>
                        <TextBlock Text="Dummy for normal view" Foreground="Wheat" />
                    </DataTemplate>
                </vm:CalculatorTemplateSelector.DefaultView>
                <vm:CalculatorTemplateSelector.HexView>
                    <DataTemplate>
                        <TextBlock Text="Dummy für Hexview" Foreground="Gray"/>
                    </DataTemplate>
                </vm:CalculatorTemplateSelector.HexView>
            </vm:CalculatorTemplateSelector>
        </ContentControl.ContentTemplateSelector>
    </ContentControl>
</Grid> 
```

CalculatorTemplateSelector-Class 的代码：

```
public DataTemplate HexView
        {
            get;
            set;
        }

        public DataTemplate DefaultView
        {
            get;
            set;
        }

        public override System.Windows.DataTemplate SelectTemplate(object item, System.Windows.DependencyObject container)
        {
            CalculatorViewModel cjmv = (CalculatorViewModel)item;

            if (cjmv != null)
            {
                if (cjmv.Mode is HexMode)
                    return HexView;

        return DefaultView;
            }

            return base.SelectTemplate(item, container);
        } 
```

第一个 TemplateSelector 正在工作。选择了正确的模板，我可以看到计算器控件。但是 Calculator-Control 中的 TemplateSelector 不起作用。在 CalculatorTemplateSelector.SelectTemplate 中，项目参数始终为空。但我需要 CalculatorViewModel 实例。我想我的问题是一个绑定问题，但我没有找到解决方案。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:26:34.470

tl;博士但有一件事是肯定的：

```
public CalculatorMode Mode [...] RaisePropertyChanged("CalculatorMode");}} 
```

应该 ：`RaisePropertyChanged("Mode");}}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T08:10:01.090

我可能会问，但只是为了让您了解我的才华......我自己刚刚找到了一个解决方案：将 DataContext-Binding 添加到 ContentPresenter（而不是 ContentControl）

```
<ContentPresenter Name="content" DataContext="{Binding}"> 
```

并将 SelectTemplate-Implementation 更改为：

```
 public override System.Windows.DataTemplate SelectTemplate(object item, System.Windows.DependencyObject container)
        {
            ContentPresenter cp = container as ContentPresenter;
            if (cp != null)
            {
                CalculatorViewModel model = cp.DataContext as CalculatorViewModel;
                if (model != null)
                {
                    if (model.Mode is DefaultMode)
                        return DefaultView;
                    if (model.Mode is HexMode)
                        return HexView;
                }
            }
            return base.SelectTemplate(item, container);
        } 
```

无论如何，感谢错误 RaisePropertyChanged-Call 的通知

# mysql - SUM 和按日期分组

> ID：12104510
> 
> 赞同：0
> 
> 时间：2012-08-24T06:54:41.803
> 
> 标签：mysql, group-by, sum

我有一个看起来像这样的表：

```
ID  t_stamp         views uviews hits uhits
1   7/18/2012 19:00 105   11     0    0
5   7/18/2012 20:00 1     1      0    0
2   7/19/2012 9:00  118   4      0    0
1   7/19/2012 10:00 196   18     0    0
7   7/19/2012 11:00 2     1      0    0
2   7/19/2012 12:00 38    11     0    0
2   7/19/2012 13:00 20    5      0    0
2   7/19/2012 19:00 9     2      0    0
2   7/20/2012 15:00 85    6      0    0
1   7/20/2012 16:00 483   101    2    2
2   7/20/2012 17:00 1200  240    0    0
2   7/20/2012 18:00 1200  232    0    0
2   7/20/2012 19:00 1199  231    0    0
2   7/20/2012 20:00 1200  236    0    0
2   7/20/2012 21:00 1201  237    0    0
1   7/20/2012 22:00 1220  187    0    0
1   7/20/2012 23:00 869   165    0    0 
```

我的方法是按天将它们组合起来，这样我就可以获得最后四列中的每一列的总和。ID 并不重要。

我正在使用这个：

```
SELECT `bannerID` , DATE_FORMAT( `t_stamp` , '%m/%d/%Y' ) AS `date` ,
SUM( `views` ) AS `views` , SUM( `uviews` ) AS `uviews` , SUM( `hits` ) AS `hits` , SUM( `uhits` ) AS `uhits`
FROM test_bannerstats
WHERE DATE( t_stamp ) >= DATE( '2012-07-01' )
AND DATE( t_stamp ) <= DATE( '2012-08-24' )
GROUP BY `date`
ORDER BY `date` ASC 
```

然而，这对我来说似乎不正确，因为这些数字似乎相互矛盾。最后，我想每天统计最后四列。

编辑：

看起来是时区的问题！我会告诉你为什么...

看上面的表格，现在我们来做一整天的加法吧……

```
1   07/18/2012  106     12    0     0
1   07/19/2012  383     41    0     0
1   07/20/2012  8657    1635  2     2 
```

以上是正确的。下面是错误的。

```
1   07/18/2012  105     11    0     0
1   07/19/2012  384     42    0     0
1   07/20/2012  4167    810   2     2 
```

问题？晚上 8 点之后的任何事情都将持续到第二天。这是一个我必须解决的时区问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T06:58:31.160

试试这个，

```
SELECT  DATE_FORMAT(DATE(t_stamp), '%m/%d/%Y') AS `date`,
        SUM(views) totalViews,
        SUM(uviews) totalUViews,
        SUM(hits) totalHits,
        SUM(uhits) totalUHits,
FROM    tableName
WHERE   DATE( t_stamp ) >= DATE( '2012-07-01' ) AND 
            DATE( t_stamp ) <= DATE( '2012-08-24' )
GROUP BY DATE(t_stamp)
ORDER BY `date` ASC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T06:59:20.087

您的查询可以简化为：

```
SELECT `bannerID`,
        DATE_FORMAT( `t_stamp` , '%m/%d/%Y' ) AS `date`,
        SUM( `views` ) AS `views`,
        SUM( `uviews` ) AS `uviews`,
        SUM( `hits` ) AS `hits`,
        SUM( `uhits` ) AS `uhits`
FROM    test_bannerstats
WHERE   DATE( t_stamp ) BETWEEN '2012-07-01' AND '2012-08-24'
GROUP BY DATE(t_stamp)
ORDER BY DATE(t_stamp) ASC; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T07:06:04.123

*   如果你想让你的索引有机会被使用，尽可能避免在列上使用函数。替换条件：

    ```
    WHERE DATE( t_stamp ) >= DATE( '2012-07-01' )
      AND DATE( t_stamp ) <= DATE( '2012-08-24' )` 
    ```

    和：

    ```
    WHERE t_stamp >= DATE( '2012-07-01' )
      AND t_stamp < DATE( '2012-08-25' ) 
    ```

*   `date`您在`SELECT`列表中定义别名。这个别名不能用在`WHERE`or`GROUP BY`子句中（老实说，它可以用在 GROUP BY 子句中，但我不推荐它）。代替：

    ```
    GROUP BY `date` 
    ```

    采用：

    ```
    GROUP BY DATE(t_stamp) 
    ```

*   [`SELECT`](http://dev.mysql.com/doc/refman/5.5/en/select.html)当`GROUP BY`and`ORDER BY`在同一个表达式上完成时，有一个专有的 MySQL 语法可用（您可以在文档中阅读它）。代替：

    ```
    GROUP BY DATE(t_stamp)
    ORDER BY DATE(t_stamp) ASC; 
    ```

    您可以使用（稍微提高效率）：

    ```
    GROUP BY DATE( t_stamp ) ASC ; 
    ```

查询现在变为：

```
SELECT 
    bannerID
  , DATE_FORMAT( DATE( t_stamp ), '%m/%d/%Y' ) AS `date` 
  , SUM( views ) AS views
  , SUM( uviews ) AS uviews
  , SUM( hits ) AS hits
  , SUM( uhits ) AS uhits
FROM 
    test_bannerstats
WHERE 
    t_stamp >= DATE( '2012-07-01' )
  AND 
    t_stamp < DATE( '2012-08-25' )     --- notice the `<` and the +1 date offset
GROUP BY
    DATE( t_stamp ) ASC ; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T07:09:19.220

我认为您的 sql 查询不会真正起作用，仅适用于 7 月 1 日至 8 月 24 日的日期。如果最后 4 个日期超出该日期怎么办？它不会捡起任何东西。

在我看来，最好的方法是：

```
 SELECT SUM(column_name) FROM table_name order by id DESC limit 4; 
```

Order by ID desc 将按降序对结果进行排序。限制 4，只会获取前 4 个结果。

希望有帮助。

# git - GitHub for Windows 的“同步”有什么作用？

> ID：12104513
> 
> 赞同：89
> 
> 时间：2012-08-24T06:54:52.773
> 
> 标签：git, github-for-windows

使用 GitHub for Windows，您可以“发布”一个分支，然后将该分支“同步”到 GitHub。

![在此处输入图像描述](../Images/6f651abc10a39eae8e40181711659409.png)

同步基本上是一个`git pull`和`git push`？或者还有更多？如果我想从命令行执行与“同步”完全相同的步骤，我该怎么办？

（它不是开源的，或者我只是读过。）

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-12-21T01:14:20.873

同步`git pull --rebase`，然后如果有本地更改，它会`git push`。

从这里：[http ://haacked.com/archive/2012/05/21/introducing-github-for-windows.aspx#87318](http://haacked.com/archive/2012/05/21/introducing-github-for-windows.aspx#87318)

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2014-11-29T10:23:13.580

由于上面的答案是两年多以前的，因此对这个问题的更新答案是：由于*rebase*的一些错误，“同步”按钮`git pull --rebase`不再起作用。相反，根据此[发行说明](https://windows.github.com/release-notes.html)（请参阅 1.3.0 版），如果存在冲突，**`git pull`**它将执行**合并。**

上面的链接暂时不可用。这是[新的发行说明](https://desktop.github.com/release-notes/windows/)。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-08-24T07:05:21.110

"Sync" would be any actions necessary to have your local branch match your remote branch. If your local branch had commits that your remote branch didn't, then "sync" would push your branch. If the remote branch was ahead of your local branch, then "sync" would pull first (specifically, `git pull --rebase`, as was [explained](http://haacked.com/archive/2012/05/21/introducing-github-for-windows.aspx#87318) by Phil Haack). "Sync" is just a shortcut to getting the local and remote to mirror each other.

From the [GitHub site](http://windows.github.com/):

`The sync button turns the complex workflow of pulling and pushing into a single operation. It notifies you when there are new changes to pull down and lets you quickly share local changes.`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-10-12T19:24:35.473

要添加到@ethanyang 的[答案](https://stackoverflow.com/a/27201187/2899995)，

根据gitconfig中配置的别名，

```
[alias]
...
sync = !git pull && git push 
```

# sencha-touch - 在 Aptana 中使用 Sencha 命令

> ID：12104517
> 
> 赞同：0
> 
> 时间：2012-08-24T06:55:00.130
> 
> 标签：sencha-touch, aptana, sencha-command

是否有直接从 Aptana IDE 使用 Sencha 命令（创建应用程序或控制器等）的现有解决方案。欢迎任何帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T10:24:01.843

不，没有现有的解决方案。但是，您无论如何都可以使用 sencha 命令创建应用程序或文件。而且这个过程非常简单。

参考指南：[煎茶命令](http://docs.sencha.com/touch/2-0/#!/guide/command)

# vba - 删除名称喜欢的工作表

> ID：12104524
> 
> 赞同：3
> 
> 时间：2012-08-24T06:55:51.107
> 
> 标签：vba, excel

如何删除工作表名称喜欢的工作表

```
Left(SheetExists.Name, 16) = "Mgt Report as at" 
```

试过：

```
Sheets(Left(SheetExists.Name, 16) = "Mgt Report as at").Delete 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-24T07:07:05.830

像这样的东西（未经测试）：

```
For Each s in ActiveWorkbook.Sheets
    If Left(s.Name, 16) = "Mgt Report as at" Then
        s.Delete
    End If
Next s 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-26T08:29:51.880

`LIKE`正如您在问题标题中提到的那样使用另一种方法。

另请注意，在这种情况下，删除工作表时必须小心。请参阅下面代码中的注释。

```
Option Explicit

Sub Sample()
    Dim ws As Worksheet

    For Each ws In ThisWorkbook.Sheets
        If ws.Name Like "Mgt Report as at" & "*" Then
            '~~> This check is required to ensure that you don't get an error
            '~~> if there is only one sheet left and it matches the delete criteria
            If ThisWorkbook.Sheets.Count = 1 Then
                MsgBox "There is only one sheet left and you cannot delete it"
            Else
                '~~> This is required to supress the dialog box which excel shows
                '~~> When you delete a sheet. Remove it if you want to see the
                '~~~> Dialog Box
                Application.DisplayAlerts = False
                ws.Delete
                Application.DisplayAlerts = True
            End If
        End If
    Next
End Sub 
```

# jquery - debian chromium 中的 jquery ajax 给出错误消息 0

> ID：12104527
> 
> 赞同：1
> 
> 时间：2012-08-24T06:56:22.310
> 
> 标签：jquery, jquery-mobile

在 ubuntu 和 chromium 浏览器上测试我的应用程序时，一切正常，但是当移动到使用 debian 和相同 chromium 浏览器的生产机器时，我总是得到一个 ajax 错误 0。

*   jQuery 版本 1.7.2
*   jQuery.mobile 版本 1.1.1
*   Tomcat服务器

要求：

```
$.ajax({
    type: 'POST',
    url: "http://localhost:8080/rest/setvalue/1234",
    dataType: "json",
    success: function(objResponse) {
        showMessage("Done");
    },
    error: errorHandler
}); 
```

尽管服务器正确处理了请求，但在生产机器上调用了 errorHandler！

感谢您的任何想法...

坦率

- - - 添加 - - -

显示代码的警报

```
function errorHandler(xhr, ajaxOptions, thrownError) {
showAlert("Error", "Error: " + xhr.status + "\n" +
       "Message: " + xhr.statusText + "\n" +
       "Response: " + xhr.responseText + "\n" + thrownError); } 
```

是：

*错误：0*

*消息：错误*

*回复：*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:37:23.920

成功函数中缺少括号。

showMessage("Done"; 应该是 showMessage("Done");

你能检查一下这是否解决了问题？

**编辑：**

我的观点是问题与代码无关。在您的情况下，AJAX 请求很可能被视为跨域请求并且同源策略失败。这就是为什么你得到错误：0。

我设法重现了这个案例（在 Windows 操作系统中），并且在以下情况下我得到了同样的错误：

1.  打开我的网页`http://localhost:7001/MobileApp/index.html`并在`http://www.example.com/MobileApp/test`.
2.  打开我的网页`http://localhost:7001/MobileApp/index.html`并在`http://127.0.0.1:7001/MobileApp/test`.
3.  打开我的网页`http://127.0.0.1:7001/MobileApp/index.html`并执行 AJAX`http://localhost:7001/MobileApp/test`
4.  打开我的网页`http://192.168.1.2:7001/MobileApp/index.html`（其中 192.168.1.2 是我的私有 IP 地址）并在`http://127.0.0.1:7001/MobileApp/test`.

上述情况被认为是跨域请求，我得到了你提到的错误。

显然，在配置了我的主机文件并将 IP 地址映射到主机名等之后，上述一些问题得到了解决，因为这些请求不被视为跨域。

总之，我建议调查同源策略是否成功。

![在此处输入图像描述](../Images/bb1e5f3ceecaeda4a60a622088592938.png)

# html - 换行文本无法正常工作

> ID：12104531
> 
> 赞同：0
> 
> 时间：2012-08-24T06:56:36.157
> 
> 标签：html, css

我有一个如下表结构：

```
<table>
<tr>
    <td>
        <div id="FirstDiv">
            <table>
                    <tr>
                            <td>
                            </td>
                    </tr>
            </table>
        </div>            
    </td>
    <td>
        <div id="SecondDiv">
        </div>
    </td>
</tr>
</table> 
```

`FirstDiv`和的结构`SecondDiv`相同。里面的`td`标签`FirstDiv`包含一些文本，我正在使用锚标签显示文本（文本是动态的，它来自后端。）但是如果文本比 150px 更宽，它会将边框推到右边。根据要求，不应该有任何水平滚动条，所以我尝试将文本包裹在锚标签内，给出类似的样式`word-wrap:normal`，但直到现在无法修复它。它要么给我一个水平滚动条，要么将边框向右推。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:16:18.940

试试这个：

```
table {table-layout:fixed}
td {width:50%} 
```

# iphone - 核心数据结构 - 避免循环引用？

> ID：12104532
> 
> 赞同：1
> 
> 时间：2012-08-24T06:56:36.517
> 
> 标签：iphone, objective-c, ios, ipad, core-data

我只是想验证我的数据结构。
对我来说似乎有点复杂，也许可以简化？

![来自核心数据模型编辑器的快照](../Images/f4c71fb223fefcb232ad97763a968271.png)

*   问题分为章节。
*   对于每个问题，每个会话只能有一个答案。
*   目的是能够比较/分析相同问题的答案（不同用户或相同用户在不同时间，即不同会话）。
*   模板是章节和问题的集合，如果章节和问题相同，则不必复制。
*   （如果 Answer 与 Session 没有关系，那将是必要的。）
*   从 Answer 到 Session 的关系是正确的策略吗？
*   为了简化模型，您还需要改进什么？

谢谢！

**编辑**

后续澄清：

*   答案不是静态的（例如“正确”答案、“解决方案”），而是用户输入的一些文本。它更像是“问卷”而不是“测验”。答案具有可以分析的定量属性。
*   如前所述，一个问题在一个会话中只能有一个答案。因为问题可以间接属于多个会话（通过`(NSSet*) question.chapter.template.sessions`），所以它们可能有多个答案，因此需要一对多关系。
*   典型场景：用户使用某个模板开始一个新会话并填写答案。然后他可以查看结果分析并将其与使用相同模板的其他会话的结果进行比较。

**编辑 2**

数据模型的快照，包括属性

![数据模型的快照，包括属性](../Images/af78f6062637a554baf6bc70f498feaa.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T15:56:15.637

老实说，这是我会做的而不是你的结构，但我不知道每个实体的目的是什么，因为我无法从它们的简单名称中找出。

**这只是解决循环的一个想法**。

您仍然可以从*会话中获得所有**模板*和所有*答案*，而不是直接获得，但这不会让您的生活变得更加困难。

 *![在此处输入图像描述](../Images/9a28287d99da089716f3abda0665a528.png)

* * *

**更新：**

乍一看，对我来说，`Session`实体似乎只是这里的一个额外实体。`Template`老实说，如果您与（又名*Questionnaire*）实体连接，您将不需要它。

你必须在and之间添加一个*多对多的*关系（你可以做到，不用担心）。使用这种方式，您也可以从每个模板中获得所有答案，并且不会有任何循环。`Template``User`

![在此处输入图像描述](../Images/b9a8e3e38d72580560c75867619bee4b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T19:40:52.803

尽管@holex 做出了非常有益的努力——最好的方法似乎仍然是坚持我的设计。我所希望的简化并没有实现。*

# android - 扩展对话框在android中出错

> ID：12104537
> 
> 赞同：3
> 
> 时间：2012-08-24T06:56:52.380
> 
> 标签：android

我扩展了一个对话框

爪哇代码

```
public class Dialog_query extends Dialog implements OnClickListener {   

} 
```

通过 XML 定义一个接口 ![在此处输入图像描述](../Images/503b6673ca0b04763bb30d176e5ef538.png)

现在想通过点击日期1来选择日期代码如下记录为：代码按钮

按钮

```
Button btn=(Button)findViewById(R.id.BtnDate);           
        btn.setOnClickListener(new View.OnClickListener() {   
          public void onClick(View v) {   
            new DatePickerDialog(Dialog_query.this,   
                d2,   
                dateAndTime.get(Calendar.YEAR),   
                dateAndTime.get(Calendar.MONTH),   
                dateAndTime.get(Calendar.DAY_OF_MONTH)   
                ).show();   
          }   
        }); 
```

现在的问题是，指出“构造函数 DatePickerDialog(Dialog_query, DatePickerDialog.OnDateSetListener, int, int, int) 是未定义的”

后来发现在这里添加“Toast.makeText(LoginSuccess.this,”关于敏捷软件1.0“,Toast.LENGTH_LONG).show();”

还指出“Toast 类型中的方法 makeText(Context, CharSequence, int) 不适用于参数 (Dialog_query, String, int)”

但是“代码按钮”就在Activity中。

为什么在extend情况下会提示这样的错误呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T07:10:36.273

你是 Dialog_query 继承自对话框。但是 Dialog 类不继承自 Activity：http: [//developer.android.com/reference/android/app/Dialog.html](http://developer.android.com/reference/android/app/Dialog.html)

DatePickerDialog 的构造函数需要一个上下文或活动。输入您的活动名称而不是 Dialog_query.this

```
new DatePickerDialog(ActivityName.this,   
                d2,   
                dateAndTime.get(Calendar.YEAR),   
                dateAndTime.get(Calendar.MONTH),   
                dateAndTime.get(Calendar.DAY_OF_MONTH)   
                ).show(); 
```

# asp.net - 如何正确创建 ASP.NET Membership cookie？

> ID：12104539
> 
> 赞同：0
> 
> 时间：2012-08-24T06:56:53.570
> 
> 标签：asp.net

我正在为我的登录系统使用 Membership API，一个奇怪的事情一直困扰着我。我允许用户选择是否“记住我”，即是否创建一个有效期为一个月的持久cookie。

在 Web.config 中，我写道：

```
<authentication mode="Forms">
  <forms timeout="60"  />
</authentication> 
```

这应该是 60 分钟的默认会话 cookie。

在登录页面后面的代码中：

```
if(Membership.ValidateUser(UsernameTextBox.Text, PasswordTextBox.Text))
        {
            authCookie = FormsAuthentication.GetAuthCookie(UsernameTextBox.Text, RememberMeCheckBox.Checked);
            if(RememberMeCheckBox.Checked)
                authCookie.Expires = DateTime.Now.AddMonths(1);
            Response.Cookies.Add(authCookie);
            Response.Redirect(FormsAuthentication.GetRedirectUrl(UsernameTextBox.Text, RememberMeCheckBox.Checked));
        } 
```

然而结果很奇怪。我似乎创建了一个 60 分钟的持久 cookie！这怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T07:25:55.917

您将 cookie 过期时间设置为 1 个月，但其中包含的身份验证票证尚未修改。它从您的 Web 配置继承了 60 分钟的默认值。

您可能希望将 cookie 到期与身份验证票证到期同步，或者将 cookie 设置为具有非常长的到期日期。

你需要做的是

1.  手动创建 FormsAuthenticationTicket 实例并设置实例的 Expiration 属性。

2.  使用[FormsAuthentication.Encrypt()](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.encrypt.aspx)加密票证

3.  手动将 cookie 添加到包含票证的 Response.Cookies 集合中。（而不是使用 get/setAuthCookie()，它使用 web.config 设置）。

一些示例代码在[FormsAuthentication.Encrypt()](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.encrypt.aspx)的文档中。

# android - 在 android LatinIME 键盘中使用自定义字体

> ID：12104541
> 
> 赞同：3
> 
> 时间：2012-08-24T06:57:01.127
> 
> 标签：android, android-softkeyboard

我正在通过修改 LatinIME 键盘以使用 android 最初不附带的语言编写来开发 Android 键盘。因此，我在使用`EditText`该键盘书写时尝试在字段中使用默认 android 字体以外的字体。

请注意，我不希望更改键的字体，我希望根据我的字体更改输入文本的字体。

现在，在 EditText 字段中输入文本时，如果我可以获得该 EditText 字段的引用，则任务很简单：

```
Typeface myTypeface = Typeface.createFromAsset(getAssets(), "fonts/myFont.ttf");
referenceToEditText.setTypeface(myTypeface); 
```

但问题是如何获得对 EditText 字段（我输入文本的字段）的引用？

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:02:43.610

在你的activity的onCreate函数中，获取edittext（使用你在XML布局文件中设置的id），然后调用setTypeFace：

```
EditText myEditText = (EditText) findViewById(R.id.myEditText);
myEditText.setTypeface(Constant.APP_FONT); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-23T08:16:18.320

您是在谈论从键盘获取 Edittextfield 的输入吗？检查这个：

```
InputConnection ic = getCurrentInputConnection();

        CharSequence currentText = ic.getExtractedText(new ExtractedTextRequest(), 0).text;

        //Toast.makeText(this, currentText, Toast.LENGTH_LONG).show(); 
```

# html - 表格右对齐

> ID：12104545
> 
> 赞同：-3
> 
> 时间：2012-08-24T06:57:27.657
> 
> 标签：html, css, internet-explorer, jsp, alignment

我的问题是我使用下面的代码注册表格。它在 Firefox 和 Google Chrome 中运行良好。但是当我使用 Internet Explorer 时，整个页面都与左对齐。我已经检查了 CSS，但它没有问题。请帮我解决这个问题：

```
<!-- checking the session -->
    <% 
    try{    
    %>
    <%@ include file="checksession.jsp"%>
    <%
    }
    catch(Exception e){
    %>
    <jsp:forward page="session.jsp" />
    <%
    }
    %>

    <%@page import="cls.dateconverter"%>
    <%@include file="includePade/connection.jsp"%>

    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link href="css_inside/reset.css" rel="stylesheet" type="text/css" />
    <link href="css_inside/style.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="js/marquee.js">
    </script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js" type="text/javascript"></script> 
    <script src="script/ajax_admin.js" type="text/javascript"></script> 
    <!---------(For Combo Box)---end------->
    </head>
    <body>
    <div class="top-band">
      <div class="signinband" style="width: 100%">
      <div class="sms">
      </div><!--sms-->
        <div class="sign-in-box" Style="width:600px;text-align: right;" ><p>
    <ul>
        <li><a href="#"></a></li>
        <li><a href="#">Home</a></li>
        <li><a href="#">Contact Us</a></li>
        <li><a href="#">About Us</a></li>
        <li style="border:none;"><a href="logout.jsp">Log Out</a></li>
      </ul>
        </div><!--sign-in-box-->
      </div><!--signinband-->
    </div><!--top-band-->
    <div class="container_12 wrapper" style="margin: auto;">
    <div class="grid_12 inner">
    <div class="clear"></div>
      <div class="grid_12 inner">
        <div class="grid_12 footer-info alpha">
    <p>This is city based free classified website that help people buy,sell,rent,lease. You can post free ads and reply to ads on web or direct in the city you live in.</p></div><!--footer-info-->
        <div class="grid_12 futer alpha">
        <ul>

          <li><a href="#">Home</a></li>
          <li class="slash">|</li>
          <li><a href="#">Contact Us</a></li>
          <li class="slash">|</li>

          <li><a href="#">privacy policy</a></li>
          <li class="slash">|</li>
          <li><a href="#">Term of Use</a></li>
          <li class="slash">|</li>
          <li><a href="#">Careers</a></li>
          <li class="slash">|</li>

          <li><a href="#">Help</a></li>
          </ul>
        </div><!--futer-->
        <div class="grid_12 futer alpha" style="text-align:center">
       Copyright &#169; 2012 <a href="index.jsp">myclient.com </a>. All rights reserved  
         </div><!--futer-->
      </div><!--inner-->
      </div>
    </div><!--wrapper-->
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T09:19:08.407

尝试在第一行“检查会话”中删除该评论。一旦我在 IE7 中遇到同样的问题。希望它能解决这个问题。不确定您的情况，请尝试发布完整代码。

# javascript - 缩略图库的 XML 数据图像绑定

> ID：12104548
> 
> 赞同：1
> 
> 时间：2012-08-24T06:57:36.607
> 
> 标签：javascript, jquery, xml, xml-parsing

我正在尝试使用 XML 数据绑定创建缩略图库。但数据不具有约束力。这是我正在尝试的一个。

[http://jsfiddle.net/5wETg/](http://jsfiddle.net/5wETg/)

在这里，我想仅使用我在 HTML 中使用的一个图像标签来显示我的 XML 中的所有三张图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:20:08.693

你不能用这个吗？

```
<div id="thumbs"></div> 
```

脚本：

```
var xml = "<rss version='2.0'><channel><image>http://www.nikon.com/swf/img/thumbnail_ophthalmic_lenses.png</image><image>http://www.nikon.com/swf/img/thumbnail_ophthalmic_lenses.png</image><image>http://www.nikon.com/swf/img/thumbnail_ophthalmic_lenses.png</image>    </channel></rss>",

    xmlDoc = $.parseXML( xml ),
    $xml = $( xmlDoc ),
    $image= $xml.find( "image" );

$($image).each(function(index, element) {
    $( "<img />" ).attr('src', $(element).text()).appendTo('#thumbs');
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T07:18:08.780

您可以`<img>`为每个图像创建一个标签，我`.map()`用来创建一个包含所有图像的 jQuery 对象，然后将它们附加到`#thumbs`

```
var xml = "<rss version='2.0'>\
    <channel>\
    <image>http://www.nikon.com/swf/img/thumbnail_ophthalmic_lenses.png</image>\
    <image>http://www.nikon.com/swf/img/thumbnail_ophthalmic_lenses.png</image>\
    <image>http://www.nikon.com/swf/img/thumbnail_ophthalmic_lenses.png</image>\
    </channel>\
    </rss>",
xmlDoc = $.parseXML( xml ),
$xml = $( xmlDoc ),
$image= $xml.find( "image" );

$( "#thumbs" ).append( $image.map(function(){
        return $('<img>', {className: 'thumbnails', src:$(this).text()})[0];
    })
); 
```

[演示](http://jsfiddle.net/5wETg/21/)

[http://api.jquery.com/map/](http://api.jquery.com/map/)

# maven - 从一个组运行 TestNG 单个测试

> ID：12104552
> 
> 赞同：1
> 
> 时间：2012-08-24T06:57:56.510
> 
> 标签：maven, testng

在 testng.xml 中，我包含了几个用于分组的测试类。在测试类中，我传递了一些参数和组名：

```
@Parameters({"excelName", "excelTabName"})
@BeforeClass(alwaysRun=true)
public void setup(){/*Setup code here*/}

@Test(groups={"security"})
public void searchUser() {/*Test code here*/} 
```

如果我禁用除我想要运行的测试类名称之外的所有测试类名称，我会使用 mvn -Dgroup=groupName test 之类的 maven 命令。它会启动 testng.xml 中未注释的测试类

我想在 testng.xml 中启用所有这些测试类，并且仍然希望在需要时只运行一个测试。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:25:01.977

看起来您所需要的只是指定运行时要执行的方法

```
<test name="MyTest">
  <classes>
    <class name="TestClass">
      <methods>
        <include name="searchUser" />
      </methods>
    </class>
  </classes>
</test> 
```

这将仅加载`searchUser()`要执行的测试方法。

# blackberry - BlackBerry 未收到 Xtify 推送消息

> ID：12104556
> 
> 赞同：1
> 
> 时间：2012-08-24T06:58:16.113
> 
> 标签：blackberry, push, messages, xtify

我在 Xtify 上创建了一个帐户，用于通过 BIS 在 Blackberry 上接收推送消息。Xtify SDK 附带的示例应用程序工作正常，注册请求的响应成功（如示例应用程序屏幕所示）。最后它在屏幕上打印它正在监听传入的消息。当我从 Web 控制台发送通知时，它显示“通知已发送给黑莓用户：”。但没有收到推送消息。另请注意，我使用 BlackBerry 服务器 SDK 来接收我为另一个应用程序编写的推送消息，并且效果非常好。

由于我确信客户端应用程序可以正常工作，因此我尝试使用此服务“http://notify.xtify.com/api/1.2/pn/push”以编程方式发送推送消息。无论我在那里输入什么值，它仍然会不断给出这个错误。我也尝试了设备密码和其他键。但仍然是同样的错误。

有什么帮助吗？

# php - 宁获取所有用户信息

> ID：12104562
> 
> 赞同：0
> 
> 时间：2012-08-24T06:58:49.260
> 
> 标签：php, ning

我正在尝试获取我的 ning pro 网络的成员列表以及我的应用程序的详细信息，但我仍然无法弄清楚我应该为此做什么

我使用此代码从 ning api 获取照片

```
require_once('NingApi.php');

$ningApi = new NingApi('mychatterbook', 'xxxxx-e44f-47b5-ba0d-e99d98ba60be', 'xxxxx-436f-4ba0-9911-a2ac5b5a00bb','sunethx@gmail.com','xxxxxx');

// Get the most recent photo
$result = $ningApi->photo->fetchNRecent(); 
```

请帮助我任何人知道如何使用 php 来实现它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T08:51:12.173

我明白了，它需要使用管理员帐户登录才能获取用户信息，这将返回 2 个用户。

```
require_once('NingApi.php');

    $ningApi = new NingApi('xxxbook', 'd1216884-e44f-47b5-xxx-xxxxe', 'xxx-xx-4ba0-9911-xxxxxxx','xxxx@gmail.com','xxx');

    try {
      $result1 =  NingApi::instance()->user->fetchNRecent(2);

    } catch (Exception $e) {
      echo "Error: ".$e->getMessage()."\n".$e->getTraceAsString();
    }

        print_r($result1); 
```

# cloudbees - 如何使用 Maven 插件部署到欧盟的 CloudBees PaaS

> ID：12104563
> 
> 赞同：1
> 
> 时间：2012-08-24T06:58:55.150
> 
> 标签：cloudbees

在使用 CloudBees SDK 时，我可以使用参数“-ep eu”部署到欧盟数据中心，但是如何使用 Maven 插件来实现呢？-ep 保留用于在 Maven 中加密服务器密码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T08:30:20.887

将属性 bees.apiurl 或插件参数设置为[https://api-eu.cloudbees.com/api](https://api-eu.cloudbees.com/api)

# telnet - Telnet - 为什么我可以连接尽管缺少 telnet 服务器

> ID：12104566
> 
> 赞同：0
> 
> 时间：2012-08-24T06:59:01.223
> 
> 标签：telnet

在 Linux 上，当我从一台服务器（客户端 telnet）的 telnet 连接到另一台服务器（没有 telnet 服务器）时，我可以连接到我指定的端口（不是 telnet 23 端口的默认端口）。我得到：

连接到我的服务器（IP 地址）。
转义字符是 '^]'。

为什么虽然我没有 telnet 服务器，但我可以连接到 telnet 客户端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:05:03.997

You can telnet to any opening TCP port, because that only means a normal TCP connection initiation work has done.

And your input will be treated as raw data, what happens to the data depends on the program which opened that TCP port, normally as soon as it determined the client side is not sending correct data it will disconnect.

# php - Zend_Pdf：图像路径数组的问题

> ID：12104567
> 
> 赞同：0
> 
> 时间：2012-08-24T06:59:11.277
> 
> 标签：php, zend-framework, magento, zend-pdf, magento-1.7

我必须生成图像的 Pdf。我试过下面的代码

```
 public function getPdf($paths)
 {
   try {
  $pdf = new Zend_Pdf(); 
  for($i=0; $i<5; $i++)
   {
   $page = new Zend_Pdf_Page(Zend_Pdf_Page::SIZE_A4);
    $image = Zend_Pdf_Image::imageWithPath($paths[$i]);  
    $page->drawImage($image, 20, 20, 50, 46);
    $pdf->pages[] = $page;
   }
   $pdf->save('document.pdf');
     echo 'SUCCESS: Document saved!';
    } catch (Zend_Pdf_Exception $e) {
     die ('PDF error: ' . $e->getMessage());  
     } catch (Exception $e) {
     die ('Application error: ' . $e->getMessage());    
    }
   } 
```

请注意 $paths 是一个包含正确物理路径的数组，例如 C:/wamp/www/magento1.7/media/catalog/product/cache/1/small_image/9df78eab33525d08d6e5fb8d27136e95/p/o/portf1.jpg....现在的问题是它无法创建 Pdf 并抛出异常说“PDF 错误：无法创建图像资源。找不到文件”。任何人都可以帮助我或者简单地指出这段代码有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:19:37.783

您可能没有所需的权限。查看文件是否是[可读的](http://www.php.net/manual/en/function.is-readable.php)，如果不是，请尝试[chmod](http://php.net/manual/en/function.chmod.php)它。您还可以随时更改 Windows 上的文件权限。

Edit1：更改您的代码：

```
$numPaths = count($paths);
for($i=0; $i < $numPaths; $i++) {
.. 
```

# css - CSS 图像翻转

> ID：12104569
> 
> 赞同：2
> 
> 时间：2012-08-24T06:59:21.190
> 
> 标签：css

我有使用 css 处理图像翻转的脚本。我想知道这是否是进行 CSS 翻转的正确方法？我还想知道这是否很好你如何处理其他翻转图像你必须为每个图像有一个单独的 css 吗？

这是一个例子：http: [//jsfiddle.net/GFec3/40/](http://jsfiddle.net/GFec3/40/)

**CSS 代码：**

```
a.rollover {
   display: block;
   width: 27px;
   height: 25px;
   text-decoration: none;
   background: url("http://www.gdisinc.com/barker/images/menubar/bnt_facebook.jpg");
}

a.rollover:hover {
   background-position: -350px 0;
}

.displace {
   position: absolute;
   left: -5000px;
} 
```

**HTML**

```
 <a href="#" class="rollover" title="Webvamp" width="54" height="25"><span class="displace">TEST</span></a> 
```

这可行，但只是想知道是否有一种特殊的方法来处理一个以上的翻转图像？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T07:03:52.720

您不必在 css 中使用背景图像。例子：

```
<STYLE type="text/css">
.roll .on { display: none; }
.roll .off { display: block; }
.roll:hover .on { display: block; }
.roll:hover .off { display: none; }
</STYLE>
<DIV class="roll">
  <IMG class="on" src="...">
  <IMG class="off" src="...">
</DIV> 
```

有很多方法可以做到这一点。选择哪个取决于您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T07:05:44.530

使用[**CSS sprite**](http://css-tricks.com/css-sprites/)，这样你将只使用一张背景图片，你只需要改变不同图片悬停的背景位置

[**CSS Sprites：图像切片的死亡之吻**](http://www.alistapart.com/articles/sprites/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T07:08:14.570

您目前拥有的方法是最有效的。除其他外，它“预加载”翻转图像，因为它与非翻转图像相同，只是它的不同部分。它还将 HTTP 请求的数量减少到最低限度（`data`方案不足），并且在某些情况下实际上提高了文件大小（最好的情况是使用相似调色板的两个图像，需要一个颜色表而不是两个）。

不要改变它，它是完美的。

您必须为每个翻转定义一个单独的 CSS，但是如果图像大小相同，您可以通过重用`:hover`定义来减少损坏。

# ruby-on-rails - 如何使用最佳 SQL 找到与某些属性的关联？

> ID：12104570
> 
> 赞同：2
> 
> 时间：2012-08-24T06:59:24.110
> 
> 标签：ruby-on-rails, activerecord

假设您有两个 ActiveRecord 模型 - Problem 和 ProblemSet。

你有一个@problem_set 对象，你想检查它是否有某个标题属性的问题。

你可以说：

```
@problem_set.problems.where(:title => "Adding Numbers").any? 
```

通过运行最佳 SQL返回`true`：

```
SELECT COUNT(*) FROM "problems" INNER JOIN "problem_sets_problems" ON "problems"."id" = "problem_sets_problems"."problem_id" WHERE "problem_sets_problems"."problem_set_id" = 1 AND "problems"."title" = 'Adding Numbers' 
```

但是，如果 @problem_set 在内存中，即您通过以下方式获得 @problem_set：

```
@problem_set = ProblemSet.new()
@problem_set.problems << Problem.new(:title = "Adding Numbers") 
```

然后你将无法找到问题（即它返回错误！）。这是因为运行了以下 SQL：

```
SELECT COUNT(*) FROM "problems" INNER JOIN "problem_sets_problems" ON "problems"."id" = "problem_sets_problems"."problem_id" WHERE "problem_sets_problems"."problem_set_id" IS NULL AND "problems"."title" = 'Adding Numbers' 
```

对持久对象和内存对象进行正确检查的一种可能方法是：

```
@problem_set.problems.map(&:title).include? "Adding Numbers" 
```

在这两种情况下都正确返回`true`。但是，在持久对象的情况下，它运行非最佳 SQL（检索所有问题）：

```
SELECT "problems".* FROM "problems" INNER JOIN "problem_sets_problems" ON "problems"."id" = "problem_sets_problems"."problem_id" WHERE "problem_sets_problems"."problem_set_id" = 1 
```

**问题：有没有办法使用相同的代码来检查持久对象和内存中的对象，同时运行最佳 SQL 代码？**

请注意，允许检查对象持久性的解决方案（但我看不到如何检查集合的脏度）。但是，如果修改了持久对象（即关联集合属性变脏，因此 SQL 查询的结果将过期），它仍然可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T08:33:26.073

好的，我终于解决了。

浏览晦涩的rails函数，我找到了`persisted?`方法。您可以使用它`@problem_set.persisted?`来检查对象是持久的还是仅在内存中。

所以答案是：

```
if @problem_set.persisted?
  @problem_set.problems.where(:title => "Adding Numbers").any?
else
  @problem_set.problems.map(&:title).include? "Adding Numbers"
end 
```

剩下的问题是，关联集合脏的持久对象怎么办？好吧，通过实验，我发现它并没有真正发生。例如，当您将对象添加到集合时，以下操作之一：

```
@problem_set.problems << Problem.new(:title => "hello")
@problem_set.problems.push Problem.new(:title => "hello") 
```

ActiveRecord 立即保存数据。同样，当您说：

```
@problem_set.problems.delete(@problem_set.problems[2]) 
```

这意味着，虽然没有这样的方法`@problem_set.problems_changed?`，如果有的话，当前的实现将导致`problems_changed?`总是返回`false`。

实际上，`collection<<`, `collection.push`,`collection.delete`方法会自动保存（即`save`自动调用）。

# activemq - ActiveMQ 消息组和负载均衡？

> ID：12104575
> 
> 赞同：2
> 
> 时间：2012-08-24T06:59:52.247
> 
> 标签：activemq, load-balancing

在[http://activemq.apache.org/message-groups.html](http://activemq.apache.org/message-groups.html)中，据说消息组提供了跨多个消费者处理消息的负载平衡。

虽然我读了整篇文章，但我还没有理解消息组和负载均衡之间的关系。毕竟在消息组之前已经有负载均衡了：消息代理根据消费者的确认速度发送消息。因此，如果存在与消息组有关的负载平衡，则在粒度上它是一个更大的负载平衡。

正确的？

任何意见或见解表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T14:02:29.353

好吧，它并没有那么复杂，并且在文档中可能会有些混乱。

正如您所说，负载平衡是内置的，因为代理在可用消费者之间分发消息。消息组必须经常表示需要由单个节点（或线程）处理的单元，甚至可能由于应用程序逻辑而按顺序处理。

如果有多个消息组发送到一个队列，它们将在多个消费者之间进行负载平衡。

# iphone - ARC下-viewDidUnload中的弱属性和强属性

> ID：12104576
> 
> 赞同：6
> 
> 时间：2012-08-24T06:59:55.463
> 
> 标签：iphone, objective-c, xcode, ipad, automatic-ref-counting

我是 iphone 开发新手。我正在为我的项目使用 ARC。据我了解，使用 ARC 我们不必手动释放任何对象。但是，我在某些地方观察到，即使在使用 ARC 之后，人们也会在 ViewDidUnload 中明确地将他们的对象设置为 nil。

例如，在 .h 文件中，我有这样的内容：

```
@property (unsafe_unretained, nonatomic) IBOutlet MKMapView *mapViewOutlet;
@property (unsafe_unretained, nonatomic) IBOutlet UIToolbar *toolBar;
@property (strong,nonatomic) NSMutableArray *dataArray; 
```

和 .m 如下：

```
- (void)viewDidUnload
{
     [self setMapViewOutlet:nil];
     [self setToolBar:nil];
     [super viewDidUnload];
     self.dataArray=nil;
} 
```

我的问题是，即使在 ARC 下，是否真的有必要在 ViewDidUnload 中明确指定 nil ？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-24T07:10:50.950

该`viewDidUnload`方法的重点是释放您并不真正需要的数据，以释放内存。阅读[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)：

> 当内存不足的情况发生并且不需要当前视图控制器的视图时，系统可能会选择从内存中删除这些视图。此方法在视图控制器的视图被释放后调用，这是您执行任何最终清理的机会。如果您的视图控制器存储了对视图或其子视图的单独引用，您应该使用此方法来释放这些引用。您还可以使用此方法删除对您为支持视图而创建但在视图消失后不再需要的任何对象的引用。您不应使用此方法发布用户数据或任何其他无法轻松重新创建的信息。

因此，您将属性设置为`nil`以便*现在*释放对象并帮助系统释放一些内存。但这当然取决于属性类型——强属性是“你的”，只有你可以决定是否现在（通过设置为`nil`）释放它们。弱属性可能已经是`nil`，例如，如果它们指向与主视图一起发布的某些视图。`unsafe_unretained`属性是一种特殊的野兽。他们指向的对象可能已经被释放，但这并不意味着它们被设置为`nil`自动。因此，您应该使用一种“更安全”的属性类型（强/弱），或者将不安全的属性设置为`nil`在这里，以确保您以后不会使用已发布的对象。在这种情况下没有硬性规则，您必须考虑情况以及它对各种属性的意义。

顺便说一句，`viewDidUnload`在 iOS 6 中已被弃用，在低内存条件下不再释放视图。您仍然会收到`didReceiveMemoryWarning`回调，以便您可以根据需要释放一些资源。同样，我建议您阅读文档并运行一些测试，看看会发生什么并决定您应该做什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T07:16:02.117

ARC 只会释放对对象没有强引用的属性。在您的情况下，这些都是强引用，因此除非明确设置为 nil，否则它们将被保留。

该`viewDidUnload`方法并不意味着您`UIViewController`从内存中删除，它只是意味着它的视图从内存中删除（[iOS Developer - ViewController 生命周期](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ViewLoadingandUnloading/ViewLoadingandUnloading.html#//apple_ref/doc/uid/TP40007457-CH10-SW1)）。

在这种情况下，`UIViewController`除非它们被显式设置为 nil，否则您将保留在内存中，因此也保留其属性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T07:09:31.847

当您使用 unsafe_unretained 时，您应该将其分配给 nil，因为它不会被隐式分配给 nil，在弱引用的情况下，它将被隐式分配给 nil。因此，为了避免任何悬空引用，您需要分配给 nil在 unsafe_unretained 的情况下。

# java - java JNA接口自动生成器

> ID：12104578
> 
> 赞同：3
> 
> 时间：2012-08-24T07:00:02.703
> 
> 标签：java, dll, interface, generator, jna

我有一个第三方 DLL，它由相当多的相互关联的类组成（可能用 C++ 编写），Java Native Access 包希望程序员为 DLL 中的每个类编写一个接口，在 VB.net对象资源管理器让生活变得轻而易举；但是，在java中我找不到这样的工具。

是否有任何工具可以获取 DLL 文件并生成所有需要的 JNA 接口？

此致

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T15:36:10.143

[JNAerator](http://code.google.com/p/jnaerator/)可以“编译”本机头文件以生成 JNA 映射，但对 C++ 的支持有限。

# validation - 如何验证 WSO2 中的参数？

> ID：12104581
> 
> 赞同：2
> 
> 时间：2012-08-24T07:00:21.410
> 
> 标签：validation, response, wso2

我有一项服务需要验证参数。例如，我的要求是：

```
<purchasePackage xmlns="http://bss.internal.service.boss.sysway.com/">
    <entitlementId xmlns="">20100812151324</entitlementId>
    <subscriberId xmlns="" />
    <packageId xmlns="">SZ_VOD</packageId>
    <deviceId xmlns="">801830456396</deviceId>
    <effectionTime xmlns="">2010-08-25 00:00:00</effectionTime>
    <expirationTime xmlns="">2009-08-25 00:00:00</expirationTime>
</purchasePackage> 
```

EffectionTime 晚于 expireTime，所以我需要响应错误消息而不是将其发送到实际服务。怎么做？有人可以给我一些建议吗？最好的问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T18:04:03.740

使用 WSO2 ESB 服务器并定义自定义代理。当代理收到上述请求时，使用 xpath（使用过滤器中介）选择两个日期值并比较哪个值更大。如果更大的允许发送到服务，您可以使用 XPATH 函数（日期比较）..否则执行故障序列..

[http://wso2.org/project/esb/java/4.0.3/docs/mediators/filter.html](http://wso2.org/project/esb/java/4.0.3/docs/mediators/filter.html)

# ssh - KVM/网桥：没有到主机的路由

> ID：12104587
> 
> 赞同：2
> 
> 时间：2012-08-24T07:01:37.943
> 
> 标签：ssh, virtualization, fedora, kvm

我已经在 Fedora 17 上使用 KVM 设置了一个 VM，并为 KVM 配置了一个桥接网络。主机和虚拟机都使用手动IP配置，主机IP为192.168.0.2，虚拟机为192.168.0.10。从虚拟机我可以毫无问题地连接到主机，但从主机我无法通过 SSH 连接到虚拟机，即使我仍然可以从主机 ping KVM。尝试 ssh 只会给我结果“没有主机路由”。

哦，我禁用了 iptables，所以我认为这不是防火墙的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-01-06T13:55:00.393

还要确保为 ip 转发配置内核：

```
$ sudo sysctl -a | grep net.ipv4.ip_forward
net.ipv4.ip_forward = 1 
```

它的值应该是 1，而不是 0。如果需要，请使用以下命令启用：

```
echo "net.ipv4.ip_forward = 1" >> /etc/sysctl.conf
sudo sysctl -p /etc/sysctl.conf 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T10:40:03.727

有两种方法：

*** 使用代理隧道从访客创建主机通道：** 从访客运行以下命令： **ssh -L 2000:localhost_ip:2000 username@hostip**

探索 ssh man 以获取内部信息。

*** 难以设置，但在运行 guest 时配置正确：** 按照 [http://www.cse.iitd.ernet.in/~prathmesh/random.html#Connecting_qemu_guest_to_real_network](http://www.cse.iitd.ernet.in/~prathmesh/random.html#Connecting_qemu_guest_to_real_network)

# c - 在 Windows XP 中将复选框添加到 SHBrowseForFolder

> ID：12104589
> 
> 赞同：0
> 
> 时间：2012-08-24T07:01:53.033
> 
> 标签：c, winapi, windows-xp

我需要一个带有额外控制的文件夹浏览器对话框，例如复选框。

程序支持 Windows XP，因此使用 vista 风格的 CFileDialog 和 IFileDialogCustomize 不适合我：

```
 CFileDialog od(TRUE/*bOpenFileDialog*/, NULL, NULL,
      OFN_HIDEREADONLY | OFN_OVERWRITEPROMPT , NULL, NULL, 0,
      TRUE/*bVistaStyle*/);

   IFileDialogCustomize * customDlgPtr = od.GetIFileDialogCustomize();
   if ( customDlgPtr != NULL )
   {
      HRESULT res = customDlgPtr->AddCheckButton(IDC_CUST_TEXT, _T("Include subtree"), FALSE);
      customDlgPtr->Release();
   }

   IFileOpenDialog * openDlgPtr = od.GetIFileOpenDialog();
   if ( openDlgPtr != NULL )
   {
      openDlgPtr->SetOptions(FOS_PICKFOLDERS);
      openDlgPtr->Release();
   }

   od.DoModal(); 
```

# c# - asp.net MVC 站点中权限管理功能的开源项目？

> ID：12104596
> 
> 赞同：0
> 
> 时间：2012-08-24T07:02:37.457
> 
> 标签：c#, asp.net-mvc, open-source

我的数据驱动网站需要`visualized`权限管理功能，

但是我不想手动开发，我觉得肯定有一些成熟的通用项目。

我用`asp.net mvc`, `razor`, `EF`&`MySql`

如果不是`role-based`但`permission-based`会更好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:00:46.637

看一下[nuget](http://nuget.org/packages?q=membership)

我使用过[Security Guard](https://github.com/kahanu/Security-Guard/wiki/1.--Overview)，它运行良好，并且具有一些以上基本图形和功能。[https://stackoverflow.com/a/11809783/985284](https://stackoverflow.com/a/11809783/985284)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T08:08:29.950

我的代码：

```
public class PermissionsAttribute : ActionFilterAttribute
{
    private readonly Permission _requiredPermission;

    public PermissionsAttribute(string itemName, Operation op)
    {
        var permi = new Permission()
        this._requiredPermission = permi;
    }

    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        var user = HttpContext.Current.User;
        if (user == null)
        {/*redirect to sign-in page*/}
        else
        {/*check permission/*}
    } 
```

只需将此属性添加到控制器和操作

# qt - QTableView - 使用行选择重绘错误

> ID：12104600
> 
> 赞同：0
> 
> 时间：2012-08-24T07:02:44.663
> 
> 标签：qt, pyqt4, pyside

我正在尝试整理一个显示模型数据的简单表格。我需要行选择行为，所以我设置：

```
self.setSelectionBehavior(QAbstractItemView.SelectRows) 
```

一切都很好，直到我实现`selectionChanged()`这导致每次选择一行时重绘都会变得有点混乱（单元格似乎没有更新它们的选择状态）。这是一些导致我遇到问题的测试代码：

```
import sys
from PySide.QtGui import *
from PySide.QtCore import *

class Item( QStandardItem ):
    def __init__( self, parent=None ):
        super( Item, self).__init__( parent )
        self.pixmap = QPixmap("colour.png")

    #def data(self, role=Qt.UserRole + 1):
        #'''with this method in place the cells get a checkbox and are not selectable'''
        #return 'test'

class Model (QStandardItemModel):
    def __init__( self, parent=None ):
        super( Model, self).__init__( parent )
        self.setHorizontalHeaderLabels(['a', 'b', 'c'])
        self.init_data()

    def init_data(self):
        for row in range(0, 15):
            for col in range(0, 10):
                col_item = Item( '%s, %s' % (row, col) )
                self.setItem(row, col, col_item)

class TableView( QTableView ):
    def __init__( self, parent=None ):
        super( TableView, self).__init__( parent )
        model = Model()
        self.setModel(model)
        self.setSelectionBehavior(QAbstractItemView.SelectRows)
        self.setSelectionMode(QAbstractItemView.ContiguousSelection)
        self.setMouseTracking(True)

    def selectionChanged(self, selected, deselected):
        print selected

if __name__ == '__main__':

    app = QApplication([])
    table = TableView()
    table.show()
    sys.exit(app.exec_()) 
```

我也有点困惑，为什么单元格都有一个复选框并且如果`data()`方法在`QStandardItem`. 有人可以帮忙吗？

干杯，坦率

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T09:28:11.213

您正在覆盖`QTableView`s `selectionChanged`。那是（可能）由视图内部使用，您可以防止这种情况。我不确定你为什么要这样做。如果您想在选择更改时执行自定义操作，您应该使用视图的`selectionChanged`信号。`selectionModel()`

但是，如果您坚持要覆盖`selectionChanged`至少`TableView`也调用父母函数，以便该视图可以完成其工作：

```
class TableView( QTableView ):
    def __init__( self, parent=None ):
        super( TableView, self).__init__( parent )
        model = Model()
        self.setModel(model)
        self.setSelectionBehavior(QAbstractItemView.SelectRows)
        self.setSelectionMode(QAbstractItemView.ContiguousSelection)
        self.setMouseTracking(True)

    def selectionChanged(self, selected, deselected):
        print selected
        super(TableView, self).selectionChanged(selected, deselected) 
```

**但是**，你不需要，你真的不应该`QTableView`仅仅为了设置一些属性而继承 a。例如，您可以这样做。实际上，您的所有子类都是不必要的。你可以这样写代码：

```
import sys
from PySide.QtGui import *
from PySide.QtCore import *

if __name__ == '__main__':
    app = QApplication([])

    # create model
    model = QStandardItemModel()
    model.setHorizontalHeaderLabels(['a', 'b', 'c'])

    # fill data
    for row in range(15):
        model.appendRow([QStandardItem('%d, %d' % (row, col)) for col in range(10)])

    # create table view
    table = QTableView()

    # set parameters
    table.setModel(model)
    table.setSelectionBehavior(QAbstractItemView.SelectRows)
    table.setSelectionMode(QAbstractItemView.ContiguousSelection)
    table.setMouseTracking(True)

    # show
    table.show()

    sys.exit(app.exec_()) 
```

至于覆盖`data`模型的方法：`data`方法负责根据`role`视图要求返回许多不同的值。你总是`"test"`为他们所有人回来。也就是说，至少可以说是*bad*。如果您想创建自己的模型，您至少应该阅读有关模型/视图如何在 Qt 中工作的信息。官方文档有[一个很好的部分](http://doc.qt.nokia.com/4.7-snapshot/model-view-programming.html)。您还可以在网络上找到一些不错的视频教程。

# mysql - 错误 1452：无法添加或更新子行

> ID：12104601
> 
> 赞同：4
> 
> 时间：2012-08-24T07:02:49.033
> 
> 标签：mysql, sql, database, jsp, foreign-keys

我遇到了一个奇怪的问题，我正在尝试将外键添加到一个引用另一个表的表中，但由于某种原因它失败了。由于我对 MySQL 的了解有限，唯一可能怀疑的是在另一个表上存在一个外键，该表引用了我试图引用的表。

这是通过工作台生成的我的表关系的图片：

```
CREATE TABLE `beds` (
  `bedId` int(11) NOT NULL,
  `wardId` int(11) DEFAULT NULL,
  `depId` int(11) DEFAULT NULL,
  `desc` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`bedId`),
  KEY `departmentId_idx` (`depId`),
  KEY `wardId_idx` (`wardId`),
  CONSTRAINT `departmentId` FOREIGN KEY (`depId`) 
     REFERENCES `department` (`Department_Id`) 
     ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `wardId` FOREIGN KEY (`wardId`) REFERENCES `wards` (`wardId`) 
     ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=latin1$$ 
```

* * *

```
ERROR 1452: Cannot add or update a child row: a foreign key constraint fails
(`asiahospitaldb`.`beds`, CONSTRAINT `departmentId` FOREIGN KEY (`depId`) 
REFERENCES `department` (`Department_Id`) 
ON DELETE NO ACTION ON UPDATE NO ACTION)

SQL Statement:

INSERT INTO `asiahospitaldb`.`Beds` (`bedId`, `wardId`, `depId`, `desc`) 
VALUES ('456', '7444', '4555', 'ikiuj') 
```

* * *

![关系](../Images/a5f14e6471e271e01172c6d010a7aae1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:31:57.420

这

```
ERROR 1452: Cannot add or update a child row: a foreign key constraint
fails (`asiahospitaldb`.`beds`, CONSTRAINT `departmentId` FOREIGN KEY
(`depId`)  REFERENCES `department` (`Department_Id`)  ON DELETE NO
`enter code here`ACTION ON UPDATE NO ACTION) 
```

告诉您您插入的行需要与`department/department_id`您插入列中的值对应的值`depId`（正如 Omesh 指出的那样）。重要的一点在这里：

> ( **depId** ) 参考部门 ( **Department_Id** )

换句话说，你试图在一个不存在的部门创建一张床。

# c# - 使用 RestSharp 从 Twitter API 请求 OAuth 请求令牌返回 404

> ID：12104603
> 
> 赞同：2
> 
> 时间：2012-08-24T07:02:52.653
> 
> 标签：c#, twitter, oauth, restsharp

我正在尝试使用 RestSharp 检索 Twitter OAuth 请求令牌，但无论我尝试什么，API 似乎都会以 404 响应。这是我的方法代码：

```
public void GetRequestToken()
{
    var client = new RestClient("https://api.twitter.com/1");

    var authenticator = OAuth1Authenticator.ForRequestToken(_consumerKey, _consumerSecret);
    authenticator.ParameterHandling = OAuthParameterHandling.HttpAuthorizationHeader;

    client.Authenticator = authenticator;

    var request = new RestRequest("/oauth/request_token", Method.POST);
    request.AddHeader("oauth_callback", "http%3A%2F%2Fmarkashleybell.com");
    var response = client.Execute(request);

    var qs = HttpUtility.ParseQueryString(response.Content);

    _token = qs["oauth_token"];
    _tokenSecret = qs["oauth_token_secret"];
} 
```

`_consumerKey`并`_consumerSecret`从`Web.config`设置中检索，我已经仔细检查它们是否正确。`_token`并且`_tokenSecret`是包含此方法的类的私有成员变量。

请求的 API url 是正确的。[根据Twitter 的文档](https://dev.twitter.com/docs/api/1/post/oauth/request_token)，该请求似乎传递了所有正确的标头。

我尝试使用[APIGee 控制台](https://apigee.com)进行相同的 API 调用，看看我做错了什么，但即使*这样也*返回 404。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T06:26:56.937

*卫生部*。事实证明，用于 OAuth 操作的 Twitter API URL 实际上与所有其他 Twitter API 调用的 URL 略有不同，并且省略了 API 版本段，因此这是一个真正的 404。

还有一种更简洁的方法来提供`oauth_callback`内置于 RestSharp 身份验证器构造函数中的参数——作为参考，下面的代码完美运行：

```
public void GetRequestToken()
{
    var client = new RestClient("https://api.twitter.com"); // Note NO /1

    client.Authenticator = OAuth1Authenticator.ForRequestToken(
        _consumerKey, 
        _consumerSecret, 
        "http://markashleybell.com" // Value for the oauth_callback parameter
    );

    var request = new RestRequest("/oauth/request_token", Method.POST);
    var response = client.Execute(request);

    var qs = HttpUtility.ParseQueryString(response.Content);

    _token = qs["oauth_token"];
    _tokenSecret = qs["oauth_token_secret"];
} 
```

# php - 使用大 CSV 更新数据库

> ID：12104604
> 
> 赞同：1
> 
> 时间：2012-08-24T07:02:52.997
> 
> 标签：php, sql, csv, phpmyadmin

我需要每天更新我的 MySql 中的 10.000 个项目。我已上传 CSV 文件并尝试更新我的数据库数据。我正在分叉两个领域。我的问题是可行，但在某些时候我得到 504 Gateway Time-out 并且我的上传无法完成该过程。

这是我的代码

```
if(is_uploaded_file($_FILES["filename"]["tmp_name"])){
        //      
        move_uploaded_file($_FILES["filename"]["tmp_name"], "".$_SERVER["DOCUMENT_ROOT"]."/upload/".$_FILES["filename"]["name"]);
    $file_path="".$_SERVER["DOCUMENT_ROOT"]."/upload/".$_FILES["filename"]["name"]."";

    $file=file_get_contents("".$file_path."");
    $file=iconv("windows-1251", "utf-8",$file);
    file_put_contents("".$file_path."",$file);

if(!setlocale(LC_ALL, 'ru_RU.utf8')) setlocale(LC_ALL, 'en_US.utf8'); if(setlocale(LC_ALL, 0) == 'C') die('       (ru_RU.utf8, en_US.utf8)');
    if (($handle_f = fopen($file_path, "r")) !== FALSE) { 
        //   csv
        while (($data_f = fgetcsv($handle_f,99999,";"))!== FALSE) {
            //   ean13 
            $sql="SELECT id_product FROM ps_product WHERE reference = '".$data_f[0]."'";
            $id_product = Db::getInstance()->getValue($sql,0);  

            //   ,    
            if ($id_product) {      
                $sql=mysql_query("UPDATE `ps_product` SET `quantity` ='".$data_f[1]."' WHERE `reference`='".$data_f[0]."'");
                echo "<p style='color:green'>Items<b>".$data_f[0]."</b> updated</p>";
            } else{
                echo "<p style='color:red  '>Items<b>".$data_f[0]."</b> not found</p>";
            }
        }
      echo "<b>Update is complited</b>";  

    }else{
        echo "Can`t open imported file";
    }
}else{
    echo '
    <h2>Quantity update:</h2>
    <form action="'.$_SERVER["PHP_SELF"].'" method="post" enctype="multipart/form-data">
              <input type="file" name="filename"><br>
              <input type="submit" value="Load"><br>
    </form>
    ';
} 
```

现在，我在 excel 中拆分了许多文件，每次失败约 1000 个并更新数据库。这需要一些时间。你能给我一个想法，或者我的代码中可能有一些错误？我认为使用 ajax 更新无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:06:21.660

你有参考索引吗？如果你不这样做，每次更新都需要很长时间。

此外，您有一些主要的 SQL 注入问题，并且 mysql 在贬值，切换到 mysqli。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T07:13:10.843

`504 Bad Gateway Timeout`是当您的网关/代理服务器没有`timely response`从您的处理服务器获得时。在这种情况下，即使处理服务器确实完成了所有更新，因为它没有向您的代理发送任何消息来让它知道处理仍在进行中，代理也会关闭连接。

在这种情况下，使用 ajax 进行更新并不是一个好主意。但是，有一个`ajax design pattern`可以`heartbeat pattern`帮助您的方法。基本思想是这样的：

1.  您对处理页面进行正常调用以启动 CSV 更新
2.  此外，您在页面中设置了一个 javascript 计时器，它每 X 分钟对服务器页面进行一次 ajax 调用
3.  服务器以简单的消息响应。甚至可以只是一个字符
4.  您的客户端 ajax 可以忽略此消息，或打印它或其他
5.  X 分钟后会发生相同的过程。
6.  与此同时，您在第一步中启动的 CSV 处理仍在继续

这`continuous message request and response`称为`heartbeat`. 它有助于保持`connection alive`服务器处理的时间。一旦服务器处理结束并且您得到确认，您可以终止计时器并根据需要关闭连接。

当然，在处理服务器端，您可以执行其他操作`increase timeout lenght`，例如`add database indexes`等，以确保`php process timeout`不会发生 a。

但是请注意，进程超时与网关超时不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T09:25:29.270

我需要将大型 CSV 加载到 MySQL 中，并且发现最好的解决方案是创建一个可以保存原始 CSV 数据的表。我使用与 CSV 相同的字段创建表，然后使用 进行批量导入`LOAD DATA`，这很快，然后我可以使用 SQL 对数据执行必要的查询。

```
LOAD DATA LOCAL INFILE '{$filename}' 
INTO TABLE {$table_name} 
FIELDS TERMINATED BY '|' 
LINES TERMINATED BY '\n' 
```

一旦您在表中拥有 CSV 数据，您就可以简单地在块中运行查询（LIMIT 和 OFFSET）Psudeo 代码，例如

```
DEFINE("BLOCK_SIZE",100);

// Get the total rows in CSV table so when can divide into blocks
SELECT SQL_CALC_FOUND_ROWS  * 
FROM   my_csv_table
LIMIT  1;

$total_rows = SELECT FOUND_ROWS();

for($counter = 0; $counter < $total_rows; $counter += BLOCK_SIZE)
{

    SELECT * 
    FROM   my_csv_table
    LIMIT  BLOCK_SIZE
    OFFSET $loop_counter;

    foreach $row 
    {

        // UPDATE YOUR REAL TABLE IF MATCHED

    }

} 
```

# java - 在聊天客户端中传输文本丢失

> ID：12104605
> 
> 赞同：0
> 
> 时间：2012-08-24T07:03:00.973
> 
> 标签：java, sockets

我有一个 Java 客户端/服务器聊天应用程序，在建立连接后，接收者只收到了大约四分之一的数据。问题可能是什么？这是确切发生的情况的打印屏幕： ![应用程序的打印屏幕](../Images/2a4c939873f669345f787697d664c26b.png)

从套接字读取的代码：

```
public void somethingElse(){
    try {
           if(in.readLine() != null){
                messageBufferIn = in.readLine();
               System.out.println(in.readLine());
               chat.append(recipient + ": " + messageBufferIn + "\n");
           }
           } catch (IOException e) {
            e.printStackTrace();
          }     
} 
```

运行上述方法的线程代码：

```
public class chatListener extends Thread{
static main main = new main();
//static Thread mainThread = new Thread(main);
public void run(){
    while(main.isConnected == true){
        main.somethingElse();
    }
} 
```

}

建立连接后，上述线程立即运行

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T07:05:10.767

每次调用 in.readLine 时，扫描仪都会向下移动到下一行；你不能一直调用它几次，因为它会跳过你基本上从未使用过的行。试试这个来替换 somethingElse()：

```
public void somethingElse(){
    try {
           String line;//Added a variable to store the current line to; readLine is 
           //dynamic, it returns the next line each call, so if we store to a variable,
           //we only call it once, and hold that value
           if((line = in.readLine()) != null){// (line = in.readLine()) != null is shorthand to store readLine to line, and then check if that returned value is null or not
               System.out.println(line);//Print out the line
               chat.append(recipient + ": " + line + "\n");//Append it
           }
     } catch (IOException e) {
        e.printStackTrace();
     }     
} 
```

之前，您调用 in.readLine 一次来检查它是否为空，然后保存下一行，然后打印下一行。因此（失败成功失败|失败成功失败等）的模式=仅显示消息2 + 5

# jquery - 带有 jquery mobile 的页面加载窗口

> ID：12104606
> 
> 赞同：0
> 
> 时间：2012-08-24T07:03:12.933
> 
> 标签：jquery, jquery-mobile

我找到了这个提示[http://jquerymobile.com/test/docs/pages/loader.html](http://jquerymobile.com/test/docs/pages/loader.html)，但是当我尝试使用它时，我收到了

> TypeError: $.mobile.loading 不是函数

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T12:25:44.797

您提到的示例是指较旧的 jQuery 移动版本。

如当前[jQuery Mobile Doc](http://jquerymobile.com/demos/1.1.1/docs/api/methods.html)中所述，等效方法是：

> $.mobile.showPageLoadingMsg（方法）
> 
> 论据：
> 
> *   主题（字符串，默认值：“a”）消息的主题样本。
> *   msgText（字符串，默认值：“正在加载”）消息的文本。
> *   textonly (boolean, default: false) 如果为 true，则显示消息时“微调器”图像将被隐藏。

# m2eclipse - 如何在m2e中指定生成的jar路径

> ID：12104607
> 
> 赞同：0
> 
> 时间：2012-08-24T07:03:13.953
> 
> 标签：m2eclipse, m2e

我用m2e。我有动态的web项目A，java项目B和项目A依赖于项目B。我希望将项目B的目标文件夹中生成的JAR文件移动到项目A的WebContent/lib中。最简单的是什么实现这一目标的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T13:04:04.667

1）在项目A的POM中输入项目B作为依赖项。这是maven解决从A到B的依赖关系的先决条件。

2）在项目 A 的 Eclipse 项目首选项中，确保在“maven”部分中的“解决工作空间项目中的依赖项”选项已启用（默认情况下应启用。

通常，这应该这样做

# windows-8 - 更改分辨率 LogicalDpiChanged 事件未在 Windows 8 Metro 应用程序中触发

> ID：12104616
> 
> 赞同：1
> 
> 时间：2012-08-24T07:04:12.653
> 
> 标签：windows-8, microsoft-metro, resolution

我正在这个应用程序中实现 C# Metro 应用程序，并且正在实现这个事件

```
DisplayProperties.LogicalDpiChanged += DisplayProperties_LogicalDpiChanged; 
```

静态更改的模拟器分辨率不会触发。

# android - 如何获取 Chromium for Android 的源代码

> ID：12104617
> 
> 赞同：5
> 
> 时间：2012-08-24T07:04:13.373
> 
> 标签：android, google-chrome, chromium, android-browser

我正在尝试为 Android 构建 Chromium 开源浏览器。我已经提到：

访问：[http ://code.google.com/p/chromium/wiki/AndroidBuildInstructions](http://code.google.com/p/chromium/wiki/AndroidBuildInstructions)

但是，我认为它只会构建测试包而不是完整的浏览器。知道如何让它在我的设备上运行以通过源代码对其进行一些更改。

我按照建议从 Git 中检查了代码，并使用 depot_tools 相应地构建它，并将操作系统定位为 android。所有的构建环境都是正确的，我可以制作“make -j4”命令。但是我仍然无法使用 Eclipse 源代码进行一些更改。

我怎样才能做出改变？

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T02:05:20.870

您可以使用“make -j4 content_shell_apk”单独构建内容外壳，而不是构建完整的捆绑包。这将为您提供 content_shell.apk，它可以安装到任何运行 4.0 或更高版本的 android 设备上。如果你想为内容外壳制作一个 Eclipse 项目，那么你必须从 chromium 源代码树中收集所有必要的 src 文件和资源文件。

```
src files:
base/android/java/src/org/chromium/*
media/base/android/java/src/org/chromium/*
ui/android/java/src/org/chromium/*
content/public/android/java/src/org/chromium/*
content/shell/android/java/src/org/chromium/*
net/android/java/src/org/chromium/*

res files:
content/shell/android/res/*
pak file:
out/Release/content_shell/assets/*

native libs:
out/Release/content_shell/libs/armeabi-v7a/* 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T07:57:01.717

“目前，完全编译不会构建浏览器。它只会构建单元测试包。随着公共 Chromium 源中可用的代码越来越多，将会添加更多目标。”

取自同一页，我认为这是您的答案。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-10-20T02:22:36.800

首先，您绝对可以按照这些[说明](https://www.chromium.org/developers/how-tos/android-build-instructions#TOC-Build-the-full-browser)构建一个完整的浏览器。您将拥有一个名为“ChromePublic.apk”的 apk 文件。如果你只是想测试 WebView，你只能为你的目的构建“WebView Shell”或“Content Shell”。

其次，将 Chromium 项目导入 Eclipse IDE 几乎是不可能的，因为它太复杂了，Eclipse 可以理解。您可以通过 Notepad++ 编辑源代码，然后按照上述说明重建项目。如果您只想拥有“WebView Shell”项目，此[链接](https://stackoverflow.com/questions/16604150/embedded-chromium-or-webkit-in-android-app/33188306#33188306)可能会对您有所帮助。

# java - 当 WAV 包含在 JAR 中时，如何在 Java 中播放 WAV

> ID：12104619
> 
> 赞同：-1
> 
> 时间：2012-08-24T07:04:22.057
> 
> 标签：java, audio, applet, javasound

我一直在尝试在我的 Applet 上处理声音，而不是尝试所有不同的方法，在 Java 中播放声音的最佳方法是什么？有几个要求：

*   需要能够循环
*   需要能够从归档 JAR 中加载 WAV（我认为使用 getClass().getResource）
*   需要能够同时播放多个声音，而不是剪辑已经播放的声音

非常感谢您看我的问题，希望你们有答案！

感谢出色的帮助，我几乎可以使用它：

```
public class MyGame() {
   Clip bullet;

    public void init(){
        try {

        bullet = AudioSystem.getClip();
        URL url2 = this.getClass().getResource("bulletSound.wav");
        AudioInputStream ais2 = AudioSystem.getAudioInputStream( url2 );

        bullet.open(ais2);
        } catch (LineUnavailableException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        } catch (UnsupportedAudioFileException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        }
    }
    randomMethodToPlayBullet(){
        bullet.setFramePosition(0);
        bullet.start();
    }
} 
```

问题是会播放子弹声音，但是如果连续两次调用 randomMethodToPlayBullet ，则在第一个子弹声音完成之前，不会播放第一个子弹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T07:15:28.687

从 jar 文件加载资源的最佳方法是在同一个文件夹中放入一个类并使用`.class.getResource(...)`or`.class.getResourceaAsStream(...)`方法获取资源：

```
URL url = ClazzInTheFolderOfMyMidiFile.class.getResource(nameOfMidiFile); 
```

或者

```
InputStream resourceAsStream = ClazzInTheFolderOfMyMidiFile.class.getResourceAsStream(nameOfMidiFile); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T07:08:51.453

答案：

*   *小样本*是`Clip`。请参阅[Java 声音信息。](https://stackoverflow.com/tags/javasound/info)使用示例[页面。](https://stackoverflow.com/tags/javasound/info)
*   大样本是[`BigClip`](https://stackoverflow.com/a/9470886/418556)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T10:30:13.997

您不能同时播放同一个剪辑两次。您必须创建另一个 Clip 实例才能同时播放两次声音。

请注意，您可以播放的剪辑数量是有限制的，因此剪辑 API 可能不适合支持声音重的游戏。

# ios - 释放thread1 exc_bad_access

> ID：12104620
> 
> 赞同：0
> 
> 时间：2012-08-24T07:04:32.957
> 
> 标签：ios, uitableview, thread-safety, exc-bad-access, nsautoreleasepool

我是 IOS 编程的新手，我的程序运行良好，但我发现它有内存韭菜，所以我开始释放对象。

当我现在启动程序时，它给了我一个错误：

```
@autoreleasepool {
     return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
} 
```

和 ：

```
Thread 1: EXC_BAD_ACCESS (code = 1, address = 0x3f800010) 
```

我试图调试它，我发现程序在创建 tableView 时崩溃了。它创建了整个第一部分，但在第二部分的第二行中，它在返回行中崩溃了。

这是我创建表的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

[tableView setBackgroundView:nil];
tableView.backgroundColor = [UIColor clearColor];

    // Configure the cell...

    if ([self tableView:tableView canCollapseSection:indexPath.section])
    {
        if (!indexPath.row)
        {
            static NSString *CellIdentifier = @"TitleCell";
            UILabel *title;

            UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
            cell = nil;
            if (cell == nil) {
                [[NSBundle mainBundle] loadNibNamed:@"TitleCell" owner:self options:nil];
                titleCell.layer.masksToBounds = YES;
                titleCell.layer.cornerRadius =0.0;
                cell = titleCell;
                self.titleCell = nil;

            }

            title =(UILabel *)[cell viewWithTag:1];
            cell.selectionStyle = UITableViewCellSelectionStyleNone;
            NSString *orderString=[[[NSString alloc] init] autorelease];

                    title.text = [[titles objectAtIndex:indexPath.section] objectAtIndex:2];
                    cell.accessoryView = nil;

            if (!isPad()) {
                [cell.contentView setBackgroundColor:[UIColor colorWithRed:0.0 green:0.18 blue:0.24 alpha:1]];
            }

            return cell;
        }
        else
        {
            // all other rows

            static NSString *CellIdentifier = @"DataCell";
            UILabel *title;
            UILabel *update;
            UILabel *download;
            UILabel *updateText;
            UILabel *downloadText;

            UIImageView *favoriteIcon;

            UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
            cell = nil;
            if (cell == nil) {
                [[NSBundle mainBundle] loadNibNamed:@"DataCell" owner:self options:nil];
                cell = dataCell;
                self.dataCell = nil;

            }

            cell.layer.cornerRadius =0;
            title =(UILabel *)[cell viewWithTag:1];
            download = (UILabel *)[cell viewWithTag:3];
            update = (UILabel *)[cell viewWithTag:2];
            favoriteIcon = (UIImageView *)[cell viewWithTag:4];
            updateText = (UILabel *)[cell viewWithTag:5];
            downloadText = (UILabel *)[cell viewWithTag:6];

            updateText.text = NSLocalizedString(@"updated", nil);
            downloadText.text = NSLocalizedString(@"downloaded", nil);

            NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
            [dateFormat setDateFormat:@"MM. d. YYYY"];
            starIcone = favoriteIcon;
            int indicator = 0;

                    for (int i=0; i<[allData count]; i++) {
                        if ([[[allData objectAtIndex:i] objectAtIndex:1] isEqualToNumber:[[titles objectAtIndex:indexPath.section] objectAtIndex:0]] ) {
                            indicator++;
                        }
                        if (indicator == indexPath.row) {

                            title.text = [[allData objectAtIndex:i] objectAtIndex:2];
                            download.text = [dateFormat stringFromDate:[self db_get_date:[[[allData objectAtIndex:i] objectAtIndex:0]intValue]]];
                            update.text = [dateFormat stringFromDate:[[allData objectAtIndex:i] objectAtIndex:3]];

                            break;
                        }
                    }

            [dateFormat release];

            [favoriteIcon setAccessibilityHint:title.text];
            if ([favorits count]==0) {
                favoriteIcon.image = [[UIImage alloc] 
                                      initWithContentsOfFile:
                                      [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:
                                       @"blankstar.png"]];

            }
            for (int i=0; i<[favorits count]; i++) {
                if ([title.text isEqualToString:[[favorits objectAtIndex:i] objectAtIndex:2]]) {
                    favoriteIcon.image = [[UIImage alloc] 
                                          initWithContentsOfFile:
                                          [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:
                                           @"star.png"]];
                    break;
                }
                else {
                    favoriteIcon.image = [[UIImage alloc] 
                                          initWithContentsOfFile:
                                          [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:
                                           @"blankstar.png"]];
                }
            }

            UITapGestureRecognizer *recognizer = [[[UITapGestureRecognizer alloc] 
                                                   initWithTarget:self action:@selector(AddIcone:)]autorelease
                                                  ];

            [favoriteIcon setUserInteractionEnabled:YES];
            [favoriteIcon addGestureRecognizer:recognizer];

            cell.backgroundColor = [UIColor clearColor];
            cell.selectionStyle = UITableViewCellSelectionStyleBlue;
            return cell;

        }
    }

return nil; 
```

我也试过把：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"TitleCell";
            UILabel *title;

            UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
            cell = nil;
            if (cell == nil) {
                self.titleCell = [[[NSBundle mainBundle] loadNibNamed:@"TitleCell" owner:self options:nil]objectAtIndex:0];
                titleCell.layer.masksToBounds = YES;
                titleCell.layer.cornerRadius =0.0;
                cell = titleCell;
                self.titleCell = nil;

            }
return cell; 
```

它像以前一样崩溃。

请帮助我并感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:22:25.233

`[[NSBundle mainBundle] loadNibName: owner: options:]`返回一个数组。将此行替换为：

```
self.titleCell = [[[NSBundle mainBundle] loadNibNamed:@"TitleCell" owner:self options:nil] objectAtIndex:0]; 
```

# sql - modify oracle query start with

> ID：12104623
> 
> 赞同：0
> 
> 时间：2012-08-24T07:04:43.110
> 
> 标签：sql, oracle

I am using the following query written by other developers:

```
SELECT DISTINCT c.id category_id,
  c.parent_id,
  d.name AS category_name,
  level
FROM category c,
  category_language d
WHERE c.id                                 = d.category_id
AND c.is_active                            = 1
AND c.is_deleted                           = 0
AND c.deleted_date                        IS NULL
AND d.is_active                            = 1
AND d.is_deleted                           = 0
AND d.deleted_date                        IS NULL
AND ((to_date(d.expiry_date,'DD-MON-YYYY') > to_date(sysdate,'DD-MON-YYYY'))
OR d.expiry_date                          IS NULL)
AND d.language_id                          = 1
AND c.cat_type_id                          = 1
  START WITH c.parent_id                   =1308206844
  CONNECT BY c.parent_id                   = prior c.id
ORDER SIBLINGS BY d.name 
```

I had two problems.

First, I don't know how **START WITH**, **CONNECT BY**, **PRIOR** Keywords are working in query.

Second, when I change **ORDER SIBLINGS BY d.name** to **ORDER SIBLINGS BY c.priority desc** following error message is thrown:=

```
ORA-01791: not a SELECTed expression
01791\. 00000 -  "not a SELECTed expression" 
```

I had also tried to change the Datatype of priority from number to string but same error is thrown.

I want to run query of order by c.priority desc for producing desired results.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T07:15:55.490

关键字`START WITH, CONNECT BY, PRIOR`用于显示层次结构。在我看来，这个链接是一个非常好的教程：http: [//www.adp-gmbh.ch/ora/sql/connect_by.html](http://www.adp-gmbh.ch/ora/sql/connect_by.html)

至少我通过示例学会了如何使用它。也许这也为您提供了`ORDER SIBLINGS BY`真正含义的答案，然后您可以回答自己如何避免错误消息。显然 Oracle 希望您将该列包含在选定的列中。`ORDER SIBLINGS`特定于层次结构，你可以谷歌它。但我认为你首先需要了解`START WITH, CONNECT BY, PRIOR`

也许你不想做一个`ORDER SIBLINGS BY`但`ORDER BY`只有一个。

# android - 在 AndEngine 中用颜色填充精灵内部的特定区域

> ID：12104624
> 
> 赞同：1
> 
> 时间：2012-08-24T07:04:43.640
> 
> 标签：android, andengine

我用 AndEngine 编写了一个简单的游戏。在这个游戏中，我想用颜色（或另一个精灵）填充精灵内部的特定区域，以显示进度，如下所示：

![在此处输入图像描述](../Images/2cf74296a5f76537897cdaaa416c5961.png) ![在此处输入图像描述](../Images/fcfd756c77ef9ca40afba732aae16546.png) ![在此处输入图像描述](../Images/3ee6ca00ac8561dfa0dd1192007705dd.png)

你能帮我怎么做吗？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T07:16:59.610

我也有一个和你一样的要求。下面是我所做的。

```
CCSprite backgroundSprite = CCSprite.sprite("background.png");                  
addChild(mShipEnergyMeter, 1);

CCSprite forgroundSprite = CCSprite.sprite("foreground.png");                   
forgroundSprite.setScaleX(1f);
forgroundSprite.setScaleY(1f);
backgroundSprite.addChild(forgroundSprite, 0); 
```

根据您的要求，您可以设置前景精灵的比例，使其看起来像在进步。希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T11:24:17.907

只需将要填充的区域设置为透明，然后将填充的 img 放在填充的 img 下即可。

```
while(loaded()!=100){
    dst.set(x,y,x+w,y+h);
    src.set(0,0,loaded()*w/100,h);
    canvas.drawBitmap(back,src,dst,null);
    src.set(0,0,w),h);
    canvas.drawBitmap(front,src,dst,null);
}
loaded = a func that calculates how much % was loaded
return an integer 0-100 
```

# vb.net - 将特定行从一个数据表过滤到另一个数据表

> ID：12104633
> 
> 赞同：0
> 
> 时间：2012-08-24T07:05:12.323
> 
> 标签：vb.net, datatable, rowfilter

我正在使用 Windows 应用程序。我有两个名为“dt1”和“dt2”的数据表。

在“dt1”我有一些像

```
ID Name Group
1  A1    G1
2  A2    G1
2  A2    G2
3  A3    G2
3  A3    G1
4  A4    G2
5  A5    G2 
```

AND 在第二个表“dt2”中，

```
ID NAME  
1  A1
2  A2
3  A3
4  A4
5  A5
6  A6 
```

现在我想要过滤行“dt1”中的“dt2”行说id - 1,2，它也存在于“dt2”中。

所以基本上我想要一个数据表的行来自另一个被过滤的数据表。

任何人都可以给出一些想法如何得到这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:13:01.443

最有效和最简单的方法是使用[`Linq-To-DataSet`](http://msdn.microsoft.com/en-us/library/bb386977)两个`join`表：

```
Dim result = From r1 In dt1.AsEnumerable()
             Join r2 In dt2.AsEnumerable()
             On r1.Field(Of Int32)("ID") Equals r2.Field(Of Int32)("ID")
             Select r2 
```

如果你想要结果，什么是`IEnumerable(Of DataRow)`, 为`DataTable`：

```
Dim tblResult = result.CopyToDataTable() 
```

# scientific-computing - Unable to install RTAI-Lab

> ID：12104638
> 
> 赞同：0
> 
> 时间：2012-08-24T07:05:29.070
> 
> 标签：scientific-computing

I hope somebody can help me with a problem that has been driving me crazy.

I am trying to install RTAI-Lab but so far I have not had any success.

The document [https://www.rtai.org/RTAILAB/RTAI-Lab-tutorial.pdf](https://www.rtai.org/RTAILAB/RTAI-Lab-tutorial.pdf) describes the installation procedure, inculding how to patch the kernel. However, all I want to do is to install RTAI-Lab so I can generate C-code from scilab models and then include these in a different project. In that way, I am interested in using scilab like Matlab/Simulink to generate code from a simulation model.

I downloaded the tarball of RTAI 3.9 from [https://www.rtai.org/](https://www.rtai.org/) and extracted it into a folder in my home folder.

There seem to be two ways to install RTAI-lab, but neither has worked for me so far. The extracted tarball has a rtai-lab folder which contains an INSTALL file, giving instruction on how to install RTAI-Lab. The rtai-lab folder has a subfolder called scilab5, which has a makefile to patch scilab 5.2.1 to make rtai-lab

Which instructions should I follow? I have been trying for some time to get this installed, trying several different installation instructions, and keep running into problems that I cannot solve.

I am using Ubuntu 11.4

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:45:43.723

回答我自己的问题。最后我通过安装 RTAI-Lab 解决了这个问题，包括补丁内核。这些说明看起来很复杂，因为它们太长了，但我能够安装 RTAI-Lab 没有任何重大问题。

scilab5 子文件夹对我有用。

# pdftotext - Convert many .pdf to .txt file in a directory

> ID：12104640
> 
> 赞同：1
> 
> 时间：2012-08-24T07:05:34.873
> 
> 标签：pdftotext

I have over a thousand files in a directory which I want to convert to text files. I use a code like the one below to first take out the spaces in the file names and then convert the files to text:

# !/bin/bash

```
 find . -name '*.pdf' | while read file;
   do
    target=`echo "$file" | sed 's/ /_/g'`;
    echo "Renaming '$file' to '$target'";
    mv "$file" "$target";
    chmod 777 *.pdf;
    pdftotext -layout  "$target"  "$target.txt";
   done; 
```

This code however converts a file like **I love you.pdf** to **I_love_you.pdf.txt.** I want to remove the .pdf part of the final file extension.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:09:06.887

我首选的方法是使用替换来修改扩展：

```
pdftotext -layout "$target" "${target/%.pdf/.txt}" 
```

那里的`%`意思是只在字符串的末尾匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T07:16:53.240

使用' `basename`'例如。

```
basename "i_love_you.pdf" ".pdf" returns "i_love_you" 
```

请参阅[如何从 Bash 中的路径字符串中删除文件后缀和路径部分？](https://stackoverflow.com/questions/125281/how-do-i-remove-the-file-suffix-and-path-portion-from-a-path-string-in-bash)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T07:11:47.973

你的问题是这样的：

```
$target = "i_love_you.pdf" 
```

所以

```
$target.txt = "i_love_you.pdf.txt" 
```

请注意，[如果您不向 提供第二个参数`pdftotext`](http://linux.die.net/man/1/pdftotext)，则默认情况下*它将 file.pdf*转换为*file.txt*，这似乎非常适合您的要求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-07T13:43:28.913

另一种选择可能是：

查找 ./ -name "*.pdf" -exec pdftotext {} \;

# java - How to configure content type and content encoding using glassfish server?

> ID：12104643
> 
> 赞同：0
> 
> 时间：2012-08-24T07:05:57.960
> 
> 标签：java, javascript, jakarta-ee, encoding, content-type

I am building a web application using JSF and Spring in eclipse indigo using Glassfish server 3.1.2 . Everything is going great but it is showing me this error in firebug in 2 JavaScript files![enter image description here](../Images/7f5c3ccf4d0b60aef71d687b907cbdfa.png).

When I check in those files I didn't find any illegal character in those files but firebug still showing this.
I have used these files in one of ASP.Net project and they didn't mess there so i checked and matched their content type from both projects then I found that in ASP.Net project these files have

# Content-Type = application/x-javascript

And in my JSP-Spring(JAVA) project there

# Content-Type = text/javascript;charset=ISO-8859-1

is this.So you can see that sames files have changed their content scheme. I found that this scheme can be change by configuration in glassfish server.So I want to change my JS files `content-Type` to same as in ASP type.
If anyone have any other solution then please share because I haven't found any solution other than changing the scheme from glassfish server
Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T20:37:22.913

您看到的那些奇怪字符是 UTF-8 [Byte Order Mark](https://en.wikipedia.org/wiki/Byte_order_mark)。它们是一组特殊的字节，指示文档的编码方式。不幸的是，当解释为[ISO-8859-1](https://en.wikipedia.org/wiki/Windows-1252)时，您最终会遇到问题。有两种方法可以解决这个问题。

第一种方法是将输出字符集更改为 UTF-8。我相信这可以在您的服务器配置中、在您的[web.xml 配置](http://wiki.metawerx.net/wiki/Web.xml.MimeMapping)中或通过在代码中设置 HTTP 请求对象上的字符集来完成；例如：`yourServletRequest.setCharacterEncoding("UTF-8");`

第二种方法是从 Javascript 文件中删除[BOM 。](https://en.wikipedia.org/wiki/Byte_order_mark)您可以通过在[Notepad++](http://notepad-plus-plus.org/)中打开它们，转到*Encoding* > *Convert to ANSI*，然后保存它们来做到这一点。或者，在记事本中打开它们，然后转到*另存为*并确保在保存它们之前将*编码*选项设置为 ANSI。请注意，如果您的 Javascript 文件中有非[ISO-8859-1](https://en.wikipedia.org/wiki/Windows-1252)文本，这可能会导致问题，尽管这不太可能。

# objective-c - 在主线程中使用 performBlock: 在后台加载的托管对象是否安全？

> ID：12104646
> 
> 赞同：0
> 
> 时间：2012-08-24T07:06:10.037
> 
> 标签：objective-c, ios, cocoa-touch, core-data

我正在使用`NSPrivateQueueConcurrencyType`并发类型创建我的托管对象上下文。

我也使用`performBlock:`选择器在后台执行操作。因此，如果我在后台（在 performBlock 中）获取一些对象，那么在主线程中使用生成的托管对象是否安全？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:14:15.890

我不是 100% 确定，但根据我自己的经验，我是这样做的：如果您要*更改*变量属性，请在`performBlock`. 我有一个案例，阅读导致一些奇怪的行为，但总的来说它似乎没问题。如果您想更加安全，`performBlock`请在每次以任何方式触摸托管对象时使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T07:19:51.740

您需要为每个线程使用不同的上下文，如此处所述[iOS Developer - Core data multithreading](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/coredata/Articles/cdConcurrency.html#//apple_ref/doc/uid/TP40003385-SW1)

Core Data描述了一种实现方式[- 每个线程实现一个上下文](https://stackoverflow.com/questions/4264540/grand-central-dispatch-gcd-with-coredata/12039308#12039308)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T07:43:51.717

抱歉，我应该搜索得更好，这正是我的问题和答案： [Core Data's NSPrivateQueueConcurrencyType andsharing objects between threads](https://stackoverflow.com/questions/8637921/core-datas-nsprivatequeueconcurrencytype-and-sharing-objects-between-threads)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T23:42:07.530

`NSManagedObject`作为一般规则，无论您使用什么并发类型，跨线程 共享实例都是不安全的。

但是，您可以使用一个[库](https://github.com/adam-roth/coredata-threadsafe)来使您的上下文和对象实例成为线程安全的。有了它，您几乎可以忽略所有关于确保上下文之间线程隔离的废话，并将精力集中在重要的事情上，例如构建应用程序的实际功能。

# java - java.util.MissingResourceException in Resource bundle

> ID：12104649
> 
> 赞同：0
> 
> 时间：2012-08-24T07:06:19.673
> 
> 标签：java, resourcebundle

Hello All, I am creating a ResourceBundle to load the property files. My file structure looks like

| ---Main

```
 |
    ----ResourceBundleLoad.java 
```

| --Resource

```
 |
    --- resourcebundle.properties 
```

In normal when i put main class and the property file in same package means it retrieves all the property file values. If i separate both files means it's not working. It throws java.util.MissingResourceException exception.

My code is

```
 private static final String BUNDLE_NAME = "ExternalizedLogMessages";
 private static final ResourceBundle RESOURCE_BUNDLE = ResourceBundle.getBundle(BUNDLE_NAME); 
```

Please suggest me how to solve this problem

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T09:30:31.880

我通过使用类加载器来实现这一点。来源是

```
 private static URLClassLoader resourceLoader= null;

/**
 * Initialize class loader.
 */
static{
    ClassLoader currentThreadClassLoader
     = Thread.currentThread().getContextClassLoader();

    //assuming that current path is the project directory
    try {
        resourceLoader
         = new URLClassLoader(new URL[]{new File(".").toURI().toURL()},
                              currentThreadClassLoader);
    } catch (MalformedURLException e) {
        logger.error(e);
    }   
}

/**
 * Properties bundle name.
 */
private static final String BUNDLE_NAME = "resource.ExternalizedLogMessages"; //$NON-NLS-1$

/**
 * Resource bundle object.
 */
private static final ResourceBundle RESOURCE_BUNDLE = ResourceBundle
        .getBundle(BUNDLE_NAME,Locale.US,resourceLoader); 
```

# r - Create a heat map using a subsection a distance object in r

> ID：12104651
> 
> 赞同：0
> 
> 时间：2012-08-24T07:06:30.130
> 
> 标签：r, matrix, distance

I have a distance object

```
x <- matrix(rnorm(100), nrow=5)
d<-dist(x,diag=TRUE,upper=TRUE)

         1        2        3        4        5
1 0.000000 7.683422 8.210562 6.522327 6.091876
2 7.683422 0.000000 8.296771 6.641323 8.088297
3 8.210562 8.296771 0.000000 7.229307 6.133479
4 6.522327 6.641323 7.229307 0.000000 5.668197
5 6.091876 8.088297 6.133479 5.668197 0.000000 
```

I want to create a heat map of only part of the distance matrix so I convert it to a matrix and subsection it i.e.

```
dm<-as.matrix(d)
dm[1:2,4:5]
         4        5
1 6.522327 6.091876
2 6.641323 8.088297 
```

I now want to convert it back to a distance object so I can apply the following function to create a heat map. Any advice on how to either 1) convert the matrix back into a distance object so the function can handle it OR 2) adjust the function so that it create the heat.map without needing D to be a heat map. Thanks.

#

```
# coldiss()
# Color plots of a dissimilarity matrix, without and with ordering
#
# License: GPL-2 
# Author: Francois Gillet, August 2009
#

"coldiss" <- function(D, nc = 40, byrank = TRUE, diag = TRUE)
{
    require(gclus)

    if (max(D)>1) D <- D/max(D)

    if (byrank) {
        spe.color = dmat.color(1-D, cm.colors(nc))
    }
    else {
        spe.color = dmat.color(1-D, byrank=FALSE, cm.colors(nc))
    }

    spe.o = order.single(1-D)
    speo.color = spe.color[spe.o,spe.o]

    op = par(mfrow=c(1,2), pty="s")

    if (diag) {
        plotcolors(spe.color, rlabels=attributes(D)$Labels, 
            main="Dissimilarity Matrix", 
            dlabels=attributes(D)$Labels)
        plotcolors(speo.color, rlabels=attributes(D)$Labels[spe.o], 
            main="Ordered Dissimilarity Matrix", 
            dlabels=attributes(D)$Labels[spe.o])
    }
    else {
        plotcolors(spe.color, rlabels=attributes(D)$Labels, 
            main="Dissimilarity Matrix")
        plotcolors(speo.color, rlabels=attributes(D)$Labels[spe.o], 
            main="Ordered Dissimilarity Matrix")
    }

    par(op)
}

# Usage:
# coldiss(D = dissimilarity.matrix, nc = 4, byrank = TRUE, diag = FALSE)
# If D is not a dissimilarity matrix (max > 1), then D is divided by max(D)

# Example:
# coldiss(spe.dj, nc=9, byrank=F, diag=T)

# byrank= TRUE      equal-sized categories
# byrank= FALSE     equal-length intervals 
```

# jquery - 替换 jquery 字符串中的字符

> ID：12104654
> 
> 赞同：-1
> 
> 时间：2012-08-24T07:06:41.037
> 
> 标签：jquery, format

我有以下一段代码

```
$j('#singleDeviceMac').val().replace("/:/",""); 
```

编写这段代码是为了删除字符串中的所有冒号，如下所示：

00:04:F2:1C:AC:27

但是它似乎不起作用..请帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T07:08:18.473

可能需要全局删除所有这些：

```
$j('#singleDeviceMac').val().replace(/:/g,""); 
```

而且因为它是一个正则表达式，所以应该不加引号。

[**小提琴**](http://jsfiddle.net/JGt3A/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T07:09:41.177

是什么`$j`意思？你有像`$j=jQuery.noConflict()`以前一样的电话吗？否则它应该是这样的

而且您不要将正则表达式放在引号中，而只是斜杠

当然，就像 adaneo 写的那样。你需要 g 修饰符。没有你只会换一种外观

```
jQuery('#singleDeviceMac').val().replace(/:/g,""); 
```

看到这个小提琴
[http://jsfiddle.net/uECG3/](http://jsfiddle.net/uECG3/)

# jquery - Remove element by name/value from json object

> ID：12104656
> 
> 赞同：1
> 
> 时间：2012-08-24T07:07:14.430
> 
> 标签：jquery, json

How can I remove "window3" from below json object str

var json1 = {"panel0": {"window3":{"collapsed":false},"window0":{"collapsed":false}},"panel1": {"window2":{"collapsed":false},"window1":{"collapsed":false}},"floating":{},"orientation": "horizontal"};

Thank you.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T09:26:38.410

In JSONiq it would be:

```
delete json $json1("panel0")("window3") 
```

(see [http://www.zorba-xquery.com/html/demo#KkcoASbF2krqvFgXSwf22RLQJgo=](http://www.zorba-xquery.com/html/demo#KkcoASbF2krqvFgXSwf22RLQJgo=) )

# actionscript-3 - AS3 change stage size - virtual camera

> ID：12104657
> 
> 赞同：0
> 
> 时间：2012-08-24T07:07:17.070
> 
> 标签：actionscript-3, camera, stage, gamecanvas

Edit: Is there any way to adjust the stage size and position from inside flash?

Hey Im making a flashgame right now, its a 2D game with 2charakters. You can move them right now trought the level as you want to, but my problem is, its only one fourth of the whole level displayed, so I thought about making a camera that moves along with the player.

Ussualy I would put all the level content into a container and move the container, but my problem is, that I have 2charakters which can move and the camera has to focus on both of them otherwise the second player cant see what he is doing. So I thought about scaling the background and the characters up at the same time to create a zoom in zoom out effect depending on the distance between the players, but scaling the charakters up is pretty complicated because the charakter does not only consists out of one movieclip.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T11:46:20.113

将关卡内容与玩家一起放入容器中。继续执行游戏所需的所有常规逻辑，而不是移动关卡内容；移动字符。

然后对于每一帧，根据两个玩家的位置调整新的外层容器的比例和位置。

# javascript - Search engines and javascript code on click of a hyperlink

> ID：12104658
> 
> 赞同：1
> 
> 时间：2012-08-24T07:07:23.920
> 
> 标签：javascript, html, ajax, hyperlink, search-engine

I create a HTML link like this.

```
<a href='http://www.mywebsite.com/aPage' onclick='customFunc(); return false;'>Show Info</a> 
```

I'm writing an ajax functionality (in customFunc) when this link is clicked and displaying data which is same as the data shown by the link in HREF tag.

Question: When search engines see my link, will they cache it? Or will they get an impression that I'm trying to do a false magic to get this page cached, and hence ignore it?

Appreciate your suggestions.

* * *

**Edit**: So what I interpret from this Q & A is that, (theoretically) search engines are just bothered about the href, and since it found one in the above link - it will cache this page without any troubles and it won't be worried about the things I do in the onclick JS call.

If anyone has a different opinion, please do add your comments.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:27:30.583

蜘蛛会自动跟随您页面中的每个锚点。如果您想避免这种行为，您必须为要跳过的“a”标签指定**rel="nofollow" 。**您还可以避免使用元标记或 robots.txt 将整个页面编入索引。无论如何，附加的事件侦听器在理论上与搜索引擎无关......我在这里查看了谷歌的 SEO 指南：[http](http://www.google.com/webmasters/docs/search-engine-optimization-starter-guide.pdf) ://www.google.com/webmasters/docs/search-engine-optimization-starter-guide.pdf我没有读到像你这样的场景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T07:28:19.773

虽然像谷歌这样的搜索引擎现在解释了一些 javascript，在这种情况下，它会清楚地看到.`href`而看不到`rel="nofollow"`.

# delphi - UserProperties.Add in outlook2007 gets Invalid Function error

> ID：12104662
> 
> 赞同：2
> 
> 时间：2012-08-24T07:07:34.867
> 
> 标签：delphi, outlook, outlook-redemption

I'm working with Delphi2010 . When I run the code with Outlook 2003 SP3, I get no errors but on another pc with outlook2007 i get an error 'Invalid Function error'.

```
const
  olMailItem = 0;
  olFolderInbox = $00000006;

var  
  Outlook: OleVariant;
  oNameSpace:  OleVariant;
  oFolder: Olevariant;
  oMailItem: Variant;
  oUserProperty: Olevariant;
begin

  try
    Outlook := GetActiveOleObject('Outlook.Application');
  except
    Outlook := CreateOleObject('Outlook.Application');
  end;

  oNameSpace := Outlook.GetNamespace('MAPI') ;
  oFolder:= oNameSpace.GetDefaultFolder(olFolderInbox);

  oMailItem := Outlook.CreateItem(olMailItem);
  ...
  oUserProperty:= oMailItem.UserProperties.Add('RetrieveCode', 1); //--> get error on Outlook2007
  oUserProperty.Value:=ARetrieveCode;
  ...
end; 
```

When I use redemption I get the same error for Outlook2007 Can someone point the right direction to solve this problem?

I catch the error with eurekalog:

```
; ComObj (Line=0 - Offset=0)
; --------------------------
00538469  mov     eax, dword ptr [EOleSysError]
0053846E  call    ComObj
00538473  mov     esi, eax
00538475  cmp     dword ptr [ebp-$04], +$00
00538479  jz      ComObj
0053847B  push    dword ptr [ebp-$04]
0053847E  mov     eax, esi
00538480  jmp     System
00538485  jmp     ComObj
00538487  mov     eax, esi
00538489  call    System                         ; <-- EXCEPTION
0053848E  xor     eax, eax
00538490  pop     edx
00538491  pop     ecx
00538492  pop     ecx
00538493  mov     fs:[eax], edx
00538496  push    $005384B0                      ; '^[‹å]Â.'
0053849B  lea     eax, [ebp-$10]
0053849E  mov     edx, $00000003                 ; ''...
005384A3  call    System
005384A8  ret 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:14:21.923

我已将我的代码从后期绑定更改为早期绑定，以检查我是否收到相同的错误。我将库导入到 OutLook_TLB.pas 并在单元的使用中添加 Outlook_TLB。

```
uses
  ...,
  Outlook_TLB;

function SendOutLookMail ...
var
  ...
  MyOutlook: Outlook_TLB.OutlookApplication;
  MyMailItem: Outlook_TLB.MailItem;
  MyUserProperty: Outlook_TLB.UserProperty;
begin
  ...
  MyOutlook:= Outlook_TLB.CoOutlookApplication.Create;
  MyMailItem:= MyOutlook.CreateItem(olMailItem)as MailItem;
  MyUserProperty:= MyMailItem.UserProperties.Add('RetrieveCode', 1, EmptyParam, EmptyParam) as UserProperty;
  MyUserProperty.Value:= ARetrieveCode;
  MyMailItem.Recipients.Add(AFrom);
  MyMailItem.To_:= ATo;
  MyMailItem.Subject := ASubject+' early/late-bound';
  MyMailItem.Body := ABody;
  MyMailItem.Send;
end; 
```

当我运行代码时，我在装有 Outlook2007 的电脑上没有任何错误。所以早期绑定到对象解决了我的问题。

# jquery - Blackberry Bold 9930 Simulator Page change Error Phonegap

> ID：12104664
> 
> 赞同：0
> 
> 时间：2012-08-24T07:07:46.090
> 
> 标签：jquery, forms, blackberry, cordova

I have got a phonegap application which consists of one page with transitions between different forms within the page. I have compiled and tested the application on a few blackberry devices and it works perfectly. However when I test on either the 9930 simulator of the bold 9930 it refuses to change form it just white screens and and rerenders.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T09:27:49.803

它似乎与我在我的 javascript 中的警报有关，它现在运行良好。

我正在将通知插入状态栏

# c# - 使用 C# linq 解析 XML 节点

> ID：12104665
> 
> 赞同：-2
> 
> 时间：2012-08-24T07:07:45.913
> 
> 标签：c#, xmldocument

我有这样的xml文档：

```
<?xml version="1.0" encoding="utf-8" ?> 
<demographics>     
    <country id="1" value="USA">         
        <state id ="1" value="California">             
             <city>Long Beach</city>             
             <city>Los Angeles</city>             
             <city>San Diego</city>         
        </state>         
        <state id ="2" value="Arizona">             
             <city>Tucson</city>             
             <city>Phoenix</city>             
             <city>Tempe</city>         
        </state>     
   </country>     
   <country id="2" value="Mexico">         
      <state id ="1" value="Baja California">             
         <city>Tijuana</city>             
         <city>Rosarito</city>                     
      </state>     
   </country> 
 </demographics> 
```

如何使用 XML linq 查询从人口统计节点开始选择所有内容，如下所示：

```
var node=from c in xmldocument.Descendants("demographics") ?? 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T07:11:33.857

```
XDocument xDoc = XDocument.Parse(xml);
var demographics =  xDoc
        .Descendants("country")
        .Select(c => new
        {
            Country = c.Attribute("value").Value,
            Id = c.Attribute("id").Value,
            States = c.Descendants("state")
                        .Select(s => new
                        {
                            State = s.Attribute("value").Value,
                            Id = s.Attribute("id").Value,
                            Cities = s.Descendants("city").Select(x => x.Value).ToList()
                        })
                        .ToList()
        })
        .ToList(); 
```

# java - How to run maven compile phase with test-jar dependencies

> ID：12104668
> 
> 赞同：8
> 
> 时间：2012-08-24T07:07:47.777
> 
> 标签：java, testing, maven, dependencies, maven-plugin

The project I'm working on is made of multiple modules, being built with maven. The test code in some modules has dependencies on test code from other modules. These dependencies are declared as below.

In the dependency module:

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jar-plugin</artifactId>
    <version>2.2</version>
    <executions>
        <execution>
            <goals>
                <goal>test-jar</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

In the module which has the dependency on the previous module:

```
<dependency>
    <groupId>${project.groupId}</groupId>
    <artifactId>themodulename</artifactId>
    <version>${project.version}</version>
    <type>test-jar</type>
    <scope>test</scope>
</dependency> 
```

Using this configuration, the maven *install* phase can be executed successfully. But trying to run the *compile* or *test* phase fails, because the test jar file dependency cannot be resolved.

Looking at the *test-jar* goal, it seems to be configured to run by default during the *package* phase, which I think is the cause of the problem.

Then, I tried to force this goal to run during the *compile* phase, by modifying the first config into:

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jar-plugin</artifactId>
    <version>2.2</version>
    <executions>
        <execution>
            <phase>compile</phase>
            <goals>
                <goal>test-jar</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

Looking at the debug logs, I can see that the goal is now executed during the *compile* phase, but also this:

```
[WARNING] JAR will be empty - no content was marked for inclusion! 
```

I tried to configure the includes to **/* and confirmed that the default testClassesDirectory was set to the right one, but I still get the same warning.

I could see that the test-classes folder didn't exist after running the *compile* phase, which seems normal, but even though it exists after running the *test* phase, and it contains files, I still get the "JAR will be empty" warning.

Does anyone have any idea on fixing this configuration so that I can run successfully the *compile* or *test* phase?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-04T02:56:10.143

我认为这些插件配置对你有用。

只需在资源准备和编译中将跳过覆盖为 false 即可。

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-resources-plugin</artifactId>
    <executions>
      <execution>
        <id>default-testResources</id>
        <configuration>
          <skip>false</skip>
        </configuration>
        <phase>process-test-resources</phase>
        <goals>
          <goal>testResources</goal>
        </goals>
      </execution>
    </executions>
  </plugin>
  <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <executions>
      <execution>
        <id>default-testCompile</id>
        <configuration>
          <skip>false</skip>
        </configuration>
        <phase>test-compile</phase>
        <goals>
          <goal>testCompile</goal>
        </goals>
      </execution>
    </executions>
  </plugin>
  <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jar-plugin</artifactId>
    <executions>
      <execution>
        <configuration>
          <skip>false</skip>
        </configuration>
        <goals>
          <goal>test-jar</goal>
        </goals>
      </execution>
    </executions>
  </plugin> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-24T09:48:01.473

您的问题归结为多模块构建中的依赖关系解析。它与测试代码没有特别的关系。

我有这个设置。一个通用模块包含运行时代码以及共享测试代码（测试替身和模拟等）。测试代码被其他模块中的测试使用。它对我们非常有效。

“mvn compile”只编译运行时代码。

在父级（反应堆构建）运行“mvn test-compile”、“mvn test”或“mvn package”一切正常。反应堆可以解决所有问题。

如果您在模块级别运行构建，则该模块的所有依赖项都必须在 repo 中。这意味着您必须事先为每个依赖模块运行“mvn install”。此规则同样适用于常规依赖项和测试依赖项。

如果您希望它会跟随父链接到父模块并向下到其他模块，我不得不让您失望。父链接仅用于继承 pom 中的常用设置，不用于依赖解析。

就我个人而言，我几乎总是从父级构建完整的反应堆。如果我之前在父级别运行过 mvn install 并且我知道其他模块没有更改，我只会构建单个模块。

希望有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T08:02:02.310

我坚信测试应该只是一个模块的一部分。您不应该依赖其他模块中的测试。如果您将测试更新为不同的行为，则很难预测会发生什么。

如果您需要共享通用测试数据或通用测试类，那么最好使用该共享测试源创建一个单独的模块。然后让所有测试都依赖于具有范围测试的共享测试jar。

```
+-- MyProject
+-- common-test-util
|   +-- src
|   |    +-- main
|   |        +-- java
|   +-- pom.xml
+-- moduleA
|   +-- src
|   |    +-- main
|   |    |   +-- java
|   |    +-- test
|   |        +-- java
|   +-- pom.xml
+-- moduleB
|   +-- src
|   |    +-- main
|   |    |   +-- java
|   |    +-- test
|   |        +-- java
|   +-- pom.xml
+-- pom.xml 
```

确保你只依赖`common-test-util`with`<scope>test</scope>`然后你就可以打电话了

```
mvn test 
```

在顶层，所有测试都将运行。

# mysql - MySql查询以获取每个国家/地区为每种目的花费的天数？（获取第一个表中存在的第二个表中所有记录的计数）

> ID：12104672
> 
> 赞同：1
> 
> 时间：2012-08-24T07:08:06.053
> 
> 标签：mysql, sql, database

我有三个表 tl_log、tl_geo_countries、tl_ purpose。我正在尝试获取表“tl_log”中每个国家/地区花费的天数，用于表“tl_ purpose”中的每个目的。我试过下面的mysql查询

```
SELECT t.country_id AS countryID,t.reason_id AS reasonID,count(t.reason_id) AS 
days,c.name AS country, p.purpose AS purpose
FROM `tl_log` AS t
LEFT JOIN tl_geo_countries AS c ON t.country_id=c.id
LEFT JOIN tl_purpose AS p ON t.reason_id=p.id
GROUP BY t.reason_id,t.country_id ORDER BY days DESC 
```

但着陆了。

![在此处输入图像描述](../Images/e871840c2e396b5b138eed84b8f663bc.png)

我无法获得表“tl_log”中不存在的“tl_log”中每个国家/地区的目的计数。任何帮助是极大的赞赏。另外，如果问题难以理解，请告诉我。

**预期输出：**

![在此处输入图像描述](../Images/83c85c90fa38fe2467513a75808e7d1d.png)

下面是这三个表的结构

**tl_log**

![tl_log](../Images/2e5f8b032a73f6aa8ec376c42b34a19c.png)

**tl_geo_countries**

![tl_geo_countries](../Images/8ffa5537df6d71e64e07d12336cb5ff2.png)

**tl_目的**

![tl_目的](../Images/b0e38b5565d1cb9cb73cb6ac990f94f4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:13:12.267

如果你想要所有可能的国家和目的组合，即使是那些没有出现在日志表上的（这些将显示为 0），你可以先做两个表的笛卡尔积（`CROSS`连接），然后`LEFT`加入日志表：

```
SELECT 
    c.id AS countryID,
    p.id AS reasonID,
    COUNT(t.reason_id) AS days,
    c.name AS country, 
    p.purpose AS purpose
FROM 
    tl_geo_countries AS c 
  CROSS JOIN
    tl_purpose AS p 
  LEFT JOIN
    tl_log AS t
      ON  t.country_id = c.id
      AND t.reason_id = p.id
GROUP BY 
    p.id,
    c.id 
ORDER BY 
    days DESC ; 
```

如果您只想要日志表中存在的国家/地区的记录（但仍然是所有可能的原因/目的），则需要稍作修改：

```
SELECT 
    c.id AS countryID,
    p.id AS reasonID,
    COUNT(t.reason_id) AS days,
    c.name AS country, 
    p.purpose AS purpose
FROM 
    ( SELECT DISTINCT
          country_id
      FROM 
          tl_log 
    ) AS dc  
  JOIN
    tl_geo_countries AS c
      ON c.id = dc.country_id
  CROSS JOIN
    tl_purpose AS p 
  LEFT JOIN
    tl_log AS t
      ON  t.country_id = c.id
      AND t.reason_id = p.id
GROUP BY 
    p.id,
    c.id 
ORDER BY 
    days DESC ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T07:20:20.217

`LEFT JOIN`应该替换为`RIGHT JOIN`

# c# - 如何使用 C# 将水晶报表中的可编辑表格导出到 Word 文档？

> ID：12104683
> 
> 赞同：1
> 
> 时间：2012-08-24T07:08:56.153
> 
> 标签：c#, sql, crystal-reports-2008, .doc

我试图导出的表是从 Visual Studio 2008 中的 SQL 数据库导入 Crystal Reports 中的，我在其中使用 C# 制作 Web 应用程序。我正在尝试将其导出到 Word 文档，但要保留表格格式，以便稍后在 MS WORD 中进行编辑。但是，我得到的只是一堆文本框。

我尝试将其导出为 excel 文档，然后复制到 word 中，这很有效，但我需要能够仅通过 C# 代码来做到这一点。

所以问题是：有没有更好的方法可以直接在从水晶报表导出的word文档中编辑表格，或者是否有解决方案如何在word中复制excel表格但只能通过c#代码这样做？

我真的很感激任何帮助！我在谷歌上搜索了几天，但我仍然没有找到合适的解决方案......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T06:55:06.467

我设法将 Excel 文档插入 Word，然后保存。仅数据路径的小问题需要稍微调整，但除此之外它还有效:)

私人无效 ConvertExcelToWordAndAutoSave() {

```
 Excel.Application xlApp;
        Excel.Workbook xlWorkBook;
        Excel.Worksheet xlWorkSheet;
       //TT Excel.Range range;

        object misValue = System.Reflection.Missing.Value;

        DateTime dt = new DateTime();
        dt = DateTime.Now;

            // open excel 
            xlApp = new Excel.ApplicationClass();
            //Change THE LOCATION!
            xlWorkBook = xlApp.Workbooks.Open("C:\\Documents and Settings\\Student\\Desktop\\ExportFiles\\Excel.xls", 0, true, 5, "", "", true, Microsoft.Office.Interop.Excel.XlPlatform.xlWindows, "\t", false, false, 0, true, 1, 0);
            xlWorkSheet=(Excel.Worksheet)xlWorkBook.ActiveSheet;

            // open word 
            object oMissing = System.Reflection.Missing.Value;
            object oEndOfDoc = "\\endofdoc"; /* \endofdoc is a predefined bookmark */

            //Start Word and create a new document.
            Word._Application oWord;
            Word._Document oDoc;

            oWord = new Word.Application();
            oWord.Visible = true;
            oDoc = oWord.Documents.Add(ref oMissing, ref oMissing, ref oMissing, ref oMissing);

            Word.Paragraph oPara1;
            oPara1 = oDoc.Content.Paragraphs.Add(ref oMissing);
            oPara1.Range.Text = "Snimeno na:" + " " + dt+"\n";
            oPara1.Range.Font.Bold = 1;
            oPara1.Format.SpaceAfter = 24;    //24 pt spacing after paragraph.
            oPara1.Range.InsertParagraphAfter();

            xlWorkSheet.get_Range("A1", "N49").Copy(Missing.Value);

            oWord.Selection.Paste();

            oWord.Selection.TypeParagraph();
           //The textBox is for the name of the new Word document
            if (TextBox1.Text == "")
                TextBox1.Text = "Document1";
         object fileName = @"C:\\Documents and Settings\\Student\\Desktop\\ExportFiles\\"+TextBox1.Text+".docx"; 

            oDoc.SaveAs(ref fileName,
            ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing,
            ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing,
            ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing); 
```

# php - 缓存反射对象

> ID：12104690
> 
> 赞同：1
> 
> 时间：2012-08-24T07:09:19.553
> 
> 标签：php, memcached, apc

我正在尝试缓存反射对象。看代码：

```
class A {

        public function __construct() {
        }

}

$memcache = new Memcache();

$memcache->addServer('127.0.0.1', 11211);

$r = new ReflectionClass('A');

$memcache->set('a', $r);

$r = $memcache->get('a');

$a = $r->newInstanceArgs(array()); //here occurred the error 
```

当我运行它产生的脚本时：

```
PHP Fatal error:  ReflectionClass::newInstanceArgs(): 
Internal error: Failed to retrieve the reflection object 
```

我也尝试过使用 APC 以及序列化和反序列化，但没有任何改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:22:33.717

反射对象依赖于实例引用和虚拟属性；其中，是 PHP 内部的，不能被序列化。

```
// Stores only serialized reference to ReflectionClass
$memcache->set('a', $r);
//=> O:15:"ReflectionClass":1:{s:4:"name";s:1:"A";}

// Retrieves only a class instance & 1 attribute
$r = $memcache->get('a');
//=> ReflectionClass { public $name = "A"; } 
```

要从未序列化的类重建 ReflectionClass，请使用给定名称重新初始化该类；

```
$r = $memcache->get('a');
$r = new ReflectionClass($r->name);
$a = $r->newInstanceArgs(array()); 
```

# php - 在 ob_clean() 之后 PHP 字符串丢失

> ID：12104697
> 
> 赞同：0
> 
> 时间：2012-08-24T07:09:46.653
> 
> 标签：php, search, redirect, header

我的网页上运行了一个搜索脚本，并且正在扩展搜索功能。目前，它搜索特定的动态用户字段。现在，如果第一次搜索没有结果，我想执行二次搜索。

假设有人搜索“健康”，搜索 url 输出将是：

" ***.com/** .php?do=getall& **study** =health"

如果没有结果，将运行以下命令：

```
 if ( preg_match( "~/(.*?)$~msi", $_SERVER[ "REQUEST_URI" ], $vv ))
    {
        $string = strstr( $vv[1], 'health=');
        $n_string = explode("=",$string);
        $url = 'http://www.****.com/***.php?do=getall&enjoys=' . $_GET[$n_string[1]];
        ob_clean();
        header('Location:' . $url);
    } 
```

该 url 将被重定向到另一个搜索字段。如果我不包含 ob_clean() 或某些变体，则会出现“标头已发送”错误。

问题是，在运行 ob_clean() 之后，$n_string 中的值丢失了。

感谢您的任何帮助！

- - 编辑 - -

谢谢大家的答案。我找到了解决我的代码中错误的方法。$url = 'http://www. *** *.com/*** .php?do=getall&enjoys=' 。$_GET[$n_string[1]];

本来应该

```
 $url = 'http://www.****.com/***.php?do=getall&enjoys=' . $n_string[1]; 
```

尽管允许我清理使用 ob_clean() 的方法，但您的回答很有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:17:42.650

为什么不先执行 ob_clean() - 在设置字符串之前？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T07:15:36.467

尝试使用 ob_end_clean() 而不是 ob_clean()。ob_clean() 函数只清除最顶层输出缓冲区的内容，但不会关闭它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T07:20:29.313

您应该首先通过调用**ob_start();来启动输出缓冲。**在您加入之前。

请参阅下面的链接 [ob_clean 不会在头文件之前清理输出？](https://stackoverflow.com/questions/8864863/ob-clean-doesnt-clean-the-output-before-the-header-file)

# ajax - p:commandButton 不打开更新窗口

> ID：12104706
> 
> 赞同：0
> 
> 时间：2012-08-24T07:10:50.643
> 
> 标签：ajax, jsf, user-interface, primefaces, jpa-2.0

我在我的 Bean 中生成了一个 exportList：

```
 public void exportExcel() throws WriteException {
    try {
        FacesContext context = FacesContext.getCurrentInstance();
        HttpServletResponse response = (HttpServletResponse) context.getExternalContext().getResponse();
        response.setContentType("application/vnd.ms-excel");
        response.setHeader("Content-Disposition", "attachment; filename=\"hours.xls\";");
        OutputStream out = response.getOutputStream();

        WorkbookSettings ws = new WorkbookSettings();
        ws.setLocale(new Locale("de", "DE"));
        WritableWorkbook workbook = Workbook.createWorkbook(out, ws);
        WritableSheet sheet = workbook.createSheet("Sheet1", 0);
        sheet.addCell(new Label(0, 0, "ID", bold));
        int row = 1;
        for (Hour hour : this.listHours) {
            sheet.addCell(new Label(0, row, String.valueOf(hour.getId())));
            row++;
        }

        SheetFormatter.setOptimalColumnWidth(sheet);
        workbook.write();
        workbook.close();
        response.flushBuffer();
        context.responseComplete();
        context.addMessage(null, new FacesMessage("Liste Exportiert"));
    }
    catch (Exception e) {
    }
} 
```

在我的页面中，我调用 p:commandButton 中的方法

```
 <p:commandButton  value="#{msg.export}" update="growl"
                    immediate="true" action="#{hoursView.exportExcel()}" /> 
```

我的页面不会打开 excel 列表...如果添加属性 ajax="false" 它可以工作，但更新将不会执行...

有关信息，如果这会产生一些差异，我的 Bean 是 SessionScoped

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T11:39:52.257

您的第一个错误是您尝试使用 ajax 下载文件。那是不可能的。Ajax 由 JavaScript 代码执行，由于安全原因，该代码无法强制“另存为”对话和/或将检索到的响应写入本地磁盘文件系统。否则，这将为各种令人讨厌的安全漏洞可能性打开大门。

所以，使用`ajax="false"`是绝对必要的。

您的第二个错误是您试图将不同的响应混合成一个响应。那是不可能的。您只能返回文件下载或 ajax 更新，不能同时返回。要检索两个不同的响应，您基本上需要让客户端发送两个不同的请求。您可以按如下方式处理：

1.  让客户端向支持 bean 发送一个 ajax 请求。
2.  让服务器创建 Excel 文件并将其保存在服务器的临时存储系统中，并生成一个唯一的 URL，以便 servlet 可以访问它。
3.  让服务器发送一个包含消息和 URL 的 ajax 响应。
4.  让客户端显示消息并在 URL 上调用新的 GET 请求。您可以使用`window.location=url;`让 JavaScript 在 URL 上调用新的 GET 请求。

# iphone - 你能自动发送短信吗？

> ID：12104709
> 
> 赞同：3
> 
> 时间：2012-08-24T07:11:11.147
> 
> 标签：iphone, objective-c

我想知道我是否可以在需要的时间自动发送短信。消息的发送时间和接收方手机号码由用户提前设置。如果可能的话，请给我一些代码或链接...谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:13:44.973

您不能使用官方 SDK 执行此操作，因为您必须显示[`MFMessageComposeViewController`](http://developer.apple.com/library/ios/#DOCUMENTATION/MessageUI/Reference/MFMessageComposeViewController_class/Reference/Reference.html).

如果您在服务器端这样做，您将能够做到，但您很可能必须为您发送的 SMS 付费。

# javascript - 为什么我更改innerHTML时firefox会选择文本

> ID：12104711
> 
> 赞同：7
> 
> 时间：2012-08-24T07:11:17.553
> 
> 标签：javascript, html, firefox

```
<div style="float:left;width:100px;height:100px;border:1px solid black;" onclick="this.innerHTML = 'TEST';"></div> 
```

当我单击此框时，Firefox 会选择文本。如果 div 不为空，则不会选择文本。这是为什么？

[演示](http://jsfiddle.net/ZfyFV/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T07:15:09.470

我不知道是什么原因，但有一个简单的解决方案。`&nbsp;`在 div 中放一个。您的代码如下所示：

```
<div style="float:left;width:100px;height:100px;border:1px solid black;" onclick="this.innerHTML = 'TEST';">&nbsp;</div> 
```

[演示](http://jsfiddle.net/vAQfh/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T07:16:06.030

那可能是onclick。您可以尝试超时（免责声明：不建议使用内联代码）：

```
<div id="testDiv" style="float:left;width:100px;height:100px;border:1px solid black;" 
onclick="setTimeout(
  function() { 
    document.getElementById('testDiv').innerHTML = 'TEST';
  }
 ,10)"></div> 
```

**更新：**但不是 onclick - 似乎点击被 Fx 缓存并在超时后仍然执行 - 我将留下答案以表明它不起作用:)

[演示](http://jsfiddle.net/mplungjan/RpFyb/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T07:57:44.890

这可能取决于浏览器内选择处理的工作方式。如果您想象当您“单击”时会在该位置创建一个折叠选择*（所有选择都有一个起点和终点）* - 这个折叠选择可能包含 div 的起点和终点*（从 DOM 角度来看）*。接下来，代码直接在 div 中注入一些内容，将选择终点推送到新文本之后……当浏览器重绘时，文本选择神奇地出现了。添加`&nbsp;`可能意味着 FireFox 在其他地方放置折叠的选择，因此它不会包装 div。

如果您曾经尝试构建自己的基于浏览器的 WYSIWYG 编辑器，您就会知道整个选择过程的编码有多复杂。

您可能可以通过使用 .blur() 方法或一些 FireFox 的实际选择方法来解决同样的问题……尽管该`&nbsp;`方法很简单，但很优雅。

*顺便说一句，发现非常奇怪的错误；）*

# java - 问题 com.google.gdata.util.ResourceNotFoundException: Not Found with Google Analytic

> ID：12104712
> 
> 赞同：1
> 
> 时间：2012-08-24T07:11:21.247
> 
> 标签：java, google-analytics, google-api, google-analytics-api

**问题描述**

我正在使用 Google 分析来分析网站的访问量/跳出率。昨天之前功能工作正常。但现在我收到一个错误

```
com.google.gdata.util.ResourceNotFoundException: Not Found
<!DOCTYPE html>
<html lang=en>
  <meta charset=utf-8>
  <meta name=viewport content="initial-scale=1, minimum-scale=1, width=device-width">
  <title>Error 404 (Not Found)!!1</title>
  <style>
    *{margin:0;padding:0}html,code{font:15px/22px arial,sans-serif}html{background:#fff;color:#222;padding:15px}body{margin:7% auto 0;max-width:390px;min-height:180px;padding:30px 0 15px}* > body{background:url(//www.google.com/images/errors/robot.png) 100% 5px no-repeat;padding-right:205px}p{margin:11px 0 22px;overflow:hidden}ins{color:#777;text-decoration:none}a img{border:0}@media screen and (max-width:772px){body{background:none;margin-top:0;max-width:none;padding-right:0}}
  </style>
  <a href=//www.google.com/><img src=//www.google.com/images/errors/logo_sm.gif alt=Google></a>
  <p><b>404.</b> <ins>That’s an error.</ins>
  <p>The requested URL <code>/analytics/feeds/accounts/default</code> was not found on this server.  <ins>That’s all we know.</ins>

    at com.google.gdata.client.http.HttpGDataRequest.handleErrorResponse(HttpGDataRequest.java:599)
    at com.google.gdata.client.http.GoogleGDataRequest.handleErrorResponse(GoogleGDataRequest.java:564)
    at com.google.gdata.client.http.HttpGDataRequest.checkResponse(HttpGDataRequest.java:560)
    at com.google.gdata.client.http.HttpGDataRequest.execute(HttpGDataRequest.java:538)
    at com.google.gdata.client.http.GoogleGDataRequest.execute(GoogleGDataRequest.java:536)
    at com.google.gdata.client.Service.getFeed(Service.java:1135)
    at com.google.gdata.client.Service.getFeed(Service.java:998)
    at com.google.gdata.client.GoogleService.getFeed(GoogleService.java:645)
    at com.google.gdata.client.Service.getFeed(Service.java:1017)
    at com.report.utils.GoogleAnlytics.getAvailableAccounts(GoogleAnlytics.java:41)
    at com.report.utils.GoogleAnlytics.run(GoogleAnlytics.java:113)
    at com.report.utils.GoogleAnlytics.main(GoogleAnlytics.java:164) 
```

**我做了什么**

我正在使用帐户 URL

```
"https://www.google.com/analytics/feeds/accounts/default" 
```

我在互联网上搜索了这个问题，但找不到任何解决方案。问题是什么，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T12:31:15.693

该提要已被 Google 关闭。请参阅[帐户 Feed 关闭](https://groups.google.com/forum/?fromgroups=#!topic/google-analytics-api-notify/dcdz3LzKnpA)

> [Data Export API v2.3 迁移](https://groups.google.com/forum/#!topic/google-analytics-api-notify/bS0XrfpBlOU/discussion)已完成，API 已关闭。如果您的应用程序尝试访问 Account Feed，它现在将收到 404 错误响应。要解决此错误，请[迁移](https://developers.google.com/analytics/resources/articles/gdata-migration-guide)到[Management API](https://developers.google.com/analytics/devguides/config/mgmt/v3/)以访问配置数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T01:08:30.113

按照此`https://developers.google.com/analytics/devguides/config/mgmt/v2/mgmtJava`更改帐户配置文件网址到`https://www.googleapis.com/analytics/v2.4/management/accounts/~all/webproperties/~all/profiles`，并使用 ManagementFeed / ManagementEntry 而不是 AccountFeed 和 AccountEntry 我已经解决了我的问题:))

# java - jsoup 读取不存在的数据

> ID：12104721
> 
> 赞同：0
> 
> 时间：2012-08-24T07:11:57.570
> 
> 标签：java, jsoup

我有一个正在阅读的 html 页面。如果我在该页面中阅读的格式不存在，我想退出并继续下一页，但这不起作用。

你能告诉我我错过了什么吗

```
try
{
    Document doc = Jsoup.connect(urlget).get();
    Element tables = doc.select("div.itembody");
    websiteaddress= tables.text();
}
catch (IOException ee)
{
} 
```

如果 get 没有 itembody 我看到一个异常：线程“main”中的异常 java.lang.NullPointerException 我希望这个循环继续，而不是程序在出现异常时退出

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T07:25:37.417

[`doc.select`](http://jsoup.org/apidocs/org/jsoup/nodes/Element.html#select%28java.lang.String%29)返回`Elements`not 类型的对象（元素列表）`Element`。如果您的 html 中没有元素与查询匹配，您将获得一个空的元素列表。将您的代码更改为：

```
try
{
    Document doc = Jsoup.connect(urlget).get();
    Elements tables = doc.select("div.itembody");
    if(tables.isEmpty())
        noDivItembodyInHTML();
    else
        websiteaddress = tables.first().text();
}
catch (IOException ee)
{
} 
```

# iphone - UIActivityIndi catorView 仅在加载完成后出现

> ID：12104723
> 
> 赞同：0
> 
> 时间：2012-08-24T07:12:05.743
> 
> 标签：iphone, objective-c, ios, uitableview, uiactivityindicatorview

在我的 UITableView 中，我使用了带有书名、书状态和续订按钮的自定义单元格。但是，图书状态需要一些加载视图互联网，因此需要时间来加载。

尝试过异步加载书籍状态的部分，但这太难了。因此，我试图改用“加载数据”微调器。已经为微调器创建了一个类并在其中实现，`cellForRowAtIndexPath`但微调器仅在我的 UITable 已经完成所有加载时才显示！我不知道在哪里放置这些代码：

```
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
    lVC = [[LoadingViewController alloc] initWithNibName:@"LoadingViewiPad" bundle:nil];
    [self.parentViewController.view addSubview:lVC.view];
} else {
    lVC = [[LoadingViewController alloc] init];
    [self.parentViewController.view addSubview:lVC.view];
} 
```

我已经尝试过将它放入其中，`viewDidLoad`但`viewWillAppear`它似乎不起作用。所有的结果都是当所有东西都已经完成加载时，微调器出现在最后。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
static NSString *CellIdentifier = @"Cell";
UserCustomCell *cell = (UserCustomCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
    [[NSBundle mainBundle] loadNibNamed:@"UserCustomCell" owner:self options:nil];
    cell = userCustomCell;
    self.userCustomCell = nil;
}

if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
    cell.bookTitle.frame = CGRectMake(12, 0, 550, 40);
    cell.renewButton.frame = CGRectMake(600, 14, 68, 24);
}
[cell.renewButton useBlackActionSheetStyle];

cell.bookTitle.text =@"Book Title";

// I place the UIActivityIndicator class here before I do the loading
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
    lVC = [[LoadingViewController alloc] initWithNibName:@"LoadingViewiPad" bundle:nil];
    [self.parentViewController.view addSubview:lVC.view];
} else {
    lVC = [[LoadingViewController alloc] init];
    [self.parentViewController.view addSubview:lVC.view];
}
NSString *reservation = [self noOfRenewalLeft:index];   ###### throw into method to do internet connection and checking
                                                                                                //method will then return NSString "reserved" or "notReserved"

if ([reservation isEqualToString: @"notReserved"]){     //if item not reserved

    if([renewalLeftString isEqualToString: @"0"]){              
        cell.bookStatus.text = @"Reached Max Renewal Limit";
    }
    else{                                                   //item not reserved & able to renew, therefore display renewal left
        cell.bookStatus.text = [NSString stringWithFormat:@"Renewal Left: %@",renewalLeftString];
    }
}
else {
    cell.bookStatus.text = @"Item Reserved/On-Hold";
}

cell.renewButton.tag = index_tag;
return cell; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:45:23.847

事件虽然你没有发布`noOfRenewalLeft`我认为它正在加载到主线程中并阻止它的详细信息。因此，在主线程继续之前（完成下载后），您的活动指示器无法呈现。尝试异步下载和委托。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T07:20:34.217

只需使用默认的 Apple ActivityIndi​​cator 并将其放入 Cell 中即可。你不需要一个类。然后在您完成加载时创建一个通知，或者在加载完成时创建一个将被调用的委托方法。然后，此方法删除微调器并将正确的内容放入单元格中。之后刷新已完成加载的单元格，仅此而已。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T08:50:30.853

创建单独的方法并使用 performselectorinbackground 调用该方法以加载活动指示器，因为从 Internet 加载任何内容作为主线程中的负载，因此一旦下载过程完成，活动指示器就会加载。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T17:33:46.853

最后我所做的是将 UIActivityIndi​​cator 放在 viewDidLoad 方法中，并在 viewDidAppear 中取消它。现在可以了！也谢谢大家的帮助：）

# javascript - 单击复选框显示日期选择器

> ID：12104726
> 
> 赞同：1
> 
> 时间：2012-08-24T07:12:27.580
> 
> 标签：javascript, ajax, asp.net-mvc-3, asp.net-ajax

我有一个表
在表中第一列显示一个复选框，第二列有一个文本框。
现在我想点击一个复选框，应该在该特定行的文本框中启用日期选择器。这应该发生在每行中的每个复选框的点击上。

这是我试过的：

//内部视图：

```
@foreach (var item in Model.Select((x, i) => new { Data = x, Index = i + 1 }))
    {
  <div class="cell"> <input type="checkbox" name="chkbox" class="a"  onclick="checkbox1()" data-id="@item.ID" />
        </div>
 <div class="cell" id="edit2">@Html.DisplayFor(modelItem => item.ExhibEndDate)</div>
 <div class="cell" id="edit1">@Html.TextBox("Enddate", item.ExhibEndDate) </div> 
```

//Javascript代码：

```
function checkbox1() {

    if ($('.a').is(':checked')) {
        $(this).document.getElementById('edit1').style.display = 'block';
        $(this).document.getElementById('edit2').style.display = 'none';           
    }
} 
```

在这里，我尝试隐藏和显示标签，但是通过单击任何行中的复选框，日期选择器仅在第一行的文本框中启用。
请帮助我，我真的无法弄清楚这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:25:37.393

```
@foreach (var item in Model.Select((x, i) => new { Data = x, Index = i + 1 }))
    {
  <div class="cell"> <input type="checkbox" onclick="checkbox(@item.Index)" />
        </div>
 <div class="cell" id="edit-@item.Index">@Html.TextBox("Enddate", item.ExhibEndDate) </div> 
```

JS：

```
function checkbox(index){
     $(this).document.getElementById('edit-' + index).style.display = 'none';
} 
```

像这样的东西。我希望你明白了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T10:22:15.260

如果您可以为行添加一个容器 div，例如

```
<div class="row">
     <div class="cell"> <input type="checkbox" name="chkbox" class="a"  onclick="checkbox1(this)" data-id="@item.ID" />
    </div>
    <div class="cell datePicker" id="edit2">@Html.DisplayFor(modelItem => item.ExhibEndDate)</div>
    <div class="cell dateTxt" id="edit1">@Html.TextBox("Enddate", item.ExhibEndDate) </div>
</div> 
```

然后在jquery中你可以写

```
function checkbox1(chkBox)
{
    $('.datePicker').hide(); 
    $('.dateTxt').show();
    if ($(chkBox).is(':checked')) {
            $(chkBox).parents('.row').children('.datePicker').show();
            $(chkBox).parents('.row').children('.dateTxt').hide();
    }
} 
```

这应该像魅力一样起作用。如果您有相同的 ID，您将无法选择元素。因此，添加可用于查询的类名。

# php - 如何使用php执行jar文件？什么都没发生

> ID：12104727
> 
> 赞同：0
> 
> 时间：2012-08-24T07:12:27.117
> 
> 标签：php, shell, executable-jar

我有一个名为的 jar 文件`MyJar.jar`，它接受 4 个参数。我需要使用 php 脚本执行这个 jar 文件。php 文件和 jar 文件位于同一目录中。
当我尝试使用该`system`功能时，什么都没有发生，没有输出，什么也没有。其他函数（例如`exec`,`passthru`等 ）也是如此。

这就是我尝试运行文件的方式。

```
system('java -jar ./MyJar.jar arg1 arg2 arg3 arg4');
// and also
system('./MyJar.jar arg1 arg2 arg3 arg4');
// and also
exec('./MyJar.jar arg1 arg2 arg3 arg4',$output);
print_r($output);
// nothing works 
```

**更新：**感谢您的回答。但我什么都试过了。我尝试使用我的 jar 文件的绝对路径。我已经尝试了命令中继功能与绝对路径和相对路径的所有可能组合。我尝试使用`chdir`. `pwd`表明我走在正确的道路上。我不知道该怎么办了。

**更新2：**我刚刚发现了一些奇怪的东西。当我使用`system`call 并指定一个返回值时，这个数字`6`是返回的。如果我理解正确`6`意味着该过程已被中止或其他什么。我想知道这意味着什么？

**更新 3：**检查错误日志后，生成了以下错误。有人可以帮我吗？

> 第696行的dl失败错误：失败/usr/lib/jvm/java-6-openjdk-i386/jre/lib/i386/server/libjvm.so，因为/opt/lampp/lib/libgcc_s.so.1：版本`找不到 GCC_4.2.0'（/usr/lib/i386-linux-gnu/libstdc++.so.6 需要）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:15:00.820

检查您的 apache 错误日志，可能执行被阻止并且将 PHP 设置为隐藏错误。

此外，尝试（仅作为实验）使用完整路径 - far java 和 .jar 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T07:19:42.990

检查您的日志后，您可能会发现您的 PHP.ini 正在阻止类似以下命令的命令：

```
disable_functions =exec,passthru,shell_exec,system,proc_open,popen,curl_exec,curl_multi_exec,parse_ini_file,show_source 
```

删除 'system' 和 'exec' 以在 PHP 中允许这些函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T07:16:53.273

你用`include`or从另一个脚本调用你的 php 脚本`require`吗？

对 pwd 进行系统调用以确保正确的工作路径。它应该与jar文件的路径相同

```
system('pwd'); 
```

其他可能失败的方式：不允许 apache/php 用户运行 jar 文件。尝试为 jar 文件设置 0777 (-rwxrwxrwx) 或 0666 (-rw-rw-rw) 的文件权限，看看是否有任何区别。

该文件真的称为 MyJar.jar 吗？情况是否正确？Linux 区分大小写。文件名中是否有空格字符，那么您应该引用/转义文件名。

可能找不到 java 可执行文件的路径。尝试`system('which java')`然后在您的系统调用中使用路径预先调用。还要尝试 jar 文件的绝对路径。

* * *

更新尝试从 PHP 中启动一个 Hello World Java 程序来测试它是否真的可以运行。所以你知道问题不在于 Java 程序本身。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T08:26:38.063

请查看您的域配置是否为您的域启用了安全模式。这将阻止 exec 功能

# jquery - 在使用 jQuery 库 DataTables 时，是否可以对 Ajax 源进行延迟分页？

> ID：12104732
> 
> 赞同：2
> 
> 时间：2012-08-24T07:12:51.580
> 
> 标签：jquery, pagination, datatables, client-side, offset

我正在使用名为[DataTables](http://datatables.net/index "数据表主页")的 jQuery 插件，我想显示一个表格，该表格是从 Ajax 源自动填充的，支持分页。问题是，从服务器上，我只得到了所有结果中的 10 个结果（响应还包含结果总数）。因此，分页看起来像：**显示 10 个结果中的 1 到 10 个。**

我想说：**显示 X 个结果中的 1 到 10 个**，其中 X 是结果的总数。我不能使用任何服务器端处理。所以我的问题是：

**如何配置 DataTables 插件以使用这种类型的分页？**

例如：

```
jQuery(table).dataTable({
  "aoColumnDefs": [...],
  "bProcessing" : true,
  "sAjaxSource" : "...",
  "sAjaxDataProp" : "...",

  "sOffsetParam" : "offset",
  "sNumFoundParam" : "totalResults"
}); 
```

再一次，我只能在客户端工作。

我设法找到了部分回应：

如果我将“bServerSide”标志设置为 TRUE，插件将在服务器响应中查找构建分页系统所需的字段。但是，字段名称仍然是硬编码的，所以我仍然需要一种使用自定义字段名称的方法。此外，偏移量是使用“sEcho”参数发送的（它指示所需的页数）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T19:00:09.323

正如您[在此处](http://datatables.net/usage/server-side)看到的，服务器必须返回两个参数

> int - iTotalRecords - 过滤前的总记录数（即数据库中的记录总数） int - iTotalDisplayRecords - 过滤后的总记录数（即应用过滤后的总记录数 - 而不仅仅是返回的记录数在这个结果集中）

如果服务器不返回这些参数，客户端就无法知道它必须绘制下一个/上一个按钮

# aop - AspectJ & 控制其他 jar 中的调用

> ID：12104735
> 
> 赞同：0
> 
> 时间：2012-08-24T07:13:08.280
> 
> 标签：aop, aspectj

**POST 1：理论问题**

我们使用一些软件，它实际上是一个 Web 模块，它有自己的 Tomcat 和用于控制它的 shell 脚本。它还有一个插件系统，允许您上传具有特定结构的 .jar 文件，以向应用程序添加新功能。

问题：我想控制并实际更改对主系统/应用程序中不同调用的响应（不在我的 jar 中）。我可以使用 AspectJ 来做到这一点吗？为什么或者为什么不？除了更改主应用程序的代码外，其他一般可能性是什么。

* * *

**POST 2：尝试**

我试图这样做（在 Eclipse 中）：

*   在 AspectJ 项目中，我添加了要编织的类所在的 jar 文件（实际上我将它添加到了 INPATH）。
*   将项目导出为“支持 AspectJ 的 Jar”
*   部署第2步导出的jar文件：没有结果。

问题：

1.  在导出的 aspect-jar 中，只有 AspectJ 项目的 .class 文件，没有 INPATH-Jar 的 .class 文件。从导入的 INPATH-jar 中是否应该有其他类？

2.  在导出的 aspect-jar 中，没有带有 aspectj-runtime (aspectj-rt.jar) 的 jar。它应该在那里，或者如何配置虚拟机来拥有它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:43:29.153

是的，为什么不？如果您可以扩展您的问题并解释（也许有一个例子）系统中有哪些参与者和动作，我们可能能够以更具体的方式帮助您。但基本上我认为没有问题。JAR 模块可能是动态加载的，但如果您知道要拦截 Tomcat 应用程序中的哪些调用，您可以轻松地通过重新编织现有类来静态地检测它们，或者在 JVM 启动期间通过 LTW（加载时编织）动态地检测它们. 无需触摸您上传的 JAR 模块，据我了解，这是您想要避免的。

您可能希望通过以下方式编织主应用程序的目标类

*   `execution(<methodsToBeChecked>)`切入点结合
*   `around()`建议。

其他细节取决于您的特定用例、包、类和方法名称、参数等。`around`建议可以执行以下一项或多项操作：

*   确定来电者，
*   检查调用参数，
*   操纵调用参数，
*   使用原始或更改的参数调用原始目标，
*   或者根本不执行原始调用，
*   将原始调用的结果传回给调用者，
*   将结果的操纵版本传回给调用者，
*   将具有正确返回类型的任何合成值传递给调用者，
*   捕获原始调用引发的异常，
*   抛出你自己的异常
*   等等

你的幻想（以及 AspectJ 的一些限制）是极限。:-)

# ios - 将标头信息添加到 NSData

> ID：12104737
> 
> 赞同：1
> 
> 时间：2012-08-24T07:13:19.930
> 
> 标签：ios, image, sockets, nsdata

我想通过 BSD Socket 通过 iOS 设备发送图像。

众所周知，一张图片被分成几个包发送出去，所以接收方需要图片的大小。

所以我想将大小插入图像二进制数据的开头。

```
NSData* image = UIImagePNGRepresentation(screenShot);
NSUInteger len = [image length];
NSMutableData *header = [[NSMutableData alloc] initWithBytes:&len length:sizeof(NSUInteger)];
[header appendData:msg]; 
```

接收方获取 NSData 并解析

```
NSUInteger len;
[header getBytes:&len length:sizeof(NSUInteger)] 
```

我试图插入 int、char 和 NSString，但我从来没有得到正确的大小数字。我的解决方案有什么问题？有更好的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T12:30:03.090

发件人

```
uint32_t len = [image length];
NSLog(@"Len = %u", len);
NSMutableData *header = [NSMutableData dataWithCapacity:sizeof(len) + len];
[header appendBytes:htonl(len) length:sizeof(len)];  // use network order
[header appendData:image]; 
```

接收者

```
uint32_t len;
[header getBytes:&len length:sizeof(uint32_t)];
len = ntohl(len); // network to host
printf("Len = %u\n", len); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T06:37:39.183

我终于解决了 iOS NSData+Base64 类别[http://projectswithlove.com/projects/NSData_Base64.zip的问题](http://projectswithlove.com/projects/NSData_Base64.zip)

# ruby-on-rails - 带导轨的状态机 3.1

> ID：12104739
> 
> 赞同：-1
> 
> 时间：2012-08-24T07:13:26.617
> 
> 标签：ruby-on-rails, ruby-on-rails-3, state-machine

我想实现 mulistep（向导类型）表单进行注册。我使用的是 Rails 3.1。我需要借助状态机来实现，所以我可以很容易地维护它。但我对带有状态机的活动记录感到困惑。请分享对我的工作有帮助的资源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:40:56.083

你可以试一试 [ [https://github.com/pluginaweek/state_machine/](https://github.com/pluginaweek/state_machine/) ]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-16T03:40:53.147

在 Rails 中实现状态机的 gem 很少。

state_machine：它是该类别中下载次数最多的 gem。但不幸的是，不再维护此功能丰富的选项。

aasm：AASM aka 'acts_as_state_machine' 是列表中第二受欢迎的 gem，根据下载次数。AASM 由活跃的社区定期维护，并附带非常好的文档。

您可以查看这篇 Medium 文章了解更多详细信息： [https ://medium.com/geogo-in/state-machines-in-rails-5-45259a4f42da](https://medium.com/geogo-in/state-machines-in-rails-5-45259a4f42da)

# vba - word 2007/2010 中表格和数据的宏

> ID：12104746
> 
> 赞同：0
> 
> 时间：2012-08-24T07:13:58.053
> 
> 标签：vba, ms-word

我需要 2 个宏来帮助我更快地完成工作：

*   一个从文档中删除所有图像（无论在哪里）。
*   第二个将创建一个表并在其下自动插入数据。**（我必须将数千个 doc 文件组合成 word 并在每个插入文件的顶部创建此表）。这可以做到吗？**

前任。

```
"R O M Â N I A
ÎNALTA CURTE DE CASAŢIE ŞI JUSTIŢIE
SECŢIA CIVILĂ ŞI DE PROPRIETATE INTELECTUALĂ **(this is aligned at left or centered, and always has 2 enters after it for inserting the table, only this line may be different but the first to are always the same)**

 Decizia nr. **2570** Dosar nr. **9304/1/2009**
 Şedinţa publică ..." 
```

**所有文件都以此文本开头，只有 asterix 不同**”

我必须为带有“Decizie”、“Dosar”和数字的行创建一个表格，如下所示：

```
"R O M Â N I A
ÎNALTA CURTE DE CASAŢIE ŞI JUSTIŢIE
SECŢIA CIVILĂ ŞI DE PROPRIETATE INTELECTUALĂ

 |Decizia nr. *2570/**2009***                        |                Dosar nr. *9304/1/2009*|  - a table without borders, first column aligned left, second one right, at the first column also added the date from the second one 

 Şedinţa publică ..." 
```

有人可以帮助我使用会自动创建此表的宏吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T09:30:42.667

目前还不清楚你所说的组合是什么意思，表中应该包含什么。如果您想在一个“组合”文档文件中包含多个文档的内容，那么这是第二个宏的快速而肮脏的解决方案：

请注意，在 VBA 编辑器中的工具/参考下，您必须检查可用库下的“Microsoft 脚本运行时”。

```
Dim fs As New FileSystemObject
Dim fo As Folder
Dim fi As File

Sub processDocFiles()
    Dim doc As Document
    Dim thisdoc As Document

    Set thisdoc = ActiveDocument
    ' set the directory
    Set fo = fs.GetFolder("C:\Temp\doc")

    ' iterate through the files
    For Each fi In fo.Files
        ' check the files
        If (fi.Name <> ActiveDocument.Name) And (Left(fi.Name, 1) <> "~") And (Right(fi.Name, 5) = ".docx") Then
            Debug.Print "Processing " & fi.Name
            Set doc = Application.Documents.Open(fi.Path)
            ' doc.Content.InsertAfter (fi.Path)

            thisdoc.Content.InsertAfter (doc.Content)
            thisdoc.Content.InsertAfter ("--------------------------------------------------" & Chr(13) & Chr(10))
            doc.Close
        End If
    Next

End Sub 
```

这会将文件夹中所有 doc 文件的内容复制到一个文档中。另一个是：

```
Sub delImages()
    Dim doc As Document
    Dim thisdoc As Document

    Set thisdoc = ActiveDocument
    ' set the directory
    Set fo = fs.GetFolder("C:\Temp\doc")

    ' iterate through the files
    For Each fi In fo.Files
        ' check the files
        If (fi.Name <> ActiveDocument.Name) And (Left(fi.Name, 1) <> "~") And (Right(fi.Name, 5) = ".docx") Then
            Debug.Print "Processing " & fi.Name
            Set doc = Application.Documents.Open(fi.Path)
            For Each pic In doc.InlineShapes
                pic.Delete
            Next
            doc.Save
            doc.Close
        End If
    Next

End Sub 
```

# android - 通过代码刷新 android 小部件。

> ID：12104747
> 
> 赞同：0
> 
> 时间：2012-08-24T07:13:58.350
> 
> 标签：android, android-widget

我在android中创建了一个小部件。通过单击该小部件，我正在启动一个活动，用户可以从那里选择列表视图中显示的任何项目。我将所选项目存储在共享首选项中。但是在我重新安装小部件之前，用户更改的值不会在小部件中更新。我想通过代码更新小部件。那可能吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:24:10.147

是的当然。在这里您可以找到详细的简单示例，包括代码示例：http: [//developer.android.com/guide/topics/appwidgets/index.html#UpdatingFromTheConfiguration](http://developer.android.com/guide/topics/appwidgets/index.html#UpdatingFromTheConfiguration)

# database - 如何添加参数并执行通用 IDbCommand

> ID：12104748
> 
> 赞同：0
> 
> 时间：2012-08-24T07:14:14.370
> 
> 标签：database, parameters, data-access-layer, business-logic-layer, idbcommand

这是我的问题的详细信息。我创建了一个数据访问层类，它允许我创建与数据库（Odbc、OleDb 和 SqlClient）通信所需的大部分对象。我还创建了一个业务对象处理层类，它大量使用反射来处理我的业务对象的大量任务。除其他外，该类生成我处理 DAL 所需的每个属性/对象（SQL 流、值列表、属性、设置检索值等）。看看下面的代码以获得进一步的解释：

```
 Public Shared Function InvokeParam(Of T)(_classObject As T, _commandType As AdapterCommandType, _arguments As Object()) As Boolean
        Dim s As String = DAL.SCRFL.GetParamStatement(_classObject, _commandType, _arguments)
        'Debug.Print(s)
        Dim hT As Hashtable = DAL.SCRFL.GetProperties(_classObject)
        Using cnn As IDbConnection = DataFactory.CreateConnection()
            Dim cmd As IDbCommand = DataFactory.CreateCommand(s, cnn)
            'cmd.CommandType = CommandType.Text
            cmd.CommandText = s
            For Each k In hT
                Dim param As IDbDataParameter = cmd.CreateParameter()
                'param.DbType = DataFactory.ConvertToDbType(k.value.GetType)

                param.Value = k.value
                param.ParameterName = k.key
                'param.Direction = ParameterDirection.Input

                'Debug.Print("value:={0}, name:={1}", TypeName(k.value), TypeName(k.key))
                Debug.Print("typeMatch:={0}, value:={1}, name:={2}", TypeName(param.Value) = TypeName(k.value), param.Value, param.ParameterName)

                cmd.Parameters.Add(param)
            Next
            If (cmd.ExecuteNonQuery > 0) Then
                Return True
            End If
        End Using
        Return False
    End Function 
```

因此，`DAL.SCRFL.GetParamStatement`返回格式化`INSERT INTO t1 (f1, f2, f3...) values (?, ?, ?...)`为插入的字符串和更新、删除、选择语句的适当字符串。一切都是通过反思完成的。这里没有语法错误。我可以通过直接提供程序类型命令手动执行返回值。该`DAL.SCRFL.GetProperties`方法返回一个哈希表，格式为 key=property (field), value=field value。

现在，我需要为每个属性创建参数并将其添加到我的命令参数中，然后执行它。您将在我的代码中看到这种尝试（我通过循环哈希表为每个属性/值对创建参数）。但是最后我得到了一个例外的`Data type mismatch in criteria expression.`描述。我尝试将`type`属性添加到参数对象`size`等，但均不成功（我评论了它们）。我试图改变`param.Value = k.value`认为`param.Value = If(IsDBNull(k.value), DBNull.Value, k.value)`这可能是问题所在，尽管`k.value`来自我的商务舱并且我故意防止空值。没有任何效果！这是测试；业务类返回值来自`DAL.SCRFL.GetParamStatement`调用：对 OleDb/Access 数据库进行了测试，如您所见，我将备注字段用单引号括起来。我的反射方法读取类属性的属性（我将其设置为表字段名称）并`DAL.SCRFL.GetParamStatement`构建基本的 sql 语句以供插入、更新、删除和选择使用。`AdapterCommandType`是它的内置枚举类型）。

```
INSERT INTO Clinics 
(ClinicId, ClinicName, Phone, Fax, FederalId, DateContracted, Address, City, State, Zip, Inactive, [Memo], DateEntered, EnteredBy, DateModified, ModifiedBy) 
VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) 
```

请注意，我有另一种与此类似的方法，它执行一个 sql 语句 (InvokeSql)，我在其中彻底检查每个属性的值类型，以在我的 sql 语句中构造 property=value 对。在此方法中使用完全限定的 sql 语句`InvokeSql`，方法可以在没有单个警告的情况下工作（粗略地说： sql 语句`cnn As IDbConnection = CreateConnection(), cmd = CreateCommand(_cmdText, cnn), cmd.ExecuteNonQuery()`在哪里`_cmdText`。没有参数，如您所见！）。我提到这一点是为了指出，每当我将参数与通用 IDbCommands 一起使用时，就会出现问题。即使在我的 DataFactory 中，IDbCommand 设置为提供者特定的命令类型（我`DataFactory.CreateCommand(s, cnn)`返回通用 IDbCommand）。

在我的 DAL 开发之前，我手动执行上述所有步骤，尽管所有对象（命令、连接等）都被明确声明为提供程序特定类型。从技术上讲，我正在使用与使用通用类型对象（不是特定于提供者）完全相同的场景。但我无法让它工作，在某个地方，可能，我错过了一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T17:46:52.507

我已经在 codeproject 上发布了这个问题，答案就在那里。 [http://www.codeproject.com/Questions/446516/How-to-add-parameters-and-execute-a-generic-IDbCom](http://www.codeproject.com/Questions/446516/How-to-add-parameters-and-execute-a-generic-IDbCom)

# php - 数组数据排序，如 mysql 查询

> ID：12104755
> 
> 赞同：0
> 
> 时间：2012-08-24T07:14:42.780
> 
> 标签：php, javascript, arrays, sorting

我有如下所示的多维关联数组，并将其打印在 html 表格的页面上，现在我想为表格执行功能，如分页、按列排序。我正在寻找可以完成这项工作的图书馆。

我用谷歌搜索了这个，但找不到足够的想法来完成这项工作。阅读有关 array_multisort 和其他数组函数的信息。

实际上我想运行一次查询并将数据填充到数组中。其他功能类似`order by(sorting)`并`limit(pagination)`通过数组完成，无需重新执行查询。

数组可以包含所有数据类型。

```
[1] => Array
        (
            [trans_date_time] => 30-07-2008 11:35:16
            [transaction_value] => 16.95
            [affiliate_earns] => 0.51
            [programme_name] => Buy Cosmetics
        )

    [2] => Array
        (
            [trans_date_time] => 26-07-2006 13:37:31
            [transaction_value] => 5.99
            [affiliate_earns] => 
            [programme_name] => hmv
        )

    [3] => Array
        (
            [trans_date_time] => 16-08-2006 12:27:21
            [transaction_value] => 6.40
            [affiliate_earns] => 
            [programme_name] => Good
        )

    [0] => Array
        (
            [trans_date_time] => 09-09-2008 09:31:07
            [transaction_value] => 219.14
            [affiliate_earns] => 45.00
            [programme_name] => AIG Home insurance
        )

    [4] => Array
        (
            [trans_date_time] => 06-09-2006 10:05:22
            [transaction_value] => 7.50
            [affiliate_earns] => 
            [programme_name] => Better
        ) 
```

任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:01:43.973

你的代码人在哪里？您可以在从数据库中获取数据的一开始就使用分页。无论如何，您可以从[http://www.scriptforyou.com](http://www.scriptforyou.com)获得关于分页的工作代码。它也在这里：

```
<?php
/*
    Place code to connect to your DB here.
*/
include('config.php');  // include your code to connect to DB.

$tbl_name="";       //your table name
// How many adjacent pages should be shown on each side?
$adjacents = 3;

/* 
   First get total number of rows in data table. 
   If you have a WHERE clause in your query, make sure you mirror it here.
*/
$query = "SELECT COUNT(*) as num FROM $tbl_name";
$total_pages = mysql_fetch_array(mysql_query($query));
$total_pages = $total_pages[num];

/* Setup vars for query. */
$targetpage = "filename.php";   //your file name  (the name of this file)
$limit = 2;                                 //how many items to show per page
$page = $_GET['page'];
if($page) 
    $start = ($page - 1) * $limit;          //first item to display on this page
else
    $start = 0;                             //if no page var is given, set start to 0

/* Get data. */
$sql = "SELECT column_name FROM $tbl_name LIMIT $start, $limit";
$result = mysql_query($sql);

/* Setup page vars for display. */
if ($page == 0) $page = 1;                  //if no page var is given, default to 1.
$prev = $page - 1;                          //previous page is page - 1
$next = $page + 1;                          //next page is page + 1
$lastpage = ceil($total_pages/$limit);      //lastpage is = total pages / items per page, rounded up.
$lpm1 = $lastpage - 1;                      //last page minus 1

/* 
    Now we apply our rules and draw the pagination object. 
    We're actually saving the code to a variable in case we want to draw it more than once.
*/
$pagination = "";
if($lastpage > 1)
{   
    $pagination .= "<div class=\"pagination\">";
    //previous button
    if ($page > 1) 
        $pagination.= "<a href=\"$targetpage?page=$prev\">� previous</a>";
    else
        $pagination.= "<span class=\"disabled\">� previous</span>";   

    //pages 
    if ($lastpage < 7 + ($adjacents * 2))   //not enough pages to bother breaking it up
    {   
        for ($counter = 1; $counter <= $lastpage; $counter++)
        {
            if ($counter == $page)
                $pagination.= "<span class=\"current\">$counter</span>";
            else
                $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
        }
    }
    elseif($lastpage > 5 + ($adjacents * 2))    //enough pages to hide some
    {
        //close to beginning; only hide later pages
        if($page < 1 + ($adjacents * 2))        
        {
            for ($counter = 1; $counter < 4 + ($adjacents * 2); $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<span class=\"current\">$counter</span>";
                else
                    $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
            }
            $pagination.= "...";
            $pagination.= "<a href=\"$targetpage?page=$lpm1\">$lpm1</a>";
            $pagination.= "<a href=\"$targetpage?page=$lastpage\">$lastpage</a>";       
        }
        //in middle; hide some front and some back
        elseif($lastpage - ($adjacents * 2) > $page && $page > ($adjacents * 2))
        {
            $pagination.= "<a href=\"$targetpage?page=1\">1</a>";
            $pagination.= "<a href=\"$targetpage?page=2\">2</a>";
            $pagination.= "...";
            for ($counter = $page - $adjacents; $counter <= $page + $adjacents; $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<span class=\"current\">$counter</span>";
                else
                    $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
            }
            $pagination.= "...";
            $pagination.= "<a href=\"$targetpage?page=$lpm1\">$lpm1</a>";
            $pagination.= "<a href=\"$targetpage?page=$lastpage\">$lastpage</a>";       
        }
        //close to end; only hide early pages
        else
        {
            $pagination.= "<a href=\"$targetpage?page=1\">1</a>";
            $pagination.= "<a href=\"$targetpage?page=2\">2</a>";
            $pagination.= "...";
            for ($counter = $lastpage - (2 + ($adjacents * 2)); $counter <= $lastpage; $counter++)
            {
                if ($counter == $page)
                    $pagination.= "<span class=\"current\">$counter</span>";
                else
                    $pagination.= "<a href=\"$targetpage?page=$counter\">$counter</a>";                 
            }
        }
    }

    //next button
    if ($page < $counter - 1) 
        $pagination.= "<a href=\"$targetpage?page=$next\">next �&lt;/a>";
    else
        $pagination.= "<span class=\"disabled\">next �&lt;/span>";
    $pagination.= "</div>\n";       
}
?>

<?php
    while($row = mysql_fetch_array($result))
    {

    // Your while loop here

    }
?>

<?=$pagination?> 
```

和CSS：

```
div.pagination {
padding: 3px;
margin: 3px;
}

div.pagination a {
padding: 2px 5px 2px 5px;
margin: 2px;
border: 1px solid #AAAADD;

text-decoration: none; /* no underline */
color: #000099;
}
div.pagination a:hover, div.pagination a:active {
border: 1px solid #000099;

color: #000;
}
div.pagination span.current {
padding: 2px 5px 2px 5px;
margin: 2px;
    border: 1px solid #000099;

    font-weight: bold;
    background-color: #000099;
    color: #FFF;
}
div.pagination span.disabled {
    padding: 2px 5px 2px 5px;
    margin: 2px;
    border: 1px solid #EEE;

    color: #DDD;
} 
```

这真的对你有帮助。根据您的需要进行一些更改。快乐编码！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T09:40:54.363

您可能正在寻找 usort 函数：

```
function my_custom_sorter($a, $b) {
    if($a['key_name'] == $b['key_name']) {
        return 0;
    }
    return ($a['key_name'] < $b['key_name']) ? -1 : 1;
}
usort($my_array, 'my_custom_sorter'); 
```

您可以在全局范围内定义一些用于排序的变量，然后在 sorter 函数中使用它来匹配正确的键。

PHP 参考：[http ://uk.php.net/usort](http://uk.php.net/usort)

# android - 如何在安卓应用中使用免费的云数据库？

> ID：12104756
> 
> 赞同：43
> 
> 时间：2012-08-24T07:14:52.840
> 
> 标签：android, cloud

我正在开发一个谷歌地图 android 应用程序，我想在其中使用云中的数据库来保存用户名、密码、GPS 位置等。可以免费实现这一目标吗？如果有任何示例、帖子或教程？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-08-24T07:21:06.260

现在有很多云提供商，提供像 MBaaS（移动后端即服务）这样的解决方案。有些只提供对云数据库的访问权限，有些会为您做用户管理，有些让您在云数据库周围放置代码，还有访问控制、推送通知、分析、集成图像和文件托管等设施。

以下是一些具有“免费层”的提供商（将来可能会更改）：

1.  Firebase (谷歌) - [https://firebase.google.com/](https://firebase.google.com/)
2.  AWS 移动（亚马逊）- [https://aws.amazon.com/mobile/](https://aws.amazon.com/mobile/)
3.  Azure 移动（微软）- [https://azure.microsoft.com/en-in/services/app-service/mobile/](https://azure.microsoft.com/en-in/services/app-service/mobile/)
4.  MongoDB 领域 (MongoDB) - [https://www.mongodb.com/realm](https://www.mongodb.com/realm)
5.  Back4app（流行）- [https://www.back4app.com/](https://www.back4app.com/)

**开源解决方案**：

1.  解析 - [http://parseplatform.org/](http://parseplatform.org/)
2.  Apache 用户网格 - [https://usergrid.apache.org/](https://usergrid.apache.org/)
3.  SupaBase（正在开发中） - [https://supabase.io/](https://supabase.io/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T07:30:53.227

正如 Wingman 所说，Google App Engine 是您的场景的绝佳解决方案。

您可以在此处获取有关 GAE+Android 的一些信息： [https ://developers.google.com/eclipse/docs/appengine_connected_android](https://developers.google.com/eclipse/docs/appengine_connected_android)

从这个 Google IO 2012 会议： [http ://www.youtube.com/watch?v=NU_wNR_UUn4](http://www.youtube.com/watch?v=NU_wNR_UUn4)

# java - 使用 Java 和 Tomcat 保存图片并获取链接

> ID：12104758
> 
> 赞同：0
> 
> 时间：2012-08-24T07:14:55.830
> 
> 标签：java, http, tomcat, hyperlink, image

如何在我的 Java 应用程序中保存图片并获取 HTTP 链接？

然后如何在另一个程序中下载带有此链接的图片？

我正在使用 Apache Tomcat 和 Spring。有没有通用的方法或框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:40:13.220

谷歌搜索这些关键字：

*   java tomcat上传文件
*   tomcat servlet 二进制文件下载

# visual-studio-2010 - 在安装 Visual Studio 2012 之前，如何完全删除 Visual Studio 11 Beta？

> ID：12104763
> 
> 赞同：1
> 
> 时间：2012-08-24T07:15:24.487
> 
> 标签：visual-studio-2010, visual-studio, visual-studio-2012

当我尝试安装 VS2012 时，安装程​​序建议我应该将它安装在旧 VS11Beta 的安装位置 - 这告诉我 VS11Beta 有一些剩余物需要清理。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T18:39:25.043

为了您必须卸载：

1.  Microsoft Visual Studio 11 终极测试版
2.  Microsoft Visual Studio 11 Developer Preview 预清理工具
3.  微软 Silverlight 5 测试版 SDK
4.  微软 Silverlight 4 SDK
5.  Microsoft Web 部署 dbSqlPackage 提供程序 2011 年 11 月
6.  Microsoft Visual Studio 11 SharePoint 开发人员工具测试版 enu 语言包
7.  Microsoft SQL Server 数据工具，RC0 - zh-CN
8.  Microsoft SQL Server 2012 管理对象 RC0 (x64)
9.  Microsoft SQL Server 2012 管理对象 RC0
10.  适用于 SQL Server 2012 RC0 (x64) 的 Microsoft System CLR 类型
11.  适用于 SQL Server 2012 RC0 的 Microsoft System CLR 类型
12.  Microsoft SQL Server Compact 4.0 SP1 ENU CTP1
13.  Microsoft SQL Server 2012 Express LocalDB RC0
14.  Microsoft SQL Server 数据工具构建实用程序 2012 年 3 月
15.  Microsoft SQL Server 2012 Transact-SQL 语言服务 RC0
16.  Microsoft SQL Server 2012 命令行实用程序 RC0
17.  Microsoft SQL Server 2012 本机客户端 RC0
18.  Microsoft SQL Server 2012 数据层应用程序框架
19.  Microsoft SQL Server 2012 Transact-SQL 编译器服务 RC0
20.  Microsoft SQL Server 2012 Transact-SQL ScriptDom RC0 SSDT RC0 先决条件
21.  适用于 Office 运行时 (x64) 的 Microsoft Visual Studio 2010 工具
22.  适用于 Office 运行时 (x86) 的 Microsoft Visual Studio 2010 工具
23.  微软 ASP.NET MVC 3
24.  Microsoft ASP.NET 网页 WCF RIA 服务 V1.0 SP2
25.  微软网络平台安装程序 4.0
26.  IIS 7.5 速成版
27.  微软网络部署 3.0
28.  Microsoft .NET Framework 4.5 Developer Beta 多目标包
29.  Microsoft .NET Framework 4 多目标包

这是我从微软使用的完整参考：

[http://support.microsoft.com/kb/2710678](http://support.microsoft.com/kb/2710678)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T07:15:24.487

这是在 VS11Beta 之后进行清理的方法

*   首先 - 从运行菜单 (Win+R) 打开“appwiz.cpl”。

*   从列表中删除所有出现的“Visual Studio 11 Beta*”

*   转到您的用户文件夹 %USERPROFILE%\Documents 并删除“Visual Studio 11 Beta”文件夹

*   然后再次打开“appwiz.cpl”，并删除 .NET Framework 4.5 Beta 事件。

*   转到 Program Files 目标，您安装了 VS11Beta，然后删除“Visual Studio 11 Beta”文件夹

*   重启你的机器

* * *

*   如果您的 VS2010 现在在启动时提示您“未知错误”，您必须单独安装 VS2012（包括 .Net Framework 4.5）或 .Net Framework 4.5。

*   如果您的 VS2010 现在提示您“环境包窗口管理未正确加载”，您需要修复您的 VS2010 安装。

# .net - NET40-RequiresCastle 和 NET40 版本的 Moq 有什么区别？

> ID：12104769
> 
> 赞同：2
> 
> 时间：2012-08-24T07:15:34.147
> 
> 标签：.net, moq, castle

在 moq 的分发中，有 NET40-RequiresCastle 和 NET40 两个版本。NET40-RequiresCastle 的大小似乎比 NET40 小得多，但在运行时需要 Castle。区别仅仅是Castle嵌入在NET40版本中，还是在性能、使用等方面会有区别？

是否有理由使用 NET40-RequiresCastle 而不是 NET40？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T07:23:37.073

MoQ 使用 Castle DynamicProxy 进行代理生成。为了简化部署，dll 被“IL 合并”到不需要 Castle 库的可再发行组件中。如果您已经在项目中使用 DynamicProxy 库，您可能会使用 RequireCastle 发行版，以避免两次部署 dll。如果您不在项目中的其他地方使用 Castle，您可能更喜欢合并后的版本，因为您在部署时需要注意的 dll 较少。

# java - 从 XML 解析数据的 Groovy 语法

> ID：12104771
> 
> 赞同：0
> 
> 时间：2012-08-24T07:15:49.993
> 
> 标签：java, parsing, xpath, groovy, soapui

我需要使用 groovy 脚本从下面的 xml 文件中获取值 3。我正在从 SOAPUI 进行测试

```
 <ParamId>3</ParamId> 
```

谁能分享我获取价值的语法？我尝试了以下代码。但我认为我需要迭代到第三个参数 ..

```
def msgTxt = response.getDomNode("//ns2:ParamId").getLastChild().getNodeValue()  

<RequestParams>
            <Param>
               <ParamId>1</ParamId>
               <ParamName>Name1</ParamName>
               <ParamType>String</ParamType>
               <ParamValue>value1</ParamValue>
            </Param>
            <Param>
               <ParamId>2</ParamId>
               <ParamName>Name2</ParamName>
               <ParamType>String</ParamType>
               <ParamValue>value2</ParamValue>
            </Param>
            <Param>
               <ParamId>3</ParamId>
               <ParamName>Name3</ParamName>
               <ParamType>String</ParamType>
               <ParamValue>2</ParamValue>
            </Param>
</RequestParams> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T09:01:34.667

如果您使用的是 groovy 脚本，那么这将起作用。

`parse.groovy`

```
import org.apache.maven.artifact.ant.shaded.xml.XmlStreamReader
/**
 * @author maba, 2012-08-24
 */

def root = new XmlSlurper().parse(new XmlStreamReader(new File('path/to/data', 'data.xml')))
def msgText = root.Param[2].ParamId.text() 
```

而且我认为您可以这样做而不是从文件中读取：

```
def root = new XmlSlurper().parseText(response.xmlText()) 
```

但我不确定是什么类型`response`。在这里，我假设一个[`XmlTokenSource`](http://xmlbeans.apache.org/docs/2.0.0/reference/org/apache/xmlbeans/XmlTokenSource.html)from `XmlBeans`。

* * *

这应该适用于 SoapUI `XmlHolder`：

```
def root = new XmlSlurper().parseText(response.getXml()) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T08:51:02.240

查看 Groovy[文档页面中的 XmlParser 或 XmlSlurper 示例](http://groovy.codehaus.org/Processing+XML)

# php - 无法在 PHP 中使用 COM 打开 Word 文档

> ID：12104775
> 
> 赞同：8
> 
> 时间：2012-08-24T07:16:01.130
> 
> 标签：php, com, ms-word

我正在尝试使用 COM 函数打开并读取带有 PHO 的 Word 文档的内容。但是每当我尝试阅读内容时，它都会给我以下错误：

> 致命错误：未捕获的异常“com_exception”，带有消息“**来源：** Microsoft Word
> **描述：**此命令不可用，因为没有打开文档。”

我有以下代码：

```
 $word = new \COM ( "word.application" ) or die ( "Could not initialise MS Word object." );
    $word->Documents->Open ( realpath("test.doc" ) );

    // Extract content.
    $content = (string) $word->ActiveDocument->Content;

    echo $content;

    $word->ActiveDocument->Close(false);

    $word->Quit();
    $word = null;
    unset($word); 
```

我 100% 确定 Word 文档存在。我已经检查过很多次了。该文件的权限设置为`Full Control`. 所以也不能这样。

* * *

我还阅读了关于 php.net 的评论。它说 IIS 引起了问题（我正在运行）。他的解决方案是这样的：

*   执行“dcomcnfg”
*   打开组件服务 > 计算机 > 我的电脑 > DCOM 配置
*   搜索 Microsoft Office Word 97-2003 文档（它会像这样翻译成您的语言，所以花点时间搜索一下）**<-- 卡在这个文档上，找不到任何名为“Microsoft Office... "**
*   右键单击它并打开属性
*   选择“身份”选项卡
*   通常这被设置为“启动用户”。您必须将其更改为“交互式用户”或您选择的管理员用户。
*   应用这些新设置并测试您的 COM 应用程序。它现在应该可以正常工作了。

无论如何，我还没有得到这个工作。任何人都知道如何解决这个错误......？？？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T07:44:49.440

我刚刚找到了解决方案。我谈到的步骤：

*   执行“dcomcnfg”
*   打开组件服务 > 计算机 > 我的电脑 > DCOM 配置
*   搜索 Microsoft Office Word 97-2003 文档（它将是...
*   ETC..

这样可行。但就像我说的，我找不到`Microsoft Office Word 97-2003`配置。所以这就是我为了让它出现在列表中所做的。

1.  开始
2.  跑
3.  mmc -32
4.  文件
5.  添加删除管理单元
6.  组件服务
7.  添加
8.  好的
9.  控制台根
10.  组件服务
11.  电脑
12.  我的电脑
13.  DCOM 配置
14.  微软 Excel 应用程序

所以现在你应该可以按照我第一篇文章中的步骤进行操作了。然后 PHP 应该能够毫无问题地阅读文档。

# twitter - Titanium 中的 Twitter 消息发布

> ID：12104779
> 
> 赞同：0
> 
> 时间：2012-08-24T07:16:08.443
> 
> 标签：twitter, titanium, message, tweets

我通过搜索获得了一些代码，这对我在 tableview 中显示我的推文有很大帮助，直到现在还不错。我想向它添加一项功能，用户可以从同一个应用程序发布消息。

所以我只是按照自己的方式修改了代码。当我点击请求时，我的结果状态为成功，但消息没有发布到我的墙上。我拥有所有密钥并获得访问令牌。

```
 var client = Twitter({
      consumerKey: "have Key ",
      consumerSecret: "have Key",
      accessTokenKey: accessTokenKey, 
      accessTokenSecret: accessTokenSecret
    });

client.request("1/statuses/update.json", {status:'TEST'}, 'GET', function(e) {
              if (e.success) {alert(e.success);

          } else  {
            alert(e.error);
          } 
```

**更新：**我已经通过 Twitter Dev API 这是带有必需参数“status”的 URL [http://api.twitter.com/1/statuses/update.format 。](http://api.twitter.com/1/statuses/update.format)我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T06:01:15.820

您正在发送 GET 请求以更新状态，而 twitter api 需要它是 POST 请求。

尝试类似的东西

```
client.request( "1/statuses/update.json", {status:'TEST'}, 'POST', function(e) {
          if (e.success)
          {
             alert(e.success);
          } else  {
             alert(e.error);
          } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T15:22:57.600

查看此应用程序：[https ://github.com/appcelerator-titans/tweetanium](https://github.com/appcelerator-titans/tweetanium)

据我了解，这是一个使用 Titanium Mobile 创建的 twitter 应用程序的完整示例。也许你可以按照这里的逻辑，看看你需要调整的地方。

# javascript - JavaScript - String.newProperty 与 String.prototype.newProperty？

> ID：12104780
> 
> 赞同：2
> 
> 时间：2012-08-24T07:16:16.030
> 
> 标签：javascript, prototype

在[http://jsfiddle.net/javascriptenlightenment/QvbDw/](http://jsfiddle.net/javascriptenlightenment/QvbDw/)的代码片段中，作者为内置的 String 对象构造函数增加了 2 个新属性——一个数组属性和一个函数属性。

我注意到对于新的数组属性，他这样做了：

```
String.newArrayProperty = [];
// Q1: Why not String.prototype.newArrayProperty = []; ? 
```

但是对于新的函数属性，他是这样做的：

```
String.prototype.newFunctionProperty = function() {...};
// Q2: Why not String.newFunctionProperty = function() {...}; ? 
```

String.newProperty 和 String.prototype.newProperty 有什么区别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T07:20:23.533

`String.newProperty`向本机函数添加一个新`String`属性，但该属性绝不会被它生成的字符串继承，同时`String.prototype.newProperty`将该新属性添加到它生成的所有字符串，但不会添加到本机函数本身。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T07:19:14.570

`String.property`只是`propery`将`String`类作为对象广告，`String.prototype.property`将此属性添加到该类的所有实例。

```
function F() {
}

F.p1 = function () { console.log('F.p1'); } ;
F.prototype.p2 = function () { console.log('F.prototype.p2'); } ;

F.p1(); // 'F.p1'
F.p2(); // error
new F().p1(); // error
new F().p2(); // 'F.prototype.p2' 
```

还请看：

1.  [JavaScript .prototype 是如何工作的？](https://stackoverflow.com/questions/572897/how-does-javascript-prototype-work)
2.  [http://www.w3schools.com/jsref/jsref_prototype_math.asp](http://www.w3schools.com/jsref/jsref_prototype_math.asp)
3.  [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/prototype](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/prototype)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T08:10:27.903

分配给原型的`String`方法可以应用于 String 的所有实例。分配给`String`构造函数的方法必须作为带有字符串作为参数的*[静态方法调用。](http://en.wikipedia.org/wiki/Method_%28computer_programming%29#Static_methods)*如果方法在原型中，则在其中，`this`指的是字符串实例。

所以：

```
String.prototype.insertLineNr = function(nr){return (nr||1) + ': ' +this;};
//                                                                  ^instance
String.insertLineNo = function(str,nr){return (nr||1) + ': ' +str;};
var str = 'Some line to be numbered';
//apply to instance
console.log(str.insertLineNr(5);        //=> '5: Some line to be numbered'
//can't apply direct String method to instance 
console.log(str.insertLineNo(str,5));   //=> TypeError
//Run String method 
console.log(String.insertLineNo(str,5); //=> '5: Some line to be numbered' 
```

如果方法名称相同，则可以两全其美：

```
function insrtNr(str,nr){ return (nr||1) + ': ' + str || this;};
String.insertLineNr = insrtNr;
String.prototype.insertLineNr = insrtNr; 
```

# objective-c - 裁剪核心图像问题

> ID：12104784
> 
> 赞同：0
> 
> 时间：2012-08-24T07:16:36.593
> 
> 标签：objective-c, opengl, crop, core-image

我正在使用 OpenGL 将图像绘制到屏幕上。由于缩放能力，我的图像有时会通过 z 轴平移。例如，用户有尺寸为 3200x2000 的图像，他将其缩小，因为它不适合屏幕。缩小后，他想裁剪部分图像。我注册选择矩形。然后使用左下角坐标和右上角和左下角之间的距离。坐标是这样使用的：

```
//I get one coordinate from mouse down, and then last point from moueDragged events. 
float firstx = mouseDownFirst.x * (zoomSlider.floatValue * (-10));
float firsty = mouseDownFirst.y * (zoomSlider.floatValue * (-10));
float lastx = mouseDragLast.x * (zoomSlider.floatValue * (-10));
float lasty = mouseDragLast.y * (zoomSlider.floatValue * (-10));

//Then I draw selection rectangle to screen.
glBegin(GL_QUADS);
glVertex2f(firstx, firsty);
glVertex2f(firstx, lasty);
glVertex2f(lastx, lasty);
glVertex2f(lastx, firsty);
glEnd();
glFlush();

//and do crop. Because image is drawn to framebuffer, I will read frame buffer info and make image from it. Coordinates are being translated back to normal
firstx = firstx / (zoomSlider.floatValue * (-10));
firsty = firsty / (zoomSlider.floatValue * (-10))
lastx = lastx / (zoomSlider.floatValue * (-10));
lasty = lasty / (zoomSlider.floatValue * (-10));

glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, framebuffer);
glReadPixels(0, 0, width, height, GL_RGB, GL_UNSIGNED_BYTE, [tempRep bitmapData]);
glBindFramebufferEXT(GL_FRAMEBUFFER_EXT, 0);

CIImage *firstImage = [[CIImage alloc] initWithBitmapImageRep:tempRep];

//cropping image to rect and getting result image
float distanceWidth = lastx - firstx;
float distanceHeight = lasty - firsty;

CIImage* secondImage = [firstImage imageByCroppingToRect:CGRectMake(firstx, firsty, distanceWidth, distanceHeight)];

CIFilter* transform = [CIFilter filterWithName:@"CIAffineTransform"];
NSAffineTransform* affineTransform = [NSAffineTransform transform];
[affineTransform translateXBy:-firstx yBy:-firsty];
[transform setValue:affineTransform forKey:@"inputTransform"];
[transform setValue:secondImage forKey:@"inputImage"];
CIImage* lastImage = [transform valueForKey:@"outputImage"]; 
```

但它返回不良形象。不是我选择的。例如：

选择 ![在此处输入图像描述](../Images/39972ba9fe8c10580aa54d9031ddef5a.png)

裁剪图像
![在此处输入图像描述](../Images/bd05fc043306a72a38b2d049cc6e0f29.png)

# sql-server - 尝试将 SSIS 包部署到远程服务器时出现权限提升错误

> ID：12104785
> 
> 赞同：2
> 
> 时间：2012-08-24T07:16:37.893
> 
> 标签：sql-server, ssis

这是一个带有 SQL 2008 的新登台服务器。我对 SSIS 不太熟悉，因此尝试部署几个包。因此，我在 BIDS 中执行以下操作..这可能是典型的：

1.  右键单击我的解决方案，转到属性，然后转到部署实用程序选项卡
2.  将 CreateDeploymentUtility 更改为 true
3.  在我的机器上本地查找 .SSISDeploymentManifest 文件
4.  运行它并尝试对客户的远程服务器执行 SQL Server 部署（我们正在运行 vpn 来实现它）
5.  我输入了完全限定的远程服务器的名称、我的 windows auth 或 SQL 帐户（我尝试了两种方式）
6.  现在尝试单击“包路径”并获取以下信息：

    ## TITLE: 包安装向导

    枚举包时发生 OLE DB 错误 0x80040E09（对象“sp_ssis_listpackages”、数据库“msdb”、架构“dbo”的执行权限被拒绝。）。发出一条 SQL 语句但失败。

    * * *

    附加信息：

    枚举包时发生 OLE DB 错误 0x80040E09（对象“sp_ssis_listpackages”、数据库“msdb”、架构“dbo”的执行权限被拒绝。）。发出一条 SQL 语句但失败。

    * * *

    纽扣：

    ## 好的

那我该怎么办？我如何以管理员身份运行它以克服这个愚蠢的提升权限安全错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:55:38.150

您应该将您的 windows / sql 帐户添加到`sysadmin`角色。

在 SQL Server Management Studio 中，转到 Security -> Server Roles 并双击`sysadmin`。添加您的登录名，当您重试时它应该可以工作。

# c# - 使用逗号分隔问题将数据导出到 C# 中的 excel

> ID：12104786
> 
> 赞同：0
> 
> 时间：2012-08-24T07:16:47.063
> 
> 标签：c#, excel

问题不在于导出本身，而是它如何用逗号分隔字段，并且我在字段中有逗号。一切正常，直到它到达字符串包含逗号的最后一个字段，它将它分隔

我的代码：

```
 foreach (var item in jobSortedReportData)
  {
       sb.Append("\"").Append(item.Title).Append("\",\"").Append(item.Total).Append("\",\"").Append(item.Week6).Append("\",\"").Append(item.Week5).Append("\",\"").Append(item.Week4).Append("\",\"").Append(item.Week3).Append("\",\"").Append(item.Week2).Append("\",").Append(item.Week1).Append(Environment.NewLine);                     
  }

  byte[] textBytes2 = Encoding.UTF8.GetBytes(sb.ToString()); 
```

这产生的输出：

```
 Number 1 Job Search    0   **Bathroom Fitter, Plumbing: 100**  Carpenter, Joinery: 99  Carpenter, Joinery: 81  Carpenter, Joinery: 209 Electrician, Domestic Electrical: 495   **Bathroom Fitter    Plumbing: 112**
 Number 2 Job Search    0   Carpenter, Joinery: 97  Bathroom Fitter, Plumbing: 99   Bathroom Fitter, Plumbing: 79   Bathroom Fitter, Plumbing: 150  Bathroom Fitter, Plumbing: 453  Builder  Window Installation: 75
 Number 3 Job Search    0   Builder, Window Installation: 85    Building Contractor, Kitchen Fitting: 97    Plumber, Bathroom Fitting: 51   Builder, Window Installation: 134   Heating Engineer, Gas Installation: 451 Bathroom Fitter  Bathroom Fitting: 74 
```

原始视图：

```
"Number 3 Job Search","0","Builder, Window Installation: 85","Building Contractor, Kitchen     Fitting: 97","Plumber, Bathroom Fitting: 51","Builder, Window Installation: 134","Heating Engineer, Gas Installation: 451",Bathroom Fitter, Bathroom Fitting: 74 
"Number 1 Tradesmen Search","0","Painter & Decorator: 316","Painter & Decorator: 229","Painter & Decorator: 146","Builder: 324","TV Aerials & In-home Entertainment Installer: 1378",Electrician: 247 
"Number 2 Tradesmen Search","0","Builder: 171","Builder: 191","Plumber: 114","Plumber: 295","Builder: 551",Builder: 205 
"Number 3 Tradesmen Search","0","Plumber: 123","Plumber: 160","Builder: 108","Painter & Decorator: 231","Domestic Electrical: 495",Painter & Decorator: 160 
```

在上面，`"Bathroom Fitter, Plumbing: 100"`在第 3 列中包含 a`,`但它将整个字符串保留在一个 excel 字段中。当谈到最后一列时， *Fitter*和*Plumbing*之间的字符串中`"Bathroom Fitter Plumbing: 112"`有 a ，所以现在发生的是 this ，被视为分隔符，因此在 excel 中将其拆分为**两个**单元格，因此我在一个单元格和下一个。整个字符串应该在一个单元格中。它只在最后一列这样做？请帮我纠正这个。`,`****`Bathroom Fitter``Plumbing:112`****

 ****谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:30:00.690

如果没有原始 csv，很难看到它，但请记住，如果 CSV 字段包含逗号以防止它认为它是一列，则需要使用文本限定符。因此，原始 CSV 应如下所示以获得一致的结果：

“浴室装配工，水暖：100”，下一栏，“带逗号的栏”。

编辑：现在我已经看到原始代码不应该看起来像这样吗？我认为您没有在最后一个字段上添加文本限定符：

```
...Append(item.Week2).Append("\",\"").Append(item.Week1).Append("\"").Append(Environment.NewLine); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T07:29:09.967

CSV 输出是每个人似乎都在自己推出的那些东西之一，但后来不可避免地发现他们忘记了一些案例，并希望他们只是抓住一个图书馆来为他们做。CsvHelper (https://github.com/JoshClose/CsvHelper) 是我使用的一个。我相信这是一个非常常见的解决方案。****

# sql - 在两个sql表之间搜索

> ID：12104787
> 
> 赞同：0
> 
> 时间：2012-08-24T07:16:51.300
> 
> 标签：sql, oracle-sqldeveloper

我有两个表`'Account_Position'`并`'Account'`与一个列链接`'Account_id'`。

对于表中的一个条目，我们`'Account_id'`在表`'Account'`中有多个条目`'Account_Position'`。

我想根据`'Account'`表格中出现的次数来显示表格的 所有记录`'Account_Position'`。

我怎么能证明这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T07:19:32.553

试试这个，

```
-- if you are using MSSQL, this query won't work because of 
-- asterisk in the select clause (you need to specify all the fields)
-- in the group by clause
-- (but it will work on MySQL)
SELECT  a.*, COUNT(b.Account_ID) totalOccurence   
FROM    Account a
            LEFT JOIN Account_Position b
                ON a.Account_ID = b.Account_ID
GROUP BY a.Account_ID 
```

或者

```
-- alternatively, you can use this.
SELECT  c.*
FROM    Account c
        (               
            SELECT  a.Account_ID, COUNT(b.Account_ID) totalOccurence
            FROM    Account a
                        LEFT JOIN Account_Position b
                            ON a.Account_ID = b.Account_ID
            GROUP BY a.Account_ID
        ) d ON c.Account_ID = d.Account_ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T11:28:08.227

考虑2张桌子

表 1 （包含多个 id 的一行）
col - nchar(10) - Checked
id - int - Checked

表 2
id - int - 检查
col1 - nchar(50) - 检查
col2 - nchar(50) - 检查
col3 - nchar(50) - 检查

试试下面的查询

选择

*

从

```
Table2

inner join(

    select

        id as id, count(id) as cnt

    from

        Table1

    group by id

)A on

Table2.id = A.id 
```

# ruby-on-rails - 在 Rails 上切换复选框选中和未选中的 ruby

> ID：12104793
> 
> 赞同：0
> 
> 时间：2012-08-24T07:17:03.510
> 
> 标签：ruby-on-rails, ruby, toggle

我在 cofeescript 中有一个代码，可以在我的列表中创建一个全选功能：在我看来：

= submit_tag "检查所有", :onclick => "checkUncheckAll(this, message_ids[])"

js.咖啡：

toggle = (source) -> checkboxes = document.getElementsByName("user_message_ids[]") for i of checkboxes[i].checked = source.checked

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:46:43.223

首先，使用`button_tag`代替`submit_tag`. 因为`submit_tag`添加了一个`type="submit"`实际上是提交表单的内容。

其次，这可能会帮助您通过 cofeescript 处理复选框 [[使用 CoffeeScript 以编程方式检查复选框](https://stackoverflow.com/questions/11981577/programmatically-check-a-checkbox-using-coffeescript)]

# java - Java中的多线程

> ID：12104799
> 
> 赞同：0
> 
> 时间：2012-08-24T07:17:30.190
> 
> 标签：java, multithreading

这是我的代码

```
public class ThreadLearn{
private static class Check implements Runnable{
    public void run(){

        System.out.printf("\nInCheck %s", Thread.currentThread().getName());
    }
}

public static void main(String[] args){

   Thread t;
   int i=0;
   while(i<2){
      t = new Thread(new GetData());
      t.start();
      System.out.printf("\n%s: ", t.getName());
      i++;
   }

}

} 
```

输出是：

```
InRun Thread-0
Thread-0:
Thread-1:
InRun Thread-1 
```

我有两个问题：

1.  输出不应该是

    InRun 线程-0

    线程-0：

    InRun 线程 1

    线程 1：

2.  一旦`t.start()`完成，它会等待`run()`执行然后创建第二个线程吗？如果我想做以下事情怎么办

    同时（必填）

    新线程().start();

在我的运行方法中，我可以拥有我希望线程并行完成的所有内容，这样它就不会等待一个线程完成运行方法然后创建第二个线程。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T07:22:33.610

> 输出不应该是......

不，线程彼此独立运行。JVM 和操作系统决定何时运行哪个线程。一般来说，两个线程的执行顺序是不可预知的。当您再次运行程序时，很可能会发生不同的结果。

> 一旦`t.start()`完成，它会等待`run()`执行然后创建第二个线程吗？

不，它不会等待。新线程的`run()`方法可能立即启动，也可能稍后启动，具体取决于线程的调度方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T07:23:42.707

当线程启动时，它就启动了。所以这两个 System.out 几乎同时执行，导致它们有时会改变顺序

例子：

```
 ---- thread-0 prints out  
Main thread |--- Prints out ----------- Prints out
                                      |Thread-1 started, prints out 
```

如您所见，分支将与主代码大致同时运行，导致它们在实际首先打印出来的时间之间波动

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T07:23:20.373

由于您没有提供任何同步机制，因此无法确定先执行哪个线程；在不同的运行中，可能还有其他顺序。

# google-analytics - gapi 帐户数据 url 转到 404

> ID：12104801
> 
> 赞同：4
> 
> 时间：2012-08-24T07:17:31.710
> 
> 标签：google-analytics, google-analytics-api

有谁知道 GAPI 1.3.1 类使用的新帐户数据 url？当前的一个是

[https://www.google.com/analytics/feeds/accounts/default](https://www.google.com/analytics/feeds/accounts/default)但它转到 404

问候，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T20:46:28.887

*   转到：https://code.google.com/apis/console/
*   登录并创建一个新项目
*   开启分析 API
*   单击 Analytics API 链接，然后在左侧菜单中选择 API 访问
*   记下 API 密钥（浏览器应用程序的密钥）

然后在你的代码中，你有： https://www.google.com/analytics/feeds/accounts/default 将被替换为： https://www。googleapis.com/analytics/v2.4/management/accounts

还有一项改变要做。每个信息调用还必须包含 API 密钥作为 GET 参数命名密钥

示例：[https ://www.googleapis.com/analytics/v2.4/management/accounts?start-index=1&max-results=100&key=](https://www.googleapis.com/analytics/v2.4/management/accounts?start-index=1&max-results=100&key=) **API_KEY**

对不起，我是新来的，还不能粘贴链接。希望越来越好:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T17:16:48.700

账户数据网址： [https ://www.googleapis.com/analytics/v2.4/management/accounts/~all/webproperties/~all/profiles](https://www.googleapis.com/analytics/v2.4/management/accounts/~all/webproperties/~all/profiles)

报告数据网址： [https ://www.googleapis.com/analytics/v2.4/data](https://www.googleapis.com/analytics/v2.4/data)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T12:29:38.330

请参阅[帐户 Feed 关闭](https://groups.google.com/forum/?fromgroups=#!topic/google-analytics-api-notify/dcdz3LzKnpA)

> [Data Export API v2.3 迁移](https://groups.google.com/forum/#!topic/google-analytics-api-notify/bS0XrfpBlOU/discussion)已完成，API 已关闭。如果您的应用程序尝试访问 Account Feed，它现在将收到 404 错误响应。要解决此错误，请[迁移](https://developers.google.com/analytics/resources/articles/gdata-migration-guide)到[Management API](https://developers.google.com/analytics/devguides/config/mgmt/v3/)以访问配置数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T09:12:35.693

在使用 GAPI 1.3.1 时，您可以通过调用帐户的 list 方法来请求用户可用的帐户列表。在 PHP 中，这看起来像：

```
try {
    $accounts = $analytics->management_accounts->listManagementAccounts();
} catch (apiServiceException $e) {
    print 'There was an Analytics API service error ' . $e->getCode() . ':' . $e->getMessage();
} catch (apiException $e) {
    print 'There was a general API error ' . $e->getCode() . ':' . $e->getMessage();
} 
```

有关使用 GAPI 查询 GA Management API 的更多详细信息，请参阅[https://developers.google.com/analytics/devguides/config/mgmt/v3/mgmtAccountGuide](https://developers.google.com/analytics/devguides/config/mgmt/v3/mgmtAccountGuide)。

# matlab - 如何通过考虑约束和另一个矩阵来制作随机矩阵

> ID：12104802
> 
> 赞同：0
> 
> 时间：2012-08-24T07:17:37.697
> 
> 标签：matlab

伙计们，我有问题通过考虑一些约束和另一个矩阵来制作随机矩阵。

我有矩阵：

```
A= [ 1 4 3 5 2 6 8 7 10 11 12 9;
     4 1 2 3 6 5 9 8 7 10 11 12;
     1 2 3 4 5 6 12 9 8 10 11 7] 
```

然后，我想随机创建一个值介于 0 和 2 ([ 0 2]) 之间的矩阵 B (3,12)。但有一些限制：

```
a. no consecutive zeros (0) more than 2.
b. sum all element in each row in matrix B <=11,
c. if there is value 1 or 2 or 3 or 4 in coordinate (a,b) in matrix A. so we have to force in coordinate(a,b+1) in matrix B have value zero (0). 
```

感谢您之前的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:05:49.083

因此，如果您使用[此答案](https://stackoverflow.com/questions/12000476/how-to-make-random-matrix-whose-rows-must-all-sum-11-and-which-cannot-contain)来生成`B`满足约束 1 和 2 的 a，您可以使用与此类似的内容

```
B = rand(3, 12); %# Just an example matrix.
idx = bitand(A >= 1, A <= 4);
B([false(size(idx, 1), 1) idx(:,1:end-1)]) = 0 
```

强制执行第三个约束。

# .net - 如何编写 SSAS 可执行的递归查询？

> ID：12104805
> 
> 赞同：0
> 
> 时间：2012-08-24T07:17:42.353
> 
> 标签：.net, ssas

我有一种情况，当我需要编写一个递归查询以在 SSAS 中作为命名查询执行时，我不能在那里使用 CTE？除了更改数据库模型之外，还有其他选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T19:48:00.290

您可以在 SQL Server 中将查询设为视图，然后通过“添加/删除表”选项将该视图添加到 SSAS 数据源视图。

# php - 清漆不发送 PHPSESSID cookie

> ID：12104806
> 
> 赞同：0
> 
> 时间：2012-08-24T07:17:55.427
> 
> 标签：php, apache, cookies, varnish, varnish-vcl

我在 Apache2 + PHP 5.3 服务器前运行 Varnish 3.0。我的问题是 Varnish 抛出了许多 503 Service Unavailable 错误，所以我添加了一个解决方法，比如：

```
if http_code = 503 and cookie(REDIRECTED) = false
  set-cookie REDIRECTED=true
  header 307 redirect to same page // try again, maybe this time it doesn't fail
else if http_code = 503 and cookie(REDIRECTED) = true
  header 503 // we tried, but the server doesn't want to 
```

这是我所做的主要思想的伪代码草图。但是，在进行 307 重定向时，不会发送 apache 在`Set-Cookie`标头中发送的 cookie。我主要担心的`PHPSESSID`是没有发送cookie。如果我没有收到 503 错误并且 Varnish 不必进行重定向，那么一切正常。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T07:31:13.427

希望我正确理解了您的问题。我真的不明白 PHPSESSID 与处理 503 错误有何关系，但您根本不需要使用 cookie 来重试请求。

你可以在 Varnish 中使用重启来完成你想要做的事情。例如尝试请求 2 次，你可以这样做：

```
sub vcl_error {
    if (obj.status == 503 && req.restarts < 2) {
        return (restart);
    }
} 
```

这应该提供您正在寻找的功能，而无需接触 cookie。

这很明显，但我还是要说：你真正应该做的是找出导致 503 错误的原因。如果它们不是来自后端，则它们是由超时或 Varnish 配置问题引起的。密切注意您的 Varnish 日志中的“TxStatus c 503”行，看看请求发生了什么。

*关于 503 错误的可能原因的更新：*

显然，您在 POST 请求中收到 503 错误（即当用户尝试登录时）。如果帖子是通过慢速链接完成的，或者由于其他原因在 POST 正文完全传输之前客户端终止了连接，则可能会发生这种情况。但是，这不应该像`no error recorded`在 varnishlog 中那样显示。在任何情况下，您可能都想试一试，看看它是否能解决您的问题。

Varnish 默认为 POST 请求返回（通过），但这并不是在所有情况下都按预期工作（有关更多信息，请参阅[Varnish 票证 #849](https://www.varnish-cache.org/trac/ticket/849)）。

我们选择管道所有 POST 请求并将 X-Forwarded-For 附加到请求中。这是相关的VCL：

```
# PIPE all POST requests

sub vcl_recv {
 if (req.request == "POST") {
   return (pipe);
 }
}

# Set XFF for piped requests

sub vcl_pipe {
  set bereq.http.Connection = "close";
  set bereq.http.X-Forwarded-For = req.http.X-Forwarded-For;
  if (bereq.http.x-forwarded-for) {
    set bereq.http.X-Forwarded-For = bereq.http.X-Forwarded-For + ", " + client.ip;
  } else {
    set bereq.http.X-Forwarded-For = client.ip;
  }
  return (pipe);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T12:48:56.207

我们可以解决这个问题的唯一方法是安装一个名为 vmod-headers 的清漆模块，它允许您将标头附加到其他标头。

之后，我们只是将我们想要设置的 cookie 附加到来自后端的已经存在的 cookie 中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-24T21:44:40.863

默认的 vcl 不应该删除任何 cookie，也不应该缓存任何没有缓存头的页面。

你从 varnish 得到 503 的原因是你的 apache 没有及时响应。如果您希望它更宽容，您可以更改后端的以下设置（下面非常高）：

```
backend www {
    .host = "www.example.com";
    .port = "http";
    .connect_timeout = 500s;    
    .first_byte_timeout = 500s;
    .between_bytes_timeout =500s;
} 
```

# javascript - 如何使用 jsfiddle 在 javascript 中输出新行？

> ID：12104808
> 
> 赞同：2
> 
> 时间：2012-08-24T07:17:56.283
> 
> 标签：javascript, jsfiddle

我正在尝试学习基本的 javascript 并使用[jsfiddle](http://jsfiddle.net/)作为我选择的工具来玩代码。我发现我真的是通过我可以看到输出的工作示例来学习的。

但是，我发现当我按照以下方式执行操作时，两条线都显示在同一行：

```
document.writeln("This is Line One");
document.writeln("This is Line Two"); 
```

即[http://jsfiddle.net/u1sonderzug/NVSsy/](http://jsfiddle.net/u1sonderzug/NVSsy/)

我理解作为一个初学者，我可能会以完全错误的方式来做这件事，所以我想了解最佳实践。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T07:20:47.037

在 html 中，`<br>`用于换行。

```
document.writeln("This is Line One<br>"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T07:25:49.163

这不是 Javascript 的问题，而是 HTML 的问题： println 在文本末尾添加了一个回车符，但它在 HTML 中不起作用，因为 html 不处理这些字符。所以你必须：

```
writeln("....<br/>"); 
```

回车的html标签在哪里；

或者

```
<pre>
writeln("...");
</pre> 
```

*如果您的 javascript 是在 html 页面中编写的。对 html 说的应答器在哪里，他必须阅读每个字符，包括 writeln 添加的回车符。

无论如何，您应该尝试查找 html 和 DOM 的教程，它比这个 println 更强大，而且它是标准的:)

# security - 4k内存中的加密算法

> ID：12104811
> 
> 赞同：1
> 
> 时间：2012-08-24T07:18:18.397
> 
> 标签：security, encryption

我正在使用某些设备（硬件）进行家庭应用，现在我需要实现一种算法来避免设备部署的网络中的入侵者，我唯一的限制是每个设备中的内存是 4k，任何建议我可以实施吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T23:59:25.087

4k 对于任何加密实现来说都是一个巨大的内存量。诸如 AES-128 之类的块密码一次加密 16 个字节的块。任何操作模式都可以（几乎）就地执行，因此您无需复制正在加密/解密的数据。CBC模式也是一个不错的选择。

对称密码学的重量很轻，我不确定为什么内存甚至 CPU 需求会成为一个问题。这在 30 年或更长时间前应该是一个问题。但是当你有 4,096 字节的内存时肯定不会！

# .net - 性能指标

> ID：12104818
> 
> 赞同：0
> 
> 时间：2012-08-24T07:18:44.830
> 
> 标签：.net, performance, linq, plinq, parallel.foreach

今天我测试了 Linq 和 Plinq 查询的性能影响。因此，我使用了有关[msdn How to: Measure PLINQ Query Performance](http://msdn.microsoft.com/en-gb/library/dd554944.aspx)的文章。

```
void Main()
{
        var source = Enumerable.Range(0, 600000000);
        System.Diagnostics.Stopwatch sw;    

        var queryToMeasure1 = from num in source
                             where num % 3 == 0
                             select Math.Sqrt(num);

        var queryToMeasure2 = from num in source.AsParallel()
                             where num % 3 == 0
                             select Math.Sqrt(num);                          

        long freq = Stopwatch.Frequency;
        Console.WriteLine("Timer frequency in ticks per second = {0}", freq);

        Console.WriteLine("Measuring 1");
        sw = System.Diagnostics.Stopwatch.StartNew();   
        foreach (var n in queryToMeasure1) { }  
        Console.WriteLine("Total ticks: {0} - Elapsed time: {1} ms", sw.ElapsedTicks, sw.ElapsedMilliseconds);      

        Console.WriteLine("Measuring 2");
        sw = System.Diagnostics.Stopwatch.StartNew();   
        foreach (var n in queryToMeasure2) { }  
        Console.WriteLine("Total ticks: {0} - Elapsed time: {1} ms", sw.ElapsedTicks, sw.ElapsedMilliseconds);

        Console.WriteLine("Measuring 3");
        sw = System.Diagnostics.Stopwatch.StartNew();           
        System.Threading.Tasks.Parallel.ForEach(queryToMeasure1, n => {});          
        Console.WriteLine("Total ticks: {0} - Elapsed time: {1} ms", sw.ElapsedTicks, sw.ElapsedMilliseconds);

        Console.WriteLine("Measuring 4");
        sw = System.Diagnostics.Stopwatch.StartNew();           
        System.Threading.Tasks.Parallel.ForEach(queryToMeasure2, n => {});      
        Console.WriteLine("Total ticks: {0} - Elapsed time: {1} ms", sw.ElapsedTicks, sw.ElapsedMilliseconds);

        Console.WriteLine("Measuring 5");
        sw = System.Diagnostics.Stopwatch.StartNew();   
        queryToMeasure2.ForAll(n => {});    
        Console.WriteLine("Total ticks: {0} - Elapsed time: {1} ms", sw.ElapsedTicks, sw.ElapsedMilliseconds););
} 
```

测试环境：LinqPad4 on Win7 Enterprise, 64bit, 8GB RAM, I7-2600 (8cores)

我想通了，但无法解释为什么一个核心上的查询（测量 1）比并行查询快。我是否必须添加更多选择代表才能从并行任务中受益？

但现在结果：

1.Run：可枚举范围为60000：

```
Timer frequency in ticks per second = 3312851
Measuring 1
Total ticks: 3525 - Elapsed time: 1 ms
Measuring 2
Total ticks: 15802 - Elapsed time: 4 ms
Measuring 3
Total ticks: 5940 - Elapsed time: 1 ms
Measuring 4
Total ticks: 26862 - Elapsed time: 8 ms
Measuring 5
Total ticks: 4387 - Elapsed time: 1 ms 
```

2.Run：可枚举范围为600000000：

```
Timer frequency in ticks per second = 3312851
Measuring 1
Total ticks: 29740243 - Elapsed time: 8977 ms
Measuring 2
Total ticks: 33722438 - Elapsed time: 10179 ms
Measuring 3
Total ticks: 77145502 - Elapsed time: 23286 ms
Measuring 4
Total ticks: 120078284 - Elapsed time: 36246 ms
Measuring 5
Total ticks: 30899585 - Elapsed time: 9327 ms 
```

有趣的事实：在执行测试脚本之前使用垃圾收集器会大大增加测量 4 的时间：

3.运行：可枚举范围为 600000000 和垃圾收集器（来自 LinqPad）：

```
Timer frequency in ticks per second = 3312851
Measuring 1
Total ticks: 29597830 - Elapsed time: 8934 ms
Measuring 2
Total ticks: 33532083 - Elapsed time: 10121 ms
Measuring 3
Total ticks: 76403692 - Elapsed time: 23062 ms
Measuring 4
Total ticks: 58534548 - Elapsed time: 17668 ms
Measuring 5
Total ticks: 32943622 - Elapsed time: 9944 ms 
```

In conclusion, can I say that method 1 is the most suitable option to perform small select queries and method 5 when the select delegates will increase?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:36:35.283

你的计算很便宜。它们甚至不是非并行 LINQ 的良好候选者，因为委托调用可能比计算本身更昂贵。PLINQ 有很多额外的开销，比如启动任务、跨线程同步和复制数据。尝试这个：

```
bool Where(int i) {
 var sum = 0; 
 for (10000 times) {
  sum += i;
 }
 return i % 3 == 0;
} 
```

并在 where 子句中使用该函数。此功能非常昂贵，因此线程和同步带来的开销将不再主导运行时间。

所以基本上，您正在测量 PLINQ 的最坏情况用例。尝试测量一个有趣的。

# php - 不会选择正确的用户名数据

> ID：12104820
> 
> 赞同：0
> 
> 时间：2012-08-24T07:18:50.287
> 
> 标签：php, mysqli

我试图选择正确的用户名，但由于某种原因，它一直在 myphpadmin 中选择第一个用户名

```
<?php 
if (logged_in() === true) {
    $item = array(
               '<li id="item_0"><a  href="../../index.php">Home</a></li>',
               '<li id="item_1"><a  href="../../music.php" >Music</a></li>',
               '<li id="item_2"><a  href="../../pictures.php">Pictures</a></li>',
               '<li id="item_3"><a href="../../poertry.php">Poertry</a></li>'
            );

    $db->query("SELECT  * FROM `menusort` WHERE '$user_data[username]' 
                        = username");
    $order = $db->get();
    $order = explode(',', $order[0]['data']);

    foreach($order as $key => $value) {
            echo $item[$value];
    };
} else {
    echo '<li><a  href="../../index.php">Home</a></li>
          <li><a  href="../../music.php" >Music</a></li>
          <li><a  href="../../pictures.php">Pictures</a></li>
          <li><a href="../../poertry.php">Poertry</a></li>';
}
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T07:21:05.363

您需要更改 where 子句并添加引号：

```
"SELECT * FROM `menusort` WHERE username = '".$user_data['username']."'" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T07:50:12.920

不合适的数据来帮你！还需要编辑查询。

```
<?php 
$db->query("SELECT  * FROM `menusort` WHERE `username`='".$user_data[username]"'"); 
```

假设用户名是您的列名。希望它会帮助你。快乐编码！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T07:23:48.340

*   **第一**：想想Prepared Statements！
*   **第二**：您的 where 子句是错误的。您将列与值进行比较...将其更改为：

    `$db->query("SELECT * FROM menusort WHERE username = '". $user_data['username'] ."'");`

# c# - 我们如何在 Firefox 中调用 AJAX

> ID：12104823
> 
> 赞同：-3
> 
> 时间：2012-08-24T07:18:51.320
> 
> 标签：c#, javascript, ajax

我正在使用`XMLHttpRequest`.

它在 IE7 中运行良好，但是当我在 Firefox 中尝试相同时，我无法通过`response.write`

我正在使用以下功能：

```
<script type="text/javascript">

        function ddSelect_Change() {
          var xmlhttp;
            if (window.XMLHttpRequest) { // Mozilla, Safari, ...       
                xmlhttp = new XMLHttpRequest();
            }
            else if (window.ActiveXObject) { // IE       
                try {
                    xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");
                }

                catch (e) 
                {
                    try 
                    {
                        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
                    }
                    catch (e) 
                    {
                    }
                }
            }   

 xmlhttp.onreadystatechange = function () {
                //alert(xmlhttp.responseText);
                if (xmlhttp.readyState === 4 && xmlhttp.status === 200) {
}
}
 var url = "http://" + location.hostname + "Locationurl?Method=methodname";
xmlhttp.open("POST", url);
               xmlhttp.setRequestHeader('Content-Type','application/x-www-form-urlencoded');
            xmlhttp.send(); 
} 
```

**添加**

我有两个单独的 Web 应用程序，一个是 tridion Web 应用程序，另一个是自定义 Web 应用程序。我正在从 tridion Web 应用程序到自定义 Web 应用程序进行交互。两个 url 都有不同的域。并且状态我在 Firefox 中得到 0，而对于 readystate，我没有在我的警报中得到 (3)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T07:24:18.400

到目前为止，您显示的代码应该可以在 Firefox 中运行。火狐支持 XHR。

这可能会有所帮助：[https ://developer.mozilla.org/en-US/docs/AJAX/Getting_Started](https://developer.mozilla.org/en-US/docs/AJAX/Getting_Started)

**更新：**

`onreadystatechange`在 AJAX 调用期间被触发多次，因此您可能希望将回调扩展为以下内容：

```
xmlhttp.onreadystatechange = function () {
    if (xmlhttp.readyState === 4) {
      if (xmlhttp.status === 200) {
        alert(xmlhttp.responseText);
      } else {
        alert('There was a problem with the request.');
      }
    }
  } 
```

`xmlhttp.readyState === 4`验证请求是否已完成，这样您就不会在实际获得响应之前尝试提醒响应。`xmlhttp.status === 200`验证您是否`200 OK`从服务器收到 a，以确保没有服务器端错误，或者 URL 不正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T07:38:30.920

您是否考虑过使用像 jQuery 这样的库？它已经为您解决了这些问题。

如果您正在开发 SDL Tridion GUI 扩展，请查看 PowerTools 项目以获取大量示例。(http://code.google.com/p/tridion-2011-power-tools/)

# hibernate - 使用 Criteria API 表示的具有两个连接的 HQL 查询

> ID：12104825
> 
> 赞同：0
> 
> 时间：2012-08-24T07:19:02.153
> 
> 标签：hibernate, hql

我有 Hibernate HQL 查询，它似乎完美地完成了它的工作，但我目前正在尝试使用 Hibernate Criteria API 并想用 Criteria API 表达相同的 HQL 查询。在这个特定示例中，我在 HQL 查询中有两个连接，其中我的第二个连接使用第一个连接的别名。我想实现与 Criteria API 相同的东西。这可能吗？

这是原始查询：

```
select mt 
from MessageThread mt 
  inner join mt.messageThreadsStatuses ts 
  inner join ts.threadLocations tl 
where ts.user.userId = :userId and tl = 0"; 
```

这是重写的查询，它对我不起作用：

```
Criteria c = sf.getCurrentSession().createCriteria(MessageThread.class) 
    .createAlias("messageThreadsStatuses", "ts").setFetchMode("ts", FetchMode.JOIN)
    .createAlias("ts.threadLocations", "tl").setFetchMode("tl", FetchMode.JOIN)
    .add(Restrictions.eq("ts.user.userId", userId))
    .add(Restrictions.eq("tl", 0)); 
```

例如，我还尝试将第二个别名定义为：

```
.createAlias("threadLocations", "tl").setFetchMode("tl", FetchMode.JOIN) 
```

但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T08:17:29.160

如以下文档[http://billingb.livejournal.com/34266.html](http://billingb.livejournal.com/34266.html)所示：

如果您使用别名和您创建的每个标准对象，那么解决这两个问题很容易。我认为最大的错误是大多数示例将所有标准创建链接在一起，但是您可以将它们分开，一切都变得更容易理解。我想出的解决方案代码如下所示：

```
Criteria c = session.createCriteria(Parameter.class);
Criteria cx = c.createCriteria("masterCollections");
cx.createAlias("datasetEntry", "de");
cx.createAlias("parameters", "par");
c.add(Restrictions.or(Restrictions.in("de.datasetId",datasetIDList), Restrictions.in("par.parameterId", parameterIDList))); 
```

# java - Java 事件队列：如何更新 JFrame 中的组件

> ID：12104833
> 
> 赞同：3
> 
> 时间：2012-08-24T07:19:32.990
> 
> 标签：java, swing, awt-eventqueue

我读到过，在编写 Java Swing 时，我们应该将这些组件放入 Java Event Queue，因为 Java Swing 线程不是线程安全的。

但是，当我使用 时`Event Queue`，我不知道如何更新组件属性（例如：为标签设置文本或更改某些内容..）。这是我的代码：

```
public class SwingExample {

    private JLabel lblLabel;    
    SwingExample(){
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);

        lblLabel = new JLabel("Hello, world!", JLabel.CENTER);
        frame.getContentPane().add(lblLabel); // adds to CENTER
        frame.setSize(200, 150);
        frame.setVisible(true);

    }

    public void setLabel(){
        lblLabel.setText("Bye Bye !!!");
    }

    public static void main(String[] args) throws Exception
    {
        SwingExample example = null;
        EventQueue.invokeLater(new Runnable()
        {
            public void run()
            {
                example = new SwingExample(); // ERROR : Cannot refer to non-final variable inside an inner class defined in different method
            }
        });

        // sometime in the futures, i want to update label, so i will call this method...
        example.setLabel();
    }

} 
```

我知道，如果我写`SwingExample example = new SwingExample();`了错误就不会再次出现，但是如果我使用它，我以后无法处理`example.setLabel`。

请告诉我这个错误以及如何解决这个问题。

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T07:40:11.683

通过将您的`SwingExample`实例作为一个字段，您可以在内部类中引用它而不是`final`.

```
public class SwingExample {

    private JLabel lblLabel;    
    private static SwingExample instance;    

    SwingExample() {
        // code omitted
    }

    public void setLabel() {
        lblLabel.setText("Bye Bye !!!");
    }

    public static void main(String[] args) throws Exception {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                instance = new SwingExample();
            }
        });

        // ...

        EventQueue.invokeLater(new Runnable() {
            public void run() {
              instance.setLabel();
            }
        });
    }
} 
```

# c - 如何修改 const 变量的值？

> ID：12104839
> 
> 赞同：6
> 
> 时间：2012-08-24T07:19:47.513
> 
> 标签：c, gcc, constants

我可以`const`在 gcc 中更改已修改变量的值，但不能在其他编译器中更改。我在 gcc 上尝试过这段代码，它更新了`i`and `j`(11) 的值。使用[在线编译器](http://codepad.org/1rf9jwig)，我得到不同的值。

```
#include<stdio.h>
void main() {
  const int i=10;
  int *j;
  j = &i;
  (*j)++;
  printf("address of j is %p address of i is %p\n",j,&i);
  printf("i is %d and j is %d\n",i,*j);
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2015-07-23T09:35:20.190

是的，你可以用一点技巧来做到这一点。

```
#include <stdio.h>
int main(){
    const int a = 0;
    *(int *)&a = 39;
    printf("%d", a);
} 
```

在上面的代码中，`a`是一个`const int`. 使用小技巧，您可以更改常量值。

**更新：说明**

在上面的代码中， a 被定义为 a `const`。例如 a 有一个内存地址`0x01`，因此`&a`返回相同的地址。当它被强制转换时，`(int *)`它成为另一个变量，称为指向 const 的指针。当`*`再次访问时，另一个变量可以在不违反 const 策略的情况下被访问，因为它不是原始变量，但由于它被称为指针的地址，因此更改会被反映。

这将适用于 Borland C++ 或 Turbo C++ 等旧版本，但是现在没有人使用它。

这是“未定义的行为”，这意味着根据标准，您无法预测尝试此操作时会发生什么。根据特定的机器、编译器和程序的状态，它可能会做不同的事情。

在这种情况下，最常发生的是答案是“是”。变量，无论是否为 const，只是内存中的一个位置，您可以打破 const 的规则并简单地覆盖它。（当然，如果程序的其他部分依赖于它的 const 数据是恒定的，这将导致严重的错误！）

然而，在某些情况下——最常见的是 const 静态数据——编译器可能会将这些变量放在内存的只读区域中。例如，MSVC 通常会将 const static ints 放在可执行文件的 .text 段中，这意味着如果您尝试对其进行写入，操作系统将抛出保护错误，并且程序将崩溃。

在编译器和机器的其他组合中，可能会发生完全不同的事情。您可以确定的一件事是，这种模式会惹恼任何必须阅读您的代码的人。

试试这个，让我知道。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-24T07:27:48.930

> **如何修改 const 变量的值？**

不！您不应该修改`const`变量。
拥有`const`变量的全部意义在于不能修改它。如果您想要一个应该能够修改的变量，只需不要`const`在其上添加限定符。

任何`const`通过（指针）hackery 强制修改的代码都会调用**[Undefined Behavior](https://stackoverflow.com/questions/2397984/undefined-unspecified-and-implementation-defined-behavior)**。

未定义行为意味着代码不符合 C 标准制定的标准规范，因此不是有效代码。这样的代码可以显示任何行为，并且允许这样做。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-24T07:35:35.537

通过定义`i`为`const`，您承诺不修改它。编译器可以依赖该承诺并*假设*它没有被修改。当您打印 的值时`i`，编译器可以只打印`10`而不是加载当前存储在 中的任何值`i`。

或者它可以选择加载值。或者，当您尝试修改`i`. 行为未定义。

`-O1`根据优化选项 ( , `-O3`) ，您可能会看到 gcc 的不同行为。

哦，而且`void main()`是不正确的；它应该是`int main(void)`。如果你的教科书告诉你使用`void main()`，你应该得到一本更好的书。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-24T07:35:28.517

看看[我们能不能通过指针改变一个用const定义的对象的值？](https://stackoverflow.com/questions/3801557/can-we-change-the-value-of-a-constant-through-pointers)

长话短说，它是一个`undefined behaviour`. 它可能取决于编译器/机器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-06T03:16:28.667

如果您在 gcc 中编译此代码，则无法修改`const`变量的值，它将显示

```
error: invalid conversion from ‘const int*’ to ‘int*’ [-fpermissive] 
```

并显示未定义的行为

主要是我们只能修改变量，当我们可以访问没有地址的地址时我们什么都做不了。这与注册存储类相同。

# wpf - 在不同ListBox的不同ListBoxItems中画线？

> ID：12104840
> 
> 赞同：0
> 
> 时间：2012-08-24T07:19:49.540
> 
> 标签：wpf

现在，我有两个列表框，我想从这个列表框的列表框项到另一个列表框的列表框项画一条线。如果可能，这两个 listboxitem 不是水平的。如何获取listboxitem坐标？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T10:06:22.910

这段代码对我有用（在这里我得到了所选项目相对于其托管窗口的坐标）：

```
object selectedEntry = (object)myListBox.SelectedItem;
ListBoxItem lbi = this.myListBox.ItemContainerGenerator.ContainerFromItem(selectedEntry) as ListBoxItem;
Point p = lbi.TranslatePoint(new Point(0, 0), Window.GetWindow(lbi)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T10:41:29.070

首先，您必须获得要连接的两个项目。如果你有这两个项目，你可以开始计算积分。我会寻找两个列表框的父面板并计算相对于该面板的点。

例如，您在两个列表框中创建 Grid。现在你只需要计算这两个项目的点。现在向包含两个计算点（point1 = x1, y1 和 point2 = x2, y2）的网格添加一条线。

但要记住。这并不像看起来那么容易，因为如果你滚动你必须更新点。正是在这一点上，下一个问题出现了。如果您滚动视图（您要连接的项目），则该行仍然可见。所以你必须计算这条线是否可见......

最好的方法是创建一个 DataGrid 并连接两个单元格，因为它仍然比两个不同的列表框更容易。

# ios - 内置点赞按钮

> ID：12104841
> 
> 赞同：1
> 
> 时间：2012-08-24T07:19:49.680
> 
> 标签：ios, facebook, mobile, facebook-like

我打算为移动用户使用内置的赞，并为网络用户使用标准的赞按钮来“赞”一个网页。

但是，内置的点赞功能是否与点赞按钮（社交插件）有关联？

根据我的观察：

在网页版中，当我点击标准的 Like 按钮后，Open Graph Object 可以立即跟踪它

打电话`fql?q=SELECT share_count, like_count, comment_count, total_count, click_count FROM link_stat WHERE url="http://websitelinkhere.com";`

返回

```
{
  "data": [
    {
      "share_count": 0, 
      "like_count": 1, 
      "comment_count": 0, 
      "total_count": 1, 
      "click_count": 0
    }
  ]
} 
```

但是使用内置 Like，Open Graph 对象根本无法跟踪那个“like”，like_count 和 total_count 都是 0。

然后是有趣的部分：

通过检查我的`og.likes`使用`https://graph.facebook.com/userid/og.likes?access_token=myAccessToken`

它返回两个赞，1 个来自赞按钮，1 个来自内置赞操作

```
{
   "data": [
      {
         "id": "10151050736776633",
         "from": {
            //skipped
         },
         "start_time": "2012-08-24T07:10:52+0000",
         "end_time": "2012-08-24T07:10:52+0000",
         "publish_time": "2012-08-24T07:10:52+0000",
         "application": {
            //skipped
         },
         "data": {
            //skipped
         },
         "type": "og.likes",
         "no_feed_story": false,
         "likes": {
            "count": 0,
            "can_like": true,
            "user_likes": false
         },
         "comments": {
            "count": 0,
            "can_comment": true
         }
      },
      {
         "id": "10151050736586633",
         "from": {
            //skipped
         },
         "start_time": "2012-08-24T07:10:42+0000",
         "publish_time": "2012-08-24T07:10:42+0000",
         "application": {
            //skipped
         },
         "data": {
            //skipped
         },
         "type": "og.likes",
         "no_feed_story": false,
         "likes": {
            "count": 0,
            "can_like": true,
            "user_likes": false
         },
         "comments": {
            "count": 0,
            "can_comment": true
         }
      }
   ]
} 
```

然后通过使用`id`返回的动作`og.likes`，我可以删除两个喜欢使用

```
curl -X DELETE \
     -F 'access_token=accessToken' \
     https://graph.facebook.com/10151050736776633 
```

和

```
curl -X DELETE \
     -F 'access_token=accessToken' \
     https://graph.facebook.com/10151050736586633 
```

是因为我还没有提交申请到 Facebook 审核吗？

我期待内置的 Like 和 Like 按钮作为一个动作一起工作，但不是`og.likes`独立生成。

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:00:45.640

添加`og:url`和使用 Open Graph Object ID 直接解决了这个问题。

```
curl -X POST \
     -F 'access_token=accessTokenHere' \
     -F 'object=UsingOpenGraphObjectIDHereDirectly' \
     https://graph.facebook.com/useridhere/og.likes 
```

可能与[不可能在 Open Graph Pages with Likes 上发布内置的 Like 操作有关](https://developers.facebook.com/bugs/259414730829377/)

# javascript - 使用 JavaScript 日期的任何时间的时区偏移

> ID：12104844
> 
> 赞同：0
> 
> 时间：2012-08-24T07:19:50.360
> 
> 标签：javascript, date, timezone, dst

我`var offset = new Date().getTimezoneOffset()`用来获取用户的当前时区偏移量。

但是，我怎样才能获得未来任何时间的时区偏移量？

这是必需的，因为`DST`启用/禁用时时区偏移量不同。所以我不能假设未来时间的偏移量相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-19T09:48:41.843

这个问题让我感到困惑，认为可能`getTimezoneOffset()`已经无法正确获得未来日期的时区偏移量。确实如此。

就这`JavaScript`一点而言，你给它自纪元日期以来的毫秒数，这是无处不在的，它会为你提供本地时间的偏移量，*因为它将在那个日期*，因为所有 Date 功能关心的是采用通用日期/时间并传回对本地用户有意义的日期，除非您使用`getUTCDate()`.

所以跑步

```
var summer = new Date(1403170847000);
alert('Summer offset=' + summer.getTimezoneOffset());

var winter = new Date(1419500175000);
alert('Winter offset=' + winter.getTimezoneOffset()); 
```

在本地时间包含 DST 期间的控制台中，为我在英国报告夏季日期的偏移量为 -60（即 GMT+1），冬季日期的偏移量为 0（即 GMT）。

[http://jsfiddle.net/SX9SN/](http://jsfiddle.net/SX9SN/)

# cakephp - 验证错误弹出后重置按钮不重新设置表单？

> ID：12104847
> 
> 赞同：2
> 
> 时间：2012-08-24T07:19:54.697
> 
> 标签：cakephp

我有一个表单，其中包含一些带有提交和重置按钮的字段。我正在使用 cakephp 模型验证来验证空字符和特殊字符。如果我输入无效数据并提交表单，它会显示错误消息。之后我点击重置按钮，它不会重置表单。在验证错误消息之前它工作正常。

我的重置按钮代码是

```
<input type="reset" class="uiBtn" value="Reset" name="reset">&nbsp;&nbsp;&nbsp;&nbsp;<input type="submit" class="uiBtn" value="Save Section" name=""> 
```

我也使用了 jquery 重置功能，它也不起作用..

请任何人帮助我这是什么问题？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T08:29:47.633

它不起作用，因为 HTML 重置按钮将表单中的控件重置为页面首次加载时的值。当您回发时，PHP 引擎会再次设置控件的值，因此重置只会将控件更改回回发后加载页面时的状态。

唯一的解决方案是在客户端使用 javascript 或在回发时在服务器端进行。只需遍历所有控件并适当地设置它们的属性。

假设您还没有设置另一个 onload 事件，那么遵循 Js Code 肯定会起作用。

```
window.onload = function () {
for(var f in document.getElementsByTagName("form"))
    f.reset();
} 
```

[这篇文章](https://stackoverflow.com/questions/1230507/how-to-reset-a-form-after-submit)可能会帮助您在提交后重置表单。

# oracle - 在 Oracle 中收集可为空的字段

> ID：12104848
> 
> 赞同：1
> 
> 时间：2012-08-24T07:19:59.417
> 
> 标签：oracle

我想从数据库中收集可为空的字段，有什么脚本可以帮助我吗？重要的是要知道在编程过程中必须检查哪些字段是否为空。

提前致谢。

CS

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T07:26:14.963

```
SELECT * FROM USER_CONSTRAINTS
where constraint_type = 'C' 
```

或者，更准确地说：

```
select owner, constraint_name, table_name, column_name 
from all_cons_columns 
```

**更新**：获取可为空的列：

```
SELECT OWNER, TABLE_NAME, COLUMN_NAME 
FROM ALL_TAB_COLS
MINUS
SELECT OWNER, TABLE_NAME, COLUMN_NAME 
from all_cons_columns 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T08:15:47.227

```
select owner, table_name, column_name, data_type 
from   all_tab_cols 
where  nullable = 'Y'; 
```

# android - 从 Facebook 相册中删除图像

> ID：12104854
> 
> 赞同：2
> 
> 时间：2012-08-24T07:20:30.213
> 
> 标签：android, facebook-android-sdk

我正在开发将图像发布到 facebook 的应用程序。这工作得很好。但我的问题是我找不到可以`delete`从 facebook 中选择照片的样本。我已经制作了一个从 facebook`function`获取`WallId`和的。`PhotoID`

我的问题是我无法得到我应该输入的内容`facebook runner.request`我知道我需要通过`DELETE`并且`PhotoId`我目前的功能是

```
private void delete_fb(){
    AsyncFacebookRunner fruner = new AsyncFacebookRunner(facebook);
    Bundle params = new Bundle();
    params.putString("fields", "id,name");
    if(favi.get(indeks).fbid!=0 && WallId != 0){
        fruner.request("me/"+WallId+"/"+favi.get(index).fbid,params ,"DELETE",new Del(),null);
    }
} 
```

`"me/"+WallId+"/"+favi.get(index).fbid`因此，如果您能解释我应该用什么代替`fruner.request()`或给我一些示例代码，我会非常高兴。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T08:15:53.763

试试这个

```
fruner.request(YourPostId, params ,"DELETE", new Del(), null); 
```

# android - LocationManager.getLastKnownLocation() 返回 null，并且永远不会调用 onLocationChanged

> ID：12104857
> 
> 赞同：4
> 
> 时间：2012-08-24T07:20:37.097
> 
> 标签：android, android-mapview, locationmanager, android-location

此代码用于我的 MapActivity 中的 onCreate 块

```
lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        if (!lm.isProviderEnabled(LocationManager.GPS_PROVIDER))
        {
            Toast.makeText(this,
                    "Por favor, habilita el GPS antes de usar esta opción",
                    Toast.LENGTH_SHORT).show();
            finish();
        }
        lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, this);
        Location loc = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
        doYourMapMagicBaby(loc); 
```

无论如何，loc 总是返回 null。无论如何，当我在 GPS 上注册更新时，logcat 会正确记录我的位置。

```
08-24 09:21:18.479: D/libloc(260): Latitude:  40.4399979 (intermediate)
08-24 09:21:57.500: D/libloc(260): Longitude: -3.6700022 
```

所以我想我可以通过 onLocationChanged() 方法实现我想做的事情。也没有运气。

```
public void onLocationChanged(Location location)
{
    if (location != null)
    {
        System.out.println("La localizacion es: (lon: "
                + location.getLongitude() + ", lat: "
                + location.getLatitude() + ")");
        doYourMapMagicBaby(location);
    }
    else
    {
        System.out.println("La location es nula");
    }

} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:25:51.470

请检查提供程序当前是否已启用，因为如果提供程序当前已禁用，则返回 null。 [http://developer.android.com/reference/android/location/LocationManager.html#getLastKnownLocation(java.lang.String](http://developer.android.com/reference/android/location/LocationManager.html#getLastKnownLocation(java.lang.String) )

# ruby-on-rails - 耙中止！没有要加载的文件——急

> ID：12104860
> 
> 赞同：1
> 
> 时间：2012-08-24T07:21:02.740
> 
> 标签：ruby-on-rails, windows, activerecord, ruby-on-rails-3.1, rake

我正在使用 rails 2.3.5 ， ruby​​ 1.8.7 (2010-08-16 patchlevel 302) [i386-mingw32]

我在windows机器上，

该项目没有 .gem 文件，所以我使用 rake gems:install 和 rake db:create

到上述步骤一切正常，但是

当我运行**rake db:migrate --trace**时，出现以下错误

```
** Execute environment
rake aborted!
no such file to load -- rush
D:/programfiles/Ruby187/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in
`gem_original_require'
D:/programfiles/Ruby187/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in
`require'
D:/programfiles/Ruby187/lib/ruby/gems/1.8/gems/activesupport-2.3.5/lib/active_su
pport/dependencies.rb:156:in `require'
D:/programfiles/Ruby187/lib/ruby/gems/1.8/gems/activesupport-2.3.5/lib/active_su
pport/dependencies.rb:521:in `new_constants_in'
D:/programfiles/Ruby187/lib/ruby/gems/1.8/gems/activesupport-2.3.5/lib/active_su
pport/dependencies.rb:156:in `require'
D:/workspace/ruby/education/fedena2.3inprogress/vendor/plugins/delayed_job/lib/d
elayed/worker.rb:1
D:/programfiles/Ruby187/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in
`gem_original_require'
D:/programfiles/Ruby187/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in
`require'
D:/programfiles/Ruby187/lib/ruby/gems/1.8/gems/activesupport-2.3.5/lib/active_su
pport/dependencies.rb:156:in `require'
D:/programfiles/Ruby187/lib/ruby/gems/1.8/gems/activesupport-2.3.5/lib/active_su
pport/dependencies.rb:521:in `new_constants_in'
D:/programfiles/Ruby187/lib/ruby/gems/1.8/gems/activesupport-2.3.5/lib/active_su
pport/dependencies.rb:156:in `require'
D:/workspace/ruby/education/fedena2.3inprogress/vendor/plugins/delayed_job/lib/d
elayed_job.rb:6
D:/programfiles/Ruby187/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in
`gem_original_require'
D:/programfiles/Ruby187/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in
`require'
D:/programfiles/Ruby187/lib/ruby/gems/1.8/gems/activesupport-2.3.5/lib/active_su
pport/dependencies.rb:156:in `require'
D:/programfiles/Ruby187/lib/ruby/gems/1.8/gems/activesupport-2.3.5/lib/active_su
pport/dependencies.rb:521:in `new_constants_in'
D:/programfiles/Ruby187/lib/ruby/gems/1.8/gems/activesupport-2.3.5/lib/active_su
pport/dependencies.rb:156:in `require'
D:/workspace/ruby/education/fedena2.3inprogress/vendor/plugins/delayed_job/init.
rb:1:in `evaluate_init_rb'
D:/programfiles/Ruby187/lib/ruby/gems/1.8/gems/rails-2.3.5/lib/rails/plugin.rb:1
58:in `evaluate_init_rb'
D:/programfiles/Ruby187/lib/ruby/gems/1.8/gems/activesupport-2.3.5/lib/active_su
pport/core_ext/kernel/reporting.rb:11:in `silence_warnings'
D:/programfiles/Ruby187/lib/ruby/gems/1.8/gems/rails-2.3.5/lib/rails/plugin.rb:1
54:in `evaluate_init_rb'
D:/programfiles/Ruby187/lib/ruby/gems/1.8/gems/rails-2.3.5/lib/rails/plugin.rb:4
8:in `load'
D:/programfiles/Ruby187/lib/ruby/gems/1.8/gems/rails-2.3.5/lib/rails/plugin/load
er.rb:38:in `load_plugins'
D:/programfiles/Ruby187/lib/ruby/gems/1.8/gems/rails-2.3.5/lib/rails/plugin/load
er.rb:37:in `each'
D:/programfiles/Ruby187/lib/ruby/gems/1.8/gems/rails-2.3.5/lib/rails/plugin/load
er.rb:37:in `load_plugins'
D:/programfiles/Ruby187/lib/ruby/gems/1.8/gems/rails-2.3.5/lib/initializer.rb:36
9:in `load_plugins'
D:/programfiles/Ruby187/lib/ruby/gems/1.8/gems/rails-2.3.5/lib/initializer.rb:16
5:in `process'
D:/programfiles/Ruby187/lib/ruby/gems/1.8/gems/rails-2.3.5/lib/initializer.rb:11
3:in `send'
D:/programfiles/Ruby187/lib/ruby/gems/1.8/gems/rails-2.3.5/lib/initializer.rb:11
3:in `run'
D:/workspace/ruby/education/fedena2.3inprogress/config/environment.rb:6
D:/programfiles/Ruby187/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in
`gem_original_require'
D:/programfiles/Ruby187/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in
`require'
D:/programfiles/Ruby187/lib/ruby/gems/1.8/gems/activesupport-2.3.5/lib/active_su
pport/dependencies.rb:156:in `require'
D:/programfiles/Ruby187/lib/ruby/gems/1.8/gems/activesupport-2.3.5/lib/active_su
pport/dependencies.rb:521:in `new_constants_in'
D:/programfiles/Ruby187/lib/ruby/gems/1.8/gems/activesupport-2.3.5/lib/active_su
pport/dependencies.rb:156:in `require'
D:/programfiles/Ruby187/lib/ruby/gems/1.8/gems/rails-2.3.5/lib/tasks/misc.rake:4

D:/programfiles/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:205
:in `call'
D:/programfiles/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:205
:in `execute'
D:/programfiles/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:200
:in `each'
D:/programfiles/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:200
:in `execute'
D:/programfiles/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:158
:in `invoke_with_call_chain'
D:/programfiles/Ruby187/lib/ruby/1.8/monitor.rb:242:in `synchronize'
D:/programfiles/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:151
:in `invoke_with_call_chain'
D:/programfiles/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:176
:in `invoke_prerequisites'
D:/programfiles/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:174
:in `each'
D:/programfiles/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:174
:in `invoke_prerequisites'
D:/programfiles/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:157
:in `invoke_with_call_chain'
D:/programfiles/Ruby187/lib/ruby/1.8/monitor.rb:242:in `synchronize'
D:/programfiles/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:151
:in `invoke_with_call_chain'
D:/programfiles/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/task.rb:144
:in `invoke'
D:/programfiles/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application
.rb:116:in `invoke_task'
D:/programfiles/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application
.rb:94:in `top_level'
D:/programfiles/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application
.rb:94:in `each'
D:/programfiles/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application
.rb:94:in `top_level'
D:/programfiles/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application
.rb:133:in `standard_exception_handling'
D:/programfiles/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application
.rb:88:in `top_level'
D:/programfiles/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application
.rb:66:in `run'
D:/programfiles/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application
.rb:133:in `standard_exception_handling'
D:/programfiles/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/lib/rake/application
.rb:63:in `run'
D:/programfiles/Ruby187/lib/ruby/gems/1.8/gems/rake-0.9.2.2/bin/rake:33
D:/programfiles/Ruby187/bin/rake:19:in `load'
D:/programfiles/Ruby187/bin/rake:19
Tasks: TOP => db:migrate => environment 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T07:37:26.697

似乎您的应用程序需要缺少 gem `rush`[http://rubygems.org/gems/rush]。按照 url 安装它，然后重试。

是的，`bundle install`应该确保在您的系统中安装所有必需的 gem。

`gem install rush`, 工作或将 gem rush 添加到您的 gem 文件中，然后运行 ​​bundle install (如果您使用 bundler)

# java - 如何基于某个类实例化一个特定的实现？

> ID：12104864
> 
> 赞同：0
> 
> 时间：2012-08-24T07:21:21.957
> 
> 标签：java, reflection, interface

我有几个扩展 bean 的对象：

```
public class Fruit {}

public class Banana extends Fruit {}

public class Pear extends Fruit {} 
```

而且我有一个具有不同实现的接口，每个 bean 一个。

```
public interface Milkshake {
    public String doMilkshake();
}

public class FruitMilkshake implements Milkshake {
    public String doMilkshake() {
        return "Fruit Milkshake!";
    }
}

public class BananaMilkshake implements Milkshake {
    public String doMilkshake() {
        return "Banana Milkshake!";
    }
}

public class PearMilkshake implements Milkshake {
    public String doMilkshake() {
        return "Pear Milkshake!";
    }
} 
```

如何根据我的 bean 的具体类型实例化正确的实现？

现在我已经使用了类型化和 Map 来“映射”正确的实现。像这样：

```
public void hungry(Fruit fruit) {
    Map<String, String> obj2impl = new HashMap<String, String>();
    obj2impl.put("Fruit", "FruitMilkshake");
    obj2impl.put("Banana", "BananaMilkshake");
    obj2impl.put("Pear", "PearMilkshake");

    String name = fruit.getClass().getCanonicalName();
    String implName = obj2impl.get(name);
    Milkshake milkshake = (Milkshake) Class.forName(implName).newInstance();

    milkshake.doMilkshake(fruit);
}

public interface Milkshake <T t> {
    public String doMilkshake(T t);
}

public class FruitMilkshake implements Milkshake<Fruit> {
    public String doMilkshake(Fruit fruit) {
        return "Fruit Milkshake!";
    }
}

public class BananaMilkshake implements Milkshake<Banana> {
    public String doMilkshake(Banana banana) {
        return "Banana Milkshake!";
    }
}

public class PearMilkshake implements Milkshake<Pear> {
    public String doMilkshake(Pear pear) {
        return "Pear Milkshake!";
    }
} 
```

更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:25:33.237

> 更好的方法来实现这一目标？

一个起点是避免反映类的名称：

```
Map<String, Class<? extends Milkshake>> obj2impl =
    new HashMap<String, Class<? extends Milkshake>>();
obj2impl.put("Fruit", FruitMilkshake.class);
obj2impl.put("Banana", BananaMilkshake.class);

...

Milkshake milkshake = obj2impl.get(text).newInstance(); 
```

现在这仍然需要您在每个实现中都有一个无参数的构造函数，并且它仍然*总是*创建一个新实例。如果你使用类似[`Provider`](http://google-guice.googlecode.com/git/javadoc/com/google/inject/Provider.html)的概念，你可以绕过这个：

```
Map<String, Provider<Milkshake>> map = ...;
// Fill the map with providers, some of which could create a new instance,
// and some could reuse an existing one

...

Milkshake milkshake = map.get(text).get(); 
```

编辑：重读帖子后，您也可以摆脱文本部分，并拥有一个`Map<Class<?>, Provider<Milkshake>>`. 如果可能，请避免对类的名称进行硬编码。

当然，如果你的`Fruit`类有一个`makeMilkshake`抽象方法，那就更好了……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T07:29:39.227

```
public class Fruit {
    public Class<? extends Milkshake> getMilkshakeClass() {
        return Milkshake.class;
    }
}

public class Banana extends Fruit {
    public Class<? extends Milkshake> getMilkshakeClass() {
        return Banana.class;
    }
}

public class Pear extends Fruit {
    public Class<? extends Milkshake> getMilkshakeClass() {
        return PearMilkshake.class;
    }
} 
```

您甚至可能想要创建一个 AbstractFruit 类，该类具有上面使用的方法作为它们必须覆盖的抽象方法

```
public abstract class AbstractFruit {
    public abstract Class<? extends Milkshake> getMilkshakeClass();
} 
```

与其让它们扩展 Fruit，不如扩展它。

# android - 如何使用 OpenCV 在 Android 中设置相机分辨率？

> ID：12104868
> 
> 赞同：11
> 
> 时间：2012-08-24T07:21:36.557
> 
> 标签：android, opencv, camera, resolution

我正在尝试为 Android 开发一个应用程序，我需要从相机中获取分辨率尽可能高的未压缩图片。我尝试了 takePicture 的 rawCallback 和 postviewCallback，但它们不起作用。

现在我正在尝试使用 VideoCapture 使用 OpenCV（2.4 版），但我被困在默认的 960x720 中，这对我的需要来说很差；而我的手机，三星 Galaxy S3，理论上能够提供高达 8Mpx（图片为 3,264×2,448，视频为 1,920×1,080，根据维基百科）。VideoCapture.set(Highgui.CV_CAP_PROP_FRAME_WIDTH/HEIGHT, some number) 使相机返回我发现的黑色图像。

有什么方法可以通过 OpenCV 或 Android API 获得更高的分辨率，而无需压缩？

如果以前有人问过这个问题，我真的很抱歉；我一直在寻找几天，我什么也没找到。

感谢您的时间！

编辑：虽然这不是我要问的，但我发现有一种方法可以做一些非常相似的事情：如果您为相机设置 OnPreviewCallback，使用 setPreviewCallback，您确实会从相机获取原始图片数据（至少在我正在使用的 S3 中）。我把它留在这里，以防将来有人发现它有用。

编辑：在下面的答案中解释了部分解决方案。总结一下，

```
vc.set(Highgui.CV_CAP_PROP_FRAME_WIDTH, desiredFrameWidth);
vc.set(Highgui.CV_CAP_PROP_FRAME_HEIGHT, desiredFrameHeight); 
```

在某些条件下工作；请参阅下文了解更多详情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T15:03:10.720

您必须通过调用获得支持的相机预览解决方案[`getSupportedPreviewSizes`](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#getSupportedPreviewSizes%28%29)。

在此之后，您可以使用方法设置任何分辨率[`setPreviewSize`](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#setPreviewSize%28int,%20int%29)。最后不要忘记[`setParameters`](http://developer.android.com/reference/android/hardware/Camera.html#setParameters%28android.hardware.Camera.Parameters%29)。实际上，许多 OpenCV Android 示例都包含此信息（查看 sample3）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T09:24:39.823

万一有人发现这很有用，我找到了一个（部分）解决方案：如果您的 VideoCapture 变量被称为 vc，这应该可以工作：

```
vc.set(Highgui.CV_CAP_PROP_FRAME_WIDTH, desiredFrameWidth);
vc.set(Highgui.CV_CAP_PROP_FRAME_HEIGHT, desiredFrameHeight); 
```

请注意，宽度和高度的组合必须是您的相机支持的图片格式之一，否则只会得到黑色图像。您可以通过 Camera.Parameters.getSupportedPictureSizes() 获取这些信息。

但是，设置高分辨率似乎超出了 YUV 转换缓冲区的容量，所以我仍在为此苦苦挣扎。我将为此提出一个新的单独问题，以使一切更清楚：[新线程](https://stackoverflow.com/questions/12106540/opencv-error-reading-yuv-buffer)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-18T22:18:06.083

setPreviewSize 不设置图片分辨率。setPictureSize 可以。

# jquery - jQuery - 在保留 rel 属性的同时替换 div 中的图像

> ID：12104870
> 
> 赞同：1
> 
> 时间：2012-08-24T07:22:06.417
> 
> 标签：jquery, replace

**目标：** 创建将显示当前大图像和少量缩略图的元素。当有人点击缩略图时，当前的大图需要被点击的大图替换。Shadowbox 应该只适用于大图像。如果图像（缩略图）很少，shadowbox 必须包含所有三个大图像（而不是只显示一个）。

**问题：** 虽然下面的代码可以工作，但仍有一些问题需要修复。

1.  在第一次加载时，当我点击缩略图时，#panel 中的主要大图像首先被替换为缩略图，然后在 ~1 秒后被替换为正常的大图像。如此大的图像应该首先在点击时预加载，然后附加到#panel 或类似的东西。
2.  rel 属性在替换时不知何故丢失了。当有一个新图像附加到#panel 时，它看起来像松散的 rel 属性（阴影框不起作用）
3.  单击缩略图会加载应该被阻止的阴影框。只有在#panel 中单击大图像时才应加载 Shadowbox。当有人单击该大图像时，阴影框应加载所有大图像。这可能很棘手，可能需要更改 html 代码。

**WORKING DEMO** 演示不再起作用

**HTML：**

```
<div id="panel">
  <a href="path_to_image1.jpg" rel="shadowbox[page]">
   <img src="scripts/timthumb.php?src=path_to_image1.jpg&w=200&h=20" alt="Image name1" />
  </a>
</div>

<div id="thumbs">
  <a href="path_to_image1.jpg" rel="shadowbox[page]">
   <img src="scripts/timthumb.php?src=path_to_image1.jpg&w=30&h=30" alt="Image name1" />
  </a>
  <a href="path_to_image2.jpg" rel="shadowbox[page]">
   <img src="scripts/timthumb.php?src=path_to_image2.jpg&w=30&h=30" alt="Image name2" />
  </a>
  <a href="path_to_image3.jpg" rel="shadowbox[page]">
   <img src="scripts/timthumb.php?src=path_to_image3.jpg&w=30&h=30" alt="Image name3" />
  </a>
</div> 
```

**JS：**

```
$('#thumbs a').click(function(evt) {
  evt.preventDefault();
  var clickedElement = $(this).clone().find('img').attr('src', function(i, src){
    return src.replace('w=30&h=30', 'w=200&h=200')
  }).end();
  $('#panel').html(clickedElement);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:40:34.297

您可以使用 jquery 的 .load() 函数。

这个想法很简单。首先在 positiopn -9000, -9000 的某处创建一个隐藏的 div，并在其中包含图像 src。

假设 img 元素的 id 是“tempimagecache”

所以现在我们要做的是：

```
$.('#tempimagecache').load(function(){
{
    // Now place the image code to the reqired location and its loaded from the cache
}); 
```

这是我在我的网站上工作的示例。 [http://fr3ak.me/](http://fr3ak.me/)

此外，为了防止在拇指上弹出阴影框，请删除 rel 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T10:09:29.763

我发现[http://slidesjs.com/](http://slidesjs.com/)具有我想要实现的完全相同的功能。我要感谢所有试图帮助我的人。

# windows-phone-7 - 导航回当前页面中包含所选项目的页面？

> ID：12104871
> 
> 赞同：0
> 
> 时间：2012-08-24T07:22:10.977
> 
> 标签：windows-phone-7

我对 wp7 有一个疑问。我有三页。主页、第一页和第二页。我已经轻松地从主页导航到了第一页，并使用数据库中的数据动态设计了第一页。第一页包含文本块，我从 db 加载数据。第二页包含列表框中将动态生成的项目列表。我使用导航服务功能轻松地从第一页导航到第二页。

我的疑问是：从第二页的项目列表中，我们需要选择一个项目，然后再次导航回到第一页并在第一页的文本块中显示所选项目。怎么做？请帮我一些代码...谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T08:10:03.037

我认为最简单的方法是在代码中提供静态属性。

例如，把它放在你的第二页 c#

```
public static Object SelectedItem; 
```

并以这种方式从第一页检索它：

```
Object selectedItem = SecondPage.SelectedItem; 
```

当然，此代码仅用于示例，没有生产就绪。但这是这个想法。

# facebook - 如何从登录电子邮件地址获取 Facebook 用户 ID

> ID：12104873
> 
> 赞同：2
> 
> 时间：2012-08-24T07:22:17.200
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph

有没有办法从用户的登录电子邮件地址获取用户的 Facebook 用户 ID？

我想要一个 API 调用，我可以在其中提供`joe@example.com`和获取 facebook 用户 ID `342255534`。

我会用那个 id 打电话`http://graph.facebook.com/342255534/picture?type=large`

我发现的最接近的是`https://graph.facebook.com/search?q=EMAILADDRESS&type=user&access_token=ACCESSTOKEN`，但这需要一个访问令牌，我希望避免这种情况。

我知道这不是它应该如何工作的，但是有没有办法获得通用访问令牌？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T09:00:01.293

您可以将自己的 access_token 用于应用程序，并将其更改为长期访问令牌，以便您可以在 cron 中进行 API 调用。唯一的问题是您必须经常登录应用程序才能更新访问令牌。

**更新**：用户搜索 API 现已弃用，因此您无法使用电子邮件地址进行搜索。但是基于名称的搜索仍然有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T12:27:34.837

您可以创建一个应用程序并获取该应用程序的访问令牌。说明在这里：[https ://developers.facebook.com/docs/authentication/applications/](https://developers.facebook.com/docs/authentication/applications/)

不幸的是，通过电子邮件搜索 user_id 只能使用用户访问令牌。

您无需与用户成为朋友即可通过电子邮件地址获取他们的 ID。

# maven - 使用 maven-install-plugin 在文件夹中安装所有 jar

> ID：12104878
> 
> 赞同：3
> 
> 时间：2012-08-24T07:22:36.173
> 
> 标签：maven, maven-plugin, pom.xml

我的项目中有一个带有一些外部 jar 的文件夹 lib。我正在使用 maven-install-plugin 将这些 jar 添加到我的本地存储库中。但是，我需要为要安装的每个 jar 创建单独的配置。有没有办法可以将 lib 文件夹中的所有 jar 复制到本地存储库中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T07:33:14.703

## 选项一

如果 lib 目录的内容与 maven 存储库中的目录结构匹配，即：

```
/lib/{groupid1}/{groupid2}/{artifactid}/{version}/{artifactid}-{version}.jar 
```

例如：

```
/lib/commons-lang/commons-lang/2.6/commons-lang-2.6.jar 
```

您可以将整个目录复制到您的`~/.m2/repository`目录

```
cp -R lib/*  ~/.m2/repository 
```

如果没有，那么您必须手动安装它们，因为 Maven 无法从文件名中计算出组 id 是什么。

## 选项二

另一种选择是根本不将它们放入本地存储库，而是在 pom.xml`systemPath`的标签中指定 a`dependency`

```
<dependency>
  <groupId>commons-logging</groupId>
  <artifactId>commons-logging</artifactId>
  <version>1.0.4</version>
  <scope>system</scope>
  <systemPath>${project.basedir}/lib/commons-logging-1.0.4.jar</systemPath>
</dependency> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T09:06:04.557

您需要特别提供这些文件的 groupId、artifactId 和版本，因为这些是 Maven 坐标以区分 Maven 中的工件。如果您有一个 lib 文件夹，最好开始使用存储库管理器并将它们安装到存储库管理器中一次，然后您可以将它们用作通常的依赖项。

# sql - 将 SELECT 导出到文本文件

> ID：12104880
> 
> 赞同：2
> 
> 时间：2012-08-24T07:22:41.100
> 
> 标签：sql, debugging, sql-server-2005, export

我调试了一个 SQL Server 2005 存储过程，并有一个类似`SELECT * FROM MY_TABLE INNER JOIN OTHER_TABLE etc`.

如何将此查询的结果导出到 txt 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:37:19.180

检查以下网站：

[从 SQL 存储过程中导出文本文件 - SO post](https://stackoverflow.com/questions/5383142/export-a-text-file-from-a-sql-stored-procedure)

[将 SQL Server 数据导出到文本文件的简单方法 - mssqltips](http://www.mssqltips.com/sqlservertip/1633/simple-way-to-export-sql-server-data-to-text-files/)

此致

# java - Java：删除选定的行结果集，而是从数据库中删除最后一行？

> ID：12104882
> 
> 赞同：2
> 
> 时间：2012-08-24T07:22:51.630
> 
> 标签：java, resultset

当我选择一行并按下“删除”按钮时：

在摆动界面中，选定的行被删除（如预期的那样）。但

在实际数据库中，无论所选行是什么（不是预期的），最后一行都会被删除。无论实际选择的行是什么，删除的行始终是数据库中的最后一行。我的代码中没有错误，也没有抛出异常。它可以不间断地工作。

我实际上在我的代码中添加了必要的东西：

```
 Statement sqlStatement = conn.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE, ResultSet.CONCUR_UPDATABLE); 
```

并添加“删除”按钮以删除选定的行：

```
JButton removeEmployee = new JButton("Remove Selected");
removeEmployee.addActionListener(new ActionListener()
{
  public void actionPerformed(ActionEvent e)
  {
    dTableModel.removeRow(table.getSelectedRow());
    try
    {
      resultSet.absolute(table.getSelectedRow());
      resultSet.deleteRow();

    } catch (SQLException e1)
    {
      e1.printStackTrace();
    }
  }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T06:01:29.443

```
removePres.addActionListener(new ActionListener(){
    public void actionPerformed(ActionEvent e){
        // Will remove which ever row that is selected
        try {
            // Moves the database to the row currently selected
            // getSelectedRow returns the row number for the selected            
            resultSet.absolute(table.getSelectedRow()+1);
            resultSet.deleteRow();
            dTableModel.removeRow(table.getSelectedRow());
        } catch (SQLException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } 
```

结果集中显示错误？？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T17:56:16.030

谢谢@Germann ...

我解决了它，我将提供解决方案，以便其他人可以从中获得帮助。

您是对的，它`resultSet.absolute(...);`返回布尔值，但它也会将光标移动到其参数中的指定行`resultSet.absolute(table.getSelectedRow());`。那么问题出在哪里。

问题是： `dTableModel.removeRow(table.getSelectedRow());`之前不能调用 该行，`resultSet.absolute(table.getSelectedRow());`因为（第一个）它删除了选定的行，并且因为它被删除了，第二个方法没有选择任何内容，因此`table.getSelectedRow()`返回 -1。并按照文档中的规定，`absolute(-1)`将光标移动到最后一行，并删除基础数据库中的最后一行。

所以解决方案是颠倒这些行的顺序，我更喜欢在之后`resultSet.deleteRow();`

```
 JButton removeEmployee = new JButton("Remove Selected");
    removeEmployee.addActionListener(new ActionListener()
    {
      public void actionPerformed(ActionEvent e)
      {
        try
        {/* here I added +1 because it moves the row to the selected row -1 
            I don't know why. But it now works well */
          resultSet.absolute(table.getSelectedRow()+1);
          resultSet.deleteRow();
          dTableModel.removeRow(table.getSelectedRow());
        } catch (SQLException e1)
        {
          e1.printStackTrace();
        }
      }
    }); 
```

# asp.net - BC30560：“ExtensionAttribute”在命名空间“System.Runtime.CompilerServices”中不明确

> ID：12104883
> 
> 赞同：9
> 
> 时间：2012-08-24T07:23:06.050
> 
> 标签：asp.net, .net, .net-4.0

我有 asp.net 项目（在 .net 2.0 中），我将项目转换为 .net 4.0。在我成功构建项目后，我在浏览器上启动了网站，它抛出了如下错误：

> 编译错误
> 
> 说明：在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。
> 
> 编译器错误消息：BC30560：“ExtensionAttribute”在命名空间“System.Runtime.CompilerServices”中不明确。
> 
> 源错误：
> 
> [没有相关的源代码行]
> 
> 源文件：InternalXmlHelper.vb 行：9
> 
> ...........

请给我一些想法来解决它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T07:58:19.277

在 .NET 2 和 C# 3（或更高版本）编译器中使用扩展方法（用于 LINQ 等）的一个常见技巧是在正确的命名空间中定义您自己的 ExtensionAttribute。

现在您已经升级到更高版本的 .NET，您需要删除这个现在冗余的额外属性。找到它在您的代码中定义的位置并将其删除。还要检查像 LINQBridge 这样的外部库——你不再需要这个了。

找到它的一种方法是使用对象浏览器并搜索 ExtensionAttribute。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-01-07T18:11:15.243

这就是我发现问题的方式。

另一种简单的验证方法：在您的代码中，在某处临时使用该类。例子：

```
System.Runtime.CompilerServices.ExtensionAttribute x = null; 
```

在构建时，这将产生错误：

类型

> 'System.Runtime.CompilerServices.ExtensionAttribute' 存在于两个'c:\Program Files\Reference Assemblies\Microsoft\Framework\v3.5\System.Core.dll'

和 .....

并立即向您展示导致冲突的 2 个来源。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-23T15:47:16.203

我遇到了同样的错误，为我解决的问题是删除主题（在 App_Themes 下）。我还没有尝试重新添加主题以查看它们是否可以工作，但删除它至少可以修复错误。

请注意，我通过查看错误中的编译器详细信息发现它是导致此问题的主题，并注意到它正在编译的唯一 .vb 文件与主题（自动生成）相关。我的项目都是 C#，所以来自 VB 的错误让我寻找 .vb 文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-17T16:31:18.453

我遇到了这个问题，下面列出了对我有用的方法。

线索是错误消息提到`InternalXmlHelper.vb`. 我是 C# 程序员，为什么要提到 VB 组件？

如果您没有明确说明 ASPX 页面的编译语言，则可能会出现此问题。如果您没有明确说明，那么 IIS 将以该站点的默认语言进行编译。如果你是用 C# 写的，没有明确说明编译语言，而 IIS 中默认的编译语言是 C#，那么快乐的日子。但是，如果 IIS 中的默认编译语言设置为 vb（默认情况下似乎是这样），那么您的 C# 页面将像 vb 一样被编译，并且您会收到 BC30560 错误。

最好的解决方法是明确说明您的 aspx 页面的编译语言，方法是在每个 aspx 页面的顶部放置这样的指令：

```
<%@ Page Language="C#" %> 
```

或者，您可以让您的页面不明确（没有页面语言指令）并告诉 IIS 使用什么作为默认编译语言，如下所示：

使用 IIS 管理器 -> 查看您网站的根目录（这将是您的服务器名称），然后 -> 在 ASP.NET 部分 -> 双击 .NET 编译图标（蓝色向下箭头） -> 在常规标题下的设置列表是默认语言的设置 -> 将此设置为`c#`

如果需要，您还可以设置每个网站的默认语言。与上面相同，但将其设置为左侧 IIS 树视图的根下方的网站，而不是它的根。请注意，如果您为网站设置 default-language=c#，则该设置将存储在`web.config`您网站的根目录中 - 在该`<system.web>`部分中，您将具有如下值：`<compilation debug="false" defaultLanguage="c#" />`. 如果您在 中删除或覆盖该设置`web.config`，它将恢复为 IIS 实例的默认设置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-08T18:58:17.083

我有这个错误。只需重新启动 Visual Studio 即可让它消失。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-13T16:25:02.260

如果您对视图或局部视图使用不正确的文件扩展名，则此错误也会发生在 ASP.NET MVC Web 应用程序中。

我无意中使用不正确的扩展名（.ascx 而不是 .cshtml）创建了一个视图，并收到了此错误消息。

将扩展名更改为 .cshtml 解决了该问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-06-24T10:42:55.747

此错误也是因为您的 aspx 文件顶部没有 page 指令。这就是使用VB编译器的原因。

把它写到顶部：

```
<%@ Page Language="C#" %> 
```

# mysql - 在 MySql 中显示过程/功能代码

> ID：12104884
> 
> 赞同：10
> 
> 时间：2012-08-24T07:23:12.273
> 
> 标签：mysql, function, schema, show, procedure

是否有任何选项可以查看 MySql 中的存储过程/函数代码，就像 sql 中的“sp_helptext 过程名”一样？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-24T07:44:47.017

尝试“显示创建过程过程名称”

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-10-18T11:53:50.897

是的，

```
SELECT ROUTINE_DEFINITION FROM information_schema.ROUTINES WHERE SPECIFIC_NAME='procedurename' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T07:42:04.100

您可以从[INFORMATION_SCHEMA.ROUTINES 表中获取信息](http://dev.mysql.com/doc/refman/5.0/en/routines-table.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-20T02:39:01.930

转到 mySQL 工作台

*   右键单击过程，然后选择**ALTER**。（这将为您打开程序的定义（是最简单的方法）。

**或者**

*   您也可以使用命令 SHOW `CREATE PROCEDURE proc_name`；

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-20T17:57:44.950

我一直在尝试，我认为以下两种方法中的一种效果最好。

要列出所有内容（`parameters`、`collating`等），请使用它。

```
 SELECT * FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA in (SELECT DATABASE()) AND ROUTINE_NAME='ProcedureName'; 
```

要仅列出代码，请使用它。

```
SELECT ROUTINE_DEFINITION FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA in (SELECT DATABASE()) AND ROUTINE_NAME='ProcedureName'; 
```

在上述两种情况下，都需要嵌套选择来将结果限制为当前数据库，因为`INFORMATION_SCHEMA`作为系统数据库，它包含实例中安装的每个数据库的详细信息。

# ipad - ipad web 应用程序未针对纵向模式、uiwebview 进行调整，

> ID：12104887
> 
> 赞同：0
> 
> 时间：2012-08-24T07:23:23.260
> 
> 标签：ipad, uiwebview, safari, portrait, iphone-web-app

我有一个适用于 iphone/ipad 的网络应用程序。当我在移动 Safari 中查看它时，它在横向和纵向模式下看起来都不错。但是当我在自己的 ipad 网络应用程序（在 uiwebview 下）中打开它时，它在横向模式下看起来不错，但在纵向模式下内容被截断。

如何修复它。我应该在服务器端还是在 ipad 应用程序中修复它？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:48:55.970

如果它在 Mobile Safari 中工作，而不是在使用 的包装应用程序中工作`UIWebView`，则问题可能来自应用程序，并且当设备旋转到横向时，您的 webview 未正确调整大小。尝试在您的视图设置代码中设置 webview 的[autoresizingMask](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)如下：

```
webView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight; 
```

或者，如果您在 Interface Builder 中定义了 webview，请使用“大小检查器”设置适当的自动调整大小掩码（必须在调整大小图中选择每条红线）。

# vb.net - 如何在我的 Windows 应用程序中拥有自己的设置菜单？

> ID：12104888
> 
> 赞同：1
> 
> 时间：2012-08-24T07:23:29.653
> 
> 标签：vb.net, windows-services

我创建了一个 Windows 服务来定期执行某些任务。现在我希望用户自己更改一些参数。因此，用户应该能够右键单击服务并单击设置，然后应该会出现一个表单。在保存按钮上，所有值都应保存到 app.exe.config 文件中。

有没有人有教程或参考网站？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T07:29:09.850

1) 用户永远不要右键单击 Windows 服务。WS 是在后台运行的定义程序。

2) 您可以创建一个服务控制器，一个与服务交互并发送暂停、启动、停止等命令的 Windows 窗体应用程序。在此类控制器中实现您的用户界面。

你可以开始阅读这篇文章：

[http://msdn.microsoft.com/en-us/library/d56de412(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/d56de412(v=vs.100).aspx)

祝你好运！

# tsql - 存储在临时表中的 sql 查询事务

> ID：12104893
> 
> 赞同：1
> 
> 时间：2012-08-24T07:23:51.260
> 
> 标签：tsql, sql-server-2005

我有一个存储过程构建更新查询，每次循环都存储在临时表中。

构建的总查询 UNKNOWN（2 到 4）

如何在事务中放置多个查询？

例如，临时表在`EXPSQL`( `nvarchar`)列中包含以下行

```
id   EXPSQL
1    Update tableA SET Name = 'Test' WHERE id=1
2    Update tableB SET Name = 'Test2' WHERE id=10 
```

如何开始执行上述查询的循环事务？还是有其他方法？

```
while @id < total
begin
    set @id = @id +1
    select @SQL = EXPSQL FROM #TEMPTABLE WHERE id=@id
    EXEC (@SQL)
end 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T09:56:16.200

如果要全部执行：

```
begin transaction

while @id < total
begin
    set @id = @id +1
    select @SQL = EXPSQL FROM #TEMPTABLE WHERE id=@id
    EXEC (@SQL)

    -- if a error occurs go back to the original state
    if(@@error <> 0)
       rollback transaction
end

commit transaction 
```

* * *

如果要单独执行每个：

```
while @id < total
begin
    set @id = @id +1
    select @SQL = EXPSQL FROM #TEMPTABLE WHERE id=@id

    begin transaction
    EXEC (@SQL)

    -- if a error occurs go back to the original state
    if(@@error <> 0)
       rollback transaction
    else
       commit transaction
end 
```

# mysql - 如何从另一个表中获取有关一个不同列的更多信息？

> ID：12104894
> 
> 赞同：0
> 
> 时间：2012-08-24T07:23:50.560
> 
> 标签：mysql

我有以下查询：

```
SELECT distinct a, b, c, d 
FROM db.table
INNER JOIN db.table2
ON table.name=table2.name2
WHERE e <>'65'; 
```

查询选择在 a、b、c、d 中不同的值。我真正需要的只是不同的`a`。其余列`b,c,d`我需要它们提供有关`a`. 我该如何执行此操作。
知道表以 1:N 连接，其中列`table2.name2`是对 table.name 的外键引用。即，table.name 是唯一值，它可以拥有多于 table2 中的相应记录。

在编写查询方面，以 1:M 连接的两个表和两个完全独立的表之间有什么区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:36:46.653

要实现这一点，您需要使用`GROUP BY`with `GROUP_CONCAT` in `SELECT`：

```
SELECT a,
       GROUP_CONCAT(b) AS b,
       GROUP_CONCAT(c) AS c,
       GROUP_CONCAT(d) AS d
FROM db.table
     INNER JOIN db.table2
        ON table.name=table2.name2
WHERE e <>'65'
GROUP BY a; 
```

# iphone - 从 iPad 上传 base64 格式和大小限制的图像

> ID：12104904
> 
> 赞同：1
> 
> 时间：2012-08-24T07:24:47.307
> 
> 标签：iphone, objective-c, xml, tomcat

我们正在为 iPad 开发一个检查应用程序，用户可以从 iPad 中选择多个图像并将这些图像上传到门户，他也可以对每个特定图像输入评论。

我们正在使用 xml 进行通信并将图像转换为 base64 字符串格式并上传到服务器。

当 xml 大小达到 2 MB 左右时，在服务器端没有接收到 xml，并且 tomcat 服务器返回空指针异常。

如果 xml 大小小于 2 MB，它将正常工作。所以我想知道将图像转换为base64是将图像上传到服务器的正确方法吗？

从 iPad/iPhone 应用程序上传数据是否有大小限制？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:46:20.527

嗨，只需压缩您的图像

```
NSData *imageData = UIImageJPEGRepresentation(theImage, 0.1f); 
```

这会压缩您的图像，然后将其转换为 base64 ..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T16:03:28.513

我们已经将 PUT 用于 HTTPMethod 而不是 POST 并且它工作正常，但我不确定使用 PUT 是否有任何缺点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T07:48:27.367

使用 ASIHTTP 框架将图像从移动设备上传到服务器 使用以下链接了解如何上传图像 [http://allseeing-i.com/ASIHTTPRequest/How-to-use](http://allseeing-i.com/ASIHTTPRequest/How-to-use)不要忘记将 asihttp 框架添加到您的应用程序

# c# - Asp.net：重定向时，DetailsView 取消更新

> ID：12104905
> 
> 赞同：0
> 
> 时间：2012-08-24T07:24:53.743
> 
> 标签：c#, detailsview

我有一个 DetailsView 控件，如下所示：

```
<asp:DetailsView ID="DetailsView1" runat="server" AutoGenerateRows="False" DataKeyNames="IssueId"
    DataSourceID="edsIssues" DefaultMode="Insert" OnItemInserted="DetailsView1_ItemInserted"
    OnItemInserting="DetailsView1_ItemInserting" OnItemUpdated="DetailsView1_ItemUpdated"
    OnItemUpdating="DetailsView1_ItemUpdating">
    <Fields> 
```

插入和更新后，我想重定向到另一个页面（包含 GridView 的列表页面）。所以我这样做了：

```
protected void DetailsView1_ItemInserted(object sender, DetailsViewInsertedEventArgs e)
{
    Response.Redirect("IssueList.aspx");
}

protected void DetailsView1_ItemUpdated(object sender, DetailsViewUpdatedEventArgs e)
{
    Response.Redirect("IssueList.aspx");
} 
```

插入新记录时，它工作正常。但是，在更新记录时，重定向会导致更新取消。

如果我从 ItemUpdated 中删除 Repsonse.Redirect 则更新有效 - 但随后 DetailsView 加载为空白（我猜是在插入模式下）。

更新后如何在不取消更新的情况下重定向到另一个页面？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T09:20:50.610

尽管我不喜欢这个答案，因为它似乎是错误的——使用 Threading.Thread.Sleep() 实际上确实可以完成这项工作。我很想知道是否有更好的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T15:04:56.023

试试这个 VB

Protected Sub dv_Itemclick(ByVal sender As Object, ByVal e As DetailsViewCommandEventArgs) Handles yourDetailsViewitem.ItemCommand If (e.CommandName = "Cancel") Then Response.Redirect("yourPage.aspx") End If End Sub

# jakarta-ee - 我应该使用 dataTable 还是 panelGrid？JSF

> ID：12104906
> 
> 赞同：1
> 
> 时间：2012-08-24T07:24:54.343
> 
> 标签：jakarta-ee, jsf-2

```
<table id="tbl" cellpadding="5" cellspacing="0" border="0" class="display" style="padding-top: 10px;width:100%">
    <thead>
       <tr>
            <th width="20%">Emp No</th>
            <th width="15%">title</th>
            <th width="20%">Name</th>
            <th width="10%">shift</th>
        </tr>
    </thead>
    <tfoot>
         <tr>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th></th> 
            <th></th>
        </tr>
    </tfoot>
    <tbody style="cursor:pointer;">
        Yeh aik arzi tehreer hai
    </tbody>
</table> 
```

当我开始为我的 JSF 应用程序转换此代码时，我发现我可以使用其中一个`<h:dataTable>`或`<h:panelGrid>`因为两者都在这里用作替代 .`table in html`所以我想问的第一件事是我应该在这里使用什么？第二，
我该如何处理`<thead>`，因为我没有在 JSF 中找到他们的替代品。所以请任何人都可以为此付出一些努力来帮助我谢谢`<tfoot>``<tbody>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:38:19.500

`<h:dataTable>`如果您（在您的支持 bean 中）有一组需要显示的对象，这是一个不错的选择。例如，如果您有一个对象 Employee 列表（带有 Id、Name、Surname 等），那么这是最佳选择。

[在这里您可以找到如何使用 dataTable](http://www.javabeat.net/2008/04/hdatatable-java-server-faces-jsf/)的示例。

`<h:panelGrid>`如果您以某种方式布局各种元素，这是一个不错的选择。一种情况是，您必须将空间分别分成 80% 和 20% 的两列。不过，“我”建议为此使用 (panelGroup)，请参阅[http://www.w3.org/2002/03/csslayout-howto](http://www.w3.org/2002/03/csslayout-howto)

***编辑：***对于`<h:dataTable>`页眉、页脚等，您必须使用标签，`<f:facet />` 请参阅[JSF 数据表中的多个页脚行](https://stackoverflow.com/questions/751860/multiple-footer-rows-in-a-jsf-datatable)

# vb.net - 如何将此命令从 C# 转换为 VB.NET？

> ID：12104909
> 
> 赞同：0
> 
> 时间：2012-08-24T07:25:00.620
> 
> 标签：vb.net, mongodb, mongodb-.net-driver

```
// Traditional approach,
// fluent interface
BsonArray a2 = new BsonArray().Add(1).Add(2);

// Values argument
int[] values = new int[] { 1, 2 };
BsonArray a3 = new BsonArray(values); //It doesn't work in VB.NET

// Collection initializer syntax
BsonArray a4 = new BsonArray { 1, 2 }; //This doesn't work in VB.NET 
```

特别是，我想在[MongoDB](http://en.wikipedia.org/wiki/MongoDB) VB.NET 驱动程序中找到“内部”框。

如何将以下语句合并为一行？

```
Dim b As New BsonDocument
Dim box As New BsonDocument
Dim d = New BsonArray({{1, 2}, {3, 5}})
box.Add("$box", d)
'box.Add("$box", d)
b.Add("$within", box)
query.Add("$within", box) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T12:05:10.610

为什么你说第二个和第三个不起作用？看来 BsonArray 构造函数有一个需要 a 的重载`IEnumerable(Of Integer)`，所以这两个都应该工作（除了你的语法是错误的，也就是说。正确的语法是：

```
' values argument
Dim values() As Integer = {1, 2}
Dim a3 As BsonArray = New BsonArray(values)

' collection initializer syntax
Dim a4 As BsonArray = New BsonArray(New Integer(){1, 2}) 
```

# ios - 如何在 iPhone 中制作锁屏？

> ID：12104910
> 
> 赞同：-3
> 
> 时间：2012-08-24T07:25:03.077
> 
> 标签：ios

我想在 iPhone 上制作一个锁定屏幕，上面只有一个按钮，标题为解锁，点击该按钮后，条形码扫描仪打开，扫描条形码，解锁手机。即使单击或双击主页按钮，锁定屏幕也应保持不变。

我可以在 iPhone 上做到这一点吗？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:39:05.530

不，你不能。
建议：阅读[人机界面指南](http://developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Conceptual/MobileHIG/Introduction/Introduction.html)

# delphi - 如何确定一个单元是否已编译为 Delphi 程序？

> ID：12104914
> 
> 赞同：14
> 
> 时间：2012-08-24T07:25:34.490
> 
> 标签：delphi, delphi-2007

我希望能够确定一个特定的单元是否已被编译到 Delphi 程序中，例如单元 SomeUnitName 是我的一些程序的一部分，但不是其他程序的一部分。我想要一个功能

```
function IsSomeUnitNameInProgram: boolean; 
```

（当然没有在 SomeUnitName 中声明，因为在这种情况下它总是被包含在内）如果单元已编译到程序中，则在运行时返回 true，否则返回 false。

到目前为止，我的想法一直是使用 jcl 调试信息（从详细的映射文件编译而来），我基本上将其添加到所有程序中以确定此信息，但如果不需要 jcl，我更喜欢它。

向 SomeUnitName 添加代码不是一种选择。

这目前适用于 Delphi 2007，但最好也适用于 Delphi XE2。

有什么想法吗？

自从@DavidHeffernan 问起这方面的一些背景：

这不仅适用于一个程序，而且适用于 100 多个不同的程序。其中大部分在内部使用，但也有一些交付给客户。由于我们使用了很多库，有些人在各种开源许可证下购买了其他库，我希望能够在 about 框中添加一个“credits”选项卡，该选项卡仅显示那些实际编译到程序中的库，而不是所有库。多亏了 TOndrej 的回答，这现在完全按照我的意愿工作了：如果程序使用了一个库，代码会检查一个总是链接的单元，如果它在那里，它会添加库名称、版权和一个链接到关于框。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-24T08:22:58.887

单元名称被编译到“PACKAGEINFO”资源中，您可以在其中查找它：

```
uses
  SysUtils;

type
  PUnitInfo = ^TUnitInfo;
  TUnitInfo = record
    UnitName: string;
    Found: PBoolean;
  end;

procedure HasUnitProc(const Name: string; NameType: TNameType; Flags: Byte; Param: Pointer);
begin
  case NameType of
    ntContainsUnit:
      with PUnitInfo(Param)^ do
        if SameText(Name, UnitName) then
          Found^ := True;
  end;
end;

function IsUnitCompiledIn(Module: HMODULE; const UnitName: string): Boolean;
var
  Info: TUnitInfo;
  Flags: Integer;
begin
  Result := False;
  Info.UnitName := UnitName;
  Info.Found := @Result;
  GetPackageInfo(Module, @Info, Flags, HasUnitProc);
end; 
```

要为当前可执行文件执行此操作，请传递它`HInstance`：

```
HasActiveX := IsUnitCompiledIn(HInstance, 'ActiveX'); 
```

（[`GetPackageInfo`](http://docwiki.embarcadero.com/Libraries/en/System.SysUtils.GetPackageInfo)枚举对于具有许多单元的可执行文件可能效率低下的所有单元，在这种情况下，您可以剖析 SysUtils 中的实现并编写您自己的版本，当找到该单元时停止枚举。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-24T09:31:53.243

此函数将返回应用程序中包含的单元名称列表。适用于 Delphi 2010。未针对其他编译器进行验证。

```
function UnitNames: TStrings;
var
  Lib: PLibModule;
  DeDupedLibs: TList<cardinal>;
  TypeInfo: PPackageTypeInfo;
  PInfo: GetPackageInfoTable;
  LibInst: Cardinal;
  u: Integer;
  s: string;
  s8: UTF8String;
  len: Integer;
  P: PByte;
begin
result := TStringList.Create;
DeDupedLibs := TList<cardinal>.Create;
Lib := LibModuleList;
try
  while assigned( Lib) do
    begin
    LibInst := Lib^.Instance;
    Typeinfo := Lib^.TypeInfo;
    if not assigned( TypeInfo) then
      begin
      PInfo := GetProcAddress( LibInst, '@GetPackageInfoTable');
      if assigned( PInfo) then
        TypeInfo := @PInfo^.TypeInfo;
      end;
    if (not assigned( TypeInfo)) or (DeDupedLibs.IndexOf( LibInst) <> -1) then continue;
    DeDupedLibs.Add( LibInst);
    P := Pointer( TypeInfo^.UnitNames);
    for u := 0 to TypeInfo^.UnitCount - 1 do
      begin
      len := P^;
      SetLength( s8, len);
      if len = 0 then Break;
      Inc( P, 1);
      Move( P^, s8[1], len);
      Inc( P, len);
      s := UTF8ToString( s8);
      if Result.IndexOf( s) = -1 then
        Result.Add( s)
      end
    end
finally
  DeDupedLibs.Free
  end
end; 
```

问题中建议使用的示例...

```
function IsSomeUnitNameInProgram: boolean;
var
  UnitNamesStrs: TStrings;
begin
UnitNamesStrs := UnitNames;
result := UnitNamesStrs.IndexOf('MyUnitName') <> -1;
UnitNamesStrs.Free
end; 
```

# linux-kernel - 如何从用户空间终端调用内核模块到应用程序中

> ID：12104921
> 
> 赞同：-1
> 
> 时间：2012-08-24T07:25:55.300
> 
> 标签：linux-kernel, kernel, kernel-module

[http://www.makelinux.net/ldd3/chp-2-sect-3#chp-2-ITERM-4135](http://www.makelinux.net/ldd3/chp-2-sect-3#chp-2-ITERM-4135)这个链接描述了用户空间和内核空间的通信。任何人都可以用c中的一个简单的用户空间应用程序来解释它，该程序将链接和通信（发送/接收值）到内核对象。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:32:33.820

该程序`insmod`在大多数 Linux 机器上都可用（但需要 sudo 权限才能运行）指示内核通过*系统调用* `init_module`加载指定的模块（内核对象） 。

更一般地说，用户空间程序通过这些系统调用与内核通信，这些系统调用本质上是用户空间对内核的请求。您用 C 编写的任何应用程序都必须以某种方式使用系统调用与系统进行交互（例如，在后台`printf`使用`write`系统调用将字符放在屏幕上）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T07:38:53.423

只需打开一个文件`open(2)`。编译器将为此调用添加代码到应用程序，这会将函数参数放在堆栈上并使其以某种方式崩溃（请参阅[系统调用](https://en.wikipedia.org/wiki/System_call)）。内核捕获所有崩溃并处理它们。

由于这是一个“好”的崩溃，内核将查找要调用的函数，从堆栈中获取参数并调用该函数。

这种复杂方法的原因是安全性：通过“崩溃”，应用程序完全放弃了控制。CPU 也会切换到不同的模式。在这种模式下，它可以访问硬件（在“应用程序”模式下，对硬件的任何访问都会导致“非法访问”崩溃，从而终止您的应用程序）。

该`open(2)`功能本身不能做太多事情。相反，它将检查哪个文件系统可以处理请求并调用文件系统的打开函数。文件系统被实现为内核模块。

# c# - 在 C# 中以指数格式表示双精度值

> ID：12104922
> 
> 赞同：2
> 
> 时间：2012-08-24T07:25:59.043
> 
> 标签：c#

需要以浮点格式和指数格式
显示值如果值大于或等于0.01且小于或等于1000以指数格式显示否则以浮点格式显示

例如：3.230000000 显示为 3.23 0.00001 显示为 1E-05

但是我的代码有问题，如果给定的数字是 1，那么数字显示为 1.00。

```
 if (dValue >= 0.01|| dValue <= 1000.0)
        return (string.Format("{0:0.##E+00}", dValue));
     else
        return (string.Format("{0:F2}", dValue)); 
```

请让我知道如何检查数字不包含十进制值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T07:37:21.103

将数字四舍五入到小数点后两位和整数，看看结果是否“足够接近”：

```
if (dValue >= 0.01 && dValue <= 1000.0)
{
    if (Math.Abs(Math.Round(dValue, 2) - Math.Round(dValue, 0)) < 0.005) {
        return string.Format("{0:F0}", dValue);
    else
        return string.Format("{0:F2}", dValue);
}
else return (string.Format("{0:0.##E+00}", dValue)); 
```

这里要注意的是（与浮点数一样）两个舍入结果之间的比较*不*应该是相等比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T07:40:11.933

替换你的最后一行

```
return (string.Format("{0:F2}", dValue)) 
```

到

```
return (string.Format("{0:0.##}", dValue)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T07:36:22.743

考虑简单地使用[G 格式](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)。

或者使用[Math.Truncate](http://msdn.microsoft.com/en-us/library/c2eabd70)来获取整数部分，看看它是否与原始数字相同（需要考虑输出格式精度以与设计者 eps 进行比较，在您的情况下可能为 0.005）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T08:02:27.757

太多时间。:)

您将获得最大 2 位数的值，例如 3.234。

```
class Program
{
    static void Main(string[] args)
    {
        Console.WriteLine(Format(0.00001));
        Console.WriteLine(Format(1));
        Console.WriteLine(Format(3.2));
        Console.WriteLine(Format(3.22));
        Console.WriteLine(Format(3.256));
        Console.ReadLine();
    }

    static string Format(double dValue)
    {
        if (dValue >= 0.01 && dValue <= 1000.0)
        {
            int temp = (int)Math.Round(dValue * 100);
            if (temp % 100 == 0)
                return ((int)dValue).ToString();
            else if (temp % 10 == 0)
                return (string.Format("{0:F1}", dValue));
            else
                return (string.Format("{0:F2}", dValue));
        }
        else
            return (string.Format("{0:0.##E+00}", dValue));
    }
} 
```

给

```
1E-05
1
3,2
3,22
3,26 
```

可能有更清洁的解决方案？！

# javascript - 弹出效果

> ID：12104924
> 
> 赞同：0
> 
> 时间：2012-08-24T07:26:17.523
> 
> 标签：javascript, jquery, html, css

```
var popup;
jQuery(document).ready(function(){ 
 jQuery(window).bind('load',windowLoadComplete);  
});

function windowLoadComplete() {
  var settings = new Object();
  popup = new SSKpopup(settings);
  popup.createPopup();

  jQuery('a').each(function(n){
    if(jQuery(this).attr('href').indexOf("popup@")>-1) {
       jQuery(jQuery(this).attr('href').split("popup@")[1]).hide();
       jQuery(this).click(function(e) {
         e.preventDefault();
         popup.loadContent(jQuery(jQuery(this).attr('href').split("popup@")[1]));
        });

    }                           
  });
} 
```

我有一段代码是创建一个包含图片的弹出窗口，信息就像[http://jqueryui.com/demos/tabs/](http://jqueryui.com/demos/tabs/)在我的 html 代码中创建弹出窗口如下，

```
<a class="popup" href="/main/popup@#hulk">Key Speakers</a>
<br>
Chairman
</p>
<div id="hulk" style="width: 450px; display: none;">
<img class="popup_img" border="0" alt="" src="/main/images/speaker.jpg">
<p>Content descriping the speakers</p
</div> 
```

当我在 href 上使用 firebug 时，我看到的地址与正常位置不同，如果我将其插入到`index.php/main/popup@$hulk`与其他所有链接相同的位置，然后单击它，页面会将我定向到`localhost/xampp/`. 当然没有显示弹出窗口。

# java - 图像尺寸变小

> ID：12104928
> 
> 赞同：0
> 
> 时间：2012-08-24T07:26:47.857
> 
> 标签：java, image, graphics2d

下面是一个小代码，它输入包含图像的文件，然后将其倾斜一个角度。现在的问题是：与输入文件相比，输出文件的分辨率较低。在我的例子中，输入文件大小为 5.5 MB，输出文件大小为 1.1 MB。为什么？

```
/**
 * 
 * @param angle Angle to be rotate clockwise. Ex: Math.PI/2, -Math.PI/4
 */
private static void TurnImageByAngle(File image, double angle)
{
    BufferedImage original = null;
    try {
        original = ImageIO.read(image);        
        GraphicsConfiguration gc = getDefaultConfiguration();
        BufferedImage rotated1 = tilt(original, angle, gc);        
        //write iamge
        ImageIO.write(rotated1, getFileExtension(image.getName()), new File("temp"+" "+angle+"."+getFileExtension(image.getName())));
    } catch (IOException ex) {
        Logger.getLogger(RotateImage2.class.getName()).log(Level.SEVERE, null, ex);
    }
}

public static GraphicsConfiguration getDefaultConfiguration() {
    GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
    GraphicsDevice gd = ge.getDefaultScreenDevice();
    return gd.getDefaultConfiguration();
}

public static BufferedImage tilt(BufferedImage image, double angle, GraphicsConfiguration gc) {
    double sin = Math.abs(Math.sin(angle)), cos = Math.abs(Math.cos(angle));
    int w = image.getWidth(), h = image.getHeight();
    int neww = (int)Math.floor(w*cos+h*sin), newh = (int)Math.floor(h*cos+w*sin);
    int transparency = image.getColorModel().getTransparency();
    BufferedImage result = gc.createCompatibleImage(neww, newh, transparency);
    Graphics2D g = result.createGraphics();
    g.translate((neww-w)/2, (newh-h)/2);
    g.rotate(angle, w/2, h/2);
    g.drawRenderedImage(image, null);
    return result;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T10:25:45.573

如果您查看代码，那就不足为奇了（在不了解代码的作用的情况下复制和粘贴*有*其缺点）。倾斜() 方法会付出额外的努力（在其第三行）以使图像大小合适。

如果你仔细想想，你*不能*指望图像保持相同的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T07:37:51.050

生成的图像可能与原始图像的颜色模型不同

```
gc.createCompatibleImage(...) 
```

正在创建一个 BufferedImage，其颜色模型与 GraphicsConfiguration 关联的设备兼容。这可能会减小图像的大小。

ImageIO 也可能正在应用与原始压缩算法不同的压缩算法

# node.js - _id 在 mongodb 文档中的子对象中（使用 Mongoose）

> ID：12104931
> 
> 赞同：2
> 
> 时间：2012-08-24T07:27:18.143
> 
> 标签：node.js, mongodb, mongoose

我正在 Mongoose 中创建这样的结构：

```
var Access = new Schema({
  userId         : { type: ObjectId, unique: true },
  key            : { type: String, index: true },
  isOwner        : { type: Boolean, index: true },
});
mongoose.model('Access', Access);
var Workspace = new Schema({
  name           : { type: String, lowercase: true, unique: true},
  activeFlag     : Boolean,
  settings       : {
    welcomeMessage  : String,
    invoiceTemplate : String,
    longName        : String,
    defaultCountry  : String,
    countryId       : { type: ObjectId, index: true },
  },
  access          : [ Access ],

});
mongoose.model('Workspace', Workspace); 
```

添加一些文档后，我看到了结果：

```
{ "activeFlag" : true, 
  "name" : "w7",
  "_id" : ObjectId("5036131f22aa014c32000006"),
  "access" : [  
   {  "user": "merc",
      "key" : "673642387462834", 
      "isOwner" : true,
      "_id" : ObjectId("5036131f22aa014c32000007") 
   }
   ],
   "__v" : 0
} 
```

我`_id`对子文档中的内容感到困惑，如果我将它添加为子结构而不是子模式，这似乎不会发生。所以问题：

1）那`_id`是从哪里来的？猫鼬的司机在做吗？如果是这样，我怎样才能使用直接的 Mongodb 达到相同的行为？只需添加一个 ObjectId 字段？

2) 什么时候使用子文档，什么时候只使用数据结构？

3) 我还没有开始使用我的 Web 应用程序的重要部分。但是，如果您允许 JsonRest 访问文档中的子记录，那么该 ID 不是*真的*存在吗？我的意思是*真的很有用？*

一如既往地感谢你！

默克。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T10:51:04.063

编辑：根据下面的评论删除了答案的重复数据。

要回答您的另一个问题，即如何在 MongoDB 本身中复制它，您可以按如下方式创建该文档：

```
db.foo.insert(
    { "activeFlag" : true, 
      "name" : "w7",
      "access" : [  
      {  "userId" : ObjectId(),
         "key" : "673642387462834", 
         "isOwner" : true,
         "_id" : ObjectId() 
      }
      ],
    "__v" : 0
}) 
```

解释一下，根文档中的 _id 是隐含的 - 如果未指定，它将由 MongoDB 添加。但是，要将 _id 放入子文档，您必须通过调用 ObjectId() 函数手动指定它。我的文档看起来像这样：

```
db.foo.find().pretty()
{
    "_id" : ObjectId("50375bd0cee59c8561829edb"),
    "activeFlag" : true,
    "name" : "w7",
    "access" : [
        {
            "userId" : ObjectId("50375bd0cee59c8561829ed9"),
            "key" : "673642387462834",
            "isOwner" : true,
            "_id" : ObjectId("50375bd0cee59c8561829eda")
        }
    ],
    "__v" : 0
} 
```

# c# - 在 onblur 文本框事件 asp.net C# 上查询数据库

> ID：12104934
> 
> 赞同：0
> 
> 时间：2012-08-24T07:27:35.800
> 
> 标签：c#, asp.net

我想在文本框的 onblur 事件上查询数据库。我想要的简单是，当我在第一个文本框中输入 ID 并在 onblur 事件发生后，数据库中相应 ID 的名称显示在另一个文本框或标签中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T08:16:28.723

您可以尝试使用此代码，在您的活动中编辑此代码

```
 var yourParameter = ....; //Your Value from your event , the value of textbox
   var mySelectQuery = ....; //Enter name stored procedure
   var myConnectionString = ....; //Enter string connection

   using(var myConnection = new SqlConnection(myConnectionString))
   {
   using(var myCommand = new SqlCommand(mySelectQuery, myConnection))
   {
      myConnection.Open();
      myCommand.CommandType =  CommandType.StoredProcedure;
      myCommand.Parameters.Add(
    new SqlParameter("@YourParameter", yourParameter));
      SqlDataReader myReader = myCommand.ExecuteReader(CommandBehavior.CloseConnection);
      while(myReader.Read()) 
      {
        Console.WriteLine(myReader.GetString(0));
      }
   }
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T08:21:24.470

为此使用 ontextboxchanged 事件。

```
<asp:TextBox ID="TextBox1" runat="server" AutoPostBack="true" OnTextChanged="TextBox1_TextChanged" />

  protected void TextBox1_TextChanged(object sender, EventArgs e)
{
   //call the database stored procedure
} 
```

# apple-push-notifications - 关于 Apple APNS 的说明

> ID：12104935
> 
> 赞同：3
> 
> 时间：2012-08-24T07:27:39.133
> 
> 标签：apple-push-notifications

APNS 反馈服务是否考虑了所有可能导致通知传递失败的原因。失败可能有多种原因，例如

```
a. The user has uninstalled the application.

b. The device is switched off for a longer duration.

c. The device does not have internet connection. 
```

“反馈服务”上的苹果文档说

“如果提供商尝试向应用程序发送推送通知，但该应用程序不再存在于设备上，则设备会将这一事实报告给 Apple Push Notification Service。这种情况通常发生在用户卸载应用程序时”

这似乎表明 APNS 只会使已卸载应用程序的设备无效。谁能澄清我的假设是否正确？

APNS 在将设备列入反馈服务黑名单之前尝试传递通知多少次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T10:40:45.587

正如您正确说明的那样，反馈服务只会返回已卸载应用程序的设备令牌。

关于情况b和c：

b) 和 c)，取自[官方推送通知指南中](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)**的服务质量**部分，它声明如下：

> Apple Push Notification Service 包括一个默认的服务质量 (QoS) 组件，该组件执行存储和转发功能。
> 
> 如果 APNs 尝试发送通知但设备处于离线状态，则 QoS 会存储通知。
> 
> 它只为设备上的每个应用程序保留一个通知：从该应用程序的提供者处收到的最后一个通知。
> 
> 当离线设备稍后重新连接时，QoS 会将存储的通知转发给设备。QoS 将通知保留一段有限的时间，然后再将其删除。

我相信这回答了这些问题；关于“在被列入黑名单之前尝试了多少次”-我真诚地怀疑您会为此找到任何具体数字。（其他人会将它们用作解决方法）

完成消息传递后，我强烈建议连接到反馈服务，查看是否有任何令牌被拒绝，然后立即从数据库中删除这些令牌。希望这可以帮助！

# java - Java 集合没有 Map 作为集合框架的一部分

> ID：12104938
> 
> 赞同：10
> 
> 时间：2012-08-24T07:27:45.960
> 
> 标签：java, collections, map

如果您查看[**集合框架**](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collection.html)，您将看到以下内容，但 Map 不在接口列表中。当我们谈论 map 时，我们说它是集合框架的一部分，所以如果 Map 是集合框架的一部分，那么为什么它不在接口列表中。

```
 java.util
Interface Collection

All Known Subinterfaces:
    BeanContext, BeanContextServices, List, Set, SortedSet

All Known Implementing Classes:
    AbstractCollection, AbstractList, AbstractSet, ArrayList, BeanContextServicesSupport, BeanContextSupport, HashSet, LinkedHashSet, LinkedList, TreeSet, Vector 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-24T07:30:04.143

“集合框架”和`Collection`接口不是一回事。

虽然您*可以*将地图视为条目的集合，`Map`但不直接支持 - 您可以使用该`entrySet`方法获取一组条目。

但从根本上讲，您需要区分“集合框架”和`Collection`接口。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-24T07:35:07.080

`Maps`工作在一起`key/value pairs`，而`other collections`工作在一起`just values`。Map 将键映射到值。它允许将其内容视为一组键、一组值和一组键值映射。

检查以下链接。用神谕回答。 [https://docs.oracle.com/javase/tutorial/collections/](https://docs.oracle.com/javase/tutorial/collections/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-24T07:33:16.047

它是集合框架的一部分，但不实现`java.util.Collection`接口。

这是层次结构的不同分支。如果需要，您可以在与 Collection 界面相同的层次结构级别上查看它。

Collection 接口由类 List 集合（是其根）实现，而 Map 由类 KEY-VALUE 集合（是其根）实现。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-24T07:30:43.303

因为 Map 是三个集合：键、值和键值对。

决定默认迭代哪一个并不容易，因此它实现了 3 次接口`keySet()`（`values()`和`entrySet()`）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-24T07:30:29.510

`Map`接口不是接口的扩展`Collection`。但是，它是一种用于保存数据集合的结构。

# python - 对嵌套列表求和

> ID：12104939
> 
> 赞同：1
> 
> 时间：2012-08-24T07:27:47.060
> 
> 标签：python, string, recursion, nested-lists

> **可能重复：**
> [在 Python 中展平（不规则）列表列表](https://stackoverflow.com/questions/2158395/flatten-an-irregular-list-of-lists-in-python)

在尝试展平列表时，如果我传递字符串，我会遇到无限递归。据我了解，这是因为字符串的第一个元素又是一个字符串，而字符串又可以被迭代。我通过查看我的元素是否像字符串一样嘎嘎声解决了这个问题，因此出现了第二个异常。这似乎相当混乱。此外，真正的问题来自字符串的递归没有“基本情况”这一事实。是否还有其他具有此属性的对象？

有没有人有更清洁的解决方案？

```
def nestedsum(lst, init_sum):
    for itm in lst:
        try:
            init_sum +=itm
        except TypeError as e:
            #check if we have some string iterator
            # as this can cause infinite recurrsion
            try:
                itm + ''            
            except TypeError as e2:
                init_sum +=nestedsum(itm)             
            else:
                raise TypeError("Strings cannot be summed over")
    return init_sum 
```

提前致谢。抱歉，如果某处有类似的帖子，但我没有运气找到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:39:02.443

我相信这会做你想要的，并且也适用于字符串。

```
def nestedsum(lst, init_sum):
    for itm in lst:
        if isinstance(itm, (float, int)):
            init_sum += itm
        elif isinstance(itm, (tuple, list)):
            init_sum += nestedsum(itm, init_sum)
        else:
            continue
    return init_sum 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T07:43:24.867

可能是更好的方法，但您可以使用`isinstance()`.

```
def sum_messy_nest(l, current=0):
    for item in l:
        if isinstance(item, int) or isinstance(item, float):
            current += item
        elif isinstance(item, list):
            current += n(item, current)
        else:
            raise TypeError("I don't know this: {}".format(repr(item)))
    return current 
```

# php - codeigniter 从视图重定向

> ID：12104948
> 
> 赞同：1
> 
> 时间：2012-08-24T07:29:04.833
> 
> 标签：php, codeigniter

我正在完全在 codeigniter 上构建一个站点。我已将默认控制器设置为 cuff。因此，每当用户键入域名时，它都会将控制权交给该控制器。

```
class Cuff extends CI_Controller {
 public function __construct()
       {
            parent::__construct();
            $this->load->helper('url');
       }

    public function index()
    {
        $this->load->view('index');
    }

    public function navigate()
    {
        echo "test";
        exit;
}

} 
```

在我的索引视图中，我想要一个锚点导航到我的默认控制器中的一个函数。所以当我写 的时候`<a href="<?php echo base_url();?>navigate">our collection</a>`，它说找不到页面。

我什至像这样设置了基本网址

```
$config['base_url'] = "http://".$_SERVER['HTTP_HOST'];
$config['base_url'] .= preg_replace('@/+$@','',dirname($_SERVER['SCRIPT_NAME'])).'/'; 
```

似乎无法弄清楚这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T07:32:01.633

您错过了控制器名称

```
<a href="<?php echo base_url();?>cuff/navigate">our collection</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T07:40:46.743

只需您使用

```
"<?php echo site_url();?>/cuff/navigate">our collection</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T09:09:54.897

问题出在你的路由上。

编辑您的**routes.php**（位于文件夹**../application/config/ 中**）并添加以下代码：

```
$route['navigate'] = "Cuff/navigate"; 
```

有关 Codeingiter URI 路由的更多信息：http:
[//codeigniter.com/user_guide/general/routing.html](http://codeigniter.com/user_guide/general/routing.html)

希望这对您有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T07:53:24.237

放`$config['base_url'] ='';`

在您的`.htaccess`文件中：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|js|css|favicon|robots\.txt)
RewriteRule ^(.*)$ /index.php?/$1 [L] 
```

确保您的控制器位于控制器的文件夹中（不是任何子文件夹）并且名称正确`cuff.php`

尝试导航到`http://yoursite/cuff/navigate`

如果您仍然看到错误，请尝试将最后一行重写`.htaccess`为：

```
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

（没有问号）。

请告诉是否有帮助！

编辑：您的链接最好都采用这种形式：

```
<a href="<?php echo site_url('cuff/navigate');?>">Link</a> 
```

# c# - 使用 Linq-to-SQL 添加多条记录

> ID：12104952
> 
> 赞同：8
> 
> 时间：2012-08-24T07:29:13.287
> 
> 标签：c#, sql-server-2008, linq-to-sql

我想使用 Linq to SQL 将多行添加到表中

```
 public static FeedbackDatabaseDataContext context = new FeedbackDatabaseDataContext();
    public static bool Insert_Question_Answer(List<QuestionClass.Tabelfields> AllList)
    {
          Feedback f = new Feedback();
          List<Feedback> fadd = new List<Feedback>();
            for (int i = 0; i < AllList.Count; i++)
            {
                f.Email = AllList[i].Email;
                f.QuestionID = AllList[i].QuestionID;
                f.Answer = AllList[i].SelectedOption;
                fadd.Add(f);
            }
            context.Feedbacks.InsertAllOnSubmit(fadd);
            context.SubmitChanges();
        return true;            
    } 
```

当我将记录添加到列表对象中时，即**fadd记录被****AllList**的最后一个值覆盖

 *** * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-24T07:55:02.627

我迟到了，但我想你可能想知道 for 循环是不必要的。更好地使用 foreach （您不需要索引）。

当您使用 LINQ（为清晰起见重命名方法）时，它会变得更加有趣：

```
public static void InsertFeedbacks(IEnumerable<QuestionClass.Tabelfields> allList)
{
    var fadd = from field in allList
               select new Feedback
                          {
                              Email = field.Email,
                              QuestionID = field.QuestionID,
                              Answer = field.SelectedOption
                          };
    context.Feedbacks.InsertAllOnSubmit(fadd);
    context.SubmitChanges();
} 
```

顺便说一句，您不应该保留一个始终访问的数据上下文；[最好](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/2625b105-2cff-45ad-ba29-abdd763f74fe)在 using 语句中在本地创建一个，以正确处理数据库断开连接。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-24T07:32:22.130

您应该在 for 循环的范围内创建反馈对象，因此将您的方法更改为：

```
public static bool Insert_Question_Answer(List<QuestionClass.Tabelfields> AllList)
{
      List<Feedback> fadd = new List<Feedback>();
        for (int i = 0; i < AllList.Count; i++)
        {
            Feedback f = new Feedback();
            f.Email = AllList[i].Email;
            f.QuestionID = AllList[i].QuestionID;
            f.Answer = AllList[i].SelectedOption;
            fadd.Add(f);
        }
        context.Feedbacks.InsertAllOnSubmit(fadd);
        context.SubmitChanges();
    return true;            
} 
```**

# macos - 如何将行从 NSOutlineView 拖到 NSTableview

> ID：12104955
> 
> 赞同：0
> 
> 时间：2012-08-24T07:29:40.730
> 
> 标签：macos, cocoa, xcode4.2, nsdragginginfo

我正在学习可可中的拖放...我无法将行从`NSOutlineView` 拖放到`NSTableView`它对我来说很困难..我尝试了以下方法..

```
- (BOOL)outlineView:(NSOutlineView *)outlineView writeItems:(NSArray *)items toPasteboard:(NSPasteboard *)pasteboard proposedChildIndex:(NSInteger)index
- (NSDragOperation)outlineView:(NSOutlineView *)outlineView validateDrop:(id <NSDraggingInfo>)info proposedItem:(id)item proposedChildIndex:(NSInteger)index
- (BOOL)outlineView:(NSOutlineView *)outlineView acceptDrop:(id <NSDraggingInfo>)info item:(id)item childIndex:(NSInteger)index 
```

但我不能执行 darg 和 drop。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T09:23:08.287

您还必须调用`registerForDraggedTypes:`目标表视图以注册表视图将接受的丢弃类型。

# php - 使用循环获取特定帖子以填写网站的特定区域

> ID：12104956
> 
> 赞同：0
> 
> 时间：2012-08-24T07:29:45.293
> 
> 标签：php, wordpress

是否可以使用循环来查询特定帖子并在我的页面上显示帖子内容、标题和自定义字段？

我在想这样的事情：

```
if (have_posts() && the_post().id == 66) : while (have_posts()) : the_post(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:36:40.330

听起来您需要使用`query_posts()`where p = post_id (1)

```
<?php query_posts('p=1'); ?> 
<?php while (have_posts()) : the_post(); ?>
     <?php the_title(); ?>
     <?php the_content(); ?>
<?php endwhile; ?> 
```

# c# - 无法删除 C#.net 中的现有文件

> ID：12104957
> 
> 赞同：0
> 
> 时间：2012-08-24T07:29:46.233
> 
> 标签：c#, asp.net, file-upload

我正在尝试在 asp.net 中上传文件。文件可以是图片或pdf。如果文件已经存在，那么我必须删除现有文件并上传新文件。但是，如果我尝试删除现有文件，则会显示错误“该进程无法访问该文件，因为它正在被另一个进程使用”这是我的文件上传代码。

```
if (FileUploadFollowUpUN.HasFile)
{
    if (Request.QueryString.Count > 0 && Request.QueryString["PCD"] != null)
    {
        filename = System.IO.Path.GetFileName(FileUploadFollowUpUN.FileName.Replace(FileUploadFollowUpUN.FileName, Request.QueryString["PCD"] + " " + "D" + Path.GetExtension(FileUploadFollowUpUN.FileName)));
        SaveFilePath = Server.MapPath("~\\ECG\\") + filename;
        DirectoryInfo oDirectoryInfo = new DirectoryInfo(Server.MapPath("~\\ECG\\"));
        if (!oDirectoryInfo.Exists)
            Directory.CreateDirectory(Server.MapPath("~\\ECG\\"));

        if (File.Exists(SaveFilePath))
        {
            File.SetAttributes(SaveFilePath, FileAttributes.Normal);

            File.Delete(SaveFilePath);
        }
        FileUploadFollowUpUN.SaveAs(Server.MapPath(this.UploadFolderPath) + filename);
        Session["FileNameFollowUpUN"] = filename;
        if (System.IO.Path.GetExtension(FileUploadFollowUpUN.FileName) == ".pdf")
        {
            imgPhoto.ImageUrl = "~/Images/pdf.jpg";
            ZoomImage.ImageUrl = "~/Images/pdf.jpg";
            imgPhoto.Enabled = true;
        }
        else
        {
            imgPhoto.ImageUrl = "~/ECG/" + filename;
            imgPhoto.Enabled = true;
            ZoomImage.ImageUrl = "~/ECG/" + filename;
        }
    }
} 
```

我怎样才能摆脱这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:39:15.080

[这里](https://stackoverflow.com/questions/860656/how-does-one-figure-out-what-process-locked-a-file-using-c)有一个类似的问题，关于如何查找正在使用文件的进程

在尝试删除之前，您应该尝试处理任何文件方法。

如果你有一些东西会阻塞直到文件可以访问，你可以把它放在一个while循环中

```
 public static bool IsFileReady(String sFilename)
    {
        // If the file can be opened for exclusive access it means that the file
        // is no longer locked by another process.
        try
        {
            using (FileStream inputStream = File.Open(sFilename, FileMode.Open, FileAccess.Read, FileShare.None))
            {
                if (inputStream.Length > 0)
                {
                    return true;
                }
                else
                {
                    return false;
                }

            }
        }
        catch (Exception)
        {
            return false;
        }
    } 
```

# html - IE9文件上传进度

> ID：12104961
> 
> 赞同：2
> 
> 时间：2012-08-24T07:30:16.230
> 
> 标签：html, file-upload, internet-explorer-9

我在一些地方读到过 IE9 不支持文件上传进度。

但是我注意到 gmail 有某种解决方案。我读过几年前的文章，它是一个基于 Flash 的解决方案，但是当我拿出检查器工具时，我看不到任何 Flash 对象。我想知道那段时间是否有任何变化。

有人能描述gmail如何解决IE9中的“文件上传进度”问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-18T11:48:15.073

我不知道 gmail 是如何做到的，但一种可能的解决方案是异步启动上传（javascript、iframe 等），然后定期从服务器轮询上传进度。

假设您有某种类型的会话来识别用户，上传被发送到服务器，服务器在传输文件时更新用户会话中的一些进度变量。同时，客户端通过对服务器的单独 AJAX 调用每秒轮询一次进度变量。

# php - 如何从具有特定类的 div 中删除样式标签

> ID：12104962
> 
> 赞同：2
> 
> 时间：2012-08-24T07:30:15.033
> 
> 标签：php, xpath, domdocument

我如何（使用 PHP）从具有特定类的 DIVS 中删除样式属性？由于“拖放”过程，一些 DIV 元素会被不必要的样式污染，这可能会导致以后出现问题。

我知道我可以在“拖放”过程之后使用 JavaScript 删除样式属性，但我只在服务器处理 HTML 时删除它们（用于将 HTML 作为电子邮件发送）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T07:37:36.423

据我所知，这不是一个特别困难的问题。您需要将 HTML 加载到 DOMDocument 结构中，然后使用简单的 XPath 属性选择器来查找相关元素并[`DOMElement::removeAttribute`](http://php.net/manual/en/domelement.removeattribute.php)删除样式属性。您的代码可能如下所示：

```
$dom = new DOMDocument;
$dom->loadHTML($dirtyHtml);

$xpath = new DOMXPath($dom);

$divs = $xpath->query('//div[@class="someclass"]');

foreach ($divs as $div) {
    $div->removeAttribute('style');
}

$cleanHtml = $dom->saveHTML(); 
```

# java - Java MongoDB 对象版本控制

> ID：12104969
> 
> 赞同：15
> 
> 时间：2012-08-24T07:30:46.103
> 
> 标签：java, mongodb, diff, versioning, spring-data

我需要对存储在面向文档的数据库 (MongoDB) 中的（简单）Java 对象图进行版本控制。对于关系数据库和 Hibernate，我发现了[Envers](http://download.jboss.org/envers/presentations/envers_devoxx.pdf)，并对这些可能性感到非常惊讶。是否有类似的东西可以与 Spring Data Documents 一起使用？

我发现[这篇文章](https://stackoverflow.com/questions/4185105/ways-to-implement-data-versioning-in-mongodb)概述了我对存储对象版本的想法（以及更多......），并且我当前的实现工作类似，因为它将对象的副本存储在带有时间戳的单独历史集合中，但我想改进它以节省存储空间。因此，我认为我需要在对象树上实现“差异”操作和重构旧对象的“合并”操作。有没有图书馆可以帮助解决这个问题？

**编辑**：非常感谢任何使用 MongoDB 和版本控制的经验！我认为很可能不会有 Spring Data 解决方案。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-31T14:32:39.930

这就是我最终为 MongoDB 实体实现版本控制的方式。感谢 StackOverflow 社区的帮助！

*   每个实体的更改日志都保存在单独的历史集合中。
*   为了避免保存大量数据，历史集合不存储完整的实例，而只存储第一个版本和版本之间的差异。（您甚至可以省略第一个版本并从实体的主集合中的当前版本“向后”重建版本。）
*   [Java Object Diff](https://github.com/SQiShER/java-object-diff)用于生成对象差异。
*   为了能够正确使用集合，需要实现`equals`实体的方法，以便它测试数据库主键而不是子属性。（否则，JavaObjectDiff 将无法识别集合元素中的属性更改。）

以下是我用于版本控制的实体（删除了 getter/setter 等）：

```
// This entity is stored once (1:1) per entity that is to be versioned
// in an own collection
public class MongoDiffHistoryEntry {
    /* history id */
    private String id;

    /* reference to original entity */
    private String objectId;

    /* copy of original entity (first version) */
    private Object originalObject;

    /* differences collection */
    private List<MongoDiffHistoryChange> differences;

    /* delete flag */
    private boolean deleted;
}

// changeset for a single version
public class MongoDiffHistoryChange {
    private Date historyDate;
    private List<MongoDiffHistoryChangeItem> items;
}

// a single property change
public class MongoDiffHistoryChangeItem {
    /* path to changed property (PropertyPath) */
    private String path;

    /* change state (NEW, CHANGED, REMOVED etc.) */
    private Node.State state;

    /* original value (empty for NEW) */
    private Object base;

    /* new value (empty for REMOVED) */
    private Object modified;
} 
```

这是 saveChangeHistory 操作：

```
private void saveChangeHistory(Object working, Object base) {
    assert working != null && base != null;
    assert working.getClass().equals(base.getClass());

    String baseId = ObjectUtil.getPrimaryKeyValue(base).toString();
    String workingId = ObjectUtil.getPrimaryKeyValue(working).toString();
    assert baseId != null && workingId != null && baseId.equals(workingId);

    MongoDiffHistoryEntry entry = getObjectHistory(base.getClass(), baseId);
    if (entry == null) {
        //throw new RuntimeException("history not found: " + base.getClass().getName() + "#" + baseId);
        logger.warn("history lost - create new base history record: {}#{}", base.getClass().getName(), baseId);
        saveNewHistory(base);
        saveHistory(working, base);
        return;
    }

    final MongoDiffHistoryChange change = new MongoDiffHistoryChange();
    change.setHistoryDate(new Date());
    change.setItems(new ArrayList<MongoDiffHistoryChangeItem>());

    ObjectDiffer differ = ObjectDifferFactory.getInstance();
    Node root = differ.compare(working, base);
    root.visit(new MongoDiffHistoryChangeVisitor(change, working, base));

    if (entry.getDifferences() == null)
        entry.setDifferences(new ArrayList<MongoDiffHistoryChange>());
    entry.getDifferences().add(change);

    mongoTemplate.save(entry, getHistoryCollectionName(working.getClass()));
} 
```

这是它在 MongoDB 中的样子：

```
{
  "_id" : ObjectId("5040a9e73c75ad7e3590e538"),
  "_class" : "MongoDiffHistoryEntry",
  "objectId" : "5034c7a83c75c52dddcbd554",
  "originalObject" : {
      BLABLABLA, including sections collection etc.
  },
  "differences" : [{
      "historyDate" : ISODate("2012-08-31T12:11:19.667Z"),
      "items" : [{
          "path" : "/sections[LetterSection@116a3de]",
          "state" : "ADDED",
          "modified" : {
            "_class" : "LetterSection",
            "_id" : ObjectId("5034c7a83c75c52dddcbd556"),
            "letterId" : "5034c7a83c75c52dddcbd554",
            "sectionIndex" : 2,
            "stringContent" : "BLABLA",
            "contentMimetype" : "text/plain",
            "sectionConfiguration" : "BLUBB"
          }
        }, {
          "path" : "/sections[LetterSection@19546ee]",
          "state" : "REMOVED",
          "base" : {
            "_class" : "LetterSection",
            "_id" : ObjectId("5034c7a83c75c52dddcbd556"),
            "letterId" : "5034c7a83c75c52dddcbd554",
            "sectionIndex" : 2,
            "stringContent" : "BLABLABLA",
            "contentMimetype" : "text/plain",
            "sectionConfiguration" : "BLUBB"
          }
        }]
    }, {
      "historyDate" : ISODate("2012-08-31T13:15:32.574Z"),
      "items" : [{
          "path" : "/sections[LetterSection@44a38a]/stringContent",
          "state" : "CHANGED",
          "base" : "blub5",
          "modified" : "blub6"
        }]
    },
    }],
  "deleted" : false
} 
```

编辑：这是访客代码：

```
public class MongoDiffHistoryChangeVisitor implements Visitor {

private MongoDiffHistoryChange change;
private Object working;
private Object base;

public MongoDiffHistoryChangeVisitor(MongoDiffHistoryChange change, Object working, Object base) {
    this.change = change;
    this.working = working;
    this.base = base;
}

public void accept(Node node, Visit visit) {
    if (node.isRootNode() && !node.hasChanges() ||
        node.hasChanges() && node.getChildren().isEmpty()) {
        MongoDiffHistoryChangeItem diffItem = new MongoDiffHistoryChangeItem();
        diffItem.setPath(node.getPropertyPath().toString());
        diffItem.setState(node.getState());

        if (node.getState() != State.UNTOUCHED) {
            diffItem.setBase(node.canonicalGet(base));
            diffItem.setModified(node.canonicalGet(working));
        }

        if (change.getItems() == null)
            change.setItems(new ArrayList<MongoDiffHistoryChangeItem>());
        change.getItems().add(diffItem);
    }
}

} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-30T21:45:35.783

我们正在使用一个基本实体（我们在其中设置 Id、创建 + 上次更改日期......）。在此基础上，我们使用了一个通用的持久化方法，它看起来像这样：

```
@Override
public <E extends BaseEntity> ObjectId persist(E entity) {
    delta(entity);
    mongoDataStore.save(entity);
    return entity.getId();
} 
```

delta 方法看起来像这样（我会尽量使它尽可能通用）：

```
protected <E extends BaseEntity> void delta(E newEntity) {

    // If the entity is null or has no ID, it hasn't been persisted before,
    // so there's no delta to calculate
    if ((newEntity == null) || (newEntity.getId() == null)) {
        return;
    }

    // Get the original entity
    @SuppressWarnings("unchecked")
    E oldEntity = (E) mongoDataStore.get(newEntity.getClass(), newEntity.getId()); 

    // Ensure that the old entity isn't null
    if (oldEntity == null) {
        LOG.error("Tried to compare and persist null objects - this is not allowed");
        return;
    }

    // Get the current user and ensure it is not null
    String email = ...;

    // Calculate the difference
    // We need to fetch the fields from the parent entity as well as they
    // are not automatically fetched
    Field[] fields = ArrayUtils.addAll(newEntity.getClass().getDeclaredFields(),
            BaseEntity.class.getDeclaredFields());
    Object oldField = null;
    Object newField = null;
    StringBuilder delta = new StringBuilder();
    for (Field field : fields) {
        field.setAccessible(true); // We need to access private fields
        try {
            oldField = field.get(oldEntity);
            newField = field.get(newEntity);
        } catch (IllegalArgumentException e) {
            LOG.error("Bad argument given");
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            LOG.error("Could not access the argument");
            e.printStackTrace();
        }
        if ((oldField != newField)
                && (((oldField != null) && !oldField.equals(newField)) || ((newField != null) && !newField
                        .equals(oldField)))) {
            delta.append(field.getName()).append(": [").append(oldField).append("] -> [")
                    .append(newField).append("]  ");
        }
    }

    // Persist the difference
    if (delta.length() == 0) {
        LOG.warn("The delta is empty - this should not happen");
    } else {
        DeltaEntity deltaEntity = new DeltaEntity(oldEntity.getClass().toString(),
                oldEntity.getId(), oldEntity.getUuid(), email, delta.toString());
        mongoDataStore.save(deltaEntity);
    }
    return;
} 
```

我们的 delta 实体看起来像这样（没有 getter + setter、toString、hashCode 和 equals）：

```
@Entity(value = "delta", noClassnameStored = true)
public final class DeltaEntity extends BaseEntity {
    private static final long serialVersionUID = -2770175650780701908L;

    private String entityClass; // Do not call this className as Morphia will
                            // try to work some magic on this automatically
    private ObjectId entityId;
    private String entityUuid;
    private String userEmail;
    private String delta;

    public DeltaEntity() {
        super();
    }

    public DeltaEntity(final String entityClass, final ObjectId entityId, final String entityUuid,
            final String userEmail, final String delta) {
        this();
        this.entityClass = entityClass;
        this.entityId = entityId;
        this.entityUuid = entityUuid;
        this.userEmail = userEmail;
        this.delta = delta;
    } 
```

希望这可以帮助您入门:-)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-01T18:28:08.203

看起来 Javers 是完成这项工作的正确工具，请参阅[http://javers.org/documentation/features/#javers-repository](http://javers.org/documentation/features/#javers-repository)

Javers 在概念上是用于域对象版本控制的 VCS，由 JSON 和 MongoDB 支持

# php - PHP中的条件CSS规则取决于文件名

> ID：12104971
> 
> 赞同：1
> 
> 时间：2012-08-24T07:30:53.210
> 
> 标签：php, css, if-statement, styles, conditional

如何在 PHP 中编写以下代码：

> IF 当前页面的名称是 THEN 请加载这些额外的 CSS 规则： #DIVS { color:#FFF } IF 当前页面的名称是 THEN 请加载以下 CSS 规则： #DIVS { color: #000 } *`pagex.php`*
> 
> *`anotherpage.php`*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T07:35:09.727

像这样：

```
<?php
   if (basename(__FILE__) == 'pagex.php') {
      echo '#DIVS { color:#FFF }';
   } else if (basename(__FILE__) == 'anotherpage.php') {
      echo '#DIVS { color:#000 }';
   }
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T07:37:01.143

您可以只添加 HTML 头部第一个 PHP if...else 根据页面名称加载额外的样式表。

```
<head>
<?php
if (basename(__FILE__) == 'one.php')
     echo '<link .... src="style1.css" />';
elseif (basename(__FILE__) == 'two.php')
     echo '<link ..... src="style2.css" />';
?> 
</head> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T07:40:23.673

您可以以自定义方式使用 wordpress 的 is_page() 函数，因为它正在处理常规 php.code 是：

```
<?php
$baseurl = 'http://www.example.com'; //set the base url of the site
$mypage1 = $baseurl."/pagex.php"; //add the rest of the url
    $mypage2 = $baseurl."/anotherpage.php"; //add the rest of the url
$currentPage = $baseurl.$_SERVER['REQUEST_URI'];// this gets the current page url
if($currentPage==$mypage1) {
    //do something with you style or whatever..
}
else if($currentPage==$mypage2)
{
//do something with you style or whatever..
} 
```

?>

你必须根据你的需要改变它。我想它会帮助你。快乐编码！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-24T07:40:36.520

PHP 有一些“神奇的常数”，您可以检查它们以获取这些信息。看看 [`__FILE__ 常量](http://php.net/manual/en/language.constants.predefined.php)。

> 文件的完整路径和文件名。如果在包含中使用，则返回包含文件的名称。自 PHP 4.0.2 起，**FILE**始终包含一个绝对路径，其中符号链接已解析，而在旧版本中，它在某些情况下包含相对路径。

因此，您可以获取此`__FILE__`变量并对其执行`basename()`函数以获取文件名。该`basename()`函数返回路径的尾随名称组件。然后你只需做一个 switch case 来匹配所需的值 -

```
$fileName = basename(__FILE__);
switch($fileName){
  case 'pagex.php':
    echo '<link .... src="some_stylesheet_file.css" />';
    break;
  case 'anotherpage.php':
    echo '<link .... src="another_stylesheet_file.css" />';
    break;
} 
```

您的附加 CSS 规则可以位于这些单独的文件中。

或者，如果您不想将 css 拆分为多个文件，则可以将这些特定规则回显到页面的 head 元素中，如下所示 -

```
echo '<style type="text/css">';
$fileName = basename(__FILE__);
switch($fileName){
  case 'pagex.php':
    echo '#DIVS { color:#FFF }';
    break;
  case 'anotherpage.php':
    echo '#DIVS { color: #000 }';
    break;
} 
echo '</style>'; 
```

* * *

参考 -

*   [`basename()`](http://php.net/manual/en/function.basename.php)
*   [php魔术常量](http://php.net/manual/en/function.basename.php)

# sharepoint - Office 365 预览版和在线共享点之间的区别

> ID：12104973
> 
> 赞同：3
> 
> 时间：2012-08-24T07:31:08.203
> 
> 标签：sharepoint, office365

我是在线共享点的新手。首先我需要知道sharepoint online 和office 365 preview 的区别。

预览站点： [https](https://portal.microsoftonline.com/Admin/Default.aspx) ://portal.microsoftonline.com/Admin/Default.aspx ，如下所示。

![在此处输入图像描述](../Images/8a0d0658be3ffda3d6d27e9086b8d54e.png)

我也有以下网站

![在此处输入图像描述](../Images/ba6dac4d333b2957b0bb438e40e7958a.png)

现在两者有什么区别。我的目标是创建应用程序和 Web 部件。我该选择哪一个？我还没有安装 sharepoint 2013 server/sharepoint 基础。我可以在不安装 server2013/foundation2013 的情况下创建应用程序和 Web 部件吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T20:33:34.133

Office365 预览版在新的 SharePoint 2013 平台上运行。如果您想构建应用程序/Web 部件并从中获利，则需要使用此选项，因为它是最新最好的。

访问[http://dev.office.com](http://dev.office.com)以获取您需要的所有资源，包括指向软件、教程、文档等的链接...

微软专门为想要在在线平台上构建应用程序的开发人员提供免费的 Office365 门户。有了这个，您只需要安装 Visual Studio 2012 和 SharePoint/Office SDK 即可构建应用程序。您可以直接在在线门户上进行部署和调试，而无需在您的环境中安装 SharePoint。

我希望这有帮助。

# android - Android ListView：无法使用光标将短信/收件箱项目添加到 ListView

> ID：12104974
> 
> 赞同：0
> 
> 时间：2012-08-24T07:31:08.260
> 
> 标签：android, listview, sms, cursor, listadapter

我正在尝试从 content://sms/inbox 调用“正文”和“地址”并将它们添加到 ListView。

“地址”指向 ListView 中的 Item1，“body”指向同一 ListView 中的 SubItem。

为此，我正在实现一个游标以将这些项目添加到 ListView。

当我现在运行代码时，我没有收到任何错误或崩溃，但我的 ListView 中根本没有添加任何内容。我拥有清单中所需的所有权限。

不知道我哪里出错了:(但提前谢谢！

我的 XML 布局：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/header__root"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/black"
    android:orientation="vertical" >

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@color/burntorange"
    android:orientation="horizontal" >

    <TextView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="147dp"
        android:layout_height="wrap_content"
        android:layout_weight="0.13"
        android:background="@color/burntorange"
        android:padding="10dp"
        android:text="Messages"
        android:textSize="20dp" />

    <Button
        android:id="@+id/bNewMessage"
        android:layout_width="120dp"
        android:layout_height="35dp"
        android:layout_gravity="center"
        android:layout_margin="4dp"
        android:background="@color/gray"
        android:gravity="center"
        android:onClick="handleClick"
        android:padding="4dp"
        android:text="New Thread"
        android:textColor="@color/white"
        android:textSize="15dp" />
</LinearLayout>

<ListView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
</ListView>

</LinearLayout> 
```

我的菜单.java：

```
public class Menu extends ListActivity {

ListView itemList;

@SuppressWarnings("deprecation")
@Override
public void onCreate(Bundle biscuits) {
    super.onCreate(biscuits);

    setContentView(R.layout.header);

    itemList = (ListView) findViewById(android.R.id.list);

    Uri uri = Uri.parse("content://sms/inbox");
    Cursor c = getContentResolver().query(uri, null, null, null, null);
    startManagingCursor(c);

    String[] number = new String [c.getCount()];
    String[] body = new String [c.getCount()];

    if(c.moveToFirst()){
        for (int i=0; i<c.getCount();i++) {
            body[i]=c.getString(c.getColumnIndexOrThrow("body")).toString();
            number[i] =c.getString(c.getColumnIndexOrThrow("address")).toString();
            c.moveToNext();

    List<Map<String, String>> data = new ArrayList<Map<String, String>>();
    Map<String, String> datum = new HashMap<String, String>(2);

    datum.put("contactNumber", number[i]);
    datum.put("messagePreview", body[i]);

    SimpleAdapter adapter = new SimpleAdapter(this, data, 
            android.R.layout.simple_list_item_1,
            new String[] {"contactNumber", "messagePreview"},
            new int [] {android.R.id.text1,
                        android.R.id.text2});

    itemList.setAdapter(adapter);

        }
    }       
}

public void handleClick(View v) {

    Intent intent = new Intent();
    intent.setClass(this, TextActivity.class);
    startActivity(intent);              
}

protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);
    String cheese = (String) l.getItemAtPosition(position);
    Toast.makeText(this, cheese + " Selected", Toast.LENGTH_SHORT).show();

    try {
        Class ourClass = Class.forName("com.example.mytexts." + cheese);
        Intent ourIntent = new Intent(Menu.this, ourClass);
        startActivity(ourIntent);

    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    }
  }
} 
```

# java - Java HashMap 和我自己滚动的关键对象的问题

> ID：12104975
> 
> 赞同：2
> 
> 时间：2012-08-24T07:31:13.300
> 
> 标签：java, hashmap

所以，我正在尝试使用 a`HashMap`将我自己的值映射`Object`到一个`String`值。我的对象在下面（为简洁起见，删除了一些代码）

```
public class RouteHeadsignPair {
    String route;
    String headsign;

    public RouteHeadsignPair(String n_route, String n_headsign) {
        route = n_route.toLowerCase();
        headsign = n_headsign.toLowerCase();
    }

    public String getRoute () {
        return route;
    }

    public String getHeadsign() {
        return headsign;
    }

    public boolean equals(RouteHeadsignPair other) {
        return(other.getRoute().equals(route) && other.getHeadsign().equals(headsign));
    }

    public int hashCode() {
        return(route.hashCode());
    }
} 
```

我通过从文本文件加载数据将一堆这些对象映射到字符串。稍后，基于（独立）用户输入，我尝试`HashMap`使用`RouteHeadsignPair`Object 进行查询。containsKey() 返回 false 而 get() 返回 null，就好像我从未将键添加到地图中一样。但是，奇怪的是，如果我使用下面的代码迭代地图（其中`newKey`是`RouteHeadsignPair`由用户输入制作的）

```
RouteHeadsignPair foundKey = null;
Iterator<RouteHeadsignPair> keysInMap = routeHeadsignToStopIdMap.keySet().iterator();
while(keysInMap.hasNext()) {
    RouteHeadsignPair currKey = keysInMap.next();

    if(currKey.equals(newKey)) {
        System.err.println("Did find a key with an equals() == true!");
        foundKey = currKey;
    }
}

System.err.println("Value in map? " + routeHeadsignToStopIdMap.containsKey(newKey)  + "( hashcode = " + newKey.hashCode() + 
        ", equals = " + newKey.equals(foundKey) + ")");
System.err.println("foundKey in map? " + routeHeadsignToStopIdMap.containsKey(foundKey)  + "( hashcode = " + foundKey.hashCode() + 
        ", equals = " + foundKey.equals(newKey) + ")" ); 
```

*我为代码格式道歉，太晚了，我变得暴躁*

我得到以下输出

```
Did find a key with an equals() == true! 
```

接着

```
Value in map? false( hashcode = 1695, equals = true)
foundKey in map? true( hashcode = 1695, equals = true) 
```

因此，如果我遍历键并查找返回的键`equals()`，我确实找到了一个，并且这`hashCode()`两个键是相同的。如果和和返回true`hashCode()`相同，不应该返回一个值并返回true吗？我在这里做错了什么？`newKey``foundKey``foundKey.equals(newKey)``HashMap.get(key)``containsKey()`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-24T07:33:54.080

您没有覆盖`Object.equals`-由于参数类型，您正在*重载它。*您的*诊断*代码调用您的过载，但地图代码没有（因为它不知道）。

您需要一个带有签名的方法

```
public boolean equals(Object other) 
```

如果您使用`@Override`注释，如果您未能正确覆盖某些内容，则会收到错误消息。

您需要先检查是否`other`是一个实例`RouteHeadSignPair`，然后再进行强制转换。如果您将`RouteHeadSignPair`课程定为最终课程，则无需担心它是否是完全相同的课程等。

请注意，顺便说一下，您的哈希码会不必要地发生冲突 - 如果您同时使用 the和`route` *哈希*`headSign`来生成您的哈希码，它可能会帮助您的地图查找更有效。（如果有多个实例具有相同的路线但不同的头部标志，如果地图在查找键时不必检查所有实例是否相等，则很有用。）

# ios - 为什么保存 Twitter ACAccount 时出现此错误？

> ID：12104976
> 
> 赞同：2
> 
> 时间：2012-08-24T07:31:25.130
> 
> 标签：ios, ios5, twitter, acaccount

我正在尝试将 Twitter 帐户保存到`ACAccountStore`.

我正在对用户进行身份验证`MPOauth`（这非常有效，我可以进行身份​​验证并发布消息），当我收到访问令牌和访问令牌秘密时，我会继续保存帐户。

首先，我将令牌访问拆分为只获取令牌本身，而不是用户 ID。之后这是我的代码

```
if ([username length] > 0 && [token length] > 0 && [secret length] > 0) {

    ACAccountStore *accountStore = [[ACAccountStore alloc] init];
    ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];
    ACAccount *account = [[ACAccount alloc] initWithAccountType:accountType];
    ACAccountCredential *credentials = [[ACAccountCredential alloc] initWithOAuthToken:token tokenSecret:secret];

    [account setCredential:credentials];
    [account setUsername:username];

    [accountStore saveAccount:account withCompletionHandler:^(BOOL success, NSError *error) {

        if (success) {

            NSLog(@"the account was saved!");

        } else {

            NSLog(@"the account was NOT saved");
        }

        [accountStore release];
        [account release];
        [credentials release];
    }];
} 
```

但从来没有工作，我明白了

```
Error Domain=NSURLErrorDomain Code=-1012 "The operation couldn’t be completed. (NSURLErrorDomain error -1012.)" 
```

我读到这响应了针对 Twitter 验证数据的错误，这是由 iOS5 框架在保存帐户之前完成的。

我已经阅读[了此回复和](https://stackoverflow.com/questions/7800675/error-migrating-existing-oauth-credentials-to-acaccountstore)[Twitter](https://dev.twitter.com/docs/ios/migrating-tokens-core-accounts)中的帖子。

怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:49:03.497

如果令牌是 OAToken 你应该替换它

```
ACAccountCredential *credentials = [[ACAccountCredential alloc] initWithOAuthToken:token tokenSecret:token]; 
```

有了这个

```
ACAccountCredential *outhCredential = [[ACAccountCredential alloc] initWithOAuthToken:token.key tokenSecret:token.secret]; 
```

您应该分别将密钥和秘密作为第一个和第二个参数传递。

# java - 如果 semaphore.acquire() 得到 InterruptedException，需要 semaphore.relase() 吗？

> ID：12104978
> 
> 赞同：13
> 
> 时间：2012-08-24T07:31:32.197
> 
> 标签：java, semaphore, interrupted-exception

从 Java java.util.concurrent.Semaphore 文档中，我不太清楚如果 semaphore.acquire() 阻塞线程并随后被 InterruptedException 中断会发生什么。信号量值是否降低了，是否需要释放信号量？

目前我正在使用这样的代码：

```
try {
  // use semaphore to limit number of parallel threads
  semaphore.acquire();
  doMyWork();
}
finally {
  semaphore.release();
} 
```

或者我应该在 acquire() 期间发生 InterruptedException 时不调用 release() ？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-24T07:48:13.037

> 在 acquire() 期间发生 InterruptedException 时调用 release() ？

你不应该。如果 .acquire() 被中断，则不会获取信号量，因此可能不应该释放它。

你的代码应该是

```
// use semaphore to limit number of parallel threads
semaphore.acquire();
try {
  doMyWork();
}
finally {
  semaphore.release();
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-02-21T05:23:03.400

nos 接受的答案是部分正确的，除了 semaphore.acquire() 也会抛出 InterruptedException。因此，为了 100% 正确，代码如下所示：

```
try {
    semaphore.acquire();
    try {
        doMyWork();
    } catch (InterruptedException e) { 
        // do something, if you wish
    } finally {
        semaphore.release();
    }
} catch (InterruptedException e) {
    // do something, if you wish
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T07:55:00.557

如果线程在acquire方法调用之前被中断，或者在等待获取permit时，会抛出InterruptedException，并且不会持有permit，所以不需要释放。只有当您确定已获得许可时（在调用获取方法调用之后），您才需要释放许可。因此，您最好在尝试块开始之前获取，例如：

```
sem.acquire();
try{
   doMyWork();
}finally{
   sem.release();
} 
```

# ruby-on-rails - 保存到数据库时，Rails Mongoid / MongoHD / Heroku 错误“需要登录”

> ID：12104979
> 
> 赞同：1
> 
> 时间：2012-08-24T07:31:38.293
> 
> 标签：ruby-on-rails, heroku, mongoid

我有一个似乎与这两个链接有关的错误：

*   [https://groups.google.com/forum/#!msg/mongoid/L6ESKP8QDpg/gmEyqejdAEEJ](https://groups.google.com/forum/#!msg/mongoid/L6ESKP8QDpg/gmEyqejdAEEJ)
*   [https://github.com/mongoid/moped/pull/59](https://github.com/mongoid/moped/pull/59)

请参阅下面的控制台日志。我正在使用 Mongoid/MongoHQ 运行，当我创建一个对象（显然是任何数据库对象）时，我得到这个“需要登录”错误。但是请注意，数据库对象已创建并在错误发生后位于数据库中。

有什么方法可以让我自己解决这个问题，或者可能是 MongoHQ 需要解决的问题？

```
$ heroku run console
irb(main):004:0> Request.create!(:from_user => User.first, :to_user => User.first)
Moped::Errors::OperationFailure: The operation: #<Moped::Protocol::Command
  @length=69
  @request_id=7
  @response_to=0
  @op_code=2004
  @flags=[]
  @full_collection_name="admin.$cmd"
  @skip=0
  @limit=-1
  @selector={:getlasterror=>1, :safe=>true}
  @fields=nil>
failed with error "need to login"
    from /app/vendor/bundle/ruby/1.9.1/gems/moped-1.2.0/lib/moped/node.rb:74:in `block in command'
    from /app/vendor/bundle/ruby/1.9.1/gems/moped-1.2.0/lib/moped/node.rb:521:in `[]'
    from /app/vendor/bundle/ruby/1.9.1/gems/moped-1.2.0/lib/moped/node.rb:521:in `block (3 levels) in flush'
    from /app/vendor/bundle/ruby/1.9.1/gems/moped-1.2.0/lib/moped/node.rb:520:in `map'
    from /app/vendor/bundle/ruby/1.9.1/gems/moped-1.2.0/lib/moped/node.rb:520:in `block (2 levels) in flush'
    from /app/vendor/bundle/ruby/1.9.1/gems/moped-1.2.0/lib/moped/node.rb:123:in `ensure_connected'
    from /app/vendor/bundle/ruby/1.9.1/gems/moped-1.2.0/lib/moped/node.rb:516:in `block in flush'
    from /app/vendor/bundle/ruby/1.9.1/gems/moped-1.2.0/lib/moped/node.rb:531:in `logging'
    from /app/vendor/bundle/ruby/1.9.1/gems/moped-1.2.0/lib/moped/node.rb:515:in `flush'
    from /app/vendor/bundle/ruby/1.9.1/gems/moped-1.2.0/lib/moped/node.rb:286:in `pipeline'
    from /app/vendor/bundle/ruby/1.9.1/gems/moped-1.2.0/lib/moped/session/context.rb:58:in `block in insert'
    from /app/vendor/bundle/ruby/1.9.1/gems/moped-1.2.0/lib/moped/session/context.rb:109:in `block in with_node'
    from /app/vendor/bundle/ruby/1.9.1/gems/moped-1.2.0/lib/moped/cluster.rb:150:in `block in with_primary'
    from /app/vendor/bundle/ruby/1.9.1/gems/moped-1.2.0/lib/moped/node.rb:168:in `ensure_primary'
    from /app/vendor/bundle/ruby/1.9.1/gems/moped-1.2.0/lib/moped/cluster.rb:149:in `with_primary'
    from /app/vendor/bundle/ruby/1.9.1/gems/moped-1.2.0/lib/moped/session/context.rb:108:in `with_node'
... 13 levels...
    from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:405:in `__run_callback'
    from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
    from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/callbacks.rb:81:in `run_callbacks'
    from /app/vendor/bundle/ruby/1.9.1/gems/mongoid-3.0.4/lib/mongoid/callbacks.rb:100:in `run_callbacks'
    from /app/vendor/bundle/ruby/1.9.1/gems/mongoid-3.0.4/lib/mongoid/persistence/insertion.rb:23:in `prepare'
    from /app/vendor/bundle/ruby/1.9.1/gems/mongoid-3.0.4/lib/mongoid/persistence/operations/insert.rb:26:in `persist'
    from /app/vendor/bundle/ruby/1.9.1/gems/mongoid-3.0.4/lib/mongoid/persistence.rb:50:in `insert'
    from /app/vendor/bundle/ruby/1.9.1/gems/mongoid-3.0.4/lib/mongoid/persistence.rb:251:in `block in create!'
    from /app/vendor/bundle/ruby/1.9.1/gems/mongoid-3.0.4/lib/mongoid/threaded/lifecycle.rb:173:in `_creating'
    from /app/vendor/bundle/ruby/1.9.1/gems/mongoid-3.0.4/lib/mongoid/persistence.rb:249:in `create!'
    from (irb):4
    from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands/console.rb:47:in `start'
    from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands/console.rb:8:in `start'
    from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:41:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>'irb(main):005:0> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T21:27:05.307

我现在正在遇到一模一样的问题。这并不完全是一个解决方案，但您可以通过将 mongoid.yml 中的 'safe' 选项设置为 false 来解决该问题。它看起来类似于：

```
production:
  sessions:
    default:
      uri: <%= ENV['MONGOHQ_URL'] %>
      options:
        skip_version_check: true
        safe: false 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T03:54:48.310

事实证明，问题在于 MongoHQ 升级了他们的 MongoDB，并且引入了与 mongoid 的稳定分支不兼容的问题。

[Chris Winslett 修复了这个 bug，然后 durran 把它拉进了 mongoid master](https://github.com/mongoid/moped/commit/5e3ccde7d535785df2dcd955f1a5be552b43cb7c)。但是当我发布这个 stackoverflow 时，它并没有包含在 stable 分支中。

解决方案：

*   我通过更新我的 gemfile 以从 github 中提取 mongoid 解决了这个问题。
*   durran 现在已将其包含在 stable-1.2.0 中，因此如果您`gem update`.

# java - 在android中使用java代码更新数据

> ID：12104980
> 
> 赞同：-1
> 
> 时间：2012-08-24T07:31:40.650
> 
> 标签：java, android, mysql, propertyinfo

如果我必须在 mysql 数据库中插入数据，则意味着我们使用以下代码：

```
PropertyInfo unameProp =new PropertyInfo();
unameProp.setName("userName");//Define the variable name in the web service method
unameProp.setValue(selectedItem);//Define value for fname variable
unameProp.setType(String.class);//Define the type of the variable
request.addProperty(unameProp); 
```

这里使用了addproperty....如何编写代码以更新android中mysql数据库中的数据...请帮助我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:37:26.677

安卓支持sqlite

您将不得不在 android 中使用内容值进行 db 插入

```
 ContentValues values = new ContentValues();
     values.put("userName", selectedItem); 

     db.insert(yrtbl, null, values);
     db.close(); 
```

# html - 如何在 Reporting Services 报表中使下划线（表格中的文本）另一种颜色？

> ID：12104982
> 
> 赞同：0
> 
> 时间：2012-08-24T07:31:46.323
> 
> 标签：html, reporting-services, underline

我想让表格中条目的下划线与实际文本不同（仅仅是因为它看起来更好）。如标题中所述，如何在 Reporting Services 报表中将（表格中的文本）下划线设置为另一种颜色（与文本本身相比）？我正在通过视觉工作室 2010 工作。

我没有在属性窗格中找到该选项（并且网络搜索似乎证实了这一点）。我还玩了一点占位符解释 HTML 的能力，这可能是一种方法，但我从来没有让它工作（但我只知道非常基本的 HTML，所以我在那里有点深水。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:40:23.307

你可以制作一些这样的 HTML

[http://jsfiddle.net/JEGqy/1/](http://jsfiddle.net/JEGqy/1/)

下划线就像一个边框底部。我从不使用 VS2010 编写 Web 代码，但你可以这样做

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T07:40:34.110

我不确定是否可以更改下划线颜色。但是您可以使用`border`文本框的属性并更改颜色。请参阅[此 MSDN](http://technet.microsoft.com/en-us/library/cc281379%28v=sql.105%29.aspx)文章

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T08:00:43.203

您应该使用嵌套标签

外部标签有颜色，并且将被取消。内部标签获得不同的颜色，不会加下划线

[http://jsfiddle.net/238gw/2/](http://jsfiddle.net/238gw/2/)

```
<span><span>Text</span></span>​ 
```

* * *

```
span {color: blue; text-decoration: underline;}
span > span {color: red; text-decoration: none;}​ 
```

# ssh - 无主目录的 SSH 访问并重定向到另一个目录

> ID：12104994
> 
> 赞同：0
> 
> 时间：2012-08-24T07:32:30.010
> 
> 标签：ssh

我设置了一个有 2 个用户的服务器，没有 FTP 访问只有 SSH 一个。我想添加一个新用户。这将很容易

```
sudo adduser foo 
```

但是，我希望 foo 在使用 SSH 登录时被重定向到 /home/user1/foo。

我真的不需要 foo 来拥有一个 /home，但如果他有一个就可以了！

我阅读了手册页，但没有找到任何线索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T07:39:57.473

所以，让我们再看一下手册页：http: [//linux.die.net/man/8/adduser](http://linux.die.net/man/8/adduser)

```
sudo adduser --home /home/user1/foo foo 
```

创建用户并将他的主目录设置为 /home/user1/foo

# java - GXT：如何动态添加/删除 FormPanel 到面板？

> ID：12104996
> 
> 赞同：0
> 
> 时间：2012-08-24T07:32:47.667
> 
> 标签：java, user-interface, web, gxt

任何人都可以分享代码片段或指导我进行一些讨论，了解如何根据某些事件向中央面板动态添加/删除表单。

表单需要在运行时根据事件动态创建。GXT 文档没有明确提及这一点，我也无法从示例中获得太多帮助。

通过在 abc.html 中使用，我可以使用 RootPanel.get("foo") 获得对它的引用并动态添加一个表单。但是我觉得这不是一个好的设计并且非常严格。

我也尝试了以下选项，但它们不起作用。我可能错过了一些概念......任何帮助表示赞赏。

方法 1。

```
ContentPanel cp ... //available as a reference (design time)

addForm(....) {
    FormPanel fp = new Formpanel();
    ......
    cp.add(fp); 
} 
```

方法 2。

```
ContentPanel cp = new ContentPanel(); //design time
cp.setId("xyz");
.....

addForm() {
    FormPanel fp = new Formpanel();
    ......
    RootPanel.get("xyz").add(fp);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T07:43:30.737

恕我直言，您应该`<div id="xyz"></div>`在方法 2 中添加您的 html 文件。您的表单面板将直接呈现到此 div。所以不要忘记指定它的宽度和高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T02:36:43.863

实际上，添加一个 layout() 方法可以解决这个问题。

```
ContentPanel cp ... //available as a reference (design time)

addForm(....) {
    FormPanel fp = new Formpanel();
    ......
    cp.add(fp);
    **cp.layout();**
} 
```

# asp.net-mvc-3 - 为 NOT REQUIRED 情况显示 StringLength 消息

> ID：12104999
> 
> 赞同：0
> 
> 时间：2012-08-24T07:33:14.643
> 
> 标签：asp.net-mvc-3

我有一个带有@Html.ValidationMessageFor 的@Html.TextBoxFor 控件，它不是必填字段，但最大长度有限制，并且只允许使用数字。我在 ViewModel 中给出了以下代码：

```
 [StringLength(10, ErrorMessage = "The field Phone must have a maximum length of 10")]
    public string Phone { get; set; } 
```

**在单击按钮时，当我输入了超过 10 个字符时，我无法检索上述验证消息。**

还有我将如何验证是否为数字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T07:41:39.030

您发布到的控制器操作必须将包含该`Phone`属性的视图模型作为参数：

```
[HttpPost]
public ActionResult SomeAction(MyViewModel model)
{
    ...
} 
```

或者，如果不是这种情况，您应该调用内部的`UpdateModel`or`TryUpdateModel`方法来调用默认模型绑定器，该绑定器负责调用验证逻辑并将任何潜在的错误消息插入到 ModelState 中。

> 还有我将如何验证是否为数字？

您可以使用正则表达式：

```
[StringLength(10, ErrorMessage = "The field Phone must have a maximum length of 10")]
[RegularExpression(@"\d*", ErrorMessage = "The field Phone must contain only digits")]
public string Phone { get; set; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T08:49:50.160

```
[MaxLength(10, ErrorMessage = "yourmessage")]
public string Phone 
```

但是您也可以使用正则表达式来修复它，只需 google “phone + regex”。很确定您可以使用 regexAttr 验证 maxlength