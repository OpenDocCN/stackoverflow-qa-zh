# StackOverflow 问答 11585000-11585999

# c# - 使用默认参数的构造函数重载

> ID：11585000
> 
> 赞同：12
> 
> 时间：2012-07-20T18:30:21.023
> 
> 标签：c#, compiler-construction, constructor, overloading

我不小心在 C# 中重载了一个构造函数，如下所示：

```
public MyClass(string myString) 
{
    // Some code goes here 
}

public MyClass(string myString, bool myParameter = false) 
{
   // Some different code here
} 
```

使用此代码，我的项目编译得很好。如果我只用一个`string`参数调用构造函数，C# 如何决定我要使用哪个构造函数？为什么在语法上允许此功能？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-20T18:40:23.453

来自[MSDN](http://msdn.microsoft.com/en-us/library/dd264739.aspx)：（添加了重点）

> 如果两个候选者被判断为同样好，则优先考虑**没有可选参数**的候选者，在调用中省略了这些参数。这是对具有**较少参数**的候选者的重载解决方案的普遍偏好的结果。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-20T18:37:14.047

> 为什么在语法上允许此功能？

就生成的 IL 而言，第二个构造函数仍然是两个参数。唯一的区别是第二个参数有一个提供默认值的属性。

就编译器而言，当您使用单个字符串调用构造函数时，第一个在技术上仍然更合适。当您使用单个参数调用它时，最佳匹配是第一个构造函数，而第二个不会被调用。

C# 规范说明了这一点。在 7.5 中，它声明“......实例构造函数采用重载决议来确定要调用的候选函数成员集中的哪一个。” 然后在 7.5.3.2 中规定了具体规则，该具体规则适用于：

> 否则，如果 MP 的所有参数都有对应的参数，而默认参数需要替换 MQ 中的至少一个可选参数，则 MP 优于 MQ。

在这种情况下，MP（您的第一个构造函数）具有所有参数，但 MQ（您的第二个）需要“至少一个可选参数”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T18:38:00.100

> 命名和可选参数的使用通过以下方式影响重载决议：
> 
> 如果方法、索引器或构造函数的每个参数都是可选的，或者按名称或位置对应于调用语句中的单个参数，并且该参数可以转换为参数的类型，则该方法、索引器或构造函数是执行的候选对象.
> 
> 如果找到多个候选者，则将首选转换的重载决策规则应用于显式指定的参数。可选参数的省略参数将被忽略。
> 
> 如果两个候选者被判断为同样好，则优先考虑没有可选参数的候选者，在调用中省略了这些参数。这是对具有较少参数的候选者的重载解决方案的普遍偏好的结果。

引用自[MSDN](http://msdn.microsoft.com/en-us/library/dd264739.aspx)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T18:48:46.147

**带有可选参数的方法将被重载隐藏。**

甚至还有一个 ReSharper 规则来警告你。

![在此处输入图像描述](../Images/b94684e6683608a43236013492bdace7.png)

在这里你可以找到关于为什么允许它的有用讨论。有些人甚至认为这根本不是问题。

[http://youtrack.jetbrains.com/issue/RSRP-287157](http://youtrack.jetbrains.com/issue/RSRP-287157)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T18:35:15.497

我打赌它会选择第一个更合适的。

命名和可选参数的使用通过以下方式影响重载决议：

*   如果方法、索引器或构造函数的每个参数都是可选的，或者按名称或位置对应于调用语句中的单个参数，并且该参数可以转换为参数的类型，则该方法、索引器或构造函数是执行的候选对象.

*   如果找到多个候选者，则将首选转换的重载决策规则应用于
    显式指定的参数。可选参数的省略参数将被
    忽略。

*   如果两个候选者被判断为同样好，则优先考虑没有可选参数的候选者，
    在调用中省略了这些参数。这是对具有 较少参数
    的候选者的重载解决方案的普遍偏好的结果。

# objective-c - CLLocationManager 随机性和速度

> ID：11585002
> 
> 赞同：0
> 
> 时间：2012-07-20T18:30:25.830
> 
> 标签：objective-c, ios, cllocationmanager

使用时，我注意到 .生成的`CLLocationManager`每个点似乎都有很大的误差。我按照它们的生成顺序使用这些点的数组来计算用户移动的总距离。`CLLocation``didUpdateToLocation`

由于这些读数不准确，我注意到在完全静止的设备上运行应用程序可能会导致大距离“移动”而没有发生任何实际移动。

这是我用来计算距离的代码

```
- (double) sendTotalDistance
{
    if (locations.count < 2) return 0;
    double howFar = 0.0;
    for (int j=0; j<locations.count-1; j++)
    {
        howFar += [[locations objectAtIndex:j] distanceFromLocation:[locations objectAtIndex:j+1]];
    }
    return howFar;
} 
```

**问题：**补偿这些读数的随机误差的最佳方法是什么？

我正在考虑对这些点进行线性回归，但当然这会假设用户在一条线上移动。我一直在尝试集思广益，以某种方式将读数的准确性包括在计算中，但是我能想到的所有方式都做出了很多假设或引入了其他形式的错误。

**更新：**我现在正在尝试增加更新率并对一些值进行平均。问题是这假设误差是均匀分布的。

**更新：**我一直在记录程序报告的各个位置，我注意到`speed=-1.0`描述中的变量。这个变量的准确性如何？如果它足够准确，似乎可以忽略速度小于或接近 0 的测量。

# sql - Group by 和 with by 子句可能不包含聚合函数

> ID：11585007
> 
> 赞同：2
> 
> 时间：2012-07-20T18:30:54.253
> 
> 标签：sql

不知道这里发生了什么......我知道这与 max 和 group by 语句有关......非常感谢任何帮助！

```
 select 
          c_clm as ClaimNo,
          i_pol as Policy,
          d_rcv_clm as Received,
          c_sta_clm as Status,
          d_tmn_clm as Terminated,
          c_tmn_clm as Reason,
          MAX(pym.d_rls_pym)  as Payment,
          c_sgm as Segment

          from ltc_p.VLTC_CLM_WK clm

            left join pearl_p.TLTC915_PYM pym  on
            clm.i_sys_clm = pym.i_sys_clm

             where c_sgm = 'am'

              group by 1,2,3,4,5,6,7,8 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T18:38:34.487

您的第七列是：

```
MAX(pym.d_rls_pym) 
```

您不能按此分组。将您的 group by 子句更改为：

```
group by c_clm, i_pol, d_rcv_clm, c_sta_clm, d_tmn_clm, c_tmn_clm, c_sgm 
```

我将数字更改为列名，因为大多数数据库不支持 group bys 中的参考数字。你可以做同样的事情：

```
group by 1, 2, 3, 4, 5, 6, 8 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T18:44:37.290

哎呀

按 1,2,3,4,5,6,8 分组

修复。

# go - Go 练习之旅 #18：切片、索引超出范围

> ID：11585008
> 
> 赞同：6
> 
> 时间：2012-07-20T18:31:02.630
> 
> 标签：go

我正在完成 Go 巡回赛中的练习，但遇到了一个我无法弄清楚的障碍。

我正在做[`Exercise: Slices`](https://tour.golang.org/moretypes/18)，我收到了这个错误：

```
256 x 256

panic: runtime error: index out of range [0] with length 0

goroutine 1 [running]:
main.Pic(0x100, 0x100)
    /tmp/sandbox1628012103/prog.go:14 +0xcf
golang.org/x/tour/pic.Show(0xc0000001a0)
    /tmp/gopath962180923/pkg/mod/golang.org/x/tour@v0.0.0-20201207214521-004403599411/pic/pic.go:32 +0x28
main.main()
    /tmp/sandbox1628012103/prog.go:25 +0x25 
```

这是我的代码：

```
package main

import (
    "fmt"
    "golang.org/x/tour/pic"
)

func Pic(dx, dy int) [][]uint8 {
    fmt.Printf("%d x %d\n\n", dx, dy)

    pixels := make([][]uint8, 0, dy)

    for y := 0; y < dy; y++ {
        pixels[y] = make([]uint8, 0, dx)

        for x := 0; x < dx; x++ {
            pixels[y][x] = uint8(x * y)
        }
    }

    return pixels
}

func main() {
    pic.Show(Pic)
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T19:02:16.503

> [切片](http://golang.org/ref/spec#Slices)
> 
> 对于字符串、数组、指向数组的指针或切片 a，主表达式
> 
> 一个[低：高]
> 
> 构造子字符串或切片。索引表达式 low 和 high 选择出现在结果中的元素。结果的索引从 0 开始，长度等于高 - 低。
> 
> 对于数组或字符串，索引low和high必须满足0 <= low <= high <= length；对于切片，上限是容量而不是长度。
> 
> [索引](http://golang.org/ref/spec#Indexes)
> 
> 形式的主要表达
> 
> 斧头]
> 
> 表示由 x 索引的数组、切片、字符串或映射 a 的元素。值 x 分别称为索引或映射键。以下规则适用：
> 
> 对于 A 或 *A 类型的 a，其中 A 是数组类型，或者对于 S 类型的 a，其中 S 是切片类型：
> 
> ```
> x must be an integer value and 0 <= x < len(a)
> 
> a[x] is the array element at index x and the type of a[x] is
> the element type of A
> 
> if a is nil or if the index x is out of range, a run-time panic occurs 
> ```
> 
> [制作切片、地图和通道](http://golang.org/ref/spec#Making_slices_maps_and_channels)
> 
> ```
> make(T, n)       slice      slice of type T with length n and capacity n
> make(T, n, m)    slice      slice of type T with length n and capacity m 
> ```

y 必须是整数值并且 0 <= y < len(pixel[]uint8)。x 必须是整数值并且 0 <= x < len(pixel[][]uint8)。例如，

```
package main

import "tour/pic"

func Pic(dx, dy int) [][]uint8 {
    pixels := make([][]uint8, dy)
    for y := 0; y < dy; y++ {
        pixels[y] = make([]uint8, dx)
        for x := 0; x < dx; x++ {
            pixels[y][x] = uint8(x * y)
        }
    }
    return pixels
}

func main() {
    pic.Show(Pic)
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-04-11T06:38:23.673

```
package main

import "tour/pic"

func Pic(dx, dy int) [][]uint8 {
fmt.Printf("%d x %d\n\n", dx, dy)

     pixels := make([][]uint8, 0, dy)

       for y := 0; y < dy; y++ {
    //    pixels[y] = make([]uint8, 0, dx)

for x := 0; x < dx; x++ {
 // append can skip make statement   
 pixels[y] = append(pixels[y],uint8(x*y)) 

     }
}

 return pixels
}

 func main() {
    pic.Show(Pic)
 } 
```

# mysql - sql中的字符串操作问题从逗号分隔的字符串中删除下划线和之后的字符

> ID：11585010
> 
> 赞同：0
> 
> 时间：2012-07-20T18:31:24.170
> 
> 标签：mysql, sql, sql-server, tsql, sql-server-2005

我正在尝试更改格式为 say 的字符串：

```
"12_7,34_22,28_4,6_22" 
```

到

```
"12,34,28,6" 
```

本质上，我想从字符串中删除“_”（下划线以及之后和之前的任何内容）。没有使用过 sql，所以对我来说它看起来像是一项艰巨的任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:18:21.807

```
CREATE FUNCTION DeUnderscore(@s nvarchar(max))
RETURNS nvarchar(max)
AS
BEGIN
    DECLARE @iu int = CHARINDEX('_', @s); -- position of _
    DECLARE @ic int = CHARINDEX(',', @s, @iu) -- position of ,  
    WHILE (@iu != 0)
    BEGIN
        IF @ic = 0 SET @ic = LEN(@s) + 1; -- if there's no , go to end of string
        SET @s = STUFF(@s, @iu, @ic - @iu, ''); -- replace everything after _ and before , with ''
        SET @iu = CHARINDEX('_', @s);
        SET @ic = CHARINDEX(',', @s, @iu)
    END 
    RETURN @s
END 
```

..在使用中它看起来像..

```
SELECT dbo.DeUnderscore(myValue) AS myCleanedValue FROM myTable; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T18:40:32.543

你可能想看看在 MySQL 中定义你自己的函数。这将允许您在函数内写出一组命令，这些命令可以利用 DB 固有的字符串操作函数并输出所需的结果。例如，您可以定义一个类似 myStringFunction 的函数，并在该函数中找到所有下划线和逗号的索引位置，然后提取所需的子字符串并再次将它们连接在一起。您在查询中的使用可能会像这样。

从表中选择 myStringFunction(field_name)；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T07:39:59.923

试试这个：

```
DECLARE @str varchar(100)='12_7,34_22,28_4,6_22'
DECLARE @out varchar(100)=''
While(CHARINDEX('_',@str,1) > 0)
begin
SET @out=@out+LEFT(REPLACE(@str,SUBSTRING(@str,CHARINDEX('_',@str,1),CHARINDEX(',',@str,1)-CHARINDEX('_',@str,1)),''),CHARINDEX(',',REPLACE(@str,SUBSTRING(@str,CHARINDEX('_',@str,1),CHARINDEX(',',@str,1)-CHARINDEX('_',@str,1)),'')))
SET @str=RIGHT(REPLACE(@str,SUBSTRING(@str,CHARINDEX('_',@str,1),CHARINDEX(',',@str,1)-CHARINDEX('_',@str,1)),''),LEN(REPLACE(@str,SUBSTRING(@str,CHARINDEX('_',@str,1),CHARINDEX(',',@str,1)-CHARINDEX('_',@str,1)),''))-CHARINDEX(',',REPLACE(@str,SUBSTRING(@str,CHARINDEX('_',@str,1),CHARINDEX(',',@str,1)-CHARINDEX('_',@str,1)),'')))

end
select @out+@str 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T11:20:52.087

在没有while循环的情况下尝试这个解决方案

```
declare @str varchar(30)='12_7,34_22,28_4,6_22,8_545'

;with cte (startPos,strg) as(
 select CHARINDEX('_',@str,1) [startPos],cast(@str as varchar(500)) as [strg]
 union all
 select CHARINDEX('_',[strg],[startPos])+1 [startPos],cast(stuff([strg],
 CHARINDEX('_',[strg],[startPos]),CHARINDEX(',',[strg],
 [startPos])-CHARINDEX('_',[strg],[startPos]),'') as varchar(500)) as [strg] 
 from cte
 where  CHARINDEX('_',[strg],[startPos])>0
)
select substring(MIN(strg),1,CHARINDEX('_',MIN(strg),1)-1) from cte 
```

# ruby-on-rails - Rails：如何将参数从一种形式传递到另一种形式

> ID：11585011
> 
> 赞同：0
> 
> 时间：2012-07-20T18:31:24.590
> 
> 标签：ruby-on-rails, devise

这是我的情况：我有任何网站访问者都可以填写的表格。当然，如果她/他想提交它，他们必须是用户。因此，当他们单击“提交”时，他们会被带到注册/登录页面。那是因为在保存原始表单的数据之前我需要一个“user_id”。

我想做的是从原始表单（params [：site]）中获取参数，而不是在创建操作中提交它们，我想等到用户创建帐户。这将允许我避免在没有用户 ID 的情况下将站点信息保存到数据库中。

我可以像这样在我的站点/创建方法中添加一些代码。

```
def create
  @site = Site.new(params[:site])   
  unless current_user?
    redirect_to new_user_session_path, sites_form_data: params[:site]
  end
  if @site.save
  # ...
end 
```

但是我不确定一旦让用户创建帐户后如何获取 params[:site]？

我在这个项目中使用了设计，所以这可能会给工作带来麻烦。我想知道我是否必须像这个人那样覆盖原来的设计控制器：[http ://rorguide.blogspot.com/2011/04/overwrite-devise-registrations.html](http://rorguide.blogspot.com/2011/04/overwrite-devise-registrations.html)

我想我也可以将数据存储在 cookie 中。但我不知道何时访问该 cookie、提取数据并保存到数据库中。用户创建后，一定。但它应该是用户模型的回调吗？它应该去哪里？

我很感激任何建议或意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:32:00.823

只存储`:site`在用户会话中怎么样？这将在请求中持续存在，这意味着您不必手动跟踪它。

# python - 使用 PYTHON 将 MDB 表导入 ACCDB

> ID：11585018
> 
> 赞同：3
> 
> 时间：2012-07-20T18:31:49.367
> 
> 标签：python, ms-access, ms-access-2007

我正在寻找一种使用 Python 模拟 Access 2007 (accdb) 中的“获取外部数据”的方法。我正在尝试将数据从 MDB 导入 ACCDB。基本上我不想每次都手动执行此操作，而是将其合并到我的 Python 工作流程中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:40:43.603

假设您在 Windows 机器上：

您可以使用 VBA 自动执行“获取外部数据”任务。深入了解 VBA 中 DoCmd-Object 的 TransferX (TransferText...) 方法的[文档](http://msdn.microsoft.com/en-us/library/office/ff841419)。因此，在使用 Python 之前，我建议您应该为您的任务编写一个有效的 VBA 解决方案。

之后，您可以尝试使用[Win32 Extensions for Python](http://starship.python.net/~skippy/win32/Downloads.html)。这些提供了一些您可以使用的 COM-Interop 类。可能 Python 中的这段代码将是您的入门：

```
import win32com.client
acc = win32com.client.Dispatch("Access.Application")
... 
```

有了这个，您应该能够将您的 VBA 代码传输到 Python。

# c# - 通过 API 和文本操作修改 OpenXML Word 文档

> ID：11585022
> 
> 赞同：1
> 
> 时间：2012-07-20T18:32:17.920
> 
> 标签：c#, ms-word, openxml-sdk

我正在开发原型以替换现有的基于文字自动化的模板渲染系统，目前正在评估 OpenXML SDK。模板库非常广泛（150-200 个模板，由非技术资源维护），所以我希望避免任何模板更改，而不是从 1997-2003 字格式升级。

当前嵌入的标签有时需要替换为文本，有时需要替换为图像/图表/等...（现在假设所有图表将在插入之前呈现为图像）。

我可以使用与[此 MSDN 文章](http://msdn.microsoft.com/en-us/library/bb508261.aspx)中描述的技术类似的技术来进行直接文本替换。我的场景稍微复杂一些，但看起来像这样：

```
 public void ReplaceFirstOccurrenceWithText(string tagBody, string replacement)
    {
        var modifiedText = GetCurrentText();
        modifiedText = modifiedText.ReplaceFirst(tagBody, XmlEncoder.Encode(replacement));
        using (var sw = new StreamWriter(document.MainDocumentPart.GetStream(FileMode.Create)))
        {
            sw.Write(modifiedText);
        }
    }

    public string GetCurrentText()
    {
        using(var reader = new StreamReader(document.MainDocumentPart.GetStream()))
        {
            return reader.ReadToEnd();
        }
    } 
```

我不保存字符串的原因是因为我希望基础文档保持最新，以便我可以通过普通 API 添加图像。使用[另一篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/office/bb497430.aspx)中描述的技术：

```
 public void ReplaceFirstOccurrenceWithImage(string tagBody, byte[] replacement)
    {
        ReplaceFirstOccurrenceWithText(tagBody, "IMAGE TAG WAS HERE!");
        var main = document.MainDocumentPart;
        var imagePart = main.AddImagePart(ImagePartType.Gif);//sniff this by loading bytes into a bitmap
        using(var imageStream = new MemoryStream(replacement))
        {
            imagePart.FeedData(imageStream);
        }

        ImageInserter.AddImageToBody(document, main.GetIdOfPart(imagePart));
    } 
```

ImageInserter 实际上是该文章中代码的复制/粘贴（我意识到这些抽象不是最好的，但我现在只是想让任何东西工作）。

现在是它变得毛茸茸的地方 - 文件似乎保持同步。图像是第一个被替换的标签，标签的文本替换有效，在文档底部添加图像也是如此。我的问题是，此后的文本替换似乎根本不起作用——所有其他标签都保留在文档中。但是，如果我在文本替换函数中设置断点，则每次调用 .GetCurrentText() 都会返回正确的结果（到该点为止的标记的文本已被替换）。但是当我保存文档时，它只保存了第一次替换。

有没有人遇到过这样的事情？下一步将尝试分阶段的方法（解决所有标签，首先运行直接文本替换，然后进行所有图像替换），但我觉得目前的任何错误都将成为问题，无论顺序如何。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T18:36:21.207

如果我在你的地方，我会调查

[http://docx.codeplex.com](http://docx.codeplex.com)

对于一般的东西来说它更直接..也许你正在做一些比图书馆可以处理的更复杂的事情，但我会看一看。

# jquery - jQuery兄弟姐妹（）得到渗透兄弟而不是下一个

> ID：11585023
> 
> 赞同：1
> 
> 时间：2012-07-20T18:32:23.237
> 
> 标签：jquery, html-table, jquery-traversing

嘿伙计们希望你能帮助我。

我对 jquery 比较陌生，并且在遍历表时遇到了一些麻烦。

基本上我有这个

```
<tr>
                    <td>
                        <img src="120628SatchelTobyCole/thumbnails/SatchelTobyCole_0963.JPG" rel="#mies1" border="0" alt="SatchelTobyCole_0963.JPG">
                        <br />SatchelTobyCole_0963.JPG <input type="checkbox" name="SatchelTobyCole_0963.JPG"  value="SatchelTobyCole_0963.JPG">
                    </td>
                    <td>
                        <img src="120628SatchelTobyCole/thumbnails/SatchelTobyCole_0963c.JPG" border="0" alt="SatchelTobyCole_0963c.JPG">
                        <br />SatchelTobyCole_0963c.JPG <input type="checkbox" name="SatchelTobyCole_0963c.JPG" value="SatchelTobyCole_0963c.JPG">
                    </td>
                    <td>
                        <img src="120628SatchelTobyCole/thumbnails/SatchelTobyCole_0966.JPG" border="0" alt="SatchelTobyCole_0966.JPG">
                        <br />SatchelTobyCole_0966.JPG <input type="checkbox" name="SatchelTobyCole_0966.JPG" value="SatchelTobyCole_0966.JPG">
                    </td>
                    <td>
                        <img src="120628SatchelTobyCole/thumbnails/SatchelTobyCole_0966c.JPG" border="0" alt="SatchelTobyCole_0966c.JPG">
                        <br />SatchelTobyCole_0966c.JPG <input type="checkbox" name="SatchelTobyCole_0966c.JPG" value="SatchelTobyCole_0966c.JPG">
                    </td>
                </tr> 
```

现在我正在粘贴更大功能的一部分代码。基本上我粘贴的代码部分是对实际的一些修改来解释问题

```
src="SatchelTobyCole_0963c.JPG";
var checkbox=$("#getPix input:checkbox[name='"+src+"']");
alert(checkbox.parent("td").siblings("td").children("img").attr("src")); 
```

现在我想让警报说“120628SatchelTobyCole/thumbnails/SatchelTobyCole_0966.JPG”

但是，相反，它在说

“120628SatchelTobyCole/thumbnails/SatchelTobyCole_0963.JPG”。

即，我希望警报打印表格中下一个图像的来源，但它正在打印上一个图像的来源？

如果有人能解释我做错了什么以及如何纠正它，我将非常感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T18:36:52.037

`.siblings`获取所有兄弟姐妹并`.attr`获取第一个选定元素的值。尝试使用`.next()`代替，`.siblings()`以便您获得下一个 td 的图像，而不是第一个 td 的图像。

```
alert(checkbox.parent("td").next().children("img").attr("src")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T18:40:52.137

你必须使用下一个（）。您目前可以使用 parent.sibligs 以便它会找到及其元素请参阅 JSFiddle here

[http://jsfiddle.net/bMWZm/](http://jsfiddle.net/bMWZm/)

# html - HTML表格删除特定列之间的填充

> ID：11585024
> 
> 赞同：2
> 
> 时间：2012-07-20T18:32:23.640
> 
> 标签：html, css, html-table, padding

我有一张有点像这样的桌子：

```
/---+---+---+---+---+---\
| A | B | C | D | E | F |
\---+---+---+---+---+---/ 
```

我想让 A 和 B 在视觉上看起来在同一个单元格中，但实际上并不是在同一个单元格中。

为此，我需要将 A 和 B 之间的边框和填充变为 0px。

但是，设置 TD 填充（或边距！）对我不起作用。那么，关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T19:02:00.380

使用**CSS**这很容易，特别是如果您希望第一列和第二列始终合并，如下所示。

`:nth-child(2)`选择这个css中每一行的第二个td `:first-child`选择这个css中每一行的第一个td，也可以写成`:nth-child(1)`

### 代码：

```
table
{
border-collapse:collapse;   
}

td
{
padding:4px;
border:1px solid black;   
}

tr td:first-child
{
padding-right:0;
margin-right:0;
border-right:0;
}

tr td:nth-child(n)
{
padding-left:0;
margin-left:0;
border-left:0;   
} 
```

### 示例页面：

[http://jsfiddle.net/h6DWg/1/](http://jsfiddle.net/h6DWg/1/)

### 编辑

OP 要求保持边界不折叠，保持边界不折叠的新示例位于[http://jsfiddle.net/h6DWg/10/](http://jsfiddle.net/h6DWg/10/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T19:36:42.460

我有一个不同的解决方案，虽然比之前建议的稍微复杂一些，但我相信它会给你更多的灵活性来应用这个解决方案。

首先，它确实需要一些 css 代码，如下所示：

```
td:not([colspan='2']) {
  /*your styling here*/
}
td[colspan='2'] {
  display: table-row;
}
td[colspan='2'] > div {
  display: table-cell;
  width: 50%;
  /*same styling here*/
} 
```

最后，html：

```
<table>
  <tbody>
    <tr>
      <td colspan='2'>
        <div id="cell-a"></div>
        <div id="cell-b"></div>
      </td>
      <td id="cell-c"></td>
      <!--and so on--> 
```

基本上，css 模仿表格的内置显示以优化表格行样式。这将允许 css 完成所有工作，此外，将允许您将 colspan='2' 放在任何地方，以便在需要的地方将两个单元格加倍。我已经在本地进行了测试以确保它有效。

**编辑：** 刚刚在 td[colspan='2'] > div 下添加了 width: 50% ，以便在表结构中将它们适当地隔开。

# windows - 无法让 D3DPT_TRIANGLELIST 工作

> ID：11585028
> 
> 赞同：1
> 
> 时间：2012-07-20T18:32:43.420
> 
> 标签：windows, geometry, directx, vertex-buffer

当我尝试使用 D3DPT_TRIANGLELIST 时遇到问题。以下示例来自一本书，所以我看不出问题出在哪里。

顶点数据：

```
ColorVertex *v;

Triangle->Lock(0,0,(void**)&v,0);

v[0] = ColorVertex(-1.0f, 0.0f, 2.0f, D3DCOLOR_XRGB(255, 0,0));
v[1] = ColorVertex(0.0f, 0.0f, 2.0f, D3DCOLOR_XRGB(0,255,0));
v[2] = ColorVertex(1.0f, 0.0f, 2.0f, D3DCOLOR_XRGB(0,0,255));

Triangle->Unlock(); 
```

绘图功能：

```
Device->SetFVF(ColorVertex::FVF);
Device->SetStreamSource(0,Triangle,0,sizeof(ColorVertex));

D3DXMatrixTranslation(&World,-1.25f,0.0f,0.0f);
Device->SetTransform(D3DTS_WORLD,&World);

Device->SetRenderState(D3DRS_SHADEMODE, D3DSHADE_FLAT);
Device->DrawPrimitive(D3DPT_TRIANGLELIST, 0, 1);

D3DXMatrixTranslation(&World,1.25f,0.0f,0.0f);
Device->SetTransform(D3DTS_WORLD,&World);

Device->SetRenderState(D3DRS_SHADEMODE, D3DSHADE_GOURAUD);
Device->DrawPrimitive(D3DPT_TRIANGLELIST, 0, 1);

Device->EndScene();
Device->Present(0,0,0,0); 
```

但是，如果我从 D3DPT_TRIANGLELIST 更改为例如 D3DPT_LINELIST 它会画一条线。如果我使用 D3DPT_POINTLIST，它只会为每个 DrawPrimite 调用绘制一个点（像素）。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T20:42:21.837

您的顶点坐标不会形成三角形，它们是一条直线上的三个点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T08:13:44.820

好吧，在工作之后我发现了错误（！），新手的好习惯。它一直在我面前，在坐标中：

```
v[0] = ColorVertex(-1.0f, 0.0f, 2.0f, D3DCOLOR_XRGB(255, 0,0));
v[1] = ColorVertex(0.0f, 0.0f, 2.0f, D3DCOLOR_XRGB(0,255,0));
v[2] = ColorVertex(1.0f, 0.0f, 2.0f, D3DCOLOR_XRGB(0,0,255)); 
```

这不能形成三角形，因为任何顶点的 Y 坐标都发生了更新。当然可以画线和点，因为它们不需要 Y 坐标来形成规范。所以一个解决方案是例如：

```
v[0] = ColorVertex(-1.0f, 0.0f, 2.0f, D3DCOLOR_XRGB(255, 0,0));
v[1] = ColorVertex(0.0f, 1.0f, 2.0f, D3DCOLOR_XRGB(0,255,0));
v[2] = ColorVertex(1.0f, 0.0f, 2.0f, D3DCOLOR_XRGB(0,0,255)); 
```

# sql - 最大化查询效率

> ID：11585029
> 
> 赞同：0
> 
> 时间：2012-07-20T18:32:47.167
> 
> 标签：sql, sql-server

我有一个大约需要 3 分钟才能运行的查询。查询用于报告，我希望它更有效。我认为瓶颈是内部连接，我可能是错的只是想知道你们是否有任何解决方案。

```
 SELECT DISTINCT 
    SUBSTRING(T1.DateTime, 1, 4) AS Year, 
    SUBSTRING(T1.DateTime, 5, 2) AS Month, 
    SUBSTRING(T1.DateTime, 7, 2) AS Day, 
    T1.PipeNr, T1.SalesOrder, T1.JobNr, SIST.DefectCode AS DefectRef, 
    DEFCODES.DefectCode, DEFCODES.DefectDesc, SIST.ODYes, SIST.LocationWrap, 
    T1.OWS0601, T1.OWS0602, T1.OWS0603, T1.CrossWeld

    FROM PIPEDB.dbo.SIST INNER JOIN PIPEDB.dbo.MPIPEID T1 ON PIPEDB.dbo.SIST.PipeNr = T1.PipeNr INNER JOIN 
    PIPEDB.dbo.DEFCODES ON PIPEDB.dbo.SIST.DefectCode = PIPEDB.dbo.DEFCODES.DefectRef

    WHERE PIPEDB.dbo.SIST.DefectCode
    IN (
    SELECT Top (10) PIPEDB.dbo.SIST.DefectCode

    FROM PIPEDB.dbo.SIST INNER JOIN PIPEDB.dbo.MPIPEID T2 ON PIPEDB.dbo.SIST.PipeNr = T2.PipeNr INNER JOIN 
    PIPEDB.dbo.DEFCODES ON PIPEDB.dbo.SIST.DefectCode = PIPEDB.dbo.DEFCODES.DefectRef

    WHERE SUBSTRING(T2.DateTime, 1, 4) = SUBSTRING(T1.DateTime, 1, 4) AND SUBSTRING(T2.DateTime, 5, 2) = SUBSTRING(T1.DateTime, 5, 2) AND 
    SUBSTRING(T2.DateTime, 7, 2) = SUBSTRING(T1.DateTime, 7, 2)

    GROUP BY PIPEDB.dbo.SIST.DefectCode

    ORDER BY COUNT(PIPEDB.dbo.SIST.PipeNr) DESC) 

    AND (PIPEDB.dbo.DEFCODES.DefectDesc IN ("Cut To Remove Defect")) AND 
    ((CASE WHEN T1.CrossWeld = 1 THEN 1 WHEN T1.CrossWeld = 0 THEN 2 END) = @Crossweld OR @Crossweld = 0) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:18:53.507

问题是您将 IN 子查询作为相关子查询，这反过来又导致了性能问题。对于主子句（或外部子句）中的每一行，正在执行 IN 子查询，因此它需要时间。每次执行根据表的大小，内部子查询可能会很昂贵，并且很可能它会在子查询中使用嵌套循环连接。此外，如果来自外部查询的行数非常高，那么*昂贵*的IN 子查询会被执行很多时间，从而降低查询的性能。我建议再次查看逻辑并确保它给出正确的数据。

见下文。我已尝试重现您的问题。此查询的成本是 2045，这是非常巨大的，当然这需要时间。它的时钟约为 1000 万个 io 的 176 秒 CPU 和 48 秒经过的时间。

不是这样。我预计只有 10 个 productid（我相信您也希望只有 10 个缺陷代码），但由于相关子查询，我可以看到许多其他 productid。

```
set statistics io,time on

go

select * from Sales.SalesOrderHeader soh inner join sales.SalesOrderDetail sod
on sod.SalesOrderID=soh.SalesOrderID
where sod.ProductID in (
select top 10 ProductID
from Sales.SalesOrderHeader soh1 inner join sales.SalesOrderDetail sod
on sod.SalesOrderID=soh1.SalesOrderID
where datepart(yy,soh.OrderDate) = DATEPART(yy,soh1.OrderDate)
and datepart(mm,soh.OrderDate) = DATEPART(mm,soh1.OrderDate) 
```

)

```
 order by sod.ProductID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T19:32:18.670

你必须有`DISTINCT`吗？我宁愿`GROUP BY`用来返回一组独特的记录，例如

```
SELECT DISTINCT X
FROM Y 
```

改成

```
SELECT X
FROM Y
GROUP BY X 
```

此外，我更喜欢在我的子句中`EXISTS`使用，因为它们通常稍微快一些。`IN``WHERE`

我很想将以下部分放在 a 中`CTE`并使用分区函数`RANK() OVER`而不是`TOP(10)`/`ORDER BY`设置

```
IN (
SELECT Top (10) PIPEDB.dbo.SIST.DefectCode

FROM PIPEDB.dbo.SIST INNER JOIN PIPEDB.dbo.MPIPEID T2 ON PIPEDB.dbo.SIST.PipeNr = T2.PipeNr INNER JOIN 
PIPEDB.dbo.DEFCODES ON PIPEDB.dbo.SIST.DefectCode = PIPEDB.dbo.DEFCODES.DefectRef

WHERE SUBSTRING(T2.DateTime, 1, 4) = SUBSTRING(T1.DateTime, 1, 4) AND SUBSTRING(T2.DateTime, 5, 2) = SUBSTRING(T1.DateTime, 5, 2) AND 
SUBSTRING(T2.DateTime, 7, 2) = SUBSTRING(T1.DateTime, 7, 2)

GROUP BY PIPEDB.dbo.SIST.DefectCode

ORDER BY COUNT(PIPEDB.dbo.SIST.PipeNr) DESC) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T19:10:41.140

按照以下说明查看 SQL Server 推荐的任何索引：

将查询放在 Microsoft SQL Server Management Studio 的查询窗口中。

不要运行它，而是按 CTRL+L（或从菜单中选择 Query > Display Estimated Execution Plan）。

然后在 Execution Plan 选项卡中，您*可能会*看到一些以“Missing Index (Impact xx.xxxx%)...”开头的绿色文本，如果这样做，请右键单击该文本并选择 Missing Index Details。这将打开一个带有建议索引定义的新窗口（您必须提供索引名称）。例子：

```
/*
Missing Index Details from SQLQuery3.sql - (local).master (sa (55))
The Query Processor estimates that implementing the following index could improve the query cost by 99.3783%.
*/

/*
USE [DatabaseName]
GO
CREATE NONCLUSTERED INDEX [<Name of Missing Index, sysname,>]
ON [dbo].[Table] ([Column1])
INCLUDE ([Column2],[Column2])
GO
*/ 
```

将“<Name of Missing Index, sysname,>”替换为有效的索引名称并创建索引。

可以重复这些步骤，直到没有建议索引为止。

除此之外，在 where 子句中使用 SubString 可能是一个问题。

这个：

```
WHERE SUBSTRING(T2.DateTime, 1, 4) = SUBSTRING(T1.DateTime, 1, 4) AND SUBSTRING(T2.DateTime, 5, 2) = SUBSTRING(T1.DateTime, 5, 2) AND SUBSTRING(T2.DateTime, 7, 2) = SUBSTRING(T1.DateTime, 7, 2) 
```

肯定是这样的：

```
WHERE SUBSTRING(T2.DateTime, 1, 8) = SUBSTRING(T1.DateTime, 1, 8) 
```

甚至更好：

```
WHERE LEFT(T2.DateTime, 8) = Left(T1.DateTime, 1, 8) 
```

甚至更好（可以允许更多的索引使用）：

```
WHERE T2 LIKE Left(T1.DateTime, 1, 8) + '%' 
```

如果这些日期字符串只有 8 个字符长，则可能是这样的：

```
WHERE T2.DateTime = T1.DateTime 
```

如果查询仍然没有在所需的时间运行，那么重组数据是一个很好的举措，以便在 where 子句中不需要 SUBSTRING 或 LEFT ......即在它自己的列中分解日期。

# javascript - 代码流误解？

> ID：11585030
> 
> 赞同：7
> 
> 时间：2012-07-20T18:32:54.720
> 
> 标签：javascript, json

在[查看](http://www.json.org/)JSON 语法之后（只是为了好奇）

我注意到了一个不同的地方`flow tags edges`：

那么有什么区别：

![在此处输入图像描述](../Images/810f848d71b61ec37892051f55509d0f.png)

对比

![在此处输入图像描述](../Images/3992ef1444a3bb2c47f8d4e81f08fa11.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T18:44:13.990

我相信差异来自词法分析，即数字和字符串是词法“标记”，而值和数组是语法实体（产生）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T18:47:19.090

您可以看到它`value`由许多可能的实体组成，包括页面上其他地方定义的实体。

`string`另一方面，不包含页面其他地方定义的实体；您可以将其视为由一些基本或原始实体组成。

这样，`string`和`number`是终端实体，不再细分；双条表示这一点。

# django - 预填充 Django 表单

> ID：11585031
> 
> 赞同：1
> 
> 时间：2012-07-20T18:32:56.043
> 
> 标签：django, django-forms

我正在尝试从查询中获取 Django 表单，但我一直以错误的方式进行操作。检查了几个例子，但我做的有点不同。这是我的代码，

乐形式

```
class ItemForm(ModelForm):

    class Meta:
        model = Item
        exclude = ('deleted') 
```

和部分视图

```
def index(request):
    user = User
    try:
        last_modified_list = ShoppingList.objects.filter(deleted='0').filter(owner=user).latest('date_modified')
        items = Item.objects.filter(shopping_list=last_modified_list).filter(deleted='0')
    except ObjectDoesNotExist:
        items = Item.objects.filter(deleted='0')

    last_used_currency = ExtendedUser.objects.filter(owner=user)

    #currency = forms.CharField(initial=last_used_currency.last_currency)
    try:
        last_used_shoppinglist = ShoppingList.objects.filter(deleted='0').filter(owner=user).latest('date_modified')
    except ObjectDoesNotExist:
        last_used_shoppinglist = datetime.datetime.now()

    item_form = ItemForm (request.POST or None)
    item_form.fields["shopping_list"]=last_used_shoppinglist

    if item_form.is_valid():
        name =  item_form.cleaned_data['name']
        bought =  item_form.cleaned_data['bought']
        currency = item_form.cleaned_data['currency']
        price = item_form.cleaned_data['price']
        date_added = item_form.cleaned_data['date_added']
        date_modified = item_form.cleaned_data['date_modified']
        date_bought = item_form.cleaned_data['date_bought']
        shopping_list = item_form.cleaned_data['shopping_list']
        quantity = item_form.cleaned_data['quantity']
        deleted = item_form.cleaned_data['deleted']

    return render_to_response ('base.html',{'user':user,'items':items,'item_form':item_form}, context_instance=RequestContext(request)) 
```

该`shopping_list`行确实导致许多错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T18:38:43.640

您想将对象作为["instance"](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#modelform)传递到表单中。如果我正确理解了您的代码并且您有一个名为“item”的项目：

```
ItemForm(request.POST or None, instance=item) 
```

不过，在这种情况下，您似乎需要一个[模型表单集](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#model-formsets)，以便您可以一次编辑多个项目。然后你将你的`items`变量作为“queryset”参数传递。

编辑：实际解决方案是针对不同的问题，

```
item_form.fields["shopping_list"].initial = last_used_shoppinglist 
```

# netbeans - NetBeans，黑色背景主题

> ID：11585032
> 
> 赞同：7
> 
> 时间：2012-07-20T18:33:02.787
> 
> 标签：netbeans, themes

NetBeans 中有许多具有黑色（或深色）背景的主题。但是我怎样才能在项目导航面板中做黑色背景
![在此处输入图像描述](../Images/6304d0ca1818989d2d57e2e950e6fdca.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-16T14:07:36.757

可以通过安装一些 Netbeans 插件来实现。我使用带有 Monokai 主题[的 ez-on-da-ice](http://plugins.netbeans.org/plugin/40985/ez-on-da-ice)（灰色背景，在 linux Mint 13 上，未在 Windows 上测试过）。

但是，请继续关注：Netbeans 7.3.1默认[包含几个深色主题！](http://netbeans.dzone.com/articles/new-netbeans-dark-laf)如果你等不及了，现在就下载一些[7.3 nightly build](http://bits.netbeans.org/download/trunk/nightly/latest/) ...

编辑：只需获取[最新的稳定版本](https://netbeans.org/downloads/)并享受。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-20T18:37:36.523

使用 netbeans 主题无法做到这一点。您正在使用 windows，因此您可以更改 windows 主题（对于 linux 它将是 GTK 主题）来实现这一点。但这将反映到您正在使用的其他应用程序。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-20T23:33:16.147

Besnik 是正确的，NetBeans 不会为您执行此操作，但您的图形驱动程序或窗口管理器 (Linux) 可能允许您反转整个屏幕。我这样做是因为黑色地面对我的眼睛来说更容易。

在 Windows 上，我使用 Melvyn Laily 的出色实用程序[NegativeScreen](http://arcanesanctum.net/negativescreen/)。

# objective-c - NSMutableArray：initWithObjects 是否从索引 0 开始？

> ID：11585033
> 
> 赞同：-1
> 
> 时间：2012-07-20T18:33:06.217
> 
> 标签：objective-c, nsmutablearray

当您声明一个数组并同时使用它初始化它时，`initWithObjects:`第一个对象是否进入索引 0？然后依次填充数组？

示例：是否进行以下声明

`NSMutableArray *test = [[NSMutableArray alloc] initWithObjects:@"zero", @"one", @"two", nil];`

导致：

```
test [0] = zero
test [1] = one
test [2] = two 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T18:36:01.033

是的，`NSArray`它的子类`NSMutableArray`管理对象的有序集合。

# javascript - 获得白银或黄金价格

> ID：11585039
> 
> 赞同：0
> 
> 时间：2012-07-20T18:33:35.017
> 
> 标签：javascript, regex

我正在编写小部件程序以从彭博网站获取白银或黄金价格，这些是脚本的一部分：

```
function getPrice()  {

    var url = new URL();
    url.location = "http://www.bloomberg.com/markets/commodities/futures/";
    url.fetchAsync(PriceReturn);
}

function PriceReturn(url)   {

    var resultStr = url.result;     
    var subCheck = resultStr.substring(resultStr.indexOf("SILVER"));    
    foundStr = subCheck.match("[0-9]+\.[0-9]+");
    setPrice(parseFloat(foundStr).toFixed(2));
} 
```

我可以得到白银的价格（假设现在是 27.30）但是当我想检查黄金价格时（`.indexOf("GOLD")`）（假设现在是 1,585.60）

`subcheck.match()`得到这个价格的脚本是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T18:38:21.537

你的问题是`[0-9]+\.[0-9]+`与数字不匹配`1,585.60`。正确的正则表达式是：

```
/\d{1,3}(?:,\d{3})*\.\d{2}/ 
```

这会将格式化的数字匹配到小数点后两位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T19:25:35.770

我认为te模式应该是这样的：

```
/\d+(\,\d+)?\.\d{1,3}/ 
```

# android - 如何获取视图的状态（启用/禁用）？

> ID：11585040
> 
> 赞同：1
> 
> 时间：2012-07-20T18:33:37.933
> 
> 标签：android

如何检查 a 的启用或禁用状态`View`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T18:36:00.440

您可以使用以下内容：

[`View.isEnabled();`](http://developer.android.com/reference/android/view/View.html)

`View`的一个`View`或一个子类在哪里`View`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T18:37:00.477

从文档：[`View.isEnabled()`](http://developer.android.com/reference/android/view/View.html#isEnabled%28%29)

返回一个`boolean`...

# javascript - Android about:debug修复JS的Bug

> ID：11585041
> 
> 赞同：2
> 
> 时间：2012-07-20T18:33:39.537
> 
> 标签：javascript, android, asp.net, cassette

我有一个奇怪的情况，我的 Javascript 在 Android 2.x 设备上以不可预知的方式失败。

一些描述是：

*   Javascript 应用程序的某些部分可以工作，而某些部分则不能。这些“部分”被分解为具有单独构造函数的模块。

*   Javascript 应用程序在一台服务器上失败，而不是在我们自己的网络中的另一台服务器上失败。

*   Javascript 应用程序有时会在页面上的多个脚本文件中引发 ILLEGAL TOKEN 错误，但该应用程序在任何桌面客户端上都不会引发错误，并且被认为在语法上是正确的。

为了解决这个问题，我在地址栏中输入 about:debug 并刷新。繁荣。突然间，整个 Javascript 应用程序都可以工作了，包括每个模块和每个服务器上。

此外，现在Android“记住”了这一点，并且缺陷在90％的时间内都消失了，但偶尔会随机出现。

这是一个 ASP.NET Episerver 堆栈，我们使用 Cassette 连接和缩小大约 12-20 个脚本，其中大约 4 个“最终”脚本块被渲染到页面。

有没有人遇到过这样的事情？我唯一的策略是将脚本分解成几个额外的 HTTP 请求以减慢解析器的速度……但我真的不知道这里发生了什么。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:29:44.517

经过大量测试，我们似乎已经修复了这个错误。这是 Android 2.x 下载带有以下标头的 Javascript 文件的问题：

```
Content-Type: deflate 
```

我们将其更改为：

```
Content-Type: gzip 
```

不过很好奇，为什么 Android 2.x 会出现 deflate 配置和 Javascript 文件的问题。

# c++ - 我可以通过使用 Wt 作为我的 Web 框架来完全隐藏 Web 应用程序中“隐藏”的 C 代码吗？

> ID：11585045
> 
> 赞同：3
> 
> 时间：2012-07-20T18:33:44.360
> 
> 标签：c++, c, web-applications, gps, wt

我正在为测量应用程序构建一个网络 GPS 定位应用程序。用于数据处理和位置估计的算法将取自用于 GPS 测量处理的开源 C 库。

由于我之前没有大型应用程序的web开发经验，而且我的脚本语言能力不足，所以我决定选择C++ web框架[Wt](http://www.webtoolkit.eu/wt)，因为我发现它易于学习，得到很好的支持，适合我的应用程序我必须用我熟悉的语言编写代码。

我的问题是，我可以用它来完全隐藏 C 代码，它是我项目的主干，但有大量不安全的函数（printf、sprintf 等）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T18:42:16.027

简短的回答是，是的，你可以——但这样做并不总是微不足道的。Wt 对您的输入进行了很多清理，因此保持代码安全通常并不难，但是如果（例如）您告诉它接受 2000 个字符，但在内部某处只留出空间，例如, 200 代替。

同时，Wt 的明确意图是它自己处理最明显的安全问题，因此您的代码*大多*不必这样做。至少据我所知，它在这方面相当成功（但公平地说，我没有大量使用它，所以总是有可能我错过了一些东西）。

# javascript - 如何制作一个带有两个“推动”彼此的句柄的 jquery ui 滑块？

> ID：11585046
> 
> 赞同：2
> 
> 时间：2012-07-20T18:33:51.157
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-slider

我想使用 jquery ui 制作一个带有两个句柄的滑块，它们之间保持最小的空间。如果左把手试图穿过右把手，则应推动右把手。反之亦然。这是一个示例（不要介意重叠，这并不重要）：

[http://jsfiddle.net/SP5VQ/](http://jsfiddle.net/SP5VQ/)

只要移动缓慢，它就可以工作，但如果鼠标移动得太快，它会在“推动”场景中失败。我认为从“滑块”事件中设置滑块值可能有问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T20:02:33.330

这行得通。我复制了代码`$.ui.slider.prototype._slide`并删除了检查左手柄是否大于右手柄的部分。现在效果很好。

[http://jsfiddle.net/Nk8ap/](http://jsfiddle.net/Nk8ap/)

```
 $.ui.slider.prototype._slide = function ( event, index, newVal ) {
          var otherVal,
            newValues,
            allowed;

          if ( this.options.values && this.options.values.length ) {
            otherVal = this.values( index ? 0 : 1 );
            if ( newVal !== this.values( index ) ) {
              newValues = this.values();
              newValues[ index ] = newVal;
              // A slide can be canceled by returning false from the slide callback
              allowed = this._trigger( "slide", event, {
                handle: this.handles[ index ],
                value: newVal,
                values: newValues
              } );
              otherVal = this.values( index ? 0 : 1 );
              if ( allowed !== false ) {
                this.values( index, newVal, true );
              }
            }
          } else {
            if ( newVal !== this.value() ) {
              // A slide can be canceled by returning false from the slide callback
              allowed = this._trigger( "slide", event, {
                handle: this.handles[ index ],
                value: newVal
              } );
              if ( allowed !== false ) {
                this.value( newVal );
              }
            }
          }
        } 
```

# objective-c - 启用点击 webview 中的链接

> ID：11585048
> 
> 赞同：3
> 
> 时间：2012-07-20T18:34:00.443
> 
> 标签：objective-c, macos

如何在我的 mac osx webview 中启用点击链接？

我有以下代码，但我不知道为策略委托实施哪些方法......

```
@synthesize myWebView = _myWebView;

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification

    /* webview setup here, everything works fine 
    except cannot click links in webview..... */

    //setup my delegate
    _myWebView.policyDelegate = self;

}
//Now what?.... 
```

谢谢。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-07-20T19:39:14.673

WebView 对链接没有限制。

但是，如果您在单击 Web 视图中的链接时需要自定义行为，则应在策略委托中实现“webView:decidePolicyForNavigationAction:request:frame:decisionListener:”。然后，您从操作信息字典中获取操作类型，如果它是链接单击事件，则执行您的自定义行为。

例子：

```
- (void)webView:(WebView *)webView decidePolicyForNavigationAction:(NSDictionary *)actionInformation request:(NSURLRequest *)request frame:(WebFrame *)frame  decisionListener:(id < WebPolicyDecisionListener >)listener

{

    NSUInteger actionType = [[actionInformation objectForKey:WebActionNavigationTypeKey] unsignedIntValue];
    if (actionType == WebNavigationTypeLinkClicked) {
        //Do your stuff
    } else {
        [listener use];
    }

} 
```

# android - Main Activity 运行和屏幕更新前的时间过长

> ID：11585051
> 
> 赞同：1
> 
> 时间：2012-07-20T18:34:07.603
> 
> 标签：android, android-emulator, main-activity

在 Main Activity 运行和屏幕更新之前，我的应用程序需要太多时间

当我在一些旧手机或 Android 模拟器上测试我的应用程序时，在显示主应用程序之前，应用程序会显示另一个“屏幕”。从设计的角度来看，该屏幕的配置并不好。

我不想显示那个屏幕，有一些配置要更改吗？那个“屏幕”是什么？是系统画面吗？还是我的代码和性能有问题？

有人能帮我吗？

感谢并为我糟糕的英语感到抱歉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:29:43.970

我认为您应该首先创建一个带有进度条的活动或启动屏幕活动，只是首先出现，然后让该活动启动需要更长加载时间的新活动。然后，在第二个活动的创建结束时，您可以通过 Intent 通知启动屏幕或进度条活动，并让启动屏幕完成，让第二个活动在它已经加载后被带到前台。

# ruby-on-rails - 允许在数字字段中使用逗号

> ID：11585062
> 
> 赞同：4
> 
> 时间：2012-07-20T18:34:50.897
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

这是一个愚蠢的问题，我觉得我一定错过了一些简单的东西。我有一个带有`quantity`字段的表格。人们在输入数量时不断输入逗号（例如，他们输入`12,000`表示一万二千）所以我想在将数量（`12000`在示例中）保存到数据库中的整数列之前去掉逗号。

到目前为止，我已经尝试了两种方法。[按照此 SO question](https://stackoverflow.com/q/6541864/574190)中的建议覆盖 setter 方法

```
 def quantity=(num)
    num.gsub!(',', '') if num.is_a?(String)
    self[:quantity] = num.to_i
  end 
```

这在某种意义上是有效的。如果我输入`12,000`数量字段并提交表单，我会`12000`进入数据库。问题是它也绕过了所有`quantity`验证。例如，我不再可以验证数量值的存在。不是很好。

我还尝试使用验证前回调（而不是覆盖设置器）：

```
 before_validation :sanitize_quantity

  def sanitize_quantity
    # Doesn't wok because quantity.to_i already called by this point.
  end 
```

这不起作用，因为当数量到达回调方法时，Rails 已经调用`to_i`了它。这意味着它将在到达回调时`12,000`被截断。`12`再一次，不好。

除了在客户端剥离逗号之外，我还能尝试什么？

最后一点，我知道这本质上是一件愚蠢的事情，因为某些国家/地区以不同的方式使用句号和逗号。无论如何，我仍然需要这样做。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-20T19:08:30.943

### 使用类型强制

如果我正确理解您的问题，那么您正在尝试将字符串强制转换为数字。如果是这样，您可以像这样使用显式强制转换：

```
validates :quantity, presence: true, numericality: true

def quantity=(num)
  self[:quantity] = num.to_s.scan(/\b-?[\d.]+/).join.to_f
end 
```

### 测试和示例

看看这是如何工作的，您可以在控制台尝试以下操作。

```
# String as input.
number = '12,956.05'
number.to_s.scan(/\b-?[\d.]+/).join.to_f
=> 12956.05

# Float as input.
number = 12956.05
number.to_s.scan(/\b-?[\d.]+/).join.to_f
=> 12956.05

# Using an ActiveRecord object.
q = Quantity.new quantity: '12,956.05'
=> #<Quantity id: nil, quantity: 12956.05, created_at: nil, updated_at: nil>
q.save
=> true 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-20T18:56:53.837

实际上，我在阅读我的问题时就想到了这一点。

关键是使用虚拟属性。

```
class Job < ActiveRecord::Base
  def flexible_quantity
    quantity
  end

  def flexible_quantity=(quantity)
    self.quantity = quantity.gsub(',', '') unless quantity.blank?
  end
 end 
```

然后在表单中，使用虚拟属性。

```
<%= f.text_field :flexible_quantity %> 
```

现在验证是否存在 flexible_quantity 值。

```
class Job < ActiveRecord::Base
  validates :flexible_quantity, presence: true

  # The cool this is that we can leave the numericality validation on the quantity field.
  validates :quantity, presence: true, numericality: { only_integer: true }
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T18:45:44.193

你会得到数量`params[:quanity]`。您可以调用一个辅助方法（例如，在您的控制器中定义）来修复字符串，然后将其传递给您的模型。

```
# YourController.rb
def create # or whatever
    quantity = sanitize_quantity(params[:quantity])
    YourModel.create!(:quantity => quantity)
end

private

    def sanitize_quantity(num)
        num.gsub!(',', '') if num.is_a?(String)
        return num.to_i
    end 
```

所以你在它进入你的模型**之前对其进行消毒，所以它仍然可以对其进行验证。**

# jquery - 在对话框中使用回调函数

> ID：11585063
> 
> 赞同：0
> 
> 时间：2012-07-20T18:34:52.550
> 
> 标签：jquery, jquery-callback

我正在使用 jQuery 对话框。我希望能够将脚本用于单个对话框以进行多次使用。为此，我正在考虑分配一些可以在对话框中调用的回调函数。这是一个合适的方法吗？单击对话框按钮时，我需要做什么才能使以下代码警报“嗨”？谢谢

```
function somefunction() {alert('hi');}

$("#clickme").click(function(){$("#dialog").data('callback',somefunction).dialog("open");});

$("#dialog").dialog({
    buttons: [
    {
        text    : 'Click',
        click   : function() {
            //If $(this).data('callback') is defined, then execute the function 
        }
    }]
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:40:28.990

有几种不同的方法可以做到这一点（全部显示在文档中）。

这是一种方法（我认为最简单的方法）：

```
$("#dialog").dialog({
    buttons: {
       "Click": function() {
            alert("Hi");
            // execute callback if it is defined
            if (callback) callback();
        }
    }
}); 
```

# monomac - MonoMac 中的 NSTableCellView

> ID：11585064
> 
> 赞同：0
> 
> 时间：2012-07-20T18:34:53.343
> 
> 标签：monomac

我对 MonoMac 还很陌生，我想弄清楚MonoMac 中是否提供`NSTableCellView`该类（[此处显示](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSTableCellView_Class/Reference/Reference.html)）？

我看到 MonoMac 中有一个`NSTableViewCell`类，但这似乎完全不同。

感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:03:18.463

有问题的类目前不是[可用的 Mono API](http://docs.go-mono.com/?link=root%3a)的一部分。您可以通过[创建与底层 Objective-C API 的绑定来](http://www.mono-project.com/MonoMac/Documentation/Binding_New_Objective-C_Types)访问此类型。

# javascript - 如何使用javascript将变量的值分配给texbox

> ID：11585074
> 
> 赞同：0
> 
> 时间：2012-07-20T18:35:43.810
> 
> 标签：javascript, html

变量定义为 pedateXX，文本框名称为 pedatein 并且被隐藏，见下文。我曾尝试使用 getElementById，但在检查 pedatein 后，它包含一个空值。

```
var pedateIn = document.getElementById('pedateXX')

<input type="hidden" name="pedatein" id="pedatein" size="8" maxlength="8" value=/%pedatein%/ autocomplete=OFF/> 
```

任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T18:38:16.263

如果你的变量是`pedateXX`你想要的。

```
document.getElementById('pedatein').value = pedateXX; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T18:40:38.970

您可以简单地分配值，如下例所示：

```
document.getElementById('pedateXX').value = pedateIn; 
```

# blackberry - 黑莓应用程序开发选择哪种模型？

> ID：11585081
> 
> 赞同：0
> 
> 时间：2012-07-20T18:36:05.650
> 
> 标签：blackberry, model

我是黑莓开发的新手，我想知道是否有一些特定型号最适合在购买之前测试应用程序。我在互联网上搜索但我没有找到任何相关信息，所有型号都可以测试吗？

我知道对于 Android，某些功能不适用于所有智能手机型号，黑莓也一样吗？

此外，我可以在任何黑莓中测试处于测试阶段的应用程序，还是他必须具备的一些特定特征？

PS：我是在OS5上开发的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T23:12:22.137

对我来说，做决定有两点：

## 1\. 模拟器

*   通常我在不同的模拟器上运行和调试我的应用程序。我最喜欢的模拟器是 BlackBerry Simulator_7.0.0.592_9790，它比我尝试的其他模拟器启动得更快；
*   使用模拟器，您可以尝试在不同的设备上运行应用程序，在我的实践中这很重要，因为有时执行确实存在差异，尤其是在 OS 6 和 OS 7 之间；
*   但是要舒适地运行模拟器，您需要功能强大的计算机；
*   黑莓模拟器可以提供不同的模拟功能（旋转、usb 电缆连接、3G 网络等），这就是它适用于当今开发的大多数应用程序的原因；
*   开始真的足够了，我建议从模拟器开始，如果您遇到模拟器确实无法提供给您的问题，请考虑使用真正的手机；
*   如果您计划主要为自己开发并且小型项目模拟器就足够了，那么对于小型和大型商业项目通常客户提供测试设备。

## 2.真实设备

*   选择更强大的设备，因为它更快；
*   在真实设备上运行应用程序 当您尝试运行和调试应用程序时，您需要始终通过 BlackBerry 服务器对应用程序进行签名；
*   我更喜欢带有触摸屏的设备，它易于导航；
*   其他功能对我来说不是那么重要。
*   现在我用的是 BlackBerry 9800 (Platform 6.0)，使用这款设备非常舒服，但我注意到一些问题是信号较弱时 WiFi 连接不佳，与 BlackBerry Bold 9900 (Platform 7.0) 相比性能较差) 但那里没有触摸屏。-

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T07:38:29.247

您需要考虑是否需要从一种模型到另一种模型的某些功能，例如：

*   您是否需要支持 GPS 的设备。
*   连接性：3G？GPRS？
*   相机：自动对焦？
*   触摸屏或触控板（或两者兼而有之？）
*   屏幕尺寸（纵向、横向）

Yo 还可以询问客户哪些 BB 模型在他们的组织中更常见。或者，如果您正在开发产品，请尝试查找一些市场上最畅销型号的统计数据。

一般来说，您需要在尽可能多的真实设备上进行测试，并且不要依赖应用程序在模拟器上的行为方式。

# javascript - 我可以从网站唯一地识别移动设备吗？

> ID：11585082
> 
> 赞同：1
> 
> 时间：2012-07-20T18:36:15.360
> 
> 标签：javascript, android, iphone, mobile

我有 2 个问题，从 WEBSITE 的角度来看（不是本地移动应用程序），是否有可能

A）在不询问用户的情况下检索用户电话号码（出于安全原因，我假设没有）。这纯粹是在用户同意该服务的情况下，这不是粗略的。事实上，我们可能会直接问“你能确认这是你的号码吗？” 是/否）

B）如果答案是否定的，我确定是这样，有没有办法唯一识别用户，这样他们就不需要每次都手动输入他们的号码（只有第一次）？Cookie 的工作方式与它们在网站上和在移动浏览器上的工作方式相同吗？就像我可以用他们的号码存储一个永久 cookie，这样如果他们在移动设备上访问该网站，描述就会更改为“单击此处将您的号码从***_* ____**更改为”。我们可以将电话号码存储在我们的数据库中而不是 cookie 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:24:18.023

我认为解决这个问题的最佳方法很可能是使用一种方法，例如移动服务服务器中使用的 Google App Engine 服务器，其中假定用户拥有（或创建）一个谷歌帐户，以及一个适当的使用 API，因此您可以识别用户。

当然，您不会被迫使用 Google 帐户，也不会强迫用户创建帐户，并且您可以拥有自己的帐户和/或 cookie 系统，尽管 Google 帐户在许多此类服务器中被广泛使用，因为 Android 用户必须拥有 Google与其设备关联的帐户。不过我知道，您的问题还包括 iPhone 标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T21:39:33.443

有四种方式：

*   创建用户帐户

    我想这不在讨论范围内，当有人必须登录时，他也可以输入一个数字。另外，您需要以下其中一项才能将登录名与请求实际匹配。

*   尽量使用所有可能的 cookie（是的，有不同的）：

    [http://samy.pl/evercookie/](http://samy.pl/evercookie/)

*   或者用其他属性识别用户：

    位置、IP、[http](http://lucb1e.com/rp/cookielesscookies/) : //lucb1e.com/rp/cookielesscookies/、http: [//browserspy.dk/](http://browserspy.dk/)等

其次并不是真正安全，因此可以向您“建议”随机数，这可能是隐私问题。所以你应该删掉一些数字（例如用 * 或其他东西替换它们）。

我认为实际上你现在几乎可以依赖 cookie。如果有人删除了 cookie，他希望每个网站都忘记他，如果有人试图解决这个问题，我觉得这是对我隐私的渗透。

最后，但也许是最好的：

*   自定义链接。我的意思是那太棒了。您可以为它添加书签，您可以在每个 URL 的末尾添加一个“?nr=123512351”。就是这样。100% 有效（即使在 1990 年的浏览器上。1990 BC :P）。没有问题。

# c# - RavenDB session.Store 异常

> ID：11585086
> 
> 赞同：1
> 
> 时间：2012-07-20T18:36:21.440
> 
> 标签：c#, ravendb

我开始学习 RavenDB。我在服务器机器上安装了服务器版本，并将客户端 dll 添加到一个简单的控制台应用程序中。当我尝试运行应用程序时，它给了我一个 WebException：“请求被中止：请求被取消。”

这是代码：

```
public class Article : AbstractIndexCreationTask<Article>  
  {
    public string Id { get; set; }
    public string Text { get; set; }
    public string Title { get; set; }

    public Article()
    {
        Map = articles => from article in articles select new { article.Text };  
    }
} 

       static void Main(string[] args)
    {
        var ravenIntroArticle = new Article()
        {
            Text = "RavenDB fits into a movement that is called ...",
            Title = "RavenDB Introduction",
        };

        var csharpUsingArticle = new Article()
        {
            Text = "The full value of the C# using statement ...",
            Title = "Your Friend the C# Using Statement",
        };

        var nutsAndProteinArticle = new Article()
        {
            Text = "Nuts are a great source of protein ...",
            Title = "Nuts and Protein",
        };

        using (IDocumentStore documentStore = new DocumentStore() { Url = "http://rtest01:8081" })
        {
            documentStore.Initialize();
            using (IDocumentSession session = documentStore.OpenSession())
            {
                session.Store(ravenIntroArticle); // the exception happens here
                session.Store(csharpUsingArticle);
                session.Store(nutsAndProteinArticle);
                session.SaveChanges();
            }
        } 
```

![在此处输入图像描述](../Images/43ecc4be9c9a8e13800fc37fd9b5c1dc.png)

这是我尝试在本地服务器“ [http://localhost:8080](http://localhost:8080) ”上运行它时发生的情况

![在此处输入图像描述](../Images/d076a6acf8a34f634511f733f18b1235.png)

你能告诉我我错过了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:49:37.460

Code Url 中的端口 8080 与运行 RavenDb Server 的控制台中显示`"http://rtest01:8080"`的端口不匹配。`8081`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T17:10:23.503

好吧，我花了一点时间才意识到该代码出了什么问题，但现在我看到它真的很清楚，您正在尝试存储一个`AbstractIndexCreationTask<Article>`而不是 POCO 类，让我们用一个示例来展示它：

 `````
//This is the POCO entity that we will be storing into Raven
public class Article
{
    public string Id { get; set; }
    public string Text { get; set; }
    public string Title { get; set; }
}

//This is the IndexCreationTask that builds the index
public class Article_Text : AbstractIndexCreationTask<Article>
{
    public Article_Text()
    {
        Map = articles => from article in articles select new { article.Text };
    }
}

static class Program
{
    static void Main()
    {
        var ravenIntroArticle = new Article()
        {
            Text = "RavenDB fits into a movement that is called ...",
            Title = "RavenDB Introduction",
        };

        var csharpUsingArticle = new Article()
        {
            Text = "The full value of the C# using statement ...",
            Title = "Your Friend the C# Using Statement",
        };

        var nutsAndProteinArticle = new Article()
        {
            Text = "Nuts are a great source of protein ...",
            Title = "Nuts and Protein",
        };

        using ( IDocumentStore documentStore = new DocumentStore { Url = "http://rtest01:8081" }.Initialize() )
        {
            // This is the static call to create the index
            IndexCreation.CreateIndexes( typeof( Article_Text ).Assembly, documentStore );
            using ( IDocumentSession session = documentStore.OpenSession() )
            {
                session.Store( ravenIntroArticle ); // no more exceptions here!
                session.Store( csharpUsingArticle );
                session.Store( nutsAndProteinArticle );
                session.SaveChanges();
            }
        }

    }
} 
`````

# c# - 在 C# 中将现有项目与另一个项目一起使用

> ID：11585092
> 
> 赞同：2
> 
> 时间：2012-07-20T18:36:53.873
> 
> 标签：c#, visual-studio-2010, editor, mouse, hook

[如何制作一个可以在按下 Enter 键时捕获所有点击的应用程序，但在我的 WinForm 中也是如此？](https://stackoverflow.com/questions/6871023/how-to-make-an-application-that-can-capture-all-click-when-you-press-the-enter-k)

这基本上是该线程的后续问题。我正在尝试制作一个 WindowFormApp，我希望用户能够在屏幕上捕获四个点。我想要四个文本框和一个“捕获”按钮。当我单击捕获按钮时，以下单击的 x 和 y 坐标将记录在 textbox1 中，依此类推，直到所有 4 个文本框都已满。

每次按下“捕获”按钮时，我基本上都想使用此处提供的鼠标钩。

[http://www.codeproject.com/Articles/7294/Processing-Global-Mouse-and-Keyboard-Hooks-in-C](http://www.codeproject.com/Articles/7294/Processing-Global-Mouse-and-Keyboard-Hooks-in-C)

我想按照作者的建议去做。

> 简单的方法
> 
> 如果您正在开发 Windows 窗体应用程序并且更喜欢拖放编程，那么在程序集 Gma.UserActivityMonitor.dll 中有一个名为 GlobalEventProvider 的组件。只需将其拖放到您的表单并使用属性编辑器事件选项卡创建事件。

但是我找不到要链接到我的表单应用程序的 dll。我对VS编辑器不是很熟悉。有人可以帮我指出正确的方向吗？我需要帮助将我的 WindowsFormApplication1 链接到这个项目并使用这个组件。

谢谢！

# c# - Scala 中的 C# 方法组的等价物是什么？

> ID：11585093
> 
> 赞同：4
> 
> 时间：2012-07-20T18:36:54.810
> 
> 标签：c#, scala, functional-programming

在 C# 中有一个非常方便的东西叫做方法组，基本上不用写：

```
someset.Select((x,y) => DoSomething(x,y)) 
```

你可以写：

```
someset.Select(DoSomething) 
```

Scala中有类似的东西吗？

例如：

```
int DoSomething(int x, int y)
{
    return x + y;
}

int SomethingElse(int x, Func<int,int,int> f)
{
    return x + f(1,2);
}

void Main()
{
    Console.WriteLine(SomethingElse(5, DoSomething));
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-20T18:47:17.843

在 Scala 中，我们称其为函数；-)。`(x,y) => DoSomething(x,y)`是匿名函数或闭包，但您可以传递与您正在调用的方法/函数的签名匹配的任何函数，在这种情况下为`map`. 因此，例如在 scala 中，您可以简单地编写

```
List(1,2,3,4).foreach(println) 
```

或者

```
case class Foo(x: Int)
List(1,2,3,4).map(Foo) // here Foo.apply(_) will be called 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T19:49:30.170

经过一些实验，我得出结论，它在 Scala 中的工作方式与在 C# 中的工作方式相同（但不确定它是否实际上是相同的......）

这就是我想要实现的（玩玩 Play！所以 Scala 对我来说是新的，不知道为什么这在我看来不起作用，但是当我在解释器中尝试它时它工作正常）

```
def DoStuff(a: Int, b : Int) = a + b

def SomethingElse(x: Int, f (a : Int, b: Int) => Int)) = f(1,2) + x

SomethingElse(5, DoStuff)    
res1: Int = 8 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T19:25:53.560

您实际上可以使用偏函数模拟方法组的行为。但是，这可能不是推荐的方法，因为您强制在运行时发生任何类型错误，并且会产生一些成本来确定调用哪个重载。但是，此代码是否符合您的要求？

```
object MethodGroup extends App {
   //The return type of "String" was chosen here for illustration
   //purposes only. Could be any type.
   val DoSomething: Any => String = {
        case () => "Do something was called with no args"
        case (x: Int) => "Do something was called with " + x
        case (x: Int, y: Int) => "Do something was called with " + (x, y)
    }

    //Prints "Do something was called with no args"
    println(DoSomething())

    //Prints "Do something was called with 10"
    println(DoSomething(10))

    //Prints "Do something was called with (10, -7)"
    println(DoSomething(10,-7))

    val x = Set((), 13, (20, 9232))
    //Prints the following... (may be in a different order for you)
    //Do something was called with no args
    //Do something was called with 13
    //Do something was called with (20, 9232)
    x.map(DoSomething).foreach(println)
} 
```

# python - PyQt 将对象保存到文件

> ID：11585094
> 
> 赞同：0
> 
> 时间：2012-07-20T18:36:55.827
> 
> 标签：python, file, object, io, pyqt4

我想将 PyQt 对象（即：QTreeWidgetItem 或其他）保存到文件中。
我用泡菜试过了，但它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T18:44:41.290

您可以使用 Qt 提供的用于序列化的工具来序列化它们中的许多，即[QDataStream](http://qt-project.org/doc/qt-4.8/qdatastream.html)（[也在 PyQt 文档中](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qdatastream.html)）。

# java - AlertDialog show = new AlertDialog.Builder(this) 未定义

> ID：11585099
> 
> 赞同：3
> 
> 时间：2012-07-20T18:37:15.853
> 
> 标签：java, android, sms, this, android-alertdialog

该应用程序拦截短信并显示一条`Dialog`消息。

但是，我无法`Dialog`在课堂上解决我的错误`Test`。我究竟做错了什么？

（我还包括了我的其他 2 个文件）。

Eclipse 中显示的错误：`AlertDialog.Builder(Test) is undefined`

* * *

**测试.java**

```
package com.example.firstapp;

import android.app.AlertDialog;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsMessage;

public class Test extends BroadcastReceiver
{
    @Override
    public void onReceive(Context context, Intent intent) 
    {
        //---get the SMS message passed in---
        Bundle bundle = intent.getExtras();        
        SmsMessage[] msgs = null;
        String str = "";            
        if (bundle != null)
        {
            //---retrieve the SMS message received---
            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsMessage[pdus.length];            
            for (int i=0; i<msgs.length; i++){
                msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                
                str += "SMS from " + msgs[i].getOriginatingAddress();                     
                str += " :";
                str += msgs[i].getMessageBody().toString();
                str += "\n";                  
            }

            AlertDialog show = new AlertDialog.Builder(this)
            .setTitle("Message")
            .setMessage(str)
            .setNeutralButton("OK", null)
            .show();
    }                         
} 
```

}

* * *

**AndroidManifest.xml**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.firstapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="9"
        android:targetSdkVersion="15" />
    <uses-permission android:name="android.permission.SEND_SMS">
    </uses-permission>
    <uses-permission android:name="android.permission.RECEIVE_SMS">
    </uses-permission>
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".Hello"
            android:label="@string/title_activity_hello" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <receiver android:name=".test"> 
            <intent-filter> 
                <action android:name=
                    "android.provider.Telephony.SMS_RECEIVED" /> 
            </intent-filter> 
        </receiver>
    </application>

</manifest> 
```

* * *

**你好.java**

```
package com.example.firstapp;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;

public class Hello extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.activity_hello);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_hello, menu);
        return true;
    }  
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T18:41:57.253

做这个：

```
AlertDialog.Builder builder = new AlertDialog.Builder(context);
builder.setTitle("Message")
    .setMessage(str)
    .setNeutralButton("OK", null);

AlertDialog dialog = builder.create();
dialog.show(); 
```

代替：

```
AlertDialog show = new AlertDialog.Builder(this)
    .setTitle("Message")
    .setMessage(str)
    .setNeutralButton("OK", null)
    .show(); 
```

您必须先创建一个实例`AlertDialog.Builder`。然后你可以构建`Dialog`with `builder.create()`。然后你可以显示`Dialog`with `.show()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-23T19:27:11.803

我是 android 新手，但发现有时您无法在非活动的类中创建警报。然后，您应该直接获取上下文并创建警报。

```
public void showAlert(String message){
    AlertDialog.Builder builder = new AlertDialog.Builder(this.getContext());
    builder.setTitle("Here is a message message from my activity")
        .setMessage(message)
        .setNeutralButton("OK", null);
    AlertDialog dialog = builder.create();
    dialog.show();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-27T10:21:41.183

您不能在 BroadcastReceiver 上使用对话框，因此您最好从 BroadcastReceiver 调用对话框的活动，

在您的 onReceive 函数中添加此代码：

```
@Override
public void onReceive(Context context, Intent intent) 
{
    Intent i = new Intent(context, {CLASSNAME}.class); 
    i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
    context.startActivity(i);
} 
```

用对话活动填充 {CLASSNAME}，这是我的对话活动：

```
package com.example.mbanking;

import android.os.Bundle;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;

// ALERT DIALOG
// Sources : http://techblogon.com/alert-dialog-with-edittext-in-android-example-with-source-code/

public class AlertDialogActivity extends Activity 
{

@Override
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);

    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder
        .setTitle("Test")
        .setMessage("Are you sure you want to exit?")
        .setCancelable(false)
        .setPositiveButton("Yes", new DialogInterface.OnClickListener() 
        {
            public void onClick(DialogInterface dialog, int id) 
            {
                dialog.cancel();
            }
        })
        .setNegativeButton("No", new DialogInterface.OnClickListener() 
        {
            public void onClick(DialogInterface dialog, int id) 
            {
                dialog.cancel();
            }
        });
    AlertDialog alert = builder.create();
    alert.show();
}
} 
```

我在哪里得到答案？，在这里：[如何在 android 的广播接收器中使用警报对话框？](https://stackoverflow.com/questions/6172088/how-do-you-use-an-alert-dialog-box-in-a-broadcast-receiver-in-android) 感谢 Femi !!，我刚刚传播了这个消息：D，

来自印度尼西亚的问候。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-20T10:42:44.960

改为编写此代码。我测试了它。

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_login);

    Button btn=(Button)findViewById(R.id.btnLogin);
    btn.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            ShowMessage();
        }
    });
}

protected void ShowMessage(){
    AlertDialog show = new AlertDialog.Builder(this)
            .setTitle("Message")
            .setMessage("khguh")
            .setNeutralButton("OK", null)
            .show();
} 
```

# redis - Redis 根据设置值查找键

> ID：11585103
> 
> 赞同：3
> 
> 时间：2012-07-20T18:37:29.877
> 
> 标签：redis

我使用 redis 来存储某些实体的标签。数据示例：

```
+-------------+--------------------------------+
|     key     |             value              |
+-------------+--------------------------------+
| book:1:tags |     [python, ruby, rails]      |
+-------------+--------------------------------+
| book:2:tags |     [fiction, fantasy]         |
+-------------+--------------------------------+
| book:3:tags |     [fiction, adventure]       |
+-------------+--------------------------------+ 
```

如何找到带有特定标签的所有书籍，即所有带有 标记的书籍`fiction`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T18:43:50.217

您必须自己维护反向索引。除了您发布的那些键之外，您还应该创建反向引用。

```
tag:python => [1]
tag:ruby => [1]
tag:rails => [1]

tag:fiction => [2, 3]
tag:fantasy => [2]
tag:adventure => [3] 
```

然后做你想做的事是微不足道的。但也许您应该考虑使用其他工具来完成这项工作。例如，MongoDB 可以高效地索引和查询数组。

# sql-server - SQL Server SSIS：ADO.net 日期问题

> ID：11585104
> 
> 赞同：1
> 
> 时间：2012-07-20T18:37:35.343
> 
> 标签：sql-server, oracle, sql-server-2008, ssis

我创建了一个 SSIS 包，它从 Oracle 10g 服务器中提取数据并将它们推送到 SQL Server 2008 中。我在 Oracle 中有一个名为`admission_date`.

以下是我在 Oracle 中的查询。

```
select pt_id,admission_date 
from stays 
```

它工作正常。

当我尝试通过 ADO.net 通过 SSIS 包提取 SQL Server 中的数据时。我收到以下错误消息。

> 错误：STAYS 时出现 0xC02090F5，ADO NET 源 [1050]：组件“ADO NET 源”(1050) 无法处理数据。ORA-01843: 无效的月份
> 
> 错误：0xC0047038 在 STAYS，SSIS.Pipeline：SSIS 错误代码 DTS_E_PRIMEOUTPUTFAILED。组件“ADO NET Source”(1050) 上的 PrimeOutput 方法返回错误代码 0xC02090F5。当管道引擎调用 PrimeOutput() 时，组件返回了失败代码。失败代码的含义由组件定义，但错误是致命的并且管道停止执行。在此之前可能会发布错误消息，其中包含有关失败的更多信息。

对此的任何输入都会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T19:32:41.140

使用类似 TO_CHAR(addmission_date,'yyyy-mm-dd HH24:MI:SS') 的内容将您的 oracle 日期格式化为 SQL 喜欢的格式。

另请注意，Oracle 的有效日期范围比 SQL 大得多，因此根据您的 Oracle 数据，您可能具有不作为有效 SQL 日期出现的有效 oracle 日期。

请参阅[使用 SSIS 从 Oracle 复制到 Sql Server 时处理时间戳/日期时间](https://stackoverflow.com/a/2231164/236348)

[Oracle 到 SSIS 中的 SQL2005 DATETIME 字段](https://stackoverflow.com/a/11229159/236348)溢出

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T19:32:13.330

好吧，问题是 Oracle 表是视图而不是表，admission_date 是从 SQL 的解码命令中提取的。我按原样拉动，它解决了我的问题。

# certificate - 自签名证书转换为 CA 验证

> ID：11585107
> 
> 赞同：0
> 
> 时间：2012-07-20T18:37:37.910
> 
> 标签：certificate, certificate-authority

我正在为多个 SSL 连接使用自签名证书。但是，我有一个需要对证书进行 CA 身份验证的连接。

现在，如果我使用相同的自签名证书并创建证书颁发机构请求并导入我收到的内容，我现有的直接信任 SSL 连接是否需要更改？

证书 CA 验证后究竟会发生什么变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T19:03:01.537

如果有人有同样的问题。答案是 CA 使用证书签名请求来生成公钥。然后可以在服务器上将其用作 CA 验证的证书。

通常，您的应用程序/服务器应该对此进行定位/导入操作。

# c - gcc 内联 asm 语句得到优化 - 错误的约束？

> ID：11585117
> 
> 赞同：2
> 
> 时间：2012-07-20T18:38:31.313
> 
> 标签：c, gcc, constraints, inline-assembly, compiler-bug

我在使用 gcc 内联 asm 语句时遇到问题；gcc 似乎认为结果是一个常数（它不是）并优化了语句。我*认为*我正确地使用了操作数约束，但想就此事发表第二意见。如果问题不在于我对约束的使用，我会尝试为 gcc 错误报告隔离一个测试用例，但这可能很困难，因为即使周围代码中的细微变化也会导致问题消失。

有问题的内联汇编是

```
static inline void
ularith_div_2ul_ul_ul_r (unsigned long *r, unsigned long a1,
                 const unsigned long a2, const unsigned long b)
{
  ASSERT(a2 < b); /* Or there will be quotient overflow */
  __asm__(
            "# ularith_div_2ul_ul_ul_r: divq %0 %1 %2 %3\n\t"
            "divq %3"
            : "+a" (a1), "=d" (*r)
            : "1" (a2), "rm" (b)
            : "cc");
} 
```

这是一个单词除数的两个单词除数的相当普通的剩余部分。请注意，输入的高位字 a2 和余数输出 *r 通过“1”约束绑定到同一个寄存器 %rdx。

从周围的代码中，`ularith_div_2ul_ul_ul_r()`被有效地调用，就好像

```
if (s == 1)
  modpp[0].one = 0;
else
  ularith_div_2ul_ul_ul_r(&modpp[0].one, 0UL, 1UL, s); 
```

所以输入的高位字 a2 是常数 1UL。gcc -S -fverbose_asm 生成的 asm 输出如下所示：

```
(earlier:)
        xorl    %r8d, %r8d      # cstore.863
(then:)
        cmpq    $1, -208(%rbp)  #, %sfp
        movl    $1, %eax        #, tmp841
        movq    %rsi, -184(%rbp)        # prephitmp.966, MEM[(struct __modulusredcul_t *)&modpp][0].invm
        cmovne  -208(%rbp), %rcx        # prephitmp.966,, %sfp, prephitmp.966
        cmovne  %rax, %r8       # cstore.863,, tmp841, cstore.863
        movq    %r8, -176(%rbp) # cstore.863, MEM[(struct __modulusredcul_t *)&modpp][0].one 
```

效果是`ularith_div_2ul_ul_ul_r()`调用的结果被假定为常量 1；divq 永远不会出现在输出中。

各种变化使问题消失；不同的编译器标志、不同的代码上下文或标记 asm 块`__asm__ __volatile__ (...)`。然后输出正确地包含 divq 指令：

```
#APP
        # ularith_div_2ul_ul_ul_r: divq %rax %rdx %rdx -208(%rbp)       # a1, tmp590, tmp590, %sfp
        divq -208(%rbp) # %sfp
#NO_APP 
```

所以，我在这里向内联汇编人员提出问题：我对约束做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:53:36.330

该错误仅影响 Ubuntu 版本的 gcc；据我们所知，现有的 GNU gcc 不受影响。该错误已报告给 Ubuntu 启动板并确认：[错误 #1029454](https://bugs.launchpad.net/ubuntu/+source/gcc-4.6/+bug/1029454)

# jquery - jQuery Carousel Stuck (Twitter Bootstrap)

> ID：11585123
> 
> 赞同：5
> 
> 时间：2012-07-20T18:39:04.823
> 
> 标签：jquery, tabs, twitter-bootstrap, carousel

我在这里实现了 Twitter Bootstrap 的 Carousel jQuery 插件：http: [//zarin.me/circlefive/dashboard.html](http://zarin.me/circlefive/dashboard.html)（请参阅响应选项卡）

旋转木马通常可以运行，但偶尔会卡住。当您与其他选项卡交互然后使用响应选项卡时，尤其会发生这种情况。我认为这与标签有关..

有谁知道为什么轮播卡住了？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T00:44:51.887

问题与@Francesco Frassinelli 在评论中指出的内容一致，即当轮播使用 CSS3 过渡（基本上是任何浏览器，除了 IE）时，如果在过渡结束时隐藏了轮播，`$.support.transition.end`则永远不会触发事件。这将导致旋转木马在**滑动**状态下暂停并使其所有功能短路。

在[Issue #1887](https://github.com/twitter/bootstrap/issues/1887) **@fat**中提出了他的建议，以防止它首先被卡住：

> “您需要在切换显示之前/之后暂停幻灯片并继续播放。”

我还在[Issue #3351](https://github.com/twitter/bootstrap/issues/3351#issuecomment-7118931)中建议了在模态中使用轮播时的解决方法，它可以很容易地适应您的用例：

```
$('a[href="#responses-1"]').on('shown', function () {
    var $carousel = $('.carousel');

    if ($carousel.data('carousel') && $carousel.data('carousel').sliding) {
      $carousel.find('.active').trigger($.support.transition.end);
    }
}); 
```

如果它碰巧被暂停，这基本上只是在它变得可见时解锁轮播。

由于这种不良行为发生在许多不同的场景中，我在[Issue #3351](https://github.com/twitter/bootstrap/issues/3351)中提出了一个潜在的永久解决方案的可行性建议，该解决方案可以直接集成到**bootstrap-carousel.js**插件代码中。如果有人认为这是一个好主意，或者对如何实现它有其他想法，那么这个问题仍然是开放的，所以欢迎反馈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T22:08:46.403

如果您在 chrome 中检查轮播的行为，您可以在更改选项卡时轮播仍在运行。

并且由于轮播不在活动选项卡中，因此将 a`display: none;`应用于轮播的父 div。这可能是您的问题的原因。（你最终像截图一样）

我认为可以通过在显示与选项卡相关的内容之前`.carousel('pause')`单击第 3 个选项卡和`.carousel('cycle')`最后一个选项卡时触发来修复它。

![轮播卡住了](../Images/9a64b0aa2ba10ec93e4a481ede35b681.png)

# git - rails_tutorial_sublime_text 设置的 Git 集线器错误

> ID：11585127
> 
> 赞同：1
> 
> 时间：2012-07-20T18:39:16.490
> 
> 标签：git

在尝试遵循 Ruby on Rails 教程的这些说明时：

[https://github.com/mhartl/rails_tutorial_sublime_text](https://github.com/mhartl/rails_tutorial_sublime_text)

当我发出：

```
git clone git@github.com:mhartl/rails_tutorial_sublime_text.git 
```

我收到此错误：

```
Cloning into 'rails_tutorial_sublime_text'...
Permission denied (publickey).
fatal: The remote end hung up unexpectedly 
```

这是什么意思？我如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:29:27.643

这意味着您没有正确的 ssh 密钥来使用 github 的私有克隆 url 访问 mhart 的存储库。

您可能想尝试一下`git clone git://github.com/mhart/rails_tutorial_sublime_text.git`。

如果你想了解更多关于 ssh 密钥是如何工作的，以及如何使用它们来访问 github，github 帮助页面真的很棒。

*   [Github SSH 帮助文章](https://help.github.com/categories/56/articles)

# javascript - 简单的js替换并返回文本？

> ID：11585134
> 
> 赞同：-1
> 
> 时间：2012-07-20T18:39:49.563
> 
> 标签：javascript

这可能很简单，我想`_`用空（空格）替换（下划线）并返回文本。看看我的尝试.. [http://jsfiddle.net/NcG78/](http://jsfiddle.net/NcG78/)

这是小提琴的代码：

```
function formatNice(text) {
    $(function() {
        var new = text.replace('_', ' ');

        return new;
    });
}​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:41:54.403

**删除不需要的 jQuery！**

没有必要......

做就是了：

```
function formatNice(text) {
   var newt = text.replace('_', ''); //can't use `new` as a variable name.
                                     //it is a "reserved word"
   return newt;
}​ 
```

# javascript - 填充集合后 Backbone.js 调用渲染

> ID：11585137
> 
> 赞同：0
> 
> 时间：2012-07-20T18:39:51.443
> 
> 标签：javascript, backbone.js

我试图在获取集合后调用渲染。

在我的初始化方法中，我有：

```
this.collection.bind('all', this.render, this);
this.collection.fetch(); 
```

在 IE 中，它似乎有时会在集合有数据之前尝试呈现。集合似乎没有可以绑定的“更改”事件，是否有更好的方法来确保在渲染之前已获取集合？

谢谢！

编辑：

如果我刷新页面，它似乎总是可以工作，但是如果我再次单击地址栏并加载页面，它就不会工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T08:17:05.477

如果你想保证在渲染之前已经获取了数据，那么我建议使用 jQuery 的`deferred`对象：

```
this.collection.deferred = this.collection.fetch();
self = this;
this.collection.deferred.done(function() {
    self.collection.render();
  }
); 
```

基本上，您放入发送到的函数中的任何内容`done`都只会在fetch 完成*后调用。*

更多关于延期：

*   [http://lostechies.com/derickbailey/2012/02/07/rewriting-my-guaranteed-callbacks-code-with-jquery-deferred/](http://lostechies.com/derickbailey/2012/02/07/rewriting-my-guaranteed-callbacks-code-with-jquery-deferred/)
*   [http://www.erichynds.com/jquery/using-deferreds-in-jquery/](http://www.erichynds.com/jquery/using-deferreds-in-jquery/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T15:03:03.143

以下绝对应该有效，它对我有用......

而不是下面的

```
this.collection.fetch(); 
```

用这个

```
this.collection.fetch(async: false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T19:39:44.193

查看 Backbone 的[事件目录](http://documentcloud.github.com/backbone/#FAQ-events)听起来你想听[重置](http://documentcloud.github.com/backbone/#Collection-reset)事件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T19:43:27.903

以下应该有效：

```
this.collection.on('reset', this.render);
this.collection.fetch(); 
```

通常在 Backbone.js 中，人们会使用 on() 将回调绑定到对象。

# android - Flex/Flash builder - 应用程序可在模拟器或 iOS 中运行，但不适用于 android - HTTPService

> ID：11585138
> 
> 赞同：0
> 
> 时间：2012-07-20T18:39:52.590
> 
> 标签：android, xml, actionscript-3, apache-flex, flash-builder

好的，我有一个我在 Flash builder 中编写的应用程序，它向服务器发出几个 HTTPService 请求以收集有关用户的一些数据。在一个视图中，它从服务器下载一个字符串，然后使用分隔符“:”拆分字符串，然后将组件添加到数组以填充 Spinnerlist。在模拟器中，如果我为 iOS 打包应用程序并将其安装在我的 iPhone 上，这很好用——它很好用。但是当我尝试在我的 Android 设备上运行它时，它不起作用。它就像它正在工作一样，它加载了带有 SpinnerList 的视图，但列表是空的。我似乎无法弄清楚。

我尝试过的一些事情：我已经启用了对 android 设备的互联网访问的 XML 设置，事实上，在应用程序的早期，当用户登录手机时，会进行非常相似的服务器调用，在所有设备上都可以正常工作。

这个问题让我完全傻眼了，不胜感激！这是发出请求并分离数据的代码。

HttpService 请求：

```
<mx:HTTPService id="CommonHTTP" url="http://dispatch.americantaxi.com:8080/AT/servlet/OnlineOrderServices?command=retrieveCustomerCommonPlaces&amp;customerId={data.ID}" resultFormat="text"/> 
```

排序代码：

```
protected function button5_clickHandler(event:MouseEvent):void
        {

            PickUpType = "Common";
            data.PickUpType = PickUpType;

            var CommonDataString:String = new String(CommonHTTP.lastResult);
            trace("String " + CommonDataString)
            var Arr1:Array = [];
            Arr1 = CommonDataString.split("|");
            trace("arr1 length " + Arr1.length);
            var ArrCount:Number = new Number(Arr1.length);
            var Arr2:Array = [];
            for (var i:Number = 0; i < (ArrCount - 1); i++) {
                var currentSelect:String = new String(Arr1[i]);

                Arr2 = currentSelect.split(":");
                var currentName:String = new String(Arr2[1]);
                trace("Add: " + currentName);

                CommonPlacesArray.addItem(currentName);
            }

            data.CommonPlacesArray = CommonPlacesArray;
            navigator.pushView(CommonPlaces, data);

        } 
```

# algorithm - 最大距离意义上的最佳子样本

> ID：11585146
> 
> 赞同：3
> 
> 时间：2012-07-20T18:40:49.697
> 
> 标签：algorithm, distance, mathematical-optimization

我在 D 维度量空间中有一组 N 个点。我想以这样的方式选择其中的 K 个，即子集中任意两点之间的最小距离最大。

例如，在 3D 欧几里得空间中 N=4 和 K=3，解是具有最长短边的四面体面。

有没有经典的方法来实现这一目标？它可以在多项式时间内精确求解吗？

我已经尽可能多地搜索了，但我还没有弄清楚如何调用这个问题。

在我的情况下，通常 N=50、K=10 和 D=300。

澄清：

蛮力方法是尝试 N 中 K 点的每种组合，并确定每个子集中最接近的对。解决方案由产生最长对的子集给出。

完成了简单的方法，一个 O(K^2) 过程，要重复 N！/K!(NK)! 次。

哼，10^2 50！/ 10！40！= 1027227817000

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T11:06:27.570

我认为您可能会发现有关单位磁盘图的论文内容丰富但令人沮丧。例如，[http://citeseerx.ist.psu.edu/viewdoc/download?doi](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.84.3113&rep=rep1&type=pdf) =10.1.1.84.3113&rep=rep1&type=pdf指出在 NP-complete 中单位圆盘图上的最大独立集问题，即使圆盘表示是已知的。单位圆盘图是通过在平面上放置点并在每对点之间形成最多相距单位距离的链接而得到的图。

所以我认为，如果你能在多项式时间内解决你的问题，你可以在单位磁盘图上针对不同的 K 值运行它，直到找到一个值，在该值处，两个选定点之间的最小距离刚刚超过 1，我认为这将是单位圆盘图上的最大独立集，这将在多项式时间内解决 NP 完全问题。

（正要骑自行车，所以这有点匆忙，但在单位磁盘图上搜索论文至少可能会找到一些有用的搜索词）

这是一个尝试逐个解释它的尝试：

这是将这两个问题联系起来的另一种尝试。

有关最大独立集，请参见[http://en.wikipedia.org/wiki/Maximum_independent_set#Finding_maximum_independent_sets](http://en.wikipedia.org/wiki/Maximum_independent_set#Finding_maximum_independent_sets)。一个决策问题版本是“这个图中是否有 K 个顶点，使得没有两个顶点被一条边连接？” 如果你能解决这个问题，你当然可以通过针对不同的 K 询问这个问题来找到最大的 K 来找到最大的独立集，然后通过在删除了一个或多个节点的图形版本上询问问题来找到 K 个节点。

我在没有证据的情况下声明在单位磁盘图中找到最大独立集是 NP 完全的。另一个参考是[http://web.sau.edu/lilliskevinm/wirelessbib/ClarkColbournJohnson.pdf](http://web.sau.edu/lilliskevinm/wirelessbib/ClarkColbournJohnson.pdf)。

您的问题的决策版本是“是否存在 K 点，任意两点之间的距离至少为 D？” 同样，如果您可以在多项式时间内解决原始问题，则可以在多项式时间内解决此问题-一直玩直到找到给出答案的最大 D 是，然后删除点并看看会发生什么。

当两点之间的距离小于等于 1 时，单位圆盘图恰好有一条边。因此，如果您可以解决原始问题的决策版本，则只需设置 D = 1 并解决您的问题，您就可以解决单位圆盘图问题的决策版本。

所以我想我已经构建了一系列链接，表明如果你可以解决你的问题，你可以通过将它变成你的问题来解决一个 NP 完全问题，这让我认为你的问题很难。

# c# - 如何组织单元测试而不使重构成为一场噩梦？

> ID：11585150
> 
> 赞同：12
> 
> 时间：2012-07-20T18:41:10.843
> 
> 标签：c#, unit-testing, tdd, nunit, code-organization

我目前组织单元测试的方式归结为以下几点：

*   每个项目都有自己的带有单元测试的专用项目。对于一个项目`BusinessLayer`，有一个`BusinessLayer.UnitTests`测试项目。
*   对于我要测试的每个类，测试项目中都有一个单独的测试类，它们位于与被测类完全相同的文件夹结构和完全相同的命名空间中。对于命名空间中的类`CustomerRepository`，命名空间中`BusinessLayer.Repositories`有一个测试类。`CustomerRepositoryTests``BusinessLayerUnitTests.Repositories`

每个测试类中的方法都遵循简单的命名约定`MethodName_Condition_ExpectedOutcome`。因此，包含对定义了方法的类的`CustomerRepositoryTests`测试的类如下所示：`CustomerRepository``Get`

```
[TestFixture]
public class CustomerRepositoryTests
{
    [Test]
    public void Get_WhenX_ThenRecordIsReturned()
    {
        // ...
    }

    [Test]
    public void Get_WhenY_ThenExceptionIsThrown()
    {
        // ...
    }
} 
```

这种方法对我很有帮助，因为它使定位某些代码的测试变得非常简单。在相反的站点上，它使代码重构变得比它应该的更加困难：

*   当我决定将一个项目拆分为多个较小的项目时，我还需要拆分我的测试项目。
*   当我想更改一个类的命名空间时，我必须记住也要更改一个测试类的命名空间（和文件夹结构）。
*   当我更改方法的名称时，我必须通过所有测试并在那里更改名称。当然，我可以使用搜索和替换，但这不是很可靠。最后，我仍然需要手动检查更改。

是否有一些巧妙的方法来组织单元测试，仍然可以让我快速定位特定代码的测试，*同时*更适合重构？

或者，是否有一些，呃，也许是 Visual Studio 扩展，可以让我以某种方式说“嘿，*这些*测试是针对*那个*方法的，所以当方法的名称发生变化时，请善待并改变测试” ? 老实说，我正在认真考虑自己写这样的东西:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T01:59:40.743

经过大量测试后，我开始意识到（至少对我而言）拥有所有这些限制从长远来看会带来很多问题，而不是好事。因此，我们不再使用“名称”和约定来确定这一点，而是开始使用代码。每个项目和每个类都可以有任意数量的测试项目和测试类。所有测试代码都是根据从功能角度测试的内容（或者它实现的要求，或者它重现的错误等）来组织的。然后为了找到一段代码的测试，我们这样做：

```
[TestFixture]
public class MyFunctionalityTests
{
    public IEnumerable<Type> TestedClasses()
    {
        // We can find the tests for a class, because the test cases references in some special method.
        return new []{typeof(SomeTestedType), typeof(OtherTestedType)};
    }

    [Test]
    public void TestRequirement23423432()
    {
        // ... test code.
        this.TestingMethod(someObject.methodBeingTested); //We do something similar for methods if we want to track which methods are being tested (we usually don't)
        // ... 
    }
} 
```

我们可以使用诸如 resharper “用法”之类的工具来查找测试用例等……当这还不够时，我们通过反射和 LINQ 通过加载所有测试类来做一些魔术，并运行类似的东西`allTestClasses.where(testClass => testClass.TestedClasses().FindSomeTestClasses());` 你也可以使用 TearDown收集有关每个方法/类测试哪些方法的信息并执行相同的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T19:05:39.757

移动代码时保持类和测试位置同步的一种方法：

*   将代码移动到唯一命名的临时命名空间
*   在测试中搜索对该命名空间的引用以确定需要移动的测试
*   将测试移动到正确的新位置
*   一旦测试中对临时命名空间的所有引用都在正确的位置，然后将原始代码移动到其预期目标

端到端或行为测试的优势之一是测试是按需求而非代码分组的，因此您可以避免使测试位置与相应代码保持同步的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-22T02:16:43.483

关于将代码与测试相关联的 VS 扩展，请查看 Visual Studio 的测试影响。它在分析器下运行测试并创建一个紧凑的数据库，将 IL 序列点映射到单元测试。换句话说，当您更改代码时，Visual Studio 知道需要运行哪些测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T18:53:58.120

每个项目一个单元测试项目是要走的路。我们已经尝试过一个大型单元测试项目，但这增加了编译时间。

为了帮助您重构，请使用[resharper](http://www.jetbrains.com/resharper/)或[code rush](http://www.devexpress.com/Products/Visual_Studio_Add-in/Coding_Assistance/)之类的产品。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T18:57:25.397

> 是否有一些巧妙的方法来组织单元测试，仍然可以让我快速找到特定代码的测试

Resharper 有一些不错的捷径，可让您搜索文件或代码

正如您对 CustomerRepository 类所说的，它们是一个测试 CustomerRepositoryTests

R# 快捷方式显示输入框，以显示您在这种情况下找到的内容，您只需输入 CRT，它将显示所有以名称开头的文件，首先是大写 C，然后是 R，然后是 T

它还允许您通过通配符进行搜索，例如 CR* 将显示文件 CustomerRepository 和 CustomerRepositoryTests 的列表

# javascript - Firebase 字段延迟更新

> ID：11585151
> 
> 赞同：0
> 
> 时间：2012-07-20T18:41:20.430
> 
> 标签：javascript, firebase

我有一个带有`users`参考的 Firebase，它有一个字段`user_id`。( `[Firebase]/[app]/users/user_id`)

我插入一个用户并分配一个 user_id。但是，当我从 userRef （对 的引用`users`）读取 user_id 的值时，它并没有**第一次**读取它。随后的读取工作非常好。

使用调试器，我可以看到在创建用户时，`user_id`分配了 a。似乎我的第一次调用刷新了 Firebase 参考，因此后续调用现在可以看到更新后的 Firebase（我不认为它是这样的——这就是它的显示方式）。

这是我读取值的代码`user_id`：

```
var userID = 0;
userRef.on('value', function(snapshot) {
    userID = snapshot.val().user_id;
});
alert(userID); 
```

第一次，警报显示`0`。之后每次都显示正确的值。

为了使问题变得更加奇怪，我还`games`引用了 a `game_id`，以与 . 相同的方式创建`user`。但是我的阅读`game_id`（以完全相同的方式和同时）每次都有效。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T19:11:17.337

这里的问题是 .on() 不会（通常）立即触发您的回调函数。特别是，当您第一次在某个位置执行 .on() 时，Firebase 必须向服务器询问当前值，等待响应，*然后*调用您的回调。它以异步方式完成这一切。

当前编写代码的方式，“alert(userID);” 在您的回调代码（“userID = snapshot.val().user_id;”）之前运行，所以它总是第一次报告 0。简单的解决方法是将 alert() 移动到回调中：

```
var userID = 0;
userRef.on('value', function(snapshot) {
    userID = snapshot.val().user_id;
    alert(userID);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T14:35:18.250

这是等待两个回调的常用方法，使用[jQuery 的 Promise 模型](http://api.jquery.com/category/deferred-object/)和[once](http://www.firebase.com/docs/firebase/once.html)：

```
var userID = 0;

// sends a callback to fx where the results can be stored
function defer( fx ) {
   return function() {
      var deferred = $.Deferred();
      fx( function(snapshot) { deferred.resolve(snapshot.val(); } );
      return deferred.promise();
   }
}

$.when( // wait for both actions to complete
   defer( function(callback) { userRef.once('value', callback)   }),
   defer( function(callback) { widgetRef.once('value', callback) })
).then( function(values) {   
   // both deferreds are done now
   // and values contains an array with the snapshot.val() from each call
   console.log(values);
}); 
```

# php - 是否有一个函数可以根据另一个数组重新排列数组的键和值？

> ID：11585153
> 
> 赞同：1
> 
> 时间：2012-07-20T18:41:32.940
> 
> 标签：php, arrays

假设我有 2 个数组。

```
array1:
value = 2
value = 1
value = 3

array2:
value = 1
value = 2
value = 3
value = 4 
```

我想重新排列 array1 以使 array2 具有相同的排序并删除在 array2 中找不到的值。我想按照array2的排序我不知道是否有一个现有的函数如果有请告诉我。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T18:45:33.430

```
$array1 = array(2,1,3);
$array2 = array(1,2,3,4);
$array_intersect = array_intersect($a2, $a1); 
```

`$array_intersect`然后将有：

```
Array
(
    [0] => 1
    [1] => 2
    [2] => 3
) 
```

# java - Apex 可调度类：SendEmail 失败 INVALID_SA VE_AS_ACTI VITY_FLAG saveAsActivity 必须为 false

> ID：11585156
> 
> 赞同：0
> 
> 时间：2012-07-20T18:41:37.653
> 
> 标签：java, salesforce, scheduled-tasks, apex-code, job-scheduling

我是 apex 的新手，正在尝试构建一个每天运行的 apex 时间表课程。如果佣金的帐户审核日期是两周（14 天）之后，调度员将向我们的销售部门发送一封电子邮件。

我有一个实现可调度接口的类。我目前正在测试以确保我的代码有效。我创建了一个测试方法，但我不确定它是否有效。我收到此错误电子邮件：

沙盒

引起：System.EmailException：SendEmail 失败。第 0 行的第一个异常；第一个错误：INVALID_SAVE_AS_ACTIVITY_FLAG，向用户发送邮件时 saveAsActivity 必须为 false。：[]

Class.AccountReviewSchedulerOtherObjectIDETest.sen​dEmail：第 15 行，第 1 列

Class.AccountReviewSchedulerOtherObjectIDETest.exe​cute：第 5 行，第 1 列

如果没有测试方法，我的调度程序没有任何响应（不是错误电子邮件或我尝试发送的电子邮件。

这是我的 Apex 预定课程（带测试方法）

```
global class AccountReviewSchedulerOtherObjectIDETest implements Schedulable{ 
global void execute (SchedulableContext ctx) 
{ 

sendEmail(); 

}
public void sendEmail()
{

Messaging.SingleEmailMessage mail = new Messaging.SingleEmailMessage(); 
mail.setTemplateId('00XF0000000LfE0'); 
mail.setTargetObjectId('005J0000000JWYx'); 
Messaging.sendEmail(new Messaging.SingleEmailMessage[] {mail }); 
}

public static testMethod void testschedule() {

Test.StartTest();
AccountReviewSchedulerOtherObjectID sh1 = new AccountReviewSchedulerOtherObjectID();

Test.stopTest();

}
} 
```

这个错误是什么意思？我的测试课写错了吗？我的电子邮件方法有问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T19:48:11.217

`mail.setSaveAsActivity(false);`在调用 Messaging.sendEmail() 之前添加。

# android - Activiy被销毁并重新创建后访问启动服务

> ID：11585158
> 
> 赞同：0
> 
> 时间：2012-07-20T18:41:46.047
> 
> 标签：android

我已经从一个活动中创建了一个 Started Service。我很好奇：如果活动被破坏会发生什么？服务还运行吗？（我认为它运行！）

那么当重新创建活动时，有没有办法与该服务进行通信？我只需要知道服务是否还在运行，如果正在运行，那么我想将活动的引用传递给服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T22:13:06.373

好吧，评论不够大。这是我用来启动服务的一些代码。在启动服务之后是我用来确定服务是否正在运行的函数。DownloadDatabase 类扩展了 IntentService。该服务会下载一个 70 兆字节的 SQLite 数据库，该数据库是在 Android 外部创建的。

```
 Intent intentService = new Intent(this, DownloadDatabase.class);
 startService(intentService); 
```

以下函数检查服务是否已在运行。它被编码为一个函数，因为如果没有运行，我会从其他执行其他验证的例程中调用它。

```
private boolean isMyServiceRunning() {
    ActivityManager manager = (ActivityManager) getSystemService(ACTIVITY_SERVICE);
    for (RunningServiceInfo service : manager
            .getRunningServices(Integer.MAX_VALUE)) {
        if ("com.hodsonssoftwarellc.nutritionexplorer.DownloadDatabase"
                .equals(service.service.getClassName())) {
            return true;
        }
    }
    return false;
} 
```

您还需要在清单中获得以下权限：

```
 uses-permission android:name="android.permission.GET_TASKS" 
```

isMyServiceRunning 函数中发生的情况如下：

1.  获取活动管理器。
2.  检索当前正在运行的任务列表并将其用作特殊情况 for 循环中的参数。
3.  从列表中检索每个任务时，将任务名称与下载服务的完全限定类名称进行比较。
4.  如果找到匹配项，则该函数返回 true。否则返回false。

因此，在回答您的问题时，是的，您可以检查它是否从启动它的任务中运行。即使您退出任务并重新启动它。您还可以检查是否从不同的活动或应用程序运行。

注意：此代码是为 2.x 兼容性而编写的。如果您正在下载版本 3 或更高版本，请使用下载管理器而不是编写自己的下载服务。

# objective-c - UITextView 不会 resignFirstResponder 所以另一个可以成为FirstResponder

> ID：11585160
> 
> 赞同：0
> 
> 时间：2012-07-20T18:41:48.210
> 
> 标签：objective-c, ios, ios5, uitextfield, becomefirstresponder

我的 UITextfields 的 inputAccessoryView 中有一个工具栏。如果点击“下一个”按钮，它会使我所有文本字段的有序集中的下一个文本字段成为第一响应者。效果很好。

但我无法让“以前的”文本字段成为FirstResponder。

我已经在控制台中进行了检查，并且文本字段确实调用了 textFieldShouldBeginEditing 并且我返回 YES，但它从不调用 textFieldDidBeginEditing，并且应该 resignFirstResponder 的文本字段从不调用 textFieldShouldEndEditing。

因此，文本字段正在获取成为成为FirstResponder 的消息，但没有。

```
- (IBAction)keyboardBarButtonDidTouch:(UIBarButtonItem *)sender
{
    if (sender==self.previousBarButton&&self.activeTextFieldArrayIndex.intValue>0)
    {
        [(UITextField *)[self.textfields objectAtIndex:(self.activeTextFieldArrayIndex.intValue-1)] becomeFirstResponder];
    }
    if (sender==self.nextBarButton&&self.activeTextFieldArrayIndex.intValue<(self.textfields.count-1))
    {
        [(UITextField *)[self.textfields objectAtIndex:(self.activeTextFieldArrayIndex.intValue+1)] becomeFirstResponder];
    }
    if (sender==self.doneBarButton)
    {
        [self.activeTextField resignFirstResponder];
    }
} 
```

最奇怪的是，如果我通过某些操作强制文本字段 resignFirstResponder，那么“以前的”文本字段会突然变成 FirstResponder。就像它被添加到响应者列表中一样，轮到它了……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T02:40:46.573

就像发生奇怪事情时经常发生的情况一样，这与成为第一响应者无关。我不小心通过文本字段委托在一堆逻辑中间将我的 activeTextfield 指针更改为 nil。^o^

漠视！

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-20T18:59:07.643

1）尝试使您的代码不易出错。

而不是这个

```
if(sender==self.previousBarButton&&self.activeTextFieldArrayIndex.intValue>0) 
```

做这个

```
if ((sender==self.previousBarButton) && (self.activeTextFieldArrayIndex.intValue>0)) 
```

2) 使用 textfield.tag 属性并为这些文本字段设置唯一标签。并通过使用来做关于成为/辞职第一响应者的事情

```
(uitextfield *)field[self viewWithTag: uniqueTag]; 
```

# ruby-on-rails-3.2 - 尝试运行 rake 任务时出现 Crontab 错误 - 每当 gem 时使用

> ID：11585162
> 
> 赞同：-1
> 
> 时间：2012-07-20T18:41:54.890
> 
> 标签：ruby-on-rails-3.2, crontab, rake-task, whenever

我创建了一个简单的 rake 任务。我正在尝试使用[https://github.com/javan/whenever/](https://github.com/javan/whenever/) gem 每天运行一次此任务。但是，没有任务被解雇。

在我的 /var/mail/* 文件中，

```
From: root@Gupta (Cron Daemon)
To: shubham@Gupta
Subject: Cron <shubham@Gupta> /bin/bash -l -c 'cd /home/shubham/Desktop/rails_apps/crispics && RAILS_ENV=development bundle exec rake update_time_elapsed --silent'
Content-Type: text/plain; charset=ANSI_X3.4-1968
X-Cron-Env: <SHELL=/bin/sh>
X-Cron-Env: <HOME=/home/shubham>
X-Cron-Env: <PATH=/usr/bin:/bin>
X-Cron-Env: <LOGNAME=shubham>
Message-Id: <20120720180401.E2D7AD4092D@Gupta>
Date: Fri, 20 Jul 2012 23:34:01 +0530 (IST)

tput: No value for $TERM and no -T specified
tput: No value for $TERM and no -T specified
ERROR: Gem bundler is not installed, run `gem install bundler` first. 
```

我的系统中安装了捆绑程序，如果我从 crontab 向命令提示符键入命令，任务就会被触发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T21:10:31.463

在您的项目应用程序中运行它

```
bundle update 
```

# android - Android API 是用 C 还是 Java 实现的？

> ID：11585164
> 
> 赞同：1
> 
> 时间：2012-07-20T18:42:01.483
> 
> 标签：android, api

我想为我的应用程序将 JellyBean 4.1 API 反向移植到 4.0。如果源代码不在 Java 中，那就更难了。

我在哪里可以查到？

具体来说，我想反向移植这个 api [Accessibility Service](http://developer.android.com/about/versions/android-4.1.html#A11y)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T21:24:15.987

`AccessibilityService`的实现不是框架类（例如，`Activity`），而是核心操作系统的一部分。您不能像 ActionBarSherlock 向后移植操作栏那样为应用程序向后移植它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T18:47:05.300

为什么不只看 Jelly Bean 源代码？[http://source.android.com/source/index.html](http://source.android.com/source/index.html)

# android - Android layout_weight 不工作

> ID：11585166
> 
> 赞同：5
> 
> 时间：2012-07-20T18:42:03.433
> 
> 标签：android, android-layout

我正在处理一个带有 5 个按钮的片段。当它在像平板电脑这样的大屏幕上时，我使用一个将所有 5 个按钮放在顶部的片段。我将它们的所有 layout_width 设置为 1，但按钮不会像预期的那样均匀分布在屏幕上。

预计[全部][我的][按钮][转到][这里]

我得到了什么 b1 b2 b3 b4 b5 b3 和 b5 只是一个按钮......只是显示它会破坏一个单词 [all][my][but ][go][her] 并将其放下一行。[吨] [e]

我一直在玩它并尝试不同的东西，但我无法改变它。任何帮助表示赞赏。谢谢你。

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/xlarge_layout"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal">

<Button
    android:id="@+id/tip_btn"
    android:layout_width="0px"
    android:layout_height="wrap_content"
    android:layout_weight="2"
    android:text="@string/tip_button"
    android:onClick="tipButton">
</Button>

<Button
    android:id="@+id/preference"
    android:layout_width="0px"
    android:layout_height="wrap_content"
    android:layout_weight="2"
    android:text="@string/settings"
    android:onClick="showPreferences">
</Button>

<Button
    android:id="@+id/rate_btn"
    android:layout_width="0px"
    android:layout_height="wrap_content"
    android:layout_weight="2"
    android:text="@string/rate_button"
    android:onClick="rateButton">
</Button>

<Button
    android:id="@+id/feedback_btn"
    android:layout_width="0px"
    android:layout_height="wrap_content"
    android:layout_weight="2"
    android:text="@string/feedback_button"
    android:onClick="feedbackButton">
</Button>

<Button
    android:id="@+id/cancel_btn"
    android:layout_width="0px"
    android:layout_height="wrap_content"
    android:layout_weight="2"
    android:text="@string/exit_button"
    android:onClick="cancelButton">
</Button>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-20T18:47:55.563

简短的回答：将按钮的 layout_width 设置为 0。 layout_weight 用于确定如何在布局中的元素之间分布剩余空间。因此，如果不将宽度设置为零，按钮内容的大小会影响它们的大小。

这里有两篇很好的博客文章解释了权重是如何工作的：

[http://blog.stylingandroid.com/archives/297](http://blog.stylingandroid.com/archives/297) http://blog.stylingandroid.com/archives/312

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-06-27T15:36:11.000

由于您使用的是 layout_weight，因此您应该为 layout_width 提供 0dp。它应该工作。

# python - 用python启动一个独立的进程

> ID：11585168
> 
> 赞同：14
> 
> 时间：2012-07-20T18:42:12.753
> 
> 标签：python, windows, process, subprocess, daemon

这确实是一个非常简单的问题，但我似乎找不到任何解决方案。

我有一个 python 脚本，我想启动一个独立的守护进程。我想调用 ym python 脚本，启动这个系统托盘守护进程，对数据库文件执行一些 python 魔术并退出，让系统托盘守护进程运行。

我试过`os.system`, `subprocess.call`, `subprocess.Popen`, `os.execl`，但它总是让我的脚本保持活动状态，直到我关闭系统托盘守护程序。

这听起来应该是一个简单的解决方案，但我什么都做不了。

编辑：Windows 解决方案：`os.startfile()` [http ://docs.python.org/library/os.html?highlight=startfile#os.startfile](http://docs.python.org/library/os.html?highlight=startfile#os.startfile)

有时放弃和询问意味着你正处于答案的风口浪尖。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-02-28T03:39:03.920

您可以使用几个漂亮的`Popen`参数在 Windows 上完成一个真正分离的过程（感谢 greenhat 在[这里的回答](https://stackoverflow.com/a/13593715/461834)）：

```
import subprocess

DETACHED_PROCESS = 0x00000008
results = subprocess.Popen(['notepad.exe'],
                           close_fds=True, creationflags=DETACHED_PROCESS)
print(results.pid) 
```

另请参阅[此答案](https://stackoverflow.com/a/13256908/461834)以获得漂亮的跨平台版本（确保添加`close_fds`，因为它对 Windows 至关重要）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-24T12:54:03.073

适用于 Windows 的解决方案：`os.startfile()`

就像您双击可执行文件并使其独立启动一样工作。一个非常方便的衬里。

[http://docs.python.org/library/os.html?highlight=startfile#os.startfile](http://docs.python.org/library/os.html?highlight=startfile#os.startfile)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T19:06:55.140

我建议使用双叉方法。

例子：

```
import os
import sys
import time

def main():
    fh = open('log', 'a')
    while True:
        fh.write('Still alive!')
        fh.flush()
        time.sleep(1)

def _fork():
    try: 
        pid = os.fork() 
        if pid > 0:
            sys.exit(0) 
    except OSError, e: 
        print >>sys.stderr, 'Unable to fork: %d (%s)' % (e.errno, e.strerror) 
        sys.exit(1)

def fork():
    _fork()

    # remove references from the main process
    os.chdir('/')
    os.setsid()
    os.umask(0)

    _fork()

if __name__ == '__main__':
    fork()
    main() 
```

# java-me - 在 J2ME 中生成唯一 ID

> ID：11585177
> 
> 赞同：2
> 
> 时间：2012-07-20T18:42:26.473
> 
> 标签：java-me, registration, uuid, mac-address, imei

我想为我的 j2me 应用程序的注册过程生成普遍唯一的 id。我遇到了以下方法

1.  设备的 IMEI 编号[在 Java ME 中获取 IMEI 和 IMSI](http://goo.gl/lQVT5)这种方法不适用于大多数设备。对于大多数型号来说，从 Midlet 获取 IMEI 的问题并不容易。

2.  蓝牙设备地址[获取蓝牙地址](http://goo.gl/8VgOZ) 问题 需要蓝牙 API 支持，并且会限制应用程序可以在其上运行的设备数量。

3.  UUID 类问题需要蓝牙 API，因为它在 javax.bluetooth 包中相同的概率

我公司为他们的android应用程序使用的注册过程如下

1.  客户手机将使用 SMS 将公司提供的 IMEI 号码和 Token 发送到服务器
2.  服务器将向客户手机发送许可证密钥，该密钥将存储在客户手机中

我必须对 j2me 应用程序遵循相同的方法

一种解决方案是通过 SMS 从服务器获取唯一 ID。但公司使用上述注册程序。

是否有任何其他方法可以用于注册我的应用程序，或者有什么方法可以克服上述问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T19:43:16.173

我同意@funkybro 的观点，即服务器提供的具有唯一 ID 的 Jad 密钥可以解决该问题。但如果不可能，我会根据移动时间和哈希码创建一个 ID。

```
long time = System.currentTimeMillis();
StringBuffer id = new StringBuffer(Long.toString(time, 16).toUpperCase());
id.append(Integer.toHexString(new Object().hashCode()).toUpperCase()); 
```

如果此 ID 重复，则注册过程将失败，并要求应用程序提供新 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T19:09:42.330

您可以在部署时将服务器生成的唯一 ID 放在 jad 中。

# assembly - ARM 和 Intel 汇编指令映射

> ID：11585178
> 
> 赞同：5
> 
> 时间：2012-07-20T18:42:38.110
> 
> 标签：assembly, arm, intel

这可能是一个愚蠢的问题，但是是否有网页/文档/书籍可以为您提供英特尔 x86 和 ARM 汇编指令的映射？

我知道这不是一对一的映射，但我会假设许多指令确实可以无缝地映射（例如 MOV）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:43:28.600

指令集架构具有并使用类似的声音和功能指令，例如添加、异或、加载、存储和移动。

无论两个指令集是什么，您都可以在同一个地方找到您要查找的映射。获取一个指令集的文档，获取另一个指令集的文档，然后查找说明。x86 喜欢重载 mov 指令以进行加载和存储以及移动立即数和寄存器以注册移动，对于 arm，您使用加载和存储进行加载和存储和移动以进行寄存器到寄存器和立即到寄存器。

intel 是 cisc，arm 是 risc，所以不会有一对一的映射。很少有指令会无缝映射，添加 rd=rd+rn 和其他寄存器来注册 alu 函数（对于全尺寸寄存器而不是小数 x86 寄存器）。

由于不是无缝的，也不是一对一的地图，因此有多种有效的解决方案可以从一张地图转到另​​一张地图，因此找到一张地图没有意义。

您正在寻找的是静态二进制翻译或动态二进制翻译，如果您从未做过静态翻译，则更容易。并且不要从一个机器代码转换为另一个程序集或机器代码。从机器代码转换为 C，然后让编译器将其编译为目标，同时优化并让您选择使用不同的目标。另一种选择是指令集模拟器。

如果您只想手动重写一些代码，请使用两个指令集手册源和目标。即使有地图，您仍然需要对两个指令集有很好的了解才能使用该地图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T20:12:01.637

为什么？您是否正在尝试将代码从一个移植到另一个？你知道一个并且想要一个“备忘单”来学习另一个吗？我能想到的最好的是[ARM/Thumb 快速参考卡](http://infocenter.arm.com/help/topic/com.arm.doc.qrc0001l/QRC0001_UAL.pdf)（x86 可能有*很多*）。

我似乎找不到一个，这也许是映射远非“无缝”的主要原因。ARM 指令通常是 3-op ( `abc dst,src1,src2`)，更糟糕的是，`src2`可以对其应用移位/循环。x86 指令通常是 2-op，除了你有一些奇怪的东西，比如`lea`通常用作 3-op add。

我能想到的最接近的东西是组合的 ARM/x86 备忘单，将常用指令分为几类（算术、位操作、控制流、浮点、内存访问）。

然后是拇指...

# html - 溢出和滚动

> ID：11585182
> 
> 赞同：1
> 
> 时间：2012-07-20T18:42:44.553
> 
> 标签：html, css

这是我的小提琴：http: [//jsfiddle.net/sruHf/1/](http://jsfiddle.net/sruHf/1/)

我希望图像彼此相邻，并且仅水平滚动。目前，图像彼此相邻......但它会折叠到另一条线......而不是继续彼此相邻。

知道我该怎么做吗？我尝试使用`overflow-x : auto`and `overflow-y : hidden`，但它似乎不起作用。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T18:44:09.100

添加`white-space: nowrap`到 CSS。

# ssl - IIS 6.0 的 SSL 证书中没有私钥

> ID：11585183
> 
> 赞同：0
> 
> 时间：2012-07-20T18:42:52.037
> 
> 标签：ssl, iis-6, openssl, certificate, ssl-certificate

我们在工作中使用 IIS 6.0 (Win2003 SP2)，需要更新我们的 SSL 证书。我使用 openssl 创建了一个证书请求。因此，我首先使用 openssl 创建了一个 2048 位密钥。我没有使用那个 certreq.txt 请求文件，因为它在我们使用的 CA 的网站上产生了格式错误。同时该请求已被接受，我从我们组织的 CA 获得了一个 .pem 文件。到目前为止，一切都很好。我什至能够导入证书。但不幸的是，私钥现在丢失了。我认为，Windows（或 IIS）只是不知道在哪里寻找它。私钥当然存在于我用于创建请求的 *.key 文件中。

但是如何将密钥集成到证书中或使用它来制作 Windows/IIS？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T18:57:02.113

您应该能够使用 OpenSSL 构建 PKCS#12 文件，方法是：

```
openssl pkcs12 -export -in cert.pem -inkey file.key -out cert.p12 
```

然后，使用该`.p12`文件同时导入证书及其私钥。

有关 openssl 的更多信息[https://www.openssl.org/docs/apps/pkcs12.html](https://www.openssl.org/docs/apps/pkcs12.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-15T13:42:54.220

由于您正在运行的 Windows Server 可以利用 DigiCert 的免费实用程序 ( [http://www.digicert.com/util](http://www.digicert.com/util) )。

如果您计划将 CSR 导入回 OpenSSL 并使用 Apache，则可以从 OpenSSL 创建 CSR。

否则，您将从 IIS 或运行 DigiCert 实用程序并单击“创建 CSR”选项发出 CSR 请求。一旦您有了新的 CSR，请将其提交给您的 CA，以便让他们颁发一个新证书，该证书将与 IIS 中的正确私钥相匹配。

收到新的证书文件后，使用实用程序上的“导入”功能将证书文件加载到本地 MMC 上。

最后一步是将 SSL 证书绑定到 IIS 控制台中站点的端口 443 连接。

如果您碰巧需要私钥，您可以使用“导出”功能创建一个包含您的域证书和私钥的 .key 文件或 PFX 文件。

某些防火墙设备需要 PFX 上的 PKCS#12 文件。如果是这样，请将文件扩展名从 .pfx 重命名为 .p12

# asp.net - 在 ASP.NET 中隐藏 NavigationMenu 后如何显示它？

> ID：11585189
> 
> 赞同：0
> 
> 时间：2012-07-20T18:43:10.427
> 
> 标签：asp.net, menu, navigation

我需要让一些 NavigationMenu 项目只对某些用户可见。就我而言，我需要将其中 2 个设置为仅供管理员使用。

我搜索了谷歌，我发现了一个有效的命令：

NavigationMenu.Items.Remove(NavigationMenu.FindItem("这里是我需要删除的菜单名称"));

到这里，一切正常。但是我需要使用哪个命令才能使其再次可用？

请帮我。提前谢谢 ;)

```
public partial class SiteMaster : System.Web.UI.MasterPage
{
    protected void Page_Load(object sender, EventArgs e)
    {
        NavigationMenu.Items.Remove(NavigationMenu.FindItem("Employers"));

        if (Matrix.UserLoggedId == Guid.Empty)
        {

            hlLogin.Visible = true;
            lblUsername.Visible = false;
            lnkLogout.Visible = false;
        }
        else
        {
            // here goes the code to add the menu
            hlLogin.Visible = false;
            lblUsername.Visible = true;
            lnkLogout.Visible = true;

            Marin.Employee.DetailsDataTable emp = Matrix.GetEmployeeByUniqueId(Matrix.UserLoggedId);
            if (emp.Rows.Count > 0)
            {

                lblUsername.Text = emp.Rows[0]["Firstname"].ToString();

                bool isAdmin =Convert.ToBoolean(emp.Rows[0]["isAdmin"]);
                if (isAdmin)
                {
                    //here goes the code to show the menu
                }
                else
                {

                   NavigationMenu.Items.Remove(NavigationMenu.FindItem("Employers"));
                }
            }

        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:47:01.197

试试这个，用正确的值替换 x 。

```
var mi = new MenuItem(x,x,x,x)
NavigationMenu.Items.Add(mi); 
```

有关 MenuItem 的更多信息，请查看 -

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.menuitem.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.menuitem.aspx)

# jquery - 在 jquery 中手动选择一个选项

> ID：11585190
> 
> 赞同：0
> 
> 时间：2012-07-20T18:43:16.067
> 
> 标签：jquery, selection

基本上我有这个选择列表，其中包含多个选项：

```
<select name="drop1" id="Select1" size="30">
  <?php
    for($i = 0;$i<30;$i++)
    {
       echo "<option id=\"other\" value=\"" . $i . "\"></option>\n";
    }
  ?>
</select> 
```

我还有一个输入字段：

```
<input type="text" id="inputfield"></input> 
```

使用 jquery，我想完成以下任务：每当输入字段被聚焦并按下向上箭头时，我想在选择列表中向上移动 1 个选项。与向下箭头相同。我已经找到了使用哪些 jquery 事件来了解何时按下和向上键：

```
$('#inputfield').keydown(function(e){ //When a key is pressed..
    var code = (e.keyCode ? e.keyCode : e.which);
    if ((e.keyCode || e.which) == 40) // on key down
    {
       // Make selection go down here       
    }           
    if((e.keyCode || e.which) == 38) // on key up
    {
    // Make selection go up here
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:47:12.613

我建议如下：

```
$('#inputfield').keydown(function(e) { //When a key is pressed..
    var code = (e.keyCode ? e.keyCode : e.which),
        select = document.getElementById('Select1');
    if (code == 38) // on pressing: ↑
    {
        select.selectedIndex = select.selectedIndex + 1;
    }
    else if (code == 40) // on pressing ↓
    {
        select.selectedIndex = select.selectedIndex - 1;
    }
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/9Lrbe/)。

更新以响应 OP 留下的评论（下）：

> `.change()`当我使用向上键和向下键方法时，选择列表的事件没有响应。

为了触发`change`事件，只需使用`trigger()`; also, in the following code, I've added sanity checks to try and ensure that the key-up/key-down will only happen, and therefore only trigger a `change`event, when the `select`option's selected `option` *can* actually change:

```
$('#inputfield').keydown(function(e) { //When a key is pressed..
    var code = (e.keyCode ? e.keyCode : e.which),
        select = document.getElementById('Select1'),
        current = select.selectedIndex,
        last = $(select).find('option:last').index();
    if (code == 38 && current < last) // on key down
    {
        select.selectedIndex = current + 1;
        $(select).trigger('change');
    }
    else if (code == 40 && current > 0) // on key up
    {
        select.selectedIndex = current - 1;
        $(select).trigger('change');
    }
});​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/9Lrbe/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T18:51:22.710

```
$('#inputfield').on('keydown',function(e) {
    if (e.keyCode === 40) // on key down
    {
       $('select#Select1').find("option:selected").next().attr("selected", true);
    } else if(e.keyCode === 38) // on key up
    {
       $('select#Select1').find("option:selected").prev().attr("selected", true);
    }
}); 
```

# solr - 负载测试端到端 Solr 性能

> ID：11585193
> 
> 赞同：2
> 
> 时间：2012-07-20T18:43:23.633
> 
> 标签：solr, load-testing

我们想测试 Solr 搜索引擎在所有层级的性能。到目前为止，我已经使用“SolrMeter”来测试 Solr 核心在压力下的性能，使用 SOAP UI + Load UI 来测试 REST-Full 服务层。我们现在正在实现用户界面层。您会推荐哪种工具来测试此 UI 层级别的 solr 压力下的性能？我可以想到 Selenium/Webdriver，但想知道是否有专门的工具。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T03:47:33.660

我推荐使用 jMeter。首先使用 [JMeter Proxy](http://jmeter.apache.org/usermanual/jmeter_proxy_step_by_step.pdf)保存您的测试场景（它记录您在浏览器中的操作）。
然后设置一个测试计划，该计划将在线程组中触发测试场景（您必须提供用户/线程的数量、启动时间、加载时间和卸载时间），该计划将记录在所有 Listener 元素（图形、表格、.. .) 你添加到你的测试中。

不要忘记使用[jmeter 插件](https://jmeter-plugins.org/)（无价的 jMeter 贡献）。

# c# - 计算玩家输赢百分比

> ID：11585196
> 
> 赞同：1
> 
> 时间：2012-07-20T18:43:32.827
> 
> 标签：c#, .net, linq

我需要根据玩家的表现绘制一个输赢图表，我希望有人会有类似计算的经验。

所以这就是我所拥有的：

```
public class Player
{
   public virtual bool IsWinner { get; set; }
}

//Sample list
var listOfPlayers = new List<Player>
                                  {
                                      new Player{ IsWinner = true },
                                      new Player{ IsWinner = false },
                                      new Player{ IsWinner = false },
                                      new Player{ IsWinner = true },
                                      new Player{ IsWinner = true },
                                      new Player{ IsWinner = false },
                                      new Player{ IsWinner = true }
                                  }; 
```

球员名单来自数据库，基本上名单中的每个球员都属于不同的比赛。

所以我有这个功能，我提供玩家列表和列表中的相应索引：

因此，例如，在索引 2 处，我有一场胜利和 2 场失败，因为我正在渲染一个图表，所以我需要这个函数返回一个双精度值，它代表赢/输百分比，因此它将具有（玩家赢得 25% 的比赛0-3)

```
public double CalculateWinLossPercentage(List<Player> listOfPlayers,int index)
{
    double winpercentage = null;
    //calculate win percentage base on the total list of players 
    //and the current index in list
    return winpercentage;
} 
```

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T18:57:22.670

```
public double CalculateWinLossPercentage(List<Player> listOfPlayers,int index)
{
    int count = listOfPlayers.GetRange(0, index + 1).Count(p => p.IsWinner);
    return ((double)count)/(index+1);
} 
```

这会将百分比作为双精度值（0 到 1 之间的数字）返回。此外，在您的示例中，如果 index = 2，正确的结果将是 33.3%，而不是 25%。

# javascript - 屏幕上的完整横幅宽度

> ID：11585197
> 
> 赞同：1
> 
> 时间：2012-07-20T18:43:37.450
> 
> 标签：javascript, html, css

我有一个使用图像作为背景的横幅。图片尺寸为 670*303。有没有办法将横幅（图像）拉伸到屏幕的全宽。

演示位于[http://jsfiddle.net/zhshqzyc/xGQtF/2/](http://jsfiddle.net/zhshqzyc/xGQtF/2/)

而且，还有额外的颜色（背景颜色：#808000）

![颜色](../Images/a01e42d65a12e88572b447cfd1281f11.png)

下面的banner，怎么去掉？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T18:48:14.957

`background-size: 100%` 应该做的伎俩。

在这里，[http://jsfiddle.net/xGQtF/6/](http://jsfiddle.net/xGQtF/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T19:04:53.500

如果它是可以重复的渐变或图案，您可以使用

```
background-repeat:repeat-x; 
```

或者只是将'repeat-x'插入到你的背景css中

```
background:url(images/blah.jpeg) repeat-x; 
```

这样你只需要一小块图像>更小的图像尺寸>更快的加载时间。

摆脱它与您可以使用的图像一起显示的颜色

```
background-color:transparent; 
```

此外，如果我怀疑，您希望横幅从一侧无缝延伸到另一侧，请务必将正文样式设置为

```
padding:0px;
width:100%; 
```

并使用

```
margin:0px;
width:100%; 
```

在包含背景的 div 上。

尽管它可能会在不将 body padding 设置为 0px 的情况下拉伸到整个宽度，但如果未设置 body padding，某些浏览器会自动提供它，因此它会抵消那些设置。

如果您使用的图像具有弯曲的边缘和顶点等，这不适合您，您只想拉伸它（我个人认为在 99% 的详细图像上看起来不会很好），您可以使用：

```
background-size:100%; 
```

希望我有帮助 =)

# ruby-on-rails - 在编辑中填充的 Rails 表单选择助手

> ID：11585199
> 
> 赞同：3
> 
> 时间：2012-07-20T18:43:37.813
> 
> 标签：ruby-on-rails, forms

在现有代码库中，`discount`模型的一个属性是`discount_type`. 由于此系统中仅使用 2 种类型的折扣（百分比和现金），因此它们被硬编码为`percentage`或`cash`在整个系统中，没有`discount_types`表或任何可映射的东西。

在表单中，有以下代码：

```
=form_for @discount do |f|
  ...
  =f.select :discount_type, options_for_select(["percentage", "cash"])
  ... 
```

这对新的折扣很有用，但是当拉起表单来编辑折扣时，`percentage`无论`discount`对象`discount_type`是什么，它总是被选中。我们如何让表单默认为`discount_type`正在编辑的对象的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T19:06:42.833

不会简单

```
= f.select :discount_type, ["percentage", "cash"] 
```

足够？

# php - 在多数组中获取值

> ID：11585202
> 
> 赞同：0
> 
> 时间：2012-07-20T18:43:58.167
> 
> 标签：php, arrays, multidimensional-array

我如何获得数组中键的值？

该数组由谷歌购物 api 完成，即：

```
// Valid source values are "public", "cx:cse", and "gan:pid"
// See http://code.google.com/apis/shopping/search/v1/getting_started.html#products-feed
$source = "public";

// For more information about full text search with the shopping API, please
// see http://code.google.com/apis/shopping/search/v1/getting_started.html#text-search
$query = "\"mp3 player\" | ipod";

//The order in which the API returns products is defined by a ranking criterion.
// See http://code.google.com/apis/shopping/search/v1/getting_started.html#ranking
$ranking = "relevancy";

$results = $service->products->listProducts($source, array(
  "country" => "UK",
  "q" => $query,
  "rankBy" => $ranking,
));

print "<h1>Shopping Results</h1><pre>" . print_r($results, true) . "</pre>"; 
```

我有以下输出数组：购物结果

```
Array
(
    [kind] => shopping#products
    [etag] => "*********"
    [id] => tag:google.com,2010:shopping/products
    [selfLink] => https://www.googleapis.com/shopping/search/v1/public/products?country=UK&q=iphone&rankBy=relevancy
    [nextLink] => https://www.googleapis.com/shopping/search/v1/public/products?country=UK&q=iphone&rankBy=relevancy&startIndex=26
    [totalItems] => 771622
    [startIndex] => 1
    [itemsPerPage] => 25
    [currentItemCount] => 25
    [requestId] => 0CMjH976CqbECFYNWtAodLRwAAA
    [items] => Array
    (
        [0] => Array
            (
                [kind] => shopping#product
                [id] => tag:google.com,2010:shopping/products/5735617/11254757413841304510
                [selfLink] => https://www.googleapis.com/shopping/search/v1/public/products/5735617/gid/11254757413841304510
                [product] => Array
                    (
                        [googleId] => 11254757413841304510
                        [author] => Array
                            (
                                [name] => Amazon.co.uk
                                [accountId] => 5735617
                            )

                        [creationTime] => 2012-05-04T05:03:50.000Z
                        [modificationTime] => 2012-07-20T02:02:16.000Z
                        [country] => GB
                        [language] => en
                        [title] => Apple iPod touch 8GB - Black - 4th Generation (Latest Model - Launched Sept 2010)
                        [description] => Apple iPod touch 8GB - Black - 4th Generation (Latest Model - Launched Sept 2010)
                        [link] => http://www.amazon.co.uk/dp/B0040GIZTI/ref=asc_df_B0040GIZTI8843997?smid=A1YZ4RXO7GUOYN&tag=googlecouk06-21&linkCode=asn&creative=22218&creativeASIN=B0040GIZTI
                        [brand] => Apple
                        [condition] => new
                        [gtin] => 00885909394739
                        [gtins] => Array
                            (
                                [0] => 00885909394739
                            )

                        [mpns] => Array
                            (
                                [0] => MC540BT/A
                            )

                        [inventories] => Array
                            (
                                [0] => Array
                                    (
                                        [channel] => online
                                        [availability] => inStock
                                        [price] => 135.95
                                        [shipping] => 1.99
                                        [currency] => GBP
                                    )

                            )

                        [images] => Array
                            (
                                [0] => Array
                                    (
                                        [link] => http://ecx.images-amazon.com/images/I/41p2rNmazRL.jpg
                                        [status] => available
                                    )

                            )

                    )

            )

        [1] => Array
            (
                [kind] => shopping#product
                [id] => tag:google.com,2010:shopping/products/5735617/4597224105326146239
                [selfLink] => https://www.googleapis.com/shopping/search/v1/public/products/5735617/gid/4597224105326146239
                [product] => Array
                    (
                        [googleId] => 4597224105326146239
                        [author] => Array
                            (
                                [name] => Amazon.co.uk
                                [accountId] => 5735617
                            )

                        [creationTime] => 2012-05-04T05:03:50.000Z
                        [modificationTime] => 2012-07-20T02:02:16.000Z
                        [country] => GB
                        [language] => en
                        [title] => SanDisk Sansa Clip+ 8GB MP3 Player with Radio and Expandable MicroSD/SDHC Slot - Black
                        [description] => 8 GB memory Digital FM-tuner with 40 preset radio stations Extendable microSD/microSDHC card slot
                        [link] => http://www.amazon.co.uk/dp/B002NX0ME6/ref=asc_df_B002NX0ME68843997?smid=A3P5ROKL5A1OLE&tag=googlecouk06-21&linkCode=asn&creative=22206&creativeASIN=B002NX0ME6
                        [brand] => SanDisk
                        [condition] => new
                        [gtin] => 00619659059989
                        [gtins] => Array
                            (
                                [0] => 00619659059989
                            )

                        [mpns] => Array
                            (
                                [0] => SDMX18-008G-E46K
                            )

                        [inventories] => Array
                            (
                                [0] => Array
                                    (
                                        [channel] => online
                                        [availability] => inStock
                                        [price] => 46.95
                                        [shipping] => 0
                                        [currency] => GBP
                                    )

                            )

                        [images] => Array
                            (
                                [0] => Array
                                    (
                                        [link] => http://ecx.images-amazon.com/images/I/419U6bYDF1L.jpg
                                        [status] => available
                                    )

                            )

                    )

            ) 
```

我不需要所有这些数据，我只需要 3-4 个密钥，但我将如何访问它们？我将如何从每个数组中回显 say [title] 的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T19:02:14.077

考虑使用[array_walk_recursive](http://www.php.net/manual/en/function.array-walk-recursive.php)

工作示例

```
<?php
$a = array("hai", array("ha"=>1, "hai"=>2, array("a"=>1, "b"=>2)));
function test($item, $key) 
{
     echo "$key holds $item\n";
}
array_walk_recursive($a, 'test');

0 holds hai
ha holds 1
hai holds 2
a holds 1
b holds 2 
```

如果您只对标题感兴趣

考虑使用[foreach](http://in2.php.net/manual/en/control-structures.foreach.php)

```
foreach($results['item'] as $result) {
   echo $result['product']['title'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T18:49:24.620

这应该有效：

```
foreach( $results as $result)
    foreach( $result['product'] as $product) 
        echo $product['title']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T18:54:55.527

您可以像上面指出的那样遍历数组，也可以像这样使用 array_walk_recursive：

```
$title_array = array();

array_walk_recursive($input_array, 'find_titles');

function find_titles($value, $key) {
    global $title_array;
    if ($key == 'title') {
        $title_array[] = $value;
    }
} 
```

如果您不确定输入数组的结构是什么（即您要查找的键嵌套了多少层），这可能是一个更好的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T18:59:23.807

在 $results 中输出每个产品的标题：

```
foreach ($results as $result) {
    echo $result['product']['title'];
} 
```

# php - PHP 不能在两个脚本之间共享会话 w/ register_globals=on 和 session_save_path 定义

> ID：11585203
> 
> 赞同：2
> 
> 时间：2012-07-20T18:44:00.720
> 
> 标签：php, session, scripting, shared

我在同一个域上有两个脚本。www.xxx.com/first/ www.xxx.com/second/

我有 register_globals=on，我已经检查了多次拼写。我检查了 session_save_path() 并且他们都在同一个目录上工作。

我什至尝试将 session_save_path 设置为一个新目录以防万一。

每个脚本都在独立访问一个会话。如果我在一个脚本中设置会话变量的值，它就会保留。如果我在其他脚本中设置它的值，它会保留。两个脚本都没有更新另一个，所以他们必须编写自己的会话。我正在使用相同的浏览器，没有任何安全性。

有什么想法可以让这些谈话吗？

谢谢！

**更新！发现其中一个脚本正在定义一个 session_name 变量。确保这些是相同的。无论如何，感谢您的所有帮助！**

# error-handling - Stata中如何有效使用knn

> ID：11585207
> 
> 赞同：0
> 
> 时间：2012-07-20T18:44:08.667
> 
> 标签：error-handling, machine-learning, stata, knn

我有两个关于在 Stata 中执行 discrim knn 的问题。

1）您如何正确编码命令？我尝试了各种版本，但似乎总是得到一个错误，即指定的变量太多。

*   结果正确的向量是buy。
*   我在尝试：`discrim knn buy, group(train test) k(1)`

2）我对 KNN 的理解是因子变量（二进制）对于使用 KNN 来说是很好的，甚至受到鼓励。但是，我收到不允许使用因子变量和时间序列运算符的错误消息。

最后，虽然我知道这不是这个问题的最佳空间，但每个向量是否应该针对 knn 进行归一化？我听到了相互矛盾的回应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T00:29:21.667

我猜你得到的错误是

```
group():  too many variables specified 
```

这是因为您只能按 1 个变量分组`knn`。`knn`根据单个分组变量执行判别分析，在您的情况下，将训练与测试区分开来。我想你的`train`和`test`变量是二元的，在这种情况下，只使用一个变量就足够了，因为它们只是逻辑上的对立面。单个变量有足够的信息来区分两组。

# javascript - jquery 插件 imgpreload

> ID：11585209
> 
> 赞同：0
> 
> 时间：2012-07-20T18:44:12.867
> 
> 标签：javascript, jquery

我已经问过这个问题几次了，但这些建议似乎都没有奏效。

我正在使用 jstree 插件来构建树。基于node_id，我正在尝试将图像加载到一些div。它有点工作，但是，我有零星的图像显示问题。有时，我必须双击，有时单击显示图像。

我试过这个：

```
 img1 = new Image;
  img1.src="teamA.png";

  img2 = new Image;
  img2.src="teamB.png";

      img1.onload = function()
 { 

$("#div1").html(img1;
    } 
```

等，但这不起作用。我仍然看到零星的图像现在出现在 div 上。

我开始看 jquery 插件 imgpreload 是这样的：

```
$.imgpreload(['img1','img2', 'img3','img4','img5','img6'], 
{     

    each: function()     { 

    $(this).data('loaded') 

    $("#div1").html(img1);
}
}); 
```

这似乎也不起作用，有什么想法或观点吗？

我已经这样做了：

```
$(function () {
var myImage1 = new Image();
$(img1)
    .load(function () {
    });

      .attr('src', 'teamA.png');
}); 
```

出现语法错误。你觉得这没问题吗？

*** 更新 ***我将代码修改为：

```
$(function () { 
    var myImage1 = new Image(); 
    $(myImage1).load(function () 
    {     
    })         
    .attr('src', 'teamA.png');
    alert(myImage1.width);  

    $('#div1').html("myImage1").css({"border": "0", "background": "white"});

} 
```

在加载功能之后，我正在做一个：

alert(myImage.width) 查看图像的大小，它返回 0，所以这似乎不起作用。有明确的形象。

***更新 v2***

```
 $(function () { 
    var myImage1 = new Image(); 
    $(myImage1).load(function () 
    {     
    alert(myImage1.width);
    $('#div1').html("myImage1").css({"border": "0", "background": "white"});

    })         
    .attr('src', 'teamA.png');
    }); 
```

好的，假设图像在那里，这段代码可以工作。但我喜欢做的是，如果图像不存在，我喜欢隐藏那个 div。我有这段代码，但它不适用于加载事件。如何隐藏空的 div？

```
 $(function ()
           { 
            var myImage1 = new Image(); 
             $(myImage1).load(function () 
                  {  
                       var image1Check = myImage1.width;
               if (image1Check == 0  || image1Check < 30) 
                             {
                         $('#div').html("").css("border", "");

                     }
               else 
                     {

                         $("#div1").html(myImage1).css("border","1px solid");

                          }

    })         
                .attr('src', teamA.png);

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T17:54:17.467

在设置 src 之前绑定加载事件，并处理丢失的图像，使用`.error()`

```
$(function () { 
    var myImage1 = new Image(); 
    $(myImage1).load(function () {  
        $("#div1").html(myImage1).css("border","1px solid");
    }).attr('src', "teamA.png").error(function(){
        $('#div1').html("").css("border", "");
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T18:58:57.017

您必须在 if 中使用 $(this).data('loaded')：

```
each: function() {
  if ($(this).data('loaded')) {
    // do something
  }
}, 
```

# android - 访问在 Activity 销毁后启动 Started Service 的 Activity

> ID：11585217
> 
> 赞同：1
> 
> 时间：2012-07-20T18:45:28.447
> 
> 标签：android

我想我可以传递一个启动`Started Service`. 由于服务具有 Activity 的引用，它可以调用该引用的方法。

现在，如果 Activity 被销毁，但服务仍在后台运行，如果服务调用 Activity 引用的方法会发生什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:50:38.080

您绝对应该避免存储对一般活动的引用。如果是这样，你必须在活动中释放它`onDestroy()`，否则你会得到内存泄漏。您将引用存储在服务中的原因是什么？

```
EDIT: 
```

您可以使用 toast 通知或状态栏通知来通知用户后台工作已完成。这是一种常见的做法。如果您需要与一个 通信`Activity`，有几种方法可以完成它。您可以绑定到一个`Activity`、使用`Intents`或使用`AIDL`。您可以[在此处](http://www.vogella.com/articles/AndroidServices/article.html)查看更多详细信息。

我描述了`Intents`与[ResultReceiver](http://developer.android.com/reference/android/os/ResultReceiver.html)一起使用的选项之一。

`Service`在应用程序的主线程中运行，因此如果您正在执行阻塞操作，您应该在服务内启动一个新线程。在这种情况下，您可以使用[IntentService](http://developer.android.com/reference/android/app/IntentService.html)为您简化工作并且已经实现了线程化的东西。

我将从[ResultReceiver](http://developer.android.com/reference/android/os/ResultReceiver.html)`ServiceResultReceiver`进行自定义扩展。比我在我的和启动接收器对象时实现它的接口。`Activity``Service``IntentService`

自定义`ResultReceiver`：

```
public class ServiceResultReceiver extends ResultReceiver {

    private Receiver mReceiver;

    public ServiceResultReceiver(Handler handler) {
        super(handler);
    }

    public void setReceiver(Receiver receiver) {
        mReceiver = receiver;
    }

    public interface Receiver {
        public void onReceiveResult(int resultCode, Bundle resultData);
    }

    @Override
    protected void onReceiveResult(int resultCode, Bundle resultData) {
        if (mReceiver != null) {
            mReceiver.onReceiveResult(resultCode, resultData);
        }
    }
} 
```

你的`Activity`：

```
public class MyActivity extends Activity implements ServiceResultReceiver.Receiver {
    private ServiceResultReceiver mReceiver;
    ...

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        ...
        mReceiver = new ServiceResultReceiver(new Handler());
        mReceiver.setReceiver(this);
        // starting a service
        final Intent intent = new Intent(this, MyService.class);
        intent.putExtra("receiver", mReceiver);
        startService(intent);
    }
    ...

    @Override
    public void onReceiveResult(int resultCode, Bundle resultData) {
        // here you can handle data which came from your service.
        Toast.makeText(this, "onReceiveResult()", Toast.LENGTH_SHORT).show();
    } 
```

你的`Service`：

```
public class MyService extends IntentService {
    ...
    @Override
    protected void onHandleIntent(Intent intent) {
        // executing your task
        ...
        // getting the receiver and sending back data in Bundle (here in this example we are sending no data)
        final ResultReceiver receiver = intent.getParcelableExtra("receiver");
        if (receiver != null) {
            receiver.send(0, null);
        }
    }
} 
```

# css - 要编辑哪个文件以更改 cakephp 中的文本颜色

> ID：11585224
> 
> 赞同：1
> 
> 时间：2012-07-20T18:45:59.713
> 
> 标签：css, cakephp, text, colors

我正在使用 Cakephp 框架，我需要帮助更改我的对话框的文本颜色。

对话框中的文本和标题是白色的，但如果我禁用对话框并直接进入浏览器中的操作视图，文本颜色就可以了。我想知道这是否需要在 layout.css 或 text.css 中进行编辑。

当涉及到 css 文件时，我不知道我在做什么。我希望它只是css文件中一行的一个小改动，但我不知道是哪一个。

如果这个问题太模棱两可或无法解决，我会删除它。

谢谢您的帮助

编辑 ------------------------ 我发现这是来自 layout.css 的代码。

```
tbody td {
    background: none repeat scroll 0 0 #EEEEEE;
    border-bottom: 1px solid #BBBBBB;
    border-top: 1px solid #BBBBBB;
} 
```

白色文本位于表格单元格中，

我应该改变什么让它变黑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T18:51:26.683

试试看`/app/webroot/css/cake.generic.css`。

您需要将该属性添加`color`到您的对话框 css 中。（例如`color: black;`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T18:53:21.913

在 Firefox 上使用 Firebug，或者只需右键单击并选择 Chrome 上的 Inspect Element 以查看定义了哪些 CSS 文件属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T18:54:37.533

您可以添加您的 css 类或 id 表单 /app/webroot/css/styles.css。并通过萤火虫检查。是申请还是不申请？...

# java - 使用 AsyncTask 加载位图图像

> ID：11585226
> 
> 赞同：3
> 
> 时间：2012-07-20T18:46:09.073
> 
> 标签：java, android, android-asynctask, loader

当有人通过我的应用程序工作时，我正在尝试在后台加载图像。我写的逻辑是这样的：

```
public class ImageLoader extends AsyncTask <Context, Void, Bitmap>{

    private String URL;
    private int type;

    ImageLoader(String Url, int Type)
    {
        URL = Url;
        type = Type;
    }

    @Override
    protected Bitmap doInBackground(Context... arg0) {

        AssetManager assetMgr = arg0[0].getAssets();
        Bitmap bitmap = null;
        try {
            bitmap = BitmapFactory.decodeStream(assetMgr.open(URL));
        } catch (IOException e) {
            e.printStackTrace();
        }
        return bitmap;
    }

    @Override
    protected void onPostExecute( Bitmap result )  {
          super.onPostExecute(result);

          if (type == 1)
              Inst1 = result;
          else if (type == 2)
              Inst2 = result;
          else if (type == 3)
              Inst3 = result;
    }
} 
```

但是，当我尝试像这样开始一个新线程时：

```
task = new ImageLoader("Instructions_2.png", 3);
task.execute(gameContext); 
```

但是在程序中我得到错误 Looper.prepare 必须被调用，然后是逻辑 looper.quit()

但是，当我添加 Looper.prepare() 时，我似乎破坏了程序，并且没有 looper.quit() 可以调用。

我是否正确创建任务？

> 编辑：

这是我尝试运行时的错误日志：

```
task = new ImageLoader(gameContext, "Instructions_3.png", 3); 
```

我有一个 switch case 语句，我将图像加载器声明放在外面。基本上我的代码是：

```
ImageLoader task;
switch(foo)
{
    case 0:
       ...
       task = new ImageLoader(gameContext, "Instructions_0.png", 3);
       task.execute();
       break;
    case 1:
       ...
       task = new ImageLoader(gameContext, "Instructions_1.png", 3));
       task.execute();
       break;
    ...
} 
```

和错误日志（每次我打`task = new ImageLoader(...);`线时都会发生错误

```
07-20 14:23:34.276: E/AndroidRuntime(16741): FATAL EXCEPTION: Thread-10
07-20 14:23:34.276: E/AndroidRuntime(16741): java.lang.ExceptionInInitializerError
07-20 14:23:34.276: E/AndroidRuntime(16741):    at com.petronicarts.stormthecastle.MainGamePanel.update(MainGamePanel.java:2578)
07-20 14:23:34.276: E/AndroidRuntime(16741):    at com.petronicarts.stormthecastle.MainThread.run(MainThread.java:63)
07-20 14:23:34.276: E/AndroidRuntime(16741): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
07-20 14:23:34.276: E/AndroidRuntime(16741):    at android.os.Handler.<init>(Handler.java:121)
07-20 14:23:34.276: E/AndroidRuntime(16741):    at android.os.AsyncTask$InternalHandler.<init>(AsyncTask.java:421)
07-20 14:23:34.276: E/AndroidRuntime(16741):    at android.os.AsyncTask$InternalHandler.<init>(AsyncTask.java:421)
07-20 14:23:34.276: E/AndroidRuntime(16741):    at android.os.AsyncTask.<clinit>(AsyncTask.java:152)
07-20 14:23:34.276: E/AndroidRuntime(16741):    ... 2 more 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T19:13:48.270

问题是您正试图从非 UI 线程访问和操作 UI 元素。如果你改变你`AsyncTask`的如下，我相信你会没事的：

```
public class ImageLoader extends AsyncTask <Void, Void, Bitmap>{

private String URL;
private int type;
private Context context;
private InputStream in;

ImageLoader(Context context, String Url, int Type)
{
    URL = Url;
    type = Type;
    ImageLoader.this.context = context;
}

@Override
protected void onPreExecute()
{
   AssetManager assetMgr = context.getAssets();

   try {

       in = assetMgr.open(URL);
   } catch (IOException e) {

       e.printStackTrace();
   }

}

@Override
protected Bitmap doInBackground(Void... arg0) {

    Bitmap bitmap = null;
    try {
        bitmap = BitmapFactory.decodeStream(in);
        in.close();
    } catch (IOException e) {
        e.printStackTrace();
    }
    return bitmap;
}

@Override
protected void onPostExecute( Bitmap result )  {

      if (type == 1)
          Inst1 = result;
      else if (type == 2)
          Inst2 = result;
      else if (type == 3)
          Inst3 = result;
}
} 
```

还将您的呼叫更改为`AyncTask`以下内容：

```
task = new ImageLoader(gameContext, "Instructions_2.png", 3);
task.execute(); 
```

# c# - 从列表中删除存在于另一个列表中的项目

> ID：11585227
> 
> 赞同：2
> 
> 时间：2012-07-20T18:46:10.230
> 
> 标签：c#, asp.net

以下两个列表都包含一个 QuoteID 字段。从 currentQuotes 列表中删除具有 quoteData 列表中存在的 QuoteID 的项目的最佳方法是什么？谢谢。

```
 //Establish - Instantiate lists
  IList<QuotePaneView> currentQuotes = new List<QuotePaneView>();
  IList<Quote> quoteData = new List<Quote>();

  //Fill lists
  currentQuotes =  theQuotePaneService.GetAllQuotePanelStuff();
  quoteData =  theQuoteDataService.GetAllQuoteData(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T18:53:24.083

一个简单的 Linq 可以在这里提供帮助：

考虑以下：

```
 var list1 = new List<int>();

        list1.Add(1);
        list1.Add(3);
        list1.Add(5);

        var list2 = new List<int>();

        list2.Add(1);
        list2.Add(2);
        list2.Add(3);

        var diff = list1.Except(list2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T18:52:45.090

您可以使用[`Except`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.except.aspx)根据 ID 获取设置的差异。然后，您只需将结果（不在 quoteData 中的唯一 ID）加入`currentQuotes`列表。

```
var notInQuoteData = currentQuotes.Select(q => q.QuoteID).Except(quoteData.Select(q => q.QuoteID));
var result = (from qUnique in notInQuoteData 
             join q in currentQuotes on qUnique equals q.QuoteID
             select q).ToList(); 
```

# powershell - 如何在 BITS 下载完成时运行脚本

> ID：11585231
> 
> 赞同：3
> 
> 时间：2012-07-20T18:46:50.713
> 
> 标签：powershell, microsoft-bits, bits-service

我正在尝试自动下载和安装一个大小为数百 MB 到几 GB 的大型应用程序。我正在研究使用 BITS 和 powershell 来异步下载应用程序，然后启动设置。

使用不推荐使用的`bitsadmin`命令，有一个`/SETNOTIFYCMDLINE`选项可以让我在下载完成后链接安装程序的执行。如何使用 powershell 执行此操作？

这将是我的第一个 powershell 脚本，所以如果您有任何示例链接，那就太好了。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T19:29:05.183

我建议使用 BitsTransfer 模块，因为它公开了用于处理 BITS 作业的本机 PowerShell 方法。要开始，您只需指示 PowerShell 加载 BITS 模块：

```
Import-Module BitsTransfer 
```

运行[Get-Command](http://technet.microsoft.com/library/ee176842.aspx)以查看已添加的新 BITS cmdlet 显示：

```
PS C:\> Get-Command  *-bits*

CommandType     Name
-----------     ----
Cmdlet          Add-BitsFile
Cmdlet          Complete-BitsTransfer
Cmdlet          Get-BitsTransfer
Cmdlet          Remove-BitsTransfer
Cmdlet          Resume-BitsTransfer
Cmdlet          Set-BitsTransfer
Cmdlet          Start-BitsTransfer
Cmdlet          Suspend-BitsTransfer 
```

您最有可能感兴趣的是[Start-BitsTransfer](http://technet.microsoft.com/en-us/library/dd819420.aspx)：

```
Start-BitsTransfer -Source http://localhost/BigInstaller.msi 
```

该 cmdlet 将在屏幕上显示一个进度条并等待下载完成 - 脚本中的下一个命令在下载完成之前不会执行。

对于异步任务，您可以将`-Asynchronous`参数添加到 Start-BitsTransfer cmdlet，它会将下载排队并让它在后台运行。[您可以使用Get-BitsTransfer](http://technet.microsoft.com/en-us/library/dd819416)和[Complete-BitsTransfer](http://technet.microsoft.com/en-us/library/dd819410) cmdlet管理这些下载。

```
PS C:\> Start-BitsTransfer -Source http://localhost/BigInstaller.msi -Async
JobId                   DisplayName    TransferType  JobState
-----                   -----------    ------------  --------
da7bab7f-fbfd-432d-8... BITS Transfer  Download      Connecting

PS C:\> Get-BitsTransfer
JobId                   DisplayName    TransferType  JobState
-----                   -----------    ------------  --------
da7bab7f-fbfd-432d-8... BITS Transfer  Download      Transferred

# finish and jobs that have transferred (e.g. write them to destination on disk)
PS C:\> Get-BitsTransfer | ? {$_.JobState -eq "Transferred"} | Complete-BitsTransfer 
```

# c++ - 是否可以制作非虚拟创建方法

> ID：11585232
> 
> 赞同：2
> 
> 时间：2012-07-20T18:46:57.983
> 
> 标签：c++, c++11, rtti

```
#include <memory>

class Base
{
    std::shared_ptr<Base> create() const; // Returns a default constructed object
} 
```

假设所有派生到任何程度的成员`Base`都是可复制构造和默认构造的。我想要

```
std::shared_ptr<Base> create() const; 
```

创建适当动态类型对象的方法，但我不想使用样板代码。

是否可以制作

```
std::shared_ptr<Base> create() const; 
```

静态绑定，但在内部以某种方式找到正确的类型并使用默认构造函数创建对象？可能使用 C++11。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:04:57.480

这些`create()`函数可能应该是静态的，因为您还没有实例。但是如果没有参数，你就不能做你想做的事......当然，除非你使用模板：

```
class Base
{
public:
    template<typename T>
    static std::shared_ptr<Base> create() const
    {
        return std::shared<Base>(new T);
    }
}; 
```

然后以这种方式使用它：

```
std::shared_ptr<Base> ptr(Base::create<Foo>()); 
```

或者，如果您愿意：

```
std::shared_ptr<Base> ptr(Foo::create<Foo>()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T19:40:22.973

理想情况下，您有一个静态函数，也许还有一个非静态`create()`函数。有一个聪明的方法可以做到这一点。

1.  定义一个`SuperBase`类。它需要一个虚析构函数和一个纯虚`create()`函数。您将使用指向此类的指针/引用来进行正常的后期绑定 OOP 行为。

2.  定义一个`Base`继承自`SuperBase`. `Base`的模板参数将是类的类型`Derived`。`Base`还将有一个带有静态函数的特征类模板，称为`create()`. 此静态`create()`函数将使用`new`. 使用 trait 的`create()`函数，`Base`将定义 a`static_create()`和纯虚`SuperBase::create()`函数。

3.  `Derived`通过继承来实现`Base<Derived>`。

完成后，如果您知道您使用的是派生类型，那么您可以编写`Derived::create()`静态创建一个新类型。如果没有，那么您始终可以使用实例的`create()`方法。多态性没有被破坏，因为`SuperBase`会有你需要/想要的多态接口——`Base<D>`只是一个自动定义`static_create()`和`create()`函数的辅助类，所以你通常不会`Base<D>`直接使用。

示例代码如下所示：

```
#include <memory>
#include <iostream>

class SuperBase
{
  public:
    virtual ~SuperBase() = default;
    virtual std::shared_ptr<SuperBase> create() const = 0;
};

template <typename T>
struct Base_Traits
{
  static T* create()
  {
    return new T;
  }
};

template <typename Derived, typename Traits=Base_Traits<Derived>>
class Base : public SuperBase
{
  public:   
    // Define a static factory function...
    static std::shared_ptr<SuperBase> static_create()
    {
      return std::shared_ptr<SuperBase>{Traits::create()};
    }

    // Define pure virtual implementation...
    std::shared_ptr<SuperBase> create() const override
    {
      return static_create();
    }
};

class Derived : public Base<Derived>
{
};

int main()
{
  auto newone = Derived::static_create();  // Type known @ compile time
  auto anotherone = newone->create();      // Late binding; type not known @ compile time
} 
```

# objective-c - 委托与消息传递

> ID：11585235
> 
> 赞同：1
> 
> 时间：2012-07-20T18:47:10.523
> 
> 标签：objective-c, ios, delegates, message-passing

我有一个类，称之为`A`将一些数据解析为`NSDictionary`. 该类有一个表格视图，当一个单元格被选中时，会实例化一个新类，我们称之为该类`B`。类`B`反过来实例化类`C`。我希望班级`C`接收`NSDictionary`在`A`.

代表会工作吗？即使`C`没有实例化类，它会起作用吗？如果这是真的而且它真的不是，我应该在方法中传递来自`A`--> `B`-->的数据吗？Objective-C 中有更好的消息传递方法吗？`C``init`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T18:54:04.903

> 我应该在 init 方法中从 A-->B-->C 传递数据吗？

我认为这是最好的计划。

A 真的不必担心 B 如何做它所做的事情。B 使用 C 的事实与 A 无关。A 需要知道的是，B 需要字典才能做到这一点。

碰巧的是，B 并不太关心字典，但字典应该是 B 的工作描述的一部分，类似于：*获取给你的数据并以某种方式显示它。*如果 B 通过将字典直接传递给 C 来处理字典，那很好——这不是 A 应该关心的事情。

您*可以*对代表做同样的事情。A 可以给 B 一个对自身作为数据源的引用，而 B 最终可以将其传递给 C。这与使用字典的过程相同，因此如果您可以将 C 中的所有内容都放入，那么这样做并没有真正的优势需要进字典。如果 A 事先不知道确切需要什么数据，或者当您希望 A 能够以某种方式自定义 C 的行为时，您可能会考虑切换到委托。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T18:54:36.050

我会通过 init 传递它。或者取决于什么样的“A”类。您可以将其设为单例，或将解析后的字典传递给单例，然后直接从“C”中引用它。

# r - 根据行和列指定添加矩阵

> ID：11585242
> 
> 赞同：3
> 
> 时间：2012-07-20T18:47:33.083
> 
> 标签：r, matrix

我确信这个问题的答案在某个地方，但我认为我没有使用正确的搜索词。

这是我的问题。我有多个矩阵（我将在这里简化为两个），其中每一行都是一个唯一标记的个体（其中一些在矩阵之间共享，而其中一些不是），以及共享的公共列标题。

例如：

```
first<-matrix(rbinom(20,1,.5),4,5)
first[,1]=c(122,145,186,199)
colnames(first)<-c("ID",901,902,903,904)
first
      ID 901 902 903 904
[1,] 122   1   0   0   0
[2,] 145   0   0   0   1
[3,] 186   0   0   1   1
[4,] 199   1   0   0   0

second<-matrix(rbinom(30,1,.5),6,5)
second[,1]=c(122,133,142,151,186,199)
colnames(second)<-c("ID",901,902,903,904)
second
      ID 901 902 903 904
[1,] 122   0   1   1   1
[2,] 133   0   0   0   1
[3,] 142   1   1   0   1
[4,] 151   0   1   0   0
[5,] 186   1   0   1   1
[6,] 199   1   0   0   0 
```

我想根据“ID”和列名一起添加“第一”和“第二”。这应该会产生一个包含 7 行的矩阵（因为“第一个”矩阵中有 4 个 ID，“第二个”矩阵中有 3 个新 ID 和 3 个旧 ID：“122,133,142,145,151,186,199”）和相同的列数。

在这个例子中，我想要的结果是：

```
 ID 901 902 903 904
[1,] 122   1   1   1   1
[2,] 133   0   0   0   1
[3,] 142   1   1   0   1
[4,] 145   0   0   0   1
[5,] 151   0   1   0   0
[6,] 186   1   0   2   2
[7,] 199   2   0   0   0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T22:30:09.600

# 原始答案

基于@RYogi 的方法，您使用行名和列名来描述您的矩阵，我提出以下建议：

```
res <- rbind(first,second)
res <- tapply(res, expand.grid(dimnames(res)), sum) 
```

将汇总具有相同行名的所有行。

# 使用数据框时

如果您的输入是 a `data.frame`，则上述内容将不起作用，因为 a`data.frame`不能有任何重复的行名。另一种方法也适用于此：

```
rowsum(rbind(first, second), c(rownames(first), rownames(second))) 
```

这种方法也适用于矩阵。由于它只需要一行，您可能会认为它更简单。我想它也可能更有效，因为它不如`tapply`. 您可以将此解决方案调整为问题中的数据格式，其中标识符位于单独的列中：

```
rowsum(rbind(first, second)[,-1], c(first[,1], second[,1])) 
```

请注意，结果仍将具有命名行，而不是包含这些名称的列。

有趣的是，我在这里以一种相当复杂的方法寻找这个问题的`rowsum`版本时无意中读到了。幸运的我。`rowSums``data.frame`

# 附加提示

如果您发现生成的名称`Var1`和`Var2`尺寸令人困惑，您可以使用删除它们

```
names(dimnames(res)) <- NULL 
```

如果您的数据确实是您描述的格式，在第一个数据列中使用行名称，您可以使用以下命令将它们更改为正确的行名称：

```
rownames(first) <- first[,1]
first <- first[,-1] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T19:38:27.013

我对您的问题的设置略有不同：

```
first <- matrix(rbinom(16,1,.5),4,4)
rownames(first) <- c(122,145,186,199)
colnames(first) <- c(901,902,903,904)

second <- matrix(rbinom(24,1,.5),6,4)
rownames(second) <- c(122,133,142,151,186,199)
colnames(second) <- c(901,902,903,904) 
```

矩阵现在已命名为行名

```
> first
    901 902 903 904
122   1   0   0   1
145   1   0   0   0
186   0   0   1   1
199   1   0   1   1
> second
    901 902 903 904
122   1   1   0   0
133   0   0   1   1
142   1   0   1   0
151   1   0   1   1
186   0   1   0   1
199   0   0   0   0 
```

现在很容易对行名进行设置操作：

```
SumOnID <- function(A, B){
  rnA <- rownames(A)
  rnB <- rownames(B)

  ls.id <- list(ids = intersect(rnA, rnB), #shared indices
                idA = setdiff(rnA, rnB),   #only in A
                idB = setdiff(rnB, rnA))   #only in B

  do.call(rbind, 
    lapply(names(ls.id), function(x){
      if (x == "ids") return(A[x,, drop = F] + B[x,, drop = F])
      if (x == "idA") return(A[x,, drop = F])
      if (x == "idB") return(B[x,, drop = F])
    }))
} 
```

让我们试试：

```
> SumOnID(first, second)
    901 902 903 904
122   2   1   1   1
186   1   1   0   1
199   2   1   1   0
145   1   1   0   1
133   1   0   1   1
142   1   0   1   0
151   1   1   1   1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T19:41:40.713

我一直在寻找没有使用内置函数的“for”循环的解决方案，但没有成功。所以这是我的方法

```
set.seed(1) # make it reproducible
first <- matrix(rbinom(20,1,.5),4,5)
first[ ,1] <- c(122, 145, 186, 199)
colnames(first) <- c("ID", 901, 902, 903, 904)

second <- matrix(rbinom(30, 1, .5), 6, 5)
second[ ,1] <- c(122, 133, 142, 151, 186, 199)
colnames(second) <- c("ID", 901, 902, 903, 904)

first

      ID 901 902 903 904
[1,] 122   0   1   1   1
[2,] 145   1   0   0   1
[3,] 186   1   0   1   0
[4,] 199   1   0   0   1

second
      ID 901 902 903 904
[1,] 122   0   0   1   1
[2,] 133   0   0   0   1
[3,] 142   1   1   1   0
[4,] 151   0   1   1   0
[5,] 186   0   1   1   1
[6,] 199   1   0   1   1

## stack them rowise
mat <- rbind(first, second)

ind <- unique(mat[,"ID"])

result <- matrix(nrow = length(ind), ncol = 5)
result[,1] <- ind

for (i in seq_along(ind)) {
    result[i,-1] <- colSums(mat[mat[ ,"ID"] == ind[i], -1, drop = FALSE])
}
colnames(result) <- colnames(mat)

result
      ID 901 902 903 904
[1,] 122   0   1   2   2
[2,] 145   1   0   0   1
[3,] 186   1   1   2   1
[4,] 199   2   0   1   2
[5,] 133   0   0   0   1
[6,] 142   1   1   1   0
[7,] 151   0   1   1   0 
```

# ruby-on-rails - Rails 3 - 在用户生成的评论内容上替代 html_safe？

> ID：11585254
> 
> 赞同：0
> 
> 时间：2012-07-20T18:48:20.887
> 
> 标签：ruby-on-rails, ruby-on-rails-3, html-safe

显然，对用户生成的评论内容使用 html_safe 方法确实不是一个好的解决方案。然而，到目前为止，这是我能想出的实现以下功能的唯一解决方案：我想让用户能够引用另一个评论，只需在评论表单中输入另一个评论的迭代 id，就像这样“#14 "（引用那篇文章的评论 14）。然后这个 #14在内容输出中被替换为*“[quoted_comment.content]” 。*

这是我在评论模型中的代码：

```
def content_with_quotes
  if content.match(/(#([0-9]+))\s/)
    comment_content = content
    comment_content.scan(/(#([0-9]+))\s/) do
      if quoted_comment = Comment.where(article_id: self.article_id).where(iteration_id: $2).first
        if quoted_comment.created_at < self.created_at
          return comment_content.sub(/(#[0-9]+)\s/, "<i>'#{quoted_comment.content}'</i> ")
        end
      end
    end
  else
    return content
  end
end 
```

然后在我的评论视图中，我将它与 comment.content_with_quotes.html_safe 一起应用，一切正常。

所以，这就是我想要的，它可以工作，但当然，这个 html_safe 方法对于用户提交的内容来说是个坏主意，因为它可能不是 html 安全的。
关于如何在不使用 html_safe 方法的情况下使用我的功能的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T18:52:44.477

我会考虑使用白名单方法并使用 HTML Sanitizer 方法来清理您的字符串。

见[http://api.rubyonrails.org/classes/ActionView/Helpers/SanitizeHelper.html](http://api.rubyonrails.org/classes/ActionView/Helpers/SanitizeHelper.html)

# c++ - GLUT 显示空白窗口

> ID：11585255
> 
> 赞同：3
> 
> 时间：2012-07-20T18:48:22.507
> 
> 标签：c++, macos, opengl, glut

我在[这里关注 GLUT 教程](http://mindfuck.de-brauwer.be/articles/glut/)。我将第一个示例“YAT”复制并粘贴到 xcode 中，稍微修改了包含内容，发现弹出了一个空白窗口。未修改的代码设置为显示线框茶壶。对我来说，这不会发生。

但是，如果我取消注释创建线金牛座，金牛座的一部分和茶壶出现在窗口中。在代码中 //draw something 下也有看似随机的取消注释和注释行组合，它们实际上会导致对象出现......或者只是一个空白屏幕。

PS 我知道每个人都说不要使用 GLUT，但我最终演示所需的图形非常基本，我看过的其他所有东西都让我感到头疼。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T19:38:07.390

> 我将第一个示例“YAT”复制并粘贴到 xcode

这个例子的问题是，它不请求双缓冲区，但是在 MacOS X 上运行得不是很好。它可以做到，但实际上这样做没有任何意义。

在标志中替换`GLUT_SINGLE`为 ，即`GLUT_DOUBLE``glutInitDisplayMode`

```
glutInitDisplayMode(GLUT_RGBA | GLUT_DOUBLE); 
```

`glutSwapBuffers()`并在显示函数的末尾添加一个。

# eclipse - Eclipse 的 Aptana 3.2.0 插件。Javascript代码完成问题

> ID：11585261
> 
> 赞同：0
> 
> 时间：2012-07-20T18:49:02.990
> 
> 标签：eclipse, aptana, eclipse-pdt

我安装了带有 Aptana Studio 3.2.0 插件的 Eclipse PDT 3.0.2 All In Ones。当我使用 javascript 文件创建一个 Web 项目（Project Natures/Web 设置为主要）并尝试使用代码完成（ctrl + 空格）时，这会导致“无默认提案”消息。我可以右键单击项目并选择“配置/转换为 JavaScript 项目”，但这是 Eclipse 而不是 Aptana 的功能。

PS CSS 和 HTML 代码完成工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T20:58:26.197

做到了。我已将与 .js 文件关联的编辑器更改为*JavaScript 源代码编辑器*，而不是安装时设置为默认值的*JavaScript 编辑器。*如果他们在编辑器名称后添加“Aptana”以与其他编辑器区分开来，那就太好了。

# iphone - 在委托范式中解除分配

> ID：11585263
> 
> 赞同：0
> 
> 时间：2012-07-20T18:49:13.247
> 
> 标签：iphone, objective-c, ios

我有`ParentViewController`allocates `ChildViewController`，将其推送到控制器堆栈并释放它。

`ChildViewController``ProductDownloadDelegateProtocol`实现Product 类所需的协议。

在某个时候，`ChildViewController`创建一个 Product 对象并将其自身设置为其`downloadDelegate`.

下载时，`Product`类`ChildViewController`通过`ProductDownloadDelegateProtocol`.

如果用户在下载时按下导航栏中的后退按钮，`ChildViewController`则下载百分比的下一次更新`Product`会导致`EXC_BAD_ACCESS`.

虽然`Product`检查 if `downloadDelegate`is `nil`，但问题仍然存在，因为`ChildViewController/downloadDelegate`已释放，但未设置为`nil`。我不知道哪个点最好设置`ChildViewController`为`nil`.

我的设计错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T18:56:33.293

如果您`ChildViewController`创建了一个实例`Product`并将自己设置为委托，那么当它即将被卸载时，它应该有责任将自己作为委托移除。无论是在它的`viewDidUnload`还是`dealloc`方法中，您都应该将`Product`委托设置为 nil。

如果`ChildViewController`保留（假设您正在重用视图控制器），也许您可​​以将其作为`viewWillDissappear`方法中的委托删除。

解决此特定 EXC_BAD_ACCESS 问题的另一个解决方案是移至 ARC 并使用归零弱引用（请参阅此处的好文章，[http://www.mikeash.com/pyblog/friday-qa-2010-07-16-zeroing-weak -references-in-objective-c.html](http://www.mikeash.com/pyblog/friday-qa-2010-07-16-zeroing-weak-references-in-objective-c.html)）。

尽管如此，我还是建议您出于正确的原因迁移到 ARC，而不是解决您面临的这个特定问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T19:15:11.233

我的经验法则是这样的：**你永远不应该成为你不拥有的对象的代表。**在这里，“自己”的意思是“强烈引用”（在 ARC 术语中）。主要的例外是当委托保留你时， UIApplication.delegate 因为这有点奇怪。

通常我将逻辑捆绑到设置器中，如下所示：

```
-(void)setProduct:(Product*)p
{
  product.delegate = nil;
  [product release];
  product = [p retain];
  product.delegate = self;
}

-(void)dealloc
{
  self.product = nil;
} 
```

但是，这种设计的一个潜在问题是“产品下载”只能有一个代表。如果你离开它`ChildViewController`然后回到它的（一个新实例）怎么办？它们是不同的`Product`实例，都被下载了吗？

更好的方法可能是拥有一个下载管理器单例（尽管我讨厌单例）来管理下载并使用 NSNotification/NSNotificationCenter 进行进度通知。

# c++ - 将相机指向 O(0,0,0), 45 度

> ID：11585264
> 
> 赞同：5
> 
> 时间：2012-07-20T18:49:22.307
> 
> 标签：c++, opengl, 3d, linear-algebra, openscenegraph

我在设置相机时遇到问题，使其指向原点 O(0,0,0)，与所有其他坐标轴成 45° 角，所有坐标均为正（当然应该具有相同的值）。你可以在图像中看到我得到的最接近的

![在此处输入图像描述](../Images/e38c7b07eff5c2389f9586fe20448f03.png)

但是，如您所见，`x`此处的值为负，因此相机位于`YZ`平面的错误一侧。

完整的可编译项目可以在[这个修订版的要点](https://gist.github.com/9c76f96be20d6147068e/52eed19ab66d689d82b7261c53a7a378fc45f345)中找到。

完成的相关矩阵乘法是

```
osg::Matrixd rotate_x(
        1.0, 0.0, 0.0, 0.0,
        0.0, q_cos, -q_sin, 0.0,
        0.0, q_sin, q_cos, 0.0,
        0.0, 0.0, 0.0, 1.0 
);
osg::Matrixd rotate_y(
        q_cos, 0.0, q_sin, 0.0,
        0.0, 1.0, 0.0, 0.0,
        -q_sin, 0.0, q_cos, 0.0,
        0.0, 0.0, 0.0, 1.0 
);
camera_pos = camera_pos * rotate_x;
camera_pos = camera_pos * rotate_y; 
```

在文件中`Simple.cpp`。

我试图弄清楚这是如何工作的（数学上和编程上）。我更喜欢尽可能少地依赖于openscenegraph的解决方案，更多地依赖于数学方面，因为我一开始想自己做数学，以真正掌握它是如何工作的。所以还没有四元数或其他高级的东西，这些东西在基本的线性代数大学课程中都没有教过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T23:51:12.197

你的 rotate_y 矩阵在我看来是翻转的。

从[glRotate](http://www.opengl.org/sdk/docs/man/xhtml/glRotate.xml)的旋转矩阵开始，我用 xyz = (0,1,0) 简化了结果矩阵，我得到了这个（按列主要顺序（标准 opengl 表示法）

```
 q_cos  0  q_sin   0 
 0      1  0       0 
-q_sin  0  q_cos   0
 0      0  0       1 
```

但是，您按行主要顺序提供相同的矩阵：

```
osg::Matrixd rotate_y(
        q_cos,  0.0, q_sin,  0.0,
        0.0,    1.0, 0.0,    0.0,
        -q_sin, 0.0, q_cos,  0.0,
        0.0,    0.0, 0.0,    1.0
); 
```

`-q_sin`应该是矩阵的元素 [2]，`q_sin`应该是元素 [8]，但看起来你已经翻转了它们。

* * *

编辑

* * *

OpenGL 和 OSG 通常以列主格式表示矩阵，当您看到 4x4 矩阵时，其布局如下

```
[0]    [4]     [8]     [12]
[1]    [5]     [9]     [13]
[2]    [6]     [10]    [14]
[3]    [7]     [11]    [15] 
```

其中 [0] 是数组的第一个元素，[1](http://www.opengl.org/sdk/docs/man/xhtml/glRotate.xml)是第二个元素，以此类推。

当你用 OSG 创建一个矩阵时，你定义了 16 个连续的内存元素，从 [0] 到 [15]

```
osg::Matrixd rotate_y([0], [1], [2]......,[15]); 
```

当您将命令分成 4 行时，它看起来像这样：

```
osg::Matrixd rotate_y(
   [0], [1], [2], [3],
   [4], [5], [6], [7],
   [8], [9], [10],[11],
   [12],[13],[14],[15] 
) 
```

你看到这是如何从原始列向量表示中转置的吗？您需要翻转它，因为您找到的 4x4 矩阵示例是 Internet 由**列向量**表示，而您当前正在将它们作为**行向量**上传。这并不意味着您正在阅读的内容是“错误的”，它只是以不同的表示形式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T20:31:52.103

旋转矩阵围绕原点旋转一个点。由于您将初始位置设置为`(0,0,500)`并应用 x 和 y 旋转，因此您将`(0,0,500)`围绕原点旋转点`acos(q_cos)`或`asin(q_sin)`弧度。

# javascript - Javascript基本增量和减量

> ID：11585266
> 
> 赞同：0
> 
> 时间：2012-07-20T18:49:30.117
> 
> 标签：javascript, increment, decrement

为什么不`dec()`降低价值？

```
<div id="variableTest">8</div>
<label id="incButton" onclick="inc()">+</div> </br>   
<label id="decButton" onclick="dec()">-</div> </br>
    ​

function dec() {
    var testDec = document.getElementById("variableTest").innerHTML;
    testDec--;
}

function inc() {
    var testInc = document.getElementById("variableTest").innerHTML;
    testInc++;
}​ 
```

[http://jsfiddle.net/fv6VA/8/](http://jsfiddle.net/fv6VA/8/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T18:52:05.893

`element.innerHTML`返回一个字符串，而不是一个数字。你应该使用这样的东西：

```
var element = document.getElementById("variableTest");
element_number = parseFloat(element.innerHTML);
element_number++;
element.innerHTML = element_number; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T18:52:50.967

本质上，您已经制作了 innerHTML 的副本，并且只是在 javascript 内存中递减它。您实际上还没有设置 variableTest 节点的 innerHTML。

```
function dec() {
    var testDec = document.getElementById("variableTest").innerHTML;
    testDec--;
    document.getElementById("variableTest").innerHTML = testDec;
} 
```

更新

此外，您的 HTML 也搞砸了。你需要`label`正确关闭你的

```
<div id="variableTest">8</div>
<label id="incButton" onclick="inc()">+</label> </br>   
<label id="decButton" onclick="dec()">-</label> </br> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-12-09T01:53:51.247

```
<div class="container">
<input type="button" onclick="decrementValue()" value="-" />
<input type="text" name="quantity" value="1" maxlength="2" max="10" size="1" id="number" />
<input type="button" onclick="incrementValue()" value="+" />
</div>

<script type="text/javascript">
function incrementValue()
{
    var value = parseInt(document.getElementById('number').value, 10);
    value = isNaN(value) ? 0 : value;
    if(value<10){
        value++;
            document.getElementById('number').value = value;
    }
}
function decrementValue()
{
    var value = parseInt(document.getElementById('number').value, 10);
    value = isNaN(value) ? 0 : value;
    if(value>1){
        value--;
            document.getElementById('number').value = value;
    }

}
</script> 
```

# jqplot - jqplot 调整浏览器大小时调整图表大小

> ID：11585267
> 
> 赞同：16
> 
> 时间：2012-07-20T18:49:39.383
> 
> 标签：jqplot

调整浏览器大小时，是否有一种简单的方法可以自动调整 jqplot 图表的大小？我一直在谷歌上寻找，并没有找到任何东西。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-21T00:38:41.657

[这里](http://www.jqplot.com/deploy/dist/examples/resizablePlot.html)讨论了调整 jqplots 的大小。

为了在调整浏览器大小时使其工作，请将 replot 函数与 window.resize 事件绑定：

```
$(window).resize(function() {
      plot1.replot( { resetAxes: true } );
}); 
```

运行代码：

```
$(document).ready(function(){
    var plot1 = $.jqplot ('container', [[3,7,9,1,4,6,8,2,5]], {});

    $(window).resize(function() {
          plot1.replot( { resetAxes: true } );
    });

});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script language="javascript" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jqPlot/1.0.8/jquery.jqplot.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/jqPlot/1.0.8/jquery.jqplot.min.css">

<div id="container"></div>
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-11-21T17:41:52.507

我发现如果你的图表上有很多选项，使用 replot 并不总是能给出一致的结果。我发现让复杂图形处理窗口大小调整的唯一方法是变得残酷并摧毁它并重建它。

```
function () {

    var plot;

    var renderGraph = function() {
        plot = $.jqplot('chartId', yourChartData, yourChartOptions);
    }

    renderGraph();

    var resizeGraph = function() {
        if (plot)
            plot.destroy();
        renderGraph();
    }

    $(window).resize(function() {
        resizeGraph();
    });
} 
```

# asp.net - 无法在视图状态中设置 Linq-to-sql-objects

> ID：11585271
> 
> 赞同：0
> 
> 时间：2012-07-20T18:49:52.100
> 
> 标签：asp.net, linq-to-sql

当我尝试将 Linq-to-sql-object 设置为我的视图状态时，我会得到一个运行时异常，指出我必须使对象可序列化。

我已经用谷歌搜索了我的问题，但找不到我的问题的解决方案。是否可以使这些对象可序列化？这些对象是自动生成的，因此不可能只在类之前添加一个 [Serializable] 属性，而且我在特定的 dbml 文件中找不到任何设置。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T18:57:27.870

为了把它放在Viewstate中，这个类必须被赋予[Serializable]。即使您可以简单地将该属性放在从数据库中获取的类上，我也建议您不要这样做。

您需要做的并且无论如何都应该做的是定义代表您想要放入 Viewstate 中的数据的类。然后用数据库中的数据填充它们，并根据需要在 Viewstate 中使用它们。这不仅解决了您的问题，而且将您的视图对象与数据库对象分开，以便您可以根据需要更改 Viewstate 对象，或者只要它仍然可以填充您的 Viewstate 对象，就可以更改从数据库获取数据的方式。

请参阅此处的关注点分离： [http ://en.wikipedia.org/wiki/Separation_of_concerns](http://en.wikipedia.org/wiki/Separation_of_concerns)

**编辑：**
看起来生成的类是一个部分类，所以我只是测试了创建另一个具有相同名称的部分类并将其标记为可序列化。我能够序列化该类，它包含来自两个部分类的属性。经过更多的测试，我开始遇到问题，所以虽然有可能，但它绝对与维护自己的可序列化类一样可靠。

# c++ - 使用带有 STL 容器的 boost.serialization 作为模板参数

> ID：11585273
> 
> 赞同：4
> 
> 时间：2012-07-20T18:49:57.370
> 
> 标签：c++, stl, boost-serialization

我想将 boost.serialization 与模板化容器类一起使用：

```
// MyContainer.h

template<class T> struct MyContainer {
    T t;

    template<class Archive>
    void serialize(Archive& archive, const unsigned version) {
        archive & t;
    }
}; 
```

当我使用 STL 容器作为模板参数时，例如

```
// Main.cpp
...
MyContainer<array<int,4>> mc;
std::ofstream ofs("foo.bar");
boost::archive::binary_oarchive oa(ofs);
oa << mc;
... 
```

...Visual Studio 11 抱怨以下错误消息：

```
'serialize' : is not a member of 'std::array<_Ty,_Size>' 
```

我试图在两个文件中都包含“boost/serialization/array.hpp”，但这并没有解决问题。此外，包括数组特化不是我想要的，因为容器也可以包含任何其他 STL 容器。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T03:41:36.860

虽然[serialiation/array.hpp](http://www.boost.org/doc/libs/1_50_0/boost/serialization/array.hpp)有一个`serialize()`重载 for `boost::array`，但它没有一个 for `std::array`。

您应该能够使用以下方法提供自己的`serialize()`重载[`make_array()`](http://www.boost.org/doc/libs/1_50_0/libs/serialization/doc/wrappers.html#arrays)：

```
namespace boost {
namespace serialization {

template<class Archive, class T, size_t N>
void serialize(Archive & ar, std::array<T,N> & a, const unsigned int version)
{
  ar & boost::serialization::make_array(a.data(), a.size());
}

} // namespace serialization
} // namespace boost 
```

# c# - 获取 contentpresenter 位置（大小和与所有者的偏移量）

> ID：11585278
> 
> 赞同：1
> 
> 时间：2012-07-20T18:50:19.527
> 
> 标签：c#, wpf, adorner

我需要一种方法来动态检索（不知道什么类型的 frameworkElement）、内容/项目演示者大小以及以任何形式从所有者的边缘偏移。

我需要创建一个覆盖控件内容区域的装饰器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:47:09.870

使用 VisualTreeHelper 从对象中识别 ContentPresenter/ItemPresenter（如果存在）。

使用以下代码获取偏移量：

```
presenter.TransformToVisual(control).Transform(new Point(0,0)); 
```

调用演示者任何可以为您提供大小的所需属性（实际 [高度/宽度] 等）

# java - 解析C源文件

> ID：11585279
> 
> 赞同：1
> 
> 时间：2012-07-20T18:50:22.300
> 
> 标签：java, c, regex, parsing

如果我有一个 C 源文件，并且我想在一个函数中找到一个特定的局部变量并使其成为全局变量 - 所以另一个工具能够处理 C 文件（我没有编写的工具）什么是最简单的方法做这个？我正在考虑使用正则表达式，但即使这样也有它自己的问题。这有点像用 Java 编写一个迷你 C 解析器.. 很多工作：S

是否有任何库可以帮助使这更容易？

例如，假设我想将变量“i”变成一个全局变量。用户将指定函数名称和变量名称（但不指定变量的类型 - 即“int”）。

我可以使用正则表达式来查找函数 - 当然。但是从那里我真的不知道最好的方法是什么？... CDT插件有帮助吗？

**例子：**

```
 /* 
  * add.c
  * a simple C program
  *
  */

#include <stdio.h>
#define LAST 10

int main()
{
    int i = 0;
    int sum = 0;

    for ( i = 1; i <= LAST; i++ ) {
      sum += i;
    } /*-for-*/
    printf("sum = %d\n", sum);

    return 0;
} 
```

***转换成：***

```
 /* 
  * add.c
  * a simple C program
  *
  */

#include <stdio.h>
#define LAST 10

int i = 0;

int main()
{

    int sum = 0;

    for ( i = 1; i <= LAST; i++ ) {
      sum += i;
    } /*-for-*/
    printf("sum = %d\n", sum);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T19:12:26.383

如果你只做一些简单的例子，你可以用 Perl 或一些 java regex 来破解它。它不能在复杂的程序上可靠地工作，因为您需要一个真正的解析器。

我们的[DMS Software Reengineering Toolkit](http://www.semanticdesign.com/Products/DMS/DMSToolkit.html)及其[C 前端](http://www.semanticdesigns.com/Products/FrontEnds/CFrontEnd.html)可以非常可靠地用于此目的。

DMS 提供通用程序分析和转换功能，由编程语言描述参数化。DMS 的 C Front 向 DMS 解释了 C 的精确语法（对于 C 的各种方言，包括 GCC 和 MS）；它实际上提供了一个完整的解析器，生成抽象语法树（反之亦然：来自 AST 的 C 代码生成器）这允许 DMS 准确读取 C 源文件，包括预处理。

使用 AST 形式的解析代码，您可以构建 DMS 函数和/或编写模式来查找函数定义，特别是您的目标变量。然后可以使用 DMS 代码或交替源到源的转换将变量从函数中取出，和/或插入代码以跟踪该变量的状态变化，以便可以看到它。

因此，通过 DMS 和一些自定义代码，您可以达到您想要的效果。您提供的示例使用 DMS 可能非常简单，但学习曲线仍然很长；DMS 很复杂，因为它处理的语言很复杂，您必须学习如何使用它。所以，对于新手来说，这不是一个下午的练习。

注意：您将希望对预处理程序执行此操作（否则您通常无法可靠地解析它们）。所以，这应该是你在编译之前做的事情，不应该成为最终代码的一部分。

如果要进行永久性代码更改，则需要解析未*预处理*的代码；这真是太难了。只要预处理器指令是“结构化的”，DMS 的 C 前端就可以做到这一点；其中大约 95% 是。所以现在你遇到了一个新问题：要么修复非结构化文件（一次性手动更改），要么拒绝“运气不好”无法解析的文件。

您可以使用 GCC 而不是 DMS；毕竟它有一个经过很好测试的 C 解析器。但是，它不会帮助您生成修改后的 C 代码。另一种选择是 Clang，它正在迅速成为一个很好的选择。我认为它会解析 C++；不太确定 C 或特别是您的最终用户可能使用的 C 方言（您没有说）。它有像 DMS 这样的 AST，以及一种为可能有效的代码生成“补丁”的方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T19:04:00.873

即使您能够想出一种方法来进行此类转换，我认为这也不是一个好主意。该程序将不会保持不变，因为您在构建和破坏中移动。此外，并非所有类型都是默认可构造或可复制的，因此通常无法进行转换。

您是否只对几个简单的类型感兴趣？然后将其作为解决方案的一部分。是否生成了原始代码？否则，您怎么能相信仅通过名称来识别本地对象？相同的名称也可用于不同类型的对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-21T05:17:23.597

我首先需要的是一个完整的规范，说明何时需要，为什么需要，以及如何确定何时安全这样做，而不会对程序语义产生不利影响。这是一个非常糟糕的主意。显然，那些给你分配任务的人不知道实现的复杂性，这是巨大的，或者不利的语义影响。我猜他们因此也无法提出适当的规范，这最终会让你失望。

我也会提请他们注意这次讨论，尤其是 Ira Baxter 的评论。我曾经以构建编译器为生。在论坛上学习或询问不是一项任务。

# jakarta-ee - Struts 2 FileUpload 不工作

> ID：11585284
> 
> 赞同：0
> 
> 时间：2012-07-20T18:50:43.910
> 
> 标签：jakarta-ee, file-upload, struts2

我有一个 struts 2 应用程序，其中 2 个页面有 struts 文件上传。一个可以完美运行，而另一个则无法正常工作。我给了我“字段“secImage”的无效字段值。

**这是JSP的代码**

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@taglib prefix="s" uri="/struts-tags" %>
<%@taglib uri="http://displaytag.sf.net" prefix="display" %>

<html>
<head>
</head>
<body>
    <%@ include file="header.jsp" %>

    <s:form action="Test" method="POST" style="width:90%;">
           Another form here......
    </s:form>
    <s:form action="Test" method="POST" enctype="multipart/form-data">
        <s:push value="secVul">
            <s:hidden name="vulId" />
            <s:hidden name="scanHistory.scanId" />
            <s:textfield name="protocol" label="Protocol" style="width: 80%;" />
            <s:textarea name="description" label="Description" style="width: 80%;" />
            <s:textarea name="solution" label="solution" />
            <more form elements here>sdfasdfasdfasd

            <s:file name="secImage" label="Image to Upload" size="40"/>
            <s:submit value="Add/Update" align="center"/>
        </s:push>
    </s:form>
<%@ include file="footer.jsp" %>
</body>
</html> 
```

**这是struts的配置**

```
<interceptor-ref name="fileUpload">
<param name="maximumSize">909715200</param>
<param name="allowedTypes">
text/xml,application/octet-stream,image/png,image/gif,image/jpeg,image/pjpeg
                </param>
            </interceptor-ref>
            <interceptor-ref name="defaultStack" />

    <action name="Test" method="saveOrUpdate" class="com.Test">
        <result name="success" type="redirect">listVulsMGR</result>
        <result name="input">/WEB-INF/pages/secVuls.jsp</result>
        <result name="error">/WEB-INF/pages/secVuls.jsp</result>
    </action> 
```

**动作类代码：**

```
public class Test extends ActionSupport implements ModelDriven<Test>, Preparable,ServletRequestAware {

private HttpServletRequest servletRequest;
private static final Logger logger = Logger.getLogger(ListVulsActions.class);

private File secImage;
private String secImageContentType;
private String secImageFileName;

private HashMap userFilters = new HashMap();
public Test() {

}

public String saveOrUpdate() {
    try {

        ServletContext context = ServletActionContext.getServletContext();
        String filePath = context.getInitParameter("UploadDirectory");
        logger.debug("Server path:" + filePath);
        logger.debug("this.secImageFileName " + this.secImageFileName);

        File fileToCreate = new File(filePath, this.secImageFileName);

        FileUtils.copyFile(this.secImage, fileToCreate);

}           
        addActionMessage("successfully added/updated.");
        return SUCCESS;
    } catch (Exception ex) {
        logger.error("Error in Test", ex);
        addActionError("Error occured in Test. Please contact your administrator.\n" + ex.getMessage());
        return ERROR;
    }

}

public File getSecImage() {
            System.out.println(secImage.getName());
    return secImage;
}

/**
 * @param secImage the secImage to set
 */
public void setSecImage(File secImage) {
    System.out.println(secImage.getName());
    this.secImage = secImage;
}

/**
 * @return the secImageContentType
 */
public String getSecImageContentType() {
    System.out.println(secImageContentType);
    return secImageContentType;
}

/**
 * @param secImageContentType the secImageContentType to set
 */
public void setSecImageContentType(String secImageContentType) {
    System.out.println(secImageContentType);
    this.secImageContentType = secImageContentType;
}

/**
 * @return the secImageFileName
 */
public String getSecImageFileName() {
    System.out.println(secImageFileName);
    return secImageFileName;
}

/**
 * @param secImageFileName the secImageFileName to set
 */
public void setSecImageFileName(String secImageFileName) {
    System.out.println(secImageFileName);
    this.secImageFileName = secImageFileName;
}

@Override
public void setServletRequest(HttpServletRequest servletRequest) {

    this.servletRequest = servletRequest;

} 
```

* * *

不知道我在这里做错了什么。将不胜感激任何帮助/提示

--

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T05:52:14.243

取另一个变量名是`<s:file name`'s type 文件类型 generate setter 和 getter `private File secImage; getter &setters()`对`FileUtils.copyFile(this.secImage, fileToCreate);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-21T12:03:12.863

1 - 检查 JSP 中的表单行必须包含：**enctype="multipart/form-data"**

例如：`<s:form theme="simple" enctype="multipart/form-data" >` *注意：如果您的 JSP 扩展，则父级也需要包含该行。*

2 - 检查您是否正确定义了 setter 和 getter 方法。[struts2文件上传问题](http://struts.apache.org/docs/file-upload.html)

希望这有帮助。

# c# - WIN RT 中是否存在二进制序列化程序？

> ID：11585289
> 
> 赞同：5
> 
> 时间：2012-07-20T18:51:05.587
> 
> 标签：c#, serialization, microsoft-metro, windows-runtime

我正在寻找二进制序列化程序，因为在我的应用程序中，用户可以根据需要发现许多项目。假设用户发现了 100 多个项目（这些项目是从 Internet 下载的），当应用程序暂停时，应用程序无法找到最后一个项目，因为不存在。

在应用程序中发生这种情况是因为我总是加载前 10 个项目。但在 Metro 原则中，应用程序需要恢复所有内容。所以我在考虑使用二进制序列化程序快速保存这些对象。但是我找不到任何可以帮助我的课程。

编辑：

```
public abstract class BaseItem
{
    ...

    public BaseGroup Group { get; set;}
}

public abstract class BaseGroup
{
    public IEnumerable<BaseItem> Items { get; set; }
}

public sealed class FeedDataGroup
{
    ...
}

public sealed class FeedItem
{
    ...
} 
```

我打算序列化一个 ObservableCollection。如果我使用 JSON，我构建课程的方式会有什么问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T21:32:45.373

Microsoft 示例代码使用 DataContractSerializer

```
 // Serialize the session state synchronously to avoid asynchronous access to shared
        // state
        MemoryStream sessionData = new MemoryStream();
        DataContractSerializer serializer = new DataContractSerializer(typeof(Dictionary<string, object>), _knownTypes);
        serializer.WriteObject(sessionData, _sessionState);

        // Get an output stream for the SessionState file and write the state asynchronously
        StorageFile file = await ApplicationData.Current.LocalFolder.CreateFileAsync(sessionStateFilename, CreationCollisionOption.ReplaceExisting);
        using (Stream fileStream = await file.OpenStreamForWriteAsync())
        {
            sessionData.Seek(0, SeekOrigin.Begin);
            await sessionData.CopyToAsync(fileStream);
            await fileStream.FlushAsync();
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T18:57:10.437

~~System.Runtime.Serialization 中有[BinaryFormatter](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.formatters.binary.binaryformatter.aspx)类，可以按照您的描述进行操作。我没有专门使用 WinRT 的经验，但该课程在 .Net 4.5 中可用，因此相信您可以使用它。~~

下面的批评是公平的：我不仅在上面的 .Net 4.5 之后省略了“核心”这个词（相当严重地改变了我的信息的含义），而且我的评论基于 System.Runtime.Serialization 的其他成员的事实进入 .Net 4.5 *Core*。查看[4.5 和 core 之间的差异列表](http://www.themissingdocs.net/wordpress/?p=428)，我发现 BinaryFormatter 特别被排除在外。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T19:51:59.113

using System.Runtime.Serialization.Json 命名空间中有一个 Json 序列化程序，如果这是您想要的，它会序列化为 JSON。要使用序列化器，您应该将任何将被序列化的数据标记为数据合同

```
[DataContract]
public class Serializable
{
   [DataMember]
   Public string SerializableMember{get;set;}

   Public string NonSerializedMember{get;set;}
} 
```

您现在可以使用 DataContractJsonSerializer 将 Object 序列化为 JSON 流。创建的 JSON 结构将如下所示： {"SerializableMember" : {value of data} } 没有存储类信息，但成员名称和值都将从类的可序列化成员存储到 json 对象。JSON 比 xml 更紧凑，因此更适合大型数据集。我怀疑微软确实从 Metro 中省略了二进制序列化程序，因为 ARM 处理器既可以是 Big Endian 也可以是 Little Endian，并且程序员无法控制这件事。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-22T12:51:16.670

一个选项是用于二进制序列化的[SharpSerializer 。](https://www.nuget.org/packages/SharpSerializer/)它的用法非常简单。

# vbscript - 属性正则表达式在 QTP 中如何工作？

> ID：11585291
> 
> 赞同：1
> 
> 时间：2012-07-20T18:51:19.443
> 
> 标签：vbscript, qtp

我有一些代码：

```
<!-- language: lang-vb -->

Set oWebEdit = Browser("").Page("").WebEdit("")
'Get the TOProperties collection
Set TOProps = oWebEdit.GetTOProperties()
Dim i, iCount
iCount = TOProps.Count - 1
'Loop through all the properties
For i = 0 To iCount
    'Get Name of the property
    sName = TOProps(i).Name

    'Get the value of the property
    sValue = TOProps(i).Value

    'Is the value a regular expression
    isRegularExpression = TOProps(i).RegularExpression

    'Display the values
    Msgbox sName & "->" & sValue & "->" & isRegularExpression
Next 
```

我的问题：当我手动将对象添加到对象存储库 (OR) 时（例如：从 Google 搜索页面：webButton 搜索），我看到它的`name`、`type`和`htmltag`作为 OR 中的属性。

在这段代码中，如何`isRegularExpression`考虑？这个表达式如何得到回答？是否还有其他在 OR 中不可见但可以找到的属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-22T06:08:12.893

您可以更改是否将属性的值视为对象存储库中的正则表达式，方法是首先单击选中属性的**配置值**按钮

![配置值](../Images/7c0647a1671c8135280850cf081932e1.png)

然后检查**正则表达式**复选框

![正则表达式](../Images/19b77638820a1fce226f510e5e178f43.png)

* * *

**注意：** OP询问为什么默认情况下`RegularExpression`是`True`。我检查了一下，似乎对于 Win32 对象（我检查了`Window`和`WinButton`）我们得到`False`了，而对于 Web 对象（我检查了`Browser`和`Page`）`WebEdit`我们得到了`True`. 这似乎是 QTP 中的一个缺陷。

# html - 菜单在 IE8 上向左移动，但在 IE9 和其他浏览器上保持正确位置

> ID：11585292
> 
> 赞同：0
> 
> 时间：2012-07-20T18:51:20.057
> 
> 标签：html, css, firefox, google-chrome, internet-explorer-8

我在 CSS 中有一个代码，例如

CSS

```
#menu_option { width:100px; margin-left:-50px; } 
```

在 Mozila、Google Chrome 和 IE9 中，该菜单位于此代码的右侧位置，但在 IE9 中，它向左移动并缩小图像。所以我申请了

```
#menu_option { width:100px; margin: 0; } 
```

这段代码在 IE8 上运行正常，但在 Mozila、Chorome 和 IE9 上菜单向右移动。

请任何人建议我如何应用这两个代码或在 CSS 中将两者合并在一起并 `#menu_option { width:100px; margin: 0; }`为 IE8 和`#menu_option { width:100px; margin-left:-50px; }`其他人指定。

这是我在申请时在 IE8 中获得的图片 `#menu_option { width:100px; margin-left:-50px; }`

![在此处输入图像描述][1]

但在其他（IE9、Chrome 和 Mozila）中，我得到了，这是正确的。

![在此处输入图像描述][2]

如果我应用边距 0，那么我将在 IE8 上获得第二张照片，而在其他人上，图片集正在向右移动

![在此处输入图像描述][3]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T19:13:24.730

您需要静态宽度有什么特别的原因吗？除了删除它之外，它还可能有助于相对定位您的元素，使用`#menu_option {position: relative; left: 50px;}`，这取决于您将此菜单选项放入的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T19:01:57.557

我认为您要求的是特定于 IE 的评论代码。

```
<!--[if IE 8]>
<style type="text/css">
etc.
</style>
<![endif]--> 
```

尽管我强烈建议不要使用这样的依赖于浏览器的代码，除非作为最后的手段。Rodolfo 关于分隔 div 的建议确实是最好的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T18:55:22.920

根据经验，如果您想要良好的浏览器兼容性，请不要将宽度和边距/填充（左侧或右侧）放在同一元素中（与高度和边距/填充顶部/底部相同）。IE 倾向于在宽度内包含边距和填充（和边框），而其他浏览器则没有。尝试在 #menu_option 周围放置一个容器`<div>`，并将宽度放在那里，并将边距留在内部元素中，看看它是否会变得更好。

我同意为此添加一个额外的元素很糟糕，但只要看看它是否有效，然后你就可以玩弄这些东西了。

# javascript - 修改jQuery脚本让我选择页面入口选择列表的默认值

> ID：11585295
> 
> 赞同：0
> 
> 时间：2012-07-20T18:51:27.810
> 
> 标签：javascript, jquery

我使用 Mobiscroll jQuery 脚本为用户提供更漂亮的输入。在页面加载时，选择列表的第一个选项显示为已选中。我应该在页面入口处的现有代码中添加什么，（例如）第三个值显示为默认值？

我试过`selecte="selected"`了，但它不起作用。

这是 jQuery 脚本

```
$(function(){
    $('#city').scroller({
        preset: 'select',
        theme: 'android-ics',
        display: 'inline',
        mode: 'scroller',
    });
}); 
```

这是选择框的选项

```
<select id="city" class="cities" data-role="none" name="City">
<option value="">All</option>
<option value="1">Atlanta</option>
<option value="2">Berlin</option>
<option value="3">Boston</option>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T18:56:51.433

您可以通过执行以下操作轻松地从 jQuery 设置值：

```
var defaultValue = 3;
$("#city").val(defaultValue);​ 
```

这里的“3”代表下拉列表中的波士顿，这是一个证据：

[http://jsfiddle.net/6mj8n/5/](http://jsfiddle.net/6mj8n/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T18:56:07.500

使用`$('#city').val('3');`将把第三个选项“波士顿”作为选择例如

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T03:43:31.457

在这种情况下，我认为 vanilla DOM 方法是我要使用的：

```
$('#city')[0].options.selectedIndex = 3; 
```

应该提到的是，在初始化 mobiscroll*之前应该放置这个和其他解决方案。*mobiscroll 的工作演示：http: [//jsfiddle.net/DCaHK/1/](http://jsfiddle.net/DCaHK/1/)

...进一步考虑，您添加`selected`选项的第一个建议应该有效。更新了我的演示来做到这一点。自动完成可能会阻止它在某些浏览器中正常工作，因此您的问题可能只是您需要关闭自动完成：

```
<form autocomplete="off">
    <select id="city" class="cities" data-role="none" name="City">
        <option value="">All</option>
        <option value="1">Atlanta</option>
        <option value="2" selected>Berlin</option>
        <option value="3">Boston</option>
    </select>
</form> 
```

# ruby-on-rails - 未初始化的常量 RAILS_DEFAULT_LOGGER

> ID：11585296
> 
> 赞同：7
> 
> 时间：2012-07-20T18:51:37.937
> 
> 标签：ruby-on-rails, redmine, mylyn, redmine-plugins

我正在尝试在 redmine 中安装一个插件，mylyn。

我收到以下错误：

```
uninitialized constant RAILS_DEFAULT_LOGGER

    0   /home/redmine/plugins/redmine-plugin/init.rb    3   
    1   /home/redmine/lib/redmine/plugin.rb     129     in `load'
    2   /home/redmine/lib/redmine/plugin.rb     120     in `each'
    3   /home/redmine/lib/redmine/plugin.rb     120     in `load'
    4   /home/redmine/config/initializers/30-redmine.rb     13  
    5   /usr/lib64/ruby/gems/1.8/gems/railties-3.2.6/lib/rails/engine.rb    588     
    6   /usr/lib64/ruby/gems/1.8/gems/railties-3.2.6/lib/rails/engine.rb    587     in `each'
    7   /usr/lib64/ruby/gems/1.8/gems/railties-3.2.6/lib/rails/engine.rb    587     
    8   /usr/lib64/ruby/gems/1.8/gems/railties-3.2.6/lib/rails/initializable.rb     30  in `instance_exec'
    9   /usr/lib64/ruby/gems/1.8/gems/railties-3.2.6/lib/rails/initializable.rb     30  in `run'
    10  /usr/lib64/ruby/gems/1.8/gems/railties-3.2.6/lib/rails/initializable.rb     55  in `run_initializers'
    11  /usr/lib64/ruby/gems/1.8/gems/railties-3.2.6/lib/rails/initializable.rb     54  in `each'
    12  /usr/lib64/ruby/gems/1.8/gems/railties-3.2.6/lib/rails/initializable.rb     54  in `run_initializers'
    13  /usr/lib64/ruby/gems/1.8/gems/railties-3.2.6/lib/rails/application.rb   136     in `initialize!'
    14  /usr/lib64/ruby/gems/1.8/gems/railties-3.2.6/lib/rails/railtie/configurable.rb  30  in `send'
    15  /usr/lib64/ruby/gems/1.8/gems/railties-3.2.6/lib/rails/railtie/configurable.rb  30  in `method_missing'
    16  /home/redmine/config/environment.rb     19  
    17  /usr/lib/ruby/gems/1.8/gems/passenger-3.0.12/lib/phusion_passenger/classic_rails/application_spawner.rb     222     in `require'
    18  /usr/lib/ruby/gems/1.8/gems/passenger-3.0.12/lib/phusion_passenger/classic_rails/application_spawner.rb     222     in `preload_application'
    19  /usr/lib/ruby/gems/1.8/gems/passenger-3.0.12/lib/phusion_passenger/classic_rails/application_spawner.rb     181     in `initialize_server'
    20  /usr/lib/ruby/gems/1.8/gems/passenger-3.0.12/lib/phusion_passenger/utils.rb     572     in `report_app_init_status'
    21  /usr/lib/ruby/gems/1.8/gems/passenger-3.0.12/lib/phusion_passenger/classic_rails/application_spawner.rb     174     in `initialize_server'
    22  /usr/lib/ruby/gems/1.8/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server.rb   204     in `start_synchronously'
    23  /usr/lib/ruby/gems/1.8/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server.rb   180     in `start'
    24  /usr/lib/ruby/gems/1.8/gems/passenger-3.0.12/lib/phusion_passenger/classic_rails/application_spawner.rb     149     in `start'
    25  /usr/lib/ruby/gems/1.8/gems/passenger-3.0.12/lib/phusion_passenger/spawn_manager.rb     219     in `spawn_rails_application'
    26  /usr/lib/ruby/gems/1.8/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server_collection.rb    132     in `lookup_or_add'
    27  /usr/lib/ruby/gems/1.8/gems/passenger-3.0.12/lib/phusion_passenger/spawn_manager.rb     214     in `spawn_rails_application'
    28  /usr/lib/ruby/gems/1.8/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server_collection.rb    82  in `synchronize'
    29  /usr/lib/ruby/gems/1.8/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server_collection.rb    79  in `synchronize'
    30  /usr/lib/ruby/gems/1.8/gems/passenger-3.0.12/lib/phusion_passenger/spawn_manager.rb     213     in `spawn_rails_application'
    31  /usr/lib/ruby/gems/1.8/gems/passenger-3.0.12/lib/phusion_passenger/spawn_manager.rb     132     in `spawn_application'
    32  /usr/lib/ruby/gems/1.8/gems/passenger-3.0.12/lib/phusion_passenger/spawn_manager.rb     275     in `handle_spawn_application'
    33  /usr/lib/ruby/gems/1.8/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server.rb   357     in `__send__'
    34  /usr/lib/ruby/gems/1.8/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server.rb   357     in `server_main_loop'
    35  /usr/lib/ruby/gems/1.8/gems/passenger-3.0.12/lib/phusion_passenger/abstract_server.rb   206     in `start_synchronously'
    36  /usr/lib/ruby/gems/1.8/gems/passenger-3.0.12/helper-scripts/passenger-spawn-server  99 
```

这个常量被弃用了？如何更换？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-21T09:18:23.873

1.  打开 /home/redmine/plugins/redmine-plugin/init.rb

2.  将“RAILS_DEFAULT_LOGGER.info”更改为“::Rails.logger.info”。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-05-25T16:54:32.090

未来注意事项：RAILS_DEFAULT_LOGGER 在 3.x 版本中已被弃用。

现在您可以使用：

```
Rails.logger.info 
```

# c# - 无法加载文件或程序集 版本不准确

> ID：11585298
> 
> 赞同：0
> 
> 时间：2012-07-20T18:51:40.897
> 
> 标签：c#, .net, asp.net-mvc, filenotfoundexception, s#arp-architecture

我正在使用 MigratorDotNet 进行迁移。我给它一个字符串给我的 Assembly `My_Assembly`，它是建立在 Sharp Arch v2 上的。Sharp Arch v2 基于 Fluent Nhibernate 1.3.0.727 构建。

我的项目使用的是**1.3.0.737**

MigratorDotNet 调用时出现以下错误`Assembly.GetExportedTypes`：

```
System.IO.FileNotFoundException: Could not load file or assembly 'FluentNHibernate, Version=1.3.0.727, Culture=neutral, PublicKeyToken=8aa435e3cb308880' or one of its dependencies. The system cannot find the file specified. 
```

我熟悉 BindingRedirects，但不希望更改 MigratorDotNet 的源代码（它不引入外部配置）。

有没有办法可以强制使用新版本并防止 FileNotfoundException？

PS 我知道有很多类似措辞的问题，但这些问题通常通过绑定重定向、确保 Copy Local = true、向 GAC 添加程序集等来解决。我认为这个问题更通用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T17:49:58.557

我不想这么说，但我认为你将不得不忍受绑定重定向。我自己还没有找到一种方法来做你所要求的，但很想看看是否有一个。

# php - 购物车数组和会话

> ID：11585299
> 
> 赞同：1
> 
> 时间：2012-07-20T18:51:41.723
> 
> 标签：php, arrays, session

好的，我有这个问题。我正在尝试将产品添加到购物车作为选项颜色等，但我似乎无法正确处理。如果我只是点击“添加到购物车”，它每次都会计数，但如果我改变颜色，它就会开始出错。帮助，男孩和女孩！已经为此工作了一段时间。

```
if(isset($_POST['submit'])){
                       $id = $_POST['id'];
                       $sleeve = $_POST['sleeve'];
                       $colour = $_POST['colour'];
                       $size = $_POST['size'];
                       $action = $_POST['action'];
                       $quantity = 1;
                       }
                       if(!isset($_SESSION['cart'][$id])){ 
                             $_SESSION['cart'][$id] = array($id, $colour, $size, $quantity);      
                       }
                          else{
                                if(isset($_SESSION['cart'][$id])){ // if the session as already been set then..
                                       while(list($key, $value) = each($_SESSION['cart'])){ // while loop to chech to content of the session..
                                              if($value[0] == $id && $value[1] == $colour && $value[2] == $size){ // checking to see if the session content is the same..
                                                    $quantity = $value[3] +=1;
                                                    $_SESSION['cart'][$id] = array($id, $colour, $size, $quantity); // if it is the same then add this..
                                                 }// if is ==
                                                    else{
                                                         $quantity +=1;
                                                         $_SESSION['cart'][$id][] = array($id, $colour, $size, $quantity); // is session is not the same do this..
                                                        }//else if it is not ==

                                             }// while
                                       }// if isset
                               }// else isset session 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:24:55.563

似乎您正在检查购物车中的每个项目与一个项目，如果当前项目将在第一次迭代时匹配，那么它不应该退出循环并设置该项目存在的标志，因此在循环之后，增加项目数量，否则在循环后添加另一个实例。

但是，当您添加另一个产品实例并将通过您的 if 部分进行检查时，您添加具有不同颜色的产品的其他实例的方式仍然无法工作。

在这里，您要针对 $id 键插入项目：

```
 if(!isset($_SESSION['cart'][$id])){ 
                         $_SESSION['cart'][$id] = array($id, $colour, $size, $quantity);      
                   } 
```

在其他部分中，当项目 ID 相同但属性不同时，您将产品添加到购物车的另一个​​子数组中：

```
$_SESSION['cart'][$id][] = array($id, $colour, $size, $quantity); // is session is not the same do this.. 
```

因此，您应该将每个产品/项目添加为：

```
$_SESSION['cart'][$id][] = array($id, $colour, $size, $quantity); 
```

在这两种情况下，要么是产品的第一个变体，要么是其他变体。

但是，如果您的价格因变体而异，则为每个项目的每个变体使用不同的产品实例 ID。

如果我在任何时候不清楚，请询问，如果我还没有理解您的问题，请告诉我。

# sql - 有什么方法可以让 postgresql 报告连接的结果？

> ID：11585301
> 
> 赞同：2
> 
> 时间：2012-07-20T18:51:49.077
> 
> 标签：sql, postgresql, join

在其他统计软件 (STATA) 中，当您在两个单独的表之间执行连接时，可以选择报告连接结果

例如，如果您在列上将一个表与另一个表连接，并且第二个表具有非唯一值，则它会报告这一点。

同样，如果您执行内连接，它会报告从两个表中删除的行数，如果您执行左外连接或右外连接，它会让您知道有多少行不匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T12:44:51.643

它需要一个讨厌的外部连接。这是 CTE 版本：

```
-- Some data
CREATE TABLE bob
        ( ID INTEGER NOT NULL
        , zname varchar
        );
INSERT INTO bob(id, zname) VALUES
 (2, 'Alice') ,(3, 'Charly')
,(4,'David') ,(5, 'Edsger') ,(6, 'Fanny')
        ;
CREATE TABLE john
        ( ID INTEGER NOT NULL
        , zname varchar
        );
INSERT INTO john(id, zname) VALUES
 (4,'David') ,(5, 'Edsger') ,(6, 'Fanny')
,(7,'Gerard') ,(8, 'Hendrik') ,(9, 'Irene'), (10, 'Joop')
        ;

 --
 -- Encode presence in bob as 1, presence in John AS 2, both=3
 --
WITH flags AS (
        WITH b AS (
                SELECT 1::integer AS flag, id
                FROM bob
                )
        , j AS (
                SELECT 2::integer AS flag, id
                FROM john
                )
        SELECT COALESCE(b.flag, 0) + COALESCE(j.flag, 0) AS flag
        FROM b
        FULL OUTER JOIN j ON b.id = j.id
        )
SELECT flag, COUNT(*)
FROM flags
GROUP BY flag; 
```

结果：

```
CREATE TABLE
INSERT 0 5
CREATE TABLE
INSERT 0 7
 flag | count 
------+-------
    1 |     2
    3 |     3
    2 |     4
(3 rows) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T18:59:16.443

据我所知，在 Postgres 中没有这样做的选项，尽管您可以通过查看估计值来猜测。

计算丢失的行需要您计算所有行，因此数据库通常会尽量避免这样的事情。

我能想到的选项：

*   编写多个查询
*   进行完整的外部联接并过滤结果（也许使用子查询......想不出一个总是很容易工作的好方法）
*   使用可写的复杂表表达式来记录中间结果

# javascript - Javascript 在 asp.net 页面上写入/渲染图像

> ID：11585302
> 
> 赞同：0
> 
> 时间：2012-07-20T18:51:49.470
> 
> 标签：javascript

我正在调用一个javascript函数（函数test（）），它调用一个返回html脚本的url。我想将它呈现到页面上。

我正在使用它，但是当我去查看源代码时，我没有看到任何图像..

```
function test()
{
    document.write('<SCR'+'IPT SRC="http://demoweb.com/renderimage;type=a;num='+ 1000 +'?" type="text/javascript"></SCR'+'IPT>');
} 
```

这将返回 URL [http://demoweb.com/renderimage;type=a;num=1000](http://demoweb.com/renderimage;type=a;num=1000)？（如果我将其粘贴到浏览器中）

```
document.write("<img src='http://demoweb/?ct=0:abg22&adv=43nn3gg&fmt=2' width='1' height='1' border='0'/>"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T18:57:20.607

浏览器的查看源显示从服务器下载的 HTML，而不是任何脚本运行后页面的 DOM。为此，您将使用 DOM 浏览器，例如 Firefox 的 DOM Inspector 或 Firebug，或 IE 的开发者工具。

不推荐使用 ，`document.write`因为它会导致重新解析文档。最好使用 DOM 操作方法。

试试这个：

```
var img = document.createElement("img");
img.src = "http://demoweb/?ct=0:abg22&adv=43nn3gg&fmt=2";

var imgParent = document.getElementById("whatever");
imgParent.appendChild( img ); 
```

# objective-c - 无法弄清楚为什么 NSMutableArray addObject 不起作用

> ID：11585303
> 
> 赞同：-1
> 
> 时间：2012-07-20T18:51:52.183
> 
> 标签：objective-c, nsmutablearray

> **可能重复：**
> [NSMutableArray addObject 不工作](https://stackoverflow.com/questions/1827058/nsmutablearray-addobject-not-working)

我有一个 NSMutableArray 在我的 .h 文件中声明为 (nonatomic,retain) ，并正确合成。tempRandomWord 是一个始终填充的 NSString。但是，count 始终返回 0。任何想法为什么？

```
[pastWords addObject:tempRandomWord];
int count=[pastWords count];
NSLog(@"%i",count); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T19:31:10.413

您可能忘记了初始化数组。您在 viewDidLoad 或其他地方需要这条线

```
pastWords = [NSMutableArray array]; 
```

我个人喜欢把它们放在需要的地方，如下所示：

```
if (!pastWords) {
    pastWords = [NSMutableArray array];
}

[pastwords addObject:object]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T20:06:40.353

您的数组未初始化。只需在读取/使用属性之前在某处添加延迟初始化。

```
self.pastWords=self.pastWords?self.pastWords:[NSMutableArray array]; 
```

或者如果您直接使用 iVar：

```
pastWords=pastWords?pastWords:[NSMutableArray new]; 
```

或 init 中的正常初始化

如果您从类外部分配该属性，您可能需要调用 mutableCopy 以确保使用可变数组，即使分配了 NSArray 也是如此。

# ruby-on-rails - Rails 3：导致“未定义的局部变量或方法”的自定义路由

> ID：11585305
> 
> 赞同：0
> 
> 时间：2012-07-20T18:52:00.623
> 
> 标签：ruby-on-rails, routing

在 routes.rb 中：

```
resources :conversations, only: [:index, :show, :new, :create, :destroy] do
  collection do
    get :inbox
  end 
```

在我的控制器中：

```
def inbox
  <stuff>
end 
```

在我看来（使用haml）：

```
=link_to 'Inbox', inbox_conversations, :id => 'load-inbox', :class => 'message-control-highlight', :remote => true 
```

我在页面加载时收到以下错误：

```
undefined local variable or method `inbox_conversations' for #<#<Class:0x3d51470>:0x3d59198> 
```

在我看来，如果我用“#”替换 inbox_conversations，我不会在页面加载时遇到任何错误。我尝试在 inbox_conversation 中附加可能的类，例如 current_user 和 current_user.mailbox。我还尝试将路由从集合更改为成员 - 甚至将其从任何集合/成员块中取出。这里可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T18:53:48.610

尝试使用`inbox_conversations_path`或`inbox_conversations_url`

`=link_to 'Inbox', inbox_conversations_path, :id => 'load-inbox', :class => 'message-control-highlight', :remote => true`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T18:53:56.800

您需要附加`_path`或添加`_url`到您的路线，例如

```
= link_to 'Inbox', inbox_conversations_path 
```

有关所有详细信息，请参阅完整的 Rails 路由指南：

[http://guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

# php - 接口可以强制类必须使用哪些特征？

> ID：11585310
> 
> 赞同：3
> 
> 时间：2012-07-20T18:52:17.640
> 
> 标签：php

我的问题很简单，一个接口可以强制一个类必须使用哪些特征吗？

我问的原因是我想象一组命名空间的接口引用具有相同名称的特征，这些特征存在于不同命名空间中的不同实现中，以在整个应用程序中创建复杂但通用的操作。-说得通？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:02:49.517

Traits 本质上是复制粘贴的代码，不应从接口或继承的角度来考虑。接口不能强制执行特征。但是，特征可以用作接口的实现。

您可以拥有由其他特征组成的特征。或者，您可以拥有一个使用多个特征的抽象基类。这两种解决方案都可能是您正在寻找的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T19:03:49.310

不，你不能那样做。

接口只需要一个类来实现方法。它对这种打包的实现（特征）是否存在一无所知。

# javascript - 多按键切换

> ID：11585312
> 
> 赞同：0
> 
> 时间：2012-07-20T18:52:28.783
> 
> 标签：javascript, button, switch-statement

当我单击 .edit-one-button 按钮时，我想删除 .widget 框的样式。我有六个盒子和六个按钮。当我尝试使用下面的 javascript 时。单击一个按钮将删除所有框的样式。我应该怎么做才能只影响单击按钮时按钮所在的框？

```
 <script type="text/javascript">
    var divheight;
     $(".edit-one-button").click(function () {
      var btnname = $(this).val();
      if (btnname == 'Edit') {
        divheight = $('.widget').attr('style');
        $('.widget').removeAttr('style');
        $(this).nextUntil('.edit-one-button').toggle();
      }
      else {
        $(this).nextUntil('.edit-one-button').toggle();
        $('.widget').attr('style', divheight);
      }
    });
  </script> 
```

HTML：

```
 <div class="eq-height2 widget>
        <header>
        <h2>Contact1</h2>
        </header>
        <input type="submit" value="Edit" class="edit-one-button/> 
        <fieldset id="Fieldset1">
          blabla
        </fieldset>
        <fieldset id="Fieldset2">
          blabla
        </fieldset>
    </div>

<div class="eq-height2 widget>
        <header>
        <h2>Contact2</h2>
        </header>
        <input type="submit" value="Edit" class="edit-one-button/> 
        <fieldset id="Fieldset3">
          blabla
        </fieldset>
        <fieldset id="Fieldset4">
          blabla
        </fieldset>
    </div>

<div class="eq-height2 widget>
        <header>
        <h2>Contact3</h2>
        </header>
        <input type="submit" value="Edit" class="edit-one-button/> 
        <fieldset id="Fieldset5">
          blabla
        </fieldset>
        <fieldset id="Fieldset6">
          blabla
        </fieldset>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T18:58:06.560

尝试改变：

```
$('.widget').removeAttr('style'); 
```

至：

```
$(this).closest('.widget').removeAttr('style'); 
```

# jquery - 如何在 append 方法中执行 if 语句

> ID：11585318
> 
> 赞同：2
> 
> 时间：2012-07-20T18:52:41.123
> 
> 标签：jquery, append

我有一个显示弹出窗口的功能，里面有 8 个缩略图。在弹出窗口中有一个默认选择的缩略图。

我想要做的是，在我的循环中，我想检查缩略图 rel 属性（1 到 8）。如果它与默认选择的匹配，我想添加一个选定状态。

生成 8 个缩略图的代码：

```
jQuery.each(videos[id], function(i, val) {
    $ul.append("<li><a rel='"+ (i+1) + "'><img src=" + val + "></a></li>");
}); 
```

我也有包含从 1 到 8 的数字的变量（这是应该具有所选类的变量）

```
alreadySelectedThumb[id] 
```

所以基本上，逻辑（用词）是：

循环遍历视频数组，如果*a*标签的 rel 属性等于*alreadySelectedThumb[id]*则将选择的类添加到该*标签*。

因为它在一个附加函数中，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T18:58:43.493

这看起来像是[三元运算符](http://en.wikipedia.org/wiki/Ternary_operation)的工作！

```
jQuery.each(videos[id], function(i, val) {
    var class = (i+1) === alreadySelectedThumb[id] ? 'myClass' : '';
    $ul.append("<li><a rel='"+ (i+1) + "' class='"+ class +"' ><img src=" + val + "></a></li>");
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T18:57:06.280

一种可能性是反转您的附加调用，使新对象成为返回，

```
var $image = $("<li><a rel='"+ (i+1) + "'><img src=" + val + "></a></li>").appendTo($ul);

if(whatever){
   $image.children("a").addClass("selected");
} 
```

它使代码更整洁 IMO。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T18:57:14.007

我认为您正在寻找[三元运算符](http://en.wikipedia.org/wiki/Ternary_operation#C.2C_Java.2C_JavaScript)，它只是 Javascript（以及许多其他语言）的一部分。

```
if (videos[id] == alreadySelectedThumb[id]) {
    something = "FOO";
} else {
    something = "BAR";
} 
```

而是写成：

```
something = (videos[id] == alreadySelectedThumb[id]) ? "FOO" : "BAR"; 
```

可以将其插入到这样的字符串分配中：

```
$ul.append("<li" + 
  ((videos[id] == alreadySelectedThumb[id]) ? ' class="selected" ' : '') +
  "><a rel='" + (i+1) + "'><img src=" + val + "></a></li>"); 
```

（对不起，这对我来说真的很乱，但我相信这就是你要找的东西）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-20T18:58:20.803

```
jQuery.each(videos[id], function(i, val) {
    var appendstr ="";
    if(/*select condition is true*/)
     appendstr  = "<li><a rel='"+ (i+1) + "'><img src=" + val + " class='selectclass'></a></li>"
    else
    appendstr  = "<li><a rel='"+ (i+1) + "'><img src=" + val + "></a></li>"
    $ul.append(appendstr);
}); 
```

# android - 最佳移动数据库同步/复制

> ID：11585324
> 
> 赞同：1
> 
> 时间：2012-07-20T18:52:58.493
> 
> 标签：android, ios, database, sqlite, synchronization

移动数据库同步的最佳开源解决方案是什么？我在 Android/iOS 上使用 SQLite。现在我正在使用我自己的同步和交换服务，但它有缺陷，我正在寻找一个开源解决方案。同步发生在移动设备和位于服务器上的数据库之间。那里有好的吗？

顺便说一句，我复制/粘贴了[这个问题的格式](https://stackoverflow.com/questions/445357/best-database-for-small-applications-and-tools)，（有 14 个赞成票）所以甚至不要考虑投票结束！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:24:49.630

There is one mobile apps development solution which contains data synchronization solution too: [http://www.mobiforms.com/](http://www.mobiforms.com/)

Another solution is Sybase Unwired Platform, which, unfortunately, costs a LOTS of money as its SAP solution. But it has its place in the world too in big Enterprises scenario.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-16T09:30:23.440

这是商业解决方案，但如果您赶时间或制作原型，这是一个很好的开始解决方案：http: [//zumero.com/](http://zumero.com/)

# informatica - 用于检查 Informatica 服务是否运行的 Windows 脚本？

> ID：11585325
> 
> 赞同：0
> 
> 时间：2012-07-20T18:53:01.353
> 
> 标签：informatica

如何检查 informatica 服务是否正在运行的 windows 脚本，如果没有，它应该重新启动，并且这个脚本应该在 windows 启动时运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T19:39:14.747

制作一个批处理文件并将其保存在其中

```
%INFA_HOME%/server/bin/infacmd.bat ping -dg localhost:6005 
```

假设在您的环境中定义了 INFA_HOME，并且您使用的是默认设置端口 6005。Informatica 通常在作为受限用户帐户运行的 Windows 下创建为服务。它设置为自动启动，如果失败，它将尝试重新启动一次。但是，您应该查看它启动失败的原因，而不是强制从脚本启动它。

众所周知，Informatica 的服务需要一分钟或更长时间才能启动，因此您可能只想耐心等待。

# android - 在 Android 中访问 JPEG 注释

> ID：11585327
> 
> 赞同：1
> 
> 时间：2012-07-20T18:53:06.503
> 
> 标签：android, android-image, android-library

我正在寻找一种在 Android 中读取 jpeg 文件注释的方法。有了评论，我的意思是我会用 rdjpegcom 得到的字符串

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T18:55:46.503

你的意思是EXIF元数据吗？您可以使用`ExifInterface`该类来读取 EXIF 元数据：

[http://developer.android.com/reference/android/media/ExifInterface.html](http://developer.android.com/reference/android/media/ExifInterface.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T21:32:44.183

我现在找到了一些 apache 许可的代码来访问这里的评论：[http ://www.java2s.com/Code/Java/2D-Graphics-GUI/GetJpegProperties.htm](http://www.java2s.com/Code/Java/2D-Graphics-GUI/GetJpegProperties.htm)

ExifInterface 没有给我想要的评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-21T17:36:02.187

同意，jpeg，comment 是它自己的字段，而不是 EXIF 数据的子字段。我已经使用它几十年了，通常一个人可以键入或粘贴大约五段您自己的信息，并且可以自由编辑、阅读和以纯文本形式编写。任何功能齐全的 jpeg 处理程序都应该能够编辑它，我想这会遗漏 Android 应用程序，我不确定。

# ruby-on-rails - 如何覆盖 Rails 路由辅助方法？

> ID：11585328
> 
> 赞同：2
> 
> 时间：2012-07-20T18:53:07.423
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

有没有办法覆盖 rails route helper 方法，以便它们以不同的方式处理模型实例？我刚刚创建了一个`User`不继承自 的模型，`ActiveRecord::Base`而是使用我编写的方法从 LDAP 数据库中检索用户。但是，现在所有的路由辅助方法都搞砸了。（例如，`user_path(user)`给出`/users/#<User:0x3df82a0>`而不是`/users/002131`）

我尝试使用以下代码（放置在`User`模型内部）覆盖该方法，但它似乎没有做任何事情。有任何想法吗？

```
class << Rails.application.routes.url_helpers
  def user_path(user)
    if user.class == User
      users_path + "/#{user.id}"
    else
      users_path + "/#{user}"
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T18:58:29.263

在你的模型上实现一个`to_param`方法，当你将它传递给一个路由助手时，它应该调用那个方法。

一个例子：大多数时候你通过模型 ID 进行路由，所以像这样的调用

```
user_path(some_user) 
```

生成一个类似的 URL`/users/45`

但是假设您有一个要在路由中使用的唯一用户名，所以您只需执行以下操作：

```
class User
  def to_param
    username
  end
end 
```

然后调用`user_path(user)`会产生类似的东西：`/users/blackbear`

# grails - 如何将gsp页面中选定单选按钮的id值获取到grails控制器/域类

> ID：11585332
> 
> 赞同：1
> 
> 时间：2012-07-20T18:53:21.350
> 
> 标签：grails, gsp, radiobuttonlist

使用：grails 1.3.7 仅供参考。

```
<g:each var="name" in="${nameList}">
 <li>${name.first}</li>
 <input id="Add" type="radio" name="nameMod" value="${name.first}"/>Add
 <input id="Modify" type="radio" name="nameMod" value="${name.first}"/>Modify
 <g:hiddenField name="action" value="${nameMod.id} "/>
</g:each> 
```

所以这就是我想要做的：我知道如何获取单选按钮的值，但是，我还需要知道按下了哪个按钮。正如您从上面看到的，我尝试将单选按钮的 ID 设置为操作（添加/修改），但我收到一条错误消息，指出该`.id`属性无效。我知道如何在 jQuery 中测试单选按钮是否被选中，但我不确定如何将值从 jQuery 获取到控制器或域类。

还有另一种方法吗？基本上我需要知道动作和名称，以便我可以更新数据库。

感谢您的任何建议！（我可以这么说吗？编辑掉！！；））

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T05:22:28.470

将一些类（仅在 javaScript 中使用）添加到您的单选按钮，然后使用它！

```
<g:each var="name" in="${nameList}">
 <li>${name.first}</li>
 <input id="Add" type="radio" name="nameMod" class="f_radioButtonGroup" value="${name.first}"/>Add
 <input id="Modify" type="radio" name="nameMod" class="f_radioButtonGroup" value="${name.first}"/>Modify
 <g:hiddenField name="action" value="${nameMod.id} "/>
</g:each> 
```

并在 javaScript 函数中

```
function getCheckedItemNumber() {
    var result;
    var radioButtons = $(".f_radioButtonGroup");
    for (var i = 0; i < radioButtons.length; i++) {
        if (radioButtons[i].checked) {
            result = radioButtons[i].value;
        }
    }
    return result
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T19:59:43.207

也许是这样的：

```
 <g:each var="name" in="${nameList}">
   <li>${name.first}</li>
  <input id="Add" type="radio" name="selectedAction" value="add"/>Add
  <input id="Modify" type="radio" name="selectedAction" value="modify"/>Modify
  <g:hiddenField name="nameMod" value="${name.first} "/>
 </g:each> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T20:04:04.250

您可能需要对单选按钮名称做更多的事情，因为您正在迭代未知数量的名称。您可以在一个名为的组中有 100 个单选按钮`nameMod`- 然后您只能选择这 100 个单选按钮中的一个 - 我认为这不是您想要的。

当我遇到这样的事情时，我会这样做：

```
<g:each var="name" in="${nameList}">
  <li>${name.first}</li>
  <input type="radio" name="nameMod_${name.id}" value="add"/>Add
  <input type="radio" name="nameMod_${name.id}" value="modify"/>Modify
  <g:hiddenField name="name_${name.id}" value="${name.first} "/>
</g:each> 
```

这将为每个名称提供一个无线电组，并允许您在控制器中单独访问它们。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-21T04:25:30.470

您可以使用 jQuery 来做到这一点，但这对于使用命令对象来说是一个很好的例子：

看法：

```
<g:each var="name" in="${nameList}" status="i">
  <li>${name.first}</li>
  <input type="radio" name="nameAction[${i}]" value="add"/>Add
  <input type="radio" name="nameAction[${i}]" value="modify"/>Modify
  <g:hiddenField name="name[${i}]" value="${name.first} "/>
</g:each> 
```

命令对象：

```
class NameCommand {
    List<String> nameAction = []
    List<String> name = []
} 
```

控制器：

```
def theAction = { NameCommand foo ->
    foo.nameAction.eachWithIndex { val, index ->
        if (val == "add") {
            whateverService.add(foo.name[index]) 
        }
        else {
            whateverService.modify(foo.name[index])
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-04T14:17:05.657

简单的方法： 只需**在您的域类中****声明一个带有名称的字符串** （必须与 gsp 中单选按钮的名称匹配） 。就是这样，GORM 将负责绑定过程；所选单选按钮的值将被放入（域类字段）。`selectedAction` **`selectedAction`**

 **你不需要做更多的事情。哇！**

# regex - 当使用“未终止的地址正则表达式”运行时，我来自 bash 脚本的 sed 终止

> ID：11585334
> 
> 赞同：1
> 
> 时间：2012-07-20T18:53:28.653
> 
> 标签：regex, bash, shell, scripting, sed

我正在组装的 bash 脚本存在一些问题。

`$2`是在启动期间提供的类似于“line_old”的字符串。sed 死于

```
sed: -e expression #1, char 15: unterminated address regex 
```

这是我的代码片段：

```
redisconfig ()
{
    CMD="ssh -q -t -i $HOME/.ssh/amazon-key.pem ubuntu@10.20.10.1"

    line_old="ENV['REDIS_URL'] = 'redis://redis:X9g532mq21yY4@ip-10-112-143-152.us-west-2.compute.internal:6379'"

    line_new="ENV['REDIS_URL'] = 'redis://redis:X9gKQasdg2yY4@$2:6379'"

    updateconfig="$($CMD sed "/$line_old/c\$line_new/" /home/ubuntu/config/testing.rb)"

    results="$($CMD grep 'REDIS_URL' /home/ubuntu/config/testing.rb)"

    echo $updateconfig

    echo $results    
} 
```

知道我的 sed 会发生什么吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T14:52:51.733

我认为问题出`//`在`$line_old`and `$line_new`。
它会导致`sed`分隔符出现问题

我希望我有你的文件来处理它，但我可以给你方法：
你可以使用`sed`不同的分隔符，例如：

```
$ echo 'foo' | sed s#foo#bar#
bar 
```

更多[在这里](http://backreference.org/2010/02/20/using-different-delimiters-in-sed/)。

# performance - 添加大量方法会降低性能吗？

> ID：11585338
> 
> 赞同：1
> 
> 时间：2012-07-20T18:53:56.527
> 
> 标签：performance

我知道使用一种方法而不是一行一行地做所有事情要清楚得多，所以让我们把这个假设分开。

我在问自己做同样的事情调用一个方法是否需要更多时间（用于调用该方法），想象生成的字节码是相同的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T19:00:03.167

从理论上讲，是的，在大多数情况下，您正在创建一个新的堆栈框架来执行计算。实际上，不，您几乎不会注意到性能受到影响。对这个问题的完整讨论有点复杂，它与生成的字节码和运行它的机器/虚拟机的底层性能有关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T19:02:02.493

**1.**你的**论点有一定的限制，因为调用一个方法会导致创建一个运行时堆栈**，其中包含**执行代码的行**、**局部变量**、**程序计数器**，如果它**是非静态的，那么“this “**也。

**2.**但这不会对高速处理器和强大的 IDE 产生任何影响。

**3.**此外，如果您**不使用这些方法，那么将违反 DRY 原则（不要重复自己）**，该原则规定应将所有信息和行为保存在一个合理的地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T21:05:40.830

当然，将代码模块化是个好主意，而且它不应该对性能产生明显的影响。

*除了。*它很可能会产生很大的不同，原因与技术无关，而与人性有关。

看起来像这样的线条是很自然的

```
a = b + c; 
```

和

```
Foo(bar); 
```

并认为它们的成本大致相同，它们可能会，但可能不会。

问题是，方法是额外代码的磁铁，包括额外的方法调用。

然后我在进行性能调优时发现我抓取了堆栈样本，它们的深度为 20-30 层并不罕见。如果我检查堆栈样本上的每个调用，几乎每个调用都非常合理。

*几乎。*

只需要从 20 到 30 人中打出一次并非真正必要的电话，就可以彻底打击性能。如果我在少至两 (2) 个堆栈样本上看到这样的东西，我知道我找到了一个优化的大好机会。例如，如果我取三个样本并在其中两个上看到，可以节省的时间分数在 2/3 附近。换句话说，加速因子可能在*三倍*的范围内。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T18:55:56.680

串行程序（逐步）比运行方法更快，因为您必须花时间扫描代码以查找方法并运行它。然而，这个时间太小了，不会对性能产生任何影响。

# java - 在eclipse中构建工作区

> ID：11585344
> 
> 赞同：0
> 
> 时间：2012-07-20T18:54:04.820
> 
> 标签：java, eclipse, jvm

当我打开 Eclipse IDE 时，在构建工作空间达到 70% 后，IDE 突然关闭。打开eclipse ide路径时，我打印了错误日志文件，为hs_err_pid3604.log

hs_err_pid3604.log 文件详细信息

> Java 运行时环境检测到意外错误：
> 
> 内部错误 (4E4D4554484F440E435050071F)，pid=4052，tid=2236
> 
> Java VM：Java HotSpot(TM) Server VM（1.6.0-b105混合模式）如果您想提交错误报告，请访问：

不明白为什么会发生这种情况，如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:21:35.970

1.6.0-b105 是一个非常旧的 java 版本（我从 2006 年的帖子中找到了一些对它的引用……），您可能应该首先尝试使用最新的版本，或者至少是更新的版本。如果不能在最近的版本上复制，那么为这样的旧版本提交错误是没有意义的。

如果它仍然不起作用，请尝试通过`-clean`从命令行使用参数运行 eclipse 来清理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T18:56:05.127

有时这是因为 Java VM 中的错误（或 Eclipse SWT 可能有问题）而发生的。通常这些是不可重现的。如果您始终如一地得到它，请在 eclipse.org 上提交一个错误，他们可以在那里提供帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T18:59:56.870

增加内存试试？

[http://wiki.eclipse.org/Eclipse.ini](http://wiki.eclipse.org/Eclipse.ini)

# c# - 我应该对这种边缘情况进行集成测试吗

> ID：11585346
> 
> 赞同：0
> 
> 时间：2012-07-20T18:54:16.177
> 
> 标签：c#, unit-testing, integration-testing

sql表的NAME字段是其他字段的组合：

1_2_UserId_CreationDatetime 例如 1_2_domain\Elisa_15-07-2012 08:30:57

我的 NAME 字段有一个唯一约束来表示不允许使用相同的名称。主键是一个 auto inc id。

现在在插入新数据行时捕获 UniqueConstraintException 是否有意义，但实际上不可能两次具有相同的名称，因为用户必须登录到 Web 应用程序两次并在同一秒内按下按钮等等。 .

我真的应该测试这样的场景吗？

**更新**

这就是工作流程：

用户通过从模板列表中选择并发布来创建新的测试计划。

然后使用 releaseName_templateName_UserId_CreationDate 保存测试计划

但是在 4 个字段中保存了 releaseId、templateId、UserId 和 CreatedDate。

要将用户显示为 NAME，releaseId 和 templateId（都是 int`s）没有意义。

因此，我将 NAME 与所有 4 个 part_names 一起保存。

![在此处输入图像描述](../Images/1df0fb3915fc51db99194d5ddb807c6b.png)

此复合 NAME 字段的另一种设计替代方案是从 Testplan 表中删除 NAME 字段，当我加载所有测试计划时，我尝试获取每个 releaseId 和 templateId 的 releaseName 和 templateName。

你怎么看？好吧，还请记住我关于边缘案例的原始问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:19:38.733

我会测试它。异常如何发生在某种程度上无关紧要。您的系统的使用模式可能会随着时间而改变。

作为记录，您可能违反了[第一范式](http://en.wikipedia.org/wiki/First_normal_form)，如果是，我建议您放弃这种方法，除非您对其进行大量思考和分析。我必须看到完整的桌子。如果那些其他列在同一个表中，那么你肯定是。您可以在这些多列中添加唯一约束，或者可能将这些列用作复合主键（如果这确实是您的意图）。您可能还需要将其中一些字段移到其他表中。我真的必须看到你的设计才能确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T20:23:40.340

您描述测试的方式听起来像是测试只是测试 RDBMS 是否正常运行——而不是您真正应该关心的事情（如果 RDBMS 不工作，您使用另一个）。要么，要么你正在测试你的架构。我不确定这有多大价值。如果单元测试失败，你期望做什么？您会验证架构是否正确，如果正确，那又如何？如果您正在执行许多其他测试来验证架构没有更改为预期值，那么这样的测试可能是有意义的。如果不是，那对我来说没有多大意义。

现在，如果您的应用程序处理了这个 UniqueContraintException 并做了一些特定的事情，那么验证应用程序执行的测试是有意义的。

# java - Sublime text 2 - 编译和运行单个 java 文件

> ID：11585353
> 
> 赞同：0
> 
> 时间：2012-07-20T18:54:50.553
> 
> 标签：java, sublimetext, sublimetext2

如何在 sublime 文本中为单个（当前打开的）java 源文件实现简单的编译和运行功能，我不打算进行包管理和其他东西，只是一个简单的运行按钮，它编译和运行当前的 java 文件，有点像 coderunner有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T04:05:17.710

正如[shazeline所提到的，](https://stackoverflow.com/users/1461452/shazeline)[这里](http://www.sublimetext.com/forum/viewtopic.php?f=3&t=4805)讨论了一种方法，虽然一次性尝试并不容易使用，但仍然有些东西

# sql - 如何在 SQL 视图中避免 GROUP BY

> ID：11585360
> 
> 赞同：3
> 
> 时间：2012-07-20T18:55:08.063
> 
> 标签：sql, sql-server, sql-server-2008, group-by

我有一个 sql 视图。示例如下。问题是我想使用所有字段，但我不想按每个字段分组。我该如何规避呢？我只需要在 fieldA 上分组，而不是其他人……实际上与其他人分组会弄乱我想看到的数据。我正在使用 SQL Server 2008。谢谢！

```
select 
fieldA,
fieldB,
fieldC,
fieldD,
....
from my_table as a join other_table b on a.id=b.id
group by fieldA, fieldB, fieldC, fieldD 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-20T19:07:13.103

通常，当我想选择多个字段并仅基于其中一个字段聚合某些内容时，我将在派生表中执行聚合并加入要从中选择的表，如下所示：

```
select fieldA, thingYouWantToAggregate, fieldB, fieldC, fieldD
from my_table
inner join
(
    select fieldA, thingYouWantToAggregate
    from my_table
    group by fieldA

) rsAggregated on rsAggregated.fieldA = my_table.fieldA 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T18:58:59.913

您需要对不想包含在分组依据的列使用聚合函数。我通常使用`min`

```
select 
  fieldA,
  min(fieldB),
  min(fieldC),
  min(fieldD),
....
from my_table as a join other_table b on a.id=b.id
group by fieldA 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T20:27:13.743

我真的不明白你在找什么，但我不妨把它扔在那里....

```
select distinct fieldA, ....
from table_name 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-05-18T06:44:31.820

```
select 
  o.Customer, count(*) as ItemCount
from 
  Orders o
inner join 
  OrderDetails od on o.OrderID = od.OrderID
group by 
  o.Customer 
```

# c++ - 快速排序算法不起作用

> ID：11585365
> 
> 赞同：1
> 
> 时间：2012-07-20T18:55:31.517
> 
> 标签：c++, sorting, vector, while-loop, quicksort

我正在为我正在处理的 Huffman 编码项目开发一种快速排序算法（解释为什么所有函数名称都以 huff 开头）。当使用调试器遍历它时，该函数在找到最高项时似乎冻结（当试图从向量右侧找到“不应该”在该侧的项时）。此代码可能（可能存在）其他问题，但我现在专注于这个问题。顺便说一句，大多数时候（一直）我调用 cout，它是出于调试目的。

编辑：从评论中对我的代码进行了很多更正，但没有一个能解决我的问题。出于这个原因，我正在更新代码。

```
void huff_sort_partition(vector<Node*>* v, int b, int e){
    int tempt = b+((rand()%(e-b))+1);
    int p_idx = (*v)[tempt]->weight;
    cout << tempt << endl;
    int l = b+0;
    int r = e;
    cout << "P:" << p_idx << "  L-R:" << l << "-" << r << endl;
    while(l < r){
        while((*v)[l]->weight < p_idx){
            l++;
        }
        while((*v)[r]->weight > p_idx){
            r--;
        }
        Node* s = (*v)[b+l];
        (*v)[b+l] = (*v)[b+r];
        (*v)[b+r] = s;
    }

    huff_sort_partition(v, b, l-1);
    huff_sort_partition(v, l+1, e);
}
void Huff::huff_sort(vector<Node*>* v){
    srand ( time(NULL) );
    cout << "------sort------" << endl;
    huff_sort_partition(v, 0, v->size());
} 
```

编辑：我想我会添加这个，因为还没有人回答这个问题。如果代码“应该”工作，然后评论它（这样我可以在这个代码之外寻找它为什么不能工作的原因）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:34:57.453

考虑当有多个具有枢轴权重的节点时，代码中会发生什么 - 为简单起见，请考虑权重`[1, 9, 5, 2, 7, 5, 6, 8, 3, 7]`，并且枢轴索引可能为 5，所以

```
void huff_sort_partition(vector<Node*>* v, int b, int e){
    int p = (*v)[b+(rand() % (e - b + 1))]->weight; 
```

我们有`p = 5`

```
 int l = 0;
    int r = e-b; 
```

`l = 0`和`r = 9`

```
 cout << "P:" << p << "  L-R:" << l << "-" << r << endl;
    while(l < r){
        while((*v)[b+l]->weight < p){
            l++;
        } 
```

`1 < 5`, 然后递增`l`, `l = 1`, `v[1] = 9 > 5`.

```
 while((*v)[b+r]->weight > p){ // where it freezes up and wont move on
            r--;
        } 
```

`7 > 5`, 减量`r`, `r = 8`, `v[8] = 3 < 5`. 交换`v[1]`和`v[8]`，给予`[1, 3, 5, 2, 7, 5, 6, 8, 9, 7]`。

下一轮，`l = 1 < 8 = r`。`v[1] = 3 < 5`，`l`变为 2，`v[2] = 5`不小于 5，循环结束。现在进入第二个内循环，`v[8] = 9 > 5`, `v[7] = 8 > 5`, `v[6] = 6 > 5`; `v[5] = 5`不大于 5，交换`v[2]`和`v[5]`，给`[1, 3, 5, 2, 7, 5, 6, 8, 9, 7]`.

下一轮，`l = 2 < 5 = r`，`v[2] = 5`不小于 5，`v[5] = 5`不大于 5，交换`v[2]`和`v[5]`。糟糕，我们被困住了。

防止这种情况的常用方法是交换枢轴并让两个条件之一成为弱不等式，还必须检查`l < r`内部循环中的条件，或者在所有条目都相等的情况下，一个会跑掉数组/向量的结尾。然后在分区之后，将枢轴交换到正确的位置。

以下代码使用标准方式（未经测试，可能存在拼写错误）：

```
void huff_sort_partition(vector<Node*>* v, int b, int e){
    // Nothing to sort if there are fewer than two elements
    if (e <= b) return;
    int tempt = b+((rand()%(e-b))+1);
    int p_idx = (*v)[tempt]->weight;
    // swap pivot out of the way
    Node *tmp_Node = (*v)[tempt];
    (*v)[tempt] = (*v)[e];
    (*v)[e] = tmp_Node;
    cout << tempt << endl;
    int l = b;
    int r = e - 1;
    cout << "P:" << p_idx << "  L-R:" << l << "-" << r << endl;
    while(l < r){
        while((l < r) && (*v)[l]->weight < p_idx){
            l++;
        }
        while((l < r) && (*v)[r]->weight >= p_idx){
            r--;
        }
        if (l < r){
            Node* s = (*v)[l];
            (*v)[l] = (*v)[r];
            (*v)[r] = s;
            // stuff at l and r is okay now, we don't need to test again
            ++l;
            --r;
        }
    }
    // Now l is the first index with weight >= pivot weight,
    // swap pivot into place
    tmp_Node = (*v)[l];
    (*v)[l] = (*v)[e];
    (*v)[e] = tmp_Node;

    huff_sort_partition(v, b, l-1);
    huff_sort_partition(v, l+1, e);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T20:27:17.817

您的`b,l`使用和停止条件有问题。 `b`是从哪里开始 patition`e`的索引，是从哪里停止的索引。因此，当您第一次调用函数时，`e`您必须引用 last index 而不是 size 。此外，您还缺少停止条件`huff_sort_partition`- 为了不永远运行，您应该检查索引是否`b`相`e`对于每个 0ther 正常。

请尝试下面的代码的固定版本

```
void huff_sort_partition(vector<Node*>* v, int b, int e){ 
        if (b >= e ) {
            return;
        }
        int p = (*v)[b+(rand() % (e - b + 1))]->weight; 
        int l = 0; 
        int r = e-b; 
        cout << "P:" << p << "  L-R:" << l << "-" << r << endl; 
        while(l < r){ 
            while((*v)[b+l]->weight < p){ 
                l++; 
            } 
            while((*v)[b+r]->weight > p){ 
                r--; 
            } 
            Node* s = (*v)[b+l]; 
            (*v)[b+l] = (*v)[b+r]; 
            (*v)[b+r] = s; 
        } 

        huff_sort_partition(v, b, b+l-1); 
        huff_sort_partition(v, b+r+1, e); 
        cout << "P:" << p << "  L-R:" << l << "-" << r << endl; 
        for_each(v->begin(), v->end(), show_freq); 
    } 
    void Huff::huff_sort(vector<Node*>* v){ 
        srand ( time(NULL) ); 
        cout << "------sort------" << endl; 
        huff_sort_partition(v, 0, v->size() - 1); 
    } 
```

# language-agnostic - 类型在运行时决定的静态类型语言？

> ID：11585369
> 
> 赞同：0
> 
> 时间：2012-07-20T18:55:55.140
> 
> 标签：language-agnostic, programming-languages, language-design, language-features, esoteric-languages

例如，在 Ada 中是这样的（如果要支持的话）：

```
type Type_Name is range bottom .. top; 
```

其中“底部”和“顶部”是变量。

或 C 中的类似内容（如果要支持这一点）：

```
struct s {
    int a;
    if (z<3) {
        char b;
        int c;
    } else {
        struct ss {
            int b;
            char c;
        }
    }
} v; 
```

或者，如果 c 在声明中的变量标识符之后具有类型：

```
var if (z<3) int else char; 
```

或类似的东西。

这只是出于好奇。我什至不知道它是否有用，而且我知道它会产生很多问题，比如`s.ss.b`在使用之前必须检查类似的东西是否存在。

哦，也许我应该重申标题中的问题：是否有任何类型在运行时决定的静态类型语言？如果有，它们是什么？

顺便说一句，也许这意味着该语言不会是静态类型的。但我的意思是在使用前必须说明变量类型的语言（当然不能这样做）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:01:13.557

在运行时决定类型的静态类型语言几乎没有意义。静态类型的重点是静态检测所有类型错误，也就是说，在编译时。

如果您要在运行时决定类型，那么您不妨放弃“类型”的概念，并使用鸭式方法，重要的是是否支持操作。

拥有在运行时决定类型的静态类型语言的唯一原因是处理在编译时无法确定的情况。大概有一些语言是这样的，但是我真的不关注语言开发场景了，所以不能告诉你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T07:38:51.423

您可以在静态类型语言中模拟动态用法。当然会有一些限制，但你可以做到

一些例子：

在 c# 中，以下代码是有效的。

```
object variant;

if(a<5)
     variant = new int();
else
     variant = new double(); 
```

在 C++ 中

```
boost::variant< std::vector<int> , std::list<int> > v;

if (n > 10000)
   v=std::vector();
else
   v=std::list(); 
```

已验证。

# xslt - xsl:for-each-group 需要帮助

> ID：11585371
> 
> 赞同：3
> 
> 时间：2012-07-20T18:55:56.660
> 
> 标签：xslt, xpath, xslt-2.0

我浏览了[XSLT Grouping Examples](http://www.w3.org/TR/xslt20/#grouping-examples)和[Using for-each-group for high performance XSLT](https://stackoverflow.com/questions/11491108/using-for-each-group-for-high-performance-xslt)。我对每个组都有问题。

**我的 XML**

```
<?xml version="1.0" encoding="UTF-8"?>
<body>
   <p name="h-title" other="main">Introduction</p>
   <p name="h1-title " other="other-h1">XSLT and XQuery</p>
   <p name="h2-title" other=" other-h2">XSLT</p>
   <p name="">
      <p1 name="bold"> XSLT is used to write stylesheets.</p1>
   </p>
   <p name="h2-title " name="other-h2">XQuery</p>
   <p name="">
      <p1 name="bold"> XQuery is used to query XML databases.</p1>
   </p>
   <p name="h3-title" name="other-h3">XQuery and stylesheets</p>
   <p name="">
      <p1 name="bold"> XQuery is used to query XML databases.</p1>
   </p>
   <p name="h1-title " other="other-h1">XSLT and XQuery</p>
   <p name="h2-title " other=" other-h2">XSLT</p>
</body> 
```

 </p>

**我想要的输出**

```
<?xml version="1.0" encoding="UTF-8"?>
<body>
   <p name="h-title " other="main">Introduction</p>
   <h1>
      <p name="h1-title " other="other-h1"> XSLT and XQuery </p>
      <h2>
         <p name="h2-title " other="other-h2">XSLT</p>
         <p name="">
            <p1 name="bold">XSLT is used to write stylesheets.
            </p1>
         </p>
      </h2>
      <h2>
         <p name="h2-title " other="other-h2"> XQuery is used to query XML databases    
         </p>
         <p name="">
            <p name="bold"> XQuery is used to query XML databases.</p>
         </p>
         <h3>
            <p name="h3-title " name="other-h3">XQuery and stylesheets</p>
            <p name="">
         <p1 name="bold"> XQuery is used to query XML databases.</p1>
           </p>
        </h3>
      </h2>
</h1>

<h1>
            <p name="h1-title " other="other-h1">XSLT and XQuery</p>
       <h2>   
            <p name="h2"-title other=" other-h2">XSLT</p>
       </h2>
</h1>
</body> 
```

**我试过这个。（不工作）**

```
<xsl:template match="body">

        <body>
            <xsl:for-each-group select="*" group-starting-with="@h1-title"      >
                <h1>
                    <xsl:for-each select="current-group()[self:: h1-title]">
                        <xsl:value-of select="."/> 
                        </xsl:for-each> 
                </h1>
            </xsl:for-each-group>

            <xsl:for-each-group select="*" group-starting-with="@h2-title"      >
                <h2>
                    <xsl:for-each select="current-group()[self::h2-title/@h2-title]">
                        <xsl:value-of select="."/>
                    </xsl:for-each> 
                </h2>
            </xsl:for-each-group>

            <xsl:for-each-group select="*" group-starting-with="@h3-title"      >
                <h3>
                    <xsl:for-each select="current-group()[self::h2-title/@h3-title]">
                        <xsl:value-of select="."/>
                    </xsl:for-each> 
                </h3>
            </xsl:for-each-group>

        </body>

  </xsl:template> 
```

有人会告诉我获得我想要的结果的正确方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T10:27:53.173

`for-each-group`这是一个在递归函数中使用的 XSLT 2.0 样式表（我更喜欢使用 XSLT 2.0 的命名模板）：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  xmlns:mf="http://example.com/mf"
  exclude-result-prefixes="xs mf">

<xsl:param name="prefix" as="xs:string" select="'h'"/>
<xsl:param name="suffix" as="xs:string" select="'-title'"/>

<xsl:output method="html" version="4.0" indent="yes"/>

<xsl:function name="mf:group" as="node()*">
  <xsl:param name="items" as="node()*"/>
  <xsl:param name="level" as="xs:integer"/>
  <xsl:for-each-group select="$items" group-starting-with="p[@name = concat($prefix, $level, $suffix)]">
    <xsl:choose>
      <xsl:when test="not(self::p[@name = concat($prefix, $level, $suffix)])">
        <xsl:apply-templates select="current-group()"/>
      </xsl:when>
      <xsl:otherwise>
        <xsl:element name="h{$level}">
          <xsl:apply-templates select="."/>
          <xsl:sequence select="mf:group(current-group() except ., $level + 1)"/>
        </xsl:element>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:for-each-group>
</xsl:function>

<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* , node()"/>
  </xsl:copy>
</xsl:template>

<xsl:template match="body">
  <xsl:copy>
    <xsl:sequence select="mf:group(*, 1)"/>
  </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

当我将带有 Saxon 9 的样式表应用于输入时

```
<body>
   <p name="h-title" other="main">Introduction</p>
   <p name="h1-title" other="other-h1">XSLT and XQuery</p>
   <p name="h2-title" other=" other-h2">XSLT</p>
   <p name="">
      <p1 name="bold"> XSLT is used to write stylesheets.</p1>
   </p>
   <p name="h2-title" other="other-h2">XQuery</p>
   <p name="">
      <p1 name="bold"> XQuery is used to query XML databases.</p1>
   </p>
   <p name="h3-title" other="other-h3">XQuery and stylesheets</p>
   <p name="">
      <p1 name="bold"> XQuery is used to query XML databases.</p1>
   </p>
   <p name="h1-title" other="other-h1">XSLT and XQuery</p>
   <p name="h2-title" other=" other-h2">XSLT</p>
</body> 
```

我得到结果

```
<body>
   <p name="h-title" other="main">Introduction</p>
   <h1>
      <p name="h1-title" other="other-h1">XSLT and XQuery</p>
      <h2>
         <p name="h2-title" other=" other-h2">XSLT</p>
         <p name="">

            <p1 name="bold"> XSLT is used to write stylesheets.</p1>

         </p>
      </h2>
      <h2>
         <p name="h2-title" other="other-h2">XQuery</p>
         <p name="">

            <p1 name="bold"> XQuery is used to query XML databases.</p1>

         </p>
         <h3>
            <p name="h3-title" other="other-h3">XQuery and stylesheets</p>
            <p name="">

               <p1 name="bold"> XQuery is used to query XML databases.</p1>

            </p>
         </h3>
      </h2>
   </h1>
   <h1>
      <p name="h1-title" other="other-h1">XSLT and XQuery</p>
      <h2>
         <p name="h2-title" other=" other-h2">XSLT</p>
      </h2>
   </h1>
</body> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T03:35:09.427

**此转换使用键和句柄`h1-title`来`h6-title`：**

```
<xsl:stylesheet version="1.0"
     xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
     <xsl:output omit-xml-declaration="yes" indent="yes"/>
     <xsl:strip-space elements="*"/>

     <xsl:template match="body">
       <xsl:apply-templates select="p[@name='h1-title']" />
     </xsl:template>

     <xsl:key name="next-headings" match="p[@name='h6-title']"
       use="generate-id(preceding-sibling::p
                         [ @name='h1-title'
                        or @name='h2-title'
                        or @name='h3-title'
                        or @name='h4-title'
                        or @name='h5-title'
                        ][1])" />
     <xsl:key name="next-headings" match="p[@name='h5-title']"
       use="generate-id(preceding-sibling::p
                         [ @name='h1-title'
                        or @name='h2-title'
                        or @name='h3-title'
                        or @name='h4-title'
                        ][1])" />
     <xsl:key name="next-headings" match="p[@name='h4-title']"
       use="generate-id(preceding-sibling::p
                         [ @name='h1-title'
                        or @name='h2-title'
                        or @name='h3-title'
                        ][1])" />
     <xsl:key name="next-headings" match="p[@name='h3-title']"
       use="generate-id(preceding-sibling::p
                         [  @name='h1-title'
                        or @name='h2-title'
                        ][1])" />
     <xsl:key name="next-headings" match="p[@name='h2-title']"
       use="generate-id(preceding-sibling::p
                         [@name='h1-title'][1])" />

     <xsl:key name="immediate-nodes" match=
     "node()[not(self::p)
           or
            not(contains('|h1-title|h2-title|h3-title|h4-title|h5-title|h6-title|',
                         concat('|',@name,'|')
                        )
                )]"
       use="generate-id(preceding-sibling::p
             [contains('|h1-title|h2-title|h3-title|h4-title|h5-title|h6-title|',
                       concat('|',@name,'|')
                       )
             ][1])" />

     <xsl:template match=
      "p[contains('|h1-title|h2-title|h3-title|h4-title|h5-title|h6-title|',
                  concat('|',@name,'|')
                  )]">
       <xsl:variable name="vLevel" select="substring(@name,2,1)" />
       <xsl:element name="h{$vLevel}">
          <xsl:copy-of select="."/>
          <xsl:apply-templates select="key('immediate-nodes', generate-id())" />
          <xsl:apply-templates select="key('next-headings', generate-id())" />
       </xsl:element>
     </xsl:template>

     <xsl:template match="/*/node()" priority="-20">
       <xsl:copy-of select="." />
     </xsl:template>
</xsl:stylesheet> 
```

**应用于此 XML 文档时**（更正提供的一个并使用属性的统一值`name`）：

```
<body>
        <p name="h1-title" other="main">Introduction</p>
        <p name="h2-title" other="other-h2">XSLT and XQuery</p>
        <p name="h3-title" other=" other-h3">XSLT</p>
        <p name="">
                <p1 name="bold"> XSLT is used to write stylesheets.</p1>
        </p>
        <p name="h2-title" other="other-h2">XQuery</p>
        <p name="">
                <p1 name="bold"> XQuery is used to query XML databases.</p1>
        </p>
        <p name="h3-title" other="other-h3">XQuery and stylesheets</p>
        <p name="">
                <p1 name="bold"> XQuery is used to query XML databases.</p1>
        </p>
        <p name="h1-title" other="other-h1">XSLT and XQuery</p>
        <p name="h2-title" other=" other-h2">XSLT</p>
</body> 
```

**产生了想要的正确结果**：

```
<h1>
   <p name="h1-title" other="main">Introduction</p>
   <h2>
      <p name="h2-title" other="other-h2">XSLT and XQuery</p>
      <h3>
         <p name="h3-title" other=" other-h3">XSLT</p>
         <p name="">
            <p1 name="bold"> XSLT is used to write stylesheets.</p1>
         </p>
      </h3>
   </h2>
   <h2>
      <p name="h2-title" other="other-h2">XQuery</p>
      <p name="">
         <p1 name="bold"> XQuery is used to query XML databases.</p1>
      </p>
      <h3>
         <p name="h3-title" other="other-h3">XQuery and stylesheets</p>
         <p name="">
            <p1 name="bold"> XQuery is used to query XML databases.</p1>
         </p>
      </h3>
   </h2>
</h1>
<h1>
   <p name="h1-title" other="other-h1">XSLT and XQuery</p>
   <h2>
      <p name="h2-title" other=" other-h2">XSLT</p>
   </h2>
</h1> 
```

**请注意**：

这种转换解决了生成层次结构的*主要问题*。如果要求顶级`name`属性具有 value ，则只需要进行微不足道的更改`"h-title"`。

如果需要更多的层次结构级别，则只需将相应的`or`子句机械地添加到键的定义中，并将所有属性值的管道分隔字符串附加到`name`相应的新字符串中。

在这里，我改编并重新使用了 Jeni Tennison 为类似问题提供的解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T19:56:50.780

您的每个分组步骤都将原始元素集作为输入，而您需要每个步骤处理由前一个分组步骤生成的组。还有很多其他错误，例如 h1-title 不是属性名称。

它需要是这样的：

```
<xsl:for-each-group select="*" group-starting-with="*[@name='h1-title']">
<h1>
  <xsl:choose>
    <xsl:when test="@name='h1-title'">
      <xsl:for-each-group select="current-group()" group-starting-with="*[name='h2-title']">
        <xsl:choose>
        <h2>
          ... similar logic for the next level ...
        </h2>
        </xsl:choose>
      </xsl:for-each-group>
    </xsl:when>
    <xsl:otherwise>
      <xsl:copy-of select="current-group()"/>
    </xsl:otherwise>
  </xsl:choose>
</h1>
</xsl:for-each-group> 
```

您可以根据要处理的级别进行任意深度的嵌套；或者如果你想处理一个不确定的数字，你可以把代码放在一个命名模板中，然后进行递归调用来处理下一层。在最内层，省略`xsl:choose`并执行`xsl:copy-of select="current-group()`。

（我刚刚注意到“名称”属性中的尾随空格。如果这些真的存在，您需要将它们包含在比较测试中，或者`normalize-space()`去掉它们。）

# list - Prolog如何计算列表元素的长度

> ID：11585372
> 
> 赞同：0
> 
> 时间：2012-07-20T18:56:02.443
> 
> 标签：list, prolog

我已经有以下代码：

```
"atom_length(Var, Len) :- length(Var, Len)." 
```

我想构造一个谓词 atom_lengths/2 对原子列表做同样的事情：

```
?-  atom_lengths([one, two, three, four], [3, 3, 5, 4]).
true.
?-  atom_lengths([one, two, three, four], LS).
LS = [3, 3, 5, 4].
?-  atom_lengths([], LS).
LS = []. 
```

如何写“atom_lengths”？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T21:47:28.493

使用`maplist`+ `atom_length`：

```
?- maplist(atom_length, [one, two, three, four], [3, 3, 5, 4]).
true.

?- maplist(atom_length, [one, two, three, four], Ls).
Ls = [3, 3, 5, 4].

?- maplist(atom_length, [], Ls).
Ls = []. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T19:04:03.327

你不能用它`length/2`来计算原子的长度。但是，您可以首先将每个原子转换为字符列表，`atom_chars/2`然后使用`length/2`它来获取其长度：

```
atom_lengths([], []).
atom_lengths([Atom|Atoms], [Length|LAtoms]):-
  atom_chars(Atom, L),
  length(L, Length),
  atom_lengths(Atoms, LAtoms). 
```

测试：

```
?- atom_lengths([one, two, three, four], LS).

LS = [3,3,5,4] 
```

除了使用该对`atom_chars/2-length/2`，您还可以使用 ISO 内置谓词`atom_length/2`：

```
atom_lengths([], []).
atom_lengths([Atom|Atoms], [Length|LAtoms]):-
  atom_length(Atom, Length),
  atom_lengths(Atoms, LAtoms). 
```

或使用`findall/3`：

```
atom_lengths(Atoms, LAtoms):-
  findall(Length, (member(Atom, Atoms), atom_length(Atom, Length)), LAtoms). 
```

正如评论者所建议的，一个更好的习惯用法是使用`maplist/3`：

```
atom_lengths(Atoms, LAtoms):-
  maplist(atom_length, Atoms LAtoms). 
```

# c# - List.Sort 两次的效率对比 List.Clone & Sort

> ID：11585374
> 
> 赞同：2
> 
> 时间：2012-07-20T18:56:06.097
> 
> 标签：c#, .net, performance, sorting

语言细节：C# .NET 3.5/4.0；项目是一个预编译的 DLL，一个被其他产品调用/使用的“模块”。

我的问题是关于整体效率的，我意识到这可能归结为“内存使用与 CPU 周期”的决定，这很好——我仍然想知道你认为更好的路线。

我有一个 MyObjects 列表传递给一个方法，该方法需要按 Property2 对列表进行排序，用它做“一些事情”，然后按 Property1 对列表进行排序以做“其他事情”并继续生活。重要提示：当 List首次进入方法（例如，从数据层）时，它*已经按Property1 排序。*

排序都将是“自定义内联”，如下所示：

```
myList.Sort((ObjA, ObjB) => ObjA.Prop2.CompareTo(ObjB.Prop2)); 
```

做这两个排序是个好主意吗？或者，将列表克隆到一个新的 ListB 并且只调用一次排序（在 ListB 上，通过 Prop2）会更好吗？然后用它做“一些事情”，完成后，将原始列表用于“其他事情”并继续。

我最初的猜测是“两个排序”会旋转更多 CPU 周期，而“克隆和排序”会使用更多内存（因为它必须创建新的 ListB 对象）——是的，我知道 List 成员（MyObjects）会不会被克隆，它们只会被新的 ListB 指向。

想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T19:00:17.050

制作一个新的`List<T>`将是一项`O(n)`操作，因为每个项目都将被复制到新列表中。 [`List<T>.Sort`](http://msdn.microsoft.com/en-us/library/w56d4y5z.aspx)通常*是* `O(n log n)`.

因此，排序两次会更慢。复制将需要您的清单的副本。这是内存与速度的权衡。

话虽这么说，复制不会改变原始列表的排序顺序 - 在我看来，这是一个很大的优势，因为将列表传递给方法并让它返回更改通常是以后错误的来源，因为人们不一定期望一种方法来改变您的排序。尤其如此，因为您的列表*已经排序*- 如果您遇到创建有序列表的麻烦，我建议尽可能避免更改该顺序。

然而，根据你在做什么，你可以`Enumerable.OrderBy`按顺序拉出第二组，然后做你的“事情”。这也具有与副本相同的优点，因为它不会更改原始列表的顺序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T19:00:27.607

我会处理`myList.OrderBy(w=>w.Prop2)`然后我只使用原始列表的输出，因为`OrderBy`它没有破坏性。

# ruby-on-rails - 如何在rails中设置额外的字段？

> ID：11585376
> 
> 赞同：0
> 
> 时间：2012-07-20T18:56:11.017
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

这里是模型

```
class User < ActiveRecord::Base
  has_many :companies, :through => :positions
  has_many :positions

class Company < ActiveRecord::Base
  has_many :positions
  has_many :users, :through => :positions

class Position < ActiveRecord::Base
  belongs_to :company
  belongs_to :user
  attr_accessible :company_id, :user_id, :regular_user
end 
```

还有我的架构

```
create_table "positions", :force => true do |t|
  t.integer  "company_id"
  t.integer  "user_id"
  t.datetime "created_at",                     :null => false
  t.datetime "updated_at",                     :null => false
  t.boolean  "regular_user", :default => true
end 
```

我有这些参数

```
Parameters: {"user"=>{"id"=>"", "first_name"=>"some", "last_name"=>"name",
"phone_number"=>"4074615519", "email"=>"something@gmail.com", "active"=>"true", 
"company_ids"=>["186"], "role_ids"=>["2"], "notification_ids"=>["1", "2", "3"]}} 
```

我遇到的问题是位置。当我这样做时，regular_user 总是正确的

```
@user.update_attributes(params[:user]) 
```

或者

```
@user = User.new(params[:user])
if @user.save 
```

可能是因为它默认为 true....但是如果 role_ids > 3，我需要更改为 false

关于如何更改默认标志的任何想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T19:01:57.443

使用`before_save`回调来设置`role_id`属性。例子：

```
class User
  before_save :set_role_id

  private

  def set_role_id
    if role_id > 3
      self.regular_user = false
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T19:03:31.853

使用`before_save`过滤器：

```
class Position < ActiveRecord::Base
  belongs_to :company
  belongs_to :user
  attr_accessible :company_id, :user_id, :regular_user

  before_save :update_regular_flag

private
  def update_regular_flag
    self.regular_user = (role_id <= 3)
  end
end 
```

# python - Python socket.error：[Errno 111] 连接被拒绝

> ID：11585377
> 
> 赞同：49
> 
> 时间：2012-07-20T18:56:18.777
> 
> 标签：python, sockets, errno

我正在尝试编写一个使用套接字进行文件传输的程序。代码的服务器端运行良好。但是，在客户端我收到以下错误

```
Traceback (most recent call last):
File "client.py", line 54, in <module>
uploadFiles(directory)
File "client.py", line 36, in uploadFiles
transferFile(fname)
File "client.py", line 13, in transferFile     
cs.connect((HOST, 36258))
File "/usr/lib/python2.7/socket.py", line 224, in meth
return getattr(self._sock,name)(*args)
socket.error: [Errno 111] Connection refused 
```

我的代码如下

```
import os
import socket

def transferFile(fname):
   HOST = '127.0.0.1'
   CPORT = 36258
   MPORT = 36250
   FILE = fname
   cs = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
   cs.connect((HOST, 36258))
   cs.send("SEND " + FILE)
   cs.close()
   ms = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
   ms.connect((HOST, MPORT))
   f = open(FILE, "rb")
   data = f.read()
   f.close()
   ms.send(data)
   ms.close()

def uploadFiles(directory):
   home = os.getenv("HOME")
   folder = str(home + "/" + directory)
   os.chdir(folder)
   dirList = os.listdir(folder)
   print dirList
   for fname in dirList:
       if fname.endswith('.bin'):
           transferFile(fname)

os.chdir(os.getenv("HOME"))
directory = "testdownload"
if not os.path.exists(directory):
   os.makedirs(directory)
 os.chdir(directory)

uploadFiles(directory) 
```

我尝试在 Google 和 Stack Overflow 上的其他帖子上寻求帮助，但都没有帮助。有人可以帮帮我吗？行号可能不同，因为我只粘贴了部分代码

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2014-12-01T18:03:31.287

问题显然是（如您所想），在您尝试连接时，端口 36250 未在服务器端打开（因此连接被拒绝）。我可以看到服务器应该`SEND`在另一个连接上接收到命令后打开这个套接字，但它显然是“没有打开 [它] 与客户端同步”。

好吧，主要原因是没有任何同步。来电：

```
cs.send("SEND " + FILE)
cs.close() 
```

只会将数据放入操作系统缓冲区；`close`可能会刷新数据并推送到网络中，但它几乎肯定会在数据到达服务器之前返回。添加`sleep`after`close`可能会缓解问题，但这*不是同步*。

正确的解决方案是*确保*服务器已打开连接。这将需要服务器向您发送一些消息（例如`OK`，或更好`PORT 36250`地指示连接位置）。这将确保服务器已经在监听。

另一件事是**您必须检查 的返回值`send`**以确保从缓冲区中获取了多少字节。或使用[`sendall`](https://docs.python.org/2/library/socket.html#socket.socket.sendall).

（很抱歉这个迟到的答案打扰了，但我发现这是一个流量很大的问题，我真的不喜欢评论部分的睡眠想法。）

# c++ - linux中可执行文件的主管

> ID：11585380
> 
> 赞同：1
> 
> 时间：2012-07-20T18:56:32.130
> 
> 标签：c++, linux, monitor

我目前正在开发一个在 linux 上运行的可执行文件。我想要一个监督这个可执行文件并重新启动它被杀死的主管。有没有这样做的命令？或建议我一些方法来做到这一点

注意：代码是c++

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:05:10.530

这个主管已经存在并且一直在运行。它被称为`init`，并且大多数版本都由 中的条目控制`/etc/inittab`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T19:09:49.940

[Monit](http://mmonit.com/monit/)带有大多数 linux 发行版，可以做你正在寻找的事情，还有更多，比如检查内存、磁盘空间、连接......

从[文档](http://mmonit.com/monit/documentation/monit.html#existence_testing) 中，您的监视器配置文件中可能会有类似的内容：

```
check file with path /cifs/mydata
  if does not exist for 5 cycles then exec "/usr/bin/mount_cifs.sh" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T19:02:22.073

最简单的方法就是自己生成进程，等待它退出，然后重新启动它。最简单的方法就是在 shell 脚本循环中。但是，一般来说，这种看门狗架构往往是脆弱和有故障的。为什么你的进程会死掉？重新启动时会发生什么？系统中的其他地方是否保留了假设您的流程的当前“版本”与过去某个时间相同的状态？

通常，这只是没有完成。几乎总是最好将您的流程构建为一次性处理一个事件/命令/请求，或者健壮地编写它以便可以假定它始终处于活动状态。如果你不能让它工作，只需将它包装在一个 shell 循环中。

# python - Python：读取文件，直到一行与二进制模式下的字符串匹配

> ID：11585383
> 
> 赞同：5
> 
> 时间：2012-07-20T18:56:48.280
> 
> 标签：python, python-3.x

好的，所以我已经看到了其他问题，但我遇到了一个独特的问题。我必须以二进制模式打开文件才能读取它（我不太明白为什么，但它可以工作）。我可以轻松地打印出文件的行没问题。但是当我尝试使用 查找特定行时`re.search`，我遇到了问题，因为我有一个字符串模式和字节对象。这是我到目前为止所拥有的：

```
input_file = open(input_file_path,  'rb',  0)

for line in input_file:
    if re.search("enum " + enum_name,  line, 0):
        print("Found it")
        print(line)
        exit() 
```

enum_name 是用户输入，所以我真的需要知道如何在搜索以二进制模式打开的文件时同时使用字符串和变量（或者如何以非二进制模式打开此文件，我得到了不能拥有非二进制模式下的无缓冲文本 I/O 错误）。我已经尝试为搜索二进制文件制作我的模式，但是当我这样做时我不知道如何处理该变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T19:02:18.513

您需要在正则表达式中使用字节字符串作为模式，如下所示应该可以：

```
if re.search(b"enum " + enum_name.encode('utf-8'), line):
    ... 
```

这里`enum_name.encode('utf-8')`用于将用户输入转换为`bytes`对象，根据您的环境，您可能需要使用不同的编码。

请注意，如果您的正则表达式真的这么简单，那么您可能只使用子字符串搜索来代替。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T19:02:40.800

你不需要重新。尝试

```
if "enum " + enum_name in line: 
```

用“b”阅读主要是关于行尾。

# google-tv - Google TV pip 窗口打开和关闭时的音频焦点

> ID：11585387
> 
> 赞同：1
> 
> 时间：2012-07-20T18:57:02.747
> 
> 标签：google-tv

如果 google TV pip 窗口打开和关闭，假设应该是什么行为？

当 pip 窗口出现/消失时有任何通知吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T16:05:36.117

编辑：我与团队核实，答案是否定的。我鼓励您在此处提交功能请求：[http ://code.google.com/p/googletv-issues/issues/list](http://code.google.com/p/googletv-issues/issues/list)

根据文档，无法访问 PIP 功能。

“我可以在我的 Google TV Android 应用程序中使用画中画 (PIP) 吗？不能。画中画 (PIP) 功能仅适用于直播电视。您不能在 Android 应用程序中使用它，也不能在您的 Android 应用程序中使用它。你能在 PIP 窗口中运行 Android 应用程序吗？”

# perl - 在 perl 中使用 xxxx 格式对数字进行排序

> ID：11585390
> 
> 赞同：6
> 
> 时间：2012-07-20T18:57:09.563
> 
> 标签：perl, sorting

例如，数字格式为：

```
1.1.10
1.1.10.1
1.1.10.2
1.1.11
1.1.12
1.1.13
1.1.13.1
1.1.3
1.1.4 
```

我正在寻找的输出是：

```
1.1.3
1.1.4
1.1.10
1.1.10.1
1.1.10.2
1.1.11
1.1.12
1.1.13
1.1.13.1 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-20T19:04:12.393

```
use Sort::Key::Natural qw( natsort );
my @sorted = natsort @data; 
```

或（无模块）

```
my @sorted =
   map $_->[0],
   sort { $a->[1] cmp $b->[1] }
   map [ $_, pack('C*', split /\./) ],
   @data; 
```

或（无模块，更快，但需要一个数组而不是输入列表）

```
 my @sorted =
   map $data[unpack('N', $_)],
   sort
   map pack('NC*', $_, split /\./, $data[$_]),
   0..$#data; 
```

在`pack`模板中，您可以更改`C`为`n`或`N`。`C`允许最多 255 个`n`数字。允许最多 65,535 个数字。`N`允许数量高达 40 亿。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-20T19:07:05.017

尝试以下操作：

```
use Modern::Perl;
use Sort::Naturally  qw{nsort};

my @numbers = nsort(qw{1.1.10 1.1.10.1 1.1.10.2 1.1.11 1.1.12 1.1.13 1.1.13.1 1.1.3});
say for @numbers; 
```

输出：

```
1.1.3
1.1.10
1.1.10.1
1.1.10.2
1.1.11
1.1.12
1.1.13
1.1.13.1 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T20:53:50.397

这对你来说可能更容易理解：

```
sub min { $_[0] <= $_[1] ? $_[0] : $_[1] }
sub comp 
  {
  ($a1,$a2) = @_;
  @a1 = @{$a1};
  @a2 = @{$a2};
  for (0..min(scalar @a1,scalar @a2)) 
     {
     return 1 if $a1[$_] > $a2[$_];
     return -1 if $a2[$_] > $a1[$_];  #exit early if an inequality is found
     }
  return 0 if @a1 == @a2; #both array are equal, thus both numbers are equal
  return @a1 > @a2 ? 1 : -1; #arrays are equal upto a certain point, thus longer array is 'greater'
  }
@sourcearray = ('1.1.10','1.1.10.1','1.1.10.2','1.1.11','1.1.12','1.1.13','1.1.13.1','1.1.3','1.1.4');
@individual = map { [split /\./] } @sourcearray; #splits each number into arrays consisting of individual numbers
@sorted = sort {comp($a,$b)} @individual; #sort algo decides which of these two arrays are 'greater'
{
local $" = ".";
print "@{$sorted[$_]}\n" for 0..$#sorted;
} 
```

# jquery - 结构化数据库、codeigniter 模型和 javascript 调用以优化速度和效率

> ID：11585395
> 
> 赞同：2
> 
> 时间：2012-07-20T18:57:20.367
> 
> 标签：jquery, codeigniter, database-design, data-structures, query-optimization

我正在开发一个我相信会成倍增长的网站。

开发网站时非常简单，需要考虑带宽使用和速度。我很担心，因为我在这方面的经验很少，所以虽然我知道该网站可以同时处理十个用户，但我不知道它是否可以处理 100 甚至 1000。

如果它发生，我宁愿防止问题而不是治愈它，因此正在寻找有关该主题的任何建议/信息/对以下特定查询的答案。

如果我有一个产品表，其中有一个类别列。然后，我在产品表中搜索所有具有“食品”类别的项目 - 这是否比具有包含包含在其中的产品 ID 的列的类别表更可取？

使用 Codeigniter 从模型中调用其他模型的缺点是什么？

使用 javascript（使用 jquery）我想要一个包含通知（来自 db 表）的自动刷新 div。据我所知，除了完全做到这一点之外，别无他法 - 每 x 秒重新加载 div .. 有 1000 个用户，每 10 秒重新加载一个 div 我可以看到事情变得非常资源密集。facebook等肯定必须做这样的事情..？如何有效地实现这一目标？

非常感谢托马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T19:54:40.007

> 如果我有一个产品表，其中有一个类别列。然后，我在产品表中搜索所有具有“食品”类别的项目 - 这是否比具有包含包含在其中的产品 ID 的列的类别表更可取？

这取决于您在表上的索引。如果您知道关联的 id`food`并且您不必查找该信息，那么整数会更快 IIRC。

> 使用 Codeigniter 从模型中调用其他模型的缺点是什么？您的代码可能会变得混乱，而且它不是很理想.. 为什么需要这样做？
> 
> 使用 javascript（使用 jquery）我想要一个包含通知（来自 db 表）的自动刷新 div。据我所知，除了完全做到这一点之外，别无他法 - 每 x 秒重新加载 div .. 有 1000 个用户，每 10 秒重新加载一个 div 我可以看到事情变得非常资源密集。facebook等肯定必须做这样的事情..？如何有效地实现这一目标？

有几种方法可以解决这个问题，一种是使用套接字并将通知推送给用户。见[http://pusher.com](http://pusher.com)

还可以使用 jQuery 并`$.ajax`在计时器上通过 CI 每隔 x 秒刷新一次控制器/动作……例如；

```
$.ajax({
  //controller/method/limit
  url: "/notifications/get/10",
  success( function(d){
    //d is a json_encoded object returned back from the controller
  }
}); 
```

最后，您可以在页面加载时加载所有通知，并每隔 x 秒一次显示一个。

第一个和最后一个选项可能是最不占用资源的。

第一个是因为您只是在发生更改时查询和推送。第二个是因为您每次页面加载只加载一次通知，而不是每 x 秒无论如何。

# php - 命令行 php mysqli 失败但通过 Web 服务器工作并在本地工作

> ID：11585399
> 
> 赞同：4
> 
> 时间：2012-07-20T18:57:25.457
> 
> 标签：php, shell, mysqli, centos

我有一个 shell 脚本，它在解析文本文件后调用 php 脚本在数据库中插入记录。当它调用 PHP 脚本时，我收到无法找到 mysqli 的错误：

```
PHP Fatal error:  Class 'mysqli' not found in /path/to/php/file.php on line 5 
```

这在带有 Nginx 和 PHP-FPM 和 Mysql 5.5.x 的 Macbook Pro 上本地失败，在我将套接字参数添加到 mysqli 调用后，它在本地工作。 **这适用于本地数据库！**

```
$mysqli = new mysqli("localhost", "user", "pass", "mydb", 3306, "/tmp/mysql.sock"); 
```

我部署到安装了 Linux 服务器（安装了 'yum install php' 和 PHP 5.3.x 的 CentOS6）。我更改了与远程数据库服务器的连接，因此删除了“/tmp/mysql.sock”，因为数据库没有在该服务器上运行。

Shell脚本调用php执行脚本：

```
php -c "/etc/php.ini" -f "/path/to/php/file.php" 
```

鉴于我没有在本地运行 mysql，我如何让它识别 mysqli lib 并执行。它在 CentOS6 上。我什至尝试将 mysqli.so 添加到 php.ini 文件并收到以下错误：

```
[mike@app2 myapp]# php -version
PHP Warning:  PHP Startup: Unable to load dynamic library '/usr/lib64/php/modules/mysqli.so' - /usr/lib64/php/modules/mysqli.so: cannot open shared object file: No such file or directory in Unknown on line 0
PHP 5.3.3 (cli) (built: Feb  2 2012 23:47:49) 
Copyright (c) 1997-2010 The PHP Group
Zend Engine v2.3.0, Copyright (c) 1998-2010 Zend Technologies 
```

感谢您提供解决此问题的任何帮助。通常我会使用 mysql(query) 但需要 mysqli() 用于脚本中的一些准备好的语句和其他位。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-21T00:10:27.907

我发现mysqli没有与PHP一起安装并运行以下命令：

```
>php -i 
```

这返回了 phpinfo() 并没有发现 mysqli。然后我运行 'yum' 命令来安装 php-mysqli：

```
>yum install php-mysqli 
```

在此之后，脚本成功运行。希望这可以帮助其他可能遇到类似情况的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T19:00:10.810

PHP CLI 将拥有自己的环境设置，来自网络服务器使用的环境设置。如果 CLI 环境中没有可用的 mysqli，则会导致此问题。

# ios - TCP 输出流错误

> ID：11585402
> 
> 赞同：0
> 
> 时间：2012-07-20T18:57:39.457
> 
> 标签：ios, cocoa, tcp, stream, outputstream

我遇到了 tcp outputstream (json) 的问题。碰巧服务器收到我的流分成两部分。但它必须只有一个。

这就是我发送流的代码：

```
- (void) sendMessage:(NSDictionary *)message {
    [outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
    NSDictionary *dic=[[NSDictionary alloc]initWithObjectsAndKeys:@"52731255-7b3d-5027-9937-ca311e61c14e",@"token",@"add",@"action",message,@"data",@"contact",@"element", nil];
    NSLog(@"send message: %@",dic);
    NSError *writeError = nil;
    [NSJSONSerialization writeJSONObject:dic toStream:outputStream options:0 error:&writeError];
} 
```

但这就是服务器收到的内容：

```
Incoming data:"{"
Incoming data:"\"action\":\"add\",\"data\":{\"lastName\":\"Guilherme\",\"firstName\":\"Fabio\",\"entryId\":3,\"webLink\":\"www.test.com\"},\"element\":\"contact\",\"token\":\"s3e4-7b3d-fasd-afds-fadsfdsa123\"}" 
```

在某些情况下会发生这种情况，但在另一种情况下，传入数据会成为一体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T15:23:43.223

我们发现解决这个问题的方法是在流消息的末尾发送一个符号。就像“/r/n”一样，当他看到它时，服务器会关闭它。所以它一次只处理一条消息。

# c++ - 如何在 C++ 绑定中使用不透明指针包装 ac 库

> ID：11585404
> 
> 赞同：5
> 
> 时间：2012-07-20T18:57:46.857
> 
> 标签：c++, c

我正在考虑用 c++ 包装一些 c 库，但我不确定包装不透明指针的最佳方法是什么。

当 C 结构是公共 API 的一部分时

```
typedef struct _SomeType
{
    int a;
    int b;
} SomeType_t; 
```

有几个“成员”功能的地方：

```
void SomeTypeFoo( SomeType_t* obj, ... );
void SomeTypeBar( SomeType_t* obj, ... ); 
```

我喜欢从基础派生的方法，将这些“成员”函数简单地关联为实际的类成员。IE：

```
class SomeTypeWrapper:
    public SomeType_t
{
    void foo( ... );
    void bar( ... );
}; 
```

就我的理解而言，我相信这`SomeTypeWrapper`是“二进制兼容的” `struct _SomeType`，`SomeTypeWrapper*`可以强制转换为，`SomeType_t*`以便 c++ 方法实现可能是：

```
SomeTypeWrapper::foo( ... )
{
    SomeTypeFoo( (SomeType_t*)this, ... );
} 
```

见注[1]。

但是，在某些库中，他们喜欢将结构的定义保持为私有（我想这是为了允许在不更改 headers/API 的情况下更改实现）。所以在标题中我有这样的东西：

```
typedef struct _SomeType SomeType_t; 
```

然后所有的“成员”函数都处理这些不透明的指针。为了将这些方法“包装”到一个接口中，到目前为止我所做的是提供一个包含指针的类。

```
class SomeTypeWrapper
{
    private:
        SomeType_t* m_data;

    public:
        SomeTypeWrapper( SomeType_t* data ): m_data(data){}
        void foo(...);
        void bar(...);
}; 
```

这意味着对于 c 库中返回这种不透明指针的任何函数，我必须分配一个新对象来携带该指针。对于许多可能很好但这种设计使包装器实现复杂化的库以及执行大量小对象分配的快速 c 库，我怀疑这种额外的对象开销会导致显着的性能损失。此外，底层对象可能是引用计数的，所以在某些情况下，我必须决定 SomeWrapperType 是否增加引用计数、实现复制构造函数、是否具有私有构造函数等。

在大多数情况下，我很乐意为更好的界面付出代价，但我正在寻找其他选择。有没有更简洁的方法来处理 c++ 包装库中的不透明 c 指针？相关：是否有一种实现包装器类的好方法，以便 c++ 标头不必包含 c-library 标头并且不需要包装器对象分配？

注意[1]：我相信这个转换是安全的，只要使用相同的编译器并且`SomeTypeWrapper`不添加额外的成员并且没有虚拟方法。通过相同的编译器，我假设由 gcc 编译的 c 库将与由相同 gcc 编译的 c++ 包装器一起使用。也许这不能保证？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T20:26:17.163

您（问题中）的最终版本`SomeTypeWrapper`是前进的方向。

> 这意味着对于 c 库中返回这种不透明指针的任何函数，我必须分配一个新对象来携带该指针。对于许多可能很好但这种设计使包装器实现复杂化的库以及执行大量小对象分配的快速 c 库，我怀疑这种额外的对象开销会导致显着的性能损失。

没有开销。`class`具有一个数据成员且没有方法的 a 实例`virtual`不大于其唯一成员。如果您在标头中内联定义方法，则也不会有函数调用开销。因此，只要您不使用 , 分配这些实例`new`，而是在堆栈上：

```
SomeTypeWrapper some_object(make_some_object());  // one allocation on the heap 
```

那么你有一个零开销的解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-22T10:43:48.930

如果你*包装*你的不透明指针，你肯定不能从它*派生*。一种看似有吸引力的免费获得某些功能的方法，当您在打算聚合的地方使用继承时，它很快就会变得混乱：您的包装器*不是库的对象之一*，相反，它...*包装了一个库对象*。

如果您像对待库对象一样小心对待包装器对象，那么每个不透明指针总是有一个包装器（最多）。您可以与例如 a 共享您的包装器对象`unique_ptr`（C++11 拥有它们！）。这是一件好事，考虑到包装的对象是一种宝贵的资源。

说到共享指针，它们可以将`deleter`函数作为构造函数参数：

```
struct Wrapper : boost::non_copyable 
{
private:
   std::unique_ptr<SomeType> wrapped;
public:
   Wrapper()
   :wrapped(SomeType_create(), &SomeType_destroy)
   // upon destruction of wrapped, use SomeType_destroy
   {
   }

   void foo() { SomeType_foo(wrapped.get()); }
   int bar(int i) { return SomeType_bar(wrapped.get(),i); }
}; 
```

是的：您需要为 ; 中的每个成员函数提供一个方法包装器`SomeType`。这是完全正常的，因为 C++ 使用与 C 不同的调用约定，并且您必须用 C++ 替换每个 C 样式的成员函数。

而且您必须注意为每个库对象创建一个包装器；此对象在您的控制之下，您可以与您信任的任何人共享它，但它只是一个对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T20:22:13.810

通常，您在上面提出的建议是一种丑陋的黑客攻击，可能会导致各种麻烦。可以向上（或向下，当它有意义时）转换继承层次结构，但是当从指向包装类的指针转换为指向第一个成员指向的对象的指针时，它是未定义的）。绝对不能保证第一个成员的地址将与您的包装器地址对齐。

在我看来，你在这里试图解决一个错误的问题。也许以不正确的策略为每种小型 C“对象”创建 C++ 包装器？为什么不拥有一个包装底层 C 库*功能的库，而不是包装**单个对象*？当它这样做时，它以一种有意义的、简约的方式管理底层的 C 对象（即通过使用 RIAA、共享指针等）

# delphi - 自定义对话框

> ID：11585406
> 
> 赞同：1
> 
> 时间：2012-07-20T18:58:04.937
> 
> 标签：delphi

试图让自定义对话框与按钮名称武器 1 、武器 2 和取消一起使用。但是使用此代码，当我尝试编译它时，它在 Result 上给出错误未定义错误消息是

> [DCC 错误] ssClientHost.pas(760)：E2003 未声明的标识符：“结果”

代码是：

```
 with CreateMessageDialog('Pick What Weapon', mtConfirmation,mbYesNoCancel) do
       try
           TButton(FindComponent('Yes')).Caption := Weapon1;
           TButton(FindComponent('No')).Caption := Weapon2;
           Position := poScreenCenter;
           Result := ShowModal;
        finally
     Free;
   end;
     if buttonSelected = mrYes    then ShowMessage('Weapon 1 pressed');
     if buttonSelected = mrAll    then ShowMessage('Weapon 2 pressed');
     if buttonSelected = mrCancel then ShowMessage('Cancel pressed'); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T19:09:09.783

上面发布的代码有很多错误，除非您没有向我们展示某些部分。一方面，如果没有字符串变量`Weapon1`和`Weapon2`，那么你不能引用这些变量！其次，如果没有`Result`变量（例如，如果代码在函数内部），那么这也是一个错误。此外，在上面的代码中，`buttonSelected`是一个变量，您可能也忘记声明了。最后，首先你谈论`Yes`and `No`，然后你谈论`Yes`and `Yes to all`。

以下代码有效（独立）：

```
with CreateMessageDialog('Please pick a weapon:', mtConfirmation, mbYesNoCancel) do
  try
    TButton(FindComponent('Yes')).Caption := 'Weapon1';
    TButton(FindComponent('No')).Caption := 'Weapon2';
    case ShowModal of
      mrYes: ShowMessage('Weapon 1 selected.');
      mrNo: ShowMessage('Weapon 2 selected.');
      mrCancel: ShowMessage('Cancel pressed.')
    end;
finally
  Free;
end; 
```

*免责声明：此答案的作者不喜欢武器。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T19:08:55.470

结果仅在函数中定义：

```
function TMyObject.DoSomething: Boolean;
begin
  Result := True;
end;

procedure TMyObject.DoSomethingWrong;
begin
  Result := True;    // Error!
end; 
```

所以，你会得到类似的东西：

```
function TMyForm.PickYourWeapon(const Weapon1, Weapon2: string): TModalResult;
begin
  with CreateMessageDialog('Pick What Weapon', mtConfirmation,mbYesNoCancel) do
    try
      TButton(FindComponent('Yes')).Caption := Weapon1;
      TButton(FindComponent('No')).Caption := Weapon2;
      Position := poScreenCenter;
      Result := ShowModal;
   finally
     Free;
   end;
   // Debug code?
{$IFDEF DEBUG)
   if Result = mrYes then 
     ShowMessage('Weapon 1 pressed');
   if Result = mrAll then 
     ShowMessage('Weapon 2 pressed');
   if Result = mrCancel then 
     ShowMessage('Cancel pressed');
{$ENDIF}
end; 
```

# asp.net-mvc-3 - MVC 3 Razor 将父/子表显示为一个表

> ID：11585408
> 
> 赞同：3
> 
> 时间：2012-07-20T18:58:07.083
> 
> 标签：asp.net-mvc-3, entity-framework, razor

我的数据库中有两个 2 表

```
Table: Foo                 Table: Bar
-----------------          ---------------------
|FooID     | Int|          |BarID     | Int    |
|Number    | Int|          |FooID     | Int    |
-----------------          |Name      | String |
                           |Value     | Int    |
                           ---------------------

With data                  with data
|FooID | Number |          |BarID |FoodID |Name    |Value |
|1     | 1      |          |1     |1      |apple   |100   |
|2     | 2      |          |2     |1      |orange  |110   |
                           |3     |2      |apple   |200   |
                           |4     |2      |orange  |40    | 
```

这些是相关模型

```
class Foo
{
    public int FooID { get; set; }
    public int Number { get; set;}

    public virtual ICollection<Bar> Bars { get; set; }
}

class Bar
{
    public int BarID { get; set; }
    public int FooID { get; set; }
    public string Name { get; set;}
    public int Value { get; set;}
} 
```

通过在视图中执行以下操作，我可以轻松地以表格格式显示它

```
<table>
    @foreach(var f in Model)
    {
        <tr>
            foreach(var b in f.Bar)
            {
                <td>@f.Number</td>
                <td>@b.Name</td>
                <td>@b.Value</td>
            }
        </tr>
    }
</table> 
```

哪个输出

```
-------------------
|1   |apple    |100|
-------------------
|1   |orange   |110|
-------------------
|2   |apple    |200|
-------------------
|2   |orange   | 40|
------------------- 
```

我真正希望看到的输出如下。

```
-------------------------
|         |  1      |  2 |
-------------------------
|apple    |100      |200 |
-------------------------
|orange   |200      | 40 |
------------------------- 
```

有人可以指出我正确的方向吗？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-21T06:33:33.643

也许存在更优雅的解决方案，但这就是我的做法。

您需要一个循环来生成标题行，`Foo.Number`然后您需要第二个循环，您可以在其中选择所有`Bar`s 并按它们的`Name`. 从这些组中，您可以生成数据行。

`Bar.Value`现在您只需要一个通过s 并构建表格行的第三个循环。

所以上面在代码中描述了“算法”：

```
<table>
    <tr>
        <td>
            &nbsp;
        </td>
        @foreach (var f in Model.OrderBy(f => f.FooID))
        {
            <td>@f.Number
            </td>
        }
    </tr>
    @foreach (var group in Model.SelectMany(f => f.Bars).GroupBy(b => b.Name))
    {
        <tr>
            <td>@group.Key
            </td>
            @foreach (var b in group.OrderBy(b => b.FooID))
            {
                <td>@b.Value
                </td>
            }
        </tr>
    }
</table> 
```

注意：我添加了`OrderBy(b => b.FooID)`以确保值与标题`Bar`正确对齐。`Foo.Number`

结果是这样的：

![在此处输入图像描述](../Images/2fd803197296d500e6b45aed7b7f46a2.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T01:14:42.280

这是一种可能的方法......我一直在努力想出一个使用标准 ActionResult 的解决方案（尽管我确信这是可能的）所以我认为返回一个扁平的匿名 json 对象可能会解决问题。在控制器上粘贴一个 JsonResult 方法，通过 jQuery 调用它，然后构建你的表。此解决方案取决于按 Bar.Name 排序的记录（警告一些未经测试的代码！）

**编辑**：我刚刚意识到这不太正确，需要重构。当有相同数量的 Bar itms 时它可以工作，但实际上每个 Foo 可能会有一个可变数量，因此添加到每行的元素数量需要等于 Bar 项目的最大数量。

```
public JsonResult GetBarsForFoos()
{
    var foos = from f in repositoryOrContext.Foos.Include("Bar")
        select f;

    return foos == null
    ? Json(new object[0], JsonRequestBehavior.AllowGet)
    : Json(foos.Bars.OrderBy(bar => bar.Name).Select(
        bar => new { foos.Number, bar.Name, bar.Value }).ToArray(),
        JsonRequestBehavior.AllowGet);
} 
```

然后在 jQuery 中：

```
function populateFoos() {
    $.ajax({
        url: '/Foo/GetBarsForFoos',
        async: false
    }).done(function (data) {
        // have an empty table in your Razor with an id of tblFoos
        var fooTable = $('#tblFoos');
        fooTable.html('');
        fooTable.append(createFooTable(data));
    }).error(function (msg, url, line) {
        alert("Error - error message: " + line);
    });
}

function createFooTable(data) {
    var html = '',
    len = data.length,
    currentBarName = '',
    allBarNumbers = [];

    html = '<table><tr><td></td>';

    // Create 1st row that contains foo.Number
    for (var i = 0; i < len; i++) {

        if (allBarNumbers.indexOf(data[i].Number) === -1) {
            allBarNumbers.push(data[i].Number);

            html += '<td>' + data[i].Number + '</td>';
        }           
    }

    html += '</tr>';

    // Create further rows that line up Name and Value under their foo.Number values
    for (var x = 0; x < len; x++) {

        if (x === 0) {
            html += '<tr>';
        }

        // grab Bar name if changed
        if (currentBarName != data[x].Name) {
            currentBarName = data[x].Name;

            if (x !== 0) {
                html += '</tr><tr>';
            }
            html += '<td>' + currentBarName + '</td>';
        }

        html += '<td>' + data[x].Value + '</td>';
    }

    html += '</tr>/<table>';

    return html;
} 
```

您可以使用它来测试 createFooTable：

```
function testFooTable() {

    var data = [
        { Number: 1, Name: 'apple', Value: 100 },
        { Number: 2, Name: 'apple', Value: 200 },
        { Number: 1, Name: 'orange', Value: 110 },
        { Number: 2, Name: 'orange', Value: 40 }
    ];

    var fooTable = createFooTable(data);

    return fooTable;
} 
```

# php - 将 GET 的响应打印到 PHP 中的同一服务器

> ID：11585409
> 
> 赞同：0
> 
> 时间：2012-07-20T18:58:12.227
> 
> 标签：php

我有两个文件：test.php 和 query.php。我的服务器是lighttpd。

在 test.php 中，我想回显对 query.php 请求的响应。

它不起作用，因为 Lighttpd 是单线程的。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T19:01:52.830

如果你真的想模拟对页面的请求，那么你应该使用 CURL 之类的东西，或者`file_get_contents`. 如果您只是尝试运行 query.php 中的代码，请考虑包含/要求 query.php 并进行函数/方法调用。

作为一个快速而肮脏的最后一个选项，您始终可以使用一个[输出缓冲区](http://us.php.net/manual/en/book.outcontrol.php)来捕获包含 query.php 的输出：

```
$original_get = $_GET;
$_GET = array('var1'=>1);
ob_start();
include 'query.php';
$query_contents = ob_get_contents();
ob_end_clean();
$_GET = $original_get;
echo $query_contents; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T18:59:55.740

print_r($_GET); 将转储 GET 变量。

放入`<?php print_r($_GET) ?>`test.php。然后从query.php，转到

`/test.php?var1=val1&var2=val2`

test.php 将回显 var1 = val1 和 var2 = val2。

你也可以试试`var_dump($_GET)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T19:02:00.653

您可以使用[file_get_contents()](http://php.net/manual/en/function.file-get-contents.php)或[curl](http://php.net/manual/en/book.curl.php)扩展来发送 HTTP 请求。

它可以像这样简单：

```
echo file_get_contents('http://localhost/query.php?a=b'); 
```

# ios - iOS如何判断屏幕是否被点击

> ID：11585421
> 
> 赞同：0
> 
> 时间：2012-07-20T18:59:09.383
> 
> 标签：ios, cocoa-touch, ios5, touch, uigesturerecognizer

我正在使用 iOS 5.x SDK，我想确定屏幕是否已被点击

现在只是建立一个 NSLog 很好，但我不知道从哪里开始

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T19:08:01.890

通常带有[手势识别器](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIGestureRecognizer_Class/Reference/Reference.html#//apple_ref/occ/cl/UIGestureRecognizer)，例如，

```
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapOnView:)];
[self.view addGestureRecognizer:tap]; 
```

然后你有一个方法，如：

```
- (void)tapOnView:(UITapGestureRecognizer *)sender
{
    CGPoint location = [sender locationInView:self.view];
    NSLog(@"Tap at %1.0f, %1.0f", location.x, location.y);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T19:08:33.810

您可能希望从实现`touchesBegan:withEvent:`, `touchesMoved:withEvent:`, `touchesEnded:withEvent:`,开始`touchesCancelled:withEvent:`。

您可以在此处阅读有关它的更多信息：[UIResponder 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIResponder_Class/Reference/Reference.html#//apple_ref/occ/instm/UIResponder/touchesBegan%3awithEvent%3a)

# java - 在构造函数中使用覆盖方法的替代方法，Java

> ID：11585424
> 
> 赞同：3
> 
> 时间：2012-07-20T18:59:48.087
> 
> 标签：java, c++, constructor, overriding, factory-pattern

在我编写的 Java 项目中，我最终使用了在构造函数中被覆盖的方法。就像是：

```
class SuperClass {
    SuperClass() {
        intialise();
    }

    protected void initialise() {
        //Do some stuff common to all subclasses
        methodA();
        methodB();
    }

    protected abstract void methodA();

    protected abstract void methodB();
}

class SubClass1() {
    SubClass() {
        super();
    }
    protected void methodA() { //Do something }
    protected void methodB() { //Do something }

}

class SubClass2() {
    SubClass() {
        super();
    }
    protected void methodA() { //Do something else }
    protected void methodB() { //Do something else}

} 
```

我现在意识到，虽然在我的情况下它工作得很好，但它有点危险，因为在当前仅构造为 SuperClass 对象的对象上调用了 SubClass 方法（当添加扩展 SuperClass 的新类时可能会忽略这一点）未来）。由于创建对象的方式不同，它在 c++ 中也不起作用。

我能想到解决这个问题的唯一方法是将初始化方法调用向下移动到具体的类构造函数：

```
 class SuperClass {
    SuperClass() {            
    }

    protected void initialise() {
        methodA();
        methodB();
    }

    protected abstract void methodA();

    protected abstract void methodB();
}

class SubClass1() {
    SubClass() {
        super();
        initialise();
    }
    protected void methodA() { //Do something }
    protected void methodB() { //Do something }

}... 
```

这是解决这个问题的常用方法吗？扩展 SuperClass 的所有其他类都需要记住调用 initialise()，这似乎是一种耻辱（而且很容易忘记）。

我还发现自己在更复杂的情况下做类似的事情，在构造函数中使用工厂方法，它在子类中被覆盖以决定要实现哪个具体类。我能想到的解决这个问题并保持设计模式不变的唯一另一种方法可能是在两阶段过程中构建；即以最低限度构造，然后调用第二种方法来完成工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:48:24.740

需要像这样复杂的初始化的对象确实需要通过工厂方法创建。你确实提到了一个工厂，但是从构造函数中调用，所以这听起来也不是直接的方法。如果你只是在基类中有一个工厂，公开不可见的构造函数，以及一个决定返回哪个具体类的机制，那么该工厂将很容易执行初始化策略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T19:22:17.077

这确实不是一个好主意，因为当调用 methodA() 和 methodB() 时，您的子类将无法正确构造。对于扩展课程的人来说，这将是非常混乱的。建议您改用摘要`init()`，正如 dlev 在他/她的评论中所建议的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T19:28:19.157

我想知道你是否让事情变得比他们需要的更复杂。

在您的示例中，methodA 的每个实现所做的事情都可以移动到执行该实现的类的构造函数中。因此，不要使用 SubClass::methodA，只需将逻辑移动到 SubClass 构造函数中即可。

如果你这样做，你会以一些可能难以理解的对执行各种初始化位的顺序的控制为代价来获得清晰度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-03T19:39:02.677

Bruce Eckel 在他的“Thinking in Java”中提出的建议是将 SuperClass 类的方法 A() 和方法 B() 设为 final 或私有（隐式为 final），这样即使没有派生类也可以从超类构造函数访问它们访问这些方法，因此不会有危险的覆盖 - 在任何派生类中声明的具有相似签名的任何方法都将只是新方法。

# android - GLSurfaceView 上的性能

> ID：11585426
> 
> 赞同：2
> 
> 时间：2012-07-20T18:59:53.400
> 
> 标签：android, glsurfaceview, jpct

我在 GLSurfaceView 上使用 JPCT-AE 来创建动态壁纸。首先，我让渲染器在表面上自由绘制（不试图以任何方式限制帧速率）。显然，cpu 使用率达到了 90%（使用 Defy+ 和姜饼——我的壁纸渲染了一个包含约 200 个多边形的旋转球体，没有照明）。

现在我在表面上将 renderMode 设置为“RENDERMODE_WHEN_DIRTY”，并使用 Handler 发布的 Runnable 请求渲染每 33 毫秒绘制帧：

```
glSurfaceView.setRenderer(renderer);
glSurfaceView.setRenderMode(GLSurfaceView.RENDERMODE_WHEN_DIRTY);

final Handler handler = new Handler();
handler.postDelayed(new Runnable(){
    public void run() {
        glSurfaceView.requestRender();      
        handler.postDelayed(this, 30);
    }
}, 40); 
```

它将 cpu 使用率降低到 1% - 10% 之间，这很好，但现在我想知道这是否是最好的方法。

有没有更好的方法来提高 GLSurfaceView 的渲染性能？我使用的这种方法在技术上是正确的还是以后会让我有些头疼？

谢谢你。

# php - RewriteRule 不喜欢多个单词

> ID：11585429
> 
> 赞同：1
> 
> 时间：2012-07-20T19:00:01.193
> 
> 标签：php, .htaccess, search, mod-rewrite, url-rewriting

好的，我在使用 $_GET 和 htaccess 时遇到问题。如果我搜索“帖子标题”，我会转到 [http://site.com/search/post%20title](http://site.com/search/post%20title) 和这一行：

```
RewriteRule ^search/([a-zA-Z0-9_-]+) search.php?post_title=$1 
```

会创建那个 $_GET 但它只对第一个单词这样做，如果我：

```
echo $_GET['post_title']; 
```

我只得到第一个词我将如何解决这个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T19:10:02.020

```
RewriteRule ^search/([a-zA-Z0-9_-\s]+) search.php?post_title=$1 
```

这将空间定义为`\s`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T19:01:18.547

为您的角色类添加一个空格：

```
RewriteRule ^search/([a-zA-Z0-9 _-]+) search.php?post_title=$1 
```

# android - 随处可见的滑动抽屉

> ID：11585432
> 
> 赞同：0
> 
> 时间：2012-07-20T19:00:13.477
> 
> 标签：android, android-activity, slidingdrawer

我有一个包含多个活动的应用程序，并且我在每个活动中都使用一个 SlidingDrawer 从一个活动传递到另一个活动。当我不了解 Android 时，我启动了这个应用程序，因此在每个活动中，我都声明了 SlidingDrawer 中的所有元素，例如：我有`Act1.java`和`Act2.java`在 SlidingDrawer 中我有两个按钮：一个`Act1.java`针对其他目标，`Act2.java`但是当我在时`Act1.java`，针对此活动的按钮是`INVISIBLE`。

好的，我的问题是：我可以创建一个`slider.xml`包含所有元素的 a`Slider.java`并控制元素行为，以便每次我开始一个新活动时，`Slider.java`“加载”的内容和 SlidingDrawer 正确显示？

非常感谢您！

编辑：就像我们打电话时在 PHP 中一样，`requiered_once(slider.php);`但对于 Java-Android

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:12:41.830

是的，您可以使用（[在此处](http://developer.android.com/guide/components/fragments.html)`Fragments`阅读更多）来执行此操作。它们旨在让您在多个活动中重用某些 UI 元素。它们是在 Honeycomb 中引入的，但它们包含在[支持库](http://developer.android.com/tools/extras/support-library.html)中，因此可以一直使用它们回到 API 级别 4（甜甜圈）。

如果您只想重用布局，则可以在布局中使用`<include>`xml 标签。这是 Romain Guy 写的一篇关于包括布局的非常好的博客文章：[http ://www.curious-creature.org/2009/02/25/android-layout-trick-2-include-to-reuse/](http://www.curious-creature.org/2009/02/25/android-layout-trick-2-include-to-reuse/)

# javascript - javascript原型 - 添加回调

> ID：11585442
> 
> 赞同：4
> 
> 时间：2012-07-20T19:00:52.860
> 
> 标签：javascript, jquery

我正在使用 javascript 显示原型模式，并且我想添加一个回调。我正在尝试类似的东西：

[http://jsfiddle.net/Qyhrb/2/](http://jsfiddle.net/Qyhrb/2/)

```
 var Refinements = function () { };

  Refinements.prototype = function () {
    Init = function () {
      $('.btn').click(Callback);
    },
    Callback = function(){
      alert('default function');
    };
    return { Init: Init, Callback : Callback };
  }();

   var refinements = new Refinements();
   refinements.Callback = function(){ alert('new method'); };
   refinements.Init(); 
```

基本上我想要做的是将回调传递给对象并在事件发生时引发该回调。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T19:10:13.330

```
 Init = function () {
        var refinement = this;
        $('.btn').click(refinement.Callback || Callback);
    }, 
```

[小提琴](http://jsfiddle.net/CrossEye/FUBxq/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T19:12:27.647

```
var Refinements = function() {};

Refinements.prototype = function() {
  return {
    init: function() {
      $('.btn').click(this.callback);
    },
    callback: function() {
      alert('default function');
    }
  }
}();

var refinements = new Refinements();
refinements.callback = function() {
  alert('new method');
};
refinements.init(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T19:13:23.310

当我分离出原型功能并删除`return { Init: Init, Callback : Callback };`这块时，一切似乎都很好。

```
function Refinements() {}

Refinements.prototype.Init = function() {
    $('.btn').click(this.Callback);
};

Refinements.prototype.Callback = function() {
    alert('default function');
};

var refinements = new Refinements();
refinements.Callback = function(){ alert('new method'); };
refinements.Init();​ 
```

[http://jsfiddle.net/Qyhrb/8/](http://jsfiddle.net/Qyhrb/8/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-20T19:57:48.580

```
Foobar = function() {
    this.callBack = function() {
        alert("Default method");
    };
}

Foobar.prototype = {
    Init: function() {
        var self = this;
        $(".btn").click(function() {
            self.callBack.call();
        });
    }
};

var foobar = new Foobar();
foobar.Init();
foobar.callBack = function() {
    alert("Boo!");
}; 
```

# c# - 带有命名查询的 NHiberante Linq

> ID：11585444
> 
> 赞同：0
> 
> 时间：2012-07-20T19:00:58.523
> 
> 标签：c#, nhibernate, linq-to-sql

我有一个期望接收 IQueryable<> 接口的数据使用者，我需要通过复杂的本机查询访问我的数据库，因此是“命名查询”。

是否可以通过 NHibernate Linq 接口访问命名查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T01:22:24.150

不，这是不可能的。

Linq 比 HQL 和 SQL 级别更高，因此您无法神奇地将 SQL 转换为 IQueryable 表达式树。

# mysql - mySQL 和 monoDevelop 配置问题

> ID：11585445
> 
> 赞同：1
> 
> 时间：2012-07-20T19:00:59.803
> 
> 标签：mysql, monodevelop

我在 mono 上建立了与 mySQL 的连接，它适用于我正在处理的页面，但不适用于我项目中的任何其他页面。

另外，当我再次回到该项目时。连接的名称已保存，但未与同一页面关联，因此我的更新未通过之前使用的 localhost/test 链接注册。有谁知道为什么会这样？

我在 linux Lubuntu 上运行它，如果这样可以更清楚的话。

# ruby-on-rails-3.2 - ActiveAdmin i18n 问题

> ID：11585451
> 
> 赞同：0
> 
> 时间：2012-07-20T19:01:38.680
> 
> 标签：ruby-on-rails-3.2, activeadmin

我正在尝试在 ActiveAdmin 上添加一些标签，但它仍然无法正常工作。

错误的字符串在附件中带有下划线。

![非 i18ned 字符串](../Images/82c6131873225fb963f43ce77d502a7d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T07:22:50.090

你把你的翻译放在翻译文件的正确位置了吗？

```
your_lang:
  activerecord:
    models:
      client:
        one: Client
        other: Clients 
```

# multithreading - 无法使用 gdb 调试多线程应用程序

> ID：11585472
> 
> 赞同：15
> 
> 时间：2012-07-20T19:02:43.493
> 
> 标签：multithreading, debugging, gdb, beagleboard, angstrom-linux

我正在使用 gdb 调试多线程应用程序，但是当我在 gdb 中启动程序时，我收到警告：

> 警告：无法找到与inferior线程库匹配的libthread_db，将无法进行线程调试。

我仍然可以调试，但除了主线程之外我不能调试任何东西。我已经阅读了建议安装软件包 libthread-db1 和 glibc-dbg 的论坛，但这并不能解决我的问题。

在我的机器上，我有 3 个文件`/lib/libthread_db.so.1`、`/lib/.debug/libthread_db-1.0.so`和`/lib/libthread_db-1.0.so`. 我尝试`/lib`使用名称创建符号链接`libthread_db.so`，一次指向`/lib/libthread_db.so.1`文件，另一次指向`/lib/libthread_db-1.0.so`文件，并且我创建了`/lib/.debug/libthread_db.so`指向的符号链接`/lib/.debug/libthread_db-1.0.so`，但都没有运气。

在 gdb 中，我尝试设置`libthread-db-search-path`为`/lib`（符号链接一次设置为`libthread_db.so.1`，一次设置为 ，`libthread_db-1.0.so`也设置为`/lib/.debug`.

有什么建议么？我正在为 BeagleBoard-xm 使用 Angstrom Linux v2.6.39。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-21T03:16:56.607

> 警告：找不到与下级线程库匹配的 libthread_db

这意味着您的`/lib/libthread_db.so.1`不匹配您的`/lib/libpthread.so.0`. 这种不匹配可能是由于您安装了不同版本的`libc`和`libthread_db`软件包，或者在软件包管理系统之外更新了一个或另一个。这也可能是您的包中的错误（即它们可能没有正确构建）。

你应该*忽略* `/lib/.debug/*`——那*不是*你要找的图书馆。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-02T21:48:54.833

您尝试使用是正确的

```
set libthread-db-search-path [path] 
```

但是，您似乎仍未将其指向与您正在使用的 pthreads 库兼容的 libthread_db 版本。

首先，使用 ldd 检查您链接到的 pthread 库：

```
ldd your_executable 
```

然后确保 libthread-db-search-path 指向一个位置，该位置具有与您获得的任何 libpthread 兼容的 libthread_db 版本。可能是您的动态链接器路径获得的 pthread 库与您预期的不同。

# java - 如何知道客户端何时停止 ping Java 服务器？

> ID：11585480
> 
> 赞同：1
> 
> 时间：2012-07-20T19:03:35.003
> 
> 标签：java, servlets, client-server, embedded-jetty

我决定让我的客户端定期“ping”服务器，这样我就知道客户端还活着。我正在使用嵌入在 Java 应用程序中的 Jetty 服务器，并且我有一个 HttpServlet 来处理客户端请求。

在服务器端，我怎么知道客户端有一段时间没有“ping”（发送请求）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T19:09:40.880

通过其 sessionID 识别客户端，并跟踪最后一次 ping。定期扫描所有最后的 ping 并找到在 N 分钟内没有 ping 的那些。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T20:34:43.913

扩展 srini.venigalla 的答案，您可以使用类似这样的内容作为起点。

```
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.util.Map;
import java.util.concurrent.*;

public class PingServlet extends HttpServlet {
    private static final long EXPIRATION_MILLIS = TimeUnit.SECONDS.toMillis(30);

    private final ConcurrentMap<String, Long> sessionIdToLastPingTime = new ConcurrentHashMap<String, Long>();
    private final ScheduledExecutorService executor = Executors.newSingleThreadScheduledExecutor();

    public void init() {
        executor.scheduleWithFixedDelay(new Runnable() {
            public void run() {
                scanForExpiredSessions();
            }
        }, 30, 30, TimeUnit.SECONDS);
    }

    private void scanForExpiredSessions() {
        for (Map.Entry<String, Long> entry : sessionIdToLastPingTime.entrySet()) {
            if (Thread.currentThread().isInterrupted()) {
                return;
            }

            final String sessionId = entry.getKey();
            final Long lastPing = entry.getValue();
            if (lastPing == null) {
                // entry was removed from the map by another thread
                continue;
            }
            if (System.currentTimeMillis() > lastPing + EXPIRATION_MILLIS) {
                sessionIdToLastPingTime.remove(sessionId);
                try {
                    expireSession(sessionId);
                } catch (Exception e) {
                    // production code should use a logger
                    e.printStackTrace();
                }
            }
        }
    }

    private void expireSession(String sessionId) {
        // production code should use a logger
        System.out.println("client stopped pinging for session " + sessionId);
    }

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) {
        String sessionId = req.getSession().getId();
        sessionIdToLastPingTime.put(sessionId, System.currentTimeMillis());
    }

    @Override
    public void destroy() {
        executor.shutdownNow();

        try {
            // this is optional, but may prevent Tomcat from reporting the webapp as a memory-leaker
            executor.awaitTermination(3, TimeUnit.SECONDS);
        } catch (InterruptedException e) {                                                                          
            // production code should use a logger
            System.out.println("interrupted while waiting for executor to shut down");
            Thread.currentThread().interrupt();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T19:09:03.080

小事一桩：

1.  告诉客户端每 N 秒 ping 一次
2.  保留客户端最后一次 ping 的时间戳，在每次客户端 ping 后更新时间戳
3.  如果此时间戳明显大于 N 秒，则客户端已停止 ping（至少现在）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T19:11:29.253

在服务器端，您可以使用 java Date 类来存储您上次收到 ping 的时间。

```
long lastRecv = System.getTimeMillis(); 
```

在另一个循环中（可能是另一个定期检查所有已知客户端数组的线程），您将检查 lastRecv 时间码并将其与现在进行比较。

```
if( date.getTime() - lastRecv > TIMEOUT_IN_MS )
    // Handle user timing out 
```

每次收到新的 ping 时，只需将 lastRecv 时间更新为新的当前时间。您将知道用户何时超时，因为您有一些预设阈值（例如 TIMEOUT_IN_MS）小于您上次看到 ping 进入的时间。

显然，您必须修改我在此处提供的示例代码以反映客户端的数量、您的线程模型和数据模型，但我认为它已经很好地传达了这个想法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T20:30:33.043

也许使用具有短会话超时的 HttpSessionListener？

[http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpSessionListener.html](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpSessionListener.html)

# c++ - 记录已发送到流的字节数的轻量级方法？

> ID：11585481
> 
> 赞同：2
> 
> 时间：2012-07-20T19:03:36.410
> 
> 标签：c++, stream

我正在编写一个在完成时生成一个大日志文件（+10GB）的程序。为了拆分它，在我的日志记录功能中，一旦`n`写入行，我就会将输出重定向到一个新的文件名。

但是，此文件中的某些行可能很大（+100k 字符），有些不超过 10 个字符，大的可以聚集在一起。我宁愿按字节大小而不是按行拆分输出。

持续跟踪已发送到 c++ 流的字节数的最轻量级方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T19:09:34.840

如果您使用 a `std::ostream`，请查看[`tellp()`](http://en.cppreference.com/w/cpp/io/basic_ostream/tellp)成员函数，该函数返回放置区域的当前位置。您可以将其用作写入字节数的代理。例如：

```
std::ofstream file(name);
auto i = file.tellp();
// write large log file.
auto j = file.tellp();

if (i != -1 && j != -1) // tellp returns -1 on error.
  std::cout << "bytes written: " << j - i << std::endl; 
```

另请注意，尽管它会`tellp`刷新自 C++11 以来的绑定输出流。

# python - Python unittest下的时间戳测试

> ID：11585482
> 
> 赞同：3
> 
> 时间：2012-07-20T19:03:37.697
> 
> 标签：python, unit-testing

```
 class ATestCase(unittest.TestCase):
        def test_A ...
        def test_B ...
        def test_C ... 
```

单元测试输出包括

```
 test_A ...
    test_B ...
    test_C ... 
```

如何在测试名称前获取时间戳？即我想看看

```
 12:15:32 test_A ...
    12:15:33 test_B ...
    12:16:45 test_C ... 
```

显而易见的方法（setUp()、run...() 等）要么将时间戳放在测试名称之后，要么将它们放在一起。

（这是在 python 2.5 上）

解决了：

```
class MyTextTestRunner(unittest.TextTestRunner):
    def _makeResult(self):
        print >>stderr, _now(), ' ',
        return super(MyTextTestRunner,self)._makeResult() 
```

更新：这只是部分解决方案。它仅输出每个 TestCase 中第一个测试的时间戳。（示例中的 test_A。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T03:53:31.847

您是否考虑过在测试方法中使用装饰器？

您可以装饰方法本身或继承的方法。

像[这样](http://melp.nl/2011/02/enhancing-python-unit-tests-with-more-decorators/)的东西。

# c++ - QObject 作为域对象的基类。过度工程？

> ID：11585483
> 
> 赞同：2
> 
> 时间：2012-07-20T19:03:37.697
> 
> 标签：c++, qt

我正在为本地 SOHO 构建一个 POS/Inventory/Bookkeeping 应用程序，我想知道是否应该将我的所有域对象都基于 QObject。

我来自 vba/MS Access 编程，非常讨厌到处写 SQL，复制数据访问代码等等，我想一次写一个很好的数据抽象——我想 Qt Signal 和 Slots 可能会为我提供这些.

然后，所有模型将只是 QObjects 的列表/树，CRUD 表单将修改对象-> 对象，然后向它所属的任何模型发出信号，模型向与其连接的任何视图发出信号，一切都很好并被抽象掉了。

Qt 属性系统对于滚动简单的 ORM 也很有用，因为我设计了自己的表，因此讨厌为你做这件事的 ORM ^^

但是后来我读[了这个问题](https://stackoverflow.com/questions/3275983/qt-is-it-a-good-idea-to-base-my-domain-objects-on-qobject?rq=1)，并开始怀疑我是否过度设计了这个？

请注意，我知道我再也不会在应用程序中不编写 SQL 了，直到 LINQ 很快进入 C++ ^^... 但关键是我这次至少要尝试做一件事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T19:38:16.270

QObjects 有一些你可能不希望在数据类中出现的奇怪属性：

1.  他们有一个内置的所有权树。每个 QObject 都维护一个父指针和一个子列表（当它被删除时它会删除）。
2.  它们被认为是“实体”——这意味着它们不能被复制。没有复制构造函数，也没有赋值运算符。出于这个原因（并且为了避免#1 的膨胀），QT 数据类型（QString、QHash 等）不是 QObjects。

如果您决定不想要/不需要这些，我建议您改为：保留您的类“vanilla”，但*将*它们存储在[QAbstractItemModel](https://qt-project.org/doc/qt-4.8/qabstractitemmodel.html)的 QObject 后代中。这使您的数据类尽可能小，但可以让您以最少的工作将它们显示在[QAbstractItemView的任何后代中。](https://qt-project.org/doc/qt-4.8/qabstractitemview.html)然后，您的模型会获得操作底层数据类所需的任何信号和插槽。

事实上，即使您*确实*将数据类设为 QObject，让模型“管理”集合也是一个不错的主意。这只是一点点额外的代码，它使显示内容变得非常容易。

希望这有用！

# sql - 我可以在 Teradata 中查询过程的 RequestText 吗？

> ID：11585488
> 
> 赞同：5
> 
> 时间：2012-07-20T19:03:55.470
> 
> 标签：sql, stored-procedures, teradata

Teradata 有一个有用的视图`dbc.tables`，您可以使用它来查询对象。我已经使用它`RequestText`成功地查询了 in 视图，但过程的编译似乎有点不同。

当我查看`RequestText`一个过程（TableKind P）时，我得到的只是这样的：

```
ALTER PROCEDURE '468137'xn.'546321987654321345646556213165468654654654'xn COMPILE /* mydb.procedurename */; 
```

这是对存储在其他地方的实际 RequestText 的引用吗？我怎么去呢？

我想用 SQL 实际查询它，而不是将其转储到文本文件中。

原因是因为我需要对其运行 LIKE 语句来搜索对特定表名的引用。必须将其转储到文本文件然后手动搜索文本文件会很不方便。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-21T00:03:12.677

存储过程被编译为可执行对象。在 Windows 上，它们被编译成 DLL。在 Unix 上，它们被编译成共享对象。这些对象存储在所属数据库中。

[这是在Teradata 论坛](http://forums.teradata.com/forum/database/where-are-stored-procedures-stored)上提出的类似问题。

**查看原始过程代码**

由于它们已编译，原始代码不会在类似的地方可见`DBC.Tables`，所以不幸的是，正如您所发现的，以下查询`DBC.Tables`将不起作用。

```
SELECT *
FROM DBC.Tables
WHERE TableKind = 'P'
AND RequestText LIKE '%abc%'; 
```

相反，检索存储过程代码的唯一方法是执行以下操作：

```
SHOW PROCEDURE mydb.procedurename; 
```

**如何查找包含特定字符串的存储过程**

我要做的是使用`VBScript`或`VBA`通过 ODBC 连接到 Teradata。我将首先运行它以获取所有存储过程的列表：

```
SELECT *
FROM DBC.Tables
WHERE TableKind = 'P'; 
```

然后，我将遍历每个结果并运行以下命令，将结果保存到 VBA 中的变量中。

```
SHOW PROCEDURE <dbname>.<tablename>; 
```

然后我会使用类似[InStr()](http://www.techonthenet.com/excel/formulas/instr.php)函数的东西来查找代码何时包含某个文本字符串。

当然，这比我认为您最初希望的要复杂得多。

**备用选项**

另一种选择是利用`DBQL`数据库中的表，如果它们可供您使用的话。

该数据库包含一些“日志”表，您可以在其中查看系统上执行的所有 SQL 语句的历史记录。

这样，您可以运行您最初希望使用`LIKE`条件的查询类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-30T01:37:39.633

在经过测试的 Teradata 15 之前，SHOW PROCEDURE 技巧现在可能并不总是适用于 Teradata 14.1；虽然不确定最新版本。这是因为对象名称（即表、视图、存储过程等）现在的字符长度可以超过 30 个字符。如果对象名称不止于此，则 DBC.Tables 视图将无法检索使用相等条件过滤的 TABLENAME 的记录。可能需要使用“LIKE”关键字限定符。DBC.Tables 在视图中有一个 SUBSTRING 函数，仍然将名称限制为 30。您仍然可以通过 DBC.TVM 获取完整的对象/表名称；但前提是您具有 SELECT 访问权限，除了 DBA 之外通常不会授予该权限。

最好的问候，赢

# mysql - MySQL 使用 Python 在不同服务器上的数据库之间连接？

> ID：11585494
> 
> 赞同：0
> 
> 时间：2012-07-20T19:04:05.503
> 
> 标签：mysql, python-2.7

数据库 A 位于服务器 server1 上，而数据库 B 位于服务器 server2 上。

两台服务器 {A, B} 在物理上彼此靠近，但位于不同的机器上并且具有不同的连接参数（不同的用户名、不同的密码等）。

在这种情况下，是否可以在数据库 A 中的表和数据库 B 中的表之间执行连接？

如果是这样，我该如何以编程方式进行，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T19:21:16.573

我不知道python，所以我假设当你进行查询时，它会以行数组的形式返回给python。

您可以查询表 A，并在应用任何过滤器后，将该结果返回给应用程序。与表 B 相同。创建第三个数组，遍历 A，如果 B 中有连接行，则将该连接行添加到第三个数组。最后，第三个数组将相当于两个表的连接。它不会非常有效，但可能适用于小型记录集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T19:11:04.937

如果不执行诸如将数据库 A 复制到与数据库 B 相同的服务器上然后执行 JOIN 之类的操作，则这是不可能的。

# c# - MVC 嵌套模型绑定只能部分工作 - 我错过了什么？

> ID：11585499
> 
> 赞同：3
> 
> 时间：2012-07-20T19:04:50.520
> 
> 标签：c#, asp.net-mvc, model-binding

我有一个名为 AssetSearchModel 的 ViewModel，其属性类型为：List。

当我从 ViewModel 发布时，我的 List 的所有属性都成功绑定回模型，除了这个：`public DomainsDto DomainControl { get; set; }`在底部定义。

该域控制有几个属性，然后是它自己的嵌套列表......它的任何属性都没有设置，它们都是空的

```
public class AssetSearchModel
{
    public List<SearchControlModel> SearchControls { get; set; }

    public AssetSearchModel()
    {
    }

}

public class SearchControlModel
{

    /// <summary>
    /// Asset identifier.
    /// </summary>
    [DisplayName("AssetId ID")]
    public int SearchOptionID { get; set; } // this gets bound ok

    [DisplayName("Asset Customer ID")]
    public int AssetCustomerID { get; set; } // this gets bound ok

    [DisplayName("Portal ID")]
    public int PortalID { get; set; } // this gets bound ok

    [DisplayName("Calling Page")]
    public string CallingPage { get; set; } // this gets bound ok

    [DisplayName("Display Control")]
    public string DisplayControl { get; set; } // this gets bound ok

    [DisplayName("Display Text")]
    public string DisplayText { get; set; } // this gets bound ok

    public string ControlValue { get; set; } // this gets bound ok

    [DisplayName("Search Table")]
    public string SearchTable { get; set; } // this gets bound ok

    [DisplayName("Search Column")]
    public string SearchColumn { get; set; } // this gets bound ok

    [DisplayName("Source Table")]
    public string SourceTable { get; set; } // this gets bound ok

    [DisplayName("Source Display Column")]
    public string SourceDisplayColumn { get; set; } // this gets bound ok

    [DisplayName("Source Value Column")]
    public string SourceValueColumn { get; set; } // this gets bound ok

    [DisplayName("SourceCustomFilter")]
    public string SourceCustomFilter { get; set; } // this gets bound ok

    [DisplayName("SortOrder")]
    public int SortOrder { get; set; } // this gets bound ok

    [DisplayName("DomainControl")]
    public DomainsDto DomainControl { get; set; } // THIS DOES NOT BIND

    public SearchControlModel()
    {

    }

} 
```

* * *

```
public class DomainsDto
{
    public int DomainMasterId;      // this does not bind
    public string DisplayName;     // this does not bind
    public List<DomainDto> Domains;  // this does not bind
    public DomainsDto()
    {

    }

}

[DataContract(Name = "Domain", Namespace = "http://www.comcom.com/")]

public class DomainDto
{
    [DataMember]
    public int DomainID { get; set; }   // this does not bind

    [DataMember]
    public string DomainName { get; set; }  // this does not bind

    [DataMember]
    public bool Checked { get; set; }   // this does not bind

    public DomainDto()
    {

    }
} 
```

和我的观点：

```
 @for (int y = 0; y < Model.SearchControls.Count; y++)
     {

        @Html.Label("Search option: " + Model.SearchControls[y].DisplayText)
        <br />
        @Html.HiddenFor(x => x.SearchControls[y].DisplayText)
        @Html.HiddenFor(x => x.SearchControls[y].CallingPage)
        @Html.HiddenFor(x => x.SearchControls[y].DisplayControl)
        @Html.HiddenFor(x => x.SearchControls[y].SourceCustomFilter)
        @Html.HiddenFor(x => x.SearchControls[y].SearchTable)
        @Html.HiddenFor(x => x.SearchControls[y].SearchColumn)
        @Html.HiddenFor(x => x.SearchControls[y].SourceValueColumn)

         if (Model.SearchControls[y].DomainControl != null)
         {

             @Html.HiddenFor(x => x.SearchControls[y].DomainControl.DisplayName) 

             @Html.HiddenFor(x => x.SearchControls[y].DomainControl.DomainMasterId)

             if (Model.SearchControls[y].DomainControl.Domains != null)
             {
                 for (int z = 0; z < Model.SearchControls[y].DomainControl.Domains.Count; z++)
                 {

                    @Html.HiddenFor(x => x.SearchControls[y].DomainControl.Domains[z].DomainID)
                    @Html.HiddenFor(x => x.SearchControls[y].DomainControl.Domains[z].DomainName)
                    @Html.HiddenFor(x => x.SearchControls[y].DomainControl.Domains[z].Checked)

                    <br />
                 }
             }
         }

         <br />
         <br />
         <hr width=100px />

     } 
```

html（对不起单行，它不会让我以不同的方式粘贴它）

```
<label for="Search_option:_Product_Lines">Search option: Product Lines</label> <input id="SearchControls_1__DisplayText" name="SearchControls[1].DisplayText" type="hidden" value="Product Lines" /> <input id="SearchControls_1__CallingPage" name="SearchControls[1].CallingPage" type="hidden" value="AssetSearch" /> <input id="SearchControls_1__DisplayControl" name="SearchControls[1].DisplayControl" type="hidden" value="M" /> <input id="SearchControls_1__SourceCustomFilter" name="SearchControls[1].SourceCustomFilter" type="hidden" value="26" /> <input id="SearchControls_1__SearchTable" name="SearchControls[1].SearchTable" type="hidden" value="AssetDomainValue" /> <input id="SearchControls_1__SearchColumn" name="SearchControls[1].SearchColumn" type="hidden" value="Brand" /> <input id="SearchControls_1__SourceValueColumn" name="SearchControls[1].SourceValueColumn" type="hidden" value="DomainCodeValueID" />   <input id="SearchControls_1__DomainControl_DisplayName" name="SearchControls[1].DomainControl.DisplayName" type="hidden" value="Product Line" /> <input id="SearchControls_1__DomainControl_DomainMasterId" name="SearchControls[1].DomainControl.DomainMasterId" type="hidden" value="26" />  <input id="SearchControls_1__DomainControl_Domains_0__DomainID" name="SearchControls[1].DomainControl.Domains[0].DomainID" type="hidden" value="43680" /> <input id="SearchControls_1__DomainControl_Domains_0__DomainName" name="SearchControls[1].DomainControl.Domains[0].DomainName" type="hidden" value="YORK" /> <input id="SearchControls_1__DomainControl_Domains_0__Checked" name="SearchControls[1].DomainControl.Domains[0].Checked" type="hidden" value="False" />                        <input id="SearchControls_1__DomainControl_Domains_1__DomainID" name="SearchControls[1].DomainControl.Domains[1].DomainID" type="hidden" value="43683" /> <input id="SearchControls_1__DomainControl_Domains_1__DomainName" name="SearchControls[1].DomainControl.Domains[1].DomainName" type="hidden" value="Johnson Controls" /> <input id="SearchControls_1__DomainControl_Domains_1__Checked" name="SearchControls[1].DomainControl.Domains[1].Checked" type="hidden" value="False" />                        <br /> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-20T19:26:41.730

啊，不，模型绑定器仅适用于[属性](http://msdn.microsoft.com/en-us/library/x9fsa0sw.aspx)，而不适用于[字段](http://msdn.microsoft.com/en-us/library/ms173118.aspx)。

所以替换：

```
public class DomainsDto
{
    public int DomainMasterId;       // this does not bind
    public string DisplayName;       // this does not bind
    public List<DomainDto> Domains;  // this does not bind
    public DomainsDto()
    {

    }
} 
```

和：

```
public class DomainsDto
{
    public int DomainMasterId { get; set; }       // this does bind
    public string DisplayName  { get; set; }      // this does bind
    public List<DomainDto> Domains { get; set; }  // this does bind
    public DomainsDto()
    {

    }
} 
```

But really, what's the whole point of stuffing a gazzilion of hidden fields in a form? You already have this stuff in your db or something. So simply put a hidden field containing an id that will allow you to go and fetch the data wherever this data resides. I've always wondered people why are people so desperately trying to reinvent the ViewState for MVC. It's just not the way this pattern is meant to be used. You are no longer doing classic WebForms.

Here's a rule that should drive you when designing an ASP.NET MVC view:

*   whatever fields the user is supposed to modify use corresponding input fields (textboxes, radios, ddls and stuff)
*   whatever fields the user is not supposed to modify, it shouldn't appear in the form. You should have at maximum one hidden field per form containing at maximum an unique identifier allowing you to retrieve the information you need

Conclusion: **use view models**.

So the **real** solution to your problem is to replace:

```
[DisplayName("DomainControl")]
public DomainsDto DomainControl { get; set; } // THIS DOES NOT BIND 
```

with:

```
public int DomainControlId { get; set; } 
```

and using a single hidden field for this id in the view. That's it.

# c# - 将输入字段绑定到列表

> ID：11585502
> 
> 赞同：1
> 
> 时间：2012-07-20T19:05:09.060
> 
> 标签：c#, asp.net-mvc-2

我正在尝试创建一个具有 TextAreaFor 电子邮件地址的表单。有电子邮件地址存储在数据库中。我希望这些存储的地址成为该字段的默认值，然后允许用户在他们认为合适的情况下从列表中添加或删除地址。

我的视图模型；

```
public List<string> EmailAddresses { get; set; } 
```

我的观点：

```
<%= Html.TextAreaFor(m => m.EmailAddresses) %> 
```

（这是错误的，因为它`System.Collections.Generic.List`在输入字段中显示 1[System.String]` 而不是列表中的每个项目。

我知道我可以遍历列表并为列表中的每个元素显示一个单独的文本框，但我希望每个元素都列在单个 textArea 中。（类似于实际的电子邮件客户端，您可以输入多个用逗号或半分隔的地址）这可能吗？我已经搜索过，但没有找到这种情况，这似乎很奇怪，因为我认为它一定不会罕见。我认为解决方案可能是编写自定义编辑器模板，但我希望有一个更简单的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:17:41.833

我会在 MVC 中使用 listboxfor 而不是文本区域。这样，您可以选择列表中的单个条目，然后通过单击按钮并重定向到另一个页面或在同一页面上添加您想要添加的文本框来编辑、删除或添加到该列表。看看这个例子。[http://www.aspnetmvcninja.com/views/asp-net-mvc-select-list-example](http://www.aspnetmvcninja.com/views/asp-net-mvc-select-list-example)

此外，如果您想在单个测试区域中输入大量数据，然后添加到列表中，请尝试在“，”上使用 TryParse 来分隔电子邮件地址。然后将它们添加到列表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T19:34:56.780

你可以像这样扩展你的视图模型。

**视图模型** 公共类 PeopleViewModel {

```
 public List<string> EmailAddress { get; set; }

    public string EmaiAddressString {
        get {
            string rValue = string.Empty;
            EmailAddress.ForEach(x => rValue += (x + "\n" ));
            return rValue;
        }
        set {
            var newValue = value.Split(new string[] { Environment.NewLine }, StringSplitOptions.None).ToList<string>();
            EmailAddress = newValue;
        }

    }
} 
```

**看法**

```
@model SigKoExample.Models.PeopleViewModel
@{
    ViewBag.Title = "Index";
}
<h2>Index</h2>
@if (IsPost) {
    <h2>New Values</h2>
    @Html.TextArea("EmailAddresses", Model.EmaiAddressString.ToString())
} else {
    using (Html.BeginForm()) { 
        @Html.TextAreaFor(m => m.EmaiAddressString)
        @Html.HiddenFor(m => m.EmailAddress)
        <input type="submit" value="Save" />                               
    }
} 
```

**控制器**

```
public ActionResult Index() {
    PeopleViewModel model = new PeopleViewModel {
        EmailAddress = new List<string> {
            "ValueOne",
            "ValueTwo"
        }
    };
    return View(model);
}

[HttpPost]
public ActionResult Index(PeopleViewModel model) {
    return View(model);
} 
```

# java - 多个继承的序列化保持向后兼容性

> ID：11585506
> 
> 赞同：1
> 
> 时间：2012-07-20T19:05:24.447
> 
> 标签：java, inheritance, serialization

我的组织使用自定义序列化技术，我们使用输出流迭代地存储对象。我遇到了以下问题：

`Parent`和`Child`类实现`Serializable`. `Parent`类有字段`a,b,c`，`Child`类有`e`。我将字段添加`d`到`Parent`并更新了父序列化，现在我们的旧客户端无法`Child`正确读取序列化代码。这是因为`Child`序列化代码如下：

```
OutputStream in = getCurrentOutStream();

current_serialization_num = readVersionNum(in) // The version num is similar to Java's UID and is updated when fields are added.
readParent(in)
e = readField(in) 
```

由于序列化是通过 a 完成的`DataOutputStream`，好的 XML 阅读器无法处理这个问题。我对这个问题有一个丑陋的解决方案，但它根本不会很好地扩展，所以我宁愿不通过介绍它来污染读者的思想。但是，我真的很想听听其他人如何处理类似的情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:25:19.380

旧 Parent 创建的对象由旧的 serialVersionUID 序列化。新对象由新的 serialVersionUID 序列化。您实现这一点的方式，Child 无法同时读取旧对象和新对象。

您要么必须具有相同的 serialVersionUID。如果编译器抱怨放一个抑制注释。您想清楚地传达编译器它是同一个对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T19:53:45.007

好的，这就是问题所在。我了解您正在使用此类来序列化您的数据，但是，这是一个类定义。问题不是序列化问题。您已经构建了类以特定方式读取文件，现在您正在以不同的方式构建文件。它不会“序列化”，因为它不再是同一类型的文件。如果你说：我用 a 然后 b 然后 c 字段创建一个文件，并且此类将在第一个字段中读取为 a，第二个字段为 b 等。然后将文件更改为使用 b，c，然后是 a。旧班级仍然会认为“a”是第一位的，没有理由不应该这样做。

# asp.net - 向图表的轴添加更多标签

> ID：11585511
> 
> 赞同：1
> 
> 时间：2012-07-20T19:06:13.017
> 
> 标签：asp.net

我正在制作一个使用一些图表的 ASP.NET。目前，一张图表在 Y 轴上显示了节省。该图表仅在 Y 轴上显示 4 个标签，在本例中为 0、200、400 和 600。如何使图表在一个轴上显示更多标签，例如我想要 0、100、200、300、400， 500、600？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:27:46.013

将轴的 IntervalAutoMode 从 FixedCount 更改为 VariableCount 做到了。

```
<AxisY IntervalAutoMode="VariableCount">
</AxisY> 
```

# android - 倒置旋转不会触发配置更改

> ID：11585512
> 
> 赞同：6
> 
> 时间：2012-07-20T19:06:14.547
> 
> 标签：android

当我将我的 Android 手机倒置时，我的 Activity 不会旋转以显示倒置的布局，而是保持在横向模式。我用一个非常简单的 HelloWorld 应用程序尝试了这个。我添加`android:configChanges="orientation"`到清单并`onConfigurationChange()`在 Activity 中覆盖以在那里设置断点。将设备倒置旋转会产生从纵向（倒置）到横向的一次配置更改，但不会从横向到纵向（倒置）进行第二次更改。这是Android问题还是我需要做些什么？

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="hello.world"
    android:versionCode="1"
    android:versionName="1.0" >
   <uses-sdk android:minSdkVersion="10" />
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:configChanges="orientation"
            android:name=".HelloWorldActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

活动：

```
public class HelloWorldActivity
  extends Activity
{
  /** Called when the activity is first created. */
  @Override
  public void onCreate(Bundle savedInstanceState)
  {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
  }

  public void onConfigurationChanged(Configuration newConfig)
  {
    super.onConfigurationChanged(newConfig);
    if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE)
    {
      Log.e("MDO", "orientation change: landscape");
    }
    else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT)
    {
      Log.e("MDO", "orientation change: portrait");
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-20T19:12:00.177

这不是问题，这就是 Android 的工作方式。它只在横向模式下倒置而不是纵向（如果我没记错的话，从 2.2 版开始是横向）。当从纵向变为横向时会发生配置更改，反之亦然。如果您想检查手机是否倒置或朝任何方向翻转，您必须访问加速度计传感器。这是一个关于如何使用它的[教程，在这里你有](http://www.techrepublic.com/blog/app-builder/a-quick-tutorial-on-coding-androids-accelerometer/472)[`SensorManager`文档](http://developer.android.com/reference/android/hardware/SensorManager.html)。

编辑：正如问题的作者自己发现的那样，添加`android:screenOrientation="fullSensor"`到您的清单就足够了，**前提是您不想支持任何早于 Android 2.3 (API level 9) 的东西**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T20:45:56.227

设置`android:screenOrientation="fullSensor"`完成了我想要做的事情。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-20T19:11:50.037

在您的 mafifest 中的 configChanges 中包含 screenSize：

```
android:configChanges="orientation|screenSize" 
```

从[http://developer.android.com/guide/topics/resources/runtime-changes.html](http://developer.android.com/guide/topics/resources/runtime-changes.html)：

> 从 Android 3.2（API 级别 13）开始，当设备在纵向和横向之间切换时，“屏幕尺寸”也会发生变化。因此，如果您想在为 API 级别 13 或更高级别（由 minSdkVersion 和 targetSdkVersion 属性声明）进行开发时防止由于方向更改而导致运行时重新启动，则除了“orientation”值之外，还必须包含“screenSize”值。也就是说，您必须声明 android:configChanges="orientation|screenSize"。但是，如果您的应用程序以 API 级别 12 或更低级别为目标，那么您的 Activity 始终会自行处理此配置更改（此配置更改不会重新启动您的 Activity，即使在 Android 3.2 或更高版本的设备上运行时也是如此）。

# asp.net - Checkboxlist 以编程方式添加，有问题

> ID：11585515
> 
> 赞同：0
> 
> 时间：2012-07-20T19:06:54.030
> 
> 标签：asp.net, vb.net, vbscript

代码保留只会将第一个选中的名称添加到复选框，不会添加其他复选框，但是每次单击 btn 时都会不断添加复选框列表。不知道为什么会这样。请帮忙

```
Partial Class ShermanZone
    Inherits System.Web.UI.Page
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        If Not IsPostBack Then
            CheckBox()
        End If
    End Sub
    Protected Sub CheckBox() Handles CheckBoxList1.SelectedIndexChanged
        CheckBoxList1.Items.Add(New ListItem("Jeff"))
        CheckBoxList1.Items.Add(New ListItem("Kristin"))
        CheckBoxList1.Items.Add(New ListItem("Scott"))
        CheckBoxList1.Items.Add(New ListItem("Karri"))
        CheckBoxList1.Items.Add(New ListItem("Amy"))
    End Sub
    Protected Sub btnClick_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btnClick.Click
        Dim strTextBox As String = String.Empty

        For Each picked As ListItem In CheckBoxList1.Items
            If picked.Selected Then
                If String.IsNullOrWhiteSpace(strTextBox) Then
                    strTextBox = picked.Value
                Else
                    strTextBox += ("," & picked.Value)
                End If
            End If
            Exit For
        Next picked

        txtOutput.Text = strTextBox
    End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T19:20:26.580

删除`SelectedIndexChanged`事件处理程序。

所以与其：

```
Protected Sub CheckBox() Handles CheckBoxList1.SelectedIndexChanged
    CheckBoxList1.Items.Add(New ListItem("Jeff"))
    ' ..... '
    CheckBoxList1.Items.Add(New ListItem("Amy"))
End Sub 
```

这个：

```
Protected Sub CheckBox()
    CheckBoxList1.Items.Add(New ListItem("Jeff"))
    ' ..... '
    CheckBoxList1.Items.Add(New ListItem("Amy"))
End Sub 
```

否则，它也会在回发时触发并将所有项目再次添加到列表中。

除此之外，您可以简化您的按钮单击处理程序，您可以在其中附加所选项目的值：

```
Protected Sub btnClick_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles BtnClick.Click
    Dim picked = From item In CheckBoxList1.Items.Cast(Of ListItem)()
               Where item.Selected
               Select item.Value

    txtOutput.Text = String.Join(",", picked)
End Sub 
```

# git - 如何确定 git 中的分支何时合并到主干中

> ID：11585518
> 
> 赞同：1
> 
> 时间：2012-07-20T19:07:03.390
> 
> 标签：git, merge, branch, trunk

当分支合并时，我试图找出主干中的修订，但我不确定如何。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:11:08.303

您可以在 github.com 上查看您的存储库的网络图。它将显示所有分支的流程图以及它们是否或何时与正确的修订号合并。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T19:19:10.597

```
git log --all --decorate --one-line --graph 
```

将允许您在不离开命令行的情况下查看历史记录。

# c# - Android/C# - 我的套接字不会发送/监听

> ID：11585521
> 
> 赞同：1
> 
> 时间：2012-07-20T19:07:07.443
> 
> 标签：c#, android, sockets

我有一个套接字，我正在尝试将信息从客户端发送到服务器。两者都位于同一网络上，具有不同的 LAN IP（如下）：

我的服务器是我的 C# 应用程序。- 192.168.0.2 我的客户端是我的 Android 应用程序。- 192.168.0.7

这是我`TcpListener`的服务器：

```
server = new TcpListener(IPAddress.Parse("192.168.0.7"), 7079); 
```

这是我在客户端上的连接：

```
Socket conn = new Socket("192.168.0.2", 7079); 
```

首先，我不确定将什么作为`TcpListener`IP。显然我所拥有的是错误的，因为它抛出一个`SocketException`: `The requested address is not valid in its context`。

编辑：

第一个问题解决了，我使用模拟器运行并`10.0.2.2`输入连接IP。现在，C# 正在抛出异常。这是周围的代码：

***删除完整代码以防止泄露***

在以 开头的行中`while`，我得到一个`ObjectDisposedException`说法，即 NetworkStream 已被处置。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:43:42.907

您不应该为`TCP Listener`. 客户端用来连接的 IP 地址就是计算机的 IP 地址。只有客户端应该为`Socket`应该连接的位置添加一个 IP 地址。

编辑：我的意思是你应该使用“127.0.0.1”，`TCPListener`因为它指向它自己。然后您使用该`AcceptTcpClient`方法接受客户。

为您找到了一个示例[http://theanti9.wordpress.com/2008/02/13/c-tcplistener-example/](http://theanti9.wordpress.com/2008/02/13/c-tcplistener-example/)

另一个编辑：对不起，也许是`IPAddress.Any`监听器 IP 地址？我的 C# 对于它的预期已经生锈了，但它应该是这两者之一。

另一个编辑：查看您最新的代码编辑后，您正在调用`client.Close()`您的监听循环。这会导致客户端关闭`Socket`连接，从而使`Stream`您创建的对象无效。这就是它给你`ObjectDisposed`错误的原因，因为 Stream 不再存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T19:20:26.697

如果您使用的是 Android 模拟器，则需要注意 IP 地址。

从与此相关的另一个 Stack Overflow 答案中引用 Matthias 的答案（可在此处找到：[How to get the Android Emulator's IP address?](https://stackoverflow.com/questions/1720346/how-to-get-the-android-emulators-ip-address)）

> 在您的应用程序中，您可以简单地将模拟器称为“localhost”或 127.0.0.1。
> 
> Web 流量通过您的开发机器路由，因此模拟器的外部 IP 是您的提供商分配给该机器的任何 IP。开发机器始终可以从您的设备访问 10.0.2.2。

假设开发机器正在运行您的服务器，如果您将代码更改为使用 10.0.2.2 IP 地址，您的问题很可能会得到解决。

# c# - 如何在 c# / .net 中评估数学表达式

> ID：11585524
> 
> 赞同：3
> 
> 时间：2012-07-20T19:07:10.423
> 
> 标签：c#, .net, parsing, expression

> **可能重复：**
> [使用 C# 将字符串表达式转换为整数值](https://stackoverflow.com/questions/2607798/converting-string-expression-to-integer-value-using-c-sharp)

我只是想知道 C# / .NET 中是否有任何内置函数可以在运行时解析和评估数学表达式。

我们的用户应该能够将表达式写入文本文件，例如

```
bmi = weight / (height * height) 
```

然后程序应该能够计算这些公式

对于我们的表达式，我们至少需要这些能力：

*   基本算术运算 + - * /
*   括号
*   计算平方根和自然对数的函数，如 sqrt()、ln()
*   使用预定义的变量。变量将由我们的程序填充，然后用户应该能够使用它们进行计算。

如果 .NET 中没有这样的东西，是否有可以推荐的库？

好吧，我自己可以编写一个表达式解析器——我知道所有关于它的理论，这甚至是大学里最伟大的事情之一 :-)——但是，感觉就像重新发明轮子一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T19:10:31.293

在 BCL 中最接近的是[`Expression`](http://msdn.microsoft.com/en-us/library/system.linq.expressions.expression.aspx)类，尽管它**没有**解析功能。

[.NET 有一堆第三方](http://www.codeproject.com/Articles/7335/An-extensible-math-expression-parser-with-plug-ins)的[数学](http://ncalc.codeplex.com/)[表达式](http://www.codeproject.com/Articles/3886/A-Math-Expression-Evaluator) 解析器，所以你不需要重新发明轮子。

# facebook - MonoTouch 集成 facebook 取消按钮不可见

> ID：11585526
> 
> 赞同：1
> 
> 时间：2012-07-20T19:07:18.753
> 
> 标签：facebook, xamarin.ios, cancel-button

我正在使用 MonoTouch 开发一个 iOS 应用程序，我在这个应用程序中集成了 Facebook sdk，但是 facebook 屏幕上的取消按钮是不可见的。我在这里看到了这个解决方案[Facebook 取消按钮是不可见的](https://stackoverflow.com/questions/6991852/facebook-cancel-button-is-invisble)

但我不知道 FBDialog.bundle 在单点触控方面是什么意思，有人有想法吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T15:43:05.167

我假设您正在使用[来自 github 的 facebook 绑定](https://github.com/mono/monotouch-bindings/tree/master/facebook)并自己构建它。

> 我不知道 FBDialog.bundle 在单点触控方面是什么意思

A`.bundle`是一个目录。它可以包含资源，例如位图。

当您构建绑定时，将从 github 下载 Facebook SDK的[源代码](https://github.com/facebook/facebook-ios-sdk)，包括包含您正在寻找的[位图的](https://github.com/facebook/facebook-ios-sdk/tree/master/src/FBDialog.bundle/images)[FBDialog.bundle 。](https://github.com/facebook/facebook-ios-sdk/tree/master/src/FBDialog.bundle)

您需要告诉 MonoDevelop 将其包含`.bundle`在您的应用程序中。请参阅 Craig Dunn 的[博客条目](http://conceptdev.blogspot.ca/2009/08/monotouch-settingsbundle.html)，了解如何添加捆绑包。一旦添加到您的应用程序中，SDK 将能够找到（并使用）它需要的位图。

# php - Uploadify- 操作完成，但没有上传

> ID：11585527
> 
> 赞同：1
> 
> 时间：2012-07-20T19:07:21.663
> 
> 标签：php, jquery, file-upload, uploadify

我将 Uploadify 下载到我的网站，但无法上传所选文件。你可以在这里看到它：http: [//www.guydavid.org/test/](http://www.guydavid.org/test/)

文件夹树：

*   测试
    *   上传
        *   ...上传文件...
    *   上传
    *   索引.php

索引.php：

```
<!DOCTYPE html>
<html lang='en' xml:lang='en' xmlns='http://www.w3.org/1999/xhtml'>
<meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
<title>File Management</title>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="uploadify/jquery.uploadify-3.1.min.js"></script>
<link rel="stylesheet" type="text/css" href="uploadify/uploadify.css" />
<script type="text/javascript">
$(document).ready(function() {
    $(function() {
        $('#file_upload').uploadify({
            'swf'      : 'uploadify/uploadify.swf',
            'uploader' : 'uploadify/uploadify.php',
            'method'   : 'post',
            'formData' : { 'someKey' : 'someValue' },
            'folder'      : '/uploads',
            'auto'        : true,
            'onError'     : function (event,ID,fileObj,errorObj) {
                alert(errorObj.type + ' Error: ' + errorObj.info);
            }
        });
    });
});
</script>
</head>
<body>

<input type="file" name="file_upload" id="file_upload" />

</body>

</html> 
```

上传.php：

```
<?php
/*
Uploadify
Copyright (c) 2012 Reactive Apps, Ronnie Garcia
Released under the MIT License <http://www.opensource.org/licenses/mit-license.php> 
*/

// Define a destination
$targetFolder = '../uploads'; // Relative to the root

if (!empty($_FILES)) {
    $tempFile = $_FILES['Filedata']['tmp_name'];
    $targetPath = $_SERVER['DOCUMENT_ROOT'] . $targetFolder;
    $targetFile = rtrim($targetPath,'/') . '/' . $_FILES['Filedata']['name'];

    // Validate the file type
    $fileTypes = array('jpg','jpeg','gif','png'); // File extensions
    $fileParts = pathinfo($_FILES['Filedata']['name']);

    if (in_array($fileParts['extension'],$fileTypes)) {
        move_uploaded_file($tempFile,$targetFile);
        echo '1';
    } else {
        echo 'Invalid file type.';
    }
}
?> 
```

可能是什么原因造成的？我为所有文件设置了 777 权限。

它显示没有错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T19:31:44.440

我注意到你前面的 ../

```
$targetFolder = '../uploads'; 
```

在顶部的 INDEX.PHP 文件中试试这个，看看你在那里实际做了什么。我猜这是错误的路径…

```
<?php
$targetFolder = '../uploads';
$targetPath = $_SERVER['DOCUMENT_ROOT'] . $targetFolder;
echo $targetPath;
?> 
```

应该是大概

```
<?php
$targetFolder = '/uploads';
$targetPath = $_SERVER['DOCUMENT_ROOT'] . $targetFolder;
echo $targetPath;
?> 
```

或者

```
<?php
$targetFolder = 'uploads';
$targetPath = $_SERVER['DOCUMENT_ROOT'] . $targetFolder;
echo $targetPath;
?> 
```

取决于您的服务器设置和斜杠...

# inno-setup - 使用 Inno Setup 更新 windows explorer shell 扩展

> ID：11585531
> 
> 赞同：4
> 
> 时间：2012-07-20T19:07:35.513
> 
> 标签：inno-setup, explorer, windows-shell, shell-extensions

我有一个程序产品，它另外将外壳扩展安装到 Windows 资源管理器。它用 C# 制作并使用 .NET Framework v4.0。Shell 扩展是由 Inno Setup 在安装期间使用 regasm.exe 安装的。一切正常，直到我想安装更新版本的应用程序。问题是我无法更新 shell 扩展 dll，因为它已加载到资源管理器的内存中。在安装 Inno Setup 之前向我显示以下消息

![在此处输入图像描述](../Images/918c34eb029cc30dcdd4df374ab27804.png)

它说安装程序需要终止 Windows 资源管理器，因为它使用应由安装程序更新的文件。 **它终止了资源管理器进程，但不会再次启动他。这是我的第一个问题。**

其实我不想强迫用户关闭资源管理器。但我不知道如何从资源管理器的内存中卸载托管 shell dll。如果通过 regasm.exe 卸载它，dll 仍然保留在内存中。事实上，我什至找不到发生这种检查的地方，因为我收到了已经制作的安装源。

用于 Inno Setup 的 Files-In-Use (IssProc.dll) 加载项没有帮助，因为一旦我通过此加载项终止 Windows 资源管理器，资源管理器就会立即重新启动。

我该如何解决这个问题？如何以更好的用户体验更新 shell 扩展 dll？也许有人可以给我一个提示，检查正在使用的文件的代码在哪里？

O 和 BTW 我使用的是 Windows 7 x64。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T21:00:11.907

在文件条目处使用[`restartreplace`](http://www.jrsoftware.org/ishelp/topic_filessection.htm)标志。从参考：

> 当需要替换现有文件并且它正在被另一个正在运行的进程使用（锁定）时，默认情况下，安装程序将显示一条错误消息。***此标志告诉安装程序在下次重新启动系统时注册要替换的文件***（通过调用 MoveFileEx 或通过在 WININIT.INI 中创建条目）。发生这种情况时，***将提示用户在安装过程结束时重新启动计算机。***

因此，使用此标志不会导致向导要求终止使用该文件的应用程序，而是将文件更新安排到下次重新启动并提示用户在安装结束时重新启动计算机，我认为这是非常用户友好和常用的.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-15T09:02:17.857

要禁用提示，您应该在 [Setup] 中简单地设置“CloseApplications=no”。但是，如果您确定需要更换，您仍然需要在 [File] 中使用 restartplace 标志，但稍后再进行。

# javascript - Google Maps 多边形在 Internet Explorer 中未正确显示（随机线）

> ID：11585532
> 
> 赞同：1
> 
> 时间：2012-07-20T19:07:39.537
> 
> 标签：javascript, html, internet-explorer, google-maps, google-maps-api-3

我在通过 JavaScript API v3 在 Google 地图上绘制多边形时遇到了一些麻烦。问题是地图似乎在 9 以外的 Internet Explorer 版本中从多边形上绘制随机线。在我尝试过的任何其他浏览器中看起来都很好。

地图可以在这里查看：[覆盖图](http://www.mahaskabottling.com/newsite/download/map.html)

这是一张覆盖地图，显示了由特定公司服务的县。每个县叠加层都是根据美国人口普查边界坐标数据构建的，并单独添加到地图中。

我环顾四周，虽然人们似乎对地图和 Internet Explorer 有很多问题，但我找不到与我的特定问题相关的任何内容。这些线似乎是多边形的延伸，好像我的坐标是错误的，但我已经彻底检查了它们，它们看起来是一致的。

线条会聚在地图中图块的角上，并在您放大/缩小时四处移动。

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T20:25:33.593

经过大量调试，我终于找到了问题所在。

坐标数据以格式等形式存储为一串纬度/经度数据`41.162822,-91.715893;41.161104,-91.715921;...`。我使用 JavaScript 的 split() 函数两次首先获取坐标对，`split(";")`然后将纬度和经度值用`split(",")`. 事实证明，即使分隔符位于字符串的末尾， split() 仍然有效，因此会将空字符串粘贴到结果数组中。我猜早期的 Internet Explorer 版本仍然会尝试渲染错误的 LatLngs。

故事的寓意：检查您的数据完整性。

# linux - nohup 进程在 xterm 关闭时死亡，但在退出时没有

> ID：11585535
> 
> 赞同：1
> 
> 时间：2012-07-20T19:07:49.393
> 
> 标签：linux, bash, putty, strace, nohup

我有一个问题，一个简单的 nohup 命令似乎表现得很奇怪。我将其归结为一个名为 Sleep 的小型 Java 应用程序，它执行

```
while (true) 
  Thread.sleep(10000). 
```

我正在运行 nohup 如下：

```
nohup java Sleep.java >> nohup.log 2>&1 & 
```

然后我在另一个窗口中运行 strace 寻找信号，如下所示寻找我的 pid (12345)

```
strace -tt -p 12345 -enone -e 'signal=!sigchld'
Process 16582 attached - interrupt to quit 
```

如果在我的原始窗口中输入“退出”以关闭 shell，我会看到进程继续运行而没有收到信号。但是，如果我关闭腻子窗口（单击菜单栏上的 x），我会看到 nohup 进程确实得到了 SIGHUP

```
strace -tt -p 16582 -enone -e 'signal=!sigchld'
Process 16582 attached - interrupt to quit
14:54:03.271286 --- SIGINT (Interrupt) @ 0 (0) --- 
```

我认为 nohup 应该拦截/不传递 SIGHUP。我已经切换到使用 setsid 并且无论我如何关闭终端窗口，我都会得到正确的行为。难道我做错了什么？似乎 nohup 工作不正常，这在我正在处理的实际问题中造成了一些严重的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T21:07:15.270

在 Java 中处理这个问题......请注意，尽管线程表明这将适用于任何操作系统，但我怀疑 Windows 是否有信号： [Ignore SIGINT in Java](https://stackoverflow.com/questions/3250280/ignore-sigint-in-java)

您还可以编写自己的 nohup 等效项，忽略 SIGHUP 和 SIGINT。或者您可以下载 GNU nohup 源代码并将其修改为也忽略 SIGINT。

这一次，这可能不是 windows/putty 问题。

# c++ - 提升灵气解析时跟踪输入文件和位置？

> ID：11585537
> 
> 赞同：1
> 
> 时间：2012-07-20T19:07:55.703
> 
> 标签：c++, boost-spirit, boost-spirit-qi

我看了一下这个[问题](https://stackoverflow.com/questions/3146372/how-can-i-track-my-input-position-with-multiple-inputs-using-boostspiritqi)，但它并不能完全回答我的问题。

我正在尝试编写一个语法来使用 Spirit Qi 解析 XML，并且我想为每一行添加文件名以及该文件中的行号。所以如果有实体引用并且被原始文件中的新文件替换，我还是想知道它们是从哪里来的。为了做到这一点，我需要知道如何在解析时保持位置和文件名。

我不想使用 Spirit 经典，否则[这](http://boost-spirit.com/home/articles/qi-example/tracking-the-input-position-while-parsing/)可能是一个很好的解决方案。但我需要一种不使用 Spirit classic 的方法来做同样的事情，并且如果可能的话，我只想使用 Qi。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T16:29:33.173

我使用经典的位置迭代器来解决我的问题，因为我也需要文件名，但是对于任何其他想要使用类似东西的人都可以使用行 pos 迭代器。相同的链接在[这里](http://www.boost.org/doc/libs/1_48_0/libs/spirit/doc/html/spirit/support/line_pos_iterator.html)。它只是保存行位置，并且有一种方法可以提取列位置。这是精神的新版本（v2.5.1）。

谢谢。

# javascript - jTweetsAnywhere 不能在实时服务器上运行，只能在本地服务器上运行

> ID：11585551
> 
> 赞同：0
> 
> 时间：2012-07-20T19:09:16.133
> 
> 标签：javascript, jquery

jTweetsAnywhere 在我的本地服务器上工作，但不在实时服务器上显示推文。只是一个空盒子，我什至包括了anywhere.js 和消费者密钥。

在我脑海中：

```
 <script src="http://platform.twitter.com/anywhere.js?id=YQDAme3v6zI0CR1FiWCg&v=1" type="text/javascript"></script>
<script type="text/javascript" src="<?php bloginfo('template_url'); ?>/js/jTweetsAnywhere/jquery.jtweetsanywhere-1.3.1.min.j"></script>

<script type="text/javascript" src="<?php bloginfo('template_url'); ?>/js/jTweetsAnywhere/jquery.jtweetsanywhere-de-1.3.1.min.j"></script> 
```

然后要定位的元素：

```
 <div id="twitterbox" class="sidebar-header">
        <h2><a href="http://twitter.com/overbitespics">Follow OverbitesPics on Twitter</a></h2>
        <div id="tweetFeed" class="clear">
    </div> 
```

从主机服务器拨打电话时必须缺少步骤或出现问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T06:43:51.533

在您的第一个代码块中，您包含“jtweetsanywhere-1.3.1.min.j”。正确的文件名以**.js**结尾。

在加载 DOM 后，还缺少对身体某处的 jTweetsAnywhere 的调用。

无法想象这段代码在本地服务器上运行。

# javascript - 在出现时赋予隐藏的 div 效果

> ID：11585552
> 
> 赞同：0
> 
> 时间：2012-07-20T19:09:19.923
> 
> 标签：javascript, html, hidden, effect

我有以下代码：

[http://jsfiddle.net/EMX4Q/](http://jsfiddle.net/EMX4Q/)

这很简单，当您将鼠标悬停在图像上时，它会显示相同的图像但更大。

我想在图片上实现类似谷歌的效果：[https ://www.google.com/search?q=image&oe=utf-8&client=ubuntu&channel=fs&um=1&ie=UTF-8&hl=es&tbm=isch&source=og&sa =N&tab=wi&ei=p6wJUKMpg7LbBfTszdMH&biw=1680&bih=615&sei=qawJUKfHI9Lr0QGOouiLBA](https://www.google.com/search?q=image&oe=utf-8&client=ubuntu&channel=fs&um=1&ie=UTF-8&hl=es&tbm=isch&source=og&sa=N&tab=wi&ei=p6wJUKMpg7LbBfTszdMH&biw=1680&bih=615&sei=qawJUKfHI9Lr0QGOouiLBA)

我怎么能做到？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T19:13:21.797

使用 jQuery animate()，或使用 time 参数的 addClass()/removeClass()。这是我用过的一个例子：

```
$('.circle').hover(
  function () {
    $(this).addClass('bigger-outer', 1000);
  }, 
  function () {
    $(this).removeClass('bigger-outer', 1000);
  }
); 
```

因此，它将在悬停时添加/删除带有圆形类的任何东西上的较大外部类，并在 1000 毫秒或一秒内转换。

# iphone - 隐藏和显示带有动画的按钮，iphone

> ID：11585562
> 
> 赞同：1
> 
> 时间：2012-07-20T19:10:25.977
> 
> 标签：iphone, animation, uibutton

在我正在使用的视图中隐藏或显示按钮

```
myButton.hide = YES or myButton.hide = NO 
```

我正在寻找以动画方式显示按钮的方法，例如慢慢淡入

有人知道怎么做吗，请帮忙

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T19:19:36.097

你可以使用`UIView`动画。这是简单的实现：

```
// to hide
[UIView animateWithDuration:0.5
    delay:1.0
    options: UIViewAnimationCurveEaseOut
    animations:^{
        myButton.alpha = 0.0
    } 
    completion:^(BOOL finished){
        NSLog(@"Done!");
    }];

// to show (implement in another method)
[UIView animateWithDuration:0.5
    delay:1.0
    options: UIViewAnimationCurveEaseOut
    animations:^{
        myButton.alpha = 1.0;
    } 
    completion:^(BOOL finished){
        NSLog(@"Done!");
    }]; 
```

这是一个很好的教程：[如何使用 UIView 动画教程](http://www.raywenderlich.com/2454/how-to-use-uiview-animation-tutorial)

您可能还想查看文档：[UIView Class Reference](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)

这个网站上也有类似的 QA：例如[，我如何为 UIButton Alpha 属性设置动画](https://stackoverflow.com/questions/1470356/how-can-i-animate-a-uibutton-alpha-property-with-monotouch)

希望能帮助到你！

# r - 获取变量的先前值

> ID：11585563
> 
> 赞同：0
> 
> 时间：2012-07-20T19:10:28.133
> 
> 标签：r

我有一个数据框，其中的观察结果存储为

```
> m

    ID       Date count Day Month
1  111 2011-05-22     0 Sun   May
2  111 2011-05-23     5 Mon   May
3  111 2011-05-24     5 Tue   May
4  111 2011-05-25     2 Wed   May
5  111 2011-05-26     2 Thu   May
6  112 2011-05-22     2 Sun   May
7  112 2011-05-23     2 Mon   May
8  112 2011-05-24     1 Tue   May
9  111 2011-05-25     0 Wed   May
10 112 2011-05-26     6 Thu   May 
```

我需要添加几列来添加与 ID 和日期相对应的“计数”变量的过去值。例如，对于 ID 111，我需要一天前、两天前、三天前或每个日期的任何其他时间范围以及每个 ID 对应的计数总和。

所需的输出就像

```
> m

    ID       Date count Day Month TwoDaysSum ThreeDaysSum
1  111 2011-05-22     0 Sun   May         NA           NA
2  111 2011-05-23     5 Mon   May         NA           NA
3  111 2011-05-24     5 Tue   May          5           NA
4  111 2011-05-25     2 Wed   May         10           10
5  111 2011-05-26     2 Thu   May          7            7
6  112 2011-05-22     2 Sun   May         NA           NA
7  112 2011-05-23     2 Mon   May         NA           NA
8  112 2011-05-24     1 Tue   May          4           NA
9  111 2011-05-25     0 Wed   May          3            5
10 112 2011-05-26     6 Thu   May          1            3 
```

最终，我需要回过头来找到更大时间范围的总和，比如一个月/季度/年。

有人知道如何去做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T20:26:02.737

```
DF<-read.table(text=" ID       Date count Day Month
1  111 2011-05-22     0 Sun   May
2  111 2011-05-23     5 Mon   May
3  111 2011-05-24     5 Tue   May
4  111 2011-05-25     2 Wed   May
5  111 2011-05-26     2 Thu   May
6  112 2011-05-22     2 Sun   May
7  112 2011-05-23     2 Mon   May
8  112 2011-05-24     1 Tue   May
9  112 2011-05-25     0 Wed   May #fixed typo
10 112 2011-05-26     6 Thu   May",header=T,stringsAsFactors = F,sep="")

#sort to be safe
DF<-DF[order(DF$ID,DF$Date),]

DF$TwoDaysSum<-ave(DF$count,DF$ID,FUN=function(x) filter(x,c(0,1,1),sides=1))
DF$ThreeDaysSum<-ave(DF$count,DF$ID,FUN=function(x) filter(x,c(0,1,1,1),sides=1))

DF

    ID       Date count Day Month TwoDaysSum ThreeDaysSum
1  111 2011-05-22     0 Sun   May         NA           NA
2  111 2011-05-23     5 Mon   May         NA           NA
3  111 2011-05-24     5 Tue   May          5           NA
4  111 2011-05-25     2 Wed   May         10           10
5  111 2011-05-26     2 Thu   May          7           12
6  112 2011-05-22     2 Sun   May         NA           NA
7  112 2011-05-23     2 Mon   May         NA           NA
8  112 2011-05-24     1 Tue   May          4           NA
9  112 2011-05-25     0 Wed   May          3            5
10 112 2011-05-26     6 Thu   May          1            3 
```

# python - 使用 Python 匹配 Stata 加权 xtile 命令的确定方法？

> ID：11585564
> 
> 赞同：5
> 
> 时间：2012-07-20T19:10:28.830
> 
> 标签：python, numpy, stata, percentile

对于一个项目，我需要复制当前存在于 Stata 输出文件 (.dta) 中的一些结果，这些结果是从较旧的 Stata 脚本中计算出来的。项目的新版本需要用 Python 编写。

我遇到困难的具体部分是根据 Stata[`xtile`命令](http://www.stata.com/help.cgi?xtile)的加权版本匹配分位数断点计算。请注意，数据点之间的联系与权重无关，并且我使用的权重来自连续数量，因此联系极不可能（并且我的测试数据集中没有联系）。因此，不是因为联系而导致分类错误。

我已经阅读了[关于加权百分位数的 Wikipedia 文章](http://en.wikipedia.org/wiki/Percentile#Weighted_percentile)以及[这篇交叉验证的文章，该文章](https://stats.stackexchange.com/questions/13169/defining-quantiles-over-a-weighted-sample)描述了一种替代算法，该算法应该复制 R 的 type-7 分位数。

我已经实现了这两种加权算法（底部的代码），但我仍然不能很好地与 Stata 输出中的计算分位数匹配。

有谁知道Stata例程使用的具体算法？文档没有清楚地描述这一点。它说的是在 CDF 的平坦部分取平均值来反转它，但这几乎没有描述实际的算法，并且对于它是否在做任何其他插值也模棱两可。

请注意，`numpy.percentile`并且`scipy.stats.mstats.mquantiles`不接受权重，也不能执行加权分位数，只是常规的等权分位数。我的问题的症结在于需要使用权重。

注意：我已经对以下两种方法进行了很多调试，但是如果您看到一个错误，请随时在评论中提出错误建议。我已经在较小的数据集上测试了这两种方法，结果很好，并且在我可以保证 R 使用什么方法的情况下也匹配 R 的输出。代码还不是很优雅，两种类型之间复制了太多，但是当我相信输出是我需要的时，所有这些都会在以后修复。

问题是我不知道Stata`xtile`使用的方法，我想减少下面的代码和Stata`xtile`在同一数据集上运行时的不匹配。

**我尝试过的算法：**

```
import numpy as np

def mark_weighted_percentiles(a, labels, weights, type):
# a is an input array of values.
# weights is an input array of weights, so weights[i] goes with a[i]
# labels are the names you want to give to the xtiles
# type refers to which weighted algorithm. 
#      1 for wikipedia, 2 for the stackexchange post.

# The code outputs an array the same shape as 'a', but with
# labels[i] inserted into spot j if a[j] falls in x-tile i.
# The number of xtiles requested is inferred from the length of 'labels'.

# First type, "vanilla" weights from Wikipedia article.
if type == 1:

    # Sort the values and apply the same sort to the weights.
    N = len(a)
    sort_indx = np.argsort(a)
    tmp_a = a[sort_indx].copy()
    tmp_weights = weights[sort_indx].copy()

    # 'labels' stores the name of the x-tiles the user wants,
    # and it is assumed to be linearly spaced between 0 and 1
    # so 5 labels implies quintiles, for example.
    num_categories = len(labels)
    breaks = np.linspace(0, 1, num_categories+1)

    # Compute the percentile values at each explicit data point in a.
    cu_weights = np.cumsum(tmp_weights)
    p_vals = (1.0/cu_weights[-1])*(cu_weights - 0.5*tmp_weights)

    # Set up the output array.
    ret = np.repeat(0, len(a))
    if(len(a)<num_categories):
        return ret

    # Set up the array for the values at the breakpoints.
    quantiles = []

    # Find the two indices that bracket the breakpoint percentiles.
    # then do interpolation on the two a_vals for those indices, using
    # interp-weights that involve the cumulative sum of weights.
    for brk in breaks:
        if brk <= p_vals[0]: 
            i_low = 0; i_high = 0;
        elif brk >= p_vals[-1]:
            i_low = N-1; i_high = N-1;
        else:
            for ii in range(N-1):
                if (p_vals[ii] <= brk) and (brk < p_vals[ii+1]):
                    i_low  = ii
                    i_high = ii + 1       

        if i_low == i_high:
            v = tmp_a[i_low]
        else:
            # If there are two brackets, then apply the formula as per Wikipedia.
            v = tmp_a[i_low] + ((brk-p_vals[i_low])/(p_vals[i_high]-p_vals[i_low]))*(tmp_a[i_high]-tmp_a[i_low])

        # Append the result.
        quantiles.append(v)

    # Now that the weighted breakpoints are set, just categorize
    # the elements of a with logical indexing.
    for i in range(0, len(quantiles)-1):
        lower = quantiles[i]
        upper = quantiles[i+1]
        ret[ np.logical_and(a>=lower, a<upper) ] = labels[i] 

    #make sure upper and lower indices are marked
    ret[a<=quantiles[0]] = labels[0]
    ret[a>=quantiles[-1]] = labels[-1]

    return ret

# The stats.stackexchange suggestion.
elif type == 2:

    N = len(a)
    sort_indx = np.argsort(a)
    tmp_a = a[sort_indx].copy()
    tmp_weights = weights[sort_indx].copy()

    num_categories = len(labels)
    breaks = np.linspace(0, 1, num_categories+1)

    cu_weights = np.cumsum(tmp_weights)

    # Formula from stats.stackexchange.com post.
    s_vals = [0.0];
    for ii in range(1,N):
        s_vals.append( ii*tmp_weights[ii] + (N-1)*cu_weights[ii-1])
    s_vals = np.asarray(s_vals)

    # Normalized s_vals for comapring with the breakpoint.
    norm_s_vals = (1.0/s_vals[-1])*s_vals 

    # Set up the output variable.
    ret = np.repeat(0, N)
    if(N < num_categories):
        return ret

    # Set up space for the values at the breakpoints.
    quantiles = []

    # Find the two indices that bracket the breakpoint percentiles.
    # then do interpolation on the two a_vals for those indices, using
    # interp-weights that involve the cumulative sum of weights.
    for brk in breaks:
        if brk <= norm_s_vals[0]: 
            i_low = 0; i_high = 0;
        elif brk >= norm_s_vals[-1]:
            i_low = N-1; i_high = N-1;
        else:
            for ii in range(N-1):
                if (norm_s_vals[ii] <= brk) and (brk < norm_s_vals[ii+1]):
                    i_low  = ii
                    i_high = ii + 1   

        if i_low == i_high:
            v = tmp_a[i_low]
        else:
            # Interpolate as in the type 1 method, but using the s_vals instead.
            v = tmp_a[i_low] + (( (brk*s_vals[-1])-s_vals[i_low])/(s_vals[i_high]-s_vals[i_low]))*(tmp_a[i_high]-tmp_a[i_low])
        quantiles.append(v)

    # Now that the weighted breakpoints are set, just categorize
    # the elements of a as usual. 
    for i in range(0, len(quantiles)-1):
        lower = quantiles[i]
        upper = quantiles[i+1]
        ret[ np.logical_and( a >= lower, a < upper ) ] = labels[i] 

    #make sure upper and lower indices are marked
    ret[a<=quantiles[0]] = labels[0]
    ret[a>=quantiles[-1]] = labels[-1]

    return ret 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:56:53.220

这是来自 Stata 12 手册的公式截图（StataCorp. 2011\. Stata Statistical Software: Release 12\. College Station, TX: StataCorp LP, p. 501-502）。如果这没有帮助，您可以在 Statalist 上提出这个问题或直接联系 Philip Ryan（原始代码的作者）。

![在此处输入图像描述](../Images/18e87935e172cf1b7720b2b006be82f4.png)![在此处输入图像描述](../Images/9d245a787f98274e57137816fd497dba.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T23:22:58.423

您知道您可以只阅读 Stata 的代码吗？

```
. ssc install adoedit
. adoedit xtile 
```

# iphone - iOS - 每个视图只移动一次

> ID：11585565
> 
> 赞同：0
> 
> 时间：2012-07-20T19:10:29.517
> 
> 标签：iphone, objective-c, ios, cocoa, ipad

我的`UIView`主要观点有很多。我在应用程序中添加了 touchesBegan、touchesMoved 和 touchesEnded 功能。

移动时，该点的视图会显示多次，除非触摸超出视图的`CGRect`. 我只想在移过视图时引用每个视图一次，除非移出 CGRect 然后再移入，否则不予考虑。这是我的代码：

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{

    UITouch *myTouch = [touches anyObject];

    CGPoint point = [myTouch locationInView:self.view];

    UIView *movedView = [self viewAtPoint:point];

    if(movedView != nil)
    {
    NSLog(@"Touches Moved - %@",movedView.name);
    }
}

-(UIView *) viewAtPoint:(CGPoint) point
{   
CGRect touchRect = CGRectMake(point.x, point.y, 1.0, 1.0);

    for( UIView *c in viewArray.views ){
        if( CGRectIntersectsRect(c.frame, touchRect) ){
            return c; 
        }       
    }
    return nil;
} 
```

因此，`NSLog`多次转储相同的视图。我想在移到视图上时将其限制为仅一次，直到再次移出视图为止。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:15:17.803

跟踪触摸进入的最后一个视图，然后您可以优化您的功能以检查触摸是否仍在该视图中，然后再检查其他视图

# php - 提交到 OO-PHP Crud 的表单

> ID：11585567
> 
> 赞同：2
> 
> 时间：2012-07-20T19:10:39.580
> 
> 标签：php, mysql, oop, object

试图在 PHP 中创建一个 CRUD 类。我基本上是在努力坚持让我做的一切都是面向对象的。我的问题是，如何将表单值提交给类本身，我有一个标准表单，它只是输出到这个文件名。

但是，我需要它来引用正确的类......提前为帮助干杯！

```
<?php 

require('connection/connection.php');

class Crud{
public function __construct(){

    $v_title = $_POST['v_id'];
    $v_title = $_POST['v_title'];
    $v_features = $_POST['v_features'];
    $yt_id = $_POST['yt_id'];
    $v_subject = $_POST['v_subject'];
    $taname = "videohubapp";

    echo $v_title;
}

protected static function Create($v_id, $v_title, $v_features, $yt_id, $v_subject){

    #Creates entries
    $query = $conn->prepare("INSERT INTO $taname (v_title, v_features, yt_id, v_subject) VALUES (:v_title, :v_features, yt_id, v_subject)");
    $query->bindParam(":v_title", $v_title);
    $query->bindParam(":v_features", $v_features);
    $query->bindParam(":yt_id", $yt_id);
    $query->bindParam(":v_subject", $v_subject);
    $query->execute();
}

public static function Read($v_id, $v_title, $v_features, $yt_id, $v_subject){

    #Reads database entries
    $query = $conn->prepare("SELECT * FROM $taname ORDER BY v_id");
    $query->setFetchMode(PDO::FETCH_ASSOC);
    while($row = $conn->fetch())
    {
        echo $row['v_id'] . "\n";
        echo $row['v_title'] . "\n";
        echo $row['v_features'] . "\n";
        echo $row['yt_id'] . "\n";
        echo $row['v_subject'] . "\n";
    }

}

protected static function Update($v_id, $v_title, $v_features, $yt_id, $v_subject){

    #Updates database entries
    $query = $conn->prepare("UPDATE $taname SET (v_title = :v_title, v_features = :v_features, yt_id = :yt_id, v_subject = :v_subject) WHERE v_id = :v_id");
    $query->bindParam(":v_id", $v_id);
    $query->bindParam(":v_title", $v_title);
    $query->bindParam(":v_features", $v_features);
    $query->bindParam(":yt_id", $yt_id);
    $query->bindParam(":v_subject", $v_subject);
    $query->execute();
}

protected static function Delete($v_id, $v_title, $v_features, $yt_id, $v_subject){

    #Delete entries from the database
    $query = $conn->prepare("DELETE FROM $taname WHERE v_id = :v_id");
    $query->bindParam(":v_id", $v_id);
    $query->execute();
}

public static function XMLWebService(){

    #XMLParse
    $query = $conn->prepare("SELECT * FROM $taname");
    $query->execute();

}

}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T19:30:41.147

首先看一下[Model View Controller Pattern](http://en.wikipedia.org/wiki/MVC_Pattern)。
同样在您的班级中尝试使用属性并使用`$this`

```
Class Crud{
 public $v_id,$v_title,$v_features,$yt_id,$v_subject,$taname; // all attributes

    public function __construct(){

    $this->v_title = $_POST['v_id'];
    $this->v_title = $_POST['v_title'];
    $this->v_features = $_POST['v_features'];
    $this->yt_id = $_POST['yt_id'];
    $this->v_subject = $_POST['v_subject'];
    $this->taname = "videohubapp";

    var_dump($this); // dump this object.
}
//.. rest of the code 
```

提交表单时，这样的事情会起作用，但取决于您如何处理。

```
if(isset($_POST["submit"])){
 // a form submitted
 $MyCRUDObj = new CRUD(); // since you pass the values to the attributes of object from $_POST you don't need any parameters.
var_dump($MyCRUDObj); // dump form object and see what values attributes has.
} 
```

建议尝试根据您的需要清理和验证表单值。
希望我有帮助

# xml - 将属性添加到由 TSQL FOR XML Path 创建的 ElementNode

> ID：11585574
> 
> 赞同：6
> 
> 时间：2012-07-20T19:11:17.147
> 
> 标签：xml, sql-server-2008, tsql

我正在尝试在 SQL Server 2008 TSQL 查询中匹配一些 XML 输出。我匹配的 XML 可以返回项目列表。列表由属性名称标识，而不是节点名称。

XML Path 函数将返回一个包装器节点，但我找不到向该节点添加任何属性的方法。在我的情况下，它们将是基于我运行它们选择的表名的硬编码值。

我在那里将'x'作为'x'来保持两个列表分开。在我的实际数据中这不是问题，因为它们位于不同的节点中。问题只是如何将属性添加到“列表”节点。

这是[下面示例的 SQL Fiddle 页面](http://sqlfiddle.com/#!3/395fa/3)：

示例架构

```
create table Table1 (Value varchar(50)); 
create table Table2 (Value varchar(50)); 

insert Table1 values
('A'), ('B'), ('C');

insert Table2 values
('X'), ('Y'), ('Z'); 
```

样品选择

```
select 
(
 select Value as '@I'
 from Table1
 for XML PATH('L'), TYPE
) as List,
'x' as 'x', -- needed to keep the Lists apart.
(
 select Value as '@I'
 from Table2
 for XML PATH('L'), TYPE
) as List

for XML PATH 
```

实际输出

```
<row>
  <List>
    <L I="A"/>
    <L I="B"/>
    <L I="C"/>
  </List>

  <x>x</x>

  <List>
    <L I="X"/>
    <L I="Y"/>
    <L I="Z"/>
  </List>
</row> 
```

所需输出：（将“名称”属性添加到列表包装器。）

```
<row>
  <List Name='Table1'>  <!-- Added Attribute "Name" here -->
    <L I="A"/>
    <L I="B"/>
    <L I="C"/>
  </List>

  <x>x</x>

  <List Name='Table2'>  <!-- Added Attribute "Name" here -->
    <L I="X"/>
    <L I="Y"/>
    <L I="Z"/>
  </List>
</row> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T07:23:53.433

这似乎给出了正确的输出。需要额外的`XML PATH`嵌套级别才能将属性添加到`List`节点上：

```
SELECT
(SELECT 'Table1' AS '@name',
  (SELECT Value AS '@I'
   FROM Table1
   FOR XML PATH ('L'))
 FOR XML PATH('List'), TYPE)
,'x' AS'x'
,( SELECT 'Table2' AS '@name',
  (SELECT Value AS '@I'
   FROM Table2
   FOR XML PATH ('L'))
 FOR XML PATH('List'), TYPE
)

FOR XML PATH; 
```

# c# - Document.Ready 脚本#

> ID：11585576
> 
> 赞同：0
> 
> 时间：2012-07-20T19:11:23.043
> 
> 标签：c#, script#

获取以下输出 javascript 代码的[Script#](http://projects.nikhilk.net/ScriptSharp/)语法是什么：

```
$(document).ready(function() {
   //..my code
}); 
```

我试过`jQuery.OnDocumentReady`了，但这有两个问题：

（1）它只能从函数内部调用（因为它不会在启动时被调用，所以无法达到目的）（2）~~它生成以下代码，这不太正确：~~编辑：我的错误，这些是等价的

```
$(function() {
    //..my code
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T19:29:24.267

[在这里](http://www.nikhilk.net/ScriptSharp-Getting-Started.aspx)找到答案：

> 在 script# 中，静态构造函数生成为在加载和解析脚本时立即运行的代码

所以代码最终看起来像这样：

```
[GlobalMethods]
static class Main
{
   static Main()
   {
      jQuery.OnDocumentReady(new Action(delegate()
      {
         //..my code
      }));
   }
} 
```

# jquery - d3.js Les Miserables JQuery 可视化

> ID：11585578
> 
> 赞同：1
> 
> 时间：2012-07-20T19:11:37.790
> 
> 标签：jquery, d3.js, rect

我想创建一个像[http://bost.ocks.org/mike/miserables/](http://bost.ocks.org/mike/miserables/)这样的可视化。在这个实现中，每个矩形都填充有颜色和相关的不透明度。为了填充特定的矩形，开发人员给出例如 x="579.7402597402597" 或 y=... 以及矩形的尺寸。

你知道或者你能猜出开发人员在每种情况下使用什么来动态计算相关单词对的 x 和 y 吗？

如果我的问题的答案很明显，或者如果它嵌入在代码中并且我看不到它，我深表歉意。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T19:18:09.457

看看源代码。两个相关部分是

```
var row = svg.selectAll(".row")
  .data(matrix)
.enter().append("g")
  .attr("class", "row")
  .attr("transform", function(d, i) { return "translate(0," + x(i) + ")"; })
  .each(row); 
```

和

```
var cell = d3.select(this).selectAll(".cell")
    .data(row.filter(function(d) { return d.z; }))
  .enter().append("rect")
    .attr("class", "cell")
    .attr("x", function(d) { return x(d.x); })
    .attr("width", x.rangeBand())
    .attr("height", x.rangeBand())
    .style("fill-opacity", function(d) { return z(d.z); })
    .style("fill", function(d) { return nodes[d.x].group == nodes[d.y].group ? c(nodes[d.x].group) : null; })
    .on("mouseover", mouseover)
    .on("mouseout", mouseout); 
```

坐标是通过将数据的单元格索引/x属性传递给一个比例来计算的，即

```
var x = d3.scale.ordinal().rangeBands([0, width]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T19:16:26.770

查看源代码，我发现 d3 正在加载[这个 JSON 文件](http://bost.ocks.org/mike/miserables/miserables.json)，其中包含有关关系的所有信息。

查看在源代码中操作此数据的脚本（查看页面源代码底部的标记）。

# mysql - 无法连接到 MySQL 服务器 (10060) 和 (4)

> ID：11585584
> 
> 赞同：5
> 
> 时间：2012-07-20T19:11:54.857
> 
> 标签：mysql, realbasic

我正在尝试在 RealBasic 中创建应用程序。我无法创建与远程服务器的连接。

在 XP（虚拟机）上：

> 无法连接到“xxx”上的 MySQL 服务器 (10060)

在最新的 OS X 上：

> 无法连接到“xxx”上的 MySQL 服务器 (4)

但是：HeidiSQL & Sequel Pro 连接正常。.NET 中的另一个自制应用程序连接良好。然而，如果我谷歌的话，一切似乎都与防火墙有关。

代码，如果它有帮助：

```
dim db as new MySQLCommunityServer
db.host = ""
db.port = 3306
db.databasename = "dbname"
db.username = "dbuser"
db.password = "dbpass"
if (db.connect = true) then MsgBox("Connected") else MsgBox(db.errormessage) 
```

# jquery - 每个部分的单独加载器

> ID：11585590
> 
> 赞同：1
> 
> 时间：2012-07-20T19:12:12.750
> 
> 标签：jquery, animation

我在单个页面（即）index.html 中有不同的部分，例如#about、#services、#products 和#contact。

我有每个部分（即）的导航列表，例如。

*   关于等每个部分都有一些动画。

我的问题是我如何为每个部分使用加载器。（即）对于初始索引页面，它显示一个加载器，页面加载后索引部分内容将可见。如果我点击关于链接，索引部分将不可见（显示：无），然后关于部分将（显示：块）与加载器。

我们如何使用 jquery 动画来获得这个？请找到小提琴[http://jsfiddle.net/yesvin/GKh2s/3/](http://jsfiddle.net/yesvin/GKh2s/3/)

提前致谢。如果您有任何疑问，请告诉我。

# css - css - 为什么我的图像重叠？

> ID：11585592
> 
> 赞同：1
> 
> 时间：2012-07-20T19:12:17.820
> 
> 标签：css, html, overlapping

如果您可以在我的网站[http://goo.gl/ok43H](http://goo.gl/ok43H)上查看“装备”部分，您会看到头像图片垂直重叠，我希望每张至少有 10 像素。有什么问题，我该如何解决？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T19:14:23.103

尝试：

```
.equipe-bio {
padding: 0 0 0 110px;
position: relative;
width: 50%;
margin-left: 10%;
margin-bottom: 24px;
} 
```

您可以替换`margin-bottom: 24px;`为任意数量的像素，但这会在图像之间创建空间。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T19:16:13.263

你需要做几件事：

.equip-bio 需要 { 溢出：隐藏；边距顶部：25px；}

起飞位置：绝对；在每个图像上，而是给它 float:left; 作为每个图像的所有部分的段落，将它们分组为一个给它也给它一个 float:left; （而且很可能还有一些左边距）。

那应该为你解决它！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T19:28:52.457

将`min-height`属性添加到主`equipe-bio`元素。我试过`min-height: 100px;`了，结果很好。无论`p`标签中的内容是什么，或者简历有多短，盒子都不会缩小到 100 像素以下。

# javascript - 使用 Mapquest API 删除事件

> ID：11585596
> 
> 赞同：1
> 
> 时间：2012-07-20T19:12:28.127
> 
> 标签：javascript, api, mapquest

当我使用backbone.js 为移动平台创建单页应用程序时，我有一个项目。我需要在“页面”之间创建几个地图。这工作得很好，显示的第一张地图工作得很好，但是所有其他地图都显示得很好，但没有一个事件工作。IE 我无法滚动。适用于桌面上的镀铬。不在 iPad 上。

查看 MQA.TileMap 的文档，有一个 dispose 函数，但我猜它尚未实现。我尝试使用 MQA.EventManager 重置地图，但无济于事。

示例：第 1 页

```
<div id="map" style="width: 300px; height: 300px"></div>
<script type="text/javascript">
 var options={
        elt:document.getElementById('map'),       
        zoom:15,                             
                latLng:{lng:longitude, lat: latitude},  
        mtype:'osm',                            
        bestFitMargin:0,                        
        zoomOnDoubleClick:true                  
    };

    /*Construct an instance of MQA.TileMap with the options object*/ 
    window.ReConMap = new MQA.TileMap(options);

    MQA.withModule('smallzoom', function() {
        var basic=new MQA.Poi( {lng:longitude, lat: latitude} );
        window.ReConMap.addShape(basic);
        window.ReConMap.addControl(
            new MQA.SmallZoom(),
            new MQA.MapCornerPlacement(MQA.MapCorner.TOP_LEFT, new MQA.Size(5,5))
        );
    });

</script> 
```

工作得很好。然后我单击一个清除主体和预制件的按钮：

```
<div id="map2" style="width: 300px; height: 300px"></div>
<script type="text/javascript">

if( window.ReConMap ){
        MQA.EventManager.clearAllListeners( window.ReConMap );
        window.ReConMap = null;
    }
 var options={
        elt:document.getElementById('map2'),       
        zoom:15,                             
                latLng:{lng:longitude, lat: latitude},  
        mtype:'osm',                            
        bestFitMargin:0,                        
        zoomOnDoubleClick:true                  
    };

    /*Construct an instance of MQA.TileMap with the options object*/ 
    window.ReConMap = new MQA.TileMap(options);

    MQA.withModule('smallzoom', function() {
        var basic=new MQA.Poi( {lng:longitude, lat: latitude} );
        window.ReConMap.addShape(basic);
        window.ReConMap.addControl(
            new MQA.SmallZoom(),
            new MQA.MapCornerPlacement(MQA.MapCorner.TOP_LEFT, new MQA.Size(5,5))
        );
    });

</script> 
```

这显示得很好，但所有的滚动事件都不起作用。（我发现它适用于 Chrome，但不适用于 Android 或 iOS 设备）

我知道这是一个长远的问题，但任何帮助都会很棒。

请注意：问题不在于显示的地图。只是事件不起作用。并非所有代码都在这里（exp：`longitude`并`latitude`在其他地方定义）

# c# - MEF 配置

> ID：11585597
> 
> 赞同：5
> 
> 时间：2012-07-20T19:12:29.423
> 
> 标签：c#, c#-4.0, mef

是否有任何 MEF 的配置文件设置，或者一切都在代码中完成？

如果一切都在代码中，那么在进行导出的不同类之间切换的最佳实践是什么？即，如果 A 类和 B 类都导出 IMyExport，那么有哪些好方法可以“配置”应用程序以使用 A 或使用 B？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T19:50:13.200

据我所知，MEF 没有配置文件。如果您希望您的应用程序使用一个实现而不是另一个实现，您可能会创建一个新的`ConfigurationCatalog`，它将获取配置文件作为输入，并且只会导出它告诉它的部分。[MefContrib](https://github.com/MefContrib/MefContrib)中可能已经存在类似的东西，所以我会在那里检查。

除此之外，由类自己决定他们想使用哪个实现。实现您想要的一种可能方法是使用合同名称

```
[Export("My Contract Name", typeof(IMyExport))]
public class A : IMyExport { }

[Export("Another Contract Name", typeof(IMyExport))]
public class B : IMyExport { } 
```

然后类导入`IMyExport`可以指定要使用哪些部分

```
[Import("Another Contract Name")]
public IMyExport MyExport { get; set; } 
```

如果您知道某个依赖项`IMyExport`可以多次导出，则可以[将元数据添加到导出中](http://mef.codeplex.com/wikipage?title=Exports%20and%20Metadata)，并在运行时根据其元数据决定要使用哪些导出。如果你按照这个方向走，你的代码看起来像这样

```
[MySpecialExport(SomeData = "ABC")]
public class A : IMyExport { }

[MySpecialExport(SomeData = "DEF")]
public class B : IMyExport { }

public class MyClass
{
    [ImportMany(typeof(IMyExport))]
    public IEnumerable<Lazy<IMyExport, IMyExportMetadata>> MyProperty { get; set; }

    public void DoSomething()
    {
        var myLazyExport = MyProperty.FirstOrDefault(x => x.Metadata.SomeData == "DEF");
        IMyExport myExport = myLazyExport.Value;

        // Do something with myExport
    }
} 
```

# r - 在R中写入二进制数据

> ID：11585599
> 
> 赞同：4
> 
> 时间：2012-07-20T19:12:40.333
> 
> 标签：r, binaryfiles

我正在尝试编写一个 HTTP POST 请求，但我需要先将我的数据转换为二进制格式。这可能是一个简单的问题，但我发现 R 连接真的很混乱，而且我一直很难找到一个好的资源来以我理解的方式解释它们。

例如，假设我想编码一个整数（8 字节），然后编码一个数字（4 字节）。这是我尝试过的代码：

```
myint <- as.integer(1339700942)
mydouble <- 1.2
obj <- file(open='w+b') #I've tried textConnection too, but no good
w.int <- writeBin(myint, obj, size=8, endian='big')
w.double <- writeBin(mydouble, obj, size=4, endian='big') 
```

这让我可以打开连接，但它写的只是`NULL`. 在这种情况下，使用连接的正确方法是什么`writeBin`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T12:46:17.137

对象“obj”实际上不是必需的。如果 writeBin 正在写入 R 对象而不是 R 之外的文件，则最后三行可以替换为：

```
w.int <- writeBin(myint, raw(0), size=8, endian='big')
w.double <- writeBin(mydouble, raw(0), size=4, endian='big') 
```

# xml - 在一个 xslt 文件中复制 xml、增加日期和替换/删除文本

> ID：11585606
> 
> 赞同：1
> 
> 时间：2012-07-20T19:13:06.803
> 
> 标签：xml, xslt

我在这里尝试做 3 件事。我在尝试着：

1）删除/替换文本。2) 复制 XML 最多 26 次 3) 将 XML 中的日期更改为以 14 天为单位增加 26 次。

这是我的开始：

```
<?xml version='1.0' encoding='UTF-8'?>
<BB:Report_Data xmlns:BB="urn:com.playdate.report/Bi-Weekly_Outbound">
   <BB:Report_Entry>
      <BB:projectedBalanceTotal.employeeId>1234567</BB:projectedBalanceTotal.employeeId>     <BB:projectedBalanceTotal.principalId>4573945975</BB:projectedBalanceTotal.principalId>
      <BB:All_Eligible_Time_Off_Plans_for_Worker>   <BB:projected_balance_accrual_amount_for_the_pay_period>0</BB:projected_balance_accrual_amount_for_the_pay_period>
  <BB:projectedBalanceTotal.effectiveDate>07072012</BB:projectedBalanceTotal.effectiveDate>
         <BB:projectedBalanceTotal.planCodeId>VA</BB:projectedBalanceTotal.planCodeId>
         <BB:leaveBalanceTotal.leaveDescription>VA</BB:leaveBalanceTotal.leaveDescription>
      </BB:All_Eligible_Time_Off_Plans_for_Worker>
      <BB:All_Eligible_Time_Off_Plans_for_Worker>      <BB:projected_balance_accrual_amount_for_the_pay_period>0</BB:projected_balance_accrual_amount_for_the_pay_period>   <BB:projectedBalanceTotal.effectiveDate>07072012</BB:projectedBalanceTotal.effectiveDate>
         <BB:projectedBalanceTotal.planCodeId>WR</BB:projectedBalanceTotal.planCodeId>
         <BB:leaveBalanceTotal.leaveDescription>WR</BB:leaveBalanceTotal.leaveDescription>
      </BB:All_Eligible_Time_Off_Plans_for_Worker>
      <BB:All_Eligible_Time_Off_Plans_for_Worker>
 <BB:projected_balance_accrual_amount_for_the_pay_period>3.323</BB:projected_balance_accrual_amount_for_the_pay_period>      <BB:projectedBalanceTotal.effectiveDate>07072012</BB:projectedBalanceTotal.effectiveDate>
         <BB:projectedBalanceTotal.planCodeId>SS</BB:projectedBalanceTotal.planCodeId>
         <BB:leaveBalanceTotal.leaveDescription>SS</BB:leaveBalanceTotal.leaveDescription>
      </BB:All_Eligible_Time_Off_Plans_for_Worker>
   </BB:Report_Entry>
</BB:Report_Data> 
```

这就是它需要结束的方式：

```
<BB:Report_Data xmlns:wd="urn:com.playdate.report/Bi-Weekly_Outbound">
   <leaveBalanceTotal>
      <projectedBalanceTotal.employeeId>1234567</projectedBalanceTotal.employeeId>
      <projectedBalanceTotal.principalId>4573945975</projectedBalanceTotal.principalId>
         <projected_balance_accrual_amount_for_the_pay_period>0</projected_balance_accrual_amount_for_the_pay_period>
         <projectedBalanceTotal.effectiveDate>07072012</projectedBalanceTotal.effectiveDate>
         <projectedBalanceTotal.planCodeId>VA</projectedBalanceTotal.planCodeId>
         <leaveBalanceTotal.leaveDescription>VA</leaveBalanceTotal.leaveDescription>
         <projected_balance_accrual_amount_for_the_pay_period>0</projected_balance_accrual_amount_for_the_pay_period>
         <projectedBalanceTotal.effectiveDate>07072012</projectedBalanceTotal.effectiveDate>
         <projectedBalanceTotal.planCodeId>WR</projectedBalanceTotal.planCodeId>
         <leaveBalanceTotal.leaveDescription>WR</leaveBalanceTotal.leaveDescription>
         <projected_balance_accrual_amount_for_the_pay_period>3.323</projected_balance_accrual_amount_for_the_pay_period>
         <projectedBalanceTotal.effectiveDate>07072012</projectedBalanceTotal.effectiveDate>
         <projectedBalanceTotal.planCodeId>SS</projectedBalanceTotal.planCodeId>
         <leaveBalanceTotal.leaveDescription>SS</leaveBalanceTotal.leaveDescription>
   </leaveBalanceTotal>
   <leaveBalanceTotal>
      <projectedBalanceTotal.employeeId>1234567</projectedBalanceTotal.employeeId>
      <projectedBalanceTotal.principalId>4573945975</projectedBalanceTotal.principalId>
         <projected_balance_accrual_amount_for_the_pay_period>0</projected_balance_accrual_amount_for_the_pay_period>
         <projectedBalanceTotal.effectiveDate>07212012</projectedBalanceTotal.effectiveDate>
         <projectedBalanceTotal.planCodeId>VA</projectedBalanceTotal.planCodeId>
         <leaveBalanceTotal.leaveDescription>VA</leaveBalanceTotal.leaveDescription>
         <projected_balance_accrual_amount_for_the_pay_period>0</projected_balance_accrual_amount_for_the_pay_period>
         <projectedBalanceTotal.effectiveDate>07212012</projectedBalanceTotal.effectiveDate>
         <projectedBalanceTotal.planCodeId>WR</projectedBalanceTotal.planCodeId>
         <leaveBalanceTotal.leaveDescription>WR</leaveBalanceTotal.leaveDescription>
         <projected_balance_accrual_amount_for_the_pay_period>3.323</projected_balance_accrual_amount_for_the_pay_period>
         <projectedBalanceTotal.effectiveDate>07212012</projectedBalanceTotal.effectiveDate>
         <projectedBalanceTotal.planCodeId>SS</projectedBalanceTotal.planCodeId>
         <leaveBalanceTotal.leaveDescription>SS</leaveBalanceTotal.leaveDescription>
   </leaveBalanceTotal>
   <leaveBalanceTotal>
      <projectedBalanceTotal.employeeId>1234567</projectedBalanceTotal.employeeId>
      <projectedBalanceTotal.principalId>4573945975</projectedBalanceTotal.principalId>
         <projected_balance_accrual_amount_for_the_pay_period>0</projected_balance_accrual_amount_for_the_pay_period>
         <projectedBalanceTotal.effectiveDate>08042012</projectedBalanceTotal.effectiveDate>
         <projectedBalanceTotal.planCodeId>VA</projectedBalanceTotal.planCodeId>
         <leaveBalanceTotal.leaveDescription>VA</leaveBalanceTotal.leaveDescription>
         <projected_balance_accrual_amount_for_the_pay_period>0</projected_balance_accrual_amount_for_the_pay_period>
         <projectedBalanceTotal.effectiveDate>08042012</projectedBalanceTotal.effectiveDate>
         <projectedBalanceTotal.planCodeId>WR</projectedBalanceTotal.planCodeId>
         <leaveBalanceTotal.leaveDescription>WR</leaveBalanceTotal.leaveDescription>
         <projected_balance_accrual_amount_for_the_pay_period>3.323</projected_balance_accrual_amount_for_the_pay_period>
         <projectedBalanceTotal.effectiveDate>08042012</projectedBalanceTotal.effectiveDate>
         <projectedBalanceTotal.planCodeId>SS</projectedBalanceTotal.planCodeId>
         <leaveBalanceTotal.leaveDescription>SS</leaveBalanceTotal.leaveDescription>
   </leaveBalanceTotal>
</BB:Report_Data> 
```

.....等等，等等，直到我们达到 26

我已经有 xslt 可以成功处理我的删除/替换要求：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns:bb="urn:com.workday.report/CR-INT486-Kuali_Trojan_Time-Absence_Balances__University_Bi-Weekly_-Outbound" 
    exclude-result-prefixes="bb">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="comment()|processing-instruction()|@*">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="*">
        <xsl:element name="{local-name()}">
            <xsl:apply-templates select="node()|@*"/>
        </xsl:element>
    </xsl:template>

    <xsl:template match="bb:All_Eligible_Time_Off_Plans_for_Worker">
        <xsl:apply-templates/>
    </xsl:template>

    <xsl:template match="bb:Report_Data">
        <xsl:copy>
            <xsl:apply-templates select="node()|@*"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="bb:Report_Entry">
        <leaveBalanceTotal>
            <xsl:apply-templates select="node()|@*"/>
        </leaveBalanceTotal>
    </xsl:template>

</xsl:stylesheet> 
```

我需要将该转换放在将复制 xml 26 次并将每个数据增加 14 天的任何代码之上，如上所示。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T16:15:11.950

这是参考评论线程。如果您不知道您使用的是什么引擎，请运行此样式表并告诉我们结果。

```
 <xsl:stylesheet xmlns:xsl = "http://www.w3.org/1999/XSL/Transform" version = "1.0" > 
      <xsl:output method = "text" /> 

      <xsl:template match = "/" > 
           <xsl:text >
  Version :  </xsl:text> 
           <xsl:value-of select = "system-property('xsl:version')" /> 
           <xsl:text >
    Vendor :  </xsl:text> 
           <xsl:value-of select = "system-property('xsl:vendor')" /> 
           <xsl:text >
    URL :  </xsl:text> 
           <xsl:value-of select = "system-property('xsl:vendor-url')" /> 
      </xsl:template> 
 </xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T21:53:50.983

我正在关闭它，因为我修改了生成 xml 的报告，希望能简化我的任务。我在这里提出了一个新问题： [Complex XML to XML Transformation using XSLT](https://stackoverflow.com/questions/11638723/complex-xml-to-xml-transformation-using-xslt)

# asp.net-mvc - Orchard CMS：注销（注销）确认页面

> ID：11585608
> 
> 赞同：4
> 
> 时间：2012-07-20T19:13:18.773
> 
> 标签：asp.net-mvc, orchardcms

当用户从前端注销时是否会触发事件，我如何使用该事件将用户重定向到特定视图或页面？我希望用户在注销后收到一条消息，上面写着“您已成功注销”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-21T11:03:29.920

与往常一样，Orchard 有不止一种方法可以做到这一点:)

**方法一：覆盖用户形状**

当您注销时，您将被重定向到`Orchard.Users.AccountController`被调用的操作方法`LogOff`，该方法接受一个`returnUrl`参数。包含退出链接的形状在下方，`~/Core/Shapes/Views/User.cshtml`但您可以通过在名为的主题中创建它的副本来覆盖它`Views/User.cshtml`（或使用形状跟踪模块来查找此形状并创建替代）。

在你的副本中，你所要做的就是改变

```
@Html.ActionLink(T("Sign Out").ToString(), "LogOff", new { Controller = "Account", Area = "Orchard.Users", ReturnUrl = Context.Request.RawUrl }, new { rel = "nofollow" }) 
```

到

```
@Html.ActionLink(T("Sign Out").ToString(), "LogOff", new { Controller = "Account", Area = "Orchard.Users", ReturnUrl = "/My/LogOff/Confirmation/Page" }, new { rel = "nofollow" }) 
```

**方法二：IUserEventHandler**

对于更动态的需求，您可以实现接口，在调用该方法`Orchard.Users.Events.IUserEventHandler`时重定向到您的确认页面：`LoggedOut`

```
public class LoggedOutRedirect : IUserEventHandler
{
    private readonly IHttpContextAccessor _httpContext;
    public LoggedOutRedirect(IHttpContextAccessor httpContext)
    {
        _httpContext = httpContext;
    }

    public void LoggedOut(IUser user)
    {
        _httpContext.Current().Response.Redirect("http://www.google.com/");
    }

    public void Creating(UserContext context) { }
    public void Created(UserContext context) { }
    public void LoggedIn(IUser user) { }
    public void AccessDenied(IUser user) { }
    public void ChangedPassword(IUser user) { }
    public void SentChallengeEmail(IUser user) { }
    public void ConfirmedEmail(IUser user) { }
    public void Approved(IUser user) { }
} 
```

希望能帮助到你！

# php - CakePHP 中的 Ajax 错误处理

> ID：11585620
> 
> 赞同：9
> 
> 时间：2012-07-20T19:14:20.483
> 
> 标签：php, ajax, cakephp, error-handling

我想做一些与[此](http://www.intridea.com/blog/2008/7/23/using-http-status-codes-for-rails-ajax-error-handling)非常相似的事情，但在 CakePHP 世界中用于 AJAX 请求。目前我正在这样做：

```
$this->autoRender = false;
$this->response->statusCode(500); 
```

它基于[此](https://stackoverflow.com/questions/1100867/how-do-you-specify-an-http-status-code-in-cakephp)。但是，此解决方案不允许我像 Rails 示例中那样包含自定义消息，因此，在我的客户端错误处理程序中，我可以显示 500 错误响应中包含的消息。

我将如何在 CakePHP 中实现与 Ruby on Rails 示例相同的功能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-10T18:58:46.440

如上所述，异常是在 CakePHP 中对 AJAX 请求返回错误的方式。这是我更好地控制错误外观的解决方案。另外，如上所述，我使用的是自定义异常渲染器，但不是自定义异常。默认错误响应是这样的 JSON 对象：

```
{"name":"An Internal Error Has Occurred", "url": "\/users\/login.json"} 
```

我*几乎*喜欢默认渲染器处理 AJAX 错误的方式；我只想稍微调整一下：

```
<?php
// File: /app/Lib/Error/CustomExceptionRenderer.php
App::uses('ExceptionRenderer', 'Error');
class CustomExceptionRenderer extends ExceptionRenderer {

    // override
    public function error400($error) {
        $this->_prepareView($error, 'Not Found');
        $this->controller->response->statusCode($error->getCode());

        $this->_outputMessage('error400');
    }

    // override
    public function error500($error) {
        $this->_prepareView($error, 'An Internal Error Has Ocurred.');
        $code = ($error->getCode() > 500 && $error->getCode() < 506) ? $error->getCode() : 500;
        $this->controller->response->statusCode($code);

        $this->_outputMessage('error500');
    }

    private function _prepareView($error, $genericMessage) {
        $message = $error->getMessage();
        if(!Configure::read('debug') && !Configure::read('detailed_exceptions')) {
            $message = __d('cake', $genericMessage);
        }
        $url = $this->controller->request->here();
        $renderVars = array(
            'name' => h($message),
            'url' => h($url),
            );
        if(isset($this->controller->viewVars['csrf_token'])) {
            $renderVars['csrf_token'] = $this->controller->viewVars['csrf_token'];
        }
        $renderVars['_serialize'] = array_keys($renderVars);
        $this->controller->set($renderVars);
    }
} 
```

然后，在 bootstrap.php 中：

```
Configure::write('Exception.renderer', 'CustomExceptionRenderer'); 
```

所以这是它的工作原理：

*   假设我想在我的错误响应中返回一个新的 CSRF 令牌，这样如果我现有的令牌在抛出异常之前就已经过期，那么下次我尝试请求时就不会陷入黑洞。查看[安全组件文档](http://book.cakephp.org/2.0/en/core-libraries/components/security-component.html#csrf-configuration)以了解更多关于 CSRF 保护的信息。
*   Create a new class in app/Lib/Error. You can extend the default renderer, or not. Since I just want to change a few small things, and to keep the example simple, I'm extending it.
*   Override the methods that the default renderer uses to create the JSON object that will be returned. This is done with via the [Request Handler Component](http://book.cakephp.org/2.0/en/views/json-and-xml-views.html#using-data-views-with-the-serialize-key), and conforms to best practices. Indeed, the default renderer does the same thing.
*   New private method to keep things DRY.
*   My solution to the problem of not getting custom error messages in production is to add an optional configuration key. By default this class will show the generic messages in production, but if you have debug set to 0, and you want the specific error messages: `Configure::write('detailed_exceptions', 1);`
*   Add the new token to the response if it exists. In my case, I have already called `Controller::set` on the new token in the beforeFilter method of AppController, so it is available in `$this->controller->viewVars`. There are probably dozens of other ways of accomplishing this.

Now your response looks like this:

```
{
    "name":"The request has been black-holed",
    "url":"\/users\/login.json",
    "csrf_token":"1279f22f9148b6ff30467abaa06d83491c38e940"
} 
```

Any additional data, of any type can be added to the array passed to `Controller::set` for the same result.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T12:45:18.433

在使用 ajax 请求（在我的例子中是 jquery mobile）时，我也遇到了自定义异常和错误代码。这是我想出的解决方案，不涉及覆盖调试模式。它在开发模式下抛出自定义错误，也可以在生产模式下抛出自定义错误。我希望它可以帮助某人：

*AppExceptionRenderer.php：*

```
<?php
App::uses('ExceptionRenderer', 'Error');

class AppExceptionRenderer extends ExceptionRenderer 
{
    public function test($error) 
    {   
        $this->_sendAjaxError($error);
    }

    private function _sendAjaxError($error)
    {
        //only allow ajax requests and only send response if debug is on
        if ($this->controller->request->is('ajax') && Configure::read('debug') > 0)
        {
            $this->controller->response->statusCode(500);
            $response['errorCode'] = $error->getCode();
            $response['errorMessage'] = $error->getMessage();
            $this->controller->set(compact('response'));
            $this->controller->layout = false;
            $this->_outputMessage('errorjson');
        }
    }
} 
```

`Configure::read('debug') > 0`如果要在调试模式下显示异常，可以省略。视图*errorjson.ctp*位于 'Error/errorjson.ctp' 中：

```
<?php
echo json_encode($response);
?> 
```

在这种情况下，我的异常被称为

> 测试异常

并定义如下：

```
<?php
class TestException extends CakeException {
    protected $_messageTemplate = 'Seems that %s is missing.';

    public function __construct($message = null, $code = 2) {
         if (empty($message)) {
                     $message = 'My custom exception.';
           }
           parent::__construct($message, $code);
    }
} 
```

我的 json 响应有一个自定义错误代码 2 `$code = 2`，。ajax 响应将使用以下 json 数据投射错误 500：

```
{"errorCode":"2","errorMessage":"My custom exception."} 
```

显然，您还需要从控制器中抛出异常：

```
throw new TestException(); 
```

并包括异常渲染器[http://book.cakephp.org/2.0/en/development/exceptions.html#using-a-custom-renderer-with-exception-renderer-to-handle-application-exceptions](http://book.cakephp.org/2.0/en/development/exceptions.html#using-a-custom-renderer-with-exception-renderer-to-handle-application-exceptions)

这可能有点超出范围，但为了处理 JQuery 中的 ajax 错误响应，我使用：

```
$(document).ajaxError(function (event, jqXHR, ajaxSettings, thrownError) {
    //deal with my json error
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T11:22:13.930

您可以按照 Cookbook 中的说明使用 CakeExceptions：[http ://book.cakephp.org/2.0/en/development/exceptions.html](http://book.cakephp.org/2.0/en/development/exceptions.html) **但是**`debug = 1`如果您想使用自定义消息，我发现除了在您的生产模式中使用之外别无他法： (

这是我使用内置方法的方法：

*在您的控制器中：*

```
if($this->request->is('ajax')){
    Configure::write('debug', 1);
}

if(!$allowed) {
    throw new InternalErrorException('Keep your fingers away from me!'); // 500 error
} 
```

*将错误模板更改为在 AJAX 调用中使用时只输出错误`/app/View/Errors/error500.ctp:`*

```
<?php
if($this->request->is('ajax')):
    // Output for AJAX calls
    echo $name;

else:
    //Standard CakePHP output ?>
    <h2><?php echo $name; ?></h2>
    <p class="error">
        <strong><?php echo __d('cake', 'Error'); ?>: </strong>
        <?php echo __d('cake', 'An Internal Error Has Occurred.'); ?>
    </p>
    <?php
    if (Configure::read('debug') > 0 ):
        echo $this->element('exception_stack_trace');
    endif;

endif; ?> 
```

然后，您可以在 AJAX 中解析返回的文本。这是我使用的 jQuery 部分：

```
//...
error: function (request) {
    yourErrorShowingFunction(_this, request.responseText);
}
//... 
```

希望这可以帮助 ：）

**如果有人知道如何在生产模式下使用自定义错误*（不覆盖调试模式）*，我会非常高兴！**

# node.js - node.js 缓冲 tcp 数据和分隔符

> ID：11585621
> 
> 赞同：3
> 
> 时间：2012-07-20T19:14:21.063
> 
> 标签：node.js, tcp

我正在尝试编写一个快速而肮脏的 tcp 服务器，但遇到了分隔符问题。根据[这个问题](https://stackoverflow.com/questions/7034537/nodejs-what-is-the-proper-way-to-handling-tcp-socket-streams-which-delimiter)，我正在缓冲传入的数据并寻找分隔符（在本例中为“\r\n”。但是，当我远程登录并发送消息时

```
foo\r\nbar 
```

下面的服务器无法识别中间的分隔符，但确实在末尾看到了一个 \r\n - 我的印象是 telnet 只发送一个 \n 。当我通过 ruby​​ 脚本发送消息时，任何地方都无法识别分隔符，即使消息中存在 \r\n 也是如此。

是否有一些我需要注意的 js 字符串处理行为？

```
var net = require("net");
var http = require('http');

var HOST = '127.0.0.1';
var PORT = 6969;
var TCP_DELIMITER = '\r\n';
var TCP_BUFFER_SIZE = Math.pow(2,16);
net.createServer(function(sock) {
    console.log('CONNECTED: ' + sock.remoteAddress +':'+ sock.remotePort);

    // To buffer tcp data see:
    // https://stackoverflow.com/questions/7034537/nodejs-what-is-the-proper-way-to-handling-tcp-socket-streams-which-delimiter
    buf = new Buffer(TCP_BUFFER_SIZE);  //new buffer with size 2^16

    processTCP = function(msg) {
        // process messages
        console.log("processTCP: "+msg);
    }

    // socket handlers
    sock.on('data', function(data) {
        // look for separator '\r\n'

        console.log("data='"+data+"'");

        data = data.toString('utf-8');
        if(data.indexOf(TCP_DELIMITER) == -1) {
            console.log("1 PART MSG, INCOMING");
            buf.write(data.toString()); // write data to buffer
        } else {
            parts = data.toString().split(TCP_DELIMITER);
            console.log("Parts: "+parts);

            if (parts.length == 2) {
                console.log("2 PART MSG, INCOMING");
                msg = buf.toString() + parts[0]; // and do something with message
                processTCP(msg);
                buf = (new Buffer(TCP_BUFFER_SIZE)).write(parts[1]); // write new, incomplete data to buffer
            } else {
                console.log(parts.length+" PART MSG, INCOMING");
                msg = buf.toString() + parts[0];
                processTCP(msg);
        for (var i = 1; i <= parts.length -1; i++) {
                    if (i !== parts.length-1) {
                        msg = parts[i];
                        processTCP(msg);
                    } else {
                        buf.write(parts[i]);
                    }
        }
            }
        }

        console.log('DATA ' + sock.remoteAddress + ': ' + data);
        // Write the data back to the socket, the client will receive it as data from the server
        sock.write('You said "' + data + '"');   
    });
    sock.on('close', function(data) {
        console.log('CLOSED: ' + sock.remoteAddress +' '+ sock.remotePort);
    });
}).listen(PORT, HOST);
console.log('Server listening on ' + HOST +':'+ PORT); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T04:29:04.167

如果您的服务器收到如下消息，则会出现问题：

ECHO 我爱你\r

\n

分隔符在两个包中接收。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T00:16:10.173

实际上，您发布的代码没有任何问题，它确实可以正常工作。

当您使用 telnet 发送字符串“\r\n”时，它只会将其作为文字传递，所以我并不真正理解该示例（也许您粘贴了它？）。

另外，我注释掉`console.log`了`processTCP`.

使用此代码对其进行测试（您可以直接从`node.js`的控制台运行它）：

```
require('net').connect(6969, '127.0.0.1').write('segment1\r\nsegment2'); 
```

我在服务器端得到的结果：

```
Server listening on 127.0.0.1:6969
CONNECTED: 127.0.0.1:34960
Parts: segment1,segment2
2 PART MSG, INCOMING
DATA 127.0.0.1: segment1
segment2
CLOSED: undefined undefined 
```

显然，您的代码工作得很好。

# email - Centos / 亚马逊 SES

> ID：11585623
> 
> 赞同：0
> 
> 时间：2012-07-20T19:14:37.363
> 
> 标签：email, sendmail, postfix-mta, vps, amazon-ses

所以基本上我想使用我的 amazon linux 实例来推送邮件并转发任何传入的邮件。我不打算拥有任何实际的邮箱，只是转发到真实的电子邮件。在避免使用 postfix 的 mysql 的同时，最好的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T20:08:17.337

我能够通过以下方式解决这个问题：

*   使用标准后缀
*   设置转发框
*   让亚马逊验证电子邮件（通过转发帐户清除）
*   设置 SPF 记录

希望这对其他人有帮助！

# knockout.js - 如何使淘汰绑定适用于动态添加的嵌套对象？

> ID：11585624
> 
> 赞同：0
> 
> 时间：2012-07-20T19:14:36.633
> 
> 标签：knockout.js, knockout-mapping-plugin

我想知道如何使动态添加的嵌套对象的淘汰绑定工作。以下示例演示了我的意思，当我单击“初始化内部”按钮时，它不显示“内部值”：

```
<div data-bind="with: InnerObj">
    <div data-bind="text: Pr"></div>
</div>

<button data-bind="click: initInner">Init inner</button>

<script type="text/javascript" language="javascript">
var obj = { 
   InnerObj: null,
   initInner: function () { 
         this.InnerObj = { Pr: "inner value" };
   }
 }

$(function () {        
    ko.applyBindings(ko.mapping.fromJS(obj));
});    

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:31:58.910

您应该将此对象声明为可观察对象并将其值设置为函数访问它

```
<button data-bind="click: initInner">Init inner</button>
<div data-bind="with: InnerObj">
   <span data-bind="text: Pr"/>
</div>

<script type="text/javascript" language="javascript">
var obj = { 
   InnerObj:  ko.observable(),
   initInner: function () {   
      this.InnerObj({'Pr':ko.observable('Inner value')});
   }
}

$(function () {        
    ko.applyBindings(obj);
});    

</script> 
```

关键点：1 - InnerObj: ko.observable() 2 - this.InnerObj({'Pr':ko.observable('Inner value')});

参考： http: [//knockoutjs.com/documentation/observables.html](http://knockoutjs.com/documentation/observables.html) -[从对象更新视图模型不起作用](https://stackoverflow.com/questions/4493168/updating-view-model-from-object-not-working-in-knockout-js)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T01:49:21.080

这是@Victor Eloy 提议的稍微修改的示例。在这种情况下`obj` ，是从服务器获取的纯模型，没有任何可观察的。诀窍是将它映射到 ko.observable(null) 不幸的是，KO 映射默认情况下不会这样做。

```
<button data-bind="click: initInner">Init inner</button>

<div data-bind="with: InnerObj"> 
    <div data-bind="text: Pr"></div>
</div>

<script type="text/javascript" language="javascript">

var obj = {
    // This case works too: InnerObj: { Pr: "init value"},
    InnerObj: null,

    initInner: function () {
        this.InnerObj({ Pr: ko.observable("new value") });
    }
};

var mapping = {
    'InnerObj': {
        update: function (options) {
            return (options.data == null) ? null : ko.observable(options.data);
        }
    }
};

$(function () {
    var viewModel = ko.mapping.fromJS(obj, mapping);
    ko.applyBindings(viewModel);
}); 
```

# iphone - 显示具有非正统形状的 iOS 按钮

> ID：11585627
> 
> 赞同：0
> 
> 时间：2012-07-20T19:14:41.157
> 
> 标签：iphone, ios, button, uibutton

我有一些我想用来显示按钮的图标。图标不在单独的文件中，我有一个大的 Photoshop 图像，每个按钮都是一个图层。

当我导出与图标对应的图层时，我得到一个 PNG，图标位于其预期位置，而不是在图像中居中。像这样：

![在此处输入图像描述](../Images/f4788ae5998b630f9b9607e934f20076.png)

如果我创建一个位于坐标 (0,0) 的 UIButton，则该按钮的位置正确，但是可以在视图中的任何位置单击它，并且我希望仅在没有透明度的地方单击它。我在这里阅读了如何解决这个问题：

[非矩形形状的 iPhone 按钮？](https://stackoverflow.com/questions/1561585/iphone-button-with-non-rectangle-shape)

我的问题是该解决方案是否会在 AppStore 中被接受，是否有更好的方法来做到这一点？有几个重叠的按钮会产生问题吗？

# javascript - Backbone.js - 自定义从“fetch()”返回的数据的组织

> ID：11585629
> 
> 赞同：0
> 
> 时间：2012-07-20T19:14:47.597
> 
> 标签：javascript, backbone.js, backbone-relational

在调用模型后自定义服务器响应的好方法是`fetch()`什么？

我问的原因是因为我正在处理一个模型有几个子模型的情况。从服务器返回的数据需要在子模型之间进行拆分。

**例子：**

```
// A call to "fetch()" on this model needs to split up the returned data
//     between the two child models. Once this happens, their 'change'
//     events should fire and update their respective views.
var ParentModel = Backbone.Model.extend({
    initialize: function(){
        this.childModel_01 = new ChildModel_01({}); 
        this.childModel_02 = new ChildModel_02({});
    }
})

var ChildModel_01 = Backbone.Model.extend({});
var ChildModel_02 = Backbone.Model.extend({}); 
```

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T20:54:24.047

这可能是一个更好的选择，除非您有特定原因使两个模型嵌套在另一个模型下的属性，否则`Backbone.sync`直接调用并具有专门用于访问服务器的单独函数。

在我的应用程序中，我通常有一个`/bootstrap`端点可以同时为多个模型/集合执行此操作。在您的情况下，它看起来像这样：

```
var ChildModel_01 = Backbone.Model.extend({});
var ChildModel_02 = Backbone.Model.extend({});

var childModel_01 = new ChildModel_01({}); 
var childModel_02 = new ChildModel_02({});

Backbone.sync('read', {}, {
  url : '/bootstrap',
  success : function(resp, status, xhr) {
    childModel_01.set(resp.child_01)
    childModel_02.set(resp.child_02)
  },
  error : function() {
    // Deal with error here 
  }
}); 
```

来自服务器的 JSON 响应如下所示：

```
{
   "child_01": {
     "attr" : "val",
     "attr2" : "val2"
   },
   "child_02": {
     "attr" : "val",
     "attr2" : "val2"
   }
} 
```

如果您确实需要将它们放在模型上，请查看模型`parse()`上的函数以更好地处理服务器响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T21:05:09.703

有一个解析函数，它是服务器响应和 JSON 映射到模型之间的桥梁。您必须使用它来自定义您的服务器响应：

[http://backbonejs.org/#Model-parse](http://backbonejs.org/#Model-parse)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T19:33:01.713

由于骨干网是一项 RESTful 服务，因此 RESTful 方法是在您的响应返回时，它具有获取子资源的 URL，因为我认为它们是自有资源。

所以响应可能如下所示：

```
{
   attr1: 'value1',
   attr2: 'value2',
   childModelURLS: {
     childModel1URL: 'http://your.server.com/path/to/child/resource',
     childModel2URL: 'http://your.server.com/path/to/child/resource',
     childModel3URL: 'http://your.server.com/path/to/child/resource'
   }
} 
```

# git - ssh 克隆不适用于 github

> ID：11585636
> 
> 赞同：21
> 
> 时间：2012-07-20T19:15:27.240
> 
> 标签：git, github

我是 Git 和 GitHub 的新手。

我创建了一个新存储库并尝试在我的本地计算机上进行克隆。

它适用于 https 和 git-readonly URL。也就是说，以下工作正常：

*   `git clone https://github.com/npsabari/testrepo.git`
*   `git clone git://github.com/npsabari/testrepo.git`

但是当我尝试时`git clone git@github.com:npsabari/testrepo.git`，它没有用。它给出了以下错误消息：

```
Cloning into 'testRepo'...
Permission denied (publickey).
fatal: The remote end hung up unexpectedly 
```

然后我尝试`ssh git@github.com`了，但我得到了错误：

```
"Permission denied (publickey)." 
```

而不是欢迎信息。

我应该怎么做才能解决这个问题？错误的原因是什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-20T19:21:07.093

根据 GitHub [help](https://help.github.com/)，[您遇到的错误](https://help.github.com/articles/error-permission-denied-publickey)与错误的 SSH 配置有关。请遵循[为 GitHub 设置 SSH 的](https://help.github.com/articles/generating-ssh-keys)指示并进行相应检查。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-03-06T20:15:53.167

您可以按照以下文档将您的密钥添加到`ssh-agent` [https://help.github.com/en/articles/connecting-to-github-with-ssh](https://help.github.com/en/articles/connecting-to-github-with-ssh)

或者您可以运行以下命令来临时执行它

`ssh-agent bash -c 'ssh-add ~/.ssh/github_rsa; git clone git://github.com/npsabari/testrepo.git'`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-20T19:17:42.077

错误的原因是您没有将公钥 (~/.ssh/id_rsa.pub) 上传到 GitHub。将其添加到您的帐户（您可以通过 github 提供的 Web 面板执行此操作），它将起作用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-08-10T13:56:21.490

我经历过 - 只有一次 - 生成的密钥`ssh-keygen`被破坏了。检查私钥和公钥文件，它们具有正确的语法、长度等。

它。只是。没有。工作。

在同一台机器上，我重新生成了一个密钥对。这终于让我通过 ssh 连接到 github。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-20T19:19:23.540

实际上，首先您应该生成 ssh 密钥，然后将它们保存在您的帐户中。

有关更多详细信息，请参阅以下链接

[https://help.github.com/articles/generating-ssh-keys](https://help.github.com/articles/generating-ssh-keys)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-18T01:32:51.620

我想补充一点，如果您需要使用`sudo`，它可能会干扰，因为 SSH 密钥未绑定到该用户。您可能希望在使用之前`git`而不是之后编辑权限。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-19T01:45:37.227

克隆有两种方法。
`1\. SSH`
`2\. HTTPS`
在我的情况下，第一个给出了类似的问题，但后来我尝试`HTTPS`通过运行以下命令来使用方式。
`git clone https://xyz`
在此之前运行此命令`git remote -v`。这应该显示
`1\. git-url(fetch)`
`2\. git-url(push)`
如果您在运行命令时看到这两个，它告诉您您获得了`push`正确的`fetch`权利。在您配置并正确设置代理后，如果您仍然发现问题，我解释的这个解决方案应该可以工作。如果你`SSH public key and private key`错了，那么你必须先解决这个问题。

# python - 根据特定标准比较两个 dict_values 的值

> ID：11585641
> 
> 赞同：0
> 
> 时间：2012-07-20T19:16:46.567
> 
> 标签：python

我有两个字典，我想根据某些标准比较它们的 dict_values，比如它们各自 dict_values 上索引 0 和 2 处的值必须相同才能被视为相等。

此代码有效：

```
a = dict()
b = dict()
a[1,3] = 5, 6, 7
b[1,4] = 5, 9, 7
a_tuple = (list(a.values()))[0]
b_tuple = (list(b.values()))[0]
if a_tuple[0] == b_tuple[0] and a_tuple[2] == b_tuple[2]:
   print('Equal') 
```

有没有更短/更有效的方法来做到这一点？

提前致谢！

约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:34:49.597

我不确定这是否更好，但以下应该有效：

```
import operator
import sys

py3k = sys.version_info[0] > 2

a = dict()
b = dict()
a[1,3] = 5, 6, 7
b[1,4] = 5, 9, 7

if(py3k):
  a_tuple = next(iter(a.values()))
  b_tuple = next(iter(b.values()))
else:
  a_tuple = a.values()[0]
  b_tuple = b.values()[0]

cmp_key=operator.itemgetter(0,2)
if cmp_key(a_tuple) == cmp_key(b_tuple):
  print('Equal') 
```

比较更干净一点，如果使用 python 3 ，我使用`next`and来获取字典中的第一个元组。`iter`

当然，更好的解决方案是更改数据结构，这样您就不会经常处理只有一项的字典。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T19:35:50.263

差别不大，我发现的唯一优化是 a_tuple = a.values()[0] b_tuple = b.values()[0]

实际上 dict.values 只给你元组。您正在将其转换为列表，然后再转换为元组

# excel - 自动格式数据透视表向下钻取

> ID：11585643
> 
> 赞同：0
> 
> 时间：2012-07-20T19:17:03.827
> 
> 标签：excel, excel-2007, pivot-table

我在 excel 中有一个数据透视表，其中显示了我们网站的推荐域。当您向下钻取时，它会显示引荐来源的特定页面。数据透视表按推荐数量（从高到低）排序。但是，当您向下钻取时，没有任何顺序。虽然手动对钻取进行排序并不难，但我在演示文稿中使用电子表格，并且不想在演示时使用数据和格式。

有没有办法自动格式化向下钻取？就像按推荐数量排序并可能调整几行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T19:32:01.460

这在 Thisworkbook 代码模块中：

```
Private Sub Workbook_NewSheet(ByVal Sh As Object)
ans = MsgBox("Format this sheet?", vbYesNo)
If ans = vbYes Then doFormatting Sh
End Sub 
```

这在标准代码模块中：

```
Sub doFormatting(sht As Worksheet)
MsgBox "formatting new sheet: " & sht.Name
End Sub 
```

*（当然，根据需要插入您的格式）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T19:55:13.993

我不知道您是否在寻找 vba 解决方案，但我很确定该功能已经存在。

您可以对任何向下钻取字段进行排序。

如果在演示过程中单击几个按钮太担心，那么我建议只将数据透视表的修改副本放在下一个 powerpoint 幻灯片/工作表上。

例如：

![数据透视表说明](../Images/417742e37367858822662753ac472512.png)

我不确定这张图片是否会显示给你。

# javascript - Javascript、事件、事件监听器和内存泄漏

> ID：11585644
> 
> 赞同：2
> 
> 时间：2012-07-20T19:17:13.463
> 
> 标签：javascript, actionscript-3, garbage-collection, dom-events

在 Actionscript 中开发了各种重要的应用程序（作为 ECMAScript 的一种方言，它与 JS 有很多共同点），我现在习惯于特别注意（痴迷于）事件侦听器。在某些时候，在分析各种应用程序并阅读相关文献后，很明显，当事件侦听器存在时（即添加但从未删除），Flash 播放器的垃圾收集器将很难释放未使用的资源。

这导致了为充当事件侦听器的所有类型定义（并系统地调用）类似析构函数的方法的标准实践。后者负责删除在初始化时添加的所有侦听器。作为副作用，这需要放弃使用未命名函数作为事件侦听器，因为所有`addEventListener(someMethod)`调用都必须由 '对称' 匹配`removeEventListener(someMethod)`。另一种选择是使用弱引用。

现在，转向 Javascript，从未命名函数（和闭包）对语言的完整程度、它们作为事件侦听器的广泛使用以及互联网上普遍缺乏与侦听器相关的清理代码来看，似乎上述 Actionscript 运行时的缺点并没有被浏览器共享。

具体来说，在纯 Javascript 和 DOM 事件的情况下，我已经明白，当文档的某些部分被销毁时，GC 将释放所有相关资源，而不管是否附加了任何侦听器（这对于 AS 和它的“文档”，显示列表）。

我想这同样适用于主要处理 DOM 的 jQuery（考虑到 jQuery 在某些情况下内部执行自己的清理的可能性）。

它是否正确？

那么如何处理并非源自文档但使用某些库（例如 Backbone 的 Event 模块或 Node.js）定义和触发的自定义事件（及其侦听器）`EventEmitter`？是否应该期望“免费”提供类似的清理功能，或者这显然是另一种情况，应该注意删除任何添加的事件侦听器（从“死”对象中）以避免内存泄漏？

（如果这感觉太笼统，我很乐意提供具体示例作为进一步讨论的基础）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T19:22:08.400

我不认为 Javascript 中有任何“免费”的东西，而且我相信它与 GC 在删除的 DOM 元素上存在相同的问题。

这是使用好的库的好处之一。您提到了 jQuery——在更改 DOM 时移除侦听器非常勤奋。例如： [http ://api.jquery.com/remove/](http://api.jquery.com/remove/)

> 除了元素本身，所有与元素关联的绑定事件和 jQuery 数据都将被删除。

所以不要太高兴，但是勤奋地使用像 jQuery 这样的东西可以让你相对安全。

# python - Python 和 matplotlib - 简单图表未显示，没有错误

> ID：11585646
> 
> 赞同：0
> 
> 时间：2012-07-20T19:17:25.507
> 
> 标签：python, matplotlib

下面是使用 matplotlib 可以得到的最简单的方法。

```
import matplotlib.pyplot as plt
plt.plot([1,2,3,4])
plt.ylabel('some numbers')
plt.show()
print 'done' 
```

当我运行时，我没有收到任何错误，没有图表，并且直接打印“完成”。

我使用 easy_install 在 ubuntu 10.04 上安装。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T19:38:56.580

您的后端可能是非交互式后端（例如“Agg”）。您是否在 matplotlibrc 文件中设置了后端？

尝试：

```
import matplotlib
matplotlib.use('TkAgg') # or some other backend which you have installed

import matplotlib.pyplot as plt
plt.plot([1,2,3,4])
plt.ylabel('some numbers')
plt.show()
print 'done' 
```

您可以使用以下命令找到 matplotlib rc 文件的位置：

```
import matplotlib
import os

print os.path.join(matplotlib.get_configdir(), 'matplotlibrc') 
```

你应该寻找类似的东西`backend: Agg`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-22T03:07:41.770

后端可能没有安装；尝试安装 Ubuntu 软件包`python-matplotlib`。如果您在 ipython 中，请尝试运行 cell `%matplotlib inline`。

# content-management-system - 可重复使用的内容果园

> ID：11585647
> 
> 赞同：0
> 
> 时间：2012-07-20T19:17:39.350
> 
> 标签：content-management-system, orchardcms

我希望在 Orchard 中实现可重用的内容块，但似乎找不到任何记录此过程的在线资源。

Orchard 有两个默认的部件容器和容器。但是，容器只能分配给一个容器。

我偶然发现了一个设置“书籍”内容类型的演示和另一个名为“评论”的演示，它使用了上面的可包含/容器示例。它没有向您展示如何将一篇评论与多本书联系起来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T10:11:31.127

如果您想快速启动并运行，我推荐[The Science Project](http://scienceproject.codeplex.com/)。[建立 NN 关系](http://docs.orchardproject.net/Documentation/Creating-1-n-and-n-n-relations#Building_an_iN-Ni_Relationship_34)有一个很好的例子来说明如何自己做。

就我个人而言，我喜欢使用中间内容项，例如`BookReview`，它将有两个内容部分 -`ReviewRelationshipPart`并且`BookRelationshipPart`包含对它们各自内容项的引用。您可以使用每个部分的内容处理程序来初始化一个延迟加载程序，该加载程序按需加载内容项，例如当您调用`content.As<ReviewRelationshipPart>().Review`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T11:39:37.573

Orchard 1.5 现在有一个可用于此的内容选择器字段。

# irc - 是否所有 IRC 服务器都发送 005 RPL_ISUPPORT？

> ID：11585654
> 
> 赞同：5
> 
> 时间：2012-07-20T19:18:12.277
> 
> 标签：irc

这个数字不是 RFC 1459 的一部分，但我希望能够使用它来正确堆叠和取消堆叠 IRC 机器人中的模式。有没有不发送这个的主流 IRC 服务器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T19:00:06.647

这是规范的可选建议，这意味着编写客户端的人不能依赖服务器总是发送`005`. 因此，您可以使其成为模式堆叠/取消堆叠的可选优化，或者使其仅适用于在连接处理中发送 005 的服务器。

话虽如此，我认为我从未使用过在连接处理期间未发送 005 的主流 IRC 网络。我知道这没什么好说的，我什至没有任何数据可以支持它。

# mongodb - 使用 mongodb（多对多）实现进行图书标记

> ID：11585655
> 
> 赞同：2
> 
> 时间：2012-07-20T19:18:18.890
> 
> 标签：mongodb, pymongo

我试图在 python 中构建一个简单的应用程序，其中我有与标签相关联的标签。

给定以下数据：

书：

```
+-------------+--------------------------------+
|     id      |             tags               |
+-------------+--------------------------------+
|      1      |     [python, ruby, rails]      |
+-------------+--------------------------------+
|      2      |     [fiction, fantasy]         |
+-------------+--------------------------------+
|      3      |     [fiction, adventure]       |
+-------------+--------------------------------+ 
```

我将如何（使用 pymongo）找到：

1.  所有标记为“小说”的书籍
2.  系统中的所有唯一标签

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T19:25:26.833

### 1\. 按标签查找所有书籍：

```
db.books.find({tags: 'ruby'}) 
```

如果您索引该字段，这将更快。

```
db.books.ensureIndex({tags: 1}) 
```

### 2.找到所有独特的标签

您可以使用 map-reduce

```
var map = function() {
  this.tags.forEach(function(t) {
    emit(t, 1);
  })
};

var reduce = function(k, vals) {
  return {k, 1}
};

db.books.mapReduce(map, reduce, {out: 'temp_collection_name'}); 
```

所有示例都在 javascript 中，它们应该立即在 mongo shell 中工作。我留给你阅读 pymongo 文档并翻译片段。

# ios - 更改滑动删除按钮的背景颜色

> ID：11585660
> 
> 赞同：3
> 
> 时间：2012-07-20T19:18:49.027
> 
> 标签：ios, xcode

我想更改滑动删除按钮的背景颜色以清除颜色。我尝试了以下代码，但无济于事：

```
UIView* myBackgroundView = [[UIView alloc] initWithFrame:CGRectZero];
myBackgroundView.backgroundColor = [UIColor clearColor];
cell.editingAccessoryView = myBackgroundView;

cell.backgroundView = [[UIView alloc] initWithFrame:CGRectZero];
cell.backgroundView.backgroundColor = [UIColor clearColor]; 
```

有任何想法吗？

# perl - 为什么文件测试运算符不起作用（Perl）？

> ID：11585671
> 
> 赞同：6
> 
> 时间：2012-07-20T19:19:15.160
> 
> 标签：perl, unix, access-rights

在“Programming Perl”`-w`文件测试运算符中描述为：

> -w 文件可由有效的 UID/GID 写入。

我有两个文件：

```
-rwsrwxrwx 1 testuser testuser 226 Jul 20 20:31 script.pl
-rw-rw-r-- 1 testuser testuser  34 Jul 14 17:24 file.txt 
```

`suid`设置为 on `script.pl`，所以当我以用户 caligula 运行它时，有效的 UID/GID 应该是 testuser 的。`script.pl`是：

```
#!/usr/bin/perl
use v5.14;
if (-w 'file.txt') {
    say "true";
}
else {
    say "false";
} 
```

但是当我运行它时`caligula@ubuntu-host:~$ ./script.pl`，输出总是`false`. 为什么会发生这种情况，可能是我不了解该运算符的正确用法？

我的赞赏。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-20T19:24:19.790

Perl 可以配置为忽略 SUID 脚本；这是默认设置，可能是您的设置。您应该在脚本中打印真实有效的 UID 和 GID。

你可以用一个不起眼的 Perl 单行代码来具体验证这一点：

```
$ perl -MConfig -e 'foreach $key (keys %Config) { print "$key = $Config{$key}\n"; }' |
> grep -i -e 'se*t*[ug]id'
d_dosuid = 
d_setresgid = define
d_setresuid = define
d_suidsafe = 
$ 
```

或者，现在我找到了正确的名称，稍微不那么晦涩：

```
$ perl -MConfig -e 'print "d_suidsafe = $Config{d_suidsafe}\n"'
d_suidsafe = 
$ 
```

这表明这个 Perl（我构建的 5.12.1）并不认为 SUID 脚本是安全的。

真实有效的用户和组 ID 值可通过以下方式报告： RUID `$<`、 EUID `$>`、 RGID`$(`和 EGID `$)`，或者（更明智地）使用英语：

```
#!/usr/bin/env perl
use English '-no_match_vars';
print "EUID = $EUID; RUID = $UID; EGID = $EGID; RGID = $RGID\n"; 
```

# html - 使用 100% 宽度 div 的滚动条

> ID：11585672
> 
> 赞同：1
> 
> 时间：2012-07-20T19:19:19.453
> 
> 标签：html, css

这是我的小提琴：http: [//jsfiddle.net/34TM4/1/](http://jsfiddle.net/34TM4/1/)

如您所见，红色`div`的宽度为 100%。蓝色`div`的宽度为 800 像素。如果您向右滚动，查看 800px div 的其余部分，您可以看到 100% div 停止...

它设置为宽度的 100%，但并不总是不跟随滚动。这是为什么？有什么办法可以使这项工作？使用 100% 的宽度总是会填满屏幕的 100%，即使我们滚动？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T19:28:02.073

这是因为 100% 被定义为元素的父元素宽度的 100%。在这种情况下，因为没有父元素，所以窗口（框架）是父元素。所以 100% 将是窗口的宽度，即使其他元素会比窗口的宽度更宽。

如果您将两个 div 包装在另一个 div 中，并为新容器 div 提供 800 像素的宽度，则 100% 的 div 将扩展到 800 像素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T19:28:10.857

百分比宽度参考元素的包含块。初始包含块是视口。您希望 100% 元素的包含块不是视口。为此，请将 100% 元素嵌套在非百分比宽度元素中。例如，用这个修改你的小提琴：

```
<div id="blam">
<div id="container"></div>
<div id="test"></div>
</div>

#blam
{
    width: 900px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T19:30:20.413

> 如果您向右滚动，查看 800px div 的其余部分，您可以看到 100% div 停止...

将宽度设置为百分比意味着它将适应其父元素的该百分比。在 的情况下`div#container`，它将适应视口的宽度，这就是`#container`当您向右滚动时停止的原因。

要解决此问题，您可以将 a 设置`min-width`为`container`等于 的`div#test`。

```
#container {
    width: 100%;
    height: 30px;
    background: #d45;
    min-width: 800px
} 
```

JS 小提琴：http: [//jsfiddle.net/34TM4/6/](http://jsfiddle.net/34TM4/6/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T19:26:51.837

解决它的最快方法是添加`min-width: 800px`属性，如下所示：http: [//jsfiddle.net/34TM4/2/](http://jsfiddle.net/34TM4/2/)

# shell - bash，可执行文件在命令行中运行，但不在脚本中

> ID：11585676
> 
> 赞同：1
> 
> 时间：2012-07-20T19:19:32.573
> 
> 标签：shell, cygwin, command-line-arguments

这是交易。我已经在 Win7 环境中安装了 cygwin。这是我将在命令行中执行的一系列操作，并且一切正常，

文件 mpc.exe 是英特尔 Fortran 编译器创建的 64 位可执行文件

```
cp ./dir1/dir2/mpc.exe ./mpc.exe
./mpc.exe arg1 arg2 
```

一切安好

想为此创建一个脚本。原因是我想要为 arg2 的各种值执行代码。文件“script_mpc.sh”包含以下内容，

```
#!/bin/sh
cp ./dir1/dir2/mpc.exe ./mpc.exe
./mpc.exe arg1 arg2
wait
return_val=$?
[ $retval -eq 0 ] && echo "successfully executed " 
```

现在回到命令行，

```
$>chmod +x script_mpc.sh
$>./script_mpc.sh 
```

错误：

```
./script_mpc.sh: line 2: ./mpc.exe: No such file or directory 
```

一个非常新鲜的初学者。随时随地学习 shell 命令和脚本。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:58:20.203

你在 Cygwin 上。

我敢打赌，这条线：

```
cp ./dir1/dir2/mpc.exe ./mpc.exe 
```

具有 Windows 样式的 CR-LF 行尾。shell（sh 或 bash）将 CR 解释为文件名的一部分，因此它将文件复制到`"./mpc.exe\r"`.

通过 过滤脚本`dos2unix`。请务必先阅读手册页；与大多数文本过滤器不同，它通常会覆盖输入文件。

背景：

Unix 使用单个 ASCII LF 字符来标记文本文件中的行尾。Windows 使用 CR-LF 对。Cygwin 是一个在 Windows 之上的类 Unix 仿真层，因此它往往是与行尾表示冲突的问题的丰富来源。

尤其是 Unix shell，通常不会将 CR 识别为行尾指示符的一部分。相反，他们将其视为另一个字符——一个往往不可见的字符，具体取决于您如何查看文件。

您可能混合使用了 LF 和 CR-LF 行尾。如果它始终使用 CR-LF 结尾，则`#!/bin/sh`or`#!/bin/bash`行将无法被识别。

如果可能，只使用 Unix 风格的编辑器（vim、emacs、nano 或任何你喜欢的）来编辑 shell 脚本。如果您使用记事本或写字板创建脚本，您可能会遇到此类问题。

# ios - 如何重新排序获取的结果以进行显示？

> ID：11585680
> 
> 赞同：3
> 
> 时间：2012-07-20T19:19:37.913
> 
> 标签：ios, core-data, tableview, nsfetchrequest

我有一个由 NSFetchedResultController 管理的 tableview。由于我想获取最近添加的记录，我将控制器设置如下：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"timeStamp >= %@",someDate];
NSSortDescriptor *descriptor = [[NSSortDescriptor alloc] initWithKey:@"timeStamp" ascending:NO];
request.sortDescriptors = [NSArray arrayWithObject:descriptor];
request.fetchLimit = 100; 
```

因此，结果将按时间降序排列。但我也希望将结果按时间升序放置在 tableview 中。
我如何重新排序结果？

将结果放入另一个数组并重新排序并在每次更新获取结果后执行相同的操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:16:47.007

把你的结果放在一个数组中......然后如果你想反转它，设置 Ascending YES，反转你的数组：

```
NSArray* reversedArray = [[startArray reverseObjectEnumerator] allObjects]; 
```

我相信这是最简单的方法，不要一直抓取！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T21:46:13.093

您的谓词将结果集限制为时间戳大于或等于 someDay 的实体。

您的排序描述符通知 fetch 请求应该检索哪些记录，以及按指定的顺序实际排序/呈现它们。

您的提取限制规定将返回不超过 100 个实体。

如果您有 1000 个匹配项，并且 sortAscending 为 YES，那么您将取回比 timeStamp 新的最旧记录，然后是第二旧的记录。如果 sortAscending 为 NO，那么您将取回比 timeStamp 更新的最新记录，然后是第二个最新记录，返回到比 timeStamp 更新的最旧记录（直到您达到第 100 个最旧的记录，如果它存在）。

UIableViews 和 NSFetchedResultsControllers 非常自然地协同工作。只要您不竭尽全力改变处理 NSIndexPaths 的方式，当您有一个带有获取结果控制器支持的表视图时，您基本上可以获得排序、部分和插入/删除操作。在这种情况下，无需尝试重​​新排序结果集 - 告诉 CoreData 你想要什么、多少以及以什么顺序，你就会得到它。

要使您的结果（尽我所知）您所期望的，您只需修改您的排序描述符以反映您实际希望如何对记录进行排序。在这种情况下，将升序设置为 YES：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"timeStamp >= %@",someDate];
NSSortDescriptor *descriptor = [[NSSortDescriptor alloc] initWithKey:@"timeStamp" ascending:YES];
request.sortDescriptors = [NSArray arrayWithObject:descriptor];
request.fetchLimit = 100; 
```

那应该这样做。在这种情况下，无需对集合进行反向排序。

# javascript - 在javascript中从tor请求新的身份

> ID：11585681
> 
> 赞同：0
> 
> 时间：2012-07-20T19:19:50.627
> 
> 标签：javascript, tor

在 PHP 中，你会做这样的事情：

```
function tor_new_identity($tor_ip='127.0.0.1', $control_port='9051', $auth_code='')
{
    $fp = @fsockopen($tor_ip, $control_port, $errno, $errstr, 30);
    if(!$fp)
    {
        return false; //can't connect to the control port
    }

    fputs($fp, "AUTHENTICATE $auth_code\r\n");
    $response = fread($fp, 1024);
    list($code, $text) = explode(' ', $response, 2);
    if ($code != '250') return false; //authentication failed

    //send the request to for new identity
    fputs($fp, "signal NEWNYM\r\n");
    $response = fread($fp, 1024);
    list($code, $text) = explode(' ', $response, 2);
    if ($code != '250') return false; //signal failed

    fclose($fp);
    return true;
} 
```

是否可以在 javascript 中实现相同的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:21:28.053

您无法在 JavaScript 中打开套接字。您可以向服务器发送 AJAX 请求，服务器会为您执行此操作并返回结果。

# html - 在 html 中指定不同的单元格宽度

> ID：11585682
> 
> 赞同：0
> 
> 时间：2012-07-20T19:19:55.653
> 
> 标签：html

有没有办法，当制作一个表格时，使新表格行中的单元格的宽度小于上面一个单元格的宽度，这是一个使用此代码的简单示例，即使指定了底部的单元格，两个单元格都将是 100px为 50 像素。我可以想到一些过于复杂的方法，但是有一个简单的解决方案吗？谢谢

```
<table>
<tr>
<td width=100 height='20' bgcolor='pink'></td>
</td>
</tr> 
<tr>
<td width='50' height='20'bgcolor=blue>
</td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:22:32.360

对于表中的所有行，给定序列中的所有单元格都不总是具有相同的宽度。不过，您可以合并单元格。例如，如果您在底行中使用`<td colspan=2>`，则底行中的两个单元格可以对应于顶部的一个单元格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T19:28:27.000

您可以通过添加宽度并将其显示更改为阻止来使用 css 破解它。它非常难看，所以我不提供任何保证（在 IE 中不起作用）：

```
<table>
    <tr>
        <td bgcolor="pink" height="20" style="width: 100px;">One</td>
    </tr>  
    <tr>
        <td bgcolor="blue" height="20" style="width: 50px; display:block;">Two</td>
    </tr>
</table> 
```

但正如 Sable Foste 指出的那样，您可能应该根据您真正想要做的事情使用不同的元素。这是一个 hack，因此它可能会产生奇怪的副作用。更好的解决方案是使用 DIV 标签：

```
<div>
    <div style="background:blue; width: 100px;">One</div>
    <div style="background:pink; width: 50px;">Two</div>
</div> 
```

# python - Python - 如何嵌套文件读取循环？

> ID：11585688
> 
> 赞同：6
> 
> 时间：2012-07-20T19:20:43.077
> 
> 标签：python, loops, readline

2 天前，我第一次接触 Python（以及一般的编程）。今天我被困住了。我花了几个小时试图找到一个我怀疑是一个如此微不足道的问题的答案，没有其他人被困在这里:)

老板要我手动清理巨大的 .xml 文件，使其更易于阅读。我正在尝试创建一个脚本来为我做这件事。以下是 .xml 文件的示例以及我想要的输出。

# 输入（文件.xml）：

```
<IssueTracking>
  <Issue>
    <SequenceNum>123</SequenceNum>
    <Subject>Subject of Ticket 123</Subject>
    <Description>Line 1 in Description field of Ticket 123.
Line 2 in Description field of Ticket 123.
Line 3 in Description field of Ticket 123.</Description>
  </Issue>
  <Issue>
    <SequenceNum>124</SequenceNum>
    <Subject>Subject of Ticket 124</Subject>
    <Description>Line 1 in Description field of Ticket 124.
Line 2 in Description field of Ticket 124.
Line 3 in Description field of Ticket 124.</Description>
  </Issue>
</IssueTracking> 
```

# 期望的输出：

```
123    Subject of Ticket 123
Line 1 in Description field of Ticket 123.
Line 2 in Description field of Ticket 123.
Line 3 in Description field of Ticket 123.

124    Subject of Ticket 124
Line 1 in Description field of Ticket 124.
Line 2 in Description field of Ticket 124.
Line 3 in Description field of Ticket 124. 
```

这是我到目前为止所得到的。

```
with open(File.xml, 'r') as SourceFile: # Opens the file
    while 1: # Keep going through the file to the end
        SourceFileLine = SourceFile.readline() # Saves lines of the source file
        if not SourceFileLine: # Skip empty lines
            break

        SourceFileLine = SourceFileLine.strip() # Strips the whitespace

        if "<SequenceNum>" in SourceFileLine:
            SequenceNum = SourceFileLine[13:-14]  # Trims the tags, saves the field.
            continue

        if "<Subject>" in SourceFileLine:
            Subject = SourceFileLine[9:-10]
            continue

        #if "<Description>" in SourceFileLine:
        #    last_pos = SourceFile.tell() 
        #    while "</Description>" not in SourceFileLine:
        #        SourceFile.seek(last_pos)
        #        ?????
        #    
        #    Description = Description[22:]
        #    continue

        if "</Issue>" in SourceFileLine:
            print(SequenceNum, end = "\t")
            print(Subject)
        #    print(Description)
            print("\n") 
```

我一直在识别标签之间的这三行并将其保留`<Description>`为一个我可以打印的字符串，然后再继续输入源文件。现在已经扫描了几十个文件行读取循环的其他示例，我怀疑我需要标记到达目标字段的点并在文件中的该点嵌套另一个读取循环。但是我还没有找到另一个这样做的例子，所以我认为我缺少一些基本的东西或者有更好的方法。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T19:52:25.977

我强烈推荐使用 lxml 来处理您的数据的示例。（注意：为 Py2.x 编写，但很容易适应 Py3.x）

```
from lxml import etree
xml = """<IssueTracking>
  <Issue>
    <SequenceNum>123</SequenceNum>
    <Subject>Subject of Ticket 123</Subject>
    <Description>Line 1 in Description field of Ticket 123.
Line 2 in Description field of Ticket 123.
Line 3 in Description field of Ticket 123.</Description>
  </Issue>
  <Issue>
    <SequenceNum>124</SequenceNum>
    <Subject>Subject of Ticket 124</Subject>
    <Description>Line 1 in Description field of Ticket 124.
Line 2 in Description field of Ticket 124.
Line 3 in Description field of Ticket 124.</Description>
  </Issue>
</IssueTracking>
"""

root = etree.fromstring(xml)
for issue in root.findall('Issue'):
    as_list = [issue.find(n).text for n in ('SequenceNum', 'Subject', 'Description')]
    as_list[2] = as_list[2].split('\n')
    print as_list 
```

印刷：

```
['123', 'Subject of Ticket 123', ['Line 1 in Description field of Ticket 123.', 'Line 2 in Description field of Ticket 123.', 'Line 3 in Description field of Ticket 123.']]
['124', 'Subject of Ticket 124', ['Line 1 in Description field of Ticket 124.', 'Line 2 in Description field of Ticket 124.', 'Line 3 in Description field of Ticket 124.']] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-20T19:24:20.240

请不要像这样读取 XML 文件，对于 python，有各种库可以帮助读取 XML 文件。

查看 python 库`lxml`，它提供了一种非常简单的读取和解析 XML 文件的方法，它将极大地改进您的代码。

我会解释如何使用库本身，但他们的文档比我可以挤进这个文本区域要好得多：http: [//lxml.de/tutorial.html](http://lxml.de/tutorial.html)

# jquery - 尝试在悬停时淡出 image1 并淡入 image2，然后在推出时反转此过渡。想法？

> ID：11585691
> 
> 赞同：1
> 
> 时间：2012-07-20T19:20:50.570
> 
> 标签：jquery, transition, fade, css-transitions

我有一个 logomark.png，我想在悬停时淡出/过渡到 logotext.png，然后在推出时再次返回。

作为效果，悬停时 logomark.png 淡出到 0 不透明度，而 logotext.png 从 0 淡出到 1 不透明度。

当用户将鼠标从图像上移开时，它会反转：logotext.png 的不透明度从 1 变到 0，而 logomark.png 的不透明度从 0 变回 1。

基本上，交叉淡入淡出。但是因为这些图像有透明的背景，所以它并不像把一张放在另一张上那么简单，因为两者都可以看到。它实际上必须始终隐藏一个。

在过渡期间添加模糊效果看起来也很棒。当不透明度从 0 变为 1 时，图像会随着淡入到完全不透明度而变得模糊。然后它在不透明度 1 处没有模糊。

最后，如果能够调整过渡的时间，那就太好了。

任何帮助将不胜感激。

-谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T20:06:32.127

如果您使用的是 jquery，那么它非常容易

```
$('.img').hover(function(){
$(this).fadeOut(function(){
$(this).attr("src","logotext.png");
$(this).fadeIn();
})},
function(){
$(this).fadeOut(function(){
$(this).attr("src","logomark.png");
$(this).fadeIn()
})}) 
```

# linux - 防止 Gearman 耗尽系统内存

> ID：11585694
> 
> 赞同：0
> 
> 时间：2012-07-20T19:20:59.720
> 
> 标签：linux, gearman

我目前正在考虑用 Gearman 替换我们的家用 brew 批处理器。它运行的报告可能会占用数百兆内存 (PHP)。因此，如果运行这些报告中的太多，服务器将锁定。我必须添加逻辑以防止在内存不足和服务器超载并使其崩溃的情况下控制进程产生许多工作人员。

如果我切换到 Gearman，如果系统内存变低，是否有某种类型的逻辑可以防止额外的工作人员？我看到了限制工人的选项，但这并不能直接解决问题。此外，如果一个系统不堪重负，它是否足够聪明地平衡系统之间的工作负载？

其他人有什么建议？当条件合适时，我是否可以将自己的支票插入 Gearman 以生成工人？或者还有什么其他的解决方案？

在 LAMP 堆栈上开发，我对 Gearman 不是很熟悉，所以在需要的地方进行指责。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T09:19:14.693

限制工作人员的数量是可行的方法 - 如果您希望报告使用 3-400 MB 内存，请将工作人员的数量限制在 / 400 MB 左右。

如果您的内存使用量低于预期，您将无法扩展 Gearman 本身以生成工作人员，但您可以创建一个包装器来处理您的工作人员并为您执行此操作。在你走这条路之前，看看扩展[GearmanManager](https://github.com/brianlmoon/GearmanManager/)来处理这些问题。然而，我的建议是顺其自然，而是在您获得一些关于您所期望的负载类型的经验之后调整工作人员的数量（无论是报告请求的速度，报告内存的大小）明智的，以及您需要以多快的速度回复请求报告的用户）。

Gearman 会自动将负载平衡到响应速度最快的服务器——当一个任务到达 gearmand 时，它会轮询所有可用的工作人员并告诉他们一个新任务已经到达，首先响应的客户端将获得该任务。这意味着如果服务器有负载，它对请求的响应速度会变慢，并且任务通常会在具有更多可用处理能力的服务器上结束（忽略网络延迟的变化）。这也将自动处理不同大小的服务器。

# xml - 如何从 xml 中的节点中删除重复的命名空间属性？

> ID：11585696
> 
> 赞同：0
> 
> 时间：2012-07-20T19:21:07.197
> 
> 标签：xml, vb.net, xml-parsing, xmlreader, xmlwriter

我有两个巨大的 1 gb xml 文件。两者具有相同的结构。我正在尝试合并它们。脚本使用 xmltextreader 和 xmltextwriter.it 工作正常，除了它将命名空间复制到多个节点。我阅读了很多博客和文档，但找不到合适的解决方案。任何想法或帮助真的很受欢迎。

对于测试目的，我只是从下面的 xml 读取并写入新的 xml 文件。在输出文件中，标题节点有这个我不想要的额外命名空间。

下面是我的示例 xml 文件。

```
<?xml version="1.0" encoding="utf-8"?>
<records xmnls:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="sample.xsd">
<record category="xyz" editor="" entered="sdsd" sub-category="sds" uid="ds" updated="sd-07-15">
    <person ssn="" e-i="M">
      <title xsi:nil="true"/>
      <position>abcd</position>
      <names>
        <first_name>xyz</first_name>
        <last_name>xyz</last_name>
      </names>
    </person>
</record>
<record category="xyz" editor="" entered="sdsd" sub-category="sds" uid="ds" updated="sd-07-15">
    <person ssn="" e-i="M">
      <title xsi:nil="true"/>
      <position>abcd</position>
      <names>
        <first_name>xyz</first_name>
        <last_name>xyz</last_name>
      </names>
    </person>
</record>
</records>

my code is as below

        Public Sub Main()
        Dim DownloadPEPLocation As String = Dts.Variables("xyz").Value
        Dim ACTIMIZESource As String = Dts.Variables("ACTIMIZESource").Value
        Dim PEPTextReader As Xml.XmlTextReader
        Dim Destination As Xml.XmlTextWriter
        Destination = New Xml.XmlTextWriter(ACTIMIZESource, System.Text.Encoding.UTF8)
        Destination.Formatting = Formatting.Indented
        Destination.Namespaces = True

        PEPTextReader = New XmlTextReader(DownloadPEPLocation)
        PEPTextReader.WhitespaceHandling = WhitespaceHandling.None

        Destination.WriteStartDocument()
        Destination.WriteStartElement("records")

        Destination.WriteAttributeString("xmnls:xsi", "http://www.w3.org/2001/XMLSchema-instance")
        Destination.WriteAttributeString("xsi:noNamespaceSchemaLocation", "world-check.xsd")

        Dim PEPreading As Boolean = PEPTextReader.Read()
        Do While (PEPreading)
            If (PEPTextReader.NodeType = XmlNodeType.Element And PEPTextReader.LocalName = "record") Then
                Destination.WriteNode(PEPTextReader, True)
                Destination.Flush()
            Else
                PEPreading = PEPTextReader.Read()
            End If
        Loop

        Destination.WriteEndElement()
        Destination.WriteEndDocument()
        Destination.Close()
        PEPTextReader.Close()

Output is look like this.

<?xml version="1.0" encoding="utf-8"?>
<records xmnls:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="sample.xsd">
<record category="xyz" editor="" entered="sdsd" sub-category="sds" uid="ds" updated="sd-07-15">
    <person ssn="" e-i="M">
      <title xsi:nil="true" **xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"** />
      <position>abcd</position>
      <names>
        <first_name>xyz</first_name>
        <last_name>xyz</last_name>
      </names>
    </person>
</record>
<record category="xyz" editor="" entered="sdsd" sub-category="sds" uid="ds" updated="sd-07-15">
    <person ssn="" e-i="M">
      <title xsi:nil="true" **xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"** />
      <position>abcd</position>
      <names>
        <first_name>xyz</first_name>
        <last_name>xyz</last_name>
      </names>
    </person>
</record>
</records>

` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T20:11:45.947

@Tapan：根据您的输入和输出示例，似乎在根元素中的`xmlns`属性上无意中转置了两个字母：`<records>`

```
<records xmnls:xsi="http://www.w3.org/2001/XMLSchema-instance"
         ^^^^^ 
```

属性读取`xmnls`而不是`xmlns`. 正因为如此，`xsi`命名空间前缀没有按照您想象的方式定义。

尝试在输入文件中进行此更改，以查看`xsi`输出文件中明显冗余的属性是否消失。

# mysql - 查询未找到日期范围内最后一天的行（使用 <=）？

> ID：11585698
> 
> 赞同：2
> 
> 时间：2012-07-20T19:21:17.693
> 
> 标签：mysql, grails

在我非常简单的查询中查找日期范围内的存款对象：

```
 String sqlQuery ="select d from Deposit d where status in('PENDING', 'SKIPPED') and  d.depositDate <= '${endDateString}'"

    def allUnprocessedDeposits = Deposit.executeQuery(sqlQuery) 
```

不返回 depositDate 等于 endDateString 的行。(?!?) 例如，如果我将所有 d.depositDate 行更新为相同的日期，并将该日期作为 endDateString 提供，则不会返回任何行。

使用 grails 2.0.3 和 MySql 5.1...

感谢任何有答案的人。这看起来非常简单，但令人讨厌地失败了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T19:24:26.887

当您只为 DateTime 字段指定一天时，mySQL 假定为午夜，因此午夜之后的任何时间都不会包含在您的结果中。你最好说 date < [end date + 1]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T20:16:38.170

鉴于您提供的信息，最可能的解释是该`depositDate`列被定义为 DATETIME 或 TIMESTAMP。请注意，除了日期之外，这些数据类型还存储时间值（分辨率低至一秒）。例如

```
'2012-07-20 11:35:46' 
```

DATETIME 值的比较 所以一个 DATE 文字（没有时间分量），例如

```
'2012-07-20 11:35:46' <= '2012-07-20' 
```

相当于与时间值为午夜的 DATETIME 文字进行比较：

```
'2012-07-20 11:35:46' <= '2012-07-20 00:00:00' 
```

这显然会返回 FALSE。这就是为什么您的查询没有返回您期望的行的最可能的解释。

* * *

**建议修复：**

对于 DATETIME 和 TIMESTAMP 列上的谓词，获取“天”的正常模式是从给定日期的午夜到第二天的午夜进行范围扫描。我们要检查的是该列是否小于第二天的午夜：

```
'2012-07-20 11:35:46' < DATE_ADD('2012-07-20', INTERVAL 1 DAY) 
```

这相当于与 21 日午夜进行比较。

```
'2012-07-20 11:35:46' < '2012-07-21 00:00:00' 
```

在您的情况下，由于您已经有了“结束日期”值，因此最简单的更改是简单地更改查询文本。

只需将一天添加到您传入的日期值，并将比较运算符从 更改`<=`为`<`。（我在这里假设您只提供日期部分，并允许时间部分默认为午夜。）

```
... d.depositDate < DATE_ADD('${endDateString}',INTERVAL 1 DAY)" 
```

我们更喜欢这种模式，因为它同样适用于`DATE`和。`DATETIME``TIMESTAMP`

（注意：我们更喜欢这种模式的另一个原因是因为它适用于具有更精细分辨率的“时间点”值（例如 Microsoft SQL Server DATETIME，其精度低至 3 毫秒，并检查 <= 23:59.59结果是不够的。）

您的代码可以确保参数值仅是日期，或者是具有午夜时间分量的日期，但是通过将参数包装在 aa 中，很容易让 SQL 查询执行此操作`CAST( AS DATE)`

注意：您要避免将列引用包装`d.depositDate`在任何函数中，因为这将禁用 MySQL 执行索引范围扫描操作（以满足谓词）的能力。

* * *

注意：所有关于 SQL 注入漏洞的常见警告都适用于此处，如果参数值是由用户提供的，您希望使用绑定参数或转义提供的 .... 值

考虑当恶意用户提供如下值时会发生什么：

```
2012-07-20'; DELETE FROM Deposit ; SELECT '1 
```

考虑哪些语句将被传递到数据库。有几种方法可以解决这个问题，以阻止此类攻击。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T19:34:06.640

顺便说一句，您应该使用带参数的查询，它更安全：

```
String sqlQuery ="select d from Deposit d where status in('PENDING', 'SKIPPED') and  d.depositDate <= :endDate"

def allUnprocessedDeposits = Deposit.executeQuery(sqlQuery,[endDate:endDateVariable]) 
```

# python - 在python中将大图像文件作为数组读取

> ID：11585699
> 
> 赞同：3
> 
> 时间：2012-07-20T19:21:27.633
> 
> 标签：python, image, numpy, python-imaging-library

有谁知道如何使用 python 打开一个大的图像文件？我尝试使用 ipython 通过 windows 命令提示符打开一个图像文件（大约 2 GB），但是每次将图像值更改为数组后它都会崩溃。

我的笔记本电脑是 window7-64bit，配备 4GB 内存和 Intel(R) Core(TM) i7-2860 QM CPU。

错误消息是：python.exe 已停止工作一个问题导致程序停止正常工作。Windows 将关闭该程序并通知您是否有可用的解决方案

这是我的代码。

```
import Image
import numpy as num
im=Image.open('myimage.tif')
imarray=num.array(im) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T19:29:46.230

你有多少内存？您将需要超过 2GB 的 RAM 来存储 2-gig 图像。我不知道`Image`存储图像的效率如何，但是一个字节列表为列表中的每个元素使用**四个**字节的空间，所以你会烧掉超过 8GB 的​​（虚拟）内存......还有很多耐心. **编辑：**因为你只有 4（或 3）GB 的空间可以玩，这几乎肯定是你的问题。

但是，您为什么要尝试将其转换为数值数组？使用`im`返回的对象的方法`Image.open`，如[PIL 教程](http://www.pythonware.com/library/pil/handbook/introduction.htm)中所述。

我不知道你在用图像做什么，但也许你可以在不读取内存中的整个图像的情况下做到这一点，或者至少不需要将整个对象转换为`numpy`数组。如果可能的话，一点一点地阅读它以避免炸毁您的机器：阅读 python 生成器，并查看该`Image.getdata()`方法，该方法一次返回您的图像一个像素值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T19:31:32.010

我不知道将 numpy 与[PIL](http://www.pythonware.com/products/pil/)一起使用，但这是我将像素数据读入数组的方式（这使用`.jpg`图像）。在过去，这效果很好，但我认为我没有尝试过使用*大*图像，*所以你的问题可能归结为内存问题*。

```
import Image
im = Image.open('pic.jpg')

pix_ar = im.load()       # load image into 2D array
red_pixel = 255, 0, 0    # a red RGB pixel 
```

并像这样访问单个元素：

```
x = 10
y = 5
print pix_ar[x, y]
(255, 255, 255) 
```

或赋值

```
pix_ar[x, y] = red_pixel 
```

***重新内存***：一旦将 2GB 图像“解压缩”为单个像素值，它最终可能会占用*比*2GB更多的 RAM，这取决于数据结构在将其读入某些变量/数据后为您存储此信息的效率如何结构体。考虑到您还同时运行操作系统和其他一些应用程序，同时还尝试将这个大文件读入内存，4 GB 的 RAM 不太可能足够。

此外，如果您过去成功地将使用 PIL 打开的文件传输/读取到 numpy，则上述代码可能没有帮助。

# android - 如何将应用程序对象放入片段类

> ID：11585702
> 
> 赞同：57
> 
> 时间：2012-07-20T19:21:31.930
> 
> 标签：android, android-fragments, android-fragmentactivity

我正在更改我的 android 移动应用程序以支持平板电脑和手机。为此，我将我的活动类更改为片段。在我的活动类中，我创建了一个应用程序类的实例，如下所示：

```
appCtx = (UnityMobileApp) getApplication(); 
```

`UnityMobileApp`我的应用程序类在哪里。

现在我想在我的片段类中创建相同的实例。你们能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2012-07-20T19:57:16.687

`appCtx = (UnityMobileApp) getActivity().getApplication();`在您的片段中使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-04-27T11:57:44.120

该方法`getActivity()`可能有可能返回 null。这可能会使您的应用程序崩溃。因此在`onActivityCreated()`. 例如：

```
private UnityMobileApp appCtx;
.
.
...
@Override
public View onCreateView(...){
...
}

@Override public void onActivityCreated(Bundle savedInstanceState) { 
     super.onActivityCreated(savedInstanceState); 
     appCtx = ((UnityMobileApp) getActivity().getApplication()); 
} 
...
//access the application class methods using the object appCtx.... 
```

该答案源自 Ognyan 在评论中提出的 Dzianis Yafima 的回答。因此，在 stackoverflow 中，**功劳归于 Dzianis Yafima**和 **Ognyan**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-21T23:41:23.123

或者使用 Kotlin

```
fun bar() {
   (activity?.application as UnityMobileApp).let {
      it.drink()
   } ?: run {
      Log.d("DEBUG", "(╯°□°）╯︵ ┻━┻")
   }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-11-04T12:18:36.767

如果有人正在寻找 Kotlin 版本。这对我有用：

```
(activity?.application as YourApplicationClass) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-30T08:11:38.533

当您尝试使用片段中的应用程序上下文时，您不能使用`getApplication()`，因为这不是片段类的方法
所以您首先必须使用`getActivity()`将返回片段当前关联的片段活动。

总结你的代码，

而不是`this.getApplication()`你必须使用`getActivity.getApplication()`

`getActivity()`从[android 文档](https://developer.android.com/reference/android/app/Fragment.html#getActivity%28%29)中了解更多信息

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-02-10T08:33:16.827

一种较新的方式：

```
Application application = requireActivity().getApplication(); 
```

# c# - Application.Run(form) 挂起

> ID：11585703
> 
> 赞同：1
> 
> 时间：2012-07-20T19:21:34.153
> 
> 标签：c#, .net, windows-7, frameworks

我有一个非常奇怪的情况。我们有一个相对较大的应用程序（约 50 万行代码），由超过 10 位不同的开发人员在过去 6 年中开发。在我们最近发布之前，它一直运行良好。使用最新版本，我们有多个客户抱怨它偶尔会挂起，我们正在花时间弄清楚如何/为什么！以下是一些使调试变得困难的事情：

*   直到今天早上，我们完全无法在内部重现这个问题。
*   当附加调试器时，我们**从未见过这种情况发生！**这显然使得解决起来具有挑战性。
*   这往往不会在人们使用该应用程序时发生，而是在他们停止使用一段时间后发生。
*   这（也许）与屏幕保护程序有关吗？
*   更改屏幕分辨率时似乎有些一致

今天早上，我们终于弄清楚了如何在内部重现至少一个场景： - 在调试器之外运行该应用程序 - 更改屏幕分辨率。这会挂起应用程序。- 然后我们可以附加调试器。

但问题是（现在我们至少可以在一种情况下重现它）是**我们的代码在挂起时没有运行**！换句话说，挂起的时候只有一个线程在运行，它中断的那一行是Application.Run(form); 来自program.cs。

最后一点是应用程序没有**完全挂起**。具体来说： - 它仍然会进行屏幕绘制（例如刷新被其他应用程序覆盖的部分屏幕） - 我无法点击显示的 UI 元素，但它也不会像我期望的那样对我“哔哔”如果它完全没有响应 - 当我在附加调试器后“暂停”应用程序时，我可以在暂停时最小化/最大化它。否则，它不会响应最小化/最大化命令。- 除了没有对我发出哔哔声之外，它的行为就像我无法看到的屏幕外模式窗口一样。另外（如前所述），当我暂停应用程序时，它会在 Application.Run 行上暂停，**一个模态对话框阻塞主窗口。**

 **这种行为是最奇怪的恕我直言 - 特别是因为它最近才开始发生。我的下一步必须是开始“减去”代码部分，直到找到罪魁祸首，但我想我会先把问题抛到这里，看看有没有其他人曾经经历过这样的事情。

提前感谢您的任何指导 - 我期待听到任何建议。

ej

编辑：另一种表述行为的方式。在它“挂起”之后，它的行为就好像没有问题一样，除了它没有从我的鼠标和键盘接收到任何消息。换句话说，它仍然会重新绘制自己，并且可以由 VS2010 调试器暂停，但不会以**任何方式**响应鼠标/键盘事件。不过，在这里，它并没有像其他真正死掉的应用程序那样开始向我发出哔哔声。就像，它不会**在**任务管理器中显示为无响应。这只是一种奇怪的“我不再听 I/O，对不起！” 状态...奇怪！

编辑：

在我上次的编辑中，我提到它不再接受 IO。这让我这么想，我添加了一个 TcpListener 来查看它在“挂起”后是否仍会响应 - 它确实如此。此外，考虑到它仍然会更新屏幕这一事实，我在绘制事件中放置了一个断点并得到了一些（更多）奇怪的行为。它在绘制事件中命中断点，但此时不在调用堆栈的顶部。调用堆栈的顶部显示“处于睡眠状态，等待或加入”。接下来是paint中的行，然后是外部代码，然后是main。所以屏幕上突出显示的行是绿色的 - 不是黄色的。此外，如果我按 F10（跳过），它确实会向下移动 1 行，但疼痛方法仍然不在调用堆栈的顶部。此时，没有其他线程在运行，没有其他代码在执行，没有其他事情发生？！？！这里发生了什么？

最后一点 - 我在 TcpListener 的 Accept Socket 事件中设置了一个断点，当我连接到 TCP/IP 端口时，它会中断该代码，并且该代码位于调用堆栈的顶部。

对不起 - 但我还是很困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T16:19:34.970

您可能对在非 UI 线程上创建的控件（或其句柄）有问题，[请查看此问题](https://stackoverflow.com/questions/10436981/winforms-application-hang-due-to-systemevents-onuserpreferencechanged-event/11634388#11634388)。**

# jquery - 在另一个函数之后运行 jQuery 函数

> ID：11585706
> 
> 赞同：0
> 
> 时间：2012-07-20T19:21:38.413
> 
> 标签：jquery

问题是，我是 jquery.maskedinput 插件，它添加到掩码字段

工作正常 ...

但是在我正在做的一个系统中，有一个添加额外字段的功能，人们点击一个按钮，使这个功能，它添加更多的数据字段，除了那里出现错误，掩码工作后没有添加日期字段，我尝试在添加字段后拨打电话，但仍然无法正常工作

我将演示

我在表单中有以下字段

```
<p class="data">
<input type="text" name="dataInicial" rel="data"> 
```

我把脚本

```
$ ('[rel=date]').mask("99/99/9999"); 
```

奇迹般有效，

然后我有另一个通过单击按钮调用的函数

复制我放在上面的 html 文本字段并添加到 div

```
var field = $('p.data').html();

$('div.teste').append(field); 
```

或者在第二页上看起来一样，并且存在错误，睫毛膏遮罩功能仅在添加之前的页面上有效..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:24:13.967

您必须将掩码应用于新创建的字段。

```
var field = $('p.data').html();
$(field).appendTo('div.teste').mask('99/99/9999'); 
```

或者也许[这个小提琴](http://jsfiddle.net/BRyC8/)代表了你试图实现的目标。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-20T19:24:01.957

你必须使用jquery live。由于您动态添加的字段不会附加 .maskedinput 。或者您必须在添加字段后手动附加效果。

# ruby - ActiveLdap 按属性查找用户

> ID：11585707
> 
> 赞同：0
> 
> 时间：2012-07-20T19:21:40.803
> 
> 标签：ruby, ldap

我正在尝试使用 ActiveLdap 搜索具有特定属性值的用户，但它正在向服务器发送一些奇怪的查询。我的设置是这样的：

```
class Ldapuser < ActiveLdap::Base
    ldap_mapping :dn_attribute => 'uid',
                 :prefix => 'ou=People',
                 :classes => ['top', 'inetOrgPerson']
end 
```

然后尝试找到具有特定专业的学生：

```
Ldapuser.all(
        :attribute => 'studentMajor', :value => 'CHEM',
        :attribute => 'primaryAffiliation', :value => 'student',
        :attribute => 'organizationalStatus', :value => 'active').each {|user|
    # process the user...
} 
```

当我运行它时，它永远不会到达它将处理用户的内部块，我必须终止程序。Tcpdump 显示执行的三个搜索：

*   searchRequest(1) "" baseObject - 给出 0 个结果。
*   searchRequest(2) "cn=schema" baseObject - 给出了 115 个结果。
*   searchRequest(3) "ou=people,dc=myedu,dc=edu" wholeSubtree - 这需要太长时间，所以我打断了它。

我的期望是它会执行一次查询并快速获得大约 20 个结果，这是我在命令行中使用 ldapsearch 时得到的结果：

```
ldapsearch -x '(&(studentMajor=CHEM)(primaryAffiliation=student)
        (organizationalStatus=active))' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T04:05:33.253

.all() 是 find(:all, ...) 的同义词，并没有从文档中显示出多个属性名称-值对，并且您看到的行为是一致的。它似乎只搜索第一对，或者可能是任何一对：因此搜索时间很长。您需要使用 :filter 选项，我可以快速收集到。

# css - 我还需要使用带有 CSS3 功能的前缀吗？

> ID：11585708
> 
> 赞同：0
> 
> 时间：2012-07-20T19:21:41.860
> 
> 标签：css, cross-browser, vendor-prefix

例如，对于 box-shadow 或过渡，我还需要使用“moz”或“webkit”之类的前缀吗？看起来……很奇怪，至少在 Unix 上的 Firefox 上，它可以完美地工作，没有任何前缀。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T19:35:59.860

这取决于您需要支持哪些浏览器。CSS 3 功能仅适用于完全或部分支持 CSS 3 的浏览器。

一些浏览器通过使用前缀来支持标准之外的功能。其中一些功能最终出现在标准中，较新的版本支持带前缀和不带前缀的这些功能，以后只支持不带前缀的功能。

您只需为您支持的不同浏览器添加相同 CSS 的不同版本，并在浏览器更新时更新样式表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T19:28:23.773

我会说现在继续放前缀。
一些旧版浏览器仍在使用它们，不幸的是被很多用户使用。

**例如，以下情况需要前缀：**

*   *边框半径* (Saf3-4, iOS 1-3.2, Android ≤1.6)
*   *box-shadow* (Saf3-4, iOS 4.0.2 - 4.2, Android 2.3+)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T19:30:26.820

简短回答：**使用它们**，因为**HTML5**和**CSS3**仍在**开发**中，任何浏览器都不完全支持。

您可能想阅读的其他内容：作为开发人员，我们需要从用户的角度来看，跨浏览器兼容性对于在所有浏览器中保持您的网站布局几乎相同至关重要，此外，它还可以为您的工作提供专业优势，如果您的布局在所有浏览器中都是一致的，使用专有属性不会增加您的页面加载时间，并且大多数用户不会将他们的浏览器更新到最新版本，因此他们得到一个破旧的渲染页面，所以为了安全使用它们除非所有浏览器都完全支持 CSS3 和 HTML5。

# assembly - 堆栈指针和分段

> ID：11585710
> 
> 赞同：0
> 
> 时间：2012-07-20T19:22:15.017
> 
> 标签：assembly, operating-system, stack

> **可能重复：**
> [堆栈内存如何增加？](https://stackoverflow.com/questions/3211600/how-does-a-stack-memory-increase)

让我们考虑一个使用分段的操作系统。
我的问题是：操作系统是否会接收堆栈指针的每次更改
并立即（或相当立即）分配/释放物理内存中的空间，
或者它使用一种聪明的策略来分配比您减少 sp 时所需的内存更多的内存，释放内存只有当释放的内存达到一定数量时？

我希望我的问题足够清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:54:52.507

如果我理解你在问什么，答案如下：

操作系统在进程创建开始时为堆栈分配一定的空间。当堆栈操作发生时，处理器会自动增加和减少堆栈指针，并且软件会减少堆栈指针以分配临时数据的空间（如在函数调用中）。递减是因为栈实际上是向下增长的，如果指针超过给定的分配空间就会发生栈溢出。分配的空间量因系统而异。操作系统可以做的唯一可能的“技巧”是分页，它可以将内存标记为已分配，但在软件使用它之前不会实际分配物理内存。这称为需求分页，并且在堆而不是堆栈中具有更多应用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T08:38:30.687

还要添加到上面的答案..
进程的堆栈向堆向下增长，操作系统必须确保这些区域不重叠。
当堆栈需要更多空间（即堆栈指针指向非法/未分配的内存）时，会导致页面错误。

1.  页面错误的中断处理程序是这样编写的，它读取当前堆栈指针，它的最大限制是查找页面错误是由于堆栈增长还是因为我们触及了部分虚拟内存（属于代码/数据）而不是尚未映射到物理内存（需求分页）。
2.  如果由于堆栈增长而发生页面错误
    *   我们检查是否达到堆栈的最大大小，在 GNU/Linux 系统上它是 8Mb（默认）
    *   接下来我们通过分配一个新的页面到堆栈来看看它是否会与堆重叠
    *   这之后可能会进行更多的健全性检查。
    *   如果以上所有都通过，则分配一个新页面
    *   如果其中一项检查失败，则根据实现将出现段错误或堆栈溢出。
3.  如果我们在上一步中确实分配了一个新页面，则更新错误进程的堆栈指针，将新映射添加到错误进程的页表中，并且页面错误处理程序将控制权返回给错误指令，通常是推送或 pusha（在汇编中，x86）。

PS：以上步骤来自我基于pintos OS的UG OS课程的OS作业，实际步骤可能会有所不同（在像linux这样的OS中会很复杂）。这里[链接](http://www.cse.iitd.ac.in/~sbansal/csl373/pintos/doc/pintos_4.html)到部分堆栈增长见4.3.3节。

# ruby-on-rails-3 - Thinking Sphinx geodist search 返回不同城市的位置

> ID：11585711
> 
> 赞同：0
> 
> 时间：2012-07-20T19:22:15.717
> 
> 标签：ruby-on-rails-3, geolocation, thinking-sphinx

我在美国各地都有 Thinking Sphinx 索引位置，我需要找到最接近某个纬度/经度的位置。在最简单的示例中，我使用特定城市的纬度/经度（从 Google Maps API 提取的纬度/经度）并进行搜索，首先按最近的位置排序。

问题是，当我搜索纽约市的位置时，它会给出德克萨斯州奥斯汀的结果。当我在奥斯汀搜索位置时，我会得到宾夕法尼亚州泽西海岸。每个城市搜索都会给我一个完全不同的城市的结果。我什至不确定从哪里开始解决这样的问题。

这是我的索引定义。（该位置有一个关联的城市对象，它也有一个纬度/经度，因此是 location.latitude）

地点：

# 思考狮身人面像

```
define_index do
    indexes :name
    indexes :description
    indexes city.name, :as => :city_name

    has "RADIANS(locations.latitude)",  :as => :latitude,  :type => :float
    has "RADIANS(locations.longitude)", :as => :longitude, :type => :float

    set_property :latitude_attr => :latitude, :longitude_attr => :longitude

    # set_property :delta => true
end

############################################################### 
```

在不设置`latitude_attr`属性的情况下，我不断收到错误消息：

```
Sphinx Daemon returned error: index location_core: unknown latitude attribute 'latitude' 
```

搜索命令： `Location.search(:geo => [city.latitude, city.longitude], :order => "@geodist ASC, @relevance DESC", :per_page => 5)`

感谢您提供任何帮助以使我朝着正确的方向前进。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T14:52:46.190

`"RADIANS(locations.latitude)"`从您可能在数据库中使用的度数转换，因此您也必须转换`:geo => [city.latitude, city.longitude]`为弧度。IE

```
:geo => Geocoder::Calculations.to_radians([city.latitude, city.longitude]) 
```

所以我认为它“工作”，因为现在两者都是度数，或者你的数据库字段无论如何都是弧度，并且不需要转换。但是文档说：

> 但是请记住，Sphinx 需要这些值是浮点数，并通过弧度而不是度数来跟踪位置。如果在您自己的数据库中不是这种情况（这不足为奇 - 大多数人将值存储为度数），那么您需要手动转换属性的列：

[http://pat.github.com/ts/en/geosearching.html](http://pat.github.com/ts/en/geosearching.html)

# javascript - 向 Gmail 提要发送跨域请求的方法有哪些？

> ID：11585713
> 
> 赞同：2
> 
> 时间：2012-07-20T19:22:17.343
> 
> 标签：javascript, gmail, cross-domain, google-api

我知道网址是：

```
https://mail.google.com/mail/feed/atom 
```

似乎 gmail API 仅提供 XML 格式的 gmail 提要。我该如何解决这种情况？这段代码似乎不起作用。

```
$.ajax({
    url: 'https://mail.google.com/mail/feed/atom',
    dataType: 'xml',
    type: 'GET',
    success: function(res) {
        var headline = res.responseXML;
        console.log(headline);
    },
    error: function() {
        console.log('failed');
    }
}); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:25:54.613

你不能。让任何随机网站阅读您的电子邮件将是一件坏事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T19:27:35.623

我假设你有

1.  您自己的站点 A
2.  人们登录到 A 并提供 gmail 凭据
3.  现在您想从您自己的站点 A 为他们提供他们的 gmail 电子邮件

现在，通常如果您尝试从 A 提供的页面调用 gmail，大多数浏览器都会阻止此跨域请求。

你可以在你的服务器上实现你自己的网络服务，它就像代理一样向gmail feed发出请求并将xml返回给客户端。这样，您的所有请求都将发送到同一个域 A

# java - Weka 中的修剪树和未修剪树是什么？

> ID：11585715
> 
> 赞同：12
> 
> 时间：2012-07-20T19:22:48.867
> 
> 标签：java, weka

在决策树 J48 示例中，当我们说树修剪或未修剪时，有什么区别？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-20T19:26:21.830

未修剪的树更大。发生的情况是，基本上树是根据实现的算法创建的，如果启用了修剪，则额外的步骤会查看可以删除哪些节点/分支而不会对性能产生太大影响。

修剪背后的想法是，除了使树更易于理解之外，还可以降低过度拟合训练数据的风险。也就是说，能够（几乎）完美地对训练数据进行分类，但仅此而已，因为树没有学习基本概念，而是学习了训练数据固有的和特定的属性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-31T11:52:14.453

我想在拉斯的回答中添加以下内容。取自以下[链接](http://gautam.lis.illinois.edu/monkmiddleware/public/analytics/decisiontree.html)

> 许多算法试图“修剪”或简化它们的结果。修剪产生更少、更容易解释的结果。更重要的是，修剪可以用作纠正潜在过拟合的工具。...
> 
> J48 采用两种修剪方法。
> 
> 第一个称为子树替换。这意味着决策树中的节点可以用叶子代替——基本上减少了沿特定路径的测试数量。这个过程从完全形成的树的叶子开始，然后向根部进行。
> 
> J48 中使用的第二种修剪称为子树提升。在这种情况下，一个节点可能会向上移动到树的根部，沿途替换其他节点。子树提升通常对决策树模型的影响可以忽略不计。通常没有明确的方法来预测该选项的效用，但如果诱导过程需要很长时间，建议尝试将其关闭。这是因为子树提升在计算上可能有些复杂。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T19:28:08.837

鉴于 Weka 是一个机器学习套件，听起来他们所指的是：

[http://en.wikipedia.org/wiki/Pruning_(decision_trees)](http://en.wikipedia.org/wiki/Pruning_%28decision_trees%29)

简而言之，决策树的修剪似乎是删除可能没有太多好处的决策。

但是，我没有使用过weka，对它并不熟悉。推迟到其他答案，看看他们说的是否有道理。

# performance - Project Euler #20 的算法缓慢

> ID：11585717
> 
> 赞同：3
> 
> 时间：2012-07-20T19:22:55.193
> 
> 标签：performance, lua

这是我要解决的问题：[http://projecteuler.net/problem=20](http://projecteuler.net/problem=20)（找到 100 中的数字总和！）

我正在使用 Lua，它只有 double 作为数字类型，所以我不得不手动处理。我使用的代码几乎与我在问题 16 中使用的代码相同（找到 2^1000 中的数字总和）。然而，这一次问题似乎超出了我的算法在相当长的时间内解决的问题——它达到了大约 32 个！在我必须等待超过 10 秒才能计算下一个总数之前，然后是 34！它比我等待的时间更长。有什么办法可以加快速度（使用“原始”Lua - 而不是 LuaJIT 或类似的东西）？

```
local sum = {1}
for i=1,100 do
    local carry = 0
    for v=1,#sum do
        local c = carry
        carry = 0
        local t = sum[v] * i
        while t >= 10 do
            t = t - 10
            carry = carry + 1
        end
        local s = t + c
        while s >= 10 do
            s = s - 10
            carry = carry + 1
        end
        sum[v] = s
    end
    if carry > 0 then
        sum[#sum+1] = carry
    end
    print(""..i.."! = "..getCharactersReversed(sum))
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-21T01:06:39.287

您的问题是 的十进制表示的长度`(n+1)!`可以比​​ 的长一倍以上`n!`。这首先发生在`n == 14`,

```
14! =   87178291200
15! = 1307674368000 
```

因此在这里你的最终`carry`是 13 并且领先的“数字”大于 10。从那时起，这个问题变得越来越严重，打印出来`#sum`并且最终产生产量

```
15      11      13
16      12      20
17      13      35
18      14      64
19      15      121
20      16      243
21      17      510
22      18      1124
23      19      2585
24      20      6204
25      21      15511
26      22      40329
27      23      108888
28      24      304888
29      25      884176
30      26      2652528
31      27      8222838
32      28      26313083 
```

通过逐步减法减少`leading_number * i`到小于 10 的数字需要越来越长的时间。在某些时候（估计大约 45），该值变得如此之大，以至于`t - 10 == t`您陷入了无限循环。LuaJIT 根本无济于事。

所以你必须确保你永远不会写一个大于 9 的数字，例如通过减少循环中的最后一个进位，就像前面的数字一样，并根据需要添加尽可能多的数字。这样做，程序运行没有明显的延迟。

```
if carry > 0 then
    local w = #sum+1
    local cc = 0
    while carry > 0 do
        while carry >= 10 do
            carry = carry - 10
            cc = cc + 1
        end
        sum[w] = carry
        w = w+1
        carry = cc
        cc = 0
    end
end 
```

但是通过除法确定数字和进位要简洁得多，并且对于较大的因子也更有效（当将一个数字乘以 100 时，结果平均为 450，需要 45 次减法，但对于所有因子来说，两次除法就足够了）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-28T00:44:38.583

试试这个短代码：

```
 def factorial(n):
        return reduce(lambda x,y: x*y,[_ for _ in range(1,n+1)])

    print sum(map(int,list(str(factorial(100))))) 
```

# c# - 从 bmp c# 创建一个字节 []

> ID：11585721
> 
> 赞同：-1
> 
> 时间：2012-07-20T19:23:25.417
> 
> 标签：c#, image, byte, bmp

所以我知道有很多关于如何从 a 制作 Bmp 的例子`byte[]`，但我必须返回 a`byte[]`以便它可以被网页加载。

我有一个 Bmp，我对它进行了一些处理，我想`byte[]`用对网页的这些更改创建一个新的。

如果重要的话，我认为该图像最初是 jpeg，但理想情况下，我希望它适用于任何图像格式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T19:25:38.587

`.Save()`位图到 MemoryStream。返回你的MemoryStream.ToArray()

# android - 使用 MediaStore 成像器填充 GridView 时重复项

> ID：11585723
> 
> 赞同：0
> 
> 时间：2012-07-20T19:23:54.263
> 
> 标签：android, gridview, mediastore

我正在尝试将 sdcard 手机中的所有图像加载到 GridView 上。我实现了下面的代码，但它只加载了几张照片并重复了一百次。不知道我做错了什么！

这是 onCreate 方法：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_grid_images);

    //GridView
    imagesGridView = (GridView) findViewById(R.id.imagesGridView);

    //Do the query
    externalContentUri = MediaStore.Images.Media.EXTERNAL_CONTENT_URI;        

    String[] projection = {MediaStore.Images.Media._ID}; 
    String selection = "";
    String [] selectionArgs = null;
    externalCursor = getContentResolver().query(externalContentUri,projection,selection,selectionArgs,null); 
    externalColumnIndex = externalCursor.getColumnIndex(MediaStore.Images.Media._ID);

    //Gets the adapter
    myAdapter = new ImageAdapter(this);
    imagesGridView.setAdapter(myAdapter);   
    imagesGridView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
            Toast.makeText(GridImages.this, "" + position, Toast.LENGTH_SHORT).show();
        }
    }); 
```

}

这是我的自定义适配器：

```
public class ImageAdapter extends BaseAdapter {
    private Context mContext;

    public ImageAdapter(Context c) {
        mContext = c;
    }

    public int getCount() {
        return externalCursor.getCount();
    }

    public Object getItem(int position) {
        return null;
    }

    public long getItemId(int position) {
        return 0;
    }

    // create a new ImageView for each item referenced by the Adapter
    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView;
        if (convertView == null) {  // if it's not recycled, initialize some attributes
            imageView = new ImageView(mContext);
            externalCursor.moveToPosition(position);
            int imageID = externalCursor.getInt( externalColumnIndex );
            Uri uri = Uri.withAppendedPath(MediaStore.Images.Media.EXTERNAL_CONTENT_URI,Integer.toString(imageID));

            imageView.setImageBitmap(loadThumbnailImage(uri.toString()));   

        } else {
            imageView = (ImageView) convertView;
        }

        return imageView;
    }

    protected Bitmap loadThumbnailImage( String url ) {
        // Get original image ID
        int originalImageId = Integer.parseInt(url.substring(url.lastIndexOf("/") + 1, url.length()));

        // Get (or create upon demand) the micro thumbnail for the original image.
        return MediaStore.Images.Thumbnails.getThumbnail(mContext.getContentResolver(),
                            originalImageId, MediaStore.Images.Thumbnails.MINI_KIND, null);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:35:15.033

你的`getView`方法应该是：

```
 if (convertView == null) {  // if it's not recycled, initialize some attributes
            imageView = new ImageView(mContext);
    } else {
         imageView = (ImageView) convertView;
    }
    externalCursor.moveToPosition(position);
    int imageID = externalCursor.getInt( externalColumnIndex );
    Uri uri = Uri.withAppendedPath(MediaStore.Images.Media.EXTERNAL_CONTENT_URI,Integer.toString(imageID))
    imageView.setImageBitmap(loadThumbnailImage(uri.toString()));   
    return imageView;
    } 
```

使用您当前的代码，您仅在`GridView`需要图像时第一次设置图像（例如当它首次出现在屏幕上时），对于其他行，旧的会被回收。

# asp.net-mvc - MVC ViewModel 使用列表

> ID：11585725
> 
> 赞同：1
> 
> 时间：2012-07-20T19:23:56.403
> 
> 标签：asp.net-mvc, linq, asp.net-mvc-viewmodel

我有一个使用列表和字符串值的视图。

目前我正在执行以下操作并将其传递给视图：

```
var Note = (from p in db.tblNote where p.NoteName = pnote  select  p).ToList();
ViewBag.NotesID = id;

return PartialView(Note); 
```

如您所见，目前我正在将注释（这是一个列表）传递给视图，然后将直接在我的视图中获取 ViewBag。

我喜欢做的是为此创建一个视图模型。我想知道为我需要的东西创建视图模型的最佳实践是什么。

这是我为 ViewModel 提出的：

```
public class NotesViewModel
{        
    public string NotesID { get; set; } // this will replace where I had ViewBag.NotesID

    public IEnumerable< Notes>  NotesList { get; set; } // this will replace where I had var Note = (from p in db.tblNote      
} 
```

我有点迷失在哪里创建您在 中看到的 Notes，我是否创建了另一个在不同文件中`IEnumerable<Notes>`调用的类，以及如何为其分配适当的类型。将代表 LINQ 查询。`Notes``.cs`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:31:30.563

我假设您希望 Notes 成为 Note 类型的列表？如果是这样，那为什么不做`IEnumerable<Note>`呢？

A`IEnumerable`基本上是一种通用数据类型，允许您枚举其项目，List 是它的扩展。

因此，您只需将代码更改为：-

```
public class NotesViewModel
{        

    public string NotesID { get; set; } // this will replace where I had ViewBag.NotesID

    public IEnumerable<Note>  NotesList { get; set; } // this will replace where I had var Note = (from p in db.tblNote

}

public ActionResult MyFunction()
{
    var Notes = (from p in db.tblNote where p.NoteName = pnote 
            select  p).ToList();

    var oMyNotesVM = new NotesViewModel();
    oMyNotesVM.NotesID = id;
    oMyNotesVM.NotesList = Notes;

    return PartialView(oMyNotesVM );
} 
```

所以在这里我们所做的就是获取 List 并将其传递给 IEnumerable，因为 IEnumerable 是 List 的通用形式。基本上对于一个项目来暗示 IEnumerable 它需要通过其数据成员支持迭代..例如

```
while(enumerator.MoveNext())
{
  object obj = enumerator.Current;
  // work with the object
} 
```

哪个是一样的（几乎一样）

```
foreach(object obj in collection)
{
    // work with the object
} 
```

如果您询问数据类型`Note`应该是什么，那将是 db.tblNote 的类类型。如果这是实体框架，那么您可以为此使用从您的模型自动生成的类。

# javascript - CoffeeScript：使用对象作为参数

> ID：11585728
> 
> 赞同：2
> 
> 时间：2012-07-20T19:24:02.380
> 
> 标签：javascript, coffeescript

## 我的代码

有一个小的 CoffeScript 代码被剪断：

```
Function::trigger = (prop, getter, setter) ->
      Object.defineProperty this.prototype
              get: getter,
          set: setter 
```

## JavaScript 编译

编译器输出：

```
Function.prototype.trigger = function(prop, getter, setter) {
  Object.defineProperty(this.prototype({
    get: getter
  }));
  return {
    set: setter
  };
}; 
```

但我希望输出为：

```
Function.prototype.trigger = function(prop, getter, setter) {
  Object.defineProperty(this.prototype({
    get: getter
    set: setter
  };
}; 
```

## 我的问题

*   为什么编译器会输出那么奇怪的东西？
*   如何**更改我的代码**以使编译器输出*我*想要的内容？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T19:26:05.037

你的缩进是错误的。还要注意你是如何忘记了 this.prototype 后面的逗号的，这让 CoffeeScript 编译器认为你正在尝试使用一个对象作为参数来执行名为 this.prototype 的函数。

```
Function::trigger = (prop, getter, setter) ->
      Object.defineProperty this.prototype
              get: getter,
          set: setter 
```

上面的代码应该是这样的。请注意，我进行了一些更改以使其更像“CoffeeScript”:)

```
Function::trigger = (prop, getter, setter) ->
    Object.defineProperty @::,
        get: getter
        set: setter 
```

**请记住，CoffeeScript 是 whitespace-significant**。CoffeeScript 还删除了您在 JavaScript 中看到的许多“绒毛”（逗号、括号、花括号等）。正因为如此，**格式化代码以符合 CoffeeScript 标准对于**编写符合您期望的编译代码至关重要。如果你不这样做，编译器将被迫猜测你试图做什么，这通常是错误的。

上面的示例正确编译为以下 JavaScript（基于 coffeescript.org）...

```
Function.prototype.trigger = function(prop, getter, setter) {
  return Object.defineProperty(this.prototype, {
    get: getter,
    set: setter
  });
}; 
```

请注意，CoffeeScript 将自动返回最后执行的表达式（在本例中，是对 Object.defineProperty 的调用）。如果你想避免这种行为（你不应该，但有时你需要），你可以在 Function.prototype.trigger 函数的末尾添加一个 return 语句，如下所示：

```
Function::trigger = (prop, getter, setter) ->
    Object.defineProperty @::,
        get: getter
        set: setter

    return 
```

这将编译为...

```
Function.prototype.trigger = function(prop, getter, setter) {
  Object.defineProperty(this.prototype, {
    get: getter,
    set: setter
  });
}; 
```

# sql - SQL case语句中的有趣行为，某些case总是被命中

> ID：11585729
> 
> 赞同：1
> 
> 时间：2012-07-20T19:24:06.877
> 
> 标签：sql, case-statement

我正在运行以下 SQL，但 0 案例似乎总是受到打击：

```
 select 
ccy.numberofdecimals,
ABS(round(ts.TRADECCY1AMOUNT, 2)),

CASE 
WHEN CCY.NUMBEROFDECIMALS = 0 THEN
CONVERT(Numeric(38,0), ABS(round(TS.TRADECCY1AMOUNT, 0)))
WHEN CCY.NUMBEROFDECIMALS = 2 THEN
CONVERT(Numeric(38,2), ABS(round(TS.TRADECCY1AMOUNT, 2)))
WHEN CCY.NUMBEROFDECIMALS = 3 THEN
CONVERT(Numeric(38,3), ABS(round(TS.TRADECCY1AMOUNT, 3)))
END as 'Transaction Amount',

FROM
blah blah blah 
```

然而我的结果集总是：

![在此处输入图像描述](../Images/c3ee96c0dfced4f44c2c44a048bc0e56.png)

当我删除小数位数 0 时，它会产生正确的结果。任何人都知道为什么这个案例陈述总是评估 0 案例？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T20:19:00.803

我认为缺少您的 else 语句并具有不同的数据类型会使一切变得混乱。这是您应该学习的一种很好的调试技术。将您的代码简化到完全基本的程度。然后开始添加你的逻辑。你会很快发现你在哪里犯了错误。在你的情况下，从这个开始：

```
SELECT CASE 
    WHEN t.a = 0 THEN 1
    WHEN t.a = 2 THEN 2
    WHEN t.a = 3 THEN 3
END as c
FROM (  select 1 as a
        union
        select 2 as a
        union
        select 3 as a
     ) t 
```

并一一更改您的 THEN 子句。显然 CASE 语句有效，所以它一定是你正在做的事情。

# json - D3 树视图，是正确显示树所需的关键“子项”

> ID：11585731
> 
> 赞同：2
> 
> 时间：2012-07-20T19:24:13.697
> 
> 标签：json, treeview, d3.js

我有一个从另一个来源获取的 JSON 以显示在 D3 树视图中。JSON 是一种树结构，但不使用关键字“children”来定义子节点。我对传入的 JSON 没有任何控制权，并且表示子节点的文本可能会更改。D3 树视图完全依赖于关键字“children”还是 D3 有办法使用其他字符串来表示子节点？

下面是我得到的 JSON 的简化版本。

```
{
    "name": "一些字符串",
    “分数”：“0.29”，
    “重量”：“0.8”，
    “任务1”： [
        {
            "name": "一些字符串",
            “分数”：“0.19”，
            “重量”：“0.2”，
            “子任务1”：[
                {
                    “分数”：“0.11”，
                    “重量”：“0.1”，
                    “名称”：“一些字符串”
                }
            ]
        }
    ],
    “任务2”：[
        {
            "name": "一些字符串",
            “分数”：“0.19”，
            “重量”：“0.2”，
            “子任务1”：[
                {
                    “分数”：“0.11”，
                    “重量”：“0.1”，
                    “名称”：“一些字符串”
                }
            ]
        }
    ]
}

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T19:36:16.747

您可以指定函数来获取节点的子节点。请参阅[API 文档](https://github.com/mbostock/d3/wiki/Treemap-Layout#wiki-children)。

# ruby-on-rails - 缩短长数字以包括 K/M/B/T

> ID：11585734
> 
> 赞同：19
> 
> 时间：2012-07-20T19:24:20.060
> 
> 标签：ruby-on-rails, ruby

我已经检查了 Rails [`number_to_human`](http://api.rubyonrails.org/classes/ActionView/Helpers/NumberHelper.html#method-i-number_to_human)，但这并不是我想要的。

我想缩短长数字而不包括完整的单位名称：

```
420 -> 420
5,680 -> 5,680
12,680 -> 12.6K
6,802,251 -> 6.80M
894,100,158 -> 894M 
```

如您所见，没有特定的精度，但更多的是关于总数的长度

任何人都有一个很好的帮助方法吗？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-07-20T19:58:37.527

放入您的`config/locales/en.yml`：

```
en:
  number:
    human:
      decimal_units:
        format: "%n%u"
        units:
          unit: ""
          thousand: K
          million: M
          billion: B
          trillion: T
          quadrillion: Q 
```

然后你会得到：

```
number_to_human 420 # => "420"
number_to_human 5680 # => "5.68K"
number_to_human 12680 # => "12.7K"
number_to_human 6802251 # => "6.8M"
number_to_human 894100158 # => "894M" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-06-15T01:54:06.660

像这样：

```
number_to_human(a_number,format:'%n%u',units:{thousand:'K',million:'M',billion:'B'}) 
```

# android - Layout_weight 无法与 ScrollView 正确分布

> ID：11585737
> 
> 赞同：0
> 
> 时间：2012-07-20T19:24:28.170
> 
> 标签：android, android-layout

我正在尝试创建一个布局，其中我有一个固定大小的 ScrollView 隐藏在屏幕的右侧，然后 LinearLayout 填充剩余的屏幕空间。像这样：

```
<---------------------------LinearLayout---------------------------><----ScrollView----> 
```

在 ScrollView 中是另一个 LinearLayout，我将 TextViews 动态添加到其中。这是我目前拥有的：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:baselineAligned="false"
android:orientation="horizontal" >

<LinearLayout
    android:id="@+id/chart"
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_weight="1"
    android:background="#FF0000"
    android:orientation="horizontal" >
</LinearLayout>

<ScrollView
    android:layout_width="260dp"
    android:layout_height="match_parent"
    android:background="#0000FF"
    android:scrollbars="vertical" >

    <LinearLayout
        android:id="@+id/meterList"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="#00FF00"
        android:orientation="vertical" >
    </LinearLayout>

</ScrollView>

</LinearLayout> 
```

我读到将宽度设置为 0dp 并将重量设置为 1 应该让它填满屏幕的其余部分，但它会被 ScrollView 压扁，占据屏幕的 90%。奇怪的是，我在 ScrollView 中的 LinearLayout 只占用了其中一半的空间。因为我对它进行了颜色编码，所以它看起来像这样：

```
<--Red--><----------------Green----------------><----------------Blue----------------> 
```

一旦一个视图被动态添加，所有的蓝色背景都应该像这样被覆盖：

```
<------------------------------Red------------------------------><-------Green-------> 
```

这些都没有任何意义……

编辑：因为这看起来很相关，所以我应该提到这个布局被我的片段夸大了。该片段然后附加到：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/fragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/clearPrefs"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="DEBUG" >
        </Button>
    </LinearLayout>

    <fragment
        android:id="@+id/fragment_chart"
        android:name="...GraphFragment"
        android:layout_width="wrap_content"
        android:layout_height="match_parent" />

</LinearLayout> 
```

# c++ - 在 Directx 9 中为网格对象着色

> ID：11585741
> 
> 赞同：1
> 
> 时间：2012-07-20T19:24:37.477
> 
> 标签：c++, colors, directx, vertex

大家好，所以我的这部分代码专门用于为茶壶着色。我知道这段代码有问题，我只是在猜测老实说该怎么做。所以你们能帮我解决这个问题吗谢谢。

如果你看不懂代码，我真的没有时间发布 decleration 变量，你如何更改默认几何对象的颜色，如茶壶、盒子、球体等。

```
// Teapot section
D3DXCreateTeapot(device, &Teapot, 0);
Teapot->GetVertexBuffer(&Teapot_VB);

ColorVertex* t_v;

device->CreateVertexBuffer(
    Teapot->GetNumVertices()*sizeof(ColorVertex),
    D3DUSAGE_WRITEONLY,
    ColorVertex::FVF,
    D3DPOOL_MANAGED,
    &Teapot_VB,
    NULL);

Teapot_VB->Lock(0, 0, (void**)&t_v, 0);
for(int i = 0; i <= Teapot->GetNumVertices(); i++)
{
    t_v[i].m_color = RED;
}
Teapot_VB->Unlock(); 
```

# javascript - 对异步函数进行同步调用

> ID：11585742
> 
> 赞同：3
> 
> 时间：2012-07-20T19:24:37.653
> 
> 标签：javascript, jquery, ajax

假设我有这个异步功能：

```
function fooAsync(){
  callSomeApi(some_args, callbackFunction(results){
    return results; //i want to return the results here after the api call.
  }
} 
```

我正在寻找一种将 prev 函数的返回值分配给 var 的方法，并且只有当我有这个值时才继续使用代码。

```
//some code here
var foo = fooAsync();
//some code here after getting back from the async function. 
```

问题是 foo 将是未定义的，因为 javascript 将在内部异步 api 调用完成之前返回。我知道我可以为此使用回调，但我正在寻找一种方法来“锁定”异步函数并仅在它得到结果时恢复。这样我就不必在异步调用之后将所有代码作为回调传递。

简而言之 - 我如何以常规同步方式从异步 ajax 调用（在我的情况下我调用 google maps api）返回值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T19:37:38.860

通常，使 ajax 调用同步是一个坏主意。您可以设置 XMLHttpRequest 对象上的一个属性（jQuery 允许您轻松执行此操作）以发出同步 ajax 请求。我不确定谷歌地图 API 是否公开了此功能，但您应该先检查那里。

我知道你说过你不想使用回调，但除了做这样的事情：

```
while(foo === undefined){
  sleep(5) //pseudo code sleep method
} 
```

确实没有任何方法可以锁定当前的执行上下文。

同样使用您提供的代码，该方法将永远不会返回未定义以外的任何内容。您正在调用 api 方法（异步执行）并立即返回控制权。api 方法调用的响应处理程序内部的“return”语句只会在匿名函数内部返回。因此，即使您**能够**锁定线程直到结果返回，您也不会拥有它们。

但是，如果您有兴趣以正确的方式进行此操作，那么您应该使用 jQuery 提供的延迟/承诺模型。

```
function fooAsync(){
  var deferred = $.Deferred();
  callSomeApi(some_args, callbackFunction(results){
    deferred.resolve(results) //i want to return the results here after the api call.
  }
  return deferred.promise();
} 
```

然后你会改变你的调用代码是这样的：

```
//some code here
$.when(fooAsync()).then(function(results){
    //use the results
});
//some code here after getting back from the async function. 
```

[jQuery 延迟对象文档](http://api.jquery.com/category/deferred-object/ "jQuery 延迟对象")

# php - APC fetch 返回 null，codeigniter 进度条

> ID：11585755
> 
> 赞同：1
> 
> 时间：2012-07-20T19:26:06.020
> 
> 标签：php, codeigniter, apc

我有一个运行 codeigniter 的 imagehost 风格的网站，我正在尝试使用 APC 实现一个进度条，以便在文件上传时显示。

现在，当我访问进度视图页面或通过 ajax 时，它只是返回`bool(false)`.

我已经`apc_store`在该视图中进行了测试和获取，只是为了查看 APC 是否正常运行，并且这种方式有效，但我的上传表单方式似乎不适用于 APC。

我的进度视图 (domain.com/progress/KEY) [http://pastebin.com/m2qF1BEw](http://pastebin.com/m2qF1BEw)

我`progress()`的控制器：

```
function progress() {
    $this->load->model('Site_model');

    $data['PROGRESS_KEY']= $this->input->post('progress_key');
    $this->load->view('progress', $data);
} 
```

在我的上传页面视图上设置的密钥：

```
$up_id = md5(uniqid(rand())); 
```

我的上传页面视图中的表单：

```
<form action="http://domain.com/site" method="post" accept-charset="utf-8" enctype="multipart/form-data">

    <input type="hidden" name="APC_UPLOAD_PROGRESS" value="a1105b41e90ed6cdaa7bdef008da40ee" id="progress_key"  />

    <input type="file" name="userfile[]" value="" multiple="multiple" id="file" accept="image/*,application/pdf"  />

    <input type="submit" name="upload" id="upload" />

</form>

<iframe id="upload_frame" class="nodisplay" name="upload_frame" frameborder="0" border="0" src="" scrolling="no" scrollbar="no" > </iframe> 
```

这是表单页面上每秒请求进度视图的 JS：

[http://pastebin.com/6QW3sZLz](http://pastebin.com/6QW3sZLz)

**谁能看到我可能做错了什么？**谢谢

这也是我所有由 phpinfo() 确认的 apc php.ini 设置

```
apc.cache_by_default    On      On
apc.canonicalize        On      On
apc.coredump_unmap      Off     Off
apc.enable_cli  On      On
apc.enabled     On      On
apc.file_md5    Off     Off
apc.file_update_protection      2       2
apc.filters     no value        no value
apc.gc_ttl      3600    3600
apc.include_once_override       Off     Off
apc.lazy_classes        Off     Off
apc.lazy_functions      Off     Off
apc.max_file_size       30M     30M
apc.mmap_file_mask      no value        no value
apc.num_files_hint      1000    1000
apc.preload_path        no value        no value
apc.report_autofilter   Off     Off
apc.rfc1867     On      On
apc.rfc1867_freq        10k     10k
apc.rfc1867_name        APC_UPLOAD_PROGRESS     APC_UPLOAD_PROGRESS
apc.rfc1867_prefix      upload_ upload_
apc.rfc1867_ttl 3600    3600
apc.serializer  default default
apc.shm_segments        1       1
apc.shm_size    32M     32M
apc.slam_defense        On      On
apc.stat        On      On
apc.stat_ctime  Off     Off
apc.ttl 7200    7200
apc.use_request_time    On      On
apc.user_entries_hint   4096    4096
apc.user_ttl    7200    7200
apc.write_lock  On      On 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T19:49:01.137

好吧，这对我来说看起来不对

```
function progress() {
    $this->load->model('Site_model');

    $data['PROGRESS_KEY']= $this->input->post('progress_key'); // error here
/* above you fetch "progress key" should change to APC_UPLOAD_PROGRESS */

    $this->load->view('progress', $data);
} 
```

在此输入字段中，名称为 APC_UPLOAD_PROGRESS，**您正在获取 ID**

```
<input type="hidden" name="APC_UPLOAD_PROGRESS" value="a1105b41e90ed6cdaa7bdef008da40ee" id="progress_key"  /> 
```

你的 javascript 看起来还可以，但你没有得到当前值，你是手动设置的。

```
$("#progress_key").val(); 
```

应该给你输入字段的值。

# javascript - 使用自定义动画函数从 object.matrix.setrotationfromeuler 旋转对象

> ID：11585756
> 
> 赞同：1
> 
> 时间：2012-07-20T19:26:13.063
> 
> 标签：javascript, jquery, webgl, three.js

这里的第一篇文章.. 我不知道如何搜索这个主题，因为我认为它非常深奥。我会在解释后发布代码。

我创建了一个自定义动画函数，该函数将使用 setTimeout 函数进行递归调用以减慢调用速度，以便我可以控制动画。自定义动画函数只会在圆柱体内绘制一个矩形并在其中向上移动，并根据矩形在圆柱体内的高度来改变其宽度。

编辑：我已经想出了如何获得我想要的摄像机角度。检查评论以找出答案。

我现在遇到的问题是，当我设置初始相机位置和旋转并且 controls.update() 运行时，即使我没有移动相机，它也会改变旋转 z 轴。

这是我的全部代码：

```
var camera, scene, renderer,
geometry, material, mesh, flatrect;
var radius = 50,
    segments = 16,
    rings = 16,
    WIDTH = 800,
    HEIGHT = 800,
    VIEW_ANGLE = 40,
    ASPECT = WIDTH / HEIGHT,
    NEAR = 1,
    FAR = 5000; 

var animation = true;
//var animatewidth = false;
var playblock=0;
var array = [.289, .342, .396, .451, .508, .568, .630, .697, .771, .857, 1], index = 0;
var myloop, myloop2;
var zcamera=1000; // How far the camera is away from the object
var mouseoncontainer=false;

var sliderx, slidery, sliderz;
function animatemain(){
    animaterect(playblock++);
    if(playblock<11)
    setTimeout(function(){animatemain()},100);
};

    $(document).ready(function(){

        $('#container').mouseenter(function(){              
            $('#container').mousedown(function(){
                mouseoncontainer = true;
            })      

        })

        $('#container').mouseleave(function(){
        mouseoncontainer=false;
        })

        init();
        animate();

        $('#stopanim').click(function(){
        animation=false;
        })

        $('#animatewidth').click(function(){
            playblock=0;
            animatemain()
        });
    });

    function init() {
        scene = new THREE.Scene();

        camera = new THREE.PerspectiveCamera(VIEW_ANGLE, ASPECT, NEAR, FAR );
        //camera.position.z = zcamera;

        scene.add(camera);

        geometry = new THREE.CylinderGeometry(200,200,500,100);
        material = new THREE.MeshNormalMaterial({color: 0x0000ee, opacity:.5, wireframe:true});

        geometry1 = new THREE.CubeGeometry(1, 500, array[0]*400);
        material1 = new THREE.MeshNormalMaterial({color:0x000000});

        // lights up everything
        var ambientLight = new THREE.AmbientLight( 0x00ff00 );

        scene.add(ambientLight);        
        mesh = new THREE.Mesh(geometry, material);
        flatrect = new THREE.Mesh(geometry1, material1);
        flatrect.position.x=-200*Math.sqrt(1-Math.pow(array[0],2));

        controls = new THREE.TrackballControls(camera);
        controls.rotatespeed = 50.0;
        controls.zoomSpeed = 5.0;
        controls.panSpeed = 0.8;
        controls.noZoom = false;
        controls.noPan = true;
        controls.staticMoving = true;
        //controls.dynamicDampingFactor = 0.3;
        controls.keys = [65, 83, 68];           

        scene.add(mesh);
        scene.add(flatrect);
        controls.update();
        camera.position.set(224,1003,-684);
        camera.rotation.set(-2.1692,0.1824, -1.8839);
        renderer = new THREE.WebGLRenderer({ antialias: true } );
        renderer.setSize( WIDTH, HEIGHT );
        $('#container').html( renderer.domElement );
        render();
    }
        function animate(){
            window.requestAnimationFrame( animate );        

        $('#blabber').html('The x position is: '+camera.position.x+
                    '<br/>The y position is: '+camera.position.y+
                    '<br/>The z position is: '+camera.position.z+
                    '<br/>The x rotation is: '+camera.rotation.x+
                    '<br/>The y rotation is: '+camera.rotation.y+
                    '<br/>The z rotation is: '+camera.rotation.z);
        render();
        }

        function animaterect(indexed){
        scene.remove(flatrect);
        geometry1 = new THREE.CubeGeometry(1, 500, array[indexed]*400);         
        material1 = new THREE.MeshNormalMaterial({color:0x000000});
        flatrect = new THREE.Mesh(geometry1, material1);
        flatrect.position.x=-200*Math.sqrt(1-Math.pow(array[indexed],2));

        scene.add(flatrect);
        //$('#blabber').append(flatrect.scale.get);
        render();
        }

    function render() {
        if(mouseoncontainer==true)
        controls.update();
        renderer.render( scene, camera );
    }
<body>
    <div id="container" style="width:800px;height:800px;">  
    </div>
    <button id="stopanim" type="input">Stop animation</button>
    <button id="animatewidth" type="input">Animate Width</button>
    <div id="blabber">      
    </div>
</body> 
```

编辑 1：这是 jsfiddle 链接。 [http://jsfiddle.net/J2NEB/240/](http://jsfiddle.net/J2NEB/240/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T17:46:26.260

我想通了：

[http://jsfiddle.net/J2NEB/256/](http://jsfiddle.net/J2NEB/256/)

基本上我所做的是将它围绕`x`和 y旋转`Math.PI*2`并更改

```
flatrect.position.x=-200*Math.sqrt(1-Math.pow(array[indexed],2)); 
```

到

```
flatrect.position.y=-200*Math.sqrt(1-Math.pow(array[indexed],2)); 
```

从而创建我想要的摄像机角度，而不必进行某种复杂的计算，因为旋转会改变对象的轴。

# php - 在 php 中使用正则表达式时奇怪的事情

> ID：11585759
> 
> 赞同：2
> 
> 时间：2012-07-20T19:26:27.790
> 
> 标签：php, regex

我正在尝试使用正则表达式检测模式，但我遇到了一个奇怪的问题。就是这样的模式——

```
"/sub\{(.*)\}/i" 
```

我这样使用它：

```
if(preg_match("/sub\{(.*)\}/i",$item))
{
    $sub = explode("|",$item);
    $sub_name = explode("{",$sub[0]);
    $sub_name = $sub_name[1];
    ...
} 
```

这是字符串 -

```
sub{selected posts|post[1]} 
```

好吧，上面的字符串很好，但是当我添加另一个这样的项目时 -

```
sub{selected posts|post[1],post[2]} 
```

编辑 - 问题出在我的菜单格式上，我在子部分中有“，”符号时爆炸了谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T19:28:37.647

您需要像这样转义大括号：

```
"/sub\{(.*)\}/i" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T19:29:37.913

正则表达式看起来不错，您要计算的部分是否有换行符？如果是这样，添加`m`and`s`修饰符得到`"/sub{(.*)}/ims"`

[http://php.net/manual/en/reference.pcre.pattern.modifiers.php](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T19:31:15.420

除了 Mike 写的内容之外，请确保通过[preg_quote](http://php.net/manual/en/function.preg-quote.php)运行字符串以转义任何正则表达式字符。

# mediaelement.js - mediaelement.js 防止播放器控件在页面加载时显示

> ID：11585764
> 
> 赞同：0
> 
> 时间：2012-07-20T19:26:53.663
> 
> 标签：mediaelement.js

我们试图弄清楚如何防止播放器控件在页面最初加载时显示。我们发现了在您移动鼠标并停止 2.5 秒后它会消失的代码，但我不确定如何防止它在加载时出现。我们希望它在用户悬停时可用，而不是在初始加载时。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T21:11:12.303

声明视频对象后：

```
// declare object for video
var player = new MediaElementPlayer('#player1', {
    startLanguage:'en'
}); 
```

然后使用 hideControls 方法：

```
player.hideControls(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-26T16:11:59.567

这是一个未记录的选项，似乎适用于最新的 mediaelement.js 版本。它停用控制栏，只显示播放按钮：

```
<script>
$('video,audio').mediaelementplayer({
    hideVideoControlsOnLoad: true
});
</script> 
```

# java - 没有 JAAS 的 Kerberos 身份验证？

> ID：11585767
> 
> 赞同：2
> 
> 时间：2012-07-20T19:27:09.160
> 
> 标签：java, kerberos, jaas

是否可以使用 Kerberos 但不使用 JAAS 来验证用户/密码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T02:00:28.687

[是的，请参阅http://docs.oracle.com/javase/1.5.0/docs/guide/security/jgss/tutorials/BasicClientServer.html](http://docs.oracle.com/javase/1.5.0/docs/guide/security/jgss/tutorials/BasicClientServer.html)上的使用 JavaTM GSS-API 进行没有 JAAS 编程的安全消息交换

# python - Python - 传递值如何工作？

> ID：11585768
> 
> 赞同：13
> 
> 时间：2012-07-20T19:27:29.920
> 
> 标签：python, function, styles

我对 Python 中的函数调用有疑问。假设我想编写一个名为 superLongFunc(expr) 的函数。该函数超长且很难调试。我想将函数拆分为更小的辅助函数以获得更好的可读性，例如 smallFunc1(expr)、smallFunc2(expr) 等。

我的问题是，这会影响代码的性能吗？调用函数在 Python 中究竟是如何工作的？Python 是否通过引用将变量传递给函数？还是在将变量提供给函数之前复制变量？

我知道这是一个非常愚蠢的问题，但它一直困扰着我一段时间。提前致谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-20T19:31:56.593

Python 使用有时称为[call-by-object](http://effbot.org/zone/call-by-object.htm)的系统。将参数传递给函数时不会复制任何内容。函数参数的名称在函数体内本地绑定到函数调用中提供的相同对象。

这与大多数人认为的“按值调用”不同，因为它不会复制对象。但它也不同于“通过引用调用”，因为引用是对*对象*的——绑定了一个新*名称*，但对同一个对象。这意味着您可以改变传入的对象，但在函数内部重新绑定名称对函数外部没有影响。一个简单的区别示例：

```
>>> def func(x):
...     x[0] = 2 # Mutating the object affects the object outside the function
>>> myList = [1]
>>> func(myList)
>>> myList # myList has changed
[2]
>>> def func(x):
...     x = 2 # rebinding name has no effect outside the function
>>> myList = [1]
>>> func(myList)
>>> myList # myList is unaffected
[1] 
```

我的简单思考方式是，对裸名称的赋值——即形式的语句`name = value`——与 Python 中的其他所有内容完全不同。对名称而不是值进行操作的*唯一*`name = value`方法是 do 。（这有一些挑剔的例外，比如乱搞`globals()`等等，但无论如何这些都是危险的领域。）特别`name = value`不同于`obj.prop = value`, `obj[0] = value`,`obj += value`和其他看起来像赋值但实际上对对象而不是名称进行操作的类似事物。

也就是说，Python 中的函数调用本身就有一定的开销（用于设置执行框架等）。如果一个函数被多次调用，这种开销会导致明显的性能影响。因此，将一个函数拆分为多个仍然会对性能产生影响，因为每个额外的函数调用都会增加一些开销。

# javascript - 将 dart 编译为 javascript 的限制是什么？

> ID：11585770
> 
> 赞同：8
> 
> 时间：2012-07-20T19:27:41.840
> 
> 标签：javascript, compiler-construction, dart

我知道，飞镖仍处于技术预览阶段。Dart 也可以编译成 JavaScript。

但是将 dart 编译为 javascript 的限制是什么？Dart 必须在语言中具有一些特定的功能或概念，而不能仅仅翻译成 JavaScript 代码？

原因是，一个朋友问我 Dart 是否可以将所有可能的东西编译成 JavaScript，或者说 5% 的语言元素（你知道，非常酷的改进的东西）将无法编译。

[http://www.dartlang.org](http://www.dartlang.org)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T19:56:10.747

我的创业公司在 Dart 中开发了一个超过 50.000 行的应用程序，到目前为止，在将 Dart 编译为 JavaScript 方面遇到的限制很少。Dart 从一开始就被设计为转换为 JavaScript，因此它不会受到困扰**GWT**的编译问题的困扰（许多 Java 类无法通过 GWT 序列化为 Javascript，导致人们仅出于制作GWT 编译器很高兴）。

话虽如此，在将 Dart 编译为 JavaScript 时确实存在一些限制，但其中大多数与无法在浏览器中运行的服务器端技术有关，例如套接字和 IO 访问，因此非常合理。将对象传递给隔离也有一些限制，但我相信这些将在**dart2js**的未来版本中得到解决。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-21T08:53:37.483

我可以附上[常见问题解答](http://www.dartlang.org/support/faq.html#what-input-compiles)吗？;)

> 问：任何有效的 Dart 代码都可以编译成 JavaScript，还是有限制？是的，我们打算将**任何有效的 Dart 代码编译为** **JavaScript**。如果我们的某个编译器缺少某些支持，那就是一个错误（在编译器或规范中）。

所以如果现在不是这样，至少 Google 的目标是将**任何一段 Dart 代码编译成 JavaScript**。

# php - php mySQL查询进程数组循环

> ID：11585771
> 
> 赞同：1
> 
> 时间：2012-07-20T19:27:42.877
> 
> 标签：php, mysql, arrays, input

我的相同脚本在另一个页面上工作，并且同一页面上的其他查询使用相同的连接字符串。出于某种原因，当我运行“填充”条件时，它说我的连接字符串为空。“mysql_query() 期望参数 2 是资源，在...中给出 null” 但是，如果我运行 'filled2' 条件，它执行得很好。谁能看到我看不到的东西？

```
if (isset($_POST['filled'])) {

    function updateRecords($varA,$varB,$varC){
        $updateMyTable = "UPDATE myTable SET colA='$varA', colB=$varB WHERE colC = $varC";
        if (!mysql_query($updateMyTable,$con)) {
            die('Error 1: '. mysql_error());
        } 
    }

    if ( isset( $_POST['inputArray'] ) ) {
        foreach ( $_POST['inputArray'] as $lilVars ) {
            updateRecords($lilVars['inputA'],$lilVars['inputB'],$lilVars['inputC']);
        }
    } 

} elseif (isset($_POST['filled2'])) {

    $sqlAddRecord="INSERT INTO myTable (ColX, ColY, ColZ2) VALUES ($VarX,'$VarY',$VarZ)";
    if (!mysql_query($sqlAddRecord,$con)) {
      die('Error 2: '.mysql_error());
    }

    echo "New Record Added";

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T19:32:07.123

这是因为您在函数内部使用了 $con 。您需要在函数定义中包含“global $con”，以使其可用于全局范围内的函数。

```
function updateRecords(...) {
    global $con;
    ...
} 
```

# css - CSS :first-child 选择器

> ID：11585773
> 
> 赞同：0
> 
> 时间：2012-07-20T19:27:44.123
> 
> 标签：css, css-selectors

这个设置为什么两个链接都变粗了？

我希望只有 li.current 下方的 a-tag 变粗。

CSS

```
.ul li.current a:first-child{
    font-weight:bold;
} 
```

html

```
<ul>
  <li class="current">
    <a href="">This link</a>
      <ul>
        <li>
          <a href="">Not this</a>
        </li>
      </ul>
  </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T19:28:43.827

利用：

```
ul li.current > a:first-child{
    font-weight:bold;
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/DnvFR/)**

the`>`指的是直系孩子。因此，当您的规则应用于任何作为孩子的锚时，上述规则仅适用于`ul li.current`. 请注意，您也可以`:first-child`根据您希望链接的格式删除该部分。

另请注意，在您的代码中`.ul`，您可能只是想要的位置`ul`，就像我的示例中一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T19:33:13.173

如果网站不是那么动态，您可能可以通过添加您想要加粗`style="font-weight:bold"`的标签来摆脱困境。`<a>`这也可以让您随时将您喜欢的任何链接设为粗体。虽然它在样式表之外。

# javascript - 使用 ASP.NET MVC 捆绑和缩小模块化 JavaScript (RequireJS / AMD)

> ID：11585774
> 
> 赞同：33
> 
> 时间：2012-07-20T19:27:44.150
> 
> 标签：javascript, asp.net-mvc, requirejs

有没有人在 ASP.NET MVC 项目中捆绑和缩小模块化 JavaScript（如 RequireJS / AMD）有任何经验或知道任何好的解决方案？

[是使用RequireJS 优化器](http://requirejs.org/docs/optimization.html)的最佳方式吗（可能在构建后操作中？）——或者对于 ASP.NET MVC 有更好的方法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-13T21:59:47.160

我认为你会遇到的问题是如果你使用匿名定义。如果您想要一个包含所有定义的组合/捆绑脚本文件，则必须命名它们。

例如。

```
define("someModule", ["jquery", "ko"], function($,ko) { ... }); 
```

代替

```
define(["jquery", "ko"], function($,ko) { ... }); 
```

如果您使用文件名作为模块名称，您将能够异步加载（未捆绑）以及预加载（捆绑）。这样您就可以在调试模式和发布模式下工作，而无需更改您的要求。

我没有使用 RequireJS 优化器的经验，不知道它是否处理匿名定义。

更新：

我最近不得不这样做，我遇到的问题之一是加载 require.js 的脚本标签的 data-main 属性。由于 main.js 文件依赖于捆绑的模块，因此需要在 main.js 之前但在 require.js 之后加载它们。所以我不得不放弃 data-main 并最后加载该文件（未捆绑）。

从

```
<script src="../JS/require-v2.1.2.js" type="text/javascript" data-main="main.js"></script> 
```

至

```
<script src="../JS/require-v2.1.2.js" type="text/javascript"></script>
<%: System.Web.Optimization.Scripts.Render("~/bundles/signup") %>
<script src="main.js" type="text/javascript"></script> 
```

我没看过，但如果捆绑配置可以确保 main.js 是最后一个，那么甚至不需要最后一个脚本标记。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-22T00:54:56.613

这些是将 RequireJS 与 main.js 捆绑在一起的步骤。`<head>`您可以在标签中减少一行。这并没有解决匿名定义的问题。

HTML

```
<head runat="server">
    <title></title>
    <%: System.Web.Optimization.Scripts.Render("~/bundles/scripts") %>
</head> 
```

BundleConfig.cs

```
using System.Web;
using System.Web.Optimization;

public class BundleConfig
{
    // For more information on bundling, visit http://go.microsoft.com/fwlink/?LinkId=301862
    public static void RegisterBundles(BundleCollection bundles)
    {
        bundles.Add(new ScriptBundle("~/bundles/scripts").Include(
                    "~/scripts/libs/require.js",
                    "~/scripts/main.js"));
   }
} 
```

main.js 必须在[没有 data-main 的情况下](https://stackoverflow.com/questions/12865630/using-require-js-without-data-main)工作（我需要设置 baseUrl）

```
require.config({
    baseUrl: "scripts"
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T20:38:53.890

我不确定这是否是一个可接受的解决方案，但 Visual Studio 2012 有一个支持本机缩小和捆绑的 NuGet 包 (Microsoft.Web.Optimization)。我不确定它是否适用于 2010 年

这是 application_start 中的一行代码

```
Microsoft.Web.Optimization.BundleTable.Bundles.EnableDefaultBundles(); 
```

[http://msdn.microsoft.com/en-us/vs11trainingcourse_aspnetandvisualstudio_topic5](http://msdn.microsoft.com/en-us/vs11trainingcourse_aspnetandvisualstudio_topic5)

# python - Postgresql提高访问效率

> ID：11585778
> 
> 赞同：1
> 
> 时间：2012-07-20T19:27:47.987
> 
> 标签：python, sql, performance, postgresql

我创建了一个 postgres 表，如下所示：

```
name   ID   SNO
jack   12   1
bob    123  2
andy   34   3
jack   23   4 
```

等等。它总共有4100万个条目。SNO 是我连续 INT 值的主键。当我运行查询以选择特定的 SNO 时，它的运行速度非常快。然而！我需要对“名称”运行查询，该查询应返回特定名称的所有实例。请注意，名称不必是唯一的，并且很可能重复但具有不同的 ID。搜索名称的查询需要很长时间才能找到。我尝试使用以下方法在“名称”上创建索引：

```
CREATE INDEX name ON userlist(name) 
```

然而，虽然这提高了性能，但它仍然太慢了。有什么方法可以索引作为“文本”数据类型的“名称”来提高访问性能，就像访问“int”SNO一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:15:09.417

尝试为内存中的索引腾出足够的空间。该`shared_buffers`设置可以对此有所帮助。

# function - 函数的冲突类型

> ID：11585781
> 
> 赞同：0
> 
> 时间：2012-07-20T19:27:53.573
> 
> 标签：function

我试图编译它，但我不断收到一个冲突的类型错误。我不确定该做什么或如何修复我！[在此处输入图像描述][1]t..

[http://i.imgur.com/Bxm78.png](http://i.imgur.com/Bxm78.png)

编辑; 经过一些工作，我得到的错误减少了很多，但我仍然得到了一些 [http://i.imgur.com/McbqQ.png](http://i.imgur.com/McbqQ.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:31:04.237

您将所有变量声明为双精度数，但将 calc 设置为接受整数。

编辑：另外，您将双打放入在方法定义中声明为传递参数的局部变量，而不是简单的局部变量。有很多方法可以让你做不同的事情，但考虑到这似乎是一项家庭作业或学习经验，我想说你应该从定义中删除成绩，将剩余参数更改为双打，并在你的方法体。还有一些事情要做，但这应该会让你走上这条路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T19:30:39.570

请注意，您的 calc 原型是：

```
int calc(int grade); 
```

但是你的定义是

```
int calc(int grade, int cw, int hw, int qz, int fe) { 
```

更新您的原型以匹配您的定义，它应该可以解决该问题。

# java - 使用 Java Webstart 部署 JavaFX 2.1+ 应用程序

> ID：11585787
> 
> 赞同：2
> 
> 时间：2012-07-20T19:28:10.270
> 
> 标签：java, javafx-2, jnlp, java-web-start

我对 Java 很陌生，对 webstart 技术也很陌生。我一直在修补 jnlp xml 文件，以尝试获得所需的“运行此应用程序，如果 JavaFX 不在您的系统中，则可选择安装它”行为。这是我的 jnlp 文件：

```
<?xml version='1.0' encoding='UTF-8' ?>
<jnlp spec='1.0' xmlns:jfx="http://javafx.com" codebase='http://localhost/java/app' href='launcher.jnlp'>
  <information>
    <title>Test Launcher</title>
    <vendor>OzBarry</vendor>
    <description kind='one-line'>
      Test Launcher/JNLP/Webstart Demo
    </description>
  </information>
  <resources>
    <jfx:javafx-runtime version="2.1+" href="http://javadl.sun.com/webapps/download/GetFile/javafx-latest/windows-i586/javafx2.jnlp"/>
  </resources>
  <resources>
    <j2se version='1.6+' />
    <property name="jnlp.packEnabled" value="true" />
    <property name="jnlp.versionEnabled" value="true" />
    <jar href='launcher.jar' main='true' />
  </resources>
  <application-desc main-class='demo.DemoLauncher' />
  <update check="prompt-update"/>
</jnlp> 
```

当我启动我的应用程序时，它会提示我下载 javafx（即使它已经安装，这有点烦人），一旦完成，它会尝试启动应用程序，但会停止并出现错误，类似于“where is the javafx 运行时，因为我不知道！？”

我在带有 Java 1.7（Java SE 运行时环境 7u5）的 Windows 7 32 位上，并且它是全新安装的（我之前完全卸载了 java，清除了我的临时文件，并进行了全新安装）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T21:29:51.923

请参阅[JavaFX 2.0 和 Java WebStart](https://forums.oracle.com/forums/thread.jspa?threadID=2293531)。

# spring - 在 Spring jsp 文件中引用 CSS 文件时找不到它

> ID：11585788
> 
> 赞同：0
> 
> 时间：2012-07-20T19:28:16.910
> 
> 标签：spring, spring-mvc

我在“WEB-INF/jsp/”中有一个 index.jsp 文件，我在“/resources/css/”中引用了一个 CSS 文件。我已将路径设置为“../resources/css/styles.css”，但浏览器似乎找不到它。

当输入 CSS 文件的路径时，我什至可以自动完成，所以 Spring 似乎可以定位它。有任何想法吗？我是否必须更改 dispatcher-servelet.xml 文件中的任何内容？

干杯J

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T19:47:25.293

似乎春天在玩什么，但我从“资源”的开头删除了“../”（我发誓我过去曾尝试过很多次！）并且它奏效了！如果从根文件夹而不是 jsp 文件中引用它，我猜是浏览器，所以不需要上一层。

# forms - VB.NET 调整窗体大小并检测文本框中的大小

> ID：11585791
> 
> 赞同：2
> 
> 时间：2012-07-20T19:28:24.407
> 
> 标签：forms, textbox, resize, size, detect

得到了两个文本框，一个代表表单的宽度，另一个代表表单的高度。

当表单加载时，它会在每个文本框中显示表单宽度和高度的大小。

当您调整表单大小时，它会自动更新 texbox 中的文本并告诉您表单的当前大小。

我怎样才能做到这一点？

* * *

我使用了下面的代码，因此您可以设置所需的大小，然后将其应用于表单的大小，但仍然没有弄清楚如何在调整大小时自动检测表单的宽度和高度。

```
Private sizew As Integer
Private sizey As Integer

sizew = TextBox1.Text
sizey = TextBox2.Text
Me.Size = New System.Drawing.Size(sizew, sizey) 
```

* * *

弄清楚我做错了什么。对于那些想知道如何做到这一点的人，这里是下面的代码。

```
Private sizew As Integer
Private sizey As Integer

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    TextBox1.Text = Me.Size.Width()
    TextBox2.Text = Me.Size.Height()
End Sub

Private Sub Form1_SizeChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.SizeChanged
    TextBox1.Text = Me.Size.Width()
    TextBox2.Text = Me.Size.Height()
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T19:30:22.663

处理`SizeChanged`事件并读取`Me.Size`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T20:20:14.663

在表格上放一个计时器并设置间隔 100 然后将此代码放在上面

```
TextBox1.Text = Me.Size.Width()
TextBox2.Text = Me.Size.Height() 
```

注意：确保定时器已启用

# python - numpy 数组是通过引用传递的吗？

> ID：11585793
> 
> 赞同：69
> 
> 时间：2012-07-20T19:28:33.353
> 
> 标签：python, arrays, numpy

我遇到了这样一个事实，即`numpy`数组在多个地方通过引用传递，但是当我执行以下代码时，为什么`foo`和`bar`

```
import numpy as np

def foo(arr):
   arr = arr - 3

def bar(arr):
   arr -= 3

a = np.array([3, 4, 5])
foo(a)
print a # prints [3, 4, 5]

bar(a)
print a # prints [0, 1, 2] 
```

我正在使用 python 2.7 和 numpy 版本 1.6.1

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-07-20T19:34:57.560

在 Python 中，[所有变量名都是对 values 的引用](http://nedbatchelder.com/text/names.html)。

当 Python 计算一个赋值时，[右边的值在左边的值之前计算](https://docs.python.org/2/reference/expressions.html#evaluation-order)。`arr - 3`创建一个新数组；它不会`arr`就地修改。

`arr = arr - 3`使局部变量`arr`引用这个新数组。它不会修改`arr`传递给的最初引用的值`foo`。变量名称`arr`只是绑定到新数组`arr - 3`. 而且，`arr`是函数作用域中的局部变量名`foo`。一旦`foo`函数完成，就不再有引用`arr`，Python 可以自由地垃圾收集它引用的值。[正如 Reti43 指出的那样](https://stackoverflow.com/questions/11585793/are-numpy-arrays-passed-by-reference/11585878?noredirect=1#comment56288437_11585878)，为了`arr`影响 的值`a`，`foo`必须返回`arr`并且`a`必须分配给该值：

```
def foo(arr):
    arr = arr - 3
    return arr
    # or simply combine both lines into `return arr - 3`

a = foo(a) 
```

相比之下，`arr -= 3`Python 将其转换为对[`__iadd__`特殊方法](https://docs.python.org/3/reference/datamodel.html#object.__isub__)的调用，它确实修改了原地引用的数组`arr`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-20T19:35:38.420

第一个函数计算`(arr - 3)`，然后为其分配本地名称`arr`，这不会影响传入的数组数据。我的猜测是，在第二个函数中，`np.array`覆盖了`-=`运算符，并在数组数据上进行了操作。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-12-15T22:25:11.900

Python 通过引用传递数组：

```
$:python
...python startup message

>>> import numpy as np
>>> x = np.zeros((2,2))
>>> x
array([[0.,0.],[0.,0.]])
>>> def setx(x):
...    x[0,0] = 1
...
>>> setx(x)
>>> x
array([[1.,0.],[0.,0.]]) 
```

最佳答案是指即使在已编译的 c 代码中也会发生的现象，因为任何 BLAS 事件都将涉及“读取”步骤，在该步骤中，用户（在这种情况下为代码编写者）知道形成一个新数组，或者在用户不知道的临时变量中“在后台”形成一个新数组（您可能会将其视为`.eval()`调用）。

但是，我可以清楚地访问数组的内存，就好像它在比调用的函数（即，`setx(...)`）更全局的范围内；就编写代码而言，这正是“通过引用传递”的含义。

* * *

让我们再做一些测试来检查接受答案的有效性：

```
(continuing the session above)
>>> def minus2(x):
...    x[:,:] -= 2
...
>>> minus2(x)
>>> x
array([[-1.,-2.],[-2.,-2.]]) 
```

似乎是通过引用传递的。让我们做一个计算，它肯定会在底层计算一个中间数组，看看 x 是否像通过引用传递一样被修改：

```
>>> def pow2(x):
...    x = x * x
...
>>> pow2(x)
>>> x
array([[-1.,-2.],[-2.,-2.]]) 
```

嗯，我以为 x 是通过引用传递的，但也许不是？-- 不，在这里，我们用一个全新的声明（通过 python 中的解释隐藏）隐藏了 x，并且 python 不会将这种“阴影”传播回全局范围（这将违反 python 用例：即，成为初学者仍然可以被专家有效使用的编码语言）。

但是，我可以通过强制修改内存（当我将 x 提交给函数时不会复制）来以“按引用传递”的方式非常轻松地执行此操作：

```
>>> def refpow2(x):
...    x *= x
...
>>> refpow2(x)
>>> x
array([[1., 4.],[4., 4.]]) 
```

所以你看到python可以做一些你想做的事情。

# mailchimp - Mailchimp Api Webhook

> ID：11585799
> 
> 赞同：1
> 
> 时间：2012-07-20T19:29:08.380
> 
> 标签：mailchimp

我正在使用他们的包装类与 mailchimp APi 集成。我已经在我的 mailchimp 仪表板中配置了 webhook，并且将获得 webhook 响应的文件在顶部有这个

```
 if(isset($_POST['type'])){
 $yes=$_POST['data']['email'];

 $querynewsubscrip="INSERT into newslettersubscrips SET optemail='$yes'";
 $resultnewsubscripxx=mysql_query($querynewsubscrip) or die('Query failed: ' .  mysql_error());

 } 
```

这是我需要捕捉 Mailchimp 的响应吗？我假设的是，webhook 通过 post 向我发送数据，类型告诉我操作是什么，数据数组包含所有数据。请指导

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T10:59:06.170

Mailchimp 在这里有一个指南：http://apidocs.mailchimp.com/webhooks/downloads/#php 这里有[一些](http://apidocs.mailchimp.com/webhooks/downloads/#php) 示例代码： http: [//apidocs.mailchimp.com/webhooks/downloads/webhooks.phps](http://apidocs.mailchimp.com/webhooks/downloads/webhooks.phps)

这应该解释你需要做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-23T05:33:50.793

根据您的代码，您似乎只想在触发适当的 MailChimp webhook 时订阅用户。

您所要做的就是检查`$_POST['type']`MailChimp 发送的变量，如果它等于所需的状态，请执行以下操作，例如：

```
if( isset( $_POST['type'] ) && $_POST['type'] == 'subscribe' ) {

    $yes=$_POST['data']['email'];

    $querynewsubscrip="INSERT into newslettersubscrips SET optemail='$yes'";
    $resultnewsubscripxx=mysql_query($querynewsubscrip) or die('Query failed: ' .  
    mysql_error());

} 
```

因此，您的代码中唯一缺少的就是`$_POST['type'] == 'subscribe'`条件。因为如果您没有添加它，所有其他 webhook 类型也将连接到您的代码。

关于 webhooks 的 MailChimp 官方文档：[https](https://developer.mailchimp.com/documentation/mailchimp/guides/about-webhooks/) ://developer.mailchimp.com/documentation/mailchimp/guides/about-webhooks/和教程[https://rudrastyh.com/mailchimp-api/webhooks.html#processing-webhooks](https://rudrastyh.com/mailchimp-api/webhooks.html#processing-webhooks)

# atk4 - atk4 中的字段验证

> ID：11585805
> 
> 赞同：1
> 
> 时间：2012-07-20T19:29:27.387
> 
> 标签：atk4

我记得 Romans 的一篇文章指出了敏捷工具包表单中字段验证的不同方法 (3)。拼命寻找，但在任何地方都找不到。

任何人都可以帮助我吗？

很多

克莱门斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T03:11:19.047

以下是 3 种方法： [http ://agiletoolkit.org/doc/form/validation](http://agiletoolkit.org/doc/form/validation)

# c - 通过 cron 运行我的程序会导致权限失败

> ID：11585807
> 
> 赞同：0
> 
> 时间：2012-07-20T19:29:41.403
> 
> 标签：c, linux

我正在使用 crontab 调用 ac 程序。

如果我直接调用程序，一切都很好。如果程序由 cron 调用，我的 .log 文件将无法打开。

该程序在一个目录中

/stuff1/stuff2/stuff3/程序

程序中的所有路径名都是绝对的，只是为了确保，我对 stuff3 中的所有内容进行了 chmod 777

编辑：来自 crontab 的行是

```
0 * * * * /stuff1/stuff2/stuff3/program 
```

编辑2：

问题不在于 cron，如果我这样运行它

```
cd /
/stuff1/stuff2/stuff3/program 
```

它失败

如果我这样运行它：

```
cd /stuff1/stuff2/stuff3/program
program 
```

一切都很美好。当以这两种不同的方式运行时，Linux 会发生什么变化而影响我的程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T22:04:47.777

这可能会帮助您深入了解它，因为您至少知道一些 C： [http ://stromberg.dnsalias.org/~strombrg/debugging-with-syscall-tracers.html](http://stromberg.dnsalias.org/~strombrg/debugging-with-syscall-tracers.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:43:03.963

问题是我正在分叉的程序试图写入 ./ 这导致权限失败，因为 cron 没有从它所在的目录运行程序，而是从我没有写的其他目录运行它中的权限。

# sql - 转换数字

> ID：11585813
> 
> 赞同：0
> 
> 时间：2012-07-20T19:30:10.980
> 
> 标签：sql, sql-server-2008, tsql

首先，我将表中的值转换为整数

```
cast(convert(int, isnull(b.temp,0)) as varchar(500)) 
```

然后我想输出如下所示的值，例如

```
1 as 001
12 as 012
123 as 123

-1 as -001 
-15 as -015
-234 as -234 
```

如果整数值的长度大于 3，则不显示任何值或将其删除。如果整数有减号（-），那么它不是长度的一部分，所以 -001 被认为是长度 3

所以 001 和 -001 作为长度 3 是可以接受的

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T19:43:20.450

看起来您正在尝试在一个范围内填充数字 0。这是我这样做的一种方式：

```
select (case when val between 0 and 999
             then right('000'+cast(<col> as varchar(100)), 3)
             when val between -999 and 0
             then '-'+right('000'+cast(abs(<col>) as varchar(100)), 3)
             else ''
        end)
from t 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T20:02:14.787

下面的解决方案有效。谢谢

```
declare @num1 as varchar(50)
set @num1 = '1'
       select (case 
               when @num1 between 0 and 999  then right('000'+cast(@num1 as varchar(100)), 3) 
               when @num1 between -999 and 0  then '-'+right('000'+cast(abs(@num1) as varchar(100)), 3)  
               else ''         
               end) as t 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T20:11:26.260

确实没有有效的方法来做到这一点，但我知道在某些情况下需要这样做。我可能会用这样的东西变成一个函数来解决它。

```
DECLARE @myInt as INT
    SET @myInt = -9

DECLARE @padding AS VARCHAR(1)
    SET @padding = '0'
DECLARE @length AS INT
    SET @length = 3 - LEN(ABS(@myInt))

DECLARE @result AS VARCHAR(5)
    SET @result = REPLICATE(@padding, @length) + cast(ABS(@myInt) as VARCHAR(3))
IF @myInt < 0   
        SET @result = '-' + @result

SELECT @result 
```

这真的应该用代码而不是 sql 来完成。

# c++ - 是否有任何排列算法？

> ID：11585815
> 
> 赞同：0
> 
> 时间：2012-07-20T19:30:17.277
> 
> 标签：c++, algorithm, permutation

我需要一种算法或伪代码来生成排列。假设，我得到了两个数字，分别表示字母的数量和排列的数量。

我必须写出 26 个英文字母的所有排列。我已经写了一个代码，但是有一个问题。问题在于输入 3 和 6，我的代码生成 ABC, ACB, BAC, BCA, **CBA, CAB**。但我需要它来生成 ABC, ACB, BAC, BCA, **CAB, CBA**。

```
#include<iostream>

using namespace std;

int c, K, N;

void permute(char a[], int i);
void swap(char* x, char* y);

int main(void)
{
    int t;
    char a[]="ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    cin >> t;
    for(int i=1; i<=t; i++)
    {
        cin >> N >> K;//N denotes number of letters and K denotes number of permutations
        cout << "Case " << i <<":" << endl;
        c=0;
        permute(a,0);
    }
    return 0;
}

void permute(char* a, int i)
{ 
    if(i==N-1)
    {
        for(int j=0; j<N; j++)
            cout << a[j];
        cout << endl;
        c++;
        return;
    }
    else
    {
        for(int j=i; j<N && c<K; j++)
        {
            swap(&a[i],&a[j]);
            permute(a,i+1);
            swap(&a[i],&a[j]);
        }
    }
    return;
}

void swap(char* x, char* y)
{
    char temp;
    temp=*x;
    *x=*y;
    *y=temp;
    return;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-20T19:32:36.190

看`std::next_permutation`功能

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T13:02:37.300

```
#include <algorithm>
#include <iostream>
#include <ostream>
#include <vector>
#include <iterator>

using namespace std;

void print(vector<char> &v){
    copy(v.begin(), v.end(), ostream_iterator<char>(cout));
    cout << endl;
}

void permute(vector<char> &v, int k){
    int c=0;
    do {
        print(v);
        ++c;
    }while(c < k && next_permutation(v.begin(), v.end()));
}

int main(){
    char a[]="ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    int t;

    cout << "Input number of trials:";
    cin >> t;
    for(int i=1; i<=t; ++i){
        int n, k;
        cout << "letter length:";
        cin >> n;
        cout << "permutation length:";
        cin >> k;
        vector<char> v(&a[0], &a[n]);
        cout << "Case " << i <<":" << endl;
        permute(v, k);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T21:04:41.740

你可以试试这个。我用c编程。您可以轻松地将此代码转换为 c++。我的代码是::

```
 #include<stdio.h>
 #include<stdlib.h>
 #include<ctype.h>

 int com(const void *a,const void *b)   {
    char c,d;
    c=*((char *)a);
    d=*((char *)b);
return (c-d);
 }

int main()   {
   char a[600];
   int i,j,l,flag=0,count=0,cs,c;
   scanf("%d",&cs);
   getchar();

   for(;cs;cs--)  {
    gets(a);
    for(l=0;a[l];l++);
    qsort(a,l,sizeof(char),com);
    puts(a);
    if(a[0]==0)
        break;
    while(1) {
        for(i=l-1;a[i]>=a[i+1]&&i;i--);
        if(a[i]>=a[i+1])
            break;
        for(j=l-1;a[i]>=a[j];j--);
        c=a[i];
        a[i]=a[j];
        a[j]=c;
        for(j=i+1,i=l-1;i>j;i--,j++)
        {
            c=a[i];
            a[i]=a[j];
            a[j]=c;
        }
        puts(a);
      }
   }
   return 0;
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-21T17:00:29.933

```
#include <algorithm>
#include <iostream>
#include <ostream>
#include <vector>
#include <iterator>

using namespace std;

vector<int> n2pat(int n, int len){
    vector<int> v;

    for(int i=1;i<=len;++i){
        v.push_back(n % i);
        n /= i;
    }
    reverse(v.begin(), v.end());
    return v;
}

template<typename T>
vector<T> pat2perm(vector<T> v, vector<int> &pat){
    vector<T> perm;
    for(vector<int>::const_iterator i=pat.begin();i!=pat.end();++i){
        perm.push_back(v[*i]);
        v.erase(v.begin()+ *i);
    }
    return perm;
}

template<typename T>
void print(vector<T> &v){
    copy(v.begin(), v.end(), ostream_iterator<T>(cout));
    cout << endl;
}

template<typename T>
void permute(vector<T> &v, int k){
    int size=v.size();
    for(int c=0;c<k;++c){
        vector<int> pat = n2pat(c, size);
        vector<T> perm = pat2perm(v, pat);
        print<T>(perm);
    }
}

int main(){
    char a[]="ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    int t;

    cout << "Input number of trials:";
    cin >> t;
    for(int i=1; i<=t; ++i){
        int n, k;
        cout << "letter length:";
        cin >> n;
        cout << "permutation length:";
        cin >> k;
        vector<char> v(&a[0], &a[n]);
        cout << "Case " << i <<":" << endl;
        permute(v, k);
    }
} 
```

# solr - 语义搜索引擎

> ID：11585816
> 
> 赞同：2
> 
> 时间：2012-07-20T19:30:18.563
> 
> 标签：solr, search-engine, rdf, sparql, semantic-web

我想为我最后一年的硕士学位设计一个语义搜索引擎。我在网上和学术论文上随便阅读了相当多的书，所以我在这个领域并不是一个完全的菜鸟。

我的目标是构建一个语义搜索引擎，它将 HTML 内容解析成其等效的 RDF 三元组，将三元组存储在三元组中，引擎将通过该三元组尝试响应使用 SPARQL 触发的查询。我想做一些与其他学生不同的开箱即用的事情。所以，我决定建立一个语义搜索引擎。

现在，我有一个正在运行的使用 Solr 执行关键字搜索的搜索引擎，我想做的是语义搜索。我知道一些关于 Web 3.0 的开源工具，但不确定它们是否与 Solr 兼容。

那么，您能否为我的构建提供一些帮助。

谢谢。问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:16:46.930

虽然听起来很难，但你将无法捕捉到一切。

1.  你需要很多数据。当然，已经有很多以 owl 和 rdf 等格式排列的数据可供您使用（例如 WordNet、Yago、GeoNames 等），但尽管它们的规模很大，但它们只关注可能话语的很小部分宇宙。

2.  开发一个好的语义搜索需要大量的资源和脑力。项目，例如德国人工智能研究中心的 KompParse，只关注人类对话的一小部分（八卦或购买家具），到目前为止，已经有几名员工运行了几年，而且仍然“还可以”。

3.  理解语义已经在不同的搜索引擎中实现，例如 google 或 wolfram alpha。所以这个话题甚至可能不像你想象的那么“开箱即用”。

因此，我将使用 user723630 并强烈建议您专注于较小的主题。你仍然会取得很多成就，但你不会感到沮丧。

# javascript - 我的表单验证不起作用

> ID：11585822
> 
> 赞同：1
> 
> 时间：2012-07-20T19:30:37.730
> 
> 标签：javascript, forms, validation

我正在尝试验证电子邮件和姓名等等。我正在使用[jquery 插件](http://www.benjaminkeen.com/open-source-projects/smaller-projects/really-simple-validation-js/really-simple-validation-jquery-plugin/#demo_forms)来尝试验证我的表单。但问题是表单甚至没有转到 javascript，它似乎只是重置了。有人可以帮助我吗？

这是html：

```
<form action method="post" id="register" name="register" class="well form-horizontal">
<label>Username:</label><input type="text" name="username" id="username" />
<label>Email:</label><input type="text" name="email" id="email" />
<label>Password:</label><input type="password" name="password1" id="password1" />
<label>Repeat Password</label><input type="password" name="password2" id="password2" />
<input type="submit" class="btn" value="Submit" />
</form> 
```

这是我的javascript（来自jquery插件）：

```
function myOnComplete () {
        alert("does this even work?");
        return false;
    }

    $(document).ready(function() {
        $("#register").RSV({
          onCompleteHandler: myOnComplete,
                rules: [
                        "required,name,Please enter a username.",
                        "required,email,Please enter your email address.",
                        "valid_email,email,Please enter a valid email address.",
                        "required,password1,Please enter a password.",
                        "custom_alpha,password1,xxxDDD,The first three characters must be numbers, the last three must be letters."
                ]
        });
        return true;
    }); 
```

# emacs - Emacs 查找其他文件问题

> ID：11585826
> 
> 赞同：0
> 
> 时间：2012-07-20T19:30:53.487
> 
> 标签：emacs

我正在尝试通过像这样修改 cc-other-file-alist 来使用 ff-find-other-file

```
(setq cc-other-file-alist
'(
("\\.cxx$" my-other-file-fun)
("\\.hxx$" my-other-file-fun)
)) 
```

并`my-other-file-fun`返回匹配列表。问题是当我打开一个 cxx 文件并调用`ff-find-other-file`时，该函数`my-other-file-fun`没有被调用。但是如果我打开一个 hxx 文件并调用`ff-find-other-file`我的自定义函数，我会看到正确的结果。出了什么问题？我在 Linux 上使用 emacs-24.1

谢谢，

苏里亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T19:45:29.563

您可以尝试调用该函数，然后使用反引号：

```
(setq cc-other-file-alist
  `(
    ("\\.cxx$" ,(my-other-file-fun))
    ("\\.hxx$" ,(my-other-file-fun)))) 
```

if`my-other-file-fun`返回匹配扩展名的列表，甚至使用`let`.

# groovy - 使用 expando 元类添加 curried 闭包作为静态属性会丢失默认参数值

> ID：11585827
> 
> 赞同：6
> 
> 时间：2012-07-20T19:30:57.590
> 
> 标签：groovy, static-methods, default-value, expando

我在 Groovy 1.8.6 和 2.0.0 中都遇到过这种情况。

所以这些场景都按预期工作：

```
def ay = { one, two=[:] -> [one, two] }
def be = { one, two, three=[:] -> [one,two,three] }
def ayprime = ay.curry('PRIME')
def beprime = be.curry('PRIME')
def beprimer = be.curry('PRIME', 'PRIMER')

assert ay(1,2) == [1,2]
assert ay(1) == [1,[:]]
assert be(1,2,3) == [1,2,3]
assert be(1,2) == [1,2,[:]]

assert ayprime(1) == ['PRIME', 1]
assert ayprime() == ['PRIME', [:]]
assert beprime(1,2) == ['PRIME', 1, 2]
assert beprime(1) == ['PRIME', 1, [:]]
assert beprimer(1) == ['PRIME', 'PRIMER', 1]
assert beprimer() == ['PRIME', 'PRIMER', [:]] 
```

就像这样：

```
class Klass {
    static def smethod = { one, two=[:] -> [one, two] }
}
assert Klass.smethod(1,2) == [1, 2]
assert Klass.smethod(1) == [1, [:]] 
```

*正如预期的那样，这*也有效：

```
Klass.metaClass.static.aymethod << ay
assert Klass.aymethod(1) == [1, [:]] 
```

uncurried 闭包的默认参数在分配给`Klass`.

但是，**这**失败了：

```
Klass.metaClass.static.ayprimemethod << ayprime
assert Klass.ayprimemethod() == ['PRIME', [:]] 
```

因此：

```
assert Klass.ayprimemethod() == ['PRIME', [:]]
             |               |
             [PRIME, null]   false 
```

同样，这失败了：

```
Klass.metaClass.static.beprimermethod << beprimer
assert Klass.beprimermethod() == ['PRIME', 'PRIMER', [:]] 
```

因此：

```
assert Klass.beprimermethod() == ['PRIME', 'PRIMER', [:]]
         |                |
         |                false
         [PRIME, PRIMER, null] 
```

使用柯里化闭包，默认参数值直接起作用，但是当闭包被分配为`Klass`.

这*似乎*是一个错误。我在任何地方都找不到这种行为。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T18:51:12.170

如果问题仍然困扰您，我认为这可能是一种解决方法，直到它在 groovy 主干中得到修复。咖喱东西的python方式：

```
def ayprime = { x -> x ? ay('PRIME', x) : ay('PRIME') }
def beprime = be.curry('PRIME')
def beprimer = { x -> x ? be('PRIME', 'PRIMER', x) : be('PRIME', 'PRIMER') } 
```

# java - Neo4j Java Rest 绑定：NoClassDefFoundError

> ID：11585831
> 
> 赞同：2
> 
> 时间：2012-07-20T19:31:18.777
> 
> 标签：java, rest, graph, neo4j

我有一个全新的 neo4j-rest-graphdb-1.8-SNAPSHOT.jar 版本。但是我一出门就遇到了麻烦。

我运行了 Neo4j 的基本/默认安装，并配置了有效的图形存储：

**Neo4j 版本**

图数据库内核 1.8.M05

**操作系统**

Ubuntu 12.04 LTS

**爪哇版**

"1.6.0_24" OpenJDK Runtime Environment (IcedTea6 1.11.1) (6b24-1.11.1-4ubuntu3) OpenJDK 64-Bit Server VM (build 20.0-b12, mixed mode)

**curl 请求表明一切正常：**

```
$ curl http://localhost:7474/db/data/ -i
HTTP/1.1 200 OK
Content-Length: 809
Content-Encoding: UTF-8
Content-Type: application/json
Access-Control-Allow-Origin: *
Server: Jetty(6.1.25)

{
  "extensions" : {
    "CypherPlugin" : {
      "execute_query" :     "http://localhost:7474/db/data/ext/CypherPlugin/graphdb/execute_query"
    },
    "GremlinPlugin" : {
      "execute_script" :     "http://localhost:7474/db/data/ext/GremlinPlugin/graphdb/execute_script"
    }
  },
  "node" : "http://localhost:7474/db/data/node",
  "reference_node" : "http://localhost:7474/db/data/node/0",
  "node_index" : "http://localhost:7474/db/data/index/node",
  "relationship_index" : "http://localhost:7474/db/data/index/relationship",
  "extensions_info" : "http://localhost:7474/db/data/ext",
  "relationship_types" : "http://localhost:7474/db/data/relationship/types",
  "batch" : "http://localhost:7474/db/data/batch",
  "cypher" : "http://localhost:7474/db/data/cypher",
  "neo4j_version" : "1.8.M05-1-ge9cdca9" 
```

**但是，尝试以下行：**

GraphDatabaseService graph = new RestGraphDatabase("http://localhost:7474/db/data/");

**...产生一个异常：**

```
Exception in thread "main" java.lang.NoClassDefFoundError:     javax/ws/rs/core/Response$StatusType
    at org.neo4j.rest.graphdb.RestAPIFacade.<init>(RestAPIFacade.java:265)
    at org.neo4j.rest.graphdb.RestGraphDatabase.<init>(RestGraphDatabase.java:44)
    at com.tester.api.Neo4j.importer(Neo4j.java:185)
    at com.tester.api.Neo4j.main(Neo4j.java:97)
Caused by: java.lang.ClassNotFoundException: javax.ws.rs.core.Response$StatusType
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
... 4 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-24T14:59:52.093

好吧，我想这一切都为我所用：

从一开始：

1.  从 Maven 2 升级到 Maven 3
2.  删除 ~/.m2/repository 以删除任何以前下载的依赖项
3.  然后，在 java-rest-binding git repo 中，我跑来`mvn dependency:copy-dependencies`获取所有依赖项的副本，然后将它们（目标/依赖文件夹的内容）添加到我的构建路径中（感谢彼得）
4.  在 Eclipse 中使用源中的这个 rest 包（将 /main/java/org/neo4j 复制到我的项目的“org”文件夹）给我带来了 neo4j 缺少“批处理请求”类型包的问题
5.  所以，然后我跑`mvn package`了另一个新的/克隆的/签出的 java-rest-binding git repo 并将生成的 .jar ( `neo4j-rest-graphdb-1.8-SNAPSHOT.jar`) 复制到我的项目的 lib 中（以及所有依赖项

我已经做了一些初步测试，这似乎正在工作！

如果上面的过程显示了我对 Maven 的幼稚，并且您知道将来避免此类问题的简明指南，请分享！

谢谢！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T17:12:22.117

这看起来像是缺少依赖项。您是否确保通过 maven 包含所有依赖项，如[https://github.com/neo4j/java-rest-binding/blob/master/pom.xml](https://github.com/neo4j/java-rest-binding/blob/master/pom.xml)中所述？您可以从源代码构建项目并通过以下方式为它拉下 deps

```
mvn dependency:copy-dependencies 
```

/彼得

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-13T07:44:36.020

我有同样的问题，发现我没有球衣。试图获取所有依赖项，但没有得到这个 jar。所以解决方案可以是..只需下载 jersey-bundle-1.13-b01.jar。

PS：这可能不是解决它的最佳方法，因为可能存在许多依赖项，但在这种特殊情况下，它只是缺少球衣，所以它以这种方式工作:-)

# php - 如何检索挑战的recapthca答案而不是仅获得成功状态

> ID：11585832
> 
> 赞同：2
> 
> 时间：2012-07-20T19:31:22.660
> 
> 标签：php, captcha, recaptcha

我试图从 recaptcha 中获得答案，而不是仅仅获得成功/失败的消息，但未能获得方法。为了掌握场景，让我们假设一个。

通过在我的 php 页面中触发这一行，我得到了一个 recaptcha：

```
echo recaptcha_get_html($publickey, $error); 
```

然后我遇到了挑战。

![recpatha挑战](../Images/2a6f7e6c5e4d7dffc9871435f6994f4a.png)

现在，当用户提交它时，此代码将被执行。

```
$resp = recaptcha_check_answer ($privatekey,
                                    $_SERVER["REMOTE_ADDR"],
                                    $_POST["recaptcha_challenge_field"],
                                    $_POST["recaptcha_response_field"]); 
```

这个函数定义是：

```
function recaptcha_check_answer ($privkey, $remoteip, $challenge, $response, $extra_params = array()) 
```

**现在，什么是 $extra_params ？我在哪里可以了解这一点。[php 的 recapthca api 中](https://developers.google.com/recaptcha/docs/php)没有任何说明。是否有任何选项可以通过在“$extra_params”中传递一些东西来获取recaptcha 的文本？**

提交后，它会向我发送以下回复：

```
Array ( [0] => HTTP/1.1 200 OK Cache-Control: no-cache, no-store, max-age=0, must-revalidate Pragma: no-cache Expires: Fri, 01 Jan 1990 00:00:00 GMT Date: Fri, 20 Jul 2012 18:49:51 GMT Content-Type: text/plain X-Recaptcha-Request-Duration: 8 X-Content-Type-Options: nosniff X-XSS-Protection: 1; mode=block Server: GSE Connection: close [1] => true success ) You got it! 
```

**现在，我想在响应*中得到 recaptcha*的答案。在这个特定的挑战中，这将是*“reign eveloost”***

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T22:35:02.533

reCAPTCHA 没有返回呈现给用户的实际质询的方法。原因是出于安全考虑。我个人认为 reCAPTCHA 是一个很棒的概念，但它是世界上最烦人的事情之一，因为有一半时间你无法阅读挑战。我发现自己点击“新挑战”按钮超过 10 次。

无论哪种方式，如果你想做你提到的事情，你最好使用自托管的验证码解决方案。

该`$extra_params`变量还包括调用的附加参数。谷歌没有提到它允许额外的参数，所以在我的最佳理解中，它被添加以防谷歌在未来为 API 实现新的参数，而这些新参数现在不包含在库中。对于使用旧版本库的人来说，这将变得更加简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T04:09:33.727

经过大量的谷歌搜索和研究工作，我发现recaptcha 的工作方式，不可能得到答案。我只能设法知道一个成功的状态。仅此而已。

# javascript - For Loop 使用 InnerHTML 和事件处理程序创建 DOM 元素不起作用

> ID：11585833
> 
> 赞同：-1
> 
> 时间：2012-07-20T19:31:23.457
> 
> 标签：javascript, html, dom, dojo

我遇到了一个非常奇怪的问题，我有一个解决方法，但实际上并不知道它为什么会发生。

本质上，我采用现有的 DOM 元素，使用 innerHTML 创建附加 DOM 元素，然后为它的 onclick 事件放入一个事件处理程序。

```
for(i=0; i<contextMenuModel.length; i++) {
    contextMenuRow = contextMenuModel[i];
    currentRowId = "edit_context_table_row_" + i;

    editTable.innerHTML += "<div id='" + currentRowId + "'></div>";
    row = dojo.byId(currentRowId);

    row.innerHTML += "<span>" + contextMenuRow.labelName + "</span>";
    row.innerHTML += "<span>" + contextMenuRow.eventName + "</span>";

    dojo.connect(row, "onclick", row, rowClickHandler);
} 
```

问题是这样的：只有最后一行以 onclick 处理程序结束。其他人没有。我使用的浏览器无关紧要，是否将 dojo.connect 更改为无关紧要

```
row.onclick = rowClickHandler; 
```

另外，如果我取出：

```
row.innerHTML += "<span>" + contextMenuRow.eventName + "</span>"; 
```

它仍然不起作用。

但是，我发现的解决方法（这使得这一切变得更好）是这样的：

```
for(i=0; i<contextMenuModel.length; i++) {
    contextMenuRow = contextMenuModel[i];
    currentRowId = "edit_context_table_row_" + i;

    editTable.innerHTML += "<div id='" + currentRowId + "'></div>";
    row = dojo.byId(currentRowId);

    row.innerHTML += "<span>" + contextMenuRow.labelName + "</span>";
    row.innerHTML += "<span>" + contextMenuRow.eventName + "</span>";
}

for(i=0; i<contextMenuModel.length; i++) {
    row = dojo.byId("edit_context_table_row_" + i);
    dojo.connect(row, "onclick", row, rowClickHandler);
} 
```

这么奇怪的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:07:25.597

我发现在动态创建元素并将事件附加到它们时，我通常会更好地使用`document.createElement`. 这可以确保您的元素被添加到 dom 中，并且您有一个可以使用的对象而不是连接字符串。

```
 var divRow = document.createElement("DIV");
   divRow.id = currentRowId;
   divRow.onclick = function(){};
   editTable.appendChild(divRow); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T19:31:23.457

所以这就是问题所在。当我这样做时：

```
editTable.innerHTML += "<div id='" + currentRowId + "'></div>"; 
```

我正在连接然后**替换**旧的 innerHTML。这意味着生成了一个新的 DOM 节点；这个新的 DOM 节点没有连接到旧的事件处理程序。这留下了旧的事件处理程序，什么都不做。且不说这段代码创建和丢弃**了这么**多 DOM 节点，这段代码真的很糟糕。

# c++ - 实时使用opencv的光流

> ID：11585837
> 
> 赞同：3
> 
> 时间：2012-07-20T19:31:32.990
> 
> 标签：c++, c, opencv

我正在使用 OpenCV 的 Pyramid Lukas Kanade 函数来估计光流。我调用 cvCalcOpticalFlowPyrLK(const CvArr* prev, const CvArr* curr, CvArr* prev_pyr, CvArr* curr_pyr, const CvPoint2D32f* prev_features, CvPoint2D32f* curr_features, int count, CvSize win_size, int level, char* status, float* track_error, CvTermCriteria标准，int 标志）：

我在获取功能坐标时遇到问题。我的 CvPoint2D32f* prev_features 数据中有一组 8 个坐标，我必须在捕获的图像上显示未来的特征点。我的工作是实时的，所以我必须继续检测并显示这些点。希望你能给我一些建议，我必须在本节中考虑这些建议。多谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T20:43:36.977

很难说你的代码有什么问题，因为我没有看到它。无论如何，你看过默认样本吗？我的意思是[lkdemo.cpp](https://code.ros.org/trac/opencv/browser/trunk/opencv/samples/cpp/lkdemo.cpp?rev=4240)。它显然应该帮助你。

# jquery - 受字体类型影响的文本区域宽度。如何解决这个问题？

> ID：11585841
> 
> 赞同：2
> 
> 时间：2012-07-20T19:31:56.020
> 
> 标签：jquery, css, html

我有一个基本上是文本区域的评论框。我将 cols 属性设置为 113 cols，它在 Firefox 中看起来不错，但在 chrome 或 IE9 中却不行。

然后我将字体更改为固定宽度的字体，所有 3 个浏览器都正确显示它。关于它的事情是，它只是丑陋的。

您对为什么它只能正确计算 Firefox 中列的宽度而不是其他列的宽度有任何想法吗？

谢谢你。

这是CSS：

```
#wrap_mid #nav_body .entry_container .comment_new_container .ta_new_comment
{
    border: 1px solid #d5d5d5;
    border-radius: 3px;
    color: #999;
    font-family: Arial, Helvetica, sans-serif;
    font-size: small;
    padding: 3px 4px;
    width: 795px;
    resize: none;

} 
```

这是HTML：

```
<div class="comment_new_container">
<img src="img/avatar45.png" />
<textarea class="ta_new_comment" cols="113" rows="0">Write a comment...</textarea>
<!-- Float fix --> 
<div class="clear">&nbsp;</div>
</div> <!-- END comment_new_container --> 
```

这是JQuery：

```
<script type="text/javascript">

$(function(){

  $(".ta_new_comment").autoGrow();

});

</script> 
```

这是 JQuery 插件：

```
/*!
 * ----------------------------------------------------------------------------
 * "THE BEER-WARE LICENSE" (Revision 42):
 * <jevin9@gmail.com> wrote this file. As long as you retain this notice you
 * can do whatever you want with this stuff. If we meet some day, and you think
 * this stuff is worth it, you can buy me a beer in return. Jevin O. Sewaruth
 * ----------------------------------------------------------------------------
 *
 * Autogrow Textarea Plugin Version v2.0
 * http://www.technoreply.com/autogrow-textarea-plugin-version-2-0
 *
 * Date: March 13, 2011
 */
jQuery.fn.autoGrow = function(){

    return this.each(function(){
        // Variables
        var colsDefault = this.cols;
        var rowsDefault = this.rows;

        //Functions

        var grow = function() {
            growByRef(this);
        }

        var onFocus = function(obj) {

      if ($(this).val() != 'Write a comment...') {
        return;
      } else {
        $(this).parents(".comment_new_container").children("img").show();
        //$(this).height(34);
        $(this).width(745);
        $(this).val(''); 
      }

        }

        var onBlur = function(obj) {

      if ($(this).val().length == 0) { 
        $(this).parents(".comment_new_container").children("img").hide();
        //$(this).height(16);
        $(this).width(795);
        $(this).val('Write a comment...');
      } 

        }

        var growByRef = function(obj) {

        var new_comment = '';

      if (!obj.shiftKey && obj.keyCode == 13) {

        obj.preventDefault();

        new_comment += '<div class="comment_container" id="001">';
        new_comment += '<a href="#"><i class="comment_delete">&nbsp;</i></a>';
        new_comment += '<img src="img/avatar45.png" />';
        new_comment += '<a href="/">Mickey Mouse</a>';
        new_comment += '<br/>';
        new_comment += '<div class="comment_content">' + $(this).val().replace(/\n/g, '<br />'); + '</div> <!-- End comment_content -->';
        new_comment += '<div class="comment_timestamp">13 minutes ago</div> <!-- End comment_timestamp -->';
        new_comment += '</div> <!-- End comment_container -->';

        $(new_comment).insertBefore($(this).parents(".comment_new_container"));

            var comment_total = parseInt($('.social_menu_right li a').children('.meta.comment_total').text(), 10) + 1;
          $('.social_menu_right li a').children('.meta.comment_total').text(comment_total);

        $(this).val('Write a comment...');
        $(this).blur();
        growByRef(this);

      } else {

        var linesCount = 0;
        var lines = obj.value.split('\n');

        for (var i=lines.length-1; i>=0; --i)
        {
          linesCount += Math.floor((lines[i].length / colsDefault) + 1);
        }

        if (linesCount >= rowsDefault) {
          obj.rows = linesCount + 1;
        } else {
          obj.rows = rowsDefault;           
        }

            }

    }

        var characterWidth = function (obj){
            var characterWidth = 0;
            var temp1 = 0;
            var temp2 = 0;
            var tempCols = obj.cols;

            obj.cols = 1;
            temp1 = obj.offsetWidth;
            obj.cols = 2;
            temp2 = obj.offsetWidth;
            characterWidth = temp2 - temp1;
            obj.cols = tempCols;

            return characterWidth;
        }

        // Manipulations

        $(this).css("width","795");
        $(this).css("height","auto");
        $(this).css("overflow","hidden");

        this.style.width = ((characterWidth(this) * this.cols) + 6) + "px";

        $(this).bind("focus", onFocus);
        $(this).bind("blur", onBlur);
        $(this).bind("keypress", growByRef);
        $(this).bind("keyup", grow);

    });
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T19:33:41.867

使用 CSS 并定义文本区域的宽度/高度

取出 cols 和 rows 标签并使用 CSS

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T19:38:22.880

顾名思义，等宽字体对于每个字母、数字等具有相同的宽度（按字符）。这意味着 113 列总是相同的长度，而大多数字体的“M”比“I”宽使文本的整体宽度变化。

尝试使用 CSS`width`属性指定宽度。此外，不要忘记您在 Internet 上找到的几乎所有输入字段（例如此处）都是等宽字体。

# c - 如何计算 .txt 文件中有多少字？在 C 中

> ID：11585849
> 
> 赞同：2
> 
> 时间：2012-07-20T19:32:13.697
> 
> 标签：c, lexicographic

这是我第一次发布问题。所以我正在做一个家庭作业计划，有点卡在一些事情上，我希望有人能插话并帮助我。这是我需要在程序中做的事情：

*   你的程序必须读入一个包含带有标点符号的句子的文件。
*   它将句子解析为单词和标点符号。
*   单词将被输入字典，标点符号将被输入列表。将单词添加到字典时忽略大小写。请记住，字典是按字典顺序保存的。
*   字典和列表中的每个条目都会计算单词或标点符号在原始文本中出现的次数。
*   阅读文本后（第一个字符为 $ 的行终止文本），打印出字典并列出计数。
*   您的程序接下来将读取如下格式的行：word1 < word2
*   这意味着将文本中的 word1 替换为 word2

我已经能够输入文件（hw5-input）并按字典顺序打印并摆脱了大写字母，我什至有一个字数但无法让它在带有字数的单独行上打印..我仍然还需要交换单词并再次打印出文件，但是使用字数打印是我真正需要帮助的。这是我到目前为止所拥有的：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <ctype.h>

#define PUNCT " \n,\t!:;.-"
#define MAX_STR_LEN 2048

struct listNode 
{
    char *word;
    struct listNode *next;
    int wordCount;
};

struct listNode *newListNode(const char * const);
void insertWord(struct listNode *,const char * const);
void deleteList(struct listNode *);
void printList(struct listNode *);

// Create new struct listNode

struct listNode *newListNode(const char * const s) 
{
    struct listNode *n =
        (struct listNode*)calloc(1,sizeof(struct listNode));
    n->word = (char *)calloc(strlen(s)+1,sizeof(*s));
    strcpy(n->word,s);
    n->next = NULL;
    n->wordCount = 1;
    return n;
}

// Insert words into dictionary in ascending order

void insertWord(struct listNode *head,const char * const s) 
{
    char *i;
    int x = 0;
    for(i = s; *i != '\0'; i++) {
        *i = (char)tolower(*i);
        x++;
    }

    i = i-x;

// Gets rid of duplicate words and counts words

    struct listNode *p = head,
        *q = newListNode(i);

    while ((p->next != NULL) && (strcmp(i,p->next->word) > 0)) 
    {
        p = p->next;
    }
    if(p->next != NULL && strcmp(i,p->next->word) == 0)
    {
        p->next->wordCount++;
    } else {
        q->next = p->next;
        p->next = q;
    }
}

// Free all memory allocated for the list

void deleteList(struct listNode *head) 
{
    struct listNode *p = head, *q;
    while (p != NULL) 
    {
        q = p->next;
        free(p->word);
        free(p);
        p = q;
    }
}

// Print the dictionary

void printList(struct listNode *head) 
{
    struct listNode *p = head->next;

    while (p != NULL) 
    {
        printf("%s ",p->word);
        p = p->next;
    }
    puts("");
}

// Enter file and print words in lexicographic order

int main(int argc, char *argv[]) 
{
    char line[MAX_STR_LEN], *s, fileName[MAX_STR_LEN];
    struct listNode *head = newListNode("");

    int i = 0;
    char c;

    FILE *p;

    printf("Enter file name: ");
    scanf("%s", fileName);
        if((p = fopen(fileName, "r")) == NULL)
        {
            printf("File not found.");
            return 0;
        }

    while((c = getc(p)) != '$')
    { 
        line[i] = c;
        i++;
    }

    line[i] = '\0';
    for(s = strtok(line,PUNCT); s != NULL; s = strtok(NULL,PUNCT)) 
    {
        insertWord(head,s);
    }
    printf("Lexicographical order: ");
    printList(head);
    deleteList(head);

    return 0;
} 
```

输入文件（hw5-input）是：

```
Call me Ishmael.  Some years ago--never mind how long precisely--
having little or no money in my purse, and nothing particular
to interest me on shore, I thought I would sail about a little
and see the watery part of the world.  It is a way I have
of driving off the spleen and regulating the circulation.
Whenever I find myself growing grim about the mouth;
whenever it is a damp, drizzly November in my soul; whenever I
find myself involuntarily pausing before coffin warehouses,
and bringing up the rear of every funeral I meet;
and especially whenever my hypos get such an upper hand of me,
that it requires a strong moral principle to prevent me from
deliberately stepping into the street, and methodically knocking
people's hats off--then, I account it high time to get to sea
as soon as I can.  This is my substitute for pistol and ball.
With a philosophical flourish Cato throws himself upon his sword;
I quietly take to the ship.  There is nothing surprising in this.
If they but knew it, almost all men in their degree, some time
or other, cherish very nearly the same feelings towards
the ocean with me.
$
substitute < replacement
whale < zebra
myself < oneself 
```

我需要它在下一行按字母顺序打印，如下所示：

```
a - 4
about - 1
account - 1
ago- 2
and - 5
etc.. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:05:16.023

[http://www.cplusplus.com/reference/clibrary/cstring/strtok/](http://www.cplusplus.com/reference/clibrary/cstring/strtok/)

经过进一步审查，您似乎已经在做 strtok。您真正的问题是，“字符串的最佳 C 列表实现是什么？”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-21T00:24:11.897

微软/亚马逊类型的问题：我会为你做一个伪代码，`C`实现：

```
 define a struct like:

    struct node{
       int count;
       char * word;
       struct node *next;
   }Node;

   open the file for read;
   for each line in the file do:
         split the line, in other to have each work separately
         for each work in the line do:
            check if the work already exist in the list
            if not, create a new node
                   node->word = word
                   node->count = 1
            else:
                   node->count += 1

   sort the list by the node->word param 
```

执行剩下的是练习！但是，如果你能用`map`你的生活会更简单！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T22:09:45.753

我能够使用我的 wordcount 函数，所以我只是在我的 printList 函数下编辑了 print 语句：

```
printf("%15s (%2d)\n",p->word, p->wordCount); 
```

然后，它能够按字典顺序打印出所有单词以及它们的字数。

```
Enter file name: hw5-input
Lexicographical order:
              a ( 5)
          about ( 2)
        account ( 1)
            ago ( 1)
            all ( 1)
         almost ( 1)
             an ( 1)
            and ( 7)
             as ( 2)
           ball ( 1)
         before ( 1)
       bringing ( 1)
            but ( 1)
           call ( 1)
            can ( 1)
           cato ( 1)
        cherish ( 1)
    circulation ( 1)
         coffin ( 1)
           damp ( 1)
         degree ( 1)
   deliberately ( 1)
        driving ( 1)
        drizzly ( 1)
     especially ( 1)
          every ( 1)
       feelings ( 1)
           find ( 2)
       flourish ( 1)
            for ( 1)
           from ( 1)
        funeral ( 1)
            get ( 2)
           grim ( 1)
        growing ( 1)
           hand ( 1)
           hats ( 1)
           have ( 1)
         having ( 1)
           high ( 1)
        himself ( 1)
            his ( 1)
            how ( 1)
          hypos ( 1)
              i ( 9)
             if ( 1)
             in ( 4)
       interest ( 1)
           into ( 1)
  involuntarily ( 1)
             is ( 4)
        ishmael ( 1)
             it ( 5)
           knew ( 1)
       knocking ( 1)
         little ( 2)
           long ( 1)
             me ( 5)
           meet ( 1)
            men ( 1)
   methodically ( 1)
           mind ( 1)
          money ( 1)
          moral ( 1)
          mouth ( 1)
             my ( 4)
         myself ( 2)
         nearly ( 1)
          never ( 1)
             no ( 1)
        nothing ( 2)
       november ( 1)
          ocean ( 1)
             of ( 4)
            off ( 2)
             on ( 1)
             or ( 2)
          other ( 1)
           part ( 1)
     particular ( 1)
        pausing ( 1)
       people's ( 1)
  philosophical ( 1)
         pistol ( 1)
      precisely ( 1)
        prevent ( 1)
      principle ( 1)
          purse ( 1)
        quietly ( 1)
           rear ( 1)
     regulating ( 1)
       requires ( 1)
           sail ( 1)
           same ( 1)
            sea ( 1)
            see ( 1)
           ship ( 1)
          shore ( 1)
           some ( 2)
           soon ( 1)
           soul ( 1)
         spleen ( 1)
       stepping ( 1)
         street ( 1)
         strong ( 1)
     substitute ( 1)
           such ( 1)
     surprising ( 1)
          sword ( 1)
           take ( 1)
           that ( 1)
            the (10)
          their ( 1)
           then ( 1)
          there ( 1)
           they ( 1)
           this ( 2)
        thought ( 1)
         throws ( 1)
           time ( 2)
             to ( 5)
        towards ( 1)
             up ( 1)
           upon ( 1)
          upper ( 1)
           very ( 1)
     warehouses ( 1)
         watery ( 1)
            way ( 1)
       whenever ( 4)
           with ( 2)
          world ( 1)
          would ( 1)
          years ( 1) 
```

仍然需要用交换的单词重新打印输入文件。有人有解决方案吗？

# forms - IE 不会在 jQuery 对话框的输入中获取表单处理数据

> ID：11585851
> 
> 赞同：1
> 
> 时间：2012-07-20T19:32:21.257
> 
> 标签：forms, html, jquery-ui, internet-explorer

我有一个 HTML5 页面，在 jQuery 对话框中包含多个数据输入。我使用输入属性 form=dataInput 将这些数据扫描到表单处理中。它在 Firefox 和 Chrome 中运行良好，但在 IE 中无法正常运行，因为 IE 不支持输入表单属性。Dialog 小部件的某些内容使输入框元素对表单处理“不可见”。form 属性为支持 HTML5 的浏览器修复了这个问题，但没有发布的 IE 有这个支持。我试过 $('.ui-dialog').appendTo('form'); 在 Dialog open: 选项中，但它不能解决问题。有没有办法让 IE 将输入数据从 Dialog 小部件中扫出并进入 $_POST ？

这是对话框内的输入框示例

```
<label><input type="radio" id="unitedStates"  name="country" form="dataInput" value="US">United States</label> 
```

我使用 jQuery Form 插件来执行提交。它有一些选项，例如 beforeSubmit 和 beforeSerialize，但我不太了解文档或提交过程，不知道它们是否可以用来解决这个问题。请具体说明代码或教程。我对此很陌生，以至于我不能很好地遵循一般说明。;-)（顺便说一句，IE 有我需要的其他功能支持，只是没有这个。）

这是我的代码以及 Andrew Hagner 的建议和我的修改。对话框有效，但 IE 没有为国家设置值。需要改变什么？

```
var countrySelected = $("input[type=radio][name=country]").val(); //set earlier by W3C geocoding
var countryChooser = $('#countryChoices').dialog( {       
    autoOpen: false,
    bgiframe: true,
    height: 300,
    width: 850,
    resizable: false,
    draggable: true,
    title: "Click to select another country",
    open: function () {
            $('#regions').tabs(
                {
                event: "mouseover",
                })
        },
    buttons: {
        'Close / continue location input': function ()
                {
                countrySelected = $('input[name=country]:checked').val();
                $(this).dialog('close');
                }
            } 
});
//then later on
getCityFromGeonames3Step(countrySelected); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:15:45.453

**更新：**

```
// Before you enter dialog, assign the element you will
// be grabbing the info from to a variable.
var countrySelectionElement = $("input[type=radio][name=country]").val(); 
var countrySelected = "";

var countryChooser = $('#countryChoices').dialog( {       
autoOpen: false,
bgiframe: true,
height: 300,
width: 850,
resizable: false,
draggable: true,
title: "Click to select another country",
open: function () {
        $('#regions').tabs(
            {
            event: "mouseover",
            })
    },
buttons: {
    'Close / continue location input': function ()
            {
            // Since jQuery won't work in here, use the variable
            // we assigned above to access value.
            countrySelected = countrySelectionElement.val();
            $(this).dialog('close');
            }
        } 
});

//then later on
getCityFromGeonames3Step(countrySelected); 
```

**原来的：**

在打开对话框之前，将输入分配给一个变量：

```
function OpenDialog()
{
    var input = $("yourinput");

    // Open dialog, use input to work with that element.

    // If you want you can then place the entered data in a hidden field
    // using jQuery, in the same way we are using input here. Then you will
    // be able to post that data back however you like.

} 
```

前几天我遇到了这个问题，我在 jQuery 的 Dialog 网站上找到了这个解决方案。 [http://jqueryui.com/demos/dialog/#modal-form](http://jqueryui.com/demos/dialog/#modal-form)

# java - 如何将 HTML 字符串读入 JEditorPane/JTextPane？

> ID：11585854
> 
> 赞同：5
> 
> 时间：2012-07-20T19:32:47.710
> 
> 标签：java, html, swing, jtextpane, jeditorpane

非常不言自明，我有一个 HTML 字符串，我如何将它绘制到 JEditorPane/JTextPane 上？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-20T19:42:30.790

你的意思是这样的吗？

```
JFrame frame=new JFrame();
JEditorPane pane=new JEditorPane();
pane.setContentType("text/html");
String data="<table border=\"1\"><tr><td>cell1</td><td>cell2</td></tr></table>";
pane.setText(data);

frame.add(pane);
frame.setSize(200,200);
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

frame.setVisible(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T19:39:56.243

如果您尝试将单个字符串放入窗格中，则需要找到一个 html 解释器。但是，如果您正在处理一个包含 html 的单独页面，则可以使用`JTextPane`'s[`setPage(String URL)`](http://www.java2s.com/Code/JavaAPI/javax.swing/JEditorPanesetPageURLurl.htm)函数。

# php - 1 单击后 PHP 变量保持不变，这可能是一个简单的解决方案

> ID：11585855
> 
> 赞同：0
> 
> 时间：2012-07-20T19:32:50.400
> 
> 标签：php, variables

我可以使用 PHP 并想了解更多关于它的信息！我现在正在模拟 2 个角色之间的某种战斗。问题是，我只能打 1 轮，所以当我点击“战斗”按钮时，它只能打 1 轮。当我再次单击“战斗”时，我似乎无法找出为什么生命值没有改变。这是代码：

```
<body>
<?php 
$Hitpoints1 = 30;
$Hitpoints2 = 30;

?>
<form name="frmFight" form action="" method="post">
<table width="700" border="0" align="left" cellpadding="0" cellspacing="0">
  <tr>
    <td align="center">Character 1</td>
    <td align="center">Character 2</td>
  </tr>
  <tr>
    <td align="center"><?php 
    if (isset($_POST['btnFight'])) {
    $Damage1 += mt_rand(2,9); }
    $Total1 = $Hitpoints1 - $Damage1;
    echo $Total1; ?></td>
    <td align="center"><?php 
    if (isset($_POST['btnFight'])) {
    $Damage2 += mt_rand(2,9); }
    $Total2 = $Hitpoints2 - $Damage2;
    echo $Total2; ?></td>
  </tr>
  <tr>
    <td align="center">&nbsp;</td>
    <td align="center">&nbsp;</td>
  </tr>
</table>
<p><input name="btnFight" type="submit" value="Submit" /></p>

</form>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T19:38:02.787

尝试将您的变量放在用户会话中：

```
<?php
session_start(); 
if(!isset($_SESSION['hitpoints_1'])) {
    $_SESSION['hitpoints_1'] = 30;
}
if(!isset($_SESSION['hitpoints_2'])) {
    $_SESSION['hitpoints_2'] = 30;
}
$Hitpoints1 = $_SESSION['hitpoints_1'];
$Hitpoints2 = $_SESSION['hitpoints_2'];

?> 
```

但是您应该考虑更持久的存储，例如 SQL 或文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T19:39:19.423

您似乎错过了 PHP 工作原理的一些要点。您的脚本每次被请求时都会从头开始执行，并且每次按下按钮时都会被请求。这表示; 每次按下按钮时，他们的生命值都会设置为 30，然后减去伤害。

要在每个请求之间保存变量，您必须将其保存在服务器上（查看会话）或以 HTML 可以作为请求的一部分发回的方式保存（将其存储在 HTML 中的隐藏字段中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T19:38:38.143

提交表单后，您并没有“保存”生命值的值。当页面重新加载时，您需要查看 POST 数据并编辑 和 的`$Hitpoints1`值`$Hitpoints2`

因此，当您提交表单时，您还需要为新的命中点值发送更多 POST 数据。所以有

```
<input type="hidden" name="hitpoint1" value="$Total1" />
<input type="hidden" name="hitpoint2" value="$Total2" /> 
```

然后在页面加载时查找这些变量：

```
if (isset($_POST['hitpoint1']) {
    $Hitpoints1 = $_POST['hitpoint1']
}
if (isset($_POST['hitpoint2']) {
    $Hitpoints1 = $_POST['hitpoint2']
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-20T19:39:06.577

提交页面会重置数据，因此 $hitpoints 再次为 30，它会减去您按下产生的随机数。

使用会话。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-20T19:40:34.067

每次您提交表单（例如通过单击按钮）时，都会创建一个新的 PHP 请求。来自一个请求的数据不会自动继续到下一个请求。

有两种方法可以解决这个问题

1.  使用[会话](http://php.net/manual/en/features.sessions.php)在请求之间存储数据。这种方法更安全，因为内部数据不提供给前端（可以更改）。这可能是你现在想要走的路。
2.  将您想要继续的数据放入表单中，以便在您提交表单时将其发送回脚本进行处理。这种方法不太安全（因为用户可以编辑回发的数据）但更具可扩展性（因为服务器没有状态）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-20T19:42:19.463

每次加载页面时，您都会在第 3 行和第 4 行重置生命值。您应该在输入框中设置总计，然后将参数传回，而不是回显总计：

```
echo $Total1; 
```

变成

```
echo '<input type="text" value=".'$Total1'." name="hitpoints1" title="Total Hitpoints for 1">; 
```

然后，读取文件开头的 $_POST 变量：

```
if(isset($_POST['hitpoints1']){
  $Hitpoints1=$_POST('hitpoints1');
} else {
   $Hitpoints1=30;
} 
```

对 hitponts2 执行相同的操作。

# ruby-on-rails - 如何检索与散列数组中存在的散列键相关的值

> ID：11585862
> 
> 赞同：0
> 
> 时间：2012-07-20T19:33:16.400
> 
> 标签：ruby-on-rails, ruby, arrays, ruby-on-rails-3, hash

我正在使用 Ruby on Rails 3.2.2，我想检索与es中存在`Array`的哈希键相关的值。`Hash`也就是我有下面`Array`的`Hash`es：

```
[
  {
    :key1 => value_a_1,
    :key2 => value_a_2
  },
  {
    :key1 => value_b_1,
    :key2 => value_b_2
  },
  {
    :key1 => value_c_1,
    :key2 => value_c_2
  }
] 
```

我想“检索”/“构建”以下内容：

```
[ value_a_1, value_b_1, value_c_1 ] 
```

我怎样才能以正确的方式做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T19:35:21.303

如果`a`是数组：

```
a.map { |i| i[:key1] } 
```

# php - PHP：在字符串块中插入 PHP 变量

> ID：11585864
> 
> 赞同：-1
> 
> 时间：2012-07-20T19:33:36.750
> 
> 标签：php, string-interpolation

因此，在 Perl 和 PHP 中，您可以使用许多“<”符号生成一个文本块：
Perl：

```
return <<TEXT;
    <a href=$foo>Perl interpolates this properly</a>
TEXT 
```

PHP：

```
return <<<TEXT
    <a href=$bar>PHP does not interpolate this...</a>
TEXT; 
```

所以，我的问题是，有没有办法（干净地）在 PHP 中做到这一点，就像在 Perl 中一样？
我试过`<?...?>`and `<?php...?>`，但他们做同样的事情......
而且，这实际上是整个文本块的一个子集......否则我只会构建字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T19:34:50.883

是的，它被称为heredoc语法：

```
$str = <<<EOD
Example of string
spanning multiple lines
using heredoc syntax.
EOD; 
```

[http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T19:43:16.887

PHP Heredocs 被视为双引号字符串，因此如果您的意图是在最终字符串中显示 $bar 的值，这应该可以工作。

# java - 在 C++ 中是否有类似的可能

> ID：11585865
> 
> 赞同：0
> 
> 时间：2012-07-20T19:33:40.150
> 
> 标签：java, c++

这是一些示例 java 代码。这在 C++ 中也可能吗？

```
public class Example {
    public static void main(String args[]){
        int[][] a = new int[3][];
        a[0] = new int[]{1};
        a[1] = new int[]{1,2};
        a[2] = new int[]{1,2,3};
        display(a);
  }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T19:36:43.130

如果问题是：“当可以用图灵完备语言 Z 完成时，是否有可能在图灵完备语言 Y 中做 X？” 那么答案是肯定的。总是是的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T19:41:31.270

您应该使用指向指针的指针，就像您从 main(char **argv, ... argc) 收到的 argv

字符串是字符数组，而 argv 是该结构的指针。

您应该使用 int **a，然后在内存中逐行创建，

一个应该指出：

```
a[0] => unnamed pointer => 0, 0, 0
a[1] => unnamed pointer => 0, 0 
```

就像你做的那样

```
argv[0] = "my program's name"
argv[1] = "my first param" 
```

当使用 char 字符串时，末尾有一个 '\0' char，因此可以知道它何时完成，在这种情况下必须有一些控制之王，不像 C 中的 Java，你可以溢出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T19:36:33.770

是的。

有可能的。你可以用 C++ 做任何事情。

# svg - 在中使用 SVG 字体

> ID：11585866
> 
> 赞同：0
> 
> 时间：2012-07-20T19:33:40.683
> 
> 标签：svg

我有一个由 Illustrator 生成的 SVG 文件，我稍作修改，这样我就可以将它用作 Webkit 和 Gecko 上的蒙版。

该文件具有我需要存储在`<font>`已定义字体系列中的字形。就在有一个`<text>`元素之后。这是 Webkit 直接用来创建掩码的。font-family 值与定义的字体相关，并且可以正确呈现。

然后我有一个`<mask>`元素（因为 Firefox 只能使用它），`<text>`里面有相同的元素。它呈现，但由于某种原因，正在声明的字体系列不起作用。我觉得这很简单，但我对 SVG 的经验很少（尽管现在我知道的比我知道的要多得多！）

基本上我如何让掩码内的元素能够到达`<font>`元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T21:00:22.667

Firefox 不支持 SVG 字体。[使用类似的](http://onlinefontconverter.com/)东西将 SVG 字体转换为 woff 字体。

# javascript - 使用 Leaflet 的 locate() 时检查用户是否共享位置

> ID：11585869
> 
> 赞同：0
> 
> 时间：2012-07-20T19:34:15.140
> 
> 标签：javascript, jquery, geolocation, leaflet

我正在尝试在地图上设置一个按钮，允许用户缩放到他的位置。我正在使用 Leaflet 映射库（[leaflet.cloudmade.com](http://leaflet.cloudmade.com)）。

locate() 方法效果很好，但我想确保用户真正分享了他的位置，因为如果浏览器返回一个位置，我希望按钮更改。这是我一直在尝试使用的代码：

```
function locateUser() {
    try {
        this.map.locate({setView: true});
    } catch(err) {
        alert("Couldn't find your location.");
        return false;
    }
    return true;
}

$("document").ready(function() {
    var map = null;
    initmap(); // This is the function that displays the map.

    // Here is where I need to check whether the user was located.
    // If he is located I want to switch the button to one that will
    // reset the view.
    var is_located = 0;
    $("#myLocation").click(function() {
        if (is_located == 0) {
            if (locateUser()){
                is_located = 1;
                $(this).attr('value', 'WILMINGTON');
            };
        } else if (is_located == 1) {
            $(this).attr('value', 'MY LOCATION');
            is_located = 0;
        };
    });
}); 
```

传单文档说 locate() 方法返回 locationfound 事件或 locationerror 事件，但是当我尝试记录 locate() 返回的内容时，我只得到一个对象，我不清楚它是否找到了用户的位置.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T16:06:04.883

Leaflet 的 locate() 方法只会返回 Map 对象，而不是地理位置调用的状态。然而，Leaflet 将在尝试地理定位后触发两个事件之一：

*   找到的位置
*   位置错误

我在以下位置上传了一个使用这些事件的示例：http: [//jsfiddle.net/XwbsU/5/](http://jsfiddle.net/XwbsU/5/)

你可以看到我已经注册了这些事件，以确定地理定位调用是否成功。

希望有帮助。

# sql - 返回每组的前 3 行

> ID：11585879
> 
> 赞同：0
> 
> 时间：2012-07-20T19:35:02.880
> 
> 标签：sql, sql-server-2000

当我进行此选择时，结果显示所有“车辙”及其电话号码，我的问题是每个“车辙”有近 10 个电话号码，每个“车辙”只需要 3 个电话号码，我尝试使用 TOP，但只显示所有表的前 3 行，而不是“车辙”的第一行，我怎样才能将 TOP 仅用于“车辙”行，而不是在所有表中

```
Select Distinct  
t1.rut_cliente as rut_cliente,
t1.nro_fono  as numero 
--Into #tmp_numeros
From dat_clientes_sucursales_contactos_telefonos t1,dat_rut_clientes t2
where  t1.rut_cliente = t2.rut_cliente 
and cod_prioridad = 1 
```

这就是我通过这个查询得到的：

```
 Rut_cliente   Nro_fono 
  60506000-5    2046840
  60506000-5    3507935
  60506000-5    4106886
  60506000-5    5440000
  60506000-5    5445000
  81698900-0    2373281
  81698900-0    3541342
  81698900-0    3541438
  81698900-0    3541518
  81698900-0    3542101 
```

这就是我想要的：

```
 Rut_cliente   Nro_fono 
  60506000-5    2046840
  60506000-5    3507935
  60506000-5    4106886
  81698900-0    2373281
  81698900-0    3541342
  81698900-0    3541438 
```

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-20T19:38:41.100

该问题最初标记为 SQL Server 2008，您可以在其中使用公用表表达式执行此操作：

```
;WITH x AS 
 (
   SELECT Rut_cliente, Nro_fono, rn = ROW_NUMBER()
     OVER (PARTITION BY Rut_cliente ORDER BY Nro_fono)
   FROM dbo.dat_clientes_sucursales_contactos_telefonos AS t1
   INNER JOIN dbo.dat_rut_clientes AS t2
   ON t1.rut_cliente = t2.rut_cliente
   WHERE cod_prioridad = 1
)
SELECT Rut_cliente, Nro_fono FROM x
WHERE rn <= 3
ORDER BY Rut_cliente, Nro_fono; 
```

其他的建议：

*   请不要使用`table, table`语法。使用正确`INNER JOIN`的 s。我[在这里解释为什么](https://sqlblog.org/2009/10/08/bad-habits-to-kick-using-old-style-joins)。
*   请为内部查询添加适当的别名，以便人们知道哪些列来自 t1，哪些列来自 t2。

* * *

但是现在我们知道用户实际上在使用 SQL Server 2000。我想这就是我在那里的做法，但性能会很糟糕。我不是 100% 确定这有效（因为我再次猜测哪些列来自哪个表）。

```
SELECT x.rut_cliente, x.nro_fono, COUNT(*) FROM 
(
  SELECT t1.rut_cliente, t1.nro_fono
    FROM dat_clientes_sucursales_contactos_telefonos AS t1
    INNER JOIN dat_rut_clientes AS t2
    ON t1.rut_cliente = t2.rut_cliente
    WHERE cod_prioridad = 1
) AS x
INNER JOIN dat_clientes_sucursales_contactos_telefonos AS b
ON b.rut_cliente = x.rut_cliente
AND b.nro_fono <= x.nro_fono
GROUP BY x.rut_cliente, x.nro_fono
HAVING COUNT(*) <= 3
ORDER BY x.rut_cliente, x.Nro_fono; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-20T19:38:53.830

例如 with which 是一个窗口函数，并返回由 . 确定的[`ROW_NUMBER`](http://msdn.microsoft.com/en-us/library/ms186734.aspx)每个分区（类似于 ）的行号：`group by``order by`

```
WITH CTE AS(
   SELECT t1.rut_cliente as rut_cliente, t1.nro_fono  as numero,
      RN = ROW_NUMBER()OVER(PARTITION BY Rut_cliente ORDER BY Nro_fono)
   FROM dbo.dat_clientes_sucursales_contactos_telefonos AS t1
   INNER JOIN dbo.dat_rut_clientes AS t2 ON t1.rut_cliente = t2.rut_cliente
   WHERE cod_prioridad = 1
)
SELECT rut_cliente as rut_cliente, nro_fono  as numero
FROM CTE
WHERE RN <= 3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T19:39:58.420

尝试这个

```
;with CTE AS (
select Rut_cliente, Nro_fono , ROW_NUMBER() OVER 
(PARTITION BY Rut_cliente ORDER BY Nro_fono) rn
 FROM dbo.dat_clientes_sucursales_contactos_telefonos AS a
INNER JOIN dbo.dat_rut_clientes AS b
ON a.rut_cliente = b.rut_cliente
WHERE cod_prioridad = 1

)
SELECT * FROM CTE where rn <=3 
```

# javascript - 限制文本区域中单行的行数和字母数

> ID：11585880
> 
> 赞同：4
> 
> 时间：2012-07-20T19:35:05.670
> 
> 标签：javascript, jquery, html, textarea

**问题：**
我试图限制文本框中每行的行数和字母数。

**到目前为止我得到了什么：**
到目前为止，我设法使用以下方法限制行数：

```
var text = $(this).val();
var lines = text.split("\n");

if(e.keyCode == 13 && lines.length >= $(this).attr('rows')) { 
        return false;
    } 
```

如果达到行数限制，这将不允许用户按下返回键（keyCode 13）。

**问题：**
现在我也在尝试限制单行中的字母数量，因为如果我到达我的文本区域的末尾（带回车键）我仍然可以持有一个字母/写大量文本，它会跳转到另一行当它到达行尾时。这样，这种限制可能会被“欺骗”，我正在寻找解决方案。

**我的想法，没有解决问题：**

```
else{
    for(var i = 0; i < lines.length && e.keyCode != 13; i++) {
         if(lines[i].length >= $(this).attr('cols')) {
             return false; // prevent characters from appearing
         }
     }
} 
```

我试过这个来限制字母的数量。这行得通，但它有缺陷。如果我在一行中达到最大字母（***ANY***），我***就不能再输入任何***一行了。

**我不知道如何只检查我现在输入的行。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T20:05:23.517

在 chrome 中测试：http: [//jsfiddle.net/3e3EH/1/](http://jsfiddle.net/3e3EH/1/)

```
$(document).ready(function(){
    var textArea = $('#foo');
    var maxRows = textArea.attr('rows');
    var maxChars = textArea.attr('cols');
    textArea.keypress(function(e){
        var text = textArea.val();
        var lines = text.split('\n');
        if (e.keyCode == 13){
            return lines.length < maxRows;
        }
        else{
            var caret = textArea.get(0).selectionStart;
            console.log(caret);

            var line = 0;
            var charCount = 0;
            $.each(lines, function(i,e){
                charCount += e.length;
                if (caret <= charCount){
                    line = i;
                    return false;
                }
                //\n count for 1 char;
                charCount += 1;
            });

            var theLine = lines[line];
            return theLine.length < maxChars;
        }
    });

});​ 
```

## 编辑

正如 jbabey 指出的那样， ctrl+v 或右键单击 -> 粘贴可能是一个问题。可以很容易地阻止右键单击。对于 ctrl+v，你可能也可以检测到它......只是禁用 javascript 显然也会破坏这个东西。无论如何，与任何客户端验证一样，您*必须*在服务器端仔细检查。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-20T20:49:02.090

这就是我想出的。相当干净，似乎适用于我能提供的所有测试。

JavaScript：

```
$(function () {
    $('textarea').on('keypress', function (event) {
        var text = $('textarea').val();
        var lines = text.split("\n");
        var currentLine = this.value.substr(0, this.selectionStart).split("\n").length;
        console.log(lines);
        console.log(currentLine);
        console.log(lines[currentLine - 1]);
        if (event.keyCode == 13) {
            if (lines.length >= $(this).attr('rows')) return false;
        } else {
            if (lines[currentLine - 1].length >= $(this).attr('cols')) {
                return false; // prevent characters from appearing
            }
        }
    });
}); 
```

HTML：

```
<textarea rows="10" cols="15"></textarea> 
```

[演示](http://jsfiddle.net/GXZZg/2/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T19:53:51.403

无需遍历每一行，而是获取光标的当前行号并仅检查该行的字符长度。有关实施详细信息，请参阅此[SO 答案](https://stackoverflow.com/a/9185820/5926)。

然后将您的 else 语句更改为如下所示：

```
else{
    var currLine = getLineNumber();
    if (lines[currLine].length >= $(this.attr('cols')) {
        return false; // prevent characters from appearing
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-21T12:07:06.610

有点晚了，但我做了这个插件[https://github.com/luisdalmolin/jquery-limitLines](https://github.com/luisdalmolin/jquery-limitLines)。

有时可能很有用。

# xml - 替换 PostgreSQL 中的符号字符

> ID：11585882
> 
> 赞同：1
> 
> 时间：2012-07-20T19:35:13.917
> 
> 标签：xml, regex, postgresql, replace, invalid-characters

我的数据包含一个注释字段，该字段由于导出工具错误而充满无效字符，并从 Excel 电子表格 (*.xls) 导入。

该字符在 XML 中出错，表示字符引用“”是无效的 XML 字符。

我将如何替换wingdings字符，例如：PostgreSQL中的性别标志、块、符号？

我试图将这些字符复制并粘贴到替换语句或任何与此相关的语句中，但徒劳无功。有没有办法通过 RegExp 替换任何非字母数字或“-=+”类型的字符？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T20:01:07.670

```
SELECT regexp_replace('123xabcABCxöäüxÖÄÜx¡‘’xæćčx=+-x"§$%&/()x'
                     ,'[^a-zA-Z0-9=+-]','_','g') 
```

结果：

```
123xabcABCx___x___x___x___x=+-x________x 
```

`^`角色类中的领先者`[^a-zA-Z0-9=+-]`否定了它。阅读“*不在*以下列表中的所有字符”。

注意将`-`字符放在字符类的末尾（或开头），否则它将具有特殊含义，例如 in `a-z`。

请注意“全局”的第四个参数`'g'`。没有它，只有第一场比赛会被替换。

还要注意，像这样的字符是如何`öäü`被替换的。您可能想要也可能不想要……因此，您可能对`unaccent`提供该[`unaccent()`](http://www.postgresql.org/docs/current/interactive/unaccent.html#AEN138587)功能的扩展感兴趣：

> unaccent() 函数从给定的字符串中删除重音符号（变音符号）。

[此处](http://www.postgresql.org/docs/current/interactive/functions-matching.html#FUNCTIONS-POSIX-REGEXP)的手册中有关 PostgreSQL 正则表达式的详细信息。

# python - Jinja 按字母顺序对混合大小写的列表进行排序

> ID：11585884
> 
> 赞同：1
> 
> 时间：2012-07-20T19:35:15.033
> 
> 标签：python, jinja2

我正在尝试使用 Jinja 过滤器按字母顺序对选择列表中的选项进行排序。我遇到的问题是列表的大小写混合，并且没有按字母顺序出现。我仍然想继续使用 jinja 过滤器，想知道是否要通过小写或其他方式进行比较。

当前形式的列表

*   所有源类型
*   安卓市场
*   Facebook
*   论坛
*   RSS订阅
*   推特
*   YouTube
*   iTunes

神社守则

```
{% for source,number in sources.items()|sort %}
        <option {% if number == user.postfiltertype %} selected {% endif %} value='{{ number }}'>{{ source }}</option>
{% endfor %} 
```

输入

```
[('iTunes', 8), ('RSS Feeds', 2), ('Twitter Incoming', 9), ('Facebook', 4), ('Android Market', 10), ('All Source Types', 0), ('YouTube', 5), ('Twitter', 3), ('Forums', 1)] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T20:02:21.300

您可以在之后添加以下内容`|sort`：

```
(case_sensitive=False) 
```

所以你得到：

```
{% for source,number in sources.items()|sort(case_sensitive=False) %} 
```

看：

[http://jinja.pocoo.org/docs/templates/#filters](http://jinja.pocoo.org/docs/templates/#filters)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T19:50:26.677

我查看了 Jinja API 并没有看到任何内容。也就是说，做起来相对简单。如果您只想将第一项转换为小写，您可以这样做：

```
def ignore_first_case(x):
    if len(x) >= 1 and not isinstance(x, str):
        return (hasattr(x[0], "lower") and x[0].lower() or x[0]) + x[1:]
    else:
        return hasattr(x, "lower") and x.lower() or x

def ignore_case_sort(seq):
    return seq.sort(key=ignore_first_case) 
```

最后，您需要将其注册到 jinja 环境中

```
environment.filters["ignore_case_sort"] = ignore_case_sort 
```

# extjs - ExtJS 4.1 - JSON 中关联的嵌套 hasOne

> ID：11585885
> 
> 赞同：1
> 
> 时间：2012-07-20T19:35:16.083
> 
> 标签：extjs, extjs4.1

我有以下格式的 JSON：

```
{
    "id": 1,
    "arbitraryAttribute": "arbitraryValue",
    "thing": {
        "thingKey1": "thingValue1",
        "thinkKey2": "thingValue2"
    }
} 
```

该模型表示如下：

```
Ext.define("MyModel", {
    extends: "Ext.data.Model",
    fields: [
        {name: "id", type: "string"},
        {name: "arbitraryAttribute", type: "string"},
    ],
    hasOne: [
        {
            model: "Thing",
            name: "thing"
        }
    ]
});

Ext.define("Thing", {
    extends: "Ext.data.Model",
    fields: [
        {name: "thingKey1", type: "string"},
        {name: "thingKey2", type: "string"}
    ]
}); 
```

代理是一个简单的 json 代理。它得到的 JSON 看起来像我展示的那样，但我的记录似乎对 Thing 模型一无所知。是否需要设置任何额外的管道才能让 MyModel 拉出嵌套的 Thing json？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:22:14.803

您忘记在 MyModel 中设置 thing_id。这在 ExtJs 中也根本不起作用。您现在可以通过 JSON 设置 thing_id，但不能像您所做的那样设置整个对象（而且应该如此）。

如果需要，它将通过模型代理自动加载完整的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T09:39:54.337

```
Ext.define('User', {
    extend:'Ext.data.Model',
    fields: ['id', 'name', 'status'],
    associations: [
        { type: 'hasOne', model: 'Status', associationKey: 'status'  }
    ]
});

Ext.define('Status', {
    extend:'Ext.data.Model',
    fields: ['id', 'title'],
}); 
```

[演示在这里](http://ext4all.com/post/extjs-4-1-read-complex-json-with-hasone-association)

# python - 将另一个变量分配给字符串是否会复制或增加引用计数

> ID：11585886
> 
> 赞同：14
> 
> 时间：2012-07-20T19:35:19.580
> 
> 标签：python

在 David Beazley 的“Python Essential Reference”的第 35 页上，他首先指出：

> 对于字符串等不可变数据，解释器积极地在程序的不同部分之间共享对象。

然而，稍后在同一页上，他指出

> 对于数字和字符串等不可变对象，此分配有效地创建了一个副本。

但这不是矛盾吗？一方面他说它们是共享的，但他又说它们是复制的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-20T19:57:54.330

python 中的赋值永远不会创建副本（从技术上讲，只有当类成员的赋值被重新定义时，例如通过使用`__setattr__`、属性或描述符重新定义时才有可能）。

所以之后

```
a = foo()
b = a 
```

从那里返回的任何内容`foo`都没有被复制，而是您有两个变量`a`并`b`指向同一个对象。无论对象是否不可变。

但是，对于不可变对象，很难判断是否是这种情况（因为您不能使用一个变量来改变对象并使用另一个变量检查​​更改是否可见），因此您可以自由地认为确实`a`并且`b`不能相互影响。

对于一些不可变对象，Python 也可以自由地重用旧对象而不是创建新对象和之后

```
a = x + y
b = x + y 
```

其中`x`和`y`都是数字（因此总和是数字并且是不可变的）可能两者都`a`指向`b`同一个对象。请注意，没有这样的保证......也可能是它们将指向具有相同值的不同对象。

要记住的重要一点是 Python 永远不会复制，除非特别指示使用 eg`copy`或`deepcopy`. 这对于可变对象**非常**重要，以避免意外。

例如，您可以看到一个常见的成语：

```
class Polygon:
    def __init__(self, pts):
        self.pts = pts[:]
    ... 
```

在这种情况下`self.pts = pts[:]`，使用而不是`self.pts = pts`制作整个点数组的副本，以确保如果在创建对象后将更改应用于传递给构造函数的列表，点列表不会意外更改。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-20T19:39:58.870

它*有效地*创建了一个副本。它*实际上*并没有创建副本。拥有两个副本和拥有两个名称共享相同值的主要区别在于，在后一种情况下，通过一个名称进行的修改会影响另一个名称的值。如果值不能被改变，这种差异就消失了，所以对于不可变对象，值是否被复制几乎没有实际影响。

`id`在某些极端情况下，即使对于不可变类型（例如，通过使用函数或运算符），您也可以区分副本和不同对象之间的区别`is`，但这些对于 Python 内置的不可变类型（如字符串和数字）没有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-01T11:53:10.447

不，将预先存在的`str`变量分配给新变量名称不会在内存中创建该值的独立副本。

可以使用该`id()`函数检查内存中唯一对象的存在。例如，使用交互式 Python 提示符，尝试：

```
>>> str1 = 'ATG'
>>> str2 = str1 
```

两者`str1`和`str2`具有相同的值：

```
>>> str1
'ATG'
>>> str2
'ATG' 
```

这是因为`str1`和`str2`都指向同一个对象，这可以从它们共享相同的唯一对象 ID 的事实中得到证明：

```
>>> id(str1)
140439014052080
>>> id(str2)
140439014052080
>>> id(str1) == id(str2)
True 
```

现在假设您修改`str1`：

```
>>> str1 += 'TAG'  # same as str1 = str1 + 'TAG'
>>> str1
ATGTAG 
```

因为`str`对象是不可变的，所以上面的赋值创建了一个具有自己 ID 的新的唯一对象：

```
>>> id(str1)
140439016777456
>>> id(str1) == id(str2)
False 
```

但是，`str2`保持与之前相同的 ID：

```
>>> id(str2)
140439014052080 
```

因此，执行将具有自己唯一 ID 的`str1 += 'TAG'`全新对象分配给变量，同时继续指向原始对象。`str``str1``str2``str`

这意味着将现有`str`变量分配给另一个变量名称**不会**在内存中创建其值的副本。

# haskell - 数据记录的类约束

> ID：11585891
> 
> 赞同：2
> 
> 时间：2012-07-20T19:35:58.997
> 
> 标签：haskell, types

我有一个`data`类型：

```
data BuildException a = KillBuild JobID a Stage
                      | FailBuild JobID a Stage
                      | CancelBuild JobID a Stage
                      | StopBuild JobID a Stage
                         deriving Typeable 
```

其中 a 必须有一个类 Foo 的实例。我记得读过（也许在 RWH 中）虽然可以在`data`定义中包含类约束，但这是不可取的。那么这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T19:48:48.053

只需将类型约束应用于需要它的函数。例如：

```
makeException :: Foo a => String -> BuildException a 
```

甚至可能有一些函数不需要`Foo`约束，这可能使您的 API 的客户端可以使用它的子集而无需定义`Foo`约束！如果它是数据记录定义的一部分，这是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T15:07:57.853

你没看错。然而，在 Haskell 2010 中，这个特性被删除了，因为它没有用。您*可以*在数据类型中指定约束，但所有函数也必须具有相同的约束，因此实际上没有意义。因此，该功能被删除，因为它完全没用。

如前所述，您应该只在函数中指定约束。但是，您应该意识到您不需要为不需要它的函数指定约束。特别是，如果没有必要，创建函数不一定需要受限于约束，因为像这样的无限函数是约束版本的泛化。这适用于将其作为参数的函数，但这样的函数更有可能实际需要约束。

# android - 自定义 AsyncTaskLoader 的编译错误

> ID：11585893
> 
> 赞同：1
> 
> 时间：2012-07-20T19:36:16.433
> 
> 标签：android, loader

我正在尝试在以下位置编译示例：http: [//developer.android.com/reference/android/content/AsyncTaskLoader.html](http://developer.android.com/reference/android/content/AsyncTaskLoader.html)

在 onCreateLoader 方法中：

```
@Override public Loader<List<AppEntry>> onCreateLoader(int id, Bundle args) {
        // This is called when a new Loader needs to be created.  This
        // sample only has one Loader with no arguments, so it is simple.
        return new AppListLoader(getActivity());
    } 
```

我不断收到以下编译错误：

```
required: android.support.v4.content.Loader<java.util.List<com.example.AppEntry>>
 return new AppListLoader(getActivity()); 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:02:53.283

啊。。算了。我使用的 AsyncTaskLoader 导入错误。将其更改为从支持库导入并开始工作！

# ruby-on-rails-3 - 是否可以通过业务逻辑限制对资产的访问？

> ID：11585895
> 
> 赞同：0
> 
> 时间：2012-07-20T19:36:22.053
> 
> 标签：ruby-on-rails-3, permissions, assets

我创建了账单，应该可以从管理员打开，但不能作为普通用户打开。此账单 pdf 将在 app/assets/pdfs 中的某些业务流程之后创建。

```
 assets_pdf_url if user_signed_in? 
```

是否可以通过某些规则限制特定资产？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:30:26.413

将受限资产存储在公用文件夹之外的某个文件夹中，因此仅通过访问 URL 就无法访问它们，然后创建使用 send_file 或 send_data 的操作。这样你就可以用你想要的任何逻辑来包装它。

```
# in controller
def show
  @bill = Bill.find(params[:id])
  if user_signed_in?
    send_file Rails.root.join('bill_pdfs',"#{@bill.id}.pdf")
  else
    redirect_to '/', :error => "Only logged in users may download"
  end
end 
```

# objective-c - For Loop 'i' 逻辑

> ID：11585901
> 
> 赞同：-1
> 
> 时间：2012-07-20T19:36:42.910
> 
> 标签：objective-c, for-loop, cocos2d-iphone

现在我有这个：

```
for (int i = 0; i < level.contentSize.width/level.tileSize.width; i ++){
    tile = [levelLayer tileAt:ccp(i,17)];
    if (CGRectIntersectsRect(ball.boundingBox, tile.boundingBox)) {
        NSLog(@"hit");
    }
} 
```

我需要的是两个变量（现在我有一个 - `i`），这样我就可以检查所有 x 和 y 值中的所有图块。所以`tile = [levelLayer tileAt:ccp(i,j)];`<--- 看起来像那样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T19:41:12.397

您可以尝试使用内部 for 循环和另一个循环变量 j 迭代所有可能的值。就像是：

```
for (int i = 0; i < level.contentSize.width/level.tileSize.width; i ++)
    for (int j = 0; j < level.contentSize.height/level.tileSize.height; j ++){

        tile = [levelLayer tileAt:ccp(i,j)];
        if (CGRectIntersectsRect(ball.boundingBox, tile.boundingBox)) {
            NSLog(@"hit");
        }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T19:39:38.057

**使用单独的`for`循环。**

`for`循环遍历某个范围的值。如果你想遍历两个不同的范围，使用两个 for 循环是一个好主意，因为它清楚地传达了你在做什么。如果循环体超过一两行，您可能希望将其分解为自己的函数或方法，甚至使用您在循环之前定义的块。这样，您可以确定两个循环执行完全相同的任务，只是值的范围不同。

还有其他可能的解决方案来处理多个索引范围。例如，您可以将两个范围都添加到 NSMutableIndexSet 中，然后使用`-enumerateIndexesUsingBlock:`.

但说真的，只需使用两个`for`循环。

# javascript - 尽管我努力，递归时钟呼叫仍在滴答作响？

> ID：11585903
> 
> 赞同：1
> 
> 时间：2012-07-20T19:36:53.680
> 
> 标签：javascript, clock

我有一个时钟，我想一直滴答作响，*除非*我将“break”放入“seconds”参数中。当我确实输入“休息”时，时钟会中断一秒钟，然后继续滴答作响。我想让它停止滴答作响，我不知道问题是什么。作为记录，我在页面加载时调用此函数，然后每当用户单击页面上的元素时。他们点击某些东西后会变得很糟糕。

```
var seconds;

function countdown_clock(seconds) {
    if (seconds != "break") {
        countdown(seconds);

        seconds = seconds;
    }
}

function displaymessage() {
    alert("Your Time Has Expired");
}

function countdown(seconds) {
    if (seconds != "break") {
        Time_Left = seconds;
        format = 1;

        if (Time_Left < 0)
            Time_Left = 0;

        switch (format) {
            case 0:
                //The simplest way to display the time left.
                $("div#ClockCountdown").html(Time_Left + ' seconds');
                break;
            case 1:
                //More detailed.
                Next_time = Time_Left - 1;
                minutes = Math.floor(Time_Left / 60);
                Time_Left %= 60;
                seconds = Time_Left;

                mps = 's';
                sps = 's';
                earlyzero = '';
                latezero = '';
                //ps is short for plural suffix.

                if (minutes == 1) mps = '';
                if (seconds == 1) sps = '';
                if (seconds < 10) earlyzero = '0';
                //                    if(seconds == 10) latezero ='0';

                //                    document.all.countdown.innerHTML = minutes + ' minute' + mps + ' and ';
                //                    document.all.countdown.innerHTML += seconds + ' second' + sps;

                innerHTML = minutes + ':';
                innerHTML += earlyzero + seconds;
                $("div#ClockCountdown").html(innerHTML + "nonbroken!");
                break;
            default:
                $("div#ClockCountdown").html(Time_Left + ' seconds');
        }

        if (Next_time == 0) {
            displaymessage();
            window.location.href = "navigation.php?nav=video_timeout";
        }
        else {
            setTimeout('countdown(' + Next_time + ');', 1000);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:47:19.200

您还必须清除超时。做这样的事情：

```
var timeout;
function countdown(seconds) {
    if (seconds == "break") {
        clearTimeout(timeout);
    }
    // other things
    if( Next_time == 0) {
        displaymessage();
        window.location.href ="navigation.php?nav=video_timeout";
    } else {
        timeout = setTimeout('countdown(' + Next_time + ');', 1000);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T20:35:53.520

超时是一击，当调用超时函数时它们被清除。仅当秒 !== 'break' 时才应设置下一个超时：

```
 if (Next_time == 0) {
        displaymessage();
        window.location.href = "navigation.php?nav=video_timeout";
    }
    else if (seconds !== 'break') {
        setTimeout('countdown(' + Next_time + ');', 1000);
    } 
```

# arrays - jQuery选项卡：禁用第一个选项卡，选择第二个

> ID：11585907
> 
> 赞同：3
> 
> 时间：2012-07-20T19:37:13.347
> 
> 标签：arrays, jquery-ui, selected, jquery-tabs, disabled-control

我正在使用 jQuery 选项卡创建一个带有四个选项卡的选项卡栏。*初始化选项卡后*，单击某个链接时，我想禁用第一个选项卡并选择第二个选项卡。

我可以成功禁用*第二个*选项卡并像这样选择第一个选项卡（在我的点击功能内）：

```
$("#settings-tabs").tabs("option", {
    "disabled": [0, 1],
    "selected": 0
}); 
```

但是如何禁用第一个选项卡并选择第二个选项卡？好吧，选择第二个选项卡很容易：`"selected": 1`. 但我不知道如何禁用第一个选项卡。我试过了：

```
"disabled": [0, 0]
"disabled": [0]
"disabled": 0
"disabled": [-1, 0] 
```

在所有情况下，默认情况下都会选择第二个选项卡，但我仍然可以单击第一个选项卡切换回它。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T19:49:36.430

在调用禁用之前尝试调用 select：**[jsFiddle 示例](http://jsfiddle.net/j08691/TwhaN/1/)**

```
$("#tabs").tabs();
$("#tabs").tabs("option", {
    "selected": 1,
    "disabled": [0]
});​ 
```

或者

```
$("#tabs").tabs();
$( "#tabs" ).tabs( "option", "selected", 1 );
$( "#tabs" ).tabs( "option", "disabled", [0] );​ 
```

# vb.net - 不断运行的队列

> ID：11585908
> 
> 赞同：0
> 
> 时间：2012-07-20T19:37:21.630
> 
> 标签：vb.net, queue

我不确定这是否是正确的方法，但我想做的是创建一个不断运行的队列，以便我可以继续向其中添加内容。基本上我希望能够将东西添加到队列中，然后以先到先得的方式处理它。我有以下代码：

```
 Namespace Managers
    Public Class SQLQueueManager
        Public Shared Sqlitems As New Queue

        Public Sub StartProcessing()
            Dim t1 As New Threading.Thread(AddressOf Process)
            t1.Start()
        End Sub

        Public Shared Sub Process()
            Do
                SyncLock Sqlitems.SyncRoot
                    If Sqlitems.Count > 0 Then
                        SqlManager.ExecNonQuery(Sqlitems.Peek)
                        Sqlitems.Dequeue()
                    End If
                End SyncLock
            Loop
        End Sub

    End Class
End Namespace 
```

我使用以下命令开始这个队列：

```
 Dim sqlT As Thread
    sqlT = New Thread(AddressOf SQLQueueManager.Process)
    sqlT.Start() 
```

我使用以下方法将项目添加到队列中：

```
SQLQueueManager.Sqlitems.Enqueue(...) 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T02:16:57.047

像这样的自定义方法可以工作。考虑一下，也许，使用`ThreadPool.QueueUserWorkItem`：

[ThreadPool.QueueUserWorkItem——MSDN](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.queueuserworkitem%28v=vs.90%29.aspx)

# jquery - 使用 jQuery 调整容器内所有元素的大小

> ID：11585909
> 
> 赞同：0
> 
> 时间：2012-07-20T19:37:23.287
> 
> 标签：jquery

所以我有一个容器（DIV），当用户调整窗口大小时，它将使用正确的纵横比调整大小（所以它不会拉伸）。

现在我想使用 jQuery 动态调整该容器内的所有元素的大小，记住它们也应该正确保持它们的纵横比。

我知道有一个 CSS3 2D 变换选项，但我想在不使用 CSS3 的情况下做到这一点，而只使用 jQuery 和旧 CSS，因此它也适用于旧版本的 IE。

这是代码，您可以看到图像将保持其纵横比，因为我使用了 width=100% 但其他元素有自己的大小（宽度和高度），不能以百分比表示。

所以理想情况下，我喜欢在调整窗口大小时设置这些元素的宽度、高度、顶部和左侧位置，以保持它们的纵横比正确。 [http://jsfiddle.net/Km8Ef/1/](http://jsfiddle.net/Km8Ef/1/)

有什么好的解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:49:42.343

如果没有看到一些标记，我真的不知道你想要完成什么，但为什么不只使用百分比宽度呢？容器将根据您的代码手动设置...

```
<div id="container" style="width:500px">
    <div id="inner" style="width:50%">
        <img style="width:100%" src="image.jpg"/>
    </div>
</div> 
```

# ruby - 替换为使用正则表达式结果

> ID：11585911
> 
> 赞同：1
> 
> 时间：2012-07-20T19:37:34.897
> 
> 标签：ruby, regex

假设我有一些带有这样几个标签的文本：

```
[twitter:jpunt] 
```

我想把它们替换成这样的：

```
<a href="http://twitter.com/jpunt">@Jpunt</a> 
```

我怎么能在 Ruby 中做到这一点？我已经研究了几个小时的正则表达式，结果很沮丧。任何人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:50:01.480

这应该做的工作：

```
initial = "[twitter:jpunt]"
link = initial.gsub(/\[twitter:(\w+)\]/i, '<a href="http://twitter.com/\1">@\1</a>') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T20:24:38.697

是一行代码（点击[这里](http://ideone.com/eI8ef)测试此代码）>>

```
output = input.gsub(/\[([^:]+):([^\]]+)\]/) {
  '<a href="http://' + $1 + '.com/' + $2 + '">@' + $2.capitalize + '</a>' } 
```

上面的代码适用于任何标签名称。如果您只想允许*twitter ，请进行修改：*

```
output = input.gsub(/\[twitter:([^\]]+)\]/) {
  '<a href="http://twitter.com/' + $1 + '">@' + $1.capitalize + '</a>' } 
```

# php - setcookie() 不能正常工作？

> ID：11585914
> 
> 赞同：2
> 
> 时间：2012-07-20T19:37:43.193
> 
> 标签：php, setcookie

嗨，我正在尝试在我的网站上使用 cookie。在我的站点中实现它们之前，我创建了两个测试页面来试用它们，但它似乎效果不佳。

第一页有：

```
<?php
setcookie("apple", "abc", time()+1500, "/", "b****a.org");
?> 
```

第二页有：

```
<?php
echo $_COOKIE["apple"];
?> 
```

所以为了测试它，我先到第一页，然后再到第二页。出于某种原因，第二页只是在屏幕上输出字母“b”。而已。我在另一台电脑上试了一下，它输出“abcb”这个b是干什么用的？我猜cookie没有存储在我的计算机上，但它确实可以在另外两台计算机上运行，​​所以我想这只是我的问题。无论如何，为什么它最后会输出一个额外的“b”？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T19:41:52.537

像这样设置cookie对我来说很好。

```
setcookie("apple", "abc", time()+1500); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T19:55:36.970

您的路径或域名有问题，我在本地使用它，它运行完美..

```
<?php
setcookie("mycookie", "This cookie tastes good", time()+3600, "", "localhost");

echo $_COOKIE['mycookie'];   //output : This cookie tastes good

//refresh twice if you are setting a cookie and using echo on a same page
?> 
```

有关 cookie 的更多信息：[PHP 手册](http://php.net/manual/en/function.setcookie.php)

# ruby-on-rails - 如何为rails使用haml布局？

> ID：11585915
> 
> 赞同：1
> 
> 时间：2012-07-20T19:37:43.580
> 
> 标签：ruby-on-rails

[我在https://github.com/evenwu/pinterest-clone-layout](https://github.com/evenwu/pinterest-clone-layout)找到了我想尝试的布局。但是，我不知道如何将它与我现有的 rails 项目集成。我当前的布局如下所示：

```
<!DOCTYPE html>
<html>
  <head>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"/>
    <%= stylesheet_link_tag    "application", :media => "all" %>
    <%= javascript_include_tag "application" %>
    <%= csrf_meta_tags %>
  </head>
  <body>
    <%= yield %>
  </body>
</html> 
```

如何使用 github 链接中的布局？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:20:48.070

添加`gem 'haml'`到您的 Gemfile 并运行`bundle install`.

将布局和样式表等复制到您的项目中。

记得删除你的`.erb`布局；默认情况下， Rails`.erb`优先`.haml`。

# java - 通过“参考值”？需要一些澄清

> ID：11585916
> 
> 赞同：5
> 
> 时间：2012-07-20T19:37:50.560
> 
> 标签：java

我知道在 Java 中，一切都是按值传递的。但是对于对象来说，传递的是对对象的引用的值。这意味着有时可以通过参数更改对象，这就是为什么，我猜，人们说，永远不要修改参数。

但是在下面的代码中，发生了一些不同的事情。 `s`当您返回时in`changeIt()`不会改变`main()`：

```
public class TestClass {

    static String str = "Hello World";

    public static void changeIt( String s ) {
        s = "Good bye world";
    }

    public static void main( String[] args ) {
        changeIt( str );
        System.out.println( str );
    }
} 
```

我猜——我想确认一下——当你说它`s = "something"`与说相同或等同时`String s = new String("something")`。这就是为什么`s`不改变？它是否在本地分配了一个全新的对象，一旦退出就会被丢弃`changeIt()`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T19:43:31.007

> 当您说 s = "something" 时，它与说 String s = new String("something") 相同或等效

是的，差不多。（尽管 JVM 可能会进行优化，以便多次使用的同一个字符串字面量引用同一个 String 对象）。

> 这就是为什么s不改变？它是否在本地分配了一个全新的对象，一旦退出 changeIt() 就会被丢弃

是的。正如您所说，Java 中的所有内容都是按值传递的，甚至是对对象的引用。因此，变量`s`in 与您在 main() 中使用的`changeIt( String s )`值不同`str`，它只是 changeIt 方法中的局部变量。将该引用设置为引用另一个对象不会影响`changeIt`.

请注意，在您将不同的对象分配给之前，输入方法时`s`引用的 String 对象仍然是相同的 String`str``changeIt()``s`

您需要注意另一件事，那就是字符串是不可变的。这意味着您在字符串对象上调用的任何方法都不会更改该字符串。例如，`s.toLowerCase()`在您的 changeIt() 方法中调用也不会影响调用者。这是因为 String.toLowerCase() 不会改变对象，而是返回一个新的 String 对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-20T19:45:52.697

当你写

```
s = "Good bye world"; 
```

您正在将值更改`s`为对新字符串的引用。您没有更改 . 引用的字符串的值`s`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T19:41:50.273

是的，现在 'S' 指向范围仅限于该方法的全新对象。字符串可能不是理解传递值概念的完美示例。而不是字符串，让我们说传递一些可变对象引用并在方法内对分配的新对象进行更改。您在对象之外看不到它们。

```
public class MyMain {

    private static void testMyMethod(MyMain mtest) {
        mtest=new MyMain();
        mtest.x=50;
        System.out.println("Intest method"+mtest.x);
    }
     int x=10;
    public static void main(String... args)
    {
        MyMain mtest = new MyMain();
        testMyMethod(mtest);
        System.out.println("In main method: "+mtest.x);
    }
} 
```

[阅读此SO 讨论](https://stackoverflow.com/questions/40480/is-java-pass-by-reference)中的第二个答案。

# php - Kohana 3.2，ORM has_many，belongs_to 关系没有引用正确的键

> ID：11585917
> 
> 赞同：3
> 
> 时间：2012-07-20T19:37:58.653
> 
> 标签：php, kohana, kohana-3, kohana-orm

我有两个命名的表`utilities`，`types`我试图从实用程序视图访问类型中的其他字段。例如;`$utilities->type->type;`

实用程序会`have_one`键入和键入`belong_to`实用程序对吗？

这就是我目前拥有它的方式，而不是将`utilities.type_id`其设置为`utilities.id`. 结果，它为每一行提取不同的类型，即使它们都是相同的类型。

![在此处输入图像描述](../Images/c78b161172d2d55446040581f981a0f2.png)

我应该如何使用 Kohana 3.2 ORM 布置我的模型关系。

## 实用程序

```
<?php
class Model_Utility extends ORM {
    protected $_has_one = array(
        'type' => array(
            'model' => 'type',
            'foreign_key' => 'type_id',
        ),
    ); 
```

### 表结构

```
+---------------+--------------+------+-----+---------+----------------+
| Field         | Type         | Null | Key | Default | Extra          |
+---------------+--------------+------+-----+---------+----------------+
| id            | int(11)      | NO   | PRI | NULL    | auto_increment |
| utility_name  | varchar(255) | NO   |     | NULL    |                |
| type_id       | int(11)      | NO   |     | NULL    |                |
| contact_name  | varchar(255) | NO   |     | NULL    |                |
| contact_email | varchar(255) | NO   |     | NULL    |                |
| contact_phone | varchar(255) | NO   |     | NULL    |                |
+---------------+--------------+------+-----+---------+----------------+ 
```

## 类型

```
class Model_Type extends ORM {
    protected $_belongs_to = array(
        'utility' => array(
        )
    ); 
```

### 表结构

```
+---------+--------------+------+-----+---------+----------------+
| Field   | Type         | Null | Key | Default | Extra          |
+---------+--------------+------+-----+---------+----------------+
| type_id | int(11)      | NO   | PRI | NULL    | auto_increment |
| type    | varchar(255) | NO   |     | NULL    |                |
+---------+--------------+------+-----+---------+----------------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T07:38:36.310

实用程序`belongs_to`类型（`utilities`有一个`type_id`键）和类型`has_many`实用程序。

PS。您还需要为`types`表（`$_primary_key`属性）定义一个 PK 名称。

# python - 我可以使用变量字符串来引用列表吗？

> ID：11585921
> 
> 赞同：3
> 
> 时间：2012-07-20T19:38:16.143
> 
> 标签：python, arrays

我有一个字典中的股票价格列表和它们的值列表。我想浏览列表以获取每天股票的价值，但是当我使用变量访问数据时，我无法解析列表中的位置。

这是一个例子：

```
goog = [12,132,124,234,234]
msft = [432,23,234,54,23]

num_days = 5
stocks_i_own = {'goog':50, 'msft':50}

for days in range(0,num_days):
    for stock in stocks_i_own:
        print days, stock, stocks_i_own[stock]
        print stock[days] #prints just 'g' not the value on day0
        print 'vaue on ', days, ' is ', stock[days] *  stocks_i_own[stock] 
```

问题是当我`stock[days]`用来获取数据时。我知道 stock 有正确的值（'goog' 或 'msft'），days 有正确的值（范围为 0-4），但是当它们一起使用时，我没有从列表中获取数据，而是从关于这个词本身。这是有道理的，因为类似：

```
name = 'google'
name[0] 
```

将返回 g（在我的情况下它正在执行）但是 python 有没有办法不看到我作为字符串提供的内容，而是对列表的引用？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-20T19:42:56.280

为什么不将当前列表存储为字典呢？

代替：

```
goog = [12, 132, 124, 234, 234]
msft = [432, 23, 234, 54, 23] 
```

利用：

```
stock_vals = { 'goog': [12, 132, 124, 234, 234], 'msft': [432, 23, 234, 54, 23] } 
```

现在您可以使用以下方法检索它们：

```
stock_vals[stock_name][day_index] 
```

其中 stock_name 是 的一个元素，`{'goog', 'msft', ...}`而 day_index 是 的一个元素`[0, 6]`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-20T19:42:57.407

将每日值移动到字典中：

```
stock_values = { 'goog': [12,132,124,234,234],
                 'msft': [432,23,234,54,23] } 
```

然后像这样查找它们：

```
stock_values[ stock ][ days ] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T19:43:00.053

[将字符串转换为预先存在的变量名称](https://stackoverflow.com/questions/295058/convert-string-to-preexisting-variable-names)- 您可以这样做，但不建议这样做。最好将 goog 和 msft 存储在字典中，其中键是字符串，值是列表。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-20T21:26:43.633

您遇到的问题是因为您将股票名称用作字符串的值和脚本中变量的名称。以这种方式做事存在许多（其他）问题，但这里有一个简单的解决方法：

```
goog = [12,132,124,234,234]
msft = [432,23,234,54,23]

num_days = 5
stocks_i_own = {'goog':50, 'msft':50}

for day in range(num_days):
    for stock in stocks_i_own:
        print day, stock, stocks_i_own[stock]
        stock_prices = eval(stock) # get list of prices with this stock's name
        print stock_prices[day]
        print 'value on ', day, ' is ', stock_prices[day] *  stocks_i_own[stock]
        print 
```

`stock`这通过 Python 的内置函数将给定字符串值的字符串名称转换为同名的当前变量的值，从而使事情起作用`eval()`。此函数以与 Python 解释器相同的方式评估它在字符串参数中传递的表达式并返回结果值。在这种情况下，表达式只是一个变量的名称，因此`stock_prices`只是成为 the`goog`或`msft`变量的值的另一个名称。

一个稍微好一点的方法是创建另一个类似于`stocks_i_own`包含每个相应命名股票的每日价格列表的字典。这样，您将能够使用相同的键（`stock`变量中保存的股票的字符串名称）为每一个索引，以检索相应的数据。这是我的建议：

```
num_days = 5
stocks_i_own = {'goog':50, 'msft':50}
stock_prices = {'goog': [12,132,124,234,234],
                'msft': [432,23,234,54,23]}

for day in range(num_days):
    for stock in stocks_i_own:
        print day, stock, stocks_i_own[stock]
        daily_prices = stock_prices[stock]
        print daily_prices[day]
        print 'value on ', day, ' is ', daily_prices[day] *  stocks_i_own[stock]
        print 
```

可以使用更长的表达式代替单独的`daily_prices`变量，但可能不那么容易理解。`stock_prices[stock][day]`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-20T20:05:06.220

只是为了好奇：

```
#!/usr/bin/env python
goog = [12,132,124,234,234]
msft = [432,23,234,54,23]

num_days = 5
stocks_i_own = {'goog':50, 'msft':50}

for days in range(0,num_days):
    for stock_name in stocks_i_own: #simmilar stocks_i_own.keys()
    globals_bak = globals()
    for var_name, var_value in globals_bak.items():
        if var_name == stock_name:
            studied_stock = var_value
                print days, stock_name, studied_stock
                print studied_stock[days] #prints just 'g' not the value on day0
                print 'vaue on ', days, ' is ', studied_stock[days] *  stocks_i_own[stock_name] 
```

我相信这会做你想做的事，但我肯定**会把它们放在字典里！！**. （我只是将其发布为您可以使用 Python 做什么的示例，这并不意味着您应该这样做）

内置函数`globals()`返回一个字典，其中包含当前模块中定义的全局值（查看：[globals](http://docs.python.org/library/functions.html#globals)）

另外，这部分有一个问题：

```
for stock in stocks_i_own:
    #[...]
    print stock[days] #prints just 'g' not the value on day0 
```

是因为当您将字典作为 时`for x in dict()`，`x`获取键的值（`for x in {}`就像说`for x in {}.keys()`）所以在您的情况下，您将获得字符串“ *goog* ”和字符串“ *msft* ”（不是其中包含的值）并且您重新走线。

你或多或少这样做：

```
>>> a="goog"
>>> for i in range(0,5):
...     print a[i]
... 
g
o
o
g
Traceback (most recent call last):
  File "<stdin>", line 2, in <module>
IndexError: string index out of range 
```

Pyhton 是您绝对应该听本叔叔的语言之一......

> 拥有权利的同时也被赋予了重大的责任

**:-)**

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-20T19:43:07.327

实际上 Stocks_i_own 是一本字典

利用：

```
for days in range(0,num_days):
    for stock, value in stocks_i_own.items():
        print days, stock, value
        print value[days] #prints just 'g' not the value on day0
        print 'vaue on ', days, ' is ', stock[days] *  stocks_i_own[stock] 
```

# ubuntu - Ubuntu 在进程执行期间将信息传递到文本文件

> ID：11585930
> 
> 赞同：0
> 
> 时间：2012-07-20T19:39:00.047
> 
> 标签：ubuntu

我的问题是我有一个函数调用它 function1 无限期运行。该函数本身每 1 秒回显一次“你好”。使用命令：

```
function1 >> temp.txt 
```

如果我要查看文件 temp.txt 每隔 1 秒，我应该会看到一个带有“hello”的新行。然而，发生的事情是该函数在完成运行之前不会写入文件。因此，如果我要杀死该函数，则不会写入任何内容。有谁知道在这种情况下我可以做些什么，基本上会动态更新 temp.txt？

我有一个python脚本设置如下：

```
while [1>0]:
   print "hello"
   time.sleep(1) 
```

因此，这将始终运行。现在我在 bash 脚本中调用它

```
python pythonscript.py >> temp.txt 
```

如果我`kill`在这个过程中没有记录任何数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T23:51:52.807

您将要在每次打印后刷新缓冲区。

```
import time
import sys

while [1>0]:
    print "hello"
    sys.stdout.flush()
    time.sleep(1) 
```

这也适用于其他操作系统。

# rdf - 在构建语义 Web 应用程序时，OWL 是如何实际使用的？

> ID：11585932
> 
> 赞同：14
> 
> 时间：2012-07-20T19:39:04.900
> 
> 标签：rdf, owl, triplestore

我一直在阅读诸如 RDF 和 OWL 之类的语义 Web 技术，并且对在我现有的关系数据库之上构建 RDF/三重存储语义数据库的可能性很感兴趣。这只是一个研发活动，看看我能做什么。

我喜欢[OWLIM](http://www.ontotext.com/owlim)的外观，但有些基础知识让我失望。究竟是如何构建并使用 OWL 本体的？[您是否使用Protege](http://protege.stanford.edu/)之类的东西构建它，然后将其导入您的存储库？或者本体是你开发的与 repo 通信的软件的副产品？

这是一个新手问题，但我只是不确定 OWL 在什么地方适合事物的大顺序......如果我没有四处寻找指导，我不会问这个问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-23T10:57:43.617

我不认为您*必须*使用[OWL](http://www.w3.org/TR/owl2-overview/)来构建应用程序的特定方式。见鬼，你甚至不需要使用它来构建一个 semweb 应用程序。

一般来说，我认为人们倾向于使用 OWL 的方式有几种。我认为主要之一是推理。[他们使用OWL2 配置文件](http://www.w3.org/TR/owl2-profiles/)之一定义对其应用程序重要的概念，然后使用[推理](http://en.wikipedia.org/wiki/Reasoner)器根据其本体推断新知识。现在甚至有一些工作将 OWL 本体用作完整性约束的模式。

在其他情况下，人们将其用作文档工件，以便能够概述其数据中的内容，但他们不会更正式地使用它。

两者之间有一些零碎的用例，[RDF 模式](http://www.w3.org/TR/rdf-schema/)也有类似的用途，可以像 OWL 本体一样使用，只是具有较低级别的表达性或类似[SKOS](http://www.w3.org/2004/02/skos/)的东西，可用于在应用程序中简单地定义分类法没有任何形式的表现力。

[启动 Protege](http://protege.stanford.edu/)是一个好的开始。这将让您探索构建本体的一些基础知识，并且大多数推理器都可以作为插件使用，因此您还可以探索如何构建本体以及可以得到什么样的推理。

一旦你有了一个本体，如果你想将它用于文档以外的东西，即推理，你必须将它加载到推理器（[Pellet](http://www.racer-systems.com/)、[Fact++](http://owl.man.ac.uk/factplusplus/)、[RacerPro](http://www.racer-systems.com/)、[HermiT](http://hermit-reasoner.com/)）或执行 OWL 推理的数据库（[Stardog](http://stardog.com)、[猫头鹰](http://www.ontotext.com/owlim)）。如果您不担心推理，那么您可以将其放入任何三元存储中，通过[Sesame](http://openrdf.org)或[Jena](http://jena.sourceforge.com)访问它（如果您使用的是 Java），仍然可以通过[SPARQL](http://www.w3.org/TR/rdf-sparql-query/)查询明确的事实。

所以我想简短的回答是没有正确的方法来使用 OWL，它被用于各种不同的能力。您可能会觉得有趣的是 W3C 保留了一个带有[语义 Web 应用程序列表的](http://www.w3.org/2001/sw/sweo/public/UseCases/)页面。这些案例研究讨论了公司遇到的问题以及他们如何使用语义技术解决这些问题。您可以阅读其中的一些内容，以更好地了解各个行业的人们如何利用该技术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T20:52:09.693

有许多使用关系数据库作为后端的三元存储。

查看[Apache Jena](http://jena.apache.org/)和[openrdf Sesame](http://www.openrdf.org/)以获得同时具有 rdbms 和“本机”（纯三元组）后端的三元组。

此外，我强烈建议查看[D2RQ](http://d2rq.org/)，它通过三重存储覆盖访问现有关系存储中的数据。

有更长的列表，但这些都是很好的起点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-22T04:54:54.200

是的，您可以在 Protege 中设计您的本体，然后将其导入您的 Triple Store。如果您的 Triple Store 支持推理并且您启用了它，您的 Sparql 查询将产生不同的结果。

例如，您可以将“related-to”定义为“married-to”、“child-of”、“parent-of”和“sibling-of”的超属性。然后你可以询问所有“相关”的人。

开始体验独立的三联店以了解这项技术。将与 RDB 的接口放在一边，直到您对基础知识感到满意为止。

# opencl - 如何避免在 OpenCL 中回读

> ID：11585934
> 
> 赞同：3
> 
> 时间：2012-07-20T19:39:08.607
> 
> 标签：opencl

我正在用 OpenCL 实现一个算法。我将在 C++ 中循环多次，并且每次都调用同一个 OpenCL 内核。内核将生成下一次迭代的输入数据和这些数据的数量。目前，我在每个循环中读回这个数字有两种用途：

1.  我使用这个数字来决定下一个循环需要多少工作项；和
2.  我使用这个数字来决定何时退出循环（当数字为 0 时）。

我发现阅读花费了循环的大部分时间。有什么办法可以避免吗？

一般来说，如果你需要重复调​​用一个内核，并且退出条件依赖于内核生成的结果（不是固定数量的循环），你如何高效地做到这一点？有没有像 OpenGL 中的遮挡查询这样的东西，你可以只做一些查询而不是从 GPU 读回？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T20:16:12.257

从 GPU 内核读回一个数字总是需要 10s - 1000s 微秒或更长时间。

如果控制数一直在减少，您可以保留在全局内存中，并根据全局 id 对其进行测试，并确定内核在每次迭代时是否正常工作。使用全局内存屏障来同步所有线程......

```
kernel void x(global int * the_number, constant int max_iterations, ... )
{
    int index = get_global_id(0);
    int count = 0;    // stops an infinite loop

     while( index  < the_number[0] && count < max_iterations )
     {
      count++;
      // loop code follows

      ....

      // Use one thread decide what to do next 
      if ( index  == 0 )
      {
          the_number[0] = ... next value
      }

      barrier( CLK_GLOBAL_MEM_FENCE ); //  Barrier to sync threads
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T19:42:59.310

你有几个选择：

1.  如果可能，您可以简单地将循环和条件移动到内核中吗？根据当前迭代的输入，使用附加工作项不执行任何操作的方案。
2.  如果 1\. 不可能，我建议您将“决策”内核生成的数据存储在缓冲区中，并使用该缓冲区“指导”其他内核。

这两个选项都允许您跳过回读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-23T02:23:08.060

我刚刚完成了一些我们必须解决这个确切问题的研究！

我们发现了几件事：

1.  使用两个（或更多）缓冲区！让内核的第一次迭代对 b1 中的数据进行操作，然后对 b2 进行下一次迭代，然后再对 b1 进行操作。在每次内核调用之间，读回另一个缓冲区的结果并检查是否该停止迭代。当内核花费的时间比读取时间长时效果最好。使用分析工具确保您没有等待读取（如果是，请增加缓冲区的数量）。

2.  超拍！为每个内核添加一个完成检查，并在将数据复制回来之前调用它几次（100 秒）。如果你的内核是低成本的，这可以很好地工作。

# php - php：即时实例化类

> ID：11585940
> 
> 赞同：0
> 
> 时间：2012-07-20T19:39:29.033
> 
> 标签：php

是否可以从字符串实例化一个类，而无需在之前声明另一个变量？

一般都是写完

```
$className = 'myClass'
$instance  = new $className(); 
```

但它可能会很方便，例如

```
$instance  = new ${'className'}(); 
```

目的是在不使用额外变量的情况下在循环内（在条件下）创建对象......

**编辑：** $className 是动态的，上面是硬编码来解释情况的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T10:44:40.430

请参阅[工厂模式](https://en.wikipedia.org/wiki/Factory_method_pattern#PHP)。

```
class Foo {
    static function factory($class, array $args = null) {
        return new $class($args);
    }
}

// class factoring; returns a new instance of requested class ($className)
Foo::factory($className); 
```

如果你想设置一些类属性，我添加了可选参数数组。

```
// pass some values for class constructor
Foo::factory($className, array('arg1' => 1, 'arg2' => 2, 'args3' => 3)); 
```

此外，您可以构建“流体”接口，以便在使用该模式时可以“链接”方法：

```
Foo::factory($className)->method1()->method2(array('param' => 'value'))->etc(); 
```

其中`method1()`，`method2()`必须`return $this`（对象本身）在一行中链接多个方法调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T19:45:54.207

这是一个额外的变量，它真的有很大的不同吗？答案是除非你使用 eval （它带有安全问题），否则不可能比你的第一个例子更短。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-20T19:59:30.030

您可以创建一个将类名作为参数的工厂函数（或类/方法），然后使用生成字符串的动态 PHP 代码的结果调用它。您可能会认为它更清洁，但它不会为您节省任何内存或速度。

```
class foo { }
function factory($class) { return new $class(); }

foreach (...) {
    $instance = factory(<some code that returns the string 'foo'>);
} 
```

# c# - 你能解释一下这个错误吗？

> ID：11585941
> 
> 赞同：1
> 
> 时间：2012-07-20T19:39:36.237
> 
> 标签：c#, list

```
Cannot implicitly convert type 'System.Collections.Generic.List<string>'
to 'System.Collections.Generic.List<Parts>' 
```

以下是生成此错误的代码。我很确定我在做一些愚蠢的事情。

```
public class Parts
{

public string computername { get; set; }

public List<Parts> GetParts()
{
    List<string> lst = new List<string>(); 
   //The object that will physically connect to the database 
   using(SqlConnection cnx = new SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["request"].ConnectionString))  
   { 
            //The SQL you want to execute 
       SqlCommand cmd = new SqlCommand("SELECT * FROM REQUESTS", cnx); 
           //Open the connection to the database 
           cnx.Open(); 
           //execute your command 
           SqlDataReader dataReader = cmd.ExecuteReader(); 
           { 
             //Loop through your results 
             while(dataReader.Read()) 
             { 
                lst.Add(Convert.ToString(dataReader["titlename"])); 
             } 
           } 
   } 
   return lst; 
} 

} 
```

错误一直指向这一行：

```
 return lst; 
```

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-20T19:40:43.410

`List<string>`当方法返回类型为 时，您将返回 a `List<Part>`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-20T19:41:00.490

您的方法想要返回 a `List<Parts>`，但您正试图返回 a`List<string>`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-20T19:41:23.767

```
List<string> is not the same as List<Parts> 
```

您正在尝试返回错误类型的列表。您的方法声明：

```
public List<Parts> GetParts() 
```

指定您返回：

```
List<Parts> 
```

但是，您要返回：

```
List<string> 
```

要更正，您应该在函数 a 中创建列表`List<Parts>`并添加`Parts`到其中。或者将返回类型更改为`List<string>`

一个简单的错误，我自己犯了几次。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-20T19:41:27.090

发生错误是因为该方法应返回 a`List<Parts>`而您尝试返回 a`List<string>`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-20T19:41:46.183

您正在尝试从返回`List<string>`的函数中返回`List<Parts>`.

函数返回值的类型和你返回的类型需要匹配。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-20T19:44:03.203

方法 GetParts() 的返回类型是`List<Parts>`，但在函数中，您尝试返回一个`List<string>`

试试这个：

```
public List<Parts> GetParts()
{
    List<Parts> lst = new List<Parts>(); 
    using (SqlConnection cnx = new SqlConnection(System.Configuration.ConfigurationManager.ConnectionStrings["request"].ConnectionString))
    {
        SqlCommand cmd = new SqlCommand("SELECT * FROM REQUESTS", cnx);
        cnx.Open();
        Parts parts = null; 
        SqlDataReader dataReader = cmd.ExecuteReader();
        { 
            while (dataReader.Read())
            {
                parts = new Parts();
                parts.computername = dataReader["titlename"].ToString();
                lst.Add(parts);
            }
        }
    }
    return lst;
} 

public void SomeMethod(List<Parts> parts)
{
    List<string> title = new List<string>();
    foreach(var item in parts)
    {
        title.Add(item.titlename);
    }
    this.ddlPartsTitle.Datasource = title;
    this.ddlPartsTitle.DataBind();
}

public YourClassName()
{
    this.SomeMethod(this.GetParts());
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-20T19:55:44.510

您可以执行 SELECT 将字符串列表转换为部分列表。

假设你有一个像这样的零件类

```
class Parts{
    string TitleName { get; set; }
    public Parts(){ }

} 
```

你可以做`return lst.Select( str => new Parts(){ TitleName = str });`

# java - 重构霍夫曼树进行解码

> ID：11585944
> 
> 赞同：0
> 
> 时间：2012-07-20T19:39:43.863
> 
> 标签：java, algorithm, binary-tree, huffman-code

我有使用霍夫曼压缩的压缩字符串数据的编码，即“需要更多的钱”

编码

```
\n 0110
   1011
d  100
e  11
m  001
n  000
o  010
r  0111
y  1010
**
001010011111101100101000011101010110001111100111000110 
```

我想在java中重建霍夫曼树来解码编码。这种解码的任何实现或示例。

我尝试并编写了完美的解决方案。

```
public class HuffmanTree {

    public Node root;

    public HuffmanTree(){
        this.root = new Node();
    }

    public void add(char data, String sequence){

        Node temp = this.root;
        int i = 0;
        for(i=0;i<sequence.length()-1;i++){

          if(sequence.charAt(i)=='0'){
                if(temp.left == null){
                    temp.left = new Node();
                    temp = temp.left;
                }
                else{
                   temp = (Node) temp.left;
                }
            }
            else
              if(sequence.charAt(i)=='1'){
                if(temp.right == null){
                    temp.right = new Node();
                    temp = temp.right;
                }
                else{
                    temp = (Node) temp.right;
                }
         }}

        if(sequence.charAt(i)=='0'){

            temp.left = new Node(data); 
           }
        else{
            temp.right = new Node(data); 

        }
        }

    public String getDecodedMessage(String encoding){

        String output = "";
        Node temp = this.root;
        for(int i = 0;i<encoding.length();i++){

            if(encoding.charAt(i) == '0'){
                temp = temp.left;

                if(temp.left == null && temp.right == null){
                    output+= temp.getData();
                    temp = this.root;
                }
            }
            else
            {
                temp = temp.right;
                if(temp.left == null && temp.right == null){
                    output+= temp.getData();
                    temp = this.root;  
                }

            }
        }
        return output;
    }
    // Traversal of reconstructed huffman tree for debugging.
    public void traversal(Node node){

        if(node == null)
              return;
        System.out.println(node);
        traversal(node.left);
        traversal(node.right);

    }

    }

class Node{

    Node left;
    Node right;
    char data;

    public Node(){

    }
    public Node(char data){
        this.data = data;
    }
    public void setData(char data){
        this.data = data;
    }
    public char getData(){
        return this.data;
    }
    @Override
    public String toString(){
       if(this.data == Character.UNASSIGNED){
           return "No Value";
       } 
       else
           return ""+this.data;
    }
} 
```

如果您在文本文件中有编码消息，则空格字符可能会导致任何问题，因此我也为此编写了代码。

```
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileWriter;
import java.io.IOException;
import java.util.Scanner;
import java.util.logging.Level;
import java.util.logging.Logger;

    public class Test {

       public static void main(String[] bscs){

           HuffmanTree tree = new HuffmanTree();

            String inputFile;
            String outputFile;

            Scanner kb = new Scanner(System.in);
            System.out.println("Please enter the name of the Input File");
            inputFile = kb.nextLine();

            File f = new File(inputFile);
                Scanner fr = null;
            try {
                fr = new Scanner(new File(inputFile));
                fr.nextLine();
                tree.add('\n', fr.nextLine().trim());
                String temp = fr.nextLine();
                if(temp.charAt(0)==' ' && temp.charAt(1)==' ')
                {
                    tree.add(' ', temp.trim());
                }
                else
                    tree.add(temp.charAt(0), temp.substring(1));
                while(fr.hasNext()){
                    temp = fr.nextLine();
                    if(temp.equals("**")){
                        break;
                    }
                    else
                        tree.add(temp.charAt(0), temp.substring(1));
                }
                FileWriter f0 = new FileWriter(new File("decoded.ou"));
                f0.write(tree.getDecodedMessage(fr.nextLine()));
                f0.close();

            } catch (Exception ex) {
               System.out.println(ex.getMessage());
            }

            }

    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-21T04:36:45.080

首先，您不需要重建霍夫曼树。您可以简单地线性搜索与下一组位匹配的代码。既然是前缀码，就有唯一的解决办法。所以第一场比赛是正确的比赛。

如果你想制作一棵树，只需从给你两个选择的第一位开始。0 左，1 右。这两个都不是代码，所以都在第二位上分支，同样的事情。四个末端之一在 e 的代码 11 处。现在将剩余的三个分支到第三位。六个中的四个以代码结尾。剩下的两个分支。这四个都以代码结尾，您就完成了。现在您可以使用树进行解码，一次查看一位，直到获得代码。发出代码，然后从树的根部开始下一位。

# xcode - 如何从 xcode 4 PageViewController 中消除棕色框

> ID：11585947
> 
> 赞同：0
> 
> 时间：2012-07-20T19:39:48.917
> 
> 标签：xcode, ipad, xcode4.2

我对 Xcode 很陌生，并且已经设法使用 xcode 4.2 模板中的构建组合了一个基于分页的应用程序。我遇到了一些问题，但现在最紧迫的问题是 iPad 版应用程序周围存在棕色框架。iPhone 版本完美地显示了图像的 NSArray，但 iPad 版本坚持使用粗棕色边框，我似乎无法弄清楚如何消除。我知道它来自根控制器，但不知道如何通过 IB 接口或通过编码接口来操作它。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T23:04:30.940

转到您的`RootViewController.m`文件。代码中，viewDidLoad方法下，将默认`pageViewRect`改为`0.0, 0.0.`
ie

```
pageViewRect = CGRectInset(pageViewRect, 0.0, 0.0); 
```

# jquery - 引导弹出框/工具提示语法

> ID：11585948
> 
> 赞同：1
> 
> 时间：2012-07-20T19:39:53.690
> 
> 标签：jquery, twitter-bootstrap, tooltip, popover

有人可以解释一下这行jquery在工具提示中的含义（由popover使用）

```
inside = /in/.test(placement)
         ^^^^^^^^^ 
```

这是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T19:40:51.180

这是一个正则表达式测试，它检查字符串 "in" 是否在`placement`. 不过这里好像有点浪费。。。

# c - void函数中二维数组上的指针

> ID：11585953
> 
> 赞同：0
> 
> 时间：2012-07-20T19:40:07.390
> 
> 标签：c

好吧，我想通过一个 void 函数来启动我的二维数组。但我得到一个分段错误......

那是我的代码：

```
 #include <stdio.h>
    #include <stdlib.h>
    #include <string.h>

    void groupeetchoixgen(int*** choixGEN);

    void main(int args, char **argv)
    {
        int** choixGEN;
        int i,j;
        choixGEN=(int**) malloc (sizeof(int*)*2);  
        for (i=0; i<3; i++)
        {
            choixGEN[i]=(int*) malloc (sizeof(int)*3);
        } 
        groupeetchoixgen(&choixGEN);
    }

        void groupeetchoixgen(int*** choixGEN)
    {
        (*(choixGEN)[1])[0]=1;
    } 
```

我认为问题是 (*(choixGEN)[1])[0]=1; 但我不知道为什么！

谢谢你的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T19:44:58.337

在这条线上：

```
 choixGEN=(int**) malloc (sizeof(int*)*2); 
```

您只为 2 秒分配空间，但您访问循环`int*`中的第三个元素。`for`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T19:44:45.233

您只为两个分配内存，`(int*)`但您尝试引用`choixGEN[0],choixGEN[1],choixGEN[2]`哪个是 3

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T00:07:58.550

一般来说，`SegFault`in`C`是指：

1.  您正在访问内存中未分配的位置。
2.  您正在使用悬空指针访问内存位置

所以，很可能，你的问题出在这一行：

```
choixGEN=(int**) malloc (sizeof(int*)*2); 
```

您声明了一个`int*** choixGEN`但仅分配的内存`(int**)`

# r - ggplot / R中每个方面的可变轴标签格式化程序

> ID：11585954
> 
> 赞同：25
> 
> 时间：2012-07-20T19:40:19.693
> 
> 标签：r, facets, ggplot2

我有一个数据框随着时间的推移捕获几个度量值，我想可视化一个 3x1 方面。但是，每个度量都包含不同的单位/比例，这些单位/比例可以从自定义转换和标签方案中受益。

所以，我的问题是：**如果不同方面的单位和比例不同，我如何为一个方面中的特定轴指定自定义格式化程序或转换（即 log10）？**

例如，假设我有数据：

```
df = data.frame(dollars=10^rlnorm(50,0,1), counts=rpois(50, 100))
melted.df = melt(df, measure.var=c("dollars", "counts")) 
```

如何设置一个 2x1 刻面来显示美元并使用`labels=dollars`数据`scale_y_continuous(trans = "log10", ...)`计算索引`df$dollars`？

谢谢！

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-07-20T20:20:33.167

正如您所发现的那样，没有一个简单的解决方案，但它出现了很多。由于这种事情经常被问到，我发现解释*为什么*这很难，并提出一个潜在的解决方案很有帮助。

我的经验是，使用**ggplot2**或**lattice**图形的人从根本上误解了刻面（或格子，在**lattice**中）的目的。开发此功能时考虑到了一个非常具体的想法：跨*共享相同规模的*多个组的数据可视化。它来自于 Tufte 和其他人所拥护的称为小倍数原理的东西。

视觉设计专家倾向于避免将具有不同比例的面板彼此相邻放置，因为它充其量可能会产生误导。（我不是在这里骂你，只是解释理由......）

但是，当然，一旦你公开了这个伟大的工具，你永远不知道人们将如何使用它。所以它被拉长了：要求能够允许比例因面板而异，并为每个面板分别设置绘图的各个方面。因此，**ggplot2**中的刻面已远远超出其最初的意图。

这样做的一个后果是，由于该功能的原始设计意图，某些事情很难实现。这很可能就是这样一个例子。

好的，足够的解释。这是我的解决方案。

这里的诀窍是要认识到您*没有绘制共享比例的图形*。对我来说，这意味着你根本不应该考虑使用刻面。相反，分别制作每个图，并将它们排列在一个图中：

```
library(gridExtra)

p1 <- ggplot(subset(melted.df,variable == 'dollars'),
                aes(x = value)) + 
            facet_wrap(~variable) + 
            geom_density() + 
            scale_x_log10(labels = dollar_format())

p2 <- ggplot(subset(melted.df,variable == 'counts'),
                aes(x = value)) + 
            facet_wrap(~variable) + 
            geom_density()

grid.arrange(p1,p2) 
```

![在此处输入图像描述](../Images/188de992505113865ae0e566d78c339d.png)

我刚刚猜到`geom_*`你想用什么，我敢肯定这不是你想要绘制的，但至少它说明了原理。

# cocoa - 为什么在 nib 中加载 nib 时会调用两次 awakeFromNib？

> ID：11585956
> 
> 赞同：3
> 
> 时间：2012-07-20T19:40:27.433
> 
> 标签：cocoa, interface, embed, builder, awakefromnib

我有两个笔尖：Parent.xib 和 Child.xib。

我在父笔尖中包含了子笔尖以简化绑定。我在 loadView 中以编程方式设置子视图。问题是，awakeFromNib 在 Child 的控制器中被调用了两次。

我想我明白为什么会这样。当 Parent 完成加载时，它会向其对象发送一个 awakeFromNib，并且由于 Child 是其 nib 的文件所有者，因此它也会在自身上调用 awakeFromNib。

我理解对了吗？我最初的印象是每个实例只应调用一次 awakeFromNib。我不应该将笔尖嵌入笔尖吗？

请参阅示例项目：[https ://github.com/panupan/AwakeFromNibTest](https://github.com/panupan/AwakeFromNibTest)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T23:09:11.343

在某些情况下，`awakeFromNib`每个实例可以多次调用，例如您设置的那个。另一种情况是加载多个 nib 对象的控制器。如果你真的想要，你可以解决这个问题，但更好的设计不是必须的。来自[NSNibAwaking 协议参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Protocols/NSNibAwaking_Protocol/Reference/Reference.html)：

> 建议您在 File's Owner 对象与其关联的 nib 文件之间保持一一对应的关系。使用相同的 File's Owner 对象加载两个 nib 文件会导致该对象的 awakeFromNib 方法被调用两次，这可能会导致某些数据结构以不希望的方式重新初始化。还建议您避免从 awakeFromNib 方法实现中加载其他 nib 文件。

在您的特定示例中，没有理由将一个 nib 文件嵌入到另一个文件中。您会遇到内存占用的缺点，即必须将它们都加载到内存中，而不方便将所有对象都放在一个 nib 文件中。您应该将它们拆分并使用`NSObjectController`nib 文件中的实例来处理它们之间的绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-13T22:22:25.520

即使我有两个不同的文件所有者，`awakeFromNib`仍然会被调用两次。

如果我有一个`NSWindowController`子类 (MyWindowController) 并且在它的 nib 中我有一个`ProjectController`对象，其中包含`awakeFromNib`从 nib 加载视图的对象，则视图的控制器将收到一个`awakeFromNib`调用，然后原始控制器将再次`ProjectController`接收`awakeFromNib`。

# gcc - 32 位构建在 64 位 CentOS 5 主机上

> ID：11585957
> 
> 赞同：4
> 
> 时间：2012-07-20T19:40:29.587
> 
> 标签：gcc, centos, 32bit-64bit, valgrind, yum

我正在尝试在 64 位主机（运行 CentOS 5.8）上构建 valgrind（3.7.0）。我需要使用 valgrind 来检查 32 位程序的性能（构建在 32 位主机上，我需要 32 位，因为程序需要在 32 位和 64 位主机上运行）。

问题是我的 64 位主机没有 gcc，所以我使用“sudo yum install gcc”和斯坦福大学的 repo 镜像安装了 gcc（这个 64 位主机的默认 repos 不可用，因此 yum 超时）。这使我能够构建 valgrind，并且它适用于本地内容（例如“valgrind ls -l”），但在尝试为我在另一台主机上构建的 32 位程序运行它时失败。我终于发现 valgrind 的配置脚本检测到我在主机上没有 32 位构建支持（通过运行“configure --enable-only32bit”报告“正在检查 32 位构建支持......没有”） .

那么如何获得对 gcc 等的 32 位支持呢？我尝试了“yum search gcc | grep i386”，然后安装了任何看起来像 32 位 C 的东西（“sudo yum install compat-glibc.i386 compat-libgcc-296.i386 compat-libstdc++-296.i386 compat-libstdc++-33\. i386 libgcc.i386 libstdc++.i386 libstdc++-devel.i386 libstdc++44-devel.i386 edac-utils.i386 edac-utils.x86_64 nspluginwrapper.i386") 但“configure --enable-only32bit”仍然报告不支持 32 位.

PS：yum.conf 看起来非常小，即没有排除。唯一奇怪的是“installonly_limit = 5”

好的，这是独家新闻，感谢[在编译 Nachos 源代码时出现错误“gnu/stubs-32.h：没有这样的文件或目录”](https://stackoverflow.com/questions/7412548/gnu-stubs-32-h-no-such-file-or-directory)

简短的回答是安装 glibc-devel.i386 （无论如何在 CentOS 5.8 上......对于不同的发行版，它有不同的名称，例如 glibc-devel.i686、libc6-dev-i386 等），可能除了其他软件包我在上面列出了（我没有卸载那些以查看 glibc-devel.i386 本身是否足够）。

通过检查配置脚本并看到它尝试使用“-m32”编译最小的 C 程序，我找到了要搜索的正确问题，如果失败，则配置脚本报告“不支持 32 位”。所以我创建了经典的 HelloWorld C 程序并编译它（“cc -m32 hello.c”）。这抱怨缺少头文件“gnu/stubs-32.h”。所以谷歌搜索“what package has gnu/stubs-32.h”把我带到了我上面引用的stackoverflow页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-12T11:11:21.327

尝试：

百胜安装 glibc-devel.i686

如果这不起作用，请检查此解决方案：[How to compile a 32-bit binary on a 64-bit linux machine with gcc/cmake](https://stackoverflow.com/questions/1272357/how-to-compile-a-32-bit-binary-on-a-64-bit-linux-machine-with-gcc-cmake)

# sql-server - 2列的SQL Server子查询优化

> ID：11585958
> 
> 赞同：0
> 
> 时间：2012-07-20T19:40:29.840
> 
> 标签：sql-server, join, foreign-keys

我有一个父表，其中有两个对子表的外键引用。我正在尝试提出最佳 TSQL（SQL Server 2008），它将子列“旋转”成一行。表结构和所需的结果集结构如下。完成这项工作的最佳方法是什么？

谢谢。

```
set nocount on
declare @parent table ( parentid int , parentword varchar(3) , childid int , childotherid int )
insert into @parent values ( 0 , 'a' , 1 , 3 )
insert into @parent values ( 1 , 'b' , 2 , 4 )

declare @child table ( childid int , childword varchar(3) )
insert into @child values ( 1 , 'ppp' )
insert into @child values ( 2 , 'qqq' )
insert into @child values ( 3 , 'rrr' )
insert into @child values ( 4 , 'sss' )

needed result set
a       ppp     rrr
b       qqq     sss 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T19:48:43.213

它不是旋转的。将子表与父表联接两次。请参阅我使用了左联接。如果父表中的子 ID 列都不为空。那么您也可以使用内部联接。

```
select p.parentword,c1.childword,c2.childword from @parent p
left join @child c1
on p.childid = c1.childid
left join @child c2
on p.childotherid = c2.childid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T00:12:16.813

尝试使用
select p.parentword,c.childword,c1.childword 作为 childotherword from @parent p
inner join @child c on p.childid = c.childid
inner join @child c1 on p.childotherid = c1.childid

# php - PHP 数据库调用

> ID：11585964
> 
> 赞同：0
> 
> 时间：2012-07-20T19:41:09.493
> 
> 标签：php, dynamic-data

我对 PHP 很陌生，正在努力寻找解决问题的最佳方法。在我的数据库中，我有一个字段“画家”。在画家中，我有“画家 A”、“画家 B”和“画家 C”。如果出现某些艺术作品，他们是展示画家 c 的一种方式吗？或者画家“B”，如果某个艺术作品出现了？我正在尝试了解动态执行此类操作的最佳方法。任何链接、代码或教程都会对我有很大帮助！提前非常感谢！

-麦克风

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T19:51:08.923

您将需要 3 张桌子。一个“Painters”表、一个“assoc”表和一个“Painting”表。

画家表包括：

*   ID
*   姓名
*   出生日期
*   电话
*   地址
*   废话
*   废话

画桌包括：

*   ID
*   姓名
*   创建日期
*   废话
*   废话
*   废话

关联表将它们链接起来......它看起来像：

*   ID
*   PAINTER_ID
*   PAINTING_ID

所以你可以说 SELECT PAINTING_ID FROM 'ASSOC' WHERE PAINTER_ID = '$Your_variable' 然后使用该结果集使用 foreach 遍历该数组。

在该 foreach 中：您将
SELECT * FROM PAINTINGS WHERE ID = Array['PAINTING_ID']。

那是一个基本的关联关系数据库。

您可以在 Google 上搜索更多信息，但这应该是您入门的基础知识

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T19:50:26.287

从阅读这些 W3 教程开始。

[http://www.w3schools.com/php/php_mysql_connect.asp](http://www.w3schools.com/php/php_mysql_connect.asp)

如果您像我一样需要视觉辅助，请观看本教程，如果没有这个人，我将不会对 PHP 有任何了解，而且我将无法创建自己的 CMS 软件，我在我的许多工作中都使用该软件客户。

出于某种原因，链接不会发布，所以谷歌“建立一个 cms php youtube”，然后点击第一个视频结果 :)

以后最好自己尝试一下，当你遇到问题时，在 Stack Overflow 上发帖，你的问题在这里有点含糊。

# couchdb - 是否可以创建一个 Couchbase 视图，在没有 reduce 功能的情况下对输出进行分组？

> ID：11585965
> 
> 赞同：3
> 
> 时间：2012-07-20T19:41:10.340
> 
> 标签：couchdb, couchbase

在 Couchbase 或 CouchDB 中，是否可以在没有显式 reduce 函数的情况下进行分组？在我的客户端代码中，我希望将数据提供给我，就像 reduce 接收它一样（假设所有映射器都用作输入，即使在 rereduce 期间也是如此）。使用`group=true`没有定义的 reduce 函数会给我错误：

```
$ curl http://127.0.0.1:8092/default/_design/testing1/_view/all?group=true
{"error":"query_parse_error",
 "reason":"Invalid URL parameter 'group' or 'group_level' for non-reduce view."} 
```

我可以添加身份减少功能：

```
reduce(keys,data) {return data;} 
```

但 Couchbase 抱怨说我实际上并没有减少任何东西：

```
{"rows":[], "errors":[
    {"from":"local","reason":"{<<"reduce_overflow_error">>,
        <<"Reduce output must shrink more rapidly: Current output: '...'
    }]} 
```

我肯定希望完全减少我的客户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T20:12:34.133

这不是技术限制，而是逻辑限制。如果不减少这些结果，就无法对结果进行逻辑分组。这类似于`GROUP BY`SQL 中的，除非您的 SQL 查询中还有某种聚合函数，否则您不能使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T19:59:37.000

使用“identity reduce”是 Couch 风格的 map reduce 中的一个常见陷阱。Couch reduce 系统专为 reduce 功能而设计，看起来更像：

```
function(keys, values) {
   return values.length;
} 
```

身份归约最终将在非索引数据结构中存储映射行的多个副本。

听起来您想要的是唯一的键集，无论减少值如何。在这种情况下，我会使用 _count reduce 函数，因为它很高效并且可以在任何基础数据上运行。

# sql - 相当于 IN 运算符的 SQL 等效于 AND 而不是 OR？

> ID：11585967
> 
> 赞同：0
> 
> 时间：2012-07-20T19:41:13.087
> 
> 标签：sql, inner-join, 3nf

我将简单地展示我正在尝试做的事情，而不是描述。3NF 中的 3 个表。product_badges 是连接表。（exists 子查询是必要的。）

```
SELECT * FROM shop_products WHERE EXISTS ( // this line cannot change
    SELECT * FROM product_badges as pb 
    WHERE pb.product_id=shop_products.id
    AND pb.badge_id IN (1,2,3,4)
); 
```

现在这将返回所有具有 1 OR 2 OR 3 OR 4 的 badge_id 的产品。我想要的是**只获得满足所有这些值的产品**。我试图做 pb.badge_id=1 和 pb.badge_id=2 等，但这没有返回任何东西——这对我来说很有意义。我还尝试使用 INTERSECT 进行多个查询，但这导致了错误。我猜多个查询是关键，但 UNION 与 IN 基本相同，我不确定在这种情况下如何使用 JOIN。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T19:50:47.883

请尝试以下操作（假设正好有 4 个不同的 bagde_id）：

```
SELECT * FROM shop_products WHERE EXISTS ( // this line cannot change
    SELECT pb.product_id, count(distinct pb.bagde_id) FROM product_badges as pb 
    WHERE pb.product_id=shop_products.id
    AND pb.badge_id IN (1,2,3,4)
    GROUP BY pb.product_id
    HAVING count(distinct pb.bagde_id) = 4
); 
```

# php - PHP：标准输出与 php://STDOUT

> ID：11585968
> 
> 赞同：3
> 
> 时间：2012-07-20T19:41:14.207
> 
> 标签：php, io, protocols, wrapper

**PHP中的STDOUT**和**php://STDOUT**有什么区别？

```
fwrite(STDOUT, ...); 
```

对比

```
$StdOut = fopen('php://stdout', 'w');
fwrite($StdOut, ...); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T19:42:54.350

前者是文件描述符 1，第二个是新 FD（例如 3）中 FD1 的副本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T20:30:04.820

`STDOUT`仅在 CLI sapi 中可用

# sql - 获取更大组的百分比

> ID：11585969
> 
> 赞同：0
> 
> 时间：2012-07-20T19:41:16.077
> 
> 标签：sql, sql-server-2008, tsql

下面的查询有点难看，所以我希望它的间距足够好以使其可读。如果他们来自某个地区，该查询会查找访问给定医院的人的百分比。例如，如果 X 县有 100 人居住，20 人去医院 A，80 人去医院 B，则查询输出。这种事情到底是怎么做到的？让我知道是否需要记录查询或我可以做的任何事情以使其更清晰。

```
hospital A 20
hospital B 80 
```

下面的查询与我想要的完全一样，但它让我思考：如何对我表中的每个县都这样做？

```
select  hospitalname, round(cast(counts as float)/cast(fayettestrokepop as float)*100,2)as percentSeen
from
(

SELECT     tblHospitals.hospitalname, COUNT(tblHospitals.hospitalname) AS counts, tblStateCounties_1.countyName,
                          (SELECT     COUNT(*) AS Expr1
                            FROM          Patient INNER JOIN
                                                   tblStateCounties ON Patient.stateCode = tblStateCounties.stateCode AND Patient.countyCode = tblStateCounties.countyCode
                            WHERE      (tblStateCounties.stateCode = '21') AND (tblStateCounties.countyName = 'fayette')) AS fayetteStrokePop
FROM         Patient AS Patient_1 INNER JOIN
                      tblHospitals ON Patient_1.hospitalnpi = tblHospitals.hospitalnpi INNER JOIN
                      tblStateCounties AS tblStateCounties_1 ON Patient_1.stateCode = tblStateCounties_1.stateCode AND Patient_1.countyCode = tblStateCounties_1.countyCode
WHERE     (tblStateCounties_1.stateCode = '21') AND (tblStateCounties_1.countyName = 'fayette')
GROUP BY tblHospitals.hospitalname, tblStateCounties_1.countyName

) as t 
order by percentSeen desc 
```

编辑：示例数据 下面的示例数据没有最外层的查询（`as t order by`部分）。

countsInTheCounty 列是 'tblStateCounties_1.countyName' 之后的 (select count(*)..) 部分

```
hospitalName      hospitalCounts      countyName      countsInTheCounty
st. james          23                 X               300
st. jude           40                 X               300 
```

现在有了外部查询，我们会得到

```
st james  0.076 (23/300)
st. jude  0.1333 (40/300) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T21:04:51.360

这是我的猜测。您必须针对您的数据进行测试或提供正确的 DDL + 示例数据。

```
;WITH totalCounts AS 
(
  SELECT StateCode, countyCode, COUNT(*) AS totalcount
  FROM dbo.Patient GROUP BY StateCode, countyCode
)
SELECT 
  h.hospitalName, 
  hospitalCounts = COUNT(p.hospitalnpi), 
  c.countyName, 
  countsInTheCounty = tc.totalCount, 
  percentseen = CONVERT(DECIMAL(5,2), COUNT(p.hospitalnpi)*100.0/tc.totalCount)
FROM 
  dbo.Patient AS p
INNER JOIN 
  dbo.tblHospitals AS h
  ON p.hospitalnpi = h.hospitalnpi
INNER JOIN 
  totalCounts AS tc
  ON p.StateCode = tc.StateCode
  AND p.countyCode = tc.countyCode
INNER JOIN 
  dbo.tblStateCounties AS c
  ON tc.StateCode = c.stateCode
  AND tc.countyCode = c.countyCode
GROUP BY 
  h.hospitalname, 
  c.countyName, 
  tc.totalcount
ORDER BY
  c.countyName,
  percentseen DESC; 
```

# actionscript-3 - 自定义液体组件组合框颜色

> ID：11585979
> 
> 赞同：0
> 
> 时间：2012-07-20T19:41:53.697
> 
> 标签：actionscript-3, flash

我正在使用[Liquid Components](http://www.bytearray.org/?p=137)中的 ComboBox，并且我想自定义显示为项目背景的颜色。我可以看到组件有不同的颜色，但我不知道如何使用动作脚本在颜色之间切换。 ![在此处输入图像描述](../Images/f93d9037107f6fa4ec0784c3f8e5c001.png)

# git - MonoTouch 项目/解决方案中的 .gitIgnore 中应包含哪些文件？

> ID：11585980
> 
> 赞同：2
> 
> 时间：2012-07-20T19:42:10.077
> 
> 标签：git, xamarin.ios

我是 MonoTouch 和 git 的新手。我用我的整个解决方案创建了一个存储库，并注意到其中一些文件具有我的用户特定设置，而其他文件具有 Apple 配置密钥。这些应该从回购中排除吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T22:38:31.423

这应该涵盖您不需要的大部分内容：

```
bin
obj  
*.user*  
*.pidb 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-23T15:56:06.133

我认为罗尔夫的回应将处理大多数情况。从头开始时，[GitHub 的 Gitignore 存储库](https://github.com/github/gitignore)是一个不错的起点。

假设您在 Mac 上工作，您可能还会偶然发现 OSX 特定的文件，例如 .DS_Store。[您可以在全局](https://github.com/github/gitignore/tree/master/Global)文件夹下找到有关处理这些特定于环境的文件的指南（请参阅[自述文件](https://github.com/github/gitignore/blob/master/Global/README.md)）。

或者您可以将多个相关文件的内容附加到存储库的 .gitignore 中。我建议看：

*   [CSharp.gitignore](https://github.com/github/gitignore/blob/master/CSharp.gitignore)
*   [全球/MonoDevelop.gitignore](https://github.com/github/gitignore/blob/master/Global/MonoDevelop.gitignore)
*   [全球/OSX.gitignore](https://github.com/github/gitignore/blob/master/Global/OSX.gitignore)

最后，如果您有机会共享此代码（例如，将其设为 GitHub 上的公共存储库）并且您的 userprefs 文件中有一些私有令牌，那么您应该考虑重新初始化一个新存储库（使用新的 gitignore）或从您的历史记录中[清除](https://help.github.com/articles/remove-sensitive-data)userprefs 文件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-27T15:21:47.820

我的 gitignore：

```
Thumbs.db
*.obj
*.exe
*.pdb
*.user
*.aps
*.pch
*.vspscc
*_i.c
*_p.c
*.ncb
*.suo
*.sln.docstates
*.tlb
*.tlh
*.bak
*.cache
*.ilk
*.log
*.pidb
*.user*
AppPackages*/
_UpgradeReport_Files*/
UpgradeLog.*
[Bb]in
[Dd]ebug*/
*.lib
*.sbr
obj/
[Rr]elease*/
_ReSharper*/
[Tt]est[Rr]esult* 
```

# xcode - 在 Xcode 中将标签栏添加到 masterview (Tableview)

> ID：11585987
> 
> 赞同：0
> 
> 时间：2012-07-20T19:42:50.477
> 
> 标签：xcode, uitableview, master-detail

所以我的问题是我想在我现有的主视图中添加一个标签栏。我的搜索栏也不会留在顶部。

![](../Images/8a113e62a55fa15e371c6a00983a57e5.png)

![](../Images/2b1c304e46a5cc23b73bcd17b428ebe9.png)

这是故事板的一些图像

![](../Images/3449661bd56d59e0d00790d9d6241288.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T21:38:19.723

我希望我已经理解了你的问题。

请记住，标签栏控制器和导航视图也是视图控制器 (VC)，以服务于其他 VC。这么说，你必须组织你的故事板控制器，以便将标签栏控制器作为根 VC，将导航 VC 作为主视图的父级，以保持主/详细导航。

# c++ - stl map同时写示例代码

> ID：11585996
> 
> 赞同：0
> 
> 时间：2012-07-20T19:43:04.687
> 
> 标签：c++, multithreading

我想模拟同时写入条件下stl map的异常行为。在这里，我使用单个映射并同时从多个线程插入数据。由于我们只使用一个地图对象，因此它不应该允许。请通过以下示例代码

```
 #include <iostream>
    #include <map>
    #include <iterator>
    #include <algorithm>

    extern "C"
    {
    #include <pthread.h>
    #include <string.h>
    #include <stdlib.h>
    }

    using namespace std;

//functor to print map
    struct PrintMp
    {
       void operator()(pair<int,int> pr)
       {
          cout<<pr.first<<" => "<<pr.second<<endl;
       }
    };
//thread 1
//inserts continuous no from 0 to 4999    
    void* ins_th1(void *arg)
    {
       map<int, int> *mp = static_cast<map<int, int>* >(arg);
       for(int i =0 ; i<5000; i++)
          mp->insert(pair<int,int>(i, i+1000));

       return NULL;
    }

//thread 1
//inserts continuous no from 0 to 4999    
    void* ins_th2(void *arg)
    {
       map<int, int> *mp = static_cast<map<int,int>* >(arg);
       for(int i=5000; i<10000; i++)
          mp->insert(pair<int, int>(i, i+2000));
       return NULL;
    }

    int main()
    {
       typedef map<int, int> IntMapType;

       IntMapType mp;
       PrintMp MpPrintObj;
       int rc;

       pthread_t th1, th2;
    //thread 1 creation
       rc = pthread_create(&th1, NULL, ins_th1, static_cast<void*>(&mp));
       if ( rc != 0)
       {
          cerr<<strerror(rc)<<"in thread1"<<endl;
          exit(EXIT_FAILURE);
       }
    //thread 2 creation
       rc = pthread_create(&th2, NULL, ins_th2, static_cast<void*>(&mp));
       if(rc!=0)
       {
          cerr<<strerror(rc)<<"in thread2"<<endl;
          exit(EXIT_FAILURE);
       }
    //lets wait for the thread to finish
       rc = pthread_join(th1, NULL);
       if ( rc != 0)
       {
          cerr<<strerror(rc)<<"join failure for thread1"<<endl;
          exit(EXIT_FAILURE);
       }

       rc = pthread_join(th2, NULL);
       if ( rc != 0)
       {
          cerr<<strerror(rc)<<"join failure for thread2"<<endl;
          exit(EXIT_FAILURE);
       }

       cout<<"Map data"<<endl;
    //now print it
       for_each(mp.begin(), mp.end(), MpPrintObj);
       cout<<endl;

       return 0;
    } 
```

但它不起作用。谁能建议我一些方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T21:56:14.703

You are only testing insertion, which may or may not be implemented in a thread safe fashion, for all you know. But, your test is not complete. Allow the threads to write the same key into the `map`, and you will likely experience an error that would not happen without multiple threads.

```
 // ins_th1
   for(int i =0 ; i<10000; i++)
      mp->insert(pair<int,int>(i, i+1000));

   // ins_th2
   for(int i=0; i<10000; i++)
      mp->insert(pair<int, int>(i, i+2000)); 
```

You should test deletion from the `map` as well. When I modified your program to populate the `map`, before launching the threads, and only had the threads remove things from the `map`, the program live-locked.

```
 // ins_th1
   for(int i =0 ; i<5000; i++)
      mp->erase(i);

   // ins_th2
   for(int i=5000; i<10000; i++)
      mp->erase(i);

   // near top of main
   for(int i =0 ; i<5000; i++)
      mp.insert(pair<int,int>(i, i+1000));
   for(int i=5000; i<10000; i++)
      mp.insert(pair<int, int>(i, i+2000));
   //... launch threads 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T21:21:19.317

我试着按照你说的实施。

但是尽管没有使用任何同步机制，但我得到了完美的结果。