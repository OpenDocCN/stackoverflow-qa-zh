# StackOverflow 问答 11785000-11785999

# html - 使用 Excel VBA 填写网站搜索栏

> ID：11785001
> 
> 赞同：0
> 
> 时间：2012-08-02T20:10:02.903
> 
> 标签：html, forms, vba, excel

我正在尝试制作一个 Excel 宏，将数据插入网络搜索表单，然后将结果复制到表格中。网络搜索表单实际上不是“表单”，而是一个空白表，所以我不能只更改表单的输入值，因为没有：

```
<td valign="top">
    <table border="0" cellspacing="0" cellpadding="2">
        <tr>
            <th class="navLabelText" align="left">Order:</th>
            <td>
                <input class="navEditField" id="opt_ordernumber_int" name="ordernumber" type="text" size="6" maxlength="6" />
            </td>
        </tr>
    </table>
</td>
<td width="10">&nbsp;</td> 
```

HTML 只是继续使用更多相同类型的表单（我猜是用 Java 编码的，因为该站点是 .jsp）。有什么方法可以将值传递到空白表中？

这是我到目前为止所拥有的：

```
Sub featurecode()

Dim ie As Object
Dim doc As HTMLDocument
Dim links As IHTMLElementCollection
Dim link As HTMLAnchorElement
Dim i As Integer
Dim found As Boolean
Dim todaysURL As String

Dim objElement As Object
Dim objCollection As Object

Set ie = CreateObject("InternetExplorer.Application")

ie.Visible = True 'false
ie.navigate "https://website.com"
Application.StatusBar = "Loading Feature Codes"

Do Until ie.readyState = IE_READYSTATE.complete: DoEvents: Loop

Set doc = ie.document

' Find the input tag of the order form and submit button:
Set objCollection = ie.document.getElementsByTagName("input")

i = 0
While i < objCollection.Length
    If objCollection(i).Name = "ordernumber" Then

        ' Set text for search
        objCollection(i).Value = "655032"

    Else
        If objCollection(i).Type = "submit" And objCollection(i).Name = "Submit" Then

            ' "Search" button is found
            Set objElement = objCollection(i)
            objElement.Click

        End If
    End If
    i = i + 1
Wend

End Sub 
```

我遇到问题的部分是：

```
If objCollection(i).Name = "ordernumber" Then

    ' Set text for search
    objCollection(i).Value = "655032" 
```

通常你可以更改表单的 HTML 值，但是在这种情况下输入标签中没有 HTML 值，所以我很茫然。我的目标是简单地将订单号插入表单并点击提交按钮。不幸的是，我无法向您展示该网站，因为它是一个内部公司网站，但这里是相关信息的屏幕截图：[screenshot](http://img402.imageshack.us/img402/9850/79951377.jpg)

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-07-18T17:22:35.130

我在 VBA 中发现了一些元素，包括 INPUT，你必须首先关注元素：

```
 objCollection(i).Focus
    objCollection(i).Value = "655032" 
```

# asp.net - 使用表单身份验证保护 asp.net Web 应用程序

> ID：11785003
> 
> 赞同：0
> 
> 时间：2012-08-02T20:10:03.743
> 
> 标签：asp.net, security

在 ASP.NET Web 应用程序中，我有 login.aspx。我强制每个用户都通过 Login.aspx 进行访问，并在 web.config 上进行设置：

```
<authentication mode="Forms">
<forms name="coockie_aut" loginUrl="login.aspx" protection="All" path="/" timeout="60" slidingExpiration="true"/>
</authentication> 
```

我的问题是：使用表单身份验证和 loginurl，是否可以防止在不访问第一个 Login.aspx 的情况下尝试破解任何网页？这是否意味着总是*会*强制首先访问Login.aspx？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T20:18:24.087

这取决于您所说的“黑客”是什么意思。默认表单身份验证会将*没有会话身份验证令牌*的任何请求重定向到登录页面。有各种各样的会话窃取、中间人、暴力破解和其他类型的攻击，您可能仍然容易受到攻击。

# javascript - 计算通过javascript添加到表中的行数

> ID：11785004
> 
> 赞同：-2
> 
> 时间：2012-08-02T20:10:13.760
> 
> 标签：javascript

因此，我正在构建一个表，允许客户端在其中添加更多行以便向表中添加更多数据。如何计算添加到表中的总行数？这是一个示例，无论出于何种原因，它实际上并不适用于 jsfiddle，而只是为了了解功能。

[http://jsfiddle.net/ScEzz/1/](http://jsfiddle.net/ScEzz/1/)

所以说用户添加 5 行 3 次和 15 行一次，结果应该是 (5*3)15+15 +original 1 = 31

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T20:12:04.163

您应该能够跟踪您的代码，但除此之外，您还可以执行此操作...

```
var count = document.getElementbyId("mytable").rows.length; 
```

* * *

或者如果你想用 jQuery...

```
var count = $("#mytable > tr").length; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T20:14:58.797

```
$("#mytable tr").length-1 
```

这会让你得到`tr`标题的 s 数减 1。

由于您已经在使用 jQuery，您可以通过在 jQuery 中而不是 JS 中做一些事情来使代码更简洁。

*   选择元素`$('#mytable');`
*   在 jQuery 中创建一个只有 begin 标签的元素：`var row = $('<tr>');`
*   使用 jQuery 的 append 方法`table.append(row);`

# tomcat - Tomcat：没有用于服务器错误的 Catalina 日志

> ID：11785006
> 
> 赞同：1
> 
> 时间：2012-08-02T20:10:29.787
> 
> 标签：tomcat, tomcat6

我正在使用 apache-tomcat-6.0.20，并且只在我的日志目录中看到访问日志。

我的 logging.properties 文件将所有类别都设置为 INFO。

我已经删除了我的错误页面，当抛出异常时，我只看到一个 404 页面。我的应用程序日志中没有相关错误。

如何设置此日志记录？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T21:28:01.470

我自己解决了这个问题，在我的 Eclipse 服务器的 VM 参数中缺少这两个属性：

```
-Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Djava.util.logging.config.file="C:\whatever\conf\logging.properties" 
```

# sql - 甲骨文 SQL。我应该使用什么语句

> ID：11785007
> 
> 赞同：3
> 
> 时间：2012-08-02T20:10:37.380
> 
> 标签：sql, oracle, gaps-and-islands

给出的数据：

```
 inventory_num_id        inventory_group_id             num   code
         9681066                 100003894             211      E
         9679839                 100003894             212      E
         9687165                 100003894             213      E
         9680883                 100003894             214      I
         9710863                 100003894             515      E
         9681246                 100003894             516      E
         9682695                 100003894             517      E
         9681239                 100003894             518      E
         9685409                 100003894             519      E
         9679843                 100003894             520      C
         9679844                 100003894             521      C
         9714882                 100003894             522      E
         9679845                 100003894             523      I
         9681211                 100003894             524      E
         9681216                 100003894             525      E
         9682696                 100003894             526      E
         9681227                 100003894             527      E 
```

结果示例应如下所示：

```
inventory_group_id   code start  end 
------------------   ---- -----  ---- 
         100003894      E   211   213
         100003894      I   214
         100003894      E   515   519
         100003894      C   520   521
         100003894      E   522
         100003894      I   523
         100003894      E   524   527 
```

我应该使用什么运算符来使开始为最小值并结束为最大值？你能解释一下当结束（最大）不应该出现时我应该做什么吗？

我可以在那里以某种方式使用 GROUP BY 子句吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:47:43.550

我已经在 MS Sql 服务器下对此进行了测试，我敢打赌它也可以在 oracle 下工作：

```
select max(inventory_group_id) inventory_group_id,max(code) Code ,min(num) minNum,max(num) maxNum

from
(
select inventory_group_id,inventory_num_id,code,num,
      (select min(num) from DATA where num>
             (select max(num) from DATA where DATA.num<a.num and code<>a.code) 
      ) as minNum
from DATA a
) A

group by minNum
order by 3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T06:04:35.340

**安，小心 sql 的阴暗面。有不止一种方法可以做到这一点。这是答案：**

```
SELECT a.inventory_group_id,
   a.code,
  a.num        AS "start",
  decode(b.num,a.num,null,b.num) AS "end" FROM
  ( SELECT inventory_num_id,inventory_group_id,code,num
         , ROW_NUMBER() OVER (PARTITION BY inventory_group_id,code ORDER BY num) AS rn
    FROM inventory_num  a
    WHERE NOT EXISTS
          ( SELECT * 
            FROM inventory_num  prev
            WHERE prev.inventory_group_id = a.inventory_group_id
            and  PREV.CODE = a.code
              AND prev.num = a.num - 1
          ) 
  )  a
JOIN
  ( SELECT  inventory_num_id,inventory_group_id,code, num 
         , ROW_NUMBER() OVER (PARTITION BY inventory_group_id,code ORDER BY num) AS rn
    FROM inventory_num  a
    WHERE NOT EXISTS
          ( SELECT * 
            FROM inventory_num  next
            WHERE next.inventory_group_id = a.inventory_group_id
            and  next.CODE = a.code
              AND next.num = a.num + 1
          )
  )  b
ON  b.inventory_group_id = a.inventory_group_id and b.code = a.code
AND b.rn  = a.rn
order by 3; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T16:55:12.840

正如gelonsoft 所指出的，有很多方法可以做到这一点。我宁愿只打一次桌子。这是我目前最喜欢的，基于我第一次在这个网站上找到的方法，可能是在[这个答案上（你可能会](https://stackoverflow.com/a/4324654/266304)[在这些问题中](https://stackoverflow.com/tags/gaps-and-islands/hot)找到更多的方法：

```
select inventory_group_id, code, start_num,
    case when end_num = start_num then null else end_num end as end_num
from (
    select inventory_group_id, code, min(num) as start_num, max(num) as end_num
    from (
        select inventory_group_id, num, code,
            row_number() over (order by num)
              - row_number() over (partition by code order by num) as chain
        from inventory_num
    )
    group by inventory_group_id, code, chain
)
order by 1,3;

INVENTORY_GROUP_ID C  START_NUM    END_NUM
------------------ - ---------- ----------
         100003894 E        211        213
         100003894 I        214
         100003894 E        515        519
         100003894 C        520        521
         100003894 E        522
         100003894 I        523
         100003894 E        524        527 
```

内部选择通过基于`code`和`num`值创建人工分组来完成所有工作 - 自行运行以查看它在做什么。下一个查询是折叠组以找到`num`每个人工组的最低和最高。最后的外部查询纯粹是为了如果链只有一个链接 - 即和是相同的 - 你提到你想要的`end`值。`null``start``end`

你没有说的是这些`num`值是否必须是连续的。如果我用`code='I'`and添加一条记录`num=216`，我得到相同数量的输出，但`214-216`被视为一个链，即使`215`两者之间没有值：

```
INVENTORY_GROUP_ID C  START_NUM    END_NUM
------------------ - ---------- ----------
         100003894 E        211        213
         100003894 I        214        216
... 
```

我还没有想出如何调整这种`row_number()`方法以考虑到这一点并将它们视为单独的链 - 我很想看看它是否可以在保持简单的同时完成。给出的其他答案也会发生同样的事情；但我不确定这对你是否重要。

如果是这样，这是另一个版本，它只上桌一次；相当复杂，并且在这种形式下，与非连续`num`值具有相同的潜在问题：

```
select distinct inventory_group_id, code,
    case
        when prev_code = code then lag(num) over (order by rn)
        else num
    end as start_num,
    case
        when next_code != code and prev_code != code then null
        when next_code = code then lead(num) over (order by rn)
        else num
    end as end_num
from (
    select inventory_group_id, num, code, prev_code, next_code,
        rownum as rn
    from (
        select inventory_group_id, num, code,
            lag(code) over (partition by inventory_group_id
                order by num) as prev_code,
            lead(code) over (partition by inventory_group_id
                order by num) as next_code
        from inventory_num
    )
    where (prev_code is null or code != prev_code)
        or (next_code is null or code != next_code)
    order by 1,2,3
)
order by 1,3,2;

INVENTORY_GROUP_ID C  START_NUM    END_NUM
------------------ - ---------- ----------
         100003894 E        211        213
         100003894 I        214
         100003894 E        515        519
         100003894 C        520        521
         100003894 E        522
         100003894 I        523
         100003894 E        524        527 
```

内部查询从表中进行选择，并使用`lead`和`lag` [分析函数](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions004.htm)在每一行的任一侧查找代码。

下一个查询排除与下一行和上一行具有*相同*代码的任何行；也就是说，任何位于不间断链中间的东西。这意味着每个链最多折叠到两行，其中包含`num`该链的开始值和结束值。

外部查询中的语句通过使用和再次`case`使每个链的两行看起来相同；如果只有一行（例如 for ），则第二行的第一个子句构成最终值，你说你想要的。然后删除创建的重复项。`lead``lag``214``when``case``null``distinct``case`

我建议您分别运行每个级别的查询，以查看它在做什么，并了解它对上一个级别的操作。

`code='I'`正如我所说，如果我用and引入一行，这会产生同样的潜在问题`num=216`：

```
INVENTORY_GROUP_ID C  START_NUM    END_NUM
------------------ - ---------- ----------
         100003894 E        211        213
         100003894 I        214        216
... 
```

通过采用这种方法可以将其分成两个链，但它有点复杂，因为您必须跟踪和比较`num`值以及`code`值：

```
select distinct inventory_group_id, code,
    case
        when prev_num is null then num
        when prev_code = code then lag(num) over (order by rn)
        else num
    end as start_num,
    case
        when next_code != code and prev_code != code then null
        when next_code is null then num
        when next_num is null then null
        when next_code = code then lead(num) over (order by rn)
        else num
    end as end_num
from (
    select inventory_group_id, num, code, prev_code, next_code,
        case
            when prev_num != num - 1 then null
            else prev_num
        end as prev_num,
        case
            when next_num != num + 1 then null
            else next_num
        end as next_num,
        rownum as rn
    from (
        select inventory_group_id, num, code,
            lag(code) over (partition by inventory_group_id
                order by num) as prev_code,
            lead(code) over (partition by inventory_group_id
                order by num) as next_code,
            lag(num) over (partition by inventory_group_id
                order by num) as prev_num,
            lead(num) over (partition by inventory_group_id
                order by num) as next_num
        from inventory_num
    )
    where (prev_code is null or code != prev_code)
        or (next_code is null or code != next_code)
        or (prev_num is null or num != prev_num + 1)
        or (next_num is null or num != next_num - 1)
    order by 1,2,3
)
order by 1,3,2;

INVENTORY_GROUP_ID C  START_NUM    END_NUM
------------------ - ---------- ----------
         100003894 E        211        213
         100003894 I        214
         100003894 I        216
         100003894 E        515        519
         100003894 C        520        521
         100003894 E        522
         100003894 I        523
         100003894 E        524        527 
```

# jquery - ajax成功响应问题

> ID：11785011
> 
> 赞同：0
> 
> 时间：2012-08-02T20:10:47.193
> 
> 标签：jquery

我在使用 ajax jquery 函数时遇到问题。这是可能的javascript代码：

```
$.ajax({
  type: "POST",
  url: "login.php",
  data: {
    username: username,
    password: password
  },
  dataType: "text",
  contentType: "application/x-www-form-urlencoded;charset=ISO-8859-15",
  success: function (msg) {
    $("#button").ajaxComplete(function (event, request) {
      alert(msg == 'ok');
      if (msg == 'ok') {
        $('#load').show();
        setTimeout(function () {
          $("#username").css("background", "green");
          $("#password").css("background", "green"); // add red  color 
        }, 1000)
        setTimeout("submitForm()", 2000);
      } else {
        $('#load').show();
        setTimeout(function () {
          $("#username").css("background", "red");
          $("#password").css("background", "red"); // add red  color
          $('#load').hide();
          $('#button').show();
        }, 1000);
      }
    });
  }
}); 
```

我不明白为什么 if(msg=="ok") 返回 false，即使在对象“msg”中有一个字符串“ok”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T20:22:51.773

I成功事件接受一个带有三个参数的函数：
`data, textStatus, andjqXHR`. 我假设“ok”是 login.php 给出的响应，在这种情况下，这就是`data`参数的值。因此，请检查数据参数的 OK 值。

您可能还想`alert(data);`看看究竟返回了什么。

见： [http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

```
$.ajax({
    type: "POST",
    url: "login.php",
    data: {
        username: username,
        password: password
    },
    dataType: "text",
    contentType: "application/x-www-form-urlencoded;charset=ISO-8859-15",
    success: function(data, textStatus, jqXHR) {
        alert(data == 'ok');
        if (data == 'ok') {
            $('#load').show();
            setTimeout(function () {
                $("#username").css("background", "green");
                $("#password").css("background", "green"); // add red  color 
            }, 1000)
            setTimeout("submitForm()", 2000);
        } else {
            $('#load').show();
            setTimeout(function () {
                $("#username").css("background", "red");
                $("#password").css("background", "red"); // add red  color
                $('#load').hide();
                $('#button').show();
            }, 1000);
        }
    }
}); 
```

# java - 向下取整并与另一个数字进行比较

> ID：11785013
> 
> 赞同：1
> 
> 时间：2012-08-02T20:11:01.950
> 
> 标签：java, bigdecimal

我正在尝试使用 Big decimal 将双精度数舍入，然后与另一个数字进行比较例如：

```
 // Parse the string to extract the double and then put it into Big
    // decimal
    BigDecimal bdAns = BigDecimal.valueOf(Double.parseDouble("3.1419"));
    System.out.println(bdAns);
    BigDecimal bdCorr = BigDecimal.valueOf(Double.parseDouble("3.142"));
    System.out.println(bdCorr);
    System.out.println(bdCorr.precision() + " , " + bdAns.precision());
    // Round down the value of the bdAns, so that the precision of bdAns and
    // bdCorr matches. This code doesnt seem to work.
    bdAns = BigDecimal.valueOf(bdAns).setScale(bdCorr.precision(),
            BigDecimal.ROUND_UNNECESSARY);
    System.out.println(bdAns);
    System.out.println(bdAns.compareTo(bdCorr)); 
```

最后一个 println 正在打印 -1。但它们应该等于 3.1419 舍入到小数点后 3 位应该是 3.142。有人可以告诉我代码有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T20:21:53.897

`precision`并且`scale`不是一回事，看来您将两者混淆了。 `scale`是小数点右边的位数。 `precision`是总位数。

更改所有对 to 的引用`precision`，`scale`它应该可以工作（但您必须选择除 之外的舍入模式`UNNECESSARY`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T20:35:19.623

这是您要实现的目标的完整示例：

```
import java.math.*;

public class bigdec {

    public static void main(String[] args) {
        BigDecimal dec1 = new BigDecimal("3.1419");
        BigDecimal dec2 = new BigDecimal("3.142");
        System.out.println("first - " + dec1);
        System.out.println("second - " + dec2);
        MathContext mc = new MathContext(dec2.scale() + dec1.toString().indexOf("."));
        dec1 = dec1.round(mc);
        System.out.println("AFTER ROUNDING");
        System.out.println("first - " + dec1);
        System.out.println("second - " + dec2);
        System.out.println(dec1.equals(dec2));
    }

} 
```

`dec1`它根据 中的小数位数四舍五入`dec2`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T20:20:12.070

我会使用 double 和 long

```
double d1 = 3.1419;
double d2 = 3.142;

long l1 = (long) (d1 * 100);
long l2 = (long) (d2 * 100);

// both l1 and l2 are 314 
```

您遇到的问题是您使用的 setScale() 精度。

```
 bdAns = bdAns.setScale(bdCorr.scale(), BigDecimal.ROUND_HALF_UP); 
```

# matlab - 如何将方程分别应用于矩阵中的多个列？

> ID：11785016
> 
> 赞同：0
> 
> 时间：2012-08-02T20:11:27.460
> 
> 标签：matlab, matrix, max

我有 4 种不同长度的数据（以行为单位），它们都有不同数量的列。我需要对这些列中的每一列应用一个方程，然后从每一列中提取最大值。

我试图使用的等式是：

```
averg = mean([interpolate(1:end-2),interpolate(3:end)],2); % this is just getting your average value.
real_num = interpolate(2:end-1);
streaking1 = (abs(real_num-averg)./averg)*100; 
```

我的一个数据集的一个例子是 5448 行 x 13 列

**编辑**

这是当前对 Ben A. 的解决方案的适应，它正在发挥作用。

```
A = interpolate;    
averg = (A(1:end-2,:) + A(3:end,:))/2;
center_A = A(2:end-1,:);
streaking = [];
for idx = 1:size(A,2)
    streaking(:,idx) = (abs(center_A(idx,:)-averg(idx,:))./averg(idx,:))*100;
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:10:17.337

我不完全确定我是否完全遵循您在每个步骤中所做的事情，但这里有一个尝试：

```
A = interpolate;    
averg = (A(1:end-2,:) + A(3:end,:))/2;
center_A = A(2:end-1,:);
streaking = [];
for idx = 1:size(A,2)
    streaking(:,idx) = (abs(center_A(idx,:)-averg(idx,:))./averg(idx,:))*100;
end 
```

Averg 将是每列的均值向量。我只是将给定列中的值用作您之前拥有的 real_num 变量。我不清楚为什么你需要索引你现在的样子，因为没有违反索引规则的风险。

如果这有帮助，那就太好了！如果不让我知道，我会看看我是否可以修改一些。

# php - 解析错误：语法错误，php 中出现意外的 T_STRING

> ID：11785017
> 
> 赞同：5
> 
> 时间：2012-08-02T20:11:28.893
> 
> 标签：php, parsing

```
<?php
    include_once 'forecastVo.php';
    include_once 'BaseVo.php';
    $count=0;
    $json_url = file_get_contents(
        'http://maps.google.com/maps/api/geocode/json' .
        '?address='jaipur'&sensor=false');                //line 9
    if($json_url){
        $obj = json_decode($json_url,true);

        $obj2= $obj['results'];
    }
?> 
```

我收到一个错误：

> 解析错误：语法错误，第 9 行 /home/a4101275/public_html/index.php 中的意外 T_STRING

第 9 行是我使用`file_get_contents`.

错误是什么意思，我该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T20:12:30.673

您必须正确使用转义字符。`'`单引号封装的字符串中不能有单引号 ( )。它打破了它。为了继续该字符串并让 PHP 从字面上解释您的内部单引号，您必须使用`\`.

```
$json_url = file_get_contents('http://maps.google.com/maps/api/geocode/json?address=\'jaipur\'&sensor=false'); 
```

或者，您可以使用替代的字符串封装器，双引号 ( `"`)。

```
$json_url = file_get_contents("http://maps.google.com/maps/api/geocode/json?address='jaipur'&sensor=false"); 
```

以供将来参考，`Parse error: syntax error, unexpected T_STRING`通常意味着您在那条线上的某处有一个坏字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T20:19:25.997

为什么要引用它？我无法想象 Google API 需要（甚至期望）引用该值。

```
$json_url = file_get_contents('http://maps.google.com/maps/api/geocode/json?address=jaipur&sensor=false'); //line 9 
```

或者，是`jaipur`一个变量？如果是这样：

```
$json_url = file_get_contents("http://maps.google.com/maps/api/geocode/json?address=$jaipur&sensor=false"); //line 9 
```

很难从你的问题中看出你想要完成什么......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T20:13:07.813

```
$json_url = file_get_contents("http://maps.google.com/maps/api/geocode/json?address='jaipur'&sensor=false"); 
```

或者用`\`

# asp.net - 从报表查看器而不是 Web 服务调用获取 ssrs 报表的参数列表

> ID：11785018
> 
> 赞同：1
> 
> 时间：2012-08-02T20:11:30.577
> 
> 标签：asp.net, reporting-services, reportviewer

我正在通过 ReportViewer 控件呈现服务器报表（远程处理模式），但我还需要保存每个报表具有的参数列表。ReportViewer 会自动为其呈现的每个报表生成参数提示，所以我想知道是否有事件或属性可以让我访问这些参数提示以获取报表的名称和参数数量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T21:13:29.550

您可以通过调用“SetParameters”方法来完成。这是一个示例代码（VB.NET）：

```
Dim aParamList As New Generic.List(Of ReportParameter)

aParamList.Add(New ReportParameter("ParamName1", "Parameter Value 1"))
aParamList.Add(New ReportParameter("ParamName2", "Parameter Value 2"))

ReportViewer1.ServerReport.SetParameters(aParamList) 
```

如果您不知道参数名称，要从报告中获取它们，您可以使用“GetParameters”方法：

```
For Each oParamInfo In  ReportViewer1.ServerReport.GetParameters
    'oParamInfo.Name would hold parameter name
Next 
```

# embedded - 嵌入式“跟踪/调试”工具的选项

> ID：11785023
> 
> 赞同：1
> 
> 时间：2012-08-02T20:11:54.727
> 
> 标签：embedded, printf, trace

我知道有很多用于嵌入式系统调试或跟踪的工具。但我有一个更具体的用例：

1.  最少的额外硬件。最好是通过：以太网/罐头或JTAG
2.  实时数据源 - 不存储数据以供以后分析
3.  实时数据的简单而强大的图形可视化（如仪表、条形或绘图）
4.  易于在源代码中使用——比如使用 printf 风格的代码调试

希望你对 sw 工具有一些想法

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T18:22:30.460

通常，当我开始构建嵌入式系统时，我使用 UART 作为“系统控制台”来使用 printf 输出诊断数据。您还可以添加响应特定命令的菜单界面。

如果您正在创建的嵌入式系统在要求中具有串行接口，您可以使用它。如果没有，可以使用简单的 TTL 到 USB 转换器。

# java - Java List 的高效循环

> ID：11785028
> 
> 赞同：16
> 
> 时间：2012-08-02T20:12:20.843
> 
> 标签：java, android, optimization, dalvik

以下列表来自 2008 年名为“Dalvik Virtual Machine Internals”的谷歌 I/O 演讲，它列出了按效率从高到低依次循环一组对象的方法：

```
(1) for (int i = initializer; i >=0; i--) //hard to loop backwards
(2) int limit = calculate_limit(); for (int i= 0; i< limit; i++)
(3) Type[] array = get_array(); for (Type obj : array)
(4) for (int i =0; i< array.length; i++) //gets array.length everytime
(5) for (int i=0; i < this.var; i++) //has to calculate what this.var is
(6) for (int i=0; i < obj.size(); i++) //even worse calls function  each time
(7) Iterable list = get_list(); for (Type obj : list) //generic object based iterators slow! 
```

前 3 个在同一效率范围内，如果可能，请避免 7 个。这主要是帮助延长电池寿命的建议，但也可能有助于 Java SE 代码。

我的问题是：为什么（7）很慢，为什么（3）很好？我认为这可能是（3）和（7）的数组和列表之间的区别。此外，正如 Dan 提到的 (7) 创建了大量必须进行 GC 处理的小型临时对象，我现在对 Java 有点生疏了，有人可以解释为什么吗？这是他在 0:41:10 的[谈话视频中的一分钟。](http://www.youtube.com/watch?v=ptjedOZEXPM)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T21:26:20.143

这个列表有点过时了，今天不应该真的有用。

几年前这是一个很好的参考，当时 Android 设备运行缓慢且资源非常有限。Dalvik VM 实现也缺乏当今可用的许多优化。

在这样的设备上，一个简单的垃圾收集很容易花费**1 或 2 秒**（相比之下，今天大多数设备大约需要 20 毫秒）。在 GC 期间，设备刚刚冻结，因此开发人员必须非常小心内存消耗。

今天你不必太担心，但如果你真的关心性能，这里有一些细节：

```
(1) for (int i = initializer; i >= 0; i--) //hard to loop backwards
(2) int limit = calculate_limit(); for (int i=0; i < limit; i++)
(3) Type[] array = get_array(); for (Type obj : array) 
```

这些很容易理解。`i >= 0`评估速度比`i < limit`因为它在进行比较之前不读取变量的值而更快。它直接与整数文字一起使用，速度更快。

我不知道为什么（3）应该比（2）慢。编译器应该产生与 (2) 相同的循环，但可能 Dalvik VM 此时没有正确优化它。

```
(4) for (int i=0; i < array.length; i++) //gets array.length everytime
(5) for (int i=0; i < this.var; i++) //has to calculate what this.var is
(6) for (int i=0; i < obj.size(); i++) //even worse calls function  each time 
```

这些已经在评论中解释过了。

```
(7) Iterable list = get_list(); for (Type obj : list) 
```

`Iterables`速度很慢，因为它们分配内存、进行一些错误处理、在内部调用多个方法……所有这些都比 (6) 慢得多，后者在每次迭代中只调用一个函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T21:01:27.350

我觉得我的第一个答案并不令人满意，真的无助于解释这个问题；我已经发布了[该站点](http://nothings.org/computer/iterate.html)的链接并进行了详细说明，其中涵盖了一些基本用例，但没有涉及问题的本质。因此，我继续进行了一些动手研究。

我运行了两个单独的代码：

```
 // Code 1
    int i = 0;
    Integer[] array = { 1, 2, 3, 4, 5 };
    for (Integer obj : array) {
        i += obj;
    }
    System.out.println(i);

    // Code 2
    int i = 0;
    List<Integer> list = new ArrayList<>();
    list.add(1);
    list.add(2);
    list.add(3);
    list.add(4);
    list.add(5);
    for (Integer obj : list) {
        i += obj;
    }
    System.out.println(i); 
```

当然，两者都 print out `15`，并且都使用`Integer`数组（没有`int`s）。

接下来，我曾经`javap`将这些反汇编并查看字节码。（我忽略了初始化；`for`循环之前的所有内容都被注释掉了。）由于这些内容很长，我将它们发布在 PasteBin[此处](http://pastebin.com/36anZkQT)。

现在，虽然代码 1 的字节码实际上*更长*，但强度更低。它只使用`invokevirtual`一次（除了`println`），不需要其他调用。在代码 1 中，似乎将迭代优化为基本循环；检查数组长度，并加载到我们的变量中，然后添加到`i`. 这似乎被优化*为*与`for (int i = 0; i < array.length; i++) { ... }`.

现在，在代码 2 中，字节码变得更加密集。除了上面需要的所有其他调用之外，它还必须进行 2 次`invokeinterface`调用（都到）。`Iterator`此外，代码 2 必须调用`checkcast`，因为它是通用的`Iterator`（如我上面提到的，它没有经过优化）。现在，尽管对`load`和`store`操作的调用减少了，但上述这些调用涉及大量更多的开销。

正如他在视频中所说，如果你发现自己需要做*很多*这些，你可能会遇到问题。例如，在 . 开头运行一个`Activity`可能没什么大不了的。请注意创建其中的许多，`onDraw`例如，尤其是在 中进行迭代。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T20:21:17.893

我猜编译器对此进行了优化（3）（这是我猜测的部分）：

```
for (int i =0; i < array.length; ++i)
{
    Type obj = array[i];

} 
```

并且 (7) 无法优化，因为编译器不知道它是哪种 Iterable。这意味着它确实必须`new Iterator`在堆上创建一个。分配内存是昂贵的。每次你请求下一个对象时，它都会通过一些调用。

粗略描述编译 (7) 时会发生什么（确定这一点）：

```
Iterable<Type> iterable = get_iterable();
Iterator<Type> it = iterable.iterator(); // new object on the heap
while (it.hasNext()) // method call, some pushing and popping to the stack
{
    Type obj = it.next(); // method call, again pushing and popping

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T20:21:09.813

第三种变体比 7 更快，因为数组是具体类型，JVM 应该只分配一个指向正确值的指针。但是当你迭代一个集合时，编译器可以因为擦除而执行额外的强制转换。实际上，编译器将此强制转换插入到通用代码中以确定一些肮脏的技巧，例如尽快使用已弃用的原始类型。

**PS**这只是一个猜测。事实上，我认为编译器和 JIT 编译器可以执行任何优化（即使在运行时也是 JIT），结果可能取决于特定的细节，如 JVM 版本和供应商。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T20:17:54.660

我想您必须将对象编组为基于“链表”的迭代器，然后支持 API，而不是一大块内存和指针（数组）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-07T01:15:45.590

对于 Android，这是 2015 年 Google Developers 的视频。

**索引还是迭代？（Android 性能模式第 2 季第 6 集）** [https://www.youtube.com/watch?v=MZOf3pOAM6A](https://www.youtube.com/watch?v=MZOf3pOAM6A)

他们在 DALVIK 运行时（4.4.4 版本）上进行了 10 次测试，以获得平均结果。结果显示“For index”是最好的。

```
int size = list.size();
for (int index = 0; index < size; index++) {
    Object object = list.get(index);
    ...
}
```

他们还建议在视频结尾处自己在您的平台上进行类似的测试。

# salesforce - 将潜在客户传递到 Salesforce APEX 类

> ID：11785029
> 
> 赞同：0
> 
> 时间：2012-08-02T20:12:25.287
> 
> 标签：salesforce, apex-code

我正在尝试在 Salesforce 中创建一个发送 SMS 的 APEX 类。这是从 Lead Trigger 调用的。

我想将“Lead”传递给该方法，但出现以下错误

“不支持的参数类型 SOBJECT:Lead”

我的声明看起来像这样。

```
global   class SMS_Services {

    @future (callout=true)  
    public static void SendTestDriveReminder(Lead l){

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T21:59:37.560

这是因为您已将方法注释为*@future*未来方法只能接受原始参数。因此，您需要将参数类型更改为 Id，例如：

```
@future (callout=true)  
public static void SendTestDriveReminder(Set<Id> leadIds) 
```

需要注意的重要一点是，我建议您将参数从单个记录更改为一组 Id，这是因为您应该扩大触发器

```
trigger LeadTriggerExample on Lead (after insert, after update) {
    Set<Id> leadIds = new Set<Id>();
    for(Lead l : Trigger.new) {
        if(/*Certain Criteria is met*/) {
            leadIds.add(l.Id);
        }
    }
    SMS_Services.SendTestDriveReminder(leadIds);
} 
```

你每天只会得到少量的未来方法，你需要谨慎使用它们

# javascript - 垂直菜单/导航自动滚动

> ID：11785032
> 
> 赞同：0
> 
> 时间：2012-08-02T20:12:31.140
> 
> 标签：javascript, jquery, css

我正在为我的垂直菜单寻找 jquery 插件或其他东西。这是场景..我有一个很长的类别列表，例如 70 个类别，我必须在右/左导航中显示，但我希望它们只显示 10 个类别，并且一旦有人滚动类别（上/下）它会自动向上/向下滚动并显示特定高度内的剩余类别（一次可见 10 个），我希望我的问题很清楚，如果不是，我会用图像演示.. 有人可以指出我正确的方向.. 谢谢...

编辑：类似这样的东西，但只有类别名称和垂直方向：http: [//valums.com/files/2009/menu/final.htm](http://valums.com/files/2009/menu/final.htm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T20:35:55.500

正如 MrOBrian 所说...您可以在源代码中编辑样式部分。这也取决于目标浏览器。这里有一些东西可以让你开始......

```
div.sc_menu {
/* Set it so we could calculate the offsetLeft */
position: relative;
height: 145px;
width: 200px;
overflow: auto;
    /* Added this part */
writing-mode: tb-lr;
filter: flipv fliph;
transform: rotate(-90deg);
   -moz-transform: rotate(-90deg);
   -webkit-transform: rotate(-90deg);
   -o-transform: rotate(-90deg);
   -ms-transform: rotate(-90deg);
    /* Added this part */ 
```

}

# vim - 在 Ruby/Rspec 中运行规范的 Vim 问题

> ID：11785035
> 
> 赞同：0
> 
> 时间：2012-08-02T20:12:37.160
> 
> 标签：vim

几天来，我一直在使用 Vim 作为我的主要编辑器。使用[http://www.github.com/astrails/dotvim](http://www.github.com/astrails/dotvim)作为我安装的基础。

我遇到的问题是，当我运行规范时，规范的结果不会在屏幕上延迟，我看不到发生了什么。

为了进一步解释这一点，我有一个视频来演示这种情况： [http ://www.youtube.com/watch?v=gUB48XwNq0M&feature=plcp](http://www.youtube.com/watch?v=gUB48XwNq0M&feature=plcp)

我需要用 CTRL+Z 隐藏 vim 然后 fg 再次显示，这显然不好。

很想在这方面提供帮助

** 编辑 **

我在这里更详细地发布了这个问题：http: [//avi.io/blog/2012/08/05/problem-with-running-spec-in-vim/](http://avi.io/blog/2012/08/05/problem-with-running-spec-in-vim/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T16:02:23.357

我会首先检查这对于您运行的任何 shell 命令是否是相同的行为，或者只是在您运行规范文件时。 *例如*，在 VIM中简单地运行*'ls'的行为如何？*

```
:!ls 
```

如果上面等待' *Enter* '，我猜你在运行你的规范的映射中有一个尾随空格（或类似的）。例如，将此行添加到您的 . *vimrc会将**Leader-l*映射到 'ls' 命令并提示输入 ' *Enter* '。

```
nmap <leader>l :!ls<cr> 
```

**但是，如果您在末尾**添加带有尾随空格的同一行，它将立即退出控制台：

```
nmap <leader>l :!ls<cr> 
```

所以我会检查你用来运行规范的映射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T21:07:47.457

这可能与某些事情有关`:help more`，但我认为这种事情的最佳解决方案是[tmux](http://tmux.sourceforge.net/)和[turbux.vim](https://github.com/jgdavey/vim-turbux/)的组合。[看这里](http://vimeo.com/34879707)的视频。

# iphone - 设置“更多导航控制器的”标题视图文本

> ID：11785037
> 
> 赞同：4
> 
> 时间：2012-08-02T20:12:49.990
> 
> 标签：iphone, ios

我很惊讶没有“更多”被问到这个:-)

我的应用程序是具有多个部分的标准选项卡栏控制器。每个部分（选项卡）包含一个导航控制器，该控制器控制几个视图控制器（您的基本表视图 + 详细视图类型的设置）。现在我已经添加了第 6 个选项卡，iOS 创建了默认的“更多”选项卡来控制最后两个选项卡。我需要消除导航栏*中间*的“更多”文本（注意：不是按钮文本，也不是选项卡本身的标题），并将自定义背景图像应用于导航栏。

**注意：这个问题是关于自定义“更多”导航栏的——我已经成功修改了所有非 iOS 创建的导航栏上的背景图片和 titleView 文本。**

在我的应用程序委托中，应用程序是这样组合在一起的：

**创建视图控制器：**

```
ViewController1 *vc1 = [ViewController1 alloc] initWithNibName@"View1" bundle:nil];
vc1.title = @"VC1";
vc1.tabBarImage.image = [UIImage imageNamed:@"image1.png"]; 
```

对视图控制器 vc2 到 vc6 再重复上述例程 5 次。

**创建单独的导航控制器：**

```
UINavigationController *nc1 = [UINavigationController alloc] initWithRootViewController:vc1]; 
```

对导航控制器 nc2 - nc6 再重复 5 次。

**将导航控制器添加到选项卡栏控制器**

```
self.tabBarController.viewControllers = [NSArray arrayWithObjects: vc1, vc2, vc3, vc4, vc5, vc6, nil]; 
```

**上面的所有代码都能完美运行。没有问题。**

然后，我将自定义背景图像添加到更多导航控制器：

```
 if (self.tabBarController.moreNavigationController){
        if ([self.tabBarController.moreNavigationController.navigationBar respondsToSelector:@selector(setBackgroundImage:forBarMetrics:)] ) {
            UIImage *image = [UIImage imageNamed:@"navlogo.png"];
            [self.tabBarController.moreNavigationController.navigationBar setBackgroundImage:image forBarMetrics:UIBarMetricsDefault];
        } else {
            UINavigationBar *navbar = self.tabBarController.moreNavigationController.navigationBar;
            UIImage *headerImg = [UIImage imageNamed:@"navlogo.png"];
            [navbar setBackgroundImage:headerImg forBarMetrics:UIBarMetricsDefault];
        }       
    } 
```

**这也很好用。没有问题**

由于我的自定义背景包含客户端的徽标死点，因此我需要删除默认情况下显示为“更多”的 titleView 的文本。注意，我说的不是导航按钮的文字，而是导航栏中间的标签。

从逻辑上讲，人们会假设这会起作用：

```
 UILabel *label = [[UILabel alloc] init];
    label.text = @"";
    self.tabBarController.moreNavigationController.navigationItem.titleView = label; 
```

...因为我在所有单独的视图控制器中都这样做，用 self.navigationItem.titleView 代替 self.tabBarController.moreNavigationController 等。

但这不起作用！我可以使用完全相同的代码成功更改所有导航控制器上的背景图像和 titleView 文本（再次，用 self.navigationController.navigationItem 替换 moreNavController 的东西......）。但是，在应用程序委托中，我只能设置背景图像，而不能设置更多导航控制器的标题视图。

任何解决方案将不胜感激。

VB

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:21:18.760

事实证明，我的原始代码是正确的，只是在错误的地方。

```
UILabel *label = [[UILabel alloc] init];
label.text = @"";
self.tabBarController.moreNavigationController.navigationBar.topItem.titleView = label; 
```

但是，在将 tabBarController 添加为我的 rootViewController*之前*，我之前执行过此操作

正确的顺序是：

```
self.window.rootViewController = self.tabBarController;

UILabel *label = [[UILabel alloc] init];
label.text = @"";
self.tabBarController.moreNavigationController.navigationBar.topItem.titleView = label; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-15T18:21:49.787

发布 Swift5 版本，因为我花了很长时间才使其正常工作

```
moreNavigationController.viewControllers[0].tabBarItem = UITabBarItem(title: "My Title", image: UIImage(named: "MoreTab")!, tag: 1111)
moreNavigationController.navigationBar.topItem!.title = "My Title" 
```

请注意，更改 moreNavigationController.tabBarItem 效果不佳。我在扩展 UITabBarController 的类的 viewDidLoad() 中执行此操作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T02:35:19.993

例如，在标签控制器 iOS 模板的 application:didFinishLaunchingWithOptions: 中

```
// Override point for customization after application launch.

UITabBarController *tabBarController = (UITabBarController *)(self.window.rootViewController);
UINavigationController *moreNavigationController = tabBarController.moreNavigationController;
moreNavigationController.navigationBar.topItem.title = @""; 
```

这将更改导航栏标题，但将选项卡标签标题保留为“更多”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-24T12:12:51.403

我找到了一个

**斯威夫特 2.2**

把它放在**didFinishLaunchingWithOptions**

```
tabBarCtr.moreNavigationController.delegate = self
tabBarController.moreNavigationController.viewControllers.first?.title = "" 
```

实现这个委托方法

```
func navigationController(navigationController: UINavigationController, willShowViewController viewController: UIViewController, animated: Bool)
    {
        navigationController.navigationBar.topItem?.rightBarButtonItems = nil
        navigationController.viewControllers.first?.title = ""

    } 
```

**这也将删除**更多导航控制器导航栏顶部的编辑按钮。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-06-30T18:57:01.650

这可能不适用于线程上的每个人，但对我来说......我有一个超过 5 个项目的 tabBarController......我需要在自动生成的 moreNavigationController 上设置标题......就像指定 self.title 一样简单=@"title" 在目标detailviewcontroller的viewDidLoad方法中。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-08-03T03:10:45.420

您可以在 viewDidLoad 函数中更改标题

```
self.title = @"" 
```

# shell - shell脚本中的错误：文件意外结束

> ID：11785038
> 
> 赞同：0
> 
> 时间：2012-08-02T20:12:53.107
> 
> 标签：shell

以下脚本向我显示“文件意外结束”错误。我不知道为什么我会遇到这个错误。我所有的报价都正确关闭。

```
#!/usr/bin/sh
insertsql(){
        #sqlite3 /mnt/rd/stats_flow_db.sqlite <<EOF
        echo "insert into flow values($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18)"
        #.quit
}

for i in {1..100}
do
        src_ip = "10.1.2."+$i
        echo $src_ip
        src_ip_octets = ${src_ip//,/}
        src_ip_int = $src_ip_octets[0]*1<<24+$src_ip_octets[1]*1<<16+$src_ip_octets[2]*1<<8+$src_ip_octets[3]

        dst_ip = "10.1.1."+$i
        dst_ip_octets = ${dst_ip//,/}
        dst_ip_int = $dst_ip_octets[0]*1<<24+$dst_ip_octets[1]*1<<16+$dst_ip_octets[2]*1<<8+$dst_ip_octets[3]

        insertsql(1, 10000, $dst_ip, 20000, $src_ip, "2012-08-02,12:30:25.0","2012-08-02,12:45:25.0",0,0,0,"flow_a010105_a010104_47173_5005_1_50183d19.rrd",0,12,$src_ip_int,$dst_ip_int,3,50000000,80000000)

done 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T20:45:55.547

该错误是由 << 引起的。遇到这种情况时，脚本会尝试读取，直到找到恰好（从第一列开始）在 << 之后找到的内容的行。由于从未找到，脚本搜索到最后，然后抱怨文件意外结束。

但是，这不是您唯一的问题。我至少看到以下其他问题：

*   您只能将 $1 到 $9 用于位置参数。如果你想超越这个，需要使用 shift 命令，或者，如果你的 shell 版本支持它，在变量名周围使用大括号；例如 ${10}、${11}...
*   变量赋值不能在等号周围有空格
*   要调用您的 insertsql，您不能使用 ( and ); 你会这样定义一个新函数。
*   insertsql 函数的 cass 必须传递以空格分隔的参数，而不是逗号分隔的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T20:51:13.273

那是因为你不遵循 shell 语法。对于 ser 变量，您不允许使用空格`=`并连接您不应该使用的字符串的两个部分`+`。所以字符串

```
src_ip = "10.1.2."+$i 
```

变得

```
src_ip="10.1.2.$i" 
```

为什么你使用字符串

```
src_ip_octets = ${src_ip//,/} 
```

我不知道。你的变量中绝对没有逗号。因此，即使要删除所有逗号，它也应该看起来像（`/`如果您只是删除符号，则不需要最后一个）：

```
 src_ip_octets=${src_ip//,} 
```

下一个字符串有很多符号可以以自己的方式进行 shell 解释，这就是为什么您会收到有关文件意外结束的错误（尤其是由于 heredoc `<<`）

```
 src_ip_int = $src_ip_octets[0]*1<<24+$src_ip_octets[1]*1<<16+$src_ip_octets[2]*1<<8+$src_ip_octets[3] 
```

所以我不知道你到底是什么意思，虽然在我看来它应该是这样的

```
 src_ip_int=$(( ${src_ip_octets%%*.}+$(echo $src_ip_octets|sed 's/[0-9]\+\.\(\[0-9]\+\)\..*/\1/')+$(echo $src_ip_octets|sed 's/\([0-9]\+\.\)\{2\}\(\[0-9]\+\)\..*/\1/')+${src_ip_octets##*.} )) 
```

下一个字符串也是如此。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T20:46:29.250

几个问题：

*   等号和赋值两侧之间不应有空格：例如： `dst_ip="10.1.1.$i"`

*   字符串连接不是使用加号完成的，例如， `dst_ip="10.1.1.$i"`

*   bash 中没有移位运算符，没有`<<`:`$dst_ip_octets[0]*1<<24`可以用`expr $dst_ip_octets[0] * 16777216``

*   函数的调用就像 shell 脚本一样，参数用空格分隔，没有括号：`insertsql 1 10000 ...`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T20:45:35.333

你不能这样做：

```
 dst_ip_int = $dst_ip_octets[0]*1<<24+$dst_ip_octets[1]*1<<16+$dst_ip_octets[2]*1<<8+$dst_ip_octets[3] 
```

shell 不做数学运算。这不是 C。如果你想进行这种计算，你需要使用类似的东西`bc`，`dc`或者其他一些可以做你在这里尝试的数学的工具。

这些运算符中的大多数实际上是 shell 元字符，它们的含义完全不同。例如，`<<`是输入重定向，并且`[`用于`]`文件名通配符。

# ruby-on-rails - Solr (Sunspot) 非关键字搜索的查询时间增加

> ID：11785042
> 
> 赞同：4
> 
> 时间：2012-08-02T20:13:02.960
> 
> 标签：ruby-on-rails, search, solr, sunspot

鉴于我想找到 20 个相关结果，我将如何提升 any_of (with(:id).any_of(co_author_ids)) 中的第一个标准，以便如果有 20 个结果符合所述标准，它将返回而不是尝试根据第二个标准匹配？

```
@solr_search = User.solr_search do
  paginate(:per_page => 20)
  with(:has_email, true)

  any_of do      
    with(:id).any_of(co_author_ids)        
    with(:hospitals_id).any_of(hopital_ids)
  end
end 
```

最初我不认为提升是必要的，因为我认为 any_of 会产生级联效应，但它似乎不像那样工作。我知道谁来提高关键字和全文搜索的查询时间，但无法使用 with() 方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-31T14:40:57.790

由于 co_author_ids 是一个多值键，我有足够的理由相信没有办法实现这一点。尽管使用单值键可以通过使用函数查询的 solr 排序来实现这种级联效果。[http://wiki.apache.org/solr/FunctionQuery#Sort_By_Function](http://wiki.apache.org/solr/FunctionQuery#Sort_By_Function) aong with the adjust_solr-params [http://sunspot.github.io/docs/Sunspot/DSL/Adjustable.html](http://sunspot.github.io/docs/Sunspot/DSL/Adjustable.html)

示例：假设您有这样的查询：

```
@solr_search = User.solr_search do
  paginate(:per_page => 20)
  with(:has_email, true)
  any_of do      
    with(:id,author_id) #assuming author id is a solr index        
    with(:hospitals_id).any_of(hopital_ids)
  end
end 
```

现在在这种情况下，您希望具有级联效果并希望更偏爱与 author_id 的精确匹配，您可以这样做

```
@solr_search = User.solr_search do
  paginate(:per_page => 20)
  with(:has_email, true)
  any_of do      
    with(:id,author_id) #assuming author id is a solr index        
    with(:hospitals_id).any_of(hopital_ids)
  end
  adjust_solr_params do |p|
    p["sort"] = "if(author_id_i = #{id},1,0) desc" #note author_id_i solr eq of author_id
  end  
end 
```

所以这将根据 if(author_id_i = #{id},1,0) 的值进行排序，并且作为回报，会将所有具有 auhtor_id 的记录与用户的相同放在首位。

我不知何故在使用 IF 函数时遇到了问题，所以我改为使用（实际上它们都是相同的）：

```
@solr_search = User.solr_search do
  paginate(:per_page => 20)
  with(:has_email, true)
  any_of do      
    with(:id,author_id) #assuming author id is a solr index        
    with(:hospitals_id).any_of(hopital_ids)
  end
  adjust_solr_params do |p|
    p[:sort] = "min(abs(sub(author_id_i,#{id})),1) asc" 
  end  
end 
```

我在寻找解决方案时也偶然发现了这个[http://wiki.apache.org/solr/SpatialSearch ，如果你想按距离排序，你可以这样做：](http://wiki.apache.org/solr/SpatialSearch)

```
@solr_search = User.solr_search do
  paginate(:per_page => 20)
  with(:has_email, true)
  any_of do      
    with(:id,author_id) #assuming author id is a solr index        
    with(:hospitals_id).any_of(hopital_ids)
  end
    adjust_solr_params do |p|
      p[:pt] = "#{latitude_of_your_interest},#{longitude_of_your_interest}"
      p[:sfield] = :author_location #your solr index which stores location of the author
      p[:sort] = "geodist() asc"
    end
end 
```

总的来说，我会说你可以用 p["sort"] 做很多很酷的事情，但在这种特殊情况下，它不能完成（恕我直言），因为它是一个多值字段，例如： [在地图函数中使用多值字段](https://stackoverflow.com/questions/7344243/using-multivalued-field-in-map-function) [Solr 函数查询基于多值字段的计数](https://stackoverflow.com/questions/6240092/solr-function-query-that-operates-on-count-of-multivalued-field)

我希望他们可以为多值字段提供一个包含函数，我们可以写 `p["sort"] ="if(include(co_authors_ids,#{id}), 1, 0) desc"`

但到目前为止，这是不可能的（再次恕我直言）。

# .net - 带有 vb.net 和 WPF 的模态 RadWindow

> ID：11785049
> 
> 赞同：2
> 
> 时间：2012-08-02T20:13:23.557
> 
> 标签：.net, wpf, vb.net, web-applications, radwindow

当我尝试使用以下代码打开模式 Radwindow（VB.NET、WPF、Web 应用程序）时：

```
Dim x as new RadWindow
x.content = MyContenctControl (UserControl)
x.Owner = me
x.ShowDialog 
```

第 3 行给我一个来自 VB.NET (Me) 的隐式对象的错误

> 错误 1 ​​类型“myProject.Main”的值无法转换为“System.Windows.Controls.ContentControl”。C:\....\Projects\MyProject\MyProject\Main.xaml.vb 100 57 myProject

我怎么能负担得起，所以主窗体（我）可以通过值“ByVal”方法传递，然后将其分配给 Radwindow 的 Owner 属性。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:18:56.157

我认为这应该有效：

```
x.Owner = Application.Current.MainWindow 
```

# image - 从 Stream 加载 XNA Texture2D

> ID：11785054
> 
> 赞同：1
> 
> 时间：2012-08-02T20:13:57.770
> 
> 标签：image, xna, format, texture2d

我需要使用 Texture2D.FromStream 加载几个图像，但它只能读取 JPG、PNG 和 GIF 图像，我已经尝试使用 System.Drawing 转换为 PNG，但它似乎太慢了。

是否有一个托管图像库（最好是开源的）用于从流中主要加载 BMP 和 TGA 图像？

# vb.net-2010 - 嵌套语句崩溃

> ID：11785059
> 
> 赞同：0
> 
> 时间：2012-08-02T20:14:17.083
> 
> 标签：vb.net-2010

在今天早些时候锁定 Visual Studio 2010 后，包含嵌套 With 语句的代码段不再工作，并锁定，我必须使用任务管理器来终止 VS-2010。

我有一段代码如下：

```
With cmd ' OleDbCommand object
    With .Parameters '<------- locks up when executing this line
        .AddWithValue("@Parm1", Parm1Value)
        .AddWithValue("@Parm2", Parm2Value)
        ' Etc.
    End With

    .ExecuteNonQuery()
End With 
```

这运行良好，直到 VS 更早锁定。我必须从目录中删除 SUO 文件，以便 VS 在尝试打开我之前打开的文档时不会抱怨。但随后这个嵌套的 With 语句停止工作。

但是，以下两种代码变体可以正常工作：

```
With cmd
    With cmd.Parameters '<--- with cmd explicitly specified
        .AddWithValue("@Parm1", Parm1Value)
        .AddWithValue("@Parm2", Parm2Value)
        ' Etc.
    End With

    .ExecuteNonQuery()
End With 
```

和

```
cmd.Parameters.AddWithValue("@Parm1", Parm1Value)
cmd.Parameters.AddWithValue("@Parm2", Parm2Value)

cmd.ExecuteNonQuery() 
```

任何利用外部 With 语句的嵌套 With 语句都会以同样的方式失败（即不必与 OleDb 对象结合使用）对象...相同的结果：它被锁定了。

我运行了 VS-2010 安装来进行修复，它仍然以这种方式运行。重新启动也不能解决问题。

我可以用不同的方式编写代码，但我不应该这样做，其次，谁知道当 VS 第一次崩溃时还有什么问题？！

我希望不必完全卸载/重新安装 VS-2010。

有没有其他人看到这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T00:26:38.640

当 VS2010 崩溃时，您是否正在处理此解决方案/项目？

在删除 SUO 文件之前和/或之后，您是否遇到过项目文件恢复选项？

作为一个兴趣点，使用 with 语句测试初始化​​ Anonymous 对象：

```
Dim cust0 = New With {.Name = "Toni Poe", .City = "Louisville"} 
```

您是否尝试过对您的解决方案进行“清洁”和“重建”。

尝试创建一个新的解决方案/项目并在新的 OleDbCommand 对象上测试嵌套的 with 语句。

不过，干净安装 VS2010 可能会让您感觉更好。我怀疑您的解决方案已损坏，而不是 vs2010。

# ruby-on-rails - ActiveAdmin 类似于 CouchDB 的 Rails 后端

> ID：11785060
> 
> 赞同：1
> 
> 时间：2012-08-02T20:14:18.817
> 
> 标签：ruby-on-rails, couchdb, activeadmin, backend

我正在搜索像 adminbackend 这样的 ActiveAdmin 以与 CouchDB 一起使用。有没有类似的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T07:57:09.467

不，CouchDB 不存在这样的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T14:44:01.683

ActiveAdmin 的发展变得更加与数据库无关，但大多数人投票支持 MongoDB 成为第一个受支持的 NoSQL 数据库。如果您想投票以不同的方式影响事物，请转到 ActiveAdmin 的问题队列并搜索问题。

# php - 通过 CMS 在 codeIgniter 中创建动态控制器

> ID：11785061
> 
> 赞同：0
> 
> 时间：2012-08-02T20:14:29.577
> 
> 标签：php, mysql, codeigniter

我目前正在为 codeIgniter 中的项目构建 CMS，我想知道当用户在数据库中创建新页面时，是否有任何方法可以通过 CMS 在 codeIgniter 中动态创建控制器文件。我不需要创建另一个模型，因为数据库中的表和视图都是相同的。基本上，网站中的所有页面（链接、标题、内容等）都来自同一个表。我只想保持这样的uri（www.mywebsite.com/class/function）。也没有路由。

我在网上环顾四周，我发现唯一接近我的请求的是 CRUD“codegen”，但我不能在线使用它，而且有很多我不需要的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T20:22:50.723

虽然每次用户将新页面添加到数据库时都可以创建一个新控制器，但是拥有一个将 db id 或页面名称作为参数并加载该页面的控制器不是更好吗？

因此，如果用户创建了两个名为 page1 和 page2 的页面，并且您有一个控制器用于为所有名为 dynamic.php 的动态页面提供服务，那么 URL 将是

```
www.mysite.com/dynamic/page1
www.mysite.com/dynamic/page2 
```

每次用户创建页面时创建一个控制器是一个很大的开销，并且还需要大量代码才能正确实现，例如当用户从数据库中删除页面时删除控制器。而且我认为在 SO 中提供编码解决方案会很麻烦。

# javascript - 使用复选框填写表格

> ID：11785063
> 
> 赞同：0
> 
> 时间：2012-08-02T20:14:52.993
> 
> 标签：javascript, forms, checkbox

我正在尝试在我的表单中添加一个复选框，它将帐单详细信息从表单复制到运输详细信息，但我的功能不起作用。

这是我到目前为止所拥有的：

```
function fillShipping(f) {

    var billing = document.forms["billing"];
    var shipping = document.forms["shipping"];

    if (document.getElementById("checkshipping").checked)

    {
    f.title.value = f.title.value;
    f.firstname.value = f.firstname.value;
    f.email.value = f.email.value
    f.phone.value = f.phone.value
    f.Address1.value = f.Address1.value
    f.Address2.value = f.Address2.value
    f.city.value = f.city.value
    f.postcode.value = f.postcode.value
    f.country.value = f.country.value
    } 
```

谁能指出我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T20:18:56.310

你可能是说

```
shipping.title.value = billing.title.value; 
```

代替

```
f.title.value = f.title.value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T20:18:40.653

如果您正在获取表格并将它们放入 vars 中，为什么要传入 f？为什么不 billing.email.value = shipping.email.value？另外你是如何调用这个函数的？

# apache - Htaccess .Redirec 双斜杠包含 url

> ID：11785073
> 
> 赞同：1
> 
> 时间：2012-08-02T20:15:35.120
> 
> 标签：apache, .htaccess, redirect

我有一个名为 mydomain.com 的网站。我正在其中创建“站点”文件夹，我将为我的用户创建许多站点。例如，我想为用户“杰克”创建一个名为“杰克”的文件夹，这样他们现在可以通过 mydomain.com/sites/jack 访问他们的页面。所以我的问题是如何让我的用户访问 mydomain.com/jack 但仍然可以看到上述 url 的内容并且还禁止使用 'mydomain.com/sites/jack' 之类的 url。
非常感谢你花时间陪伴 ！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T20:30:04.663

尝试将此添加到文档根目录中的 htaccess 文件中：

```
RewriteEngine On

# check to see if this user's site exists
RewriteCond %{DOCUMENT_ROOT}/sites%{REQUEST_URI} -f [OR]
RewriteCond %{DOCUMENT_ROOT}/sites%{REQUEST_URI} -d

# Rewrite into the /sites/ directory
RewriteRule !^/?sites/ /sites%{REQUEST_URI} [L]

# Redirect requests made directly to /sites/
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /sites/
RewriteRule ^/?sites/(.*)$ /$1 [R=301,L] 
```

# vba - 如何在 Outlook 2010 VBA 中修改定期约会的属性（时区）

> ID：11785074
> 
> 赞同：0
> 
> 时间：2012-08-02T20:15:35.890
> 
> 标签：vba, timezone, outlook-2010, recurring

我正在编写 VBA Outlook 宏的新修订版本，它将遍历用户日历中的所有约会，并将每个重复系列的时区更改为中央标准。但是，无论我做什么，我似乎都无法让它正确访问重复。目前，当我调试宏时，它会在第一次调用 ex.AppointmentItem.Subject 时失败（在定义重复模式 rPattern 后的 Debug.Print 语句中）。这里的核心问题是：如何一次访问和修改整个系列的定期约会？我可以a）修改主约会，b）遍历系列中的所有约会（这可能不会像我需要的那样设置所有未来的事件），或c）遍历异常集合并从那里修改重复？有人告诉我，遍历异常集合（尽管在名称上具有误导性）是修改重复的唯一方法。这个对吗？

我非常感谢您提供的任何帮助，谢谢！

注意： aItem<>Null 被注释掉作为测试，由于某种原因检查 Null 项目（甚至尝试了 Nothing 关键字）总是会导致错误。

```
 Public Sub IterateAll()

   Dim olApp As New Outlook.Application
   Dim aObject As Object
   Dim calCollection As Outlook.Items
   Dim tzs As Outlook.TimeZones
   Dim tzCentral As Outlook.TimeZone
   Dim tzUTC As Outlook.TimeZone
   Dim olNameSpace As Outlook.NameSpace
   Dim rPattern As Outlook.RecurrencePattern
   Dim ex As Outlook.Exception

   Dim s As Outlook.TimeZone
   Dim e As Outlook.TimeZone

   Set olNameSpace = olApp.GetNamespace("MAPI")
   Set calCollection = olNameSpace.GetDefaultFolder(olFolderCalendar).Items
   Set tzs = Application.TimeZones
   Set tzCentral = tzs("Central Standard Time")
   Set tzUTC = tzs("UTC")

   For Each aObject In calCollection

       If aObject.IsRecurring Then
           Set rPattern = aObject.GetRecurrencePattern

           Debug.Print ("Subject: " + aObject.Subject)
           Debug.Print ("Old Time Zone is " & aObject.StartTimeZone)
           aObject.StartTimeZone = tzCentral
           aObject.EndTimeZone = tzCentral
               Debug.Print ("New Time Zone is " & aObject.StartTimeZone)

           aObject.Save

        End If
       Next

    End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T05:12:24.730

我能够访问所有定期约会。请参阅此示例。我正在对 Outlook 使用后期绑定。

```
Option Explicit

Const olFolderCalendar = 9

Sub Sample()
    Dim oOlAp As Object, oOlns As Object, oOlfld As Object
    Dim colItems As Object, colFilteredItems As Object
    Dim oOlpatrn As Object, objItem As Object

    Set oOlAp = CreateObject("Outlook.Application")
    Set oOlns = oOlAp.GetNamespace("MAPI")
    Set oOlfld = oOlns.GetDefaultFolder(olFolderCalendar)

    Set colItems = oOlfld.Items

    Set colFilteredItems = colItems.Restrict("[IsRecurring] = TRUE")

    For Each objItem In colFilteredItems
        Set oOlpatrn = objItem.GetRecurrencePattern
        If oOlpatrn.PatternEndDate > Now Then
            Debug.Print objItem.Subject
        End If
    Next
End Sub 
```

**跟进**

```
Const olFolderCalendar = 9

Sub Sample()
    Dim oOlAp As Object, oOlns As Object, oOlfld As Object
    Dim colItems As Object, colFilteredItems As Object
    Dim oOlpatrn As Object, objItem As Object
    Dim tzs As Object, tzCentral As Object

    Set oOlAp = CreateObject("Outlook.Application")
    Set oOlns = oOlAp.GetNamespace("MAPI")
    Set oOlfld = oOlns.GetDefaultFolder(olFolderCalendar)

    Set colItems = oOlfld.Items

    Set colFilteredItems = colItems.Restrict("[IsRecurring] = TRUE")

    Set tzs = Application.TimeZones
    Set tzCentral = tzs("Central Standard Time")

    For Each objItem In colFilteredItems
        Set oOlpatrn = objItem.GetRecurrencePattern
        If oOlpatrn.PatternEndDate > Now Then
            Debug.Print "Old Time Zone is " & objItem.StartTimeZone
            objItem.StartTimeZone = tzCentral
            Debug.Print "New Time Zone is " & objItem.StartTimeZone
            objItem.Save
        End If
    Next
End Sub 
```

# c# - 依赖于 LinqToObjects 的自定义 IQueryProvider

> ID：11785076
> 
> 赞同：5
> 
> 时间：2012-08-02T20:15:38.860
> 
> 标签：c#, linq-to-objects, iqueryable

我编写了一个自定义 IQueryProvider 类，该类接受一个表达式并针对 SQL 数据库对其进行分析（我知道我可以使用 Linq2Sql，但我需要进行一些修改和调整，不幸的是，这使得 Linq2Sql 不适合）。该类将识别并处理标记的属性（使用属性），但我希望能够将表达式传递给 LinqToObject 提供程序并允许它过滤之后的结果。

例如，假设我有以下 linq 表达式：

```
var parents=Context.Parents
    .Where(parent=>parent.Name.Contains("T") && parent.Age>18); 
```

Parent类是一个自定义类，实现了IQueryProvider和IQueryable接口，但是只有Age属性被标记为检索，所以会处理Age属性，但是Name属性因为没有被标记而被忽略。在我处理完 Age 属性后，我想将整个表达式传递给 LinqToObjects 进行处理和过滤，但我不知道如何。

NB 它不需要删除表达式的 Age 子句，因为即使在我处理它之后结果也是一样的，所以我总是能够将整个表达式发送到 LinqToObjects。

我已经尝试了以下代码，但它似乎不起作用：

```
IEnumerator IEnumerable.GetEnumerator() {       
    if(this.expression != null && !this.isEnumerating) {
        this.isEnumerating = true;
        var queryable=this.ToList().AsQueryable();
        var query = queryable.Provider.CreateQuery(this.expression);
        return query.GetEnumerator();
    }
    return this;
} 
```

this.isEnumerating 只是一个布尔标志，用于防止递归。

this.expression 包含以下内容：

```
{value(namespace.Parents`1[namespace.Child]).Where(parent => ((parent.Name.EndsWith("T") AndAlso parent.Name.StartsWith("M")) AndAlso (parent.Test > 0)))} 
```

当我单步执行代码时，尽管将结果转换为列表，但它仍然使用我的自定义类进行查询。所以我想，因为类 Parent 位于表达式的开头，它仍在将查询路由回我的提供程序，所以我尝试将 this.expression 设置为方法调用的 Argument[1] ，所以它是这样的：

```
{parent => ((parent.Name.EndsWith("T") AndAlso parent.Name.StartsWith("M")) AndAlso (parent.Test > 0))} 
```

对我来说看起来更像它，但是，每当我将它传递给 CreateQuery 函数时，我都会收到此错误“参数表达式无效”。

表达式的节点类型现在是 'Quote' 而不是 'Call' 并且方法为 null。我怀疑我只需要以某种方式使这个表达式成为调用表达式，它就会起作用，但我不知道该怎么做。

请记住，此表达式是 where 子句，但它可能是任何类型的表达式，我不希望在将表达式传递给 List 查询提供程序之前尝试分析表达式以查看它是什么类型。

也许有一种方法可以将原始表达式的 Parent 类剥离或替换为列表提供程序类，但仍使其处于可以作为表达式传入列表提供程序的状态，而不管表达式的类型如何？

对此的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-23T18:51:25.203

你离得太近了！

我的目标是避免不得不“复制”完整的、令人费解的 SQL 到对象表达式功能集。你让我走上了正确的轨道（谢谢！）这里是如何在自定义 IQueryable 中搭载 SQL-to-Object：

```
public IEnumerator<T> GetEnumerator() {

    // For my case (a custom object-oriented database engine) I still 
    // have an IQueryProvider which builds a "subset" of objects each populated 
    // with only "required" fields, as extracted from the expression. IDs, 
    // dates, particular strings, what have you. This is "cheap" because it 
    // has an indexing system as well.

    var en = ((IEnumerable<T>)this.provider.Execute(this.expression));

    // Copy your internal objects into a list.

    var ar = new List<T>(en);
    var queryable = ar.AsQueryable<T>();

    // This is where we went wrong:
    // queryable.Provider.CreateQuery(this.expression);
    // We can't re-reference the original expression because it will loop 
    // right back on our custom IQueryable<>. Instead, swap out the first 
    // argument with the List's queryable:

    var mc = (MethodCallExpression)this.expression;
    var exp = Expression.Call(mc.Method, 
                    Expression.Constant(queryable), 
                    mc.Arguments[1]);

    // Now the CLR can do all of the heavy lifting
    var query = queryable.Provider.CreateQuery<T>(exp);
    return query.GetEnumerator();
} 
```

不敢相信这花了我 3 天的时间来弄清楚如何避免在 LINQ-to-Object 查询上重新发明轮子。

# c# - 基于成员平等的两个对象的联合

> ID：11785079
> 
> 赞同：6
> 
> 时间：2012-08-02T20:16:08.390
> 
> 标签：c#

为了举例，让我们从一个类定义开始：

```
public class Person
{
    public string FirstName;
    public string LastName;
    public int Age;
    public int Grade;
} 
```

现在让我们假设我有一个包含 3 个对象的`List<Person>`调用：`people`

```
{"Robby", "Goki", 12, 8}
{"Bobby", "Goki", 10, 8}
{"Sobby", "Goki", 10, 8} 
```

我正在寻找的是某种检索以下单个`Person`对象的方法：

```
{null, "Goki", -1, 8} 
```

其中所有对象中相同的字段保留其值，而具有多个值的字段被替换为一些**无效**值。

我的第一个想法包括：

```
Person unionMan = new Person();
if (people.Select(p => p.FirstName).Distinct().Count() == 1)
    unionMan.FirstName = people[0].FirstName;
if (people.Select(p => p.LastName).Distinct().Count() == 1)
    unionMan.LastName = people[0].LastName;
if (people.Select(p => p.Age).Distinct().Count() == 1)
    unionMan.Age = people[0].Age;
if (people.Select(p => p.Grade).Distinct().Count() == 1)
    unionMan.Grade = people[0].Grade; 
```

不幸的是，真正的业务对象的**成员**多于四个，这既繁琐，又让其他人第一次看到时不知所措。

我还考虑过以某种方式利用反射将这些重复的检查和分配放在一个循环中：

```
string[] members = new string[] { "FirstName", "LastName", "Age", "Grade" };
foreach (string member in members)
{
    if (people.Select(p => p.**member**).Distinct().Count() == 1)
        unionMan.**member** = people[0].**member**;
} 
```

其中**** *member* ****将是但是反射将允许检索和存储该特定成员（假设它是可能的）。

虽然第一个解决方案可行，而我假设第二个解决方案可行，但有没有人有更好的替代解决方案来解决这个问题？如果不是，那么使用上述反射是否可行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T20:49:11.213

仅仅为了计算不同的成员而对所有值进行区分是低效的。您有一个快捷方案，其中在*任何*后续项目中找到一个值与第一个项目的成员不同的值意味着您对该列的状态无效。

这样的事情应该可以工作，但如果任何成员是数组，需要递归评估或其他更复杂的逻辑，则需要做更多的工作（注意我没有测试过这个）：

```
public static T UnionCombine<T>(this IEnumerable<T> values) where T : new() {
    var newItem = new T();
    var properties = typeof(T).GetProperties();
    for (var prop in properties) {
        var pValueFirst = prop.GetValue(values.First(), null);
        var useDefaultValue = values.Skip(1).Any(v=>!(Object.Equals(pValueFirst, prop.GetValue(v, null))));
        if (!useDefaultValue) prop.SetValue(newItem, pValueFirst, null);
    }
    return newItem;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T20:42:01.583

您的最后一个想法对我来说似乎很好，如下所示：

```
List<Person> persons = new List<Person>()
{
    new Person(){ FirstName="Robby", LastName="Goki", Age=12, Grade=8},
    new Person(){ FirstName="Bobby", LastName="Goki", Age=10, Grade=8},
    new Person(){ FirstName="Sobby", LastName="Goki", Age=10, Grade=8},
};

var properties = typeof(Person).GetProperties();

var unionMan = new Person();
foreach (var propertyInfo in properties)
{
    var values = persons.Select(x => propertyInfo.GetValue(x, null)).Distinct();
    if (values.Count() == 1)
        propertyInfo.SetValue(unionMan, propertyInfo.GetValue(persons.First(), null), null);
} 
```

几点观察：

*   您的类成员应定义为属性而不是公共成员，并且 get 和 set 访问器都必须是公共的
*   默认构造函数应定义“无效”值（如@RaphaëlAlthaus 正确建议的那样）

所以，类 Person 看起来像这样：

```
public class Person
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public int Age { get; set; }
    public int Grade { get; set; }
    public Person()
    {
        this.FirstName = null;
        this.LastName = null;
        this.Age = -1;
        this.Grade = -1;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T20:42:15.517

**更新：**由于您无法控制 Person 类，并且状态是在公共字段而不是属性中定义的，因此我更新了解决方案来解决这个问题。

我建议使用反射。您可能希望提前获取[FieldInfo](http://msdn.microsoft.com/en-us/library/system.reflection.fieldinfo.aspx)（或[PropertyInfo](http://msdn.microsoft.com/en-us/library/system.reflection.propertyinfo.aspx)）对象，而不是为 LINQ 查询中的每个条目获取它。您可以使用[Type.GetField](http://msdn.microsoft.com/en-us/library/53seyfee)和[Type.GetProperty](http://msdn.microsoft.com/en-us/library/kz0a8sxy.aspx)来获取它们。一旦你有了这些，你可以简单地使用[FieldInfo](http://msdn.microsoft.com/en-us/library/system.reflection.fieldinfo.getvalue.aspx) / [PropertyInfo.GetValue](http://msdn.microsoft.com/en-us/library/b05d59ty.aspx)和[FieldInfo](http://msdn.microsoft.com/en-us/library/6z33zd7h.aspx) / [PropertyInfo.SetValue](http://msdn.microsoft.com/en-us/library/xb5dd1f1.aspx)。

例如：

```
Type personType = typeof(Person);
foreach(string member in members)
{   // Get Fields via Reflection
    FieldInfo field = peopleType.GetField(member);
    if(field != null)
    {
        if (people.Select(p => field.GetValue(p, null) ).Distinct().Count() == 1)
        {
            field.SetValue(unionMan, field.GetValue(people[0], null), null);
        }
    }
    else // If member is not a field, check if it's a property instead
    {   // Get Properties via Reflection
        PropertyInfo prop = peopleType.GetProperty(member);
        if(prop != null)
        {
            if (people.Select(p => prop.GetValue(p, null) ).Distinct().Count() == 1)
            {
                prop.SetValue(unionMan, prop.GetValue(people[0], null), null);
            }
        }
    }
} 
```

正如您所指出的，您已经在默认构造函数中设置了“无效”值，因此您不必在此循环中担心它们。

**注意：**在我的示例中，我使用了`GetField`和`GetProperties`不带[`BindingFlags`](http://msdn.microsoft.com/en-us/library/system.reflection.bindingflags)参数的版本。这些只会返回公共成员。

# php - 如何在核心 PHP 项目中一次包含所有 Zend 类？

> ID：11785082
> 
> 赞同：1
> 
> 时间：2012-08-02T20:16:16.990
> 
> 标签：php, zend-framework

我在我的 CORE PHP 项目中使用 Zend Framework 类。我没有使用 ZF 的所有功能，只需要一些类。

我需要知道如何一次包含所有 Zend 类，这样我就不会在每次需要时一一包含它。

在采埃孚，我们正在这样做

```
defined('APPLICATION_PATH')
|| define('APPLICATION_PATH', realpath(dirname(__FILE__) . '/../application'));

set_include_path(implode(PATH_SEPARATOR, array(
realpath(APPLICATION_PATH . '/../library'),
get_include_path(),
)));

public function _initRegisterLibraries(){
    $moduleLoader = new Zend_Application_Module_Autoloader(array('namespace' => '', 'basePath' => APPLICATION_PATH));
    $autoLoader = Zend_Loader_Autoloader::getInstance(); 
    return $moduleLoader;
  } 
```

我们如何在我想使用一些 zend 类的 CORE PHP 中实现相同的目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T20:28:55.760

对我来说，我在任何 PHP 文件中都这样做：

```
define('WWW_PATH', dirname(__FILE__) . '/../..');

set_include_path(implode(PATH_SEPARATOR, array(realpath(WWW_PATH . '/library'), get_include_path())));

require_once 'Zend/Loader/Autoloader.php';

$autoloader = Zend_Loader_Autoloader::getInstance();

$autoloader->registerNamespace('Zend_'); 
```

然后我可以实例化任何我想要的 Zend 类，例如：

```
$db = new Zend_Db_Adapter_Mysql(); 
```

（只要确定`WWW_PATH`当前所在的库目录所在的位置）

# visual-studio-2010 - 如何在 Visual Studio 中创建一个不打算编译的项目？

> ID：11785083
> 
> 赞同：2
> 
> 时间：2012-08-02T20:16:18.843
> 
> 标签：visual-studio-2010, project, projects-and-solutions

我有一个 Visual Studio 2010 解决方案，我想向其中添加一个仅包含一些命令行脚本的项目。这个项目并不意味着实际编译/构建任何东西，但我希望能够使用解决方案的其余部分编辑我的脚本，并进行 TFS 集成等。

不幸的是，在搜索中，我得到了很多关于未发生构建的错误或实现特定构建目标的其他情况的结果。我只是想要一个 VS 中的非构建项目作为编辑器的可视化存储库。我不想在解决方案文件夹中一一包含单个文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T20:23:40.610

在[构建配置管理器](http://msdn.microsoft.com/en-us/library/t1hy4dhz%28v=vs.100%29.aspx)（在菜单上，“构建”，“配置管理器”）中，每个项目都有一个“构建”复选框。为您的脚本项目取消选中它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T20:24:58.400

您能否制作一个内容项目，将您的脚本添加到其中，然后将它们的属性更改为“不编译”？

# d3.js - 折线图的参考线

> ID：11785086
> 
> 赞同：7
> 
> 时间：2012-08-02T20:16:23.997
> 
> 标签：d3.js

我正在尝试在 D3.js 中绘制我们客户的平均寿命。我将数据绘制出来，但我不知道如何绘制显示中位寿命的参考线。我想要在 y 轴的 50% 值处与我的数据相交的垂直和水平参考线。

这是我目前拥有的： ![平均寿命](../Images/32be5828c2ffa919fedb7825ba632cb5.png)

垂直参考线需要与水平参考线在同一位置与数据相交。

这是我的代码：

```
d3.json('data.json', function(billingData) {
    var paying = billingData.paying;
    var w = 800;
    var h = 600;
    var secondsInInterval = 604800000; // Seconds in a week

    var padding = 50;

    var age = function(beginDate, secondsInInterval) {
        // Calculate how old a subscription is given it's begin date

        var diff = new Date() - new Date(beginDate);
        return Math.floor(diff / secondsInInterval);
    }

    var maxAge = d3.max(paying, function(d) { return age(d.subscription.activated_at, secondsInInterval); });

    var breakdown = new Array(maxAge);

    $.each(paying, function(i,d) {
        d.age = age(d.subscription.activated_at, secondsInInterval);
        for(var i = 0; i <= d.age; i++) {
            if ( typeof breakdown[i] == 'undefined' ) breakdown[i] = 0;
            breakdown[i]++;
        }
    });

    // Scales
    var xScale = d3.scale.linear().domain([0, maxAge]).range([padding,w-padding]);
    var yScale = d3.scale.linear().domain([0, 1]).range([h-padding,padding]);

    // Axes
    var xAxis = d3.svg.axis().scale(xScale).tickSize(6,3).orient('bottom');
    var yAxis = d3.svg.axis().scale(yScale).tickSize(6,3).tickFormat(d3.format('%')).orient('left');

    var graph = d3.select('body').append('svg:svg')
            .attr('width', 800)
            .attr('height', 600);

    var line = graph.selectAll('path.line')
            .data([breakdown])
            .enter()
            .append('svg:path')
            .attr('fill', 'none')
            .attr('stroke', 'blue')
            .attr('stroke-width', '1')
            .attr("d", d3.svg.line()
            .x(function(d,i) {
                return xScale(i);
            })
            .y(function(d,i) {
                return yScale(d/paying.length);
            })
    );

    var xMedian = graph.selectAll('path.median.x')
            .data([[[maxAge/2,0], [maxAge/2,1]]])
            .enter()
            .append('svg:path')
            .attr('class', 'median x')
            .attr("d", d3.svg.line()
            .x(function(d,i) {
                return xScale(d[0]);
            })
            .y(function(d,i) {
                return yScale(d[1]);
            })
    );

    var yMedian = graph.selectAll('path.median.y')
            .data([[[0,.5], [maxAge,0.5]]])
            .enter()
            .append('svg:path')
            .attr('class', 'median y')
            .attr("d", d3.svg.line()
            .x(function(d,i) {
                return xScale(d[0]);
            })
            .y(function(d,i) {
                return yScale(d[1]);
            })
    );

    graph.append('g').attr('class', 'x-axis').call(xAxis).attr('transform', 'translate(0,' + (h - padding) + ')')
    graph.append('g').attr('class', 'y-axis').call(yAxis).attr('transform', 'translate(' + padding + ',0)');
    graph.append('text').attr('class', 'y-label').attr('text-anchor', 'middle').text('customers').attr('transform', 'translate(10,' + (h / 2) + '), rotate(-90)');
    graph.append('text').attr('class', 'x-label').attr('text-anchor', 'middle').text('lifetime (weeks)').attr('transform', 'translate(' + (w/2) + ',' + (h - padding + 40) + ')');
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T20:33:03.233

您需要搜索客户在您的行中占 50% 的点（大约 7 周），就是这样，搜索接近 0.5的索引`i`，将该索引保存为（例如）并修改您的代码`breakdown[i]/paying.length``indexMedianCustomers`

```
var xMedian = graph.selectAll('path.median.x')
        .data([[[indexMedianCustomers,0], [indexMedianCustomers,1]]])
        .enter()
        .append('svg:path')
        .attr('class', 'median x')
        .attr("d", d3.svg.line()
        .x(function(d,i) {
            return xScale(d[0]);
        })
        .y(function(d,i) {
            return yScale(d[1]);
        })
); 
```

# iphone - 如何将数据从一个视图传递到 IOS 中的另一个视图控制器？

> ID：11785092
> 
> 赞同：0
> 
> 时间：2012-08-02T20:16:53.090
> 
> 标签：iphone, ios, ios5, shake

我正在使用**Xcode 4.3.1**。我使用具有许多视图控制器的 Storyboard 创建了 UI。

**问题**

在我的应用程序中，我使用的是 ShakeGesture。虽然摇晃我正在做一些操作，但它工作正常。但是，当摇晃停止时，我需要将一些值传递给另一个视图控制器以显示它。我看过很多帖子说如何在单击按钮时传递值，但没有一个与我的问题有关。

如果能解决我的问题就好了

**我的问题是**

摇动停止后如何将值从一个视图传递到另一个视图控制器？

我正在寻找任何示例或教程。非常感激。

**编辑**

上述问题的确切功能

我在**第一个视图控制器中有一个按钮**

![在此处输入图像描述](../Images/5cb80e91844da13dd68d12b25451e040.png)

当按钮触发时，它将弹出带有一些数据的pickerview。当用户选择它时，选择器值将替换按钮值。

![在此处输入图像描述](../Images/b343e6a4cbe8979440d296c6b7499151.png)

然后当它停止时发生抖动我必须将数据传递给其他视图控制器。

**代码**

```
- (void)motionEnded:(UIEventSubtype)motion withEvent:(UIEvent *)event {
if (event.subtype == UIEventSubtypeMotionShake)
{
        // I need to pass data here. Thats i am confusing

} 
```

}

谢谢你们的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T20:28:09.070

通过 ctrl 从故事板中的第一个视图控制器拖动到第二个视图控制器来创建一个 segue。单击 segue 并转到身份检查器（按 command-option-3）。在标识符字段中为其命名，例如“Shaking Stopped”。然后在您的运动结束方法中使用...

```
 [self performSegueWithIdentifier:@"Shaking Stopped" sender:self]; 
```

这将使视图切换到您的第二个。然后在你准备segue的时候把它改成这个......（当然使用你自己的价值观）

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([segue.identifier isEqualToString:@"Shaking Stopped"]) {
<The Second View Controller> *controller = segue.destinationViewController
        //change your values in the other view controller here 
        controller.someValue = self.someValue //an example 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T20:46:45.057

要检测摇动手势的结束，请在视图控制器中实现 motionEnded:withEvent。

```
- (void) motionEnded:(UIEventSubtype)motion withEvent:(UIEvent *)event
{
 if (event.type == UIEventSubtypeMotionShake)
 {
   // perform the seque
 }
} 
```

使用上述技术将数据传递到此视图控制器

# ruby-on-rails - Carrierwave Rails 3 S3，将文件大小保存到数据库

> ID：11785094
> 
> 赞同：2
> 
> 时间：2012-08-02T20:17:07.777
> 
> 标签：ruby-on-rails, amazon-s3, carrierwave

在 Rails 3.2.6 中使用 Carrierwave。一切都很好，除了我需要对一个表格进行排序，其中一些附件按文件大小显示。我正在使用 S3 进行雾存储。

假设我有一个像这样显示的 Carrierwave：

```
<%= @project.attachment %> 
```

我可以在字段名称后使用“.size”来显示文件的大小：

```
<%= @project.attachment.size %> 
```

以字节为单位显示文件大小，但由于我在从数据库中获取记录时需要使用 order 子句，因此无法对此进行排序。上传后有什么方法可以将文件大小写入数据库中的特定列，以便我可以对此进行排序？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T04:07:10.607

这对我有用

```
 before_save :update_project_attributes

 private

 def update_project_attributes
    if project.present? && project_changed?
      self.file_size = project.file.size
    end
 end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T21:51:10.497

您应该向模型添加一个虚拟属性并定义一个返回文件大小的自定义 getter 方法。然后，您可以像往常一样根据此虚拟属性进行排序。如果您需要更多详细信息，请告诉我，我会尽力提供！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T08:35:28.767

好的，让它与 before_save 一起使用

```
before_save :set_size

def set_size
  self.size = self.upload.size
end 
```

其中 upload 是挂载的字段，size 是一个新的 db 列来存储大小。

# ios - 如何使用 NSDateFormatter 生成 2012-07-28T23:59:00-06:00？

> ID：11785095
> 
> 赞同：0
> 
> 时间：2012-08-02T20:17:10.423
> 
> 标签：ios, cocoa, nsdate, nsdateformatter

格式化此字符串的适当方法是什么：

2012-07-28T23:59:00-06:00

这是我正在使用的代码，日期格式化程序当前将 s.due_At 的值设置为 nil，并且两个 NSLog 都显示为 null。我从字典中得到了上面的字符串，确定我已经 NSLogged 了。

```
 NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
                [dateFormatter setLocale:[NSLocale currentLocale]];
                [dateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ssZ"];
                s.due_At = [dateFormatter dateFromString:[assignmentData  objectForKey:@"due_at"]];

                NSLog(@"%@",[dateFormatter stringFromDate:s.due_At]);
                NSLog(@"%@",[dateFormatter dateFromString:[assignmentData objectForKey:@"due_at"]]); 
```

如何解决此问题以输出上述字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T20:47:08.483

`Z`字面意思是 RFC 822 标准，它不允许您`:`在小时和分钟之间：

```
 zone        =  "UT"  / "GMT"                ; Universal Time
                                             ; North American : UT
             /  "EST" / "EDT"                ;  Eastern:  - 5/ - 4
             /  "CST" / "CDT"                ;  Central:  - 6/ - 5
             /  "MST" / "MDT"                ;  Mountain: - 7/ - 6
             /  "PST" / "PDT"                ;  Pacific:  - 8/ - 7
             /  1ALPHA                       ; Military: Z = UT;
                                             ;  A:-1; (J not used)
                                             ;  M:-12; N:+1; Y:+12
             / ( ("+" / "-") 4DIGIT )    ; Local differential
                                             ;  hours+min. (HHMM) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T21:48:38.453

谢谢你的帮助。好的，所以我稍微更改了格式化程序。这是代码。

```
 NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
            [dateFormatter setDateStyle:NSDateFormatterShortStyle];
            [dateFormatter setLocale:[NSLocale currentLocale]];
            [dateFormatter setDateFormat:@"yyyy-MM-dd'T'HHmmssZ"];

            s.due_At = [dateFormatter dateFromString:[[assignmentData objectForKey:@"due_at"] stringByReplacingOccurrencesOfString:@":" withString:@""]];

            NSLog(@"%@",[dateFormatter stringFromDate:s.due_At]); 
```

Nslog 不再为空，尽管它仍然包含中间的 T。这是现在的日志消息。

2012-07-29T015900-0400

# http - 使用 mod_rewrite .htaccess 将 www 添加到 http:// 同时从 https:// 删除 www

> ID：11785097
> 
> 赞同：0
> 
> 时间：2012-08-02T20:17:21.307
> 
> 标签：http, .htaccess, mod-rewrite, https, firewire

我想使用 mod_rewite/.htaccess 执行以下操作：

*   将 www 添加到 http 网址
*   从 https url 中删除 www

对于同一个站点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T12:04:57.117

1.  获取[Apache Mod_Rewrite 文档](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)。还有[http://whathaveyoutried.com](http://whathaveyoutried.com)。

2.  您可以`HTTPS`使用`RewriteCond {%HTTPS} on`（或`!on`）检查状态

3.  您可以使用（或）`www.`在主机上检查。匹配的模式是 in ，反向引用是。`RewriteCond {%HTTP_HOST} ^www\.(.*)$``!^www\.(.*)$``%n``RewriteRule``$n`

4.  您可以使用 重写 URL `RewriteRule ^(.*)$ http://www.%1/$1 [R=301,L]`。通过切换`http`和`https`删除`www.`，您可以更改它以适应`HTTPS`规则。

最终代码：

```
RewriteCond {%HTTPS} on
RewriteCond {%HTTP_HOST} ^www\.(.*)$
RewriteRule ^(.*)$ https://%1/$1 [R=301,L]

RewriteCond {%HTTPS} !on
RewriteCond {%HTTP_HOST} !^www\.(.*)$
RewriteRule ^(.*)$ http://www.%1/$1 [R=301,L] 
```

我再说一遍，[http://whathaveyoutried.com](http://whathaveyoutried.com)

# c# - 将数字 [n] 0-9 转换为键盘 Shift+[n] 个字符

> ID：11785099
> 
> 赞同：2
> 
> 时间：2012-08-02T20:17:49.790
> 
> 标签：c#

除了使用 case 语句之外，是否有更简单的方法将数字转换为 C# 中等效的键盘 Shift+[n]？假设使用标准英语键盘。

```
9=(
8=*
7=&
6=^
5=%
4=$
3=#
2=@
1=!
0=) 
```

我不知道语言中内置的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T20:24:03.763

正如评论中所建议的，您可以制作一个查找表，而不是使用`switch`语句。使用[初始化语法](http://msdn.microsoft.com/en-us/library/bb531208.aspx)，编码量被最小化。

```
Dictionary<int, char> shiftLookup = new Dictionary<int, char>
{
    {9, '('},
    {8, '*'},
    {7, '&'},
    {6, '^'},
    {5, '%'},
    {4, '$'},
    {3, '#'},
    {2, '@'},
    {1, '!'},
    {0, ')'}
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T20:25:48.917

我会这样做：

```
char[] map = new char[] { '!', '@', ... }; 
```

得到一个：`map[c - '0']`并且不要忘记检查输入范围。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T20:22:13.437

创建一个[字典](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)，其中 TKey 将是一个数字 (0-9)，而 value 将是一个符号。

# .net - 使用反射确定方法的返回类型？

> ID：11785103
> 
> 赞同：1
> 
> 时间：2012-08-02T20:18:13.987
> 
> 标签：.net, reflection

我很确定我知道这个问题的答案（你做不到），但我想看看我是否错过了什么。

如果我有课：

```
public class Foo
{
}

public class Bar : Foo
{
} 
```

还有一个方法：

```
public Foo DoSomething()
{
  return new Bar();
} 
```

我是否正确地说如果不执行该方法就无法知道 DoSomething 的“真实”返回类型是什么？意思是，如果我这样做：

```
MethodInfo mi = this.GetType().GetMethod("DoSomething", BindingFlags.Public | BindingFlags.Instance);
//at this point, mi.ReturnType will be of type "Foo". 
```

如果不执行该方法并调查我返回的对象，就无法真正知道 DoSomething 实际上返回了一个 Bar，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T20:37:10.737

你是对的。不执行代码就无法知道实际的返回类型，因为实际的返回类型可能取决于仅在运行时才知道的因素，并且可能因执行而异（例如，根据传递给方法的参数或其他方法的返回值）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T20:39:12.333

正确的。

我会假设 DoSomething 方法的重点是返回一个特定的派生类型，并且能够将它用作 Foo 的一般用途。

在那种情况下，我不确定知道要返回的派生类型有什么好处，但这可能不是你的问题。:)

# java - 如何在启动/初始化时更改/编辑 JPanel 对象

> ID：11785109
> 
> 赞同：2
> 
> 时间：2012-08-02T20:18:24.523
> 
> 标签：java, swing, initialization, jpanel, jcomponent

我想在启动/初始化时更改小程序中的 JPanel 对象。我不知道该怎么做。我做了一个简单的例子来说明我清除 JPanel 的问题。当它被 init() 方法调用时它不起作用，但当我按下按钮时它起作用。如何在启动/初始化时更改 JPanel？

```
import javax.swing.JApplet;
import javax.swing.JPanel;
import java.awt.Color;
import java.awt.Graphics;

import javax.swing.JButton;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;

public class TestStartUpApplet extends JApplet {

    JPanel panel;   

    @Override
    public void init() {
        System.out.println("Init");
        erasePanel();
    }

    private void erasePanel() {
        Graphics g = panel.getGraphics();
        g.clearRect(0, 0, 117, 48);
    }

    public TestStartUpApplet() {
        getContentPane().setLayout(null);

        panel = new JPanel();
        panel.setBackground(Color.RED);
        panel.setBounds(35, 36, 117, 48);
        getContentPane().add(panel);

        JButton btnTest = new JButton("Test");
        btnTest.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
                erasePanel();
            }
        });
        btnTest.setBounds(35, 108, 117, 25);
        getContentPane().add(btnTest);

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T21:58:39.040

只为我工作：

```
public class AppletPaintTest extends JApplet {

    @Override
    public void init() {

        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {

                setLayout(new BorderLayout());

                ImagePane pane = new ImagePane();
                pane.setBackground(Color.RED);
                pane.setOpaque(false); // Little trick

                add(pane);

            }
        });

    }

    @Override
    public void start() {
        super.start();
    }

    public class ImagePane extends JPanel {

        @Override
        protected void paintComponent(Graphics g) {

            super.paintComponent(g);

            Graphics2D g2d = (Graphics2D)g.create();

            Insets insets = getInsets();
            int x = insets.left;
            int y = insets.top;
            int width = getWidth() - 1 - (insets.left + insets.right);
            int height = getHeight() - 2 - (insets.top + insets.bottom);

            g2d.setColor(getBackground());
            g2d.fillRect(x + 10, y + 10, width - 20, height - 20);

            g2d.dispose();

        }

    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T20:48:50.867

问题

1.  不知道为什么要在没有任何自定义绘画的情况下清除空的[JPanel](http://docs.oracle.com/javase/tutorial/uiswing/components/panel.html)

2.  `JPanel`红色有什么问题`Background`

3.  在屏幕上可见之前清除[JApplet](http://docs.oracle.com/javase/tutorial/deployment/applet/index.html)

4.  不能正常工作，因为没有任何作用

建议

*   不要使用[AbsoluteLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/none.html)，而是使用[LayoutManager](http://docs.oracle.com/javase/tutorial/uiswing/layout/index.html)

*   `Graphics g = panel.getGraphics();`对于[打印到打印机](http://docs.oracle.com/javase/tutorial/2d/printing/index.html)或将[图形保存到图像](http://docs.oracle.com/javase/tutorial/2d/images/index.html)很有用，请勿出于其他原因使用此方法

*   阅读[JApplet 的](http://docs.oracle.com/javase/tutorial/deployment/applet/index.html)工作原理

*   如果您不想将 GUI 发布到 Web 浏览器，可能会使用[JFrame](http://docs.oracle.com/javase/tutorial/uiswing/components/frame.html)

*   也许阅读有关[2D 图形的教程](http://docs.oracle.com/javase/tutorial/2d/index.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T22:08:11.567

每当您在对您的`paint()`或`paintComponent()`方法的通常系统调用之外进行任何自定义绘制时，您必须调用`invalidate()`您希望重新绘制的任何组件。所以对于你的`erasePanel()`方法，我建议设置一些标志然后调用`panel.invalidate()`. 然后在面板的`paintComponent()`方法中，您可以检查标志以查看是否需要绘制介绍性图片或将面板留空。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T22:29:35.707

好的，问题似乎是我的编码很糟糕。我想通过另一个类的方法更改面板对象，但这不是这样做的方法。我重写了我的代码并创建了一个面板类，其中使用paintcomponent 完成绘画。我现在使用这个面板类的对象，它会在启动时显示我想要的图形。

谢谢您的帮助！

# html - 当页面宽度较小时，css浮动“挤压”元素

> ID：11785110
> 
> 赞同：0
> 
> 时间：2012-08-02T20:18:27.147
> 
> 标签：html, css

有没有办法让两个元素在同一个容器中并排浮动，而当窗口大小减小时，最右边的元素不会被挤压到下面？相反，我希望正确的元素被窗口覆盖。

这是CSS：

```
#logo {
margin-left: 400px;
float:left; 
}

#loginbox {
margin-top: 15px;
float:left;
height: 70px;
width: 375px; 
} 
```

和html

```
<div class="header">
        <div id='logo'>
            <img id='logo-img' src='graphics/banner2.png' alt='Logo' height=200px width=700x />
        </div>
        <div id='loginbox' class='login'>
            <form id='login' >
                <span style="font-weight: bold; color: red;">Login</span>
                <br />
                <br />
                <input type="text" id='login-email' value='email' />
                <input type='text' id='login-password' value='password' />
                <input type='submit' value='login'/>
            </form>
        </div>
        <br style='clear:both' />
    </div><!-- end header --> 
```

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T20:21:49.163

您需要为标题和单元格设置硬宽度：

[http://jsfiddle.net/ByWM2/](http://jsfiddle.net/ByWM2/)

```
<div class="header">
        <div id='logo'>
            <img id='logo-img' src='graphics/banner2.png' alt='Logo' />
        </div>
        <div id='loginbox' class='login'>
            <form id='login' >
                <span style="font-weight: bold; color: red;">Login</span>
                <br />
                <br />
                <input type="text" id='login-email' value='email' />
                <input type='text' id='login-password' value='password' />
                <input type='submit' value='login'/>
            </form>
        </div>
    </div><!-- end header -->​

.header { width:700px; overflow:hidden; }

#logo {
background:lime;
min-width:300px;
float:left; 
}

#loginbox {
background:cyan;
float:left;
height: 70px;
min-width: 400pxpx; 
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T20:32:03.000

有几种方法可以解决这个问题，这里有一个：

假设左列的宽度已知，您可以将右列设置为绝对位置，并将其左边距设置为左列宽度的宽度，以便正确定位。您还必须将父 div 的位置设置为相对位置才能使其正常工作。这是小提琴：

[http://jsfiddle.net/JKXrV/1/](http://jsfiddle.net/JKXrV/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T20:24:05.997

您可以设置一个`min-width`for `#loginbox`：

```
#loginbox {
  margin-top: 15px;
  float:left;
  height: 70px;
  min-width: 200px; /* set this to the max width you'd like it to squeeze to */
  width: 375px; 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T20:24:54.197

放置两个浮点数中最大的一个`<div></div>`或`height: 70px`任何一个，然后将其设置为具有一个`min-width: 200px;`或，再次，任何您希望最小的宽度。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T20:29:27.260

解决方案 1：如果容器（标题）的宽度或最小宽度等于或大于 2 个 div 的宽度，*如果*这 2 个都是已知宽度。您在#logo 上没有宽度，但我通常认为徽标具有可靠（即恒定）宽度。

```
 #header{width: 900px; /*or whatever*/} 
```

解决方案 2：使用 css3 属性（需要 IE9+ 或*很酷*的浏览器之一： http: [//caniuse.com/#feat=css-table](http://caniuse.com/#feat=css-table)）：

```
 #header{display:table}
 #logo, #loginbox{display:table-cell} 
```

# python - Django：当用户输入包含表单的页面的直接 url 时，如何阻止表单显示？

> ID：11785116
> 
> 赞同：0
> 
> 时间：2012-08-02T20:18:44.633
> 
> 标签：python, django, url

假设我有两个模型形式“A”和“B”分别与模型“C”和“D”相关联。模型“D”有模型“C”的外键。所以模型的对象应该首先创建。现在当用户提交表单'A'，生成一个'C'对象。现在发送模型'C'对象的ID，我使用这样的URL“/{{ object.id }}/”。这样modelform 'B' 知道模型'C' 的哪个对象应该与模型'D' 的对象相关联。现在我面临的问题是，如果我输入 url "/{{ object.id }}/"，我会看到我不想要的 modelform 'B'。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T20:41:54.453

你可以只使用 HTTP 动词吗？

如果您在 URL 中的两个条目都来自表单，那么您可能根本不支持对该 URL 的 GET 访问。

# python - Django 找不到带有 manage.py syncdb 的应用程序

> ID：11785120
> 
> 赞同：0
> 
> 时间：2012-08-02T20:18:54.983
> 
> 标签：python, django, macos, django-manage.py, django-taggit

我正在运行 Mac OS X 10.7，并使用 django-admin.py startproject MyBlog 在 django 中成功创建了一个项目。在这个文件夹中，我有 manage.py、另一个名为 MyBlog 的文件夹和一个我创建的名为 MainBlog 的应用程序文件夹。

我需要将此模块和一个 taggit 模块添加到我的 settings.py 文件夹中，所以我这样做了（可能不正确）。

这里是..

```
INSTALLED_APPS = (
'django.contrib.auth',
'django.contrib.contenttypes',
'django.contrib.sessions',
'django.contrib.sites',
'django.contrib.messages',
'django.contrib.staticfiles',
# Uncomment the next line to enable the admin:
'django.contrib.admin',
'MainBlog.taggit',
'MainBlog',
# Uncomment the next line to enable admin documentation:
# 'django.contrib.admindocs',
) 
```

我也试过

```
'django.contrib.auth',
'django.contrib.contenttypes',
'django.contrib.sessions',
'django.contrib.sites',
'django.contrib.messages',
'django.contrib.staticfiles',
# Uncomment the next line to enable the admin:
'django.contrib.admin',
'MainBlog.taggit',
'MyBlog.MainBlog',
# Uncomment the next line to enable admin documentation:
# 'django.contrib.admindocs',
) 
```

这些都不起作用。他们都返回这个错误......

```
Error: No module named MainBlog 
```

任何帮助将不胜感激。我已经为此苦苦挣扎了好几个小时！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T20:37:41.777

The error you are receiving is because django doesn't recognize your app, `MainBlog`, as a python package.

Django modules are simply Python packages. You need an `__init__.py` file inside your app directory (`MainBlog`) to get django to recognize it. See [What is __init__.py for?](https://stackoverflow.com/questions/448271/what-is-init-py-for)

There are two ways to fix this.

## 1) Initialize your app with the django script (recommended)

```
python manage.py startapp MainBlog MainBlog 
```

The `startapp` command is [documented on the django website](https://docs.djangoproject.com/en/dev/ref/django-admin/#startapp-appname-destination). This creates a few files in your `MainBlog` folder to start you out:

```
MainBlog/
    __init__.py
    models.py
    tests.py
    views.py 
```

## 2) Manually add an `__init__.py` file to your MainBlog directory

```
touch MainBlog/__init__.py 
```

# xcode - CFURLCopyResourcePropertyForKey 失败，因为它通过了这个没有方案的 URL：

> ID：11785126
> 
> 赞同：41
> 
> 时间：2012-08-02T20:19:19.737
> 
> 标签：xcode, macos, git, command-line, terminal

我知道这是一个 xcode 警告/错误，但是，当我尝试从命令行运行时会发生这种情况`gitk --all`。

```
YuFei-Zhus-MacBook-Pro:test phil88530$ gitk --all
2012-08-02 21:14:49.246 Wish[33464:707] CFURLCopyResourcePropertyForKey failed because it was passed this URL which has no scheme: 
2012-08-02 21:14:49.252 Wish[33464:707] CFURLCopyResourcePropertyForKey failed because it was passed this URL which has no scheme: 
2012-08-02 21:14:49.293 Wish[33464:707] CFURLCopyResourcePropertyForKey failed because it was passed this URL which has no scheme: 
2012-08-02 21:14:49.295 Wish[33464:707] CFURLCopyResourcePropertyForKey failed because it was passed this URL which has no scheme: 
2012-08-02 21:14:49.474 Wish[33464:707] CFURLCopyResourcePropertyForKey failed because it was passed this URL which has no scheme: 
2012-08-02 21:14:49.476 Wish[33464:707] CFURLCopyResourcePropertyForKey failed because it was passed this URL which has no scheme: 
2012-08-02 21:14:50.731 Wish[33464:707] CFURLCopyResourcePropertyForKey failed because it was passed this URL which has no scheme: 
2012-08-02 21:14:50.734 Wish[33464:707] CFURLCopyResourcePropertyForKey failed because it was passed this URL which has no scheme: 
YuFei-Zhus-MacBook-Pro:test phil88530$ 
```

我刚刚更换了一个新磁盘并重新安装了 osx 并更新到山狮，安装了 x11 和 xcode。有什么建议为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-10T06:48:17.397

```
$ alias gitk='gitk 2>/dev/null' 
```

我在这里有同样的问题。在有人回答此解决方案之前，这是一个快速提示。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-01T11:55:26.430

如果您是 MacPorts 用户，请将 tcl/tk 升级到 8.6.0：

```
$ sudo port install tcl tk 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-19T08:45:24.763

我刚刚收到此错误并找到解决方案。

我试图在我的项目中调用函数 getResourceValue:forKey:error: 并且我的操作系统版本是 10.7.5。

我使用 + 初始化了一个新的 NSURL 对象，`URLWithString:`之前出现了问题，在我用 + 替换它之后`fileURLWithPath:`，现在可以了。

不同功能的两个对象的差值是/Volumes/Data/a file://localhost/Volumes/Data/a/

苹果在下面声明了关于 NSURL 类：

> 处理对象创建失败 如果传递的路径格式不正确，则 NSURL 类无法创建新的 NSURL 对象；路径必须符合 RFC 2396。不成功的例子是包含空格字符和高位字符的字符串。如果创建 NSURL 对象失败，创建方法返回 nil，您必须准备好处理它。如果你使用文件系统路径创建 NSURL 对象，你应该使用 fileURLWithPath: 或 initFileURLWithPath:，它们处理 URL 路径和文件系统路径之间的细微差别。如果您希望容忍格式错误的路径字符串，则需要使用 Core Foundation 框架提供的函数来清理字符串。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-07-25T23:56:11.470

用新版本的 tcl-tk 运行 gitk 似乎可以解决这个问题（用 Mac OS X 10.8.4 测试）。如果您安装了 Homebrew，以下应该可以工作：

1.  从命令行运行：`brew install tcl-tk`
2.  然后将以下内容添加到您的 .bashrc 或 .bash_profile 中：`alias gitk='"$(brew --prefix tcl-tk)/bin/wish" "$(which gitk)"'`

重新启动终端后，您应该能够正常运行 gitk 而不会看到任何“CFURLCopyResourcePropertyForKey”错误。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-28T14:20:41.127

在 Mountain Lion 10.8.2 上，我修复了安装/升级 tcl 和 tk 的问题——正如 tair 所述。

酿造安装 tcl
酿造安装 tk

gitk 的 UI 可能会改变，但你可以在 ~/.gitk 中调整它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-10-28T23:09:25.170

这篇博文解决了我的问题：

[http://blog.jasonsemko.com/post/51668282398/easy-fix-for-cfurlcopyresourcepropertyforkey-failed](http://blog.jasonsemko.com/post/51668282398/easy-fix-for-cfurlcopyresourcepropertyforkey-failed)

总而言之，它`gitk`没有正确解析 Xcode 附带的 git 版本字符串，并且正在吐出额外的细节。

所以要修复，你可以安装一个带有干净版本号的 git。

`brew install git`

您可能需要确保通过更改在您中搜索的顺序目录来调用 brew 的 git 版本（例如，我必须在之前`PATH`加载）。或者，您可以将 git 别名为 brew 安装的绝对路径。`/usr/bin/local``/usr/bin`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-25T21:05:00.653

别名 gk='gitk --all 2> /dev/null &' （我在 mac 上）

我在 ~/.bash_login 文件中有它，它解决了它：D

你也可以把它放在 .bashrc 文件中

# javascript - Window.parent 和 Window.top 返回 null

> ID：11785132
> 
> 赞同：0
> 
> 时间：2012-08-02T20:19:47.477
> 
> 标签：javascript, html, google-chrome, mobile-safari

当我从我的 iFrame 调用时`window.parent`，`window.top`在 Chrome 和 iPad Safari 中都返回 null，但是它们都在 Firefox 中工作。

很多类似的帖子说解决方案是将 iframe html 文件放在服务器上，但是我的已经在 Apache Tomcat 实例上，并且可以使用`localhost:...`

JavaScript 中没有覆盖关键字 parent 或 top 的变量。

让它在 chrome 中工作并不是什么大不了的事，我更关心 iPad safari。

非常感谢任何可能的提示或解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T20:52:41.307

根据评论，您处于两个不同的领域，我打赌您可以控制它们。

您可以查看[HTML5 帖子消息](https://developer.mozilla.org/en/DOM/window.postMessage)，以便您可以在域之间进行对话。

# math - groovy中带有MySQL时间戳的数学

> ID：11785134
> 
> 赞同：1
> 
> 时间：2012-08-02T20:19:49.633
> 
> 标签：math, time, groovy

我需要在 groovy 中从另一个时间戳中减去一个时间戳，并获得已经过去的小时数。时间戳来自 MySQL。当我做简单的数学运算时，我会得到四舍五入到零整数的天数。

endDate - startDate 给出四舍五入的整数

我想要 2.35 小时等的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:38:35.160

你可以`groovy.time.TimeCategory`这样使用：

```
// create two timestamps
import java.sql.Timestamp

def dates = ['2012/08/03 09:00', '2012/08/03 10:30']
def (Timestamp a, Timestamp b) = dates.collect {
  new Timestamp( Date.parse( 'yyyy/MM/dd hh:mm', it ).time )
}

// Then compare them with TimeCategory
use(groovy.time.TimeCategory) {
  def duration = b - a
  println "${duration.days}d ${duration.hours}h ${duration.minutes}m"
} 
```

这将打印：

```
0d 1h 30m 
```

# php - header ("Location: for FTP not working in IE

> ID：11785135
> 
> 赞同：1
> 
> 时间：2012-08-02T20:20:00.527
> 
> 标签：php

我有一个非常简单的 HTML 登录表单，用户可以在其中输入他们的用户名以连接到 FTP 服务器。

```
$url= 'ftp://'.$_POST['username'].'@domainname.com/';
header ("Location: $url");
exit(); 
```

该代码适用于Mozilla，它只是IE8，我遇到问题。如果我使用 HTTP，我可以重定向到一个页面，这似乎是我遇到问题的 FTP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T20:22:42.660

在某些浏览器上，您无法重定向到其他协议，例如 FTP。事实上，有些浏览器根本无法进行 FTP，但这不是问题所在。

您将不得不使用其他方式进行重定向。我会推荐一种 JavaScript 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T20:26:14.403

在来自 PHP 的 js 中：

```
$scriptTag = '<script type="text/javascript">window.location = "ftp://'.$validatedUserName.'@domainname.com/";</script>';
print $scriptTag; 
```

# xcode - XCode 4.4 捆绑版本更新直到后续构建才被拾取

> ID：11785136
> 
> 赞同：4
> 
> 时间：2012-08-02T20:20:03.650
> 
> 标签：xcode, xcode4, xcode4.4

我可能在这里遗漏了一些简单的东西。我试图仅在归档我的应用程序（为 TestFlight 部署做准备）时自动增加 XCode 4.4 中的内部版本号。我有一个在目标上运行并成功更新每个构建的 info.plist 文件的工作 shell 脚本。我用于归档的构建配置名称为“Ad-Hoc”。

这是脚本：

```
if [ $CONFIGURATION == Ad-Hoc ]; then
    echo "Ad-Hoc build. Bumping build#..."
    plist=${PROJECT_DIR}/${INFOPLIST_FILE}
    buildnum=$(/usr/libexec/PlistBuddy -c "Print CFBundleVersion" "${plist}")

    if [[ "${buildnum}" == "" ]]; then
        echo "No build number in $plist"
        exit 2
    fi

    buildnum=$(expr $buildnum + 1)
    /usr/libexec/Plistbuddy -c "Set CFBundleVersion $buildnum" "${plist}"
    echo "Bumped build number to $buildnum"
else
    echo $CONFIGURATION " build - Not bumping build number."
fi 
```

该脚本会适当地更新 plist 文件，并在我每次归档时反映在 XCode 中。问题是归档过程中产生的 .ipa 文件仍然显示以前的内部版本号。我尝试了以下解决方案但没有成功：

*   构建前清理
*   在构建之前清理构建文件夹
*   将 Run Script 阶段移至 Build Phases 中的 Target Dependencies 步骤之后
*   在我的方案中将脚本作为运行脚本操作添加为预操作

无论我做什么，当我查看构建日志时，我都会看到 info.plist 文件正在作为最初的步骤之一进行处理。它总是在我的脚本运行和更新内部版本号之前，我假设这就是为什么内部版本号在 .ipa 文件中永远不会是最新的。

有没有办法在处理 info.plist 文件之前强制运行运行脚本阶段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-31T16:15:08.543

发生这种情况的原因是，当您的“运行脚本”运行时，XCode 构建过程已经处理了项目的 plist 文件以提取捆绑版本号等。

您可以通过转到 XCode 中的日志导航器（查看/导航器/显示日志导航器）并选择“存档”构建来查看这一点（可能更详细）。

构建操作的详细列表应该出现在您的主窗口中，靠近顶部的内容之一应该是名为`Process <projectname>-Info.plist`. 如果您使用右侧的图标展开它，您可以看到实际运行的构建命令。

我解决这个问题的方法是更新原始 plist 文件和处理后的文件。通过这样做，您可以在当前构建中获得更新的构建版本，而不是下一个。

这是我用来执行此操作的脚本（这是 Ruby，因此您需要将“/usr/bin/ruby”放在解释器框中才能使用它，但这个概念与 shell 脚本或任何其他脚本相同语）：

```
def incrementBundleVersion(file)
    oldVersion = `/usr/libexec/Plistbuddy -c "print :CFBundleVersion" #{file}`.strip
    components = oldVersion.split('.')
    newBuild = components.pop.to_i + 1
    version = components.push(newBuild).join('.')
    print "Updating version: #{oldVersion} -> #{version} : #{file}\n"
    system("/usr/libexec/PlistBuddy -c \"Set :CFBundleVersion #{version}\" #{file}")
end

incrementBundleVersion("#{ENV['PROJECT_DIR']}/#{ENV['INFOPLIST_FILE']}")
incrementBundleVersion("#{ENV['CODESIGNING_FOLDER_PATH']}/Info.plist") 
```

请注意，处理后的文件`#{ENV['CODESIGNING_FOLDER_PATH']}/Info.plist`是二进制 plist 文件，因此您将无法使用简单的文本工具处理它 - 使用 plistbuddy 是处理此问题的最简单方法，它会自动处理文本和二进制 plist 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T11:56:50.263

在 Xcode 4.4.1 中，我创建新目标并将“运行自定义脚本”添加到此目标构建阶段，它会更新主目标 Plist。此外，您应该将此目标添加到主要目标的依赖项中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T11:02:37.303

Mark (et al)，我相信我也遇到了同样的问题，我将尝试用一句话描述它，然后解释：

我认为 /usr/libexec/PlistBuddy，当从 Xcode 内部运行时，适用于 Info.plist 数据的缓存版本，因此最终编写以在设备或模拟器上执行的内容并不总是你想要的。

我曾尝试写后复制资源包“运行脚本”，以便以一种不会导致它在我的本地 git repo 中更改的方式更改此信息，只是发现了这一点，而当 PlistBuddy 命令时该信息将正常工作在 Xcode 旁边的 terminal.app 窗口中执行，如果没有完成，缓存的值将被写入。

我终于让自己在复制捆绑资源阶段之前运行版本信息生成脚本，并在另一个运行脚本中自动提交更改，对 git 消息和自动创建的 git 标记使用相同的标签。对于 Settings.bundle/Root.plist 文件，而不是每次都提交，我更喜欢只运行一个完成脚本来执行“git checkout -- ${PROJECT}/Resources/Settings.bundle/Root.plist” （这是我存在的地方，但可能不是每个人都放置自己的系统设置资源文件的地方）。

在检查更改、安装时运行部分内容和每次运行部分内容以及最后完成最终脚本之间，一些目标有 6 个脚本，另一个目标有 7 个……</p>

……但对我来说重要的是它终于正确地自动化了……并且当在 Xcode 内部处理时，它可以绕过 PlistBuddy 对我的 plist 文件所做的任何事情。

# php - 无法使 Oauth PHP 扩展工作

> ID：11785141
> 
> 赞同：7
> 
> 时间：2012-08-02T20:20:30.837
> 
> 标签：php, oauth

尝试使用 PHP 进行 oAuth 之旅时，我感到很头疼。

我正在使用 MAC_OSX_10.7.4/MAMP/PHP 并且我指向我的 MAMP 环境中的 php。

我已经下载了最新的 oAuth php 扩展 1.2.2。

我跑过：

```
pecl install oauth 
```

成功返回，当我尝试重新安装它时，我得到：

```
pecl/oauth is already installed and is the same as the released version 1.2.2 
```

我已经添加了这一行：

```
extension=oauth.so 
```

在我的 php.ini 中。但是每当我尝试运行这个简单的代码来测试oauth时：

```
 <?php

define("CONSUMER_KEY", "dgqcifzjqksh");
define("CONSUMER_SECRET", "73Ft6jKqe3A7sCsc");

$oauth = new OAuth(CONSUMER_KEY, CONSUMER_SECRET);

echo "oauth token" . $oauth;
$request_token_response = $oauth->getRequestToken('https://api.linkedin.com/uas/oauth/requestToken');

if($request_token_response === FALSE) {
        throw new Exception("Failed fetching request token, response was: " . $oauth->getLastResponse());
} else {
        $request_token = $request_token_response;
}

print "Request Token:\n";
printf("    - oauth_token        = %s\n", $request_token['oauth_token']);
printf("    - oauth_token_secret = %s\n", $request_token['oauth_token_secret']);
print "\n";

?> 
```

我的 php 日志中出现以下错误

```
PHP Fatal error:  Class 'OAuth' not found in /Applications/MAMP/htdocs/wemustcreate/wp-content/themes/MinimalDessign/linkedinOauth.php on line 6 
```

任何想法我可能做错了什么？我检查了 php.ini 并没有出现在那里。我什至删除了现有的扩展并重新添加它们以确保我的 php.ini 已正确更新。

我能看到的唯一让我有点奇怪的是，我所有以 .so 结尾的扩展名都是 unix 可执行文件，但我的 oauth 文件是一个文档。这可能是问题吗？我添加了一个屏幕截图来显示扩展。

![oauth.so 作为文档](../Images/5c01d585b42a4b346704c4598515e61b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-30T14:53:48.887

它发生在我身上，它已加载到 php 信息页面中但无法正常工作。

如果列表中显示“OAuth”，请确保真正加载了哪些模块：

> php -m

确保将扩展文件“.ini”加载到正确的目录中，在我的情况下它在里面

> /etc/php5/conf.d/

而不是它应该在的地方：

> /etc/php5/cli/conf.d/

然后重启apache。

# php - 使用 Javascript/PHP 验证公钥

> ID：11785142
> 
> 赞同：1
> 
> 时间：2012-08-02T20:20:31.520
> 
> 标签：php, javascript, encryption

我目前正在使用不允许 https 连接的免费主机，并且由于我的网站不托管任何敏感或私人内容，因此我不会升级到付费托管。但是由于我的站点确实处理密码，并且由于许多用户对不同的站点使用相同的密码，所以我想在处理这些密码时设置合理的安全/加密量。

来自[Secure login: public key encryption in PHP and Javascript](https://stackoverflow.com/questions/1528012/secure-login-public-key-encryption-in-php-and-javascript)，看起来在通过网络发送密码时使用公共/私人加密来保护密码的最大问题是攻击者可以修改发送给客户端的公钥，然后截取加密后的密码，用攻击者的私钥解密，然后用站点的公钥加密，然后发送到站点，本质上一开始就破解了加密的全部意义。

当然，任何加密都比没有加密好，但我想尽我所能，而不必购买支持 HTTPS 的主机，这让我想到了我的问题。

是否有任何可靠的方法来防止（或只是检测并提醒用户）中间人替换他们自己的公钥来代替我网站的公钥？或者有什么方法可以验证服务器发送的公钥是否真的是服务器的公钥？如果无法验证这一点，SSL/TLS 是如何工作的，以及它们如何验证密钥（如果 SSL 不使用公钥/私钥，我很抱歉，我对它的理解非常有限）？

我已经明白，与使用 TLS/SSL 相比，仅加密表单数据是一种极其薄弱的做法，并且不会阻止那些决心破坏加密的人这样做，所以请避免任何“你应该使用 HTTPS”-只有评论（如果你知道一个允许 HTTPS 的免费托管服务提供商，我也会很高兴听到他们的消息）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T22:15:53.040

SSL 起作用的原因是根证书分布*在浏览器*中。这个方案有很多问题，但总的来说你有一个信任链——在这种情况下，以浏览器的信任结束（证书存储、分发、安装等）。*当任何*证书颁发机构私钥不安全时，它就会崩溃，这是目前备受争议的问题。

信任链：

![在此处输入图像描述](../Images/c42c3626927c70668cdc7d8620c4306f.png)

浏览器证书存储：

![在此处输入图像描述](../Images/a4b19d8cfa241f404a8f9182d1a17f36.png)

JavaScript 的问题在于您没有（访问）信任库，因此您无法信任收到的密钥。攻击者可以简单地用他自己的密钥替换它（并用他的密钥登录到您自己的站点*）*。这将构成一个典型的中间攻击，你几乎无能为力。

使用公钥加密确实可以*保护*您免受窃听攻击。不幸的是，大多数一开始就可以访问连接的攻击可能能够创建 MITM，例如在使用 WiFi 接入点时。

尝试找到您的浏览器信任库，您可能可以查看其中分发的已配置根证书。这种证书和私钥的树状结构称为公钥基础设施（所以谷歌它）。

# java - 如何接受 SOAP 标头部分的 mustUnderstand 和其他属性？

> ID：11785144
> 
> 赞同：1
> 
> 时间：2012-08-02T20:20:54.570
> 
> 标签：java, web-services, soap, wsdl

我有一个包含自定义标头的基于肥皂的 Web 服务的 WSDL：

```
<message name="Request">
    <part element="common:Request" name="Request"></part>
    <part element="common:myHeader" name="Header"></part>
</message>

<operation name="processRequest">
    <soap:operation soapAction=""/>
    <input>
        <soap:body parts="Request" use="literal"/>
        <soap:header message="tns:Request" part="Header" use="literal"></soap:header>
    </input>
    <output>
        <soap:body use="literal"/>
    </output>
</operation> 
```

标头类型在单独的模式文件中定义：

```
<xs:element name="myHeader" nillable="false" type="tns:myHeaderType"/>

<xs:complexType name="myHeaderType">
    <xs:sequence minOccurs="1" maxOccurs="1">
        <xs:element name="JobID" type="tns:JobIDType" minOccurs="1" maxOccurs="1"/>
        <xs:element name="TransactionID" type="xs:string" minOccurs="1" maxOccurs="1"/>
    </xs:sequence>
</xs:complexType> 
```

此外，我正在验证 的定义，`myHeaderType`以确保所需的元素在那里，满足格式约束等。这一切似乎都正常工作，因为格式正确的请求被接受，格式不正确的请求被拒绝。

我的问题出现在使用 Apache Axis（隐藏在专有工具后面）生成 Web 服务客户端的消费者身上。正如[此处](https://stackoverflow.com/questions/9516053/custom-soap-1-1-header-and-mustunderstand-attribute)的另一个 StackOverflow 问题中所述，Axis 在 myHeader 上插入了 SOAP 标准允许的一些可选属性（[据我所知](http://www.w3.org/TR/2000/NOTE-SOAP-20000508/#_Toc478383500)）：

```
<soapenv:Header>
    <com:myHeader soapenv:mustUnderstand="0" soapenv:actor="">
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^ ^^^^^^^^^^^^^^^^
        <JobID>myJobId</JobID>
        <TransactionID>myTransactionId</TransactionID>
    </com:myHeader>
</soapenv:Header> 
```

由于我的消费者正在使用的工具，修改 Axis 生成的存根以忽略这些属性是不可行的，正如其他地方所建议的那样。此外，如果我要声称自己是肥皂服务，我的服务似乎*应该允许这些属性。*我的问题是，如何修改我的标题定义以适应这些可选属性，并在理想情况下规划我可能没有预料到的属性。是否有可以为我的标头类型定义扩展的标准类型，或者这种情况的一般最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T21:16:05.280

我今天找到了几个解决我的问题的方法。它们都解决了问题，但我对我的判断是否真的是两者中的更好没有信心，所以我将在此处介绍它们。

两种解决方案都以修改 的定义为中心，`myHeaderType`以便它可以容纳未预料到的 SOAP 定义的属性。

1.  在 SOAP WSDL 模式定义 ( [http://schemas.xmlsoap.org/wsdl/](http://schemas.xmlsoap.org/wsdl/) ) 中，有一个名为的类型`tExtensibleAttributesDocumented`包括以下非常灵活的属性定义：

    ```
    <xs:anyAttribute namespace="##other" processContents="lax"/> 
    ```

    通过扩展这种抽象类型，我能够将这种对意外属性的自由允许合并到我的类型中。这是生成的代码：

    ```
     <xs:complexType name="myHeaderType">
          <xs:complexContent>
              <xs:extension base="wsdl:tExtensibleAttributesDocumented">
                  <xs:sequence minOccurs="1" maxOccurs="1">
                      <xs:element name="JobID" type="tns:JobIDType" minOccurs="1" maxOccurs="1"/>
                      <xs:element name="TransactionID" type="xs:string" minOccurs="1" maxOccurs="1"/>
                  </xs:sequence>
              </xs:extension>
          </xs:complexContent>
      </xs:complexType> 
    ```

    请注意，这不会检查`mustUnderstand`or的内容`actor`，并允许其他属性，包括完全垃圾，只要它来自我在 XML 请求中定义的命名空间。

2.  另一种选择是直接`<xs:anyAttribute>`在我的类型中包含：

    ```
     <xs:complexType name="myHeaderType">
          <xs:sequence minOccurs="1" maxOccurs="1">
              <xs:element name="JobID" type="tns:JobIDType" minOccurs="1" maxOccurs="1"/>
              <xs:element name="TransactionID" type="xs:string" minOccurs="1" maxOccurs="1"/>
          </xs:sequence>
          <xs:anyAttribute namespace="##other" processContents="lax"/>
      </xs:complexType> 
    ```

    据我所知，这具有基本相同的效果。

如果我不知道这些解决方案之间有任何细微的差异，我很想听听。如果这种情况有一个公认的标准，我找不到它。此解决方案的另一个弱点是我无法获取属性以根据它们在模式中的定义进行验证。更改`processContents`属性以`strict`防止处理定义明确的`mustUnderstand`属性`actor`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T21:48:56.847

是的，您可以使用[Altova`XMLSpy`](http://www.altova.com/simpledownload2c.html?gclid=CP7j-6z1ybECFWvDtgodjxIAWQ)编辑器进行修改。功能性使用 30 天。

# drupal - 基于 url 别名的 Drupal 页面模板

> ID：11785156
> 
> 赞同：1
> 
> 时间：2012-08-02T20:22:31.553
> 
> 标签：drupal, drupal-7, drupal-theming

我想根据 url 别名创建一个 drupal 页面模板。她我现在的情况：

我创建了一个名为 的页面`test`，url 别名`test`也是 。

基于此文档的页面模板 - [http://drupal.org/node/1089656](http://drupal.org/node/1089656)是：`page--test.tpl.php`.

我清理了 drupal 他们的缓存，但仍然显示此页面的默认页面模板。

可能是什么错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T23:56:39.893

`page--test.tpl.php`不起作用，因为 Drupal 正在使用`page--node--#.tpl.php`. 要让 Drupal 识别别名路径，您必须添加别名路径作为主题建议的一部分，如下所示：

```
function MYMODULE_preprocess_page(&$vars, $hook) {
  // only do this for page-type nodes and only if Path module exists
  if (module_exists('path') && isset($vars['node']) && $vars['node']->type == 'page') {
    // look up the alias from the url_alias table
    $source = 'node/' .$vars['node']->nid;
    $alias = db_query("SELECT alias FROM {url_alias} WHERE source = '$source'")->fetchField();

    if ($alias != '')  {
      // build a suggestion for every possibility
      $parts = explode('/', $alias);
      $suggestion = '';
      foreach ($parts as $part) {
        if ($suggestion == '') {
          // first suggestion gets prefaced with 'page--'
          $suggestion .= "page--$part";
        } else {
          // subsequent suggestions get appended
          $suggestion .= "__$part";
        }
        // add the suggestion to the array
        $vars['theme_hook_suggestions'][] = $suggestion;
      }
    }
  }
} 
```

来源：[http ://groups.drupal.org/node/130944#comment-425189](http://groups.drupal.org/node/130944#comment-425189)

# c++ - 在 Win32 程序中用 main() 函数替换 WinMain()

> ID：11785157
> 
> 赞同：31
> 
> 时间：2012-08-02T20:22:36.143
> 
> 标签：c++, winapi

我在 StackOverflow 和 Google 上进行了一些搜索，但无法理解。我想用这种类型的用户编程来启动我的应用程序：

```
int main()
{
  Window App("Test", 640, 480);

  while(App.IsOpen())
  {
    // Do the stuff
  }
} 
```

但这是不可能的，因为我应该将`hInstance`and`hPrevInstance`和其他参数传递给`WinMain`函数。实际上，我设计了一个 Window 类，以使创建窗口更容易一些。我在 SFML 上看到了这个实现，但我不知道它是怎么做到的。

现在我正在使用通常的方式：

```
int WINAPI WinMain(HINSTANCE hInst, HINSTANCE hPrevInst, LPSTR, int)
{
  Window App(hInst, hPrevInst, "Test", 640, 480);

  while(App.IsOpen())
  {
    // Do the stuff
  }
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-08-02T21:02:43.137

`main`如果您将以下内容添加到 Microsoft 链接器选项，即使使用 Microsoft 工具，您也可以在“Windows”应用程序（即 GUI 子系统 Windows 应用程序）中使用标准：

```
/subsystem:windows /ENTRY:mainCRTStartup 
```

请注意，这对于 GNU 工具链不是必需的。

对于 Microsoft 工具，您也可以将其添加到主文件中：

```
#ifdef _MSC_VER
#    pragma comment(linker, "/subsystem:windows /ENTRY:mainCRTStartup")
#endif 
```

[James McNellis 告诉您](https://stackoverflow.com/a/11785228/866022)如何获取 hInstance。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-08-02T20:28:33.813

[`GetModuleHandle(NULL)`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683199.aspx)会给你`hInstance`。 `hPrevInstance`总是`NULL`。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-08-02T21:04:54.027

首先，`GetModuleHandle(0)`提供可执行文件的模块句柄，`hInstance`与`WinMain`.

使用 GNU 工具链（g++ 编译器），符合标准的代码是可以的。

但是，默认情况下，Microsoft 工具链仅接受符合标准的代码，用于控制台子系统可执行文件。要使用这个不符合标准的工具链创建一个 GUI 子系统可执行文件，使用标准`main`，您必须指定一个调用标准的 Microsoft 运行时库入口点`main`，即**`mainCRTStartup`**. 对于命令行调用，这意味着……

```
cl myApp.cpp /link /entry:mainCRTStartup /subsystem:windows user32.lib 
```

实际上，对于在命令行中工作，您可以简单地在`LINK`环境变量中指定入口点：

```
set LINK=/entry:mainCRTStartup 
```

…

```
cl myApp.cpp /link /subsystem:windows user32.lib 
```

为 Visual Studio 创建一个类似的符合标准的设置可能是不可取的，因为某些 Visual Studio 项目类型（主要是 MFC）需要使用 Microsoft 的非标准`WinMain`或`wWinMain`.

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-02T21:10:54.113

`hInstance`是“从不使用全局变量”经验法则的一个例外。通常没有变量实际上在逻辑上具有模块范围的范围。`hInstance`但是，根据定义，它具有完全模块范围的范围，因此实际上最合乎逻辑的解决方案是为其创建一个全局变量并在`WinMain`.

正如其他人所建议的那样，您也可以使用`GetModuleHandle(NULL)`.

# ios4 - Retina Display 及其实现让我感到困惑

> ID：11785162
> 
> 赞同：0
> 
> 时间：2012-08-02T20:22:59.637
> 
> 标签：ios4, retina-display

好的，所以我一直在与一位在 Photoshop 中制作应用程序模型的设计师合作。我没有使用 iPhone 状态栏，也没有使用设计师由 100px 制作的自定义导航栏。在那个导航中，他放了一个 48 像素的图标。

现在我必须转换为代码，为此我使用 UIWebView。他设计的布局，我将在 HTML/CSS 中制作，将在 UIWebView 中加载。

现在的问题是，他为屏幕制作的 PSD 尺寸为 640 x 960。在 Iphone4 中，它是分辨率而不是物理尺寸。基于 640 x 960 像素 Image/PSD 的设置，他制作了 100 像素的顶栏。现在如果我跟着他，事情就会变得一团糟。

我所做的只是将所有内容缩小一半以适应 CSS 中的 320 x 480 屏幕大小。我将导航栏设置为 50 像素（适用于 320 x 480），并将@2x.png 图像（48 x 48）放入其中。

现在，当我在我的手机中加载应用程序时，它看起来应该很大，这给我的印象是 48 像素没有显示为 24 像素的高密度图像。

我很困惑，如果我制作 100 像素的导航栏，那么一切看起来都很大，因为我的目标是大尺寸，而我必须以高分辨率为目标。如何在我的场景中调整元素（DIV）和图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T20:39:12.113

Take a look at these articles on using CSS3 media queries and the viewport tag in order to help manage styles between normal and high definition displays:

[Targeting the iPhone 4 Retina Display with CSS3 media queries](http://blog.iwalt.com/2010/06/targeting-the-iphone-4-retina-display-with-css3-media-queries.html)

[iPhone 4 and iOS 4 Safari Detection and Behavior](http://www.mobilexweb.com/blog/iphone4-ios4-detection-safari-viewport)

# android - asynctask 在 hero 2.1 上返回 null

> ID：11785163
> 
> 赞同：0
> 
> 时间：2012-08-02T20:23:03.347
> 
> 标签：android, android-asynctask

我是新手，所以请多多包涵。

我有一个异步任务，它从网络服务中提取离我最近的位置。它在大于 2.1 的较新的 android 设备上运行良好。我有一个 2.1 的 HTC hero，每次按下按钮查找数据时它都会崩溃。

这是我拥有的代码。第一部分从设备获取 lat 和 long 并将其发送到我在服务器上创建的 php 脚本。

```
 private class DownloadWebPageTask extends AsyncTask<String, Void, String> {
    @Override
    protected String doInBackground(String... urls) {
        //String response = "";
        for (String url : urls) {
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(url);
            try {
                // Add your data
                List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
                nameValuePairs.add(new BasicNameValuePair("lat", lat));
                nameValuePairs.add(new BasicNameValuePair("long", longit));
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                // Execute HTTP Post Request
                UrlEncodedFormEntity ent = new UrlEncodedFormEntity(nameValuePairs,
                        HTTP.UTF_8);
                httppost.setEntity(ent);
                HttpResponse responsePOST = httpclient.execute(httppost);
                responseBody = EntityUtils.toString(responsePOST.getEntity());
                Log.i("YAhh", responseBody);
            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
            } catch (IOException e) {
                // TODO Auto-generated catch block
            }
        }
        return responseBody;
        } 
```

这部分将数据发送到另一个活动以进行解析并显示在列表视图中。

```
 @Override
    protected void onPostExecute(String result) {
        Log.i("returndata",responseBody);
    /*  Intent intent = new Intent(HomeActivity.this,
                locationActivity.class);
        Bundle bundle = new Bundle();
        bundle.putString("returnBody", responseBody);
        bundle.putString("latit", lat);
        bundle.putString("longit" + "", longit);
        intent.putExtras(bundle);
        startActivity(intent);*/
    }
} 
```

这是我收到的错误，据我所知没有返回数据，因此空值导致错误。

```
 08-02 15:17:13.848: E/AndroidRuntime(1117): Uncaught handler: thread main exiting due to uncaught   exception
  08-02 15:17:13.968: E/AndroidRuntime(1117): java.lang.NullPointerException: println needs a message
  08-02 15:17:13.968: E/AndroidRuntime(1117):   at android.util.Log.println(Native Method)
  08-02 15:17:13.968: E/AndroidRuntime(1117):   at android.util.Log.i(Log.java:136)
  08-02 15:17:13.968: E/AndroidRuntime(1117):   at com.mlgw.mlgwapp.HomeActivity$DownloadWebPageTask.onPostExecute(HomeActivity.java:278)
  08-02 15:17:13.968: E/AndroidRuntime(1117):   at   com.mlgw.mlgwapp.HomeActivity$DownloadWebPageTask.onPostExecute(HomeActivity.java:1)
  08-02 15:17:13.968: E/AndroidRuntime(1117):   at android.os.AsyncTask.finish(AsyncTask.java:417)
  08-02 15:17:13.968: E/AndroidRuntime(1117):   at android.os.AsyncTask.access$300(AsyncTask.java:127)
  08-02 15:17:13.968: E/AndroidRuntime(1117):   at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
  08-02 15:17:13.968: E/AndroidRuntime(1117):   at android.os.Handler.dispatchMessage(Handler.java:99)
  08-02 15:17:13.968: E/AndroidRuntime(1117):   at android.os.Looper.loop(Looper.java:123)
  08-02 15:17:13.968: E/AndroidRuntime(1117):   at android.app.ActivityThread.main(ActivityThread.java:4595)
  08-02 15:17:13.968: E/AndroidRuntime(1117):   at java.lang.reflect.Method.invokeNative(Native Method)
  08-02 15:17:13.968: E/AndroidRuntime(1117):   at java.lang.reflect.Method.invoke(Method.java:521)
  08-02 15:17:13.968: E/AndroidRuntime(1117):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
  08-02 15:17:13.968: E/AndroidRuntime(1117):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
  08-02 15:17:13.968: E/AndroidRuntime(1117):   at dalvik.system.NativeStart.main(Native Method) 
```

有人知道为什么这不适用于 2.1 吗？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T21:01:37.767

您想将 a`Log.w()`或 a`printStackTrace()`放入 thouse 异常中：

```
 } catch (ClientProtocolException e) {
        e.printStackTrace();
   } catch (IOException e) {
        e.printStackTrace();
   }
 }
 return responseBody;
 } 
```

您可以使用它`logcat`来查看导致它们的原因。

这种方法`onPostExecute`看起来很可疑。替换`responseBody`为`result`：

```
 @Override
    protected void onPostExecute(String result) {
         Log.i("returndata",result);

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T20:32:55.603

您以错误的方式使用了异步任务。

首先，在哪里`responseBody`声明？确保它不为空！！

另一个错误是：您`responseBody`在 doInBackground 中返回 ,。该返回字符串是`result`, in `onPostExecute`方法。

所以`onPostExecute`换成 .. `responseBody`_`result`

```
 Log.i("returndata",result); 
```

..

# c# - 在 fluentcassandra 中构建可能很长的 LINQ 查询

> ID：11785164
> 
> 赞同：0
> 
> 时间：2012-08-02T20:23:04.047
> 
> 标签：c#, cassandra, fluentcassandra

我有一个以编程方式生成的列族（以及二级索引），现在想在运行时使用任意数量的参数对其进行查询。我通过运行以下代码来完成此操作：

```
var queryParams = new Dictionary<string, string>();

//populate queryParams
.
.
.

IQueryable<ICqlRow> query = family;
queryParams.Keys.ToList().ForEach(paramKey => query = query.Where(q => q[paramKey] == queryParams[paramKey])); 
```

我有两个问题。第一个是当我尝试评估查询时出现“不支持调用”异常。当我开始将其分解为更小的示例时，我遇到了另一个问题。

我尝试了一些简单的事情：

```
query = query.Where(t => t["Param1"] == "Value1"); 
```

那工作得很好。它生成的 CQL 是

```
SELECT * 
FROM SampleColumnFamily 
WHERE Param1 = 'Value1' 
```

我尝试加强我的简单示例：

```
query = query.Where(t => t["Param1"] == "Value1").Where(t => t["Param2"] == "Value2"); 
```

这产生了

```
SELECT * 
FROM  SampleColumnFamily   
WHERE (Param1 = 'Value1' AND Param2 = 'Value2') 
```

它看起来不错，但是这是我遇到第二个问题的地方。我收到此错误：“第 3:6 行在输入 '(' 处没有可行的替代方案”。事实证明它不喜欢 where 子句周围的 ()。如果我删除它们，它似乎工作正常。也许这是FluentCassandra 中的 LINQ 提供程序有问题吗？

但是，这并没有回答我的“不支持呼叫”异常。在我做了更多的挖掘之后，我想出了另一个场景。

```
//This works
query.Where(t => t["Param1"] == "Value1");

//This doesn't
string p1 = "Param1";
query.Where(t => t[p1] == "Value1"); 
```

当我将鼠标悬停在 IDE 中的查询上时，我看到的只是 {FluentCassandra.Linq.CqlQuery}，而不是看到 CQL。如果我尝试执行该查询，我会得到“不支持调用”异常。

有什么想法（除了手写我的 CQL）吗？

# c# - 有条件地更改 Razor 视图中的 CSS 类

> ID：11785166
> 
> 赞同：29
> 
> 时间：2012-08-02T20:23:12.137
> 
> 标签：c#, css, asp.net-mvc-3, razor

我需要`<div>`使用“forumChild”类更改标签的 CSS 类。它必须改变 foreach 循环的每 3 个循环。

有没有办法从控件中做到这一点？

```
<div class="Forum">
    <p>The Forum</p>

            @foreach (var item in Model)
            {               
                <div class="ForumChild">

                    <img src="@item.Blog.Image.img_path" alt="Not Found" />

                    <br />
                            @foreach (var comment in item.Blog.comment)
                            {

                                var db = new ACapture.Models.ACaptureDB();

                                var Name = from p in db.Profile.AsEnumerable()
                                           where (p.AccountID == comment.AccountID)
                                           select p;                            
                            <section>
                                    <div>
                                        <a href="@Url.Action("Index", "Home")">@foreach (var y in Name)
                                                                              { @(y.FirstName + " " + y.LastName + ":");
                                                                              }</a>
                                    </div>
                                    <div>
                                        @comment.Commentation 
                                    </div>
                            </section>
                            }
                </div>                
            }
</div> 
```

提前致谢

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-08-02T20:50:59.730

```
 @{
   int counter=0;
 }
 @foreach (var item in Model)
 { 
   counter++;
   <div class="@(counter<=3 ? "classRed":"classBlue")">
       <img src="@item.Blog.Image.img_path" alt="Not Found" />
       //other markup also here

   </div>  
    if (counter == 6)
    {
        counter = 0;
    }

 } 
```

CSS类在哪里`classRed`以及在哪里`classBlue`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-02T20:30:09.050

我们如何处理这个问题：

1）您需要创建帮助方法，该方法将通过一些代码返回 css 类。

```
string GetDivClass(int code)
{
  var classes = new [] {"first", "second", "third"};
  return classes[code];
} 
```

2）创建计数器/索引并每次在循环中递增。

`GetDivClass(index % 3)`3) 像在*div*元素处一样调用辅助方法。

附言

它只是 POC，所以不要在实际应用程序中使用它（您需要添加验证逻辑并将“类”初始化移动到另一个地方）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T20:30:22.627

您可以将任何您喜欢的代码写入 Razor 视图，因此要按照您的想法进行操作，您可以执行以下操作（我省略了大部分内部内容）：

```
@{
    var className = "ForumChild";
}
<div>
    @for (int i = 0; i < Model.Count; i++)
    {
        var item = Model[i];
        if (i % 3 == 0)
            className = GetNewClassName(); // Or whatever
        <div class="@className">
        </div>
    }
</div> 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-02T20:32:38.167

您可以添加一个计数器变量以从 1 开始并在循环中递增。通过 % 检查 if 语句是否为真并更改类名

```
@{ int counter = 1;}

 @foreach (var item in Model)
{

if( (counter % 3) ==0 )
{
 <div class="ChangedName">
}
else
{
 <div class="ForumChild">
}
i++; 
```

# objective-c - 从 NSDictionary 中提取信息

> ID：11785167
> 
> 赞同：0
> 
> 时间：2012-08-02T20:23:16.807
> 
> 标签：objective-c, ios, nsdictionary

我有一个来自 Flickr api 请求的 NSDictionary 响应，它的描述如下所示：

```
self.userInfo: {
"_text" = "\n\n";
person =     {
    "_text" = "\n\t\n\t\n\t\n\t\n\t\n\t\n\t\n\t\n\t\n\t\n";
    description =         {
    };
    iconfarm = 0;
    iconserver = 0;
    id = "83943196@N02";
    ispro = 0;
    location =         {
    };
    "mbox_sha1sum" =         {
        "_text" = 7b61c5d24f12345678be82c31234567830540;
    };
    mobileurl =         {
        "_text" = "http://m.flickr.com/photostream.gne?id=12345678";
    };
    nsid = "12345678@N02";
    "path_alias" = "";
    photos =         {
        "_text" = "\n\t\t\n\t\t\n\t\t\n\t\t\n\t";
        count =             {
            "_text" = 2;
        };
        firstdate =             {
            "_text" = 12345678;
        };
        firstdatetaken =             {
            "_text" = "2012-08-01 12:46:38";
        };
        views =             {
            "_text" = 0;
        };
    };
    photosurl =         {
        "_text" = "http://www.flickr.com/photos/12345678@N02/";
    };
    profileurl =         {
        "_text" = "http://www.flickr.com/people/12345678@N02/";
    };
    realname =         {
        "_text" = "Me TheUser";
    };
    timezone =         {
        label = "Pacific Time (US & Canada); Tijuana";
        offset = "-08:00";
    };
    username =         {
        "_text" = metheuser;
    };
};
stat = ok;
} 
```

我正在弄清楚如何将实名值提取到 NSString 中。

我试过了：

```
NSString * temp = [self.userInfo valueForKey:@"realname"];
NSLog (@"FL: nameOfSignedInUser. nameself.userInfo: %@", temp.debugDescription); 
```

但返回为零。

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T20:38:13.950

```
NSString *name = [self.userInfo valueForKeyPath:@"person.realname._text"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T20:31:43.853

```
NSString *realName = [[[self.userInfo objectForKey:@"person"] objectForKey:@"realname"] objectForKey:@"_text"]; 
```

# jquery - 在多个 iframe 中加载 jquery

> ID：11785172
> 
> 赞同：0
> 
> 时间：2012-08-02T20:24:03.657
> 
> 标签：jquery, iframe

我们有一个 Web 应用程序，它的左侧有一个菜单栏，其中一些菜单是 iframe。然后我们可以预览用户在右侧构建的内容，这也是一个 iframe。这些 iframe 每个都加载自己的 jquery 实例。直到我们在 IE8 中测试它之前，我们没有遇到任何问题。在 IE8 中，我们在预览窗口中收到指向 $(document).ready 方法的错误“预期对象”。我想我以前在同一页面上多次加载 jquery 时已经看到过这种情况。

所以，我认为在 chrome 中，脚本是每个 iframe 的本地脚本，但在 IE8 中，它们更像是在全局范围内加载的。这只是一个猜测。有没有人遇到过这样的事情？而且，如果我们需要删除所有重复的 jquery 引用，有没有办法一次加载它并在所有 iframe 之间共享它？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T20:35:51.037

我知道这听起来像是在黑暗中开枪，但要寻找缺少的分号和尾随逗号，例如

```
$("#element").animate({
  width: 300, // comma
}, function() {
  // Completed.
}); 
```

和

```
$('#element')
.remove()
.end() //missing semicolon

//OtherStuff... 
```

也许不是这样，但是当其他浏览器不这样做时，通常会使 IE 崩溃。

祝你好运！

# ruby-on-rails-3 - Rails 3：如何防止浏览器在后退/前进导航时从缓存中加载页面？

> ID：11785174
> 
> 赞同：2
> 
> 时间：2012-08-02T20:24:09.533
> 
> 标签：ruby-on-rails-3, caching, cache-control, etag

我有以下情况：

页面 A：/something/new
回帖到：/something/create
重定向到页面 B：/something/edit

到目前为止，一切正常。现在，/something/edit 是一个允许您通过 AJAX 执行大量操作的页面，因此它开始时是空的，并且当您使用它时，它会变得“更完整”，可以这么说。如果你在任何时候重新加载，你会得到一切，由服务器呈现。

但是，如果在被重定向并修改页面后，您再次点击 Back 然后 Forward，浏览器（至少 Chrome）不会再次点击服务器（甚至没有可能导致 304 的 Etag 检查，什么都没有)，它只是从缓存中加载页面 B，它显示为空，并且可能会很混乱......

在第一次渲染页面 B 时，服务器会使用以下标头进行响应：

```
Cache-Control:must-revalidate, private, max-age=0
Connection:Keep-Alive
Content-Length:18577
Content-Type:text/html; charset=utf-8
Date:Thu, 02 Aug 2012 20:19:59 GMT
Server:WEBrick/1.3.1 (Ruby/1.9.3/2012-04-20)
Set-Cookie: (redacted)
X-Miniprofiler-Ids:["ma2x1rjc0kgrijiug5dj","nnmovj2wz1lux85jwhd3"]
X-Request-Id:2dd3fa62799beadc1b39b8db1aa5f45f
X-Runtime:0.245014
X-Ua-Compatible:IE=Edge 
```

我没有看到 Etag 或任何类似的东西可能会打扰。此外，如果我正确解释“缓存控制”（不过我对它不是很有经验），它似乎是说*不要缓存*，**永远**......

有什么办法可以避免这种行为，并让浏览器在 Back/Forward 上再次访问服务器？

谢谢！
丹尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T23:47:31.030

我会调查这里发布的答案。

[单击后退按钮时是否存在跨浏览器 onload 事件？](https://stackoverflow.com/questions/158319/cross-browser-onload-event-and-the-back-button)

我刚刚更改了这个答案，因为我所指的一些实用程序已经很旧并且没有维护，这不是一个有用的答案。

# php - preg_replace 匹配除第一次出现之外的所有内容？

> ID：11785178
> 
> 赞同：0
> 
> 时间：2012-08-02T20:24:31.503
> 
> 标签：php, regex, preg-replace

我正在寻找一种方法来替换除第一次出现的组或某些字符之外的所有内容。

例如以下随机字符串：

```
+Z1A124B555ND124AB+A555 
```

1,5,2,4,A,B 和 + 在整个字符串中重复。

124、555 是同样重复出现的字符组。

现在，假设我想删除除了第一次出现的 555、A 和 B。

什么正则表达式是合适的？我可以想到一个替换所有的例子：

```
preg_replace('/555|A|B/','',$string); 
```

像^那样的东西，但我想保留第一次出现......有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T20:35:43.570

~~你的字符串总是用加号分隔吗？555、A 和 B 是否总是出现在第一个“组”中（由 + 分隔）？~~

如果是这样，您可以拆分、替换然后加入：

```
$input = '+Z1A124B555+A124AB+A555';
$array = explode('+', $input, 3); // max 3 elements
$array[2] = str_replace(array('555', 'A', 'B'), '', $array[2]);
$output = implode('+', $array); 
```

~~附言。当我们可以使用简单的 str_replace 时，无需使用正则表达式~~

* * *

使用[`preg_replace_callback`](http://php.net/preg_replace_callback)功能：

```
$replaced = array('555' => 0, 'A' => 0, 'B' => 0);
$input = '+Z1A124B555+A124AB+A555';
$output = preg_replace_callback('/555|[AB]/', function($matches) {
  static $replaced = 0;
  if($replaced++ == 0) return $matches[0];
  return '';
}, $input); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T21:11:36.673

可以修改此解决方案以执行您想要的操作：[PHP: preg_replace (x) 发生？](https://stackoverflow.com/questions/5519630/php-preg-replace-x-occurence)

这是一个修改后的解决方案：

```
<?php
class Parser {

    private $i;

    public function parse($source) {
        $this->i=array();
        return preg_replace_callback('/555|A|B/', array($this, 'on_match'), $source);
    }

    private function on_match($m) {
        $first=$m[0];
        if(!isset($this->i[$first]))
        {
            echo "I'm HERE";
            $this->i[$first]=1;
        }
        else
        {

            $this->i[$first]++;
        }

        // Return what you want the replacement to be.
        if($this->i[$first]>1)
        {
            $result="";
        }
        else
        {
            $result=$m[0];
        }
        return $result;
    }
}

$sample = '+Z1A124B555ND124AB+A555';
$parse = new Parser();
$result = $parse->parse($sample);
echo "Result is: [$result]\n";
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-15T23:43:12.503

一个更通用的函数，适用于每种模式。

```
function replaceAllButFirst($pattern, $replacement, $subject) {

  return preg_replace_callback($pattern,

    function($matches) use ($replacement, $subject) {
      static $s;
      $s++;
      return ($s <= 1) ? $matches[0] : $replacement;
    },

    $subject
  );
} 
```

# android - Android OutOfMemory 问题

> ID：11785179
> 
> 赞同：1
> 
> 时间：2012-08-02T20:24:37.977
> 
> 标签：android, memory, bitmap, imageview, scale

我在我的应用程序中遇到内存不足问题，经过一番搜索，我发现了这段代码

```
 //decodes image and scales it to reduce memory consumption
private Bitmap decodeFile(File f){
    try {
        //Decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream(f),null,o);

        //The new size we want to scale to
        final int REQUIRED_SIZE=70;

        //Find the correct scale value. It should be the power of 2.
        int scale=1;
        while(o.outWidth/scale/2>=REQUIRED_SIZE && o.outHeight/scale/2>=REQUIRED_SIZE)
            scale*=2;

        //Decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize=scale;
        return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
    } catch (FileNotFoundException e) {}
    return null;
} 
```

但是IDK如何使用它，请帮助？代码正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T23:42:12.710

> 但是IDK怎么用

那我猜你还没有实现它！好吧，该方法会将您的文件（例如保存在 SD 卡中）转换为可用作 ImageView 背景的调整大小的位图。

现在，回答您的问题，您可以使用它，如下所示：

```
Bitmap bitmap = decodeFile(new File(your_string_file_path));
myImageView.setImageBitmap(bitmap); 
```

这就是你必须知道的，我猜。

# r - 如何在R中的相关矩阵中提取相邻变量之间的值？

> ID：11785180
> 
> 赞同：5
> 
> 时间：2012-08-02T20:24:41.690
> 
> 标签：r, filter, matrix

我有巨大的相关矩阵，但以下只是一个例子：

```
 set.seed(1234)

corrmat <- matrix(round (rnorm (36, 0, 0.3),2), ncol=6) 
rownames (corrmat) <- colnames (corrmat) <- c("A", "b1", "b2", "C", "L", "ctt")
diag(corrmat) <- NA 
corrmat[upper.tri (corrmat)] <- NA 
            A    b1    b2     C     L ctt
    A      NA    NA    NA    NA    NA  NA
    b1   0.08    NA    NA    NA    NA  NA
    b2   0.33 -0.17    NA    NA    NA  NA
    C   -0.70 -0.27 -0.03    NA    NA  NA
    L    0.13 -0.14 -0.15 -0.13    NA  NA
    ctt  0.15 -0.30 -0.27  0.14 -0.28  NA

> melt(corrmat)

       X1  X2  value
    1    A   A    NA
    2   b1   A  0.08
    3   b2   A  0.33
    4    C   A -0.70
    5    L   A  0.13
    6  ctt   A  0.15
    7    A  b1    NA
    8   b1  b1    NA
    9   b2  b1 -0.17
    10   C  b1 -0.27
    11   L  b1 -0.14
    12 ctt  b1 -0.30
    13   A  b2    NA
    14  b1  b2    NA
    15  b2  b2    NA
    16   C  b2 -0.03
    17   L  b2 -0.15
    18 ctt  b2 -0.27
    19   A   C    NA
    20  b1   C    NA
    21  b2   C    NA
    22   C   C    NA
    23   L   C -0.13
    24 ctt   C  0.14
    25   A   L    NA
    26  b1   L    NA
    27  b2   L    NA
    28   C   L    NA
    29   L   L    NA
    30 ctt   L -0.28
    31   A ctt    NA
    32  b1 ctt    NA
    33  b2 ctt    NA
    34   C ctt    NA
    35   L ctt    NA
    36 ctt ctt    NA 
```

我正在寻找的是仅相邻之间的相关值 - 表示 A-b1、b1-b2、b2-C、CL、L-ctt 之间的相关值（按列中的顺序）。我需要删除其他值和 NA。因此预期将是：

```
 X1   X2  value
    2   b1   A   0.08
    9   b2   b1 -0.17
    16   C   b2  -0.03
    23   L   C  -0.13
    30  ctt  L  -0.28 
```

因此它们处于：`A-b1-b2-C-L-ctt`顺序。

有没有简单的过滤方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-02T20:44:43.647

这是使用经常被忽视的功能的一种`row()`方法`col()`

```
> corrmat ## my version as there was no set.seed
        A    b1    b2    C     L ctt
A      NA    NA    NA   NA    NA  NA
b1   0.03    NA    NA   NA    NA  NA
b2  -0.41 -0.02    NA   NA    NA  NA
C    0.11  0.61 -0.18   NA    NA  NA
L   -0.28 -0.28  0.39 0.01    NA  NA
ctt -0.21 -0.41 -0.55 0.34 -0.13  NA

> corrmat[row(corrmat) == col(corrmat) + 1]
[1]  0.03 -0.02 -0.18  0.01 -0.13 
```

请注意，我们在`corrmat`这里将矩阵索引为向量，括号中的位表示返回元素，其中每个元素的行索引与每个元素的列索引相匹配加 1。使用`-1`将为您提供超对角线（即对角线上方） .

把它们放在一起：

```
out <- data.frame(X1 = rownames(corrmat)[-1],
                  X2 = head(colnames(corrmat), -1),
                  Value = corrmat[row(corrmat) == col(corrmat) + 1])

> out
   X1 X2 Value
1  b1  A  0.03
2  b2 b1 -0.02
3   C b2 -0.18
4   L  C  0.01
5 ctt  L -0.13 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-02T20:36:00.270

这是一种方法：

```
n = rownames(corrmat)
pair.table = data.frame(X1=head(n, -1), X2=tail(n, -1), value=diag(tail(corrmat, -1))) 
```

结果：

```
> pair.table
  X1  X2 value
1  A  b1  0.08
2 b1  b2 -0.17
3 b2   C -0.03
4  C   L -0.13
5  L ctt -0.28 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-02T20:51:56.540

它只是相关矩阵对角线的 1 个。所以，你需要做的就是把对角线移到那个位置，然后你就设置好了。删除第一行和最后一列，然后就是`diag`.

```
corrmat <- corrmat[-1,-ncol(corrmat)]
data.frame(X1 = rownames(corrmat), X2 = colnames(corrmat), r = diag(corrmat)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T20:52:26.673

我的解决方案基于使用行/列名生成组合（梳函数）并“查找”平方距离矩阵中的条目。SIF 代表简单交互文件。

```
makeSIF <- function(x) {
# args - 
#    x - m*m distance or correlation matrix
# @returns data frame in SIF format 
#
    sif <- as.data.frame(t(combn(as.character(rownames(x)), 2)))
    #print(sif)
    weight <- apply(sif, 1, indexDMatFromLookup, x)
    sif2 <- data.frame(sif, weight)
    return(sif2)

}

indexDMatFromLookup <- function(lookup, x) {
    return(indexDMat(x, lookup[1], lookup[2]))
}

indexDMat <- function(x, i1,i2) {
    return(x[i1,i2])
} 
```

看到其他答案，这可能要慢得多。

编辑：实际上还不错。

> system.time（复制（1000，makeSIF（corrmat）））

用户系统已过

0.976 0.000 0.975

> system.time(replicate(1000, data.frame(X1=head(n, -1), X2=tail(n, -1), value=diag(tail(corrmat, -1)))))

用户系统已过

0.656 0.000 0.658

只比约翰的方法慢了几分之一秒。

# asp.net - IIS7 中的 AspNetStart 和 AspNetAppDomainEnter 之间发生了什么？

> ID：11785183
> 
> 赞同：3
> 
> 时间：2012-08-02T20:24:59.817
> 
> 标签：asp.net, asp.net-mvc-3, c#-4.0, iis-7

我在我的 IIS7 网站上为特定的 ashx 启用了 Failed Request Tracing，发现大部分时间它会在 16 毫秒左右返回，偶尔会花费超过 2000 毫秒才能返回。失败的请求跟踪日志表明此时间在“AspNetStart”事件和“AspNetAppDomainEnter”事件之间丢失。有谁知道它在做什么？

非常感谢！

# php - While 循环、jQuery 和 AJAX mysql 查询

> ID：11785184
> 
> 赞同：0
> 
> 时间：2012-08-02T20:24:59.787
> 
> 标签：php, jquery, ajax

我正在开发一个消息系统，用户向另一个用户提交一个响应。然后接收者在一个while循环中查看他的所有消息。我创建了一个删除按钮，它将删除删除按钮链接到的任何消息。我有两个问题。首先，删除按钮不起作用，其次，当它起作用时（不再起作用），while 循环将所有删除按钮链接到第一条消息，而不是单独链接到 while 循环产生的每条消息。另外，我知道 mysql 已被弃用。将很快完成过渡。

这是第一个代码：

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>

<script type="text/javascript" >
    function load(thefile, thediv) {    
        if (window.XMLHttpRequest) {    
            xmlhttp = new XMLHttpRequest();
        } else {
        xmlhttp = new ActiveXObject ('Microsoft.XMLHTTP');  
        }

        xmlhttp.onreadystatechange = function () {  
            if (xmlhttp.readyState==4 && xmlhttp.status==200) {

                document.getElementById(thediv).innerHTML = xmlhttp.responseText;   
            }
        }   

        xmlhttp.open('GET', thefile + key, true);
        xmlhttp.send();
    }
</script>

<?php

while($ergo_data = mysql_fetch_assoc($ergo_query_result)) {
    echo 'Message: ' . $ergo_data['ergo'] . '<br>'; 

    echo 'From: ' . username_from_user_id($ergo_data['user_id_seeker']) . '<br>'; 
    echo 'Time submitted: ' . $ergo_data['ergo_time_submitted'] . '<br><br><br><br>';
    echo $ergo_data['primary_key'];

?>

<div class="changes">    
    <input type="button" value="delete" class="<?php echo $ergo_data['primary_key']; ?>" 
        name="<?php echo $ergo_data['user_id_seeker']; ?>" 
        onclick="load('ajax_ergo_list.php?key=', 
        'delete');">
</div>

<script type="text/javascript" >
    $(document).ready(function(){
        var key = $(".changes :input").attr("class");   
        alert(key); 
    }); 
</script>   
<br>
<br>
<br>
<?php   
}
?>

<div id="delete"></div> 
```

这是第二个文件，其中包含按下按钮时我想要发生的事情。

```
if (isset($_GET['key'])) {
    $key = sanitize($_GET['key']);      
}

if (!empty($key)) {
    $query = "DELETE FROM `ergo` WHERE `primary_key` = '$key'";
    $query_run = mysql_query($query);
    echo 'Deleted!';
}

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T20:50:03.723

好的，首先，这是您在这里编写的各种疯狂代码...

```
<script type="text/javascript" >
    $(document).ready(function(){
        var key = $(".changes :input").attr("class");   
        alert(key); 
    }); 
</script> 
```

你的脚本在一个while循环中。这将与循环一样多次发出警报。这就是函数的全部作用。它没有设置全局变量或任何东西。

关于 jQuery，使用它：

```
function load(thefile, thediv) {    
    if (window.XMLHttpRequest) {    
        xmlhttp = new XMLHttpRequest();
    } else {
    xmlhttp = new ActiveXObject ('Microsoft.XMLHTTP');  
    }

    xmlhttp.onreadystatechange = function () {  
        if (xmlhttp.readyState==4 && xmlhttp.status==200) {

            document.getElementById(thediv).innerHTML = xmlhttp.responseText;   
        }
    }   

    xmlhttp.open('GET', thefile + key, true);
    xmlhttp.send();
} 
```

将其浓缩为：

```
function load(thefile, thediv) {    
    $.get(thefile+key,function(responseText){
        $('#'+thediv).html(responseText);   
    });
} 
```

关于您关于删除功能的问题：

```
<div class="changes">    
    <input type="button" value="delete" class="<?php echo $ergo_data['primary_key']; ?>" 
        name="<?php echo $ergo_data['user_id_seeker']; ?>" 
        onclick="load('ajax_ergo_list.php?key=', 
        'delete');">
</div> 
```

你`onclick`的是正在触发的 javascript。您将第一个变量设置为链接，将第二个变量设置为我猜的动作？在您的函数代码中，第二个变量应该是显示信息的 div。`key`无处可寻。尝试这样做：

```
<div class="changes">    
    <input type="button" value="delete" class="<?php echo $ergo_data['primary_key']; ?>" 
        name="<?php echo $ergo_data['user_id_seeker']; ?>" 
        onclick="load('ajax_ergo_list.php?key=<?php echo $ergo_data['primary_key'];?>', 
        'delete');">
</div> 
```

而你的加载功能：

```
function load(thefile, thediv) {    
    $.get(thefile,function(responseText){
        $('#'+thediv).html(responseText);   
    });
} 
```

祝你好运！

# .htaccess - .htaccess 不适用于特定情况

> ID：11785185
> 
> 赞同：1
> 
> 时间：2012-08-02T20:25:04.143
> 
> 标签：.htaccess, mod-rewrite

我在使用 .htaccess 文件时遇到了一个奇怪的问题。

这是我的文件：

```
<IfModule mod_rewrite.c>
Options +FollowSymlinks

RewriteEngine On

RewriteRule ^(admin)($|/) - [L]

RewriteRule ^$ ./web/view/
RewriteRule ^([A-Za-z0-9]+)$ ./web/view/?module=$1
RewriteRule ^([A-Za-z0-9]+)/$ ./web/view/?module=$1
RewriteRule ^([A-Za-z0-9]+)/([A-Za-z0-9]+)/([0-9]+)$ ./web/view/?module=$1&id1=$2&id2=$3
RewriteRule ^([A-Za-z0-9]+)/([A-Za-z0-9]+)/([0-9]+)/$ ./web/view/?module=$1&id1=$2&id2=$3
RewriteRule ^([A-Za-z0-9]+)/([A-Za-z0-9]+)$ ./web/view/?module=$1&id1=$2
RewriteRule ^([A-Za-z0-9]+)/([0-9]+)/$ ./web/view/?module=$1&id1=$2

ErrorDocument 404 err.php

</IfModule> 
```

现在在最后一条规则中，如果我加上`[a-z]`，`[0-9]`我会收到 500 错误。例如，下面的行会给我 500 错误：

```
RewriteRule ^([A-Za-z0-9]+)/([a-z0-9]+)/$ ./web/view/?module=$1&id1=$2 
```

但是，如果我使用`A-Z`，它工作正常。

```
RewriteRule ^([A-Za-z0-9]+)/([A-Z0-9]+)/$ ./web/view/?module=$1&id1=$2 
```

甚至`[NC]`也给了我同样的错误。

你能帮我识别和纠正这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T23:54:32.633

我的第一个直觉是在每个重写行的末尾添加一个 [L]，例如：

```
RewriteRule ^([A-Za-z0-9]+)$ ./web/view/?module=$1 [L] 
```

这很好用，因为您的重写彼此独立。

第二步是合并每组 RewriteRule 指令，其中正斜杠 (/) 是可选的，因此而不是：

```
RewriteRule ^([A-Za-z0-9]+)$ ./web/view/?module=$1
RewriteRule ^([A-Za-z0-9]+)/$ ./web/view/?module=$1 
```

可以这么说：

```
RewriteRule ^([A-Za-z0-9]+)/?$ ./web/view/?module=$1 
```

问号 (?) 表示 0 或 1，但不超过前面的字符、组或表达式。

最后，您可以考虑优化 RewriteRule 指令组：

```
<IfModule mod_rewrite.c>
Options +FollowSymlinks

RewriteEngine On

RewriteRule ^(admin)($|/) - [L]

RewriteRule ^$ ./web/view/ [L]
RewriteRule ^([A-Za-z0-9]+)/?((([A-Za-z0-9]+)/?)?(([A-Za-z0-9]+)/?)?)?$ ./web/view/?module=$1&id1=$4&id2=$6 [L]

ErrorDocument 404 err.php

</IfModule> 
```

[作为奖励信息，使用QSA（查询字符串附加）标志](http://httpd.apache.org/docs/2.2/rewrite/flags.html#flag_qsa)可能是值得的，例如：

```
RewriteRule ^$ ./web/view/ [L,QSA] 
```

您也可以考虑使用[gskinner 的 RegExr 工具](http://gskinner.com/RegExr/)来帮助您创建、测试或解决您的正则表达式。

最后，在您的 .htaccess 文件中，根据 AllowOverrides 指令的定义方式，您*可以*打开[mod_rewrite 日志记录](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewritelog)：

```
RewriteLog "/path/to/your/home/dir/rewrite.log"
RewriteLogLevel 4 
```

但是，根据您的 apache 服务器版本或配置，您可能需要使用[每个模块的日志记录配置](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#logging)，因为不推荐使用 RewriteLog/Level：

```
LogLevel alert rewrite:trace4 
```

作为免责声明，此级别的日志记录会减慢您的网络服务器，因此不要启用它太长时间，也不要在生产环境中启用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T23:04:32.073

> 现在在最后一条规则中，如果我加上`[a-z]`，`[0-9]`我会收到 500 错误。例如，下面的行会给我 500 错误：

原因是重写引擎进入了一个无限循环：

1.  请求 URI 看起来像`/something/id/`（注意尾部斜杠）
2.  它符合规则：`RewriteRule ^([A-Za-z0-9]+)/([a-z0-9]+)/$ ./web/view/?module=$1&id1=$2`
3.  URI 被重写为`/web/view/?module=something&id=id`
4.  新的 URI 被放回重写引擎，新的 URI =`/web/view/`
5.  URI 匹配（相同）规则：`RewriteRule ^([A-Za-z0-9]+)/([a-z0-9]+)/$ ./web/view/?module=$1&id1=$2`
6.  URI 被重写为`/web/view/?module=web&id=view`
7.  从第 4 步开始重复

您需要添加一个条件以防止它循环：

```
RewriteCond %{REQUEST_URI} !/web/view
RewriteRule ^([A-Za-z0-9]+)/([A-Za-z0-9]+)/$ ./web/view/?module=$1&id1=$2 
```

# java - 应该保持有序的分块通信

> ID：11785191
> 
> 赞同：0
> 
> 时间：2012-08-02T20:25:26.840
> 
> 标签：java, client-server, network-protocols

服务器-客户端应用程序通过 http/xml 进行通信。服务器发送带有数字或更确切地说是块 ID 的 xml 文件。有时客户端会收到比预期更高的块 id 的 xml。所以我需要排队，因为顺序很重要。我使用 a`TreeMap<Integer, Document>`所以我可以将 xmls 添加到地图中，直到收到带有预期块 ID 的 xml。也可能是服务器发送了一个 xml，但客户端接收到了较新的 xml。由于发送和忘记，服务器不知道这一点。所以我的问题是如何处理这个问题？我应该重构架构吗？它有一个模式吗？

**例子**

```
expected chunk id / real chunk id
      0                   0   eval
      1                   3   add to queue
      2                   4   add to queue
      3                   2   add to queue
      4                   1   add to queue
      5                   5   eval / eval queue
      6                   6   eval
      -                   7   no send to client
      7                   8   ?
      8                   9   ? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T14:26:59.983

我构建了一个[OrderedRunnableQueue](https://github.com/alexvetter/Commodity/blob/master/src/org/kaffeezusatz/commodity/collections/OrderedRunnableQueue.java)，您可以在其中添加`Runnable`一个数字。

# java - Java - 在从文件中读取字节时处理字节

> ID：11785192
> 
> 赞同：0
> 
> 时间：2012-08-02T20:25:33.607
> 
> 标签：java, multithreading, asynchronous, io, filechannel

有没有办法让 java 中的一个线程对某些 FileInputStream 或类似内容进行读取调用，并让第二个线程同时处理正在加载的字节？我已经尝试了很多事情 - 我目前的尝试有一个线程运行这个：

```
FileChannel inStream;
try {
   inStream = (new FileInputStream(inFile)).getChannel();
} catch (FileNotFoundException e) {
    e.printStackTrace();
}
int result;
try {
     result = inStream.read(inBuffer);
} ... 
```

第二个线程想要在加载字节时访问它们。显然，第一个线程中的读取调用会阻塞，直到缓冲区已满，但我希望能够在该点之前访问加载到缓冲区中的字节。目前，我尝试的所有内容都有缓冲区，并且它的支持数组在读取完成之前保持不变 - 这不仅破坏了这个线程的要点，而且还表明数据正在某个地方加载到某个中间缓冲区，然后稍后复制到我的缓冲区中，这似乎愚蠢。

一种选择是对数组进行一系列较小的读取，并在后续读取时使用偏移量，但这会增加额外的开销。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T20:30:17.160

当您顺序读取数据时，操作系统会在您需要数据之前提前读取数据。由于系统已经为您执行此操作，您可能无法获得预期的好处。

> 为什么我不能让我的 Filechannel 或 FileInputStream “流动”到我的 ByteBuffer 或某个字节数组中？

这就是它已经在做的事情。

如果您想要更无缝地加载数据，您可以使用内存映射文件，因为它立即“出现”在程序的内存中，并在您使用它时在后台加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T20:45:21.127

我建议使用[SynchronousQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/SynchronousQueue.html)。读取器将从队列中检索数据，写入器将从您的文件中“发布”数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T21:26:20.530

我通常对这样的要求做的是使用多个缓冲区类实例，最好调整大小以允许有效加载 - 例如集群大小的倍数。一旦第一个缓冲区加载完毕，就将其排入队列（即将其指针/实例推送到生产者-消费者队列中）到将处理它的线程并立即创建（或解池）另一个缓冲区实例和开始加载那个。为了控制整体数据流，您可以在启动时创建适当数量的缓冲区对象并将它们存储在“池队列”（另一个生产者-消费者队列）中，然后您可以从池中循环充满数据的对象，以文件读取线程，然后到缓冲区处理线程，然后返回池。

这使文件->处理队列“充满”缓冲区对象充满数据，不需要批量复制，没有不可避免的延迟，没有单字节的低效线程间通信，没有混乱的缓冲区索引锁定，没有机会文件读取线程和数据处理线程可以对同一个缓冲区对象进行操作。

如果您想/需要使用 threadPool 来执行处理，您可以轻松地执行此操作，但如果您需要此子系统的任何结果输出与读取的顺序相同，则可能需要缓冲区对象中的序列号从文件中。

缓冲区对象还可能包含结果数据成员、异常/错误消息字段以及您可能想要的任何内容。在重新汇集之前，文件和/或结果数据可以很容易地从数据处理转发到其他线程（例如，记录器或进度的 GUI 显示）。由于这只是指针/实例队列，因此大量数据将在您的系统中快速有效地流动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T20:56:01.413

使用 PipedInput/OutputStream 创建一个熟悉的带有缓冲区的管道。

如有必要，还可以使用 FileInputStream 逐字节读取它。fis.read() 函数不会阻塞，如果没有数据，它将返回 -1，您可以随时检查 available()；

# cordova - 图像无法通过 phonegap 和 php 代码到达服务器

> ID：11785198
> 
> 赞同：0
> 
> 时间：2012-08-02T20:26:13.440
> 
> 标签：cordova

我的html代码

```
<!DOCTYPE html>
<html>
<head>
    <title>Login Page</title>
          <meta name="viewport" content="width=device-width, initial-scale=1">

 <script type="text/javascript" charset="utf-8" src="cordova-2.0.0.js"></script>
    <script type="text/javascript">

    function PictureSourceType() {};
    PictureSourceType.PHOTO_LIBRARY = 0;
    PictureSourceType.CAMERA = 1;

    function getPicture(sourceType)
    {
         var options = { quality: 10 };
         if (sourceType != undefined) {
              options["sourceType"] = sourceType;
             // options["destinationType"] = destinationType.DATA_URL;
         }
         // if no sourceType specified, the default is CAMERA 
         navigator.camera.getPicture(getPicture_Success, null, options);
    };

    function getPicture_Success(imageData)
    {
             alert("getpic success "+ imageData);
            document.getElementById("test_img").src =  imageData;
    };

    function success(response) {
        alert("Your photo has been uploaded!");
      };
      // callback if the photo fails to upload successfully.

      function fail(error) {
        alert("if refreshed An error has occurred: Code = " + error.code);
      };

    function uploadPhoto()
    {
        var imageFile = document.getElementById("test_img").src;
        alert(imageFile);

        var ft,options;

        options = new FileUploadOptions();
        options.fileKey = "profile_image";
          // name of the file:
          options.fileName = imageFile.substr(imageFile.lastIndexOf('/') + 1);
          // mime type:
          options.mimeType = "multipart/form-data";
          params = {
            val1: "some value",
            val2: "some other value"
          };
          options.params = params;

        ft = new FileTransfer();
        ft.upload(imageFile, 'http://192.168.123.199/saveImage.php', success, fail, options,false);
        alert("There is something called file transfer " + imageFile);

    };

   </script>
    </head>

     <body>
 <div data-role="page" id="cameraPage">
<div data-role="header" data-position="inline">
    <h1>Edit profile Pic</h1>
    <a href="index.html" data-icon="delete" class="ui-btn-right">Cancel</a>
</div>

<div data-role="content">
    <center>
    <img style="width: 60px; height: 60px" id="test_img" src="" />
    </center>

    <button onclick="getPicture()">From Camera</button>

    <button onclick="getPicture(PictureSourceType.PHOTO_LIBRARY)">From
        Photo Library</button>
    <button onclick="uploadPhoto()">Upload Photo</button>

</div> 
```

我的PHP代码

```
<?php// Directory where uploaded images are saved

$target_path = "tmp/";

$target_path = $target_path . basename( $_FILES['profile_image']['name']); 

if(move_uploaded_file($_FILES['profile_image']['name'], $target_path)) {
echo "The file ".  basename( $_FILES['profile_image']['name']). 
" has been uploaded";
} else{
echo "There was an error uploading the file, please try again!";
}
?> 
```

在日志猫

```
08-02 23:21:05.835: D/FileTransfer(16094): upload content://media/external/images/media/1889 to http://192.168.123.199/saveImage.php
08-02 23:21:05.835: D/FileTransfer(16094): fileKey: profile_image
08-02 23:21:05.835: D/FileTransfer(16094): fileName: 1889
08-02 23:21:05.835: D/FileTransfer(16094): mimeType: multipart/form-data
08-02 23:21:05.835: D/FileTransfer(16094): params: {"val1":"some value","val2":"some other value"}
08-02 23:21:05.835: D/FileTransfer(16094): trustEveryone: false
08-02 23:21:05.835: D/FileTransfer(16094): chunkedMode: true
08-02 23:21:08.740: D/dalvikvm(16094): GC_CONCURRENT freed 252K, 48% free 3122K/5959K, external 882K/1314K, paused 8ms+14ms 
```

我看不到上传成功或错误的警报

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-31T06:35:13.930

我使用以下php代码保存上传的文件

```
<?php
$target_path = "tmp/";
if ($_FILES["profile_image"]["error"] > 0){
    echo "Error: " . $_FILES["profile_image"]["error"] . "<br>";
}
else{ 
    if (file_exists($target_path . $_FILES["profile_image"]["name"])){
        echo $_FILES["profile_image"]["name"] . " already exists. ";
    }
    else{
        move_uploaded_file($_FILES["profile_image"]["tmp_name"], $target_path . $_FILES["profile_image"]["name"]);
        echo "Stored in: " . $target_path . $_FILES["profile_image"]["name"];
    }
}
?> 
```

# java - 如何获取当前午夜以来的毫秒数？

> ID：11785200
> 
> 赞同：128
> 
> 时间：2012-08-02T20:26:19.883
> 
> 标签：java, date, time, milliseconds

注意，我不想要时代的毫秒。我想要当前时钟上的毫秒数。

例如，我有这段代码。

```
Date date2 = new Date(); 
Long time2 = (long) (((((date2.getHours() * 60) + date2.getMinutes())* 60 ) + date2.getSeconds()) * 1000); 
```

有没有办法获得日期的毫秒数？还有另一种方法可以做到这一点吗？

**注意：** `System.currentTimeMillis()`给我来自时代的毫秒，这不是我想要的。

* * *

## 回答 #1

> 赞同：202
> 
> 时间：2012-08-02T20:27:52.950

你的意思是？

```
long millis = System.currentTimeMillis() % 1000; 
```

* * *

顺便说一句，Windows 不允许时间旅行到 1969 年

```
C:\> date
Enter the new date: (dd-mm-yy) 2/8/1969
The system cannot accept the date entered. 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-08-02T20:27:58.650

使用日历

```
Calendar.getInstance().get(Calendar.MILLISECOND); 
```

或者

```
Calendar c=Calendar.getInstance();
c.setTime(new Date()); /* whatever*/
//c.setTimeZone(...); if necessary
c.get(Calendar.MILLISECOND); 
```

在实践中，虽然我认为它几乎总是等于 System.currentTimeMillis()%1000; 除非有人有闰毫秒或某些日历是用不在第二边界上的纪元定义的。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-08-02T20:30:46.433

```
Calendar.getInstance().get(Calendar.MILLISECOND); 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2017-02-18T08:15:54.723

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2015-01-15T13:43:23.760

我在上面尝试了几个，但它们似乎重置了@ 1000

这个肯定有效，还应该考虑到年份

```
long millisStart = Calendar.getInstance().getTimeInMillis(); 
```

然后在需要时对结束时间执行相同的操作。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-04-04T21:33:25.673

1.  `long timeNow = System.currentTimeMillis();`
2.  `System.out.println(new Date(timeNow));`

> Fri Apr 04 14:27:05 PDT 2014

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-08-02T21:05:49.423

# 乔达时间

我认为您可以使用[Joda-Time](http://www.joda.org/joda-time/)来执行此操作。看一下这个[`DateTime`](http://www.joda.org/joda-time/apidocs/org/joda/time/DateTime.html)类和它的[`getMillisOfSecond`](http://www.joda.org/joda-time/apidocs/org/joda/time/base/AbstractDateTime.html#getMillisOfSecond--)方法。就像是

```
int ms = new DateTime().getMillisOfSecond() ; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-06-28T12:54:04.827

您可以使用 java.util.Calendar 类以毫秒为单位获取时间。例子：

```
Calendar cal = Calendar.getInstance();
int milliSec = cal.get(Calendar.MILLISECOND);
// print milliSec

java.util.Date date = cal.getTime();
System.out.println("Output: " +  new SimpleDateFormat("yyyy/MM/dd-HH:mm:ss:SSS").format(date)); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-02-18T05:16:54.990

在 Java 8 中，你可以简单地做

```
ZonedDateTime.now().toInstant().toEpochMilli() 
```

> 返回：自 1970-01-01T00:00:00Z 纪元以来的毫秒数

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-01-20T15:11:19.787

爪哇 8：

```
LocalDateTime toDate = LocalDateTime.now();
LocalDateTime fromDate = LocalDateTime.of(toDate.getYear(), toDate.getMonth(), 
toDate.getDayOfMonth(), 0, 0, 0);
long millis = ChronoUnit.MILLIS.between(fromDate, toDate); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-06-16T01:39:02.797

我使用 java 8 进行了测试 构建器总是花费 0 毫秒的顺序和 26 到 33 毫秒之间的连接以及 1000 连接的迭代并不重要

希望它可以帮助您尝试一下

```
public void count() {

        String result = "";

        StringBuilder builder = new StringBuilder();

        long millis1 = System.currentTimeMillis(),
            millis2;

        for (int i = 0; i < 1000; i++) {
            builder.append("hello world this is the concat vs builder test enjoy");
        }

        millis2 = System.currentTimeMillis();

        System.out.println("Diff: " + (millis2 - millis1));

        millis1 = System.currentTimeMillis();

        for (int i = 0; i < 1000; i++) {
            result += "hello world this is the concat vs builder test enjoy";
        }

        millis2 = System.currentTimeMillis();

        System.out.println("Diff: " + (millis2 - millis1));
    } 
```

# c - 反转协方差矩阵的马氏距离

> ID：11785201
> 
> 赞同：10
> 
> 时间：2012-08-02T20:26:25.793
> 
> 标签：c, algorithm, matrix, linear-algebra

我正在编写一个函数来获取两个向量之间的马氏距离。我知道这是使用方程 a'*C^-1*b 实现的，其中 a 和 b 是向量，C 是协方差矩阵。我的问题是，有没有一种有效的方法可以在不使用 Gauss-Jordan 消除的情况下找到矩阵的逆矩阵，或者没有办法解决这个问题？我正在寻找一种方法来自己做这件事，而不是使用任何预定义的函数。

我知道 C 是 Hermitian 正定矩阵，那么有什么方法可以在算法上利用这个事实吗？还是有一些聪明的方法可以计算马氏距离而不计算协方差的倒数？任何帮助，将不胜感激。

***编辑：上面的马氏距离方程不正确。它应该是 x'*C^-1*x，其中 x = (ba)，b 和 a 是我们试图找到其距离的两个向量（感谢 LRPurser）。因此，所选答案中提出的解决方案如下：

d=x'*b，其中 b = C^-1*x C*b = x，因此使用 LU 分解或 LDL' 分解求解 b。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-02T20:56:10.010

您可以（并且应该！）使用[LU 分解](http://en.wikipedia.org/wiki/LU_decomposition)而不是显式反转矩阵：使用分解求解`C x = b`比计算`C^-1`和乘以向量具有更好的数值属性`b`。

由于您的矩阵是对称的，因此 LU 分解实际上等效于[LDL* 分解](https://vismor.com/documents/network_analysis/matrix_algorithms/S7.SS2.php)，这是您实际应该使用的。由于您的矩阵也是正定的，因此您应该能够在不旋转的情况下执行此分解。

* * *

编辑：请注意，对于此应用程序，您不需要解决全部`C x = b`问题。

相反，给定`C = L D L*`和差分向量`v = a-b`求解`L* y = v`（`y`这是完整 LU 求解器的一半工作量）。

然后，`y^t D^-1 y = v^t C^-1 v`可以在线性时间内计算。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-03T16:06:41.487

第一马氏距离 (MD) 是关于两个向量测量中不确定性的规范距离。当 时`C=Indentity matrix`，MD 减少到欧几里得距离，因此乘积减少到向量范数。此外，对于所有非零向量，MD 始终为正定或大于零。By your formulation with the appropriate choice of the vectors `a`and `b`, `a*C^-1*b`can be less than zero. 希望您正在寻找的向量的不同之处在于`x=(a-b)`计算向量的转置在`x^t*C^-1*x`哪里。另请注意， 由于您的矩阵是对称且正定的，因此您可以利用 Cholesky 分解，它使用一半的运算作为 LU，并且在数值上更稳定。`x^t``x``MD=sqrt(x^t*C^-1*x)``(MatLab-chol)``chol(C)=L`其中`C=L*L^t`where`L`是下三角矩阵，`L^t`是`L`使其成为上三角矩阵的转置。你的算法应该是这样的

(Matlab)

```
 x=a-b;
  L=chol(C); 
  z=L\x; 
  MD=z'*z; 
  MD=sqrt(MD); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-18T11:04:07.137

```
# Mahalanobis Distance Matrix

import numpy as np
from scipy.spatial import distance
from scipy.spatial.distance import mahalanobis
from scipy.spatial.distance import pdist
from scipy.spatial.distance import squareform

# Example
Data = np.array([[1,2],[3,2],[4,3]])
Cov = np.cov(np.transpose([[1,2],[3,2],[4,3]]))
invCov = np.linalg.inv(Cov)

Y = pdist(Data, 'mahalanobis', invCov)
MD = squareform(Y) 
```

# javascript - li 不同高度的物品

> ID：11785202
> 
> 赞同：1
> 
> 时间：2012-08-02T20:26:27.960
> 
> 标签：javascript, html, css

我想允许`li`项目具有相同的宽度但不同的高度，其中可能包括图像和文本。问题是当我向左浮动或显示：内联块时，其中一项超过了高度。它扰乱了内容的视觉风格。有什么办法可以管理这个吗？

我希望 li 遵循一个简单的规则

```
li {
    float:left;
    display:list-item;
    width:200px;
    background:#CCC;
    height:auto;
    padding:10px;
    margin:0 10px 10px 0;
} 
```

包含相同内容的示例网站是

[珍妮网站](http://www.genny.com/en/inside)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T20:37:43.103

Sites like genny.com and pinterest.com do NOT float their elements, but rather position them absolutely and set their `left` and `top` values dynamically through JS. First, they grab the count of elements on the page. Second, they sniff the `height` and `width` of the elements. Third, they change the `left` and `top` CSS values.

+1 for the [Masonry](http://vanilla-masonry.desandro.com/) answer, I just wanted to explain how it works.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T20:30:10.453

[jQuery Masonry](http://masonry.desandro.com/)将是您在这里寻找的东西，从本质上讲，如果没有一些不太理想的代码，li 永远不会真正达到上面的那个，但是 jQuery 插件使它非常简单。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-02T20:30:44.213

我认为您需要创建三列。就像是：

```
<ul id="first column">
    <li>Some content</li>
    <li>Some content</li>
   . . .
</ul>
<ul id="second column">
    <li>Some content</li>
    <li>Some content</li>
   . . .
</ul>
<ul id="third column">
    <li>Some content</li>
    <li>Some content</li>
   . . .
</ul> 
```

那么你不应该浮动 li 标签。

# ruby-on-rails - 找不到标题、ID 或文本“删除”的链接

> ID：11785205
> 
> 赞同：1
> 
> 时间：2012-08-02T20:26:48.397
> 
> 标签：ruby-on-rails, testing, rspec-rails

我正在使用 rspec，并且正在尝试为用户的汽车测试 DELETE 方法：

```
 describe "DELETE " do
    it "should delete a car" do
        #@car = Factory.create :car
        expect { click_link "Delete" }.to change{Car.count}.by(-1)
    end
end 
```

当我运行它时，我得到了这个错误：

```
CarsController DELETE  should delete a car
 Failure/Error: expect { click_link "Delete" }.to change{Car.count}.by(-1)
 Capybara::ElementNotFound:
   no link with title, id or text 'Delete' found
 # (eval):2:in `click_link'
 # ./spec/controllers/car_controller_spec.rb:30:in `block (4 levels) in <top (required)>'
 # ./spec/controllers/car_controller_spec.rb:30:in `block (3 levels) in <top (required)>' 
```

我不知道为什么，因为我的 index.html.erb 上有这个链接：

```
<td><%= link_to 'Delete', user_car_path(@user, car), :confirm => 'Are you sure?', :method => :delete %></td> 
```

但在我的应用程序中它有效

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T20:33:54.843

rails 中的删除请求被转换为表单，这就是找不到元素的原因。您还需要触发确认。

点击删除：

```
find('a', :text => 'Delete').click 
```

接受确认：

```
page.driver.browser.switch_to.alert.accept 
```

如果您希望能够使用 Railscast，可以在没有 JavaScript 的情况下实现 destroy 方法`click_link`

[http://railscasts.com/episodes/77-destroy-without-javascript/](http://railscasts.com/episodes/77-destroy-without-javascript/)

# linux - Linux 上的 X Windows 事件

> ID：11785206
> 
> 赞同：2
> 
> 时间：2012-08-02T20:26:57.463
> 
> 标签：linux, x11

出于好奇，我试图自学如何在 Linux 上的两个或多个 X 窗口之间抓取事件。到目前为止，我是一个可怕的黑客，只能获得 FocusIn 和 FocusOut 事件。

有人对如何以正确的方式执行此操作有任何建议或快速教程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T04:17:33.730

你为什么不看一下 xev 和 xwininfo 的源代码，看看它们是如何得出它们的信息的。

xev 就像 Windows 的 spy++ 并实时捕获各种事件： `xev -id $(xwininfo | awk '/Window id/ { print $4 }')`

xwininfo 更像是一个静态工具，可以更多地了解窗口的属性。

# java - 推荐 OSX 上 JAR 文件的位置

> ID：11785207
> 
> 赞同：1
> 
> 时间：2012-08-02T20:27:04.060
> 
> 标签：java, macos, javadoc, osx-mountain-lion

我有许多库（JAR 文件夹）：

*   甲骨文客户端 10
*   安卓 SDK
*   BusinessObjects Java 和 WebService SDK
*   Crystal Reports 运行时和 Eclipse 插件

其中一些还包括 ZIP 格式的 JavaDocs。

我想通过 Eclipse、NetBeans 和 Groovy 使用这些库。

此时，我已将它们添加到 ~/SDKs 文件夹，但我并不真正关心这个位置。一位同事建议我改用 /usr/local 目录。

为了进一步混淆，Apple 的技术问答文档[QA1170 - Mac OS X 上的重要 Java 目录](http://developer.apple.com/library/mac/#qa/qa1170/_index.html)建议使用以下文件夹之一：

*   /库/Java/扩展
*   ~/库/Java/扩展

该文件提到：

> 放置在这些目录中的任何一个目录中的项目都不需要在应用程序的类路径中命名，并且将可供在相应范围（系统级或用户级，取决于使用哪个目录）下运行的所有应用程序使用。

我喜欢这个想法，但是如果某个给定库的多个版本（例如 Oracle 10 和 11 客户端）位于这些文件夹之一，是否会有任何问题？

一般来说，在 OS X 上是否有 JAR 的首选位置？JAR 的 JavaDoc 是否应该包含在同一个文件夹中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T20:41:46.340

我建议使用适当的存储库，例如[Archiva](http://archiva.apache.org/)。[并使用Apache Maven](http://maven.apache.org/)等按需检索这些工件。

另一种选择是使用 Amazon S3 作为 Maven 存储库。

# c# - 横向读取的扫描位图，翻转？（C＃）

> ID：11785212
> 
> 赞同：2
> 
> 时间：2012-08-02T20:27:28.303
> 
> 标签：c#, .net, image, image-processing, bitmap

我有一个简单的文件，它读取单色位图（即黑白）并打印出 x 来表示黑色部分。但是，我注意到由于某种原因我需要添加代码

```
img.RotateFlip(RotateFlipType.Rotate270FlipY); 
```

让它“正常”显示。换句话说，似乎我的代码或内置函数的实现中的某些内容在读取图像时正在旋转和翻转图像，这与我的意图背道而驰。

我打赌这是一个比“按预期工作”更愚蠢的错误，所以我在下面包含了相关代码：

```
 private void button1_Click(object sender, EventArgs e)
    {
        if (openFileDialog1.ShowDialog() == DialogResult.OK)
        {
            // Stream objects for capturing image data
            StreamReader sr = new StreamReader(openFileDialog1.OpenFile());
            MemoryStream memStream = new MemoryStream();

            // Image objects containing image data
            Bitmap img = (Bitmap) Bitmap.FromStream(sr.BaseStream);

            /**** HACK ****/
            //img.RotateFlip(RotateFlipType.Rotate270FlipY);
            /****      ****/

            // Save the image data to our memory stream
            img.Save(memStream, ImageFormat.Gif);

            // Save data to a byte array
            byte[] imgData = memStream.ToArray();

            // Print image data
            for (int x = 0; x < img.Width; ++x)
            {
                Color rgb = new Color();
                for (int y = 0; y < img.Height; ++y)
                {
                    rgb = img.GetPixel(x, y);

                    if (rgb.ToArgb().Equals(Color.White.ToArgb()))
                    {
                       textBox1.AppendText(" ");
                    }
                    else
                    {
                        textBox1.AppendText("x");
                    }
                }
                textBox1.AppendText(Environment.NewLine);
            }
        }
    } 
```

我读到了字母“B”的位图，它给了我以下信息。

没有“黑客”：

```
 x                         x        
     x                         x        
     x                         x        
     xx                       xx        
     xxxxxxxxxxxxxxxxxxxxxxxxxxx        
     xxxxxxxxxxxxxxxxxxxxxxxxxxx        
     xxxxxxxxxxxxxxxxxxxxxxxxxxx        
     x            x            x        
     x            x            x        
     x            x            x        
     x            x            x        
     x            x            x        
     x            x            x        
     x            x            x        
     x            x            x        
                  x            x        
      x          xx                     
      x         xxxx          x         
      xx       xxx x          x         
       xx     xxxx xx        xx         
       xxxxxxxxxx   xxx    xxx          
         xxxxxxx    xxxxxxxxxx          
           xxx       xxxxxxx            
                       xxx 
```

使用“黑客”：

```
 xxxxxxxxxxxxxxx                   
        xxxx         xxx               
         xxx           xxx             
         xxx            xx             
         xxx             xx            
         xxx             xx            
         xxx             xxx           
         xxx             xxx           
         xxx             xxx           
         xxx            xxx            
         xxx           xxxx            
         xxx          xxxx             
         xxx         xxxx              
         xxxxxxxxxxxxxx                
         xxx          xxx              
         xxx            xxx            
         xxx             xxx           
         xxx             xxx           
         xxx              xxx          
         xxx              xxx          
         xxx              xxx          
         xxx              xx           
         xxx             xxx           
         xxx             xx            
         xxx            xxx            
        xxxx          xxx              
     xxxxxxxxxxxxxxxx 
```

我非常期待有人指出我的错误。:)

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T20:33:59.393

您的问题是您正在使用内部循环构建行以放入文本框中，但是您的内部循环在 y 上循环。尝试改变这些循环的嵌套，看看你会得到什么。此外，您的 y 循环需要从顶部开始，否则图像将上下颠倒。

```
 for (int y = img.Height - 1; y >= 0; --y)
    {
        Color rgb = new Color();
        for (int x = 0; x < img.Width; ++x)
        {
            rgb = img.GetPixel(x, y);

            if (rgb.ToArgb().Equals(Color.White.ToArgb()))
            {
               textBox1.AppendText(" ");
            }
            else
            {
                textBox1.AppendText("x");
            }
        }
        textBox1.AppendText(Environment.NewLine);
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T20:32:59.150

您正在横向打印它。您的`y`循环应该是外部循环，以便您一次写入一行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T20:33:25.227

你有你的宽度和高度循环向后。你最里面的循环是从图像的顶部到图像的底部。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T20:34:53.087

看起来你的内部循环正在扫描渐进式 Y 值，而你的外观使用不同的 X 值。假设输入数据处于“正常”扫描顺序，这将导致您看到的旋转。——卡尔

# asp.net - 需要隐藏我的 ASP.net 网页的一部分，直到用户点击提交

> ID：11785213
> 
> 赞同：0
> 
> 时间：2012-08-02T20:27:36.373
> 
> 标签：asp.net, database, vb.net, web-project

我在 ASP.net 中有一个用 VB.net 编写的页面。这是用户将单击的一系列清单。当他们单击“提交”时，VBScripts 将在后台运行并发布到数据库。

然后我需要从表中的数据库中获取结果。

我想我会使用 GridView 或 ListView 来做到这一点。一个要求是当用户点击提交时，表格将出现在同一页面上，并且预先存在的“提交”按钮将消失。

这有意义吗？对我来说，最好的方法是什么？

目前我没有实施数据库，但这是我计划在一周内完成的。我确实有一个可以使用的“测试”数据库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T20:35:16.723

您可以在回发期间简单地将按钮的可见性设置为 false 并将 gridview 设置为 true 吗？

例如

```
If(Not IsPostBack) Then
{
    submitButton.Visible = true; // show button
    gridView.Visible = false;    // hide grid
}
Else
{
    submitButton.Visible = false;  // user submitted, so hide button
    gridView.Visible = true;       // show grid
}
EndIf 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T02:00:20.747

您也可以使用向导控件，在步骤 1 中提出问题并在步骤 2 中返回响应。这只是一种替代方法，但上述方法确实是要走的路。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T02:17:11.257

在您的提交按钮代码中，在您的 VBScript 运行后，您只需将 Asp.net 控件的可见性设置为 false。

像这样的东西。

```
Private Sub btnSubmit_Click(sender As Object, e As EventArgs)

    ... 

    btnSubmit.visible = false
    gridview1.visible = true

End Sub 
```

同样在 .aspx 页面上将这些控件设置为默认状态，因此当用户第一次进入页面时提交按钮应该是可见的，而 gridview 是不可见的。

希望这可以帮助。

# c# - 使用 GDI+ 绘制跟随路径的字符串

> ID：11785217
> 
> 赞同：8
> 
> 时间：2012-08-02T20:27:45.123
> 
> 标签：c#, asp.net, graphics, drawing, gdi+

我整天都在为这件事挠头。我需要动态创建一个包含客户端提供的字符串的图像。唯一的问题是，字符串需要沿着如下图所示的曲线绘制。我还想指定曲线的角度，因为此文本需要在多个产品上显示，并且每个产品的曲线各不相同。

我试图遍历字符串并显示每个字符，并给每个字符一个特定的坐标以类似于抛物线，但为了使其有用，每个字符都需要旋转以适应曲线。有人对 System.Drawing 库有任何可能对我有用的建议吗？

![在此处输入图像描述](../Images/da26c3aa511e63cbc1170e547097e377.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T08:21:31.957

我发现这篇关于在 VB.NET 中沿路径绘制文本的代码项目的文章 - 我确信标准代码转换器可以为您自动将其更改为 C#，它可能会解决您的问题！

[http://www.codeproject.com/Articles/13864/Text-on-Path-with-VB-NET](http://www.codeproject.com/Articles/13864/Text-on-Path-with-VB-NET)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T14:31:55.660

经过一番研究，似乎 WPF 是生成扭曲文本时的最佳途径。一些谷歌搜索让我找到了[这个项目](http://www.codeproject.com/Articles/30090/Text-On-A-Path-in-WPF)。有少量的 XAML，它仍然是用 C# 编写的。感谢@lneir on codeproject 提供了如此出色的代码。它是可扩展的、灵活的、编写精美的，而且最好的部分……没有贝塞尔曲线。

我还提到需要在动态创建的图像上呈现此文本。事实证明，您可以将任何 WPF 控件转换为图像。[这是我找到的链接](http://www.dreamincode.net/code/snippet4326.htm)。

感谢您的回复。

# css - 无法让我的 div 与布局保持固定

> ID：11785227
> 
> 赞同：0
> 
> 时间：2012-08-02T20:28:19.070
> 
> 标签：css, layout, html

我对 css、div 和介于两者之间的一切都很陌生。

所以，我为我的乐队创建了一个基本布局，不想要一堆无用的链接，比如简历、商品商店等等。所以我决定为我们的视频、播放器和 Facebook 窗口安排单独的空间。

我设法为 youtube iframe 创建了一个 div，但是当我调整窗口大小时，我无法让它留在原位。我尝试过多次将定位更改为绝对、固定、相对……等。没运气。

请记住，布局没有什么花哨的，只是快速查看并获取乐队的一些基本信息。

这是链接：[http ://silentcellmusic.com/test.html](http://silentcellmusic.com/test.html)

提前谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T20:38:42.613

First you should remove the image from the markup, and set it as background of the body, or html, for example. Set it to position *top center*.

Then, set the div #wrapper to { width: 960px; margin 0 auto; }. This way it will always be in the center of screen, so as your background.

Third, create four divs:

*   social
*   listen
*   video

Float them to the left, set their widths and margins, accordingly.

Finally add a div for your footer (social links and mailto).

Best of luck.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T20:39:30.303

What you need to do is use positions. What `fixed` does is determine the position in relation to the window (or browser) top left corner, so it will always stay in the same place no matter how you resize it. The right way to go is to use `absolute` and `relative`.

First you need a `relative` container. Your image is already centered, so you could do something like:

```
<div id="container">...</div>

#container {width:960px; margin:0 auto; position:relative;} 
```

Then you want your video to be in an absolutely positioned div, but INSIDE the relative one. SO your html would be:

```
<div id="container">
 <div id="videoDiv">
   your video here
 </div>
</div> 
```

And your css for the videoDiv:

```
#videoDIv {position:absolute; top:200px; left:200px; } 
```

Look por css position online to understand how it works, it's actually quite simple but you need the right structure. In your case, your `center` tag should be the one with position relative, but make sure you change it to a div, otherwise some browsers will give a validation error.

Having said that, there are a lot of things you can do to improve your site. Once you know how to handle positions, you could re-do the layout using different images (so it's faster to load), and you can use actual text. This is quite important for search engines to recognise your site, so try at least to have keywords spread around.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T20:40:45.097

完全摆脱`<center>`标签并将 #apDiv1 的 css 更改为：

```
#apDiv1 {
   position: absolute;
   left: 597px;
   top: 489px;
   width: 400px;
   height: 223px;
   z-index: 1;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T20:40:13.460

这是视频 div 的 CSS：

```
#apDiv1 {
    position:absolute;
    left:747px;
    top:535px;
    width:400px;
    height:223px;
    z-index:1;
    #wrapper {
    margin-left:auto;
    margin-right:auto;
    width:960px;
} 
```

你的意思是两次声明宽度？width:960px 是否会影响您的定位？

# objective-c - Xcode - 这是 MVC 吗？

> ID：11785229
> 
> 赞同：5
> 
> 时间：2012-08-02T20:28:33.793
> 
> 标签：objective-c, xcode, model-view-controller

我是一名兼职记事本网站编码员，正在逐步进入 IOS 应用程序。上周我得到了我的第一台 Mac，并拼凑了一个可以正常工作的应用程序。[现在，被这个SO 答案](https://stackoverflow.com/a/2443020/781200)说服了，我重新开始尝试学习 MVC。我的学习曲线非常陡峭，所以请多多包涵。

我已经阅读了 MVC、层分离、三个框和一些箭头，我明白了。然而，将理论转化为现实世界是令人沮丧的。我看过的大多数示例应用程序似乎都没有使用 MVC。甚至这个来自 Apple 的[LazyTableImages 示例](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html)似乎也被`app delegate`用作让我感到困惑的模型。我建立在这个非常[简单的 MVC 示例](http://fromideatoapp.com/downloads/example/)之上。

我的应用程序从 Web 服务中检索位置标记。我有一个使用 ARC 的选项卡式应用程序。一个选项卡有一个 Mapkit 地图来显示标记。

保存标记记录的简单类：

```
@interface MarkerRecord : NSObject

@property (strong, nonatomic) NSDecimalNumber *lat;
@property (strong, nonatomic) NSDecimalNumber *lon;
@property (strong, nonatomic) NSString *des; 
```

一个模型类，持有标记类​​的集合，为两个视图提供服务。这是我的模型类.h：

```
@interface MarkersModel : NSObject

- (void)getMarkers; // Send HTTP GET to web service to retrieve JSON markers
- (void)postMarker; // Send HTTP POST to web service to INSERT new marker record 
```

和实施：

```
@interface MarkersModel ()
@property (strong, nonatomic) NSArray *data;
@end

@implementation MarkersModel
@synthesize data;

- (void)getMarkers
{
    // Send HTTP GET to web service to retrieve JSON markers
    ...
}

- (void)objectLoader:(RKObjectLoader *)objectLoader didLoadObjects:(NSArray *)objects
{
    // Thanks to Restkit data is an array of Marker classes
    data = objects;

    // Pass data to controller

} 
```

mapViewController 类 .h：

```
#import <MapKit/MapKit.h>
#import "MarkersModel.h"

@interface MapViewController : UIViewController<MKMapViewDelegate> {
    MarkersModel *markersModel;
}

@property (nonatomic, strong) IBOutlet MKMapView *mapView;

@end 
```

和实施：

```
@interface MapViewController ()
@end

@implementation MapViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Create instance of markers model
    markersModel = [[MarkersModel alloc] init];
}

-(void)viewWillAppear:(BOOL)animated
{
    [markersModel getMarkers];
}

- (void)putMarkersOnMap
{
    // To be called by Markers Model 
    ...
} 
```

这是我的主要问题：

*   我上面的代码大纲（开始）是一个体面的 MVC 实现吗？

如果是这样的话：

*   如何让模型更新控制器（即如何让 MarkersModel.objectLoader 函数调用 mapViewController.putMarkersOnMap）？

我强烈怀疑答案是控制器上的自定义委托，但我无法终生了解如何实现它。我无法将任何例子与我的情况联系起来。我想我在控制器上需要这样的东西：

```
@class MapViewController;
@protocol MapViewControllerDelegate; 
```

虽然我在做一些额外的问题：

*   我会创建任何悬空指针 - 我怀疑应该是什么`unsafe_unretained`（我正在编译到 4.3）？
*   我在控制器类中的 MarkersModel 声明是否正确？我担心它不会由 ARC 管理。我也怀疑它是公开的，但应该是私有的。
*   MarkersModel.getMarkers 方法应该是静态的吗？

我希望这是一个明确且可以接受的问题。谢谢你的耐心，波莉。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T20:40:39.823

> 我上面的代码大纲（开始）是一个体面的 MVC 实现吗？

以我的标准，是的

> 如何让模型更新控制器

你是对的，你想使用委托。您声明委托协议以及它是委托的类。所以扩展你的`MarkersModel`标题：

```
@protocol MarkersModelDelegate<NSObject>
-(void) markersDidUpdate:(MarkersModel*)model;
@end

@interface MarkersModel : NSObject
{
    __weak id<MarkersModelDelegate> delegate;
}

@property(weak,nonatomic) id<MarkersModelDelegate> delegate; 
```

然后在您的视图控制器中：

```
@interface MapViewController : UIViewController<MKMapViewDelegate, MarkersModelDelegate> { 
```

然后在模型实现中：

```
@implementation MarkersModel

@synthesize delegate;

//...

-(void)objectLoader:(RKObjectLoader *)objectLoader didLoadObjects:(NSArray *)objects
{
    // Thanks to Restkit data is an array of Marker classes
    data = objects;

    // Pass data to controller
    if( delegate != nil )
    {
        [delegate markersDidUpdate:self];
    }
} 
```

> 我会创建任何悬空指针 - 我怀疑某些东西应该是 unsafe_unretained （我正在编译到 4.3）？

不是我知道的

> 我在控制器类中的 MarkersModel 声明是否正确？我担心它不会由 ARC 管理。我也怀疑它是公开的，但应该是私有的。

`@private`您可以通过预先添加标头将其声明为私有：

```
@interface MapViewController...
{
@private
MarkersModel *markersModel;
... 
```

> MarkersModel.getMarkers 方法应该是静态的吗？

如果通过静态，您的意思是作为类级别而不是实例级别方法，这完全取决于您的实现。如果所有`MarkersModel`对象都应该保留相同的数据，那么将其设为类级别是有意义的。但是如果每个`MarkersModel`对象都应该保留它自己的集合`Markers`然后不，它应该保持实例级方法

# c# - 在c#中的富文本框中的指定行中添加文本

> ID：11785230
> 
> 赞同：0
> 
> 时间：2012-08-02T20:28:36.323
> 
> 标签：c#, richtextbox

如何在富文本框中的特殊行中添加文本...示例：我想将“此文本”添加到第 6 行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T20:44:03.567

只要行号可用就可以

例子 ：

```
string[] lines = richTextBox1.Lines;
lines[6] = "This Text";
richTextBox1.Lines = lines; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T20:52:21.510

如果您想在第 6 行**插入**文本而不丢失当前文本

```
string[] buffer = new string[richTextBox1.Lines.Length+1];
Array.Copy(richTextBox1.Lines, 0, buffer, 0, 5);
buffer[5] = "MyText";
Array.Copy(richTextBox1.Lines, 5, buffer, 6, richTextBox1.Lines.Length - 5);
richTextBox1.Lines = buffer; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T20:49:20.683

正如其他人所说，在 Windows 窗体中，您可以使用[`RichTextBox.Lines`](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.lines.aspx)属性来做到这一点。

在[WPF`RichTextBox`](http://msdn.microsoft.com/en-us/library/system.windows.controls.richtextbox.aspx)中，这有点棘手：您需要[`TextPointer`](http://msdn.microsoft.com/en-us/library/system.windows.documents.textpointer.aspx)在行首获取 a，将其向下移动 7 行，然后返回一个位置，然后在此处插入文本。像这样的东西（我不在 Visual Studio 附近，这可能无法编译！）：

```
public static void InsertText(RichTextBox richText, int line, string text) {
    // Find the position at the end of the specified line.
    var documentStart = richText.Document.ContentStart;
    var lineEnd = documentStart.GetLineStartPosition(line + 1)
                      .GetPositionAtOffset(1, LogicalDirection.Backward);

    // Insert the text there.
    lineEnd.InsertTextInRun(text);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T20:37:30.420

我认为您可以使用 .Lines 属性，它是一个字符串 []，并且是可读写的……但我认为如果它们不存在的话，您必须在第 6 行前面插入空行。

# xml - 在 xslt 路径中查询

> ID：11785231
> 
> 赞同：1
> 
> 时间：2012-08-02T20:28:36.603
> 
> 标签：xml, xslt, xslt-2.0

这是我的 XML 输入：

```
<maindocument>
<first>
<testing>random text</testing>
<checking>random test</checking>
</first>
<testing unit = "yes">
<tested>sample</tested>
<checking>welcome</checking>
<import task="yes">
<downloading>sampledata</downloading>
</import>
<import section="yes">
<downloading>valuable text</downloading>
</import>
<import chapter="yes">
<downloading>checkeddata</downloading>
</import>
</testing>
</maindocument> 
```

输出应该是：首先，它将检查测试单元是否=“是”。如果是，则必须检查 section 属性 =“yes”。这是输出：

```
<maindocument>
<import>
      <doctype>Valuable text</doctype>
</import>
</maindocument 
```

我正在检查`xsl:if`条件。首先，它将检查测试单元是否=“是”。然后它将检查导入部分是否=“是”。代码无法实现上述输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T22:00:29.857

这是你要找的吗？

**XSLT 2.0**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="maindocument">
        <xsl:copy>
            <xsl:apply-templates select="@*|testing[@unit='yes']/import[@section='yes']"/>          
        </xsl:copy>
    </xsl:template>

    <xsl:template match="import/@*"/>

</xsl:stylesheet> 
```

**输出**

```
<maindocument>
   <import>
      <downloading>valuable text</downloading>
   </import>
</maindocument> 
```

如果您不想在 中保留任何属性，请从（在模板中）中`<maindocument>`删除。`@*|``select``xsl:apply-templates``maindocument`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T03:06:25.560

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
     <xsl:output omit-xml-declaration="yes" indent="yes"/>

     <xsl:template match="/*">
      <maindocument>
        <xsl:apply-templates select="testing[@unit='yes']/import[@section='yes']"/>
      </maindocument>
     </xsl:template>

     <xsl:template match="import">
      <import>
        <doctype><xsl:value-of select="*"/></doctype>
      </import>
     </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<maindocument>
    <first>
        <testing>random text</testing>
        <checking>random test</checking>
    </first>
    <testing unit = "yes">
        <tested>sample</tested>
        <checking>welcome</checking>
        <import task="yes">
            <downloading>sampledata</downloading>
        </import>
        <import section="yes">
            <downloading>valuable text</downloading>
        </import>
        <import chapter="yes">
            <downloading>checkeddata</downloading>
        </import>
    </testing>
</maindocument> 
```

**产生想要的正确结果：**

```
<maindocument>
   <import>
      <doctype>valuable text</doctype>
   </import>
</maindocument> 
```

# html - HtmlService 输入类型=文件

> ID：11785232
> 
> 赞同：1
> 
> 时间：2012-08-02T20:28:36.183
> 
> 标签：html, forms, google-apps-script, web-applications

我有以下表格：

```
<body>
    <form method='post' action='<?=url?>'>
      <fieldset>
        <legend><h1>foo</h1></legend>
        <label for='fooUpload'>foo</label><br />
        <input type='file' id='fooUpload' name='fooUpload'><br />
        <input type="submit"/>
      </fieldset>
    </form>
  </body> 
```

我正在尝试从我的 doPost 访问 fooUpload 文件，使用

```
Logger.log(typeof(requestInfo.parameter.fooUpload));
Logger.log(requestInfo.parameter.fooUpload); 
```

第一个返回字符串，第二个返回文件的标题。难道我做错了什么？我什至尝试将表单设置为 enctype="multipart/form-data" 但这导致 null 和 null

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T17:17:37.410

在进行文件上传时，您必须根据[HTML 表单规范](http://www.w3.org/TR/html401/interact/forms.html#adef-enctype)将 enctype 设置为“multipart/form-data” 。但是，Apps 脚本中似乎存在一个错误，上传文件的 Blob 没有`parameter`像应有的那样添加到事件的字段中。请在我们的[问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/list)上为此提交问题以获取更新。

# php - PHP 只返回第一个 MySQL 结果

> ID：11785237
> 
> 赞同：0
> 
> 时间：2012-08-02T20:29:02.547
> 
> 标签：php, mysql, loops, repeat

我有一个循环，应该显示所有 MySQL 结果的摘要。它通过确定可能有多少结果然后循环多次来做到这一点。因此，如果有 43 个结果与我的查询匹配，而不是显示所有 43 个结果，它只显示第一个结果 43 次。请帮忙！这是我的代码：

```
if (empty($res)) {

echo 'No results found';

} else if($num>1){

    echo "<b>".$num_rows."<b> results found...<br>";

    while ($res = mysql_fetch_assoc($result)) {

    echo "<a href='#'>{$res['dealer']}</a><br>";

    }

} else {

echo "<table border=\"0\"><tr><td colspan=\"2\"><span class=\"dealer\">" . $res['dealer'] . "</span></td></tr><tr><td><span class=\"label\">Pin: </span><span class=\"inf\">" . $res['pin'] . "</span></td><td><span class=\"label\">OB CODE: </span><span class=\"ob\">" . $res['ob'] . "</span></td></tr><tr><td><span class=\"label\">Program Director:</span></td><td><span class=\"inf\">" . $res['contact'] . "</span></td></tr><tr><td valign=\"top\"><span class=\"label\">Address:</span></td><td><span class=\"inf\">" . $res['address'] . "<br>" . $res['city'] . ", " . $res['state'] . "<br>" . $res['zip'] . "</span></td></tr><tr><td><span class=\"label\">Dealer Phone:</span></td><td><span class=\"inf\">" . $res['phone'] . "</span></td></tr><tr><td><span class=\"label\">Codes Valid on:</span></td><td><span class=\"inf\">" . $res['website'] . "</span></td></tr></table>";

} 
```

非常感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T20:33:39.547

那是因为您只获取了第一行（当您获取时`$res = mysql_fetch_assoc($result);`）。您尝试做的实际上是不必要的：`mysql_fetch_assoc()`每次运行时都会自动将数据指针向前移动。你可以做的（实际上是常见的做法）是这样的：

```
//...
while ($res = mysql_fetch_assoc($result)) {
    echo "<a href='#'>{$res['dealer']}</a><br />";
}
//... 
```

另一方面，这些`mysql_*`功能很快就会被弃用。您可以使用`mysqli`或`PDO`代替；如果你是一个懒惰的流浪汉，有很多代码需要切换（像我一样），你可以使用`mysqli`过程函数——它们几乎与原始`mysql_*`函数相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T20:31:14.950

你应该使用

```
$res = mysql_fetch_assoc($result); 
```

每次要检索新行时

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T20:31:54.963

您必须*在*循环中执行此操作：

```
$res = mysql_fetch_assoc($result); 
```

...因为否则只会拉出第一个结果。这是正确的方法：

```
while($res = mysql_fetch_assoc($result)){
    echo "<a href='#'>".$res['dealer']."</a><br>";
    i++;
} 
```

干杯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T20:33:25.647

利用：

`while($res = mysql_fetch_assoc($result)) { echo $res['dealer']; }`

# android - getActivity() 方法在单元测试时无限期阻塞

> ID：11785239
> 
> 赞同：6
> 
> 时间：2012-08-02T20:29:19.813
> 
> 标签：android, unit-testing, junit, android-testing

我正在尝试测试两个不同的`Activity`类，其中一个`Activity`恰好调用另一个。这是我的代码，然后我将解释问题：

介绍活动测试

```
public class IntroActivityTest extends ActivityInstrumentationTestCase2<IntroActivity> {

    IntroActivity activity;

    public IntroActivityTest() {

        super( IntroActivity.class );
    }

    @Override
    protected void setUp() throws Exception {

        super.setUp();
        activity = getActivity();
    }

    public void testIntroBypass() {

        if ( new SharedPreferencesHelper( getInstrumentation().getTargetContext() ).retrieveUserToken() == null ) {
            assertTrue( !activity.isFinishing() );
        }
        else {
            assertTrue( activity.isFinishing() );
        }
    }
} 
```

根活动测试：

```
public class RootActivityTest extends ActivityInstrumentationTestCase2<RootActivity> {

    RootActivity activity;

    public RootActivityTest() {

        super( RootActivity.class );
    }

    @Override
    protected void setUp() throws Exception {

        super.setUp();
        activity = getActivity();
    }

    public void testInitialTab() {

        assertTrue( activity.getSupportActionBar().getSelectedTab().getText().toString().equalsIgnoreCase( "Library" ) );
    }
} 
```

在`IntroActivityTest`中，如果来自的用户令牌`SharedPreferences`不为空，则立即开始`RootActivity`。如果它为空，它会保持在`IntroActivity`. 问题是，如果它不为空，则第一个测试 ( `IntroActivityTest`) 通过，然后它挂在`getActivity()`方法调用上`RootActivityTest`，测试只是冻结...没有异常，它只是挂在该行上。如果用户令牌为空，它会完全正常运行这两个测试。

这可能是什么原因造成的？从观察来看，似乎`RootActivityTest`正在尝试使用`RootActivity`从 开始的`IntroActivity`，但它不应该开始自己的实例`RootActivity`吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T21:55:08.433

根据[ActivityInstrumentationTestCase2 API](http://developer.android.com/reference/android/test/ActivityInstrumentationTestCase2.html)：

> 此类提供单个活动的功能测试。被测活动将使用系统基础设施创建（通过调用 InstrumentationTestCase.launchActivity()），然后您将能够直接操作您的活动。

每个 ActivityInstrumentationTestCase2 实现都是完全隔离的，并且有自己的生命周期，不依赖于其他 ActivityInstrumentationTestCase2 实现。可测试的活动必须始终通过仪器基础设施创建，而不是来自被测应用程序本身。在您的情况下，RootActivityTest 不会从应用程序中获取由 IntroActivity 启动的 RootActivity，并且不会针对 RootActivity 持续运行测试。如果有一个 RootActivity 不知从何而来（不是由 InstrumentationTestRunner 带来的）并被带到前面，在运行 RootActivityTest 时，InstrumentationTestRunner 在尝试创建可测试的 RootActivity 时会感到困惑，并且只是停止并等待这个陌生人被杀死。

为了测试你想要的，即**如果来自 SharedPreferences 的用户令牌是非空的，它会立即启动 RootActivity。如果它为空，则保留在 IntroActivity 上**，您可以在 IntroActivityTest 中编写所有内容并使用[Instrumentation.ActivityMonitor](http://developer.android.com/reference/android/app/Instrumentation.ActivityMonitor.html)检测从 IntroActivity 启动的 RootActivity。在[这里](https://stackoverflow.com/questions/9405561/test-if-a-button-starts-a-new-activity-in-android-junit-pref-without-robotium/9406087#9406087)查看代码示例。请注意，您需要在 IntroActivityTest 中完成测试后完成 RootActivity，以便在 RootActivityTest 中调用 getActivity() 时 RootActivity 可以正常启动。

使用 RootActivityTest 测试所有与 RootActivity 相关的东西，在它启动并被带到前面之后，例如，TextView 渲染得很好，按钮点击做正确的事情等等。在 RootActivityTest 中，你不需要关心 RootActivity 是在哪里以及如何启动的，只需调用 getActivity() 并要求检测可测试的 RootActivity。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-06T09:41:31.600

当以前的测试没有关闭活动时，我遇到了同样的问题，而新的测试开始时也有同样的意图。但是操作系统 Android 看到活动已经开始并且没有什么，所以`InstrumentationTestCase`开始等待已经被 tsarted 的活动

# javascript - 在页面加载时执行 ajax 调用时 ajaxStart 不起作用

> ID：11785243
> 
> 赞同：3
> 
> 时间：2012-08-02T20:29:30.187
> 
> 标签：javascript, jquery, ajax

我目前遇到 ajaxStart/Stop 问题。当我在输入框中输入 4 位数字时，我将执行 AJAX 调用（更改此输入框并且如果数字 = 4）并且加载程序正确显示。

如果用户已经提交了页面并再次访问该页面，则预填充数字并在页面加载时执行 ajax 调用。这有效，但是加载程序没有显示。

我在准备好文档时调用 ajaxStart/Stop：

```
$('document').ready(function () {
    $('#spin').ajaxStart(function () {
        startSpinner();
    });
    $('#spin').ajaxStop(function () {
        stopSpinner();
    });
}); 
```

并且执行 ajax 调用的函数在文档之外准备好了：

```
<script type="text/javascript">
    function fillStreets(postalcode, textfield, selectfield, validationfield, init, copy) {
   PERFORM AJAX CALL HERE
}
</script> 
```

有什么猜测吗？我已经尝试过使用 $(document).ajaxStart 等，但它没有用。startSpinner() 和 stopSpinner() 在 document.ready 之前声明，所以这也不是问题。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-29T13:07:31.607

你做错了，因为 .ajaxStart() 和 .ajaxStop() 仅适用于 $(document) 从 jQuery 1.8 开始。确保将 $.ajaxSetup 全局设置为 true。

```
$.ajaxSetup({global:true});
$('document').ready(function () {

//your ready functions

}).ajaxStart(function () {
    startSpinner();
}).ajaxStop(function () {
    stopSpinner();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T21:20:34.043

基本上，调用 AJAX 的内联代码在 $(document).ready() 代码之前执行，这就是没有加载程序出现的原因。问题是为什么你有任何内联代码？我认为页面开头发生的任何代码都应该在 document.ready() 处理程序中，这也应该解决您描述的问题。

当您说“在页面加载时执行 ajax 调用”时，我假设此代码是内联的，而不是在 onload 处理程序中。但是，如果它在 onload 处理程序中，我仍然会质疑为什么它不在就绪处理程序中。

# php - 我如何用PHP搜索sql表

> ID：11785245
> 
> 赞同：0
> 
> 时间：2012-08-02T20:29:49.237
> 
> 标签：php, sql, game-engine

我想搜索我的名为 users 的 SQL 表，如果他们在名为 gangs 的结构中有结果，那么如果该结果是我要查找的结果，则在列表中显示所有找到的结果。这是我到目前为止的代码，女巫无法正常工作，请帮助谢谢

```
$sql = "SELECT * FROM users WHERE id='".mysql_real_escape_string($_SESSION['user_id'])."'";
$query = mysql_query($sql) or die(mysql_error());
$row = mysql_fetch_object($query);
$id = htmlspecialchars($row->id);
$userip = htmlspecialchars($row->userip);
$name = htmlspecialchars($row->name);
$sitestate = htmlspecialchars($row->sitestate);
$password = htmlspecialchars($row->password);
$mail = htmlspecialchars($row->mail);
$money = htmlspecialchars($row->money);
$exp = htmlspecialchars($row->exp);
$rank = htmlspecialchars($row->rank);
$health = htmlspecialchars($row->health);
$points = htmlspecialchars($row->points);
$profile = htmlspecialchars($row->profile);
$gang = htmlspecialchars($row->gang);

<?php 
$sql = "SELECT * FROM Gangs WHERE name='".mysql_real_escape_string($_GET['name'])."'";
$query = mysql_query($sql)  or die(mysql_error());
$row = mysql_fetch_object($query);
$Gang_name = htmlspecialchars($row->name);
$Gang_owner = htmlspecialchars($row->owner);
$Gang_money = htmlspecialchars($row->money);
$Gang_exp = htmlspecialchars($row->exp);
$Gang_level = htmlspecialchars($row->level);
$Gang_profile = htmlspecialchars($row->profile);
?>

<?php
$result = mysql_query("SELECT * FROM users WHERE gang = '".$gang_name."'");
if ($result) {
      while($row = mysql_fetch_assoc($result)) {
           $members = $row['name'];
      }
}
?>
<?php echo $members; ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T20:35:03.667

看起来您应该只使用带有连接的 SELECT 查询

```
"SELECT * FROM users as u JOIN gangs as g on u.gang = g.name WHERE g.name = '".mysql_real_escape_string($_GET['name'])."'"; 
```

如果您正在尝试构建结果行数组，则：

```
$members = $row['name']; 
```

应该：

```
$members[] = $row['name']; 
```

您还应该在循环之前声明您的 $memberes 变量，例如

```
$members = array(); 
```

# powershell - Powershell 和 Visio 出错

> ID：11785247
> 
> 赞同：2
> 
> 时间：2012-08-02T20:29:54.403
> 
> 标签：powershell, automation, visio

嗨，我正在尝试使用 powershell 生成 visio drwaings，但出现以下错误；

`PS C:\Users\XXXX\Desktop\Scripts> C:\Users\XXXX\Desktop\Scripts\tempv.ps1` 您不能在空值表达式上调用方法。在`C:\Users\XXXX\Desktop\Scripts\tempv.ps1:14 char:1` `+ $pc = $ComputerStencil.Masters.Page("PC")` `+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~` `+ CategoryInfo : InvalidOperation: (:) [], RuntimeException + FullyQualifiedErrorId : InvokeMethodOnNull`

`PS C:\Users\XXXX\Desktop\Scripts>`

请告诉我这里有什么问题；我尝试了很多，但没有弄错；

```
$application = New-Object -ComObject Visio.Application
#$application.visible = $false
$documents = $application.Documents
$document = $documents.Add("Basic Network Diagram.vst")
$pages = $application.ActiveDocument.Pages
$page = $pages.Item(1)

$NetworkStencil = $documents.Add("periph_m.vss")
$ComputerStencil = $documents.Add("Computers and Monitors.vss")
$ConnectorStencil = $documents.Add("Connectors.vss")
$pcinfo = Get-ComputerSystem -computer $computer

#***********************WORKS UNTILL HERE**************
#*****ERROR PART***************
$pc = $ComputerStencil.Masters.Page("PC")
$shape1 = $page.Drop($pc, 2.2, 6.8) 
$shape1.Text = "$($pcinfo.DNSHostName)`r`n$($pcinfo.Domain)" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T00:02:21.290

Page 不是[Masters](http://msdn.microsoft.com/en-us/library/ff765149.aspx)的财产。您需要使用[Item](http://msdn.microsoft.com/en-us/library/ff765567)属性从集合中获取 PC Master：

```
$pc = $ComputerStencil.Masters.Item("PC") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T21:16:18.920

要么`$ComputerStencil`要么`$ComputerStencil.Masters`是`$null`。您可以只点源脚本并在命令行中查看变量和对象（有时比在 ISE 中使用调试器更容易）。

# wpf - 使用标记扩展绑定时出错：解析标记扩展时遇到未知属性

> ID：11785248
> 
> 赞同：9
> 
> 时间：2012-08-02T20:30:00.250
> 
> 标签：wpf, xaml, data-binding, radio-button

原则上，我开发了一种将 RadioButtons 绑定到几乎任何东西的简洁方法：

```
/// <summary>Converts an value to 'true' if it matches the 'To' property.</summary>
/// <example>
/// <RadioButton IsChecked="{Binding VersionString, Converter={local:TrueWhenEqual To='1.0'}}"/>
/// </example>
public class TrueWhenEqual : MarkupExtension, IValueConverter
{
    public override object ProvideValue(IServiceProvider serviceProvider)
    {
        return this;
    }

    public object To { get; set; }

    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return object.Equals(value, To);
    }
    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if ((bool)value) return To;
        throw new NotSupportedException();
    }
} 
```

例如，您可以使用它来将 RadioButtons 绑定到字符串属性，如下所示（这是一个众所周知的错误，您必须为每个 RadioButton 使用唯一的 GroupName）：

```
<RadioButton GroupName="G1" Content="Cat"
    IsChecked="{Binding Animal, Converter={local:TrueWhenEqual To='CAT'}}"/>
<RadioButton GroupName="G2" Content="Dog"
    IsChecked="{Binding Animal, Converter={local:TrueWhenEqual To='DOG'}}"/>
<RadioButton GroupName="G3" Content="Horse"
    IsChecked="{Binding Animal, Converter={local:TrueWhenEqual To='HORSE'}}"/> 
```

现在，我想使用`public static readonly`名为`Filter1`和的对象`Filter2`作为我的 RadioButtons 的值。所以我尝试了：

```
<RadioButton GroupName="F1" Content="Filter Number One"
    IsChecked="{Binding Filter, Converter={local:TrueWhenEqual To='{x:Static local:ViewModelClass.Filter1}'}}"/>
<RadioButton GroupName="F2" Content="Filter Number Two"
    IsChecked="{Binding Filter, Converter={local:TrueWhenEqual To='{x:Static local:ViewModelClass.Filter2}'}}"/> 
```

但这给了我一个错误：

> 解析标记扩展时遇到类型“MS.Internal.Markup.MarkupExtensionParser+UnknownMarkupExtension”的未知属性“To”。

如果我删除引号，错误仍然会发生。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-02T20:50:40.610

这是嵌套 MarkupExtensions 可能发生的错误。尝试将您的自定义标记放入单独的 DLL/项目或使用属性元素语法。

*   [http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/8427e852-0f4f-49b1-9810-28ef6f3bcf09/](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/8427e852-0f4f-49b1-9810-28ef6f3bcf09/)

*   [http://webcache.googleusercontent.com/search?q=cache:viDdmFIGtq8J:www.hardcodet.net/2008/04/nested-markup-extension-bug+&cd=1&hl=en&ct=clnk&gl=uk](http://webcache.googleusercontent.com/search?q=cache:viDdmFIGtq8J:www.hardcodet.net/2008/04/nested-markup-extension-bug+&cd=1&hl=en&ct=clnk&gl=uk)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-02T21:04:40.503

WPF 不能很好地处理嵌套标记扩展。为了克服这个问题，您可以使用您的标记扩展作为一个元素。它有点笨拙且难以阅读，但它有效：

```
<RadioButton GroupName="F1" Content="Filter Number One">
    <RadioButton.IsChecked>
        <Binding Path="Filter">
            <Binding.Converter>
                <local:TrueWhenEqual To={x:Static local:ViewModelClass.Filter1} />
            </Binding.Converter>
        </Binding>
    </RadioButton.IsChecked>
</RadioButton> 
```

另一种方法是声明您的转换器并将其用作静态资源：

```
<Window.Resources>
    <local:TrueWhenEqual To={x:Static local:ViewModelClass.Filter1} x:Key="myConverter" />
</Window.Resources>

<RadioButton GroupName="F1" Content="Filter Number One"
             IsChecked="{Binding Filter, Converter={StaticResource myConverter}}" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-13T11:40:44.467

我在安装了 .NET 4.6 的机器上遇到了同样的错误。一旦我更新到 .NET 4.7（开发包），这个错误就消失了，没有任何代码更改。

# excel - Visual Studio Express 2010 中的突然代码故障

> ID：11785253
> 
> 赞同：0
> 
> 时间：2012-08-02T20:30:14.340
> 
> 标签：excel, com-interop, excel-interop

突然之间，这段代码停止了输出 Excel 文件。它正在将 DataTable dtOutput 转换为 Excel 文件：

```
if (dtOutput.Rows.Count > 0)
{
    DataView dv = dtOutput.DefaultView;
    dv.Sort = "Outage Start Time";
    dtOutput = dv.ToTable();
    // Populates a column of the table
    dtOutput = addIncidentCounts(dtOutput);

    Microsoft.Office.Interop.Excel.Application xlApp = new Microsoft.Office.Interop.Excel.Application();
    Workbook wb = xlApp.Workbooks.Add(XlWBATemplate.xlWBATWorksheet);
    Worksheet ws = (Worksheet)wb.Worksheets[1];
    ws.Name = "Retail Network Tracking Log";

    int col = 1;
    foreach (DataColumn column in dtOutput.Columns)
    {
        ws.Cells[1, col].Value2 = column.ColumnName;
        col++;
    }

    for (int i = 0; i < dtOutput.Rows.Count; i++)
    {
        for (int j = 0; j < dtOutput.Columns.Count; j++)
        {
            ws.Cells[i + 2, j + 1].Value2 = dtOutput.Rows[i][j];
        }
    }

    foreach (Range range in ws.UsedRange.Columns)
    {
        range.HorizontalAlignment = XlHAlign.xlHAlignLeft;
        range.Columns.AutoFit();
    }

    Range rangeE = ws.get_Range("E:E", Type.Missing);
    rangeE.NumberFormat = "d-mmm-yyyy hh:mm:ss";

    Range rangeF = ws.get_Range("F:F", Type.Missing);
    rangeF.NumberFormat = "d-mmm-yyyy hh:mm:ss";

    wb.Close(false, false, Type.Missing);
    xlApp.Quit();
    Marshal.ReleaseComObject(wb);
    Marshal.ReleaseComObject(xlApp);

    this.Close();
} 
```

它已经完美运行了数周。我没有对其进行任何更改。我重新启动了VS，重新启动了计算机，最后重新安装了VS，但我仍然没有得到任何输出。我也通过调试器运行了它，代码肯定正在执行并获得所有正确的值。我难住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T23:32:58.610

汉斯·帕桑特是对的。关闭电话需要是：

```
wb.Close(true, saveDirectory + "\\" + reportName, false); 
```

现在真正的谜团是这段代码最初是如何工作的！

# documentation - symfony 使用什么 PHP 文档表示法？

> ID：11785254
> 
> 赞同：1
> 
> 时间：2012-08-02T20:30:14.310
> 
> 标签：documentation, symfony-1.4, phpdoc

我使用 Notation 这个词是因为 fabien potencier 有自己的生成器，但我找不到它用于注释的符号（或语法，如果你愿意的话）。

[http://fabien.potencier.org/article/63/sami-yet-another-php-api-documentation-generator](http://fabien.potencier.org/article/63/sami-yet-another-php-api-documentation-generator)

另外，我在哪里可以找到使用文档生成器的注释符号？看起来像 PhpDocumentor 但我不能确定。

symfony 使用这个生成器吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T07:31:13.143

Symfony 1.4（几乎）肯定使用 phpDocumentor。

我从未尝试过 Sami，但我想它可以在 Symfony 1.4 上运行。

关于注释符号，我认为 Sami、phpDoc 等几乎相同。它们都使用*DocBlock* [，例如](http://www.phpdoc.org/docs/latest/for-users/anatomy-of-a-docblock.html)：

```
/**
  * This is the short description for a DocBlock.
  *
  * This is the long description for a DocBlock. This text may contain
  * multiple lines and even some _markdown_.
  *
  * * Markdown style lists function too
  * * Just try this out once
  *
  * The section after the long description contains the tags; which provide
  * structured meta-data concerning the given element.
  *
  * @author  Mike van Riel <mike.vanriel@naenius.com>
  *
  * @since 1.0
  *
  * @param int    $example  This is an example function/method parameter description.
  * @param string $example2 This is a second example.
  */ 
```

我在 Symfony 2.0 中[随机上课：](https://github.com/symfony/symfony/blob/master/src/Symfony/Bundle/FrameworkBundle/HttpKernel.php#L79)

```
/**
 * Renders a Controller and returns the Response content.
 *
 * Note that this method generates an esi:include tag only when both the standalone
 * option is set to true and the request has ESI capability (@see Symfony\Component\HttpKernel\HttpCache\ESI).
 *
 * Available options:
 *
 *  * attributes: An array of request attributes (only when the first argument is a controller)
 *  * query: An array of request query parameters (only when the first argument is a controller)
 *  * ignore_errors: true to return an empty string in case of an error
 *  * alt: an alternative controller to execute in case of an error (can be a controller, a URI, or an array with the controller, the attributes, and the query arguments)
 *  * standalone: whether to generate an esi:include tag or not when ESI is supported
 *  * comment: a comment to add when returning an esi:include tag
 *
 * @param string $controller A controller name to execute (a string like BlogBundle:Post:index), or a relative URI
 * @param array  $options    An array of options
 *
 * @return string The Response content
 */ 
```

还有[一个](http://trac.symfony-project.org/browser/branches/1.4/lib/request/sfWebRequest.class.php#L42)来自 symfony 1.4 的：

```
/**
 * Initializes this sfRequest.
 *
 * Available options:
 *
 *  * formats:           The list of supported format and their associated mime-types
 *  * path_info_key:     The path info key (default to PATH_INFO)
 *  * path_info_array:   The path info array (default to SERVER)
 *  * relative_url_root: The relative URL root
 *  * http_port:         The port to use for HTTP requests
 *  * https_port:        The port to use for HTTPS requests
 *
 * @param  sfEventDispatcher $dispatcher  An sfEventDispatcher instance
 * @param  array             $parameters  An associative array of initialization parameters
 * @param  array             $attributes  An associative array of initialization attributes
 * @param  array             $options     An associative array of options
 *
 * @return bool true, if initialization completes successfully, otherwise false
 *
 * @throws <b>sfInitializationException</b> If an error occurs while initializing this sfRequest
 *
 * @see sfRequest
 */ 
```

# java - 使用 Java 发送多封邮件

> ID：11785257
> 
> 赞同：2
> 
> 时间：2012-08-02T20:30:19.270
> 
> 标签：java, email

我需要每天发送一些自动电子邮件来说......为了简单起见，有 1000 条消息。使用 java 完成此任务的最佳方法是什么？

现在的行动计划是基本上只是运行一个循环并一一发送消息。我应该使用多线程采取更复杂的方法，还是以某种方式批处理消息？我承认在管理电子邮件方面我完全是个菜鸟，所以我或多或少只是在寻找一些建议来帮助我开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T20:32:33.980

使用 JavaMail，您可以打开一封邮件`Session`并发送所有邮件`MimeMessage`（任意数量），完成后，关闭`Session`. 无需继续打开会话、发送消息并关闭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T20:40:39.230

那里有一些有用的库，例如[Apache Commons Email 项目](http://commons.apache.org/email/)（在此处查找[示例](http://commons.apache.org/email/userguide.html)）。

除非性能是一个问题，否则我不会过分关注多个线程，这通常不适用于批处理电子邮件作业。

# vim - 使用单个 `.vimrc`（不带 ftplugin）按文件类型更改 Vim 行为

> ID：11785260
> 
> 赞同：3
> 
> 时间：2012-08-02T20:30:29.337
> 
> 标签：vim

如何以`.vimrc`优雅的方式使用单个文件（没有 ftplugin）更改 Vim 行为？

我的意思是……如果我对 C/C++ 文件进行了许多赞扬，例如：

```
set nu
set cin
set ai
set mouse=a
color elflord 
```

还有一堆对 AsciiDoc 文件的赞扬，例如：

```
set syntax=asciidoc
set nocin
set spell spl=en 
```

更不用说 Python、LaTeX 等了。

提供了解决方案 [https://stackoverflow.com/a/159065/544721](https://stackoverflow.com/a/159065/544721) 用于放置`autocommand`在每个自定义命令之前。

有没有一种很好的方法可以在`autocommand`不使用的情况下对它们进行分组`ftplugin`- 以便将所有内容保存在单个`.vimrc`文件中（更好地在多台机器上移动等）？相当于`if`带括号的声明的东西`{}`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T20:39:39.373

You can use the following:

```
if has("autocmd")
    augroup LISP
        au!
        au BufReadPost *.cl :set lisp
        au BufReadPost *.cl :set showmatch
        au BufReadPost *.cl :set cpoptions-=m
        au BufReadPost *.cl :set autoindent
    augroup END
    augroup C
        au!
        autocmd BufNewFile,BufRead *.cpp set formatprg=c:\\AStyle\\bin\\AStyle.exe\ -A4Sm0pHUk3s4
        autocmd BufNewFile,BufRead *.c set formatprg=c:\\AStyle\\bin\\AStyle.exe\ -A4Sm0pHUk3s4
        autocmd BufNewFile,BufRead *.h set formatprg=c:\\AStyle\\bin\\AStyle.exe\ -A4Sm0pHUk3s4
        autocmd BufNewFile,BufRead *.cpp set tw=80
        autocmd BufNewFile,BufRead *.c set tw=80
        autocmd BufNewFile,BufRead *.h set tw=80
    augroup END
endif 
```

This created grouping of commands depending on the type of file that is opened, which is specified in the autocmd section. You still need to specify autocmd or au before each one, but they are nicely grouped.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T23:37:24.883

我可能会执行每个文件类型的功能来为我进行设置。无耻地扯掉@Derek ...

```
function! SetUpLispBuffer()
    set lisp
    set showmatch
    set cpoptions-=m
    set autoindent
endfunction

function! SetUpCBuffer()
    set formatprg=c:\\AStyle\\bin\\AStyle.exe\ -A4Sm0pHUk3s4
    set tw=80
endfunction

if has("autocmd")
    augroup LISP
        au!
        au BufReadPost *.cl call SetUpLispBuffer()
    augroup END
    augroup C
        au!
        autocmd BufNewFile,BufRead *.{cpp,c,h} call SetUpCBuffer
    augroup END
endif 
```

当您想进行更改时要更改的内容要少得多，剪切和粘贴的内容也要少得多。

# android - 在 xml 文件中以编程方式设置整数的值

> ID：11785269
> 
> 赞同：0
> 
> 时间：2012-08-02T20:31:15.873
> 
> 标签：android, xml, integer

我有这个程序显示例如 3 `EditTexts`，它从名为 integers 的 xml 文件中获取这个值“3”。我现在想要的是用户可以更改此值。

这是我现在使用的代码：

```
int max = this.getResources().getInteger(R.integer.maxValue); 
```

正如我所说，它目前`EditText`在屏幕上绘制 3，但我希望用户能够通过设置更改此数量。

这是我的 integers.xml

```
<resources>

    <integer name="maxValue">3</integer>

</resources> 
```

那么如何更改 xml 文件中的值呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T20:38:04.367

If you want the user to input any number then make a variable to hold that number and ask the user to input a number.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T20:34:52.563

为什么不直接从用户而不是资源那里获得价值？

# asp.net - asp.net (VB) <> 不是存储过程的参数

> ID：11785271
> 
> 赞同：0
> 
> 时间：2012-08-02T20:31:21.643
> 
> 标签：asp.net, vb.net

我在下面有以下 ASP.NET (VB) 代码。我的目标是获取接受 1 个参数的存储过程的输出并将该信息存储到数据表中：

```
 Dim strConnection1 As String = System.Configuration.ConfigurationManager.AppSettings("Rdf2012")
        Dim conn1 As System.Data.SqlClient.SqlConnection
        conn1 = New System.Data.SqlClient.SqlConnection(strConnection1)
        Dim cmd1 As New SqlCommand
        Dim prm1 As New SqlParameter
        Dim dtDataTable1 As DataTable
        cmd1.Connection = conn1
        cmd1.CommandText = "usp_GetDetails"
        cmd1.CommandType = CommandType.StoredProcedure
        prm1 = cmd1.Parameters.Add(strProgramID, SqlDbType.VarChar, 50)
        prm1.Direction = ParameterDirection.Input

        conn1.Open()

        Dim dataAdapter As New SqlDataAdapter
        dataAdapter.SelectCommand = cmd1

        Dim ds1 As New DataSet
        dataAdapter.Fill(ds1)
        conn1.Close()

        dtDataTable1 = ds1.Tables("Table1") 
```

程序停在

```
 dataAdapter.Fill(ds1) and says: 
```

@1012952-4403 不是过程 usp_GetDetails 的参数

这是存储过程的样子：

```
 ALTER PROCEDURE [dbo].[usp_GetDetails]
@ProId VARCHAR(20) = NULL
    AS 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T20:34:13.057

你需要做

```
prm1 = cmd1.Parameters.AddWithValue ("@ProID", strProgramID) 
```

代替

```
 prm1 = cmd1.Parameters.Add(strProgramID, SqlDbType.VarChar, 50) 
 prm1.Direction = ParameterDirection.Input 
```

除非另有说明，否则将假定输入方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T20:38:27.397

验证 strProgramID 等于什么。您可能在需要参数名称的地方传递参数值。如果是这种情况，请更换

```
Dim prm1 As New SqlParameter
....
prm1 = cmd1.Parameters.Add(strProgramID, SqlDbType.VarChar, 50)
prm1.Direction = ParameterDirection.Input 
```

和

```
 cmd1.Parameters.AddWithValue("@ProId",strProgramID) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T20:40:01.453

您以错误的方式创建参数，请尝试以下操作：

```
Dim strConnection1 As String = System.Configuration.ConfigurationManager.AppSettings("Rdf2012")
    Dim conn1 As System.Data.SqlClient.SqlConnection
    conn1 = New System.Data.SqlClient.SqlConnection(strConnection1)
    Dim cmd1 As New SqlCommand
    Dim dtDataTable1 As DataTable
    cmd1.Connection = conn1
    cmd1.CommandText = "usp_GetDetails"
    cmd1.CommandType = CommandType.StoredProcedure
    cmd1.Parameters.Add("@ProId",strProgramID)

    conn1.Open()

    Dim dataAdapter As New SqlDataAdapter
    dataAdapter.SelectCommand = cmd1

    Dim ds1 As New DataSet
    dataAdapter.Fill(ds1)
    conn1.Close()

    dtDataTable1 = ds1.Tables("Table1") 
```

# c - 如何在 C 中的 Windows 上获得 GMT 的 time_t

> ID：11785272
> 
> 赞同：6
> 
> 时间：2012-08-02T20:31:31.467
> 
> 标签：c, time, gmt, time-t

我正在编写一些将在多个互通系统上运行的代码。我使用 time() 来获取 time_t，但这会导致系统之间的时区差异出现问题，所以我想在 GMT 中获取 time_t。我一直在查看 time.h 函数，但我不清楚如何确定我会正确获得时间。到目前为止，这是我想出的：

```
time_t t = time();
struct tm *gtm = gmtime(&t);
time_t gt = mktime(gtm); 
```

现在，这似乎在我的机器上得到了正确的答案，但我想知道它是否会在我推出之前普遍工作，即使其他机器的时钟设置为当地时间或格林威治标准时间或不同时区或其他什么. 我担心的原因是mktime。在描述中，它说它将 tm 结构解释为“以本地时间表示的日历时间”。在我看来，它不会返回 GMT 时间，尽管它似乎在我的机器上。另外，当我打印出 gt 时，它比 t 提前 4 小时，这似乎是正确的。但是，如果我运行以下命令：

```
time_t t = time();
struct tm *gtm = gmtime(&t);
struct tm *ltm = localtime(&t);
printf("%d, %d\n", gtm->tm_hour, ltm->tm_hour); 
```

时间是一样的，都是当地时间，这不是我所期望的。

作为记录，在另一个答案中，我看到了对 timegm() 的引用，这听起来很完美，但它在我的系统上不存在。

简而言之，我如何在 C 语言的任何 Windows 机器上获得 GMT 的 time_t？

编辑：删除了添加的 msvcrt 标记，因为我没有使用 msvcrt。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T21:11:34.850

根据定义，time_t 始终采用 UTC。所以 time() 做你想做的事。只有在 time_t 和细分时间表示之间进行转换时，时区才会发挥作用。

如果您有 UTC 时间的分解时间表示，则需要临时将时区切换为 UTC，使用 mktime() 转换为 time_t，然后将时区切换回来，如下所示：

```
time_t convert_utc_tm_to_time_t (struct tm *tm)
{
    char *tz;
    time_t result;

    /* temporarily set timezone to UTC for conversion */
    tz = getenv("TZ");
    if (tz) {
      tz = strdup (tz);
      if (!tz) {
        // out of memory
        return -1;
      }
    }
    setenv("TZ", "", 1);
    tzset();

    tm->tm_isidst = 0;
    result = mktime (tm);

    /* restore timezone */
    if (tz) {
      setenv("TZ", tz, 1);
      free (tz);
    }
    else {
      unsetenv("TZ");
    }
    tzset();

    return result;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T00:01:48.607

查看代码的第一部分：

```
time_t t = time();
struct tm *gtm = gmtime(&t);
time_t gt = mktime(gtm); 
```

您设置`gt`为虚假值。调用时`mktime`，需要传入`struct tm*`当地时间。`time_t`定义为自 1970 年 1 月 1 日 00:00 UTC 以来的秒数。除非您当前处于 +0000 时区，否则您调用的返回值`mktime`将代表过去或未来几个小时的某个时间。

至于第二部分：

```
time_t t = time();
struct tm *gtm = gmtime(&t);
struct tm *ltm = localtime(&t);
printf("%d, %d\n", gtm->tm_hour, ltm->tm_hour); 
```

我认为`gmtime`并且`localtime`在内存中返回相同的缓冲区，这可能就是为什么你在输出中得到相同的两个小时。第二个调用覆盖第一个调用的输出。试试这个：

```
struct tm gtm, ltm;
struct tm *tm_buf;
time_t t = time();
tm_buf = gmtime(&t);
memcpy(&gtm, tm_buf, sizeof(struct tm));
tm_buf = localtime(&t);
memcpy(&ltm, tm_buf, sizeof(struct tm));
printf("%d, %d\n", gtm.tm_hour, ltm.tm_hour); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-02T21:06:04.093

使用`gmtime()`您想要的格林威治标准时间数字。`localtime`将报告本地时区的时间，并且仅当本地时区也是 GMT 时才会以 GMT 为准。

Windows 有自己的代码和数据结构来处理时间和时区。要使用 Windows 特定的 c 代码获取 GMT，您可以使用`GetSystemTime()`. 您可以在此 URL 上找到有关它的更多信息：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms724390 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724390(v=vs.85).aspx)

请注意，Windows 使用自己的日期/时间结构，但在`GetSystemTime()`及其相关页面中也有详细说明。简而言之，`GetSystemTime()`检索当前系统日期和时间，以协调世界时 (UTC)（也称为 GMT）表示。它使用 Windows 结构 SYSTEMTIME，这是一个具有许多时间元素的结构。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-02T08:24:03.777

请注意，对于这种微不足道的转换，您可以使用自己的函数。这里有一份`mkgmtime()`

[https://github.com/m2osw/snapcpp/blob/master/snapwebsites/libsnapwebsites/src/snapwebsites/mkgmtime.c](https://github.com/m2osw/snapcpp/blob/master/snapwebsites/libsnapwebsites/src/snapwebsites/mkgmtime.c)

这允许您将 a 转换为`struct tm`忽略`time_t`任何时区信息的值。不包括注释，这可能少于 100 行代码，因此很容易将其添加到您的项目中。

# python - 在服务器上调整图像大小

> ID：11785273
> 
> 赞同：5
> 
> 时间：2012-08-02T20:31:40.410
> 
> 标签：python, django, image-processing, image-resizing, django-imagekit

我们刚刚实现了一项功能，我们的用户可以上传照片。我们正在重新调整用户上传到缩略图的大小和 800x600“显示”大小。

我们遇到的问题是此操作似乎占用了我们服务器上的大量内存。我们正在使用 Django-imagekit 来执行此操作，并且似乎[记录了内存使用过多的问题](https://github.com/jdriscoll/django-imagekit/issues/63)。

我们在 Heroku 服务器上运行 django。万一这个因素，我们也使用 postgresql 数据和 elasticsearch 搜索。

*   我们应该为此使用更好的库吗？
*   还是我们应该考虑在服务器上处理用户照片的完全不同的策略？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T05:31:41.967

我用过[PythonMagick](http://www.imagemagick.org/download/python/) ，它运行良好，你也可以试试它是一个基于 ctypes 的 Python [ImagedMagick](http://dahlia.github.com/wand/)绑定库

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T20:34:48.430

我不知道`django-imagekit`提供什么，但您可以只使用 PIL 并在保存上传图像时将其调整为您需要的大小。

[http://effbot.org/imagingbook/image.htm](http://effbot.org/imagingbook/image.htm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T20:39:12.650

I have used [gd2](http://www.boutell.com/gd/) with ruby, which works pretty well. It's written in C, so it is fast and shouldn't take a whole lot of memory. It looks like there are [Python bindings](http://nets.ucar.edu/nets/intro/staff/mitchell/gd-ref.html).

# c# - 从 HTTP POST 获取 JSON 的 MVC3 控制器问题

> ID：11785274
> 
> 赞同：1
> 
> 时间：2012-08-02T20:31:41.293
> 
> 标签：c#, asp.net-mvc-3

我有一个复杂的 json 结构。在这里它被简化了，因为它也会发生这种情况：

```
{
"Id":0,
"Name":"Region Challenge",
"ModifiedOn":"2011-09-08T17:49:22",
"State":"Published",
"Goals":[
        {"Id":1,"Description":"some text here","DisplayOrder":1},
        {"Id":2,"Description":"some text here","DisplayOrder":2}
    ]
} 
```

因此，当将此数据发布到控制器时，我可以毫无问题地获取 Id、Name 等的这些值。但是，当我查看本地窗口时，Goals 为空。

签名是：

```
public JsonResult Save(int Id, String Name, DateTime ModifiedOn, String State, String Goals) 
```

POST 标头是：

```
User-Agent: Fiddler
Host: localhost:2515
Content-Type: application/json
Content-Length: 7336 
```

我如何读入数据以便可以迭代它？

谢谢！埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T20:36:52.670

你`Goals`是一个数组或列表。最简单的方法是

1.  创建一个视图模型
2.  更改操作方法

## 样本

### 视图模型

```
public class SomeThing
{
    public int Id { get; set; }
    public string Name { get; set; }
    public DateTime ModifiedOn { get; set; }
    public string State { get; set; }
    public List<Goal> Goals { get; set; }
}

public class Goal
{
    public int Id { get; set; }
    public string Description{ get; set; }
    public int DisplayOrder{ get; set; }
} 
```

## 更改了操作方法

```
public JsonResult Save(SomeThing model)
{
   // model.Name ....
   // model.Id ...
   // model.Goals is your list of Goals

   // return Json
} 
```

### 更多信息

*   [如何使用 ASP.NET MVC ModelBinder](http://weblogs.asp.net/melvynharbour/archive/2008/08/29/how-to-use-the-asp-net-mvc-modelbinder.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T20:37:13.120

定义一个类

```
public class MyClass{
 public int Id{get;set;}
 public string Name {get;set;}
 public string State {get;set;}
 public IList<Goals> Goals {get;set;}
} 
```

你的目标课程看起来像

```
Public class Goals{

 public int Id{get;set;}
 public string Description {get;set;}
 public int DisplayOrder {get;set}
} 
```

之后就收到了

```
public JsonResult Save(MyClass _MyClass) 
```

如果您通过 ajax 发送，则必须包含参数名称

```
 data:{_MyClass: yourJSON} 
```

# ios - CoreText 没有加载自定义字体

> ID：11785277
> 
> 赞同：1
> 
> 时间：2012-08-02T20:31:45.617
> 
> 标签：ios, core-text, core-foundation

我有两种自定义 .ttf 和 .otf 字体。我正在尝试使用这行代码将它们加载到 CoreText 中：

```
CTFontRef fontRef = CTFontCreateWithName(CFSTR("Ronnia"), self.fontSize, NULL); 
```

令人沮丧的是，它适用于已安装的字体，如“美国打字机”。但更令人困惑的是，我发现我安装的自定义字体可以与 UILabels 一起使用`fontWithName`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-04T10:11:01.230

要在 iOS 中使用自定义字体，只需将字体拖放到项目中即可。在 Info.plist 中使用“应用程序提供的字体”键提及带有扩展名的字体名称数组。然后使用以下代码打印所有字体系列名称：

```
for (NSString* family in [UIFont familyNames])
{
  DebugLog(@"FONT FAMILY: %@", family);

  for (NSString *name in [UIFont fontNamesForFamilyName: family])
  {
    DebugLog(@"  %@", name);
  }
} 
```

控制台打印：

> **Arial 希伯来语**
> ArialHebrew-Bold
> ArialHebrew-Light
> ArialHebrew
> 
> **Calibri**
> Calibri-Bold
> Calibri
> 
> **Georgia**
> Georgia-BoldItalic
> Georgia-Bold
> Georgia-Italic
> Georgia

然后从控制台，您将获得实际的字体名称（如上）。使用以下代码创建字体 -

在核心文本中：
`CTFontRef fontRef = CTFontCreateWithName((CFStringRef)fontName, fontSize, NULL);`

在 UIKit 中： `UIFont *font = [UIFont fontWithName:fontName size:10];`

注意：这里`fontName = @"Calibri-Bold"`没有扩展。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-22T02:07:18.223

如果自定义字体与 UILabel 一起使用，那么它应该能够在 CoreText 中作为

```
fontRef = CTFontCreateWithName((CFStringRef)fontName, fontSize, NULL); 
```

创建字体后，您需要将其设置为 NSAttributedString 属性字典中值 kCTFontAttributeName 的 fontRef。这个对我有用。

# mysql - 快速获得当前投票排名的方法？

> ID：11785288
> 
> 赞同：1
> 
> 时间：2012-08-02T20:32:43.430
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3

我有一个具有 votes_count 的视频模型。我已经有一个获取当前排名的方法。

```
def rank
  videos = Video.order('votes_count DESC')
  videos.index(self)+1
end 
```

有没有使用更少cpu的更简单的解决方案？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T20:46:11.297

只需计算超过当前视频投票的视频数量。这个数字加一将是您的等级。

```
def rank
  Video.where('votes_count > #{votes_count}').count + 1
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T00:18:23.857

对于优化操作，您可以使用 de sql 查询运算符 MAX 并将工作转移到您的数据库引擎。

```
def rank
  ret =  Video.select('max(votes_count) as rank')
  ret.rank
end 
```

# javascript - Jquery头标签问题

> ID：11785289
> 
> 赞同：0
> 
> 时间：2012-08-02T20:32:47.503
> 
> 标签：javascript, jquery, tags, head

我已经疯了好几个小时在我的网站上测试一些 jquery 脚本并且没有任何工作，而它可以在 Fiddles 上工作......

所以这就是我的：

然后我有一个如下脚本，但我无法让它工作！！！

```
<script type="text/javascript">
$(":checkbox").bind("click", function(event) {
    if ($(this).is(':checked')) {
        $(".itemBox:not(#" + $(this).val() + ")").hide();
        $(".itemBox[id='" + $(this).val() + "']").show();
    } else {
        $(".itemBox").show();
    }
});
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T20:33:46.977

您必须等待文档加载，然后才能将事件绑定到它。

jQuery 提供了一种简单的方法来做到这一点，通过[调用`ready`document 上的方法](http://api.jquery.com/ready/)，并将所有代码放入该函数中：

```
jQuery(document).ready(function($) {
    // All of your code should go in this function
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T20:42:54.900

稍微清理一下代码，使用文档准备好在附加事件处理程序之前确保元素存在。

```
jQuery( function() {  //wait for document to be ready
    //$(":checkbox").on("click", function (event)  //should really use on() if it is jQuery 1.7+
    $(":checkbox").bind("click", function (event) {  //bind is deprecated
        var cb = jQuery(this),
            items = $(".itemBox");
        if (cb.is(':checked')) {
            items.hide();
            $("#" + cb.val()).show();
        } else {
            items.show();
        }
        cb = items = null;
    });
}); 
```

# java - 名称中包含循环计数器的变量

> ID：11785299
> 
> 赞同：3
> 
> 时间：2012-08-02T20:33:25.823
> 
> 标签：java

所以我有这段代码，`en1`对象的实例在哪里。

```
for (int i = 0; i < 20; i++) {
    System.out.println("Introduce el nombre de una empresa");
    Scanner scanner = new Scanner(System.in);
    en1.setName(scanner.next());
} 
```

我想将 1 更改`en1`为循环计数器。这可能吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-02T20:34:39.957

尝试使用数组

```
 en[i].setName (scanner.next ()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T20:37:54.813

你最好的选择是使用一个数组并让每个元素对应于循环的迭代。

```
//Instantiation 
Enterprise[] en = new Enterprise[20];//the number of iterations you need

//You do not have a default constructor, so I would use this to add the "int index"
en[i] = new Enterprise(X); //For each enterprise where "X" is a number for the "int index"

//in the loop
en[i].setName(scanner.next()); 
```

我的示例中的数组将有 20 个元素（0 到 19）。每一个都可以对应一个迭代。无法根据其他变量更改变量的名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T20:37:10.393

不，您不能使用 Java 中的变量更改参数的名称。像其他用户建议的那样，创建一个 en 对象数组并使用循环计数器访问每个单独的对象。这种方式更加清洁和惯用。

# vb.net - 根据用户输入的文本创建“索引”报告 - VB 2010

> ID：11785302
> 
> 赞同：0
> 
> 时间：2012-08-02T20:33:31.527
> 
> 标签：vb.net, dictionary, indexing, richtextediting

我被指示创建一个索引。

基本上，用户应该能够在空文本框中纠正一些文本。单击按钮后，输出应显示按字母顺序排列的输入单词列表，以及它们出现的行号。

例如：

一鱼
二鱼
红鱼
蓝鱼。

黑鱼
蓝鱼
老鱼
新鱼。

这个有
小星星。

这个有一辆小车。
说！有多少
鱼。

A 12, 14, 15
是 16
黑色 6
蓝色 4, 7
车 14
鱼 1, 2, 3, 4,
有 11, 14
小 12, 14
很多 15
新 9
个 16
旧 8
一个 1, 11, 14
红色 3
说15
星 12
那里 16
这 11, 14
二 2
什么 15

该文本是参考 Java 文档创建索引时使用的，我遵循了它，期望与我的相同，只是用另一种语言。

我现在正在写论文以制定算法，但我对自己的努力感到有些沮丧！

还有几个要求：

行号出现的最大数量是 4，因此即使一个单词出现在 10 个不同的行上，它也应该只被引用 4 次

语法必须被忽略，所以包含 !.,? 必须删除拼写为 :HeLlO 的单词必须拼写为: hello

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:26:10.943

如果您需要按照它们在文本文件中出现的顺序显示单词，则将 HashTable 更改为 SortedList。

```
 Dim hshResults As New Hashtable()

    Dim lstLinesOfText As List(Of String) = IO.File.ReadAllLines("C:\YourFile.txt").ToList()

    Dim intLineCursor As Integer = 0

    For Each strLine As String In lstLinesOfText

        Dim lstWords As List(Of String) = strLine.Split(" ").ToList()

        For Each strWord As String In lstWords

            ProcessWord(strWord, hshResults, intLineCursor)

        Next

        intLineCursor += 1

    Next

    Dim strOutput As String = String.Empty

    For Each o As DictionaryEntry In hshResults

        strOutput += CStr(o.Key) & " "

        Dim lstLinesWhereWordIsFount As List(Of Integer) = CType(o.Value, List(Of Integer))

        For Each i As Integer In lstLinesWhereWordIsFount

            strOutput += CStr(i) & " "

        Next

        'Some cleanup of extra spaces.
        strOutput = Trim(strOutput) & ControlChars.NewLine

    Next

Private Sub ProcessWord(ByVal strWord As String, ByRef hshResults As Hashtable, ByVal intLineIndex As Integer)

    Dim lstLinesWhereWordIsFound As List(Of Integer) = (From o As DictionaryEntry In hshResults _
                                                        Where CStr(o.Key) = strWord _
                                                        Select CType(o.Value, List(Of Integer))).FirstOrDefault()

    If lstLinesWhereWordIsFound Is Nothing Then

        'Add this word.
        Dim lstNewHashTableValue As New List(Of Integer)
        lstNewHashTableValue.Add(intLineIndex + 1) 'Indexes in the programming world start at 0.

        hshResults.Add(CObj(strWord), CObj(lstNewHashTableValue))

    Else

        'Add the line number for this word.
        If lstLinesWhereWordIsFound.Count < 5 Then

            'Make sure we're not duplicating a line number for this word.
            If (From i As Integer In lstLinesWhereWordIsFound _
                Where i = intLineIndex).Count = 0 Then

                lstLinesWhereWordIsFound.Add(intLineIndex + 1)

                hshResults(strWord) = CObj(lstLinesWhereWordIsFound)

            End If

        End If

    End If

End Sub 
```

编辑：代码解释

首先，我实例化一个 HashTable 来存储找到它们的单词和行。然后我将文本文件的每一行放入一个 List(of String) 对象中。遍历文本文件的行，我使用 Split 方法将行中的每个单词放入另一个 List(of String) 变量中。我通过一个方法 (ProcessWord) 发送该行的每个单词，该方法将适当地更新 HashTable。最后，我遍历 HashTable 中的所有键/值对以生成所需的输出。ProcessWord 方法的逻辑是首先判断单词是否已经存在于HashTable 中。如果没有，请添加单词和行号。如果是这样，请确保行数不高于 4 的频率（如您的问题中所要求的那样），确保它不

# matlab - 在matlab中查找结构数组中的出现次数

> ID：11785303
> 
> 赞同：3
> 
> 时间：2012-08-02T20:33:38.457
> 
> 标签：matlab

我有一个 100K 结构的数组。我在下面列出了一个这样的结构的内容：

迭代：1

区块ID:86

BlockID 的值可以在 1 到 100 之间。我想找出 BlockID 的出现次数。例如：BlockID "1" 出现了 25 次；BlockID "98" 出现了 58 次，以此类推。

我在网上查看并尝试了这些链接中提到的选项，但找不到解决方案： [Matlab: Count number of structs that have a specific content](https://stackoverflow.com/questions/10834172/matlab-count-number-of-structs-that-have-a-specific-content) [如何在matlab中计算单元格的唯一元素？](https://stackoverflow.com/questions/5285217/how-to-count-unique-elements-of-a-cell-in-matlab) [Matlab：如何计算单元格中存储了多少个唯一字符串？](https://stackoverflow.com/questions/3787023/matlab-how-to-calculate-how-many-unique-strings-are-stored-in-the-cell)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T03:15:33.967

为简单起见，假设有一个大小为 10 的结构数组，其 BlockID 的值在 '1' 和 '3' 之间：

```
%generate the struct array
for n = 1:10 
    structs(n).BlockID = num2str(randi(3));
end
%structs.BlockID : 3     2     1     3     3     2     1     1     2     2 
```

要找出 BlockID 的出现次数：

```
count = accumarray(str2double({structs.BlockID})',1);
%count : 3     4     3 
```

现在 count(i) 是值“i”的 BlockID 的出现次数。

对不起我的英语不好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T09:48:03.867

您可以简单地使用 Matlab 自己的索引技术，结合`hist`and `unique`：

```
% sample data

a(1).BlockID   = 68
a(1).iteration = 1

a(2).BlockID   = 88
a(2).iteration = 12

a(3).BlockID   = 88
a(3).iteration = 14

a(4).BlockID   = 16
a(4).iteration = 18

% collect all BlockID values into array
b = [a.BlockID];

% count unique entries
[occurrences, entries] = hist(b, unique(b)) 
```

输出：

```
occurrences =
    1     1     2
entries =
    16    68    88 
```

我总是感到惊讶的是`[struct(indices).member]`，很少有开发人员知道（或使用）像符号这样广泛适用的东西......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T20:37:02.890

您可以使用`arrayfun`and `count_unique`（count_unique 不是官方功能 - 它来自 matlab 中央文件交换，可以在[此处](http://www.mathworks.com/matlabcentral/fileexchange/23333-determine-and-count-unique-values-of-an-array/content/count_unique.m)找到）：

```
ids= arrayfun(@(x)x.BlockID, struct1);
[vals, counts] = count_unique(ids); 
```

**注意：**正如 rody_o 所指出的（尽管他/她错过了索引是不必要的事实），还有另一种连接 id 的方法，即

```
ids = [struct1.BlockID]; 
```

`count_unique`或者，如果您愿意，您可以创建自己的函数，

```
function [counts, uns] = count_unique(ids)
uns= unique(ids);
counts = arrayfun(@(x)sum(ids == x), uns); 
```

# c - Linux 汇编和 printf

> ID：11785309
> 
> 赞同：6
> 
> 时间：2012-08-02T20:33:52.470
> 
> 标签：c, assembly, printf, nasm

我尝试用 printf 函数编写简单的汇编程序。我编译它`nasm -f elf 64`并使用`gcc`. 运行后我看到了`segmentation fault`。怎么了？

```
[Bits 32]

extern printf
global main

section .data 

hello:
db "Hello", 0xa, 0 

section .text

main:

push hello
call [printf]

add esp, 4

mov eax, 1
mov ebx, 0
int 80h 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T21:24:12.973

ia32 上的 Linux 不使用与 amd64 相同的调用约定。由于您的代码使用前者，您必须将其组装为 32 位并与 32 位 libc 链接。在 debian 上，您需要 libc6-dev-i386 软件包。

您还必须将 'call [printf]' 替换为 'call printf'，这是错误的。

另请注意，当您使用主界面时，您应该从 main 返回，而不是执行退出系统调用以允许 C 运行时关闭代码运行。

[带有构建说明的 x86-32 的 Hello World 示例](http://www.ithania.com/asm/001/32_nasm/index.html)。

如果您正在使用 amd64，您可能想学习如何编写 64 位程序集。

[带有构建说明的 x86-64 的 Hello World 示例](http://www.ithania.com/asm/001/64_nasm/index.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T21:55:39.400

如果您真的想获得一个 32 位二进制文​​件，如代码标题所示，那么您只需要修复以下行：

```
call [printf] 
```

将其更改为：

```
call printf 
```

当你这样做时，`call [printf]`你不是调用 printf 而是调用第一个 printf 代码字节所指向的地址，该构造 ( `[address]`) 称为[有效地址](https://www.tortall.net/projects/yasm/manual/html/nasm-effaddr.html)。

# c# - 使用自定义 DataAnnotationsModelValidatorProvider 进行服务器端验证

> ID：11785311
> 
> 赞同：5
> 
> 时间：2012-08-02T20:33:58.463
> 
> 标签：c#, asp.net-mvc, asp.net-web-api, data-annotations, model-validation

我已经设置了一个自定义提供程序，以允许从数据存储而不是静态代码中设置验证属性。在我的 .NET MVC 4 项目中非常适合客户端验证，但我无法让服务器端验证正常工作。

CustomModelValidatorProvider .cs：

```
    公共类 CustomModelValidatorProvider : DataAnnotationsModelValidatorProvider
    {
        protected override IEnumerable GetValidators（ModelMetadata 元数据，ControllerContext 上下文，IEnumerable 属性）
        {
            // 在此处从数据存储区设置属性

            返回 base.GetValidators（元数据、上下文、属性）；
        }
    }

```

在我的 Global.asax.cs 我有：

```
    受保护的无效 Application_Start()
    {
        ModelValidatorProviders.Providers.Clear();
        ModelValidatorProviders.Providers.Add(new CustomModelValidatorProvider());
    }

```

在 Web API 方法中，我有：

```
    var validationResultList = new List();
    bool valid = Validator.TryValidateObject(myModelObject, new ValidationContext(myModelObject, null, null), validationResultList, true);

```

在这里，valid 总是正确的。即使 Jquery 客户端验证显示错误。在服务器端，我的自定义提供程序未用于应用数据注释。当我在 GetValidators() 中设置断点时，它会在创建视图并正确显示客户端验证器时调用，但在模型绑定到控制器时不会再次调用。

我错过了一步吗？任何帮助是极大的赞赏！

**更新**

自定义验证器在对象发布到 Controller 时正常工作，但在发布到 ApiController 时不会被触发。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T01:27:17.833

我终于想通了，这是一个非常简单的答案。ApiController 仅响应 System.Web.Http.Validation 命名空间中的提供程序，而不是用于常规控制器和客户端验证的 System.Web.Mvc 命名空间。

我实现了两者以在 ApiControllers 中实现客户端验证和服务器验证。

# php - PHP 中的正则表达式替换

> ID：11785313
> 
> 赞同：0
> 
> 时间：2012-08-02T20:34:11.577
> 
> 标签：php, regex, replace

我正在将数据从一个 CMS 导入到另一个。我在一个 CMS 中有图像标注，例如：

```
{image id="12321" align="right" crop="square"} 
```

或者

```
{image id="12321" align="left" crop="rectangle"} 
```

从技术上讲，align 或 crop 中的值可以是多种值，本质上都是字母。我想采用这些场景中的任何一个，并将它们变成以下内容：

```
[image id="12321" align="VALUEHERE" crop="VALUEHERE"] 
```

对不起，我应该早点详细说明。这是文章正文的一部分。我不能只替换第一个和最后一个字符:) 此外，有些标注本质上相似，str_replace 不起作用。我希望得到一些 preg_replace 帮助，这就是我在标题中提到正则表达式的原因。我应该从最初的问题帖子中详细说明。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T20:39:02.497

If all of the values are alphabetic (can't contain {) you don't even need a regex.

```
$finalStr = str_replace('{', '[', $initial);
$finalStr = str_replace('}', ']', $initial); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T20:41:56.580

正则表达式解决方案是：

```
$out = preg_replace('/\{(.*?)\}/','[$1]',$in); 
```

**编辑 ：**

我会尽力向您解释这一点，但您可以阅读[preg_replace 文档](http://www.php.net/manual/en/function.preg-replace.php)以获得更好的解释。

第一个参数是正则表达式，我用它告诉 PHP 捕获大括号内的任何内容（.* 表示 0 或更多克拉）。您需要使用括号 () 将要捕获的内容包装起来。

第二个参数是替换。您可以在其中使用 $ 和一个数字（就像我使用 $1 一样）来插入您在第一个参数中捕获的内容。

所以基本上我告诉它捕捉 {} 内的内容并将其放入 [] 内。

*希望你明白了一些东西......解释正则表达式真的很难......*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T20:39:42.900

Given that the format is always the same:

```
$input = '{image id="12321" align="left" crop="rectangle"}';
$output = preg_replace('/{image id="([^"]*)" align="([^"]*)" crop="([^"]*)"}/', '[image id="$1" align="$2" crop="$2"]', $input); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T20:41:08.687

鉴于它是字符串的第一个和最后一个字符，

```
$input[0] = "[";
$input[strlen($input)-1] = "]"; 
```

# regex - 用 Perl 匹配表格中的内容

> ID：11785317
> 
> 赞同：0
> 
> 时间：2012-08-02T20:34:19.220
> 
> 标签：regex, perl, switch-statement

我正在使用[HTML::Query](http://search.cpan.org/~kamelkev/HTML-Query-0.07/lib/HTML/Query.pm)从每个 td 标签中提取内容。我确实想要 html 格式的。现在当我打印它时，它似乎打印了两次，大部分时间。有什么想法吗？这是我正在使用的代码：

```
for my $td ($doc->query("td")) {
$td= $td->as_HTML;
  given($td){
  when (/class=\"class1\">(.*?)<\/td>/){
          my $output = $1;
     print "$output\n";
     }

  when (/class=\"class2\">(.*?)<\/td>/){
          my $output = $1;
     print "$output\n";
     }
  when (/class=\"class3\">(.*?)<\/td>/){
          my $output = $1;
     print "$output\n";
     }
  when (/class=\"class4\">(.*?)<\/td>/){
          my $output = $1;
     print "$output\n";
     }
  }

Input:
<table>
 <tr>
  <td class="class1">question</td>
  <td class="class2">No response</td>
</tr>

<tr>
  <td class="class1">question</td>
  <td class="class2">No response</td>
</tr>

<tr>
  <td class="class3">Answer</td>
  <td class="class4">Answer is available</td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T20:50:27.563

调用`query`返回所有`<td>`元素；其中有两个带有`class="class1"`，所以这就是这种情况匹配两次的原因。

由于您已询问将每一*行*的内容打印在一行上，请尝试以下操作。请注意，我使用了一些方法，`HTML::Element`而不是尝试匹配原始 HTML 代码。

```
for my $tr ($doc->query("tr")) {
  my ($td1, $td2) = $tr->contents_list();
  # Print contents of $td1 and $td2 on the same line
} 
```

# css - Drupal 的漂亮菜单模块：子菜单覆盖子菜单。CSS 问题

> ID：11785319
> 
> 赞同：0
> 
> 时间：2012-08-02T20:34:28.940
> 
> 标签：css, drupal-modules

在此页面[http://bit.ly/T3yJIH](http://bit.ly/T3yJIH)上，drupal 的 Nice Menu 模块无法正确显示子菜单。如果您转到菜单中的第一项，然后转到子菜单中的第一项，您可以看到它。（设施->弹簧->日历）日历项目显示在弹簧子菜单内。我一直在玩css，无法让它工作。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T21:36:07.873

尝试像这样更新您的CSS：

```
nice-menu ul li ul {
     margin-left: 35px !important; 
} 
```

刚刚在 Chrome 检查器中尝试过，我认为这应该可以解决问题；

# java - 如何将 libusb 添加到 java swing netbeans 项目？

> ID：11785321
> 
> 赞同：1
> 
> 时间：2012-08-02T20:34:36.720
> 
> 标签：java, swing, netbeans-7, libusb

`libusb``Projects > Libraries > Right Click > Add Library.`安装在运行 Netbeans 7.1 的 Ubuntu 主机上，但在此主机上有各种 libusb.so 和 libusb.a 文件但没有 libusb.jar 文件中不是一个选项。

我最终使用了[javax.usb](http://sourceforge.net/projects/javax-usb/) jar，因为我能为 libusb 找到的唯一包装器不支持 v1.0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T20:45:04.040

**您可以通过工具 > 库**创建自己的库，然后单击**新建库**按钮。然后，您可以为您的库命名并将所需的 jar 添加到该库中。

之后，如果您重复您的过程，它应该会出现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T20:48:29.423

您需要创建一个新库并将其添加到您的项目/netbeans，这可以通过导航到：*文件->项目属性->工具>库->创建->*输入您的库名称，即*libusb*然后确定- *>添加 JAR /Folder*并选择要包含的适当 jar。

# xml - XML/XSLT：从 XSLT 中的 XML 中提取两个不同节点的信息？

> ID：11785345
> 
> 赞同：1
> 
> 时间：2012-08-02T20:36:07.840
> 
> 标签：xml, xslt

所以我有这个代码：

```
<xsl:for-each select="item">
<Row>
    <Cell Borders="#ffffff">
      <xsl:attribute name="Background">
        <xsl:choose>
          <xsl:when test="position() mod 2 = 1">#CCCCFF</xsl:when>
          <xsl:when test="position() mod 2 = 0">#FFFFFF</xsl:when>
        </xsl:choose>
      </xsl:attribute>
      <Paddings Left="5" Right="5" Top="2" Bottom="2"/>
      <xsl:for-each select="//queries/query/selection/dataItem">
      <Text Style="TableContent">                                               
        <xsl:value-of select="@name"/>                                                                                        
      </Text>
      </xsl:for-each>   
    </Cell>
    <Cell Borders="#ffffff">
      <xsl:attribute name="Background">
        <xsl:choose>
          <xsl:when test="position() mod 2 = 1">#CCCCFF</xsl:when>
          <xsl:when test="position() mod 2 = 0">#FFFFFF</xsl:when>
        </xsl:choose>
      </xsl:attribute>
      <Paddings Left="5" Right="5" Top="2" Bottom="2"/>
      <Text Style="TableContent">
      <xsl:choose>
      <xsl:when test="qi">
        <xsl:value-of select="qi"/>
      </xsl:when>
      <xsl:otherwise>
        <Text>N/A</Text>
      </xsl:otherwise>
      </xsl:choose> 
      </Text>
    </Cell>
</Row>
</xsl:for-each> 
```

我正在尝试从 XML 中提取信息，但是该信息位于两个不同的节点中，具有两个不同的 XPATH。我还需要匹配来自一个节点的信息，即名称。到位于不同位置下的另一个节点，具有不同的 XPATH。有没有办法遍历节点中的每个名称并将其与在同一 XML 中的另一个节点中找到的信息相匹配？

编辑 [添加到原始 XML 的链接](http://pastebin.com/RrU8mR7R)

非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T12:29:58.723

看起来您正在尝试访问**表达式**元素与当前项目的**名称**元素匹配的**dataItem**元素。

 ******在这种情况下，您可以创建一个键来通过它们的表达式**值查找**dataItem**记录

 **```
<xsl:key name="dataItems" match="dataItem" use="expression" /> 
```

然后，而不是像你目前正在做的那样遍历所有**dataItem记录......**

```
<xsl:for-each select="//queries/query/selection/dataItem"> 
```

您可以替换此行以简单地使用键仅迭代具有相关值的那些数据项

```
 <xsl:for-each select="key('dataItems', name)"> 
```

这里，**name是您当前所在的当前****item**元素下的 name 元素。

这是一些更完整的 XSLT，用于在上下文中显示**xsl:key**元素

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:key name="dataItems" match="dataItem" use="expression"/>

   <xsl:template match="root">
      <xsl:apply-templates select="lineage"/>
   </xsl:template>

   <xsl:template match="lineage">
      <xsl:for-each select="item">
         <Row>
            <Cell Borders="#ffffff">
               <xsl:attribute name="Background">
                  <xsl:choose>
                     <xsl:when test="position() mod 2 = 1">#CCCCFF</xsl:when>
                     <xsl:when test="position() mod 2 = 0">#FFFFFF</xsl:when>
                  </xsl:choose>
               </xsl:attribute>
               <Paddings Left="5" Right="5" Top="2" Bottom="2"/>
               <xsl:for-each select="key('dataItems', name)">
                  <Text Style="TableContent">
                     <xsl:value-of select="@name"/>
                  </Text>
               </xsl:for-each>
            </Cell>
            <Cell Borders="#ffffff">
               <xsl:attribute name="Background">
                  <xsl:choose>
                     <xsl:when test="position() mod 2 = 1">#CCCCFF</xsl:when>
                     <xsl:when test="position() mod 2 = 0">#FFFFFF</xsl:when>
                  </xsl:choose>
               </xsl:attribute>
               <Paddings Left="5" Right="5" Top="2" Bottom="2"/>
               <Text Style="TableContent">
                  <xsl:choose>
                     <xsl:when test="qi">
                        <xsl:value-of select="qi"/>
                     </xsl:when>
                     <xsl:otherwise>
                        <Text>N/A</Text>
                     </xsl:otherwise>
                  </xsl:choose>
               </Text>
            </Cell>
         </Row>
      </xsl:for-each>
   </xsl:template>
</xsl:stylesheet> 
```******

# objective-c - NSTextView 的定位检查栏

> ID：11785350
> 
> 赞同：4
> 
> 时间：2012-08-02T20:36:54.277
> 
> 标签：objective-c, xcode, cocoa

为文本视图启用“检查器栏”很容易，因此屏幕顶部会出现一个带有各种格式按钮的栏。（虽然我有一些困惑，直到我学会确保我在滚动视图中选择文本视图，而不是滚动视图本身）。我可以以编程方式使用 [textView setUsesInspectorBar:YES] 或转到 Attributes Inspector 并选中“Uses”部分中的“Inspector Bar”框。

我的问题是，我怎样才能进一步控制检查栏？我无法在 XCode 文档或在线查找有关它的信息。我希望能够将其放置在屏幕上的不同位置。能够选择栏中的特定控件也很棒。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T23:24:20.013

答案是，您并不打算进一步控制检查栏。文档中什么都没有，因为，好吧，什么都没有。苹果的说法，使用它或不使用它。

**但是**，如果您深入研究一下，您会发现检查器栏是一个非常有趣的控件。它不显示为文本视图的一部分，而是（私下）嵌入在“窗口视图”本身中。当我说“窗口视图”时，我指的是内容视图的超级视图。

如果您列出该“窗口视图”的子视图：

```
NSLog(@"%@", [self.testTextView.window.contentView superview].subviews); 
```

你最终得到：

```
2012-08-02 15:59:30.145 Example[16702:303] (
    "<_NSThemeCloseWidget: 0x100523dc0>", // the close button
    "<_NSThemeWidget: 0x100525ce0>", // the minimize button?
    "<_NSThemeWidget: 0x100524e90>", // the maximize button?
    "<NSView: 0x100512ad0>", // the content view
    "<__NSInspectorBarView: 0x100529d50>", // the inspector view
    "(<NSToolbarView: 0x10054e650>: FD2E0533-AB18-4E7E-905A-AC816CB80A26)" // the toolbar
) 
```

如您所见，`AppKit`将检查器栏与其他顶级窗口控件置于同一级别。现在这进入了私有 API 的领域，但简单地修补“窗口视图”不应该让任何应用程序被拒绝。

* * *

您可以***尝试***`__NSInspectorBarView`从此处获取对 的参考。似乎它总是紧跟在内容视图之后的子视图，所以这样的事情可能会起作用：

```
NSArray *topLevelViews = [self.testTextView.window.contentView superview].subviews;
NSUInteger indexOfContentView = [topLevelViews indexOfObject:self.testTextView.window.contentView];
if (indexOfContentView + 1 < topLevelViews.count) {
    NSView *inspectorBar = [topLevelViews objectAtIndex:indexOfContentView + 1];
    NSLog(@"%@", inspectorBar);
}
NSLog(@"%@", topLevelViews); 
```

如果 Apple 更改顶级视图的顺序，这会立即中断，因此对于生产应用程序可能不是一个好主意。另一个想法是：

```
NSView *inspectorBarView = nil;
for (NSView *topLevelView in topLevelViews) {
    if ([topLevelView isKindOfClass:NSClassFromString(@"__NSInspectorBarView")]) {
        inspectorBarView = topLevelView;
    }
}
NSLog(@"%@", inspectorBarView); 
```

我不知道使用是否`NSClassFromString()`会通过 App Store 审查指南，但是，因为它再次依赖于私有 API。

* * *

话虽如此，一旦您获得对检查栏视图的引用，事情仍然不能很好地工作。您可以尝试在底部重新定位它：

```
if (inspectorBarView) {
    NSRect newFrame = inspectorBarView.frame;
    newFrame.origin = NSZeroPoint;
    [inspectorBarView setAutoresizingMask:NSViewMaxYMargin | NSViewMaxXMargin];
    [inspectorBarView setFrame:newFrame];
} 
```

但是你最终会得到一个错误绘制的工具栏，所以需要做更多的工作：

![在此处输入图像描述](../Images/ed90f53b820e1b23202fe16436562a70.png)

我的想法是尝试将内容视图的高度向上移动以覆盖灰色的剩余区域（每次调整窗口大小时都必须这样做，也许修补自动调整大小的蒙版可能会更容易）并自定义绘制底部检查器栏的背景。

**编辑**

哦，您也应该为此提交功能请求。[bugreport.apple.com](http://bugreport.apple.com/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-04-03T04:56:14.827

这已经晚了四年，但我觉得互联网上的某个人将来可能会从中受益。我花了太长时间试图弄清楚这一点。

正如其他人所指出的，检查栏类似乎是一个私有类（__NSInspectorBarView）。因此，可能不建议修改。

尽管如此！好奇的人必须知道。在本文发布时（2016 年 4 月），检查器栏已插入到窗口的附件栏中。`NSWindow`从 OS X 10.10 开始，您可以使用被调用的数组属性获取附件视图列表`titlebarAccessoryViewControllers[]`。

这里有一些 Swift 2.0 代码可以做到这一点，*假设您事先没有在窗口中插入任何其他附件视图*。

```
if window.titlebarAccessoryViewControllers.count > 0 {
        let textViewInspectorBar = self.titlebarAccessoryViewControllers[0].view
        let inspectorBarHeight: CGFloat = textViewInspectorBar!.frame.height // 26.0 pt
    } 
```

值得注意的是，附件视图**在全屏模式应用程序中的处理方式不同**：[https ://developer.apple.com/library/mac/documentation/General/Conceptual/MOSXAppProgrammingGuide/FullScreenApp/FullScreenApp.html](https://developer.apple.com/library/mac/documentation/General/Conceptual/MOSXAppProgrammingGuide/FullScreenApp/FullScreenApp.html)

我个人不会尝试移动附件视图，因为它们是特殊类型的视图，旨在保留在工具栏中（如果我完全理解我所读的内容）。

NSTitlebarAccessoryViewController 参考： [https ://developer.apple.com/library/mac/documentation/AppKit/Reference/NSTitlebarAccessoryViewController_Class/](https://developer.apple.com/library/mac/documentation/AppKit/Reference/NSTitlebarAccessoryViewController_Class/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-05-20T12:15:15.970

又过了 3 年，但我怀疑有些人会觉得这很有用。我的具体问题是让一个窗口完全被 tabView 填满 - 非常适合设置各种用户默认值。这些标签页中只有一个有几个文本视图，我希望检查器栏可见。跳转到那个页面会出现检查栏，并将整个页面向下推，破坏了我精心设计的布局。离开页面并没有再次隐藏它。

显而易见的事情是让检查栏只出现在相关的标签页上。掌握了它（“站在巨人的肩膀上”——感谢巨人 Vervious），在视图层次结构中重新定位它相对容易。您仍然会遇到将内容向下推的空工具栏的空间问题。当检查栏第一次出现时，窗口的视图层次结构发生了根本性的变化，我放弃了尝试用它做任何事情。我的解决方案是增加内容视图的高度。（为什么高度而不是起源我不能说。）

```
func tabView(_ tabView: NSTabView, didSelect tabViewItem: NSTabViewItem?) {
  if let inspectorBar = window!.titlebarAccessoryViewControllers.first(where:
    {$0.view.className == "__NSInspectorBarView"} )?.view {

    // move content view back to where it should be
    var sz = window!.contentView!.frame.size
    sz.height = window!.frame.size.height - 21
    window!.contentView?.setFrameSize(sz)

    // put the inspector where we want it
    inspectorBar.removeFromSuperview()
    let y = textPage.frame.size.height - inspectorBar.frame.size.height - 10
    inspectorBar.setFrameOrigin(NSPoint(x: 0, y: y))
    textPage.subviews.insert(inspectorBar, at: 0)
  }
} 
```

该代码属于`NSTabViewDelegate`我使我的窗口控制器符合的代码，记住将 tabView 的委托设置为 xib 中的文件所有者，并在选择新选项卡时调用。`textPage`是相关 tabViewItem 内的视图。

通过反复试验发现了一些任意常数。该功能只需要运行一次。重复调用是无害的，但您可以设置一个标志以从后续调用中提前返回。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-27T15:36:22.317

你不能做任何事情来定位这个东西。显然，@Vervious 指出的损坏是真实的，*但*前提是您没有 NSToolBar。你看，这个inspectorBar 很遗憾是一个主要是私有的并且大部分（公开）无证但很棒的工具。而且它非常适合在具有可见 NSToolBar 的窗口中使用......看图。

**将工具栏添加到视图后** ![将工具栏添加到视图后](../Images/1e8d56982082d776b18a4bf76a0c5bc0.png)

**仍然有一个工具栏但隐藏了，并且检查栏很酷** （如通过视图菜单或它调用的方法，即 toggleToolBarShown: 并且是 NSResponder 友好消息） ![仍然有一个工具栏但被隐藏了，检查栏很酷](../Images/9d18f95f1aba0df928bf772cd76375f3.png)

所以很明显，不，你不能做太多。它的设计记录很差。它可以作为 NSToolbar 所在位置下的伪附件视图栏（这也是不可调节的）

# c# - 搜索可以从查询中分离城市、国家、产品类型和选项的解析器或引擎

> ID：11785358
> 
> 赞同：2
> 
> 时间：2012-08-02T20:37:24.090
> 
> 标签：c#

我需要一个可以将字符串解析为多个子查询的搜索引擎（如果有意义的话）。

类似于那些您可以输入的搜索引擎，`Casino in Las vegas`它将检索拉斯维加斯的赌场。

我必须制作一个将句子解析为的搜索`B&B in Quebec with folding bed and breakfast`引擎

```
{
    type: { "B&B" },
    location: { "Quebec" },
    option: { "folding bed", "breakfast" }
} 
```

所以在我尝试发明轮子之前，我想知道开源或商业中是否存在类似的东西。

# ruby-on-rails-3 - 内置的 rails 生成器记录在哪里？

> ID：11785361
> 
> 赞同：2
> 
> 时间：2012-08-02T20:37:34.647
> 
> 标签：ruby-on-rails-3, generator

我还没有找到指向内置 rails 生成器的权威列表的指针。做什么`rails generate helper`？怎么样`rails generate resource`？`rails generate scaffold`和 和有什么区别`rails generate scaffold_controller`？ETC...

我一次找到了每一个的答案，但是很高兴知道在哪里可以找到整个集合。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T16:13:14.617

我没有找到一个完整的列表，但可以随时查阅“权威文档”，这是对源代码的委婉说法。您可以查看以下每个子目录的 USAGE 文件：

```
https://github.com/rails/rails/tree/master/railties/lib/rails/generators/rails/ 
```

这并不理想，但它应该让你开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-01T20:20:05.273

运行`rails generate --help`，它将输出如下内容：

```
Usage: rails generate GENERATOR [args] [options]

General options:
  -h, [--help]     # Print generator's options and usage
  -p, [--pretend]  # Run but do not make any changes
  -f, [--force]    # Overwrite files that already exist
  -s, [--skip]     # Skip files that already exist
  -q, [--quiet]    # Suppress status output

Please choose a generator below.

Rails:
  assets
  controller
  generator
  ...

ActiveRecord:
  active_record:devise

SomeGem:
  some_gem:some_type_of_file
  ... 
```

列出了所有可用的生成器（包括那些由 gems 定义的生成器）。`-h`如上所述，您可以使用该选项来获取有关特定生成器的更多信息（例如`rails g assets -h`）。

如果这不能回答你的问题，你最好的办法是查阅源代码，就像无畏的傻瓜所建议的那样。访问[https://github.com/rails/rails/find/master](https://github.com/rails/rails/find/master)，输入“生成器”和 Ctrl-F 来查找您要查找的内容。

# scala - 使用激活框架计算查询？

> ID：11785365
> 
> 赞同：0
> 
> 时间：2012-08-02T20:37:46.607
> 
> 标签：scala

有什么简单的方法可以用 Activate 进行计数查询吗？

我今天正在做的事情是这样的：

```
transactional {    
    allWhere[NaturalPerson].size
} 
```

但是，我不确定这是否是正确的做事方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T07:44:57.413

查看框架附带的测试套件。这是一个示例测试，取自[`QuerySpecs.scala`](https://github.com/fwbrasil/activate/blob/master/activate-tests/src/test/scala/net/fwbrasil/activate/statement/query/QuerySpecs.scala)：

```
"support count query" in {
  activateTest(
    (step: StepExecutor) => {
      import step.ctx._
      step {
        newEmptyActivateTestEntity
        newEmptyActivateTestEntity
      }
      step {
        query {
          (e: ActivateTestEntity) => where(e isNotNull) select (1)
        }.sum must beEqualTo(2)
      }
    }
  )
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T20:07:48.113

有两种选择：

```
all[NaturalPerson].size

query {
    (p: NaturalPerson) => where(p isNotNull) select(1)
}.size 
```

两者都有很好的性能，但第二个性能更好，可以在1.0-RC2或等于1.0-RC2之后的版本上使用。

请注意，您正在使用 allWhere 没有条件。这不会编译。如果您没有条件，请使用“全部”。

# javascript - 拉斐尔选择协助

> ID：11785366
> 
> 赞同：1
> 
> 时间：2012-08-02T20:37:51.500
> 
> 标签：javascript, raphael

好的，所以我想选择一个元素让我们说一个圆圈，然后如果我想取消选择它，我可以单击它以取消选择它或单击另一个元素以取消选择前一个元素并选择新的元素。有一个先前的堆栈溢出问题可以理解我在说什么。

这是链接：[Raphael element selection problem](https://stackoverflow.com/questions/5377677/raphael-element-selection-problem)里面有一个 jsfiddle 可以很好地处理两个元素。我想实现我在做类似的事情之前谈到的功能。任何的意见都将会有帮助。

这是我尝试创建但未成功的小提琴的链接。[http://jsfiddle.net/stewbydoo/jwAzS/1/](http://jsfiddle.net/stewbydoo/jwAzS/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T22:37:46.650

我会稍微抽象一下以使其尽可能可重用。这是一个粗略的例子：

```
function CreateMultiselectGroup(paper, set, groupID, selAttr, unselAttr) {
    groupID = groupID || "default";
    selAttr = selAttr || {
        fill : 'red',
        stroke : 'black',
        'stroke-width' : 3
    };
    unselAttr = unselAttr || {
        fill : 'white',
        stroke : 'gray',
        'stroke-width' : 1
    };
    var multiselector = function(paper, selectedEntity) {
        paper.forEach(function(el) {
            if(el.data("multiselect-group") == groupID) {
                el.attr(unselAttr);
            }
        });
        selectedEntity.attr(selAttr);
    };
    set.forEach(function(el) {
        el.data("multiselect-group", groupID);
        el.click(function() {
            multiselector(paper, el);
        });
    });
} 
```

该函数`CreateMultiselectGroup`接受一个 Raphael 纸对象、一组将成为组的一部分的对象、组的任意名称（默认为“默认”）以及选定和未选定状态的属性集。它将集合中的每个元素标记为属于特定的多选组。单击其中之一时，它会取消选择组的所有成员，然后将所选属性仅应用于单击的元素。

这可以很容易地扩展到与点击回调或动画一起使用——这只是一个用于进一步功能的线框图。

这是一个[演示](http://jsfiddle.net/kevindivdbyzero/NqXNC/)在随机位置使用两个选择组（圆形和正方形）的小提琴。

# .htaccess - Virtual directory with .htaccess

> ID：11785369
> 
> 赞同：0
> 
> 时间：2012-08-02T20:38:02.900
> 
> 标签：.htaccess, mod-rewrite

Hello i have the following page:

```
1st site folder: www.site.com /www/www1/
2nd site folder: www2.site.com /www/www2/
Ajax Folder: /www/ajax/
CDN Folder: /www/cdn/ 
```

the `www` and `www2` site uses some ajax stuff, since i dont want to create a own ajax folder to each site, i want to use the same directory, what i want to do is the following:

I have my `www` and `www2` sites, each one must use the same ajax folder, im trying to create a virtual folder to each one that connects to my ajax folder.

So must be `www.site.com/ajax/myfileajax.php?id=1` Also for `www2.site.com/ajax/myfileajax.php?id=2`

Im trying with .htaccess but no luck only a 404 error

```
RewriteRule /inc/^(.*) ../ajax/$1 [L] 
```

I don't want to recode all my javascript for x-domain ajax that's why i want to do this. My hosting provider can't edit the httpd.conf so this is my only chance with .htaccess. I tried `alias` too but don't work.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T21:09:45.970

尝试将其放在文档根目录中的 htaccess 文件中适当的位置（我假设是 /www/）：

```
RewriteEngine On

# for www.site.com
RewriteCond %{HTTP_HOST} www.site.com [NC]

# check that the request needs to be routed (ajax/cdn don't need to be routed)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# check that we get routed to an existing file or directory
RewriteCond %{DOCUMENT_ROOT}/www1%{REQUEST_URI} -f [OR]
RewriteCond %{DOCUMENT_ROOT}/www1%{REQUEST_URI} -d 

# Do the route to /www1/
RewriteRule !^/?www1 /www1%{REQUEST_URI} [L]

# for www2.site.com
RewriteCond %{HTTP_HOST} www2.site.com [NC]

# check that the request needs to be routed (ajax/cdn don't need to be routed)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# check that we get routed to an existing file or directory
RewriteCond %{DOCUMENT_ROOT}/www2%{REQUEST_URI} -f [OR]
RewriteCond %{DOCUMENT_ROOT}/www2%{REQUEST_URI} -d 

# Do the route to /www2/
RewriteRule !^/?www2 /www2%{REQUEST_URI} [L] 
```

第一项检查是确定请求所针对的主机名。第二个检查是请求不是针对现有资源的。如果请求是 for`/ajax/myfileajax.php`我们不需要做任何路由如果该文件存在于 /ajax/ 目录中。第三项检查是确保如果我们路由，我们会将 URI 指向现有资源。这个位只是为了让 404 错误报告请求的 URI，而不是`/www1/`前面附加的 URI。换句话说，除非那里有东西，否则不要路由，否则让它像平常一样只是 404。

# c# - 这个图标是什么以及如何摆脱它

> ID：11785370
> 
> 赞同：5
> 
> 时间：2012-08-02T20:38:01.797
> 
> 标签：c#, visual-studio-2008, visual-studio-2008-sp1

我在 Visual Studio 2008 编辑器中，不知何故设法在调试列中放置了一个图标，但我根本不知道它是什么或如何删除它？

![在此处输入图像描述](../Images/7ff865b8de5d98f420054f423d97602f.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T20:50:13.193

这是一个任务列表快捷方式，通过（编辑->书签->添加任务列表快捷方式）添加。通过转到箭头所在的行并继续（编辑->书签->删除任务列表快捷方式）将其删除。这应该是所有需要做的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T20:50:33.677

这个图标是链接到这个地方的任务。Ctrl W + T 将显示所有任务。删除该任务快捷方式。

# javascript - How do you debug a request

> ID：11785375
> 
> 赞同：0
> 
> 时间：2012-08-02T20:38:19.173
> 
> 标签：javascript, google-maps, xmlhttprequest, status

How do you debug a request? Like the code below. This is javascript. And I am running through firebug. But I never get anything on

```
 if (status == google.maps.GeocoderStatus.OK) 
```

To check the status. So the call goes out. And nothing back. How can someone debug this? Is there some other way to get an error code?

thank you

```
function codeAddress() {
  geocoder = new google.maps.Geocoder();
  service = new google.maps.DistanceMatrixService();
    var address = document.getElementById("storeAddress").value;
    geocoder.geocode( { 'address': address}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        storeGeo = results[0].geometry.location;

      } else {
        alert("Geocode was not successful for the following reason: " + status);
      }
    });
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T23:55:15.767

您可以使用wireshark 检查请求是否发送到接口，或者您可以将GET-URL 字符串XESSION_XDEBUG_START 附加到url。

# c - 使用读/写锁时操作系统崩溃

> ID：11785379
> 
> 赞同：1
> 
> 时间：2012-08-02T20:38:36.583
> 
> 标签：c, unix, process, scheduling, freebsd

操作系统：Oracle VM Virtual Box 上的 FreeBSD 8.2

我正在尝试测试尝试获取读锁的进程是否会被阻止，直到它能够获取它。在 Process #1 中初始化`rw_lock`并作为写入者锁定锁之后，我创建了第二个进程，该进程尝试使用阻塞作为读取者获取锁`rw_rlock()`。我想要的是让进程#2 被阻塞，直到进程#1 释放写锁，所以我试图使用暂停来确保进程#2 有足够的时间来安排。然而，在这种情况下，同样的暂停会以某种方式使系统崩溃，因为如果将其删除，程序运行良好。如果我用进程#1 中的繁忙循环替换暂停，进程#2 在进程#1 完成之前不会被安排，因此它会破坏测试的重点。`DELAY()`也不允许安排进程#2。任何指针将不胜感激。

过程#1：

```
static void test_rw_rlock(void)
{ 
    const int seconds = 1;
    rw_init(pResourceLock, "RWLock");
    rw_wlock(pResourceLock);
    kproc_create(&use_rw_rlock, NULL, NULL, 0, 0, "use_rw_rlock()");
    pause("---", hz * seconds);
    rw_wunlock(pResourceLock);
    rw_destroy(pResourceLock);
} 
```

过程#2：

```
static void use_rw_rlock(void* arg)
{
    rw_rlock(pResourceLock);
    rw_unlock(pResourceLock);
    kproc_exit(0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T06:09:53.973

在持有 rw 锁的同时睡觉是禁忌。

# android - overriding writeStreamHeader() to append serialized objects to a single file

> ID：11785380
> 
> 赞同：0
> 
> 时间：2012-08-02T20:38:39.307
> 
> 标签：android, object, serialization, append

I know there have been a couple questions asked/answered on this topic but I need more specific help as this is my first time attempting something like this. I have tried to implement the answers to those questions and am still having errors. I need to write a dynamic amount of serialized objects to a file and then read from that file to retrieve the objects. I'm working in android FYI.

Here's my write() and overridden writeStreamHeader():

```
//check and see if there is a file already created to hold patterns, if not, make one
//only created once or if file is deleted; append to it if it's already created
    if(!new File(getFilesDir()+"/Patterns").exists())
        {
            try {
                fos = new FileOutputStream(getFilesDir()+FILENAME, true);
                out = new ObjectOutputStream(fos);
                 } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            }
        }
        else
        {
        try {
            out = new AppendingObjectOutputStream(fos);
            } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            }
         }

        //create a pattern of points. Max amount of Patterns is 100.
                    if(patternindex!=100)
                    { 
                        Patterns[patternindex] = new Pattern(ActivePoints, name, xshift, yshift, scaling, rotation);
                        try {
                            //out.reset();
                            out.writeObject(Patterns[patternindex]); //write the object
                            //out.close();
                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                        patternindex++;
                        dialog.dismiss();
                    }

public class AppendingObjectOutputStream extends ObjectOutputStream {

      public AppendingObjectOutputStream(OutputStream out) throws IOException {
        super(out);
      }
      @Override
      protected void writeStreamHeader() throws IOException {
          out.reset();
        // do not write a header
      }

    } 
```

I check to see if that file exists (it does because I've run this code) and then my writeObject() crashes the program with a NULLPointerException after creating the "special" ObjectOutputStream.

Here is my deserializing/read:

```
String PatternNames[] = new String[2];
Pattern Patterns[] = new Pattern[2];
FileInputStream fis;
ObjectInputStream in;

try {
            fis = new FileInputStream(getFilesDir()+"/Patterns");
            in = new ObjectInputStream(fis);

            for(int i=0;i<2;i++)//just trying to read 2 objects to start with
            {
                {
                    Patterns[i] = (Pattern) in.readObject();
                    PatternNames[i] = Patterns[i].getName();
                }

            }
            in.close();
        } catch (ClassNotFoundException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
                } 
```

Any help is greatly appreciated as I have spent a fair amount of time trying to figure this out. I know there have been people who have got this whole thing to work. As a side note, I have gotten serialize/deserialize working with one object saved to a different file but this is mostly useless given my project requirements.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T09:50:26.473

您只是`fos`在文件不存在的情况下进行构建。在这两种情况下都需要它。

# java - Lining text into columns within a JScrollPane

> ID：11785382
> 
> 赞同：1
> 
> 时间：2012-08-02T20:38:40.347
> 
> 标签：java, swing, jscrollpane, text-alignment

My program is a simple game where you are trying to figure out a random 5 letter word by guessing words and being told how many letters are the same (spin off of Jotto). Previous guesses and results are displayed in a JScrollPane. I am trying to get them to line up in columns. When the guess number gets into double digits everything shifts a character.

![enter image description here](../Images/c19a072623755751a455c13001aa1fb3.png)

I am using a mono-space font and String.format() to try and pad the right number spaces between columns but it seems to be making the spaces smaller than other characters still. When printed to the command line it works fine and there the field width is actually 17 characters long instead of 10 or however many are in the picture.

```
scroll.setFont(new Font(Font.MONOSPACED, Font.PLAIN, 12));
....
guessList.add(0, String.format("%-17s" + result, numGuesses + ":" )); 
```

Here guessList is a JList that is in the JScrollPane. I don't think that it could be causing the problem, but it is part of it.

I am considering switching to a JTable, but I think this should work and if not I would like to know why.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:16:53.593

在没有看到太多代码的情况下，我假设您正在（在您的代码中`JScrollPane`命名`scroll`）上设置字体，这不会渗透到您的`JList`（在您的代码中命名`guessList`）。尝试改用这个：

```
guessList.setFont(new Font(Font.MONOSPACED, Font.PLAIN, 12)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T21:27:25.640

使用带有 HTML 的 JTextPane：

```
JTextPane jtp = new JTextPane();
jtp.setContentType("text/html"); 
```

并在每次插入中，再次绘制整个表格：

```
jtp.setText("");
jtp.append("<html><table>");
jtp.append("<tr><td>header1</td><td>header2</td><td>header3</td><td>header4</td></tr>");
for(String line : lines)
    jtp.append("<tr><td> field1 </td><td> field2 </td><td> field3 </td><td> field4 </td></tr>");
jtp.append("</table></html>"); 
```

# clojure - Unrolling multiple arguments as keywords

> ID：11785388
> 
> 赞同：3
> 
> 时间：2012-08-02T20:39:06.000
> 
> 标签：clojure

I have this function which in a xml structure gives me the id of a parent node.

```
(ns foo.core
  (:require [clojure.data.zip.xml :as cdzx]))

(defn id-of-parent [zipper child-id node1 node2 node3 node4]
  (cdzx/xml-> zipper node1 node2 node3 node4
    (cdzx/attr= :Id child-id) zip/up zip/up (cdzx/attr :Id))) 
```

It would be called like

```
(id-of-parent zipper child-id :Foos :Foo :Bars :Bar) 
```

I would now like to make this function more general by replacing the four "node" with a simple "& path" so I can use any number of nodes to set a path.

```
(defn id-of-parent [zipper child-id & path]
  (cdzx/xml-> zipper ????path????
    (cdzx/attr= :Id child-id) zip/up zip/up (cdzx/attr :Id))) 
```

What is the proper way of unrolling the sequence of keywords to single keywords?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T20:57:37.127

syntax-quote 函数的[unquote-splicing 特性](http://clojure.org/reader)几乎总是用于构建宏中的函数调用，尽管它恰好适合构建一般的函数调用。

```
(defn id-of-parent [zipper child-id & path]
        (apply cdzx/xml-> `(~zipper ~@path
          ~(cdzx/attr= :Id child-id) ~zip/up ~zip/up ~(cdzx/attr :Id)))) 
```

因为[xml->](http://clojure.github.com/data.zip/index.html#clojure.data.zip.xml/xml-%3E)是一个函数而不是一个宏，所以您可以使用 apply 构建对它的调用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T06:21:36.990

您可以使用`apply`.

```
(defn id-of-parent
  [zipper child-id & path]
  (->> [(cdzx/attr= :Id child-id) zip/up zip/up (cdzx/attr :Id)]
    (concat path)
    (apply cdzx/xml-> zipper))) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T06:32:01.817

应用可以像这样使用：

```
(defn id-of-parent
  [zipper child-id & path]
  (let [pred [path (cdzx/attr= :Id child-id) zip/up zip/up (cdzx/attr :Id)]]
    (apply cdzx/xml-> zipper (flatten pred)))) 
```

# c# - RTF Viewer in asp.net

> ID：11785392
> 
> 赞同：0
> 
> 时间：2012-08-02T20:39:22.197
> 
> 标签：c#, asp.net, web-applications

I need to know how to view a .RTF file content in a webpage . In Winform it's have a RichTextBox to display the contents But How to achieve this in Webforms . Any One Know this Issue .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T20:44:02.573

如果 jQuery 适合您的开发模型，那么有几个 RTF jQuery 模块。CKEditor 是我们使用的一个。

[CKEditor RTF 控件](http://ckeditor.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T08:25:12.860

您也可以尝试在 codeplex 上找到的[RTE](http://rte.codeplex.com/)

可以在[此处找到它的实际演示](http://rteditor.members.winisp.net/)

# .net - 我对 WebAPI 的发布操作的参数始终为空

> ID：11785394
> 
> 赞同：2
> 
> 时间：2012-08-02T20:39:34.037
> 
> 标签：.net, json, f#, asp.net-web-api

我有一个 F# WebAPI 项目，由于某种原因，Post 方法的参数始终设置为 null。

（名字都是匿名的）

这是控制器：

```
type TestController() =
    inherit ApiController()
    member x.Get () =
        getValues ()

    member x.Post ([<FromBody>] values: Values) =
        storeValues values 
```

记录`Values`是这样定义的：

```
type TypeA = {
    Id: string
    ....
    }

....

type Values = {
    AValues: list<TypeA>
    BValues: list<TypeB>
    CValues: list<TypeC>
    } 
```

在我看来，我对 API 进行 POST 调用，如下所示：

```
 return $.ajax({
            type: "POST",
            url: url,
            data: JSON.stringify(params),
            contentType: "application/json",
            beforeSend: function (jqXHR) { jqXHR.setRequestHeader("X-HTTP-Method", type); }
        }); 
```

从哪里`data`出来：

```
{
    "AValues":[{"Id":"blahblah", ....}],
    "BValues":[...],
    "CValues":[...]
} 
```

我更新了 JS 以使`data`评估为：

```
{
    "Values":
    {
        "AValues":[{"Id":"blahblah", ....}],
        "BValues":[...],
        "CValues":[...]
    }
} 
```

现在调试器抛出一个空引用异常并说请求为空（断点在我的记录定义上）。

问题是它确实命中了控制器中的 Post 方法，但`values`始终设置为 null。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T19:12:03.930

我将这个问题转发给了希望使用 F# 和 Web API 的[Ryan Riley](http://wizardsofsmart.net/)，他说如下：

> 即使您使成员可变，也不能将记录与默认模型绑定器一起使用，因为记录没有默认构造函数。F# 3.0 引入了允许以这种方式使用记录的 CLIMutableAttribute [1]。
> 
> [1] [http://blogs.msdn.com/b/fsharpteam/archive/2012/07/19/more-about-fsharp-3.0-language-features.aspx](http://blogs.msdn.com/b/fsharpteam/archive/2012/07/19/more-about-fsharp-3.0-language-features.aspx)

# django - 那个 django 应用程序有什么问题？

> ID：11785399
> 
> 赞同：-2
> 
> 时间：2012-08-02T20:39:55.223
> 
> 标签：django, tastypie

我正在关注该教程[http://thecodachi.blogspot.com/2012/03/django-tastypie-with-android-client.html](http://thecodachi.blogspot.com/2012/03/django-tastypie-with-android-client.html) 和[https://github.com/Mbosco/tastypie-api-example](https://github.com/Mbosco/tastypie-api-example)
我做了所有事情在教程中，但是，我收到错误“没有名为 recipe_resource.urls 的模块”，当我运行“localhost:8000/api/recipes/?format=json”时，您能帮我解决一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T20:59:34.440

在我的美味派实现中，我有类似以下内容：

```
from tastypie.api import Api
from recipes.api import RecipeResource

v1_api = Api(api_name='v1')
v1_api.register(RecipeResource())

urlpatterns += patterns('',
    (r'^api/', include(v1_api.urls)),
) 
```

也许，试试吧。即使它不能改善这种情况，无论如何你都会想这样做，因为否则你不能添加多个资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T14:13:30.293

尝试改变这一点

```
url(r'^api/', include('recipe_resource.urls')), 
```

有了这个：

```
url(r'^api/', include(recipe_resource.urls)), #without the simple quotes in the "include" parameter 
```

# php - 最新版本的 CakePHP 是否能够将大量数据从一个控制器发送到另一个控制器？

> ID：11785404
> 
> 赞同：0
> 
> 时间：2012-08-02T20:40:10.747
> 
> 标签：php, cakephp, variable-assignment

假设我在 CONTROLLER_0 呈现的视图中有一个表单（MY_FORM），它有更多的表单。MY_FORM 的动作由 CONTROLLER_1 处理。

如果我提交 MY_FORM 并且处理它的模型之一触发了一些验证错误，我会尝试重定向到我的原始视图/布局。

此重定向会将当前控制器从 CONTROLLER_1 切换到 CONTROLLER_0。

这是我的问题.. 我想将这些验证错误从一个控制器传递到另一个控制器，以便能够在对应的输入旁边打印它们。

这可以做到吗？如果不是这样，在保持应用程序的这种行为的同时，或者至少是外观如何？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T20:43:25.710

如果需要，您可以通过会话传递它。

```
$this->Session->write('validationErrors', $this->Model->validationErrors); 
```

然后在下一个控制器中读取

```
$this->Session->read('validationErrors'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T06:28:45.213

试试这个方法：

```
$this->redirect(array('controller'=>'test','action' => 'index','test'=>array(10,12))); 
```

要在其他控制器中获取此数据，您必须输入以下代码：

```
$data = $this->params->params['named']['test'];
pr($data); 
```

# iphone - 无法更新元视口标签

> ID：11785406
> 
> 赞同：0
> 
> 时间：2012-08-02T20:40:34.180
> 
> 标签：iphone, ipad, orientation, viewport

我正在尝试根据用户的设备和该设备的方向更新视口标签的内容属性。

我读取设备类型及其方向没有问题，因此我运行脚本以根据这些结果动态创建元标记。

我的问题是当用户将方向从横向更新为纵向（反之亦然）时，我无法更新内容属性。

我的目标是在这两个值之间交换：

//纵向 .setAttribute('content', 'width=device-width; maximum-scale=0.75; user-scalable=1;');

//横向 .setAttribute('content', 'width=device-width; maximum-scale=1.0; user-scalable=1;');

我已经广泛搜索了这个答案的解决方案。我希望有人知道这背后的诀窍。

**编辑**

我试图完成的工作应该使用 css 而不是使用元标记，就像 ceejayoz 在下面评论的那样，您可以使用媒体查询来做到这一点。

```
@media only screen and (orientation:portrait) { 
   // insert code here
} 
```

# php - 使用PHP，读取csv文件，有条件地输出到HTML

> ID：11785409
> 
> 赞同：1
> 
> 时间：2012-08-02T20:40:42.247
> 
> 标签：php, csv

我在网页上有一个简单的下拉框。其中包括美国的所有州。当用户选择一个州时，我想让一个 PHP 脚本只返回处于用户选择的州的公司（作为 HTML）。

我有一个 csv 文件，内容如下：

> stateId,company,contact,phone,when,addy1
> 3,abc Mining,George,555-555-1234,June 6 2012,"Bronx,NY"
> 2,xyz Mining,Fred,555-555-2345,June 7 2012, “西雅图，华盛顿”
> 0，我的公司，我，555-555-3456，2012 年 6 月 8 日，“尤金，OR”
> 3，你的公司，你，555-555-4567，2012 年 6 月 9 日，“布朗克斯，纽约”

不断地不断地......

使用上述方法，通过 HTML 表返回，仅返回 stateId = 3 的数据（或 csv 中的行）。

所以......我已经看到了很多使用 fgetcsv 的方法，但是我将如何完成上述问题呢？

我在想你会抓住下拉列表的选定索引值，将它作为条件传递，遍历每一行，只输出状态 id 为 3 的那些......

理想情况下，我想将它们输出到表格中，但列表或纯文本都可以。

对 PHP 来说相对较新（自从我看过它以来已经 10 多年了......） - 我真的很感谢你的帮助。

我知道......数据库会更容易 - 但我已经完全控制了 csv，并且暂时宁愿走这条路。

```
 <?php

echo "<table>\n";

$row = 0;
$handle = fopen("mycsvfile.csv", "r");

while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
    if ($row == 0) {
       // column line
        $num = count($data);
        echo "<thead>\n<tr>";
        $row++;
        for ($c=0; $c < $num; $c++) {
            echo "<th>" . $data[$c] . "</th>";
        }
        echo "</tr>\n</thead>\n\n<tbody>";
    } else {
        // non-header lines
        $num = count($data);
        echo "<tr>";
        $row++;
        for ($c=0; $c < $num; $c++) {
            echo "<td>" . $data[$c] . "</td>";
        }
        echo "</tr>\n";
    }
}
fclose($handle);

echo "</tbody>\n</table>";

?> 
```

在这一点之后我开始失去它......这只是输出所有数据 - 我仍然需要它通过变量仅显示用户选择的状态的数据，而不是输出未选择的其他状态的行。

我是否使用 strpos()、explode()、split()... 我是一个 dotNet 程序员，几乎没有 php 经验 - 我希望学习。这是我的第一个项目——所以放轻松！我不知道也没有使用过 php 函数/方法 - 所以我不熟悉它们。;)

我已经启动并运行了 XAMPP，所以我并不是完全没有希望。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:58:23.830

这就是我最终做的...

```
 <?php
   $selectedSt = $_GET["states"];// get method - should clean the data...
$row = 0;
$handle = fopen("mycsv.csv", "r");//open file
while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
    if ($row == 0) {//skip first row (headers)
                $row++;} 
                else {
        $stAbbrev = $data[0];
        if ($stAbbrev == $selectedSt){//show only selected state
            $num = count($data);
            $row++;
            for ($c=0; $c < $num; $c++) {
                if ($c==0){}
                else{
                    if ($data[$c]==""){}//if empty line
                    else{echo $data[$c]."<br />";}}}//write array item
                    echo "<br />";}}}//end it all with some white space
    fclose($handle);       
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T21:02:34.087

我将假设您的数据在一个数组中。如何做到这一点的练习留给读者。

```
$state_data = array( 
  array( 
    'id' => '3',
    'company' => 'abc mining',
    'contact' => 'George',
    'phone' => '555-555-1234',
    'when' => 'june 6 2012',
    'addy' => 'Bronx,NY' ),
  array(
    'id' => '2',
    'company' => 'xyz mining',
    'contact' => 'Fred',
    'phone' => '555-555-2345',
    'when' => 'june 7 2012',
    'addy' => 'Seattle,WA' ),

 ...

); 
```

然后我只需要过滤掉所有 ID 为 3 的子数组。

```
function filter_out( $var ) {
  return ('3' == $var['id']);
}

$my_states = array_filter( $state_data, "filter_out" ); 
```

最后，输出：

```
<table summary="state data">
<tr>
  <th>ID</th>
  <th>Company</th>
  <th>Contact</th>
  <th>Phone</th>
  <th>When</th>
  <th>Addy</th>
</tr>

<?php
foreach( $my_states as $my_state ) {
?>
<tr>
  <td><?php echo( $my_state['id'] ); ?></td>
  <td><?php echo( $my_state['company'] ); ?></td>
  <td><?php echo( $my_state['contact'] ); ?></td>
  <td><?php echo( $my_state['phone'] ); ?></td>
  <td><?php echo( $my_state['when'] ); ?></td>
  <td><?php echo( $my_state['addy'] ); ?></td>
</tr>
<?php } ?>

</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T20:59:49.360

您需要一个循环来逐行读取文件，如此[处](http://php.net/manual/en/function.fgetcsv.php)所述。在循环中，每一行都将作为包含字段值的数组返回。测试用户选择的 stateId，如果匹配，则将数组存储在另一个数组中。至于输出，再次循环，这次是通过结果数组，将 html 标记包装在您认为合适的每个元素周围，并将该标记连接成一个字符串。将此字符串发送给客户端。

# php - 上传照片/文件到服务器 PHP

> ID：11785411
> 
> 赞同：0
> 
> 时间：2012-08-02T20:40:47.127
> 
> 标签：php, ajax

我无法成功地将图像/文件上传到我的服务器。php如下：

```
//This is the directory where images will be saved
$uploadDir = "./";
$uploadFile = $uploadDir . basename( $_FILES['photo']['name']);

//Writes the photo to the server
if(move_uploaded_file($_FILES['photo']['tmp_name'], $uploadFile)){
    echo "The file has been uploaded successfully.";
} else {
    print_r($_FILES);
} 
```

我选择了这个脚本所在的目录，以确保在上传到最终目录之前的功能。我想上传照片，稍后会检查文件扩展名 - 但现在我至少需要上传功能才能工作。

我得到一个空数组返回。

** 编辑 ** 另外，`enctype="multipart/form-data"`在表单上启用，我通过 AJAX 提交它。

表格如下：

```
<form id="imageUploadForm" name="imageForm" enctype="multipart/form-data">
    <label for="photo" class="blogLabel">Upload an Image</label>
    <input type="file" name="photo" id="imageUpload" onChange="uploadImage();">
</form> 
```

我确实意识到我不应该使用“onChange”来提交表单。

提交表单的AJAX如下：

```
function uploadImage() {
    $.ajax({
        type:'POST', 
        url:'imageController.php', 
        data:$('#imageUploadForm').serialize(),
        success: function(responseSubmit) {
                alert(responseSubmit);
            }
     });
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T20:50:18.623

您**不能**像这样通过 ajax 上传文件。

这将导致**根本没有文件被上传**！

您只能执行常规表单提交，以按照您想要的方式将文件提交到服务器。

* * *

如评论中所示 - 您可以使用隐藏的 iframe 技巧将文件提交到服务器**，而无需使用 ajax**。

* * *

**或者** [你可以使用 XHR2](http://www.html5rocks.com/en/tutorials/file/xhr2/)

# c# - 在 C# 中设置管理权限

> ID：11785413
> 
> 赞同：0
> 
> 时间：2012-08-02T20:40:51.093
> 
> 标签：c#, .net, wmi, administrator

我一直在使用 WMI 编写许多脚本，其中很多脚本只有在我使用“以管理员身份运行”启动 Visual Studio 时才能工作。

有没有办法用.Net或其他方式以编程方式设置？

最终，这些脚本将作为 Unity3D 中的 .exe 运行，因此我需要在运行它们之前自动设置这些权限。理想情况下，我希望这一切都可以在 C# 中完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:26:14.563

这个问题在评论中得到了回答。唯一的方法是将清单文件添加到您的项目中，将您的应用所需的权限设置为管理权限。非常感谢 Peter Ritchie 和 DJ KRAZE！

# eclipse - 从 Perforce 导入项目并将其转换为 maven 项目后，自动完成和 ctrl+click 需要什么才能在 eclipse 中工作？

> ID：11785417
> 
> 赞同：2
> 
> 时间：2012-08-02T20:41:18.753
> 
> 标签：eclipse, maven, perforce

目前我已经强制我将我的项目导入到 eclipse 中。将我的项目导入 Eclipse 后，我右键单击该项目去配置并转换为 Maven 项目。完成所有这些之后，我没有自动完成代码的工作，也没有 ctrl+click 工作。

### 系统规格：

*   操作系统：Windows 7 x64
*   内存：8GB
*   CPU：英特尔酷睿 i5
*   硬盘：128GB 固态硬盘
*   Eclipse 版本：Juno 4.2 JavaEE
*   Maven m2e 版本：1.1.0
*   Perforce 版本：2012.2.486944

### 尝试修复

1.  我注意到，当我右键单击我的项目并希望转到 Java Build Path 时，它不存在。
2.  在我的右键菜单属性和构建器下，我只有“Maven Project Builder”
3.  我试图在文件中添加正确`<buildCommand>`的 java builder 和正确`<natures>`的`.project`。这并不能解决我的问题，但确实添加了我在 1 中看不到的 Java 构建路径。（下面是我未更改的 .project 文件）
4.  我已经导航到`.metadata>.plugins`并删除了`org.eclipse.jdt.core`Eclipse 重建它的索引。

### 尝试 ctrl+单击自动完成或右键单击>参考>工作区时收到错误

*资源不在 Java 项目的构建路径上*

### `.project`文件

```
 <?xml version="1.0" encoding="UTF-8"?>
    <projectDescription>
        <name>project</name>
        <comment></comment>
        <projects>
        </projects>
        <buildSpec>
            <buildCommand>
                <name>org.eclipse.m2e.core.maven2Builder</name>
                    <arguments>
                    </arguments>
            </buildCommand>
        </buildSpec>
        <natures>
            <nature>org.eclipse.m2e.core.maven2Nature</nature>
        </natures>
    </projectDescription> 
```

有没有我忽略的简单步骤，或者我忘记了做的步骤？关于这个问题的任何帮助都会很棒。

（**我已经搜索过与 ctrl+click 和自动完成相关的问题，但我发现的解决方案都没有帮助，而且似乎没有一个与 eclipse+perforce+maven 问题相匹配，但如果此主题已涵盖在另一个帖子*）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T18:27:04.810

好吧，这就是我所做并发现的。

我从 eclipse 4.2 EE 的新副本重新开始，并重新下载了我需要的所有插件：m2e 和 perforce

### 如果你有一个扁平的 Maven 项目

1.  从perforce导入项目，右键项目>配置>转换为Maven项目
2.  将平面项目转换为 Maven 项目索引了所有允许 ctrl+click/ctrl+space 功能的东西

### 如果你有一个多模块 Maven 项目

1.  使用 perforce 插件将项目签出到您的工作区
2.  将所述项目作为现有 Maven 项目导入
3.  Eclipse/Maven 将自动找到父目录下的所有 pom 并构建/索引您的工作区
4.  之后与上面相同的 ctrl+click/ctrl+space 功能应该可以工作

我的疏忽是我遇到问题的项目我没有意识到是一个多模块 maven 项目，并且从 perforce 导入它并尝试将父文件夹转换为 maven 项目并没有导致 maven 查看所有 pom父子目录。希望这可以帮助其他遇到此问题的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T20:48:09.763

我使用 Perforce+Maven+Eclipse 的方式是首先将我的项目作为 Maven 导入，然后通过将其链接到我的 perforce 存储库来右键单击项目 > `Team`> `Share Project`。如果我不从一开始就直接将其作为 Maven 项目导入，我发现 Eclipse 无法使用 Maven 正确管理项目。

# objective-c - 综合财产未保留

> ID：11785423
> 
> 赞同：0
> 
> 时间：2012-08-02T20:41:54.537
> 
> 标签：objective-c

我刚刚弄清楚为什么某些代码无法正常工作。我有以下内容：

```
@interface Client : NSObject {
    Connection *connection;
}

@property (retain) NSMutableDictionary *channels; 
```

其次是这个实现：

```
@implementation Client

@synthesize channels;

- (id)init
{
    self = [super init];
    if (self) {
         // do whatever I want
         NSMutableDictionary *dict = [[NSMutableDictionary alloc] init];
    }

    return self;
} 
```

知道为什么此类`channels`的构造函数中的内存地址为 0x0吗？`init`我一生都无法弄清楚为什么会发生这种情况。我肯定会调用那个构造函数，它应该合成属性，让我可以用它做任何我想做的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T20:47:03.023

除非您明确设置`channels`为一个值，否则它将保持`nil`. 也许您打算在您的`init`方法中执行以下操作？

```
if (self) {
     // do whatever I want
     channels = [[NSMutableDictionary alloc] init];
} 
```

另外两种设置频道的方法：

```
[self setChannels:[NSMutableDictionary dictionary]]; //These two lines...
self.channels = [NSMutableDictionary dictionary];    //...are equivalent. 
```

请注意，在这种情况下，因为我们正在使用您的`retain`访问器，所以我们使用 autoreleased`+dictionary`而不是`alloc`/ `init`，如果不使用 ARC 会泄漏。

当然，如果不使用ARC ，`channels`也必须正确发布：`-dealloc`

```
- (void)dealloc
{
    [channels release];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T20:47:07.413

它是 0x0，因为您从不将通道设置为任何内容。你至少需要做：

```
channels = [[NSMutableDictionary alloc] init]; 
```

然后在 dealloc 中你必须记住：

```
[channels release]; 
```

# ruby-on-rails - gitignored 文件到 Heroku

> ID：11785425
> 
> 赞同：1
> 
> 时间：2012-08-02T20:41:56.637
> 
> 标签：ruby-on-rails, heroku

我是一名 Rails 开发人员，正在努力熟悉 Heroku。

我没有将 config/environment.rb 添加到 git，因为每个环境的 environment.rb 可能不同。例如，ENV['RAILS_ENV'] = 'some_env' 应该在 environment.rb 中。

但是，Heroku 要求 environment.rb 在 git 中，以便我可以将其推送到 Heroku。

有没有办法将 environment.rb 复制到 Heroku 而不对其进行版本控制？

谢谢。

山姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T07:04:58.200

您总是希望保留 environment.rb 文件。您可以使用配置变量设置环境

`heroku config:add RAILS_ENV=some_env`

因此，您将配置存储在每个单独的应用程序中。您可以使用 ENV[] 从应用程序中读取任何配置变量

# javascript - 如何将 DOM 元素扩展为类（不使用 jQuery）

> ID：11785427
> 
> 赞同：5
> 
> 时间：2012-08-02T20:42:05.767
> 
> 标签：javascript, dom, prototype

> **可能重复：**
> [在 Javascript 中，您可以扩展 DOM 吗？](https://stackoverflow.com/questions/779880/in-javascript-can-you-extend-the-dom)

我正在尝试向元素添加方法和属性。它没有被列为全局类。我可以像这样扩展字符串：

```
String.prototype.dosomething = function { ... }; 
```

我尝试这样（它更大，这是基本的）：

```
function $id(str){
    this.element = document.getElementById(str); 
    return element;
}
var myElem = $id('myId'); // WORKS !!!
$id.prototype.dosomethig = function ( ... }; 
var myValue = $id('myId').dosomething(); // DOESN'T WORK !!! 
```

我尝试了其他方式，但它总是一样的，当我尝试扩展类时，它不起作用。有没有办法避免这种情况？我知道 jQuery 会这样做，但我想自己做 - 如果他们可以，我可以......对吗？

编辑：下面的代码已经在 Safari 和 Firefox 中运行......

```
Element.prototype.pos = function(){
    var curleft = this.offsetLeft;
    var curtop = this.offsetTop;
    var scrleft = this.scrollLeft;
    var scrtop = this.scrollTop;
    var pElement = pElementScr = this.offsetParent
    while(pElement){
        curleft += pElement.offsetLeft;
        curtop += pElement.offsetTop;
        pElement = pElement.offsetParent;
    }
    while(pElementScr){
        scrleft += pElementScr.scrollLeft;
        scrtop += pElementScr.scrollTop;
        pElementScr = pElementScr.offsetParent;
    }
    return {x:this.offsetLeft, y:this.offsetTop};
} 
```

它甚至给出了许多其他 div 内部的 div 的位置。在解决了我图书馆的许多其他问题后，我将尝试在 IE8 中进行测试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T20:45:50.463

在 Firefox 中，chrome 和 IE8+ 元素继承自，`Element.prototype`因此您必须执行以下操作：

```
Element.prototype.doSomething = function() {
    alert("hello");
}; 
```

扩展主机原型非常脆弱，不推荐，但如果你只是在玩玩应该没问题。主要原因是 DOM 规范没有指定原型实现，而只是接口，`elem.appendChild()`应该可以工作，它不必在某个原型中。

* * *

这：

```
function $id(str) {
    this.element = document.getElementById(str);
    return element;
} 
```

仅因为在没有任何对象上下文的情况下调用函数时引用全局对象的不良行为才`this`起作用（它应该只是在看到 时直接抛出错误`this`，尽管严格模式通过将其设置为来解决这个问题`undefined`）。您正在创建一个全局变量`element`（因为对全局对象的属性分配成为全局变量），然后返回全局变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T20:56:35.127

与其扩展 DOM 对象，不如像 jQuery 那样包装它。

```
var myLib = {
   addWrapper: function ( id ) {
      return new this.WrapperClass( document.getElementById( id ) );
   },
   WrapperClass: function ( element) {
      this.element = element;
   }
};
MyLib.WrapperClass.prototype.someMethod = function() {
   alert( this.element);
}

var wrappedElement = myLib.addWrapper( 'someid' );
wrappedElement.someMethod(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T20:52:40.480

```
$id('myId').dosomething() 
```

$id('myId') 是一个元素。

你在'Element'中没有一个叫做doSomething的函数，你在$id上有它，这是一个函数。实际上，当您将函数添加到函数时会发生什么，有可能吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T20:54:17.410

首先，扩展 DOM 通常（阅读：总是）是一个糟糕的选择。如果您想编写快速、跨浏览器的代码，则不应扩展 DOM 或其他本机对象（对象、字符串...）。扩展本机对象也可能导致与库等的兼容性问题。如果您想了解更多有关该主题的信息，我建议您查看这篇出色的博客文章： http: [//perfectionkills.com/whats-wrong-with -扩展-dom/](http://perfectionkills.com/whats-wrong-with-extending-the-dom/)

如果支持旧版本的 IE (IE6 && 7) 对您来说并不重要，那么这就是您想要的：

```
Element.prototype.doSomething = function () {
    // Your code here
}; 
```

在您的示例中，问题是 $id 返回一个元素。您的“doSomething”附加到函数 $id，而不是附加到它返回的元素。

这样做有效：

```
function $id(str){
    this.element = document.getElementById(str); 
    return this;
} 
```

# jquery - 我需要在图像顶部显示一个 div：hover on hover

> ID：11785431
> 
> 赞同：1
> 
> 时间：2012-08-02T20:42:25.863
> 
> 标签：jquery, css

```
 .vpbutton {padding:4px;background-color:#EFEFEF;}
    .userbox img{padding:8px;background-color:#EFEFEF;}
    .userbox img:hover{opacity:.2;}
    <div class="userbox">
    <img src='img.png' style='height:120px;width:120px;border:1px solid #e5e5e5;'>
    </div>
    <div class="hello"> Hello</div> 
```

`class="hello"`当有人将鼠标悬停在图像上方时，我试图让 div显示在图像的顶部。请问有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T21:00:22.460

当每个人都在回答时，我正在制作自己的 jsfiddle，也没有 javascript [http://jsfiddle.net/jCUNm/](http://jsfiddle.net/jCUNm/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T20:52:32.660

[http://jsfiddle.net/eXSzJ/](http://jsfiddle.net/eXSzJ/)

我不知道您是否想知道居中或：悬停，但这是如何使用 css

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T20:53:15.583

干得好：

[http://fiddle.jshell.net/HXRsX/9/](http://fiddle.jshell.net/HXRsX/9/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T20:54:18.077

您也可以使用带有百分比值的 css 来实现。

[http://jsfiddle.net/rh6qW/5/](http://jsfiddle.net/rh6qW/5/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-02T20:55:35.887

与 mouseover mouseout 有点相同：

[http://jsfiddle.net/wbrv5/](http://jsfiddle.net/wbrv5/)

```
<div class="userbox">
    <img src='img.png'>
    <div class="hello" style="display:none"> Hello</div>
</div>

$('.userbox img').mouseover(function() {
  $(".hello").show();
});

$('.userbox img').mouseout(function() {
  $(".hello").hide();
});

.vpbutton {padding:4px;background-color:#EFEFEF;}

.userbox {position:relative;} .userbox img{height:120px;width:120px;border:1px solid
#e5e5e5;padding:8px;background-color:#EFEFEF; } .userbox img:hover{opacity:.2;}

.hello { position:absolute; top:10px; left:10px; } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-02T21:10:03.247

这是我能做的最好的。唯一的限制是只能有一行文本。但是，您可以很容易地将其转换为做一些不同的事情，例如在内部生成一个占图像宽度 80% 的 div，并将该 div 居中以允许段落文本。

底部的 JSBin 示例。

**CSS**

```
 .vpbutton {
  padding:4px;
  background-color:#EFEFEF;
}
.userbox img{
  padding:8px;
  background-color:#EFEFEF;
  border:1px solid #e5e5e5;
}
.userbox img:hover{
  opacity:.2;
}
.hover-text {
  display:none;
  position:absolute;
}
.userbox img:hover ~ .hover-text {
  border:1px solid #000;
  top:0;
  left:0;
  display: block;

  text-align:center;

} 
```

**JS**

```
$(function() {
  $('img[rel="hover-text"]').each(function () {
    this$ = $(this)
    console.log((this$.outerWidth() - this$.innerWidth()))
    this$.parent().find('.hover-text').css({
      'margin': (this$.outerWidth(true) - this$.width())+'px',
      'top':0,
      'left':0,
      'height': (this$.height())+'px',
      'width': (this$.width())+'px',
      'line-height':(this$.height())+'px'
    })
  })
})() 
```

**HTML**

```
<div class="userbox">
    <img src='http://www.clonescriptsdb.com/scriptimages/inout-search-engine-google-like-search-engine-788.jpg' rel="hover-text">
    <div class="hover-text">asd</div>
</div> 
```

[http://jsbin.com/azuyol/13/edit](http://jsbin.com/azuyol/13/edit)

**更新**以正确考虑边距/填充/边框。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-02T20:49:53.473

如果我理解正确...当您将其悬停时，您希望 div 出现在图像顶部，对吗？

如果您的意思是如何显示/隐藏它，我可以想到两种方法。一个使用 css，另一个使用 jQuery。

**CSS：**

```
<a href="#" class="Anchor">
<img src='img.png' class="img">
<span class="Hello">hello</span>
</a>

a.anchor span.Hello {visibility:hidden;}
a.anchor:hover span.Hello {visibility:visible;} 
```

并使用一些定位（.Anchor 将是相对的，.Hello 绝对的，具有正确的 z-index）。

**jQuery：**

```
$(document).ready(function() {
   $('.img').mouseover(function(){
     $('span.Hello').show();
   });
}); 
```

如果您想知道居中部分，请澄清:)

# javascript - d3js柱形图，点击更改列数

> ID：11785437
> 
> 赞同：2
> 
> 时间：2012-08-02T20:43:20.503
> 
> 标签：javascript, charts, d3.js, transition, demo

我有一个柱形图，显示一段时间内的燃料使用情况。

初始视图按年份汇总（最多 10 列）。

单击一年的列时，视图应切换到月视图（12 列）。单击一个月的列时，视图应切换到每日视图（28-31 列）。

我可以让图表更新列数，并重绘数据。

当我试图让列缩小到 0，切换数据，然后增长到它们的新值时，我的问题就来了。

我可以让收缩工作，但是向新数据的过渡有点偏离。我觉得“成长”应该在回调中，但我一生都无法弄清楚。

代码和示例数据：[https ://gist.github.com/3240275](https://gist.github.com/3240275)

（我目前没有可演示的实时版本……抱歉）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T11:03:51.403

当您有顺序转换时，每个转换都应该延迟之前的转换持续时间之和。你这样做了吗？（抱歉 - 我无法访问链接）

# regex - 我可以通过哪些方式改进这个正则表达式？

> ID：11785438
> 
> 赞同：2
> 
> 时间：2012-08-02T20:43:21.667
> 
> 标签：regex, xcode, replace

我写了这个有效的正则表达式，但老实说，这就像 75% 的猜测。

目标是这样的：我在 Xcode 中有很多导入，如下所示：

```
#import <UIKit/UIKit.h>
#import "NSString+MultilineFontSize.h" 
```

我只想返回包含`+`. 整个源代码中还有很多行代码，包括`+`在其他上下文中。

现在，这将返回整个 Xcode 项目中所有正确的行。但是，如果我从谷歌搜索和在 Stack Overflow 中搜索正则表达式教程中学到了一件事，那就是有很多不同的方法来做事。我很想看到你们可以想出的所有不同方法，使其在潜在的欺骗或失误方面更有效或更防弹。

```
^\#import+.[\"]*+.(?:(?!\+).)*+.*[\"] 
```

提前感谢您的所有帮助。

**更新**

另外我想我会接受用最短字符串执行此操作的人的答案，而不会错过任何可能的恶搞。但再次感谢所有参与此学习体验的人。

**来自答案的资源**

这是 Dan Rasmussen 练习正则表达式的绝佳资源：[RegExr](http://regexr.com/?31ngl)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T20:52:42.757

我注意到的第一件事是您的`+`字符放错了位置：`t+.`匹配`t`一次或多次，然后是单个字符`.`。我假设您想匹配导入的结尾，然后是一个或多个任意字符：`import.+`

其次，`#`不需要逃避。

这是我想出的：`^#import\s+(.*\+.*)$`

`\s+`匹配一个或多个空白字符，因此您可以保证该行实际上以`#import`而不是`#importbutnotreally`其他任何内容开头。

我不熟悉 xcode 语法，但表达式的以下部分，简单地匹配其中*某处*`(.*\+.*)`带有`+`字符的任何字符串。这意味着可能会匹配无效的导入，但我正在假设您尝试匹配有效代码。如果不是，则需要对其进行修改以验证导入器语法。

 ** * *

PS 要测试您的表达式，请尝试[RegExr](http://regexr.com?31ngl)。您可以将鼠标悬停在字符上以检查它们的作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T21:12:29.953

```
sed 's:^#import \(.*[+].*\):\1:' FILE 
```

将显示

```
"NSString+MultilineFontSize.h" 
```

为您的样品。*

# sql - 使用 Sum() 和 Count() 的 MS Access SQL 查询给出不正确的结果

> ID：11785439
> 
> 赞同：2
> 
> 时间：2012-08-02T20:43:24.597
> 
> 标签：sql, ms-access-2007

我遇到了一个查询，它返回的结果与现实相去甚远（这不仅完全没有意义，而且我还可以使用过滤器计算正确的答案）。

我正在为工作构建一个 KPI 数据库，此查询按期间按员工返回 KPI。我有一个非常相似的查询，从中派生出这个查询，它按部门按周期返回 KPI，它给出了我使用电子表格计算的确切结果。我真的不知道这里会发生什么。`maintenances`基本上，我想将表格中的一些度量值相加，例如`temps_requete_min`, `temps_analyse_min`，`temps_maj_min`然后`temps_rap_min`创建一个小计并将这些度量值表示为小时（度量值以分钟为单位，因此除以 60）。

```
SELECT 
    [anal].[prenom] & " " & [anal].[nom] AS Analyste, 
    maint.periode, maint.annee, 
    Round(Sum(maint.temps_requete_min)/60,2) AS REQ, 
    Round(Sum(maint.temps_analyse_min)/60,2) AS ANA, 
    Round(Sum(maint.temps_maj_min)/60,2) AS MAJ, 
    Round(Sum(maint.temps_rap_min)/60,2) AS RAP,       
    Round((Sum(maint.temps_requete_min)+Sum(maint.temps_analyse_min)+Sum(maint.temps_maj_min)+Sum(maint.temps_rap_min))/60,2) AS STOTAL, 
    Count(maint.periode) AS Nombre, 
    a.description

FROM 
    rapports AS rap, 
    analyste AS anal, 
    maintenances AS maint, 
    per_annuelle, 
    annees AS a

WHERE 
    (((rap.id_anal_maint)=anal.id_analyste) And
    ((maint.id_fichier)=rap.id_rapport) And 
    ((maint.maint_effectuee)=True) And 
    ((maint.annee)=per_annuelle.annee) And
    ((per_annuelle.annee)=a.annees))

GROUP BY 
    [anal].[prenom] & " " & [anal].[nom], 
    maint.periode, 
    maint.annee, 
    a.description, 
    anal.id_analyste

ORDER BY 
    maint.annee, maint.periode; 
```

所有措施都比应有的水平高出许多数量级。我怀疑我的 Count() 是错误的，但我看不出总和会有什么问题：|

**编辑：**最后我想出了这个查询，它显示了我根据评论中给出的建议和提供的答案使用 Excel 计算的相同度量。非常感谢大家。然而，我想知道的是，为什么使用显式连接而不是隐式连接（`WHERE`PK 上的子句）会有所不同。

```
SELECT
    maintenances.periode,
    [analyste].[prenom] & " " & analyste.nom,
    Round(Sum(maintenances.temps_requete_min)/60,2) AS REQ,
    Round(Sum(maintenances.temps_analyse_min)/60,2) AS ANA, 
    Round(Sum(maintenances.temps_maj_min)/60,2) AS MAJ, 
    Round(Sum(maintenances.temps_rap_min)/60,2) AS RAP,
    Round((Sum(maintenances.temps_requete_min)+Sum(maintenances.temps_analyse_min)+Sum(maintenances.temps_maj_min)+Sum(maintenances.temps_rap_min))/60,2) AS STOTAL, 
    Count(maintenances.periode) AS Nombre

FROM 
    (maintenances INNER JOIN rapports ON maintenances.id_fichier = rapports.id_rapport)
    INNER JOIN analyste ON rapports.id_anal_maint = analyste.id_analyste

GROUP BY analyste.prenom, maintenances.periode 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T20:50:45.207

在这种情况下，问题通常是您的连接将多个维度组合在一起。您最终会跨两个或多个类别进行交叉产品。

解决方法是沿每个维度独立进行摘要。这意味着“from”子句包含带有分组依据的子查询，然后将它们连接在一起。group by 将从外部查询中消失。

这将建议有一个子查询，例如：

```
from (select maint.periode, maint.annee,
             Round(Sum(maint.temps_requete_min)/60,2) AS REQ, 
             Round(Sum(maint.temps_analyse_min)/60,2) AS ANA, 
             Round(Sum(maint.temps_maj_min)/60,2) AS MAJ, 
             Round(Sum(maint.temps_rap_min)/60,2) AS RAP,       
             Round((Sum(maint.temps_requete_min)+Sum(maint.temps_analyse_min) +Sum(maint.temps_maj_min)+Sum(maint.temps_rap_min))/60,2) AS STOTAL, 
             Count(maint.periode) AS Nombre, 
      from maintenances maint
      group by maint.periode, maint.annee
     ) m 
```

我说“例如”是因为没有表格的布局，很难确切地看出问题出在哪里以及确切的解决方案是什么。

# jmeter - 如何在 JMETER 分布式测试中让 Mac OS 成为从机

> ID：11785441
> 
> 赞同：1
> 
> 时间：2012-08-02T20:43:26.327
> 
> 标签：jmeter, stress-testing

我正在使用 Jmeter 执行分布式压力测试。我的实验室中有 5 台 Mac 和 2 台窗口机器。我尝试将 Mac 作为主机，将窗口机器作为从机并成功，但我只想使用 Mac 机器来执行此测试。我怎样才能使 MAC 作为从机。我浏览了许多论坛，但只发现有关 LINUX 和 Window 的讨论。他们提到在 Linux 中运行 jmeter-server 文件。我如何在 Mac 中执行相同的操作。

谢谢拉杰尼什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T22:13:52.543

OSX 是基于 Unix 的，与 Linux 相同。只需打开终端（在 /Applications/Utilities 中）并执行与 Linux 相同的操作。

# c# - 实体框架代码与同一类的第一个双重关系

> ID：11785445
> 
> 赞同：4
> 
> 时间：2012-08-02T20:43:54.067
> 
> 标签：c#, asp.net, .net, entity-framework

我有一个`Page`要与类似页面关联的类。每个关联都有关于该关联的附加信息。这是已定义为 a 表示的类`Page`。

```
public class Page {
    [Key]
    public virtual int Id { get; protected set; }
    [Required]
    [StringLength(32)]
    public virtual string Name { get; set; }
    [InverseProperty("Page")]
    public virtual ICollection<Association> Associations { get; set; }
} 
```

每个页面都可以与任意数量的其他页面相关联。这将被定义为源页面和目标页面。我不介意关联是单向的还是双向的，在我的特定场景中都是合理的（我更喜欢双向关联，很难）。这是关联类..

```
public class Association {
    [Key, Column(Order = 0)]
    public virtual int PageId { get; protected set; } // SOURCE
    [Required]
    public virtual Page Page { get; set; } // SOURCE
    [Key, Column(Order = 1)]
    public virtual int TargetId { get; protected set; } // TARGET
    [Required]
    public virtual Page Target { get; set; } // TARGET
    [Required]
    [StringLength(32)]
    public virtual string InformationAboutTheAssociation { get; set; }
} 
```

现在我有以下上下文......

```
public class DbCtx : DbContext {
    public DbSet<Association> Associations { get; set; }
    public DbSet<Page> Pages { get; set; }
} 
```

问题是 SQL Express 抱怨可能的循环引用（事实并非如此，但它是过度保护的）。如何解决为接受所描述的场景而生成的方案？

```
Introducing FOREIGN KEY constraint 'FK_dbo.Associations_dbo.Pages_TargetId' on table 'Associations' may cause cycles or multiple cascade paths. Specify ON DELETE NO ACTION or ON UPDATE NO ACTION, or modify other FOREIGN KEY constraints. 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T21:06:47.523

**回复**

做错误告诉你的事情。 **指定 ON DELETE NO ACTION 或 ON UPDATE NO ACTION**。由于您对同一实体有两个外键，并且默认情况下首先（可能）插入模型`on delete cascade`，因此您必须禁用此功能，因为当删除页面时，关联将尝试由第一个外键删除但会失败，因为第二个外键。

**修改3**

```
public class DbCtx : DbContext {
public DbSet<Association> Associations { get; set; }
public DbSet<Page> Pages { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder) {
        modelBuilder.Entity<Association>()
            .HasRequired(x => x.Page)
            .WithMany(x => x.Associations)
            .WillCascadeOnDelete(false);
    } 
```

}

我认为这应该有效。

**删除页面实体**

因为`on delete cascade`如果您尝试删除页面，则没有关联，如果您有依赖于要删除的页面实体的关联实体，它将失败。

*因此，当您要删除 Page 时，您必须首先删除引用该 Page 的所有关联*。从关联到页面，您有一个外部约束（实际上是其中两个）。只使用其中一个并保持一致（页面或目标）。

既然你问了这个问题，我只能得出结论，你并不真正了解 SQL 是如何工作的，所以如果你还阅读一本关于设计数据库和使用 SQL 的书会更好。

* * *

我没有在 EF 中首先使用代码，但考虑到实体关系图，Page 与 Association 有“一对多”，Association 与 Page 有两个“1 to 1”。

*这不是循环的吗，因为它看起来像是一个糟糕的设计。*

规范化数据库。

如果您要设计数据库（首先是数据库），则不需要页面和关联之间的“一对多”关系，因为您已经拥有从关联到页面的“一对一”关系（其中两个）。因此，如果您想查找知道 pagId 的特定关联，您可以拥有一个`select * from association where pageId or targetId = the id you are looking for`.

如果您首先将 EF 与数据库一起使用，您将有一个从页面到关联的反向引用（您在此处尝试执行的操作），但不会在数据库本身的实际实体关系模型中。它们是虚拟参考。

**编辑：**

我重读了这个问题，问题是协会对页面的第二次引用。这很奇怪，因为数据库首先在这种情况下可以正常工作。

我会仔细看看的。

# php - PDO 返回结果，存储和输出的最佳方式？

> ID：11785446
> 
> 赞同：0
> 
> 时间：2012-08-02T20:43:55.500
> 
> 标签：php, arrays, pdo

我希望从 PDO 返回一个数组，然后将结果输出到一个表中。

我目前不确定解决此问题的正确方法，因为 PDO 有许多不同的返回方法（fetch、fetchAll、PDO::FETCH_ASSOC），但仅举几例，所以请随时提出合适的建议。我目前正在使用 fetch() 和 PDO::FETCH_ASSOC。

我当前的标记返回多于两行，**我需要将它们输出到可视表中，只选择数组中返回的少数列以实际显示给用户**。

我尝试了一个 foreach 循环

```
 foreach ($object->getMethod() as $row) 
```

但是，这显然会输出所有内容，使用 $row['DB_COLUMN_NAME'] 也只会返回数据的第一个字母吗？

关于如何解决这个问题的任何建议？

**应用需求：** MVC风格的框架，控制器调用模型方法，传递变量进行数据库查询。模型返回数组（结果类型可供建议）。View 接收数组，需要遍历返回的行，将它们输出到可视表中（但只显示指定的列）

如果这是更好的方法，我也可以在控制器中创建一个新类。

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T21:03:20.183

答案取决于你。

*   与循环结合使用`fetch`来迭代行并一次处理每一行。
*   用于`fetchAll`将整个结果集转储到变量中（无论是数组还是对象）。

至于获取模式：

*   用于`PDO::FETCH_ASSOC`获取关联数组，以列名（或别名）作为键。
*   用于`PDO::FETCH_NUMERIC`获取没有列名但编号索引的数字数组。
*   用于`PDO::FETCH_BOTH`获取具有重复条目的数组，包括同一数组中的关联项和数字项。
*   用于`PDO::FETCH_OBJECT`将数据提取到对象中（应根据您期望的结果进行定制）。

您选择使用哪些取决于您的应用程序需求。我们无法为您提供帮助。

# gnuplot - 保持 Gnuplot 自动刷新窗口不活动

> ID：11785448
> 
> 赞同：12
> 
> 时间：2012-08-02T20:43:57.950
> 
> 标签：gnuplot

我正在运行一个简单的脚本，它从文件中读取数据并绘制它。我的问题是我重新读取并重新绘制数据，因为文件不断变化。每当我使用`refresh`绘图窗口时，它都会再次激活，我想阻止这种情况。我希望情节在后台更新。这可能吗？

我的示例脚本：

```
#!/usr/bin/gnuplot
set datafile separator ","
plot "data.dat" using 1:3
pause 1; refresh; reread; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-02T20:50:01.123

这取决于您使用的终端。 `wxt`，`x11`并`qt`支持一个`noraise`选项：

```
set term x11 1 noraise 
```

这应该允许它留在后台。

# iphone - 故事板多个按钮导致相同的转场

> ID：11785456
> 
> 赞同：4
> 
> 时间：2012-08-02T20:44:08.767
> 
> 标签：iphone, ios, uistoryboard, segue

我正在努力找出故事板，这一切看起来都很酷，但是无论按下哪个按钮，我都无法从一个带有几个按钮的屏幕移动到另一个屏幕。显然我可以控制每个按钮的拖动，但是我在故事板上到处都有转场，我觉得必须有更好的方法来做到这一点。我尝试突出显示所有按钮并控制拖动到下一个屏幕，但这只会导致我拖动的那个开始工作。

这是我现在可以使用的说明...

![这有效，但它是可怕的！](../Images/d34cb0b23f567df1b7e87d7d6b164494.png)

如果我必须坚持这一点，那就这样吧，但我最终会在一页上有 6 个按钮，在另一页上有 8 个按钮。那是很多事情。基本上每个按钮都表示用户的选择。该选择将导致在幕后发生不同的事情，但无论他们选择哪个按钮，他们都会移动到下一个屏幕。

**我试过的：**

*   突出显示所有按钮，然后拖动到下一个视图控制器。
    *   这失败了，因为它仅将 segue 连接到我在控制拖动时单击的按钮
*   拖出一个segue，然后从第二个按钮拖动到segue的圆形部分。
    *   这导致什么都没有发生。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T20:47:17.280

我不知道有一种方法可以在情节提要中为单个 segue 提供多个触发器，但是您可以创建具有特定标识符的单个 segue，然后让所有按钮响应一个`IBAction`调用`[self performSegueWithIdentifier:...]`;

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T20:48:39.840

查看与源视图控制器而不是 IBAction 相关联的通用 segue：

[https://stackoverflow.com/a/8868096/295130](https://stackoverflow.com/a/8868096/295130)

# python - sqlalchemy 自动加载的 orm 持久性

> ID：11785457
> 
> 赞同：7
> 
> 时间：2012-08-02T20:44:09.980
> 
> 标签：python, caching, orm, sqlalchemy, autoload

我们正在使用 sqlalchemy 的自动加载功能来进行列映射，以防止在我们的代码中进行硬编码。

```
class users(Base):
    __tablename__ = 'users'
    __table_args__ = {
        'autoload': True,
        'mysql_engine': 'InnoDB',
        'mysql_charset': 'utf8'
    } 
```

有没有办法序列化或缓存自动加载的元数据/orms，这样我们就不必每次需要从其他脚本/函数引用我们的 orm 类时都经过自动加载过程？

我看过烧杯缓存和泡菜，但如果可能或如何做，还没有找到明确的答案。

理想情况下，我们仅在已提交对数据库结构的更改但从所有其他脚本/函数引用我们的数据库映射的非自动加载/持久/缓存版本时才运行自动加载映射脚本，

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T13:37:11.203

我现在正在做的是在通过数据库连接（MySQL）运行反射之后对元数据进行腌制，一旦腌制可用，就使用腌制的元数据来反映模式，并将元数据绑定到 SQLite 引擎。

```
cachefile='orm.p'
dbfile='database'
engine_dev = create_engine(#db connect, echo=True)
engine_meta = create_engine('sqlite:///%s' % dbfile,echo=True)
Base = declarative_base()
Base.metadata.bind = engine_dev
metadata = MetaData(bind=engine_dev)

# load from pickle 
try:
    with open(cachefile, 'r') as cache:
        metadata2 = pickle.load(cache)
        metadata2.bind = engine_meta
        cache.close()
    class Users(Base):
        __table__ = Table('users', metadata2, autoload=True)

    print "ORM loaded from pickle"

# if no pickle, use reflect through database connection    
except:
    class Users(Base):
        __table__ = Table('users', metadata, autoload=True)

print "ORM through database autoload"

# create metapickle
metadata.create_all()
with open(cachefile, 'w') as cache:
    pickle.dump(metadata, cache)
    cache.close() 
```

如果这没问题（它有效）或有什么我可以改进的，有什么意见吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-29T07:16:15.430

我的解决方案与@user1572502 的解决方案没有太大不同，但可能有用。我将缓存的元数据文件放在 中`~/.sqlalchemy_cache`，但它们可以在任何地方。

```
 # assuming something like this:
Base = declarative_base(bind=engine)

metadata_pickle_filename = "mydb_metadata_cache.pickle"

# ------------------------------------------
# Load the cached metadata if it's available
# ------------------------------------------
# NOTE: delete the cached file if the database schema changes!!
cache_path = os.path.join(os.path.expanduser("~"), ".sqlalchemy_cache")
cached_metadata = None
if os.path.exists(cache_path):
    try:
        with open(os.path.join(cache_path, metadata_pickle_filename), 'rb') as cache_file:
            cached_metadata = pickle.load(file=cache_file)
    except IOError:
        # cache file not found - no problem
        pass
# ------------------------------------------

# -----------------------------
# Define database table classes
# -----------------------------
class MyTable(Base):
    if cached_metadata:
        __table__ = cached_metadata.tables['my_schema.my_table']
    else:
        __tablename__ = 'my_table'
        __table_args__ = {'autoload':True, 'schema':'my_schema'}

# ... continue for any other tables ...

# ----------------------------------------
# If no cached metadata was found, save it
# ----------------------------------------
if cached_metadata is None:
    # cache the metadata for future loading
    # - MUST DELETE IF THE DATABASE SCHEMA HAS CHANGED
    try:
        if not os.path.exists(cache_path):
            os.makedirs(cache_path)
        # make sure to open in binary mode - we're writing bytes, not str
        with open(os.path.join(cache_path, metadata_pickle_filename), 'wb') as cache_file:
            pickle.dump(Base.metadata, cache_file)
    except:
        # couldn't write the file for some reason
        pass 
```

**重要的提示！！**如果数据库架构发生更改，您必须删除缓存文件以强制代码自动加载并创建新缓存。如果不这样做，更改将反映在代码中。这是一件容易忘记的事情。

# javascript - 客户端数据存储

> ID：11785461
> 
> 赞同：1
> 
> 时间：2012-08-02T20:44:42.163
> 
> 标签：javascript, ruby-on-rails, ajax

我有以下情况：用户提交表单，我通过 Ajax 请求从服务器获取数据并显示图表。但是，我想让用户选择在提交表格后以表格形式显示图表中的数据或导出为 csv。

我想知道存储数据的最佳解决方案是什么，考虑到如果用户打开一个新窗口再次提交表单，我不希望数据持续存在。

该应用程序位于 Rails 中。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T20:51:55.987

你有几个选择：

Cookies LocalStorage SessionStorage

更多信息：[https ://developer.mozilla.org/en/DOM/Storage](https://developer.mozilla.org/en/DOM/Storage)

非标准：

window.name 可以存储从 1mb 到 10mb 的任意位置，具体取决于浏览器。这更像是一种黑客攻击，但相当稳定。您需要在此实现自己的访问器/设置器方法，其中 localStorage 和 sessionStorage 内置了 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T21:08:00.463

如果您的所有用户浏览器都支持它，我个人会推荐本地存储。

它使用起来非常简单，您可以使用这些方法访问它。

```
localStorage.getItem("Itemkey");
localStorage.setItem("Itemkey","value");
localStorage.removeItem("ItemKey"); 
```

它总是一个好方法，这意味着您可以为每个窗口分配一个不同的本地存储密钥，甚至在窗口关闭或卸载时删除项目！

作为参考，我发现这非常有用：[http ://diveintohtml5.info/storage.html](http://diveintohtml5.info/storage.html)

并将其与存储 JSON 对象 ( [http://www.json.org/js.html](http://www.json.org/js.html) ) 结合起来，您就有了一个非常快速、简单且易于使用的解决方案。或者甚至只存储一个字符串、数组或任何需要的东西。

# jqgrid - 在网格的 loadComplete 中设置单选按钮

> ID：11785470
> 
> 赞同：0
> 
> 时间：2012-08-02T20:45:26.017
> 
> 标签：jqgrid

```
 $("#addressList").jqGrid({
        url: '/Storage/Shipping/GetCustomerAddresses?q=2&Customerid=' + $("#saveCustomerID").val(),
        datatype: "Json",
        jsonReader: {
            root: "Data.rows",
            page: "Data.page",
            total: "Data.total",
            records: "Data.records",
            repeatitems: true,
            userdata: "userdata",
            cell: "cell"
        },
        colNames: ['', 'Line 1', 'Line 2', 'City', 'State'],
        colModel: [
                         { name: 'myradio', width: 30, fixed: true, align: 'center', resizable: false, sortable: false,
                             formatter: function (cellValue, option) {
                                 return '<input type="radio" name="radio_' + option.gid + '" />';
                             } 
                         },
                         { name: 'Line1', index: 'Line1', width: 250 },
                         { name: 'Line2', index: 'Line2', width: 250 },
                         { name: 'City', index: 'City', width: 210 },
                         { name: 'State', index: 'State', width: 75 }
                    ],
        page: 1,
        rowNum: 50,
        rowList: [20, 50, 100],
        pager: '#pager',
        viewrecords: true,
        grouping: false,
        caption: "Addresses",
        mtype: "POST",
        width: "100%",
        height: "100%",
        loadonce: true,
        sortable: false,
        beforeSelectRow: function (rowid, e) {
            var radio = $(e.target).closest('tr').find('input[type="radio"]');
            radio.attr('checked', 'checked');
            $("#saveCustomerAddressID").val(rowid.toString());
            return true; // allow row selection
        },
        loadComplete: function () {
            var grid_ids = $("#addressList").jqGrid('getDataIDs');
            for (var i = 0; i < grid_ids.length; i++) {
                if ($("#saveCustomerAddressID").val() == grid_ids[i]) {
                    {
                        $("#addressList").jqGrid('setSelection', grid_ids[i], true);

                    }
                }
            }
        }
        //, postdata: { CustomerID: $("#saveCustomerID").val() }
    }); 
```

上面的代码在 loadcomplete 中正确设置了选择。$("#saveCustomerAddressID").val() 是 JSON 数据的 rowid。单选按钮在 beforeSelectRow 中设置。我知道要设置的单选按钮的行号和网格列，但是如何设置单选按钮呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T03:04:23.430

如果你有行号和网格列，那应该不难。获取您拥有单选按钮的那一列的 id(css)（请查看开发人员工具）。现在让我们说单选按钮位于列名“Demo”中

所以我想id看起来像这样

```
var demo= $("'#'+rowid+'Demo'")//check developer tools for confirmation

demo.attr('checked', 'checked');
$("#saveCustomerAddressID").val(rowid.toString());//continue with you loadComplete code 
```

并且对于设置选择使用 jqgrid 的 setSelection 方法，然后继续使用您的 loadcomplete 代码

# python - SVN Propset 与 Python 脚本

> ID：11785476
> 
> 赞同：1
> 
> 时间：2012-08-02T20:46:05.163
> 
> 标签：python, windows, svn, svn-externals

我正在使用 python 脚本自动创建项目。我可以在 python 中创建存储库、签出、提交和导入目录。

它似乎不会做的是设置`svn:externals`属性。我可以从命令行设置它，但是当我尝试使用 a 运行命令时`subprocess.call`它不起作用。

这是命令行（在签出的项目目录中有效）：

```
svn propset svn:externals "trunk/Source/Interactive/Flash.Externals https://server/svn/proj/" . 
```

这是脚本调用（在检查 repo 后运行`gv.project_repo_dir`）：

```
# gv is a global variables object
odir = getcwd()
chdir(getcwd() + '/' + gv.project_repo_dir)
res = call(['svn', 'propset', 'svn:externals',                                                \
            '"'+ gv.interactive_subpath +'Flash.Externals '+ gv.mirror_project_repo_url +'"', \
            '.'])
chdir(odir) 
```

这是脚本运行的错误：

```
svn: Error parsing svn:externals property on '.': '"trunk/Source/Interactive/Flash.Externals https://server/svn/proj/"' 
```

我已经尝试将其`shell=True`作为参数`call`和不使用；没有骰子。

有任何想法吗？

**统计：**

*   蟒蛇 2.7
*   视窗服务器 2003
*   视觉SVN

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T22:25:53.680

我建议查看 pysvn 模块与通过命令行进行对比：

[http://pysvn.tigris.org/](http://pysvn.tigris.org/)

但是如果你必须通过命令行来做，你可以使用 os.system 调用而不是子进程吗？

```
os.system('svn propset svn:externals "trunk/Source/Interactive/Flash.Externals https://server/svn/proj/" . ') 
```

应该“作为 shell”运行，你只是无法从中获得反馈 - 它会运行命令并等待命令完成。

那，或者您可以尝试分解命令（不是 100% 确定这是否适用于 Windows，但非常确定）：

```
import shlex
commands = shlex.split('svn propset svn:externals "trunk/Source/Interactive/Flash.Externals https://server/svn/proj/" .')
subprocess.call(commands) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T21:20:26.203

我不知道我是否购买了“它不适用于 shell=True”的声明。该错误表明它将双引号解释为文字，因为它试图`"trunk/Source/Interactive/Flash.Externals https://server/svn/proj/"`用作 execvp 参数之一。双引号仅对 shell 具有特殊含义。

例子：

```
>>> subprocess.call(["ls", '"."'], shell=False)
ls: ".": No such file or directory
2 
```

使用 shell=True：

```
>>> subprocess.call(["ls", '"."'], shell=True)
metrics_poller.sock  OSL_PIPE_0_SingleOfficeIPC_b919ef148f655fcebc4bf633c062a098  sv9hg.tmp
metrics.sock         proc_mgr_stats                                               userinstall.mBa793
mysql_tzinfo_stderr  sess_716518f985ab8de017981347a8b61c611c9880bd                userinstall.omY802 
```

如果 shell=True 变体确实没有帮助，请尝试删除双引号。

```
res = call(['svn', 'propset', 'svn:externals',                                                \
            gv.interactive_subpath +'Flash.Externals '+ gv.mirror_project_repo_url, \
            '.']) 
```

# coffeescript - 圆圈未显示在 OpenLayers 中

> ID：11785478
> 
> 赞同：0
> 
> 时间：2012-08-02T20:46:06.830
> 
> 标签：coffeescript, openlayers

对 OpenLayers 来说非常新，并试图在地图上围绕点击的原点画一个圆圈。我有这个代码 -

```
circleLayer = new OpenLayers.Layer.Vector "Circle Search"
circle = new OpenLayers.Geometry.Polygon.createRegularPolygon(
  new OpenLayers.Geometry.Point(lat,lon),
  100,
  30
  )
console.log(circle)
feature = new OpenLayers.Feature.Vector(circle)
circleLayer.addFeatures(feature)
mapApp.map.openLayersMap.addLayer circleLayer 
```

但是圆圈没有出现，我不知道为什么。谁能告诉我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T08:52:44.470

您是否将您的纬度转换为地图使用的投影？

测试：尝试使用 0,0 表示 lon,lat 和更大的圆圈，看看它是否出现在非洲中东部海岸附近。

如果这是问题所在，那么这就是你如何进行转换：

在顶部添加：

```
 projLatLon = new OpenLayers.Projection("EPSG:4326"), // transform from WGS 1984
 projMap = new OpenLayers.Projection("EPSG:900913") // to Spherical Mercator Projection 
```

那么示例代码的第三行变为：

```
 new OpenLayers.Geometry.Point(lat,lon).transform(projLatLon,projMap), 
```

# jquery - jquery在同一选项上选择更改事件

> ID：11785479
> 
> 赞同：3
> 
> 时间：2012-08-02T20:46:09.803
> 
> 标签：jquery

这是我的简单代码：

```
$(".test").change(function(){
    alert("user clicked");
});

<select class="test">
    <option value="1">test1</option>
    <option value="2">test2</option>
</select> 
```

这一切都很简单且有效，但我希望不仅在用户更改选项时调用该函数，而且当他单击已选择的相同选项时，我已经尝试过`click`事件，但它在用户甚至单击任何之前被触发选项，我能做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T21:31:44.830

在铬中不起作用。

```
$(".test option").click(function(e){
    console.log('click');
}); 
```

更新了你的小提琴。

点击选项

编辑：看起来没有一堆工作是不可能的，比如使用点击选择并比较它被点击的位置或类似的东西。

我不确定最终目标是什么，但是如果您可以在他们最初点击选择时多做一次处理，那么点击选择可能会起作用。

[关于它的另一篇文章：](https://stackoverflow.com/questions/1402227/jquery-click-event-on-select-option-element-in-chrome)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-11T15:34:07.540

如果您的意思是选择中只有一件事（就像我遇到的问题一样），您可以创建一个默认的禁用选项，并将其设置为选中。这意味着如果您有一个选项，onchange 将触发，因为禁用的是先前选择的选项：

```
<option disabled selecte>Select an option</option>
<option> Only Option </option> 
```

# php - 使用 jquery ajax 从自动完成获取结果

> ID：11785481
> 
> 赞同：0
> 
> 时间：2012-08-02T20:46:20.883
> 
> 标签：php, jquery, ajax

我正在使用 jQuery 自动完成功能，并希望从名为**some.php**的 php 文件中检索数据，其中仅写入

```
<?php
echo "Hello World";
?> 
```

这是javascript

```
<script type="text/javascript">
$(function(){
    $("#key").autocomplete({
        source: function(){
            $.ajax({
                type: "POST",
                url: "./some.php",
                data: {key: $("#key").val()},
                success: function(result){
                    // what code is needed here to be placed
                }
            });
        }
    });
});
</script> 
```

顺便说一下 html =>

```
<input type="text" name="key" id="key"> 
```

我认为脚本编写正确，因为当我在**成功函数警报（结果）**中编写时，它得到“Hello world”，但我希望它在下拉框中，如何解决这个问题，请帮助我，谢谢： )

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T20:57:12.677

```
$("#key").autocomplete({
    source: function(request, response){
        $.ajax({
            type: "POST",
            url: "./some.php",
            data: {key: request.term},
            success: function(result){

                response(result);
            }
        });
    }
}); 
```

`response(result)`将显示自动完成菜单——`result`应该是一个项目数组（其中每个项目是一个字符串或一个带有`value`或`label`键的对象）。

正如 SJ GJ 所提到的，您可以简单地设置`source: "./some.php"`，但`some.php`需要进行修改以接受请求参数`term`并返回一个 json 项目数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T20:57:03.957

尝试这个：

**JS：**

```
<script type="text/javascript">
$(function(){
    $("#key").autocomplete({
        source: "./some.php"
    });
});
</script> 
```

**PHP：**

```
$result = array('1' => 'Hello World');

echo json_encode($result); 
```

# scala - 在激活框架查询中使用 OR

> ID：11785483
> 
> 赞同：1
> 
> 时间：2012-08-02T20:46:22.710
> 
> 标签：scala

在激活框架上查询“AND”听起来很简单，“，”使“AND”工作

```
transactional {
    val personList2 = allWhere[NaturalPerson](_.name :== "Test", _.motherName :== "Mother")
} 
```

我想知道OR是如何制作的。一个例子会很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T20:54:46.233

查看框架附带的测试套件。这是一个示例测试，取自[`QuerySpecs.scala`](https://github.com/fwbrasil/activate/blob/master/activate-tests/src/test/scala/net/fwbrasil/activate/statement/query/QuerySpecs.scala)：

```
"support query with or" in {
  activateTest(
    (step: StepExecutor) => {
      import step.ctx._
      step {
        newFullActivateTestEntity
        newEmptyActivateTestEntity
      }
      step {
        query {
          (e: ActivateTestEntity) =>
            where(    (e.booleanValue :== true)
                  :|| (e.booleanValue :== false)
                  :|| (e.booleanValue isNull)) select (e)
        }.size must beEqualTo(3)

        query {
          (e: ActivateTestEntity) =>
            where(     (e.booleanValue :== true)
                   :|| (e.charValue :== fullCharValue)) select (e)
        }.size must beEqualTo(1)
      }
    })
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T20:12:20.823

您可以将 OR 与 allWhere 一起使用。请注意，您必须使用括号。

```
allWhere[NaturalPerson](p => (p.name :== "Test") :|| (p.motherName :== "Mother")) 
```

或者您可以使用完整的查询表：

```
query {
    (p: NaturalPerson) => where((p.name :== "Test") :|| (p.motherName :== "Mother")) select(p)
} 
```

# fortran - FORTRAN 如何在 DO 循环中读取行时跳过一行？

> ID：11785485
> 
> 赞同：1
> 
> 时间：2012-08-02T20:46:28.063
> 
> 标签：fortran, fortran90

我正在尝试使用 DO 逐行读取文件并读取以操作各个行。但是，无论我看到什么我不想要的东西，我都会尝试跳过一行。

这是我到目前为止所拥有的：

```
DO J=1,10000
  READ(1,'(A150)') ROW
  IF (J==A(1)+1 .AND. ROW(17:17)=='|') THEN
    WRITE(2, '(A)') ROW(1:12) // ROW(15:150)
  ELSEIF (J>A(1) .AND. J<A(2) .AND. ROW(1:1)=='#') THEN
  ! Here's where I need to skip J and go onto J+1 and then continue the DO loop from there
  END IF
END DO 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T20:51:41.850

使用`CYCLE`：

```
DO J=1,10000
  READ(1,'(A150)') ROW
  IF ((J==A(1)+1) .AND. (ROW(17:17).EQ.'|')) THEN
    WRITE(2, '(A)') ROW(1:12) // ROW(15:150)
  ELSEIF (J.GT.A(1) .AND. J.LT.A(2) .AND. ROW(1:1)=='#') THEN
    CYCLE
  END IF
  ! More statements here
END DO 
```

正如 Hristo 所指出的，`CYCLE`只有在`IF ... END IF`.

# php - 蛋糕控制台 2.2.1：烘焙错误

> ID：11785486
> 
> 赞同：3
> 
> 时间：2012-08-02T20:46:38.183
> 
> 标签：php, cakephp, cakephp-2.1, cakephp-bake

运行 MAMP 的 OSX 机器。CakePHP 2.2.1 已正确安装和配置（这意味着当我浏览到 Index.php 文件时，我看到所有绿色条，我已经完成了博客教程，并且正在开发我的第二个应用程序，其中脚手架已启动并运行）。现在我第一次尝试烘焙。

根据食谱（和其他人），我将蛋糕的新副本安装到目录（我的用户目录）中，然后将路径变量放在我的 .bash_profile 文件中 `export PATH="$PATH:/Users/p_scott/cake221/app/Console"` ，之后我可以进入终端，键入 `cake`并让控制台出现向上。您可以看到，到目前为止，我一直在从 app 目录调用控制台。

我首先尝试`cake bake`使用 -app 参数从终端运行并指定我的练习应用程序的路径。我第一次这样做时，我得到了以下

```
 Welcome to CakePHP v2.2.1 Console
    -------------
    App : app
    Path: /Applications/MAMP/htdocs/blog/app/
    ------------- 
    Interactive Bake Shell
    --------------- 
    [D]atabase Configuration
    [M]odel
    [V]iew
    [C]ontroller
    [P]roject
    [F]ixture
    [T]est case
    [Q]uit
    What would you like to Bake? (D/M/V/C/P/F/T/Q)
    > c
    -------------------- 
    Bake Controller
    Path: /Applications/MAMP/htdocs/blog/app/Controller/
    -------------------- 
    \Use Database Config: (default/test)
    [default] > 
```

无论我为数据库输入了什么（如果我将其留空，它会再次询问我），但任何答案都会给我以下错误：

```
 Warning Error: PDO::__construct(): [2002] No such file or directory (trying to connect via unix:///var/mysql/mysql.sock) in    [/Users/p_scott/cake221/lib/Cake/Model/Datasource/Database/Mysql.php, line 149]

    Error: Database connection "SQLSTATE[HY000] [2002] No such file or directory" is missing, or could not be created.
    #0 /Users/p_scott/cake221/lib/Cake/Model/Datasource/DboSource.php(260): Mysql->connect()
    #1 /Users/p_scott/cake221/lib/Cake/Model/ConnectionManager.php(101): DboSource->__construct(Array)
    #2 /Users/p_scott/cake221/lib/Cake/Console/Command/Task/ModelTask.php(906): ConnectionManager::getDataSource('default')
    #3 /Users/p_scott/cake221/lib/Cake/Console/Command/Task/ControllerTask.php(396): ModelTask->getAllTables('default')
    #4 /Users/p_scott/cake221/lib/Cake/Console/Command/Task/ControllerTask.php(419): ControllerTask->listAll(NULL)
    #5 /Users/p_scott/cake221/lib/Cake/Console/Command/Task/ControllerTask.php(136): ControllerTask->getName()
    #6 /Users/p_scott/cake221/lib/Cake/Console/Command/Task/ControllerTask.php(61): ControllerTask->_interactive()
    #7 /Users/p_scott/cake221/lib/Cake/Console/Command/BakeShell.php(113): ControllerTask->execute()
    #8 /Users/p_scott/cake221/lib/Cake/Console/Shell.php(393): BakeShell->main()
    #9 /Users/p_scott/cake221/lib/Cake/Console/ShellDispatcher.php(201): Shell->runCommand(NULL, Array)
    #10 /Users/p_scott/cake221/lib/Cake/Console/ShellDispatcher.php(69): ShellDispatcher->dispatch()
    #11 /Users/p_scott/cake221/app/Console/cake.php(33): ShellDispatcher::run(Array)
    #12 {main} 
```

一旦我开始收到此错误，我尝试在终端中导航到`<cake install dir>/app/Console`文件夹和`<different instance of cake install dir>/app/Console`文件夹以从我的应用程序/s 中尝试控制台。我要么得到同样的错误，要么它问我不同的问题，比如：

```
 What is the path to the project you want to bake?  
    [/Users/p_scott/myapp] > /Applications/MAMP/htdocs/history/app 
    What is the path to the directory layout you wish to copy?  
    [/Applications/MAMP/htdocs/history/lib/Cake/Console/Templates/skel] > 
```

PHP CLI 已安装，它似乎正在运行

```
 PHP 5.3.8 (cli) (built: Dec  5 2011 21:24:09) 
    Copyright (c) 1997-2011 The PHP Group
     Zend Engine v2.3.0, Copyright (c) 1998-2011 Zend Technologies 
```

我的 PDO 支持似乎已启用。在终端我输入：

```
 php --ri pdo
    PDO
    PDO support => enabled
    PDO drivers => mysql, sqlite, sqlite2 
```

我在 Apache 中没有 php.ini 文件（因为我在 Mac 上），但是 PHP 5.36 目录中的那个，我启用了以下扩展：

```
 extension=imap.so
    extension=yaz.so
    extension=mcrypt.so
    extension=gettext.so
    extension=pgsql.so
    extension=pdo_pgsql.so
    extension=pdo_mysql.so 
```

休息后，我找到了一篇文章（http://www.dereuromark.de/2011/10/31/freshly-baked-cake2-0-tips/），它谈到了 2.0 中控制台位置的变化。我应该尝试从该位置（`<cake installed dir>/lib/Cake/Console`）使用它。一旦我尝试了这个，我要么得到关于我想要使用什么布局的问题，要么......一次，我能够让烘焙应用程序要求我创建一个数据库配置。我完成了这些步骤，最后它抛出了这个错误：

`Fatal error: Class 'DATABASE_CONFIG' not found in /Applications/MAMP/htdocs/history/lib/Cake/Console/Command/Task/DbConfigTask.php on line 264`

这让我又得到了一条信息。`<cake installation dir>/history/app/Config/database.php`这是我在文件中的默认数据库配置。

```
 class DATABASE_CONFIG {

public $default = array(
    'datasource' => 'Database/Mysql',
    'persistent' => false,
    'host' => 'localhost',
    'login' => 'cakeHistoryUser',
    'password' => 'cakeHistoryPassword',
    'database' => 'cake_history',
    'prefix' => '',
    //'encoding' => 'utf8',
   ); 
```

在发布这个问题（以及所有这些信息）之前，我在这里度过了一些高质量的时间，看起来我的大多数问题都与 CLI 相关，但我只是看不到我需要在几个小时后更改某些内容，我需要帮助。

帮帮我欧比旺，你是我唯一的希望

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-02T21:23:12.550

问题是您试图通过命令行与数据库交互，但是 PHP-CLI 与 MAMP 证明的安装不同，因此它不知道数据库服务器。

尝试在您的文件中更改`localhost`为，这应该可以解决问题。`127.0.0.1``app/Config/database.php`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-11T05:30:42.437

像这样的事情发生在我身上，我发现让它工作的最简单的方法是把 localhost 更改为 127.0.0.1 并在末尾添加端口号，例如，MAMP 使用端口号 8899，所以：

“mysql：主机=127.0.0.1:8889”

# c# - MSMQ 和 LINQ 实体对象序列化异常

> ID：11785487
> 
> 赞同：1
> 
> 时间：2012-08-02T20:46:42.537
> 
> 标签：c#, linq, serialization, msmq

我有一个关于 Msmq 和 linq 实体序列化的问题。

我有一个主消息队列和一个错误消息队列。一个进程使用下面的 Send 方法将项目发送到主队列。第二个进程批量接收来自主队列的项目。第二个进程，在异常情况下，将项目发送到错误队列。在此期间，我得到一个 System.ObjectDisposedException 异常。

我正在使用 LINQ-sql，Item 对象是一个可序列化的实体（DataContext 的序列化模式是单向的）。

在 dbml 中，Item 实体与 Source 实体有关联（参见堆栈跟踪中的 Item.get_Source() 行）。我猜测 ObjectDisposedException 异常是在调用 Item 的 Source 的 getter 时发生的。项目的 SourceID 甚至在它被发送到主消息队列之前就被填充了。似乎 LINQ 尝试使用 DataContext 访问该延迟加载的源并抛出 ObjectDisposedException。我不确定将项目发送到主队列与错误队列之间有什么不同。

有任何想法吗？

堆栈跟踪：

```
System.InvalidOperationException was caught
  Message=There was an error generating the XML document.
  Source=System.Xml
  StackTrace:
       at System.Xml.Serialization.XmlSerializer.Serialize(XmlWriter xmlWriter, Object o, XmlSerializerNamespaces namespaces, String encodingStyle, String id)
       at System.Xml.Serialization.XmlSerializer.Serialize(Stream stream, Object o, XmlSerializerNamespaces namespaces)
       at System.Messaging.XmlMessageFormatter.Write(Message message, Object obj)
       at System.Messaging.Message.AdjustToSend()
       at System.Messaging.MessageQueue.SendInternal(Object obj, MessageQueueTransaction internalTransaction, MessageQueueTransactionType transactionType)
       at namespace.Data.ImportServices.Msmq.MsmqProcessor`1.Send(MessageQueue q, List`1 items) in D:\Workspace\namespace.Data\ImportServices\Msmq\MsmqProcessor.cs:line 95
  InnerException: System.ObjectDisposedException
       Message=Cannot access a disposed object.
Object name: 'DataContext accessed after Dispose.'.
       Source=System.Data.Linq
       ObjectName=DataContext accessed after Dispose.
       StackTrace:
            at System.Data.Linq.DataContext.CheckDispose()
            at System.Data.Linq.DataContext.GetTable(Type type)
            at System.Data.Linq.CommonDataServices.GetDataMemberQuery(MetaDataMember member, Expression[] keyValues)
            at System.Data.Linq.CommonDataServices.DeferredSourceFactory`1.ExecuteKeyQuery(Object[] keyValues)
            at System.Data.Linq.CommonDataServices.DeferredSourceFactory`1.Execute(Object instance)
            at System.Data.Linq.CommonDataServices.DeferredSourceFactory`1.DeferredSource.GetEnumerator()
            at System.Linq.Enumerable.SingleOrDefault[TSource](IEnumerable`1 source)
            at System.Data.Linq.EntityRef`1.get_Entity()
            at namespace.Data.Item.get_Source() in D:\Workspace\namespace.Data\DB.designer.cs:line 4757
            at Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationWriterItemMsmq.Write25_Item(String n, String ns, Item o, Boolean isNullable, Boolean needType)
            at Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationWriterItemMsmq.Write26_ItemMsmq(String n, String ns, ItemMsmq o, Boolean isNullable, Boolean needType)
            at Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationWriterItemMsmq.Write27_ItemMsmq(Object o)
       InnerException: 
```

代码：

将项目发送到队列。

```
void Send(MessageQueue q, List<T> items)
{
    using (q)
    {
        ((XmlMessageFormatter)q.Formatter).TargetTypes = new Type[] { typeof(T) };
        foreach (var item in items)
            q.Send(item); // <-- ex occurs while sending to Error message queue
    }
} 
```

从队列中接收项目并使用回调处理项目。异常时将项目发送到错误队列。

```
void Receive(MessageQueue q, Action<List<T>> processCallback)
{
    List<T> items = null;
    try
    {
        items = GetNextBatchItems(q);
        processCallback(items);
    }
    catch (Exception ex)
    {
        // sent error messages to the Error queue
        var errorQ = _queueFactory.GetErrorQueue(q);
        Send(errorQ, items);
    }
} 
```

从队列中获取下一批项目。

```
List<T> GetNextBatchItems(MessageQueue q)
{
    var items = new List<T>();
    var batchCount = _queueFactory.GetBatchCount(q);
    ((XmlMessageFormatter)q.Formatter).TargetTypes = new Type[] { typeof(T) };
    while (items.Count < batchCount)
    {
        var message = q.Receive();
        if (message.Body is T)
            items.Add((T)message.Body);
    }
    return items;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T21:06:31.170

我怀疑这是因为您使用的是 XmlSerializer，而 LINQ-to-SQL 中的序列化挂钩是为 DataContractSerializer 设计的。不同之处在于后者支持序列化前/后序列化回调，用于帮助禁用级联加载。

我怀疑当序列化程序在模型中爬行时，序列化会导致导航属性延迟加载。使用 DataContractSerializer 可以避免这种情况。或者，考虑在序列化之前完全加载您的模型（至少是可访问的部分）。

如果模型尝试延迟加载，但底层连接/数据上下文不再可用，它将失败。

另一种更好的方法：

**不要用延迟加载等序列化复杂模型**

相反，IMO 使用你的数据上下文来填充一个愚蠢的、无知的普通 POCO/DTO 模型，它什么都不知道，什么也不做，除了充当一个非常容易序列化的简单数据。这种方法在我的经验中效果更好（当涉及到序列化时，这是不小的经验）。作为一个附带的好处，因为这将是*您的*POCO/DTO，您可以简单地将其配置为适合您喜欢的任何序列化程序。

# python - Python 如何迭代一个 for 循环？

> ID：11785490
> 
> 赞同：6
> 
> 时间：2012-08-02T20:46:46.750
> 
> 标签：python, loops, for-loop

我在 Python 上尝试了以下代码，这就是我得到的： 似乎对于我尝试通过更改 elem 对可迭代对象进行的许多更改，它不起作用。

```
lis = [1,2,3,4,5]
for elem in lis:
    elem = 3

print lis
[1, 2, 3, 4, 5] 
```

但是，如果可迭代对象是具有自己方法的对象（如列表），则可以在 for 循环中对其进行修改。

```
lis = [[1],[2]]
for elem in lis:
    elem.append(8)

print lis
    [[1, 8], [2, 8]] 
```

在`for`循环中，'elem' 术语到底是什么？提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-02T20:54:18.107

这不起作用的原因是因为你误解了什么`elem` **是**. 它不是对象本身，甚至称它为“变量”也不正确。

它是一个**名称**，有点像标签，指向对象。如果您只是直接分配它，那么您只是*覆盖*名称以指向其他内容。但是，您仍然拥有对列表的原始引用，因此分配不同的值`elem`不会修改`lis`自身。

现在，在这种情况下，由于`elem`指向的所有对象都是整数，因此您甚至根本无法*更改*它们 - 因为整数（以及许多其他类型，如字符串或元组）是**不可变**的。简而言之，这意味着一旦创建了对象，就无法对其进行修改。这与它们是否“有方法”无关（所有 Python 对象都有方法，包括整数），而与它们是否不可变有关。

但是，有些对象是**可变**的，这意味着它们可以更改。列表是此类对象的示例。在您的第二个示例中，`elem`是一个名称，它引用了包含在 中的*列表*对象`lis`，这些对象本身是可变的。这就是为什么就地修改它们（使用`.append()`、或`.remove()`等）可以正常工作的原因。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-02T20:54:33.693

循环中的`elem`变量`for`是每次迭代时对当前对象的引用。改变它不会做任何事情；它只会改变变量的值，`elem`并且无论如何都会在下一次通过循环时改变。要实际更改列表中元素的值，您需要对列表的引用和要更改的元素的索引，而您没有后者。

所以你想要做的是这样的：

```
for index, elem in enumerate(lis):
    lis[index] = 3 
```

这样，您就可以`elem`获取元素的值和`index`列表中的位置。它使您免于`lis[index]`不断编写以获取值，但您仍然必须这样做才能*更改*元素。

你也可以这样做：

```
for index in xrange(len(lis)):
    lis[index] = 3 
```

然而，在大多数情况下，这被认为是非 Pythonic（除其他外，如果列表在迭代时变得更长或更短会发生什么）？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-02T20:52:39.433

当您为 name 分配一个新值时`elem`，您只需更改`for`循环中的本地绑定。如果要更改存储在`lis`、[`map`](http://docs.python.org/library/functions.html#map)或[列表理解](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)中的值，如下所示：

```
lis = [3 for elem in lis] 
```

但是，您可以修改 的属性`elem`（或调用这样做的方法），就像您可以修改任何其他值一样。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-02T20:55:35.253

在这里，您实际上是在修改第二个示例中的列表对象。在第一个示例中，您不是在修改数字，而是在替换它。对于 Python 的新用户来说，这可能是一个复杂的细微差别。

看一下这个：

```
>>> x = 1
>>> id(x)
4351668456
>>> x = 2
>>> id(x)
4351668432 
```

`id`返回对象的标识符。正如您在上面看到的，`x`这两次都更改了对象。

```
>>> y = [1]
>>> id(y)
4353094216
>>> y.append(2)
>>> id(y)
4353094216 
```

在这里，我修改了列表，所以列表仍然是原始对象`y`。

所以，这一切意味着当你在做`elem = 3`的时候，不是在修改它，而是在替换它。到现在为止，它不再与列表相关联。

这是你可以做你想做的事情的方法之一。这会获取索引，然后修改列表，而不是数字。

```
lis = [1,2,3,4,5]
for idx, elem in enumerate(lis):
    lis[idx] = 3

print lis
[1, 2, 3, 4, 5] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-02T21:00:34.623

在您的第一个示例中，您试图修改一个整数，它是不可变的（就像字符串一样）。

Python 变量应被视为指向对象的标签。当您遍历一个不可变列表时，`elem`指向一个不可变对象，而不是指向列表中的那个位置，因此您不能修改原始列表。

在第二种情况下，`elem`指向一个可以修改的对象，因此您会看到原始列表已更改。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-02T20:54:10.387

这取决于 elem 的 type() 是什么。

在您的第一种情况下，每个 elem 都是一个 int 对象，并且可以更改它。当您说: 时`elem = 3`，您正在更改临时对象，而不是列表中的项目本身。

在第二种情况下，每个 elem 都是一个列表对象。

# ios - iOS 键盘和 textview 错误 - “使用未声明的变量”

> ID：11785491
> 
> 赞同：1
> 
> 时间：2012-08-02T20:46:54.050
> 
> 标签：ios, uiscrollview, uitextfield, uikeyboard

我正在尝试按照 Apple 的“iOS 的文本、Web 和编辑编程指南”中的步骤来*移动位于键盘下的内容*（PDF 打印输出的第 36 页），并且代码中不断出现错误我直接从页面（清单 4-1）中复制了这个片段，该页面包含在 keyboardDidShow:() 下的这个片段：

```
 if (!CGRectContainsPoint(aRect, activeField.frame.origin)){
    CGPoint scrollPoint = CGPointMake(0.0, activeField.frame.origin.y-kbSize.height);
    [scrollView setContentOffset:scrollPoint animated:YES];
} 
```

然后清单 4-2：

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    activeField = textField;
} 
```

（我确实有通知并经过测试可以正常工作。）

问题是 Xcode 将术语 activeField 标记为未声明的标识符。显然，这意味着我需要在某个地方声明它，但是尽管我已经做了很多挖掘，但我无法弄清楚在*哪里*声明它以及*如何*声明它。

我在其他地方看到人们使用相同的代码并且没有问题。为什么是我？？？

对于你们 Xcode 的老手来说，这可能没什么大不了的，所以我希望你们能教育我。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-07T22:51:56.920

只需在主视图控制器中声明变量：

```
@implementation MainViewController {
    UITextField *activeField;
} 
```

# grails - Grails 通过 post 的外部链接参数

> ID：11785493
> 
> 赞同：0
> 
> 时间：2012-08-02T20:46:58.673
> 
> 标签：grails

我需要打开一个外部链接，并通过 post 方法发送一些参数。我读过我可以使用***redirect()***通过get方法打开一个链接，如下代码：

```
 def get = {
        redirect(url: "http://localhost:8080/test/public/cadastro/dataConfirm.html?" + "username=" + "test")
    } 
```

显然，重定向仅适用于 get。是否有任何命令可以通过 post 方法执行此操作？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T06:19:52.253

您的目标是让用户通过 POST 实际重定向到不同的站点，还是 POST 到不同的站点并返回结果但留在您的站点中？如果它实际上将用户推送到不同的站点，那么 Victor 的评论就是要走的路。

如果您尝试将 POST 发送到其他站点，请获取结果并留在您的站点上，查看[Rest 插件](http://grails.org/plugin/rest)并检查`withHttp`方法。[这里](http://coderberry.me/blog/2012/05/07/stupid-simple-post-slash-get-with-groovy-httpbuilder/)有一个很好的例子。

使用 Rest 插件时可能会出现依赖问题。如果您有这些，请查看[ataylor](https://stackoverflow.com/users/190201/ataylor)在[此](https://stackoverflow.com/questions/7379455/how-to-install-and-use-httpbuilder-plugin-in-grails)stackoverflow 帖子中的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T23:59:18.210

通过 grails 中的 post 进行服务器到服务器通信可以使用以下 [java 代码](http://www.exampledepot.com/egs/java.net/Post.html)来实现 。我对其进行了测试，并且在 grails 中运行良好。正如@Kelly 回答我的那样，替代方案是插件和 [Apache Http Components](http://hc.apache.org/) 。

# jquery - 刷新或重新加载数据表

> ID：11785494
> 
> 赞同：7
> 
> 时间：2012-08-02T20:47:02.783
> 
> 标签：jquery, datatable

我正在使用 Jquery Datatable，其中包括列的自定义呈现。根据值，我必须禁用其中的某些控件。我想在发布后重新加载/刷新/重新绑定我的 jquery 数据表。我怎样才能做到这一点？

```
**Controller:**

    [HttpPost]
    public JsonResult PostAction(MyMOdel model)
    {
         //save changes to DB
        return Json(new
        {
            Success = result,
        });
    }

 public ActionResult MyAction()
   //grab records from DB and return JSON
 }

**View:**

@using (Ajax.BeginForm("PostAction", "ControllerName", null,
        new AjaxOptions
        {
            UpdateTargetId = "update-message",
            InsertionMode = InsertionMode.Replace,
            HttpMethod = "POST",
            OnSuccess = "updateSuccess"
        }, new { @id = "myForm"

 }
        ))
{
<table id="myTbl" class="display"><tr><td>col1</td></tr></table>
}

<script type="text/javascript">
        var oTable = $('#myTbl').dataTable({
                     "sAjaxSource": "/ControllerName/MyAction",
                      <!-- more config -->

    function updateSuccess(data, status, xhr) {
        //refresh datatable;

    }
</script> 
```

更新：***** ***

我找到了答案：

*   清除表（ fnClearTable ）

*   向表中添加新数据 (fnAddData)

*   重绘表格 ( fnDraw )

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-18T19:12:23.833

首先只是获取数据表引用，使用

```
var oTable = $("#someTable").dataTable(); 
```

之后做任何事情，你想要：

```
Clear the table : oTable.fnClearTable();

Redraw the table : oTable.fnDraw();

Add new data to the table : oTable.fnAddData(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T18:08:44.760

我找到了答案：

```
clear the table ( fnClearTable )

add new data to the table ( fnAddData)

redraw the table ( fnDraw ) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-31T01:51:19.363

这对我有用：

```
// Initially
window.table = $('#TableID').dataTable({
                    ...
                });

// Later, when table needs to be refreshed
window.table.fnDestroy(); 
// depending on the version, maybe just .destroy() instead of .fnDestroy(); 
```

**现在只需执行您最初**所做的调用以重新初始化表：

```
window.table = $('#TableID').dataTable({
                    ...
                }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T20:49:23.990

你只是`.dataTable()`再次在桌子上打电话，没有任何争论。

所以如果你做了这样的事情：

```
$('#someTable').dataTable({
    someAttribue: someValue
}); 
```

然后，您可以稍后执行此操作以刷新它：

```
$('#someTable').dataTable(); 
```

不要再用参数调用它；它不喜欢那样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-14T10:03:44.983

对于较新的数据表版本，这将完成工作：

```
var table = $('#yourDataTable').DataTable({...});
table.columns.adjust().draw(); 
```

就我而言，我只需要重绘它。但您也可以在重绘之前清除并添加新数据。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-06T10:35:05.020

```
var oTable = $('#groups').dataTable();
oTable.fnClearTable();
oTable.fnDestroy();
groupsList(); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-11-27T07:37:46.013

你确定这不是你要找的：

```
oTable.fnReloadAjax(); 
```

这对我有用。它使用当前的 ajax url 配置重新加载网格。

# java - 模拟第一次调用失败，第二次调用成功

> ID：11785498
> 
> 赞同：163
> 
> 时间：2012-08-02T20:47:15.547
> 
> 标签：java, mockito

我想使用 Mockito 来测试下面的（简化的）代码。我不知道如何告诉 Mockito 第一次失败，然后第二次成功。

```
for(int i = 1; i < 3; i++) {
  String ret = myMock.doTheCall();

  if("Success".equals(ret)) {
    log.write("success");
  } else if ( i < 3 ) {
    log.write("failed, but I'll try again. attempt: " + i);
  } else {
    throw new FailedThreeTimesException();
  }
} 
```

我可以设置成功测试：

```
Mockito.when(myMock).doTheCall().thenReturn("Success"); 
```

和失败测试：

```
Mockito.when(myMock).doTheCall().thenReturn("you failed"); 
```

但是我如何测试它是否失败了一次（或两次）然后成功了，没关系？

* * *

## 回答 #1

> 赞同：308
> 
> 时间：2012-08-02T20:51:07.627

从[文档](https://static.javadoc.io/org.mockito/mockito-core/2.10.0/org/mockito/Mockito.html#stubbing_consecutive_calls)：

> 有时我们需要为同一个方法调用使用不同的返回值/异常存根。典型的用例可能是模拟迭代器。原始版本的 Mockito 没有这个功能来促进简单的模拟。例如，可以使用 Iterable 或简单的集合来代替迭代器。那些提供了自然的存根方式（例如使用真实的集合）。但是，在极少数情况下，存根连续调用可能会很有用：
> 
> ```
> when(mock.someMethod("some arg"))
>    .thenThrow(new RuntimeException())
>   .thenReturn("foo");
> 
> //First call: throws runtime exception:
> mock.someMethod("some arg");
> 
> //Second call: prints "foo"
> System.out.println(mock.someMethod("some arg")); 
> ```

所以在你的情况下，你会想要：

```
when(myMock.doTheCall())
   .thenReturn("You failed")
   .thenReturn("Success"); 
```

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2012-08-03T05:06:12.663

写你想要的最短的方法是

```
when(myMock.doTheCall()).thenReturn("Success", "you failed"); 
```

当您`thenReturn`为此提供多个参数时，每个参数将最多使用一次，除了最后一个参数，它会根据需要使用多次。例如，在这种情况下，如果您拨打 4 次电话，您将获得“成功”、“您失败”、“您失败”、“您失败”。

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2016-12-21T22:09:00.930

由于与此相关的评论很难阅读，我将添加一个格式化的答案。

如果您尝试使用`void`仅引发异常的函数执行此操作，然后执行无行为步骤，那么您将执行以下操作：

```
Mockito.doThrow(new Exception("MESSAGE"))
            .doNothing()
            .when(mockService).method(eq()); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-06-19T01:17:02.380

我有不同的情况，我想`void`为第一次调用模拟一个函数并在第二次调用时正常运行它。

这对我有用：

```
Mockito.doThrow(new RuntimeException("random runtime exception"))
       .doCallRealMethod()
       .when(spy).someMethod(Mockito.any()); 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-01-25T11:17:17.437

要添加到[这个](https://stackoverflow.com/a/11785556/4212710)和[这个](https://stackoverflow.com/a/11789581/4212710)答案，您还可以使用循环来链接模拟调用。如果您需要多次模拟同一事物或以某种模式模拟，这将很有用。

例如（虽然有点牵强）：

```
import org.mockito.stubbing.Stubber;

Stubber stubber = doThrow(new Exception("Exception!"));
for (int i=0; i<10; i++) {
    if (i%2 == 0) {
        stubber.doNothing();
    } else {
        stubber.doThrow(new Exception("Exception"));
    }
}
stubber.when(myMockObject).someMethod(anyString()); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-06-13T17:43:22.443

最短的是

```
doReturn("Fail", "Success").when(myMock).doTheCall(); 
```

# javascript - 性能问题：存储对 DOM 元素的引用与使用选择器

> ID：11785502
> 
> 赞同：1
> 
> 时间：2012-08-02T20:47:21.803
> 
> 标签：javascript, jquery, performance

所以在我的应用程序中，用户可以在某些 div 标签内创建一些内容，并且每个内容，或者我称之为“元素”的内容都有自己的对象。目前，我使用一个函数来计算元素已使用 jquery 选择器放置在其中的原始 div 标记，但我想知道在性能方面，一旦元素具有存储对 div 标记的引用会不会更好已创建，而不是稍后计算？所以现在我使用这样的东西：

```
$('.div[value='+divID+']') 
```

但相反，当我创建元素时，我可以将引用存储在元素内。这对性能会更好吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T20:59:19.617

如果您有很多这样的绑定，最好存储对它们的引用。正如评论中提到的，变量查找比在 DOM 中查找要快得多——尤其是使用您当前的方法。jQuery 选择器比纯 DOM 选择器要慢，而且那个特定的选择器会非常慢。

这是一项基于 epascarello 的测试，显示了 jQuery、DOM2 方法和引用之间的区别：http: [//jsperf.com/test-reference-vs-lookup/2](http://jsperf.com/test-reference-vs-lookup/2)。变量赋值超快如预期。此外，DOM 方法以同样大的优势击败了 jQuery。注意，这是以雅虎主页为例。

另一个考虑因素是 DOM 的大小和复杂性。随着这增加，参考缓存方法变得更加有利。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T21:00:36.327

与每次查找相比，局部变量将非常快。[测试证明它](http://jsperf.com/test-reference-vs-lookup)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T21:05:53.760

jQuery 是一个构建和返回对象的函数。这部分不是特别昂贵，但实际的 DOM 查找确实涉及相当多的工作。对于匹配现有 DOM 方法（如 getElementById 或 getElementsByClassName （在 IE8 中不存在，所以它真的很慢）的简单查询的开销并不高）但是是的，区别在于工作（构建一个包装 DOM 访问的对象方法）并且几乎没有工作（引用现有对象）。如果您打算重用它们，请始终缓存您的选择器结果。

此外，您使用的 xpath 东西在某些浏览器中可能非常昂贵，所以是的，我肯定会缓存它。

需要注意的事项：

*   没有 ID 的长系列 JQ 参数
*   在 IE8 或更少的类中只有一个类的选择器（添加标签名称，例如 'div.someClass'）以获得显着改进 - IE8 及更低版本必须在解释器级别访问每一段 HTML，而不是在您只使用快速的本机方法时使用类
*   xpath 风格的查询（很多较新的浏览器可能会处理这些问题）

在编写选择器时，请考虑必须查看多少标记才能找到它。如果您知道您只想要某个 ID 内的某个类的 div，请执行其中一项 $('#theID div.someClass') 而不仅仅是 $('div.someClass');

但是不管怎样，只是根据工作避免的原则，如果你要使用它两次或更多次，缓存该值。并尽可能避免使用重复请求来骚扰 DOM。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T20:50:00.730

通过 ID 查找元素非常快。我不是 100% 确定我理解你的其他方法，但我怀疑它会比通过它的 id 简单查找元素更好，浏览器知道如何最好地完成这项任务。根据您的解释，我看不出您的方法会更快。

# r - 如果重复条目发生在R中的某个时间范围内，如何删除它们

> ID：11785503
> 
> 赞同：1
> 
> 时间：2012-08-02T20:47:22.383
> 
> 标签：r, remove-if

我正在尝试处理像下面这样具有相机陷阱数据的数据库。拍摄的照片之间没有延迟，因此快速连续拍摄的照片很可能是同一个人。

如果它们在 10 分钟内出现，我想删除重复的物种，因为它们很可能是同一个体。（即，如果最后一张照片和下一张照片之间的时间少于 10 分钟）。有没有办法在 R 中做到这一点？谢谢！

```
 Site.Name Sampling.Unit.Name Photo.Date Photo.Time   Genus Species Number.of.Animals
1 Ranomafana        CT-RNF-1-01 06/10/2010   00:01:00                                  
2 Ranomafana        CT-RNF-1-01 11/10/2010   00:28:00 Eliurus  tanala                 1
3 Ranomafana        CT-RNF-1-01 12/10/2010   04:39:22   Fossa fossana                 1
4 Ranomafana        CT-RNF-1-01 12/10/2010   04:39:27   Fossa fossana                 1
5 Ranomafana        CT-RNF-1-01 12/10/2010   16:47:41 Nesomys   rufus                 1
6 Ranomafana        CT-RNF-1-01 12/10/2010   16:47:46 Nesomys   rufus                 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T00:32:33.913

这是您`data.frame`的日期和时间

```
 dat <- data.frame(Photo.Date =
 c("6/10/2010","11/10/2010","12/10/2010","12/10/2010","12/10/2010","12/10/2010"),
 Photo.Time = c("00:01:00","00:28:00","04:39:22","04:39:27","16:47:41","16:47:46")) 
```

然后使用`strptime`(strip time) 将日期转换为 POSIX 格式

```
date_vec <-strptime(paste(dat$Photo.Date, dat$Photo.Time), "%d/%m/%Y %H:%M:%S") 
```

下一步是确定每次观察之间的时间差。为此，您需要比较观察 1 和 2、2 和 3、3 和 4...

```
first_date <- date_vec[1:(length(date_vec)-1)]
second_date <- date_vec[2:length(date_vec)]
second_gap <- difftime(second_date, first_date, units="mins") 
```

确定相隔不到 10 分钟的间隙。您还需要添加`TRUE`以保持第一次。

```
dup_index <- second_gap>10
dup_index <- c(TRUE, dup_index)
dat[dup_index, ] 
```

哪个返回

```
 Photo.Date Photo.Time
1  6/10/2010   00:01:00
2 11/10/2010   00:28:00
3 12/10/2010   04:39:22
5 12/10/2010   16:47:41 
```

高温高压

# nhibernate - Nhibernate 和实体基类

> ID：11785505
> 
> 赞同：2
> 
> 时间：2012-08-02T20:47:37.753
> 
> 标签：nhibernate

我正在尝试实现具有覆盖等于和 GetHashcode 的抽象基实体类...这是我的实体基类

```
public abstract class Entity<TId>
{

public virtual TId Id { get; protected set; }
protected virtual int Version { get; set; }

public override bool Equals(object obj)
{
  return Equals(obj as Entity<TId>);
}

private static bool IsTransient(Entity<TId> obj)
{
  return obj != null &&
         Equals(obj.Id, default(TId));
}

private Type GetUnproxiedType()
{
  return GetType();
}

public virtual bool Equals(Entity<TId> other)
{
  if (other == null)
    return false;

  if (ReferenceEquals(this, other))
    return true;

  if (!IsTransient(this) &&
      !IsTransient(other) &&
      Equals(Id, other.Id))
  {
    var otherType = other.GetUnproxiedType();
    var thisType = GetUnproxiedType();
    return thisType.IsAssignableFrom(otherType) ||
           otherType.IsAssignableFrom(thisType);
  }

  return false;
}

public override int GetHashCode()
{
  if (Equals(Id, default(TId)))
    return base.GetHashCode();
  return Id.GetHashCode();
} 
```

}

实体基 ID 的值是如何分配的？

我的类的主键具有不同的数据类型，并且每个类的名称也不同。这是我的课程示例：

```
public class Product : Entity
{
    public virtual Guid ProductId { get; set; }
    public virtual string Name { get; set; }
    public virtual string Description { get; set; }
    public virtual Decimal UnitPrice { get; set; }
}

public class Customer : Entity
{
    public virtual int CustomerID { get; set; }
    public virtual string FirstName { get; set; }
    public virtual string LastName { get; set; }
    public virtual int Age { get; set; }
} 
```

我对如何设置基类的 ID 属性有点困惑。谁能给我建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T05:51:24.033

您只需要将类型传递给继承的基类。

请参阅实体中的评论：

```
public class Product : Entity<Guid>
{
    // The ProductId property is no longer needed as the
    // Id property on the base class will be of type Guid
    // and can serve as the Id
    //public virtual Guid ProductId { get; set; }
    public virtual string Name { get; set; }
    public virtual string Description { get; set; }
    public virtual Decimal UnitPrice { get; set; }
}

public class Customer : Entity<int>
{
    // The CustomerID property is no longer needed as the
    // Id property on the base class will be of type int
    // and can serve as the Id
    // public virtual int CustomerID { get; set; }
    public virtual string FirstName { get; set; }
    public virtual string LastName { get; set; }
    public virtual int Age { get; set; }
} 
```

现在在您的 NHibernate 映射文件中，只需为您的 Id 属性指定数据库列。

# iphone - 使用平移手势识别器将多个图像视图一起移动

> ID：11785506
> 
> 赞同：1
> 
> 时间：2012-08-02T20:47:54.567
> 
> 标签：iphone, xcode, imageview, pan

我正在为 xcode 中的 iphone 创建一个应用程序，其中背景图像比屏幕大得多。我在背景的图像视图中添加了一个平移手势识别器，它允许它自由移动，这样用户就可以看到他们控制的角色之外的东西。

这工作得很好，但是当我添加额外的图像视图（对于整个区域的角色和其他对象）时，它们将保持静止。有没有办法将多个图像视图连接到一个平移手势识别器，以便在移动一个手势识别器时，它们都一起移动？

我尝试将其他图像视图连接到平移手势识别器的引用出口集合，但是当程序运行时，它只平移最后连接的图像视图，而其他图像视图保持静止。

我是 xcode 的新手，我确信这是我忽略的相对简单的事情，但我无法在互联网上找到答案，所以任何帮助将不胜感激。:)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:44:33.477

最好的方法是让角色（和其他视图）成为 backgroundImage 的子视图。

请注意，在 NIB (.xib) 文件中，您不能将子视图添加到 UIImageView，但可以通过编程方式进行。

如果您更喜欢在 NIB 文件中工作，您可以制作一个“容器” UIView，用于保存该视图中的背景图像和其他字符。然后对于手势识别器，您将转换该视图。

# node.js - MongoDB 位置 NearBy 唯一

> ID：11785507
> 
> 赞同：2
> 
> 时间：2012-08-02T20:47:55.910
> 
> 标签：node.js, mongodb, mongoose

我在数据库中创建了一个集合，并使用适当的索引进行了更新以将其取回。我得到了以下

**例子：**

```
db.car.save({ "name":"Toyota car", "affiliation":"Toyota", "loc":{"lon":55.93939251390387,"lat":-113.999}})

db.car.find({"loc" : {"$within" : {"$center" : [[50.93939251390,-114],5]}}}) 
```

当我搜索上述查询返回 20K 记录时，我在数据库中有 100K + 记录。

实际上，这在“名称”列中有一些重复的值。如何获得“名称”的独特价值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T13:09:49.403

在 MongoDB 2.0.x 中使用查询无法获得所需的结果，因此需要在应用程序代码中操作结果。

如果您只关注名称，则可以限制输出中的字段：

```
db.car.find(
    {"loc" : {"$within" : {"$center" : [[50.93939251390,-114],5]}}},
    {"_id": 0, "name": 1}
) 
```

如果您想找到不同的名称，您可以执行以下操作：

```
// Save cars we've seen
> var cars_seen = {}

// The unique list we actually want
> var cars = []

// Find closest cars to given geo point
> db.car.find(
    {"loc" : {"$within" : {"$center" : [[50.93939251390,-114],5]}}},
    {"_id": 0, "name": 1}
).forEach(
    function(doc) {
        // Add names we haven't seen yet
        if (!cars_seen[doc.name]) {
            cars_seen[doc.name] = 1;
            cars.push(doc.name);
        }
    }
)

> cars
[ "Skoda", "Benz", "Skoda SUV" ] 
```

# css - IE7 上的矩阵过滤器对空格敏感吗？

> ID：11785510
> 
> 赞同：2
> 
> 时间：2012-08-02T20:48:16.400
> 
> 标签：css, internet-explorer, internet-explorer-7

我正在使用 CSS 转换，回退到 IE7 和 IE8 的以下矩阵转换。

```
filter:progid:DXImageTransform.Microsoft.Matrix(M11=0.0, M12=0.33, M21=-0.33, M22=0.0,sizingMethod='auto expand') 
```

这适用于所有版本的 IE。但是如果我删除每个逗号后的空格，就像我缩小 CSS 时发生的那样，我会在 IE7 下看到一堆奇怪的故障。看起来浏览器似乎完全忽略了 CSS 文件其他部分中各种其他类的定义。

这只会影响 IE7，无论是原生 IE7 还是使用 IE7 标准模式的 IE9，都会发生这种情况。

我可以通过调整我的 CSS 缩小器来解决这个问题，以便为这条规则单独留下空格，但我想了解发生了什么。我认为这是 IE7 中的错误；我是第一个遇到的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T18:42:56.300

我不确定你是否是第一个遇到它的人。我们今天刚遇到这个问题。您当然似乎是第一个报告它的人。一个月后，斯科特·麦吉[报告了这件事。](http://yuilibrary.com/projects/yuicompressor/ticket/2528170)我没有找到任何其他关于这个晦涩问题的参考资料。

您认为它是 IE7 中的错误的假设是正确的；这是意外的行为。如果你在 IE7 或 IE7 浏览器模式下加载这个[小提琴](http://jsfiddle.net/TZjTm/8/)，你会看到三个橙色的方块，里面有三个 X。第一个正方形是 25x25px，第二个是 50x50px（从 100x100px 缩小并略微模糊），第三个是 100x100px。这是正确的行为。但是，如果您删除小提琴中所示的空白字符，您将看到第二个和第三个元素不再设置样式。

我的理论是，在整个参数列表中没有前导空格的字符串参数中有一个空格会导致此错误。我添加了另一种方法，模糊，来测试这个猜想：

```
progid:DXImageTransform.Microsoft.Blur(pixelradius=3, enabled='hello world'); 
```

如果你删除第一个空格，它会重现错误，在 3 后面。如果你还删除第二个空格，你好，它会再次工作。我的理论是不成立的。

我没有在 IE6 中尝试过这个。

# mysql - 是否有一种可索引的方式在 MySQL 中存储多个位域？

> ID：11785511
> 
> 赞同：0
> 
> 时间：2012-08-02T20:48:19.667
> 
> 标签：mysql

我有一个需要存储几个位域的 MySQL 表...

*   **notification.id** -- 自动编号 int
*   **Association.id** -- BIT FIELD 1 -- 存储一个或多个关联 ID（从另一个表中获取）
*   **type.id** -- BIT FIELD 2 -- 存储一个或多个应用于此通知的类型（同样，从另一个表中获得）
*   **notification.day_of_week** -- BIT FIELD 3 -- 存储一周中的一天或多天
*   **notification.target** -- 发送通知的位置 -- 数据类型无关紧要，因为我们永远不会对该字段进行索引或排序，但可能会存储一个电子邮件地址。

我的用户将能够将他们的通知配置为在一天或多天、一种或多种关联中针对一种或多种类型触发。我需要一种快速、可索引的方式来存储这些数据。

位域 1 和 2 可以扩展为具有比现在更多的值。目前 1 的值高达 125，而 2 的值高达 7，但预计两者都会更高。

位域 3 存储星期几，因此，总是只有 7 个可能的值。

我需要经常（每隔几分钟）运行一个脚本，根据类型、关联和日期扫描此表，以确定是否应该发送给定的通知。查询需要快速，添加新数据越简单越好。我并没有根据需要使用连接、子查询等，但我无法想象这些会更快。

最后一个要求——如果我在这里存储了 1000 个不同的通知，具有 125 种关联可能性、7 种类型和一周中的 7 天，那么如果仅使用整数并存储多个副本，那么记录的组合对我来说太高了该行，而不是使用位字段，因此似乎需要使用位字段。

但是，据我所知，如果我想从一周中的特定日子选择所有内容，比如星期二（可能是位字段中的 b0000100），位字段没有被索引，所以我可以做...

```
SELECT * FROM \`mydb\`.\`mytable\` WHERE \`notification.day_of_week\` & 4 = 4; 
```

据我了解，这根本不会使用索引。

关于如何以可索引方式执行此操作或类似操作的任何建议？

（我在一个非常标准的 LAMP 堆栈上工作，我正在寻找有关 MySQL 索引如何在这个或类似替代方案上工作的细节。）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T21:48:28.893

没有“好”的方法（据我所知）来完成你想要的。请注意，BIT 数据类型的大小限制为 64 位。

对于可以静态定义的位，MySQL 提供了 SET 数据类型，它在某些方面与 BIT 相同，而在其他方面则不同。

例如，对于一周中的几天，您可以定义一个列

```
dow SET('SUN','MON','TUE','WED','THU','FRI','SAT') 
```

没有内置方法（我知道将内部位表示恢复，但您可以在列中添加 0，或强制转换为无符号，以获得十进制表示。

```
SELECT dow+0, CONVERT(dow,UNSIGNED), dow, ...

1  1  SUN
2  2  MON
3  3  SUN,MON
4  4  TUE
5  5  SUN,TUE
6  6  MON,TUE
7  7  SUN,MON,TUE 
```

当 SET 列是索引中的前导列时，MySQL 可以使用“覆盖索引”来满足在 SET 列上使用谓词的查询。（即 EXPLAIN 显示 'Using where; Using index'）但是 MySQL 可能正在执行索引的完整扫描，而不是执行范围扫描。（而且 MyISAM 引擎和 InnoDB 引擎之间可能存在差异。）

```
SELECT id FROM notification WHERE FIND_IN_SET('SUN',dow)

SELECT id FROM notification WHERE (dow+0) MOD 2 = 1 
```

但是......这种用法是非标准的，不能真正推荐。一方面，不能保证这种行为，MySQL 可能会在未来的版本中改变这种行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T13:06:49.953

我对此进行了更多研究，并意识到没有办法让索引像我上面概述的那样工作。因此，我创建了一个辅助表（有点像 WordPress 元表格式），用于存储星期几的条目等。我将根据需要加入这些表。幸运的是，我预计目前不会有超过 10,000 个条目，所以它应该足够快地加入。

如果有人有更好的答案，我仍然对更好的答案感兴趣！

# php - Apache 加载 php 和本地文件错误：“不安全的 JavaScript 尝试使用 URL 访问框架...”

> ID：11785516
> 
> 赞同：0
> 
> 时间：2012-08-02T20:48:39.513
> 
> 标签：php, apache, google-chrome

我通过 xampp 设置了 Apache 来测试网页以加载一些 .php 文件以读取 .csv 文件作为数据源以输出条形图。我在 Chrome 上遇到了这个错误。

不安全的 JavaScript 尝试从带有 URL file:///C:/xampp/htdocs/search/stackedBarChart.html 的框架访问带有 URL file:///C:/xampp/htdocs/search/php/loader/csvFileUploader.php 的框架. 域、协议和端口必须匹配。upclick-min.js:99 i.onload_callback.i.onload_callback upclick-min.js:99 onload

我认为这不像许多其他帖子所建议的那样是 iframe 问题。我也通过firefox对此进行了测试，它超出了读取php的范围，但没有从本地目录加载.csv文件。

有什么建议么？

```
<script>
        var uploaderCSV = document.getElementById('uploaderCSV');
            upclick({
                element : uploaderCSV,
                action : 'php/loader/csvFileUploader.php',
                onstart : function(filename) {
                    console.log(" -- Start upload: <" + filename + "> Here");

                },
                oncomplete : function(response_data) {
                    alert(response_data);
                    console.log("  -- CSV file to load: ", response_data);
                    var n = response_data.split("|");

                    if (n.length > 1) {
                        console.log("  >> csv file loaded at[ ", n[1], " ]");
                        loadDayLightFactor("php/loadCSV.php", "../" + n[1]);
                    }
                }
        });

</script> 
```

这是php文件

```
<?php
// using upload at click from http://code.google.com/p/upload-at-click/
// FileData is the name for the input file

$file_result = "";
$file = $_FILES['Filedata'];

$allowedExtensions = array("csv", "txt");
$extension = end(explode(".", $file["name"]));

echo "123".$file; 
```

?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T21:29:32.123

您的问题似乎是您尝试访问的 URL：

`file:///C:/xampp/htdocs/search`

这不是在本地环境中开发的方式。尝试通过

`http://localhost/search`

我相信它会工作得更好。下面详细解释..

* * *

之所以会发生这种情况，是因为有一个名为**Cross-Domain-Policy的安全标准**

您不能（通过 JavaScript）调用与当前 URL 地址不同的 URL 文件。

例如：我网站的 URL 是**foobar.com**，我正在尝试向**barbaz.com**发送 AJAX 请求。

**我不能！**

因为它不是我的域。我可以尝试向**barbaz.foobar.com**发送请求（使用一些 JavaScript 代码）。

另一个场景将向您展示为什么这是“必须具备”的安全标准：

假设我使用 cookie 登录了我的银行网站。cookie 是持久的。

我正在输入一个向所有已知银行网站发送 AJAX 请求的随机网站**X。**如果我仍然登录我的银行网站，**X**网站可以使用我的用户与银行网站“对话”，并做一些我不知道的事情。

这是一个小例子，为什么这非常重要。

我希望这可以帮到你。

# r - 无法从 R 中的包 fanplot 中找到 ew.txt 文件运行示例

> ID：11785520
> 
> 赞同：1
> 
> 时间：2012-08-02T20:49:06.357
> 
> 标签：r

我正在尝试遵循包 fanplot 中的示例，但找不到 ew.txt 文件。我会很感激你的帮助。

```
data(ew)
plot(ew)

## Not run: 
plot(ew.mcmc)

##
##Create your own (longer) MCMC sample
##
# data
r <- diff(log(ew))
r <- ts(exp(r) - 1, start(ew))

library("R2OpenBUGS")
# write model file:
ew.bug <- dget(system.file("model", "ew.txt", package = "fanplot"))
write.model(ew.bug, "ew.txt")
# take a look:
file.show("ew.txt")
# run openbugs
ew.mcmc <- bugs(data = list(N = length(r), H = 25, r = c(r), p = c(ew)),
                inits = list(list(a = exp(12), psi = 0.5, itau2 = 0.5)),
                param = c("alpha", "psi", "tau", "r.new", "p.new", "y.sim"),
                model = "ew.txt", 
                n.iter = 11000, n.burnin = 1000, n.chains = 1, n.thin = 1)

## End(Not run) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T21:09:23.523

该文件位于`R_LIBS/fanplot/model/`您`R_LIBS`的包库的位置。

在示例代码中，该文件是通过以下方式找到的`system.file()`：

```
system.file("model", "ew.txt", package = "fanplot") 
```

然后下一行将模型写入**工作**目录`ew.txt`中的文件。目前尚不清楚您想要哪个。如果随包装一起找到它，如上所示。或者从 CRAN 下载源代码压缩包（来自[cran 上的包页面](http://cran.r-project.org/web/packages/fanplot/index.html)。**`ew.txt``R_LIBS``tar.gz`**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T20:55:00.037

当您在交互式会话中运行此代码时，使用`getwd`来查看您的工作目录是什么。这应该是包含已保存文本文件的目录。**

# python - MySQL 行在程序退出时删除

> ID：11785526
> 
> 赞同：2
> 
> 时间：2012-08-02T20:49:24.333
> 
> 标签：python, mysql, mysql-python

我正在使用 Python 和 MySQLdb 向我的数据库添加行。似乎当我的脚本退出时，行被删除了。我在脚本退出前的最后几行在表格上做了一个“select *”，它显示了我的一行。当我重新运行脚本时，第一行（打开连接后）执行相同的“选择 *”并返回零结果。我在这里真的很茫然。我已经为此工作了大约 2 个小时，但无法理解什么可以访问我的数据库。

此外，在运行脚本之间，我从终端手动运行“select *”，结果为零。

如果我从终端手动添加一行，它似乎会持续。

插入行的查询：

```
cursor.execute("INSERT INTO sessions(username, id, ip) VALUES (%s, %s, %s)", (username, SessionID, IP])) 
```

我用来检查数据的查询：

```
cursor.execute("select * from sessions")
print cursor.fetchall() 
```

这显示程序退出之前的行，然后在程序再次运行时不显示任何内容。

提前感谢所有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T21:03:33.573

执行查询后，您似乎需要进行`connection.commit()`更改（替换`connection`为您的数据库连接变量）。

[http://docs.python.org/library/sqlite3.html](http://docs.python.org/library/sqlite3.html)

**Connection.commit()**：此方法提交当前事务。如果您不调用此方法，则自上次调用 commit() 以来所做的任何事情都不会从其他数据库连接中看到。如果您想知道为什么看不到已写入数据库的数据，请检查您是否忘记调用此方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T21:05:52.590

检查另一个问题：[Python MySQLdb 更新查询失败](https://stackoverflow.com/questions/1028671/python-mysqldb-update-query-fails)

您可以找到一些关于如何提交、如何使用自动提交进行连接等的示例。

# jquery - 如何将项目添加到连接了链接事件的表中

> ID：11785527
> 
> 赞同：0
> 
> 时间：2012-08-02T20:49:27.637
> 
> 标签：jquery, html

假设我有一张桌子：

```
<table id="myTable">
    <tbody>
        <tr>
            <td>
                <a class="removeLink" >Remove</a>
            </td>
        </tr>
        <tr>
            <td>
                <a class="removeLink" >Remove</a>
            </td>
        </tr>
    </tbody>
</table>
<a id="addLink">Add</a> 
```

所以这里游戏的目的是，当点击删除链接时，相关的行将消失。

所以我有一些javascript：

```
<script type="text/javascript">
    $(document).ready(function () {

        $('.removeLink').click(function () {

            $(this).closest('tr').hide('slow');

        });

        $('#addLink').click(function () {

            $('#myTable').append('<tr><td><a class="removeLink" >Remove</a></td></tr>');

        });

    });
</script> 
```

所以我有消失的部分来处理这个问题。

但是，添加链接会向表中添加一行。

现在，当我在已添加的行上单击删除时，它不会消失。有道理，因为它没有设置点击事件。

如何对此进行编码，以便添加的链接将它们的 removeLinks 挂钩隐藏？

这也是添加行的一种奇怪方式吗？有没有更好的办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T20:52:56.597

您可以使用`on()`：

```
$('#myTable').on('click', 'a.removeLink', function(e){
    $(this).closest('tr').remove();
}); 
```

`on()``#myTable`本质上将命名的事件绑定到指定的元素（`on()`方法。如果是，则执行匿名的第三个参数函数。

将事件处理绑定到最接近受事件处理/绑定点存在于 DOM 中的事件影响的元素的元素似乎更好。在这种情况下，这将是`tbody`，这将导致以下（仅略微）修改的代码：

```
$('#myTable tbody').on('click', 'a.removeLink', function(e){
    $(this).closest('tr').remove();
} 
```

其他替代方案是`delegate()`（尽管这已被`on()`jQuery 1.7 取代）：

```
$('#myTable').delegate('a.removeLink', 'click', function(e){
    $(this).closest('tr').remove();
} 
```

或者`live()`，尽管从 jQuery 1.7 开始不推荐使用，并且即使在`live()`可用的地方，`delegate()`也建议优先使用。那说：

```
$('#myTable').live('click', 'a.removeLink', function(e){
    $(this).closest('tr').remove();
} 
```

参考：

*   [`delegate()`](http://api.jquery.com/delegate/).
*   [`live()`](http://api.jquery.com/live/).
*   [`on()`](http://api.jquery.com/on/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T20:57:17.110

如果`on()`不起作用，您可以尝试`live()`.

```
$('a.removeLink').live('click', function(e){
    $(this).closest('tr').remove();
}); 
```

它会检查单击的元素是否是#myTable 中的“a”，而不是检查该元素是否在页面加载时位于 DOM 中。通过这种方式，您可以动态地将元素添加到您的页面，并且仍然可以获得您期望的效果。

# mongodb - DDD 和 MongoDB：让 Mongo 创建 ObjectID 可以吗？

> ID：11785530
> 
> 赞同：5
> 
> 时间：2012-08-02T20:49:51.040
> 
> 标签：mongodb, domain-driven-design, factory-pattern, hilo, object-identity

根据 DDD（蓝皮书，Evans），工厂有责任创建处于有效状态的聚合根。这是否意味着它应该能够创建技术 id（mongoDB 世界中的 objectId）以及域 id？

一方面，这似乎是一个技术细节，让 Mongo 处理 ID 的创建似乎没问题。

另一方面，启用按 id 查询（通过`getById`在 DDD 存储库中）将技术 id 暴露给域，这反过来又会使工厂负责创建它。

也许我无法理解技术 ID 与 DomainId 的不同用例/重叠等，或者我可能过于热心，但无论如何我都会很感激你的意见。

简而言之：在 DDD 中：工厂是否应该能够创建技术 ID 以及域 ID？

可能的实现：Hi/Lo（[如何在 MongoDB Norm 中设置 hilo 序列起始值？](https://stackoverflow.com/questions/3475797/how-to-set-the-hilo-sequence-starting-value-in-mongodb-norm)）

**编辑：**虽然 hi/lo 方式将工厂暴露给持久层，但只有存储库应该知道。嗯

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T04:08:59.407

工厂不必关心 ID，因为聚合的有效性与身份正交。可以通过几种不同的方式分配身份，或者作为来自关系数据库的增量 ID，在这种情况下，存储库必须对其进行管理，或者作为 UUID/GUID，在这种情况下，它可以由工厂或存储库分配，或者甚至调用客户端也很方便，因为默认情况下客户端具有密钥。

只要有可能，我都会尝试为聚合维护一个单一的身份。我不确定 MongoDB 是否需要额外的技术 ID，但如果需要并且域 ID 不能用于其位置，那么 MongoDB 应该自行管理并在幕后管理它。

# c# - 无法将 ProviderUserKey 转换为 GUID？

> ID：11785532
> 
> 赞同：1
> 
> 时间：2012-08-02T20:49:55.630
> 
> 标签：c#, asp.net, asp.net-mvc, guid

嗨，我基本上是在尝试创建自己的 Facebook 登录（并创建一个本地帐户）。除了这一点，我一切正常：创建帐户后，我尝试设置基本配置文件并将其绑定回帐户。我可以创建帐户，但是当我尝试将 providerkey 转换为 Guid 时，它返回 null。如果我尝试不强制转换它，我会收到错误“无法将对象隐式转换为 Guid”providerkeyvalue 本身不为空，并且格式类似于 {7092216C-943F-4D30-9432-6CD10CF3447E}

```
// Attempt to register the user
MembershipCreateStatus createStatus;
Membership.CreateUser(fbprofile.first_name + fbprofile.id, GenerateRandomPassword(8), fbprofile.email, null, null, true, null, out createStatus);

if (createStatus == MembershipCreateStatus.Success) 
{
    MembershipUser user = Membership.GetUser(fbprofile.first_name + fbprofile.id); //Gotta get the GUID and tie it to the profile

    profile.UserID = (Guid)user.ProviderUserKey;
}else{
} 
```

编辑：如果它有所作为，则 ProviderUserKey 设置为成员资格类中的对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T20:55:18.783

您可以将字符串传递给Guid 结构的[构造函数：](http://msdn.microsoft.com/en-us/library/96ff78dc.aspx)

```
// user.ProviderUserKey == "{7092216C-943F-4D30-9432-6CD10CF3447E}"
profile.UserID = new Guid(user.ProviderUserKey); 
```

构造函数接受各种格式的 GUID，例如“dddddddddddddddddddddddddddddddd”、“dddddddd-dddd-dddd-dddd-dddddddddddd”、“{dddddddd-dddd-dddd-dddd-dddddddddddd}”等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T21:27:59.413

根据您的评论，您的问题是您没有创建 Profile 类的实例。如果不首先创建该对象的实例，就不能将值分配给空对象。

“对象引用未设置为对象的实例”意味着您正在尝试取消引用空对象，即您正在尝试访问为空的对象的成员或属性。

在该行代码中，只有两件事会导致该错误。profile 为 null 或 user 为 null，如果其中任何一个为 null，您将收到此错误。这是唯一可能的事情。

# php - 返回数组中的 MySQL 行

> ID：11785536
> 
> 赞同：0
> 
> 时间：2012-08-02T20:50:09.717
> 
> 标签：php, mysql

我一直在研究一种应该返回 MySQL 查询行的 OOP 方法。我必须有以下格式的数据数组：

```
$rows = array('row'=> rownum, 'fld1'=> fldval .... 'fldn' => fldval); 
```

我遇到的是以下两个问题：

返回

```
$rows = array('0'=>fldval, 'fld1'=> fldval .... 'n'=> fldval, 'fldn' => fldval); 
```

或单排

```
$rows = array('fld1'=> fldval .... 'fldn' => fldval); 
```

有点沮丧，因为我尝试过的每个 PHP mysql 函数都有某种愚蠢的废话缺陷，并且不会做一个直接的过程。

我认为某处有一个很好的例子，可以让我超越废话限制，但还没有发现任何有用的东西！

我已经尝试了以下所有方法：

```
$row = mysql_result($db_res,$n);
$row = mysql_fetch_array($db_res);
$row = mysql_fetch_assoc($db_res);
$row = mysql_fetch_object($db_res);
$row = mysql_fetch_row($db_res); 
```

没有一个工作成功！用于取出虚假的“数字”数组条目。我写：

```
foreach ($row as $k => $v)
   if (is_numeric($k)) { continue; }
   $result[$k] = $v;
}  // end foreach $row
$row = array_push($row, 'row'=>$rownum, $result); 
```

希望有人给个链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T21:15:50.277

```
$list = array();
$query = "SELECT value FROM table";
$resource = mysql_query($query);
while($row = mysql_fetch_assoc($resource))
{
   $list['fld' . (1 + count($list))] = $row['value'];
}
$list = array('row' => count($list)) + $list; 
```

如果表有 3 行，上面的代码将为您提供一个数组，如：

```
array(
    'row' => 3,
    'fld1' => 12,
    'fld2' => 34,
    'fld3' => 56
); 
```

# r - YAML 忽略像 `X.0` 这样的十进制值

> ID：11785538
> 
> 赞同：1
> 
> 时间：2012-08-02T20:50:13.973
> 
> 标签：r, yaml

在加载具有诸如 25.0 之类的值的 yaml 文件时，将`.0`被忽略，我得到的是 25。是否可以强制 yaml 在不操作数据的情况下考虑该值？我尝试将值括在单引号/双引号中，但这不起作用。

[编辑]：我正在使用`yaml`R 编程语言的解析器包。返回的数据类型是`double`。如果我将值设置为 25.2，我会得到相同的值。如何强制 YAML/R 按原样读取 YAML 中的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:32:31.807

您的问题是解析器识别出这些是浮点数，而在 R 中，25.0 和 25 之间没有区别。例如，试试这个：

`identical(25.0, 25)`

25.0 和 25 只是同一个浮点数的两种不同表示。如果您想保留提供数据的形式，您必须将它们作为字符串读取（如果您需要执行计算，您可以稍后将其转换为数字）。您可以使用处理程序执行此操作：

`yaml.load("25.0", handlers=list("float#fix"=function(x) as.character(x)))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T21:58:11.067

也许这会有所帮助：[http ://tolstoy.newcastle.edu.au/R/help/06/05/28016.html](http://tolstoy.newcastle.edu.au/R/help/06/05/28016.html)

建议更改数字设置，并可能将数字四舍五入以避免太多小数位。

> 选项（数字=2）
> 
> 格式（roundf（x，2），nsmall = 2）

# android - 检测 ListView 中的水平滑动

> ID：11785541
> 
> 赞同：8
> 
> 时间：2012-08-02T20:50:26.347
> 
> 标签：android

我需要检测列表视图中的水平滑动。我应该使用手势检测器还是 onTouch 事件。我需要支持Android 2.1+

一篇文章指出需要在 ListView 中覆盖 onInterceptTouchEvent，如下所示：

```
 @Override public boolean onInterceptTouchEvent(MotionEvent ev) { 
    switch (ev.getAction()) {  case   MotionEvent.ACTION_DOWN: // reset difference values mDiffX = 0; mDiffY = 0;

        mLastX = ev.getX();
        mLastY = ev.getY();
        break;

    case MotionEvent.ACTION_MOVE:
        final float curX = ev.getX();
        final float curY = ev.getY();
        mDiffX += Math.abs(curX - mLastX);
        mDiffY += Math.abs(curY - mLastY);
        mLastX = curX;
        mLastY = curY;

        // don't intercept event, when user tries to scroll vertically
        if (mDiffX > mDiffY) {
            return false; // do not react to horizontal touch events, these events will be passed to your list item view
        }
}

return super.onInterceptTouchEvent(ev);
} 
```

不确定这是否有效或者是最好的方法。这个问题在 8 天前被无意识地关闭并没有帮助： [在 ListView 中滑动手势 - Android](https://stackoverflow.com/questions/11647276/swipe-gesture-inside-listview-android?rq=1)

# jaxb - JAXBContext、jaxb.properties 和 moxy

> ID：11785543
> 
> 赞同：6
> 
> 时间：2012-08-02T20:50:29.707
> 
> 标签：jaxb, eclipselink, moxy

`jaxb.properties`需要与您在其上创建 JAXBContext***的域类位于同一个包中。***

我正在使用 Moxy 的 xml 驱动配置，因为我不想使用注释或 XJC 生成的对象。我有一个现有的域类，它们分布在多个包中。这是否意味着我需要`jaxb.properties`在所有这些包中都有存在或有更好的选择（也许编写我自己的一些可以从 jvm arg 或其他东西读取的接口的实现）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-03T14:08:36.990

> 这是否意味着我需要在所有这些包中都存在 jaxb.properties？

如果您正在创建您的`JAXBContext`on 类，那么您需要`jaxb.properties`在传入的域类的至少一个包中包含一个文件。在下面的示例中，您可以在或中包含一个`jaxb.properties`文件。`package1``package2`

```
JAXBContext jc = JAXBContext.newInstance(package1.Foo.class, package2.Bar.class); 
```

如果您正在创建您`JAXBContext`的包名称，那么您需要`jaxb.properties`在至少一个包中包含一个文件。请注意，软件包由“：”分隔。

```
JAXBContext jc = JAXBContext.newInstance("package1:package2"); 
```

* * *

> 或者有更好的选择

我的偏好是将标准 JAXB API 与`jaxb.properties`文件一起使用，以将 MOXy 指定为 JAXB 提供程序。有些人更喜欢使用本机 MOXy API 来执行此操作：

```
JAXBContext jc = org.eclipse.persistence.jaxb.JAXBContextFactory.createContext(new Class[] {Foo.class, Bar.class}, null); 
```

* * *

**了解更多信息**

*   [http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html)

# c# - 等待按键（或）N 秒过期

> ID：11785546
> 
> 赞同：8
> 
> 时间：2012-08-02T20:50:34.363
> 
> 标签：c#, timer, sleep, keypress

假设我的控制台程序执行多个冗长的任务。在这些任务之间，我希望它暂停 - 几秒钟*或*直到按下任何键。（以先到者为准。）

这些标准很容易自行检查，但是当我尝试将它们组合起来时它们拒绝相处：要么计时机制在 ReadKey 启动之前暂停几秒钟，*要么*Readkey 完全阻塞线程直到满足。我怎样才能同时满足这两个条件？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-02T20:57:37.097

在 C# 4.0 中执行此操作的一种方法：

```
Task.Factory.StartNew(() => Console.ReadKey()).Wait(TimeSpan.FromSeconds(5.0)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T20:57:58.033

一种方法是根本没有计时器。创建一个循环，使线程休眠 25 毫秒，然后检查是否已通过[Console.KeyAvailable](http://msdn.microsoft.com/en-us/library/system.console.keyavailable.aspx)（非阻塞）按下某个键，或者直到`DateTime.Now()`循环开始的时间超过暂停。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-11T08:43:51.240

从ikh的回答延伸我想用我的倒计时

```
 var original = DateTime.Now;
        var newTime = original;

        var waitTime = 10;
        var remainingWaitTime = waitTime;
        var lastWaitTime = waitTime.ToString();
        var keyRead = false;
        Console.Write("Waiting for key press or expiring in " + waitTime);
        do
        {
            keyRead = Console.KeyAvailable;
            if (!keyRead)
            {
                newTime = DateTime.Now;
                remainingWaitTime = waitTime - (int) (newTime - original).TotalSeconds;
                var newWaitTime = remainingWaitTime.ToString();
                if (newWaitTime != lastWaitTime)
                {
                    var backSpaces = new string('\b', lastWaitTime.Length);
                    var spaces = new string(' ', lastWaitTime.Length);
                    Console.Write(backSpaces + spaces + backSpaces);
                    lastWaitTime = newWaitTime;
                    Console.Write(lastWaitTime);
                    Thread.Sleep(25);
                }
            }
        } while (remainingWaitTime > 0 && !keyRead); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T20:55:49.573

启动两个线程。一个监听按键，另一个等待一段时间。让主线程等待，除非任何一个完成。然后继续并忽略其他线程响应。:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T21:08:04.570

像这样的东西？

```
bool IsPaused;
bool IsKeyPaused;

void Pause(){}
void UnPause(){}

void KeyDown(){
    if(!IsPaused)
    {
        IsPaused = true;
        IsKeyPaused = true;
        Pause();
    }
}
void KeyUp(){
    if(IsKeyPaused)
    {
        IsPaused = false;
        IsKeyPaused = false;
        UnPause();
    }
}
void TimerPause(){
    if(!IsPaused)
    {
        IsPaused = true;
        Pause();
    }
}
void TimerEnd(){
     UnPause();
} 
```

# c# - xsl 转换 - 删除重复

> ID：11785548
> 
> 赞同：1
> 
> 时间：2012-08-02T20:50:39.497
> 
> 标签：c#, asp.net, xslt

请原谅我之前的类似帖子。希望我可以从很好的反馈中学习，但仍然在 XPath 上有点挣扎。对于类似的帖子，我再次感到抱歉！

当前 XML

```
<?xml version="1.0" encoding="utf-8" ?>
<data>
    <table_1 dropdown1="Item1"></table_1>
    <listitems key1="Item1" name="" key2="Id2"/>
    <listitems key1="Item1" name="Item A" key2="Id2"/>
    <listitems key1="Item1" name="Item B" key2="Id2"/>
    <listitems key1="Item1" name="" key2="Id4"/>
    <listitems key1="Item1" name="Item A" key2="Id4"/>
    <listitems key1="Item1" name="Item B" key2="Id4"/>
    <listitems key1="Item2" name="" key2="Id6"/>
    <listitems key1="Item2" name="Item C" key2="Id6"/>
    <listitems key1="Item2" name="Item D" key2="Id6"/>
</data> 
```

当前 XSL

```
<xsl:template match="/">
    <html>
        <head>
            <title>Untitled</title>
        </head>
        <body>
            <xsl:for-each select="/data/listitems[@key1=/data/table_1/@dropdown1]">
                <xsl:value-of select="@name"/>                    
                <br/>
            </xsl:for-each>

        </body>
    </html>
</xsl:template>

<xsl:template match="listitems">
    <xsl:value-of select="concat(@name, ' ')" />
</xsl:template> 
```

当前结果：

![在此处输入图像描述](../Images/264bcfbabe4affdd8c0c79df39252ed9.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T20:56:34.693

假设您将`<listitems>`具有相同`name`属性的元素视为重复元素，您可以使用 XPath 的`preceding-sibling`轴来忽略任何重复元素：

```
<xsl:for-each select="/data/listitems[@key1=/data/table_1/@dropdown1][not(@name = preceding-sibling::listitems/@name)]"> 
```

这意味着，您选择所有您选择的项目，附加限制是没有任何前面`<listitems>`的兄弟元素的`name`属性与被测试元素的属性具有相同的值。

# git - 确保 git 历史记录相同

> ID：11785553
> 
> 赞同：2
> 
> 时间：2012-08-02T20:50:45.940
> 
> 标签：git

我有一个 Linux 内核的 git repo。我用标准的 git clone 做到了。让我们称该仓库为“服务器”。我也有“计算机 a”，它克隆了服务器。我在“计算机 a”上开发了很长时间，然后推回“服务器”，但总是在一个单独的分支中。一段时间后，我想更新服务器，所以我在“计算机 a”上运行了以下命令

```
git checkout master
git pull git://linus/kernel.git
git push origin master    #here origin is 'server' 
```

所以现在我的服务器的主分支可能在 master 中有不是来自主内核 repo 的更改。如果有的话，我怎样才能找到它们？换句话说，如何验证 server/master 中的整个历史记录与 Linus 的 master 分支相同？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T20:56:54.233

Git 可以很容易地*验证*两个分支的整个历史记录是否相同：

*   如果 SHA1 提交 ID 匹配，则历史记录相同
*   否则，历史不同

如果哈希值不同，[git cherry](http://git-scm.com/docs/git-cherry)命令可以帮助识别不在上游分支中的提交。

`git pull --ff-only`如果您从上游分支拉出并希望确保*未*完成与本地工作的合并，则另一个提示是使用。使用后`--ff-only`，SHA1 提交 ID 将匹配，或者整个命令将失败。

# android - 通过 eclipse/java 将 logcat 输入发送到 monkeyrunner 会导致问题

> ID：11785558
> 
> 赞同：2
> 
> 时间：2012-08-02T20:51:16.300
> 
> 标签：android, adb, logcat, monkeyrunner, androidviewclient

我正在开发一种工具来识别 android 应用程序中的小部件，并在单击时显示它们的属性。我创建了一个可以成功执行此操作的独立工具，但是在将独立工具转换为 Eclipse 插件时遇到了问题，这对于打包到我们的最终产品中是必需的。

该工具的操作方式是首先在模拟器上运行透明覆盖应用程序。此应用程序收集用户按下屏幕的坐标并将其写入 Android 日志。然后，在模拟器上启动要测试的应用程序。

adb logcat 作为标准输入通过管道传输到处理小部件识别的 monkeyrunner 脚本中。实时，monkeyrunner 脚本解析 logcat 输入的坐标新闻信息。monkeyrunner 脚本使用 AndroidViewClient (https://github.com/dtmilano/AndroidViewClient)，这是一个可以列出屏幕上所有 View 对象及其属性的工具。使用坐标印刷信息，从视图列表中选出具有正确坐标属性的视图，并打印出其属性。

我遇到的问题源于尝试在 eclipse/java 的上下文中处理 logcat 输出到 monkeyrunner 脚本的管道。如果我在单独的并发进程中运行 adb logcat 和 monkeyrunner，并将 logcat 的 InputStream 传输到 monkeyrunner 的 OutputStream，似乎存在一些锁定问题，因为 monkeyrunner 永远不会接收坐标信息作为输入。我也尝试将流处理程序放在单独的线程中，但这没有效果。

由于并发进程有时会成为问题的根源，我想直接在monkeyrunner中从logcat中读取，因此只有一个主进程。在 monkeyrunner 中，一旦与模拟器建立连接，就可以在其上打开 adb shell (https://developer.android.com/tools/help/MonkeyDevice.html#shell)。Logcat 是一个非常常见的 adb 命令，但是当我运行 device.shell("logcat") 时，它失败了

```
 [main] [com.android.chimpchat.adb.AdbChimpDevice] Error executing command: logcat 
```

和

```
 [main] [com.android.chimpchat.adb.AdbChimpDevice]com.android.ddmlib.ShellCommandUnrespo‌​nsiveException – 
```

不幸的是，我的谷歌技能无法为我找到解决这个问题的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T05:19:35.437

好吧，我想这就是你要找的东西：

```
#! /usr/bin/env monkeyrunner
import time
import subprocess

# Imports the monkeyrunner modules
from com.android.monkeyrunner import MonkeyRunner, MonkeyDevice, MonkeyImage

# Connects to the current device, returning a MonkeyDevice object
device = MonkeyRunner.waitForConnection()

p = subprocess.Popen([ "adb", "logcat", "TEST:V", "*:S" ], shell=False,
        stdout=subprocess.PIPE)
i = 0
while True:
    device.shell("log -t TEST This is line %d" % i)
    i += 1
    print p.stdout.readline()
    time.sleep(1) 
```

连接到设备、写入和读取 logcat 的 monkeyrunner 脚本。

顺便说一句，我很高兴听到您发现[AndroidViewClient](https://github.com/dtmilano/AndroidViewClient)很有用。

# iphone - 如何禁用横向？

> ID：11785565
> 
> 赞同：36
> 
> 时间：2012-08-02T20:51:59.283
> 
> 标签：iphone, objective-c, ios, xcode, orientation

我正在制作一个 iPhone 应用程序，我需要它处于纵向模式，所以如果用户将设备横向移动，它不会自动旋转。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-08-02T20:55:04.110

要禁用**特定视图控制器的**方向，您现在应该覆盖[`supportedInterfaceOrientations`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIViewController_Class/#//apple_ref/occ/instm/UIViewController/supportedInterfaceOrientations)和[`preferredInterfaceOrientationForPresentation`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIViewController_Class/#//apple_ref/occ/instm/UIViewController/preferredInterfaceOrientationForPresentation)。

```
- (UIInterfaceOrientationMask)supportedInterfaceOrientations {
    // Return a bitmask of supported orientations. If you need more,
    // use bitwise or (see the commented return).
    return UIInterfaceOrientationMaskPortrait;
    // return UIInterfaceOrientationMaskPortrait | UIInterfaceOrientationMaskPortraitUpsideDown;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {
    // Return the orientation you'd prefer - this is what it launches to. The
    // user can still rotate. You don't have to implement this method, in which
    // case it launches in the current orientation
    return UIInterfaceOrientationPortrait;
} 
```

如果您的目标是 iOS 6 之前的版本，则需要该[`shouldAutorotateToInterfaceOrientation:`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIViewController_Class/#//apple_ref/occ/instm/UIViewController/shouldAutorotateToInterfaceOrientation:)方法。通过更改它何时返回是，您将确定它是否会旋转到所述方向。这将只允许正常的纵向方向。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait); 

    // Use this to allow upside down as well
    //return (interfaceOrientation == UIInterfaceOrientationPortrait || interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown);
} 
```

**请注意，`shouldAutorotateToInterfaceOrientation:`在 iOS 6.0 中已弃用**。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2014-06-13T12:45:20.143

# Xcode 5 及以上

*   在左侧栏中的 Project Navigator 中单击您的项目以打开项目设置
*   转到**常规**选项卡。
*   **在“设备方向**”下的“**部署信息**”部分取消选中您不需要的选项

 **![显示点击位置的屏幕截图](../Images/9c7e16f2bba5132f792f1708ace8ab9c.png)

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2013-08-17T15:25:28.767

# Xcode 4 及以下

对于那些错过它的人：您可以使用项目设置屏幕来修复整个应用程序的方向（无需覆盖每个控制器中的方法）：

![在此处输入图像描述](../Images/342908697b65936f6e85d385269e323e.png)

就像切换支持的界面方向一样简单。您可以通过单击左侧面板中的项目 > 应用程序目标 > 摘要选项卡来找到。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2019-08-22T08:21:01.110

**适用于 iPhone 和 iPad（通用）的最简单的解决方案 - 它删除了info.plist**文件或**Project -> Info -> Custom iOS Target Properties**中不必要的方向。

只需从列表中添加或删除方向项：

*   ****iPhone**支持的**界面方向****
*****   **iPad 支持的界面方向 (** iPad **)******

 ****[![在此处输入图像描述](../Images/477087c28f8f7fa6f36aac28ae63870f.png)](https://i.stack.imgur.com/z1khx.jpg)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-11-10T05:39:35.737

**如果您想禁用iPhone 和 iPad**的横向显示。

转到**目标**并转到**常规选项卡**。请参阅下面的屏幕并**取消选择横向左和横向右**。

[![在此处输入图像描述](../Images/6dceaf65649ff8aa9777c7ce04b2601d.png)](https://i.stack.imgur.com/yQbNg.png)

在这种情况下，只有 iPhone 横向模式将被禁用，而不是 iPad。**对于 iPad，所有模式都已启用**。如果您想从 Universal 到 iPad 选择设备选项。它看起来像这样。请参见下面的屏幕。

[![在此处输入图像描述](../Images/81353172c7c3eb6b518019e4d7e63403.png)](https://i.stack.imgur.com/ilVAm.png)

现在您需要取消选择除iPad**肖像之外的所有模式。**请参见下面的屏幕截图。

[![在此处输入图像描述](../Images/ad8671bb1dd94f60d43876cc2703974d.png)](https://i.stack.imgur.com/gbSQy.png)

现在您成功地为**所有设备**禁用了**除 Portrait 之外**的所有模式。

 *** * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-03-23T09:46:42.823

**Swift 3** 如果你有一个导航控制器，像这样子类化它（仅用于纵向）：

```
class CustomNavigationViewController: UINavigationController {

  override var supportedInterfaceOrientations: UIInterfaceOrientationMask {
    return UIInterfaceOrientationMask.portrait
  }

  override var preferredInterfaceOrientationForPresentation: UIInterfaceOrientation {
    return UIInterfaceOrientation.portrait
  }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-03T01:58:47.797

`shouldAutorotateToInterfaceOrientation`从您的课程中完全删除该方法也可以。如果您不打算轮换，那么在您的类中使用该方法是没有意义的，代码越少越好，保持清洁。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-04-25T07:00:15.803

**Xcode 8、Xcode 9、Xcode 10 及更高版本**

[![在此处输入图像描述](../Images/ad8671bb1dd94f60d43876cc2703974d.png)](https://i.stack.imgur.com/gbSQy.png)

此外，在**Info.plist**文件中进行更改

[![在此处输入图像描述](../Images/5a5961cdc3da0b588649cedf182aa067.png)](https://i.stack.imgur.com/wBE7q.png)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-10-23T03:31:21.133

如果您希望应用程序仅在纵向模式下运行，

在您的`viewDidLoad`方法下方复制以下代码行

```
override var supportedInterfaceOrientations: UIInterfaceOrientationMask {
   get {
      return .portrait
   }
} 
```

这将为您的应用程序锁定横向模式。同样，将 .portrait 替换为 .landscape 将以横向模式运行您的应用程序。

如果未指定，您的应用程序将在两种模式下运行。

或者，您可以从 Xcode Builder 锁定方向，如下所示。

[![在此处输入图像描述](../Images/d77d9ba772e904830001c380cdf933f8.png)](https://i.stack.imgur.com/Kxebr.jpg)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-02-04T10:20:34.413

即使我将设备方向设置为仅纵向，我在 Xcode 13.0 上也遇到了同样的问题。

将这两行添加到 Info.plist 解决了我的问题。

[![信息列表](../Images/88723bcc181420c0e78dfc78828c7527.png)](https://i.stack.imgur.com/a8Ktm.png)********

# linux - 将文件合并为一个

> ID：11785579
> 
> 赞同：6
> 
> 时间：2012-08-02T20:52:41.713
> 
> 标签：linux, unix, gzip, solaris, sunos

目前我在这个目录中-

```
/data/real/test 
```

当我`ls -lt`在命令提示符下执行时。我得到下面的东西-

```
REALTIME_235000.dat.gz
REALTIME_234800.dat.gz
REALTIME_234600.dat.gz
REALTIME_234400.dat.gz
REALTIME_234200.dat.gz 
```

如何在 Unix 中将上述五个合并`dat.gz files`为一个`dat.gz file`而不丢失任何数据。我是 Unix 新手，对此我不确定。谁可以帮我这个事？

**更新：-**

我不确定是否应该解压缩五个文件中的每一个然后合并为一个最好的方法？还是将所有这些`five dat.gz`合二为一`dat.gz`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-02T20:57:22.063

如果可以以随机顺序连接文件内容，那么以下命令将起到作用：

```
zcat REALTIME*.dat.gz | gzip > out.dat.gz 
```

**更新**

这应该解决订单问题：

```
zcat $(ls -t REALTIME*.dat.gz) | gzip > out.dat.gz 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-02T23:14:56.637

当您对结果进行压缩时，您希望发生什么？如果您希望这五个文件重新出现，那么您需要使用 gzip (.gz) 格式以外的其他格式。您需要使用 tar (.tar.gz) 或 zip (.zip)。

如果您希望 gunzip 的结果是原始文件的 gunzip 的串联，那么您可以简单地将文件组合在一起（不是 zcat 或 gzcat）。gunzip 然后将它们解压缩为单个文件。

```
cat [files in whatever order you like] > combined.gz 
```

然后：

```
gunzip combined.gz 
```

将产生一个输出，它是原始文件的 gunzip 的串联。

将它们全部解压缩然后将它们重新压缩为一个流的建议是完全没有必要的。

# ios - 如何将xib转换为故事板？

> ID：11785583
> 
> 赞同：13
> 
> 时间：2012-08-02T20:52:56.763
> 
> 标签：ios, xcode, storyboard, xib

我已经下载了[转轮控制](https://github.com/funkyboy/How-To-Create-a-Rotating-Wheel-Control-with-UIKit/zipball/master)项目。这是一个使用 xib 的 XCode 项目，我希望它使用 Storyboards。有没有将xib“转轮控制”文件移动到情节提要的好方法？

有没有人有将 xib 文件移动到 Storyboard 的经验？

我尽力做到最好，但是当我运行程序时，我得到一个 `NSInvalidArgumentException`.

谁能解释一下，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-02T20:59:13.513

我认为“不”是简短的回答。去年我向 Apple 提出了雷达，但他们还没有做任何事情！

您有时可以打开 XIB 并将控件复制并粘贴到情节提要中，但格式有时是错误的，您仍然需要手动调整插座和操作。

没有理由不能在一个项目中同时使用 Storyboard 和 XIB；也许这是短期内最好的方法。

# iphone - 在 chrome for iphone 上提交表单后的空白页

> ID：11785585
> 
> 赞同：0
> 
> 时间：2012-08-02T20:53:06.183
> 
> 标签：iphone, google-chrome

iphone (19.0.1084.60) 的 chrome 有一个奇怪的问题。该网站运行良好，除了一个特定的问题：用户进入一个带有提交表单的小 javascript 片段的页面：

```
<script>                                                                                                                                                                                                                                     
window.onload = function() {                                                                                                                                                                                                                 
    document.forms['my_form'].submit();                                                                                                                                                                                                 
}                                                                                                                                                                                                                                            
</script> 
```

js提交工作正常，但是当加载下一页时，iphone上的chrome显示一个空白页面。加载条卡在 80% 左右，并且网络指示微调器一直在旋转...

这不会发生在 Linux 上的 chrome 或 iphone 上的 safari 上。

如果我去地址栏并重新加载页面，它会显示它就好了......

任何想法如何处理/调试此类问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T22:23:31.787

您是否尝试将文件夹设置为权限 0755 并将文件设置为 0644？

我在 Safari 中的 iPhone 上遇到了这个问题，这为我解决了这个问题。

请注意，这是通过 iOS 5 上的 3G 连接进行的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T11:42:30.277

看起来在 Chrome for iOS 的最新更新中，这个问题不再存在

# actionscript-3 - 针对 hitTest 对象测试数组的值

> ID：11785586
> 
> 赞同：0
> 
> 时间：2012-08-02T20:53:11.910
> 
> 标签：actionscript-3, collision-detection, hittest

好的，我的主类中有一个数组，如下所示：

```
objectArray:Array = [ ]; 
```

我有三个函数可以创建不同的项目，如硬币、敌人、心等。每个添加的项目都被推入`objectArray`. 我正在尝试编写这个函数来测试我的子弹对这些对象中的任何一个：

```
private function checkCollisions() :void{
    var bullet:MovieClip;
    for (var j:int = 0; j < objectArray.length; j++){
        object = objectArray[j];
        for(var i:int = 0; i < bulletArray.length; i++){
            bullet = bulletArray[i];
            if (objectArray[j].hitTestPoint(bullet.x, bullet.y, true)) {
                container.removeChild(bullet);
                bulletArray.splice(i,1);

                if (objectArray[j] == Enemy[j]){
                    container.removeChild(objectArray[j]);
                    objectArray.splice(j,1);
                    trace("enemy hit");
                }
            }
        }
    }
} 
```

问题来自这部分：

```
if (objectArray[j] == Enemy[j]){  \\problem
    container.removeChild(objectArray[j]);
    objectArray.splice(j,1);
    trace("enemy hit");
} 
```

我一直在尝试寻找一种方法来测试正在被命中的对象是否针对某个值（例如“敌人”）进行测试，以便我可以根据被命中的对象类型产生不同的结果。无论我尝试哪种测试组合，我似乎都无法让它响应。当我跟踪`objectArray[j]`时，它会产生`[object Enemy]`结果。有不同的测试数组值的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T22:10:01.557

听起来您想测试其中的对象`objectArray[j]`是否是`Enemy`对象。您可以使用操作员执行此`is`操作：

```
if (objectArray[j] is Enemy)
{
    container.removeChild(objectArray[j]);
    trace ("enemy hit");
} 
```

**编辑**

此外，您可能希望以相反的顺序迭代项目符号/对象数组，因为您可能会在迭代它时从数组中删除条目。

```
for (var j:int = objectArray.length -1; j >= 0; j--){
 // then do the same with the bullet array 
```

# java - 为父 POM 指定与子 POM 不同的 groupId

> ID：11785587
> 
> 赞同：2
> 
> 时间：2012-08-02T20:53:14.920
> 
> 标签：java, maven-2

我想创建一个 Maven Parent POM 文件，其 groupId 为`com.company.maven`，它为其子项提供默认 groupId `com.company`。这可能吗？如果是这样，我该如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T18:10:45.110

只需像这样创建父 pom：

```
<project...>

  <groupId>com.company.maven</groupId>
  <artifactId>parent</artifactId>
  <version>..</version>
...
</project> 
```

并在子 pom 中定义：

```
<project...>
  <parent>
    <groupId>com.company.maven</groupId>
    <artifactId>parent</artifactId>
    <version>..</version>
  </parent>

  <groupId>com.company</groupId>

</project> 
```

换句话说，可以这样做，但我不会这样做，因为我会将父级命名为“com.company”，而将子级命名为“com.company.maven”。我会将 groupId 与代表文件夹的 java 包名称进行比较，因此您设置 groupId 的想法没有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T22:03:49.623

就像一个不知道“它的”子类的 java 类一样，父 pom 也不知道它的子 pom。因此父 pom 将无法设置或覆盖其子级的属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T21:13:26.787

我不认为这是可能的。此外，它与[Maven 命名约定指南背道而驰](http://maven.apache.org/guides/mini/guide-naming-conventions.html)，该指南建议（如果有的话）子模块应附加到父 groupId，反之亦然。

# css - .less 文件在使用另一个文件中的变量时无法编译

> ID：11785589
> 
> 赞同：4
> 
> 时间：2012-08-02T20:53:16.267
> 
> 标签：css, variables, compilation, less, npm

我有一个 .less 文件，其中包含一些使用在另一个文件中定义的变量的定义。

例子：

```
body {
    font-family: @baseFontFamily;
    font-size: @baseFontSize;
    color: @textColor;
} 
```

最初，IntelliJ 将变量显示为未定义。当我用 Lessc 编译时，我会得到一个错误，如下所示：

> TypeError：无法在新的 LessError (C:\PATH\npm\node_modules\less) 处调用未定义的方法 'charAt' \lib\less\parser.js:221:19) 在 Object.toCSS (C:\PATH\npm\node_modules\less\lib\less\parser.js:385:31) 在 C:\PATH\npm\node_modules \less\bin\lessc:107:28 在 C:\PATH\npm\node_modules\less\lib\less\parser.js:434:40 在 C:\PATH\npm\node_modules\less\lib\less\parser .js:94:48 在 C:\PATH\npm\node_modules\less\lib\less\index.js:116:17 在 C:\PATH\npm\node_modules\less\lib\less\parser.js:434 :40 在 C:\PATH\npm\node_modules\less\lib\less\parser.js:94:48 在 C:\PATH\npm\node_modules\less\lib\less\index.js:116:17

在做了一些阅读之后，我确定这意味着我的代码中某处存在错误。我自然认为这是由于变量定义不起作用。我用变量注释掉了这些行，lessc 可以很好地编译我的项目。

但是，即使在我添加了适当的 @import 以便定义变量（以及未注释变量的行）之后，我再次收到编译时错误。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T19:49:56.467

发现的问题。父文件夹和子文件夹中有“config.less”文件。将 config.less 的内容从子版本移动到父版本解决了我遇到的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T22:10:23.827

我发现了答案。我尝试只编译一个文件（而不是 .less 文件套件）。NPM 表明它在定位所使用的 Mixin 之一时遇到了问题。在 @import-ing 正确的文件后，该套件现在可以正常编译。

教训如下： - 如果您的某个 .less 文件有问题，请尝试自行编译。NPM 将为您提供有关错误的更多详细信息，而不仅仅是一般的堆栈跟踪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T21:17:25.267

当我这样工作时，我也会遇到这些错误，但实际编译的 css 工作得很好。我确实在开发中编译了我的less，并且只将css放在运行时，因为我不希望样式依赖于javascript......

# file - Go : 连接文件内容

> ID：11785590
> 
> 赞同：3
> 
> 时间：2012-08-02T20:53:21.680
> 
> 标签：file, go, concatenation

我目前正在学习如何使用 Go（或 golang）进行开发，但我遇到了一个奇怪的问题：

我尝试创建一个在 HTML 文件中查找的脚本，以便获取每个文件的所有源**标签。该脚本的目标是合并所有检索到的文件。**

 **所以，这就是故事：现在，我能够获取每个 JavaScript 文件的内容，但是......我无法连接它们......

你可以在下面看到我的脚本：

```
//Open main file
mainFilePath := "/path/to/my/file.html"
mainFileDir := path.Dir(mainFilePath)+"/"

mainFileContent, err := ioutil.ReadFile(mainFilePath)

if err == nil {
    mainFileContent := string(mainFileContent)
    var finalFileContent bytes.Buffer

    //Start RegExp searching for JavaScript src
    scriptReg, _ := regexp.Compile("<script src=\"(.*)\">")
    scripts := scriptReg.FindAllStringSubmatch(mainFileContent,-1)

    //For each SRC found...
    for _, path := range scripts {
        //We open the corresponding file
        subFileContent, err := ioutil.ReadFile(mainFileDir+path[1])

        if err == nil {
            //And we add its content to the "final" variable
            fmt.Println(finalFileContent.Write(subFileContent))
        } else {
            fmt.Println(err)
        }
    }

    //Try to display the final result
    // fmt.Println(finalFileContent.String())
    fmt.Printf(">>> %#v", finalFileContent)
    fmt.Println("Y U NO WORKS? :'(")

} else {
    fmt.Println(err)
} 
```

因此，每个都`fmt.Println(finalFileContent.Write(subFileContent))`显示类似**6161**的内容，因此我假设*Write()*方法已正确执行。

但`fmt.Printf(">>> %#v", finalFileContent)`什么也没显示。绝对没有（甚至“>>>”也没有显示！）上面的注释行也是如此。

有趣的是，字符串*"YU NO WORK ? :'("*正确显示...

你知道为什么吗？你知道如何解决这个问题吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T23:35:34.113

你忽略了一些错误。当您运行以下版本的代码时，您的结果是什么？

```
package main

import (
    "bytes"
    "fmt"
    "io/ioutil"
    "path"
    "regexp"
)

func main() {
    //Open main file
    mainFilePath := "/path/to/my/file.html"
    mainFileDir := path.Dir(mainFilePath) + "/"

    mainFileContent, err := ioutil.ReadFile(mainFilePath)

    if err == nil {
        mainFileContent := string(mainFileContent)
        var finalFileContent bytes.Buffer

        //Start RegExp searching for JavaScript src
        scriptReg, _ := regexp.Compile("<script src=\"(.*)\">")
        scripts := scriptReg.FindAllStringSubmatch(mainFileContent, -1)

        //For each SRC found...
        for _, path := range scripts {
            //We open the corresponding file
            subFileContent, err := ioutil.ReadFile(mainFileDir + path[1])

            if err == nil {
                //And we add its content to the "final" variable

                // fmt.Println(finalFileContent.Write(subFileContent))
                n, err := finalFileContent.Write(subFileContent)
                fmt.Println("finalFileContent Write:", n, err)

            } else {
                fmt.Println(err)
            }
        }

        //Try to display the final result
        // fmt.Println(finalFileContent.String())

        // fmt.Printf(">>> %#v", finalFileContent)
        n, err := fmt.Printf(">>> %#v", finalFileContent)
        fmt.Println()
        fmt.Println("finalFileContent Printf:", n, err)

        fmt.Println("Y U NO WORKS? :'(")

    } else {
        fmt.Println(err)
    }
} 
```

更新：

该声明：

```
fmt.Println("finalFileContent Printf:", n, err) 
```

输出：

```
finalFileContent Printf: 0 write /dev/stdout: winapi error #8 
```

或者

```
finalFileContent Printf: 0 write /dev/stdout: Not enough storage is available to process this command. 
```

来自 MSDN：

> [ERROR_NOT_ENOUGH_MEMORY](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681382.aspx)
> 
> 8 (0x8)
> 
> 没有足够的存储空间来处理此命令。

Windows 控制台的格式化输出溢出缓冲区（大约 64KB）。

有一个相关的 Go open 问题：

> [问题 3376：windows：在 os.File.Write 中检测 + 处理控制台](http://code.google.com/p/go/issues/detail?id=3376)**

# mysql - 有没有办法加快对自引用的查询

> ID：11785592
> 
> 赞同：1
> 
> 时间：2012-08-02T20:53:34.833
> 
> 标签：mysql, sql, optimization, query-optimization

所以假设我有这个查询：

```
SELECT * FROM table1 A, table1 B where A.id = B.id; 
```

即使 table1 上的 id 上有索引，它仍然会扫描整个表...有没有办法加快速度，使其不扫描整个表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T16:07:49.603

虽然我面前没有你的执行计划，但这实际上只是`TableA`最有可能的扫描，原因是你没有其他条件`TableA`。它应该`TableB`在这个时候寻找，只是因为它是统计的。现在，如果您要为 提供另一个条件`TableA`，并且该条件满足索引，您会发现它没有扫描整个表。

更进一步，如果索引`TableA`是查询的覆盖索引，它实际上甚至不会读取`TableA`.

更进一步的是，如果 and 之间存在外键约束`TableA`，`TableB`并且您没有从`TableB`id 字段中读取任何内容，那么它也永远不会读取数据页。

更进一步，即使您确实需要来自 的数据`TableB`，如果该数据在索引上，它仍然不必读取数据页。

但最后，因为您选择的是`*`，所以这不太可能是一个非常有效的查询，因为它从**两个**表中选择所有列。

我希望这不是太啰嗦，但我想确保你知道我来自哪里。

# facebook - 打开使用 www.domain.com 但不使用 domain.com 的图形

> ID：11785594
> 
> 赞同：0
> 
> 时间：2012-08-02T20:53:46.003
> 
> 标签：facebook, facebook-opengraph

我的 facebook 打开图有问题，如果用户使用 www.domain.com 连接到我的网站，它可以正常工作，但没有“www”，如果用户尝试 domain.com，它就不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T21:58:56.433

您是否尝试在您的 Facebook 应用程序设置中使用*Facebook 登录字段*`domain.com`添加到您的网站？所以你最终会在这个领域。*`www.domain.com, domain.com`*

# xamarin.ios - Monotouch/iPhone - 当 HTTP 方法为 DELETE 时，调用 HttpWebRequest.GetRequestStream() 连接到服务器

> ID：11785597
> 
> 赞同：4
> 
> 时间：2012-08-02T20:53:57.987
> 
> 标签：xamarin.ios, httpwebrequest, http-method

**我的场景：** 我正在使用 Monotouch for iOS 创建一个 iPhone 应用程序。我正在调用基于 ASP.NEt MVC 4 Web API 的 http 服务来登录/注销。对于登录，我使用 POST 网络方法，一切都很好。对于注销，我正在调用 Delete web 方法。我想将 JSON 数据（序列化的复杂数据）传递给 Delete 调用。如果我将像单个字符串参数这样的简单数据作为 URL 本身的一部分传递，那么一切都很好，即删除确实有效！为了传递复杂的 Json 数据，这是我的调用（我调整了代码以使其变得简单，只显示一个参数 - 通过 JSON 发送的用户名）：

```
HttpWebRequest req = (HttpWebRequest)HttpWebRequest.Create("http://localhost/module/api/session/");
        req.ContentType = "application/json";
        req.CookieContainer = jar;
        req.Method = "Delete";
        using (var streamWrite = new StreamWriter(req.GetRequestStream()))
        {
            string jSON = "{\"UserName\":\"" + "someone" + "\"}";
            streamWrite.Write(jSON);
            streamWrite.Close();
        }
        HttpWebResponse res = (HttpWebResponse)req.GetResponse(); 
```

在服务器上，Delete 方法看起来有这样的定义：

```
public void Delete(Credentials user) 
```

其中 Credentials 是一种复杂类型。

**现在，问题来了！**

上面的代码一命中就进入服务器上的 Delete 方法：

```
req.GetRequestStream() 
```

因此发送到 Delete 方法的参数最终为 null

这是奇怪的部分：如果我在测试 VS 2010 Windows 应用程序中使用完全相同的代码，即使上面的代码也可以工作......即它不会调用 Delete 直到 req.GetResponse() 被调用！在这种情况下，Delete 方法的参数是一个有效对象！

**问题**

任何想法或这是 Monotouch 的错误，如果是，任何解决方法？

**笔记：**

如果我将删除定义更改为 public void Delete(string userName) 而不是 json，如果我将参数作为 url 本身的一部分传递，一切都很好。但就像我说的，这只是一个简化的例子来说明我的问题。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T13:31:48.197

这似乎是不明确的。有关详细信息，请参阅此问题：[HTTP DELETE 请求是否允许实体主体？](https://stackoverflow.com/questions/299628/is-an-entity-body-allowed-for-an-http-delete-request)

一般来说，MonoTouch（基于 Mono）将尝试与 Microsoft .NET 框架的*功能/错误*兼容，以简化平台之间的代码可移植性。

IOW 如果 MS.NET 忽略 DELETE 方法的主体，那么 MonoTouch 也会如此。如果行为不同，则应在[http://bugzilla.xamarin.com填写错误报告](http://bugzilla.xamarin.com)

# join - CouchDB：从两个单独的发射中获取唯一的文档？

> ID：11785598
> 
> 赞同：0
> 
> 时间：2012-08-02T20:53:58.077
> 
> 标签：join, graph, merge, nosql, couchdb

本质上，我在 CouchDB 中存储实体的有向图，并且需要能够找到图的进出边。

**设置：**

现在存储数据的方式如下。每个文档代表两个实体之间的关系：

```
doc: {
    entity1: { name: '' ... },
    entity2: { name: '' ... }
    ...
} 
```

我有一个执行一堆发射的视图，其中两个发射在其 entity1 组件和它们的 entity2 组件上键入的文档，例如：

```
function() {
    emit(['entity1', doc.entity1.name]);
    emit(['entity2', doc.entity2.name]);
} 
```

边是有向的，从 entity1 和 entity2 出发。所以如果我想找到一个实体的边缘，我只需查询第一个发射；如果我想让边缘进入实体，我会查询第二个发射。

**问题：**

这里的问题在于我还需要捕获进入*和*退出实体的边缘。有没有办法可以将这两个发射分组或减少为一组 [x] UNIQUE 对的双向集合？

有没有更好的方法来组织我的观点来促进这一行动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T18:56:40.307

最好只创建第二个视图。但是没有什么能阻止你将各种不同的数据塞进同一个视图中，如下所示：

```
function() {
    if (doc.entity1.name == doc.entity2.name) {
      emit(['self-ref', doc.entity1.name], 1);
    }
    emit(['both'   [doc.entity1.name, doc.entity2.name]], 1);
    emit(['either' [doc.entity1.name, "out"]], 1);
    emit(['either' [doc.entity2.name, "in"]], 1);
    emit(['out', doc.entity1.name], 1);
    emit(['in', doc.entity2.name], 1);
} 
```

然后，您可以轻松地执行以下操作：

*   找到所有的自我参考：
    *   `startkey=["self-ref"]&endkey=["self-ref", {}]`.
*   查找特定节点的所有边（传入或传出）：
    *   `startkey=["either", [nodeName]]&endkey=["either", [nodeName, {}]]`
    *   如果你不减少这个，那么你仍然会在密钥中保留“in”与“out”。如果您永远不需要查询具有传入或传出边的*所有*节点，那么您可以将最后两个发射替换为“任一”发射。
*   从 node1 -> node2 找到所有边：
    *   `key=["both", [node1, node2]`

以及您对特定节点的传入或传出的原始查询。

在选择这种组合视图方法或多视图方法之前，我建议您对应用程序的典型用例进行基准测试。

# ios - 在不影响子视图的情况下检测整个应用程序中的 3 根手指触摸

> ID：11785600
> 
> 赞同：0
> 
> 时间：2012-08-02T20:54:08.077
> 
> 标签：ios, uiview, uigesturerecognizer, uitouch

我正在制作一个 iPad 应用程序，您可以随时在整个屏幕上用 3 根手指滑动/平移（取消操作） 它正在使用 UISwipeGestureRecognizer 或 UIPanGestureRecognizer 但我手指下方的子视图（例如 UITableView 或 UIScrollview）收到了触摸和动作。这是我不想要的。

我的想法是在整个应用程序之上放置一个透明的 UIView，它会将触摸转发到其他视图或不转发。我用 hitTest 尝试了一些东西，但我认为我不太了解它，因为返回的触摸次数不正确并且需要时间......

如果你能帮助我，非常感谢:)

```
- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event
{
    if (event.type == UIEventTypeTouches) {
        if (event.allTouches.count >= 2) {
            return self;
        }
    }
    return [super hitTest:point withEvent:event];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T21:49:38.170

我认为你必须使用

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer 
```

UIGestureRecognizer 的委托来定义哪些手势同时有效。

例如：

```
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer

    NSLog(@"gestRecogn: %@ otherGestRec: %@",[[gestureRecognizer class] className],[[otherGestureRecognizer class] className]);

    if ([[[gestureRecognizer class] className] isEqualToString:@"UIScrollViewPanGestureRecognizer"] && [[[otherGestureRecognizer class] className] isEqualToString:@"UILongPressGestureRecognizer"]) {
        return FALSE;
    }
    if ([[[gestureRecognizer class] className] isEqualToString:@"UILongPressGestureRecognizer"] && [[[otherGestureRecognizer class] className] isEqualToString:@"UIScrollViewPanGestureRecognizer"]) {
        return FALSE;
    }
    return TRUE;
} 
```

# javascript - 动态按钮不调用javascript函数？

> ID：11785602
> 
> 赞同：1
> 
> 时间：2012-08-02T20:54:15.957
> 
> 标签：javascript, jquery, html

我有一个按钮，我可以像这样动态地添加到我的页面中。

```
if (adminInd  =='X'){

    var adminDiv = $(
        '<label id=Delegatelbl>Miscellaneous label prototyping.:</label>'+
        '</br></br>'+
         '<div style="padding-right:152px;"> '+
            '<form action="userfop.jsp" id="userForm" >'+
              '<label for="tuid">TU-ID:</label>'+
              '<input type="text" name="tuid" id="tuid" maxlength="9"/>'+
            '<button type="button" id="RoleChanger" style="cursor:pointer" class="ab_submit" onclick="validateTuid()"> Change Role </button>'+
            '</form>'+
         '</div>');

    adminDiv.insertBefore('#FormDiv');

    } 
```

正如您从按钮标签中看到的那样，我试图调用一个 javascript 函数，而我几乎尝试了所有方法，但该函数没有触发。我做错了什么。我已经解决了 2 个小时的问题，但没有成功。这是我看不到我做错了什么的功能。有人请指出我正确的方向。

```
function validateTuid(){

    var textTuid = document.getElementById(tuid).value  

    $.ajax({  type: "POST",
          url: "dbfunctions.jsp",  
          data: {TYPE:"V", tuidval:textTuid }}).done(function( msg )
           {  
                alert("Data Saved: " + $.trim(msg));
            if (msg != null || msg != ''){userForm.submit()}
                return "N";
          }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T20:57:43.843

您应该委托`click`事件，您可以使用`on()`方法，尝试以下操作：

```
$(document).on('click', "#RoleChanger", validateTuid) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T20:58:39.167

也许看看[http://api.jquery.com/live/](http://api.jquery.com/live/)。此外，不是在按钮中硬编码 onClick 而是将侦听器绑定到它。

# jquery - Codeigniter 和 eric martin simplemodal

> ID：11785603
> 
> 赞同：0
> 
> 时间：2012-08-02T20:54:16.720
> 
> 标签：jquery, codeigniter, modal-dialog, simplemodal

我正在尝试将 eric martin 的 simplemodal 实现到我的 Codeigniter 项目中。到目前为止，我所能做的就是给我一个在 Firebug 中找不到的 404 页面。我正在使用模式来提醒用户他们正在从我的网站重定向到第 3 方网站。我从我的链接 href 中获取 url 以用作模式中的链接，以便用户可以继续。

我的想法是 Jquery 会捕获 /depart/ 并使用适当的控制器并将适当的视图加载到模态中。它似乎不是那样工作的。Firebug 将响应显示为 404。我尝试将自定义路由添加到路由文件以处理许多不同的链接可能性，但这没有效果。我应该如何处理这个？

jQuery

```
var OSX = {
      container: null,
      init: function () {
          $('.depart').click(function (e) {
              e.preventDefault();
              var myid = $(this).attr('href');
              $.get("/depart/" + encodeURIComponent(myid), function(data){
                  $(data).modal({
                      opacity: 65,
                      overlayClose: true,
                      onOpen: OSX.open
                  });
              });
          });
      },
      open: function (d) {
          var self = this;
          self.container = d.container[0];
          d.overlay.fadeIn('slow', function () {
              $("#depart", self.container).show();
              d.container.fadeIn('slow', function () {
                  d.data.fadeIn('slow');
              });
          });
      }
  };
  OSX.init();
}); 
```

关联

```
a class="depart" href="http://www.newwebsite.com"
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T17:16:20.933

所以，这就是我想出的似乎有效的方法。我更新了 jQuery .get 以包含一个 url= 参数。然后让 Codeigniter 在控制器中获取该变量。如果设置了变量并且链接存在于数据库中，则用户可以通过单击链接继续退出站点。

jQuery

```
$.get("/depart/?url=" + encodeURIComponent(myid), function(data){ 
```

控制器索引法

```
$url = $this->input->get('url');
$this->data['continue'] = isset($url]) && $this->links_model->check_link($url) == TRUE ? '<a href="'.$url.'">Continue</a>' : '<a href="">Continue</a>'; 
```

这个 stackoverflow 问题帮助我找到了自己的方式， [在 Codeigniter URL 段中传递 URL](https://stackoverflow.com/questions/9848794/passing-url-in-codeigniter-url-segment)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T23:40:04.257

这是我在我的所有 codeigniter 项目中使用的[https://github.com/sirfilip/ci/blob/master/assets/js/init.js](https://github.com/sirfilip/ci/blob/master/assets/js/init.js)。只需通过 javascript 访问 url，就像使用 codeiniger 一样。这意味着如果我想访问控制器和操作，我会执行 url：CI.site_url('controller/action')，如果我想访问基本 url，我会执行 CI.base_url('path to some image')。奇迹般有效。

# java - javac Jenkins Ant：构建与依赖 import.jars 相关的错误

> ID：11785605
> 
> 赞同：1
> 
> 时间：2012-08-02T20:54:17.233
> 
> 标签：java, ant, jenkins, javac

我无法通过使用 Ant 的 Jenkins 项目构建我的 Java src 代码。我从 Git 获取代码，然后调用 ant build.xml 在 .class 和 .jar 中构建 src。很简单，嗯？！！！当我构建 Jenkins 项目时，我很确定与依赖库有关的错误没有被 Ant 注意到（不喜欢我的 catch 中的异常链接，或者说我的文件缺少“；”或“）” , 或'非法类型开始'...超过 100 个错误...所有这些 src 在我的 Eclipse IDE 中运行良好，所以怎么了？！

蚂蚁构建文件：

```
'<project name="testcasecompile" default="dist" basedir=".">
  <taskdef name="testng" classname="org.testng.TestNGAntTask">
        <classpath id="classpath">
                <pathelement location="/home/jon/Downloads/Jenkins_Test_Helpers/taf-dependent-jars/testng-6.5.2.jar/" />
            <pathelement location="/home/jon/Downloads/Jenkins_Test_Helpers/taf-dependent-jars/" />
            <pathelement location="/home/jon/Downloads/Jenkins_Test_Helpers/" />
            <path>   
                <fileset dir="/home/jon/Downloads/Jenkins_Test_Helpers/">   
                    <include name="**/*.jar"/>
                </fileset>
            </path>
        </classpath>    
    </taskdef>
    <description>
        simple example build file
    </description>
  <!-- set global properties for this build -->
  <property name="src" location="/var/lib/jenkins/jobs/client-test/workspace/"/>
  <property name="build" location="/var/lib/jenkins/jobs/client-test/workspace/"/>
  <property name="dist"  location="/var/lib/jenkins/jobs/client-test/workspace/"/>

  <target name="init">
    <!-- Create the time stamp -->
    <tstamp/>
    <!-- Create the build directory structure used by compile -->
    <mkdir dir="${build}"/>
  </target>

  <target name="compile" depends="init"
        description="compile the source " >
    <!-- Compile the java code from ${src} into ${build} -->
    <javac srcdir="${src}" destdir="${build}"/>
  </target>

  <target name="dist" depends="compile"
        description="generate the distribution" >
    <!-- Create the distribution directory -->
    <mkdir dir="${dist}/lib"/>

    <!-- Put everything in ${build} into the MyProject-${DSTAMP}.jar file -->
    <jar jarfile="${dist}/lib/testcasecompile-${DSTAMP}.jar" basedir="${build}"/>
  </target>

  <target name="clean"
        description="clean up" >
    <!-- Delete the ${build} and ${dist} directory trees -->
    <delete dir="${build}"/>
    <delete dir="${dist}"/>
  </target>
</project>' 
```

詹金斯构建日志：

```
'Started by user [8mha:AAAAih+LCAAAAAAAAABb85aBtbiIQSajNKU4P08vOT+vOD8nVc+jsiC1KCczL9svvyT1dMUiOWdZ/mImBiZPBrac1Lz0kgwfBubSopwSBiGfrMSyRP2cxLx0/eCSosy8dOuKIgYpNOOcITTIMAYIYGRiYKgoADI4Sxi49EuLU4v080pzcgCbGluCjwAAAA==[0manonymous
ln -s 2012-08-02_15-43-13 /var/lib/jenkins/jobs/client-test/builds/17 failed: -1 
Checkout:workspace / /var/lib/jenkins/jobs/client-test/workspace - hudson.remoting.LocalChannel@55a92d3a
Using strategy: Default
Last Built Revision: Revision 81e259a7303d32c923511c3118b756c08e648ae3 (origin/HEAD, origin/master)
Fetching changes from 1 remote Git repository
Fetching upstream changes from /git/arcus/automation/tests/functional/
Seen branch in repository origin/HEAD
Seen branch in repository origin/master
Commencing build of Revision 81e259a7303d32c923511c3118b756c08e648ae3 (origin/HEAD, origin/master)
Checking out Revision 81e259a7303d32c923511c3118b756c08e648ae3 (origin/HEAD, origin/master)
Warning : There are multiple branch changesets here
[workspace] $ /var/lib/jenkins/test/apache-ant-1.8.4/bin/ant -file testcase_compile.xml
Buildfile: /var/lib/jenkins/jobs/client-test/workspace/testcase_compile.xml

[8mha:AAAAYB+LCAAAAAAAAABb85aBtbiIQT6jNKU4P0+vJLE4u1gvPjGvRM8xryQksSg9tcQvvyTVvqNr/s+Vl9uYGBgqihikoKqT8/OK83NS9ZwhNEghAwQwghQWAADROOumXQAAAA==[0minit:

[8mha:AAAAYB+LCAAAAAAAAABb85aBtbiIQT6jNKU4P0+vJLE4u1gvPjGvRM8xryQksSg9tcQvvyTVvqNr/s+Vl9uYGBgqihikoKqT8/OK83NS9ZwhNEghAwQwghQWAADROOumXQAAAA==[0mcompile:
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcase_compile.xml:32: warning: 'includeantruntime' was not set, defaulting to build.sysclasspath=last; set to false for repeatable builds
    [javac] Compiling 16 source files to /var/lib/jenkins/jobs/client-test/workspace
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:64: <identifier> expected
    [javac]         } catch (InterruptedException | IOException | BrowserOpenException
    [javac]                                      ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:64: '{' expected
    [javac]         } catch (InterruptedException | IOException | BrowserOpenException
    [javac]                                        ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:64: illegal start of expression
    [javac]         } catch (InterruptedException | IOException | BrowserOpenException
    [javac]                                                     ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:64: ';' expected
    [javac]         } catch (InterruptedException | IOException | BrowserOpenException
    [javac]                                                                           ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:65: ';' expected
    [javac]                 | UnableToCreateProfileException e) {
    [javac]                                                   ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:68: 'catch' without 'try'
    [javac]         } catch (Exception e) {
    [javac]           ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:68: ')' expected
    [javac]         } catch (Exception e) {
    [javac]                           ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:68: not a statement
    [javac]         } catch (Exception e) {
    [javac]                 ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:68: ';' expected
    [javac]         } catch (Exception e) {
    [javac]                             ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:78: illegal start of type
    [javac]     public void site1clickTest(String eventsLink, String browserType,
    [javac]            ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:78: ';' expected
    [javac]     public void site1clickTest(String eventsLink, String browserType,
    [javac]                ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:78: ')' expected
    [javac]     public void site1clickTest(String eventsLink, String browserType,
    [javac]                                      ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:78: not a statement
    [javac]     public void site1clickTest(String eventsLink, String browserType,
    [javac]                               ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:78: ';' expected
    [javac]     public void site1clickTest(String eventsLink, String browserType,
    [javac]                                                 ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:79: ';' expected
    [javac]             String casinoSiteclick, String map1zoomOut, String mapZoomoutGettext)
    [javac]                   ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:79: not a statement
    [javac]             String casinoSiteclick, String map1zoomOut, String mapZoomoutGettext)
    [javac]                    ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:79: ';' expected
    [javac]             String casinoSiteclick, String map1zoomOut, String mapZoomoutGettext)
    [javac]                                   ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:79: ';' expected
    [javac]             String casinoSiteclick, String map1zoomOut, String mapZoomoutGettext)
    [javac]                                                               ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:79: not a statement
    [javac]             String casinoSiteclick, String map1zoomOut, String mapZoomoutGettext)
    [javac]                                                                ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:79: ';' expected
    [javac]             String casinoSiteclick, String map1zoomOut, String mapZoomoutGettext)
    [javac]                                                                                 ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:80: not a statement
    [javac]             throws AssertionError {
    [javac]                    ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:80: ';' expected
    [javac]             throws AssertionError {
    [javac]                                  ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:100: <identifier> expected
    [javac]         } catch (AssertionError | Exception e) {
    [javac]                                ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:100: '{' expected
    [javac]         } catch (AssertionError | Exception e) {
    [javac]                                  ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:100: not a statement
    [javac]         } catch (AssertionError | Exception e) {
    [javac]                                             ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:100: ';' expected
    [javac]         } catch (AssertionError | Exception e) {
    [javac]                                              ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:110: illegal start of type
    [javac]     public void site2clickTest(String eventsLink, String browserType,
    [javac]            ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:110: ';' expected
    [javac]     public void site2clickTest(String eventsLink, String browserType,
    [javac]                ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:110: ')' expected
    [javac]     public void site2clickTest(String eventsLink, String browserType,
    [javac]                                      ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:110: not a statement
    [javac]     public void site2clickTest(String eventsLink, String browserType,
    [javac]                               ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:110: ';' expected
    [javac]     public void site2clickTest(String eventsLink, String browserType,
    [javac]                                                 ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:111: ';' expected
    [javac]             String casinoSiteclick, String map2zoomOut, String mapZoomoutGettext)
    [javac]                   ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:111: not a statement
    [javac]             String casinoSiteclick, String map2zoomOut, String mapZoomoutGettext)
    [javac]                    ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:111: ';' expected
    [javac]             String casinoSiteclick, String map2zoomOut, String mapZoomoutGettext)
    [javac]                                   ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:111: ';' expected
    [javac]             String casinoSiteclick, String map2zoomOut, String mapZoomoutGettext)
    [javac]                                                               ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:111: not a statement
    [javac]             String casinoSiteclick, String map2zoomOut, String mapZoomoutGettext)
    [javac]                                                                ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:111: ';' expected
    [javac]             String casinoSiteclick, String map2zoomOut, String mapZoomoutGettext)
    [javac]                                                                                 ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:112: not a statement
    [javac]             throws AssertionError {
    [javac]                    ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:112: ';' expected
    [javac]             throws AssertionError {
    [javac]                                  ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:132: <identifier> expected
    [javac]         } catch (AssertionError | Exception e) {
    [javac]                                ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:132: '{' expected
    [javac]         } catch (AssertionError | Exception e) {
    [javac]                                  ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:132: not a statement
    [javac]         } catch (AssertionError | Exception e) {
    [javac]                                             ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:132: ';' expected
    [javac]         } catch (AssertionError | Exception e) {
    [javac]                                              ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:143: illegal start of type
    [javac]     public void site3clickTest(String eventsLink, String browserType,
    [javac]            ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:143: ';' expected
    [javac]     public void site3clickTest(String eventsLink, String browserType,
    [javac]                ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:143: ')' expected
    [javac]     public void site3clickTest(String eventsLink, String browserType,
    [javac]                                      ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:143: not a statement
    [javac]     public void site3clickTest(String eventsLink, String browserType,
    [javac]                               ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:143: ';' expected
    [javac]     public void site3clickTest(String eventsLink, String browserType,
    [javac]                                                 ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:144: ';' expected
    [javac]             String casinoSiteclick, String map3zoomOut, String mapZoomoutGettext)
    [javac]                   ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:144: not a statement
    [javac]             String casinoSiteclick, String map3zoomOut, String mapZoomoutGettext)
    [javac]                    ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:144: ';' expected
    [javac]             String casinoSiteclick, String map3zoomOut, String mapZoomoutGettext)
    [javac]                                   ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:144: ';' expected
    [javac]             String casinoSiteclick, String map3zoomOut, String mapZoomoutGettext)
    [javac]                                                               ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:144: not a statement
    [javac]             String casinoSiteclick, String map3zoomOut, String mapZoomoutGettext)
    [javac]                                                                ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:144: ';' expected
    [javac]             String casinoSiteclick, String map3zoomOut, String mapZoomoutGettext)
    [javac]                                                                                 ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:145: not a statement
    [javac]             throws AssertionError {
    [javac]                    ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:145: ';' expected
    [javac]             throws AssertionError {
    [javac]                                  ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:165: <identifier> expected
    [javac]         } catch (AssertionError | Exception e) {
    [javac]                                ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:165: '{' expected
    [javac]         } catch (AssertionError | Exception e) {
    [javac]                                  ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:165: not a statement
    [javac]         } catch (AssertionError | Exception e) {
    [javac]                                             ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:165: ';' expected
    [javac]         } catch (AssertionError | Exception e) {
    [javac]                                              ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:176: illegal start of type
    [javac]     public void site4clickTest(String eventsLink, String browserType,
    [javac]            ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:176: ';' expected
    [javac]     public void site4clickTest(String eventsLink, String browserType,
    [javac]                ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:176: ')' expected
    [javac]     public void site4clickTest(String eventsLink, String browserType,
    [javac]                                      ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:176: not a statement
    [javac]     public void site4clickTest(String eventsLink, String browserType,
    [javac]                               ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:176: ';' expected
    [javac]     public void site4clickTest(String eventsLink, String browserType,
    [javac]                                                 ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:177: ';' expected
    [javac]             String casinoSiteclick, String map4zoomOut, String mapZoomoutGettext)
    [javac]                   ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:177: not a statement
    [javac]             String casinoSiteclick, String map4zoomOut, String mapZoomoutGettext)
    [javac]                    ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:177: ';' expected
    [javac]             String casinoSiteclick, String map4zoomOut, String mapZoomoutGettext)
    [javac]                                   ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:177: ';' expected
    [javac]             String casinoSiteclick, String map4zoomOut, String mapZoomoutGettext)
    [javac]                                                               ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:177: not a statement
    [javac]             String casinoSiteclick, String map4zoomOut, String mapZoomoutGettext)
    [javac]                                                                ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:177: ';' expected
    [javac]             String casinoSiteclick, String map4zoomOut, String mapZoomoutGettext)
    [javac]                                                                                 ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:178: not a statement
    [javac]             throws AssertionError {
    [javac]                    ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:178: ';' expected
    [javac]             throws AssertionError {
    [javac]                                  ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:198: <identifier> expected
    [javac]         } catch (AssertionError | Exception e) {
    [javac]                                ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:198: '{' expected
    [javac]         } catch (AssertionError | Exception e) {
    [javac]                                  ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:198: not a statement
    [javac]         } catch (AssertionError | Exception e) {
    [javac]                                             ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:198: ';' expected
    [javac]         } catch (AssertionError | Exception e) {
    [javac]                                              ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:212: illegal start of type
    [javac]     public void siteallClicktest(String eventsLink, String browserType,
    [javac]            ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:212: ';' expected
    [javac]     public void siteallClicktest(String eventsLink, String browserType,
    [javac]                ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:212: ')' expected
    [javac]     public void siteallClicktest(String eventsLink, String browserType,
    [javac]                                        ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:212: not a statement
    [javac]     public void siteallClicktest(String eventsLink, String browserType,
    [javac]                                 ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:212: ';' expected
    [javac]     public void siteallClicktest(String eventsLink, String browserType,
    [javac]                                                   ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:213: ';' expected
    [javac]             String casinoSiteclick1, String casinoSiteclick2,
    [javac]                   ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:213: not a statement
    [javac]             String casinoSiteclick1, String casinoSiteclick2,
    [javac]                    ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:213: ';' expected
    [javac]             String casinoSiteclick1, String casinoSiteclick2,
    [javac]                                    ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:214: ';' expected
    [javac]             String casinoSiteclick3, String casinoSiteclick4,
    [javac]                   ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:214: not a statement
    [javac]             String casinoSiteclick3, String casinoSiteclick4,
    [javac]                    ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:214: ';' expected
    [javac]             String casinoSiteclick3, String casinoSiteclick4,
    [javac]                                    ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:215: ';' expected
    [javac]             String map1zoomOut, String map2zoomOut, String map3zoomOut,
    [javac]                   ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:215: not a statement
    [javac]             String map1zoomOut, String map2zoomOut, String map3zoomOut,
    [javac]                    ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:215: ';' expected
    [javac]             String map1zoomOut, String map2zoomOut, String map3zoomOut,
    [javac]                               ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:215: ';' expected
    [javac]             String map1zoomOut, String map2zoomOut, String map3zoomOut,
    [javac]                                                           ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:215: not a statement
    [javac]             String map1zoomOut, String map2zoomOut, String map3zoomOut,
    [javac]                                                            ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:215: ';' expected
    [javac]             String map1zoomOut, String map2zoomOut, String map3zoomOut,
    [javac]                                                                       ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:216: ';' expected
    [javac]             String map4zoomOut, String mapZoomoutGettext) throws AssertionError {
    [javac]                                       ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:216: not a statement
    [javac]             String map4zoomOut, String mapZoomoutGettext) throws AssertionError {
    [javac]                                        ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:216: ';' expected
    [javac]             String map4zoomOut, String mapZoomoutGettext) throws AssertionError {
    [javac]                                                         ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:216: not a statement
    [javac]             String map4zoomOut, String mapZoomoutGettext) throws AssertionError {
    [javac]                                                                  ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:216: ';' expected
    [javac]             String map4zoomOut, String mapZoomoutGettext) throws AssertionError {
    [javac]                                                                                ^
    [javac] /var/lib/jenkins/jobs/client-test/workspace/testcases/ArcusEventsTests.java:272: <identifier> expected
    [javac]         } catch (AssertionError | Exception e) {
    [javac]                                ^
    [javac] 100 errors

[8mha:AAAAYB+LCAAAAAAAAABb85aBtbiIQSGjNKU4P0+vJLE4u1gvPjGvRM8xr8S/tCQ5PzfVL78ktUuDM0uMry+HiYGhoohBCqo8OT+vOD8nVc8ZQoMUMkAAI0hhAQAUXUdTXgAAAA==[0mBUILD FAILED
/var/lib/jenkins/jobs/client-test/workspace/testcase_compile.xml:32: Compile failed; see the compiler error output for details.

Total time: 0 seconds
Build step 'Invoke Ant' marked build as failure
Finished: FAILURE' 
```

谢谢你的帮助，

泰勒

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T10:15:03.143

尝试使用此订单

类路径 -> 文件集 -> 路径元素

代替

类路径 -> 路径元素 -> 文件集

# mysql - sql注入保护

> ID：11785609
> 
> 赞同：4
> 
> 时间：2012-08-02T20:54:28.067
> 
> 标签：mysql, sql-injection

> **可能重复：**
> [在 PHP 中防止 SQL 注入的最佳方法](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

这段代码是否受到足够的保护以防止 sql 注入

```
if(isset($_POST['Submit']))
{
$user = mysql_real_escape_string($_POST["user"]);
$pass = mysql_real_escape_string($_POST["pass"]);
$confirm_key=md5(uniqid(rand()));

$query = mysql_query("INSERT INTO members 
(user, pass, mail, confirm_key, country, city, www, credo)
VALUES  ('$user','$pass','$_POST[mail]','$confirm_key','$_POST[country]','$_POST[city]','$_POST[www]','$_POST[credo]')")
or die ("Error during INSERT INTO members:    " . mysql_error());
exit();
} 
```

这是正确的方法吗？必须保护每个输入（如国家、城市……）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T20:57:45.800

**请勿** `mysql_query`用于新应用。您应该使用`mysqli`或 PDO 使用占位符进行转义。您可以使用许多[示例。](http://bobby-tables.com/php)

通常，您的 SQL 应如下所示：

```
INSERT INTO `table` (column) VALUES (?) 
```

它**不应该**看起来像：

```
INSERT INTO `table` (column) VALUES('$dangerous_user_content') 
```

如果正确使用占位符，几乎不可能创建 SQL 注入漏洞。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T21:01:41.397

[http://php.net/manual/en/function.mysql-real-escape-string.php](http://php.net/manual/en/function.mysql-real-escape-string.php)

甚至 php 文档都说不要使用 mysql_real_escape_string

# sql - 按触发器计算引用的记录

> ID：11785612
> 
> 赞同：0
> 
> 时间：2012-08-02T20:54:41.960
> 
> 标签：sql, sql-server-2008, stored-procedures, triggers, sql-server-2012

我发现了一个新问题：我有两个表**Classes**和**Students**。**学生**通过*[ClassID]*列引用**班级。****类**有名为*[Count]*的列，它存储引用学生的计数，我正在尝试通过**学生**表上的**AFTER INSERT,DELETE**触发器更新它。我写了一个简单的**CALC_COUNT**程序，如下所示：

 ********* * *

```
CREATE PROCEDURE [dbo].[CALC_COUNT]
    @classid INT
AS
BEGIN
UPDATE classes SET [Count] = (SELECT COUNT(Id) FROM students WHERE [ClassID] = @classid);
END

RETURN 0 
```

* * *

并在触发器内使用它

* * *

```
CREATE TRIGGER [MONITOR_STUDENTS_SCHEMA_TRIGGER]
    ON [dbo].[students]
    AFTER DELETE, INSERT
    AS
    BEGIN
        UPDATE [dbo].[classes] 
        SET studentsschemarev +=1  FROM inserted; 
        CALC_COUNT(SELECT [ClassID] FROM inserted UNION SELECT [ClassID] FROM deleted); 
        UPDATE [dbo].[stats] SET students_schema_rev += 1;
    END 
```

* * *

**但它不起作用。我想，我需要一种方法来为触发器的 SELECT 语句中的每一行执行过程，但我不知道如何。**

SQL Server 2012 LocalDB，与 SQL Server 2008 的兼容模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:00:47.047

你不需要你的存储过程。

将您的触发器更新为

```
update classes
set 
   count = StudentCount,
   schemarevcount += 1
from
    classes 
        inner join
    (select * from inserted union select * from deleted) students
        on classes.classid=students.classid
        inner join 
    (select classid, count(*) as StudentCount from students group by classid) counts
        on students.classid = counts.classid 
```

代替更新和调用 calc_count

一个英文翻译...

*   更新类（设置修订和计数）
*   在学生表中更改班级的位置
*   该班级在每个班级的学生人数集中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T10:01:10.357

好吧，您的触发器没有被触发的主要原因是因为您正在执行更新，而您的触发器正在执行 INSERT 和 DELETE。

是的，UPDATE 是 DELETE 和 INSERT，但你必须把它放在你的足迹中：

```
AFTER DELETE, INSERT, UPDATE 
```

代替

```
AFTER DELETE, INSERT 
```

接下来，在触发器本身中，您只有称为插入和删除的内部概念表，它们结合起来为您提供更新。旧部分在已删除表中，新部分在插入表中。

顺便说一句，为什么要逐条执行？使用完整的结果集执行此操作要快得多！********

# ios - UIScrollView.contentSize 似乎随着缩放而增长

> ID：11785613
> 
> 赞同：3
> 
> 时间：2012-08-02T20:54:43.430
> 
> 标签：ios, uiscrollview, scroll, zooming

所以我的scrollView的contentSize最初等于我的图像的框架，但似乎我缩放得越多，contentSize就越大。因此，当 scrollView 放大时，它周围有一个巨大的间隙。动态更新 - (void)scrollViewDidZoom:(UIScrollView *)aScrollView 中的 contentSize 似乎不起作用。我错过了什么吗？

注意：间隙仅垂直可见（即：在imageView的上方和下方）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T21:39:44.180

我不相信有可能`contentSize`在`zooming`. 这是因为：

> 滚动视图还处理内容的缩放和平移。当用户做出捏合或张开手势时，滚动视图会调整内容的偏移量和比例。当手势结束时，管理内容视图的对象应该根据需要更新内容的子视图。（请注意，手势可以结束并且手指仍可能向下。）**当手势正在进行时，滚动视图不会向子视图发送任何跟踪调用。**

[（苹果文档）](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIScrollViewDelegate_Protocol/Reference/UIScrollViewDelegate.html#//apple_ref/occ/intfm/UIScrollViewDelegate/scrollViewDidEndZooming%3awithView%3aatScale%3a)

您应该在用户完成使用*后*`contentSize`更新您的：`zoomScale` *`zooming`*

 *```
- (void)scrollViewDidEndZooming:(UIScrollView *)scrollView 
                       withView:(UIView *)view 
                        atScale:(float)scale 
```*

# date - 如何在 Unix Bourne Shell 中获取去年的日期？

> ID：11785620
> 
> 赞同：0
> 
> 时间：2012-08-02T20:55:07.373
> 
> 标签：date, sh

我知道从昨天、1 个月前等获取日期的方法。

你如何得到一年前的日期？

例如：

当前日期`20120802`和去年的日期`20110802`。

当然我可以将 更改`2012`为`2011`，但是有没有不需要手动干预的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T20:57:48.967

您可以使用：

```
date --date="1 year ago" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T06:08:38.477

更多..

你可以在这里看到..

[http://www.cyberciti.biz/tips/linux-unix-get-yesterdays-tomorrows-date.html](http://www.cyberciti.biz/tips/linux-unix-get-yesterdays-tomorrows-date.html)

# sql - 如何在 PostgreSQL ORDER BY 子句中使用别名？

> ID：11785622
> 
> 赞同：11
> 
> 时间：2012-08-02T20:55:20.807
> 
> 标签：sql, postgresql, postgresql-8.1

我有以下查询：

```
SELECT 
    title, 
    (stock_one + stock_two) AS global_stock
FROM
    product
ORDER BY
    global_stock = 0,
    title; 
```

在 PostgreSQL 8.1.23 中运行它我得到这个错误：

**查询失败：错误：列“global_stock”不存在**

任何人都可以帮我把它工作？我首先需要可用的项目，然后是不可用的项目。非常感谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-02T20:59:16.490

你总是可以`ORDER BY`这样：

```
select 
    title, 
    ( stock_one + stock_two ) as global_stock
from product
order by 2, 1 
```

或将其包装在另一个 SELECT 中：

```
SELECT *
from
(
    select 
        title, 
        ( stock_one + stock_two ) as global_stock
    from product
) x
order by (case when global_stock = 0 then 1 else 0 end) desc, title 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T20:58:38.170

一种解决方案是使用以下位置：

```
select  title, 
        ( stock_one + stock_two ) as global_stock
from product
order by 2, 1 
```

但是，别名应该有效，但不一定是表达式。“global_stock = 0”是什么意思？你的意思是以下：

```
select  title, 
        ( stock_one + stock_two ) as global_stock
from product
order by (case when global_stock = 0 then 1 else 0 end) desc, title 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-04-21T10:34:21.577

万一有人在谷歌搜索你是否可以时发现这个`ORDER BY my_alias`：是的，你可以。这花了我几个小时。

正如[postgres 文档](https://www.postgresql.org/docs/13/sql-select.html#SQL-ORDERBY)所说：

> 序数是指输出列的序数（从左到右）位置。此功能可以根据没有唯一名称的列定义排序。这绝不是绝对必要的，因为总是可以使用该`AS`子句为输出列分配名称。

所以要么这个问题已经修复，要么这个问题专门关于`ORDER BY my_alias = 0, other_column`我实际上不需要的语法。

# regex - 正则表达式匹配 URL 并使用匹配的 URL 指定一个 href

> ID：11785625
> 
> 赞同：0
> 
> 时间：2012-08-02T20:55:34.237
> 
> 标签：regex

我有一个包含以下 url 的日志：

```
https://<hostname>/<directory>/builds/<job>/<version>/<build_number> 
```

在哪里：

```
hostname = any valid hostname
directory = any valid directory
job = any valid collection of characters (it may contain '-')
version = [0-9].[0-9] (i.e.) 1.0
build_number = [0-9] (i.e.) 2012050677 
```

我的意图是阅读日志并使用正则表达式执行以下操作：

1.  匹配网址
2.  使用 url 设置 href，如下所示：

    ```
    <a href=matched_url>Latest build</a> 
    ```

我可以使用哪种正则表达式来完成此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T21:19:42.863

做一个正则表达式替换

```
https://[^/]+/[^/]+/builds/[^/]+/[0-9]+\.[0-9]+/\d+ 
```

和

```
<a href='$&'>Latest build</a> 
```

或者，可能取决于您的正则表达式引擎，`$0`而不是。`$&`

# csh - 无法从 java 包装类运行 cshell 脚本

> ID：11785637
> 
> 赞同：0
> 
> 时间：2012-08-02T20:56:25.567
> 
> 标签：csh, psql

我有一个 java 类，我在其中调用一个 runshellscript 方法来执行一个脚本。它适用于 mysql，但我似乎无法找出为什么它不适用于 psql。这是我的runshell方法的摘录

```
public static void runShellScript (String unixCommand) 
{
 try {
     Runtime runtime=Runtime.getRuntime();
     Process process=runtime.exec(new String [] { "/bin/csh", "-c", unixCommand});
     InputStream stderr=process.getErrorStream();
     InputStreamReader isr=new InputStreamReader (stderr);
     BufferedReader br=new BufferedReader (isr);
     String line=null;
     System.out.println("<ERROR>");

     while((line=br.readLine())!=null)
         System.out.println(line);

     System.out.println(line);
     int exitVal=process.waitFor();
     System.out.println("Process exitValue:" + exitVal);
 }
 catch (Throwable t)
 {
     t.printStackTrace();
 } 
```

问题是当我把它放在鼠标点击事件后面时，它说找不到命令。这是mous事件的代码

```
private void jMenuItem6MousePressed(java.awt.event.MouseEvent evt) {                                        
    // TODO add your handling code here:

    String shellCommand="/vobs/tools/DataValidation/mysqlconnection.csh";

   // RunShellScript run=new RunShellScript();
    RunShellScript.runShellScript(shellCommand);

} 
```

奇怪的是，当我直接进入脚本所在的目录并键入 ./mysqlconnection 时，脚本可以工作。但是当我只输入 mysqlconnection 时说找不到命令。不知何故，它没有将我的脚本名称识别为命令？

# ruby - 调用 super 时参数数量错误

> ID：11785641
> 
> 赞同：9
> 
> 时间：2012-08-02T20:56:44.347
> 
> 标签：ruby

```
class A
  def initialize
    print "Hello! "
  end
end

class B <  A
  def initialize(name)
    super
    print "My name is #{name}!"
  end
end

test = B.new("Fred") 
```

我得到

```
wrong number of arguments (1 for 0) 
```

但为什么？课堂`B`需要一个论点，我给出的很好。类`A`不需要任何参数，所以我根本没有传递任何东西`super`。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-02T21:02:34.627

您需要使用 super() 才能在不带参数的情况下调用它。Super 本身会自动使用提供给自身的参数（即“名称”）调用父级

# android - android wifi应用程序崩溃

> ID：11785646
> 
> 赞同：1
> 
> 时间：2012-08-02T20:56:58.517
> 
> 标签：android

我有这个代码：

```
 List<ScanResult> vAll = null;
    WifiManager vMainWifi = null;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_wi_fi);

        vMainWifi = (WifiManager) this.getSystemService(Context.WIFI_SERVICE);
        vAll = getWiFi();
    }   
    public void btnViewWiFI_onClick(View v) {
        TextView vTmpTextView = (TextView) findViewById(R.id.tvRetele);
        String vString = "WiFi:";
        List<String> vLista = getWiFiString();
        if (vLista != null) {
            for (int i = 0; i < vLista.size(); i++)
                vString += "\n\t" + vLista.get(i);
        }
        vTmpTextView.setText(vString);
    }
    List<ScanResult> getWiFi() {
        if (vAll != null)
            return vAll;
        if (vMainWifi.isWifiEnabled())
            return vMainWifi.getScanResults();
        else {
            vMainWifi.setWifiEnabled(true);
            return vMainWifi.getScanResults();
        }
    }
    List<String> getWiFiString() {
        List<String> vTmp = null;
        if (vAll == null)
            vAll = getWiFi();
        if (vAll != null) {
            for (int i = 0; i < vAll.size(); i++)
                vTmp.add(vAll.get(i).BSSID + ", " + vAll.get(i).SSID);
        }
        return vTmp;
    } 
```

在布局 xml

```
 <TextView
        android:id="@+id/tvRetele"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="94dp" />

    <Button
        android:id="@+id/btnViewWiFI"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="145dp"
        android:layout_marginTop="233dp"
        android:onClick="btnViewWiFI_onClick"
        android:text="@string/viewWiFi" /> 
```

在清单文件中我有这个

```
 <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
 <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
 <uses-permission android:name="android.permission.CHANGE_WIFI_STATE" /> 
```

如果我尝试调试它，我会得到空列表，可能是因为我收到 WiFi 网络错误，但是当我上传到手机并安装此应用程序时，当我按下按钮时会崩溃。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:15:00.300

您没有在 getWiFiString() 中实例化列表 vTmp ！尝试向其中添加元素时会收到 NullPointerException。

您可能需要的是：

```
List<String> vTmp = new ArrayList<String>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T21:48:01.187

阅读您的日志文件。找到它说致命的地方。找到包含您的包名称的行。它可能会说空指针异常。转到该行并确保该项目具有值且不为空。在崩溃线之前设置断点并检查所有内容的值。这个答案不仅可以解决这个问题，而且还会遇到更多问题。

If you don't see logcat goto eclipse --> window-->show view --> logcat

# .net - 在记录和其他功能之前关闭通用处理程序

> ID：11785670
> 
> 赞同：1
> 
> 时间：2012-08-02T20:58:17.607
> 
> 标签：.net, api, generic-handler

我正在开发一个需要为报告目的提供大量日志记录的高容量 API。为了限制此日志记录功能对 api 用户的影响，我想完成请求，然后开始记录所有需要记录的内容。

会刷新，然后关闭导致这种情况发生，还是客户端系统会等到所有“业务资料”（简称 BS）完成？

# sql - 访问 2007 SQL 合并表而不创建重复表

> ID：11785672
> 
> 赞同：1
> 
> 时间：2012-08-02T20:58:36.793
> 
> 标签：sql, ms-access-2007

我想将 tblA 的唯一值添加到 tblB 而不创建基于多个字段的重复值。在以下示例中，FirstName 和 LastName 确定重复项，Foo 和 Source 无关紧要。

tblA:

```
名字姓氏Foo来源
约翰·多伊 1 A
简·多伊 2 A
史蒂夫史密斯 3 A
比尔约翰逊 2 A
```

表：

```
名字姓氏Foo来源
约翰·多伊 1 B
鲍勃·史密斯 5 B
史蒂夫·史密斯 4 B
```

这是我想要的结果：

tblA:

```
名字姓氏Foo来源
约翰·多伊 1 A
简·多伊 2 A
史蒂夫史密斯 3 A
比尔约翰逊 2 A
鲍勃·史密斯 5 B  
```

这是我尝试过的代码的等价物：

`INSERT INTO tblA
SELECT B.* FROM tblB AS B
LEFT JOIN tblA AS A ON A.FirstName = B.FirstName AND A.LastName = B.LastName
WHERE A.FirstName IS NULL` 

这是我得到的结果：

tblA:

```
名字姓氏Foo来源
约翰·多伊 1 A
简·多伊 2 A
史蒂夫史密斯 3 A
比尔约翰逊 2 A
约翰·多伊 1 B
鲍勃·史密斯 5 B
```

来自 tblB 的 Steve Smith 被忽略了，这很好。添加了来自 tblB 的 John Doe，这很糟糕。我在这方面花费了太多时间，并且我已经以我能想到的各种方式检查了数据，以确保 tblA 和 tblB 中的 John Doe 的名字和姓氏相同。关于可能出现问题的任何想法？

更新：仅供参考，在我真正的 tblB 上，30,000 中的大约 10,000 应该移动到 tblA。这实际上移动了 21,000 多个。问题是这是一个常见过程的一个步骤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:18:46.063

当我尝试：

```
SELECT tbb.*
FROM tbb 
LEFT JOIN tba 
ON (tbb.FirstName = tba.FirstName) 
   AND (tbb.LastName = tba.LastName)
WHERE (((tba.LastName) Is Null)); 
```

返回的唯一行是：

```
Bob        Smith     5    B 
```

约翰·多伊有没有可能有一个隐藏的角色？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T21:09:01.377

*编辑*：对不起，它不适用于 Access2007

你有很多方法可以做到这一点：

```
INSERT INTO tblA 
SELECT B.* FROM tblB AS B 
WHERE B.firstname, B.lastname NOT IN (select firstname, lastname from tblA) 
```

或者

```
INSERT INTO tblA 
SELECT * FROM tblB
MINUS
SELECT * FROM tblA 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T15:45:29.237

这个在 Access 中工作。

您可以将它运行到无穷大 - 它不会添加比需要更多的行：

```
INSERT INTO tblA
SELECT B.*
FROM tblB AS B
WHERE (((B.FirstName) Not In (select firstname from tblA))
AND ((B.LastName) Not In (select firstname from tblA))) 
```

# eclipse - 如何或在哪里使用phonegap和mgwt在eclipse中为vm参数设置参数

> ID：11785675
> 
> 赞同：0
> 
> 时间：2012-08-02T20:58:46.667
> 
> 标签：eclipse, gwt, cordova, virtual-machine, mgwt

我正在为我的移动 Web 项目使用 mgwt 和 phonegap，并且正在使用 eclipse。要在我的项目中使用 phonegap，我需要为 vm 参数设置两个参数，这些参数将在下面进行描述。

[http://code.google.com/p/gwt-phonegap/wiki/FileModule](http://code.google.com/p/gwt-phonegap/wiki/FileModule)

这是两个参数。-DinsecurePhoneGapFileApi=true

-DphonegapFilePath="你要使用的目录的路径"

我真的不知道在哪里或如何添加这些参数。

请帮忙。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-02T21:28:02.850

在 Eclipse 的运行时配置中的参数选项卡下，您可以将参数传递给您的 jvm，请参阅：

![屏幕截图日食](../Images/5c68c45efaeac0ccc84f051b36e24024.png)

# css - jquery-ui选项卡菜单导航中的CSS Sprite图像问题

> ID：11785679
> 
> 赞同：2
> 
> 时间：2012-08-02T20:59:05.483
> 
> 标签：css

我目前在标签的导航菜单中放置图标时遇到问题。我使用了一个在线图像 css sprite 创建器，它运行良好。现在的问题是图片显示不正确。我该如何解决这个问题？这是我的[示例](http://webprolearner.ueuo.com/dropdown-menu/test1.php) **HTML**

```
<ul>
<li><a href="#tab-1" class="pngIcon sprite-category">1\. Category</a></li>
<li><a href="#tab-2" class="pngIcon sprite-description">2\. Description</a></li>
<li><a href="#tab-3" class="pngIcon sprite-images">3\. Images</a></li>
<li><a href="#tab-4" class="pngIcon sprite-contact">4\. Contact Info</a></li>
<li><a href="#tab-5" class="pngIcon sprite-final">5\. Final</a></li>
</ul> 
```

**CSS 我从制作 css sprite 图像的网站获得了坐标**

```
.sprite-final{  background-position: 0 0; width: 32px; height: 32px; } 
.sprite-category{ background-position: 0 -82px; width: 32px; height: 32px; } 
.sprite-contact{ background-position: 0 -164px; width: 32px; height: 32px; } 
.sprite-description{ background-position: 0 -246px; width: 32px; height: 32px; } 
.sprite-images{ background-position: 0 -328px; width: 32px; height: 32px; }

.pngIcon {
    padding: 0;
    background: url(http://webprolearner.ueuo.com/dropdown-menu/images/tabdetails.png) no-repeat top left;
    height: 32px;
    line-height: 32px;
    text-indent: 40px;
    margin: 0 5px;
    display: block;
} 
```

CSS 精灵图像

![在此处输入图像描述](../Images/578c7a8372842792f49a423a0708cabf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:08:10.610

首先，您需要检查您的 ID 和课程。ID 是唯一的，不应在代码中重复，而类正是为此：重复。我会先改变它。

其次，css是级联样式，所以先读取哪种样式很重要。您正在定义类，然后您将命令`background: url(images/tabdetails.png) no-repeat top left;`传递给#pngIcon（左上角相当于`background-position`）。

第三，**更重要**的是，你应该给背景`<a>`，而不是使用图像。你的css没有被应用！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T21:08:41.540

精灵仅用于背景。删除`img`初学者的标签。然后`.sprite-Final, ...`直接将类添加到`a`标签中，也`pngIcon`为每个锚添加一个类（不是#id，一个id每页只能出现一次！）然后更新你的css如下：

```
.pngIcon {
    padding: 0;
    background-image: url(images/tabdetails.png);
    background-repeat: no-repeat;
    height: 32px;
    line-height: 32px;
    text-indent: 40px;
    margin: 0 5px;
    display: block;
} 
```

我认为这应该可以解决问题...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T21:14:39.817

您需要将特定类分配给`<a>`元素。然后，您将把精灵作为背景应用到其中的每一个。你不需要`<img>`那里的元素。

```
<li><a href="#tab-1" class="sprite-Final">1\. Category</a></li> 
```

然后在左侧给那个锚元素一些填充。也许像 35 像素，因为图标是 32 像素宽。这样做会将文本“1\. Category”推到右侧。对锚点应用任何调整，使文本与背景图标图像很好地对齐。该`line-height: X;`属性最好垂直对齐。

# regex - XSD 限制基于使用正则表达式的范围内的某些数字

> ID：11785680
> 
> 赞同：0
> 
> 时间：2012-08-02T20:59:09.250
> 
> 标签：regex, xsd, range

我正在为一个 Web 服务创建一个 XSD，它将一个 ID 号作为 XML 中的一个元素。这些 ID 号由 10 个连续数字 ([0-9]{10}) 组成，但我试图创建一个正则表达式，可以排除此范围内的某些元素。

例如，这是我目前在 XSD 中的限制：

```
 <xsd:restriction base="xsd:string">
        <xsd:pattern value="[0-9]{10}" />
    </xsd:restriction> 
```

我需要限制以允许不符合以下 ID 的 [0-9]{10} 字符串：

```
 All 0's:         [0]{10}
    Starting with 6: [6][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]
    Starting with 000: [0][0][0][0-9][0-9][0-9][0-9][0-9][0-9][0-9]
    Starting with 999: [9][9][9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]
    Ends with 2 0's: [0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0][0]
    4 0's in Middle: [0-9][0-9][0-9][0][0][0][0][0-9][0-9][0-9] 
```

这可以从 XSD 或正则表达式中完成吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T21:17:07.420

我会改写你的限制：

*   第一个数字不能是 a `6`。
*   最后两位数字中至少有一位不能为零。
*   至少中间四位数字中的一位不得为零。

第一个限制，一个仅由零组成的 ID，实际上包含在最后两个限制中。

第一个限制可以由一组不包括的允许字符表示`6`，即`[0-57-9]`。

对于其他限制，一个直接的解决方案是从一个部分的开头开始，该部分不能仅由零组成并假定一个非零数字；如果该假设成立，则其余数字可能包括零；否则该部分中的第一个数字必须为零，对于剩余的字符，可以递归地重复此规则，直到只剩下一个字符：`([1-9][0-9]{3}|0(... repeat for three digits, then two digits, ...))`

因此，合适的 RegEx 将是：

```
[0-57-9][0-9]{2}([1-9][0-9]{3}|0([1-9][0-9]{2}|0([1-9][0-9]|0[1-9])))[0-9]([1-9][0-9]|0[1-9]) 
```

**更新：**附加限制需要以下内容：

*   前三个数字中至少有一个不能是`0`.
*   前三个数字中至少有一个不能是`9`.

这可以以与上述相同的方式包含，接受除`0`and之外的任何内容`9`，或这两个数字中的任何一个：

```
([1-57-8][0-9]{2}|0([1-9][0-9]|[0-9][1-9])|9([0-8][0-9]|[0-9][0-8]))([1-9][0-9]{3}|0([1-9][0-9]{2}|0([1-9][0-9]|0[1-9])))[0-9]([1-9][0-9]|0[1-9]) 
```

新部分位于表达式的前面：

```
([1-57-8][0-9]{2}|0([1-9][0-9]|[0-9][1-9])|9([0-8][0-9]|[0-9][0-8])) 
```

所以，

*   `0`ID 既不以 a也不以开头`9`。在这种情况下，接下来的两位数没有限制。
*   或 ID 以`0`. 在这种情况下，接下来的两位数字中的一位不得为零，无论是第一个数字还是第二个数字。
*   或 ID 以`9`. 在这种情况下，接下来的两位数字中的一位不能是 9，无论是第一个数字还是第二个数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T21:20:43.733

我认为这将涵盖它：

```
[01-57-9]\d{2}([1-9]\d{3}|\d[1-9]\d{2}|\d{2}[1-9]\d|\d{3}[1-9])\d([1-9]\d|\d[1-9]) 
```

分解：

`[01-57-9]`第一个字符是数字非 6。

`\d{2}`接下来的两个字符可以是任何数字。

然后有一个`(...|...|...|...)`部分，将所有这些 ORing 在一起。

`[1-9]\d{3}`在接下来的 4 位数字中，第一位不能为零。

或者

`\d[1-9]\d{2}`在接下来的 4 个中，第二个不能为零。

或者

`\d{2}[1-9]\d`或者第三个不为零。

或者

`\d{3}[1-9]`或者第四个不为零。

然后我们有另一个`\d`，任何数字。

最后，

`([1-9]\d|\d[1-9])`最后两位数中的第一个或第二个不能为 0。

由于我们有两个部分要求至少一个数字不为零，因此不可能所有 10 都为零。

# image - 如何将点变成三角形？

> ID：11785690
> 
> 赞同：2
> 
> 时间：2012-08-02T20:59:50.873
> 
> 标签：image, algorithm

我正在尝试以编程方式制作所有三角形的图像。我认为解决这个问题的方法是随机选择一些点，然后将它们“连接”成三角形。问题是我无法想出一个连接它们的好方法。

我想做的一件事是选择一个随机点开始（点 1），然后找到最近的点（点 2），然后“连接”它们。然后，我会通过选择与点 1 和点 2 的组合距离最小的点来找到最近的第三点。这会给我一个三角形。我可以重复这个直到我有一堆三角形。这里的问题是三角形将是分开的（它们不会连接）。

我是不是在愚蠢地想这些？有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T21:03:56.913

您正在寻找的是[Delaunay 三角测量](http://en.wikipedia.org/wiki/Delaunay_triangulation)！

它的基本作用是将三个点组合在一个三角形中，如果通过它们的圆不包含任何其他点，并且它有效地做到了。可能会有点在一条线上的特殊情况，或者在同一个圆上超过 3 个点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T21:02:12.573

我认为您在开始时走在正确的轨道上，将第一步视为创建 3 条边，然后取每条边并制作一个新三角形，每个边上都有一个额外的点。理论上，每条边应该有 2 个三角形。

# sql - 使用大表的 WHERE EXISTS 查询可扩展性

> ID：11785693
> 
> 赞同：5
> 
> 时间：2012-08-02T21:00:08.807
> 
> 标签：sql, sql-server-2008, tsql

以下查询旨在查找去医院的人数、去医院的总人数，然后将这两者相除以获得百分比。该表`Claims`有 200 万多行，并且确实具有正确的非聚集索引`patientid, admissiondate, and dischargdate`. 查询运行得足够快，但我对如何使它更有用很感兴趣。我希望能够在行中添加另一个代码，`(hcpcs.hcpcs ='97001')`并将更改`percentRehabNotHomeHealth`反映在另一列中。有没有可能不写一个大的、胖的连接语句来将两个查询的结果连接在一起？我知道通过添加额外的列，数学看起来不正确，但我现在并不担心。所需的示例输出：http: [//imgur.com/BCLrd](https://imgur.com/BCLrd)
数据库模式

![在此处输入图像描述](../Images/7d8f81c4ad9a9f7173a7c8210b34dd81.png)

```
select  h.hospitalname
    ,count(*) as visitCounts
    ,hospitalcounts
    ,round(count(*)/cast(hospitalcounts as float) *100,2) as percentRehabNotHomeHealth
    from Patient p
    inner join statecounties as sc on sc.countycode = p.countycode
    and sc.statecode = p.statecode
    inner join hospitals as h on h.npi=p.hospitalnpi
    inner join
    --this join adds the hospitalCounts column
    (
        select h.hospitalname, count(*) as hospitalCounts
            from hospitals as h
            inner join patient as p on p.hospitalnpi=h.npi
            where p.statecode='21' and h.statecode='21'
            group by h.hospitalname
    ) as t on t.hospitalname=h.hospitalname
    --this where exists clause gives the visitCounts column
    where h.stateCode='21' and p.statecode='21'
    and exists
    (
        select distinct p2.patientid
            from Patient as p2
            inner join Claims as c on c.patientid = p2.patientid
            and c.admissiondate = p2.admissiondate
            and c.dischargedate = p2.dischargedate
            inner join hcpcs on hcpcs.hcpcs=c.hcpcs
            inner join hospitals as h on h.npi=p2.hospitalnpi
            where (hcpcs.hcpcs ='97001' or hcpcs.hcpcs='9339' or hcpcs.hcpcs='97002')
            and p2.patientid=p.patientid 
    ) 
    and hospitalcounts > 10
    group by h.hospitalname, t.hospitalcounts
    having count(*)>10 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-08T17:18:44.013

您可能会查看 CTE（通用表表达式）来获得所需的内容。它将允许您获取汇总数据并将其加入到公共密钥的详细信息中。例如，我将您对子查询的联接修改为 CTE。

```
;with hospitalCounts as (
    select h.hospitalname, count(*) as hospitalCounts
    from hospitals as h
    inner join patient as p on p.hospitalnpi=h.npi
    where p.statecode='21' and h.statecode='21'
    group by h.hospitalname
)
select  h.hospitalname
    ,count(*) as visitCounts
    ,hospitalcounts
    ,round(count(*)/cast(hospitalcounts as float) *100,2) as percentRehabNotHomeHealth
from Patient p
inner join statecounties as sc on sc.countycode = p.countycode
and sc.statecode = p.statecode
inner join hospitals as h on h.npi=p.hospitalnpi
inner join hospitalCounts on t.hospitalname=h.hospitalname
--this where exists clause gives the visitCounts column
where h.stateCode='21' and p.statecode='21'
and exists
(
    select p2.patientid
        from Patient as p2
        inner join Claims as c on c.patientid = p2.patientid
        and c.admissiondate = p2.admissiondate
        and c.dischargedate = p2.dischargedate
        inner join hcpcs on hcpcs.hcpcs=c.hcpcs
        inner join hospitals as h on h.npi=p2.hospitalnpi
        where (hcpcs.hcpcs ='97001' or hcpcs.hcpcs='9339' or hcpcs.hcpcs='97002')
        and p2.patientid=p.patientid 
) 
and hospitalcounts > 10
group by h.hospitalname, t.hospitalcounts
having count(*)>10 
```

# database - Bucardo 添加同步以复制数据

> ID：11785696
> 
> 赞同：1
> 
> 时间：2012-08-02T21:00:22.323
> 
> 标签：database, postgresql, perl, database-replication, bucardo

我正在使用 Bucardo 在数据库中复制数据。我有一个名为 mydb 的数据库和另一个名为 mydb2 的数据库。它们都包含相同的表，在这两种情况下都称为“数据”。按照[本网站](http://bucardo.org/wiki/Bucardo/Installation)上的步骤，我安装了 Bucardo 并添加了两个数据库：

```
bucardo_ctl add database mydb
bucardo_ctl add database mydb2 
```

并添加了表格：

```
bucardo_ctl add all tables 
```

现在，当我尝试使用以下命令添加同步时：

```
bucardo_ctl add sync testfc source=mydb targetdb=mydb2 type=pushdelta tables=data 
```

我收到以下错误：

DBD::Pg::st 执行失败：错误：来自 Perl 函数“herdcheck”的错误：在第 17 行的同一群 (1) 中不能有来自不同数据库的山羊。在 /usr/bin/bucardo_ctl 第 3346 行。

有人有什么建议吗？任何将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T15:47:49.500

因此，在源选项中，您应该输入牛群的名称（据我所知，它是表格列表。然后，而不是：

```
bucardo_ctl add all tables 
```

利用

```
bucardo_ctl add all tables --herd=foobar 
```

而不是使用

`bucardo_ctl add sync testfc source=mydb targetdb=mydb2 type=pushdelta tables=data`

利用

```
bucardo_ctl add sync testfc source=foobar targetdb=mydb2 type=pushdelta tables=data 
```

问题是源选项不是放置源数据库的地方，而是“群”或表。

请记住，pushdelta 适用于具有主键的表，而 fullcopy 适用于与是否有 PK 无关的表。

希望有帮助。

# eclipse - Eclipse IDE for Java 中的 Ant 构建错误

> ID：11785698
> 
> 赞同：10
> 
> 时间：2012-08-02T21:00:26.290
> 
> 标签：eclipse, ant, junit, jdk1.6

我一直收到以下错误，并进行了大量研究并尝试了所有提供的解决方案，但均无济于事。

```
junitreport:
 [junitreport] Processing C:\workspace\test123\junit\TESTS-TestSuites.xml to C:\Users\Matt\AppData\Local\Temp\null1903337257
 [junitreport] Loading stylesheet jar:file:/C:/Users/Matt/Documents/Selenium/eclipse/plugins/org.apache.ant_1.8.3.v20120321-1730/lib/ant-junit.jar!/org/apache/tools/ant/taskdefs/optional/junit/xsl/junit-frames.xsl
 [junitreport] : Error! The first argument to the non-static Java function 'replace' is not a valid object reference.
 [junitreport] : Error! Cannot convert data-type 'void' to 'reference'.
 [junitreport] : Fatal Error! Could not compile stylesheet
 [junitreport] Failed to process C:\workspace\test123\junit\TESTS-TestSuites.xml

BUILD FAILED
C:\Users\Matt\workspace\Test1\build.xml:122: Errors while applying transformations: Fatal error during transformation 
```

我[在 Eclipse 中的 ant junit build error](https://stackoverflow.com/questions/10536095/ant-junit-build-error-inside-eclipse)中找到了一个解决方案，并说该问题是由更新版本的 JDK 引起的，使用 1.6_31 可以解决它，我尝试按照我在网上找到的关于如何更改 Java Eclipse 版本的说明进行操作使用。每次我运行 build ant 时，无论我使用的是哪个版本的 Java，它都会返回相同的错误。我已经尝试过 JRE7、jdk1.7.0_05、jdk1.6.0、jdk1.6.0_31 和其他我不再安装的。

我正在运行以下

*   Windows 7 专业版 SP1 x64
*   适用于 Java 开发人员的 Eclipse IDE 版本：Juno Release Build id：20120614-1722
*   org.apache.ant_1.8.3.v20120321-1730

如果有人可以提供任何帮助以使该报告运行，将不胜感激。我是编程新手，这非常令人沮丧，尤其是因为我仍在学习所有行话，并试图确保我正确地遵循了说明。如果您需要我提供更多信息，我会提供，我将尽我所能遵循任何指示。非常感谢您提前。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T20:36:39.560

虽然[Ant 错误报告 384757](https://bugs.eclipse.org/bugs/show_bug.cgi?id=384757)声称这是由 Oracle JDK 中的 XSL Tranformer 构建引起的——这可能是真的——但可以通过更改 Ant 版本来解决问题：

我尝试了那里提到的一些解决方法。过了一会儿，我发现这个 bug 出现在 Ant 1.8.3（在 Eclipse 中分发）中，但在 Ant 1.8.2（在 Eclipse 3.7 中分发）中没有。

Ant 1.9.0 也没有出现该错误。

我已经[下载了 Ant 1.9.0](http://ant.apache.org)并在 Eclipse 的“Run As -> Ant build...”中配置为使用 Ant 1.9.0 文件夹作为 ANT HOME。这行得通。

PS：我的 Eclipse 使用 Ant 1.8.3（不起作用），但从控制台运行 Ant 使用 Ant 1.8.2（起作用）。起初这令人困惑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-03T11:17:45.913

我通过下载 apache-ant-1.9.1 并在 Eclipse 中通过更改 ANT HOME 从 windows--> Preferences 并将 ANT HOME 设置为 apache-ant-1.9.1 来解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-08T20:19:09.850

下面的解决方法修复了我遇到的构建问题......

从下面给出的 url 下载 2 个 jar 文件并将它们添加到位于 Eclipse 上的 Ant-Runtime Classpath 中：Window>Preferences> Ant>Runtime>Ant Home Entries

*   [http://www.java2s.com/Code/Jar/x/Downloadxalanjar.htm](http://www.java2s.com/Code/Jar/x/Downloadxalanjar.htm)
*   [http://www.java2s.com/Code/Jar/a/Downloadapachexmlxercesjar.htm](http://www.java2s.com/Code/Jar/a/Downloadapachexmlxercesjar.htm)

重新启动 eclipse 并运行 Ant 构建。

# wordpress - WordPress自定义帖子类型的永久链接不起作用

> ID：11785702
> 
> 赞同：1
> 
> 时间：2012-08-02T21:00:35.543
> 
> 标签：wordpress, rewrite

我设置了 2 个自定义帖子类型，我们将它们称为 type1 和 type2。两者都将具有相同名称的帖子，因此它们之间的唯一区别是它们的类型和内容。例如，将有 2 个具有相同标题“Title1”的帖子，其中包含永久链接 [http://domain.com/type1/title1](http://domain.com/type1/title1)和[http://domain.com/type2/title1](http://domain.com/type2/title1)。在这里我遇到了奇怪的问题。第一个链接工作得很好，第二个出于某种奇怪的原因重定向到第一个。什么可能导致这种情况以及如何解决它？

# sql - 从不在另一个表中的表中选择

> ID：11785704
> 
> 赞同：1
> 
> 时间：2012-08-02T21:00:36.450
> 
> 标签：sql, sql-server

我有两个表，每个表都有以下字段：`IDnumber`, `SectionNumber`, `Date`。两个表中有重叠的信息。

如何仅选择不重叠的行（即在一个表中但不在另一个表中）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:02:41.777

您可以`NOT IN`在`WHERE`子句中使用 a。

```
SELECT IDnumber, SectionNumber, Date
FROM table1
WHERE IDnumber NOT IN (SELECT IDnumber FROM table2) 
```

或者`NOT EXISTS`

```
SELECT IDnumber, SectionNumber, Date
FROM table1 t1
WHERE NOT EXISTS (SELECT IDnumber FROM table2 t2 WHERE t1.IDnumber = t2.IDnumber) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T21:03:03.903

哪个数据库管理系统？

如果是 SQL Server，那么它几乎就是你在标题中写的......

```
SELECT *
FROM Table1
WHERE IDnumber NOT IN (SELECT IDnumber FROM Table2) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T05:01:17.387

```
SELECT *
FROM Table1 t1 left join Table2 t2
on t1.id=t2.id
where t2.id is null 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T21:29:05.593

如果要比较多个列，则需要外连接：

```
select table1.*
from table1 left outer join
     table2
     on table1.id = table2.id and
        table1.SectionNumber = table2.SectionNumber and
        table1.date = table2.date
where table2.id is null 
```

在表之间可能有许多匹配项的情况下，连接可能效率低下。假设您只需要这三个字段，您可以使用避免连接的技巧：

```
select id, SectionNumber, date
from ((select 0 as IsTable2, id, SectionNumber, date
       from table1
      ) union all
      (select 1 as IsTable2, id, SectionNumber, date
       from table2
      )
     ) t
 group by id, SectionNumber, date
 having max(isTable2) = 0 
```

# batch-file - 在 Unix 中使用语法高亮打开一个 .bat 文件

> ID：11785705
> 
> 赞同：2
> 
> 时间：2012-08-02T21:00:43.283
> 
> 标签：batch-file, editor, syntax-highlighting, vi

请向我推荐一个好的编辑器，我可以在其中从支持语法高亮的 Unix 编辑器中打开文件。我一直在使用vi编辑器。我尝试了 ESC :syntax 但这没有帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T21:02:20.707

vim 工作正常，你只需要告诉它什么是 .bat 文件。

如果 vim 不能自动识别文件，你可以告诉它如何用`:set filetype=bat`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T04:59:56.563

我希望这是你想要的.. 不需要使用任何其他编辑器.. 你可以使用和配置 vi 编辑器

[VI 和 VIM 语法高亮](http://www.if-not-true-then-false.com/2012/vi-vim-syntax-highlighting-on-fedora-centos-red-hat-rhel/)

这是我的示例屏幕截图。我正在使用[此处](http://www.ericphelps.com/batch/samples/password.bat.txt)的 .bat 文件代码..

![在此处输入图像描述](../Images/d15cfd79bddbc5f224d031419670b312.png)

这是我的 ~/.vimrc 文件配置

```
syntax on
set background=dark
set ruler                     " show the line number on the bar
set more                      " use more prompt
set autoread                  " watch for file changes
set number                    " line numbers
set hidden
set noautowrite               " don't automagically write on :next
set lazyredraw                " don't redraw when don't have to
set showmode
set showcmd
set nocompatible              " vim, not vi
set autoindent smartindent    " auto/smart indent
set smarttab                  " tab and backspace are smart
set tabstop=2                 " 6 spaces
set shiftwidth=2
set scrolloff=5               " keep at least 5 lines above/below
set sidescrolloff=5           " keep at least 5 lines left/right
set history=200
set backspace=indent,eol,start
set linebreak
set cmdheight=2               " command line two lines high
set undolevels=1000           " 1000 undos
set updatecount=100           " switch every 100 chars
set complete=.,w,b,u,U,t,i,d  " do lots of scanning on tab completion
set ttyfast                   " we have a fast terminal
set noerrorbells              " No error bells please
set shell=bash
set fileformats=unix
set ff=unix
filetype on                   " Enable filetype detection
filetype indent on            " Enable filetype-specific indenting
filetype plugin on            " Enable filetype-specific plugins
set wildmode=longest:full
set wildmenu                  " menu has tab completion
let maplocalleader=','        " all my macros start with ,
set laststatus=2
nore ; :
nore , ;

map ,<Tab> :set hls<CR>/\\n.*\\n/<CR>
set statusline=%2*%n\|%<%*%-.40F%2*\|\ %2*%M\ %3*%=%1*\ %1*%2.6l%2*x%1*%1.9(%c%V%)%2*[%1*%P%2*]%1*%2B

"  searching
set incsearch                 " incremental search
set ignorecase                " search ignoring case
set hlsearch                  " highlight the search
set showmatch                 " show matching bracket
set diffopt=filler,iwhite     " ignore all whitespace and sync

"  backup
" set backup
" set backupdir=~/.vim_backup
" set viminfo=%100,'100,/100,h,\"500,:100,n~/.viminfo
"set viminfo='100,f1

" spelling
if v:version >= 700
  " Enable spell check for text files
  autocmd BufNewFile,BufRead *.txt setlocal spell spelllang=en
endif

" mappings
" toggle list mode
nmap <LocalLeader>tl :set list!<cr>
" toggle paste mode
nmap <LocalLeader>pp :set paste!<cr>

""""""""""""""""""""""""""""""""""""""""""""""""
" Dark background
""""""""""""""""""""""""""""""""""""""""""""""""

"I always work on dark terminals
" set background=dark

"Make the completion menus readable
highlight Pmenu ctermfg=0 ctermbg=3
highlight PmenuSel ctermfg=0 ctermbg=7

"The following should be done automatically for the default colour scheme
"at least, but it is not in Vim 7.0.17.
if &bg == "dark"
  highlight MatchParen ctermbg=darkblue guibg=blue
endif 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T21:04:46.540

如果你想要一个终端编辑器，你可以使用 vim。如果你想要一个 GUI，你可以使用 gedit，它很简单并且支持多种语言的高亮显示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T21:07:37.937

如果您不喜欢 vi，请尝试使用 emacs :-)

# json - 如何对使用转换器的 Grails 服务进行单元测试？

> ID：11785708
> 
> 赞同：30
> 
> 时间：2012-08-02T21:00:48.907
> 
> 标签：json, grails, serialization, grails-2.0

我有一个 Grails 服务，它通过 HTTP 调用使用 3rd-party 服务发送电子邮件：

```
class EmailService {
    def sendEmail(values) {
        def valueJson = values as JSON
        ... // does HTTP call to 3rd party service
    }
} 
```

我编写了一个单元测试来测试这个服务（因为集成测试启动了 Hibernate 和整个域框架，我不需要）：

```
@TestFor(EmailService)
class EmailServiceTests {
    void testEmailServiceWorks() {
        def values = [test: 'test', test2: 'test2']
        service.sendEmail(values)
    }
} 
```

但是，当我执行此单元测试时，它在尝试进行`as JSON`转换时失败并出现此异常：

> org.apache.commons.lang.UnhandledException：org.codehaus.groovy.grails.web.converters.exceptions.ConverterException：类的不可转换对象：java.util.LinkedHashMap

然后我重新编写了我的单元测试来执行以下操作：

```
void testEmailServiceWorks() {
    def value = [test: 'test', test2: 'test2']
    def valueJson = value as JSON
} 
```

`as JSON`当它尝试进行转换时，我得到了同样的异常。

有谁知道我为什么会遇到这个异常，以及如何解决它？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-03-18T19:49:25.083

即使您正在测试服务，您也可以将`@TestMixin(ControllerUnitTestMixin)`注释应用到您的测试类以让 Grails 设置 JSON 转换器。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-02T21:45:06.367

as JSON 魔法是在域框架启动时创建的。

您必须将测试更改为集成测试或模拟 asType。

```
def setUp(){
    java.util.LinkedHashMap.metaClass.asType = { Class c ->
        new grails.converters."$c"(delegate)
    }
} 
```

请记住在拆解过程中自己进行清理，您不希望测试套件中出现元编程泄漏。

```
def tearDown(){
    java.util.LinkedHashMap.metaClass.asType = null
} 
```

编辑：如果您来自未来，请考虑以下答案：[https ://stackoverflow.com/a/15485593/194932](https://stackoverflow.com/a/15485593/194932)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-07-12T13:21:59.513

由于 Grails 3.3.x`grails-test-mixins`插件已被弃用。@see[迁移指南](http://docs.grails.org/3.3.x/guide/upgrading.html#__testmixin_testfor_etc_deprecated)。

对于这个问题，您应该实施`GrailsWebUnitTest`来自[Grails 测试支持框架](https://testing.grails.org/latest/guide/index.html)的方法。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-05T18:20:18.937

您可以在 setUp() 中初始化 JSON。有各种实现 ObjectMarshaller 的编组器，需要将它们添加到 ConverterConfiguration 才能使 JSON 转换工作。

[http://grails.github.io/grails-doc/2.4.4/api/index.html?org/codehaus/groovy/grails/web/converters/marshaller/json/package-summary.html](http://grails.github.io/grails-doc/2.4.4/api/index.html?org/codehaus/groovy/grails/web/converters/marshaller/json/package-summary.html)

例子 ：

```
 DefaultConverterConfiguration<JSON> defaultConverterConfig = new  DefaultConverterConfiguration<JSON>()
 defaultConverterConfig.registerObjectMarshaller(new CollectionMarshaller())
 defaultConverterConfig.registerObjectMarshaller(new MapMarshaller())
 defaultConverterConfig.registerObjectMarshaller(new GenericJavaBeanMarshaller())

 ConvertersConfigurationHolder.setTheadLocalConverterConfiguration(JSON.class, defaultConverterConfig); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-03-27T16:15:50.900

我刚刚遇到了这个问题，我真的不想`GrailsWebUnitTest`按照此处另一个答案中的建议实施。我想让我的服务测试尽可能“纯粹”和精简。我最终这样做了：

```
void setupSpec() {
    defineBeans(new ConvertersGrailsPlugin())
}

void cleanupSpec() {
    ConvertersConfigurationHolder.clear()
} 
```

这就是当您实现`GrailsWebUnitTest`（通过`WebSetupSpecInterceptor`和`WebCleanupSpecInterceptor`）时它在幕后发生的方式。

* * *

也就是说，转换器似乎是为在 Web 层中使用而设计的，主要是为了便于从控制器透明地返回不同格式的数据。值得考虑为什么您正在测试的服务首先需要转换器。

例如，在我的例子中，有人使用 JSON 转换器将一些数据序列化为字符串，以便将其存储在数据库的单个字段中。这似乎不是转换器的合适用户，所以我计划改变它的完成方式。在我的服务测试中提供转换器是一个临时解决方案，它允许我在重构之前提高我们的测试覆盖率。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-07-15T10:40:25.090

尝试对调用“将 myMap 渲染为 JSON”的控制器进行单元测试时，我遇到了同样的错误。我们使用 Grails 1.3.7 并且没有其他解决方案对我有用而不引入其他问题。目前，升级 Grails 对我们来说不是一种选择。

我的解决方案是使用 JSONBuilder 而不是“as JSON”，如下所示：

```
render(contentType: "application/json", {myMap}) 
```

请参阅[http://docs.grails.org/latest/guide/theWebLayer.html#moreOnJSONBuilder](http://docs.grails.org/latest/guide/theWebLayer.html#moreOnJSONBuilder)

（我意识到这已经过时了，但来这里是为了寻找解决方案，其他人也可能如此）

# r - rbind 函数更改我的条目

> ID：11785710
> 
> 赞同：2
> 
> 时间：2012-08-02T21:01:00.843
> 
> 标签：r

我有两个要附加在一起的 data.frames。一个 data.frame 保存过去的数据，另一个 data.frame 保存未来的预测数据。例如：

```
past <- structure(list(Period = c("2010-01-01", "2010-02-01", "2010-03-01", 
  "2010-04-01", "2010-05-01", "2010-06-01"), Count = c(3379221317, 
  3379221317, 3791458246, 4182424930, 4891432401, 5116360744)),
 .Names = c("Period", "Count"), row.names = c(NA, 6L), class = "data.frame")

future <- structure(list(Period = structure(c(15522, 15553, 15584, 15614, 
  15645, 15675), class = "Date"), Count = c(11051746713.9419, 11385578654.4160, 
  10864084232.2216, 11336164255.3271, 11121729107.9691, 12321341701.3780)),
  .Names = c("Period", "Count"), row.names = c(NA, 6L), class = "data.frame") 
```

我使用`rbind(past,future)`了，并且出于某种原因，data.frame 中的`Period`条目`future`都被重命名了。看起来像：

```
> rbind(past,future)
       Period       Count
1  2010-01-01  3379221317
2  2010-02-01  3379221317
3  2010-03-01  3791458246
4  2010-04-01  4182424930
5  2010-05-01  4891432401
6  2010-06-01  5116360744
7       15522 11051746714
8       15553 11385578654
9       15584 10864084232
10      15614 11336164255
11      15645 11121729108
12      15675 12321341701 
```

为什么我的日期被重命名为随机数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T21:27:34.260

从 的输出中可以看出`dput(past)`，`past$Period`是字符，而不是日期。 `str(past)`并且`str(future)`会告诉你他们是不同的。

```
> str(past)
'data.frame':   6 obs. of  2 variables:
 $ Period: chr  "2010-01-01" "2010-02-01" "2010-03-01" "2010-04-01" ...
 $ Count : num  3.38e+09 3.38e+09 3.79e+09 4.18e+09 4.89e+09 ...
> str(future)
'data.frame':   6 obs. of  2 variables:
 $ Period: Date, format: "2012-07-01" "2012-08-01" ...
 $ Count : num  1.11e+10 1.14e+10 1.09e+10 1.13e+10 1.11e+10 ... 
```

data.frame 列中的所有元素必须是相同的类型，因此该`future$Period`列被转换......但不确定为什么它没有被正确转换，因为：

```
> as.character(future$Period)
[1] "2012-07-01" "2012-08-01" "2012-09-01" "2012-10-01"
[5] "2012-11-01" "2012-12-01" 
```

所以解决方案*是*：

1.  转为`future$Period`性格：`future$Period <- as.character(future$Period)`
2.  隐秘至今`past$Period`：`past$Period <- as.Date(past$Period)`

取决于你想要的输出。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T21:09:20.353

它们不是随机的。矩阵元素必须没有属性，因此如果强制转换为矩阵，因子、日期和 POSIXt 项将成为它们的数字表示。有一个`rbind.data.frame`但您显然提供`rbind`了一个对象，该对象最终调用了该函数的 non-data.frame 版本。您需要从两个参数中提供 dput() 以获得更好的答案。

# c# - 我可以使用 Prism 从主机将区域注入模块吗？

> ID：11785711
> 
> 赞同：0
> 
> 时间：2012-08-02T21:01:06.747
> 
> 标签：c#, wpf, prism, composite

我有一个主机，它正在加载一个包含 2 个区域的模块。现在在主机端可用的少数场景中，我需要在模块中的两者之间添加一个新区域并将该模块加载到主机中。

指针表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T14:19:00.807

嗨，我做了类似你的事情。我所做的是我添加了我需要的所有 3 个区域，然后我使用区域行为来折叠或显示该区域。

希望这可以帮助。

# php - 访问多维数组的元素

> ID：11785712
> 
> 赞同：0
> 
> 时间：2012-08-02T21:01:11.813
> 
> 标签：php, arrays, multidimensional-array

一个新手数组问题...

给定一个具有这种结构的数组：

```
$post_dates Array [1]   
    [0...0] 
        2640    Array [2]   
            [0...1] 
                _id 2640    
                date_posted MongoDate 
```

当第一级键并不总是相同时，我将如何访问 date_posted 元素？我以为我可以有这个：

```
$post_dates[0]['date_posted'] 
```

但这给了我一个“未定义的偏移量”消息。我也试过

```
$post_dates[0][1] 
```

但这给出了相同的信息。

这是我收到错误的代码块：

```
foreach($posts as $post){

        $post_dates = iterator_to_array($posts_coll->find(array("topic_id"=>$post['_id']), array("date_posted"=>true)));

        if (empty($post_dates)){ // No replies, therefore last post date = date_posted
            //$replies = 0;
            $lastPost = date("d-M-Y h:i:s", $post['date_posted']->sec);
            echo "condition 1, last post date: " . $lastPost . "<br>";
        }
        elseif (count($post_dates) == 1) { // One reply, therefore last post date = $post_dates[date_posted]            
            //$lastPost = date("d-M-Y h:i:s", $post_dates[0][1]->sec);
            echo "condition 2, last post date: " . $lastPost . "<br>";
            var_dump($post_dates[0]['_id']);
        }
        else {
            // code to determine max date_posted if there is more than one reply
        }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T21:04:55.770

如果您不知道链中的任何键，则`$array["known"]["also_known"][???]["date_posted"]`必须迭代数组以找出`date_posted`您需要的键。

# java - 如何从android中的字节数组加载类？

> ID：11785713
> 
> 赞同：5
> 
> 时间：2012-08-02T21:01:23.233
> 
> 标签：java, android, dynamic, classloader

首先，我看到[了在运行时加载 Java-Byte-Code，](https://stackoverflow.com/questions/3174436/load-java-byte-code-at-runtime)它对我到达我目前遇到的同一个位置很有帮助。

我正在尝试从字节数组加载一个类，以避免将文件存储在磁盘上。在本例中，出于测试目的，我只是将 .class 文件读入字节数组，因此显然该文件仍存储在磁盘上，但这只是为了查看代码是否可以工作。

我采用这个字节数组，然后使用带有方法 loadClass 的自定义 ClassLoader 来加载一个类，但它不起作用。

```
 byte[] bytearray = null;
    try{    
    RandomAccessFile f = new RandomAccessFile("/sdcard/ClassToGet.dex", "r");
    bytearray = new byte[(int) f.length()];
    f.read(bytearray);

    MyClassLoader classloader = new MyClassLoader();
    classloader.setBuffer(bytearray); 
    classloader.loadClass("com.pack.ClassIWant");
    } 
```

这是 ClassLoader 的实现：

```
public class MyClassLoader extends DexClassLoader {

 private byte[] buffer;

  @Override
    public Class findClass(String className){
    byte[] b = getBuffer();
    return this.defineClass(className, b, 0, b.length);
    }

public void setBuffer(byte[] b){
    buffer = b;
}
public byte[] getBuffer(){
    return buffer;
} 
```

我收到的错误是这样的：

java.lang.UnsupportedOperationException: can't load this type of class file at java.lang.VMClassLoader.defineClass(Native Method)

我已经为它提供了 .class 文件、.dex 文件、.apk、.jar 等......我不知道它想要我提供什么“类文件类型”，并且不存在关于它的文档。任何帮助都会很棒我一直试图连续四天完成这项工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T05:30:10.783

我和你有同样的问题。

我收到错误“无法加载这种类型的类文件”的原因很简单。

在平台源码中，与方法“defineClass”相关的“/dalvik/vm/native/java_lang_VMClassLoader.cpp”总是返回如下异常。（版本：ICS）

最后得出结论，无法加载字节数组格式的.dex。

有没有人可以使用字节数组加载 .dex ？（不使用文件）

```
/*
 * static Class defineClass(ClassLoader cl, String name,
 *     byte[] data, int offset, int len)
 *     throws ClassFormatError
 *
 * Convert an array of bytes to a Class object.
 */
static void Dalvik_java_lang_VMClassLoader_defineClass(const u4* args, JValue* pResult)
{
    Object* loader = (Object*) args[0];
    StringObject* nameObj = (StringObject*) args[1];
    const u1* data = (const u1*) args[2];
    int offset = args[3];
    int len = args[4];
    char* name = NULL;

    name = dvmCreateCstrFromString(nameObj);
    ALOGE("ERROR: defineClass(%p, %s, %p, %d, %d)",
        loader, name, data, offset, len);
    dvmThrowUnsupportedOperationException(
        "can't load this type of class file");

    free(name);
    RETURN_VOID();
}

/*
 * static Class defineClass(ClassLoader cl, byte[] data, int offset,
 *     int len)
 *     throws ClassFormatError
 *
 * Convert an array of bytes to a Class object. Deprecated version of
 * previous method, lacks name parameter.
 */
static void Dalvik_java_lang_VMClassLoader_defineClass2(const u4* args, JValue* pResult)
{
    Object* loader = (Object*) args[0];
    const u1* data = (const u1*) args[1];
    int offset = args[2];
    int len = args[3];

    ALOGE("ERROR: defineClass(%p, %p, %d, %d)",
        loader, data, offset, len);
    dvmThrowUnsupportedOperationException(
        "can't load this type of class file");

    RETURN_VOID();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T21:08:27.050

确保您的`.dex`文件是真正的 dx 生成的 Dalvik 可执行文件，而不是`.class`伪装的 Java 文件。如果您使用`.dex`扩展名，则文件必须是`.dex`文件；否则使用`.jar`包含`classes.dex`条目的 ZIP 文件的扩展名。

并非所有版本的 Dalvik 都可以从内存中加载类。您可以通过从文件系统加载类来解决此问题。[DexMaker 的](https://code.google.com/p/dexmaker/source/browse/src/main/java/com/google/dexmaker/DexMaker.java) `generateAndLoad`方法中有一个例子：

```
 byte[] dex = ...

    /*
     * This implementation currently dumps the dex to the filesystem. It
     * jars the emitted .dex for the benefit of Gingerbread and earlier
     * devices, which can't load .dex files directly.
     *
     * TODO: load the dex from memory where supported.
     */
    File result = File.createTempFile("Generated", ".jar", dexCache);
    result.deleteOnExit();
    JarOutputStream jarOut = new JarOutputStream(new FileOutputStream(result));
    jarOut.putNextEntry(new JarEntry(DexFormat.DEX_IN_JAR_NAME));
    jarOut.write(dex);
    jarOut.closeEntry();
    jarOut.close();
    try {
        return (ClassLoader) Class.forName("dalvik.system.DexClassLoader")
                .getConstructor(String.class, String.class, String.class, ClassLoader.class)
                .newInstance(result.getPath(), dexCache.getAbsolutePath(), null, parent);
    } catch (ClassNotFoundException e) {
        throw new UnsupportedOperationException("load() requires a Dalvik VM", e);
    } catch (InvocationTargetException e) {
        throw new RuntimeException(e.getCause());
    } catch (InstantiationException e) {
        throw new AssertionError();
    } catch (NoSuchMethodException e) {
        throw new AssertionError();
    } catch (IllegalAccessException e) {
        throw new AssertionError();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T21:11:15.900

Android 不运行 JVM 字节码，而是运行 Dalvik 字节码。所以你的操作应该在之前包含这一行`defineClass()`

```
context.setOptimizationLevel(-1); 
```

# c++ - uint32_t 析构函数返回值

> ID：11785719
> 
> 赞同：11
> 
> 时间：2012-08-02T21:01:43.173
> 
> 标签：c++

今天我在一个类中看到了这段代码：

```
static const uint32_t invalid_index = ~uint32_t(); 
```

我的问题是，`uint32_t`析构函数的返回值是什么，它为什么有用？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-02T21:03:05.350

这不是析构函数，而是应用于**value-initialized的****按位运算`NOT`**符。 **`uint32_t`**

 **值初始化的整数类型是`0`，因此您将按位`NOT`获取`0`。

如同：

```
uint32_t x = uint32_t();  // 32 0's in binary form
uint32_t y = ~x;          // 32 1's in binary form 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-02T21:20:21.470

首先，正如许多人已经提到的，你看到的代码，

```
static const uint32_t invalid_index = ~uint32_t(); 
```

不是析构函数调用，而是按位“非” `~`，应用于类型的默认值`uint32_t()`，即`~(uint32_t(0))`.

现在回答你的问题，

> 我的问题是，uint32_t 析构函数的返回值是多少，它为什么有用？

**伪析构函数**的返回类型（它不是真正的析构函数，只是一个与析构函数调用具有相同符号的无操作操作）`void`，它主要用于不知道类型的泛型编程。

例子：

```
uint32_t x;
x.~uint32_t();  // Silly but valid, a pseudo-destructor call. 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-02T21:03:15.980

它不是析构函数，也不是二进制的。这里无效索引等于~uint32_t(0)。这是一个设置了所有位的 32 位无符号整数。即，0xffffffff。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-02T21:08:28.267

它是按位**非**，它可用于查找补码（例如~1011 = 0100）或作为尝试查找 2s 补码时的中间步骤（例如 [~1011] + 0001 = 0101）。**

# php - PHP/Python 中的死人开关

> ID：11785720
> 
> 赞同：5
> 
> 时间：2012-08-02T21:01:45.943
> 
> 标签：php, python, process, kill

因此，这既是一个特定于语言的问题，也是一个理论问题，但请考虑一下：

我需要 PHP 来执行一个系统密集型进程（使用 PHP `exec();`），该进程将在后台运行，但是当用户离开该特定页面时，该进程将被终止。

我很快意识到，死人的开关将是实现这一点的一种简单方法，因为我没有使用任何会话变量或其他服务器端变量，最终可能看起来像：

```
if($_SERVER['REQUEST_URI'] !== 'page_with_session.php'){
    //Instead of 'session_destroy();' this would be used to kill said process
} 
```

在任何情况下，PHP 中的 while 循环，重置 Python 脚本中的计时器或每 15 秒重新调用一次所述脚本，这样它就不会结束并终止进程。但是，当用户离开页面时，脚本将被调用，但在终止进程之前无法重置。

这个想法有什么漏洞吗？如果没有，PHP/JS 中的实现会如何？我看到它的工作顺序是：

1.  页面被用户点击
2.  `<?php exec('killer.py') ?>`
3.  杀手.py：
    1.  听 20 秒 - 如果没有反应...
    2.  `os.system('pkill process')`
4.  `<?php while(true){sleep(15); exec('killer.py no_wait_dont');} ?>`

你们的任何想法将不胜感激！

石匠

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T22:05:51.767

Javascript 要容易得多，而且安全（也就是说，不多）。

只需编写一个 javascript ping 函数，该函数每 10 秒发布一次内容到 ping.php（通过 ajax）。此 ping.php 将在用户会话中收到最后一个 ping 时记录（例如在`$_SESSION['last_ping']`）

`$_SESSION['last_ping']`您可以通过与当前时间进行比较来检查其他页面的用户活动。您将不得不在您的运行时密集型页面上使用它，但它肯定会起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T22:18:55.430

在 JS 中实现心跳。如果它停止超过一定时间，则终止子进程：

*   js发送请求
*   php/python在后台启动子进程并将pid返回给js
*   js 用给定的 pid ping php/python
*   php/python 通过 IPC 向 pid 对应的子进程发送信号，例如，通过发送 SIGUSR1
*   如果子进程没有及时收到信号；它死了，即子进程中有一个不断的自毁倒计时

如果您不能将自毁机制添加到子进程，那么您需要一个观察者进程来接收信号并终止子进程。它不太可靠，因为您需要确保观察者进程正在运行。

# c# - C# 使用 C++ 中的 & 执行按位运算

> ID：11785725
> 
> 赞同：2
> 
> 时间：2012-08-02T21:02:16.847
> 
> 标签：c#, c++, bit-manipulation, operator-keyword

无论如何，这是我的问题，我一直在修改整个 C++ 程序以在 C# 中工作，我已经完成了，我在 C++ 程序中有这个 If 语句。

```
if(info[i].location & 0x8 || 
             info[i].location & 0x100|| 
                     info[i].location & 0x200)
{
    //do work
}
else
{
    return
} 
```

当然，当我在 C# 中执行此操作时，它会给我一个“运算符 '||' 不能应用于“int”和“int”类型的操作数”错误。

关于我的问题的任何线索，我猜测 C# 有办法做到这一点，因为我对这些旧的 C 运算符相当不熟悉。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-02T21:04:07.827

**为什么会失败**

从根本上讲，它与此相同：

```
if (someInteger) // C or C++ 
```

对比

```
if (someInteger != 0) // C# 
```

基本上，当涉及到逻辑运算符和条件时，C# 更加严格——它迫使您使用可以`bool`转换为`bool`.

顺便说一句，这*也是*为什么在 C# 中这不仅仅是一个警告，而是一个全面的错误：

```
int x = ...;
if (x = 10) // Whoops - meant to be == but it's actually an assignment 
```

如果您以这种方式看到比较：

```
if (10 == x) 
```

这*通常是*开发人员试图避免像上面这样的拼写错误——但在 C# 中不需要它，除非你*真的*在与常`bool`量值进行比较。

**解决问题**

我怀疑你只需要：

```
if (((info[i].location & 0x8) != 0)) ||
    ((info[i].location & 0x100) != 0)) ||
    ((info[i].location & 0x200) != 0))) 
```

您可能不需要*所有*这些括号......但另一种选择是只使用*一个*测试：

```
if ((info[i].location & 0x308) != 0) 
```

毕竟，您只是在测试是否设置了这三个位中的任何一个...

您还应该考虑使用基于标志的枚举：

```
[Flags]
public enum LocationTypes
{
    Foo = 1 << 3; // The original 0x8
    Bar = 1 << 8; // The original 0x100
    Baz = 1 << 9; // The original 0x200
} 
```

然后你可以使用：

```
LocationTypes mask = LocationTypes.Foo | LocationTypes.Bar | LocationTypes.Baz;
if ((info[i].location) & mask != 0) 
```

或使用[不受约束的旋律](http://unconstrained-melody.googlecode.com)：

```
LocationTypes mask = LocationTypes.Foo | LocationTypes.Bar | LocationTypes.Baz;
if (info[i].location.HasAny(mask)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T21:04:56.257

这几乎就是它所说的：在 C# 中，`||`是一个纯逻辑运算符，因此不能在`int`. 您可以替换`||`为`|` （按位或在 上起作用`ints`），但随后需要通过将整个表达式与零进行比较来将其转换为布尔值，因为在 C# 中`if`- 语句需要布尔值。

或者，您可以替换`info[i].location & 0x8`为`(info[i].location & 0x8 != 0)`.

# php - 通过 PHP 上传图片返回空数组

> ID：11785726
> 
> 赞同：0
> 
> 时间：2012-08-02T21:02:19.707
> 
> 标签：php

我无法成功地将图像/文件上传到我的服务器。php如下：

```
//This is the directory where images will be saved
$uploadDir = "./";
$uploadFile = $uploadDir . basename( $_FILES['photo']['name']);

//Writes the photo to the server
if(move_uploaded_file($_FILES['photo']['tmp_name'], $uploadFile)){
    echo "The file has been uploaded successfully.";
} else {
    print_r($_FILES);
} 
```

我选择了这个脚本所在的目录，以确保在上传到最终目录之前的功能。我想上传照片，稍后会检查文件扩展名 - 但现在我至少需要上传功能才能工作。

我得到一个空数组返回。

表格如下：

```
<form id="imageUploadForm" name="imageForm" enctype="multipart/form-data" action="imageController.php">
<label for="photo" class="blogLabel">Upload an Image</label>
<input type="file" name="photo" id="imageUpload">
<input type="submit" name="submit" id="imageSubmit" class="btn btn-primary" value="Upload">
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T21:12:37.303

你忘记了表单中最重要的东西—— `method`!

如果没有设置方法，则默认为`get`.

你要`post`！

添加`method="post"`到您的表单中。

# python - 在 IDLE 中设置断点

> ID：11785728
> 
> 赞同：0
> 
> 时间：2012-08-02T21:02:24.657
> 
> 标签：python, breakpoints, python-idle

> **可能重复：**
> [如何在 IDLE 中向 python 程序添加断点？](https://stackoverflow.com/questions/6246878/how-do-you-add-breakpoints-to-a-python-program-in-idle)

您如何在 IDLE 中设置断点？哪里都没有按钮！

# c# - 过早中止 BeginRead 和 BeginWrite 的正确方法？

> ID：11785735
> 
> 赞同：4
> 
> 时间：2012-08-02T21:02:51.063
> 
> 标签：c#, .net, windows, io, usb

我有一个用 C# 编写的实用程序，用于与我们的 USB 设备来回通信。我们使用通用 HID 驱动程序并将设备句柄包装在一个`FileStream`对象中。`BeginRead`我使用它的and方法读/写数据`BeginWrite`，不是因为我需要异步 IO，而只是为了在设备进入不可通信状态（有意或无意）的情况下我可以超时。所有读/写都在我自己的专用 IO 线程中完成。

我担心我做事不太正确，因为我见过一些我怀疑是线程死锁的案例。这是我的相关方法的精简版本`Read`（似乎工作得很好）。

```
if (_readResult == null)
{
  _readResult = _deviceStream.BeginRead(_readBuffer, 0, _readBuffer.Length, null, null);
}

if (_readResult.AsyncWaitHandle.WaitOne(IOTimeout, true))
{
  int bytesRead = _deviceStream.EndRead(_readResult);
  _readResult.AsyncWaitHandle.Close();
  _readResult= null;
  // … Copy bytes to another buffer
}
else
{
  // … Timeout, so retry again in a bit
} 
```

我的主要问题是如果我需要终止我的 IO 线程并且我的设备不再通信，如何正确停止未完成的`BeginRead`或调用。`BeginWrite`我不能只是打电话`EndRead`，因为它会坐在那里永远阻塞。`Filestream.Close`在读/写操作挂起时调用是否安全？

我还要问，同时运行挂起的读写操作是否安全？例如，如果我的 read 方法超时，我还能继续尝试写点什么吗？

很难重现我当前的死锁问题，但真正奇怪的是，当 IO 线程“卡”在我的读取方法中时，它似乎开始了。我不确定这会如何发生，除非我的代码没有按照我认为的方式工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T21:09:42.887

没有内置取消。关闭流是推荐的解决方案。只要确保在调用 EndRead 时捕获异常...

如果你想使用 .NET 4.5，有一个新`FileStream.ReadAsync`的支持取消： http: [//msdn.microsoft.com/en-us/library/hh158566](http://msdn.microsoft.com/en-us/library/hh158566(v=vs.110) (v=vs.110 )

# android - 如何在 Android 安装中包含文本文件？

> ID：11785737
> 
> 赞同：0
> 
> 时间：2012-08-02T21:02:52.463
> 
> 标签：android

我需要能够在我的 Android 安装中包含一个文本文件，以便我可以根据需要读取和解析它。

它大约有 57 KB 字节，所以我可能无法将其作为“字符串”资源。我是否尝试将其添加为某种资源？它说“Raw”不能带字符串。

我可以做一个 HTTP GET 来获取一个类似的 XML 文件，但要大得多，900 KB，我的文件是数据的一个非常浓缩的版本。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T21:04:56.320

将其添加到`assets`文件夹中（不在 中`raw`）。您可以在[这个问题](https://stackoverflow.com/questions/4162623/how-to-use-assets-in-android)上找到有关加载资产（特别是文本文件）的信息。[这个博客](http://xjaphx.wordpress.com/2011/10/02/store-and-use-files-in-assets/)更深入一点。

# web-applications - 如何使用 sencha touch 等移动 Web 框架为蓝牙编程

> ID：11785742
> 
> 赞同：3
> 
> 时间：2012-08-02T21:03:06.953
> 
> 标签：web-applications, mobile, bluetooth, sencha-touch

我们正在开始一个新项目，我们需要构建一个跨平台的移动应用程序。这个应用程序的一个很大的要求是能够通过蓝牙与硬件接口。我想知道是否有一种方法可以使用 Senchatouch+phonegap 构建一个跨平台的 Web 应用程序，并且能够与蓝牙接口。我的猜测是，只要有一种方法可以将其与应用程序的跨平台部分结合起来，每个蓝牙模块都必须是特定于平台的（这没问题）。

谢谢，如果您需要更多信息，请告诉我。

# cakephp - 在 CakePHP 的 TranslateBehavior 中添加其他字段

> ID：11785744
> 
> 赞同：0
> 
> 时间：2012-08-02T21:03:19.383
> 
> 标签：cakephp, behavior, translate

我在我的应用程序中使用 TranslateBehavior。模型翻译字段，如名称、内容和 slug。该表有许多记录。...现在我必须在此表中添加 antoher 字段，但我遇到了问题。当我在模型中将字段名称添加到 actAs 时，我的记录返回空结果。为什么？

事后如何向翻译模型添加另一个字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T08:15:51.580

首先，我建议您尝试清理模型缓存（从`path/to/project/app/tmp/cache/models`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T09:04:56.250

我遇到了同样的问题。

解决方案是执行 SQL 查询来创建之前应该创建的新翻译字段。

我之前有一个标题 tarnslator 字段。现在我想添加一个公司翻译字段。我的 i18n 表是翻译。我的模型是扬声器。

这是要执行的 SQL 查询：

```
INSERT INTO translation (locale, model, foreign_key, field)
    SELECT locale,model, foreign_key, 'company' FROM  translation
    WHERE model="Speaker" AND field="title"; 
```

# c# - System.UnauthorizedAccessException：访问路径 C

> ID：11785750
> 
> 赞同：0
> 
> 时间：2012-08-02T21:03:40.160
> 
> 标签：c#

我正在尝试建立一个自动备份和恢复系统。

我的日志文件：

```
2012-08-02 22:34:06 - Init: Folder main created for server Teamdeathmatch
2012-08-02 22:34:06 - Backup: Couldn't copy files: System.UnauthorizedAccessException: Access to the path 'C:/temp/backups/Teamdeathmatch/server/main' is denied.
   at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
   at System.IO.File.InternalCopy(String sourceFileName, String destFileName, Boolean overwrite)
   at System.IO.File.Copy(String sourceFileName, String destFileName, Boolean overwrite)
   at BackupRollback.Backup.getServerFiles() in C:\Users\jordi\Desktop\ConsoleApplication1 - kopie\Backup.cs:line 51 
```

目标和文件存在。

我希望任何人都可以帮助我。还有一些关于我的 c# 编程的反馈，因为 c-sharp 对我来说是新的。

谢谢

```
class Backup
{

    public static void getServerFiles()
    {

        Log.Info("Get servers");
        string[] fileEntries = Directory.GetDirectories("c:/Gameservers");

        Log.Info("Servers found: " + fileEntries.Count());

        string _directoryPath = @"C:\temp\backups";

        // check folder exists
        if (!Directory.Exists(_directoryPath))
        {
            Log.Data("Temp backup folder not found");
            Directory.CreateDirectory(_directoryPath);
            Log.Data("Temp backup folder created successfully");

        }
        else
        {
            Log.Data("Temp backup folder found");
        }

        // move files to directory
        foreach (string fileName in fileEntries)
        {
            try
            {
                string servername = Path.GetFileNameWithoutExtension(fileName);

                Directory.CreateDirectory("C:/temp/backups/" + servername + "/server");
                Log.Data("Folder server created for server " + servername);

                Directory.CreateDirectory("C:/temp/backups/" + servername + "/server/main");
                Log.Data("Folder main created for server " + servername);

                File.Copy("C:/temp/backups/" + servername + "/server/main", "C:/Gameservers/" + servername + "/server/main/server.cfg");
                Log.Data("File server.cfg copied for server " + servername);

                Directory.CreateDirectory("C:/temp/backups/" + servername + "/b3 server/conf");
                Log.Data("Folder conf [b3] created for server " + servername);

                File.Copy("C:/temp/backups/" + servername + "/server/main", "C:/Gameservers/" + servername + "/b3 server/conf/b3.xml");
                Log.Data("File b3.xml copied for server " + servername);

                Directory.CreateDirectory("C:/temp/backups/" + servername + "/server/mods");
                Log.Data("Folder mods created for server " + servername);

                DirectoryCopy("C:/temp/backups/" + servername + "/server/", "C:/Gameservers/mods/" + servername + "/server/mods/");
                Log.Data("Folder mods copied for server " + servername);
            }

            catch (Exception ex)
            {
                Log.Data("Couldn't copy files: " + ex.ToString());
            }
        }

    }

    private static void DirectoryCopy(string sourceDirName, string destDirName)
     {
      DirectoryInfo dir = new DirectoryInfo(sourceDirName);
      DirectoryInfo[] dirs = dir.GetDirectories();

        FileInfo[] files = dir.GetFiles();

           foreach (FileInfo file in files)
          {
             string temppath = Path.Combine(destDirName, file.Name);

             file.CopyTo(temppath, false);
         }

         foreach (DirectoryInfo subdir in dirs)
        {
            string temppath = Path.Combine(destDirName, subdir.Name);

            DirectoryCopy(subdir.FullName, temppath);
        }
    } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:12:20.097

File.Copy（源，目标）

你的参数颠倒了。试试这个。

```
File.Copy"C:/Gameservers/" + servername + "/server/main/server.cfg",
         "C:/temp/backups/" + servername + "/server/main"); 
Log.Data("File server.cfg copied for server " + servername); 
```

# php - 如何在内存缓存中缓存 symfony 部分？

> ID：11785751
> 
> 赞同：1
> 
> 时间：2012-08-02T21:03:54.387
> 
> 标签：php, symfony1, doctrine, memcached, symfony-1.4

我们在我们的开发机器上使用 symfony 1.4

在 symfony 中缓存部分缓存的传统方法是编辑 cache.yml

```
something:
  enabled: true
  lifetime: true 
```

这会将缓存存储在磁盘上

但我们想将缓存存储在 memcache 上而不是磁盘上。

所以，问题是**如何在内存缓存中缓存 symfony 部分**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T07:43:49.147

Symfony 部分缓存与 symfony 中的所有其他缓存一样工作：它指的`view_cache`是`apps/frontend/config/factories.yml`.

例如，如果要将缓存存储在 SQLite 数据库中：

```
all:
  view_cache:
    class: sfSQLiteCache
    param:
      database: %SF_TEMPLATE_CACHE_DIR%/cache.db 
```

所以如果你想将这些信息存储到 Memcached 中，你应该使用这个`sfMemcacheCache.class.php`类：

```
all:
  view_cache:
    class: sfMemcacheCache
    param:
      servers:
        server1:
          host: localhost
          port: 11211
          persistent: true 
```

或者

```
all:
  view_cache:
    class: sfMemcacheCache
    param:
      host: localhost
      port: 11211
      persistent: true 
```

# java - 在java字符串中的两个字符之间添加点

> ID：11785756
> 
> 赞同：-1
> 
> 时间：2012-08-02T21:04:39.290
> 
> 标签：java, string, replace

我有一个字符串：

```
String x = "10"; 
```

现在我想`.`在数字之间添加并像这样打印

```
1.0 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-02T21:09:41.220

您可以将字符串拆分为第一个字符和字符串的其余部分，然后`'.'`在其间插入一个点，如下所示：

```
String res = x.substring(0,1)+"."+x.substring(1);
//           ^^^^^^^^^^^^^^^^     ^^^^^^^^^^^^^^
//            the first digit     the rest of the string 
```

您也可以使用`replaceAll`在较长的字符串上执行此操作，如下所示：

```
String orig = "19,28,37,46";
System.out.println(orig.replaceAll("(\\d)(\\d)", "$1.$2")); 
```

这[打印](http://ideone.com/vWBqe)

```
1.9,2.8,3.7,4.6 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T21:09:54.753

使用[`DecimalFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/DecimalFormat.html)类更好地解耦值及其表示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T21:09:06.803

如果字符串始终是 2 位数字：

```
String result = x.charAt(0) + "." + x.charAt(1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-17T14:17:17.780

此函数可以接受所有数字并返回一个点分字符串，只需轻轻一点，它就可以接受许多其他类型的数据，并返回带有选项的数据

```
 fun getStringWithDot(nums: Int): String {
var str = ""
val istr = nums.toString()
for (ch in istr.indices){
    if (ch == istr.length-1){
        str += istr.substring(0,1)
    }else{
        str += istr.substring(ch,ch+1) + "."
    }

}
return str 
```

}

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-11-01T11:03:35.957

```
public static void main(String args[])

{
Scanner S=new Scanner(System.in);

int arr[];

int number;

number=S.nextInt();

int length=Integer.toString(number).length();

arr=new int[length];

char arr2[];

arr2=new char[length];

int count=0;

char arr3[];

arr3=new char[length];

String Q=Integer.toString(number);

for(int i=0;i<arr3.length;i++)

{

    System.out.print(Q.charAt(i)+".");

}

} 
```

# objective-c - AVAudioPlayer 打破视频捕获

> ID：11785767
> 
> 赞同：0
> 
> 时间：2012-08-02T21:05:14.403
> 
> 标签：objective-c, ios, video, avfoundation

在我的应用程序的一个视图中，有一个按钮。按下它应该开始拍摄视频，触发声音文件开始，并在取消隐藏另一个按钮时隐藏自己。第二个按钮应该停止视频录制并保存。这是我用于视频录制的代码，最初可以正常工作：

在 viewDidLoad 中：

```
finishButton.hidden = TRUE;

session = [[AVCaptureSession alloc] init];
movieFileOutput = [[AVCaptureMovieFileOutput alloc] init];

NSError *error;

AVCaptureDeviceInput *videoInput = [[AVCaptureDeviceInput alloc] initWithDevice:[self cameraWithPosition:AVCaptureDevicePositionFront] error:&error];

if (videoInput)
{
    [session addInput:videoInput];
}

AVCaptureDevice *audioCaptureDevice = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeAudio];
NSError *audioError = nil;
AVCaptureDeviceInput *audioInput = [AVCaptureDeviceInput deviceInputWithDevice:audioCaptureDevice error:&audioError];

if (audioInput)
{
    [session addInput:audioInput];
}

Float64 TotalSeconds = 35;          //Total seconds
int32_t preferredTimeScale = 30;    //Frames per second
CMTime maxDuration = CMTimeMakeWithSeconds(TotalSeconds, preferredTimeScale);
movieFileOutput.maxRecordedDuration = maxDuration;

movieFileOutput.minFreeDiskSpaceLimit = 1024 * 1024;

if ([session canAddOutput:movieFileOutput])
    [session addOutput:movieFileOutput];

[session setSessionPreset:AVCaptureSessionPresetMedium];
if ([session canSetSessionPreset:AVCaptureSessionPreset640x480])        //Check size based configs are supported before setting them
    [session setSessionPreset:AVCaptureSessionPreset640x480];

[self cameraSetOutputProperties];

[session startRunning]; 
```

对于按钮：

```
-(IBAction)start:(id)sender
{
startButton.hidden = TRUE;
finishButton.hidden = FALSE;

//Create temporary URL to record to
NSString *outputPath = [[NSString alloc] initWithFormat:@"%@%@", NSTemporaryDirectory(), @"output.mov"];
self.outputURL = [[NSURL alloc] initFileURLWithPath:outputPath];
NSFileManager *fileManager = [NSFileManager defaultManager];
if ([fileManager fileExistsAtPath:outputPath])
{
    NSError *error;
    if ([fileManager removeItemAtPath:outputPath error:&error] == NO)
    {
        //Error - handle if required
    }
}
//Start recording
[movieFileOutput startRecordingToOutputFileURL:outputURL recordingDelegate:self]; 
```

最后，在最后一个按钮下：

```
[movieFileOutput stopRecording]; 
```

这是保存视频的代码：

```
- (void)captureOutput:(AVCaptureFileOutput *)captureOutput
didFinishRecordingToOutputFileAtURL:(NSURL *)outputFileURL
  fromConnections:(NSArray *)connections
            error:(NSError *)error
{

NSLog(@"didFinishRecordingToOutputFileAtURL - enter");

BOOL RecordedSuccessfully = YES;
if ([error code] != noErr)
{
    // A problem occurred: Find out if the recording was successful.
    id value = [[error userInfo] objectForKey:AVErrorRecordingSuccessfullyFinishedKey];
    if (value)
    {
        RecordedSuccessfully = [value boolValue];
    }
}
if (RecordedSuccessfully)
{
    //----- RECORDED SUCESSFULLY -----
    NSLog(@"didFinishRecordingToOutputFileAtURL - success");
    ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];
    if ([library videoAtPathIsCompatibleWithSavedPhotosAlbum:outputURL])
    {
        [library writeVideoAtPathToSavedPhotosAlbum:outputURL
                                    completionBlock:^(NSURL *assetURL, NSError *error)
         {
             if (error)
             {

             }
         }];
    }

}
} 
```

所有这一切都工作得很好。然后我添加了几行，以便在按下开始按钮时播放歌曲文件。

在 viewDidLoad 中：

```
NSURL *url = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/Song.aiff", [[NSBundle mainBundle] resourcePath]]];

NSError *audioFileError;
player = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:&audioFileError];
player.numberOfLoops = 0;
[self.player prepareToPlay]; 
```

在开始按钮下：

```
if (player == nil)
NSLog(@"Audio file could not be played");
else
[player play]; 
```

现在，当按下开始按钮时，歌曲播放没有问题，但视频捕获却搞砸了。在添加 AVAudioPlayer 内容之前，当我按下完成按钮时，我会得到“didFinishRecordingToOutputFileAtURL - enter”和“didFinishRecordingToOutputFileAtURL - success”日志，现在我一按下开始按钮就会得到第一个日志，当我按下完成按钮，并且不录制视频。如果我注释掉使歌曲播放的行，那么视频捕获再次正常工作。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T04:59:53.067

```
- (void)setupAudioSession 
{
    static BOOL audioSessionSetup = NO;

    if (audioSessionSetup)
    {
        return;   
    }

    [[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error: nil];
    UInt32 doSetProperty = 1;

    AudioSessionSetProperty (kAudioSessionProperty_OverrideCategoryMixWithOthers, sizeof(doSetProperty), &doSetProperty);

    [[AVAudioSession sharedInstance] setActive: YES error: nil];

    audioSessionSetup = YES;
}

- (void)playAudio
{
    [self setupAudioSession];

    NSString *soundFilePath = [[NSBundle mainBundle] pathForResource:@"btnClick" ofType:@"wav"];
    NSURL *fileURL = [[NSURL alloc] initFileURLWithPath:soundFilePath];
    AVAudioPlayer *newPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL:fileURL error:nil];
    [fileURL release];

    self.audioPlayer = newPlayer;
    [newPlayer release];

    [audioPlayer setDelegate:self];
    [audioPlayer prepareToPlay];
    audioPlayer.volume=1.0;
    [audioPlayer play];
} 
```

注意：添加框架：AudioToolbox.framework。

```
#import <AudioToolbox/AudioServices.h> 
```

# php - 为什么for循环不关心增量方式？

> ID：11785768
> 
> 赞同：0
> 
> 时间：2012-08-02T21:05:14.177
> 
> 标签：php, for-loop, increment

这可能是一个可笑的“问题”，但我只是不明白这种行为的原因。

* * *

事实：

```
$i++; 
```

返回当前值，然后将 $i 加一。

```
++$i; 
```

将 $i 加一，然后返回 $i。

* * *

情况：

```
for($i = 0; $i < 10; ++$i){
    echo $i."\n";
} 
```

给

```
0
1
2
3
4
5
6
7
8
9 
```

第二：

```
for($i = 0; $i < 10; $i++){
    echo $i."\n";   
} 
```

也给

```
0
1
2
3
4
5
6
7
8
9 
```

* * *

如果我从字面上理解增量的文档，我将按如下方式解释循环​​：

1.  在每次迭代结束时，$i 加一然后返回，所以我们首先得到一个 0，因为 $i 从 0 开始，然后是 1，依此类推。
2.  在每次迭代结束时，返回 $i 然后递增，这意味着有两次迭代 $i = 0。

事实并非如此。有人可以解释一下，为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T21:09:14.137

`$i`没有被*退回*，它正在被*（*你）使用。巨大差距。

如果你要重写你的`if`语句来代替使用`while`循环，你会有这些：

**后增量**：

```
$i = 0;

while ( $i < 10 ) {
    echo $i."\n";
    $i++;
} 
```

**预增量：**

```
$i = 0;

while ( $i < 10 ) {
    echo $i."\n";
    ++$i;
} 
```

如您所见，两者之间没有区别。

* * *

以下是您提供给 for 循环的 3 条语句的用途：

1.  *在第一步*之前运行
2.  *在每*一步之前运行（使用返回值来判断是否继续循环）
3.  跑完*每*一步

绝不会以任何方式使用第三条语句的返回值。

* * *

**PS**如前所述，第三条语句在*每个*循环之后运行，**包括最后一个**。`$i`通过在循环完成后访问变量可以明显看出这一点：

```
for ($i = 0; $i < 10; $i++) {
    echo $i."\n";
}
echo $i; 
```

这将列出所有不超过 10 的**数字**。

在此处查看实际操作：http: [//viper-7.com/Y6N2jU](http://viper-7.com/Y6N2jU)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T21:10:38.517

据我了解，`for`循环在执行第三个参数之前检查第二个参数中的条件。这意味着，在这两种情况下：

*   `$i`用值 0 初始化（这一步显然会在每次后续迭代中跳过）；
*   `$i`与 10 相比（它更小）；然后*_*
*   `$i`递增。

在最后一步中，无论`$i`是在增量之前还是之后返回的值都无关紧要，因为“返回”的值`$i`实际上并未用于任何比较。`$i`在进行比较之后，存储在内存中的 as 的实际值在每次迭代时仍会递增 1。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T21:15:20.840

一个 for 循环有 3 个组件：

1.  一个初始化组件（第一个';'之前的代码）
2.  终止条件（第一个';'和第二个';'之间的代码）
3.  一个增量（在第二个 ';' 之后）

这3段代码的执行顺序是：

*   (1)在for循环开始时**只执行一次**

*   (2)每次迭代**前验证**

*   (3)每次迭代**后执行**

因此，使用增量操作的前缀或后缀形式并不重要；每次迭代后，将执行增量 (3)，您将获得增量变量的新值

这：

```
for($i = 0; $i < 10; $a = $i++){
    echo $i."\n";
} 
```

与此相比

```
for($i = 0; $i < 10; $a = ++$i){
    echo $i."\n";
} 
```

每次迭代后都会改变 $a 的值，但不会改变 $i 的值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T21:10:16.083

将变量作为循环中的第三个表达式进行后递增或预递增不会对其行为产生影响

因为, `$i++`and`++$i`都将在循环的每次迭代结束时执行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T21:11:39.110

如果您将 for 循环写为一系列 if 语句，我认为 $i 每次递增的原因会更有意义。

```
i = 0
if i > 10
    return
else
    print i
    i++ // or ++i
if i > 10
    return
else
    print i
    i++ // or ++i 
```

等等。

# javascript - JavaScript 和 Jquery：如何从 javascript 函数中调用 jquery 函数

> ID：11785773
> 
> 赞同：0
> 
> 时间：2012-08-02T21:05:57.567
> 
> 标签：javascript

我有一个表单中的按钮，单击该按钮会将变量发送到 javascript 函数。当变量等于“链接”时，我想调用一个名为 makeLink() 的 jquery 函数。

这就是我所拥有的：

```
function getText(change)
{
   if(change == "link")
   {
      //call jquery function called makeLink()

   }

} 
```

这是我的 jquery 函数，它创建一个带有表单的模式弹出窗口：

```
$(document).ready(function(){

function makeLink() {
    if ($("#makeALinkModalPopup").is(":hidden")){
    $("#makeALinkModalPopup").fadeIn("slow");

     $("#backgroundPopup").css({  
        "height": document.documentElement.offsetHeight

      });

    $("#backgroundPopup").css({"opacity": "0.7"});
    $("#backgroundPopup").fadeIn("slow"); 

        }

    }

}); 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T21:10:45.790

删除 document.ready 包装以使 makeLink 可用于页面的其余部分

```
 function getText(change){
      if(change == "link") {
      //call jquery function 

        makeLink()

      }
    }

    function makeLink() {
      if ($("#makeALinkModalPopup").is(":hidden")){
        $("#makeALinkModalPopup").fadeIn("slow");

        $("#backgroundPopup").css({  
          "height": document.documentElement.offsetHeight

        });

        $("#backgroundPopup").css({"opacity": "0.7"});
        $("#backgroundPopup").fadeIn("slow"); 

      }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T21:10:07.630

将 makeLink 移动到全局范围并正常调用它。只有 JavaScript 函数。您看到的区别只是范围。

[在此处阅读有关范围的信息。](http://coding.smashingmagazine.com/2009/08/01/what-you-need-to-know-about-javascript-scope/)

正如其他人所说，删除 document.ready 包装。您的函数不需要在那里定义，因为它不能在 document.ready 之外看到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T21:09:55.990

您不应在文档就绪事件中定义函数，而应在单独的文件中定义该函数。

然后，你在哪里：

```
//call jquery function called makeLink() 
```

就放

```
makeLink() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T21:12:09.370

你不需要准备好dom。

只要有

```
function makeLink() {
    if ($("#makeALinkModalPopup").is(":hidden")){
    $("#makeALinkModalPopup").fadeIn("slow");

     $("#backgroundPopup").css({  
        "height": document.documentElement.offsetHeight

      });

    $("#backgroundPopup").css({"opacity": "0.7"});
    $("#backgroundPopup").fadeIn("slow"); 

        }

    } 
```

只要有

```
function getText(change)
{
   if(change == "link")
   {
      makeLink();

   }

} 
```

如果您想在 dom 上使用该功能，那么您需要这样做。

`$(document).ready(makeLink);`<我可能在语法上错了，但为了安全起见，我知道这行得通..

```
$(document.ready(function(){
// do what ever you want
//even call make link

makeLink();
} 
```

# ios - 是否可以在 Xcode (Interface Builder) 中使用 MonoTouch 类库中的自定义 iOS 控件？

> ID：11785774
> 
> 赞同：2
> 
> 时间：2012-08-02T21:06:01.410
> 
> 标签：ios, cocoa-touch, xamarin.ios, interface-builder, custom-controls

我正在尝试将自定义 iOS 控件从 MonoTouch 主项目移动到 MonoTouch 类库，以便在其他 MonoTouch 项目中重新使用它们。

但是，当我尝试替换与 Xcode 中的控件关联的类时，我找不到它们。如果我查看临时 Xcode 项目的结构，它有一个带有我的主项目名称的文件夹，但没有带有我的类库名称的文件夹。因此，找不到这些控件的头文件。

如果我将它们移回主项目，它会再次起作用。如果我尝试从代码动态地从类库中自定义控件，它工作正常。这只是使这些类在 Xcode 中可用的问题。

那么有没有办法在 Xcode 中使用 MonoTouch 类库中的自定义 iOS 控件，或者它们必须在主项目中？

谢谢

# objective-c - 选择一个后在 UITableView 中切换单元格并调用 performSegueWithIdentifier:sender:

> ID：11785781
> 
> 赞同：0
> 
> 时间：2012-08-02T21:06:45.447
> 
> 标签：objective-c, ios, uitableview

我在使用 UITableView 时遇到了麻烦，并从它中解脱出来。表格视图包含一个地点列表，当单击一个单元格时，它会转到该地点的照片列表。加载这些照片的信息需要一些时间，所以它会在地点列表上停留一段时间。我的问题是我不想在加载时将用户冻结在应用程序之外，如果用户决定切换他们想要的位置，我希望他们能够这样做。是否有一个简单的解决方案，还是需要重新设计？这是单击单元格时调用的内容：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    self.activityIndicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
    [self.activityIndicator startAnimating];
    [[tableView cellForRowAtIndexPath:indexPath] setAccessoryView:self.activityIndicator];
    self.query = ^{return [FlickrFetcher photosInPlace:self.locationDataArray[indexPath.row] maxResults:50];};
    self.locationSelected = [[self.locationDataArray[indexPath.row] valueForKeyPath:@"_content"] componentsSeparatedByString:@","][0];
    [self performSelector:@selector(pushView:) withObject:tableView afterDelay:0.0]; // Allows spinner to start spinning before the segue is actually performed. 
}

- (void)pushView:(UITableView *)tableView {
    [self performSegueWithIdentifier:@"Display Image List" sender:self];
} 
```

我尝试过分派到`performSegueWithIdentifire:sender:`主队列，但没有运气（无论如何我认为它不会起作用）。查询是目标视图控制器执行的内容。关于如何让它工作的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T21:36:11.943

我认为，您当然应该在主线程上执行 segue（无调度），并加载一个新的（空）tableview 并在其单元格中启动 activityIndi​​cator。图像的获取将在 viewDidLoad 方法中分派，并“通知”视图，如果加载完成，并重新加载 tableView。

就像在本教程中一样（一个简单的 NSInvocationOperation 用于在后台运行下载）： http: [//www.icodeblog.com/2010/03/04/iphone-coding-turbo-charging-your-apps-with-nsoperation /](http://www.icodeblog.com/2010/03/04/iphone-coding-turbo-charging-your-apps-with-nsoperation/)

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T21:37:33.770

我认为您可以为您的照片列表视图设置一个控制器，并且在`viewDidLoad`该控制器中，您可以使用 Grand Central Dispatch 异步加载您的照片并重新加载表格的数据。

# c++ - 通过 Extproc 从 ORACLE 调用 Qt C++ 代码

> ID：11785784
> 
> 赞同：0
> 
> 时间：2012-08-02T21:07:01.533
> 
> 标签：c++, oracle, qt

关于这个主题的信息不多，对于那些试图深入研究的人来说有很多问题，因为尝试这个的人通常在 oracle 或 c++ 中都无能（例如，我是一个完全的 oracle 菜鸟）。

两者之间的边界是一个真正黑暗和令人沮丧的区域。这篇文章的目的是让它不那么令人沮丧，或者至少不那么黑暗。

我不会在这里讨论到 c++ 代码的实际链接，因为这在大多数手册中都有说明。相反，我想讨论一些**最容易引起麻烦的事情**。

见下文：

**dll缓存**

**静态变量**

**默认路径**

**事件循环**

请注意，我只是在分享我的经验，而不是提出解决方案，因为我所做的很可能令人反感。所以，欢迎讨论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T21:07:01.533

请注意，我的工作配置是 Centos 5.5 + Oracle XE + Qt4.7

**重要的**

QxtLogger（或类似的东西）是你最好的朋友。您将无法通过 extproc 调试调用，因此请记录**很多**。否则将是地狱。（无论如何，这将是地狱，但至少你不会同时被油炸和失明）。注意 Q **xt**，这是一个不错的库，不是用一些非常有用的东西扩展 Qt 的小库。

**DLL缓存**

好的，据说当调用 extproc 时，将缓存版本的 DLL 与硬盘驱动器上的缓存版本进行比较，然后加载更新的版本。我发现情况**并非**总是如此。我不止一次看到我的解析器调用要对旧版本的库进行，而不是在 HDD 上。它会自行修复，只是不会立即修复。记住。

**建议：**始终将库版本记录到文件中，以确保真正发生了什么。

**静态变量**

很容易忽略 oracle 在这一点上所说的话（尤其是如果您像我一样对 oracle 缺乏经验，因此几乎**所有**文档都毫无意义）。不过这很重要。尽管由于上述 dll 缓存，静态函数变量**可能会起作用，但****不能保证**它们会起作用。

例如，这是我们在工作中测试的第一件事：

“制作库，使用静态变量制作 func，进行 2 次后续调用，看到它被保留，愉快地使用 DLL 方法”

**这是错误的:(**

就在最近，我注意到这些“保留变量”不再保留......并且每次调用花费大约 1 秒从 DB 中“预加载”字典......大声笑。

**建议：** extproc 调用应该以某种方式调用服务器上已经存在的进程。例如在我的例子中 - 我将解析器库分离为一个始终在服务器上运行的可执行文件和一个通过 QxtRPCPeer 与该进程交换数据的库（在 Qt 应用程序之间传输信号/插槽调用的工具）

**默认路径：**

是的。尝试调用 qxtLog->debug(QDir::currentPath()); 从 extproc 调用 Dll。这真的不好笑，可能会让您感到沮丧。如果您想在 extproc 调用 **的库中使用任何路径依赖项，请确保自己设置路径**。

机会是：这个问题也会导致 QOCI 驱动程序无法从 sqldrivers 文件夹中自动加载。请改用此代码：

```
QPluginLoader loader("sqldrivers\\qsqlocid4.dll");
qxtLog->trace(loader.fileName());
QObject *plugin = loader.instance();
qxtLog->trace(loader.errorString());
if (!plugin)
    return;

QSqlDriverPlugin *sqlPlugin  = qobject_cast<QSqlDriverPlugin *>(plugin);

if (!sqlPlugin )
    qxtLog->critical("Failed to load plugin");
else
    qxtLog->trace("Successfull plugin load");

QSqlDriver * driver = sqlPlugin->create("QOCI");
db = QSqlDatabase::addDatabase(driver, "Connection name"); 
```

日志记录在那里，您可以随时检查应用程序失败的原因；

请注意，在将 QDir::currentPath 设置为指向某处之后，您只能使用“sqldrivers\qsqlocid4.dll”之类的内容。

**事件循环：**

显然 - 此类库没有事件循环。QCoreApplication::instance() 也返回 NULL ，顺便说一句。含义 - 没有信号/槽调用。想都别想。Tbh，我真的希望有人向我展示如何在这种情况下正确使用信号。对于我的任务，我通过调用 QProcess （实际上完成了所有工作）来解决，然后使用**没有事件循环的 Godsend 函数 QProcess::waitForFinished()**

所以，这些是我的观察。随时纠正我。我很乐意学习正确的方法。

# algorithm - 是否总是存在蛮力方法？

> ID：11785786
> 
> 赞同：3
> 
> 时间：2012-08-02T21:07:07.930
> 
> 标签：algorithm, brute-force

我经历了很多算法。我解决了很多编程问题并找到了解决单个问题的各种方法，可能从蛮力到最好的。

我想知道是否有任何问题无法使用蛮力方法解决但可以通过任何更好的方法解决？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-02T21:13:01.227

如果已知解决方案存在（例如，如果它是一个优化问题）并且如果候选解决方案集是[可枚举](http://en.wikipedia.org/wiki/Enumeration)的（并且对于每个候选解决方案，您可以确定它是否正确，则存在蛮力算法或不）。

例如，无法确定的问题当然没有[蛮力解决方案。](http://en.wikipedia.org/wiki/Undecidable_problem)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-02T21:20:26.280

这取决于你的意思*can*。

对于几乎任何具有有限数量可能解决方案的问题，都有一个蛮力解决方案。给定足够的计算能力和/或时间，可以使用该解决方案来解决。

对于某些问题，实际上不可能使用*蛮力*解决方案，因为您没有足够的计算能力和/或时间。

在[Euler Project](http://projecteuler.net/)的特定情况下，设计了许多问题，因此蛮力解决方案需要太多的计算能力和/或时间。例如，考虑到当前可用的计算机，一个问题可能被设计为需要一百万年的时间来计算，从而迫使您使用另一种方法来尽快完成它，从而使解决方案变得有用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-02T22:08:15.493

> 我想知道是否有任何问题无法使用蛮力方法解决但可以通过任何更好的方法解决？

是的。有时证明可判定性并非易事。

1) 平面度：

如何测试图形是否是平面的？天真地，你不能使用蛮力，因为你可以用无数种方法来绘制图形。

一旦你发现[存在平面性的巧妙标准](http://en.wikipedia.org/wiki/Planar_graph#Kuratowski.27s_and_Wagner.27s_theorems)，算法就很简单了。

2）Presburger公式：

Presburger 算术中的公式是使用量词 ∀、∃、加法 +、常量（自然数）和逻辑运算符构建的。不允许有任何不同。量词的范围是自然数。

例子：

∀n ∃m (n = m + m) 或 (n = m + m + 1)

这个公式表达了每个整数都是偶数或奇数的事实。这是真的。

∃m ∀n ∃km + k = n

这个公式表达了存在最大自然数的事实。这是假的。

有没有一种算法可以决定一个公式是否正确？天真地，蛮力是行不通的，因为您需要检查所有自然数。[不过，问题是可以确定](http://rjlipton.wordpress.com/2009/03/07/finite-state-automata-binary-decision-diagrams-and-presburger-arithmetic/)的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T21:48:33.433

有很多问题是用蛮力解决不了的。

例如，看一下[停止](http://en.wikipedia.org/wiki/Halting_problem)问题：您需要设计一个算法来接收程序和输入，如果程序在使用该输入运行时最终会停止，则返回“True”，否则返回“False”。

算法最终必须停止并告诉“假”或“真”。

不用说，但没有这样的算法。

**编辑：**

当您说“解决”时，我假设您的意思是计算解决。

我认为是的 - 看看以下问题：

给你循环：

而 (x < m)

```
x-- 
```

以及常数 m 和 k。并且您需要返回 < k 如果存在则循环将终止的最小 x ，否则返回“False”。使用蛮力算法，对于 k = 999 和 m = 1000，您将从 x = 999 开始（因为要求 x < k = 999）并且您将永远卡住。

您可以使用更好的方法 - 如果 m < k，则返回 m。否则，返回“假”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-02T21:39:16.553

显然是的，只要我们解决的是在某个离散空间上定义的问题并且存在非空解决方案集。

考虑以下：

1.  解决新问题的第一个算法是一种天真的蛮力方法。
2.  如果已经找到了，为什么有人还要寻找另一个？因为在离散问题中，蛮力意味着枚举输入值集，直到找到解决方案并具有 O(n!) 或 O( ^(an n) ) 计算[复杂度](http://en.wikipedia.org/wiki/Analysis_of_algorithms#Evaluating_run-time_complexity)。
3.  后者意味着它在实践中不可用并且需要更棘手的方法。或者，我们可能会寻找近似解而不是精确解，但这会引入收敛条件。
4.  最后有一个[NP 完全](http://en.wikipedia.org/wiki/NP-complete)问题类。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-02T21:11:39.843

并不真地。蛮力的概念意味着尝试一切。因此，如果可以创建和重新创建某些东西以匹配，那么尝试所有可能的排列将导致找到另一个匹配项。

# ruby-on-rails - Rails 无法访问上传的文件

> ID：11785787
> 
> 赞同：1
> 
> 时间：2012-08-02T21:07:09.970
> 
> 标签：ruby-on-rails, ruby, file, upload

我在互联网上搜索了几个小时试图完成这项工作，但我没有任何运气。

我上传一个文件并尝试将其写入 public/uploads 目录（已经存在）

```
name = archivo.original_filename
directory = "public/uploads"
path = File.join(directory, name)
Dir.mkdir(directory) unless File.directory?(directory)
File.open(path, "wb") { |f| f.write(archivo.read) } 
```

我得到了例外

```
No such file or directory - public/uploads/SERVITEST.xls 
```

我尝试使用绝对路径并从 /tmp 目录中读取文件，但没有成功，我得到了这个异常：

```
Permission denied - oo_7598_6341257208 
```

我真的不知道发生了什么，因为在每个文件上传示例中，我看到控制器可以看到公共目录

提前致谢

问候

解决方案：

经过一夜好眠和几杯咖啡后，我解决了“没有这样的文件或目录”的问题：

```
directory = Rails.root.join("public","uploads"); 
```

“权限被拒绝”问题是 roo gem 的问题，因为它试图访问未定义的 ROO_TMP 环境变量：

```
export ROO_TMP=/tmp 
```

感谢大家的帮助：D

# java - Java Servlet 中的 ExecutorService

> ID：11785801
> 
> 赞同：6
> 
> 时间：2012-08-02T21:08:20.653
> 
> 标签：java, multithreading, jakarta-ee, servlets, concurrency

我需要在 java servlet 中同时执行一些任务（主要是使用请求参数调用多个外部 URL 并读取数据）并在几秒钟内向用户发送响应。我正在尝试使用 ExecutorService 来实现相同的目的。我需要在 doGet 方法的每个用户请求中创建四个 FutureTasks。每个任务运行约 5-10 秒，对用户的总响应时间约为 15 秒。

在 Java servlet 中使用 ExecutorService 时，您能否建议以下哪种设计更好？

**1）（为每个请求创建 newFixedThreadPool 并尽快将其关闭）**

```
public class MyTestServlet extends HttpServlet
{

    ExecutorService myThreadPool = null;

    public void init()
    {
          super.init();

    }
    protected void doGet(HttpServletRequest request,HttpServletResponse response)
    {

        myThreadPool = Executors.newFixedThreadPool(4);
        taskOne   = myThreadPool.submit();
        taskTwo   = myThreadPool.submit();        
        taskThree = myThreadPool.submit();
        taskFour  = myThreadPool.submit();

        ...
        ...

        taskOne.get();
        taskTwo.get();
        taskThree.get();
        taskFour.get();

        ...

        myThreadPool.shutdown();

    }

     public void destroy()
     {

         super.destroy();
     }

} 
```

**2）（在 Servlet Init 期间创建 newFixedThreadPool 并在 servlet 销毁时将其关闭）**

```
public class MyTestServlet extends HttpServlet
{

    ExecutorService myThreadPool = null;

    public void init()
    {
      super.init();
          //What should be the value of fixed thread pool so that it can handle multiple   user requests without wait???
          myThreadPool = Executors.newFixedThreadPool(20);

    }
    protected void doGet(HttpServletRequest request,HttpServletResponse response)
    {

        taskOne   = myThreadPool.submit();
        taskTwo   = myThreadPool.submit();        
        taskThree = myThreadPool.submit();
        taskFour  = myThreadPool.submit();

        ...
        ...

        taskOne.get();
        taskTwo.get();
        taskThree.get();
        taskFour.get();

        ...

    }

     public void destroy()
     {

          super.destroy();
          myThreadPool.shutdown();
     }

} 
```

**3）（在 Servlet Init 期间创建 newCachedThreadPool 并在 servlet 销毁时将其关闭）**

```
public class MyTestServlet extends HttpServlet
{

      ExecutorService myThreadPool = null;

      public void init()
      {
        super.init();
            myThreadPool = Executors.newCachedThreadPool();

      }
      protected void doGet(HttpServletRequest request,HttpServletResponse response)
      {

          taskOne   = myThreadPool.submit();
          taskTwo   = myThreadPool.submit();        
          taskThree = myThreadPool.submit();
          taskFour  = myThreadPool.submit();

          ...
          ...

          taskOne.get();
          taskTwo.get();
          taskThree.get();
          taskFour.get();

          ...

     }

     public void destroy()
     {

            super.destroy();
            myThreadPool.shutdown();
      }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:56:24.080

第一个不应该是一个选项。线程池（可能还有任何池）的想法是尽量减少构建池成员（在本例中为工作线程）所需的开销和内存。所以一般来说，池应该在你的应用程序启动时被初始化，并在它关闭时被销毁。

至于 2 和 3 之间的选择，请在下面的帖子中查看接受的答案。答案解释了差异，然后您可以决定哪一个更适合您的需求：[newcachedthreadpool-vs-newfixedthreadpool](https://stackoverflow.com/questions/949355/newcachedthreadpool-v-s-newfixedthreadpool)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T22:47:22.660

为每个请求创建和销毁线程池是个坏主意：太贵了。

如果您有办法记住每个 URL 获取任务与哪个 HTTP 请求相关，我会选择 CachedThreadPool。它按需增长和缩小的能力会产生奇迹，因为 URL 获取任务是完全独立的并且受网络限制（与 CPU 或内存限制相反）。

此外，我会将 ThreadPool 包装在 CompletionService 中，它可以在作业完成时通知您，无论其提交顺序如何。先完成，先通知。如果更快的工作已经完成，这将确保您不会阻塞在一个缓慢的工作上。

CompletionService 易于使用：将其包装在现有的 ThreadPool 周围（例如 newCachedThreadPool），向其提交（）作业，然后将结果返回（）。请注意 take() 方法是阻塞的。

[http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CompletionService.html](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CompletionService.html)

# php - 级联下拉菜单的阿拉伯语编码 [PHP/AJAX]

> ID：11785804
> 
> 赞同：0
> 
> 时间：2012-08-02T21:08:28.427
> 
> 标签：php, ajax, encoding, menu, arabic

我有使用 php 的汽车销售网站以及 admin 中的模板 (tpl) 和控制器，并包含文件夹。

需要关注的领域是 CARS 搜索表单。当用户从 (MAKE) 下拉菜单中选择一个选项时，该选项将驱动 (MODEL) 下拉菜单。它背后的逻辑是有效的，但我在阿拉伯字符的编码方面遇到了问题，如您在以下内容中所见：

![](../Images/8ccc0f30f3c1612e1f8f2e3113469e00.png)

该站点使用以下 Ajax 文件： xajax_core.js xajax_core_uncompressed.js

和其他文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T03:52:03.333

你在使用函数[utf8_encode](http://php.net/utf8_encode)吗？

php 中的这个函数只能将拉丁文翻译成 UTF8，它会破坏阿拉伯字符

# sql-server-2008 - 从上一行中的非空值更新空列值

> ID：11785805
> 
> 赞同：4
> 
> 时间：2012-08-02T21:08:31.623
> 
> 标签：sql-server-2008, tsql

@@版本 1

使用 SQL Server 2008，我试图将值级联到一列。我有一个包含组 ID (GID) 和 Seq 的表，其中包含组内记录的排序。对于存在的列，在本例中为 Name 和 Salary - 我的真实表有超过 50 列，如果它们包含 NULL，我需要使用包含非空值的该列的前一行的值更新 NULL 值。

这里有一些东西可以说明这一点：

```
GID Seq Name    Salary
1   1   James   NULL
1   2   NULL    100
1   3   NULL    NULL
2   1   NULL    81
2   2   Smith   NULL
2   3   NULL    NULL
3   1   Charles NULL
3   2   NULL    NULL
3   3   Brown   NULL
3   4   NULL    75
4   0   Ron 50
4   1   NULL    20
4   2   NULL    NULL 
```

我的结果应该是：

```
GID Seq Name    Salary
1   1   James   NULL
1   2   James   100
1   3   James   100
2   1   NULL    81
2   2   Smith   81
2   3   Smith   81
3   1   Charles NULL
3   2   Charles NULL
3   3   Brown   NULL
3   4   Brown   75
4   0   Ron 50
4   1   Ron 20
4   2   Ron 20 
```

我希望在不使用动态 SQL、循环或游标的情况下做到这一点。

简单测试用例代码：

```
DECLARE @Test TABLE (GID int, Seq int, Name varchar(50), Salary decimal) 

INSERT INTO @Test VALUES (1, 1, 'James', NULL)
INSERT INTO @Test VALUES (1, 2, NULL, 100.40)
INSERT INTO @Test VALUES (1, 3, NULL, NULL)
INSERT INTO @Test VALUES (2, 1, NULL, 80.50)
INSERT INTO @Test VALUES (2, 2, 'Smith', NULL)
INSERT INTO @Test VALUES (2, 3, NULL, NULL)
INSERT INTO @Test VALUES (3, 1, 'Charles', NULL)
INSERT INTO @Test VALUES (3, 2, NULL, NULL)
INSERT INTO @Test VALUES (3, 3, 'Brown', NULL)
INSERT INTO @Test VALUES (3, 4, NULL, 75)
INSERT INTO @Test VALUES (4, 0, 'Ron', 50)
INSERT INTO @Test VALUES (4, 1, NULL, 20)
INSERT INTO @Test VALUES (4, 2, NULL, NULL)

SELECT * FROM @Test 
```

@@Version 2 感谢 GilM 对 @@Version 1 的解决方案。我对这个问题做了一点补充。Seq 列中的起始数字可能是 0 或 1。在第一个问题的解决方案中，递归 CTE 中的锚点指的是 1，如果它是 1 或 0 怎么办？最后3行数据（GID = 4）在此版本中添加到所有上述三个代码块中。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T21:42:55.613

这个怎么样？：

```
;WITH CTE AS (
SELECT GID, SEQ, Name, Salary
FROM @Test t1
WHERE SEQ = (SELECT MIN(SEQ) FROM @Test t2 WHERE t2.GID = t1.GID)
UNION ALL
SELECT t.GID, t.SEQ, COALESCE(t.Name,c.Name), COALESCE(t.Salary,c.Salary)
FROM CTE c
JOIN @Test t ON t.GID = c.GID AND t.SEQ = c.SEQ+1
)
UPDATE t SET 
    Name = c.Name,
    Salary =  c.Salary
FROM @Test t
JOIN CTE c ON c.GID = t.GID AND c.Seq = t.SEQ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T06:08:11.780

```
update T set
  Name =   (
           select top(1) T1.Name
           from @Test as T1
           where T1.GID = T.GID and
                 T1.Seq <= T.Seq and
                 T1.Name is not null
           order by T1.Seq desc
           ),
  Salary = (
           select top(1) T1.Salary
           from @Test as T1
           where T1.GID = T.GID and
                 T1.Seq <= T.Seq and
                 T1.Salary is not null
           order by T1.Seq desc
           )
from @Test as T
where T.Name is null or 
      T.Salary is null 
```

如果有 50 列，就会有大量的输入和大量相关的子查询。

这是一个使用 XML 代替的版本。更少的打字和性能*可能*会更好。

```
with C as
(
  select GID,
         (
         select *
         from @Test as T2
         where T1.GID = T2.GID
         order by T2.Seq desc
         for xml path('row'), type
         ) as X
  from @Test as T1
  group by GID
)
update T set
       Name   = C.X.value('(/row[Seq<=sql:column("T.Seq")]/Name)[1]',   'varchar(50)'),
       Salary = C.X.value('(/row[Seq<=sql:column("T.Seq")]/Salary)[1]', 'decimal')
from @Test as T
  inner join C 
    on T.GID = C.GID 
```

[SE-数据](https://data.stackexchange.com/stackoverflow/query/76449)

# mysql - 避免重复行mysql

> ID：11785811
> 
> 赞同：1
> 
> 时间：2012-08-02T21:09:02.123
> 
> 标签：mysql

每次在我的表上运行插入时，我都想避免重复。如果唯一链接已保存，则应更新该行。在这种情况下可以使用`ON DUPLICATE KEY UPDATE`吗？我一直在尝试，但它不会工作

```
 id  cat_id  cat_name                 prod_group                     link                                                                                                                                                                                                                                                                                                            
------  ------  -----------------------  -----------------------------  ---------------------
     1       5  Notebooks                 Alienware                          /url_to/what_is/unique                                                                                                                                                                                               
    10       5  Notebooks                 Latitude                      /url_to/what_is/unique                                                                                          
    11       3  Desktops                  Alienware                     /url_to/what_is/unique                                                                                     
    12       3  Desktops                  Optiplex                      /url_to/what_is/unique rquery=na                                                                                                                                                       
    20       3  Desktops                  Legacy-System                 /url_to/what_is/unique rquery=na                                                                                   
    21       3  Desktops                  Studio                        /url_to/what_is/unique rquery=na                                                                                           
    22       1  Monitore und Elektronik   Axim Electronic               /url_to/what_is/unique %40%2CAxim%2BElectronic&rquery=na                                                           
    27       1  Monitore und Elektronik   TV                            /url_to/what_is/unique rquery=na                                                                
    28       2  Handys und Tablets        Tablet                        /url_to/what_is/unique rquery=na                                                                  
    29       2  Handys und Tablets        Mobile Device                 /url_to/what_is/unique rquery=na                                                 
    30       4  Drucker                   Printer                       /url_to/what_is/unique                                                         
    31       6  Server und Netzwerk       Cloud Product                 /url_to/what_is/unique 
```

我的查询

```
$sql="INSERT INTO drivers_cat_copy(cat_id,cat_name,prod_group,link) 
                     VALUES('$id','$name','$p','$cat_url')".                     
                     "ON DUPLICATE KEY UPDATE cat_id='$id',cat_name='$name',prod_group='$p',link='$cat_url'"; 
```

表属性

```
CREATE TABLE `drivers_cat_copy` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `cat_id` int(1) DEFAULT NULL,
  `cat_name` varchar(64) DEFAULT NULL,
  `prod_group` varchar(64) DEFAULT NULL,
  `link` varchar(1054) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=77 DEFAULT CHARSET=latin1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T21:15:27.547

是的，如果您想更新具有匹配唯一键的记录的值，您可以使用 ON DUPLICATE KEY UPDATE。当然，这意味着您必须首先在桌子上拥有唯一的键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T21:16:12.337

'link' 列必须定义为主键或唯一键，以使 'Insert .. on duplicate key update' 语法正常工作。

执行“Describe TableName”语句以打印出表及其键的描述。

* * *

现在您已经发布了表的架构，您可以看到该表只定义了一个键，即 id 列的键。

你可以这样做：

alter table drivers_cat_copy 添加唯一索引 link_uniq_index (link(1054));

但是，它不会非常有效。您应该查看这个问题的第一个答案以获得更好的解决方案：[MySQL: How to alter varchar(255) UNIQUE column to UNIQUE Text NOT NULL?](https://stackoverflow.com/questions/4744617/mysql-how-to-alter-varchar255-unique-column-to-unique-text-not-null)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T21:15:16.393

你可以写一个存储过程

proc_insert_or_update（var1，var2，varN，链接）

如果链接存在 UPDATE 查询 ELSE INSERT 查询

[http://dev.mysql.com/doc/refman/5.0/en/create-procedure.html](http://dev.mysql.com/doc/refman/5.0/en/create-procedure.html)

# javascript - 什么数据被传递给从 FB.ui() 调用的回调函数？

> ID：11785814
> 
> 赞同：1
> 
> 时间：2012-08-02T21:09:10.487
> 
> 标签：javascript, facebook, facebook-javascript-sdk

所以[文档](https://developers.facebook.com/docs/reference/dialogs/send/)显示了这一点：

```
FB.ui(
  {
    method: 'feed',
    name: 'Facebook Dialogs',
    link: 'https://developers.facebook.com/docs/reference/dialogs/',
    description: 'Dialogs provide a simple, consistent interface for applications to interface with users.'
  },
  function(response) {
    if (response && response.post_id) {
      alert('Post was published.');
    } 
  }
); 
```

那太棒了。但我找不到任何关于`response`传递给回调函数的变量中的内容的文档。这在任何地方都有记录吗？具体来说，我想要一种方法来检索一个链接刚刚“共享”给多少用户。**虽然上面的代码使用了“feed”方法，但我使用的是“send”方法。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T21:12:30.873

[https://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)并查看`Return Data`部分

# powershell - PowerShell 远程加入域

> ID：11785821
> 
> 赞同：1
> 
> 时间：2012-08-02T21:09:23.633
> 
> 标签：powershell, active-directory, powershell-remoting

是否可以使用 PowerShell v2.0 将计算机远程添加到域？我知道 Add-Computer CMDLET，但这不适用于远程添加......但我可能错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:26:23.640

您应该能够[`Add-Computer`](http://technet.microsoft.com/library/dd347556.aspx)通过 PowerShell 远程调用该 cmdlet。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T15:04:20.140

我很难找到，所以我将在这里简要发布：

我的问题是访问不在域中的远程计算机，因为它不在域中... :) 像鸡和蛋的问题。

此处描述、讨论和解决了问题：[Powershell remoting with ip-address as target](https://stackoverflow.com/questions/6587426/powershell-remoting-with-ip-address-as-target)

我的快速解决方法是在此处运行此命令。

```
 Set-Item WSMan:\localhost\Client\TrustedHosts -Value "*" -Force 
```

在将远程计算机带入域后，您可能希望备份当前受信任的主机并重置它们。

# php - 卷曲页面时如何抓取标题

> ID：11785824
> 
> 赞同：0
> 
> 时间：2012-08-02T21:09:37.257
> 
> 标签：php, curl

我正在尝试卷曲页面（server.php）并在标题中发送三个变量（$webServiceId $hash 和 $timestamp），如下所示。如何从 server.php 的标头中获取两个变量，以便处理它们并发送响应？我试过用谷歌搜索和搜索here，但我似乎无法找出方法。

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_URL, 'server.php');
curl_setopt($ch, CURLOPT_HTTPGET, true);
curl_setopt($ch, CURLOPT_HTTPHEADER, array("Authorization: URL-Encoded-API-Key {$webServiceId},{$hash},{$timestamp}"));
$response = curl_exec($ch);
curl_close ($ch);
// dump response
print_r( $response ); 
```

如果 server.php 通过响应回显其收到的标头，则 $response 的 print_r 产生：

```
HTTP/1.1 200 OK Date: Thu, 02 Aug 2012 22:18:59 GMT Server: LiteSpeed Connection: close X-Powered-By: PHP/5.3.14 Allow: GET 
```

Authorization: URL-Encoded-API-Key 不在那里。我可以错误地设置卷曲标题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T21:46:59.300

我从未使用过`getallheaders()`，但文档说它读取当前请求的标头，这不是您正在做的。

答案就在这里： [PHP cURL 可以在单个请求中检索响应标头和正文吗？](https://stackoverflow.com/questions/9183178/php-curl-retrieving-response-headers-and-body-in-a-single-request)

将所有标题作为字符串获取后，然后将其分解，只需使用 a`strstr()`或正则表达式遍历每个标题即可获取值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T22:34:26.123

你这样做是错的。“CURLOPT_HEADER”只是一个布尔值，用于在输出中显示请求和响应标头。您需要使用“CURLOPT_HTTPHEADER”，它需要一个标头数组，并用于将标头与请求一起传递。

看：[http ://www.php.net/manual/en/function.curl-setopt.php](http://www.php.net/manual/en/function.curl-setopt.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T21:16:26.000

该函数`getallheaders()`将返回完整的请求标头。如果您从中调用它，`server.php`您应该能够接收使用 cURL 发送的自定义标头。

[http://php.net/manual/en/function.getallheaders.php](http://php.net/manual/en/function.getallheaders.php)

**编辑**

顺便说一句，您需要引号`server.php`：

```
curl_setopt($ch, CURLOPT_URL, 'server.php'); 
```

**编辑 2**

我使用 2 个脚本对其进行了测试：

**客户端.php**

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_URL, 'http://127.0.0.1/server.php');
curl_setopt($ch, CURLOPT_HTTPHEADER, array("Authorization: URL-Encoded-API-Key 12,12113132,1330032113"));
$response = curl_exec($ch);
curl_close ($ch);

// dump response
var_dump( $response ); 
```

**服务器.php**

```
var_dump(getallheaders()); 
```

打电话时，`client.php`我得到以下响应：

```
array(3) {
  ["Host"]=>
  string(9) "127.0.0.1"
  ["Accept"]=>
  string(3) "*/*"
  ["Authorization"]=>
  string(42) "URL-Encoded-API-Key 12,12113132,1330032113"
} 
```

我的猜测是您的自定义标题格式不正确。尝试使用一个简单的标题，看看它是否有效：

```
curl_setopt($ch, CURLOPT_HTTPHEADER, array("Authorization: 123456")); 
```

# php - 将php分解成不同的行

> ID：11785834
> 
> 赞同：1
> 
> 时间：2012-08-02T21:10:08.283
> 
> 标签：php, explode

我有一个无法编辑的字符串。每个名称由一个分隔`,`

```
$json = explode(",", file_get_contents("http://api.easyjquery.com/ips/?ip=".$theirip."&full=true")); 
```

我将它存储到一个 txt 文档中，就像一个测试项目一样。我想知道在我爆炸它之后我将如何制作由 a 分隔的每个内容，以便使用它转到一个新行，`\n`这样它就不会全部在一行上。

希望这是有道理的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:11:57.970

采用 ：

```
$result = implode("\n",$json); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T21:13:42.773

你可以做：

```
$json = explode(",", file_get_contents("http://api.easyjquery.com/ips/?ip=".$theirip."&full=true"));
$text = implode("\n",$json); 
```

# c# - 将 Excel 数据导入 SQL Server 时出现异常

> ID：11785837
> 
> 赞同：0
> 
> 时间：2012-08-02T21:10:20.310
> 
> 标签：c#, sql-server, excel

我有一个用户上传 Excel 文档的页面。该文件包含会员信息，提交后文件内容应替换SQL Server表中包含的会员数据。

在我添加`fileUploader`代码导致异常之后，情况如何。

```
if (fileUploader.HasFile)
{
     string contentType = fileUploader.PostedFile.ContentType;
     // Excel 2007 || Excel 2003
     if (contentType.Equals("application/vnd.openxmlformats-officedocument.spreadsheetml.sheet") || contentType.Equals("application/vnd.ms-excel"))
     {
        hidePanels();
        Members members = new Members();
        if (members.getAllNotExportedMembers().Count > 0)
        {
           //error message
        }
        else
        {
           bool backupSucceed =
                        members.backUpDatabase(Server.MapPath("~/backup-db") + @"\db-backup-" +
                                               DateTime.Now.ToString().Replace("/", "-").Replace(":", "-") + ".bak");
           if (backupSucceed)
           {
               bool fileUploaded = Helper.saveFile(fileUploader.FileBytes,
                                                            Server.MapPath("~/admin/kar/"),
                                                            fileUploader.FileName, 1, User.Identity.Name);
                if (fileUploaded)
                {
                     bool truncateSucceed = members.truncateTable();
                     if (truncateSucceed)
                     {
                        importExcel(Server.MapPath("~/admin/kar/"), "2012.xlsx");
                     }
                }
            }
        }
     }
} 
```

如果我将所有内容都注释掉，除了：

```
bool truncateSucceed = members.truncateTable();
if (truncateSucceed)
{
    importExcel(Server.MapPath("~/admin/kar/"), "2012.xlsx");
    showSuccesPanel("Success");
} 
```

它可以正常工作并且不会导致异常。

例外：

> System.Data.OleDb.OleDbException (0x80004005)：外部表不是预期的格式。
> 在 System.Data.OleDb.OleDbConnectionInternal..ctor(OleDbConnectionString constr, OleDbConnection connection)
> 在 System.Data.OleDb.OleDbConnectionFactory.CreateConnection(DbConnectionOptions 选项，对象 poolGroupProviderInfo，DbConnectionPool 池，DbConnection owningObject)
> 在 System.Data.ProviderBase.DbConnectionFactory。 CreateNonPooledConnection(DbConnection owningConnection, DbConnectionPoolGroup poolGroup)
> 在 System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection)
> 在 System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory)
> 在 System.Data.OleDb.OleDbConnection.Open()
> at admin.admin_uploadMemberList.importExcel(String filePath, String fileName) in uploadMemberList.aspx.cs:line 91

OleDB 连接字符串：

```
string conn = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + filePath + fileName
+ @";Extended Properties=""Excel 12.0;HDR=Yes;IMEX=1;ImportMixedTypes=Text;TypeGuessRows=0"""; 
```

怎么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T22:27:50.193

好吧，我找到了导致问题的原因。这是由 saveFile 方法引起的 - 如果我正在上传一个文件并且已经存在同名文件 - 抛出异常。

```
public static bool saveFile(this Byte[] fileBytes, string filePath, string fileName, int category, string uploadedBy)
{
    try
    {
        FileStream fileStream = new FileStream(filePath + "/" + fileName, FileMode.Create, FileAccess.ReadWrite);
        fileStream.Write(fileBytes, 0, fileBytes.Length);
        fileStream.Dispose();
        fileStream.Close();
        FileUpload fileUpload = new FileUpload();
        return fileUpload.createFileUpload(fileName, category, filePath, uploadedBy, DateTime.Now);
    }
    catch (Exception ex)
    {
        mLog.logMessage(ex, HttpContext.Current.Request.Url.ToString(), 1);
        return false;
    }
} 
```

它只是按照应有的方式覆盖文件-但也许有人可以解释为什么我会遇到异常。

# php - PDO 查询的 MySQL 语法错误

> ID：11785838
> 
> 赞同：-1
> 
> 时间：2012-08-02T21:10:21.343
> 
> 标签：php, pdo

我正在尝试将 mysql 函数 FROM_UNIXTIME 与 PDO 一起使用：

```
$sth = $dbh->prepare("UPDATE ".DB_PREFIX."_logins SET num_of_trys = num_trys-1, 
       last_try = FROM_UNIXTIME(:last_try), WHERE username = :username 
       OR ip = :ip");
$sth->bindParam(':ip', $ip); 
$sth->bindParam(':username', $user);
$sth->bindParam(':last_try', $lst);
$sth->execute(); 
```

但我收到错误消息。这样做的正确方法是什么？

这是错误消息：

```
Fatal error: Uncaught exception 'PDOException' with message 'SQLSTATE[42000]: 
             Syntax   error or access violation: 1064 You have an error 
             in your SQL syntax; check the manual that corresponds to your 
             MySQL server version for the right syntax to use near 
             'WHERE username = 'sadas' OR ip = '1834871734'' at line 1' 
              in /pathtofile/acc_functions.php:72 Stack trace: #0 
              /pathtofile/acc_functions.php(72): PDOStatement->execute() #1 
              /pathtofile/login.php(44): check_login_attempts(1834871734, 
              1343941422, 'sadas') #2 {main} thrown in 
              /pathtofile/acc_functions.php on line 72 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T21:13:32.527

删除`,`您之前拥有的字符`WHERE`。

# c# - 如何在 C# 中将 xml 文件中的值赋给 datagridviewtextbox？

> ID：11785840
> 
> 赞同：4
> 
> 时间：2012-08-02T21:10:32.120
> 
> 标签：c#, xml, xpath, datagridview, datagridviewtextboxcell

假设我有一些看起来像这样的 xml 文件：

```
<NewDataSet>
  <Table1 id = "one">
    <Server>Server1</Server>
    <Database>Database1</Database>
  </Table1>
  <Table1 id = "two">
    <Server>Server2</Server>
    <Database>Database2</Database>
  </Table1>
</NewDataSet> 
```

我想要做的是我想从这个 xml 中读取值并将它们放入`datagridview`不同的列中。例如：在一列中显示`Database1`和。`Database2`我使用 Xpath 从 xml 文件中获取值，这是我的代码：

```
 private void xmlGetValues()
    {
        XPathDocument doc = new XPathDocument("C:\\XMLfile1.xml");
        XPathNavigator nav = doc.CreateNavigator();

    XPathExpression expr;
    expr = nav.Compile("/NewDataSet/Table1/Database");
    XPathNodeIterator iterator = nav.Select(expr);

    try
    {
        while (iterator.MoveNext())
        {
            XPathNavigator nav2 = iterator.Current.Clone();              
        }
    }
    catch (Exception exp)
    {
        MessageBox.Show(exp.Message);
    }
} 
```

这将从`Database`标签中获取所有值，我无法弄清楚如何将这些值`datagridviewtextbox`显示在我的`datagridview`. 谁能帮我这个？（PS对不起我的英语不好）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:23:50.463

尝试，

```
XElement root = XElement.Load(file);
var tables = root.Descendants("Table1")
                 .Select(t => new
                 {
                     Server = t.Element("Server").Value,
                     Database = t.Element("Database").Value
                 });

foreach(var table in tables)
    grid.Rows.Add(new object[] { table.Server, table.Database }); 
```

# linux - 我可以在 Doxygen 中使用 shell 命令输出作为选项参数吗？

> ID：11785843
> 
> 赞同：0
> 
> 时间：2012-08-02T21:10:42.853
> 
> 标签：linux, doxygen

我想知道是否可以在 Doxygen 配置文件中使用 shell 命令输出作为选项参数。例如，您需要设置“PROJECT_NAME”选项。我已经有一个 README 文件，这个文件的第一行是项目的名称。我可以`head -1 ../README`在 Doxygen 配置中做 ' ' 而不是到处复制相同的几个词。是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:30:44.283

您可以在调用 doxygen 之前将其`$(PROJECT_NAME)`用作`PROJECT_NAME`标记的值并将环境变量设置为正确的值。如果你使用 bash，你可以这样做：

```
PROJECT_NAME=`head -1 ../README` doxygen project.doxyfile 
```

这对我很有效。

# c# - 如何在代码中使用模板更改元素的背景？

> ID：11785851
> 
> 赞同：0
> 
> 时间：2012-08-02T21:11:26.740
> 
> 标签：c#, wpf, templates

所以我有一个应用到它`TextBox`的表单（它对所有文本框都是全局的）。`Template`我想要的是更改某些文本框的背景颜色，具体取决于其中是否存在无效条目。但我需要将更改仅应用于一个特定的文本框（因此我无法更改模板）

从代码中，我想说：

```
tb.Background = (SolidColorBrush)FindResource("myColor"); 
```

当我目前这样做时，什么都没有发生，我只假设这是因为有一个模板应用于`TextBox tb`.

有没有办法做到这一点，而无需为不正确的条目进行自定义`Template`/ ？`Style`（我需要对多个控件重复此过程，并且我不想要这么多样式/模板）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T06:28:34.067

没有看到你的模板很难说，但如果你的代码不起作用，请确保你的模板有这个：

```
Background="{TemplateBinding Background}" 
```

没有这个，你不能从模板外部设置背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T21:24:21.503

您可以使用两种方法。方法#1

```
textBox1.Background = Brushes.Blue;
textBox1.Foreground = Brushes.Yellow; 
```

方法#2

我认为您是在 xaml 中创建 TextBox 吗？在这种情况下，您需要为文本框命名。然后在后面的代码中，您可以使用各种画笔设置 Background 属性。其中最简单的是 SolidColorBrush：

```
myTextBox.Background = new SolidColorBrush(Colors.White); 
```

# c++ - 两个默认参数都设置了错误/

> ID：11785857
> 
> 赞同：0
> 
> 时间：2012-08-02T21:11:46.143
> 
> 标签：c++

在我的“.h”文件中，我定义了：

```
 example(CQueue* queue = NULL, double code = 0); 
```

在我的“.cpp”文件的 2 种不同方法中，我必须使用：

```
 example(queue);

    example(code2); 
```

在这两种情况下我都会出错。我不想超载。正在定义它：

```
 example(CQueue* queue, double code = 0); 
```

唯一的办法？或者我可以按照当前定义的方式定义它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T21:13:38.880

您可以这样定义它，但不要指望第二次调用会起作用。第一个应该没问题，前提`queue`是`CQueue*`. 如果它是一个对象，您需要传递它的地址：`&queue`。

您必须将第二个调用更改为：

```
example(NULL, code2); 
```

或者，如您所说，超载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T21:14:39.157

如果要为 传递特定值`code`，则还**必须**为前面的可选参数传递一个值，即使它们在方法签名中被赋予了默认值。

只需明确传递您定义为默认值的内容：`example(NULL, code2);`

你的定义很好，但如果你想也能调用`example(code2)`，那么你**必须**重载。

`example(queue);`应该根据`queue`.

# jquery - jQuery 如何定位“this”的目标？

> ID：11785859
> 
> 赞同：3
> 
> 时间：2012-08-02T21:12:01.483
> 
> 标签：jquery, anchor, this, target

当我尽力解释我需要什么时，请耐心等待:)

我们有 3 个链接指向页面下方的锚点，如下所示：

`<a href="#step1">Step 1</a>`去`<div id="#step1">`

`<a href="#step2">Step 2</a>`去`<div id="#step2">`

`<a href="#step3">Step 3</a>`去`<div id="#step3">`

所以我想要做的是动态地定位我要去的元素。因此，如果我单击 Step 1 链接，我会转到 id 为 step1 的 div，但使用 jQuery 选择目标元素（id 为 step1 的 div）。

所以这个片段不起作用，但我认为是在正确的道路上：

```
$(this).effect("highlight", {}, 3000); 
```

...它选择了我点击的链接 - 不对！我想选择我在该链接中定位的元素。得到它？现在，我知道我可以对其进行硬编码，但必须有一种方法可以动态地定位我想要的东西。

如果这没有任何意义，我很抱歉。我会喜欢任何和所有的帮助和反馈。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T21:14:51.993

```
$($(this).attr('href')).effect("highlight", {}, 3000); 
```

[http://jsfiddle.net/b9nub/](http://jsfiddle.net/b9nub/)

PS：注意不需要`#`在`id`值中使用，所以

```
<div id="step1"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T21:24:59.663

这是我用来刷新#anchor 链接目标的代码。维基百科使用类似的技术来闪现脚注。

```
/**
 * Temporary highlight targets of #anchor links.
 */
$('a').click(function() {
  if (/#(.*)/.test($(this).attr('href'))) {
    var $target = $('#' + RegExp.$1 + ', *[name="' + RegExp.$1 + '"]');
    var repeats = 15;
    function step() {
      repeats--;
      $target[repeats ? 'toggleClass' : 'removeClass']('target');
      if (repeats) {
        window.setTimeout(step, 50);
      }
    }
    step();
  }
}); 
```

（您必须在样式表中添加一个“目标”类来设置它的样式。）

顺便说一句，只是为了让您知道：可以单独使用 CSS3，使用它的 :target 伪类来设置[目标元素](http://reference.sitepoint.com/css/pseudoclass-target)的样式：

```
div:target {
  color: red;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T21:15:51.093

在 a 标签的点击事件中，这指的是 a 元素。所以我假设你想从那个标签中获取href，并使用你自己的逻辑来突出显示div。

```
$($(this).attr('href')).effect("highlight", {}, 3000); 
```

# database - 将评估与学生联系起来

> ID：11785860
> 
> 赞同：0
> 
> 时间：2012-08-02T21:12:09.217
> 
> 标签：database, database-design, rdbms, erd

我正在尝试创建一个学生信息数据库，但是有一部分一直让我感到困惑。

一门课程有许多评估（模块中考试、家庭作业、期末考试......等）每个评估都有一个名称、重量和数量（学生从重量中得到了多少，例如 50 分中的 30 分）。我如何将学生与金额联系起来，还是我做错了？

学生 -||---< 注册课程 >---||- 课程 -||--< 评估

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T21:25:33.653

学生 -||---< 注册课程 >---||- 课程

课程-||--<评估

学生 -||---< weight_in_assessment >---||- 评估

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T23:53:23.833

看起来你需要这样的东西：

![在此处输入图像描述](../Images/6221325e7adf84cc579c69d7b06b5d69.png)

请注意 COURSE_ID 如何源自 COURSE，然后沿“菱形”的两个“边缘”传播，仅在 SCORE 中的“底部”处合并。这样可以确保学生不能在他没有注册的课程上得分。

# java - 用于 SDL Tridion 2011 的 Java 部署程序扩展的原型或方法，用于将内容索引到 Apache Solr

> ID：11785862
> 
> 赞同：0
> 
> 时间：2012-08-02T21:12:13.837
> 
> 标签：java, solr, tridion, tridion-2011, tridion-content-delivery

谁能帮助我为 SDL Tridion 2011 的 Java 部署程序扩展提供原型或方法，以便此应用程序/进程/模块可以使用增量发布并将该内容索引到 Apache Solr 中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T21:29:12.347

请查看有关 SO 的其他问题：

[我们如何覆盖 Tridion 2009 中现有的部署程序自定义？](https://stackoverflow.com/questions/10773585/how-can-we-override-the-existing-deployer-customization-in-tridion-2009)

[从 Eclipse 运行自定义部署程序](https://stackoverflow.com/questions/10146490/running-custom-deployer-from-eclipse)

[如何让 Custom Deployer 将数据写入 MS SQL 数据库？](https://stackoverflow.com/questions/11361594/how-to-make-a-custom-deployer-to-write-data-to-ms-sql-database)

[需要获取已发布的组件版本的 XML](https://stackoverflow.com/questions/11614756/need-to-get-the-xml-of-a-components-that-version-which-is-published)

[我们如何将 Microsoft FAST 与 SDL Tridion 2011 SP1 集成？](https://stackoverflow.com/questions/11014950/how-can-we-integrate-microsoft-fast-with-sdl-tridion-2011-sp1)

最后一个专门处理更新搜索集合。如果这没有帮助，请向我们展示您对一些代码示例的尝试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T19:28:59.007

SDL tridion 2011 SP1 Deployer 作为一个 war 文件（这里我们有 cd_deplyer.war），可以部署在任何 appserver 中，这是我们可以有自定义代码来扩展部署程序以应用我们的自定义逻辑的地方从 SDL 发布的内容。这个war文件将有许多配置文件，其中一个是cd_deployer_conf.xml，我们必须在其中声明一个模块标签，每次发布内容时都会调用该标签。例如：。. ........ 同样对于取消部署

```
<Processor Action="Undeploy" Class="com.tridion.deployer.Processor">
.
<Module Type="SolrPageUndeploy" Class="com.xyz.RemovePageFromSolr">
.
. 
```

这些 IndexPageToSolr 和 RemovePageFromSolr 将获得所需的元数据，用于索引到 solr 和从 solr 取消索引。我们可以将我们的 java 类放在同一个 war 文件中，或者我们可以将所有的 war 文件放在我们的 war 文件中并部署在任何应用服务器中，并将应用程序的完整上下文路径提供给 SDL 以进行发布。

# ios - amazon s3 iphone sdk 下载图片

> ID：11785872
> 
> 赞同：3
> 
> 时间：2012-08-02T21:13:20.213
> 
> 标签：ios, amazon-s3, amazon

在我的一生中，我无法弄清楚如何在我的 iOS 项目中实现亚马逊的 sdk，而且我似乎找不到太多关于我正在尝试做什么的文档......希望你能提供帮助！

我想非常简单地从我的 Amazon S3 帐户下载文件并将它们本地存储在 iPhone 上……我可以通过 http 地址访问图像来做到这一点，但这并不能像我希望的那样保护图像。

根据我的阅读，我应该做这样的事情：

```
AmazonS3Client *s3Client = [[AmazonS3Client alloc] initWithAccessKey:@"mykey" withSecretKey:@"mysecretkey"];

        S3GetObjectRequest *requestedObject = [[S3GetObjectRequest alloc] initWithKey:bucketPath withBucket:@"mybucket"];

        NSLog(@"requestedobject:%@", requestedObject - I get the log here);

        S3GetObjectResponse *getObjectResponse = [s3Client getObject:requestedObject];

        NSLog(@"requestedobject2:%@", getObjectResponse - it crashes before this happens);
        NSData *myData2;
        myData2 = getObjectResponse.body;
        [myData2 writeToFile:bucketPath atomically:YES]; 
```

我显然在 getObjectResponse、getObject 代码上做错了，但我无法弄清楚正确的语法......任何帮助将不胜感激！

这是日志：2012-08-02 17:12:33.856 Collection Master Edition[13176:4e07] 请求对象：2012-08-02 17:12:34.044 Collection Master Edition[13176:4e07] ***由于未捕获的异常而终止应用程序'AmazonServiceException'，原因：'(null)'

也许我还应该提到我可以使用以下代码获取存储桶列表内容

```
 S3ListObjectsRequest *listObjectRequest = [[S3ListObjectsRequest alloc] initWithName:@"my bucket"];

        S3ListObjectsResponse *listObjectResponse = [s3Client listObjects:listObjectRequest];

        S3ListObjectsResult *listObjectsResults = listObjectResponse.listObjectsResult;

        for (S3ObjectSummary *objectSummary in listObjectsResults.objectSummaries) {

            NSLog(@"Bucket Contents:%@" ,[objectSummary key]); // This returns the contents of the bucket

        } 
```

谢谢！扎克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T03:03:57.580

从我在这里看到的情况来看，您可能会遇到两个问题之一。我第一次开始使用 AWS 时遇到了类似的问题。首先确保您的存储桶名称全部为小写字母。您应该通过将其放入 @try - @catch 块并记录错误来检查为什么会发生这种情况，这在找出问题时提供了非常详细的信息。

```
 -(UIImage *)getImageFromS3{      

    @try{
    AmazonS3Client *_s3Client = [[AmazonS3Client alloc]initWithAccessKey:ACCESS_KEY withSecretKey:SECRET_KEY];      

    S3GetObjectRequest *getObjectRequest = [[S3GetObjectRequest alloc]initWithKey:imageKey withBucket:pictureBucket];

  S3GetObjectResponse *response = [_s3Client getObject:getObjectRequest];

    if (response.error == nil)
    {
        if (response.body != nil)
        {
        UIImage *someImage = [UIImage imageWithData:reponse.body];
    return someImage;
        }
        else{
            NSLog(@"There was no value in the response body");
            return nil;
             }
    }
    else if (response.error != nil)
    {
        NSLog(@"There was an error in the response while getting image: %@",response.error.description);
    }
}

    @catch (NSException *exception) {
    NSLog(@"There was an exception when connecting to s3: %@",exception.description);
}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-09T08:59:21.063

问题可能是与您的密钥对相关的权限。我的建议是去你的[在您的管理控制台上使用您的 IAM](http://wwww.console.aws.amazoncom)并创建一个具有您想要的适当 S3 权限的新组，在这种情况下，除了一些您不需要的更具管理性的东西（所以主要只是 POST ，获取权限）。然后在该组中创建一个用户并使用该密钥对进行测试。这可能会让事情变得清晰，因为这是我认为对我有用的过程。列表权限似乎相当低级，但是 POST 和 GET 需要不同的权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-19T08:49:28.280

May be it is let, but might help some one. Here is the code to upload image in amazone-s3

```
constant.h
#import <Foundation/Foundation.h>
#define SECRET_KEY             @"your secret kry"
#define ACCESS_KEY_ID          @"your access id" 
```

#define PICTURE_BUCKET @"bucket name" #define PICTURE_NAME @"any word" #define CREDENTIALS_ERROR_TITLE @"Missing Credentials" #define CREDENTIALS_ERROR_MESSAGE @"AWS Credentials not configured correctly. Please review the README file."

@interface Constant : NSObject

+(NSString *)pictureBucket;

@end

In constant.m

#import "Constant.h"

@implementation Constant +(NSString *)pictureBucket { return [[NSString stringWithFormat:@"%@-%@", PICTURE_BUCKET, ACCESS_KEY_ID] lowercaseString]; }

```
@end 
```

In UploadViewController.h

```
 typedef enum {
  GrandCentralDispatch,
  Delegate,
  BackgroundThread
  } UploadType;

  @interface UploadPhotoViewController :  UIViewController<UIImagePickerControllerDelegate,UINavigationControllerDelegate,UINavigationControllerDelegate, AmazonServiceRequestDelegate>
 {
UploadType _uploadType;
 }

 @property (strong, nonatomic) IBOutlet UIButton *buttonSelectPhoto;
  @property (nonatomic, retain) AmazonS3Client *s3; 
```

In UploadViewController.m

```
 #import "UploadPhotoViewController.h"
       #import <AWSRuntime/AWSRuntime.h>
      #import "Constant.h"

       @interface UploadPhotoViewController ()

        @end

         @implementation UploadPhotoViewController

     - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
        {
     self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
    // Custom initialization
      }
       return self;
     }

       - (void)viewDidLoad
      {
     [super viewDidLoad];
// Do any additional setup after loading the view from its nib.

     #ifdef DEBUG
     [AmazonLogger verboseLogging];
   #else
      [AmazonLogger turnLoggingOff];
   #endif

     [AmazonErrorHandler shouldNotThrowExceptions];

      if(![ACCESS_KEY_ID isEqualToString:@"CHANGE ME"]
          && self.s3 == nil)
       {
    // Initial the S3 Client.
    //!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
    // This sample App is for demonstration purposes only.
    // It is not secure to embed your credentials into source code.
    // DO NOT EMBED YOUR CREDENTIALS IN PRODUCTION APPS.
    // We offer two solutions for getting credentials to your mobile App.
    // Please read the following article to learn about Token Vending Machine:
    // * http://aws.amazon.com/articles/Mobile/4611615499399490
    // Or consider using web identity federation:
    // * http://aws.amazon.com/articles/Mobile/4617974389850313
    //!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
    self.s3 = [[AmazonS3Client alloc] initWithAccessKey:ACCESS_KEY_ID withSecretKey:SECRET_KEY] ;
    self.s3.endpoint = [AmazonEndpoints s3Endpoint:US_WEST_2];

    // Create the picture bucket.
    S3CreateBucketRequest *createBucketRequest = [[S3CreateBucketRequest alloc] initWithName:[Constant pictureBucket] andRegion:[S3Region USWest2]];
    S3CreateBucketResponse *createBucketResponse = [self.s3 createBucket:createBucketRequest];
    if(createBucketResponse.error != nil)
    {
        NSLog(@"Error: %@", createBucketResponse.error);
    }
}

  }
   -(void)viewDidAppear:(BOOL)animated
 {
[super viewDidAppear:animated];

if ([ACCESS_KEY_ID isEqualToString:@"CHANGE ME"])
{
    [self showAlertMessage:CREDENTIALS_ERROR_MESSAGE withTitle:CREDENTIALS_ERROR_TITLE];
} 
```

} - (void)showAlertMessage:(NSString *)message withTitle:(NSString *)title { UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:title message:message delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil]; alertView.delegate=self; [alertView show]; } - (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {

```
dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
dispatch_async(queue, ^{

    // Set the content type so that the browser will treat the URL as an image.
    S3ResponseHeaderOverrides *override = [[S3ResponseHeaderOverrides alloc] init];
    override.contentType = @"image/jpeg";

    // Request a pre-signed URL to picture that has been uplaoded.
    S3GetPreSignedURLRequest *gpsur = [[S3GetPreSignedURLRequest alloc] init];
    gpsur.key                     = PICTURE_NAME;
    gpsur.bucket                  = [Constant pictureBucket];
    gpsur.expires                 = [NSDate dateWithTimeIntervalSinceNow:(NSTimeInterval) 3600]; // Added an hour's worth of seconds to the current time.
    gpsur.responseHeaderOverrides = override;

    // Get the URL
    NSError *error = nil;
    NSURL *url = [self.s3 getPreSignedURL:gpsur error:&error];

    if(url == nil)
    {
        if(error != nil)
        {
            dispatch_async(dispatch_get_main_queue(), ^{

                NSLog(@"Error: %@", error);
                [self showAlertMessage:[error.userInfo objectForKey:@"message"] withTitle:@"Browser Error"];
            });
        }
    }
    else
    {
        /*dispatch_async(dispatch_get_main_queue(), ^{
            // Display the URL in Safari
            [[UIApplication sharedApplication] openURL:url];

        });*/
    }NSLog(@"url is %@",url);

});

 }

   - (void)didReceiveMemoryWarning
   {
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
  }

   - (IBAction)buttonTakePhoto:(id)sender
   {
UIImagePickerController *picker = [[UIImagePickerController alloc] init];

picker.delegate = self;

picker.allowsEditing = YES;

picker.sourceType = UIImagePickerControllerSourceTypeCamera;

[self presentViewController:picker animated:YES completion:NULL];
  }

   - (IBAction)buttonSelectPhoto:(id)sender
   {
 [self showImagePicker:Delegate];
 }

    - (void)showImagePicker:(UploadType)uploadType
{
UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init] ;
imagePicker.delegate = self;

_uploadType = uploadType;

[self presentViewController:imagePicker animated:YES completion:NULL];
   }

  - (void)processDelegateUpload:(NSData *)imageData
 {
// Upload image data.  Remember to set the content type.
S3PutObjectRequest *por = [[S3PutObjectRequest alloc] initWithKey:PICTURE_NAME
                                                          inBucket:[Constant pictureBucket]];
por.contentType = @"image/jpeg";
por.data = imageData;
por.delegate = self;

// Put the image data into the specified s3 bucket and object.
[self.s3 putObject:por];
 }

     -(void)request:(AmazonServiceRequest *)request didCompleteWithResponse:(AmazonServiceResponse *)response
  {
[self showAlertMessage:@"The image was successfully uploaded." withTitle:@"Upload Completed"];

[[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];
  }

 -(void)request:(AmazonServiceRequest *)request didFailWithError:(NSError *)error
  {
NSLog(@"Error: %@", error);
[self showAlertMessage:error.description withTitle:@"Upload Error"];

[[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];
  }

   #pragma mark - UIImagePickerControllerDelegate methods

       -(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
    {
// Get the selected image.
UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage];

// Convert the image to JPEG data.
NSData *imageData = UIImageJPEGRepresentation(image, 1.0);

if(_uploadType == Delegate)
{
    [self processDelegateUpload:imageData];
}

[[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:YES];

[picker dismissViewControllerAnimated:YES completion:NULL];
   }

   -(void)imagePickerControllerDidCancel:(UIImagePickerController *)picker
  {
[picker dismissViewControllerAnimated:YES completion:NULL];
   }

     - (IBAction)buttonBack:(id)sender
     {
[self.navigationController popViewControllerAnimated:YES];
   }

   @end 
```

# symfony - 如何在 Smfony 2 中 Doctrine 的 findBy 方法返回的查询结果集中进行迭代

> ID：11785875
> 
> 赞同：1
> 
> 时间：2012-08-02T21:13:28.990
> 
> 标签：symfony, doctrine-orm

我想替换一列结果集的一些字符。我正在调用以下命令进行数据库查询并获得结果：

```
 $applicant = $em2->getRepository('TestBundle:Person')->findByApplicantName($searchText); 
```

这会从存储库类返回结果集，我可以将变量发送到 Twig 模板以通过这种方式通过分页器显示结果：

```
 {% for applicant in pagination %}
    <tr>
    <td>
    {{ applicant.person_address }}
    </td>
    </tr>
    {% endfor %} 
```

在将返回的查询结果交给 Twig 模板之前，如何在控制器中迭代它？我创建了以下函数，但我不知道如何到达返回结果集的各个列并再次将其替换为自身：

```
foreach ($applicant as $a) {
// $a->person_address ?? it is also ok to replace chars in all columns
$a = str_replace("Ã¼", "ü", $a);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T22:26:58.267

```
$a->getPerson_address(); // Retrieves the address, might want to rethink some of your names 
```

# php - Jquery 显示和隐藏项目问题。空格

> ID：11785881
> 
> 赞同：1
> 
> 时间：2012-08-02T21:14:04.830
> 
> 标签：php, jquery, mysql, hide, show

我有一个网站，显示通过 PHP 从 MySQL 表中提取的多个项目。

然后我有一个按颜色的过滤器（复选框显示不同的颜色，并通过单击它们，以下 jquery 隐藏/显示选定的颜色）：

```
jQuery(document).ready(function($) {

    $(":checkbox").bind("click", function (event) {
        if($(this).is(':checked')) {
            $(".itemBox:not(#" + $(this).val()  + ")").hide();
            $(".itemBox[id='" + $(this).val() + "']").show();
        }
        else {
        $(".itemBox").show();
        }
});
}); 
```

我的问题如下。项目显示如下，2 x 2，因此当 jquery 隐藏/显示时，它只是将项目留在原处，它们不会被重新组织。所以我看到之前显示项目的空白空间现在被隐藏了......

你有什么建议来解决这个问题或强制 PHP 刷新吗？我试图避免刷新整个页面......

```
while ($info = mysql_fetch_array($items))
{
if ($row_count % 2 == 0) 
{
echo "<tr>";
}
echo "<td><div name='item' id='".$info[color_base1]."' class='itemBox'><div class='showItem'><a href='items_descr.php?itemId=".$info[id_item]."'><img class='itemImage' alt='' src='images/$info[imageMid].jpg'></img></div><br />";
echo "<div class='indexItemText'><font class='similarItemsText'><a href='items_descr.php?itemId=".$info[id_item]."'>".$info[name]."</a><font class='price'> - $".$info[price]."</div></td></div>";
$row_count++; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T21:27:46.740

如果您只是将所有这些元素放入容器 div 和单个项目 div 中，每个项目的 CSS 中都留有浮动，您可以编写一些 CSS 使其具有相同的外观，但是当您使用 hide 方法取出元素时，间隙将被删除。

# jquery - 阿拉伯字符和 jQuery 的奇怪行为

> ID：11785884
> 
> 赞同：0
> 
> 时间：2012-08-02T21:14:13.163
> 
> 标签：jquery, arabic

这是我正在谈论的一个例子：http: [//jsfiddle.net/DNhwG/](http://jsfiddle.net/DNhwG/)

在示例中，我有一个带有阿拉伯字符的文本区域。当您单击按钮时，它会向 textarea 添加更多阿拉伯字符并提醒 textarea 的文本。

在您手动将字符放入文本区域之前，这将正常工作。一旦你这样做，它就会变得不同步。

我的意思是，您在 textarea 中看到的文本是错误的，警报中的文本是正确的，如果您检查元素，它会告诉您与警报相同的内容。你不能再用 jQuery 设置文本，你可以，并且 dom 会更新，但屏幕不会。

这在 Chrome 中发生在我身上。

这是一个已知的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:59:51.440

您使用过`.text()`以及`.html()`何时应该使用`.val()`（[.text()](http://api.jquery.com/text/)和[.val()](http://api.jquery.com/val/)的文档提到了有关文本字段/文本区域的内容）

更新小提琴：http: [//jsfiddle.net/DNhwG/1/](http://jsfiddle.net/DNhwG/1/)

# objective-c - Gnustep - 视频录制应用程序

> ID：11785885
> 
> 赞同：3
> 
> 时间：2012-08-02T21:14:32.200
> 
> 标签：objective-c, ios, cocoa-touch, gnustep

我没有 Mac，是否可以在 Windows 上的 gnustep 中创建功能齐全的视频录制应用程序，然后执行必要的过程将其部署为 iPad 应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T02:58:20.580

基本上，没有。当然，如果您在 GNUstep 中编写代码，您将接近于功能正常的 Cocoa 应用程序，但是这两个 API 之间存在根本差异，并且它们的数量足够多，完成 iPad 版本将是*大量*工作。当你需要完成你的应用程序时，你需要一台 Mac，并且需要花费*大量*时间来修复你的 GNUstep 代码以与 Cocoa 一起工作。

此外，iPad 上有一些特定的视频相关 API 对 GNUstep 根本*不可*用。你最终会重写大部分代码。

对不起！您最好的选择是购买 Mac 进行开发。

# cakephp - Google Analytics 自定义变量 - CakePHP

> ID：11785889
> 
> 赞同：0
> 
> 时间：2012-08-02T21:14:45.317
> 
> 标签：cakephp, google-analytics

我需要帮助在 Google Analytics 中将“名字和姓氏”输出为自定义变量。我试过这个但没有用。

```
_gaq.push(['_setCustomVar', 1, 'author', '<?php echo ucfirst($blogdata['User']['first_name'])." ".ucfirst($blogdata['User']['last_name']);?>',3]); 
```

检查源代码/GA 调试器时，名字和姓氏值为空白：`_gaq.push(['_setCustomVar', 1, 'author', ' ',3]);`

这是我的博客上显示名字和姓氏的方式。

```
<?php $ud =  ucfirst($blogdata['User']['first_name'])." ".ucfirst($blogdata['User']['last_name']).'&nbsp;/&nbsp;'  ; ?>
          <?php $ud .= $blogdata['UserType']['type'].'&nbsp;/&nbsp;'; ?>
           <?php $ud .= 'On '. $this->Time->format('M j, Y', $blogdata['Blog']['publish_date']).''; ?>
        <?php echo 'Posted By: '.  $this->Html->link($ud, $profilepath, array('escape' => false, 'target' => '_blank')); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T19:26:09.753

问题可能是因为`$blogdata`在视图中设置，因此在通常放置分析的布局中不可用。

要使其可用于布局，`beforeFilter`请在 App 控制器的回调中设置数据。

```
public function beforeFilter() {
  $blogdata = array(); // find data here
  $this->set('blogdata', $blogdata);
} 
```

# emacs - Aquamacs+slime：在启动时加载一个 lisp 文件

> ID：11785890
> 
> 赞同：0
> 
> 时间：2012-08-02T21:14:50.793
> 
> 标签：emacs, slime, aquamacs

我正在运行 Aquamacs + Slime，当我启动 Aquamacs 时，我能够自动启动 Slime。但是，当我尝试加载 lisp 文件之后，我会不断收到各种错误，具体取决于我尝试加载文件的方式。这是我的preferences.el

```
(setq inferior-lisp-program "~/ccl/dx86cl64"
  slime-startup-animation nil)
(require 'slime)
(split-window-horizontally)
(other-window 1)
(slime)
(eval-after-load "slime"
   '(progn 
       (slime-compile-and-load-file "/Users/xxxxx/xxxxx/load-seq.lisp")
 )) 
```

我收到以下错误

```
error: Buffer *inferior-lisp* is not associated with a file. 
```

我已经尝试过其他功能，包括`load` `compile-and-load`和`slime-load-file`并分别得到以下错误......

```
Invalid read syntax: #
Symbol's function definition is void: compile-and-load
error: Not connected. 
```

当我`(load "/Users/xxxxx/xxxxx/load-seq.lisp")`从 slime REPL 执行时，lisp 文件可以正常加载（和编译）。似乎当我将它放在 Preferences.el 中时，即使我使用的是`eval-after-load`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T18:36:56.770

你碰巧误解了`slime-compile-and-load-file`函数的使用。它的文档字符串说：

> `(slime-compile-and-load-file &optional POLICY)`
> 
> 编译并加载**缓冲区的文件**并突出显示编译器注释。

该函数对已经与当前缓冲区关联的文件进行操作，并且它需要一个编译策略，而不是文件名，作为它的（可选）参数。所以你的代码应该是这样的：

```
(slime)
(add-hook 'slime-connected-hook
          (lambda ()
            (find-file "/Users/xxxxx/xxxxx/load-seq.lisp")
            (slime-compile-and-load-file))) 
```

其中`slime-connected-hook`包含当 SLIME 连接到 Lisp 服务器时要调用的函数列表。

但我不确定 Emacs 初始化文件是否是加载此类非 Emacs Lisp 代码的正确位置。CCL 初始化文件将是一个更好的地方。参见[2.4。](http://ccl.clozure.com/ccl-documentation.html#Personal-Customization-with-the-Init-File)使用CCL 手册中[的初始化文件进行个人定制。](http://ccl.clozure.com/ccl-documentation.html#Personal-Customization-with-the-Init-File)

此外，该`load`函数用于执行 Emacs Lisp 代码。`slime-load-file`是一个正确的调用函数，但它碰巧被调用得太早（或者在 SLIME 连接到 Lisp 服务器之前）。`slime-connected-hook`如果它被添加到钩子中，它会起作用的。`slime-load-file`实际上，如果您在`slime-compile-and-load-file`启动 Emacs 时没有正当理由编译 Lisp 代码（并且您真的想在 Emacs 中这样做），我想建议您不要这样做：

```
(add-hook 'slime-connected-hook
          (lambda ()
            (slime-load-file "/Users/xxxxx/xxxxx/load-seq.lisp"))) 
```

最后，没有调用函数`compile-and-load`。

# jquery - 在 django 中使用 ajax 时无法发布

> ID：11785892
> 
> 赞同：2
> 
> 时间：2012-08-02T21:14:53.247
> 
> 标签：jquery, ajax, django, post

所以我一直在关注本教程[http://webcloud.se/log/AJAX-in-Django-with-jQuery/](http://webcloud.se/log/AJAX-in-Django-with-jQuery/)，并且 get 方法工作正常。即我得到一个弹出窗口说它应该在弹出窗口中说什么。但是，当我使用 post 方法时，我什么也得不到。看来该请求甚至没有达到我的观点。

这就是我处理这个问题的 javascript 的样子：

```
$(document).ready(function(){

    $("#popupbutton").click(function(){
        $.post("/launch_instances", { 
                name: "Monty",
                food: "Spam" 
            },
            function(data) {
                alert(data);
            }
        );
     });
 ................... 
```

这是我的模板的相关位：

```
<center>
   <div id="popupbutton"><input type="submit" value="Launch Instances!" /></div>
</center> 
```

这是我的views.py：

```
from django.http import HttpResponse

def li_view(request):
    return HttpResponse("post gets to the view")
    if request.is_ajax():
        if request.method == 'GET':
            message = "This is an XHR GET request"
        elif request.method == 'POST':
            message = "This is an XHR POST request"
        else:
            message = "Nothing"
    else:
        message = "No XHR"

    return HttpResponse(message) 
```

正如您所看到的，当我到达我的视图时，我做的第一件事是返回一个 HttpResponse，但是当我使用 post 时，我看不到任何弹出窗口，就像我使用 get 时所做的那样。所以我的猜测是，由于某种原因，请求甚至没有到达视图。

这就是我的 urls.py：

```
from django.conf.urls import patterns, include, url
from django.contrib import admin

admin.autodiscover()

urlpatterns = patterns('',
    url(r'^admin/', include(admin.site.urls)),
    url(r'^launch_instances/', 'simdata.views.li_view'),

    # Uncomment the admin/doc line below to enable admin documentation:
    # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),
) 
```

周围也有类似的问题，但没有比这更奇怪的了。我是 django/ajax/jquery 的新手，所以可能遗漏了一些非常小的东西。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T21:27:29.757

您可能会遇到 Django 的自动 CSRF 保护（对于第一次使用 Django 处理 AJAX 请求的人来说这是一个常见问题）。您可能想查看[有关该主题的文档](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#ajax)，或者您可以使用装饰器标记您的视图方法`@csrf_exempt`（尽管如果该方法具有副作用或可能包含安全数据，则会引入安全问题）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T21:51:11.417

哦！哇。这是一个很小的错误，我花了一段时间盯着你的代码才发现它。您正在请求`/launch_instances`（注意末尾*没有*斜杠）。当 Django 遇到这种情况时，它会自动将请求重定向到`/launch_instances/`（带有斜杠），但通过重定向，POST 数据被丢弃。添加尾部斜杠，你应该是金色的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T05:56:47.873

添加 {% csrf_token %} 后，Django 会创建一个隐藏项，如下所示：

```
 < input type='hidden' name='csrfmiddlewaretoken' value='S1aE7jMFsF24X84CWKf2GxY1UoLzfpf9' / > 
```

因此，当您使用 javascript 发布表单时，隐藏的 csrf_token 也应该发布。尝试将此值与您的 jquery ajax 调用一起添加，如下所示：

```
 $.ajax({
        type:'POST',
        url: "/some/url/",
        data: {
            username: $("#username").val(),
            csrfmiddlewaretoken: $('[name="csrfmiddlewaretoken"]').val()
        },
    }) 
```

这应该有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-21T04:56:44.917

如果您的 CSRF 启用，那么简单的 ajax 发布将不起作用。您必须添加 csrf 令牌并将其设置为 ajax 请求标头。

对于 Ajax POST 请求，您必须将 CSRF 令牌作为 POST 数据与每个 POST 请求一起传递。因此，您必须先获取 CSRF 令牌。由于您已启用 CSRF 保护，因此您将从 csrftoken cookie 中获取令牌。CSRF 令牌 cookie 默认命名为 csrftoken。获取令牌非常简单，可以使用下面的代码片段来实现。

```
enter code here
function getCSRFCookie()
{
name = 'csrftoken';
var cookieValue = null;
    if (document.cookie && document.cookie != '') {
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookie = jQuery.trim(cookies[i]);

            if (cookie.substring(0, name.length + 1) == (name + '=')) {
                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                break;
            }
        }
    }
    return cookieValue;
}
var csrf_token = getCSRFCookie(); 
```

# tcl - 试图创建一个可编辑的弹出框

> ID：11785896
> 
> 赞同：0
> 
> 时间：2012-08-02T21:15:03.550
> 
> 标签：tcl, tk

对此仍然很陌生，我为自己创造了一个我无法解决的有趣问题......

我正在尝试设计自己的“弹出”框，允许用户编辑现有字符串。它在按下按钮时弹出，在输入框中显示字符串。一旦用户编辑了字符串（或没有），他点击“确定”按钮，它就消失了，脚本现在应该有新的字符串了。

我的方法是这样的：

按下按钮时，创建一个包含三个小部件的顶级窗口：

*   简单标签“编辑字符串，完成后按确定”；
*   包含预定义字符串的可编辑条目；
*   按钮“OK”，按下时会破坏顶层窗口。

我已经开始工作了，但不知道如何获取编辑后的字符串。

我意识到我的根本问题是我没有以“事件驱动”的方式思考。看起来这应该很容易做到，但此时我看不到森林。

我错过了什么？我是否过于复杂了？

```
#!/usr/bin/wish

# Create the Pop-up box
proc popUpEntry { labelString } {
  global myString

  puts "POP:myString = $myString"

  set top [toplevel .top]
  set labelPop [label $top.labelPop -text $labelString ]
  set entryPop [entry $top.entryPop -bg white -width 20 -textvar $myString ]
  set buttonPop [button $top.buttonPop -text "Ok" -command { destroy .top } ]

  pack $labelPop
  pack $entryPop
  pack $buttonPop
}

# Pop-up command
proc DoPop {} {
  global myString

  set popUpLabel "Edit string, press ok when done:"
  puts "Before: myString = $myString"  
  popUpEntry $popUpLabel
  puts "After: myString = $myString"
}

# Initalize
set myString "String at start"

# Pop-up button invokes the pop-up command
set buttonPop [button .buttonPop -width 10 -text "Pop" -command {DoPop} ]
pack $buttonPop

# 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T02:07:51.150

在这一行：

```
set entryPop [entry $top.entryPop -bg white -width 20 -textvar $myString ] 
```

您正在将`entry`控件设置为变量`-textvar`的**内容**`myString`。

您应该通过删除`$`符号将其设置为变量本身：

```
set entryPop [entry $top.entryPop -bg white -width 20 -textvar myString ] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-27T20:59:45.413

除了 -textvar $myString 之外，代码将不起作用，因为 popUpEntry 函数将在弹出窗口创建后立即返回 - 在用户有机会输入新内容之前。

您必须等待弹出窗口关闭。这可以通过 popUpEntry 中的另一个全局变量来完成：

```
...
global popup_closed
...
set buttonPop [button $top.buttonPop -text "Ok" -command {
      set edit_ready 1 
      destroy .top
      }

...

set edit_ready 0
popUpEntry $popUpLabel
vwait edit_ready 
```

# javascript - 监听任何 DOM 修改 - 对 DOM 进行哈希处理

> ID：11785897
> 
> 赞同：0
> 
> 时间：2012-08-02T21:15:04.270
> 
> 标签：javascript, jquery

我很想**知道**是否有一种有效的方法来检测 DOM 的任何变化。

阅读`DOMSubtreeModified`与现代浏览器不兼容的内容。

我在考虑`hashing`DOM 中包含的所有信息，并将其与计时器进行比较，与刷新后的 DOM 进行比较。

我只是想在 DOM 更改时触发一个事件。

您如何看待这种散列 DOM 方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T21:20:41.307

这个类似的问题应该会有所帮助： [Is there a JavaScript/jQuery DOM change listener？](https://stackoverflow.com/questions/2844565/is-there-a-jquery-dom-change-listener)

这也将使您朝着正确的方向前进：[http ://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-eventgroupings-mutationevents](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-eventgroupings-mutationevents)

这也可能对 MDN 有所帮助：[https ://developer.mozilla.org/en/DOM_Events](https://developer.mozilla.org/en/DOM_Events)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-04T08:33:47.350

由于性能问题，目前不推荐使用[Mutation Event 。](https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Mutation_events)因此，请使用[Mutation Observer](https://developer.mozilla.org/en/docs/Web/API/MutationObserver)。我在我的一个项目中使用 Mutation Observer 进行了 DOM 更改/修改侦听器，效果很好！为了您的进一步实施，这些链接将帮助您：

1.  [http://gabrieleromanato.name/jquery-detecting-new-elements-with-the-mutationobserver-object/](http://gabrieleromanato.name/jquery-detecting-new-elements-with-the-mutationobserver-object/)
2.  [是否有 JavaScript/jQuery DOM 更改监听器？](https://stackoverflow.com/questions/2844565/is-there-a-jquery-dom-change-listener/11546242#11546242)
3.  [https://github.com/kapetan/jquery-observe](https://github.com/kapetan/jquery-observe)

# backbone.js - Backbone.xmpp 和 strophe.vcard.js 用于 Backbone 插件：异步获取 vCard

> ID：11785898
> 
> 赞同：1
> 
> 时间：2012-08-02T21:15:09.620
> 
> 标签：backbone.js, xmpp

我成功地将 Backbone.xmpp 和 strophe.roster.js 用于 Backbone

```
var p = $.Deferred();                      
p = conn.roster.get();   
p.done(function(roster) {
   ...
}); 
```

现在我想用[strophe.vcard.js](http://ggozad.com/strophe.plugins/docs/strophe.vcard.html)为 Backbone 插件获取 vCard。同样的方法是行不通的。我试过 v0.1 和 v0.2 ......

```
var p = $.Deferred();                      
p = conn.vCard.get(someJid);   
p.done(function(vCard) {
   ...
}); 
```

# sql-server - 无法在 SQL Server 中执行基于集合的嵌套更新

> ID：11785908
> 
> 赞同：0
> 
> 时间：2012-08-02T21:15:50.503
> 
> 标签：sql-server, nested

我正在努力成为一名优秀的数据库开发人员并避免在此处使用循环或游标，但我不确定这是否可以做到。

我在表 A 中有代表指向不同处理队列的指针的行。在表 BI 中有需要处理的数据。表 A 中的行包含一个`datetime`名为的列`LastUsed`，用于指示处理队列上次用于处理数据的时间。每次将表 B 中的一行分配给特定队列时，都会更新此列`GETUTCDATE()`……这是我的循环队列问题的症结所在。

假设表 B 有 50 个数据行，表 A 有 5 个队列行。以基于集合的方式，我需要使用 an 将表 A 中的队列 ID 分配给表 B 中的所有 50 行，`UPDATE`并最终得到如下内容；

**表 B**

```
data record 1 - queue 1 
data record 2 - queue 2 
data record 3 - queue 3
data record 4 - queue 4
data record 5 - queue 5
data record 6 - queue 1
data record 7 - queue 2
data record 8 - queue 3
etc... 
```

基本上，`LastUsed`每次更新表 B 中数据行中的队列列时，必须更新表 A 中每个队列行的列，以便下一个数据行将接收来自表 A 的“新”最旧队列行。

我已尝试创建 UDF，但无法`UPDATE`从 UDF 内部使用该命令。我还`UPDATE`使用该子句尝试了表 A 的嵌套语句`OUTPUT`，希望将其包装在`UPDATE`表 B 的另一个语句中，但 SQL Server 通知我不能嵌套这样的更新。

我被困在这里了吗？我***必须***使用游标或循环吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T21:56:36.347

我认为您需要使用两个单独的语句，每个表一个。然后将其包装在事务中，以便获得原子性。也许将隔离级别提高到适当的级别。

您可以使用该函数实现循环分配`ROW_NUMBER`，并将其取模队列数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T22:07:44.297

```
BEGIN TRAN

create table tmp_queue (age datetime, id int)
go

insert into tmp_queue values(getutcdate(), 1)
insert into tmp_queue values(getutcdate(), 2)
insert into tmp_queue values(getutcdate(), 3)
insert into tmp_queue values(getutcdate(), 4)
insert into tmp_queue values(getutcdate(), 5)
go

create table tmp_data (id int, data varchar(15))
go

insert into tmp_data values(1, 'foo')
insert into tmp_data values(2, 'foo')
insert into tmp_data values(3, 'foo')
insert into tmp_data values(4, 'foo')
insert into tmp_data values(5, 'foo')
insert into tmp_data values(6, 'foo')
insert into tmp_data values(7, 'foo')
insert into tmp_data values(8, 'foo')
insert into tmp_data values(9, 'foo')
insert into tmp_data values(10, 'foo')
insert into tmp_data values(11, 'foo')
insert into tmp_data values(12, 'foo')
insert into tmp_data values(13, 'foo')
insert into tmp_data values(14, 'foo')
insert into tmp_data values(15, 'foo')
go

create table tmp_queued_data (queue_id int, data_id int, inserted datetime)
go

insert into tmp_queued_data (queue_id, data_id, inserted)
select (RANK() OVER ( PARTITION BY id /6 ORDER BY id asc )) as queue_for_me, id, getutcdate()
from tmp_data

update tmp_queue 
set age = (select MAX(inserted)
            from tmp_queued_data
            where queue_id = tmp_queue.id)

select * from tmp_queued_data
select * from tmp_queue

ROLLBACK 
```

这是假设你不关心那毫秒

# excel - 在 Excel 中使用不等式进行字符串比较

> ID：11785909
> 
> 赞同：4
> 
> 时间：2012-08-02T21:15:51.197
> 
> 标签：excel, excel-formula, string-comparison

有人可以提供有关 excel 如何使用 Excel 中的不等式运算符比较字符串的参考吗？我发现了一些意想不到的行为：

在下面的示例中，前两列是字符串，C 列是表达式`=A2<B2`，第三列是预期行为，最后一列是预期行为是否与实际匹配。

```
Comparison  Benchmark   Is A < B?   Expected    Pass?
Q1 2009     Q4 2012       TRUE      TRUE        TRUE
Q2 2009     Q4 2012       TRUE      TRUE        TRUE
Q3 2009     Q4 2012       TRUE      TRUE        TRUE
Q4 2009     Q4 2012       TRUE      TRUE        TRUE
Q1 2010     Q4 2012       TRUE      TRUE        TRUE
Q2 2010     Q4 2012       TRUE      TRUE        TRUE
Q3 2010     Q4 2012       TRUE      TRUE        TRUE
Q4 2010     Q4 2012       TRUE      TRUE        TRUE
Q1 2011     Q4 2012       TRUE      TRUE        TRUE
Q2 2011     Q4 2012       TRUE      TRUE        TRUE
Q3 2011     Q4 2012       TRUE      TRUE        TRUE
Q4 2011     Q4 2012       TRUE      TRUE        TRUE
Q1 2012     Q4 2012       TRUE      TRUE        TRUE
Q2 2012     Q4 2012       TRUE      TRUE        TRUE
Q3 2012     Q4 2012       TRUE      TRUE        TRUE
Q4 2012     Q4 2012       FALSE     FALSE       TRUE
Q1 2013     Q4 2012       TRUE      FALSE       FALSE
Q2 2013     Q4 2012       TRUE      FALSE       FALSE
Q3 2013     Q4 2012       TRUE      FALSE       FALSE
Q4 2013     Q4 2012       FALSE     FALSE       TRUE
Q1 2014     Q4 2012       TRUE      FALSE       FALSE
Q2 2014     Q4 2012       TRUE      FALSE       FALSE
Q3 2014     Q4 2012       TRUE      FALSE       FALSE 
```

对于基准之前的日期，Excel 似乎会比较整个字符串，而在基准日期之后，Excel 只会比较字符串，直到在比较中找到比类似字符少的单个字符。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T21:29:35.267

Excel在这里所做的是将两个字符串从左到右逐个字符进行比较，直到发现不匹配，然后具有较高值字符的字符串成为较大的字符串。这是比较字符串的标准方法——几乎所有编程语言、数据库和其他软件包都使用它。

因此，例如，对于第一行，比较将如下所示：

```
Comparison  Benchmark   Outcome
    Q           Q        Equal
    1           4        Benchmark is greater - done comparing
 [space]     [space]     Ignored
    2           2        Ignored
    0           0        Ignored
    0           1        Ignored
    9           2        Ignored 
```

对于第四行，它将是：

```
Comparison  Benchmark   Outcome
    Q           Q        Equal
    4           4        Equal
 [space]     [space]     Equal
    2           2        Equal
    0           0        Equal
    0           1        Benchmark is greater - done comparing
    9           2        Ignored 
```

最后一行是：

```
Comparison  Benchmark   Outcome
    Q           Q        Equal
    3           4        Benchmark is greater - done comparing
 [space]     [space]     Ignored
    2           2        Ignored
    0           0        Ignored
    1           1        Ignored
    4           2        Ignored 
```

# mysql - 如何更新字段以包含密码的哈希值

> ID：11785910
> 
> 赞同：0
> 
> 时间：2012-08-02T21:15:57.330
> 
> 标签：mysql, sql, database, hash

目前我有一个存储密码的数据库字段，如下所示：

```
TeacherPassword

j.lu01
pesci02
cricket01 
```

但我想更改密码字段，以便每一行都包含每个密码的哈希值。但是如何做到这一点，因为我尝试了如下更新但它不起作用：

```
UPDATE Teacher
SET SHA2 TeacherPassword 
```

我在 phpmyadmin 中使用 sql

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:23:38.433

MySQL有一个`SHA1()`功能

```
UPDATE Teacher
SET SHA1(TeacherPassword) 
```

甚至[`Password()`](http://dev.mysql.com/doc/refman/5.1/en/password-hashing.html)

```
UPDATE Teacher
SET Password(TeacherPassword) 
```

MySQL中的[加密函数](https://dev.mysql.com/doc/refman/5.5/en/encryption-functions.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T21:19:23.023

```
UPDATE Teacher
SET password = SHA2(TeacherPassword,512); 
```

# ruby-on-rails - 使用适用于 Ruby/Rails 的 Datanoise SOAP gem 时，特定的 SOAP Web 服务请求会导致 ECONNRESET 异常

> ID：11785911
> 
> 赞同：1
> 
> 时间：2012-08-02T21:15:58.313
> 
> 标签：ruby-on-rails, ruby, web-services, soap

我有一个 datanoise action-webservice 实现的 SOAP rails webservice，它通过将 XML SOAP 请求发布到第三方 URL 来与另一个 SOAP webservice 交互：

```
open("http://localhost:8080/generateResponse?xmlRequest="+CGI.escape(soapRQ.result(binding).gsub("\n",""))) 
```

这会定期导致异常（下面的堆栈跟踪）。我只是不明白是什么触发了这个 ECONNRESET：

```
Errno::ECONNRESET (Connection reset by peer):
  /usr/local/lib/ruby/1.8/net/protocol.rb:135:in `sysread'
  /usr/local/lib/ruby/1.8/net/protocol.rb:135:in `rbuf_fill'
  /usr/local/lib/ruby/1.8/timeout.rb:67:in `timeout'
  /usr/local/lib/ruby/1.8/timeout.rb:101:in `timeout'
  /usr/local/lib/ruby/1.8/net/protocol.rb:134:in `rbuf_fill'
  /usr/local/lib/ruby/1.8/net/protocol.rb:116:in `readuntil'
  /usr/local/lib/ruby/1.8/net/protocol.rb:126:in `readline'
  /usr/local/lib/ruby/1.8/net/http.rb:2028:in `read_status_line'
  /usr/local/lib/ruby/1.8/net/http.rb:2017:in `read_new'
  /usr/local/lib/ruby/1.8/net/http.rb:1051:in `request'
  /usr/local/lib/ruby/1.8/open-uri.rb:248:in `open_http'
  /usr/local/lib/ruby/1.8/net/http.rb:543:in `start'
  /usr/local/lib/ruby/1.8/open-uri.rb:242:in `open_http'
  /usr/local/lib/ruby/1.8/open-uri.rb:616:in `buffer_open'
  /usr/local/lib/ruby/1.8/open-uri.rb:164:in `open_loop'
  /usr/local/lib/ruby/1.8/open-uri.rb:162:in `catch'
  /usr/local/lib/ruby/1.8/open-uri.rb:162:in `open_loop'
  /usr/local/lib/ruby/1.8/open-uri.rb:132:in `open_uri'
  /usr/local/lib/ruby/1.8/open-uri.rb:518:in `open'
  /usr/local/lib/ruby/1.8/open-uri.rb:30:in `open'
  app/controllers/my_websvc_controller.rb:2354:in `postRequest'
 /usr/local/lib/ruby/gems/1.8/gems/datanoise-actionwebservice-2.3.2/lib/action_web_service/invocation.rb:141:in `send'
 /usr/local/lib/ruby/gems/1.8/gems/datanoise-actionwebservice-2.3.2/lib/action_web_service/invocation.rb:141:in `perform_invocation_without_interception'
 /usr/local/lib/ruby/gems/1.8/gems/datanoise-actionwebservice-2.3.2/lib/action_web_service/invocation.rb:135:in `perform_invocation'
 /usr/local/lib/ruby/gems/1.8/gems/datanoise-actionwebservice-2.3.2/lib/action_web_service/dispatcher/abstract.rb:46:in `web_service_filtered_invoke'
 /usr/local/lib/ruby/gems/1.8/gems/datanoise-actionwebservice-2.3.2/lib/action_web_service/dispatcher/abstract.rb:37:in `web_service_direct_invoke_without_controller'
 /usr/local/lib/ruby/gems/1.8/gems/datanoise-actionwebservice-2.3.2/lib/action_web_service/dispatcher/action_controller_dispatcher.rb:112:in `web_service_direct_invoke'
 /usr/local/lib/ruby/gems/1.8/gems/datanoise-actionwebservice-2.3.2/lib/action_web_service/dispatcher/abstract.rb:58:in `web_service_invoke'
 /usr/local/lib/ruby/gems/1.8/gems/datanoise-actionwebservice-2.3.2/lib/action_web_service/dispatcher/abstract.rb:25:in `invoke_web_service_request'
 /usr/local/lib/ruby/gems/1.8/gems/datanoise-actionwebservice-2.3.2/lib/action_web_service/dispatcher/action_controller_dispatcher.rb:58:in `dispatch_web_service_request'
 /usr/local/lib/ruby/gems/1.8/gems/datanoise-actionwebservice-2.3.2/lib/action_web_service/dispatcher/action_controller_dispatcher.rb:56:in `dispatch_web_service_request'
(eval):1:in `api' 
```

服务器端位于 RHEL5 主机上。Rails 2.3.5 和 Ruby 1.8.7。第三部分是部署到 JBOSS 4.3 中的简单 java 战争

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T19:16:34.137

我发现问题是因为从 xmlRequest 参数的 ERB 绑定结果生成的 URL 的大小 - 对于使用 open 的 URL 来说显然太长了。我切换到 POST 并且工作正常。

# ruby-on-rails - ActionController::RoutingError 与 rspec

> ID：11785914
> 
> 赞同：0
> 
> 时间：2012-08-02T21:16:03.023
> 
> 标签：ruby-on-rails, testing, rspec, routes

我正在使用 rspec 进行测试，我经常遇到的问题是路线，这是我的 rspec

```
describe "POST 'create'" do

    describe "success" do

        before(:each) do
            @user = User.create!(:email => "foo@example.com", :password => "foobar", :password_confirmation => "foobar" )
            @car = Car.create!(:brand => "example", :color => "foobar", :model => "foobar", :year =>"2012")
        end

        it "should create a car" do
            lambda do
            post :create, :cars => @car, :user_id => @user.id
            end.should change(Car, :count).by(1)
        end

        it "should redirect to the user welcome page" do
            post :create, :cars => @car, :user_id => @user.id
            response.should redirect_to user_car_path
        end
    end
end 
```

我的路线.rb ...

```
Estaciones::Application.routes.draw do
root :to => "static_pages#home"
match '/contact', :to=>'static_pages#contact'
match '/about', :to=>'static_pages#about'
devise_for :users
resources :gas_stations
resources :users do
  resources :cars do
    resources :tanking_logs
  end
end
.... 
```

**更新**

当我运行测试时，出现此错误：

```
1) CarsController POST 'create' success should create a car
 Failure/Error: post :create, :cars => @car, :user => @user
 ActionController::RoutingError:
   No route matches {:cars=>"12", :user=>"74", :controller=>"cars", :action=>"create"}
 # ./spec/controllers/car_controller_spec.rb:22:in `block (5 levels) in <top (required)>'
 # ./spec/controllers/car_controller_spec.rb:21:in `block (4 levels) in <top (required)>'

2) CarsController POST 'create' success should redirect to the user welcome page
 Failure/Error: post :create, :cars => @car, :user => @user
 ActionController::RoutingError:
   No route matches {:cars=>"13", :user=>"75", :controller=>"cars", :action=>"create"}
 # ./spec/controllers/car_controller_spec.rb:27:in `block (4 levels) in <top (required)>' 
```

这是我的汽车控制器

```
class CarsController < ApplicationController
def new
  @user = User.find(params[:user_id])
  @car = @user.cars.build
end

def create
  @user = User.find(params[:user_id])
  @car = @user.cars.build(params[:car])
  if @car.save
    redirect_to user_car_path(@user, @car), :flash => { :notice => "  car created!" }
  else
    redirect_to new_user_car_path ,:flash => { :notice => " sorry try again :(" }
  end
end 
```

……

我用您给我的解决方案对其进行了编辑，但仍然没有

这是我的耙子路线

```
user_cars GET    /users/:user_id/cars(.:format)                               cars#index
                      POST   /users/:user_id/cars(.:format)                               cars#create
         new_user_car GET    /users/:user_id/cars/new(.:format)                           cars#new
        edit_user_car GET    /users/:user_id/cars/:id/edit(.:format)                      cars#edit
             user_car GET    /users/:user_id/cars/:id(.:format)                           cars#show
                      PUT    /users/:user_id/cars/:id(.:format)                           cars#update
                      DELETE /users/:user_id/cars/:id(.:format)                           cars#destroy 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T21:42:53.543

看起来您的`:cars`资源嵌套在`:users`资源中：

```
resources :users do
  resources :cars do
... 
```

如果您以这种方式构建您的路由，那么您还需要在调用 http 操作时指定一个用户。这不起作用：

```
post :create, :car => @car 
```

因为它缺少 a `:user_id`，您可以在控制器中访问它：

```
@user = User.find(params[:user_id]) 
```

为了解决这个问题，传递一个`:user_id`然后模拟或存根`User`返回一个用户或模拟用户。

更新：

混合模拟和实际记录通常不是一个好习惯，所以这里是你如何在没有模拟的情况下做到这一点：

```
before(:each) do
  @user = User.create(...)
  @car = {:brand => "example", :color => "foobar", :model => "foobar", :year =>"2012" }
end

it "should create a car" do
  lambda do
    post :create, :car => @car, :user_id => @user.id
  end.should change(Car, :count).by(1)
end

it "should redirect to the user welcome page" do
  post :create, :car => @car, :user_id => @user.id
  response.should redirect_to user_car_path
end 
```

将创建用户所需的任何最小属性插入`User.create(...)`. 我认为应该这样做。

如果您想使用模拟来执行此操作（这通常是更好的做法，以保持控制器/模型规范解耦），这里是[一个很好的起点](http://www.vaporbase.com/postings/Rspec_example_for_nested_resource_index_action)。

# unit-testing - Meteor 中的单元测试应该放在哪里？

> ID：11785917
> 
> 赞同：21
> 
> 时间：2012-08-02T21:16:09.983
> 
> 标签：unit-testing, meteor, mocha.js, should.js

**有没有一个地方可以让我的测试不被 Meteor 运行？**

我刚刚开始了我的第一个 Meteor 项目，并开始使用[Mocha](http://visionmedia.github.com/mocha/)和[should.js](https://github.com/visionmedia/should.js#readme)编写单元测试。虽然 mocha 运行没有问题，但测试阻止 Meteor 启动，因为它使用节点`require` 而不是`__meteor_bootstrap__.require`（[完整的错误消息](https://gist.github.com/3240588)）存在问题。

话虽如此，*Meteor 不应该运行我的测试！*根据[Meteor 文档](http://docs.meteor.com/#structuringyourapp)，代码只能放在客户端、服务器或两者上。单元测试套件不属于这些类别，而且我[不是唯一一个](https://stackoverflow.com/questions/10128768/how-does-one-do-testing-in-meteor-is-there-an-easy-way-to-plug-in-jasmine-or-mo)因 Meteor 缺乏用于放置自动化测试的明确位置而感到困惑的人。

现在，我的测试保存在 中`server/test/`，每个文件的内容都包含在块中：

```
if (typeof(Meteor) === 'undefined') { ... } 
```

虽然这有效，但感觉并不优雅。对于使用 Meteor 应用程序构建测试，您还有其他建议吗？

**更新：**代替 Meteor 文档中的明确说明，我遵循[Rails 文件夹约定](http://guides.rubyonrails.org/getting_started.html#creating-the-blog-application)（第 4 段），使用称为`test`存储我的测试资产的文件夹。后来我把它移到了，`server/test`因为我不想把它加载到客户端上。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-05T19:36:24.090

**将您的测试放在`tests/`文件夹**中。`test`与使用为此目的命名的文件夹的 Rails 不同，Meteor 使用复数`tests`作为该文件夹名称。

Meteor 将完全忽略存储在名为“tests”的文件夹中的资产；这些资产不会加载到客户端*或*服务器上。

具有讽刺意味的是，有人向我提供了[相反的问题](https://github.com/meteor/meteor/issues/90)，他们希望 Meteor 客户端加载他们的测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-07T11:58:14.273

从 0.6.0 开始，一个有趣的方法是为您的应用程序专门使用本地智能包，可以使用 Meteor 的 tinytest 轻松测试。您将拥有位于智能包之外的最少代码来引导您的应用程序。

编辑：我已经完成了这种方法，我什至不需要驻留在智能包之外的最低限度的代码。整个应用程序是包。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-01T19:05:57.910

将您的测试文件放在`tests`文件夹中，您应该没问题。如果您的应用程序中有多个文件嵌套在`server`or`client`文件夹中，您可以在`tests/client`or`tests/server`目录中复制类似的文件夹结构。不是规则，但我认为它有助于维护，并且我有过花费数小时调试丢失类错误的经验，这只是通过在测试文件夹中组织文件结构来解决的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-07T13:24:24.380

由于这是 2012 年的问题，这里没有一个全面的答案，我想在这里尝试一个。

这是开始考虑测试您的流星项目的一个[很好的起点。](https://github.com/xolvio/meteor-jasmine)

简而言之 Step1：meteor add sanjo:jasmine Step2：meteor add velocity:html-reporter

执行此操作的那一刻，如果您的应用程序正在运行（或者每当您重新启动应用程序时），在浏览器的右上角（您打开应用程序的位置已打开），您将开始看到一个闪烁的点。就是这样。你现在已经有了你的测试框架。

现在，您实际上也可以借助此框架生成目录结构。单击那个闪烁的点的那一刻，您将看到如下所示的弹出窗口。

[![速度测试状态](../Images/e9b43d41bf8ee7e273896ca29eca2255.png)](https://i.stack.imgur.com/NLk5u.png)

这有用于生成测试目录结构的便捷链接。

或者，您可以手动进行如下操作。接下来是决定目录结构。[Meteor Documentation 说得够多了。您需要在项目根目录中有测试文件夹](http://docs.meteor.com/#/full/structuringyourapp)。

从[这里](https://github.com/thegrtman/javascript-test-framework-comparison)得到提示，你可以这样走。

```
<projectRoot>
|---jasmine
      |---client
             |--- integration
                      |---- my.first.integration.spec.js
      |---client
             |--- unit
                      |---- my.first.unit.spec.js
|---jasmine
      |---server
             |--- integration
                      |---- my.first.integration.spec.js
      |---server
             |--- unit
                      |---- my.first.unit.spec.js 
```

还有 Viola，开始编写你的 jasmine 测试。这些帖子可以进一步帮助你。

*   [帖子1](http://www.bradoncode.com/blog/2015/05/12/angularjs-testing-getting-started/)
*   [茉莉花文档](http://jasmine.github.io/2.3/introduction.html)
*   [这是另一个很好的教程](http://www.webtempest.com/meteor-js-testing)

# c++ - 使用 Qt、MFC 和 CMake 尝试/捕捉

> ID：11785918
> 
> 赞同：0
> 
> 时间：2012-08-02T21:16:11.140
> 
> 标签：c++, qt, mfc, cmake

我使用 CMake 来创建我的项目。在项目中，我主要使用 Qt C++ 和一些 MFC 函数作为硬件接口。**在代码中使用try/catch e->ReportError()**或其他一些异常语句是否有意义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:43:56.470

如果您使用 MFC 创建一个对话框，那么您将只想抛出指向 CException 派生对象的指针（如果您抛出任何东西）。这是因为该`DoModal`函数包含一个 catch 来恢复关键应用程序状态，然后重新抛出；如果您抛出任何其他类型的异常，它将被遗漏并且您的应用程序将被挂起。

我不知道Qt是否有类似的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T15:21:22.260

您当然可以将异常与 Qt 一起使用。问题只是，它们有多大用处。例如，考虑以下类

```
class Thrower : public QObject
{
    Q_OBJECT
public slots:
    void throwException()
    {
        throw 42;
    }
}; 
```

异常在插槽内引发。要捕获此异常，您必须将触发插槽的信号包装在一个`try`块中，例如

```
class Catcher : public QObject
{
    Q_OBJECT
public:
    Catcher(Thrower* t)
    {
        connect(this, SIGNAL(test()), t, SLOT(throwException()));
    }

    void catchTest()
    {
        try
        {
            emit test(); // Will trigger Thrower::throwException().
        }
        catch (int number)
        {
            qDebug() << "Caught" << number;
        }
    }

signals:
    void test();
}; 
```

不幸的是，并不总是可以使用这种方法。例如，当你连接`QPushButton::clicked()`到时`Thrower::throwException()`，点击按钮会导致事件循环崩溃。

您可以包装`QApplication::exec()`在一个`try`-block 中，但是当您捕获异常时，GUI 很可能已经被破坏，因此实际上不可能从异常中恢复。

还可以查看有关异常安全的[Qt 文档。](http://doc-snapshot.qt-project.org/4.8/exceptionsafety.html)

# javascript - Symfony2资产导致javascript错误

> ID：11785923
> 
> 赞同：0
> 
> 时间：2012-08-02T21:16:24.383
> 
> 标签：javascript, symfony, twig, assetic

我有一个问题，我在那里两天无法解决它：

我有一个使用 javascripts 的带有树枝的页面，prod 并在页面上给出错误，在 dev 上没有给出错误

我尝试使用资产并给出错误

我试过从网上获取资产文件，也给出了错误

基础文件： http: [//pastebin.com/Xyjg0U0L](http://pastebin.com/Xyjg0U0L)

页面错误： http: [//pastebin.com/Vj73EuPk](http://pastebin.com/Vj73EuPk)

dev.itenho.com.br/

dev.itenho.com.br/app_dev.php

我在ubuntu meld中比较了html和css的两个版本并且是相同的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T11:41:15.063

我只能猜测，因为您的错误描述有点模糊。

但是，当您在 prod 环境中遇到资产错误时，这是​​一个“经典”：
您可以做两件事：

尝试添加您的 config_prod.yml：

```
assetic:
    use_controller: true 
```

或致电：

```
php app/console assetic:dump --env=prod --no-debug 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-11T14:54:40.547

我有同样的问题，我用分号解决了；在 js 文件的末尾。检查你所有的js文件并放一个分号；在那些没有文件的末尾。

# java - 使用 Java Robots 覆盖在浏览器之上

> ID：11785926
> 
> 赞同：0
> 
> 时间：2012-08-02T21:16:35.737
> 
> 标签：java, drawing, awtrobot

我有一些浏览器 Flash 游戏。在这个游戏中，有一些玩家/物体，我可以控制其中一个。我想为这个游戏写机器人。Bot 将“读取”游戏状态（捕获屏幕的一部分并找到玩家的位置），并引导我的对象（通过 java Robot）。

现在我想在屏幕上绘制一些圆圈的对象计算位置。仅用于调试目的。我想确定一切是否正常。就像球员一样，球场会移动。但是怎么做呢？

我可以创建大透明窗口，然后我可以绘制调试，我可以阅读游戏。但我无法控制游戏，因为浏览器不在顶部。如果我的浏览器在顶部，那么我就看不到调试图。我想要我的浏览器位于顶部的解决方案，并且我的调试图纸也在浏览器上可见。

甚至可能吗？

谢谢

# google-app-engine - 管理控制台 GQL 查询：按日期订购时未找到索引

> ID：11785928
> 
> 赞同：0
> 
> 时间：2012-08-02T21:16:42.433
> 
> 标签：google-app-engine, google-cloud-datastore, gql, gqlquery

我的 datastore-indexes.xml 看起来像这样：

```
<datastore-index kind="Book" ancestor="false" source="auto">
    <property name="^i" direction="asc"/>
    <property name="nurInRange2" direction="asc"/>
    <property name="firstModificationDate" direction="desc"/>
</datastore-index> 
```

数据存储管理控制台实际上在数据/数据存储索引下显示了这一点：

```
^i ▲ , nurInRange2 ▲ , firstModificationDate ▼ : serving 
```

但是，当我转到数据存储查看器并执行`by gql`查询时：

```
SELECT * FROM Book where nurInRange2 = True  order by firstModificationDate DESC 
```

我得到以下回复：

```
no matching index found.
The suggested index for this query is:
    - kind: Book
    properties:
      - name: nurInRange5
      - name: firstModificationDate
        direction: desc 
```

我有什么明显的遗漏吗？我的指数公式有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T06:25:10.180

如果要对其进行排序，则必须在过滤器中使用“firstModificationDate”。

有关详细信息，请参阅[查询限制。](https://developers.google.com/appengine/docs/java/datastore/queries#Restrictions_on_Queries)

# ruby-on-rails - rails 投票 gem，thumbs_up，没有用户。还有，路由错误

> ID：11785929
> 
> 赞同：1
> 
> 时间：2012-08-02T21:16:43.077
> 
> 标签：ruby-on-rails

是否可以在没有用户登录的情况下使用 thumbs_up gem？基本上，我希望任何人都无需登录即可投票，例如[http://www.yourather.com](http://www.yourather.com)。

最后，当我尝试对评论进行投票时，我收到一条路由错误消息，在对文章进行投票时也会发生同样的情况。

```
No route matches [GET] "/comments/1/vote_up" 
```

模型：

```
class Comment < ActiveRecord::Base
  acts_as_voteable
end

class Article < ActiveRecord::Base
  acts_as_voteable
end 
```

看法：

```
<%= link_to image_tag("up_arrow.jpeg"), vote_up_comment_path(@comment), 
    :method => 'post' %></br>
<%= link_to image_tag("down_arrow.jpeg"), vote_down_comment_path(@comment), 
    :method => 'post' %></br> 
```

控制器：

```
def vote_up
  begin
    vote_for(@comment = Comment.find(params[:id]))
    render :nothing => true, :status => 200
  rescue ActiveRecord::RecordInvalid
    render :nothing => true, :status => 404
  end
end

def vote_down
  begin
    vote_against(@comment = Comment.find(params[:id]))
    render :nothing => true, :status => 200
  rescue ActiveRecord::RecordInvalid
    render :nothing => true, :status => 404
  end
end 
```

路线.rb：

```
resources :comments do
  member do
    post :vote_up
    post :vote_down
  end
end

resources :articles do
  member do
    post :vote_up
    post :vote_down
  end
end 
```

Rake Routes（相关部分）：

```
vote_up_comment   POST    /comments/:id/vote_up(.:format)      comments#vote_up
vote_down_comment POST    /comments/:id/vote_down(.:format)    comments#vote_down
comments          GET     /comments(.:format)                  comments#index
                  POST    /comments(.:format)                  comments#create
new_comment       GET     /comments/new(.:format)              comments#new
edit_comment      GET     /comments/:id/edit(.:format)         comments#edit
comment           GET     /comments/:id(.:format)              comments#show
                  PUT     /comments/:id(.:format)              comments#update
                  DELETE  /comments/:id(.:format)              comments#destroy
vote_up_article   POST    /articles/:id/vote_up(.:format)      articles#vote_up
vote_down_article POST    /articles/:id/vote_down(.:format)    articles#vote_down
articles          GET     /articles(.:format)                  articles#index
                  POST    /articles(.:format)                  articles#create
new_article       GET     /articles/new(.:format)              articles#new
edit_article      GET     /articles/:id/edit(.:format)         articles#edit
article           GET     /articles/:id(.:format)              articles#show
                  PUT     /articles/:id(.:format)              articles#update
                  DELETE  /articles/:id(.:format)              articles#destroy
root                      /                                    voteables#index
                          /comment/:id(.:format)               comments#show
                          /article/:id(.:format)               articles#show 
```

我已经查看了[关于如何在 Rails 3](https://stackoverflow.com/questions/4907744/clarification-on-how-to-use-thumbs-up-voting-gem-with-rails-3/9698091#9698091)和其他相关问题中使用“thumbs_up”投票宝石的澄清，但我无法使其工作。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T16:50:27.417

[link_to 上](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to)的文档说 :method 选项应该是一个符号。尝试从以下位置更改视图：

```
<%= link_to image_tag("up_arrow.jpeg"), vote_up_comment_path(@comment), 
:method => 'post' %></br> 
```

至

```
<%= link_to image_tag("up_arrow.jpeg"), vote_up_comment_path(@comment), 
:method => :post %></br> 
```

# sql - 想要对列执行 > 和 < 操作，但需要 SQL 读取为日期

> ID：11785930
> 
> 赞同：1
> 
> 时间：2012-08-02T21:16:45.623
> 
> 标签：sql, date, casting

试图弄清楚如何让 SQL 读取一个值作为日期。

我有一个具有这样列的数据库：

```
id  created_at
1   2010-12-16
2   2010-12-16
3   2010-12-17
4   2010-12-21
5   2010-12-23
6   2011-01-04 
```

我没有使用 SQL 创建表；它以文本形式生成并导入到 SQL 服务器。我不确定如何编写我的查询，以便它知道 created_at 是一个日期，所以我可以使用诸如“WHERE created_at <'2010-10-17' 等子句，就像我可以从普通 SQL 数据库中做的那样。 Cast 是去这里的路线吗？就像在 SELECT Cast(created_at as ...something?) 中一样，在其他地方找不到任何有用的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T21:21:26.347

```
SELECT CAST (created_at as DATETIME) 
```

...应该给你你想要的价值。但是，如果您将它们作为 WHERE 子句的一部分进行转换，性能将会很差。您可能希望将另一个特定于日期的列添加到表中，例如“created_at_date”并将您的查询连接到它。

如果这不起作用并引发转换错误，则可能是因为列中的一个或多个值与您在上面显示的格式不一致。它可以是 NULL 或空白或只是垃圾格式。您最好的选择是添加像 JohnLBevan 这样的列，我都建议并尽可能多地转换。然后您可以查询未转换的项目。

另外，您是否考虑过生成数字表或日期表？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T21:24:09.773

如果使用 SQL Server，您可以将列转换为您猜到的日期：

```
select cast(created_at as date) 
from myTable

select * 
from myTable 
where cast(created_at as date) >= '2012-01-01' 
```

但是，每次查询表格时都需要这样做，这是非常低效的。最好重新定义表格以使该列默认为日期类型。如果您可以在此处发布您的表的 DDL 语句（用于创建表的 sql），我可以为您编写转换代码。或者，使用下面的代码在创建后更改表：

```
alter table myTable 
alter column created_at date 
```

干杯，

JB

根据评论进行编辑。如果您无法更改数据类型并且它是 ntext 列，请先使用 substring 转换为 nvarchar，然后使用 cast 函数：

```
select * 
from myTable 
where cast(substring(created_at,1,10) as date) >= '2012-01-01' 
```

# c# - 从 asp.net 将数据导出到 excel 时添加自定义文本

> ID：11785931
> 
> 赞同：3
> 
> 时间：2012-08-02T21:16:46.670
> 
> 标签：c#, asp.net, gridview, export-to-excel

我的 asp.net 应用程序将 gridview 数据导出到一个 excel 文件。但是，我还需要在显示 gridview 值之前输入客户信息。

```
gvCustomerPayment.DataSource = ViewState["data"];
gvCustomerPayment.AllowPaging = false;
gvCustomerPayment.DataBind();

gvCustomerPayment.RenderControl(hw);
gvCustomerPayment.Rows[2].Cells[0].Text = Convert.ToString("Customer Name: " + dr["FirstName"] + dr["LastName"]); 
```

gridview 数据显示得非常好。我的代码块中的最后一行**Convert.ToString("Customer Name:");** 需要在单元格 A2 中（见下图中红色部分）。

![在此处输入图像描述](../Images/504092c38ae64a45d87cd8c9ea7447ea.png)

我搜索了 S/O 和谷歌，但没有任何帮助。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T02:45:03.880

我认为有两种方法。

1.  您可以使用带有宏代码的 excel 模板。但是这种方式很烦人。

2.  您可以使用 NPOI 库将一些值写入指定的单元格。NPOI 非常易于使用。这是链接： http: [//npoi.codeplex.com/](http://npoi.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-31T09:28:58.483

将控件放在要导出的所有详细信息的 div 中。将 div 导出到 Excel。

让aspx文件变成这样

```
 <div id="divExport" runat="server">
    <div id="dvheads" runat="server">
        <b>
          <label id="lblCustomerName" runat="server"></label><br /><br />
          <label id="lblAddress" runat="server"></label><br /><br />
          <label id="lblPin" runat="server"></label>
            </b>
    </div>
        <br />

        <asp:GridView ID="GVLoans" runat="server" CellPadding="4" ForeColor="#333333"  AutoGenerateColumns="False" >
            <AlternatingRowStyle BackColor="White" />
            <EditRowStyle BackColor="#2461BF" />
            <FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
            <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
            <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
            <RowStyle BackColor="#EFF3FB" HorizontalAlign="left" />
            <SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" />
            <SortedAscendingCellStyle BackColor="#F5F7FB" />
            <SortedAscendingHeaderStyle BackColor="#6D95E1" />
            <SortedDescendingCellStyle BackColor="#E9EBEF" />
            <SortedDescendingHeaderStyle BackColor="#4870BE" />
            <Columns>
                <asp:TemplateField>
            <HeaderTemplate>Sl No</HeaderTemplate>
            <ItemTemplate>
            <asp:Label ID="lblSRNO" runat="server" 
                Text='<%#Container.DataItemIndex+1 %>'></asp:Label>
            </ItemTemplate>
                    <ItemStyle HorizontalAlign="Center" />
            </asp:TemplateField>
            </Columns>
        </asp:GridView>

        <br />
        </div> 
```

在 .cs 文件中，导出代码如下所示

```
 protected void btnSave_Click(object sender, EventArgs e)
 {
    Response.Clear();
    Response.AddHeader("content-isposition",attachment;filename=testExport.xls");
    Response.Charset = "";
    Response.ContentType = "application/vnd.xls";
    System.IO.StringWriter stringWrite = new System.IO.StringWriter();
    System.Web.UI.HtmlTextWriter htmlWrite = new HtmlTextWriter(stringWrite);
    divExport.RenderControl(htmlWrite);
    Response.Write(stringWrite.ToString());
    Response.End();
 } 
```

# c - 如何判断一个进程是否在 C 中运行？

> ID：11785936
> 
> 赞同：9
> 
> 时间：2012-08-02T21:16:56.673
> 
> 标签：c, linux, process

我想知道一个进程是否正在运行。我不想使用任何系统（“”）命令。是否有任何基于 C 的函数可以让您知道进程是否正在运行？

我想提供进程名称并想知道它是否正在运行。

谢谢，

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-02T21:21:42.253

当然，使用[`kill(2)`](http://man7.org/linux/man-pages/man2/kill.2.html)：

```
 #include <sys/types.h>
 #include <signal.h>

 int kill(pid_t pid, int sig); 
```

> 如果 sig 为 0，则不发送信号，但仍进行错误检查；这可用于检查进程 ID 或进程组 ID 是否存在。

因此，只需调用`kill(pid, 0)`您要检查的进程的进程 ID 并查看是否收到错误 ( `ESRCH`)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T21:29:53.907

在 Linux 上，另一种方法可能包括检查`/proc`目录的内容。编号的目录是进程 ID，而包含`cmdline`文件的子目录显示命令的名称。

例如，如果`/proc/1234/cmdline`包含 value `foo`，则 process`foo`的 ID 为 1234。您可以使用 C 中的标准文件访问函数将名称映射到 PID。有关[`proc(5)`](http://linux.die.net/man/5/proc)更多信息，请参阅。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-02T21:30:37.610

你可能会觉得这很有趣： http: [//programming-in-linux.blogspot.com/2008/03/get-process-id-by-name-in-c.html](http://programming-in-linux.blogspot.com/2008/03/get-process-id-by-name-in-c.html)

执行此操作的“常规和最佳方法”是阅读`/proc`文件夹。您可以查看[此问题](https://stackoverflow.com/questions/939778/linux-api-to-list-running-processes)以了解更多信息，其中引用了[http://procps.sourceforge.net/](http://procps.sourceforge.net/)，您可能会感兴趣

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T21:28:34.253

您可以扫描`/proc`文件系统中所有当前正在运行的进程，并查看该`cmdline`条目是否与您想要的特定进程匹配。

但是，有一个竞争条件。在您决定它正在运行后，该进程可能会终止。

确定您的进程是否仍在运行的可靠方法是成为启动该进程的方法。然后，当一个孩子死了，你会得到`SIGCHLD`，你可以`waitpid(-1,..)`用来找出哪个孩子死了。

# ruby-on-rails - 推送到heroku master时没有得到“添加了Git远程heroku”并出现错误：“致命：远程端意外挂断”

> ID：11785938
> 
> 赞同：1
> 
> 时间：2012-08-02T21:16:59.450
> 
> 标签：ruby-on-rails, ruby, heroku

我是 Heroku 和 Ruby on Rails 的新手。当我运行“heroku create”时，我没有得到“Git remote heroku added”。此外，当我尝试“git push heroku master”时，我得到“致命：远程端意外挂断”。在像 Stackflow 这样的网站上也有类似的情况，但有额外的错误消息。我的只有“致命：远程端意外挂断”。我也已经编辑了 gem 文件。我注意到，它没有加载我要安装的“first_app”，而是安装了 http://murmuring-ravine-4822.herokuapp.com | git@heroku.com:murmuring-ravine-4822.git。请帮忙，亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:47:39.023

尝试创建您的 SSH 密钥并上传到 Heroku。

[https://devcenter.heroku.com/articles/keys](https://devcenter.heroku.com/articles/keys)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-02T17:55:24.407

使用以下命令将应用程序添加到 Heroku git 远程存储库。

```
heroku git:remote -a your-app-name 
```

然后将应用程序推送到 Heroku 主存储库。

有用的链接：[创建 Heroku 远程](https://devcenter.heroku.com/articles/git#creating-a-heroku-remote)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-08-10T19:16:49.070

取自[Quora](https://www.quora.com/How-do-I-solve-the-problem-Heroku-does-not-appear-to-be-a-git-repository)（2018 年 8 月为我工作）：

Vinayak Sinha 说：“你的 heroku 应用有一个 git 存储库，你可以在应用设置中找到它。

在您的本地 git 中，添加该 git 存储库的远程，然后您可以获取和推送：

```
git remote add heroku (<=this is the remote name) remote_url" 
```

# php - 与 Ajax 合作

> ID：11785940
> 
> 赞同：0
> 
> 时间：2012-08-02T21:17:14.600
> 
> 标签：php, javascript, jquery, ajax

我有一个帖子，我需要在我的成功函数中发布时间。对于 php，我的原始链接看起来像这样。

```
echo "<br/><a href='#' class='subtleLink' style='font-weight:normal;'>".Agotime($streamitem_data['streamitem_timestamp'])."</a>"; 
```

我正在构建我的 ajax，在我的成功函数中，我还需要添加 Agotime，但我不知道该怎么做，我有时间戳，只需要函数 Agotime 来完成它的工作。

AJAX

```
 <br/><a class='subtleLink' style='font-weight:normal;'>"+response['streamitem_timestamp']+"</a> 
```

我的 Agotime 是一个函数

```
 function Agotime($date)
{
    if(empty($date)) {
        return "No date provided";
    }

    $periods         = array("second", "minute", "hour", "day", "week", "month", "year", "decade");
    $lengths         = array("60","60","24","7","4.35","12","10");

    $now             = time();
    $unix_date       = strtotime($date);

       // check validity of date
    if(empty($unix_date)) {    
        return "Bad date";
    }

    // is it future date or past date
    if($now > $unix_date) {    
        $difference     = $now - $unix_date;
        $tense         = "ago";

    } else {
        $difference     = $unix_date - $now;
        $tense         = "from now";
    }

    for($j = 0; $difference >= $lengths[$j] && $j < count($lengths)-1; $j++) {
        $difference /= $lengths[$j];
    }

    $difference = round($difference);

    if($difference != 1) {
        $periods[$j].= "s";
    }

    return "$difference $periods[$j] {$tense}";
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T09:42:04.313

我已经想通了。当我的 Ajax 调用时，我将 Agotime 添加到我的插入页面中。很有魅力。

```
$json = array();
$check = "SELECT streamitem_id, streamitem_timestamp FROM streamdata";
$check1 = mysql_query($check);
$resultArr = mysql_fetch_array($check1);
$json['streamitem_id'] = $resultArr['streamitem_id'];
$json['streamitem_timestamp'] = Agotime($resultArr['streamitem_timestamp']); 
```

# iphone - 从 iOS 设备上为测试中的应用程序获取文件

> ID：11785943
> 
> 赞同：1
> 
> 时间：2012-08-02T21:17:58.073
> 
> 标签：iphone

我将文件保存到 Documents 目录，并想在实际设备上查看文件本身。我知道如何在模拟器中执行此操作，方法是转到 iPhone Simulator directory->App->Documents->files。但是有没有办法在设备上做到这一点？我似乎无法弄清楚。在 iTunes 中，我看不到我的应用程序，因为它是一个正在测试的应用程序。如果我将它插入 Windows 机器，我只能看到存储在设备上的图片和电影，而不是任何特定于我的应用程序的有意义的东西。只是不知道是否有办法从设备中获取文件。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-03T23:56:37.407

在 XCode 6.1.1 中（可能从 6 开始，但 6.1.1 是我现在拥有的），如果您希望将文件保存到设备的文档目录中，您可以...

*   选择`Window`->`Devices`
*   选择您的设备
*   在该`Installed Apps`部分中，选择您的应用。
*   使用齿轮图标`Download Container`（这是应用程序的容器）
    *   将其保存到您的桌面或您可以找到它的地方。
*   应用程序容器将在 Finder 中打开。

从那里，您可以查看 Documents 目录、Library、tmp 等，它们都在更高级别的文件夹中，`AppData`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T21:21:25.503

您可以通过 Xcode 的管理器窗口或在您的文件中启用 iTunes 文件共享`Info.plist`并在 iTunes 中转到您设备上的“应用程序”选项卡来执行此操作。

# asp.net - MVC 模式、控制器方法和“GetBy...”

> ID：11785950
> 
> 赞同：1
> 
> 时间：2012-08-02T21:18:36.173
> 
> 标签：asp.net, asp.net-mvc-3, controller

我对使用 MVC 模式比较陌生，这是我的第一个 SO 问题；我专门使用 ASP.NET MVC 3，但我的问题可能适用于一般的 MVC 模式。重用本质上返回相同视图但可能从数据库查询不同结果集的控制器方法的最佳方法是什么？例如，我可能想展示所有客户，或者特定区域的一些客户，或者一些具有“精英”身份的客户。

我目前对每个“GetBy...”结果集都有单独的控制器方法。有没有办法使用“列表”控制器并用不同的结果集填充它？也许通过将结果集作为参数注入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T21:28:08.823

将这些方法保存在服务层中，并根据输入要求调用它。检查传递给操作方法的参数。

```
public ActionResult List(string regionName,string status)
{
  List<Customer> customerList=new List<Customer>();
  if((!String.IsNullOrEmpty(regionName)) && (!String.IsNullOrEmpty(status)))
  {
      customerList=CustomerService.GetCustomersForRegionStatus(regionName,status);
     //List all Customers  
  }
  else if(!String.IsNullOrEmpty(regionName))
  {
     customerList=CustomerService.GetCustomersForRegion(regionName);
  }
  else if(!String.IsNullOrEmpty(status))
  {
     customerList=CustomerService.GetCustomersForStatus(status);
  }
  else
  {
      customerList=CustomerService.GetAllCustomers();
  }
  return View(customerList);
} 
```

您的视图将绑定到 Customer 对象的集合

```
@model IList<Customer>
@foreach(var cust in Model)
{
  <p>@cust.Name</p>
} 
```

假设`GetCustomersForRegionStatus`,`GetCustomersForRegion`和`GetAllCustomers`方法返回一个客户对象列表，并在内部调用不同的数据库访问方法，以根据传递的参数获取过滤后的数据。

这些用于 urls 的请求现在会给出不同的结果。

```
yourcontrollername/list
yourcontrollername/list?regionName=someregion
yourcontrollername/list?status=elite
yourcontrollername/list?regionName=someregion&status=elite 
```

# r - 循环：为 r 中的相关函数选择变量

> ID：11785954
> 
> 赞同：3
> 
> 时间：2012-08-02T21:19:03.193
> 
> 标签：r, variables, loops, dataframe

这是我打算做的（对于相当多的变量和数据集）：

```
mygroupdf <- data.frame (varname = c("A", "B", "c1", "D2",
    "E", "F", "g1"), group = c(1, 1, 1, 2,3,3,4))

> mygroupdf
      varname group
  1       A     1
  2       B     1
  3      c1     1
  4      D2     2
  5       E     3
  6       F     3
  7      g1     4 
```

此数据框仅包含用于变量分组的信息：

```
group 1 = A, B, c1
group 2 = D2
group 3 = E, F
group 4 = g1 
```

第二个数据集 - 包含实际数据

```
set.seed(1234)
dataf <- data.frame (yvar = rnorm (10, 10,3), 
    A = sample(c(1,0), 10, T), B = sample(c(1,0), 10, T), 
    c1 = sample (c(1,0), 10, T), D2 = sample (c(1,0), 10, T), 
    E= sample (c(1,0), 10, T),F = sample (c(1,0), T), 
    g1 = sample (c(1,0), 10, T))

# manual workout:
xtemp <- dataf$A* dataf$B * dataf$c1 # all from group 1
# I error in previous version it is * not + 
# (is product of all members of a group i.e. 
 xtemp <- dataf$D2 (- group 2)
 xtemp <- dataf$E * dataf$F (- group 3)
 xtemp <- dataf$G (- group 4) 
```

然后将产品与 Yvar 相关：

```
x <- cor(dataf$yvar, xtemp) 
```

我想将它包装到一个函数中，以便我可以将它应用到我的数据集中的 1000 组变量中。

```
 corrfun <- function (x, V1, V2, V3) {
           xtemp <- V1 * V2  + V3
           x <- cor(dataf$yvar, xtemp)
           return (x)
          } 
```

由于不同的组有不同的变量，我不确定如何构建这样的函数并应用于整个数据集。请帮忙 ！

编辑：过程：

![在此处输入图像描述](../Images/37d18f8b3d07cd42b726a9831e0af17a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T22:01:52.173

我赌一把……

```
corrfun <- function (group.no, x=dataf, x.lookup=mygroupdf) {
  xtemp <- apply(x[x.lookup$varname[x.lookup$group == group.no]], 1, prod)

  out <- cor(x$yvar, xtemp)

  return (out)
}

>     corrfun(1)
[1] 0.35593
> corrfun(2)
[1] 0.4181311
> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T22:46:59.523

并使用我当前最喜欢的库创建另一个答案：

```
library(plyr)
ddply(mygroupdf, .(group), summarise,
      cor=cor(dataf$yvar, apply(dataf[as.character(varname)],1,prod))) 
```

这将产生以下结果：

```
 group        cor
1     1  0.3559300
2     2  0.4181311
3     3         NA
4     4 -0.1015003
Warning message:
In cor(dataf$yvar, apply(dataf[as.character(varname)], 1, prod)) :
  the standard deviation is zero 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T22:14:50.827

另一个答案..

```
cbind(
  group = unique(mygroupdf$group),
  corr = 
    do.call(
      c,
      lapply(
        unique(mygroupdf$group),
        function(x) {
          varnames <- unique(mygroupdf[mygroupdf$group == x, 'varname'])
          products <- apply(as.matrix(dataf[, colnames(dataf) %in% varnames]), 1, prod)
          cor(products, dataf$yvar)
        }
      )
    )
) 
```

这使

```
 group       corr
[1,]     1  0.3559300
[2,]     2  0.4181311
[3,]     3         NA
[4,]     4 -0.1015003 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T22:20:49.437

```
sapply(unique(mygroupdf$group), function(x) {
  a <- as.character(mygroupdf$varname[mygroupdf$group == x])
  cor(dataf$yvar, apply(dataf[a],1,prod))
}) 
```

1.  **unique：**标识唯一的组号
2.  **sapply：**对他们每个人应用功能
3.  **a <- ...:** let`a`是对应的变量名
4.  **dataf[a]：**从数据框中选择适当的列
5.  **apply(…prod)：**计算每一行的乘积
6.  **cor：**相关
7.  **sapply：**将结果组合成一个简单的向量

# c - 初始化指向结构的指针时出现无效的初始化程序错误

> ID：11785960
> 
> 赞同：2
> 
> 时间：2012-08-02T21:19:48.980
> 
> 标签：c

我正在为`USB`引导加载程序编写代码。当我编译代码时，我得到了以下两个错误：

```
Invalid Initializer 
```

该错误涉及以下代码行：

```
static volatile usb_internal_sram_t sr;         
static volatile usb_internal_sram_t usb_sram = &sr;

usb_control_t ctr;                  
static usb_control_t usb_ctrl = &ctr; 
```

在有人建议之前`malloc()`，这是一个嵌入式系统。不建议使用动态内存分配，因为它会降低系统速度。因此，这就是我尝试以`struct`这种方式初始化指针的原因。我认为这种方法可以，但显然不是。有人有想法么？先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T21:20:38.370

您缺少将您的和对象声明为指针的`*`令牌。`usb_sram``usb_ctrl`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T21:31:02.377

```
static volatile usb_internal_sram_t sr;
static volatile usb_internal_sram_t usb_sram = &sr; 
```

你可能是说

```
static volatile usb_internal_sram_t sr;
static volatile usb_internal_sram_t* usb_sram = &sr; 
```

# json - 如何使用 DBXJSON 将字符串与带有转义/特殊字符的 JSON 相互转换？

> ID：11785963
> 
> 赞同：15
> 
> 时间：2012-08-02T21:20:02.100
> 
> 标签：json, string, delphi, escaping, dbxjson

我在将带有转义字符的字符串与 TJsonString 相互转换**时**遇到**问题**。（我使用的是 Delphi XE 2、Update 4、Hotfix 1）。

注意：我熟悉[SuperObject](http://www.progdigy.com/?page_id=6)，但我的要求是使用 DBXJSON 单元。

通过 ToString() 方法返回 JSON 表示时，似乎 TJSONString 未正确转义。

**我做错了什么（如果有的话），如何正确地将带有特殊字符的字符串转换为正确的 JSON 表示形式/从正确的 JSON 表示形式转换？**

也许我错过了一些东西，但以下问答似乎都没有直接解决这个问题：

*   [Delphi 解码 json/utf8 转义文本](https://stackoverflow.com/questions/9713491/delphi-decode-json-utf8-escaped-text)
*   [适用于 XE2 的 Delphi JSON 库可用于对象序列化](https://stackoverflow.com/questions/7731833/delphi-json-library-for-xe2-available-for-object-serialization)
*   [Delphi：JSON 数组](https://stackoverflow.com/questions/10549935/delphi-json-array)
*   [如何在 Delphi XE2 中解析嵌套的 JSON 对象？](https://stackoverflow.com/questions/10808912/how-to-parse-nested-json-object-in-delphi-xe2)
*   [使用 Delphi 2012 反序列化嵌套 json 对象](https://stackoverflow.com/questions/10559080/nested-json-object-deserializing-using-delphi-2012)

> **编辑：**
> 
> 事实证明，下面的示例确实按预期工作。
> 
> 我不清楚的是，当通过其构造函数**创建**TJSONString 并将其添加到 TJSONObject 时，ToString() 方法将返回**转义** 表示。但是，在**解析**TJSONObject 之后，ToString() 方法将返回**未转义的**表示。
> 
> 唯一需要注意的是，下面示例代码中的 EscapeString() 函数正在处理双引号。虽然我在这里没有使用双引号，但我的其他一些代码是，这导致解析失败，因为 TJSONString 已经转义了该字符。我更新了我的示例代码以从 EscapeString() 函数中删除此处理，这是我在自己的类中一直使用的。
> 
> 再次感谢@Linas 的回答，这帮助我“得到”了它。

**原始字符串值：**

```
Text := 'c:\path\name' +#13 + #10 + 'Next Line';

Text: c:\path\name
Next Line 
```

**DBXJSON 产生的内容（无转义）：**

```
JsonString: "c:\path\name
Next Line"

JsonPair: "MyString":"c:\path\name
Next Line"

JsonObject: {"MyString":"c:\path\name
Next Line"} 
```

**解析未转义的文本*失败*：**

```
Text to parse: {"MyString":"c:\path\name
Next Line"}

Parsed JsonObject = *NIL* 
```

**我期望*DBXJSON*产生什么：**

```
Escaped String: c:\\path\\name\r\nNext Line

JsonString: "c:\\path\\name\r\nNext Line"

JsonPair: "MyString":"c:\\path\\name\r\nNext Line"

JsonObject: {"MyString":"c:\\path\\name\r\nNext Line"} 
```

**Parsing ESCAPED Text ( *INVALID* )（使用[JSONLint](http://jsonlint.com/)验证的要解析的文本）：**

```
Text to parse: {"MyString":"c:\\path\\name\r\nNext Line"}

Parsed JsonObject.ToString(): {"MyString":"c:\path\name
Next Line"} 
```

***我注意到唯一能正确处理的特殊字符 TJSONString 是双引号 (")。***

这是我正在使用的代码：

```
program JsonTest;

{$APPTYPE CONSOLE}

{$R *.res}

uses
  System.SysUtils, DbxJson;

function EscapeString(const AValue: string): string;
const
  ESCAPE = '\';
  // QUOTATION_MARK = '"';
  REVERSE_SOLIDUS = '\';
  SOLIDUS = '/';
  BACKSPACE = #8;
  FORM_FEED = #12;
  NEW_LINE = #10;
  CARRIAGE_RETURN = #13;
  HORIZONTAL_TAB = #9;
var
  AChar: Char;
begin
  Result := '';
  for AChar in AValue do
  begin
    case AChar of
      // !! Double quote (") is handled by TJSONString
      // QUOTATION_MARK: Result := Result + ESCAPE + QUOTATION_MARK;
      REVERSE_SOLIDUS: Result := Result + ESCAPE + REVERSE_SOLIDUS;
      SOLIDUS: Result := Result + ESCAPE + SOLIDUS;
      BACKSPACE: Result := Result + ESCAPE + 'b';
      FORM_FEED: Result := Result + ESCAPE + 'f';
      NEW_LINE: Result := Result + ESCAPE + 'n';
      CARRIAGE_RETURN: Result := Result + ESCAPE + 'r';
      HORIZONTAL_TAB: Result := Result + ESCAPE + 't';
      else
      begin
        if (Integer(AChar) < 32) or (Integer(AChar) > 126) then
          Result := Result + ESCAPE + 'u' + IntToHex(Integer(AChar), 4)
        else
          Result := Result + AChar;
      end;
    end;
  end;
end;

procedure Test;
var
  Text: string;
  JsonString: TJsonString;
  JsonPair: TJsonPair;
  JsonObject: TJsonObject;
begin
  try
    Writeln('Raw String Value');
    Writeln('-----------------');
    Text := 'c:\path\name' +#13 + #10 + 'Next Line';
    Writeln('Text: ', Text);
    JsonString := TJsonString.Create(Text);
    JsonPair := TJsonPair.Create('MyString', JsonString);
    JsonObject := TJsonObject.Create(JsonPair);
    // DBXJSON results
    Writeln;
    Writeln('What DBXJSON produces');
    Writeln('---------------------');
    Writeln('JsonString: ', JsonString.ToString);
    Writeln;
    Writeln('JsonPair: ', JsonPair.ToString);
    Writeln;
    Writeln('JsonObject: ', JsonObject.ToString);
    Writeln;

    // assign JSON representation
    Text := JsonObject.ToString;
    // free json object
    JsonObject.Free;
    // parse it
    JsonObject:= TJsonObject.ParseJsonValue(TEncoding.ASCII.GetBytes(
      Text), 0) as TJsonObject;
    Writeln('Parsing UN-escaped Text *FAILS* ');
    Writeln('----------------------------------');
    Writeln('Text to parse: ', Text);
    Writeln;
    if (JsonObject = nil) then
      Writeln('Parsed JsonObject = *NIL*')
    else
      Writeln('Parsed JsonObject: ', JsonObject.ToString);
    Writeln;
    // free json object
    JsonObject.Free;
    // expected results
    Text := 'c:\path\name' +#13 + #10 + 'Next Line';
    Text := EscapeString(Text);
    JsonString := TJsonString.Create(Text);
    JsonPair := TJsonPair.Create('MyString', JsonString);
    JsonObject := TJsonObject.Create(JsonPair);
    Writeln('What I *EXPECT* DBXJSON to produce');
    Writeln('----------------------------------');
    Writeln('Escaped String: ', Text);
    Writeln;
    Writeln('JsonString: ', JsonString.ToString);
    Writeln;
    Writeln('JsonPair: ', JsonPair.ToString);
    Writeln;
    Writeln('JsonObject: ', JsonObject.ToString);
    Writeln;
    // assign JSON representation
    Text := JsonObject.ToString;
    // free json object
    JsonObject.Free;
    // parse it
    JsonObject:= TJsonObject.ParseJsonValue(TEncoding.ASCII.GetBytes(
      Text), 0) as TJsonObject;
    Writeln('Parsing ESCAPED Text (*INVALID*) ');
    Writeln('----------------------------------');
    Writeln('Text to parse: ', Text);
    Writeln;
    Writeln('Parsed JsonObject.ToString(): ', JsonObject.ToString);
    Writeln;
    Readln;
  except
    on E: Exception do
    begin
      Writeln(E.ClassName, ': ', E.Message);
      Readln;
    end;
  end;
end;

begin
  Test;
end. 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-02T22:19:21.410

您可以尝试定义自己的 TJSONString 类型并在那里转义 json 字符串。例如：

```
uses
  DBXJSON;

type
  TSvJsonString = class(TJSONString)
  private
    function EscapeValue(const AValue: string): string;
  public
    constructor Create(const AValue: string); overload;
  end;

{ TSvJsonString }

constructor TSvJsonString.Create(const AValue: string);
begin
  inherited Create(EscapeValue(AValue));
end;

function TSvJsonString.EscapeValue(const AValue: string): string;

  procedure AddChars(const AChars: string; var Dest: string; var AIndex: Integer); inline;
  begin
    System.Insert(AChars, Dest, AIndex);
    System.Delete(Dest, AIndex + 2, 1);
    Inc(AIndex, 2);
  end;

  procedure AddUnicodeChars(const AChars: string; var Dest: string; var AIndex: Integer); inline;
  begin
    System.Insert(AChars, Dest, AIndex);
    System.Delete(Dest, AIndex + 6, 1);
    Inc(AIndex, 6);
  end;

var
  i, ix: Integer;
  AChar: Char;
begin
  Result := AValue;
  ix := 1;
  for i := 1 to System.Length(AValue) do
  begin
    AChar :=  AValue[i];
    case AChar of
      '/', '\', '"':
      begin
        System.Insert('\', Result, ix);
        Inc(ix, 2);
      end;
      #8:  //backspace \b
      begin
        AddChars('\b', Result, ix);
      end;
      #9:
      begin
        AddChars('\t', Result, ix);
      end;
      #10:
      begin
        AddChars('\n', Result, ix);
      end;
      #12:
      begin
        AddChars('\f', Result, ix);
      end;
      #13:
      begin
        AddChars('\r', Result, ix);
      end;
      #0 .. #7, #11, #14 .. #31:
      begin
        AddUnicodeChars('\u' + IntToHex(Word(AChar), 4), Result, ix);
      end
      else
      begin
        if Word(AChar) > 127 then
        begin
          AddUnicodeChars('\u' + IntToHex(Word(AChar), 4), Result, ix);
        end
        else
        begin
          Inc(ix);
        end;
      end;
    end;
  end;
end; 
```

使用示例：

```
procedure Test;
var
  LText, LEscapedText: string;
  LJsonString: TSvJsonString;
  LJsonPair: TJsonPair;
  LJsonObject: TJsonObject;
begin
  LText := 'c:\path\name' + #13 + #10 + 'Next Line';
  LJsonString := TSvJsonString.Create(LText);
  LJsonPair := TJsonPair.Create('MyString', LJsonString);
  LJsonObject := TJsonObject.Create(LJsonPair);
  try
    LEscapedText := LJsonObject.ToString;
    //LEscapedText is: c:\\path\\name\r\nNext Line
  finally
    LJsonObject.Free;
  end;
end; 
```

这就是应该如何进行解析：

```
//AText := '{"MyString":"c:\\path\\name\r\nNext Line"}';
function Parse(const AText: string): string;
var
  obj: TJSONValue;
begin
  obj := TJSONObject.ParseJSONValue(AText);
  try
    Result := obj.ToString;
    //Result := {"MyString":"c:\path\name
   //Next Line"}
  finally
    obj.Free;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-07-09T02:02:56.037

我们刚刚遇到了这个可爱的问题，我们的反斜杠没有被转义（但我们的双引号显然是，哈哈）......

解决方案是停止使用`TJSONObject.ToString()`，`TJSONObject.ToJSON()`而是使用。这为您提供了正确转义的字符串，而不是`ToString()`返回的人类可读格式。

希望这可以帮助某人:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-12T14:09:03.967

我在使用 Delphi XE2 时遇到了同样的问题。我的解决方案是更改库文件**Data.DBXJSON.pas**。我将原始文件复制到我的**PatchedLibraryXE2**目录（我的库路径中的第一个）。在这里我改变了方法

```
function TJSONString.ToString: UnicodeString;
begin
  if FStrBuffer <> nil then
//    Exit('"' + AnsiReplaceStr(FStrBuffer.ToString, '"', '\"') + '"');
    Exit('"' + EscapeValue(FStrBuffer.ToString) + '"');
  Result := NullString;
end; 
```

我在上面的回答中使用了 Linas 的逃生方法。我省略了大于 127 的字符的转义。为了编译，我还需要将文件**Data.DBXCommon.pas**复制到我的**PatchedLibraryXE2**目录。现在我的`TJSONObject.ToString()`作品符合预期。

# html - HTML5 的设备方向模拟器

> ID：11785964
> 
> 赞同：3
> 
> 时间：2012-08-02T21:20:05.173
> 
> 标签：html, firefox, android-emulator

是否有用于 HTML 5 解释器（又名网络浏览器）的定向设备模拟器/模拟器？

我正在使用 HTML 5 中的[DeviceOrientation 事件规范](http://dev.w3.org/geo/api/spec-source-orientation.html)，我可以编写一个在我的 Android 智能手机浏览器中运行的示例。

但是，在开发阶段，我想直接在我的 PC 上工作以尝试代码，并且我正在寻找一个设备方向模拟器。

对于 Android，我找到[了 OpenIntents Sensor Simulator](http://code.google.com/p/openintents/wiki/SensorSimulator)，它没有用，因为您需要在应用程序中包含特殊的 Java 代码，因此它在 Web 浏览器中不可用（除非您使用一些特殊的）。是否有任何其他适用于 Android 的设备模拟器直接在浏览器中运行？

我也找不到任何 Firefox 模拟器。

还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-06-09T07:49:05.660

那么在 Chrome 中有这个

![在此处输入图像描述](../Images/c06ac9cd0c20763516c14e699308971a.png)

非动画版：

1.  从汉堡菜单打开开发者工具
2.  按 ESC 或单击`>_`图标
3.  选择仿真选项卡
4.  点击电话图标　

请注意，Chrome 的 devtools 仿真显然存在一些问题，因此还有[这个设备方向仿真库](https://github.com/richtr/doe)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T21:40:22.083

> 但是，在开发阶段，我想直接在我的 PC 上工作以尝试代码，并且我正在寻找一个设备方向模拟器。

[Xcode](https://developer.apple.com/xcode/)附带一个 iPhone 模拟器，您可以使用它来更改方向。[Android SDK](http://developer.android.com/sdk/index.html)还允许您创建可以像真实手机一样使用的虚拟 Android 设备，但可以在计算机屏幕上使用。还有一个[Opera 移动模拟器](http://de.opera.com/developer/tools/mobile/)，它对 Opera Mobile 做同样的事情。

然后，您可以[免费使用 Prefix](http://leaverou.github.com/prefixfree/)来开发您的代码，这样您就不必担心 CSS 的供应商前缀。

[Mozilla 建议](https://developer.mozilla.org/en/Mobile/Mobile_Web_Development)您在这些设备/模拟器/模拟器上进行测试，也可以直接在设备上进行测试，因为它与您在可信赖的计算机上获得的内容略有不同**。**

而且，最后但并非最不重要（仅与您的问题稍微相关）有一些非常棒的东西，例如 Weinre、[Adobe Shadow](http://labs.adobe.com/technologies/shadow/)和新的 Safari 6 Webinspector，它们可以让您直接在设备上从计算机上调试 JavaScript 并编辑 DOM 和 CSS。Shadow 甚至可以让您一次重新加载几个连接的设备。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-02T15:56:20.187

我看到其他人建议使用 Chrome DevTools 模拟器，但现在似乎有错误（参见例如[https://code.google.com/p/chromium/issues/detail?id=504343](https://code.google.com/p/chromium/issues/detail?id=504343)）。

作为对这些问题的回应，我刚刚构建了自己的设备方向模拟器。**在任何桌面浏览**器中使用这个基于弹出的模拟器的说明可以在以下位置找到：

[https://github.com/richtr/deviceorientationemulator](https://github.com/richtr/deviceorientationemulator)

我研究 W3C DeviceOrientation 规范已经有一段时间了，在这一点上我应该说，这个模拟器当前生成的设备方向数据与你今天在 Android 上的任何 Chromium 浏览器中运行 Web 应用程序时获得的完全相同。

希望 Chromium DevTools 模拟器很快会更新，但在此期间我希望这很有用。

# javascript - 未从按钮单击调用 JavaScript 回调

> ID：11785972
> 
> 赞同：0
> 
> 时间：2012-08-02T21:20:26.183
> 
> 标签：javascript, callback

你好互联网的善良和耐心的人。

请注意，我已经阅读并重新阅读了大多数关于回调的 Stackoverflow 文章，上网去 Safari Books 寻找一个有意义的简单回调的例子，并且对这个回调的东西敲了一会儿，但是唉：似乎无法理解...我正在尝试使一个简单的回调示例正常工作...非常简单的事情，我可以理解。

这是目标：单击一个按钮......让按钮调用一个弹出警报的函数，然后回调弹出一个警报。

这是我的一些示例代码，至少似乎不会引发任何明显的语法错误，但是 dang, darn, heck: 不起作用。

```
document.getElementById('test-callback-button').onclick = testMyCallBack;

function testMyCallBack() {
   runClientRequest3("ham", function() { alert("Thanks for the sandwich") });
}

function runClientRequest3(request, callback) {
     alert("My sandwich is: " + request);
     callback;
} 
```

弹出警报“我的三明治是火腿”...但不是回调警报:-( ...我（显然）错过了什么并且不理解？

非常感谢提前

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T21:22:26.480

```
 callback; 
```

应该

```
 callback(); 
```

# assembly - 将非常简单的 ARM 指令转换为二进制/十六进制

> ID：11785973
> 
> 赞同：26
> 
> 时间：2012-08-02T21:20:28.793
> 
> 标签：assembly, binary, hex, arm, opcodes

我一直在尝试使用**[此页面](http://www.nyx.net/~troddis/ARM.html)**以及其他各种指南来弄清楚如何将非常简单的 ARM 指令表示为二进制和十六进制。对我来说这似乎应该是一个简单的过程，但我仍然不明白。这里有几个例子。

基本 NOP：

```
 what goes here?          what goes here?
             _↓_                  _____↓____
            |   |                |          |
mov r0, r0 ; ????00?1101?????????????????????
                         |__||__|
                          ↑    ↑
                 how do I express registers? 
```

其他人的基本问题相同。

比较两个寄存器：

```
cmp r1, r0 
```

添加立即数到寄存器值：

```
add r0, #0x1a 
```

所有这些在线教程都很好地描述了如何使用这些指令，但没有一个我能够真正找到如何将 ARM 指令转换为二进制/十六进制/机器代码的方法。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-02T22:02:55.870

以下是数据处理指令的编码方式：

![ARM数据处理指令](../Images/afdd728332a8cdd31a3d1b10995cc92e.png)

您的该页面中有条件代码表。寄存器是通过 编码`0000`的`1111`。

您的所有示例都属于同一类别。图片是从我的硬盘上的一些文件中提取的，但我也设法通过[google](http://www.ic.unicamp.br/~ranido/mc404/arm/arm-instructionset.pdf)找到它。对这些指令进行编码是一项乏味的工作。

所以，`mov r0, r0`应该是这样的：

```
1110 00 0 0 1101 0000 0000 00000000 
```

我将 Rn 设为 0，因为它实际上并不适用于`MOV`. 在 的情况下`CMP`，我相信，`S`总是 1。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-02T22:25:44.080

首先，您需要 infocenter.arm.com 上的 ARM 架构参考手册 (ARM ARM)，参考手册，获取最旧的（armv5 或其他）。指令集在那里定义良好。

其次，你为什么不组装一些指令，看看会发生什么？

```
;@test.s
cmp r1, r0
add r0, #0x1a 
```

无论您拥有什么交叉汇编器（请参阅构建 gcc 目录中的[http://github.com/dwelch67/raspberrypi以获取脚本，只需在该脚本中通过 binutils 运行）](http://github.com/dwelch67/raspberrypi)

```
arm-none-linux-gnueabi-as test.s  -o test.o
arm-none-linux-gnueabi-objdump -D test.o 
```

arm-none-linux-gnueabi vs arm-none-elf vs arm-elf，等等，这无关紧要，都一样

```
Disassembly of section .text:

00000000 <.text>:
   0:   e1510000    cmp r1, r0
   4:   e280001a    add r0, r0, #26 
```

完整的 32 位 arm 指令（不是 thumb）的前四位是条件代码，请参阅 ARM ARM 中的条件字段部分。0xE 表示总是，总是执行这条指令。0b0000 是 eq 仅在设置 z 标志时执行，0b0001 ne 仅在 z 清零时执行，等等。

在 ARM 中将 ARM 推入 arm 指令集，然后按字母顺序排列 arm 指令，然后找到 cmp 它以 cond 00I10101 rn sbz shifter 开头

从上面的 cmp 指令中，我们看到 1110 000101010001 ... 所以 I 是零位 15:12 是零位 27:26 是零位和 24:21 是 1010 所以这是一个 cmp 指令

上面的第 19 位到第 16 位是 0b001，它是 rn 所以 rn = 1 (r1) 用于 ARM ARM 中的移位器操作数，它告诉您查看寻址模式 1 数据处理操作数，并在 pdf 中具有指向页面的链接

我们知道我们希望第二个操作数只是一个寄存器，即所谓的数据处理操作数 - 寄存器和页码，转到该页上的那个页面 15:12 是 rd 11:4 是零，3:0 是 rm . 我们从 cmp 指令中知道它说 15:12 应该为零，我想知道它是否在乎， cmp 不会将结果存储到寄存器中，因此不使用 rd 。rm 被使用，在这种情况下我们想要 r0，所以 0b0000 进入 3:0 还要注意它显示位 27:25 为零，在 cmp 指令中 25 是 I，我们现在知道我们想要一个零，所以

在 cmp 页面和这个数据处理之间 - register 页面我们有整个画面

```
1110 condition
000 
1010 opcode
1 S (store flags, that is a 1 for a cmp to be useful)
0001 rn
0000 rd/dont care/sbz
00000
000
0000 rm

cmp rn,rm
cmp r1,r0 
```

add 类似但使用立即数，因此请转到 alpha 指令列表中的 add 指令。我们现在从 cmp 知道这类指令的 24:21 是操作码，我们几乎可以直接进入移位器操作数的内容以从那里继续

这次我们正在添加 rd,rn,#immediate

所以寻找#immediate的页面

并且编码是

```
1110 condition, always
001 (note the immediate bit is set)
0100 (opcode for add for this type of instruction)
0 (S not saving the flags, it would be adds r0,r0,#26 for that)
0000 (rn = r0)
0000 (rd = r0) 
```

现在到了有趣的部分，我们可以对 26 种不同的方式进行编码。位 7:0 是立即数，位 11:8 允许旋转立即数，26 是 0x1A，我们可以简单地将 0x1A 放在低 8 位并将旋转设置为 0，这就是 gnu 汇编程序所做的。可能会在低 8 位中放入 0x68，在 rotate_imm 字段 1101000 中放入 1，向右旋转 1*2 位是 11010 = 0x1A = 26。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-02T22:06:04.127

您应该得到一份 ARM ARM 的副本，它描述了所有指令的编码。

大多数 ARM 指令使用高 4 位作为条件代码。如果您不想有条件地运行指令，只需使用伪条件 AL (1110)。

编码中的第一个寄存器 (Rn) 不用于 MOV 指令，它应设置为 ARM ARM 定义的 0000。

第二个寄存器是目的地，在这里您只需对寄存器号进行编码，因此在您的情况下它也是 0000，因为您使用 r0 作为目的地，对于 r4 它将是 0100。

余数是非常灵活的所谓移位器操作数。它可能是一个简单的寄存器，如您的情况（r0）然后它只是 0000 0000 0000 ，其中最后 4 位再次对寄存器进行编码。它还可以使用寄存器或立即值对不同类型的移位和旋转进行编码以进行数据处理。

但它也可能是立即数，其中 8 位在底部位中编码，前 4 位定义以 2 位步长的右循环。在这种情况下，bit25 也将为 1，在所有其他情况下为 0。

# variables - Fortran 中的变量类型

> ID：11785974
> 
> 赞同：3
> 
> 时间：2012-08-02T21:20:29.350
> 
> 标签：variables, fortran

我有一段 Fortran 代码，而我的 Fortran 编辑器（Force 2.0.9）无法理解该代码中的以下行。

```
real(kr8) :: rnum 
```

我找不到关于这种类型的变量声明的任何信息。(kr8) 是什么意思？如果有人可以向我解释，我真的很感激？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-02T22:21:10.077

这是以下简称：

```
real(kind=kr8) :: rnum 
```

在这种情况下，变量或参数`kr8`在代码的其他地方指定 - 如果在同一过程中，则在此行上方，如果通过模块访问，则在不同文件中。从它的名字，人们可以假设它`kr8`是以这样一种方式定义的，它对于某些特定的编译器具有一种双精度浮点数（大小为 8 个字节）。

请参阅您的 Fortran 编译器文档，了解`kind`参数对于整数和实数变量的各种精度和范围可以采用的值。如果你使用 force，你的编译器要么是 gfortran，要么是 g95，要么是 g77。该`kind`参数是 Fortran 90 引入的一个特性，如果你的编译器是 g77，你可能无法使用这个参数进行编译。

阅读这个 SO 问题的答案也很有用：[Fortran 90 kind parameter](https://stackoverflow.com/questions/838310/fortran-90-kind-parameter?lq=1)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-02T22:46:09.747

这是关于在 Fortran >=90 中声明变量的几种方法的先前答案：[Fortran: integer*4 vs integer(4) vs integer(kind=4)](https://stackoverflow.com/questions/3170239/fortran-integer4-vs-integer4-vs-integerkind-4/3170438)。另请参阅[扩展双精度](https://stackoverflow.com/questions/9211037/extended-double-precision)，了解这如何与实变量一起使用。

# javascript - 显示最大值的控制号

> ID：11785979
> 
> 赞同：0
> 
> 时间：2012-08-02T21:20:51.040
> 
> 标签：javascript, jquery, loops

我有一个 java 脚本函数，它获取一个表示数字的字符串，循环并在 jquery 函数中返回相同的值（最大值）：

```
 function auto_tag_posts(data) {
                //data is 999
                var p_nr=0;
                for (p_nr=0; p_nr<data; p_nr++) {
                    $.post("./myphp.php", {command: "c"}, function(post_data){
                        //p_nr is 999!!! WHY?
                        alert(p_nr);
                    }); 
                } 
```

解决方法是什么？

问题是在一瞬间发出了 999 个请求，答案及时到来，但 jquery "for" 立即完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T21:22:37.480

那是因为闭包。改用这些 c0dez

```
for (p_nr=0; p_nr<data; p_nr++) {
    (function(p_nr) {}
        $.post("./myphp.php", {command: "c"}, function(post_data){
            //p_nr is 999!!! WHY?
            alert(p_nr);
        }); 
    )(p_nr);
} 
```

# php - 我只是不小心将 Vim 中的文件转换为全小写。发生了什么？

> ID：11785980
> 
> 赞同：1
> 
> 时间：2012-08-02T21:21:09.743
> 
> 标签：php, vim, smarty

这个模板（PHP/Smarty）中有大量的 camelCase 方法和变量，通过我的一些小故障或错误，我只是自动将它们转换为全部小写。是什么赋予了？我现在被困在用手将所有这些恢复到以前的方式

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T21:30:40.373

我猜你在可视模式下选择了一个块，然后点击`u`. 选中可视块`u`会将选择转换为小写（`U`将选择转换为大写）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T21:40:32.300

你说的 vim 是指 unix 程序吗？如果是这样，请在其后使用 ~ 检查相同的文件。Emacs 和 vim 都保存之前的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T21:52:40.720

按下`v`并选择您要更改大小写的所有部分。按下 后`~`，这将更改所有选定字符的大小写。
关于 camleCase，您别无选择，只能再次重新检查您的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T23:30:13.843

如果您在文件的顶部`guG`并且通常`gu<motion>`会小写该动作中的所有内容，则可以这样做。也许即使你只是`gu`用鼠标打字并做了一些事情，也许你被击中了？

# testing - 如何在 vbscript 中客观化多个目标？

> ID：11785982
> 
> 赞同：0
> 
> 时间：2012-08-02T21:21:23.497
> 
> 标签：testing, object, syntax, vbscript

我现在正在使用 vbscript 测试宽带通信前端芯片内的接收器。例如，下面的代码：

```
Dim target : target = chip
target.receiver1.value = 1    'a simple assignment operation
... 
```

我还想对象化receiver1，使代码看起来像下面的形式：

```
Dim target : target = chip
Dim targetReceiver : targetReceiver = receiver1 
target.targetReceiver.value = 1
... 
```

在这里，我可以轻松地将接收器目标修改为例如“ `receiver2`”或“ `receiverN`”，而无需手动更改行`target.receiver1.value = 1`。我知道上面的代码不起作用，但是鉴于我想要实现的目标，你能告诉我怎么做吗？

# wpf - WPF NotSupportedException：“不支持像素格式”

> ID：11785986
> 
> 赞同：2
> 
> 时间：2012-08-02T21:21:35.390
> 
> 标签：wpf, exception, png

我的 WPF 窗口构造函数在调用时出现异常：“InitializeComponent()”

例外是 NotSupportedException：“不支持像素格式”

我在互联网上没有找到任何信息。

为什么会出现这个异常？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-02T21:24:37.980

我想让人们知道该错误来自 MenuItem 中使用的错误 PNG 图像文件。

为了解决我的问题，我在 Paint.net 中打开了失败的 PNG 并覆盖了有问题的 PNG。没有更多的例外。

注意：仅当您中断任何异常时才会出现问题。否则一切似乎都正常，并且图标 (.png) 在屏幕上正确显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-06T08:44:09.320

“不支持像素格式”异常的一个潜在原因是具有“索引”颜色空间的图像。这意味着像素值不是由三个 (R,G,B) 字节表示（在通常的 RGB 颜色空间中就是这种情况），而是由颜色表中的单字节索引表示。可以检查和更改图像的色彩空间，例如使用 Gimp 通过“图像/模式”菜单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-29T16:24:58.520

将此异常跟踪到我的应用程序中的 PNG 图像。在 Photoshop 中检查图像后，我注意到它的颜色模式设置为索引。将其更改为 RGB 解决了问题，并且没有更多例外。您可以在 Photoshop 中检查/更改模式，如下所示：

图像 -> 模式 -> RGB

此外，只有在 Visual Studio 中启用此异常才会发生：

调试 -> 异常 -> 公共语言运行时异常（检查）

# asp.net - 编程语言中的 SELECT-OPTIONS 概念

> ID：11785993
> 
> 赞同：0
> 
> 时间：2012-08-02T21:22:09.570
> 
> 标签：asp.net, web, search, sap-selection-screens

对于那些知道选择屏幕/选择选项如何在 SAP 系统中工作的人：

有没有人知道任何开源项目/产品对于不同的编程语言具有相同的功能，特别是对于那些有网络支持的？

我想创建一个基于一组数据库表/视图的高级和动态搜索屏幕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T09:07:22.817

我不知道存在这样的项目，但屏幕部分不会让你走得太远。除了非常方便地输入选择值之外，select-option 的主要特点是，您可以将它们传递给 Open SQL 中构建的 ABAP，例如

```
select ....
where field in selopt
..... 
```

在其他编程环境中，这是不支持的，因为这样的内置语言结构不可用。即，在Web 项目中，如果您有MySQL 或其他一些DBMS 存储您的数据，您必须从屏幕上的选择选项中获取值并将它们转换为本地SQL。

屏幕部分应该相对容易实现，即使用 jquery ui 或其他一些用于 web 应用程序的 GUI 工具包，难的是转换为原生 SQL。

考虑到在 ABAP 报告中，Open SQL 语句的使用水平非常高，而在其他编程环境中，您通常使用更多的抽象层来访问数据库，这就变得更糟了。

# php - PHP - Image uploading not working

> ID：11785996
> 
> 赞同：0
> 
> 时间：2012-08-02T21:22:21.147
> 
> 标签：php

> **Possible Duplicate:**
> [Image uploading via PHP returning empty array](https://stackoverflow.com/questions/11785726/image-uploading-via-php-returning-empty-array)

I am unable to successfully upload an image/file to my server. The php is as follows:

```
//This is the directory where images will be saved
$uploadDir = "./";
$uploadFile = $uploadDir . basename( $_FILES['photo']['name']);

//Writes the photo to the server
if(move_uploaded_file($_FILES['photo']['tmp_name'], $uploadFile)){
    echo "The file has been uploaded successfully.";
} else {
    print_r($_FILES);
} 
```

I chose the directory at which this script lives, to ensure the functionality before I upload to the final directory. I want to upload photo's, and will check for file extensions later - but for now I at least need the upload functionality to work.

The form is as follows:

```
<form id="imageUploadForm" name="imageForm" enctype="multipart/form-data" action="imageController.php" method="post">
<label for="photo" class="blogLabel">Upload an Image</label>
<input type="file" name="photo" id="imageUpload">
<input type="submit" name="submit" id="imageSubmit" class="btn btn-primary" value="Upload">
</form> 
```

`print_r($_FILES)` returns: `Array ( [photo] => Array ( [name] => imgres.jpeg [type] => image/jpeg [tmp_name] => /tmp/php1rqFUO [error] => 0 [size] => 15147 ) )`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T21:35:40.790

PHP doesn't have permission to write to that directory. If you're working on a LAMP stack, you need to give the world write access to that directory. From the commandline this is:

```
chmod -R 777 path/to/dir 
```

Be careful! You should actually use a different directory than the directory where your script lives. Choose a directory that cannot execute scripts so that someone doesn't upload a script to your site then execute it with full access to your server!

# django - 保存（）后修改的Django递归FK关系

> ID：11785997
> 
> 赞同：1
> 
> 时间：2012-08-02T21:22:23.410
> 
> 标签：django, django-models

我有一个递归关系：每个节点都有一个（可能为空）父节点。相反，每个父母都有多个孩子。我有一个 build_subtree 方法，它获取有关节点的信息并递归地构建节点并将其添加到父 FK 关系的反向集中，孩子。这似乎按预期工作，直到我保存根节点。在调用 save() 之前，root.children.count() > 0，在 save root.children.count() == 0 之后。（见下面的代码）谁能指出我正确的方向？我见过几次提到 django-mptt，我可能最终会使用它，但我真的很想先了解这一点。

```
class Node(models.Model):
    parent = models.ForeignKey('self', null=True, related_name='children')
    nodeVal = models.TextField()
    nodeType = models.CharField(max_length=75)
    level = models.IntegerField()

    @classmethod
    def build_subtree(cls, nodeVal, nodeType, level, children):
        root = cls(nodeVal=nodeVal, nodeType=nodeType, level=level)
        for c in children:
            root.children.add(cls.build_subtree(c['nodeVal'], c['nodeType'], c['level'], c['children']))
        return root 
```

然后在壳内...

```
>>> child = {'nodeVal' : 'B', 'nodeType' : 'tag', 'level' : 1, 'children' : []}
>>> root = {'nodeVal' : 'A', 'nodeType' : 'tag', 'level' : 0, 'children' : [child]}
>>> n = Node.build_subtree(root['nodeVal'], root['nodeType'], root['level'], root['children'])
>>> n.children.count()
1
>>> n.save()
>>> n.children.count()
0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:47:34.570

问题是您的孩子没有收到对父母的参考：

```
>>> print n.children.all()[0].parent
None 
```

在该`build_subtree`方法中，您正在创建父对象而不将其保存到数据库中，但是该`add()`方法将对象保存到数据库中，并且没有要设置的 FK，因为父对象还不存在！

您可能应该将类实例化替换为调用`cls.objects.create`或使用不同的创建顺序。

# java - Applet 在 Eclipse 中运行良好；但在 Chrome 中运行会产生 InvocationTargetException

> ID：11785998
> 
> 赞同：1
> 
> 时间：2012-08-02T21:22:24.733
> 
> 标签：java, applet, runtime-error, invocationtargetexception

我制作了一个 Swing 小程序，它可以在 Eclipse 中毫无问题地运行，但是当我使用 Chrome 使用 html 文件运行它时，我得到一个运行时异常：java.lang.reflect.InvocationTargetException。任何人都可以建议有什么问题吗？这是我尝试过的：

*   我已经读过 InvocationTargetException 包含了一些其他错误（导致它的另一个错误），但我不知道使用哪种方法来获取有用的错误 try{} catch(InvocationTargetException e){ e.toString()}。

*   在线材料建议我使用 jdb 生成堆栈跟踪，但它似乎没有包含任何有用的信息来查找异常的原因：

堆栈跟踪

```
TimerQueue:
  [1] sun.misc.Unsafe.park (native method)
  [2] java.util.concurrent.locks.LockSupport.park (null)
  [3] java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awai
t (null)
  [4] java.util.concurrent.DelayQueue.take (null)
  [5] javax.swing.TimerQueue.run (null)
  [6] java.lang.Thread.run (null)
ConsoleTraceListener:
  [1] java.lang.Object.wait (native method)
  [2] java.lang.Object.wait (Object.java:503)
  [3] com.sun.deploy.uitoolkit.ui.ConsoleTraceListener$ConsoleWriterThread.run (
null)
TimerQueue:
  [1] sun.misc.Unsafe.park (native method)
  [2] java.util.concurrent.locks.LockSupport.park (null)
  [3] java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awai
t (null)
  [4] java.util.concurrent.DelayQueue.take (null)
  [5] javax.swing.TimerQueue.run (null)
  [6] java.lang.Thread.run (null)
D3D Screen Updater:
  [1] java.lang.Object.wait (native method)
  [2] sun.java2d.d3d.D3DScreenUpdateManager.run (null)
  [3] java.lang.Thread.run (null)
AWT-EventQueue-1:
  [1] sun.misc.Unsafe.park (native method)
  [2] java.util.concurrent.locks.LockSupport.park (null)
  [3] java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awai
t (null)
  [4] java.awt.EventQueue.getNextEvent (null)
  [5] java.awt.EventDispatchThread.pumpOneEventForFilters (null)
  [6] java.awt.EventDispatchThread.pumpEventsForFilter (null)
  [7] java.awt.EventDispatchThread.pumpEventsForHierarchy (null)
  [8] java.awt.EventDispatchThread.pumpEvents (null)
  [9] java.awt.EventDispatchThread.pumpEvents (null)
  [10] java.awt.EventDispatchThread.run (null)
AWT-EventQueue-2:
  [1] sun.misc.Unsafe.park (native method)
  [2] java.util.concurrent.locks.LockSupport.park (null)
  [3] java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awai
t (null)
  [4] java.awt.EventQueue.getNextEvent (null)
  [5] java.awt.EventDispatchThread.pumpOneEventForFilters (null)
  [6] java.awt.EventDispatchThread.pumpEventsForFilter (null)
  [7] java.awt.EventDispatchThread.pumpEventsForHierarchy (null)
  [8] java.awt.EventDispatchThread.pumpEvents (null)
  [9] java.awt.EventDispatchThread.pumpEvents (null)
  [10] java.awt.EventDispatchThread.run (null)
Applet 3 LiveConnect Worker Thread:
  [1] java.lang.Object.wait (native method)
  [2] java.lang.Object.wait (Object.java:503)
  [3] sun.plugin2.main.client.LiveConnectSupport$PerAppletInfo$LiveConnectWorker
.run (null)
  [4] java.lang.Thread.run (null)
Browser Side Object Cleanup Thread:
  [1] java.lang.Object.wait (native method)
  [2] java.lang.ref.ReferenceQueue.remove (null)
  [3] java.lang.ref.ReferenceQueue.remove (null)
  [4] sun.plugin2.main.client.LiveConnectSupport$BrowserSideObjectCleanupThread.
run (null)
CacheCleanUpThread:
  [1] java.lang.Object.wait (native method)
  [2] java.lang.Object.wait (Object.java:503)
  [3] com.sun.deploy.cache.CleanupThread.run (null)
CacheMemoryCleanUpThread:
  [1] java.lang.Object.wait (native method)
  [2] java.lang.ref.ReferenceQueue.remove (null)
  [3] java.lang.ref.ReferenceQueue.remove (null)
  [4] com.sun.deploy.cache.MemoryCache$LoadedResourceCleanupThread.run (null)
SysExecutionTheadCreator:
  [1] java.lang.Object.wait (native method)
  [2] java.lang.Object.wait (Object.java:503)
  [3] sun.plugin.util.PluginSysUtil$SysExecutionThreadCreator.run (null)
AWT-EventQueue-0:
  [1] sun.misc.Unsafe.park (native method)
  [2] java.util.concurrent.locks.LockSupport.park (null)
  [3] java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awai
t (null)
  [4] java.awt.EventQueue.getNextEvent (null)
  [5] java.awt.EventDispatchThread.pumpOneEventForFilters (null)
  [6] java.awt.EventDispatchThread.pumpEventsForFilter (null)
  [7] java.awt.EventDispatchThread.pumpEventsForHierarchy (null)
  [8] java.awt.EventDispatchThread.pumpEvents (null)
  [9] java.awt.EventDispatchThread.pumpEvents (null)
  [10] java.awt.EventDispatchThread.run (null)
AWT-Windows:
  [1] sun.awt.windows.WToolkit.eventLoop (native method)
  [2] sun.awt.windows.WToolkit.run (null)
AWT-Shutdown:
  [1] java.lang.Object.wait (native method)
  [2] java.lang.Object.wait (Object.java:503)
  [3] sun.awt.AWTAutoShutdown.run (null)
  [4] java.lang.Thread.run (null)
Java2D Disposer:
  [1] java.lang.Object.wait (native method)
  [2] java.lang.ref.ReferenceQueue.remove (null)
  [3] java.lang.ref.ReferenceQueue.remove (null)
  [4] sun.java2d.Disposer.run (null)
  [5] java.lang.Thread.run (null)
Java Plug-In Pipe Worker Thread (Client-Side):
  [1] sun.plugin2.os.windows.Windows.ReadFile0 (native method)
  [2] sun.plugin2.os.windows.Windows.ReadFile (null)
  [3] sun.plugin2.ipc.windows.WindowsNamedPipe.read (null)
  [4] sun.plugin2.message.transport.NamedPipeTransport$SerializerImpl.read (null
)
  [5] sun.plugin2.message.transport.NamedPipeTransport$SerializerImpl.readByte (
null)
  [6] sun.plugin2.message.AbstractSerializer.readInt (null)
  [7] sun.plugin2.message.transport.SerializingTransport.read (null)
  [8] sun.plugin2.message.Pipe$WorkerThread.run (null)
Timer-0:
  [1] java.lang.Object.wait (native method)
  [2] java.lang.Object.wait (Object.java:503)
  [3] java.util.TimerThread.mainLoop (null)
  [4] java.util.TimerThread.run (null)
traceMsgQueueThread:
  [1] java.lang.Object.wait (native method)
  [2] java.lang.Object.wait (Object.java:503)
  [3] com.sun.deploy.trace.Trace$TraceMsgQueueChecker.run (null)
  [4] java.lang.Thread.run (null)
Attach Listener:
Signal Dispatcher:
Finalizer:
  [1] java.lang.Object.wait (native method)
  [2] java.lang.ref.ReferenceQueue.remove (null)
  [3] java.lang.ref.ReferenceQueue.remove (null)
  [4] java.lang.ref.Finalizer$FinalizerThread.run (null)
Reference Handler:
  [1] java.lang.Object.wait (native method)
  [2] java.lang.Object.wait (Object.java:503)
  [3] java.lang.ref.Reference$ReferenceHandler.run (null)
main:
  [1] java.lang.Object.wait (native method)
  [2] sun.plugin2.message.Queue.waitForMessage (null)
  [3] sun.plugin2.message.Pipe$1.run (null)
  [4] com.sun.deploy.util.Waiter$1.wait (null)
  [5] com.sun.deploy.util.Waiter.runAndWait (null)
  [6] sun.plugin2.message.Pipe.receive (null)
  [7] sun.plugin2.main.client.PluginMain.mainLoop (null)
  [8] sun.plugin2.main.client.PluginMain.run (null)
  [9] sun.plugin2.main.client.PluginMain.main (null) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T07:09:25.077

问题是我在`init()`方法之外初始化变量。Eclipse 似乎对此没有问题，但使用**浏览器**Java 插件运行它会抛出`java.lang.reflection.InterruptedThreadException`.