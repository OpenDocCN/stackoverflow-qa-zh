# StackOverflow 问答 10358000-10358999

# python - 添加一些东西到nametuple

> ID：10358009
> 
> 赞同：0
> 
> 时间：2012-04-27T21:18:58.423
> 
> 标签：python

我建立

```
Corpus = collections.namedtuple('Corpus', 'a, b, c, d') 
```

读取语料库中的所有文件并保存数据，

```
def compute(counters, tokens, catergory)
    ...
    counters.stats[tokens][catergory] = Corpus(a, b, c, d) 
```

令牌和分类都是 collection.Counter()。在阅读了 counters.stats 中 a、b、c、d 中的所有信息后，我在另一个函数中进行了一些计算，并为每个令牌获取了 'e'。如何在此函数中将 e 添加到 counters.stats 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T21:49:47.440

如果您正在谈论将“e”添加到语料库的命名元组中，`counter.stats[tokens][category]`那么这是不可能的，因为命名元组是不可变的。您可能必须使用这些`a b c d e`值创建一个新的命名元组并将其分配给 counter.stats[tokens][category]。下面的代码是一个例子：

```
>>> from collections import namedtuple
>>> two_d = namedtuple('twoDPoint', ['x', 'y'])
>>> x = two_d(1, 2)
>>> x = two_d(1, 2)
>>> three_d = namedtuple('threeDPoint', ['x', 'y', 'z'])
>>> x
twoDPoint(x=1, y=2)
>>> y = three_d(*x, z=3)
>>> y
threeDPoint(x=1, y=2, z=3) 
```

# asp.net - 什么处理 MVC 应用程序中的 ajax/json？

> ID：10358011
> 
> 赞同：0
> 
> 时间：2012-04-27T21:19:17.437
> 
> 标签：asp.net, ajax, asp.net-mvc

我曾经使用 asmx 来处理来自页面的 ajax 调用，但我读到它是一个遗留产品，它与 MVC 应用程序不太兼容。现在也与 MVC 兼容的 asmx 的替代品是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:24:47.197

使用控制器中的 Action 方法为您提供 Ajax 响应。您可以返回任何形式的数据，例如 HTML 标记（使用视图、Json、字符串。图像等...）

```
public ActionResult GetItems()
{
  var items=dbContext.Items;
  return Json(items,JsonRequestBehavior.AllowGet);
}
public ActionResult GetAnother()
{     
  return Content("I am just string from ajax");
} 
```

您可以使用相同的操作结果为 ajax 请求和使用 Request.IsAjax 方法的普通请求返回 HTML 标记

```
public ActionResul Getcustomer(int id)
{
  var customer=dbcontext.Customer.Find(id);
  if(Request.IsAjax())
  {
     return View("PartialCustomerForm",customer);
  }
  return View("RegularCustomerForm",customer);

} 
```

要从您的页面调用这些方法，您可以使用 jquery ajax

```
$.get("@Url.Action("GetItems","Customer")", { id: 3 },function(data){
   //do whatever with the response. //alert(data);
}); 
```

# python - 如何使用 Python 将 base64 文件插入到特定标签中

> ID：10358012
> 
> 赞同：0
> 
> 时间：2012-04-27T21:19:22.880
> 
> 标签：python, base64

```
<book>
  <title>sponge bob</title>
  <author>Joe Doe</author>
  <file>Tbase</file>
</book> 
```

我有 2 个文件，一个是 xml，另一个是 base64 文件。我想知道如何使用 python 将字符串“Tbase”插入和替换为 base64 文件的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:34:30.583

您是否要将 base64 文件（仍为 base64 编码）的逐字内容放入 XML 文件中，而不是“Tbase”？如果是这种情况，您可以执行以下操作：

```
xml = open("xmlfile.xml").read()
b64file = open("b64file.base64").read()
open("xmlfile.xml", "w").write(xml.replace("Tbase", b64file)) 
```

（如果您使用的是 Python 2.6 或更高版本，则可以使用 with 语句更简洁地执行此操作，但这是另一个讨论。）

如果您想先*解码*base64 文件，然后将解码后的内容放入 XML 文件，那么您可以将`b64file`上面示例的最后一行替换为`b64file.decode("base64")`.

当然，如上所述，进行简单的文本替换，如果标题或作者也包含“Tbase”，则会遇到问题。更好的方法是使用实​​际的 XML 解析库，如下所示：

```
from xml.etree.ElementTree import fromstring, tostring
xml = fromstring(open("xmlfile.xml").read())
xml.find("file").text = open("b64file.base64").read()
open("xmlfile.xml", "w").write(tostring(xml)) 
```

这将`<file>`标记的内容设置为文件的内容`b64file.base64`，而不管它以前的内容是什么，也不管“Tbase”是否出现在 XML 文档的其他地方。

# coldfusion - 带有 XML 数据的 structKeyExists 不起作用

> ID：10358016
> 
> 赞同：0
> 
> 时间：2012-04-27T21:19:29.463
> 
> 标签：coldfusion

我正在使用以下 XML 提要并使用 structKeyExists 和 CFLoop 来显示它包含的数据。

```
<cfoutput>
<cfxml variable="eating">
<catalog>
<results>10    </results>
<food id="bk101">
<initials type="thefirst" name="BK"/>
<initials type="thesecond" name="KB"/>
<keywords>Burger King, pie, hamburgers, fries, milkshakes    </keywords>
</food>
<food id="bk102">
<initials type="thefirst" name="TB"/>
<initials type="thesecond" name="BT"/>
<keywords>Taco Bell, tacos, churros, burrito, gorditas    </keywords>
</food>
<food id="bk103">
<keywords>Pizza Hut, pizza, cheese, garlic bread    </keywords>
</food>
<food id="bk104">
<initials type="thefirst" name="CFA"/>
<initials type="thesecond" name="AFC"/>
<keywords>Chick-Fil-A, chicken, chicken wrap, sauce, Bananas Pudding Milkshake    </keywords>
</food>
<food id="bk105">
<initials type="thefirst" name="PE"/>
<initials type="thesecond" name="EP"/>
<keywords>Panda Express, rice, egg rolls, general tso    </keywords>
</food>
<food id="bk106">
<initials type="thefirst" name="SJ"/>
<initials type="thesecond" name="JS"/>
<keywords>Sakura Japan, rice, spring rolls, bento    </keywords>
</food>
<food id="bk107">
<initials type="thefirst" name="FG"/>
<keywords>Five Guys, fries, burgers, hot dogs    </keywords>
</food>
<food id="bk108">
<initials type="thefirst" name="TN"/>
<initials type="thesecond" name="NT"/>
<keywords>Tandoori Nights, biryani, chicken, egg rolls    </keywords>
</food>
<food id="bk109">
<initials type="thefirst" name="HoK"/>
<keywords>House of Kabob, rice, bread, beef kabaob, chicken kabob    </keywords>
</food>
<food id="bk110">
<initials type="thefirst" name="BF"/>
<initials type="thesecond" name="FB"/>
<keywords>Baja Fresh, quesadilla, soft taco, chili con queso    </keywords>
</food>
</catalog>
</cfxml>
</cfoutput>

<cfset data = queryNew("id,initials,initials2,keywords","integer,varchar,varchar,varchar")>

<cfloop index="x" from="1" to="#eating.catalog.results.xmlText#">
    <cfif structKeyExists(eating.catalog.food[x],"initials")>
        <cfset queryAddRow(data)>
        <cfset querySetCell(data,"id",x)>
        <cfset querySetCell(data,"initials", eating.catalog.food[x].initials[1].xmlattributes.name )>
        <cfset querySetCell(data,"initials2", eating.catalog.food[x].initials[2].xmlattributes.name )>
        <cfset querySetCell(data,"keywords", eating.catalog.food[x].keywords )>
     </cfif>

</cfloop>

<cfoutput query="data">
#id# - #initials# :: #initials2# :: #keywords#  <br /><br />
</cfoutput> 
```

您会注意到 XML 提要中元素 3 缺少一个初始标记，元素 7 和 9 缺少两个初始标记。如果将缩写标签添加到 Elements 3、7、9 的 XML 中，则代码运行良好。但是，由于它们丢失，这会导致错误被抛出一个错误。

我想做的是从我的结果中省略元素 3（以及所有其他导致错误的条目）并防止显示任何错误，因此应用程序结果显示如下：

1 - BK :: KB :: 汉堡王、馅饼、汉堡、薯条、奶昔

2 - TB :: BT :: 塔可钟、玉米饼、油条、墨西哥卷饼、gorditas

4 - CFA :: AFC :: Chick-Fil-A、鸡肉、鸡肉卷、酱汁、香蕉布丁奶昔

5 - PE :: EP :: 熊猫快递，米饭，蛋卷，左宗棠

6 - SJ :: JS :: 日本樱花，米饭，春卷，便当

8 - TN :: NT :: Tandoori Nights, biryani, 鸡肉, 蛋卷

10 - BF :: FB :: Baja Fresh、油炸玉米饼、软炸玉米饼、辣椒酱

请注意，我的示例已简化，实际上我正在使用包含数百个元素的 XML 提要。考虑到这一点，我做错了什么，我怎样才能让上面的内容正确显示？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T21:34:41.240

StructKeyExists() 工作得很好，但您需要检查以确保第二个首字母也存在。添加 ArrayLen(eating.catalog.food[x].initials) GT 1 （或 EQ 2，如果你知道它总是 2）将解决它。

```
<cfif structKeyExists(eating.catalog.food[x],"initials") AND ArrayLen(eating.catalog.food[x].initials) GT 1> 
```

通过此修复，您给出的示例输出 1、2、4、5、6、8 和 10。如果要打印 7 和 9，只需将检查移至此处：

```
<cfif structKeyExists(eating.catalog.food[x],"initials")>
    <cfset queryAddRow(data)>
    <cfset querySetCell(data,"id",x)>
    <cfset querySetCell(data,"initials", eating.catalog.food[x].initials[1].xmlattributes.name )>
    <cfif ArrayLen(eating.catalog.food[x].initials) GT 1>
        <cfset querySetCell(data,"initials2", eating.catalog.food[x].initials[2].xmlattributes.name )>
    </cfif>
    <cfset querySetCell(data,"keywords", eating.catalog.food[x].keywords )>
 </cfif> 
```

# mysql - MySQL 水平连接两个查询

> ID：10358018
> 
> 赞同：5
> 
> 时间：2012-04-27T21:19:51.870
> 
> 标签：mysql

我有一个查询可以正常工作以提取公司 A 的一系列目标和总工作时间。我想为公司 B 运行完全相同的查询并在一个公共日期加入它们，该日期恰好按周分组。我目前的查询：

```
SELECT * FROM (
  SELECT org, date,
         ( SELECT SUM( target ) FROM target WHERE org = "companyA" ) AS companyA_target,
         SUM( hours ) AS companyA_actual
  FROM time_management_system
  WHERE org = "companyA"
  GROUP BY WEEK( date )
  ORDER BY DATE
) q1

LEFT JOIN (
  SELECT org, date,
         ( SELECT SUM( target ) FROM target WHERE org = "companyB" ) AS companyB_target,
         SUM( hours ) AS companyB_actual
  FROM time_management_system
  WHERE org = "companyB"
  GROUP BY WEEK( date )
  ORDER BY DATE
) q2 

ON q1.date = q2.date 
```

结果显示公司A的所有日期/信息，但公司B仅显示零星数据。另外，这两个查询将显示完全相同的日期集，只是“目标”和“实际”列中的信息不同。

```
companyA    2012-01-28  105.00  39.00   NULL      NULL          NULL   NULL 
companyA    2012-02-05  105.00  15.00   NULL      NULL          NULL   NULL
companyA    2012-02-13  105.00  60.50   companyB  2012-02-13    97.50  117.50 
```

知道为什么我没有获得公司 B 的所有信息吗？

作为旁注，是否有人能够指出将每行的周值转换为列的方向？只有companyA和companyB是两行？

我感谢所有的帮助！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:23:52.930

你的两个子查询都是错误的。

要么你想要这个：

```
SELECT 
org,
WEEK(date),
( SELECT SUM( target ) FROM target WHERE org = "companyB" ) AS companyB_target,
SUM( hours ) AS companyB_actual
FROM time_management_system
WHERE org = "companyB"
GROUP BY WEEK( date ) 
```

否则你想要这个：

```
SELECT 
org,
date,
( SELECT SUM( target ) FROM target WHERE org = "companyB" ) AS companyB_target,
SUM( hours ) AS companyB_actual
FROM time_management_system
WHERE org = "companyB"
GROUP BY date 
```

您现在执行的方式不是正确形成 SQL。在几乎任何其他数据库中，您的查询都会立即失败并出现错误。MySQL 更宽松，运行查询但给出不确定的结果。

*   [GROUP BY 和 HAVING 隐藏列](http://dev.mysql.com/doc/refman/5.6/en/group-by-hidden-columns.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T23:35:29.573

如果目标表中没有明显的日期，则总和将在所有周内保持不变。因此，我只对 A 公司和 B 公司的那些“组织”值进行了预查询，并带有 group by。这将确保每个“组织”只有 1 条记录，因此您不会得到笛卡尔结果。

然后，我正在查询两家公司的 time_management_system ONCE。在字段计算中，我正在应用 IF() 来测试公司价值并在正确时应用。最终结果中两者的WEEK活动是相同的，所以我不必单独做并加入。这也避免了日期列出现两次的需要。我也不需要显式添加 org 列名，因为最终的列名反映了这一点。

```
SELECT
      WEEK( tms.date ) as GrpWeek,
      IF( tms.org = "companyA", TargetSum.CompTarget, 00000.00 )) as CompanyATarget,
      SUM( IF( tms.org = "companyA", tms.hours, 0000.00 )) as CompanyAHours,
      IF( tms.org = "companyB", TargetSum.CompTarget, 00000.00 )) as CompanyBTarget,
      SUM( IF( tms.org = "companyB", tms.hours, 000.00 )) as CompanyBHours
   from
      Time_Management_System tms
         JOIN ( select 
                      t.org,
                      SUM( t.target ) as CompTarget
                   from 
                      Target T
                   where
                      t.org in ( "companyA", "companyB" ) 
                   group by
                      t.org ) as TargetSums
            ON tms.org = TargetSums.org
   where 
      tms.org in ( "companyA", "companyB" )
   group by
      WEEK( tms.date )
   order by
      WEEK( tms.date ) 
```

# javascript - 找到两个移动物体的更好交点

> ID：10358022
> 
> 赞同：14
> 
> 时间：2012-04-27T21:20:03.400
> 
> 标签：javascript, algorithm, math, optimization, geometry

我想极大地优化我的算法之一，我会尽量用最好的方式来解释它。

## 主题

*在t = 0*时，我们处于二维欧几里得系统中。在这个系统中有两个对象：**O1**和**O2**。

**O1**和**O2**分别位于点**PA**和**PC**处。

**O1**以**恒定且已知**的速度沿点**PB**的方向移动。物体到达 PB 时将停止。

**O2**可以在任何方向以与 O1*不同或不同的***恒定且已知**的速度移动。在时间 0，O2**没有方向**，我们需要为它找到一个方向。

 ***已知参数：

*   O1：位置、方向、速度
*   O2：位置、速度

这是系统的小图。

![系统示意图](../Images/c511ba82f4ea949b242cd1edae7c046a.png)

我们想找到点**PI**和时间**ti**：`Position of O1 at the time ti = Position of O2 at the time ti = PI`。然后我们将物体 O2 移动到点 PI 以获得**O2 的方向**。

When the direction of O2 (the point PI) is chosen and both objects O1 and O2 are on the move, **the objects will never stop or wait** for each other.

在这种情况下，结果将是这样的（PI 在这张图片上标注为 D）。 ![最佳路口](../Images/73390eb00e02b9e30af739bf89a0f54f.png)

## 算法

你可以在这个[jsfiddle](http://jsfiddle.net/mamadrood/86n9f/)找到用 JS 编写的工作算法，这也是理解问题的好方法。

这时候我使用了一个简单的算法，它可以工作，但是可以进行很多操作，我会得到最好的交叉点时间，然后得到交叉点的位置。

为了得到这个时间，我会检查一下 O1 的位置，并检查 O2 是否可能在这个时候去这个位置。如果 O2 不能及时到达物体，我们将增加 150% 的时间，但是如果 O2 可以在当时穿过 O1-B 线，我们将减少 50% 的时间。

最终，经过多次近似，我们将找到两个物体相遇的最佳时间。

*伪代码*

```
function getOptimalIntersectionTime time
   if distance between O1 and O2 at the time `time` < 1
       return time
   else if O2 could not reach the object O1 at the time `time`
       return getOptimalIntersectionTime time * 1.5
   else
       return getOptimalIntersectionTime time * 0.5 
```

## 我为什么担心？

我的算法有效，但在某些情况下（例如 jsFiddle 中的“反向案例”），需要大量的微积分才能找到最佳点。

在这个 jsFiddle 中，我们对位置（-1000 到 1000）和速度（1-200）使用了很小的值，但是这个算法在使用更大的数字时会明显变慢。

我知道过早的优化是一个坏主意，但是我在项目的最后（包括数据库插入/选择和数据分析，包括这个算法被调用了很多次）并且这个算法占据了 80%在某些情况下项目系统资源，因此改进可以真正提高系统的稳定性和响应能力。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-28T00:14:54.407

不失一般性，让 O2 位于 (0,0)。

让`s`和`v`O1 的位置和速度向量，O2`v2`的速度，以及 t 拦截的时间。然后我们有：

```
|s + v * t| = t * v2 
```

根据距离的定义：

```
(sx + vx * t) ^ 2 + (sy + vy * t) ^ 2 = (t * v2) ^ 2 
```

将其相乘并重新排序项得到：

```
 sx^ 2 + 2 * sx * vx * t + vx^2 * t^2
+ sy^ 2 + 2 * sy * vy * t + vy^2 * t^2
-                           v2^2 * t^2
= 0 
```

IE

```
 sx^2 + sy^2 + (2 * sx * vx + 2 * sy * vy) * t + (vx^2 + vy^2 - v2^2) * t^2 = 0
  \---   ---/   \------------   ----------/       \--------   ------/
      \ /                    \ /                           \ /
       c                      b                             a 
```

如您所见，这是 t 中的二次方程。我们可以简单地应用[二次公式](http://en.wikipedia.org/wiki/Quadratic_equation#Quadratic_formula)来找到两个可能的值`t`（如果方程没有解，那是因为不可能截取）。您可能希望使用最早的未来截取，即 > 0 的较小 t。

一旦你计算了`t`，找到拦截点和拦截方向应该很容易。

总而言之，这个问题可以在恒定时间内解决，不需要迭代。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T21:40:03.703

您似乎过度思考了这个问题，它应该只是简单的几何图形。

撇开如何定义*最近点*的问题不谈，让我们解决所需点位于 和 之间的`PA`情况`PB`。

我们必须假设整个周期的时间段，我们称之为`T`.

```
PI = (PB - PA) / 2;  // simplified
TI = T / 2;          // simplified 
```

[分别分解 x 和 y 坐标的所有公式]。

有相对简单的公式可以确定点 (PC) 与线 (PA -> PB) 的最近交点，尽管当该线不是无限长时，如何定义是复杂的。

然后你需要：

```
V1 = (PB - PA) / T;  // O1's velocity
V2 = (PI - PC) / T;  // O2's velocity 
```

最后两行不依赖于之前的假设——如果你知道拦截点，那么速度就是行进的距离除以所用的时间。

因此，除非您对 V2 施加一些额外的限制，否则*总会*有一个解决方案，并且它是通过一些简单的数学运算来计算的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T21:41:19.347

*更新：@Meriton 后来的回答比我的要好。我建议先试试他的。*

正如你所意识到的，我们在三个未知数 vx2、vy2 和 t 中具有三个联立方程——分别是 02 的 x 和 y 速度以及时间。不幸的是，这些方程并不都是线性的：

```
x1o + vx1*t == x2o + vx2*t
y1o + vy1*t == y2o + vy2*t
vx2*vx2 + vy2*vy2 == vy*vy 
```

（这里，x1o、y1o、x2o 和 y2o 是初始位置的坐标。）

如果有办法使问题线性化，我看不到。但是，您可以通过GPS 用来从卫星信号中计算出您的位置的相同[Newton-Raphson 技术](http://en.wikipedia.org/wiki/Newton%27s_method)反复快速地求解。当然，要填写细节并实施这将需要一些工作！

*更新：* 我*认为*@Alnitak 可能已经相当巧妙地线性化了您的问题。因此，也许他的方法和我的方法相结合会成功。（我仍然认为你会想要使用 Newton-Raphson 迭代来收敛 @Altinak's `T`。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T23:08:21.213

由于速度是固定的，这应该可以使用并行导航的思想来解决。这样想吧。在时间 0，O1 和 O2 之间有一条线（LOS，或视线）。如果 O2 遵循最佳相交路径，则在时间 1，O1 和 O2 之间的线将平行于时间 0 LOS。由于您有 O2 的速度，因此您可以计算它在时间 0 和时间 1 之间行进的距离，并由此可以计算出与时间 1 LOS 相交的位置。想象在 O2 的原始位置周围画一个圆，半径等于它在该时间间隔内行进的距离。该圆与第二个 LOS 的交点将包含解决方案。如果没有相交，就没有解。这本在线书籍的开头有一个图表和公式，显示了这个概念：

[http://www.crcnetbase.com/doi/abs/10.1201/9781420062281.ch2](http://www.crcnetbase.com/doi/abs/10.1201/9781420062281.ch2)

这个问题有现实世界的应用程序，你也可以在其中找到这个解决方案。例如，潜艇可以使用它来绘制和保持与目标的拦截航向，方法是在接近目标时保持 LOS 方位对目标的恒定。

编辑：

![在此处输入图像描述](../Images/3ec7b1a3122639e8824aff3195bf14a0.png)

这张图显示了我在说什么。除了目标 O1 直接朝向或远离导弹 O2 移动的特殊情况（这可以简单地解决），这可以使用三角函数来解决。

在上图中，我们可以花费一些任意的少量时间。在时间 t1 期间，O1 将经过距离 b，O2 将经过距离 f。t0 时刻 O1 和 O2 之间的线平行于 t1 时刻 O1 和 O2 之间的线。因为我们知道了 O1 和 O2 的初始位置，所以我们知道距离 d，并且因为我们知道了 O1 的方向，所以我们可以简单地计算角度 A。

```
So given A, b, f, and d, using the law of Cosines,
a = sqrroot(c^2 + b^2 - (2cb * cos(A)))
and
B = arccos((a^2 + c^2 - b^2)/2ac)
Using the law of Sines
E = arcsin((a * sin(B))/f)  or the ambiguous value of 180 - that value
and with that
BC = 180 - E   (because C = 180 - B - E so C+B = 180 - E 
```

有了BC我们就有了解，O1和O2的初始位置和交点的三角形的任何其他方面都可以类似地计算出来。自从我使用高中三角以来已经有很多年了，所以我可能错过了这个简化，但这希望能解释我最初描述的解决方法。***

# c# - 如何正确地将网站拆分为不同的区域？

> ID：10358028
> 
> 赞同：4
> 
> 时间：2012-04-27T21:20:30.883
> 
> 标签：c#, asp.net, e-commerce, regional-settings

我正在开发一个 ASP.NET 项目，我需要将我们当前的应用程序拆分为加拿大/美国/国际系统。此拆分将允许某些用户仅查看/修改他们有权访问的区域中的数据。

为了避免将来发生维护噩梦，我在应用程序的主表中添加了一个 RegionID，包括权限。这应该让我能够轻松地拆分所有内容，并管理允许人们看到的内容和不允许人们看到的内容。然后，根据 AD 用户，我可以保存他们的默认区域，这将让他们在每次尝试访问应用程序时都不必看到区域启动画面。

由于我从未构建过区域 Web 应用程序，这在我的脑海中听起来相当简单，但在我完全投入之前，我想知道是否有一种“按部就班”的方式来做到这一点？请记住，我宁愿不必完全重新构建此应用程序，因为我没有时间或资源这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:27:03.903

在我看来，实现这一目标的最佳方法是使用与使用不同语言或国家时相同的方法。可能您需要开发一个文件来定义用户的上下文、语言上下文、国家/地区上下文-在您的情况下是区域-。您可以使用数据库持久性和用户中每个区域的 ID 来实现此目的 - 匿名也可以 - 配置文件表或使用 cookie 保存区域上下文的详细信息。然后您可以在考虑用户区域的情况下在显示信息的普通类中使用该信息。

```
public Region RegionContext
{
    get
    {
        if (this.user != null &&
            this.user.Region!= null)
            return this.user.Region;

        var region= _region.GetAllRegions().FirstOrDefault();
        return region;
    }
    set
    {
        if (this.user == null)
            return;

        this.user.region = value;
        _user.UpdateUser(this.User);
    }
} 
```

其中 region 有 ID，user 有一个 fk to region。brgds！

# java - 路径元素包括条件

> ID：10358029
> 
> 赞同：4
> 
> 时间：2012-04-27T21:20:31.273
> 
> 标签：java, eclipse, ant

全部，

如果目录存在，有人可以帮助如何有条件地在路径元素中包含目录：所以如下所示

```
<path id="lib.path.ref">
    <fileset dir="${lib.dir}" includes="*.jar"/>
    <path location="${build.dir}" if="${build.dir.exist}"  />
</path> 
```

这目前不起作用，因为 path 元素不支持 if 属性。就我而言，如果只有 build.dir 存在，我想包含它。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T16:44:14.583

无需安装[Ant-Contrib](http://ant-contrib.sourceforge.net/tasks/tasks/index.html)或类似的 Ant 扩展，您可以使用以下 XML 完成您想要的：

```
<project default="echo-lib-path">
    <property name="lib.dir" value="lib"/>
    <property name="build.dir" value="build"/>
    <available file="${build.dir}" type="dir" property="build.dir.exists"/>

    <target name="-set-path-with-build-dir" if="build.dir.exists">
        <echo message="Executed -set-path-with-build-dir"/>
        <path id="lib.path.ref">
            <fileset dir="${lib.dir}" includes="*.jar"/>
            <path location="${build.dir}" />
        </path>
    </target>

    <target name="-set-path-without-build-dir" unless="build.dir.exists">
        <echo message="Executed -set-path-without-build-dir"/>
        <path id="lib.path.ref">
            <fileset dir="${lib.dir}" includes="*.jar"/>
        </path>
    </target>

    <target name="-init" depends="-set-path-with-build-dir, -set-path-without-build-dir"/>

    <target name="echo-lib-path" depends="-init">
        <property name="lib.path.property" refid="lib.path.ref"/>
        <echo message="${lib.path.property}"/>
    </target>
</project> 
```

这里重要的部分是`-init`目标中发生的事情。它取决于`-set-path-with-build-dir`和`-set-path-without-build-dir`目标，但 Ant 仅根据是否`build.dir.exists`设置执行一个目标。

在此处阅读有关可用任务的更多信息：http: [//ant.apache.org/manual/Tasks/available.html](http://ant.apache.org/manual/Tasks/available.html)。

# ruby-on-rails - simple_form gem 中的 text_field_tag

> ID：10358030
> 
> 赞同：2
> 
> 时间：2012-04-27T21:20:34.657
> 
> 标签：ruby-on-rails, ruby-on-rails-3, simple-form

我有这个带有[simple_form gem的表格](https://github.com/plataformatec/simple_form)

```
<%= simple_form_for(@post) do |f| %>
  <%= f.error_notification %>

  <div class="form-inputs">
    <%= f.input :title %>
    <%= f.input :description, :as => :text %>
    <%= text_field_tag 'post[tags]' %>
  </div>

  <div class="form-actions">
    <%= f.button :submit %>
  </div>
<% end %> 
```

我想以 simple_form 格式写下这一行：

```
<%= text_field_tag 'post[tags]' %> 
```

**我该怎么做？**

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T10:12:55.667

简单表单会根据模型字段的类型自动确定正确的标签。您还可以指定字段的类型（如 中`form_for`）：`f.text_field :tags`- 简单表单支持此语法。

# windows-phone-7 - 数据库课程

> ID：10358032
> 
> 赞同：-1
> 
> 时间：2012-04-27T21:20:46.450
> 
> 标签：windows-phone-7

我几乎完成了我的 Windows 7 应用程序，这是我第一次为移动设备创建应用程序，我真的需要一些帮助来了解用于 Windows 手机的数据库以及最好的网站或可能用于数据库连接的书籍，例如 MySQL 或 SQL . 请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T10:41:14.160

如果您使用 mango aka windows phone 7.1，最简单的方法是使用[内置的本地数据库](https://blogs.msdn.com/b/wriju/archive/2011/08/01/windows-phone-7-using-local-database-for-application.aspx?Redirected=true)

# java - 更简洁的方法来获取本质上是原型的自动装配字段的新实例

> ID：10358035
> 
> 赞同：2
> 
> 时间：2012-04-27T21:20:58.017
> 
> 标签：java, spring, autowired, illegalstateexception

我在尝试自动装配一个可运行的类并在不同的调用中创建它的不同实例并将其保存在一个数组中时遇到了这个问题。

xml配置为：

```
<bean name="threadName" Class="ABC" scope="prototype" /> 
```

在我的代码中，我正在尝试这样的事情：

```
public class ThreadHandler{

@Autowired
private ABC threadName;

//getter
ABC getThreadName(){
     return threadName;
}

public void someFunction(){
     List<ABC> abc = new ArrayList(ABC>();
     for (int i=0;i<SOME_CONST;i++){
          ABC tName = getThreadName();
          abc.add(tName);
          tName.start();
      }
} 
```

}

让我们`ABC`成为一个类`Thread/Runnable/Callable`。

这样，它抛出`java.lang.IllegalThreadStateException`. 但是，它工作正常，如果我使用`ABC tName =appContext.getBean("threadName",ABC.class);`

为什么会这样？

我们在尝试从 getMethod 获取对象时不会得到一个新实例吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T21:42:25.057

当您需要创建 Runnable/Callable 并将其注入 applicationContext 时，有更好的做法，称为查找方法：

让我们考虑所有 Runnable/Callable 类都是 @Prototype 和 @Lazy

```
@Component(value="task")
@Scope(value="prototype")
@Lazy(value=true)
public class Task implements Runnable {

public void run(){
.....
}

} 
```

现在您需要创建查找方法工厂：

```
 <bean id="taskFactory" class="x.y.z.TaskFactory">
<lookup-method name="createTask" bean="task"/>
</bean> 
```

现在让我们实现 TaskFactory 本身，它是一个抽象类并且有一个抽象方法：

```
@Component(value="taskFactory")
public abstract class TaskFactory {

    public abstract Task createTask();

} 
```

魔法来了：

```
public class ThreadHandler{

@Autowired
private TaskFactory taskFactory;

public void someFunction(){
          Runnable task = taskFactory.createTask();
          taskExecutor.execute(task);
      }
} 
```

每次调用 taskFactory 单例对象的 createTask() 方法时。您将收到原型对象的**全新实例**。

PS：别忘了加

```
<context:annotation-config />
    <context:component-scan base-package="x.y.z"></context:component-scan> 
```

正确启用注释。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T21:28:20.620

不，您不会得到一个新对象，只是通过访问一个包含对范围为 Prototype 的 bean 的引用的字段。Spring 没有任何方法可以将您的实例级别引用替换为仅基于字段访问的新引用。它由自动装配设置一次，然后它只是对那个对象的引用。如果您希望它实际创建一个新的，您需要按照您观察到的那样使用 getBean。

您可以告诉 Spring 覆盖您的 get 方法并使用方法注入将其替换为“getBean”，以从您的 bean 中获取 Spring 依赖项：

```
<bean id="threadHandler" class="com.stackexchange.ThreadHandler">
<lookup-method name="getThreadName" bean="threadName"/>
</bean> 
```

# sql - 如何使用不同的自定义生成的主键 SQL Server 插入重复记录

> ID：10358038
> 
> 赞同：4
> 
> 时间：2012-04-27T21:21:26.207
> 
> 标签：sql, insert, sql-server-2008-r2

在 SQL Server 中，有没有简单的方法来实现以下场景？

在我的一张表中，我有大约 20 列和主键字段，我们在其中放置了生成的数字（它不是自动生成的字段）。出于某种原因，我们想用不同的主键值复制某个主键值的记录。

所以这可能是我的表数据（假设 KEYxxx 是主键字段）

```
KEY001  AA1  AA2 AA3 AA4 ... AA20
KEY002  AA1  AA2 AA3 AA4 ... AA20 
```

我正在尝试插入具有相同数据的新行：`KEY001`as`KEY002`

我曾尝试在此处使用此查询来执行此操作，但失败了，找不到`KEY002`向此查询插入新主键值 ( ) 的方法。

```
INSERT INTO mytable (FIELD1, field2,...field20) 
    SELECT (FIELD1, field2,... field20) 
    WHERE field_primary_key = 'KEY001' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T21:24:41.900

不要在 SELECT 列表中指定 PK 列，而是将其替换为新键的文字值：

```
INSERT INTO mytable (FIELD_PK, field2,...field20) 
SELECT 'KEY002', field2,...field20
from mytable
where field_primary_key='KEY001' 
```

# python - 如何保持编码字符不变

> ID：10358039
> 
> 赞同：0
> 
> 时间：2012-04-27T21:21:31.653
> 
> 标签：python, html, http, httpwebrequest, beautifulsoup

我正在使用 python 接收不同编码的网络响应，我的预期输出应该与网页上给出的相同

例如：马克·巴贝

解析 html 响应后，最后一个字符应保持不变。

目前我正在为此使用以下代码

```
unicode.join(u'\n',map(unicode,item)) 
```

在某些情况下，如果没有给出特殊编码，则会引发以下错误：例如：Markus Rygaard、Alberte Blichfeldt、Flemming Quist、Møller

```
Traceback (most recent call last):
  File "BFICrawl.py", line 20, in <module>
    print attrName + " : " + attrValue
  File "C:\Python27\LIB\encodings\cp437.py", line 12, in encode
    return codecs.charmap_encode(input,errors,encoding_map)
UnicodeEncodeError: 'charmap' codec can't encode character u'\xf8' in position 6
0: character maps to <undefined> 
```

我真的找不到相同的原因。是否有任何替代方法可用于从 web.xml 获取相同的编码内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:33:48.547

[代码页 437](http://en.wikipedia.org/wiki/Codepage_437)（正在被编码）不知道该`ø`字符，因此您的字符串无法被编码为输出。错误消息确实说明了所有这些。

所以问题是：你为什么要把字符串编码成 DOS 控制台窗口使用的代码页？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T22:21:12.397

您已成功`unicode`从 Web 获取对象。你不应该需要做类似的事情`unicode.join(u'\n',map(unicode,item))`。当您尝试输出 unicode 时，问题正在发生。

您正在 Windows“命令提示符”窗口中运行脚本。该脚本正在打印到控制台。控制台编码是`cp437`. 这是一个非常有限的（8 位）编码。它无法处理 中的第二个字符`Møller`，以及大量其他字符

补救措施：在 IDLE（随 Python 提供）或其他 IDE 中运行脚本。

或者，如果您仅出于调试目的打印到控制台，而不是`print foo`使用`print repr(foo)`

# java - webView.loadUrl 不工作

> ID：10358045
> 
> 赞同：5
> 
> 时间：2012-04-27T21:21:59.030
> 
> 标签：java, android, html, webview

这是我的代码：

```
package sai.datla.game;

import android.app.Activity;
import android.os.Bundle;
import android.webkit.WebChromeClient;
import android.webkit.WebView;

public class GametestActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        WebView webView = (WebView)findViewById(R.id.webView);
        webView.getSettings().setJavaScriptEnabled(true);
        webView.setWebChromeClient(new WebChromeClient());
        webView.clearSslPreferences();
        webView.loadUrl("file:///android_asset/www/index.html");
   }
} 
```

但它说它在模拟器中找不到链接。如果我的 index.html 文件在我的资产中的 www 文件夹中，我已经检查了很多次，但它不起作用。请帮忙。

顺便说一句，我只有十二岁，所以请让孩子们容易理解答案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-28T03:57:01.133

```
// Find view in layout
WebView wv = (WebView) findViewById(R.id.webView_tobe_loaded);    

// Get settings
WebSettings wbset = wv.getSettings();

// Enable JavaScript
wbset.setJavaScriptEnabled(true);

// Set new client (to handle website in your app)
wv.setWebViewClient(new MyWebViewClient());

// Example of the URL
String url = "http://www.google.com";

// Load website
wv.loadUrl(url); 
```

此代码将帮助您解决问题。它对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T03:09:01.760

而不是 loadUrl，尝试使用 loadDataWithBaseURL 方法：

```
webview.loadDataWithBaseURL("android.resource://<package_name>/assets/www/file_name", html, mimeType, encoding, ""); 
```

# excel-formula - 使用 VALUE 的 Excel 2010 条件格式问题

> ID：10358046
> 
> 赞同：0
> 
> 时间：2012-04-27T21:22:06.083
> 
> 标签：excel-formula, excel-2010

我正在尝试根据右两位数字的值有条件地格式化一系列单元格。我正在使用以下公式，但它不起作用：

=值（右（$N2,2））> 80

我试图避免将列分成两个单独的列（这是一个血压读数，这些数字属于一起）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T22:40:11.860

您的公式计算结果为 TRUE 和 FALSE 可以。当你说它不起作用时，我认为它根本没有做任何事情，而不是给出错误的结果。你记得设置格式，以及输入条件吗！？请记住，只有在计算结果为 TRUE 时才会格式化...如果这些都是正确的，您是否输入了公式作为条件并使用了“*使用公式确定要格式化的单元格...在此公式为真的情况下格式化值*”规则类型？

# javascript - 在旧浏览器中支持 turn.js

> ID：10358050
> 
> 赞同：2
> 
> 时间：2012-04-27T21:22:39.013
> 
> 标签：javascript, jquery, internet-explorer, page-flipping, turnjs

我用[turn.js](http://turnjs.com/)做翻页效果，在IE7/IE8上好像不太好用（在IE7模式下加载网站，你自己看看）。

什么是支持旧浏览器的最佳方式，同时在现代浏览器上保持酷翻页？（注意：我根本不需要 IE 上的热点，因为我还有专门的箭头链接，可以通过 Javascript 翻转页面，类似于 turn.js 演示。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T01:37:09.750

你有如何应用 turn.js 的示例吗？例如，您是否有链接或您的页面结构如何？这些是一个很好的起点。

当您检测到较旧的浏览器时，更多的是优雅地失败：有多种选择，有些比其他更有意义，具体取决于网站已经完成了多少。首先，完全禁用 Javascript 的网站看起来如何？我知道这不是 IE7/8 的情况，但从那里开始。它可以在没有 JS 的情况下使用吗？如果答案是“不”，如果可以的话，想办法让那个答案“是”。在考虑如何处理旧版浏览器时，这始终是一个好问题。

如果您处于网站编程的早期阶段，或者内容布局清晰，那么您可以解决旧浏览器的限制。我*尝试*遵循的一种做法是在没有 JS 或尽可能少的情况下设计网站，然后在功能上进行编程以实现“嗖嗖嗖嗖”。

在您的情况下，我会建议以下内容：如果您检测到 IE7/8（或可能无法满足要求的移动浏览器等），则加载带有规则的辅助样式表，这些规则可以为您的内容提供尽可能多的感觉尽可能的“原始”。接下来，让旧浏览器的 JS 显示/隐藏内容页面，而不是翻页 - 这可以通过左右移动页面的一些 div 来实现，然后跟踪当前页面与可能的页面（是此页之前有吗？此页之后？）以显示/隐藏导航 div。turn.js**看起来**就像是同一件事的精美动画，所以你应该可以说“嘿，这个浏览器是 IE 7 或 IE 8 - 所以，我们不要初始化 turn.js，只需将控制权交给上一页，然后下一页 div。

# ajax - 你能从 ap:ajax 监听器更新一个 h:outputLabel 吗？

> ID：10358051
> 
> 赞同：5
> 
> 时间：2012-04-27T21:22:41.520
> 
> 标签：ajax, jsf, jsf-2, primefaces

我正在尝试使用 ap:ajax 标记，然后在该侦听器中，我设置了一个名为“periodRendered”的值。然后我试图通过 p:ajax 标记的更新来更新 h:outputLabel 标记。它没有更新 ajaxily，我认为这是因为 primefaces ajax 标记无法更新标准的 jsf outputLabel 标记。

我的假设是否正确，是否应该使用更合适的标签来代替 h:outputLabel ？

```
<h:outputLabel for="addProgramTo" value="Add Program To" />
<p:selectOneMenu value="#{ppBacker.grantProgram.grant_project_id}" id="addProgramTo" size="1" styleClass="listBoxMedium">
    <p:ajax process=":addProgram:addProgramTo" update=":addProgram:periodGrid, :addProgram:periodLabel" event="change" listener="#{ppBacker.addProgramListener}" />
    <f:selectItems value="#{ppBacker.grantProjectDropDownList}" />
</p:selectOneMenu>            

<h:outputLabel for="period" value="Period" id="periodLabel" rendered="#{ppBacker.periodRendered}"> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-29T06:41:42.137

您无法更新未呈现的元素，`rendered=false`“是一种 JSF 方式”以从 DOM 树中删除元素，

它不像css`display:none`或`visibility:hidden` <-这两个将保留DOM树中的元素但隐藏，而JSF`rendered=false`甚至不会渲染（保留）DOM树中的元素（你甚至不会在页面的“查看源代码”中看到它)

因此，在您的情况下，您需要`outputLabel`使用“panelGroup”包装并更新包装器的 id

```
<h:panelGroup id="periodLabelWrapper">
    <h:outputLabel for="period" value="Period" id="periodLabel" rendered="#{ppBacker.periodRendered}">
</h:panelGroup> 
```

`<p:ajax` `update`并在属性中引用包装器（始终位于 DOM 树中）id ，如下所示：

```
<p:ajax process=":addProgram:addProgramTo" update=":addProgram:periodGrid, :addProgram:periodLabelWrapper" event="change" listener="#{ppBacker.addProgramListener}" /> 
```

另一种解决方案是像这样更新整个表单`<p:ajax update="@form" ...`，这样您就不需要包装`outputLabel`

**关于你的评论问题**

> @form 如何更新未渲染的元素，但直接通过 id 定位它们却没有？

您不能定位`update`页面中不存在的元素（rendered=false）“它不存在”

但是，当您使用`update="@form"`或`update="someWrapperID"`表单/包装器“重新评估”其所有内部元素时，包括那些带有`rendered="#{someBean.someCondition}"`并且条件被“重新评估”的元素，因此如果它导致元素`true`将被显示......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T22:11:17.883

我不确定这种行为的原因，但我认为 p:ajax 需要一个活动目标才能使更新工作。这是它工作/不工作的一个例子：

```
<h:body styleClass="center">
    <f:view contentType="text/html">
        <h:form id="test">
            <h:outputLabel for="addProgramTo" value="Add Program To: " />
            <h:selectOneMenu id="addProgramTo" value="#{testScope.target}">
            <p:ajax update=":test:periodLabel, :test:wrapper" event="change" process="@form">
            </p:ajax>
            <f:selectItems value="#{testScope.values}"/>
            </h:selectOneMenu>            
            <hr />
            <p:outputPanel id="wrapper">
                <h:outputLabel value="Works, has a target" rendered="#{testScope.timeToRender}"/>
            </p:outputPanel>
            <hr />
            <h:outputLabel value="does not work" id="periodLabel" rendered="#{testScope.timeToRender}" />   
        </h:form>
    </f:view>

</h:body> 
```

//豆...

```
@ViewScoped
@ManagedBean(name = "testScope")
public class TestScope
{
    private String[] values = { "False", "What?", "True" };
    private String target = "Nothing";

    /**
     * @return the target
     */
    public String getTarget()
    {
        return target;
    }

    /**
     * @return the values
     */
    public String[] getValues()
    {
        System.out.println(values);
        return values;
    }

    public boolean isTimeToRender()
    {
        return "True".equals(target);
    }

    /**
     * @param target the target to set
     */
    public void setTarget(String target)
    {
        this.target = target;
    }
} 
```

我没有时间深入研究这个，但是从调试器中的快速查看（再次快速）看来它没有找到 ID（它没有呈现）所以它没有得到更新. 为什么？我不确定——简单的解决方法是将它放在可以更新的东西（p：outputPanel）中并将其呈现为跨度，然后你的代码应该可以工作。这可以接受吗？并不真地...

如果您可以处理完整的表单更新，则以下内容也可以使用->

```
<p:ajax update=":test" event="change" process="@form"> 
```

由于您的目标是封闭表单，因此它会更新所有子表单。如果我这样做，那就是我会使用的解决方法。它不是很多数据，而且非常干净。我不确定这是错误还是功能。不过感觉很坑。

简短的回答：是的，您可以定位标签。长答案：您不能针对未渲染的目标。我真的希望这会有所帮助。

# node.js - Node.js + Express - 如何让 Mustache 部分工作？

> ID：10358053
> 
> 赞同：7
> 
> 时间：2012-04-27T21:23:06.130
> 
> 标签：node.js, express, mustache

我正试图让 Mustache 与 Express 一起正常工作，正如人们可以猜到的那样，我遇到了麻烦。

以下行将 Mustache 初始化为干净整洁。变量按预期呈现。

```
app.register('html', require(__dirname+'/public/js/libs/mustache.js')); 
```

但是，当混音中加入偏音时，问题开始上升。使用 Mustache，这里的部分应该调用标题视图/部分。

```
{{> header}} 
```

但很可惜，什么也没有发生。:/ 即使我直接提供部分，Mustache 也无法渲染它。

```
app.get('/', function(req, res) {
    res.render('welcome', {
        partials: {
            header: '<h1>Header</h1>'           
        }
    });
}); 
```

所以，似乎部分根本不起作用。我发现了一种可以使部分部分起作用的技巧：

[http://bitdrift.com/post/2376383378/using-mustache-templates-in-express](http://bitdrift.com/post/2376383378/using-mustache-templates-in-express)

之后，在渲染调用中直接提供部分渲染（见上文），但在将部分直接渲染到视图/布局时仍然失败：

**布局看起来像这样：**

```
Behold, the header
{{> header}}
<p>Let's move to more important stuff...</p> 
```

**标题视图看起来像这样：**

```
<h1>Header</h1> 
```

Express 可以自己加载视图，但它不知道如何处理 Mustache 部分......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-08-07T14:20:07.427

使用 express （至少版本 3）和[mustache-express](https://github.com/bryanburgers/node-mustache-express#readme)，您可以像往常一样使用以大于号开头的双胡须加载部分。

首先考虑在我们的`app.js`文件中附加以下内容：

```
/** import the module */

import mustache from 'mustache-express';

/** view engine setup */

app.engine('mst', mustache());
app.set('view engine', 'mst');
app.set('views', path.join(__dirname, 'mvc/views'));

/** the route where we will display the partials */

app.get('/', (req, res) => {
  let view = {
    title: 'Homepage',
    // ...
  };

  /** we are going to use a file called template.mst for rendering */
  res.render('template', view);
}); 
```

任何以大于号（即`{{> file}}`）开头的双胡须将被视为[部分](https://github.com/janl/mustache.js#partials)的。部分中的文件将在运行时呈现。将此文件视为我们要插入的部分文件：

**mvc/views/partial.mst**

```
<h2>418 | I'm a teapot</h2> 
```

这是我们的模板：

**mvc/views/template.mst**

```
<h1>template.mst file</h1>

<!-- output: <h2>418 | I'm a teapot</h2> -->
{{> partial}} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-24T14:02:38.690

设法使它与最新版本的 hogan-express 一起工作。

[https://github.com/vol4ok/hogan-express](https://github.com/vol4ok/hogan-express)

所需要的只是安装 hogan-express 并将其用作 express 上的模板引擎。无需破解或调整。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T17:13:27.647

我不确定你的确切内容是什么......我使用来自 npm 的 mustache 模块 +[你链接到](http://bitdrift.com/post/2376383378/using-mustache-templates-in-express%20%22%22)`./public/js/libs/mustache.js`的模板对象的变体。

无论如何，您传递给的对象`app.register`需要`mustache.to_html(template, locals, partials)`在某个时候调用。

您需要将 partials 对象作为第三个参数传递给 mustache's `to_html`。

# firefox - 这个 Firefox 符号是什么意思？

> ID：10358054
> 
> 赞同：1
> 
> 时间：2012-04-27T21:23:07.370
> 
> 标签：firefox, anchor

这个撕纸的符号出现在我`<a>`在 Firefox 浏览器中的一些标签上。

这是一个例子：

![例子](../Images/0c86e364a78142097b13d1f146cfa8b2.png)

有谁知道这意味着什么？

谢谢！！

**更新**：这里有一些代码：

```
<a href="#"  onClick="jQuery('#youtube-player-container').tubeplayer('play');">
<img class="mp3button" style="background-image:url('/mp3_play.png');background-size:100% 100%;" />
</a> 
```

（图像确实出现了，所以这不是 img src 的问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T00:50:20.380

撕纸图标用于损坏的图像 src。如果您请求的图像不存在，您会看到它，即：

```
<img src="notarealimage.jpg"/> 
```

在您的情况下，您没有 src 属性，这就是浏览器将其视为损坏图像的原因。
鉴于您在 img 标签上使用背景图像，我建议将 img 标签更改为 span 或 div 标签，或者只是将 style 属性添加到 a 标签并完全删除 img 标签，即：

```
<a href="#"  onClick="jQuery('#youtube-player-container').tubeplayer('play');" class="mp3button" style="background-image:url('/mp3_play.png');background-size:100% 100%;"></a> 
```

# c# - 数据表未绑定到网格视图

> ID：10358055
> 
> 赞同：0
> 
> 时间：2012-04-27T21:23:08.953
> 
> 标签：c#, datagrid, datagridview, datatable

我正在创建一个数据表并尝试将其与网格视图绑定。

代码：

```
 DataTable timeTable = new DataTable();

        DataColumn colSubject = new DataColumn("Subject Name");
        DataColumn colClass = new DataColumn("Class");
        DataColumn colTeacher = new DataColumn("Lecturer");
        DataColumn colStartTime = new DataColumn("Start");
        DataColumn colEndTime = new DataColumn("End");

        colSubject.DataType = System.Type.GetType("System.String");
        colClass.DataType = System.Type.GetType("System.String");
        colTeacher.DataType = System.Type.GetType("System.String");
        colStartTime.DataType = System.Type.GetType("System.String");
        colEndTime.DataType = System.Type.GetType("System.String");

        timeTable.Columns.Add(colSubject);
        timeTable.Columns.Add(colClass);
        timeTable.Columns.Add(colTeacher);
        timeTable.Columns.Add(colStartTime);
        timeTable.Columns.Add(colEndTime);

        int numOfRows = 0;

        SqlDataReader read = null;
        try
        {

            conn.Open();
            read = getTimetable.ExecuteReader();

            if (read.HasRows)
            {
                while (read.Read())
                {
                    if (numOfRows < 3)
                    {
                        DataRow row = timeTable.NewRow();
                        row[colSubject] = read["subject_name"].ToString();
                        row[colClass] = read["resource_name_number"].ToString();
                        row[colTeacher] = read["userDetail_name"].ToString();
                        row[colStartTime] = read["timeSlot_startTime"].ToString();
                        row[colEndTime] = read["timeSlot_endTime"].ToString();

                        timeTable.Rows.Add(row);
                        numOfRows++;
                    }

                }

                gridTimeTable.DataSource = timeTable;
                gridTimeTable.DataBind();
            }
        } 
```

现在数据表创建得很好，所有原因我使用了一个断点来查看它是否正在创建，事情是它没有填充网格视图。有任何想法吗？

谢谢 ：）

# objective-c - 当我按 Enter 时，我的 NSTextField 会突出显示文本。？我只想“输入”在字段中放置一个“NewLine”字符，以便我可以继续输入

> ID：10358056
> 
> 赞同：0
> 
> 时间：2012-04-27T21:23:10.990
> 
> 标签：objective-c, cocoa

我只想“输入”在字段中放置一个“NewLine”字符，以便我可以继续输入。谢谢

```
- (void)someAction:(id)sender
{
    NSString *s = [tf1 stringValue];
    [tf1 setStringValue:[NSString stringWithFormat:@"%@%@",s, @"\nEnter\n" ]];
}

- (void)myRun:(NSButton*)btn
{
    NSString *s = [tf1 stringValue];
    [tf1 setStringValue:[NSString stringWithFormat:@"%@%@",s, @"hello\nthere" ]];
}

- (void)windowControllerDidLoadNib:(NSWindowController *)aController
{
    [super windowControllerDidLoadNib:aController];
    // Add any code here that needs to be executed once the windowController has loaded the document's window.

    //[aController.window setFrame:CGRectMake(10,10,1000,600) display:TRUE];
    [aController.window setFrame:NSMakeRect(10,10,1000,600) display:TRUE];
    [aController.window setBackgroundColor:[NSColor grayColor]];

    //NSButton *b1 = [[NSButton alloc] initWithFrame:CGRectMake(10, 530, 100, 30)];
    NSButton *b1 = [[NSButton alloc] initWithFrame:NSMakeRect(10, 530, 100, 30)];
    [b1 setTitle:@"Run"];
    [b1 setAction:@selector(myRun:)];
    [aController.window.contentView addSubview:b1];

    tf1 = [[NSTextField alloc] initWithFrame:NSMakeRect(10, 10, 600, 500)];
    [aController.window.contentView addSubview:tf1];
    [tf1 setTarget:self];
    [tf1 setAction:@selector(someAction:)];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:54:27.307

[技术问答 QA1454：如何使 NSTextField 接受选项卡、返回和输入键](https://developer.apple.com/library/mac/#qa/qa1454/_index.html)

# drupal - 为某人编辑 Drupal 页面。使用未过滤的 HTML，Drupal 是反斜杠转义我在图像标签中使用的引号。是什么赋予了？

> ID：10358062
> 
> 赞同：1
> 
> 时间：2012-04-27T21:23:51.037
> 
> 标签：drupal

我对 Drupal 一无所知，但我正在帮助某人编辑他们正在为会议工作的 Drupal 页面。

我为他们做的一件事是根据从我提供的 CSV 文件中抓取的一些图片和数据自动生成一个表格。表中的典型行如下所示：

```
<tr>
    <td>
        <img src="http://external.host/pics/pic.jpg" height="100" style="height:100;" />
    </td>
    <td>
        <h3>Name</h3><p>Organization<br />Country of Origin</p>
    </td>
</tr> 
```

问题是，即使使用完全未过滤的 HTML（内容类型的配置绝对没有检查任何内容），在保存表格后，Drupal 正在转义图像标签内的所有引用。

这破坏了标签，我得到了一堆破损的图像。

我错过了什么？

**编辑： Drupal 7**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T19:59:20.897

我的解决方法是关闭 php.ini 中的魔术引号，认为在托管方面发生了一些变化，因为此设置在过去 3 年中一直处于启用状态。magic_quotes_gpc = 关闭

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T21:52:59.543

同样的问题在这里和 turn 有`magic_quotes_gpc`帮助，但我需要在 php.ini 文件中执行此操作，在 .htaccess 中将其设置为关闭，正如 Drupal 默认情况下所做的那样，不一定有帮助，具体取决于 PHP 配置。

有关更多信息，请参见[http://drupal.org/node/1437998](http://drupal.org/node/1437998)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T21:27:52.000

您的视图是否显示节点或字段？如果是节点，您指的是预告片还是完整节点？

带有字段的视图不会保留与完整内容（节点）相同的格式或 HTML/CSS 结构。您的视图可以返回与内容页面显示相同的内容列表或预告片。否则，您将需要编写特定于您创建的字段视图的 CSS。

**答案已编辑**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T23:23:35.253

我无法明确说明为什么会发生这种情况，但正如 Maya 所说并且我最初的怀疑是倾斜的，这很可能是某种后端数据库条目清理的结果。

但是，我能够找到解决方法。只需使用未引用的属性。尽管它不被认为是好的做法，而且读起来肯定很难看，但这是我能够做的唯一事情，以防止 Drupal 用反斜杠转义引号并破坏我的标记。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-28T04:20:12.917

有完全相同的问题 - 今天才开始。我终于不得不更新数据库中的节点来更新它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-28T04:28:58.870

我认为这个问题有点不清楚。你把 CSV 文件的信息放在哪里了。在单独的表中？在节点的主体字段内？另外，您是如何导入数据的？更重要的是，您如何以及在哪里打印这些数据？

无论如何，您可以创建一个新表并在文件的 tpl 中打印信息。或者，您可以安装 php 字段格式并直接从 php.ini 打印。

# c++ - 来自 Beta 分布的随机数，C++

> ID：10358064
> 
> 赞同：8
> 
> 时间：2012-04-27T21:23:53.537
> 
> 标签：c++, boost, boost-random, beta-distribution

我用 C++ 编写了一个模拟，它根据特定的概率分布生成 (1,000,000)^2 个数字，然后对它们进行处理。到目前为止，我使用了指数、正态、伽玛、均匀和泊松分布。这是其中之一的代码：

```
#include <boost/random.hpp>

...main...

    srand(time(NULL)) ;
    seed = rand();
    boost::random::mt19937 igen(seed) ;
    boost::random::variate_generator<boost::random::mt19937, boost::random::normal_distribution<> >
    norm_dist(igen, boost::random::normal_distribution<>(mu,sigma)) ; 
```

现在我需要为 Beta 发行版运行它。到目前为止，我所做的所有分发都需要 10-15 个小时。Beta 发行版不在 boost/random 包中，所以我不得不使用 boost/math/distributions 包。我[在 StackOverflow 上找到了这个页面，](https://stackoverflow.com/questions/4181403/generate-random-number-based-on-beta-distribution-using-boost)它提出了一个解决方案。这是（复制粘贴）：

```
#include <boost/math/distributions.hpp> 
using namespace boost::math;  
double alpha, beta, randFromUnif;  
//parameters and the random value on (0,1) you drew  
beta_distribution<> dist(alpha, beta); 
double randFromDist = quantile(dist, randFromUnif); 
```

我复制了它并且它起作用了。我的模拟的运行时间估计是线性且可准确预测的。他们说这将运行 25 天。我看到了两种可能性： 1\. 提出的方法不如我之前用于其他分布的方法 2\. Beta 分布更难从中生成随机数

请记住，我对 C++ 编码的了解很少，所以我问的问题可能很愚蠢。我迫不及待地要等一个月才能完成这个模拟，所以我能做些什么来改进它吗？也许使用我使用的初始方法并修改它以使用 boost/math/distributions 包？我什至不知道这是否可能。

另一条可能有用的信息是，对于我需要生成的所有 (1,000,000)^2 数字，参数都是相同的。我这么说是因为 Beta 发行版确实有一个讨厌的 PDF，也许参数固定的知识可以以某种方式用于简化流程？只是一个随机的猜测。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T23:13:45.330

beta 分布与 gamma 分布有关。令 X 是从 Gamma(α,1) 中抽取的随机数，Y 是从 Gamma(β,1) 中抽取的随机数，其中 gamma 分布的第一个参数是形状参数。则 Z=X/(X+Y) 具有分布 Beta(α,β)。通过这种转换，它应该只需要两倍于您的 gamma 分布测试的时间。

**注意：**以上假设了伽马分布的最常见表示形式，Gamma(shape,scale)。请注意，伽马分布随机生成器的不同实现将随着参数的含义和顺序而变化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-10T17:12:08.197

如果您想要一个非常类似于 Beta 的分布，但具有非常简单的封闭式逆 CDF，则值得考虑 Kumaraswamy 分布：

[http://en.wikipedia.org/wiki/Kumaraswamy_distribution](http://en.wikipedia.org/wiki/Kumaraswamy_distribution)

当需要快速大量随机样本时，它被用作 Beta 分布的替代方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T21:43:56.550

尝试使用优化进行编译。使用标志 -O3 通常会加快速度。有关更多详细信息，请参阅[有关优化标志的这篇文章](https://stackoverflow.com/questions/796162/g-compiler-flags-optimization-and-flags-for-making-a-static-library-c)或[此概述](http://www.network-theory.co.uk/docs/gccintro/gccintro_49.html)。

# ember.js - 加载 ember.js 对象时动画 gif 暂停

> ID：10358065
> 
> 赞同：6
> 
> 时间：2012-04-27T21:24:02.227
> 
> 标签：ember.js

在 ember.js 执行此操作时，实际上旋转的微调器出现问题。我有一个非常通用的 jsfiddle 示例来说明这个问题：

[http://jsfiddle.net/h4ZcZ/2/](http://jsfiddle.net/h4ZcZ/2/)

我认为必须有一种简单的方法可以使这项工作按预期进行，但我没有找到它。我尝试使用具有相同结果的微调器 (spin.js) 的 JavaScript/CSS 实现。我看到一些东西表明这通常是一个 IE 问题，但这里不是这种情况。这发生在 Windows 上的所有浏览器上，我也在 Mac Safari 上进行了测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T00:35:36.350

至于根本原因，@ChristopherSwasey 是正确的。我就此询问了其他几位 Ember 开发人员。没有解决方案，但有两个有趣的想法可能会有所帮助：

1) 一位开发人员报告说他遇到了这个问题，并通过确保动画 gif 在长时间的 javascript 执行之前启动来解决这个问题。

2）另一位开发人员建议使用虚拟化列表是正确的路径，以便只呈现可见节点。但是，恐怕我还不知道开源的 Ember 虚拟化列表类。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T21:56:16.923

问题是你的 for 循环——你基本上是在锁定线程。我会使用超时并将要完成的工作分块，以使页面上的其他处理需求能够执行。

# android - osmdroid GoogleTilesOverlay 平滑调整大小缩放

> ID：10358068
> 
> 赞同：3
> 
> 时间：2012-04-27T21:24:43.320
> 
> 标签：android, google-maps, osmdroid

在 Google Tile Wrapper 示例之后，我使用 osmdroid GoogleTilesOverlay 实现了一个 google MapView。

```
 com.google.android.maps.MapView googleMapView;
    org.osmdroid.google.wrapper.MapView osmdMapView;
    org.osmdroid.google.overlay.GoogleTilesOverlay tiles;

    final MapView googleMapView = (com.google.android.maps.MapView.MapView) findViewById(R.id.plan_mapview);
    osmdMapView = new org.osmdroid.google.wrapper.MapView(gMapView);

    // snip Provider instantiation etc.

   overlayTiles = new GoogleTilesOverlay(provider, getApplicationContext());
   gMapView.getOverlays().add(overlayTiles); 
```

静止时，覆盖图块渲染良好，但是在缩放（捏合或通过控件）时，底层谷歌图块会调整大小并被平滑替换，但 osmd 覆盖层不会调整大小。

结果：当放大仍然在视图中的图块时，它们开始重叠。相反，当缩小时，每个图块之间的间隙变得可见。

在我看来，第一步是对 GoogleTilesOverlay 进行子类化，以便我可以修改 draw() 方法。但是然后呢？

我已经用谷歌搜索了一些指向：a）在动画中间时短路draw（）方法b）使用Projector / Matrix类来确定如何动态缩放覆盖

不幸的是，我不是 Android API 方面的专家，所以不确定该走哪条路……然后是如何最好地实施解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:01:37.690

您需要对`GoogleTilesOverlay`.

因为它绘制了一个恒定大小的矩形`(x,y,x+tileSizePx,y+tileSizePx).`

简单而基本的方法，只需获取两个图块`(x,y and x+1,y+1)`并减去像素差异。

*看下面的代码：*

```
 final GeoPoint geoPointUL = new GeoPoint(
                        (int) (Mercator.tile2lat(y, zoomLevel) * 1E6),
                        (int) (Mercator.tile2lon(x, zoomLevel) * 1E6));                    

                final GeoPoint geoPointLR = new GeoPoint(
                        (int) (Mercator.tile2lat(y+1, zoomLevel) * 1E6),
                        (int) (Mercator.tile2lon(x+1, zoomLevel) * 1E6));

                Point pointUL=new Point(), pointLR=new Point();
                pj.toPixels(geoPointUL, pointUL);
                pj.toPixels(geoPointLR, pointLR);
                tileSizePx = pointLR.x - pointUL.x; 
```

# c# - 给定类的 log4net 配置不起作用

> ID：10358073
> 
> 赞同：0
> 
> 时间：2012-04-27T21:25:09.467
> 
> 标签：c#, asp.net, log4net, consoleappender

```
namespace Com.Foo
{
    public class Bar
    {

        private static readonly ILog log = LogManager.GetLogger(typeof(Bar));

        public void DoIt()
        {
            log.Info("Did it again!");
        }
    }
}

class Program
{
    private static readonly ILog log = LogManager.GetLogger(typeof(Program));
    static void Main(string[] args)
    {
        string sfile = @"C:\development\Framework\Logging\ConsoleApplication1\app.config";
        XmlConfigurator.Configure(new System.IO.FileInfo(sfile));
        log.Info("Entering application.");
        Bar bar = new Bar();
        bar.DoIt();
        log.Info("Exiting application.");

        Console.ReadLine();
    }

} 
```

我的 log4net 配置如下所示：

```
<!-- A1 is set to be a ConsoleAppender -->
<appender name="A1" type="log4net.Appender.ConsoleAppender">

  <!-- A1 uses PatternLayout -->
  <layout type="log4net.Layout.PatternLayout">
    <conversionPattern value="%-4timestamp [%thread] %-5level %logger %ndc - %message%newline" />
  </layout>
</appender>

<!-- Set root logger level to DEBUG and its only appender to A1 -->
<root>
  <level value="DEBUG" />
  <appender-ref ref="A1" />
</root>

<!-- Print only messages of level WARN or above in the package Com.Foo -->
<logger name="Com.Foo">
  <level value="WARN" />
</logger> 
```

我的应用程序的输出仍然显示来自 Com.Foo 的日志

67 [10] INFO ConsoleApplication1.Program (null) - 进入应用程序。

**100 [10] INFO ConsoleApplication1.Com.Foo.Bar (null) - 又来了！**

100 [10] INFO ConsoleApplication1.Program (null) - 退出应用程序。

如何配置 Com.Foo.Bar 停止显示为 WARN 级别？

我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:58:01.883

您提供的配置应该可以工作。

当您创建记录器`Com.Foo.Bar`时，它会从层次结构中的记录器继承设置`Com.Foo`。`Com.Foo`logger 从根 logger 继承了他的 appender，但它有自己的级别，设置为`WARN`. 因此，当您尝试通过`Com.Foo.Bar`记录器编写日志记录事件时，将从层次结构中检索有效级别 - 它是层次结构树中最近的记录器级别（根记录器始终具有级别）。在您的情况下，它是`WARN`，因此日志记录事件不会传递给附加程序。

我认为您的配置与您提供的不同。也许您正在阅读错误的配置文件。试试这个代码（将使用应用程序配置文件）：

```
XmlConfigurator.Configure(); 
```

或者（甚至更好）通过属性使用配置：

```
[assembly: log4net.Config.XmlConfigurator(Watch=true)] 
```

更新

如果将记录器检索从更改`typeof(Bar)`为`"Com.Foo"`有效，那么您为我们提供了错误的 Bar 类命名空间。因为后台的log4net将类型的全名作为记录器的名称。因此，`namespace Com.Foo`所有人都应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T23:21:00.233

我只是想通了.. 我没有在 Foo.Bar 类中正确设置记录器。

更新以下行

```
private static readonly ILog log = LogManager.GetLogger(typeof(Bar)); 
```

到以下..

```
private static readonly ILog log = LogManager.GetLogger("Com.Foo"); 
```

它奏效了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T19:02:14.217

尝试

```
<levelToMatch value="WARN" /> 
```

# python - 隐藏 Tk 根目录而不隐藏对话框窗口，并返回对话框

> ID：10358074
> 
> 赞同：0
> 
> 时间：2012-04-27T21:25:12.847
> 
> 标签：python, dialog, tk

1.  我有一个弹出 Tk 根的对话框。我想隐藏根窗口，同时保持对话框可见。我正在使用典型的：

    ```
    root = Tk()
    root.withdraw()
    dialog = myDialog(root) 
    ```

    在创建对话框后撤消不起作用。放进去也`Tk()`没用`myDialog()`。所以有点困惑似乎应该是一个简单的任务。

2.  我希望脚本在完成该过程后返回对话框窗口，引发错误，直到用户单击退出按钮。不知道如何实现这一点。

# iphone - 仅调用了第一个 For 循环

> ID：10358077
> 
> 赞同：1
> 
> 时间：2012-04-27T21:25:26.173
> 
> 标签：iphone, for-loop, subview

我有两个为视图添加子视图的 for 循环。第一个添加了所有子视图，但第二个 for 循环甚至没有执行！这是怎么回事？

```
- (void)createBoxes
{
    for (int i; i<5; i++) {
        GameBox *box = [[GameBox alloc] initWithFrame:CGRectMake((i * 64) + 7, 50, 50, 50)];
        [self.view addSubview:box];
    }
    for (int e; e<5; e++) {
        GameBox *box1 = [[GameBox alloc] initWithFrame:CGRectMake((e * 64) + 7, 107, 50, 50)];
        [self.view addSubview:box1];
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T21:49:09.627

正确的方法是初始化变量：

```
int i = 0;
int e = 0; 
```

否则你永远不知道你会得到什么价值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T21:39:04.080

为什么不初始化循环变量？这些根本不是循环的标准。

# php - 使用联合的 SQL 和 PHP 查询

> ID：10358078
> 
> 赞同：1
> 
> 时间：2012-04-27T21:25:29.367
> 
> 标签：php, sql, union

我有这个查询字符串...

```
select i.invoiceid, i.date, i.total, i.total - (select ifnull(sum(p.amount), 0) from payment p where p.invoice = i.invoiceid) as remainingbalance
        from invoice i inner join client c
        on i.client = c.clientid
        where i.isdeleted = 0 and i.client = 1
        union
        select p.paymentid, p.date, p.invoice, p.amount from payment p inner join invoice i
        on i.invoiceid = p.invoice
        inner join paymenttype
        on paymenttype.paymenttypeid = p.paymenttypeid
        inner join client c
        on c.clientid = i.client
        where c.clientid = 1
        and i.isdeleted = 0
        order by date 
```

当我尝试这个...

```
<?php
echo $clientArrayInvoice[1]['paymentid'];
?> 
```

当我在 $clientArrayInvoice 上执行 print_r 时没有得到任何结果

```
Array ( [0] => Array ( [invoiceid] => 1 [date] => 2012-04-12 [total] => 602.29 [remainingbalance] => 300.96 ) [1] => Array ( [invoiceid] => 1 [date] => 2012-04-27 [total] => 1.00 [remainingbalance] => 301.33 ) ) 
```

我理解它为什么这样做，但是我如何让列说`paymentid`而不是`invoiceid`返回结果。所以我可以确定什么是 a`paymentid`什么是 a`invoiceid`我希望这是有道理的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T21:29:53.493

```
select i.invoiceid as transactionid, i.date, i.total, 
i.total - (select ifnull(sum(p.amount), 0) from payment p where p.invoice = i.invoiceid) as remainingbalance,
'invoice' as transaction_type
        from invoice i inner join client c
        on i.client = c.clientid
        where i.isdeleted = 0 and i.client = 1
        union
select p.paymentid as transactionid, p.date, p.invoice, p.amount, 'payment' as transaction_type
        from payment p inner join invoice i
        on i.invoiceid = p.invoice
        inner join paymenttype
        on paymenttype.paymenttypeid = p.paymenttypeid
        inner join client c
        on c.clientid = i.client
        where c.clientid = 1
        and i.isdeleted = 0
        order by date 
```

# c++ - C++ Binary File 方法正在从文件中删除内容？

> ID：10358079
> 
> 赞同：1
> 
> 时间：2012-04-27T21:25:35.590
> 
> 标签：c++, binaryfiles

我有一个任务，我在各种事物上写入输入（以结构的形式），然后写入二进制文件。在程序打开时，我必须能够读取和写入文件。其中一种方法需要打印出二进制文件中的所有客户端。它似乎正在工作，除非每当我调用该方法时，它似乎都会擦除文件的内容并阻止将更多内容写入其中。以下是适用的片段：

```
fstream binaryFile;
binaryFile.open("HomeBuyer", ios::in | ios::app | ios::binary); 
```

同一个文件应该在您运行程序之间可用，所以我应该用 ios::app 打开它，对吗？

这是添加条目的方法：

```
void addClient(fstream &binaryFile) {
      HomeBuyer newClient; //Struct the data is stored in
      // -- Snip -- Just some input statements to get the client details //

      binaryFile.seekp(0L, ios::end); //This should sent the write position to the
                                     //end of the file, correct?
      binaryFile.write(reinterpret_cast<char *>(&newClient), sizeof(newClient));

      cout << "The records have been saved." << endl << endl;
} 
```

现在打印所有条目的方法：

```
void displayAllClients(fstream &binaryFile) {
    HomeBuyer printAll;
    binaryFile.seekg(0L, ios::beg);
    binaryFile.read(reinterpret_cast<char *>(&printAll),sizeof(printAll));

    while(!binaryFile.eof()) {  //Print all the entries while not at end of file
        if(!printAll.deleted)  {
             // -- Snip -- Just some code to output, this works fine //
        }

        //Read the next entry
        binaryFile.read(reinterpret_cast<char *>(&printAll),sizeof(printAll)); 
    }
    cout << "That's all of them!" << endl << endl;
} 
```

如果我单步执行该程序，我可以输入任意数量的客户端，并且它会在我第一次调用 displayAllClients() 时将它们全部输出。但是，一旦我调用 displayAllClients() 一次，它似乎就清除了二进制文件，并且显示客户端的任何进一步尝试都没有给我任何结果。

我是否错误地使用了 seekp 和 seekg？

据我了解，这应该将我的写入位置设置为文件末尾：

```
binaryFile.seekp(0L, ios::end); 
```

这应该将我的阅读位置设置为开头：

```
binaryFile.seekg(0L, ios::beg); 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T21:49:04.260

[粘贴评论，因为这解决了问题。]

您需要在设置`binaryFile.clear()`之前调用`seekp()`，`seekg()`否则`EOF`它们将不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T21:45:35.543

这是 ios::app 的文档

```
ios::app

    All output operations are performed at the end of the file, appending the
    content to the current content of the file. This flag can only be used in 
    streams open for output-only operations. 
```

既然这是作业，我会让你得出你自己的结论。

# php - 正弦回归 PHP

> ID：10358080
> 
> 赞同：3
> 
> 时间：2012-04-27T21:25:36.750
> 
> 标签：php, math, regression, trigonometry

我在 PHP 中有一个一维数据集，准确地说，是一个具有线性递增索引的数组（表示 x 轴上的值，增量为 1）和相应的值（表示 y 轴上的值） . 我的问题是：如何对这样的数据集进行正弦回归？我找到了线性、指数甚至对数回归算法，但没有找到正弦曲线。

数据集的格式如下：

f(x) 等于`$array[$x]`，其中 x ∈ ℕ</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T21:44:21.313

这是我前几天遇到的类似算法的 Python 实现，可能会有所帮助；将其翻译成 PHP 应该不会太难：

[http://exnumerus.blogspot.co.uk/2010/04/how-to-fit-sine-wave-example-in-python.html](http://exnumerus.blogspot.co.uk/2010/04/how-to-fit-sine-wave-example-in-python.html)

# ruby-on-rails-3 - Rails 3.2 资产管道、CarrierWave 和 .gitignore

> ID：10358082
> 
> 赞同：3
> 
> 时间：2012-04-27T21:26:00.973
> 
> 标签：ruby-on-rails-3, asset-pipeline, carrierwave, gitignore

我正在使用 CarrierWave gem 和 Rails 3.2。在生产中，Rails 要求我预编译用户图像文件夹。

目前我的 CarrierWave 将图像上传到 public/assets/images，我忽略了 .gitignore 中的公用文件夹。

有更好的做法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:45:41.083

[此问答](https://stackoverflow.com/questions/9043662/carrierwave-files-with-capistrano)为您提供了更好的管理 CarrierWave 上传图像的选项

# iphone - 创建 16:9 视频而不是 4:3 - AVAsset Writer - iPhone

> ID：10358086
> 
> 赞同：1
> 
> 时间：2012-04-27T21:26:30.577
> 
> 标签：iphone, objective-c, video, aspect-ratio, avassetwriter

我正在使用以下代码使用 AVAsset 编写器从静态 16:9 图像制作视频。问题是由于某种原因，制作的视频是 4:3 格式。

谁能建议一种方法，我可以修改代码以生成 16:9 视频，或者如何将 4:3 视频转换为 16:9。

谢谢

```
- (void) createVideoFromStillImage 
{
//Set the size according to the device type (iPhone or iPad).
CGSize size = CGSizeMake(screenWidth, screenHeight);

NSString *betaCompressionDirectory = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/IntroVideo.mov"];

NSError *error = nil;

unlink([betaCompressionDirectory UTF8String]);

//----initialize compression engine
AVAssetWriter *videoWriter = [[AVAssetWriter alloc] initWithURL:[NSURL fileURLWithPath:betaCompressionDirectory]
                                                       fileType:AVFileTypeQuickTimeMovie
                                                          error:&error];
NSParameterAssert(videoWriter);
if(error)
    NSLog(@"error = %@", [error localizedDescription]);

NSDictionary *videoSettings = [NSDictionary dictionaryWithObjectsAndKeys: AVVideoCodecH264,AVVideoCodecKey,
                               [NSNumber numberWithInt:size.height], AVVideoWidthKey,
                               [NSNumber numberWithInt:size.width], AVVideoHeightKey, nil];
AVAssetWriterInput *writerInput = [AVAssetWriterInput assetWriterInputWithMediaType:AVMediaTypeVideo outputSettings:videoSettings];

NSDictionary *sourcePixelBufferAttributesDictionary = [NSDictionary dictionaryWithObjectsAndKeys:
                                                       [NSNumber numberWithInt:kCVPixelFormatType_32ARGB], kCVPixelBufferPixelFormatTypeKey, nil];

AVAssetWriterInputPixelBufferAdaptor *adaptor = [AVAssetWriterInputPixelBufferAdaptor assetWriterInputPixelBufferAdaptorWithAssetWriterInput:writerInput
                                                                                                                 sourcePixelBufferAttributes:sourcePixelBufferAttributesDictionary];
NSParameterAssert(writerInput);
NSParameterAssert([videoWriter canAddInput:writerInput]);

if ([videoWriter canAddInput:writerInput])
    NSLog(@"I can add this input");
else
    NSLog(@"i can't add this input");

[videoWriter addInput:writerInput];

[videoWriter startWriting];
[videoWriter startSessionAtSourceTime:kCMTimeZero];

//CGImageRef theImage = [finishedMergedImage CGImage];
CGImageRef theImage = [introImage CGImage];

//dispatch_queue_t    dispatchQueue = dispatch_queue_create("mediaInputQueue", NULL);
int __block         frame = 0;

//Calculate how much progress % one frame completion represents. Maximum of 75%.
float currentProgress = 0.0;
float progress = (80.0 / kDurationOfIntroOutro);    
//NSLog(@"Progress is %f", progress);

for (int i=0; i<=kDurationOfIntroOutro; i++) {

    //Update our progress view for every frame that is generated.
    [self updateProgressView:currentProgress];
    currentProgress +=progress;

    //NSLog(@"CurrentProgress is %f", currentProgress);

    frame++;
    [NSThread sleepForTimeInterval:0.05]; //Delay to allow buffer to be ready.
    CVPixelBufferRef buffer = (CVPixelBufferRef)[self pixelBufferFromCGImage:theImage size:size];
    if (buffer) {
        if (adaptor.assetWriterInput.readyForMoreMediaData)
    {
        if(![adaptor appendPixelBuffer:buffer withPresentationTime:CMTimeMake(frame, 20)])
            NSLog(@"FAIL");
        else
            NSLog(@"Success:%d", frame);
        CFRelease(buffer);
    }
    }
}

[writerInput markAsFinished];
[videoWriter finishWriting];
[videoWriter release];

//NSLog(@"outside for loop");
//Grab the URL for the video so we can use it later.
NSURL * url = [self applicationDocumentsDirectory : kIntroVideoFileName];
[assetURLArray setObject:url forKey:kIntroVideo];

}

- (CVPixelBufferRef )pixelBufferFromCGImage:(CGImageRef)image size:(CGSize)size
{
NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
                         [NSNumber numberWithBool:YES], kCVPixelBufferCGImageCompatibilityKey, 
                         [NSNumber numberWithBool:YES], kCVPixelBufferCGBitmapContextCompatibilityKey, nil];
CVPixelBufferRef pxbuffer = NULL;
CVReturn status = CVPixelBufferCreate(kCFAllocatorDefault, size.width, size.height, kCVPixelFormatType_32ARGB, (CFDictionaryRef) options, &pxbuffer);
// CVReturn status = CVPixelBufferPoolCreatePixelBuffer(NULL, adaptor.pixelBufferPool, &pxbuffer);

NSParameterAssert(status == kCVReturnSuccess && pxbuffer != NULL); 

CVPixelBufferLockBaseAddress(pxbuffer, 0);
void *pxdata = CVPixelBufferGetBaseAddress(pxbuffer);
NSParameterAssert(pxdata != NULL);

CGColorSpaceRef rgbColorSpace = CGColorSpaceCreateDeviceRGB();
CGContextRef context = CGBitmapContextCreate(pxdata, size.width, size.height, 8, 4*size.width, rgbColorSpace, kCGImageAlphaPremultipliedFirst);
NSParameterAssert(context);

CGContextDrawImage(context, CGRectMake(0, 0, CGImageGetWidth(image), CGImageGetHeight(image)), image);

CGColorSpaceRelease(rgbColorSpace);
CGContextRelease(context);

CVPixelBufferUnlockBaseAddress(pxbuffer, 0);

return pxbuffer;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T21:57:50.133

为了可以关闭它，我将重申我在上面所做的事情。您使用的`videoSettings`字典应该使用视频的目标尺寸，但您传递的是视图的尺寸。除非那是您要记录的内容，否则您需要更改传入的值`AVVideoWidthKey`和`AVVideoWidthKey`为正确的输出大小。

鉴于 iOS 设备屏幕的宽高比接近 4:3，这可能是导致录制视频出现该比例的原因。

# wpf - 如何用我自己的事件包装标准 wpf 事件？

> ID：10358096
> 
> 赞同：0
> 
> 时间：2012-04-27T21:27:22.610
> 
> 标签：wpf, wpf-controls

我有一个包含 ListBox 的用户控件。

我想在包装 listBox.SelectionChanged 事件的用户控件上公开一个 SelectionChanged 事件。

这样，当列表框项目选择发生变化时，我自己在用户控件上的自定义事件也会在那之后被触发......

我该怎么做？任何样品将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T16:30:15.740

如果您希望 UserControl 上的自定义事件冒泡可视化树，则应将其公开为[RoutedEvent](http://msdn.microsoft.com/en-us/library/ms742806.aspx)。在 .xaml.cs 文件中，您需要将事件注册为路由事件，然后实现自定义处理程序和事件 args 类。

XAML：

```
<UserControl x:Class="WpfApplication1.MyUserControl"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <Grid>
       <ListView Name="myListView" SelectionChanged="OnSelectionChanged_"/>
    </Grid>
</UserControl> 
```

代码：

```
public partial class MyUserControl : UserControl
{
    public delegate void CustomSelectionChangedEventHandler(object sender, SelectionChangedRoutedEventArgs args);

    public static readonly RoutedEvent CustomSelectionChangedEvent = EventManager.RegisterRoutedEvent(
        "CustomSelectionChanged", RoutingStrategy.Bubble, typeof(CustomSelectionChangedEventHandler), typeof(MyUserControl));

    public event RoutedEventHandler CustomSelectionChanged
    {
        add { AddHandler(CustomSelectionChangedEvent, value); }
        remove { RemoveHandler(CustomSelectionChangedEvent, value); }
    }

    public MyUserControl()
    {
        InitializeComponent();
    }

    private void OnSelectionChanged_(object sender, SelectionChangedEventArgs e)
    {
        RaiseEvent(new SelectionChangedRoutedEventArgs(myListView, CustomSelectionChangedEvent, e.AddedItems, e.RemovedItems)); 
    }
}

public class SelectionChangedRoutedEventArgs : RoutedEventArgs
{
    public IList AddedItems { get; set; }
    public IList RemovedItems { get; set; }

    public SelectionChangedRoutedEventArgs(object source, RoutedEvent routedEvent, IList addedItems, IList removedItems) 
        : base(routedEvent, source)
    {
        AddedItems = addedItems;
        RemovedItems = removedItems;
    }
} 
```

然后，您的控件的调用者将为 CustomSelectionChanged 事件提供一个事件处理程序，其签名为：

```
private void OnCustomSelectionChanged(object sender, SelectionChangedRoutedEventArgs e) { } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T21:57:01.680

我不确定包装是最好的方法，即使你可以包装它。我建议只定义您自己的事件，并在与 listBox.SelectionChanged 挂钩的处理程序中触发您自己的事件。然后，您可以将原始列表框事件中的任何数据传递给您自己的事件。

**添加示例：**

```
public partial class MainWindow : Window
{
    public delegate void CustomSelectionChangedEventHandler(object sender, SelectionChangedEventArgs e);
    public event CustomSelectionChangedEventHandler CustomSelectionChanged;

    public MainWindow()
    {
        InitializeComponent();
        listBox1.SelectionChanged += delegate(object sender, SelectionChangedEventArgs e)
        {
            OnCustomSelectionChanged(e);
        };

    }

    void listBox1_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        OnCustomSelectionChanged(e);
    }

    //We'll use the system defined SelectionChangedEventArgs type instead of creating a derived EventArgs class
    protected virtual void OnCustomSelectionChanged(SelectionChangedEventArgs e)
    {
        if (CustomSelectionChanged != null)
            CustomSelectionChanged(this, e);

    }
} 
```

进一步阅读：

*   [http://msdn.microsoft.com/en-us/library/edzehd2t.aspx](http://msdn.microsoft.com/en-us/library/edzehd2t.aspx)

*   [http://msdn.microsoft.com/en-us/library/17sde2xt.aspx](http://msdn.microsoft.com/en-us/library/17sde2xt.aspx)

# node.js - 如何访问 node.js 中的 localStorage？

> ID：10358100
> 
> 赞同：43
> 
> 时间：2012-04-27T21:27:30.457
> 
> 标签：node.js, local-storage

我尝试在网络上搜索可以访问客户端的 localStorage 但找不到任何内容的节点模块。有人知道吗？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2014-10-14T23:55:18.043

您可以使用 ：

`node-localstorage``localStorage`在[nodejs](/questions/tagged/nodejs "显示标记为“nodejs”的问题")服务器端使用的 npm 模块。

```
var LocalStorage = require('node-localstorage').LocalStorage,
localStorage = new LocalStorage('./scratch'); 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-04-27T21:30:16.303

如果您的意思是 html 5 localStorage，则没有这样的事情，因为 node.js 是一种服务器端技术。Html 5 localStorage 是支持的客户端功能

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-04-27T21:34:43.220

当页面加载时，发送一条查询客户端 localStorage 内容的帖子。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2017-07-13T10:11:18.740

找到这个[`store`](https://www.npmjs.com/package/store)

```
// Store current user 
store.set('user', { name:'Marcus' })

// Get current user 
store.get('user')

// Remove current user 
store.remove('user')

// Clear all keys 
store.clearAll()

// Loop over all stored values 
store.each(function(value, key) {
    console.log(key, '==', value)
}) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-07-24T22:22:40.427

对于 Node.js，您可以使用[HandyStorage](https://www.npmjs.com/package/handy-storage)，这是一个快速且小型的 npm 包，其数据行为类似于`state` 以下示例：

```
const HandyStorage = require('handy-storage');

const storage = new HandyStorage('./store.json');

storage.setState({
    name: 'Alireza',
    lastname: 'Sh',
    friends: [
        'Jane',
        'John'
    ],
    visited: storage.state.visited || 0
})

storage.setState({
    visited: storage.state.visited + 1
}) 
```

它会自动更改 JSON 文件，试一试！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-05-01T17:58:44.167

服务器永远无法访问 LocalStorage。曾经。这将是一个巨大的安全问题。

如果您需要将它发送到服务器，那么您必须有一个客户端 JS 脚本来检索它，然后将它作为 Ajax 或 POST 请求的一部分发送到服务器。

当您需要在服务器和客户端之间定期传递少量数据时，Cookie 可以很好地工作。

如果您需要长期存储数据，则最好使用服务器上的数据库。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-24T00:19:46.213

在 JS 文件中你这样写：

```
const LocalStorage = require('node-localstorage').LocalStorage,
  localStorage = new LocalStorage('./scratch');
```

您还需要：打开新终端按 Control + C（不要担心它是为了清除而不是复制）并输入您的 file.js（例如：server.js）然后输入： **npm i node-localstorage**（现在你们都准备好了）。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2020-02-12T04:22:34.587

我们无法保存到 Node.js 上的 localStorage。

# ruby-on-rails - 使用块命名和创建实例变量 [Ruby-on-Rails]

> ID：10358101
> 
> 赞同：1
> 
> 时间：2012-04-27T21:27:40.393
> 
> 标签：ruby-on-rails, ruby, closures, block

我正在开发一个 CRUD 界面来管理我的应用程序中的用户。我有一个常量 User::ROLES ，它是一个数组，其中包含我的应用程序（管理员、教师、学生）中有效用户角色的名称。

我想要做的是，在控制器的索引操作中，有一个块迭代 ROLES 常量并从 @users 创建一个作用域实例变量（它已经在块之前初始化）。以下是 index 方法目前的样子：

```
def index
    @users = user.all
    #@students = @users.where(:role => "student") # This works by itself
    User::ROLES.each do |r|
        @r = @users.where(:role => r.to_s)
    end
end 
```

所以我希望能够通过块传递的内容来命名实例变量，所以@r 创建了@admin、@teacher 等。由于我是 ruby​​ 和 rails 的新手，所以我不太了解这样做的语法这个。谁知道？无论如何，可能有更好的方法来做到这一点。

**编辑**

只是为了让大家知道，我希望在 index 操作的视图中使用它来显示按角色分组的用户列表。当然，它也会在整个 CRUD 界面中以其他方式使用，这就是为什么我没有在前面阐明用例的原因，因为它是多用途的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T21:36:33.840

**这可能是个坏主意。**如果您更改模型中的角色，则需要相应地更新视图以使用不同的实例方法。处理此问题的更好方法是简单地按用户角色对用户进行分组：

```
@users = User.group(:role).all 
```

这将为您提供一个带有以每个角色命名的键的散列，您可以轻松地使用这些键来构建动态视图：

```
<% @users.each_pair do |role, users| %>
  <h2><%= role.to_s.titlelize %></h2>
  <% users.each do |user| %>
    ...
  <% end %>
<% end %> 
```

如果需要，您还可以访问具有特定角色的用户：

```
<h2>Admin users:</h2>
<%= @users[:admin].map(&:name).to_sentence %> 
```

# javascript - 从代码中的其他地方调用 JQuery 事件作为函数......？

> ID：10358102
> 
> 赞同：1
> 
> 时间：2012-04-27T21:27:45.903
> 
> 标签：javascript, html, function, jquery

好的，非常直截了当的 JQuery 问题，我正在努力寻找答案：

我有一个在按钮单击时调用的 JQuery 事件：

```
$(document).ready(function(){
        resetForms('reservation');
        $('#form-reservation').submit(function(event){ 
            event.preventDefault();  //the page will no longer refresh on form submit.
            var resCheck = $(this).find('input[class="reservationid"]').val(); //now we have the reservation ID, let's perform our check.
            document.cancel_res.cancel_agree.checked = false;
            //document.cancel_res.cancel_agree.disabled = false;
            document.cancel_res.cancel_button.disabled=true;
            document.form_reservation.search_button.value="Searching...";
            document.form_reservation.search_button.disabled=true;
            $.ajax({ 
                url: 'inc/searchres.php', 
                type: 'POST',
                data: 'resid='+resCheck, 
                success: function(data){  //data is all the info being returned from the php file 
                    resetForms('reservation');  //clear forms
                    document.form_reservation.search_button.value="Search Reservation";
                    document.form_reservation.search_button.disabled=false;
                    $('#reservation-id').val(resCheck);  //add read ID back into text box
                    var jsonData = $.parseJSON(data);
                    //BLAH BLAH BLAH BLAH
                }
            });
        });
    }); 
```

该函数完美运行......但是，无论如何都可以在不使用提交事件的情况下调用此函数？我试图在调用后取出所有内容`$('#form-reservation').submit(function(event){` 并将其放在单独的函数中，然后从提交事件中调用该函数。然而，无论出于何种原因，这都失败了。

基本上，我希望提交事件仍然触发这个函数，但我也希望能够在其他情况下调用整个函数。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T21:29:28.923

其实很简单：

```
var MyFunc = function(event){ 
            typeof event !== 'undefined' ? event.preventDefault() : false;  //the page will no longer refresh on form submit.
            var resCheck = $(this).find('input[class="reservationid"]').val(); //now we have the reservation ID, let's perform our check.
            document.cancel_res.cancel_agree.checked = false;
            //document.cancel_res.cancel_agree.disabled = false;
            document.cancel_res.cancel_button.disabled=true;
            document.form_reservation.search_button.value="Searching...";
            document.form_reservation.search_button.disabled=true;
            $.ajax({ 
                url: 'inc/searchres.php', 
                type: 'POST',
                data: 'resid='+resCheck, 
                success: function(data){  //data is all the info being returned from the php file 
                    resetForms('reservation');  //clear forms
                    document.form_reservation.search_button.value="Search Reservation";
                    document.form_reservation.search_button.disabled=false;
                    $('#reservation-id').val(resCheck);  //add read ID back into text box
                    var jsonData = $.parseJSON(data);
                    //BLAH BLAH BLAH BLAH
                }
            }

$(document).ready(function(){
        resetForms('reservation');
        $('#form-reservation').submit(MyFunc); //this calls on submit
    });

//this calls without need of a submit
MyFunc(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T21:46:36.010

我会简单地触发处理程序。

```
$("#form-reservation").triggerHandler("submit"); 
```

[http://api.jquery.com/triggerHandler/](http://api.jquery.com/triggerHandler/)

根据 api 文档，这不会导致表单提交，它只是运行绑定到该事件的处理程序。

# css - html, body {height: 100%} 总是显示滚动条

> ID：10358109
> 
> 赞同：0
> 
> 时间：2012-04-27T21:28:26.797
> 
> 标签：css, twitter-bootstrap

我正在使用 twitter bootstrap 并在自定义 css 中说

```
html, body {
   height:100%;
   width: 100%;
 } 
```

添加后，它始终显示垂直滚动条。有没有什么办法解决这一问题？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-04-27T21:36:12.897

添加到CSS：

```
overflow-y: hidden; 
```

# php - SQL 简单连接问题

> ID：10358110
> 
> 赞同：1
> 
> 时间：2012-04-27T21:28:27.373
> 
> 标签：php, mysql, sql

我以前从未使用过 JOIN 或使用过多个表。

弹出此错误。

> 警告：mysql_fetch_assoc()：提供的参数不是 [pathway to this mysql_query line] 中的有效 MySQL 结果资源。

我在这里做错了什么？

谢谢你。

```
$group_id= 4;

$result = mysql_query("SELECT table1.user_facebook_id AS user_facebook_id 
                       FROM table1 JOIN table2
                       ON table1.user_id = table2.user_id 
                       WHERE table2.group_id = $group_id");

$row = mysql_fetch_assoc($result); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T21:32:05.483

您应该测试 的值`$result`以查看查询是否失败。如果是这样，出于调试目的打印错误：

```
 $sql = "SELECT ...";
 $result = mysql_query($sql);
 if (!$result) {
     trigger_error(mysql_error());
 } 
```

您可能还想尝试在 MySQL 工作台中运行 SQL 查询，看看它是否在那里工作。

# objective-c - 两个 UISplitViewControllers，1 个（共享）详细视图

> ID：10358111
> 
> 赞同：5
> 
> 时间：2012-04-27T21:28:36.680
> 
> 标签：objective-c, ipad, uisplitviewcontroller, uistoryboard, uistoryboardsegue

要设置场景，我有：

*   带有 2 个选项卡的选项卡视图控制器
*   每个选项卡都有一个拆分视图控制器
*   我想将每个拆分视图控制器的详细视图指向相同的视图。

我附上了一个[显示问题的非常简单的示例项目](http://www.timroadley.com/Files/Shared%20Detail%20View.zip)。

在 iPad 5.1 Sim 中运行它，观察每个选项卡。一个显示共享详细视图，一个失败。

NSLog 调试报告第二个拆分视图有一个 NULL 详细视图控制器：

```
2012-04-28 07:21:55.451 svcTest[14597:f803] tabBarController viewControllers = (
    "UISplitViewController: 0x6a36100",
    “UISplitViewController：0x6a39ab0”
)
2012-04-28 07:21:55.455 svcTest[14597:f803] svcA.viewControllers = (
    "UINavigationController: 0x6a36250",
    “UIViewController：0x6a38720”
)
2012-04-28 07:21:55.457 svcTest[14597:f803] svcB.viewControllers = (
    “UINavigationController：0x6a39cc0”
)

```

当您单击第二个选项卡时，您会收到此错误：

```
2012-04-28 07:22:58.457 svcTest[14597:f803] Splitview 控制器预计在使用前会有一个详细的子项！
2012-04-28 07:22:58.459 svcTest[14597:f803] 拆分视图控制器应该在布局之前设置其子级！
```

看着故事板，我已经设置了细节视图，所以这真的让我很困惑。

![故事板](../Images/bc025e94b33cea3fc912dfcc27559c80.png)

非常感谢任何帮助让这个“共享”视图显示在每个选项卡上。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T12:57:34.013

当为 splitViewController 指定两个以上的 viewController 时，我收到了相同的警告，如下所示：

```
self.splitViewController.viewControllers = @[masterNavigationController, detailNavigationController, subViewController]; 
```

当我从数组中删除“subViewController”时，警告消失了。

在阅读了苹果关于添加/删除子视图的文档后，它提到了以下内容：

> 此属性中的数组必须恰好包含两个视图控制器。当视图控制器处于横向时，视图控制器在拆分视图界面中从左到右呈现。因此，索引 0 处的视图控制器显示在左侧，索引 1 处的视图控制器显示在界面的右侧。

您可以查看指向[UISplitViewController 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UISplitViewController_class/Reference/Reference.html)的链接以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-09T13:55:49.500

问题在于 App Delegate 中的一些行的位置`-applicationdidFinishLaunchingWithOptions:`

在这里，拆分视图控制器委托设置在 viewControllers 之前。这似乎是问题的根源，如果您将两行反转，如下所示，警告消息就会消失：

请改用此代码：

```
self.splitViewController = [[UISplitViewController alloc] init];
self.splitViewController.viewControllers = [NSArray
                           arrayWithObjects:masterNavigationController,
                           detailNavigationController, nil];
self.splitViewController.delegate = detailViewController; 
```

详细解释可以看一下：[Splitview Controller Is Expected to Have a Master View Controller](http://useyourloaf.com/blog/2012/04/06/splitview-controller-is-expected-to-have-a-master-view-contr.html)

# css - HTML/CSS：如何正确设置此菜单的样式？

> ID：10358116
> 
> 赞同：1
> 
> 时间：2012-04-27T21:29:11.907
> 
> 标签：css, html, menu, stylesheet, submenu

我正在学习创建没有浮动的 CSS 菜单。到目前为止，我有一个部分“工作”菜单。但是，主菜单的边框是分开的。此外，子菜单的边框大小减半，悬停的背景颜色不起作用。同时子子菜单不工作

我也在尝试使用 .menu .submenu .sub-submenu 类来简化 CSS 代码。

jsFiddle：http: [//jsfiddle.net/vn64H/1/](http://jsfiddle.net/vn64H/1/)

**HTML**

```
<!DOCTYPE html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Title: Navigation menu</title>

    <link rel="stylesheet" type="text/css" href="menu.css">
</head>
<body>

<!-- START: menu -->
<ul id="nav">
    <li class="menu"><a href="#">Home</a></li>
    <li class="menu"><a href="#">Main Menu 2</a>
        <ul class="submenu">
            <li><a href="#">Sub Menu 2.1</a></li>
            <li><a href="#">Sub Menu 2.2</a></li>
            <li><a href="#">Sub Menu 2.3</a>
                <ul>
                <li><a href="#">Sub-Sub Menu 2.3.1</a></li>
                <li><a href="#">Sub Menu 2.3.2</a></li>
                <li><a href="#">Sub Menu 2.3.</a></li>
                </ul>
            </li>
            <li><a href="#">Sub Menu 2.4</a></li>
            <li><a href="#">Sub Menu 2.5</a></li>
            <li><a href="#">Sub Menu, Some Sample Text  2.6</a></li>
            <li><a href="#">Sub Menu, Sample Text  2.7</a></li>
        </ul>
    </li>
    <li class="menu"><a href="#">Main Menu 3</a>
        <ul class="submenu">
            <li><a href="#">Sub Menu 3.1</a></li>
            <li><a href="#">Sub Menu 3.2</a></li>
            <li><a href="#">Sub Menu 3.3</a></li>
            <li><a href="#">Sub Menu 3.5</a></li>
            <li><a href="#">Sub Menu 3.6</a></li>
            <li><a href="#">Sub Menu 3.7</a></li>
        </ul>
    </li>
    <li class="menu"><a href="#">Main Menu 4</a>
        <ul class="submenu">
            <li><a href="#">Sub Menu 4.1</a></li>
            <li><a href="#">Sub Menu 4.2</a></li>
            <li><a href="#">Sub Menu Sample Text 4.3</a></li>
            <li><a href="#">Sub Menu 4.4</a></li>
            <li><a href="#">Sub Menu 4.5</a></li>
            <li><a href="#">Sub Menu 4.6</a></li>
            <li><a href="#">Sub Menu 4.7</a></li>
            <li><a href="#">Sub Menu 4.8</a></li>
        </ul>       
    </li>
    <li class="menu"><a href="#">Menu 5</a></li>
    <li class="menu"><a href="#">Menu 6</a></li>
    <li class="menu"><a href="#">Contact</a></li>
</ul> <!-- /#menu -->
<!-- END: menu -->

</body>
</html> 
```

**CSS**

```
@charset "utf-8";
#nav {
    background-color: #000;
    position: relative;

    font-family: Arial, Helvetica, sans-serif; 
    font-size: 0.975em;
    text-align: left;
    display: block;
    border: 1px dotted #cccccc;
    padding: 0;
    margin: 0;
}
#nav a {
    color: #fff;
    text-decoration: none;
}
#nav li {
    color: #fff;
    text-align: left;

    width: 110px;
    border: 1px solid #CCCCCC;
    list-style-type: none;
    padding: 0;
    margin: 0;
    display: inline-block;
}

/*Sub menu */
#nav li ul {
    color: navy;
    text-align: left;
    list-style-type: none;

    width: 200px;
    border: 1px solid #000;
    padding: 0;
    margin: 0;

    display: none;
    position: absolute;
    background-color: #990000;
}
#nav li ul a {
    display: inline-block;
}
#nav li:hover ul {
    visibility: visible;
    display: block;
    background-color: #E6B800;
}
#nav li:hover ul li {
    background-color: #E6B800;
}

/*Sub-sub menu */
#nav li ul li ul li a {
    display: none;
}
#nav li ul li ul li:hover {
    visibility: visible;
    display: block;
    background-color: #E6B800;
}
#nav li ul li ul li:hover ul li {
    background-color: #E6B800;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T22:06:52.037

主菜单边框是分开的，因为`<li>`s 是内联块，它们之间有空格。内联块的工作方式类似于文本流中的单词，因此*任何*空格，例如您在其中的换行符，都将被解释为文本空间字符。在保持它们内联块的同时解决这个问题的唯一方法是将所有的`<li>`' 放在一行上，中间的空格为零。为什么要避免浮动？那将是你最好的选择。

子菜单项是半间距的，因为容器的宽度为 200 像素，但每个项目都是一个内联块，没有指定宽度。使它们`display:block`不是静止的，它们将扩展到容器的边缘。

请应用您的子菜单和子子菜单类，这将比许多嵌套选择器更容易查看和使用。

另外：使用子选择器语法，例如：`ul#nav > li`它将相关样式仅应用于子项目，而不应用于孙子项目等。

**更新**
在回答 mcknz 的问题时，我会`float:left`放在`#nav li` 而不是`display:inline-block`. 这解决了两个问题：

*   无论 HTML 中的空白如何，菜单项之间的意外间距都会消失。您现在可以使用边距精确控制它们的间距。*   IE7 不会将 inline-block 应用于列表项——或任何非原生内联的元素（参见： http: [//fourwhitefeet.com/2009/02/css-display-inline-block-in-ie7/](http://fourwhitefeet.com/2009/02/css-display-inline-block-in-ie7/)）

重要提示：您现在需要明确指定#nav 的高度，因为浮动元素的非浮动父级会崩溃（请参阅：[为什么浮动元素的非浮动父级会崩溃？](https://stackoverflow.com/questions/7667581/why-do-non-floating-parents-of-floating-elements-collapse)）。

`text-align: left;`...另外：一旦将其应用于，您可以安全地删除后续声明`#nav`，此属性将继承到所有嵌套元素，当然，除非您有一个中间层，其中文本左对齐或居中对齐。此处列出了继承的属性：http: [//www.communitymx.com/content/article.cfm?cid=2795d](http://www.communitymx.com/content/article.cfm?cid=2795d)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T22:06:42.030

菜单中每个列表项后的换行符充当空格。您可以更改以将它们全部放在一行中，或者如果您仍希望它们在标记中视觉上分开，则可以使用注释：

```
<li class="menu"><a href="#">Home</a></li><!--
--><li class="menu"><a href="#">Main Menu 2</a> 
```

# android - Android 应用 XML 解析错误

> ID：10358125
> 
> 赞同：0
> 
> 时间：2012-04-27T21:29:38.583
> 
> 标签：android, xml

我正在使用 Java 类将数据从 .csv 文件导入我的应用程序。我在网上找到了一些例子，他们似乎就是这样做的。但是，它显示错误：解析 XML 时出错：未绑定前缀。我对此进行的研究表明它通常是拼写错误。如果是的话，我找不到了。这是我遇到问题的部分。

```
<provider android:name="com.ATS_Boxes.ContentProvider.class" 
android:authorities="ContentProvider"></provider> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T21:32:10.790

发布整个 XML 文件。

我的猜测是您没有声明“android”命名空间，因此在解析属性 android:name 和 android:authorities 时它会呕吐

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T03:40:50.877

您似乎试图[`provider`](http://developer.android.com/guide/topics/manifest/provider-element.html)在 Android 资源文件中声明 a - 这是不可能的。您只能在项目的清单文件中声明提供程序（在项目的[`AndroidManifest.xml`](http://developer.android.com/guide/topics/manifest/manifest-intro.html)根目录中）。

此外，虽然我不确定它是否有任何区别，但您作为注释提供的 xml 代码中的第一行内容如下：

```
<!--?xml version="1.0" encoding="utf-8"?--> 
```

好像被注释掉了 通常它应该看起来像：

```
<?xml version="1.0" encoding="utf-8"?> 
```

# vb.net - VB.net 上的 Datagrid 自动完成另一列？

> ID：10358134
> 
> 赞同：0
> 
> 时间：2012-04-27T21:30:32.500
> 
> 标签：vb.net, ms-access, datagrid

我有一个数据网格，我已经在 vb.net 语言下将它导入到我的项目中，并且数据库是 MS 访问......
在这个数据网格中的任何方式一个表调用
“**员工**”
**ID - 姓名 - 国籍 - 职位**
和我想要的是**当我写员工的身份证号码时，所有其他细节都会自动出现在他的身份证号码上。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:25:42.213

我找到了我自己做的接近答案......但它在组合框而不是文本框中显示了结果:'(

```
 Dim dgvc1 As New DataGridViewComboBoxColumn()
    Dim index1 As Integer = DataGridView1.Columns.IndexOf(DataGridView1.Columns("code"))
    Dim index11 As Integer = DataGridView1.Columns.IndexOf(DataGridView1.Columns("nu"))
    Dim index111 As Integer = DataGridView1.Columns.IndexOf(DataGridView1.Columns("aaa"))
    Dim dgvc11 As New DataGridViewComboBoxColumn()

    dgvc1.Name = "Code Meaning"
    dgvc1.DataPropertyName = "nu"
    dgvc1.ValueMember = "nu"
    dgvc1.DisplayMember = "code"
    dgvc1.DataSource = CodesTableAdapter.GetData()

    dgvc1.SortMode = DataGridViewColumnSortMode.Automatic

    If DataGridView1.Columns.Contains(dgvc1) = False Then
        DataGridView1.Columns.Insert(index1, dgvc1)
    Else
    End If

    dgvc1.ReadOnly = True
    dgvc1.Width = 250

    dgvc11.Name = "meaning total"
    dgvc11.DataPropertyName = "nu"
    dgvc11.ValueMember = "nu"
    dgvc11.DisplayMember = "aaa"
    dgvc11.DataSource = CodesTableAdapter.GetData()

    dgvc11.SortMode = DataGridViewColumnSortMode.Automatic

    If DataGridView1.Columns.Contains(dgvc11) = False Then
        DataGridView1.Columns.Insert(index111, dgvc11)
    Else
    End If

    dgvc11.ReadOnly = True
    dgvc11.Width = 250
    dgvc11.DefaultCellStyle.BackColor = Color.White
    dgvc11.DefaultCellStyle.ForeColor = Color.Black 
```

# database - 用于多 LAN 用户目的的 Ms Access Db 替换

> ID：10358136
> 
> 赞同：-1
> 
> 时间：2012-04-27T21:30:52.077
> 
> 标签：database, vb.net, ms-access

4 年多来，我一直在为我的应用程序使用访问权限。我意识到现在是时候继续前进了，我需要有关新数据库的建议。这是我的要求：

1.  应该能够将它与 Vb.net 窗口形式的前端 GUI 连接 - 所有数据库功能，如添加/删除/编辑/更新将仅通过 vb.net 前端完成。

2.  应该能够将数据库放在 LAN 上，然后 LAN 上的每个客户端都可以通过它们各自的前端访问集中存储的数据库。

3.  最多 5-6 个用户将同时读取/写入数据库，因此数据库不应崩溃或变慢。

4.  由于我来自 MS 访问背景，我想要与它相似的东西，以便我可以快速学习和适应它。

5.  不是很重要，但我认为值得一提。这个数据库将是我的 .net 应用程序的主要中央数据库。我的 .net 应用程序也将通过一些 api 与 quickbooks 和 magento 进行交互，但最终所有这些数据都将进入中央数据库。所以只是好奇，您建议的数据库会有任何兼容性问题吗？

6.  应该处理大约 10 个表和每个表中大约 10k 条记录

7.  应该是安全的 - 只是我应该能够将其锁定或以任何方式阻止它从 vb.net 前端以外的任何其他地方访问。

最后，如果可能，我希望它可以免费使用，但不是必需的。

我意识到有一些主题，如 mysql vs sqllite 和数据库，但请理解我需要一个适合我上面列出的目的的建议。

所有输入将不胜感激。谢谢！

编辑：只是好奇-如果我仍然坚持访问，我会突破限制-我知道访问对多用户访问不利，但我想 5 个用户并不多？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:35:40.933

SQL Server 是显而易见的答案，而 MS Access 具有内置的升级工具。我认为你不必再看远了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T20:04:28.880

我会选择 SQL server express，它不会给您的应用程序增加任何成本。您必须对应用程序进行一些修改，例如应将双引号替换为单引号。另请注意，查询中的任何 Ms 访问函数都不会像日期函数那样兼容。如果您使用 msaccess 表单，您仍然可以将它们与来自 SQL Server 的数据一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T21:56:38.030

听起来您正在做的事情的范围很小，所以我想说使用新版本的访问（如 2010 年）仍然是一个很好的解决方案。只有当您在其中构建大型应用程序或拥有大量用户时，Access 才会真正开始变得困难重重。如果您的用户不足十个，我会说它仍然是一个很好的解决方案。

或者，[SQLite](http://www.sqlite.org/)在设计上与 access 非常相似，并且是一个很棒的数据库引擎（而且也是免费的！）。

# sql - 从 Select 中插入另一个插入的标识？

> ID：10358139
> 
> 赞同：0
> 
> 时间：2012-04-27T21:31:15.720
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

这可能吗？

这是我正在寻找的东西，一起执行：

首先，它将根据 SELECT 中的行数执行 INSERT

```
 INSERT INTO TABLE2 (xID, NAME)
  SELECT xID, NAME FROM TABLE 
```

然后获取每个 INSERTED ROW 的@@IDENTITY，它将创建一个新的插入，其中包含第一个 SELECT 语句的相同数据：

```
 INSERT INTO TABLE3 (xID, NAME, ID)
  SELECT xID, NAME, ID as Scope_IdentitY() 
```

如果没有，不使用光标或while的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T22:04:57.740

你至少有两个选择：

1) [OUTPUT...INTO target_table](http://msdn.microsoft.com/en-us/library/ms177564.aspx)子句 (SQL2005+)

2) 或者您可以编写[可组合的 DML](http://www.sqlmag.com/article/sql-server/composable-dml) (SQL2008+)。

例子：

```
DECLARE @Table2 TABLE(
    ID  INT IDENTITY PRIMARY KEY, --IDENTITY 
    xID INT NOT NULL,
    NAME VARCHAR(25) NOT NULL
);

DECLARE @Table3 TABLE(
    ID  INT PRIMARY KEY, --No IDENTITY 
    xID INT NOT NULL,
    NAME VARCHAR(25) NOT NULL
);

--First solution: OUTPUT ... INTO
INSERT  INTO @Table2 (xID, NAME)
OUTPUT  inserted.xID, inserted.NAME, inserted.ID INTO @Table3(xID, NAME, ID)
SELECT  t.Col1, t.Col2
FROM    (SELECT 11,'A' UNION ALL SELECT 22,'B' UNION ALL SELECT 33,'C') AS t(Col1,Col2);

--Second solution: composable DML
INSERT  INTO @Table3(xID, NAME, ID)
SELECT  src.xID, src.NAME, src.ID
FROM
(
        INSERT  INTO @Table2 (xID, NAME)
        OUTPUT  inserted.xID, inserted.NAME, inserted.ID 
        SELECT  t.Col1, t.Col2
        FROM    (VALUES(44,'D'),(55,'E'),(66,'F')) AS t(Col1,Col2)
) src

SELECT * FROM @Table2 
SELECT * FROM @Table3 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T21:49:14.747

```
INSERT INTO TABLE2 (xID, NAME)
OUTPUT
INSERTED.xID, INSERTED.NAME, INSERTED.ID
INTO TABLE3 (xID, NAME, ID)
SELECT xID, NAME FROM [TABLE] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T22:08:31.403

您可以声明一个表变量并将插入到*dbo.Table2*中的行的输出存储在此变量中，并将表变量用作表*dbo.Table3*的输入。

```
CREATE TABLE dbo.Table1
(
        xid     int NOT NULL
    ,   name    varchar(30) NOT NULL
);

CREATE TABLE dbo.Table2
(
        id      int NOT NULL IDENTITY
    ,   xid     int NOT NULL
    ,   name    varchar(30) NOT NULL
);

CREATE TABLE dbo.Table3
(
        id      int NOT NULL
    ,   xid     int NOT NULL
    ,   name    varchar(30) NOT NULL
);

INSERT INTO dbo.Table1 (xid, name) VALUES
    (195, 'abc'),
    (242, 'def'),
    (332, 'ghi');
GO

DECLARE @tempTable table
    (       id      int
        ,   xid     int
        ,   name    varchar(30)
    );

INSERT dbo.Table2
    OUTPUT INSERTED.id, INSERTED.xid, INSERTED.name
        INTO @tempTable
        SELECT xid, name FROM dbo.Table1;

INSERT dbo.Table3 (id, xid, name) 
    SELECT id, xid, name FROM @tempTable;

SELECT id, xid, name FROM dbo.Table2;
SELECT id, xid, name FROM dbo.Table3;

GO 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T21:33:47.193

好的，根据您在下面的评论，试试这个：

```
 INSERT INTO TABLE2 (xID, NAME)
  SELECT xID, NAME FROM TABLE;

  INSERT INTO TABLE3 (xID, NAME, ID)
  SELECT xID, NAME, @@identity
  FROM TABLE2; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T22:01:15.013

假设这些表结构：

```
TABLE_A
-----------
X_ID
NAME

TABLE_B
----------------
TABLE_B_ID [PK]
X_ID
NAME

TABLE_C
----------------
TABLE_C_ID [PK]
X_ID
NAME
TABLE_B_ID [FK]
```

那么这不起作用（最好的交易）？：

```
-- Grab data from TABLE_A and INSERT INTO TABLE_B
INSERT INTO TABLE_B (
    X_ID,
    NAME
)
SELECT
    X_ID,
    NAME
FROM
    TABLE_A

-- Grab data from TABLE_B that matches the data imported from TABLE_A
-- and INSERT that data into TABLE_C (incl. the PK from TABLE_B)

INSERT INTO TABLE_C (
    X_ID,
    NAME,
    TABLE_B_ID
)
SELECT 
    b.X_ID,
    b.NAME,
    b.TABLE_B_ID
FROM
    TABLE_B b
INNER JOIN 
    TABLE_A a ON a.X_ID = b.X_ID
```

# clojure - 在 Clojure 1.4 中，在 require 中引用的用途是什么？

> ID：10358149
> 
> 赞同：73
> 
> 时间：2012-04-27T21:32:23.520
> 
> 标签：clojure

using in比 using `:refer`in`:require`有什么优势？以下是同义词吗？`:only``:use`

```
(ns so.example (:use [my.lib :only [function]])) 
```

和

```
(ns so.example (:require [my.lib :refer [function]])) 
```

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2012-04-29T08:09:03.663

`:refer`添加到的主要思想`:require`是完全摆脱`:use`，只留下一个操作员来加载其他包。您可以模拟现有`:use`...`(:require [my.lib :refer :all])`

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-04-27T21:35:41.890

是的，它们是等价的，

`:refer`并且`:require`是构建命名空间所需的基本操作。`:use`更方便

*   `:require`导致类被加载
*   `:refer`将东西添加到实际上只是一个映射的名称空间（实际上是几个映射）
*   `:use`是`:refer`+`:require`

尽管看起来很像，但命名空间真的没有什么魔力

如果你创建一个这样的命名空间

```
(ns so.example (:use my.lib)) 
```

:require 的等价物是：

```
(ns so.example (:require [my.lib :refer [function1 function2 function3 
                                         list every function in example 
                                         here and remember to keep it 
                                         up to date ]])) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-19T12:02:18.457

从 1.4.0 版本开始，不再有充分的理由使用 use。使用 require :refer 代替。从 Clojure 1.4.0 更改日志中：“require 现在可以采用 :refer 选项。:refer 采用符号列表从命名空间引用或 :all 引入所有公共变量。” （来自 [https://8thlight.com/blog/colin-jones/2010/12/05/clojure-libs-and-namespaces-require-use-import-and-ns.html](https://8thlight.com/blog/colin-jones/2010/12/05/clojure-libs-and-namespaces-require-use-import-and-ns.html)）

# java - 在 Apache Tomcat 应用程序中，MBean 字段是否需要可变/同步才能使 JMX 更新出现在其他线程中？

> ID：10358150
> 
> 赞同：4
> 
> 时间：2012-04-27T21:32:32.933
> 
> 标签：java, tomcat, concurrency, jmx, mbeans

我一直在我们的 Spring Web 应用程序中公开 bean，以防我们需要即时进行配置更改。最近我一直在审查并发性，我开始想知道当您通过 JMX 对这些 bean 之一进行变异时，其他线程中会发生什么？

JMX 是否有某种方式强制刷新内存模型，因此您不必担心使字段易失/同步以确保其他线程看到更改？

当 Tomcat 创建一个新线程来处理请求时，即使该字段不是线程安全的，该线程也会看到更改，对吗？因此，除非我需要更改立即在当前请求线程中生效，否则是否有理由担心并发问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T21:51:21.647

JMX 处理程序不是一个特殊的线程。需要在其他线程中看到的任何更改*都*需要标记为`volatile`或`synchronized`。

```
// this needs to be volatile because another thread is accessing it
private volatile boolean shutdown;
...

@JmxOperation(description = "Shutdown the server")
public void shutdownSystem() {
   // this is set by the JMX connection thread
   shutdown = true;
} 
```

也就是说，通常 JMX 值是统计信息或配置设置，我不介意在跨越下一个内存屏障时延迟更新。这适用于计数器和其他调试信息以及布尔值和其他仅由 JMX 设置的值，尽管它们被其他线程使用。在这些情况下，我*没有*将这些字段标记为`volatile`，它还没有咬我们。YMMV。

仅供参考，`@JmxOperation`注释来自[我的 SimpleJmx library](http://256stuff.com/sources/simplejmx/)。

# xcode - Xcode 疯狂调试 OSX 项目

> ID：10358159
> 
> 赞同：0
> 
> 时间：2012-04-27T21:33:15.117
> 
> 标签：xcode, macos, gdb

在 Xcode 中调试我的 OSX 应用程序时遇到了一些问题。设置断点后，我使用 gdb 控制台查找变量的值，例如：

```
po myTimer 
```

这行得通。但是，我将通过点击 Xcode 中的停止按钮来终止应用程序。在这一点上，Xcode 发疯了。它通常会重新键入我在控制台中输入的内容，同时通过不同的窗口进行更改，这样我的代码就会被一堆“po myTimer”之类的东西弄乱。有没有其他人看到这个问题？这是一个已知的错误吗？如果是这样，是否有任何解决方法？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-27T21:40:18.987

在大多数情况下，你只需要习惯 Xcode 的古怪/糟糕。对不起。

# ruby-on-rails-3 - 部署到 Heroku 时，jquery-datatables-rails 排序箭头未显示

> ID：10358160
> 
> 赞同：2
> 
> 时间：2012-04-27T21:33:17.090
> 
> 标签：ruby-on-rails-3, heroku, datatables

运行雪松堆栈。当我部署时，dataTables 可以工作，但没有显示任何排序箭头。未显示的文件是： sort_asc.png sort_both.png sort_desc.png

它们在我的开发环境中本地运行时出现。[在 Heroku Cedar 上部署 Rails 3.1.3 后，](https://stackoverflow.com/questions/9439562/images-desapears-after-deploy-rails-3-1-3-on-heroku-cedar)我发现这个图像消失了，它看起来像一个类似的问题，但我对 Rails 有点陌生，不知道如何应用它，因为我使用的是 gem。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T21:49:50.763

你有预编译你的资产吗？

这可能有几个原因不起作用。最好的选择是从这里开始：

[http://www.neilmiddleton.com/heroku-asset-pipeline-faq/](http://www.neilmiddleton.com/heroku-asset-pipeline-faq/)

# firefox-addon - 在 Firefox 附加组件的 main.js 中包含数据目录中的库

> ID：10358162
> 
> 赞同：1
> 
> 时间：2012-04-27T21:33:45.223
> 
> 标签：firefox-addon, firefox-addon-sdk

在我使用附加 SDK 的 Firefox 附加组件中，我试图从`data`目录中包含两个库文件`main.js`，但它不起作用。

我有以下目录结构：

```
data
-- jquery-latest.min.js
-- pagemodscript.js
-- mylibrary.js

lib
-- main.js 
```

`pagemodscript.js`使用 jQuery，并且有效（使用`contentScriptFile`）。

我也想使用 jQuery 和`mylibrary.js`in `main.js`，但这不起作用。

我尝试过的各种事情都会导致错误消息“ReferenceError：[mylibrary.js 中的类] 未定义”、“ModuleNotFoundError：无法满足：require(mylibrary.js)”和“无权加载”。

我尝试移动`mylibrary.js`和复制`jquery-latest.min.js`到`lib`，但这导致了这些错误消息之一。

设置它的最佳方法是什么？

注意：我想在其中使用 jQuery 的原因`main.js`是因为 - 在一个由. 创建这些对象并创建 div是更好的做法吗？在这种情况下，这会起作用：我会加载到using . 在这种情况下，将创建中定义的类的对象，这似乎不像我喜欢的做事方式那样好的设计。`pagemodscript.js``main.js``pagemodscript.js``pagemodscript.js``mylibrary.js``pagemodscript.js``contentScriptFile``pagemodscript.js``mylibrary.js`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T22:06:26.430

> 我也想使用 jQuery`mylibrary.js`和`main.js`

那对你没有任何好处。jQuery 期望在窗口中运行并与 DOM 一起工作。扩展文件在完全不同的环境中执行——没有可访问的窗口，一些典型的窗口功能不可用。此外，扩展文件根本不允许访问 DOM，所有网页访问都必须在内容脚本中进行。

> 我想`main.js`在当前页面添加一个 div

您应该向您的内容脚本 ( `pagemodscript.js`) 发送一条消息，并让它为您创建 div。这就是它与附加 SDK 一起工作的方式。

# html - 如何在我的网站中删除与侧边栏边框重叠的边框线

> ID：10358170
> 
> 赞同：0
> 
> 时间：2012-04-27T21:34:39.850
> 
> 标签：html, web, blogger

嗨，我有一个博客网站[http://raywiliamjohnson.blogspot.com](http://raywiliamjohnson.blogspot.com)博主博客。它是博客中的自定义模板，因此我无法使用博客设计自定义工具对其进行编辑。我很难确定哪一行代码负责在我的站点中显示 2 侧灰色边框线。它重叠在我的侧边栏边框上。我怎样才能删除或调整它？请检查我的源代码并建议我该怎么做。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T21:42:58.467

如果您的意思是左右两个灰色边框，那么它是由以下原因引起的：

```
body {
  background: #F7F7F7 url(http://3.bp.blogspot.com/-nVwJ4zhT3Fs/TsYD0lnPFXI/AAAAAAAACqc/YxEOj7__SyM/s000/bg.gif) repeat-y top center;
} 
```

切换确实删除了它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T21:44:21.387

尝试降低 content-wrapper div 的宽度，使其适合这些边框，然后使用 content-wrapper 中包含的 div 的尺寸，使其看起来不会一团糟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T21:45:04.613

在您博客源代码的第 33 行，您将看到以下内联 CSS：

```
body{background:#f7f7f7 url(http://3.bp.blogspot.com/-nVwJ4zhT3Fs/TsYD0lnPFXI/AAAAAAAACqc/YxEOj7__SyM/s000/bg.gif) repeat-y top center; margin:0; color:#333; font-family:arial; font-size:12px; text-align:center} 
```

删除`background`选择器：

```
body{margin:0; color:#333; font-family:arial; font-size:12px; text-align:center} 
```

它是负责它的背景图像。

# javascript - 未调用 jQuery 回调

> ID：10358187
> 
> 赞同：1
> 
> 时间：2012-04-27T21:36:26.077
> 
> 标签：javascript, jquery, json

这是我的脚本的一部分，它打印 9 然后 98 但未能打印 2 这表明没有调用 jQuery 中的回调函数。但是在此之前，我正在使用 json_decode 函数打印从 php 文件返回的 json，并且 json 打印得非常好。我该如何调试它，我的意思是错误可能出在哪里？

```
$(document).ready( function() {
alert(9);
$('#charac').keyup( function() {
alert(98);
  $.getJSON('myprg.php?q='+escape($('#charac').val()), function(data) {
    alert(2); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T21:53:51.427

使用`$.ajax`函数而不是`getJSON`使用错误回调来查看发生了什么。

```
$.ajax({
  url: url,
  dataType: 'json',
  data: data,
  success: callback
  error: callback(jqXHR, textStatus, errorThrown)
}); 
```

It can also be useful to inspect the actual server response with Firebug or Chrome developer tools and validate the JSON with [JSONLint](http://jsonlint.com/), some JSON libraries are more forgiving than others and ignore small errors.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T21:49:38.987

这可能不是一个答案，但这里的代码可视化得更好。

以下是否也会失败（使用 jQuery 1.5 或更高版本）？

```
$(document).ready( function() {
    alert(9);
    $('#charac').keyup( function() {
        alert(98);
        var jqxhr = $.getJSON('myprg.php?q='+escape($('#charac').val()), function(data) {
            alert(2);
        })
        .success(function() { alert("second success"); })
        .error(function() { alert("error"); })
        .complete(function() { alert("complete"); });
    });
}); 
```

或这个：

```
$(document).ready( function() {
    alert(9);
    $('#charac').keyup( function() {
        alert(98);
        var jqxhr = $.getJSON('myprg.php?q='+escape($('#charac').val()), function(data) {
            alert(2);
        });

        jqxhr.success(function() { alert("second success"); });
        jqxhr.error(function() { alert("error"); });
        jqxhr.complete(function() { alert("complete"); });
    });
}); 
```

# image - 将客户端网页中画布的 html 代码发送到服务器？

> ID：10358189
> 
> 赞同：-1
> 
> 时间：2012-04-27T21:36:31.573
> 
> 标签：image, canvas, client

这可能是一个愚蠢的问题..但我决定在这里试一试...

我正在使用 AJAX 开发一个 Web 应用程序来进行客户端和服务器（python/django）之间的交互。

现在在客户端页面中，有一个包含动态生成图像的画布；我想获取此图像并将此图像发送到服务器，但是，由于违反了画布安全规则（在这种情况下客户端和服务器必须位于同一域中），我无法使用 Canvas.toDataURL()。

所以我只是想知道是否可以获取 canvas 元素并将其 HTML 发送回服务器，然后让服务器处理它并提取其图像数据？

感谢任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T22:37:59.783

唯一的问题`<canvas>`是使用来自不同来源的图像来保留日期（CORS 问题）。

只是

*   使用 toDataURL() 获取图像数据

*   使用普通 AJAX 将此数据发布到服务器

*   剥离数据 URL 前缀

*   base64解码数据

*   现在您有了二进制格式的图像数据

*   对图像做任何你想做的事

base64 + dataURL 解码示例：[https ://github.com/miohtama/Krusovice/blob/master/bin/create_bg_thumbnails.py#L62](https://github.com/miohtama/Krusovice/blob/master/bin/create_bg_thumbnails.py#L62)

# asp.net - 比 DataSet 更多的数据库流量？

> ID：10358190
> 
> 赞同：-3
> 
> 时间：2012-04-27T21:36:33.247
> 
> 标签：asp.net

忘记 DataSet 与 DataReader 参数的其他细节，并告诉我使用**DataSet**是否可以像 DataReader 那样避免创建尽可能多的数据库查询？

根据我的经验，很明显，使用 DataReader 比使用 DataSet 需要更多的数据库查询。使用 DataSet，您可以创建一个查询（或存储过程），断开连接，然后简单地查询 DataSet，从而减少数据库的来回操作。

所以事实上，在相同的原因场景下，DataReader 创建的数据库流量比 DataSet 多的说法是否正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T22:06:36.880

A`DataSet` **使用**a`DataReader`来填充自己。

所以答案是否定的，a`DataReader`不会产生更多的数据库流量。开发人员的理解和使用（或误用）会产生更多的数据库流量。

# c++ - 是否可以将 Antlr 的 gUnit 与 C++ 目标一起使用？

> ID：10358197
> 
> 赞同：0
> 
> 时间：2012-04-27T21:37:28.260
> 
> 标签：c++, parsing, testing, antlr

[我在http://www.antlr.org/wiki/display/ANTLR3/gUnit+-+Grammar+Unit+Testing](http://www.antlr.org/wiki/display/ANTLR3/gUnit+-+Grammar+Unit+Testing)找到了 gUnit 教程，但它似乎涵盖了 Java 目标。您还可以将它与 C++ 目标解析器一起使用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T05:57:28.040

不，gUnit 仅适用于 Java 目标语法。

# javascript - 输入 keydown 事件是触发另一个元素的按钮单击

> ID：10358200
> 
> 赞同：2
> 
> 时间：2012-04-27T21:37:56.620
> 
> 标签：javascript, jquery, html, knockout.js, knockout-2.0

我希望我在这里遗漏了一些明显的东西......

这只发生在 IE9 中（看图）

我正在使用 KnockoutJS(2.1 RC) 和 JQuery(1.7.2)

我在页面上有一个输入元素（实际上有很多），每当我按下“enter”键时，它都会触发`click`页面上第一个按钮元素的事件。

[http://jsfiddle.net/HZymG/2/](http://jsfiddle.net/HZymG/2/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T21:41:58.860

添加`type="button"`到您的`<button>`元素中。如果在 IE 中省略它，它会将它们视为`<button type="submit" />`元素。

更新了您的 jsFiddle 以表明这是问题所在：http: [//jsfiddle.net/HZymG/3/](http://jsfiddle.net/HZymG/3/)

# python - Pyparsing setResultsName 属性错误：“没有这样的属性”

> ID：10358202
> 
> 赞同：3
> 
> 时间：2012-04-27T21:38:25.377
> 
> 标签：python, pyparsing

我无法让 setResultsName 在此脚本中为我工作，即使在尝试模拟给出的示例时也是如此。我查看了文档，查阅了作者的书，并查看了论坛示例。我尝试了几种变化，坦率地说我有点难过，尽管我确信我做错了一些愚蠢的事情，因为我在这方面不是很有经验。

```
from pyparsing import *

lineId = Word(nums)
topicString = Word(alphanums+'-'+' '+"'")
expr = Forward()
full_entry = Group(lineId('responsenumber') + expr)

def new_line():
    return '\n' + lineId.responsenumber # <-- here is the line that causes the error

expr << topicString + Optional(nestedExpr(content=delimitedList(expr))) + Optional((Literal(';').setParseAction(new_line) + expr))

for line in input:
    inputParseResults = delimitedList(full_entry).parseString(line).asList()
    print inputParseResults 
```

这部分代码试图做的是接受这个输入：

```
1768    dummy data; things
27483   other things 
```

让它在分号处换行，再次附加 lineId，然后重新关联它，就像你在这一行看到的那样：

```
1768    dummy data
1768    things
27483   other things 
```

还有其他代码来处理我未在此处显示的输出格式；我的主要障碍是换行 + lineId，我想如果我能让 setResultsName 工作，我可能会被设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T22:34:06.353

使用`setParseAction`和`forward`都是让我头疼的东西（这就是我知道下次看代码时代码将无法阅读的方式）。

对于您所描述的， delimitedList 是一个不错的选择。除非您真的需要其他魔法的解析操作，否则如何：

```
from pyparsing import *

topicParser = Word(nums)("line") + \
              delimitedList(Word(alphanums+'-'+' '+"'"),';')("list")

for line in input:
    topics = topicParser.parseString(line)
    lineid = topics['line']
    for topic in topics['list']:
        print "{0} {1}".format(lineid,topic) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T21:51:20.863

像这样将解析的标记传递到您的解析操作中，并根据标记访问结果名称，而不是针对解析器表达式：

```
def new_line(tokens): 
    return '\n' + tokens.responsenumber 
```

# bash - Bash - curl 脚本，使用选项运行

> ID：10358203
> 
> 赞同：0
> 
> 时间：2012-04-27T21:38:48.053
> 
> 标签：bash

我试图在卷曲后运行一个脚本，但是有一个选项——我得到了错误：`/usr/bin/install: /usr/bin/install: cannot execute binary fil`

```
curl https://raw.github.com/gist/2513225/a39232a94b25741ddb25e15755bddd5d71999b85/give-tourettes.sh | sh install 
```

什么语法错误？只是一些周五的恶作剧......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:42:33.200

显然，`curl`发送到其标准输出的内容对于`sh`. 如果我不得不猜测，文件的第一行`#!/bin/bash\r`是`\r`回车符 (CR) 的位置，系统找不到名称中包含 CR 的文件。（并且错误报告令人困惑，因为 CR 破坏了显示。）

也许您应该在将输出`tr -d '\015'`提交到 shell 之前通过管道传输它。

```
URL=https://raw.github.com/gist/2513225/a39232a94b25741ddb25e15755bddd5d71999b85/give-tourettes.sh
curl "$URL" |
tr -d '\015' |
sh install 
```

请参阅：[bash：将变量注入字符串会](https://stackoverflow.com/questions/10354351/bash-injecting-variable-into-string-adds-extra-r/10354650#10354650)为相关问题添加额外的 \r。

*针对这个假设*：`sh install`尝试`install`将当前目录中的文件作为 shell 脚本运行。那可能行不通。你的意思是把它传送到只是`sh`为了执行`tourettes.sh`？或者您是否希望`install`读取它的标准输入（如果是，为什么）？

“丢失回车”的建议是部分相关的；您不希望数据中有 CR，但它可能不是唯一的，甚至不是主要的问题。

# assembly - MIPS 汇编 - 十六进制指令字符串

> ID：10358209
> 
> 赞同：0
> 
> 时间：2012-04-27T21:39:23.597
> 
> 标签：assembly, mips, spim

我正在Assembly中做一些事情，它需要一个字符串作为指令，例如

```
add $t1, $t0, $t1 
```

并以十六进制打印出指令。

我逐个扫描字符串，首先识别添加。Add 的操作码为 001000（6 位）

t1 被扫描，并将自身与数据部分进行比较，它的值为 5 位 01001，与 t0 相同的值为 01000，t1 再次为 01001。所有这些都是按顺序扫描的，因此优先级并不那么重要据我所知。

从那时起，我知道我需要以某种方式将它们混合在一起，然后从二进制转换为十六进制。我的问题是，我不确定在读取这些二进制值时应该如何存储它们。是否将它们存储在数据部分中，由于它们的奇数位大小，这似乎不正确，或者是否有一些更简单的方法。

老实说，我对位移知之甚少，所以答案可能就在那里。

这是我的代码。这在很大程度上是一个 WIP

```
#text segement
    .text
    .globl main

main:
    li $t0, 0   #pointer for input
    li $t1, 0   #pointer for storing
    li $t2, 0   #parser
    li $t3, 0   #temp hold t0
    li $t4, 0   #hold reg num
    li $t8, 0   #number of reg

    li $v0, 8
    la $a0, input
    li $a1, 32
    syscall

    la $a0, input

    li $v0, 10  #end
    syscall

scan:
    lb $t2, input($t0)
    #beq $t2,'$',pass
    beq $t2,' ',pass

    beq $t2,'*',next
    beq $t2,',',next

    beq $t2,10,end

    sb $t2, inst($t1)

    addi $t1,1
    addi $t1,1

    j scan

next:
    move $t3, $t0 #store in t3 temporarily
    move $t0, $0
    move $t1, $0
    move $t2, $0
next2:
    lb $t2, inst($t0)
    beq $t2,'$',register    #t2 = $, reg
    bge $t2,65,funct        #t2 >= 65, funct
    ble $t2,57,num          #57 >= t2, num

funct:
    lb $t2, inst($t0)
    beq $t2, 'a', afunct
    beq $t2, 's', sfunct
    beq $t2, 'm', afunct
afunct:
    lb $t2, inst($t0)

sfunct:

mfunct:

num:
    lb $t2, inst($t0)

register:
    addi $t0, 1
    lb $t2, inst($t0)   #get reg type

    addi $t0, 1         #increase pointer

    lb $t4, inst($t0)   #find reg num and convert to t4
    addi $t4, -48

    beq $t2, 't', treg
    beq $t2, 'a', sreg
    beq $t2, 'v', vreg

treg:
    mult $t4,4
    mflo $t4
    lw $t2, tr($t4)
areg:
    mult $t4,4
    mflo $t4
    lw $t2, ar($t4)

vreg:
    mult $t4,4
    mflo $t4
    lw $t2, vr($t4)

.data
input:  .space 32
inst:   .space 32
tr: 01000,01001,01010,01011,01100,01101,01111
sr: 00100
vr: 00010

a:  001000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:49:58.223

是的，您的答案是位移和逻辑 OR'ing。您将指令组件指示的各个部分移动到生成的指令字中的适当位置，并将它们逻辑或在一起。（假设其他位为 0，相加将是等效的。

意识到你正在做的是编写一个汇编程序（一个小例子）。

# android - execSQL 不会从资产运行 SQL 语句

> ID：10358210
> 
> 赞同：0
> 
> 时间：2012-04-27T21:39:24.997
> 
> 标签：android, sqlite

```
public void execSqlFromAssets(String path) {
    InputStream input;
    String text;
    try {
        input = mCtx.getAssets().open(path + ".txt");
        int size = input.available();
        byte[] buffer = new byte[size];
        input.read(buffer);
        input.close();
        text = new String(buffer);
        String[] inserts = text.split(";");
        // SQLiteDatabase db = mDb;
        for (String insert : inserts) {
            insert = insert;
            Log.w(TAG, insert);
            try {
                mDb.execSQL(insert);
            } catch (Exception e) {
                String err = (e.getMessage() == null) ? "Cant execute sql"
                        + insert : e.getMessage();
                Log.w(TAG, err);
            }
        }

    } catch (IOException e) {
        Log.w(TAG, "execSqlFromAssets: " + path + " file not found");
    }

} 
```

这是我的代码问题在线包含**mDb.execSQL(insert)**。它抛出我无法读取的异常值为空。我只是不明白其中一条错误消息是： **Cant execute sqlINSERT INTO food (name, cals) VALUES ("kolac",270)**。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T09:47:23.610

好的，@Preet Sangha 要求我发布解决方案。我的问题是我在 onCreate 方法的 SQLiteOpenHelper 实例中调用了这个函数，而 mDb 实例还没有创建，所以我将函数更改为这个

```
public void execSqlFromAssets(String path, SQLiteDatabase db) {
    if(db == null){
        db = mDb;
    }
    InputStream input;
    String text;
    try {
        input = mCtx.getAssets().open(path + ".txt");
        int size = input.available();
        byte[] buffer = new byte[size];
        input.read(buffer);
        input.close();
        text = new String(buffer);
        String[] inserts = text.split(";");
        for (String insert : inserts) {
            try {
                db.execSQL(insert);
            } catch (Exception e) {
                String err = (e.getMessage() == null) ? "Cant execute sql"
                        + insert : e.getMessage();
                Log.w(TAG, err);
            }
        }

    } catch (IOException e) {
        Log.w(TAG, "execSqlFromAssets: " + path + " file not found");
    }

} 
```

所以现在如果我从 onCreate 调用这个函数，我会发送 db 作为第二个参数，如果我从应用程序的其他组件调用它，我会发送 null 作为第二个参数

# python - 如何在我的 python 脚本中添加代理支持？（reddit api 包装器 python）

> ID：10358214
> 
> 赞同：-1
> 
> 时间：2012-04-27T21:39:50.847
> 
> 标签：python, reddit

这是一些代码：

```
import reddit
usernames = ['username', 'username1', 'username2'] proxy_list = ['ip', 'ip2', 'ip3'] 
cycle = 0
accounts = 3 print "enter url" item = raw_input() 
r = reddit.Reddit(user_agent='my_cool_application')
while cycle < accounts:
#code to connect to a proxy

    r.login(usernames[cycle], "password")
    print "%r logged in" %usernames[cycle]
    submission = r.get_submission(item)

    submission.upvote()
    print "%r voted" %usernames[cycle]
    cycle = cycle + 1 
print "Upvoted %r times" %cycle 
```

这使用了 reddit mellort api。账目不真实。ips不是真的，呵呵。该脚本应该多次对帖子进行投票。该代码非常不言自明。此代码有效，但由于 ip 仅对帖子进行一次投票。我只需要上面标记的代码，它将在登录和投票之前连接到代理，以便每个投票都来自不同的 ip。请帮助我，我变得非常沮丧。请提供一些代码来替换“#code to connect to a proxy”。我知道很多人都在寻找解决这个问题的方法。帮助 Python 兄弟们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T01:22:47.130

你用的是什么系统？如果是linux的话，就很简单了。（由于twitter在这里被屏蔽了，所以只能通过代理才能访问）

```
import urllib2
import os

os.environ['http_proxy'] = "http://10.8.0.1:8118/"
print urllib2.urlopen("http://twitter.com").read() 
```

# ios - ios - UITableView 部分索引标题 - 标题不多 => 散开字母？

> ID：10358216
> 
> 赞同：0
> 
> 时间：2012-04-27T21:40:01.457
> 
> 标签：ios, uitableview

所以我有一个 UITableView，我正在使用 Section Index Titles.. 但我没有使用整个字母表，只需要单个字母。

但它这样做的方式是，将每个字母均匀隔开，如下面的两个示例：

![真的间隔](../Images/f788c6d9f6511c5ec3ed7b73a98ee9d1.png) ![高度间隔](../Images/9ec81022d6d657ae3ef25356d1185522.png)

那么，无论如何我可以强制它连续显示它们而没有这么多的间距吗？也许调整框架或插图？

谢谢你，rnc505

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:56:28.763

我很确定您会被表格视图框架高度的均匀分布所困扰。

调整框架无济于事，因为这会影响整个表格视图的框架。

如果要创建具有自定义高度的索引视图，则需要使用自定义视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-18T19:55:16.053

苹果在 iOS7 中解决了这个问题。从 iOS7 开始，可用的索引标题位于右侧的中心。但是他们在大量显示点之前降低了最大数量。现在只有一半的条目适合。我为那个（15175436）提交了一份雷达。

# javascript - 我可以使用 JavaScript 删除 ASP.NET 身份验证 cookie (.ASPXAUTH) 吗？

> ID：10358225
> 
> 赞同：3
> 
> 时间：2012-04-27T21:40:31.267
> 
> 标签：javascript, asp.net, forms-authentication

我可以使用 JavaScript 删除 ASP.NET 身份验证 cookie (.ASPXAUTH) 吗？我想在我的 ASP.NET/JavaScript 移动应用程序上实现注销功能，而无需往返服务器。但是，由于某种原因，这种方法不起作用。

```
document.cookie = '.ASPXAUTH=; expires=Thu, 01-Jan-70 00:00:01 GMT;'; 
```

我应该怎么办？

谢谢你。

更新：好的，我读到了一个 HttpOnly cookie，情况就是这样。为了使 cookie 不是 HttpOnly，将以下行添加到 web.config（system.web 部分）：

```
<httpCookies httpOnlyCookies="false"/> 
```

更新：上面的方法不起作用——ASP.NET 只是忽略了指令。我最终在 Global.asax 中做了这个 hack：

```
protected void Application_EndRequest(Object sender, EventArgs e)
{
    string cookieName = System.Web.Security.FormsAuthentication.FormsCookieName;
    if (Response.Cookies.Count > 0)
    {
        foreach (string s in Response.Cookies.AllKeys)
        {
            if (s == cookieName)
            {
                Response.Cookies[cookieName].HttpOnly = false;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T15:04:21.473

您无需删除 cookie 即可注销用户，只需将“过期”值设置为昨天，然后 BOOM，用户已注销。

考虑这篇非常有用的博客文章：[在 Javascript 第 1 部分中使用 cookie](http://www.markusnordhaus.de/2012/01/20/using-cookies-in-javascript-part-1/)

# ajax - CefSharp - 如何处理“此页面包含不安全的内容”。信息？

> ID：10358226
> 
> 赞同：0
> 
> 时间：2012-04-27T21:40:32.643
> 
> 标签：ajax, security, jsonp, chromium

我正在使用 Chromium Embedded Framework 的[CefSharp](https://github.com/chillitom/CefSharp) .Net 包装器作为 Web 应用程序的简单包装器。在我的 Web 应用程序中，我向另一个域发出 JSONP AJAX 调用以获取一些数据并显示它。该域的 URL*未*使用 SSL。因此，在 Chrome 浏览器中执行此操作时，我收到以下消息，最终用户只需单击“仍然加载”，允许触发 JSONP 请求并检索数据......

![在此处输入图像描述](../Images/4556143ec4672e9ad87a648f3f989b34.png)

使用 CefSharp 的应用程序在运行时只需启动我的 Web 应用程序的主 URL。但是，当我尝试使用 CefSharp 在我的此应用程序中进行相同的调用时，它没有得到相同的提示。相反，AJAX 请求只是超时（当最终用户从不单击出现在 Chrome 中的黄色栏中的按钮时会发生相同的行为）。

有谁知道 CefSharp 是否有办法让我捕捉到这个安全信息，或者......

1.  提示最终用户单击“仍然加载”，类似于 Chrome 浏览器的行为，或
2.  以编程方式完全绕过安全警告？

如果没有，Chromium 框架本身是否支持处理这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:35:23.283

在发布到[CefSharp](https://github.com/chillitom/CefSharp/issues/71)和[CEF](http://www.magpcss.org/ceforum/viewtopic.php?f=6&t=799)项目后，看起来 CEF 目前不支持这种情况。magreenblatt 提出了几种将其添加到 CEF 的方法。现在我只需要尝试找到时间来添加对它的支持。:-)

# .htaccess - htaccess 两个参数mod-rewrite问题

> ID：10358229
> 
> 赞同：0
> 
> 时间：2012-04-27T21:40:47.650
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, seo

我正在尝试设置一个更友好的 URL 系统并且失败了。我希望能够像这样传递 1 或 2 个 GET 参数：

```
http://website.com/1234/123456 
```

`1234`第一个参数是哪里`123456`，第二个参数是哪里。

在我的尝试中，Apache 一直将其`/1234/`视为文件夹***和***参数。这是我到目前为止所尝试的：

```
RewriteRule ^([^/]*)/([^/]*)$ index.php?id=$1&pa=$2 [L] 
```

和

```
RewriteRule ^(.*)/(.*)$ index.php?id=$1&pa=$2
RewriteRule ^(.*)$      index.php?id=$1 [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T22:25:04.323

你可以这样做：

```
RewriteEngine On
RewriteRule ^/?index\.php$ - [L]
RewriteRule ^/?(?:([^/]*)(?:/([^/]*)/?)?)?$ /index.php?id=$1&pa=$2 [L] 
```

这有点严格和混乱，所以你可以试试：

```
RewriteEngine On
RewriteRule ^/?index\.php$ - [L]
RewriteRule ^/?(([^/]*)(/?(.*)))?$ /index.php?id=$2&pa=$4 [L] 
```

这将使所有内容都超过最后一个，因此`host.com/123/1233/56`将重写，`host.com/index.php?id=123&pa=1233/56`而第一个不会重写它，因为`56`

# vim - 切换标签页时vim能记住模式吗？

> ID：10358231
> 
> 赞同：4
> 
> 时间：2012-04-27T21:40:56.803
> 
> 标签：vim

我最初在 MacVim 中注意到了这一点，但事实证明这也发生在终端中。如果您打开了两个选项卡并在一个选项卡中进入插入模式，然后切换到另一个选项卡（例如，通过在 GUI 中单击它），插入模式仍然处于活动状态。当我正在编辑某些内容并想要快速切换到另一个选项卡以进行搜索/查找/等时，这会造成严重破坏，因为正常模式的击键会插入缓冲区。

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T22:03:23.513

使用自动命令的一种方法：

```
au TabEnter * stopinsert 
```

将此行添加到您的`.vimrc`文件中，它应该可以按您的意愿工作。

# php - php 可用选项

> ID：10358232
> 
> 赞同：-2
> 
> 时间：2012-04-27T21:41:01.793
> 
> 标签：php, algorithm

> **可能重复：**
> [如何在 PHP 中生成字符串的所有排列？](https://stackoverflow.com/questions/2617055/how-to-generate-all-permutations-of-a-string-in-php)

我想在 php 中创建一个脚本来接受这个输入：

```
12a 
```

并输出如下结果：

```
1, 2, a, 12, 1a, 21, 2a, a1, a2, 12a, 1a2, 21a, 2a1. 
```

我做了一些研究，但我找不到任何可以做到这一点的脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T22:17:02.747

这是[此](https://stackoverflow.com/a/2617080/295264)答案的修改后的功能

```
function permute($str,$i,$n) {
   if ($i == $n)
       print "$str\n";
   else {
        for ($j = $i; $j < $n; $j++) {
          swap($str,$i,$j);
          permute($str, $i+1, $n);
          swap($str,$i,$j); // backtrack.
       }
   }
}

// function to swap the char at pos $i and $j of $str.
function swap(&$str,$i,$j) {
    $temp = $str[$i];
    $str[$i] = $str[$j];
    $str[$j] = $temp;
}   

$str = "12a";
$len = strlen($str);
for($i =0; $i <= $len; $i++) {
   permute($str,0,$i + 1); // call the function.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T22:11:10.013

这并不完美，因为您的输出集没有明确定义。首先，弄清楚你的输出集应该是什么样子，然后使用下面的方法开始。

```
<?php

$input = "12a";
$input_array = str_split($input, 1);//get an array of each individual character

$max_length = strlen($input);
$length = 01;
$result = array();

foreach($input_array as $character) {
  $result[] = $character;
}

while ($length < $max_length){
  foreach($result as $substring) {
    foreach($input_array as $character) {
      $result[] = $substring.$character;
    }
  }
  $length++;
}

foreach ($result as $result_string) {
  echo $result_string.", ";
} 
```

请注意，通常这些算法使用“动态编程”。

# linux - 在linux中与倒数第二个单词对齐

> ID：10358234
> 
> 赞同：2
> 
> 时间：2012-04-27T21:41:12.580
> 
> 标签：linux, bash, grep

我有两个值“usb 1-3”和“地址 20”。现在我正在尝试搜索一个包含这两个词的文本文件（基本上是一个日志文件）。

现在该文件有很多行，其中包含以下单词：

```
Apr 27 13:30:55 box2 kernel: usb 1-3: USB disconnect, address 20
and
Apr 27 13:25:43 box2 kernel: usb 1-3: new high speed USB device using ehci_hcd and address 20 
```

现在我的要求是：我想得到这两个单词倒数第二次出现的那一行，然后是接下来的 16 行。就像文件中有 6 次出现（这两个词都出现 6 行），那么我需要第 5 次出现的行和接下来的 16 行。如果有 10 次出现，那么我需要第 9 次出现和接下来的 16 行。

目前我正在使用

```
egrep -A 20 'usb 1-3:.*address 20' filename | tail -16 > output. 
```

但它给了我最后一次出现。不是倒数第二个。请注意，该行应该有两个单词并且顺序相同（首先是usb 1-3，然后是地址20）如果我的问题不清楚，请告诉我。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T21:58:23.940

这需要两次通过，但它应该可以解决问题：

```
tail -n +`egrep -n 'usb 1-3:.*address 20' filename |
  tac | sed -n '2s/:.*//p'` filename | head -17 
```

您可以使用`awk`或`perl`一次性完成，但您需要管理一些缓冲区。请注意，它使用`tac`的是反向`cat`。如果您的系统上没有它，请尝试`tail -r`替换它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T22:58:10.010

如果你有 GNU grep

```
grep -B 1 -A 15 'usb 1-3.*address 20' filename 
```

[http://manpages.debian.net/cgi-bin/man.cgi?query=grep](http://manpages.debian.net/cgi-bin/man.cgi?query=grep)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T22:28:52.533

一种使用方式`perl`：

```
use warnings;
use strict;

die qq[Usage: perl $0 <input-file>\n] unless @ARGV == 1;

my (@lines, $found);

## Reverse content and pipe output to perl.
open my $fh, q[-|], qq{tac $ARGV[0]} or die qq[Open error: $!\n];

## Read line by line.
while ( <$fh> ) { 

    ## Remove trailing '\n'.
    chomp;

    ## Use an array as a FIFO structure and save last 16 lines
    ## processed.
    if ( @lines > 16 ) { 
        pop @lines;
    }   
    unshift @lines, $_; 

    ## Count how many lines matches at same time 'usb 1-3' and
    ## 'address 20'.
    if ( m/usb\s1-3/ && m/address\s20/ ) { 
        ++$found;
    }   

    ## In second one, print lines saved.
    if ( ($found || 0) == 2 ) { 
        printf qq[%s\n], join qq[\n], @lines; 
    }   
} 
```

# javascript - javascript如何在网站之间传输信息

> ID：10358239
> 
> 赞同：0
> 
> 时间：2012-04-27T21:41:35.973
> 
> 标签：javascript, json, kissmetrics

我到处寻找关于如何在两个网站之间传输信息的清晰简洁的答案。我希望能够从客户的网站收集信息并将其记录在我的数据库中。

Kissmetrics 提供了两个这样的代码片段，可以嵌入到您的网站中，用于收集信息。我可以看到他们正在调用 js 脚本。这是使用javascript还是其他东西完成的？任何推荐的教程都会很棒。

```
 <script type="text/javascript">
var _kmq = _kmq || [];
function _kms(u){
setTimeout(function(){
var s = document.createElement('script'); var f = document.getElementsByTagName('script')[0]; s.type = 'text/javascript'; s.async = true;
s.src = u; f.parentNode.insertBefore(s, f);
}, 1);
}
_kms('//i.kissmetrics.com/i.js');_kms('//doug1izaerwt3.cloudfront.net/fbe64b b0f9.1.js');
</script>

_kmq.push(['record', 'Viewed Homepage']);
_kmq.push(['record', 'Signed Up', {'Plan':'Pro', 'Amount':99.95}]); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T21:46:14.933

他们基本上是在您的页面上创建新的脚本标签并加载自己的 javascript ，因此不存在跨域问题。你只是告诉你的应用程序加载他们的 javascript 并引导他们的代码，这里没什么特别的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T21:47:17.007

他们正在动态加载两个脚本文件，一个`i.kissmetrics.com domain`来自`doug1izaerwt3.cloudfront.net`.

有时，对 javascript URL 的请求会导致接收请求的服务器记录某些信息，有时返回的 javascript 本身会转身并发送更多请求，从而导致服务器记录某些信息。我们必须查看这些实际脚本才能更具体地了解它们在做什么。

推送到`_kmq`数组中的数据可能是排队等待发送到 Kissmetrics 服务器的数据（Google Analytics 做了类似的事情）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T21:51:11.553

JSONP - 使用 JSONP 作为协议查看 AJAX 调用

# c# - Jquery 模态可选数据（建议用户）

> ID：10358240
> 
> 赞同：0
> 
> 时间：2012-04-27T21:41:41.987
> 
> 标签：c#, javascript, jquery, sql

我想允许我的用户输入一个名称，但如果它不存在，则可以从“建议用户”列表中进行选择。是否可以使我的 jquery 弹出窗口中的值可单击或突出显示一个并选择“确定”。目前我正在从后面的代码中注入我的 html，但如果需要可以更改它。TIA

代码背后：

```
ClientScriptManager cs = Page.ClientScript;
               string javaScript = "<script language=JavaScript>\n $(document).ready(function gvPopup() {$('#popupdialog').dialog({width: 525, overflow: scroll, height: 220,  title: 'User Not Found !<br/> Please Enter a Suggested User Below'})});\n</script>"; 
```

我希望下面的名称可以选择。

![在此处输入图像描述](../Images/f90f8056a4d232da9ea606961dbdad5f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T06:31:52.840

jQuery UI 中的自动完成小部件可以很容易地定制为您描述的内容。

[http://jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/)

我最近有一个非常愉快的体验，将它集成到我正在处理的管理面板中。您必须设置一个 ajax 脚本，该脚本会根据当前输入输出一个 json 格式的建议列表，而小部件几乎会处理其余部分。如果您需要它的工作方式与典型情况有所不同，小部件初始化调用甚至允许您提供自己的处理程序以进行选择等。

# jquery - 我试图在我的谷歌地图上显示所有家得宝

> ID：10358242
> 
> 赞同：0
> 
> 时间：2012-04-27T21:41:56.643
> 
> 标签：jquery, google-maps-api-3, geocoding, google-maps-markers

我是谷歌地图的新手。我正在尝试制作一张使用 KmlLayer 显示整个美国销售区域的地图。这部分是成功的。

我现在想将所有 Home Depot 显示为标记，以便理论上您可以访问地图，查看您的领土并查看您所在地区的所有 Home Depot。

这是我到目前为止所拥有的：

```
$(document).ready(function() {
    var map, geocoder;

    init();

    $('.showVendors').click(function() {
        loadKML();
        showVendors();
    });
});

function init() {
    var myOptions = {
        center: new google.maps.LatLng(37.09024,-95.712891),
        zoom: 3,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    map = new google.maps.Map(document.getElementById('map'), myOptions);
    geocoder = new google.maps.Geocoder();
}

function loadKML() {
    var kmlOptions = {
        clickable: true,
        map: map,
        preserveViewport: true,
        suppressInfoWindows: false
    }
    var kmlLayer = new google.maps.KmlLayer('kml/territories.kml', kmlOptions);

}

function showVendors() {
    var vendor = 'Home Depot';
    geocoder.geocode( { 'premise' : vendor }, function(results, status) {
        if ( status == google.maps.GeocoderStatus.OK ) {
            map.setCenter(results[1].geometry.location);
            var marker = new google.maps.Marker({
                map: map,
                position: results[1].geometry.location
            });
        } else {
            alert ( "Geocode was unsuccessful for the following reason: " + status );
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T22:13:31.480

当我直接通过 API 运行您的查询时：

```
http://maps.googleapis.com/maps/api/geocode/json?premise=Home%20Depot&sensor=true 
```

我得到：

```
{
   "results" : [],
   "status" : "ZERO_RESULTS"
} 
```

看起来此信息在地理编码 API 中不可用，这是您在上面使用的代码。使用places API 会有更好的运气，但它仍然是实验性的：

[https://developers.google.com/maps/documentation/places/](https://developers.google.com/maps/documentation/places/)

# c# - 在 C# 中将 2 个 DateTime 变量合并为一个

> ID：10358244
> 
> 赞同：2
> 
> 时间：2012-04-27T21:41:59.843
> 
> 标签：c#, datetime

我有 2 个 DateTime 变量。

```
One is: DateTime date //this format is yyyymmdd
Second is: DateTime time // this format is hhmmtt  (hour:min:tt) 
```

我怎样才能将这两个结合在一起？生成一个 DateTime 变量。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T21:49:09.880

```
var output = new DateTime(date.Year, date.Month, date.Day,
                          time.Hour, time.Minute, time.Second); 
```

但是，这只适用于您列出的两个日期，其中一个是日期，一个是时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T21:44:32.477

您应该将其中一个 DateTimes 转换为 a`TimeSpan`并将其添加到第二个`DateTime`. 只花时间`DateTime`。您可以使用它的`GetTicks`方法并将其传递给`TimeSpan`构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T21:45:53.310

```
DateTime day; //assumed set with the correct date
DateTime time; //assumed set with the relevant hour, minute, second

DateTime all = day.Date.Add(new TimeSpan(time.Hour, time.Minute, time.Second)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T21:53:57.823

```
DateTime date = new DateTime(2012,12,04);
DateTime time = new DateTime(1,1,1,11,20,30);
DateTime combined = date.AddSeconds(TimeSpan.Parse(time.ToShortTimeString()).TotalSeconds);

Console.WriteLine(date);
Console.WriteLine(time);
Console.WriteLine(combined);

04.12.2012 00:00:00
01.01.0001 11:20:30
04.12.2012 11:20:00 
```

# php - 之后的一切——

> ID：10358246
> 
> 赞同：0
> 
> 时间：2012-04-27T21:42:05.623
> 
> 标签：php, regex

```
-- المصدر : <a href="http://www.almasryalyoum.com/node/799626">المصري اليوم</a> 
```

我想编辑此代码以删除之后的所有内容-

编码

```
function remove_first_moret ($content) {
if (!is_page() && !is_feed() && !is_feed() && !is_home()) {
$content = preg_replace("/-(.*)$/", "", $content, 1);
} return $content;
}
add_filter('the_content', 'remove_first_moret'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:45:11.187

不需要正则表达式。利用**[`strstr()`](http://il.php.net/manual/en/function.strstr.php)**

```
strstr($string, "--", true); 
```

# math - 为什么频率用复数表示？

> ID：10358252
> 
> 赞同：5
> 
> 时间：2012-04-27T21:43:01.423
> 
> 标签：math, audio, signal-processing, fft

在 FFT 中，产生的频率代表幅度和相位。由于 FFT 输出阵列中的每个频率元素本质上只是描述了每个频率间隔的 SIN 波，所以它不应该只是我们需要的幅度吗？复数虚部表示的相位有什么意义？

为了澄清我的问题，为了能够对波的相位赋予意义，我需要一个参考点或参考波。

当 FFT 报告结果频域输出中每个正弦波的相位时，它报告相位的参考波是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T21:54:57.870

用外行的话来说：幅度告诉你那个频率有多少，相位告诉你它在哪里。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-27T21:53:39.030

![显示相加正弦波中相位影响的图](../Images/050d168ac210377d0ea111f9a8dd02c6.png)

因为不同分量的相位会影响总信号。图中的两个函数都是由周期为 pi 和 2pi 的正弦波求和而成，但 p=2pi 正弦波的相位不同。如您所见，输出并不相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T16:46:03.737

FFT（有不止一种约定）通常报告关于第零个样本的相位。或者，如果您使用 FFTShift，则相对于 FFT 窗口中心的样本，该窗口的索引从 0 到 N-1（例如，样本编号 N/2 = sin(0)，相位为 0）。后一种约定，使用 FFTShift 对中相位通常更好，因为在 FFT 孔径的边缘可能存在很大的不连续性，或者在使用锥形窗函数后边缘几乎没有数据。

如果使用 FFTShift 使相位参考居中，则零相位表示偶函数，而 pi 或 -pi 的相位表示窗口中的奇函数。

一般来说，人类的听觉无法区分单个声源的相位。但是，在处理组合声音或相同频率的多个正弦波时，相位很重要。同相的正弦曲线相加或相加。反相的正弦波抵消。因此，如果您有两个无相位的扬声器响应的 FFT，您将不知道它们一起听起来是好是坏。

# client-server - 独立 Java SE 客户端中的分离对象：Netbeans 使用自动生成的 DTO？

> ID：10358255
> 
> 赞同：0
> 
> 时间：2012-04-27T21:43:43.953
> 
> 标签：client-server, ejb, dto, auto-generate

我有个问题：

1.  我在一个 Java EE 项目中工作，GUI 是由其他人编写的。
2.  我创建了数据库
3.  我编写了一个包含实体的 Java SE 应用程序（使用 Netbeans 7.1）（我让 Netbeans 从数据库中生成这些实体并安装它们）
4.  我编写了测试类，编写了 ejb 并对其进行了测试。
5.  然后，我编写了一个单例 Web 服务，其中注入了其他 bean。
6.  我是 web 服务，我得到了预期的结果：可以获取所有实例的列表（数据库中的行），通过 ID 获取实例的实例，更新并保存它：所有 CRUD 操作都可以。
7.  在客户端，一个 Java SE 应用程序（使用 Netbeans 7.1）中，我通过指定 WSDL URL（在 6 中创建的 Web 服务）添加了一个“Web 服务客户端”。

我得到的都是分离的物体。每个对象及其所有字段（作为字符串）除了 ID（主键）。而不是更新，我得到了一个插入（因为编辑的对象在客户端上没有 ID）。删除根本不起作用。其他操作（findAll、findById）都OK。我必须使用 DTO（数据传输对象）吗？我读到从 ejb3.1 开始不再需要这些

在客户端，对于 findAll 操作，Netbeans 不接受使用实体：它强制我使用自动生成的“dtos”，它具有与实体几乎相同的文件（除了主键或 ID），但作为字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T21:12:44.040

问题解决了。我不知道为什么，但是 Netbeans 在没有主键的情况下自动生成了 DTO，因此并非所有 CRUD 都是可能的。这花了我很长时间，并引起了很多头痛！

梅齐亚内

# content-management-system - 如何在亚马逊 WS 上使用 CMS 设置网站

> ID：10358257
> 
> 赞同：1
> 
> 时间：2012-04-27T21:43:51.733
> 
> 标签：content-management-system, amazon-web-services, web-hosting, modx, modx-revolution

嗨，我正在寻找一个地方来举办我的大型项目，其理念是“为你使用的东西付费”。我找到了亚马逊 WS。我想在 Amazon WS 上使用 CMS (Modx) 建立一个站点。我基本上需要设置一个数据库（mysql？）和一个网络服务器。有人可以向我提供一些相关信息或指向教程或其他内容吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T19:25:41.500

好吧，AWS 为您提供 EC2（CPU）和 EBS（硬盘）。您将需要选择一个操作系统，设置 Apache/Nginx 和 mysql。

在它们的基本形式中，安装过程相当简单。

```
sudo apt-get install apache2
sudo apt-get install mysql 
```

在网络上查看您选择的操作系统的更完整教程。这些是针对 ubuntu 的。

至于 Modx，[他们的说明是可用的。](http://rtfm.modx.com/display/MODx096/Installation)

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-06T17:46:26.230

此外，您还可以使用 PaaS 解决方案来帮助您进行设置。如：

[https://bitnami.com/stack/modx/cloud/amazon](https://bitnami.com/stack/modx/cloud/amazon)

这将使您能够在任何云提供商上构建 CMS：AWS、Azure 等，并在其之上添加一层支持和管理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-25T14:54:15.497

我在这里找到了一个教程：http: [//blog.jelastic.com/2013/06/25/deploy-modx-cms/](http://blog.jelastic.com/2013/06/25/deploy-modx-cms/)

该教程似乎非常全面。似乎您只需要选择所需的实例，上传应用程序并配置数据库。

# php - PHP：自引用数组

> ID：10358261
> 
> 赞同：40
> 
> 时间：2012-04-27T21:44:20.760
> 
> 标签：php, reference

有没有办法从数组中引用数组键？这在代码格式中可能更有意义：

```
$array=array(
  "Key1"=>array(
    "Value1",
    "Value2"
  ),
  "Key2"=>&$this['Key1']
); 
```

我想要的是`$array['Key2']`输出与`$array['Key1']`. 我*可以*在创建数组后添加`$array['Key2']=&$array['Key1'];`，但如果可能的话，我想将它全部保存在一个代码块中。

我已经检查了有关参考的文档，以及此处提出的一些类似问题以及搜索“php 数组参考”。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-27T22:05:27.887

事实证明，这个问题的答案是肯定的。然而，它不是一个整洁的语法，因为它使用了一种子语句，并且在当前范围内留下了一个额外的引用变量。

考虑以下代码：

```
<?php

  $array = array(

    // Creates Key1 and assigns the value to it
    // A copy of the value is also placed in $ref
    // At this stage, it's not a reference
    "Key1"=>($ref = array(
      "Value1",
      "Value2"
    )),

    // Now Key2 is a reference to $ref, but not to Key1
    "Key2"=>&$ref,

    // Now everything is referenced together
    "Key1"=>&$ref

  ); 
```

我很惊讶这没有错误，但确实如此 -[这是证明](http://codepad.org/BAUeXMJ3)。当然，你*不*会这样做，但你可以......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T21:50:46.360

不可能在一个块中完成，因为您还没有初始化变量。与类变量相同。要做到这一点，您将需要以任何方式创建任何变量，而不是仅使用其链接，而是使用内存，所以再一次，您的问题的真正答案是 - 不可能:)

# scala - 用 HashMap[Int, Vector[Int]] (Scala) 表示图（邻接表）？

> ID：10358265
> 
> 赞同：3
> 
> 时间：2012-04-27T21:44:34.137
> 
> 标签：scala, graph, vector, adjacency-list

我想知道如何（如果可能）通过`HashMap[Int, Vector[Int]]`. `HashMap`当然是可变的。

目前我将它设置为`HashMap[Int, ArrayBuffer[Int]]`，但我可以更改 ArrayBuffer 中的每个单元格的事实让我感到不舒服，即使我相当确定我没有这样做。我会使用 a`ListBuffer[Int]`但我希望快速随机访问邻居，因为我需要在图表上进行快速随机游走。A`Vector[Int]`会解决这个问题，但有没有办法做到这一点？

据我所知（在 REPL 中试过），这是行不通的：

```
scala> val x = new mutable.HashMap[Int, Vector[Int]]
x: scala.collection.mutable.HashMap[Int,Vector[Int]] = Map()

scala> x(3) = Vector(1)

scala> x(3) += 4 // DOES NOT WORK 
```

我需要能够随时附加到它，也需要随机访问其中的任何元素（给定索引）。这可能吗？

谢谢！-kstruct

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T22:02:19.807

使用向量：

```
x += 3 -> (x(3) :+ 4)  //x.type = Map(3 -> Vector(1, 4)) 
```

您可能会注意到，如果没有现有密钥，这将失败，因此您可能希望将地图设置为

```
val x = new mutable.HashMap[Int, Vector[Int]] withDefaultValue Vector.empty 
```

# c# - DirectorySearcher FindAll SearchResultCollection 计数抛出 COMException

> ID：10358269
> 
> 赞同：0
> 
> 时间：2012-04-27T21:45:23.623
> 
> 标签：c#, .net, active-directory, directoryservices

我有一些代码可以正常工作很长时间来让某人登录我的应用程序：

```
private Employee Authenticate(string userName, string password) {
  DirectorySearcher search = new DirectorySearcher(_rootDirectory);
  search.Filter = "(&(objectClass=user)(SAMAccountName=" + userName + "))";
  try {
    SearchResultCollection results = search.FindAll();
    if (0 < results.Count) {
      // the rest of my code
      // that returns an employee
      // if the password matches
    }
  } catch (Exception err) {
    MessageBox.Show(err.Message, "ActiveDir.cs ADWrapper::AuthenticateUser Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
  }
  return null;
} 
```

最近，一旦我测试值（[SearchResultCollection](http://msdn.microsoft.com/en-us/library/system.directoryservices.searchresultcollection.aspx)不为空） ，代码就会抛出[COMException 。](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.comexception.aspx)`results.Count`

Microsoft 的文档没有表明[Count](http://msdn.microsoft.com/en-us/library/system.directoryservices.searchresultcollection.count.aspx)应该抛出任何类型的异常。

在调试我的代码时，我可以将断点放在上面的条件上，将鼠标悬停在上面，然后查看异常是否存在。

![异常截图](../Images/0be01c14a20acf7faa67f47d6b53b280.png)

如果我使用`F10`让调试器将我带到`catch`条件或在断点处等待几秒钟，则该`results.Count`变量将变为有效并包含一个整数值。

我猜[FindAll](http://msdn.microsoft.com/en-us/library/system.directoryservices.directorysearcher.findall.aspx)方法正在线程中执行，并且我正在线程完成之前检查结果。

有没有办法知道何时完成，或者我刚刚发现了由于**Active Directory**更新`FindAll()`而发生的某种新错误？

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T09:15:15.827

这是一个调试器工件。调试表达式在进程内的辅助线程上执行。*它与执行代码的线程不同*，这一事实可能会产生副作用。例如，明显的情况是在其 getter中使用*锁定的属性。*

不太明显的是任何与 COM 相关的东西，比如 Active Directory。COM 为非线程安全的 COM 服务器实现线程安全。这在调试器线程上无法正常工作，创建服务器的线程被冻结。加上其他任何可能出错的东西，比如没有编组调用等所需的代理/存根。

你没有真正的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-20T11:43:45.273

我发现了作为 OP 的确切行为。我的问题是我的过滤器有一个错误 - 发生这种情况时，我没有得到 FindAll() 抛出的错误，但随后尝试访问 .Count 在调试器中给出了错误......几秒钟后 .Count 返回零。**

# c++ - 为什么它需要它！=obj.end() 尽管每个迭代器都应该知道自己何时终止？

> ID：10358280
> 
> 赞同：4
> 
> 时间：2012-04-27T21:46:34.977
> 
> 标签：c++, iterator, containers

以下问题刚刚在我脑海中闪过。对于 c++ stl 迭代器，一种常见的做法是使用以下内容：

```
for (iterator it=obj.begin(); it!=obj.end(); it++) 
```

我想知道实际上 obj.begin() 可以告诉“它”何时停止，这会使 for 循环看起来像：

```
for (iterator it=obj.begin(); !it.end(); it++) 
```

好处是使迭代器更加独立，并且可以将 (iterator end()) 保存在容器类中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T21:56:42.907

有时你想做一些事情而不是遍历容器的全部内容。例如，您可以创建一对仅迭代容器前半部分的迭代器。因此，拥有一个单独的对象来表示结束更加灵活，因为它允许用户更好地控制放置范围结束的位置。

您是对的，对于迭代所有内容的最常见情况来说，这有点不方便。然而，C++11 提供了一个基于范围的 for 循环，这使得循环整个容器变得非常容易，所以就像编程中的许多事情一样，这实际上只是选择正确的构造来最好地表达你的意图的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-27T21:53:06.590

如果迭代器 API 是这样设计的，那么指针就不是有效的迭代器（因为指针显然没有`end()`）方法。因此，这将排除为具有连续内存的数据结构实现迭代器的最直接方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T22:04:32.363

一些库提供像您描述的那样工作[的“java 风格的迭代器” 。](http://doc.trolltech.com/qq/qq12-qt4-iterators.html)

然而，这个方案（`hasNext()`等）的大问题是这样的迭代器是类。

例如，STL 包含`<algorithm>`包含函数的标头，如`std::copy`、`std::generate`、`std::sort`、`std::lower_bound`等`std::fill`。所有这些例程都使用开始/结束样式迭代器。因此，您可以在这些函数中使用指针。如果这些函数在作为类的迭代器上运行（即，如果它们调用`hasNext()`而不是`!= end()`内部调用），那么您将无法将指针传递给 std::sort 等。在这种情况下，您必须将所有内容包装到类中，浪费您的时间，并且失去访问权限`<algorithm>`是不值得通过向`atEnd()`迭代器类添加方法获得的小便利。这可能就是为什么将迭代器与`end()`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T21:54:54.207

迭代器不需要“了解”容器。它可以只知道并关心内存块或当前节点（或任何适合正在迭代的数据结构的任何内容）中的偏移量，而无需了解包含容器的任何内容。例如，`vector`迭代器可以实现为一个简单的指针，而不知道（本身）向量在哪里结束。

此外，STL 算法也需要处理原始指针，因此迭代器需要“模仿”指针。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-28T00:01:15.757

最终，它只是在 STL 被发明时（由 Stepanov 在 90 年代初）做出的决定，后来在 C++ 标准化过程中得到批准，迭代器将是指针的泛化。来自[http://www.sgi.com/tech/stl/stl_introduction.html](http://www.sgi.com/tech/stl/stl_introduction.html)：

> 在反转 C 数组的示例中，要反转的参数显然是`double*`. 但是，如果要反转向量或列表，要反转的参数是什么？...答案是 reverse 的参数是迭代器，它是指针的泛化。

迭代器不必*是*指针的泛化。C++ 标准库（以及在此之前的 STL）理论上可以使用不同的迭代模型，其中迭代将由单个迭代器对象或单个范围对象表示，而不是由一对迭代器`first`和`last`.

我认为不会有太大的性能差异。现代 C++ 编译器肯定不会有。STL（以及基于它的标准库）总是依赖于编译器的良好内联来获得性能，并且这些类不会比编译器已经在容器内部处理的那些更糟糕。提供将一对指针转换为迭代器或范围对象的简单包装器也不会有任何重大困难。

有些人确实更喜欢其他迭代器模型——James Gosling 就是其中之一（或者如果不是他，也就是设计 Java 迭代器的人）。有些人更喜欢范围（包括很多 C++ 程序员：因此是 Boost.Range）。

I suspect the authors of the STL and C++ liked the fact that STL-style iterators retained a kind of compatibility with C, that you could take a C algorithm that used pointers to operate on an array (or other range specified by the user with a pair of pointers), and transform it almost unchanged into a C++ algorithm that uses iterators to operate on a container (or other range). That's the kind of thinking that means your new language can be more easily assimilated by an existing user-base, which was one of the goals of C++ early on.

So questions like, "can we provide a means of testing for end which is a few characters shorter, at the cost of making pointers no longer be iterators and making iterators larger" probably would not have got much interest at the time. But that was then, and for example Andrei Alexandrescu has been banging on for a while now that in his opinion this is not longer the best choice, and that ranges are better than iterators.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-27T21:55:28.633

让迭代器按照它的方式工作，让您可以灵活地处理子范围。您不必总是从 开始`begin()`或结束`end()`。例如，如果您想使用包含某个值的所有迭代器，您可以使用的返回值`equal_range()`作为您的开始和结束。

D 语言有一个[`range`](http://dlang.org/phobos/std_range.html)包含迭代器范围的开头和结尾的 a。它也被提议用于 C++：[http ://groups.google.com/group/comp.lang.c++.moderated/browse_thread/thread/7e52451ed8eea31c](http://groups.google.com/group/comp.lang.c++.moderated/browse_thread/thread/7e52451ed8eea31c)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-27T22:52:59.013

知道迭代器的`begin`and `end`（和`rbegin`and `rend`）在哪里当然很有用，但是您所说的情况在某种程度上由 C++11 的[基于范围的`for`-loop](http://en.wikipedia.org/wiki/C++11#Range-based_for-loop)处理：

```
for (auto it: obj)
{
    // Do something with *it;
} 
```

在 C++11 中完成工作要容易得多，而无需编写如此多的样板！

# hibernate - Hibernate 3.6 + JPA2 + Guice-persist + Maven

> ID：10358288
> 
> 赞同：1
> 
> 时间：2012-04-27T21:47:35.447
> 
> 标签：hibernate, jpa-2.0

是否可以通过 maven 使用 Hibernate 3.6 + JPA2 + Guice-persist + Maven？

我已经尝试了很多设置，但它没有工作。

我注意到不再需要 hibernate-commons-annotations 了，但是如果排除它，我得到了`Error injecting constructor, java.lang.NoClassDefFoundError: org/hibernate/annotations/common/reflection/ReflectionManager`错误。

此时，我的 pom.xml 看起来像这样：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>

<artifactId>foo</artifactId>
<name>Foo</name>
<description>bar. </description>
<packaging>jar</packaging>

<!-- ~le propriedades com as versoes das coisas~ -->
<properties>
    <hibernateVersion>3.6.10.Final</hibernateVersion>
    <bval.version>0.4</bval.version>
</properties>

<!-- ~le dependencias~ -->
<dependencies>
    <!-- ~ le jsr303 ~ -->
    <dependency>
        <groupId>javax.validation</groupId>
        <artifactId>validation-api</artifactId>
        <version>1.0.0.GA</version>
    </dependency>
    <dependency>
        <groupId>br.com.caelum.stella</groupId>
        <artifactId>caelum-stella-bean-validation</artifactId>
        <version>2.0-beta1</version>
    </dependency>

    <!-- ~ le hibernate... ~ -->
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>${hibernateVersion}</version>
        <exclusions>
            <exclusion>
                <groupId>org.hibernate</groupId>
                <artifactId>hibernate-commons-annotations</artifactId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>${hibernateVersion}</version>
        <exclusions>
            <exclusion>
                <groupId>org.hibernate</groupId>
                <artifactId>hibernate-commons-annotations</artifactId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-c3p0</artifactId>
        <version>${hibernateVersion}</version>
    </dependency>

    <!-- ~ le ehcache ~ -->
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-ehcache</artifactId>
        <version>${hibernateVersion}</version>
    </dependency>

    <dependency>
        <groupId>postgresql</groupId>
        <artifactId>postgresql</artifactId>
        <version>9.1-901.jdbc4</version>
    </dependency>

    <!-- ~ le cglib ~ -->
    <dependency>
        <groupId>cglib</groupId>
        <artifactId>cglib</artifactId>
        <version>2.2.2</version>
    </dependency>

    <dependency>
        <groupId>org.hibernate.javax.persistence</groupId>
        <artifactId>hibernate-jpa-2.0-api</artifactId>
        <version>1.0.1.Final</version>
    </dependency>

    <dependency>
        <groupId>com.google.inject</groupId>
        <artifactId>guice</artifactId>
        <version>${guiceVersion}</version>
    </dependency>
    <dependency>
        <groupId>com.google.inject.extensions</groupId>
        <artifactId>guice-persist</artifactId>
        <version>${guiceVersion}</version>
    </dependency>

    <dependency>
        <groupId>org.apache.bval</groupId>
        <artifactId>bval-core</artifactId>
        <version>${bval.version}</version>
    </dependency>
    <dependency>
        <groupId>org.apache.bval</groupId>
        <artifactId>bval-jsr303</artifactId>
        <version>${bval.version}</version>
    </dependency>

    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.10</version>
        <scope>test</scope>
    </dependency>
</dependencies> 
```

我的persistence.xml是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
<persistence-unit name="scuv" transaction-type="RESOURCE_LOCAL">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <class>br.com.digitaldoc.scuv.model.Produto</class>
    <class>br.com.digitaldoc.scuv.model.Cliente</class>
    <exclude-unlisted-classes>false</exclude-unlisted-classes>
    <!-- Validation modes: AUTO, CALLBACK, NONE -->
    <validation-mode>AUTO</validation-mode>
    <properties>
      <property name="hibernate.connection.driver_class" value="org.postgresql.Driver"/>
      <property name="hibernate.id.new_generator_mappings" value="true"/>
      <property name="javax.persistence.jdbc.url" value="jdbc:postgresql://127.0.0.1:5432/SCUV"/>
      <property name="javax.persistence.jdbc.user" value="postgres"/>
      <property name="javax.persistence.jdbc.password" value="postgre"/>
      <property name="hibernate.dialect" value="org.hibernate.dialect.PostgreSQLDialect"/>
      <property name="hibernate.hbm2ddl.auto" value="update"/>
      <!-- ehcache second level cache config -->
      <property name="hibernate.cache.provider_class" value="net.sf.ehcache.hibernate.SingletonEhCacheProvider"/>
      <property name="hibernate.cache.use_query_cache" value="true"/>
      <property name="hibernate.cache.use_second_level_cache" value="true"/>
      <property name="hibernate.generate_statistics" value="true"/>
      <property name="net.sf.ehcache.configurationResourceName" value="META-INF/ehcache.xml"/>
      <!-- c3p0 connection pool config -->
      <property name="hibernate.connection.provider_class" value="org.hibernate.connection.C3P0ConnectionProvider"/>
     <property name="c3p0.acquire_increment" value="1"/>
      <property name="c3p0.idle_test_period" value="100"/>
      <!-- seconds -->
      <property name="c3p0.max_size" value="100"/>
      <property name="c3p0.max_statements" value="0"/>
      <property name="c3p0.min_size" value="10"/>
      <property name="c3p0.timeout" value="100"/>
    </properties>
  </persistence-unit>
</persistence> 
```

我用 Guice 注入我的 EntityManager ......我做错了吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T01:07:07.233

我只是用 EclipseLink 替换休眠。不是它工作正常。

# visual-studio - 如何在 Visual Studio 的 AnkhSVN 中设置用户名/密码以连接到 Subversion 存储库？

> ID：10358297
> 
> 赞同：5
> 
> 时间：2012-04-27T21:49:11.837
> 
> 标签：visual-studio, svn, authentication, passwords, ankhsvn

我刚刚安装了 AnkhSVN。我正在使用 Visual Studio 2010。

我通过 SSL 访问的服务器上有一个现有的 Subversion 存储库（例如：）`https://svn.myserver.com/myrepository`。

在 Visual Studio 中，我在工具/选项菜单中将源代码控制设置为“AnkhSVN - Visual Studio 的 Subversion 支持”。

在“添加到 Subversion”对话框中，当我尝试在存储库中添加我的解决方案时，我`https://svn.myserver.com/myrepository`在“存储库 URL”字段中输入。然后，`https://svn.myserver.com`出现在“Subversion Repositories”下。当我选择它时，“创建文件夹...”按钮保持禁用状态，当我单击确定时，我收到消息：

> 请选择要添加到存储库中的有效位置。

我想添加我的解决方案，`https://svn.myserver.com/myrepository/myfolder`但似乎不可能。

我错过了什么？

另外：在存储库资源管理器中，我添加了 url `https://svn.myserver.com/myrepository`，但没有任何反应。我无法浏览该存储库。看起来我无法连接到服务器。

我想知道为什么没有弹出窗口要求我进行身份验证。

有人知道在哪里设置用户名/密码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T10:02:17.330

解决方案：

*   你可以去工具 - 选项 - 源代码管理 - 颠覆环境 - 身份验证缓存清除缓存的用户名/密码

或者

*   认证数据保存到以下目录

%APPDATA%\Subversion\auth\svn.ssl.server %APPDATA%\Subversion\auth\svn.simple

删除这些文件夹中的所有文件将解决问题。删除这些文件后，AnkhSVN 将再次提示您输入用户名和密码。

或者

*   从文件系统右键->tortoise->settings->saved data->Authentication Data-Clear。

参考：

[http://www.nerdpad.com/how-to/clearing-ankhsvn-saved-username-password-authentication-data](http://www.nerdpad.com/how-to/clearing-ankhsvn-saved-username-password-authentication-data)

[如何在 Visual Studio 2010 的 AnkhSVN 中更改 SVN 身份验证详细信息？](https://stackoverflow.com/questions/4313747/how-to-change-svn-authentication-details-in-ankhsvn-in-visual-studio-2010)

[TortoiseSVN 不要求身份验证？](https://stackoverflow.com/questions/664761/tortoisesvn-not-asking-for-authentication)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T22:30:33.230

尝试将解决方案 foldwr 添加到存储库（使用整个解决方案）。在那里您将设置用户名和密码。打开 Visual Studio 时，ankhsvn 应自动管理它（无需凭据）。

# php - 尝试在按文件名排序输出时回显多个文本文件的内容 - PHP

> ID：10358298
> 
> 赞同：1
> 
> 时间：2012-04-27T21:49:13.843
> 
> 标签：php, sorting, file-get-contents, opendir, readdir

我不是开发人员，但我是现在工作的默认开发人员。:) 在过去的几周里，我在这里和其他网站上找到了很多我的答案，但是这个最新的问题让我难以置信。我知道这是一个简单的答案，但我没有向 Google 提出正确的问题。

首先...我必须使用文本文件，因为我无权访问数据库（我工作的地方被锁定得很紧）。

无论如何，我需要查看存储在那里的文本文件的目录，打开每个文件并显示少量文本，同时确保我显示的文本按文件名排序。

我很接近，我知道......我终于设法弄清楚了排序，并且我知道如何读入目录并显示文件的内容，但我有时间合并这两个概念一起。

谁能提供一点帮助？使用现在的脚本，我可以毫无问题地回显排序的文件名。我认为会读取文件内容然后显示它的代码行只是回显换行符，而不是文件的内容。这是我到目前为止得到的代码——它只是测试代码，所以我可以让功能正常工作。

```
<?php
$dirFiles = array();
if ($handle = opendir('./event-titles')) {
    while (false !== ($file = readdir($handle))) {
        if ($file != "." && $file != "..") {
            $dirFiles[] = $file;
        }
    }
    closedir($handle);
}
sort($dirFiles);
foreach($dirFiles as $file)
{
    $fileContents = file_get_contents($file);//////// This is what's not working
    echo $file."<br>".$fileContents."<br/><br/>";
}
?> 
```

帮助？:)

戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:58:13.380

`$files = scandir('./event-titles')`将按文件名排序的顺序返回一个文件名数组。然后你可以做

```
foreach($files as $file)
{
    $fileContents = file_get_contents('./event-titles/'.$file);
    echo $file."<br/>".$fileContents."<br/><br/>";
} 
```

请注意，我在 file_get_contents 调用中使用目录名，因为文件名本身会导致 file_get_contents 在当前目录中查找，而不是您在 scandir 中指定的目录。

# php - preg_match 字符串中的数组项？

> ID：10358300
> 
> 赞同：3
> 
> 时间：2012-04-27T21:49:15.033
> 
> 标签：php, algorithm, preg-match, string-parsing

可以说我有一系列不好的词：

```
$badwords = array("one", "two", "three"); 
```

和随机字符串：

```
$string = "some variable text"; 
```

如何创建此循环：

```
if (one or more items from the $badwords array is found in $string)
echo "sorry bad word found";
else
echo "string contains no bad words"; 
```

示例：
如果`$string = "one fine day" or "one fine day two of us did something"`，用户应该看到“抱歉找到错误的单词”消息。
如果`$string = "fine day"`，用户应该看到字符串不包含坏词消息。

据我所知，你不能`preg_match`从数组中。有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T22:15:24.823

这个怎么样：

```
$badWords = array('one', 'two', 'three');
$stringToCheck = 'some stringy thing';
// $stringToCheck = 'one stringy thing';

$noBadWordsFound = true;
foreach ($badWords as $badWord) {
  if (preg_match("/\b$badWord\b/", $stringToCheck)) {
    $noBadWordsFound = false;
    break;
  }
}
if ($noBadWordsFound) { ... } else { ... } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-27T22:18:43.710

为什么要在`preg_match()`这里使用？
那这个呢：

```
foreach($badwords as $badword)
{
  if (strpos($string, $badword) !== false)
    echo "sorry bad word found";
  else
    echo "string contains no bad words";
} 
```

如果`preg_match()`出于某些原因需要，您可以动态生成正则表达式模式。像这样的东西：

```
$pattern = '/(' . implode('|', $badwords) . ')/'; // $pattern = /(one|two|three)/
$result = preg_match($pattern, $string); 
```

高温高压

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T22:16:02.187

如果你想通过将字符串分解成单词来检查每个单词，你可以使用这个：

```
$badwordsfound = count(array_filter(
    explode(" ",$string),
    function ($element) use ($badwords) {
        if(in_array($element,$badwords)) 
            return true; 
        }
    })) > 0;

if($badwordsfound){
   echo "Bad words found";
}else{
   echo "String clean";
} 
```

现在，我想到了更好的事情，如何替换数组中的所有坏词并检查字符串是否保持不变？

```
$badwords_replace = array_fill(0,count($badwords),"");
$string_clean = str_replace($badwords,$badwords_replace,$string);
if($string_clean == $string) {
    echo "no bad words found";
}else{
    echo "bad words found";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T22:18:09.607

这是我使用的坏词过滤器，效果很好：

```
private static $bad_name = array("word1", "word2", "word3");

// This will check for exact words only. so "ass" will be found and flagged 
// but not "classic"

$badFound = preg_match("/\b(" . implode(self::$bad_name,"|") . ")\b/i", $name_in); 
```

然后我有另一个变量与选择字符串匹配：

```
// This will match "ass" as well as "classic" and flag it

private static $forbidden_name = array("word1", "word2", "word3");

$forbiddenFound = preg_match("/(" . implode(self::$forbidden_name,"|") . ")/i", $name_in); 
```

然后我运行`if`它：

```
if ($badFound) {
   return FALSE;
} elseif ($forbiddenFound) {
   return FALSE;
} else {
   return TRUE;
} 
```

希望这可以帮助。问你是否需要我澄清任何事情。

# android - Android中的SQLite查询行问题

> ID：10358301
> 
> 赞同：1
> 
> 时间：2012-04-27T21:49:22.303
> 
> 标签：android, sqlite, cursor, relational-database

我在使用 Android 中的光标获取特定行时遇到问题。这是我的设置。我在一张表中有多行（~38000）（地理位置），另一张表中有大约 300 行（可用性）。

地理位置如下所示：_ID LATSTART LONSTART LATEND LONEND 可用性如下所示：ID MONTH_START MONTH_END DAY_START DAY_END PROHIBITTED_START PROHIBITTED_END PAID_START PAID_END

地理位置存储开始和结束地理点，可用性存储时间范围它们具有一对多的关系

该程序根据线的位置和时间绘制不同颜色的线我的问题是我正在运行三个不同的查询（禁止、免费、付费），但每个查询都是重叠的。

这是我对禁止行的查询

```
 prohibQuery = "SELECT * " + 
                      "FROM " +
                           "AVAILABILITY AS A JOIN (      SELECT * " +
                            "FROM GEOLOCATION " +
                            "WHERE ABS(LATSTART - (?) + LONSTART - (?)) < 2.3E-4 " +
                       "OR ABS(LATEND - (?) + LONEND - (?)) < 2.3E-4) AS G ON A.GEO_ID = G._ID " +
                      "WHERE (?) BETWEEN A.MONTH_START AND A.MONTH_END AND (?) BETWEEN A.DAY_START AND A.DAY_END " +
                        "AND A.PROHIB_START <= (?) AND A.PROHIB_END > (?) "; 
```

这是我的“自由”行代码，问题是我将在同一个确切的位置有两条线，颜色重叠，所以它不会是绿色或红色，它将是任何组合（不是艺术家）。

```
 Cursor mCursor = sqliteDb
            .rawQuery(
                    "SELECT * "
                            + "FROM GEOLOCATION, " +
                            prohibQuery +
                            "AS PROHIB "
                            + "JOIN AVAILABILITY ON GEOLOCATION._ID=AVAILABILITY.GEO_ID "
                            + "WHERE "
                            + "((abs(LATSTART - (?)) + abs(LONSTART - (?))<2.3E-3) OR (abs(LATEND - (?)) + abs(LONEND - (?))<2.3E-3)) AND "
                            + "((?) BETWEEN MONTH_START AND MONTH_END) AND ((?) BETWEEN DAY_START AND DAY_END) AND "
                            + "((?)<PROHIB_START OR PROHIB_END<=(?)) GROUP BY GEO_ID "
                            + "AND GEOLOCATION._ID <> PROHIB.ID" 
```

顺便说一句，我没有包括的变量，它们只是当前值（即：位置、月份、日期、小时） 这里有一些行示例。

这些行在 GEOLOCATION._ID=AVAILABILITY.GEO_ID 上相关。

```
_ID     NAME    LATSTART      LONSTART      LATEND        LONEND
2691    Alpine  45.477741   -73.655335  45.4763953  -73.6522115
2692    Alpine  45.4748043  -73.6486557 45.4762943  -73.652106
2693    Alpine  45.4744849  -73.6478719 45.4748043  -73.6486557
2694    Alpine  45.4741615  -73.6471631 45.4744849  -73.6478719
2695    Alpine  45.4738386  -73.6464376 45.4741615  -73.6471631
2696    Alpine  45.4743872  -73.6459077 45.4738386  -73.6464376
2697    Alpine  45.4743945  -73.645721  45.4743872  -73.6459077
2698    Alpine  45.4738146  -73.6444395 45.4743945  -73.645721

ID       START   END    START END PROHIBSTART END PAIDSTART END GEO_ID
-38146  0   11  1   7   3   6   0   0   2691
-38155  0   11  1   7   9   17  0   0   2691
-38147  0   11  1   7   3   6   0   0   2692
-38148  0   11  1   7   3   6   0   0   2693
-38149  0   11  1   7   3   6   0   0   2694
-38150  0   11  1   7   3   6   0   0   2695
-38151  0   11  1   7   3   6   0   0   2696
-38156  0   11  1   7   0   24  0   0   2697
-38153  0   11  1   7   0   24  0   0   2698
-38154  0   11  1   7   0   24  0   0   2699 
```

# javascript - 使用 Javascript 在 MongoDB 中使用希腊字符执行查询不返回任何结果

> ID：10358302
> 
> 赞同：1
> 
> 时间：2012-04-27T21:49:24.920
> 
> 标签：javascript, mongodb, utf-8, angularjs

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T22:12:23.250

从外壳为我工作（我复制了您的示例文档以插入，然后从查询中复制名称），因此至少您没有遇到 utf-8 字符看起来相同但略有不同的问题之一：

```
> db.test.insert({ "name": "Νίκος", "value": 1.35});
> db.test.find({name: "Νίκος"});
{ "_id" : ObjectId("4f9b1642c26c79dac82740c5"), "name" : "Νίκος", "value" : 1.35 } 
```

仔细检查 js 文件的文件编码？虽然，我确信在您的真实程序中，您的搜索值来自通过 GET 或 POST 的 URL 编码形式，因此 js 文件的编码无关紧要。

您可以尝试`accept-charset="utf-8"`在表单中进行设置。如果它是 AJAX 或通过 JS 通过角度绑定发布，请确保在发送之前设置字符编码。像这样的东西？[http://groups.google.com/group/angular/browse_thread/thread/e6701e749d4bc8ed](http://groups.google.com/group/angular/browse_thread/thread/e6701e749d4bc8ed)

# php - PHP 检查字符串是否有 2 个数字、8 个字符和 1 个大写字母

> ID：10358305
> 
> 赞同：0
> 
> 时间：2012-04-27T21:49:43.137
> 
> 标签：php, regex, character, uppercase, digits

我发现了很多 php 正则表达式和其他选项来确定字符串长度，以及它是否包含一个字母或一个数字，但是我如何确定一个字符串中是否有 2 个数字？

我正在尝试验证一个密码

*   必须正好有 8 个字符

*   其中一个必须是大写字母

*   其中 2 个必须是数字

是否有一个单行正则表达式解决方案？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T21:54:03.273

```
if (preg_match(
    '/^            # Start of string
    (?=.*\p{Lu})   # at least one uppercase letter
    (?=.*\d.*\d)   # at least two digits
    .{8}           # exactly 8 characters
    $              # End of string
    /xu',     
    $subject)) {
    # Successful match 
```

`(?=...)`是一个[前瞻断言](http://www.regular-expressions.info/lookaround.html)。它检查是否可以在当前位置匹配某个正则表达式，但实际上并不消耗字符串的任何部分，因此您可以将其中的几个放在一行中。

# css - IE8 的多背景 CSS3 问题

> ID：10358306
> 
> 赞同：0
> 
> 时间：2012-04-27T21:49:43.753
> 
> 标签：css, internet-explorer-8

我对 IE8 中的这些行有更多问题：

```
 background: url('../images/sabao_x_top.gif') repeat-x top left,
        url('../images/sabao_x_foot.gif') repeat-x bottom left; 
```

我用：

```
-pie-background: url('../images/sabao_x_top.gif') repeat-x top left, url('../images/sabao_x_foot.gif') repeat-x bottom left;
    behavior: url(../PIE.htc); 
```

馅饼，没什么。

```
<!--[if lt IE 8]>
<script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE8.js"></script>
<![endif]--> 
```

没什么。

现在？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T22:52:26.283

您将该脚本发送到 ie 小于 ie8 的所有版本；将您的条件注释更改为 <!--[if lt IE 9]> 或 <!--[if ie 8]>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T12:27:27.323

您还可以使用 IE8 加上 IE7 和 IE6

```
<!--[if lte IE 8]>
<script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE8.js"></script>
<![endif]--> 
```

这意味着如果条件小于或等于 IE8，则条件将起作用

# java - 用于定义类似于 XQuery 或 SQL 语句的规则和操作的 UI

> ID：10358307
> 
> 赞同：0
> 
> 时间：2012-04-27T21:49:46.743
> 
> 标签：java, sql, xml, user-interface, xquery

我正在尝试设计一个 UI，它允许我的应用程序的用户定义要在存储的 XML 数据上运行的规则。规则可以类似于“如果程序名称为“abc”，则将其更改为“xyz””。它还应该支持复杂的规则，例如“对于 program_group 下的所有程序，将名称更改为“abc”” - 其中 program 和 program_name 是我的 XML 元素，因此一个 program_group 有很多程序（我正在简化 XML ..实际上它有很多更多元素，属性等）现在这最自然地表示为 XQUERY，对于 $i /prgram_group/program_name do 或通过 SQL，更新表程序集名称 = ..... 但是我想提出一种更自然的指定方式这些规则适用于非 IT 人员。我正在考虑让 UI 看起来像，条件 - 那么，但我很快意识到我正在创建一个易于使用的 XQUERY 或 SQL 接口。我的问题是-有一些标准的方法吗？一些现有的 Java 库或 GWT 或 JavaScript 库。抱歉，我确实意识到这个问题非常广泛，但希望能得到一些建议。谢谢，-v-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T23:40:03.030

我会说没有标准的方式来做你描述的事情（尽管你描述的内容很广泛）。可悲的是，描述 XQuery 应用程序开发中的最佳实践的资源很少（与语言本身的基本资源相反）。一些关于应用程序开发的文章包括：

[XQuery 维基书](http://en.wikibooks.org/wiki/XQuery)

[XRX 维基书](http://en.wikibooks.org/wiki/XRX)

[XRX 初学者指南](http://www.danmccreary.com/xrx/beginners-guide/)

Jim Fuller，[使用 XQuery 制作仪表板 使用基于 Web 的仪表板呈现业务数据](http://www.ibm.com/developerworks/xml/library/x-xqdashboard/)

我希望这些资源有所帮助。

# c - C Multiple Strtok 确定分隔符

> ID：10358309
> 
> 赞同：-1
> 
> 时间：2012-04-27T21:49:47.443
> 
> 标签：c, strtok

我正在编写一个 C 程序，用户可以输入一串 1-3 位数字，后跟反斜杠，然后再输入 1-3 位数字，或者他们可以输入 1-3 位数字，后跟逗号，然后再输入 1-3 位数字他们可以迭代多少次没有限制。

我需要确定输入分隔符是反斜杠还是逗号（以确定如何处理数字）并将数字放入数组中。

我正在考虑这样做的方式是使用 strtok 如下。字符串作为 char *token 输入。

```
op_tok1 = strtok(token, "\\");
if(op_tok1 != NULL)
{
        /* Process numbers */
        return;
}

op_tok2 = strtok(token, ",");
if(op_tok2 != NULL)
{
    /* Process other numbers */
    return;
} 
```

这适用于以反斜杠分隔的任何内容，但不适用于逗号。我相信这是因为 strtok 与 token 变量混淆了。这是真的？有没有更好的方法来解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T21:56:48.883

当然，我会考虑更好的方法。如果您可以相当好地依赖输入的格式（即，实际上是三位数字后跟一个允许的分隔符），您可以执行以下操作：

```
char *pos = 0;

while (2 == sscanf(input+pos, "%d%c", &number, &delimiter)) {
    if ('\\' == delimiter)
        process_backslash(number);
    else if (',' == delimiter)
        process_comma(number);
    else
        error_invalid_delimiter(delimiter);
    pos += 4;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T00:01:41.040

其他人已经发布了更好的解决方案 - strtok 并不真正适合这项任务。然而，回答第一个问题 - 是 strtok 改变底层字符串，是的（在我看来它是如何工作的很邪恶。许多年轻球员都陷入了这个陷阱）：

`strtok`将 token 替换为`\0`(Null terminator) 并传递字符串的开头。后续调用`strtok(NULL, <token>)`继续扫描字符串，寻找下一个标记，不需要相同。

因此你可以这样做：

```
op_tok1 = strtok(token, "\\");
if(op_tok1 != NULL)
{
    /* Process numbers */
    return;
}

op_tok2 = strtok(NULL, ",");
if(op_tok2 != NULL)
{
   /* Process other numbers */
   return;
} 
```

还要注意它**不是线程安全**的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T00:59:08.000

为什么不直接使用`scanf()`？

```
~/tmp$ cat test.c
#include <stdio.h>
int main(int argc, char ** argv) {
    int i;
    char c;
    while (2 == scanf("%d%[\\.]",&i,&c)) {
        printf("Int %d\nChar %c\n", i, c);
    }
} 
```

...为我工作。

```
~/tmp$ gcc test.c && echo "123.456\789.4" | ./a.out
Int 123
Char .
Int 456
Char \
Int 789
Char .
~/tmp$ 
```

# php - 如何搜索多个 mySQL 表以查找特定行？

> ID：10358313
> 
> 赞同：3
> 
> 时间：2012-04-27T21:50:16.037
> 
> 标签：php, mysql

我有三个表：适配器、连接器、组件
我需要能够搜索它们以找到相应的零件编号 (part_num)
零件编号是唯一的，因此我不必担心多个条目。

我使用 GET 在 URL 中查找部件号，将其设置为 $num，然后执行 SELECT

我发现我应该使用 UNION，但是这三个表有不同的列，并且在尝试进行选择时它给了我一个错误。在下面的例子中

[使用 UNION 从其他表中查找引用](https://stackoverflow.com/questions/558283/how-do-i-find-all-references-from-other-tables-to-a-specific-row)

这是我的代码：

```
if(isset($_GET['num'])) {
$num = $_GET['num'];

$result = mysql_query("SELECT * FROM connectors WHERE part_num = '$num' UNION SELECT * FROM adapters WHERE part_num = '$num' UNION SELECT * FROM components WHERE part_num = '$num'"); } 
```

任何帮助将不胜感激，所以提前感谢 SO =)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T21:58:11.820

您可能应该有第四个表，用于标识每个表已分配`Parts`到哪种类型的表。`part_num`但是，没有它，您仍然可以通过外部连接获得您想要的东西（虽然很浪费）：

```
SELECT * FROM
             connectors
   LEFT JOIN adapters   USING(part_num)
   LEFT JOIN components USING(part_num)
WHERE
   part_num = ? 
```

请注意，我已经使用`?`了，因为您**确实**应该使用准备好的语句：如果您不知道原因或它们是什么，请阅读[Bobby Tables](http://bobby-tables.com)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T22:09:40.077

不取所有列，而只取标题等怎么样？

```
$sSql = "SELECT id, title, 1 FROM connectors WHERE part_num = '$num' 
UNION 
SELECT id, title, 2 FROM adapters WHERE part_num = '$num' 
UNION 
SELECT id, title, 3 FROM components WHERE part_num = '$num'"; 
```

您必须将它应用于您的表字段，但使用此逻辑您将有一个数组，在第三列（在我的示例中），您可以知道它是否是连接器、适配器或组件，然后生成正确的链接或执行其他操作有了这个数据。

另一种方法是进行多查询，这将通过一个数据库请求返回多个结果。有一些使用它的方法 - 使用 mysqli (http://lt.php.net/manual/en/mysqli.multi-query.php) 或一些 Adodb 或 PDO 库。

希望它会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T21:56:32.713

要使用 UNION，3 个记录集的列数*必须*相同，因此您必须从每个表中指定所需的列数。从那里，您将获得一个包含 3 个查询中每个查询的数据的结果集。

# jqgrid - jqGrid 有 CDN 吗？

> ID：10358316
> 
> 赞同：11
> 
> 时间：2012-04-27T21:50:41.730
> 
> 标签：jqgrid, cdn

[有人知道jqGrid](http://www.trirand.com/blog/)是否有 CDN吗？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-10T07:49:30.863

这是[JQgrid 的 CDN](http://www.jsdelivr.com/#!jqgrid)；不过，不是最低版本。

[http://www.jsdelivr.com/#!jqgrid](http://www.jsdelivr.com/#!jqgrid)

进入网站后，单击“集成”按钮，它将为您提供使用 CDN 所需的 JS 代码片段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T21:54:35.003

没有找到，抱歉。

您可以在这里查看：[在 CDN 上托管 Javascript/CSS 文件，类似于 Google 托管 jQuery](https://stackoverflow.com/questions/1470981/hosting-javascript-css-file-on-cdn-similar-to-google-hosting-jquery)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-01T19:45:32.080

[您可以尝试向http://www.jsdelivr.com](http://www.jsdelivr.com)提交请求

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T14:15:24.300

您可以随时链接到 GitHub 上 Master 分支上的原始文件：

CSS：[https ://raw.github.com/tonytomov/jqGrid/master/css/ui.jqgrid.css](https://raw.github.com/tonytomov/jqGrid/master/css/ui.jqgrid.css)

JS：[https ://github.com/tonytomov/jqGrid/tree/master/js](https://github.com/tonytomov/jqGrid/tree/master/js)

CSS 是一个明显的胜利，但 JS 需要包含每个单独的模块。这可能会削弱将包含采购到外部站点的好处。

[更新]

我不提倡在开发之外的任何地方这样做。从长远来看，我认为像 Grunt/Bower 这样的工具将使 CDN 变得不那么重要——除非你有多页应用程序。

# sql - 多表 SQL 查询 - IN OPERATOR

> ID：10358317
> 
> 赞同：1
> 
> 时间：2012-04-27T21:50:41.817
> 
> 标签：sql

我有 2 个表，我必须使用 IN 运算符进行查询才能得出答案。我在 Oracle 中收到无效字符响应。谢谢你的帮助！

问题 - 查找作者编号为 18 的每本书的书名。在查询中使用 IN 运算符。

到目前为止我似乎有什么：

```
SELECT TITLE

FROM BOOK

WHERE AUTHOR_NUM IN

{SELECT AUTHOR_NUM

FROM WROTE

WHERE AUTHOR_NUM = '18'}; 
```

TITLE 列在 BOOK 表中，AUTHOR_NUM 列在 WROTE 表中。抱歉，如果我遗漏了任何信息，任何指向正确方向的人将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T22:03:40.710

为什么要引用18？它可能是一个整数列。而且由于您只是按作者编号，我认为您真的想要：

```
SELECT TITLE FROM BOOK WHERE AUTHOR_NUM IN (18) 
```

这似乎是满足问题要求的最简单方法。

# sql - Oracle SQL - 在 where 子句中实现 MAX 功能？

> ID：10358318
> 
> 赞同：4
> 
> 时间：2012-04-27T21:50:42.370
> 
> 标签：sql, oracle

两张表：

```
ItemComment(ItemId, ItemComment, DateCommentPosted)
Item (ItemId, ItemName, ItemPrice) 
```

我需要自过去 6 个月以来未收到任何评论的商品的商品名称和价格。

我知道这行不通：

```
SELECT i.itemid, i.name, i.price 
  FROM Item i, ItemComment c
 WHERE i.itemid = c.itemid 
   AND Max(c.dateCommentPosted) < (add_months(SYSDATE,-6)); 
```

StackOverflow 上有类似问题的答案，但 Oracle 不喜欢它。任何特定于 Oracle 的东西？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T23:07:29.463

使用首选的显式 JOIN 表示法以及 GROUP BY 和 HAVING 子句，您应该能够使用：

```
SELECT i.itemid, i.name, i.price 
  FROM Item i
  JOIN ItemComment c ON i.itemid = c.itemid
 GROUP BY i.itemid, i.name, i.price
HAVING MAX(c.dateCommentPosted) < (ADD_MONTHS(SYSDATE, -6)); 
```

您还可以使用 WITH 子句或直接在 FROM 列表中编写子查询，以计算为每个项目发布评论的最近日期，然后将其与 Item 表连接。

您可能需要考虑是否应选择没有任何注释的项目。

> 如果我也想显示/选择怎么办`Max(c.dateCommentPosted)`。这是一个选择吗？如果我在 select 子句中添加它并`dateCommentPosted`在 GROUP BY 子句中添加，那是否正确？

将其添加到 select 子句，但不是 GROUP BY 子句：

```
SELECT i.itemid, i.name, i.price, MAX(c.dateCommentPosted) AS dateCommentPosted
  FROM Item i
  JOIN ItemComment c ON i.itemid = c.itemid
 GROUP BY i.itemid, i.name, i.price
HAVING MAX(c.dateCommentPosted) < (ADD_MONTHS(SYSDATE, -6)); 
```

您可能更愿意将 AS 排除在外。AFAIK，Oracle 绝对拒绝表别名中的 AS（所以我把它留在那里），但它在选择列表的“列别名”中接受（但不需要）它。

Incidentally, the SQL Standard, and therefore 'all' SQL DBMS, require aggregate comparisons in the HAVING clause, and the HAVING clause requires a GROUP BY clause. Hence, GBH — Group By / Having as well as Grievous Bodily Harm.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T22:21:13.620

这是另一种方法的示例：

```
with cte as (
  select i.itemid,
    max(DateCommentPosted) as LastCommentDate
  from Item i left join ItemComment c on c.itemid = i.itemid
  group by i.itemid
)
select i.itemid, i.ItemName, i.ItemPrice 
from Item i join cte c on c.itemid = i.itemid
where LastCommentDate is null or LastCommentDate < add_months(SYSDATE,-6) 
```

[在此处](http://sqlfiddle.com/#!4/62147/2)查看 sqlfiddle 的实际操作。您还可以通过这种方式轻松返回每个项目的最后评论日期。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T21:57:00.973

试试这个：

```
select i.itemid, i.name, i.price
  from Item i 
 where not exists (
     select 1
       from ItemComment c
      where c.dateCommentPosted between (SYSDATE - 180) and SYSDATE
        and c.itemid = i.itemid
 ) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T21:57:53.727

也许它不是此特定查询的最佳解决方案，但根据实际问题标题，您正在寻找的是`HAVING`语句，它允许您将聚合放入`WHERE`子句

[http://psoug.org/reference/group_by.html](http://psoug.org/reference/group_by.html)

# wcf - WCF - 如何按所有客户端到达的顺序执行操作？

> ID：10358320
> 
> 赞同：1
> 
> 时间：2012-04-27T21:51:08.573
> 
> 标签：wcf, operator-precedence

我有一个将为多个客户端提供服务的 WCF 服务。它们将具有“接受建议匹配”或“拒绝建议匹配”等操作。我希望所有操作都串行运行，但我担心这会对性能产生影响。

据我所见 - 默认（也是最常用的）实例是“每次调用”，默认并发模式是单一的。

那么我是否需要在并发中使用“单”模式？它的影响有多严重？

（我估计最多有几十个客户使用该系统）。

有什么方法可以享受两个世界吗？

使用并行计算（服务与数据库通信）并且仍然串行执行操作？

在这篇[文章](http://www.codeproject.com/Articles/89858/WCF-Concurrency-Single-Multiple-and-Reentrant-and)中，我读到了“实例模式 = 每次调用和并发 = 单一”：

*   对于每个客户端实例，将分配一个线程。
*   对于每个方法调用，都会创建一个新的服务实例。
*   单个线程将用于为从单个客户端实例生成的所有 WCF 实例提供服务。

对我来说，这似乎并不能保证操作调用将连续执行！

例如，如果发生这种情况：

1.  客户 ALPHA 调用“操作 A”
2.  客户 ALPHA 调用“操作 B”
3.  客户端测试版调用“操作 C”

从我读到的 - 它说'单个线程将用于服务从**单个客户端实例生成的所有 WCF 实例**'。在我看来，这意味着 CALL 1 和 CALL 2 将连续执行，但 CALL 3 可能在它们之间执行，因为它来自不同的客户端线程。

这是真的 ？有没有办法确保呼叫按到达的顺序处理？

有人可以告诉我这是否是一种不好的做法，或者是否存在接受并建议在 WCF 中使用这种通信方法的现实世界场景。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T22:14:21.930

我认为有3种方法可以回答这个问题

1.  直接回答
2.  控制客户端和服务器的情况的另一种方法
3.  您不控制客户端的另一种方法

我想先给出答案 2 和 3（因为我认为它们更好），但最后我会直接给出答案……我保证！

我相信您的问题不在于您需要按服务接收消息的顺序处理消息，而是因为您有独立的客户，*您不能保证服务以与发送消息的顺序相同的顺序接收它们客户*。

考虑您的客户 ALPHA 和 BETA 示例。即使客户端 ALPHA 可能会在客户端 BETA 调用操作 C 之前发送请求以调用操作 2，但您无法知道服务将接收它们的顺序。这意味着即使您按照接收顺序在服务器上处理它们，这可能仍然是“错误”的顺序。

如果您同意这一点，请继续阅读。如果没有，请直接转到本文底部的直接答案；o)

**方法 1：使用 WS-Transactions**

如果您同时控制服务和客户端，并且客户端能够实现 WS-* SOAP 协议（​​例如 .Net WCF 客户端）。然后，您可以使用 WS-Transaction 协议来确保来自单个客户端的打算在单个长时间运行的事务中处理的操作肯定是以这种方式完成的。

有关如何使用 WCF 进行 WS-Transcation 的详细信息，请查看

[http://msdn.microsoft.com/en-us/library/ms752261.aspx](http://msdn.microsoft.com/en-us/library/ms752261.aspx)

以客户端 ALPHA 和 BETA 为例，这将使客户端 ALPHA 能够

*   开始交易
*   调用操作 1
*   调用操作 2
*   提交交易

ALPHA 在客户端启动事务的效果是将该事务流向服务器，以便它可以创建一个 DB 事务，以保证操作 1 和操作 2 一起完成或根本不完成。

如果客户端 BETA 在此过程中调用操作 3，它将被迫等待直到事务提交或中止。请注意，这可能会导致操作 3 超时，在这种情况下，BETA 需要处理该错误。

此行为适用于任何`InstanceContextMode`or `ConcurrencyMode`。

然而，缺点是这种长时间运行的分布式事务通常不利于可伸缩性。今天你有 10 多个客户，但未来会增长吗？客户端是否总是能够实现 WS-Transaction？如果是这样，那么这可能是一个好方法。

**方法 2：使用“乐观”类型的方法**

如果您需要支持许多不同的客户端类型（例如电话、浏览器等），那么您可以只允许操作以任何顺序发生，并确保服务和客户端逻辑可以处理故障。

这听起来可能很糟糕，但是

*   您可以在服务器端使用数据库事务（不是我上面提到的 WS-Transaction）来确保您的数据库始终保持一致
*   每个客户端都可以同步自己的调用，因此在您的示例中，ALPHA 会在调用 2 之前等待调用 1 完成 OK

这里的缺点是你需要仔细考虑你需要什么样的失败逻辑，并确保客户端和服务代码是健壮的并且行为适当。

在您的示例中，我提到 ALPHA 可以同步自己的调用，但是如果 BETA 在 ALPHA 调用操作 1 之后但在调用操作 2 之前调用操作 3，则可能是

1.  操作 2 将失败（例如，操作 3 删除了操作 2 尝试更新的记录）在这种情况下，您需要处理该失败。
2.  操作 3 将覆盖操作 3（例如，操作 3 更新一条记录，而操作 2 尝试更新同一条记录）。在这种情况下，您需要决定要做什么。您可以让操作 2 成功，在这种情况下，来自 BETA 的更新将丢失。或者您可以让操作 2 检测到记录在被 ALPHA 读取后发生了更改，然后失败，或者可能通知用户并让他们决定是否要覆盖更改。

有关 MS Entity Framework 上下文中对此的讨论，请参见

[http://msdn.microsoft.com/en-us/library/bb738618.aspx](http://msdn.microsoft.com/en-us/library/bb738618.aspx)

有关它的一般讨论，请参阅

[http://en.wikipedia.org/wiki/Optimistic_concurrency_control](http://en.wikipedia.org/wiki/Optimistic_concurrency_control)

同样，在 WCF 术语中，这将适用于任何`ConcurrencyMode`和`InstanceContextMode`

在可扩展性很重要的情况下，这种方法是最常用的方法。它的缺点是用户体验可能很差（例如，他们可能会在不知道的情况下覆盖其更改）。

**直接回答原始问题**

如果您肯定需要确保消息是按顺序处理的，我认为您正在寻找`InstanceContextMode.Single`

[http://msdn.microsoft.com/en-us/library/system.servicemodel.instancecontextmode.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.instancecontextmode.aspx)

这意味着在服务应用程序的生命周期内创建服务类的单个实例。如果您也使用`ConcurrencyMode = Single`or`ConcurrencyMode = Reentrant`这意味着您的服务一次只会处理一条消息（因为您有一个实例并且它是单线程的）并且消息将按照接收到的顺序进行处理。

如果您使用`ConcurrencyMode = multiple`，那么您的单个服务实例将在不同线程上同时处理多条消息，因此无法保证处理顺序。

这对性能的影响有多严重取决于每个服务调用执行所需的时间。如果您每秒获得 10 个并且每个花费 0.1 秒，那就没问题了。如果您每秒获得 20 个并且每个通常需要 0.1 秒，那么您将看到平均时间增加了 100%。

# ajax - 在服务器事件上向客户端发送信息

> ID：10358325
> 
> 赞同：1
> 
> 时间：2012-04-27T21:51:27.183
> 
> 标签：ajax, client, send

我正在尝试将共享日历创建为 Web 应用程序。当有人在日历上添加事件时，我希望共享该日历的每个人也能看到该事件。当有人创建事件时，我制作了一个将数据发送到数据库的 ajax。有没有办法将事件从服务器发送到页面上在线并共享同一日历的其他客户端？我现在通过不断“刷新”数据库中的信息来做到这一点。如果有人知道如何做到这一点，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T22:05:31.367

希望网络服务器将信息“推送”回浏览器是一个由来已久的问题。处理这个问题的传统方法是让任何活跃的客户端（即人们仍然登录到您的应用程序并打开页面）定期“轮询”服务器以查看是否有任何新信息。在您的情况下，您可以让页面上的一些 JS 每 10 秒进行一次 AJAX 调用，以查看他们是否有任何应该注意的新日历事件。This does increase the overall tr​​affic to your web server so pick your polling time appropriately - otherwise you'll cripple your web server because it will spend all of its time handling these "is there anything new?" 大多数时候没有请求。

如果你想更前沿一点，你可以看看 HTML5 websockets。谷歌搜索“html5 websockets 教程”应该会给你很多资源。它们使用起来有点棘手，并且要求您运行支持它们的 Web 服务器（您可能是）。对于支持它的浏览器，您可以保持更长期的开放连接，然后您可以将数据从 Web 服务器推送回浏览器，并且您的 JS 将使用更新的信息捕获“onmessage”事件。将您指向 google 并不是试图摆脱更完整的答案，但是已经有许多优秀的教程在那里寻找 HTML websockets，您应该能够完成您想要做的事情。

# java - 尝试运行 Web 客户端时出现 Java 错误

> ID：10358333
> 
> 赞同：2
> 
> 时间：2012-04-27T21:52:37.940
> 
> 标签：java

我在尝试为我玩的游戏打开 Web 客户端时遇到了一些问题。我收到此错误，我不知道该怎么做。帮助将不胜感激。如果您需要更多信息，请告诉我，我会尽我所能得到它。

```
load: class client.class not found.
java.lang.ClassNotFoundException: client.class
    at sun.plugin2.applet.Applet2ClassLoader.findClass(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadCode(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager.createApplet(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Exception: java.lang.ClassNotFoundException: client.class 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T21:53:59.727

您似乎正在像这样运行您的网络客户端：

```
$ java client.class 
```

尝试运行它：

```
$ java client 
```

# java - Levenshtein 距离的并行实现会随着线程的增加而减慢

> ID：10358337
> 
> 赞同：2
> 
> 时间：2012-04-27T21:53:13.447
> 
> 标签：java, multithreading, parallel-processing

这是我为了好玩而写的 Levenshtein distance 的并行实现。我对结果感到失望。我在核心 i7 处理器上运行它，所以我有很多可用线程。但是，随着我增加线程数，性能会显着下降。我的意思是它实际上运行速度较慢，对于相同大小的输入有更多线程。

我希望有人可以看看我使用线程的方式和 java.util.concurrent 包，并告诉我是否做错了什么。我真的只对并行性无法按预期工作的原因感兴趣。我不希望读者看到这里发生的复杂索引。我相信我所做的计算是正确的。但即使不是，我认为随着线程池中线程数量的增加，我仍然应该看到接近线性的加速。

我已经包含了我使用的基准测试代码。我正在使用[此处](http://www.ellipticgroup.com/html/benchmarkingArticle.html)找到的库进行基准测试。第二个代码块是我用于基准测试的。

谢谢你的帮助 ：）。

```
import java.util.ArrayList;
import java.util.List;
import java.util.concurrent.*;

public class EditDistance {
    private static final int MIN_CHUNK_SIZE = 5;
    private final ExecutorService threadPool;
    private final int threadCount;
    private final String maxStr;
    private final String minStr;
    private final int maxLen;
    private final int minLen;

    public EditDistance(String s1, String s2, ExecutorService threadPool,
            int threadCount) {
        this.threadCount = threadCount;
        this.threadPool = threadPool;
        if (s1.length() < s2.length()) {
            minStr = s1;
            maxStr = s2;
        } else {
            minStr = s2;
            maxStr = s1;
        }
        maxLen = maxStr.length();
        minLen = minStr.length();
    }

    public int editDist() {
        int iterations = maxLen + minLen - 1;
        int[] prev = new int[0];
        int[] current = null;

        for (int i = 0; i < iterations; i++) {
            int currentLen;
            if (i < minLen) {
                currentLen = i + 1;
            } else if (i < maxLen) {
                currentLen = minLen;
            } else {
                currentLen = iterations - i;
            }

            current = new int[currentLen * 2 - 1];
            parallelize(prev, current, currentLen, i);
            prev = current;
        }
        return current[0];
    }

    private void parallelize(int[] prev, int[] current, int currentLen,
            int iteration) {
        int chunkSize = Math.max(current.length / threadCount, MIN_CHUNK_SIZE);
        List<Future<?>> futures = new ArrayList<Future<?>>(currentLen);
        for (int i = 0; i < currentLen; i += chunkSize) {
            int stopIdx = Math.min(currentLen, i + chunkSize);
            Runnable worker = new Worker(prev, current, currentLen, iteration,
                    i, stopIdx);
            futures.add(threadPool.submit(worker));
        }
        for (Future<?> future : futures) {
            try {
                Object result = future.get();
                if (result != null) {
                    throw new RuntimeException(result.toString());
                }
            } catch (InterruptedException e) {
                Thread.currentThread().interrupt();
            } catch (ExecutionException e) {
                // We can only finish the computation if we complete
                // all subproblems
                throw new RuntimeException(e);
            }
        }
    }

    private void doChunk(int[] prev, int[] current, int currentLen,
            int iteration, int startIdx, int stopIdx) {
        int mergeStartIdx = (iteration < minLen) ? 0 : 2;

        for (int i = startIdx; i < stopIdx; i++) {
            // Edit distance
            int x;
            int y;
            int leftIdx;
            int downIdx;
            int diagonalIdx;
            if (iteration < minLen) {
                x = i;
                y = currentLen - i - 1;
                leftIdx = i * 2 - 2;
                downIdx = i * 2;
                diagonalIdx = i * 2 - 1;
            } else {
                x = i + iteration - minLen + 1;
                y = minLen - i - 1;
                leftIdx = i * 2;
                downIdx = i * 2 + 2;
                diagonalIdx = i * 2 + 1;
            }
            int left = 1 + ((leftIdx < 0) ? iteration + 1 : prev[leftIdx]);
            int down = 1 + ((downIdx < prev.length) ? prev[downIdx]
                    : iteration + 1);
            int diagonal = penalty(x, y)
                    + ((diagonalIdx < 0 || diagonalIdx >= prev.length) ? iteration
                            : prev[diagonalIdx]);
            int dist = Math.min(left, Math.min(down, diagonal));
            current[i * 2] = dist;

            // Merge prev
            int mergeIdx = i * 2 + 1;
            if (mergeIdx < current.length) {
                current[mergeIdx] = prev[mergeStartIdx + i * 2];
            }
        }
    }

    private int penalty(int maxIdx, int minIdx) {
        return (maxStr.charAt(maxIdx) == minStr.charAt(minIdx)) ? 0 : 1;
    }

    private class Worker implements Runnable {
        private final int[] prev;
        private final int[] current;
        private final int currentLen;
        private final int iteration;
        private final int startIdx;
        private final int stopIdx;

        Worker(int[] prev, int[] current, int currentLen, int iteration,
                int startIdx, int stopIdx) {
            this.prev = prev;
            this.current = current;
            this.currentLen = currentLen;
            this.iteration = iteration;
            this.startIdx = startIdx;
            this.stopIdx = stopIdx;
        }

        @Override
        public void run() {
            doChunk(prev, current, currentLen, iteration, startIdx, stopIdx);
        }
    }

    public static void main(String args[]) {
        int threadCount = 4;
        ExecutorService threadPool = Executors.newFixedThreadPool(threadCount);
        EditDistance ed = new EditDistance("Saturday", "Sunday", threadPool,
                threadCount);
        System.out.println(ed.editDist());
        threadPool.shutdown();
    }
} 
```

EditDistance 内部有一个私有内部类 Worker。每个工作人员负责使用 EditDistance.doChunk 填充当前数组的范围。EditDistance.parallelize 负责创建这些工作人员，并等待他们完成任务。

我用于基准测试的代码：

```
import java.io.PrintStream;
import java.util.concurrent.*;
import org.apache.commons.lang3.RandomStringUtils;
import bb.util.Benchmark;

public class EditDistanceBenchmark {

    public static void main(String[] args) {
        if (args.length != 2) {
            System.out.println("Usage: <string length> <thread count>");
            System.exit(1);
        }
        PrintStream oldOut = System.out;
        System.setOut(System.err);

        int strLen = Integer.parseInt(args[0]);
        int threadCount = Integer.parseInt(args[1]);
        String s1 = RandomStringUtils.randomAlphabetic(strLen);
        String s2 = RandomStringUtils.randomAlphabetic(strLen);
        ExecutorService threadPool = Executors.newFixedThreadPool(threadCount);

        Benchmark b = new Benchmark(new Benchmarker(s1, s2, threadPool,threadCount));
        System.setOut(oldOut);

        System.out.println("threadCount: " + threadCount + 
                " string length: "+ strLen + "\n\n" + b);
        System.out.println("s1: " + s1 + "\ns2: " + s2);

        threadPool.shutdown();
    }

    private static class Benchmarker implements Runnable {
        private final String s1, s2;
        private final int threadCount;
        private final ExecutorService threadPool;

        private Benchmarker(String s1, String s2, ExecutorService threadPool, int threadCount) {
            this.s1 = s1;
            this.s2 = s2;
            this.threadPool = threadPool;
            this.threadCount = threadCount;
        }

        @Override
        public void run() {
            EditDistance d = new EditDistance(s1, s2, threadPool, threadCount);
            d.editDist();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T21:56:56.793

很容易意外地编写出并行性不佳的代码。一个主要的罪魁祸首是当您的线程竞争底层系统资源（例如缓存线）时。由于该算法本质上作用于物理内存中彼此接近的事物，我强烈怀疑这可能是罪魁祸首。

我建议您查看这篇关于虚假共享的优秀文章

[http://www.drdobbs.com/go-parallel/article/217500206?pgno=3](http://www.drdobbs.com/go-parallel/article/217500206?pgno=3)

然后仔细检查您的代码是否存在线程会相互阻塞的情况。

此外，如果您的线程受 CPU 限制（如果您已经使用所有内核接近 100%，添加更多线程只会增加上下文切换的开销），则运行的线程数多于 CPU 内核数会降低性能。

# java - 使用来自 jython 的功能性 java 构造（谓词）

> ID：10358339
> 
> 赞同：0
> 
> 时间：2012-04-27T21:53:32.143
> 
> 标签：java, python, jython, selenium-webdriver

所以，我正在尝试使用 jython 的 selenium java 库（是的，我知道 selenium 有一个 python 接口，但是出于公司团队合作的充分理由，如果可以做得好，访问纯 java 库更有意义）。

我只是想在这里做示例脚本：http: [//seleniumhq.org/docs/03_webdriver.html#introducing-the-selenium-webdriver-api-by-example](http://seleniumhq.org/docs/03_webdriver.html#introducing-the-selenium-webdriver-api-by-example)

我使用以下 jython 代码实现了它：

```
from org.openqa.selenium.firefox import FirefoxDriver
from org.openqa.selenium import By
from org.openqa.selenium import WebDriver
from org.openqa.selenium import WebElement
from org.openqa.selenium.support.ui import ExpectedCondition
from org.openqa.selenium.support.ui import WebDriverWait

driver = FirefoxDriver()
driver.get('http://www.google.com')
element = driver.findElement(By.name('q'))

# The array wrapper around the string is the only weird thing I encountered
element.sendKeys(["Cheese!"])
print "Page title is: " + driver.getTitle()

class ExpectedConditionTitle(ExpectedCondition):
  def apply(d):
    print(type(d))
    return d.title.toLowerCase().startsWith(["cheese!"])
  def equals(d):
    pass

print(type(driver))
WebDriverWait(driver, 10).until(ExpectedConditionTitle().apply())
print driver.getTitle()
driver.quit() 
```

它在 ExpectedCondition 位上呕吐。我不知道如何为直到所需的品种创建一个子类。我的代码中出现以下错误：

### 最后的

Traceback（最里面的最后一个）：文件“Example.py”，第 24 行，在？文件“Example.py”，第 19 行，应用 AttributeError：'instance' 对象没有属性 'title'

和

Traceback（最里面的最后一个）：文件“Example.py”，第 24 行，在？文件“Example.py”，第 19 行，应用 AttributeError: getTitle

和

Traceback（最里面的最后一个）：文件“Example.py”，第 22 行，在？TypeError: until(): 第一个参数不能被强制转换为 com.google.common.base.Function 或 com.google.common.base.Predicate

selenium [ExpectedCondition 接口](http://selenium.googlecode.com/svn/trunk/docs/api/java/index.html)基本上只是[Guava Predicate 接口](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Predicate.html)的一个前端。

我对python或java不够精通，无法弄清楚这一点。任何人有任何想法我可以如何做到这一点？

# java - 使用 Spring RestTemplate for Android 发出经过身份验证的 POST 请求

> ID：10358345
> 
> 赞同：72
> 
> 时间：2012-04-27T21:53:50.600
> 
> 标签：java, android, spring, rest, resttemplate

我有一个 RESTful API，我试图通过 Android 和 RestTemplate 连接。所有对 API 的请求都通过 HTTP Authentication 进行身份验证，通过设置 HttpEntity 的标头，然后使用 RestTemplate 的`exchange()`方法。

所有 GET 请求都以这种方式工作得很好，但我无法弄清楚如何完成经过身份验证的 POST 请求。`postForObject`并`postForEntity`处理 POST，但没有简单的方法来设置 Authentication 标头。

所以对于 GET，这很有效：

```
HttpAuthentication httpAuthentication = new HttpBasicAuthentication("username", "password");
HttpHeaders requestHeaders = new HttpHeaders();
requestHeaders.setAuthorization(httpAuthentication);

HttpEntity<?> httpEntity = new HttpEntity<Object>(requestHeaders);

MyModel[] models = restTemplate.exchange("/api/url", HttpMethod.GET, httpEntity, MyModel[].class); 
```

但是 POST 显然无法使用，`exchange()`因为它从不发送自定义标头，而且我看不到如何使用`exchange()`.

从 RestTemplate 发出经过身份验证的 POST 请求的最简单方法是什么？

* * *

## 回答 #1

> 赞同：136
> 
> 时间：2012-05-01T20:45:09.123

好的，找到了答案。`exchange()`是最好的方法。奇怪的是，`HttpEntity`该类没有`setBody()`方法（它有`getBody()`），但仍然可以通过构造函数设置请求主体。

```
// Create the request body as a MultiValueMap
MultiValueMap<String, String> body = new LinkedMultiValueMap<String, String>();     

body.add("field", "value");

// Note the body object as first parameter!
HttpEntity<?> httpEntity = new HttpEntity<Object>(body, requestHeaders);

ResponseEntity<MyModel> response = restTemplate.exchange("/api/url", HttpMethod.POST, httpEntity, MyModel.class); 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2014-11-12T08:22:48.053

略有不同的做法：

```
MultiValueMap<String, String> headers = new LinkedMultiValueMap<String, String>();
headers.add("HeaderName", "value");
headers.add("Content-Type", "application/json");

RestTemplate restTemplate = new RestTemplate();
restTemplate.getMessageConverters().add(new MappingJackson2HttpMessageConverter());

HttpEntity<ObjectToPass> request = new HttpEntity<ObjectToPass>(objectToPass, headers);

restTemplate.postForObject(url, request, ClassWhateverYourControllerReturns.class); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-06-26T14:34:37.577

我最近在处理一个问题，当时我试图在从 Java 进行 REST 调用时通过身份验证，虽然这个线程（和其他线程）中的答案有帮助，但在获取它时仍然需要一些试验和错误在职的。

对我有用的是编码凭据`Base64`并将它们添加为基本授权标头。然后我将它们添加为`HttpEntity`to `restTemplate.postForEntity`，这给了我所需的响应。

这是我为此编写的完整课程（扩展 RestTemplate）：

```
public class AuthorizedRestTemplate extends RestTemplate{

    private String username;
    private String password;

    public AuthorizedRestTemplate(String username, String password){
        this.username = username;
        this.password = password;
    }

    public String getForObject(String url, Object... urlVariables){
        return authorizedRestCall(this, url, urlVariables);
    }

    private String authorizedRestCall(RestTemplate restTemplate, 
            String url, Object... urlVariables){
        HttpEntity<String> request = getRequest();
        ResponseEntity<String> entity = restTemplate.postForEntity(url, 
                request, String.class, urlVariables);
        return entity.getBody();
    }

    private HttpEntity<String> getRequest(){
        HttpHeaders headers = new HttpHeaders();
        headers.add("Authorization", "Basic " + getBase64Credentials());
        return new HttpEntity<String>(headers);
    }

    private String getBase64Credentials(){
        String plainCreds = username + ":" + password;
        byte[] plainCredsBytes = plainCreds.getBytes();
        byte[] base64CredsBytes = Base64.encodeBase64(plainCredsBytes);
        return new String(base64CredsBytes);
    }
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-07-24T13:07:29.997

非常有用我有一个稍微不同的场景，我的请求 xml 本身就是 POST 的主体，而不是参数。为此，可以使用以下代码 - 发布作为答案，以防万一有类似问题的其他人受益。

```
 final HttpHeaders headers = new HttpHeaders();
    headers.add("header1", "9998");
    headers.add("username", "xxxxx");
    headers.add("password", "xxxxx");
    headers.add("header2", "yyyyyy");
    headers.add("header3", "zzzzz");
    headers.setContentType(MediaType.APPLICATION_XML);
    headers.setAccept(Arrays.asList(MediaType.APPLICATION_XML));
    final HttpEntity<MyXmlbeansRequestDocument> httpEntity = new HttpEntity<MyXmlbeansRequestDocument>(
            MyXmlbeansRequestDocument.Factory.parse(request), headers);
    final ResponseEntity<MyXmlbeansResponseDocument> responseEntity = restTemplate.exchange(url, HttpMethod.POST, httpEntity,MyXmlbeansResponseDocument.class);
    log.info(responseEntity.getBody()); 
```

# ruby - 没有 config.ru 的启动机架服务器？

> ID：10358347
> 
> 赞同：2
> 
> 时间：2012-04-27T21:53:54.360
> 
> 标签：ruby, config, rack

我最近一直在搞乱 Rack，想知道如何在`app.rb`不使用`config.ru`. 这是可能的，还是一种更复杂的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T22:25:15.380

您可以改用内置的 WEBrick 服务器。因此，您通常可能会遇到这样的情况：

```
# app.rb
class App
  def call(env)
    return [200, {"Content-Type" => "text/html"}, "Hello, World!"]
  end
end

# config.ru
require 'app'
run App.new 
```

您可以改为整合它并直接运行`ruby app.rb`：

```
#app.rb
class App
  def call(env)
    return [200, {"Content-Type" => "text/html"}, "Hello, World!"]
  end
end

Rack::Handler::WEBrick.run(App.new, :Port => 9292) 
```

# python - 使用 Python 在一列中选择具有特定范围值的行

> ID：10358349
> 
> 赞同：4
> 
> 时间：2012-04-27T21:53:58.760
> 
> 标签：python, parsing, loops, rows

我知道这很简单，但我是 Python 的新用户，所以我在这里遇到了一些麻烦。顺便说一句，我正在使用 Python 3。

我有多个看起来像这样的文件：

姓名 日期 年龄 性别 颜色

```
Name Date Age Sex Color
Ray  May  25.1 M  Gray
Alex Apr  22.3 F  Green
Ann  Jun  15.7 F  Blue 
```

（假设这是制表符分隔的。我应该补充一点，真实文件将有大约 3,000 行和 17-18 列）

我想要做的是选择年龄列中值小于 23 的所有行。

在此示例中，输出将是：

```
Name Date Age Sex Color
Alex Apr  22.3 F  Green
Ann  Jun  15.7 F  Blue 
```

这是我试图做的：

```
f = open("addressbook1.txt",'r')
line = f.readlines()
file_data =[line.split("\t")]
f.close()

for name, date, age, sex, color in file_data:
    if age in line_data < 23:
        g = open("college_age.txt",'a')
        g.write(line)
    else:
        h = open("adult_age.txt",'a')
        h.write(line) 
```

现在，理想情况下，我有 20-30 个这样的“地址簿”输入文件，我希望这个脚本循环遍历它们并将所有年龄低于 23 岁的条目添加到同一个输出文件（“college_age.txt”）中。我真的不需要保留其他线路，但我不知道还能用它们做什么。

这个脚本，当我运行它时，会产生一个错误。

```
AttributeError: 'list' object has no attribute 'split' 
```

然后我将第三行更改为：

```
file_data=[line.split("\t") for line in f.readlines()] 
```

它不再给我一个错误，而是根本什么都不做。它只是开始然后开始。

有什么帮助吗？:) 记住我对 Python 很笨。

我应该补充一点，我的实际数据是小数而不是整数。我已经编辑了上面的数据以反映这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T22:07:01.297

这里的问题是您使用`readlines()`了两次，这意味着第一次读取数据，然后第二次没有留下任何内容。

您可以直接遍历文件而不使用`readlines()`- 事实上，这是更好的方法，因为它不会一次读取整个文件。

虽然您可以按原样使用来做您想做的事情`str.split()`，但更好的选择是使用专为该任务设计[的`csv`模块。](http://docs.python.org/library/csv.html)

```
import csv

with open("addressbook1.txt") as input, open("college_age.txt", "w") as college, open("adult_age.txt", "w") as adult:
   reader = csv.DictReader(input, dialect="excel-tab")
   fieldnames = reader.fieldnames
   writer_college = csv.DictWriter(college, fieldnames, dialect="excel-tab")
   writer_adult = csv.DictWriter(adult, fieldnames, dialect="excel-tab")
   writer_college.writeheader()
   writer_adult.writeheader()
   for row in reader:
       if int(row["Age"]) < 23:
          writer_college.writerow(row)
       else:
          writer_adult.writerow(row) 
```

那么我们在这里做什么呢？首先，我们使用打开[文件](http://docs.python.org/whatsnew/2.5.html#pep-343-the-with-statement)[的`with`语句](http://docs.python.org/reference/compound_stmts.html#the-with-statement)。它不仅更具pythonic和可读性，而且可以为您处理关闭，即使发生异常也是如此。

接下来我们创建一个`DictReader`从文件中读取行作为字典，自动使用第一行作为字段名。然后，我们让编写者写回我们的拆分文件，并将标题写入其中。使用`DictReader`是一个偏好问题。它通常在您大量访问数据的情况下（以及当您不知道列的顺序时）使用得更多，但它使代码在此处易于阅读。但是，您可以只使用标准`csv.reader()`.

接下来，我们遍历文件中的行，检查年龄（我们将其转换为 int 以便进行数值比较）以了解要写入的文件。该`with`声明为我们关闭了文件。

# 对于多个输入文件：

```
import csv

fieldnames = ["Name", "Date", "Age", "Sex", "Color"]
filenames = ["addressbook1.txt", "addressbook2.txt", ...]

with open("college_age.txt", "w") as college, open("adult_age.txt", "w") as adult:
   writer_college = csv.DictWriter(college, fieldnames, dialect="excel-tab")
   writer_adult = csv.DictWriter(adult, fieldnames, dialect="excel-tab")
   writer_college.writeheader()
   writer_adult.writeheader()
   for filename in filenames:
       with open(filename, "r") as input:
           reader = csv.DictReader(input, dialect="excel-tab")
           for row in reader:
               if int(row["Age"]) < 23:
                  writer_college.writerow(row)
               else:
                  writer_adult.writerow(row) 
```

我们只是添加一个循环来处理多个文件。请注意，我还添加了字段名称列表。在我只使用文件中的字段和顺序之前，但由于我们有多个文件，我认为在这里这样做会更明智。另一种方法是使用第一个文件来获取字段名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T22:04:03.310

我认为最好使用 csv 模块来读取此类文件[http://docs.python.org/library/csv.html](http://docs.python.org/library/csv.html)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-04-27T22:08:39.720

ITEM

```
with open("addressbook1.txt", 'r') as f:
    # with automatically closes
    file_data = ((line, line.split("\t")) for line in f)
    with open("college_age.txt", 'w') as g, open("adult_age.txt", 'w') as h:
        for line, (name, date, age, sex, color) in file_data:
            if int(age) < 23: # float() if it is not an integer...
                g.write(line)
            else:
                h.write(line) 
```

看起来文件数据可能会迭代多次。但是多亏了[生成器表达式](http://docs.python.org/reference/expressions.html#generator-expressions)，`file data`如果被要求这样做，它只是一个生成器，它会分发文件的下一行。它被要求在 for 循环中这样做。这意味着，for 循环检索到的每个项目都来自生成器，在该生成器`file_data`中，根据请求，每个文件行都会转换为包含完整行（用于复制）及其组件（用于测试）的元组。

另一种可能是

```
file_data = ((line, line.split("\t")) for line in iter(f.readline, '')) 
```

*   `readlines()`它比迭代文件更接近。由于`readline()`幕后操作与对文件的迭代略有不同，因此可能有必要这样做。

（如果你不喜欢函数式编程，你也可以创建一个手动调用的生成器函数，`readline()`直到返回一个空字符串。

如果你根本不喜欢嵌套生成器，你可以这样做

```
with open("addressbook1.txt", 'r') as f, open("college_age.txt", 'w') as g, open("adult_age.txt", 'w') as h:
    for line in f:
        name, date, age, sex, color = line.split("\t")
        if int(age) < 23: # float() if it is not an integer...
            g.write(line)
        else:
            h.write(line) 
```

这完全一样。）

# php - 如何使用javascript将相同的变量从php发送到两个不同的php页面

> ID：10358351
> 
> 赞同：2
> 
> 时间：2012-04-27T21:54:02.283
> 
> 标签：php, javascript, jquery, variables

我有这 4 个页面并且工作正常，但是现在我需要将在（index.php）的输入字段中键入的“单词”发送到另一个页面（pag2.php），同时它发送到（pag1.php）在 (script.php) 使用这个 javascript 代码。

索引.php

```
<form method="post">
    <input type="text" name="word" id="word" onkeyup="getSugest(this.value);">
</form>
<div class='search'><img ..... searching.gif></div>
<div id="sugest">
<div id="resultIndex"></div>
<div id="buttonsIndex">
<ul>
<?
for($i=1; $i<=page; $i++;){
echo "<li id='".$i."'>".$i."</li>";
}
?>
<ul>
</div>
</div> 
```

脚本.js

```
 function getSugest(value){
    if(value != ""){
        if (callPage1(value) || callPage2(value)) {
         var data1 = callPage1(value);
         var data2 = callPage2(value);
         //var combinedData = combine as data1 and data2 as you want
         $("#sugest").html(combinedData); 
        } else {
         $("#sugest").html("Theres nothing in DB!"); 
        }
    }
}

function callPage1(value) {
    $.post("pag1.php",{word:value},function(data){
            if(data != ""){
                return data;
            }
            else{
                false;
            }
        });
}

function callPage2(value) {
    $.post("pag2.php",{word:value},function(data){
            if(data != ""){
                return data;
            }
            else{
                false;
            }
        });
}
$(document).ready(function(){
    function showLoader(){
        $('.search').fadeIn(200);
    }
    function hideLoader(){
        $('.search').fadeOut(200);
    };
    $("#buttonIndex li").click(function(){
        showLoader();

        $("#buttonIndex li").css({'background-color' : ''});
        $(this).css({'background-color' : '#D8543A'});

        $("#resultIndex").load("pag1.php?page=" + this.id, hideLoader);

        return false;
    });
    $("#buttonCar li").click(function(){
        showLoader();

        $("#buttonCar li").css({'background-color' : ''});
        $(this).css({'background-color' : '#D8543A'});

        $("#resultCar").load("pag2.php?page=" + this.id, hideLoader);

        return false;
    });
    $("#1").css({'background-color' : '#D8543A'});
    showLoader();
    $("#resultIndex").load("pag1.php?page=1", hideLoader);
    $("#resultCar").load("pag2.php?page=1", hideLoader);

}); 
```

页面1.php

```
$word = mysql_real_escape_string(addslashes($_POST['word']));
echo "Word is: ".$word;
//here is the php and mysql querys to return the result 
```

页面2.php

```
$word = mysql_real_escape_string(addslashes($_POST['word']));
echo "Word is: ".$word;
//here is the php and mysql querys to return the result 
```

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T21:59:56.683

[这里](http://www.9lessons.info/2011/03/multiple-ajax-requests-with-jquery.html)有一个示例场景

每次调用都可以实现一个方法，调用完之后，可以组合它们的结果

您还可以查看我的示例代码以重现您的场景（根据您的需要进行修改）

```
function getSugest(value){
    if(value != ""){
        if (callPage1(value) || callPage2(value)) {
         var data1 = callPage1(value);
         var data2 = callPage2(value);
         //var combinedData = combine as data1 and data2 as you want
         $("#sugest").html(combinedData); 
        } else {
         $("#sugest").html("Theres nothing in DB!"); 
        }
    }
}

function callPage1(value) {
    $.post("pag1.php",{word:value},function(data){
            if(data != ""){
                return data;
            }
            else{
                false;
            }
        });
}

function callPage2(value) {
    $.post("pag2.php",{word:value},function(data){
            if(data != ""){
                return data;
            }
            else{
                false;
            }
        });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T22:06:13.300

不要使用内联函数，而是使用 jQuery 的原生方法：

```
$(function(){
   $('#word').keyup(function(){
      if(this.value) {
         $.post("pag1.php", { word: value }, function(data) {
            if(data){
               $("#suggest").html(data);
            } else {
               $("#suggest").html("Theres nothing in DB!");
            }
         });
      }
   });
}); 
```

# spotify - Libstpotify API - 如何使用我的 Facebook 凭据登录？

> ID：10358361
> 
> 赞同：2
> 
> 时间：2012-04-27T21:55:26.700
> 
> 标签：spotify

老派* Spotify 伪/密码凭证适用于基于 Libspotify 的应用程序，而 Facebook 凭证则不能。

那么用户如何使用他们的 Facebook 帐户登录到基于 Libspotify 的应用程序呢？

*在 Facebook 帐户成为强制性之前...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T14:05:14.873

从 libSpotify 11 开始，Facebook 登录应该可以正常工作——只需让用户使用他们的 Facebook 电子邮件地址和密码登录即可。

如果您使用的是 iOS，则必须使用库（`SPLoginViewController`和朋友）提供的登录流程 - 请参阅示例应用程序以了解如何执行此操作。

# android - 资产创建 - 9patch SplashScreen 和 ScreenDensity

> ID：10358364
> 
> 赞同：2
> 
> 时间：2012-04-27T21:55:40.090
> 
> 标签：android, size, photoshop, pixels

所以我得到了整个 Android 像素独立性。

我正在创建一个使用 9patch 的 SplashScreen，它将拉伸其边缘以适应所有屏幕尺寸。

`ldpi` `mpdi` `hdpi` `xhdpi`我还为每个初始屏幕使用不同大小的 9patch 图像。这样徽标（9patch 的非拉伸区域）将是正确的大小。

我知道相对大小`mdpi`是 1.0 和`hdpi`x1.5 并且`xhdpi`是 x2，但是**当我创建第一个 mdpi 图像时，我怎么知道它应该是多少像素宽/高**？

希望这是有道理的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T22:11:48.687

真的没有一个答案。首先，我不会从 mdpi 开始并扩大规模——最好从尽可能高的质量开始。矢量，如果它适合设计，或高分辨率图像（甚至大于您当前计划支持的最大屏幕尺寸）。然后，从那里为您计划测试的设备缩小尺寸。例如，典型的 HDPI 分辨率为 480 x 800，因此在此处适当调整。XHDPI 分辨率可能类似于 1280 x 720。最好只在边缘留出大量边距，以防它用于具有不同纵横比的设备或其他设备上。但是，是的，基本上，设计尽可能大，然后根据您正在处理的密度桶的一些平均屏幕分辨率导出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T03:22:44.647

> (...) 当我创建第一个 mdpi 图像时，我怎么知道它应该是多少像素宽/高？

由于`mdpi`是所有其他密度桶的基线，因此`1dp`在`mdpi`设备上将准确转换为`1px`. 换句话说，使用一个`mdpi`设备来计算屏幕上的相对大小，然后应用给定的缩放比例来为`ldpi`、`hdpi`和`xhdpi`桶生成资源。显然，您实际上不必扩大该`mdpi`资源 - 您只需要确定该屏幕密度的大小，然后您可以使用任何源文件为所有存储桶生成图像。

xBroak 给出的链接实际上是有关您的问题的最佳信息来源。从那里引用来支持上述陈述：

> **与密度无关的像素相当于 160 dpi 屏幕上的一个物理像素**，这是系统为“中等”密度屏幕假定的基线密度。

`d(i)p`了解简单的公式也可能会派上用场`px`（也来自同一个链接）：

> dp 单位到屏幕像素的转换很简单：**`px = dp * (dpi / 160)`**

使用此信息，您可以轻松验证`1dp`在`mdpi`设备（带`160dpi`屏幕）上是否等于`1px`. 只需填写即可`160dpi`得到`px = dp * (160 / 160)`，简化为`px = dp * 1`，因此简化`px = dp`为`160dpi`。QED。:)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-27T22:21:49.043

这些是您的基本准则：

```
xlarge screens are at least 960dp x 720dp
large screens are at least 640dp x 480dp
normal screens are at least 470dp x 320dp
small screens are at least 426dp x 320dp

320dp: a typical phone screen (240x320 ldpi, 320x480 mdpi, 480x800 hdpi, etc).
480dp: a tweener tablet like the Streak (480x800 mdpi).
600dp: a 7” tablet (600x1024 mdpi).
720dp: a 10” tablet (720x1280 mdpi, 800x1280 mdpi, etc). 
```

更多信息：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

# svn - svn 不会更新现有文件

> ID：10358368
> 
> 赞同：0
> 
> 时间：2012-04-27T21:56:09.233
> 
> 标签：svn, svn-checkout

我在签出项目并尝试更新现有文件时遇到了一个奇怪的问题。我的项目在 svn 存储库中有几个分支。我使用单个工作项目目录（比如“proj”）来检查我想要处理的分支。

假设我一直在处理“proj”文件夹中的“branch1”，现在我想处理“branch2”。所以我删除“proj”中的.svn，并从存储库中将“branch2”签出到“proj”（将所有文件放在“branch2”，branch2/*，直接在“proj”下，而不创建文件夹“branch2”）。问题是 svn checkout 实际上不会更新现有文件，比如说如果“file1”已经存在（它在 branch1 和 branch2 中），它不会更新到“branch2”中的版本，除非我删除将“file1”或签出“branch2”到一个空文件夹。即使我执行 svn update -r #rev file1，它实际上也不会更新 file1，尽管 svn status file1 显示了 file1 的正确 #rev。顺便一提，

这是 svn 应该表现的吗？我是否必须删除文件才能更新它们？我对这种行为不满意，因为它违反直觉，并且会导致在分支之间切换的麻烦。你能给出一些巧妙的解决方案吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T22:08:17.017

你应该使用

```
svn switch <branch-repo path> 
```

切换到不同的分支。

# database - 恢复数据库并重新导入 aspnet 成员数据

> ID：10358375
> 
> 赞同：1
> 
> 时间：2012-04-27T21:56:37.750
> 
> 标签：database, synchronization, automation, passwords

我有一个关于恢复包含 aspnet 成员表/数据的数据库的问题。这是我的场景：
我有 2 个数据库，分期和生产。用户在登台时会生成一个密码，然后最终一旦他们移动到生产数据库，他们就会生成一个新密码，该密码总是与他们在登台中使用的密码不同（两个数据库都位于不同的服务器上）。
我想用生产数据库的备份来更新登台数据库（以保持模式/对象同步等），但这意味着必须为登台但尚未生产的用户重新生成密码，这会导致麻烦——是否存在一种简单的方法，我可以在进行还原之前以某种方式从暂存中导出数据，然后在之后重新导入以避免丢失用户名/密码数据？

# clojure - 使用 Clojure 的初创公司

> ID：10358381
> 
> 赞同：4
> 
> 时间：2012-04-27T21:56:57.110
> 
> 标签：clojure, startup

如果这个问题不在主题范围内，请在投票结束之前告诉我这个问题适合哪个堆栈交换。

我喜欢 Clojure 编程语言。我有兴趣获得一份使用 Clojure 进行开发的公司的列表。我在哪里可以得到这样的清单？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T22:06:19.197

许多公司都在这里列出：[http ://www.quora.com/Which-startups-are-using-Clojure](http://www.quora.com/Which-startups-are-using-Clojure)

此外，大型官方列表：[http ://dev.clojure.org/display/community/Clojure+Success+Stories](http://dev.clojure.org/display/community/Clojure+Success+Stories)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-27T22:01:00.630

（一些示例不按任何顺序排列）现在是一个社区维基：在这里发布您的收藏夹！

*   气候公司（曾是 WeatherBill）
*   runa (ai 实时优惠券)
*   零准备
*   棱柱形
*   新西兰Montoux Limited（财务风险分析）

# sql - 同时执行UPDATE时出现死锁

> ID：10358383
> 
> 赞同：3
> 
> 时间：2012-04-27T21:56:58.867
> 
> 标签：sql, deadlock

我正在加载测试应用程序并出现死锁错误。该场景是由 10 个不同的用户同时插入和更新数据库。我上网查了，还是没找到解决的办法。这里附上了我涉及死锁的示例代码。

谁能给我一些解决死锁的建议？先感谢您。

```
SampleController:

onSubmit(userAccount)
{
     sampleBO.testDeadLock(userAccount.getUserAccountId());

} 
```

样品BO：

```
public void testInsert(Long id)
{
    sampleDAO.testInsert4(id);      
}

public void testDeadLock(Long id)
{
    testInsert(id);
    sampleDAO.testUpdate4(id);  
} 
```

示例DAO：

```
public void testInsert4(Long id)
{
    StringBuffer sbSql = new StringBuffer();
    sbSql.append(" INSERT INTO Test ");
    sbSql.append(" ( ");
    sbSql.append(" id, ");
    sbSql.append(" note ");
    sbSql.append(" ) ");
    sbSql.append(" VALUES ");
    sbSql.append(" (");
    sbSql.append(""+id+",");
    sbSql.append(" 'test' ");
    sbSql.append(" )");

    //Execute SQL using Spring's JDBC Templates
    this.getSimpleJdbcTemplate().update(sbSql.toString());
}

public void testUpdate4(Long id)
{       
    StringBuffer sbSql = new StringBuffer();
    sbSql.append(" UPDATE Test WITH(ROWLOCK) SET ");
    sbSql.append(" note = 'test1111'");
    sbSql.append(" WHERE id="+id);

    //Execute SQL using Spring's JDBC Templates
    this.getSimpleJdbcTemplate().update(sbSql.toString());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T23:08:22.927

如果发生死锁，则不是您提供的代码，除非：

*   您有多个同时运行的测试程序实例。
*   上面的代码是异步运行的——但情况似乎并非如此。
*   当您运行这些测试时，数据库上还有其他活动。

我的钱在最后一个。

您可以通过执行 SQL 跟踪并准确识别正在运行的内容和时间来找出为什么会发生这些死锁。

* * *

每个都有自己的，但你知道你可以这样声明你的 sql 查询吗？@ 允许文本进入多行并转义特殊字符，如反斜杠。

```
string sbSql = @"
    INSERT INTO Test (id, note)
    VALUES ({0}, 'test')";

sbSql = string.Format(sbSql, id); 
```

`WITH(ROWLOCK)`可能也不需要。99.9% 的时间 SQL Server 将执行相关锁定，您应该只在复杂或特殊情况下显式强制某些锁定。

# tsql - TSQL：如何在 SQLServer 实例之间移动数据？

> ID：10358384
> 
> 赞同：2
> 
> 时间：2012-04-27T21:56:59.943
> 
> 标签：tsql, azure, azure-sql-database

我有两个 SQLSever 实例，每个实例都有相同的架构。一个在 SQLAzure 中运行，另一个是标准的 SQLServer 2008 实例。我需要将数据从 Azure 数据库复制到我的本地实例。

基本上我想这样做：

```
insert LOCAL_TABLE (col1, col2)
select col1, col2
from AZURE_TABLE 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T22:13:01.043

为了在 SQL Server 之间移动数据，如果其中之一是 SQL Azure，您有几个选项：

1.  [SQL Azure 数据同步](http://msdn.microsoft.com/en-us/library/windowsazure/hh456371.aspx)
2.  [使用 SSIS](http://blogs.msdn.com/b/benko/archive/2009/08/19/using-sql-management-studio-2008-with-sql-data-services-sql-in-the-cloud.aspx)
3.  编写您自己的代码，该代码将使用最有可能[的 SqlBulkCopy](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)类来移动数据。
4.  如果您只想复制所有数据，您还可以使用[SQL Azure 迁移向导](http://sqlazuremw.codeplex.com/)- 您可以省略用于应对架构的选项，让它只复制数据。

**编辑**

而且，根据 Matthew PK 的原始答案，您可以**从本地服务器链接****到**SQL Azure 服务器，但这只是当您只想进行一些临时测试时的一种选择。我不会在生产中使用这种方法来不断同步数据。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T22:02:13.450

您可以使用链接服务器在单个语句中完成此操作。
[http://msdn.microsoft.com/en-us/library/ms188279(v=sql.100).aspx](http://msdn.microsoft.com/en-us/library/ms188279(v=sql.100).aspx)

**编辑：**这是一个似乎解释如何链接到 SQL Azure 的链接：http:
[//blogs.msdn.com/b/sqlcat/archive/2011/03/08/linked-servers-to-sql-azure.aspx](http://blogs.msdn.com/b/sqlcat/archive/2011/03/08/linked-servers-to-sql-azure.aspx)

**编辑：**这是一篇关于使用 SSMS 连接到 Azure 的文章
[http://www.silverlighthack.com/post/2009/11/11/Connecting-to-SQL-Azure-with-SQL-Server-Management-Studio- 2008-R2.aspx](http://www.silverlighthack.com/post/2009/11/11/Connecting-to-SQL-Azure-with-SQL-Server-Management-Studio-2008-R2.aspx)

否则我相信你需要在两个语句中做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T19:03:03.447

这是一次性副本还是正在进行中？如果是一次性，则使用 SQL Azure 迁移向导（来自 Codeplex） 如果持续，则使用 SQL Azure 数据同步

您还可以验证架构是否与 VS 中的 SQL Server Data Tools 兼容，只需将目标设置为 SQL Azure 或 SQL Server 2012 或 2008，然后构建，任何/所有架构错误都会显示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T22:10:54.500

链接服务器不受官方支持。但是，以下是一些受支持的资源，可以帮助您完成所需的工作：

1) 查看 SQL Azure Dac 示例：[http ://sqldacexamples.codeplex.com/](http://sqldacexamples.codeplex.com/)

2) 其他选项是 SQL Azure Data SYNC。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T22:11:29.357

使用redgate的[“SQL 数据比较”之类的产品。](http://www.red-gate.com/products/sql-development/sql-data-compare/)我不是 Azure 用户，但我猜它会起作用，我已经使用了几年并且它非常可靠。**

# java - Java“找不到主类 Emeraldrandomizer.EmeraldRandomizerApp。程序将退出。”

> ID：10358386
> 
> 赞同：0
> 
> 时间：2012-04-27T21:57:01.480
> 
> 标签：java, class, windows-7

我似乎无法让这个程序工作，我不知道为什么。

当我输入 java 以“运行”（使用 Windows 7）时，我收到消息

```
 "Windows could not find Java". 
```

我也安装了java并重新安装它无济于事。我有一种感觉目录被搞砸了（可能是因为当我将引导驱动器更改为我的 SSD 并将我的旧硬盘驱动器用作内部存储驱动器时我把它屠杀了）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T22:02:14.300

你的 Windows PATH for java 可能是问题所在。

当您在运行屏幕中输入 java 时...windows 会找到路径定义的 java 版本。

1) 尝试输入 java -version

如果这不起作用，windows 找不到 java 安装。

2）尝试找到安装java的java可执行文件并尝试直接运行它

如果这行得通，那就是路径问题

# automated-tests - 在 RQM 中对测试用例和测试脚本运行拼写检查

> ID：10358389
> 
> 赞同：0
> 
> 时间：2012-04-27T21:57:43.970
> 
> 标签：automated-tests, spell-checking, ibm-jazz

我似乎找不到使用 Rational Quality Manager 拼写检查测试用例和测试脚本的好方法。我可以做一些愚蠢的事情，比如调出辅助数据输入/验证功能，输入一些文本，自动神奇地检查拼写，然后选择/复制/粘贴文本到步骤描述/预期结果中，但是 yuk。

其他人使用什么技术？我的手指很胖，所以拼写检查器会派上用场。:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T16:22:19.973

从 Jazz 套件的 Rational 帮助文件中：

如果您的浏览器支持拼写检查，您可以编辑和检查所有富文本工件中的拼写。拼写错误的单词标有红色波浪下划线。

提示：要使用 Internet Explorer 拼写检查富文本工件，您必须安装拼写检查插件。Internet Explorer 的拼写检查器包括 ieSpell（用于 V7）和 Google Toolbar（用于 V8）。

# c++ - 流氓缺少 c++ 符号 - 调试策略？

> ID：10358397
> 
> 赞同：0
> 
> 时间：2012-04-27T21:58:16.970
> 
> 标签：c++, python, linker

我正在为 LAMMPS 构建/使用 python 模块，它是开源分子动力学模拟器（[项目主页](http://lammps.sandia.gov/)，[源代码](http://sourceforge.net/projects/lammps/files/)）。

python 模块通过将 C++ 应用程序编译为库，并使用 CDLL/ctypes 调用 C 函数接口来工作。当您`CDLL()`在 python 中调用该函数时，如果操作系统在库本身中找不到任何缺失的符号，并且无法从其他可用库加载，则加载失败。

我缺少的特定符号是 C++ 错位名称`__ZN3MPI3Win14Set_errhandlerERKNS_10ErrhandlerE`，它可能是[MPI_Win_set_errhandler](http://mpi.deino.net/mpi_functions/MPI_Win_set_errhandler.html)（或一些具有类似名称的命名空间/面向对象的等价物）。对于上下文，我使用该`python/setup_serial.py`文件编译了它，该文件应该使用虚拟 MPI 接口构建，并且根本不应该引用任何真正的 MPI 符号；所以这是一个潜入某处的流氓参考。我还对源代码进行了一些修改，但是当我禁用所有更改时，我得到了同样的错误。

我的问题是，**找出在动态库中引用符号的位置给出这种错误的最佳调试策略是什么？**到目前为止，我已经尝试在源代码中搜索对这个符号（或名称的一部分）的引用，但我没有找到任何实例（事实上，唯一的结果是来自 python 构建过程的二进制文件，库我在导入时遇到问题。）

我想我的下一步是以某种方式在二进制文件中搜索，但我不知道从哪里开始（或其他一些策略）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T22:03:52.967

c++filt 是你的朋友

```
$ c++filt __ZN3MPI3Win14Set_errhandlerERKNS_10ErrhandlerE
MPI::Win::Set_errhandler(MPI::Errhandler const&) 
```

现在对该库进行快速谷歌搜索 [http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=512616](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=512616)

似乎存在部件升级但未重新编译的情况。第二件事是查看编译器的链接行并查看它包含哪些库。

最后的最后手段是做类似的事情：

```
readelf -s /path/to/libfoo.so 
```

并开始四处寻找，看看它是否在某个地方定义。

# windows-7 - 为什么 HKCR\pngfile 上下文菜单在 Windows XP 中有效，但在 Windows 7 中无效？

> ID：10358403
> 
> 赞同：4
> 
> 时间：2012-04-27T21:58:59.260
> 
> 标签：windows-7, registry, windows-7-x64, file-association

我一直在尝试添加一个命令来在我的 Windows 7 64 位上处理 PNG 文件：

```
Windows Registry Editor Version 5.00

[HKEY_CLASSES_ROOT\.png\OpenWithProgids]
"pngfile"=""

[HKEY_CLASSES_ROOT\pngfile\shell\PNGProcess]
@="Process"

[HKEY_CLASSES_ROOT\pngfile\shell\PNGProcess\command]
@="\"C:\\Program Files (x86)\\PNGProcess\\pngproc.exe\" \"%1\""

[HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\.png\UserChoice]
"Progid"="PBrush"

[HKEY_CURRENT_USER\Software\Classes\.png]
@="png_auto_file" 
```

它适用于 Windows XP，但不适用于 64 位 Windows 7。

相同的注册表添加适用`HKCR\jpegfile`于该 Windows 7 64 位系统，但`HKCR\pngfile`不起作用。

我再次检查以验证这些条目是否确实存在于注册表中的正确位置。他们是这样！

对此感到困惑，我检查了其他将上下文菜单项添加到图形文件扩展名的程序，果然即使使用古老的 GIMP 也存在这个问题！

我试图查找有关 PNG 和 Windows 7 的已知特性的信息，但找不到任何信息。

`pngfile`知道Windows 7有什么特别之处吗？

更新：按照以下建议，我在右键单击 .png 文件（访问上下文菜单）时捕获了相关操作，该文件会自动重新创建值`png_auto_file`：

```
4:05:53.3456954 PM  Explorer.EXE    2696    RegOpenKey  HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\.png\UserChoice    SUCCESS Desired Access: Query Value
4:05:53.3457486 PM  Explorer.EXE    2696    RegQueryValue   HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\.png\UserChoice\Progid SUCCESS Type: REG_SZ, Length: 14, Data: PBrush
4:05:53.3457983 PM  Explorer.EXE    2696    RegCloseKey HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\.png\UserChoice    SUCCESS 
4:05:53.3532997 PM  Explorer.EXE    2696    RegOpenKey  HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\.png\UserChoice    SUCCESS Desired Access: Query Value
4:05:53.3533494 PM  Explorer.EXE    2696    RegQueryValue   HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\.png\UserChoice\Progid SUCCESS Type: REG_SZ, Length: 14, Data: PBrush
4:05:53.3534160 PM  Explorer.EXE    2696    RegCloseKey HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\.png\UserChoice    SUCCESS 
4:05:53.3605580 PM  Explorer.EXE    2696    RegOpenKey  HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\.png\UserChoice    SUCCESS Desired Access: Query Value
4:05:53.3606023 PM  Explorer.EXE    2696    RegQueryValue   HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\.png\UserChoice\Progid SUCCESS Type: REG_SZ, Length: 14, Data: PBrush
4:05:53.3606462 PM  Explorer.EXE    2696    RegCloseKey HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\.png\UserChoice    SUCCESS 
4:05:53.3670219 PM  Explorer.EXE    2696    RegOpenKey  HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\.png\UserChoice    SUCCESS Desired Access: Query Value
4:05:53.3670721 PM  Explorer.EXE    2696    RegQueryValue   HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\.png\UserChoice\Progid SUCCESS Type: REG_SZ, Length: 14, Data: PBrush
4:05:53.3671219 PM  Explorer.EXE    2696    RegCloseKey HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\.png\UserChoice    SUCCESS 
4:05:53.3886634 PM  Explorer.EXE    2696    RegOpenKey  HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\.png\UserChoice    SUCCESS Desired Access: Query Value
4:05:53.3887094 PM  Explorer.EXE    2696    RegQueryValue   HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\.png\UserChoice\Progid SUCCESS Type: REG_SZ, Length: 14, Data: PBrush
4:05:53.3887554 PM  Explorer.EXE    2696    RegCloseKey HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\.png\UserChoice    SUCCESS 
4:05:53.4146451 PM  Explorer.EXE    2696    RegOpenKey  HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\.png\UserChoice    SUCCESS Desired Access: Query Value
4:05:53.4146940 PM  Explorer.EXE    2696    RegQueryValue   HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\.png\UserChoice\Progid SUCCESS Type: REG_SZ, Length: 14, Data: PBrush
4:05:53.4147417 PM  Explorer.EXE    2696    RegCloseKey HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\.png\UserChoice    SUCCESS 
4:05:53.7282785 PM  Explorer.EXE    2696    RegOpenKey  HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\.png\UserChoice    SUCCESS Desired Access: Query Value
4:05:53.7283091 PM  Explorer.EXE    2696    RegQueryValue   HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\.png\UserChoice\Progid SUCCESS Type: REG_SZ, Length: 14, Data: PBrush
4:05:53.7283375 PM  Explorer.EXE    2696    RegCloseKey HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\.png\UserChoice    SUCCESS 
4:05:53.7680034 PM  Explorer.EXE    2696    RegOpenKey  HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\.png\UserChoice    SUCCESS Desired Access: Query Value
4:05:53.7680323 PM  Explorer.EXE    2696    RegQueryValue   HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\.png\UserChoice\Progid SUCCESS Type: REG_SZ, Length: 14, Data: PBrush
4:05:53.7680595 PM  Explorer.EXE    2696    RegCloseKey HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\.png\UserChoice    SUCCESS 
4:05:53.7848014 PM  Explorer.EXE    2696    RegOpenKey  HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\.png\UserChoice    SUCCESS Desired Access: Query Value
4:05:53.7848311 PM  Explorer.EXE    2696    RegQueryValue   HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\.png\UserChoice\Progid SUCCESS Type: REG_SZ, Length: 14, Data: PBrush
4:05:53.7848591 PM  Explorer.EXE    2696    RegCloseKey HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\.png\UserChoice    SUCCESS 
4:05:53.8001734 PM  Explorer.EXE    2696    RegOpenKey  HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\.png\UserChoice    SUCCESS Desired Access: Query Value
4:05:53.8002023 PM  Explorer.EXE    2696    RegQueryValue   HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\.png\UserChoice\Progid SUCCESS Type: REG_SZ, Length: 14, Data: PBrush
4:05:53.8002303 PM  Explorer.EXE    2696    RegCloseKey HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\.png\UserChoice    SUCCESS 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T00:48:45.633

这些密钥可能失败的原因有多种，而且您几乎没有提供任何信息，因此这些是一般故障排除提示

1.  您没有说，但您是否将`.png`文件链接到`pngfile`ProgID？您可以检查的默认值`HKCR\.png`
2.  是否为将 ProgID 更改为其他内容的文件`UserChoice`分配了默认程序/ ？您可以通过查找和检查该 ProgID来检查`.png``pngfile``HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Explorer\FileExts\.png\UserChoice`
3.  这个“PNGProcess”动词的`HKCU`版本是否指向不同的应用程序或配置错误？检查那个键`HKCU\Software\Classes\.png`

*问题编辑后更新：*

`.reg`你的文件有不一致的地方。您将`PNGProcess`动词添加到`pngfile`ProgID，但您将设置`UserChoice`为`PBrush`，然后将默认`.png`ProgID 设置为`png_auto_file`。那是三个不同的 ProgID。它们都必须相同。

# actionscript-3 - 如何使用函数参数来引用变量？

> ID：10358404
> 
> 赞同：0
> 
> 时间：2012-04-27T21:59:10.897
> 
> 标签：actionscript-3, function, variables, parameters, refer

对不起，如果这个问题有点模糊，但这最近让我发疯了。这没什么太复杂的，但我想做的就是让变量“ **targetVariable** ”受到公式的影响。实际问题在于引用变量（在这种情况下为“ **masterVolume** ”）不受公式影响，而是“ **targetVariable** ”。我在脚本底部运行“ **makeSlider ”函数。**这是代码：

* * *

```
var masterVolume:Number = 0;
var panning:Number = 0;

function makeSlider(sliderType, X, Y, targetVariable) {

    var sliderHandle:MovieClip = new sliderType();

    addChild(sliderHandle);
    sliderHandle.x = X;
    sliderHandle.y = Y;

    var dragging:Boolean = false;

    stage.addEventListener(Event.ENTER_FRAME, updateSlider);

    function updateSlider(e:Event):void {
        panning = (mouseX/(stage.stageWidth/2))-1;

        targetVariable = ((sliderHandle.x-bar.x)/bar.width);

        output.text = masterVolume.toString();
        if (dragging == true && mouseX >= bar.x && mouseX <= (bar.x + bar.width)) {
            sliderHandle.x = mouseX;
        }
    }
    sliderHandle.addEventListener(MouseEvent.MOUSE_DOWN, beginDrag);

    function beginDrag(e:MouseEvent):void {
        dragging = true;
    }

    stage.addEventListener(MouseEvent.MOUSE_UP, endDrag);

    function endDrag(e:MouseEvent):void {
        dragging = false;
    }
}

function playSound(target, intensity:Number, pan:Number) {
    var sound:Sound = new target();
    var transformer:SoundTransform = new SoundTransform(intensity, pan);
    var channel:SoundChannel = new SoundChannel();

    channel=sound.play();

    channel.soundTransform = transformer;
}

stage.addEventListener(MouseEvent.MOUSE_DOWN, make);

function make(e:MouseEvent):void {
    playSound(test, masterVolume, panning);
}

makeSlider(SliderHandle, bar.x, bar.y, masterVolume); 
```

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T12:07:12.790

好的，所以我研究了 Object 类，发现我可以通过将变量设置为函数中的对象来引用该变量。这是更新的工作脚本：

```
var panning:Number = 0;
var masterVolume:Number = 0;

function makeSlider(sliderType, barType, soundType, hitBoxScale:Number, X, Y, targetVariable) {

    var reference:Object = { targetVariable: 0 };

    var slider:MovieClip = new sliderType;
    var newBar:MovieClip = new barType;

    addChild(newBar);
    newBar.x = X;
    newBar.y = Y;
    addChild(slider);
    slider.x = X;
    slider.y = Y;

    var dragging:Boolean = false;

    stage.addEventListener(Event.ENTER_FRAME, updateSlider);

    function updateSlider(e:Event):void {
        panning = (mouseX/(stage.stageWidth/2))-1;
        reference.targetVariable = (slider.x-newBar.x)/newBar.width;
        if (dragging == true && mouseX >= newBar.x && mouseX <= (newBar.x + newBar.width)) {
            slider.x = mouseX;
        }
        if (reference.targetVariable <= 0.01) {
            output.text = ("None");
        }
        if (reference.targetVariable >= 0.99) {
            output.text = ("Max");
        }
        if (reference.targetVariable > 0.01 && reference.targetVariable < 0.99) {
            output.text = (Math.round((reference.targetVariable*100))+"%").toString();
        }
    }
    stage.addEventListener(MouseEvent.MOUSE_DOWN, beginDrag);

    function beginDrag(e:MouseEvent):void {
        if (mouseY >= newBar.y-hitBoxScale && mouseY <= (newBar.y + newBar.height)+hitBoxScale) {
            dragging = true;
        }
    }
    slider.addEventListener(MouseEvent.MOUSE_DOWN, beginDragFromSlider);

    function beginDragFromSlider(e:MouseEvent):void {
        dragging = true;
    }

    stage.addEventListener(MouseEvent.MOUSE_UP, endDrag);

    function endDrag(e:MouseEvent):void {
        if (dragging == true) {
            playSound(soundType, reference.targetVariable, 0);
        }
        dragging = false;
    }
    stage.addEventListener(MouseEvent.MOUSE_DOWN, make);

    function make(e:MouseEvent):void {
        if (dragging == false) {
            playSound(test, reference.targetVariable, panning);
        }
    }
}

function playSound(target, intensity:Number, pan:Number) {
    var sound:Sound = new target();
    var transformer:SoundTransform = new SoundTransform(intensity, pan);
    var channel:SoundChannel = new SoundChannel();

    channel=sound.play();

    channel.soundTransform = transformer;
}

makeSlider(defaultSlider, defaultBar, volumeIndicator, 10, 134, 211, masterVolume); 
```

# objective-c - UINavBar 似乎在其他按钮上有一个不可见的层

> ID：10358405
> 
> 赞同：6
> 
> 时间：2012-04-27T21:59:15.610
> 
> 标签：objective-c, ios5, uinavigationcontroller, uinavigationbar

我创建了一个带有侧边菜单的应用程序，例如 facebooks。我有一个根视图控制器，它在自身上添加一个视图，然后当用户按下“菜单”按钮时，它将滑动视图，以便您可以看到菜单。

我的问题是，当视图第一次加载时，它看起来 UINavBar 比它应该的低大约 20 像素左右。（下图看起来有点偏离中心，因为它是模态水平翻转）

![在此处输入图像描述](../Images/390e9dbd66105319b04dcd2be7e2aae2.png)

然后，当模态转换完成时，它会自动调整自身并在该状态栏下方向上移动。

![在此处输入图像描述](../Images/b8a8f85dd67b480945bde9035b4d0f4a.png)

这是我按下“菜单”按钮时发生的屏幕截图。它将顶视图向右滑动

![在此处输入图像描述](../Images/b825f74adb2a0a3d5d6fa26ed7811dec.png)

正如您在上面的图片中看到的，我将左箭头和右箭头框架背景设置为红色，以便我可以看到可点击/可点击区域的位置。我有另一张图片，我在上面画了一条蓝线，如果我点击蓝线或以上，则不会触发右箭头。如果我单击左侧相同的一般区域，菜单按钮将触发。我能够在模拟器和移动设备上重现这一点（所以我不是胖手指）。

![在此处输入图像描述](../Images/280f32b92f5588571a3f63dfa5d03cee.png)

在我看来，由于导航栏的加载低于预期，iPhone 认为它仍处于该位置，因此当我在`UIButton`框架内单击时，它仍在触发菜单而不是触发箭头选择器。如果我在箭头中间直接点击，它会触发箭头选择器，但只是在图像之外一点点，它不会触发箭头选择器。

这是我的`RootViewController`viewDidLoad

```
AppointmentViewController *appointmentViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"AppointmentViewController"];
NSLog(@"B: %@",NSStringFromCGRect(appointmentViewController.view.frame));
self.navController = [[UINavigationController alloc] initWithRootViewController:appointmentViewController];
NSLog(@"B2: %@",NSStringFromCGRect(appointmentViewController.view.frame));
NSLog(@"Nav Bounds: %@",NSStringFromCGRect(self.navController.view.frame));
NSLog(@"Bounds: %@",NSStringFromCGRect(self.contentView.bounds));
self.navController.view.frame = self.contentView.bounds;
NSLog(@"Nav Bounds2: %@",NSStringFromCGRect(self.navController.view.frame));
[self addShadowToMenu];
[self.contentView addSubview:self.navController.view]; 
```

RootViewController 日志

```
2012-04-30 12:24:44.533 My-App[19929:fb03] B: {{0, 20}, {320, 460}}
2012-04-30 12:24:44.535 My-App[19929:fb03] B2: {{0, 20}, {320, 460}}
2012-04-30 12:24:44.535 My-App[19929:fb03] Nav Bounds: {{0, 0}, {320, 480}}
2012-04-30 12:24:44.535 My-App[19929:fb03] Bounds: {{0, 0}, {320, 460}}
2012-04-30 12:24:44.535 My-App[19929:fb03] Nav Bounds2: {{0, 0}, {320, 460}} 
```

约会视图控制器

```
self.title = [dataObj.preferences objectForKey:@"appts_name_plural"];
self.navigationItem.title = self.title;
dayView = [[APCalendarDayView alloc] initWithCalendarView:(APCalendarView *)self];
APListView = [self.storyboard instantiateViewControllerWithIdentifier:@"AppointmentListView"];
APListView.tableView.tableFooterView = [[UIView alloc] initWithFrame:CGRectZero];

SideMenuView *myDelegate = [[SideMenuView alloc] init];
[self setSideMenuDelegate:myDelegate];
//set the delegate's currentViewController property so that we can add a subview to this View. 
[sideMenuDelegate setCurrentViewController:self];

UIBarButtonItem *flexSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
UIBarButtonItem *today = [[UIBarButtonItem alloc] initWithTitle:@"Today" style:UIBarButtonItemStyleBordered target:nil action:@selector(todayPressed)];
NSArray *appointmentNavigationItems = [[NSArray alloc] initWithObjects:@"Day",@"List",@"Month", nil];
navcontrol = [[UISegmentedControl alloc] initWithItems:appointmentNavigationItems];
[navcontrol setSegmentedControlStyle:UISegmentedControlStyleBar];
[navcontrol addTarget:self action:@selector(appointmentNavigationClicked:) forControlEvents:UIControlEventValueChanged];
[navcontrol setSelectedSegmentIndex:0];
UIBarButtonItem *segmentItems = [[UIBarButtonItem alloc] initWithCustomView:navcontrol];

NSArray *items = [NSArray arrayWithObjects:today,flexSpace,segmentItems, flexSpace, nil];
[appointmentToolbar setItems:items animated:NO];
[appointmentToolbar setAutoresizesSubviews:YES];

[[self.view superview] addSubview:myDelegate.view];
[self setViewSizeOffset:(appointmentToolbar.bounds.size.height)]; 
```

日历日视图

```
- (void)addSubviewsToHeaderView:(UIView *)headerView
{
    const CGFloat kChangeMonthButtonWidth = 46.0f;
    const CGFloat kChangeMonthButtonHeight = 44.0f;
    const CGFloat kMonthLabelWidth = 215.0f;
    const CGFloat kHeaderVerticalAdjust = 7.f;

    // Header background gradient
    UIImageView *backgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Kal.bundle/kal_grid_background.png"]];
    CGRect imageFrame = headerView.frame;
    imageFrame.origin = CGPointZero;
    backgroundView.frame = imageFrame;
    [headerView addSubview:backgroundView];
    [backgroundView setAutoresizesSubviews:YES];
    [backgroundView setAutoresizingMask:UIViewAutoresizingFlexibleWidth];

    // Create the previous month button on the left side of the view
    CGRect previousMonthButtonFrame = CGRectMake(self.left, 0, kChangeMonthButtonWidth, kChangeMonthButtonHeight);
    UIButton *previousMonthButton = [[UIButton alloc] initWithFrame:previousMonthButtonFrame];
    [previousMonthButton setBackgroundColor:[UIColor redColor]];
    [previousMonthButton setImage:[UIImage imageNamed:@"Kal.bundle/kal_left_arrow.png"] forState:UIControlStateNormal];
    previousMonthButton.contentHorizontalAlignment = UIControlContentHorizontalAlignmentCenter;
    previousMonthButton.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
    [previousMonthButton addTarget:self action:@selector(showPreviousDay) forControlEvents:UIControlEventTouchUpInside];
    //[previousMonthButton setAutoresizingMask:UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleLeftMargin];
    [headerView addSubview:previousMonthButton];

    // Draw the selected month name centered and at the top of the view
    CGRect monthLabelFrame = CGRectMake((self.frame.size.width/2.0f) - (kMonthLabelWidth/2.0f), kHeaderVerticalAdjust, kMonthLabelWidth, kMonthLabelHeight);
    headerTitleLabel = [[UILabel alloc] initWithFrame:monthLabelFrame];
    headerTitleLabel.backgroundColor = [UIColor clearColor];
    headerTitleLabel.font = [UIFont boldSystemFontOfSize:22.f];
    headerTitleLabel.textAlignment = UITextAlignmentCenter;
    headerTitleLabel.textColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"Kal.bundle/kal_header_text_fill.png"]];
    headerTitleLabel.shadowColor = [UIColor whiteColor];
    headerTitleLabel.shadowOffset = CGSizeMake(0.f, 1.f);
    //[self setHeaderTitleText:[logic selectedMonthNameAndYear]];

    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"E, MMM dd, yyyy"];   
    headerTitleLabel.text = [dateFormatter stringFromDate:dataObj.activeDate];
    [headerView addSubview:headerTitleLabel];

    // Create the next month button on the right side of the view
    CGRect nextMonthButtonFrame = CGRectMake(self.frame.size.width - kChangeMonthButtonWidth, 0, kChangeMonthButtonWidth, kChangeMonthButtonHeight);
    UIButton *nextMonthButton = [[UIButton alloc] initWithFrame:nextMonthButtonFrame];
    nextMonthButton.frame = nextMonthButtonFrame;
    [nextMonthButton setImage:[UIImage imageNamed:@"Kal.bundle/kal_right_arrow.png"] forState:UIControlStateNormal];
    [nextMonthButton setBackgroundColor:[UIColor redColor]];
    nextMonthButton.contentHorizontalAlignment = UIControlContentHorizontalAlignmentCenter;
    nextMonthButton.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
    [nextMonthButton addTarget:self action:@selector(showFollowingDay) forControlEvents:UIControlEventTouchUpInside];
    //[nextMonthButton setAutoresizingMask:UIViewAutoresizingFlexibleWidth];
    [headerView addSubview:nextMonthButton];
}

UIView *headerView = [[UIView alloc] initWithFrame:CGRectMake(0.f, 0.f, self.frame.size.width, kHeaderHeight)];
    headerView.backgroundColor = [UIColor grayColor];
    [self addSubviewsToHeaderView:headerView];
    [headerView setAutoresizesSubviews:YES];
    [headerView setAutoresizingMask:UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight];
    [self addSubview:headerView];
    [self bringSubviewToFront:headerView]; 
```

如果我将`headerView`向下移动得更远，它将允许我选择红色区域中的任何位置并触发箭头选择器。但是，我希望它与 Apples 日历匹配并且位于导航栏下方。

任何人都知道为什么导航栏会阻止点击的顶部`headerView`？要清楚被阻止的 headerView 部分是从蓝线的底部向上。带有红色背景的`UIButton`动作与框架相关联，因此它应该触发事件，但似乎导航栏阻止了一半的`UIButton`接收点击。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T20:40:41.920

这种行为是由于 UIWindow 没有传播与导航栏框架一致的触摸。覆盖此行为的唯一方法是继承 UIWindow 并覆盖 hitTest: 方法。这将允许您检测该区域的触摸，并将它们转发给适当的响应者。

[这](http://dl.dropbox.com/u/1180680/NavBarHitTest.zip)是一个示例项目，显示了一个自定义 UIWindow 子类，它将响应屏幕上任何位置的触摸。

# java - 如何从 MS 读取到 JPS

> ID：10358414
> 
> 赞同：-1
> 
> 时间：2012-04-27T21:59:59.103
> 
> 标签：java, jsp

我创建了这个用作货币转换的 servlet。它可以转换三种货币（SAR、USD、Euro）。我有访问表，其中包含要读取转换值的字段。如何将此 servlet 转换为 JSP？..

```
 public class cur_exchange extends HttpServlet {
    String from = "";
    String to = "";
    double amount = 0.0;
    String message = "";
    double total = 0.0;
    @Override
    public void init() {
    try {
      Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
      System.out.println("JDBC driver loaded");
    }
    catch (ClassNotFoundException e) {
      System.out.println(e.toString());
    }
  }
    @Override
    public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

        display_form(false, request, response, false);
  }
    @Override
    public void doPost(HttpServletRequest request, HttpServletResponse response)throws ServletException, IOException {

        from = request.getParameter("from");
        to = request.getParameter("to");
        boolean error = false;
        try
        {
            amount = Double.parseDouble(request.getParameter("amount").toString());
        }
        catch (Exception e) {
                message = "Error: Please Type Valid Number To Convert";
                error = true;
            }
        if(from.equals(to))
        {
            total = amount;
            display_form(true, request, response, false);
        }
        else
        {
            try {
                  Connection con = DriverManager.getConnection("jdbc:odbc:MS Access Database");
                  System.out.println("got connection");
                  Statement s = con.createStatement();
                  String sql = "SELECT RATE FROM EXCHANGE_RATE WHERE FROM_CUR='"+from+"' AND TO_CUR='"+to+"'";
                  ResultSet rs = s.executeQuery(sql);
                  if (rs.next()) {
                      total = amount * Double.parseDouble(rs.getString(1));
                  }
                  else
                  {
                      s = con.createStatement();
                      sql = "SELECT RATE FROM EXCHANGE_RATE WHERE FROM_CUR='"+to+"' AND TO_CUR='"+from+"'";
                      rs = s.executeQuery(sql);
                      if (rs.next()) 
                      {
                            total = amount / Double.parseDouble(rs.getString(1));
                      }
                  }
            }
            catch (SQLException e) {
                message = "Error." + e.toString();
                error = true;
            }
            catch (Exception e) {
                message = "Error." + e.toString();
                error = true;
            }
        rs.close();
        s.close();
            con.close();

            if (error)
                display_form(true , request, response, true);
            else
                display_form(true, request, response, false);
        }
    }

    public void display_form(boolean populated, HttpServletRequest request, HttpServletResponse response, boolean error) throws ServletException, IOException {

        PrintWriter out = response.getWriter();
        out.println("<html>");
        out.println("<head>");
        out.println("</head>");
        out.println("<body>");
        out.println("<CENTER>");
        if (error)
            out.println("<h3 style='color:red'>"+message+"</h3><br /><br />");
        out.println("<h1 style='text-decoration:underline'>Currency Converter</h1>");
        out.println("<form action='cur_exchange.java' method='post'>");
        out.println("<br /><br /><label>From:");
        out.println("<select name='from'>");
        if (populated)
        {
            if (from.equals("SAR"))
            {
                out.println("<option selected='selected'>SAR</option>");
            }
            else
            {
                out.println("<option>SAR</option>");
            }
            if (from.equals("$"))
            {
                out.println("<option selected='selected'>$</option>");
            }
            else
            {
                out.println("<option>$</option>");
            }
            if (from.equals("EURO"))
            {
                out.println("<option selected='selected'>EURO</option>");
            }
            else
            {
                out.println("<option>EURO</option>");
            }
        }
        else
        {
            out.println("<option>SAR</option>");
            out.println("<option>$</option>");
            out.println("<option>EURO</option>");
        }
        out.println("</select></label>");
        out.println("<br /><br /><label>To:");
        out.println("<select name='to'>");
        if (populated)
        {
            if (to.equals("SAR"))
            {
                out.println("<option selected='selected'>SAR</option>");
            }
            else
            {
                out.println("<option>SAR</option>");
            }
            if (to.equals("$"))
            {
                out.println("<option selected='selected'>$</option>");
            }
            else
            {
                out.println("<option>$</option>");
            }
            if (to.equals("EURO"))
            {
                out.println("<option selected='selected'>EURO</option>");
            }
            else
            {
                out.println("<option>EURO</option>");
            }
        }
        else
        {
            out.println("<option>SAR</option>");
            out.println("<option>$</option>");
            out.println("<option>EURO</option>");
        }
        out.println("</select></label><br />");
        if(populated)
        {
            out.println("<br /><label>Amount: <input name='amount' type='text' size='25' maxlength='30' id='amount' value='"+amount+"' /></label><br />");
        }
        else
        {
            out.println("<br /><label>Amount: <input name='amount' type='text' size='25' maxlength='30' id='amount' /></label><br />");
        }
        if(populated)
        {
            out.println("<br /><label>Result: <input name='result' type='text' size='25' maxlength='30' id='result' disabled='disabled' value='"+total+"'/></label><br />");
        }
        else
        {
            out.println("<br /><label>Result: <input name='result' type='text' size='25' maxlength='30' id='result' disabled='disabled' /></label><br />");
        }
        out.println("<br /><input type='submit' value='Convert'/>");
        out.println("</form>");
        out.println("</CENTER>");
        out.println("</body>");
        out.println("</html>");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T22:03:50.783

1.  阅读这些[教程之一](https://www.google.com/search?rlz=1C1CHFX_enUS459US459&aq=2&oq=JSP%20tutorial&sourceid=chrome&ie=UTF-8&q=jsp%20tutorial%20for%20beginners)
2.  重写为 JSP 文件。

# c# - 以编程方式解除事件处理程序

> ID：10358416
> 
> 赞同：1
> 
> 时间：2012-04-27T22:00:23.690
> 
> 标签：c#, winforms, events, event-handling, textchanged

我想有条件地取消挂钩事件处理程序。这是正确的方法吗：

```
tb.TextChanged -= textBoxIntName_TextChanged; 
```

?

这似乎是明智的，因为需要连接它：

```
tb.TextChanged += textBoxIntName_TextChanged; 
```

...但似乎与“Delphi 方式”相对应的东西也更有意义（但唉，它不能编译）：

```
tb.TextChanged = nil; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T22:02:27.420

您不能分配事件 - 只有附加 (+=) 和删除 (-=) 操作可用于客户端。

[在此处](http://msdn.microsoft.com/en-us/library/awbftdfh.aspx)阅读有关活动的更多信息。

C#规范[还说](http://msdn.microsoft.com/en-us/library/aa664454%28v=vs.71%29.aspx)：

> 由于 += 和 -= 是在声明事件的类型之外的事件上允许的唯一操作，因此外部代码可以添加和删除事件的处理程序，但不能以任何其他方式获取或修改事件处理程序的底层列表.

# ios - 在代码中使用 tintColor 绘制像 UITabBar 这样的渐变

> ID：10358419
> 
> 赞同：4
> 
> 时间：2012-04-27T22:00:43.423
> 
> 标签：ios, colors, drawing, gradient, drawrect

UITabBar 默认绘制一个微妙的渐变：

![UITabBar 渐变黑](../Images/06fce15900a7cfc74b9266b2b120dbae.png)

我想用任何给定的 tintColor 在我的代码中复制这种外观和感觉。明确一点：我不想在 UITabBar 上设置 tintColor（从 iOS 5 开始可以），我想在我自己的 UIView 中绘制渐变。

我知道如何绘制渐变，我的问题是如何从 tintColor 中导出渐变的颜色。我正在考虑获取颜色的亮度并生成具有不同亮度设置的其他颜色，但这似乎效果不佳，并且看起来不像我希望的那样好。

![自定义绘制渐变](../Images/0278d81d5e1285674411dc25b2c19ac3.png)

我需要我的开源 TabBarController 的代码：[https ://github.com/NOUSguide/NGTabBarController](https://github.com/NOUSguide/NGTabBarController)

这是我当前创建渐变的代码：

```
UIColor *baseColor = self.tintColor;
CGFloat hue, saturation, brightness, alpha;

// TODO: Only works on iOS 5
[baseColor getHue:&hue saturation:&saturation brightness:&brightness alpha:&alpha];

// That's the question, how to compute the colors ...
NSArray *colors = [NSArray arrayWithObjects:
                   [UIColor colorWithHue:hue saturation:saturation brightness:brightness+0.2 alpha:alpha],
                   [UIColor colorWithHue:hue saturation:saturation brightness:brightness+0.15 alpha:alpha],
                   [UIColor colorWithHue:hue saturation:saturation brightness:brightness+0.1 alpha:alpha],
                   baseColor, nil];
NSUInteger colorsCount = colors.count;
CGColorSpaceRef colorSpace = CGColorGetColorSpace([[colors objectAtIndex:0] CGColor]);

NSArray *locations = [NSArray arrayWithObjects:[NSNumber numberWithFloat:0.0], 
                      [NSNumber numberWithFloat:0.25], 
                      [NSNumber numberWithFloat:0.49], 
                      [NSNumber numberWithFloat:0.5], nil];
CGFloat *gradientLocations = NULL;
NSUInteger locationsCount = locations.count;

gradientLocations = (CGFloat *)malloc(sizeof(CGFloat) * locationsCount);

for (NSUInteger i = 0; i < locationsCount; i++) {
    gradientLocations[i] = [[locations objectAtIndex:i] floatValue];
}

NSMutableArray *gradientColors = [[NSMutableArray alloc] initWithCapacity:colorsCount];
[colors enumerateObjectsUsingBlock:^(id object, NSUInteger index, BOOL *stop) {
    [gradientColors addObject:(id)[(UIColor *)object CGColor]];
}];

_gradientRef = CGGradientCreateWithColors(colorSpace, (__bridge CFArrayRef)gradientColors, gradientLocations);

if (gradientLocations) {
    free(gradientLocations);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T22:03:36.947

这是一个很好的教程：[http](http://www.raywenderlich.com/2079/core-graphics-101-shadows-and-gloss) ://www.raywenderlich.com/2079/core-graphics-101-shadows-and-gloss 看看有光泽效果的部分。

也在这里：[http ://cocoawithlove.com/2008/09/drawing-gloss-gradients-in-coregraphics.html](http://cocoawithlove.com/2008/09/drawing-gloss-gradients-in-coregraphics.html)

还有一个完整的代码示例：[http ://www.mlsite.net/blog/?page_id=372](http://www.mlsite.net/blog/?page_id=372)

# opengl-es - 使用 OpenGL-ES 2.0 和 GLSL 1.0 的太阳能系统

> ID：10358421
> 
> 赞同：1
> 
> 时间：2012-04-27T22:00:56.700
> 
> 标签：opengl-es, glsl, opengl-es-2.0

我正在尝试使用 OpenGLES 2.0 和 GLSL 1.0 实现经典的太阳系（仅限太阳和地球 - 立方体代替球体）应用程序。我不知道如何

*   写出平移和旋转矩阵，得到地球立方体围绕太阳旋转。
*   矩阵乘法的顺序应该是什么。我正在顶点着色器中进行所有矩阵运算，并让两个立方体分别沿 x 轴和 y 轴旋转。

    ![地球和太阳以立方体的形式](../Images/8da3da490de49e505d466339c373aec8.png)

但是在让地球立方体围绕太阳立方体旋转时面临问题:-(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T20:48:51.420

首先你必须了解 Matrix ES 1.X 更好如果你不知道确切 1\. 平移矩阵是 1000 0100 0010 xyz1 改变 X 和 Z 值 2\. 角度矩阵是 cs 00 -sc 00 0 0 1 0 0 0 0 1 也改变 X & Y 轴

然后在代码中操作martix（不是着色器代码），只需将matirx给着色器的制服每个对象

# authentication - CouchDB cookie 是否有滑动到期时间？

> ID：10358424
> 
> 赞同：16
> 
> 时间：2012-04-27T22:01:02.800
> 
> 标签：authentication, cookies, couchdb

我计划为我的应用程序使用 CouchDB 的内置 cookie 身份验证（请注意，这不是 CouchApp，我在客户端和数据库之间使用 Web 服务器）。

因此，当用户首次使用其凭据登录时：

*   凭据通过 Web 服务器从 Web 客户端发送到 CouchDB
*   CouchDB 验证凭据并返回`Set-Cookie`标头
*   这个标头被发送到 Web 客户端，这意味着所有后续的数据库操作请求都只是通过`Cookie`Web 服务器将标头传递给 CouchDB。

虽然我已经能够确定：

> 默认情况下，您可以继续使用 [cookie] 令牌 10 分钟。10 分钟后，您需要再次验证您的用户。令牌生命周期可以使用 couch_httpd_auth 配置部分中的超时（以秒为单位）设置进行配置。

我不清楚这 10 分钟的时间段是否（或可以设置为）滑动窗口。

我的意思是；如果用户继续使用应用程序整整 10 分钟（在每个请求上发送 cookie），cookie 是否会自动重新设置（以[类似于 .NET 中的 FormsAuthentication cookie 的方式](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.slidingexpiration.aspx)）直到一段时间不*活动*10分钟？

**使用的参考文献**

*   [http://guide.couchdb.org/draft/security.html#cookies](http://guide.couchdb.org/draft/security.html#cookies)
*   [http://wiki.apache.org/couchdb/Security_Features_Overview](http://wiki.apache.org/couchdb/Security_Features_Overview)

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-28T01:35:26.170

对于浏览器，（可配置的）10 分钟周期**是**一个滑动窗口。CouchDB 每次响应请求时，都会将 cookie 更新为新值，从而有效地刷新登录。

对于客户端，您必须记住在看到`Set-Cookie`标头时重置 cookie 值（或在您的情况下将其传递给您自己的客户端）。

例如，我有一个短暂的超时（30 秒）：

```
$ curl http://admin:admin@localhost:5984/_config/couch_httpd_auth/timeout
"30" 
```

接下来我会：

1.  登录
2.  稍等片刻
3.  在超时之前检查我与 cookie 的会话
4.  等待超时
5.  超时后再次检查我与 cookie 的会话
6.  （快速）使用步骤 3 中设置的新 cookie CouchDB 检查我的会话

注意第一个确认有`{"name":"me"}`（我已登录）；第二个有`{"name":null}`（我已注销）；但第三个又`{"name":"me"}`出现了（由于使用了更新的 cookie，我仍然登录）。

```
$ curl -X POST -i localhost:5984/_session -d name=me -d password=secret
HTTP/1.1 200 OK
Set-Cookie: AuthSession=bWU6NEY5QjQ3QTA6Ao6zetUZUxkno37ULd2qdRRjmsc; Version=1; Path=/; HttpOnly
Server: CouchDB/1.2.0 (Erlang OTP/R15B)
Date: Sat, 28 Apr 2012 01:28:00 GMT
Content-Type: text/plain; charset=utf-8
Content-Length: 35
Cache-Control: must-revalidate

{"ok":true,"name":"me","roles":[]}

$ sleep 20

$ curl -i localhost:5984/_session -H Cookie:AuthSession=bWU6NEY5QjQ3QTA6Ao6zetUZUxkno37ULd2qdRRjmsc
HTTP/1.1 200 OK
Set-Cookie: AuthSession=bWU6NEY5QjQ3QkM6WonDdsAdO8p7QUlLWCZQXVAfcvU; Version=1; Path=/; HttpOnly
Server: CouchDB/1.2.0 (Erlang OTP/R15B)
Date: Sat, 28 Apr 2012 01:28:28 GMT
Content-Type: text/plain; charset=utf-8
Content-Length: 165
Cache-Control: must-revalidate

{"ok":true,"userCtx":{"name":"me","roles":[]},"info":{"authentication_db":"_users","authentication_handlers":["oauth","cookie","default"],"authenticated":"cookie"}}

$ sleep 10

$ curl -i localhost:5984/_session -H Cookie:AuthSession=bWU6NEY5QjQ3QTA6Ao6zetUZUxkno37ULd2qdRRjmsc
HTTP/1.1 200 OK
Server: CouchDB/1.2.0 (Erlang OTP/R15B)
Date: Sat, 28 Apr 2012 01:28:43 GMT
Content-Type: text/plain; charset=utf-8
Content-Length: 140
Cache-Control: must-revalidate

{"ok":true,"userCtx":{"name":null,"roles":[]},"info":{"authentication_db":"_users","authentication_handlers":["oauth","cookie","default"]}}

$ curl -i localhost:5984/_session -H Cookie:AuthSession=bWU6NEY5QjQ3QkM6WonDdsAdO8p7QUlLWCZQXVAfcvU
HTTP/1.1 200 OK
Set-Cookie: AuthSession=bWU6NEY5QjQ3RDA69pqrNVd-ClZ7_v4SkcghdZRRhCs; Version=1; Path=/; HttpOnly
Server: CouchDB/1.2.0 (Erlang OTP/R15B)
Date: Sat, 28 Apr 2012 01:28:48 GMT
Content-Type: text/plain; charset=utf-8
Content-Length: 165
Cache-Control: must-revalidate

{"ok":true,"userCtx":{"name":"me","roles":[]},"info":{"authentication_db":"_users","authentication_handlers":["oauth","cookie","default"],"authenticated":"cookie"}} 
```

在 CouchDB 1.2.0 及更高版本中，您可以设置`_config/couch_httpd_auth/allow_persistent_cookies`为`"true"`，它使事情更容易看到。cookie 将有一个明显的“过期”标志，您可以看到它始终设置为当前时间加上您的超时值。

# php - 检测 SWF 文件是否进行网络调用

> ID：10358426
> 
> 赞同：1
> 
> 时间：2012-04-27T22:01:04.970
> 
> 标签：php, flash

有没有办法在上传（可能是服务器端？）时测试/检测用户闪存文件 (SWF) 是否使用任何网络操作或动态提取内容？我正在尝试将用户限制为只能使用其 SWF 文件中的本地化文件和代码。

我正在考虑可能是服务器端（linux）SWF反编译器，我可以搜索SWF的Action-script以查找任何未经批准的功能，如loadMovie或ExternalInterface

# asp.net-mvc - 具有预设值的 Html.HiddenFor

> ID：10358429
> 
> 赞同：7
> 
> 时间：2012-04-27T22:01:22.147
> 
> 标签：asp.net-mvc

由于`Ethan Brown` 我想`Html.HiddenFor`用预设值设置我的助手的值，这部分被解决了这是我的代码：

```
<%: Html.HiddenFor(model => model.idv, new { @value = ViewBag.id })%>
<%: Html.HiddenFor(model => model.etat, new { @value = "false" })%> 
```

但是当执行我的代码时，我得到 model.idv 和 modele.etat 为空的错误。
这是第二部分直到现在还没有解决：
这是我的行动：

```
public ActionResult Reserver(string id)

    {
        var model = new Models.rservation
        {
            idv = id,
            etat = false
        };
        return View(model);
    }

[HttpPost]
        public ActionResult Reserver(Models.rservation model)
        {
            if (ModelState.IsValid)
            {
                entity.AddTorservation(model);
                entity.SaveChanges();
                return View();
            }
            else
            {

                return View(model);
            }
        } 
```

这是我的视图页面：

```
<% using (Html.BeginForm("Reserver", "Home", FormMethod.Post, new { @class = "search_form" })) { %>
//some code textbox to fill
<input type="submit" value="Create" />
<% } %> 
```

因此，当我单击提交按钮时，model.idv 再次设置为空值

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-27T22:17:59.300

设置预设值的正确方法是通过模型将其传递（如果您设置它，MVC 似乎会忽略“值”参数）。为了完成你正在寻找的东西，在你的行动中：

```
public ActionResult MyAction() {
  var model = new MyModel {
    idv = myPresetId,
    etat = false
  };
  return View( model );
} 
```

那么你不需要在你的视图中做任何事情，除了：

```
<%: Html.HiddenFor( model => model.idv ) %>
<%: Html.HiddenFor( model => model.etat ) %> 
```

# web - 网站目录结构和文件路径

> ID：10358439
> 
> 赞同：0
> 
> 时间：2012-04-27T22:02:26.540
> 
> 标签：web, web-deployment

我正在尝试制作一个具有如下目录结构的小型网站：

```
rootURL/
    landing/
    aboutME/
    common/
    app1name/
    app2name/
    etc... 
```

每个子文件夹中都有 css/ 、 js/ 和 html/ 目录，因此我将页面和应用程序分开，并将文件类型分开，这对我来说似乎很明智。

我想在有人访问 rootURL.com 时加载的根页面是

```
rootURL/landing/html/landing.htm 
```

1) 这是通常可以在 Web 服务器上配置的东西吗？

2）是否可以引用不同目录中css和脚本文件的路径？例如我的 lanidng 页面 rootURL/landing/html/landing.htm ，它可以使用该行

```
<script type="text/javascript" src="rootURL/common/jQuery.js"></script> 
```

如果没有，还有其他方法可以访问其他目录中的文件吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T22:06:34.573

所有这些都是可能的。对于你的登陆页面，要么必须在根目录中有一个重定向页面，要么使用 URL 重写，或者只是将你的主页放在根目录中。

要引用路径，您可以使用

```
<script type="text/javascript" src="/path/to/file.js"> 
```

或者

```
<script type="text/javascript" src="../relative/path/to/file.js"> 
```

或者

```
<script type="text/javascript" src="http://rootURL.com/path/to/file.js"> 
```

# android - 从 sqlite 数据库设置背景图像

> ID：10358442
> 
> 赞同：1
> 
> 时间：2012-04-27T22:03:02.520
> 
> 标签：android, sqlite

在 Android 中，我想通过从数据库中检索图像来设置背景图像。我已经创建了数据库并将图像作为 BLOB 放入。数据库在我的资产文件夹中，应用程序可以成功访问和查询数据库（但这可能是因为我还没有访问图像）。但现在我不知道从这里去哪里。我想我已经完成了类似的代码：

```
bgview = (View) findViewById(R.id.bg_display);
bgview.setBackgroundResource(bgimage); 
```

但我不知道如何开始它......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T07:35:19.407

只需在数据库中存储图像的路径而不是图像，您可以检索路径并将其设置为背景。使用它您可以摆脱转换为字节的麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T22:35:43.723

你可能会创建

```
InputStream is = new ByteArrayInputStream(TheBytesOfTheBlobYouGotFromDB); 
```

将其保存到文件中

尝试 { OutputStream out = new FileOutputStream(new File(FileName));

```
int read = 0;
byte[] bytes = new byte[1024];

while ((read = is.read(bytes)) != -1) { out.write(bytes, 0, read); }

is.close();
out.flush();
out.close();
} catch (IOException e) {} 
```

然后使用解决方案将文件设置为背景： [将位图作为视图的背景](https://stackoverflow.com/questions/3850395/place-a-bitmap-as-background-of-a-view)

```
Matrix Mat = new Matrix();

/// FileName is the file where you saved the 'is'
Bitmap Source = BitmapFactory.decodeFile(FileName);
Bitmap Destination = Bitmap.createScaledBitmap( Source, DisplayWidth, DisplayHeight, true );

Source = Bitmap.createBitmap( Destination, 0, 0, Destination.getWidth(), Destination.getHeight(), Mat, true );

/// Use the 'Source' here
bgview.setBackgroundResource(Source); 
```

# silverlight - 这是silverlight错误还是我做错了什么？网格对齐

> ID：10358443
> 
> 赞同：2
> 
> 时间：2012-04-27T22:03:05.980
> 
> 标签：silverlight, xaml

我有一个有 14 列的网格。如果我在第一个网格的第一列中放置另一个 28 列的网格并将其跨越 14，它将每列分成两部分。但是，如果我创建 42 列（3x14）的网格，它不会将每一列拆分为三个 eaqul 部分。

这个有效： ![在此处输入图像描述](../Images/da73ad0c12f2b45b561cb919a6ae51cc.png)

这不起作用（不均分）： ![在此处输入图像描述](../Images/0b0e5484895b2ddc6f1c7e5892bbc8f6.png)

```
<UserControl
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
x:Class="SilverlightApplication1.MainPage"
Width="640" Height="480">
<Grid x:Name="LayoutRoot" Background="White">
    <Grid x:Name="AllWhiteKeys" Margin="0,0,0,200">         
        <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition/>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>
        <Rectangle Name="WhiteKey1" Grid.RowSpan="3" Grid.Column="0" Fill="White" StrokeThickness="1" Stroke="Black" RadiusX="8" RadiusY="8"/>
        <Rectangle Name="WhiteKey2" Grid.RowSpan="3" Grid.Column="1" Fill="White" StrokeThickness="1" Stroke="Black" RadiusX="8" RadiusY="8"/>
        <Rectangle Name="WhiteKey3" Grid.RowSpan="3" Grid.Column="2" Fill="White" StrokeThickness="1" Stroke="Black" RadiusX="8" RadiusY="8"/>
        <Rectangle Name="WhiteKey4" Grid.RowSpan="3" Grid.Column="3" Fill="White" StrokeThickness="1" Stroke="Black" RadiusX="8" RadiusY="8"/>
        <Rectangle Name="WhiteKey5" Grid.RowSpan="3" Grid.Column="4" Fill="White" StrokeThickness="1" Stroke="Black" RadiusX="8" RadiusY="8"/>
        <Rectangle Name="WhiteKey6" Grid.RowSpan="3" Grid.Column="5" Fill="White" StrokeThickness="1" Stroke="Black" RadiusX="8" RadiusY="8"/>
        <Rectangle Name="WhiteKey7" Grid.RowSpan="3" Grid.Column="6" Fill="White" StrokeThickness="1" Stroke="Black" RadiusX="8" RadiusY="8"/>
        <Rectangle Name="WhiteKey8" Grid.RowSpan="3" Grid.Column="7" Fill="White" StrokeThickness="1" Stroke="Black" RadiusX="8" RadiusY="8"/>
        <Rectangle Name="WhiteKey9" Grid.RowSpan="3" Grid.Column="8" Fill="White" StrokeThickness="1" Stroke="Black" RadiusX="8" RadiusY="8"/>
        <Rectangle Name="WhiteKey10" Grid.RowSpan="3" Grid.Column="9" Fill="White" StrokeThickness="1" Stroke="Black" RadiusX="8" RadiusY="8"/>
        <Rectangle Name="WhiteKey11" Grid.RowSpan="3" Grid.Column="10" Fill="White" StrokeThickness="1" Stroke="Black" RadiusX="8" RadiusY="8"/>
        <Rectangle Name="WhiteKey12" Grid.RowSpan="3" Grid.Column="11" Fill="White" StrokeThickness="1" Stroke="Black" RadiusX="8" RadiusY="8"/>
        <Rectangle Name="WhiteKey13" Grid.RowSpan="3" Grid.Column="12" Fill="White" StrokeThickness="1" Stroke="Black" RadiusX="8" RadiusY="8"/>
        <Rectangle Name="WhiteKey14" Grid.RowSpan="3" Grid.Column="13" Fill="White" StrokeThickness="1" Stroke="Black" RadiusX="8" RadiusY="8"/>

        <Grid Grid.RowSpan="2" Grid.Column="0" Grid.ColumnSpan="14">
            <Grid.ColumnDefinitions>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>

                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>

                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
                <ColumnDefinition></ColumnDefinition>
            </Grid.ColumnDefinitions>
        </Grid>
    </Grid>
    </Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T09:36:26.867

这只是一个舍入误差。

您的总宽度为 640，分为 42 列，每列 15.23 像素，但是当它们计数时，列会四舍五入到最近的像素，因此列会轻微地前后移动。

如果您将设计宽度更改为 42 的倍数（例如 630），它就会消失。请参见下面的示例 (630 * 480)：

![在此处输入图像描述](../Images/ab72cf7498a1deb5b1be537eca1dcb24.png)

正如@Joe White 提到的，您可以使用 关闭舍入`UseLayoutRounding`，但如果您希望它清晰明了，您需要开始考虑基于像素的尺寸（例如早期视频游戏开发的好日子）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T12:59:43.147

As @HiTechMagic said, this is most likely a rounding error. By default, Silverlight rounds all positions to the nearest integer.

If you want things to line up exactly, you can set [`UseLayoutRounding`](http://msdn.microsoft.com/en-us/library/system.windows.uielement.uselayoutrounding%28v=vs.95%29.aspx) to False on your outer `Grid`.

If you do this, be aware that some things will be at fractional-pixel positions, so images will look blurry and backgrounds won't match up seamlessly (which is probably why layout rounding is on by default). If you're trying to make a piano keyboard, though, you'll probably be fine -- the only elements with backgrounds would be the black keys, and no two of those are ever adjacent.

# c++ - 提升::数组 如何将 2 作为变量传递

> ID：10358447
> 
> 赞同：1
> 
> 时间：2012-04-27T22:03:32.483
> 
> 标签：c++, boost

我正在使用格式为 < char, const std::size_t > 的 boost::array

```
void test(const std::size_t XXX)
{
    boost::shared_ptr<boost::array<unsigned char, XXX>> buf(new boost::array<unsigned char, max_size>);
    .
    .
    .
};
test(100);
test(20); 
```

这是领先的

到错误：

> 错误 C2971：“boost::array”：模板参数“N”：“size”：局部变量不能用作非类型参数

你能给我一个提示如何传递 boost::array 第二个参数吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T22:07:14.577

模板在编译期间被实例化，因此在程序运行之前必须知道它们的参数。

这意味着您不能将变量用作模板参数。这样的参数必须是常量表达式（常量变量是不够的），具有外部链接的函数或对象的地址，或者静态类成员的地址。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T22:10:59.240

第二个参数必须是编译时间常数。

您可以制作`test()`一个模板功能：

```
template <size_t max_size> void test()
{
    boost::shared_ptr<boost::array<unsigned char, max_size>> buf(
        new boost::array<unsigned char, max_size>);
}
test<100>();
test<20>(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T22:13:31.683

您不能将非编译时值用作模板参数，因为模板必须在编译时实例化。

std::array 和 boost::array 只能用于静态大小的数组。如果您需要一个动态大小的数组，您可以使用 std::vector 代替。

通常你不需要持有一个带有 shared_ptr 的向量，只需直接持有它：

```
void test(const std::size_t XXX)
{
    std::vector<char> buf(XXX);
    .
    .
    .
};
test(100);
test(20); 
```

* * *

或者像 hmjd 说的你可以传递 XXX 一个编译时间常数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T22:06:58.263

模板值必须是编译时常量，即字面量`constexpr`或`static const`变量。

# java - Java - 创建一个订单链接列表，不知道我是如何获得无限递归的

> ID：10358451
> 
> 赞同：-4
> 
> 时间：2012-04-27T22:03:43.830
> 
> 标签：java, recursion, stack-overflow

运行代码时出现库存溢出错误，但我不知道问题出在哪里。有人可以帮我解决这个问题吗？

这是给我错误的方法。我很确定这与我以递归方式插入节点的方式有关，但我不知道我做错了什么。

此方法的目的是在节点链接中找到正确的位置并将新项目插入那里。节点需要保持升值。我希望这有助于更好地解释目的。谢谢。

```
public class OrderedList< T extends Comparable<T> > {

    private ListNode<T> firstNode;
    private ListNode<T> lastNode;
    private String name; // the name is used in printing

    // constructor creates an empty ordered list with "ordered list" as the name
    public OrderedList() {   
        this( "ordered list" );    
    }

    // constructor creates an empty ordered list with a name
    public OrderedList( String listName ) {        
        name = listName;
        firstNode = lastNode = null;    
    }

    // insert an item into the right position of the ordered list
    public void insert( T insertItem ) {       
        if (isEmpty()) {           
            firstNode = lastNode = new ListNode<T>(insertItem);           
        }else {               
            if (insertItem.compareTo(firstNode.getData()) <= 0) {               
                firstNode = new ListNode<T>(insertItem, firstNode);               
            }else {                
                if (firstNode.equals(lastNode)) {                    
                    lastNode = new ListNode<T>(insertItem);                   
                }else {
                    T store = firstNode.getData();
                    firstNode = firstNode.getNext();                   
                    insert(insertItem);                    
                    firstNode.setNext(firstNode);
                    firstNode.setData(store);
                }
            }           
        }
    }

    public boolean isEmpty() {
        return firstNode == null;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T22:09:46.933

在最后一个`else`区块中，您`insert`再次调用。所以这是一个递归函数，递归函数原则上容易受到stackoverflows的攻击。

如果你输入一些 println 语句和一个每步递增的计数器，你就可以看到发生了什么。

```
else {    
            T store = firstNode.getData ();    
            firstNode = firstNode.getNext ();    
            System.out.println ("depth: " + ++depth);
            insert (insertItem);    
            --depth
            firstNode.setNext (firstNode);
            firstNode.setData (store);    
        } 
```

深度是用于调试目的的属性或静态变量。

# ruby-on-rails - 将秒转换为小数小时（半小时是 0.50 而不是 30）

> ID：10358455
> 
> 赞同：3
> 
> 时间：2012-04-27T22:03:58.443
> 
> 标签：ruby-on-rails, ruby

我有以下方法可以将持续时间以秒为单位转换为小时。例如，2 小时半将产生 2.30，另外，2 小时 15 分钟将产生 2.15。所以它输出小时数和分钟数。

我想修改方法以显示 2.5 或 2.25 而不是上面的。我需要这样做才能进行计算。例如，如果有 30 美元/小时的工资并且员工工作了 10 个半小时，我需要乘以`30*10.5`而不是`30*10.30`.

```
def hour_quantity
  unless self.duration.blank?
    hours = (self.duration/60)/60
    minutes = (self.duration/60) % 60
    hours.to_s + '.' + minutes.to_s
  end
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T22:10:39.193

像往常一样，乔恩是正确的。只需使用浮点除法：

```
def hour_quantity
  duration / 3600.0
end 
```

显示时，您可能需要四舍五入：

```
puts '%.2f' % hour_quantity 
```

这将始终为您提供 2 个小数位（例如“2.00”、“2.25”、“2.50”）。或者：

```
 puts '%g' % hour_quantity
  puts '%g' % 2.0           #=> "2"
  puts '%g' % 2.25          #=> "2.25"
  puts '%g' % 2.4999999     #=> "2.5" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-17T11:12:55.387

从**Rails 6.1.0**开始，您可以：

```
1800.seconds.in_hours # => 0.5
15.minutes.in_hours # => 0.25 
```

这些是新引入的方法：[in_seconds](https://edgeapi.rubyonrails.org/classes/ActiveSupport/Duration.html#method-i-in_seconds)、[in_minutes](https://edgeapi.rubyonrails.org/classes/ActiveSupport/Duration.html#method-i-in_minutes)、[in_hours](https://edgeapi.rubyonrails.org/classes/ActiveSupport/Duration.html#method-i-in_hours)、[in_days](https://edgeapi.rubyonrails.org/classes/ActiveSupport/Duration.html#method-i-in_days)、[in_weeks](https://edgeapi.rubyonrails.org/classes/ActiveSupport/Duration.html#method-i-in_weeks)、[in_months](https://edgeapi.rubyonrails.org/classes/ActiveSupport/Duration.html#method-i-in_months)和[in_years](https://edgeapi.rubyonrails.org/classes/ActiveSupport/Duration.html#method-i-in_years)。

# ms-access - 访问 sql Distinct Replace

> ID：10358461
> 
> 赞同：0
> 
> 时间：2012-04-27T22:04:29.963
> 
> 标签：ms-access

我使用访问数据。

我想做类似的事情：

```
select Distinct Replace(colFullName, Name, '') from tableInfo 
```

但明显和替换不起作用。

怎么做？

# algorithm - TSP 变体的近似算法，固定起点和终点，但起点 + 每个顶点的多次访问允许

> ID：10358463
> 
> 赞同：9
> 
> 时间：2012-04-27T22:04:32.740
> 
> 标签：algorithm, graph-theory, graph-algorithm, traveling-salesman, approximation

注意：由于旅行不会在它开始的同一个地方结束，而且只要我仍然访问所有点，每个点都可以多次访问，这不是真正的 TSP 变体，而是我之所以这样说是因为缺乏对问题的更好定义。

所以..

假设我要去一次有 n 个兴趣点的徒步旅行。这些点都由远足径相连。我有一张地图，显示所有路径及其距离，给我一个有向图。

我的问题是如何估计从 A 点开始并访问所有 n 个兴趣点的旅行，同时在除我开始的点之外的任何地方结束旅行，并且我希望旅行尽可能短。

由于徒步旅行的性质，我认为这很遗憾不是一个对称问题（或者我可以将我的不对称图转换为对称图吗？），因为从高海拔到低海拔显然比相反的方式更容易。

此外，我相信它必须是一种适用于非度量图的算法，其中不满足三角形不等式，因为从 a 到 b 到 c 可能比走一条从 a 到 c 的漫长而奇怪的道路更快直接地。我确实考虑过三角不等式是否仍然成立，因为对于我访问每个点的次数没有限制，只要我访问所有这些点，这意味着我总是会选择从 a 到 c 的两条不同路径中最短的一条，因此永远不会走上漫长而怪异的道路。

我相信我的问题比 TSP 容易，所以那些算法不适合这个问题。我考虑过使用最小生成树，但我很难说服自己它们可以应用于非度量非对称有向图。

我真正想要的是一些关于如何提出近似算法的指示，该算法将在所有 n 点中找到接近最优的路径

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T17:02:06.220

为了将您的问题简化为非对称 TSP，请引入一个新节点 u 并制作从 u 到 A 以及从除 A 之外的所有节点到 u 的长度为 L 的弧，其中 L 非常大（足够大以至于没有最优解重新访问 u）。从游览中删除 u 以获得从 A 通过所有其他节点到某个其他节点的路径。不幸的是，这种减少只是附加地保留了目标，这使得近似保证因常数因子而变得更糟。

Evgeny 指出的缩减目标*是非度量*对称 TSP，因此缩减对您没有用处，因为已知的近似值都需要度量实例。假设轨迹的集合形成一个平面图（或接近它），由于[Gharan 和 Saberi](http://www.stanford.edu/~saberi/atsp2.pdf)存在一个常数因子近似，不幸的是，这可能很难实现，并且在实践中可能无法给出合理的结果。[Frieze、Galbiati 和 Maffioli](http://www.math.cmu.edu/%7Eaf1p/Texfiles/TSPapprox.pdf)给出了一般图的简单对数因子近似。

如果有合理数量的路径，分支定界可能能够为您提供最佳解决方案。G&S 和分支定界都需要求解 ATSP 的 Held-Karp 线性程序，这本身对于评估其他方法可能很有用。对于实践中出现的许多对称 TSP 实例，它给出了最优解决方案成本的下限，在真实值的 10% 以内。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-28T11:07:13.947

您可以将此问题简化为具有 n+1 个顶点的普通 TSP 问题。为此，请获取节点“A”和所有兴趣点，并计算每对这些点之间的最短路径。您可以在原始图上使用所有对最短路径算法。或者，如果 n 明显小于原始图大小，则对这些 n+1 个顶点使用单源最短路径算法。您还可以将所有路径的长度（以“A”结尾）设置为某个常数，大于任何其他路径，从而允许在任何地方结束行程（这可能仅适用于 TSP 算法，寻找往返路径） .

结果，您得到了一个完整的图表，它是度量的，但仍然是不对称的。您现在只需要解决此图上的正常 TSP 问题。如果您想将此非对称图转换为对称图，[维基百科](http://en.wikipedia.org/wiki/Travelling_salesman_problem#Asymmetric_TSP)解释了如何做到这一点。

# javascript - 使用主干视图引用窗口变量

> ID：10358464
> 
> 赞同：1
> 
> 时间：2012-04-27T22:04:33.420
> 
> 标签：javascript, backbone.js

升级到backbone.js 0.9.2 后，我在让主干代码正常工作方面遇到了很多问题。我遇到的一个问题是在窗口中引用一个变量。它工作得很好，就像下面的 0.5.3 中的精简代码

没关系 this.namespace.blaaaa 位，基本上我只有一个命名空间包装器，负责将对象放在命名空间中。我在这里追求的是为什么我不能从页面视图内部的 PageDisplay 视图内部访问 myApp。看到 myApp 是一个窗口变量，我不应该通过直接调用它来访问它。

**myApp.js**

```
$(window).load(function() {
    myApp = new Page({ el: $("body"), scroll: $(window).scrollTop() });
}) 
```

**页面.js**

```
this.namespace.Page = Backbone.View.extend({
    initialize: function( ) {
        this.pageDisplay = new PageDisplay({ 
            el: $("#showBrowser")
        });
    }
}); 
```

**页面显示.js**

```
this.namespace.PageDisplay = Backbone.View.extend({
    initialize: function( ) {
        myApp.model.set("bla");
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T22:30:15.013

我猜你的`$(window).load()`处理程序：

```
$(window).load(function() {
    myApp = new Page({ el: $("body"), scroll: $(window).scrollTop() });
}) 
```

将失败，因为在调用它时没有`Page`范围，并且充其量`myApp`会`undefined`在您稍后尝试时`myApp.model.set()`出现。您在命名空间内定义一个`Page`：

```
this.namespace.Page = Backbone.View.extend({ /*...*/ }); 
```

并且因为`this`大概是`window`在那种情况下，你会有`namespace.Page`但没有`Page`. 您将在`namespace.Page`初始化函数中遇到同样的问题：

```
this.pageDisplay = new PageDisplay({ 
    el: $("#showBrowser")
}); 
```

你会有`namespace.PageDisplay`但没有`PageDisplay`。

您应该参考`namespace.Page`and`namespace.PageDisplay`而不是简单的`Page`and `PageDisplay`。我还建议您`this`在定义视图时放弃，这只会导致混淆并打开错误窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T22:50:09.163

我会把窗户当作一个视图，因为它就是这样。然后，您将拥有与窗口相同的行为，但不需要渲染方法（除非有人能想到一个？）。这样，您可以运行这些事件以离开窗口并返回，或调整整个窗口的大小。这是我所做的：

```
var WindowView = Backbone.View.extend({
    "el": window,
    "events": {
        "resize": "onResize"
        "focus": "onFocus"
        "blur": "onBlur"
    },
    "onResize": function (ev) {

    },
    "onFocus": function (ev) {

    },
    "onBlur": function (ev) {

    }
}); 
```

然后你只需像标准视图一样创建一个新视图。

# iphone - 提交应用时缺少信息

> ID：10358466
> 
> 赞同：0
> 
> 时间：2012-04-27T22:04:54.853
> 
> 标签：iphone, ios

我即将向苹果商店提交我的 iPhone 应用程序，一个简单的问题：

如果中途，我发现我错过了一些东西/信息，比如说截图，我需要 2 天才能得到那个截图，苹果商店是否记得我已经完成的所有步骤 - 这样我就可以从我所在的位置重新开始，还是我需要从头开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T22:07:33.880

如果只是缺少截图，请继续提交，稍后更新截图。这不会导致您的应用程序被重新审核，而且 Apple 通常需要几天时间才能开始审核您的应用程序。

要直接回答您的问题，如果您不继续提交更改，我不记得 Apple 会保存您已经输入的信息。如果您现在不提交，我认为您必须提交或稍后重新输入。

# android - 安卓通知灯不工作

> ID：10358472
> 
> 赞同：6
> 
> 时间：2012-04-27T22:05:35.073
> 
> 标签：android, android-notifications

我正在使用通知让用户现在该服务仍在运行。现在我想使用通知灯来提醒用户。（因为它很花哨）

通知工作正常，但通知灯没有任何作用。其他应用程序与通知灯一起工作正常，（gtalk，facebook）

它或多或少是添加这些标志的通知示例代码：

```
notification.ledARGB = 0xff00ff00;
notification.ledOnMS = 100;
notification.ledOffMS = 100;
notification.flags |= Notification.FLAG_SHOW_LIGHTS;

notification.flags |= Notification.FLAG_NO_CLEAR + Notification.FLAG_ONGOING_EVENT;
mNotificationManager.notify(NOTIFICATION_ID, notification); 
```

和

```
notification.defaults |= Notification.DEFAULT_LIGHTS; 
```

相反也不起作用。

我正在使用 Android 4.0 在 Galaxy Nexus 上进行调试，但该应用的目标是 Android 2.3.3

编辑：这可能是许可问题吗？如果是，是哪一个？我查看了所有内容，发现通知灯没有匹配的权限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T23:07:10.353

我认为 + 运算符有错误，您需要 OR：

```
notification.flags |= Notification.FLAG_NO_CLEAR | Notification.FLAG_ONGOING_EVENT; 
```

编辑：如果您使用标志，我认为正确的应该是：

```
notification.flags |= Notification.FLAG_SHOW_LIGHTS 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T13:12:10.020

在果冻豆设备上，仅当通知优先级设置为最大或默认时，led 才有效，请再次检查。以下代码片段在 jb 设备上对我来说工作正常。

```
notification.setLights(0xFF0000FF,100,3000);
notification.setPriority(Notification.PRIORITY_DEFAULT); 
```

在这里，我显示蓝色 LED 通知通知，它将保持打开 100 毫秒并关闭 3000 毫秒，直到用户解锁他的设备。

并检查您是否使用 NotificationCompat（兼容性）类而不是忽略 setDefaults 方法并使用 SetLight、SetSound、Setvibration 等

# python - 自我定义的问题

> ID：10358474
> 
> 赞同：2
> 
> 时间：2012-04-27T22:05:49.930
> 
> 标签：python

```
File "clienttest.py", line 3, in <module>
   x = handle.Client()
File "/home/tmac/Handle/handle.py", line 131, in __init__
   Task.CLT_UPDATE:self.__clt_updates,
AttributeError: 'Client' object has no attribute '_Client__clt_updates' 
```

我的代码在创建实例时抛出此错误，但该函数存在。它似乎在它前面加上 _Client，我不知道为什么

这是类定义

```
class Client(threading.Thread):
    def __init__(self):
        threading.Thread.__init__(self)
        #create task q
        self.tasks = Queue.Queue(maxsize=0)
        print str(self)
        #create database
        self.database = server.Database()
        self.database.loadconfig()

        #create networking
        self.network = network.Network(self.tasks)

        #put startup tasks
        self.network.cmd_q.put(NetworkCommand(NetworkCommand.CONNECT,('127.0.0.1',self.database.config['Handle']['port'])))

        #create gui
        self.gui = gui.Gui(self)
        #define task handlers
        self.handlers = {
                Task.CLT_UPDATE:self.__clt_updates,
                            ^----The problem seems to be here--------^
                Task.CLT_INPUT:self.__clt_input,
                Task.CLT_LINEUP:self.__clt_lineup
                }

        #define alive flag
        self.alive = threading.Event()
        self.alive.set()

        #setup logging
        logging.basicConfig(level=self.loglvl, filename='client.log', format='%(asctime)s %(name)s %(levelname)s: %(message)s', datefmt='%Y-%m-%d %H:%M:%S')
        self.log = logging.getLogger('CLIENT')

        def run(self):
            self.network.start()
            self.gui.initscreen()
            while self.alive.isSet():
                try:
                    task = self.tasks.get(True, 0.1)
                    self.log.debug('Got Task: ' + task.stype[task.type])
                    self.handlers[task.type](task)

                except Queue.Empty:
                    pass

        def addtask(self, task):
            self.tasks.put(task)

        def __clt_updates(self, task):
            raise NotImplemented()

        def __clt_input(self, task):
            pack = Packet(Packet.INPUT,task.data)
            self.network.cmd_q.put(NetworkCommand(NetworkCommand.SEND,pack))
            self.log.debug(':[H]Sent Command: ' + task.data)

        def __clt_lineup(self, task):
            self.gui.addline(task.data)
            self.log.debug(':[H]Line Update: ' + task.data) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T22:15:37.797

Python 中的双下划线会导致 Python[名称重整](http://docs.python.org/reference/expressions.html#atom-identifiers)在运行时生效。名称修改会将类名添加到类中名称以 2 个下划线开头的每个方法之前。如果您想要没有名称修饰的私有方法，请使用单个下划线。

如评论中所述，您似乎也有缩进问题。我的猜测是您打算将这些方法创建为类成员，但是由于问题在这里有它们，它们实际上缩进在`__init__`.

# jquery - 检查 jQuery 对象中特定 .data() 值的正确方法？

> ID：10358477
> 
> 赞同：9
> 
> 时间：2012-04-27T22:06:15.390
> 
> 标签：jquery

我想检查是否已将 jQuery 数据值应用于对象。例如，其他地方的代码可能会将数据分配给对象：

```
$myObject.data('hello','world'); 
```

在其他地方，我想检查是否为数据属性 hello 赋予了值。

处理这个问题的正确方法是什么？`.hasData`似乎是显而易见的选择，但似乎不像“hasClass”那样工作，因为您似乎无法将特定的数据元素名称传递给它。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-27T22:07:35.423

要获得属性（例如用于比较），请使用`.data`一个参数：

```
$myObject.data('hello') 
```

`undefined`当数据不存在时返回值。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-12-12T01:33:16.440

检查数据是否存在，如果不存在则设置。

```
if ($myObject.data('hello') === undefined) {
    // data NOT set
    $myObject.data('hello','world');
} else {
    // data IS set
} 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2014-09-11T20:49:30.907

你也可以试试：

```
$myObject.hasData("hello") 
```

如果有数据则返回 true，如果没有则返回 false。jQuery网站上的链接：http: [//api.jquery.com/jquery.hasdata/](http://api.jquery.com/jquery.hasdata/)

# objective-c - CATransform3DRotate 水平翻转

> ID：10358486
> 
> 赞同：3
> 
> 时间：2012-04-27T22:06:51.703
> 
> 标签：objective-c, ios, calayer, catransform3d

我有一个需要转换的层。目前我正在使用以下内容：

```
self.customLayer.transform = CATransform3DRotate(CATransform3DIdentity,M_PI / 2.0f, 0, 0, 1); 
```

这正确地使图层正面朝上，但它也需要水平翻转，因为它是错误的方式。我该如何调整`CATransform3DRotate`才能做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-27T22:29:12.363

你需要：

```
self.customLayer.transform = CATransform3DScale(CATransform3DMakeRotation(M_PI / 2.0f, 0, 0, 1),
                                                -1, 1, 1); 
```

带有 -1 的刻度是翻转。想象一下，您正在水平挤压图像并且超过零。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-17T04:50:27.510

由于这里的参数是

```
CATransform3DScale (CATransform3D t, CGFloat sx, CGFloat sy, CGFloat sz) 
```

如果要水平翻转，则不应在 CATransform3DMakeRotation() 中提供任何向量值。相反，您只想控制 x 轴的比例。

通过水平翻转它，您应该：

```
self.transform = CATransform3DScale(CATransform3DMakeRotation(0, 0, 0, 0),
                                        -1, 1, 1); 
```

如果要将其翻转回原点，请执行以下操作：

```
self.transform = CATransform3DScale(CATransform3DMakeRotation(0, 0, 0, 0),
                                        1, 1, 1); 
```

另外：
较短的版本将为您节省一项操作。反转：

```
self.transform = CATransform3DMakeRotation(M_PI, 0, 1, 0); 
```

要恢复正常：

```
self.transform = CATransform3DMakeRotation(0, 0, 1, 0); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-04T11:20:36.177

我个人觉得使用 KVC 来处理这些事情更具可读性。您可能可以使用以下内容来达到相同的效果：

```
// Rotate the layer 90 degrees to the left
[self.customLayer setValue:@-1.5707 forKeyPath:@"transform.rotation"];
// Flip the layer horizontally
[self.customLayer setValue:@-1 forKeyPath:@"transform.scale.x"]; 
```

# android - 在surfaceview的onDraw上有效地绘制同一图像的多个实例

> ID：10358490
> 
> 赞同：1
> 
> 时间：2012-04-27T22:07:02.287
> 
> 标签：android, surfaceview

我正在尝试制作一个在不同位置有许多相同图像实例的游戏。我希望声明一次图像，然后在 onDraw() 中使用该位图。但是，当我使用在类中声明的任何类型的变量时，我会收到一个错误，因为它需要注意保持它的值。我刚开始使用surfaceview，所以也许我错过了一些东西。我目前只是尝试绘制一张图像，但这个想法是相同的，一旦我到达多个实例就会使用。我现在拥有的：

```
class GameView extends SurfaceView implements SurfaceHolder.Callback
{
    private GameThread _thread;
    // vars for display, scale, etc
    private int displayWidth;
    private int displayHeight;
    private double scale;
    private Bitmap groundPic;

    public GameView(Context context) {
        super(context);
        // set the surface holder for callback
        getHolder().addCallback(this);
        _thread = new GameThread(getHolder(), this);
                displayWidth = getWidth();
        displayHeight = getHeight();
        scale = displayWidth / 512.0;   // ground image is 512;
    }
@Override
    public void onDraw(Canvas canvas)
    {

        groundPic = BitmapFactory.decodeResource(getResources(), R.drawable.ground);
        groundPic = Bitmap.createScaledBitmap(groundPic, displayWidth, 50, true);
        canvas.drawColor(getResources().getColor(R.color.background_colour));
        // draw ground                  
        canvas.drawBitmap(groundPic,0, getHeight() - 50, null);
    } 
```

这会导致强制关闭，因为 displayWidth 为 0。在构造函数中设置值我错了吗？我尝试在创建视图之后和 setContentView() 之前从我的活动中调用一个 init()。我知道如果我将所有设置都放在 onDraw() 中它会起作用，但我觉得它确实效率低下。我希望做的（但导致错误）是拥有 init() 并在其中设置 groundPic 这将是一个类变量，然后我的 onDraw 会小而快，因为它不会继续这样做每个周期都有相同的位图对象。我也将在地面周围绘制 30 枚导弹，所以如果我只能绘制一次，然后在特定位置绘制 30 次，那么每个周期绘制 30 个相同的位图将是巨大的浪费。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T03:06:14.530

> 这会导致强制关闭，因为 displayWidth 为 0。我在构造函数中设置值是否错误？

是的，因为正常行为表明`SurfaceView`遗嘱在构建时尚未布局。相反，您应该使用[`SurfaceHolder.Callback`](http://developer.android.com/reference/android/view/SurfaceHolder.Callback.html)来发现`SurfaceView`与其大小和格式相关的任何更改。您的代码片段表明您可能已经拥有相关的方法：

```
class GameView extends SurfaceView implements SurfaceHolder.Callback 
```

由于您正在实施`Callback`，因此您应该在`surfaceChanged(SurfaceHolder holder, int format, int width, int height)`某处拥有该方法。您可以使用传入的`width`和`height`参数来计算比例并适当缩小`Bitmap`. 同样，您可以在`surfaceCreated(SurfaceHolder holder)`.

有关使用`SurfaceView`和线程绘图的更多指示，您可能需要查看 Google 的[Lunar Lander 示例项目](http://developer.android.com/resources/samples/LunarLander/index.html)，尤其是[`LunarView`](http://developer.android.com/resources/samples/LunarLander/src/com/example/android/lunarlander/LunarView.html)类。

# c# - “结构中的内联分配”对值类型意味着什么？

> ID：10358496
> 
> 赞同：4
> 
> 时间：2012-04-27T22:08:13.010
> 
> 标签：c#, heap-memory, value-type

从 MSDN 中它说“[值类型是在堆栈上或内联上分配的。](http://msdn.microsoft.com/en-us/library/ms229017.aspx) ”

“内联分配”是否意味着值类型可以在声明后立即分配？说如果它是在一个Heap中声明的，那么它是在下一个Heap slot中分配的？

那为什么说“在一个结构中”？

### 更新

如果“结构”特指“结构”，为什么它没有提及“类”？作为 a 中的字段`Class`，它不在堆栈上，也不在 a 中内联`struct`，（它在 a 中内联`class`）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T22:11:00.140

它们*在结构*中内联分配，因此作为已分配给结构的内存的一部分。

看：

[http://msdn.microsoft.com/en-us/library/system.valuetype.aspx](http://msdn.microsoft.com/en-us/library/system.valuetype.aspx)

如果您有嵌套值类型，则内部类型将分配在已为包含类型分配的内存中。

```
struct Inner
{
    public int A;
}

struct Outer
{
    public Inner I;
    public int B;
}

Outer o = new Outer();
o.I = new Inner(); 
```

内存`I`是内联分配的，在分配给 的实例的内存中`Outer`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T21:31:27.980

将结构视为最简单的方法是将一组存储位置用胶带粘在一起。声明一个变量或字段`Point foo;`本质上等同于说`int Point_X; int Point_Y;`。说`foo = bar;`，当两者都是类型时`Point`，本质上等同于说`foo_X = bar_X; foo_Y = bar_Y;`。将结构作为值参数传递本质上等同于将其所有字段（公共和私有）作为值参数传递。

有两种结构方式和一种主要是语法糖的方式，其中结构不仅仅是用胶带粘在一起的一组字段：

1.  可以将结构体作为 `byref` 参数传递，在这种情况下，系统会传递一个对整个存储位置组的引用（与单独传递存储位置不同，在按值传递时有效）。
2.  struct 类型数组的每个 slot 都会将其所有存储位置放在一起，因此 `Point foo[];` 与 `int foo_X[]; 非常不同；int foo_Y[];`。前一个声明表示一个数组，每个元素有两个存储位置，而后一个声明表示两个数组，每个元素一个存储位置。
3.  可以将方法和属性与结构相关联，并定义结构字段，这些字段只能通过这些方法和属性访问，或者通过对结构的所有字段执行类似赋值的操作来访问。

类类型与结构非常不同。如果一个人声明了一个具有字段 P 和 Q 的类，并且一个人声明了该类类型的存储位置，那么该存储位置将不会保存两个东西（P 和 Q）。它只会保存一件事——对存储在其他地方的对象的引用，该对象本身具有字段 P 和 Q。

# javascript - 如何将python与javascript一起使用？

> ID：10358499
> 
> 赞同：0
> 
> 时间：2012-04-27T22:08:22.163
> 
> 标签：javascript, python, django-models

我有一个对象“公司”。当我在 html 中使用公司时，它工作正常。但是当我尝试在 javascript 中使用该对象时，我得到了“Uncaught SyntaxError：Unexpected token &”。

我想要做的是从 db 中获取对象，然后将它们显示在 html 页面上，然后使用 js 更改一些 div。

网址：

```
('^all_companies$', 'companies.views.all_companies') 
```

风景：

```
def all_companies(request): 
    companies = Company.objects.all().order_by('id')[:5];   
    return direct_to_template(request, 'all_companies.html', {'companies': companies} ); 
```

的HTML：

```
{% block sidebar %}
    <div id="sidebar">
        <!-- like google maps, short list of company info -->
        <ul>
            {% for comp in companies %}
                <li>{{ comp }}</li>                 
            {% endfor %}
        </ul>
    </div>
{% endblock %} 
```

js：

```
var tmp = {{ companies }} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T22:18:49.297

您可以添加这样的模板过滤器：[http ://djangosnippets.org/snippets/201/](http://djangosnippets.org/snippets/201/)

并使用

```
{{ companies | jsonify }} 
```

但我不确定直接在 db 对象上执行此操作是否是个好主意，最好将它们映射到您需要的简单属性映射

# java - 当实体发生变化时，OpenJPA 对 db 模式做了什么？

> ID：10358505
> 
> 赞同：0
> 
> 时间：2012-04-27T22:08:54.087
> 
> 标签：java, openjpa

我有一个当前映射到数据库模式的实体。我打算将其更改为两个实体，并且想知道 OpenJPA 将如何处理这个问题？我主要关心的是数据库中当前的旧数据..

变化如下。目前我在原始实体中有一组字符串（作为 ElementCollection），但我想将其更改为字符串到实体的映射（在 OneToMany 关系中）。到目前为止，这在我的测试系统上有效，并导致一张表中的另外两列。OpenJPA 是否足够智能以添加这些列？如果是这样，我可以为这些设置默认值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T09:02:46.217

根据 OpenJPA 配置，这个问题的答案可能是“未定义的”。

我的团队通过不允许 OpenJPA 直接处理模式来解决这个要求，而是在每个需要更改模式的部署中运行 sql 更新脚本。

# java - 在java中解码一个字节

> ID：10358507
> 
> 赞同：1
> 
> 时间：2012-04-27T22:09:00.790
> 
> 标签：java, bit-manipulation

我无法理解的代码是这样做的：

```
int decodeTimeStampByte(final byte timeByte) {
   return timeByte & (~64);
} 
```

例如，如果我得到字节 4c（即 ASCII L），那么上面的函数究竟会做什么呢？字节 44 怎么样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T22:14:06.527

'~' 是按位'not'，所以 64 = 0x40 = 0100000b 和 ~64 = 1011111b（低 5 位设置）。

然后'&'是按位'and'，它只留下timeByte的低5位。所以，基本上，它是 timeByte 到 0..63 范围的截断。

decodeTimeStampByte(4c) = 0xC (12)

decodeTimeStampByte(44) = 44

PS是的，我忘记了高位。~64 = 1011111b。

它要么是代码中的错误，要么是为了保留符号位（第 7 位）。

PPS 似乎是一种古老的比特黑客来挤压更多的性能

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T22:14:44.430

此代码将清除位 6。但如果设置了位 7，它将设置从 8 到 31 的所有位（由于将字节转换为 int）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T22:14:13.560

该函数返回低 6 位为正值，清除第 7 位为负值。因此，二进制的 2^6=64, 64 = 1000000，二进制的 ~64 = 0111111 将屏蔽 timeByte 的 [0..63] 和 [-128..-65] 之间的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T23:21:45.937

该函数返回低 6 位为正值，清除第 7 位为负值。因此，`2^6=64, 64 = 1000000`在二进制中，`~64 = 0111111`二进制会屏蔽 和 之间`[0..63]`的`[-128..-65]`值`timeByte`。

# osx-snow-leopard - 我该如何解决：pandoc: ...:hGetContents: invalid argument (invalid byte sequence)

> ID：10358508
> 
> 赞同：5
> 
> 时间：2012-04-27T22:09:14.657
> 
> 标签：osx-snow-leopard, pandoc

我在 Mac OSX 10.6.8 的终端中运行以下代码：

`find . -name \*.html -type f -exec pandoc -o {}.md {} \;`

它解析了一些文档，但在很多方面给了我这个错误：

`pandoc: ./Teaching/how_16825_make-lesson-book.html: hGetContents: invalid argument (invalid byte sequence)`

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T01:52:12.343

有同样的问题我也看到这是在 Pandoc README.html 文件中：---

> Pandoc 对输入和输出都使用 UTF-8 字符编码。如果你的本地字符编码不是 UTF-8，你应该通过 iconv 管道输入和输出：
> 
> iconv -t utf-8 输入.txt | 潘多克 | iconv -f utf-8

当然，您可能需要先安装 iconv（我相信 Mac Osx 已经拥有它）...

> [http://gnuwin32.sourceforge.net/packages/libiconv.htm](http://gnuwin32.sourceforge.net/packages/libiconv.htm) Gnu Win32
> 
> [https://code.google.com/p/win-iconv/](https://code.google.com/p/win-iconv/) 谷歌 Win-Iconv

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T17:36:33.377

正如 kadeix 所说，这是一个字符编码问题。修改 html 中的字符集声明对我没有任何作用。

为了解决这个问题，我在 vim 中使用：`:w ++enc=utf-8`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T13:53:39.607

当我尝试解析以 latin-1 编码的文件时出现此错误。

当您收到此错误时，请在使用 pandoc 之前尝试将文件保存为 utf-8（并修改 html 代码中的字符集声明）。

# javascript - 获取 JSON 数据 - 新手在这里

> ID：10358510
> 
> 赞同：2
> 
> 时间：2012-04-27T22:09:27.983
> 
> 标签：javascript, jquery, json

我正在使用 Songkick API 来列出下一个演出日期，我已经修改了[此处](http://www.robl.me/posts/jquery-nano-and-songkick-2)找到的代码。这是[JSON 数据源](http://codepad.org/Kqlm1yQ9)的副本。

的HTML：

```
<head>
<script src="jquery.js" type="text/javascript"></script>
<script src="jquery.livequery.js" type="text/javascript"></script>
<script src="jquery.nano.js" type="text/javascript"></script>
<script src="application.js" type="text/javascript"></script>
</head>
<body>
<ul id="concerts">Loading Next Gig...</ul>
</body> 
```

application.js 是：

```
$(document).ready(function () {
  var template = "<li>Our next gig is <a href='{uri}'>{displayName}</a></li>";
  var apikey = 'MY_API_KEY';
  var container = $("ul#concerts");
  $.getJSON('http://api.songkick.com/api/3.0/artists/253846/calendar.json?apikey=' + apikey + '&jsoncallback=?', function(data) {
    container.html("");
    events = data["resultsPage"]["results"]['event'];
if (events==null) {
      container.append($.nano());
}
else {
      container.append($.nano(template, events[0]));
}
  });
}); 
```

我只想显示第一个列出的演出，

```
event.location.city
event.venue.displayName
event.start.date (in dd MMM format). 
```

如果没有列出任何活动，我希望它说“目前没有预定的演出，请`[a href="example.com"] click here [/a]`获取最新信息”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T22:12:08.150

`.`使用(Dots)访问 json 树

```
events = data.resultsPage.results.event; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T22:41:50.910

> *   **演示：http:** [//jsbin.com/ocoric](http://jsbin.com/ocoric)

```
 var events = data.resultsPage.results.event;
  $.each(events, function (i, item) {
        container.append($.nano(template, item));
    }); 
```

**注意：**由于您正在使用`$.nano`您应该迭代 json 对象以替换模板 var 中的短代码。

如果你想单独访问 json 属性，你应该像下面这样访问它：

```
var uri = events.uri;
var displayName = events.displayName; 
```

您的完整代码将如下所示：

```
$(document).ready(function () {
    var template = "<li>Our next gig is <a href='{uri}'>{displayName}</a></li>";
    var apikey = 'MY_API_KEY';
    var container = $("ul#concerts");
    $.getJSON('http://api.songkick.com/api/3.0/artists/253846/calendar.json?apikey=' + apikey + '&jsoncallback=?', function (data) {
        container.html("");
        var events = data.resultsPage.results.event;
        if (events !== null) {
      $.each(events, function (i, item) {
            container.append($.nano(template, item));
        });
        }
    });
}); 
```

# iphone - 无法缩放某些网页的 UIWebView

> ID：10358516
> 
> 赞同：0
> 
> 时间：2012-04-27T22:10:11.493
> 
> 标签：iphone, objective-c, ios, ipad, uiwebview

为什么在 UIWebView 中显示的视图网页是可缩放的，而有些则不是？如何使所有这些都可缩放？我可以放大几页，但不是全部

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T22:17:05.537

您需要在 webview 上将 scalesPageToFit 设置为 YES。请参阅文档...

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)

“如果是，网页被缩放以适应用户可以放大和缩小。如果否，用户缩放被禁用。默认值为否。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T22:32:51.800

有些页面配置了特殊的元标记，告诉 webkit '我已经为移动设备呈现了这个内容。不要缩放它'。

如果查看这样的页面，则无法通过 UIWebView 启用缩放。内容是说“我已经缩放了！” 并且 UIWebView 将拒绝进一步扩展它。

编辑：回答第二个问题（上面是“为什么”，现在是“我如何让它发生”）：你不能，对不起。

# mysql - 琐碎的 MySQL 查询：WHERE (...) AND (...)

> ID：10358517
> 
> 赞同：2
> 
> 时间：2012-04-27T22:10:22.033
> 
> 标签：mysql, join, foreign-keys

我一定有星期五的情况......假设我有以下表格和数据：

```
+------------+
| Park       |
+------------+
| Cape Cod   |
| Blue Ridge |
| Ice Age    |
+------------+

+--------+
| Tag    |
+--------+
| Biking |
| Skiing |
+--------+

+---------------------+
| ParkTags            |
+------------+--------+
| Cape Cod   | Biking |
| Blue Ridge | Hiking |
| Ice Age    | Biking |
| Ice Age    | Hiking |
+------------+--------+ 
```

换句话说，公园存储在一个表中，标签存储在另一个表中，第三个表将一个或多个标签链接到公园。

我正在尝试做的是选择一个或多个标签并返回所有具有所有标签的公园。根据以上信息，标签与公园的关联如下：

骑自行车：科德角冰河时代

远足：蓝岭冰河时代

骑自行车和徒步旅行：冰河时代

我的问题是，我的查询做错了什么？我想要得到的是所有带有自行车和徒步旅行标签的公园。

```
# My query so far

SELECT
    Park.name as Park,
    Tag.name as Tag

FROM
    ParkTags
    JOIN Park ON Park.id = ParkTags.fk_park_id
    JOIN Tag  ON Tag.id  = ParkTags.fk_tag_id

WHERE
    Tag.name = 'Biking' AND Tag.name = 'Hiking'

ORDER BY
     Park.name 
```

我的预期输出是只获得冰河世纪公园。运行该查询返回零个结果。如果我在条件中将 AND 更改为 OR，则结果是所有三个公园。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T22:19:31.217

Tag.name 不能同时具有值​​“Biking”和“Hiking”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T03:09:36.507

嗯，我看到的第一个问题是你想返回任何有所有标签的公园，但是你使用 where 子句来指定你想要返回的标签......正如上面提到的那样，你不会有行同时匹配两个条件（AND 运算符），但我认为标签列上的任何类型的 where 子句都会破坏您的要求，所以这没有实际意义。

这是您的表定义

```
parks
---------
id
name

tag
------
id
name

parktags
-------
id
fk_parks_id
fk_tags_id 
```

我可能会从 parktags 表上的左连接开始，像这样

```
SELECT p.name, t.name 
FROM   parktags PT
          LEFT JOIN parks P ON p.id = pt.fk_parks_id
          LEFT JOIN tag T ON t.id = pt.fk_tags_id 
```

这将为您提供所有公园标签，以及匹配的公园和标签。现在我们只需要返回在 parktags 上有多个条目的那些。让我们尝试这样的事情

```
SELECT p.name, t.name 
FROM   parktags PT
          LEFT JOIN parks P ON p.id = pt.fk_parks_id
          LEFT JOIN tag T ON t.id = pt.fk_tags_id
GROUP BY pt.fk_parks_id
HAVING COUNT(pt.fk_tags_id) > 1 
```

HAVING 的工作方式与 WHERE 类似，不同之处在于 HAVING 允许您使用聚合进行条件检查，但 WHERE 不允许。我们本可以在 where 子句中使用子选择，这并没有什么特别的问题，但是子选择需要它们自己的、单独的执行计划，这比连接成本更高。

我面前没有控制台，所以我无法对此进行测试，我确信它会出现问题。您可能需要更多地使用 HAVING 和 GROUP BY 子句才能使其恰到好处，但它会沿着这些方向发展。让我知道事情的后续...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T22:29:50.127

```
SELECT p.name, 
       group_concat(t.name)

FROM Park p
JOIN ParkTags pt ON pt.fk_park_id = p.id
JOIN Tag t       ON pt.fk_tag_id  = t.id

WHERE (
    SELECT COUNT(*) 

    FROM ParkTags pt 
    JOIN Tag t ON t.id = pt.fk_tag_id 

    WHERE t.name in ('Biking','Hiking') 
    AND pt.fk_park_id=p.id
) = 2

GROUP BY p.id 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-28T00:16:22.963

您也可以尝试稍微改编一下[Nesim 的回答](https://stackoverflow.com/a/10358705/104223)：

```
SELECT p.name, GROUP_CONCAT(t.name) AS Name list
FROM Park p
        INNER JOIN ParkTags pt ON pt.fk_park_id = p.id
        INNER JOIN Tag t ON t.id = pt.fk_tag_id
WHERE   t.name in ('Biking','Hiking')
GROUP BY p.name
HAVING COUNT(DISTINCT t.id) = 2 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T22:27:27.313

```
SELECT
    Parks.Name
FROM
    Park 
WHERE 
    EXISTS (SELECT * FROM ParkTags b WHERE b.Tag = 'Hiking' AND b.Name = Park.Name)
    AND EXISTS (SELECT * FROM ParkTags c WHERE c.Tag = 'Biking' AND c.Name = Park.Name) 
```

类似的东西？您正在检查是否存在匹配的标签 这将无法很好地扩展......

# android - 用于设计android按钮的工具

> ID：10358520
> 
> 赞同：0
> 
> 时间：2012-04-27T22:10:27.480
> 
> 标签：android, android-layout

我正在尝试找到一种工具（如果有的话）来帮助创建/优化用作 Android 按钮背景的图像。作为一般规则，用于背景的图像是否有一定的尺寸，是否有任何我可以使用的好程序（最好是免费的）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T22:17:04.507

对于按钮背景，您需要创建一个 9-Patch 图像，这是设计的一小部分，Android 界面标记为“可平铺”的区域，请在此处查看准确定义：

[http://developer.android.com/reference/android/graphics/NinePatch.html](http://developer.android.com/reference/android/graphics/NinePatch.html)

对于帮助将您的 PNG 转换为 9 个补丁图像的工具，请使用此

[http://developer.android.com/guide/developing/tools/draw9patch.html](http://developer.android.com/guide/developing/tools/draw9patch.html)

然后，您当然需要为背景绘制一个 XML 文件并定义状态，然后再进行排序。

指南： http: [//ogrelab.ikratko.com/custom-color-buttons-for-android/](http://ogrelab.ikratko.com/custom-color-buttons-for-android/)

编辑：只是一个图标，在这些密度中创建它们

36x36 用于低密度 (ldpi) 48x48 用于中密度 (mdpi) 72x72 用于高密度 (hdpi)

# php - 使用 PHP 反序列化/序列化 AMF 请求

> ID：10358521
> 
> 赞同：1
> 
> 时间：2012-04-27T22:10:31.057
> 
> 标签：php, zend-framework, amf, amfphp

我有一个问题。我尝试使用 AMFPHP，但它对我来说不能正常工作。我有带有 AMF 序列化请求的文件。现在我想反序列化它，然后再次序列化它以测试它是否有效。而且有一个问题，因为解码是可以的，但是当我再次序列化时，和文件中的这个完全不同。我使用了 AMFPHP 1.9。代码：

```
require_once( 'amfphp/core/amf/app/Gateway.php');
require_once( AMFPHP_BASE . 'amf/io/AMFSerializer.php');
require_once( AMFPHP_BASE . 'amf/io/AMFDeserializer.php');

$amf = new AMFObject(file_get_contents('a.dat'));
$deserializer = new AMFDeserializer($amf->rawData);
$deserializer->deserialize($amf);    

$serializer = new AMFSerializer();
$serializer->serialize($amf);

echo $serializer->outBuffer; 
```

还尝试使用 SabreAMF [不反序列化] 和 Zend Framework [还没有结果...]

我需要的是： 1\. 反序列化请求。2\. 检查值，如果需要，可以更改。3\. 再次序列化。

我以为这并不难，但现在我明白了......

# asp.net - 使用服务器端处理时数据表警告

> ID：10358522
> 
> 赞同：-1
> 
> 时间：2012-04-27T22:10:31.520
> 
> 标签：asp.net, datatables

我正在使用数据表[插件](http://www.datatables.net)，在我添加启用服务器端处理之前一切正常。

表格中的所有行一起出现在页面上，没有 CSS 和边框，也没有搜索查询。

> “DataTables 警告：无法解析来自服务器的 JSON 数据。这是由 JSON 格式错误引起的。”

我只是使用绑定到gridview 的SQL 数据源。

```
$(document).ready(function () {
        var oTable = $('#GridView1').GridviewFix({ header: "headerStyle", row: "rowStyle", footer: "footerStyle" }).dataTable({
            "bServerSide": true,
            "sAjaxSource": "WebForm4.aspx",
            "sPaginationType": "full_numbers",
           "oLanguage": {
                "sSearch": "Search all columns:"
            }}); 
```

我正在使用 firebug 查看我的 JSON 数据，但 firebug 或 fiddler 都没有检测到 JSON 数据。

我必须将 sql 数据转换为 JSON 格式吗？我必须做什么 ？我试图在他们的网站上发布，但没有运气。

每个有类似问题的人都看到从服务器获得 JSON 响应，但在我的情况下，没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T01:48:27.167

DataTables 需要一个特定格式的[JSON 服务器响应](http://www.datatables.net/release-datatables/examples/server_side/server_side.html)对象。您的评论响应似乎表明您没有在服务器上构建必要的响应对象。

[我在我的博客上有一个使用带有 DataTablea 的服务器端分页](http://www.woodcp.com/2012/02/server-side-paging-with-petapoco-and-datatables/)的完整示例实现，并在[github](https://github.com/tawman/PetaPocoPage)上提供了相关代码

如果您实际上正在生成正确的 JSON 响应，那么查看您的服务器端代码会有所帮助。

# asp.net - 在 asp 中用于 Windows 身份验证的简单自定义角色。网？

> ID：10358525
> 
> 赞同：16
> 
> 时间：2012-04-27T22:10:42.740
> 
> 标签：asp.net, asp.net-mvc, asp.net-membership, roles

在我们的公司网络中，没有为我的应用程序适当地分配 Active Directory(AD) 中的角色。所以我在我的数据库中创建了一个简单的表，映射了 AD 中的所有用户及其角色。此表中实际上只有两列，用户和角色。

我希望利用 asp.net 中强大的角色管理功能，我想使用`[Authorize(Roles = "Managers")]`. 有没有一种简单的方法来使用这些自定义角色而无需设置复杂的角色和成员资格提供者？

应用背景：sql server、linq、asp.net mvc

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-28T01:53:15.457

实现自定义角色提供者真的很容易。基本上你需要实现两个功能。

看文章：[MVC 的自定义角色提供者](http://kitsula.com/Article/Custom-Role-Provider-for-MVC)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-06-09T18:30:47.097

[网站出现故障时提供的文章。](http://kitsula.com/Article/Custom-Role-Provider-for-MVC)

**MVC 的自定义角色提供程序**

在上一篇文章中，我解释了如何创建自定义成员资格提供程序来授权用户并保护控件和页面。但是，如果您想为特定的用户组显示或保护某些区域、控制器或页面怎么办？例如，只允许管理员访问管理面板。

在 .Net Framework 中用于此目的的是角色提供者。但同样，它使用自己的数据库存储用户角色。因此，让我们创建和配置将使用我们的数据库或任何其他存储的自定义角色提供程序。和以前一样，我们应该从 .NET 覆盖类：

[![在此处输入图像描述](../Images/4284c0786682e6a3180a17b56c794ae6.png)](https://i.stack.imgur.com/cBmGh.jpg)

[![在此处输入图像描述](../Images/14b3fc767cae9afb045154ccc3813161.png)](https://i.stack.imgur.com/C1nH1.jpg)

[![在此处输入图像描述](../Images/cc8a14c65bf1a6561189fc2ed0b01954.png)](https://i.stack.imgur.com/VGDSC.jpg)

对于最小功能，我们需要实现和覆盖两个函数 GetRolesForUser 和 IsUserInRole。首先，一个用于获取所有用户角色（或组）的列表：

```
public override string[] GetRolesForUser(string username)
{
    using (DatabaseEntities db = new DatabaseEntities())
    {
        User user = db.Users.FirstOrDefault(u => u.UserName.Equals(username, StringComparison.CurrentCultureIgnoreCase) || u.Email.Equals(username, StringComparison.CurrentCultureIgnoreCase));

        var roles = from ur in user.UserRoles
                    from r in db.Roles
                    where ur.RoleId == r.Id
                    select r.Name;
        if (roles != null)
            return roles.ToArray();
        else
            return new string[] {}; ;
    }
} 
```

如您所见，我通过函数的用户名参数在我的数据库中找到用户（在我的情况下，它可以是用户名或电子邮件）并创建用户角色的字符串列表。

第二个功能是检查用户是否在角色（或组）中：

```
public override bool IsUserInRole(string username, string roleName)
{
    using (DatabaseEntities db = new DatabaseEntities())
    {
        User user = db.Users.FirstOrDefault(u => u.UserName.Equals(username, StringComparison.CurrentCultureIgnoreCase) || u.Email.Equals(username, StringComparison.CurrentCultureIgnoreCase));

        var roles = from ur in user.UserRoles
                    from r in db.Roles
                    where ur.RoleId == r.Id
                    select r.Name;
        if (user != null)
            return roles.Any(r => r.Equals(roleName, StringComparison.CurrentCultureIgnoreCase));
        else
            return false;
    }
} 
```

然后我们需要在 web.config 文件中配置解决方案以使用创建的角色提供程序。出于调试目的，可能需要设置`cacheRolesInCookie`为 false，否则行为将不可预测。

```
<system.web>
    <compilation debug="true" targetFramework="4.5.2" />
    <httpRuntime targetFramework="4.5.2" />
    <authentication mode="Windows" />
    <authorization>
        <deny users="?" />
    </authorization>
    <roleManager cacheRolesInCookie="true" defaultProvider="KitsulaRoleProvider" enabled="true">
        <providers>
            <clear />
            <add name="KitsulaRoleProvider" type="Kitsula.Security.KitsulaRoleProvider" />
        </providers>
    </roleManager>
</system.web> 
```

现在，您可以通过设置 Authorize 属性保护具有指定角色的特定用户组的控制器、操作、页面：

```
using System;
using System.Web.Mvc;

namespace Kitsula.Areas.Admin.Controllers
{
    [Authorize(Roles = "Administrators")]
    public class HomeController : Controller
    {
        //
        // GET: /Admin/Home/

        public ActionResult Index()
        {
            return View();
        }

    }
} 
```

# java - 将自动更新功能集成到 Java 应用程序中

> ID：10358528
> 
> 赞同：4
> 
> 时间：2012-04-27T22:10:51.400
> 
> 标签：java, javafx, java-web-start, auto-update

我面临在桌面 JavaFX 应用程序中实现自动更新功能的问题。我不确定它是否会有所不同——但它会通过双击 .jar 文件来运行，并且显然会有一个 GUI 表示。

现在解决问题：

我需要在应用程序执行时执行自动更新 - 这意味着与服务器同步并检查更新是否可用：如果是，则下载新版本并重新加载当前版本。

我对这个问题的任何最佳方法都不是很熟悉。这似乎是我需要解决的问题：

**A** - 以某种方式下载到当前运行的文件所在的相同位置，文件名相同（AFAIK Windows 故意在每个正在运行的文件/进程上放置一个块 - 声称它正在使用中）

**B** - 找出一种方法如何在此应用程序中启动一个不会在其终止时终止的新进程（以便重新加载新的 v.）

我认为**B**可以进行不同的操作 - 无论如何，最终结果是我必须在同一目录中具有与最初启动的应用程序相同的文件名。

我想这会增加更多的复杂性，因为它应该是多平台的**——Windows** + **MacOSX**。无论如何，我会很感激看到建议，即使是仅与其中一个操作系统相关的建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T22:14:42.070

不要费心重新实现以前为 java 解决的问题。它被称为[Java Web Start](http://www.oracle.com/technetwork/java/javase/tech/index-jsp-136112.html)。它完全符合您的需要。它甚至是多平台！

# python - 使用 SalesForce API，这两个异常是什么意思？

> ID：10358532
> 
> 赞同：2
> 
> 时间：2012-04-27T22:11:03.353
> 
> 标签：python, api, exception, soap, salesforce

我正在使用 SalesForce“Beatbox”库（[http://code.google.com/p/salesforce-beatbox/source/browse/trunk/src/beatbox/_beatbox.py](http://code.google.com/p/salesforce-beatbox/source/browse/trunk/src/beatbox/_beatbox.py)）

异常 1：当我只发送leadId 时，我收到异常“INVALID_CROSS_REFERENCE_KEY：需要有效的leadId”

这是说我没有使用有效的leadId，但我发誓这是一个有效的leadId，因为我事先进行了检索并从SalesForce自己那里获取了leadId！

例外 2：当我取消对 convertStatus 和 doNotCreateOpportunity 参数的注释时，我收到异常“soapenv:Client fault: Element {urn:partner.soap.sforce.com}doNotCreateOpportunity invalid at this location”

这说明我将参数传递给 SalesForce API 的方式有问题。不过对我来说它看起来是正确的。

关于如何解决这些问题的任何想法？

```
def convertLead(self, leadIds, convertedStatus, doNotCreateOpportunity=False):
     return ConvertLeadRequest(self.__serverUrl, self.sessionId, leadIds, convertedStatus, doNotCreateOpportunity).post(self.__conn)

class ConvertLeadRequest(AuthenticatedRequest):
    """
    Converts a Lead to an Account. See also:
    http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_calls_convertlead.htm
    """
    def __init__(self, serverUrl, sessionId, leadIds, convertedStatus, doNotCreateOpportunity=False):
        AuthenticatedRequest.__init__(self, serverUrl, sessionId, "convertLead")
        self.__convertedStatus = convertedStatus
        self.__leadIds = leadIds;
        self.__doNotCreateOpportunity = doNotCreateOpportunity

    def writeBody(self, s):
        #s.writeStringElement(_partnerNs, "convertedStatus", self.__convertedStatus)
        #s.writeStringElement(_partnerNs, "doNotCreateOpportunity", self.__doNotCreateOpportunity)
        s.writeStringElement(_partnerNs, "leadId", self.__leadIds) 
```

编辑：

现在，当我提出以下请求时：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/" xmlns:p="urn:partner.soap.sforce.com" xmlns:m="http://soap.sforce.com/2006/04/metadata" xmlns:o="urn:sobject.partner.soap.sforce.com" xmlns:w="http://soap.sforce.com/2006/08/apex" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <s:Header>
    <p:CallOptions>
      <p:client>BeatBox/0.9</p:client>
    </p:CallOptions>
    <p:SessionHeader>
          <p:sessionId>REDACTED</p:sessionId>
    </p:SessionHeader>
  </s:Header>
  <s:Body>
    <p:convertLead>
      <p:convertedStatus>Cold Qualified</p:convertedStatus>
      <p:doNotCreateOpportunity>False</p:doNotCreateOpportunity>
      <p:leadId>00QC000000zAbLEMA0</p:leadId>
      <p:overwriteLeadSource>False</p:overwriteLeadSource>
      <p:sendNotificationEmail>False</p:sendNotificationEmail>
    </p:convertLead>
  </s:Body>
</s:Envelope> 
```

我仍然收到异常“转换后的状态无效”

```
<?xml version="1.0" encoding="UTF-8"?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
  <soapenv:Body>
    <soapenv:Fault>
      <faultcode>soapenv:Client</faultcode>
      <faultstring>Element {urn:partner.soap.sforce.com}convertedStatus invalid at this location</faultstring>
    </soapenv:Fault>
  </soapenv:Body>
</soapenv:Envelope> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T03:18:39.943

问题是 writeBody 没有生成正确的结构。检查 WSDL 显示 convertLead 调用预计会占用 0..n 个这些结构。（例外＃2是关于这个的提示）

```
 <element name="convertLead">
        <complexType>
            <sequence>
                <element name="leadConverts" type="tns:LeadConvert" minOccurs="0" maxOccurs="unbounded"/>
            </sequence>
        </complexType>
    </element>

    <complexType name="LeadConvert">
        <sequence>
            <element name="accountId"              type="tns:ID" nillable="true"/>
            <element name="contactId"              type="tns:ID" nillable="true"/>
            <element name="convertedStatus"        type="xsd:string"/>
            <element name="doNotCreateOpportunity" type="xsd:boolean"/>
            <element name="leadId"                 type="tns:ID"/>
            <element name="opportunityName"        type="xsd:string" nillable="true"/>
            <element name="overwriteLeadSource"    type="xsd:boolean"/>
            <element name="ownerId"                type="tns:ID"     nillable="true"/>
            <element name="sendNotificationEmail"  type="xsd:boolean"/>
        </sequence>
    </complexType> 
```

所以你的 writeBody 需要像

```
def writeBody(self, s):
    s.startElement(_partnerNs, "leadConverts")
    s.writeElementString(_partnerNs, "convertedStatus", self.__convertedStatus)
    s.writeElementString(_partnerNs, "doNotCreateOpportunity", self.__doNotCreateOpportunity)
    s.writeElementString(_partnerNs, "leadId", self.__leadId)
    ...
    s.endElement() 
```

如果您想要进行批量潜在客户转换，那么您需要为您想要执行的每个潜在客户转换生成此结构的多个实例。

# android - 如何在 5 秒后在我的主 xml 上制作一个图像按钮？

> ID：10358535
> 
> 赞同：1
> 
> 时间：2012-04-27T22:11:21.247
> 
> 标签：android, timer, imagebutton

我的动画有一个淡入淡出，在尝试了一切之后，我似乎无法使用`Timer`或`TimerTask`正确使用，因为我的应用程序崩溃了。五秒钟后，我希望我的按钮在 5 秒钟后显示或淡入。我如何实现这一目标？

**这是我的代码：**

```
 ImageButton hit = (ImageButton) findViewById(R.id.tryButton2);
   final Animation animationFadeIn = AnimationUtils.loadAnimation(this, R.anim.fadein);
   hit.startAnimation(animationFadeIn); 
```

并且处理程序不起作用它只是让它看起来没有褪色

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T22:29:10.250

我希望这有帮助！

```
hit.setVisibility(View.GONE); 
animationFadeIn.setStartOffset(5000);
animationFadeIn.setAnimationListener(new AnimationListener() {

     @Override
     public void onAnimationStart(Animation animation) {
        hit.setVisibility(View.VISIBLE);
     }

     @Override
     public void onAnimationRepeat(Animation animation) {
        // Nothing to do here
     }

     @Override
     public void onAnimationEnd(Animation animation) {
        // Nothing to do here
     }
  });
hit.startAnimation(animationFadeIn); 
```

**编辑：** 这里有一种非常快速和简单的方法来启用/禁用单击按钮：您可以使用布尔变量：

```
private boolean hasClicked = false 
```

现在将其添加到您的 OnClickListener 中：

```
if(!hasClicked) {
    hasClicked = true;
    // call your animate method
} 
```

现在您必须再次“启用”该按钮。你必须在你的 AnimationListener @Override public void onAnimationEnd(Animation animation) { hasClicked = false; }

如果对您有帮助，请不要忘记点赞 :)

# linux - 如何grep模式后的内容？

> ID：10358547
> 
> 赞同：105
> 
> 时间：2012-04-27T22:12:26.627
> 
> 标签：linux, grep

给定一个文件，例如：

```
potato: 1234
apple: 5678
potato: 5432
grape: 4567
banana: 5432
sushi: 56789 
```

我想对所有以 开头的行进行 grep 处理，`potato:`但只使用管道后面的数字`potato:`。所以在上面的例子中，输出将是：

```
1234
5432 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2012-04-27T22:14:27.987

```
grep 'potato:' file.txt | sed 's/^.*: //' 
```

[`grep`](https://pubs.opengroup.org/onlinepubs/9699919799/utilities/grep.html)查找包含 string 的任何行`potato:`，然后，对于这些行中的每一行，[`sed`](https://pubs.opengroup.org/onlinepubs/9699919799/utilities/sed.html)将`s///`任何字符 ( `.*`) 从行 ( `^`) 的开头直到序列的最后一次出现`:`（冒号后跟空格）替换为空字符串（`s/...//`- 用第二部分替换第一部分，第二部分为空）。

或者

```
grep 'potato:' file.txt | cut -d\   -f2 
```

对于包含`potato:`,的每一行，[`cut`](https://pubs.opengroup.org/onlinepubs/9699919799/utilities/cut.html)将把该行拆分为由空格分隔的多个字段（`-d\`- `d`= 分隔符，`\`= 转义的空格字符，类似的东西`-d" "`也可以使用）并打印每个这样的行的第二个字段 ( `-f2`)。

或者

```
grep 'potato:' file.txt | awk '{print $2}' 
```

对于包含 的每一行`potato:`，[`awk`](https://pubs.opengroup.org/onlinepubs/9699919799/utilities/awk.html)将打印`print $2`默认由空格分隔的第二个字段 ( )。

或者

```
grep 'potato:' file.txt | perl -e 'for(<>){s/^.*: //;print}' 
```

包含的所有行都`potato:`被发送到一个内联 ( `-e`) [Perl](https://perldoc.perl.org)脚本，该脚本从 中获取所有行[`stdin`](https://en.wikipedia.org/wiki/Standard_streams#Standard_input_(stdin))，然后，对于这些行中的每一行，执行与上面第一个示例中相同的替换，然后打印它。

或者

```
awk '{if(/potato:/) print $2}' < file.txt 
```

文件通过`stdin`(`< file.txt`将文件的内容发送`stdin`到左侧的命令) 发送到`awk`脚本，对于包含`potato:`(`if(/potato:/)`如果正则表达式`/potato:/`匹配当前行，则返回 true ) 的每一行，打印第二个字段，如所述多于。

或者

```
perl -e 'for(<>){/potato:/ && s/^.*: // && print}' < file.txt 
```

该文件通过`stdin`( `< file.txt`，见上文) 发送到与上述类似的 Perl 脚本，但这次它还确保每一行都包含字符串`potato:`(`/potato:/`是一个正则表达式，如果当前行包含`potato:`，并且如果它执行 ( `&&`)，然后继续应用上述正则表达式并打印结果）。

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2012-04-27T22:59:07.293

或使用正则表达式断言：`grep -oP '(?<=potato: ).*' file.txt`

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-04-27T22:15:47.750

```
sed -n 's/^potato:[[:space:]]*//p' file.txt 
```

可以将 Grep 视为受限 Sed，或将 Sed 视为广义 Grep。在这种情况下，Sed 是一个很好的轻量级工具，可以满足您的需求——当然，还有其他几种合理的方法可以做到这一点。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2020-07-10T18:36:42.610

```
grep -Po 'potato:\s\K.*' file 
```

`-P`使用 Perl 正则表达式

`-o`只输出匹配

`\s`匹配之后的空间`potato:`

`\K`省略比赛

`.*`匹配其余字符串

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-06-28T17:36:37.073

这将在每场比赛后打印所有内容，仅在同一行上：

```
perl -lne 'print $1 if /^potato:\s*(.*)/' file.txt 
```

这将做同样的事情，除了它还将打印所有后续行：

```
perl -lne 'if ($found){print} elsif (/^potato:\s*(.*)/){print $1; $found++}' file.txt 
```

使用这些命令行选项：

*   `-n`循环输入文件的每一行
*   `-l`在处理之前删除换行符，然后将它们添加回来
*   `-e`执行 perl 代码

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-05-09T02:47:52.573

正如其他答案所述，您可以使用 grep。但您不需要 grep、awk、sed、perl、cut 或任何外部工具。你可以用纯 bash 来做到这一点。

试试这个（分号可以让你把它全部放在一行上）：

```
$ while read line;
  do
    if [[ "${line%%:\ *}" == "potato" ]];
    then
      echo ${line##*:\ };
    fi;
  done< file.txt 
```

## 告诉 bash 从前面删除 $line 中最长的 ":" 匹配。

```
$ while read line; do echo ${line##*:\ }; done< file.txt
1234
5678
5432
4567
5432
56789 
```

或者，如果您想要键而不是值， %% 告诉 bash 从末尾删除 $line 中“：”的最长匹配。

```
$ while read line; do echo ${line%%:\ *}; done< file.txt
potato
apple
potato
grape
banana
sushi 
```

要拆分的子字符串是“:\”，因为空格字符必须用反斜杠转义。

[您可以在linux 文档项目](https://www.tldp.org/LDP/abs/html/string-manipulation.html)中找到更多类似的内容。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-10-23T13:59:10.773

现代 BASH 支持正则表达式：

```
while read -r line; do
  if [[ $line =~ ^potato:\ ([0-9]+) ]]; then
    echo "${BASH_REMATCH[1]}"
  fi
done 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2021-10-28T13:32:54.827

```
grep potato file | grep -o "[0-9].*" 
```

# java - 在Java中移动数组中的对象？

> ID：10358548
> 
> 赞同：0
> 
> 时间：2012-04-27T22:12:31.167
> 
> 标签：java, arrays, object, move

我是 Java 新手，在数组周围移动对象时遇到了一些麻烦；问题是：假设你有一个`X`对象在 中`m[i][j]`，并且在 中有一个 Y 对象`m[i][j+1]`。我想要的是移动`X`到`m[i][j+1]`，显示`X`在那个位置，然后将它移动到`m[i][j+2]`，并使`Y`对象回到原来的位置。有任何想法吗？

### 编辑：

*   第 1 步应该显示：XY _
*   第 2 步：_ X _
*   第三步：_YX

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T23:10:10.523

```
 final Object underScoreObjectWhateverThatIs = null;
    final Object o1 = new Integer(1);
    final Object o2 = new Integer(2);
    final Object o3 = new Integer(3);
    final Object o4 = new Integer(4);
    final Object[][] m = new Object[][]{new Object[]{null, o1}, new Object[]{o1, o2, o3, o4}};
    final int i = 1;
    final int j = 1;
    //Test vars set up
    //Going for step 1;
    m[i][j + 2] = underScoreObjectWhateverThatIs;
    //We now have step one
    Object X = m[i][j];
    Object Y = m[i][j + 1];
    m[i][j] = underScoreObjectWhateverThatIs;
    m[i][j + 1] = X;
    //We now have step 2
    m[i][j + 1] = Y;
    m[i][j + 2] = X;
    //We now have step 3
            // (X was o2, and Y was o3 here if that is unclear) 
```

* * *

这是我对你所描述的最好的解释。这是java代码，但它尖叫着这里有一些不好的想法。出于某种原因，我们有对象数组的数组，如果原因不是很好，我们可能应该重新考虑编写一些类或使用列表/集合或其他东西。你真正想做什么？为什么我们要搞乱数组？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T23:56:56.010

听起来您正在有效地处理两层......这不仅仅是简单的数组操作。您正在描述 X 可以在同一空间中位于 Y 前面的状态。

你有很多选择。你可以有一个 X 的数组和一个 Y 的数组。当你循环遍历元素时，你测试 X 是否存在然后打印它，否则打​​印 Y 数组中的任何内容。如果 X 只是一个字符，它甚至可以用一个整数变量来表示。将数组视为仅包含 Y 或下划线，但当您循环遍历其元素时，如果您在第 X 个元素上，则打印“X”而不是 Y 数组中的元素。

# tcl - 如何使用参数列表中的参数调用过程

> ID：10358562
> 
> 赞同：2
> 
> 时间：2012-04-27T22:14:10.830
> 
> 标签：tcl

这是 Tcl 8.4。

我正在尝试制作一个可以在用户指定的任何其他程序上执行常见操作的程序。

例如：

```
proc process_menu_item {command args {count 1}} {
    set inf     [expr {$count == -1 ? 1 : 0}]
    set end_str [expr {$count == -1 ? "inf" : $count}]
    set loop_cnt 0

    while {$inf || $count > 0} {
        incr loop_cnt
        puts [format "------- %s -------" [bold "LOOP $loop_cnt of $end_str"]]

        $command $args
    }
    return
} 
```

我希望这个过程只会执行指定的 $command $count 次。我遇到的问题是传递参数。

假设我想调用这样的过程：

```
proc example {{par_a {-1}} {par_b {-1}} {par_c 1}} {
    puts "All params: $par_a $par_b $par_c"
} 
```

我该怎么打电话`process_menu_item`？甚至可能吗？我尝试了一个字符串，一个列表，但最终`par_a`得到了一个包含所有参数的大列表。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T07:08:50.857

(First off, the `args` parameter to a procedure is only magical when it is last. Put anything after it and it becomes just an ordinary variable. Just so you know. Of course, that might even be what you need here!)

To call out of `process_menu_item`, you'd want to change:

```
$command $args 
```

to this (Tcl 8.4 or earlier):

```
eval $command $args 
```

Well, if you are *paranoid* you actually write this:

```
eval [list $command] [lrange $args 0 end] 
```

Or you use Tcl 8.5 (or later):

```
$command {*}$args 
```

Then, you'd probably build the call *to* `process_menu_item` like this:

```
process_menu_item frobnicate [list foo bar] 
```

There are a few other ways to do it rather than using `list` (many Tcl commands can produce lists) or you could use a literal:

```
process_menu_item frobnicate {foo bar} 
```

What isn't recommended is putting anything in that literal refers to variables inside `process_menu_item` (which would only work with the shortest `eval`-based form). It lets you do awesome stuff, but it's also incredibly fragile. If you want to pass in the loop variable, that's quite possible but it requires techniques that are a little more advanced (and you should ask another question).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T23:00:20.943

你总是可以构造一个包装函数：

```
proc wrapper {arg_list} {
    example [lindex $arg_list 0] [lindex $arg_list 1] [lindex $arg_list 2]
} 
```

TCL 8.5 具有专为此类事情设计的[`{*}`运算符：](http://wiki.tcl.tk/17158)

```
% proc test {a b c} {
    puts a
    puts b
    puts c
}
%
% set inp [list "A" "B" "C"]
A B C
% test $inp
wrong # args: should be "test a b c"
% test {*}$inp
a
b
c 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T10:57:39.217

I'm not able to give a more comprehensive answer right now, but `interp alias` might get you where you want to go. There's an example [at rosettacode.org](http://rosettacode.org/wiki/Towers_of_Hanoi#Tcl). If that doesn't fit, perhaps explore [command traces](http://tcl.tk/man/tcl8.5/TclCmd/trace.htm) -- those fire for every command and you can make choices based on the command name.

# mysql - 在 MySQL 中合并两个表

> ID：10358567
> 
> 赞同：0
> 
> 时间：2012-04-27T22:14:35.783
> 
> 标签：mysql

我有两个 mysql 表，我想在一个查询中合并在一起。最好用一个例子来描述：

```
table: users
| user_id | username |
| 1       | jason    |
| 2       | justin   |

table: user_data
| user_id | key   | data            |
| 1       | email | jason@email.com |
| 1       | phone | 555-123-4567    |
| 2       | email | justin@email.com|
| 2       | phone | 555-765-4321    |

query results:
| user_id | username | email            | phone        |
| 1       | jason    | jason@email.com  | 555-123-4567 |
| 2       | justin   | justin@email.com | 555-765-4321 | 
```

您可以假设所有用户的密钥都非常统一（即所有用户都有电子邮件和电话）。我的第一个想法是做这样的事情，但我很好奇是否有更好的方法：

```
SELECT *,e.data as email,p.data as phone FROM users u
  LEFT JOIN user_data AS e ON e.user_id=u.user_id AND `key`='email'
  LEFT JOIN user_data AS p ON p.user_id=u.user_id AND `key`='phone'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T22:18:47.427

> 所有用户都有电子邮件和电话

那么为什么不在原始表中为它们添加列呢？

```
table: users
| user_id | username | email | phone  |
| 1       | jason    | ....  | ....   |
| 2       | justin   | ....  | ....   | 
```

它将使查询更加容易和快捷。

您使用的设计称为[实体属性值](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model)(EAV)，通常在属性很多但填充稀疏的情况下很有用。

假设您不能或不想更改表设计，我对您的查询所做的唯一更改是不使用`SELECT *`. 明确列出列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T22:26:18.753

我同意@Mark Ba​​yers。

然而，如果你坚持你的设计，你应该考虑这一点：一个用户是否有可能拥有不止一封电子邮件？或不止一部手机？如果是这种情况，那么您将获得每位用户的所有电话和电子邮件组合。

如果您只想为每个用户提供一行，并在各个字段中包含所有数据，您可以尝试以下操作：

```
SELECT     users.id, users.username
,          GROUP_CONCAT(IF(user_data.key = 'email', user_data.data, NULL)) emails
,          GROUP_CONCAT(IF(user_data.key = 'phone', user_data.data, NULL)) phones
FROM       users
INNER JOIN user_data
ON         users.id = user_data.user_id
GROUP BY   users.id 
```

# jsp - 将日期作为参数传递

> ID：10358569
> 
> 赞同：1
> 
> 时间：2012-04-27T22:14:43.660
> 
> 标签：jsp

我有一个名为 event_date 的文本框，其中包含“日期”内容

```
<input style="width: 196px" id="f_date1" name="event_date"/> 
```

我怎样才能将文本框的参数传递给 servlet 并在我准备好的语句中使用它。在我的数据库中，列 event_date 的数据类型为“日期”。

我知道如何为 String 做这件事（如下所示），但我将如何在 Date 中做这件事......

```
String event_date = request.getParameter("event_date");

  try {
  event_date2 = java.util.Timestamp.parse(event_date);
  Class.forName("org.postgresql.Driver");
  connection = DriverManager.getConnection(connectionURL, "mydb", "pass");

  String sql ="insert into prodtracker (event_date) values(?)";

  PreparedStatement pst = connection.prepareStatement(sql);

  pst.setString(1, event_date2); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T00:47:23.817

您可以使用`java.text.SimpleDateFormat`将字符串解析为`java.util.Date`对象。可以指定不同的日期格式和语言环境来解析。像这样的一个例子：

```
SimpleDateFormat format = new SimpleDateFormat("dd-MMM-yyyy");
Date date = format.parse(request.getParameter("event_date")); 
```

然后您可以转换`java.util.Date`为`java.sql.Date`以便在 PreparedStatement 中使用：

```
java.sql.Date sqlDate = new java.sql.Date(date.getTime());
PreparedStatement pst = connection.prepareStatement(sql);
pst.setDate(1, sqlDate); 
```

最好在客户端或当它已发送到服务器端时对数据格式进行一些检查，以确保它符合特定的日期格式，然后再将其解析为日期。

# sql - 两个表的平面连接

> ID：10358571
> 
> 赞同：3
> 
> 时间：2012-04-27T22:15:03.070
> 
> 标签：sql, oracle, inner-join

对于这两个表：

```
CREATE TABLE TEST1 ( ID  INTEGER ,key  VARCHAR(50),VALUE1 VARCHAR(50));
CREATE TABLE TEST2 ( ID  INTEGER ,key  VARCHAR(50),VALUE2 VARCHAR(50)); 
```

表格1：

```
130,    'HANSEN',   'STREET1'
130,    'HANSEN',   'STREET2'
130,    'HANSEN',   'STREET3'
120,    'HANSEN',   'STREET5'
120,    'HANSEN',   'STREET6' 
```

表2：

```
130,    'HANSEN',   'ZIP1'
130,    'HANSEN',   'ZIP2'
130,    'HANSEN',   'ZIP3'
120,    'HANSEN',   'ZIP4'
120,    'HANSEN',   'ZIP5' 
```

是否有可能获得如下输出：

```
130,    'HANSEN',   'ZIP1','STREET1'
130,    'HANSEN',   'ZIP2','STREET2'
130,    'HANSEN',   'ZIP3','STREET3'
120,    'HANSEN',   'ZIP4','STREET5'
120,    'HANSEN',   'ZIP5','STREET6' 
```

尝试在 id、key 上进行内部连接，但我得到了笛卡尔积
感谢您的帮助。

辅助脚本（如果有人愿意测试它）：

```
DROP TABLE TEST1;
DROP TABLE TEST2;

CREATE TABLE TEST1 ( ID  INTEGER ,key  VARCHAR(50),VALUE1 VARCHAR(50));
CREATE TABLE TEST2 ( ID  INTEGER ,key  VARCHAR(50),VALUE2 VARCHAR(50));

INSERT INTO TEST1 VALUES (130,  'HANSEN',   'STREET1');
INSERT INTO TEST1 VALUES (130,  'HANSEN',   'STREET2');
INSERT INTO TEST1 VALUES (130,  'HANSEN',   'STREET3');
INSERT INTO TEST1 VALUES (120,  'HANSEN',   'STREET5');
INSERT INTO TEST1 VALUES (120,  'HANSEN',   'STREET6');

INSERT INTO TEST2 VALUES (130,  'HANSEN',   'ZIP1');
INSERT INTO TEST2 VALUES (130,  'HANSEN',   'ZIP2');
INSERT INTO TEST2 VALUES (130,  'HANSEN',   'ZIP3');
INSERT INTO TEST2 VALUES (120,  'HANSEN',   'ZIP4');
INSERT INTO TEST2 VALUES (120,  'HANSEN',   'ZIP5'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T07:09:49.747

这应该这样做：

```
with t1 as (
    select id, 
           key, 
           value1,
           row_number() over (partition by id order by key, value1) as rn
    from test1
), 
t2 as (
    select id, 
           key, 
           value2,
           row_number() over (partition by id order by key, value2) as rn
    from test2
)
select t1.id, 
       t2.key, 
       t2.value2||','||t1.value1
from t1
  join t2 on t1.id = t2.id and t1.key = t2.key and t1.rn = t2.rn
order by 1 desc, 3 asc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T22:31:34.417

它不漂亮，根据 Oracle 为您提供结果集的顺序，您可能会得到奇怪的结果，但您可以尝试：

```
select t1.id, t1.key, t1.value1, t2.value2 
  from
     (select rownum rn, id, key, value1 from test1) t1 
          inner join
     (select rownum rn, id, key, value2 from test2) t2
          using (rn) 
```

如果您需要按照您的建议“合并”这两个表，我会尝试添加一些“合并”列来这样做，而不是使用这种方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T02:03:54.467

不.. 没有办法可靠地获得您想要的输出。

看起来您的数据模型缺少一些信息。即某种方式将行从测试 1 链接到测试 2.. 您目前拥有的 id/key 不够唯一。

我认为你能做的最好的就是

```
select *
from test1 
inner join test2 using (id,key)
order by 1 desc,2,3,4 
```

这给出了输出

```
130 HANSEN  STREET1 ZIP1
130 HANSEN  STREET1 ZIP2
130 HANSEN  STREET1 ZIP3
130 HANSEN  STREET2 ZIP1
130 HANSEN  STREET2 ZIP2
130 HANSEN  STREET2 ZIP3
130 HANSEN  STREET3 ZIP1
130 HANSEN  STREET3 ZIP2
130 HANSEN  STREET3 ZIP3
120 HANSEN  STREET5 ZIP4
120 HANSEN  STREET5 ZIP5
120 HANSEN  STREET6 ZIP4
120 HANSEN  STREET6 ZIP5 
```

# javascript - 如何从 html 5 文件 API 获取图像宽度

> ID：10358576
> 
> 赞同：1
> 
> 时间：2012-04-27T22:15:51.780
> 
> 标签：javascript, image, html, file-upload

我正在尝试从图像拖放中获取图像宽度和高度，html 5 文件 api。这就是我试图获得宽度的方式：

```
function process_drop(evt) {

        evt.stopPropagation(); 
        evt.preventDefault(); 
        var files = evt.dataTransfer.files; 

    // run through each file individually.
    for (var i = 0, f; f = files[i]; i++) {

        console.log('file_size=' + f.size);

        // check if it is an image          
        if (f.type.match('image.*')) {
            console.log('this is an image ' + f.type);

            //try to get the file width
            var img = new Image();           
            img.src = f;
            console.log('img.width=' + img.width); //does not work           
        }

    } 
} 
```

以像素为单位获取图像宽度和高度的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T22:22:09.403

您不能`<input type=file>`直接使用对象作为`<img>`.

首先将其转换为 dataURI：[https ://developer.mozilla.org/en/Using_files_from_web_applications#Example:_Using_object_URLs_to_display_images](https://developer.mozilla.org/en/Using_files_from_web_applications#Example:_Using_object_URLs_to_display_images)

此外，您需要先触发 Image.onload() 事件，然后才能尝试访问宽度值。

# java - 添加 char 和 int

> ID：10358583
> 
> 赞同：6
> 
> 时间：2012-04-27T22:16:46.923
> 
> 标签：java, char, int

据我了解，char 是单个字符，即字母、*数字*、标点符号、制表符、空格或类似的东西。因此，当我这样做时：

```
char c = '1';
System.out.println(c); 
```

输出 1 正是我所期望的。那么为什么当我这样做时：

```
int a = 1;
char c = '1';
int ans = a + c;
System.out.println(ans); 
```

我最终得到输出**50**？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T22:19:20.453

你得到它是因为它添加了字符的[ASCII 值](http://en.wikipedia.org/wiki/ASCII)。您必须先将其转换为 int。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T22:20:30.720

数字 1 是 ASCII 代码 49。编译器正在对您的请求执行它可以做的唯一明智的事情，并将类型转换为 int。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T22:21:01.133

最终得到 out of 是`50`因为您已告诉 Java 将加法的结果视为`int`以下行中的 an：

```
int ans = a + c; 
```

而不是`int`您声明`ans`为`char`.

像这样：

```
final int a = 1;
final char c = '1';
final char ans = (char) (a + c);
System.out.println(ans); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T22:21:50.657

因为您将 c (1) 的值添加到 'a' 的 unicode 值，即 49。前 128 个 unicode 点值与 ASCII 相同，您可以在此处找到这些值：

[http://www.asciitable.com/](http://www.asciitable.com/)

注意 Chr '1' 是 12 月 49 日。其余的 unicode 点在这里：

[http://www.utf8-chartable.de/](http://www.utf8-chartable.de/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T22:20:47.020

char 是伪装的 int。char 通过将字符编码为 int 来表示字符。例如，'c' 编码为 49。当你将它们加在一起时，你会得到一个 int，它是 char 的代码和 int 的值的总和。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-27T22:22:51.827

'1' 是一个数字，而不是数字，并以 ASCII 编码为值 49。

Java 中的字符可以提升为 int，因此如果您要求将类似 1 的 int 添加到类似 '1'（别名 49）的 char 中，则将更窄的类型 char 提升为 int，得到 49，+ 1 => 50。

请注意，每个非数字字符都可以以相同的方式添加：

```
'a' + 0 = 97
'A' + 0 = 65
' ' + 0 = 32 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-27T22:25:31.263

'char' 实际上只是一个两字节的无符号整数。

价值`'1'`和`1`是非常不同的。`'1'`被编码为两字节值 49。

“字符编码”是您要研究的主题。或来自 Java 语言规范：[http ://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.2.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.2.1)

# objective-c - 在多选项测验模板中选择的 UILabel

> ID：10358590
> 
> 赞同：0
> 
> 时间：2012-04-27T22:17:06.357
> 
> 标签：objective-c, ios5, uilabel

我是新手，正在尝试创建一个多选项测验。我已经将选项创建为标签，该结构目前正在运行。

我想让标签在点击时突出显示。我尝试更改字体颜色等...但到目前为止没有任何效果。

任何帮助，将不胜感激...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T23:21:59.430

完成此操作的最简单方法是在您的 UILabel 上放置一个 UIButton，并将类型设置为自定义。这将使它对用户不可见。然后，您可以将按钮的 touch up inside 事件连接到一个方法，并从那里更改 UILabel 的样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T22:23:02.653

1.  如果您显示代码，您将获得更多有用的答案。

2.  您可能应该使用 UIButton 而不是 UILabel。UILabel 不是控件，也不是真正为交互而设计的。

3.  在更改了像 UILabel 这样的视图的属性后，您可能需要调用`-setNeedsDisplay`它来重绘它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T22:23:25.087

A`UILabel`不是它的子类，`UIControl`它为您提供所需的继承功能。您最好使用按钮来执行此操作，因为它们是`UIControl`. 您可以制作一个与上述文本一样显示的按钮。

# windows - gvim：转到具有多个窗口和多个选项卡打开的特定文件

> ID：10358591
> 
> 赞同：0
> 
> 时间：2012-04-27T22:17:09.207
> 
> 标签：windows, vim, vi, gedit

我正在将编辑器从 gedit 转移到 gvim。在 gedit 中，当我打开多个 gedit 窗口时，每个窗口都有多个选项卡，我可以单击 Documents，它将列出所有选项卡和打开的窗口中的所有文件，我可以通过从列表中单击转到其中的任何一个。

我怎样才能在 gvim 中做到这一点？gvim 中的 Buffers 按钮仅列出当前窗口中打开的文件。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T07:36:02.983

GVim 是一个单窗口程序。如果你有两个 GUI 窗口，你就有两个独立的 GVim 进程，它们不能真正相互交谈。

从“普通”编辑器切换到 Vim 并不是在公园里散步：您必须适应 Vim 的思维方式才能成功切换。

Vim 的 "windows" 和 "tabs" 的名字很糟糕，给新手带来了很大的困惑。

在“普通”编辑器中，选项卡（或没有选项卡的 GUI 窗口）是文件的 1:1 表示，GUI 窗口是选项卡/文件的集合。该系统是确定性的：只要您没有关闭它，您就可以将第一个窗口等同于`Controlers/`，将第二个窗口的第二个选项卡等同于`Models/User.php`等等。因为那个“普通”编辑器是一个多窗口程序，所有这些选项卡和窗口都是一个进程的子进程，所以主进程很容易提供所有窗口和选项卡的列表。

在 GVim 中，两个 GUI 窗口由两个独立的进程创建：GUI 窗口 #1 不知道 GUI 窗口 #2。此外，Vim 的“窗口”和“选项卡”的概念根本不是确定性的。“窗口”只是一个缓冲区的视图，这个缓冲区可以是当前内存中的任何缓冲区。“选项卡”是窗口的集合，其名称自动设置为当前显示在活动“窗口”中的缓冲区。在极端情况下，您最终可能会`x`在选项卡的窗口中显示相同的缓冲区`y`。

因此，由于 GVim 的设计，我认为没有大量工作来模仿 Gedit 的行为是不可能的。

因为这太容易了，特别是对于新用户来说，混淆他们的“缓冲区”、“窗口”和“选项卡”我建议你至少暂时远离“选项卡”，并学习使用“缓冲区” ”和“窗口”发挥最大作用。

Vim 的默认行为是在用另一个缓冲区替换当前窗口中的当前缓冲区之前要求您保存当前缓冲区。我认为这就是很多人转向在 Vim 中使用制表符的原因。`set hidden`并`set switchbuf=useopen`解决这个“问题”并允许您在同一个窗口中打开许多缓冲区。使用本机工具切换缓冲区非常容易：使用[CtrlP](http://www.vim.org/scripts/script.php?script_id=3736)或[其他](http://www.vim.org/scripts/script_search_results.php?keywords=buffer%20switching&script_type=&order_by=creation_date&direction=descending&search=search)`:sb <tab>`3rd 方工具时性感/强大。如果您习惯在不同的窗口中拥有项目的不同部分（例如，一个用于，一个用于，一个用于，或者一个用于后端，一个用于前端），您可以使用 Vim 的选项卡。`Controlers/``Models/``Views/`

# android - 如何使用 libgdx 为 2D 正确设置投影？

> ID：10358592
> 
> 赞同：0
> 
> 时间：2012-04-27T22:17:21.307
> 
> 标签：android, opengl-es, libgdx

我刚开始使用来自纯 opengl-es 的 libgdx，我想为一个简单的 2d 游戏正确设置我的屏幕。我偶然发现了2个问题：

*   我应该使用什么方法：glu.gluOrtho2d()、使用正交相机或其他方法
*   我应该将什么传递给这些方法？

对于第二个，我的意思是如果我应该以某种方式将投影设置为与分辨率相同（左下角 0,0 和右上角 320,480）并且我在 resize() 方法中设置投影，或者我可以更好它以我举例说明的方式指定`width = 20, height=width*ratio`，因为我必须为 android 部署它，这意味着很多不同的屏幕尺寸和比例。

我希望我的问题有任何意义，但我现在很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T07:06:19.743

这是一个解决方案的链接（使用您描述的比率）

[http://www.java-gaming.org/index.php?topic=25685.0](http://www.java-gaming.org/index.php?topic=25685.0)

# c++ - QueueUserAPC 不工作，除非在线程创建后立即使用？

> ID：10358593
> 
> 赞同：0
> 
> 时间：2012-04-27T22:17:42.567
> 
> 标签：c++, winapi

我在使用 API 函数时遇到了一些困难`QueueUserAPC`。基本上，我创建了一个新线程，它只是在我创建`WaitForSingleObject`的`Event`对象上循环使用。我希望这个线程有点像一个“单独的”工作线程，我可以将随机函数调用分配给我需要异步处理的..

但是，当我创建线程时，唯一有效的时间`QueueUserAPC`是在创建*线程*之后。如果我插入说，`Sleep(2000);`就在 之后`CreateThread`，然后放在`QueueUserAPC`Sleep 之后，它将不会执行该功能，即使如果我之前`Sleep`（立即）执行它也可以。

我尝试使用不同的线程句柄，我尝试重置事件对象，检查返回值`QueueUserAPC`何时它不起作用（它等于 1，MSDN 说非零结果是成功操作）。

我不知道该怎么办。任何建议将不胜感激。

谢谢！

JR

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T22:32:06.493

使用 WaitForSingleObjectEx()。除非使用“Ex”警报等待调用之一，否则 APC 不会出队并由线程运行。如果等待返回 WAIT_IO_COMPLETION - APC 已被线程执行。通常，使用某种循环来忽略该完成：

```
while(WAIT_IO_COMPLETION==WaitForSingleObjectEx(waithandle, INFINITE,true));
// do signalled stuff 
```

# php - PHP - 写入文件

> ID：10358594
> 
> 赞同：3
> 
> 时间：2012-04-27T22:17:46.863
> 
> 标签：php, file, unix, debian, wamp

我在 WAMP 中执行这个 php 脚本，它从我的本地主机正确地进行

```
<?php
    $file = fopen('../logs/appels_interface.log', 'a');
    fputs($file, "TEST");
    fclose($file); 
?> 
```

在我的 DEBIAN 服务器中部署我的脚本（将路径更改为 /var/www/dreamteam/logs/appels_interface.log）并从外部 URL 调用它时，不会创建文件...

请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T22:21:16.397

确保`/var/www/dreamteam/logs/`日志文件（如果存在）可由 Apache 写入。如果您有 SSH 访问权限，请登录并使用`chmod`和/或`chown`在命令行上。否则，您可能必须使用图形 FTP 客户端来完成。

为了快速简单的测试，让它们在世界范围内可写，例如 0777 的权限。但是为了安全起见，你需要弄清楚 Apache 运行的用户名是什么，并使你的日志目录和文件的所有权等于那个，并且还降低权限级别。您想使用完成这项工作所需的最低权限。我经常将 0700 用于目录，将 0500 用于文件。

# vsto - 带有 Visual Studio 11 的 VSTO 2010

> ID：10358596
> 
> 赞同：1
> 
> 时间：2012-04-27T22:17:57.640
> 
> 标签：vsto, compatibility, visual-studio-2012

我对 Visual Studio 开发几乎完全陌生（我当时确实使用过 VB6，但那是很久以前的事了），我正在尝试为 Project 2010 和其他 MS Office 开发 COM 插件2010 年申请。我现在要做的一件事是[按照教程使用 Ribbon Designer 创建自定义选项卡](http://msdn.microsoft.com/en-us/library/bb386104.aspx)。

但是，我现在停留在“*创建操作窗格*”部分的第 2 步：

> 在“**添加新项”**对话框中，选择**ActionsPaneControl**，然后单击“**添加**” 。

不幸的是，我使用的是免费的 Visual Studio 11 Beta，并且在“Visual C#”或“在线”项目列表中都没有“ActionsPaneControl”或“Actions Pane Control”。

我遇到过对这个控件的引用，它是[VSTO](http://msdn.microsoft.com/en-us/office/hh133430)包的一部分，但似乎还没有 VS11 的 VSTO 包。那么 VSTO 2010 会与 VS11 一起使用，还是会破坏 VS11？我在这里有什么选择？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-28T01:22:12.577

操作窗格控件仅适用于文档级插件。您遵循的教程适用于 Excel 工作簿项目（文档级插件）。Project 2010 只有应用程序级插件。对于应用程序插件，它称为自定义任务窗格。

对于应用程序级别的插件，请使用 UserControl，这里是添加自定义任务窗格的教程。

[http://msdn.microsoft.com/en-us/library/aa942864.aspx](http://msdn.microsoft.com/en-us/library/aa942864.aspx)

[http://blogs.msdn.com/b/vsto/archive/2010/02/02/add-a-custom-task-pane-to-project-2010-norm-estabrook.aspx](http://blogs.msdn.com/b/vsto/archive/2010/02/02/add-a-custom-task-pane-to-project-2010-norm-estabrook.aspx)

# c++ - 为什么这个函数不分解这个输入字符串？

> ID：10358598
> 
> 赞同：1
> 
> 时间：2012-04-27T22:17:59.247
> 
> 标签：c++, tokenize, lexer

我正在尝试使用 C++ 将字符串分解为“符号”以进行进一步的工作。我已经很久没有用 C++ 写过任何东西了，所以如果这段代码本身有什么问题，请原谅我。

下面函数的目的`symbolize()`是将一个字符串，例如“5+5”，分解成一个`vector`字符串，例如`{"5","+","5"}`。它不工作。如果您认为代码太乱，请提出一种简化它的方法。

到目前为止，这是我的代码：

```
#include <iostream>
#include <string>
#include <vector>
#include <ctype.h>
#include <sstream>

using namespace std;

vector<string> symbolize(string);

int main(int argc, const char * argv[])
{

    string input;
    cin >> input;

    vector<string> symbols;

    symbols = symbolize(input);

    for(int i=0;i<symbols.size();i++){
        cout<<symbols.at(i) << endl;
    }

    return 0;
}

vector<string> symbolize(string input){
    int position = 0;
    char c;
    stringstream s;
    vector<string> symbols;
    enum symbolType {TEXT,OPERATOR}symbolType,charType;

    while(position < input.size()){
        c = input.at(position);
        if(isalnum(c))symbolType = TEXT;
        else symbolType = OPERATOR;
        charType = symbolType;

        while(symbolType == charType){
            s << c;
            position++;
            if(position>=input.length())break;
            c = input.at(position);
            if(isalnum(c)) charType = TEXT;
            else charType = OPERATOR;
        }

        symbols.push_back(s.str());
        s.clear();
    }

    return symbols;
} 
```

谢谢参观。

编辑：顺便说一句，我应该提到该函数返回第一个“令牌”，例如“5+5”->“5”

编辑2：我错了。我刚刚尝试了“5+5”，它返回了`{"5","5+","5+5"}`。但是，它只返回空格前的第一个。对困惑感到抱歉！

编辑3：谢谢大家！对于那些将来可能会遇到此页面的人，这里是说完所有事情后的代码：

```
#include <iostream>
#include <string>
#include <vector>
#include <ctype.h>
#include <sstream>

using namespace std;

vector<string> symbolize(string);

int main(int argc, const char * argv[])
{

    string input;
    getline(cin,input);

    vector<string> symbols;

    symbols = symbolize(input);

    for(int i=0;i<symbols.size();i++){
        cout<<symbols.at(i) << endl;
    }

    return 0;
}

vector<string> symbolize(string input){
    int position = 0;
    char c;
    //stringstream s;
    vector<string> symbols;
    enum symbolType {TEXT,OPERATOR}symbolType,charType;

    while(position < input.size()){
        stringstream s;
        c = input.at(position);
        if(isalnum(c))symbolType = TEXT;
        else symbolType = OPERATOR;
        charType = symbolType;

        while(symbolType == charType){
            s << c;
            position++;
            if(position>=input.length())break;
            c = input.at(position);
            if (isspace(c)||c=='\n'){position++; break;}
            if(isalnum(c)) charType = TEXT;
            else charType = OPERATOR;
        }

        symbols.push_back(s.str());
    }

    return symbols;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T22:27:13.527

stringstream::clear 不清除字符串缓冲区（仅清除错误状态）。

您可以使用`stringstream::str(x)`设置字符串缓冲区，因此`s.str(string())`或`s.str("")`代替`s.clear()`将清除字符串缓冲区。

此外，`operator<<(istream, ...)`直到空白才读取。

对于阅读，您可以尝试使用：

*   istream::get 一次读取一个字符；或者;
*   std::getline(istream,...) 一次读取一行；或者;
*   istream::read 将任意数量的字符读入缓冲区。

[http://en.cppreference.com/w/cpp/io/basic_istream](http://en.cppreference.com/w/cpp/io/basic_istream)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T22:35:47.180

如果您想阅读一整行而不是一个单词，请使用 getline 而不是 operator>>。有关详细信息，请参见[http://www.cplusplus.com/reference/string/getline/](http://www.cplusplus.com/reference/string/getline/)，或者只需将第 14 行更改为“getline(cin, input);”。

另外，如果要输出“5”、“+”、“5”而不是“5”、“5+”、“5+5”，每次循环都需要重新设置stringstream，而clear不会不要那样做。解决这个问题的最简单方法是在外循环中声明 stringstream 并摆脱 clear 调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T22:32:20.493

如果你`stringstream s;`在第一个`while`循环内移动，你应该达到你的目标。

`s.clear()`只[重置字符串流的错误状态标志](http://www.cplusplus.com/reference/iostream/ios/clear/)，它不像`std::string::clear()`

# css - 包装器div内的div未对齐底部

> ID：10358601
> 
> 赞同：0
> 
> 时间：2012-04-27T22:18:30.417
> 
> 标签：css, vertical-alignment, margins

我很难解决这个问题，虽然它一定很简单......

我的页面上有一个包含其他 div 元素的 div 包装器。`margin-top`所有都使用in对齐`px`；但最后一个（页脚）我需要它`margin-bottom:0px`，以便它显示在包装器的底部，但这不起作用：页脚始终显示在页面顶部。

我在这里讨论了其他对齐问题，尝试给`position: absolute`页脚和`position:relative`包装器；没用。我也尝试使用 % heights 和 min-height ......但仍然是顶部的页脚

我对此感到有点沮丧:(

**CSS：**

```
body {
    margin: 0px;
    background-repeat: repeat;
    background-image: url(images/modulo-pattern-grey-light.gif);
}
#body-quienes {
    height: 800px;
}
#pagina {
    height: 720px;
    margin: 0 auto;
    background: #fff url(images/footer.gif) left bottom no-repeat;
    width: 980px;
    box-shadow: 4px 4px 5px #999;
}

.header {
    position: absolute;
    margin-top: 0px;
    margin-bottom: 0 px;
    margin-right: auto;
    margin-left: auto;
    height: 70px;
    width: 980px;
    margin: 0px;
    background-image: url(images/header.gif);
}

.menu_container{
    position: absolute;
    float: left;
    width: 270px;
    margin-top: 220px;  
}
.main_menu ul { 
    padding: 0px; 
    margin:0px;
    list-style-type: none;  
}
.main_menu ul li {
    font-family:Arial, Helvetica, sans-serif; 
    text-transform: uppercase;
    font-size:11px; 
    letter-spacing:4px;
    text-align:right; 
    line-height:35px;  
    list-style-type:none;
}
.main_menu ul li a  {
    padding-right: 25px;  
    text-decoration:none;  
    color:#999;
    display: inline-block;  
} 
.main_menu ul li a.selected {
    color: #bc4c9b;
    font-weight:bold; 
    background: url(images/circle.gif) right center no-repeat;
}   
.main_menu ul li a:hover {
    text-decoration:none;  
    color:#999;  
    font-weight:bold;  
    background:url(images/circle_grey.gif) right center no-repeat;
}  

.quienes_pic{
    position: absolute;
    height: 259px;
    width: 174px;
    margin-left: 306px;
    margin-top: 230px;
    background-image: url(images/san.jpg);
}
.quienes_text{
    position: absolute;
    padding-left: 25px;
    border-left: 2px dotted #ccc;
    width: 395px;
    height: 360px;
    margin-left: 510px;
    margin-top: 230px;
    font-family:Arial, Helvetica, sans-serif; 
    font-size:12px;
    color: #bc4c9b;
    line-height:20px;
    content-left-padding: 25px; 
}
.footer {
    position:absolute;
    margin-bottom: 0px;
    margin-left: 490px;
    width: 460px;
    height: 98px;
    margin-right: 30px;
    background-color: #bc4c9b;
 } 
```

**HTML：**

```
<body id="body-quienes">
    <div id="pagina">
        <div class="header"></div>
        <div class="logo"></div>
        <div class="flashanim"></div>
        <div class="menu_container">
            <div class="main_menu">  
                <ul>  
                    <li><a href="index.html">Home</a></li>  
                    <li><a class="selected" >Quiénes Somos</a></li>  
                    <li><a href="consultoria.html">Consultoría</a></li>  
                    <li><a href="capacitacion.html">Capacitación</a></li>  
                    <li><a href="academico.html">Académico / Artículos</a></li>  
                    <li><a href="alianzas.html">Alianzas</a></li> 
                    <li><a href="proyectos.html">Proyectos</a></li>  
                    <li><a href="contacto.html">Contacto</a></li>   
                </ul>  
            </div> 
        </div>
        <div class="quienes_pic"></div>
        <div class="quienes_text">Main Text</div>
        <div class="footer"></div>
    </div>​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T23:27:08.997

正如有人已经问过的，为什么你的大多数 div 都是绝对定位的。阅读不同类型的定位、它们的作用以及何时应该使用它们。

看到您的页脚是绝对定位的，我假设您需要将以下代码添加到您的 CSS 中的页脚部分。

```
bottom: 0px; 
```

试试这个。

但请注意，不要使用绝对定位和左边距将您的 div 对齐到中心。为此，您需要使用：

```
margin: 0 auto; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T23:25:01.640

检查[这个小提琴](http://jsfiddle.net/uxLSH/)。它在我的脑海中仍然没有正确显示，但我认为那是因为我不太确定你想要的设计，但我在小提琴中所做的将你的粉红色页脚放在页面底部。

我所做的是将页脚从其中取出`pagina` `<div>`并将其设置在其下方，瞧，您的页脚位于页面底部。让我知道这是否适合您，或者您是否需要不同的东西。

# python - 计算 Python 中用户输入（鼠标键盘）的出现次数？

> ID：10358609
> 
> 赞同：0
> 
> 时间：2012-04-27T22:19:22.603
> 
> 标签：python, input, keyboard, mouse, pyhook

我正在尝试制作一个小型应用程序，它将显示平均每分钟的用户输入量（我希望它显示基于击键和鼠标点击的平均值，例如 APM 计数器ala Starcraft。）。

我刚刚完成了一些 python 教程，并决定尝试扩展，以便“边做边学”。我用 tkinter 制作了一个简单的 GUI，但对于如何处理用户输入方面的事情感到很困惑。

阅读处理键盘输入的类似线程我已经做了一些关于 pyHook 和 pythoncom 的研究，但我不确定如何正确实现这些......

以下是到目前为止我对 GUI 所做的尝试。我希望我可以将用户输入数据作为变量返回并将其放在 DISPLAYCOUNT 位置，然后将结果显示在框中，但也许这不是它的工作方式。

```
from Tkinter import *
import tkMessageBox
import pythoncom, pyHook

tk = Tk()
tk.iconbitmap(default='transicon.ico')

class GUIFramework(Frame):        
    def __init__(self, master=None):
        Frame.__init__(self, master)        
        self.master.title("APM")        
        self.grid(padx=10, pady=10)
        self.CreateWidgets()

    def CreateWidgets(self):                        
        self.lbText = Label(self, text="APM:")
        self.lbText.grid(row=0, column=0)
        self.lbText = Label(self, text=DISPLAYCOUNT)
        self.lbText.grid(row=0, column=1, columnspan=3)

if __name__ == "__main__":
    guiFrame = GUIFramework()
    guiFrame.mainloop() 
```

感谢您的任何指示。

# javascript - 自动完成和 mod_evasive

> ID：10358614
> 
> 赞同：1
> 
> 时间：2012-04-27T22:20:05.430
> 
> 标签：javascript, jquery, apache, ddos, mod-evasive

一位朋友告诉我，我的网站容易受到 DDos 或 Slowloris 攻击。我问他我能做些什么。他建议**mod_evasive**，现在这是我的问题。

1）这足以保护我吗？

2 ) 我安装并设置了**mod_evasive**并且一切正常，但现在我在 ajax 请求方面遇到了一些问题。我在 twitter **@username**中提到了一个自动完成的朋友，当 textarea 在 keyup 上并且当**@**之后有超过 3 个符号发出 ajax 请求并显示一些朋友的名字时，我做到了。**问题是当@**后面有超过 4 个符号时，它会发出太多请求，并且用户会被阻止一段时间。这怎么能解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T22:08:43.393

很老的问题，但我也遇到了这个问题。**您可以通过编辑“mod-evasive.conf”**文件来解决此问题。

```
<ifmodule mod_evasive20.c>
   DOSHashTableSize 3097
   DOSPageCount  20
   DOSSiteCount  100
   DOSPageInterval 1
   DOSSiteInterval  1
   DOSBlockingPeriod  10
   DOSLogDir   /var/log/mod_evasive
   DOSEmailNotify  email@dom.com
   DOSWhitelist   127.0.0.1
</ifmodule> 
```

你必须玩弄**"DOSPageCount"**和**"DOSPageInterval"**。您应该发现合法的 ajax 调用和 ddos​​ 攻击之间的和谐。我确信有一些更专业的解决方案可以解决这个问题，比如为 ajax 文件提供例外，但我还没有时间四处寻找更多信息。我希望它有帮助...

# powershell - -EA 开关在 Send-MailMessage 上代表什么？

> ID：10358615
> 
> 赞同：5
> 
> 时间：2012-04-27T22:20:14.927
> 
> 标签：powershell

例如：

> Send-MailMessage -To $to -From $sender -subject $subject -SmtpServer $mailserver -Attachments $efile -EA Stop

所有这些开关都记录在[http://technet.microsoft.com/en-us/library/dd347693.aspx](http://technet.microsoft.com/en-us/library/dd347693.aspx)上，但 -EA 开关除外。

这个开关有什么作用，我在哪里可以找到关于它的文档（及其参数）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-27T23:35:08.277

`-ea`是 的参数别名`-ErrorAction`。请参阅[http://ss64.com/ps/common.html](http://ss64.com/ps/common.html)。它列在`Send-MailMessage` [文档](http://technet.microsoft.com/en-us/library/dd347693.aspx)的常用参数中。

这显示了 ErrorAction 的选项：

```
[enum]::getValues([System.Management.Automation.ActionPreference]) | % {"$_ = (" + [int]$_ + ")"} 
```

您可以使用字符串或数字作为参数值。

```
SilentlyContinue = (0)
Stop = (1)
Continue = (2)
Inquire = (3) 
```

`Send-MailMessage -EA Inquire`或者`Send-MailMessage -EA 3`都是有效的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-28T09:23:09.747

以下是获取给定命令的参数别名的方法：

```
PS> $cmd = 'Get-ChildItem'
PS> (Get-Command $cmd).Parameters.GetEnumerator() | Select-Object Key,@{n='Aliases';e={$_.Value.Aliases}}

Key             Aliases
---             -------
Path            {}
LiteralPath     PSPath
Filter          {}
Include         {}
Exclude         {}
Recurse         {}
Force           {}
Name            {}
Verbose         vb
Debug           db
ErrorAction     ea
WarningAction   wa
ErrorVariable   ev
WarningVariable wv
OutVariable     ov
OutBuffer       ob
UseTransaction  usetx 
```

# java - 如何在Java中返回字符串中字符的索引数组

> ID：10358625
> 
> 赞同：0
> 
> 时间：2012-04-27T22:21:36.990
> 
> 标签：java

我需要编写一个方法来返回Java字符串中字符的索引数组。下面的好（正确性、效率、尽可能短的代码）是否足够？

```
int[] charIndexArray(String s, char c) {
    int start = 0;
    List<Integer> list = new ArrayList<Integer>();
    while ((start = s.indexOf(c, start)) != -1) {
        list.add(start);
        start++;
    }
    int arr[] = new int[list.size()];
    for (int i = 0; i < ret.length; i++)
        arr[i] = list.get(i);
    return arr;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T22:42:18.397

代替：

```
while ((start = s.indexOf(c, start)) != -1) {
    list.add(start);
    start++;
} 
```

考虑：

```
for (int i = 0; i < s.length(); i++) {
    if (s.charAt(i) == c) {
      list.add(i);
    }
 } 
```

因为 indexOf 会导致创建一个完整的其他循环来搜索角色的下一个实例。

您的代码正在悄悄地做：

```
while (start != -1) {
    start = -1;
    for ( int i=start;i<s.length();i++){
      if ( charAt(i) == c ) {
        start = i;
        break;
      }
    }
    if ( start != -1 ) { 
    list.add(start);
    start++;
  }
} 
```

这似乎不是更有效。但事实证明，在花费了太多时间之后：

```
static int[] charIndexArrayByBits(String s, char c) {
    int start = 0;
    int[] list = new int[s.length()];
    int count = -1;
    while ((start = s.indexOf(c, start)) != -1) {
      list[++count] = start;
      start++;
    }
    return Arrays.copyOf(list, count);
  } 
```

是比较快的。但是在一般情况下，我不会认为它更有效，因为您分配的 int 数组在空间上会更大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T22:25:40.157

[您可以通过调用toArray() 方法](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#toArray%28%29)替换最后将其复制到数组的代码。除此之外，看起来还不错。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T22:28:40.127

代码看起来不太好。

您使用两个循环而不是一个。

尝试使用方法。

charAt(int pos) 用于字符串和 Arrays.copy

OP 不应该阅读更多内容；p

首先是这种方法应该放在某个 util 类中的位置，并且是静态的恕我直言。

```
public class CharSequenceUtil {

    private static int[] EMPTY_INT_ARRAY = new int[0];

    /**
    * Method search the position of given character in char sequence.
    *
    * @param CharSequence seq - Sequence of char that will be investigate 
    * @param char c - Character that is analysed.
    *
    * @return int array with positions of char c in CharSequence instanace
    * @throws NullPointerException if seq is null.
    */
    public static int[] charIndexArray(CharSequence seq, char c) {

      if(seq == null) {
        throw new NullPointerExcetion("The seq must not be null");
      }

      if(seq.length() == 0) {
        return EMPTY_INT_ARRAY;
      }

      int[] positions = new int[seq.lenth()];
      int stor = -1; 

      for(int pos = 0; pos < seq.length(); seq++) {
         if(c == seq.charAt(pos)) {
          positions[++stor] = pos;
         }
      }

      if(stor == -1) {
        return EMPTY_INT_ARRAY;
      }

      return Arrays.copyOf(positions, stor);
    }
} 
```

# php - PHP Mail() Base64 将电子邮件作为编码文本发送

> ID：10358626
> 
> 赞同：0
> 
> 时间：2012-04-27T22:21:37.330
> 
> 标签：php, ubuntu, base64

刚刚将站点迁移到新服务器。迁移后，php mail() 会发出以文本编码且难以理解的电子邮件。经过一番研究，似乎这可能是base64的问题？我不确定新设置如何导致以前工作的旧电子邮件模板不再工作。旧设置是 Open Solaris，新设置是 Ubuntu 10.04。消息输出：

```
Content-Type: text/html; charset=utf-8

MIME-Version: 1.0
Mime-Version: 1.0
Content-Transfer-Encoding: BASE64
Message-Id: <20120427211219.E50AE1C83A@li439-167.members.linode.com>
Date: Fri, 27 Apr 2012 17:12:19 -0400 (EDT)
X-pstn-dkim: 0 skipped:not-enabled

PHA+RGVhciBNciBSaWNoYXJkIEVicmlnaHQsPC9wPgoKPHA+VGhhbmsgeW91IHZlcnkgbXVjaCBm

b3Igc3VibWl0dGluZyBhIHNwZWNpYWwgYXBwbGljYXRpb24gdG8gSGFydmFyZApOYXRpb25hbCBN

b2RlbCBVbml0ZWQgTmF0aW9ucyAyMDEzLjwvcD4KCjxwPldlIGFyZSB2ZXJ5IHBsZWFzZWQgdG8g

YXNzaWduIHlvdSB0aGUgZm9sbG93aW5nIHBvc2l0aW9uOjxiciAvPgpBc3NpZ25tZW50OiBMYXJy

eSBQYWdlIChDRU8pPGJyIC8+CkNvbW1pdHRlZTogWmFwYXRhJiMwMzk7cyBDYW1wLCAxOTExPC9w

PgoKPHA+V2UgcmVjZWl2ZWQgYSBsYXJnZSBudW1iZXIgb2YgYXBwbGljYXRpb25zIHRoaXMgeWVh

ciBhbmQgaGF2ZSBkb25lCm91ciB2ZXJ5IGJlc3QgdG8gYWNjb21tb2RhdGUgeW91ciBwcmVmZXJl

bmNlcy4gUGxlYXNlIG5vdGUgdGhhdCBhbGwKYXNzaWdubWVudCBkZWNpc2lvbnMgYXJlIGZpbmFs

LgoKVGhpcyBhc3NpZ25tZW50IGlzIG5vdyByZWZsZWN0ZWQgaW4geW91ciBhY2NvdW50IGluIG91

ciA8YQpocmVmPSJodHRwOi8vbXVuYmFzZS5obm11bi5vcmciPm9ubGluZSByZWdpc3RyYXRpb24g

c3lzdGVtPC9hPiwgd2hpY2gKeW91IGNhbiBhY2Nlc3MgdXNpbmcgdGhlIHNhbWUgbG9nLWluIGFu

ZCBwYXNzd29yZCB5b3UgdXNlZCB0bwpyZWdpc3Rlci4KIFBsZWFzZSB2aXNpdCA8YSBocmVmPSJo

dHRwOi8vd3d3LmhubXVuLm9yZyI+d3d3LmhubXVuLm9yZzwvYT4gZm9yCm1vcmUgaW5mb3JtYXRp

b24gYWJvdXQgeW91ciBjb21taXR0ZWUuPC9wPgo8cD5QbGVhc2Ugbm90ZSB0aGF0IHlvdSBhcmUg

cmVxdWlyZWQgdG8gc3VibWl0IHlvdXIgJDc1IGRlbGVnYXRlIGZlZQpubyBsYXRlciB0aGFuIDEg

RGVjZW1iZXIgMjAxMi4gV2l0aG91dCB0aGUgcGF5bWVudCBvZiB5b3VyIGRlbGVnYXRlCmZlZSwg

d2UgcmVzZXJ2ZSB0aGUgcmlnaHQgdG8gcmVhc3NpZ24geW91ciBwb3NpdGlvbiB0byBhbm90aGVy

CmRlbGVnYXRlLjwvcD4KPHA+SWYgeW91IGhhdmUgYW55IHF1ZXN0aW9ucyBvciBjb25jZXJucywg

cGxlYXNlIGZlZWwgZnJlZSB0byBlbWFpbApvdXIgc3RhZmYgYXQgPGEgaHJlZj0ibWFpbHRvOmlu

Zm9AaG5tdW4ub3JnIj5pbmZvQGhubXVuLm9yZzwvYT4uIFdlCmxvb2sgZm9yd2FyZCB0byBzZWVp

bmcgeW91IGF0IEhOTVVOIDIwMTMgaW4gRmVicnVhcnkhPC9wPgoKCgo8cD5TaW5jZXJlbHksPGJy

IC8+CkdpbGxpYW4gVC4gRmFycmVsbDxiciAvPgpTZWNyZXRhcnktR2VuZXJhbDxiciAvPgpIYXJ2

YXJkIE5hdGlvbmFsIE1vZGVsIFVuaXRlZCBOYXRpb25zIDIwMTM8L3A+Cg== 
```

谢谢您的帮助！长期用户，第一次发帖。希望能更多地回馈 StackOverflow 社区。

**编辑：**处理邮件发送的 Yii 扩展（？）。

```
<?php
/**
 * Email class file.
 * 
 * @author Jonah Turnquist <poppitypop@gmail.com>
 * @link http://php-thoughts.cubedwater.com/
 * @version 1.0
 */
class Email extends CApplicationComponent {
/**
 * @var string Type of email.  Options include "text/html" and "text/plain"
 */
public $type = 'text/html';
/**
 * @var string Receiver, or receivers of the mail.
 */
public $to = null;

/**
 * @var string Email subject
 */
public $subject = '';

/**
 * @var string from address
 */
public $from = null;

/**
 * @var string Reply-to address
 */
public $replyTo = null;

/**
 * @var string Return-path address
 */
public $returnPath = null;

/**
 * @var string Carbon Copy
 *
 * List of email's that should receive a copy of the email.
 * The Recipient WILL be able to see this list
 */
public $cc = null;

/**
 * @var string Blind Carbon Copy
 *
 * List of email's that should receive a copy of the email.
 * The Recipient WILL NOT be able to see this list
 */
public $bcc = null;

/**
 * @var string Main content
 */
public $message = '';

/**
 * @var string Delivery type.  If set to 'php' it will use php's mail() function, and if set to 'debug'
 * it will not actually send it but output it to the screen
 */
public $delivery = 'php';

/**
 * @var string language to encode the message in (eg "Japanese", "ja", "English", "en" and "uni" (UTF-8))
 */
public $language= 'uni';

/**
 * @var string the content-type of the email
 */
public $contentType= 'utf-8';

/**
 * @var string The view to use as the content of the email, as an alternative to setting $this->message.
 * Must be located in application.views.email directory.  This email object is availiable within the view
 * through $email, thus letting you define things such as the subject within the view (helps maintain 
 * seperation of logic and output).
 */
public $view = null;

/**
 * @var array Variable to be sent to the view.
 */
public $viewVars = null;    

/**
 * @var string The layout for the view to be imbedded in. Must be located in
 * application.views.email.layouts directory.  Not required even if you are using a view
 */
public $layout = null;

/**
 * @var integer line length of email as per RFC2822 Section 2.1.1
 */
public $lineLength = 70;

public function __construct() {
    Yii::setPathOfAlias('email', dirname(__FILE__).'/views');
}

  /**
   * Model United Nations Specific sending function.
   */
  public function quick($subject, $view, $to, $info=null, $cc=null) {
$this->subject = $subject;
$this->from = 'ADDRESS REMOVED';
$this->to = $to;
if ($cc) $this->cc = $cc;
$this->bcc = 'ADDRESS REMOVED';
$this->view = $view;
$this->send($info);
  }

/**
 * Sends email.
 * @param mixed the content of the email, or variables to be sent to the view.
 * If not set, it will use $this->message instead for the content of the email
 */
public function send($arg1=null) {
    if ($this->view !== null) {
        if ($arg1 == null)
            $vars = $this->viewVars;
        else
            $vars = $arg1;

        $view = Yii::app()->controller->renderPartial('application.views.email.'.$this->view, array_merge($vars, array('email'=>$this)), true);
        if ($this->layout === null) {
            $message = $view;
        } else {
            $message = Yii::app()->controller->renderPartial('application.views.email.layouts.'.$this->layout, array('content'=>$view), true);
        }
    } else {
        if ($arg1 === null) {
            $message = $this->message;
        } else {
            $message = $arg1;
        }
    }

    //process 'to' attribute
    $to = $this->processAddresses($this->to);
    return $this->mail($to, $this->subject, $message);
}

private function mail($to, $subject, $message) {
    switch ($this->delivery) {
        case 'php':
            $message = wordwrap($message, $this->lineLength);
    mb_internal_encoding("UTF-8");
            mb_language($this->language);
            return mb_send_mail($to, $subject, $message, implode("\r\n", $this->createHeaders()), '-fmunbase@ADDRESS.org');
        case 'debug':
            $debug = Yii::app()->controller->renderPartial('email.debug',
                    array_merge(compact('to', 'subject', 'message'), array('headers'=>$this->createHeaders())),
                    true);
            Yii::app()->user->setFlash('email', $debug);
            break;
    }
}
private function createHeaders() {
    $headers = array();

    //maps class variable names to header names
    $map = array(
        'from' => 'From',
        'cc' => 'Cc',
        'bcc' => 'Bcc',
        'replyTo' => 'Reply-To',
        'returnPath' => 'Return-Path',
    );
    foreach ($map as $key => $value) {
        if (isset($this->$key))
            $headers[] = "$value: {$this->processAddresses($this->$key)}";
    }
    $headers[] = "Content-Type: {$this->type}; charset=".$this->contentType;
    $headers[] = "MIME-Version: 1.0";

    return $headers;
}
private function processAddresses($addresses) {
    return (is_array($addresses)) ? implode(', ', $addresses) : $addresses;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T05:47:55.270

原来额外的线路回报是罪魁祸首。原始（错误版本）消息头摘录如下：

```
X-PHP-Originating-Script: 0:Email.php
From: Harvard National Model United Nations 2013 <info@hnmun.org>

Content-Type: text/html; charset=UTF-8

Mime-Version: 1.0

Content-Transfer-Encoding: BASE64 
```

并且是由扩展控件中的 implode 命令引起的：

```
private function mail($to, $subject, $message) {
switch ($this->delivery) {
    case 'php':
        $message = wordwrap($message, $this->lineLength);
mb_internal_encoding("UTF-8");
        mb_language($this->language);
        return mb_send_mail($to, $subject, $message, implode("\r\n", $this->createHeaders()), '-fmunbase@ADDRESS.org');
    case 'debug':
        $debug = Yii::app()->controller->renderPartial('email.debug',
                array_merge(compact('to', 'subject', 'message'), array('headers'=>$this->createHeaders())),
                true);
        Yii::app()->user->setFlash('email', $debug);
        break;
} 
```

原来它需要一个参数`implode("\n", $this->createHeaders())`而不是`implode("\r\n", $this->createHeaders())` 与新版本的 PHP 或新操作系统有关的东西？谢谢大家的帮助！

# python - Python 脚本正在打开 Python 2.7 解释器

> ID：10358629
> 
> 赞同：0
> 
> 时间：2012-04-27T22:21:58.487
> 
> 标签：python, ubuntu

我最近在 Kubuntu 12.04 ( `iPython`, `matplotlib`, `numpy`, `ipython-notebook`, `ipython-qtconsole`, `python-scipy`) 上安装了几个 Python 包。现在，当我尝试从命令行 ( `./script.py`) 运行 python 脚本时，我被扔进了 python 解释器。

例子：

```
user@machine:~/$ ./script.py 

Welcome to Python 2.7!  This is the online help utility.

If this is your first time using Python, you should definitely check out
the tutorial on the Internet at http://docs.python.org/tutorial/.

Enter the name of any module, keyword, or topic to get help on writing
Python programs and using Python modules.  To quit this help utility and
return to the interpreter, just type "quit".

To get a list of available modules, keywords, or topics, type "modules",
"keywords", or "topics".  Each module also comes with a one-line summary
of what it does; to list the modules whose summaries contain a given word
such as "spam", type "modules spam".

help> 
```

为什么会这样？

我能做些什么来阻止这个？

除了删除 iPython 还有其他选择吗？

编辑：我应该提到脚本是一个 python 模块。我不知道这是否与它有关。我能够运行一个简单的`hello world`脚本就好了。

@亚当米哈尔辛： `#!/usr/bin/python`

编辑 2：看起来这与 iPython 无关。我删除了 iPython，但我仍然遇到这个问题。这是文件的内容。（这发生在我的大多数 Python 文件中）

```
#!/usr/bin/python

# Import libraries
import sys
import subprocess

def createCommand(project):
    # Create the basic command
    command = "git clone " + project

    subprocess.call(command, shell = True)

    return 0

def helpMenu():

    return 0;

def validateInput(user_input):
    # validity key
    valid = 0

    if (len(user_input) < 3):
        help()
        return 1

    if (user_input[1] == '-cl'):
        if (len(user_input) == 3):
            valid = 1
            return 0

    if (valid == 0):
        help()
        return 1

def main(user_input):
    # Validate inputs
    failure = validateInput(user_input)

    # Return if there was a failure    
    if (failure == 1):
        return 1;

    # Create the git commands        
    failure = createCommand(user_input[2])

    # Return if there was a failure    
    if (failure == 1):
        return 1;

    return 0;

if (__name__ == '__main__'):
    main(sys.argv) 
```

编辑3：误报！

这很尴尬。`help()`事实证明，我知道我的函数会遇到命名空间问题。我将其更改为`helpMenu()`但忘记更改它的名称。

我很抱歉浪费了帖子。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:17:39.537

这很尴尬。事实证明，我知道我的 help() 函数会遇到命名空间问题。我将其更改为 helpMenu() 但忘记更改它的调用位置。

我很抱歉浪费了帖子。:(

# android - windows屏幕保护程序作为android动态壁纸

> ID：10358632
> 
> 赞同：0
> 
> 时间：2012-04-27T22:22:16.130
> 
> 标签：android, windows, live-wallpaper

我想知道是否有办法处理 .scr 文件（Windows 屏幕保护程序文件）以从中制作 android 动态壁纸？我在谷歌上搜索了很多关于它没有运气。

有没有人知道如何做到这一点或我可以在哪里找到有用的信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T22:30:30.627

您也许可以使用 WINE 运行 .SCR...

安卓上的葡萄酒

[http://forum.xda-developers.com/showthread.php?t=1258506](http://forum.xda-developers.com/showthread.php?t=1258506)

.SCR 在 WINE 下

[http://wiki.winehq.org/ScreenSavers](http://wiki.winehq.org/ScreenSavers)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T22:28:26.723

.scr 文件只是具有不同扩展名的 Windows 可执行文件。它是从与 Android 完全不兼容的 x86 指令构建的。

即使您要从源代码重新编译屏幕保护程序，Windows API 的编程也将与 Android 完全不同。

这根本不可能。

# c - fork后关闭的描述符在其他进程中是否无效？

> ID：10358633
> 
> 赞同：2
> 
> 时间：2012-04-27T22:22:17.217
> 
> 标签：c, sockets

我指的是来自此[链接](http://www.linuxhowtos.org/C_C++/socket.htm)的以下代码片段：

```
while (1)
 {
   newsockfd = accept(sockfd,
               (struct sockaddr *) &cli_addr, &clilen);
   if (newsockfd < 0)
     error("ERROR on accept");
   pid = fork();
   if (pid < 0)
     error("ERROR on fork");
   if (pid == 0)
   {
     close(sockfd);
     dostuff(newsockfd);
     exit(0);
   }
   else
     close(newsockfd);
 } /* end of while */

void dostuff (int sock)
{
   int n;
   char buffer[256];

   bzero(buffer,256);
   n = read(sock,buffer,255);
   if (n < 0) error("ERROR reading from socket");
   printf("Here is the message: %s\n",buffer);
   n = write(sock,"I got your message",18);
   if (n < 0) error("ERROR writing to socket");
} 
```

在 fork() 调用之后，将有两个进程 - 父进程和子进程。

对于父进程，else 部分成立，因此它将关闭 newsockfd。但是newsockfd被子进程用于dostuff方法中的读写系统调用。这种情况下读写系统调用不会失败吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T22:26:12.743

不，因为在`fork`所有打开的文件描述符都被复制并且它们不是相同的描述符时，它们只是指向同一个文件。

从[`fork(2)`手册页](http://linux.die.net/man/2/fork)：

> 子继承父的一组打开文件描述符的副本。子文件中的每个文件描述符与父文件中的相应文件描述符引用相同的打开文件描述（请参阅 open(2)）。这意味着两个描述符共享打开文件状态标志、当前文件偏移量和信号驱动的 I/O 属性（参见 fcntl(2) 中对 F_SETOWN 和 F_SETSIG 的描述）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T22:26:29.610

子进程将在自己的内存中拥有自己全新的“newsockfd”。那里的套接字句柄与正在关闭的父级“newsockfd”没有任何共同之处。

# memory - 非规范线性地址和一般保护异常

> ID：10358634
> 
> 赞同：2
> 
> 时间：2012-04-27T22:22:18.980
> 
> 标签：memory, x86, x86-64, intel, virtual-address-space

英特尔手册对规范地址和一般保护异常进行了以下说明：

来自（第 1 卷，第 3-13 页）：

*“如果线性内存引用不是规范形式，则实现应该生成异常。在大多数情况下，会生成通用保护异常 (#GP)。...”*

来自（第 3A 卷，第 6-52 页）：

*“以下情况会导致 64 位模式下的一般保护异常：
- 如果内存地址采用非规范形式。
- 如果段描述符内存地址采用非规范形式......”*

我很想知道 RIP 的内容是否也被归类为*“内存地址”*，如上面引用中所述。还是 RIP 可以包含非规范地址但在 RIP 用于引用内存中的位置之前不会引发#GP？

***[编辑]***

我现在更仔细地阅读手册，尤其是 CALL、RET 和 JMP 指令的伪代码（因为它们可以随意更改 RIP）。我注意到在 64 位模式下，地址的规范性检查是在它存储到 RIP 之前完成的，因此在 RIP 获得非规范地址之前会引发#GP。所以，我的问题的答案是 RIP 永远不能包含非规范地址。

我担心的情况 --- 因为包含非规范地址的 RIP 用于引用内存位置而引发#GP --- 根本不会出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T23:49:03.787

RIP 还必须包含规范地址，而不仅仅是访问内存时的 RSP 或 RBX。

**编辑**：您可以看到 RIP 没有被排除在以下要求之外：

*   SYSENTER/SYSEXIT 和 SYSCALL/SYSRET 的描述
*   “中断 13 - 一般保护异常 (#GP)”部分：`If the target offset in a destination operand of a call or jmp is in a non-canonical form.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T04:32:57.513

会有什么不同？如果您尝试通过跳转或调用指令设置 RIP，处理器**将**尝试加载该地址并进行陷阱。是否将陷阱指定为在寄存器集中或​​从 icache 加载是否重要？

# jquery - CheckBox 图像作为 jqxGrid 中的列

> ID：10358635
> 
> 赞同：0
> 
> 时间：2012-04-27T22:22:24.260
> 
> 标签：jquery, checkbox, jqxgrid

我正在使用 jqxGrid 插件在网格中显示数据。我有 4 列，其中之一是 CheckBox 图像列...

这是我的复选框图像的列设置

```
 columns: [ // Column names
                  {text: '', datafield: 'Check', editable: false, width: colWidth * 0.3, cellsrenderer:   function(row, column, value) {
                     return '<span style="margin:4px;float:left"           
                                  onclick="clickImage(this)"><img class="image-unchecked" 
                                          src="../../Images/checkbox_off.png"/></span>'
}, renderer: function(value) {
                    return '<span style="margin:4px;float:left" onclick="clickImage(this)">
                      <img class="image-unchecked" src="../../Images/checkbox_off.png"/></span>'}
] 
```

在 clickImage 函数中，我根据类名称替换源。如果在显示的复选标记图像上，则显示空图像。当单击单元格时，此单击事件似乎会触发..但是当单击 cloumnHeader 时，由于某种未知原因没有触发单击事件..有人可以帮助我吗..

我也尝试过不起作用的“columnclick”......谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T11:10:57.623

这对我有用：

```
$("#jqxgrid").bind('columnclick', function (event) {
    var column = event.args.datafield;
    alert(column);
} 
```

见： [http ://www.jqwidgets.com/jquery-widgets-demo/#demos/jqxgrid/customrowsselection.htm](http://www.jqwidgets.com/jquery-widgets-demo/#demos/jqxgrid/customrowsselection.htm)

# android - Android VM 内存不足错误

> ID：10358637
> 
> 赞同：0
> 
> 时间：2012-04-27T22:22:47.990
> 
> 标签：android, memory, memory-management, dalvik

> **可能重复：**
> [OutOfMemoryError：位图大小超出 VM 预算：- Android](https://stackoverflow.com/questions/2928002/outofmemoryerror-bitmap-size-exceeds-vm-budget-android)

我已经上下研究了这个问题，但我找不到任何关于我的具体问题的信息。我使用位于可绘制文件夹中的 .PNG 文件作为按钮背景。按钮很大（大约 150p x 150p），并使用图像和渐变看起来不错。按下单个 .xml 文件中定义的按钮后，背景会发生变化。我在谷歌找到的解决方案似乎是针对以编程方式调用的图像，而不是在布局中指定的图像。当我不断退出并输入具有不同布局和不同按钮的不同活动时，我最终会出现内存不足错误

04-27 22:18:46.227: E/dalvikvm-heap(512): 396900 字节的外部分配对于这个进程来说太大了。

04-27 22:18:46.427：E/AndroidRuntime(512)：原因：java.lang.OutOfMemoryError：位图大小超出 VM 预算

我的问题是，当我的图像在布局中指定并且没有以编程方式添加时，如何分配更多内存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T02:20:41.987

关注**如何有效地显示位图**，[http://developer.android.com/training/displaying-bitmaps/index.html](http://developer.android.com/training/displaying-bitmaps/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T23:06:59.857

以下内容可以帮助您弄清楚是什么在吞噬您的记忆：

添加[UncaughtExceptionHandler](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.UncaughtExceptionHandler.html)并在收到 OOM 异常时转储堆。使用[Debug.dumpHprofData()](http://developer.android.com/reference/android/os/Debug.html#dumpHprofData%28java.lang.String%29)转储堆。在此之后，您使用[hprof-conv 转换文件并使用](http://developer.android.com/guide/developing/tools/hprof-conv.html)[Eclipse Memory Analyzer](http://www.eclipse.org/mat/)检查生成的文件。

注意 UncaughtExceptionHandler 中的包装异常，有时 OOM Exception 会包装在 RuntimeException 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T01:11:20.037

如果您在浏览应用程序时创建了同一 Activity 的多个实例，这可能会造成您的问题。使用 SINGLE_TOP 或 SINGLE_TASK 标志来解决此问题。但请注意，Android 中似乎存在关于 SINGLE_TOP 功能的错误。您需要将 Activity 声明为 SINLGE_TOP*并*使用 SINLGE_TOP 标志启动 Activity。这是文档：http: [//developer.android.com/guide/topics/manifest/activity-element.html#lmode](http://developer.android.com/guide/topics/manifest/activity-element.html#lmode)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T22:47:32.593

它是立即崩溃还是在一段时间后崩溃？一些图片不应该让你的应用崩溃，即使是大的。我过去发现在应用程序弹出之前，很多旋转都会泄漏内存。事实上，这是我看到 OOM 问题最多的地方。如果您遇到同样的问题，那是因为您保留了指向上下文、目录的指针或保留了指向 View 的指针。

# javascript - jQuery 每个附加元素

> ID：10358642
> 
> 赞同：2
> 
> 时间：2012-04-27T22:23:19.680
> 
> 标签：javascript, jquery

我在 jQuery 中使用自动完成插件，并且我创建了一个方法，该方法附加在自动完成结果中选择的元素。

```
$("#buscar").autocomplete({
source: "procesos/buscarPersona.php",
minLength: 2,
select: function(event, ui ){
    var name = ui.item.value;
    var id = ui.item.id_persona;
    $("#acreditados tbody").append('<tr id='+id+'><td>'+name+'<td><td>Monto: $<input name="monto_'+id+'" type="text" /><img id="delete_'+id+'" src="img/ico-delete.gif" /></td></tr>');
}
}); 
```

如您所见，我的代码将输入元素附加到我的页面。然后在其他方法中，我想对先前添加的输入中的值进行操作。

```
$("#tablaAm").click(function(){
    var montoTotal = 0;
    $("input[name^='monto_']").each(function(index){
        alert(index + ': ' + $(this).val());
    });
    }); 
```

问题是 .each() 不适用于这个新元素。我尝试了 .each() 用于加载页面时存在的输入并且我没有问题，问题是加载后附加的元素。

我怎样才能使这项工作？我尝试了 live() 方法，但我认为 .each 不是一个事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T22:29:12.103

您正在设置名称属性而不是 id。

它应该是：

```
$('input[name^="monto_"]') 
```

# jquery - jQuery 在 ASP.NET MVC 项目中找不到元素

> ID：10358667
> 
> 赞同：2
> 
> 时间：2012-04-27T22:26:29.243
> 
> 标签：jquery, asp.net-mvc

我正在制作一个 ASP.NET 3 MVC 项目，但似乎我无法让 jQuery 正常工作。

在视图中我有这样的东西：

```
<a id="login">lala</a> 
```

然后在 .js 文件中：

```
$("#login").click(function () {
    alert("lal");
}); 
```

警报不会显示在屏幕上。我已经在 _Layout 中添加了我的自定义 .js 文件的引用并更新到最新的库，但是无论我做什么我都找不到任何元素。我在这里做错了什么：s

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T22:29:52.217

尝试：

```
$(document).ready(function(){
    $("#login").click(function () {
        alert("lal");
    });
}); 
```

如果这确实解决了你的问题，谷歌搜索`jquery document ready`并阅读已经写出的大量材料，说明它的作用和存在的原因。

# asp.net - 使用 appcmd 添加新站点而不提供站点 ID？

> ID：10358672
> 
> 赞同：8
> 
> 时间：2012-04-27T22:27:06.690
> 
> 标签：asp.net, visual-studio-2010, iis, iis-7, batch-file

我正在编写一个批处理脚本来部署与 Visual Studio 2010 打包的网站。在脚本中，我正在添加新网站：

`appcmd add site /name:MySite /id:123`

但是，我不想指定站点 ID。我只想`appcmd`为我随机分配一个。但是`id`参数是必需的`appcmd`，那么我该如何解决呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-27T22:30:49.507

我从来不知道需要 /id 参数 - 我一直使用以下形式：

```
appcmd add site /name:"%appName%" /bindings:http://%appDns%:80 /physicalPath:"%mainApplicationPath%" 
```

而且从来没有任何问题。当您未指定 appcmd 时，它会给您什么错误？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T22:39:14.857

使用 appcmd 帮助，输入

```
%systemroot%\system32\inetsrv\APPCMD add site /? 
```

你会看到只需要 name 参数，这是输出的一部分：

> [w:\kanta]%systemroot%\system32\inetsrv\APPCMD 添加站点 /? 添加新的虚拟站点
> 
> APPCMD 添加站点 <-parameter1:value1 ...>
> 
> 使用指定的设置创建一个新的虚拟站点。至少，必须提供站点名称和 ID。
> 
> 支持的参数：
> 
> /名称（必填）
> 
> ```
> Site name 
> ```
> 
> /ID
> 
> ```
> Site id 
> ```
> 
> /绑定
> 
> ```
> List of bindings in the friendly form of "http://domain:port,..." or raw
> form of "protocol/bindingInformation,..." 
> ```
> 
> /物理路径
> 
> ```
> If specified, will cause the root application containing a root virtual
> directory pointing to the specified path to be created for this site.  If
> omitted, the site is created without a root application and will not be
> startable until one is created. 
> ```
> 
> /？
> 
> ```
> Display the dynamic site properties that can be set on the new site 
> ```

# iphone - 在 Objective-C 中，如何处理 [[myView alloc] init] 返回 nil？

> ID：10358678
> 
> 赞同：5
> 
> 时间：2012-04-27T22:27:44.227
> 
> 标签：iphone, objective-c, ios, error-handling

似乎在一本书的代码示例中，`init`总是定义 ，以便仔细检查是否`self`能够存在。

```
-(id) init {

    self = [super init];
    if (self) {
        // initialize
    }
    return self;
} 
```

但是，在返回时，根本没有任何代码检查对象是否能够存在。但是该不该检查，又该如何处理呢？如果对象不存在，是不是说明系统内存严重不足，甚至弹出错误信息也不可能了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T23:04:28.000

> 但是，在返回时，根本没有任何代码检查对象是否能够存在。但是该不该检查，又该如何处理呢？

通常，当`nil`返回时，子类会忽略错误处理。返回时，错误处理通常留给调用者`nil`。如惯用语所示`-init`：

```
- (id)init {
  self = [super init];
  if (self) {
    // initialize
  }
  return self;
} 
```

同样，如果基址在 中重新分配`self`，`init`则`self`重新分配 ( `self = [super init];`)。效果很好。

如果您未能分配给' 的初始化程序`self`的结果，`super`或者您未能检查如果没有遇到另一个区域）。`nil``EXC_BAD_ACCESS``EXC_BAD_ACCESS`

更详细的两个案例：

**分配自我失败**

```
- (id)init {
  [super init];
  if (self) {
    // self was not reassigned. if super returned an object other
    // than self, then our ivar would be freed, reused, or sitting
    // in an autorelease pool, and the returned instance's ivar
    // would not be assigned -- we wouldn't know the address.
    ivar = 1;
  }
  return self;
} 
```

**无法检查 nil**

```
- (id)init {
  self = [super init];
  // super returned nil. ivar is an invalid region:
  ivar = 1;
  return self;
} 
```

是的，我已经看到了这两个。

* * *

> 如果对象不存在，是不是说明系统内存严重不足，甚至弹出错误信息也不可能了？

一点也不。许多初始化器返回`nil`说“在这种情况下不能做”，或者是否存在简单的参数错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T22:37:48.210

> 这是否意味着系统内存严重不足

不会。分配内存失败通常会导致+alloc 失败，而不是-init。

实际上，没有参数的 init 方法失败的情况很少见。通常，如果您传递了无效的参数，init 方法可以返回 nil，例如 NSString 的 -initWithContentsOfFile: 如果无法加载应该初始化的文件路径的内容，则可以返回 nil。

如果您意识到初始化失败的可能性很大，则可能需要检查它，否则，您应该继续使用该对象。

# r - 将一个数据帧添加到 R 中另一个 data.frame 的末尾

> ID：10358680
> 
> 赞同：27
> 
> 时间：2012-04-27T22:27:57.037
> 
> 标签：r, dataframe, rows

我很难将一个添加到另一个数据框的底部。

我有一个数据框（我们称之为 DF1），它有 1 行和 5 列。我有另一个数据框（我们称之为 DF2），它有 50 行和 5 列。我将其设置为使两个数据框之间的列匹配-它们具有相同的列。实际上，DF1 是基于 DF2 的计算。

这是 DF1 的样子：

```
 row.names     pt1     pt2     pt3     pt4
   calc          0.93    0.45    0.28    0.54 
```

这是 DF2 的样子：

```
 row.names     pt1     pt2     pt3     pt4
   SNP1          AA      AG      AG      AA       
   SNP2          CT      CT      TC      CC
   SNP3          GG      CG      CG     <NA>
   SNP4          AA      GG      AG      AA
   SNP5         <NA>    <NA>    <NA>    <NA> 
```

DF1 应该是实际数据点的数量（未丢失的值的数量）除以可能值的总数。

所以..我想将 DF1 添加到 DF2 的底部，如下所示：

```
 row.names     pt1     pt2     pt3     pt4
   SNP1          AA      AG      AG      AA       
   SNP2          CT      CT      TC      CC
   SNP3          GG      CG      CG     <NA>
   SNP4          AA      GG      AG      AA
   SNP5         <NA>    <NA>    <NA>    <NA>
   calc          0.93    0.45    0.28    0.54 
```

当我尝试使用

```
 both.dfs <- rbind(DF1, DF2)  # DF1 is first here 
```

DF1 是 DF2 中的第一行。我需要它是最后一行。

当我尝试使用

```
both.dfs <- rbind(DF2, DF1)  # DF2 is first here 
```

我收到一个错误：

```
Warning messages:
1: In `[<-.factor`(`*tmp*`, iseq, value = 0.84) :
  invalid factor level, NAs generated
2: In `[<-.factor`(`*tmp*`, iseq, value = 0.84) :
  invalid factor level, NAs generated
3: In `[<-.factor`(`*tmp*`, iseq, value = 0.84) :
  invalid factor level, NAs generated
4: In `[<-.factor`(`*tmp*`, iseq, value = 0.74) :
  invalid factor level, NAs generated 
```

我尝试过合并，我尝试向 DF2 添加一个新行，然后插入 DF2 的值。似乎没有任何效果！我迫切需要一些帮助！任何人？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-28T12:07:36.600

这是你应该做的：

```
DFtranspose <- cbind(t(DF1[2, ]), t(DF2))
rownames(DFtranspose) <- DF1[1, ] 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2019-12-18T16:55:25.823

只要您处理数据帧，就可以使用 rbind()：

```
bothdfs <- rbind(df1, df2) 
```

列名将自动保留。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-27T22:41:15.213

我同意这些评论，这可能是一个坏主意，但这是你可以做到的。

首先，基于列表的 data.frame 不会以这种方式很好地结合起来。如果要 rbind 数据，最好将它们转换为矩阵。请注意，您必须为数据框的每一行选择一种类型，因此如果数字绑定到字符，则不能将它们保留为数字。如果您愿意将所有内容都视为角色，请尝试一下：

```
> df1 <- data.frame(pt1="a", pt2="b", row.names=1)
> rownames(df1) <- "e"
> df2 <- data.frame(letters[1:4], pt1=1:4, pt2=2:5, row.names=1)
> rbind(as.matrix(df2), as.matrix(df1))
  pt1 pt2
a "1" "2"
b "2" "3"
c "3" "4"
d "4" "5"
e "a" "b" 
```

# php - php生成一个字符串并从mysql检查不存在

> ID：10358682
> 
> 赞同：1
> 
> 时间：2012-04-27T22:28:06.920
> 
> 标签：php, mysql, shuffle

我想生成一个字符串来发布一个 url。然后将帖子网址设为：`http://www.mydomain.com/post/afCeYk`，并将此网址存储在mysql中。为了避免重复`url`，我认为首先应该检查mysql是否`url`已经存在。在我的代码中，我只检查一次，我无法确保第二个生成字符串不存在。那么我该如何做一个循环呢？

```
$shufstr = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
$rdstr = substr(str_shuffle($shufstr),0,6);
$query =  mysql_query("select * from table where post_url = '".$rdstr."'");
if(mysql_num_rows($query)>0){
    //insert the url rules into db  
}else{
    //generate a new string and check the db again  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T22:45:05.077

您应该查询一次数据库以收集表中的所有数据，然后生成一个字符串并根据您获得的数组检查它。

与一遍又一遍地查询数据库相反，这具有性能优势。

（不是实际代码）

```
$url_list = query("SELECT `post_url` FROM `table`");
do {
    $random_string = generate_random_string();
}
while(!in_array($random_string, $url_list)); 
```

此外，通过创建列确保没有重复输入**[`UNIQUE`](http://dev.mysql.com/doc/refman/5.5/en/create-index.html)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T22:31:13.107

您可以使用 while 循环，但是在保存了几千个 URL 后它会变得非常慢：

```
$shufstr = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
$validString=false;
while(!$validString){
    $rdstr = substr(str_shuffle($shufstr),0,6);
    $query =  mysql_query("select * from table where post_url = '".$rdstr."'");
    if(mysql_num_rows($query)==0){ //This is also different from your code as you don't want to do the insert if there is 1+ row with that url. 
        $validString=true;
        //insert the url rules into db  
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T22:32:39.850

如果这是我的项目，我会`UNIQUE`在 post_url 列本身上添加一个约束，这将确保不会从任何入口点（应用程序、命令行等）输入重复项。[有关MySQL 独特的](http://dev.mysql.com/doc/refman/5.5/en/create-index.html)更多信息。

# macos - 保存特定用户文件路径的对话框 - Xcode

> ID：10358683
> 
> 赞同：0
> 
> 时间：2012-04-27T22:28:22.540
> 
> 标签：macos, cocoa, file, dialog

如何显示一个对话框，该对话框仅可用于将文件路径保存到字符串，即用户在对话框中选择的文件路径？
我四处搜索，我只能找到打开的对话框并保存对话框。我需要保存文件对话框之类的东西，但我不需要“另存为”的东西
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T00:03:26.497

你的意思是你不想让用户选择一个文件名，你只是想让他们选择一个现有的文件夹？如果是这样，则使用`NSOpenPanel`with `canChooseFiles`set to`NO`和`canChooseDirectories`set to `YES`。

# url - 通过 URL 启动 Intellij

> ID：10358688
> 
> 赞同：6
> 
> 时间：2012-04-27T22:28:29.650
> 
> 标签：url, jvm, intellij-idea

是否可以注册一些协议，然后通过 URL 启动 IntelliJ。我正在考虑从 JVM 中通过 Desktop.browse() 提交 URL。

我的想法是 URL 将由一个文件名参数和一个行号参数组成。然后 IntelliJ 会打开这个文件名并滚动到给定的行号。这是一个例子：

```
intellij:/mypath/myfile#99 
```

这已经完成了吗？

再见

PS：java.awt.Desktop 类
[http://docs.oracle.com/javase/6/docs/api/java/awt/Desktop.html](http://docs.oracle.com/javase/6/docs/api/java/awt/Desktop.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T22:44:16.520

检查[IDEA-65879](http://youtrack.jetbrains.com/issue/IDEA-65879)以了解现有的解决方法或投票支持该问题，以便在未来的版本中立即可用。

建议的解决方案之一是[远程呼叫](http://plugins.intellij.net/plugin/?idea&id=6027)插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-02T15:49:13.047

您可以使用[IntelliJ Platform REST API](https://www.develar.org/idea-rest-api/#api-Platform-file)。
检查示例：[http://localhost:63342/api/about](http://localhost:63342/api/about)
使用 Postman 发送这些请求。
对我来说，它适用于 IntelliJ Idea，但不幸的是，在 Android Studio 上它不起作用。
问[了这个](https://stackoverflow.com/questions/56392911/intellij-platform-rest-api-doesnt-work-on-android-studio)问题。

# php - 我在使用 Amazon AWS PHP 开发工具包时遇到 X509 错误

> ID：10358701
> 
> 赞同：0
> 
> 时间：2012-04-27T22:29:40.887
> 
> 标签：php, amazon-web-services, amazon-sqs

只是想知道是否有人知道为什么亚马逊的 AWS 会告诉我“您提供的 X509 证书在我们的记录中不存在。”

这是我正在使用的代码...

```
$sqs = new AmazonSQS();
$queue_url = 'my_url';
$options = array(
    'MaxNumberOfMessages' => 10,
);
$resp = $sqs->receive_message($queue_url, $options);

print_r($resp); 
```

这是我得到的回应...

```
[Type] => Sender
[Code] => InvalidClientTokenId
[Message] => The X509 Certificate you provided does not exist in our records.
[Detail] => CFSimpleXML Object 
```

这是我在 config.inc.php 中使用的 CFCredentials 数组...

```
'@default' => array(
    'key' => 'my-key',
    'secret' => 'my-secret',
    'default_cache_config' => 'cache',
    'certificate_authority' => FALSE
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T22:42:57.133

要使用 Amazon SQS，您必须专门注册 Amazon SQS；看起来你没有注册。您可以通过访问[此页面](http://aws.amazon.com/sqs/)并单击标有“注册 Amazon SQS”的按钮来完成此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T18:40:15.663

我收到此错误的原因是因为我使用的 MAMP PRO 没有安装 CURL 和 SSL。只有卷曲。

所以为了解决这个问题，我可以从我的本地机器上测试下面的代码。注意第二行的“@”。我用它来抑制 disable_ssl() 方法发出的警告。

```
$s3 = new AmazonS3();
@$s3->disable_ssl(); 
```

# mysql - mysql触发器与加载数据infile一起使用

> ID：10358703
> 
> 赞同：1
> 
> 时间：2012-04-27T22:29:45.677
> 
> 标签：mysql, triggers, load-data-infile

每当在“table1”中插入新行时，我一直很难弄清楚如何让“table2”根据“table1”中的值更新其值。根据表 1 中插入的内容，触发器可能需要在表 2 中插入新行，或者只更新表 2 中现有行中的值。我使用“加载数据文件”和文本文件一次将几千行插入“table1”。如果可能的话，我希望在将整个文件插入“table1”之后，而不是在插入每一行之后，对表 2 进行更新。任何帮助将不胜感激。下面我包含了来自 table1 的定义以及我在 table2 中需要的内容。

```
//Table1
create table table1 (
V1 varchar(5),
V2 varchar(5),
V3 date,
V4 double,
V5 date,
V6 double,
V7 double,
Primary Key (V1,V2,V3,V4,V5) );

//Table2
V1 - Same as table1
V2 - Same as table1
V3 - Same as table1
V4 - Same as table1
V5 date - minimum of V5 in table1
V6 date - maximum of V5 in table1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:57:11.300

作为对我自己问题的部分回答，我发现从 MySQL 5.6 版（最新版本）开始，触发器只能配置为在插入每一行后运行。如果`load data infile`正在使用，则不能将触发器配置为在插入整个文件之后而不是在每一行之后运行。

希望这将在以后扩展。按照目前的语法，当您创建触发器时，您必须包含短语`FOR EACH ROW`. 如果您省略该短语，您将收到错误消息，但没有其他选项，例如`FOR EACH 10 ROWS`or `FOR EACH FILE`。

# c - C 操作顺序—— foo() + bar()—— foo 必须在 bar 之前调用吗？

> ID：10358708
> 
> 赞同：7
> 
> 时间：2012-04-27T22:30:19.373
> 
> 标签：c

在以下代码中：

```
int foo();
int bar();
int i;

i = foo() + bar(); 
```

`foo`是否由调用之前调用的C标准保证`bar`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-27T22:31:52.150

不， 没有序列点`+`。实际上，Wikipedia 页面上有一段关于它的引语可以回答您的问题：

> 考虑两个函数 f() 和 g()。在 C 和 C++ 中，+ 运算符不与序列点相关联，因此在表达式 f()+g() 中可能会先执行 f() 或 g()。

[http://en.wikipedia.org/wiki/Sequence_points](http://en.wikipedia.org/wiki/Sequence_points)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-27T23:03:28.570

未指定，在 C99 的情况下，相关报价为 6.5/3：

> 除非稍后指定（对于函数调用`()`、`&&`、`||`、`?:`和逗号运算符），子表达式的求值顺序和副作用发生的顺序都是未指定的。

在您的示例中，`foo()`并且`bar()`是完整表达式的子表达式`i = foo() + bar()`。

函数调用的“稍后”在这里并不直接相关，但作为参考，它是 6.5.2.2/10：

> 函数指示符、实际参数和实际参数中的子表达式的求值顺序未指定，但在实际调用之前有一个序列点。

因为`&&`它是 6.5.13/4：

> 与按位二进制 & 运算符不同，&& 运算符保证从左到右的求值；在对第一个操作数求值之后有一个序列点。

由于`+`不在顶部的运算符列表中，`&&`并且与`+`“不同”的方式相同，`&&`并且`&`“不同”，这正是您要问的问题。与, 不同`&&`，`+`不*保证*从左到右的评估。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T22:31:36.453

**不它不是。**函数和运算符参数的求值顺序未定义。

该标准只说，调用`foo`并且`bar`不能交错，这可能在评估没有函数调用的子表达式时发生。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T22:35:16.123

不，这没有定义。从K＆R第200页：

> 表达式的求值顺序，除了某些例外，是未定义的，即使子表达式涉及副作用。也就是说，除非操作符的定义保证它的操作数以特定的顺序被评估，否则实现可以自由地以任何顺序评估操作数，甚至交错他们的评估。

K＆R的第205页描述了加法运算符，并且没有定义两个操作数的求值顺序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T23:55:28.980

我工作的正确答案是“如果订单很重要，那么无论标准说什么会发生，代码都是不可维护的”。如果必须在 bar() 之前评估 foo()，请在 bar() 之前显式评估 foo()。这样做的基础不是每个程序员都知道标准，那些不知道原作者是否知道的程序员。

# haskell - 如何通过getElementPtr获取指向结构中数据的指针？（在 llvm 包中）

> ID：10358709
> 
> 赞同：1
> 
> 时间：2012-04-27T22:30:28.213
> 
> 标签：haskell, llvm

我正在尝试通过ghc 7.4.1 上的[llvm-3.0.0.0包在 llvm 中创建一个结构并访问其中的元素，并且遇到了一些毛茸茸的类型。](http://hackage.haskell.org/package/llvm-3.0.0.0)这是一个示例代码，我正在尝试获取结构的第二个元素（即`Word32`在 TestStruct.

```
{-# LANGUAGE TypeOperators #-}
import LLVM.Core
import Data.Word

type TestStruct = Struct (Word16 :& Word32 :& Word64)
getTestPtr :: Value (Ptr TestStruct) -> CodeGenFunction r (Value (Ptr Word32))
getTestPtr u = getElementPtr u (0 :: Word32, (1  :: Word32, ())) 
```

但我在 ghc 7.4.1 上收到以下错误：

```
Test.hs:8:16:
    Overlapping instances for llvm-3.0.0.0:LLVM.Core.Instructions.GetField
                                (Word32, Word64) i Word32
      arising from a use of `getElementPtr'
    Matching instances:
      instance [overlap ok] (llvm-3.0.0.0:LLVM.Core.Instructions.GetField
                               as i b,
                             Succ i i') =>
                            llvm-3.0.0.0:LLVM.Core.Instructions.GetField (a, as) i' b
        -- Defined in `llvm-3.0.0.0:LLVM.Core.Instructions'
      instance [overlap ok] llvm-3.0.0.0:LLVM.Core.Instructions.GetField
                              (a, as) D0 a
        -- Defined in `llvm-3.0.0.0:LLVM.Core.Instructions'
    (The choice depends on the instantiation of `i'
     To pick the first instance above, use -XIncoherentInstances
     when compiling the other instance declarations)
    In the expression: getElementPtr u (0 :: Word32, (0 :: Word32, ()))
    In an equation for `getTestPtr':
        getTestPtr u = getElementPtr u (0 :: Word32, (0 :: Word32, ()))

Test.hs:8:16:
    No instances for (Data.TypeLevel.Num.Sets.PosI Word32,
                      Data.TypeLevel.Num.Ops.IsZero Word32 yz,
                      DivMod10 Word32 yi yl)
      arising from a use of `getElementPtr'
    Possible fix:
      add instance declarations for
      (Data.TypeLevel.Num.Sets.PosI Word32,
       Data.TypeLevel.Num.Ops.IsZero Word32 yz,
       DivMod10 Word32 yi yl)
    In the expression: getElementPtr u (0 :: Word32, (0 :: Word32, ()))
    In an equation for `getTestPtr':
        getTestPtr u = getElementPtr u (0 :: Word32, (0 :: Word32, ())) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T00:55:49.147

`Struct`对包中的a 进行索引`llvm`需要类型级别的数字，以便可以静态计算字段类型。这就是描述记录字段的嵌套元组的原因。如果您使用`getElementPtr`第一个索引值需要是一个常规整数（`Word32`或其他），或者只是使用`getElementPtr0`。

```
{-# LANGUAGE TypeOperators #-}
import LLVM.Core
import Data.TypeLevel
import Data.Word

type TestStruct = Struct (Word16 :& Word32 :& Word64)
getTestPtr :: Value (Ptr TestStruct) -> CodeGenFunction r (Value (Ptr Word32))
-- getTestPtr u = getElementPtr u ((0 :: Word32) & d1 & ())
getTestPtr u = getElementPtr0 u (d1 & ()) 
```

# hash - 哈希表大小和密钥的有效位

> ID：10358712
> 
> 赞同：2
> 
> 时间：2012-04-27T22:30:36.980
> 
> 标签：hash, hashtable, modulo

我有一个关于哈希表大小和模块化哈希的问题。我指的散列算法如下： hash_key % table_size = array_index. 我正在阅读一本算法教科书，其中给出了以下建议：

如果表大小不是素数，则可能是键的所有位在确定 array_index 时都不起作用。

谁能用一个例子来解释这到底意味着什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T22:52:14.277

你要避免的是共同因素。有一个定理指出，每个数都可以表示为素数的乘积。

因此，如果您有一个素数作为 mod。您将不会分享该部门中的任何因素。

比如说 A % 30，所以 2、3 和 5 的任何倍数都将共享除法中的因子，而该因子在除法中将无用。

250/30 = 50 / 6 = 25 / 3

你想尽量减少无用的因素。

# git - 为什么我可以从一些跟踪分支而不是其他分支推送？

> ID：10358713
> 
> 赞同：1
> 
> 时间：2012-04-27T22:30:47.133
> 
> 标签：git, git-push

Windows 7 上的 Git - git 版本 1.7.3.1.msysgit.0。

我的公司在 Git 存储库中有多个项目（如果重要的话，在 GitHub 上）。

对于其中一些，当我创建本地跟踪分支（例如`git push -u origin mybranch`，或）时，我可以分别使用&`--set-upstream origin/mybranch`拉动和推送到该分支，一切正常。`git pull``git push`

但是在其他情况下（其他项目），当我尝试相同的场景时，我可以拉（`git pull`），但我必须在推时指定原点和分支 - 例如`git push origin mybranch`。只是做`git push`将返回“一切都是最新的”，即使它不是也没有推动我想要的更改。

下面是`git remote show origin`&的输出，`cat .git/config`分别是它工作的存储库和一个不工作的存储库。

我注意到两件事：

1.  在一个有效的 p1_branch 中，在远程显示输出中同时显示推送和拉取条目。但是对于没有的， p2_branch 只有一个拉条目。但我不知道为什么会这样。它们的设置方式相同。

2.  一个设置为合并，另一个设置为变基。我已经`git config branch.master.rebase true`在存储库中运行，它不起作用但不是另一个。我认为这解释了这种差异，但不明白它是否会导致这个问题。

作品（项目1）：

```
$ git 远程显示原点
* 远程来源
  获取地址：git@github.com:MyCompany/project1.git
  推送地址：git@github.com:MyCompany/project1.git
  HEAD 分支：master
  远程分支：
    主跟踪
    p1_branch 跟踪
  为“git pull”配置的本地分支：
    master 与远程 master 合并
    p1_branch 与远程 p1_branch 合并
  为“git push”配置的本地参考：
    主推到主（最新）
    p1_branch 推送到 p1_branch （最新）

$ 猫 .git/config
[核]
        -- 两个存储库相同 --
[遥远的“起源”]
        fetch = +refs/heads/*:refs/remotes/origin/*
        url = git@github.com:MyCompany/project1.git
[分支“主”]
        远程=原点
        合并=参考/负责人/主人
[分支“p1_branch”]
        远程=原点
        合并 = refs/heads/p1_branch

```

不起作用（项目2）：

```
$ git 远程显示原点
* 远程来源
  获取地址：git@github.com:MyCompany/project2.git
  推送地址：git@github.com:MyCompany/project2.git
  HEAD 分支：master
  远程分支：
    -- 剪掉一堆被跟踪的分支条目 --
    主跟踪
    ...
    p2_branch 跟踪
    ...
  为“git pull”配置的本地分支：
    主变基到远程主
    p2_branch 变基到远程 p2_branch
  为“git push”配置的本地参考：
    主推到主（最新）        

$ 猫 .git/config
[核]
        -- 两个存储库相同 --
[遥远的“起源”]
        fetch = +refs/heads/*:refs/remotes/origin/*
        url = git@github.com:MyCompany/project2.git
[分支“主”]
        远程=原点
        合并=参考/负责人/主人
        变基 = 真
[子模块...]
        -- 剪掉一堆子模块的东西 --
[合并]
        冲突风格 = diff3
[分支]
        autosetuprebase = 总是
[分支“p2_branch”]
        远程=原点
        合并 = refs/heads/p2_branch
        变基 = 真

```

# ios - 我已经有一张 sprite sheet 图片，如何获取 cocos2D 的 plist 文件？

> ID：10358717
> 
> 赞同：4
> 
> 时间：2012-04-27T22:31:06.063
> 
> 标签：ios, cocos2d-iphone, sprite-sheet

我正在学习如何为精灵制作动画，所以精灵表图像是在线找到的。问题是我还需要我没有的 plist 文件。我试过 Zwoptex，但似乎不起作用。

有人知道吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T22:37:25.837

Zwoptex 工作得很好。它确实为 cocos2d 完美地输出了一个 .plist 文件。

我使用的是 Mac 版本。转到发布设置，您应该会在此处看到 .plist 文件的输出位置。现在，准备就绪后，单击发布。它将在您在设置中设置的位置输出纹理和坐标。它有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T06:48:28.147

您也可以使用[Texture Packer](http://www.texturepacker.com/download/)来创建 Sprite Sheets。

对于[Ray Wenderlich Demo](http://www.raywenderlich.com/2361/how-to-create-and-optimize-sprite-sheets-in-cocos2d-with-texture-packer-and-pixel-formats)中的 Spritesheet 教程，您可以使用资源并玩 Sprite sheet Animations。它将帮助您学习制作动画。

关于已经创建的精灵表，您需要曾经创建过精灵表的人的 plist

**或者**

您需要使用 Photoshop 创建块并创建更新的 Sprite Sheet。

我只能建议这些选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-15T01:14:29.173

如果您已经有 png 或 gif 文件，您可以做的事情是下载 Paint.NET 之类的东西，使其透明，类似于[此处](http://forums.getpaint.net/index.php?/topic/12196-making-backgrounds-of-images-transparent/)的链接。然后，您可以使用上面提到的 Texture Packer 来分割精灵。Texture Packer 可以看到图像，但只有当它是透明的时候。

之后，您可以重新创建精灵表。

# jsp - JSP foreach 不打印列表的内容

> ID：10358718
> 
> 赞同：0
> 
> 时间：2012-04-27T22:31:07.390
> 
> 标签：jsp, jstl

我对jsp中的foreach有一个小问题

我尝试像在[jstl/jsp 中那样做所有事情——迭代一个 bean 的向量，](https://stackoverflow.com/questions/818072/jstl-jsp-iterating-over-a-vector-of-beans)但我无法在我的屏幕上打印任何东西

这是一些代码：

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>
        <h1>Shop products</h1>
        <table>
            <c:forEach var="item" items="${products}">
                <tr>
                    <td>
                        <c:out value="${item.name}"/>
                    </td>
                <td>
                    <c:out value="${item.amount}"/>
                </td>
                </tr>
            </c:forEach>
        </table>
    </body>
</html> 
```

我的 servlet 进程请求（）：

```
protected void processRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    products = new LinkedList<ProductHandler>();
    products.add(new ProductHandler("A", 5));
    products.add(new ProductHandler("B", 10));
    products.add(new ProductHandler("C", 7));
    request.setAttribute("products", products);
    getServletContext().getRequestDispatcher("/JSP/shop.jsp").forward(request, response);
} 
```

和产品处理程序：

```
public class ProductHandler {
    private String name;
    private int amount;

    public ProductHandler() { 
        name = null;
        amount = 0;
    }

    public ProductHandler(String name, int amount) {
        this.name = name;
        this.amount = amount;
    }

    /**
     * @return the name
     */
    public String getName() {
        return name;
    }

    /**
     * @param name the name to set
     */
    public void setName(String name) {
        this.name = name;
    }

    /**
     * @return the amount
     */
    public int getAmount() {
        return amount;
    }

    /**
     * @param amount the amount to set
     */
    public void setAmount(int amount) {
        this.amount = amount;
    }

} 
```

非常感谢您指出我犯的任何错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T23:19:43.633

尝试将此行添加到 shop.jsp 的顶部

```
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%> 
```

# ruby-on-rails - 优雅地处理嵌套哈希中的空白值

> ID：10358722
> 
> 赞同：6
> 
> 时间：2012-04-27T22:31:34.707
> 
> 标签：ruby-on-rails, ruby

我敢肯定我以前见过一个优雅的解决方案，但我找不到它：

我有一个 Rails 控制器，它可能有也可能没有以下哈希元素：

```
myhash[:parent_field] 
```

在该父字段内，子元素也可以是空白的。我目前正在通过（非常丑陋的）方法进行检查：

```
if (!myhash[:parent_field] || !myhash[:parent_field][:child_field] || myhash[:parent_field][:child_field].blank?) 
```

哪个有效，但我认为 - 当然 - 必须有一种更优雅的方式。只是重申：

*   myhash[:parent_field] 可能存在也可能不存在
*   如果确实存在， myhash[:parent_field][:child_field] 可能存在也可能不存在
*   如果存在，它可能为空白，也可能不为空白。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-28T01:29:46.773

[`#fetch`](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-fetch)是你的朋友：

```
my_hash.fetch(:parent, {})[:child].blank? 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T22:57:49.897

**我要做**的就是使用局部变量来减轻你的负担：

```
unless (p=foo[:parent]) && (c=p[:child]) && !c.blank?
  # Stuff is borked!
end 
```

*但让我们探索替代方案，为了好玩……*

* * *

如果你不能改变你的数据结构（顺便说一句，那是一个哈希，而不是一个数组），那么你可以将 Ruby [andand](http://andand.rubyforge.org/) gem 与 Rails 结合使用，作为对可能是对象[`try`](http://api.rubyonrails.org/classes/Object.html#method-i-try)的事物调用方法的惰性方式。`nil`

* * *

当您请求一个不存在的键时，您也可以将数据结构更改为返回空的自动激活哈希的哈希：

```
mine = Hash.new{ |h,k| Hash.new(&h.default_proc) }
mine[:root] = { dive:42 }
p mine[:root][:dive]        #=> 42
p mine[:ohno][:blah][:whee] #=> {}
p mine[:root][:blah][:whee] #=> undefined method `[]' for nil:NilClass (NoMethodError) 
```

但是，您必须确保层次结构中的每个对象都是这些散列之一（我明确没有对 的内容执行此操作`:dive`，从而导致错误）。

* * *

为了替代乐趣，您可以添加自己的神奇查找方法：

```
class Hash
  def divedive(*keys)
    obj = self
    keys.each do |key|
      return obj unless obj && obj.respond_to?(:[])
      obj = obj[key]
    end
    obj
  end
end

if myarray.divedive(:parent,:child).blank?
  # ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-28T00:16:56.230

这是一个常见问题，可能应该作为副本关闭

*   [Ruby - 访问多维哈希并避免访问 nil 对象](https://stackoverflow.com/questions/10130726/ruby-access-multidimensional-hash-and-avoid-access-nil-object/10131410#10131410)
*   [有没有一种干净的方法可以避免在嵌套的参数哈希中调用 nil 上的方法？](https://stackoverflow.com/questions/5429790/is-there-a-clean-way-to-avoid-calling-a-method-on-nil-in-a-nested-params-hash)
*   [Ruby：IF 语句中的 Nils](https://stackoverflow.com/questions/5393974/ruby-nils-in-an-if-statement)

该列表中的第一个作为其他两个的重复而关闭，尽管我相信我的答案比后两个更全面地涵盖了解决此问题的技术。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T22:57:30.297

这可能取决于您的实际需求，但 OOP 方法是将数组和散列转换为实际对象。每个对象都将管理其关系（类似于 ActiveRecord），并且知道如何获取孩子和父母。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T23:50:44.297

由于`nil.blank?`is `true`，您可以删除中间条件并简化为：

```
if !myarray[:parent_field] || myarray[:parent_field][:child_field].blank? 
```

此外，调用 Hash`myarray`有点误导。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-04-27T23:31:22.173

怎么样

```
!(myarray[:parent_field][:child_field] rescue nil).blank? 
```

?

# c - 在 C 中初始化结构

> ID：10358730
> 
> 赞同：1
> 
> 时间：2012-04-27T22:32:09.037
> 
> 标签：c, pointers, struct, initialization, allocation

好的，这是结构的定义：

```
typedef struct {
   int first;
   int last;
   int count;
   char * Array [50];
} queue; 
```

我使用另一个函数来初始化它

```
void initialize(queue * ptr){
   ptr=malloc(sizeof(queue));
   ptr->first=0;
   ptr->last=0;
   ptr->count=0;
} 
```

然后我使用 printf 打印出 first、last 和 count。这三个都应该为零。但是，我实际得到的是，count 是 0，正如我所料，但 first 和 last 是两个非常大的奇怪数字，每次运行程序时它们都会改变。谁能告诉我这里有什么问题？谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T22:33:26.673

您正在*按 value*传递指针。该函数更改它接收到的参数的*副本*，但调用者的指针没有被修改并且可能未初始化。

您需要更改函数以获取`queue**`并传递要初始化的指针的地址。

或者，您可以返回一个指针，而不是将其作为参数传递。这是一种更简单的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T22:35:33.147

鉴于：

```
void initialize(queue * ptr); 
```

像这样传递它：

```
queue q; // caller allocates a queue
initialize(&q);
// now q is initialized 
```

此外，它是由调用者分配的——不要 malloc 它。

```
// bad
void initialize_bad(queue * ptr){
   ptr=malloc(sizeof(queue)); << nope. already created by the caller. this is a leak
   ptr->first=0;
   ptr->last=0;
   ptr->count=0;
}

// good
void initialize_good(queue * ptr){
   ptr->first=0;
   ptr->last=0;
   ptr->count=0;
   // ptr->Array= ???;
} 
```

如果您更喜欢 malloc 它，请考虑使用以下方法返回新分配：

```
queue* NewQueue() {
   // calloc actually works in this case:
   queue* ptr = (queue*)calloc(1, sizeof(queue));
   // init here
   return ptr;
} 
```

最终，“错误”是您的实现按值传递指针，立即将指针重新分配给新的 malloc'ed 分配，根据需要初始化 malloc'ed 区域，而无需修改参数并引入泄漏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T22:56:21.427

这是对您的程序的最小更改，它应该可以解决您的问题：

```
void initialize(queue * * pptr) {
    queue * ptr;
    ptr=malloc(sizeof(queue));
    if (ptr) {
        ptr->first=0;
        ptr->last=0;
        ptr->count=0;
    }
    /* The assignment on the next line assigns the newly allocated pointer
       into memory which the caller can access -- because the caller gave
       us the address of (i.e. pointer to) such memory in the parameter
       pptr. */
    *pptr = ptr;
} 
```

最重要的更改是将 a 传递`queue **`给您的初始化函数 - 否则您将在调用时更改作为实际参数提供的*副本*。通过将指针传递给指针，您可以访问将指针存储在调用者中的原始变量。`queue *``initialize()`

我无法抗拒，还添加了一张`NULL`从`malloc()`. 这并不能解决您的问题，但我无法让自己发布没有这样做的代码。

# iphone - 如何在 Objective C 中进行 cURL 调用？

> ID：10358731
> 
> 赞同：2
> 
> 时间：2012-04-27T22:32:08.867
> 
> 标签：iphone, objective-c, nsurlrequest

请任何人帮助进行以下网址的 cURL 调用

curl -u "demo:demo" -H "Accept: application/json" [http://api.holdsport.dk/v1/teams](http://api.holdsport.dk/v1/teams)

这对我继续我的项目真的很有帮助。demo:demo 是用户名和密码

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T23:14:45.167

cURL 所基于的[libcurl项目是基于 C 的，并且由于 C 是 Objective-C 的子集（](http://curl.haxx.se/libcurl/)[这里](http://curl.haxx.se/libcurl/c/example.html)有很多示例），因此可以完美运行。虽然如果您只针对 Cocoa/Cocoa Touch，那么 NSURLConnection 类（或更高级别的 ASIHTTPRequest 或 AFNetworking 第三方库）会更容易（开箱即用的异步处理）。

编辑：实际上，如果您真的想使用 cURL，可以使用[Cocoa 绑定](http://code.google.com/p/curlhandle/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T22:37:07.430

这就是我看到的http请求的方式

```
//Create a new url request with our url path
myRequest_ = [[ASIHTTPRequest alloc]initWithURL:[NSURL URLWithString:URL_PATH]];
myRequest_.delegate = self;

//send out the request as asynchronous
[myRequest_ startAsynchronous]; 
```

[http://www.roostersoftstudios.com/2011/10/16/iphone-dev-how-to-communicate-with-server-using-http-json-and-phpor-any-server-side-language/](http://www.roostersoftstudios.com/2011/10/16/iphone-dev-how-to-communicate-with-server-using-http-json-and-phpor-any-server-side-language/)

# wordpress - 注册菜单 wordpress

> ID：10358732
> 
> 赞同：0
> 
> 时间：2012-04-27T22:32:15.590
> 
> 标签：wordpress, menu, registration

我有一个“注册”菜单列表，当用户登录时，“注册”菜单消失了。

我怎样才能做到这一点？

我使用 Appearance -> Menus 创建了菜单

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T04:50:48.077

您可以在主题中使用以下代码来实现此目的：

```
<?php
if ( is_user_logged_in() ) {
    echo 'Welcome, registered user!';
} else {
    echo '<a class="register-menu" href="#">Register</a>'; //make sure to add the correct link there.
}
?> 
```

您可以使用该类自定义此链接样式`.register-menu`

# extjs - 覆盖 ExtJS 模型 getter 和 setter 的最佳实践

> ID：10358741
> 
> 赞同：4
> 
> 时间：2012-04-27T22:32:57.760
> 
> 标签：extjs

我想截取模型上的字段获取/设置，以便我可以在值显示之前以及它们存储在模型中之前对其进行转换。在这种情况下，我想将 uriencoded 数据存储在模型中，但显示解码值。

当我直接覆盖 get/set 方法时，我看到代理正在使用它们将原始数据放入模型中。我不想覆盖该过程，我什至不确定如何判断它是加载模型还是加载 ui 的代理。

最好的方法是什么？顺便说一句，转换似乎是一个糟糕的选择。它不是 2-way 和活的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T07:57:06.360

注意：我没有测试过这段代码，所以如果你有问题，请稍后使用这些概念和评论。

当您为数据实体定义 Ext.data.Model 类时（对 Ext JS 3 使用 Ext.data.Record），添加一个转换函数作为 Ext.data.Field 属性实例的一部分。如果您愿意，可以对所有字段执行此操作，但可能不推荐。

我是这个框架的新手，所以我不知道该怎么做的一件事是在转换函数中使用“this.self”表示法，以防您在模型类中扩展另一个类。例如，如果您没有在 Employee 类中定义默认值，并且它继承自另一个类（例如 Employee），但 Employee 构造函数设置了该属性，它将采用超类中定义的值（基编码数据时的类或父类）构造函数。现在，它只获取 EmployeeDeveloper.dataValue 属性。

```
Ext.define('EmployeeDeveloper', {
  extend: 'Ext.data.Model',
  fields: [
    { name: 'name', type: 'string', defaultValue: 'Paul' },
    { name: 'profession', type: 'string', defaultValue: 'Ext JS developer' },
    { name: 'salary', type: 'float', defaultValue: '95000' },
    { name: 'dataValue', type: 'string',
      convert: function(value, record) {
        // feel free to use value and record parameters in this function
        return encodeData(record.get('dataValue'));  // you may have to use the "value" parameter instead of record.get('dataValue') if referencing the field in it's own convert function (haven't tested)
      }
    }
  ]
});

var empDev = Ext.create(
  'EmployeeDeveloper', 
  {
    name: 'MacGyver',
    dataValue: 'ABC'
  }, 
  'MacGyver', 
  123
);

var encodedDataValue = empDev.get('dataValue'); 
```

**关于转换的注意事项：**如果您引用的是在转换函数签名下方定义的字段，代码将不知道它并且无法检索该值。

**或者，如果您有自定义类但不使用模型类...**

今晚我还读到了一些在 Ext JS 中很简洁的东西。他们在 Ext JS 4 中添加了自动 getter 和 setter。新版本的框架会自动为您的属性添加“get”、“set”、“reset”或“apply”前缀，并将“”中属性的第一个字母大写config" 定义的类的属性。

在常规 JavaScript 中，它们没有真正的类，但 Sencha 使定义类（使用“define”函数）和实例化用户定义类的对象实例成为可能。

例如，假设您定义了以下类：

```
Ext.define('Paul.MyClass'), {
  extend: 'Ext.Window',
  config: {
    name: 'Paul'
  }
}); 
```

如果您像这样创建对象的实例，您将自动访问四个函数。

```
var win = Ext.create('Paul.MyClass');  // create instance of MyClass object
var myName = win.getName();  // get name
win.setName('MacGyver');  // set name
win.resetName(); // this resets the value back to the default value ('Paul')
win.applyName();  // this calls custom code 
win.show(); 
```

我建议用您建议的逻辑覆盖 apply* 方法。然后调用 win.get*(); 之后获得新的价值。为您计划编码的每个字段设置一个额外的编码字段可能是明智之举，这样您就不必每次访问（获取或设置）代理和/或存储中的数据时都操作您的属性。

```
Ext.define('Paul.MyClass'), {
  extend: 'Ext.Window',
  config: {
    name: 'Paul',
    dataValue: 'non encoded value of your data'
  }
  applyName: function(title) {
    this.name = this.name + ' ' + title;  // custom logic goes here
  }
  applyDataValue: function(encodeKey) {
    // get the encoded data value
    this.self.dataValue = 'encoded data value';  // custom logic goes here
  }
}); 
```

# php - MySQL 语法错误 - 第 1 行的“1”附近

> ID：10358744
> 
> 赞同：3
> 
> 时间：2012-04-27T22:33:11.860
> 
> 标签：php, mysql, syntax-error

运行我的 PHP 脚本时它一直给我错误

`You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '1' at line 1`

这是我除了从表中选择之外的 sql 代码。我已经注释掉了所有这些并且没有收到错误，所以我假设它出现在这个代码块中。

```
 if($status === 1){
        $sqlQ = mysql_query("UPDATE tablename SET status=1 WHERE steam64='$id'");

        if(!mysql_query($sqlQ, $con)){
            die('Error: ' . mysql_error());
        }
    }else if($status !== 1){
        $sqlQ = mysql_query("UPDATE tablename SET status=2 WHERE steam64='$id'");

        if(!mysql_query($sqlQ, $con)){
            die('Error: ' . mysql_error());
        }
    } 
```

真正让我困惑的是第 1 行部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T22:38:21.100

你严重违反了 DRY 原则。为什么不像...

```
$statusValue = ($status === 1) ? 1 : 2;
$sqlQuery = mysql_query("UPDATE `14d2_group` SET `status` = $statusValue WHERE `steam64` = '$id'"): 
```

更新 2：看起来需要进一步澄清。

[mysql_query](http://www.php.net/manual/en/function.mysql-query.php)函数不仅创建一个查询：它实际上发送到 MySQL - 并返回结果。在 UPDATE 的情况下，如果查询失败，它将返回 FALSE。这就是为什么您不应该像在原始示例中那样调用 mysql_query 两次。

[您可以使用mysql_affected_rows](http://www.php.net/manual/en/function.mysql-affected-rows.php)函数检查实际更新了多少行。

更新3：终于明白了。) 这就是出现错误的原因：您尝试使用上次更新查询的*结果调用 mysql_query。*这是，因为 TRUE 转换为字符串，只是 '1'。)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T23:18:26.893

您将一个查询的结果用作查询本身。

您可能想要做的是：

```
if($status === 1){
    $sqlQ = mysql_query("UPDATE tablename SET status=1 WHERE steam64='$id'");

    if (!$sqlQ) {
        die('Error: ' . mysql_error());
    }
}
else {// no need for your if-statement here because it would always be true
    $sqlQ = mysql_query("UPDATE tablename SET status=2 WHERE steam64='$id'");

    if(!$sqlQ){
        die('Error: ' . mysql_error());
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T22:36:43.013

“第 1 行”对应于*查询*的第 1 行，而不是调用它的脚本。要添加调用它的脚本行，请使用：

```
die('Error: ' . mysql_error() . ' in ' . $_SERVER['PHP_SELF'] . ' on line ' . __LINE__ ); 
```

至于查询，我真的没有看到任何东西跳出来。我现在唯一的建议是始终将字段名称括在反引号中，以防它们是关键字（这也使它们更易于阅读）

另外，你`else if`是多余的。如果`$status === 1`不运行，那么显然`$status !== 1` *必须*是真的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T22:52:10.507

因为类型转换，`status=1`不是问题。我假设`$id`有一些问题。一旦更改`$id`为其他安全值（1，'foo'...），然后检查它是否有效。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-27T22:36:11.547

“第 1 行”部分是 SQL，表示它收到的 hte 消息在第 1 行有错误——SQL 尝试处理的命令的第一行。

如果我不得不猜测，状态没有设置为数字类型，因此您需要在它周围加上引号，以便 SQL 知道它正在传递一个变量。

编辑：好的，其他解决方案也可能是正确的。我们都对你的数据结构做了不同的假设，我认为他的更好。先试试看。

# c++ - 如何使用库

> ID：10358745
> 
> 赞同：88
> 
> 时间：2012-04-27T22:33:15.683
> 
> 标签：c++, windows, macos

出于某种原因，我永远无法使用任何语言的外部库。我正在寻找有关如何使用外部库以及它们如何工作的说明/解释。当我在线搜索时，我得到的片段似乎从未适用于我下载并尝试和使用的任何库。我在 mac 和 pc 上工作，C++ 示例很好。我使用带有 C++ 插件的 eclipse IDE。如果有适用于所有库的说明，那就太好了。

* * *

## 回答 #1

> 赞同：200
> 
> 时间：2012-04-27T23:01:35.067

假设您有一个`Unuseful`定义如下的类：

文件`Unuseful.h`：

```
class Unuseful {
public:
    void printUnusefulStatement();
}; 
```

文件`Unuseful.cpp`：

```
#include "unuseful.h"
#include <iostream>

void Unuseful::printUnusefulStatement()
{
    std::cout << "Hello world!" << std::endl;
} 
```

现在，您有另一个需要打印无用语句的类：

```
Unuseful u;
u.printUnusefulStatement(); 
```

这意味着您想要使用包含`printUnusefulStatement`您想要包含在代码中的特定实现 ( ) 的外部库。

您可以通过两种方式使用此库：

1.  通过向编译器提供源代码
2.  通过向链接器提供二进制文件（之前已为您的体系结构编译）

## 案例 1：在编译时使用库

这是最简单的情况。您拥有必须使用的库的源代码，只需将其与现有代码（例如`main.cpp`文件）一起编译即可。通常，您是库（完成您需要的任务的类）的作者和用户。

使用此命令编译：

```
g++ main.cpp unuseful.cpp 
```

允许您在`main.cpp`文件中使用所需的实现。

## 案例 2：链接库

与*案例 1*相比，您通常没有要使用的库的源代码。您只有头文件（`Unuseful.h`, 继续示例）和**静态**或**共享**库（可能分别为 [*]`libunuseful.a`和`libunuseful.so`文件）。

静态库是`*.o`在最终可执行文件中链接的目标文件 ( ) 的存档，而共享库是在运行时动态加载的（查看[此页面](http://en.wikipedia.org/wiki/Library_%28computing%29)以更好地理解差异）。

`*.o`通过使用程序简单地归档文件来创建静态库`ar`：

```
# Create the object files (only one here)
g++ -c unuseful.cpp
# Create the archive (insert the lib prefix)
ar rcs libunuseful.a unuseful.o 
```

使用以下选项创建共享库`g++` `-shared`：

```
# Create the object file with Position Independent Code[**]
g++ -fPIC -c unuseful.cpp
# Crate the shared library (insert the lib prefix)
g++ -shared -o libunuseful.so unuseful.o 
```

假设现在您有`Unuseful.h`文件和共享库（`libunuseful.so`文件），并且您有一个`main.cpp`实例化`Unuseful`对象并调用`printUnusefulStatement`方法的文件。

如果您尝试编译此文件 ( `g++ main.cpp`)，链接器将抱怨，因为它找不到该`printUnusefulStatement`符号。

是时候使用这个库了：

```
g++ main.cpp -L. -lunuseful 
```

该`-L`选项告诉链接器在哪里搜索库文件，`-l`标志告诉链接器要使用的库的名称（不带`lib`前缀）。

现在可执行文件 ( `a.out`，因为我没有指定不同的名称) 已创建，并且您已使用库来实现所需的功能 ( `printUnusefulStatement`)。

由于共享库是在运行时加载的，因此`a.out`可执行文件的执行可能会因为系统无法找到该库而失败。通常，这可以通过适当地设置一个环境变量来解决，该变量指示用于搜索动态库的路径：

```
# Set the LD_LIBRARY_PATH [*]
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:. 
```

完成，现在您的可执行文件已经编译，它将能够运行和加载它需要的库。

## 结论

这是对库的快速概述，我希望可以帮助您了解它们是如何使用和提供给其他人的。

如果您有兴趣，应该更详细地研究许多方面：`g++`创建共享库时的选项、`ar`选项、环境变量、共享库格式等。

[[*]: 在 Unix 环境下]

[[**]：如果目标机器支持，则发出与位置无关的代码，适用于动态链接并避免对全局偏移表大小的任何限制。此选项在 m68k、PowerPC 和 SPARC 上有所不同。与位置无关的代码需要特殊支持，因此只能在某些机器上工作。*[来自 g++ 手册页]*]

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-27T22:50:42.967

从这里开始 [http://en.wikipedia.org/wiki/Library_(computing)](https://en.wikipedia.org/wiki/Library_(computing))

基本上，“库”是编译函数和类声明的集合。

在 Mac 上，还有一些“框架”，它们有点类似于 Pascal 的单元，包含声明和编译代码。

在 Java 或 C# 等托管语言中，有包和程序集。两者都与图书馆密切相关。

要在 C 或 C++ 中使用库，您必须有一个 .lib 文件（或大多数基于 POSIX 或 GCC 工具链的编译器的 .a 文件）和编译到 .lib 文件中的函数原型。根据您的开发环境（对于 Eclipse，您很可能使用 GCC 编译器和带有 LD 链接器的 GNU 工具链），您只需指定库文件（.lib 或 .a）作为链接器的输入。大多数情况下，该库都附带包含函数原型定义的头文件。

即使您不知道链接器，这很奇怪，这些库仍然隐式地在您的程序中使用 - std::cout 在 libstdc++ 或 C 运行时库中。

作为一个庞大的库和一组有用的 C++ 类的示例，您可能希望查看 Boost。

要在 Windows 上编写 GUI，您可以使用 MSDN 中描述的 WinAPI。

要在 Mac 上编写 GUI，您可以使用 Carbon API，它有点类似于 WinAPI，但现在已弃用。为 MacOS 编写“合法”GUI 的唯一方法是使用 Cocoa 和 Objective-C。

要编写跨平台 GUI，您可以使用很多库：Qt、wxWidgets、GTK。

最后的但并非最不重要的。C++ 不是 GUI 的最佳语言。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-11-08T10:42:05.080

使用外部 C++ 库的最佳方法是使用 C++ 包管理器，去学习其中之一：

*   [柯南](https://conan.io/)
*   [vcpkg](https://vcpkg.readthedocs.io/en/latest/)
*   [猎人](https://github.com/ruslo/hunter)
*   [cppan](https://cppan.org/)
*   [构建2](https://build2.org/)

其中一些涉及使用 CMake，您可以在[此处](https://cliutils.gitlab.io/modern-cmake/)找到编写良好的教程。

.

# asp.net - VB.NET 中 YouTube DirectUpload 的 BackgroundWorker？

> ID：10358747
> 
> 赞同：1
> 
> 时间：2012-04-27T22:33:42.337
> 
> 标签：asp.net, vb.net, upload, youtube, backgroundworker

我正在尝试将我服务器上的视频直接上传到 YouTube。当用户添加视频时，它会被复制到 YouTube。

添加视频的用户操作应该开始上传过程，这可能需要一段时间。表单，即使是异步表单，也不应该坐在那里等待这种情况发生。它应该刚刚开始并允许用户继续前进，相信它正在后台得到照顾。

为此，我尝试使用 system.threading.backgroundworker。我希望这个过程会开始，网络应用程序会继续前进。它不是。无论是异步回发还是完整回发，它都处于挂起状态，并等待上传完成，然后再返回和更新 lblmsg.text。

我应该采取不同的方式来解决这个问题，以便用户可以启动上传过程而不是等待它完成？到目前为止，这是我的代码：

```
Sub up_load(s As Object, e As EventArgs)
    Dim worker As BackgroundWorker = New BackgroundWorker

    worker.WorkerReportsProgress = True
    worker.WorkerSupportsCancellation = True
    AddHandler (worker.DoWork), AddressOf begin_upload

    'call this and move on?
    worker.RunWorkerAsync()

    lblmsg.Text = "Successfully initiated upload"

End Sub

Sub begin_upload(s As Object, e As DoWorkEventArgs)

    Dim request As New YouTubeRequest(settings)
    Dim vidupload As New Video()

    vidupload.Title = "My Big Test Movie"
    vidupload.Tags.Add(New MediaCategory("Nonprofit", YouTubeNameTable.CategorySchema))
    vidupload.Keywords = "church, jesus"
    vidupload.Description = "See the entire video"
    vidupload.YouTubeEntry.Private = False
    vidupload.YouTubeEntry.setYouTubeExtension("location", "Downers Grove, IL")
    vidupload.YouTubeEntry.MediaSource = New MediaFileSource("c:\users\greg\test3.asf", "video/x-ms-wmv")

    Dim createdVideo As Video = Request.Upload(vidupload)
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T02:12:58.223

您可能需要查看[Task Parallel Library](http://msdn.microsoft.com/en-us/library/dd460717.aspx)以将多线程添加到您的代码中。鉴于您提供的代码：

添加此导入语句

```
Imports System.Threading.Tasks 
```

并用这个简单的语句替换所有后台工作逻辑：

```
 Dim uploadTask As Task = Task.Factory.StartNew(Sub()
                                                       Dim request As New YouTubeRequest(settings)
                                                       Dim vidupload As New Video()

                                                       vidupload.Title = "My Big Test Movie"
                                                       vidupload.Tags.Add(New MediaCategory("Nonprofit", YouTubeNameTable.CategorySchema))
                                                       vidupload.Keywords = "church, jesus"
                                                       vidupload.Description = "See the entire video"
                                                       vidupload.YouTubeEntry.Private = False
                                                       vidupload.YouTubeEntry.setYouTubeExtension("location", "Downers Grove, IL")
                                                       vidupload.YouTubeEntry.MediaSource = New MediaFileSource("c:\users\greg\test3.asf", "video/x-ms-wmv")

                                                       Dim createdVideo As Video = request.Upload(vidupload)
                                                   End Sub) 
```

现在你有uploadTask在后台上传你的视频，你的UI线程将可以自由地处理其他代码。如果您想要取消和进度报告，它确实会变得有点复杂，但顶部的链接应该可以帮助您入门。

# javascript - 异步模板加载 - 如何只加载一次？

> ID：10358750
> 
> 赞同：0
> 
> 时间：2012-04-27T22:34:22.240
> 
> 标签：javascript, ajax, templates

我有一个需要加载模板来显示每个项目的客户端 JS 应用程序。假设它们是笔记。

问题出在异步部分。我不能让模板只加载一次。每次笔记调用该`render`函数时它都会加载。

这是一些代码：

```
var notes = [ {}, {}, {} ] // Some Note objects
notes.forEach( function( note ) {
    render( note )
}

// Have some variable to hold the template
var template

// Now on the render function
function render( note ) {

    // First, if the template exists, go straight to the next function
    if ( template ) {

        // The display function takes care of appending the note
        // to the body after applying datas on the template
        display( note )
    }
    else {
        // loadTemplate just loads the template in an ajax request
        // and executes the callback with the template as argument
        loadTemplate( function( data ) {

            // I fill in the template variable
            template = data

            // And I display the note since the template is available
            display( note )
        } )
    }
} 
```

所以在这种情况下，它会加载三倍的模板，即使有一个检查来防止这种情况。我想这是因为这三个模板直接进入了 else，但是我怎样才能防止这种情况呢？

我不想使用同步 ajax 加载，因为这会冻结浏览器。

**编辑**：最后，我使用了@Managu 的解决方案，稍作修改。

我没有使用他的循环，而是使用了以下更优雅的方法：

```
while ( backlog.length ) {
    display( backlog.shift() )
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T23:01:45.490

```
var loadTemplate = function() {
    var promise = $.get( "/" );

    loadTemplate = function() {
        return promise;
    };

    return promise;
}; 
```

注意这里不需要jQuery，我只是写成伪代码。您可以使用任何提供延迟的库。

```
loadTemplate().then( function( data ) {

    // I fill in the template variable
    template = data

    // And I display the note since the template is available
    display( note )
} ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T22:54:57.397

也许在加载模板后保留需要完成的工作积压？基本上是一个队列来平滑由异步引起的阻抗不匹配。

```
var template;
var backlog;

function render(note)
{
    if (template) {
        // Template already loaded, just display.
        display(note);
    } else if (backlog) {
        // Template being loaded, push work onto backlog.
        backlog.push(note);
    } else {
        // Template not being loaded yet.  Create backlog queue and launch request
        // to load template.
        backlog=[note];
        loadTemplate(function(loaded_template) {
            // Template finally came over the wire.  Save it, and then
            // work off the backlog.
            template = loaded_template;
            for (var note=backlog.shift(); 
                 backlog.length!=0;
                 note=backlog.shift())
            {
                display(note); 
            }
        } );
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T23:08:36.330

“我不想使用同步 ajax 加载，因为这会冻结浏览器。”

如果您尝试使用 jQuery，同步 ajax 只会冻结浏览器。[Frame.js](https://github.com/bishopZ/Frame.js)旨在解决您遇到的问题。有多种方法可以使用 Frame 解决此问题，但它们都涉及一定数量的同步和异步混合。可能最简单的方法是：

```
Frame(function(next){
    loadTemplate(next);
});
Frame(function(next, data){ // data here is the value passed to loadTemplate's callback
    notes.forEach( function( note ) {
        template = data;
        display( note );
    });
    next();
}); 
```

如果您不确定模板是什么，并且每个笔记可能相同或不同，那么您可以这样做：

```
notes.forEach( function( note ) {
    Frame(function(next){
        loadTemplate(note.templateName, next); // next here is a callback to advance to the next Frame
    });
    Frame(function(next, template){
        display( note, template );
        next();
    });
}); 
```

这将加载模板同步，但显示更新异步。

# facebook - Facebook PHP SDK - getLoginUrl() - 状态值

> ID：10358752
> 
> 赞同：7
> 
> 时间：2012-04-27T22:34:50.300
> 
> 标签：facebook, facebook-php-sdk, state, csrf

我正在使用 PHP SDK getLoginUrl() 函数，该函数可以完美地登录用户。一旦用户被重定向回我的页面，URL 可以有两种形式，请参见以下链接第 3 小节：[http://developers .facebook.com/docs/authentication/server-side/](http://developers.facebook.com/docs/authentication/server-side/)

返回 URL 的一部分是 ?state= 值。该值应该用于防止跨站点请求伪造：http: [//developers.facebook.com/docs/reference/dialogs/oauth/](http://developers.facebook.com/docs/reference/dialogs/oauth/)

虽然，使用 getLoginUrl() 方法我永远无法设置状态值，因为它不是参数之一：http: [//developers.facebook.com/docs/reference/php/facebook-getLoginUrl/](http://developers.facebook.com/docs/reference/php/facebook-getLoginUrl/)

那么如何利用状态值将用户登录到 facebook 并防止 CSRF？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T08:30:11.460

> 那么如何利用状态值将用户登录到 facebook 并防止 CSRF？

这是由**Facebook PHP SDK**自动处理的。如果您要编写*自己的*`state`对 Facebook 的 API 调用，则需要根据 Facebook 的`OAuth`文档手动提交（如果需要）。

当您使用 来创建登录 url 时`BaseFacebook::getLoginUrl()`，该函数所做的第一件事是建立 CSRF 令牌状态¹，它使用 PHP 的核心 创建一个哈希`mt_rand()`，`uniqid()`并`md5()`函数并将值存储为会话变量。

当用户被重定向回您的页面时，FBSDK 会检查提交的内容是否与会话中的值`state`匹配。`state`如果值确实匹配，则从对象和会话`state`中清除，因此所有后续请求都将获得一个新变量。²`Facebook``getLoginUrl()``state`

*从理论上讲*，您可以将自己的`state`值与 FBSDK 一起使用，方法是在构造 -object 之前将其写入会话变量，作为的构造函数，并检查会话中是否已经存在。`fb_*<your_app_id>*_state``Facebook``BaseFacebook``establishCSRFTokenState()``state`

但这可能会引入不必要的复杂性。

* * *

1.  看`BaseFacebook::establishCSRFTokenState()`
2.  看`BaseFacebook::getCode()`

# javascript - 根据特定键对复杂 JSON 进行排序

> ID：10358754
> 
> 赞同：0
> 
> 时间：2012-04-27T22:35:04.457
> 
> 标签：javascript, json

我有一个具有以下格式的 JSON 对象：

```
{
    items:{
        nestedObj:{
            position:3
        },
        nestedObj2:{
            position:1
        },
        nestedObj3:{
            position:2,
            items:{
                dblNestedObj:{
                    position:2
                },
                dblNestedObj2:{
                    position:3
                },
                dblNestedObj3:{
                    position:1
                }
            }
        }
    }
} 
```

我正在尝试按其位置属性对嵌套对象的每一级进行排序。我可以递归地迭代对象，但我不知道从哪里开始对它进行排序......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T22:42:16.537

`sort`不幸的是，使用该方法并不像如果你有一个数组那么容易。所以让我们构建一个数组：

```
var tmp = [], x;
for( x in obj.items) { // assuming your main object is called obj
    tmp.push([x,obj.items[x].position]);
    // here we add a pair to the array, holding the key and the value
}

// now we can use sort()
tmp.sort(function(a,b) {return a[1]-b[1];}); // sort by the value

// and now apply the sort order to the object
var neworder = {}, l = tmp.length, i;
for( i=0; i<l; i++) neworder[tmp[i][0]] = obj.items[tmp[i][0]];
obj.items = neworder; 
```

# macos - 在 Bash 中，如何去除目录中文件名中的所有数字，同时保持文件扩展名不变

> ID：10358766
> 
> 赞同：2
> 
> 时间：2012-04-27T22:36:12.703
> 
> 标签：macos, bash

我在这样的目录中有文件：

```
asdfs54345gsdf.pdf
gsdf6456wer.pdf
oirt4534724wefd.pdf 
```

我想将所有文件重命名为数字+ .pdf，以便将上述文件重命名为：

```
54345.pdf
6456.pdf
4534724.pdf 
```

最好的是原生 Bash 命令或脚本（OSX 10.6.8）

我收集到的一些线索包括

```
sed 's/[^0-9]*//g' input.txt 
sed 's/[^0-9]*//g' input.txt > output.txt 
sed -i 's/[^0-9]*//g' input.txt 
echo ${A//[0-9]/} rename 's/[0-9] //' *.pdf 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T23:53:26.957

这可以做到：

```
for f in *.pdf 
do 
   mv "$f" "${f//[^0-9]/}.pdf"
done 
```

但你最好先尝试：

```
for f in *.pdf 
do 
   echo mv "$f" "${f//[^0-9]/}.pdf"
done 
```

请注意，abc4.pdf 和 zzz4.pdf 都将重命名为 4.pdf。所以也许你使用`mv -i`而不只是 mv。

### 更新：解释：

我想第一部分很清楚；`*.pdf`称为 globbing，匹配所有以 .pdf 结尾的文件。`for f in ...`只是迭代它们，每次将 f 设置为其中之一。

```
for f in *.pdf 
do 
   mv "$f" "${f//[^0-9]/}.pdf"
done 
```

我猜

```
mv source target 
```

也很清楚。如果文件名为“Unnamed File1”，则需要用引号将其屏蔽，否则 mv 将读取

```
mv Unnamed File1 1.pdf 
```

这意味着，它有多个文件要移动，Unnamed 和 File1，并将 1.pdf 解释为将两个文件移动到的目录。

好吧，我想真正的问题在这里：

```
"${f//[^0-9]/}.pdf" 
```

有字符的外部粘合。让

```
 foo=bar 
```

一些变量赋值然后

```
 $foo
 ${foo}
 "$foo"
 "${foo}" 
```

是引用它们的四种合法方式。最后两个用于屏蔽空白等，因此在某些情况下没有区别，在某些情况下确实如此。

如果我们把东西粘在一起

```
 $foo4
 ${foo}4
 "$foo"4
 "${foo}"4 
```

第一种形式不起作用 - shell 将查找变量 foo4。所有其他 3 个表达式都引用 bar4 - 首先 $foo 被解释为 bar，然后附加 4。对于某些字符，不需要掩码：

```
 $foo/fool
 ${foo}/fool
 "$foo"/fool
 "${foo}"/fool 
```

都将以相同的方式解释。所以无论 "${f//[^0-9]/}" 是什么，"${f//[^0-9]/}.pdf" 都是附加到它的 ".pdf"。

我们接近所有奥秘的核心：

```
${f//[^0-9]/} 
```

这是形式的替换表达式

```
${variable//pattern/replacement} 
```

*   变量是 $f（我们可以在这里省略大括号内的 $）从上面说是 $f。那很简单！
*   替换是空的——这更容易。
*   但是 [^0-9] 确实很复杂，不是吗？

-

```
[0-9] 
```

只是从 0 到 9 的所有数字的组，其他组可能是：

```
[0-4] digits below 5
[02468] even digits
[a-z] lower case letters 
[a-zA-Z] all (common latin) characters 
[;:,/] semicolon, colon, comma, slash 
```

前面的插入符号 ^ 作为第一个字符是该组的否定：

```
[^0-9] 
```

表示除 0 到 9（包括点、逗号、冒号、...）之外的所有内容都在组中。一起：

```
 ${f//[^0-9]/} 
```

从 $f 中删除所有非数字，并且

```
"${f//[^0-9]/}.pdf" 
```

附加 .pdf - 整个事情都被掩盖了。

```
 ${v//p/r} 
```

和它的朋友（有很多有用的）`man bash`在本章中进行了解释`Parameter Expansion`。对于这个小组，我手头没有进一步阅读的来源。

# html - 如何处理 CSS 中的异常字符？

> ID：10358767
> 
> 赞同：0
> 
> 时间：2012-04-27T22:36:17.383
> 
> 标签：html, css, unicode, wget

我指的是以下文件

[http://yabe.ayafish.com/static/stylesheets/crudify.css](http://yabe.ayafish.com/static/stylesheets/crudify.css)

如果我直接链接到它，那么下面的代码

```
.crudSortedAsc:after {
    content: 'â–¼';
} 
```

显示为向上箭头。如果我尝试通过 wget 下载它并在本地使用它，则会出现原始文本而不是箭头。如何在本地运行样式表时显示箭头？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T04:30:55.563

添加 `@charset "UTF-8";`在你的css文件的顶部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T22:38:23.440

这是一个编码问题。在途中的某个地方，有些东西不是 UTF8。那个停止是你的问题，修复它，你应该得到你的箭头。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T22:44:05.607

这几乎可以肯定是一个编码问题。

澄清一下，浏览器和 css 文件需要以相同的编码进行通信，否则相同的实体将呈现不同的方式。标准是 utf-8，但重要的问题不是真正使用哪个，而是统一使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T23:08:18.340

尝试不同的编辑器。我发现那里的几个编辑器都有这个问题，直到你在服务器上检查 css 后你才意识到字符在那里（在你的编辑器中看不到它。）我使用[Aptana](http://www.aptana.com/)，我没有对此没有任何进一步的问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-28T10:08:43.913

当 CSS 文件只包含两个特殊字符时，最简单和最可靠的方法是使用 CSS 转义符号来表示它们。它们独立于字符编码工作。对于“▼”，使用“\25BC”，对于“▲”，使用“\25B2”。

有很多方法可以直接在 CSS 中使用这些字符，但是文件的编码必须是正确的（实际上是 UTF-8），并且必须在 HTTP 标头、`@charset`CSS 的规则或引用 CSS 文件的元素的`charset`属性。`link`你需要确保你的设置没有被覆盖；例如，HTTP 标头会覆盖其他设置。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-27T22:56:14.407

曾经在我的 css 中使用时髦的字符时遇到过同样的问题，修复它的方法是将样式表重新保存为 UTF8，而不是在记事本 ++ 中保存为“没有 BOM 的 UTF8”，这解决了这个问题。您始终可以尝试在样式表的最顶部定义编码：

```
@charset "UTF-8"; 
```

# ffmpeg - FFMPEG 限制关键帧

> ID：10358769
> 
> 赞同：0
> 
> 时间：2012-04-27T22:36:27.637
> 
> 标签：ffmpeg, keyframe

嘿，所有这些命令在提取关键帧时对我来说都很好：ffmpeg -vf select="eq(pict_type\,PICT_TYPE_I)" -i yourvideo.mp4 -vsync 2 -s 160x90 -f image2 thumbnails-%02d.jpeg。

我只是想知道是否有人知道如何使用它来限制关键帧的数量，比如 200。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T05:40:18.310

您可以添加`-vframes 200`为输出选项。

# ssh - Lubuntu 和远程桌面

> ID：10358779
> 
> 赞同：0
> 
> 时间：2012-04-27T22:37:43.560
> 
> 标签：ssh, vnc

我有一个通过命令行连接的 SSH 地址，但我希望有一个 GUI 选项来简化我的工作。那么是否可以在 Lubuntu 11.10 上使用远程桌面通过 ssh 进行连接？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T22:40:58.990

这可能是您正在寻找的：

[https://wiki.edubuntu.org/Lubuntu/RemoteDesktop](https://wiki.edubuntu.org/Lubuntu/RemoteDesktop)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T03:38:26.170

用于 Lubuntu 的 x11vnc 服务器。通过突触下载。

它可以从终端运行以供一次性使用：-

```
x11vnc -display :0 
```

像这样运行时更有用：

```
x11vnc -forever -display :0 
```

...因此您可以在需要时连接/断开/重新连接。

我从一个在启动时自动运行的简单脚本运行它。创建一个名为“startvnc.sh”的新文件并添加：-

```
 #!/bin/sh   x11vnc -forever -display :0 
```

...然后将其放入 /usr/bin （位于 $PATH 中）并使其可执行。

然后在终端中自动启动：-

```
 sudo leafpad /etc/xdg/lxsession/Lubuntu/autostart 
```

...并将其添加到此文件的末尾：- @startvnc.sh 您应该能够通过几乎任何远程 vnc 客户端进行连接，例如：{IP}::{port} 例如 192.168.0.7::5902

# javascript - 通过自动完成访问命名空间的 JS 函数？

> ID：10358783
> 
> 赞同：1
> 
> 时间：2012-04-27T22:38:01.373
> 
> 标签：javascript, eclipse, function, autocomplete, namespaces

我在带有 Aptana 插件的 Mac 上使用漂亮的“香草”Eclipse。

如果我要写：

```
function blah() {} 
```

然后按CTRL+空格，我会在自动完成列表上看到“blah”。

但实际上，我从来没有写过这样的方法。我写的：

```
MyNamespace.methodName = function() {} 
```

我想按 CTRL+空格并让“MyNamespace.methodName”出现在自动完成列表中。这可能吗？我不想切换 IDE，但如果有帮助，我会添加插件。

# javascript - 从字符串创建数组

> ID：10358785
> 
> 赞同：0
> 
> 时间：2012-04-27T22:38:09.940
> 
> 标签：javascript, jquery, arrays

我有一个网页，用户可以从 jquery 列表中选择多个项目。

根据选择的项目，我需要将每个项目添加到数据库中。

当有人选择一项时，返回给我的 Javascript 的值类似于“4~2”

在我的示例中，值 4 将用于数据库中名为“skill_id”的列，值 2 将用于同一行中名为“category_id”的另一列。

当有人选择两个项目时，它是逗号分隔的，类似于“4~2,6~7”，如果他们选择超过 2 个，则以此类推。

我在想我需要用数组或 jquery.each() 函数做一个 for 循环，但不确定解决这个问题的最佳方法是什么。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-27T22:40:47.230

你要找的是[`split()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/split)方法。

```
"4~2,6~7".split(',') // ['4~2', '6~7'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T08:20:58.863

这是提取技能 ID 和类别 ID 的一种方法：

```
 $.each("4~2,6~7".split(','), function(index, value) {
      var nums = value.split("~");
      var skill_id = nums[0];
      var category_id = nums[1];
  }); 
```

# objective-c - 空方法名，这实际上是做什么的？

> ID：10358790
> 
> 赞同：10
> 
> 时间：2012-04-27T22:38:26.523
> 
> 标签：objective-c, ios

我目前正在学习自己的 Objective-c 和 iOS 编程，但由于这个微妙的错误，我发现自己被非工作代码困住了一个小时。考虑以下代码：

```
@property (strong, nonatomic) NSString *name;
- (NSString *):name { return @"Some name"; } 
```

乍一看（对于任何新人来说），这看起来像是该`name`属性的一个被覆盖的吸气剂。但是有一个非常微妙的**：**那不应该在那里。您在这里没有从编译器/解析器/运行时收到警告/错误，所以我的问题是这实际上最终是什么？

看到错误后，我试图想出一种调用此方法的方法，但在我的几次尝试中都没有成功。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-27T22:45:44.540

方法签名`- (NSString *):name`分解为以下内容：

*   `-`它是一个实例方法（相对于带有 的类方法`+`）。
*   `(NSString *)`它返回一个字符串。
*   `:`如果你要说出这种方法的名称，它会被简单地称为“冒号”。`:`告诉编译器你的方法也接受一个参数。
*   `name`有一个参数叫做name。

当您不指定类型时，编译器会假定您的意思是`id`，因此此方法实际上充实为`- (NSString *):(id)hello`

对此方法的有效调用是：`[self :@"hello"]`.

您可以做一些非常奇怪的事情，因为`:`它是方法的有效名称，并且编译器假定`id`. 如果你真的想的话，你可以有一个名为`- :::`. 编译器会假定您的意思`- (id):(id):(id):(id)`是返回一个类型对象`id`并采用三个类型参数的方法`id`。你会这样称呼它：`[self :@"hello" :anObject :myObject];`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T22:57:13.493

像您发布的那样声明的方法很少见（而且风格很差，imo）。Objective-C 应该是冗长的。方法分解如下：

1.  第一个字符：要么`-`或`+`。`-`表示它是实例方法，`+`表示它是类方法。
2.  括号中的值：方法的返回类型。在您的示例中，该方法返回一个`(NSString *)`.
3.  其余部分（在花括号之前）是方法名称以及它们采用的任何参数。您可以有一个没有参数的名称，在这种情况下，方法名称中不会有 a `:`。例如，`- (void) reload;`这将是一个不返回值且不带参数的方法。
4.  如果您的方法需要参数，它们将混合到方法名称中，并且通常会声明类型（与您的示例不同）。例如`- (NSString *) reverseString:(NSString *) stringToReverse;`在本例中，您的方法名称将是`reverseString:`它带有一个参数，该参数将在方法定义中`NSString*`被调用。`stringToReverse`
5.  通常，如果您看到 a`:`没有类型，则会出现这种情况，`- (float) addThreeValues:::`此方法返回一个浮点数并接受 3 个参数。这将是一个适当的定义，因为这三个值与它们提供的顺序无关，因为我们只是添加它们。

# iphone - 应用二进制组织

> ID：10358791
> 
> 赞同：-6
> 
> 时间：2012-04-27T22:38:27.537
> 
> 标签：iphone, ios

两个问题，同一类别：

1.  当我从 Xcode 检查时，我在我的应用程序下的 iPhone 上看到了一个文件夹 library/cache/imagecaches （那里有很多文件），我从未创建过该文件夹，我猜它是由 iOS 本身管理的，我无需担心。
2.  我有一个名为 app.sqlite 的 sqlite 文件，它位于文档文件夹中。那是通过应用审查的正确地方，对吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T22:32:17.423

1.  如果您以前从未见过它，那么它是 iOS 自己的缓存系统，您不应该乱用它。

2.  看看[https://developer.apple.com/appstore/guidelines.html](https://developer.apple.com/appstore/guidelines.html)

# java - java打印代码不起作用

> ID：10358792
> 
> 赞同：5
> 
> 时间：2012-04-27T22:38:35.400
> 
> 标签：java, printing

我正在使用下面显示的 java 代码在连接到我的计算机的 HP DeskJet1000 USB 打印机上打印文本文件。每当我运行此代码时，都会发送打印作业，但打印机不打印任何内容。状态显示打印机正在打印，但它甚至不占用一页。请帮忙！我的代码如下：

```
package printing;

import java.io.FileInputStream;
import javax.print.*;
import javax.print.attribute.HashPrintRequestAttributeSet;
import javax.print.attribute.PrintRequestAttributeSet;

/** @author Majid */
public class Printing {
    public static void main (String [] args) {
        // TODO code application logic here
        DocFlavor flavor = DocFlavor.INPUT_STREAM.AUTOSENSE;
        PrintRequestAttributeSet aset = new HashPrintRequestAttributeSet ();
        /* locate a print service that can handle it */
        PrintService [] pservices = PrintServiceLookup.lookupPrintServices (flavor, aset);
        /* create a print job for the chosen service */
        int printnbr = 0;
        DocPrintJob pj = pservices [printnbr].createPrintJob ();
        try {
            FileInputStream fis = new FileInputStream ("e:/fypdatabase/test.txt");
            Doc doc = new SimpleDoc (fis, flavor, null);
            //PrintJobWatcher pjDone = new PrintJobWatcher (pj);
            /* print the doc as specified */
            pj.print (doc, aset);
        }
        catch (Exception ex) {
            ex.printStackTrace ();
        }  
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T03:22:57.300

@moskiteau 为什么你硬码号【2】在

```
DocPrintJob pj = pservices[2].createPrintJob(); 
```

而不是将*打印机*的值作为 pservices 的索引？

```
DocPrintJob pj = pservices[printer].createPrintJob(); 
```

（如果这不是澄清这个问题的正确地方，我很抱歉，但这是我在这里的第一个问题，没有找到如何以任何其他方式提出这个问题）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T17:32:22.583

您的代码实际上正在运行。但可能你正试图打印到错误的打印机......

尝试这个：

```
package printing;

import java.io.FileInputStream;
import javax.print.*;
import javax.print.attribute.HashPrintRequestAttributeSet;
import javax.print.attribute.PrintRequestAttributeSet;

/** @author Majid */
public class Printing {

    public static void main (String [] args) {
        // TODO code application logic here
        DocFlavor flavor = DocFlavor.INPUT_STREAM.AUTOSENSE;
        PrintRequestAttributeSet aset = new HashPrintRequestAttributeSet ();
        /* locate a print service that can handle it */
        PrintService [] pservices = PrintServiceLookup.lookupPrintServices (flavor, aset);

        try {
            int printer = getPrinter(pservices);
            if(printer == -1) {
                throw new Exception("No network printer found");
            }
            DocPrintJob pj = pservices[2].createPrintJob();
            FileInputStream fis = new FileInputStream ("c:/Temp/test.txt");
            Doc doc = new SimpleDoc (fis, flavor, null);
            pj.print (doc, aset);
        }
        catch (Exception ex) {
            ex.printStackTrace ();
        } 
    }

    private int getPrinter(PrintService[] pservices) {
        int printer = -1;
        for(int i = 0; i<pservices.size(); i++) {
            if(pservices[i].getName().contains("\\\\")) {
                System.out.println("network printer: " + pservices[i].toString());   
                printer = i;
                break;
            }        
        }
        return printer;
    }
} 
```

# c# - XMLParser 跳到一组标签中的最后一个标签

> ID：10358793
> 
> 赞同：1
> 
> 时间：2012-04-27T22:38:35.593
> 
> 标签：c#, .net, xml, datatable, xml-parsing

我正在将 XML 文件读入这样的数据表：

```
DataTable dt = XMLParser.XMLRead.ReadeFormXMLFile(filePath, "my:myFields"); 
```

但是它没有捕获所有字段。

有多个从业者姓氏、从业者名字和从业者 NPI：

```
 <my:group1>
    <my:group2>
      <my:PractitionerFirstName>Joe</my:PractitionerFirstName>
      <my:PractitionerLastName>Limits</my:PractitionerLastName>
      <my:PractitionerNPI>0987654321</my:PractitionerNPI>
      <my:PractitionerDegree>MD</my:PractitionerDegree>
    </my:group2>
    <my:group2 xmlns:my="http://schemas.microsoft.com/office/infopath/2003/myXSD/2012-02-06T05:56:10">
       <my:PractitionerFirstName>Him</my:PractitionerFirstName>
       <my:PractitionerLastName>Haw</my:PractitionerLastName>
       <my:PractitionerNPI>1234567890</my:PractitionerNPI>
       <my:PractitionerDegree>PA</my:PractitionerDegree>
     </my:group2>
     <my:group2 xmlns:my="http://schemas.microsoft.com/office/infopath/2003/myXSD/2012-02-06T05:56:10">
        <my:PractitionerFirstName>Mike</my:PractitionerFirstName>
        <my:PractitionerLastName>Kim</my:PractitionerLastName>
        <my:PractitionerNPI>1234567890</my:PractitionerNPI>
        <my:PractitionerDegree>DO</my:PractitionerDegree>
     </my:group2>
     <my:group2 xmlns:my="http://schemas.microsoft.com/office/infopath/2003/myXSD/2012-02-06T05:56:10">
       <my:PractitionerFirstName>Vanilla </my:PractitionerFirstName>
       <my:PractitionerLastName>Ice</my:PractitionerLastName>
       <my:PractitionerNPI>1231231231</my:PractitionerNPI>
       <my:PractitionerDegree>MD</my:PractitionerDegree>
     </my:group2>
     <my:group2 xmlns:my="http://schemas.microsoft.com/office/infopath/2003/myXSD/2012-02-06T05:56:10">
       <my:PractitionerFirstName>Kim</my:PractitionerFirstName>
       <my:PractitionerLastName>John</my:PractitionerLastName>
       <my:PractitionerNPI>1234567890</my:PractitionerNPI>
       <my:PractitionerDegree>DO</my:PractitionerDegree>
     </my:group2>
  </my:group1> 
```

但是它们没有被包括在内。它目前正在做的是将 LAST 记录纳入`group2`并忽略此记录之前的所有记录：

```
<my:PractitionerFirstName>Kim</my:PractitionerFirstName>
<my:PractitionerLastName>John</my:PractitionerLastName>
<my:PractitionerNPI>1234567890</my:PractitionerNPI>
<my:PractitionerDegree>DO</my:PractitionerDegree> 
```

**问题**：什么会导致 XML 解析器只抓取最后一条记录`group2`而忽略其他所有内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T00:30:56.587

你可以试试这个：

```
XElement root = XElement.Load(filePath);
var list = root.Elements().Select(x => new
    {
        FirstName = x.Get("PractitionerFirstName", string.Empty),
        LastName = x.Get("PractitionerLastName", string.Empty),
        NPI = x.Get("PractitionerNPI", string.Empty),
        Degree = x.Get("PractitionerDegree", string.Empty)
    }).ToArray(); 
```

这适用于您提供的 xml。我正在使用[从这里获取扩展方法](https://github.com/ChuckSavage/XmlLib/blob/master/XElementExtensions.cs)。

# ios - 获取用户在 iOS 中播放的曲目的名称

> ID：10358795
> 
> 赞同：0
> 
> 时间：2012-04-27T22:38:58.100
> 
> 标签：ios, ipod

作为我们尝试制作的 iOS 应用程序的一部分，我们希望应用程序的一小部分继续运行是后台，并保存 iPod 正在播放的曲目的名称，和/或将它们发送到我们的服务器。

所以基本上我们想要注册一个事件监听器，它会在 iPod 应用程序播放曲目时告诉我们的应用程序，即使我们的应用程序在后台。

这可能吗？我一直在研究文档，并没有发现太多有用的东西。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T22:44:02.580

您可以获取当前正在播放的歌曲，然后通过获取名称将它们添加到字符串数组中 [在 iPhone 上：找出当前正在播放的歌曲？（在 iPod 音乐播放器中）](https://stackoverflow.com/questions/1917014/on-iphone-find-out-what-song-is-currently-playing-in-the-ipod-music-player)

编辑：此链接中的更好答案

编辑2：

有这个链接 [http://www.iphonedevsdk.com/forum/iphone-sdk-development/45438-different-sound-volumes-mpmusicplayer-system-sounds.html](http://www.iphonedevsdk.com/forum/iphone-sdk-development/45438-different-sound-volumes-mpmusicplayer-system-sounds.html)

有点失望，他谈到了一些在歌曲更改时调用的方法

```
- (void)handleNowPlayingItemChanged:(id)notification {
    MPMediaItem *currentItem = self.musicPlayer.nowPlayingItem;
    self.songLabel.text   = [currentItem valueForProperty:MPMediaItemPropertyTitle];
    self.artistLabel.text = [currentItem valueForProperty:MPMediaItemPropertyArtist];
} 
```

希望这可以帮助。

# python - python中的延续

> ID：10358800
> 
> 赞同：7
> 
> 时间：2012-04-27T22:39:42.333
> 
> 标签：python

python中的延续是否有任何等效的构造。我一直在阅读有关延续的内容，我只是好奇并想知道，因为文档中对此一无所知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T22:43:37.650

> 我的问题更多的是python是否支持延续，那么它们如何表达？

它们在 Python 中的表达方式与在没有[call/cc](http://en.wikipedia.org/wiki/Call-with-current-continuation)的任何其他语言中相同：通过将函数作为延续参数传递给另一个函数。考虑一个*非常*愚蠢的例子，即应用于两个数字之和的延续。在 ML 中，你可以写

```
fun plus(x, y, k) = k(x + y)

plus(2, 4, print o Int.toString) 
```

打印 6。

但在 Python 中你可能会写

```
def plus(x, y, k):
    return k(x + y)

plus(2, 4, lambda n: print '%d' % n) 
```

它也打印 6。

# javascript - 是否可以使用 javascript 从 django 模型数据库中获取数据？

> ID：10358803
> 
> 赞同：3
> 
> 时间：2012-04-27T22:40:39.460
> 
> 标签：javascript, python, django, django-models

我试图让 django 模型对象显示在 html 页面上。当然，当我尝试使用 {{ object }} 时，我得到了一个错误。

如何正确获取 django 数据模型并使用 javascript 操作属性？

网址：

```
('^all_companies$', 'companies.views.all_companies') 
```

风景：

```
def all_companies(request): 
    companies = Company.objects.all().order_by('id')[:5];   
    return direct_to_template(request, 'all_companies.html', {'companies': companies} ); 
```

的HTML：

```
{% block sidebar %}
    <div id="sidebar">
        <!-- like google maps, short list of company info -->
        <ul>
            {% for comp in companies %}
                <li>{{ comp }}</li>                 
            {% endfor %}
        </ul>
    </div>
{% endblock %} 
```

js：

```
var tmp = {{ companies }} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-28T02:43:45.533

在您看来：

```
from django.core import serializers
json_serializer = serializers.get_serializer("json")()
companies = json_serializer.serialize(Company.objects.all().order_by('id')[:5], ensure_ascii=False) 
```

在模板中：

```
var companies = '{{ companies|escapejs }}'; 
```

这只是为了让你的数据模型进入 JS。为了操作它们，您应该创建一些将从 JS（通过 AJAX）调用的视图。他们可能应该返回 JSON。查看 [https://dev.to/brian101co/how-to-return-a-json-response-in-django-gen](https://dev.to/brian101co/how-to-return-a-json-response-in-django-gen)或[https://simpleisbetterthancomplex.com/tutorial/2016/07/27/how-to- return-json-encoded-response.html](https://simpleisbetterthancomplex.com/tutorial/2016/07/27/how-to-return-json-encoded-response.html)关于如何从视图中仅返回 JSON。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T22:54:58.620

您必须将您的公司模型数据序列化为 json，以便 javascript 能够读取它。

所以你需要有两个模型变量，company（你现在拥有的那个）和company_json，它将保存序列化的数据。

```
from django.core import serializers
companies_json = serializers.serialize("json", Company.objects.all()) 
```

我没有测试过这个。

# python - 简单的关卡系统

> ID：10358810
> 
> 赞同：-1
> 
> 时间：2012-04-27T22:41:29.507
> 
> 标签：python, pygame

我会留下一个简单的关卡系统。当分数变量达到一定数量时，它会增加敌人（球）和速度（速度），例如：

```
if score >= 500:
   enemies=6
   velocity=2 
```

我尝试了几种方法，我的第一次尝试就像我的游戏循环中的上述方法，但我无法即时更改它，错误：

```
Traceback (most recent call last):
 File "C:\Users\MO\Desktop\Twerk\ballbounce_changed.py", line 233, in <module>
  game()
File "C:\Users\MO\Desktop\Twerk\ballbounce_changed.py", line 182, in game
 positionx[i]=positionx[i]+positionxmove[i]
  IndexError: list index out of range 
```

我也尝试了其他不起作用的方法。你能帮我实现一个等级系统吗？我的游戏代码可以在这里找到：http: [//pastebin.com/nhqKdR19](http://pastebin.com/nhqKdR19)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T22:48:59.613

问题是您的代码最初从具有 3 个元素的列表开始，然后您将敌人数量增加到 6 个而不扩展列表。这会导致您的更新循环在列表的末尾运行，因为它试图更新到列表的末尾。当您增加敌人时，您还需要将新值附加到列表中以将它们扩展 3 个条目。要扩展已经存在的列表，请使用[`name_of_your_list.append(new_value)`](http://docs.python.org/tutorial/datastructures.html).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T22:54:30.070

代替：

```
if score == 500:
    enemies = 6
    velocity = 2 
```

您可能应该有一种`increase_difficulty()`方法来修改您的跟踪列表并增加`velocity`价值。你也应该使用`>=`而不是`==`我上面提到的。那么你的游戏循环代码将是：

```
if score >= 500:
    increase_difficulty() 
```

# r - 使用 splines 包中的 bs 函数指定 b 样条拟合的自由度

> ID：10358811
> 
> 赞同：1
> 
> 时间：2012-04-27T22:41:36.367
> 
> 标签：r

我正在使用 splines 包的 bs 函数来创建用于图形目的的 b 样条平滑曲线。（至少有一份报告称 Excel 使用三阶 b 样条曲线作为其平滑线图，我希望能够复制这些曲线。）我无法理解 bs 函数所需的参数。代表性代码如下，改编自 bs 文档：

```
require(splines)
require(ggplot2)
n <- 10
x <- 1:10
y <- rnorm(n)
d <- data.frame(x=x, y=y)
summary(fm1 <- lm(y ~ bs(x, degree=3)), data=d)
x.spline <- seq(1, 10, length.out=n*10)
spline.data <- data.frame(x=x.spline, y=predict(fm1, data.frame(x=x.spline)))
ggplot(d, aes(x,y)) + geom_point + geom_line(aes(x,y), data=spline.data) 
```

bs 文档中的示例代码在对 bs 的调用中指定了 df=5，并且没有指定度数。我不知道我有多少自由度。我所知道的是我想要一个三阶 b 样条。我已经尝试指定不同的 df 值来代替度数，或者除了度数之外，我得到了截然不同的结果。这就是为什么我怀疑 df 的规范是这里的问题。在这种情况下我将如何计算 df ？

帮助文件建议 df = length(knots) + degree。如果我将内部点视为结，则在此示例中为我提供 df=11，这会生成错误消息和无意义的样条拟合。

先感谢您。

我显然不清楚我的意图。我正在尝试这样做： [如何将 spline() 与 ggplot 一起使用？](https://stackoverflow.com/questions/4504498/how-can-i-use-spline-with-ggplot)，但使用 b 样条。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T23:01:29.200

你不应该试图适应每一点。目标是找到一个可接受的拟合但取决于有限数量的结的摘要。将多项式的 hte 次数增加到默认值三以上并没有太大价值。只有 10 分，您肯定不希望 df=11。尝试 df=5 ，结果应该相当平坦。rms/Hnisc 包的作者 Frank Harrell 更喜欢限制三次样条，因为在极端情况下的预测是线性的，因此比其他多项式基的预测要少。

我更正了几个拼写错误并添加了一个`knots`参数以使您的代码正常工作：

```
require(splines)
require(ggplot2); set.seed(trunc(100000*pi))

n <- 10
x <- 1:10
y <- rnorm(n)
d <- data.frame(x=x, y=y)
summary(fm1 <- lm(y ~ bs(x, degree=3, knots=2)), data=d)
x.spline <- seq(1, 10, length.out=n*10)
spline.data <- data.frame(x=x.spline, y=predict(fm1, data.frame(x=x.spline)))
ggplot(d, aes(x,y)) + geom_point() + geom_line(aes(x,y), data=spline.data) 
```

我从改变随机种子的练习中走出来，认为弗兰克哈雷尔知道他在说什么。在使用他的包时，我不会在极端情况下得到同样的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T18:52:31.987

我做了更多的工作，并提出了以下建议。首先，道歉。我正在寻找的是平滑样条，而不是回归样条。我没有正确表达问题的词汇。虽然 bs() 帮助文件中的示例似乎提供了这一点，但该函数并未为我的示例数据提供相同的行为。在 stats 包中还有另一个函数，smooth.spline，它提供了我需要的东西。

```
set.seed(tunc(100000*pi))
n <- 10
x <- 1:n
xx <- seq(1, n, length.out=200)
y <- rnorm(n)
d <- data.frame(x=x, y=y)
spl <- smooth.spline(x,y, spar=0.1)
spline.data <- data.frame(y=predict(spl,xx))
ggplot(d,aes(x,y)) + geom_point() + geom_line(aes(x,y), spline.data)
spl2 <- smooth.spline(x, y, control=
            list(trace=TRUE, tol=1e-6, spar=0.1, low=-1.5, high=0.3))
spline.data2 <- data.frame(predit(spl2,xx))
ggplot(d,aes(x,y)) + geom_point() + geom_line(aes(x,y), spline.data2) 
```

对 smooth.spline 的两次调用代表了两种方法。第一个手动指定平滑参数，第二个迭代到最优解。我发现我必须适当地限制优化以获得我所追求的解决方案类型。

结果旨在与 Excel 线图使用的 b 样条相匹配。我有一些合作者认为 Excel 图形是标准，我至少需要匹配这种性能。

# c# - 如何使用 http 模块阻止 ip Ranges？

> ID：10358813
> 
> 赞同：0
> 
> 时间：2012-04-27T22:41:52.637
> 
> 标签：c#, ip, range, httpmodule

如何使用带有 c# 的 http 模块阻止 Ip 范围。我有一个简单的解决方案，但它适用于单个 Ip，以及如何从 http 模块中的 xml 文件读取 IP，以便如果该文件中有 IP，它将被阻止。这是我的代码

```
public class MyHandler :IHttpModule
{
 public MyHandler(){}

    public bool IsReusable
    {
        get { return false; }
    }

    public void Init(HttpApplication context)
    {
        context.BeginRequest += new EventHandler(Application_BeginRequest);
    }
    private void Application_BeginRequest(object source, EventArgs e)
    {
        HttpContext context = (source as HttpApplication).Context;
        List<string> BlackListIp = new List<string>();
        BlackListIp.Add("127.0.0.1");

        if (BlackListIp.Contains(context.Request.UserHostAddress))
        {
            context.Response.Write("<h1 style='color:red;'>Your IP is Blocked</h1>");
        }
    }

    public void Dispose()
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T23:41:51.157

只需在 app_data 文件夹中添加 xml 文件并使用 XDocument 读取它。您可以使用带有 FileDependency 的缓存来提高性能。

# assembly - 8086 TASM 汇编器 - 循环时出错：“值超出范围”？

> ID：10358817
> 
> 赞同：1
> 
> 时间：2012-04-27T22:42:22.323
> 
> 标签：assembly, x86-16, tasm

我在班上似乎总是落后于小组，我想为我班上关于循环的下一章“练习”。

我写了这个从 1 到 10,000 的小循环（我认为这需要一毫秒的时间来运行）：

```
 .MODEL SMALL

    .STACK 100h

    .DATA   
    Finished DB 10, 13, 'Loop x 10,000 finished.  Congratulations! $', 10, 13

    .CODE

    MAIN PROC

            MOV AX, @data            
            MOV DS, AX

            MOV CX, 10000            
            MOV BX, 0                

    StrtLoop:                        

            INC BX                   

    LOOP StrtLoop                    

            CMP BX, 10000                
            JE DispMsg               

            JMP SkipMsg              

    DispMsg:                         
            MOV AH, 09H             
            MOV DX, OFFSET Finished
            INT 21H
    SkipMsg:                         
            MOV AL, 0h               
            MOV AH, 4CH
            INT 21H

    MAIN ENDP
    END MAIN 
```

几分钟前我打错了零的数量，并破坏了程序。我想知道为什么会这样。

我收到了这个错误：

汇编文件：Loop.ASM

**ERROR** loop.ASM(15) 值超出范围。

**ERROR** loop.ASM(24) 值超出范围。

错误信息：2

警告信息：无

通过：

剩余内存：467k

```
 .MODEL SMALL

    .STACK 100h

    .DATA   
    Finished DB 10, 13, 'Loop x 100000 finished.  Congratulations! $', 10, 13

    .CODE

    MAIN PROC

            MOV AX, @data            
            MOV DS, AX

            MOV CX, 100000               
            MOV BX, 0                

    StrtLoop:                        

            INC BX                   

    LOOP StrtLoop                    

            CMP BX, 100000               
            JE DispMsg               

            JMP SkipMsg              

    DispMsg:                         
            MOV AH, 09H             
            MOV DX, OFFSET Finished
            INT 21H
    SkipMsg:                         
            MOV AL, 0h               
            MOV AH, 4CH
            INT 21H

    MAIN ENDP
    END MAIN 
```

经过一些谷歌搜索（并在阅读有关内存寄存器的书上摸索）后，事实证明存在 65,535 个字节的硬限制。这个对吗？如果有人想超越这个内存限制怎么办？有没有办法做到这一点？

只是对我来说似乎很奇怪......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T23:05:30.370

AX、BX、CX 和 DX 是 16 位寄存器。因此，您不能在其中输入大于 65,535 的值。如果要循环更多，请使用 EAX、EBX、ECX 或 EDX，它们是 32 位寄存器。

请注意，ECX 和 CX 是 x86 中的首选计数寄存器。将“C”视为“计数”的意思。如果您使用 CX 或 ECX，您可以使用“LOOP”指令进行减量比较（相对于零）、分支和跳转全部合二为一。

# ios - iOS在导航栏上画圈

> ID：10358821
> 
> 赞同：0
> 
> 时间：2012-04-27T22:43:00.863
> 
> 标签：ios, uinavigationcontroller

我的屏幕顶部有一个导航栏。有没有办法画一个绿色的小圆圈？我希望能够启用/禁用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T22:50:53.833

使用CGContext在指定点画一个圆

观看[http://www.youtube.com/watch?v=7aMb8xEx660](http://www.youtube.com/watch?v=7aMb8xEx660)，演示从第 53 分钟开始

演示来源： http: [//www.stanford.edu/class/cs193p/cgi-bin/drupal/system/files/sample_code/Happiness_0.zip](http://www.stanford.edu/class/cs193p/cgi-bin/drupal/system/files/sample_code/Happiness_0.zip)

讲座PDF： http: [//www.stanford.edu/class/cs193p/cgi-bin/drupal/system/files/lectures/Lecture%205.pdf](http://www.stanford.edu/class/cs193p/cgi-bin/drupal/system/files/lectures/Lecture%205.pdf)

很抱歉没有回答启用/禁用它的选项。我真的不知道该怎么做。

也许您可以使用放置该圆圈的视图，然后您可以随时加载/卸载它:)

# javascript - 此 Javascript 行中的两个管道符号 (OR)

> ID：10358823
> 
> 赞同：26
> 
> 时间：2012-04-27T22:43:23.687
> 
> 标签：javascript

> **可能重复：**
> [“options = options || 是什么意思？{}”在 Javascript 中是什么意思？](https://stackoverflow.com/questions/2851404/what-does-options-options-mean-in-javascript)

我在 JS 中看到了这个：

```
item = item || {}; 
```

我猜这是三元运算符的一些变体，但实际上是做什么的？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-27T23:03:15.437

```
(expr1 || expr2) 
```

> “如果可以转换为 true，则返回 expr1；否则，返回 expr2。”

[来源](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Logical_Operators)

因此，当`expr1`是（或评估为）其中之一时`0,"",false,null,undefined,NaN`，则`expr2`返回，否则`expr1`返回

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-27T22:44:39.547

这被称为冗余，但在这种情况下，这是一件好事。基本上，如果`item`没有定义（或者其他错误的（`false`, `0`, `""`...），那么我们给它一个默认值。

最常见的例子是在事件中：

```
evt = evt || window.event; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-27T22:44:38.290

如果 item 存在，则将 item 设置为 item，或将其设置为`{}`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-27T22:44:04.027

它相当于：

```
if( !item ){ item = {}; } 
```

# entity-framework - 在现有数据库之上映射 EntityFramework 中的父子关系

> ID：10358824
> 
> 赞同：0
> 
> 时间：2012-04-27T22:43:27.353
> 
> 标签：entity-framework, ef-code-first

我需要在遗留数据库上映射一些父子关系，问题是表的结构。

tableA id 名称

tableB id tableA_parentId tableA_childId

如图所示，我有两个从 tableA 到 tableB 的外键

有没有办法将这种关系映射到 EF 我使用代码优先方法并且每个表都有一个配置类

# eclipse - EL 标签未呈现

> ID：10358827
> 
> 赞同：3
> 
> 时间：2012-04-27T22:43:46.833
> 
> 标签：eclipse, maven, jsf-2, el, tomcat7

我的问题是，当我运行一个非常简单的 JSF 应用程序时，EL 标记没有被呈现。

例如，这段代码：

```
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html">
<h:head>
    <title>Facelets Hello World</title>
</h:head>
<h:body> #{hello.world} </h:body>
</html> 
```

在浏览器中显示`#{hello.word}`，而不是“Hello World！” 应该由我的托管 bean 返回：

```
@ManagedBean(name = "hello")
public class Hello {
    public String getWorld() {
        return "Hello World!";
    }
} 
```

我已经看到了这个问题[JSF 2.0 EL tags don't render in browser](https://stackoverflow.com/questions/10073212/jsf-2-0-el-tags-dont-render-in-browser) already，但这对我没有帮助。而且，根据我所读到的内容，Tomcat 7 声称提供 API 和 EL 2.2 标准的实现。

我正在使用以下软件/版本：

*   Eclipse Indigo 3.7.2 Java EE 版
*   Eclipse 插件：m2e 1.0.2
*   Eclipse 插件：m2e-wtp 0.15.2
*   Maven 2
*   Tomcat 7（已尝试以下版本）
    *   雄猫 7.0.10
    *   雄猫 7.0.26
    *   雄猫 7.0.27
*   我的脸 2.1.6
*   甲骨文 JDK 1.7.0

如果需要更多信息，我很乐意提供。

**[编辑1]**

我什至不确定这是否必要/正确，但添加以下内容`web.xml`并没有解决问题：

```
<context-param>
    <param-name>org.apache.myfaces.EXPRESSION_FACTORY</param-name>
    <param-value>org.apache.el.ExpressionFactoryImpl</param-value>
</context-param> 
```

**[编辑2]**

网页.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    version="3.0">
    <display-name>jsf-facelets</display-name>
    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.html</url-pattern>
    </servlet-mapping>
    <context-param>
        <param-name>javax.faces.DEFAULT_SUFFIX</param-name>
        <param-value>.xhtml</param-value>
    </context-param>
    <context-param>
        <param-name>org.apache.myfaces.EXPRESSION_FACTORY</param-name>
        <param-value>org.apache.el.ExpressionFactoryImpl</param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
        <param-value>client</param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.INTERPRET_EMPTY_STRING_SUBMITTED_VALUES_AS_NULL</param-name>
        <param-value>true</param-value>
    </context-param>
    <context-param>
        <param-name>org.apache.myfaces.NUMBER_OF_VIEWS_IN_SESSION</param-name>
        <param-value>20</param-value>
    </context-param>
    <context-param>
        <param-name>org.apache.myfaces.SERIALIZE_STATE_IN_SESSION</param-name>
        <param-value>true</param-value>
    </context-param>
    <context-param>
        <param-name>org.apache.myfaces.COMPRESS_STATE_IN_SESSION</param-name>
        <param-value>true</param-value>
    </context-param>
    <context-param>
        <param-name>org.apache.myfaces.COMPRESS_STATE_IN_CLIENT</param-name>
        <param-value>true</param-value>
    </context-param>
    <context-param>
        <param-name>org.apache.myfaces.ALLOW_JAVASCRIPT</param-name>
        <param-value>true</param-value>
    </context-param>
    <context-param>
        <param-name>org.apache.myfaces.PRETTY_HTML</param-name>
        <param-value>true</param-value>
    </context-param>
    <context-param>
        <param-name>org.apache.myfaces.DETECT_JAVASCRIPT</param-name>
        <param-value>false</param-value>
    </context-param>
    <context-param>
        <param-name>org.apache.myfaces.AUTO_SCROLL</param-name>
        <param-value>true</param-value>
    </context-param>
    <context-param>
        <param-name>org.apache.myfaces.SECRET</param-name>
        <param-value>NzY1NDMyMTA=</param-value>
    </context-param>
    <listener>
        <listener-class>org.apache.myfaces.webapp.StartupServletContextListener</listener-class>
    </listener>
    <session-config>
        <session-timeout>30</session-timeout>
    </session-config>
</web-app> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T10:38:09.513

您应该使用`.html`以下扩展名访问您的页面：`myPage.html`

servlet 映射的原因

```
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.html</url-pattern>
</servlet-mapping> 
```

# javascript - 在 Javascript 上获取标签？

> ID：10358828
> 
> 赞同：0
> 
> 时间：2012-04-27T22:43:55.473
> 
> 标签：javascript, jquery, get

我正在编写一个脚本，该脚本需要我获取一个变量，以便我们找到站点上的正确位置。

我想做类似的事情：

```
<script type="text/javascript" src="dir/script.js?x=103"></script> 
```

但我怎么会得到呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T22:45:53.353

假设您知道脚本本身中的脚本文件名，请在所有`<script>`标签中搜索在其`src`属性中包含相关文件名的标签。然后`split`它打开`?`并读取值。

# .net - 如何实时处理二级流程的输出？

> ID：10358837
> 
> 赞同：2
> 
> 时间：2012-04-27T22:44:42.573
> 
> 标签：.net, vb.net, perl, vb.net-2010

我正在尝试编写一个运行 Perl 脚本并读取和使用标准输出的 VB .NET 程序。我希望能够在打印时单独处理每一行，并相应地更新我的程序显示。这是我“编写”的一些代码（阅读：“主要从互联网上复制”）：

```
Private WithEvents pscript As Process

Private Sub myProgram_Load(sender As Object, e As System.EventArgs) Handles Me.Load
    pscript = New Process()
    pscript.StartInfo.CreateNoWindow = True
    pscript.StartInfo.FileName = "C:\perl64\bin\perl.exe"
    pscript.StartInfo.Arguments = "C:\test.pl"
    pscript.StartInfo.UseShellExecute = False
    pscript.StartInfo.RedirectStandardOutput = True
    pscript.StartInfo.RedirectStandardInput = True
    AddHandler pscript.OutputDataReceived, AddressOf pscript_output_process
    pscript.Start()
    pscript.BeginOutputReadLine()
End Sub

Private Sub pscript_output_process(sender As Object, e As DataReceivedEventArgs)
    MessageBox.Show(e.Data)
End Sub 
```

这适用于一个问题：程序一直等到测试脚本运行完成，然后一个接一个地触发几个 OutputDataReceived 事件。这意味着当我让它使用真实的脚本时，它可能会在长达几个小时内什么都不做，然后必须同时处理 5,000 个事件，尽管事实上是以相当固定的时间间隔打印的东西在那段时间。

有什么办法可以让它在编写时处理每一行文本，而不是在最后一次处理所有文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T07:05:33.550

我想出了如何通过从互联网上复制更多东西来解决它。问题似乎出在 Perl 中，它通常不会在每个打印语句之后刷新标准输出。我真的不知道最后一句是什么意思，但无论如何，将这一行添加`local $| = 1;`到脚本的顶部（根据我阅读的网站，这使得它自动刷新标准输出）解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T22:56:37.857

```
While (pscript.HasExited = False)
    Dim sLine As String = pscript.StandardOutput.ReadLine
End While 
```

# ubuntu-11.10 - 从 ubuntu 11.10 打开 Omnet

> ID：10358842
> 
> 赞同：4
> 
> 时间：2012-04-27T22:45:18.897
> 
> 标签：ubuntu-11.10, omnet++

我是 Omnet++ 的新手。我安装了 Omnetpp-3.3p1 并且无法打开它。我尝试在项目中创建一个生成文件，其中包含带有命令的模拟代码`opp_makemake -f -N`，但我`command opp_makemake`没有找到错误。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T03:47:13.913

如果未正确安装 OMNeT++ 或未正确链接库，则可能会引发错误。此[PDF](http://uhost.rmutp.ac.th/tanavoot.n/Paper_References/WorkShop_Omnet/Document_Omnet/Castalia%20-%20Installation.pdf)应该是您要查找的内容，因为它解释了如何正确安装 3.3p1 版本。- 希望有所帮助！

# javascript - 如何绘制思维导图

> ID：10358843
> 
> 赞同：7
> 
> 时间：2012-04-27T22:45:20.333
> 
> 标签：javascript, html, css, algorithm, mindmapping

我正在研究绘制思维导图的算法。要点是智能地排列节点，这样就没有重叠，看起来分布很好。作为示例，请参见此屏幕截图（来自[MindNode](http://www.mindnode.com/)）：

![它应该是什么样子](../Images/56d9ed09270ea41e0af40659ca277a47.png)

考虑到每个节点占用的空间，关于如何很好地安排这个结构的任何想法？你知道我可以研究的任何代码（比graphviz更简单的东西）吗？

在它出现之前，我不是在寻找像这样的“物理模拟”算法，或者像 dot.js[这样](https://github.com/kennethkufluk/js-mindmap)的完成程序。最后我想在 JS 中实现它，但是为了理解算法，任何语言都可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T22:49:27.663

我猜你只能用 CSS 来做到这一点。使用 JS 为您的节点提供正确的类，CSS 将根据需要安排它们。

例如，您可以`margin: 1em 0 1em 0`在每个节点上进行设置，使其有足够的空间等。

# web-services - Rest WS 和 Servlet 有什么区别

> ID：10358847
> 
> 赞同：0
> 
> 时间：2012-04-27T22:45:38.687
> 
> 标签：web-services, rest, web

他们在行动上有什么不同？Servlet 仅打印 html？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-28T19:39:10.630

小服务程序：

--是一个Web组件

--这是一个强大的java技术

--由生成动态内容的容器（即tomcat等web服务器）管理

--平台无关的java类（字节码）

-- 与 Web 客户端交互作为请求响应范例

--请求处理方法

```
 ****doGet,doPost,doDelete,doPut,doOptions,doHead,doTrace**** 
```

Rest WS（具象状态转移网络服务）

--一种在Web应用程序中实现面向服务架构的方法

——这是一个建筑概念

--web 服务资源可使用 URLS 唯一标识

--它与HTTP方法有明确的关系，即GET、POST、PUT、DELETE

-- 跨平台高度可重用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T14:32:04.983

Rest WS 是您调用的服务，它以 REST 格式返回数据。

Servlet 是一种向用户显示信息的 UI。

它们是非常不同的，尽管 Servlet 可以从 Rest Web 服务中获取它所显示的信息。

# c# - 在一个会话中获取多个项目

> ID：10358851
> 
> 赞同：1
> 
> 时间：2012-04-27T22:45:54.873
> 
> 标签：c#, asp.net

我将多个项目存储到一个会话变量中：这是 4 个不同的单词。

我需要能够在一个会话中使用这 4 个不同的单词，并将它们存储到单独的变量中以便我可以使用它们，这可能吗？如果是这样怎么办？

_application 仅保存来自文本框的一系列文本中的文本。

这是我的会话课。

```
 public class JobApplicantSession
{

    public JobApplication ApplicationSession
    {

      get {if (HttpContext.Current.Session["Application"] != null)
               return (JobApplication)HttpContext.Current.Session["Application"];
           return null; }

      set{ HttpContext.Current.Session["Application"] = value; }
    } 
```

工作申请：工作申请包含来自文本框列表的信息。

```
JobApplication _application;
_application = new JobApplication(jobID);
if (i < _applicant.Fields.Count)
                _applicant.AddAnswer((_controlsList[i] as TextBox).Text);
            else
                _application.AddAnswer((_controlsList[i] as TextBox).Text); 
```

添加到会话：

```
_sessions.ApplicationSession = _application; 
```

我可以得到会话：

```
JobApplication application;
var jas = new JobApplicantSession();
application = jas.ApplicationSession; 
```

申请工作：

```
public class JobApplication
{
    private int _jobID = -1;
    public JobApplication(int jobID)
    {
        _jobID = jobID;
    }
    List<String> _answers = new List<String>();
    List<JobApplicationField> _fields = new List<JobApplicationField>();
    public List<JobApplicationField> Fields
    {
        get { return _fields; }
    }
    public int JobID()
    {
        return _jobID;
    }
    public List<String> Answers
    {
        get { return _answers; }
        set { _answers = value; }
    }
    public void AddAnswer(String answer)
    {
        _answers.Add(answer);
    }
    public void AddField(JobApplicationField field)
    {
        if (field.HasFieldID)
        {
            for (int i = 0; i < _fields.Count(); i++)
            {
                if (_fields[i].FieldID == field.FieldID)
                {
                    _fields[i] = field;
                    return;
                }
            }

        }

        _fields.Add(field);
    }
    public void PopulateFromDatabase()
    {
        JobPositionSystemDAL dal = new JobPositionSystemDAL();
        DataSet data = dal.OpenJobOpeningByID(_jobID);
        foreach (DataRow row in data.Tables[0].Rows)
        {
            JobApplicationField field = new JobApplicationField(Convert.ToInt32(row["QUESTIONID"]), row["QUESTIONTEXT"].ToString(), Convert.ToBoolean(row["HASCORRECTANSWER"]), row["CORRECTANSWER"].ToString(), Convert.ToBoolean(row["ISREQUIRED"]));
            AddField(field);
        }
    }
    public bool Verify()
    {
        if (_fields.Count != Answers.Count)
            throw new Exception("Number of answers != number of fields");
        for (int i = 0; i < _fields.Count; i++)
        {
            if (_fields[i].HasCorrectAnswer == true && _fields[i].CorrectAnswer != _answers[i])
                return false;
        }
        return true;
    }

    public void Save()
    {
        JobPositionSystemDAL database = new JobPositionSystemDAL();

        foreach(JobApplicationField field in _fields)
        {
            field.Save(_jobID, ref database);
        }

        //reload to get the Field/question ID for any new fields
        Reload();
    }

    public void Reload()
    {
        _fields = new List<JobApplicationField>();
        Load(_jobID);
    }

    public void Load(int jobID)
    {
        _jobID = jobID;
        DataSet ds = DB.OpenJobOpeningByID(jobID);
        DataTable table = ds.Tables[0];

        foreach (DataRow row in table.Rows)
        {
            int questionID = 0;
            object obj = row["QUESTIONID"];
            Int32.TryParse(obj.ToString(), out questionID);
            //int jobApplicationID = Int32.Parse(row["JOBAPPLICATIONID"] as String);
            string questionText = row["QUESTIONTEXT"] as String;
            int type = Int32.Parse(row["TYPEID"].ToString());
            bool hasCorrectAnswer = (row["HASCORRECTANSWER"] as String == "0") ? false : true;
            string correctAnswer = row["CORRECTANSWER"] as String;
            bool required = ((row["ISREQUIRED"] as String) == "0") ? false : true;

            JobApplicationField field = new JobApplicationField(questionID, questionText, hasCorrectAnswer, correctAnswer, required);
            AddField(field);
        }
    }
    private JobPositionSystemDAL _db;
    private JobPositionSystemDAL DB 
    {
        get
        {
            if (null == _db)
                _db = new JobPositionSystemDAL();
            return _db;
        }
    }
}
} 
```

我如何循环遍历每个项目并将其存储到自己的变量中？我将需要 4 个变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T23:09:06.893

希望这是你所问的。如果要在会话状态中存储对象数组，可以直接使用 sotre 数组：

```
 HttpContext.Current.Session["data"] = new int[32]; 
```

或根据元素索引动态创建名称（奇怪，但可能）：

```
 var data = new int[3];
 HttpContext.Current.Session["data" + 0.ToString()] = data[0]; 
 HttpContext.Current.Session["data"  + 1.ToString()] = data[1]; 
 HttpContext.Current.Session["data"  + 2.ToString()] = data[2]; 
```

倒序阅读：

```
var dataArray = (int[])(HttpContext.Current.Session["data"]); 
```

或者

```
 var data = new int[3];
 data[0] = (int)HttpContext.Current.Session["data" + + 0.ToString()]; 
```

# unity3d - 通过 Application.LoadLevel 加载的场景中的脚本不起作用

> ID：10358854
> 
> 赞同：1
> 
> 时间：2012-04-27T22:46:08.977
> 
> 标签：unity3d, gameobject

我创建了简单的 Unity 应用程序，允许加载从 Internet 下载的不同场景。如果场景不包含任何脚本，它会很好用。如果有与 GameObject 连接的脚本，则会失败并出现错误：

```
The class defined in script file named 'XXX' does not match the file name! 
```

如果该场景作为单独的应用程序脚本启动没有任何问题，但如果该场景是通过 BuildPipeline.BuildStreamedSceneAssetBundle 保存的，我已经得到描述的错误。

我通过简单的代码加载场景：

```
 WWW www = new WWW("file://" + file);
    yield return www;

    loadedBundle = www.assetBundle;
    Application.LoadLevel(name); 
```

主脚本留在场景中，因为我为此调用*了 DontDestroyOnLoad*。

我通过 Unity3D 3.5.0 和 3.5.1 检查了这个场景

我在哪里做错了？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T20:39:06.270

不幸的是，由于安全原因，Unity3D 阻止了资产包中的脚本，所以我的场景不会按照定义工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-21T21:38:52.547

您可以在资产包中包含脚本，但它们也必须在加载资产包的项目中，并且资产包和加载项目中的脚本需要共享一个元文件。

如果您从加载它的同一个项目构建您的资产包，这应该会自动发生。如果您使用单独的项目来构建资产包，您应该使用修订控制来确保这些脚本保持同步。

# ruby-on-rails - Rails 3\. has_many 作为另一个类

> ID：10358855
> 
> 赞同：1
> 
> 时间：2012-04-27T22:46:17.953
> 
> 标签：ruby-on-rails, ruby, activerecord

所以我有两个模型：User 和 ScheduledSession

用户具有角色。角色之一是“讲师”。

```
ScheduledSession
belongs_to :instructor, :class_name => 'User', :foreign_key => 'instructor_id'

User
has_many :scheduled_sessions 
```

好的！所以我可以这样做...

```
s = ScheduledSession.first
s.instructor 
```

坏的！但我不能这样做...

```
u = User.first
u.scheduled_sessions 
```

我得到这个错误...

```
SQLite3::SQLException: no such column: scheduled_sessions.user_id: SELECT "scheduled_sessions".* FROM "scheduled_sessions"  WHERE "scheduled_sessions"."user_id" = 1
ActiveRecord::StatementInvalid: SQLite3::SQLException: no such column: scheduled_sessions.user_id: SELECT "scheduled_sessions".* FROM "scheduled_sessions"  WHERE "scheduled_sessions"."user_id" = 1 
```

如何以相反的方式设置关系，以便我可以查看哪些预定会话属于该讲师（用户）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T22:51:04.387

您也只需要在 User has_many 关系中设置外键。

```
has_many :scheduled_sessions, :foreign_key => 'instructor_id' 
```

# google-maps - 使用超链接控制 Google 地图缩放级别

> ID：10358857
> 
> 赞同：1
> 
> 时间：2012-04-27T22:46:35.113
> 
> 标签：google-maps, google-maps-api-3, zooming

如何使用超链接控制 Google 地图的缩放级别？例如，我想要三个定义的级别（英国的位置、欧洲的英国、世界的欧洲）。单击这些链接将显示具有不同缩放级别的地图。

我正在使用 Google Maps API v3

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T23:17:13.463

这应该不会太难做到。

创建地图时，您会获得对地图对象的引用，例如

```
var mapOptions = {mapTypeId: google.maps.MapTypeId.TERRAIN};
var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions); 
```

拥有对象后，您可以像这样缩放到特定级别：

```
function zoomToLevel() {
    map.setZoom(8);
} 
```

所以你只需要设置你的超链接的点击事件来运行 javascript 函数：

```
<a href="#" onclick="zoomToLevel(); return false;">Zoom to level 8</a> 
```

但是，对于您正在做的事情，最好让地图根据该区域选择自己的缩放级别。此功能实际上是缩放以显示比利牛斯山脉，但该想法可用于任何区域，只要您的点位于对角线对角：

```
function zoomPyrenees() {
    var startPoint;
    var endPoint;
    var boundsPyrenees;

    startPoint = new google.maps.LatLng(43.373403, -1.774107);
    endPoint = new google.maps.LatLng(42.482463, 3.129875);
    boundsPyrenees = new google.maps.LatLngBounds();
    boundsPyrenees.extend(startPoint);
    boundsPyrenees.extend(endPoint);

    map.fitBounds(boundsPyrenees);
} 
```

# android - Android if else 语句在 onItemClickListener 中不起作用

> ID：10358859
> 
> 赞同：2
> 
> 时间：2012-04-27T22:46:43.633
> 
> 标签：android, listview, if-statement, onclick

我有一个列表视图，显示从我的网站获得的值（名称），然后使用 onItemClickListener 在 Web 视图中加载与该名称对应的 url 链接，效果很好！但是当我添加一个 if 语句时它不会读取它，有人可以告诉我我做错了什么吗？

这是代码

```
private AdapterView.OnItemClickListener onPeriodicosListClick = new  AdapterView.OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View view, int position,
            long id) {
        cambio="";
        pUrl="";
        noteId = arrayOfWebData.get(position);
        cambio  = noteId.Medio.toString();
        PeriodicosListLayout.setVisibility(View.GONE);
        webLayout.setVisibility(View.VISIBLE);      
        pUrl = noteId.website.toString();
        wvp.loadUrl(pUrl);

        if ( cambio == "Periodico"){
            Toast.makeText(getApplicationContext(),
                    cambio,
                    Toast.LENGTH_LONG).show();
        }
        if ( cambio == "Tv"){
            Toast.makeText(getApplicationContext(),
                    cambio,
                    Toast.LENGTH_LONG).show();
        }

    }
}; 
```

(cambio = noteId.Medio.toString();) 只能是 Periodico、Radio、Tv（因为我已经将它的值设置为这 3 个单词中的任何一个）所以我想要的只是一个 tost 来显示这是什么！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T22:48:43.950

不应该

```
if(cambio == "Periodico") 
```

但

```
if(cambio.equals("Periodico")) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T22:48:50.910

不确定，但如果 cambio 是一个 String 对象，if 语句应该是

```
if(cambio.equals("Periodico") {
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T22:56:03.823

== 运算符检查两个对象是否引用内存中的同一空间（不是字符串的内容）。字符串是对象，这意味着 == 运算符不进行内容检查，而是进行引用检查。使用实例[compareTo(String anotherString)](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#compareTo%28java.lang.String%29)或[equals(Object)](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#equals%28java.lang.Object%29)方法比较字符串的内容，即：

```
if (cambio.compareTo("Periodico") == 0) { /* match */ }
if (cambio.compareTo("Tv") == 0){ /* match */ } 
```

如果大小写无关紧要，还有一个[compareToIgnoreCase(String string)](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#compareToIgnoreCase%28java.lang.String%29)和[equalsIgnoreCase(Object)变体。](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#equalsIgnoreCase%28java.lang.String%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T22:54:57.753

您是否尝试使用 switch 语句而不是 if？另外，如果您使用将 cambio 输出到 logCat，您会得到什么

```
Log.d(TAG, "cambio: " + cambio); 
```

最后一件事。您使用什么将列表连接到您的活动？一个简单的适配器，baseAdapter，..？

# java - html表单未在java servlet中呈现

> ID：10358860
> 
> 赞同：0
> 
> 时间：2012-04-27T22:46:51.153
> 
> 标签：java, html, xml, servlets, forms

我正在做一个非常简单的教程来学习 java servlet 编程。出于某种原因，在 Eclipse 中执行教程时，浏览器没有呈现我正在编写的 html 表单中的提交按钮。我已经检查了很多次代码，包括尝试了许多小的更改，甚至通过谷歌搜索确认我确实记得我的基本 html。但问题仍然存在。

具体来说，当我从 Eclipse 中在本地 Tomcat 服务器上运行 SimpleForm.html 时，它会呈现 userName 输入框，但之后它只会输出所有 html 代码的文本版本，从提交按钮的输入标记开始。

这是重新创建我的问题所需的信息。谁能告诉我如何解决这个问题？

教程在这个链接上，大约九分半钟： [http ://www.youtube.com/watch?v=MnUJl3NYRRc&feature=endscreen&NR=1](http://www.youtube.com/watch?v=MnUJl3NYRRc&feature=endscreen&NR=1)

eclipse中打开了三个文件，包括：

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"     xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-    app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
  <display-name>SimpleServletProject</display-name>
    <servlet>
    <servlet-name>xmlServlet</servlet-name>
    <servlet-class>org.koushik.javabrains.XmlServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>xmlServlet</servlet-name>
    <url-pattern>/xmlServletpath</url-pattern>
</servlet-mapping>
</web-app> 
```

xmlServlet.java

```
package org.koushik.javabrains;

import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

public class XmlServlet extends HttpServlet {

protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    response.setContentType("text/html");
    PrintWriter out = response.getWriter();
    String userName = request.getParameter("userName");
    out.println("Hello! "+ userName);   
}   
} 
```

SimpleForm.html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
</head>
<body>
    <form action='xmlServletPath'>
        <input name='userName' />
        <input type='submit' />
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T23:24:21.690

在您的 web.xml url-pattern 中是“xmlServletpath”，但实际上是“xmlServletPath” java 区分大小写，请尝试将 xmlServletpath 放入您的操作中。所以：

```
<form action='xmlServletpath'> 
```

应该是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T22:48:36.057

您在 HTML 文件的表单操作中遗漏了一个“/”。它应该是

```
<form action='/xmlServletPath'> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T22:52:53.053

我认为属性应该用双引号引起来。试试这样改

```
<form action="/xmlServletPath">
        <input name="userName" />
        <input type="submit" />
</form> 
```

# python - 如何为 Python 获取“规范的 unix shell”

> ID：10358862
> 
> 赞同：4
> 
> 时间：2012-04-27T22:47:12.847
> 
> 标签：python, shell

根据该`subprocess`模块的文档，它的默认 shell 是`/bin/sh`，但我对硬编码这些常量有一种根深蒂固的、可能是非理性的厌恶。

因此，我更喜欢引用`subprocess`. 我还没有找到任何方法来`subprocess` *直接*询问这个常数。我管理过的最好的是

```
def _getshpath():
    return subprocess.check_output('which sh', shell=True).strip() 
```

或者

```
def _getshpath():
    return subprocess.check_output('echo "$0"', shell=True).strip() 
```

...两者看起来都非常脆弱，因为它们的有效性最终取决于我首先要确定的具体价值。（即，如果这个可执行文件的值不是“/bin/sh”，那么任何一个定义都可能很容易变得毫无意义。）

获得此路径的最佳实践是什么（没有将其硬编码为“/bin/sh”）？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T23:17:38.657

将其硬编码为 /bin/sh 是完全有效的。如果您查看 C 的 popen() 的文档，您会发现它也是这样做的。/bin/sh 在构造上是系统的标准外壳。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T23:12:48.203

你可以试试

```
>>> import os
>>> shell = os.environ['SHELL']
>>> print shell
'/bin/bash' 
```

您可以使用它来设置 的`executable`参数`subprocess.Popen`。

# ruby-on-rails-3 - 不清楚何时使用特定的 FactoryGirl 语法

> ID：10358866
> 
> 赞同：6
> 
> 时间：2012-04-27T22:47:29.507
> 
> 标签：ruby-on-rails-3, factory-bot

在最新版本的 FactoryGirl 中，一些语法方法`Factory.create`被贬低，取而代之的是其他几种方法，最值得注意`FactoryGirl.create`的是更简单的`create`.

然而，经验表明，某些语法并不总是适合上下文。

举个例子：

```
FactoryGirl.define do

  factory :article do
    after_create {|a| a.comments << create(:comment) }
  end

  factory :comment do
  end

end 
```

其中文章有_许多评论，评论属于_文章。在上述工厂中，`a.comments << create(:comment)`发出错误`Comment(#nnn) expected, got FactoryGirl::Declaration::Static`。将该行更改为`a.comments << FactoryGirl.create(:comment)`，错误消失。

目前尚不清楚一种语法何时应优先于任何其他形式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T07:33:57.883

我了解到，从当前版本（3.2.0）开始，回调（例如 after_create）不支持缩写符号。这些信息直接来自 FactoryGirl 团队通过 Google 群组。当/如果它被添加到未来的版本中，我会更新这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-28T16:01:41.183

根据[FactoryGirl 文档](https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md)，如果您想在调用 create 和 build 等方法时省略 FactoryGirl 模块前缀，则需要在 rspec/test-unit 模块中混入 FactoryGirl 方法，如下所示：

```
# rspec
RSpec.configure do |config|
  config.include FactoryGirl::Syntax::Methods
end 
```

# python - 如何在python中解析来自套接字的二进制数据？

> ID：10358868
> 
> 赞同：2
> 
> 时间：2012-04-27T22:47:37.680
> 
> 标签：python, parsing, sockets, modem

我目前正在从事一个需要与微硬蜂窝调制解调器 IPn3G 通信的项目。我将调制解调器设置为通过 TCP 向我的计算机发送消息，我可以在套接字中接收消息。

消息看起来像这样：

```
���������DKReadyCANRogersWirelessInc. Home354626030393530302720391029547 
```

现在，我可以识别其中的一些字段，例如 Status 或 Carrierinfo 以及最后的 imei 和 imsi。

我的问题是，我如何解析看起来很有趣的东西？我尝试过 struct，但它似乎对我没有多大帮助。

在调制解调器的文档中，我只发现了这个：

modem_event 消息结构：

*   固定标头（固定大小 20 字节）
*   调制解调器 ID（uint64_t（8 字节））
*   消息类型掩码（uint8_t（1 字节））
*   预订的
*   数据包长度（uint16_t（2 字节）） 注意：数据包长度 = 固定报头长度 + 消息负载长度。

承运人信息：

*   内容长度 2 BYTES (UINT16_T)
*   RSSI 1 字节 (UINT8_T)
*   射频频段 2 字节 (UINT16_T)
*   服务类型 STRING（1-30 字节）
*   通道号 STRING（1-30 字节）
*   SIM 卡号 STRING（1-30 字节）
*   电话号码 STRING（1-30 个字节）

对我来说，这条信息似乎与它应该是什么不一致。如果有人对如何解决这个问题提出建议，我将非常高兴。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T22:49:25.243

Python 有很棒的[struct](http://docs.python.org/library/struct.html)模块，它允许你打包和解包二进制数据。

我明白了，您已经尝试过使用它。对于您的设备，我没有文档（去检查一下！），但我可以假设，字符串是空终止的（它们之前没有给出它们的大小）。

获取消息的字符串部分的大小（从其他字段的大小和数据包长度）并将所有字符串读入一个 Python 字符串，并使用`<number>s`并拆分它们以找到空字符。

# java - Android 画布不显示

> ID：10358869
> 
> 赞同：-2
> 
> 时间：2012-04-27T22:47:45.823
> 
> 标签：java, android

我正在制作一个简单的绘画应用程序，这是我第一次使用画布。我的布局 xml 中已经有 SurfaceView，并且 id 是正确的。无论如何，这是我的代码：

```
package com.example.paint;

import android.app.Activity;
import android.graphics.Canvas;
import android.os.Bundle;
import android.view.SurfaceHolder;
import android.view.SurfaceView;

public class Paint extends Activity {
/** Called when the activity is first created. */

SurfaceView v;
SurfaceHolder holder;
Canvas c;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    v = (SurfaceView) findViewById(R.id.svDraw);
    holder = v.getHolder();

    while (true) {
        try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        if (!holder.getSurface().isValid())
            continue;

        c = holder.lockCanvas();
        c.drawARGB(255, 0, 255, 0);
        holder.unlockCanvasAndPost(c);
    }
}
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T23:16:54.467

您需要删除`while(true)`，它是一个无限循环，可以防止任何事情发生。

绘图代码属于包含画布对象的`onDraw`方法`View`

# google-maps-api-3 - 使用从 Fusion Table 数据创建的圆形对象数组填充谷歌地图

> ID：10358870
> 
> 赞同：1
> 
> 时间：2012-04-27T22:47:45.660
> 
> 标签：google-maps-api-3, google-fusion-tables

我知道我正在忽略/没有考虑一些基本的东西，但我不知道我不知道什么......

尝试使用 Fusion Tables 填充一组 Google Maps API 圆形对象并将它们放置在地图上。

目前我可以像这样对数组进行硬编码：

```
citymap['Dane'] = {
    center: new google.maps.LatLng(43.10599621690524, -89.38682556152344),
    population: 5000000
}; 
```

...并将它们放在[地图上](http://jsfiddle.net/chrislkeller/NvBXR/16/)。

而且我能够从 Fusion Tables 返回 JSON，循环并创建我认为的数组并[显示它](http://jsfiddle.net/chrislkeller/x7DeR/4/)，但我无法让圆形对象出现。

任何关于我需要谷歌/学习的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T22:52:17.653

您想查看[Circle](https://developers.google.com/maps/documentation/javascript/reference#Circle)类；它提供了一种简单的方法来创建圆形并将它们放置在地图上。好的，所以我看到你已经找到了 shape 类，所以你很好。

我认为您的问题是您将处理循环中的所有内容都转换为字符串：

```
citymap = {};
for (var i = 0; i < data.table.rows.length; i++) {
    citymap += 'citymap[\'' + data.table.rows[i][0] + '\'] = {' +
        'center: new google.maps.LatLng(' + data.table.rows[i][1] + '),' +
           'population: 2842518};';
} 
```

我认为您想要看起来更像这样的代码：

```
citymap = new Array();
for ( var i = 0; i < data.table.rows.length; i++ ) {
    var circleData = {
        center: new google.maps.LatLng( data.table.rows[i][1] );
        position: 2842518
    }
    citymap.push( circleData );
} 
```

我意识到我遗漏了一些其他数据，但你明白了。我相信您的主要问题是您正在对代码进行字符串化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T22:56:04.160

这是一个使用新的 Trusted Tester API 生成要在地图上显示的多边形的示例：

[https://developers.google.com/fusiontables/docs/samples/mouseover_map_styles](https://developers.google.com/fusiontables/docs/samples/mouseover_map_styles)

逻辑应该是相似的，但是您将创建一个圆形而不是多边形：

```
new google.maps.Circle({
  center: new google.maps.LatLng(<lat>, <lng>),
  strokeColor: "#FF0000",
  strokeOpacity: 0.8,
  strokeWeight: 2,
  fillColor: "#FF0000",
  fillOpacity: 0.35,
  map: map,
  radius: <radius>
}); 
```

# c# - 如何访问 DataList 中的最后一项以设置其类？

> ID：10358871
> 
> 赞同：0
> 
> 时间：2012-04-27T22:47:49.787
> 
> 标签：c#, asp.net

我需要为 DataList 中的每个项目创建按钮，但最后一个按钮的格式需要不同，因此需要应用不同的 css 类。

我认为这应该在 OntemDataBound 方法中完成，但如果我错了，请随时纠正我。

我想做这样的事情：

```
protected void dlDataList_ItemDataBound(object sender, DataListItemEventArgs e)
{
  if (e.Item.ItemIndex == dlDataList.Items.Count - 1) //This doesn't work like I'd hoped
  {
    Panel button = (Panel)e.Item.FindControl("btnButton");
    button.CssClass = ("altClass");
  }
  ...
} 
```

问题是，我认为数据列表不知道它在 ItemDataBound 事件中有多少项目，因为 dlDataList.Items.Count 始终与 ItemIndex 相同。

关于如何为最后一个按钮提供 altClass css 类的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T23:13:19.890

在绑定 DataList 之前，将项目总数保存在页面级变量中。然后在您的 ItemDataBound 上，检查当前索引是否等于项目总数（当然是-1）并相应地设置您的 css 类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T23:27:09.220

正在为数据源中的每个对象触发 ItemDataBound 事件。因此，每次将一个项目添加到数据列表时，它的索引都会增加 1，但您的计数也会增加，因此它们始终相等。您应该与数据列表数据源属性进行比较并从中获得计数。数据源预先知道您的列表有多大。您只需要将数据源转换为数据绑定到的对象。所以如果它是`List<string>`你会使用类似的东西：

`if (e.Item.ItemIndex == ((List<string>)dlDataList.DataSource).Count - 1)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T22:57:20.727

通常索引是从零开始的，所以在一个有 5 个元素的列表中，最后一个元素的索引将为 4，计数为 5，所以如果你从计数中减去 1，我认为它会起作用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T23:00:02.883

您需要查询 DataList 的 DataSource 而不是它的项目，因为项目是在数据绑定之前创建的。

```
protected void dlDataList_ItemDataBound(object sender, DataListItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem)
    {
         // use the item's DataItem property or the DataList's DataSource property directly
         DataTable tbl = ((DataRowView)e.Item.DataItem).Row.Table;
         if (e.Item.ItemIndex == tbl.Rows.Count - 1)
         {
             // ....
         }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T22:53:37.567

```
for (int i=0; i<= DataList1.Items.Count; i++)
{
    if (e.Item[i] == dlDataList.Items.Count - 1) //This doesn't work like I'd hoped
     {
       Panel button = (Panel)e.Item.FindControl("btnButton");
        button.CssClass = ("altClass");
      }
} 
```

# java - Java 和 JDialogs

> ID：10358872
> 
> 赞同：1
> 
> 时间：2012-04-27T22:48:06.393
> 
> 标签：java, swing, jdialog

我了解如何创建 JDialog 的实例，但它们是否以与 JFrame 相同的方式正确显示。我要做的就是让它正常运行，只需将其设置为可见吗？还应该做些什么吗？这是正确和最简单的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T22:50:28.817

在您显示您的 之前`JDialog`，您可能应该[`pack`](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#pack%28%29)这样做。此外，如果您在`JDialog`创建它时没有为它提供所有者，您应该使用[`setLocationRelativeTo(owner)`](http://docs.oracle.com/javase/7/docs/api/java/awt/Window.html#setLocationRelativeTo%28java.awt.Component%29)它使其在所有者的中心弹出。

# android - 如何在不同进程中实现Service和Activity之间的通信？

> ID：10358873
> 
> 赞同：2
> 
> 时间：2012-04-27T22:48:09.180
> 
> 标签：android, android-service, android-activity, android-2.3-gingerbread

我读了一些类似的问题（例如在[这个链接](https://stackoverflow.com/questions/4300291/example-communication-between-activity-and-service-using-messaging)上），但我问的问题有点不同。实际上，在我的情况下，该服务是由该`startService`方法手动启动的，因此无法使用该`bindService`方法启动它。

1.  假设我们有一个包含`MainService`服务和`MainServiceActivity`活动的包。在文件*“AndroidManifest.xml”*中，这个活动被声明为 action`MAIN`和 category `LAUNCHER`。该活动用于通过 配置服务`SharedPreferences`并通过调用`startService`方法启动服务。换句话说，通常用户启动`MainServiceActivity`并配置/启动`MainService`.
2.  现在考虑另一个活动（我们称之为`SecondActivity`），它是另一个包的一部分。根据配置，服务使用`startActivity`方法启动此活动，因此此其他活动在与`MainService`. 一旦活动运行，它应该通知服务。
3.  此时，在`MainService`和之间开始通信请求/回复`SecondActivity`：服务发送请求，活动发送回复。

通过消息传递的通信可能适合，但它`MainService`是通过`startService`方法启动的，因此`bindService`想要绑定到服务的活动不能调用该方法。

然后我有了一个使用附加服务的想法（我们称之为它`UtilityService`），它是同一个包的一部分`MainService`：`UtilityService`可以使用该`bindService`方法启动。作为结果：

*   一旦`MainService`运行，它可能会执行绑定到`UtilityService`;
*   当`MainService`启动一个外部活动（例如上面的`SecondActivity`）时，这个活动绑定到`UtilityService`.

通过这种方式，the`MainService`和 the`SecondActivity`都连接到了`UtilityService`，后者充当了通信的中介。

这个想法有替代方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T23:06:32.163

> 事实上，在我的例子中，该服务是通过 startService 方法手动启动的，因此无法使用 bindService 方法启动它。

如果您愿意，您可以绑定和启动服务。这有点不寻常，但可以做到。

> 这个想法有替代方案吗？

绑定与能够与活动通信的服务没有特别的关系。通过绑定使用某种回调或侦听器对象是一种可能性，但远非唯一。

你可以：

*   让服务发送广播`Intent`，由活动接收

*   让活动在发送 via 的命令的额外内容中向服务发送`PendingIntent`（例如，通过`createPendingResult()`），以供服务用于将信息发送回活动（或活动希望它去的任何地方，例如广播）`Intent``startService()`

*   让活动在通过发送的命令的额外内容中将`Messenger`与其 Handler 绑定的服务传递给服务，以供服务用于将信息发送回活动`Intent``startService()`

所有这些在流程之间以及流程内都可以很好地工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T22:55:04.457

您可以使用[Android 接口定义语言 (AIDL)](http://developer.android.com/guide/developing/tools/aidl.html)。

[您可以在此处](http://marakana.com/forums/android/examples/48.html)找到易于使用的指南

# svn - 如何对项目进行 svn 版本控制，同时包含代码和数据文件

> ID：10358886
> 
> 赞同：0
> 
> 时间：2012-04-27T22:50:30.907
> 
> 标签：svn

我正在考虑如何通过脚本程序（Perl、Shell 等）操作文本文件来适当地对与自然语言处理相关的项目进行版本控制。脚本通常读取文本数据文件作为输入，进行一些处理，然后再次将结果作为文本文件输出。所以有很多代码和数据文件，都是文本格式的。

显然，我只有版本控制代码文件，因为数据文件可能很大。而且我需要维护代码的分支，以尝试不同的方法。

（1）我目前版本控制的解决方案是将代码和数据文件混合在单个目录“proj”的同一级别：

code1, ..., codem, data1, ..., datan

使用分支时，我需要检查“proj”下“branch”中的所有文件，而不是“branch”子文件夹中的所有文件，以保持上述“平面”目录结构。

我当前解决方案的优点是最小的目录转换开销。由于代码和数据在同一个目录中，调用脚本和查看结果需要最少的“cd”：

script1 数据输入数据输出

vi 数据输出

缺点是当代码和数据文件的数量增加时，面对“proj”文件夹中的一长串文件看起来很乱。

（2）另一种方法是将代码和数据放在不同的目录下：

“项目/src”和“项目/数据”。

利弊与解决方案（1）正好相反。优点是我可以获得更清晰的目录结构。缺点是我需要在调用脚本或查看结果时进行大量目录转换：

脚本1 ../data/data-in ../data/data-out

vi ../data/data-out 或 cd ../data；vi 数据输出

如果在 src 文件夹中。所以数据文件“../data”的额外父路径带来了很多目录转换的麻烦，尤其是当需要做大量的快速实验和检查结果时。

你有什么其他的建议？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T22:54:09.173

第二种方式 - 将项目与他们自己的 data/src 分开。

您可以轻松地使用脚本、符号链接和别名来方便地处理您最终使用的任何内容。

但是，如果您在 Svn 中的目录布局是一个巨大的混乱球，那么当它变得过于混乱时，您会发现很难解开。

所以你的布局可能是这样的：

```
/sources/
    /project1/
        script-for-proj-1
        other-stuff-for-proj-1
        data-for-proj1              --> /data/dataset24
    /project2/
        script-for-proj2
        other-stuff-for-proj-2
        data-for-proj2              --> /data/dataset23 
```

在这里，一切都`/sources`生活在 Subversion 中。每个项目目录都有指向它需要的数据目录的符号链接。但是所有数据实际上都存在于 . 中`/data`，并使用任何对此有意义的工具进行存档/维护。

该系统的另一个优点是，虽然数据没有版本化，但符号链接是版本化的，因此当您的项目需要不同的输入时，您可以跟踪它们正在使用的内容。

# jquery - 使用 eq() 根据索引获取所有 td

> ID：10358888
> 
> 赞同：1
> 
> 时间：2012-04-27T22:50:48.950
> 
> 标签：jquery, jquery-selectors

我有索引 2 - 即第 3 列，（0 - 第 1 列、1 - 第 2 列和 2 - 第 3 列），下面的选择器我从正确的列中只得到**1 个td，***但是*我想要**所有**的td索引 2，我该如何实现？

```
$($(selector).find("td").eq(currentCol)).each(function(i) { 
  Console.log("Left-", currentCol,$(this).width() - diff);
  $(this).css("width", ($(this).width() + diff) + "px");
}); 
```

html:

```
<table style="width: 170mm; text-align: left;" class="te-tablerenderer"><tbody style="text-align: left;"><tr style="text-align: left;" class=""><td style="width: 64px;"><br></td>    <td style="">          <b>City:</b>        </td><td style="">          <b>City:</b>        </td><td style="">          <b>City:</b>        </td>     </tr><tr style="text-align: left;" class=""><td style="width: 64px;"><br></td>    <td style="">          <b>City:</b>        </td><td style="">          <b>City:</b>        </td><td style="">          <b>City:</b>        </td>     </tr><tr style="text-align: left;" class=""><td style="width: 64px;"><br></td>    <td style="">          <b>City:</b>        </td><td style="">          <b>City:</b>        </td><td style="">          <b>City:</b>        </td>     </tr></tbody>  </table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T23:11:22.040

您可以遍历每一行并获取 col 位置/索引的 td：

```
$(selector).find('tr').each(function(){
    var td = $(this).children('td').eq(2);
    //do some other stuff with the td
}); 
```

其中 2 是 col 位置/索引。

注意：通过阅读文档，使用 .eq 函数只会返回一个结果，因此您现有的代码只会影响一个元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T23:03:23.100

改用 CSS 选择器怎么样？[`nth-of-type`](http://reference.sitepoint.com/css/pseudoclass-nthoftype)应该做你想做的事：

```
$(selector).find("tr td:nth-of-type(3)") 
```

# matlab - 在 Matlab 中维护 CUDA 内核启动之间的 gpuArray 数据

> ID：10358892
> 
> 赞同：3
> 
> 时间：2012-04-27T22:51:07.177
> 
> 标签：matlab, cuda

我正在使用 parallel.gpu.CUDAKernel 在 Matlab 2011a 中启动 CUDA 内核。我已经设计了我的代码，使得相同的 gpuArray 应该由循环内的后续内核启动填充，但每次启动都将自身限制为 gpuArray 的唯一段。

到执行结束时，整个数组应该是满的。但是，当我使用gather() 将内存传输回主机时，只有上次内核启动写入的内存是正确的；其他一切都是空白的。如果我在中间某处跳出循环也是如此。

我已经通过传入一个标志来指示内核迭代来验证确实是这种情况。如果它是除了第一次迭代之外的任何东西，那么内核什么也不做。然而，第一个内核写入的数据位置仍然是空的，即使随后的内核什么都不做！如果我在启动第一个内核后直接跳出循环，情况就不是这样了。

因此，在我看来，Matlab 在内核启动之间重置了 gpuArray。有没有办法阻止它这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T07:06:11.800

如果您捕获 feval 调用的输出，这应该可以工作。考虑这样一个简单的内核：

```
__global__ void setOneEl( double * array, double val, int element ) {
    array[element] = val;
} 
```

然后，我相信你在 MATLAB 中运行以下代码：

```
>> k = parallel.gpu.CUDAKernel('kern.ptx');
>> g = parallel.gpu.GPUArray.zeros(1,10);
>> for ii = 1:2:10, g = k.feval(g, rand, ii); end
>> gather(g)
ans =
         0    0.0975         0    0.2785         0    0.5469         0    0.9575         0    0.9649 
```

为了与普通 MATLAB 语义保持一致，`gpuArray`对象是基于值的，因此当您希望修改`gpuArray`实例时，您必须将输出值捕获回同一数组中，就像处理任何其他 MATLAB 数据类型一样。但是，请注意，`CUDAKernel.feval`当您将结果捕获到同一个变量中时，该调用可以理解，并且可以使用就地优化来避免复制。

# nhibernate - 数据类型 time 和 datetime 在大于运算符中不兼容

> ID：10358893
> 
> 赞同：1
> 
> 时间：2012-04-27T22:51:09.567
> 
> 标签：nhibernate, fluent-nhibernate

我正在使用 Fluent NHibernate (1.3.0.727) 的最新 NuGet 包，但我仍然遇到一个我认为已在 NHibernate 3.2 中修复的问题（最新的 Fluent 使用 NHibernate 3.3）。该数据库是 Azure 上的 SQL Server 2008。

当我运行将 .NET **TimeSpan**与 sql **Time**字段进行比较的查询时，它会引发以下异常：

> 数据类型 time 和 datetime 在大于运算符中不兼容。

这是一个示例查询：

```
TimeSpan ts = new TimeSpan(1, 0, 0);
List<Message> messages = messageRepo.FilterBy(m => m.SendTime > ts).ToList(); 
```

这是我的消息类片段：

```
public class Message
{
    public virtual int Id { get; set; }

    [DataType(DataType.Time)]
    public virtual TimeSpan? SendTime { get; set; }}
} 
```

这是相关的映射细节：

```
public class MessageMap : ClassMap<Message>
{
    public MessageMap()
    {
        Table("Message");
        LazyLoad();
        Id(x => x.Id).GeneratedBy.Identity().Column("MessageID");
        Map(x => x.SendTime).Column("SendTime").CustomType("TimeAsTimeSpan");
    }
} 
```

我已经到处搜索并尝试了我能找到或想到的一切。也许我只是错过了一些明显的东西？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T15:53:20.693

事实证明，Fluent 的 MsSql2008 配置将 NHibernate 数据库驱动程序设置为无法正确处理 TimeAsTimeSpan 的驱动程序。手动将驱动程序设置为 Sql2008ClientDriver 可以解决此问题。请参见下面的第 4 行：

```
var rawConfig = Fluently.Configure()
    .Database(
        MsSqlConfiguration.MsSql2008.ConnectionString(x => x.FromConnectionStringWithKey("ConnectionString"))
            .Driver("NHibernate.Driver.Sql2008ClientDriver")
    )
    .Mappings(m => m.FluentMappings.AddFromAssemblyOf<SiteUserMap>())
    .BuildConfiguration(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T21:13:01.920

TimeSpan 可以保存几天，因此它与 DateTime 兼容，而不是 Time。时间只包含一天中的时间。所以我认为你不应该为你的属性使用 DataType 属性——至少不是 DataType.Time。

# javascript - 为什么我的 onChange 事件不起作用？

> ID：10358897
> 
> 赞同：-3
> 
> 时间：2012-04-27T22:52:25.947
> 
> 标签：javascript, jquery, html, css

我正在使用 onchange 事件将当前跨度的文本复制到隐藏字段。为什么我的 onchange 事件不起作用？[http://jsfiddle.net/Hunter4854/qfdvE/](http://jsfiddle.net/Hunter4854/qfdvE/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T22:59:55.397

`innerText`不是 jQuery 方法；使用`text`. 此外，您将向后退，将隐藏的内容分配给跨度。所以代替这个：

```
$('#span').innerText($('#dropdown').val()); 
```

做这个：

```
$('#dropdown').val($('#span').text()); 
```

# java - 如何在自定义列表视图上插入复选框

> ID：10358901
> 
> 赞同：0
> 
> 时间：2012-04-27T22:52:50.570
> 
> 标签：java, android, listview, checkbox

我正在尝试在自定义列表视图中添加一个复选框，但不知道如何。

我有以下代码：

ListObject.java

```
package br.com.eduvm.xurrascalc;

public class ListObject {

private String texto;
private int iconeRid;

    public ListObject() {

}

    public ListObject(String texto, int iconeRid) {

    this.texto = texto;
    this.iconeRid = iconeRid;
}

public int getIconeRid() {

    return iconeRid;
}

public void setIconeRid(int iconeRid) {

    this.iconeRid = iconeRid;
}

public String getTexto() {

    return texto;
}

public void setTexto(String texto) {

    this.texto = texto;
}
} 
```

ListAdapter.java

```
package br.com.eduvm.xurrascalc;

import java.util.ArrayList;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.CheckBox;
import android.widget.ImageView;
import android.widget.TextView;

public class ListAdapter extends BaseAdapter {

private LayoutInflater mInflater;
private ArrayList<ListObject> itens;

public ListAdapter(Context context, ArrayList<ListObject> itens) {

    // Itens que preencheram o listview
    this.itens = itens;

    // responsavel por pegar o Layout do item.
    mInflater = LayoutInflater.from(context);
}

public int getCount() {

    return itens.size();
}

public ListObject getItem(int position) {

    return itens.get(position);
}

public long getItemId(int position) {

    return position;
}

public View getView(int position, View view, ViewGroup parent) {

    ListObject item = itens.get(position);

    view = mInflater.inflate(R.layout.itens_lista, null);

    ((TextView) view.findViewById(R.id.text)).setText(item.getTexto());
    ((ImageView) view.findViewById(R.id.imagemview)).setImageResource(item.getIconeRid());

    return view;
}
} 
```

列表.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
        android:orientation="horizontal" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="horizontal"
        android:padding="5sp" >

        <ImageView
            android:id="@+id/imagemview"
            android:layout_width="wrap_content"
            android:layout_height="match_parent" />

        <TextView
            android:id="@+id/text"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_marginLeft="5sp"
            android:gravity="center_vertical"
            android:textColor="#FFF" />

    </LinearLayout>

</LinearLayout> 
```

如何在此列表中的项目中插入复选框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T22:56:46.810

只需在布局 itens_lista.xml 中添加一个复选框。

只需添加一个复选框很容易。你想对 ti 做更多的事情吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T22:57:03.487

将[CheckBox 视图](http://developer.android.com/resources/tutorials/views/hello-formstuff.html#Checkbox)添加到您的自定义行布局。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T23:07:35.783

这将是列表中每一行的布局

```
<LinearLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal" >

<CheckBox 
    android:id="@+id/lstChkbox"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />

<TextView 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:id="@+id/lstText"
    android:textSize="30px"
    android:layout_weight="1" />

<ImageView 
    android:id="@+id/listImage"
    android:layout_height="wrap_content"
    android:layout_width="wrap_content" /> 
```

您的主列表活动布局将如下所示：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:drawSelectorOnTop="false"
    android:choiceMode="multipleChoice"
    /> 
```

您扩展 BaseAdapter getView 方法的类将如下所示：

public View getView(int position, View convertView, ViewGroup parent) { ViewHolder vHolder = null;

```
 if (convertView != null)
        vHolder = (ViewHolder) convertView.getTag();                                // convertView is been recycled
    else {
        convertView = (View) mInflater.inflate(R.layout.list_item, null);           // Set content of new View with list_item.xml

        vHolder = new ViewHolder();
        vHolder.checkBox = ((CheckBox) convertView.findViewById(R.id.lstChkbox));   // Getting pointers
        vHolder.textView = ((TextView) convertView.findViewById(R.id.lstText));
        vHolder.imageView = ((ImageView) convertView.findViewById(R.id.listImage));

        vHolder.checkBox.setOnCheckedChangeListener(this);                          // Setting Listeners

        convertView.setTag(vHolder);
    }

    vHolder.checkBox.setId(position);                                               // This is part of the Adapter APi
    vHolder.textView.setId(position);                                               // Do not delete !!!
    vHolder.imageView.setId(position);

    if (mItems.get(position).getChecked()) {                                        // Setting parameters for the View from our mItems list
        vHolder.checkBox.setChecked(true);
    } else {
        vHolder.checkBox.setChecked(false);
    }

    vHolder.textView.setText(mItems.get(position).getText());
    vHolder.imageView.setImageDrawable(mItems.get(position).getmImage());

    return convertView;
}

public static class ViewHolder {
    CheckBox checkBox;
    TextView textView;
    ImageView imageView;
}

/*
 * Ok for this test but Toast are going to show every time the row comes into View
 */
public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
    Log.d(TAG, "Checked");
    int position = buttonView.getId();

    if (isChecked) {
        mItems.get(position).setChecked(true);
        Toast.makeText(context, mItems.get(position).getText(), Toast.LENGTH_LONG).show();
    } else {
        mItems.get(buttonView.getId()).setChecked(false);
    }
} 
```

# jquery - 实现自定义 HTML 菜单时丢失 jQuery 自动完成“选择”功能

> ID：10358908
> 
> 赞同：2
> 
> 时间：2012-04-27T22:54:13.007
> 
> 标签：jquery, html, menu, autocomplete

我正在尝试使用自定义下拉菜单实现 jQuery 自动完成功能。我可以使用 data()._renderItem 方法（已注释掉）自定义菜单项，但这会禁用菜单“选择”功能。如果我尝试通过“标签”字段自定义菜单项“选择”功能有效，但我的菜单项 HTML 被解释为字符串。任何人都可以提出一个干净的方法来完成这个。

```
$("input#selectedInput")

.bind("autocompleteselect", function (event, ui) {
alert("Sel item " + JSON.stringify(ui.item.json));
})

.autocomplete({
appendTo: "#list",
source: function (request, response) {
    //alert("success");
    $.ajax({
        //url: "http://itunes.apple.com/search?term=jack+johnson&entity=musicTrack",
        url: "Example REST URL",
        dataType: "jsonp",
        data: {
            featureClass: "P",
            style: "full",
            maxRows: 12,
            name_startsWith: request.term
        },

        success: function (data) {
            response($.map(data.results, function (item) {
                itunesJson = item;
                return {
                    label: "<li><img src='" + item.artworkUrl30 + "' alt='no photo'/>" + item.trackName + "</li>",
                }
            }));
        },
    });
}
})
/*
        .data( "autocomplete" )._renderItem = function( ul, item ) {
        return $( "<li></li>" )
            .data( "item.autocomplete", item )
            .append("<img src='"+item.value+"' alt='no photo'/>"+ item.label)
            .appendTo( ul );
    };
        */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T22:04:11.133

try placing anchor tags around your image in the return html eg. ...

```
.data( "autocomplete" )._renderItem = function( ul, item ) {
return $( "<li></li>" )
         .data( "item.autocomplete", item )
         .append("<a><img src='"+item.value+"' alt='no photo'/></a>"+ item.label)
         .appendTo( ul ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T10:22:25.810

尝试在这里阅读：http: [//www.devbridge.com/projects/autocomplete/jquery/](http://www.devbridge.com/projects/autocomplete/jquery/)。这是我需要自动完成时使用的。它真的很容易配置。如果它不符合您的需求，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T12:31:46.443

一种简单的解决方法是在成功调用标签后[使用 JavaScript进行](https://stackoverflow.com/a/1219983/17447)[HTML 编码`list`](https://stackoverflow.com/a/1219983/17447)

```
var elm = $("#list");
elm.html(elm.text()); 
```

工作小提琴：http: [//jsfiddle.net/naveen/yRwH7/](http://jsfiddle.net/naveen/yRwH7/)

# ruby - 动态方法命名

> ID：10358909
> 
> 赞同：2
> 
> 时间：2012-04-27T22:54:25.187
> 
> 标签：ruby

我希望能够动态命名方法（我不会让用户输入来做到这一点，但作为一个例子）：

```
puts ""
foo = gets
def (whatever the user inputted for foo)
end 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T23:27:13.813

您可以使用`send`向类发送消息的方法来执行此操作，使用参数`:define_method`告诉它您将为该类定义一个新方法。

例如，上课`Car`

```
class Car
end

c = Car.new 
```

调用`c.sound`导致错误

```
NoMethodError: undefined method `sound' for #<Car:0x29d9048> 
```

但是在定义方法的名称并将其发送到类之后：

```
input = "sound"

Car.send(:define_method, input) do
  puts "vroom!"
end 
```

现在的调用`c.sound`带来了输出

```
vroom! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T00:03:54.073

最常用的方法是`define_method`：`class_eval`和`instance_eval`。定义`method_missing`方法也用的很多。

```
#An example of class_eval
class Foo
end

foo = gets.chomp
#suppose you input bar here
Foo.class_eval %Q{
  def #{foo}
    puts "This is #{foo} method you defined!"
  end
}
Foo.new.bar
#output: This is the bar method you defined! 
```

`instance_eval`以类似的方式使用，但在类的实例上定义。 `define_method`也类似：

```
#An example of define_method
klass = Class.new
foo = gets.chomp
#suppose you typed bar
klass.send(:define_method,foo) do
  puts "This is #{foo} method you defined!"
end
klass.new.bar
#output: This is bar method you defined! 
```

搜索“Ruby Metaprogramming”，那里有很多教程。

# c# - 这个 SQL 需要采用什么格式才能让 Oracle 接受？

> ID：10358911
> 
> 赞同：1
> 
> 时间：2012-04-27T22:54:56.077
> 
> 标签：c#, sql, winforms, oracle, quotes

我依次尝试了以下所有方法：

1) // 就像在遗留代码中一样

```
ocmd.CommandText = "SELECT TRUNC(SYSDATE,''DD'') "VALUE" FROM DUAL"; 
```

2) // 添加@

```
ocmd.CommandText = @"SELECT TRUNC(SYSDATE,''DD'') "VALUE" FROM DUAL"; 
```

3) // 尝试单引号

```
ocmd.CommandText = "SELECT TRUNC(SYSDATE,''DD'') 'VALUE' FROM DUAL"; 
```

4) // 尝试两个单引号，例如 DD

```
ocmd.CommandText = "SELECT TRUNC(SYSDATE,''DD'') ''VALUE'' FROM DUAL"; 
```

5) // 试试@

```
ocmd.CommandText = @"SELECT TRUNC(SYSDATE,''DD'') ''VALUE'' FROM DUAL"; 
```

1和2给了我编译时错误：“；预期”（在“价值”上）

3、4 和 5 给了我，“Message=ORA-00907：缺少右括号”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T22:58:24.273

以下查询将在 Oracle 中工作：[（sqlfiddle）](http://sqlfiddle.com/#!4/d41d8/371)

```
SELECT TRUNC(SYSDATE, 'DD') "VALUE" FROM DUAL 
```

但是，要在 C# 中的常规字符串文字中写入双引号，您需要使用反斜杠对其进行转义：

```
ocmd.CommandText = "SELECT TRUNC(SYSDATE, 'DD') \"VALUE\" FROM DUAL"; 
```

如果出于某种原因您宁愿使用逐字字符串文字，那么您需要用另一个双引号转义一个双引号：

```
ocmd.CommandText = @"SELECT TRUNC(SYSDATE, 'DD') ""VALUE"" FROM DUAL"; 
```

[注意：正如 Vash 在评论中指出的那样，`VALUE`Oracle 正确解析查询实际上并不需要双引号。]

# objective-c - Objective-C中的多个代表

> ID：10358917
> 
> 赞同：4
> 
> 时间：2012-04-27T22:55:35.907
> 
> 标签：objective-c, xcode, delegates, protocols

我一直在努力将我的一个应用程序从“shared appdelegate”进程中移开，尽管它的使用量很大，但似乎不受欢迎。我一直在尝试为我想做的事情设置协议方法，但运气为零。我的问题是，您甚至可以说一个视图控制器将委托请求发送到多个类吗？从即时通讯发现它似乎并不像你可以。这没有任何意义，因为我认为这就是 mvc 的委托和协议的全部意义所在。现在澄清一下，我知道您可以让一个视图控制器充当多个其他视图控制器的代表。但这不是我要问的。举个简单的例子，假设你有苹果翻转实用程序模板。“完成”按钮只是调用 mainvc 的委托方法来解除它。

```
@interface NewClass : NSObject <TheOtherDelegate> 
```

它有一个委托方法......

```
- (void)doSomething
{
NSLog(@"The Delegate did something...");
} 
```

我们可以在 Flipsideviewcontroller 上有一个按钮，我们想调用该委托方法，但仍然保持“完成”按钮调用 mainviewcontroller 上的委托方法以解除它吗？

话虽这么说，我整理了一个快速项目，只是想看看它是否可行，但它不可行。我遇到了一个“答案”，说你必须先实例化你想成为代表的类......

```
NewClass *myDelegate = [NewClass alloc] init]
[fillInMethodHere setDelegate:myDelegate]; 
```

不知道为什么它得到了正确的答案检查，因为不用说它不起作用。有什么我想念的吗？我搜索了 ib 以查看某处是否有一些“代表”连接，但我找不到任何东西。

在旁注中，当我在我的工作项目中工作时，我阅读了关于删除`#import`和添加`@class`. 再次，这打破了各种各样的事情。奇怪的是，在这样做之前，我到目前为止的工作和建设都很好。当我删除新的`@class`并取消注释时`#import`。xcode 突然给了我一个错误“找不到协议减速...”但是，它在几秒钟前就起作用了。我将不得不删除协议代码并重新添加它才能再次工作。非常明星。

任何帮助，将不胜感激。iv 在文档、谷歌、堆栈等中读到的所有内容都说应该有效，而不是在实际项目中。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-28T03:42:46.110

“代表”不是什么花哨的对象。它只是一个名为 id 类型的综合属性`delegate`。如果你愿意，你可以拥有任意数量的属性，它们都符合相同的协议。然后，当您想发出回调时，您只需解决所有这些问题：

```
[self.mydelegateA doSomething];
[self.mydelegateB doSomething]; 
```

等等

您还可以拥有一个`NSMutableArray`可以添加对象的属性，然后使用`[self.myMutableArrayOfDelegates makeObjectsPerformSelector:@selector(doSomething)]`.

最后，总有一个路由`NSNotificationCenter`（不要与推送通知混淆）是一个提供对象间消息传递系统的类。许多对象可以注册任何其他对象可以发送的消息。

请参阅 Apple 的文档以获取更多信息。[点击这里。](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProtocols.html)

尽管这是 OS X 文档，但它仍然非常擅长直观地解释事物：[单击此处。](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaFundamentals/CommunicatingWithObjects/CommunicateWithObjects.html#//apple_ref/doc/uid/TP40002974-CH7-SW18)

这是一个简单更改委托属性名称的示例：[单击此处](http://jackl.s3.amazonaws.com/Multi-Delegate%20Test%20-%20rename.zip)

这是添加另一个协议和第二个委托的示例：[单击此处](http://jackl.s3.amazonaws.com/Multi-Delegate%20Test%20-%20multi%20protocol.zip)

最后，这是一个建立在前两个基础上的示例，并且有第三个委托也符合相同的协议：[单击此处](http://jackl.s3.amazonaws.com/Multi-Delegate%20Test%20-%20round%203.zip)

# c# - 使用 jQuery 1.7.1 /eval/seq/ 的 C# web 服务调用

> ID：10358918
> 
> 赞同：1
> 
> 时间：2012-04-27T22:55:38.953
> 
> 标签：c#, jquery, asp.net, web-services, eval

所以这就是问题所在。我有三个页面可以进行 Web 服务调用。我第一次登陆该页面并进行调用时它工作正常，但是如果我切换到第二个页面，它会尝试对错误的服务进行 Web 服务调用。这里有一些信息：

页数：

```
Page1.aspx - has Page1.js
Page2.aspx - has Page2.js 
```

.js 文件：

**Page1.js**

```
var filterCriteria = "";

function GetList() {
    $.ajax({
        type: "POST",
        url: "/webServices/Page1.asmx/Page1List",
        contentType: "application/json; charset=utf-8",
        data: "{'letter':'" + filterCriteria + "'}",
        dataType: "json",
        success: function (result) {
            DisplayList(result.d);
        }
    });
}

function GetSearchResults() {
    $.ajax({
        type: "POST",
        url: "/webServices/Page1.asmx/Page1FilteredList",
        contentType: "application/json; charset=utf-8",
        data: "{'searchCriteria':'" + $("#Search").val() + "'}",
        dataType: "json",
        success: function (result) {
            DisplayList(result.d);
        }
    });
}

function DisplayList(object) {
    var html = '';
    for (var i = 0; i < object.length; i++) {
     //format results and append
    }
    if (object.length == 0) {
        html += "<li class=\"filteredList\" style=\"padding: 10px;\">No Results Found</li>";
    }
    $("#Page1List").html(html);
} 
```

**Page2.js**

```
var filterCriteria = "";

function GetList() {
    $.ajax({
        type: "POST",
        url: "/webServices/Page2.asmx/Page2List",
        contentType: "application/json; charset=utf-8",
        data: "{'letter':'" + filterCriteria + "'}",
        dataType: "json",
        success: function (result) {
            DisplayList(result.d);
        }
    });
}

function GetSearchResults() {
    $.ajax({
        type: "POST",
        url: "/webServices/Page2.asmx/Page2FilteredList",
        contentType: "application/json; charset=utf-8",
        data: "{'searchCriteria':'" + $("#Search").val() + "'}",
        dataType: "json",
        success: function (result) {
            DisplayList(result.d);
        }
    });
}

function DisplayList(object) {
    var html = '';
    for (var i = 0; i < object.length; i++) {
     //format results and append    
    }
    if (object.length == 0) {
        html += "<li class=\"filteredList\" style=\"padding: 10px;\">No Results Found</li>";
    }
    $("#Page2List").html(html);
} 
```

所以两者都有相同的调用和相同的信息，唯一真正的区别是结果不同，它们对不同的 Web 服务进行 Web 服务调用，获得不同的数据。

现在每次我在我之间切换时都会得到一个新的 js 文件，它是

jQuery-1.7.1.min.js/eval/seq/1
jQuery-1.7.1.min.js/eval/seq/2
jQuery-1.7.1.min.js/eval/seq/3
jQuery-1.7.1 .min.js/eval/seq/4

取决于我来回切换多少次。有什么方法可以停止 eval，或者我的代码中有什么东西导致 jQuery 存储我正在使用的代码的 eval，我能做些什么来解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T00:14:17.410

所以问题是我正在从 jquery mobile 加载页面转换。发生的事情是 jquery mobile 将新页面数据附加到 DOM 而不是强制页面加载。这导致两个 javascript 文件同时加载，这意味着最后加载的 js 文件是主文件，并且因为两个 js 文件都调用同名的函数，所以会多次加载它们。

**解决**
方法移除 $.mobile.load() 事件并强制点击事件将路径名附加到 url

```
$("#GoPage1").on("click", function () { window.location = "/dir/Page1.aspx"; });
$("#GoPage2").on("click", function () { window.location = "/dir/Page2.aspx"; }); 
```

# objective-c - WebView 打开“_blank”链接

> ID：10358919
> 
> 赞同：1
> 
> 时间：2012-04-27T22:55:47.123
> 
> 标签：objective-c, xcode, cocoa, webview

我有一个从 Internet 加载内容的 WebView。如果我有一个使用“_blank”属性的链接，则不会发生任何事情。

到目前为止，我已经尝试设置我的 WebView 委托，但我无法让它注册，我什至无法取回 NSLog，所以我一定是用错了。代码如下：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    [tmpView setUIDelegate:self];
}

- (WebView *)webView:(WebView *)sender createWebViewWithRequest:(NSURLRequest *)request
{
    NSLog(@"HEY THERE");
    return sender;
} 
```

理想情况下，我想要的是，每当在 WebView 上单击链接时，该链接总是在该 WebView 中打开，没有其他地方。

这可能吗？

通过研究，我发现了其他方法，但不知道如何使用它们来获得我想要的结果：

```
webView:decidePolicyForNewWindowAction:request:newFrameName:decisionListener: 
```

我完全被难住了，所以我真的很感谢你的帮助。

提前谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T00:31:22.787

如果您不想打开新窗口而只想在当前`WebView`对象中打开请求，则只需在委托中执行此操作：

```
- (WebView *)webView:(WebView *)sender createWebViewWithRequest:(NSURLRequest *)request
{
    [[sender mainFrame] loadRequest:request];
    return sender;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T23:25:13.090

这篇博文提供了一个使用 JavaScript 基本上从链接中删除目标属性的解决方案。

[http://blog.mikeweller.com/2009/06/uiwebview-doesnt-open-targetblank-links.html](http://blog.mikeweller.com/2009/06/uiwebview-doesnt-open-targetblank-links.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T08:31:59.973

你可以打电话

```
(WebView *)webView:(WebView *)sender createWebViewWithRequest:(NSURLRequest *)request 
```

它确实奏效了。

你也可以实现

```
(void)webView:(WebView *)sender decidePolicyForNewWindowAction:(NSDictionary *)actionInformation request:(NSURLRequest *)request newFrameName:(NSString *)frameName decisionListener:(id<WebPolicyDecisionListener>)listener 
```

做你想做的事。

# string - 有没有比 BK 树更有效的模糊字符串搜索方法？

> ID：10358922
> 
> 赞同：1
> 
> 时间：2012-04-27T22:55:55.077
> 
> 标签：string, algorithm, fuzzy-search

对于算法类，我正在做一个研究任何特定算法的项目。我选择调查[BK Trees (Burkhard-Keller Trees)](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CCcQFjAA&url=http://en.wikipedia.org/wiki/BK-tree&ei=kCKbT4W1K8SG6QGYmsWUDw&usg=AFQjCNHOfhLHevquCoOKgctddM2Y2NZ9gQ&sig2=TuVA1qzqd0u8CI8PmNoACg)。BK 树与模糊字符串搜索（例如拼写检查、单词推荐）相关联。然而，BK Trees 的表现似乎并不那么快，甚至可能已经过时。那里没有很多好的学术资源。有没有更快、更有效的模糊字符串匹配算法？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T22:58:48.433

以下是一些常见的方法

*   [http://en.wikipedia.org/wiki/Metaphone](http://en.wikipedia.org/wiki/Metaphone)
*   [http://www.postgresql.org/docs/9.1/static/pgtrgm.html](http://www.postgresql.org/docs/9.1/static/pgtrgm.html)
*   [http://en.wikipedia.org/wiki/Levenshtein_distance](http://en.wikipedia.org/wiki/Levenshtein_distance)

# django - {% url %} 给我 NoReverseMatch 错误，而 reverse() 返回 url 就好了。为什么？

> ID：10358929
> 
> 赞同：8
> 
> 时间：2012-04-27T22:56:42.567
> 
> 标签：django, django-urls, django-registration, django-1.4

我不知道这个[SO 问题](https://stackoverflow.com/questions/5157976/django-url-templatetag-but-not-reverse-error-caught-noreversematch-while-r)是否与我将要描述的问题相同，但它确实具有相同的症状。不幸的是，在我写作时，它仍然没有解决。

所以这是我的问题。我正在尝试将 James Bennett 的[django-registration 应用程序](https://bitbucket.org/ubernostrum/django-registration)添加到我的 django 项目中。我已经完成了根据我的需要配置它 - 自定义模板和 url。就在我认为一切都很好的时候。`NoReverseMatch`在 django-registration 所需的自定义模板之一中使用（我`{% url 'testing' item_id=123 %}`也尝试使用视图名称，`myapp.views.test`但没有运气）时出现错误。有趣的是，我在 shell 中尝试过`reverse('testing', kwargs={'item_id':123})`，并且返回的 url 很好。我认为在后端`{% url %}`使用，但为什么我得到不同的结果？`reverse()`

**urls.py：（**我网站的 URLconf）

```
urlpatterns = patterns('myapp.views',
    url(r'^test/(?P<item_id>\d+)/$', 'test', name='testing'),
) 
```

**activation_email.txt ：（**上述模板。请注意，它是 django-registration 要求的故意在*.txt*扩展名中，这不应该是问题的原因。）

```
{% comment %}Used to generate the body of the activation email.{% endcomment %}
Welcome to {{ site }}! Please activate your account by clicking on the following link:

{% url 'testing' item_id=123 %}

Note the activation link/code will be expired in {{ expiration_days }} days. 
```

我不知道这是否重要，但只是想我应该提到**activation_email.txt**存储在*模板*目录中，`myapp`尽管它被`django-registration`.

另外，我正在使用 django 1.4

我有一种感觉，这个问题与 url 命名空间有关，这是一个我从来没有理解过的话题，但这只是一个幼稚的猜测。（IMO，django 文档很好地解释了有关 django 的所有内容，除了 url 命名空间）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-27T23:22:37.670

我在这里不是专家，但在我正在处理的 Django 项目中，我使用不带引号的 url 名称。我刚刚在我的一个模板中的类似行周围添加了引号，它产生了与您的错误相同的错误。

尝试：

```
{% url testing item_id=123 %} 
```

# http - Netty 中的同步 HTTP 调用

> ID：10358938
> 
> 赞同：2
> 
> 时间：2012-04-27T22:58:01.663
> 
> 标签：http, netty, event-driven

我的应用程序接收到一个 HTTP 请求，在管道的中间，调用另一个服务器以获取支持信息。在响应返回之前，初始 HTTP 请求无法继续通过管道。我不能`awaitUninterruptability()`从 I/O 线程中使用，那么进行这些调用的最佳方法是什么，这样我就不会阻止 Netty 的事件循环，而是将客户端的管道暂停，直到我的调用返回并告诉管道继续？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-28T18:32:17.217

瑞安这听起来不是一个好主意..

我认为你应该更好地使用类似的东西：

```
public class HttpHandler extends SimpleChannelUpstreamHandler{

    @Override
    public void messageReceived(final ChannelHandlerContext ctx, final MessageEvent e) throws Exception {
        otherChannel.write(yourRequet).addListener(new ChannelFutureListener() {

            public void operationComplete(ChannelFuture future) throws Exception {

                // once the write is done we can continue in the pipeline
                ctx.sendUpstream(e);
            }
        });

        // the event stops here to get processed

    }

} 
```

如果您需要等待响应，则需要在另一个 SimpleChannelUpstreamHandler 中处理它。但我想你明白了..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T11:34:34.757

我猜你需要一个[ExecutionHandler](http://netty.io/docs/stable/api/org/jboss/netty/handler/execution/ExecutionHandler.html)。

# c++ - 为什么我的程序一直循环？

> ID：10358939
> 
> 赞同：-4
> 
> 时间：2012-04-27T22:58:09.463
> 
> 标签：c++

我正在尝试按递增顺序对二维数组进行排序，并将它们存储在一维数组中（从低到高）。

```
16 22 99 4 18
-258 4 101 5 98
105 6 15 2 45
33 88 72 16 3 
```

但我所拥有的是不断循环，我不知道为什么

```
 int main()                  
 {                             
     const int SKIP=-999999;
     const int SIZE=20;
     const int ROWS=4;
     const int COLS=5;         
     int unsorted_array[ROWS][COLS]= {(16,22,99,41,18),
                                      (-258,4,101,5,98),
                                      (105,6,15,2,45),
                                      (33,88,72,16,3)};   
     int s_index=0;
     int min_value,rowMin,rowCol,row,col,colMin;
     int sorted[SIZE];

     cout <<"Array Sorted"<<endl
         <<"___________"<<endl<<endl;

 while (s_index < SIZE)
 {
     rowMin=0;
     rowCol=0;
     min_value = unsorted_array[0][0];
     row=0;
     while (row < ROWS)
     {
         col=0;
         while (col < COLS)
         {
             if (unsorted_array[row][col] < min_value)
             {
                 min_value = unsorted_array[row][col];
                 rowMin = row;
                 colMin = col;
             } 
             ;
             col = col + 1;
         }
         row = row + 1;  
     }
     sorted[s_index] = min_value; 

     while (sorted[s_index] >= 0)
     {
         cout<<" "<<sorted[s_index];
     }
     unsorted_array[rowMin][colMin]=SKIP; 
     s_index=s_index+1; 
}
cout<<endl; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T23:00:50.507

如果`sorted[s_index] >= 0`一次为真，这将是一个无限循环：

```
 while (sorted[s_index]>=0)
 {
     cout<<" "<<sorted[s_index];
 } 
```

s_index 在该循环中永远不会改变。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T23:01:22.943

这是一个问题。while 条件在循环内永远不会改变，因此如果谓词为真，循环将永远不会终止

```
while (sorted[s_index]>=0){
  cout<<" "<<sorted[s_index];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T23:01:11.817

如果谓词为真，这是一个明显的无限循环：

```
while (sorted[s_index]>=0)
   {
     cout<<" "<<sorted[s_index];

   } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T23:12:33.493

正如其他人已经指出的那样，您的 cout 循环是无止境的。更好的使用：

```
 for (int i=0; i < SIZE ;i++){
         cout<<" "<<sorted[i];
     }
     cout << endl; 
```

# opengl - 提高 OpenGL 的性能

> ID：10358941
> 
> 赞同：1
> 
> 时间：2012-04-27T22:58:14.453
> 
> 标签：opengl, jogl

我有一个关于挑选的问题。我找到了一种非常巧妙的选择方法，方法是在关闭灯光的情况下渲染单个显示调用，并且每个对象的所有内容和唯一颜色，然后简单地找到鼠标指针下的颜色像素。它工作正常，据我了解，过去其他人也使用它来拾取物体。我认为以这种方式渲染单个帧不会很明显，但是很明显。我不得不说我正在使用 JOGL 绑定。

所以我想知道在这种情况下哪些因素会影响性能？我在 Apples dev guide 上阅读了不要使用 glBegin 和 glEnd 而是使用缓冲区。那正确吗？我是否认为可以在没有人注意到闪烁的情况下渲染单个帧？

# java - While 循环绘制菱形

> ID：10358942
> 
> 赞同：0
> 
> 时间：2012-04-27T22:58:22.677
> 
> 标签：java, while-loop

我在使用 while 循环时遇到了一些问题。我的任务是打印带有 2 个输入变量的菱形：1）整数表示中间的行数/最大字符数 2）要打印的字符：伪代码：7 = int $ = char 程序应该打印（并考虑左侧的空格）： http: [//pastebin.com/cspgz3bA](http://pastebin.com/cspgz3bA)

我的 while 循环看起来很乱。现在他们正在打印（* 模拟空格）： http: [//pastebin.com/cspgz3bA](http://pastebin.com/cspgz3bA)

我发现将钻石分成两个三角形（上下）是解决这个问题的最简单方法，但是我的代码似乎完全是垃圾......

编辑:: 这仅适用于三角形的上半部分，因此 (rows/2)+1 - 它意味着在完成中间行后停止。

```
 rows = integerInput;
    maxSpace = integerInput;

    while (currentRow <=((rows/2)+1)) {
        spaceReq = ((maxSpace -1)/2);    // determines spaces required
            while (spaces < spaceReq) {  

                System.out.print("*");
                spaces++;
            }
            while (charPrinted < charReq){
                System.out.print(charInput);
                charPrinted++;

            }               
            currentRow++;
            maxSpace--;
            charReq = charReq +2;
            System.out.println("");
        } 
```

有人可以指出为什么这适用于第一次迭代，但在下一次迭代中中断？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T23:07:54.543

`charPrinted`并且`spaces`需要重置到`0`外循环的顶部。

# javascript - 使背景颜色等于数组值，但每组 3 具有相同的值

> ID：10358948
> 
> 赞同：0
> 
> 时间：2012-04-27T22:59:00.880
> 
> 标签：javascript, jquery, html, html-table, conditional

我有

```
for (var i = 0; itr < $("td").length; i++) {
    $("td").eq(i).css("background-color", Colors[i]);
} 
```

哪个有效，但它为每个人着色一个新颜色，并且该行是 3 列，所以我需要每`<td>`行 (3) 中的每个都具有相同的颜色。我无法为表格行本身着色，因此我需要通过修改上面的代码来解决。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T23:10:33.810

你是这个意思吗？

```
var Colors = ["red", "black", "purple", "blue", "gray", "green"];
for (var i = 0; i < $("tr").length; i++) {
    $("tr:eq(" + i + ")").children().css("background-color", Colors[i]);
} ​ 
```

这里的例子：http: [//jsfiddle.net/WhnSw/](http://jsfiddle.net/WhnSw/)

但是为什么你不能给行着色呢？这也很容易：

```
for (var i = 0; i < $("tr").length; i++) {
    $("tr:eq(" + i + ")").css("background-color", Colors[i]);
} ​ 
```

# ruby-on-rails-3 - 您如何使用设计清除 Rails 3 应用程序中的 twitter 会话

> ID：10358950
> 
> 赞同：0
> 
> 时间：2012-04-27T22:59:10.100
> 
> 标签：ruby-on-rails-3, twitter, devise, omniauth, logout

我在 rails 3 应用程序中使用设计、omniauth、omniauth-twitter 和 twitter gem。我想这样做，所以当用户注销时，它也会删除 twitter gem 配置。当我说“twitter gem 配置”时，我指的是：

```
Twitter.configure do |config|
  config.consumer_key = YOUR_CONSUMER_KEY
  config.consumer_secret = YOUR_CONSUMER_SECRET
  config.oauth_token = YOUR_OAUTH_TOKEN
  config.oauth_token_secret = YOUR_OAUTH_TOKEN_SECRET
end 
```

如果我不这样做并且另一个用户从同一台计算机登录到应用程序但没有用户帐户，他们将看到前一个用户的 Twitter 信息。我相信我可以通过调用来删除配置

```
Twitter.reset 
```

我想我的问题是放在哪里最好？此外，如果这不是删除用户 twitter 配置的最佳方式，我应该怎么做？

谢谢，如果您需要更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T15:49:31.110

您可以将配置拆分为特定于应用程序的（将是全局的）和特定于客户端的设置。[这个 twitter gem wiki 页面](https://github.com/jnunemaker/twitter/wiki/Configuration)很好地描述了这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T19:10:52.127

这似乎奏效了。

在`/app/controllers/application_controller.rb`您可以重定向默认路由设计在用户登录/退出时发送用户。我不确定这是否是放置这个的“适当”地方，但它似乎是合理的。

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  def after_sign_in_path_for(resource_or_scope)
    if current_user.authentications.find_by_provider("twitter")
      ckey= YOUR_APPS_CONSUMER_KEY
      csecret= YOUR_APPS_CONSUMER_SECRET
      auth = current_user.authentications.find_by_provider("twitter")
      atoken = auth.token
      asecret = auth.secret
      Twitter.configure do |config|
        config.consumer_key = ckey
        config.consumer_secret = csecret
        config.oauth_token = atoken
        config.oauth_token_secret = asecret
      end
    end

    authentications_path
  end

  def after_sign_out_path_for(resource_or_scope)
      Twitter.reset
      authentications_path
  end

end 
```

这`authentications_path`只是我用来测试身份验证和相关内容的页面。您可以在任何地方重定向。当用户链接一个帐户时，我将他们的 oauth 令牌和秘密保存在身份验证对象中。您将需要它来访问 Twitter gem 的某些方面。

我会稍等片刻将此标记为答案，看看是否有人有更好的解决方案。

# jquery - $.ajax 在 WP7 中不起作用（Phonegap-Cordova-1.6.0）

> ID：10358953
> 
> 赞同：0
> 
> 时间：2012-04-27T22:59:24.980
> 
> 标签：jquery, windows-phone-7, mobile, cordova

我来自俄罗斯，抱歉我的英语不好。

在 Windows Phone 7 中不起作用 $.ajax: dataType(json, jsonp)。

**Zepto.js** - 没有帮助。

谁遇到了问题？请帮忙。

**更新 01.05.12：**

```
<link rel="stylesheet" charset="utf-8" href="./css/core.css" />
<script type="text/javascript" charset="utf-8" src="jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/jquery.mobile.js"></script>
<script type="text/javascript" charset="utf-8" src="cordova-1.6.0.js"></script>
<script type="text/javascript">

  document.addEventListener("deviceready", onDeviceReady, false);

  function onDeviceReady()
  {
      //$.support.cors = true;
      //$.mobile.allowCrossDomainPages = true; 

      $.ajax({
         url : 'book.json',
         dataType: 'json',
         success: function(data) { navigator.notification.alert('json success yeah'); }
      });
  }

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:55:52.093

您丢失了类型：在 ajax 的定义中。

例子：

```
$.ajax({
        type: "POST",
        url: "http://10.0.2.2/mobileajax/callajax.php",
        data: ({name: theName}),
        cache: false,
        dataType: "text",
        success: onSuccess
}); 
```

# templates - 我可以为从 application.cfc 插入的 Coldfusion 模板指定一个“目标”吗

> ID：10358954
> 
> 赞同：0
> 
> 时间：2012-04-27T22:59:38.340
> 
> 标签：templates, login, coldfusion, coldfusion-8, application.cfc

只是想知道（Coldfusion新手）。我在这个[页面上](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=appSecurity_15.html)，展示了如何在 Coldfusion 中设置用户登录/注销的示例。

简单的问题：

如果用户没有登录，application.cfc 会插入一个登录表单。

**问题：**
有没有办法设置这个登录表单结束的*目标？*一些目标/选择器/任何东西让它出现在它应该出现的地方？

感谢您的信息！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T01:13:04.340

设置代码的方式与将其指向的位置无关紧要，因为 cflogin 标记将始终捕获请求并对其进行处理。在伪代码...

```
if not logged-in (cflogin)
    if not submitting form
        show login form
    else
        process login form 
```

# sql-server - 在持续部署中设置 DacUpgradeOptions.IgnoreDataLoss 标志的最佳实践？

> ID：10358961
> 
> 赞同：2
> 
> 时间：2012-04-27T23:00:14.813
> 
> 标签：sql-server, database, deployment, azure-sql-database, data-tier-applications

`DacUpgradeOptions.IgnoreDataLoss`在自动数据层应用程序 (DACPAC) 升级中设置属性的最佳做法是什么？

根据 MSDN 文档（[链接](http://msdn.microsoft.com/en-us/library/ee634742.aspx)），如果`IgnoreDataLoss`为**True**，即使某些操作导致数据丢失，升级也会继续进行。如果为**False**，这些操作将终止升级。例如，如果当前数据库中的表不存在于新 DAC 的架构中，则如果指定 True，则该表将被删除。默认值为**True**。

但是，在持续交付的环境中，每次数据库更改都会自动部署到管道（CI -> Test -> UI-Test）并最终部署到生产环境中，似乎将安全措施设置`IgnoreDataLoss`为**False**，因为我们不希望生产数据库上发生数据丢失/漂移。如果`IgnoreDataLoss`为**False**并且开发人员提交了导致数据丢失的数据库更改，则 CI/Test 构建将失败，从而使我们能够在此更改到达生产之前捕获它。

但是这种方法存在一个问题，因为*有时*数据丢失是故意的。例如，我们可能需要删除不再使用的特定表。如果`IgnoreDataLoss`是**False**，这将导致构建失败并且永远不会应用 DACPAC 更改，因为检测到潜在的数据丢失（即使这种丢失是故意的）。在这种情况下，我们希望`IgnoreDataLoss`是**True**。

只是想知道什么是最佳实践，尤其是在我们持续自动部署的环境中。任何建议将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T05:12:23.650

在大多数情况下，我们可以将 IgnoreDataLoss 设置为 false。这有助于确保我们不会意外修改数据库并引入数据丢失。当我们要删除表时，我们可以手动删除表（请不要使用 DACPAC）。或者我们可以针对特定的升级操作临时将 IgnoreDataLoss 设置为 true。

最好的祝福，

明旭。

# php - Doctrine 和 Symfony2 无法合并新实体 EntityManager#merge()

> ID：10358962
> 
> 赞同：1
> 
> 时间：2012-04-27T23:00:16.753
> 
> 标签：php, symfony, merge, doctrine-orm, entitymanager

我正在反序列化来自 XML 提要的实体。实体已经有一个 ID（从 XML 读取）。

我正在尝试在持久化和刷新实体之前合并实体（将其保存到数据库中）。我需要合并实体，因为它可能已经存在于数据库中，如果是这样，我需要它更新而不是验证失败。

这是我的代码：

```
<?php

// build the MgLeague from xml
$league = $this->serializer->deserialize(
    $xml, 
    'Acme\Website\Entity\MgLeague',
    'xml'
);

if ($league)
{
    // merge the league
    $league = $this->em->merge($league);

    // validate
    if (0 === count($this->validator->validate($league)))
    {
        $this->em->persist($league);
        $this->em->flush();
    }
} 
```

这是我收到的错误：

```
PHP Fatal error:  Call to undefined method Doctrine\ORM\UnitOfWork::newInstance() in /Website/vendor/doctrine/lib/Doctrine/ORM/UnitOfWork.php on line 1457
PHP Stack trace:
PHP   1\. {main}() /Website/app/console:0
PHP   2\. Symfony\Component\Console\Application->run() /Website/app/console:22
PHP   3\. Symfony\Bundle\FrameworkBundle\Console\Application->doRun() /Website/vendor/symfony/src/Symfony/Component/Console/Application.php:118
PHP   4\. Symfony\Component\Console\Application->doRun() /Website/vendor/symfony/src/Symfony/Bundle/FrameworkBundle/Console/Application.php:75
PHP   5\. Symfony\Component\Console\Command\Command->run() /Website/vendor/symfony/src/Symfony/Component/Console/Application.php:194
PHP   6\. Mahango\WebServiceBundle\Command\InsertLeaguesCommand->execute() /Website/vendor/symfony/src/Symfony/Component/Console/Command/Command.php:224
PHP   7\. Doctrine\ORM\EntityManager->merge() /Website/src/Mahango/WebServiceBundle/Command/InsertLeaguesCommand.php:131
PHP   8\. Doctrine\ORM\UnitOfWork->merge() /Website/vendor/doctrine/lib/Doctrine/ORM/EntityManager.php:531
PHP   9\. Doctrine\ORM\UnitOfWork->doMerge() /Website/vendor/doctrine/lib/Doctrine/ORM/UnitOfWork.php:1378

Fatal error: Call to undefined method Doctrine\ORM\UnitOfWork::newInstance() in /Website/vendor/doctrine/lib/Doctrine/ORM/UnitOfWork.php on line 1457

Call Stack:
    0.0003     632280   1\. {main}() /Website/app/console:0
    0.0133    2936544   2\. Symfony\Component\Console\Application->run() /Website/app/console:22
    0.0151    3192136   3\. Symfony\Bundle\FrameworkBundle\Console\Application->doRun() /Website/vendor/symfony/src/Symfony/Component/Console/Application.php:118
    0.0538    7941912   4\. Symfony\Component\Console\Application->doRun() /Website/vendor/symfony/src/Symfony/Bundle/FrameworkBundle/Console/Application.php:75
    0.0552    7941912   5\. Symfony\Component\Console\Command\Command->run() /Website/vendor/symfony/src/Symfony/Component/Console/Application.php:194
    0.0816   13131288   6\. Mahango\WebServiceBundle\Command\InsertLeaguesCommand->execute() /Website/vendor/symfony/src/Symfony/Component/Console/Command/Command.php:224
    0.4149   13519208   7\. Doctrine\ORM\EntityManager->merge() /Website/src/Mahango/WebServiceBundle/Command/InsertLeaguesCommand.php:131
    0.4149   13519208   8\. Doctrine\ORM\UnitOfWork->merge() /Website/vendor/doctrine/lib/Doctrine/ORM/EntityManager.php:531
    0.4149   13519424   9\. Doctrine\ORM\UnitOfWork->doMerge() /Website/vendor/doctrine/lib/Doctrine/ORM/UnitOfWork.php:1378 
```

在我看来，它就像一个教义错误。

我正在使用 Symfony2（2.0.12 版）和 Doctrine（2.1.6 版）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T19:24:02.383

是的，这是一个教义错误。这是错误报告：

[http://www.doctrine-project.org/jira/browse/DDC-1638](http://www.doctrine-project.org/jira/browse/DDC-1638)

..这是修复：

[https://github.com/doctrine/doctrine2/commit/affa6feb8aa207bf74406a4dd20adad6978f0f1e#diff-0](https://github.com/doctrine/doctrine2/commit/affa6feb8aa207bf74406a4dd20adad6978f0f1e#diff-0)

# c++ - 使用 OpenCV 随机森林，有没有办法获得分类的“置信度”级别？

> ID：10358964
> 
> 赞同：7
> 
> 时间：2012-04-27T23:00:41.953
> 
> 标签：c++, opencv

如果我有一个训练有素的随机森林，有什么方法可以让我获得每个班级在测试样本上的森林获得的票数？一定比例的选票会更好。

类似于 CVRTrees::predict 的东西，但会得到原始输出以及预测的类。

谢谢

**编辑**进一步解释我的目标，以便我可能得到一个解决我的问题的答案，而不一定是我的问题。

要回答我知道多少，它很少。

这是一个真实世界的应用程序，我正在努力让自己尽快了解所有这些。

本质上，我研究判别分类器，要求我需要能够比较 2 个（或更多）独立分类器之间的输出。我的意思是独立的意思是他们可能知道也可能不知道整个类集，但是确实存在一组类，其中所有分类器都包含此类类的子集。

我最初的想法是从每个分类器中收集有关分类的元信息，理想情况下将包含某种形式（其中 15% 是 A，78% 的机会是 B）[我知道机会是坏话，但我会离开它]。如果我能得到该输出，我将能够根据分配给每个分类器的动态性能权重执行最终分类。

这个想法是我可以使用一个非常简单的基于规则的分类器来进行初始分类，而更奇特的分类器有时间训练。理想情况下，学习分类器可能支持比规则分类器更多的类，并且随着时间的推移，它主要被使用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-23T01:35:31.340

我正在处理同样的问题，我想在这里分享我的解决方案。我从 CvRTrees 派生了一个类，并添加了一个具有所需行为的函数。我使用现有的 predict() 函数作为我的起点。这是我的代码：

```
class CvRTreesMultiClass : public CvRTrees
{
    public:
    int predict_multi_class( const CvMat* sample, 
                             cv::AutoBuffer<int>& out_votes, 
                             const CvMat* missing = 0) const;
}; 
```

和：

```
int CvRTreesMultiClass::predict_multi_class( const CvMat* sample, 
                                             cv::AutoBuffer<int>& out_votes, 
                                             const CvMat* missing ) const
{
int result = 0;
int k;

if( nclasses > 0 ) //classification
{
    int max_nvotes = 0;
    int* votes = out_votes;
    memset( votes, 0, sizeof(*votes)*nclasses );
    for( k = 0; k < ntrees; k++ )
    {
        CvDTreeNode* predicted_node = trees[k]->predict( sample, missing );
        int nvotes;
        int class_idx = predicted_node->class_idx;
        CV_Assert( 0 <= class_idx && class_idx < nclasses );

        nvotes = ++votes[class_idx];

    }

    result = ntrees;
}
else // regression
{
    throw std::runtime_error(__FUNCTION__ "can only be used classification");
}

return result;
} 
```

调用此函数后，我只需根据每个班级收到的投票数计算概率（prob = out_votes[class_index] / result）。我认为这就是 OP 正在寻找的（至少我是）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T13:50:29.920

你在做二进制分类吗？如果是，您可以使用[**CvRTrees::predict_prob()**](http://opencv.itseez.com/modules/ml/doc/random_trees.html#cvrtrees-predict-prob)。这应该返回一个介于 0 到 1 之间的值，这是决定给定点属于第二类的树的比例。

如果你有两个以上的类，那么将给定点分类到特定类的树的比例并不是一个很好的置信度指标。更好的方法是使用[**CvRTrees::get_proximity()**](http://opencv.itseez.com/modules/ml/doc/random_trees.html#cvrtrees-get-proximity)。它的使用方式取决于您的应用程序。假设每个班级都有一个点，很有可能属于他们的班级。然后，您首先对给定点进行分类。为了检查分类的质量，您可以使用 get_proximity 来测量对给定点和高概率属于该类的点投票的树的比例。

## 警告

你的问题真的很有限，目前还不清楚你对衡量判别分类器的置信度了解多少。但是，如果您正在从事一个真实且严肃的项目，那么还有更多内容。如果它只是一个家庭作业或练习，那么也许就足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T14:25:13.233

对于某些分类器，可以直接计算特征向量 x 的分类的置信度：对于线性和二次判别分类器（参见 McLachlan “判别分析和统计模式识别”，Wiley，第 11 章，第 378 页），公式为衍生的。它们相当复杂，但请务必对您的问题给出正确答案。

# mysql - 如何在 1 个查询中使用自定义 SQL 将 JOIN 表中的列水合到 Propel 对象集合中？

> ID：10358967
> 
> 赞同：0
> 
> 时间：2012-04-27T23:00:55.353
> 
> 标签：mysql, symfony, propel

我将 Symfony 2 与 propelorm/PropelBundle（Propel 1.6）和 MySQL（带有声明的外键的 InnoDB）一起使用，并且我正在使用自定义 SQL，如[使用自定义 SQL](http://www.propelorm.org/documentation/03-basic-crud.html)水合推进对象集合部分所示，如下所示：

```
$con = Propel::getConnection(VerbNounPeer::DATABASE_NAME);
$sql = "SELECT verb_noun.*, verb.* FROM verb_noun"
        ." JOIN verb ON verb_noun.verb_id = verb.id";
$stmt = $con->prepare($sql);
$stmt->execute();

$formatter = new PropelObjectFormatter();
$formatter->setClass('Company\SiteBundle\Model\VerbNoun');
$verb_nouns = $formatter->format($stmt); 
```

注意：这不是实际的查询——我放了一个简单的例子来说明需求。我的实际查询更复杂，因此需要使用“自定义 SQL”而不是推进方法。

我无法一次性将连接表的列水合到推进对象集合中。连接表的列（“动词”）仅在需要时通过对数据库的其他查询加载到视图中（我相信这称为延迟加载，我不想要）。有没有办法在上述初始查询中将推进对象集合（$verb_nouns）与连接表（'verb'）的列混合，以消除以后对数据库的大量查询？

实际上，使用上面的代码和下面的代码（在 Twig 的视图文件中）会为 foreach 语句中的每个循环生成一个数据库连接：

```
{% for verb_noun in verb_nouns %}
    <li>{{ verb_noun.NounId }}.&nbsp;{{ verb_noun.verb.Name }}</li>
{% endfor %} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T08:35:47.920

如果我正确理解您的问题，您无需手动补水或自定义查询。只需使用其中一种连接方法，例如：`VerbNounQuery::create()->joinVerb()->find()`这将返回一组 VerbNouns，其中已经填充了它们的名词 - 所有这些都在一个查询中到 db。

顺便说一句，我强烈推荐一个自动完成的 IDE——它将帮助您更轻松地探索查询系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-04T07:59:57.780

因为我今天也遇到了这个问题，所以我想在这里发布解决方案。使用`setClass`or`setPeer`我得到了`constant(): Couldn't find constant XXX::PEER'`-notice。所以看来你必须将 a 传递`Criteria`给`ObjectFormatter`这个才能工作：

```
$con = Propel::getConnection(VerbNounPeer::DATABASE_NAME);
$sql = "SELECT verb_noun.*, verb.* FROM verb_noun"
        ." JOIN verb ON verb_noun.verb_id = verb.id";
$stmt = $con->prepare($sql);
$stmt->execute();

$formatter = new PropelObjectFormatter(new VerbNounQuery());
$verb_nouns = $formatter->format($stmt); 
```

# php - 如何使用 symfony 安装项目

> ID：10358975
> 
> 赞同：2
> 
> 时间：2012-04-27T23:01:29.280
> 
> 标签：php, apache, symfony

我正在尝试在我的本地机器上安装以下使用 symfony2的项目[连接。](https://github.com/dsyph3r/connect)我确实执行了以下命令：

```
cd myWebDirectory
git clone git://github.com/dsyph3r/connect
git submodule update --init 
```

当我尝试从本地主机调用以下页面时，出现以下错误：

```
http://localhost/~myName/connect/web/app_dev.php
Server error 
```

如果我查看 apache 的日志文件，我会阅读：

```
PHP Fatal error:  require_once(): 
Failed opening require
'/Users/myName/Sites/connect/app/../vendor/symfony/src/Symfony/Component/Locale/Resources/stubs/functions.php' 
```

我应该如何安装供应商？
我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T23:16:14.523

您忘记安装供应商（“第三方”）库。

```
php bin/vendor install 
```

更新：这是不久前，因为我写了这个并且它不再有效（对于新（er）项目）。从 2.1 开始，它使用[Composer](http://getcomposer.org/)

```
php composer.phar install 
```

# asp.net - 在 Visual Studio 2010 中，如何在“发布模式”下重建我的网站？我找不到“发布模式”

> ID：10358976
> 
> 赞同：1
> 
> 时间：2012-04-27T23:01:32.050
> 
> 标签：asp.net, visual-studio, visual-studio-2010, release-mode

我收到了这个错误，vb / .net4，虽然网站运行良好，但在页面底部：

**YAF 在调试模式下编译。在 RELEASE MODE 中重新编译以删除此信息：**

我打开 Visual Studio 2010 右键单击​​我的解决方案，在“构建”选项卡下查看，但我找不到任何关于发布模式的信息。有人可以告诉我在哪里可以找到它并以发布模式构建我的网站吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T23:27:47.607

我在使用 VS 2010 和 VS 2011 beta 时遇到了同样的问题。我怀疑第三方工具或插件可能是罪魁祸首，我正在对此进行调查。

现在，只需将 Web.Config 中的编译开关更改为 false：

```
<system.web>
    <compilation debug="false">
</system.web> 
```

**更新 1：**

我通过卸载 Telerik JustTrace 修复了我的 VS 2010 问题。不过，我仍然遇到与 VS 2011 beta 相同的问题（在与 VS 2010 不同的 VM 上）。因此，我尝试使用 Web 应用程序项目而不是网站项目，问题就消失了。

**更新 2：**

这对于网站项目来说是正常的，因为每个页面都是动态编译的：

[为什么不能在发布模式下建立网站？](https://stackoverflow.com/questions/546920/why-cant-you-build-a-website-in-release-mode)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T23:06:14.957

确保您有可见的“标准”工具栏，您应该看到如下内容：

![快照](../Images/28ee1ae048d7d6800aaf24bea633b5c2.png)

将“调试”更改为“发布”并重建您的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T23:10:44.970

我在我的工具栏中有它。

![图像1](../Images/431940d9e014c78d9205f2b74f2a18e4.png)

但您也可以使用菜单更改它`Build => Configuration Manager`。从项目旁边的配置下拉列表中选择*发布。*

# ruby-on-rails - 为什么要安装发动机？

> ID：10358980
> 
> 赞同：2
> 
> 时间：2012-04-27T23:01:45.630
> 
> 标签：ruby-on-rails

我一直在阅读有关[rails 引擎](http://edgeapi.rubyonrails.org/classes/Rails/Engine.html)的信息。有些博客提到您需要安装引擎，有些则说不需要。

我检查了一些引擎，他们在自述文件中没有安装该引擎的任何说明。

那么为什么需要安装。我知道如果我有一个 sinatra 应用程序，那么它需要安装。但是，如果我有一个新的 gem，它只为您提供 url`/happy`并显示“周一快乐”。为此，如果我创建一个引擎，我需要安装它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T17:17:35.913

据我所知，如果需要有通往它的路线，你可以安装一个引擎。如果引擎不公开控制器操作，则不需要安装。这方面的一个例子是一个引擎，它负责实现在多个表单上提交公共表单元素。父表单（和操作等）负责实际路线等，因此不需要安装。但是，如果引擎添加了一个需要提交的完整表单，您可能需要放置一个带有操作的控制器来在引擎中处理该表单。然后您需要安装引擎，以便将这些控制器操作公开给 HTTP。也许还有其他安装引擎的原因——如果是这样，希望有人能填补我们的空缺。

请注意，如果您运行`rails engine new -h`它，它有一个`--mountable`对应于`Generate mountable isolated application`.

# java - 如何通过数据报套接字发送对象

> ID：10358981
> 
> 赞同：3
> 
> 时间：2012-04-27T23:01:51.997
> 
> 标签：java, android, sockets, datagram

我正在处理一些Android项目并试图通过数据报套接字将对象传递给另一个设备对象包含类的“字符串”数据成员（用户名，服务）..我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T23:13:57.270

在发送端的 ByteArrayOutputStream 之上分层 ObjectOutputStream。从 ByteArrayOutputStream 中收集字节（在写入之后），并将其发送到您的数据报包中。在接收端执行相反的操作，将数据解包回一个对象。

发送方的伪代码：

```
final ByteArrayOutputStream baos = new ByteArrayOutputStream(6400);
final ObjectOutputStream oos = new ObjectOutputStream(baos);
oos.writeObject(o);
final byte[] data = baos.toByteArray();

final DatagramPacket packet = new DatagramPacket(data, data.length);
// Send the packet 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-03T11:59:47.507

[通过数据报包进行对象传输](http://www.javaworld.com/article/2077539/learn-java/java-tip-40--object-transport-via-datagram-packets.html)

## 您不能通过网络将对象作为对象发送，您必须使用此类将其转换为字节数组

*   对象输出流
*   字节数组输出流

然后通过 DatagramPacket 类发送它，但是如果您查看上面的链接，您自己的类应该可以通过添加实现可序列化接口来序列化，您将逐步获得更多详细信息并且更有帮助

# jquery - 带有 Zend 框架的 jQuery 灯箱

> ID：10358984
> 
> 赞同：0
> 
> 时间：2012-04-27T23:02:25.450
> 
> 标签：jquery, zend-framework, lightbox

我正在使用最新的 jQuery 灯箱插件（v 0.5），并且正在使用数据库中的路径来回显幻灯片的图像。我的幻灯片图像加载正常.. 但是上一个、下一个和关闭按钮的图像没有加载.. 为插件加载图像的方式是通过灯箱 javascript 文件.. 我不确定什么信息或者我应该提供的代码，因为我猜这是 Zend 框架不喜欢通过 javascript 加载图像的东西。我尝试使用背景将它们加载到 css 中：url('../image/path/image. .png'); 图像加载，但它们不在应有的位置。如果您想要代码示例，请询问。但我可以代表我向您保证没有错误，因为我根本没有更改任何灯箱代码。

谢谢

# sql - Oracle SQL -- 对一个组的分析函数？

> ID：10358986
> 
> 赞同：11
> 
> 时间：2012-04-27T23:02:46.707
> 
> 标签：sql, oracle, greatest-n-per-group

我的桌子：

```
ID   NUM   VAL
1    1     Hello
1    2     Goodbye
2    2     Hey
2    4     What's up?
3    5     See you 
```

如果我想返回每个 ID 的最大数量，那真的很干净：

```
SELECT MAX(NUM) FROM table GROUP BY (ID) 
```

但是，如果我想获取与每个 ID 的每个数字的最大值相关的值怎么办？

为什么我不能这样做：

```
SELECT MAX(NUM) OVER (ORDER BY NUM) FROM table GROUP BY (ID) 
```

为什么这是一个错误？我希望这个选择按 ID 分组，而不是为每个窗口单独分区......

编辑：错误是“不是 GROUP BY 表达式”。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-27T23:20:45.277

您可能可以使用该`MAX() KEEP(DENSE_RANK LAST...)`功能：

```
with sample_data as (
  select 1 id, 1 num, 'Hello' val from dual union all
  select 1 id, 2 num, 'Goodbye' val from dual union all
  select 2 id, 2 num, 'Hey' val from dual union all
  select 2 id, 4 num, 'What''s up?' val from dual union all
  select 3 id, 5 num, 'See you' val from dual)
select id, max(num), max(val) keep (dense_rank last order by num)
from sample_data
group by id; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-27T23:33:17.217

当您使用窗口功能时，您不再需要使用 GROUP BY，这就足够了：

```
select id, 
     max(num) over(partition by id) 
from x 
```

实际上，您可以在不使用窗口函数的情况下获得结果：

```
select * 
from x
where (id,num) in
  (
     select id, max(num) 
     from x 
     group by id
  ) 
```

输出：

```
ID  NUM VAL
1   2   Goodbye
2   4   What's up
3   5   SEE YOU 
```

[http://www.sqlfiddle.com/#!4/a9a07/7](http://www.sqlfiddle.com/#!4/a9a07/7)

* * *

如果你想使用窗口功能，你可以这样做：

```
select id, val, 
     case when num =  max(num) over(partition by id) then
        1
     else
        0
     end as to_select
from x 
where to_select = 1 
```

或这个：

```
select id, val 
from x 
where num =  max(num) over(partition by id) 
```

但由于不允许这样做，你必须这样做：

```
with list as
(
  select id, val, 
     case when num =  max(num) over(partition by id) then
        1
     else
        0
     end as to_select
  from x
)
select * 
from list 
where to_select = 1 
```

[http://www.sqlfiddle.com/#!4/a9a07/19](http://www.sqlfiddle.com/#!4/a9a07/19)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-27T23:23:53.977

如果您正在寻找包含来自的值的***行***`MAX(num) GROUP BY id`，这往往是一种常见的模式......

```
WITH
  sequenced_data
AS
(
  SELECT
    ROW_NUMBER() OVER (PARTITION BY id ORDER BY num DESC) AS sequence_id,
    *
  FROM
    yourTable
)
SELECT
  *
FROM
  sequenced_data
WHERE
  sequence_id = 1 
```

**编辑**

我不知道 TeraData 是否会允许这样做，但逻辑似乎是有道理的......

```
SELECT
  *
FROM
  yourTable
WHERE
  num = MAX(num) OVER (PARTITION BY id) 
```

或者可能...

```
SELECT
  *
FROM
(
  SELECT
    *,
    MAX(num) OVER (PARTITION BY id) AS max_num_by_id
  FROM
    yourTable
)
  AS sub_query
WHERE
  num = max_num_by_id 
```

这与我之前的回答略有不同；如果多条记录与相同的`MAX(num)`，这将返回所有记录，另一个答案将只返回一个。

**编辑**

在您提出的 SQL 中，错误与该`OVER()`子句包含不在您的 GROUP BY 中的字段这一事实有关。这就像尝试这样做...

```
SELECT id, num FROM yourTable GROUP BY id 
```

`num`是无效的，因为该字段中可以有多个值返回的每一行*（返回的行由 定义`GROUP BY id`）*。

同理，你不能放在子句`num`里面。`OVER()`

```
SELECT

  id,

  MAX(num),                <-- Valid as it is an aggregate

  MAX(num)                 <-- still valid
  OVER(PARTITION BY id),   <-- Also valid, as id is in the GROUP BY

  MAX(num)                 <-- still valid
  OVER(PARTITION BY num)   <-- Not valid, as num is not in the GROUP BY

FROM
  yourTable
GROUP BY
  id 
```

当您无法在`OVER()`子句中指定某些内容时，请参阅此问题，以及显示何时*（我认为）*可以的答案：[over-partition-by-question](https://stackoverflow.com/questions/3096552/max-and-max-over-partition-by-produces-error-3504-in-teradata-query "问题过度分区")

# ios - UILocalNotification - 可变复制

> ID：10358987
> 
> 赞同：1
> 
> 时间：2012-04-27T23:02:54.197
> 
> 标签：ios, uilocalnotification, nscopying

**概述：**

*   我正在复制一个实例`UILocalNotification`并将其更改为新创建的实例
*   然后我安排新创建的实例`UILocalNotification`

**我是如何复制的**

*   我`UILocalNotification`通过调用方法来复制实例`copy`

**问题**

1.  我是在做正确的事情还是应该使用不同的方法来创建可变副本。(`mutableCopy`未实现`UILocalNotification`
2.  复制实际上是可变复制吗？
3.  是否有必要创建一个副本，无论如何都会`scheduleLocalNotification:`创建一个新副本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-28T01:48:51.163

1.  是`copy`的，没关系。
2.  `mutableCopy`通常适用于区分不可变和可变风味的类型。由于类型没有区分，`copy`因此是“可变的”。
3.  通常，您会假设您应该需要复制参数。在这种情况下，文档指定`scheduleLocalNotification:`创建参数的副本。显式复制不是绝对必要的。

# wix - Wix：在组件、目录、文件、注册表等上使用 KeyPath

> ID：10358989
> 
> 赞同：24
> 
> 时间：2012-04-27T23:03:03.377
> 
> 标签：wix, installation, windows-installer

在阅读[了使用 WiX 时“每个组件一个文件”方法的答案](https://stackoverflow.com/a/1604348/481904)后，我很想知道在其他元素（包括、等）上使用`KeyPath`属性时的最佳实践是什么。`Component``Directory``Registry`

我对任何一般性建议都感兴趣，但这里有几个具体问题：

*   如果我有一个安装程序需要创建的空目录，我应该设置`KeyPath="yes"`它`Directory`还是它的父目录`Component`？如果不为空怎么办？
*   如果文件`KeyPath="yes"`在每个组件的文件场景中，是否有必要或良好的做法将其设置在其父组件上？
*   我在某处读到，而不是`KeyPath`在文件上设置，应该为每个文件使用注册表项并`KeyPath="yes"`在注册表元素上设置......这真的是真的/有必要吗？

谢谢！

# 编辑#1 - 澄清重新：`Directory`

我知道 Directory 没有 KeyPath，但在我的问题中没有明确/详细。主要是，当必须创建一个空目录时，我对在组件上使用 KeyPath 感到好奇。我看到 KeyPath="yes" 在这种情况下被设置在父组件上。但这足以让安装程序检测/修复丢失的空文件夹吗？还是应该与注册表项一起使用？示例片段：

```
<Directory Id="LOGS" Name="Logs">
  <Component Id="LogsDir" Guid="*" KeyPath="yes">
    <CreateFolder Directory="LOGS" />
  </Component>
</Directory> 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-28T06:10:20.510

一般来说，您应该根据`KeyPath`选项的主要思想做出决定。来自[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368007.aspx)：

> 此值指向属于 **安装程序用来检测组件**的组件的文件或文件夹。

因此，如果您为每个组件编写 1 个文件，您将不会遇到意外删除文件并且修复未将其恢复的情况。如果您为每个组件编写 N 个文件，则无论如何您要么选择其中一个`KeyPath`作为`KeyPath`.

回到你的问题：

> 如果我有一个安装程序需要创建的空目录，我应该在 Directory 上设置 KeyPath="yes" 还是

[目录](http://wix.sourceforge.net/manual-wix3/wix_xsd_directory.htm)元素没有`KeyPath`属性。

> 如果文件在每个组件的文件方案中具有 KeyPath="yes"，那么在其父组件上设置它是必要的还是良好的做法？

不，基本上，这没有意义。如果一个[Component](http://wix.sourceforge.net/manual-wix3/wix_xsd_component.htm)有`KeyPath="yes"`，那么这个组件的安装目录就成为一个关键路径。当您在[File](http://wix.sourceforge.net/manual-wix3/wix_xsd_file.htm)上显式设置它时，显然该文件是一个关键路径。

> 我在某处读到，而不是在文件上设置 KeyPath，应该为每个文件使用注册表项并在注册表元素上设置 KeyPath="yes" ......这真的是真的/必要吗？

这听起来像是胡说八道。再次，基于一般需要`KeyPath`- 检测组件。为什么需要额外的注册表项来检测文件系统上是否存在文件？对于每个组件有 N 个文件的情况，当您为每个组件（即 N 个文件）编写 1 个注册表项并让 Windows Installer 通过该注册表项判断该组件是否被认为“未损坏”时，这可能是有意义的。

**更新**：您不必仅仅为了作为帮助安装程序跟踪空文件夹的关键路径而引入注册表项。如果添加`KeyPath='yes'`到父组件就足够了。

不要把事情复杂化。Windows Installer 本身就相当复杂。：） 希望这可以帮助。

# onedrive - 使用 SkyDrive

> ID：10358993
> 
> 赞同：0
> 
> 时间：2012-04-27T23:04:14.623
> 
> 标签：onedrive

我正在尝试编写一个可以在 SkyDrive 上上传、下载和删除文件的 WPF 4.0 应用程序。

在 CodePlex 和其他地方有很多谷歌点击，以及各种“解决方案”，但没有一个有效，或者文档为零。

最接近的匹配是 this.http://msdn.microsoft.com/en-us/live/default.aspx，它用于 Metro 和这个[http://code.msdn.microsoft.com/SkyDrive-Photo-API -sample-f06778ae/](http://code.msdn.microsoft.com/SkyDrive-Photo-API-sample-f06778ae/)用于 WP7。

我查看了手机应用程序示例，它所做的只是返回一些信息。没有上传/下载功能。

谁能指出我正确的方向？有上传和下载文件的例子吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T12:46:25.230

Did you look at [SkyDrive API (Live Connect)](http://msdn.microsoft.com/en-us/library/live/hh826521.aspx)? I've found a lot of help and code examples there...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-25T05:41:44.357

您可以使用那里的 api 来实现上传、下载和删除等功能。您可以从此链接中阅读所有信息，这对我也有帮助。 [http://msdn.microsoft.com/en-us/library/live/hh826531.aspx](http://msdn.microsoft.com/en-us/library/live/hh826531.aspx)

# google-maps - Google Maps API V3 - 如何通过任意航点获得最佳往返路线

> ID：10358996
> 
> 赞同：5
> 
> 时间：2012-04-27T23:04:55.980
> 
> 标签：google-maps, map, google-maps-api-3

关于 Google Maps V3 API 航点有很多问题，但没有一个可以解决如何从一组任意航点获得最佳往返路线。基本上，称重点的顺序应由最佳路径决定，不一定由输入系统的顺序决定。有人知道这是否可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T23:34:36.547

V3 API 中有一个“优化”选项。你试过了吗？

`optimizeWaypoints`

```
If set to true, the DirectionService will attempt to re-order the supplied 
intermediate waypoints to minimize overall cost of the route. If waypoints 
are optimized, inspect DirectionsRoute.waypoint_order in the response to 
determine the new ordering.

optimizeWaypoints (optional) specifies that the route using the supplied 
waypoints may be optimized to provide the shortest possible route. 
```

第一段来自[https://developers.google.com/maps/documentation/javascript/reference](https://developers.google.com/maps/documentation/javascript/reference)。

第二个来自[https://developers.google.com/maps/documentation/javascript/directions](https://developers.google.com/maps/documentation/javascript/directions)

# python - wxPython WebView 示例

> ID：10358998
> 
> 赞同：17
> 
> 时间：2012-04-27T23:04:59.543
> 
> 标签：python, webview, wxpython

我正在使用 wxPython (wxAUI) 编写一个小型报告应用程序。我想将我的数据呈现为 HTML，以显示在 WebView 'widget' 中。我正在寻找一个示例“hello world”片段，它将显示如何在 WebView 小部件中显示/呈现 HTML 字符串 - 但无法找到单个示例 - 并且 WebView 小部件似乎没有很好的文档记录。

有人可以提供一个这样的例子的链接，或者（更好），在这里发布一个简短的片段，展示如何使用 WebView 小部件来呈现 HTML 字符串？

```
# sample html string to display in WebView widget
html_string = """
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <head>
       <title>Hello World!</title>
       <script type="text/javascript" src="jquery.js"></script>
       <style type="text/css" src="main.css"></style>
    </head>
    <body>
        <span id="foo">The quick brown fox jumped over the lazy dog</span>
        <script type="text/javascript">
        $(document.ready(function(){
           $("span#foo").click(function(){ alert('I was clicked!'); });
         });
        </script>
    </body>
</html>
""" 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-02T22:44:05.473

这是一个对我有用的简单示例。

确保您正在运行**最新**版本的 wxpython。(wxpython 2.9)

```
import wx 
import wx.html2 

class MyBrowser(wx.Dialog): 
  def __init__(self, *args, **kwds): 
    wx.Dialog.__init__(self, *args, **kwds) 
    sizer = wx.BoxSizer(wx.VERTICAL) 
    self.browser = wx.html2.WebView.New(self) 
    sizer.Add(self.browser, 1, wx.EXPAND, 10) 
    self.SetSizer(sizer) 
    self.SetSize((700, 700)) 

if __name__ == '__main__': 
  app = wx.App() 
  dialog = MyBrowser(None, -1) 
  dialog.browser.LoadURL("http://www.google.com") 
  dialog.Show() 
  app.MainLoop() 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-04-12T05:47:31.293

**在阅读了前两个条目后，我发布到这个线程，在我的帖子中我说了类似的话：**

> *这里有一个答案，但它没有回答这个问题。问题是：如何在浏览器窗口中以字符串形式显示 HTML 文件？唯一的答案是打开浏览器窗口，但从 url 获取数据并且不使用字符串内容。*

**但是后来我进一步研究了答案，我在这里发布了帖子并提出了原始问题的实际答案，即：如何从字符串中显示？：**

如果将 html 字符串赋值复制到代码示例中，但替换以下行：

```
 dialog.browser.LoadURL("http://www.google.com") 
```

和：

```
 dialog.browser.SetPage(html_string,"") 
```

一切都应该按需要工作（从字符串（而不是 url）显示 html 页面）

分享和享受！